# StackOverflow 问答 13176000-13176999

# c++ - unix 中 select 和 poll 系统调用的功能区别

> ID：13176011
> 
> 赞同：0
> 
> 时间：2012-11-01T11:23:25.527
> 
> 标签：c++, linux

我很确定人们会很难回答这个问题，说这是一个重复的问题。但我打算问一些具体的事情。我遇到了这样一个场景，其中一个 select 调用无法获得句柄，而 poll 系统调用可以识别句柄。

我没有找到任何令人欣慰的理由。让我解释一下这个场景——我试图让一个 scocket 客户端注册到不在同一台机器上的服务器。当客户端在同一台机器上时，选择系统调用可以有效地工作。但是当它不是同一台机器的一部分时，它会失败并且轮询工作。

这背后有什么普遍的共鸣吗？（注意：我正在使用 ACE 包装库）添加的代码片段

```
 int noOfHandles = 4;
            int handles[4];

            int result = thedserver->get_handles(handles,noOfHandles);

            if ((result < 0 ) || (noOfHandles <= 0))
            {
                    return -1;
            }
            ACE_Handle_Set dsdHandleSet;

            for( int i = 0 ;  i < noOfHandles ; i++)
            {
                    cout << "handles: " << handles[i] << endl;
                    dsdHandleSet.set_bit(handles[i]);
            }
            cout << "noOfHandles: " << noOfHandles << endl;
            ACE_Time_Value tv1(60, 0);

            while(1)
            {
                    int res = ACE::select(dsdHandleSet.max_set() + 1, &dsdHandleSet, 0, 0,&tv1);
                    cout << "res: " << res << endl;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:51:03.283

我想我不确定您的代码要做什么。我不知道你为什么要`while(1)`选择功能，但这里有很多问题。确保你阅读了[select()的 man](http://linux.die.net/man/2/select)

首先，您设置了超时。如果您想永远等到句柄准备好，请传递`NULL`超时值。

其次，每次运行后，`select()`修改超时时间，所以你想使用它，你必须重写它。您可以使用`pselect()`来避免这种情况。

最后，您应该在调用 select 之前使用`FD_ZERO()`and`FD_SET()`来清除和设置文件描述符。

其中一些可能是在 ACE 库中为您抽象出来的，我对此并不熟悉，但总的来说，这些是我看到的错误/缺失的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:34:41.933

我怀疑您的代码中有错误，或者文件描述符不在 FD_SETSIZE 之外（这将是代码中的错误）。在我研究过如何实现 select/poll 的系统上，select 是通过将内核内部的参数转换为等效的 poll 调用来实现的（在旧系统上反之亦然）。换句话说 - 应该没有功能差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:42:59.067

我不确定 ACE 库，但`select`系统调用*修改*了它的参数。您需要在每次调用`select`循环之前重新创建集合。

# html - IE7 可见性错误

> ID：13176012
> 
> 赞同：0
> 
> 时间：2012-11-01T11:23:30.360
> 
> 标签：html, css

我正在经历一个可见性：IE7 中的隐藏错误。我的CSS如下：

```
.image {
float:left;
width:298px;
visibility:hidden;
*visibility: hidden;
} 
```

基本上我希望隐藏 div 中包含的所有内容，但仍占用并保留空间（因此在这种情况下 display: none 不起作用）。它适用于除 IE7 之外的所有浏览器，它似乎忽略了 CSS 中的可见性行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:25:35.583

尝试使用文本缩进

```
.image {
float:left;
width:298px;

text-indent: -10000px;

} 
```

[**演示**](http://jsfiddle.net/yQuAH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:35:21.347

Dipaks 的回答几乎也是我想要的。一个稍微不同的选择是使用`left: -10000px;`See which works best cross-browser。如果您有任何问题，请尝试添加`position: relative;`到此元素和`overflow: hidden;`父元素 - 我有一种预感（我没有方便检查的 IE7 副本）IE 可能会导致该区域增加 10000 像素，这会造成混乱增加你的页面宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:41:45.903

# android - 如何使 Intent.createChooser() 创建的对话框可取消？

> ID：13176015
> 
> 赞同：4
> 
> 时间：2012-11-01T11:23:45.430
> 
> 标签：android

如何使由`Intent.createChooser()`可取消创建的对话框？换句话说：当我在**此**对话框之外点击时，我需要将其取消。

默认情况下它是这样工作的。但在某些设备（如三星 GT2）上却不是（此对话框只能通过按下`back`按钮取消）。

**注意**我说的是由`Intent.createChooser()`. 我没有参考`Dialog`它自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:47:39.693

我同意 Yul 的观点——这是不可能的，除非创建自己的选择器。`queryIntentActivities()`可以为您提供列表的内容，并且您可以根据需要设计对话框。[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot)，用于`queryIntentActivities()`填充`ListView`所有`LAUNCHER`活动，然后使用该数据启动点击条目。

就个人而言，由于大多数设备已经有这种行为，我不会打扰。自原始设备以来，我一直在使用 Android，并且在阅读您的问题之前，我没有意识到可以通过对话框的取消按钮（在旧设备上）和 BACK 按钮以外的*方式取消此对话框。*我怀疑您的用户群是否会介意您的应用程序在选择器行为方面与他们设备上的所有其他应用程序的行为相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T21:23:09.337

如果您正在这样做，`startActivityForResult`那么您可以获取`resultCode`并测试它是否是`RESULT_CANCELED`.

[在Getting a Result from an Activity 的培训文档](http://developer.android.com/training/basics/intents/result.html)和[Activity](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)本身的文档中有更多信息。

在无耻地从上述文档中借用示例的同时，我将向您展示我是如何做到的：

```
static final int PICK_CONTACT_REQUEST = 1;

private void pickContact() {
    Intent pickContactIntent = new Intent(Intent.ACTION_PICK, Uri.parse("content://contacts"));
    pickContactIntent.setType(Phone.CONTENT_TYPE);
    startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        ...
    } else if (resultCode == RESULT_CANCELED){
        ...
    }
} 
```

# iphone - 如何在 Objective-c 的 UIlabel 中添加特殊字符？

> ID：13176021
> 
> 赞同：2
> 
> 时间：2012-11-01T11:23:59.577
> 
> 标签：iphone, objective-c, uilabel, special-characters

如何在objective-c的UILabel中添加特殊字符？就像我必须在导航栏和标签栏的标题中添加“”。当我按原样写它时，它会显示一个正方形。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:34:45.413

此[链接](http://en.wikipedia.org/wiki/List_of_Unicode_characters)包含您必须使用的带有 unicode 值的字符列表。例如。

如果你想用 encircle 创建版权 C，你必须使用

```
 lblCopyRight.text=@"\u00A9 2012 Anil" 
```

以上将在标签上显示版权。

如果上面的链接不包含您的符号，那么您唯一的方法是创建一个图像并使用它设置 imageview 的属性。

**供您使用`lblRegister.text=@"\u00AE 2012"`**

# python - Python项目组织

> ID：13176027
> 
> 赞同：2
> 
> 时间：2012-11-01T11:24:19.307
> 
> 标签：python, client-server, code-organization, project-organization

昨天我开始了一个重要的 Python 项目，从那时起我一直在寻找有关如何组织代码以拥有一个“高质量”项目的文档。有很多关于如何组织包和模块的文章和官方文档，但是由于我对这种语言非常陌生，我认为这不是我的情况。

该项目是一个客户端-服务器平台，用于在本地网络中分发文件（好吧，不仅如此，但它的基本思想）。问题是它不会成为一个模块，我认为这不是一个包。至少不像 Python 文档中描述的那样：

> 包是一种使用“带点的模块名称”来构建 Python 模块命名空间的方式</p>

我也在 Git 中搜索过，看看流行的项目如何组织其代码，但其中大多数是模块，其余的......我什至不知道如何运行它们。

所以问题是，我的代码是什么（模块、包……），哪种是组织它的最佳方式？你知道这方面的好文章吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:27:57.350

是的，您的项目将是一个包。

模块是相关代码的集合。大多数不平凡的项目将是一个包中的模块集合（可能带有子包）。

# python - 在循环中更改矩阵值会产生奇怪的结果

> ID：13176029
> 
> 赞同：0
> 
> 时间：2012-11-01T11:24:28.787
> 
> 标签：python, matrix

> **可能重复：**
> [Python 列表中的意外功能](https://stackoverflow.com/questions/240178/unexpected-feature-in-a-python-list-of-lists)

我有一个用 9 x 11 的 0 填充的矩阵。我想让每行的第一个元素和每列的第一个元素的得分比前一个小 -2，所以：

```
[[0, -2, -4], [-2, 0, 0], [-4, 0, 0]] 
```

为此，我使用以下代码：

```
# make a matrix of length seq1_len by seq2_len filled with 0's\
x_row = [0]*(seq1_len+1)
matrix = [x_row]*(seq2_len+1)
# all 0's is okay for local and semi-local, but global needs 0, -2, -4 etc at first elmenents
# because of number problems need to make a new matrix
if align_type == 'global':
    for column in enumerate(matrix):
        print column[0]*-2
        matrix[column[0]][0] = column[0]*-2
for i in matrix:
    print i 
```

结果：

```
0
-2
-4
-6
-8
-10
-12
-14
-16
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[-16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

为什么它将 column[0]*-2 的最后一个值提供给所有行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:31:15.010

尝试运行此代码：

`x_row = [0]*(seq1_len+1)`

`matrix = [x_row]*(seq2_len+1)`

`matrix[4][5]=5`

`print matrix`

您会看到 5 已经扩散。这是因为第二行代码复制了相同的数据。看到这个

[列表更改意外地反映在子列表中](https://stackoverflow.com/questions/240178/unexpected-feature-in-a-python-list-of-lists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:28:09.010

这是因为您创建列表列表的方式实际上会产生一个列表，其中包含相同的列表对象，即相同`id()`，更改一个实际上也会改变其他列表：

```
In [4]: x_row = [0]*(5+1)

In [5]: matrix = [x_row]*(7+1)

In [6]: [id(x) for x in matrix]
Out[6]:                         #same id()'s, means all are same object
[172797804,
 172797804,
 172797804,
 172797804,
 172797804,
 172797804,
 172797804,
 172797804]

In [20]: matrix[0][1]=5 #changed only one

In [21]: matrix         #but it changed all
Out[21]: 
[[0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0],
 [0, 5, 0, 0, 0, 0]] 
```

您应该以这种方式创建矩阵以避免这种情况：

```
In [12]: matrix=[[0]*6 for _ in range(9)]

In [13]: [id(x) for x in matrix]
Out[13]:                           #different id()'s, so different objects 
[172796428,              
 172796812,
 172796364,
 172796268,
 172796204,
 172796140,
 172796076,
 172795980,
 172795916]

In [23]: matrix[0][1]=5  #changed only one

In [24]: matrix         #results as expected
Out[24]: 
[[0, 5, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0]] 
```

# ruby-on-rails - 未定义的方法“tripphoto_changed？” 对于 ... 载波

> ID：13176037
> 
> 赞同：4
> 
> 时间：2012-11-01T11:25:11.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

通过关联添加新旅行时，我正在尝试保存图像。

tripphoto.rb 有一个`belongs_to :trip`

我的 trip.rb 有一个`has_many :tripphotos`. 此外，Carrierwave 文档还需要一些东西，比如上传器，我已经正确设置了这些东西（它在没有关联的情况下工作！）。

连同它，我已经进入`mount_uploader :tripphoto, TripphotoUploader`了我的 trip.rb 并`accepts_nested_attributes_for :tripphotos, allow_destroy: true`让我的表单正常工作：

```
 <%= fields_for :tripphotos do |photo| %>
      Img <%= photo.file_field :filename %>
    <% end %> 
```

尽管如此，我得到错误`undefined method`tripphoto_changed？对于#`。快速谷歌没有合适的结果。有什么建议吗？

PS这是我的Tripphoto表：

```
class Tripphoto < ActiveRecord::Base {
    :id => :integer,
    :filename => :string,
    :trip_id => :integer,
    :created_at => :datetime,
    :updated_at => :datetime
} 
```

提前致谢，

编辑：根据要求我的代码：

行程.rb

```
class Trip < ActiveRecord::Base
  attr_accessible :description, :title, :user_id, 
  :triplocations_attributes, :photo, :category_ids, 
  :start_city, :tripphotos, :img_url, :thumb_url, :images,
  :tags_attributes

  # validates :title, :length => {:minimum => 3}
  # validates :description, :presence => true
  # validates_associated :tags

  has_many :triplocations, :dependent => :destroy
  has_many :tripphotos, :dependent => :destroy

  has_and_belongs_to_many :categories
  has_and_belongs_to_many :tags

  accepts_nested_attributes_for :triplocations, allow_destroy: true
  accepts_nested_attributes_for :tripphotos, allow_destroy: true
  accepts_nested_attributes_for :categories
  accepts_nested_attributes_for :tags

  mount_uploader :tripphoto, TripphotoUploader
end 
```

旅行照片.rb

```
class Tripphoto < ActiveRecord::Base
  attr_accessible :filename, :trip_id
  belongs_to :trip
end 
```

完整的旅行表格

```
<%= form_for @trip, :html => {:multipart => true} do |a| %> 
    <%= a.label :title, "Routetitel" %>
    <%= a.text_field :title %>

    <%= a.label :description, "Omschrijving" %>
    <%= a.text_area :description %>

    <%= a.label :start_city, "Stad" %>
    <%= a.text_field :start_city, :id => "cityName" %>

    <% for category in Category.find(:all) %>
        <div>
          <%= check_box_tag "trip[category_ids][]", category.id, @trip.categories.include?(category) %>
          <%= category.name %>
        </div>
    <% end %>
    <%= a.fields_for :tags do |f| %>
        <p>
            <%= f.label :title, 'Steekwoorden:' %>
            <%= f.text_field :title %>
        </p> 
        <div id="inputFields"></div>

    <% end %>
    <div style="background: red;">
        <%= fields_for :tripphotos do |photo| %>
          Img <%= photo.file_field :filename %>
        <% end %>
    </div>

    <%= a.submit 'Verstuur' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-26T20:44:44.013

我有同样的问题，

对我来说，是我忘了跑：

```
bundle exec rake db:migrate 
```

这就是 youruploaderattribute_changed 的​​原因？穆德尔中缺少方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:49:48.397

这里有两个问题：

*   您应该将上传程序安装在将存储文件名的`filename`字段上，`Tripphoto`在这种情况下是模型中的字段，而不是`tripphoto`关联。
*   你忘了`a.`前面的`fields_for`，看看你对标签做了什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-13T06:22:00.050

同样的问题，是由我的一个小错误引起的。首先我跑

```
rails generate uploader Photo 
```

并设置

```
mount_uploader :photo, PhotoUploader 
```

在模型中。但后来我在迁移中使用了“头像”而不是“照片”：

```
rails g migration add_avatar_to_users avatar:string 
```

那太愚蠢了！嗯嗯嗯 ;-)

# php - 如何从主字符串中获取 strpos() 匹配的字符串

> ID：13176040
> 
> 赞同：0
> 
> 时间：2012-11-01T11:25:33.510
> 
> 标签：php, string, strpos

考虑我们有一个 mainstring 和一个 searchstring 。

```
<?php   
$mystring = ',1,123,167,778,456';
$findme   = '123';
$pos = strpos($mystring, $findme);
if ($pos === false) {
echo "The string '$findme' was not found in the string '$mystring'";
} else {
echo "The string '$findme' was found in theenter code here string '$mystring'";
echo " and exists at position $pos";
}
?> 
```

如果我们找到 123，那么它可以正常工作并给出找到的答案字符串，但如果我们给出`$findme`值“12”，那么它也会给出肯定的答案。我想如果`strpos()`匹配一个字符串，那么这个匹配字符串保存在一个变量中。

```
strpos(',1,123,167,778,456','12'); 
```

然后 123 存储在变量中

```
$string_from_main_string = '123'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:32:52.233

更好地使用`explode`和`in_array`完成此类任务

```
$mystring = ',1,123,167,778,456';
$findme   = '123';

$arr = explode(',',$mystring);
if(in_array($findme,$arr)){
  echo "Found";
}
else{
  echo "Not Found";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:42:32.253

我认为，如果值的 strpos 为正但它在字符串中不完全可用，您想将值附加到原始字符串：

```
$a = "1,123,456,746";
$a_arr = explode(",", $a);
$findme = "123";
if (strlen(strpos($a, $findme)) > 0){
if(in_array($findme, $a_arr)){

}else{
    $a .= ",".$findme;
    array_push($a_arr, $findme);
}
} 
```

# php - 服务器正在以一种永远不会完成但使用 WAMP 成功的方式重定向对该地址的请求

> ID：13176042
> 
> 赞同：0
> 
> 时间：2012-11-01T11:25:34.800
> 
> 标签：php, .htaccess, web-applications

当我尝试打开我的登录页面时，它显示一个错误，例如“服务器正在以一种永远不会完成的方式重定向对该地址的请求”......我认为问题可能出在 .htaccess

下面是.htaccess：

开启 URL 重写

```
RewriteEngine On
Installation directory
RewriteBase

// Allow any files or directories that exist to be displayed directly

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

// Rewrite all other URLs to index.php/URL

RewriteRule .*/ index.php/$0 [PT,L] " 
```

编码的东西不是那种声音..有人可以帮我吗..顺便说一句，我已经使用 wamp 服务器在我的系统上成功测试了这个项目..但是当我在网络服务器上尝试它时出现重定向循环错误!!......它是献血者数据库的开源项目请帮助我吗？..我提供了所有相关文件的下载链接...请下载并检查它有什么问题..提前谢谢....

链接： [http ://www.uploadmb.com/dw.php?id=1351767344](http://www.uploadmb.com/dw.php?id=1351767344)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:04:09.023

问题是通过添加 / 然后附加到 index.php，您正在寻找一个文件夹“index.php”，下面有一个文件/文件夹结构。那将不存在。因此，您需要将 URL 作为参数附加：这应该可以解决问题：

```
RewriteEngine On

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*) index.php?$0 [L]   # Use [NE,L] to stop the URL being escaped. 
```

但是......您也可以使用 PHP 中的原始请求 URL，这使得 htaccess 更简单、更容易理解，而且您不会在 URL 中出现不可靠的字符（以上内容可能）

```
RewriteEngine On

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php [L] 
```

然后，在 PHP 中，

```
$originalURL = $_SERVER['REQUEST_URI']; 
```

这更容易处理，并且对于处理特殊字符更“正确”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T22:09:34.823

此错误有多种原因。Chrome 有更有意义的错误消息。

重定向规则可能存在的问题：

*   清除所有 cookie。如果 cookie 损坏，或者重定向信息存储在 cookie 中，这可能会导致问题。
*   是否有多个重定向规则？
*   检查您的 htaccess 重定向规则
*   您是否安装了多个重定向插件？
*   确保每个 url 只有 1 个重定向规则。使用相对 url 覆盖 http 和 https 协议。

# javascript - IE7/8 在 removeChild() 上的 Flowplayer 错误和崩溃

> ID：13176044
> 
> 赞同：1
> 
> 时间：2012-11-01T11:25:47.767
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-7, flowplayer

我们的 flowplayer 的 flash 版本有问题。它仅在 IE7 / IE8 中引发错误，最终导致整个浏览器在一段时间后崩溃。

Jquery 最终调用 removeChild 并导致此错误： **SCRIPT5007: Unable to get value of the property 'SetReturnValue': object is null or undefined**

生成的 DOM 包含 object 标签的 id 和 name 属性。

我有一个最小的[jsfiddle](http://jsfiddle.net/w9EYX/1/)来显示问题。

HTML 代码：

```
<div class="activeSlide">
<a href="http://www.808.dk/pics/video/gizmo.mp4" style="display:block;width: 600px; height: 400px;" id="test_123_my_video_1">
</a>
</div> 
```

JS代码：

```
$(function(){
flowplayer("test_123_my_video_1", "http://releases.flowplayer.org/swf/flowplayer-3.2.15.swf", {
    clip: {
        autoPlay: true
    }
});

setTimeout(function() {
    $(".activeSlide").remove();
}, 1000); 
```

});​</p>

感谢帮助！

# java - 这个java计算器程序可以更简化吗？

> ID：13176045
> 
> 赞同：0
> 
> 时间：2012-11-01T11:25:46.943
> 
> 标签：java, code-cleanup

我是java初学者，这是我在教程的帮助下制作的一个简单的计算器代码。这工作得很好，但你可以看到他们在这个程序中不是“构造函数”！他们只是一个扫描仪对象！这个程序是否可以通过它具有构造函数和方法的方式更加简化，作为我学习的示例？

```
import java.util.Scanner; 
public class apples {
public static void main(String args[]){
    Scanner calculator = new Scanner(System.in);
    double fnum, snum, answer;

    System.out.println("Enter first number: ");
    fnum = calculator.nextDouble();
    System.out.println("Enter second number: ");
    snum = calculator.nextDouble();
    System.out.println("enter any operator: ");
    String op = calculator.next();
    switch (op){
    case ("x") :
        answer = fnum * snum;
        System.out.println(answer);
        break;

    case ("/") :
        answer = fnum / snum;
    System.out.println(answer);
    break;

    case ("+") :
        answer = fnum + snum;
    System.out.println(answer);
    break;

    case ("-") :
        answer = fnum - snum;
    System.out.println(answer);
    break;

    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:11:45.380

一个想法是使用更多的函数式风格来减少冗余的运算符和丑陋的大小写开关，并使代码更易于维护：

```
import java.util.*;
public class apples {
    protected static final Map<String, BinOp> operators = new HashMap<String, BinOp>() {{
        put("+", new BinOp() { public double calc(double op1, double op2) { return op1 + op2; }; });
        put("-", new BinOp() { public double calc(double op1, double op2) { return op1 - op2; }; });
        put("x", new BinOp() { public double calc(double op1, double op2) { return op1 * op2; }; });
        put("/", new BinOp() { public double calc(double op1, double op2) { return op1 / op2; }; });
    }};
    public static void main(String args[]){
        Scanner calculator = new Scanner(System.in);
        double fnum, snum, answer;

        System.out.println("Enter first number: ");
        fnum = calculator.nextDouble();
        System.out.println("Enter second number: ");
        snum = calculator.nextDouble();
        System.out.println("enter any operator: ");
        String op = calculator.next();
        BinOp opFunction = operators.get(op);
        answer = opFunction.calc(fnum, snum);
        System.out.println(answer);
    }
}

interface BinOp {
    double calc(double op1, double op2);
} 
```

当然，您不应该在输入或不存在的运算符中处理双精度值。

另一个好主意是分离逻辑：

```
import java.util.*;
public class apples {
    public static void main(String args[]){
        Scanner calculator = new Scanner(System.in);
        double fnum, snum, answer;

        System.out.println("Enter first number: ");
        fnum = calculator.nextDouble();
        System.out.println("Enter second number: ");
        snum = calculator.nextDouble();
        System.out.println("enter any operator: ");
        String op = calculator.next();
        answer = calc(op, fnum, snum);
        System.out.println(answer);
    }

    public static double calc(String op, double op1, double op2) {
        switch (op) {
            case ("+"): return op1 + op2;
            case ("-"): return op1 - op2;
            case ("x"): return op1 * op2;
            case ("/"): return op1 / op2;
        }
        throw new RuntimeException("Not implemented!");
    }
} 
```

它使您的代码更具可读性和可维护性。

因为我真的很喜欢枚举：

```
import java.util.*;
public class apples {
    public static void main(String args[]){
        Scanner calculator = new Scanner(System.in);
        double fnum, snum, answer;

        System.out.println("Enter first number: ");
        fnum = calculator.nextDouble();
        System.out.println("Enter second number: ");
        snum = calculator.nextDouble();
        System.out.println("enter any operator: ");
        String op = calculator.next();
        Operation operator = Operation.get(op);
        answer = operator.calc(fnum, snum);
        System.out.println(answer);
    }
}

enum Operation {
    ADD("+") {
        public double calc(double op1, double op2) {
            return op1 + op2;
        }
    },
    SUB("-") {
        public double calc(double op1, double op2) {
            return op1 - op2;
        }
    },
    MUL("x") {
        public double calc(double op1, double op2) {
            return op1 * op2;
        }
    },
    DIV("/") {
        public double calc(double op1, double op2) {
            return op1 / op2;
        }   
    },
    ;

    Operation(String op) {
        this.op = op;
    }
    protected String op;
    public abstract double calc(double op1, double op2);
    public static Operation get(String op) {
        for (Operation operation : values()) {
            if (operation.op.equals(op)) {
                return operation;
            }
        }
        throw new RuntimeException("Not implemented!");
    }
} 
```

您也可以在其他地方使用：

```
answer = Operation.MUL(2, 3); 
```

并轻松迭代所有操作，获取名称等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:32:10.187

**更新 - - - - - - - - - - - - - - - - -**

这是我的解决方案；）：

启动器（例如，也可能来自 servlet，无论你想要什么）：

```
 public class Launcher {

    private final Scanner scanner;

    public Launcher(Scanner scanner) {
        this.scanner = scanner;
    }

    public Scanner getScanner() {
        return scanner;
    }

    public static void main(String args[]) {
        Launcher launcher = new Launcher(new Scanner(System.in));
        launcher.printResult(launcher.takeOperandInput("first"), launcher.takeOperandInput("second"),
                launcher.takeOperatorInput());
    }

    private String takeOperandInput(String operandNumber) {
        askForOperand(operandNumber);
        return getElement();
    }

    private void askForOperand(String operand) {
        System.out.println("Enter " + operand + " :");
    }

    private String takeOperatorInput() {
        askForOperator();
        return getElement();
    }

    private void askForOperator() {
        System.out.println("enter any operator (+,-,/,*): ");
    }

    private String getElement() {
        return scanner.next();
    }

    private void printResult(String leftOperand, String rightOperand, String operator) {
        Calculator calculator = new Calculator(leftOperand, rightOperand, operator);
        System.out.println(calculator.calculate());
    }
} 
```

这里的`Calculator`类：

```
public class Calculator {

    private final Operands operands;

    private final OperationType operationType;

    public Calculator(String leftOperand, String rightOperand, String operationType) {
        this.operands = new Operands(leftOperand,  rightOperand);
        this.operationType = OperationType.transform(operationType);;
    }

    public double calculate() {
        return operationType.calculate(operands);
    }
} 
```

这里是不可变的`Operands`类：

```
final class Operands {

    private final double leftOperand;

    private final double rightOperand;

    public Operands(String leftOperand, String rightOperand) {
        this.leftOperand = Double.parseDouble(leftOperand);
        this.rightOperand = Double.parseDouble(rightOperand);
    }

    public final double getLeftOperand() {
        return leftOperand;
    }

    public final double getRightOperand() {
        return rightOperand;
    }
} 
```

这里`OperationType`包含逻辑的枚举：

```
enum OperationType {

    ADDITION("+") {
        public double calculate(Operands operands) {
            return operands.getLeftOperand() + operands.getRightOperand();
        }
    },
    SUBTRACTION("-") {
        public double calculate(Operands operands) {
            return operands.getLeftOperand() - operands.getRightOperand();
        }
    },
    MULTIPLICATION("*") {
        public double calculate(Operands operands) {
            return operands.getLeftOperand() * operands.getRightOperand();
        }
    },
    DIVISION("/") {
        public double calculate(Operands operands) {
            return operands.getLeftOperand() / operands.getRightOperand();
        }
    };

    private String operationType;

    private OperationType(String operationType) {
        this.operationType = operationType;
    }

    abstract double calculate(Operands operands);

    static OperationType transform(String operationType) {
        for (OperationType ot : values()) {
            if (ot.operationType.equals(operationType)) {
                return ot;
            }
        }
        throw new IllegalArgumentException("Unknown operator, please redo your operation.");
    }
} 
```

# php - 为什么 "echo '2' . print(2) + 3" 打印 521？

> ID：13176046
> 
> 赞同：18
> 
> 时间：2012-11-01T11:25:51.960
> 
> 标签：php

谁能告诉下面表达式的内部过程？

```
<?php echo '2' . print(2) + 3; ?>
// outputs 521 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T11:29:27.580

`print`不是一个函数，所以括号不像你想象的那样工作。它获取表达式`(2) + 3`( `5`) 的值并输出它。它返回`1`自身，连接到`'2'`，然后`echo`ed 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T11:31:53.350

`print(2) + 3`将导致 5 （它与`print (2 + 3)`or相同`print 2+3`。由于在这种情况下 print 实际上不是函数，因此括号几乎没有意义。最后要注意的一件事是`print`在`echo`.

到目前为止的输出是：`5`

`echo '2' . print`将导致 21 因为 print 总是返回 1

现在的输出是：'521'

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-01T11:43:17.417

回显由以下组成的连接字符串：

字符串 '2' 函数 print('2') 的结果，返回 true，字符串化为 1 字符串 '3'

现在，这里的操作顺序真的很有趣，根本不能以 521 结尾！让我们尝试一个变体来找出问题所在。

回声'2'.print(2) + 3; 这产生 521

PHP 将其解析为：

回声“2”。(print('2') + '3')) 宾果游戏！左边的打印首先被评估，打印“5”，这让我们

回声“1”。print('2') 然后左边的 print 被评估，所以我们现在打印了 '52'，剩下的就是

回声“1”。'1' ; 成功。521.

我强烈建议不要回显打印结果，也不打印回显结果。这样做一开始是非常荒谬的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T11:30:07.340

首先将 2 和 3 相加，得到 5，即输出。

下一个打印`1`总是返回。该返回值与`2`get连接，`21`然后回显。

# regex - 正则表达式修改标签之间的文本 as3

> ID：13176054
> 
> 赞同：0
> 
> 时间：2012-11-01T11:26:25.460
> 
> 标签：regex, actionscript-3, replace, html

我有一些将出现在我的 XML 中的 html 标签，我想替换以下标签格式之间的所有文本

```
<p><b>Text to be replaced</b><br/></p> 
```

这里要替换的***文本***应替换为任何文本。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:58:54.500

你试过这个吗：-

```
var pattern:RegExp = /<p><b>.*?<\/b><br\/><\/p>/; 
str.replace(pattern, "<p><b>any text</b><br/></p>"); 
```

# filesystems - 什么是更快地复制或克隆 FreeBSD 分区？

> ID：13176055
> 
> 赞同：1
> 
> 时间：2012-11-01T11:26:27.967
> 
> 标签：filesystems, copy, clone, freebsd

我们面临的问题是 FreeBSD 分区中没有剩余空间。所以我们决定获取一个新磁盘并安装它而不是旧磁盘。所以我的问题是使用标准 cp 复制分区内容或使用其他工具克隆更快？分区的文件系统是UFS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:00:40.190

看看`dump`/ `restore`。它们是专门构建的工具，可以完美地复制文件，而`cp`可能会或可能不会取决于你给它的标志是否错过了正确设置属性/所有权。

# tomcat7 - 在tomcat上安装jforum

> ID：13176059
> 
> 赞同：1
> 
> 时间：2012-11-01T11:26:42.480
> 
> 标签：tomcat7

我已将 jforum 放在 tomcat 的 web 应用程序目录中，然后我调用“http://localhost:8080/jforum-2.1.9/install.jsp”然后错误来了

```
http://localhost:8005/jforum-2.1.9/install.jsp 
```

HTTP 状态 404 - /jforum-2.1.9/install.jsp

* * *

类型状态报告

消息 /jforum-2.1.9/install.jsp

描述 请求的资源不可用。

* * *

Apache Tomcat/7.0.32

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:53:26.293

请检查您的 Tomcat 服务器。它不应该将您重定向到端口 8005。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-03T09:22:20.613

正如提到的[jforum 站点](http://jforum.net/install.jsp)，您应该检查以下文件夹。我知道 Zip 包涉及这些文件夹，而源代码 zip 文件没有。

1.  `upload`
2.  `tmp`
3.  `images`
4.  `WEB-INF/config`
5.  `WEB-INF/jforumLuceneIndex`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T07:13:57.613

尝试将您的文件夹从 jforum-2.1.9 重命名为 jforum。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T01:50:24.293

试试这个`http://localhost:8080/jforum/install.jsp` tomcat的默认端口是8080

# javafx-2 - 如何获得节点的清晰图像

> ID：13176060
> 
> 赞同：0
> 
> 时间：2012-11-01T11:26:42.010
> 
> 标签：javafx-2

我使用以下代码生成节点的图像并将其与 ImageView 一起添加到我的场景中：

```
SnapshotParameters snapParams = new SnapshotParameters();
snapParams.setFill(Color.TRANSPARENT);
this.dragImage = new ImageView(draggable.snapshot(snapParams, null));

...

frontPane.getChildren().add(this.dragImage);
Bounds localBounds = frontPane.sceneToLocal(draggable
    .localToScene(draggable.getBoundsInLocal()));
this.dragImage.relocate(localBounds.getMinX(),
localBounds.getMinY()); 
```

不幸的是，从我的屏幕截图中可以看出，渲染的图像非常模糊。任何可能存在问题或如何检索未模糊图像的想法都将受到欢迎。

更新：

在玩耍时我删除了

```
this.dragImage.relocate(localBounds.getMinX(),localBounds.getMinY()); 
```

这会产生一个清晰的图像，完全没有模糊。我不知道为什么会这样，我仍然需要将图像翻译到正确的位置。

![模糊的快照](../Images/2d83575e388920bccaede9e0bbed8dc9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:32:37.390

我在 relocate 调用中通过简单的转换为 int 消除了模糊：

```
this.dragImage.relocate((int) localBounds.getMinX(),(int) localBounds.getMinY()); 
```

我发现`localBounds.getMinX()`是 638.5 和`localBounds.getMinY()`136.5。进一步的实验使我得出结论，平移的非整数值导致图像模糊。

对此的解释可以在“与坐标系交互”的[Shape的 API 文档中找到。](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/Shape.html)

# python - 使用字符串访问数据存储列

> ID：13176065
> 
> 赞同：1
> 
> 时间：2012-11-01T11:27:13.117
> 
> 标签：python, google-app-engine, google-cloud-datastore

浏览了文档，无法解决这个问题。

是否可以在 GAE 上使用 Python 中的字符串访问从数据存储中检索到的实体的属性？

类似employee.name 但employee.<>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:32:31.400

如果我理解正确，你可以这样做：

```
getattr(MyModel, attrib_name) 
```

这将检索属性`attrib_name`

# android - 更新 ListView 的项目以完成某些操作

> ID：13176069
> 
> 赞同：1
> 
> 时间：2012-11-01T11:27:19.730
> 
> 标签：android, listview

我搜索了这个，并尝试了很多东西，有一段时间它似乎解决了，但它不是

这是我的应用程序行为：

**1\. ListView 的第一个 10 项从 AsyncTask 中的 Web 服务器获取，并存储在 ArrayList 中。**

**2.将此ArrayList设置为Adapter**

**3\. onScroll，如果到达最后一项，再获取10个项目，添加到ArrayList等**

*问题：*

每个项目都有一个按钮 to Thanks ，它的初始计数取自 ArrayList 中该特定项目的数据。

让它成为**10**

由于这是一个操作项，因此我在适配器的**getView()**中有一个用于此按钮的**onClickListener**。

 **```
onClick(){

//change the count to count+1 or change 10 to 11
} 
```

这有效，但是当我滚动列表时，此计数设置回**count (10)**而不是保留**count + 1 (11)**。这是因为正在重新创建项目，并且用于获取计数的数据来自 ArrayList，它是旧的 1 (10)。为了完成这项工作，我需要更新服务器中的数据，将其取回并存储在 ArrayList 中并使用它来获取**count + 1 (11)**。

有没有办法做到这一点。因为每次单击操作项时，我都无法调用服务器为我提供新数据。因为这将像重新创建 ListView 一样，丢失所有滚动项目。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:37:44.797

如果通过焦点您的意思是选择（通过键盘向下滚动，周围有选择矩形），那么只需使用`setOnItemSelectedListener`. int 参数是位置，将其与列表中的项目数进行比较，您就可以了。

如果通过焦点你的意思是可见的，那么使用`setOnScrollListener`，它有这个方法：

```
onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 
```

Just first + visible 将显示最后一个项目，您可以将其与总数进行比较。然后用剩余的项目写更新适配器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:04:20.257

如果你想在滚动上加载更多数据，那么试试这个

首先实施`OnScrollListener`

并实施覆盖

```
@Override
    public void onScroll(AbsListView view,
            int firstVisible, int visibleCount, int totalCount) {

        boolean loadMore = firstVisible + visibleCount >= totalCount;

            if(loadMore) {
                Remainingdata=totaldata-(firstVisible + visibleCount);
                System.out.println(totaldata);
                System.out.println(visibleCount);
                System.out.println(Remainingdata);
                if(Remainingdata<visibleCount){
                    yourlist.count += Remainingdata; // or any other amount
                }else{
                    yourlist.count += visibleCount; // or any other amount
                }
                yourlist.notifyDataSetChanged();
            }
    }

    @Override
     public void onScrollStateChanged(AbsListView v, int s) { } 
```**

# bazaar - 从较早的集市提交中删除更改

> ID：13176074
> 
> 赞同：4
> 
> 时间：2012-11-01T11:27:47.140
> 
> 标签：bazaar, rebase

我正在集市的一个功能分支上工作。为了在本地构建项目，我在本地修改了一个文件 ( `build`)，尽管我不希望此更改包含在我的提交中。大多数时候我记得从 中排除该文件`bzr commit`，或者在看到摘要时中止，但是在几次提交之前我确实忽略了它，现在本地更改已进入历史记录。

在提交我的分支之前，我想清理一下。有没有办法从先前的提交中删除该更改，而无需恢复到之前的状态并重新执行所有提交？当然，这确实涉及改写历史。

澄清一下：在 git 中，我会使用`git rebase -i`并只编辑提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:46:59.253

[bzr-rewrite](https://launchpad.net/bzr-rewrite)插件提供与`git rebase`. 它应该与 Windows 和 Mac OS X 的安装程序捆绑在一起。对于 Linux，根据您的发行版，它可能是一个单独的包。

编辑： bzr-rewrite 插件不提供交互模式，所以在这种情况下它不会有帮助。

# android - 检测 HDMI 连接

> ID：13176077
> 
> 赞同：1
> 
> 时间：2012-11-01T11:27:51.920
> 
> 标签：android

如何检测 HDMI 电缆是否从设备中插入或拔出？是否有一个发送的意图，我可以用广播接收器拦截。还是有隐藏的api来检测HDMI的安装？每当将 hdmi 插入设备时，我都想开始一项活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:37:52.817

对于 Sony 设备您可以参考他们的官方博客：[如何使用 Hidden HDMI API？](http://developer.sonymobile.com/2012/05/29/how-to-use-the-hidden-hdmi-api-tutorial/)

***博客说：*** 这个 Sony 特定的 API 将被弃用。请改用隐藏的 Android Intent “android.intent.action.HDMI_PLUGGED”。运行 Ice Cream Sandwich 和 Jellybean 的智能手机支持此功能。请继续关注 Developer World 以获取更多信息。

# asp.net-mvc - 使用 asp.net mvc 为类生成不显眼的验证器？

> ID：13176080
> 
> 赞同：1
> 
> 时间：2012-11-01T11:28:01.583
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想创建一个页面来添加、编辑和删除对象集合。我想用 javascript 进行添加/编辑/删除操作。现在，我有以下 HTML：

```
<table class="table table-striped">
    <thead>
        <tr>
            <td>Name</td>
            <td>Number</td>
            <td>Country</td>
            <td></td>
        </tr>
    </thead>
    <tbody>
    @foreach(var n in Model)
    {
        <tr>
            <td class="name">@n.Name</td>
            <td class="value">@n.Value</td>
            <td class="country-name">@n.CountryName</td>
            <td><ahref="#">Edit</a> | <a href="#">Delete</a></td>
        </tr>
    }
    </tbody>
</table>

<div class="modal">
    <form>
        <label>Name</label>
        <input type="text" />
        <label>Value</label>
        <input type="text />
        <button type="submit">Save</button>
    </form>
</div> 
```

如果用户按下“编辑”，javascript 代码会`modal`使用相关数据填充 div 并将其显示在屏幕上。当用户按下“提交”时，将使用 ajax 提交数据，隐藏模式对话框，并使用新数据更新表格。

我想在提交之前验证表单。如果可能的话，我想使用不显眼的客户端验证系统，以便对我的模型类的数据注释的更改自动反映在客户端代码中。在一个更标准的示例中，我可以使用这些`@Html.EditorFor()`方法来生成正确的 HTML，但这在这里是不可能的。

使用 html 元素上的属性控制不显眼的验证，如下所示：

```
<input data-val="true" data-val-required="This field is required." id="Name"
    name="Name" type="text">
<span class="field-validation-valid" data-valmsg-for="Name"
     data-valmsg-replace="true"></span> 
```

是否可以在不引用该类的特定实例的情况下为特定模型类生成相关的 HTML？或者我可以使用其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:21:11.320

一种[公认](https://stackoverflow.com/questions/4764011/multiple-models-in-a-view)的方法是对模态 div 使用局部视图。这不需要模型的实例。

也可以指定 EditorFor 方法的泛型类型参数并创建一个新的 HtmlHelper。下面的代码片段放置在 MVC3 项目模板附带的 LogOn.cshtml 视图中。

```
@(EditorExtensions.EditorFor<MvcApplication9.Models.RegisterModel, string>(new HtmlHelper<MvcApplication9.Models.RegisterModel>(ViewContext, this), m => m.Email)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:51:06.870

我决定创建一种方法来手动为输入生成 data-val 属性。这里是：

```
public static MvcHtmlString DataAttributesFor<TMdl>(Expression<Func<TMdl,object>> exp)
{
    string prop;
    if (exp.Body is UnaryExpression)
        prop = ((exp.Body as UnaryExpression).Operand as MemberExpression).Member.Name;
    else if (exp.Body is MemberExpression)
        prop = (exp.Body as MemberExpression).Member.Name;
    else
        throw new ArgumentException("Given selector expression is unsupported.");

    var attrs = typeof(TMdl).GetProperty(prop).GetCustomAttributes();
    var dict = new Dictionary<string,string>();
    foreach (var elm in attrs)
    {
        if (elm.GetType() == typeof(RequiredAttribute))
            dict.Add("data-val-required", ((RequiredAttribute)elm).FormatErrorMessage(null));
        else if (elm.GetType() == typeof(RegularExpressionAttribute))
        {
            var re = (RegularExpressionAttribute)elm;
            dict.Add("data-val-regex", re.FormatErrorMessage(null));
            dict.Add("data-val-regex-pattern", re.Pattern);
        }
        else if (elm.GetType() == typeof(StringLengthAttribute))
        {
            var sl = (StringLengthAttribute)elm;
            dict.Add("data-val-length", sl.MaximumLength.ToString());
            dict.Add("data-val-length-max", sl.FormatErrorMessage(null));
        }
    }

    if (dict.Count == 0)
        return null;

    var sb = new StringBuilder("data-val='true'");
    foreach (var rr in dict)
        sb.Append(" " + rr.Key + "='" + rr.Value + "'");

    return new MvcHtmlString(sb.ToString());            
} 
```

你像这样使用它：

```
<input id="record-name" type="text" name="record-name"
 @(HtmlExtensions.DataAttributesFor<PhoneNumberVm>(elm => elm.Name))
/> 
```

该方法不是很健壮，并且不适用于所有数据注释属性，但它可能为某人提供有用的起点。

# iphone - 验证电话号码 ios

> ID：13176083
> 
> 赞同：27
> 
> 时间：2012-11-01T11:28:10.447
> 
> 标签：iphone, ios, regex, ipad

我需要验证国际电话号码。

我知道验证国际电话号码很困难，所以我将保持简单：

`+`或 00 然后 6-14 个数字

由于某种我无法解决的原因，我当前使用正则表达式的代码无法正常工作。它只是说它无法打开正则表达式并崩溃。

这是我当前的代码：

```
NSString *phoneRegex = @"^[\+(00)][0-9]{6,14}$";
NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex];

BOOL phoneValidates = [phoneTest evaluateWithObject:phoneNumber]; 
```

我哪里错了？

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-01T12:11:17.000

```
NSString *phoneRegex = @"^((\\+)|(00))[0-9]{6,14}$"; 
```

这种方式好一点。如果您转义“\”，您的代码也可以正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-20T19:41:28.453

**复制和粘贴**方法来验证电话号码：

```
- (BOOL)validatePhone:(NSString *)phoneNumber
{
    NSString *phoneRegex = @"^((\\+)|(00))[0-9]{6,14}$";
    NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex];

    return [phoneTest evaluateWithObject:phoneNumber];
} 
```

或用于验证电话号码的**开源**库

[https://github.com/iziz/libPhoneNumber-iOS](https://github.com/iziz/libPhoneNumber-iOS)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:36:49.860

好吧，这取决于您想要的严格程度，这个正则表达式似乎并不是特别严格。这个正则表达式说：

从行首开始匹配一个 +（或者可能是 1 或 0），这似乎模棱两可（但可能不取决于实现），因为捕获括号：() 打破了 + 和 ? 可能放错了位置：匹配任何数字 0-9 1 或 0 次 6-14 次，然后是一个数字 0-9，然后是行尾。您还注意到，任何反斜杠都必须加倍...... @"\b" 用于单词边界。您可能想尝试类似...

```
@"\\b[\\d]{3}\\-[\\d]{3}\\-[\\d]{4}\\b"
would I think match your example, but it wouldn't match
(555) 555 - 5555 or
555.555.5555 or
+44 1865  55555 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-27T11:26:37.777

`NSString *phoneRegex = @"^((\\+)|(00))[0-9]{6,14}|[0-9]{6,14}$";`

这是经过测试的 RegularExpression 这将接受带有国家代码或不带国家代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-10T10:39:57.283

txtlpmobile.text 是字符串（手机不输入）

```
 int length = [self getLength:txtLpMobile.text];
            if(length == 10) {
                if(range.length == 0)
                    return NO;
            }
            if(length == 3){
                NSString *num = [self formatNumber:txtLpMobile.text];
                txtLpMobile.text = [NSString stringWithFormat:@"(%@) ",num];

                if(range.length > 0) {
                    txtLpMobile.text = [NSString stringWithFormat:@"%@",[num substringToIndex:3]];

                }
            } else if(length == 6) {
                NSString *num = [self formatNumber:txtLpMobile.text];
                txtLpMobile.text = [NSString stringWithFormat:@"(%@) %@-",[num  substringToIndex:3],[num substringFromIndex:3]];
                if(range.length > 0) {
                    txtLpMobile.text = [NSString stringWithFormat:@"(%@) %@",[num substringToIndex:3],[num substringFromIndex:3]];
                }
            }

            NSUInteger newLength;
            newLength = [txtLpMobile.text length] + [string length] - range.length;
            NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:NUMBERS_ONLY] invertedSet];
            NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
            return (([string isEqualToString:filtered])&&(newLength <= CHARACTER_LIMIT)); 
```

用于格式化数字

```
-(NSString*)formatNumber:(NSString*)mobileNumber
{
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    int length = [mobileNumber length];
    if(length > 10)
    {
        mobileNumber = [mobileNumber substringFromIndex: length-10];
    }
    return mobileNumber;
} 
```

为了获得长度

```
-(int)getLength:(NSString*)mobileNumber
{
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    int length = [mobileNumber length];

    return length;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-24T13:27:10.623

验证电话号码的唯一好方法是使用[Google 惊人的 LibPhoneNumber](https://github.com/googlei18n/libphonenumber)。有一个 iOS 端口，或者您可以在隐藏的`UIWebView`.

（几年前我已经完成了后者，当时他们还没有 iOS 端口。就像一个魅力，即使在旧 iPhone 上也非常快。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-01T09:28:26.207

验证电话号码和密码限制的简单方法，只需按照以下过程。

```
if ((self.mobileTxtFld.text.length < 10 )) {
    [_mobileTxtFld becomeFirstResponder];
}
else if ((self.passwordTxtFld.text.length < kPasswordCharacterMinLimit) || (self.passwordTxtFld.text.length > kPasswordCharacterMaxLimit)) {
    // show alert
} 
```

之后，您可以实现文本文件委托方法“shouldChangeCharactersInRange”，只需编写此代码

```
if (textField == _mobileTxtFld) {
    if([string rangeOfCharacterFromSet:ALLOWED_NUMBERS].location == NSNotFound){
        NSUInteger newLength = [textField.text length] + [string length] - range.length;
        if(newLength > kMobileNumberLimit - 1){
            if(textField.text.length != kMobileNumberLimit){
                textField.text  = [NSString stringWithFormat:@"%@%@",textField.text,string];
            }
            [textField resignFirstResponder];
            return NO;
        }
        else{
            return YES;
        }
    }
    else{
        return NO;
    }
}

return YES; 
```

这里 ALLOWED_NUMBERS 和 kMobileNumberLimit 是

```
#define kMobileNumberLimit 10
#define ALLOWED_NUMBERS [[NSCharacterSet decimalDigitCharacterSet] invertedSet]
#define minLimit 6
#define maxLimit 17 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-26T09:17:44.527

在迅速 4 -

```
func ValidateMobileNumber(txtFeid : UITextField, strChk : String, range: NSRange) -> Bool {

    if txtFeid.text!.count >= 10 {
        return false
    } 

    let formatePre = "^((\\+)|(00))[0-9]{6,14}$"
    let resultPredicate : NSPredicate = NSPredicate(format: "SELF MATCHES %@",formatePre)
    return resultPredicate.evaluate(with: strChk)
} 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-09-24T11:13:02.233

```
-(int)findLength:(NSString*)phoneNumber
{
    phoneNumber = [phoneNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    phoneNumber = [phoneNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    phoneNumber = [phoneNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    phoneNumber = [phoneNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    phoneNumber = [phoneNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

int length = [phoneNumber length];

return length; 
```

}

# javascript - 将keydown添加到点击事件

> ID：13176089
> 
> 赞同：2
> 
> 时间：2012-11-01T11:28:36.733
> 
> 标签：javascript, jquery

编辑**

在我的文字游戏中，有一个带有 3 个字母单词的网格。

游戏的目的是通过单击侧面的相应字母来拼写单词。

当网格中的某个区域被突出显示时，它会向用户指示要拼写的单词。用户单击网格一侧的字母，它们会移动到突出显示的区域。

单击一个字母时，它将动画到网格中的相应区域。我想让它尽可能地对用户友好，所以我想另外添加“keyDown()”，以便当用户按下“a”时它会在屏幕上显示动画。

字母像这样存储在 HTML 中

```
<div class="tiles-wrapper">

        <div id="drag1" class="drag ui-widget-content player-tiles2" tabindex="0" data-letter="a">
        <p>a</p>
        </div>

        <div id="drag2" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="b">
        <p>b</p>
        </div>

        <div id="drag3" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="c">
        <p>c</p>
        </div>

        <div id="drag4" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="d">
        <p>d</p>
        </div>

        <div id="drag5" class="drag ui-widget-content player-tiles2" tabindex="0" data-letter="e">
        <p>e</p>
        </div>

        <div id="drag6" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="f">
        <p>f</p>
        </div>

        <div id="drag7" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="g">
        <p>g</p>
        </div>

        <div id="drag8" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="h">
        <p>h</p>
        </div>

        <div id="drag9" class="drag ui-widget-content player-tiles2" tabindex="0" data-letter="i">
        <p>i</p>
        </div>

         <div id="drag10" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="j">
        <p>j</p>
        </div>

        <div id="drag11" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="k">
        <p>k</p>
        </div>

        <div id="drag12" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="l">
        <p>l</p>
        </div>

        <div id="drag13" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="m">
        <p>m</p>
        </div>

        <div id="drag14" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="n">
        <p>n</p>
        </div>

        <div id="drag15" class="drag ui-widget-content player-tiles2" tabindex="0" data-letter="o">
        <p>o</p>
        </div>

        <div id="drag16" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="p">
        <p>p</p>
        </div>

        <div id="drag17" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="q">
        <p>q</p>
        </div>

        <div id="drag18" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="r">
        <p>r</p>
        </div>

        <div id="drag19" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="s">
        <p>s</p>
        </div>

        <div id="drag20" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="t">
        <p>t</p>
        </div>

        <div id="drag21" class="drag ui-widget-content player-tiles2" tabindex="0" data-letter="u">
        <p>u</p>
        </div>

        <div id="drag22" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="v">
        <p>v</p>
        </div>

        <div id="drag23" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="w">
        <p>w</p>
        </div>

        <div id="drag24" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="x">
        <p>x</p>
        </div>

        <div id="drag25" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="y">
        <p>y</p>
        </div>

        <div id="drag26" class="drag ui-widget-content player-tiles" tabindex="0" data-letter="z">
        <p>z</p>
        </div> 
```

我有一些脚本，但我不知道如何将其链接起来

```
$(document).keypress(function(e){  

        if (e.which >= 97 && e.which <= 122) {  
              animateDrag(String.fromCharCode(e.which));  
    } 

}); 
```

[http://jsfiddle.net/smilburn/Dxxmh/88/](http://jsfiddle.net/smilburn/Dxxmh/88/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:38:49.073

您可以通过`click`在适当的字母 div 上触发事件来做到这一点，如下所示：

```
$(document).keypress(function(e){ 
            if (e.which >= 97 && e.which <= 122) {  
                  letter = String.fromCharCode(e.which);
                  $(".drag[data-letter='"+letter+"']").trigger('click');
            }

}); 
```

查看工作[**演示**](http://jsfiddle.net/Dxxmh/92/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:38:34.620

```
$().ready(function() {
   $('div.player-tiles, div.player-tiles2').keypress(function(e) {
      if (e.which >= 97 && e.which <= 122) {  
          animateDrag(String.fromCharCode(e.which));  
      } 
   })
}) 
```

# java - 在图像中打印行分隔符

> ID：13176092
> 
> 赞同：1
> 
> 时间：2012-11-01T11:29:07.583
> 
> 标签：java, string, image, newline

> **可能重复：**
> [Graphics2D.drawString 中的换行问题](https://stackoverflow.com/questions/4413132/problems-with-newline-in-graphics2d-drawstring)

```
String eol =System.lineSeparator();  
        String sampleText =epcURNText +eol+studentName+eol+DelayComments+eol+ArrivalMethodComments+eol;
        System.out.println(sampleText);
        Font font = new Font("Tahoma", Font.PLAIN, 11);
        FontRenderContext frc = new FontRenderContext(null, true, true);

        //get the height and width of the text
        Rectangle2D bounds = font.getStringBounds(sampleText, frc);
        int w = (int) bounds.getWidth();
        int h = (int) bounds.getHeight();

        //create a BufferedImage object
        BufferedImage image = new BufferedImage(w, h,
                BufferedImage.TYPE_INT_RGB);

        //calling createGraphics() to get the Graphics2D
        Graphics2D g = image.createGraphics();

        //set color and other parameters
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, w, h);
        g.setColor(Color.BLACK);
        g.setFont(font);

        g.drawString(sampleText, (float) bounds.getX(),
                (float) -bounds.getY());

        //releasing resources
        g.dispose();

        // define the format of print document
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        ImageIO.write(image, "gif", os);
        File f = new File("MyFile.jpg");
        ImageIO.write(image, "JPEG", f); 
```

在上述代码中，我试图在图像中打印带有换行符的字符串。但是，换行符被省略，因此我的文本显示在一行中？有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:55:09.630

`JLabel`以 HTML 格式呈现文本，如[本答案](https://stackoverflow.com/a/5853992/418556)`LabelRenderTest`中的源代码所示。

![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

它提供了比换行符更好的东西——体宽的样式。更好的是，我们不需要手动计算在哪里放置文本换行符（也可能以非固定宽度的字体呈现）。

# magento - 结帐成功后如何发送电子邮件？

> ID：13176094
> 
> 赞同：4
> 
> 时间：2012-11-01T11:29:24.750
> 
> 标签：magento

在我的商店中，我为一步结账流程创建了一个自定义模块。

所有代码都可以正常工作。但是在结账过程之后，订单详细信息电子邮件不会发送给客户。这是我的代码的相关部分。

```
$service = Mage::getModel('sales/service_quote', $quote);
$service->submitAll();                          
$order = $service->getOrder();

//This one is the email send code

$order_mail = new Mage_Sales_Model_Order();
$incrementId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
$order_mail->loadByIncrementId($incrementId);
$order_mail->sendNewOrderEmail();               

$this->_redirect('downloadable/customer/products/'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:18:05.297

在 magento 中发送/重新发送订单电子邮件

```
try {

    $incrementId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
    $_order = Mage::getModel('sales/order')->loadByIncrementId($incrementId);
    $_order->sendNewOrderEmail();

    $this->_getSession()->addSuccess($this->__('The order email has been sent.'));

} catch (Exception $e) {
    $this->_getSession()->addError($this->__('Failed to send the order email.'));
    Mage::logException($e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:42:57.587

尝试将其放入 try catch 以查看错误是这样的

```
<?php
  $order_mail = new Mage_Sales_Model_Order();
  $incrementId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
  $order_mail->loadByIncrementId($incrementId);
  try
  {
  $order_mail->sendNewOrderEmail();
  } catch (Exception $ex) {  }
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:23:30.207

当它进入 sendNewOrderEmail 时你调试了吗？也许这有助于找出问题所在？

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T20:02:20.413

试试这个，

```
 < ?php
$order = new Mage_Sales_Model_Order();
$incrementId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
$order->loadByIncrementId($incrementId);
try
{
$order->sendNewOrderEmail();
} catch (Exception $ex) {  }
?> 
```

将上面的代码片段保存为 .phtml 并上传到 app/code/core/Mage。

现在在您的网站下订单并在成功结帐后检查电子邮件是否发送。希望您的问题现在应该解决。

# jquery - 如何从此脚本中删除 # 字符？

> ID：13176095
> 
> 赞同：0
> 
> 时间：2012-11-01T11:29:24.900
> 
> 标签：jquery

我正在使用脚本来执行从页面到页面的 ajax 调用，我无法理解的是为什么每个 href 单击浏览器当前位置更改为 www.blabla/#index 看看下面的代码，我的目标是将当前位置更改为没有“#”的东西 -www.blabla/index

```
$("document").ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#tabs-bar li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('#tabs-bar li a').click(function(){

    var toLoad = $(this).attr('href')+' #content';
    /// $('#content').fadeOut('100');
    $('#content').empty();
    $('#load').remove();
    $('#profile-cv').addClass("loading");
    //$('#content').append('<div class="loading"></div>');

    setTimeout(function () { loadContent(); }, 1000);

    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);

    function loadContent() {
        $('#profile-cv').load(toLoad,showNewContent())
    }
    function showNewContent() {
        $('#profile-cv').append(hideLoader());
    }
    function hideLoader() {
        $('#profile-cv').removeClass("loading");

    }
    return false;

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:14:56.823

你正在设置

```
window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5); 
```

location.hash**总是**添加“#”。

查看[PJAX 库](https://github.com/defunkt/jquery-pjax)，这样就可以修改 url。

**更新**

该库使用新的 HTML5 `history.pushState`API。不幸的是，它在任何 IE 中都不起作用，除了 IE 10。

[这个不错的教程](http://diveintohtml5.info/history.html)应该可以帮助您实现它。

如果您需要旧浏览器的后备解决方案，您可以使用[PJAX](https://github.com/defunkt/jquery-pjax)或[history.js](https://github.com/balupton/history.js)等库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:31:32.010

您需要停止执行事件的默认操作。

用于`e.preventDefault();`实现这一点 -`e`是回调函数的第一个参数：

```
$('#tabs-bar li a').click(function(e) {
    e.preventDefault();
    var toLoad = $(this).attr('href') + ' #content';
    ...
}); 
```

# mysql - 如何在 bash 脚本中将变量传递给 SSH 命令

> ID：13176099
> 
> 赞同：3
> 
> 时间：2012-11-01T11:29:43.200
> 
> 标签：mysql, wordpress, bash, unix, ssh

我是 bash 脚本的新手，正在尝试编写一个脚本来将我的本地 Wordpress 数据库与远程数据库同步。这里是：

```
#!/bin/sh 

RUSER=example-admin 
RHOST=ftp.example.com 
RDBUSER=wp_admin
RDB=wp_db
RDBHOST=localhost
RBAK=.backup/latest-remote-db.mssql 

LUSER=root
LPASS=root
LHOST=localhost
LDB=wp_db
LBAK=.backup/latest-local-db.mssql 

#dump the contents of my local database
mysqldump -u$LUSER -p$LPASS -h $LHOST $LDB > $LBAK

#upload my local database to remote
scp $LBAK $RUSER@$RHOST:~/.backup/

#login to remote host, backup remote database, delete the remote database then recreate it, restore it with the contents of my local database
ssh $RUSER@$RHOST 'mysqldump -uwp_admin -h localhost wp_db > ~/.backup/latest-remote-db.mssql; mysql -uwp_admin -h localhost -Bse "show databases; drop database wp_db; create database wp_db;"; mysql -uwp_admin -h localhost wp_db < ~/.backup/latest-local-db.mssql;' 
```

以上工作正常，但我对最终命令不满意，`ssh`因为所有值都是硬编码的。我更喜欢使用这样的东西：

```
ssh $RUSER@$RHOST 'mysqldump -u$RDBUSER -h $RDBHOST $RDB > ~/$RBAK; mysql -u$RDBUSER -h $RDBHOST -Bse "drop database $RDB; create database $RDB;"; mysql -u$RDBUSER -h $RDBHOST $RDB < ~/$LBAK;' 
```

然而这显然不起作用，因为所有变量都被困在引号内，因此不会被替换。任何人都可以提出更好的方法来实现这一目标吗？我考虑在远程端执行一个单独的脚本来处理所有`mysql`命令，但这让我觉得效率更低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:57:15.217

对最外层的引号使用双引号，以便展开变量。在里面使用单引号。

试试这个：

```
ssh $RUSER@$RHOST "mysqldump -u$RDBUSER -h $RDBHOST $RDB > ~/$RBAK; mysql -u$RDBUSER -h $RDBHOST -Bse 'drop database $RDB; create database $RDB;'; mysql -u$RDBUSER -h $RDBHOST $RDB < ~/$LBAK;" 
```

# javascript - Javascript 或长数字浏览器？

> ID：13176101
> 
> 赞同：1
> 
> 时间：2012-11-01T11:29:57.157
> 
> 标签：javascript, css, browser

假设我有一个长小数位数，我想用它来设置 dom 元素 css 宽度的值。

例如：46.37524456801565

浏览器只能以自然数像素单位进行渲染，因此必须进行舍入。例如，46.37524456801565 变为 46 像素。

让浏览器进行舍入或更好地在 javascript 中执行一些舍入以便只给浏览器一个自然数是性能更好吗？

就我而言，元素宽度每 500 毫秒用一个新数字更新一次，所以我很想知道我是否应该在 javascript 中进行舍入/取整。

编辑：为了清楚起见，改写了问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:34:51.530

只需将该值按原样传递给样式即可。渲染器将​​（可以）仅以一个像素的精度显示元素，因此将自动舍入给定的值。如果您要自己四舍五入或降低值，您可能会增加不必要的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:43:04.263

如果您想要一致的结果，`floor`或者`ceil`您`round`自己的数字。

否则，将这些值按原样传递给浏览器是完全可以的，但希望在这里和那里有一个像素的差异。

也可以看看：

*   [CSS像素可以是分数吗？](https://stackoverflow.com/questions/9080633/can-a-css-pixel-be-a-fraction)
*   [百分比 CSS 布局中丢失的像素在哪里？](https://stackoverflow.com/questions/5581973/where-do-the-lost-pixels-go-in-a-percent-css-layout)（接受的答案）

# asp.net - ASP MVC 4 - 图表工具

> ID：13176102
> 
> 赞同：-1
> 
> 时间：2012-11-01T11:29:56.927
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, diagram

我正在寻找实现在我的网站中使用的实时图表工具的最佳方法。我找到了一个类似的网站：mentionmapp.com .. 您可以在主页的背景上看到该图，如果有人可以给我建议以创建类似的东西，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:40:17.420

为什么不看一下 JavaScript 解决方案（通过 JSON 输入数据）而不是 .NET 解决方案，因为这些解决方案更为常见。

[http://arborjs.org/](http://arborjs.org/)是我以前使用过的一个并且非常流行（而且免费！）。

您可以使用一些 .NET 组件（例如[http://www.devcomponents.com/treegx/](http://www.devcomponents.com/treegx/)），但您必须为它们付费。

# javascript - 使用 jQuery 或 javascript 计算具有不同名称的元素的数量

> ID：13176104
> 
> 赞同：0
> 
> 时间：2012-11-01T11:30:02.930
> 
> 标签：javascript, jquery

假设我有一个 20 行的表单，如下图所示： ![表格结构](../Images/05277ed85049fd06aa0cdb77d72e7b2e.png)

我将每一行中的元素命名为：

```
1st row (Ambiance)    -> v1[requirement], v1[observation], v1[status], v1[remarks]
2nd row (TV Room)     -> v2[requirement], v2[observation], v2[status], v2[remarks]
3rd row (Cleanliness) -> v3[requirement], v3[observation], v3[status], v3[remarks]
.... and so on till 20th row 
```

使用 jquery 或 javascript 我可以根据元素的名称找到存在的行数吗？即，在这种形式中，名称从 v1 开始，到 v20 结束。所以有20行。

**更新**

我想要行数的原因是因为我计划使用以下方法处理表单：

```
for($i=1; $i<=$rowcount; $i++)
{
   $v.$i = $_POST['v'.$i];
   // then insert the first row into table and so on
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:33:18.217

如果总是有一个标题行，那么行数将是`tr`表中的元素数-1，例如。

```
var rowCount = $("#myTable tr").length -1; 
```

这使您不必使用一些复杂的属性选择器或字符串解析方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T11:46:53.563

这种方法应该适合你：

```
var rowCount = $("#data-table tr").filter(function() {
    return $(this).find('[name^="v"]').length;
}).length; 
```

此代码将仅计算名称以 开头的输入的所有行`v`。我想这就是你需要的。

快速演示：http: [//jsfiddle.net/dfsq/2P5cN/](http://jsfiddle.net/dfsq/2P5cN/)

**UPD** 根据 Mark Reed 的评论，我们可以让它更简单：

```
var rowCount = $('#data-table tr').has('[name^=v]').length; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:46:26.010

如果您根本无法修改标记，那么您几乎必须遍历所有内容并自己计算。像这样的东西：

```
var tds = document.getElementsByTagName('td'); // or just $('td') for jQuery
var count_tds = tds.length;
var max = 0;
for (var i=0; i<count_tds; ++i) {
    var td = tds[i]
    var m = td.id.match(/^v(\d+)\[/)
    if (m) {
       if (m[1] > max) max=m[1]
    }
} 
```

现在`max`是行数，假设没有与模式匹配的 id 无关元素。

[http://jsfiddle.net/usDD7/1/](http://jsfiddle.net/usDD7/1/)

**编辑**显然我没有考虑使用 jQuery。请参阅 dfsq 的答案以获得更好的解决方案（以及我对该答案的评论以获得微小的改进）。

# css - 如何使用 > 运算符访问低级孩子？

> ID：13176105
> 
> 赞同：1
> 
> 时间：2012-11-01T11:30:05.647
> 
> 标签：css

我的 HTML 代码如下：

```
<div class="c1"> Heading
 <div>
    <ul style="display:none">
        <li>Item1</li>
        <li>Item1</li>
    </ul>
 </div>
</div> 
```

这是我的 CSS ：

```
.c1:hover > div ul
{
   display:block;
} 
```

如何使用“>”运算符访问较低级别的子级？我基本上希望列表显示在 c1 的悬停上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:35:05.833

您需要`style="display:none"`从标记中删除内联样式 ( ) - 内联样式将覆盖从样式表加载的样式。

相反，把它放在你的样式表中：

```
.c1 > div ul {
   display:none;
}
.c1:hover > div ul {
   display:block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:35:43.783

做这个 -

[**演示**](http://jsfiddle.net/MEWmA/1/)

```
<div class="c1"> Heading
 <div>
    <ul>
        <li>Item1</li>
        <li>Item1</li>
    </ul>
 </div>
</div> 
```

CSS

```
ul{ display: none; }

.c1:hover div ul
{
   display:block;
} 
```

# java - 如何解决错误 java.lang.IllegalArgumentException：未知图像类型 0？

> ID：13176108
> 
> 赞同：3
> 
> 时间：2012-11-01T11:30:17.210
> 
> 标签：java, jai

我正在使用 netbeans 平台在 java swing 中制作应用程序。在我的应用程序中，我旋转 MyImage.tiff（16 位，tiff，灰度图像）它旋转图像但更改 MyImage.tiff 的类型。在旋转图像之前 myImage.tiff 类型是 11，但是在旋转 MyImage.tiff 之后它的类型发生了变化，它变成了 0 类型的 BufferedImage。那么如何解决这个问题。在我的应用程序中，我使用 JAI 来旋转图像。我没有在我的 PC 中安装 JAI，但我制作了使用 JAI 的 jar 文件的包装器模块。那么有没有丢失的jar文件呢？我的旋转图像代码如下。

```
public BufferedImage rotateRighteImage(BufferedImage im) {
    int value = 90;
    float angle = (float) (value * (Math.PI / 180.0F));
    ParameterBlock pb = new ParameterBlock();
    pb.addSource(im); // The source image
    pb.add(0.0F); // The x origin
    pb.add(0.0F); // The y origin
    pb.add(angle); // The rotation angle
    // Create the rotate operation
    RenderedOp create = JAI.create("Rotate", pb, null);
    im = create.getAsBufferedImage();
    return im;
} 
```

# java - 将 jUnit 覆盖率报告与 EclEMMA 插件合并

> ID：13176119
> 
> 赞同：0
> 
> 时间：2012-11-01T11:31:04.063
> 
> 标签：java, junit, code-coverage, emma, eclemma

我正在使用 Eclipse 的***EclEmma***插件测量我的项目中的代码覆盖率。这涉及运行整个项目的覆盖范围。但是由于一些依赖问题，一些包中的测试完全失败了。当单独获取这些包的覆盖率时，测试运行正常并且包正确显示了覆盖率。

是否可以通过分别运行每个包的覆盖率然后将这些报告合并为一个来获得覆盖率报告。

或者，是否有任何其他提供上述功能的免费插件。

注意：由于逻辑和大小限制，可能无法修改测试方法以消除依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:55:45.123

自从我转向 IDEA 已经有一段时间了，但我似乎记得有一个选项（如“EclEMMA 视图中的按钮”）可以合并多个覆盖运行。

访问[http://www.eclemma.org/](http://www.eclemma.org/)可以确认这一点 - 查找“合并会话”。还：

*   [http://www.eclemma.org/userdoc/sessions.html](http://www.eclemma.org/userdoc/sessions.html)和
*   [http://www.eclemma.org/userdoc/coverageview.html](http://www.eclemma.org/userdoc/coverageview.html)

它是“双X”*删除所有会话*按钮右侧的按钮。

干杯，

# bash - 以 sh 模式启动 Cx e 编辑器

> ID：13176123
> 
> 赞同：0
> 
> 时间：2012-11-01T11:31:14.120
> 
> 标签：bash, emacs, zsh

emacs：23.3.1，zsh：4.3.17，gnome-terminal：3.4.1.1

我的默认主要模式是文本模式。

在 gnome-terminal 中调用`C-x e`时，我想将 emacs 设置为使用 sh-mode，因为它很可能是我手动设置的模式。怎么做？

可能的解决方案 - 有没有办法为`C-x e`cmd 创建模板文件（添加标题：）`# -*- mode: sh -*-`？

**解决方案：**

```
;; open C-x e editor in sh-mode                                                                      
(setq auto-mode-alist (cons '("\\(^\\|/\\)zshec[^/]*$" . sh-mode) auto-mode-alist)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:42:05.827

使用 Cx e 打开的文件的文件名始终为 bash-fc-*。您可以设置文件关联以匹配此文件名：

```
(setq auto-mode-alist (cons '("bash-fc-*" . sh-mode) auto-mode-alist)) 
```

# floating-point - 检查浮点数是否是tcl中的整数

> ID：13176126
> 
> 赞同：2
> 
> 时间：2012-11-01T11:31:19.830
> 
> 标签：floating-point, numbers, tcl

我是 tcl 的新手。我正在尝试检查给定数字是否为整数，但似乎找不到一种简单的方法来做到这一点。

所以我有一个 number2 正在检查它是否在网格上。如果不是整数，则它不在网格上。

```
set numberOne 7.5
set grid 2.5
set numberTwo [expr ($numberOne/$grid) ]

if {[string is integer -strict $numberTwo} {
    do something
} else {
    do something else
} 
```

上面的代码对我不起作用，因为 numberTwo 将作为浮点数返回（在这种情况下为 3.0）

Python有这样的东西：

```
x = 7.5
y = 2.5
z = x/y

if z%1 == 0
   then do something
else
   do something else 
```

有没有办法在 tcl 中做类似的事情？如果不是另一种选择可能是 -

*   取 numberTwo 的十进制值并检查它是 0 还是非 0

所以需要 6.555 的东西返回 555，需要 6.0 并返回 0。然后我可以这样做：

```
if {$value == 0} {then do something} else {do something else} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:41:14.270

看来您可能不知道[Tcl 数学函数](http://www.tcl.tk/man/tcl/TclCmd/mathfunc.htm)。

```
if {$value == floor($value)} {

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-14T05:48:47.973

这实际上是许多人正在寻找的解决方案；）

```
proc is_float_whole { float } {
  return [expr abs($float - int($float)) > 0 ? 0 : 1]
} 
```

# java - 如何下载图片的缩小版？

> ID：13176129
> 
> 赞同：3
> 
> 时间：2012-11-01T11:31:23.790
> 
> 标签：java, android

我需要下载非常大的 5mb+ 图像。

我知道在显示之前缩放图像以节省手机内存，但下载大图像的问题仍然存在。

例如，我如何下载图像的 50% 缩小版本，而不是下载完整图像然后对其进行缩放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:36:14.233

您下载的服务器必须支持它。

如果服务器不是您的，您需要查找该服务器的文档（或逆向工程）。

如果服务器是您的，则取决于使用的技术。查找您正在使用的特定服务器端技术的图像处理库。

* * *

在 imgur.com 的情况下，

看这里：[http ://api.imgur.com/](http://api.imgur.com/)

Imgur 允许您每个 IP 每小时拨打 500 次电话，如果您已注册，则可以拨打 1000 次。上传次数翻了十倍。

有关图像的元数据记录在此处：[http](http://api.imgur.com/resources_anon#image_hash) ://api.imgur.com/resources_anon#image_hash 。访问`api.imgur.com/2/image/[hash].xml`或`api.imgur.com/2/image/[hash].json`，然后从响应中选择`image.links.small_square`(90x90) 或`image.links.large_thumbnail`(?x640)。请注意，imgur 还会为其主页生成缩略图 (160x160)。这些的网址似乎是`i.imgur.com/[hash]b.jpg`

大图的链接是`i.imgur.com/[hash].jpg`，所以如果你的链接是`http://i.imgur.com/xDpEF.jpg`或`http://imgur.com/xDpEF`，那么`xDpEF`就是你需要的哈希值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:34:22.647

当 Web 服务器不提供缩小版本时，无法下载某些图像的缩小版本。

您需要在托管它们的网络/服务器上扩展它们。所以问题不是java/android，而是在网络服务器上，并且取决于它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:37:07.610

你不能，除非你的服务器在你下载它之前支持缩小图像。如果服务器没有该选项，则最好的选择是在从流中读取图像时使用 BitmapFactory.Options inSampleSize 将其缩小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:37:00.680

先生，这是不可能的，因为如果您从任何服务器下载它，那么服务器必须具有多种形式的缩放图像，例如 50% 缩放或 25% 缩放。因此，只有当您从下载图像的位置维护服务器并且在后端提供了一些缩放图像的方法时，才有可能。

如果您从任何服务器下载图像，那么如果没有任何后端程序来缩放图像，就不可能从服务器获取缩放图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:37:31.230

您需要将图像下载到文件中，然后使用`BitmapFactory`with`BitmapFactory.Options`来确定图像的大小。根据图像大小，计算您想要缩放它的大小，然后再次使用`BitmapFactory`(with `Options`) 加载图像的缩放版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T11:43:20.070

这取决于服务器，服务器应该支持缩小图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T12:25:38.740

除了其他答案之外，还有一个解决方案可以在服务器端没有特殊软件的情况下工作；

如果图像以 JPEG 格式存储在服务器上并使用隔行/逐行模式，您将能够部分下载它们以创建缩略图。

这种特殊模式旨在在下载时查看预览图像。压缩预览图像可能会生成可用作缩略图的图像。

However I don't know a library that would support thumbnail loading this way.

# python - Django Celery tasks succeed but client stuck waiting

> ID：13176133
> 
> 赞同：3
> 
> 时间：2012-11-01T11:31:27.843
> 
> 标签：python, django, rabbitmq, celery

I'v just started to implement Django+Celery+RabbitMQ to do some backend tasks. I started with the example add(x, y) task to verify it was working then proceeded to place my existing utility methods in a Celery tasks module. The trouble is when I call my tasks they run fine but the client never gets the result.

```
>>> r = SyncUsers.delay()
>>> r.get()
... Hangs here forever
^C
... (Stack trace omitted)
KeyboardInterrupt
>>> r.successful()
False 
```

In the Celeryd log:

```
[2012-11-01 11:15:23,442: INFO/MainProcess] Task celerytasks.tasks.SyncUsers[9e8f4da3-17d2-4944-9095-51de1afcaaf3] succeeded in 34.596668005s: <website.bullhorn.api.APIResult object at... 
```

Anybody know what's happening here?

EDIT: Just noticed that when I call get() now I see:

....\lib\site-packages\djcelery\managers.py:183: TxIsolationWarning: Polling results with transaction isolation level repeatable-read within the same transaction may give outdated results. Be sure to commit the transaction for each poll iteration. "Polling results with transaction isolation level "

and it still waits forever.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:50:51.020

And so there was the answer. I'm using MySQL so I needed to set the transaction isolation level to READ-COMMITTED

[http://dev.mysql.com/doc/refman/5.1/en/set-transaction.html](http://dev.mysql.com/doc/refman/5.1/en/set-transaction.html)

Also credit goes to [http://www.no-ack.org/2010/07/mysql-transactions-and-django.html](http://www.no-ack.org/2010/07/mysql-transactions-and-django.html) for pointing me in the right direction. (Blog appears to be closed to public access now)

# php - 在 MySQL 表中查找事件，操作和存储数据

> ID：13176134
> 
> 赞同：0
> 
> 时间：2012-11-01T11:31:29.980
> 
> 标签：php, mysql

这是我仍然无法解决的问题，所以也许我需要更清楚我需要什么。

我有一个数据源，我每个月都会接收并上传到 MySQL 数据库。我无法更改数据，尽管它可能不是最有用的格式。它看起来像这样：

```
Ref    Action  Date/Time          User      Location
00123  Create  01:02:12_09:13:13  J Jones   Home  
00456  Create  01:02:12_09:13:13  J Jones   Home  
00123  Revise  03:02:12_15:20:01  A Smith   Home   
00789  Create  01:02:12_09:13:13  J Jones   Home  
00123  Delete  05:02:12_10:51:45  B Halls   Home 
```

x 1000 的

它根据参考号跟踪发生的事件，参考号由第一个事件（创建事件）生成。这些事件以不同的时间间隔发生，并且由不同地点的不同人完成。

使用上面的示例，我需要能够遍历特定月份的数据，提取参考编号及其“创建”事件，然后找到该参考编号的所有其他事件。

然后我需要能够操作这些信息，例如计算创建和修改之间的时间差，然后是修改和删除，以及谁在哪里做的。

对于在月份或日期范围内创建的所有参考编号，我需要能够做到这一点。

所以我希望我可以创建一个可以做到这一点的查询 - 找到一个参考号，找到其他事件，以某种方式将它们串在一起 - 这样最终我就有了新数据 -

参考编号、创建时间、创建人、修改时间/人、删除时间等

如果可以将这些新数据存储在新表中，那将很有用，我认为（？）

这可以作为查询或查询和 PHP（数组？）的组合来完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:41:05.517

好的，第一阶段是在 MySQL 表中转换这些数据，你会得到类似的东西

```
ref integer,
action  enum('create','revise','delete'),  -- ordered by life cycle: create first, delete last
ts  timestamp,
user    varchar(32),    -- or maybe user_id
loc varchar(32),    -- again maybe location_id, or ENUM 
```

因此，在给定参考的情况下提取事件

```
SELECT * FROM mytable WHERE ref = 123 ORDER BY action; 
```

对于日期范围，您可以使用

```
WHERE ts BETWEEN 'date1' AND 'date2' 
```

要获得时差，

```
SELECT TIMEDIFF(b.ts, a.ts) AS delta, b.*
    FROM mytable AS a
    JOIN mytable AS b ON (a.action = 'CREATE' AND a.ref = b.ref)
    WHERE a.ref = 123; 
```

最后对表进行非规范化：

```
SELECT _create.*,
    TIMEDIFF(_revise.ts - _create.ts) AS revise_delta,
    TIMEDIFF(_delete.ts - _delete.ts) AS delete_delta,
FROM mytable AS _create
    LEFT JOIN mytable AS _revise ON (_create.ref = _revise.ref
               AND _create.action = 'CREATE' AND AND _revise.action = 'REVISE' AND ***)
    LEFT JOIN mytable AS _delete ON (_create.ref = _delete.ref
               AND _create.action = 'CREATE' AND AND _delete.action = 'DELETE' AND ***)
; 
```

这里***是标识 CREATE 事件和相应的 DELETE 事件之间唯一关系的某种方式。

如果 refs 是唯一的，则`AND ***`不需要（***等于 True）。

例如，如果每个月都会回收 refs，并且从来没有发生过一个事件可能跨越两个月，那么您可以强制 _create 的年月与 _revise 的年月相同；那和 .ref 的相等性建立了双义匹配。

否则它会*变得*更加复杂，我会尝试`VIEW`为每个 CREATE 事件创建一个，选择具有相同 ref 但 ts 大于或等于当前事件的最早事件的`COALESCE`of和 datetime。通过这种方式，您可以识别一个“窗口”，其中具有该引用的事件*应*归因于该特定 CREATE。但这是基于这样的假设，即它永远不会发生`NOW()``CREATE`

 *```
00123 CREATE 01-NOV-2012 Jack
00123 CREATE 04-NOV-2012 Jill
00123 DELETE 05-NOV-2012 Joe  <-- which event is this one? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:41:28.587

好吧，要获取特定操作的字段值：

```
$db_connection = mysqli_connect();//Have DB variables here
$ref = ;//Ref number here e.g 123
$action = '';//action to check for here e.g create

$query = "SELECT * FROM yourtable WHERE ref=".$ref." AND action=".$action."";
$q = mysqli_query($db_connection,$query);

while($row = mysqli_fetch_asocc($q)){

//The variables are in the $row array with each on an index based on a column name

} 
```*

# c - 客户端和服务器+排序

> ID：13176142
> 
> 赞同：0
> 
> 时间：2012-11-01T11:31:47.423
> 
> 标签：c

在我的程序中，我将用户名作为启动参数并从服务器获取用户 ID。服务器和客户端已连接！但我需要将用户名和用户 ID（属于用户名）放在一起，将它们发送回服务器，最后根据用户 ID 对它们进行排序。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:19:15.620

只需将它们都发送到服务器，注意包含某种分隔符，以便解析流并识别哪个部分是哪个部分。

例如，您可以使用 NIL 字节将两者分开，在用户 ID 之后也可以使用最终的 NIL。这假设两者都是字符串。

在服务器上，只需将传入的数据存储到结构数组中，并`qsort()`在收集到所有数据后对数组进行排序。

# c# - IIS 中的 WCF，http 基本身份验证 - Windows 用户“安全”含义

> ID：13176143
> 
> 赞同：6
> 
> 时间：2012-11-01T11:31:50.793
> 
> 标签：c#, wcf, security, iis, basic-authentication

我使用 http 基本身份验证和 SSL 创建了一个 WCF 服务。（IIS atm 中的临时证书）

下面是相关配置。

```
<services>
  <service name="MyNamespace.MyService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicHttps"
      name="MyEndPoint" contract="MyNamespace.IMyService" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <!-- These will be false when deployed -->
      <serviceMetadata httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <!-- This doesn't do anything in IIS -->
    <behavior name="CustomUsernameValidatorBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom"
          customUserNamePasswordValidatorType="MyNamespace.CustomUserNameValidator" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttps">
      <security mode="Transport">
        <transport clientCredentialType="Basic" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

由于我在 IIS 中托管，我无法使用我的 customUsernameValidator，并且 IIS Basic 身份验证尝试针对 Windows 使用用户名和密码。

我创建了一个新用户，在本地禁用了登录，并将其放入一个新组（没有权限）。用户的**唯一**目的是确保他们被允许访问服务，仅此而已。该服务将是在线的，而不是内部的，例如在 Intranet 等中。

我的问题归结为这一点，由于我使用的是真正的 Windows 用户，是否存在安全风险/影响？如果是这样，可以做些什么来保护此服务/IIS？

是否应该采取措施防止信息“网络钓鱼”，例如，他们是否可以尝试使用不同的用户名和密码来查找凭据？

*顺便说一句，这是在 IIS 和 SSL 中使用 Http 基本身份验证的 WCF 的有效绑定（减去一些其他端点等）。它要求 IIS 安装了基本身份验证，以及一个 Windows 用户进行身份验证。我不希望对 Windows 用户进行身份验证。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T06:33:14.350

如果使用基本身份验证（未定义领域），则 IIS 5.0 及以下版本存在 IP 地址泄露漏洞。请看一下这个网站： [http ://www.juniper.net/security/auto/vulnerabilities/vuln1499.html](http://www.juniper.net/security/auto/vulnerabilities/vuln1499.html)

# tridion - 在文本字段中键入时忽略的字符

> ID：13176147
> 
> 赞同：6
> 
> 时间：2012-11-01T11:32:08.417
> 
> 标签：tridion, tridion-2011

我在输入富文本字段时遇到字符被忽略的问题。这似乎只是 IE8 和 IE9 中的问题。例如，我输入了四次“快速棕色狐狸跳过懒狗”，这就是富文本字段中显示的内容。

```
the quick brown fx jump over the lazy dog
the quckbrown f umps over the azy dog
the quick rown fox jumps over the azy dog
the quck brown fox jumps ove the lazydog 
```

我首先假设可能有一些 javascript 在后台运行，附加到按键事件（可能用于拼写检查），它没有及时完成下一次按键，但没有运气跟踪它。我已经在多台计算机上尝试过，并且都有这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T14:28:00.117

我们注意到我们的一些用户在 Tridion SP1 上的 RTF 字段中存在这个奇怪的问题。我不记得我们在使用普通文本字段时遇到过问题。

如果有帮助，请检查此修补程序：CM_2011.1.0.77763

[https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1/index.aspx](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1/index.aspx)（登录 SDL Tridion World 并转到修补程序以下载此修补程序）。

# javascript - 匹配特殊字符，包括方括号

> ID：13176155
> 
> 赞同：2
> 
> 时间：2012-11-01T11:32:35.383
> 
> 标签：javascript, regex, extjs

我想在 ExtJs(maskRe) 中有一个文本字段的正则表达式，它匹配所有 java 代码模式

我用过

```
 maskRe:/^[A-Za-z0-9 _=//~'"|{}();*:?+,.]*$/ 
```

我也想包含 [,]，但似乎 /[, /], //[, //] 不起作用..

请输入任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:34:14.907

要去除特殊字符的魔力，你必须在字符前面`escape`加上反斜杠`\`。即匹配`[`你的类型`\[`。

而且由于反斜杠也充当特殊字符，因此要从字面上匹配它，您可以以相同的方式对其进行转义：`\\`.

并且由于您用作`/`模式分隔符，因此您需要在模式中转义它的出现：

```
/^[A-Za-z0-9 _=\/~'"|{}();*:?+,.]*$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:35:07.627

转义**[正则表达式元字符](http://www.regular-expressions.info/characters.html)**的方法是使用反斜杠`(\)`，而不是正斜杠`(/)`。

`[,]`应该`\[,\]`

`//`应该`\/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:36:00.783

问题是您需要转义正斜杠。更改`//`为`\/`：

```
/^[A-Za-z0-9 _=\/~'"|{}();*:?+,.]*$/ 
```

然而，这个正则表达式不*匹配*任何 Java 代码。Java 代码几乎可以包含任何 Unicode 字符。`int møøse = 42;`是有效的 Java。

# plsql - 警告：编译错误的过程

> ID：13176156
> 
> 赞同：-2
> 
> 时间：2012-11-01T11:32:42.917
> 
> 标签：plsql, oracle10g, oracle11g, odbc, ole

我是否以正确的方式处理以下过程，有一些编译错误，有人可以帮我解决我所做的错误。

```
create or replace PROCEDURE CRangeproc(in_termid IN VARCHAR2,in_cardno IN VARCHAR2,outcount OUT NUMBER,outissu OUT VARCHAR2,outacq OUT VARCHAR2,CIssuer OUT SYS_REFCURSOR,CAcquirer OUT SYS_REFCURSOR)
AS
BEGIN
select count(*) into outcount from cardrangetable where PAN_LOW <= in_cardno AND  PAN_HIGH >=  in_cardno and terminal_id = in_termid;
if outCount = 1 then
select ISSUERTABLEID into outissu,ACQUIRERTABLEID into outacq from cardrangetable where PAN_LOW <= in_cardno AND  PAN_HIGH >= in_cardno and terminal_id = in_termid;
Open CIssuer FOR
select * from Issuer_tble where TERMINAL_ID = in_termid and ISSUERTABLEID = outissu;
CLOSE CIssuer;
Open CAcquirer FOR
select * from ACQUIRERTABLE where TERMINAL_ID = in_termid and ACQUIRERID = outacq;
CLOSE CAcquirer;
end if;
End CRangeproc; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:36:36.217

嗨，在这部分我看到一些错误

```
 if Outcount = 1 then
select Issuertableid
  into Outissu, Acquirertableid
  into Outacq 
 from Cardrangetable
 where Pan_Low <= In_Cardno
   and Pan_High >= In_Cardno
   and Terminal_Id = In_Termid; 
```

应该是这样的

```
 if Outcount = 1 then
select Issuertableid,  Acquirertableid
  into Outissu, Outacq
 from Cardrangetable
 where Pan_Low <= In_Cardno
   and Pan_High >= In_Cardno
   and Terminal_Id = In_Termid; 
```

和打开/关闭错误使用（也许你正在尝试使用游标）

```
 open Cissuer for
   ------
close Cissuer;
open Cacquirer for
     ----
close Cacquirer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:44:06.913

这是每个 SELECT 语句的一个子句 INTO。您不应关闭此函数中的 REF CURSOR。消耗它们的程序需要处理它们。

这就是您的代码应该的样子：

```
create or replace PROCEDURE CRangeproc
    (in_termid IN VARCHAR2
    ,in_cardno IN VARCHAR2
    ,outcount OUT NUMBER
    ,outissu OUT VARCHAR2
    ,outacq OUT VARCHAR2
    ,CIssuer OUT SYS_REFCURSOR
    ,CAcquirer OUT SYS_REFCURSOR)
AS
BEGIN
    select count(*) 
    into outcount 
      from cardrangetable 
    where PAN_LOW <= in_cardno 
    AND  PAN_HIGH >=  in_cardno 
    and terminal_id = in_termid;

    if outCount = 1 then
        select ISSUERTABLEID,ACQUIRERTABLEID 
        into outissu, outacq 
                from cardrangetable 
        where PAN_LOW <= in_cardno 
        AND  PAN_HIGH >= in_cardno 
        and terminal_id = in_termid;
        Open CIssuer FOR
            select * from Issuer_tble 
                          where TERMINAL_ID = in_termid 
                          and ISSUERTABLEID = outissu;
        Open CAcquirer FOR
            select * from ACQUIRERTABLE 
                          where TERMINAL_ID = in_termid 
                          and ACQUIRERID = outacq;
    end if;
End CRangeproc; 
```

我认为您需要学习使用回车来改进代码的布局。

# javascript - dojo editable-tree-dgrid : 创建或生成 dojo.store.JsonRest 支持的新行？

> ID：13176157
> 
> 赞同：1
> 
> 时间：2012-11-01T11:32:52.273
> 
> 标签：javascript, grid, dgrid, dojo

我正在尝试一个既是树又是可编辑的 dojo-dgrid。
因为我有以下要求，

我在父行的列（通常是最后一列）中有一个添加按钮/图标。单击该图标时，
应在此父行下生成/创建一个新的子行（如 store.newItem()），
并且此子行应该是可编辑的（有 11 列，其中 6 列是可编辑的，其中 3 列是digit.form.Select 和其他 3 个是文本字段）。

填充可编辑区域后，（最后一列中会有一个保存图标）单击保存图标应该保存这个新的子行。

顺便说一句，我使用 dojo.store.JsonRest 作为 store 。

网格声明如下：

```
var MyGrid = declare([Grid, Selection, Keyboard]);
window.testgrid = new MyGrid( 
{
    store       : Observable(Cache(jsonRest, Memory())),
    selectionMode : "none",
    getBeforePut: false,
    columns: getColumns,
    allowSelectAll: true,
    minRowsPerPage: 5,
    maxRowsPerPage: 20,
}, "gridContainer"); 
```

[此处发布了](https://stackoverflow.com/questions/13027345/dojo-dgrid-multiple-cells-edit)与同一网格的多个单元格编辑相关的另一个问题。

在 JsonRest 中，我只能看到 add、put、delete 类型的方法。想知道如何使用 JsonRest 作为存储来完成此要求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:12:02.773

你会想使用put。store 的 put 方法用于插入或更新项目。

```
var default_values = {somefield:'somevalue'};
default_values['parent'] = parent_id; //I have not actually defined parent_id
testgrid.store.put(default_values).then(function(result) {
    testgrid.refresh();
}); 
```

# javascript - 如何使用 GRUNT 和 QUNIT 指定 PhantomJS 的 PATH？

> ID：13176161
> 
> 赞同：1
> 
> 时间：2012-11-01T11:33:07.537
> 
> 标签：javascript, path, qunit, phantomjs, gruntjs

Grunt 使用 PhantomJS 以一种非常有趣的方式运行无头 QUnit 测试（如果我错了，请纠正我）。由于我刚刚开始尝试使用这些工具，因此我并不完全了解它，也不知道如何配置或扩展它。

我设法让我的机器上的所有工作，但我**不想使用**$PATH 系统变量。相反，我想通过我可以轻松更改并移植到其他环境的设置来提供 PhantomJS 的可执行文件的路径。

我怎样才能做到这一点？

我想有很多方法，我认为[Grunt 的 Qunit Task](https://github.com/gruntjs/grunt/blob/master/tasks/qunit.js)可能有一个简单的答案。理想情况下，只需在*grun.js*文件中定义路径，如下所示：

```
qunit: {
      phantomjsPath: 'path/to/phantomjs',
      files: ['test/**/*.html']
    }, 
```

我的环境是 MacOSX，但我接受任何类型的环境（如 Windows）的解决方案 - 我的构建服务器。

提前致谢。

**更新**我使用的 Grunt 版本是*v0.3.17*。下一个大版本*v0.4.x*有很多变化，有些不向后兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T12:21:23.317

好吧，我认为您最终迁移到了 Grunt 0.4。并且可能你得到了 grunt-contrib-qunit 插件，用于在 PhantomJS 下运行 qunit 测试。不幸的是，您会遇到同样的问题 - 无法提供 phantomjs 可执行文件的路径。这是因为 grunt-contrib-qunit/grunt-contrib-phantomjs 使用`phantomjs`npm 模块，该模块在安装时下载 PhantomJS，并在其 js 代码中硬编码可执行文件的路径。如果您遇到此类问题，请查看我的[博客文章](http://techblog.dorogin.com/2013/08/issues-with-grunt-contrib-qunit.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:28:14.053

不幸的是，grunt 0.3.x 没有内置选项来指定 phantomjs 的路径——它只是`phantomjs`直接在命令行上执行。看看这个辅助函数：

[https://github.com/gruntjs/grunt/blob/master/tasks/qunit.js#L231](https://github.com/gruntjs/grunt/blob/master/tasks/qunit.js#L231)

在尚未发布的 grunt-0.4 中，情况似乎发生了变化，但是：

[https://github.com/gruntjs/grunt-lib-phantomjs/blob/master/lib/phantomjs.js#L22](https://github.com/gruntjs/grunt-lib-phantomjs/blob/master/lib/phantomjs.js#L22)

如您所见，下一个版本的 grunt 使用 npm 模块[phantomjs](https://github.com/Obvious/phantomjs)，它“将包含`path`phantomjs 二进制/可执行文件的路径字符串导出。”。由于 npm 模块`phantomjs`是由 grunt 在本地安装的，因此这似乎可以避免您担心设置`PATH`变量或安装冲突版本的`phantomjs`.

无论如何，如果你愿意生活在最前沿，我会考虑看看[grunt-0.4 。](https://github.com/gruntjs/grunt/tree/devel)

否则，您始终可以分叉`qunit`任务并修改`grunt-qunit`任务以查看您的自定义配置变量。

# c# - 下拉列表数据未插入查询

> ID：13176163
> 
> 赞同：0
> 
> 时间：2012-11-01T11:33:32.320
> 
> 标签：c#, asp.net

我选择`DropDownList`要在查询中插入的值，但该值在查询中保持为空白，并且由于在 where 条件下没有任何结果结果为空值。我用不同的技巧做，但保持空虚

```
if (chkBoxChanl.Checked)
{
    sql += " and channelName = '" + ddlChannel.Text + "' ";
}
if (chkBoxDate.Checked)
{
    sql += " and transmissionDate_ between '" + tbFrom.Text + "' and '" + tbTo.Text + "'";
}
if (chkBoxProgrm.Checked)
{
    sql += " and programName ='" + ddlProgram.Text + "'";
}
if (chkBoxParty.Checked)
{
    sql += " and partiesName like '%" + ddlParty.SelectedValue + "%'";
}
if (chkBoxPerson.Checked)
{
    sql += " and personsName like '%" + ddlPerson.SelectedItem + "%'";
}
if (chkBoxProvince.Checked)
{
    sql += " and ProvinceName like '%" + ddlProvince.SelectedItem + "%'";
}
if (chkBoxCity.Checked)
{
    sql += " and CityName like '%" + ddlCity.Text + "%'";
} 
```

喜欢

*   `ddlProgram.Text`
*   `ddlProvince.SelectedItem`
*   `ddlPerson.SelectedValue` 所选`DropDownList`值在查询中显示为空。

我该怎么做才能在查询中添加选定的值？请帮我！

我检查当我选择第一次加载的下拉列表值时，然后在按下搜索按钮下拉列表值空的 2md 时间，当我按下搜索按钮时，它首先运行 Page_Load 函数并执行 if(!IspostBack) 然后所有下拉列表选择的值都变为空这会导致 where 子句中的值清空。现在我希望当我按下搜索按钮下拉列表值时保持加载，这将解决问题成为 enpty 下拉列表值。请进一步指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:35:48.280

首先：您不应该以这种方式将参数连接到查询。您将自己暴露在 SQL 注入攻击之下。

抱歉，stackoverflow 的新手。没看到评论按钮

和

```
programName =' mytext' OR 1 = 1; 
DROP Database 
```

评论其他任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:37:51.647

您不能直接在 sql 查询中连接输入字段的值。它使您的系统容易受到 Sql Injection 的攻击。在运行此类 sql 查询之前，您至少应该对从这些字段中检索的内容进行编码。在继续之前[阅读此](http://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCwQFjAA&url=http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev&ei=8F6SUMKtCIaW2gXRm4G4BQ&usg=AFQjCNEP4ALbK0_qb2rWFaFqZGCelbPKDQ&sig2=Xrz0j7hU-pWnnnsaRqpPUw)内容非常重要。

仔细阅读以上内容后，您可以在下拉列表中获取所选项目的值。你来做这件事：

```
yourDropDown.SelectedItem.Value 
```

如果它没有返回值，那可能是因为您没有在下拉列表中设置任何值。请记住根据您的数据源进行设置：

```
yourDropDown.DataValueField = "TheSourceFieldContainingTheValue"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:03:40.653

构建您的 sql 查询，如下所示：

```
public DataSet ExecuteDataSet(string text, SqlParameter[] paramList)
        {
            using (SqlCommand sqlCommand = new SqlCommand(text, sqlConnection))
            {
                if (paramList != null)
                {
                    foreach (var param in paramList)
                    {
                        sqlCommand.Parameters.Add(param);
                    }
                }
                SqlDataAdapter dataAdapter = new SqlDataAdapter(sqlCommand);
                DataSet dataSet=new DataSet();
                dataAdapter.Fill(dataSet);
                return dataSet;
            }
        } 
```

# c# - 在 Dispather 计时器中访问 Draw Context 会出现异常

> ID：13176167
> 
> 赞同：0
> 
> 时间：2012-11-01T11:33:50.527
> 
> 标签：c#, wpf, kinect, drawingcontext

我想做的是首先找到肩关节的角度，直到现在我已经设法做到了。我现在想做的是当角度在 70 到 90 之间的范围内时开始，持续 3 秒并在每秒它应该检查角度是否仍在范围内，如果它然后显示在屏幕上确定，否则在显示消息后重新启动计时器你没有完成时间限制请让他们对 C# 和 kinect 有任何帮助这方面将有助于 em 面临的问题图像的链接是：http: [//i46.tinypic.com/2nu4ygw.jpg](http://i46.tinypic.com/2nu4ygw.jpg)

请帮忙！！

```
 System.Windows.Point shoul_l = this.point_toScreen(sh_left.Position, sen);
        draw.DrawText(new FormattedText(angle.ToString("0"), new 
        System.Globalization.CultureInfo("en-us"),
          System.Windows.FlowDirection.LeftToRight,
         new Typeface("Verdana"), 16,System.Windows.Media.Brushes.OrangeRed),
         new System.Windows.Point(shoul_l.X+10, shoul_l.Y +20));

        if (timer_start == false)
        {
        if (angle > 70 && angle < 90)
        {
                timer_start = true;
                timer.Interval = 2000;
                timer.Start();
                timer.Elapsed += new ElapsedEventHandler((sender, e) =>   \    
                on_time_event(sender, e, draw,shoul_l));

        }
        }

}   
void on_time_event(object sender, ElapsedEventArgs e, DrawingContext dcrt, 

 System.Windows.Point Shoudery_lefty)
 {
     --index;
     if (index != 0)
     {
         dcrt.DrawText(new FormattedText(index.ToString(), new   
      System.Globalization.CultureInfo("en-us"),
           System.Windows.FlowDirection.LeftToRight,
          new Typeface("Verdana"), 16, System.Windows.Media.Brushes.OrangeRed),
          new System.Windows.Point(Shoudery_lefty.X+50,Shoudery_lefty.Y+50));
      //  MessageBox.Show(index.ToString());
     }
     else
     {
         timer.Stop();
     }
   } 
```

我在这部分代码中遇到异常

```
 dcrt.DrawText(new FormattedText(index.ToString(), new   
      System.Globalization.CultureInfo("en-us"),
      System.Windows.FlowDirection.LeftToRight,
      new Typeface("Verdana"), 16, System.Windows.Media.Brushes.OrangeRed),
      new System.Windows.Point(Shoudery_lefty.X+50,Shoudery_lefty.Y+50)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:40:36.387

您正在尝试从[`Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)线程更新 UI 元素。这是不允许的。
您必须使用以下方法将 UI 更新调用编组到 UI 线程[`Dispatcher`](http://msdn.microsoft.com/en-us/library/System.Windows.Threading.Dispatcher%28v=vs.90%29.aspx)：

```
dcrt.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() => 
    {
        dcrt.DrawText(new FormattedText(index.ToString(), new System.Globalization.CultureInfo("en-us"),
       System.Windows.FlowDirection.LeftToRight,
      new Typeface("Verdana"), 16, System.Windows.Media.Brushes.OrangeRed),
      new System.Windows.Point(Shoudery_lefty.X+50,Shoudery_lefty.Y+50));
    })); 
```

# string - 防止在C中的字符串中输入数字

> ID：13176169
> 
> 赞同：0
> 
> 时间：2012-11-01T11:33:51.600
> 
> 标签：string, validation

```
char name[50];
int valid;

do{
      valid=1;
      printf("Enter name for Salesman: ");
      fgets(name,50,stdin);
      if(!isalpha(*name)) //it will only scan for the first character of string
      {
          printf("Only alphabet is allowed.\n");
          valid=0;
      }
  }while(valid==0); 
```

我希望整个字符串没有任何数字输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:37:20.107

您将不得不处理整个字符串：

```
int i = 0;
for (i = 0; i < strlen(name) && i < 50; i++) {
  if (!isalpha(name[i])) {
    valid = 0;
    printf("Please only use alphabetic characters!\n");
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:45:33.367

C语言不是像java那样支持正则表达式吗？

所以我们可以像这样在java中做到这一点：

```
String test= "Any String even if 1 digit is in between";

Pattern p = Pattern.compile("[0-9]+");

Matcher m = p.matcher(test);

if (m.find())
{               
    System.out.println("Numeric is not allowed");
} 
```

# java - 在android中解析JSON时出现OutOfMemoryError

> ID：13176171
> 
> 赞同：4
> 
> 时间：2012-11-01T11:33:58.047
> 
> 标签：java, android, json, bufferedreader

**我正在使用以下代码解析从 Web 获取的 JSON 字符串（30,000 条记录）**

```
DefaultHttpClient   httpclient = new DefaultHttpClient(new BasicHttpParams());
        HttpPost httppost = new HttpPost(params[0]);
        httppost.setHeader("Content-type", "application/json");
        InputStream inputStream = null;
        String result = null;
        HttpResponse response = null;
        try {
            response = httpclient.execute(httppost);

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }           
        HttpEntity entity = response.getEntity();
        try {
            inputStream = entity.getContent();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),8);
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        StringBuilder sb = new StringBuilder();
        String line = null;
        try {
            while ((line = reader.readLine()) != null)  
            {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        result = sb.toString(); 
```

我在下面的代码中收到 OutofMemory 错误

```
while ((line = reader.readLine()) != null)  
{
    sb.append(line + "\n");
} 
```

如何摆脱此错误。当 json 字符串非常庞大时，确实会发生此错误，因为它包含大约 30,000 条记录的数据。

非常感谢这方面的任何帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:45:55.410

Android 对每个应用程序都施加了内存上限（几乎所有手机都为 16 MB，一些较新的平板电脑有更多）。应用程序应确保将其实时内存限制保持在该级别以下。

所以我们有时不能完全保存一个大字符串，比如超过 1MB，因为应用程序的总实时内存使用量可能超过该限制。请记住，总内存使用量包括我们在应用程序中分配的所有对象（包括 UI 元素）。

因此，您唯一的解决方案是使用 Streaming JSON 解析器，它可以接收数据。也就是说，您不应该在 String 对象中保留完整的字符串。一种选择是使用[Jackson JSON parser](http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/)。

编辑：Android 现在从 API 级别 11 支持[JSONReader](http://developer.android.com/reference/android/util/JsonReader.html)。从未使用过它，但它似乎是要走的路..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:43:33.953

如果数据文件太大，您无法将其全部读取到内存中。

读取一行，然后将其写入本机文件。不要使用 StringBuilder 将所有数据保存在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T09:18:55.957

[我用这个库](https://jsonp.java.net/)解决了这个问题。[这里](http://www.journaldev.com/2315/java-json-processing-api-example-tutorial)有一个很好的教程。

有了这个，您将绕过将 entity.getContent() 转换为 String ，这将解决您的问题。

```
InputStream inputStream = entity.getContent();
JsonReader reader = Json.createReader(inputStream);
JsonObject jsonObject = reader.readObject();
return jsonObject; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:45:17.267

尝试以大块的形式导入数据，例如每次 1000 条记录。希望您不会遇到此问题。

# hook - Liferay Hook 定制

> ID：13176172
> 
> 赞同：2
> 
> 时间：2012-11-01T11:34:05.923
> 
> 标签：hook, liferay

我想写一个钩子，它将在新文档类型中放置一个新字段以及当前的文档类型（文本框、选择框等）。每当我在可用字段中选择该字段时从数据库中获取值，如果我们选择“选择”它会显示选项 1 ，选项 2 ，选项 3 ..”

谁能知道我应该编辑哪些 js 和 jsp 文件？请帮忙

[https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen04-document-types-and-metadata-sets-0](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen04-document-types-and-metadata-sets-0)

我无法上传图片，你能看看上面的链接吗？在这个页面中，图 4.6 是图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:21:22.793

由于`Document Types`是文档库的一部分，因此您可以签出：`\portal-web\docroot\html\portlet\document_library\edit_file_entry_type.jsp`. 以及可能从此页面访问的其他相关页面。

希望这是您想要的，我再次建议您注意我对您问题的[评论。](https://stackoverflow.com/questions/13176172/liferay-hook-customization#comment17934746_13176172)

# python - Python-如何刷新日志？(django)

> ID：13176173
> 
> 赞同：37
> 
> 时间：2012-11-01T11:34:13.550
> 
> 标签：python, django, google-app-engine, logging, django-nonrel

我在 Google App Engine 上使用 Django-nonrel，这迫使我使用 logging.debug() 而不是 print()。

“日志记录”模块由 Django 提供，但我在使用它而不是 print() 时遇到了困难。

例如，如果我需要验证变量 x 中保存的内容，我会将
`logging.debug('x is: %s' % x)`. 但是如果程序很快就崩溃了（没有刷新流），那么它就永远不会被打印出来。

因此，对于调试，我需要在程序因错误退出之前刷新 debug()，而这并没有发生。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-06T22:39:21.797

我认为这可能对你有用，假设你只使用一个（或默认）处理程序：

```
>>> import logging
>>> logger = logging.getLogger()
>>> logging.debug('wat wat')
>>> logger.handlers[0].flush() 
```

不过，这在文档中有点不受欢迎。

> 应用程序代码不应直接实例化和使用 Handler 的实例。相反，Handler 类是一个基类，它定义了所有处理程序应具有的接口，并建立了一些子类可以使用（或覆盖）的默认行为。 [http://docs.python.org/2/howto/logging.html#handler-basic](http://docs.python.org/2/howto/logging.html#handler-basic)

这可能会消耗性能，但如果你真的被卡住了，这可能有助于你的调试。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-09-06T02:11:34.807

我遇到了类似的问题，这就是我解决它的方法。不要直接使用`logging`模块来输出您的日志，而是初始化您自己的记录器，如下所示：

```
import sys
import logging

def init_logger():
    logger = logging.getLogger()

    h = logging.StreamHandler(sys.stdout)
    h.flush = sys.stdout.flush
    logger.addHandler(h)

    return logger 
```

然后，`logging`在您的代码中使用它而不是：

```
def f():
    logger = init_logger()
    logger.debug('...') 
```

因此，您将不再有刷新日志的问题。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-06-17T12:30:10.067

如果用例是您有一个 python 程序应该在退出时刷新其日志，请使用`logging.shutdown()`.

从python文档：

> logging.shutdown()
> 
> 通知日志系统通过刷新和关闭所有处理程序来执行有序关闭。这应该在应用程序退出时调用，并且在此调用之后不应进一步使用日志系统。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-02T09:03:06.633

Django 日志依赖于标准的 python 日志模块。

这个模块有一个模块级别的方法：`logging.shutdown()`它刷新所有的处理程序并关闭日志系统（即调用后不能再使用日志）

检查此函数的代码显示当前（python 2.7）日志记录模块在名为 _handlerList 的模块级变量中保存对所有处理程序的弱引用列表，因此可以通过执行类似操作来刷新所有处理程序

```
[h_weak_ref().flush() for h_weak_ref in logging._handlerList] 
```

因为这个解决方案使用模块的内部结构 @Mikes 上面的解决方案更好，但它依赖于对记录器的访问，它可以概括如下：

```
 [h.flush() for h in my_logger.handlerList] 
```

# linux - 如何比较两台主机上的目录结构

> ID：13176175
> 
> 赞同：1
> 
> 时间：2012-11-01T11:34:13.940
> 
> 标签：linux, file, networking, copy

我正在一台 linux 主机上从 cpan.org 安装 perl 模块。它们都下拉在一些文件夹中。

**1.我需要弄清楚，下拉菜单在哪里。** 2\. 我需要将这些文件和文件夹通过网络复制到第二台主机。

假设在安装 perl 模块之前，两台主机的目录“/”结构是相同的。

我怎样才能以一种简单的方式做到这一点？

谢谢你。

# android - 关于错误和日食的咨询停止为我工作

> ID：13176178
> 
> 赞同：0
> 
> 时间：2012-11-01T11:34:28.620
> 
> 标签：android

当我尝试打开 Eclipse 时出现错误

JVM 1.4.2_03 版本不适用于本产品。版本：需要 1.5 或更高版本。

我需要下载什么？（我在 Windows-7 上工作）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:53:11.100

您需要 JDK 6。您可以从[Oracle 下载站点获取它。](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# jquery - 如果 AJAX 请求被不同链接的用户中断，如何跳过“getJSON”错误处理

> ID：13176179
> 
> 赞同：1
> 
> 时间：2012-11-01T11:34:32.397
> 
> 标签：jquery, json, error-handling

我的主页上有一个 AJAX 功能。如果 AJAX 方法触发错误，它会在屏幕上显示错误文本。

```
 $.getJSON(url,
    {},
    function (data) {
        ......
    }
    ).error() {
        ShowError();
    }
); 
```

有时，当函数试图获取数据时，用户单击另一个页面的链接，然后函数停止并显示错误文本，直到加载下一页。

我该如何处理它，以便在用户单击不同链接的情况下不会显示错误文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:43:48.973

您可以将“[点击](http://api.jquery.com/click/)”事件绑定到设置全局标志的**a**标记。如果未设置标志，则仅显示错误消息。

```
$(document).ready(function() {
    var linkClicked = false;
    $('body').on('click', 'a', function(){
        linkClicked = true;
    });
}); 
```

# java - 将 BigInteger 拆分为特定位数

> ID：13176181
> 
> 赞同：0
> 
> 时间：2012-11-01T11:34:40.713
> 
> 标签：java, biginteger

我想拆分 BigInteger 数 `(1612513671536531537631747547475745713467754864474894674969787486558856856587856595095785859828347864647647545474665743827865765785635689266855775685657587586565858655985865858568585856858)`

变成 20 位数字。我该怎么做呢？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:46:51.040

您可以在将其作为字符串后尝试将其拆分为波纹管

```
String s = "1612513671536531537631747547475745713467754864474894674969787486558856856587856595095785859828347864647647545474665743827865765785635689266855775685657587586565858655985865858568585856858";
    String [] numbers =s.split("(?<=\\G.{20})");

for(String num:numbers){
        System.out.println(num);
    } 
```

和输出

```
16125136715365315376
31747547475745713467
75486447489467496978
74865588568565878565
95095785859828347864
64764754547466574382
78657657856356892668
55775685657587586565
85865598586585856858
5856858 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:40:56.840

将其转换为字符串，然后使用

```
String strBigInt = <yourBigInt>.toString();
List<String> parts = new ArrayList<String>();
while(strBigInt.length > 20){
    parts.add(strBigInt.substring(0,20));
    strBigInt = strBigInt.substring(20);
}
parts.add(strBigInt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:44:42.113

> 12345678901234567891 应该变成 1234567890123456789 和 1

```
String s = bi.toString();
List<String> parts = new ArrayList<String>();
for (int i = 0; i < s.length(); i += 20)
    parts.add(s.substring(i, Math.min(i + 20, s.length())));
System.out.println(parts); 
```

印刷

[16125136715365315376, 31747547475745713467, 75486447489467496978, 74865588568565878565, 95095785859828347864, 64764754547466574382, 78657657856356892668, 55775685657587586565, 85865598586585856858, 5856858]

# java - 在 dom4j 中解析时设置命名空间为 true

> ID：13176182
> 
> 赞同：0
> 
> 时间：2012-11-01T11:34:41.600
> 
> 标签：java, xml-parsing, xml-namespaces, dom4j

我正在使用 dom4j 解析一个 xml 文档，如下所示

```
 SAXReader reader = new SAXReader();
    document = reader.read("C:/test.xml"); 
```

但它不会保留我编写 xml 时存在的命名空间，如下所示

```
 FileOutputStream fos = new FileOutputStream("c:/test.xml");

    OutputFormat format = OutputFormat.createPrettyPrint();

    XMLWriter writer = new XMLWriter(fos, format);

    writer.write(document);

    writer.flush(); 
```

如何使用 dom4j 执行此操作。我使用 dom4j 是因为代码简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:40:35.360

不同意。这个片段

```
 System.out.println(new SAXReader()
            .read(new ByteArrayInputStream("<a:c xmlns:a='foo'/>"
                    .getBytes(Charset.forName("utf-8")))).getRootElement()
            .getNamespaceURI()); 
```

将打印

`foo`

您的问题是该`SAXReader#read(String)`方法需要一个`System ID`参数，而不是文件名。相反，请尝试为读者提供 一个`File`、 或 一个`InputStream`或 一个`URL`。

```
 reader.read(new File("C:/test.xml")) 
```

# c# - 结构上的 as 运算符？

> ID：13176188
> 
> 赞同：24
> 
> 时间：2012-11-01T11:35:07.160
> 
> 标签：c#, .net, casting, as-operator

我不明白。`As`运营商：

![as 运算符用于在兼容的引用或可空类型之间执行某些类型的转换。](../Images/d30cc87910c4747a1d0efcbe9875ac3b.png)

那么为什么以下工作？

```
struct Baby : ILive
{
    public int Foo { get; set; }

    public int Ggg() 
    {
        return Foo;
    }
}

interface ILive
{
    int Ggg();
}

void Main()
{
    ILive i = new Baby(){Foo = 1} as ILive;    // ??????
    Console.Write(i.Ggg());                    // Output: 1
} 
```

*   `Baby`是一个结构，创建它会将值放入`stack`. 此处不*涉及*参考。

*   这里当然没有可为空的类型。

关于我为什么错的任何解释？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-01T11:37:44.540

将其转换为接口将在托管堆上创建盒装副本，并返回对盒装副本的引用。盒子实现了接口。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-01T11:38:28.980

它之所以有效，是因为右侧是一个界面。条件是右侧可以接受`null`作为值，即它是引用类型或可为空的值类型。接口是一种引用类型。在这种情况下，代码将对结构进行装箱，然后将装箱的对象转换为接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:42:48.173

您只需使用引用类型可为`ILive`空值进行强制转换，因此不会引发错误。但是，如果您尝试使用此注释代码，则会收到错误消息。

```
Baby b = new Baby ();
 object o = b;
//Baby bb = o as Baby ; 
```

这是因为您正在尝试转换`as`为值类型并且不能为空。

# frameworks - EF 只读视图

> ID：13176191
> 
> 赞同：1
> 
> 时间：2012-11-01T11:35:10.810
> 
> 标签：frameworks, entity

我有基于视图的实体，它应该是只读的。另一个普通实体与该只读实体具有一对一的关系。

只读实体：

**人统计**

*   个人ID
*   Stat1
*   Stat2

正常实体

**人**

*   个人ID
*   人名

因为 PersonStatictics 应该是只读的，所以没有为 DELETE/UPDATE/INSERT 操作附加存储过程。

然后我尝试删除 Person 发生此错误：

**无法更新 EntitySet 'PersonStatictics'，因为它具有 DefiningQuery 并且元素中不存在支持当前操作的元素。**

谷歌没有帮助我。我通过在删除 Person 之前分离 PersonStatictics 来解决这个问题。但我不喜欢这个解决方案，因为我不要忘记对所有只读实体执行此操作。

是否可以为 EF 设置某些实体是只读的并且我们不需要对其强制执行 DELETE/UPDATE/INSERT 操作？

# c# - c#能最快加载什么图片格式？

> ID：13176192
> 
> 赞同：8
> 
> 时间：2012-11-01T11:35:11.670
> 
> 标签：c#, winforms, performance, image

这似乎是一个奇怪的问题，我不知道图像的格式，所以我会继续问......

我正在制作一个使用按钮网格的扫雷游戏（也与不同的事物相关），然后我使用`backgroundImage`. 如果网格是 9x9 就可以了。15x15 它会减慢速度，而 30x30 你可以明显地看到正在加载的每个按钮。

这引发了我的问题：哪种图像格式加载速度最快？显然，文件大小会影响加载速度，但是，我想知道，例如，jpeg（与 gif 文件大小相同）是否会加载得更快。或 bmp、png 等。

我问这个是为了看看我是否可以让我的网格使用不同的格式更快地加载。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T12:09:37.813

您需要一种**绘制**速度更快的图像格式。只有一种，它的像素格式直接匹配视频适配器的设置，这样就可以直接复制像素数据而无需调整格式。

在大多数现代机器上，这是 PixelFormat.Format32bppPArgb。它的绘制速度比所有其他的快**十倍。**

从资源或文件加载图像时，您不会获得该格式，您必须[创建它](https://stackoverflow.com/a/2016509/17034)。

请注意，如果网格中的每个单元格都是控件，这仍然不会为您提供出色的绘制速度。特别是如果它是一个按钮，它们的绘制成本非常高，因为它们支持透明效果。如果您在一个 Paint 事件处理程序中绘制*整个*网格，您只会在这里取得成功。就像表格一样。

[一个完全不同的方法是用这个 hack](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/aaed00ce-4bc9-424e-8c05-c30213171c2c/)来掩盖可见的延迟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T12:12:12.120

使用 8 位 PNG 或 GIF 格式并减少调色板中的颜色数量。一些图像程序（例如 PhotoShop）允许您将图像保存到网络并微调图像设置。通过将调色板从 256 减少到类似 32，您可以大大减小文件的大小。图像的颜色越少，文件大小就越小。

PNG 有一个类似的功能，称为“隔行扫描”。您可能需要关闭此功能，以便更快地下载完整图像。

因为 8 位 PNG 和 GIF 格式可能会产生更小的图像文件，所以在为您的应用程序创建图形和插图时请尽量记住这一点。尽量减少颜色数量并使用平面图形而不是照片。通过这种方式，您可以使用 16 种颜色的调色板创建图像，从而使文件大小极小且加载速度极快。

最好的祝福

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:23:40.703

每次绘制按钮时都重新加载图像吗？如果是这样，那就是你的问题 - 用缓存解决它。

您是否以原始尺寸绘制图像？运行时重采样会影响性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:29:57.707

使用 PNG 或 GIF 这是更快的图像类型

# c - 在 C 中将字节数组转换为 int 数组

> ID：13176195
> 
> 赞同：3
> 
> 时间：2012-11-01T11:35:36.287
> 
> 标签：c, arrays, type-conversion, arduino

我在下面有一些代码应该将[C](http://en.wikipedia.org/wiki/C_%28programming_language%29) (Arduino) 8 位字节数组转换为 16 位 int 数组，但它似乎只能部分工作。我不确定我做错了什么。

字节数组采用小端字节序。如何将其转换为 int（每个实体两个字节）数组？

用外行的话来说，我想每两个字节合并一次。

目前它正在为输入 BYTE ARRAY 输出：`{0x10, 0x00, 0x00, 0x00, 0x30, 0x00}`。输出 INT ARRAY 是：`{1,0,0}`。输出应该是一个 INT ARRAY is: `{1,0,3}`。

下面的代码是我目前拥有的：

[我根据Stack Overflow 问题*Convert bytes in a C array as longs 中*](https://stackoverflow.com/questions/11295728/convert-bytes-in-a-c-array-as-longs/11295756#11295756)的解决方案编写了这个函数。

我也有这个基于相同代码的解决方案，它适用于 byte array to long (32-bits) array `http://pastebin.com/TQzyTU2j`。

```
/**
* Convert the retrieved bytes into a set of 16 bit ints
**/
int * byteA2IntA(byte * byte_slice, int sizeOfB, int * ret_array){

    //Variable that stores the addressed int to be stored in SRAM
    int currentInt;
    int sizeOfI = sizeOfB / 2;

    if(sizeOfB % 2 != 0) ++sizeOfI;
        for(int i = 0; i < sizeOfB; i+=2){
            currentInt = 0;
            if(byte_slice[i]=='\0') {
                break;
            }
            if(i + 1 < sizeOfB)
                currentInt = (currentInt << 8) + byte_slice[i+1];
            currentInt = (currentInt << 8) + byte_slice[i+0];
            *ret_array = currentInt;
            ret_array++;
        }
        //Pointer to the return array in the parent scope.
        return ret_array;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:01:29.210

这行代码是什么意思？

```
if(i + 1 < sizeOfB) currentInt = (currentInt << 8) + byte_slice[i+1]; 
```

这里`currentInt`总是`0`和`0 << 8 = 0`。

另外，您要做的是，对于每一对`bytes`（让我从现在开始称呼他们），您通过执行以下操作来`uint8_t`打包`int`（让我从现在开始称呼它）：`uint16_t`

1.  你拿最右边`uint8_t`
2.  你将它向左移动 8 个位置
3.  你添加最左边的`uint8_t`

这真的是你想要的吗？

假设你有`byte_slice[] = {1, 2}`，你打包一个值为 513 ( `2<<8 + 1`) 的 16 位整数！

此外，您不需要返回指向数组的指针，`uint16_t`因为调用者已经将它提供给函数。

如果你使用函数的返回，正如 Joachim 所说，你会得到一个从`uint16_t`数组的位置开始的指针，它不是 position `[0]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:28:14.683

文森佐有一点（或两点），您需要清楚自己要做什么；

**将两个字节组合成一个 16 位 int，一个字节为 MSB，一个字节为 LSB**

`int16 result = (byteMSB << 8) | byteLSB;`

**将字节数组转换为 16 位**

```
for(i = 0; i < num_of_bytes; i++)
{
    myint16array[i] = mybytearray[i];
} 
```

**将一组数据复制到另一个数组中**

```
memcpy(dest, src, num_bytes); 
```

这将（可能取决于平台/编译器）与我的第一个示例具有相同的效果。

此外，请注意使用整数，因为这表明有符号值，使用 uint，更安全，可能更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:23:14.437

考虑使用结构。不过，这是一种黑客行为。

在我的脑海中，它看起来像这样。

```
struct customINT16 {
    byte ByteHigh;
    byte ByteLow;
} 
```

所以在你的情况下，你会写：

```
struct customINT16 myINT16;

myINT16.ByteHigh = BYTEARRAY[0];
myINT16.ByteLow = BYTEARRAY[1]; 
```

但是，您必须通过一个指针来转换它：

```
intpointer = (int*)(&myINT16);
INTARRAY[0] = *intpointer; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:38:45.990

问题很可能是您增加`ret_array`然后返回它。当你返回它时，它将指向目标数组之外的一个地方。

将指针保存在函数的开头，并改用该指针。

# php - 添加或更改值后如何排序？

> ID：13176201
> 
> 赞同：0
> 
> 时间：2012-11-01T11:36:00.360
> 
> 标签：php, algorithm, sorting, yii

我需要对下图中显示的项目列表进行排序

条件：
1\. 排序顺序必须是**连续**
的 2\. 不允许有多个值。

我遇到的问题是当我将值从 3 更改为 4 并且有两个值为 4 的节目

我如何在 PHP-yii 中克服这个问题？如果有人能帮助我解决其中涉及的**逻辑**，我将不胜感激。

![在此处输入图像描述](../Images/b57ed01da8bac6349eebad96c692f65f.png)

改变后
![](../Images/d271322caf21cda02fa5ffdaa96be6ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:57:07.943

您需要将其分解为 2 个操作。

`move`获取给定项目（例如项目 3），并将其发送到给定位置（例如＃5），然后将所有内容在两者之间移动一格。

`renumber`获取排序列表，并更改所有显示的数字。

我会在 JavaScript 中执行此操作，因此在`onchange`您`move`将更改的元素更改为新位置。然后`renumber`无条件。

如果您在服务器端进行，您可以将隐藏的表单字段与原始位置一起存储，找出每个更改，一遍又一遍地跳转，然后在最后重新排序。这将更加令人困惑，并且将是一个更糟糕的用户界面。（因此我为什么要推动这个客户端。）

# c++ - 更改 Windows 8 开始屏幕颜色

> ID：13176202
> 
> 赞同：1
> 
> 时间：2012-11-01T11:36:08.527
> 
> 标签：c++, windows-8, screen, personalization

我正在尝试制作一个程序来定期更改 Windows 8 的颜色开始屏幕。我找到了进行更改的注册表值，但问题是用户必须注销然后重新登录才能查看更改。有没有办法向系统发送消息或立即改变开始屏幕颜色的东西，就像您在个性化滑块中设置它的方式一样？

我使用 C++ 作为编程语言和 Visual Studio 2012。

任何帮助，将不胜感激。

PS我也希望我的程序也定期更改为锁定屏幕图片。如果有人也可以共享指向它的指针，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:11:12.120

我不相信您可以设置系统主题颜色，至少在 Windows Store 应用程序中是这样。根据此线程，您甚至无法读取系统主题颜色： [Windows 8 主题颜色 - 以编程方式访问它](https://stackoverflow.com/questions/9825943/windows-8-theme-color-accessing-it-programmatically)

# c# - 将 pdf 从 url 转换为流

> ID：13176204
> 
> 赞同：5
> 
> 时间：2012-11-01T11:36:10.060
> 
> 标签：c#, asp.net, pdf, stream, uri

我有一个托管在[http://test.com/mypdf.pdf](http://test.com/mypdf.pdf)中的 PDF 。

如何将 PDF 转换为 PDF `Stream`，然后使用此`Stream`转换回 PDF。

我尝试了以下但有一个异常（见图）：

```
private static Stream ConvertToStream(string fileUrl)
{
    HttpWebResponse aResponse = null;
    try
    {
        HttpWebRequest aRequest = (HttpWebRequest)WebRequest.Create(fileUrl);
        aResponse = (HttpWebResponse)aRequest.GetResponse();
    }
    catch (Exception ex)
    {

    }

    return aResponse.GetResponseStream();
} 
```

![在此处输入图像描述](../Images/a475e7458b3fa74aa9ac092f39fd0fa9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:57:57.020

这将起作用：

```
private static Stream ConvertToStream(string fileUrl)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(fileUrl);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    try {
        MemoryStream mem = new MemoryStream();
        Stream stream = response.GetResponseStream();

        stream.CopyTo(mem,4096);

        return mem;
    } finally {
        response.Close();
    }
} 
```

但是，您对返回的内存流的生命周期负全部责任。

更好的方法是：

```
private static void ConvertToStream(string fileUrl, Stream stream)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(fileUrl);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    try {
        Stream response_stream = response.GetResponseStream();

        response_stream.CopyTo(stream,4096);
    } finally {
        response.Close();
    }
} 
```

然后，您可以执行以下操作：

```
using (MemoryStream mem = new MemoryStream()) {
    ConvertToStream('http://www.example.com/',mem);
    mem.Seek(0,SeekOrigin.Begin);

    ... Do something else ...
} 
```

您也可以直接返回响应流，但您必须检查其生命周期，释放响应*可能会*释放流，因此会释放内存副本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T12:00:24.973

你可能想看看[`WebClient.DownloadFile`](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)。

您给它一个 URL 和本地文件名，它会将文件直接保存到磁盘。可能会为您节省一两步。

您也可以尝试[`WebClient.DownloadData`](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)将文件保存到 in-memory `byte[]`。

**编辑**

您没有指定要将文件发布到的 Web 服务的协议。最简单的形式（RESTful）就是将文件发布到另一个 URL 的数据。这是您将如何做到的。

```
using (WebClient wc = new WebClient())
{
    // copy data to byte[]
    byte[] data = wc.DownloadData("http://somesite.com/your.pdf");

    // POST data to another URL
    wc.Headers.Add("Content-Type","application/pdf");
    wc.UploadData("http://anothersite.com/your.pdf", data);
} 
```

如果您使用的是 SOAP，则必须将文件转换为 Base64 字符串，但希望您使用的是生成的客户端，它会为您处理这些问题。如果您可以详细说明您将文件发送到的网络服务类型，我可能会提供更多信息..

# python - 如何克隆 BioSQL 数据库中的生物条目记录

> ID：13176210
> 
> 赞同：2
> 
> 时间：2012-11-01T11:36:25.597
> 
> 标签：python, biopython

我需要将记录从一个子数据库完全克隆到另一个。我似乎无法直接将查找插入加载，虽然我可以写入文件并再次将其读回，但这似乎是一个相当不雅的解决方案。

一个侧面但核心的问题是：有没有一种简单的方法可以将 DBSeqRecord 完全加载到传统的 SeqRecord 中？

非常感谢！

# php - 如何使用 preg_match php 函数获取 Dailymotion 代码？

> ID：13176222
> 
> 赞同：-4
> 
> 时间：2012-11-01T11:37:23.143
> 
> 标签：php, regex, html-parsing, preg-match

> **可能重复：**
> [如何从 URL 中获取视频 ID？（每日运动）](https://stackoverflow.com/questions/6513461/how-do-i-get-the-video-id-from-the-url-dailymotion)

我有这个代码来获取视频的dailymotion缩略图：

```
<?php
    $url = get_the_content(); 
    if (preg_match('????????????', $url, $match)) {
        $video_id_dailymotion = $match[1];
    }
?>

<?php if($video_id_dailymotion): ?>
    <img class="video-thumbnail" src="http://dailymotion.com/thumbnail/video/<?php echo $video_id_dailymotion; ?>" alt="" width="190">
<?php endif; ?> 
```

但需要 preg_match 功能部分的帮助。我应该放什么而不是**????????????** 作为第一个论点？

dailymotion 视频的格式为：

```
http://www.dailymotion.com/video/xulmeo_osama-bin-laden-for-dummies_shortfilms 
```

顺便提一句。**$url**变量包含其他内容，例如 youtube 目标代码、大量文本等，并且有时仅嵌入 dailymotion 视频。

**编辑：** 对于 youtube，我使用的是这样的东西：

```
if (preg_match('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $url, $match)) {
    $video_id_youtube = $match[1];
} 
```

它正在工作，现在我需要类似的东西来进行日常运动。

**编辑 2：** 必须使用**preg_match**并在该正则表达式条件下使用 dailymotion.com

**编辑 3：** $url 中需要由 preg_match 处理的代码如下所示：

```
And here is the video <iframe src="http://www.dailymotion.com/embed/video/xsqxky" frameborder="0" width="480" height="270"></iframe>
What do you think? Let us know. Peace! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:16:01.943

对于dailymotion，视频ID 是第三个URL 段的第一个字符串（在第一个_ 之前）。根据你的例子

www.dailymotion.com/video/xulmeo **_osama** -bin-laden-for-dummies_shortfilms

有视频ID是`xulmeo`。所以你需要做的就是在第一次出现下划线之前提取字符串

代码 ：

```
$slice=explode('/',$url);
$video_id_dailymotion=explode('_',$slice[2]); 
```

或者干脆

```
$video_id_dailymotion=strtok(basename($url), '_'); 
```

**参考**：
[explode](http://in1.php.net/manual/en/function.explode.php)
[strtok](http://php.net/manual/en/function.strtok.php)
[basename](http://php.net/manual/en/function.basename.php)

* * *

**编辑：**正如所指出的，dailymotion 链接出现的方式可能不同。

1.  [http://www.dailymotion.com/embed/video/xulmeo](http://www.dailymotion.com/embed/video/xulmeo)
2.  [http://www.dailymotion.com/video/xulmeo_osama-bin-laden-for-dummies_shortfilms](http://www.dailymotion.com/video/xulmeo_osama-bin-laden-for-dummies_shortfilms)

对于案例 2，请参阅前面的代码片段，对于这两种情况，请使用此代码

```
$slice=explode('/',$url);
$video_id_dailymotion=(strlen($slice[2])==6?$slice[2]:explode('_',$slice[2]));
// All dailymotion video id's are 6 in length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:08:16.620

首先使用 HTML 解析器来提取所有链接。这将使您能够以首选形式获得信息。

然后根据底层规范[规范化所有链接，即](http://en.wikipedia.org/wiki/URL_normalization)[RFC3986 Section 6](https://www.rfc-editor.org/rfc/rfc3986#section-6)。

现在，所有 URL 都采用了可用于比较和分析的格式。例如使用正则表达式。

对于这三个步骤，存在工具和答案：

1.  [`DOMDocument`](http://php.net/DOMDocument)和[`DOMXPath`](http://php.net/DOMXpath)- 请参阅[如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/q/3577641/367456)
2.  [`Net_Url2`](http://pear.php.net/package/Net_URL2)- 请参阅[XPath 查询和 HTML - 在锚标记中查找特定的 HREF](https://stackoverflow.com/q/9894956/367456)
3.  [`preg_match`](http://php.net/preg_match)- 请参阅[如何从 URL 中获取视频 ID？（每日运动）](https://stackoverflow.com/q/6513461/367456)

通常希望您在提出问题之前先做好功课，但我将这个概括性的程序留给您和未来的“只是遇到问题”并且看不到树木的树木的访客。

# android - odata，Noclassdeffounderror

> ID：13176233
> 
> 赞同：0
> 
> 时间：2012-11-01T11:38:04.283
> 
> 标签：android, odata, restlet, restlet-2.0, odata4j

下面是android尝试使用odata检索数据的代码。OdataWebNorthwindModelService 是代理类的名称（自动生成）...我按照[http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx](http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx)寻求帮助...但我遇到了一些问题..请帮助我。

```
package com.example.odatajsondatagrabbing;

import northwindmodel.Category;

import org.restlet.ext.odata.Query;

import OdataWebNorthPackage.OdataWebNorthwindModelService;
import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        OdataWebNorthwindModelService service = new OdataWebNorthwindModelService();

        Query<Category> query = service.createCategoryQuery("/Categories");

        for(Category cate: query){
            System.out.println("ID::"+cate.getCategoryId());
            System.out.println("Name::"+cate.getCategoryName());
            System.out.println("\n");
        }
    }
} 
```

以下是我在运行应用程序时遇到的错误

```
 11-01 17:12:14.264: D/AndroidRuntime(689): Shutting down VM
11-01 17:12:14.264: W/dalvikvm(689): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-01 17:12:14.294: E/AndroidRuntime(689): FATAL EXCEPTION: main
11-01 17:12:14.294: E/AndroidRuntime(689): java.lang.NoClassDefFoundError: OdataWebNorthPackage.OdataWebNorthwindModelService
11-01 17:12:14.294: E/AndroidRuntime(689):  at com.example.odatajsondatagrabbing.MainActivity.onCreate(MainActivity.java:20)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.os.Looper.loop(Looper.java:123)
11-01 17:12:14.294: E/AndroidRuntime(689):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-01 17:12:14.294: E/AndroidRuntime(689):  at java.lang.reflect.Method.invokeNative(Native Method)
11-01 17:12:14.294: E/AndroidRuntime(689):  at java.lang.reflect.Method.invoke(Method.java:521)
11-01 17:12:14.294: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-01 17:12:14.294: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-01 17:12:14.294: E/AndroidRuntime(689):  at dalvik.system.NativeStart.main(Native Method)
11-01 17:17:14.385: I/Process(689): Sending signal. PID: 689 SIG: 9 
```

当我尝试调试时，错误来自构造函数。下面是自动生成的代码

```
package OdataWebNorthPackage;

import northwindmodel.*;
import org.restlet.ext.odata.Query;
public class OdataWebNorthwindModelService extends org.restlet.ext.odata.Service {

    public OdataWebNorthwindModelService() {
        super("http://services.odata.org/Northwind/Northwind.svc");
    }

    public void addEntity(Category entity) throws Exception {
        addEntity("/Categories", entity);
    }

    public Query<Category> createCategoryQuery(String subpath) {
        return createQuery(subpath, Category.class);
    }

    public void addEntity(CustomerDemographic entity) throws Exception {
        addEntity("/CustomerDemographics", entity);
    }

    public Query<CustomerDemographic> createCustomerDemographicQuery(String subpath) {
        return createQuery(subpath, CustomerDemographic.class);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:09:42.730

你完成了吗？

Project > Properties > Java Build Path > Order and Export > 最后，勾选您导入的 OData4j 库。

另外，不要在 UI 线程上使用 web 服务，考虑使用服务或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# c++ - qml c++ 信号槽不工作

> ID：13176239
> 
> 赞同：4
> 
> 时间：2012-11-01T11:38:40.140
> 
> 标签：c++, qt, signals, qml, slot

在下面的 C++ 代码中，我加载了一个 qml 文件。但是 c++ 插槽不起作用。不会出现错误或警告，但调试消息始终是“a”字符。没有“b”字符出现。你能告诉我为什么吗？谢谢。

c++ 端代码

```
 ::::::::::::::
    view=new QDeclarativeView;
    view->setSource(QUrl("qml/groundMenu/Ground.qml"));
    rootObject = dynamic_cast<QObject*>(view->rootObject());
    QObject::connect(rootObject, SIGNAL(qmlSignal()),this, SLOT(qmlLoadedProcess()));
:::::::::::::::::
void MainWindow::qmlLoadedProcess()
{
    qDebug()<<"b";
}

//qml side code 
    Rectangle
    {
      signal qmlSignal()
      Component.onCompleted:
      {
         qmlSignal()
         console.log("a")
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:44:21.613

问题是**Component.onCompleted**在您调用**QObject::connect(...)**之前发生。即，当您调用**view->setSource(...)**时会创建 qml 中的 Rectangle，并且在将信号连接到插槽之前调用**Component.onCompleted 。**所以**qmlLoadedProcess()**永远不会被调用。

# pointers - 指针（帕斯卡） - 我不能将一个指针分配给另一个

> ID：13176242
> 
> 赞同：0
> 
> 时间：2012-11-01T11:38:44.157
> 
> 标签：pointers, pascal

考虑这段代码：

```
program test;
uses crt;

var ptr1, ptr2:^integer;

begin
     new(ptr1);
     new(ptr2);
     writeln('ptr1: ',integer(@ptr1), ', ptr2: ', integer(@ptr2));
     ptr1:=ptr2;
     write('ptr1: ',integer(@ptr1), ', ptr2: ', integer(@ptr2));
     readln;
end. 
```

第二个“写”应该对 ptr1 和 ptr2 给出相同的结果，但它给出了（lazarus - free pascal）：

```
ptr1: 4243456, ptr2: 4243472
ptr1: 4243456, ptr2: 4243472 
```

在我看来应该是：

```
ptr1: 4243472, ptr2: 4243472 
```

我对指针完全陌生。我理解错了吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:55:25.373

当您编写@ptr1 时，您不是在访问指针，而是创建一个指向ptr 的新指针。（pascal 不像 perl 带有变量前缀）

当你写

```
 writeln('ptr1: ',integer(ptr1), ', ptr2: ', integer(ptr2));
 ptr1:=ptr2;
 write('ptr1: ',integer(ptr1), ', ptr2: ', integer(ptr2)); 
```

, 你得到了你所期望的

（但最好使用 PtrInt 而不是整数，因为整数仅适用于 32 位系统）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T16:30:32.270

这是如何将 vlues 分配给 pascal 中的指针

> ptr1^:=100; writeln('ptr1: ',整数(ptr1^), ', ptr2: ', 整数(@ptr2));

# node.js - 自动化 Jasmine-Node 和 express.js

> ID：13176245
> 
> 赞同：8
> 
> 时间：2012-11-01T11:38:47.513
> 
> 标签：node.js, tdd, express, jasmine, jasmine-node

[我使用express.js](http://expressjs.com)创建了一个简单的 Webapp ，并希望使用[jasmine-node](https://github.com/mhevery/jasmine-node)对其进行测试。到目前为止工作正常，但我的问题是我必须每次手动启动服务器才能运行我的测试。

您能否帮助我编写一个运行服务器的规范助手（使用另一个端口，然后是我的开发端口）仅用于测试，然后将其杀死？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T12:17:02.357

这就是我所做的：

我的节点项目的根目录中有一个**server.js**文件，它设置节点应用程序服务器（使用 express）并导出 2 个方法：

```
exports.start = function( config, readyCallback ) {

    if(!this.server) {

        this.server = app.listen( config.port, function() {

            console.log('Server running on port %d in %s mode', config.port, app.settings.env);

            // callback to call when the server is ready
            if(readyCallback) {
                readyCallback();
            }
        });
    }
};

exports.close = function() {
    this.server.close();
}; 
```

**app.js**文件此时将很简单：

```
var server = require('./server');
server.start( { port: 8000 } ); 
```

所以文件/文件夹的基本结构如下：

```
src
   app.js
   server.js 
```

有了这种分离，**您就可以正常运行服务器**：

```
node src/app.js 
```

..**和/或从自定义节点脚本中要求它**，它可以是执行测试的节点脚本（或 jake/grunt/whatever 任务），如下所示：

```
/** my-test-task.js */

// util that spawns a child process
var spawn = require('child_process').spawn;

// reference to our node application server
var server = require('./path/to/server.js');

// starts the server
server.start( { port: 8000 }, function() {

    // on server ready launch the jasmine-node process with your test file
    var jasmineNode = spawn('jasmine-node', [ '.path/to/test/file.js' ]);

    // logs process stdout/stderr to the console
    function logToConsole(data) {
        console.log(String(data));
    }
    jasmineNode.stdout.on('data', logToConsole);
    jasmineNode.stderr.on('data', logToConsole);

    jasmineNode.on('exit', function(exitCode) {
        // when jasmine-node is done, shuts down the application server
        server.close();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:50:40.040

我使用 Mocha——这该死的相似——但同样的原则应该适用：你可以尝试在 main 内的 'beforeEach' 钩子中`require`输入你的文件。那应该为你点燃它。`app.js``describe`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:15:25.637

假设您使用一些在 server.js 中调用的代码`app.listen()`，则不需要每次运行时都需要该文件，而只需要一次，然后有两个函数，例如

```
startServer = -> app.listen(3000)
stopServer = -> app.close() 
```

然后你可以在`beforeEach`和`afterEach`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-12T10:29:14.437

如果您想在开发时进一步自动化测试，您可以转到终端线并执行

```
jasmine-node . --autotest 
```

然后 Jasmine 将继续监听您项目中的每个文件，并且每当您对其中一个文件进行更改时，它都会告诉您该代码是否破坏了您的任何测试；）

# linux - 查找文件名中没有空格的文件

> ID：13176246
> 
> 赞同：0
> 
> 时间：2012-11-01T11:38:53.113
> 
> 标签：linux, shell, unix

我正在尝试使用`find`当前目录下的文件查找所有 *.cpp，这些文件在 dirname 和 basename 中都不包含空格。我知道我需要使用`-wholename`标志，但我找不到合适的正则表达式语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:42:28.997

与正则表达式一起使用`find`：

```
find . -type f -regex "[^ ]*.cpp" 
```

# wpf - WPF 在每个用户控件中合并资源字典 - 坏主意？

> ID：13176248
> 
> 赞同：7
> 
> 时间：2012-11-01T11:38:59.150
> 
> 标签：wpf, resharper

我将应用程序的资源保存在单独的 DLL 中，并在我的主 EXE 中使用 App.xaml 中的类似内容引用它们：-

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/MyThemesAssembly;component/Themes/Generic.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

当我编辑主 EXE 项目中的窗口时，VS2010 设计器无法识别来自其​​他程序集的任何资源，因此我看不到应用了任何样式（这不是真正的问题，因为我总是在 XAML 视图中工作）。但是，Resharper 也无法识别这些外部资源名称，因此在我编辑 XAML 时，资源名称下会出现很多曲线。

我发现我可以通过在每个窗口和用户控件中包含上述 XAML 来修复 VS 设计器和 Resharper，但这会对内存和/或性能产生不利影响吗？每个窗口都会获得资源的单独副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:16:16.813

我们的应用程序在使用每个 UserControl / View 中引用的 ResourceDictionaries 时遇到了问题。我不建议这样做。通过使用 SharedResourceDictionaries，我们设法将应用程序的内存占用减少了 300 mb。我看起来您最终会为应用程序中的每个 UserControl 实例化一次 ResourceDictionary。不要仅仅为了修复 VS 设计器而这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:36:02.247

尝试使用 VS2012。

我有一个正在使用的测试项目，我正在从外部程序集合并资源字典，在我的 app.xaml 中我有这个：

```
<Application x:Class="WpfPackDictionaries.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/WPFCommonLibrary;component/Vectors/Vectors.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

然后在我的 mainwindow.xaml 中，我有这个路径拉入样式 ModifiablePathStyle：

```
<Window xmlns:Control="clr-namespace:WPF.Common.Control;assembly=WPFCommonLibrary"  x:Class="WpfPackDictionaries.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Path Style="{StaticResource ModifiablePathStyle}" Fill="Red"/>
        <Control:Jabberwocky />
    </Grid>
</Window> 
```

Intellisense/Resharper (V7.1 10/31 (Early Access Build)) 可以识别这种风格并且我没有波浪线：

![在此处输入图像描述](../Images/c52c303da156cb0cd3b8cf9662bc6ab3.png)

因此，您是否尝试过在 VS2012 中工作？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T15:06:09.903

VS2012 能够“查看”资源，因为 VS XAML 设计器在设计时加载并执行您的代码，因此 VS 可以检查在运行时可用的资源。ReSharper 从不使用设计时代码执行（因为这要求您的代码始终处于可编译状态），因此 XAML 支持变得有点复杂。

ReSharper 8.0 实现了对 BAML 反编译的支持，并提取 XAML 文件列表并从引用的二进制程序集中解析 XAML 资源。

# h2 - 设置默认时区 H2 数据库

> ID：13176251
> 
> 赞同：18
> 
> 时间：2012-11-01T11:39:34.830
> 
> 标签：h2

如何明确设置 H2 应该使用的时区？现在它从底层操作系统获取要使用的时区。我会假设存在一个额外的参数，我将添加到连接字符串中，如下所示。

```
db.url=jdbc:h2:mem:mybipper;MVCC=true;<timezone=UTC> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-18T22:44:00.660

显然您在连接上没有参数，但数据库将使用加载驱动程序的 JVM 的时区，因此您可以设置`-Duser.timezone=UTC`. *请注意，加载驱动程序后，您无法更改时区。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-26T17:56:10.660

您可以在与数据库交互之前操纵 JVM 时区：

```
TimeZone.setDefault(TimeZone.getTimeZone("UTC")) 
```

不幸的是，H2 不支持每个连接的时区......但是。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-29T13:44:13.430

帮助我的是为 JDBC 而不是 JVM 设置时区配置，这似乎也更合理和更干净的方式，因为它只影响数据库而不是整个 JVM：

```
spring.jpa.properties.hibernate.jdbc.time_zone=UTC 
```

[我](https://stackoverflow.com/q/55398279/519035)对另一个问题的回答可能有助于提供更多信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-16T07:03:06.503

H2 使用 JVM 时区，它会影响您的日期计算。例如，如果您在 Junits 中使用它，您可以设置某个时区，然后在完成后重新输入初始值。例子：

```
System.setProperty("user.timezone", "GMT-3");
TimeZone.setDefault(null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-22T14:10:54.760

我想您在阅读类型`Date`或`DateTime`.

显然，H2 在写入和读取期间使用了不同的时区信息。提供具有预期时区的日历会为我返回预期值：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(ZoneOffset.UTC))
resultSet.getDate("dateColumn", cal) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T10:24:20.753

您不能为数据库设置时区。

但是，我不知道 H2 对大多数操作使用时区（至少不是 H2 的当前版本）。

那么，你想解决什么问题呢？

# python - SqlAlchemy 的 Python 'startswith' 等效项

> ID：13176252
> 
> 赞同：9
> 
> 时间：2012-11-01T11:39:48.543
> 
> 标签：python, sqlalchemy

我有一个字符串，我需要找到所有具有匹配前缀的记录：

```
path = '/abc/123/456'
session.query(Site).filter(path.startswith(Site.path_prefix)) 
```

当 path_prefix 等于时，以下记录将匹配：

```
/abc
/ab
/abc/123 
```

但不是：

```
/asd
/abc/123/456/789
/kjk 
```

使用 SqlAlchemy 是否可以做到这一点，而无需切换到 python？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T11:57:21.093

如果将`path`变量包装在[`bindparam()`对象](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.expression.bindparam)中，则可以将其视为任何列，包括使用[`.contains()`](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.contains)and[`.startswith()`](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.startswith)运算符：

```
from sqlalchemy.sql.expression import bindparam

session.query(Site).filter(bindparam('path', path).contains(Site.path_prefix)) 
```

SQLAlchemy 转换`.contains()`为：

```
? LIKE CONCAT('%', Site.path_prefix, '%') 
```

在 MySQL 或

```
? LIKE '%' || Site.path_prefix || '%' 
```

在其他数据库上。

如果你想测试一个`.startswith()`操作，那也可以：

```
from sqlalchemy.sql.expression import bindparam

session.query(Site).filter(bindparam('path', path).startswith(Site.path_prefix)) 
```

# iphone - UIAlertview 代码上的 EXC_BAD_ACCESS = 1

> ID：13176253
> 
> 赞同：8
> 
> 时间：2012-11-01T11:39:49.093
> 
> 标签：iphone, objective-c, xcode, uialertview, exc-bad-access

我在 [alert show] 行上收到 EXC_BAD_ACCESS。

为什么我会得到这个？

```
 alert = [[UIAlertView alloc]initWithTitle:@"Application Alert" message:@"all date popup" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Update",nil];

 [alert show]; //EXC_BAD_ACCESS on this line 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T12:16:12.533

此崩溃必须在 iOS 6 上。此崩溃的解决方案如下：

`[alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES];`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T11:50:40.553

只需将委托设为 nil，不要将 self 应用于委托。代码如下

```
alert = [[UIAlertView alloc]initWithTitle:@"Application Alert" message:@"all date popup" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Update",nil];

[alert show]; 
```

如果您在委托中使用自我，那么您将不得不使用警报委托方法

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

那么它不会给 EXC_Bad_Excess。让我知道它是否有效..!!!!快乐编码....

# c# - c# ip multicast 接收并保存多个数据包

> ID：13176255
> 
> 赞同：0
> 
> 时间：2012-11-01T11:39:54.613
> 
> 标签：c#, sockets, network-programming, udp, multicast

你好我从[这里](http://codeidol.com/csharp/csharp-network/IP-Multicasting/Csharp-IP-Multicast-Support/#part-6)得到这个代码来接收多播地址上的数据

```
 Socket sock = new Socket(AddressFamily.InterNetwork,
            SocketType.Dgram, ProtocolType.Udp);
 Console.WriteLine("Ready to receive…");
 IPEndPoint iep = new IPEndPoint(IPAddress.Any, 9050);
 EndPoint ep = (EndPoint)iep;
 sock.Bind(iep);
 sock.SetSocketOption(SocketOptionLevel.IP, 
            SocketOptionName.AddMembership, 
            new MulticastOption(IPAddress.Parse("224.100.0.1")));
 byte[] data = new byte[1024];
 int recv = sock.ReceiveFrom(data, ref ep);
 string stringData = Encoding.ASCII.GetString(data, 0, recv);
 Console.WriteLine("received: {0} from: {1}", stringData, ep.ToString());
 sock.Close(); 
```

现在这在我收到一个数据包时起作用，然后触发 sock.ReceiveFrom 但之后接收器关闭（即使我删除了 sock.Close 行）。
我想要的是接收器显示或保存我的数据，但继续收听更多的数据包。

什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:50:08.160

您必须编写某种循环或使用异步方法 BeginReceive/EndReceive。一旦你的本地 sock 变量超出范围，它可能会被 gc 收集并处理掉。

```
byte[] data = new byte[1024];

while (true) {
    // this blocks until some bytes are received
    int recv = sock.ReceiveFrom(data, ref ep);
    string stringData = Encoding.ASCII.GetString(data, 0, recv);
    Console.WriteLine("received: {0} from: {1}", stringData, ep.ToString());
} 
```

# c# - ASP.NET 生产服务器 PDB 文件

> ID：13176256
> 
> 赞同：3
> 
> 时间：2012-11-01T11:40:13.210
> 
> 标签：c#, asp.net

在开发时，我理解为什么要构建 PDB 文件。但是当我为生产服务器部署我的网站时，PDB 文件仍然存在。我不明白为什么。

我应该在生产环境中删除它们还是保留它们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T11:50:23.730

PDB 文件允许在应用程序引发未处理异常时记录代码的堆栈跟踪。

如果您的网站`CustomErrors`在 web.config 中设置为，`OFF`那么每个人都可以看到您的错误代码。这是不好的。

如果您的网站`CustomErrors`在 web.config 中设置为，`ON`或者`RemoteOnly`您的错误代码将不会对公众可见，但是您将能够在服务器事件日志中找到 StackTrace，这可能有助于您跟踪代码中的错误. 还行吧。

如果您删除 PDB（或通过项目构建/发布配置停止发布），那么您的站点将不会在 Stack Trace 中记录您的代码，但会记录其他堆栈信息。在任何情况下，始终`CustomErrors`在 web.config 中设置为`ON`或`RemoteOnly`。总是这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:44:34.817

您可以安全地删除它们。它们用于调试和代码源目的。

如果您不希望部署 pdb 文件，请在项目设置中（右键单击项目并选择*Properties > Build*）：

您可以选择`Configuration:`用于部署的（例如`Release`），然后在该`Output`部分中，按`Advanced..`- 按钮打开*高级构建设置*并设置`Debug Info:`为`none`（通常`pdb-only`处于发布模式）。

然后，每次您在发布模式下部署时，都不会生成 pdb 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:44:08.010

PDB 文件用于调试，但您可以将它们留在生产服务器上。不会有不好的事情发生

# java - 使用 MAMP、Tomcat、Java 进行本地开发

> ID：13176260
> 
> 赞同：1
> 
> 时间：2012-11-01T11:40:27.643
> 
> 标签：java, macos, git, tomcat, mamp

我目前的组织正在使用 java 构建他们的 Web 应用程序。我不想开始使用 Eclipse。我是前端网络人——特别是 HTML 和 CSS。我们使用 GIT 作为版本控制。我需要能够进行 CSS 更改，将文件保存在本地，并查看更改的效果（通过使用 LiveReload 之类的自动刷新或手动刷新）。

在我以前的公司中，我们使用 PHP，所以 MAMP + Live Reload 工作得很好。因为我现在处于 Java 环境中，所以该设置不太有效。

我已将 Tomcat 安装到 MAMP 中，因此当我启动 MAMP 时，我也会在 localhost:8080 启动 Tomcat。但是，我不知道我还需要做什么才能真正查看应用程序的本地版本（使用 GIT 克隆将其克隆到我的硬盘驱动器）。我的同事同样一无所知，因为他们都使用 Eclipse 作为他们的 IDE，它为他们处理所有这些。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:43:29.463

我知道我在这里聚会有点晚了，但我希望这对你仍然有帮助。

Java Web 应用程序通常打包为 WAR 文件或其他类型的包。当您将它部署到 Tomcat 中时，它会扩展存档。如果您转到 Tomcat 目录（假设您之前使用了指南，这可能类似于 /Applications/MAMP/tomcat 或 /Applications/MAMP/bin/tomcat）应该有一个“webapps”目录。打开它，你会在里面找到每个 Web 应用程序的目录。

在这些 Web 应用程序目录中是一个“资源”目录。CSS 和图像通常可以在这里找到。HTML 通常位于 Web 应用程序目录中。这使您可以立即进行更改并查看它，以实现快速的 UI 开发。然而！此更改发生在 GIT 存储库之外，因此尽管您可以立即查看它，但它并没有在您可以保存它的地方进行更改。当您对结果感到满意时，您需要将这些文件复制到 GIT 存储库中的正确位置。

尽管如此，这是我用来进行快速 UI 更改并查看我的结果的方法，而无需等待它编译，或者如果我只做 UI，则不必启动 Eclipse。

您也可以通过进入终端并使用： 'ln -s /Applications/MAMP/tomcat/webapps/ ~/Webapps' 这将在您的主目录中创建指向 Tomcat WebApps 目录的链接，因此不需要让您每次都能追踪到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:47:14.060

如果他们在所有事情上都使用 Eclipse——包括构建——你目前除了自己使用 Eclipse 之外别无选择。

关键步骤是自动构建 Tomcat 中的内容。您可以通过说“我们的组织需要一个持续集成服务器”来让球滚动起来，因为要使其工作，您需要您的项目可以在 Eclipse 之外构建。Maven 对此有好处，您可以在自己的计算机上本地运行 maven 以使您的生活更轻松（甚至可以直接在文件上运行 Tomcat，而无需在每次更改后重新部署）。

持续集成服务器有*很多*好处，这只是其中之一。您的老板可能会发现它对您的开发团队非常有价值。

# php - date_add 或 date_sub 速度差？

> ID：13176261
> 
> 赞同：2
> 
> 时间：2012-11-01T11:40:29.027
> 
> 标签：php, mysql

给定以下两个 mysql 查询：

```
SELECT * FROM table1 WHERE DATE_ADD(datetimecolumn,INTERVAL 24 HOUR)>NOW() 
```

和

```
SELECT * FROM table1 WHERE DATE_SUB(NOW(),INTERVAL 24 HOUR)>datetimecolumn 
```

哪个查询会更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:44:01.687

## 我想你想知道的：

第二个应该明显更快，因为`datetimecolumn`可以直接用于索引操作。如果没有索引，我想说差异应该可以忽略不计（时间操作和函数调用比从磁盘检索数据要快得多）。

## 你真正问的是：

这两个查询不等价（它们不返回相同的记录）。

```
DATE_ADD(datetimecolumn,INTERVAL 24 HOUR)>NOW() 
```

检索从现在起 24 小时内更新的记录（因此，从昨天开始插入的所有记录）。

第二

```
DATE_SUB(NOW(),INTERVAL 24 HOUR)>datetimecolumn 
```

检索从现在起 24 小时后（过去两天或更长时间）的记录。

所以在那种情况下，哪个查询更快，答案是**它取决于有多少记录......**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:42:45.593

下面会很快。

下面的可以应用 的索引`datetimecolumn`，而上面的不能。

`DATE_SUB(NOW(),INTERVAL 24 HOUR)`只需要计算一次，而`DATE_ADD(datetimecolumn,INTERVAL 24 HOUR)`需要对每条记录做一次。

# c# - 无法将类型“System.Uri”隐式转换为“System.Collections.Generic.List” ' 错误

> ID：13176265
> 
> 赞同：0
> 
> 时间：2012-11-01T11:40:48.407
> 
> 标签：c#, asp.net

我正在使用 HTML Agility 来获取所有图像，因为图像并不总是具有我想要遵循的绝对路径。但是代码中下面标记的行会产生错误

无法将类型“System.Uri”隐式转换为“System.Collections.Generic.List”

我不知道如何解决这个问题我尝试了很多选项，但不断出现一个或另一个错误

```
List<String> imgList = (from x in doc.DocumentNode.Descendants("img")
                      where x.Attributes["src"] != null
                      select x.Attributes["src"].Value.ToLower()).ToList<String>();

List<String> AbsoluteImageUrl = new List<String>();

foreach (String element in imgList)
{
    AbsoluteImageUrl = new Uri(baseUrl, element); //GIVES ERROR
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:43:30.443

编译器会产生错误，因为 的类型`AbsoluteImageUrl`与您的`Uri`. 如果您需要将 添加`Uri`到字符串列表，您应该获取其基础字符串（例如`Uri.AbsolutePath`）。在这种情况下，代码如下所示：

```
AbsoluteImageUrl.Add(new Uri(baseUrl, element).AbsolutePath); 
```

另一方面，如果您需要一个`Uri`列表，请保留您的原始代码并更改类型`AbsoluteImageUrl`：

```
List<Uri> AbsoluteImageUrl = new List<Uri>(); 
```

完成此操作后，您应该`AbsoluteImageUrl.Add`在循环中使用将其添加`Uri`到列表中。

* * *

关于评论中关于`Uri.ToString()`和之间差异的讨论，`Uri.AbsolutePath`根据官方 MSDN，它们有不同的定义，因此这取决于他/她应该使用的 OP 的要求。附带说明的源代码`Uri.ToString`如下，因此它与 有根本不同`AbsolutePath`：

```
[SecurityPermission(SecurityAction.InheritanceDemand, Flags=SecurityPermissionFlag.Infrastructure)]
public override string ToString()
{
    if (this.m_Syntax == null)
    {
        if (this.m_iriParsing && this.InFact(Flags.HasUnicode))
        {
            return this.m_String;
        }
        return this.OriginalString;
    }
    this.EnsureUriInfo();
    if (this.m_Info.String == null)
    {
        if (this.Syntax.IsSimple)
        {
            this.m_Info.String = this.GetComponentsHelper(UriComponents.AbsoluteUri, (UriFormat) 0x7fff);
        }
        else
        {
            this.m_Info.String = this.GetParts(UriComponents.AbsoluteUri, UriFormat.SafeUnescaped);
        }
    }
    return this.m_Info.String;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:42:33.207

你可能想要

```
AbsoluteImageUrl.Add(new Uri(baseUrl, element).ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:46:53.067

```
List<Uri> AbsoluteImageUrl = new List<Uri>();

foreach (String element in imgList)
{
    AbsoluteImageUrl.Add(new Uri(baseUrl, element));
} 
```

# php - mysqli 数据库类不工作？

> ID：13176266
> 
> 赞同：0
> 
> 时间：2012-11-01T11:40:56.000
> 
> 标签：php, mysqli

我最近从 mysql 转移到 mysqli，但即使经过大量谷歌搜索，也面临问题。请查看此数据库类，并请帮助我找出我错在哪里。谢谢。

我只是将 mysql 更改为 mysqli，但它无法正常工作。

```
<?php
class database {

  private $connection;

  public function __construct() {
    $this->connect();
  }

  public function connect() {
    $this->connection = mysqli_connect('localhost', 'root', '', 'new5');
  }

}

$db = new database;
?> 
```

在其他类中，包括上述类后，我使用`$db`as

```
class pro{

  $query = mysqli_query("SELECT id, parent_id, name FROM categories");

  while($row = mysqli_fetch_array($query, MYSQLI_BOTH)){
    $id = $row["id"];
    echo $id

         }
     }
  }

$p = new pro(); 
```

我尝试了两种方式，在 mysqli 程序和 OO 方式中，但失败了。请以程序和 oop 风格提出建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:57:19.567

如我的评论中所述，如果`$mysqli_query`不是错字，请删除`$`.

此外，该`while`语句缺少一个结束大括号`}`。

其次，你的`class pro { .. }`定义没有意义。花括号之间的代码应该放在一个方法中，我建议将它命名为`queryCategories`.

```
class pro {
  public function queryCategories() {
    $query=msqli_query("SELECT id, parent_id, name FROM categories");
    while($row=mysqli_fetch_array($query,MYSQLI_BOTH)) {
      $id=$row["id"];
      echo $id
    } // ending while curly bracket was failing
  }
}

$p = new pro();
$p->queryCategories(); 
```

# php - 如何使用 jquery 为帖子中的图像绑定 data-src 属性？

> ID：13176268
> 
> 赞同：1
> 
> 时间：2012-11-01T11:40:56.607
> 
> 标签：php, jquery, wordpress

我正在尝试将 foresight.js 用于 wordpress 博客中的响应式图像。为此，我必须在`<img>`标签中的 src 位置添加 data-src 属性。

或者我必须从帖子中的图像中获取 url，并且需要将我的新标签绑定在旧标签附近并将旧`<img>`标签包装`<img>`在`<noscript>`标签中。我不知道该怎么做。

基本上它必须看起来像这样：

```
<img data-src="http://foresightjs.appspot.com/dynamic-images/px-wright-flyer.jpg" data-aspect-ratio="auto" class="fs-img">

<noscript>
    <img src="http://foresightjs.appspot.com/dynamic-images/1024px-wright-flyer.jpg">
</noscript>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:46:26.983

使用 jQuery：

```
$('img').each(
    function(i,el){
        var that = $(el);
        $('<img />').attr('data-src', el.src).insertBefore(el);
        that.wrap('<noscript />');
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/46gZF/)。

或者，略有不同：

```
$('img').each(
    function(i,el){
        $(el).wrap('<noscript />').clone().insertBefore(el.parentNode).data('src', el.src).removeAttr('src');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/46gZF/2/)。

调整为添加`class`：

```
$('img').each(
    function(i,el){
        $(el).wrap('<noscript />').clone().insertBefore(el.parentNode).data('src', el.src).removeAttr('src').addClass('newClass');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/46gZF/3/)。

但是，如前所述，这`noscript`完全没有必要，您也可以简单地使用 JavaScript 调整图像（因为如果禁用 JavaScript，图像将保持不变）：

```
$('img').each(
    function(i,el){
        $(el).attr('data-src', el.src).removeAttr('src').addClass('newClass');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/46gZF/4/)。参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`attr()`](http://api.jquery.com/attr/).
*   [`clone()`](http://api.jquery.com/clone/).
*   [`data()`](http://api.jquery.com/data/).
*   [`each()`](http://api.jquery.com/each/).
*   [`insertBefore()`](http://api.jquery.com/insertBefore/).
*   [`wrap()`](http://api.jquery.com/wrap/).

# ruby - 确保在 Ruby 中关闭文件，使用救援并确保

> ID：13176270
> 
> 赞同：0
> 
> 时间：2012-11-01T11:41:02.660
> 
> 标签：ruby, file

我有以下代码：

```
begin
   @output_file = File.open("output.txt", "w")
   File.read(@input_file).each_line do |line|
   taxify_line(line)
end
rescue => e
   p "Smz went wrong..."
end
@output_file.write("Last line of output")
@output_file.close unless @output_file.nil? 
```

确保无论我捕获异常，两个文件（@input_file 和@output_file）都关闭的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:43:48.583

`rescue`子句应该在 begin..end 块内。还有，令人惊讶的是，`ensure`子句完全符合您的想法

```
begin
   @output_file = File.open("output.txt", "w")
   File.read(@input_file).each_line do |line|
     taxify_line(line)
   end
rescue => e
   p "Smz went wrong..."
ensure
  @output_file.write("Last line of output")
  @output_file.close unless @output_file.nil?
end 
```

# sql - 在同一列中求和两种不同的类型

> ID：13176278
> 
> 赞同：1
> 
> 时间：2012-11-01T11:41:23.487
> 
> 标签：sql, jdbc, oracle10g

嗨，我有以下作为 sql 输出。

```
TYPE SUM(UPDATE_COUNT) 
Legis 93 
Acds 43 
Updates 41 
Multibases 345 
```

但我希望更新显示为更新和多基的总和，这里多基和更新都属于同一列。它应该像下面这样。

```
Updates 386 
```

我用于第一个输出的查询是

```
SELECT type, SUM(Update_Count) 
FROM Scope1 
where type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll') and 
      (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
group by type 
```

请帮助我如何获得第二个输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:44:27.790

```
SELECT
  CASE WHEN type IN 'Updates','Multibases' THEN 'Updates' ELSE type END as TYPE,
  SUM(Update_Count) 
FROM
  Scope1 
WHERE
      type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll')
  and (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
GROUP BY
  CASE WHEN type IN 'Updates','Multibases' THEN 'Updates' ELSE type END 
```

一个更具可扩展性的解决方案是让另一个表映射`type`到`super_type`.

```
SELECT
  map.super_type,
  SUM(Scope1.update_count)
FROM
  Scope1
INNER JOIN
  map
    ON map.type = Scope1.type
WHERE
      Scope1.type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll')
  and Scope1.RECVD_DATE >='04/02/2012'
  and Scope1.RECVD_DATE <='11/30/2012'
GROUP BY
  map.super_type 
```

然后你可以在你的地图中放置如下条目......

```
 type       | super_type
------------+------------
 Legis      | Legis
 Acds       | Acds
 Updates    | Updates
 Multibases | Updates 
```

等等等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:44:50.650

```
SELECT type, SUM(case when type in ('Updates','Multibases') then Update_Count else o end) as  Update_Count 
FROM Scope1 
where type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll') and 
      (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
group by type 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:51:18.243

如果这是一次性的，则使用其他解决方案之一。如果您将来可能会更改分组，这是一个数据驱动的想法：

```
Create Table TypeBucket (
  type varchar(50) not null primary key, 
  bucket varchar(50) not null
);

Insert Into TypeBucket (type, bucket) values 
  ('Legis', 'Legis'),
  ('Acds', 'Acds'),
  ('Updates', 'Updates'),
  ('Multibases', 'Updates'),
  ('LegAll', 'LegAll'),
  ('DAIS', 'DAIS');

Select
  b.bucket,
  Sum(s.update_count)
From
  Scope1 s
    Inner Join
  TypeBucket b
    On s.type = b.Type
Where
  s.type in ('Updates', 'Multibases', 'DAIS', 'Acds', 'Legis', 'LegAll') And
  s.recvd_date >= '04/02/2012' And 
  s.recvd_date < '12/1/2012'
Group By
  b.bucket 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:44:17.463

```
SELECT type, SUM(Update_Count) 
FROM Scope1 
where type in ('DAIS','Acds','Legis','LegAll') and 
      (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
group by type
UNION ALL
SELECT 'Updates' AS type, SUM(Update_Count) 
FROM Scope1 
where type in ('Updates','Multibases') and 
      (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
```

将产生以下内容：

```
类型总和（UPDATE_COUNT）
立法 93
使徒行传 43
更新 386

```

* * *

或者您也可以使用 a`CASE`来产生相同的输出：

```
SELECT CASE WHEN type IN ('Updates','Multibases') THEN 'Updates' ELSE type END AS type, SUM(Update_Count) 
FROM Scope1 
where type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll') and 
      (RECVD_DATE >='04/02/2012' and RECVD_DATE <='11/30/2012') 
group by CASE WHEN type IN ('Updates','Multibases') THEN 'Updates' ELSE type END 
```

# c# - 在 C# 中检查命令行参数的长度

> ID：13176280
> 
> 赞同：1
> 
> 时间：2012-11-01T11:41:31.427
> 
> 标签：c#, command-line-arguments

我想要做的是确保从命令行传递的参数在一组特定的字符之间，但是当使用可接受范围之外的值时，代码似乎没有突出任何问题。

```
if (args[1].Length < 10 && args[1].Length > 40) // Test to see if the password is between 10 and 40 characters
{
Console.WriteLine("Please use a password between 10 and 40 characters");
Environment.Exit(0);
} 
```

我想知道是否有人可能对为什么这不起作用有任何建议。传递的参数是 -e password file1.txt file2.txt

提前致谢！

阿利斯泰尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:43:39.527

你有错误的逻辑，应该是`||`

```
 if (args[1].Length < 10 || args[1].Length > 40) // Test to se 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:43:26.970

参数的长度不能同时*小于*10**和** *大于*40。您应该选择满足这些条件中的任何一个（使用[条件 OR 运算符](http://msdn.microsoft.com/en-us/library/6373h346.aspx)），但不能同时满足这两个条件：

```
if (args[1].Length < 10 || args[1].Length > 40) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:44:19.247

它应该是：

```
if (args[1].Length < 10 || args[1].Length > 40) // Test to see if the password is  between 10 and 40 characters
{
   Console.WriteLine("Please use a password between 10 and 40 characters");
   Environment.Exit(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:47:21.750

你给出了错误的条件：

它应该是：

```
if (args[1].Length < 10 || args[1].Length > 40) 
```

# java - 在android项目中放置xml文件的位置？

> ID：13176282
> 
> 赞同：0
> 
> 时间：2012-11-01T11:41:38.857
> 
> 标签：java, android, android-resources, android-file, android-assets

对于我的项目，我使用 xml 文件来获取信息。我知道这可以存储在资产文件夹或资源/原始文件夹中。我的问题是我必须修改 xml dom 并再次写回文件作为持久存储。

我读过我无法写回资产文件夹中的文件。但是不知道资源文件夹中的文件？

为此，我可以将文件保存在哪里？将文件存储在 sdcard 中是唯一可能的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:32:21.913

我会将文件包含在 res/raw 中，然后在文件目录中为您的应用程序创建一个本地副本。在应用程序初始化时，您可以检查它是否存在于外部存储中，如果不存在，则从 res/raw 重新加载它。

不用太深入细节，可能是这样的：

```
File filesDir = context.getFilesDir();
File xml = new File(filesDir, YOUR_FILE_NAME);
if(xml.exists() {
    /* load data from filesDir */
} else {
    /* load data from res/raw and save to filesDir */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:50:21.723

将文件存储在 sdcard 中是唯一可能的选择吗？

是的，您也可以将文件存储在内部存储器中。

您没有修改 apk 文件的权限。

# java - 开发数据库简化管理器，我应该使用 JSF 还是 JSF+Hibernate？

> ID：13176285
> 
> 赞同：0
> 
> 时间：2012-11-01T11:41:53.347
> 
> 标签：java, hibernate, jsf, jakarta-ee, web-applications

我已经离开 web java 一段时间了，现在我必须开发一个简化的数据库管理器，基本上是一个用于选择、更新、删除和创建现有表的控制器的 web 界面，而不必直接使用 SQL。

我的问题是，带有 SQL 查询的 JSF 就足够了吗？我正在考虑使用 JSF + Hibernate，但由于除了简单的信息显示之外我不会将这些实体用于任何其他用途，我认为这可能就像使用火箭筒对付蚂蚁一样。

你们有什么建议？

提前致谢

PS：如果这不是要在这里提出的那种问题，请告诉我，我会记下来...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:22:39.580

我个人认为这不会是“火箭筒与蚂蚁”的情况。SQL 肯定足以满足您的需求，但我更喜欢 Hibernate（或其他 JPA 实现），因为它附带的所有功能，但也适用于商品 :)

我也会采用这样的解决方案，因为对于将来可能出现的更复杂的应用程序来说，这是一个非常好的做法；熟悉 JPA 总是好的。

# ios - 应用程序不再被授权或在定位服务应用程序中列出

> ID：13176289
> 
> 赞同：0
> 
> 时间：2012-11-01T11:42:08.867
> 
> 标签：ios, xcode, geolocation

我一直在更新使用位置服务的应用程序。当我运行它时，有一次更改没有显示出来，所以我从手机中删除了它，并清理了 xcode 项目。

当我现在运行它时，该应用程序不再被授权使用定位服务。当我查看设置时，该应用程序不再列为需要定位服务的应用程序。

我已经更新了 info.plist 文件并添加了后台模式和设备功能 - 但是当我将它们恢复到原来的样子时，应用程序仍然存在同样的问题。

有谁知道是什么原因造成的？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:46:21.820

我建议您从头开始重新启动您的项目，但您可以将所有资源文件（.h、.m、界面文件、图像、声音等）复制到新项目中。构建并运行它，它应该很好。

不行就回复！

# xmlhttprequest - WinJS.xhr：网络错误 0x2efd，由于错误 00002efd 无法完成操作

> ID：13176300
> 
> 赞同：9
> 
> 时间：2012-11-01T11:42:53.297
> 
> 标签：xmlhttprequest, winjs

在使用 JavaScript 开发 Windows 8 Metro 应用程序时，我遇到了 WinJS.xhr 的问题。

```
WinJS.xhr({ url: "http://www.seznam.cz"}); 
```

执行上述代码时，我在日志中看到：

```
SCRIPT7002: XMLHttpRequest: Network Error 0x2efd, Could not complete
the operation due to error 00002efd. 
```

我在清单中启用了“Internet（客户端）”功能。

也许问题是因为我在代理后面并使用 VPN，但我可以使用 Google Chrome 访问互联网（我只需要授权，否则 HTTP 状态 407 - 需要代理授权）。

我该如何解决？

**[编辑]** 所以我发现它可能与我必须使用的 VPN（Cisco VPN Client）有关。当我禁用 VPN 时，即使我在代理后面（我使用 LAN，VPN 我使用 WiFi），请求仍然有效。也许它只是与 Cisco VPN 有关。我不得不修改注册表，因为这里描述了[http://verbalprocessor.com/2012/09/17/windows-8-and-cisco-vpn-client/](http://verbalprocessor.com/2012/09/17/windows-8-and-cisco-vpn-client/)

同样有趣的是，当我在代理后面时，一些 Metro 应用程序可以工作（地图），而有些则不能工作（Windows 商店）。

只是一个通知：我已经探索了 Windows.Networking.Connectivity 并且在这两种情况下（有/没有 VPN）我得到 NetworkConnectivityLevel == "Local Access"（因为我可能在代理后面）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T18:38:17.863

连接到我的工作场所 SSL/VPN 连接（来自瞻博网络）时，我遇到了同样的错误。

打开 .appxmanifest 文件并添加“私有网络（家庭和服务器）”功能解决了这个问题。

```
<Capabilities>
  <Capability Name="internetClient" />
  <Capability Name="privateNetworkClientServer" />
</Capabilities> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:22:26.707

该解决方案对我有用（请参阅下面的论坛链接）...本质上，您需要将服务器的证书添加到 Windows 应用商店应用程序清单中（还要确保您的最重要的“功能”至少设置为“InternetClient”）。您可以通过从浏览器导出服务器证书来获取服务器证书，另存为“.der”文件。使用 Firefox 比 IE 更容易执行此操作（从 FF，浏览到具有证书的目标域，然后右键单击页面 > 页面信息 > 安全选项卡 > 详细信息选项卡 > 导出按钮 > 另存为“.der”。

[http://social.msdn.microsoft.com/Forums/en-ZA/winappswithcsharp/thread/4a776e8c-0e10-4f03-908f-7f765d914080?prof=required](http://social.msdn.microsoft.com/Forums/en-ZA/winappswithcsharp/thread/4a776e8c-0e10-4f03-908f-7f765d914080?prof=required)

这个解决方案看起来很荒谬——所以请记住，这可能只对使用自签名证书的站点（例如在开发环境中）是必需的，因为其他生产站点不需要此过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T21:26:42.863

执行此操作的正确方法已发布在[MSDN](https://social.msdn.microsoft.com/Forums/vstudio/en-US/68522c56-fc29-4b71-a5aa-f389ca3667ac/apache-cordova-activate-privatenetworkclientserver-capability?forum=wpdevelop)论坛上，它对我不起作用，但以下确实

* * *

**配置文件**

```
...

<platform name="windows"> 
     <config-file target="package.appxmanifest"> 
         <DeviceCapability Name="privateNetworkClientServer" /> 
     </config-file>
     ...
 </platform> 
```

这些将与您的其他功能合并

# java - 如何在多个尝试中访问另一个类中的 ArrayList？

> ID：13176301
> 
> 赞同：1
> 
> 时间：2012-11-01T11:42:52.597
> 
> 标签：java, serialization, arraylist, try-catch

我有一个作业来检索一个 myqsl 查询并将其保存到 a`ArrayList`中，然后将其链接到另一个类，然后对其进行序列化并通过 http 发送它，在一个方案中它将是

```
class Server{static class a   {try{try{  try{arraylist1}  }}}}

class b {var1,var2,link_to(arraylist1)} 
```

然后序列化 b 类并发送它

我设法通过 sql 查询并将对象保存在 ArrayList 中（从“Personat”类创建的对象）

```
 if (rs != null) {
         List<Personat> perList = new ArrayList<Personat>();
         while (rs.next()) {
            Personat per = new Personat();      
            per.setID(rs.getInt("var1"));
            per.setName(rs.getString("var2"));  
            per.setAmount(rs.getInt("var3"));
            perList.add(per);
         }
     }
     Where rs=ResultSet object 
```

但我无法`ArrayList`从 b 类访问，所以我可以序列化它。我试图让它成为静态的（什么都没有，它不能被链接）。我试图做一个吸气剂（但没有什么 Eclipse 不会让我自动生成它们）。

所以我不知道我该怎么办！有人能帮我吗 ？或者有人有什么想法吗？我试图在谷歌上搜索这个，但你可以看到它有点太具体了，所以直到现在还没有结果......

这是我的 Server.java

```
package server2;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.net.InetSocketAddress;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

 public class Server {
private static List<Personat> perList = new ArrayList<Personat>();
 //need to access this in the SendRes class 
public List<Personat> getPerList() {
    return perList;
}

public static void main(String[] args) throws Exception {

    HttpServer server = HttpServer.create(new InetSocketAddress(3333), 0);

    server.createContext("/", new MyHandler());
    server.setExecutor(null); 
    server.start();
}

static public class MyHandler implements HttpHandler {

    public void handle(HttpExchange t) throws IOException {

        ObjectInputStream ios = new ObjectInputStream(t.getRequestBody());
        //
        final String url = "jdbc:mysql://localhost/httpServer";

        final String user = "root";

        final String password = "";

        try {
            Send oin = (Send) ios.readObject();
            int id = oin.getId();
            String emri = oin.getName();
            int amount = oin.getAmount();
            int paid = oin.getPaid();
            try {
                Class.forName("com.mysql.jdbc.Driver");
                Connection con = DriverManager.getConnection(url, user,
                        password);

                try {
                    PreparedStatement s = con
                            .prepareStatement("INSERT INTO person(ID,Name,Amount,Paid) VALUES (?,?,?,?)");
                    s.setInt(1, id);
                    s.setString(2, emri);
                    s.setInt(3, amount);
                    s.setInt(4, paid);
                    s.executeUpdate();

                    ResultSet rs = s.executeQuery("SELECT * "
                            + "from personat ORDER BY EmpId");

                    if (rs != null) {

                        while (rs.next()) {
                            Personat per = new Personat();
                            per.setID(rs.getInt("ID"));
                            per.setName(rs.getString("Name"));
                              per.setAmount(rs.getInt("Amount"));

                            perList.add(per);
                        }
                    }

                    //here i need to send an SendRes object     with the ArrayList inside it 

                } catch (Exception e) {

                    e.printStackTrace();
                } finally {
                    if (con != null) {
                        con.close();
                    }
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

    }
}
    }

    class SendResponse implements Serializable {
String gabim;
String gabimNr;
    //link the arraylist from class server here
    }

    class Personat {
int ID;

public int getID() {
    return ID;
}

public void setID(int iD) {
    ID = iD;
}

public String getName() {
    return Name;
}

public void setName(String name) {
    Name = name;
}

public int getAmount() {
    return Amount;
}
public void setAmount(int amount) {
    Amount = amount;
}
String Name;
int Amount;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:44:56.083

type 的对象`B`只能访问 type 的公共成员`A`。要访问您的列表，您需要将其设为`A`. 执行此操作的典型方法是使用私有字段和公共 getter。

```
class A
{
    private List<Personat> personList;

    public List<Personat> getPersonList() { return personList; }

    public void handle(HttpExchange t) throws IOException
    {
        // ...
        personList = ...;
        // ...
    }
} 
```

请注意，通过公开访问您的列表，您还允许客户修改列表的内容。如果不希望这样做，您可能更愿意给他们一份列表的副本。

* * *

在一个稍微无关的注释中，如果你在一个方法中嵌套了三个 try 块，那么该方法可能太复杂了，应该重构为更小的方法。

# maven - 如何在我的项目 pom 文件中添加所有依赖项？

> ID：13176308
> 
> 赞同：0
> 
> 时间：2012-11-01T11:43:05.423
> 
> 标签：maven, archiva

我在本地 Apache Archiva 中添加了大约 100 个罐子。现在我想将所有这些依赖 jar 添加到我的项目**Pom.xml**文件中。是否可以通过单个复制粘贴来添加所有这些依赖项？现在我必须从 Apache Archiva 复制每个单独的依赖项并粘贴到我的项目 pom.xml 文件中。我必须将这些行复制粘贴到每个 jar 的 Pom.xml 文件中，这是非常艰巨的任务。

```
 <dependency>
  <groupId>org.csdc</groupId>
  <artifactId>dom4j</artifactId>
  <version>1.6.1</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:39:28.833

您不太可能需要所有 100 个 jar 作为直接依赖项。在 Maven 中，您必须列出您的直接依赖项 - 是的，是的。但是，您不需要列出传递依赖项，因为 maven 会为您管理它。这是对旧的手动类路径管理 java 构建的最基本改进之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:52:26.913

否 所有 jar 的所有依赖项，因为在该 jars 中，一些依赖项具有相同的 group Id ，因此已获取包含的所有 jars。

一些依赖项写在**pom.xml**文件中

例如代码是

```
<dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.4.0.GA</version>
    </dependency> 
```

上面的依赖获取所有与hibernate-annotation相关的jar

```
- hinernate-annotation
- hibernate-common-annotation
- hibernate-core jar files to be fetched..... 
```

# jquery - 如何使用 jquery 将颜色替代品附加为棋盘？

> ID：13176309
> 
> 赞同：1
> 
> 时间：2012-11-01T11:43:08.277
> 
> 标签：jquery, html

我需要为 div 添加`alternatively`颜色`chess board`

我已经尝试过，但它不起作用我已经在 jsfiddle 中创建了它，一旦我在这里做错了什么，请你检查一下，非常感谢任何帮助谢谢

[这是我的jsfiddle](http://jsfiddle.net/VP6UF/)

1.  当我单击国际象棋按钮时，我需要将颜色作为棋盘
2.  当我单击清除按钮时，我应该清除所有 div
3.  当我点击斑马按钮时，我应该得到斑马格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:01:53.873

这是固定的：http: [//jsfiddle.net/VP6UF/5/](http://jsfiddle.net/VP6UF/5/)

```
$("#button").click(function () {
    $(".box_a:even").css("background-color", "black");
    $(".box:odd").css("background-color", "black");
});
$("#btn").click(function () {
    $("div > div > div").removeAttr('style');
});
$("#butn").click(function () {
    $("div > div > div:odd").css("background-color", "black");
});​ 
```

1.  您选择了错误的框架（mootools 而不是 jQuery）
2.  您的代码不适用于您当前的 HTML。我进行了一些更改以使其以最少的编辑工作。

# twitter - Twitter API：从用户时间线搜索关键字/hastags

> ID：13176317
> 
> 赞同：3
> 
> 时间：2012-11-01T11:43:33.053
> 
> 标签：twitter

我想使用其中一个 twitter REST api 提要从他们的时间线中搜索关键字或 hastag。

目前使用

```
<script type="text/javascript" src="https://api.twitter.com/1/statuses/user_timeline/users_username.json?callback=twitterCallback2&count=4&q=keywordhere"></script> 
```

这得到了最近的 4 条推文，我添加了 q= 来尝试过滤关键字，但它看起来不支持该参数。

有人知道可以搜索时间线和主题标签的 api 调用吗？

# asp.net - 使用属性在代码隐藏中添加 cssstyle

> ID：13176319
> 
> 赞同：2
> 
> 时间：2012-11-01T11:43:35.797
> 
> 标签：asp.net, css, code-behind

> **可能重复：**
> [通过后面的 aspx 代码添加 css 类](https://stackoverflow.com/questions/1903513/adding-css-class-through-aspx-code-behind)

我试图将 css 类分配给在重写的 CreateChildControls 方法中创建的按钮，如下所示：

```
HtmlButton btn = new HtmlButton();
btn.ServerClick += new EventHandler(resultSelected);
btn.InnerText = "btn text";
btn.Attributes.CssStyle.Remove("class");
btn.Attributes.CssStyle.Add("class", "submitbutton");
this.Controls.Add(btn);
PlaceHolder1.Controls.Add(btn); 
```

但我想我需要指定我的样式表文件才能工作......我想使用与 aspx 中相同的样式表文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:48:24.563

以下代码将起作用，

```
btn.Attributes["class"]= "submitbutton"; 
```

或者

```
btn.CssClass="submitbutton"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:47:49.337

你需要删除`CssStyle`

```
btn.Attributes.Remove("class");
btn.Attributes.Add("class", "submitbutton"); 
```

或者

```
btn.CssClass="submitbutton"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:50:13.737

您错误地使用了 CssStyle 属性。此属性要求您提供 CSS 名称值对。你想要做的是[添加一个](http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.add.aspx)名为“类”的属性。

```
btn.Attributes.Add("class", "submitbutton"); 
```

查看[CssStyle](http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.cssstyle.aspx)属性的 MSDN。它是渲染到内联样式属性中的内容。

# kinect - Kinect 麦克风不工作

> ID：13176325
> 
> 赞同：0
> 
> 时间：2012-11-01T11:43:52.677
> 
> 标签：kinect, xbox, kinect-sdk

我已经在 kinect 上工作了 2 个月。我刚刚从 sdk 1.5 升级到了 sdk 1.6。除麦克风外，一切正常。当我从工具包启动音频应用程序时，它说找不到我的 kinect 音频。我在另一台电脑上安装了相同的 SDK，一切正常。我有适用于 xbox 的 kinect . 音频驱动程序安装正确，因为它在 Microsoft kinect 下的设备管理器中显示“Kinect for windows audio array control”，在声音、视频和游戏控制器下显示“Kinect USB Audio”。在安装新版本之前，我已经删除了所有以前版本的 sdk 和驱动程序。请帮我解决这个问题

编辑：我什至安装了以前的 1.5 版本，但麦克风仍然无法正常工作。是否有任何软件阻止它或我必须检查的任何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:22:07.063

非常奇怪的行为，我知道 Kinect 音频的唯一问题是启用骨架流后音频流停止。

问题不在于您的传感器，因为您将它安装在另一台计算机上并且它工作正常。

尝试再次卸载所有内容，包括语音识别 SDK（如果已安装）。从 ProgramFiles 中删除相关文件夹，重新启动并尝试再次安装。

您还可以检查以下内容：

*   检查是否可以使用另一个麦克风。
*   检查`Windows Events`控制面板中的消息。

# php - 为什么“$temp = 0; 回声~$temp；” 打印-1？

> ID：13176326
> 
> 赞同：6
> 
> 时间：2012-11-01T11:43:57.120
> 
> 标签：php

谁能告诉下面代码的内部过程

```
<? $temp = 0; echo ~$temp; ?> 
   //instead of 1 it displays -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:45:36.933

```
echo ~$temp;
     ^bitwise not operator 
```

假设 32 位，**[按位](http://php.net/manual/en/language.operators.bitwise.php)**逆`0000`是`FFFF`(All `1`'s) `-1`，在有符号整数的情况下是 。

* * *

**另一种看待它的方式**：`~`所做的是给你 **[（一个补码）](http://en.wikipedia.org/wiki/Ones%27_complement)**

为了得到一个数字的负数，你取 2 的补码，这就是 `1's complement + 1`

所以，

```
(1's complement of 0) + 1 = 0 //negative 0 is 0
hence, 1's complement of 0 = -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:57:42.553

按位非 (~)：

这会反转其操作数的每一位。如果操作数是浮点值，则在计算之前将其截断为整数。如果操作数介于 0 和 4294967295 (0xffffffff) 之间，它将被视为无符号 32 位值。否则，将其视为带符号的 64 位值

这是因为您实际上是在使用 NOT 处理完整的 32 位无符号整数。这意味着你不是简单地反转 0001 而是反转 00000000000000000000000000000001

变成 1111111111111111111111111111110

本质上这是数字 + 1 并被否定。所以 1 变为 -(num+1) 即 -1 或 1111111111111111111111111111110 二进制（无符号）

例如：- $temp=1；回声~$temp; 打印 -2 //-(n++)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:45:54.390

因为`~0`是`-1`。

`~`运算符还原`0`.

关系是：`-$temp === ~$temp + 1`

# objective-c - iOS6 UICollectionView 和 UIPageControl - 如何获得可见单元格？

> ID：13176333
> 
> 赞同：37
> 
> 时间：2012-11-01T11:44:13.953
> 
> 标签：objective-c, ios, ios6

在研究 iOS6 新功能时，我遇到了一个关于[UICollectionView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html "UICollectionView 类参考")的问题。
我目前正在使用 Flow 布局测试它，并将滚动方向设置为水平，启用滚动和分页。我已将其大小设置为与我的自定义单元格完全相同，因此它可以一次显示一个，并且通过横向滚动，用户将看到其他现有单元格。

它完美地工作。

现在我想将[UIPageControl](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html "UIPageControl 类参考")添加到我创建的集合视图中，这样它就可以显示哪个单元格是可见的以及那里有多少个单元格。

构建页面控件相当简单，定义了 frame 和 numberOfPages。

作为问号标记，我遇到的问题是如何获取当前在集合视图中可见的单元格，以便它可以更改页面控件的 currentPage。

我尝试过委托方法，例如 cellForItemAtIndexPath，但它是用来加载单元格的，而不是显示它们。didEndDisplayingCell 当一个单元格不再显示时触发，这是我需要的相反事件。

似乎 -visibleCells 和 -indexPathsForVisibleItems 集合视图方法对我来说是正确的选择，但我遇到了另一个问题。什么时候触发它们？

在此先感谢，希望我说得足够清楚，以便你们能理解我！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-24T14:43:00.237

您必须将自己设置为`UIScrollViewDelegate`并实现如下`scrollViewDidEndDecelerating:`方法：

**Objective-C**

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    CGFloat pageWidth = self.collectionView.frame.size.width;
    self.pageControl.currentPage = self.collectionView.contentOffset.x / pageWidth;
} 
```

**迅速**

```
func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) {

    let pageWidth = self.collectionView.frame.size.width
    pageControl.currentPage = Int(self.collectionView.contentOffset.x / pageWidth)
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-10T04:14:51.743

我也为此苦苦挣扎了一段时间，然后我被建议检查 UICollectionView 的父类。其中之一恰好是[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)，如果您将自己设置为[UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/reference/uiscrollviewdelegate.html)，您可以访问非常有用的方法，例如**scrollViewDidEndDecelerating**，这是更新 UIPageControl 的好地方。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-08T13:08:30.300

我建议对计算和处理进行一些调整，因为它会在任何滚动位置立即更新页面控件，并具有更高的准确性。

下面的解决方案适用于任何滚动视图或其子类（UITableView UICollectionView 和其他）

在 viewDidLoad 方法中写这个

```
scrollView.delegate = self 
```

然后使用您的语言的代码：

斯威夫特 3

```
func scrollViewDidScroll(_ scrollView: UIScrollView) 
    {
       let pageWidth = scrollView.frame.width
       pageControl.currentPage = Int((scrollView.contentOffset.x + pageWidth / 2) / pageWidth)
    } 
```

斯威夫特 2：

```
func scrollViewDidScroll(scrollView: UIScrollView) 
{
   let pageWidth = CGRectGetWidth(scrollView.frame)
   pageControl.currentPage = Int((scrollView.contentOffset.x + pageWidth / 2) / pageWidth)
} 
```

目标 C

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGFloat pageWidth = self.collectionView.frame.size.width;
    self.pageControl.currentPage = (self.collectionView.contentOffset.x + pageWidth / 2) / pageWidth;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-20T21:00:44.217

另一个使用更少代码的选项是使用可见项索引路径并设置页面控件。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    self.pageControl.currentPage = [[[self.collectionView indexPathsForVisibleItems] firstObject] row];
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-05T06:38:01.073

1.  将**PageControl**放置在您的视图中或由代码设置。
2.  设置**UIScrollViewDelegate**
3.  在**Collectionview** -> cellForItemAtIndexPath (Method) 添加下面的代码来计算页数，

> int pages = floor(ImageCollectionView.contentSize.width/ImageCollectionView.frame.size.width); [pageControl setNumberOfPages:pages];

添加**ScrollView 委托**方法，

# 杂注标记 - UIPageControl 的 UIScrollVewDelegate

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    CGFloat pageWidth = ImageCollectionView.frame.size.width;
    float currentPage = ImageCollectionView.contentOffset.x / pageWidth;

    if (0.0f != fmodf(currentPage, 1.0f))
    {
        pageControl.currentPage = currentPage + 1;
    }
    else
    {
        pageControl.currentPage = currentPage;
    }
    NSLog(@"finishPage: %ld", (long)pageControl.currentPage);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-06T14:54:09.917

我知道这是一个旧的，但我只需要再次实现这种功能并且有一点要添加，它会给出更完整的答案。

**首先：**使用`scrollViewDidEndDecelerating`假设用户在拖动时抬起手指（更像是轻弹动作），因此存在减速阶段。如果用户在没有抬起手指的情况下拖动，`UIPageControl`则仍会指示拖动开始之前的旧页面。相反，使用`scrollViewDidScroll`回调意味着视图在拖动和轻弹之后以及在拖动和滚动期间都会更新，因此对用户来说感觉更加灵敏和准确。

**其次：**依靠`pagewidth`计算所选索引假设所有单元格具有相同的宽度并且每个屏幕有一个单元格。利用该`indexPathForItemAtPoint`方法`UICollectionView`可提供更具弹性的结果，适用于不同的布局和单元格大小。下面的实现假设框架的中心是要在`pagecontrol`. 此外，如果存在单元格间距，则在滚动期间有时 selectedIndex 可能为 nil 或可选，因此需要在 pageControl 上设置之前检查并展开。

```
 func scrollViewDidScroll(scrollView: UIScrollView) {
   let contentOffset = scrollView.contentOffset
   let centrePoint =  CGPointMake(
    contentOffset.x + CGRectGetMidX(scrollView.frame),
    contentOffset.y + CGRectGetMidY(scrollView.frame)
   )
   if let index = self.collectionView.indexPathForItemAtPoint(centrePoint){
     self.pageControl.currentPage = index.row
   }
 } 
```

还有一件事 - 设置页数，`UIPageControl`如下所示：

```
 func collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {
    self.pageControl.numberOfPages = 20
    return self.pageControl.numberOfPages
  } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-06T14:30:03.780

简单的斯威夫特

```
public func scrollViewDidEndDecelerating(scrollView: UIScrollView) {
    pageControl.currentPage = (collectionView.indexPathsForVisibleItems().first?.row)!
} 
```

*`UIScrollViewDelegate`如果您实施，则已经实施`UICollectionViewDelegate`*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-07T00:06:48.560

如果使用`scrollViewDidScroll`，则应手动更新页面控件以⚠️**避免**点击页面控件时闪烁的点。

设置`UIPageControl`.

```
let pageControl = UIPageControl()
pageControl.pageIndicatorTintColor = .label
pageControl.defersCurrentPageDisplay = true // Opt-out from automatic display
pageControl.numberOfPages = viewModel.items.count
pageControl.addTarget(self, action: #selector(pageControlValueChanged), for: .valueChanged) 
```

实施操作（使用下面的扩展）。

```
@objc func pageControlValueChanged(_ sender: UIPageControl) {
    collectionView.scroll(to: sender.currentPage)
} 
```

`UIPageControl`在每次滚动时手动更新。

```
extension ViewController: UIScrollViewDelegate {

    func scrollViewDidScroll(_ scrollView: UIScrollView) {
        pageControl.currentPage = collectionView.currentPage
        pageControl.updateCurrentPageDisplay() // Display only here
    }
} 
```

方便`UICollectionView`的扩展。

```
extension CGRect {

    var middle: CGPoint {
        CGPoint(x: midX, y: midY)
    }
}

extension UICollectionView {

    var visibleArea: CGRect {
        CGRect(origin: contentOffset, size: bounds.size)
    }

    var currentPage: Int {
        indexPathForItem(at: visibleArea.middle)?.row ?? 0
    }

    func scroll(to page: Int) {
        scrollToItem(
            at: IndexPath(row: page, section: 0),
            at: .centeredHorizontally,
            animated: true
        )
    }
} 
```

# java - 如何分析远程运行的无头 Java 应用程序？

> ID：13176337
> 
> 赞同：5
> 
> 时间：2012-11-01T11:44:19.380
> 
> 标签：java, profiling, headless

我有一个无头 Java 应用程序，作为守护进程式进程在远程服务器上运行。

我想从[JVisualVM](http://visualvm.java.net/)显示的进程中提取 Java 级别的分析信息。例如，它应该显示方法调用时间等等。

这样做的最佳方法是什么？我的理解是 JVisualVM 在远程连接时不会配置文件。

理想情况下，分析信息将存储在文件中以供以后检查，其方式类似于 Java 堆生成（使用 jmap）和稍后分析（使用堆检查器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:06:49.583

根据链接，您必须设置 jstatd 和 jmx：http: [//javadevsoup.blogspot.de/2012/02/remote-java-profiling-using-visual-vm.html](http://javadevsoup.blogspot.de/2012/02/remote-java-profiling-using-visual-vm.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:05:08.633

您可以使用[NetBeans 分析器](http://netbeans.org/features/java/profiler.html)远程分析功能。

> # **远程分析**
> 
> 分析在与您的 NetBeans IDE 不同的系统上运行的应用程序。分析器的远程包可以安装在远程系统上，允许您分析在该系统上启动的应用程序。

事实上，[VisualVM 就是基于它](https://blogs.oracle.com/nbprofiler/entry/profiling_with_visualvm_part_1)。

> 除了各种监控功能外，该工具还包含一个**基于 NetBeans 分析器的内置分析器**。虽然 VisualVM 中的分析器 UI 看起来很简单（尤其是与 NetBeans 分析器相比），但分析功能几乎与 NetBeans 中的一样强大。

这是一篇关于[使用 Netbeans 分析 Java 远程服务器](http://blog.thecodingmachine.com/node/80)的详细博客文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:46:27.673

我刚刚发现了另一种我认为可以做到这一点的产品：http: [//chrononsystems.com/products/chronon-recording-server](http://chrononsystems.com/products/chronon-recording-server)

# php - 使用 SQL 查询单个值

> ID：13176338
> 
> 赞同：1
> 
> 时间：2012-11-01T11:44:21.180
> 
> 标签：php, mysql

我想从名为 wartung 的表中获取单个值（aktiv）。

```
include('blog/includes/db_connect.php');
$query = $db->prepare("SELECT * FROM wartung");
$query->execute();
$query->bind_result($wartung_id, $aktiv, $grund); 
```

数据库中 aktiv 的值为 1。
但此代码没有将此 1 放入`$aktiv`变量中。

[PS：我不习惯用 MySQL 和 PHP 编码，所以如果有初学者错误，请不要生气。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:52:13.000

您没有[获取](http://www.php.net/manual/en/mysqli-stmt.fetch.php)价值

```
include('blog/includes/db_connect.php');
$query = $db->prepare("SELECT * FROM wartung");
$query->execute();
$query->bind_result($wartung_id, $aktiv, $grund);
$query->fetch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:52:36.850

尝试：

```
include('blog/includes/db_connect.php');
$query = $db->prepare("SELECT aktiv FROM wartung");// I am assuming your column is named aktiv
$query->execute();
$query->bind_result($aktiv);
$query->fetch(); 
```

# c - 将整数和位存储在一个字中

> ID：13176341
> 
> 赞同：2
> 
> 时间：2012-11-01T11:44:30.737
> 
> 标签：c, memory-management, malloc

我正在阅读[有关 malloc 实现的演示文稿](http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf)，在幻灯片 7 上，它建议将区域大小和可用性存储在一个单词中以节省空间。另一种方法是使用两个字，这很浪费，因为可用性位只需为 0 或 1。

这是给定的解释：

*   如果块对齐，低位地址位始终为 0
*   为什么要存储始终为 0 的位？
*   将其用作已分配/空闲标志！读取大小字时，必须屏蔽掉该位

[http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf](http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf)

但我并不真正理解它是如何工作的以及如何在 C 中实现它。为什么大小整数的一位总是 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:53:35.947

> *   如果块对齐，低位地址位始终为 0

这是了解它发生了什么的关键。许多 CPU 要求将多字节基元值存储在可被基元字节数整除的地址：16 位基元需要存储在偶数地址；32 位`int`的 s 需要存储在可被 4 整除的地址，以此类推。尝试`int`通过对应于奇数地址的指针访问 会导致总线错误。

在这样的系统中，`malloc`必须始终返回适合存储给定 CPU 支持的任何原语的地址。因此，如果 CPU 支持 32 位整数，则返回的所有地址`malloc`必须能被 整除`4`。这样的地址被称为是*对齐*的。为了遵守，`malloc`实现将程序请求的块大小在末尾填充 0 到 3 个字节，使其长度可被`4`. 作为该决定的结果，对齐块的地址的最后两位将始终为零。的实现`malloc`可以将这些位用于自己的目的，只要在将结果返回给调用者之前将它们“屏蔽”即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:11:05.863

`Why is one bit of the size integer always 0?`

我明白为什么这令人困惑，但我不认为这就是他们在幻灯片 7 上所说的。他们说低位**地址**位始终为 0。

对象的内存地址与特定边界对齐，这意味着对象与其大小的倍数对齐。

所以一个 64 位整数与八字节边界对齐；0x7fff315470d8

如果指针始终与八字节边界对齐，则低三位始终为零。即：0x8 [16] = 1000 [2]

基本上，只要在取消引用指针之前将它们取出，您就可以在那些低位中粘贴您想要的任何内容。在 64 位的情况下，您有 3 个始终为 0 的位，因此您可以存储 3 个“标志”。在这个电源点的情况下，他们说拿最低位并将其用于“已分配”标志。只要分配了内存，就在其中粘贴一个 1，当您将指针发送给用户时将其屏蔽掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:47:53.720

[malloc(3)](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)（由 Posix 指定）应该

*   返回一个新的内存块；或`NULL`失败；返回的指针不是程序中任何其他指针的别名
*   返回一个适当对齐的内存块。对齐约束是编译器、ABI 和处理器特定的。（通常，对齐应该是两个词）。

大小并不总是零。（实际上，它永远不会为零）。您可以将其四舍五入为两个字的倍数，并将最后一位用作已用/空闲位。

然而，返回的指针`malloc`应该适当地对齐，例如到 8 个字节。因此它们的底部 3 位为零，并且 -ed 区域的*分配*大小（以字节为单位）`malloc`是 8 字节的倍数（高于传递给的请求大小`malloc`），因此最后 3 位为零（您可以使用最后一位其他用途，例如使用/空闲位）。

# testing - tfs 2012 中的测试影响分析

> ID：13176354
> 
> 赞同：1
> 
> 时间：2012-11-01T11:45:27.633
> 
> 标签：testing, tfs

我已经使用构建控制器和构建代理设置了一个 tfs 2012 服务器。我有一个简单的 Visual Studio 2012 解决方案，其中包含一个 Windows 控制台应用程序项目和一个客户端计算机上的测试项目。在构建定义中启用了测试影响分析。

简而言之，应该出现在 tfs 服务器上执行的每个构建上的受影响测试列表永远不会被填充。我试图将测试运行器从 vs runner 更改为 mstest 无济于事。

请指教。谢谢。

编辑：我在服务器上安装了 VS 2012。这启用了代码覆盖率，但仍然没有影响分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:18:24.817

幸运的是，我解决了“问题”。

要使 TIA 工作，您需要在测试管理器中成功完成一个测试用例，并通过所有测试步骤。只有这样才会生成分析文件。另外，我在测试控制器的视频录制模块上遇到了问题，这显然也有时会阻止文件生成，尽管这可能只是巧合。

成功生成文件后，后续构建现在将有一个基线进行比较。

玩得开心。

# javascript - 函数接受 1,2,3 但不接受字符串 '1,2,3'？

> ID：13176359
> 
> 赞同：0
> 
> 时间：2012-11-01T11:45:44.767
> 
> 标签：javascript, google-visualization

我正在使用谷歌可视化图表 api，但我相信这是我犯的某种 javascript 错误。我用数字填充这个数组：

```
visibleRows = []; 
```

并使其成为逗号分隔的字符串：

```
visibleRows.join(','); 
```

console.logging visibleRows 在此之后给出：

```
0,1,3 
```

但是当我将 visibleRows 输入函数时，下一行：

```
pieViewHits.setRows([visibleRows]); 
```

我收到错误：无效的行索引 0,1,3 应该在 [0-3] 范围内，**但是**如果我将上述所有代码替换为：

```
pieViewHits.setRows([0,1,3]); 
```

它完美地工作！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:47:00.853

`visibleRows`已经是一个数组，因此您不必将其作为`[visibleRows]`（在方括号内）传递。

改变

```
pieViewHits.setRows([visibleRows]); 
```

到

```
pieViewHits.setRows(visibleRows); 
```

而且我认为你不需要使用，`visibleRows.join(',');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:51:14.640

`[0,1,3]`是一个包含三个数字的数组

`visibleRows.join(',');`返回一个逗号分隔的字符串。你没有在任何地方分配它，所以它什么都不做。

`[visibleRows]`是一个*包含第二个数组*的数组，该数组依次包含三个数字。如果在字符串上下文中使用，它将被展平为逗号分隔的字符串。

该函数需要一个包含三个数字的数组，而不是包含另一个数组的数组或包含逗号分隔字符串的数组。

只需传递数组而不将其包装在另一个数组中或`join`ing 它。

```
visibleRows = [];
visibleRows.push(0);
visibleRows.push(1);
visibleRows.push(3);
pieViewHits.setRows(visibleRows); 
```

# linux - 如何将 qnx 分区挂载为仅用于执行特定代码行的读写启用？

> ID：13176361
> 
> 赞同：2
> 
> 时间：2012-11-01T11:45:49.993
> 
> 标签：linux, mount, qnx, qnx-neutrino

即，感兴趣的分区已经挂载为只读。该分区需要挂载为启用 rw 的分区，以便单独执行特定的脚本行。之后，该分区应该进入以前的只读状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-01-22T09:04:27.293

问题是针对 QNX 操作系统的。并且可以使用以下命令完成将分区重新挂载为读/写的正确方法。

```
mount -uw / 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:51:51.583

您可能对**重新安装**选项感兴趣。

例如，这个命令在有根的机器人中被广泛使用。

```
mount -o remount,rw /system
mount -o remount,ro /system 
```

> mount(8) - Linux 手册页
> 
> > 文件系统独立挂载选项
> > 
> > > 重新安装
> > > 
> > > > 尝试重新挂载已挂载的文件系统。这通常用于更改文件系统的挂载标志，尤其是使只读文件系统可写。它不会更改设备或安装点。
> > > > 
> > > > 重新挂载功能遵循 mount 命令如何与 fstab 中的选项一起使用的标准方式。这意味着只有在完全指定了设备和目录时，mount 命令才读取 fstab（或 mtab）。
> > > > 
> > > > mount -o remount,rw /dev/foo /dir
> > > > 
> > > > 在此调用之后，所有旧的挂载选项都将被替换，并且 fstab 中的任意内容都将被忽略，除了由 mount 命令内部生成和维护的 loop= 选项。
> > > > 
> > > > mount -o 重新挂载，rw /dir
> > > > 
> > > > 在此调用之后，mount 读取 fstab（或 mtab）并将这些选项与命令行 (-o) 中的选项合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:53:33.233

要远程读写分区：

```
mount /mnt/mountpoint -oremount,rw 
```

并以只读方式移除

```
mount /mnt/mountpoint -oremount,ro 
```

# java - 试图从不同的类中访问一个类的实例

> ID：13176377
> 
> 赞同：-2
> 
> 时间：2012-11-01T11:46:41.850
> 
> 标签：java

我正在尝试从未在其中创建的类中访问类中的函数。

基本上我有 A 类可以做 b.refresh();

b 显然包含称为刷新的功能。我现在希望 C 类访问它。

所以在我看来，它就像 cbrefresh(); 但这显然行不通。

我需要做什么才能让它工作？只允许 B 的一个实例。

主类：

```
B b = new b();
b.refresh();
C c = new C(); 
```

C内：

```
function() {
//want to access the same b from Main class.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:50:01.797

如果 C 类想要简单地从 B 类访问方法

```
B b=new B();
b.refresh(); 
```

A类没有出现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:51:59.210

我假设您想共享 B 实例：

```
public class C {

   private B b;

   C(B b) {
      this.b = b;
   }

   public refresh() {
      b.refresh();
  }
} 
```

现在你可以这样做：

```
B b = new B();
C c = new C(b);
c.refresh(); 
```

同样，您可以对传递相同 B 实例的 A 类执行以下操作：

```
A a = new A(b); 
```

# struts2 - 集成 jBPM 和 Struts2

> ID：13176378
> 
> 赞同：4
> 
> 时间：2012-11-01T11:46:49.883
> 
> 标签：struts2, jbpm

我想将 jBPM 与 Struts2 集成。jBPM 和 Struts2 似乎很简单，但是在集成方面我遇到了问题。问题是 jBPM 和 Struts2 都在不同的上下文中运行。我想如何在 jBPM 上下文中获取 Struts2 上下文的请求和响应对象。任何人都可以为我提供一个很好的设计，我应该如何整合。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:47:26.667

您应该首先阅读有关与 Spring 集成的 jBPM 文档（[第 18 章 - 集成](http://docs.jboss.org/jbpm/v5.2/userguide/ch18.html#d0e4330)），这样您就可以使用 Struts2 <-> Spring <-> jBpm 模式。你也应该检查一下[Activiti](http://activiti.org/userguide/index.html#springintegration)是一个很棒的轻量级 BPM 引擎，它可以很容易地与 Spring 集成。

# c# - 创建模板以将文本添加到文档

> ID：13176391
> 
> 赞同：0
> 
> 时间：2012-11-01T11:47:21.757
> 
> 标签：c#, visual-studio-2010, macros

我有一个包含宏的模板。当文档打开时，宏会在文档中添加一些文本。

当我将此模板附加到任何文档时，模板的宏也适用于该文档。它向具有此附加模板的文档添加一些文本。

但我想使用 Visual Studio 2010 使用 C# 代码来做到这一点。我不知道该怎么做。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:09:27.820

我找到了关于这个问题的解决方案。我开发了 VSTO 文档级插件。它可以按我的意愿工作......在开发 VSTO 文档级插件后，只需将 _AssemblyLocation 和 _AssemblyName 添加到文档中。

# iphone - 创建块变量

> ID：13176397
> 
> 赞同：1
> 
> 时间：2012-11-01T11:47:34.173
> 
> 标签：iphone, objective-c, ios, nsarray, objective-c-blocks

我有函数，我将块变量**blockIfLoadingImageFromServer**添加到数组：

```
- (UIImage *)getImageWithblockIfLoadingImageFromServer:(void (^)(UIImage *imageCompleted))blockIfLoadingImageFromServer
{
      [array addObject:blockIfLoadingImageFromServer];
} 
```

然后我想得到这个变量，但我不知道如何。我试过：

```
(void (^)(UIImage *imageCompleted))blockIfLoadingImageFromServer = [array objectAtIndex:0];
void (^)(UIImage *imageCompleted) *blockIfLoadingImageFromServer = [array objectAtIndex:0]; 
```

但这会产生错误（语法错误）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:50:57.600

我通常`typedef`让我的生活更轻松：

```
typedef void (^ImageBlock)(UIImage*); 
```

进而：

```
- (void) doSomethingWithBlock: (ImageBlock) block
{
    [array addObject:[block copy]];
}

- (void) doSomethingElse
{
    ImageBlock block = [array lastObject];
    …
} 
```

# c++ - __m128、__m128d、__m256 等是 C++ 中的内置类型吗？

> ID：13176398
> 
> 赞同：3
> 
> 时间：2012-11-01T11:47:35.767
> 
> 标签：c++, operator-keyword, sse, avx

C++ 标准区分内置类型和`struct`或`class`类型。对于后者，如果语言提供了适当的运算符，则允许重载运算符，例如`+`,`*=`或`&`，但对于内置类型则不允许。AFAIK，标准中没有提到 SSE/AVX 类型（但请纠正我），所以应该能够声明这些运算符。GCC 不允许这样做，但 ICC 允许。哪一个是正确的？

我真的很想拥有按位操作（如`&=`），但令人讨厌的是，GCC 不提供它们（for `__m128`），也不允许我声明它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T11:57:04.360

完全正确。这些类型是 C++ 的扩展，而不是内置的（C++ 中几乎没有任何内置的内容以下划线开头）。由于它们是扩展，因此实现可以随意对它们施加任何限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T11:52:25.400

它们不是内置的。C++ 不依赖于特定的硬件架构特性。

# java - Windows 7 中的上传速度为 60 kB/s

> ID：13176399
> 
> 赞同：0
> 
> 时间：2012-11-01T11:47:36.087
> 
> 标签：java, windows-7

我用 Java 编写了一个客户端代码，用于将文件上传到我们的一台服务器。在 Ubuntu 机器中，客户端能够以 5 MB/s 的速率将文件上传到服务器。但是在 Windows 7 中，上传速度仅为 60 kB/s（禁用防病毒和防火墙）。

代码片段如下：

```
.......................

URL server = new URL(url);

HttpURLConnection connection = (HttpURLConnection)server.openConnection();
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);
connection.setInstanceFollowRedirects(false);
connection.setRequestMethod("POST");
connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("content-length",fsize);
connection.setRequestProperty("charset", "UTF-8");
connection.setRequestProperty("file-name", file.getName());
connection.setFixedLengthStreamingMode((int)file.length());
connection.setReadTimeout(30000);

if (file.exists()) {
    connection.connect();

    OutputStream out = connection.getOutputStream();
    BufferedInputStream in = new BufferedInputStream(new FileInputStream(path));
    byte []buf = new byte[256*1024];
    int length=0;
    try {
    while ((length=in.read(buf))!=-1) {
        out.write(buf, 0,length);
    }
    out.flush();
}
.............. 
```

请让我知道我是否需要添加任何 HTTP 标头（或）我应该对我的代码进行任何更改。

问候， kit_kings

# clojure - clojure 实例？单一论点

> ID：13176400
> 
> 赞同：13
> 
> 时间：2012-11-01T11:47:35.763
> 
> 标签：clojure, instance

我对clojure`instance?`函数有点困惑。接受一个论点似乎很高兴。所以

```
(instance? String) 
```

工作正常，但总是返回 false。

我在这里错过了什么吗？这两天我做了两次，两次都花了我相当长的时间来调试（是的，我同意，犯一次错误可能被认为是不幸，但两次看起来像粗心）。

为什么它不会因为arity错误而中断？

稍后添加的注释：从 Clojure 1.6 开始，此问题已得到修复！

[http://dev.clojure.org/jira/browse/CLJ-1171](http://dev.clojure.org/jira/browse/CLJ-1171)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T17:13:34.453

有趣......即使在`instance?`中定义`core.clj`，似乎也有内置的特殊处理`clojure.lang.Compiler`形式`(instance?)`。

[Compiler.java，第 3498 行](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/jvm/clojure/lang/Compiler.java#L3498)：

```
 if(fexpr instanceof VarExpr && ((VarExpr)fexpr).var.equals(INSTANCE))
        {
        if(RT.second(form) instanceof Symbol)
            {
            Class c = HostExpr.maybeClass(RT.second(form),false);
            if(c != null)
                return new InstanceOfExpr(c, analyze(context, RT.third(form)));
            }
        } 
```

我将其解释为，当您编译/评估`(instance?)`表单时，`core.clj`忽略中定义的函数以支持硬连线行为，该行为确实将缺少的第二个参数解释为`nil`. 我猜这是出于性能原因，作为一种内联。

显然，这种特殊处理仅适用于某些情况（而且我对编译器不够熟悉，不知道它们是什么）。正如 Ankur 的回答所示，有一些调用方法`instance?`会导致调用定义的函数`core.clj`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:48:43.867

我认为这是一个错误。如果您定义一个新版本的实例？，例如

```
(def
^{:arglists '([^Class c x])
  :doc "Evaluates x and tests if it is an instance of the class
        c. Returns true or false"
  :added "1.0"}
foo? (fn foo? [^Class c x] (. c (isInstance x)))) 
```

你会得到预期的异常

```
user=> (foo? String "bar")
true
user=> (foo? String 1)
false
user=> (foo? String)
ArityException Wrong number of args (1) passed to: user$foo-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T12:43:12.800

如果您查看[`instance?`代码](http://clojuredocs.org/clojure_core/clojure.core/instance_q#source)，您将看到调用[`isInstance`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)的方法：[`Class`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)

```
(def
    ^{:arglists '([^Class c x])
      :doc "Evaluates x and tests if it is an instance of the class
            c. Returns true or false"
      :added "1.0"}
    instance? (fn instance? [^Class c x] (. c (isInstance x)))) 
```

看起来像在幕后，[`nil`（或`false`）](http://clojure.org/data_structures#Data%20Structures--nil)`x`在传递给时被视为参数的默认值，`isInstance`并且返回`false`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T15:58:28.363

嗯....有趣...以下所有调用都失败了（应该是这样的）：

```
user=> (.invoke instance? String)
ArityException Wrong number of args (1) passed to: core$instance-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437)

user=> (instance? (type ""))
ArityException Wrong number of args (1) passed to: core$instance-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437)

user=> (apply instance? String [])
ArityException Wrong number of args (1) passed to: core$instance-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437)

user=> (#'instance? Long)
ArityException Wrong number of args (1) passed to: core$instance-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437) 
```

创建“实例？”的新实例的事件 函数对象按预期工作：

```
user=> (def a (.newInstance (aget (.getConstructors (type instance?)) 0) (into-array [])))
#'user/a
user=> (a String)
ArityException Wrong number of args (1) passed to: core$instance-QMARK-  clojure.lang.AFn.throwArity (AFn.java:437)
user=> (a String "")
true 
```

# java - 用于读取 html 页面并将其 HTML 代码保存在文本文件中的 Java 程序

> ID：13176405
> 
> 赞同：-5
> 
> 时间：2012-11-01T11:48:03.453
> 
> 标签：java, html, stream

我正在开发一个项目，我有一个模块，我需要在其中编写一个 Java 程序来读取 html 页面并将其 HTML 代码保存在文本文件中。请任何人都可以提供上述程序.......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:59:05.287

看看[http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html) 你甚至不需要外部库。将此与 Bufferedwriter 结合使用：

```
import java.net.*;
import java.io.*;
import java.util.*;

public class URLReader {

    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));
        BufferedWriter writer = new BufferedWriter(new FileWriter("outputfile.txt"));

        String inputLine;
        while ((inputLine = in.readLine()) != null){
            try{
                writer.write(inputLine);
            }
            catch(IOException e){
                e.printStackTrace();
                return;
            }
        }
        in.close();
        writer.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:58:09.327

您可以使用 HTMLParser 完成此任务，请[在此处阅读](http://htmlparser.sourceforge.net/)

# variables - 如何在 Maven 原型中包含 Maven 启动配置？

> ID：13176406
> 
> 赞同：2
> 
> 时间：2012-11-01T11:48:04.643
> 
> 标签：variables, maven, launch, archetypes

我得到了一个 liferay-portlet-project，其中包含一个我想成为原型的示例应用程序/portlet。在项目内部有一个文件夹，其中包含两个`*.launch`用于重新部署 webapp 的文件。两者都有以下我遇到问题的行：

```
<stringAttribute key="org.eclipse.jdt.launching.WORKING_DIRECTORY" value="${workspace_loc:/rawportlet}"/> 
```

其中“rawportlet”是项目的名称。如果我手动将其更改`${artifactId}`为此变量，则在使用原型创建项目时无法解析。在项目生成期间解决这个变量会很好。

有没有办法做到这一点？还是解决方法？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:15:14.710

解决方法：编写一个用户可以在使用原型后运行的 maven 目标。所以步骤将是（例如）：

1.  从原型生成项目

    `mvn archetype:generate -DarchetypeCatalog=local`

2.  进行一些生成后清理（在项目的基本目录中执行）

    `mvn antrun:run`

所以我的代码在原型的“pom.xml”中：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <executions>
        <execution>
            <id>default-cli</id>
            <goals>
              <goal>run</goal>
            </goals>
            <configuration>
              <tasks>
                <replace token= "rawportlet" value="${artifactId}" dir="runConfigs">                                 
                  <include name="**/*.launch"/>
                </replace>
              </tasks>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

“runConfigs”目录是`*.launch`存储文件的地方。

学分：

[复制资源时完全搜索和替换源文件中的字符串](https://stackoverflow.com/questions/2196394/full-search-and-replace-of-strings-in-source-files-when-copying-resources)

[Maven，配置具体目标](https://stackoverflow.com/questions/3750597/maven-configure-specific-goal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T02:29:36.820

我有同样的问题，并且我使用了另一种可以正常工作的解决方案（但也不完美）。

`value="${workspace_loc}/${artifactId}"`在您的启动配置中使用。

只要人们在工作区根目录执行 archetype:gen，这将起作用。这对我来说比选择的答案更好，因为运行该后处理需要另一个启动配置（这在某种程度上违背了整个目的）。

# rotation - 在 tabbarcontroller iOS 6 中支持更多导航控制器和子视图控制器中的所有方向

> ID：13176408
> 
> 赞同：4
> 
> 时间：2012-11-01T11:48:07.837
> 
> 标签：rotation, ios6, tabbarcontroller

我有一个标签栏应用程序。我通过将选项卡栏控制器设置为窗口根视图控制器，然后通过子类化覆盖导航控制器和选项卡控制器的行为来固定选项卡的方向（尽管不推荐）。现在，除了更多导航控制器及其子视图控制器之外，方向在所有选项卡中都有效。我知道问题是设备旋转通知没有被传递给标签栏控制器中 morenavigationcontroller 内的子视图控制器。此外，更多的导航控制器是只读属性。

我的问题是我想支持更多导航控制器和儿童视图控制器中的所有方向。现在 shouautorotate 在 morenavigation 控制器的子视图控制器内没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T09:18:42.143

在 iOS 6 之后，Apple 改变了应用程序中方向的工作方式。请看下面的线程。有很大帮助

[带有导航控制器方向的标签栏控制器ios 6](https://stackoverflow.com/questions/13622194/tabbar-controller-with-navigationcontrollers-orientation-ios-6)

或者您可以制作自定义标签栏控制器并实现以下方法

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // You do not need this method if you are not supporting earlier iOS Versions
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

# c - 哪个数据库最容易用 C 语言使用？

> ID：13176412
> 
> 赞同：0
> 
> 时间：2012-11-01T11:48:21.367
> 
> 标签：c, database, file-handling

我有一个 C 语言的“大学辅导和录取”项目要做，我很困惑是选择数据库还是 C 语言的文件管理系统来处理数据。因为我没有将 C 与周围的任何数据库连接的先验知识，而且我发现 C 中的文件处理有些困难。

你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:56:18.193

MYSQL 有一个非常好的和简单的界面，可以与 c 一起使用。

您可以用 30-40 行 c 代码编写基本操作。

一旦您更改文件结构和信息，文件处理将不会扩展并且会很困难。使用数据库，您可以通过添加新表来保持逻辑地更改信息，并且只需添加新表名即可重用大部分代码。

[linux环境下的mysql教程c](http://zetcode.com/tutorials/mysqlcapitutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:51:51.223

我会使用 .plist 文件并使用 .h 和 .m 文件将其实现到 UITableView 中。这是最简单、最简单的方法。您可以继续向您的 plist 文件中添加行，而无需编写更改代码！

如果您有更好的主意，请告诉我！

# javascript - CoffeScript 类和绑定

> ID：13176414
> 
> 赞同：1
> 
> 时间：2012-11-01T11:48:28.587
> 
> 标签：javascript, class, binding, coffeescript

我有一个CS课：

```
class Model
  constructor: (objectParams) ->
    @object = ##object
    ###constructor

  baseObject: => {}
  validate: ko.computed =>
    console.log ko.toJS @object 
```

问题在于“验证”它是一个原型属性，其中 ko.computed 函数的绑定上下文应该是构造函数，而是编译为此：

```
Model.prototype.validate = ko.computed(function() {
  return console.log(ko.toJS(Model.object));
}); 
```

我希望它绑定到构造函数，但胖箭头 => 似乎只能以这种方式工作：

```
property: () => 
```

这样它就行不通了

```
 validate: =>
    ko.computed => console.log ko.toJS @object 
```

因为 ko.computed 不能在函数内部定义

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:56:58.683

我认为 robkuz正确地[识别了问题](https://stackoverflow.com/a/13177319/581845)。解决方案应该是`validate`在构造函数中设置属性：

```
class Model
  constructor: (objectParams) ->
    @object = ##object

    @validate = ko.computed =>
      console.log ko.toJS @object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:49:32.290

将您的函数绑定到实例并“预处理”它的工作方式如下

```
pipe = (fn)->
    return ->
        fn.apply(@, arguments)

class A
    foo: pipe -> @bar()
    bar: -> ... 
```

从您的管道函数（在您的情况下为 ko.computed）返回另一个函数，该函数包装您的初始函数并通过 .apply 调用它。

不需要胖箭头，因为您使用 @ 调用 apply

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:41:36.360

如果在将函数与类（原型）关联之前“建议”函数，则不会绑定到通常使用粗箭头发生的实例。

```
class A
    foo: advise => @someMethod() 
```

中介建议功能断开 CS 编译器，使其不清楚您想要做什么，因此没有调用

```
this.foo = __bind(this.foo, this); 
```

在构造函数中。

但是，如果您确实在方法定义中使用了“建议”功能，那么 CS 将为您创建一个闭包，您将可以访问该实例

```
class A
    foo: ->
         advise => @someMethod() 
```

这将产生

```
A.prototype.foo = function() {
    var _this = this;
    return advise(function() {
       return _this.someMethod();
    });
}; 
```

这里重要的是“var _this = this;”的定义 它将在您的内联函数定义中使用。

希望这可以帮助。

# angularjs - 如何在angularjs中禁用自动注射器（注射器类型的神奇发现）？

> ID：13176416
> 
> 赞同：15
> 
> 时间：2012-11-01T11:48:34.230
> 
> 标签：angularjs

Angularjs 有这个基于函数参数自动发现提供者的好特性。例如，如果我想在某个函数中使用 $http，我会这样称呼它：

```
$inject.invoke(function ($http) {

}); 
```

Angularjs 将“知道”我的依赖项是什么。它会通过阅读我的函数体并根据它知道的参数名称来解决这个问题。

但是，当您想缩小代码时会出现问题。Minifier 将更改参数名称。这就是为什么我们应该使用这个符号：

```
$inject.invoke(['$http', function ($http) {}]); 
```

或这个符号：

```
function Foo ($http) {}
Foo.$inject = ['$http'];

$inject.invoke(Foo); 
```

我们应该始终缩小我们的代码。所以我们应该避免使用这个神奇的（第一个例子）符号。

现在我的问题：

我正在尝试缩小我的 js 代码，而 angularjs 无法解析提供程序名称。我找不到我没有指定的地方`.$inject = [...]`。现在它只是说：`"Unknown provider a"`我不知道它指的是什么功能。

是否可以关闭提供者的 angularjs 自动发现（自动注入器）？我会在缩小之前测试和修复我的代码。

所以，我想知道如何禁用这个“神奇”的 angularjs 推论。因为我总是缩小我的代码，所以当我不小心使用这个超级英雄的邪恶时，我希望 angularjs 对我大喊大叫。

如何关闭它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T15:46:07.463

只需编辑源代码。找到'function annotate'，并将 fn == 'function' 块替换为如下内容：

```
if (typeof fn == 'function') {
  console.log("Bad magic injection in "+fn.toString().replace(STRIP_COMMENTS, ''));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:59:19.123

更新：

如果有人因为试图缩小而需要这个，也许这是另一种可能的解决方案

[恩敏](https://github.com/btford/ngmin)。它是一个 AngularJS 应用程序缩小器项目。

不确定这是否有帮助。

根据伊戈尔·米纳尔的说法，

你应该做这样的事情

```
factory('Phone', function($resource){ ... })) 
```

到

```
factory('Phone', ['$resource', function($resource){ ... })]) 
```

这是[Dev guide](http://docs.angularjs.org/guide/di)的官方文档。

> $inject 注解
> 
> 为了允许 minifer 重命名函数参数并仍然能够注入正确的服务，函数需要使用 $inject 属性进行注释。$inject 属性是要注入的服务名称数组。
> 
> ```
> var MyController = function(renamed$scope, renamedGreeter) {
> ...
> }
> MyController.$inject = ['$scope', 'greeter']; 
> ```
> 
> 必须注意 $inject 注释与函数声明中的实际参数保持同步。
> 
> 这种注解方法对于控制器声明很有用，因为它将注解信息分配给函数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-16T11:59:05.407

从 1.3.0-beta.6 开始，angularjs 支持 ng-strict-di 选项，它可以与 ng-app 指令一起使用来禁用自动注入。

从[文档](https://docs.angularjs.org/api/ng/directive/ngApp)

> 如果 app 元素上存在此属性，则注入器将以“strict-di”模式创建。这意味着应用程序将无法调用不使用显式函数注释的函数（因此不适合缩小），如依赖注入指南中所述，有用的调试信息将有助于追踪这些错误的根源

# sql - 带有组和状态的 SQL Select 查询 (SQL server 2008)

> ID：13176420
> 
> 赞同：2
> 
> 时间：2012-11-01T11:48:40.943
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有一张结构如下的桌子

```
id   g_id   name    status
---------------------------------------
1   111     item1   1
2   111     item2   1
3   111     item3   1

6   113     item1   -1
7   113     item2   1
8   113     item3   1

9   114     item1   1
10  114     item2   2 
```

状态可以包含值，成功：1 失败：-1 进行中：2

```
Need the following output 
GroupID     Status
------------------
111         Success
113         Failed
114         In-Progress 
```

如果组中的一个为-1，则结果应为失败，如果全部为 1，则应为成功。此外，如果有些为 1，其余为 2，则结果应为 In Progress。我可以选择上述结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:50:40.770

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/9ca1a/5)

```
select
    g_id as GroupID,
    case
        when min(status) = -1 then 'failed'
        when max(status) = 2 and min(status) = 1 then 'in progress'
        when max(status) = 1 and min(status) = 1 then 'success'
    end as Status
from table1
group by g_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:53:32.673

```
SELECT t.g_id, 
    CASE WHEN EXISTS(SELECT 1 FROM Table1 x WHERE x.g_id = t.g_id AND x.status = -1) THEN 'Failed' 
         WHEN EXISTS(SELECT 1 FROM Table1 x WHERE x.g_id = t.g_id AND x.status = 2) THEN 'In-Progress'
         ELSE 'Success' END AS Status
FROM Table1 t
GROUP BY t.g_id 
```

[SQL小提琴](http://sqlfiddle.com/#!3/2be3b/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:13:21.197

一个简单的使用`CASE`语句。

```
SELECT g_id,  
       CASE 
          WHEN MIN(Status) = -1 THEN 'Failed'
          WHEN MAX(Status) = 2  THEN 'In Progress'
          ELSE 'Succes'
       END
    AS Status
FROM Table1 
GROUP BY g_id 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!3/2be3b/13)

# css - div 溢出滚动

> ID：13176423
> 
> 赞同：2
> 
> 时间：2012-11-01T11:48:50.787
> 
> 标签：css, html, scroll, overflow

有这样的代码块；

```
<div class="wrapper">
<div class="title">Title Text</div>
<div class="content">
    <div class="block">Block text1</div>
    <div class="block">Block text2</div>
</div><!--Content End-->    
</div> 
```

我更改内容类的 css 溢出属性，例如“溢出：滚动；” . 但是当我改变这个特性时，所有 div 元素的溢出属性都会改变。我想修复不滚动的标题类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:53:15.690

尝试：

```
div.content { overflow: auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:53:20.673

确保你的 CSS 是

```
div.content { overflow:scroll; } 
```

# servlets - portlet/servlet 抽象

> ID：13176431
> 
> 赞同：3
> 
> 时间：2012-11-01T11:49:14.113
> 
> 标签：servlets, open-source, portlet, abstraction

是否有一个好的库，可以抽象 servlet/portlets/ 之间关于视图的差异？

具体来说，我希望能够编写一次视图**并**在简单的 web 应用程序或 portlet 中使用它。它可能是一个标签库，也可能是一种模板语言或任何存在的东西。

它应该使开发变得非常简单，并且可以重用和抽象诸如 servlet session/portlet session、renderRequest/servletRequest/ 之类的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:59:48.660

Portlet 是一个 Web 应用程序。根据您使用的框架可能会有一些差异，但您可以编写一个“经典”java webapp，然后将其配置为一个 Portlet（使用 portlet.xml 和一个 PortletBridge）。

例如，如果您使用 JSF，您可以只编写一个扩展 GenericPortlet 的类，并将每个 portlet 操作重定向到您的 JSF 生命周期。例如，您可以使用 JBoss PortletBridge。

还有用于 JSF portlet 的 IceFaces。但您也可以使用任何框架（Struts2、Struts、Vaadin 等）。

希望能帮助到你。

# sql - 默认情况下是否执行内连接？

> ID：13176434
> 
> 赞同：-3
> 
> 时间：2012-11-01T11:49:22.130
> 
> 标签：sql, database, primary-key, where-clause

我想知道为什么需要将 (primary key = foreign key) 放在 where 语句中。表格通过这些标准相互关联。那么，为什么每个人都在*where*子句或 *join*s 中使用它？

我的意思是，而不是

> select a.name, b.name from a,b where (a.fk = b.pk) AND (something = "something")

如果有人说

> ... 选择 a.name, b.name from a,b where (something = "something")

够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:52:40.073

首先，不幸的是，并不是每个人都使用外键。其次，不应该假设父表和子表应该通过各自表的 PK 和 FK 自动连接，即使这可能是最常见的。

SQL ANSI 委员会的成员非常聪明。我敢肯定，他们已经彻底考虑了这一点，并认为当前的标准是最安全、最可靠的。

顺便说一句，关于 Linq 的一个非常好的事情是，如果表定义了正确的 FK，则您不必指定连接。当然假设你正在做内部连接。假设你真的想加入PK和FK。

# animation - 在从上到下的效果中使用颜色为 Sprite 设置动画

> ID：13176435
> 
> 赞同：0
> 
> 时间：2012-11-01T11:49:32.860
> 
> 标签：animation, colors, cocos2d-iphone

如何在 sprite 中使用 CCTintTo 方法从上到下传播颜色。因为我使用 CCTintTo 方法在精灵中传播颜色。但我想看起来像从上到下传播颜色。如何处理这种类型的动画。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:24:18.563

如果您使用的是 cocos2d 2.0+，您可以编写一个着色器来执行此操作，并设置精灵的 shaderProgram 属性。没那么难，请按照分发中的示例进行操作。我的第一个着色器花了我 0.5 个工作日才能开始工作，也许还需要 0.5 个工作日才能将这项技术正确地集成到我的整体软件架构中。幸运:)。

[在这里](http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x)查看着色器的介绍，在一个辅助项目中使用它，直到您可以舒适地集成到您的主干中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:57:01.437

这是不可能的颜色着色。更改节点的颜色属性或使用着色操作只会将整个精灵着色为单一颜色，不会有渐变。

您必须自定义绘制精灵并应用/调整来自 CCLayerGradient 的渐变渲染代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T12:19:46.843

是的，CCLayerGradient 是您正在寻找的。顺便说一下，您使用什么技术进行着色。如果您使用 CGContextSetRGBFillColor 方法来填充精灵颜色，那么它会很棘手，但是如果您使用图像来填充颜色，那么图像序列很好plist 可用于制作动画，这将为您提供您正在寻找的确切效果。

获取图像序列并使用 CCSpriteBatchNode 对其进行动画处理，否则如果您想使用 RGB 颜色填充精灵，则必须寻找渐变效果。

# eclipse - LogCat：无法打开日志设备

> ID：13176437
> 
> 赞同：2
> 
> 时间：2012-11-01T11:49:35.090
> 
> 标签：eclipse, logcat, galaxy

我的手机：三星 Galaxy Note N7000 内核：HyDraCore_v6.2_B3_R3P0 版本：MIUI-2.10.19 RocketMIUI v8

我读了很多关于这个的帖子，但没有解决我的问题......当我将手机连接到我的电脑并运行项目 wirh “Run As -> Android Application”时，程序在我的手机上启动，但在 eclipse 中 logcat 是空的：- / 在 logcat 中，我只收到一条消息：

```
Unable to open log device '/dev/log/main': No such file or directory 
```

![在此处输入图像描述](../Images/e7807226ab8d589fdfe51ecc911cf2ba.png)

我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T11:18:42.350

我正在使用 Slim Rom (4.2.2, build 5) mod，他们默认禁用了日志记录。您需要做的是转到`/res/script`您设备上的目录并找到相关的启用日志脚本。就我而言，它是`S30enable_logger`. 对于您的自定义 rom，脚本可以有不同的命名约定（或目录） - 考虑使用您的自定义 rom id 检查它。

`adb`因此，假设您已通过pc 终端中的类型连接到您的设备：

```
adb shell 
cd /res/scripts
./S30enable_logger 
```

然后只需重新启动您的设备，日志最终应该可以工作。

# javascript - 将表单数据添加到数据库 ASP 和 SQL Server

> ID：13176438
> 
> 赞同：0
> 
> 时间：2012-11-01T11:49:39.800
> 
> 标签：javascript, sql, sql-server, asp-classic

我已经在网上搜索了几个小时，但我仍然无法理解这个！

首先，我有这个代码，这是我创建的表单。

```
<!-- #include file="Header.asp" -->
<!-- #include file="Tauthenticate.asp" -->
<!--#include file="database.asp"-->

<SCRIPT LANGUAGE="JavaScript">

function confirmSubmit()
{
var agree=confirm("Confirm?");
if (agree)
return true ;
else
return false ;
}
</script>

    <table border="0" width="100%" cellspacing="0" cellpadding="0" id="table17">
        <tr>
            <td background="../images/bar1.jpg"><font size="2">&nbsp;<b>Add 
            Skill</b></font></td>
        </tr>
        </table>
            <table border="0" width="100%" id="table18" cellspacing="0" cellpadding="0">
                <form method="POST" action="SaveNewSkill.asp">
                <tr>

                </tr>

                <td width="108"><font face="Verdana" size="2" >Employee </font> </td>
    <td>

        <p><font face="Verdana"><select size="1" name="D1">
        <%
            sql="select User_ID, First_Name, Surname from Company Where Status not like 'left%' and (Company.Office='Manchester' or Company.Office='Romania') order by Surname"
            set users=conn.execute(sql)
            do while not users.eof 
                %>
                    <option value="<%=users("User_ID")%>"><%=users("First_Name") & " " & users("Surname")%></option>
                <%
                users.movenext
                loop
                set users=nothing
                %>
        </select></font></p>

    </td>

                <tr>
                    <td width="142"><b><font size="2" face="Verdana">Skill</font></b></td><td>
                    <select size="1" name="D3">
                    <option value="AutoCad 2D">AutoCAD 2D</option>
                    <option value="3D Modeling">3D Modeling</option>
                    <option value="Sketchup">Sketchup</option>
                    </select></td>

                </tr>

                <tr>
                    <td width="142"><b><font size="2" face="Verdana">Current Skill Level</font></b></td><td>
                    <select size="1" name="D4">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select></td>

                </tr>

                    <tr>
                    <td width="142"><b><font size="2" face="Verdana">Required Skill Level</font></b></td><td>
                    <select size="1" name="D4">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select></td>

                </tr>

                </form>
                </table>
    <form><p><font size="2"><input type="submit" value="Save" name="B1" onclick="return confirmSubmit()"></font></form>
    <td width="75">
            <!-- #include file="footer.asp" --> 
```

包含的文件用于标题、与数据库的连接以及首先查看页面的身份验证（所有这些都有效）。

该表单在数据库中查询我们的用户列表，然后允许用户从列表中选择一项技能并定义他们当前的专业水平。

然后我创建了这个“保存技能”asp页面。

```
<!--#include file="database.asp"-->
<!--#include File="TUauthenticate.asp"-->

<%

User_ID=request.querystring("User_ID")
sql="select * from company where User_ID=" & User_ID
set rs=conn.execute(sql)
Session("User_ID")=User_ID

Skill=request.form("D3")
Current_Level=Request.form("D4")
User_ID=request.form("D1")
Required_Level=request.form("D5")

if request.form("B1")<>"" then
if skill = "AutoCAD 2D" then
sqlq="insert into skills (User_ID, AutoCad_2D, AutoCad_2DR) Values (" & User_ID & ",'" &    Current_Level & "','" & Required_Level & "')"
response.write(sqlq)
set rs=conn.execute(sqlq)
end if
end if

%> 
```

我已经使用各种工作代码将它放在一起，但它不会保存到数据库中......我理解它不是很整洁，但一旦我知道它有什么问题，我会对其进行排序。

我知道我已经包含了一些 javascript 但如果答案是在 asp 代码中我会优先考虑（因为我目前正在尝试研究 asp）

提前谢谢各位！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:20:27.980

查看您的代码，如果满足以下条件，您将只看到您的 response.write(sqlq) 的响应：

1) 如果 B1 = 无

2) 他们从选择框中选择 AutoCAD 2D。

所以那里有两个潜在的问题。

我建议删除*if request.form("B1")<>"" then*要求并重试，确保选择 AutoCAD 2D 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:27:21.453

```
<%

sdate =request.form("T1")
stime =request.form("T2")
datetime=sdate & " " & stime

iUserID=request.form("D2")
iSkillLevel=request.form("D4")
iRSkillLevel=request.form("D5")
hdid=Session("hdid")
wuser=Request.ServerVariables("Logon_User")

uploadid=request.form("D56")
filepath=request.form("B23")
hyperlink=request.form("T6")

If Request.Form("B11") <> "" then
sqlq = "INSERT INTO Skills (User_ID, AutoCad_2D, AutoCad_2DR) VALUES ('" & iUserID & "','" & iSkillLevel & "','" & iRSkillLevel & "')"
response.write(sqlq)
set rs=conn.execute(sqlq)
end if

set rs=nothing
If Request.Form("B11") <> "" Then Response.Redirect(Session("lastpage"))

%> 
```

# c# - 无法将文件存储在组合框中并在 WPF 中读取数据、大小

> ID：13176441
> 
> 赞同：1
> 
> 时间：2012-11-01T11:49:55.947
> 
> 标签：c#, .net, wpf, mvvm, combobox

我是一名 C++ 开发人员，最近开始开发 C# WPF 应用程序。我正在关注 MVVM。好吧，我正在研究组合框和按钮。基本上我有一个浏览按钮来加载一个 binfile 并将其存储在组合框中，当我单击 TEST 按钮时，我应该读取文件中存在的数据，获取它的大小。

**这是 XAML：**

```
<ComboBox Name="ClockYHZBox" >              
          <ComboBoxItem Content="{Binding FirmwarePath}" />
</ComboBox>
<Button Content="Browse" Command="{Binding WriteFilePathCommand}" Name="RunPCMPDM0" />

<Button Content="Test" Command="{Binding WriteDataTestCommand}" /> 
```

**视图模型类：**

```
private string _selectedFirmware;
    public string FirmwarePath
    {
        get; set;
    }

// This method gets called when BROWSE Button is pressed
private void ExecuteWriteFileDialog()
    {
        var dialog = new OpenFileDialog { InitialDirectory = _defaultPath };
        dialog.DefaultExt = ".bin";
        dialog.Filter = "BIN Files (*.bin)|*.bin";
        dialog.ShowDialog();
        FirmwarePath = dialog.FileName; // Firmware path has the path           
    }       

// Method gets called when TEST Button is Pressed
public void mSleepTestCommandExecuted()
    {
        int cmd = (22 << 8) | 0x06; 
        System.IO.StreamReader sr = new System.IO.StreamReader(FirmwarePath);

        string textdata = sr.ReadToEnd();
        int fileSize = (int)new System.IO.FileInfo(FirmwarePath).Length;

        Byte[] buffer = new Byte[256];            

        // This gives me the size and data, But i am failing to do
        // further operation of storing value in BUFFER
        // and MEMCPY which is shown below in C++ Code          
    } 
```

这就是我在 C++ 应用程序中所做的：

```
MemoryBlock binFile;
m_wdbFile->getCurrentFile().loadFileAsData(binFile); //m_wbdFile is a filedialog object
BYTE *buffer = NULL;
int  fileSize = binFile.getSize();
buffer = (BYTE *)calloc(sizeof(BYTE), fileSize + 2);    
memcpy(buffer+2, binFile.getData(), fileSize); 
```

正如您在上面看到的，它打开文件，将大小存储在 中`fileSize`，将内存块分配给缓冲区等等。我怎样才能实现它？我会很感激你的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:54:54.000

```
byte[] b;
FileStream fileStream=new FileStream(FirmwarePath,FileMode.Open);
using (BinaryReader br = new BinaryReader(fileStream))
{
   b = br.ReadBytes(fileSize);
} 
```

# android - 模拟器如 Android 中的 Galaxy S3

> ID：13176443
> 
> 赞同：1
> 
> 时间：2012-11-01T11:49:58.713
> 
> 标签：android, android-emulator

我如何像三星 Galaxy S3 一样创建 AVD。有人可以提供工具和教程的提示。谢谢

我想要像 Galaxy S3 一样的皮肤。

有了这个答案，我得到了一个错误

AVD 's3' 的启动模拟器无法分配内存：8 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

我也有手动更改分辨率720 * 1028，这样这个问题就解决了。

# opencl - 理解 opencl 内核中的移位和屏蔽

> ID：13176454
> 
> 赞同：1
> 
> 时间：2012-11-01T11:50:35.780
> 
> 标签：opencl, pyopencl

考虑以下内核：

```
__kernel void histogramKernel(__global uint4 *Image,  ....)     
 {                         .
                     .
                     .
 const uint mask = (uint) (NBINS-1);  //NBINS=256
 uint4 temp = Image[idx];   
 uint4 temp2 = (temp & mask);
 temp = temp >> 8;
 temp2 = (temp & mask);
 . . .

 } 
```

认为：

4 个线程正在运行，idx=0,1,2,3 和 Image[idx]=idx+100

最后一行中 temp2 的值是多少？

**更新：**

假设任何合适的值

```
 Image[0].x, Image[0].y, Image[0].z, Image[0].w
 Image[1].x, Image[1].y, Image[1].z, Image[1].w
 Image[2].x, Image[2].y, Image[2].z, Image[2].w
 Image[3].x, Image[3].y, Image[3].z, Image[3].w 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:31:56.577

我们可以从这个问题中完全消除原子性，因为 和 的值`temp`不`temp2`依赖于`s`。

```
__kernel void histogramKernel(__global uint4 *Image,  ....)     
 {                        
     //...                                   
     const uint mask = (uint) (NBINS-1);  //NBINS=256
     uint4 temp = Image[idx];   
     uint4 temp2 = (temp & mask);
     //...
     temp = temp >> 8;
     temp2 = (temp & mask);
     //...
 } 
```

最后掩码等于`0x000000FF`所以 temp 的值被修改为 256 并放入`temp2`. `temp2`在 temp 的值右移 8 位后，在最后一行被覆盖。所以我们得到以下值：

```
temp2 = (Image[idx] / 256) % 256 
```

我无法从您的问题中看出`Image`初始化为什么（因为有 4 个值，而您似乎只给出了一个）。

# jquery - 文本框上基于 Jquery 和和减法的值

> ID：13176457
> 
> 赞同：1
> 
> 时间：2012-11-01T11:50:42.980
> 
> 标签：jquery

1）如果第一个文本框被填充，我有**3 个文本框，第二个文本框会自动从 DB 更新并添加到第三个文本框。**

2) 但是，如果选择了第三个文本框，那么第二个会自动从 DB 中更新，减去第三个和第二个以填充第一个文本框。

```
 <td>Sending Amount</td>
    <td><input class="txt" type="text" name="txt" id = "sending"/></td>

    <td>Charge</td>
    <td><input class="txt" type="text" name="txt" id = "charge"/></td>

    <td>Total Amount</td>
    <td><input class="txt" type="text" name="txt" id = "totalAmount"/></td>
</tr> 
```

```
 $(function () {
        var sending = $('input:text[id$=sending]').keyup(foo);
        var charge = $('input:text[id$=charge]').keyup(foo);            
        var totalAmount = $('input:text[id$=totalAmount]').keyup(foo);   

     function foo() {

            var value1 = sending.val();
            var value2 = charge.val();               
            var sum = add(value1, value2);
            $('input:text[id$=totalAmount]').val(sum);
    var sub = sub(value1, value2);
            $('input:text[id$=sending]').val(sub);
        }

        function add() {

            var sum = 0;
            for (var i = 0, j = arguments.length; i < j; i++) {
                if (IsNumeric(arguments[i])) {
                    sum += parseFloat(arguments[i]);
                }
            }
            return sum;
        }

  function sub() 
         {
            var sub= 0;
            ***//need to create subtract function***
            }
            return sub;
        }

        function IsNumeric(input) {
            return (input - 0) == input && input.length > 0;
        }
    });
</script> 
```

**加法工作正常减法没有显示正确的值。**

尝试了下面的脚本，我认为它确实 add 和 sub 。

```
 <script type="text/javascript">
   $(function () {
    var sending = $('input:text[id$=sending]').keyup(foo);
    var charge = $('input:text[id$=charge]').keyup(foo);            
    var totalAmount = $('input:text[id$=totalAmount]').keyup(foo);   
 function foo() {
        var value1 = sending.val();
        var value2 = charge.val();   

        if(IsNumeric(value2)){
        if(IsNumeric(value1)){
        var value3 = parseFloat(value1) + parseFloat(value2);
        $('input:text[id$=totalAmount]').val(value3);
        }}

        value3 = totalAmount.val();
        if(IsNumeric(value3)){
        if(IsNumeric(value2)){
        value1 = parseFloat(value3) - parseFloat(value2);
        $('input:text[id$=sending]').val(value1);
        }}
    }
    function IsNumeric(input) {
        return (input - 0) == input && input.length > 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:11:44.797

如果有两个参数为什么你需要一个函数`add()`，为什么不直接做呢？`sum = value1 + value2`

同样，`sub = value1 - value2`应该做的伎俩。

如果你*必须*使用`sub`函数，你可以做类似的事情

```
function sub(value1,value2) 
     {
        var sub= value1 - value2;
        return sub;
     } 
```

# android - 从 Sencha Touch 访问本机 API/系统

> ID：13176461
> 
> 赞同：1
> 
> 时间：2012-11-01T11:51:01.390
> 
> 标签：android, ios, cordova, sencha-touch, packager

Sencha Touch 非常适合我的项目。但为了在 iOS 和 Android 上调用硬件条码扫描器的驱动程序，必须访问底层系统。

当 Sencha Touch 将其“转换”为本机应用程序时（Sencha SDK 允许这样做），这是否可以通过 Sencha Touch 本身实现？

我知道使用PhoneGap 是可能的。但我担心将所有这些技术一起使用（PhoneGap + Sencha touch）可能会使 UI 响应速度变慢，但这是这个项目的决定性因素。

编辑：在[此](https://stackoverflow.com/questions/11610961/how-to-access-native-ios-file-system-using-sencha-touch-2-alone "这个")线程中，用户说以下内容：

> “你无法访问原生 iOS 文件系统，**除非你使用 Sencha SDK 工具和原生打包**”

那么煎茶触摸有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:12:18.110

您必须将两件事分开，您是在开发 Web 应用程序还是嵌入了 Web 应用程序的本机应用程序？即用户是要通过导航到某个 URL 来访问应用程序，还是要从 App Store/Google Play 下载它？

[对于本机，我建议使用 PhoneGap 作为“外壳”并使用GitHub 上](https://github.com/phonegap/phonegap-plugins)提供的条形码扫描插件

对于纯 Web 应用程序开发，我唯一能想到的是[ZXing](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)的 Bar code Scanner 服务，它要求用户已经安装了条形码扫描仪（或者如果我没记错的话，将他们重定向到适当的商店）。但是，在这种情况下，您依赖 ZXing 来维护他们的开放服务，他们的任何更改都可能对您的应用程序产生直接影响。

希望这对你有帮助！

**OP评论后编辑：**

啊，所以您需要对本机环境进行一般访问。[据我所知，除了 Sencha Docs 中指定的组件之外，没有记录在案的方法可以访问其他本地组件，根据mitchell 在 sencha](http://www.sencha.com/forum/showthread.php?242576-Phonegap-vs-Sencha-Cmd&p=889921&viewfull=1#post889921)的说法，它似乎正在路上。

问题是，如果 Phonegap 开发的应用程序的响应速度不如 Sencha Mobile Packager。两者都创建了一个调用 Web 视图的 shell 应用程序，我还没有看到两者之间的任何性能测试。

# jsp - Java Web 开发 servlet 更改未执行

> ID：13176464
> 
> 赞同：1
> 
> 时间：2012-11-01T11:51:12.737
> 
> 标签：jsp, servlets, web, web.xml

我正在eclipse中开发一个java web开发项目。在我的 src 项目中，我有一个名为 com.ptm 的包。在这个包中，我有一个名为 LoginServlet.java 的 servlet，它一直运行良好。当从我的 jsp 页面调用时，它会检查调用其他类以检查登录，如果无效，它将重定向到“Login.jsp”这一切正常，但我想我会将 Login.jsp 重命名为 login.jsp 我改变了我在其他jsp和servlet中的所有引用，但是现在当我运行我的项目并且调用了无效语句时，它仍然试图打开'Login.jsp'而不是'login.jsp'我已经重新启动了tomcat并重新启动了eclipse multiple次。我还在这个循环中输入了一个打印语句并通过调试器运行它，我看到它完全错过了我的打印语句。它看起来好像是单步执行，但实际单步执行的代码是不同的。我还用随机文本破坏了 LoginServlet，所以它应该加载一个错误，但它仍然运行良好。

我在 WebContent/WEB-INF/web.xml 中引用了 servlet，如下所示

```
<servlet>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>com.ptm.LoginServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/LoginServlet</url-pattern>
 </servlet-mapping> 
```

正如我所说，它曾经运行良好，但似乎通过 servlet 缓存在某处，我无法更新它

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:09:43.270

在 Eclipse 中，Project -> Clean 下有一个选项。选择您的 Web 项目，然后单击确定。

清洁功能将丢弃所有构建问题和构建状态。该项目将从头开始重建。

首先停止 Tomcat 服务器。清理项目后，右键单击项目资源管理器中的项目文件夹，然后单击刷新（F5）。现在运行项目。

# php - 查询中的 PHP 与 MySQL 性能（如果、函数）

> ID：13176469
> 
> 赞同：9
> 
> 时间：2012-11-01T11:51:19.140
> 
> 标签：php, mysql, performance, benchmarking

我只看到这篇[文章](http://www.onextrapixel.com/2010/06/23/mysql-has-functions-part-5-php-vs-mysql-performance/)

我需要知道在这种情况下什么是最好的表现

查询中的 if 语句

`SELECT *,if( status = 1 , "active" ,"unactive") as status_val FROM comments`

**VS**

```
<?php
    $x = mysql_query("SELECT * FROM comments");

     while( $res = mysql_fetch_assoc( $x ) ){
       if( $x['status'] == 1 ){
             $status_val = 'active';
        }else{
             $status_val = 'unactive';
        }
     }
  ?> 
```

从绳子上剪下 10

`SELECT * , SUBSTR(comment, 0, 10) as min_comment FROM comments`

**VS**

```
<?php
    $x = mysql_query("SELECT * FROM comments");

     while( $res = mysql_fetch_assoc( $x ) ){
       $min_comment = substr( $x['comment'],0,10 ) ;
     }
  ?> 
```

ETC ？？？？？ 当我使用 MYSQL 函数或 PHP 函数时**？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:57:01.160

**这取决于。** 从网络的角度来看，在第一个 VS 中，PHP 胜出，在第二个 VS 中，MYSQL 胜出。那是因为您通过套接字发送的数据较少。因此脚本变得更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:08:28.897

这是对您问题的一个很好的描述： [Doing computing in MySQL vs PHP](https://stackoverflow.com/questions/6449072/doing-calculations-in-mysql-vs-php)

在第二个示例的情况下，速度问题可能很重要。首先你不知道你的评论有多大，所以万一

```
$x = mysql_query("SELECT * FROM comments");

 while( $res = mysql_fetch_assoc( $x ) ){
   $min_comment = substr( $x['comment'],0,10 ) ;
 } 
```

您要求服务器将所有内容都返回给您（这里我指的是评论的全部长度），这可能很重要。乘以表中的行数可能是相当大的数据，您必须在 php 和 sql 之间传输。在第二种情况下，`SELECT * , SUBSTR(comment, 0, 10) as min_comment FROM comments` 这将在服务器上完成，不需要额外的内存。

在第一个示例的情况下，我认为在 sql 端执行它也更好，因为之后您仍然需要执行额外的循环。除此之外，阅读您的代码的人可能会感到困惑，为什么您需要该代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:57:58.033

在这种情况下，使用 MySQL 函数可以避免在 PHP 中循环并节省大量代码。

在其他情况下，他们别无选择：例如，当您在`WHERE`零件中使用它们时。

在性能方面，在大多数情况下差异是微不足道的：使用最简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:57:39.990

唯一的答案：测量它！您有两个可行的解决方案，并希望获得最佳执行时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:57:59.563

我想说这完全取决于两端的系统和当前负载。通常，数据库服务器比台式机更坚固，在数据库端完成整个事情而不是拆分它并部分使用 PHP 会更快。

# c - 说服编译器在循环外设置寄存器

> ID：13176470
> 
> 赞同：1
> 
> 时间：2012-11-01T11:51:22.323
> 
> 标签：c, optimization, assembly, compiler-optimization, micro-optimization

首先，我会说我认为没有必要理解下面代码的功能来做出明智的尝试来解决我的问题。这主要是一个优化问题。代码是为了了解正在做什么。

我有以下经过某种程度优化的卷积主循环（有效）：

```
for(int i=0; i<length-kernel_length; i+=4){

    acc = _mm_setzero_ps();

    for(int k=0; k<KERNEL_LENGTH; k+=4){

        int data_offset = i + k;

        for (int l = 0; l < 4; l++){

            data_block = _mm_load_ps(in_aligned[l] + data_offset);
            prod = _mm_mul_ps(kernel_reverse[k+l], data_block);

            acc = _mm_add_ps(acc, prod);
        }
    }
    _mm_storeu_ps(out+i, acc);

} 
```

`KERNEL_LENGTH`是 4. `in_aligned`是输入数组（在其上执行卷积）重复 4 次，每次重复从其他样本向左移动一个样本。这样每个样本都可以在 16 字节对齐的位置上找到。 `kernel_reverse`是反向内核，每个样本重复 4 次以填充 4 向量，并声明并定义为：

```
float kernel_block[4] __attribute__ ((aligned (16)));
__m128 kernel_reverse[KERNEL_LENGTH] __attribute__ ((aligned (16)));    

// Repeat the kernel across the vector
for(int i=0; i<KERNEL_LENGTH; i++){
    kernel_block[0] = kernel[kernel_length - i - 1];
    kernel_block[1] = kernel[kernel_length - i - 1];
    kernel_block[2] = kernel[kernel_length - i - 1];
    kernel_block[3] = kernel[kernel_length - i - 1];

    kernel_reverse[i] = _mm_load_ps(kernel_block);
} 
```

该代码也可以正确且非常快速地计算算法。

我编译代码`gcc -std=c99 -Wall -O3 -msse3 -mtune=core2`

我的问题是：循环编译为下面的机器码。在这个循环中，每次加载内核都花费了大量的指令。内核在循环的每次迭代中都不会改变，因此原则上可以保存在 SSE 寄存器中。据我了解，有足够的寄存器可以轻松存储内核（实际上，机器代码并不表示寄存器压力太大）。

如何说服编译器不在每个循环上加载内核？

当内核长度设置为常量时，我​​期望编译器会自动执行此操作。

```
 testl   %edx, %edx
    jle .L79
    leaq    (%rcx,%rcx,2), %rsi
    movaps  -144(%rbp), %xmm6
    xorps   %xmm2, %xmm2
    leal    -1(%rdx), %ecx
    movaps  -128(%rbp), %xmm5
    xorl    %eax, %eax
    movaps  -112(%rbp), %xmm4
    leaq    0(%r13,%rsi,4), %rsi
    shrl    $2, %ecx
    addq    $1, %rcx
    movaps  -96(%rbp), %xmm3
    salq    $4, %rcx
    .p2align 4,,10
    .p2align 3
.L80:
    movaps  0(%r13,%rax), %xmm0
    movaps  (%r14,%rax), %xmm1
    mulps   %xmm6, %xmm0
    mulps   %xmm5, %xmm1
    addps   %xmm2, %xmm0
    addps   %xmm1, %xmm0
    movaps  (%r9,%rax), %xmm1
    mulps   %xmm4, %xmm1
    addps   %xmm1, %xmm0
    movaps  (%rsi,%rax), %xmm1
    mulps   %xmm3, %xmm1
    addps   %xmm1, %xmm0
    movups  %xmm0, (%rbx,%rax)
    addq    $16, %rax
    cmpq    %rcx, %rax
    jne .L80
.L79: 
```

编辑：完整的代码清单如下：

```
#define KERNEL_LENGTH 4
int convolve_sse_in_aligned_fixed_kernel(float* in, float* out, int length,
        float* kernel, int kernel_length)
{
    float kernel_block[4] __attribute__ ((aligned (16)));
    float in_aligned[4][length] __attribute__ ((aligned (16)));

    __m128 kernel_reverse[KERNEL_LENGTH] __attribute__ ((aligned (16)));    
    __m128 data_block __attribute__ ((aligned (16)));

    __m128 prod __attribute__ ((aligned (16)));
    __m128 acc __attribute__ ((aligned (16)));

    // Repeat the kernel across the vector
    for(int i=0; i<KERNEL_LENGTH; i++){
        int index = kernel_length - i - 1;
        kernel_block[0] = kernel[index];
        kernel_block[1] = kernel[index];
        kernel_block[2] = kernel[index];
        kernel_block[3] = kernel[index];

        kernel_reverse[i] = _mm_load_ps(kernel_block);
    }

    /* Create a set of 4 aligned arrays
     * Each array is offset by one sample from the one before
     */
    for(int i=0; i<4; i++){
        memcpy(in_aligned[i], (in+i), (length-i)*sizeof(float));
    }

    for(int i=0; i<length-kernel_length; i+=4){

        acc = _mm_setzero_ps();

        for(int k=0; k<KERNEL_LENGTH; k+=4){

            int data_offset = i + k;

            for (int l = 0; l < 4; l++){

                data_block = _mm_load_ps(in_aligned[l] + data_offset);
                prod = _mm_mul_ps(kernel_reverse[k+l], data_block);

                acc = _mm_add_ps(acc, prod);
            }
        }
        _mm_storeu_ps(out+i, acc);

    }

    // Need to do the last value as a special case
    int i = length - kernel_length;
    out[i] = 0.0;
    for(int k=0; k<kernel_length; k++){
        out[i] += in_aligned[0][i+k] * kernel[kernel_length - k - 1];
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:36:08.333

答案是，它正在做我想要的。问题似乎在于我无法从`objdump -d`. 在修改问题以使用`gcc -S`@PascalCuoq 建议的输出时，循环特别容易理解。

我留下了这个问题，因为有人可能会重视这一点！（实际上是代码）。

# sql - SQL 连接相同的表

> ID：13176474
> 
> 赞同：0
> 
> 时间：2012-11-01T11:51:41.097
> 
> 标签：sql

```
select
  person.adresse,
  person.fornavn,
  person.postnr,
  COUNT(PERSON.personnr)
from 
  PERSON 
    inner join 
  POST
    on POST.postnr = PERSON.postnr
    inner join
  PERSON as P 
    on PERSON.adresse = P.adresse
group by 
  PERSON.adresse, 
  PERSON.fornavn,
  PERSON.postnr
having 
  COUNT(PERSON.personnr) > 1 
```

Adresse = 地址，fornavn = 名字 我需要显示人员的地址、名字和邮政编码，如果不止一个人住在同一个地址上。我知道这与加入相同的表有关，但我似乎无法弄清楚加入哪些表是有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:55:48.633

直接解决您的查询是添加`and PERSON.fornavn <> P.fornavn`用于确保您加入到同一地址的**不同人的条件。**然后您可以删除 COUNT，尤其是因为它会产生错误的结果。

```
select person.adresse, person.fornavn, person.postnr
from PERSON
join PERSON as P on PERSON.adresse = P.adresse and PERSON.fornavn <> P.fornavn
group by PERSON.adresse, PERSON.fornavn, PERSON.postnr
order by PERSON.adresse 
```

虽然这可行，但首先找到拥有多个人的地址，然后检索这些地址的人可能更有效。

```
SELECT P.adresse, P.fornavn, P.postnr
  FROM (
       SELECT adresse
         FROM PERSON
     GROUP BY adresse
       HAVING COUNT(*) > 1) G
  JOIN PERSON P ON P.adresse = G.adresse 
```

# asp.net - 在非常基本的 WebSharper 应用程序中找不到“/Scripts/IntelliFactory.WebSharper.dll.js”

> ID：13176480
> 
> 赞同：2
> 
> 时间：2012-11-01T11:52:07.947
> 
> 标签：asp.net, f#, websharper

我正在开发一个非常简单的 WebSharper 应用程序，并且在运行它时遇到了困难。

我的 F#/WebSharper 库包含 Main.fs 和以下内容：

```
namespace Sandbox35.FsLib

open IntelliFactory.WebSharper
open IntelliFactory.WebSharper.Html

type HelloWorldControl () =
    inherit Web.Control()

    [<JavaScript>]
    override this.Body =
        Div [ P [ Text "Hello World" ] ] :> Html.IPagelet 
```

我正在加载到 Default.aspx 中，其中包含以下内容：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Sandbox35.Lib._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <WebSharper:ScriptManager runat="server" />
  <title>Sandbox</title>
</head>
<body>
  <form id="form1" runat="server">
    <SandboxLib:HelloWorldControl runat="server"/>
  </form>
</body>
</html> 
```

我正在为我的服务器控件和 WebSharper 处理程序在应用程序的 web.config 文件中添加项目引用和相关条目，如他们网站上的示例中所述。

一切看起来都很好，但是当我运行应用程序时，我发现我的浏览器找不到许多 Javascript 文件：

1.  沙盒.Lib.dll.js
2.  IntelliFactory.WebSharper.dll.js
3.  IntelliFactory.WebSharper.Html.dll.js

它们都返回 404 错误。

我正在使用 VS2010 和 .Net 3.5。

只是想知道我还应该检查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:04:29.193

这些文件通常在磁盘上 Web 项目根目录下的 Scripts 文件夹中生成。他们在场吗？如果不是，IntelliFactory.WebSharper.Web 目标是否包含在 Web 项目 MSBuild 文件中？

```
<Import Project="$(WEBSHARPER_HOME)\IntelliFactory.WebSharper.Web.targets" /> 
```

# gwt - 有没有一种简单的方法可以将替代文本添加到 GWT 中的子菜单箭头？

> ID：13176482
> 
> 赞同：0
> 
> 时间：2012-11-01T11:52:15.597
> 
> 标签：gwt, accessibility

我的一位客户特别热衷于将 Wave 工具栏作为可访问性的衡量标准，并且不会以任何理由接受任何红色错误。

默认情况下，GWT 中的子菜单箭头没有与之关联的替代文本，当菜单显示在屏幕上时会导致波形工具栏错误。

有没有一种简单的方法可以向这个图像添加替代文本，还是我必须对 MenuBar 进行子类化？

提前致谢

# matlab - Matlab Psychtoolbox 在运行复杂脚本时不断崩溃

> ID：13176483
> 
> 赞同：7
> 
> 时间：2012-11-01T03:55:15.333
> 
> 标签：matlab, crash

我在 Macbook 计算机的 Windows XP 分区中的 MATLAB R2011B 中运行 psychtoolbox-3.0.10。我一直在尝试为行为科学课程运行一个 Matlab 脚本（请参见[此处](http://faculty.washington.edu/ionefine/html/Psychtoolbox.html)。该文件名为`FunkyScreen.m`.

它工作了前 30 秒（前 80 行左右），然后 Matlab 突然崩溃并关闭。我单击了消息的“详细信息”按钮，它显示程序可能由于`mex`文件而停止。

### 问题：

*   我应该手动设置 Matlab 来编译这些文件吗？
*   还是只是因为内部问题而崩溃？

### 脚本是：

```
% FunkyScreen.m
%
% opens a window using psychtoolbox,
% makes the window do some funky things
%
% written for Psychtoolbox 3 on the PC by IF 3/2007
screenNum=0;
flipSpd=13;% a flip every 13 frames
[wPtr,rect]=Screen('OpenWindow',screenNum);
monitorFlipInterval=Screen('GetFlipInterval', wPtr); 
% 1/monitorFlipInterval is the frame rate of the monitor
black=BlackIndex(wPtr);
white=WhiteIndex(wPtr);
% blank the Screen and wait a second
Screen('FillRect',wPtr,black);
Screen(wPtr,'Flip');
HideCursor;
tic
while toc<1;
end
% make a rectangle in the middle of the screen flip colors and size
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip');% collect the time for the first flip with vbl
for i=1:10
Screen('FillRect',wPtr,[0 0 255], [100 150 200 250]);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
% flip 13 frames after vbl
Screen('FillRect',wPtr,[255 0 0], [100 150 400 450]);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
end
% blank the screen and wait a second
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip', vbl+(flipSpd*monitorFlipInterval));
tic
while toc<1;
end
% make circles flip colors & size
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip');
for i=1:10
Screen('FillOval',wPtr,[0 180 255], [ 500 500 600 600]);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
Screen('FillOval',wPtr,[0 255 0], [ 400 400 900 700]);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
end
% blank the Screen and wait a second
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip', vbl+(flipSpd*monitorFlipInterval));
tic
while toc<1;
end
% make lines that flip colors size & position
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip');
for i=1:10
Screen('DrawLine',wPtr,[0 255 255], 500, 200, 700 ,600, 5);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
Screen('DrawLine',wPtr,[255 255 0], 100, 600, 600 ,100, 5);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
end
% blank the Screen and wait a second
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip', vbl+(flipSpd*monitorFlipInterval));
tic
while toc<1;
end
% combine the stimuli
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip');
for i=1:10
Screen('FillRect',wPtr,[0 0 255], [100 150 200 250]);
Screen('DrawLine',wPtr,[0 255 255], 500, 200, 700 ,600, 5);
Screen('FillOval',wPtr,[0 180 255], [ 500 500 600 600]);
Screen('TextSize', wPtr , 150);
Screen('DrawText', wPtr, 'FUNKY!!', 200, 20, [255 50 255]);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
Screen('FillRect',wPtr,[255 0 0], [100 150 400 450]);
Screen('FillOval',wPtr,[0 255 0], [ 400 400 900 700]);
Screen('DrawLine',wPtr,[255 255 0], 100, 600, 600 ,100, 5);
vbl=Screen(wPtr, 'Flip', vbl+(flipSpd*monitorFlipInterval));
end
% blank the screen and wait a second
Screen('FillRect',wPtr,black);
vbl=Screen(wPtr,'Flip', vbl+(flipSpd*monitorFlipInterval));
tic
while toc<1;
end
Screen('CloseAll');
ShowCursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:37:27.080

这是您可以（可能）消除问题的方法。

```
Step 1: Run the code, try to get an indication of where it crashes
Step 2: Possibly using the information from Step 1, devide your code in 2 halves.
Step 3: Run both halves separately, see which one crashes
Step 4: Keep repeating the steps above untill you have identified the culprit 
Step 5: Try to deal with the specific problem that is found 
```

# ruby-on-rails-3 - XML响应的非rails样式格式如何正确解析ActiveResource？

> ID：13176487
> 
> 赞同：2
> 
> 时间：2012-11-01T11:52:21.863
> 
> 标签：ruby-on-rails-3, prestashop, activeresource

使用 Rails 和 ActiveResource 我得到了第三方 API 的非 Rails 样式的 XML 响应。我喜欢映射的对象基本上包裹在 prestahop 元素中。我应该重写什么来摆脱该元素以正确映射对象？

```
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<order>
    <id></id> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:52:39.297

您应该根据需要使用自定义格式化程序，这样的事情可能是很好的解决方案。

```
class PrestaXMLFormatter
  include ActiveResource::Formats::XmlFormat

  def decode(xml)
    ActiveResource::Formats::XmlFormat.decode(xml)['prestashop']
  end
end

class Order < ActiveResource::Base
  self.format = PrestaXMLFormatter.new
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T16:35:02.393

我有一些外部服务，我必须谈论非 Rails 风格的 api。我正在使用[Savon](http://savonrb.com/) gem 的组合来发出 SOAP 请求并解析 SOAP 响应，并[使用 Roxml](https://github.com/Empact/roxml) gem 将实际的 XML 映射到 ruby​​ 对象中。

# c# - 每分钟运行多少次异步方法

> ID：13176489
> 
> 赞同：-1
> 
> 时间：2012-11-01T11:52:24.733
> 
> 标签：c#, asp.net, wcf, web-services

我现在正在研究一种异步方法，从这个链接开始

*   [异步调用同步方法](http://msdn.microsoft.com/en-us/library/2e08f6yc%28v=vs.100%29.aspx)

现在，如果我想查看我的方法在 1 分钟内运行了多少次，我应该怎么做？

例如，20 分钟内有 25000 笔交易。ETC.....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:58:34.367

实现这一点的最简单的方法是有一个计数器，异步方法每次运行时都会更新（注意锁定等）。然后你需要做的就是记录你的开始时间并在你想要的时候比较两者......

开始时间 = 11:56 开始运行异步任务...在 11:57 检查，计数器 = 23 表示它在一分钟内运行了 23 次

您可以在一分钟、一小时或任何时候检查。当然还有其他方法，但这是最简单的！

# c - 在 if 语句中分配和测试变量的最合适方法是什么？

> ID：13176491
> 
> 赞同：5
> 
> 时间：2012-11-01T11:52:25.450
> 
> 标签：c

以下哪一种是首选的做事方式，为什么？**假设函数 bar() 在任何时候都不取零值，**是否有任何特定情况会产生任何影响？

案例1：测试两个条件的真值

```
if ((foo = bar()) && foo < 0)
    error(); 
```

案例 2：仅测试分配的变量

```
if ((foo = bar()) < 0)
    error(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T11:55:10.070

首选方法是将它们分开：

```
foo = bar();
if (foo < 0)
    error(); 
```

编辑：这是可读性和避免错误的更好方法，例如在您的第一种情况下：

```
if (foo = bar() && foo < 0)
    error(); 
```

那应该是：

```
if ((foo = bar()) && foo < 0)
    error(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:57:02.010

第一个是完全错误的。由于优先规则，你得到：

```
if (foo = (bar() && foo < 0))
    error(); 
```

这通常不是您所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:57:05.230

第一个示例有效，但如果有人试图更改`<`为`<=`or `>=`，它会爆炸：`bar`返回 0 时，它将测试 and 语句的第一部分并认为它是假的，中止第二个检查，这应该是真的。

此外，您的第一个示例没有做它应该做的事情：运算符优先级`=`小于`&&`，因此您将 &&-operation 的结果分配给`foo`

所以我更喜欢第二个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:59:39.423

在大多数情况下，这无关紧要。你的第一个案例有一些冗余，所以我更喜欢第二个简短的建议。

在某些情况下，这种方法不够好，特别是在变量是共享资产的多线程环境中（设置和测试操作在那里很常见）。在这种情况下，需要适当保护对变量的访问（即通过锁定）以避免竞争和数据损坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T12:05:37.113

如果您尝试在有条件的额外括号内进行赋值，大多数编译器（如果不是全部）都会发出警告。

但是在大多数情况下，我认为这样的复合语句的可读性较差，虽然在说 Ruby 中它是有意义的，但它在 C 中并不常见。没有一个永远不会通过代码审查 IMO 的理由。

# ios - 如何在情节提要中使用 UICollectionViewController 同时仍支持 ios 5.1？

> ID：13176494
> 
> 赞同：1
> 
> 时间：2012-11-01T11:52:34.530
> 
> 标签：ios, uicollectionview

最佳实践是检测某个功能的类别是否存在并根据可用性降低用户的功能。我在 storyboard 中创建了 UICollectionView 和一个标准的 tableview 来支持 ios 5.1 用户。然后，我只需检查用户是否具有此功能并转到适当的场景。但是，当我现在尝试编译我的代码时，我得到一个“dyld：找不到符号：_UICollectionElementKindSectionHeader”这似乎是苹果的反模式，不允许在带有 ios 5.1 部署目标的情节提要中使用 ios6.0 功能。

```
if ([UICollectionView class]) {
    [self performSegueWithIdentifier:@"UserShow" sender:self];
} else {
    [self performSegueWithIdentifier:@"UserShowTable" sender:self];
} 
```

以上对我来说似乎是一个非常合理的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:12:34.797

我知道只放链接答案是不合适的，但她不可能包含整个文件。

请看[这个](https://github.com/steipete/PSTCollectionView)。

控制器旨在提供与 iOS 6 的 UICollectionController 相同的功能，但仍支持 iOS 4/5

开发商在说什么

> PSTCollectionView
> 开源，100% API 兼容替换 UICollectionView for iOS4.3+
> 
> 你想使用 UICollectionView，但还需要支持 iOS4/5？那么你会爱上这个项目的。我最初是为 [PSPDFKit](http://pspdfkit.com/)编写的，这是我的 iOS PDF 框架，支持文本选择和注释，但这个项目似乎对其他人有用，以便为我自己保留它 :) 另外，我希望新的网格视图的涌入停止。最好只编写布局管理器并建立在出色的代码库上。
> 
> 目标是在 iOS 4/5 上使用 PSTCollectionView 作为后备并在 iOS6 上切换到 UICollectionView。我们甚至使用某些运行时技巧为旧版本的 iOS 在运行时创建 UICollectionView。理想情况下，您只需链接文件，一切都可以在旧系统上运行。实际上，这并不容易，尤其是当您使用 UICollectionView 类的子类时，因为它们不能在运行时被替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:04:53.557

你不能。一旦您将集合视图控制器放到情节提要中，它将尝试自动引用它，这将导致您遇到编译错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T06:00:50.013

对于通过故事板进行 6.0 之前的部署没有兼容性解决方案，但[PSTCollectionView](https://github.com/steipete/PSTCollectionView)确实支持 iOS 5.0+ 并且得到积极维护。它在运行时可以`UICollectionView*`在 6.0 及更高版本上使用，并且应该与情节提要兼容。

# jquery - Jquery UI 对话框 - 自定义关闭按钮 (X)

> ID：13176499
> 
> 赞同：1
> 
> 时间：2012-11-01T11:52:56.030
> 
> 标签：jquery, jquery-ui

当我单击标准 X 按钮时，我想设置一些自定义功能。我已经浏览了 API 和所有相关信息，但在这方面它是完全贫瘠的。对于这样一个常用的软件，文档非常糟糕，而且相当不合标准。

我想要做的是当单击 X 时我希望它运行一些自定义代码。不幸的是，X 按钮没有 id，也没有关于如何直接访问它的文档。我在这里看到了建议用户创建“关闭”按钮的答案，但这似乎毫无意义，因为它已经附带了一个，而且我不希望在窗口底部有一个关闭按钮，而是在标题中酒吧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:59:06.307

尝试这个

```
 $(".ui-dialog-titlebar-close").click( function() {
     //some code
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:58:31.153

您可以使用：

```
$( "#dialog" ).dialog({
beforeClose:function(e){
//do something here
}
}); 
```

# r - 在因子中重新编码 NA

> ID：13176508
> 
> 赞同：3
> 
> 时间：2012-11-01T11:53:21.140
> 
> 标签：r

我有一个包含样本点组的数据框：

```
samplePoint<-c("1","1","1","1","2","2","2","2","3","3","3","3")
category<-c("a", "a", "a", NA, "b", "b", NA, "b", NA, "a", "a", "a")
values<-c(0.51, 0.21, 0.31, 0.22, 0.61, 0.71, 0.52, 0.32, 0.23, 0.1, 0.24, 0.33)
dat<-data.frame(samplePoint, category, values) 
```

我需要重新编码 dat$category 中的 NA，以便稍后在此过程中使用。每个样本点只有一个类别：1 应该都是“a”，2 = “b”，3 =“a”。

我尝试使用 ifelse 函数进行聚合，打算使用匹配或查找类型函数重新编码：

```
codeList<-aggregate(
dat$category, by=list(dat$samplePoint),
FUN=function(x){ifelse(length(which(x=="a")) > length(which(x=="b")), "a", "b")}
) 
```

问题1是，我该如何解决匹配问题？问题 2 是我把整个事情完全复杂化了吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:05:28.063

Q1：你没有，因为， Q2：是的，大量。

您可以做的是`factor`对您的样本点使用调用，并适当地转换并使用所需的标签。

```
category <- factor((as.numeric(samplePoint)+1)%%2,labels=letters[1:2])
category
 [1] a a a a b b b b a a a a
Levels: a b 
```

转换使用取模运算符 (%%) 将样本点转换为二进制输出，但点被移位以使点 1 和 3 对应于 label `"a"`。任何其他点都将以相同的方式编码，即 4：“b”，5：“a”。

**更新**

在评论中得到澄清后，我认为这可能会有所帮助：

```
(catTable <- aggregate(category,list(samplePoint=samplePoint),function(x) unique(x[!is.na(x)])))
  samplePoint x
1           1 a
2           2 b
3           3 a 
```

这为您提供了一个 data.frame，您可以`merge`使用原始数据来获得您想要的内容。

```
merge(dat,catTable,all.x=T)
   samplePoint category values x
1            1        a   0.51 a
2            1        a   0.21 a
3            1        a   0.31 a
4            1     <NA>   0.22 a
5            2        b   0.61 b
6            2        b   0.71 b
7            2     <NA>   0.52 b
8            2        b   0.32 b
9            3     <NA>   0.23 a
10           3        a   0.10 a
11           3        a   0.24 a
12           3        a   0.33 a 
```

# oracle11g - QueryExtender IgnoreCase 与 Oracle

> ID：13176509
> 
> 赞同：2
> 
> 时间：2012-11-01T11:53:26.060
> 
> 标签：oracle11g, case-sensitive, entitydatasource, query-extender

我有一个以**EntityDataSource作为目标的****QueryExtender**控件（db **Oracle11g**）。我使用属性**ComparisonType** =“CurrentCultureIgnoreCase”向它添加了一个搜索表达式。

 ******当我执行搜索时，它根本不会忽略 CaseSensitivity。

请，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-11T10:10:54.093

我通过 CustomExtender 解决它以使其小写******

# android - 在 Spinner 中获取所选选项的价值

> ID：13176515
> 
> 赞同：0
> 
> 时间：2012-11-01T11:53:47.840
> 
> 标签：android, string, spinner

我想在 Spinner 中获得所选选项的价值。我知道，我可以从 setOnItemSelectedListener 获得这个，但我不想使用它。我有这个：

```
String spinner1odp  = spinnerSubject.getSelectedItem().toString(); 
```

但是这段代码的结果是：android.database.sqlite.SQLiteCursor@40f828e8。我想得到字符串，而不是那样的：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:56:13.610

我认为您正在从数据库中弹出 Spinner。因此，考虑到您必须首先获取选定的索引并从光标中获取所需的数据：

代码片段：

```
int position = mySpinner.getSelectedItemPosition(); 
Cursor cursor = (Cursor) myAdapter.getItem(position);
String myText = cursor.getString(cursor.getColumnIndex(KEY_NAME)); 
```

进一步参考：[Android Spinner Selected Item](https://stackoverflow.com/questions/5818850/android-spinner-selected-item)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:00:38.233

> 通过使用此代码，您可以获得...

字符串值 = (String)spinnerSubject.getItemAtPosition(spinnerSubject.getSelectedItemPosition());

# jquery - 在 IE8 中 JQuery.isFunction 不报告 document.write 是一个函数

> ID：13176517
> 
> 赞同：0
> 
> 时间：2012-11-01T11:53:54.290
> 
> 标签：jquery, internet-explorer, sinon

我在 IE8 中尝试**了 jQuery.isFunction(document.write)**并返回**false**。

这是我注意到的几件事。1\. **document.write.constructor****未定义** 2\. **typeof** **document.write**是对象

 **我在使用 Sinon 在 document.write 上创建存根时知道了这个问题，它抛出了一个异常，说**Attempted to wrap object property write as function**

虽然，我可以通过绕过对 document.write 的检查来解决这个问题，但我只是想知道它是 JQuery 中的错误还是故意的（尽管看起来不是）。

此外，我检查了 JQuery 代码及其简单检查**$.call(a) === "[object Function]"**在 IE8（很可能是其他版本）的情况下失败。

还有一件事，为什么我们不能只检查document.write 的**调用**函数是否已**定义和 native**？这应该足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:02:42.453

1.  看看[这里](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/c1f546f6-d7e1-4b46-a1c9-8f02eaf1286b)，这个问题是在 msdn 论坛上讨论的。

2.  在这里[为什么-dhtml-behavior-not-work-in-ie8-if-document-write-is-executed-in-head](https://stackoverflow.com/questions/7593913/why-dhtml-behavior-not-work-in-ie8-if-document-write-is-executed-in-head)**

# air - 使用 AIR 应用程序更改操作系统文件图标

> ID：13176524
> 
> 赞同：0
> 
> 时间：2012-11-01T11:54:45.210
> 
> 标签：air, filesystems, icons, overlay

我正在构建一个类似于 Dropbox 的 AIR 应用程序。它将允许用户在各种操作系统之间同步他们的文件。我想知道的是，我怎样才能更改默认文件系统的文件图标（例如添加一个覆盖），例如 - 同步和同步，Dropbox 的方式？在 Windows 上，我发现 Dropbox 会编辑注册表文件以插入覆盖图标。虽然还不确定它们在 MAC OS X 中是如何做到的。我在这里看到一些线程询问有关 AIR 的类似问题，但没有人提及如何更改文件的图标。希望从各种专家那里得到解决方案。如果您知道如何实现，请提出任何想法。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:12:05.387

一个简单而有效的解决方案是使用仅在您的应用程序*内部*的图标：只需在您的应用程序文件中嵌入一些代表文件各种状态的透明图片（只有一小部分告诉它处于哪种状态，其余的完全透明），您将在运行时将其添加到显示的图标上方。

由于您可以获得文件的实际图标，只需将它们绘制到 BitmapData（如果需要）并使用这些自定义图像添加覆盖，使用与应用程序中的文件状态相关的图像。

更进一步的可能是将任何生成的图标存储在您的 AIR 应用程序文件夹中以供将来使用（检查您已经拥有的文件类型，如果您的新文件类型不在这些文件中，请将各种图标与您的自定义叠加层导出到直接在用户设备上的 PNG 文件，以便在下次打开应用程序时重新加载它们）。

# html - 在 IE8 中折叠 DIV

> ID：13176525
> 
> 赞同：2
> 
> 时间：2012-11-01T11:54:53.263
> 
> 标签：html, internet-explorer-8, clearfix

如果您在 IE9（或任何其他现代浏览器）中查看以下网站，您将看到我想要的效果。但是，在 IE8 中查看或更低的标题 DIV 包含男人的照片折叠到看起来是 0 的高度。我已经尝试过最小高度和 clearfix，但是 nada。

[http://www.adrianwaddingham.com/](http://www.adrianwaddingham.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:24:08.070

您是否尝试过设置高度并制作它`!important`，例如：

```
min-height: (yourheight)px!important; 
```

# c# - Parallel GZip Decompression of Log Files - Tweaking MaxDegreeOfParallelism for the Highest Throughput

> ID：13176529
> 
> 赞同：15
> 
> 时间：2012-11-01T11:55:08.557
> 
> 标签：c#, multithreading, performance, c#-4.0, parallel-processing

We have up to 30 GB of GZipped log files per day. Each file holds 100.000 lines and is between 6 and 8 MB when compressed. The simplified code in which the parsing logic has been stripped out, utilises the Parallel.ForEach loop.

The maximum number of lines processed peaks at MaxDegreeOfParallelism of 8 on the two-NUMA node, 32 logical CPU box (Intel Xeon E7-2820 @ 2 GHz):

```
using System;

using System.Collections.Concurrent;

using System.Linq;
using System.IO;
using System.IO.Compression;

using System.Threading.Tasks;

namespace ParallelLineCount
{
    public class ScriptMain
    {
        static void Main(String[] args)
        {
            int    maxMaxDOP      = (args.Length > 0) ? Convert.ToInt16(args[0]) : 2;
            string fileLocation   = (args.Length > 1) ? args[1] : "C:\\Temp\\SomeFiles" ;
            string filePattern    = (args.Length > 1) ? args[2] : "*2012-10-30.*.gz";
            string fileNamePrefix = (args.Length > 1) ? args[3] : "LineCounts";

            Console.WriteLine("Start:                 {0}", DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ss.fffffffZ"));
            Console.WriteLine("Processing file(s):    {0}", filePattern);
            Console.WriteLine("Max MaxDOP to be used: {0}", maxMaxDOP.ToString());
            Console.WriteLine("");

            Console.WriteLine("MaxDOP,FilesProcessed,ProcessingTime[ms],BytesProcessed,LinesRead,SomeBookLines,LinesPer[ms],BytesPer[ms]");

            for (int maxDOP = 1; maxDOP <= maxMaxDOP; maxDOP++)
            {

                // Construct ConcurrentStacks for resulting strings and counters
                ConcurrentStack<Int64> TotalLines = new ConcurrentStack<Int64>();
                ConcurrentStack<Int64> TotalSomeBookLines = new ConcurrentStack<Int64>();
                ConcurrentStack<Int64> TotalLength = new ConcurrentStack<Int64>();
                ConcurrentStack<int>   TotalFiles = new ConcurrentStack<int>();

                DateTime FullStartTime = DateTime.Now;

                string[] files = System.IO.Directory.GetFiles(fileLocation, filePattern);

                var options = new ParallelOptions() { MaxDegreeOfParallelism = maxDOP };

                //  Method signature: Parallel.ForEach(IEnumerable<TSource> source, Action<TSource> body)
                Parallel.ForEach(files, options, currentFile =>
                    {
                        string filename = System.IO.Path.GetFileName(currentFile);
                        DateTime fileStartTime = DateTime.Now;

                        using (FileStream inFile = File.Open(fileLocation + "\\" + filename, FileMode.Open))
                        {
                            Int64 lines = 0, someBookLines = 0, length = 0;
                            String line = "";

                            using (var reader = new StreamReader(new GZipStream(inFile, CompressionMode.Decompress)))
                            {
                                while (!reader.EndOfStream)
                                {
                                    line = reader.ReadLine();
                                    lines++; // total lines
                                    length += line.Length;  // total line length

                                    if (line.Contains("book")) someBookLines++; // some special lines that need to be parsed later
                                }

                                TotalLines.Push(lines); TotalSomeBookLines.Push(someBookLines); TotalLength.Push(length);
                                TotalFiles.Push(1); // silly way to count processed files :)
                            }
                        }
                    }
                );

                TimeSpan runningTime = DateTime.Now - FullStartTime;

                // Console.WriteLine("MaxDOP,FilesProcessed,ProcessingTime[ms],BytesProcessed,LinesRead,SomeBookLines,LinesPer[ms],BytesPer[ms]");
                Console.WriteLine("{0},{1},{2},{3},{4},{5},{6},{7}",
                    maxDOP.ToString(),
                    TotalFiles.Sum().ToString(),
                    Convert.ToInt32(runningTime.TotalMilliseconds).ToString(),
                    TotalLength.Sum().ToString(),
                    TotalLines.Sum(),
                    TotalSomeBookLines.Sum().ToString(),
                    Convert.ToInt64(TotalLines.Sum() / runningTime.TotalMilliseconds).ToString(),
                    Convert.ToInt64(TotalLength.Sum() / runningTime.TotalMilliseconds).ToString());

            }
            Console.WriteLine();
            Console.WriteLine("Finish:                " + DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ss.fffffffZ"));
        }
    }
} 
```

Here's a summary of the results, with a clear peak at MaxDegreeOfParallelism = 8:

![enter image description here](../Images/e58ef7d1bafd7732c436a77751898172.png)

The CPU load (shown aggregated here, most of the load was on a single NUMA node, even when DOP was in 20 to 30 range):

![enter image description here](../Images/9a3b41d63a6c8946d425f3a1006bf7ce.png)

The only way I've found to make CPU load cross 95% mark was to split the files across 4 different folders and execute the same command 4 times, each one targeting a subset of all files.

Can someone find a bottleneck?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T13:30:27.877

It's likely that one problem is the small buffer size used by the default `FileStream` constructor. I suggest you use a larger input buffer. Such as:

```
using (FileStream infile = new FileStream(
    name, FileMode.Open, FileAccess.Read, FileShare.None, 65536)) 
```

The default buffer size is 4 kilobytes, which has the thread making many calls to the I/O subsystem to fill its buffer. A buffer of 64K means that you will make those calls much less frequently.

I've found that a buffer size of between 32K and 256K gives the best performance, with 64K being the "sweet spot" when I did some detailed testing a while back. A buffer size larger than 256K actually begins to reduce performance.

Also, although this is unlikely to have a major effect on performance, you probably should replace those `ConcurrentStack` instances with 64-bit integers and use `Interlocked.Add` or `Interlocked.Increment` to update them. It simplifies your code and removes the need to manage the collections.

Update:

Re-reading your problem description, I was struck by this statement:

> The only way I've found to make CPU load cross 95% mark was to split the files across 4 different folders and execute the same command 4 times, each one targeting a subset of all files.

That, to me, points to a bottleneck in opening files. As though the OS is using a mutual exclusion lock on the directory. And even if all the data is in the cache and there's no physical I/O required, processes still have to wait on this lock. It's also possible that the file system is writing to the disk. Remember, it has to update the Last Access Time for a file whenever it's opened.

If I/O really is the bottleneck, then you might consider having a single thread that does nothing but load files and stuff them into a `BlockingCollection` or similar data structure so that the processing threads don't have to contend with each other for a lock on the directory. Your application becomes a producer/consumer application with one producer and N consumers.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:58:11.187

The reason for this is usually that threads synchronize too much.

Looking for synchronization in your code I can see heavy syncing on the collections. Your threads are pushing the lines individually. This means that each line incurs at best an interlocked operation and at worst a kernel-mode lock wait. The interlocked operations will contend heavily because all threads race to get their current line into the collection. They all try to update the same memory locations. This causes cache line pinging.

Change this to push lines in bigger chunks. Push line-arrays of 100 lines or more. The more the better.

In other words, collect results in a thread-local collection first and only rarely merge into the global results.

You might even want to get rid of the manual data pushing altogether. This is what PLINQ is made for: Streaming data concurrently. PLINQ abstracts away all the concurrent collection manipulations in a well-performing way.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T08:24:35.673

I don't think Parallelizing the disk reads is helping you. In fact, this could be seriously impacting your performance by creating contention in reading from multiple areas of storage at same time.

I would restructure the program to first do a single-threaded read of raw file data into a memory stream of byte[]. Then, do a Parallel.ForEach() on each stream or buffer to decompress and count the lines.

You take an initial IO read hit up front but let the OS/hardware optimize the hopefully mostly sequential reads, then decompress and parse in memory.

Keep in mind that operations like decomprless, Encoding.UTF8.ToString(), String.Split(), etc. will use large amounts of memory, so clean up references to/dispose of old buffers as you no longer need them.

I'd be surprised if you can't cause the machine to generate some serious waste hit this way.

Hope this helps.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T05:58:12.197

The problem, I think, is that you are using blocking I/O, so your threads cannot fully take advantage of parallelism.

If I understand your algorithm right (sorry, I'm more of a C++ guy) this is what you are doing in each thread (pseudo-code):

```
while (there is data in the file)
    read data
    gunzip data 
```

Instead, a better approach would be something like this:

```
N = 0
read data block N
while (there is data in the file)
    asyncRead data block N+1
    gunzip data block N
    N = N + 1
gunzip data block N 
```

The `asyncRead` call does not block, so basically you have the decoding of block N happening concurrently with the reading of block N+1, so by the time you are done decoding block N you might have block N+1 ready (or close to be ready if I/O is slower than decoding).

Then it's just a matter of finding the block size that gives you the best throughput.

Good luck.

# python - 如何在pygame中放置滚动条？

> ID：13176533
> 
> 赞同：0
> 
> 时间：2012-11-01T11:55:11.113
> 
> 标签：python, pygame

**我想知道如何在 pygame 窗口中放置滚动条？**

**请帮忙，谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-08-27T01:23:29.053

我认为没有pygame内置的方法可以在屏幕上放置滚动条，也许你必须自己做。但是如果你想尝试一下，有一个名为[pygame-menu](https://pygame-menu.readthedocs.io/en/4.1.3/)的包，你可以使用 pip 安装并导入到你的项目中。有了这个东西，你可以使用 pygame-menu 的小部件组织你的屏幕对象，如果屏幕的大小小于显示所有菜单小部件所需的大小，它会自动创建一个滚动条以允许用户查看它们。

# jquery - jquery获取单击按钮值将其发送到列表框

> ID：13176536
> 
> 赞同：0
> 
> 时间：2012-11-01T11:55:32.067
> 
> 标签：jquery

我需要单击按钮值并将其发送到列表框。下面是我的代码，我在代码中间注释我需要获取被单击的按钮的值并将其发送到列表框

```
<asp:ListBox ID="ListBox2" runat="server"></asp:ListBox>

        $(function () {
            var count = 0;
            $('input[type=button]').on('click', function (e) {
                e.preventDefault();
                count += 1;
                if (count % 2 === 0) {
                    $(this).css('background-color', '#6FA478');
                   //I have to get here the value of every click button and send it to listbox 

                }
                else {
                    $(this).css('background-color', '');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:59:15.290

试试这个，你有评论的地方

```
var value = $(this).val();
$("[id$=ListBox2]").append('<option value="'+value+'">'+value+'</option>'); 
```

所以代码应该像

```
$(function () {
    var count = 0;
    $('input[type=button]').on('click', function (e) {
        e.preventDefault();
        count += 1;
        if (count % 2 === 0) {
            $(this).css('background-color', '#6FA478');
            //I have to get here the value of every click button and send it to listbox 
            var value = $(this).val();
            $("[id$=ListBox2]").append('<option value="'+value+'">'+value+'</option>');
        }
        else {
            $(this).css('background-color', '');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:00:54.867

试试这个来获取当前点击的按钮值

```
$(this).val(); 
```

或者

```
 this.value 
```

# sql - 不等于 case 语句 SQL 的结果

> ID：13176538
> 
> 赞同：0
> 
> 时间：2012-11-01T11:55:32.873
> 
> 标签：sql

我有一个 SELECT 查询

```
SELECT bill.accountid, bill.price, bill.id, price.inclusive, price.exclusive
from bill inner join price on bill.id = price.id
where bill.price <> 
CASE bill.id WHEN 1 THEN price.Inclusive
CASE bill.id WHEN 2 THEN price.Inclusive
CASE bill.id WHEN 3 THEN price.exclusive 
```

如何在没有单独功能的情况下实现这个 where 子句

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:59:22.263

为什么不直接使用这个，一个在不同值的标准之间`WHERE`有一个的子句：`OR``bill.id`

```
SELECT bill.accountid, 
  bill.price, 
  bill.id, 
  price.inclusive, 
  price.exclusive
from bill 
inner join price 
  on bill.id = price.id
where 
(
  bill.id IN (1, 2)
  and bill.price <> price.Inclusive
)
OR
(
  bill.id = 3
  and bill.price <> price.exclusive
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:58:47.647

```
SELECT
  b.accountid, 
  b.price, 
  b.id, 
  p.inclusive, 
  p.exclusive
FROM bill b
INNER JOIN price p ON b.id = p.id
WHERE b.price <> p.Inclusive
  AND b.id IN (1, 2, 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:09:26.417

我相信 bill.id 已编入索引，并且可以使用条件语句有效地访问它，

您的查询无法使用 bill.id 索引，因为它使用 bill.id 计算原始值。

所以，我的回答是，将你的结果集分成更小的并直接比较。

（使用或条件也是很好的答案。）

```
SELECT bill.accountid, bill.price, bill.id, price.inclusive, price.exclusive
from bill inner join price on bill.id = price.id
where bill.id in (1, 2) and bill.price <> price.Inclusive
UNION ALL
SELECT bill.accountid, bill.price, bill.id, price.inclusive, price.exclusive
from bill inner join price on bill.id = price.id
where bill.id = 3 and bill.price <> price.exclusive; 
```

# objective-c - 自动滚动 UISCrollView 到它的内容位置

> ID：13176539
> 
> 赞同：1
> 
> 时间：2012-11-01T11:55:40.520
> 
> 标签：objective-c

在我的应用程序中，我有一个 UIScrollView（在水平滚动模式下）和一个按钮，当用户点击该按钮时，将在滚动视图中添加一个视图快照作为 uiimageview，我已经这样做了，

```
UIGraphicsBeginImageContext(storyCreateView.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[storyCreateView.layer renderInContext:context];

UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 

newscene.image=screenShot;
[galleryView addSubview:newscene]; 
```

当用户添加更多图像时，图像隐藏在滚动视图下我想自动滚动到右侧，以便用户能够看到他最后添加的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:38:49.730

您可以使用`setContentOffset:animated:`. 它设置与接收者原点相对应的内容视图原点的偏移量。

希望它对你有用。

# android - 在 drupal 中创建 web 服务

> ID：13176541
> 
> 赞同：3
> 
> 时间：2012-11-01T11:55:47.307
> 
> 标签：android, web-services, drupal, drupal-7, drupal-modules

我们可以在 Drupal 中创建 Web 服务吗？我们的 Web 开发团队正在 Drupal 中创建一个网站，他们想为此构建一个 android 应用程序，为此我需要使用 Web 服务来访问数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:02:07.880

查看[服务模块](http://drupal.org/project/services)

> 将外部应用程序与 Drupal 集成的标准化解决方案。服务回调可以与多个接口一起使用，例如 REST、XMLRPC、JSON、JSON-RPC、SOAP、AMF 等。这允许 Drupal 站点通过多个接口提供 Web 服务，同时使用相同的回调代码。

它就是为此而建造的。`Drupalize.me android app`建立在[服务模块](http://drupal.org/project/services)之上，对于许多安卓应用程序也是如此。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T12:49:22.380

我们可以在 Drupal 中创建 Web 服务吗？

> 是的，你可以做到。

我是通过 JSON 网络服务完成的。

# jquery - jplayer 中的 flash 回退在 Firefox 16 和 Opera 12 中不起作用

> ID：13176543
> 
> 赞同：0
> 
> 时间：2012-11-01T11:55:48.650
> 
> 标签：jquery, jquery-plugins, jplayer

我正在制作一个我正在使用 jplayer 的音乐网站。播放器在 chrome 中工作得很好，但在所有其他浏览器中都失败了。我所有的浏览器都是最新的。我的 Flash 播放器也是最新的。当前版本是 Flash Player 11.4。我浏览了 jplayer 文档，但没有帮助。所以这是我的代码

```
 $(document).ready(function(){
            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    var url1,url2;
                    $('.singles').click(function(event){
                        var x = event.target;
                        var y = x.replace(".mp3",".oga");
                        url1 = "http://localhost:8080/WebApplication1/songs/"+x.innerHTML;
                        url2 = "http://localhost:8080/WebApplication1/songs/"+y;
                        $("#jquery_jplayer_1").jPlayer("setMedia",{
                            mp3: url1,
                            oga: url2
                        }).jPlayer("play");
                    });
                },
                swfPath: "/jPlayer/Jplayer.swf",
                solution: "html/flash",
                supplied: "mp3, oga",
                wmode: "window"
            });
        }); 
```

我为 oga 添加了一些代码，因为有人告诉我 Firefox 和 Opera 需要 oga 而不是提供 mp3。即使在为 oga 添加代码之前，同样的问题仍然存在

我在 jplayer 上看到以下文本： 需要更新 要播放媒体，您需要将浏览器更新到最新版本或更新您的 Flash 插件。

我应该怎么办？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:39:19.843

我认为这是关于 swf 文件的路径。您不应该将文件名放在路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:25:39.847

解决方案选项应以逗号分隔，而不是 / 分隔。

# windows-phone-8 - Windows Phone 8 支持捕获 SMS 或来电？

> ID：13176545
> 
> 赞同：15
> 
> 时间：2012-11-01T11:56:03.000
> 
> 标签：windows-phone-8

我们可以在 Windows phone 8 上编写 3rd-party 应用程序来捕获 SMS 或来电吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T14:00:35.943

> 我们可以编写第 3 部分应用程序来在 Windows phone 8 上捕获 SMS 或来电吗？

不。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-05T06:33:17.007

根据之前的答案，这些 API 目前只保留给受信任的合作伙伴（移动运营商、OEM、知名品牌等）。只是没有足够的开发人员要求将其包含在 WP8 中。

如果你觉得你有一个合法的用例来拦截传入的通信，请在[windows phone 开发人员 uservoice 上分享这个主题的建议](http://wpdev.uservoice.com/forums/110705-app-platform/suggestions/1905841-please-allow-readonly-access-to-call-history-and)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T13:01:12.843

有**Windows.Phone.Networking.NetworkOperators.SmsInterceptor**类，但旁边有一条注释“此 API 不打算直接从您的代码中使用。” 所以我不确定我们是否可以实际使用它？

# ruby - 使用 rspec 中的输入文件进行测试。如何组织？

> ID：13176556
> 
> 赞同：5
> 
> 时间：2012-11-01T11:56:40.210
> 
> 标签：ruby, rspec

我有以下结构：

```
MyProject --> Main folder of my project.
MyProject/my_class.rb
MyProject/inputs/input1.txt
MyProject/inputs/input2.txt
MyProject/rspec/spec_helper.rb
MyProject/rspec/my_class_spec.rb 
```

什么是一种优雅的方式或最常见的方式，以便我可以在 my_class_spec.rb 中使用 input1.txt 和 input2.txt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:22:54.683

您可以像这样从 my_class_spec.rb 访问 input1.txt 的内容：

```
file1_content = File.read(File.expand_path '../../inputs/input1.txt', __FILE__) 
```

# php - 如果条件不能正常工作

> ID：13176559
> 
> 赞同：0
> 
> 时间：2012-11-01T11:56:53.050
> 
> 标签：php, if-statement

我在我的代码中实现了 if 条件，条件是 john 是否设置为显示 abc.jpg 否则为 xyz.jpg 但它不起作用它每次都向我显示 xyz .jpg 图像。请帮我。如果我的语法错误，请告诉我错误在哪里。

```
<?php
if($extra = "John" || "Kevin" || "Cameron" || "Santosh" || "Ali"){ ?>
    <img src="http://yespricer.com/theme/Freshness/images/maria2.png" width="75"/>
<?php }else{ ?>
    <img src="http://yespricer.com/theme/Freshness/images/maria.png" width="75"/>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:00:05.773

您每次都需要检查是否`$extra`等于值。您的代码只执行一次。您可以将数组中的所有值分组并检查您的值是否在其中：

```
$names = array("John", "Kevin", "Cameron", "Santosh", "Ali");
if(in_array($extra, $names)) {
    // $extra is in $names
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:03:53.590

与上述其他人建议的方式非常相似，但在我看来更整洁

```
<?php
    $name = "";
    if($extra == "John" || $extra =="Kevin" || $extra =="Cameron" || $extra =="Santosh" || $extra == "Ali"){ 
        $name = "maria2.png";
    }else{
        $name = "maria.png";
    }
?>
<img src="http://yespricer.com/theme/Freshness/images/<?php echo $name;?>" width="75" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:58:03.703

它应该是

```
if($extra == "John" || $extra == "Kevin" || 
   $extra == "Cameron" || $extra == "Santosh" || 
   $extra == "Ali"){

} 
```

**编辑**

正如**des**建议的那样`in_array`，您也可以使用此解决方案

```
$names = array("John", "Kevin", "Cameron", "Santosh", "Ali");

echo "<img src='http://yespricer.com/theme/Freshness/images/"
  .(in_array($extra, $names)?'maria1':'maria')
  .".png' width='75'/>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:06:39.293

### 更好更有效的方法是使用`in_array()`：

```
<?php
if(in_array($extra, array("John", "Kevin", "Cameron", "Santosh", "Ali")){ ?>
    <img src="http://yespricer.com/theme/Freshness/images/maria2.png" width="75"/>
<?php }else{ ?>
    <img src="http://yespricer.com/theme/Freshness/images/maria.png" width="75"/>
<?php } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T12:08:34.880

**你不能使用**

```
if($extra = "John" || "Kevin" || "Cameron" || "Santosh" || "Ali"){ 
```

**原因**

因为如果你从左到右，$extra == "John"... 好的，这很好，因为它可以根据 $extra 的值评估为真或假。但是，下一个是这样的：

```
if ("Kevin") { 
```

由于非空字符串的计算结果为 true，因此您不妨这样写：

```
if($extra = "John" || true || true || true || true){ 
```

由于您使用的是逻辑 OR，因此 $extra 是什么并不重要，因为每一个都会导致 if 条件为 TRUE。

**解决方案 1 - 凌乱的条件**

```
if($extra == "John" || $extra == "Kevin" || $extra == "Cameron" 
|| $extra == "Santosh" || $extra == "Ali"){ 
```

**解决方案 2 - 按照 des 的建议**

```
$names = array("John", "Kevin", "Cameron", "Santosh", "Ali");
if(in_array($extra, $names)) {
    // $extra is in $names
} 
```

**解决方案 3 - 比 ifs 更干净，比数组更快且仍然灵活**

```
switch ($extra) {
    case "John":
    case "Kevin":
    case "Cameron":
    case "Santosh":
    case "Ali":
        //code here for TRUE, if any of those names match $extra

        break;
    default:
        //code here for FALSE, if non of the names match $extra

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T12:43:36.630

如何更多地了解正在发生的事情？将您的条件分配给一个变量：

```
$result = $extra = "John" || "Kevin" || "Cameron" || "Santosh" || "Ali"; 
```

然后让你的情况可见：

```
var_dump($result); 
```

这会给你：

```
bool(true) 
```

这意味着条件导致布尔值`true`（[demo](http://codepad.org/GRafeqbn)）。为什么会发生这种情况，您现在可能会问自己。为此，您可以将条件分开：

```
"John" || "Kevin" || "Cameron" || "Santosh" || "Ali" 
```

这是`true`PHP 中的表达式。您可以将其替换为`true`. 接下来的部分：

```
$extra = true; 
```

这很容易。您分配`true`给变量`$extra`. 现在是最后一部分：

```
$result = true; 
```

同样，现在将表达式的结果分配给`$result`so 你看`true`。

相反，您可能想检查变量是否`$extra`包含任何名称。PHP 中有一些注意事项可以正确地做到这一点。首先让您的生活更轻松，并将您想要检查的所有名称放入一个数组中：

```
$names = array("John", "Kevin", "Cameron", "Santosh", "Ali"); 
```

然后*严格*检查`$extra`该数组中的内容：

```
$result = in_array($extra, $names, true); 
```

请注意此处的第三个参数`true`，即用于严格检查（请参阅[`in_array`^(*Docs*)](http://php.net/in_array)）。否则，您可能会看到如果`$extra`是`0`这样`$result`的话。然后处理结果，但让你的生活再次变得轻松，你只需要一个变量：

```
$image = $result ? 'maria2.png' : 'maria.png'; 
```

然后最后做输出：

```
printf(
    '<img src="http://yespricer.com/theme/Freshness/images/%s" width="75"/>'
    , $image
); 
```

你已经解决了你的问题。完整的代码示例：

```
$names  = array("John", "Kevin", "Cameron", "Santosh", "Ali");
$result = in_array($extra, $names, true);
$image  = $result ? 'maria2.png' : 'maria.png';
printf(
    '<img src="http://yespricer.com/theme/Freshness/images/%s" width="75"/>'
    , $image
); 
```

[演示](http://codepad.org/iywZshyj)

另见：

*   [有没有更简单的方法来检查变量是否等于各种数字？](https://stackoverflow.com/q/1636229/367456)
*   [结合许多 || 在 if 语句中](https://stackoverflow.com/q/8566641/367456)

# macos - 尝试从源代码构建 Tomcat 6：Ant 不下载库

> ID：13176561
> 
> 赞同：0
> 
> 时间：2012-11-01T11:57:00.923
> 
> 标签：macos, tomcat, ant

我正在尝试从提供的源代码在我的机器上构建 Tomcat 6 或 7。

我已经检查了存储库中的源代码并运行了 ant 构建。

在构建的最开始，Ant 需要下载 Tomcat 需要的库。在第 6 版中，它是通过单独的命令“ant download”完成的，在第 7 版中，该命令被合并到 build.xml 中。

问题是 Ant 在尝试构建这两个版本时无法下载 Tomcat 构建所需的库。

它停在这里：

> 尝试下载：[get] 获取： http: [//www.apache.org/dist/tomcat/tomcat-connectors/native/1.1.24/source/tomcat-native-1.1.24-src.tar.gz](http://www.apache.org/dist/tomcat/tomcat-connectors/native/1.1.24/source/tomcat-native-1.1.24-src.tar.gz) [get] 到：/Users/dmitrijskorov/libraries/tomcat-native-1.1.24/tomcat-native.tar.gz

打印后没有任何反应。没有错误，没有结束执行。该文件本身是在下载文件夹中创建的，但如果我手动下载它，它的大小是 111KB 而不是 262KB。该服务器的 Ping 也评估正常。

看起来我的 Ant 下载任务有问题。

可能原因是我需要向 Ant 提供一些代理设置。但我不知道如何找出我的代理设置。所有浏览器和操作系统中的所有设置都指向代理的自动检测，因此我无法在 Ant 构建中设置代理。而且我根本不知道我是否需要这个。

MacOs Lion、Tomcat 6 或 7、Java 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:12:10.347

使用 Ant 1.7 或更高版本，您可以使用`-autoproxy`Ant 的选项来告诉它使用来自操作系统的代理设置

```
ant -autoproxy download 
```

参考：[蚂蚁手册](http://ant.apache.org/manual/proxy.html)

# sql - 临时 SQL 数据字段

> ID：13176567
> 
> 赞同：0
> 
> 时间：2012-11-01T11:57:06.460
> 
> 标签：sql, sql-server-2008, stored-procedures

目前，我正在返回一个布尔值作为“1”或“0”或列的值，比如说我的一个存储过程中的列 A，它工作得很好，但是在一个应用程序中，我试图获得这样的值

```
string temp = reader.TryGetValue("ColumnA", out licenseStatus) ? temp : string.Empty; 
```

存储过程正在做这样的事情，

```
if @datafield = 1
    return 1
else if @datafield = 2 AND @datafield2 = 3
    return 0
else
    return (SELECT ColumnA.table2 FROM table1 INNER JOIN table2 on table1.id and table2.id Where @datafield3 = 0) 
```

现在我想将结果作为 ColumnA 的值返回，而不是发送“0”或“1”，因为我不允许更改应用程序中的代码。

可能吗 ？我也无法对 ColumnA 值进行任何更改。

**编辑**

> 我已经在我的问题中提到，存储过程正在做它应该做的事情，但没有使用我的代码，因为我在某个时候返回 1 或 0 并且我的代码没有将它作为 columnA ，所以它设置为空，我想返回 0 或 1 作为 ColumnA 的值，但同时我不想更改 table2 中 columnA 的值。
> 
> :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:00:08.203

您可以使用`CASE`

```
select 
    case @datafield 
    when 1 then 1 
    when 2 then 0 
    when 3 then 0 
    else ColumnA 
    end as ColumnA
from .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:38:18.423

```
if @datafield = 1
set ColumnA.table2=1
else if @datafield = 2 AND @datafield2 = 3
set ColumnA.table2= 0
else
return (SELECT ColumnA.table2 FROM table1 INNER JOIN table2 on table1.id and table2.id Where @datafield3 = 0) 
```

如果它只是一个选择查询，那么它不会更改您的表数据，而是会返回您想要的

# java - 使用 CodeModel 添加现有方法

> ID：13176568
> 
> 赞同：2
> 
> 时间：2012-11-01T11:57:10.677
> 
> 标签：java, sun-codemodel

我正在尝试使用 CodeModel 将抽象方法添加到我的接口中。这可能吗？

```
JCodeModel cm = new JCodeModel();
JClass ref = cm.ref(Sample.class); 
```

参考实际类后，我不知道应该如何添加方法？实际上我想用作 JDefinedClass。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:00:28.203

CodeModel 不用于修改现有类。但是，您可以将新类定义为抽象类：

要使用抽象方法，您必须使类抽象：

```
JCodeModel cm = new JCodeModel();
JDefinedClass ref = cm._class(JMod.ABSTRACT | JMod.PUBLIC, "AbstractSampe", ClassType.CLASS); 
```

然后使方法抽象它只是声明它们的问题：

```
ref.method(JMod.ABSTRACT | JMod.PUBLIC, codeModel.VOID, "abstractMethod"); 
```

# linux - Cron 不运行 bash 脚本

> ID：13176569
> 
> 赞同：0
> 
> 时间：2012-11-01T11:57:12.763
> 
> 标签：linux, bash

我有 cron

> SHELL=/bin/bash
> 
> PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
> 
> ```
> * * * * * root  /usr/bin/flock -xn /var/lock/script.lock -c '/bin/bash /root/Dropbox/1.sh' 
> ```

我的 1.sh

```
#!/bin/bash -l 

PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin 

x=1
while [ $x -le 3 ] 
do 
URL=$(head -n 1 /root/Dropbox/query.txt) 
lynx -dump  $URL | egrep '^http' > /root/Dropbox/urls.txt 
x=$(( $x + 1 )) 
done 
```

默认为 Bash

# 回声 $SHELL

/bin/bash

为什么 cron 不运行 1.sh ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:21:33.733

删除 crontab 行中的“root”：

```
* * * * * /usr/bin/flock -xn /var/lock/script.lock -c '/bin/bash /root/Dropbox/1.sh' 
```

如果您需要 root 权限，请放入 root 用户的 crontab。
使用“root”，您还会在 syslog 或消息日志中发现错误。

当然要确保**cron 守护进程正在运行**：ps -ef | grep cron

添加：我已经通过简单的触摸文件（在 ubuntu 上）对其进行了测试：
contab 行：

```
* * * * * /usr/bin/flock -xn /var/lock/script.lock -c '/bin/bash ~/1.sh' 
```

1.sh：

```
#!/bin/bash
touch /tmp/hallo 
```

添加：（查看 lynx 命令）它适用于我的 1.sh 脚本版本。

```
#!/bin/bash

x=1
while [ $x -le 3 ]
do
URL="http://www.subir.com/lynx.html"
lynx -dump  $URL | egrep '.*\. http' > urls.txt
x=$(( $x + 1 ))
done 
```

我更改了 egrep 上的正则表达式。您的 lynx 输出可能不同（其他版本的 lynx）。我使用了一个固定的测试 URL（lynx 手册页）。urls.txt 将被填充。脚本由 cron 触发。while 将没有效果，注意循环逻辑将在下次运行时更改。

```
stephan@coppi:~$ more urls.txt 
   1\. http://lynx.isc.org/current/index.html
   2\. http://lynx.isc.org/current/lynx2-8-8/lynx_help/lynx_help_main.html
   3\. http://lynx.isc.org/current/lynx2-8-8/lynx_help/Lynx_users_guide.html
   4\. http://lynx.isc.org/lynx2.8.7/index.html
   5\. http://lynx.isc.org/lynx2.8.7/lynx2-8-7/lynx_help/lynx_help_main.html
   6\. http://lynx.isc.org/lynx2.8.7/lynx2-8-7/lynx_help/Lynx_users_guide.html
   7\. http://lynx.isc.org/mirrors.html
   8\. http://lists.nongnu.org/mailman/listinfo/lynx-dev/
   9\. http://lynx.isc.org/signatures.html
  10\. http://validator.w3.org/check?uri=http%3A%2F%2Flynx.isc.org%2Findex.html 
```

# java - JAVA - 网络日志文件

> ID：13176574
> 
> 赞同：1
> 
> 时间：2012-11-01T11:57:37.287
> 
> 标签：java, logging, web

对不起，我的英语不好。

我有一个来自 Web 服务器的日志文件，有 120,000 行。

输入文件示例：

10.160.0.10;16.11.2011 12:56;/;-;"Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0" 10.160.0.100;14.11.2011 7:22;/;-; "Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0" 10.160.0.100;14.11.2011 10:45;/;-;"Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/ 20100101 Firefox/4.0" 10.160.0.100;14.11.2011 10:53;/;-;"Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0）"

我需要将第一行中的 IP 地址与第二行中的 IP 进行比较，同时将包含 Web 浏览器版本的最后一个框与第二行中的版本进行比较。第二行与第三行等。

如果第一个 IP 与第二个 IP 相同，并且第一个版本与第二个版本相同，则添加到行尾信息示例 #1（这意味着它是第一个用户）

如果 IP 或版本不同，则添加到第 2 行的末尾（第二个用户）。

它根据 IP 地址和 User-Agent 字段（基于 Web 浏览器的不同版本）识别用户。

输出文件示例：

10.160.0.10;16.11.2011 12:56;/;-;"Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0";#1 10.160.0.100;14.11.2011 7:22;/ ;-;"Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0";#2 10.160.0.100;14.11.2011 10:45;/;-;"Mozilla/5.0 (Windows NT 5.1; rv:2.0) Gecko/20100101 Firefox/4.0";#2 10.160.0.100;14.11.2011 10:53;/;-;"Mozilla/4.0 (兼容; MSIE 8.0; Windows NT 5.1; Trident/4.0)";# 3

你知道怎么做吗？

使用哪种方法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:06:23.377

这并不完整，也不是最理想的，但基本上是您需要的一切。

```
List list = new ArrayList();
Scanner in = new Scanner(file);
while(in.hasNext()) {
    String line = in.nextLine();
    String[] splitLine = line.split(";",5);
    String identifier = splitLine[0] + splitLine[4];
    if(list.contains(identifier)) {
        line = line + " #" + (list.indexOf(identifier) + 1));
    }
    else {
        line = line + " #" + (list.size() + 1);
        list.add(identifier);
    }
    System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:00:20.653

`String.split`方法，`;`用作拆分字符。

# crash - aptana 在 svn 更新时崩溃

> ID：13176579
> 
> 赞同：3
> 
> 时间：2012-11-01T11:57:56.023
> 
> 标签：crash, aptana

在 Windows 上运行 Aptana Studio 3，构建：3.2.2.201208201020。

当我尝试组合/更新到 HEAD/ 时，它会崩溃并关闭。当我回到svn时，它被锁定了，我需要清理/刷新，但它会再次崩溃。

这是hs_err_pid的粘贴。*_* _.log 文件：[http ://pastebin.com/aiuN6DMU](http://pastebin.com/aiuN6DMU)

谢谢你

# version-control - 取消搁置重命名+添加后，TFS2010 工作区损坏

> ID：13176587
> 
> 赞同：2
> 
> 时间：2012-11-01T11:58:23.653
> 
> 标签：version-control, tfsbuild

我们使用 TFS2010 源代码控制、门控签入和构建服务。为了节省时间，我们使用增量构建（Clean Workspace = None）。

最近，一位开发人员在他的 Visual Studio 2010 中做了以下操作：

*   将 MyClass.cs 重命名为 Base.cs
*   添加新的 MyClass.cs

他试着检查一下。但是，门控签入构建在“获取工作区”步骤中失败： `BuildError: The auto merge option is not supported for the conflict on item .`

之后，构建代理的工作区似乎保持在某种不一致的状态。其他人的签入在该搁置集中包含的其他文件上产生了各种奇怪的构建错误。

为了解决这个问题，我们最终手动删除了工作区，这解决了问题（我们也可以暂时设置 Clean Workspace = All）。

那么：这是 - 带有重命名+添加 SC 操作的搁置集会破坏工作区 - 一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-08T14:21:13.973

我们为我们的数据库项目使用 .sql 文件开发了这个问题。它一直工作正常，然后我们开始看到这个错误（C# 文件没有引起任何问题）。

我按照 Betty 在 OP 的评论中提到的那样设置了“Clean Workspace = All”，并进行了测试签入。这似乎解决了问题。我像以前一样重置了“清洁工作区 = 输出”，现在一切似乎都运行良好。

# cordova - Android 应用程序因使用画布操作而崩溃。科尔多瓦 2.0.0/2.1.0

> ID：13176588
> 
> 赞同：0
> 
> 时间：2012-11-01T11:58:23.890
> 
> 标签：cordova

我的应用程序使用 cordova (v 2.1.0) 使用平板电脑的摄像头拍摄照片并将它们渲染到画布上。我使用自己的函数在 javascript 中移动和放大/缩小此图像。我的应用程序在几次缩放或移动操作后重新启动。LogCat 的崩溃报告如下。

```
DEBUG/CordovaWebView(4897): >>> loadUrlNow()
DEBUG/DroidGap(4897): onMessage(onNativeReady,null)
DEBUG/DroidGap(4897): onMessage(onPageFinished,file:///android_asset/www/index.html)
DEBUG/chromium(4897): Unknown chromium error: -400
DEBUG/DroidGap(4897): onMessage(spinner,stop)
DEBUG/CordovaLog(4897): JSCallback Error: Request failed with status 0
DEBUG/CordovaLog(4897): file:///android_asset/www/js/cordova-2.1.0.js: Line 3743 : JSCallback Error: Request failed with status 0
INFO/Web Console(4897): JSCallback Error: Request failed with status 0 at file:///android_asset/www/js/cordova-2.1.0.js:3743
DEBUG/JsMessageQueue(4897): Set native->JS mode to 0
DEBUG/dalvikvm(2586): GC_CONCURRENT freed 431K, 8% free 9225K/9927K, paused 3ms+1ms
DEBUG/Beautiful Widgets(4120000)(4940): WidgetRefreshService 
```

当我移动或缩放画布时，没有调用 Cordova API 函数。比为什么我的应用程序崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:25:46.853

通过用 span 标签替换链接解决了这个问题。我的猜测是，cordova 捕获了链接上的所有点击/触摸启动，尽管点击事件已被捕获。然后，cordova 将请求发送到其本地网络服务器。如果请求频繁，cordova 会失败。

# html - 使用 css 调整表单中选择标签的大小以查看所有选项标签

> ID：13176597
> 
> 赞同：1
> 
> 时间：2012-11-01T11:58:45.537
> 
> 标签：html, css, forms, printing

是否可以动态调整表单中选择标签中可见选项的大小？我有一个例子：

```
<select size="1">
<option value='1'>1
<option selected value='2'>2
<option value='3'>3
<option value='4'>4
</select> 
```

我希望在设计打印页面时看到所有选项（使用 css 动态设置大小）。并且还可以查看其他设计中的选定选项（颜色、粗体......）。对于调整大小，我尝试过：

```
select{
        size:4;
} 
```

但它不起作用。我至少需要一个适用于 FF、IE、Safari 的工作解决方案......

有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:07:56.527

### 你可以这样使用：

```
<select size="1" size="4">
    <option value='1'>1</option>
    <option selected value='2'>2</option>
    <option value='3'>3</option>
    <option value='4'>4</option>
</select>​​​​​​​​​​​​ 
```

并且不要忘记关闭`</option>`

# java - 在 Java 应用程序中使用 Mahout

> ID：13176601
> 
> 赞同：2
> 
> 时间：2012-11-01T11:58:56.043
> 
> 标签：java, hadoop, mahout

我想编写一个使用潜在 Drichlet 分配 (LDA) 的 Java 应用程序（用于大学）。我发现提供 LDA 的唯一框架是 Mahout。尽管我不认为自己是 Java Pro（我来自 PHP），但我在 Java 编程方面有相当多的经验。该应用程序不会在分布式计算环境中使用，因此 mahout / hadoop 方式可能是一种超越顶部的方式，但如果我是对的，它至少应该可以工作。

我的问题： Mahout wiki 等并没有真正帮助我，事实上我一个字都不懂。我不想以那种“终端方式”使用 mahout。我只想将类加载到我的应用程序中，然后做类似的事情：

文档 = obj.load(文档); mahout.doLDA（文件）；

（我知道这不会那么容易，但我相信你知道我的意思）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:19:56.947

Mahout 的库可以在*本地模式下*使用，无需完整的 Hadoop 集群。您可以查看[“Mahout in Action”一书中的示例，](https://github.com/tdunning/MiA)了解如何做到这一点。

# bundle - laravel 重命名 url 中的 lara_admin 包名称

> ID：13176602
> 
> 赞同：0
> 
> 时间：2012-11-01T11:58:57.767
> 
> 标签：bundle, laravel

我正在`lara_admin`为我的管理面板使用捆绑包，该面板可在`msmohan.com/lara_admin`路径下访问。

我不想`lara_admin`在网址中显示。那么谁能告诉我是否有任何选项可以重命名 url 链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:36:49.437

当您安装一个模块并注册它时，您可以使用以下配置进行设置：

```
'lara_admin' => array(
    'handles' => 'lara_admin',
    'auto' => true,
), 
```

当包注册路由时，它使用该`handles`键作为路由的基础。因此，在捆绑包的`routes.php`文件中，您可以看到：

```
Route::get('(:bundle)/login', 'lara_admin::sessions@index'); 
```

看到了`(:bundle)`吗？这告诉 Laravel 查找`handles`密钥。因此，如果您将 lara_admin 捆绑包的注册更改为：

```
'lara_admin' => array(
    'handles' => 'admin',
    'auto' => true,
), 
```

例如，它现在将位于`/admin/login`。

# html - 多层 相互叠加，背景不同

> ID：13176609
> 
> 赞同：1
> 
> 时间：2012-11-01T11:59:18.617
> 
> 标签：html, css

我想将一个部门堆叠在另一个具有不同背景的部门之上。背景当然是透明的（.png）。这是为了在图像上重新创建图案效果并避免加载整个 1366 x 768 图像。

我的html有点像这样

```
<body>
  <div id="firstLayer">
    <div id="secondLayer">
         <div id="mainContent">
          main page content 
         </div>
    </div>
  </div>
</body> 
```

我有一个径向渐变`body`，`#firstLayer`包含主徽标，并且`#secondLayer`必须包含透明图案。

我第一次尝试 css 有点像这样

```
#secondLayer{
    background: url("../images/crtPattern.png") repeat scroll 0 0 transparent;
} 
```

但模式根本没有出现。我怎样才能把它`#secondLayer`放在上面`#firstLayer`但就在下面`#mainContent`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:05:00.873

您需要提供宽度和高度才能`#secondLayer`喜欢这个[**Demo**](http://jsfiddle.net/cQppc/1/)

```
#secondLayer{
    background: url("../images/crtPattern.png") repeat scroll 0 0 transparent;
    width: 100%;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:05:53.600

你想这样做吗 -

```
#firstLayer{ background: red; height: 500px; }
#secondLayer{ background: green; opacity: 0.6; filter:alpha(opacity=60); height: 300px; } 
```

[**演示**](http://jsfiddle.net/vW9bn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:08:36.303

如果您没有 DIV 内容，则绝对需要宽度和高度。如果这不能为您解决问题：

检查图像路径，您可以在 IMG 标签中使用相同的图像路径加载相同的图像吗？

您的样式表是内联的还是作为单独的文件加载的 - 这将影响图像文件的相对路径。

您的网络服务器区分大小写吗？您的路径大小写是否与图像匹配？

希望这可以帮助。

# bash - bash脚本在文件中写入执行时间

> ID：13176611
> 
> 赞同：16
> 
> 时间：2012-11-01T11:59:22.740
> 
> 标签：bash

我需要在 txt 文件中写下执行此命令所需的时间：

```
time ./program.exe 
```

如何在 bash 脚本中执行？

我尝试了，`>> time.txt`但这不起作用（输出不会进入文件并进入屏幕）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T12:03:45.260

进入写入文件是一项艰苦的工作`time`。`bash`这是一个`bash`内置命令。（在 Mac OS X 上，有一个外部命令 ，`/usr/bin/time`它可以完成类似的工作，但输出格式不同且不那么顽固。）

你需要使用：

```
(time ./program.exe) 2> time.txt 
```

它写入标准错误（因此是`2>`符号）。但是，如果您不使用子外壳（括号），它就不起作用；输出仍然出现在屏幕上。

* * *

或者，如果没有子外壳，您可以使用：

```
{ time ./program.exe; } 2> time.txt 
```

注意左大括号和分号后面的空格；两者都是单行所必需的。大括号必须出现在命令可能出现的位置，并且必须是独立符号。（如果你足够努力，你会想出`...;}|something`or `...;}2>&1`。不过，这两个都将大括号标识为独立符号。如果你尝试`...;}xyz`，shell 将（可能）找不到名为 的命令`}xyz`。）

* * *

> 我需要在更多终端中运行更多命令。如果我这样做：
> 
> ```
>  xterm -xrm '*hold: true' -e (time ./Program.exe) >> time.exe & sleep 2 
> ```
> 
> 它不起作用并告诉我`Syntax error: "(" unexpected`。我该如何解决？

您需要执行以下操作：

```
xterm -xrm '*hold: true' -e sh -c "(time ./Program.exe) 2> time.txt & sleep 2" 
```

关键变化是使用来自`-c`选项参数的脚本运行 shell；您可以替换`sh`为`/bin/bash`或等效名称。这应该可以解决任何“语法错误”问题。不过，我不太确定是什么触发了该错误，因此可能有一种更简单、更好的方法来处理它。也可以想象`xterm`'s`-e`选项只接受一个字符串参数，在这种情况下，我想你会使用：

```
xterm -xrm '*hold: true' -e 'sh -c "(time ./Program.exe) 2> time.txt & sleep 2"' 
```

`xterm`您可以像我一样手动 bash 。

我不确定你为什么在后台模式下运行定时程序，但这是你的问题，不是我的问题。同样，如果保持终端打开，`sleep 2`则显然没有必要。`hold: true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:06:12.907

重定向 bash builtin 的输出并不容易`time`。

一种解决方案是使用外部`time`程序：

```
/bin/time --append -o time.txt ./program.exe 
```

（在大多数系统上它是一个 GNU 程序，所以使用`info time`而不是`man`获取它的文档）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:49:27.013

time_elapsed= `(time sh -c "./program.exe") 2>&1 | grep "real" | awk '{print $(NF)}'` echo time_elapsed > file.txt 此命令应该为您提供所需文件中 bash 消耗的确切时间。

您还可以使用 2 > file.txt 将其重定向到文件，如另一个回复中所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T05:34:28.963

只需将时间命令括在 a 中`{ .. }`：

```
{ time ./program.exe; } 2>&1 
```

当然，内置时间的输出到 stderr，因此需要重定向`2>&1`。

然后，捕获输出可能看起来很棘手，让我们花`{ .. }`一点时间更轻松地阅读命令，这很有效：

```
{ { time ./program.exe; } 2>&1; } >> time.txt              # This works. 
```

但是，正确的构造应该只是将捕获反转，如下所示：

```
{ time ./program.exe; } >> time.txt  2>&1;                 # Correct. 
```

要关闭命令的任何可能输出，请将其输出重定向到 /dev/null，如下所示：

```
{ time ./program.exe >/dev/null 2>&1; } >> time.txt 2>&1   # Better. 
```

而且，由于现在 stderr 上只有输出，我们可以简单地捕获它：

```
{ time ./program.exe >/dev/null 2>&1; } 2>> time.txt       # Best. 
```

./program 的输出应该被重定向，或者它很可能在 time.txt 内结束。

# acceleo - 从其他模块访问公共元素

> ID：13176612
> 
> 赞同：0
> 
> 时间：2012-11-01T11:59:24.490
> 
> 标签：acceleo

我是 Acceleo 的新手，但我知道模块具有私有和公共元素，其他模块可以访问这些元素（通过扩展/导入这些模块）。

就我而言，我有

```
[module generate('my_model_URI')/]
[import com::example::ecore /]
... 
```

我正在导入另一个使用`ECore`命名空间的模块。

我想访问 Ecore 模块的公共元素 - 这个符号是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:09:13.237

知道了：

```
ecore::EAttribute 
```

或以一般形式：

```
Module::Element 
```

访问模块的公共元素。

# smtp - 让 Postfix 将 SMTP AUTH 传递给队列内容过滤器后

> ID：13176615
> 
> 赞同：0
> 
> 时间：2012-11-01T11:59:48.447
> 
> 标签：smtp, postfix-mta, smtp-auth

我在队列内容过滤器之后使用 Postfix 来过滤传入和传出的电子邮件。Postfix 使用 SMTP 将每封邮件注入内容过滤器。然后内容过滤器扫描邮件并将邮件重新注入后缀，就像这里一样：

[http://www.postfix.org/FILTER_README.html#advanced_filter](http://www.postfix.org/FILTER_README.html#advanced_filter)

我的 master.cf 文件如下所示：

```
## After Queue Content Filter
filter      unix  -       -       n       -       10      smtp
            -o smtp_send_xforward_command=yes
            -o disable_mime_output_conversion=yes
            -o smtp_generic_maps=
            -o myhostname=sample.hostname.com

## Re-injection listener
reinject unix  n       -       n       -       10      smtpd
    -o content_filter=
    -o receive_override_options=no_unknown_recipient_checks,no_header_body_checks,no_milters
    -o smtpd_helo_restrictions=
    -o smtpd_client_restrictions=
    -o smtpd_sender_restrictions=
    -o smtpd_recipient_restrictions=permit_mynetworks,reject
    -o mynetworks=127.0.0.0/8
    -o smtpd_authorized_xforward_hosts=127.0.0.0/8 
```

现在，这按预期工作，一切似乎都很好......除了......我需要知道电子邮件是否使用 SMTP 身份验证发送。现在，使用 smtp_send_xforward_command=yes 给了我很多关于远程发件人的信息，但是没有关于电子邮件是否已经过身份验证的信息。有没有办法让 Postfix 告诉我的内容过滤器是否已通过身份验证的用户发送了电子邮件，如果是，是哪个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:01:47.477

您可以使用：

[smtpd_sasl_authenticated_header=是](http://www.postfix.org/postconf.5.html#smtpd_sasl_authenticated_header)

将用户名添加到 Received 标头，内容过滤器可以对其进行解析以确定身份验证。

# php - 如何在 joomla 2.5 中构建 sql 选择查询？

> ID：13176616
> 
> 赞同：5
> 
> 时间：2012-11-01T11:59:48.283
> 
> 标签：php, mysql, joomla, virtuemart

我是 joomla 的新手，我正在尝试构建一个组件，它是 viruemart 的插件，以允许用户在其用户区域访问发票 PDF。为此，我需要编写一个选择查询，为我从数据库中检索此信息。

我一直在搞乱它并想出了以下内容，但它似乎没有做任何事情：

```
$id =JFactory::getUser()->id;
$db =& JFactory::getDBO();
$sql = "SELECT * FROM jos_vm_orders"; 
$db->setQuery($sql);
$options = $db->loadObjectList();
return $options; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T12:08:42.557

您可以查看此文档以了解数据库查询 - [http://docs.joomla.org/API16:JDatabaseQuery](http://docs.joomla.org/API16:JDatabaseQuery)

交叉检查您的表前缀。或者试试这个 -

```
$db =& JFactory::getDBO();
$query = $db->getQuery(true);
$query->select('*');
$query->from('#__vm_orders'); 
$query->where('id = 1');   //put your condition here    
$db->setQuery($query);
//echo $db->getQuery();exit;//SQL query string  
//check if error
if ($db->getErrorNum()) {
  echo $db->getErrorMsg();
  exit;
}
return $db->loadObjectList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:14:58.320

```
$db =& JFactory::getDBO();       
$query  = $db->getQuery(true);
$query->select('*');
$query->from('#__vm_orders');      
$db->setQuery($query);  
$options = $db->loadObjectList();
return $options; 
```

或者

```
$db =& JFactory::getDBO();
$sql = "SELECT * FROM #__vm_orders";
$db->setQuery($sql);  
$options = $db->loadObjectList();
return $options; 
```

试试这个，如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:35:20.457

试试这个

```
$user =JFactory::getUser();
$userId = $user->id;//also u get name,email etc
$db =& JFactory::getDBO();
$sql = "SELECT * FROM table where condition"; 
$db->setQuery($sql);
$db->query();
$options = $db->loadObjectList();
return $options; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-23T11:13:55.920

```
$id =JFactory::getUser()->id;
$db =& JFactory::getDBO();
$sql = "SELECT * FROM #__vm_orders"; 
$db->setQuery($sql);
$options = $db->loadObjectList();
return $options; 
```

I would also recommend to use query chaining when using complex queries for Joomla 2.5 and futher version. Here you read about it : [http://m4extensions.com/index.php/tutorials/3-access-database-from-your-joomla-extension](http://m4extensions.com/index.php/tutorials/3-access-database-from-your-joomla-extension)

# c# - 在运行时向类插入属性

> ID：13176623
> 
> 赞同：0
> 
> 时间：2012-11-01T12:00:10.093
> 
> 标签：c#, .net, wpf

我正在尝试将属性动态插入到类中。我需要从数据库加载属性并将其显示在 PropertyGrid 中，但我希望它在运行时构建，这意味着我想将属性定义插入数据库并在运行时将其加载到类（My Class）中。

例如 - 如果数据库包含定义属性的行（例如类型字符串的名称），则类应该是这样的：

```
public MyClass
{
   public string Name{get; set;}
} 
```

我也尝试使用动态来做到这一点，但它失败了。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:10:03.757

您可以使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:11:11.880

我会[`Simple.Data`](http://blog.markrendle.net/2010/08/05/introducing-simple-data/)用来做这个。它从数据库中获取数据并从查询中构造动态对象:)

# php - CodeIgniter Active Record 中的 SQL 注释？

> ID：13176624
> 
> 赞同：3
> 
> 时间：2012-11-01T12:00:12.173
> 
> 标签：php, sql, sql-server, codeigniter

我正在将一个项目移动到 CodeIgniter 并希望利用 Active Record。但是，我还没有找到将 SQL 注释附加到查询的方法。在现有代码中，查询看起来像这样：

```
UPDATE table
SET column = 'value'
WHERE  ID = passed value;
-- Transacted by ' .$_SESSION['Name'] 
```

我已经搜索了 Google 和 SO，但没有找到如何添加最后一个“交易者”评论的答案，而无需直接对整个内容进行编码并使用`$this->db->query('.....')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:54:45.197

我不相信这在 ActiveRecord 中是可能的，因为 AR 的功能有点限制。一种可行的选择是为您的“where”子句使用自定义字符串，并将您的交易注释粘贴在自定义“where”字符串的末尾。我自己没有测试过这个。

即使您必须手动进行查询，CI 也提供了一些很好的转义函数（`$this->db->escape`对于数字、`$this->db->escape_str`'where' 字符串和`$this->db->escape_like_str`'where like' 字符串）应该使您自己的查询安全 - 我知道在我的大多数更复杂的 CI由于 AR 的限制，我需要为大约 1/5 的查询编写自定义查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:05:02.113

感谢 Darrrrrren 让我走上正轨。

我在控制器中定义了一个变量，如下所示： `$this->sqlStamp = ' /* Executed by ' .strtoupper( $this->router->class .'->' .$this->router->method) .' for ' .strtoupper( $this->session->userdata('displayName') ) .'*/ ';`

对于更新和删除，我能够添加 `->where('1=1'.$this->sqlStamp, NULL, false)`.

我无法为 Inserts 找到解决方案，因为它们没有 where 语句，并且尝试在其他地方注入评论似乎不起作用。我最终在插入之前运行了这个，以便为 DBA 提供一些需要寻找的东西： `$this->db->get_where('Same_TableName','0=1'.$this->sqlStamp);`

# entity-framework - 实体框架：无法加载一种或多种请求的类型

> ID：13176626
> 
> 赞同：1
> 
> 时间：2012-11-01T12:00:15.570
> 
> 标签：entity-framework

我遇到了一个我很困惑的特定异常。我最近将我的应用程序的目标框架从 .net Framework 4.0 客户端配置文件更改为 .net Framework 4.5。这显然导致我的实体框架有点混乱。运行应用程序时出现此异常...

```
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the
LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.RuntimeModule.GetTypes()
   at System.Reflection.Assembly.GetTypes()
   at System.Data.EntityUtil.GetTypesSpecial(Assembly assembly)
   at System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadTypesFromAssembly()
   at System.Data.Metadata.Edm.ObjectItemAssemblyLoader.Load()
   at System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.Load()
   at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boolean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData) 
```

问题是在我做出这个改变之前它曾经工作过......我搞砸了什么？我需要重新生成这些实体吗？我该如何进行故障排除和解决此问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:06:04.723

两种调试方法：

1.  在调试器中运行您的程序，打开未处理的异常，然后检查异常的 LoaderExceptions 属性，如消息所述。这应该让您了解未加载哪种类型。

2.  运行[fuslogvw.exe](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)并检查那里记录的故障。如果未找到或无法加载程序集，它将告诉您是哪一个以及可能的原因。

# android - 更新 TextView 的文本导致 GC_CONCURRENT 问题

> ID：13176632
> 
> 赞同：1
> 
> 时间：2012-11-01T12:00:30.813
> 
> 标签：android, android-handler

**我的问题**

我有一个像这样初始化的计时器并调用一个方法来更新一个对象。问题是每次触发计时器时，我都会在 LogCat 中获得 GC_CONCURRENT 输出。

```
11-01 11:56:43.042: D/dalvikvm(30950): GC_CONCURRENT freed 774K, 52% free 3303K/6791K, external 1763K/2129K, paused 3ms+4ms 
```

这是我的计时器初始化以及任务。

```
 if (CCTrackManager.timer == null) 
        CCTrackManager.timer = new Timer("TrackUpdate");
    MyTimerTask task = new MyTimerTask();
    CCTrackManager.timer.scheduleAtFixedRate(task, 0, 1000); 
```

所以这被调用一次，不再被调用，（除非定时器停止并重新启动）。

我的更新方法看起来是这样。

```
 public void addSecondToTrackDuration() {
      this._currentRecordingTrack.setDuration(this._currentRecordingTrack.getDuration() + 1);
      this.mListener.trackUpdated(this._currentRecordingTrack);
  } 
```

然后这是我的处理程序，我用它来处理从这个线程获取值到我的 UI 线程。

```
//----------------------------------------------------------------------
    // HANDLES THE UPDATE OF THE TRACK. NEEDS HANDLER BECAUSE THE TIMER WHICH CALLS THIS RUNS ON ANOTHER THREAD 
    //----------------------------------------------------------------------
    static class UpdateTrackHandler extends Handler {

        WeakReference<MainActivity> mActivity;
        UpdateTrackHandler(MainActivity act) {
            mActivity = new WeakReference<MainActivity>(act);
        }

        @Override 
        public void handleMessage(Message msg) {
            TrackFragment tf = (TrackFragment) mActivity.get().getSupportFragmentManager().findFragmentByTag(RECORDING_TRACK_FRAG);
            if (tf != null) {
                tf.updateViewWithTrack((CCTrack)msg.obj);
            }
        }
    }

    UpdateTrackHandler mHandler = new UpdateTrackHandler(this);

    //----------------------------------------------------------------------
        // CALLED FROM CCTRACKMANAGER WHEN AN UPDATE OCCURS ON THE  CURRENT RECORDING TRACK
        //---------------------------------------------------------------------- 
        public void trackUpdated(CCTrack track) {
            Message msg = new Message();
            msg.obj = track;
            mHandler.sendMessage(msg);
        } 
```

我不认为这是问题所在。我认为问题出在我实际更新 TextView 的片段中，因为当我将其注释掉时`this.durationValueTxtView.setText("TIME");`，它不再发生。

```
public void updateViewWithTrack(CCTrack track) {
    this.durationValueTxtView.setText("TIME");
} 
```

**我的问题**

在我的处理程序创建、计时器创建、计时器任务创建、文本视图参考方面，我是否遗漏了一些东西？任何事物？

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:53:59.000

`updateViewWithTrack(CCTrack track)`为什么在不使用CCTrack 实例时发送它？尝试删除它，您的代码可能会正常工作。

*   只要代码中出现内存泄漏，就会抛出 GC_CONCURRENT。
*   尝试阅读[这个](http://android-developers.blogspot.in/2009/01/avoiding-memory-leaks.html)和[这个](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:08:55.930

看起来您只是尝试从 UI 线程之外更新 UI - 即从 TimerTask 您必须只将消息发布到处理程序并从处理程序代码更新 UI。看看这里： [Android 计时器？如何？](https://stackoverflow.com/questions/4597690/android-timer-how)

# jenkins - Jenkins插件，如何在远程节点上执行系统命令？

> ID：13176635
> 
> 赞同：5
> 
> 时间：2012-11-01T12:00:55.790
> 
> 标签：jenkins, jenkins-plugins

我们公司的Jenkins有主节点和两个从节点。我正在为它编写插件。插件要做的一件事是从 svn 中检出一些文件。无法从插件中提取此操作。为此，我从插件的 java 代码中执行控制台命令“svn checkout”。问题是来自 svn 的文件被检出到主节点，而不是从节点。如何使文件签出到从站？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T12:28:25.340

首先你有这些对象，通常作为`perform`方法的参数接收：

```
Launcher launcher;
AbstractBuild<?, ?> build;
BuildListener listener; 
```

然后，您创建了参数并将其添加到argumentListBuilder，可能类似于：

```
ArgumentListBuilder command = new ArgumentListBuilder();
command.addTokenized("xcopy /?"); 
```

然后，执行以下操作：

```
ProcStarter ps = launcher.new ProcStarter();
ps = ps.cmds(command).stdout(listener);
ps = ps.pwd(build.getWorkspace()).envs(build.getEnvironment(listener));
Proc proc = launcher.launch(ps);
int retcode = proc.join(); 
```

ProcStarter 将在`launcher`实例指定的节点上运行命令。但是在使用之前请至少浏览一下以上所有类的javadocs，上面*不是*直接从工作代码中复制粘贴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-22T17:11:07.240

这是基于 Hyde 的回答的代码，适用于 Groovy 脚本控制台 (at `/script`)

```
def static Run(nodeName, runCommand)
{
    def output = new java.io.ByteArrayOutputStream();
    def listener = new hudson.util.StreamTaskListener(output);
    def node = hudson.model.Hudson.instance.getNode(nodeName);
    def launcher = node.createLauncher(listener);

    def command = new hudson.util.ArgumentListBuilder();
    command.addTokenized(runCommand);
    def ps = launcher.launch();
    ps = ps.cmds(command).stdout(listener);
    // ps = ps.pwd(build.getWorkspace()).envs(build.getEnvironment(listener));
    def proc = launcher.launch(ps);
    int retcode = proc.join();
    return [retcode, output.toString()]
}

// for (aSlave in hudson.model.Hudson.instance.slaves) {
(recode, output) = Run("build-slave9", "xcopy /?");
println output; 
```

（警告：未测试读取标准输入的程序。注意`ByteArrayOutputStream`, 所以不要运行输出很长的程序。未测试非 ASCII 输出。）

# ide - InterSystems Caché 的外部 IDE

> ID：13176636
> 
> 赞同：4
> 
> 时间：2012-11-01T12:01:00.940
> 
> 标签：ide, intersystems-cache

我想更换 Caché Studio，因为它需要在 Windows 上运行。基于浏览器的 IDE 将是独立和移动使用 OS 的最方便的解决方案。

1.  是否有任何基于浏览器的 IDE 可用于 InterSystems Caché 数据库？...
2.  ...或者，有没有办法像在 Studio 中一样将 Caché 类导出为可读的源代码？我知道有一种方法可以将类导出为 XML。但这不是实际的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-22T13:07:58.443

1）我没有遇到任何基于浏览器的 IDE 用于缓存。

2) 是的 - 我们刚刚发布了[EnsPlus](http://www.ensplus.com)，这是一个商业 Visual Studio 扩展，它允许您在文件系统上使用 ObjectScript 代码。

它允许您从缓存中导出类并将它们作为文件系统上的普通文件使用。但是，这仅适用于基于 Windows 的系统，因此我不确定它是否满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:06:18.573

没有可用于 Caché 编程的基于浏览器的 IDE。事实上，Caché Studio 的唯一替代品是 George James Software 的[Serenji](http://www.georgejames.com/serenji)调试器/编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:37:40.267

XML*是*实际的源代码。

不幸的是，除了 Studio 之外没有其他选择，但 Intersystems 肯定正在开发一个。

# mysql - 使用 Join 按大多数项目排序

> ID：13176638
> 
> 赞同：0
> 
> 时间：2012-11-01T12:01:06.027
> 
> 标签：mysql, sql

我有一个具有以下结构的“项目”表：

```
id, person_id, active 
```

以及带有 id 和 name 列的“people”表。

我想按最活跃的项目排序并将 people.name 列加入 sql。

我试图做类似的事情，但它不起作用：

```
SELECT people.id, COUNT(*) as items_count
FROM items, people
WHERE items.active = true AND people.id = items.person_id
GROUP BY items.person_id
ORDER BY items_count DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:07:22.910

使用 Joins 这将匹配条件。按 items_count 排序将为您提供最活跃的用户

```
Select people.id, COUNT(items.active) as items_count
FROM items
LEFT JOIN people on  people.id = items.person_id
WHERE items.active = true
GROUP BY people.id
ORDER BY items_count DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:04:03.793

```
 select * from (SELECT people.id, COUNT(*) as items_count
    FROM items
    left outer join people on  people.id = items.person_id
    where items.active = true
    GROUP BY items.person_id) as A
    ORDER BY A.items_count DESC 
```

# android - NDK 构建错误

> ID：13176640
> 
> 赞同：3
> 
> 时间：2012-11-01T12:01:23.943
> 
> 标签：android, c++, c, android-ndk

我正在尝试使用 Android 中的一些旧 C++ 代码构建一个包装器。

编译时出现如下错误：

```
In file included from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_algobase.h:61:0,
                 from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:63,
                 from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/map:60,
                 from /home/vocalize/source/xxxxxxxxxxxxxxxxxxxxx/Lxxxxxxx.h:9,
                 from /home/vocalize/source/xxxxxxxxxxxxxxxxx/jni/cxxx_wrap.c:3:
/usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/functexcept.h:43:1: error: unknown type name 'namespace'
/usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/functexcept.h:44:1: error: expected ',' or ';' before '{' token 
```

我正在使用以下 Makefile.mk

```
include $(CLEAR_VARS)
LOCAL_C_INCLUDES := $(MY_LIB_DIR)include

LOCAL_CFLAGS += -DHAVE_CONFIG_H
LOCAL_CFLAGS += -DANDROID_NDK

LOCAL_PATH := $(BASE_PATH)
LOCAL_MODULE := cxxxx_lib

LOCAL_SRC_FILES := cxxxx_wrap.c

LOCAL_STATIC_LIBRARIES := my_lib
LOCAL_LDLIBS := -llog 

include $(BUILD_SHARED_LIBRARY) 
```

我能做些什么来修复这些错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T12:27:23.297

包含一个 C++ .h 文件`cxxx_wrap.c`，它是一个 .c 文件。编译器使用源文件的扩展名来检测语言。所以它假设 C，并窒息 C++ 特定的语法。

将 cxxx_wrap.c 重命名为 .cpp 或 .cxx。或用 包围`#include "Lxxxxxxx.h"`线`#ifdef __cplusplus/#endif`。或者通过指定`-x c++`编译器选项强制 C++ 编译。

完成后，请确保 cxxx_wrap 中的所有 JNI 方法都用 JNIEXPORT 声明或用`extern "C" {}`. 否则，Java 运行时将找不到它们。

作为记录：将 .h 文件重命名为 .hpp 将无济于事。

# java - ConnectionTimeoutException 和 SSLException 之间的区别与消息“连接超时”

> ID：13176648
> 
> 赞同：8
> 
> 时间：2012-11-01T12:01:57.790
> 
> 标签：java, android, http, https, apache-httpclient-4.x

在我的 Android 代码（使用 Apache HTTP 客户端）上，我已经设置了以下参数：

```
HttpConnectionParams.setConnectionTimeout(params, 30 * SECOND_IN_MILLIS);
HttpConnectionParams.setSoTimeout(params, 30 * SECOND_IN_MILLIS); 
```

我正在连接到 HTTPS 网络服务。在慢速网络上，我得到一个`ConnectionTimeoutException`预期的 30 秒后（然后我重试）；但是有“很少”的情况（没有我可以观察到的模式），我得到以下任何一种：

> javax.net.ssl.SSLException：读取错误：ssl=0xe71160：系统调用期间 I/O 错误，连接超时 javax.net.ssl.SSLException：写入错误：ssl=0xe71160：系统调用期间 I/O 错误，Broken管道

我从 SO 那里得到了这段代码，它仍在测试中：

```
registry.register(new Scheme("https", 
    SSLCertificateSocketFactory.getHttpSocketFactory(30 * SECOND_IN_MILLIS, null), 443)); 
```

我可以理解连接建立超时和套接字超时 - 我的问题是我们真的需要 SSL 的第三次超时吗？目的与 SO_TIMEOUT 有何不同？

PS：这些异常似乎在读取/写入数据时出现 - 这应该导致数据丢失 - 但我也无法观察到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:41:09.113

不同之处在于`ConnectionTimeoutException`根本无法建立连接时会发生这种情况。这意味着服务器根本无法访问。

`SSLException`当连接已经建立但在 SSL 握手期间连接超时时会发生这种情况。因为在 SSL 握手开始后发生超时，所以会`SSLException`作为更高级别的异常抛出。

您可以尝试检查是否`ConnectionTimeoutException`输入了 a 作为`SSLException`.

# xml - 用于 XML 的 XSD，具有 Name、NameRus、NameEnu、NameDeu 等属性

> ID：13176652
> 
> 赞同：0
> 
> 时间：2012-11-01T12:02:12.477
> 
> 标签：xml, xsd

我在真实示例（Autodesk 公司）上展示了我的问题。存在一些[PackageContents.xml](http://exchange.autodesk.com/autocad/enu/online-help/browse#WS1a9193826455f5ff-4fe3487312ce8a8dba5-7feb.htm)文件。但是开发人员为其中的本地化问题创建了一个奇怪的解决方案......看看[这个](http://exchange.autodesk.com/autocad/enu/online-help/browse#WS1a9193826455f5ff-4fe3487312ce8a8dba5-7fda.htm)页面 - 它是“ApplicationPackage”元素属性的描述。看，有些属性有这样的描述：

> 可以通过将 [attribute name] 与区域设置代码组合来指定本地化的 [attribute name]。有关[支持的语言环境代码](http://exchange.autodesk.com/autocad/enu/online-help/WS1a9193826455f5ff-4fe3487312ce8a8dba5-7fd7.htm#WS1a9193826455f5ff-4fe3487312ce8a8dba5-7fd6)的完整列表，请参阅支持的语言环境代码。

注意 - 那里有一组固定的本地化。即，例如，元素可以同时具有这样的属性：Name、NameRus、NameEnu、NameDeu 等

我可以为此类 PackageContents.xml 编写 XSD 架构，但没有固定的本地化名称吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:02:22.420

不，你不能。

对于富有想象力和创造力的人来说，很容易找到 XSD 设计者从未设想过的使用 XML 的方法。这样做通常是个坏主意。

# javascript - 在 for 循环和外部循环中声明变量有什么区别？

> ID：13176655
> 
> 赞同：0
> 
> 时间：2012-11-01T12:02:19.537
> 
> 标签：javascript

我搜索了这个问题，但我得到的答案并没有解决我的问题。这是我的问题，我有一个包含 10 个成员的数组。

**JS代码**

```
var array = [1,2,3,4,5,6,7,8,9,10]; 
```

**循环 1：**

```
for(var i=0,len=array.length;i<len;i++){}; 
```

**循环 2**

```
var len = array.length;
for(var i=0;i<len;i++){}; 
```

**循环 3**

```
for(var i=0;i<array.length;i++){} 
```

我知道 1 和 3 之间存在主要的性能差异。但是，1 和 2 之间有什么性能差异吗？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:07:42.370

不，没有任何区别。Javascript 将提升变量。

所以code1将是：

```
var i, len;
for (i=0, len=array.lengh; i<len; i++) {}; 
```

代码2将是

```
var i, len;
len = array.lengh;
for (i=0; i<len; i++) {}; 
```

不同的只是放在哪里`len=array.length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:07:52.917

应该没有任何明显的区别，尽管在示例 2 中解析逻辑还有一个要解析的标记。

越短越好：`var a,b,c,d;`应该比

```
var a; var b; var c; var d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:10:22.537

Loop-1 和 Loop-2 都是相同的，因为 var len 有一次 Initialize ，因此性能没有差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:24:47.757

Javascript 具有函数作用域，而不是块作用域（不包括新`let`语法）。由于 for 循环不是函数，因此它不会创建新范围，这意味着

```
for (var i...) { ... } 
```

完全一样

```
var i...
for (...) { ... } 
```

但是，for 循环的条件语句在 javascript 中的每次迭代都会重新评估，这意味着

```
for(var i=0;i<array.length;i++){} 
```

将需要`array.length`多次评估，而这

```
var len = array.length;
for(var i=0;i<len;i++){}; 
```

一次评估一次。从理论上讲，它更快，但它是一种微优化，它并不重要。

# php - 如何让 PHP 向本地用户发送邮件（cakePHP、Linux SLES）

> ID：13176659
> 
> 赞同：3
> 
> 时间：2012-11-01T12:02:37.593
> 
> 标签：php, cakephp

目前我已经配置了一个邮件服务器（来自我的 ISP 的一个真实的）并且邮件内部和外部在命令行上工作。在 PHP 中，只有外部用户才能工作。

对于测试，我只想发送给内部用户。

（理想情况下，我想设置许多指向一个用户的别名，以便邮寄到：tom@localhost.com、dick@localhost.com、harry@localhost.com 最终在 /var/mail/johnsmith 中）

如果有人可以在这里提供帮助，我将不胜感激。我对编辑后缀配置文件犹豫不决...

在命令行上 johnsmith@localhost 有效，但在 PHP 中无效。它使用的是 cakePHP，我在发送 ($this->Email->send();) 之前检查了 $email-addr 的值，该值为 johnsmith@localhost。我对 cakePHP 还不是很熟悉。var/log/mail 什么都不显示，只显示外部电子邮件地址。

（服务器是 Suse linux）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:22:23.277

您可以使用基本的邮件 php 功能

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

linux下，mail php功能依赖sendmail，检查sendmail是否正确安装即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:12:49.873

在 /etc/postfix/main.cf 添加 localhost.com：

```
mydestination = $myhostname, localhost.$mydomain,localhost,localhost.com 
```

这允许通过命令行在“localuser@localhost.com”上发送。我在浏览器中加载了一个测试 php 邮件表单脚本，它可以工作，将邮件发送到 /var/mail/localuser。

目前这意味着我必须检查每个本地用户的 /var/mail 文件。我正在处理别名。我的第一次尝试失败了。

# java - 寻找一个不需要任何安装的好和简单的数据库替代品

> ID：13176660
> 
> 赞同：4
> 
> 时间：2012-11-01T12:02:40.830
> 
> 标签：java, database

我一直在做我的功课（就像你问的那样；））但我还没有找到任何真正满足我需求的东西，所以这里是：

我是一名初级 Java 开发人员，我正在做一个小项目。我目前遇到的问题是我希望能够在一个小数据库中存储和检索数据。我尝试使用文本文件，但它们只能存储数据或一次检索所有数据，您无法选择要检索的数据。我正在寻找不需要任何安装或其他任何东西的替代方案，因为我不希望我的“客户”下载除我的应用程序之外的任何其他东西。我已经尝试过 HSQLDB，但这确实需要一些安装...

所以这是我的问题：是否有任何 Java 数据库替代品不需要任何安装并且可以选择和检索您想要的任何数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:05:54.120

Apache derby 是 JDK 6 及更高版本的一部分。你可以用那个。

它被称为[Java DB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)并捆绑在 JDK 中。

如果你去`JAVA_HOME/db`你可以找到安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:07:21.897

您可以使用[SQLite](http://www.sqlite.org/)和[SQLite JDBC 适配器](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:23:03.920

你看过[Lucene](http://lucene.apache.org/core/)吗？它很像一个数据库，您可以通过许多非常复杂的方式查询您的“文档”列表（键值对集）。它也*非常*快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:08:05.637

您可以使用 Microsoft Access。如果您的计算机上安装了 Microsoft Office（假设您使用的是 Windows 操作系统），则可能还安装了 Microsoft Access。只需检查它是否已经存在，如果存在，那么最好使用 MS Access 在 java 中启动与数据库相关的编程。

# c++ - 如何使用 C++ Win32 API 计算两个日期之间的天数？

> ID：13176662
> 
> 赞同：0
> 
> 时间：2012-11-01T12:02:50.157
> 
> 标签：c++, windows, winapi

我正在使用 C++ win32 API ...

我有这些价值观。

> pwdlastset 日期（例如：25-9-2012），当前日期（例如：1-11-2012），maxpwdage 计数（例如 54 天） pwdwarningdays（14 天）...

现在我想计算密码到期日...

我尝试了下面的代码...

```
if(lastpwdchmon==currentMonth)
                        {
                        lCount=currentDay-lastpwdchday;
                        }
                        else if(lastpwdchmon<currentMonth)
                        {
                            lCount=((currentDay+30)-lastpwdchday);
                        } 
```

但是，我有一个问题...

我的意思是，我只需要计算当前日期和 pwdlastset 日期之间的天数？

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:41:06.743

很难知道你的 DATE 是什么，但如果你在 time_t 中得到了它们，那么只需将两者相减并将结果除以 86400 (60*60*24)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:03:57.470

`DATE`是`COM`保持日期/时间的方法。它的组成部分包含一个时代的天数（在这里无关紧要），小数部分表示一天中的时间。因此，要计算 2 之间的天数，`DATE`您可以这样做：

```
DATE d1 = get_date1(), d2 = get_date2();
int number_of_days = static_cast<int>( d1 - d2 ); 
```

要获取当前日期，`DATE`您可以使用：

```
DATE get_now( bool asUTC = false ) {
    SYSTEMTIME stm;
    (asUTC ? ::GetSystemTime : ::GetLocalTime)( &stm );
    DATE res;
    SystemTimeToVariantTime( &stm, &res );
    return res;
} 
```

要将日期/时间字段转换为`DATE`您可以使用：

```
DATE to_date( int year, WORD month, WORD day,
    WORD h = 0, WORD m = 0, WORD s = 0, WORD ms = 0 )
{
    SYSTEMTIME stm = { year, month, 0, day, h, m, s, ms };
    DATE res;
    if( !SystemTimeToVariantTime(&stm, &res) ) {/* Handle error */}
    return res;
} 
```

# objective-c - NSString 的大小以适合 UItextview

> ID：13176663
> 
> 赞同：1
> 
> 时间：2012-11-01T12:02:54.040
> 
> 标签：objective-c, ios, nsstring, uitextview

我想找到要在 UITextview 上显示的 NSString 的大小。它对英语很好。但如果字符串是其他语言，如西班牙语、印地语、日语，则意味着它运行缓慢：

CGSize ContentSize=[MainContentString sizeWithFont:TextView.font constrainedToSize:CSize lineBreakMode:UILineBreakModeWordWrap];

有没有办法更快地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:26:16.210

查看 UIView 的[autoresizesSubviews](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW6)和[contentMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW99) - 在情节提要中使用它们。

在有和没有你的实现的情况下尝试它 - 看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:05:03.733

实际上有一种非常简单的方法可以将 UITextView 调整为正确的内容高度。可以使用 UITextView contentSize 来完成。

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

# javascript - ASP.NET 模态弹出窗口扩展器

> ID：13176664
> 
> 赞同：2
> 
> 时间：2012-11-01T12:03:03.787
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

我有一个使用模式弹出窗口并使用以下语句调用它的页面：

```
var popUp = 
  window.showModalDialog("../modalPopup.aspx?message="+message, dialogArguments
  , "dialogWidth=850px;dialogHeight=350px;status=no;"); 
```

我想创建一个弹出窗口并禁用或隐藏`Close(X)`屏幕右上角的按钮。我已经添加了一个关闭窗口的链接按钮。根据我的在线阅读，使用 showModalDialog 函数无法摆脱关闭按钮。有人建议这可能使用模态对话框扩展器。

在开始添加此扩展程序代码之前，我想了解是否可以禁用关闭按钮以及涉及的内容。另外，我需要知道是否有一种方法可以动态地将数据添加到 javascript 中的模式弹出窗口中......？

提前致谢，

全科医生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:21:26.917

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %></pre>

<div class="TextDiv1">
   <asp:LinkButton ID="btnShowPopup" runat="server" CausesValidation="false" OnClientClick="Panel1_Init" onclick="Panel1_Init">Check Avability</asp:LinkButton>
   <cc1:ModalPopupExtender ID="MPE1" runat="server" TargetControlID="btnShowPopup" PopupControlID="Panel1" CancelControlID="BtnClose" DropShadow="false">
   </cc1:ModalPopupExtender>
</div>
<div class="PopupPanel">
   <asp:Panel ID="Panel1" CssClass="PanelMain" runat="server"
              Style="display: none" oninit="Panel1_Init">
     <div class="PopupText">
      <h1> Check User Name Availability</h1>
          <p class="alert">
          <strong>User name is already used:</strong> The user name you have provided, <b>moizy4u</b>,
                                    is already registered on our web site. Please try a different user name.</p>
                                <div class="c">
                                    <asp:Button ID="BtnClose" CausesValidation="false" CssClass="buttonClass" runat="server" Text="Close" />
            </div>
         </div>
   </asp:Panel>
                    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:11:36.777

而不是使用 JavaScript ModalDialog，您应该使用[AJAX ModalPopup Extender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)，因为您已经要求使用 Asp.Net 进行此操作，但如果您需要一些花哨的东西，请先搜索[Google](http://www.google.com/webhp?hl=en&tab=ww#hl=en&sclient=psy-ab&q=jquery%20popup%20exmaples&oq=jquery%20popup%20exmaples&gs_l=hp.3..0i13j0i8i13i30l3.63950.75027.0.75704.35.23.8.4.5.7.701.8510.0j7j5j1j5j4j1.23.0.les;..0.0...1c.1.vCK7obeeO3A&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=8fbb75c76ea4abdd&bpcl=37189454&biw=1280&bih=903)。这是一些使用 Jquery 的最佳插件。

*   [灯箱](http://leandrovieira.com/projects/jquery/lightbox/)
*   [Jquery UI 模式对话框](http://jqueryui.com/dialog/)
*   [花式盒](http://fancybox.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:06:48.257

那里有很多 javascript 模式弹出窗口。使用jQuery。与 TINYBox2 [http://www.scriptiny.com/2011/03/javascript-modal-windows/](http://www.scriptiny.com/2011/03/javascript-modal-windows/)

# android - AsyncTask 中的进度对话框有什么问题

> ID：13176669
> 
> 赞同：0
> 
> 时间：2012-11-01T12:03:27.457
> 
> 标签：android, android-asynctask, progressdialog

我在我的应用程序中使用 Async Task 来使用 restful web 服务从 web 服务中获取响应。我的代码

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_json_page);
    _mContext = this;

    new JSONParserTask().execute();

} 
```

异步任务类

```
 private class JSONParserTask extends AsyncTask<Void, Void, ListAdapter >{

    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {

    //  dialog = new ProgressDialog(_mContext); 
    //  dialog.setMessage("Loading...");
    //  dialog.show();
        super.onPreExecute();

    }

    @Override
    protected ListAdapter doInBackground(Void... arg0) {
        ListAdapter adapter = null;
        itemsList = new ArrayList<HashMap<String, String>>();

            jParser = new JSONParser();
        JSONObject json = jParser.getJSONFromUrl(Constants.JsonURL);

          if(json == null){

              Log.v(TAG, "----------- null");
              return null;
          }

            try {

                // Getting Array of Items
                items = json.getJSONArray(TAG_ITEMS);       
                 // looping through All items
                for(int i = 0; i < items.length(); i++) {
                    JSONObject itemsObj = items.getJSONObject(i);
                    JSONObject products = null;
                    products = itemsObj.getJSONObject(TAG_PRODUCT);
                    Log.d(TAG,"product array "+products.toString());

                    JSONArray images = products.getJSONArray(TAG_IMAGES);
                    JSONObject imagesObj = images.getJSONObject(0);
                    Log.d(TAG, "......."+ imagesObj.getString(TAG_LINK));

                    String imageUrl = imagesObj.getString(TAG_LINK);

                    // Storing each json item in variable
                    String kind = itemsObj.getString(TAG_KIND);
                    String id = itemsObj.getString(TAG_KID);
                            String selfLink = itemsObj.getString(TAG_SELFLINK);

                            HashMap<String, String> map = new HashMap<String, String>();

                         // adding each child node to HashMap key => value
                        map.put(TAG_KIND, kind);
                        map.put(TAG_KID, id);
                        map.put(TAG_SELFLINK, selfLink);

                            // adding HashList to ArrayList
                                itemsList.add(map);

                }
              /**
                 * Updating parsed JSON data into ListView
                 * */
                 adapter = new SimpleAdapter(_mContext, itemsList,
                        R.layout.list_item_row,
                        new String[] { TAG_KIND,  TAG_SELFLINK }, new int[] {
                                R.id.name, R.id.mobile });

            } catch(JSONException e){
                e.printStackTrace();
            }       
            return adapter;
    }

    @Override
    protected void onPostExecute(ListAdapter adapter) {

            lv.setAdapter(adapter);    

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {

               public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // some action
                }
            });

        //dialog.dismiss();
    }      
   } 
```

使用此代码，无需使用进度对话框，一切都可以正常工作。如果你找到了，与进度对话框相关的代码会在上面的类中注释掉。如果我取消注释进度对话框代码，则不会从服务器收到任何响应。我也尝试过调试，但从来没有想过要消除这个错误。有人可以告诉我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:27:07.383

好的，原因是您正在更新您的`doInBackground()`方法中的适配器

```
 adapter = new SimpleAdapter(_mContext, itemsList,
                    R.layout.list_item_row,
                    new String[] { TAG_KIND,  TAG_SELFLINK }, new int[] {
                            R.id.name, R.id.mobile }); 
```

此代码与 MAIN THREAD 相关，不应在后台线程中调用，将其从此处删除，并将其添加到`onPostExecute()`，只需从后台线程传递一个数组列表并在`onPostExecute()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:15:16.233

试试这个，而不是

```
 ProgressDialog mProgressDialog;

    @Override
    protected void onPreExecute() {
        mProgressDialog= ProgressDialog.show(getApplicationContext(),"", getString(R.string.dialog_wait_message));
        super.onPreExecute();
    }

    @Override
    protected ListAdapter doInBackground(Void... arg0){
      //do your stuff here
    }

    @Override
    protected void onPostExecute(Void result) {
            if(mProgressDialog!=null && mProgressDialog.isShowing()){
                mProgressDialog.dismiss();
       }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:15:51.693

尝试这个

```
 @Override
    protected void onPreExecute() {
        pd=new ProgressDialog(m_context);
        pd.setTitle("Authenticating");
        pd.show();

    }
  @Override
    protected Void doInBackground(Void... args) {
            //your stuff
           }
        @Override
    protected void onPostExecute(Void result) {

        pd.dismiss();
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:11:11.270

尝试这个

```
ProgressDialog mProgressDialog;

@Override
        protected void onPreExecute() {
            mProgressDialog= ProgressDialog.show(getApplicationContext(),"", getString(R.string.dialog_wait_message));
            super.onPreExecute();
        }

   protected void onPostExecute(Void result) {
                if(mProgressDialog!=null){
                    mProgressDialog.dismiss();
           }
} 
```

# wcf-data-services - WCF 数据服务 OData；用 $format 指定 JSON“详细”的方法？

> ID：13176672
> 
> 赞同：0
> 
> 时间：2012-11-01T12:03:41.727
> 
> 标签：wcf-data-services, odata

WCF 数据服务根据`Accept:`标头更改其响应 JSON 格式，因此这两个标头提供不同的结果：

```
Accept: application/json
Accept: application/json; odata=verbose 
```

但是，OData 规范提供了`$format=`应该做同样事情的查询参数。WCF 似乎尊重`$format=json`参数，但将其视为`application/json`接受标头。但我想要详细的 JSON ......

所以我的问题是；的可能值是`$format=`多少？有没有办法使用它来指定详细的 JSON？

（我已经知道我可以更改我的代码以使用接受标头，但现有代码正在使用 $format，所以我更喜欢更改它。）

我正在使用预发布的 WCF 数据服务 v5.1.0-rc2

* * *

**编辑：**

我的请求如下所示：

网址：

```
http://localhost:52116/Services/MusicStore.svc/Albums?$format=json&%24inlinecount=allpages&%24filter=substringof('the'%2Ctolower(Title)) 
```

请求标头：

```
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
DataServiceVersion: 3.0
Host: localhost:52116
MaxDataServiceVersion: 3.0
MinDataServiceVersion: 3.0
Proxy-Connection: keep-alive
Referer: http://localhost:52116/
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
X-Requested-With: XMLHttpRequest 
```

这将返回有效的 JSON（非详细）。

但是，如果我尝试`$format=jsonverbose`，我会从 WCF 获得 HTTP 500，并在跟踪日志中显示：

```
<Exception>
<ExceptionType>System.ServiceModel.CommunicationObjectAbortedException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The communication object, System.ServiceModel.Channels.TransportReplyChannelAcceptor+TransportReplyChannel, cannot be used for communication because it has been Aborted.</Message>
<StackTrace>
at System.ServiceModel.Channels.CommunicationObject.ThrowIfAborted()
at System.ServiceModel.Channels.InputQueueChannel`1.EndDequeue(IAsyncResult result, TDisposable&amp; item)
at System.ServiceModel.Channels.ReplyChannel.EndTryReceiveRequest(IAsyncResult result, RequestContext&amp; context)
at System.ServiceModel.Dispatcher.ReplyChannelBinder.EndTryReceive(IAsyncResult result, RequestContext&amp; requestContext)
at System.ServiceModel.Dispatcher.ErrorHandlingReceiver.EndTryReceive(IAsyncResult result, RequestContext&amp; requestContext)
at System.ServiceModel.Dispatcher.ChannelHandler.EndTryReceive(IAsyncResult result, RequestContext&amp; requestContext)
at System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result)
at System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.ServiceModel.Diagnostics.TraceUtility.&lt;&gt;c__DisplayClass4.&lt;CallbackGenerator&gt;b__2(AsyncCallback callback, IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)
at System.Runtime.InputQueue`1.Shutdown(Func`1 pendingExceptionGenerator)
at System.ServiceModel.Channels.InputQueueChannel`1.OnClosing()
at System.ServiceModel.Channels.CommunicationObject.Abort()
at System.ServiceModel.Dispatcher.ReplyChannelBinder.Abort()
at System.ServiceModel.Channels.ServiceChannel.OnAbort()
at System.ServiceModel.Channels.CommunicationObject.Abort()
at System.Data.Services.DelegateBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
at System.ServiceModel.Channels.BodyWriter.WriteBodyContents(XmlDictionaryWriter writer)
at System.ServiceModel.Channels.BodyWriterMessage.OnWriteBodyContents(XmlDictionaryWriter writer)
at System.ServiceModel.Channels.Message.OnWriteMessage(XmlDictionaryWriter writer)
at System.ServiceModel.Channels.Message.WriteMessage(XmlDictionaryWriter writer)
at System.ServiceModel.Channels.Message.WriteMessage(XmlWriter writer)
at System.ServiceModel.Channels.ByteStreamMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)
at System.ServiceModel.Channels.WebMessageEncoderFactory.WebMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)
at System.ServiceModel.Channels.MessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager)
at System.ServiceModel.Channels.HttpOutput.SerializeBufferedMessage(Message message)
at System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout)
at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.SendReplyCore(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.SendReply(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.HttpRequestContext.OnReply(Message message, TimeSpan timeout)
at System.ServiceModel.Activation.HostedHttpContext.OnReply(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.RequestContextBase.Reply(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Reply(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage9(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage8(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage6(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp; rpc)
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Dispatch(MessageRpc&amp; rpc, Boolean isOperationContextSet)
at System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext)
at System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext)
at System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result)
at System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.ServiceModel.Diagnostics.TraceUtility.&lt;&gt;c__DisplayClass4.&lt;CallbackGenerator&gt;b__2(AsyncCallback callback, IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)
at System.Runtime.InputQueue`1.EnqueueAndDispatch(Item item, Boolean canDispatchOnThisThread)
at System.Runtime.InputQueue`1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
at System.ServiceModel.Channels.InputQueueChannel`1.EnqueueAndDispatch(TDisposable item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
at System.ServiceModel.Channels.SingletonChannelAcceptor`3.Enqueue(QueueItemType item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult.CompleteParseAndEnqueue(IAsyncResult result)
at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult.HandleParseIncomingMessage(IAsyncResult result)
at System.Runtime.AsyncResult.SyncContinue(IAsyncResult result)
at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult..ctor(ReplyChannelAcceptor acceptor, Action dequeuedCallback, HttpPipeline pipeline, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.BeginProcessInboundRequest(ReplyChannelAcceptor replyChannelAcceptor, Action dequeuedCallback, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpRequestContext.BeginProcessInboundRequest(ReplyChannelAcceptor replyChannelAcceptor, Action acceptorCallback, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceivedAsyncResult`1.ProcessHttpContextAsync()
at System.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceivedAsyncResult`1..ctor(HttpRequestContext requestContext, Action acceptorCallback, HttpChannelListener`1 listener, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpChannelListener`1.BeginHttpContextReceived(HttpRequestContext context, Action acceptorCallback, AsyncCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationObjectAbortedException: The communication object, System.ServiceModel.Channels.TransportReplyChannelAcceptor+TransportReplyChannel, cannot be used for communication because it has been Aborted.</ExceptionString> 
```

* * *

**编辑2：**

好的，虽然`$format=jsonverbose`看起来 HTTP500，但这个 URL 确实给了我想要的东西：

```
http://localhost:52116/Services/MusicStore.svc/Albums?$format=application%2fjson%3bodata%3dverbose&%24inlinecount=allpages&%24filter=substringof('the'%2Ctolower(Title)) 
```

所以基本上它是`$format=application/json;odata=verbose`URL 转义的。

惊人的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:46:25.373

5.1.0 中的 $format 标头将接受以下值：

*   json
*   详细的json
*   原子

任何其他值都将尝试被解释为 Accept 标头的文字值，例如 $format=application/json;odata=verbose 是 $format=jsonverbose 的同义词。

我通常使用以下内容：

*   $格式=json
*   $格式=verbosejson
*   $format=application/json;odata=fullmetadata

# matlab - matlab 正则表达式

> ID：13176675
> 
> 赞同：0
> 
> 时间：2012-11-01T12:03:49.403
> 
> 标签：matlab

如何使用 matlab regexprep 进行多个表达式和替换？

```
file='http:xxx/sys/tags/Rel/total'; 
```

我想用 sys1 替换“sys”，用“total1”替换“total”。对于单个表达式的替换，它的工作方式如下：

```
strrep(file,'sys', 'sys1') 
```

并想拥有喜欢

```
strrep(file,'sys','sys1','total','total1') . 
```

我知道这不起作用`strrep`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:22:56.110

要解决它，您需要使用正则表达式*替换功能*，尝试在 matlab 的正则表达式中找到与 php 中类似的内容：

```
$string = 'http:xxx/sys/tags/Rel/total';
preg_replace('/http:(.*?)\//', 'http:${1}1/', $string); 
```

`${1}`表示第一个匹配组，即括号中的内容，`(.*?)`。

`http:(.*?)\/`- 匹配模式

`http:${1}1/` - 用您希望添加的第二个 1 替换模式（第一个 1 是组号）

`http:xxx/sys/tags/Rel/total` - 输入字符串

秘诀是任何匹配的东西`(.*?)`（无论是*xxx*还是*yyyy*还是*1234*）都将被插入而不是`${1}`替换模式，然后替换而不是旧的东西到输入字符串中。欢迎查看更多关于php中[替代功能的示例。](http://extract-web-data.com/regex-in-php/#replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:40:20.697

为什么不直接发出命令两次？

```
file = 'http:xxx/sys/tags/Rel/total';

file = strrep(file,'sys','sys1')
strrep(file,'total','total1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T16:42:38.113

如 的帮助页面中所述`regexprep`，您可以指定成对的模式和替换，如下所示：

```
file='http:xxx/sys/tags/Rel/total';
regexprep(file, {'sys' 'total'}, {'sys1' 'total1'})

ans =
http:xxx/sys1/tags/Rel/total1 
```

如果您能够为要替换的所有内容定义匹配模式，甚至可以使用标记：

```
regexprep(file, '/([st][yo][^/$]*)', '/$11')

ans =
http:xxx/sys1/tags/Rel/total1 
```

但是，在某些情况下必须小心使用第一种方法，因为 MATLAB 会一个接一个地替换这些对。也就是说，如果第一个模式匹配一​​个字符串并将其替换为随后由后面的模式匹配的内容，那么它也将被后面的替换替换，即使它可能不匹配后面的模式原始字符串。

例子：

```
regexprep('This\is{not}LaTeX.', {'\\' '([{}])'}, {'\\textbackslash{}' '\\$1'})

ans =
This\textbackslash\{\}is\{not\}LaTeX.

=> This\{}is{not}LaTeX. 
```

和

```
regexprep('This\is{not}LaTeX.', {'([{}])' '\\'}, {'\\$1' '\\textbackslash{}'})

ans =
This\textbackslash{}is\textbackslash{}{not\textbackslash{}}LaTeX.

=> This\is\not\LaTeX. 
```

这两个结果都是意料之外的，而且似乎没有办法通过连续替换而不是同时替换来解决这个问题。

# java - 基本解释http请求

> ID：13176677
> 
> 赞同：0
> 
> 时间：2012-11-01T12:03:53.053
> 
> 标签：java, jsp, servlets, httprequest

对于这个论坛上的大多数用户来说，我的问题可能是一个简单的问题，但我还不太明白。关于这个主题的教程稍微跳过了绝对基础知识。

我的问题是：如何发出/调用 http 请求？例如，一个 servlet 具有 doPost、doDelete 和 doSave 方法。我不明白如何以及何时调用这些方法。

有人可以给出一个关于如何调用这些方法的简单代码示例（JSP 网页到 java servlet）吗？特别是 doSave 和 doDelete 对我来说很有趣（使用 HtppRequest）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:12:12.343

请求对象是 javax.servlet.http.HttpServletRequest 对象的一个​​实例。每次客户端请求页面时，JSP 引擎都会创建一个新对象来表示该请求。

请求对象提供了获取 HTTP 头信息的方法，包括表单数据、cookie、HTTP 方法等。

# nunit - 带有 NUnit 的 Specflow 不尊重 TestFixtureSetUpAttribute

> ID：13176689
> 
> 赞同：5
> 
> 时间：2012-11-01T12:04:46.223
> 
> 标签：nunit, structuremap, specflow

我正在将 SpecFlow 与 Nunit 一起使用，并且我正在尝试使用 TestFixtureSetUpAttribute 设置我的环境测试，但它从未被调用过。

我已经尝试使用 MSTests 和 ClassInitialize 属性，但同样的情况发生了。该函数未被调用。

任何想法为什么？

```
[Binding]
public class UsersCRUDSteps
{
    [NUnit.Framework.TestFixtureSetUpAttribute()]
    public virtual void TestInitialize()
    {
        // THIS FUNCTION IS NEVER CALLER

        ObjectFactory.Initialize(x =>
        {
            x.For<IDateTimeService>().Use<DateTimeService>();
        });

        throw new Exception("BBB");
    }

    private string username, password;

    [Given(@"I have entered username ""(.*)"" and password ""(.*)""")]
    public void GivenIHaveEnteredUsernameAndPassword(string username, string password)
    {
        this.username = username;
        this.password = password;
    }

    [When(@"I press register")]
    public void WhenIPressRegister()
    {
    }

    [Then(@"the result should be default account created")]
    public void ThenTheResultShouldBeDefaultAccountCreated()
    {
    } 
```

解决方案：

```
[Binding]
public class UsersCRUDSteps
{
    [BeforeFeature]
    public static void TestInitialize()
    {
        // THIS FUNCTION IS NEVER CALLER

        ObjectFactory.Initialize(x =>
        {
            x.For<IDateTimeService>().Use<DateTimeService>();
        });

        throw new Exception("BBB");
    }

    private string username, password;

    [Given(@"I have entered username ""(.*)"" and password ""(.*)""")]
    public void GivenIHaveEnteredUsernameAndPassword(string username, string password)
    {
        this.username = username;
        this.password = password;
    }

    [When(@"I press register")]
    public void WhenIPressRegister()
    {
    }

    [Then(@"the result should be default account created")]
    public void ThenTheResultShouldBeDefaultAccountCreated()
    {
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:51:35.717

你`TestInitialize`没有被调用，因为它在你的 Steps 类中而不是在单元测试中（因为实际的单元测试在从你的文件`.cs`生成的里面）。`.feature`

SpecFlow 有自己的测试生命周期事件，称为钩子，这些都是预定义的钩子：

*   `[BeforeTestRun]`/`[AfterTestRun]`
*   `[BeforeFeature]`/`[AfterFeature]`
*   `[BeforeScenario]`/`[AfterScenario]`
*   `[BeforeScenarioBlock]`/`[AfterScenarioBlock]`
*   `[BeforeStep]`/`[AfterStep]`

请注意，这为设置提供了更大的灵活性。有关其他信息[，请参阅文档](https://github.com/techtalk/SpecFlow/wiki/Hooks)。

基于您要使用该`TestFixtureSetUp`属性的事实，您可能需要`BeforeFeature`在每个功能之前调用一次的钩子，因此您需要编写：

```
[Binding]
public class UsersCRUDSteps
{
    [BeforeFeature]
    public static void TestInitialize()
    {               
        ObjectFactory.Initialize(x =>
        {
            x.For<IDateTimeService>().Use<DateTimeService>();
        });

        throw new Exception("BBB");
    }

    //...
} 
```

请注意，该`[BeforeFeature]`属性需要一个`static`方法。

您还应该注意，如果您使用的是 VS 集成，则有一个名为的项目项类型`SpecFlow Hooks (event bindings)`，它创建一个带有一些预定义挂钩的绑定类，以帮助您入门。

# jquery - 三星 Galaxy Tab 10.1 英寸 gt-p7500 android 3.2 谷歌地图 jquery 灯箱 z-index 不适合在其他设备上

> ID：13176690
> 
> 赞同：0
> 
> 时间：2012-11-01T12:04:47.810
> 
> 标签：jquery, google-maps, lightbox, galaxy

在 Mozilla5.0 上使用 samsung galaxy tab 10.1 inch gt-p7500 android 3.2 时，我遇到了 google maps 和 jquery lightbox 的问题 - 我想这是 z-index 的问题 - 当您单击照片以在灯箱中查看它时 -照片位于应覆盖所有页面的暗层下方。这是谷歌地图的问题，因为在现场没有谷歌地图时 - 灯箱可以正常工作

您可以看到以下示例，这是一个有效的示例（因为站点不包含 Google 地图）：

[http://wasthere.com/europe/en/i3/show-entry/19/mazurian-canal](http://wasthere.com/europe/en/i3/show-entry/19/mazurian-canal)

这不起作用（因为网站包含谷歌地图）：

[http://wasthere.com/europe/en/i2/show-entry/149/gliwice-radio-station](http://wasthere.com/europe/en/i2/show-entry/149/gliwice-radio-station)

任何人都知道如何解决它？

在 Opera 上一切正常。

# java - jvm如何检测死锁情况。JVM检测htread死锁的数据结构和算法是什么。

> ID：13176691
> 
> 赞同：-3
> 
> 时间：2012-11-01T12:04:47.533
> 
> 标签：java, multithreading, jvm

我一直在尝试查找 JVM 是否有某种方法来查找某些线程是否处于死锁状态。我找不到任何东西。如果你们中的任何人对此有任何指示，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:13:02.330

您可以使用[ThreadMXBean](http://docs.oracle.com/javase/7/docs/api/java/lang/management/ThreadMXBean.html) JMX bean。

```
ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();
ThreadInfo[] threadInfos = threadMXBean.dumpAllThreads(true, true);
long[] deadlockedThreads = threadMXBean.findDeadlockedThreads();
long[] monitorDeadlockedThreads = threadMXBean.findMonitorDeadlockedThreads(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:21:26.180

不，JVM 本身不支持死锁检测。
有一个线程处理JVM和死锁，也标记为已解决：[链接](https://stackoverflow.com/q/8126711/1790635)

# matlab - 如何在命令窗口上显示大量文本？

> ID：13176694
> 
> 赞同：0
> 
> 时间：2012-11-01T12:04:54.053
> 
> 标签：matlab

我需要在命令窗口上打印带有更多行的文本。

例子：

```
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

通常我使用`display('Text')`

但这不是最好的方法，不是吗？

注意：我试过这个

```
fprintf(1, ...
'wwwwwwwwwwwwwwwwwwwwwwwwwwwwwww '...
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa '...
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa '...
 ); 
```

所以我的问题是：

**如何在命令窗口上显示大量文本？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:47:35.310

要为您的字符串添加一些格式，只需使用`fprintf`格式说明符：

```
fprintf('%s\n%s\n%s\n',...
    'wwwwwwwwwwwwwwwwwwwwwwwwwwwwwww',...
    'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',...
    'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'); 
```

阅读[文档](http://www.mathworks.nl/help/matlab/ref/fprintf.html)以了解更多信息。

请注意，`1`作为第一个参数的 the 可以省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:23:46.920

只是`fprintf(1,...)`用作文件描述符 1 是 IDE 模式下的命令窗口

# scala - Scala中的逆变问题

> ID：13176697
> 
> 赞同：7
> 
> 时间：2012-11-01T12:05:04.850
> 
> 标签：scala, typeclass

我想定义一个这样的类型类：

```
trait CanFold[-T, R] {
  def sum(acc: R, elem: T): R
  def zero: R
}

implicit object CanFoldInts extends CanFold[Int, Int] {
  def sum(x: Int, y: Int) = x + y
  def zero = 0
}

implicit object CanFoldSeqs extends CanFold[Traversable[_], Traversable[_]] {
  def sum(x: Traversable[_], y: Traversable[_]) = x ++ y
  def zero = Traversable()
}

def sum[A, B](list: Traversable[A])(implicit adder: CanFold[A, B]): B = 
  list.foldLeft(adder.zero)((acc,e) => adder.sum(acc, e)) 
```

但是，问题是当我这样做时，我得到了 a`Traversable[Any]`并且得到 a 会很好`Traversable[Int]`：

```
 scala> sum(List(1,2,3) :: List(4, 5) :: Nil)
 res10: Traversable[Any] = List(1, 2, 3, 4, 5) 
```

更糟糕的是，我不能在定义一个 for `Traversable[Int]`之后定义一个隐含的 for `Traversable[_]`，因为这样定义会导致歧义。拔掉头发后，我放弃了。

有什么办法可以使总和返回 a `Traversable[T]`而不是 a `Traversable[Any]`？

查看Scala 库中的`sum()`定义方式`Seq`，我可以看到它适用于`Numeric`，这是不变的，但我希望超类型的默认实现并且结果与输入不同（与折叠操作相同）很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T12:16:47.810

我知道向此类类型类添加类型参数的唯一方法是使用 a`def`而不是 a `object`：

```
implicit def CanFoldSeqs[A] = new CanFold[Traversable[A], Traversable[A]] {
  def sum(x: Traversable[A], y: Traversable[A]) = x ++ y
  def zero = Traversable()
}

scala> sum(List(1, 2, 3) :: List(4, 5) :: Nil)
res0: Traversable[Int] = List(1, 2, 3, 4, 5) 
```

# css - 使用 CSS3 3D 变换的 rotate3d(x,y,z,rotate)，我怎样才能做到这一点？

> ID：13176701
> 
> 赞同：0
> 
> 时间：2012-11-01T12:05:32.773
> 
> 标签：css, css-transforms

所以情况是这样的：
`oX`并且`oY`是我`transform-origin`设置的，Z 坐标为`0`. 我希望能够以任意原点围绕绘制的轴旋转。如何？我不明白 CSS3 的`rotate3D(x,y,z,rotate)`工作原理。

![3D平面图](../Images/7a915cf6075abffe41612fc3fe9efcdd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T15:20:35.833

为了解决这个问题，我必须`perspective()`在父容器上应用修饰符 - 以便`rotate3D()`在正确的上下文中。

# qt - 从安装程序在 Mountain Lion 上安装 Qt

> ID：13176705
> 
> 赞同：4
> 
> 时间：2012-11-01T12:05:46.807
> 
> 标签：qt, osx-mountain-lion

我想在 Mountain Lion 上安装 Qt。为此，我访问了[http://qt-project.org/downloads](http://qt-project.org/downloads)并下载了最新的 Qt 库安装程序（4.8.3）。然后我按照说明进行操作，在安装过程结束时，我收到一条消息说“安装失败”。有人在Mountain Lion 下遇到这个版本的Qt 问题吗？

非常感谢！

托马斯。

PS：这是安装程序的完整日志：

```
Nov  1 10:48:43 Macintosh.local Installer[99200]: @(#)PROGRAM:Install  PROJECT:Install-735
Nov  1 10:48:43 Macintosh.local Installer[99200]: @(#)PROGRAM:Installer  PROJECT:Installer-614
Nov  1 10:48:43 Macintosh.local Installer[99200]: Hardware: MacBookPro9,1 @ 2.60 GHz (x 8), 8192 MB RAM
Nov  1 10:48:43 Macintosh.local Installer[99200]: Running OS Build: Mac OS X 10.8.2 (12C60)
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: PATH=/usr/bin:/bin:/usr/sbin:/sbin
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: TMPDIR=/var/folders/3x/1w64hbq54698swps28n102q00000gp/T/
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: SHELL=/bin/bash
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: HOME=/Users/twalter
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: USER=twalter
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: LOGNAME=twalter
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: SSH_AUTH_SOCK=/tmp/launch-yL5eiv/Listeners
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: Apple_Ubiquity_Message=/tmp/launch-kEy9gO/Apple_Ubiquity_Message
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: Apple_PubSub_Socket_Render=/tmp/launch-gkJ0hE/Render
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: DISPLAY=/tmp/launch-WODr77/org.macosforge.xquartz:0
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: COMMAND_MODE=unix2003
Nov  1 10:48:43 Macintosh.local Installer[99200]: Env: __CF_USER_TEXT_ENCODING=0x1F6:0:0
Nov  1 10:48:43 Macintosh.local Installer[99200]: Qt  Installation Log
Nov  1 10:48:43 Macintosh.local Installer[99200]: Opened from: /Volumes/Qt 4.8.3/Qt.mpkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/Qt.mpkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/Qt.mpkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_tools.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_tools.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_libraries.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_libraries.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_docs.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_docs.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_examples.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_headers.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_headers.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_imports.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_imports.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_plugins.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_plugins.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = x-disc://Qt%204.8.3/packages/Qt_translations.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: fileURLForURL = file://localhost/Volumes/Qt%204.8.3/packages/Qt_translations.pkg
Nov  1 10:48:44 Macintosh.local Installer[99200]: Product archive /Volumes/Qt 4.8.3/Qt.mpkg trustLevel=100
Nov  1 10:48:44 Macintosh.local Installer[99200]: Referenced component packages (8) trustLevel=100
Nov  1 10:49:58 Macintosh.local Installer[99200]: InstallerStatusNotifications plugin loaded
Nov  1 10:50:09 Macintosh.local runner[99252]: Administrator authorization granted.
Nov  1 10:50:09 Macintosh.local Installer[99200]: ================================================================================
Nov  1 10:50:09 Macintosh.local Installer[99200]: User picked Standard Install
Nov  1 10:50:09 Macintosh.local Installer[99200]: Choices selected for installation:
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt.mpkg : Qt Packages : 0.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Tools"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_tools.pkg : com.trolltech.qt4.tools : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Libraries"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_libraries.pkg : com.trolltech.qt4.libs : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Install: "Qt Documentation"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_docs.pkg : com.trolltech.qt4.docs : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Install: "Qt Examples"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_examples.pkg : com.trolltech.qt4.examples : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Headers"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_headers.pkg : com.trolltech.qt4.headers : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Imports"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_imports.pkg : com.trolltech.qt4.imports : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Plugins"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_plugins.pkg : com.trolltech.qt4.plugins : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]:   Upgrade: "Qt Translations"
Nov  1 10:50:09 Macintosh.local Installer[99200]:       Qt_translations.pkg : com.trolltech.qt4.translations : 4.8.0.4.8
Nov  1 10:50:09 Macintosh.local Installer[99200]: ================================================================================
Nov  1 10:50:09 Macintosh.local Installer[99200]: It took 0.00 seconds to summarize the package selections.
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFPKGDerivedDocument sortedPackageLocations]: result = (
        "file://localhost"
    )
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: location = file://localhost
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/Qt.mpkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_tools.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_libraries.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_docs.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_headers.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_imports.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_plugins.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/packages/Qt_translations.pkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: -[IFDInstallController(Private) _buildInstallPlan]: file://localhost/Volumes/Qt%204.8.3/Qt.mpkg
Nov  1 10:50:09 Macintosh.local Installer[99200]: Set authorization level to root for session
Nov  1 10:50:09 Macintosh.local runner[99252]: Administrator authorization granted.
Nov  1 10:50:09 Macintosh.local Installer[99200]: Will use PK session
Nov  1 10:50:09 Macintosh.local Installer[99200]: Starting installation:
Nov  1 10:50:09 Macintosh.local Installer[99200]: Configuring volume "Macintosh HD"
Nov  1 10:50:09 Macintosh.local Installer[99200]: Preparing disk for local booted install.
Nov  1 10:50:09 Macintosh.local Installer[99200]: Free space on "Macintosh HD": 700.85 GB (700845834240 bytes).
Nov  1 10:50:09 Macintosh.local Installer[99200]: Create temporary directory "/var/folders/3x/1w64hbq54698swps28n102q00000gp/T//Install.992003AWHIN"
Nov  1 10:50:09 Macintosh.local Installer[99200]: IFPKInstallElement (10 packages)
Nov  1 10:50:09 Macintosh.local Installer[99200]: Using authorization level of root for IFPKInstallElement
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: ----- Begin install -----
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: request=PKInstallRequest <10 packages, destination=/>
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: packages=(
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/Qt.mpkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_tools.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_libraries.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_docs.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_headers.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_imports.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_plugins.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/packages/Qt_translations.pkg>",
        "PKJaguarPackage <file://localhost/Volumes/Qt%204.8.3/Qt.mpkg>"
    )
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.tools (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.libs (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.headers (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.imports (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.plugins (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Will do receipt-based obsoleting for package identifier com.trolltech.qt4.translations (prefix path=)
Nov  1 10:50:09 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_tools.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:10 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_libraries.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:11 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_docs.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:16 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:20 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_headers.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:21 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_imports.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:21 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_plugins.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:21 Macintosh.local installd[38810]: PackageKit: Extracting file://localhost/Volumes/Qt%204.8.3/packages/Qt_translations.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root, uid=0)
Nov  1 10:50:21 Macintosh.local installd[38810]: PackageKit: update_dyld_shared_cache -overlay /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root
Nov  1 10:50:25 Macintosh.local installd[38810]: PackageKit: prevent user idle system sleep
Nov  1 10:50:25 Macintosh.local installd[38810]: PackageKit: suspending backupd
Nov  1 10:50:25 Macintosh.local installd[38810]: PackageKit: Shoving /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root (3 items) to /
Nov  1 10:50:26 Macintosh.local install_monitor[99260]: Temporarily excluding: /Applications, /Developer, /Library, /System, /bin, /private, /sbin, /usr
Nov  1 10:50:33 Macintosh.local installd[38810]: PackageKit: Executing script "./postflight" in /Volumes/Qt 4.8.3/packages/Qt_docs.pkg/Contents/Resources
Nov  1 10:50:33 Macintosh.local installd[38810]: PackageKit: Executing script "./postflight" in /Volumes/Qt 4.8.3/packages/Qt_examples.pkg/Contents/Resources
Nov  1 10:50:33 Macintosh.local installd[38810]: ./postflight: env: python: No such file or directory
Nov  1 10:50:33 Macintosh.local install_monitor[99260]: Re-included: /Applications, /Developer, /Library, /System, /bin, /private, /sbin, /usr
Nov  1 10:50:34 Macintosh.local installd[38810]: PackageKit: releasing backupd
Nov  1 10:50:34 Macintosh.local installd[38810]: PackageKit: allow user idle system sleep
Nov  1 10:50:34 Macintosh.local installd[38810]: PackageKit: Install Failed: Error Domain=PKInstallErrorDomain Code=112 "An error occurred while running scripts from the package “Qt_examples.pkg”." UserInfo=0x7feaaa815be0 {NSFilePath=./postflight, NSURL=file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg, PKInstallPackageIdentifier=com.trolltech.qt4.examples, NSLocalizedDescription=An error occurred while running scripts from the package “Qt_examples.pkg”.} {
        NSFilePath = "./postflight";
        NSLocalizedDescription = "An error occurred while running scripts from the package \U201cQt_examples.pkg\U201d.";
        NSURL = "file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg";
        PKInstallPackageIdentifier = "com.trolltech.qt4.examples";
    }
Nov  1 10:50:34 Macintosh.local Installer[99200]: install:didFailWithError:Error Domain=PKInstallErrorDomain Code=112 "An error occurred while running scripts from the package “Qt_examples.pkg”." UserInfo=0x7f9cd43c6ca0 {NSFilePath=./postflight, NSURL=file://localhost/Volumes/Qt%204.8.3/packages/Qt_examples.pkg, PKInstallPackageIdentifier=com.trolltech.qt4.examples, NSLocalizedDescription=An error occurred while running scripts from the package “Qt_examples.pkg”.}
Nov  1 10:50:35 Macintosh.local Installer[99200]: Install failed: The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance.
Nov  1 10:50:35 Macintosh.local Installer[99200]: IFDInstallController D4020140 state = 7
Nov  1 10:50:35 Macintosh.local Installer[99200]: Displaying 'Install Failed' UI.
Nov  1 10:50:35 Macintosh.local Installer[99200]: 'Install Failed' UI displayed message:'The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance.'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:14:20.530

我之前安装在 Lion 上。可能您可以尝试在 Mac 上编译 Qt 或尝试安装 Qt 4.7。

此链接可能会有所帮助：[http ://doc.qt.digia.com/latest/install-mac.html](http://doc.qt.digia.com/latest/install-mac.html)

# php - 带有 parent::display() 的 Joomla 3.0 PHP 中的错误 324 (net::ERR_EMPTY_RESPONSE) 错误；在控制器中

> ID：13176706
> 
> 赞同：1
> 
> 时间：2012-11-01T12:05:47.567
> 
> 标签：php, google-chrome, iis-7, joomla, joomla3.0

在 Joomla 3.0 的自定义组件控制器中，我收到以下错误

`Error 324 (net::ERR_EMPTY_RESPONSE)`

回应来访`/administrator/index.php?option=com_customname`

在页面显示的 /customname/controller.php 中注释掉，`parent::display();`但显然缺少关键信息/选项/表单。

硬刷新和清除缓存并不能解决问题，它不仅仅是 chrome 特定的，FF 和 IE 也返回一个空白页。

有任何想法吗？

提前致谢

**编辑 1**

*   登录时出错...没有任何记录。
*   网站用于在 localhost 上进行开发。
*   Win7 与 IIS7。

**编辑 2**

试图访问：administrator/index.php?option=com_custonname&view=customnametypo

`An error has occurred. 500 View not found [name, type, prefix]: customnametypo, html, custonameView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:35:09.143

与组件安装中的插入脚本创建的数据库列标题相比，问题是选择查询中的编码不正确。

Joomla 没有很好地处理它并抛出上述错误，而不是有用的 500 和错误日志/调试信息

# methods - 将 DTO 转换为实体的静态方法

> ID：13176707
> 
> 赞同：2
> 
> 时间：2012-11-01T12:05:48.563
> 
> 标签：methods, static, entity, instance, dto

实现从 DTO 到实体的转换器的更好方法是什么？使用带有静态方法的工厂进行转换或使用实例转换器对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T06:57:36.160

最后我以实例 Converter 对象结束，因为它们可能被模拟，这更适合测试

# c# - 如何使用 Sqlite-Net 创建 db3 数据库

> ID：13176710
> 
> 赞同：0
> 
> 时间：2012-11-01T12:05:54.800
> 
> 标签：c#, .net, mono, xamarin.android

在一个单声道项目中，我想创建一个数据库并使用它，而 Sqlite-Net 已针对单声道进行了优化，因此可以使用它。但我找不到任何文档如何用它创建数据库。所以我只是尝试连接到它，并希望它会说“数据库不存在，我会创建一个”，但我得到一个异常，所以方法不起作用

```
readonly string _pathToDatabase = "Meter_db.db3";
public InstallMeterRepository()
{
    if(!File.Exists(_pathToDatabase))
    {                
        using (var conn = new SQLite.SQLiteConnection(_pathToDatabase))
        {                   
            conn.CreateTable<InstalledMeter>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:01:28.317

如果要创建新数据库，则需要驱动程序： [http ://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

你也可以在这里查看：http://sqlite.phxsoftware.com/

使用这款免费软件管理器，您可以对数据库做任何您想做的事情：（推荐！）SQLite2009 Pro Enterprise Manager [http://osenxpsuite.net/?xp=3&uid=managementtools](http://osenxpsuite.net/?xp=3&uid=managementtools)

快乐发展！

恐惧

# c++ - 根据属性 c++ 对对象数组进行排序

> ID：13176713
> 
> 赞同：0
> 
> 时间：2012-11-01T12:06:11.467
> 
> 标签：c++, class, sorting

> **可能的重复：**
> [c++ sort with structs](https://stackoverflow.com/questions/873715/c-sort-with-structs)

```
#include <iostream>
using namespace std;

class fish{
private:
    int size;
    int price;
public:
    fish()
    {
        size=0;
        price=0;
    }
    void set_price(int x)
    {
        price=x;
    }
    void set_size(int g)
    {
        size=g;
    }
    int get_size()
    {
        return size;
    }
    int get_price()
    {
        return price;
    }
    void display()
    {
        cout<<" Fish price is "<<price<<" Fish size is "<<size<<endl;
    }
    void sort(fish h[5])
    {
        for (int o=0;o<=5;o++)
        {
            fish temp;
            temp.set_price(0);

            if (h[o].get_price()>h[o+1].get_price())
            {
                temp.get_price()=h[o].get_price();
                h[o].get_price()=h[o+1].get_price();
                h[o+1].get_price()=temp.get_price();

            }
        }
    }
};
void main()
{
    fish a;
    fish b[5];
    a.set_size(500);
    a.set_price(2);
    a.display();

    for (int i=0;i<=5;i++)
    {
        b[i].set_size(i*2);
        b[i].set_price(i*100);
    }
    for (i=0;i<=5;i++)
        b[i].display();
} 
```

我想知道我如何发送 array`b`并对其进行排序。我还想询问析构函数以及我可以将它们放入我的代码中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:38:10.397

如果您希望按给定元素对数组进行排序，则 STL 容器应该没问题，否则我会使用此方法

```
template<class T>
void quickSort(T * elements, unsigned int first, unsigned int last)
{
    if(first < last)                        //make sure params are in bounds
    {
        T t = elements[first];              //t is PIVOT
        unsigned lastLow = first;           //create last low item
        unsigned i;                         //used for loop/swapping
        for(i = first + 1; i <= last; i++)  //run through entire bounds
            if(elements[i] < t)             //if elements is less than Low
            {
                          << " adding one onto lastLow...\n";
                lastLow++;                  //move lastLow up one
                swap(elements,lastLow, i);  //swap lastlow and i
            }
        swap(elements,first, lastLow);      //swap first and lastlow
        if(lastLow != first)                //if lastlow is not first element
            quickSort(elements, first, lastLow - 1);
        if(lastLow != last)                 //if lastlow is not last element
            quickSort(elements, lastLow + 1, last);
    }
} 
```

这是一个常用的快速排序函数，用于对数组进行排序。只需替换正确的变量来表示您的数据例如 T * 元素变为 Fish * stuff， T t = Elements[first] 变为 double price = stuff[first] 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:32:02.093

要在排序时交换鱼，你应该写这个

```
fish tmp = h[o];
h[o] = h[o+1];
h[o+1] = tmp; 
```

您正在根据鱼的价格进行排序，但应该对整条鱼进行排序。

在您的另一个问题上，此代码中不需要析构函数。你的鱼类不需要做任何“清理”，所以它不需要析构函数。

# c# - 读取没有特定工作表名称的 XLS 的第一行

> ID：13176716
> 
> 赞同：0
> 
> 时间：2012-11-01T12:06:18.480
> 
> 标签：c#, excel

我已经找到了如何从具有特定工作表名称的 Excel 文件中读取第一行，但在我的情况下，我必须读取第一张工作表的第一行。

我怎样才能意识到这一点，或者我必须使用 CSV 而不是 XLS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:11:42.957

你看过[EPPlus 库](http://epplus.codeplex.com/releases/view/79802)吗？它使处理 excel 文件变得非常容易。

以下是使用 EPPlus 的方法：

```
FileInfo existingFile = new FileInfo("yourfilepathname");

using (var package = new ExcelPackage(existingFile))
{
    ExcelWorkbook workbook = package.Workbook;
    if (workbook != null && workbook.Worksheets.Count > 0)
    {
        //Gets the first worksheet. You can use index also to select your worksheet.
        ExcelWorksheet worksheet = workbook.Worksheets.First();

        int rowIndex = 0;
        int colIndex = 0;        
        //To get the first cell:
        var cellValue = worksheet.Cells[rowIndex, colIndex].Value;

        //YOU CAN ALSO DO A LOOP TO GET ALL VALUES FROM THE FIRST ROW.
    }
} 
```

[NPOI](http://npoi.codeplex.com/)是另一个不错的选择，它也可以处理 XLS 文件。

这是 NPOI 代码的片段：

```
HSSFWorkbook _hssfworkbook = new HSSFWorkbook(OpenFileStream(filePath));
//Getting the sheet
_currentSheet = _hssfworkbook.GetSheetAt(0);
//Getting the row:
_row = CurrentSheet.GetRow(0);
//Getting the cell
_cell = _row.GetCell(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:29:55.170

您是否考虑过[SpreadsheetLight](http://spreadsheetlight.com/)？这是你如何做到的：

```
SLDocument sl = new SLDocument("YourExcelFile.xlsx", "TheSheetName");
string FirstLine = sl.GetCellValueAsString("A1");
sl.CloseWithoutSaving(); 
```

免责声明：我写了 SpreadsheetLight。

# php - 带点号的字边界在字符串中

> ID：13176717
> 
> 赞同：0
> 
> 时间：2012-11-01T12:06:19.777
> 
> 标签：php, regex

我正在尝试匹配德语单词“Straße”的不同缩写（例如“Str”或“Str.”）

如何转义字符串中的点号？

```
\b(Str|Str.)\b 
```

以及如何设置不区分大小写？如果正则表达式也匹配“str”，“sTr”，......那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:10:11.943

您可以通过在它前面加上反斜杠来转义它。`i`您可以使用修饰符指定不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:10:28.857

您使用 . 转义特殊字符`\`。

```
\b(Str|Str\.)\b 
```

此外，`?`使前面的标记可选，因此我们可以浓缩为：

```
\b(Str\.?)\b 
```

`i`最后，使用修饰符指定不区分大小写。如何指定修饰符取决于语言。在大多数情况下，它们放在正则表达式的结束分隔符之后：

```
/\b(str\.?)\b/i 
```

# eclipse - 在eclipse中查找该类来自哪个库

> ID：13176718
> 
> 赞同：2
> 
> 时间：2012-11-01T12:06:24.630
> 
> 标签：eclipse, maven, import, jar

假设我的班级中有一条导入线：

```
import org.apache.log4j.Logger; 
```

我怎么知道它来自哪个库？假设我有 maven 文件夹，其中包含大量库。

**为什么？** 我想在我的其他项目中使用这个类/库，但我不知道要复制哪个 JAR。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:09:43.040

打开类型（Ctrl-Shift-T）回车`org.apache.log4j.Logger`，你会看到它属于哪个jar（灰色）。

# iphone - 如何在 Objective-C 中知道视频的方向？

> ID：13176721
> 
> 赞同：1
> 
> 时间：2012-11-01T12:06:28.153
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，我在其中从照片库拍摄视频。
视频可以纵向或横向模式拍摄。
我想知道视频的方向，这样我就可以在**MPMoviePlayerController**中旋转支架播放它。
我确实用**AVAssetImageGenerator**尝试过，但它需要时间，有时不能按要求生成图像。

# actionscript-3 - Actionscript 3 Case 语句与 hitTestObject × 22461

> ID：13176722
> 
> 赞同：0
> 
> 时间：2012-11-01T12:06:31.920
> 
> 标签：actionscript-3

我有一个名为 theCar 的嵌套影片剪辑，其中有 6 个元素。其中一个元素是一个名为 hit 的透明矩形。theCar 使用键盘键左右移动以捕捉汽车零件。我想要实现的是根据捕获的对象不同的汽车视图。汽车零件的捕获作为对象 [i] 可以正常工作，但使用我丢失的代码会丢失命中框，因此不会发生进一步的捕获。基本上它只是我想看的一个不同的 Catcher 电影剪辑。这个想法是通过添加捕获的零件来制造一辆完整的汽车。所以我对一个被捕获的对象进行了 hitTest。因此，如果 objects[I] = 2 则将添加引擎。如果 objects[I] =3 左翼等。

```
if (objects[i].hitTestObject(theCar.hit )) 

{

 //Scores for the Hits
 switch (object1)
 {
 case "[2]":
 score = 2;
 //change viewed object to carpl which shows the car plus engine
 //Movieclip theCar.carpl.view;
 stage.addChild(theCar.getChildAt(1));
 break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:37:24.017

您的 case 语句不评估 objects 数组的序数索引。

相反，它将是通过对象实例：

```
switch (object1)
{
    case object[2]:
        /* ... */
        break;
} 
```

# node.js - 使用 Imagemagick 的 Node.js 缩略图：非确定性损坏

> ID：13176723
> 
> 赞同：3
> 
> 时间：2012-11-01T12:06:32.700
> 
> 标签：node.js, imagemagick

我有一个 Node.js 服务器，它从数据库（mongodb）中的图像（640x640）动态生成并提供小（200x200）缩略图。我正在使用[node-imagemagick](https://github.com/rsms/node-imagemagick)模块进行缩略图。

我的代码大约 95% 的时间都在工作；客户端 (iOS) 上大约有 20 个（或更少）缩略图图像损坏，它报告：

> JPEG Corrupt JPEG 数据：数据段过早结束

对于损坏的图像，客户端显示图像的前 50% - 75%，其余部分被截断。

该行为是不确定的，并且损坏的特定图像会根据每个请求进行更改。

我正在使用以下代码调整图像大小并输出缩略图：

```
im.resize({
  srcData: image.imageData.buffer,
  width: opt_width,
}, function(err, stdout) {
  var responseHeaders = {};
  responseHeaders['content-type'] = 'image/jpeg';
  responseHeaders['content-length'] = stdout.length;
  debug('Writing ', stdout.length, ' bytes.');
  response.writeHead(200, responseHeaders);
  response.write(stdout, 'binary');
  response.end();
}); 
```

这里有什么问题？

笔记：

1.  `content-length`问题不在于标题不正确。当我省略标题时，结果是一样的。
2.  当我不调整图像大小时，全尺寸图像似乎总是很好。
3.  在研究这个问题时，我发现[了这个](https://stackoverflow.com/questions/6164095/reading-binary-data-from-a-child-process-in-node-js)问题和[这个](https://stackoverflow.com/questions/10221892/problems-serving-a-binary-image-passed-through-stdout-with-node)StackOverflow 问题，它们都通过增加缓冲区大小来解决问题。在我的情况下，图像非常小，所以这似乎不太可能负责。
4.  我最初分配`stdout`给 a`new Buffer(stdout, 'binary')`并写下那个。删除它（`'binary'`将被弃用）没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:07:42.920

问题似乎是由于[node-imagemagick](https://github.com/rsms/node-imagemagick) (0.1.2) 的版本稍旧；升级到 0.1.3 是解决方案。

如果这对任何人都有帮助，这里是我用来让 Node.js 排队并一次处理一个客户端请求的代码。

```
// Set up your server like normal.
http.createServer(handleRequest);
// ...

var requestQueue = [];
var isHandlingRequest = false;  // Prevent new requests from being handled.

// If you have any endpoints that don't always call response.end(), add them here.
var urlsToHandleConcurrently = {
  '/someCometStyleThingy': true
};

function handleRequest(req, res) {
  if (req.url in urlsToHandleConcurrently) {
    handleQueuedRequest(req, res);
    return;
  }
  requestQueue.push([req, res]);  // Enqueue new requests.
  processRequestQueue();          // Check if a request in the queue can be handled.
}

function processRequestQueue() {
  // Continue if no requests are being processed and the queue is not empty.
  if (isHandlingRequest) return;
  if (requestQueue.length == 0) return;

  var op = requestQueue.shift();

  var req = op[0], res = op[1];

  // Wrap .end() on the http.ServerRequest instance to
  // unblock and process the next queued item.
  res.oldEnd = res.end;
  res.end = function(data) {
    res.oldEnd(data);
    isHandlingRequest = false;
    processRequestQueue();
  };

  // Start handling the request, while blocking the queue until res.end() is called.
  isHandlingRequest = true;
  handleQueuedRequest(req, res);
}

function handleQueuedRequest(req, res) {
  // Your regular request handling code here...
} 
```

# python - Django：如何检查具有 ManyToManyField 的对象是否包含其他对象 ManyToManyField 的全部内容？

> ID：13176728
> 
> 赞同：1
> 
> 时间：2012-11-01T12:07:10.073
> 
> 标签：python, django, django-models, many-to-many

```
class Hero(models.Model):
   talents = models.ManyToManyField(Talent)
   (...)

class Talent(models.Model)
   required_talents = models.ManyToManyField('self', symmetrical=False)
   (...) 
```

我想创建方法`has_required_talents(self, talent)`for `Hero`，它将检查这`Hero`是否已`required_talents`选择`Talent`。

我试过这个：

```
def has_required_talents(self, talent)
   required_list = talent.talents_required.values_list('id', flat=True)
   hero_talents = self.hero.talents.values_list('id', flat=True)
   if required_list in hero_talents:
      return True
   return False 
```

但是，当我使用以下测试对其进行测试时，它无法正常工作：

```
class HeroTalents(TestCase):
 def setUp(self):
    self.hero=Hero('Duck')
    self.hero.save() 

 def test_has_required_talents(self):
    self.talent1 = Talent(name = "Overpower")
    self.talent1.save()
    self.talent2 = Talent(name = "Overpower2")
    self.talent2.save()
    self.talent2.talents_required.add(self.talent1)
    self.assertFalse(self.hero.has_required_talents(self.talent2), "test1")
    self.hero.talents.add(self.talent1)
    self.assertTrue(self.hero.has_required_talents(self.talent2), "test2")
    self.talent3 = Talent(name = "Overpower3")
    self.talent3.save()
    self.hero.talents.add(self.talent2)
    self.assertTrue(self.hero.has_required_talents(self.talent3), "test3")
    self.talent1.talents_required.add(self.talent3)
    self.assertFalse(self.hero.has_required_talents(self.talent1), "test4") 
```

需要做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:09:42.663

```
def has_required_talents(self, talent)
   required_list = talent.talents_required.values_list('id', flat=True)
   hero_talents = self.hero.talents.values_list('id', flat=True)
   for item in required_list:
      if not item in hero_talents:
         return False
   return True 
```

那将是一种基于列表的方法。您还可以将它们转换为集合：

```
def has_required_talents(self, talent)
   required_list = set(talent.talents_required.values_list('id', flat=True))
   hero_talents = set(self.hero.talents.values_list('id', flat=True))
   if required_list.issubset(hero_talents):
      return True
   return False 
```

但是（我不知道确切的内部结构，你可以运行一些测试）第一种方法应该更快，因为没有转换。

# javascript - Ajax 调用和 Windows 身份验证无法正常工作

> ID：13176729
> 
> 赞同：1
> 
> 时间：2012-11-01T12:07:11.630
> 
> 标签：javascript, asp.net-mvc, jquery

我有一个 asp.met mvc 4 项目。

这是我的视图代码，最小化：

```
@model E4.administrasjon.Models.ViewModels.vmRekv
<form action="#" method="post" class="form label-inline" id="saveTask">
 @Html.HiddenFor(m => m.rekv.RekvID)
<div class="field"><label for="Subject">Titel</label><input id="Subject" value="@Model.rekv.Subject" name="Subject" size="50" type="text" class="medium" /></div> 
```

然后我有这个javascript：

```
<script>
$(document).ready(function () {
    $('#btnSave').click(function () {
        alert("clicked");
        $.ajax({
            url: 'http://localhost:88/API/apiRekv',
            type: 'POST',
            dataType: 'json',
            data: $('form#saveTask').serialize(),
            success: function (data) {                        
                alert("OK");                   
            },
            error: function (data) {
                alert("Error");                    
            }
        });      
    });
}); 
```

控制器是一个简单的 WebApi 控制器

```
public void Post(vmRekv item)
    {           
        //Some insert to db code
} 
```

插入操作在打开/关闭匿名和 Windows 身份验证的情况下工作。但是当我打开 Windows 身份验证时。然后不调用 javascript 成功/失败事件。

当 Windows 身份验证关闭时，它应该被调用。

顺便说一句，我正在使用本地 IIS express

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:09:37.560

尝试使用 jsonp。或在您的网址末尾添加回调。本地主机:88/API/apiRekv?callback=?

# visual-studio-2010 - Windows 8“拆分应用程序项目”平铺导航到特定页面

> ID：13176735
> 
> 赞同：0
> 
> 时间：2012-11-01T12:07:53.953
> 
> 标签：visual-studio-2010, windows-8, microsoft-metro

我正在为Windows 8 PC的Metro App开发开发Visual Studio。当单击Group1上单击时，可以导航到“ HTML WebPage”，然后单击Group2时，将项目选择为“ Split App”时，可以导航到“另一个网页”。事实上，我只是想创建一些组，然后过渡到不同的网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:05:53.293

您应该更改项目单击事件中的代码：

因此，不要使用以下代码中的 Frame.Navigate，而是从单击的项目中获取要导航到的网站并将其启动到 Web 浏览器

```
 void ItemView_ItemClick(object sender, ItemClickEventArgs e)
    {
        // Navigate to the appropriate destination page, configuring the new page
        // by passing required information as a navigation parameter
        var groupId = ((SampleDataGroup)e.ClickedItem).UniqueId;
        this.Frame.Navigate(typeof(SplitPage), groupId);
    } 
```

# jquery - 为花哨的盒子添加标题

> ID：13176738
> 
> 赞同：3
> 
> 时间：2012-11-01T12:08:02.727
> 
> 标签：jquery, fancybox, fancybox-2

嗨，您可能认为这是一个愚蠢的问题，但我正在尝试将标题添加到花哨的框 2 中。我对 javascript 知之甚少，但在我的 html 底部有这个

```
<script type="text/javascript">
$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script> 
```

如果我尝试添加

```
$(".fancybox")
.attr('rel', 'gallery')
.fancybox({
    beforeLoad: function() {
        this.title = $(this.element).attr('caption');
}
}); 
```

我得到各种各样的语法错误。

网站是：[http ://bit.ly/Wan5kr](http://bit.ly/Wan5kr)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T19:01:20.887

您当前的脚本是：

```
 $(document).ready(function() {
  $(".fancybox").fancybox({
   helpers : { 
    title : { type : 'inside' }
   }, // helpers
   afterLoad : function() {
    this.title = (this.title ? '' + this.title + '<br />' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length;
   } // afterLoad
  }); // fancybox
 }); // ready 
```

...但应该是（如果您不想拥有“第 1 页，共 6 页”）：

```
 $(document).ready(function() {
  $(".fancybox").fancybox({
   helpers : { 
    title : { type : 'inside' }
   } // helpers
  }); // fancybox
 }); // ready 
```

另一方面，如果您更喜欢使用属性`caption`（因为当您悬停图像时`title`显示为*工具提示*`title`） ，则更改为`caption`

```
<a href="images/Gallery/large/wing-back-chair.jpg" caption="Early 1900'....." rel="Sold" class="fancybox"><img width="304" height="350" alt="Winged back chair and ottoman" src="images/Gallery/tn/wing-back-chair.jpg"></a> 
```

并使用这个脚本

```
 $(document).ready(function() {
  $(".fancybox").fancybox({
   helpers : { 
    title : { type : 'inside' }
   }, // helpers
   beforeLoad: function() {
    this.title = $(this.element).attr('caption');
   }
  }); // fancybox
 }); // ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:46:35.197

一个（也是最简单的）选项是设置父 href 的 title 属性。

就像：

```
<a href="./bigimg/image.jpg" title="My custom title here" id="example">
    <img src="./thumbs/image.jpg" alt="thumbnail of image">
</a> 
```

如果要将标题放置在灯箱内而不是其正下方，则需要更改“titlePostion”属性。像这样：

```
$("a.fancybox").fancybox({
    'titlePosition'  : 'inside'
}); 
```

除了“over”，您还可以将其放置在“inside”或“outside”。外部是默认的花式框行为。它将您的标题定位在灯箱的正下方（外部）。'Over' 将标题放在灯箱内，但在带有深色 Alpha 透明背景的图片顶部。'Inside' 将您的标题放在灯箱内，但在图片下方，在白色灯箱边框中。

[您可以在fancybox.net](http://fancybox.net/)的首页看到不同的结果。请参阅下面的三张图片：“*不同的标题位置 - 'outside'、'inside'和'over'* ”

# vba - 突出段落

> ID：13176740
> 
> 赞同：1
> 
> 时间：2012-11-01T12:08:09.883
> 
> 标签：vba, ms-word

突出显示斜体文本的代码：

```
Sub Bold_Italic()
    Dim rng As Range
    Set rng = ActiveDocument.Range
    rng.Collapse Direction:=wdCollapseStart

    rng.Find.ClearFormatting
    rng.Find.Font.Italic = True
    rng.Find.Replacement.ClearFormatting
    rng.Find.Replacement.Highlight = True
    rng.Find.Replacement.Font.Color = wdColorRed
    With rng.Find
        .Text = ""
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    rng.Find.Execute Replace:=wdReplaceAll
End Sub 
```

如何突出显示整个段落或选择一个段落？
实际上，我想逐段复制并粘贴到另一个文档中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:24:19.637

我相信你正在寻找`range.select`

```
Sub Macro()
Dim i As Integer
    For i = 1 To ActiveDocument.Paragraphs.Count
        Dim range As range
        Set range = ActiveDocument.Paragraphs(i).range

        'range.Characters.Count > 1 means there is text in the paragraph
         If range.Characters.Count > 1 Then
         'Handle the desired operation with the paragraph text
            range.Select
            MsgBox (range.Text)
         End If
    Next i
End Sub 
```

# r - 如何从长格式数据框中计算成对计数表

> ID：13176741
> 
> 赞同：4
> 
> 时间：2012-11-01T11:05:00.123
> 
> 标签：r, dataframe

`id`我有一个带有列（主键）和`featureCode`（分类变量）的“长格式”数据框。每条记录都有 1 到 9 个分类变量值。例如：

```
id  featureCode
5   PPLC
5   PCLI
6   PPLC
6   PCLI
7   PPL
7   PPLC
7   PCLI
8   PPLC
9   PPLC
10  PPLC 
```

我想计算每个功能代码与其他功能代码一起使用的次数（标题的“成对计数”）。在这个阶段，每个特征码的使用顺序并不重要。我设想结果将是另一个数据框，其中行和列是特征代码，单元格是计数。例如：

```
 PPLC  PCLI  PPL
PPLC  0     3     1
PCLI  3     0     1
PPL   1     1     0 
```

不幸的是，我不知道如何执行此计算，并且在搜索建议时我一直处于空白状态（我怀疑主要是因为我不知道正确的术语）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T22:37:39.087

这是一种`data.table`类似于@mrdwab的方法

如果`featureCode`是`character`

```
library(data.table)

DT <- data.table(dat)
# convert to character
DT[, featureCode := as.character(featureCode)]
# subset those with >1 per id
DT2 <- DT[, N := .N, by = id][N>1]
# create all combinations of 2
# return as a data.table with these as columns `V1` and `V2`
# then count the numbers in each group
DT2[, rbindlist(combn(featureCode,2, 
      FUN = function(x) as.data.table(as.list(x)), simplify = F)), 
    by = id][, .N, by = list(V1,V2)]

     V1   V2 N
1: PPLC PCLI 3
2:  PPL PPLC 1
3:  PPL PCLI 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:41:18.180

如果您不需要那种确切的结构，而只需要获得成对计数，您可以尝试这种方法：

这是您的数据：

```
dat <- read.table(header = TRUE, 
       text = "id  featureCode
                5         PPLC
                5         PCLI
                6         PPLC
                6         PCLI
                7          PPL
                7         PPLC
                7         PCLI
                8         PPLC
                9         PPLC
               10         PPLC") 
```

我们只对`id`有多个 s 的 s感兴趣`featureCode`：

```
dat2 <- dat[ave(dat$id, dat$id, FUN=length) > 1, ] 
```

将这些数据作为列表将很有用，因为它可以让我们`lapply`用来获取成对组合。

```
dat2 <- split(dat2$featureCode, dat2$id) 
```

如果您愿意，可以将下一步分解为中间部分，但基本思想是在每个列表项中创建向量的组合，然后将未列出的输出制成表格。

```
table(unlist(lapply(dat2, function(x) 
  combn(sort(x), 2, FUN = function(y) 
    paste(y, collapse = "+")))))
# 
#  PCLI+PPL PCLI+PPLC  PPL+PPLC 
#         1         3         1 
```

### 更新：另一个问题的更好答案

稍作修改，@flodel 对[另一个问题](https://stackoverflow.com/q/13190627/1270695)的回答在这里适用。它需要`igraph`安装包 ( `install.packages("igraph")`)。

```
dat2 <- dat[ave(dat$id, dat$id, FUN=length) > 1, ]
dat2 <- split(dat2$featureCode, dat2$id)
library(igraph)
g <- graph.edgelist(matrix(unlist(lapply(dat2, function(x) 
  combn(as.character(x), 2, simplify = FALSE))), ncol = 2, byrow=TRUE), 
                    directed=FALSE)
get.adjacency(g)
# 3 x 3 sparse Matrix of class "dgCMatrix"
#      PPLC PCLI PPL
# PPLC    .    3   1
# PCLI    3    .   1
# PPL     1    1   . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:24:57.047

我会使用 SQL，在 R 中它可以通过[sqldf](http://cran.r-project.org/web/packages/sqldf/index.html)包获得。

提取所有可能的组合，例如：

```
sqldf("select distinct df1.featureCode, df2.featureCode
       from df df1, df df2       
       ") 
```

然后您可以提取结果元素：（
也许只对所有组合使用 for 循环）

PCLI-PPLC

```
sqldf("select count(df1.id)
       from df df1, df df2
       where df1.id = df2.id
       and df1.featureCode = 'PCLI' and df2.featureCode = 'PPLC'
       ") 
```

PPLC-PPL

```
sqldf("select count(df1.id)
       from df df1, df df2
       where df1.id = df2.id
       and df1.featureCode = 'PPLC' and df2.featureCode = 'PPL'
       ") 
```

PCLI-PPL

```
sqldf("select count(df1.id)
       from df df1, df df2
       where df1.id = df2.id
       and df1.featureCode = 'PCLI' and df2.featureCode = 'PPL'
       ") 
```

肯定有一些更简单的解决方案，特别是如果您需要考虑更多组合。也许搜索列联表可以帮助您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T03:12:57.257

我认为另一种解决方案在概念上很容易理解。您在这里有一个二分图，只需将该图投影到“featureCode”顶点上即可。以下是如何使用 igraph 包执行此操作：

```
dat <- read.table(header = TRUE, stringsAsFactors=FALSE,
                  text = "id  featureCode                                       
                          5         PPLC                                                  
                          5         PCLI                                                  
                          6         PPLC                                                  
                          6         PCLI                                                  
                          7          PPL                                                  
                          7         PPLC                                                  
                          7         PCLI                                                  
                          8         PPLC                                                  
                          9         PPLC                                                  
                         10         PPLC")

g <- graph.data.frame(dat, vertices=unique(data.frame(c(dat[,1], dat[,2]),
                          type=rep(c(TRUE, FALSE), each=nrow(dat)))))

get.adjacency(bipartite.projection(g)[[1]], attr="weight", sparse=FALSE)

#      PPLC PCLI PPL
# PPLC    0    3   1
# PCLI    3    0   1
# PPL     1    1   0 
```

# linq - 使用 LINQ 基于嵌套列表过滤列表

> ID：13176743
> 
> 赞同：2
> 
> 时间：2012-11-01T12:08:23.173
> 
> 标签：linq

假设我们有一个项目列表，这个列表包含另一个用户列表。

如何构建一个 LINQ 查询，让我根据他的 UserID 获取特定用户的所有项目？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:14:31.410

让我们尝试这样的事情：

```
Projects.Where(pr => pr.Users.Any(us => us.ID == uid) ) 
```

我建议你阅读LINQ[教程](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)或[这里](http://www.dotnetperls.com/linq)

# css - CSS关键帧动画CPU占用率高，应该这样吗？

> ID：13176746
> 
> 赞同：87
> 
> 时间：2012-11-01T12:08:32.507
> 
> 标签：css

我在几个元素上使用以下关键帧动画：

```
@keyframes redPulse {
    from { background-color: #bc330d; box-shadow: 0 0 9px #333; }
    50% { background-color: #e33100; box-shadow: 0 0 18px #e33100; }
    to { background-color: #bc330d; box-shadow: 0 0 9px #333; }
}
@-webkit-keyframes redPulse {
    from { background-color: #bc330d; box-shadow: 0 0 9px #333; }
    50% { background-color: #e33100; box-shadow: 0 0 18px #e33100; }
    to { background-color: #bc330d; box-shadow: 0 0 9px #333; }
}
.event_indicator {
    display: inline-block;
    background-color: red;
    width: 5px;
    margin-right: 5px;

    -webkit-animation-name: redPulse;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: infinite;

    animation-name: redPulse;
    animation-duration: 1s;
    animation-iteration-count: infinite;
} 
```

在我的电脑上，Chrome 和 Firefox 的 CPU 使用率都在 40% 左右。是动画的当前状态（很好，但现在不可用）还是我错过了一些神奇的属性？

您可以使用相同的动画检查以下示例：http: [//jsfiddle.net/Nrp6Q/](http://jsfiddle.net/Nrp6Q/)

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-08T16:17:33.170

是的，这很正常，因为页面上有几个无限循环动画。因此，在渲染这些元素时，CPU 会不断地工作。有一个“神奇”属性可​​以显着降低 CPU 使用率，那就是：

```
transform: translateZ(0); 
```

这会将元素合成到它们自己的层中（通过诱使浏览器认为它将进行 3D 转换），并且在大多数情况下，浏览器应该利用 GPU 加速，从而减轻 CPU 的负担。对我来说，这减少了大约 20%（几乎一半）。

要了解有关此技术的更多信息，请查看：[http ://ariya.blogspot.com/2011/07/fluid-animation-with-accelerated.html](http://ariya.blogspot.com/2011/07/fluid-animation-with-accelerated.html)

此外，动画中的关键帧越多，它的负担也就越重。只需尝试剪掉中间关键帧的动画，您就会看到 CPU 使用率再次大幅下降 (~10-12%)。

最后，并不是所有的属性都是平等的——box-shadow 比背景颜色更难让浏览器流畅地制作动画。在保留所有关键帧不变但删除 box-shadow 属性的情况下，使用 translateZ(0) 技巧让我的 CPU 使用率仅徘徊在 10-11%。

尽管这么说让我很痛苦，但对于无限循环动画，动画 .gif 在当前浏览器动画状态下的表现会比 CSS3 好得多，尤其是如果您计划让其中许多动画保持在页面一段时间。

**2017 年更新：**

对于那些仍在寻找解决此问题和答案的方法的人，`translate3d(0, 0, 0)`提供与 相同的好处`translateZ(0)`，您只是同时设置`translateX()`和`translateY()`。请忽略[@Farside](https://stackoverflow.com/users/4354249/farside)在他的演示中使用的评论，`translate3d(X, Y, Z)`但没有将其与 进行比较`translate(X, Y)`，这表明使用这种技术仍然会产生重大影响。

根据[这个问题](https://stackoverflow.com/questions/10814178/css-performance-relative-to-translatez0)，有些人发现在所有浏览器，尤其是 Chrome 中，使用`transform: rotateZ(360deg)`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-01-23T00:45:05.060

减少 CPU 负载的一种可能方法是使用所谓`null transform hack`的，通常被誉为*银弹*的东西。在许多情况下，它将极大地提高 WebKit 和 Blink 浏览器（如 Chrome、Opera 和 Safari）的渲染性能。

## “Null tr​​ansform hack”的使用（一种硬件合成模式）

空变换 hack 基本上做了两件事：

1.  它打开*硬件合成模式*（假设平台支持）
2.  它创建一个具有自己的*背衬表面的新层*

要“强制”浏览器，只需将以下 CSS 属性之一添加到元素：

```
transform: translateZ(0);

/* or its friend: */
transform: translate3d(0, 0, 0); 
```

使用 3D 变换时，最好同时具有这些属性[以提高性能](https://stackoverflow.com/a/10133679/4354249)：

```
backface-visibility: hidden;
perspective: 1000; 
```

## “空转换黑客”的注意事项

**在 CSS3 中为大量对象启用硬件加速可能会降低性能！** 显然，每个空 3D 变换都会创建一个新图层。但是，强制黑客层创建可能并不总是解决页面上某些性能瓶颈的方法。层创建技术可以提高页面速度，但它们是有代价的：它们占用了系统 RAM 和 GPU 中的内存。因此，即使 GPU 做得很好，许多对象的传输也可能是一个问题，因此使用 GPU 加速可能不值得。来自[W3C](https://drafts.csswg.org/css-will-change/)的引用：

> 但是，在新层中设置元素是一项相对昂贵的操作，它可以将变换动画的开始延迟明显的几分之一秒。

在使用 3D 加速时，移动一些大物体比移动大量小物体具有更高的性能。所以**必须明智地使用它们**，并且您需要确保硬件加速您的操作将真正有助于您的页面性能，并且性能瓶颈不是由页面上的另一个操作引起的。

此外，GPU 专为执行复杂的数学/几何计算而设计，将操作卸载到**GPU 上会产生巨大的功耗**。显然，当硬件启动时，目标设备的电池也会启动。

## 现代方式：`will-change`财产

进步不是站在一个地方... W3C引入了[`will-change`](https://www.w3.org/TR/css-will-change/)CSS属性。长话短说，该`will-change`属性允许您提前通知浏览器您可能对元素进行哪些类型的更改，以便它可以在需要之前设置适当的优化。

这是他们在[草案](https://drafts.csswg.org/css-will-change/)中所说的：

> 本`will-change`规范中定义的属性允许作者提前声明未来可能更改的属性，因此 UA 可以在需要它们之前的某个时间设置适当的优化。这样，当实际更改发生时，页面会以快速的方式更新。

使用`will-change`, 向浏览器提示即将进行的转换可以很简单，只需将此规则添加到您希望转换的元素中：

```
will-change: transform; 
```

在为移动设备开发时，开发人员在编写移动 Web 应用程序时不得不考虑广泛的设备限制。浏览器变得越来越聪明，有时，最好让平台本身来决定，而不是重叠加速并以一种骇人听闻的方式强迫行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-02T11:11:23.593

在使用 CSS3 为某些元素设置动画时，我也遇到过类似的 CPU 使用率高的情况。我正在为大约 7 个元素的“左”属性设置动画，在我的整个页面中使用了一些不透明度和阴影属性。我决定改用 jQuery.animate，遗憾的是它根本没有提高性能。在显示页面时，我的 CPU (i7) 仍保持在 ~9-15%，一些技巧（translateZ 等）也没有真正提高性能 - 虽然我的布局搞砸了（涉及一些绝对定位的元素，哎哟！）。

然后我偶然发现了这个精彩的扩展： http: [//playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)

我只是引用了 .js 文件，没有对 jQuery 转换进行任何更改，我的 CPU 使用率现在在同一页面上为 1-2%。

我的建议：当使用 CSS3 过渡遇到 CPU 问题时，切换到 jQuery + animate-enhanced-plugin。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-08T01:15:48.447

您还可以在以下任何要使用 GPU 而不是 CPU 的类元素上使用它

```
.no-cpu {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    -ms-transform: translateZ(0);
}

<element class="event_indicator no-cpu">animation...</element > 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-09T16:53:08.403

对于此处报告的“脉冲”背景动画的特殊情况，我提出了一个 css+js 解决方案。

在我的例子中，背景动画是在 background-position 属性上而不是在 background-color 上，但原理是一样的。

好的，假设您有一个具有特定背景的块：

```
<div class="nice-block">...</div> 
```

让我们设计它：（scss）

```
.nice-block {
  background-color: red;
  //or it can be: background: linear-gradient(45deg, #red, #white, #red);
  //and:          background-size: 600% 600%;

  //the transform and will-change properties
  //are here to only enable GPU
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  will-change: transform;

  transition: background-color 5s ease;
  //if you want to add a pulsing effect 
  //to a gradient, see the following two lines:
  // background-position: 0% 50%!important;
  // transition: background-position 5s ease;

  &.animated {
    background-color: white;
    //and in case of gradient animation:
    // background-position: 100% 50%!important;
  }
} 
```

现在是时候通过使用一些 JavaScript 向块中添加一个“动画”类来实现效果了：

```
var bgAnimateTimer;
function animateBg () {
  clearTimeout(bgAnimateTimer);
  bgAnimateTimer = setTimeout(function () {
    clearTimeout(bgAnimateTimer);
    bgAnimateTimer = setTimeout(function () {

      document.querySelector('.nice-block').classList.toggle('animated');

      //jQuery alternative is:
      // $('.nice-block').toggleClass('animated');

      animateBg ();
    }, 5000); //5 seconds for the animation effect
  }, 2500); //2.5 seconds between each animation
}

animateBg (); 
```

在我的情况下，这将性能提高了约 15 倍。

(i) 如果您想要不同于 5 秒的值，请注意在 css 和 js 中正确计算转换和超时的秒数。

# c++ - “避免将句柄返回到对象内部”，那么替代方案是什么？

> ID：13176751
> 
> 赞同：14
> 
> 时间：2012-11-01T12:08:45.780
> 
> 标签：c++, effective-c++

[Scott Meyers 编写的 Effective C++](http://books.google.ch/books/about/Effective_C++.html?id=umgPAQAAMAAJ)在第 5 章第 28 条中指出要避免将“句柄”（指针、引用或迭代器）返回到对象内部，这绝对是一个好点。

即不要这样做：

```
class Family
{
public:
    Mother& GetMother() const;
} 
```

因为它破坏了封装并允许更改私有对象成员。

甚至不要这样做：

```
class Family
{
public:
    const Mother& GetMother() const;
} 
```

因为它可能导致“悬空句柄”，这意味着您保留对已销毁对象成员的引用。

现在，我的问题是，有什么好的选择吗？想象妈妈很重！如果我现在返回 Mother 的副本而不是参考，GetMother 将成为一项相当昂贵的操作。

您如何处理此类案件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T12:33:29.017

首先，让我重申一下：最大的问题不是生命周期，而是封装问题。

封装不仅意味着没有人可以在您不知道的情况下修改内部，封装意味着没有人知道您的类中的事物是如何实现的，因此只要您保持接口相同，您就可以随意更改类内部。

现在，你返回的引用是否`const`无关紧要：你不小心暴露了`Mother`你的类中有一个对象的事实，`Family`现在你无法摆脱它（即使你有更好的表示），因为你所有的客户可能会依赖它，并且必须更改他们的代码......

最简单的解决方案是按值返回：

```
class Family {
public:

    Mother mother() { return _mother; }
    void mother(Mother m) { _mother = m; }

private:
    Mother _mother;
}; 
```

因为在下一次迭代中，我可以在`_mother`不破坏界面的情况下删除：

```
class Family {
public:

     Mother mother() { return Mother(_motherName, _motherBirthDate); }

     void mother(Mother m) {
         _motherName = m.name();
         _motherBirthDate = m.birthDate();
     }

private:
     Name _motherName;
     BirthDate _motherBirthDate;
}; 
```

看看我是如何在不改变界面的情况下完全改造内部结构的？十分简单。

*注意：显然这种转换只是为了效果......*

显然，这种封装是以牺牲一些性能为代价的，这里有一个张力，每次编写 getter 时，是否应该首选封装还是性能是你的判断。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T12:30:40.550

可能的解决方案取决于您的类的实际设计以及您认为什么是“对象内部”。

1.  `Mother`只是实现细节，`Family`可能对`Family`用户完全隐藏
2.  `Family`被认为是其他公共对象的组合

`Family`在第一种情况下，您应完全封装子对象并仅通过函数成员（可能复制`Mother`公共接口）提供对它的访问：

```
class Family
{
  std::string GetMotherName() const { return mommy.GetName(); }
  unsigned GetMotherAge() const { return mommy.GetAge(); }
  ...
private:
   Mother mommy;
   ...
}; 
```

好吧，如果`Mother`接口很大可能会很无聊，但这可能是设计问题（好的接口应该有 3-5-7 个成员），这会让你以更好的方式重新审视和重新设计它。

在第二种情况下，您仍然需要返回整个对象。有两个问题：

1.  封装分解（最终用户代码将取决于`Mother`定义）
2.  所有权问题（悬空指针/引用）

解决问题 1 使用接口而不是特定类，解决问题 2 使用共享或弱所有权：

```
class IMother
{
   virtual std::string GetName() const = 0;
   ...
};

class Mother: public IMother
{
   // Implementation of IMother and other stuff
   ...
};

class Family
{
   std::shared_ptr<IMother> GetMother() const { return mommy; }
   std::weak_ptr<IMother> GetMotherWeakPtr() const { return mommy; }

   ...
private:
   std::shared_ptr<Mother> mommy;
   ...
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T12:16:48.527

如果只读视图是您所追求的，并且由于某种原因您需要避免悬空的句柄，那么您可以考虑返回一个`shared_ptr<const Mother>`.

这样，`Mother`对象可以比对象寿命长`Family`。当然，它也必须存储它`shared_ptr`。

部分考虑是您是否要使用过多`shared_ptr`的 s 创建引用循环。如果是，那么您可以考虑`weak_ptr`，也可以考虑只接受悬空句柄的可能性，但编写客户端代码来避免它。例如，没有人会过分担心`std::vector::at`当向量被销毁时返回的引用会变得陈旧。但是，容器是一个类的极端例子，它故意公开它“拥有”的对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T12:16:40.937

这又回到了一个基本的 OO 原则：

```
Tell objects what to do rather than doing it for them. 
```

你需要`Mother`做一些有用的事情吗？让`Family`对象为你做这件事。通过对象上的方法的参数将任何外部依赖项封装在一个漂亮的接口（`Class`在 c++ 中）中。`Family`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T12:24:53.593

> 因为它可能导致“悬空句柄”，这意味着您保留对已销毁对象成员的引用。

您的用户也可以取消引用`null`或同样愚蠢的事情，但他们不会这样做，也不会这样做，只要生命周期清晰且定义明确。这没有什么问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T12:31:04.333

这只是语义问题。在您的情况下，`Mother`不是内部结构，而不是其实现细节*。* 类实例可以在 a 中引用，也可以在许多其他实体中引用。此外，实例生命周期甚至可能与生命周期无关。`Family``Mother``Family``Mother``Family`

所以更好的设计是存储在`Family`一个中，并在界面`shared_ptr<Mother>`中公开它而不用担心。`Family`

# java - 任何要启动、关闭 Java 进程的模块（如 Jetty start.jar）？

> ID：13176753
> 
> 赞同：0
> 
> 时间：2012-11-01T12:08:49.667
> 
> 标签：java, startup, lifecycle, shutdown-hook

大多数服务器都喜欢`Jetty`或`Weblogic`提供某种机制来通过调用（有时超过`jmx`）来启动或关闭服务器。可以始终保持东西从主要运行：

```
public static void main(String args[]) {
  try {
     Setup Spring context.....

     Object lock = new Object();
     synchronized (lock) {
          lock.wait();  
     }
  } catch (Exception e) {
     e.printStackTrace();
  }
} 
```

并杀死进程PID。但认为可能有一个不错的开源解决方案在网络空间中徘徊，增加了`JMX`花里胡哨的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:17:47.940

也许您想从查看[Commons Daemon](http://commons.apache.org/daemon/)和[Commons Launcher](http://commons.apache.org/launcher/)的组合开始。不确定那里是否有任何 JMX 风吹草动，但这为服务器进程的操作系统管理界面提供了挂钩。

# symfony - 在没有虚拟主机和 Apache 的情况下使用 Silex

> ID：13176757
> 
> 赞同：1
> 
> 时间：2012-11-01T12:09:06.743
> 
> 标签：symfony, apache2, silex

我正在 Github 上使用 Fabien 的骨架设置我的第一个 Silex 项目： [https ://github.com/fabpot/Silex-Skeleton](https://github.com/fabpot/Silex-Skeleton)

由于某种原因，我无法为该项目创建虚拟主机，silex 项目保留在子目录中。

我的目录结构如下所示：

```
/my/example.com/htdocs/myapp/
      ../src/app.php
      ../cache
      ../config
      ../templates
      ../vendor
      ../web/index.php 
```

我想通过 URL 访问我的应用程序： [http ://example.com/myapp/hello/Fabien/](http://example.com/myapp/hello/Fabien/)

我`.htaccess`在 htdocs/myapp 中创建了一个文件

```
<IfModule mod_rewrite.c>
   Options -MultiViews
   RewriteEngine On
   RewriteBase /myapp
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^ web/index.php [L]
</IfModule> 
```

现在我有像 [http://example.com/myapp/index.php/hello/Fabien/这样的网址](http://example.com/myapp/index.php/hello/Fabien/)

我怎样才能摆脱 index.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:59:06.767

您应该将`RewriteBase`指令更改为`/myapp/web`：

```
RewriteBase /myapp/web 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T11:17:11.877

仅供参考：您可以使用 php 内置 Web 服务器运行 Silex，完全不使用 Apache。这对于在本地开发环境中快速启动黑客/原型设计非常方便。Fabien 骨架的 composer.json 包含启动本地 Web 服务器的指令。`composer run`您可以通过在项目目录中执行来做到这一点。

这种方法的限制是 composer 将在 300 秒内停止服务器。为避免这种情况 - 您应该直接执行以下命令：`php -S localhost:8888 -t web web/index_dev.php`. 你好页面将在[http://localhost:8888/hello/Fabien/](http://localhost:8888/hello/Fabien/)可用。

# objective-c - 你什么时候在self后面使用点

> ID：13176758
> 
> 赞同：1
> 
> 时间：2012-11-01T12:09:10.177
> 
> 标签：objective-c

据我了解，self 指的是当前类，当我在 self 之后使用一个点时，就是使用它的一个属性。在这里的代码中有一个用途`self.popOperand`，我不明白 popOperanad 是否不是属性。我不明白的另一件事是为什么 `[self pushOperand:result];`有效而`[self.pushOperand:result];`无效。

```
#import "Calcbrain.h"
@interface Calcbrain()

@property (nonatomic,strong) NSMutableArray *operandStack;

@end

@implementation Calcbrain
@synthesize operandStack  = _operandStack;

-(NSMutableArray *) operandStack
{
    if(_operandStack == nil) _operandStack = [[NSMutableArray alloc]init];
    return _operandStack;
}
-(double)popOperand
{
    NSNumber *objectNum = [self.operandStack lastObject];
    if (objectNum)[self.operandStack removeLastObject];
    return [objectNum doubleValue];

}
/*-(void) setOperandStack:(NSMutableArray *)operandStack
{
    _operandStack = operandStack;
}*/

-(void)pushOperand:(double)opernand
{
    [self.operandStack addObject:[NSNumber numberWithDouble:opernand]];

}
-(double)performOperation:(NSString *)operation
{
    double result=0;

    if([operation isEqualToString:@"+"])
    {
        result = self.popOperand + self.popOperand;
    }
    else if ([@"*" isEqualToString:operation])
    {
        result = self.popOperand * self.popOperand;
    }
    [self pushOperand:result];

    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:29:55.273

虽然该`.`符号主要用于属性，但它可以用于返回值的无参数方法。为什么？因为属性的合成 getter 是相同的形式。

```
-(double)calcValue {
    ....
    return value;
} 
```

相当于属性声明：

```
@property (nonatomic, readonly) double calcValue; 
```

虽然可能没有属性声明，但这并不意味着`.`不能使用该符号。编译器将在编译时有效地将`.`符号更改为方法调用，就像*语法糖*`.`的一种形式一样。如此：

 *```
self.popOperand
// Translates to
[self popOperand]; 
```

这导致第 2 部分，为什么不起作用`[self.pushOperand:result];`？原因是`.`不支持直接传递参数。

将参数分配/推送到属性的唯一方法是 via `self.pushOperand = result`，但这不起作用，因为符号分配映射到的对应`- (void)setPushOperand:(double)pushOperand;`项`.`没有。

`[self pushOperand:result];`有效，因为您在调用特定方法时是明确的，称为`pushOperand:`.

总体而言，`.`仅保留属性的符号，如果您使用的方法并非设计为“属性”，请明确说明。

**Update:** `self`是一个保留关键字，它表示指向我们当时正在工作的实例的指针。

例如，我可以`Calcbrain` **在 Calcbrain 之外创建两个实例，例如 BrainViewController**：

```
Calcbrain* instance1;
Calcbrain* instance2; 
```

现在，`Calcbrain`在其中声明了方法，让我们`-(double)performOperation:(NSString *)operation`用作示例。现在，如果我想从 BrainViewController 调用它，我会这样做：

```
[instance1 performOperation:@"+"];
[instance2 performOperation:@"+"]; 
```

因为我们正在调用一个属于另一个类的方法，所以我必须确定我创建的正确实例来引用它（即`instance1`和`instance2`）。但是我如何从类本身中调用它，并确保它适用于正确的实例？我创建的实例不知道我创建的其他实例。使用`self`. `self`允许您在方法中引用自己。因此，如果我想`performOperation`在`Calcbrain`自身内部，我需要使用 self：

```
[self performOperation:@"+"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:28:46.617

“点”只是一个[语法糖](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17)，即使没有声明的属性也可以使用。表达方式

```
a.someProperty 
```

相当于

```
[a someProperty] 
```

和表达式

```
a.someProperty = c 
```

相当于

```
[a setSomeProperty:c] 
```

因此，`self.popOperand`与 是一样的`[self popOperand]`。在一些荒谬的情况下，也可以使用“点”，例如`[NSMutableArray alloc].init`.

* * *

**非常不鼓励**对非属性使用“点”语法。如果我是这段代码的维护者，我会全部改`self.popOperand`回`[self popOperand]`以避免混淆。

（顺便说一句，没有定义`+`首先评估哪一方。更好的改变

```
result = [self popOperand] + [self popOperand] 
```

到

```
double operand1 = [self popOperand]
double operand2 = [self popOperand]
result = operand1 + operand2; 
```

`-`当您定义and时，这将是一个麻烦`/`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:30:48.303

点用于访问类的属性。您还可以访问不带点的属性和方法：

```
[classInstance someMethodOrProperty]; 
```

此代码：等`[classInstance someProperty];`于此代码`classInstance.someProperty;`您不能调用带有点之类的属性的方法。*

# php - Codeigniter Tank Auth - 从配置中删除“index.php”会导致无限循环

> ID：13176761
> 
> 赞同：1
> 
> 时间：2012-11-01T12:09:19.600
> 
> 标签：php, codeigniter, tankauth

我已经从这里安装了 Codeigniter 的**Tank Auth**身份验证库的基本安装：[https ://github.com/ericbae/XTA2/](https://github.com/ericbae/XTA2/)

一切正常，直到我从 config.php 文件中删除“index.php”：

`$config['index_page'] = '';`
`$config['enable_query_strings'] = FALSE;`

现在我的浏览器进入一个无限的重定向循环，并告诉我：

> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

萤火虫看起来像这样：

![在此处输入图像描述](../Images/eb0b63de4179d7b77951b6e16193d639.png)

我的 htaccess 文件如下所示：

```
Options +FollowSymLinks All -Indexes

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /path/to/my/site/

    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ index.php?/$1 [L]

    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ index.php?/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 index.php
</IfModule> 
```

这是我与许多其他 codeigniter 项目一起使用的普通 htaccess 文件，它似乎适用于这些项目。

**这到底是什么原因造成的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:26:06.290

改变

`$config['uri_protocol']`为我做了伎俩

从：

> $config['uri_protocol'] = 'PATH_INFO';

到

> $config['uri_protocol'] = 'REQUEST_URI';

为我解决了这个问题。

# c++ - Boost Regex 在 Visual Studio 2010 中不起作用

> ID：13176763
> 
> 赞同：1
> 
> 时间：2012-11-01T12:09:36.397
> 
> 标签：c++, visual-studio-2010, boost, boost-regex

我不明白为什么 Boost Regex 不适用于我当前的 VS 2010 项目。在 Linux 上，相同的代码可以正常工作，即使在 VS 2010 中，如果我创建一个只有违规代码和相同输入的小项目，它也可以工作。

在我的项目中，当`boost::regex_search`被调用时，程序崩溃，并且由于某种原因，如果我使用 编译项目`BOOST_ALL_DYN_LINK`，`boost::regex_search`返回 true，但下一条指令抛出

```
Attempt to access an uninitialzed boost::match_results<> class. 
```

并且仍然由于不同的原因而崩溃。我认为这与默认编译器设置有关，但我不知道从哪里开始。

# kendo-ui - 在 Kendo UI 中使用 kendo.data.Model 和 dataSource 有什么好处？

> ID：13176766
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:09:38.423
> 
> 标签：kendo-ui

我是 kendo UI 的新手，我不完全理解在 dataSource 中使用 kendo.data.Model 的主要目标和优势是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:43:42.587

不确定我是否理解你的问题。但是数据源是抽象您与例如 twitter 交互的好方法：

```
var dataSource = new kendo.data.DataSource({
transport: {
    read: {
        // the remote service url
        url: "http://search.twitter.com/search.json",

        // JSONP is required for cross-domain AJAX
        dataType: "jsonp",

        // additional parameters sent to the remote service
        data: {
            q: "html5"
        }
    }
},
// describe the result format
schema: {
    // the data which the data source will be bound to is in the "results" field
    data: "results"
}
}); 
```

# objective-c - rangeOfString 和编码

> ID：13176767
> 
> 赞同：2
> 
> 时间：2012-11-01T12:09:40.637
> 
> 标签：objective-c, nsstring

我正在尝试解析我使用 NSTask 执行的 shell 命令的输出。寻找特定的子字符串就足够了，只有永远找不到子字符串。

到目前为止我的代码：

```
NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data
                               encoding: NSUTF8StringEncoding];

NSLog(string);

if([string rangeOfString:@"Connection refused"].location != NSNotFound) {
    NSLog(@"found");
} else {
    NSLog(@"not found");
} 
```

即使搜索的子字符串包含在变量*string*中，它也总是打印“未找到” 。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:35:13.457

我错了。该命令的输出实际上是空的（因此显然没有找到要查找的字符串）。我期望 NSLog 调用的结果实际上是命令直接输出到控制台（stderr？）。对此感到抱歉:(。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:34:21.410

我很惊讶，但是当我把条件写反时。有效。请检查以下示例：

```
NSString *string = @"hello bla Connection refused Connection refused bla";
if ([string rangeOfString:@"Connection refused"].location == NSNotFound) {
    NSLog(@"string does not contain Connection refused");
} else {
    NSLog(@"string contains Connection refused!");
} 
```

希望我清楚..

# c# - VirtualKey C# Windows 商店应用程序

> ID：13176774
> 
> 赞同：2
> 
> 时间：2012-11-01T12:09:52.210
> 
> 标签：c#, windows-store-apps

我正在为 Windows 8 编写 Windows Store 应用程序。我在屏幕上有两个按钮，我想用空格键切换：当按下开始按钮时，我禁用它并启用停止按钮，反之亦然。

我可以开始和停止使用空格键，但是用鼠标单击任何按钮后出现问题：然后焦点位于另一个按钮上，然后我不小心用空格键按下了该按钮。

单击开始按钮后，我希望焦点位于停止按钮上，因此我可以使用空格键按下停止按钮。我该怎么做？

```
public void Grid_KeyDown(object sender, KeyRoutedEventArgs e)
{
   if (e.Key == VirtualKey.Space)
   {
       if(!isPlaying)
       {
           StartButton_Click(sender, null);
       }
       else
       {
           StopButton_Click(sender, null);
       }
   }
} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:44:04.703

`StartButton_Click`通话中

```
StopButton.Focus(Focus.Programmatic); 
```

# sql - 具有多个表和可能的外部连接的半分层 SQL 查询

> ID：13176776
> 
> 赞同：2
> 
> 时间：2012-11-01T12:09:56.393
> 
> 标签：sql, join, multiple-tables, hierarchical, libreoffice-base

我有产品。每个产品都由项目和组件组成。程序集本身也可以由项目组成。所以这是一个层次结构，但深度有限。我想做的是列出产品及其包含的项目和组件，以及产品组件中的任何项目。

这是我想看到的输出。它不必看起来完全像这样，但目的是显示产品中的项目，然后是组件，然后在每个组件中显示其中的项目。列数不是固定的，如果需要更多来显示程序集中的项目，那没有问题。

```
ProductID ProductName AssemblyID AssemblyName ItemID ItemName
--------- ----------- ---------- ------------ ------ --------
 P0001001 Product One
                                               I0045 Item A
                                               I0082 Item B
                          A00023 Assembly 1
                                               I0320 Item 1
                                               I0900 Item 2
                          A00024 Assembly 2
                                               I0877 Item 3
                                               I0900 Item 2
                                               I0042 Item 4 
```

然后，我可以使用它来构建按产品 ID 分组的报告，以列出每个产品的内容。

这是我目前的表结构。

```
+ProductList-+             +ProductItems-+                                  
|ProductID   | ----------> |ProductID    |                                   +ItemList-+
|ProductName | \           |ItemID       | --------------------------------> |ItemID   |
|Price       |  \          +-------------+                                 > |ItemName |
+------------+   \                                                        /  |Cost     |
                  \    +ProductAssemblies-+                              /   +---------+
                   \-> |ProductID         |       +AssemblyItems-+      /
                   +-- |AssemblyID        | ----> |AssemblyID    |     /
                   |   |BuildTime         |       |ItemID        | ---/
                   |   +------------------+       +--------------+
                   |
                   |   +AssemblyList-+
                   +-> |AssemblyID   |
                       |AssemblyName |
                       +-------------+ 
```

我需要什么样的 SELECT 语句才能做到这一点。

我想我需要某种外连接，但我并不完全了解 SQL 语法来了解如何构造 select 语句。我所有的努力总是导致产品在每个项目和组件中被多次列出。因此，如果一个产品有 3 个项目和 2 个组件，则该产品出现 6 次。

搜索这类问题并不容易，因为我不知道我需要搜索什么。是三表问题，外连接问题，还是只是一个简单的句法答案。

还是在不使用程序集的情况下切换到纯层次表结构会更好？然后在分层表上搜索以解决我可能遇到的任何问题会更容易。

我正在使用 LibreOffice 3.5.6.2 Base。它有向导和其他有用的东西，但它们并没有扩展到我发现自己所处的复杂情况。目的是数据库包含价格，它可以用来从物品成本中适当地定价产品以及构建组件的时间。

温柔点，我是SO的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:05:52.870

正常的 SQL 方法会将所有数据放在一行上，而不是分成几行。因此，您的数据将如下所示：

```
ProductID ProductName AssemblyID AssemblyName ItemID ItemName
--------- ----------- ---------- ------------ ------ --------
 P0001001 Product One                          I0045 Item A
 P0001001 Product One                          I0045 Item B
 P0001001 Product One     A00023 Assembly 1    I0320 Item 1
 P0001001 Product One     A00023 Assembly 1    I0320 Item 2
 . . . 
```

例如，对于给定的项目，产品和装配信息不会是空白的。所有人都在同一条线上。

此信息来自两个来源，产品项目和装配项目。以下查询获取每个组件，然后将它们联合在一起，最后按产品对结果进行排序：

```
select *
from ((select p.Productid, p.ProductName, NULL as AssemblyId, NULL as AssemblyName, il.Itemid, il.ItemName
       from Product p join
            ProductItems pi
            on p.productId = pi.ProductId join
            ItemList il
            on pi.ItemId = il.ItemId
      ) union all
      (select p.Productid, p.ProductName, al.AssemblyId, al.AssemblyName, il.Itemid, il.ItemName
       from Product p join
            ProductAssemblies pa
            on pa.ProductId = p.ProductId join
            AssemblyList al
            on pl.AssembyId = al.AssemblyId, join
            AssemblyItems ai
            on al.AssemblyItems join
            ItemList il
            on p.ItemId = il.ItemId
      )
     ) t
order by 1, 2, 3, 4, 5, 6 
```

通常，重组为您想要的格式将在应用程序级别完成。您可以在 SQL 中执行此操作，但最佳方法取决于您使用的数据库。

# asp.net-mvc-3 - 如何在 mvc3 中传递日期数据类型

> ID：13176785
> 
> 赞同：0
> 
> 时间：2012-11-01T12:10:22.057
> 
> 标签：asp.net-mvc-3

```
[HttpPost] 
public JsonResult GetSearchedResults(string searchedHotel)  
{    
  var searchingHotels = clsRepository.GetSearchedResults(searchedHotel, );
  return json etc etc
} 
```

这是我的控制器。就像字符串一样，我需要传递日期数据类型。我有一个日期类型的数据库中的字段名称。现在我需要传递这个。如何传递数据类型日期。？

> 我有一个 DatePicker 是我的主页。当我从 Datepicker 中选择一个日期时，它将保存在我的 Jquery 文件中的一个变量中。所以我需要将此变量传递给控制器​​。我需要检查数据库中选定的日期和日期是否相等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:23:55.587

只需将您的操作参数的数据类型更改为`DateTime`. 默认的模型绑定器会尝试将发送的请求参数的值转换为一个`DateTime`值。

```
public JsonResult GetSearchedResults(DateTime myDateParameter)  
{    
    // do whatever you want with your date

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:24:33.970

使用日期作为参数向您的操作发出 ajax POST 请求。使用 jQuery 发出请求。请参阅有关如何执行此操作的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - “赋值的左侧必须是变量”，带 int 和 boolean

> ID：13176786
> 
> 赞同：-4
> 
> 时间：2012-11-01T12:10:26.317
> 
> 标签：java, if-statement, boolean, int

我必须为此写下条件：

```
last_page = ((nl.getLength() == 0) -= 1); 
```

在这一行中出现以下错误：

**赋值的左边必须是变量**

这是我的代码：

```
 int current_page = 25;
boolean last_page;
int prev_page;
int next_page;
NodeList nl = doc.getElementsByTagName(KEY_SONG);
prev_page = (current_page -= 1);
next_page = (current_page += 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:12:56.750

该部分的`((nl.getLength() == 0)`计算结果为**boolean value**，您不能从中减去`1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:13:52.657

双`==`号是比较运算符。基本上，您正在检查的`nl.getLength()`是`0`. 这将为您提供一个布尔值（`True`或`False`）。

这个`-=`符号的意思是“递减”。因此`someVar -= 1`将尝试`1`从 的值中减去`someVar`。

您不能从布尔值中减去数字，因为它们是不同的类型。这就是您收到错误的原因。

因为您声明`last_page`为布尔值并提到了 if 语句，所以我假设您想检查您是否在最后一页。这样做的代码是这样的：

```
last_page = (current_page == (nl.getLength() - 1)); //is the current page the last page? 
```

请记住，在 Java 中，索引从 开始`0`并一直持续到`length - 1`。该语句将检查当前页面是否为最终索引`nl`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:12:48.007

只需使用它来代替：

```
last_page = nl.getLength() -1; 
```

您得到的错误是因为`(nl.getLength() == 0)`它会返回一个布尔值`true`，`false`因此您不能从布尔值中**减去（以及任何其他算术运算，如加法、乘法等）任何数字，**这样没有意义： `(true - 1)`或`(false +1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:17:10.233

看，`(nl.getLength() == 0)`不是一个变量，它是一个表达式，就像`1 + 1`. 然而，运算符`-=`不是表达式，它要递减一个*变量*，即取变量的值，修改它并将其写回。你怎么能“回写”成一个表达式？

合适的 CS 术语是*lvalue*：一个不仅可以读取，还可以写入的值。像这样的表达式`(nl.getLength() == 0)`不是左值，但是像这样的运算符`-=`期望左值能够修改它。这就是错误消息的基本含义。

相反，在你的第二个例子`current_page`中是一个左值。

# sql - ms sql 2005 无法比较日期

> ID：13176788
> 
> 赞同：0
> 
> 时间：2012-11-01T12:10:31.150
> 
> 标签：sql, sql-server

我在 ms sql 中有一个巨大的数据库。我有一个日期存储在一个类型的字段中：`VARCHAR2` 我有代码，但它无法比较日期。我的意思是说？有一个带有发布日期的输入。我需要的是获取启动日期输入，其中启动日期大于日期且小于另一个日期。问题是当我将年份从 2012 年更改为 2013 年时，没有结果。此外，当我的日期为 0（如 01.01.2012）时，它无法编译它们。

到目前为止，我所拥有的是：

```
edited 
```

有人可以帮我得到正确的结果吗？

**编辑1**

日期以这种格式存储为字符串：yyyy-mm-dd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:13:26.050

```
select
p1.PA_VALUE as Quote_number,
p2.PA_VALUE as Project_Name,
p3.PA_VALUE as requestNumber,
p4.PA_VALUE as reqLocation_CHECK,
p5.PA_VALUE as reqActivityCode,
p6.PA_VALUE as reqSegment,
p7.PA_VALUE as reqTotalPRLocalMargin_CHECK,
p8.PA_VALUE as reqDiscountPerc_CHECK,
p10.PA_VALUE as RequisitionerName,
p11.PA_VALUE as Date_Start,
p13.PA_VALUE as reqTotalPRNetNet_CHECK,
p14.PA_VALUE as reqCustomerNumber,
p15.PA_VALUE as Is_Validated

from WP_WorkflowProcess p 
LEFT JOIN PA_PARAMETER p1 on p1.PA_WP_ID=p.WP_ID AND p1.PA_NAME = 'reqQuoteNumber'
LEFT JOIN PA_PARAMETER p2 on p2.PA_WP_ID=p.WP_ID AND p2.PA_NAME = 'reqProjectName'
LEFT JOIN PA_PARAMETER p3 on p3.PA_WP_ID=p.WP_ID AND p3.PA_NAME = 'RequestNumber'
LEFT JOIN PA_PARAMETER p4 on p4.PA_WP_ID=p.WP_ID AND p4.PA_NAME = 'reqCustomerLocation'
LEFT JOIN PA_PARAMETER p5 on p5.PA_WP_ID=p.WP_ID AND p5.PA_NAME = 'reqActivityCode'
LEFT JOIN PA_PARAMETER p6 on p6.PA_WP_ID=p.WP_ID AND p6.PA_NAME = 'reqSegment'
LEFT JOIN PA_PARAMETER p7 on p7.PA_WP_ID=p.WP_ID AND p7.PA_NAME = 'reqTotalPRLocalMargin'
LEFT JOIN PA_PARAMETER p8 on p8.PA_WP_ID=p.WP_ID AND p8.PA_NAME = 'reqDiscountPerc'
LEFT JOIN PA_PARAMETER p10 on p10.PA_WP_ID=p.WP_ID AND p10.PA_NAME = 'RequisitionerName'
LEFT JOIN PA_PARAMETER p11 on p11.PA_WP_ID=p.WP_ID AND p11.PA_NAME = 'LaunchDate'
LEFT JOIN PA_PARAMETER p13 on p13.PA_WP_ID=p.WP_ID AND p13.PA_NAME = 'reqTotalPRNetNet'
LEFT JOIN PA_PARAMETER p14 on p14.PA_WP_ID=p.WP_ID AND p14.PA_NAME = 'reqCustomerNumber'
LEFT JOIN PA_PARAMETER p15 on p15.PA_WP_ID=p.WP_ID AND p15.PA_NAME = 'isValidated'

WHERE p.WP_TYPE = 'EnergyMarketing' 
AND CONVERT(DATETIME, p11.pa_value) >=  CONVERT(DATETIME, '01.01.2012')
AND CONVERT(DATETIME, p11.pa_value) <=  CONVERT(DATETIME, '01.09.2012') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:15:50.523

在您的`WHERE`子句中，您不必要地进行双重转换，实际上比较`VARCHAR` **不** `DATETIME`

比较`DATETIME`以下就足够了。

```
CONVERT(DATETIME, p11.pa_value,104) >= CONVERT(DATETIME, '01.01.2012',104) 
```

或者你可以`CAST`

```
CAST(p11.pa_value AS DATETIME) >= CAST('01.01.2012' AS DATETIME) 
```

**编辑：**我认为您还需要`NULL`检查`[t].PA_NAME`

```
ISNULL([t].PA_NAME,'') = 'yourString'  --if you need filter null PA_NAME
ISNULL([t].PA_NAME,'yourString') = 'yourString' --if you need to bring null PA_NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:16:22.173

尝试

```
WHERE CONVERT(DATETIME, p11.pa_value, 104) >= CONVERT(datetime, '01.01.2012', 104) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:30:42.420

除了有关多种数据类型转换的其他答案之外，请注意您在文字字符串中显示的日期格式。在我的 SQL 服务器（英国地区）上，日期`01.09.2012`被转换为`2012-01-09`（1 月 9 日）。

您的查询可能不会返回任何数据，因为您只需要 9 天的数据，而不是 9 个月的数据。

查看我对有关要使用的日期格式[的 sql 日期问题问题的回答](https://stackoverflow.com/a/7308203/243925)下的评论。

# jquery - 如何使用带有 jquery 手风琴的 Backbone 视图？

> ID：13176794
> 
> 赞同：1
> 
> 时间：2012-11-01T12:10:52.240
> 
> 标签：jquery, jquery-ui, backbone.js

我正在我的页面上创建一个 jquery 手风琴。手风琴的不同选项卡包含较大复合对象的不同属性的表单。我想使用自己的 Backbone 视图填充手风琴的每个选项卡。问题是每个视图只能绑定到一个`DOM`元素，而手风琴要求我为每个选项卡声明两个元素。

在 jQuery 手风琴或骨干网中是否有解决方法？我很乐意更改我的 HTML（尽管不是设计），以便为每个子表单提供单独的视图。

我想到的一种替代方法是为每个选项卡声明 2 个视图 - 一个用于选项卡标题，一个用于选项卡正文。但是，这不必要地使数字翻了一番。的意见。

另一种选择是执行类似[如何在 el 或标记名上设置任何内容以使用 jquery ui 手风琴中所述的操作](https://stackoverflow.com/questions/10809771/how-to-set-nothing-on-el-or-tagname-to-work-with-jquery-ui-accordion?rq=1)

# java - jvm堆空间设置

> ID：13176795
> 
> 赞同：1
> 
> 时间：2012-11-01T12:10:59.920
> 
> 标签：java, applet, jvm

一旦我将 deployment.properties 文件从当前用户->appdata->local low->java 保存到 windows->sun->java->Deployment 以设置每个系统的内存。虽然它没有按预期工作，但我删除了这个文件来自 windows->sun->java->Deployment 。现在，当我尝试在浏览器中打开任何小程序应用程序时，我收到错误消息......无法在 windows->sun 的位置找到指定的文件......我应该做些什么改变才能让它工作...？任何人请...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:46:00.467

JVM 堆空间应该以“每个小程序”为基础进行设置。它可以在 HTML 中完成。例如

```
<PARAM name="java_arguments" value="-Xmx128m"> 
```

或者，如果使用 JWS 启动小程序，则通过在启动文件中指定内存要求。

按照[Applet 标签 Wiki](https://stackoverflow.com/tags/applet/info)的最后两个链接了解详细信息。

# php - 视图页面中未定义的变量

> ID：13176796
> 
> 赞同：0
> 
> 时间：2012-11-01T12:11:05.323
> 
> 标签：php, codeigniter, codeigniter-2

我无法在视图页面中传递变量

这是我的控制器代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Management extends CI_Controller {

        public function __construct()
       {
            parent::__construct();
            if($this->session->userdata('level') != 1){
                redirect('');
            } 
        }

        public function hotels()
        {   

                $this->load->model('model_hotels');

                $ss['most_view_hotels'] = '23';
                $this->load->view("management/header_mng_view");
                $this->load->view('management/hotels_mng_view' , $ss , true);
                $this->load->view("management/footer_mng_view");
        }

} 
```

这是错误

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义变量：most_view_hotels
> 
> 文件名：管理/hotels_mng_view.php
> 
> 行号：22

hotels_mng_view.php

```
<?php 
  echo $most_view_hotels;
  foreach($most_view_hotels as $value):
?>
  <div class="row">
  <div class="cell en">adsf</div>
  <div class="cell en">1212</div>
  <div class="cell en">12</div>
  <div class="cell en">32</div>
  </div>
<?php endforeach;?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:14:29.867

在您的控制器中：

```
$ss['most_view_hotels'] = '23';
$this->load->view("management/header_mng_view");
$this->load->view('management/hotels_mng_view',$ss);
$this->load->view("management/footer_mng_view"); 
```

在您看来：

```
<?php echo $most_view_hotels?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:18:59.693

在您的模板中，您会将项目称为...

```
$most_view_hotels 
```

所以我们需要验证这是你在视图中所做的`management/hotels_mng_view.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:49:14.597

如 Codeigniter 手册所述：

```
There is a third optional parameter lets you change the behavior of the function
so that it returns data as a string rather than sending it to your browser.
This can be useful if you want to process the data in some way. If you set 
the parameter to true (boolean) it will return data. 
The default behavior is false, which sends it to your browser. 
```

这意味着您的线路

```
$this->load->view('management/hotels_mng_view' , $ss , true); 
```

实际上将该视图的结果作为字符串返回给 php，而不是将其发送到浏览器。

您的实际问题（未定义变量）的答案依赖于 in `management/hotels_mng_view.php`，可能是错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T04:31:57.953

我认为问题出在第三个参数上，即`true`.

正如 codeigniter 文档所说：

```
There is a third optional parameter lets ..... 
Remember to assign it to a variable if you want the data returned 
```

并且在您的代码中，您没有将返回的数据分配给任何代码。我建议你尝试这样的事情：

```
public function hotels()
        {   

           $this->load->model('model_hotels');
           $data = array();
           $ss['most_view_hotels'] = '23';
           $data['header'] = $this->load->view("management/header_mng_view",,true);
           $data['body'] = $this->load->view('management/hotels_mng_view' , $ss , true);
           $data['footer'] = $this->load->view("management/footer_mng_view");
           $this->load->view("template",$data);
        }

 /*template view file*/
 <?php
    echo $header;
    echo $body;
    echo $footer;
 ?> 
```

希望这可以帮助。

# c - C - 2D 阵列 - 魔方 4 阶

> ID：13176801
> 
> 赞同：2
> 
> 时间：2012-11-01T12:11:17.777
> 
> 标签：c, multidimensional-array, magic-square

```
114 void fillDoubly(int square[20][20], int n){
115
116     int i, j, k=0, l=0, counter=0, test[400]={0}, diff=n/4-1;
117
118     for(i=0;i<n;i++) //first nested for loops for part 1)
119         for(j=0;j<n;j++){
120             counter++;
121             if( i=j || j=(n-1-i) ){
122                 {
123                     square[i][j] = counter;
124                     test[counter-1] = 1;
125                 }
126             }
127         }
128
129     for(i=n-1;i>=0;i--) // for part 2)
130         for(j=n-1;j>=0;j--){
131             if(square[i][j]==0){
132                 while(test[k]!=0){
133                     k++;
134                 }
135                 test[k]=1;
136                 square[i][j]=k+1;
137             }
138         }
139 } 
```

所以基本上，我必须生成 4 阶的幻方，即行和列可以被 4 整除。

我得到了算法，它是

1.  遍历数组并填充对角子集
2.  向后遍历数组并填充其余部分

我已经用上面的代码完成了 4x4 数组，它扩展到 8x8、12x12 等，但我**被困在第 1 部分）**，即**填充对角线子集**（例如，将 8x8 拆分为 4x4 并取该对角线）。 ..我不知道该怎么做，只设法填写对角线本身

```
if( i=j || j=(n-1-i) ){ 
```

tldr，以上是我用来知道它是否是对角线的条件，有什么建议我可以**改变条件以知道它是否是对角线子集**而不是对角线？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:51:32.393

根据我从您链接的教程中了解到的情况，您希望将矩阵拆分为 16 个相等的子矩阵，并在这些子矩阵中填充对角线。因此，对于您想要实现的 8x8 矩阵：

```
 |   0    |    1    |    2    |    3   |  _
 0001 0002 0000 0000 0000 0000 0007 0008  0
 0009 0010 0000 0000 0000 0000 0015 0016  _
 0000 0000 0019 0020 0021 0022 0000 0000  1
 0000 0000 0027 0028 0029 0030 0000 0000  _
 0000 0000 0035 0036 0037 0038 0000 0000  2
 0000 0000 0043 0044 0045 0046 0000 0000  _
 0049 0050 0000 0000 0000 0000 0055 0056  3
 0057 0058 0000 0000 0000 0000 0063 0064  _ 
```

这里的子矩阵是 2x2，如果矩阵是 12x12，它将被细分为 16 个 3x3 的子矩阵。

如果将这些子矩阵用作查找对角线（即 i==j）的索引，则可以使用以下表达式：

```
if( (i/w)==(j/w)  || (j/w)==(3-(i/w))) 
```

其中`w = n/4`，这是您的方形子矩阵的顺序（对于 8x8，这是 2）。因此`i/w`将说明当前矩阵索引`i`所在的子矩阵（0 到 3）。

# local-storage - IE8 localstorage 存储事件

ID：13176808

赞同：0

时间：2012-11-01T12:11:43.270

标签：local-storage

# android - xmpp openfire忘记密码

> ID：13176809
> 
> 赞同：2
> 
> 时间：2012-11-01T12:11:43.780
> 
> 标签：android, xmpp, openfire, forgot-password

我正在使用 xmpp 和 openfire 使用 smack 制作聊天应用程序。现在我想在这里问一个问题，我可以同时实现忘记密码的功能吗？我在互联网上搜索过有人说是的，有人说不是，但没有人为我提供稳定的解决方案。

请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:41:07.957

这实际上取决于您如何实现/配置身份验证。据我所知，XMPP 没有这样的功能。

最简单的方法可能是使用一些已经具有此功能的工具来创建和管理您的用户，最好是在一些标准存储库中，如 LDAP。然后让 Openfire 使用 LDAP 进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:10:42.043

很大程度上取决于您用作数据库后端的内容。您必须了解它是哪个数据库。如果是 MySQL 或 Postgres，使用 Perl 应该很简单。如果是内置数据库，则不太确定。

您可能需要考虑一个问题：您如何确保说他们需要重置密码的人就是他们所说的人（没有撒谎）？

# javascript - jeditable 和 autocomplete 与验证一起工作的工作示例

> ID：13176812
> 
> 赞同：1
> 
> 时间：2012-11-01T12:11:51.597
> 
> 标签：javascript, jquery, validation, autocomplete, jeditable

我看到很多关于 jeditable 和 autocomplete 的 google/stack 溢出帖子一起工作，但我找不到验证它们的方法。有谁知道与验证一起工作的可编辑和自动完成功能的工作版本。请帮忙！这是一个简单的例子：

```
$.editable.addInputType('autocomplete', {
    element : $.editable.types.text.element,
    plugin : function(settings, original) {
        $('input', this).autocomplete(settings.autocomplete.data);
    }
});

$(".autocomplete").editable("http://www.example.com/save.php";, {
    type      : "autocomplete",
    tooltip   : "Click to edit...",
    onblur    : "submit",
    autocomplete : {
        multiple : true,
        data     : ["Aberdeen", "Ada", "Adamsville", "Addyston", "Adelphi", "Adena", "Adrian", "Akron"]
    }
}); 
```

# javascript - Android JQuery focus() 解决方法

> ID：13176813
> 
> 赞同：3
> 
> 时间：2012-11-01T12:11:55.207
> 
> 标签：javascript, android, jquery, html

我正在开发一个 HTML5 移动应用程序（使用常规 jQuery，而不是移动应用程序），它实现了一个显示在文本区域下方的自定义自动完成列表。用户从列表中选择一个选项，单词自动完成，用户继续像往常一样输入。

问题是用户在文本框外点击以从自动完成中选择一个项目，因此文本区域暂时失去焦点。由于在 android 浏览器中禁用了 focus()，因此我无法像往常一样立即重新聚焦并保留插入符号的最后一个位置。

是否有一种解决方法可以让我重新关注文本区域，像常规的 blur() 和 focus() 调用一样保留插入符号的位置？

**编辑：** 基本假设的来源：此处提到：[https](https://stackoverflow.com/a/10243010/832607) ://stackoverflow.com/a/10243010/832607和此处： [http ://ambrusmartin.wordpress.com/2012/08/30/soft-keyboards-in-android- iphone-phonegap-applications-when-we-call-focus/](http://ambrusmartin.wordpress.com/2012/08/30/soft-keyboards-in-android-iphone-phonegap-applications-when-we-call-focus/)（已经尝试过链接中提到的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:59:13.267

Instead re-focusing the textarea I'd recommend trying to not lose the focus in the first place. I'm achieving this when preventing the default action on `mousedown`.

Here is the jQuery, assuming `list` is your list of options and all options have `listEl` class:

```
list.on('mousedown', '.listEl', function(e) { 
  e.preventDefault(); 
}); 
```

# java - Hibernate ORM 设计策略

> ID：13176819
> 
> 赞同：0
> 
> 时间：2012-11-01T12:12:19.710
> 
> 标签：java, hibernate, orm

我需要构建一个 Vehicle 域对象。所有 Vehicle 对象将具有大约 5 个属性……没什么大不了的。我用@Entity 对类进行注释，在一个用@Id 注释的id 中拍打。我的问题是，我需要考虑另外两种类型的特种车辆。一个需要保存 2 个额外的字符串值，另一个需要保存一个字符串列表。

我希望能够执行 findAll() 并获得所有车辆，因此我并不真正愿意为其他两种类型的车辆创建完全独立的域对象并为它们提供完全独立的表。我玩弄了一个想法来创建一个“AdditionalProperties”抽象类，使其成为 Vehicle 的成员，然后为我的两辆专业车辆扩展它，但我很快就迷失了如何正确地对其进行注释并将其映射到数据库。但即便如此，我也会坚持编写大量单一的 if 语句来检查车辆类型并转换该类等

我的另一个想法是在我现在拥有的单个 Vehicle 域对象中包含额外的字段（即使它们对所有其他类型的车辆没有任何意义）并将值保留为空，除非它是其中之一特种车辆。

有人对我应该如何处理这个问题有任何想法吗？可能有一些关于如何注释类的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:19:42.960

为什么不简单地创建 Vehicle 的两个子类并包含附加属性？Hibernate 很好地支持继承。您将有三个选项来持久化实体继承树：

*   一个表中的所有内容（通常是最快和最简单的选项）
*   每个实体都在自己的表中
*   公共表中的公共属性，以及它们自己的表中的附加子实体属性。

无论您选择哪种解决方案，选择车辆都会选择满足标准的所有类型的车辆。Hibernate 查询是多态的。

阅读[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e6906)。

# html - 使用 twitter-bootstrap 下拉菜单作为容器

> ID：13176821
> 
> 赞同：3
> 
> 时间：2012-11-01T12:12:30.030
> 
> 标签：html, twitter-bootstrap, drop-down-menu

是否可以防止下拉菜单在“单击”时消失。尝试使用下拉菜单作为文本区域的容器。

例如

```
<div class="row-fluid">
    <div class="span12">
        <div class="btn-group">
            <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#">
                <strong id="revolver">
                    <i class="icon-envelope"></i>&nbsp
                    <span class="caret"></span>
                </strong>
            </a>
            <ul class="dropdown-menu">
                <div class="row-fluid send-message-textarea">
                    <div class="span12">
                        <textarea></textarea>
                        <br>
                        <button class="btn btn-mini"><strong>Send</strong></button>
                    </div>
                </div>
            </ul>
        </div>
    </div>
</div> 
```

编辑：

我想在 bootstrap.js 中复制粘贴下拉功能，然后更改选择器并删除不需要的功能可能是一种选择。我查看了[https://github.com/twitter/bootstrap/blob/master/js/bootstrap-dropdown.js](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-dropdown.js)但我无法准确指出具体功能所在的位置。会得到帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:26:42.747

在您的 HTML 中，将 id 添加到`<ul>`

```
<ul class="dropdown-menu" id="test"> 
```

添加一个防止下拉菜单响应点击的处理程序

```
$(document).ready(function() {
    $("#test").click(function(e) {
       e.stopPropagation();
    });
}); 
```

您现在可以在文本区域中单击和编辑。

# jquery - jQuery替换文本不起作用

> ID：13176827
> 
> 赞同：0
> 
> 时间：2012-11-01T12:12:44.270
> 
> 标签：jquery, replace

我正在使用这种方法来查找和替换一段文本，但不确定它为什么不起作用？当我使用 console.log 时，我可以看到我想要替换的正确内容，但最终结果不起作用：

```
(function($) {
  $(document).ready( function() {
        var theContent = $(".transaction-results p").last();
        console.log(theContent.html());
        theContent.html().replace(/Total:/, 'Total without shipping:');
    });
})(jQuery); 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:15:16.197

字符串已被替换，但您没有将字符串重新分配给元素的 html。使用`return`：

```
theContent.html(function(i,h){
    return h.replace(/Total:/, 'Total without shipping:');
}); 
```

[JS Fiddle 演示](http://jsfiddle.net/pyxhq/1/)（由[diEcho 提供](https://stackoverflow.com/users/155861/diecho)）。

参考：

*   [`html()`](http://api.jquery.com/html/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:15:31.167

```
(function($) {
  $(document).ready( function() {
        var theContent = $(".transaction-results p").last();
        console.log(theContent.html());
        theContent.html(theContent.html().replace('Total:', 'Total without shipping:'));
    });
})(jQuery); 
```

为什么你这样做`/Total:/`而不`'Total'`喜欢普通的字符串？

-@David Thomas 的解决方案有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:16:51.150

您有额外`:`的字符串要搜索，并将其分配回 theContent 的 html

**[现场演示](http://jsfiddle.net/T8Lce/1/)**

```
 $(document).ready( function() {
        var theContent = $(".transaction-results p").last();
        console.log(theContent.html());
        theContent.html(theContent.html().replace(/Total/, 'Total without shipping:'));
  }); 
```

# php - 自定义php的正则表达式

> ID：13176831
> 
> 赞同：0
> 
> 时间：2012-11-01T12:13:04.970
> 
> 标签：php, regex

我有一个字符串，类似于

```
<?php
$string = Monday & SUNDAY 11:30 PM et/pt;
//or
$string = Monday 11:30 PM et/pt;
?> 
```

我想在这两种情况下都获取'11:30 PM'，我想我不能使用explode所以正则表达式是什么，请告诉我一些非常好的学习正则表达式的东西。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:15:36.947

归功于下面的评论者对原始方法的一些修复，但仍有一些未解决的问题。

如果您想要固定的 2 小时格式：`(0[0-9]|1[0-2]):[0-5]\d [AP]M`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:26:49.907

为了有效地匹配[12](https://en.wikipedia.org/wiki/12-hour_clock)点钟，我会使用如下所示的正则表达式。十二小时制从 01:00 到 12:59：

```
$regex = "#\b(?:0[0-9]|1[0-2]):[0-5][0-9] [AP]M\b#i"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:49:18.420

Malik，要检索您可能使用预制库正则表达式的时间/日期，请搜索以下查询：[http ://regexlib.com/Search.aspx?k=digit&c=5&m=-1&ps=20](http://regexlib.com/Search.aspx?k=digit&c=5&m=-1&ps=20)

基本上你的时间字段是相似的，（具有相同的分隔符*':'*），我建议使用简单的正则表达式：`\d{1,2}:\d{2} [PA]M`匹配输入字符串。如果你想让它不区分大小写，请使用*i*，[模式修饰符](http://extract-web-data.com/regex-in-php/#modifiers)。对于正则表达式的基础知识，欢迎阅读[这里](http://extract-web-data.com/regex-expressions/)。

我给你这个 PHP 的匹配函数（第二个斜杠 (/) 之后的*i*使模式不区分大小写：`am, AM, Am, aM`将是相等的）：

```
 preg_match('/\d{1,2}:\d{2} [PA]M/i', $string, $time);
  print ($time); 
```

如果数字后可能没有空格（例如上午 11:30）或多个空格字符，则正则表达式应如下所示： `/\d{1,2}:\d{2}\s*[PA]M/i`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T12:30:11.483

此代码将为您提供**晚上 11:30**

```
preg_match('$([0-9:]{3,5}) ([AP])M$','Monday & SUNDAY 11:30 PM et/pt',$m);
echo $m['1']." ".$m['2']."M"; 
```

# c# - 使用 open xml sdk 从 xlsx 读取日期

> ID：13176832
> 
> 赞同：34
> 
> 时间：2012-11-01T12:13:05.013
> 
> 标签：c#, date, datetime, openxml, openxml-sdk

我在其中一个单元格的 xlsx 文件中有一个格式为“4/5/2011”（月/日/年）的日期。我试图解析文件并将这些数据加载到某些类中。

到目前为止，我解析单元格的部分如下所示：

```
string cellValue = cell.InnerText;
if (cell.DataType != null)
{
    switch (cell.DataType.Value)
    {
        case CellValues.SharedString:
            // get string from shared string table
            cellValue = this.GetStringFromSharedStringTable(int.Parse(cellValue));
            break;
    }
} 
```

我希望那个日期是一个 cell.DataType。事实是，在解析日期为“4/5/2011”的单元格时，cell.DataType 的值为 null，单元格的值为“40638”，它不是共享字符串表的索引。（我之前尝试过，但结果是异常。）

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-01T13:23:49.493

Open XML 将日期存储为从 1900 年 1 月 1 日开始的天数。好吧，跳过不正确的 1900 年 2 月 29 日作为有效日期。您应该能够找到算法来帮助您计算正确的值。我相信一些开发人员将`DateTime.FromOADate()`其用作助手。

此外，`Cell`该类`DataType`默认具有 Number 属性。因此，如果它为空，则它是一个数字，在我们的例子中包括日期。

仅当存储的日期在纪元之前（在这种情况下为 1900 年 1 月 1 日）时，您才转到共享字符串表。然后在这种情况下，Cell 类的 CellValue 保存共享字符串表的索引。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-03-29T21:33:07.133

似乎未为日期设置 cell.DataType。

这样做的方法是查看单元格是否具有 StyleIndex，它是文档中单元格格式数组的索引。

然后，您使用 cellFormat.NumberFormatId 来查看这是否是日期数据类型。

这是一些代码：

```
 public class ExcelCellWithType
    {
        public string Value { get; set; }
        public UInt32Value ExcelCellFormat { get; set; }
        public bool IsDateTimeType { get; set; }
    }  

    public class ExcelDocumentData
    {
        public ExcelXmlStatus Status { get; set; }
        public IList<Sheet> Sheets { get; set; }
        public IList<ExcelSheetData> SheetData { get; set; }

        public ExcelDocumentData()
        {
            Status = new ExcelXmlStatus();
            Sheets = new List<Sheet>();
            SheetData = new List<ExcelSheetData>();
        }
    } 

    ...

    public ExcelDocumentData ReadSpreadSheetDocument(SpreadsheetDocument mySpreadsheet, ExcelDocumentData data)
    {
        var workbookPart = mySpreadsheet.WorkbookPart;

        data.Sheets = workbookPart.Workbook.Descendants<Sheet>().ToList();

        foreach (var sheet in data.Sheets)
        {
            var sheetData = new ExcelSheetData { SheetName = sheet.Name };
            var workSheet = ((WorksheetPart)workbookPart.GetPartById(sheet.Id)).Worksheet;

            sheetData.ColumnConfigurations = workSheet.Descendants<Columns>().FirstOrDefault();
            var rows = workSheet.Elements<SheetData>().First().Elements<Row>().ToList();
            if (rows.Count > 1)
            {
                foreach (var row in rows)
                {
                    var dataRow = new List<ExcelCellWithType>();

                    var cellEnumerator = GetExcelCellEnumerator(row);
                    while (cellEnumerator.MoveNext())
                    {
                        var cell = cellEnumerator.Current;
                        var cellWithType = ReadExcelCell(cell, workbookPart);
                        dataRow.Add(cellWithType);
                    }

                    sheetData.DataRows.Add(dataRow);
                }
            }
            data.SheetData.Add(sheetData);
        }

        return data;
    }

    ...

    private ExcelCellWithType ReadExcelCell(Cell cell, WorkbookPart workbookPart)
    {
        var cellValue = cell.CellValue;
        var text = (cellValue == null) ? cell.InnerText : cellValue.Text;
        if (cell.DataType?.Value == CellValues.SharedString)
        {
            text = workbookPart.SharedStringTablePart.SharedStringTable
                .Elements<SharedStringItem>().ElementAt(
                    Convert.ToInt32(cell.CellValue.Text)).InnerText;
        }

        var cellText = (text ?? string.Empty).Trim();

        var cellWithType = new ExcelCellWithType();

        if (cell.StyleIndex != null)
        {
            var cellFormat = workbookPart.WorkbookStylesPart.Stylesheet.CellFormats.ChildElements[
                int.Parse(cell.StyleIndex.InnerText)] as CellFormat;

            if (cellFormat != null)
            {
                cellWithType.ExcelCellFormat = cellFormat.NumberFormatId;

                var dateFormat = GetDateTimeFormat(cellFormat.NumberFormatId);
                if (!string.IsNullOrEmpty(dateFormat))
                {
                    cellWithType.IsDateTimeType = true;

                    if (!string.IsNullOrEmpty(cellText))
                    {
                       if (double.TryParse(cellText, out var cellDouble))
                        {
                            var theDate = DateTime.FromOADate(cellDouble);
                            cellText = theDate.ToString(dateFormat);
                        }
                    }
                }
            }
        }

        cellWithType.Value = cellText;

        return cellWithType;
    }

    //// https://msdn.microsoft.com/en-GB/library/documentformat.openxml.spreadsheet.numberingformat(v=office.14).aspx
    private readonly Dictionary<uint, string> DateFormatDictionary = new Dictionary<uint, string>()
    {
        [14] = "dd/MM/yyyy",
        [15] = "d-MMM-yy",
        [16] = "d-MMM",
        [17] = "MMM-yy",
        [18] = "h:mm AM/PM",
        [19] = "h:mm:ss AM/PM",
        [20] = "h:mm",
        [21] = "h:mm:ss",
        [22] = "M/d/yy h:mm",
        [30] = "M/d/yy",
        [34] = "yyyy-MM-dd",
        [45] = "mm:ss",
        [46] = "[h]:mm:ss",
        [47] = "mmss.0",
        [51] = "MM-dd",
        [52] = "yyyy-MM-dd",
        [53] = "yyyy-MM-dd",
        [55] = "yyyy-MM-dd",
        [56] = "yyyy-MM-dd",
        [58] = "MM-dd",
        [165] = "M/d/yy",
        [166] = "dd MMMM yyyy",
        [167] = "dd/MM/yyyy",
        [168] = "dd/MM/yy",
        [169] = "d.M.yy",
        [170] = "yyyy-MM-dd",
        [171] = "dd MMMM yyyy",
        [172] = "d MMMM yyyy",
        [173] = "M/d",
        [174] = "M/d/yy",
        [175] = "MM/dd/yy",
        [176] = "d-MMM",
        [177] = "d-MMM-yy",
        [178] = "dd-MMM-yy",
        [179] = "MMM-yy",
        [180] = "MMMM-yy",
        [181] = "MMMM d, yyyy",
        [182] = "M/d/yy hh:mm t",
        [183] = "M/d/y HH:mm",
        [184] = "MMM",
        [185] = "MMM-dd",
        [186] = "M/d/yyyy",
        [187] = "d-MMM-yyyy"
    };

    private string GetDateTimeFormat(UInt32Value numberFormatId)
    {
        return DateFormatDictionary.ContainsKey(numberFormatId) ? DateFormatDictionary[numberFormatId] : string.Empty;
    } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-03-01T01:54:22.473

你可以使用 DateTime.FromOADate(41690)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T12:18:55.450

我有同样的问题 - 切换到 EPPlus [http://epplus.codeplex.com/](http://epplus.codeplex.com/)

请注意，它具有 LGPL 许可证。因此，如果您需要您的代码库免受 GPL 问题的影响，只需按原样使用该库，并且您的原始代码库许可证是安全的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-23T14:31:31.323

加上我的 2 便士价值。我正在处理一个模板，所以我知道给定的单元格是一个日期时间。所以我最终在这个方法中使用了一个包含单元格值的字符串参数 excelDateTime，它通常是一个 OADate 数字，如“42540.041666666664”。

```
public static bool TryParseExcelDateTime(string excelDateTimeAsString, out DateTime dateTime)
{
    double oaDateAsDouble;
    if (!double.TryParse(excelDateTimeAsString, out oaDateAsDouble)) //this line is Culture dependent!
        return false;
    //[...]
    dateTime = DateTime.FromOADate(oaDateAsDouble); 
```

我的问题是最终用户在德国，因为这是一个网站，我们将 Thread.CurrentThread.CurrentCulture 和 Thread.CurrentThread.CurrentUICulture 设置为“DE-de”。当你打电话时`double.TryParse`，它会使用文化来解析数字。所以这条线：`double.TryParse("42540.041666666664", out oaDate)`确实有效，但它返回`42540041666666664`，因为在德国，点是组分隔符。`DateTime.FromOADate`然后失败，因为数字超出范围（[minOaDate = -657435.0, maxOaDate = +2958465.99999999](https://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)）。

这让我觉得：

1.  无论用户机器上的语言环境如何，OpenXML 文档都包含在默认语言环境中格式化的数字（美国？不变？在任何情况下，点作为小数分隔符）。我已经搜索过，但没有找到这个规范。
2.  在`double.TryParse`处理潜在的 OADate 字符串时，我们应该使用`double.TryParse(excelDateTimeAsString, NumberStyles.Any, CultureInfo.InvariantCulture, out oaDateAsDouble))`. 我正在使用 CultureInfo.InvariantCulture，但它应该是第 1 点，我不确定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-13T06:46:48.360

我们需要采用不同的策略来使用 OpenXML 解析不同类型的列。

要解析字符串和布尔值 - 我们可以使用单元格的 DataType 属性，如下所示 -

```
 switch (cell.DataType.Value)
        {
            case CellValues.SharedString:
                // Fetch value from SharedStrings array
                break;
            case CellValues.Boolean:
                text = cell.InnerText;
                switch (text)
                {
                    case "0": text = "false"; break;
                    default: text = "true"; break;
                }
                break;
        } 
```

解析**日期/时间/日期时间**值（应用任何内置或任何自定义格式） -`DataType`属性返回为 null，因此可以如下所示 -

```
 if (cell.DataType == null)
        DateTime.FromOADate(double.Parse(cell.InnerText)) 
```

返回的上述值将采用默认格式，具体取决于您机器上的区域设置。但是，如果您需要获取 excel 中实际格式的值并且您不确定格式，那么您可以访问`StyleIndex`与此类单元格关联的属性。

此`StyleIndex`属性将为您提供应用于单元格的样式的索引，可以在`styles.xml`文件（标签下方）中找到 -

```
 <cellXfs count="3">
        <xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>          
        <xf numFmtId="168" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
        <xf numFmtId="169" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
    </cellXfs> 
```

在上述情况下，该`StyleIndex`值可以是 0、1 或 2 - 因为应用了 3 种样式。样式`numFmtId in (0, 163)`对应于 Excel 提供的内置格式 &`numFmtId >= 164`对应于自定义格式。

从`StyleIndex`上面获得的值中，您将获得- 映射到部分（文件中）下存在`numFmtId`的特定`<numFmt>`标签，以获取应用于单元格的实际日期格式。`<numFmts>``styles.xml`

```
 <numFmts count="2">
       <numFmt numFmtId="168" formatCode="[$£-809]#,##0.00"/>
       <numFmt numFmtId="169" formatCode="dd\-mmm\-yyyy\ hh:mm:ss"/>
    </numFmts> 
```

也可以使用 OpenXML API 获取应用于单元格的日期格式 -

```
 CellFormat cellFmt = cellFormats.ChildElements[int.Parse(cell.StyleIndex.InnerText)] as CellFormat;
      string format = numberingFormats.Elements<NumberingFormat>()
                .Where(i => i.NumberFormatId.Value == cellFmt .NumberFormatId.Value)
                .First().FormatCode; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-28T17:18:40.387

每个单元格有 2 个属性 r (CellReference) 和 s(StyleIndex)

数字的 StyleIndex 为 2，日期为 3

日期为 ODate，您可以转换为字符串格式

value = DateTime.FromOADate(double.Parse(value)).ToShortDateString();

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-07-23T17:38:45.133

我在检索任何内联字符串后执行此操作：

```
 private static object Convert(this DocumentFormat.OpenXml.Spreadsheet.CellValues value, string content)
    {
        switch (value)
        {
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.Boolean:
                if (content.Length < 2)
                {
                    return content?.ToUpperInvariant() == "T" || content == "1";
                }
                return System.Convert.ToBoolean(content);
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.Date:
                if (double.TryParse(content, out double result))
                {
                    return System.DateTime.FromOADate(result);
                }
                return null;
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.Number:
                return System.Convert.ToDecimal(content);
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.Error:
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.String:
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.InlineString:
            case DocumentFormat.OpenXml.Spreadsheet.CellValues.SharedString:
            default:
                return content;
        }
    } 
```

# shader - 使用超过 2 个属性会出错

> ID：13176835
> 
> 赞同：-2
> 
> 时间：2012-11-01T12:13:17.790
> 
> 标签：shader, webgl

我对 WebGL 着色器有疑问。

我有多个着色器程序。

当我所有的着色器都有 2 个属性（类型无关紧要）时，多边形绘制得很好。

但是，如果我向任何程序添加一个属性，则不会绘制任何多边形，并且在调用时会给出“属性设置不正确”错误`DrawArrays`。

启用所有顶点属性数组，并且将数组缓冲区绑定到所有属性。我找不到错误的原因，一切都和以前一样，只是属性索引不同。

我尝试了`Get`和`BindAttribLocation`，我得到了相同的结果。

如何在我的程序中使用超过 2 个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:27:50.123

从初始化代码移动`Enable/DisableVertexAttribArray`到绘图代码。现在它正在工作！

# jsf - 根据 hashmap 列表动态生成 h:column

> ID：13176842
> 
> 赞同：4
> 
> 时间：2012-11-01T12:13:57.633
> 
> 标签：jsf, dynamic, jsf-2, datatable

在我的应用程序中，我想显示一个`<h:dataTable>`托管 bean 属性。目前，此表是从`List<Folder>`. 现在我想把它改成`Folder`更动态的东西。`Folder`那是因为如果我决定稍后添加另一个字段，我不想更改类。我只需要在 中添加另一个条目，`Map<String, Object>`而不是在`Folder`.

那么，是否可以将 a 绑定`List<Map<String, Object>>`到`<h:dataTable>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:40:30.517

> *是否可以将 HashMap 列表绑定到 jsf 组件 h:dataTable？*

只有当您`<h:column>`使用诸如 JSTL 之类的视图构建时间标记生成必要的标记时，这才有可能`<c:forEach>`。

这是一个具体的启动示例，假设您的环境支持 EL 2.2：

```
<h:dataTable value="#{bean.listOfMaps}" var="map">
    <c:forEach items="#{bean.listOfMaps[0].keySet().toArray()}" var="key">
        <h:column>
            #{map[key]}
        </h:column> 
    </c:forEach>
</h:dataTable> 
```

*（如果您的环境不支持 EL 2.2，您需要提供另一个 getter，它将映射键集返回为 a `String[]`or `List<String>`；还要记住 a`HashMap`本质上是无序的，您可能希望使用它`LinkedHashMap`来维护插入顺序)*

当您使用早于 2.1.18 的 Mojarra 版本时，缺点是`#{bean}`必须是请求范围（而不是视图范围）。或者至少，`<c:forEach items>`应该引用一个请求范围的 bean。`<c:forEach>`否则，当视图范围尚不可用时，视图范围 bean 将在视图构建期间运行时在每个单个 HTTP 请求上重新创建。如果您绝对需要一个视图范围的 bean `<h:dataTable>`，那么您总是可以专门为`<c:forEach items>`. 解决方案是升级到 Mojarra 2.1.18 或更高版本。有关一些背景信息，另请参阅[JSF2 Facelets 中的 JSTL... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

JSF 组件库（例如[PrimeFaces](http://www.primefaces.org) ）可能会提供一个`<x:columns>`标记，使这更容易，例如[`<p:dataTable>`使用`<p:columns>`](http://www.primefaces.org/showcase/ui/datatableDynamicColumns.jsf).

```
<p:dataTable value="#{bean.listOfMaps}" var="map">
    <p:columns value="#{bean.listOfMaps[0].keySet().toArray()}" var="key">
        #{map[key]}
    </p:columns>
</p:dataTable> 
```

# emacs - 如何仅将 elscreen 选项卡放在顶部？

> ID：13176843
> 
> 赞同：9
> 
> 时间：2012-11-01T12:14:00.713
> 
> 标签：emacs, elisp, gnu-screen

我在我的 GNU Emacs 24.2.1 中使用[elscreen](https://github.com/knu/elscreen)目前，当我拆分窗口时，每一半都有一个相同的选项卡面板： [elscreen http://i.zlowiki.ru/121101_0f30ebba.png/800](http://i.zlowiki.ru/121101_0f30ebba.png/800) 请注意，这两个较低的窗口与最大的窗口具有相同的选项卡。

如何删除这两个重复项，只保留最上面的一个？

如果太难了，还有什么其他的替代方法可以用于 GNU 屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-16T14:40:40.703

从技术上讲，这是您要求的事情：

```
(setq elscreen-display-tab nil) ; disable tabs display

;; get-alist was removed somewhere along the line
;; You can try substituting all instances of get-alist with assoc-default
;; instead of using defalias and see if that works; I haven't tried.
(defalias 'get-alist 'assoc-default) ; get-alist is gone

;; Put tabs display in your frame title bar instead.
(defun elscreen-frame-title-update ()
  (when (elscreen-screen-modified-p 'elscreen-frame-title-update)
    (let* ((screen-list (sort (elscreen-get-screen-list) '<))
           (screen-to-name-alist (elscreen-get-screen-to-name-alist))
           (title (concat "| " (mapconcat
                   (lambda (screen)
                     (format "%d%s %s |"
                             screen (elscreen-status-label screen)
                             (get-alist screen screen-to-name-alist)))
                   screen-list " "))))
      (if (fboundp 'set-frame-name)
          (set-frame-name title)
        (setq frame-title-format title)))))

(eval-after-load "elscreen"
  '(add-hook 'elscreen-screen-update-hook 'elscreen-frame-title-update)) 
```

![在此处输入图像描述](../Images/d3b2886858911ec48e06193585637577.png)

我敢肯定这不是您的想法，但是嘿，它现在处于非常高的位置，而且只是在顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T18:26:16.483

看看[http://www.emacswiki.org/emacs/ElscreenSeparateBufferLists](http://www.emacswiki.org/emacs/ElscreenSeparateBufferLists)稍微借鉴了escreen 修改了elscreen 的操作。它允许选项卡列表在每个缓冲区上有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T07:25:47.547

使用[elscreen-tab](https://github.com/aki-s/elscreen-tab)插件怎么样？

创建此插件是为了解决您烦恼的问题。

您可以通过 melpa 安装。

# c++ - 包含 1300 个 png 文件的文件夹到 html 图像列表中

> ID：13176844
> 
> 赞同：1
> 
> 时间：2012-11-01T12:14:10.793
> 
> 标签：c++, html, image, file, automation

我有大约 1300 个 png 图标的文件夹。我需要的是包含所有文件的 html 文件，例如：

```
<img src="path-to-image.png" alt="file name without .png" id="file-name-without-.png" class="icon"/> 
```

它非常简单，但是由于文件数量如此之多，手动完成它纯粹是浪费时间。你有任何想法如何自动化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:38:29.887

如果您只需要一次，然后执行“dir”或“ls”并将其重定向到文件，然后使用具有宏功能的编辑器（如 notepad++）记录修改单行所需的内容，然后点击播放宏文件的其余部分。如果它是动态的，请使用 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:44:20.663

我不会使用 C++ 来做到这一点。老实说，我会使用 vi，因为重复运行正则表达式就足够了。

但是年轻人用 C++ 做这件事。我将从一个计划文本文件开始，其中包含由命令提示符下的 Dir 或 ls 生成的所有文件名。

然后编写代码，接受一行输入并将其转换为您想要的格式的行。对此进行测试并使其首先在单行上运行。

C++ 的 RE 引擎可能是矫枉过正（并且在编译器中并没有得到很好的支持），但是您只需要 substr 和基本的查找和替换。有你熟悉的字符串库吗？std::string 可以。

要生成没有PNG的文件名，检查最后四个字符，看看它们是否存在并且是.PNG（如果没有则报告错误）。然后剥离它们。要删除破折号，请将字符复制到新字符串，但如果您正在阅读破折号，请写一个空格。其他一切都只是字符串连接。

# php - 我的购物车显示错误的小计和税金

> ID：13176846
> 
> 赞同：1
> 
> 时间：2012-11-01T12:14:17.137
> 
> 标签：php, magento, shopping-cart

我的购物车显示错误的小计，我认为这也影响了税收（20%）的计算。在购物车和结帐时，显示的价格是正确的，但小计和总计对它没有 20% 增值税的影响。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:20:24.733

在管理面板中，您可以设置是否显示含税/不含税的总计和价格，请访问：

```
System->Configuration->Sales->Tax 
```

除其他外，您可以设置

```
Display Prices
Display Subtotal
Display Shipping Amount 
```

成为`including tax`,`excluding tax`或`including and excluding tax`, 和

```
Include Tax In Grand Total
Display Full Tax Summary
Display Zero Tax Subtotal 
```

用于`yes`或`no`用于购物车、发票等地方。

# wordpress - 在 wordpress 编辑器中按 enter 时使用中断而不是段落

> ID：13176847
> 
> 赞同：0
> 
> 时间：2012-11-01T12:14:17.173
> 
> 标签：wordpress

非常烦人：
当我在 Wordpress（最新版本）中写一篇新文章并按 时`<ENTER>`，我得到一个段落中断而不是简单的中断。
例如：

文本`ENTER`

文本

代替

文字`ENTER`
文字

如何禁用此行为？
我不想用它`Shift+Enter`来获得这个想要的（_常识_）动作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:52:16.367

在 HTML 选项卡而不是 Visual 选项卡中编写您的文章，您将不再有这个问题。

# html - 将 div 内的超链接居中

> ID：13176851
> 
> 赞同：0
> 
> 时间：2012-11-01T12:14:33.397
> 
> 标签：html, css

我有这个CSS：

```
#footerLinks {
    text-align: center;
    margin: auto;   
}

#footerLinks a {
    float: left;
    color: #c2c2c2;
    display: block;
    font-size: 12px;
    margin-right: 10px;
} 
```

这个html：

```
<div id="footerLinks">
    <a href="">No Porn on App Store</a>
    <a href="">Porn and Apple</a>
    <a href="">iPhone Porn Wiki</a>
</div> 
```

问题是超链接不会在页面的中心。我试过了`margin: auto`，`text-align`试着玩`margins`什么都没有，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:16:35.480

从这个类中删除`float:left;`和`display:block;`

```
#footerLinks a {                
    color:#c2c2c2;
    font-size: 12px;
    margin-right: 10px;
} 
```

[**演示**](http://jsfiddle.net/364rL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:48:17.253

更新你的 CSS。

```
#footerLinks {
    text-align: center;
    margin: auto;   
}

#footerLinks a {
    color: #c2c2c2;
    font-size: 12px;
    margin-right: 10px;
} 
```

# javascript - Google Maps Rectangle 方法包含错误

> ID：13176852
> 
> 赞同：0
> 
> 时间：2012-11-01T12:14:36.917
> 
> 标签：javascript, google-maps, geolocation, prototypejs

好吧，我有一个 Google Maps 实例，其中有一个 TraceHandler。这让用户可以按城市地图制作线条。通过这些行，我使用 google DirectionsRoute 服务生成路线。该服务返回各种信息，例如 *overview_path。包含我路线中所有方向的变化。有了这些点，我创建了如下三角形：

```
 var triangle;
            for (var indexerTrian = 0; indexerTrian < self.bounds.length; indexerTrian++) {

                if (indexerTrian + 1 == self.bounds.length) break;

                var maxLng = self.bounds[indexerTrian].lng() < self.bounds[indexerTrian + 1].lng() ? self.bounds[indexerTrian].lng() : self.bounds[indexerTrian + 1].lng();
                var minLng = self.bounds[indexerTrian].lng() > self.bounds[indexerTrian + 1].lng() ? self.bounds[indexerTrian].lng() : self.bounds[indexerTrian + 1].lng();

                var latLngSouthWest = new gMap.LatLng(self.bounds[indexerTrian].lat(), maxLng);
                var latLngNorthEast = new gMap.LatLng(self.bounds[indexerTrian + 1].lat(), minLng);

                triangle= new gMap.LatLngBounds(latLngSouthWest, latLngNorthEast);

                self.triangles.push(triangle);
            } 
```

该例程的第三部分使用这些三角形在路线中引入点。一些代码：

```
//for each point
for (var i in result.page) {
                    stopPoint = result.page[i];
                    latLng = new gMap.LatLng(stopPoint.latitude, stopPoint.longitude);

                    //for each triangle
                    for (var iTrian = 0; iTrian < self.triangles.length; iTrian++) {

                        //this guy verify if the stopPoint is inside the triangle.
                        //if so. Drop it on map
                        if (self.triangles[iTrian].contains(latLng)) {

                            //this method just generate a Marker instance.
                            self.SetaMarkers(latLng, iconMarker, stopPoint.descricao, true);
                            counter++;
                            break;
                        }
                        //this is a DEBUG if who prints all points if my loop comes to 
                        //end
                        else if ((iTrian + 1) == self.triangles.length) {

                            self.SetaMarkers(latLng, null, stopPoint.descricao, true);
                            //break;
                        }
                    }
                } 
```

这很好用。执行时没有错误。但是对于那些我改变 de Longitude 的三角形，它们的*.contains*不起作用。这可能是一个错误。

这是要演示的图像。我正在打印要调试的三角形：[http](http://s7.postimage.org/ek3prgryj/Map.png) ://s7.postimage.org/ek3prgryj/Map.png正如你们在图像中看到的那样。*正常*的红色标记是那些**超出**所有三角形边界的停止点。而那些经过编辑的图像是某个三角形边界内的**停止点。**

我已经尝试了很多东西......现在我要打印每个三角形的中心，看看它是否在它必须在的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:29:12.373

解决了路线25米后使用25米圈的问题。现在我可以让用户设置*半径*，它会吸引所有人。

# javascript - IE中的jQuery淡入淡出效果(8)

> ID：13176867
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:15:32.067
> 
> 标签：javascript, jquery, internet-explorer-8, fade

示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style>
span {display:none;}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $("span").fadeIn(3000);
  });
});
</script>
</head>
<body>
<button>Fade in</button>
<span>This is some text.</span>
</body>
</html> 
```

它在 IE8 和可能较旧的版本中不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:19:47.887

我认为因为 span 标签是一个内联元素，它没有布局，不像 DIV 之类的块级元素。

将其交换到一个 div 并且它可以工作，或者，这种方法（将块布局分配给您的跨度，然后用 Jquery 隐藏）将保留您的标记并在 IE8 下按需要运行：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style>

span {display:block;}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
$("span").hide();
  $("button").click(function(){
    $("span").fadeIn(3000);
  });
});
</script>
</head>
<body>
<button>Fade in</button>
<span>This is some text.</span>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:25:17.167

如果您需要保留文本显示内联，请将跨度的 CSS 更改为“display:inline-block”，以下代码显示了此操作前后的文本：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style>

span {display:inline-block;}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
$("span").hide();
  $("button").click(function(){
    $("span").fadeIn(3000);
  });
});
</script>
</head>
<body>
<button>Fade in</button>
Previous text <span>This is some text.</span> Following text.
</body>
</html> 
```

# javascript - 将字符串转换并检查为 hta 中的特殊格式

> ID：13176871
> 
> 赞同：0
> 
> 时间：2012-11-01T12:15:42.757
> 
> 标签：javascript, vbscript, hta

我在 HTA 文件中创建了一个文本区域，例如：

```
------------------------------
| test@stackoverflow.com     |
| test@superuser.com         |
| stackoverflow.com          |
| stackapps.com              |
------------------------------    
                     Submit 
```

我希望在单击提交时使用该填充数据创建两个输出文件：

1.txt

```
3|100|test@stackoverflow.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9|
3|100|test@superuser.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9|
1|100|stackoverflow.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9|
1|100|stackapps.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9| 
```

2.txt

```
WF,test@stackoverflow.com
WF,test@stackoverflow.com
WF,*@stackoverflow.com
WF,*@stackapps.com 
```

当脚本只看到域而不是电子邮件时，我很难转换管道和 WF,*@。

# javascript - 不确定为什么这里会触发这个 jQuery click 事件

> ID：13176872
> 
> 赞同：0
> 
> 时间：2012-11-01T12:15:45.650
> 
> 标签：javascript, jquery

我已经创建了这个片段[http://jsfiddle.net/PexkV/](http://jsfiddle.net/PexkV/)

```
<script>
var arc={};

arc.handler={
  background_color:'#8DBC8F',
  console_this: function(str){
    alert('lets write this to the console ' + str + ' ' + this.background_color);
  }

}

$(document).ready(function(){
  $('.more-click-me').on('click', arc.handler.console_this('here'));
  $('.more-click-me').on('click', function(){
    arc.handler.console_this('blue');
  });

});
</script>
<div class='more-click-me'>lets write this</div> 
```

并且不确定为什么会自动调用第一个事件（示例中的“此处”）。似乎只应在点击时调用它？我没有得到什么？如果我提出了一些非常愚蠢的语法问题，请提前道歉。

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:17:48.117

因为您正在调用该函数并将其返回值传递给`.on()`. 实现您要实现的目标的最简单方法是将匿名函数传递给`.on()`，就像您在第二个示例中所做的那样，并在其中调用您的`console_this`函数：

```
$('.more-click-me').on('click', function () {
    arc.handler.console_this('here');
}); 
```

这是一个[更新的小提琴](http://jsfiddle.net/jamesallardice/PexkV/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:17:32.557

因为您正在调用该函数

```
arc.handler.console_this('here') 
```

那不是分配功能。它应该看起来像第二个。

```
$('.more-click-me').on('click', arc.handler.console_this('here'));  <-- wrong
$('.more-click-me').on('click', function(){  <-- right, uses a closure
    arc.handler.console_this('blue');
}); 
```

所以应该是

```
$('.more-click-me').on('click', function(){ arc.handler.console_this('here'); });  
$('.more-click-me').on('click', function(){ arc.handler.console_this('blue'); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:21:36.683

```
$('.more-click-me').on('click', arc.handler.console_this('here'));
$('.more-click-me').on('click', function(){
    arc.handler.console_this('blue');   }); 
```

在第一行中，您正在调用方法并尝试将结果绑定到事件。

第二行足以设置事件绑定。

# css - 为什么我的网站上的 Facebook 点赞按钮和 Twitter 推文按钮不对齐？

> ID：13176873
> 
> 赞同：1
> 
> 时间：2012-11-01T12:15:49.583
> 
> 标签：css

如下所示，文章末尾的“分享这篇精彩的读物：”。

我尝试了各种 CSS 更改，但无法对齐。

[http://poachedmag.com/2012/11/01/laneway-festival-singapore-line-up-released/](http://poachedmag.com/2012/11/01/laneway-festival-singapore-line-up-released/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:22:01.693

将此添加到您的 css 并重试：

```
div.share iframe.twitter-share-button { position: relative; top:3px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:20:41.973

我遇到过同样的问题。我最终将每个带有 style 属性的 div 放入了自己的 div 中，`float:left`对于 twitter 持有者，我补充说`margin-top:3px`，这似乎足以让它很好地排列

```
<div style="float:left">
    <!-- FACEBOOK BUTTON -->
</div>
<div style="float:left;margin-top:3px">
    <!-- TWITTER BUTTON -->
</div>
<div style="clear:both"></div> 
```

# sql - 在 Oracle 中为多个查询创建视图

> ID：13176879
> 
> 赞同：1
> 
> 时间：2012-11-01T12:16:18.107
> 
> 标签：sql, oracle, view

我有 4 个从同一个表中获取数据的 SQL 查询，我想知道您是否可以创建一个包含多个查询的视图。例如，其中一个查询类似于：

```
SELECT Count(COLUMN1) FROM TABLE1 WHERE COLUMN3 > '01-Oct-12' AND COLUMN3< '01-Nov-12' 
```

而另一个看起来像：

```
SELECT Count(COLUMN2) FROM TABLE1 WHERE COLUMN3 > '01-Oct-12' AND COLUMN3 < '01-Nov-12' 
```

谢谢，

一世。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:18:42.913

```
CREATE VIEW viewname AS
SELECT Count(COLUMN1) as col1 FROM TABLE1 WHERE COLUMN3 > '01-Oct-12' AND COLUMN3< '01-Nov-12'
union all
SELECT Count(COLUMN2) as col1 FROM TABLE1 WHERE COLUMN3 > '01-Oct-12' AND COLUMN3 < '01-Nov-12' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:18:46.107

如果您希望数据在同一记录集和同一列中，则可以使用`UNION ALL`：

```
SELECT Count(COLUMN1) As CNT, 'Q1' as Src
FROM TABLE1 
WHERE COLUMN3 > '01-Oct-12' 
 AND COLUMN3< '01-Nov-12'
UNION ALL
SELECT Count(COLUMN2) as Cnt, 'Q2' as Src
FROM TABLE1 
WHERE COLUMN3 > '01-Oct-12' 
  AND COLUMN3 < '01-Nov-12' 
```

我包括了一列，以帮助您确定您的数据来自哪个查询。如果不需要，那么您可以放弃使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:28:11.767

最简单的实现是：

```
create or replace view v23 as 
     select count(column1) as col1_count
            , count(column2) as col2_count
     from TABLE1
      WHERE COLUMN3 > '01-Oct-12' AND COLUMN3 < '01-Nov-12' 
```

但是，如果不是所有查询都使用相同的条件，您可以使用标量子查询：

```
create or replace view v23 as 
  select 
     (select count(column1) from TABLE1 
        WHERE COLUMN3 > '01-Oct-12' AND COLUMN3 < '01-Nov-12' ) as col1_count 
     , (select count(column2) from TABLE2 
        WHERE COLUMN3 > '01-Oct-12' AND COLUMN3 < '01-Nov-12' ) as col2_count
  from dual 
```

# xamarin.ios - Monotouch 自定义后退按钮

> ID：13176880
> 
> 赞同：1
> 
> 时间：2012-11-01T12:16:21.167
> 
> 标签：xamarin.ios

我正在尝试创建一个全局唯一的后退按钮，我该怎么做，所以在我的所有控制器中，默认的后退按钮将是我的自定义按钮？

我的自定义按钮是一个圆圈，里面有'<'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:43:05.090

您可以使用`UIAppearance`此功能，但仅限于 iOS 5 及更高版本：

```
UIBarButtonItem.Appearance.SetBackButtonBackgroundImage(yourImage, UIControlState.Normal, UIBarMetrics.Default); 
```

这不是我的想法（我面前没有 Mac），但代码应该非常接近。

请注意，这适用于整个应用程序中的每个后退按钮。

# ftp - IIS7.5 上的 FTP 550 ActionNotTakenFileUnavailable

> ID：13176886
> 
> 赞同：1
> 
> 时间：2012-11-01T12:16:47.057
> 
> 标签：ftp, iis-7.5

在客户项目中：他们在执行 LIST 和 NLST 命令时收到 550 FTP 错误代码 (ActionNotTakenFileUnavailable)。有人见过这个吗？

服务器信息：

它在 Windows Server 2008 R2 上的 IIS 7.5 中运行。在 IIS 日志中，我发现 sc-win32-status 代码：1236（网络连接被本地系统中止）和 sc-win32-status 代码：4294967295（IIS 中的最大连接设置）。基本身份验证已开启，并且他们使用无 SSL 证书

客户信息：他们使用 Filezilla 连接到 FTP 服务器

# java - 更改运行 Eclipse 的 Java 版本

> ID：13176890
> 
> 赞同：5
> 
> 时间：2012-11-01T12:16:53.877
> 
> 标签：java, eclipse, configuration, virtual-machine

由于 Window Builder 插件的兼容性问题，我想在较新的 Java 版本（jdk 1.7）中运行我的 Eclipse

“Eclipse 在 1.6 下运行，但这个 Java 项目的 Java 合规级别为 1.7，因此无法从该项目加载类。为项目使用较低级别的 Java，或使用更新的 Java 版本运行 Eclipse。”

所以我想，我必须在配置中更改 Eclipse 的 vm。

```
-vm
C:\Program Files (x86)\Java\jre6\bin\client\jvm.dll
eclipse.home.location=file:/C:/Program Files (x86)/Eclipse IDE for Java EE Developers/
eclipse.launcher=C:\Program Files (x86)\Eclipse IDE for Java EE Developers\eclipse.exe
eclipse.launcher.name=Eclipse
eclipse.p2.data.area=@config.dir/../p2/
eclipse.p2.profile=epp.package.jee
eclipse.product=org.eclipse.epp.package.jee.product
eclipse.startTime=1351770082498
eclipse.vm=C:\Program Files (x86)\Java\jre6\bin\client\jvm.dll
eclipse.vmargs=-Dosgi.requiredJavaVersion=1.5 
```

但我并不是很熟悉所有的语句，我的问题是我必须更改哪些语句才能使用 jdk 1.7 运行 Eclipse？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:24:32.753

编辑[`eclipse.ini`](http://wiki.eclipse.org/%C2%A0eclipse.ini)文件以`-vm`指向`JDK 7`

# git - 如何调试：Git pull 在 git pull 期间挂起（始终为 54%）

> ID：13176891
> 
> 赞同：8
> 
> 时间：2012-11-01T12:16:55.793
> 
> 标签：git, debugging, pull

我在我的存储库中添加了两个大文件（每个 150MB），现在 git pull 总是挂在 54%。我使用 ping 检查了网络，尝试使用不同的网络，我做了一个 git fsck 等。没有任何帮助。

*   我该如何调试呢？

*   有没有办法一次只获取一个大文件？问题是我的本地 git 不知道最后一次提交 =-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-18T09:40:00.403

> 但即使从远程存储库中删除了这两个文件，我也无法拉取。

你用什么方法来“删除这两个文件”？

您需要从存储库历史记录中的所有提交中删除它们。

为此，请参阅例如：[如何从 Git 存储库中的提交历史记录中删除/删除大文件？](https://stackoverflow.com/questions/2100907/how-to-remove-delete-a-large-file-from-commit-history-in-git-repository)

* * *

要检查您`git pull`是否真的停滞不前或非常慢：检查您的计算机和托管中央存储库的服务器之间的网络流量。

* * *

如果您有其他方法来获取 2 个大文件（例如：将它们从 USB 棒复制到您的本地存储库中......），您可以从本地存储库中运行`git add` （不要运行`git commit`）这些文件，然后`git reset .`取消暂存它们。

这应该将这些文件添加到本地存储库中的已知对象列表中，并且`git pull`不需要再次下载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T15:20:40.403

我认为您遇到的问题是您的克隆每次都会在中间中断。

因此，我建议您不要每次都从头开始一次又一次地克隆 repo，而是对新创建的 repo 进行 fetch。

基本上，初始化一个空的存储库

```
cd repo_name && git init 
```

在此 repo 中添加原始 repo 作为远程

```
git remote add origin url/to/repo 
```

现在做一个`git fetch`.

这样，即使您的克隆在中间中断，`fetch`也会注意仅在下次运行时引入未获取的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T04:11:41.190

增加 Git 缓冲区大小：

> git config --global http.postBuffer 157286400

大小应设置为解决问题的最小值。

# c#-4.0 - 我的 servicestack 缓存服务在响应中包含额外的斜杠

> ID：13176894
> 
> 赞同：2
> 
> 时间：2012-11-01T12:17:05.907
> 
> 标签：c#-4.0, redis, servicestack

我使用 ServiceStack 创建了一个缓存的 web 服务。

```
public class ContentSearchService : ServiceBase<ContentSearch>
{
    public ICacheClient CacheClient { get; set; }

    protected override object Run(ContentSearch request)
    {

        var cacheKey = "unique_key_for_this_request2";
        return base.RequestContext.ToOptimizedResultUsingCache(this.CacheClient, cacheKey, () =>
        {
            //Delegate is executed if item doesn't exist in cache

            //Any response DTO returned here will be cached automatically
            return new ContentSearchResponse()
            {
                Contents = new List<ContentData>()
                {
                    new ContentData()
                    {
                         FileName = "testfile.jpg"
                    }
                }
            };
        });
    }
} 
```

然后使用以下命令运行：

```
IRestClient client = new JsonServiceClient("http://internal");

ContentSearch search = new ContentSearch();

ContentSearchResponse response = client.Put<ContentSearchResponse>("/json/syncreply/ContentSearch", search); 
```

第一个响应按预期返回并转换为响应对象。第二个缓存的返回带有额外的斜杠，因此无法序列化。

第一反应：

```
{"Contents":[{"FileName":"testfile.jpg","Company":0,"Version":0}]} 
```

第二个回应：

```
{\"Contents\":[{\"FileName\":\"testfile.jpg\",\"Company\":0,\"Version\":0}]} 
```

我使用 Redis 作为缓存。

我已经查看了它们与斜杠一起存储的 redis 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:04:42.627

原来这与使用不同版本的 ServiceStack 程序集的客户端有关。我将服务器和客户端都更新到了最新版本，一切都按预期工作。

# wordpress - Wordpress - 获取带有自定义字段的帖子的标签

> ID：13176898
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:17:22.330
> 
> 标签：wordpress, tags

我有一个自定义字段，比如“mood”，我需要显示所有具有“mood”=“grumpy”的帖子的标签列表。是否可以在不获取所有帖子然后为每个帖子获取标签的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:41:15.727

您可以使用函数 get_posts();

```
$args = array(
    'meta_key'        => 'mood',
    'meta_value'      => 'grumpy',
);

$your_posts = get_posts( $args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:50:10.397

未经测试，但这应该可以实现您想要的。只需注意拼写错误和遗漏的分号！

虽然您没有得到整个帖子，但您仍然需要在数据库中查询带有“mood”=“grumpy”的帖子的 ID，所以除非您有很多帖子，否则可能更容易选择答案@多雷尔给了。

```
$query = $wpdb->prepare('
    SELECT ID
    FROM %1$s
    LEFT JOIN %2$s
    ON %1$s.ID = %2$s.post_id
    WHERE %2$s.meta_key = "mood"
    AND %2$s.meta_value = "grumpy"
    ', $wpdb->posts, $wpdb->postmeta
);
$ids = $wpdb->get_col($query);

if(!empty($ids)) : foreach($ids as $post_id) :

        $tags = wp_get_post_tags($post_id, $args);
        if(!empty($ids)) : foreach($tags as $tag) :

                $tags[] = $tag->name;

            endforeach;
        endif;

    endforeach;
endif;

// Now you have an array of Tag names, output them as you wish 
```

Codex for `wp_get_post_tags`= [http://codex.wordpress.org/Function_Reference/wp_get_post_tags](http://codex.wordpress.org/Function_Reference/wp_get_post_tags) Codex for `wp_get_object_terms`（查看`$args`可用的内容`wp_get_post_tags`）= [http://codex.wordpress.org/Function_Reference/wp_get_object_terms#Argument_Options](http://codex.wordpress.org/Function_Reference/wp_get_object_terms#Argument_Options)

# entity-framework - Entity Framework 4.2 代码先fluent api 映射中间表

> ID：13176900
> 
> 赞同：0
> 
> 时间：2012-11-01T12:17:39.650
> 
> 标签：entity-framework

如何使用代码优先和流利的 api 设置这些表关系的映射？

我为创建的所有三个实体都有一个 poco，但大多数人没有用于“中间”表（*PlanUser*）的 poco，所以我找不到一个很好的例子。我需要告诉 EF 将*PlanUser.PlanCustomerId*列映射到*Plan.CustomerId*但它要么不返回正确的结果，要么在当前设置中，*Plan*的映射会引发错误：

> “指定的关联外键列‘CustomerId’无效。指定的列数必须与主键列数匹配。”

![在此处输入图像描述](../Images/6507b80f61ffdfa3ae806980f26faf6a.png) ![在此处输入图像描述](../Images/1d3b545a178a03c715d97627ecc87727.png)

```
public class PlanUserMap : EntityTypeConfiguration<PlanUser>
{
    public PlanUserMap()
    {
        this.ToTable("PlanUser");
        this.HasKey(c => new { c.CustomerId, c.PlanCustomerId });

        this.HasRequired(c => c.Plan).WithMany().HasForeignKey(x => x.CustomerId).WillCascadeOnDelete(false);
        this.HasRequired(c => c.Customer).WithMany().HasForeignKey(x => x.CustomerId).WillCascadeOnDelete(false);
    }
}

public class PlanMap : EntityTypeConfiguration<Plan>
{
    public PlanMap()
    {
        this.ToTable("Plan");
        this.HasKey(c => c.CustomerId);
        // the below line returns only 1 row for any given customer even if there are multiple PlanUser rows for that customer
        //this.HasMany(c => c.PlanUsers).WithRequired().HasForeignKey(c => c.PlanCustomerId); 
        // this throws an error
        this.HasMany(c => c.PlanUsers).WithMany().Map(m => m.MapLeftKey("PlanCustomerId").MapRightKey("CustomerId"));
    }
}

public partial class CustomerMap : EntityTypeConfiguration<Customer>
{
    public CustomerMap()
    {
        this.ToTable("Customer");
        this.HasKey(c => c.Id);
        this.HasMany(c => c.PlanUsers).WithRequired().HasForeignKey(c => c.CustomerId);
    }
} 
```

* * *

@Slauma，sql profiler 显示正在执行的这些查询。除了客户 ID 1 之外，第二个还应包括客户 ID 43，但它没有。我不知道为什么它不检索第二行。

```
exec sp_executesql N'SELECT 
[Extent1].[CustomerId] AS [CustomerId], 
[Extent1].[PlanCustomerId] AS [PlanCustomerId], 
[Extent1].[CreatedOnUtc] AS [CreatedOnUtc], 
[Extent1].[IsSelected] AS [IsSelected], 
[Extent1].[IsDeleted] AS [IsDeleted], 
[Extent1].[AccessRights] AS [AccessRights]
FROM [dbo].[PlanUser] AS [Extent1]
WHERE [Extent1].[CustomerId] = @EntityKeyValue1',N'@EntityKeyValue1 int',@EntityKeyValue1=43

exec sp_executesql N'SELECT 
[Extent1].[CustomerId] AS [CustomerId], 
[Extent1].[Name] AS [Name], 
[Extent1].[PlanTypeId] AS [PlanTypeId], 
[Extent1].[OrderId] AS [OrderId], 
[Extent1].[CreatedOnUtc] AS [CreatedOnUtc], 
[Extent1].[IsActive] AS [IsActive]
FROM [dbo].[Plan] AS [Extent1]
WHERE [Extent1].[CustomerId] = @EntityKeyValue1',N'@EntityKeyValue1 int',@EntityKeyValue1=1 
```

以下是导致查询执行的 C# 代码：

```
 public List<Plan> GetPlans()
    {
        List<Plan> plans = new List<Plan>();

        // add each plan they have access rights to to the list
        foreach (var accessiblePlan in Customer.PlanUsers)
        {
            plans.Add(accessiblePlan.Plan);
        }

        return plans;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:59:55.917

我认为您需要的实际上比您尝试的映射更简单：

```
public class PlanUserMap : EntityTypeConfiguration<PlanUser>
{
    public PlanUserMap()
    {
        this.ToTable("PlanUser");
        this.HasKey(pu => new { pu.CustomerId, pu.PlanCustomerId });

        this.HasRequired(pu => pu.Customer)
            .WithMany(c => c.PlanUsers)
            .HasForeignKey(pu => pu.CustomerId)
            .WillCascadeOnDelete(false);

        this.HasRequired(pu => pu.Plan)
            .WithMany(p => p.PlanUsers)
            .HasForeignKey(pu => pu.PlanCustomerId)
            .WillCascadeOnDelete(false);
    }
}

public class PlanMap : EntityTypeConfiguration<Plan>
{
    public PlanMap()
    {
        this.ToTable("Plan");
        this.HasKey(p => p.CustomerId);
    }
}

public partial class CustomerMap : EntityTypeConfiguration<Customer>
{
    public CustomerMap()
    {
        this.ToTable("Customer");
        this.HasKey(c => c.Id);
    }
} 
```

我不确定您为什么禁用级联删除。我可能不会这样做（即我会删除这`WillCascadeOnDelete(false)`两个关系），因为关联实体`PlanUser`有点依赖于其他两个实体。

以下是有关这种模型的更多详细信息（有时称为“与有效负载的多对多关系”）：[首先创建代码，多对多，在关联表中具有附加字段](https://stackoverflow.com/questions/7050404/create-code-first-many-to-many-with-additional-fields-in-association-table/7053393#7053393)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:26:15.283

好的，我想通了。感谢@Slauma 的帮助！我们将存储库模式与 IOC(autofac) 一起使用。首先，我不应该在我的存储库服务中调用*Customer.PlanUsers 。*在某个地方，我们开始在存储库服务中使用 IOC 解析*客户*实体，以快速获取某些客户属性并将其放入只读变量中。这不可避免地让我们感到困扰，因为我们没有查询实体存储库本身，而是从*Customer*实体开始，期望它填充我们需要的所有内容，而不是预先填充。

```
 public List<Plan> GetPlans()
    {
        List<Plan> plans = new List<Plan>();
        var list = _planUserRepository.Table.Where(a => a.CustomerId == Customer.Id).ToList();
        foreach (var planUser in list)
        {
            plans.Add(planUser.Plan);
        }
    } 
```

# android - 通过代码编辑 EditTextPreference

> ID：13176901
> 
> 赞同：0
> 
> 时间：2012-11-01T12:17:44.000
> 
> 标签：android, sharedpreferences, android-preferences

我在EditTextPreference之后的preferences.xml中有：

```
 <EditTextPreference
     android:name="@string/pref_test"
     android:defaultValue="0.6"
     android:inputType="numberDecimal"
     android:key="editTestPref"
     android:maxLength="5"
     android:summary=""
     android:title="@string/pref_test" /> 
```

在我的一项活动中，我阅读了该值。但问题是，如果用户不输入任何内容（“”），我的应用程序就会崩溃。当然我可以在活动中做一个 if 语句来检查它是否为空字符串，但我想做以下事情：

在 Preferences.java 中，我得到了preferenceEditText 的更改。如果用户输入“”，我想设置一个默认值：

```
if (preference.getKey().equals("editTestPref")) {

            if(newValue.equals(""))
            {
                final SharedPreferences.Editor prefsEditor = prefs.edit();
                prefsEditor.putString("editTestPref", "1");
                prefsEditor.commit();

                summary = "0.6"; // to update the summary of preference
            }
            else
            {
                summary= (String) newValue;
            }
        } 
```

我也试过这段代码：

```
SharedPreferences customSharedPreference = getSharedPreferences(
         "myCustomSharedPrefs", Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = customSharedPreference
                        .edit();
editor.putString("editTestPref", "1");
editor.commit(); 
```

两者都不起作用，它们不会更新 sharedPreference 值。它还是 ””。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:34:40.093

`SharedPreferences.OnSharedPreferenceChangeListener`像这样实现：

```
public class YourPrefsActivity extends PreferenceActivity implements SharedPreferences.OnSharedPreferenceChangeListener {

    // ... your existing code ...

    @Override
    protected void onResume() {
        super.onResume();

        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
        // Set up a listener whenever a key changes
        sharedPreferences.registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    if ("editTestPref".equals(key)) {
            String val = sharedPreferences.getString("editTestPref", "");
            if (val == null || val.trim().equals("")) {
                val = "0.6"; // <-- your default value
                sharedPreferences.edit().putString(key, val).commit();
            }
        }
    }
} 
```

当用户更改首选项值时调用该方法，并检查他是否输入了空字符串。如果是这样，则该值将替换为您的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:22:08.307

您应该使用`if(newValue.isEmpty())`而不是检查字符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T12:31:51.823

我在您的代码中没有发现任何问题，但如果可行，请尝试此操作..

替换这个

```
prefsEditor.putString("editTestPref", "1"); 
```

和

```
prefsEditor.putString("editTestPref", String.valueof(1)); 
```

好运。

# tortoisesvn - 如何合并 xmi 文件？

> ID：13176908
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:18:10.757
> 
> 标签：tortoisesvn, xmi

我们从主干创建了一个分支（使用 TortoiseSVN），现在我们需要将它合并回来。问题是这些文件是数据模型的 xmi 文件，这不允许我们解决冲突以将其合并回来。编辑器只显示大量奇怪的字符或问号。

我在网上找不到太多关于它的解决方案。请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:27:54.300

检查[EMF 比较](http://www.eclipse.org/emf/compare/)是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:16:51.233

可能您的文件包含二进制数据，但 TortoiseSVN 将它们视为文本，从而混淆了 TortoiseMerge 过程。

顺便说一句，如果分支文件是最新的，请考虑使用文件的分支版本解决冲突。

此外，考虑使用属性标记您的 XMI 文件`svn:mime-type application/octet-stream`。这将避免 TortoiseMerge 行为不端。

# c# - 不对应

> ID：13176909
> 
> 赞同：1
> 
> 时间：2012-11-01T12:18:16.127
> 
> 标签：c#, asp.net

我的 ASP.NET 页面没有显示控件。它只是显示母版页错误

> 该页面有一个或多个与母版页中的控件`<asp:content>`不对应的控件`<asp:ContentPlaceHolder`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-29T14:03:19.637

删除主文件中的注释（<%-- --%>），这对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T12:24:51.937

尝试设置

```
<title></title> 
```

代替

```
<title /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T12:23:02.333

您的所有`Content`控件都必须引用`ContentPlaceHolders`母版页上的现有控件

例如，如果您的页面上有

```
<asp:Content ContentPlaceHolderID="Header" ID="Title" runat="server"> 
```

您的母版页上必须有类似的内容

```
<asp:ContentPlaceHolder ID="Header" runat="server" /> 
```

`ContentPlaceHolderID`是必须与`ContentPlaceHolder`母版页上的任何 ID 匹配的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T16:17:47.953

问题是您必须在 master.page 的标记中有语法错误：

例如）%²> 代替 %>

如果您验证您的标记，我相信这会解决您的问题

PI。我有同样的错误，它对我有用；）

# joomla - 关于 joomla 2.5 中的菜单

> ID：13176918
> 
> 赞同：1
> 
> 时间：2012-11-01T12:18:50.570
> 
> 标签：joomla, joomla2.5

大家好，我是 joomla 的新手，我对创建菜单有点困惑。

首先在管理员站点中创建一个带有类别和文章的 mainmenu 类型的菜单。这很好。

其次，我创建了一个模板，我的模板中的位置是这个

```
<positions>
    <position>izquierdo</position>
    <position>extranet</position>
    <position>menuPrincipal</position>
    <position>carrusel</position>
    <position>noticias</position>
    <position>footer</position>
    <position>debug</position>
</positions> 
```

我希望我的菜单在这个位置`<position>menuPrincipal</position>` ，这是我的模板索引中的正文

```
<body class="cabecera <?php ($portada)? "" : "_otra"  ?> ">
        <div id="wrapper-top" class="fondo <?php ($portada)? "": "_otra" ?> ">
            <div class="row">
            <jdoc:include type="modules" name="mod_izquierdo" style="none"/>
                    <div id="wrapper-header-right" class="column grid_10">
                    <jdoc:include type="modules" name="mod_extranet" style="none"/>
                    <div id="Menu_Principal">
                        <ul class="menu">
                            <jdoc:include type="modules" name="mod_menuPrincipal" style="none"/>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    <div id="wrapper-body" class="row">
        <div id="content" class="column grid_16">
            <jdoc:include type="component" />
            <jdoc:include type="modules" name="mod_noticias" style="none"/>
        </div>

        <div class="clr"></div>
        <jdoc:include type="modules" name="mod_carrusel" style="none"/>
        <div class="clr"></div>
    </div>
    <jdoc:include type="modules" name="mod_pie" style="none"/>
</body> 
```

这很好用，但我不太了解

这是我的菜单

```
 <div id="Menu_Principal">
                    <ul class="menu">
                        <jdoc:include type="modules" name="mod_menuPrincipal" style="none"/>
                    </ul>
                </div> 
```

我像主菜单一样公开我的菜单（在 mod_menuPrincipal 中公开）

如果我删除了这一行，则`<jdoc:include type="modules" name="mod_menuPrincipal" style="none"/>`不会显示菜单，但是“mod_menuPrincipal”的功能是什么，我创建了这个模块以放入菜单中，但最后我将菜单移到了我的索引中，现在这个模块是空的。

什么是适当的表现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:51:06.420

这

```
<jdoc:include type="modules" name="mod_menuPrincipal" style="none"/> 
```

是一种语法，用于在模板中的特定位置显示您的特定模块。`mod_menuPrincipal`并且是一个模块，从中生成菜单代码并显示在模板位置。

有关更多详细信息，请参阅此[链接](http://docs.joomla.org/Module)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:26:39.897

首先，您需要修复模板中的代码。菜单的位置应如下所示 -

```
<jdoc:include type="modules" name="menuPrincipal" style="none"/> 
```

接下来，在 admin 中，在 Extensions 菜单中找到 Module Manager。在模块参数中，有一个参数可以让您选择您希望模块显示在哪个模块位置。为菜单模块选择menuPrincipal。最后，您要确保将模块分配给至少一个菜单项。不过，您可能希望它显示在所有菜单项上，这也是一个选项。

# c# - Azure Blob 租赁和发布

> ID：13176920
> 
> 赞同：1
> 
> 时间：2012-11-01T12:18:58.147
> 
> 标签：c#, .net, azure, azure-storage

```
string uri = "myurl";
string blobstatus = GetBlobStatus(uri);
if (blobstatus != LeaseStatus.Locked.ToString())
{
    string response = AquireBlob(uri);
    //process data.
    string abc = ":em";
    ReleaseBlob(response, uri);
} 
```

以上是我在 blob 上租用和释放锁的代码。我正在研究将此方法用于多实例工作者角色，我想在`x`一段时间后运行特定代码，因为多个实例可以同时执行代码。

问题是我设法得到了`LeaseId`正确的，但是当第二个实例检查 blob 租约状态时，它总是未指定。为什么会这样？任何线索？

我按照以下链接抢先一步。

[使用存储客户端库租用 Windows Azure Blob - blog.smarx.com](http://blog.smarx.com/posts/leasing-windows-azure-blobs-using-the-storage-client-library)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T13:00:31.813

我认为你的方法不应该依赖于首先检查 blob 状态，然后根据它决定是否获取租约。您应该始终尝试获取租约并捕获该过程中引发的异常。这样，如果此代码在多实例环境中运行，则只有一个实例能够获得租约（而其他实例只会抛出错误）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-05T07:57:58.190

好建议..我解决了这个问题。发现实际上 LeaseStatus 属性不好并且从不返回结果。我必须通过输入网络请求来获得状态，然后我才能得到正确的结果。

# php - 反序列化后传递的 PDO 对象的问题

> ID：13176922
> 
> 赞同：0
> 
> 时间：2012-11-01T12:19:00.837
> 
> 标签：php, object, serialization, constructor, pdo

您好，我序列化了一个对象（类用户）以将其设置在 $_SESSION 数组中，当用户登录我的网站时，该对象被设置在 $_SESSION 中，后来被反序列化以使用方法，但我有一个问题，在我通过的那个类上__constructor 中的 PDO 对象（连接到 MySQL）并且我将成员变量设置为 PDO 对象，但是当我反序列化“容器对象”时它不执行 __constructor 函数，因此作为 PDO 对象的成员变量不会设置.. 我也尝试序列化 PDO 对象，但我无法序列化 PDO 对象，在扩展的“MyPDO”类中添加 __sleep() 和 __wakeup() 函数我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:16:26.523

首先，您不应该将 pdo 对象存储在会话中，因为打开的连接总数是有限的，这将导致您在所有连接都累积时出现错误“连接太多”。这意味着 max_connection 有 mysql 配置设置 my.cnf，它定义了可以与 mysql 数据库建立的最大并发连接。所以你不应该在会话中保存 pdo。建议状态甚至应在创建 sql 查询字符串后创建连接。

对于每个请求，您都应该创建新连接。如下

```
// create sql query
// create connection to database
// begin transaction if require
// prepare statement 
// execute query 
// close statement object
// // commit changes if transaction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:15:51.657

因此，您可以简单地在会话中存储用户详细信息数组。除了这个会话之外是对象存储而不是文件存储，因此您可以将 PDO 直接存储到会话而无需序列化 PDO 对象。

# javascript - 在 GWT 中的单个位置嵌入外部 JavaScript 库

> ID：13176923
> 
> 赞同：1
> 
> 时间：2012-11-01T12:19:02.023
> 
> 标签：javascript, gwt

我想将外部 Javascript 库添加到我的 GWT 应用程序中。该库应该从外部位置下载，或者可以放在我的 webapp 文件夹中。我想从 GWT JSNI 调用它的方法。

我知道我可以将标签添加到我的 GWT 应用程序的 HTML 文件中。但一个问题是我不想在我的 GWT 应用程序的所有位置加载该库。我只想在用户打开一些小部件时加载它。原因是库在加载时运行一些脚本。

那么如何将外部 Javascript 库合并到一些 GWT 小部件中而不将其放入 GWT 应用程序 HTML 页面中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:50:47.010

您可以使用 GWT ScriptInjector：

[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html)

# c# - 墨水画布字节数组图像绑定

> ID：13176924
> 
> 赞同：0
> 
> 时间：2012-11-01T12:19:10.493
> 
> 标签：c#, wpf

我有一个墨水画布，用户可以在上面画画，我将它作为字节数组保存到数据库中作为图像：

```
using (MemoryStream ms = new MemoryStream())
{
    if (icPad.Strokes.Count > 0)
    {
        icPad.Strokes.Save(ms, true);
        picture = ms.ToArray(); 
```

如何检索将字节数组绑定到图像中？

编辑：

我使用下面的代码转换为 BitmapImage：

```
 if (imageData == null || imageData.Length == 0) return null;

    var image = new BitmapImage();
    try
    {
        using (var mem = new MemoryStream(imageData))
        {
            mem.Position = 0;
            image.BeginInit();
            image.CreateOptions = BitmapCreateOptions.PreservePixelFormat;
            image.CacheOption = BitmapCacheOption.OnLoad;
            image.UriSource = null;
            image.StreamSource = mem;
            image.EndInit();
        }

        image.Freeze();

    }
    catch (Exception ex)
    {

    }

    return image;
} 
```

我收到一个错误：

> 未找到适合完成此操作的成像组件。

# scons - 为什么 scons 会撤消我对源文件的更改？

> ID：13176927
> 
> 赞同：1
> 
> 时间：2012-11-01T12:19:21.083
> 
> 标签：scons

我正在尝试构建一个使用 scons 的开源项目。

我尝试修改一些源文件，但是当我使用 scons 重建时，我所做的所有更改都被删除了。

# configuration - 如何让 Yeoman 不使用应用程序 .js 文件的父目录名称？

> ID：13176930
> 
> 赞同：3
> 
> 时间：2012-11-01T12:19:32.873
> 
> 标签：configuration, angularjs, yeoman

当我`yeoman init angular:all`用来引导我的应用程序时，yeoman 使用我从中调用它的目录的名称作为主应用程序 .js 文件的名称。即，如果我在 中运行命令`/Users/myusername/dev/projects/my-angular-app`，则该文件`app/scripts/my-angular-app.js`将创建为应用程序的主 .js 文件。

如果我只是重命名根目录，那么使用 Yeoman 添加路由将不起作用，因为它无法再找到它创建的 .js 文件。在调用 Yeoman init 命令时，我尝试将应用程序的名称添加为参数，但这不起作用。

我尝试在具有我希望应用程序具有的名称的目录中执行 init 命令，然后重命名该目录。但似乎 Yeoman 每次调用时都会读取该目录的名称，因此在更改目录名称后，Yeoman 不再能够为我创建路由，因为它找不到与该目录同名的 .js 文件根目录。

如何让 Yeoman 为 my-angular-app.js 文件使用不同的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T16:01:53.477

有一张关于它的公开[票](https://github.com/yeoman/generators/issues/82)，请在那里权衡你的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:05:07.867

我不确定这是否可行，但您可能想查看 Gruntfile.js 并替换配置中的所有实例（如果它存储旧路径并用新路径替换它）。我不确定这是否会起作用，因为我从未尝试过，但这可能基于我对 Grunt 的理解。

我和你一样，我喜欢以我想要的方式命名事物，这为什么我不使用 Yeoman，即使我很愿意（就像他们说的，这是固执己见，对我来说太固执己见），我有一些习惯构建了 grunt 任务，为我提供了我需要的大部分功能（主要是 SASS/TypeScript 的自动编译、缩小 CSS/JS 和连接 CSS/JS 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T21:43:41.877

问题在于生成器角度。

目前，应用名称取自 bower **component.json**文件。如果您使用更新的命名此文件**bower.json**的约定，则应用程序名称将回退到目录名称。

**将bower.json**重命名为**component.json**，直到对新命名方案的支持使其成为 generator-angular。

看起来这些更改已经完成但尚未合并到主分支中： [renaming-deprecated-component_json](https://github.com/robinboehm/generator-angular/branches/renaming-deprecated-component_json)

# python - 切诺基+uWSGI+web2py

> ID：13176931
> 
> 赞同：0
> 
> 时间：2012-11-01T12:19:35.497
> 
> 标签：python, web2py, cherokee

如何使用 uWSGI 和 web2py 配置 cherokee 1.2 服务器？经过一番谷歌搜索后，我阅读了一些关于配置的导师，但导师中的切诺基版本太旧了。是否有任何新教程或有人可以逐步解释如何在切诺基中部署 web2py 应用程序？我的系统是 Ubuntu 12.04，安装了所有依赖项，安装了 uWSGI 和切诺基。我的 web2py 文件夹位于 /var/web2py 中，其中包含用于 uWSGI 参数的 config.xml。config.xml 内容为：

```
<uwsgi>
<pythonpath>/var/web2py/</pythonpath>
<app mountpoint="/">
<script>wsgihandler</script>
</app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:54:16.293

[您可以在“ web2py Application Development Cookbook](http://www.packtpub.com/web2py-application-development-recipes-to-master-python-web-framework-cookbook/book) ”一书中找到对这种设置的详尽描述。这是文本中给出的 config.xml：

```
 <uwsgi>
      <pythonpath>/var/web2py</pythonpath>
      <module>wsgihandler</module>
      <socket>127.0.0.1:37719</socket>
      <master/>
      <processes>8</processes>
      <memory-report/>
 </uwsgi> 
```

完成之后，系统会指示您以拥有 web2py 安装的用户身份运行 uWSGI 堆栈： `$ uWSGI -d config.xml`

根据书中提供的方法，然后`cherokee-admin`通过 webui 启动和配置服务器（它应该在端口 9090 上侦听）。他们使用文件中的信息引导您完成远程主机的设置`config.xml`，创建虚拟主机，然后为其提供处理程序。还有关于使用正则表达式工具来提供静态文件的信息。

# javascript - 有没有办法解析这个 JSON？

> ID：13176933
> 
> 赞同：1
> 
> 时间：2012-11-01T12:19:42.960
> 
> 标签：javascript, ember.js

我有一个以下格式的 JSON， `{ "A.B.C" : "a.b.c", "C.D.E" : "c.d.e" }` 但我无法在 javascript 中解析这个 json。如何获得“ABC”的值？

我想使用 ember-rest.js 中的 load() 将这个 JSON 加载到 Ember.ResourceController 的 content[] 中

加载此内容时出现错误“找不到路径 AB 中的对象或已被破坏”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T12:22:34.843

根据[jsonlint](http://jsonlint.com/)，该 JSON 是有效的，这意味着您可以定期解析它：

```
var obj = JSON.parse('{ "A.B.C" : "a.b.c", "C.D.E" : "c.d.e" }');
var test = obj["A.B.C"]; // "a.b.c" 
```

[http://jsfiddle.net/88vFv/](http://jsfiddle.net/88vFv/)

诀窍是您需要使用括号表示法而不是点表示法，因为您的属性名称包含点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:21:00.897

试试这个：

```
var json = { "A.B.C" : "a.b.c", "C.D.E" : "c.d.e" };
var value = json["A.B.C"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:21:03.530

你试过这个吗？

```
data = JSON.parse('{ "A.B.C" : "a.b.c", "C.D.E" : "c.d.e" }')
data["A.B.C"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:21:58.427

只需使用`JSON.parse`：

```
var values = JSON.parse('{ "A.B.C" : "a.b.c", "C.D.E" : "c.d.e" }');
var result = values['A.B.C']; 
```

# sql - 这里有什么问题？sql查询给我一个错误1146

> ID：13176935
> 
> 赞同：1
> 
> 时间：2012-11-01T12:19:46.873
> 
> 标签：sql, mysql-error-1146

我正在尝试使用一个表（聚会）中每一行的所有列，以及另一个（客户）中的一些列。

好的，这是我的代码

```
public function getParty($data = array()) {

    $sql = "SELECT party.* , customer.customer_id AS customerID, customer.firstname AS customerFN, customer.lastname AS customerLN, customer.email AS customerEMAIL, customer.ip AS cutomerIP
    FROM `" . DB_PREFIX . "party` 
    JOIN `" . DB_PREFIX . "cutomer` 
    ON party.cutomer_id = customer.customer_id
    WHERE status=3";

    $sort_data = array(

        'date_added',
        'order_id',
        'customer_id',
        'customerFN',
        'customerLN',
        'customerEMAIL',
        'customerIP',
        'description',
        'status',
        'amount'

    );

    if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
        $sql .= " ORDER BY " . $data['sort'];   
    } else {
        $sql .= " ORDER BY date_added"; 
    }

    if (isset($data['order']) && ($data['order'] == 'DESC')) {
        $sql .= " DESC";
    } else {
        $sql .= " ASC";
    }

    if (isset($data['start']) || isset($data['limit'])) {
        if ($data['start'] < 0) {
            $data['start'] = 0;
        }           

        if ($data['limit'] < 1) {
            $data['limit'] = 20;
        }   

        $sql .= " LIMIT " . (int)$data['start'] . "," . (int)$data['limit'];
    }

    $query = $this->db->query($sql);

    return $query->rows;
} 
```

这是错误

```
Notice: Error: Table 'XXX.cutomer' doesn't exist
Error No: 1146
SELECT party.* , customer.customer_id AS customerID, customer.firstname AS customerFN, customer.lastname AS customerLN, customer.email AS customerEMAIL, customer.ip AS cutomerIP FROM `party` JOIN `cutomer` ON party.cutomer_id = customer.customer_id WHERE status=3 ORDER BY date_added ASC LIMIT 0,10 in /srv/www/htdocs/XXX/system/database/mysql.php on line 49 
```

也许我在某个地方错了，但没有看到

问候彼得·斯托亚诺夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:22:05.247

```
JOIN `" . DB_PREFIX . "cutomer` 
```

应该

```
JOIN `" . DB_PREFIX . "customer` 
```

?

还...

```
ON party.cutomer_id = customer.customer_id 
```

应该

```
ON party.customer_id = customer.customer_id 
```

?

我会搜索所有实例`cutomer`并将它们替换为`customer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:22:20.113

我认为应该是

```
ON party.customer_id = customer.customer_id 
```

代替

```
ON party.cutomer_id = customer.customer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:26:01.130

请从

```
 JOIN `" . DB_PREFIX . "cutomer` 
```

到

```
 JOIN `" . DB_PREFIX . "customer` 
```

前任：

```
 FROM `" . DB_PREFIX . "party` 
    JOIN `" . DB_PREFIX . "customer` 
    ON party.cutomer_id = customer.customer_id
    WHERE status=3"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T12:23:52.747

将您的 SQL stmt 更改为：

```
$sql = "SELECT party.* , customer.customer_id AS customerID, customer.firstname AS customerFN, customer.lastname AS customerLN, customer.email AS customerEMAIL, customer.ip AS customerIP
FROM `" . DB_PREFIX . "party` 
JOIN `" . DB_PREFIX . "customer` 
ON party.customer_id = customer.customer_id
WHERE status=3"; 
```

# iphone - 每次调用 MKStoreManager (iPhone)

> ID：13176937
> 
> 赞同：2
> 
> 时间：2012-11-01T12:19:50.227
> 
> 标签：iphone, in-app-purchase, mkstorekit

`MKStoreManager`每当我进入应用购买视图时，我都想打电话，这样我就可以从 iTunes 获取更新的价格。

但是注意到如果我打电话`[MKStoreManager sharedManager]`一次，那么它就永远不会再打电话了，因为下次它不是零。

如果我强行设置`nil`为，`_sharedManager`那么它会在这里崩溃：

```
[[SKPaymentQueue defaultQueue] addPayment:[SKPayment paymentWithProduct:product]]; 
```

我如何每次调用 [MKStoreManager sharedManager] 以获得更新的值？

# c# - ExecuteAction 信息路径插件的问题

> ID：13176938
> 
> 赞同：0
> 
> 时间：2012-11-01T12:20:00.600
> 
> 标签：c#, infopath

我正在为用 C# 编写的 Infopath 开发 COM 插件。该插件将以按钮的形式复制光标下的文本，对其进行处理，并应粘贴格式化的输出。

一切都很完美，除了粘贴。将存储为 RTF 的数据粘贴到我正在使用的剪贴板中

```
this.Application.ActiveWindow.XDocument.View.ExecuteAction("Paste", Type.Missing); 
```

这样做的问题是它弄乱了字体（一切都显示为粗体）。剪贴板中的数据是正确的。

我知道这一点，因为奇怪的是，如果我删除这一行并手动按粘贴/Ctrl+V，数据就会正确粘贴。

所以总结一下 ExecuteAction("Paste") != 手动粘贴。我可以用什么来“模拟”手动粘贴操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:42:00.327

尝试通过命令栏模拟手动粘贴，如下所述：http: [//social.msdn.microsoft.com/Forums/en-US/sharepointcustomizationlegacy/thread/3c7f17ee-3c7c-4efd-9cbe-66b2f8f2c2d1](http://social.msdn.microsoft.com/Forums/en-US/sharepointcustomizationlegacy/thread/3c7f17ee-3c7c-4efd-9cbe-66b2f8f2c2d1)

它们会`.View.Window.CommandBars.ActiveMenuBar`根据索引进行特定控制，但您可以通过`FindControl()`在命令栏级别使用来使其更加健壮。

如果您使用的是 InfoPath 2010，您可能必须通过功能区而不是命令栏。

# c# - 强制转换 ICollection 以覆盖 GetOrphans()

> ID：13176940
> 
> 赞同：0
> 
> 时间：2012-11-01T12:20:08.980
> 
> 标签：c#, nhibernate, casting

我想允许在 Fluent NHibernate 中重新做父母。
[在这里](https://stackoverflow.com/a/5623693/1394336)，我读到我必须创建两个继承自`IUserCollectionType`和的类`PersistentGenericBag<MyClass>`。如果我`Box`从示例更改为我自己的类名，一切正常 - 除了一件事：在继承自的类中，`PersistentGenericBag<MyClass>`我无法覆盖`GetOrphans()`，因为`Cast()`没有为`ICollection`.
这就是我想要的：

```
public override ICollection GetOrphans(object snapshot, string entityName)
{
    var orphans = base.GetOrphans(snapshot, entityName)
        .Cast<MyCalss>()
        .Where(b => ReferenceEquals(null, b.CurrentStorage))
        .ToArray();

    return orphans;
} 
```

我如何`Cast`在 上使用`ICollection`？

**编辑**
这是我得到的确切错误（不幸的是它是德语）：`Fehler 1 "System.Collections.Generic.ICollection<T>" enthält keine Definition für "Cast", und es konnte keine Erweiterungsmethode "Cast" gefunden werden, die ein erstes Argument vom Typ "System.Collections.Generic.ICollection<T>" akzeptiert. (Fehlt eine Using-Direktive oder ein Assemblyverweis?)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:30:06.713

[`Cast<T>`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)是一个存在于命名空间中的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)`System.Linq`。

并且要使用扩展方法，您需要使用`using`指令添加它的命名空间。

所以只需将以下内容添加`using`到您的文件中，它应该可以工作：

```
using System.Linq; 
```

# ruby-on-rails - 如何使用 Rails 生成此模式？

> ID：13176946
> 
> 赞同：0
> 
> 时间：2012-11-01T12:20:35.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relational-database

我有一个关系数据库的模式，我想在我的 Ruby on Rails 3.2.8 项目中为其生成脚手架。我发现文档很混乱，到目前为止我的努力都失败了，所以我的问题是我将如何为以下模式生成所需的脚手架/模型：

```
USER
name:string
email:string
-----
has_many: posts

TAG
name:string
-----
belongs_to_and_has_many: series
belongs_to_and_has_many: posts

POST
title:string
body:text
-----
belongs_to_and_has_many: tags
belongs_to: user
belongs_to: category

SERIES
name:string
website:string
-----
belongs_to_and_has_many: tags

CATEGORY
name:string
-----
has_many: posts 
```

![架构图片](../Images/48156a6815f0df8c382ed19e284d6086.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:33:46.537

开始了 ：

```
rails g scaffold User email:string password:string
rails g scaffold Category name:string
rails g scaffold Post title:string body:text category:references user:references
rails g scaffold Tag name:string
rails g scaffold TagsPost post:references tag:references
rails g scaffold Serie name:string website:string
rails g scaffold TagsSerie serie:references tag:references 
```

我在这里使用它是`references`因为它具有自动为您在列上生成索引的额外好处。虽然数据库生成很好，但我建议您查看实际生成的 db/migrations 文件并添加更多索引等...

如果您不希望默认索引，只需使用`model_name_id:integer`like生成`serie_id:integer`（注意这里的单数形式）

我还考虑将您的关联表重命名为单数：因为它是 a`TagPost`与a或 a之间的关联`TagSerie``Tag``Serie``Post`

另请注意，在生成符合 Rails 的自动外键时，默认情况下它们将被命名`model_name_id`，而不是`id_users`您的架构提到的。所有这些都可以更改，但更容易让 Rails 为您解决所有问题。约定优于配置是 Rails 的一大优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:40:00.987

我更改了您的字段名称的视图，因此rails 可以自动创建表引用（而不是`id_categories`应该是`category_id`...）。

```
rails g scaffold user email:string password:string (will most likely be password_digest:string)
rails g scaffold category name:string
rails g scaffold post title:string body:string category_id:integer user_id:integer
rails g scaffold tags_posts post_id:integer tag_id:integer
rails g scaffold serie name:string website:string
rails g scaffold tag name:string
rails g scaffold tags_series tag_id:integer series_id:integer 
```

作为个人喜好，我也不会`tags_posts`用作表名，我会称它为`tagging`（s）以及`tags_series`will be`link(s)`或其他名称。

我建议你看看[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)。它应该澄清很多关于命名约定、模型和迁移的内容。

# wpf - 在 WPF MVVM 中，如何通过双击将项目从一个列表框传输到另一个列表框？

> ID：13176948
> 
> 赞同：0
> 
> 时间：2012-11-01T12:20:41.987
> 
> 标签：wpf, mvvm, listbox

我想双击将一个项目从“购物清单”复制到“购物车”列表框中。现在，我的模型只有每个列表的 ObservableCollection 字符串，但最终对象会变得更加复杂。

ViewModel 使用 DataTemplate 映射到视图。现在，我的 ViewModel 上只有一个“Session”属性，它在包含 ObservableCollections 的模型中公开我的 Session 对象。

我试过这个...

```
<ListBox Name="listBoxShopList" ItemsSource="{Binding Path=Session.Products}">
  <ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
      <EventSetter Event="MouseDoubleClick" Handler="ListBoxItemMouseDoubleClick"/>
    </Style>
  </ListBox.ItemContainerStyle>
</ListBox>
<ListBox Name="listBoxCart" ItemsSource="{Binding Path=Session.CartItems, UpdateSourceTrigger=PropertyChanged}"/> 
```

从代码隐藏我确实得到了事件，我可以得到 SelectedItem。但是作为 MVVM 的新手，我无法弄清楚如何将项目添加到“购物车”集合中。看来我应该能够直接访问 ViewModel Session.CartItems ，因为 View 可以。参数化命令是要走的路吗？如果有，有推荐的文章吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:30:00.640

好吧，你会在双击时调用你的处理程序（视图代码的一部分）。目前很好。

现在，您需要通过调用命令（首选方式）或通过 DataContext 与 VM 通信（简单方式）。您的 VM 可以根据需要更新 ObservableCollection，视图将通过通常的绑定获取更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:33:16.533

在您的事件处理程序代码隐藏中，您可以像这样获得 ViewModel：

```
var viewModel = DataContext as <YourViewModelType>; 
```

然后将选定的项目转移到购物车。
首选的方法是使用命令，例如[`DelegateCommand`](http://relentlessdevelopment.wordpress.com/2010/03/30/simplified-mvvm-commanding-with-delegatecommand/).

# php - PHPUnit 同时模拟接口和类

> ID：13176950
> 
> 赞同：1
> 
> 时间：2012-11-01T12:20:49.910
> 
> 标签：php, unit-testing, tdd, phpunit

我有一些看起来像这样的代码：

```
public function foo(Bar $bar) {
    if ($bar instanceof Iterator) {
        //...
    }
} 
```

为了测试这一点，我正在使用：

```
$this->getMock('Bar'); 
```

但是，因为我的代码正在寻找实现 Iterator 的 Bar 实例，所以它基本上有两种类型。通过调用 getMock('Bar') 或 getMock('Iterator') 代码是不可测试的。

如何使模拟实现接口？这一定是可能的，当然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:51:55.293

模拟某些东西`PHPUnit`会创建一个你告诉它模拟的类**的子类。**

如果`Bar`实现了迭代器，你`BarMock`也将实现迭代器。

## 示例.php

```
<?php

interface myInterface {

    public function myInterfaceMethod();

}

class Bar implements myInterface {

    public function myInterfaceMethod() {
    }

}

class TestMe {

    public function iNeedABar(Bar $bar) {
        if ($bar instanceOf myInterface) {
            echo "Works";
        }
    }
}

class TestMeTest extends PHPUnit_Framework_TestCase {

    public function testBar() {
        $class = new TestMe();
        $bar = $this->getMock('Bar');
        $class->iNeedABar($bar);
    }

} 
```

* * *

## 输出：

```
phpunit Sample.php 
PHPUnit 3.7.8 by Sebastian Bergmann.

.Works

Time: 0 seconds, Memory: 5.25Mb

OK (1 test, 0 assertions) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-27T09:38:07.940

我认为您可以使用接口的完全限定名称来模拟类。然后，模拟类实现您需要的接口。

# php - PHP 网络服务语言翻译器

> ID：13176951
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:20:50.900
> 
> 标签：php, web-services, translation

我需要将网络服务响应从英语翻译成其他语言，如西班牙语、法语等。在这里我获取 mysql 数据作为我的英语网络服务响应，所以在这里我需要将其转换为特定语言而不使用 google-翻译者。你能给我你的宝贵建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:32:16.693

把你的 API ID 代替 YoutApiIDHere:

```
<?php

echo translate('Hello World', 'en', 'fr');

function translate($text, $from, $to) {

 $data = file_get_contents('http://api.bing.net/json.aspx?AppId=YoutApiIDHere&Sources=Translation&Version=2.2&Translation.SourceLanguage=' . $from . '&Translation.TargetLanguage=' . $to . '&Query=' . urlencode($text));

 $translated = json_decode($data);

 if (sizeof($translated) > 0) {

 if (isset($translated->SearchResponse->Translation->Results[0]->TranslatedTerm)) {

 return $translated->SearchResponse->Translation->Results[0]->TranslatedTerm;

 } else {

 return false;

 }

 } else {

 return false;

 }

}

?> 
```

# sql - 带有If条件的Sql Server联合

> ID：13176954
> 
> 赞同：19
> 
> 时间：2012-11-01T12:21:02.737
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个像这样的查询：

```
DECLARE @tmpValue
SET @tmpValue = 0 -- it will be change 

SELECT * FROM Animal WHERE AniActive = 1
UNION 
IF @tmpValue > 0 
SELECT * FROM Animal WHERE.Active = 0 
```

当我这样使用时，由于 if 条件，它会给出错误。由于我们的结构，我必须使用 UNION。

如何在 if 条件下使用它？

谢谢，
约翰

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T12:23:05.387

将条件`@tmpValue > 0`移至`WHERE`子句，如下所示：

```
SELECT * FROM Animal WHERE AniActive = 1
UNION
SELECT * FROM Animal WHERE @tmpValue > 0 AND Active = 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T18:32:43.473

将条件放入 Query 的最佳方法是 CASE 语句。您可以在查询中放置任意数量的条件。CASE 语句用于在 Query 中放置条件过滤器。

对于 EX。

```
DECLARE @tmpValue
SET @tmpValue = 0 -- it will be change 

SELECT * FROM Animal WHERE AniActive = 1
UNION
SELECT * FROM Animal 
WHERE 
1 = CASE WHEN @tmpValue  = 0 THEN 0 ELSE Active = 1 END 
```

您的情况并不复杂，但对于更复杂的情况，您可以在 Query 中使用嵌套 CASE 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T12:24:59.020

您可以像这样将您的条件添加到查询中。如果您的测试条件为假，则联合的部分部分将不返回任何结果：

```
DECLARE @tmpValue

SET @tmpValue = 0 -- it will be change 

SELECT * FROM Animal WHERE AniActive = 1
UNION 
SELECT * FROM Animal WHERE.Active = 0 and @tmpValue > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:56:42.940

这是通过完全摆脱 UNION 来简化代码的方法。在可能的情况下，我总是更喜欢更简单的解决方案。如果 select 执行表扫描，这也会执行得更好，因为它只会扫描一次而不是（可能）两次。

```
DECLARE @tmpValue

SET @tmpValue = 0 -- it will be change

SELECT * FROM Animal WHERE AniActive = 1 OR @tmpValue > 0 
```

# php - 在给定日期更改全局变量

> ID：13176960
> 
> 赞同：0
> 
> 时间：2012-11-01T12:21:16.913
> 
> 标签：php, wordpress, global-variables

我想，这是一个非常简单的问题。我希望我的 wordpress 主题在给定日期自动更改一些全局变量。

我的主题每两个月改变一次颜色和其他一些东西。从现在开始，我想在该日期之前输入所需的变量并让 Wordpress 进行更改。我可以在循环中执行此操作，以便在该日期进入该站点的第一个人启动更改。但这意味着每次调用循环时都需要额外的代码。是否可以自动执行该任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:53:28.993

我已经很久没有使用过 WP，但我认为这会起作用，将 time_to_change_theme 更改为您想要的转发日期。我不知道把它放在哪里，但我相信你会解决的。

```
<?php

$time_to_change_theme    =   strtotime("2012-12-31 12:12:12"); // the time in the future you want to change the theme
$time_now = strtotime(now);

if($time_to_change_theme > $time_now)
{
   echo "Use current theme";
}else{
    echo "Change theme";
    update_option('current_theme', '[theme name]'); // this should update the current theme
}

?> 
```

使用[harmen的这篇](https://stackoverflow.com/users/176603/harmen)[文章](https://stackoverflow.com/a/2348092/1169669)中的代码

# search - 如何在 Xcode 中找到 Objective-C 函数的用法？

> ID：13176961
> 
> 赞同：20
> 
> 时间：2012-11-01T00:45:32.880
> 
> 标签：search, xcode, ios, objective-c

标题几乎概括了它，通常在 Eclipse 或 Intellij 之类的 IDE 中，您可以突出显示/右键单击方法并单击“查找用法”之类的选项，但我在 Xcode 中看不到等效选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T00:48:07.357

编辑：再次阅读您的问题后，我认为您正在寻找这些答案： [Find method references in Xcode](https://stackoverflow.com/questions/7145045/)

Francisco Garcia 的回答显示了高级搜索选项，您可以通过单击搜索选项卡中的小放大镜找到这些选项。

您可以检查符号引用；这将列出您对方法的所有调用。

------------ 旧答案 ------------

如果您按住选项并单击某些内容，您可以看到一些有用的提示和文档链接。

如果您单击已定义的内容，将您链接到您在其中声明它的文件会很有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T16:30:00.090

我认为您正在寻找快速帮助检查器。确保打开了实用程序面板（显示在屏幕右侧的工具栏）。将鼠标悬停在面板顶部的选项卡上，其中一个会显示“显示快速帮助检查器”。单击那个，然后突出显示您感兴趣的方法，面板将显示您正在查找的一些基本信息。

如果这不能告诉您您在寻找什么，您也可以在[Apple 文档](https://developer.apple.com/library/ios/navigation/)中搜索您的方法名称，但如果您是在 Mac 上开发的新手，有时可能很难理解。

我通常只是对方法名称进行谷歌搜索。这通常会产生一系列其他 SO 问题的链接，其中包含来自其他用户的大量日常解释，对于新用户来说更容易理解。

# ruby - 加载重页时硒超时::错误

> ID：13176963
> 
> 赞同：1
> 
> 时间：2012-11-01T12:21:21.783
> 
> 标签：ruby, selenium, selenium-webdriver

我在加载繁重的网页时遇到了 Timeout::Error 问题。我观察到，即使我添加了一个隐式等待调用`@driver.manage.timeouts.implicit_wait = 300`，也会在 300 秒之前引发超时错误 - 它会在大约 60-70 秒内引发。

抛出的错误是 -

```
Timeout::Error
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1293:in `request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:745:in `start'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:1284:in `request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:99:in `get'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/navigation.rb:14:in `to'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver.rb:108:in `get'
backlot.rb:17:in `test_backlot'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:565:in `block in _run_suites'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:563:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:563:in `_run_suites'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:21:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:20:23.850

尝试使用 gem fakeweb
FakeWeb 是在 Ruby 中伪造网络请求的助手。它在全球范围内工作，无需修改代码或编写大量存根。

在 GEMFILE 中写入
gem 'fakeweb', :require => false

require 'fakeweb'
在您的文件中使用上述语句
希望这会起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:30:38.333

我相信最初的问题不在于 Selenium，您的问题在这里得到了回答：

['救援 rbuf_fill': Timeout::Error (Timeout::Error)](https://stackoverflow.com/questions/10011387/rescue-in-rbuf-fill-timeouterror-timeouterror)

# asp.net - 模板引擎在 ASP.NET / Nancy 中表现最佳

> ID：13176966
> 
> 赞同：0
> 
> 时间：2012-11-01T12:21:27.180
> 
> 标签：asp.net, iis, template-engine, nancy

我正在为我的 ASP.NET 应用程序启动时间而战。使用 vanilla ASP.NET MVC 4 + Razor 大约需要 7 秒，现在我基于 Nancy + Razor 重写了它，加载时间增加了 3 秒。我想知道，我可以通过用其他东西替换 Razor 来走得更远吗？

有没有人有任何见解南希中存在的模板语言会让我赢得几秒钟？

*   [火花](http://sparkviewengine.com/)，
*   NDjango，基于[Django 语法](https://docs.djangoproject.com/en/dev/topics/templates/)，
*   DotLiquid，基于[Liquid 标记](http://liquidmarkup.org/)，
*   Nustache - 克隆[Mustache](http://mustache.github.com/)。

**编辑**：我关心启动时间，因为如果没有人访问它 30 秒左右（这取决于 IIS 配置），Azure Websites 和 App Harbor 等云服务会关闭您的应用程序。由于我没有一个非常受欢迎的应用程序，几乎每个用户都会等待大约 7 秒。

也可以使用另一种方法——预热我的 ASP.NET 应用程序。但是在 .NET 的“免费”云发布选项中这是不可能的，所以我必须寻找解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:46:43.160

好的，如果您担心的是应用程序启动时间，那么不调用 CSC 的东西将是最快的（例如 SSVE），但您也会失去很多功能。

您可以进行的其他加速是关闭自动注册（如果您使用默认引导程序）并更改引导程序/内部配置中使用类型扫描器返回一组特定类型的任何内容 - 您失去了灵活性，但您将获得启动速度.

另一种选择是使用站点监控服务（确保有免费的）来“ping”您的站点，然后停止它杀死它:)

# python - 如何使用 pip 要求文件来卸载和安装软件包？

> ID：13176968
> 
> 赞同：110
> 
> 时间：2012-11-01T12:21:28.070
> 
> 标签：python, pip

我有一个在开发过程中发生变化的 pip 需求文件。

可以**卸载**`pip`没有出现在需求文件中的包以及安装那些出现的包吗？有标准方法吗？

 **这将允许 pip 要求文件成为包的规范列表 - 一种“当且仅当”的方法。

**更新：我在**[https://github.com/pypa/pip/issues/716](https://github.com/pypa/pip/issues/716)建议将其作为新功能

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-29T17:55:35.343

这应该卸载不在 requirements.txt 中的任何内容：

```
pip freeze | grep -v -f requirements.txt - | grep -v '^#' | xargs pip uninstall -y 
```

尽管这不适用于使用 安装的软件包`-e`，即来自 git 存储库或类似的软件包。`-e`要跳过这些，只需过滤掉以标志开头的包：

```
pip freeze | grep -v -f requirements.txt - | grep -v '^#' | grep -v '^-e ' | xargs pip uninstall -y 
```

然后，显然：

```
pip install -r requirements.txt 
```

**2016 年更新：** 不过，您可能并不想真正使用上述方法。[检查`pip-tools`并`pip-sync`](http://nvie.com/posts/better-package-management/#virtue-2-have-your-envs-reflect-your-specs)以更强大的方式完成您可能希望做的事情。

[https://github.com/nvie/pip-tools](https://github.com/nvie/pip-tools)

**2016 年 5 月更新：**

您现在也可以使用`pip uninstall -r requirements.txt`，但这基本上是相反的——它卸载了`requirements.txt`

**2019 年 5 月更新：**

查看[pipenv](https://pipenv.kennethreitz.org/en/latest)或[Poetry](https://python-poetry.org/)。包管理领域发生了很多事情，使得这类问题有点过时了。不过，我实际上仍然很乐意使用 pip-tools。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-10-28T13:41:07.457

您现在可以将`-r requirements.txt`参数传递给`pip uninstall`.

```
pip uninstall -r requirements.txt -y 
```

至少从`pip`8.1.2 开始，`pip help uninstall`显示：

```
...
Uninstall Options:
  -r, --requirement <file>    Uninstall all the packages listed in the given requirements file.  This option can be
                              used multiple times.
... 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-11-01T13:20:48.403

这不是 的功能`pip`，不。如果你真的想要这样的东西，你可以编写一个脚本来比较`pip freeze`你的输出`requirements.txt`，但这可能比它的价值更麻烦。

使用[`virtualenv`](http://www.virtualenv.org/en/latest/)，只需创建一个干净的环境并从 （重新）安装就更容易和更可靠`requirements.txt`，例如：

```
deactivate
rm -rf venv/
virtualenv venv/
source venv/bin/activate
pip install -r requirements.txt 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-11-01T17:36:45.050

简短的回答是否定的，你不能用 pip 做到这一点。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-15T18:45:09.853

这是一个古老的问题（但一个很好的问题），自从提出这个问题以来，情况已经发生了很大的变化。

在另一个答案中有一个临时参考`pip-sync`，但值得拥有自己的答案，因为它恰好解决了 OP 的问题。

[pip-sync](https://github.com/jazzband/pip-tools#example-usage-for-pip-sync)将文件作为输入，并“调整”您当前的`requirements.txt`Python 环境，使其*完全*`requirements.txt`匹配. 这包括*删除*env 中存在但 `requirements.txt`.

示例：假设我们希望我们的环境（仅）包含 3 个库：`libA`、`libB`和`libC`，如下所示：

```
> cat requirements.txt
libA==1.0
libB==1.1
libC==1.2 
```

但是我们的环境当前包含`libC`and `libD`：

```
> pip freeze
libC==1.2
libD==1.3 
```

运行 pip-sync 将导致这个，这是我们想要的最终状态：

```
> pip-sync requirements.txt
> pip freeze
libA==1.0
libB==1.1
libC==1.2 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-24T13:23:20.640

Stephen 的提议是个好主意，但不幸的是，如果您在文件中只包含直接需求，它就行不通，这对我来说听起来更清晰。

所有依赖项都将被卸载，包括 even `distribute`，分解`pip`自身。

### 在版本跟踪虚拟环境的同时维护干净的需求文件

以下是我尝试对我的虚拟环境进行版本跟踪的方法。我尽量保持最低限度`requirements.txt`，仅包括直接要求，甚至不提及我不确定的版本限制。

但除此之外，我在文件中保留并包含在版本跟踪（比如 git）中，我的 virtualenv 的实际状态`venv.pip`。

这是一个示例工作流程：

* * *

设置 virtualenv 工作区，带有版本跟踪：

```
mkdir /tmp/pip_uninstalling
cd /tmp/pip_uninstalling
virtualenv venv
. venv/bin/activate 
```

初始化版本跟踪系统：

```
git init
echo venv > .gitignore
pip freeze > venv.pip
git add .gitignore venv.pip
git commit -m "Python project with venv" 
```

安装具有依赖项的软件包，将其包含在需求文件中：

```
echo flask > requirements.txt
pip install -r requirements.txt
pip freeze > venv.pip 
```

现在开始构建您的应用程序，然后提交并启动一个新分支：

```
vim myapp.py
git commit -am "Simple flask application"
git checkout -b "experiments" 
```

安装一个额外的包：

```
echo flask-script >> requirements.txt
pip install -r requirements.txt
pip freeze > venv.pip 
```

...玩一下，然后回到早期版本

```
vim manage.py
git commit -am "Playing with flask-script"
git checkout master 
```

现在卸载无关的包：

```
pip freeze | grep -v -f venv.pip | xargs pip uninstall -y 
```

我想这个过程可以用 git hooks 自动化，但我们不要跑题。

当然，使用一些包缓存系统或本地存储库（如[pip2pi）是有意义的](https://github.com/wolever/pip2pi)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-19T15:44:25.240

这是一个有效的简单解决方案：

`pip uninstall $(pip freeze) -y`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-13T12:22:30.997

捎带 @stephen-j-fuhry 这里是我使用的 powershell 等效项：

```
pip freeze | ? { $_ -notmatch ((gc req.txt) -join "|") } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-25T19:58:46.103

虽然这并不能直接回答问题，但`requirements.txt`现在更好的替代方法是使用[`Pipfile`](https://github.com/pypa/pipfile). 它的功能类似于 Ruby `Gemfile`。目前，您需要使用该[`pipenv`](https://pipenv.readthedocs.io/en/latest/)工具，但希望最终将其纳入`pip`. 这提供了`pipenv clean`执行您想要的命令。

（请注意，您可以使用 导入现有`requirements.txt`的`pipenv install -r requirements.txt`。在此之后，您应该有 a`Pipfile`并且`requirements.txt`可以删除。）

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2016-07-19T12:58:04.067

现在可以使用：

```
pip uninstall -r requirements.txt 
```**

# java - 使用 SecurityFilter 在 Tomcat 上进行 JAAS 身份验证

> ID：13176972
> 
> 赞同：2
> 
> 时间：2012-11-01T12:21:40.100
> 
> 标签：java, tomcat, jaas

拜托，我需要你的帮助。我有一个在 Tomcat 上运行的应用程序和一个 JAAS 模块。在 JAAS 之前，我使用了一个过滤器，以便从 httprequest 中获取一些参数。在这个过滤器中，我使用我的 jaas 登录名创建 LoginContext 并调用 login() 方法。一切顺利，提交返回 true，一切都很好。

我从会话中得到主题：

```
session.setAttribute("javax.security.auth.subject", subject); 
```

在这个主题中，我放置了创建的主体。问题是登录后，一切就像从未调用过此登录一样。然后用户没有通过身份验证，我变成了一个空白页。怎么了？

我猜 Tomcat 不接受我创建的登录上下文或类似的东西，但我能做些什么来解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:40:17.257

查看[http://www.coderanch.com/t/466744/Servlets/java/Set-user-principal-filter](http://www.coderanch.com/t/466744/Servlets/java/Set-user-principal-filter)。您可以在线程中看到：除非您通过容器提供的设施，否则通常不会填充请求的 getUserPrincipal() 和 isUserInRole()。

在您的情况下，您应该在链接中创建一个 RequestWrapper 并在 RequestWrapper 中设置用户。

# c# - 使用 autofac 注入 asp.net web api 模型

> ID：13176973
> 
> 赞同：0
> 
> 时间：2012-11-01T12:21:43.500
> 
> 标签：c#, asp.net, dependency-injection, asp.net-web-api, autofac

我想`IValidatableObject.Validate()`在处理请求之前根据存储库检查模型的某些方面。但是，下面的配置`_dalForValidation`永远不会设置在 on`Models.App`中，换句话说，总是调用默认的空构造函数。

```
private static void ConfigureAutofac()
{
    var builder = new ContainerBuilder();
    builder.RegisterApiControllers(Assembly.GetExecutingAssembly());
    builder.RegisterType<DataAccessFacade>().As<IDataAccess>().InstancePerApiRequest();
    builder.RegisterType<Models.App>();
    var container = builder.Build();
    var resolver = new AutofacWebApiDependencyResolver(container);
    GlobalConfiguration.Configuration.DependencyResolver = resolver;
} 
```

`App`有 2 个构造函数：

```
public App(IDataAccess dalForValidation)
{
    _dalForValidation = dalForValidation;
}

public App() {} 
```

为了完整起见，这是我尝试访问它的地方，得到一个空引用异常：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    var existingApps = _dalForValidation.FindApps().Convert<DB.App,App>();
    if (!ValidateProxyMappings(existingApps))
        yield return new ValidationResult("Invalid proxy mapping");
} 
```

也许依赖解析器没有用于模型，或者我在这里还缺少什么？

# sql - 将几行从一张桌子移动到另一张桌子，然后休息到另一张桌子

> ID：13176975
> 
> 赞同：1
> 
> 时间：2012-11-01T12:21:48.070
> 
> 标签：sql, tsql, sap-ase

我有一些临时表可以将文件中的一些数据 bcp 到 db。
现在，我想从这个表中将一些“有效”数据复制到另一个表，而将所有其他（一些无效、一些重复）数据复制到另一个“错误”表。
我是否可以在 Sybase-ASE 中使用一些查询/存储过程来做到这一点。
（如果我也可以在 oracle 中使用相同的东西，那就太好了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:54:46.023

Microsoft 有一个产品专门用于“SQL Server 集成服务”或 SSIS。该产品属于 ETL 类别：[http ://en.wikipedia.org/wiki/Extract,_transform,_load](http://en.wikipedia.org/wiki/Extract,_transform,_load)

您可以从这里开始了解更多信息：http: [//www.microsoft.com/sqlserver/en/us/solutions-technologies/enterprise-information-management/integration-services.aspx](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/enterprise-information-management/integration-services.aspx)

该产品附带任何 SQL Server 许可证。

# java - 如何将行标题添加到 JFace TableViewer？

> ID：13176976
> 
> 赞同：1
> 
> 时间：2012-11-01T12:21:49.440
> 
> 标签：java, swt, jface, tableviewer

如何将“行标题”添加到 Jface `TableViewer`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:34:21.763

查看[Nebula Project](http://www.eclipse.org/nebula/)[`Grid`](http://www.eclipse.org/nebula/widgets/grid/grid.php)中的小部件。

![在此处输入图像描述](../Images/b6dcd6cedc294326e134f9c0b69f8b0e.png)

它确实支持“行标题”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:25:08.147

默认情况下，TableViewer 不提供此功能。但是你可以看看这个[`snippet`](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet234.java)来实现类似于行标题的东西。此示例使用两个表使第一列固定，其余列可水平滚动。如果您不想要固定列，则可以只为列使用不同的颜色来实现行标题的外观。

# hadoop - Oozie 没有注册“mapred.input.dir.recursive”属性

> ID：13176978
> 
> 赞同：1
> 
> 时间：2012-11-01T12:21:50.550
> 
> 标签：hadoop, mapreduce, oozie

我遇到了 Oozie 的问题。它不会`mapred.input.dir.recursive`从 Oozie 工作流中注册属性。这给我带来了一个问题，因为我的 mapred.input.dir 包含文件以及包含更多文件的子目录。我已经广泛搜索了解决方案，但我没有成功找到一个。

有什么想法、建议、建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T12:17:23.873

mapred.input.dir.recursive 已弃用。相反，使用 mapreduce.input.fileinputformat.input.dir.recursive

# jquery - jquery change dynamic button color when its clicked and send it to a listbox

> ID：13176988
> 
> 赞同：-3
> 
> 时间：2012-11-01T12:22:19.167
> 
> 标签：jquery

I have problems to change background color of dynamic created buttons.I have lots of button on the page created dynamically.I want to have in the first click to the button to change background color to green on the second click i want to take this change back.Wıth below code i tried to do it with %2 ==0 but than i realized it second click could be on other button and even it is the second click i want to make it green.I think i have to loop through every button than apply below code but i couldnt do it(This was my first question).Second question is finally i would like to send just green buttons value (text value) to a listbox.Below is my code but i am not succeed it.Can you please help

```
<asp:ListBox ID="ListBox2" runat="server" Width="111px"></asp:ListBox>

        $(function () {
            var count = 0;
            $('input[type=button]').on('click', function (e) {
                e.preventDefault();
                count += 1;
                if (count % 2 === 0) {
                    $(this).css('background-color', '#6FA478');
                    var value = $(this).value;
                    $("[id$=ListBox2]").append($('<option/>').text(value).attr('value', value));
                }
                else {
                    $(this).css('background-color', '');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:50:50.257

You should try this, It will make a button green and store in list if click on first time, if second click then it will remove from list box and remove the green background color also, and it will work continue in on and off mode.

```
$(function () {
    $('input[type=button]').on('click', function (e) {
        e.preventDefault();
        var toggle = $(this).data('toggle');
        var value = $(this).val();
        if(toggle && toggle == "1") {
            $(this).css('background-color', '');
            $('[id$=ListBox2] option[value="'+value+'"]').remove()
            $(this).data('toggle', '0');
        }else{
            $(this).css('background-color', '#6FA478');      
            $("[id$=ListBox2]").append('<option value="'+value+'">'+value+'</option>');
            $(this).data('toggle', '1');
        }
    });
}); 
```

or you can try **[.toggle](http://api.jquery.com/toggle-event/)** also like

```
$(function () {
    $('input[type=button]').toggle(function (e) {
       e.preventDefault();
       var value = $(this).val();
       $(this).css('background-color', '#6FA478');      
       $("[id$=ListBox2]").append('<option value="'+value+'">'+value+'</option>');
    }, function(e){
       e.preventDefault();
       var value = $(this).val();
       $(this).css('background-color', '');
       $('[id$=ListBox2] option[value="'+value+'"]').remove()
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:28:57.943

```
$(':button').toggleClass(["red", "green"]) 
```

in your css file, ensure that red and green have values

# java - 删除地图视图中除选定区域以外的所有其他区域

> ID：13176990
> 
> 赞同：0
> 
> 时间：2012-11-01T12:22:30.220
> 
> 标签：java, android, eclipse, google-maps

假设我制作了一个图表，例如在`android mapView`. 现在我想要`remove/blackout/hide`除那部分之外的所有其他地图。我也可以放大那部分

这可能吗？

最好的祝福

![图片](../Images/c215d31dfdeff52432c8889b87199349.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:43:23.833

我有一个类似的问题，在某个区域内制作地图视图。不确定它是否会帮助你，但你可以试试。

您应该做的是拍摄圆形图像（**背景是透明**的）并将您的图像作为线性布局的背景。在该 LinearLayout 中，您可以放置​​地图视图。

您的**xml**将如下所示。

```
<LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/Circle_back" >

            <com.google.android.maps.MapView
                android:id="@+id/whereami_mapview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:apiKey="YOUR API KEY"
                android:clickable="true" />
        </LinearLayout>
</LinearLayout> 
```

我必须在矩形框中查看它。下面是您在运行时将获得的类似屏幕截图。你不需要隐藏地图的其余部分。

希望它会帮助一些你在寻找什么。 ![在此处输入图像描述](../Images/81d3333645ac64428e13ef40247129e5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:27:48.070

耍花招

Zoom 适用于您的情况。设置缩放级别和

`android:clickable="false"`在您的布局文件中使用。

;)

# android - 适用于 Android 的 ZeroMQ

> ID：13176995
> 
> 赞同：1
> 
> 时间：2012-11-01T12:22:56.297
> 
> 标签：android, zeromq

尝试在脚本下面为 Android 编译 ZeroMQ，$ANDROID_NDK_ROOT = /Users/user/android-ndk-r8b

```
OPTS=${1}
export DEVROOT="$ANDROID_NDK_ROOT"
export SDKROOT="$ANDROID_NDK_ROOT/standalone_toolchain"
export AS="$SDKROOT/bin/arm-linux-androideabi-as" 
export ASCPP="$SDKROOT/bin/arm-linux-androideabi-as" 
export AR="$SDKROOT/bin/arm-linux-androideabi-ar" 
export RANLIB="$SDKROOT/bin/arm-linux-androideabi-ranlib" 
export CC="$SDKROOT/bin/arm-linux-androideabi-gcc" 
export CXX="$SDKROOT/bin/arm-linux-androideabi-g++" 
export LD="$SDKROOT/bin/arm-linux-androideabi-ld" 
export STRIP="$SDKROOT/bin/arm-linux-androideabi-strip" 
export LIBRARY_PATH="$SDKROOT/lib"
export CPPFLAGS="" 
export CFLAGS=" Wno-psabi --sysroot=$SDKROOT/ -I$SDKROOT/sysroot/usr/include -march=armv7-a -lstdc++ -Wvariadic-macros -Wlong-long -mfpu=vfp -fpic -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -DANDROID -Wa,-noexecstack -Wshadow"
export CXXFLAGS="$CFLAGS" 
export LDFLAGS="--sysroot=$SDKROOT/ -lstdc++ -L$SDKROOT/sysroot/usr/lib/ "
cmd="./configure --enable-static --disable-shared --host=arm-linux-androideabi $
{OPTS}
--disable-version" 
eval $
{cmd}
echo "privet "
make
mkdir -p $
{INSTALL_PATH}
make install 
```

错误是：

```
Making all in src
make all-am
CXX libzmq_la-address.lo
In file included from address.cpp:21:0:
address.hpp:24:18: fatal error: string: No such file or directory
compilation terminated.
make[2]: *** [libzmq_la-address.lo] Error 1
make[1]: *** [all] Error 2
make: *** [all-recursive] Error 1
usage: mkdir [-pv] [-m mode] directory ...
Making install in src
CXX libzmq_la-address.lo
In file included from address.cpp:21:0:
address.hpp:24:18: fatal error: string: No such file or directory
compilation terminated.
make[1]: *** [libzmq_la-address.lo] Error 1
make: *** [install-recursive] Error 1 
```

配置工作正常，但后来我遇到了麻烦...... T_T

我做错了什么？

# spring - 如果移除了组件扫描，@Autowired 将不起作用

> ID：13176997
> 
> 赞同：8
> 
> 时间：2012-11-01T12:23:00.147
> 
> 标签：spring, autowired, explicit

我面临的问题是，如果我从配置中删除组件扫描标记，则注释 @Autowired 不再起作用（在所有使用此注释的 Java 类中）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

  <context:component-scan base-package="efco.auth" />

here are some beans... 
```

efco.auth 包中只有一个类，这个类与后面的类 EfcoBasketLogic 没有关系。

和一个使用@Autowired 的类：

```
package efco.logic;
    public class EfcoBasketLogic extends BasketLogicImpl {

        @Autowired
        private EfcoErpService erpService; 
```

这个 Bean 在另一个 spring 配置文件中定义：

```
<bean id="BasketLogic" class="efco.logic.EfcoBasketLogic">
    <property name="documentLogic" ref="DocumentLogic" />
    <property name="stateAccess" ref="StateAccess" />
    <property name="contextAccess" ref="ContextAccess" />
  </bean> 
```

如您所见，erpService 没有定义。其他三个属性在 BasketLogicImpl 上并具有设置器。

我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T13:07:57.550

正如 Tomasz 所说，你需要`<context:annotation-config/>`工作`@Autowired`。当您拥有 时`<context:component-scan/>`，它会为您隐含地包含在内`annotation-config`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:07:03.153

将其中一个`autowire="byType"`或添加`autowire="byName"`到您的 bean 声明中应该可以完成这项工作。