# StackOverflow 问答 14864000-14864999

# android - 如何在 Android Parcelable 中使用类字段数组

> ID：14864004
> 
> 赞同：0
> 
> 时间：2013-02-13T22:01:06.513
> 
> 标签：android, exception, nullpointerexception, parcelable

我基于[片段](http://www.smipple.net/snippet/takecare/Android%3a%20Parcelable%20Class)创建了自己的 Parcelable 类，以通过 Intent 发送自定义数据。使用它，Android（最低 API 10）给了我一个例外，下面的那段代码有什么问题？我把它分解到最低限度。这里是：

```
public class MyParcelable implements Parcelable {
private float[] data = null;

public MyParcelable(float[] data) {
    this.data = data;
}

public MyParcelable(Parcel in) {
    /* After this line the exception is thrown */
    in.readFloatArray(data);
}

public static final Creator<MyParcelable> CREATOR = new Creator<MyParcelable>() {
    public MyParcelable createFromParcel(Parcel in) {
        return new MyParcelable(in);
    }

    public MyParcelable[] newArray(int size) {
        return new MyParcelable[size];
    }
};

public int describeContents() {
    return this.hashCode();
}

public void writeToParcel(Parcel out, int flags) {
    out.writeFloatArray(data);
}

public float[] getData() {
    return data;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:01:06.513

在寻找解决方案很长一段时间后，我偶然发现了LionKing 给出了工作提示的这篇[文章。](https://stackoverflow.com/questions/12121543/reading-and-writing-integer-array-to-parcel)

Parcelable 类现在看起来像这样：

```
public class MyParcelable implements Parcelable {
private float[] data = null;

public MyParcelable(float[] data) {
    this.data = data;
}

public MyParcelable(Parcel in) {
    /* The exception is gone */
    data = in.createFloatArray();
}

public static final Creator<MyParcelable> CREATOR = new Creator<MyParcelable>() {
    public MyParcelable createFromParcel(Parcel in) {
        return new MyParcelable(in);
    }

    public MyParcelable[] newArray(int size) {
        return new MyParcelable[size];
    }
};

public int describeContents() {
    return this.hashCode();
}

public void writeToParcel(Parcel out, int flags) {
    out.writeFloatArray(data);
}

public float[] getData() {
    return data;
}
} 
```

此解决方案也适用于其他基本类型数组。

# mongodb - MongoDB indexOnly false

> ID：14864011
> 
> 赞同：2
> 
> 时间：2013-02-13T22:01:16.260
> 
> 标签：mongodb, mongodb-query

我为类别字段创建了一个索引，然后使用 {_id: 0, category: 1} 之类的字段选择执行 {category: 'Example'} 查找。对此查询运行解释显示 indexOnly 为假。它真的很慢。我在这里想念什么？

**编辑** 解释：

```
{
        "cursor" : "BtreeCursor title",
        "isMultiKey" : false,
        "n" : 2642,
        "nscannedObjects" : 2642,
        "nscanned" : 2642,
        "nscannedObjectsAllPlans" : 2642,
        "nscannedAllPlans" : 2642,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 3,
        "indexBounds" : {
                "category" : [
                        [
                                "TV",
                                "TV"
                        ]
                ],
                "title" : [
                        [
                                {
                                        "$minElement" : 1
                                },
                                {
                                        "$maxElement" : 1
                                }
                        ]
                ]
        },
        "server" : "DeathDesk:27017"
} 
```

**编辑 2** getIndexes()

```
[
        {
                "v" : 1,
                "key" : {
                        "_id" : 1
                },
                "ns" : "test.media",
                "name" : "_id_"
        },
        {
                "v" : 1,
                "key" : {
                        "category" : 1
                },
                "ns" : "test.media",
                "name" : "category",
                "dropDups" : false,
                "background" : false
        }
] 
```

# c# - 更多地方的 C# 单实例

> ID：14864013
> 
> 赞同：-5
> 
> 时间：2013-02-13T22:01:23.347
> 
> 标签：c#, arrays, oop

这段代码的行为是什么？将是 s == “更改的实例”还是 s == “初始实例”？

```
SomeClass instance = new SomeClass();
instance.setName("initial instance")

List<SomeClass> list1 = new List<SomeClass>();
List<SomeClass> list2 = new List<SomeClass>();

list1.add(instance);
list2.add(instance);

list2.get(0).setName("changed instance");
string s = list1.get(0).getName(); 
```

编辑：好的，我对代码做了一些更改。我写得很快。EDIT2：为什么我问这个并且不尝试？因为由于某些限制，我在这台计算机上没有 IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:05:21.233

对象通过引用传递。您有两个引用同一对象的列表。因此，更改一个列表中的对象会影响另一个列表中的对象。如果您要传递原语而不是对象，它将按值传递。当按值传递时，它本质上是一个副本。因此，更改一个列表中的值不会更改另一个列表中的值。

如果您希望一个类具有“类似值”的行为，您可以在该类中创建一个返回自身副本的方法。也就是说，包含成员和属性等的新对象设置为与原始对象相同的值。

例子：

```
public SomeClass Clone()
{
    SomeClass newSomeClass = new SomeClass();
    newSomeClass.setName(this.getName());
    return newSomeClass;
} 
```

那么代码就变成了：

```
SomeClass instance = new SomeClass();
instance.setName("initial instance")

List<SomeClass> list1 = new List<SomeClass>();
List<SomeClass> list2 = new List<SomeClass>();

list1.add(instance);
list2.add(instance.Clone());

list2.get(0).setName("changed instance");
string s = list.get(0).getName(); 
```

结果将是 list1 和 list2 包含两个不同的 SomeClass 实例，具有不同的名称。

有关值与引用类型的更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/4d43ts61%28v=vs.90%29.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T22:04:12.697

当您将一个对象添加到两个列表中并更改一个列表中的对象时，另一个列表仍将引用同一对象，因此具有更新的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T22:03:23.493

“更改的实例”，因为您只创建了一个实例，因此它们共享该实现。

# oracle-sqldeveloper - 如何更改 Oracle SQL Developer / Oracle Data Modeler 的时区？

> ID：14864015
> 
> 赞同：23
> 
> 时间：2013-02-13T22:01:25.787
> 
> 标签：oracle-sqldeveloper

每次我运行 Oracle SQL Developer 或 Oracle Data Modeler 时，我都会收到以下错误消息：

> ora-01882 "未找到时区"

挖掘这个问题，我发现 Oracle SQL Developer 和 Oracle Data Modeler 都说我的时区是`Europe/Berlin`，它没有列在 Oracle 的系统视图`V$TIMEZONE_NAMES`中。

因此，我需要更改 Oracle SQL Developer（而不是数据库）中的时区以匹配`V$TIMEZONE_NAMES`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-13T22:01:25.787

如果您需要[更改 Oracle SQL Developer](http://mariuzzo.com/tips/changing-the-time-zone-of-oracle-sql-developer.html)（或 Oracle Data Modeler）的时区，那么可以这样做：

1.  进入Oracle SQL Developer的安装目录。
2.  打开位于： 的文件`sqldeveloper/bin/sqldeveloper.conf`。
3.  在文件末尾，添加以下行：`AddVMOption -Duser.timezone=GMT-4`.

您将需要将该值更改为`GMT-4`与 中的时区之一匹配的值`V$TIMEZONE_NAMES`。

就是这样！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-02T08:28:13.103

这对我有用

```
AddVMOption -Duser.timezone=GMT+5 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-08T10:59:28.680

尝试：

*   Oracle Sql 开发者 4.1.3
*   打开配置文件。
*   sqldeveloper/sqldeveloper/bin/sqldeveloper.conf
*   添加文件末尾。
*   AddVMOption -Duser.timezone=GMT
*   重新启动您的 Oracle Sql Developer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T14:54:36.887

对我来说，这很有效：

1)

在 Windows 8 中时，确保您对 sqldeveloper 文件夹具有授权/权限（对我来说，这是 C:\Program Files\sqldeveloper，鼠标右键单击此处并选择“属性...”，然后选择“安全”选项卡并在该选项卡上按“编辑”按钮并赋予自己所有权利。[我必须用英文猜测这些名称，因为我的 Windows 不是英文的）]

2）然后按照上面Rubens Mariuzzo的步骤，除了最后一个

3) 添加VMOption -Duser.timezone=GMT+1

SELECT * FROM v$timezone_names 给了我 Europe/Amsterdam 和 Europe/Berlin 作为选项（两者都是 GMT+1，但我的位置是 Europe/Amsterdam）。但是，使用这两个名称中的任何一个仍然会给出 ora-01882“未找到时区”，只有在更改为“timezone=GMT+1”之后，该错误才消失

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-03T01:55:24.980

这对我有用

```
AddVMOption -Duser.timezone=GMT+7 
```

时间

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-05-10T04:59:22.027

斯里兰卡 AddVMOption -Duser.timezone=GMT+5.30

# r - 合并两个data.frame，保留所有匹配的行，在R

> ID：14864016
> 
> 赞同：2
> 
> 时间：2013-02-13T22:01:26.350
> 
> 标签：r

我正在努力合并两个 data.frame，其中 na 值出现在一个或另一个 df 中。

```
sampleA <- structure(list(Nom_xp = "A1MRJ", Rep = 1L, GB05 = 102L, GB05.1 = 102L, 
    GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 169L, 
    GB27.1 = 169L, GB24 = 240L, GB24.1 = 242L, GB28 = NA_integer_, 
    GB28.1 = NA_integer_, GB15 = 142L, GB15.1 = 144L, GB02 = 197L, 
    GB02.1 = 197L, GB10 = 126L, GB10.1 = 134L, GB14 = 181L, GB14.1 = 193L), .Names = c("Nom_xp", 
"Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1", 
"GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15", 
"GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"
), row.names = 32L, class = "data.frame")

sampleB <- structure(list(Nom_xp = "A1MRJ", Rep = 2L, GB05 = NA, GB05.1 = NA, 
    GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 169L, 
    GB27.1 = 169L, GB24 = 240L, GB24.1 = 242L, GB28 = 390L, GB28.1 = 390L, 
    GB15 = 142L, GB15.1 = 144L, GB02 = 197L, GB02.1 = 197L, GB10 = 126L, 
    GB10.1 = 134L, GB14 = 181L, GB14.1 = 193L), .Names = c("Nom_xp", 
"Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1", 
"GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15", 
"GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"
), row.names = 33L, class = "data.frame") 
```

需要输出，作为 data.frame。只有一行用于匹配“Nom_xp”，因此如果值存在于一个或另一个 DF 中，则 NA get 将替换为 A 或 B 中的值。

```
Nom_xp  GB05  GB05  GB18  GB18  GB06  GB06  GB27  GB27  GB24  GB24  GB28    GB28    GB15  GB15  GB02  GB02  GB10  GB10  GB14  GB14
A1MRJ   102 102 177 177 240 240 169 169 240 242 390 390 142 144 197 197 126 134 181 193 
```

我本来以为：

```
output <- merge(A,B,by="Nom_xp",all.x=T,all.y=T) 
```

或者

```
output <- join(A,B,by="Nom_xp",match="all") 
```

会给我我需要的东西，但到目前为止还没有运气......我错过了什么？实际的 data.frame 不止一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:05:06.920

你只有一排吗？那么，这还不够吗？你可以得到结果`sampleB`：

```
sampleB[, is.na(sampleB)] <- sampleA[, is.na(sampleB)] 
```

不，我认为这里不需要应用、加入和合并。未经测试，但这会起作用。

```
sampleB[is.na(sampleB)] <- sampleA[is.na(sampleB)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:18:11.383

不确定您的整个数据集的外观如何，但我假设您可以有多个具有相同“Nom_xp”的样本，而不仅仅是 2 个？并且您可能将所有数据都保存在一个大数据框中或类似的地方？

如果是这样，也许这段代码可能是一个好的开始（也许有人可以帮助并重新编写更有效的代码？）。无论如何：

```
sampleA <- structure(list(Nom_xp = "A1MRJ", Rep = 1L, GB05 = 102L, GB05.1 = 102L, 
                          GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 169L, 
                          GB27.1 = 169L, GB24 = 240L, GB24.1 = 242L, GB28 = NA_integer_, 
                          GB28.1 = NA_integer_, GB15 = 142L, GB15.1 = 144L, GB02 = 197L, 
                          GB02.1 = 197L, GB10 = 126L, GB10.1 = 134L, GB14 = 181L, GB14.1 = 193L), .Names = c("Nom_xp", "Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1","GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15","GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"), row.names = 32L, class = "data.frame")

sampleB <- structure(list(Nom_xp = "A1MRJ", Rep = 2L, GB05 = NA, GB05.1 = NA, 
                          GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 169L, 
                          GB27.1 = 169L, GB24 = 240L, GB24.1 = 242L, GB28 = 390L, GB28.1 = 390L, 
                          GB15 = 142L, GB15.1 = 144L, GB02 = 197L, GB02.1 = 197L, GB10 = 126L, 
                          GB10.1 = 134L, GB14 = 181L, GB14.1 = 193L), .Names = c("Nom_xp","Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1", "GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15", "GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"  ), row.names = 33L, class = "data.frame")

sampleC <- structure(list(Nom_xp = "ASDF", Rep = 2L, GB05 = NA, GB05.1 = NA, 
                          GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 12349L, 
                          GB27.1 = 3, GB24 = 234112, GB24.1 = 242L, GB28 = 234, GB28.1 = 390L, 
                          GB15 = NA, GB15.1 = 144L, GB02 = 197L, GB02.1 = 197L, GB10 = 126L, 
                          GB10.1 = 134L, GB14 = NA, GB14.1 = 193L), .Names = c("Nom_xp", "Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1", "GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15", "GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"), row.names = 34L, class = "data.frame")

sampleD <- structure(list(Nom_xp = "ASDF", Rep = 2L, GB05 = 214, GB05.1 = 34, 
                          GB18 = 177L, GB18.1 = 177L, GB06 = 240L, GB06.1 = 240L, GB27 = 169L, 
                          GB27.1 = 3, GB24 = NA, GB24.1 = 242L, GB28 = 234, GB28.1 = 390L, 
                          GB15 = 56, GB15.1 = 144L, GB02 = 197L, GB02.1 = 197L, GB10 = 15466L, 
                          GB10.1 = 134L, GB14 = 34, GB14.1 = 193L), .Names = c("Nom_xp", "Rep", "GB05", "GB05.1", "GB18", "GB18.1", "GB06", "GB06.1", "GB27", "GB27.1", "GB24", "GB24.1", "GB28", "GB28.1", "GB15", "GB15.1", "GB02", "GB02.1", "GB10", "GB10.1", "GB14", "GB14.1"), row.names = 35L, class = "data.frame")

cdat<-rbind(sampleA,sampleB,sampleC,sampleD) #simulating your data set (?)
dcols<-dim(cdat)[2]

mat<-matrix(nrow=length(unique(cdat$Nom_xp)),ncol=dcols)
colnames(mat)<-colnames(cdat)
for (j in 1:length(unique(cdat$Nom_xp))) 
{
  g<-grep(unique(cdat$Nom_xp)[j],cdat$Nom_xp)   #Get the Nom_xp rows that match
  mat[j,1]<-cdat[g[1],1]                        #Fill in the "Nom_xp"
  mat[j,2]<-paste(g,collapse=" ")               #Fill in the "rep"
  mat[j,3:dcols]<-apply(cdat[g,3:dcols],2,      #Calculate a mean for each column
   function(x){as.numeric(mean(x,na.rm=T))})          
} 
```

# xml - 将 Xml 文件加载到 XDocument 以供稍后在 Button 中使用

> ID：14864017
> 
> 赞同：1
> 
> 时间：2013-02-13T22:01:28.177
> 
> 标签：xml, vb.net, visual-studio-2010, xml-parsing

我目前一直在使用以下代码将大型 Xml 文件加载到 XTable 中：

```
Private Sub Button5_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
  TextBox4.Visible = False
  Dim asm = Assembly.GetExecutingAssembly()
  Dim var = asm.GetManifestResourceStream("WindowsApplication2.british-english-dictionary.xml")

  Dim rand = New Random()
  Dim myXml = XDocument.Load(var)
  var.Close()

  Dim lexemeList = myXml.Descendants("lexeme").ToList()
  Dim randomLexeme = lexemeList(rand.Next(0, lexemeList.Count - 1))

  TextBox2.Text = randomLexeme.Descendants("grapheme").Value
End Sub 
```

但是，由于 xml 很长（400,000 个条目），因此按下按钮会有些延迟。为了尝试将其最小化，我想`Dim myXml = XDocument.Load(var)`在按下按钮的外部进行操作，以便仅在打开程序时才将 Xml 文件加载到 XDocument 中，而不是每次按下按钮时。

我试过这样做：

```
Imports System.IO
Imports System
Imports System.Reflection
Imports System.Xml
Imports System.Security.Permissions

Public Class Form1    
  Public asm = Assembly.GetExecutingAssembly()
  Public var = asm.GetManifestResourceStream("WindowsApplication2.british-english-dictionary.xml")

  Public rand = New Random()
  Public myXml = XDocument.Load(var)

  Private Sub Button5_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
    TextBox4.Visible = False

    Dim lexemeList = myXml.Descendants("lexeme").ToList()
    Dim randomLexeme = lexemeList(rand.Next(0, lexemeList.Count - 1))

    TextBox2.Text = randomLexeme.Descendants("grapheme").Value
  End Sub
End Class 
```

但是当按钮点击事件发生时我收到一个错误：

> 未找到类型“d__a”的公共成员“ToList”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:43:19.470

您不应该在变量初始化器中做任何繁重的工作。相反，使用`Sub New`or `Form_Load`。始终明确指定类型并给变量一个有意义的名称。避免不必要的变量暴露，例如`asm`可以在`Sub New`. 例如：

```
Public var As Stream
Public rand As Random
Public myXml As XDocument

Sub New()
  ' This call is required by the designer.
  InitializeComponent()

  ' Add any initialization after the InitializeComponent() call.
  Dim asm As Assembly = Assembly.GetExecutingAssembly()
  var = asm.GetManifestResourceStream("WindowsApplication2.british-english-dictionary.xml")
  rand = New Random()
  myXml = XDocument.Load(var)
End Sub 
```

从那开始，看看错误是否仍然存在。

附带说明一下，如果将资源文件 (*.resx) 添加到项目中，然后将 XML 资源添加到其中，则可以使代码更简单。然后它变得像调用一样简单：

```
myXml = XDocument.Load(My.Resources.ResxName.british-english-dictionary.xml) 
```

注意资源名称在编译时检查，VS 为你做管道。

# python - 我的 dicts 是否适用于这个 Dijkstra 算法？

> ID：14864020
> 
> 赞同：2
> 
> 时间：2013-02-13T22:01:38.693
> 
> 标签：python, algorithm, graph, dijkstra

我对 Python 很陌生，我开始尝试在这里实现 Dijkstra 的算法：http: [//thomas.pelletier.im/2010/02/dijkstras-algorithm-python-implementation/](http://thomas.pelletier.im/2010/02/dijkstras-algorithm-python-implementation/)。问题是我的矩阵看起来像这样：

```
 {
      2845: {27026: {'weight': 0.05950338}, 83860: {'weight': 0.013386887}},
     12422: {27023: {'weight': 0.0787193}, 27026: {'weight': 0.041424256}, 59721: {'weight': 0.11553069}},
     27022: {27025: {'weight': 0.1283993}, 83860: {'weight': 0.11746721}},
     27023: {12422: {'weight': 0.0787193}, 27025: {'weight': 0.22683257}},
     27025: {27022: {'weight': 0.1283993}, 27023: {'weight': 0.22683257}, 27026: {'weight': 0.20290035}},
     27026: {2845: {'weight': 0.05950338}, 12422: {'weight': 0.041424256}, 27025: {'weight': 0.20290035}},
     59721: {12422: {'weight': 0.11553069}},
     83860: {2845: {'weight': 0.013386887}, 27022: {'weight': 0.11746721}}
} 
```

这是否仍然适用于上述算法，或者我是否需要进行轻微调整，如果可以，怎么办？

谢谢

编辑：

这是我实现的算法：

```
def dijkstra(self, graph, start, end):
        D = {} # Final distances dict
        P = {} # Predecessor dict

        for node in graph.keys():
            D[node] = -1 # Vertices are unreachable
            P[node] = ""
        D[start] = 0 # The start vertex needs no move
        unseen_nodes = graph.keys() # All nodes are unseen

        while len(unseen_nodes) > 0:
            shortest = None
            node = ''
            for temp_node in unseen_nodes:
                if shortest == None:
                    shortest = D[temp_node]
                    node = temp_node
                elif (D[temp_node] < shortest):
                    shortest = D[temp_node]
                    node = temp_node
            unseen_nodes.remove(node)
            for child_node, child_value in graph[node].items():
                if D[child_node] < D[node] + child_value:
                    D[child_node] = D[node] + child_value
                    P[child_node] = node
        path = []
        node = end
        while not (node == start):
            if path.count(node) == 0:
                path.insert(0, node) # Insert the predecessor of the current node
                node = P[node] # The current node becomes its predecessor
            else:
                break
        path.insert(0, start) # Finally, insert the start vertex
        return path 
```

我使用的矩阵如上，算法想要的矩阵是：

```
... graph = {
...     'A': {'B': 10, 'D': 4, 'F': 10},
...     'B': {'E': 5, 'J': 10, 'I': 17},
...     'C': {'A': 4, 'D': 10, 'E': 16},
...     'D': {'F': 12, 'G': 21},
...     'E': {'G': 4},
...     'F': {'H': 3},
...     'G': {'J': 3},
...     'H': {'G': 3, 'J': 5},
...     'I': {},
...     'J': {'I': 8},
... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:04:44.040

我认为这应该可行，但这取决于您的代码。如果您想要更完整的答案，请发布其余代码。

此外，使用 dicts 可能比仅仅制作一个 2D 数组更令人头疼。如果您真的想使用 dicts，我建议您使用[默认 dict](http://docs.python.org/2/library/collections.html#collections.defaultdict)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:44:49.597

在给定的源代码示例中，权重只是一个整数，而不是字典。由于您的图表有一个带有“权重”键的字典，因此您必须据此更改代码。

这是您的代码的正确版本：

```
def dijkstra(self, graph, start, end):
        D = {} # Final distances dict
        P = {} # Predecessor dict

        for node in graph.keys():
            D[node] = -1 # Vertices are unreachable
            P[node] = ""
        D[start] = 0 # The start vertex needs no move
        unseen_nodes = graph.keys() # All nodes are unseen

        while len(unseen_nodes) > 0:
            shortest = None
            node = ''
            for temp_node in unseen_nodes:
                if shortest == None:
                    shortest = D[temp_node]
                    node = temp_node
                elif (D[temp_node] < shortest):
                    shortest = D[temp_node]
                    node = temp_node
            unseen_nodes.remove(node)
            for child_node, child_value in graph[node].items():
                if D[child_node] < D[node] + child_value['weight']:  # I changed the code here
                    D[child_node] = D[node] + child_value['weight']   # I changed the code here
                    P[child_node] = node
        path = []
        node = end
        while not (node == start):
            if path.count(node) == 0:
                path.insert(0, node) # Insert the predecessor of the current node
                node = P[node] # The current node becomes its predecessor
            else:
                break
        path.insert(0, start) # Finally, insert the start vertex
        return path 
```

# c# - 序列化具有相同类型名称的多态列表

> ID：14864025
> 
> 赞同：9
> 
> 时间：2013-02-13T22:01:49.170
> 
> 标签：c#, .net, polymorphism, xmlserializer

我有一个我正在尝试序列化为 XML 的对象。这个对象内部是一个泛型类型（抽象类）的列表。此列表中的每个项目都可以是不同的类，但都继承自抽象基类：

```
public abstract class animal
{
  public string type { get; set; }
}
public class cat:animal
{
  public string size { get; set; }
  public string furColor { get; set; }
}
public class fish:animal
{
  public string size { get; set; }
  public string scaleColor { get; set; }
} 
```

当我序列化列表时，我希望它看起来像这样：

```
<animal type="cat">
  <size>medium</size>
  <furColor>black</furColor>
</animal>
<animal type="fish">
  <size>small</size>
  <scaleColor>silver</scaleColor>
</animal> 
```

我尝试了简单的解决方案：

```
[XmlElement("Animal")]
public List<animal> Animals { get; set; } 
```

但它会引发错误，因为它不期望对象类型“cat”。将 [XmlInclude] 标记添加到基类、派生类或整个包含类（我们称之为 zoo）对此没有帮助。

我可以将 typeof 指定用于单个类：

```
[XmlElement("Animal", typeof(cat))]
public List<animal> Animals { get; set; } 
```

只要我只使用猫，它就可以正常工作，就像我想要的那样。同样，当我在混合物中添加一条鱼时，它会因同样的错误而爆炸（不期望有鱼）。

我可以添加多个 typeof 属性：

```
[XmlElement("Animal")]
[XmlElementAttribute(typeof(cat))]
[XmlElementAttribute(typeof(fish))]
public List<animal> Animals { get; set; } 
```

这会编译，但会忽略元素名称，并将对象分别序列化为`<cat> </cat>`和`<fish> </fish>`，这是不可接受的。

我什至尝试添加多个 [XmlElement] 标签：

```
[XmlElement("Animal", typeof(cat))]
[XmlElement("Animal", typeof(fish))]
public List<animal> Animals { get; set; } 
```

这个抛出了一个不同的异常，这一次对象“cat”和“fish”都在同一范围内使用“Animal”类型。

谁能想到解决这个问题的方法？

*更新*经过一番挖掘，我发现[这篇 SO 帖子](https://stackoverflow.com/questions/4616505/is-there-a-reason-why-a-base-class-decorated-with-xmlinclude-would-still-throw-a)建议将命名空间添加到基类中：

```
[XmlRoot(Namespace="myNamespace")]
[XmlInclude(typeof(cat))]
[XmlInclude(typeof(fish))]
public abstract class animal 
```

序列化它会产生以下结果：

```
<animal xsi:type="cat" type="cat">
  ...
</animal>
<animal xsi:type="fish" type="fish">
  ...
</animal> 
```

其中**xsi:type="cat"**是指类的名称，而**type="cat"**是指在基类中创建的类型属性（参见最上面的示例）。这与我需要的*非常接近*，我担心我可能只是在这里缺乏经验，但是有没有办法摆脱 xsi:type 属性列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T23:19:14.060

将 XmlInclude 属性添加到您的基类应该可以解决这个序列化问题

```
 [Serializable]
    [XmlInclude(typeof(cat))]
    [XmlInclude(typeof(fish))]
    class animals
    {
         ....
    }

    public class cat:animals
    {
      public string size { get; set; }
      public string furColor { get; set; }
    }

    public class fish:animals
    {
      public string size { get; set; }
      public string scaleColor { get; set; }
    } 
```

更新

这是一个适用于我的简短示例，我认为您实际上不需要 type 属性，因为您可以使用 typeof() 方法检索它。除非 type 属性有其他用途。

```
 List<animal> animals = new List<animal>();
        cat catofdoom = new cat();
        catofdoom.furColor = "brown";
        catofdoom.size = "10 pounds";
        animals.Add(catofdoom);

        fish fishofdoom = new fish();
        fishofdoom.scaleColor = "blue";
        fishofdoom.size = "12 inches";
        animals.Add(fishofdoom);

        try
        {
            XmlSerializer xs = new XmlSerializer(typeof(List<animal>));
            using (StreamWriter wr = new StreamWriter("animal.xml"))
            {
                xs.Serialize(wr, animals);
            }
        }
        catch (Exception e)
        {

            throw;
        } 
```

结果是这样（非常基本的序列化，没有选项）：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfAnimal xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <animal xsi:type="cat">
    <size>10 pounds</size>
    <furColor>brown</furColor>
  </animal>
  <animal xsi:type="fish">
    <size>12 inches</size>
    <scaleColor>blue</scaleColor>
  </animal>
</ArrayOfAnimal> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T14:10:30.263

你两个都需要！

```
[Serializable]
[XmlInclude(typeof(cat))]
[XmlInclude(typeof(fish))]
class animals
{
     ....
}

public class cat:animals
{
  public string size { get; set; }
  public string furColor { get; set; }
}

public class fish:animals
{
  public string size { get; set; }
  public string scaleColor { get; set; }
} 
```

请注意`XmlElement`名称的细微变化。现在这将正常工作。

```
[XmlElement("cat", typeof(cat))]
[XmlElement("fish", typeof(fish))]
public List<animal> Animals { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:23:39.947

我建议使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/aa344259.aspx)并将已知类型包含到序列化程序中。[使用 XmlInclude 是对封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)原则的一种突破。有关一些示例，请参阅提供的 MSDN 链接...

# webrtc - 有没有办法使用 JSON 对象创建自己的 mediaStreamTrack？

> ID：14864027
> 
> 赞同：10
> 
> 时间：2013-02-13T22:01:58.143
> 
> 标签：webrtc

webRTC 上的 mediaStream 接口允许多个 MediaStreamTrack，这些不一定是来自您的相机/麦克风的音频和/或视频流。

如何使用 JSON 对象创建 MediaStreamTrack？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:13:01.863

在最近的一次会议[中，这个主题](http://lists.w3.org/Archives/Public/public-media-capture/2013Feb/0016.html)已经摆在桌面上，而且将来可能会出现。这可用于允许应用程序使用多个相同类型的设备。

我们将能够创建流轨道的对象，但媒体流始终由浏览器提供。它要么是本地媒体流，您从 getUserMedia() 方法获取，要么是远程媒体流，您从对等连接接收。

MediaStreamTrack 是由浏览器 API 创建的对象，其中的媒体（本地或远程）始终由浏览器提供，使用麦克风/相机或来自 PeerConnection 的媒体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-01-14T16:18:09.297

RTCDataChannel 正是您所需要的。请参阅：[https ://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel](https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel)

从上面的页面：“RTCDataChannel 接口代表一个网络通道，可用于任意数据的双向对等传输。”

# algorithm - 交替相等项目的排序算法

> ID：14864029
> 
> 赞同：1
> 
> 时间：2013-02-13T22:02:13.647
> 
> 标签：algorithm, sorting

对于这种排序情况，什么是好的（简单）算法/方法：

我有一个项目数组，其中每个项目由 2 个字段组成：（ID，时间戳）

有许多对具有相同 ID 的项目。

我想对数组进行排序，以使项目在 ID 之间尽可能地交替，从具有最早时间戳的项目开始。

例如，使用此输入：

(1, 15:00)
(1, 15:05)
(1, 15:10)
(2, 15:15)
(2, 15:20)
(2, 15:25)
(3, 15:30)
( 4, 15:35)
(3, 15:40)

我会得到这个输出：

(1, 15:00)
(2, 15:15)
(3, 15:30)
(4, 15:35)
(1, 15:05)
(2, 15:20)
(3, 15:40)
( 1, 15:10)
(2, 15:25)

我主要是在寻找一种概念上简单的算法，但如果它是高性能的当然很好。

现在我能想到的最好的是：

1.  初始化/创建临时数组 T
2.  从数组 A：获取具有最早时间戳的项目 X，其中 ID 不在 T 中
3.  将 X 添加到结果集 R，将 X.ID 添加到 T，从 A 中弹出 X
4.  只要 X 存在，重复步骤 2-3，否则从步骤 1 重新开始
5.  A为空时退出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:19:45.877

1.  将所有项目放在一个排序的多图中，首先按 ID 排序，然后按时间排序。（例如，您可以使用您最喜欢的以 ID 为键的排序关联容器来实现这一点，其中排序容器中的每个值本身就是另一个包含所有时间值的排序容器。
2.  虽然这个多重映射中仍然有任何元素：对于每个按升序排列的键，删除具有该键的第一个元素并将其添加到结果中。

完成后，如果我正确理解了问题，结果将按照您想要的顺序。

这是使用 Guava 的 Java 示例`TreeMultimap`（未经测试）：

```
TreeMultimap<Id, Timestamp> map = new TreeMultimap<Id, Timestamp>();
for (/* ... every item ... */) {
  map.put(item.getId(), item.getTimestamp());
}

List<Entry> outputList = new ArrayList<Entry>();
while (!map.isEmpty()) {
  for (Id key : map.keySet()) {
    Timestamp value = map.get(key).first();
    outputList.add(new Entry(key, value));
    map.remove(key, value);
  }
}
return outputList; 
```

# c# - kinect工具箱录制和回放的使用

> ID：14864035
> 
> 赞同：1
> 
> 时间：2013-02-13T22:02:40.077
> 
> 标签：c#, wpf, kinect, record, replay

我是 StackOverflow 和 Kinect SDK 的新手。我目前正在从事我最后一年的项目，该项目涉及来自 Kinect 的 Record/Replay Colour/Depth 和骨架数据。找到了一个启用此功能的[Kinect 工具箱](http://kinecttoolbox.codeplex.com/releases/view/91988)，我正在将该工具箱与 SDK 示例项目（颜色/深度/骨架基础 C# WPF）集成，以制作一个可以显示之前记录的 .replay 文件中的所有流的程序。

我现在遇到的问题是由于工具箱中的 KinectReplay 类和 SDK 中的 KinectSensor 类的差异。在 Depth Basics 示例代码中，为了显示流，WindowLoaded() 中的以下行为从 Kinect 检索的数据分配空间：

/

```
/ Allocate space to put the depth pixels we'll receive
this.depthPixels = new DepthImagePixel[this.sensor.DepthStream.FramePixelDataLength];

                // Allocate space to put the color pixels we'll create
                this.colorPixels = new byte[this.sensor.DepthStream.FramePixelDataLength * sizeof(int)];

                // This is the bitmap we'll display on-screen
                this.colorBitmap = new WriteableBitmap(this.sensor.DepthStream.FrameWidth, this.sensor.DepthStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

//The code below came from "Skeleton basics C# WPF", which I need to find the correspondence of "CoordinateMapper" in KinectReplay Class 
    // We are not using depth directly, but we do want the points in our 640x480 output resolution.
                 DepthImagePoint depthPoint = this.sensor.CoordinateMapper.MapSkeletonPointToDepthPoint(skelpoint, DepthImageFormat.Resolution640x480Fps30); 
```

在原始示例代码中，上述对象大小的参数是从 KinectSensor 对象中检索的，我需要做类似的事情，但从 KinectReplay 对象中获取数据，例如，我如何获得“<code>this.来自 KinectReplay 对象的 sensor.DepthStream.FramePixelDataLength” 为“<code>this.replay = new KinectReplay(recordStream);” ?

我能想到的唯一解决方案是调用“<code>this.depthPixels = new DepthImagePixel[e.FramePixelDataLength]; ” 在`replay_DepthImageFrameReady(object sender, ReplayDepthImageFrameReadyEventArgs e)`每次从 KinectReplay 接收到深度图像帧时调用其中。因此，一个 DepthImagePixel 数组将被初始化很多次，这是低效的，在示例代码中，这只会被初始化一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:20:26.897

一种解决方案是在初始化期间简单地获取一帧中的像素数并始终使用该值，因为记录的帧中的像素数不太可能发生变化。

例如，假设您有一个名为 OnNewDepthReplay 帧的方法，您将执行以下操作（未经测试，语法可能已关闭）：

```
public void OnNewDepthReplayFrame(DepthReplayFrameEventArgs e) {
    if (depthPixels == null) {
        depthPixels = new new DepthImagePixel[eFramePixelDataLength];
    }
    // code that uses your depthPixels here
} 
```

但是，使用 Kinect 1.5 和 1.6 SDK 附带的记录/回放功能实际上可能比使用 Kinect 工具箱更好。我曾经使用 Kinect Toolbox 进行录制/重放，但后来当 Kinect for Windows v 1.5 发布时，我自己转移到了 Kinect Studio。这是有关如何使用 Kinect Studio 的[视频](http://channel9.msdn.com/coding4fun/kinect/Bruno-shows-us-how-to-use-the-Kinect-Studio)以及[MSDN 上的指南](http://msdn.microsoft.com/en-us/library/hh855389.aspx)。

# javascript - 相机的 Three.js 子项不可见

> ID：14864036
> 
> 赞同：4
> 
> 时间：2013-02-13T22:02:41.110
> 
> 标签：javascript, three.js, webgl

我正在尝试将一个对象附加到相机上，以便它或多或少地用作 GUI 元素。

我的相机定义如下：

```
camera = new THREE.PerspectiveCamera( 45, windowWidth / windowHeight, 1, 2000 );
camera.position.z = 100; 
```

在我的 init() 中，我定义了要添加的对象：

```
 obj = new THREE.Mesh(new THREE.CubeGeometry(5, 5, 5, 1, 1, 1),
new THREE.MeshBasicMaterial({ color: 0xFFFFFF } ));
    obj.position.set( 0, 0, -50);
    camera.add(obj); 
```

但是，该块没有出现。我尝试将此对象添加到场景中，并且它是可见的。我在 animate() 中添加了一个循环，它将在 (-50, 50) 之间滑动对象的 z 位置，但我看不到它。

我尝试使用`camera.lookAt(obj)`并记录 obj 的世界位置（obj 位置 + 相机位置），它们的行为符合预期。世界位置似乎是我所期望的，当 z 位置超过 0 时，camera.lookAt 翻转相机。

对于没有提供更清晰的示例代码，我深表歉意，但我会尽我所能与任何试图帮助我的人合作。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T22:15:07.443

您是否将相机添加到场景中？

```
scene.add( camera ); 
```

通常不必将相机添加到场景中，但在这种情况下，对象是相机的子对象，因此您必须这样做。

三.js r.58

# css - CSS 链接：活动状态和边距移动整个站点

> ID：14864039
> 
> 赞同：0
> 
> 时间：2013-02-13T22:02:47.067
> 
> 标签：css, margin

单击时我想将链接向下移动一点，但是当我尝试使用 :active state 执行此操作时，该按钮下方的所有内容也会移动一点。最简单的解决方法是什么（我不想过多地使用我的 HTML 代码，所以可能与 css 相关？）。

HTML：

```
<a href="#">Test</a>
<p>This paragraph moves when I click button above. I want to prevent that.</p> 
```

CSS：

```
a { display: inline-block; }
a:active { margin: 5px 0 0 0; } 
```

`position:relative`&`top: 5px`听起来是个好主意，但这也不起作用（按钮永远向下移动 1px :/）。

[http://jsfiddle.net/JyZLF/](http://jsfiddle.net/JyZLF/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:06:25.860

这可能适合您的需求：

```
a {
    display: inline-block;
    margin: 0 0 5px 0;
}

a:active {
    margin: 5px 0 0 0;
} 
```

[http://jsfiddle.net/JyZLF/3/](http://jsfiddle.net/JyZLF/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:17:29.453

就个人而言，我不会为此使用保证金，我会使用：

```
a:active {
    position:relative;
    top:5px;
} 
```

[http://jsfiddle.net/seemly/jFrCj/1/](http://jsfiddle.net/seemly/jFrCj/1/)

更干净，更少的代码并且不太可能影响您的布局的其余部分，从而改善您网站的面向未来的能力。

Margin 移动元素框本身，其中 position relative 将元素的框留在它所在的位置，但将元素从文档流中取出，允许它在任何你想要的地方移动，而不会影响其他任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:17:33.873

您可以添加`position:relative`到`a`，然后在 中`a:active`，将其更改为`top:5px`。所以你的代码看起来像

```
a{display:inline-block; position:relative;}
a:active{top:5px;} 
```

[http://jsfiddle.net/JyZLF/7/](http://jsfiddle.net/JyZLF/7/)

relative 的定位基本上是说“您可以在页面上将这个元素移动到任何你想要的位置，但空间将保持在元素最初所在的位置。” 该链接的默认定位是静态的，这意味着它遵循正常的元素流。所以如果你把边距往下移`5px`，那么它下面的一切都会改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:08:39.020

您可以将其包装`a`在 a 中`div`，然后给该 div 一个指定的高度，同时也给出`a`绝对定位。

见下文：

[http://jsfiddle.net/8P93R/1/](http://jsfiddle.net/8P93R/1/)

# javascript - 正确的 JavaScript“或”语法？

> ID：14864042
> 
> 赞同：0
> 
> 时间：2013-02-13T22:03:02.977
> 
> 标签：javascript, syntax

我尝试使用 JavaScript 检查输入文件扩展名，使用：

```
if(extension != 'jpeg, JPEG, JPG, jpg'){} 
```

我希望语句在逻辑上阅读：'如果变量扩展名不等于 jpeg、JPEG 或..'等等

但这不起作用，我该如何正确编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:06:38.237

如果您不想使用`regex`，可以执行以下操作：

```
extension = extension.toLowerCase();
if(extension != 'jpeg' && extension != 'jpg') 
```

这也将过滤文件扩展名，如`JpEg`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:07:15.827

```
if(extension != 'jpeg'|| extension != 'JPEG' || extension != 'JPG' || extension !='jpg'){
    // would do the magic for you ;-)    
} 
```

这是简单的javascript而不是jquery！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:16:42.653

这更简洁一些，因为您可以在其他地方定义可接受的扩展数组。

```
if ($.inArray(extension.toLowerCase(), ["jpeg", "jpg"]) !== -1) {
  // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:06:28.560

```
if(extension != 'jpeg' ||  extension !=  'JPEG' || extension != 'JPG' extension != 'jpg'){} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:15:40.353

在此处使用正则表达式将使您的生活更轻松：

```
if (!extension.match(/^jpe?g$/i)) {
    alert("Bad extension");
} 
```

# vba - 持久化 VBA/VBScript 宏设置

> ID：14864043
> 
> 赞同：0
> 
> 时间：2013-02-13T22:03:08.000
> 
> 标签：vba, outlook, outlook-2010

我创建了一个 Outlook (2010) VBScript 宏，它具有一些用户可配置的设置。我已经用谷歌搜索并检查了可能的资源，但找不到持久保存它们的好方法。我目前将它们存储在邮件的正文中！没有比这更混乱的了！
我应该使用 Windows 注册表吗？一个ini文件？或者？？？以及无论是注册表、文件还是???，什么键/文件夹/??? 我会用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:03:08.000

就在点击“发布”之前，我又尝试了一次谷歌搜索并点击了这个：[http](http://www.jkp-ads.com/articles/DistributeMacro08.asp) ://www.jkp-ads.com/articles/DistributeMacro08.asp 。

我带走的要点是，ini 文件或注册表都是洁净的。VBA 使用注册表的一个好处是它会自动将“应用程序”数据放在批准的位置，只需要给你的“应用程序”一个键。由于我的数据只是一个已经存在解析代码的大字符串，因此我使用了[`strData = GetSetting(strAppKey, strSection, strLeafKey)`](http://msdn.microsoft.com/en-us/library/kb0c3wb9%28v=vs.80%29.aspx)并且[`SaveSetting(strAppKey, strSection, strLeafKey, strData)`](http://msdn.microsoft.com/en-us/library/3kz7fyks%28v=vs.80%29.aspx)瞧，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:16:55.363

存储设置的标准 Outlook 方法，特别是如果它们与特定邮箱/存储相关并且可以从连接到同一邮箱的多台计算机访问，是使用存储在众所周知的文件夹之一中的隐藏邮件，例如收件箱.
可以使用 MAPIFolder.GetStorage 访问隐藏的 MAPI 消息：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.getstorage.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.getstorage.aspx)

# javascript - javascript原型属性未定义的情况。想知道原因

> ID：14864044
> 
> 赞同：2
> 
> 时间：2013-02-13T22:03:09.677
> 
> 标签：javascript, prototype

```
var Person = function(name){
    this.name = name;
};
console.log("1 " + typeof(Person.prototype)) //"object" - prototype is a property of a first class functional object

Person.prototype.sayhi = function(){console.log("hi")};

var john = new Person();

console.log("2 "+typeof(Person.sayhi)) // "undefined"
console.log("3 "+typeof(john.sayhi))// "function" 
```

我试图更好地理解 javascript 原型。

我想知道为什么案例 2 返回未定义，而案例 3 返回“对象”。

我阅读了其他帖子，但似乎找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:06:27.157

附加到原型 ( `Person.prototype`) 的函数不能从构造函数 ( `Person`) 访问，即`Person.sayhi`根本不尝试访问原型。

当你调用构造函数（比如`var p = new Person()`）时，`Person.prototype`它会附加到创建对象的原型链（`p`），这就是你可以调用`p.sayhi()`. 但是，`sayhi`从不附加到构造函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:07:00.433

因为您的“2”console.log 没有查看原型：

```
Person.sayHi = function() { console.log('I am not in an instance'); }
console.log(typeof(Person.sayHi)); //"function"
var john = new Person();
console.log(typeof(john.sayHi)); //"undefined" 
```

不同于：

```
Person.prototype.sayHi = function() { console.log('Hi'); }
console.log(typeof(Person.sayHi)); //"undefined"
console.log(typeof(Person.prototype.sayHi)); //"function"
var john = new Person();
console.log(typeof(john.sayHi)); //"function" 
```

c#/java中静态方法和实例方法的区别

# sdk - 我可以使用 Visual Studio 2012 安装 Visual Studio 2010 SP1 SDK 吗？

> ID：14864046
> 
> 赞同：2
> 
> 时间：2013-02-13T22:03:12.960
> 
> 标签：sdk, visual-studio-2012

我需要 Visual Studio 2010 SP1 SDK 来构建这个项目：[https ://github.com/abb-iss/SrcML.NET/tree/master/ABB.SrcML](https://github.com/abb-iss/SrcML.NET/tree/master/ABB.SrcML)

但我只安装了 Visual Studio 2012（终极版）及其 SDK，我想知道是否可以安装 Visual Studio 2010 SP1 SDK 而无需安装 Visual Studio 2010，或者我可以将项目转换为使用 VS 2012 SDK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:46:29.243

您不能在 VS2012 上安装 VS2010 SDK，但在大多数情况下，您可以将 VS2010 转换为 VS2012。

# php - 出现错误 - SQLSTATE [21000]：基数违规：1241 操作数应包含 1 列

> ID：14864052
> 
> 赞同：7
> 
> 时间：2013-02-13T22:03:49.497
> 
> 标签：php, mysql

我收到此错误 SQLSTATE[21000]: Cardinality violation: 1241 Operand should contain 1 column(s) 有人可以帮我理解为什么吗？

这是我的代码：

```
<?php

session_start();
$turk_number ='';
$serial='';
$version='';
if(isset($_POST['turk_number']))
{
    $_SESSION['turk_number'] = $_POST['turk_number'];
    $turk_number= $_POST['turk_number'];
}

$hostname = "localhost";
$username = "root";
$password = "";
$dbname = "resolver";

try 
{
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);

    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $query1 = "SELECT ((SELECT * FROM participants ORDER BY serial DESC LIMIT 0, 1) % 10) + 1 as version";
    //$results = $dbh->query($query1);
        $results = $dbh->prepare($query1);
        $results->execute();
        $serial = $results->fetchColumn(0);
    if($test= $results->fetchColumn(1))     
    {
        $version = $test;   //last version on record + 1
    }
    else //if no user ever played any games
    {
        $version = 1;
    }
    $query2 = "INSERT INTO participants (version) VALUES (:version, :turk_number)";
        $stmt = $dbh ->prepare($query2);
        $stmt ->execute(array(':version' => $version,
                            ':turk_number' => $turk_number));

}
catch(PDOException $e)
{
    echo $e->getMessage();
}   

$_SESSION['serial']= $serial;
$_SESSION['version']=$version;

?>
serial <?php print $serial; ?><br />
version <?php print $version; ?><br />
turk <?php print $turk_number; ?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T22:07:40.477

您正在选择内部查询中的所有列，然后尝试执行**%10**，它会给您错误，因为您不能**%10**到多个列。将其切换为选择一列。

```
(SELECT * FROM participants ORDER BY serial DESC LIMIT 0, 1) % 10 
```

选择多个列，然后尝试将**其**修改**10**

# java - Listagg 函数和 ORA-01489：字符串连接的结果太长

> ID：14864055
> 
> 赞同：11
> 
> 时间：2013-02-13T22:03:53.953
> 
> 标签：java, oracle, jdbc, oracle10g, oracle11g

当我运行以下查询时：

```
 Select
  tm.product_id,
  listagg(tm.book_id || '(' || tm.score || ')',',')
    within group (order by tm.product_id) as matches
from
  tl_product_match tm 
where
  tm.book_id is not null 
group by
  tm.product_id 
```

Oracle 返回以下错误：

```
 ORA-01489: result of string concatenation is too long 
```

我知道它失败的原因是 listagg 函数试图连接一个不支持的大于 4000 个字符的值。

我已经看到这里描述的替代示例 - [http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)但它们都需要使用函数或过程。

有没有一种纯 SQL 的解决方案，无需调用函数或存储过程，并且能够使用标准 JDBC 读取值？

我遇到的另一个困难是，我见过的大多数字符串聚合示例都显示了如何按原样读取值的示例。在我的示例中，我首先修改了值（即我正在聚合两列）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T22:44:44.893

您可以使用返回 CLOB 的 xml 函数来执行此操作。JDBC应该就可以了。

```
select tm.product_id, 
       rtrim(extract(xmlagg(xmlelement(e, tm.book_id || '(' || tm.score || '),')), 
               '/E/text()').getclobval(), ',')
  from tl_product_match tm
 where tm.book_id is not null 
 group by tm.product_id; 
```

例如：[http ://sqlfiddle.com/#!4/083a2/1](http://sqlfiddle.com/#!4/083a2/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T19:04:14.983

为什么不使用嵌套表？

```
set echo on;
set display on;
set linesize 200;

drop table testA;
create table testA
(
col1 number,
col2 varchar2(50)
);

drop table testB;
create table testB
(
col1 number,
col2 varchar2(50)
);

create or replace type t_vchar_tab as table of varchar2(50);

insert into testA values (1,'A');
insert into testA values (2,'B');

insert into testB values (1,'X');
insert into testB values (1,'Y');
insert into testB values (1,'Z');
commit;

-- select all related testB.col2 values in a nested table for each testA.col1 value
select a.col1, 
cast(multiset(select b.col2 from testB b where b.col1 = a.col1 order by b.col2) as t_vchar_tab) as testB_vals
from testA a;

-- test size > 4000
insert into testB
select 2 as col1, substr((object_name || object_type), 1, 50) as col2
from all_objects;
commit;

-- select all related testB.col2 values in a nested table for each testA.col1 value
select a.col1, 
cast(multiset(select b.col2 from testB b where b.col1 = a.col1 order by b.col2) as t_vchar_tab) as testB_vals
from testA a; 
```

我不是 java 专家，但这已经存在了一段时间，我确信 java 可以将值从嵌套表中提取出来。而且，不需要在另一端标记一些分隔字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:12:01.180

> 我已经看到这里描述的替代示例 - [http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)但它们都需要使用函数或过程。

不，他们没有。向下滚动，您会看到几个不需要 pl/sql 的选项。

# java - 在用户交互时显示 TextField

> ID：14864063
> 
> 赞同：1
> 
> 时间：2013-02-13T22:04:27.423
> 
> 标签：java, swing

我只想**在用户在输入字段中输入值时显示 TextField**

这是我的代码：

```
import java.awt.BorderLayout;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class PlayingAround {

    JFrame frame;
    JTextField display;
    JTextField input;

    public static void main(String[] args) {
        PlayingAround obj = new PlayingAround();
        obj.create();
    }

    private void create() {
        frame = new JFrame();
        display = new JTextField();
        input = new JTextField();
        display.setEditable(false);
        display.setVisible(false);

        input.addKeyListener(new Listener());
        frame.add(BorderLayout.NORTH, display);
        frame.add(BorderLayout.SOUTH, input);

        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    class Listener implements KeyListener {

        @Override
        public void keyTyped(KeyEvent e) {
        }

        @Override
        public void keyPressed(KeyEvent e) {
        }

        @Override
        public void keyReleased(KeyEvent e) {
            display.setVisible(true);
            display.setText(input.getText());
        }
    }
} 
```

但我的问题是***Display JTextField*****直到出现Resizing the Window, Minimizing and maximizing the Window 之**类的事件才会变得可见。

我尝试在 keyReleased 方法中调用**frame.repaint()**但即使它也没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:06:34.940

在将文本字段组件放入容器后，您应该在包含 JTextField 的容器上调用`revalidate()`和。`repaint()`该`revalidate()`调用向容器的布局管理器发送请求以重新布局其组件。然后`repaint()`请求绘制管理器的 JVM 请求重绘新布局的容器及其子组件。repaint() 并不总是需要，但通常是个好主意。

此外，不要为此使用 KeyListener，而是在第一个文本组件的 Document 上使用 DocumentListener。这样，如果用户清空第一个文本组件，您可以根据需要使第二个文本组件消失。此外，无需按键即可输入文本，您希望允许这样做。

# php - 在 php 中打印到 Zebra 打印机

> ID：14864065
> 
> 赞同：3
> 
> 时间：2013-02-13T22:04:34.197
> 
> 标签：php, printing, network-printers

寻找使用 RAW 端口 9100 从 php 网页打印到斑马 IP 打印机的正确代码。有谁知道这是否可能？我需要将 ZPL 格式输出的字符串直接发送到 ZM400 标签打印机。我搜索了高低，我找到的最接近的是：[Print directly to network printer using php](https://stackoverflow.com/questions/4956143/print-directly-to-network-printer-using-php?rq=1)

它似乎非常接近我的需要，但是当我的 php 页面点击该代码时，它什么也不做。这是我使用的代码：

```
<?php 
     $handle = printer_open('\\\\192.168.2.206:9100\\'); 
     printer_set_option($handle, PRINTER_MODE, "RAW");
     printer_write($handle, "TEXT To print"); 
     printer_close($handle);
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-22T10:20:19.600

我意识到这个问题有点老了，但我最近不得不执行这个确切的任务，这就是我的做法。主服务器是不在本地网络上的基于云的 PHP 服务器。在本地网络上，我们有另一台机器正在运行 WAMP 和此脚本，Zebra 打印机本身也在本地网络的 IP 192.168.1.201 上：

```
<?php
/*
 * File Allows printing from web interface, simply connects to the Zebra Printer and then pumps data
 * into it which gets printed out.
 */
$print_data = $_POST['zpl_data'];

// Open a telnet connection to the printer, then push all the data into it.
try
{
    $fp=pfsockopen("192.168.1.201",9100);
    fputs($fp,$print_data);
    fclose($fp);

    echo 'Successfully Printed';
}
catch (Exception $e) 
{
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

然后，在云服务器生成的网页上，我们有一些代码简单地向本地网络上的服务器执行 Ajax POST，张贴在要打印的 zpl_data 中。

**编辑 2017**

我们现在已经将事情转移到通过 PrintNode ( [https://www.printnode.com/](https://www.printnode.com/) ) 运行。到目前为止，我们发现它非常好，它允许我们打印各种文档而无需使用我们自己的代理，并且还提供了一个白标安装程序，因此它看起来就像我们自己的产品。我不隶属于 PrintNode。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:59:46.070

如果您希望将 ZPL 发送到打印机，则不一定需要专用的打印库。您只需要为该打印机打开一个套接字并直接发送您的 ZPL。这更像是一个一般的 PHP 套接字通信问题，而不是特定于打印机的问题。

如果托管您的 Web 应用程序的服务器和打印机位于同一网络上，那么您将能够打开套接字并发送 ZPL。但是，如果您的打印机和 Web 应用程序服务器位于不同的网络上，您将无法在该型号打印机上通过套接字进行打印，而无需额外的浏览器插件或附加组件。一般来说，通过网站访问远程打印机（或任何设备）存在安全风险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T22:29:58.020

`printer_open()`和相关函数不是标准 PHP 语言的一部分；它们是扩展的一部分。

如果您想使用它们，您需要安装扩展程序：[有关打印机扩展程序的信息，请参见此处](http://www.php.net/manual/en/book.printer.php)。

但是，请注意，此扩展仅适用于在 Windows 上运行的 PHP。

如果您的服务器不是 Windows，您将需要使用外部程序将数据发送到打印机。一个示例可能如下所示：

```
exec("lpr -P 'printer' -r 'filename.txt'); 
```

此信息以及更多信息可以在 SO 上的其他地方找到——例如这里：[从 PHP 应用程序通过网络打印](https://stackoverflow.com/questions/5694144/printing-over-network-from-php-app/5694982#5694982)

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T09:45:19.913

经过数小时的搜索，我得到了解决方案：

在所需 IP 上安装打印机后：![在此处输入图像描述](../Images/d3a1f95b5d6cdc6d09bee8c42d650679.png)

```
exec('lp -d printer file'); 
```

就我而言，命令是：

```
exec('lp -d Epson-Cofetarie /home/clara/Desktop/txt.txt'); 
```

其中：**打印机**= Epson-Cofetarie

**文件**= /home/clara/Desktop/txt.txt

文件需要**绝对路径**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-01T22:07:48.527

我希望，这个简单的代码可以解决问题，

1.  将您的 ZPL 代码放入文件中，例如“barcode.zpl”
2.  共享您的 Zebra 打印机，以便可以在 Windows 资源管理器中通过键入
    “\192.168.1.113[您的打印机名称]”来访问它；
3.  创建 PHP 文件，并编写代码：

`<?php $file="barcode.zpl"; copy($file, "//192.168.1.113/ZDesigner GK420t"); ?>`

谢谢你

# ruby-on-rails - 是否有比蛮力更聪明的 Ruby 算法来查找多维数据中的相关性？

> ID：14864071
> 
> 赞同：1
> 
> 时间：2013-02-13T22:04:44.613
> 
> 标签：ruby-on-rails, ruby, algorithm, cluster-analysis, matching

我的平台是 Ruby——一个特别使用 Rails 3.2 的 webapp。

我正在尝试根据对象（人）对某些项目的评分来匹配对象（人）。人们可能会像其他人一样评价所有、部分或不评价相同的项目。评分是 0 到 5 之间的整数。可评分的项目数量和用户数量都可以被认为是重要的。

一个简单的例子 -

![数据说明](../Images/19d22ae20f2260ce3f2674ea92b4648b.png)

蛮力方法是遍历所有人，计算每个项目的差异。在 Ruby 风格的伪代码中 -

```
MATCHES = {}
for each (PERSON in (people except USER)) do
  for each (RATING that PERSON has made) do
    if (USER has rated the item that RATING refers to) do
      MATCHES[PERSON's id] += difference between PERSON's rating and USER's rating
    end
  end
end
lowest values in MATCHES are the best matches for USER 
```

这里的问题是，随着项目、评分和人数的增加，这段代码将需要很长时间才能运行，并且暂时忽略缓存，这是必须运行很多的代码，因为这种匹配是主要的我的应用程序的功能。

我对更聪明的算法和更聪明的数据库持开放态度来实现这一点，但是通过算法来实现它并因此允许我将所有内容保存在 MySQL 或 PostgreSQL 中会让我的生活更轻松。我唯一要说的是数据确实需要持久化。

如果任何更多细节会有所帮助，请随时询问。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:20:58.790

查看[KD-Tree](https://en.wikipedia.org/wiki/Kd-tree)。它专门用于加快 N 维空间中的邻居查找速度，例如您的评级系统（第 1 个人是沿 X 轴的 3 个单位，沿 Y 轴的 4 个单位，依此类推）。

您可能必须使用实际的编程语言来执行此操作。一些数据库有空间索引，但它们通常是为地理工作而设计的，比如[PostGIS](http://postgis.net/)（它使用[GiST](https://en.wikipedia.org/wiki/GiST)索引），并且只支持两个或三个维度。

也就是说，我确实在 PostGIS 上找到[了这篇诱人的博客文章。](http://blog.opengeo.org/2012/03/13/postgis-2-0-new-features-3d4d-indexing/)然后我找不到任何其他参考，但也许你的运气会比我的好......

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:16:09.257

从技术上讲，您的任务是匹配由 5 个字母组成的长字符串。这种东西在计算生物学领域得到了广泛的研究。（通常使用 4 个字母）。如果您不知道这本书[http://www.amazon.com/Algorithms-Strings-Trees-Sequences-Computational/dp/0521585198](https://rads.stackoverflow.com/amzn/click/com/0521585198)，那么您可能想要获取一份副本。恕我直言，这是关于序列模糊匹配/评分的标准书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:11:32.770

你的数据稀疏吗？通过评分，大多数时候并不是每个用户都会对每个对象进行评分。

天真地比较每个对象是`O(n*n*d)`，其中`d`是操作数。然而，所有 Hadoop 解决方案的一个关键技巧是转置矩阵，并且只处理列中的非零值。假设您的稀疏性是`s=0.01`，这会将运行时间减少到`O(d*n*s*n*s)`，即`s*s`. 因此，如果你的稀疏度是 100 分之一，那么理论上你的计算速度会快 10000 倍。

请注意，结果数据仍然是`O(n*n)`距离矩阵，所以严格来说问题仍然是二次的。

击败二次因子的方法是使用索引结构。已经提到了 kd-tree，但我不知道分类/离散数据和缺失值的版本。AFAICT 对此类数据的索引没有得到很好的研究。

# ios - 有没有办法让我们自己的应用程序上传它的崩溃报告？

> ID：14864075
> 
> 赞同：0
> 
> 时间：2013-02-13T22:04:55.017
> 
> 标签：ios, crash-reports

不确定这是否可能。但实际情况是，有时我们的应用程序会随机崩溃。我们不知道究竟是什么问题。有没有办法让我们从用户的 iPhone 上获取崩溃报告？通过代码还是通过其他应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:31:34.573

* * *

您可以在您的应用程序中注入第三方代码，这基本上可以保存您的崩溃报告，然后您可以使用它们进行分析。我们的做法是捕获任何崩溃日志并将它们上传到应用服务器，该服务器使用该信息通过用户友好的 Web 界面显示（访问受控以用于管理目的）。

一个很棒的开源 Crash Reporter 库可以在这里找到[https://github.com/kstenerud/KSCrash](https://github.com/kstenerud/KSCrash)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:26:47.357

用户可以从设置 > 常规 > 关于 > 诊断和使用中决定是否自动发送崩溃报告。

您还可以使用第三方组件来获取有关崩溃事件的详细信息，例如[Crittercism](https://www.crittercism.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:39:44.640

如果您对用于 iOS 崩溃报告的 3rd 方服务感兴趣，那么很难超越[Crashlytics](http://crashlytics.com)。非常快速的崩溃报告，安装简单，查询响应时间长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:56:21.543

我还要提到[TestFlight SDK](https://testflightapp.com/sdk/doc/1.0/)，它是免费且易于使用的，它允许您轻松地从所有测试人员那里收集崩溃报告，还可以进行远程日志记录和其他工作。我在不久前正在开发的基于位置的应用程序上使用它，它对调试很有帮助

# android - 位图内存不足异常

> ID：14864080
> 
> 赞同：0
> 
> 时间：2013-02-13T22:05:11.757
> 
> 标签：android, bitmap, surfaceview, out-of-memory, bitmapfactory

我的应用程序有问题。在陆地空间模式下切换时，调用 setContentView() 方法来显示钢琴键盘。钢琴键盘类扩展了 Surfaceview 以更好地显示按下的键。这个 SurfaceView 类作为子类添加到我的横向布局中：

```
RelativeLayout rootLayout = (RelativeLayout) findViewById(R.id.rootLayout);
RelativeLayout.LayoutParams relativeLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
relativeLayoutParams.addRule(RelativeLayout.BELOW, R.id.relativeLayoutLowerBar);
rootLayout.addView(keyboardSurfaceView, relativeLayoutParams); 
```

在我的keyboardSurfaceView 类中，我使用BitmapFactory.decodeResource() 方法将位图加载到位图数组中，并保存位图直到应用程序被销毁。这很好用。当我在纵向模式下切换时，我使用 setContentView() 更改布局并删除 keyboardSurfaceView ：

```
if(keyboardSurfaceView != null && keyboardSurfaceView.getParent() != null)
        ((ViewGroup) keyboardSurfaceView.getParent()).removeView(keyboardSurfaceView); 
```

位图加载一次。第一次切换横向模式。我遇到了内存不足的错误，当从横向的 protrait 等进行 10-20 次切换时，等等。当我在 ddms 视图中更新堆时，我可以看到，每次当我从横向视图中的 protrait 视图切换时，堆大小都会增长到 ca。20mb 然后应用程序崩溃。我不知道为什么这一直在发生。位图只加载一次，而不是每次。我也试过`bitmap.recycle(); bitmap = null`没有成功。还尝试使用 LRUCache 类缓存位图，如 Google 最佳实践中所述。我还搜索了 stackoverflow 以找到适合我的问题的解决方案。仍然无法解决此问题。我自己处理纵向/横向更改（覆盖了 onConfigurationChanged() 方法）。将所有图像放入 drawable-xhdpi 会有所帮助。改变方向时，堆大小和以前一样增长，但仍在增长。任何帮助，将不胜感激...

例外：

```
 02-13 22:44:09.419: E/dalvikvm-heap(935): 11448-byte external allocation too large for this process.
02-13 22:44:09.419: E/dalvikvm(935): Out of memory: Heap Size=16391KB, Allocated=13895KB, Bitmap Size=16394KB, Limit=32768KB
02-13 22:44:09.419: E/dalvikvm(935): Trim info: Footprint=16391KB, Allowed Footprint=16391KB, Trimmed=432KB
02-13 22:44:09.419: E/GraphicsJNI(935): VM won't let us allocate 11448 bytes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:09:10.170

这是有关如何有效处理位图的Android文档

> [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:30:48.730

好的第一次在我的surfaceView类中调用surfaceCreated时，我调用了这个方法，并且这个方法只调用一次，而不是每次我在屏幕上显示surfaceView时：

```
bitmapKeyboard = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyboard); 

bitmapGlowImages[0] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keycdown); 
bitmapGlowImages[1] = BitmapFactory.decodeResource(context.getResources(), R.drawable.blackkeydown);
bitmapGlowImages[2] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyddown);
bitmapGlowImages[3] = BitmapFactory.decodeResource(context.getResources(), R.drawable.blackkeydown);
bitmapGlowImages[4] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyedown);
bitmapGlowImages[5] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keycdown); 
bitmapGlowImages[6] = BitmapFactory.decodeResource(context.getResources(), R.drawable.blackkeydown);
bitmapGlowImages[7] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyddown);
bitmapGlowImages[8] = BitmapFactory.decodeResource(context.getResources(), R.drawable.blackkeydown);
bitmapGlowImages[9] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyddown);
bitmapGlowImages[10] = BitmapFactory.decodeResource(context.getResources(), R.drawable.blackkeydown);
bitmapGlowImages[11] = BitmapFactory.decodeResource(context.getResources(), R.drawable.keyedown); 
```

在这个类中还运行一个单独的线程来绘制按下的键：使用`canvas.drawBitmap(bitmap, null, destRect, null)`. 最后，当 onDestroy 被调用时，我的方法 recycleBitmaps() 被调用

```
public void recycleBitmaps() {
        if(bitmapKeyboard != null) {
            bitmapKeyboard.recycle();
            bitmapKeyboard = null;
            for(int i = 0; i < bitmapGlowImages.length; i++) {
                bitmapGlowImages[i].recycle();
                bitmapGlowImages[i] = null;
            }
            System.gc();
        }
} 
```

而已。每次在横向时，我都会在横向布局中将我的 SurfaceView 添加到我的父视图中，在纵向中我再次将其删除，然后加载我的纵向布局。我这样做是`onConfigurationChanged()`因为我自己处理方向更改，因此每次更改设备方向时都不会破坏和创建应用程序。

# ios - 如何将 NSDictionary 转换为包含 NSDictionary json 的 NSString？

> ID：14864088
> 
> 赞同：2
> 
> 时间：2013-02-13T22:05:36.253
> 
> 标签：ios, ios6

如何转换`NSDictionary`为`NSString`包含`JSON`的`NSDictionary`？我试过但没有成功

```
//parameters is NSDictionary
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:parameters
                                                       options:0
                                                         error:&error]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:07:52.883

如果 jsonData 是`NSDictionary`

```
NSString *str=[NSString stringWithFormat:@"json data is %@", jsonData]; 
```

或者如果 jsonData 是 `NSData`

```
NSString *str = [[NSString alloc] initWithData:jsonData encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T22:11:16.220

如果您只想检查它，您可以创建一个`NSString`：

```
NSString *string = [[NSString alloc] initWithData:jsonData
                                         encoding:NSUTF8StringEncoding]; 
```

但是，如果您要将其写入文件或将其发送到服务器，则只需使用`NSData`. 上面的构造对于检查值以进行调试很有用。

# python - 搜索具有重复项的列表

> ID：14864095
> 
> 赞同：0
> 
> 时间：2013-02-13T22:06:01.160
> 
> 标签：python, list, search, duplicates

我有一个看起来像这样的列表：

```
 list1 = [1,2,4,6,8,9,2] 
```

如果我要说

```
 if 2 in list1:
      print True 
```

它打印 True 一次。有没有办法确定 2 或任何变量 x 是否多次在列表中，如果有多少次而不像这样遍历整个列表？

```
for item in list1:
      if item = 2:
          duplicates +=1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:07:55.300

我想你正在寻找`list.count`：

```
if list1.count(2) > 1:
    print True 
```

在[序列类型](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)中：

> s.count(i) i 在 s 中出现的总次数

当然，在幕后，该`count`方法将遍历整个`list`（尽管它会比`for`循环快得多）。如果您出于性能原因试图避免这种情况，或者您可以使用惰性迭代器而不是 a `list`，您可能需要考虑其他选项。例如，`sort`list 和 use `itertools.groupby`，或将其输入 a`collections.Counter`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T22:10:38.030

```
from collections import Counter
y = Counter(list1)
print y[2]
print y[5] # and so on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:08:39.280

```
list1 = [1,2,4,6,8,9,2]
print list1.count(2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T22:12:52.333

我会为此使用一个`collections.Counter`对象：

```
from collections import Counter
myCounter = Counter(list1)

print myCounter[2] > 1 #prints 'True' 
```

但是，如果您只打算对列表中的一个或几个元素执行此操作，我会选择[abarnert 的答案](https://stackoverflow.com/a/14864128/1142167)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:16:11.203

Collections.counter （正如其他人所指出的）是我将如何做到这一点。但是，如果你真的想弄脏你的手：

```
def count(L):
    answer = {}
    for elem in L:
        if elem not in answer:
            answer[elem] = 0
        answer[elem] += 1
    return answer

>>> counts = count(myList)
>>> duplicates = [k for k,v in counts.iteritems() if v>1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T22:26:02.597

```
list1 = [1,2,4,6,8,9,2]

dict1 = {}

for ele in list1:
    # you iterate through the list once
    if ele in dict1:
        # if a key is already in the dictionary
        # you increase the corresponding value by one
        dict1[ele] += 1 
    else:
        # if a key is not yet in the dictionary
        # you set its corresponding value to one
        dict1[ele] = 1 
```

结果：

```
>>> dict1
{1: 1, 2: 2, 4: 1, 6: 1, 8: 1, 9: 1} 
```

# html - 带有 Captivate 的 HTML 5 中的透明视频

> ID：14864096
> 
> 赞同：0
> 
> 时间：2013-02-13T22:06:00.997
> 
> 标签：html, video, adobe-captivate

所以我在绿屏上拍摄了一些视频，在 After Effects 中删除了背景并将视频保存在 Alpha 通道中。我想将视频放入 Adob​​e Captivate，这些视频将在整个幻灯片中成为有声的叙述。导入视频并将其放置在我想要的位置后，我去预览。如果我在 Captivates 普通预览器中预览幻灯片，背景是透明的，就像我想要的那样。但是，如果我预览它或将其发布到 HTML 5，背景会变成黑色。HTML 5 是该项目需要查看的内容。我做错了什么还是 HTML 5 不支持透明视频。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:12:36.633

您可能需要使用 canvas 元素来渲染具有透明度的视频，请参阅[https://github.com/m90/seeThru](https://github.com/m90/seeThru)

> **seeThru - 带有 Alpha 通道透明度的 HTML5 视频**
> 
> 这个包为 HTML5 元素中缺少的 alpha 通道添加了“支持”。原始视频数据将简单地重新渲染到画布元素中，因此增加了为您的视频使用透明胶片的可能性。Alpha 信息既可以包含在视频的源文件中（移动），也可以包含在单独的元素中（静态）。

# c# - 如何在我的 ado.net 代码中检查当前文化？

> ID：14864098
> 
> 赞同：0
> 
> 时间：2013-02-13T22:06:12.613
> 
> 标签：c#, datetime, ado.net

我正在尝试将来自来源的日期解析为“02/11/2013”

在我的应用程序中，我将用户的文化设置为 en-CA 或 en-FR，其日期格式为“dd/MM/yyyy”或“M/d/yyyy”

如果我解析日期并传入格式，这会起作用还是取决于我保存到数据库的格式？

```
 if (DateTime.TryParseExact(dateString, Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern, null, System.Globalization.DateTimeStyles.None, out dtResult))
{
    dt = dtResult;
} 
```

我现在可以正确思考，所以我需要澄清一下。

我以“dd/MM/yyyy”或“M/d/yyyy”的格式传递，不管源是什么格式，这个格式是否格式化日期，或者是我告诉日期时间解析源将在这种格式所以用这个？

我厌倦的是有人以一种格式保存到数据库，然后一个法国人想要读取日期和他们自己的格式（是的，我应该以 utc 格式存储）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:21:09.873

ADO.NET 是强类型的；有一些众所周知的类型可以存储大多数数据。在日期的情况下，那将是`DateTime`在 .NET 和`datetime`大多数数据库系统中。如果您需要担心文化，那么*您已经做错了*，因为您将数据作为字符串而不是`DateTime`/传递`datetime`。

然后，这会使您在这里的担忧变得多余：

> 我厌倦的是有人以一种格式保存到数据库，然后一个法国人想要读取日期和他们自己的格式（是的，我应该以 utc 格式存储）。

因为`DateTime`/`datetime` *没有格式的概念*- 它只是一个日期/时间值。字符串数据的任何 UI 呈现/解析都应该完全隔离并特定于 UI。除了你应该（在谈论日期/时间时）使用`DateTime`/`datetime`独占的 UI 代码。

同样，在存储整数时，您应该使用`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:10:25.217

如果日期仅存储为“02/11/2013”​​而没有任何其他文化识别信息，您将无法知道如何正确解释它！您完全正确担心具有 en-FR 文化的人可能会将日期保存到数据库中为“02/11/2013”​​，这意味着 11 月 2 日，然后具有 en-US 文化的人可能会读取该日期并解释它如 2 月 11 日。

如果您知道当前文化是相关的，则应该只传递当前文化，这意味着您知道日期字符串是使用该文化生成的。

更好的方法是首先不要存储这样的日期。最好以包含时区和格式信息的格式存储日期，例如[Internet 日期/时间 RFC 3339](http://www.ietf.org/rfc/rfc3339.txt)格式。

或者，如果你不能，至少确保获取日期并始终将其转换为 en-US 文化，然后再存储到数据库中，而不是在从数据库中读取时将该文化传递给 DateTime.Parse。

在以 RFC 3339 格式序列化/反序列化日期时，日期的 .NET XML 序列化代码可以派上用场。有关更多信息，请参阅[此 SO 帖子](https://stackoverflow.com/questions/17017/how-do-i-parse-and-convert-datetimes-to-the-rfc-3339-date-time-format)。

# objective-c - Objective-C if ([self isKindOfClass: ... ]) 静态方法

> ID：14864103
> 
> 赞同：3
> 
> 时间：2013-02-13T22:06:29.573
> 
> 标签：objective-c, categories, static-methods

我寻求帮助以了解为什么代码表现得如此奇怪。我有什么：`BaseClass : NSManagedObject`和`ChildClass : BaseClass`

BaseClass 有一个类别。。H：

```
@interface BaseClass (Category)

+ (NSArray)method;

@end 
```

米：

```
@implementation BaseClass (Category)

+ (NSArray *)method
{
    if ([self isKindOfClass:[ChildClass class]) {
        do stuff
        return resultArray;
    }
    return nil;
} 
```

从项目的另一个地方我打电话给`*array = [ChildClass method];`. 在 BaseClass (Category) 实现控制台中读取，但由于某种原因，`self = (Class)ChildClass`执行流程仍然跳过`if`并直接传递到，这超出了我的理解。`return nil;`任何建议为什么会这样？感谢所有答案。谢谢。

...因为我没有足够的代表点，所以我没有发布屏幕截图。希望我很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:24:03.987

你在一个静态方法中，所以 self 代表类本身。足以做到这一点：

```
if (self==[ChildClass class]) {
    do stuff
    return resultArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:28:07.433

你最好`[[childOrBaseInstance class] method];`在你的代码中调用`+method`.

`ChildClass`将拥有它自己`+method`的 override `BaseClass`'s `+method`。

每当你检查你的类并做一些不同的事情时，问问自己你是否只是手动重新创建多态性。

# redirect - 码头仅将特定请求转发到单个路径

> ID：14864104
> 
> 赞同：4
> 
> 时间：2013-02-13T22:06:35.363
> 
> 标签：redirect, jetty

我将如何设置 Jetty 以仅将特定父路径转发到目录？例如，当用户请求：localhost/ 时，它应该转到 localhost/CorrectDirectory。诸如 localhost/AnotherDirectory 之类的任何请求是否正确？

[RewriteHandler](http://jetty.codehaus.org/jetty/jetty-6/apidocs/org/mortbay/jetty/handler/RewriteHandler.html)上的文档给出：

```
 <Set name="handler">
   <New id="Handlers" class="org.mortbay.jetty.handler.RewriteHandler">
     <Set name="rewriteRequestURI">false</Set>
     <Set name="rewritePathInfo">false</Set>
     <Set name="originalPathAttribute">requestedPath</Set>
     <Call name="addRewriteRule"><Arg>/other/*</Arg><Arg>/test</Arg></Call>
     <Call name="addRewriteRule"><Arg>/test/*</Arg><Arg></Arg></Call>
     <Call name="addRewriteRule"><Arg>/*</Arg><Arg>/test</Arg></Call>
     <Set name="handler"> 
```

从它的外观来看，如果我尝试为 localhost/ 设置重写规则，我必须命名每个子目录，以防止直接从 localhost/DirectoryTwo 到 localhost/CorrectDirectory/DirectoryTwo （这是不正确的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T14:02:20.000

我不确定我的问题是否正确，我认为它是这样的：

> 我想重定向“/”但只有“/”而不是“/someting”到“/somedestination”

看看这个答案： [https ://stackoverflow.com/a/25405898/3489108](https://stackoverflow.com/a/25405898/3489108)

您可以通过使用 RewriteRegexRule 来实现所需的结果。正则表达式“^/$”匹配字符串的开头 (^)、确切的路径 (/) 和字符串的结尾 ($)。这确保了只有准确的路径被匹配。

我正在使用 jetty 9 嵌入并在代码中设置我的重定向，所以我无法帮助弄清楚你如何设置它“配置方式”。

# c# - IServiceLocator.GetInstance(Type) 的意图与 IServiceProvider.GetService(Type) 的意图有何不同？

> ID：14864108
> 
> 赞同：11
> 
> 时间：2013-02-13T22:06:49.717
> 
> 标签：c#, dependency-injection, service-locator, base-class-library, common-service-locator

`IServiceProvider.GetService(Type serviceType)`方法签名和的意图有区别`IServiceLocator.GetInstance(Type serviceType)`吗？如果有，有什么区别？

我一直将它们视为等效的，但为了保持一致性，我选择使用单一方法。这似乎是处理这两个接口的一个足够好的解决方案，但我真的很想知道它们的实际用途是什么，以便我可以确定我在正确的地方使用了正确的接口。 **如果他们的意图实际上是相同的，那么有任何理由为同一目的使用多组语义吗？**（我知道[签名是在 开始时推荐的](http://codebetter.com/jeremymiller/2008/08/16/it-s-time-for-ioc-container-detente/)[，`GetInstance``Microsoft.Practices.ServiceLocation`](http://codebetter.com/jeremymiller/2008/08/16/it-s-time-for-ioc-container-detente/)但这似乎并不是引入重复的合理理由）。

## 为什么我很困惑

下面列出了我在试图找到这个问题的答案时发现的有时相互矛盾的事实，以及我对它的解释。我将这些包括在内，以便可以在有关该主题的所有已知信息的背景下解决我的问题。

*   [MSDN 文档`IServiceProvider`](http://msdn.microsoft.com/en-us/library/system.iserviceprovider.getservice.aspx)说该方法`GetService(Type serviceType)`应该返回

    > *serviceType* 类型的服务对象。
    > -或 -如果没有*serviceType类型的服务对象，则为*
    > **null**。

**   [MSDN 文档`IServiceLocator`](http://msdn.microsoft.com/en-us/library/microsoft.practices.servicelocation.iservicelocator.aspx)缺少方法文档，但 VS 对象浏览器中的摘要说`GetInstance(Type serviceType)`该方法返回“请求的服务实例”。但是，文档中还有一个异常条目`IServiceLocator`，指出`ActivationException`如果解析服务实例时出现错误，则应抛出一个异常条目。

    *   `ActivationException`位于`Microsoft.Practices.ServiceLocation`引入多年后`IServiceProvider`引入的命名空间中。因此，可以理解的`IServiceProvider`是 不指异常。话虽如此，`IServiceLocator`接口的文档没有说明`null`如果没有找到结果就返回。也不清楚是否缺少所请求的服务类型的实现应构成例外。

    *   **缺少服务类型的实现是否会导致`ActivationException`in`IServiceLocator`实现？** 看起来不像。的实现[模板](http://commonservicelocator.codeplex.com/SourceControl/changeset/view/97655#332684)`IServiceLocator`忽略任何非空后置条件的概念。

    *   的实现[模板](http://commonservicelocator.codeplex.com/SourceControl/changeset/view/97655#332684)`IServiceLocator`也被`IServiceProvider.GetService(Type)`视为`IServiceLocator.GetInstance()`. 这是否算作违反 Liskov（由于在未在基类型上声明的子类型中抛出异常），或者，这实际上需要实现差异而不是接口方法签名上声明的异常？我的意思是：**我们确定`ServiceLocatorImplBase`实现模板`IServiceLocator`正确实现了这两个接口吗？**`IServiceProvider`将调用包装`GetInstance`在 try 块中并`null`在捕获到异常时返回 是否会更好地表示接口的意图？

    *   **附录：**与此相关的另一个问题是 to 的对应`IServiceLocator.GetAllInstances(Type)`关系`IServiceLocator.GetInstance(Type)`。具体来说，**对于任何类型 T，其实现是否应该`IServiceLocator.GetAllInstances(typeof(T))`返回与 ? 相同的结果`IServiceLocator.GetInstance(typeof(IEnumerable<>).MakeGenericType(typeof(T))`？** （很容易看出这与`IServiceProvider`对应关系有什么关系，但我认为最好保持问题简单，只比较这种情况下同一接口的两种方法。）* 

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T11:54:10.417

`IServiceProvider.GetService`正如您已经指出的那样，和之间的区别在于`IServiceLocator.GetInstance`，任何`IServiceProvider.GetService`实现*都应该*`null`在服务未注册或由于任何原因无法解决时返回，而`IServiceLocator.GetInstance`另一方面，实现应该在这种情况下抛出异常（并且永远不会回来`null`）。

但请注意我使用了“应该”这个词。[Common Service Locator 项目](http://commonservicelocator.codeplex.com/)（拥有该接口）附带的所有 CSL 适配器（用于 Windsor、Spring、Unity 和 StructureMap 等）`IServiceLocator`都不遵守该接口，并且当您调用它们的方法`IServiceProvider`时它们会抛出异常。`IServiceProvider.GetService`

通过违反合同，CSL 的设计者设法使`IServiceProvider`界面变得毫无用处。您现在根本不能再依赖它来返回 null，这很糟糕。特别糟糕。我所知道的唯一符合合同的 CSL 适配器是[Simple Injector 适配器](http://nuget.org/packages/CommonServiceLocator.SimpleInjectorAdapter)，但是由于所有其他实现都被破坏了，即使这个正确实现的适配器在那时也没用，因为您无法安全地交换实现。

> 这算不算违反 Liskov

绝对地。他们打破了接口契约，实现不能相互替代。

设计师们知道这一点，从[Glenn Block对此](http://www.codeplex.com/site/users/view/gblock)[线程](http://commonservicelocator.codeplex.com/discussions/44293)的评论中可以看出：

> 听起来我们可能在这里搞砸了。抛出异常的想法是我们都同意的明确设计目标。让它实现 IServiceProvider 更方便，但听起来这被忽略了。

该漏洞从未得到修复，因为 CSL 从未更新过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T22:21:59.393

我认为您没有提到的两种设计之间存在区别：

> IServiceProvider.GetService
> 如果没有 serviceType 类型的服务对象，则为 null。
> 
> 如果解析服务实例时出错，则应引发IServiceLocator.GetInstance ActivationException。

重要的是要注意一个是指定默认情况，而另一个是指定错误情况。他们不一样是有道理的。

从提供的示例来看，该组合似乎是预期的实现。默认为 null，错误时包裹在 ActivationException 中。

编辑：

> 具体来说，对于任何类型 T，IServiceLocator.GetAllInstances(typeof(T)) 的实现是否应该返回与 IServiceLocator.GetInstance(typeof(IEnumerable<>).MakeGenericType(typeof(T)) 相同的结果？

不能`typeof(IEnumerable<T>)`作为更紧凑的形式工作吗？此外，为什么`GetInstance`在要求输入`IEnumerable`类型时会返回任何内容？你可以这样实现它，但我不会称它为自动的。*

# android - com.android.vending.INSTALL_REFERRER 不工作

> ID：14864109
> 
> 赞同：10
> 
> 时间：2013-02-13T22:06:58.040
> 
> 标签：android, google-play, broadcastreceiver, install-referrer

我最初问[了这个问题](https://stackoverflow.com/questions/14857070/initial-configuration-for-android-app)，关于在安装时通过市场链接将参数传递到我的应用程序中。

似乎每个人都在说`BroadcastListener`用 的`intent-filter`动作来创造一个`com.android.vending.INSTALL_REFERRER`。上面的所有文档似乎都暗示这是 Google Analytics 的一项功能（文档在 v1 中，但我现在只能下载 v2 SDK ......所以这就是我正在使用的）。我无法让这些链接传递数据。我有我的完整清单和我的广播听众。我已经包含了谷歌分析，以防万一这是一个要求。

*   [谷歌分析参考](https://developers.google.com/analytics/devguides/collection/android/devguide?hl=en#google-play-tracking)
*   [从这里](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder)生成的市场链接
*   链接到[我在商店中的应用](https://play.google.com/store/apps/details?id=com.robotsidekick.webbrowser)
*   [与商店中的参数](https://play.google.com/store/apps/details?id=com.robotsidekick.webbrowser&referrer=utm_source=mred&utm_medium=joesomebody&utm_campaign=subbranding)链接

它根本不起作用。我的广播监听器永远不会被调用，日志中不会打印任何内容。帮助！

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.robotsidekick.webbrowser"
      android:versionCode="4"
      android:versionName="4.0">

<uses-sdk android:minSdkVersion="17"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:label="@string/app_name"
    android:icon="@drawable/ic_launcher">

    <activity
        android:name="WebBrowser"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <receiver
        android:exported="true"
        android:name="com.robotsidekick.webbrowser.InstallReceiver">
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </receiver>

</application>

</manifest> 
```

**广播监听器**

```
public class InstallReceiver extends BroadcastReceiver
{
    private static final String TAG = "InstallReceiver";

    public void onReceive(Context context, Intent intent)
    {
        Log.e(TAG, "Context: " + context);
        Bundle extras = intent.getExtras();
        if (extras != null)
        {
            Log.e(TAG, "Extras:");
            for (String keys : extras.keySet())
            {
                Log.e(TAG, keys + " -> " + extras.get(keys));
            }
        }
        else
        {
            Log.e(TAG, "Extras are null");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T21:49:44.733

~~所以 xbakesx 说如果他的接收器扩展它似乎可以工作`com.google.analytics.tracking.android.AnalyticsReceiver`。~~

~~我认为关键是意图具有 ...AnalyticsReceiver 的权限，因此没有其他不扩展它的类可以获取意图。如果您查看他们的测试广播[https://developers.google.com/analytics/solutions/testing-play-campaigns](https://developers.google.com/analytics/solutions/testing-play-campaigns)，它确实是针对该课程的。~~

如果您更改该测试广播以便您的课程替换`com.google.analytics.tracking.android.AnalyticsReceiver`您可以接收它。~~最大的问题是他们似乎已经在 beta 4 或 5 中锁定了这个类。如果有人有 beta 3 的链接，我们可以测试这个，或者如果 xbakex 可以确认使用会摇滚的新罐子！~~

更新：

砰！所以权限不是问题。我创建了一个测试项目并使用 PlayStores alpha 测试来测试引荐来源链接，您可以在此处构建：[https](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns) ://developers.google.com/analytics/devguides/collection/android/v2/campaigns 。

很酷的是你根本不需要任何 GA 罐子！在此处查看我的测试项目：[https](https://github.com/twotoasters/AnalyticsTest/) ://github.com/twotoasters/AnalyticsTest/该项目还向您展示了如何解析链接以获取所需的所有信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-14T21:32:33.797

经过多次失败的尝试，我终于可以在 logcat 中看到传递的引用参数。

一路走来，我想出了一些事情，我不太确定我这样做是正确的还是错误的，但由于某些原因，这些都奏效了。如果有人仍然卡住，他们可以从我的学习中得到一些指导。

A. 创建一个自定义 BroadcastReceiver，您可以在其中准备好意图。（只有在您从 ADB 成功触发 Install_referrer 意图进行测试后，才会执行此操作）。还要确保，如果您需要将推荐人信息回发到服务器，则必须在单独的线程上。

```
 public class CustomBR extends BroadcastReceiver {

    private static final String D_TAG = "BR";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(D_TAG, "CustomReceiver onReceive (context, intent)");
        try {

            String referrer = intent.getStringExtra("referrer");
            // pass the referrer string to another singleton class to post it to server
            HandleServerComm.getInstance().postData(referrer);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

B. 更新 androidmanifest.xml 文件以反映您创建的自定义接收器

```
    <receiver ***android:exported="true" android:name="com.example.myapp.CustomBR" android:enabled="true"*** >
        <意图过滤器>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </接收者>

```

C. 确保您已正确安装 adb 以在本地环境中进行测试。您还需要通过 USB 连接并启用远程调试的设备。

D. 运行 adb shell 命令在设备上远程广播一个 install_referrer 并传递参数。

命令是

```
adb shell am broadcast -a com.android.vending.INSTALL_REFERRER -n com.example.myapp/.CustomBR --es  "token" "sample_token" --es  "source" "banner" 
```

请注意，此命令的重要部分是`com.example.myapp/.CustomBR`与意图一起发送的附加参数`--es "token" "sample_token"`在哪里。`--es`之后的第一个引号`--es`是查询字符串/参数名称，第二个引号是值。同样，如果您必须添加多个值，请如上例所示复制它。

E. 最后，让我一直感到沮丧的最重要的部分——安装在设备本身上的应用程序。您的应用程序应该安装在设备上，但根本不运行。为此，您必须“强制关闭”应用程序，然后启动 adb shell 命令来启动 install_referrer。那时，您应该会看到 logcat 亮起所需的数据。

F. 您可能还想卸载 google play store 应用上的更新并将其恢复为出厂设置。有时（未确认）google play 的版本决定了哪些数据通过 install_referrer 传递给应用程序，或者是否调用了referrer。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-12T01:04:56.900

在应用程序的 AndroidManifest.xml 中使用意图过滤器注册[BroadcastReceiver](http://goo.gl/GJucAi)是应用安装引荐的正确解决方案，无论是否使用 Google Analytics。

```
<receiver
    android:exported="true"
    android:name="com.yourcompany.package.receivers.InstallReceiver">
    <intent-filter>
        <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
</receiver> 
```

如果您已经在使用 Google Analytics，您只需为您的接收器和以下服务指定 android:name="com.google.android.gms.analytics.CampaignTrackingReceiver" 即可。两者都包含在[Google Play 服务客户端库](https://goo.gl/RWAbtz)中，因此无需编写任何 Java 代码。如果您还没有，您还必须为您的应用程序完成 Google Analytics 的[初始设置说明](http://goo.gl/6Hwcvl)。

```
 <service android:name="com.google.android.gms.analytics.CampaignTrackingService" /> 
```

如果您没有使用 Google Analytics，那么您需要在您的 java 代码中定义您自己的[BroadcastReceiver 。](http://goo.gl/GJucAi)[在实现onReceive](http://goo.gl/kV0GO0)时，您将希望它检查接收到的意图的附加内容。

Google Play（商店）收到的 URL 中的 referrer 参数是唯一传递给 Android 应用程序的参数，因此在其中编码一些参数是很常见的。对于 Google Analytics，这意味着行业标准 utm_* 参数，但您可以使用其他参数。这是我通常用于打开 Google Play 以安装和测试完整流程的 test adb 命令。

```
adb shell "am start -a android.intent.action.VIEW -d \"https://play.google.com/store/apps/details?id=com.somecompany.package&referrer=utm_source%253Dtest_campaign_source%2526utm_medium%253Dtest_campaign_medium%2526utm_term%253Dtest_campaign_term%2526utm_content%253Dtest_campaign_content%2526utm_campaign%253Dtest_campaign_name\"" 
```

测试说明：

*   在测试此流程时，检查上述命令是否产生了输出，其中 Intent 已记录到您的控制台，并且仍附加完整的引用信息，这一点非常重要。转义很容易出错并默默地删除引荐来源网址。
*   请记住，APK 必须已由 Google Play（商店）安装到您正在测试的设备上（您不能侧载）。因此，您通常需要使用您在 Google Play 中的 Alpha 分发渠道进行测试。
*   需要注意的是，如果设备 >= Honeycomb MR1，则 INSTALL_REFERRER 意图在应用程序首次启动后广播，而不是在应用程序安装后广播。
*   每次需要测试引荐流时，您都需要重新安装应用程序。
*   从 Android Google Play 应用程序安装应用程序时会跟踪安装推荐，而不是商店的网络版本。

# c# - 将 XML 转换为字符串

> ID：14864119
> 
> 赞同：0
> 
> 时间：2013-02-13T22:07:28.730
> 
> 标签：c#, .net, silverlight-4.0

我目前正在开展一个项目，我将值（“PFOID”和“Quantity”）以某种`XML`格式发送到存储过程。

所需的 XML 格式是这样的

```
 <string>
          <PFOID>04676723-2afb-49ff-9fa1-0131cabb407c</PFOID> 
          <Quantity>90</Quantity>
 </string> 
```

我的代码看起来像这样。

```
 internal void UpdateQuantity(PFO pfo)
    {

      string pfoIds = "&lt;PFO&gt;" + "&lt;PFOID&gt;" + pfo.PFOId.ToString() + "&lt;/PFOID&gt;" + " " + "&lt;Quantity&gt;" + pfo.PlannedQty.ToString() + "&lt;/Quantity&gt;" + "&lt;/PFO&gt;";

        //pfoIds = pfoIds.Replace("&lt;","<").Replace("&gt;",">");

        // string pfoIds = pfo.PFOId.ToString() + pfo.PlannedQty.ToString();
        //XDocument d = new XDocument(pfoIds,
        //                             new XElement
        //                                  ("PFO",
        //                                       new XElement("PFOID", pfo.PFOId.ToString()),
        //                                       new XElement("Quantity", pfo.PlannedQty.ToString())
        //                                   )
        //                              );

        List<string> pfoIdList = new List<string>();
        pfoIdList.Add(pfoIds);
        XmlSerializer serializer = new XmlSerializer(pfoIdList.GetType());

        StringBuilder xmlString = new StringBuilder();
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.OmitXmlDeclaration = true;
        settings.Encoding = new UTF8Encoding();
        XmlWriter writer = XmlWriter.Create(new StringWriter(xmlString), settings);

        //XDocument xDoc =  XDocument.Load(pfoIds);
        //XmlNode xNode = xmlDoc.SelectSingleNode("PFOID", "Quantity");
        //string onlyvalue = xNode.InnerText;

        //System.Xml.Linq.XDocument xDoc = new XDocument();
        ////System.Xml.Linq.XNode xNode =new System.Xml.Linq.XDocument();

        //XmlDocument xmlDoc = new XmlDocument();
        //xmlDoc.Load(pfoIds);

        //XmlNode xNode = xmlDoc.SelectSingleNode("PFOID", "Quantity");
        //string onlyvalue = xNode.InnerText;

        //serializer.WriteObject(writer, SelectedStoreIds.ToArray());
        serializer.Serialize(writer, pfoIdList);

        if (writer != null)
            writer.Close();

        xmlString.ToString();

        {               
            Context.PFOValidateUpdateData(xmlString.ToString(), WebContext.Current.User.UserID, op =>
                {
                    IsProcessing = false;
                    if (ValidateUpdateCompleted != null)
                        ValidateUpdateCompleted(this, EventArgs.Empty);
                }, null);
        }
    }
}
} 
```

我尝试了使用`XmlDocument`，`XmlNodes`但不幸的是 silverlight system.xml 程序集在其库中没有这些扩展。

任何人都可以帮我解决这个问题，我真的很乐意为你服务。非常感谢。

> 看起来像这样......对不起，我在 & lt; 之间使用了空格。<< PFOID>"04676723-2afb-49ff-9fa1-0131cabb407c</PFOID>" << 数量>"90</数量>"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:23:10.920

我不知道这是否适合您，但您可以尝试做这样的事情。

```
// Create a DataSet with one table containing two columns.
DataSet dataSet = new DataSet("dataSet");
DataTable table = dataSet.Tables.Add("string");

table.Columns.Add("PFOID", typeof(string));
table.Columns.Add("Quantity", typeof(value));

DataRow row;

row = table.NewRow();
row["PFOID"]= "04676723-2afb-49ff-9fa1-0131cabb407c";
row["Quantity"]= 90;

table.Rows.Add(row);

// Display the DataSet contents as XML.
Console.WriteLine(dataSet.GetXml()); 
```

# javascript - 在 $.ajax 中返回 HTML 的问题

> ID：14864127
> 
> 赞同：0
> 
> 时间：2013-02-13T22:07:53.403
> 
> 标签：javascript, jquery, html, jquery-ui, dialog

嘿伙计们，我有以下代码：

```
 $(document).ready(function () {        
    $(".atf-submit").click(function () {
            atf_name = $(this).parent().parent().find(".user_table");
            atf_amount = $(this).parent().parent().find(".user_atf");
     runATFinsider();
    });
});
function runATFinsider(){
        var urlatfinsider = '/pcg/ATF/updateATF_window.php';
        var tagatfinsider = $("#insider_dialog");

        var promise1a = showUrlInDialogATFinsider(urlatfinsider);
        var promise2a = sendUpdateATFwindow();

        $.when(promise1a, promise2a).done(function(data1, data2) {

            tagatfinsider.html(data1[0]).dialog({
              width: '100%',
              modal: true
            }).dialog('open');
           //$('.updaterATF_outerbody').text(data2[0].atfName),
           //$('.updaterATF_outerbody').text(data2[0].atfAmount)
           //alert(data2[0].atfname);
           console.log(data2);
        });
    }
    function showUrlInDialogATFinsider(urlatfinsider)
    {
      return $.ajax({
        url: urlatfinsider
      });
    }
    function sendUpdateATFwindow()
{
  return $.ajax({
    data: {
        'atfName': atf_name.val(),
        'atfAmount': atf_amount.val()
    }
  });
} 
```

看看顶部，让我们说`atf_name`当 我做一个或它不存在`atf_amount`时的值？它没有定义，当我执行 console.log(data2) 时，代替值应该是表的大量 HTML 以及所有值的来源。我不知道为什么会发生这种情况，这没有任何意义，因为当我这样做时，我会得到正确的值？`'joe and 0'``console.log``alert(data2[0].atfName)``alert(aft_name.val())`

如果你能帮我一把，我将不胜感激。当对话框窗口已经打开并且打开另一个对话框窗口时，此代码也会运行。我不认为这应该是一个问题。

大卫

这是HTML：

```
<input type='hidden' class='user_table' value='$memusername'/>
<input type='hidden' class='user_atf' value='$memATF'/> 
```

这些在一张桌子里面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:15:32.870

不确定，但我已经完成了这样的 jQuery AJAX 返回值：

```
 $.ajax({
        type: "POST", 
        url: url, 
        data: 'string'
    }).done(function(returnVar) {
        /* Do something with returnVar*/
    }); 
```

老实说，我不知道这是否会有所帮助，但这是我个人使用的。

编辑：

AJAX 文件中的返回也必须发送出去。我主要处理 PHP 文件，所以我只做

`ECHO $myVariable;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:51:17.970

将此作为答案，因为我指出您不需要 ajax 调用来获取解决方案的值`atf_name`和`atf_amount`注释。为了尽量减少对代码的更改，我的建议是将更`sendUpdateATFwindow()`改为：

```
function sendUpdateATFwindow() { 
    return {'atfName': atf_name.val(), 'atfAmount': atf_amount.val()}; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:33:11.010

嘿伙计们，我想通了。我实际上需要创建一个单独的文件来返回发送的值，所以我只是创建了这个：

```
$name_ATF = trim( $_POST['atfName'] );
$amount_ATF = trim( $_POST['atfAmount'] );

$returnArray = array( 'atfName' => $name_ATF, 'atfAmount' => $amount_ATF);

echo json_encode($returnArray); 
```

工作得很好。感谢你们的辛勤工作！

大卫

# svn - SVN：无法提交？

> ID：14864129
> 
> 赞同：0
> 
> 时间：2013-02-13T22:08:01.020
> 
> 标签：svn, git-svn, commit

我正在尝试添加几个文件夹并提交。在项目的第一次迭代中，它确实有与我要添加的文件夹具有相同名称的文件夹。

当我这样做时`git add src`，它会告诉我`svn: warning: 'src' is already under version control`。

提交并没有将它们放在回购中。

我试过`git add src --force`了，我也不能提交，因为 svn 认为存储库没有改变。这里发生了什么？

注意：当前 repo 没有 src 目录，它只有一个 Makefile。

# ruby - api版本如何通知机型？

> ID：14864130
> 
> 赞同：0
> 
> 时间：2013-02-13T22:08:04.903
> 
> 标签：ruby, ruby-on-rails-3, api

目前，我使用`api-versions`gem 很好地创建 api 路由并在请求 HEAD 中包含版本信息。

但是，有时模型需要知道正在使用的 api 版本。例如，验证。假设需要在任何版本 >= 2 上验证用户名的存在，但在版本 < 2 上则不需要。

在 Controller 层，通过解析出相应的请求 HEAD 很容易检索 api 版本。但是将该版本号传达给模型的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:18:01.110

如何在模型类中定义一个伪属性，验证器有条件地执行

```
class SomeModel < ActiveRecord::Base
    attr_accessor :api_version
    validates_presence_of :username, :if => :api_version > 2
    ... 
```

然后从控制器中，在保存等之前在模型上设置 api_version

```
@someModel = SomeModel.new(params[:some_model])
@someModel.api_version = <<extracted from HEAD>>
@someModel.save! 
```

# python - 有谁知道 Python 中集合的顺序是如何决定的？

> ID：14864131
> 
> 赞同：4
> 
> 时间：2013-02-13T22:08:11.397
> 
> 标签：python, implementation, cpython, unordered-set

似乎确实存在一些一致性，即调用`set()`字符串似乎总是解析为相同的（非字母）顺序，并且两者

```
set([1,2,3]) & set([1,2,3,4]) 
```

和它乱七八糟的表弟

```
set([2,3,1]) & set([4,3,1,2]) 
```

会导致看起来井井有条`set([1,2,3])`。

另一方面，一些更活泼的东西，比如

```
from random import randint
set([randint(0,9) for x in range(3)]) 
```

有时会给出类似`set([9, 6, 7])`...

... 这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:16:29.073

您应该将集合视为**无序**集合

它们存储在哈希表中。

此外，随着您继续添加元素，散列将转移到更大的表中，因此顺序可能会发生巨大变化。

不能保证不同 Python 版本/实现的顺序相同。

# oauth - clojure oauth 和凭据

> ID：14864142
> 
> 赞同：8
> 
> 时间：2013-02-13T22:08:51.057
> 
> 标签：oauth, clojure, flickr

我需要一些有关[clojure 和 oauth](https://github.com/mattrepl/clj-oauth)的帮助。

我在最后一步卡住了：用凭据签署请求。

```
(def credentials (oauth/credentials consumer
                                    (:oauth_token access-token-response)
                                    (:oauth_token_secret access-token-response)
                                    :POST
                                    "http://twitter.com/statuses/update.json"
                                    {:status "posting from #clojure with #oauth"}))

(http/put "http://twitter.com/statuses/update.json" 
           :query-params credentials) 
```

那是来自github的例子。

现在，从 flickr API 我有这个测试网址：

```
http://api.flickr.com/services/rest/?method=flickr.people.getPhotos
&api_key=82d4d4ac421a5a22et4b49a04332c3ff
&user_id=93029506%40N07&format=json&nojsoncallback=1
&auth_token=72153452760816580-cd1e8e4ea15733c3
&api_sig=b775474e44e403a79ec2a58d771e2022 
```

我不使用推特...我使用 flickr api 并想获取用户的图片。

我现在的问题是：如何更改适合 flickr url 的凭据？我也很困惑，`:status`但是当我删除它时，我得到了一个错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T19:19:25.897

Twitter 示例使用 HTTP POST 方法，但对于 Flickr，我们需要 GET 和 flickr api。所以我们做

```
(def credentials (oauth/credentials consumer
                                (:oauth_token access-token-response)
                                (:oauth_token_secret access-token-response)
                                :GET
                                "http://api.flickr.com/services/rest/"
                                query-params)) 
```

在 twitter 示例中，我替换为`query-params`指定发布的内容。这是一个将被 url 编码为类似 `status=posting%20from%20%23clojure%20with%20%23oauth`. 相反，您提到的 API 的请求具有以下非 oauth 查询参数的映射：

```
(def query-params {:method "flickr.people.getPhotos" :format "json" :user_id "93029506@N07" :nojsoncallback 1}) 
```

现在我们要做的就是

```
(http/get "http://api.flickr.com/services/rest/" {:query-params (merge credentials query-params)}) 
```

# ios - 是否可以通过 Testflight 分发企业应用程序，而无需收件人创建帐户？

> ID：14864143
> 
> 赞同：4
> 
> 时间：2013-02-13T22:09:01.257
> 
> 标签：ios, testflight

我有一个企业应用程序要分发给数百名员工。我目前正在评估是否使用 Testflight。

我希望安装应用程序的过程尽可能快速和简单，但是尝试使用 Testflight 似乎人们必须先使用 Testflight 创建一个帐户才能安装应用程序，这是我宁愿避免的额外步骤。

用户是否可以安装托管在 Testflight 上的企业应用程序而无需先创建帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:38:09.530

目前没有，我们有意避免使用此类功能。如果测试人员决定共享安装链接，您将获得一个未经身份验证的链接。

如果您担心邀请 100 人的痛苦，让您的员工加入 TestFlight 的最快方法是使用招聘 URL ( [https://testflightapp.com/dashboard/team/recruitment/edit](https://testflightapp.com/dashboard/team/recruitment/edit) )。

# windows-7 - 如何通过批处理文件创建脚本，该脚本将卸载安装在 Windows 7 64 位或 32 位系统上的程序

> ID：14864144
> 
> 赞同：2
> 
> 时间：2013-02-13T22:09:07.237
> 
> 标签：windows-7, batch-file, windows-xp, uninstallation

我在一个小范围内。有问题的程序可以安装在程序文件目录（64 位）或 X86 路径中。该程序已安装在 200 多台机器上。我相当确定默认安装路径是 X86，因为这是默认安装路径。我不确定，必须涵盖这两种情况。安装它的原始系统管理员没有使用 .msi，所以我留下了我发现的“C:\Program Files\InstallShield 安装信息{78AC336D-25F6-4916-A711-2EA2F69E0319}\setup .exe”作为一个实用程序提供的命令，用于远程卸载我找到的所述应用程序。没有工作，我无法尝试将其推出，希望它能工作。

鉴于这个问题，有没有办法通过一个脚本来卸载这个程序，该脚本会检查程序文件和 X86 路径并根据位置卸载？或者，是否有一个脚本可以完全卸载程序，而无需担心 X86/程序的原始安装位置。我只需要在所有这些机器上卸载它。安装 .bat 很好。我不能做的只是通过 32 位或 64 位机器的脚本来卸载 X 应用程序的窗口。

我试过 MsiExec.exe /X{78AC336D-25F6-4916-A711-2EA2F69E0319} /quiet 没有成功。这次我可以尝试安装 .msi，但我迷路了，我的知识仅限于脚本或任何卸载脚本，用于告诉“最终用户”而不会混淆他们只需单击此处。我可以告诉他们去控制面板等..但他们会迷路....典型的。

鉴于它不是原始的.msi，关于如何编写此卸载脚本的任何想法，我不确定如何让某些东西正常工作？我对任何事情都持开放态度。我有两天的时间来解决这个问题，我处于恐慌模式......

任何关于代码的想法或帮助将不胜感激。

问候，布赖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:56:22.970

`wmic`可以调用卸载程序。我还没有尝试过，但我认为它可能会起作用。

```
wmic /node:computername /user:adminuser /password:password product where name="name of application" call uninstall 
```

如果您不确切知道程序调用自己的内容，请执行

```
wmic product get name | sort 
```

并寻找它。您还可以使用 SQL 通配符进行卸载。

```
wmic /node:computername /user:adminuser /password:password product where "name like '%j2se%'" call uninstall 
```

... 例如，将执行不区分大小写的搜索`*j2se*`并卸载“J2SE Runtime Environment 5.0 Update 12”。（请注意，在上面的示例中，`%j2se%`不是环境变量，而只是单词“j2se”，两端带有 SQL 通配符。如果您的搜索字符串可能与环境或脚本变量冲突，请使用双百分号指定文字百分号，例如`%%j2se%%`。）

`y/n`如果 wmic在完成卸载之前提示确认，请尝试以下操作：

```
echo y | wmic /node:computername /user:adminuser /password:password product where name="whatever" call uninstall 
```

...`y`在它询问之前将 a 传递给它。

我还没有测试过这个，但无论如何它值得一试。如果它在一台计算机上工作，那么您可以使用 for 循环遍历包含组织内所有计算机名称的文本文件，或将其放入域策略登录脚本中。

*   [进一步阅读 wmic](http://www.tech-recipes.com/rx/2947/windows_uninstall_application_command_line/)
*   [更多关于 wmic 的阅读](http://betanews.com/2011/01/14/wmic-the-best-command-line-tool-you-ve-never-used/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-25T17:13:29.143

假设您正在处理*Windows 7 x64*以及以前使用某种安装程序安装的东西，您可以打开*regedit*并搜索下面的键

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall 
```

（引用*32 位*程序）作为程序名称的一部分，或

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

（如果它实际上是一个 64 位程序）。

如果您在其中一个中找到与您的程序匹配的内容，则`UninstallString`该键中的内容通常会为您提供您正在寻找的确切命令（您可以在脚本中运行）。

如果您在这些注册表位置中找不到任何相关内容，则可能是通过解压缩文件“安装”了它。因为您提到通过*Control Panel*将其删除，所以我认为这可能不是这种情况；如果它在那里的程序列表中，它应该在我提到的注册表项之一中。

然后在*.bat*脚本中你可以做

```
if exist "c:\program files\whatever\program.exe" (place UninstallString contents here)
if exist "c:\program files (x86)\whatever\program.exe" (place UninstallString contents here) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T12:46:01.627

根据我的经验，要`wmic`在脚本中使用，您需要正确获取嵌套引用：

```
wmic product where "name = 'Windows Azure Authoring Tools - v2.3'" call uninstall /nointeractive 
```

引用查询和名称。但是 wmic 只会卸载通过 windows 安装程序安装的东西。

# java - 我如何获得 LdapAttributes

> ID：14864147
> 
> 赞同：3
> 
> 时间：2013-02-13T22:09:10.933
> 
> 标签：java, spring, ldap, spring-ldap, ldif

我正在尝试使用 Spring 将 ActiveDirectory 记录导出到 LDIF 格式的文件中。

我找到了很多关于*解析*LDIF 文件的信息，但关于导出到 LDIF 的信息却相对较少。使用 Spring 有一个`LdapAttributes`类，其`toString()`方法返回 LDIF 格式的字符串，但我首先看不到从哪里获取`LdapAttributes`实例。我没有看到任何东西`LdapTemplate`。

希望该框架提供了一种简单的方法来实现这一点，而不是我必须自己构建`LdapAttributes`对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:18:20.893

查看类似 unboundid LDAP SDK [https://www.unboundid.com/products/ldap-sdk/docs/javadoc/com/unboundid/ldif/package-summary.html](https://www.unboundid.com/products/ldap-sdk/docs/javadoc/com/unboundid/ldif/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:42:25.663

嗯，我想出了这个：

```
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;    
import org.springframework.ldap.core.AttributesMapper;
import org.springframework.ldap.core.DistinguishedName;
import org.springframework.ldap.core.LdapAttributes;

public class PersonMapper implements AttributesMapper {

    @Override
    public Object mapFromAttributes(Attributes attrs) throws NamingException {
        String dnValue = (String) attrs.get("distinguishedName").get();
        DistinguishedName dn = new DistinguishedName(dnValue);
        LdapAttributes ldapAttrs = new LdapAttributes(dn);
        for (NamingEnumeration<? extends Attribute> ne = attrs.getAll(); ne.hasMore(); ) {
            ldapAttrs.put(ne.next());
        }
        return ldapAttrs;
    }
} 
```

我不禁觉得必须有一些开箱即用的方法来做到这一点，尽管上述方法有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T02:57:19.747

```
LdapAttributes ldapAttributes = basic2LdapAttributes(result.getNameInNamespace(), result.getAttributes());

public static LdapAttributes basic2LdapAttributes(String distinguishedName, Attributes attributes) throws NamingException{
        LdapAttributes ldapAttributes = new LdapAttributes();
        ldapAttributes.setName(LdapUtils.newLdapName(distinguishedName));
        for (NamingEnumeration<? extends Attribute> nameEnumeration = attributes.getAll(); nameEnumeration.hasMore();) {
            ldapAttributes.put(nameEnumeration.next());
        }
        return ldapAttributes;
} 
```

# ssl - Kohana 3.3 在控制器中强制 SSL

> ID：14864149
> 
> 赞同：1
> 
> 时间：2013-02-13T22:09:19.353
> 
> 标签：ssl, controller, kohana

我有几个控制器。HTTPS 由网络服务器 (ligttpd) 本身重定向，但作为额外的安全检查，我希望 PHP 将特定控制器重定向到 https。

Kohana 是否包含检查 url 是否在 SSL 上运行并在需要时重定向它的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:52:24.713

找到我自己的答案:)

创建一个名为 URL 的类：

```
class URL extends Kohana_URL
{
    public static function SSL()
    {
        if (!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] == "") {
            $redirect = "https://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
            header("Location: $redirect");
        }
    }
} 
```

像这样在你的控制器中调用它：

```
URL::ssl(); 
```

请注意：仅使用上述方法是不安全的。您也应该通过服务器（Lighttpd/Nginx/Apache）重定向。

# matlab - Matlab中的连续视频录制，在内存上限上保存/重新启动，在标志上结束

> ID：14864151
> 
> 赞同：0
> 
> 时间：2013-02-13T22:09:21.753
> 
> 标签：matlab, image-processing

我想在 Matlab 中录制一个连续的视频，直到其他一些标志发生变化，允许 matlab 在视频采集期间继续执行其他任务（比如决定是否应该设置标志）。由于这些录音可能持续 3 小时以上，可能每小时关闭录音，写入文件 video_1，然后再录制一个小时并转储到 video_2，等等，只要未设置标志。但是，从我使用 Matlab 的图像处理工具箱看到的情况来看，您必须指定某种要捕获的帧数，或每次触发的帧数等。我不太确定如何继续。

我有一些录制视频的简单代码是：

```
% create video obj
video = videoinput('winvideo',1);

% create writer obj
writerObj = VideoWriter('output.avi');

% set video properties
video.LoggingMode = 'disk';
video.DiskLogger = writerObj;

% start recording video
start(video);

% wait
wait(video, inf)

% save video
close(video.DiskLogger);
delete(video);
clear video; 
```

但是，输出视频只有 0.3 秒长。我已按照以下教程将 30 秒的录制时间缩短为 3 秒的视频[，](http://www.mathworks.com/products/imaq/examples.html?file=/products/demos/shipping/imaq/demoimaq_AcquisitionRate.html)但我不知道如何让它连续播放。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:46:38.387

```
aviObject = avifile('myVideo.avi');   % Create a new AVI file
for iFrame = 1:100                    % Capture 100 frames
  % ...
  % You would capture a single image I from your webcam here
  % ...
  F = im2frame(I);                    % Convert I to a movie frame
  aviObject = addframe(aviObject,F);  % Add the frame to the AVI file
end
aviObject = close(aviObject);         % Close the AVI file 
```

来源：[如何在 MATLAB 中从网络摄像头录制视频？](https://stackoverflow.com/questions/1637589/how-do-i-record-video-from-a-webcam-in-matlab)

# jquery - Jquery .submit() 函数没有被调用

> ID：14864153
> 
> 赞同：-2
> 
> 时间：2013-02-13T22:09:25.197
> 
> 标签：jquery, html

这是jQuery代码。

```
$('#signinform').live('submit',function() {
    alert("Submitting");
    $("#signinbutton").click();
}); 
```

表格是这样的：

```
<form name="signinform" id="signinform" action="#" method="POST">
        <input type="text" class="rounded_login" name="studentid" id="studentid" placeholder="Student ID" required="required" maxlength="9 ">
        <input type="password" class="rounded_login" name="studentpassword" id="studentpassword" placeholder="SJSU One Password" required="required" tooltip="Password">
        <input type="hidden" name="signinmethod" id="signinmethod" value="manual">
        <div id="signinbutton">Sign In</div>
</form> 
```

点击事件工作得很好，但由于某种原因，提交没有被调用。我错过了什么？

PS：我已经尝试过 .live() 和 .submit() 函数。

**编辑**：哇！我想我没有让自己足够清楚！已经有代码或单击按钮/图像提交表单。

```
$("#signinbutton").live('click',function (e) {
}); 
```

我需要做的是，按回车键提交。那没有发生。此外，我无法添加提交输入，因为这会弄乱样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:11:53.710

如果您希望“登录” div 触发表单提交，请尝试更改：

```
$('#signinform').live('submit',function() {
    alert("Submitting");
    $("#signinbutton").click();
}); 
```

至

```
$('#signinbutton').on('click',function() {
    alert("Submitting");
    $("#signinform").submit();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/V7nQs/1/)**

正如 gdoron 提醒我注意的那样，`.live()`已弃用`.on()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:12:36.387

你应该做：

```
$("#signinform").trigger('submit'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:32:38.787

Be careful with setting events on forms. These could not work, if the form was hidden before.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:11:57.937

```
<div id="signinbutton">Sign In</div> 
```

这实际上不是一个提交按钮。

您可以向此按钮添加事件以使其直接执行提交事件，或者在其位置创建一个实际的提交按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T11:30:32.960

把你的提交功能放在里面。它应该工作。

```
$(document).ready(function () {

    $("#signinbutton").submit();

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T22:14:00.840

您应该点击提交，而不是相反。

```
$('#signinbutton').on('click',function() {
    $("#signinform").submit();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T22:14:45.243

您应该将您的 HTML 代码更正为以下内容

```
<form name="signinform" id="signinform" action="#" method="POST">
        <input type="text" class="rounded_login" name="studentid" id="studentid" placeholder="Student ID" required="required" maxlength="9 ">
        <input type="password" class="rounded_login" name="studentpassword" id="studentpassword" placeholder="SJSU One Password" required="required" tooltip="Password">
        <input type="hidden" name="signinmethod" id="signinmethod" value="manual">
       <input type="submit">
</form> 
```

您也在使用`.live()`不推荐使用的`.on()`. 如果您无法更改您的 HTML 代码，您可以使用 id **signinbutton**在您的 div 的点击处理程序中手动提交表单。

```
$('#signinbutton').on('click',function()){
 $('#signinform').trigger('submit');
} 
```

# objective-c - 来自整数的 NSData 字节

> ID：14864155
> 
> 赞同：0
> 
> 时间：2013-02-13T22:09:30.883
> 
> 标签：objective-c, nsdata, nsmutabledata

我有一个整数，值为 2。我将它附加到一个 NSMutableData 对象：

```
[data appendBytes:&intVal length:2]; 
```

数字 2 是我想要的 int 字节数。当我记录数据时，我想看到的是 <0002>（一个空字节后跟一个非空字节），但我得到的是 <0200>。

我错过了什么吗？字节的顺序和长度需要非常具体。这是用于直接套接字连接 API。我不确定我在这里做错了什么。也许我只是读错了。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:20:58.260

> 我错过了什么吗？

是的，您系统的字节序与您需要的不匹配。将其转换为小端或大端（POSIX C 库在`<netinet.h>`or`<inet.h>`标头中的某处具有用于此目的的函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:18:22.840

NSData 的描述方法以十六进制格式打印它的值。这意味着它需要 4 位数字来表示 2 个字节，每个字节可能映射 2^8=256 个不同的值，每个十六进制数字可能映射 16 个可能的值，所以 16x16x16x16 = 2^16，这正是您可以用 2 个字节映射的值.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T15:05:00.910

这是答案，它很好用！

```
uint16_t intVal = 2;
Byte *byteData = (Byte*)malloc(2);
byteData[1] = majorValue & 0xff;
byteData[0] = (majorValue & 0xff00) >> 8;
NSData * result = [NSData dataWithBytes:byteData length:sizeof(uint16_t)];
NSLog(@"result=%@",result); 
```

# java - Java 代码如何与现有的企业服务总线集成？

> ID：14864157
> 
> 赞同：0
> 
> 时间：2013-02-13T22:09:37.133
> 
> 标签：java, integration, esb

我有一个现有的 Java 软件，有人问我它是否可以与企业服务总线集成。Java 软件可以（或可以轻松修改为）调用 Web 服务、发送电子邮件、将项目添加到消息队列等。这是否意味着它可以与 ESB 集成，或者与 ESB 的集成要复杂得多？不幸的是，我没有关于特定 ESB 的任何信息，并且对 ESB 知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:48:42.897

### 是的，您可以将 Java 代码与 ESB 集成。

集成通常通过 SOAP Web 服务完成。

# java - 如何构建包含文件和子目录的可序列化 TreeModel？

> ID：14864168
> 
> 赞同：1
> 
> 时间：2013-02-13T22:10:42.587
> 
> 标签：java, swing, serialization, treemodel

我正在尝试`TreeModel`为 Java 应用程序构建一个。由于我需要对其进行序列化并通过 发送它`ObjectOutputStream`，因此我正在尝试使用 ，`DefaultTreeModel`因为它实现了`Serializable`接口。

好吧，我想我没问题。

**我的问题是**：现在，如何构建一个`DefaultTreeModel`包含目录（作为参数传递，`DefaultMutableTreeNode`我猜是？）及其所有文件和子目录？

我用 a 实现了这一点，`JTree`但它似乎不是可序列化的，所以现在我被卡住了，因为我无法理解文档示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:27:31.677

`File`is`Serializable`和 a `FileTreeModel`that implements`TreeModel`很简单，如此[处](https://stackoverflow.com/a/14837208/230513)所述。`File f`您可以使用以下代码遍历植根于树的树：

```
private void ls(File f) { 
    File[] list = f.listFiles();
    for (File file : list) {
        if (file.isDirectory()) ls(file);
        else handle(file);
    }
} 
```

还要考虑 Bloch 的建议，[第 75 条](http://my.safaribooksonline.com/9780137150021?portal=informit)，“不要在没有首先考虑是否合适的情况下接受默认的序列化形式”。

# c - “程序收到信号 SIGABRT，已中止” - 为什么？

> ID：14864169
> 
> 赞同：0
> 
> 时间：2013-02-13T22:10:46.213
> 
> 标签：c

请帮助我理解 - 为什么我会收到此运行时错误：

> *** 检测到堆栈粉碎***：
> 程序收到信号 SIGABRT，已中止。

对于以下代码：

```
#define WORD_SIZE   (sizeof(int))
#define FLOOR_MASK  0xfffffffc

static void SetVal(void* _block, int _size)
{
    *(int*)_block = _size;
}

void BufferInit(void* _buffer, size_t _totalSize)
{
  int alignedSize;

  assert(_buffer);

  /* align _totalSize to be WORD_SIZE multiple */
  alignedSize = _totalSize & FLOOR_MASK;

  /* mark end of buffer */
  SetVal(_buffer + alignedSize, END_VAL);
}

int main()
{
    Byte buffer[36];

    BufferInit(buffer, 37);

    return 0;
} 
```

PS：错误发生在运行结束时（在线`"return 0;"`）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:52:37.370

该`SetVal()`函数将 4 个字节写入您指定为结束的位置。那是：

```
BufferInit(buffer, 37);

... Leads to ... 

SetVal(_buffer + alignedSize, END_VAL);

... which does ...

*(int*)_block = _size; 
```

`alignedSize`是 36 (37 & ~3 = 36) [~3 = 0xFFFFFFFC]。偏移量 36 处的 4 个字节写入字节 36、37、38 和 39。由于您的缓冲区最初是 36 个字节长，因此它在您的缓冲区之外。要么将缓冲区更改为 40 字节长，要么将 37 更改为 33 [或更低的数字]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:19:24.490

愚蠢的错误..

我超出了缓冲区的大小：

```
alignedSize [= buffer size] = 36
bytes allocated for buffer:   0-35 
```

我正在更改 (buffer+36) = **buffer[36]**这超出了缓冲区的内存限制。

固定代码：

```
SetVal(_buffer + alignedSize - WORD_SIZE, END_VAL); 
```

# json - 如何在 RAd Studio 中解析 JSON 数组？

> ID：14864170
> 
> 赞同：4
> 
> 时间：2013-02-13T22:11:00.893
> 
> 标签：json, delphi, c++builder

我正在尝试解析以下 Json 文档：

```
[
  {"EventType":49,"Code":"234","EventDate":"20050202", "Result":1},
  {"EventType":48,"Code":"0120","EventDate":"20130201", "Group":"g1"}
] 
```

我使用以下代码：

```
TJSONObject* jsonread0 = (TJSONObject*) TJSONObject::ParseJSONValue(TEncoding::ASCII->GetBytes(Memo1->Lines->Text), 0);

for(int i=0;i<jsonread0->Size();i++)
{
    TJSONPair* pair = jsonread0->Get(i); 
```

此时，`pair.JsonValue`为NULL。我需要做什么才能读取这些值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T03:11:18.450

您没有正确转换 JSON 字符串，您必须转换为 TJSONArray，然后遍历元素。

试试这些样品

# 德尔福

```
{$APPTYPE CONSOLE}

uses
  DBXJSON,
  System.SysUtils;

Const
StrJson =
  '['+
  '{"EventType":49,"Code":"234","EventDate":"20050202", "Result":1},'+
  '{"EventType":48,"Code":"0120","EventDate":"20130201", "Group":"g1"}'+
  ']';

procedure ParseJson;
var
  LJsonArr   : TJSONArray;
  LJsonValue : TJSONValue;
  LItem     : TJSONValue;
begin
   LJsonArr    := TJSONObject.ParseJSONValue(TEncoding.ASCII.GetBytes(StrJson),0) as TJSONArray;
   for LJsonValue in LJsonArr do
   begin
      for LItem in TJSONArray(LJsonValue) do
        Writeln(Format('%s : %s',[TJSONPair(LItem).JsonString.Value, TJSONPair(LItem).JsonValue.Value]));
     Writeln;
   end;
end;

begin
  try
    ParseJson;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

# C++ 生成器

```
#include <vcl.h>
#include <windows.h>

#pragma hdrstop
#pragma argsused

#include <tchar.h>
#include <stdio.h>
#include <DBXJSON.hpp>
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    TJSONArray* LJsonArr = (TJSONArray*)TJSONObject::ParseJSONValue(
    BytesOf((UnicodeString)"[{\"EventType\":49,\"Code\":\"234\",\"EventDate\":\"20050202\", \"Result\":1},  {\"EventType\":48,\"Code\":\"0120\",\"EventDate\":\"20130201\", \"Group\":\"g1\"}]"),0);
    int size = LJsonArr->Size();
    for (int i = 0; i < size; ++i)
    {
      TJSONValue* LJsonValue = LJsonArr->Get(i);
      TJSONArray*  LJsonArr2 =  (TJSONArray*)LJsonValue;
      int size2 = LJsonArr2->Size();
        for (int j = 0; j < size2; ++j)
        {
          TJSONValue* LItem   = LJsonArr2->Get(j);
          TJSONPair* LPair = (TJSONPair*)LItem;
          printf("%s %s \n", (UTF8String )(LPair->JsonString->Value()).c_str(),  (UTF8String )(LPair->JsonValue->Value()).c_str());
        }
    }
    std::cin.get();
    return 0;
} 
```

这将返回

```
EventType : 49
Code : 234
EventDate : 20050202
Result : 1

EventType : 48
Code : 0120
EventDate : 20130201
Group : g1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:56:56.647

您的类型转换无效，因此您看到的是未定义的行为。空结果只是您可以从该代码中获得的众多可能结果*之一。*在这种情况下，`ParseJSONValue`函数应该返回 a `TJsonArray`，而不是 a `TJsonObject`。虽然这两个类都有`Get`方法，但它们是不可互换的。

数组的`Get`方法返回 a `TJsonValue`，而不是 a `TJsonPair`。对于此特定数据，您可以将值类型转换为，`TJsonObject`因为您的数据表示两个对象的数组。

使用`dynamic_cast`或 Delphi 的`as`运算符将一个类转换为另一个类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T07:56:22.713

dbExpress JSON 解析器被告知是重量级的，有时会出现问题。

也许您可以选择一些第 3 方解析器的数量，例如这显示读取数组：[http ://code.google.com/p/superobject/wiki/first_steps](http://code.google.com/p/superobject/wiki/first_steps)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T13:42:02.543

您还可以使用 C++Builder 的 JSonCBuilderBlog 库（免费和开源）从 JSON 字符串中获取数组：

```
UnicodeString JSONSource =
"[{\"EventType\":49,\"Code\":\"234\",\"EventDate\":\"20050202\", \"Result\":1},"
"{\"EventType\":48,\"Code\":\"0120\",\"EventDate\":\"20130201\",\"Group\":\"g1\"}]";

int           Type; 
UnicodeString Code;
UnicodeString Date;
int           Result;

TMetaObject MyArray;

MyArray.Decode(JSONSource);

for(int i=0; i < MyArray.Count(); i++)
{
    Type   = MyArray[i]["EventType"];
    Code   = MyArray[i]["Code"];
    Date   = MyArray[i]["EventDate"];
} 
```

语法非常简单，参考以下链接：[JSONCBuilderBlog](http://www.cbuilderblog.com/jsoncbuilderblog-class-library/)库。

# c++ - VS2010 C++调试应用程序如何处理异常

> ID：14864180
> 
> 赞同：0
> 
> 时间：2013-02-13T22:11:35.877
> 
> 标签：c++, visual-studio-2010, exception, exception-handling

首先感谢您阅读本文和任何建议。

如何调试应用程序如何处理异常。这是一个带有内置异常处理的遗留代码库，最近已转换为 64 位。遇到错误/异常时，整个系统会挂起。

在常规应用使用期间，这些冻结无法可靠地再现。然而，应用程序中有测试代码会抛出重现冻结的未处理异常。

在调试器下运行时，它显然会在异常上中断 - 例如访问冲突 - 但到目前为止，我无法找到一种基本上告诉调试器将其传递给应用程序的方法。使用“继续”或步进似乎只是反复告诉我存在访问冲突。使用 WinDbg 而不是 VS 2010 也无济于事。

问：在 VS2010 或 WinDbg 中是否有一些可用的低级技巧可以让我中断异常，然后将其真正传递给应用程序进行处理以调试应用程序如何处理它？

或者换一种说法：我希望 VS2010 / WinDbg 向我展示在 / 响应异常之后执行的应用程序代码，而不是异常本身。

旁注：现在的目标是防止系统挂起，需要对计算机进行硬重置。“应该”避免仅应用程序崩溃，并且可以接受确定性应用程序关闭。

再次感谢，

编辑：在考虑 WhozCraig 的评论后，将“冻结”改为“挂起”，这可能是一个更好的术语。无论哪种方式，系统都不会响应任何用户交互 - 唯一的缓解是硬重置。

# java - 如何避免由于 I/O 错误导致的 java.sql.SQLException：连接重置？

> ID：14864184
> 
> 赞同：4
> 
> 时间：2013-02-13T22:11:53.950
> 
> 标签：java, sql, sql-server, tomcat6, sqlexception

SQL Server 数据库重新启动后，我的 Tomcat 6 Spring Web 应用程序在第一次尝试查询数据库时收到 SQL 异常。注意：Tomcat 6 在 SQL Server 重启期间继续运行，我正在使用 myBatis。例外情况如下：

org.springframework.dao.DataAccessResourceFailureException：查询数据库时出错。原因：java.sql.SQLException：I/O 错误：连接重置

任何后续查询都可以正常执行（无一例外）。如何防止第一次查询出现此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:51:25.617

在将连接提供给您的应用程序之前设置您的池以测试连接

在您的数据库池连接中使用 testOnBorrow=true 和（例如）validationQuery="select 1"

# ruby - 在 Capybara-Webkit 中显示 @font-face 字体

> ID：14864185
> 
> 赞同：7
> 
> 时间：2013-02-13T22:11:55.263
> 
> 标签：ruby, capybara, font-face, capybara-webkit

当我使用 capybara-webkit 测试我的网站并截屏时，CSS 中的 @font-face 声明被忽略。

这尤其糟糕，因为我使用的是 FontAwesome，因此页面在真实浏览器中的显示方式会有很大差异。

如何重现：[https ://gist.github.com/anonymous/4948827](https://gist.github.com/anonymous/4948827)

输出：http: [//i.imgur.com/5lsrleY.jpg](http://i.imgur.com/5lsrleY.jpg)

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T12:20:36.383

一些研究表明，完全可以在 Capybara-Webkit 中呈现自定义字体，与使用 PhantomJS 相同。这个[PhantomJS 论坛帖子](http://code.google.com/p/phantomjs/issues/detail?id=247)确定了问题。快速总结：

1.  SVG 字体效果最好。
2.  OTF 字体往往不起作用。
3.  它应该使用 Qt5 修复，因此请检查您构建的 Qt 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T22:38:57.547

根据构建的版本`qt`，`capybara-webkit`webkit 需要将非 localhost url 列入白名单。这包括对外部资产（如字体）的元引用。

要在全局范围内实现这一点，请将其添加到 rspec 配置块中的 spec_helper.rb 中：

```
config.before(:each) do
  page.driver.allow_url("the-domain-name.com")
end 
```

如果你已经有一个 before :each ，只需把它扔在那里。`allow_url`也接受一个字符串数组。

为此，我在您的要点中发表了评论。

# .net - 分配给 Excel.Application.ActivePrinter 时出现 COMException

> ID：14864189
> 
> 赞同：1
> 
> 时间：2013-02-13T22:11:59.990
> 
> 标签：.net, vb.net, excel, com, comexception

我有一个函数，我向其中传递了一个 Microsoft.Office.Interop.Excel.Application 实例。该功能使用 Windows 的内置传真打印机或 Microsoft XPS Document Writer，将文件保存为 tiff 图像。

但是，当我尝试分配给应用程序的 ActivePrinter 属性时，会抛出带有以下消息的 COMException：

> HRESULT 异常：0x800A03EC

这是代码：

```
'Save the current default printer
Dim strDefaultPrinter As String = excelApp.ActivePrinter 

'Assign printer string constant to ActivePrinter - throws exception
excelApp.ActivePrinter = FAX_PRINTER

excelApp.ActiveWorkbook.PrintOutEx(, , , , , True, "c:\RestOfFilePath...") ' Print to file = true

'Reset the default printer
excelApp.ActivePrinter = strDefaultPrinter 
```

使用的打印机都被确认为已安装/在注册表中。采用 Word 应用程序类的类似函数可以正常工作。我对 COM 相关的东西还很陌生，我觉得这可能只是我与 excel 相关的无知在起作用，但是在搜索 google/stackoverflow 时我几乎找不到任何与此相关的东西，除了一两个旧的、未回答的线程。有一些与大量数据/大范围有关，但与 ActivePrinter 属性无关

编辑 - 答案的简要总结，在 M Patel 的链接中有详细说明：

Excel 对设置它的 ActivePrinter 属性很挑剔。它不仅需要打印机名称，还需要打印机和端口，例如“Fax on Ne01:”。这个端口应该可以从注册表中获得，或者在：

> HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\Devices

或者

> HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Devices

使用链接中详述的方法，或者在我的情况下使用 Microsoft.Win32.Registry.GetValue()。后者将返回类似于“winspool,Ne01:”的内容。以“Fax on Ne01:”的方式将该字符串的最后一部分连接到打印机名称上，可以毫无例外地设置 ActivePrinter 属性。

我还应该注意到我的问题发生在 excel 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-01T15:19:58.280

我在使用 excel interop 打印 excel 文档时遇到了同样的异常。

使用 MS Word：-

```
document.Application.ActivePrinter = "Brother MFC.. Printer"; // Works without exception 
```

但是使用 MS Excel :-

```
document.Application.ActivePrinter = "Brother MFC.. Printer"; // throws COM exception 
```

以下是使用 office interop 打印任何 office（MS Word、MS Excel、PS Powerpoint）文档的通用功能。

```
 void PrintToPrinter(dynamic app, dynamic document, string printer, int numberOfCopies)
    {
        bool PrintToFile = false;

        // Trying to print document without activation throws print exception
        document.Activate();

        // The only way to change printer is to set the default printer of document or of application
        // Remember the active printer name to reset after printing document with intended printer
        oldPrinterName = document.Application.ActivePrinter;

        for (int retry = 0; retry < retryLimit; retry++)
        {
            try
            {
                if (!GetActivePrinter(document).Contains(printer))
                {
                    try
                    {
                        document.Application.ActivePrinter = printer;
                        docPrinterChanged = true;                            
                    }
                    catch (Exception)
                    {
                        try
                        {
                            app.ActivePrinter = printer;
                            appPrinterChanged = true;
                        }
                        catch (Exception)
                        {
                            continue;
                        }
                    }
                }
                object oMissing = System.Reflection.Missing.Value;
                document.PrintOut(
                   true,            // Background
                   false,           // Append overwrite
                   oMissing,        // Page Range
                   oMissing,        // Print To File - OutputFileName
                   oMissing,        // From page
                   oMissing,        // To page
                   oMissing,        // Item
                   numberOfCopies,  // Number of copies to be printed
                   oMissing,        //
                   oMissing,        //
                   PrintToFile,     // Print To file
                   true             // Collate
                   );
                break;
            }
            catch (Exception)
            {
                continue;
            }
        }
        try
        {
            if(docPrinterChanged)
                document.Application.ActivePrinter = oldPrinterName;
            else if(appPrinterChanged)
                app.ActivePrinter = oldPrinterName;   
        }
        catch (Exception)
        {
        }
    }

    private static string GetActivePrinter(dynamic document)
    {

        string activePrinter = document.Application.ActivePrinter;

        if (activePrinter.Length >= 0)
            return activePrinter;
        return null;
    } 
```

将上述功能用于 MS Excel 时，我会更新打印机名称，如下所示。从 MS Excel 实例将打印机名称传递给上述函数时，我使用

```
 bool IFilePrint.PrintFile(string fullFileName, string printerName, int numberOfCopies)
    {

        // .......

        Excel.Workbook document = null;
        try
        {
            document = this.Application.Workbooks.Open(fullFileName);
        }
        catch
        {
            document = null;
        }

        string portNumber = null;

        // Find correct printerport
        using (RegistryKey key = Registry.CurrentUser.OpenSubKey(fullFileName))
        {
            if (key != null)
            {
                object value = key.GetValue(printerName);
                if (value != null)
                {
                    string[] values = value.ToString().Split(',');
                    if (values.Length >= 2) port = values[1];
                }
            }
        }

        // Get current concatenation string ('on' in en, 'auf' in de, etc..)
        var split = this.Application.ActivePrinter.Split(' ');
        if (split.Length >= 3)
            printerName = String.Format("{0} {1} {2}", printerName, split[split.Length - 2], port);

        PrintToPrinter(this.Application, document, printerName, numberOfCopies);

        // ...........
        }
        catch (Exception)
        { }
        result = true;   
        return result;
    } 
```

可以对此进行进一步检查：

1) 使用 PrinterSettings 类检查目标打印机是否存在。

2) （打印到文件）检查预期的打印选项是否是 To PDF/ To XPS / FAX 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:45:17.740

也许下面的链接会有所帮助？看起来您分配给 ActivePrinter 属性的名称的格式很重要。

[http://netindonesia.net/blogs/jimmy/archive/2011/02/25/how-to-change-the-active-printer-to-specific-printer-in-excel-using-net-and-how- the-heck-can-i-find-the-right-printer-name-and-port-combination-that-excel-wants.aspx](http://netindonesia.net/blogs/jimmy/archive/2011/02/25/how-to-change-the-active-printer-to-specific-printer-in-excel-using-net-and-how-the-heck-can-i-find-the-right-printer-name-and-port-combination-that-excel-wants.aspx)

# sql - SQL Server 数据库名称参考

> ID：14864192
> 
> 赞同：1
> 
> 时间：2013-02-13T22:12:05.963
> 
> 标签：sql, database, sql-server-2008, tsql, synonym

您好 SQL Server 专家，

我有一个奇怪的问题，我希望得到一些关于潜在解决方案的反馈： 我正在使用一个需要 ODBC 连接到现有 SQL 数据库的应用程序。但是，数据库的名称中包含破折号（“-”），这会导致应用程序出现语法错误（显然这不是一项出色的开发工作，但我对此无能为力）。

作为该问题的临时解决方案，我创建了数据库的副本并将其重命名为不带破折号。这个目标数据库只用于特定的任务并且不经常更新，但是它每隔几个月就会更新一次，这意味着我必须定期进入并刷新它。我期待开发人员现在能提供解决方案，但他们不合作。

我的问题是：这个问题是否有一些解决方案不需要我刷新我的数据库副本？我应该提到，重命名原始数据库不是一种选择。我是否应该设置一个 SQL 作业来定期将目标数据库还原到我的副本中？

同义词是一种可能的解决方案吗？

谢谢！

编辑：有几个人指出了方括号的使用——这不是一个选择。当我尝试使用 DB Name 字段中的括号时，应用程序 GUI 给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:24:33.757

**主要黑客警报**- 不要为数据库创建同义词，而是为其中的所有内容创建同义词！

如果您的应用只需要访问[synonyms](http://msdn.microsoft.com/en-us/library/ms177544.aspx)支持的对象，您可能*会*创建另一个名称更好的数据库，并用原始数据库对象的同义词填充它：

```
create database MyDatabase;
go
use MyDatabase;
go
create synonym [dbo].[MyTable1] for [My-Database].[dbo].[MyTable1];
create synonym [dbo].[MyView2] for [My-Database].[dbo].[MyView2];
create synonym [dbo].[MyProc3] for [My-Database].[dbo].[MyProc3];
... 
```

这里有一些生成脚本可以帮助解决这个问题：

```
declare @OldDbName sysname = 'My-Database'
select 'create synonym ' + quotename(schema_name(schema_id)) + '.' + quotename(name) + ' for '
    + quotename(@OldDbName) + '.' + quotename(schema_name(schema_id)) + '.' + quotename(name) + ';'
from sys.objects
where schema_name(schema_id) not in ('sys')
    and type in ('AF', 'FN', 'FS', 'FT', 'IF', 'P', 'PC', 'RF', 'TF', 'U', 'V', 'X') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:15:46.193

您没有提供使用 ODBC 连接的上下文，但您知道当数据库或表包含破折号时，您可以在 SQL 或连接字符串中使用方括号 [My-Database] 括起来的数据库名称？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:16:14.737

我不确定这是否与您的特定上下文直接相关，因为您没有指定这个......但是，您应该尝试将数据库名称包装在方括号中，如此处所述；

[http://joseph.randomnetworks.com/2006/09/29/sql-server-escaping-the-database-name/](http://joseph.randomnetworks.com/2006/09/29/sql-server-escaping-the-database-name/)

> 要对包含空格、连字符 (“-”) 或任何其他特殊字符的数据库名称进行转义，数据库名称必须用括号括起来，如下面的示例所示。在选择也是保留字（例如“primary”）的数据库名称时，也必须应用此技术。

```
$conn = mssql_connect('SQLSERVERHOST', 'username', 'password');
   mssql_select_db('[database-name]', $conn); 
```

# android - 从点开始绘制文本？

> ID：14864193
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:07.820
> 
> 标签：android

由于 canvas.drawText(String text, float x, float y, Paint paint); 用 x 和 y 的中间坐标绘制它，有没有办法从一个点开始绘制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:19:31.807

这应该可以解决问题：

```
Paint paint = new Paint();
paint.setTextAlign(Align.LEFT);
canvas.drawText(text,x,y,paint); 
```

（[来源](http://developer.android.com/reference/android/graphics/Paint.html#setTextAlign%28android.graphics.Paint.Align%29)）

# refresh - jqplot 重新绘制和重新校准轴和范围

> ID：14864194
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:12.613
> 
> 标签：refresh, jqplot

你如何让 jqplot 像在初始图上一样调整最小值和最大值以及范围？现在它重新绘制，但新数据消失在屏幕上。

```
<body>
<input type=button onClick=replot() value=replot><br>
    <div id="chart1" style="height:400px;width:600px; "></div>

</body>

</html>

<script>
var plot1;
function replot(){
alert(plot1);
alert(plot1.data);
plot1.series[0].data=[[0,1],[0,2],[1,4]];
alert(plot1.data);
plot1.replot(); 
}

  // Some simple loops to build up data arrays.
  var cosPoints = [];
  for (var i=0; i<2*Math.PI; i+=0.4){
    cosPoints.push([i, Math.cos(i)]);
  }

$(document).ready(function(){
  plot1 = $.jqplot('chart1', [cosPoints], {
      title: 'Google, Inc.'
       });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:28:31.243

经过一番调查，我发现了以下修复

```
plot1.replot( { resetAxes: true } ); 
```

现在它起作用了。

# matlab - 替换矩阵中的所有数字

> ID：14864196
> 
> 赞同：3
> 
> 时间：2013-02-13T22:12:14.793
> 
> 标签：matlab, matrix, replace

有两个矩阵；第一个是我的输入矩阵

![在此处输入图像描述](../Images/dbe54b630fb50f60e3dbf719f399e958.png)

第二个（“重命名矩阵”）用于替换第一个的值

![在此处输入图像描述](../Images/6fbfa1aab7d1628ec76c271892bf64da.png)

也就是看重命名矩阵；701 必须替换为 1,...,717 必须替换为 10 等.. 这样输入矩阵就变成了这样

![在此处输入图像描述](../Images/8878a120b37b87246f23467e7c1fa505.png)

这 ？值已定义，但我没有放它们。输入矩阵的第二列已经排序（从上到下的升序），但值不是连续的（没有“710”：见第一张图片）。

问题是如何从前两个中获取输出矩阵（最后一张图片）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:14:46.590

在我看来，它正在为稀疏矩阵解决方案而尖叫。在 matlab 中，您可以使用以下命令创建一个稀疏矩阵：

```
SM = sparse( ri, ci, val ); 
```

其中 ri 是非零元素的行索引，ci 是相应的列索引，val 是值。

让我们调用您的输入矩阵`IM`和查找矩阵`LUM`，然后我们构造稀疏矩阵：

```
nr = size(LUM, 1);
SM = sparse( ones(nr, 1), LUM(:, 1), LUM(:, 2) ); 
```

现在我们可以在一行中得到你的结果：

```
newMatrix = reshape(SM(1, IM), size(IM)); 
```

几乎是魔法。

我今晚没有机会检查这个 - 但如果它不能完全按照描述的那样工作，它应该真的很接近......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:30:10.220

如果第一列中的值都出现在第二列中，并且您想要的只是将第二列中的值替换为`1..n`并相应地更改第一列中的值，您可以通过简单的调用来完成所有这些操作`ismember`：

```
%# define "inputMatrix" here as the first array in your post

[~,newFirstColumn] = ismember(inputMatrix(:,1),inputMatrix(:,2)); 
```

要创建输出，您可以编写

```
outputMatrix = [newFirstColumn,(1:length(newFirstColumn))']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:31:31.057

如果`M`是原始矩阵并且`R`是重命名矩阵，这是您的操作方法

```
N = M;

for n = 1:size(M,1)
    N(find(M==R(n,1))) = R(n,2);
end 
```

请注意，在这种情况下，您将`N`使用重命名的值创建一个新矩阵。如果你愿意，你不必这样做。

# image - Visual Studio 2012 - Xaml 中的新古董错误

> ID：14864198
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:21.797
> 
> 标签：image, xaml, .net-4.0, visual-studio-2012, uri

我将 Visual Studio 2012 与 .NET 4.0 (C#) 一起使用。现在，我在 Xaml 中添加了一个图像：

```
<Image Source="/PPPos.Common.Images;component/Application/Pos.jpg" Stretch="Fill" /> 
```

Image Pos.jpg 作为资源包含在引用的程序集 PPPos.Common.Images.DLL 中。

Visual Studio 2012 现在给了我错误列表中的休闲异常：

> 错误 2 找不到路径“C:\PPPos.Common.Images;component\Application\Pos.jpg”的一部分。

但是我可以毫无问题地编译源代码，并且在我运行应用程序时会显示图像。这也是 Visual Studio 2012 的新增功能 - Visual Studio 2010 的 ErrorList 中没有错误消息。

有人有想法，可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T16:36:26.477

经过长时间的搜索，我找到了解决方案

```
<Image Source="pack://application:,,,/PPPos.Common.Images;component/Application/Pos.jpg" Stretch="Fill" /> 
```

但是我仍然不知道为什么在 VS2013 中会出现这种情况。任何解释将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T20:28:20.483

如果您在 VS2012 和 VS2013 中为 Source 值添加前缀“pack://application:,,”，则适用于我。但我已将此问题作为错误报告给 Visual Studio 团队，因为与 VS2010 相比，它是一个新的坏功能，您不必添加此前缀。为了兼容性，Visual Studio 团队应该修复它。

# javascript - 使用 JavaScript 在每一行中查找模式

> ID：14864200
> 
> 赞同：1
> 
> 时间：2013-02-13T22:12:24.633
> 
> 标签：javascript, regex

假设我有以下字符串

```
def name1
 toSomething

def name2 
  toSomethingElse 
```

我怎么能找到`name1`和`name2`。

使用`string.match(/(?:def) (.*)/)`给了我：

```
name1
 toSomething

def name2 
  toSomethingElse 
```

那么如何逐行搜索字符串呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:14:53.707

您可以尝试：

`/(?:def)\s+([^\s]+)/g`

在第一组中，您将拥有所需的东西（`name1`等）。

见这里：[http ://regex101.com/r/rH0yH8](http://regex101.com/r/rH0yH8)

如何运行它的示例：

```
var s = "def name1\ntoSomething\n\ndef name2 \ntoSomethingElse"
var re = /(?:def)\s+([^\s]+)/g

while (x = re.exec(s)) {
    alert(x[1])
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:17:05.810

```
/^def (.*)/gm 
```

会做的。该`g`标志匹配每个实例，并且该`m`标志导致在`^`一行的开头而不是仅在输入的开头匹配。

使用`.exec`，您可以循环并一次获得一个结果。

```
var myString = 'def foo\n  boo\n\ndef bar\n  far\n';
for (var re = /^def (.*)/gm, match; (match = re.exec(myString));) {
  alert(match[1]);
} 
```

或者您可以`.match`在字符串上使用以在一个数组中获取所有结果，但这不会为您提供捕获组。

```
var myString = 'def foo\n  boo\n\ndef bar\n  far\n';
var re = /^def (.*)/gm;
var matches = myString.match(re); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:14:46.413

您的正则表达式应该只在第一行给您匹配，因为`.`不匹配换行符。

就是说试试`/(?:def)\s+(\S*)/`

# java - Android Froyo 中未显示通知

> ID：14864201
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:30.027
> 
> 标签：java, android, android-2.2-froyo

我正在尝试运行以下内容，该内容来自互联网教程：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // Prepare intent which is triggered if the
    // notification is selected

    Intent homeIntent = new Intent(Intent.ACTION_MAIN);
    homeIntent.addCategory(Intent.CATEGORY_HOME);
    //Intent intent = new Intent(this, ReceiveAndGoHome.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, homeIntent, 0);

    // Build notification
    // Actions are just fake
    Notification noti = new NotificationCompat.Builder(this)
    .setContentTitle("Fraz Go Home!!!")
            .setContentTitle("Fraz Go Home!!!")
            .setContentText("Fraz Go Home!!!")
            .setContentIntent(pIntent)
            .addAction(R.drawable.ic_launcher, "Call", pIntent)
            .addAction(R.drawable.ic_launcher, "More", pIntent)
            .addAction(R.drawable.ic_launcher, "And more", pIntent).build();

    NotificationManager notificationManager = 
      (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    // Hide the notification after its selected
    noti.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(25, noti); 

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}
} 
```

当我在 froyo AVD 中运行上述内容时，我根本没有看到通知出现 - 我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:22:04.540

你忘了设置小图标。添加这个：

```
.setSmallIcon (R.drawable.ic_launcher) 
```

在你`NotificationCompat.Builder`的方法链中的某个地方。

当然，启动器可绘制是我在那里使用的，因为它就在手边，您需要为正确的 UI 制作实际的通知图标。这只是为了演示您需要的方法调用。

[Android 文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)概述了显示通知所需的内容：

> **所需的通知内容**
> 
> Notification 对象*必须*包含以下内容：
> 
> • 一个小图标，由 setSmallIcon() 设置
> 
> • 标题，由 setContentTitle() 设置
> 
> • 详细文本，由 setContentText() 设置

# c - 为什么我的杀毒软件把这段代码称为病毒？

> ID：14864202
> 
> 赞同：-3
> 
> 时间：2013-02-13T22:12:30.317
> 
> 标签：c

我的防病毒软件将此来源的已编译“.exe”识别为病毒“Gen: Variant:Graftor”。谁能解释为什么？

```
void main()
{
 float x=3.0/7.0;
 double y=3.0/7.0;
 int a= (x==y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:17:10.140

好吧，非托管/本机程序可能会带来安全风险，并且您的防病毒软件可能会这样标记。防病毒软件使用启发式算法 - 因此算法是近似的，它们倾向于采用“尽力而为”的想法，并且在防病毒软件的情况下，像您的样本这样的“误报”比遗漏实际病毒更可取。

另一种可能性是您编译程序的方式，有很多编译器优化，有些与安全性有关 - 所以您的程序随机化内存的某些部分等。也许防病毒软件会查看 C 程序的编译方式，而您的则没有安全标志打开了吗？唔...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:18:01.467

关于通用检测

与更传统的检测（也称为签名或单文件检测）不同，通用检测不会识别唯一或单个恶意程序。相反，通用检测寻找广泛适用的代码或行为特征，表明文件可能是恶意的，因此单个通用检测可以有效地识别数十个甚至数百个恶意软件。

这是一个误报。由于当今恶意软件和用于恶意软件和合法软件的文件压缩/保护实用程序的复杂性，这些有时会出现在每个防病毒产品中。

# fonts - “Web 字体”是否实际重新设计用于屏幕显示或

> ID：14864203
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:33.933
> 
> 标签：fonts, font-face, eot

最近大量的“Web 字体”是否可用于@font-face 对原始字体的实际重新设计以增强屏幕显示，或者它们只是转换为 .eot 格式，在这种情况下，它们在正常正文大小下可能看起来很糟糕？

注意我正在考虑 Linotype 和 Adob​​e 等提供的官方字体版本。

# c# - 使用索引在列表中查找值？

> ID：14864205
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:43.700
> 
> 标签：c#, list

```
List<String> hello = new List<String>();

hello.Add("red");
hello.Add("blue"); 
```

如何使用索引搜索此列表以获取`"red"`哪个列表`0`？我尝试过使用很多不同的方法，但都失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:52:57.717

如果我理解你的问题，[`.FindIndex Method`](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)

```
List<String> hello = new List<String>();

hello.Add("red");
hello.Add("blue");

var index = hello.FindIndex(c => c == "red");
var word = hello[index]; //<-- get the word 
```

最后使用[`.ElementAt Method`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)

```
var word = hello.ElementAt(0); 
```

# ruby-on-rails - Rails 获取关联模型

> ID：14864209
> 
> 赞同：0
> 
> 时间：2013-02-13T22:12:55.450
> 
> 标签：ruby-on-rails, ruby, model, belongs-to

我有一个与同一模型有两个关联的模型：

```
class Mail < ActiveRecord::Base
  belongs_to :user, :class_name => 'UserFrom', :foreign_key => 'user_from'
  belongs_to :user, :class_name => 'UserTo', :foreign_key => 'user_to'
end 
```

当我在索引操作中运行以下代码时，它没有得到正确的关联模型，有什么建议吗？

```
@mails = Mail.where('user_to = ?', current_user.id) 
```

在每一行上使用`debug`数据时，它只显示：

```
---
- !ruby/object:Mail
  attributes:
    id: 1
    created_at: 2013-02-13 21:17:41.962000000 Z
    updated_at: 2013-02-13 21:17:41.962000000 Z
    user_to: 1
    user_from: 2
    subject: Testing
    body: Mail body blah blah blahhh
    read:
    read_at: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:18:22.970

该`:class_name`选项很好地告诉了 Rails……类名。在这里（我假设）您没有一个名为 UserFrom 或 UserTo 的类。您在 app/models 中有一个名为 User 的类。

```
class Mail < ActiveRecord::Base
  belongs_to :user_from, :class_name => 'User', :foreign_key => 'user_from'
  belongs_to :user_to,   :class_name => 'User', :foreign_key => 'user_to'
end 
```

我将假设外键设置正确，并且它们都包含用户 ID，即使它们没有`_id`后缀。

至于`@mails`，您的查询应该有效。但是，如果您`has_many :mails`在用户上声明关联会更容易。这将允许您执行类似`current_user.mails`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:18:42.730

你不能有同名的关系。你必须重命名你的关系，这是一个例子：

```
class Mail < ActiveRecord::Base
  belongs_to :sender, :class_name => 'User', :foreign_key => 'user_from'
  belongs_to :receiver, :class_name => 'User', :foreign_key => 'user_to'
end 
```

我还建议您重命名外键，例如“sender_id”和“receiver_id”，以提高可读性。

用法：

```
@mails = Mail.where(sender: current_user) 
```

# php - 使用 php 和 htaccess 镜像网站的永久 URL 掩码

> ID：14864212
> 
> 赞同：0
> 
> 时间：2013-02-13T22:13:18.117
> 
> 标签：php, mod-rewrite, url-rewriting, dns, mirroring

首先假设我有**www.domain.com**作为客户端站点和用户登录并做他想做的所有事情（站点是主要的，他使用 POST 方法登录和其他事情，如果登录成功，则使用 HEADER 重定向）但是我不希望用户 在输入 **www.name.com/dashboard.php**以查看来自**www.domain.com/dashboard.php的内容时看到我想要的原始****www.domain.com** ，但他的 URL 栏显示**www.name.com/ dashboard.php** ..和其他所有可以有原始**www.domain.com**的页面一样， 我找到了这个网站： [http ://www.htmlremix.com/css/permanent-url-masking-for-mirroring-website-using](http://www.htmlremix.com/css/permanent-url-masking-for-mirroring-website-using-php-and-htaccess) [-php 和 htaccess](http://www.htmlremix.com/css/permanent-url-masking-for-mirroring-website-using-php-and-htaccess) ********Adn 使用脚本，但何时输入用户登录细节注意发生！只是主页重新加载。我尝试了所有我认为可能导致问题的方法，但没有找到解决方法..所以请帮助我！谢谢分配 PS如果有一些更好的方法我可以使用也将帮助我！********

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:45:46.293

这不能用 htaccess 文件来实现。你需要不同的东西。可能的解决方案可能是：apache mod proxy，因此您可以通过该 url 代理所有内容。另一种方式可能是一个 php 编写的某种代理。使用 curl 或远程配置的 fopen。

但请注意同时发送发布数据和 cookie，否则如果基于 cookie，则无法处理用户会话。

如果两个域都在同一台服务器上，您可以使用 apache/nginx 中的虚拟主机配置轻松设置它，无论您使用什么。******

# macros - 如何比较宏中的日期值？

> ID：14864217
> 
> 赞同：0
> 
> 时间：2013-02-13T22:13:45.303
> 
> 标签：macros, sas, sas-macro, do-loops

这是我正在运行的宏....

```
%macro ControlLoop(ds);
            %global dset nvars nobs;
            %let dset=&ds;
            /* Open data set passed as the macro parameter */
            %let dsid = %sysfunc(open(&dset));
      /* If the data set exists, then check the number of obs ,,,then close the data set */
        %if &dsid %then %do;
              %If %sysfunc(attrn(&dsid,nobs))>0 %THEN %DO;;
                        %local dsid cols rctotal ;
                        %let dsid = %sysfunc(open(&DS));     
                        %let cols=%sysfunc(attrn(&dsid, nvars)); 
                    %do %while (%sysfunc(fetch(&dsid)) = 0);  /* outer loop across rows*/
                                        /*0:Success,>0:NoSuccess,<0:RowLocked,-1:eof reach*/

       %If fmt_start_dt<=&sysdate9 and fmt_end_dt>=sysdate9 %then %Do;
                            %do i = 1 %to &cols; 
        %local v t;   /*To get var names and types using 
                varname and vartype functions in next step*/
                                %let v=%sysfunc(varname(&dsid,&i)); /*gets var names*/
                                %let t = %sysfunc(vartype(&dsid, &i));  /*gets variable type*/
                                %let &v = %sysfunc(getvar&t(&dsid, &i));/*To get Var values Using 
                                                            GetvarC or GetvarN functions based on var data type*/
                            %end;
                            %CreateFormat(dsn=&dsn, Label=&Label, Start=&Start, fmtName=&fmtName, type=&type);
                        %END;
                        %Else %put ###*****Format Expired*****;
                    %END;
              %END;
              %else %put ###*****Data set &dset has 0 rows in it.*****;

              %let rc = %sysfunc(close(&dsid));
           %end;
         %else %put ###*****open for data set &dset failed - %sysfunc(sysmsg()).*****;
        %mend ControlLoop;

        %ControlLoop(format_control); 
```

**格式控制数据：**

```
DSN :$12\.  Label :$15\. Start :$15\. fmtName :$8\. type :$3\. fmt_Start_dt :mmddyy. fmt_End_dt :mmddyy.;
ssin.prd prd_nm prd_id mealnm 'n' 01/01/2013 12/31/9999
ssin.prd prd_id prd_nm mealid 'c' 01/01/2013 12/31/9999
ssin.fac fac_nm onesrc_fac_id fac1SRnm 'n' 01/01/2013 12/31/9999
ssin.fac fac_nm D3_fac_id facD3nm 'n' 01/01/2013 12/31/9999
ssin.fac onesrc_fac_id D3_fac_id facD31SR 'n' 01/01/2013 02/01/2012
oper.wrkgrp wrkgrp_nm wrkgrp_id grpnm 'n' 01/01/2013 12/31/9999 
```

如何将 fmt_Start_dt 和 fmt_end_dt 与 sysdate 进行比较？我`%If fmt_start_dt<=&sysdate9 and fmt_end_dt>=sysdate9 %then %Do;`在代码中尝试了类似的东西，但值没有在循环中拾取....有什么想法吗？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:08:19.230

我不完全确定你想要什么，但我认为这可能有效：

```
%if &fmt_start_dt <= %sysfunc(today()) and &fmt_end_dt >= %sysfunc(today()) 
```

您的 FETCH 函数会将数据集变量复制到宏变量，因此您需要使用 & 符号来引用它们。此外，您应该使用 TODAY() 函数而不是 SYSDATE9 宏变量。

# jquery - 将 jquery 和自定义脚本添加到 Wordpress 主题

> ID：14864221
> 
> 赞同：5
> 
> 时间：2013-02-13T22:13:54.747
> 
> 标签：jquery, wordpress, wordpress-theming

通过 Google 进行一些搜索，我一遍又一遍地遇到相同的代码，用于将 jQuery 添加到从头开始的 Wordpress 主题中。

```
if (!is_admin()) add_action("wp_enqueue_scripts", "my_jquery_enqueue", 11);
function my_jquery_enqueue() {
   wp_deregister_script('jquery');
   wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . "://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", false, null);
   wp_enqueue_script('jquery');
   wp_enqueue_script('my_script', get_bloginfo('template_url') . '/js/theme.js', array('jquery'), '1.0', true);
} 
```

我已将此代码添加到我的 functions.php 文件中，并创建了一个 js 文件夹并在其中使用以下语法创建了一个 theme.js 文件：

```
jQuery(function ($) {
    /* You can safely use $ in this code block to reference jQuery */
}); 
```

当我刷新我的 WP 站点时，似乎没有调用 theme.js 文件。在 Chrome 开发工具中，它没有列在正在渲染的 js 文件中。

我是否使用过时的方法？如何使用 jquery 使我的 /js/theme.js 文件适用于我的主题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T05:50:31.587

首先，[**`wp_enqueue_scripts`**](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)只在前端运行，所以你不需要`is_admin()`检查。

[***其次，只有在你真的知道自己在做什么***](https://wordpress.stackexchange.com/questions/45437/including-jquery-and-jquery-files-the-correct-way)的情况下，才取消注册默认的 jQuery（与 WP 捆绑）。在您的示例中，您正在从 Google 加载一个过时的版本（当前是 1.8.3，而不是 1.7.1）。另请参阅：[不要让 WordPress 的 jQuery 出队](http://eamann.com/tech/dont-dequeue-wordpress-jquery/)

第三，您应该使用[**`get_stylesheet_directory_uri`**](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)，这是计算父主题文件夹和子主题文件夹的正确函数。

最后，这段代码可以正常工作`/themes/my-theme/functions.php`：

```
add_action( "wp_enqueue_scripts", "my_js_so_14864221", 11 );

function my_js_so_14864221() 
{
    wp_enqueue_script( 
        'my_script', 
        get_stylesheet_directory_uri() . '/js/theme.js', 
        array( 'jquery' ), 
        '1.0', 
        true
    );
} 
```

你在 theme.js 中的 jQuery 代码应该像这样封装：

```
jQuery(document).ready(function($) {   
    // $('#your-stuff').animate().hide().whatever();
}); 
```

# cookies - 根据 __utma cookie 从 Google Analytics 检索用户数据

> ID：14864227
> 
> 赞同：0
> 
> 时间：2013-02-13T22:14:30.267
> 
> 标签：cookies, google-analytics, user-tracking

我试图根据他们第一次访问的源/登陆页面来了解我的网页用户在注册后的活跃程度。我宁愿自己不尝试跟踪用户——我已经在我的网页上使用了谷歌分析，我知道它使用 __utma cookie 来区分一个用户和另一个用户。我可以在我的分析报告中看到汇总的登录页面/来源，但需要在注册时为每个特定用户提供这些数据。

本质上，当用户注册我的网页时，我想从谷歌分析中检索他们的登录页面和来源，并将其与用户名、密码、活动等一起存储在我的应用程序的数据库中。这样我可以稍后检查，例如来自谷歌的用户是否比来自 Facebook 等的用户更倾向于购买优质服务。

我检查了 Google Analytics API 参考，但它似乎没有为这些特定数据提供 getter。我已经在 Google 和 Stack Overflow 中查找了一段时间。

这似乎是一个非常有用的功能，许多网站都应该需要它。我错过了什么？也许我应该寻求一个不涉及 GA 的解决方案？或者切换到不同的分析？或者自己使用 cookie 跟踪用户的登录页面？

# java - 为 Eclipse 设置环境变量？

> ID：14864230
> 
> 赞同：0
> 
> 时间：2013-02-13T22:14:37.917
> 
> 标签：java, android, environment-variables

我已经在 windows 环境变量中为我的 JDK 设置了 CLASSPATH 和 HOME_PATH，我是否需要为 Eclipse 设置类似的东西才能编译 Android 程序？我遇到的问题是可以打开 Eclipse 并创建一个像 Helloworld 示例一样简单的程序，这似乎不是一种精确的编译方式，然后我可以打包到任何执行文件中，这样我的小 Android 手机就可以安装了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:27:48.037

Android 不仅需要 Java，还需要 Android SDK。要让它与 Eclipse 一起工作，您还需要 Eclipse Android 插件。因此，如果您可以运行 HelloWorld 程序，Java 就可以运行。按照说明让 Android 在这里工作：

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

此外，在“ADT Bundle”部分下有几个链接可以下载与 Android SDK 捆绑在一起的自包含版本的 Eclipse，从而避免安装 Eclipse Android 插件和配置任何东西。您将在一个方便的目录中解压缩该文件夹，然后看到两个文件夹：Android SDK 和另一个包含 Eclipse。您只需运行 Eclipse 文件夹中的 Eclipse.exe，您的 Android 环境就可以运行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:54:19.670

你有安卓SDK吗？如果没有，请在 [此处](http://developer.android.com/sdk/index.html)获取。它带有 Eclipse IDE，所有必需的东西都已经设置好了。

# jquery - 从外部元素检测 kineticjs 上的掉落事件

> ID：14864231
> 
> 赞同：0
> 
> 时间：2013-02-13T22:14:44.960
> 
> 标签：jquery, kineticjs

我需要检测从画布外部拖动的元素的 kineticjs 画布上的放置事件（来自选择/列表框的一行）。

画布中有很多 kineticjs 元素的拖放示例，但是如何检测来自外部元素的拖放，尤其是拖放坐标？

强烈鼓励来自 JQuery 的任何 dnd 帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:23:22.723

这是将外部元素拖放到画布中并报告放置坐标的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
    #dragMe{border:3px solid blue; width:60px; background-color:cyan; line-height:30px;}
    canvas{border:3px solid red;}
</style>

<script>
    function allowDrop(ev){
        ev.preventDefault();
    }
    function drag(ev){
        ev.dataTransfer.setData("Text",ev.target.id);
    }
    function drop(ev){
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        alert("You dropped [#"+data+"] in the canvas at: X="+ev.clientX+" and Y="+ev.clientY);
    }
</script>
</head>

<body>

    <p>Drag the text to the red canvas</p>
    <canvas id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></canvas>
    <br>
    <p id="dragMe" src="house-icon.png" draggable="true" ondragstart="drag(event)">Drag Me</p>

</body>
</html> 
```

# r - 将 data.frame 转换为表达式数据的矩阵

> ID：14864234
> 
> 赞同：0
> 
> 时间：2013-02-13T22:14:46.350
> 
> 标签：r, matrix, dataframe

我是 R 新手，但我越来越危险了。我想从药物治疗后监测的大约 2000 个基因中制作一个巨大的基因表达折线图。通过 csv 加载后我的数据框如下所示
：

```
head(tmp)
  gene_symbol   untreated   X1hr.avg   X3hr.avg    X6hr.avg  X24hr.avg
1      ERRFI1  0.16612478 -2.0758630 -2.5892085 -2.02039809 -2.4124696
2      ERRFI1  0.27750147 -2.3086333 -3.0538376 -4.01436186 -4.7491462
3     CTDSPL2  0.13172411 -0.7920983 -0.3580963 -0.76213664 -0.8171385
4     CTDSPL2 -0.05205203 -0.9551288 -0.2072265 -0.76993891 -1.0028680
5     SLC26A2  0.20268100  0.5188266  0.5429924  0.01970562 -1.1955852
6     SLC29A4  0.19658238 -0.8102461 -0.9019243 -1.50714838 -1.4648872 
```

我想将此数据框转换为以下内容：

```
gene_symbol  ratio       treatment
ERRFI1       0.16612478  untreated
ERRFI1       -2.0758630  X1hr.avg 
ERRFI1       -2.5892085  X3hr.avg
ERRFI1       -2.02039809 X6hr.avg
ERRFI1       -2.4124696  X24hr.avg 
```

ETC...

这将允许我通过 ggplot 进行绘图：

```
ggplot(data=tmp, aes(x=factor(treatment), y=ratio, group=gene_symbol)) + geom_line() + geom_point() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:30:06.913

您正在寻找的是 reshape2 库中的 melt() 函数。我使用了你的变量名，但我建议将融化的数据存储到不同的变量名中。

```
tmp <- as.data.frame(read.table(text="gene_symbol   untreated   X1hr.avg   X3hr.avg    X6hr.avg  X24hr.avg
                            1      ERRFI1  0.16612478 -2.0758630 -2.5892085 -2.02039809 -2.4124696
                            2      ERRFI1  0.27750147 -2.3086333 -3.0538376 -4.01436186 -4.7491462
                            3     CTDSPL2  0.13172411 -0.7920983 -0.3580963 -0.76213664 -0.8171385
                            4     CTDSPL2 -0.05205203 -0.9551288 -0.2072265 -0.76993891 -1.0028680
                            5     SLC26A2  0.20268100  0.5188266  0.5429924  0.01970562 -1.1955852
                            6     SLC29A4  0.19658238 -0.8102461 -0.9019243 -1.50714838 -1.4648872", header=TRUE))

library(reshape2)

tmp <- melt(data=tmp, id.vars=c("gene_symbol"))
names(tmp) <- sub("variable", "treatment", names(tmp))
names(tmp) <- sub("value", "ratio", names(tmp))

ggplot(data=tmp, aes(x=factor(treatment), y=ratio, group=gene_symbol)) + geom_line(aes(colour=gene_symbol)) + geom_point() 
```

![你的输出](../Images/c18380d4d809fb1dc7f53c2ccf589343.png)

不确定这是否是呈现此类数据的有用方式。您可能想重新考虑您的目标到底是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:25:42.657

你真正在做的是“堆叠”你的变量，所以你也可以使用 ...`stack`函数。

```
out <- data.frame(tmp[1], stack(tmp[-1])) 
```

您会收到警告，但这是警告，而不是错误。它只是告诉你输出有新的行名。

以下是生成的 "stacked" 的第一行和最后几行`data.frame`：

```
> head(out)
  gene_symbol      values       ind
1      ERRFI1  0.16612478 untreated
2      ERRFI1  0.27750147 untreated
3     CTDSPL2  0.13172411 untreated
4     CTDSPL2 -0.05205203 untreated
5     SLC26A2  0.20268100 untreated
6     SLC29A4  0.19658238 untreated
> tail(out)
   gene_symbol     values       ind
25      ERRFI1 -2.4124696 X24hr.avg
26      ERRFI1 -4.7491462 X24hr.avg
27     CTDSPL2 -0.8171385 X24hr.avg
28     CTDSPL2 -1.0028680 X24hr.avg
29     SLC26A2 -1.1955852 X24hr.avg
30     SLC29A4 -1.4648872 X24hr.avg 
```

# c# - 强制浮点在 .NET 中具有确定性？

> ID：14864238
> 
> 赞同：47
> 
> 时间：2013-02-13T22:15:12.257
> 
> 标签：c#, .net, floating-point, ieee-754, non-deterministic

我已经阅读了很多关于 .NET 中浮点确定性的内容，即确保具有相同输入的相同代码在不同的机器上给出相同的结果。由于 .NET 缺少 Java 的 fpstrict 和 MSVC 的 fp:strict 之类的选项，[因此一致](https://stackoverflow.com/a/6685966/154766)认为使用纯托管代码无法解决此问题。C# 游戏 AI Wars 已决定使用[定点数学](https://stackoverflow.com/a/616015/154766)，但这是一个繁琐的解决方案。

主要问题似乎是 CLR 允许中间结果存在于精度高于类型的本机精度的 FPU 寄存器中，从而导致无法预测的高精度结果。[CLR 工程师 David Notario](http://blogs.msdn.com/b/davidnotario/archive/2005/08/08/449092.aspx)的MSDN 文章解释了以下内容：

> 请注意，使用当前规范，它仍然是提供“可预测性”的语言选择。**该语言可以在每个 FP 操作之后插入 conv.r4 或 conv.r8 指令以获得“可预测”的行为。** 显然，这确实很昂贵，而且不同的语言有不同的折衷方案。例如，C# 什么都不做，如果你想缩小，你将不得不手动插入 (float) 和 (double) 强制转换。

这表明可以通过为每个表达式和计算结果为 float 的子表达式插入显式强制转换来实现浮点确定性。有人可能会围绕 float 编写一个包装器类型来自动执行此任务。这将是一个简单而理想的解决方案！

然而，其他评论表明它并不那么简单。[Eric Lippert 最近表示](https://stackoverflow.com/a/8795656/154766)（强调我的）：

> 在运行时的某些版本中，显式转换为浮动会产生与不这样做不同的结果。当您显式转换为浮点数时，C# 编译器**会提示运行时**说“如果您碰巧使用此优化，请将此事物退出超高精度模式”。

这个运行时的“提示”是什么？C# 规范是否规定显式强制转换为浮点数会导致在 IL 中插入 conv.r4？CLR 规范是否规定 conv.r4 指令会导致将值缩小到其本机大小？只有当这两个都为真时，我们才能依靠显式转换来提供浮点“可预测性”，正如 David Notario 所解释的那样。

最后，即使我们确实可以将所有中间结果强制转换为类型的原生大小，这是否足以保证跨机器的可重复性，或者是否还有其他因素，例如 FPU/SSE 运行时设置？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-13T22:56:39.877

> 这个运行时的“提示”是什么？

正如您猜想的那样，编译器会跟踪源代码中是否实际存在对 double 或 float 的转换，如果是，它总是插入适当的 conv 操作码。

> C# 规范是否规定显式强制转换为浮点数会导致在 IL 中插入 conv.r4？

不，但我向您保证，编译器测试用例中有单元测试可以确保它确实如此。尽管规范没有要求，但您可以依赖此行为。

该规范的唯一评论是，任何浮点运算都可能以比运行时所需的精度*更高*的精度完成，这可以使您的结果出乎意料地更加准确。请参阅第 4.1.6 节。

> CLR 规范是否规定 conv.r4 指令会导致将值缩小到其本机大小？

是的，在第 I 部分第 12.1.3 节中，我注意到**您可以自己查找**而不是要求互联网为您查找。这些规范在网络上是免费的。

一个你没有问但可能应该问的问题：

> 除了强制转换之外还有其他操作可以将浮点数从高精度模式中截断吗？

是的。分配给静态字段、实例字段或一个`double[]`或`float[]`数组的元素会截断。

> 一致的截断是否足以保证跨机器的可重复性？

不，我鼓励你阅读第 12.1.3 节，它对非正规数和 NaN 的主题有很多有趣的说法。

最后，另一个你没有问但可能应该问的问题：

> 如何保证可重现的算术？

使用整数。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-13T23:34:01.673

8087 浮点单元芯片设计是英特尔的十亿美元错误。这个想法在纸面上看起来不错，给它一个 8 个寄存器堆栈，以扩展精度存储值，80 位。这样您就可以编写中间值不太可能丢失有效数字的计算。

然而，野兽是不可能优化的。将 FPU 堆栈中的值存储回内存是昂贵的。因此，将它们保留在 FPU 中是一个强有力的优化目标。不可避免的是，如果计算足够深，只有 8 个寄存器将需要回写。它也被实现为堆栈，而不是可自由寻址的寄存器，因此也需要体操可能会产生回写。回写不可避免地会将值从 80 位*截断*回 64 位，从而失去精度。

因此后果是非优化代码不会产生与优化代码相同的结果。当最终需要写回中间值时，计算的微小变化可能会对结果产生很大影响。/fp:strict 选项是一个 hack，它强制代码生成器发出回写以保持值一致，但不可避免且相当大的性能损失。

这是一块完整的岩石，也是一个坚硬的地方。对于 x86 抖动，他们只是没有尝试解决问题。

英特尔在设计 SSE 指令集时并没有犯同样的错误。XMM 寄存器可自由寻址，不存储额外位。如果您想要一致的结果，那么使用 AnyCPU 目标和 64 位操作系统进行编译是快速的解决方案。x64 抖动使用 SSE 而不是 FPU 指令进行浮点数学运算。尽管这增加了计算可以产生不同结果的第三种方式。如果计算是错误的，因为它丢失了太多有效数字，那么它将一直是错误的。确实，这有点像溴化物，但通常仅就程序员的外观而言。

# c - 如何使用while循环

> ID：14864239
> 
> 赞同：0
> 
> 时间：2013-02-13T22:15:23.263
> 
> 标签：c, while-loop

我是编程新手，最近发现这个网站可以帮助我自我教育。我正在尝试使用“C”制作一个程序，该程序会在我的书中提示三个不同类别的成绩，我遇到了 while 语句，并认为它们是我执行此操作的最佳选择。我当前的代码看起来像这样。

```
int countA;
int gradeA;
int totalA;
int weightA;
float averageA;

int countE;
int gradeE;
int totalE;
int weightE;
float averageE;

int countQ;
int gradeQ;
int totalQ;
int weightQ;
float averageQ;

totalA = 0;
countA = 0;

totalE = 0;
countE = 0;

totalQ = 0;
countQ = 0;

printf( "Enter Assignment Grade, -1 to end: "); /* prompt for input */
scanf( "%d", &gradeA );

while (gradeA != -1){
totalA = totalA + gradeA; /* add gradeA to totalA */
    countA = countA + 1;
        printf( "Enter Assignment Grade, -1 to end: "); /* prompt for input */
        scanf( "%d", &gradeA );
}
if (countA != 0) {
averageA = (float) totalA / countA;
printf( "total is %.2f\n", averageA );
}

printf( "Enter Exam Grade, -1 to end: "); /* prompt for input */
scanf( "%d", &gradeE );

while (gradeE != -1){
totalE = totalE + gradeE; /* add gradeE to totalE */
    countE = countE + 1;
        printf( "Enter Exam Grade, -1 to end: "); /* prompt for input */
        scanf( "%d", &gradeE );
}
if (countE != 0) {
averageE = (float) totalE / countE;
printf( "total is %.2f\n", averageE );
}

printf( "Enter Quiz Grade, -1 to end: "); /* prompt for input */
scanf( "%d", &gradeQ );

while (gradeQ != -1){
totalQ = totalQ + gradeQ; /* add gradeQ to totalQ */
    countQ = countQ + 1;
        printf( "Enter Quiz Grade, -1 to end: "); /* prompt for input */
        scanf( "%d", &gradeQ );
}
if (countQ != 0) {
averageQ = (float) totalQ / countQ;
printf( "total is %.2f\n", averageQ );
} 
```

现在，在此之后我想要做的是再重复两次该过程，但是当我尝试运行 exe 时，我会运行第一部分，但由于某种原因，其他两部分根本没有出现。这是否只是为了限制 while 重复语句的作用？还是我在某个地方有错误。我试图弄清楚我做错了什么，但我只是看到了。

我还不太确定如何在此处正确发布，但这是我得到的输出示例。

这是我的输出示例，如您所见，它提示我输入第一个段，即分配部分，但在输入 -1 结束循环后，它只给我平均值并结束。

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin>project1.exe
Enter Assignment Grade, -1 to end: 100
Enter Assignment Grade, -1 to end: 80
Enter Assignment Grade, -1 to end: 77
Enter Assignment Grade, -1 to end: 33
Enter Assignment Grade, -1 to end: 76
Enter Assignment Grade, -1 to end: 92
Enter Assignment Grade, -1 to end: -1
total is 76.33 
```

我认为至少第一部分是有效的，但是在我得到总分后，我没有被提示进行下一次查看，然后询问考试成绩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:41:52.840

您可能遇到的一个常见问题是输出缓冲。对于您的代码：

```
printf( "Enter Assignment Grade, -1 to end: "); /* prompt for input */
scanf( "%d", &gradeA ); 
```

您的终端可能不会将输出缓冲区刷新到屏幕。所以它会等待输入，但你可能看不到提示。要强制它，你可以这样做：

```
printf( "Enter Assignment Grade, -1 to end: "); /* prompt for input */
fflush(stdout);
scanf( "%d", &gradeA ); 
```

现在，这使得更多的重复。如果您只需要为每个循环编写一次提示而不是两次，那会更好。你可以通过`gradeA`在循环之前初始化为零来解决这个问题。然后循环内的第一个计算没有任何效果：

```
gradeA = 0;
totalA = -1;

while (gradeA != -1)
{
    totalA = totalA + gradeA;
    countA = countA + 1;
    printf( "Enter Assignment Grade, -1 to end: ");
    fflush(stdout);
    scanf( "%d", &gradeA );
} 
```

请注意，我设置`countE`为 -1 以撤消在循环顶部递增它的事实。这一切开始感觉有点笨拙。

另一个问题是，如果用户输入的不是整数，您的程序将产生未定义的行为（因为您实际上并没有初始化`gradeA`）。您可以测试是否`scanf`成功，因为它返回读取的项目数。

懒惰的方法是这样的：

```
if( 1 != scanf( "%d", &gradeA ) ) {
    printf( "Invalid input!"\n" );
    exit(1);
} 
```

你可以决定。对于其余的答案，我会忽略这一点。

当你加强你的循环时，很明显代码重复是一个主题。您要更改的只是变量和提示。所以是时候把它变成一个函数了：

```
int grade_average( const char *what, int *total, float *average )
{
    int count = -1;
    int grade = 0;
    *total = 0;

    while( grade != -1 )
    {
        count++;
        *total += grade;

        printf( "Enter %s Grade, -1 to end: ", what );
        fflush(stdout);

        if( 1 != scanf("%d", &grade) ) return 0;  // fail on input error.
    }

    if( count > 0 ) {
        *average = (float)*total / count;
    }

    return 1;
} 
```

现在你可以这样调用：

```
if( grade_average("Assignment", &totalA, &averageA) ) {
    printf( "Total is %.2f\n", averageA );
}

if( grade_average("Exam", &totalE, &averageE) ) {
    printf( "Total is %.2f\n", averageE );
}

if( grade_average("Quiz", &totalQ, &averageQ) ) {
    printf( "Total is %.2f\n", averageQ );
} 
```

# mysql - 收件箱消息排序顺序错误？

> ID：14864246
> 
> 赞同：1
> 
> 时间：2013-02-13T22:15:46.767
> 
> 标签：mysql

我有一个简单的 Web 应用程序，它允许用户互相发送消息，用户可以查看他们的收件箱以查看他们的消息。收件箱应按发件人分组，按来自该发件人的最新邮件的日期以及收件箱的阅读状态排序。

我认为我的查询工作正常，但是我刚刚注意到某些消息的顺序不正确！我很确定这是由于该组通过返回任何消息......无论如何这周围有吗？

看看这个小提琴： [http ://sqlfiddle.com/#!2/565c6/1](http://sqlfiddle.com/#!2/565c6/1)

已排序收件箱的最后一条消息，实际上有最新消息，但它位于收件箱视图的底部！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:26:01.610

我认为您正在寻找按组计算的最大值：

```
SELECT *
FROM who_messages wm1
WHERE wm1.sent = (
  SELECT MAX(sent)
  FROM who_messages wm2
  WHERE wm2.from_userid = wm1.from_userid
    AND wm2.to_userid = 41
)
ORDER BY wm1.is_read ASC, wm1.sent DESC; 
```

## [Sql 小提琴](http://sqlfiddle.com/#!2/565c6/30)

或者，没有相关的子查询：

```
SELECT *
FROM who_messages wm1
JOIN (
  SELECT from_userid, MAX(sent) as sent
  FROM who_messages
  WHERE to_userid = 41
  GROUP BY from_userid
) wm2 ON wm1.from_userid = wm2.from_userid AND wm1.sent = wm2.sent
ORDER BY wm1.is_read ASC, wm1.sent DESC; 
```

## [Sql 小提琴](http://sqlfiddle.com/#!2/565c6/26)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:25:50.757

你的意思是这样的？[http://sqlfiddle.com/#!2/565c6/20](http://sqlfiddle.com/#!2/565c6/20) 我只是在子查询中按 ID 反向排序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T22:25:18.640

目前尚不清楚您希望如何对结果进行排序/分组，应该对发件人进行排序还是总是将其过滤到特定的发件人？

交换

> m.sent DESC

为了

> 发送 ASC

会将最新消息带到您小提琴结果的顶部。

# vb.net - 将数据表绑定到vb中的图表

> ID：14864253
> 
> 赞同：0
> 
> 时间：2013-02-13T22:16:09.503
> 
> 标签：vb.net, charts, bind

我有一个项目，我目前在 VB 中工作。基本上我在VB中有一个数据表，它填充了4列和可变数量的行，列名如下；

```
Gear, RPM, Speed, CO2 
```

数据表正确显示在 datagridview 中，但据我所知：/

我要做的是制作一个名为 mainGraph 的折线图，以根据这些结果绘制图表，但在尝试填充图表时遇到了困难。

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:34:09.860

我猜你正在使用 ms 图表控件，而不是像 Telerik 这样的第 3 方。

这应该很有用[http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx](http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)

此外，还可以在[http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418找到源代码](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T17:36:05.807

简而言之，这是一种显示内容的方法

```
mainGraph.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Line
mainGraph.Series(0).Points.DataBind(yourDataTable.DefaultView, "Speed", yourDataTable.DefaultView, "Gear") 
```

这些命令应该在 x 轴上显示速度，在 Y 轴上显示齿轮。分配给“系列（0）”要添加更多列，您需要添加更多“系列”

```
mainGraph.Series.Add("RPM") 
```

考虑一下您希望如何显示此数据。你想如何设置这个图表？我假设你想要一个折线图？X轴是什么？数据表中是否缺少需要“时间”的列？你想把它们都放在一个图形/图表区域吗？如果您想要更多图表，则需要添加图表区域。可以将系列分配给图表区域。

希望这会有所帮助。

# javascript - 从本地存储 javascript 中删除值

> ID：14864256
> 
> 赞同：4
> 
> 时间：2013-02-13T22:16:15.673
> 
> 标签：javascript, local-storage

我正在尝试从JavaScript 中的**localStorage**中删除项目，但它不起作用。

它仅适用于以下事件的序列

```
Right click --> Inspect element --> Resources --> localStorage --> Right click --> Delete 
```

我试过了：

```
localStorage.clear(); 
```

和

```
localStorage.removeItem(key); // the key is the link of the page and 
                              // the value is the selected word in the page 
```

两者都不起作用，我可以使用保存项目`localStorage.setItem(key, vaule)`并使用从 localStorage 获取项目，`localStorage.getItem(key)`但我无法删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:37:10.643

你要找的是这个：

```
deleter void removeItem(DOMString key); 
```

你可以这样实现：

```
localStorage.removeItem(key) 
```

关于本地存储的所有内容都可以[在 W3 html5 网络存储规范中找到。](http://dev.w3.org/html5/webstorage/#the-localstorage-attribute)

您可能会发现此[文档更有用，因为它包含更多解释。](http://diveintohtml5.info/storage.html)

*本地存储不是一个完成的规范，这些可能会改变。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-24T23:24:07.787

不带 () 的 localStorage.clear 目前适用于主流浏览器。

# ios - iOS 中的 KML 和 MapView

> ID：14864259
> 
> 赞同：0
> 
> 时间：2013-02-13T22:16:28.860
> 
> 标签：ios, android-mapview, kml

我有一个 KML 文件，其中包含来自所有国家/地区的坐标（多边形坐标）。我使用 Apple 的 Simple KML 和 KMLViewer 来管理地图上的叠加层，但我希望我的应用程序能够离线工作。所以实际上我想使用一个什么都不显示的地图视图（比如当你在没有互联网连接的情况下打开地图应用程序时）。我可以强制地图视图停止加载地图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:23:21.560

不，以编程方式，您无法停止`MkMapView`尝试加载地图数据。

用户可以禁用“移动数据”。

您必须创建一个自己的`MapView`来绘制多边形。或者您可以使用类似的库`RouteMe`，使用自己的基于`OpenStreetMap`.

# python - 对于低于 UPPER 的字符串。UPPER 启动时给出位置。Python

> ID：14864260
> 
> 赞同：0
> 
> 时间：2013-02-13T22:16:38.213
> 
> 标签：python, for-loop, boolean, uppercase, lowercase

如果我有一个字符串

```
ex = 'aaatttgggatgaATG' 
```

我想找到小写结束的索引

所以在这种情况下

```
indx_lower = 13 
```

我将如何获得该价值？

我是否必须执行一个 for 循环，在其中检查字符串中每个元素的布尔值？

像这样 ？

```
total_indx = range(0,len(ex))

for p,k in zip(ex,total_indx):
    if upper print k ? 
```

是的，我不知道我会怎么做。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:19:15.997

```
next(i for i,j in enumerate(ex) if j.isupper()) - 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:23:16.827

最好的方法是不使用 for 循环：

```
>>> print re.search("[A-Z]", "aaatttgggatgaATG").start()
13 
```

`re.search()`返回一个`MatchObject`对象，你可以通过调用它的`start()`方法来询问它从哪里开始。（但如果没有匹配，`re.search()`将返回`None`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:19:28.530

你可以使用重新

```
import re

ex = 'aaatttgggatgaATG'

print ex.index(re.search('[A-Z]', ex).group()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:21:55.897

```
for x in range(0, len(ex)):
    if ex[x].isupper():
        print x
        break 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:23:21.883

```
>>> import re
>>> ex = 'aaatttgggatgaATG'
>>> re.search("[A-Z]", ex).start()
13 
```

# d3.js - 如何在d3中的col下退出（）.transition

> ID：14864262
> 
> 赞同：2
> 
> 时间：2013-02-13T22:16:44.063
> 
> 标签：d3.js

我有一个堆积条形图，显示月份或年份的值。

它由一系列列（1 或 12）组成，并在每列内进行调整（9 个单独的值）。

您可以在此处查看：（注意 - 这是一个有效的网页，目前在 AWS 上运行。）

```
http://54.245.225.47/stackedbar_ex_good 
```

当我从月视图转到年视图时，我想将所有位置移动到年值，然后将它们淡出为年值`.enter()`。

问题是矩形（我通常会这样做，`.exit().transition().attr("y", new_val)`因为列被删除（`.exit()`），所以永远不会被调用。当我尝试从 中引用孩子`.rects`时`svg.selectAll(".col").exit().transition()`，它们似乎一下子消失了。我猜这是错误的方法。

抱歉，这太令人困惑了！我确信这种事情在其他地方得到了回答，但我什至不知道正确描述它的语言（因此搜索它）。任何提示/指针将不胜感激。

（有很多代码 - 我不知道如何简化以便发布它。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T17:30:29.137

是的，有点难以理解这个问题......据我所知，您希望在将现有矩形从 SVG 中删除之前将它们设置为动画到某个位置。但是你的问题是矩形的父母——`col`在你的代码中——被立即删除，所以嵌套的矩形永远没有机会动画。正确的？

如果是这样，一种解决方法是延迟移除现有`col`的 '，以便让`rects`动画有时间播放。所以，而不是这样做：

```
col.exit().remove() 
```

像这样应用延迟：

```
col.exit().transition().delay(2000).remove() 
```

这里没有实际的、可见的过渡；这只是延迟调用的一种方式`remove()`。

# shell - sed：将表格中的 time(3) 秒转换为可打印的日期 (spamdb)

> ID：14864263
> 
> 赞同：0
> 
> 时间：2013-02-13T22:16:45.413
> 
> 标签：shell, sed, tcsh, openbsd

[我从spamdb](http://www.openbsd.org/cgi-bin/man.cgi?query=spamdb&sektion=8)得到以下信息，其中第三个字段表示自纪元以来的时间（以秒为单位）。

```
Cns# spamdb | fgrep TRAPPED
TRAPPED|113.163.117.129|1360836903
TRAPPED|113.171.216.201|1360837481
TRAPPED|122.177.159.61|1360844596
TRAPPED|36.231.9.231|1360865649
TRAPPED|37.146.207.209|1360832096
TRAPPED|212.156.98.210|1360837015
TRAPPED|59.99.160.62|1360839785
TRAPPED|86.127.116.162|1360840492
TRAPPED|92.83.139.194|1360843056
TRAPPED|219.71.12.150|1360844704 
```

我想按时间对该表进行排序，并用 打印时间字段`date -r`，以便在事件发生时它可以呈现和清晰。

我如何`tcsh`在 OpenBSD 上做到这一点？

排序`sort`很容易，用`sed`;编辑也是如此。但我如何`sed`执行`date -r`或等效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:16:45.413

这里确实存在一些障碍：首先，您基本上必须分离数据，然后将其中一部分按原样呈现，而另一部分必须传递给`date -r`日期格式，然后才能呈现给用户.

另一个障碍是确保输出对齐：显然，在 shell 中处理制表符非常困难，可能只在 BSD 上：

*   [sed 替换文字 TAB](https://stackoverflow.com/questions/8400602/sed-replace-tab-in-zsh-shell)
*   [使用 sed 替换 / 用 TAB](https://stackoverflow.com/questions/6363328/replacing-with-tab-using-sed)

此外，当我们最终将其管道传输到`sh`执行时，我们必须对管道字符以外的字段使用不同的分隔符，`|`.

到目前为止，这是我能想到的最好的片段，它似乎在我的`tcsh`：

```
Cns# spamdb | fgrep TRAPPED | sort -n -t '|' -k 3 | sed -E -e 's#\|#@#g' \
    -e 's#^([A-Z]+)@([0-9.]+)@([0-9]+)$#"echo -n \2_"; "date -r \3"#g' | \
    xargs -n1 sh -c | awk '{gsub("_","\t",$0); print;}'
37.146.207.209  Thu Feb 14 00:54:56 PST 2013
113.163.117.129 Thu Feb 14 02:15:03 PST 2013
212.156.98.210  Thu Feb 14 02:16:55 PST 2013
113.171.216.201 Thu Feb 14 02:24:41 PST 2013
59.99.160.62    Thu Feb 14 03:03:05 PST 2013
86.127.116.162  Thu Feb 14 03:14:52 PST 2013
92.83.139.194   Thu Feb 14 03:57:36 PST 2013
122.177.159.61  Thu Feb 14 04:23:16 PST 2013
219.71.12.150   Thu Feb 14 04:25:04 PST 2013
36.231.9.231    Thu Feb 14 10:14:09 PST 2013 
```

# android - Intellij IDEA 无法识别 Android 库资源

> ID：14864266
> 
> 赞同：2
> 
> 时间：2013-02-13T22:16:50.200
> 
> 标签：android, intellij-idea, google-play-services

我已将 Google Play 服务作为库项目添加到 Intelli-J 中的 Android 项目中，但似乎 IDE 仍未识别这些资源。当应用程序尝试为地图充气时，我收到以下错误：

```
ERROR/AndroidRuntime(16002): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source) 
```

这是布局 XML 中片段的代码。

```
 <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        class="com.google.android.gms.maps.SupportMapFragment"
        map:cameraZoom="13"
        map:mapType="normal"
        map:uiCompass="false"
        map:uiRotateGestures="true"
        map:uiScrollGestures="false"
        map:uiTiltGestures="true"
        map:uiZoomGestures="true" /> 
```

在`maps_attrs.xml`Google Play 项目中，`<declare-styleable name="MapAttrs">`“MapAttrs”以红色突出显示。

在 Eclipse 中编译时，代码可以正常运行。

有谁知道如何让 IDEA 识别资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:49:01.967

我可以通过从 Android 重新安装 Google Play 服务，在 Eclipse 中编译，然后将其重新附加到我的 IDEA 项目并将 google-play-services-lib 的 R.java 输出重定向到一个虚拟目录（将 google-play-services 模块 Android 界面的编译器选项卡下的 R.java 输出目录从“.../gen”更改为“.../_gen”）。我仍然不确定是什么原因造成的。

看起来 JetBrains 将在 12.1 中改变这种行为：http: [//youtrack.jetbrains.com/issue/IDEA-99045](http://youtrack.jetbrains.com/issue/IDEA-99045)

# devise - 为 RegistrationsController 设计未定义的方法“users_url”

> ID：14864268
> 
> 赞同：5
> 
> 时间：2013-02-13T22:16:52.137
> 
> 标签：devise

Rails 3.2.12 + 设计 2.2.3

注册#create 中发生 NoMethodError：

未定义的方法`users_url' for #<RegistrationsController:0x007fd04f04b330> actionpack (3.2.12) lib/action_dispatch/routing/polymorphic_routes.rb:129:in`polymorphic_url'

该应用程序在 rails 3.2.8 上运行良好

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-27T08:30:07.200

我遇到了同样的问题，它在 Devise 内部看起来有问题（仍然存在于 master 中）。我找到的唯一解决方案是回到 Devise 2.1.2（我知道它可以工作，因为我在另一个项目中使用了它）。

所以要解决这个问题，你可以把

```
gem 'devise', '2.1.2' 
```

在您的 Gemfile 中，然后重新安装它

```
rails generate devise:install 
```

希望在 Devise 的团队修复它时对您有所帮助

# r - 使用 R 随机化不重复/不重复

> ID：14864275
> 
> 赞同：2
> 
> 时间：2013-02-13T22:17:05.550
> 
> 标签：r, repeat

如何在不使用 R 重复数字的情况下随机化以下矩阵？

```
g=sample(1:28, 28), replace=T)
HW=matrix(g, ncol=4, byrow=T)
HW=as.table(HW)
HW 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:20:48.057

看起来您目前正在更换样品。关闭它应该会给你你想要的行为：

```
g = sample(1:28, 28, replace=F) 
```

# php - 文本区域到段落或纯文本

> ID：14864279
> 
> 赞同：0
> 
> 时间：2013-02-13T22:17:10.070
> 
> 标签：php, jquery, textarea, paragraph

我有一个表单，用户可以通过文本区域进行评论。如果单击提交按钮，它将返回在文本区域内的文本区域中输入的值。我该如何更改它，以便在提交时将 textarea 的值作为带有 jquery 或 php 的纯文本/段落返回？

textarea 和按钮的代码：

```
<textarea rows="6" cols="40" scroll="auto" name="reply_for_{$item.id}">
    {if isset($item.reply)}
        {$item.reply}
    {/if}
</textarea>
<br />
<input name="addcomment" value="{lang mkey='submit'}" type="button" onclick="
    document.forms['commentsFrm'].id.value={$item.id};
    document.forms['commentsFrm'].submit(); 
"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:21:52.103

```
$('input[name="addcomment"]').on('click',function(){
     var comment = $('textarea').val();
     $('textarea').remove(); // removes the textarea
     var actContent = $(this).parent().html(); // get the actual content of the parent dom node.
     $(this).parent.html('<p>'+comment+'</p>'+actContent); // you set the new html content for the parent dom node

}); 
```

因此，这将获取 textarea 内容并将其保存到一个段落中。有点尴尬的解决方案，但它应该有魔力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:23:55.923

有很多方法可以做到这一点，但这是我想到的：

```
$('input[name="addcomment"]').on('click', function() {
    var textArea = $('textarea[name="reply_for_{$item.id}"]');
    var text = textArea.val();
    $('<div id="no-editing-me">').text(text).insertAfter(textArea);
    textArea.hide();
}); 
```

如果你给你的元素 IDs，你就不必担心`[name="reply_for_{$item.id}"]`jQuery 中的所有垃圾。它也会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:13:04.877

2个答案部分解决了问题。然而它给了我一些新的灵感，我这样解决了

```
{if $item.reply == ''}
<form name="reply" method="post" action="reply">
    <textarea id="txtreply" name="txtreply" cols="50" rows="5"></textarea>
    <input type="submit" name="btnAdd" value="{lang mkey='send'}" />
</form>

{else}

{$item.reply}

{/if} 
```

谢谢大家的帮助

# git - 使用 CruiseControl.Net 时如何为 Git 存储库的子目录中的更改触发构建？

> ID：14864280
> 
> 赞同：0
> 
> 时间：2013-02-13T22:17:15.047
> 
> 标签：git, cruisecontrol.net

我正在将我们的代码库从使用 SVN 存储库转换为 Git 存储库。我们正在尝试在此过渡期间维护我们现有的大部分构建/部署过程，这意味着使用我们现有的 CruiseControl.NET CI 服务器进行构建。

我遇到的问题是我们在 git 根目录下有几个不同的应用程序目录，这使我无法检测到特定子文件夹中的更改并仅构建相关的应用程序，例如：

```
../gitRepoRoot/appOne
../gitRepoRoot/appTwo 
```

传统上，我将 svn 工作目录设置为 [../gitRepoRoot/appOne] 之类的东西，并且刚刚检测到构建 appOne 的更改，但到目前为止，我可以说没有办法使用 git 观看子目录。

无论如何，我都不是 CruiseControl.NET 专家，所以也许我遗漏了一些东西，或者有另一种方法可以达到同样的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:28:01.000

根据您拥有源代码控制块的方式，您可以使用包含/排除过滤器来控制构建触发。

见：[http ://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered)

例如：

```
<sourcecontrol type="filtered">
  <dynamicValues />
  <exclusionFilters />
  <inclusionFilters>
    <pathFilter>
      <pattern>appOne</pattern>
    </pathFilter>
    <pathFilter>
      <pattern>appTwo</pattern>
    </pathFilter>
  </inclusionFilters>
  <sourceControlProvider type="git">
    <autoGetSource>True</autoGetSource>
    <branch>master</branch>
    <commitUntrackedFiles>False</commitUntrackedFiles>
    <dynamicValues />
    <executable>C:\Program Files (x86)\Git\bin\git</executable>
    <fetchSubmodules>False</fetchSubmodules>
    <repository>**repo**</repository>
    <tagCommitMessage>CCNet Build {0}</tagCommitMessage>
  </sourceControlProvider>
</sourcecontrol> 
```

**注意：** 默认情况下`pathFilter`，元素区分大小写，但可以这样禁用：

```
<pathFilter>
  <caseSensitive>False</caseSensitive>
  <pattern>appOne</pattern>
</pathFilter> 
```

有关其他选项，请参见[http://www.cruisecontrolnet.org/projects/ccnet/wiki/PathFilter](http://www.cruisecontrolnet.org/projects/ccnet/wiki/PathFilter)

# python - 使用 py2exe，如何使用 python 和 tkinter 创建可执行文件？

> ID：14864281
> 
> 赞同：1
> 
> 时间：2013-02-13T22:17:18.090
> 
> 标签：python, user-interface, tkinter, executable, py2exe

我正在尝试使用 py2exe 将我用 Python 2.7 编写的程序（使用 tkinter 作为 GUI）转换为独立的可执行文件。我在一个名为 setup.py 的文件中编写了以下脚本：

```
from distutils.core import setup
import py2exe
setup(data_files=['C:\Python27\tcl\tcl8.5\init.tcl'] , windows = ["Brand_Counter.py"]) 
```

当我运行它时，命令提示符会打开一秒钟，然后什么也没有发生。据我所知，根据文档，我的代码应该创建一个包含我的可执行文件的子目录“dist”，但这并没有发生。有人看到我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:34:07.723

要构建 py2exe 项目，您应该从包含 setup.py 文件的目录发出以下命令：

```
python setup.py py2exe 
```

对我来说效果很好。

编辑 - -

此外，您正在使用 data_files 参数，该参数采用元组列表。您的参数应如下所示：

```
data_files=[('tclfiles', ['C:\Python27\tcl\tcl8.5\init.tcl'])] 
```

针对您想要放置 init.tcl 文件的任何位置进行了调整。有关更多示例，请参阅此链接：[py2exe data_files](http://www.py2exe.org/index.cgi/data_files)

# lighttpd - lighttpd config (=~) 中的等号后跟波浪号是什么？

> ID：14864282
> 
> 赞同：0
> 
> 时间：2013-02-13T22:17:19.470
> 
> 标签：lighttpd

以下有什么区别？从我可以告诉/使用它的情况来看，两者的工作方式相同

```
$HTTP["host"] =~ "a.domain.com" {
    server.document-root = "/var/www/a/"
}

$HTTP["host"] == "a.domain.com" {
    server.document-root = "/var/www/a/"
} 
```

`=~`比赛会吗`x.a.domain.com`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:30:33.037

的右侧`=~`是正则表达式。

`x.a.domain.com`不会匹配正则表达式`a.domain.com`。

匹配的示例：

*   `axdomain.com`
*   `axdomainxcom`
*   `aydomainycom`
*   `a1domain1com`
*   ...

该示例来自真实世界的示例吗？好像有点没意思

这样的事情可能更有意义：

```
$HTTP["host"] =~ ".*\.somedomain\.com" {
    server.document-root = "/var/www/somedomain.com/"
} 
```

意思是，为来自 *.somedomain.com 的所有请求提供服务`/var/www/somedomain.com/`

这个页面有一些更现实的正则表达式匹配示例：

[http://redmine.lighttpd.net/boards/2/topics/2518](http://redmine.lighttpd.net/boards/2/topics/2518)

# php - .php 仅将表单的一部分发送到电子邮件地址

> ID：14864286
> 
> 赞同：0
> 
> 时间：2013-02-13T22:17:58.203
> 
> 标签：php, forms

我正在尝试使用发送到特定电子邮件地址的表单来设置一个简单的网站。这个想法是在电子邮件中发送一些不同的内容，例如：名字和姓氏、年龄、电子邮件、城市、主题（这是一个带有几个不同选项的下拉菜单），最后是一个评论框。

实际上，在过去的 14 个小时里，我一直在阅读和寻找如何让 PHP 脚本正常工作以便发送表单的方法。但由于某种原因，我就是想不通。

我似乎无法获得包含我需要包含的所有内容的表格。有人可以指出为什么下面的代码不起作用吗？

```
<?php
/* EMAIL RECIPIENT */
$myemail = "name@example.com";

/* Functions we used */
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    show_error($problem);
}
return $data;
}

/* Check all form inputs using check_input function */
$formName = check_input ($_POST['formName'], "Please enter your First Name");
$formSurname = check_input ($_POST['formSurname'], "Please enter your First Name");
$formAge = check_input ($_POST['formAge'],);
$formEmail = check_input ($_POST['formEmail'], "Please enter your email so we can get back to you");
$formIntent = check_input ($_POST['formIntent'], "Pleas choose a reason for why contact us");
$formIntent = " (MYFORM) " . $formIntent;
$formComment = check_input ($_POST['formComment']);

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $formEmail))
{
show_error("E-mail address not valid");
}

/* The layout for the email and how it will be set up for reading the email. */

$message = "Hello!

Your contact form has been submitted by:

Name: $formName
Age: $formAge
City: $formCity
Email: $formEmail
Comment: $formName
The reason for contact with Mistral is: $formIntent
Comment: $formComment

End of message.
";

/* Send the message using the mail() function */
mail($myemail, $subject, $message);

/* Redirect visitors to the thank you page */
header('Location: ../thanks.html');

function show_error($myError)
{?>
<html>
<body>

<b>Please correct the following error:</b><br />
<?php echo $myError; ?>

</body>
</html>

<?php
exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:28:36.863

好吧，你验证`$_POST['formSurname']`了但你从不使用它。同样，您`$formCity`在您的输出中，`$message`但您从未定义它。

这很可能是您的问题的原因。

# php - 从 ini 文件读取和写入 (Config_Lite)

> ID：14864287
> 
> 赞同：0
> 
> 时间：2013-02-13T22:17:58.267
> 
> 标签：php, pear, ini

好的，所以我已经阅读了一段时间，到目前为止我发现的最佳解决方案是：[如何使用 PHP 读取和写入 ini 文件](https://stackoverflow.com/questions/5695145/how-to-read-and-write-to-an-ini-file-with-php)

我已经安装了梨包。包含启动课程所需的文件。如图所示： [https ://github.com/pear/Config_Lite/blob/master/docs/examples](https://github.com/pear/Config_Lite/blob/master/docs/examples)

但是我在获取变量时遇到了麻烦。

这是我的ini文件：

```
[Account]
acct1.UserName = something1
acct1.Password = something2
acct1.Signature = something3
acct1.AppId = something4
# Subject is optional and is required only in case of third party authorization 
acct1.Subject = 
```

这是我到目前为止所尝试的：

```
$config = new Config_Lite('$filename');
echo $config->get('Account', 'acct1.UserName'); 
```

它不起作用并返回错误。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T18:38:17.587

您可以使用`acct1[UserName]=something1`代替`acct1.UserName=something1`然后在 PHP 中通过以下代码访问它：

```
[Account]
acct1[UserName]=something1

$config = new Config_Lite("$filename");
$config_acc = $config -> get('Account','acct1');
echo $config_db['UserName']; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-13T22:23:45.917

你可以使用 Zend_config_init

[http://framework.zend.com/manual/1.12/en/zend.config.adapters.ini.html](http://framework.zend.com/manual/1.12/en/zend.config.adapters.ini.html)

[http://framework.zend.com/manual/1.12/en/zend.config.writer.introduction.html](http://framework.zend.com/manual/1.12/en/zend.config.writer.introduction.html)

# java - 从乐谱中提取每行的小节

> ID：14864290
> 
> 赞同：7
> 
> 时间：2013-02-13T22:18:04.407
> 
> 标签：java, python, ocr

我想知道一种提取单个措施的方法。我不确定是否已经存在用于此的算法，所以我考虑从左到右扫描乐谱，从一行小节的上方和下方提取所有空白。

我不是在寻找将乐谱转换为 MusicXML 或提取其他有用信息的方法。不，基本上我正在处理的是一份常规文件。我需要将段落分开。我对段落所传达的信息不感兴趣，而只是将它们与文档的区域分开。在这种情况下，一个段落将是一系列措施。我不需要单独的小节，而是每行乐谱上的所有小节。

![在此处输入图像描述](../Images/b29f9d0713182c94e9a6d5a08a4848aa.png)

这是我想要的完整乐谱的输出之一，但没有标题、作曲家等。 ![在此处输入图像描述](../Images/210052196ffe898cf4ff4306e9b08384.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T05:17:56.120

假设您在 PDF 文件中有乐谱，我将使用[Apache PDFBox](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)从包含乐谱的输入 PDF 文件中获取图像，然后找到您需要的整个栏的坐标，使用选定的图像定义要裁剪的坐标图像并对其进行操作，直到获得所需的结果。

```
PDDocument document = null; 
document = PDDocument.load(inFile); 
List pages = document.getDocumentCatalog().getAllPages();
Iterator iter = pages.iterator(); 
while (iter.hasNext()) {
            PDPage page = (PDPage) iter.next();
            PDResources resources = page.getResources();
            Map pageImages = resources.getImages();
            if (pageImages != null) { 
                Iterator imageIter = pageImages.keySet().iterator();
                while (imageIter.hasNext()) {
                    String key = (String) imageIter.next();
                    PDXObjectImage image = (PDXObjectImage) pageImages.get(key);
                    image.write2OutputStream(/* some output stream */);
                }
            }
} 
```

这是 Apache PDFBox 中可用的示例代码。

```
import java.io.File;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.PDResources;
import org.apache.pdfbox.pdmodel.encryption.AccessPermission;
import org.apache.pdfbox.pdmodel.encryption.StandardDecryptionMaterial;
import org.apache.pdfbox.pdmodel.graphics.xobject.PDXObject;
import org.apache.pdfbox.pdmodel.graphics.xobject.PDXObjectForm;
import org.apache.pdfbox.pdmodel.graphics.xobject.PDXObjectImage;

/**
 * This will read a read pdf and extract images. <br/><br/>
 *
 * usage: java org.apache.pdfbox.ExtractImages &lt;pdffile&gt; &lt;password&gt; [imageprefix]
 *
 * @author  <a href="mailto:ben@benlitchfield.com">Ben Litchfield</a>
 * @version $Revision: 1.7 $
 */
public class ExtractImages
{
    private int imageCounter = 1;

    private static final String PASSWORD = "-password";
    private static final String PREFIX = "-prefix";
    private static final String ADDKEY = "-addkey";
    private static final String NONSEQ = "-nonSeq";

    private ExtractImages()
    {
    }

    /**
     * This is the entry point for the application.
     *
     * @param args The command-line arguments.
     *
     * @throws Exception If there is an error decrypting the document.
     */
    public static void main( String[] args ) throws Exception
    {
        ExtractImages extractor = new ExtractImages();
        extractor.extractImages( args );
    }

    private void extractImages( String[] args ) throws Exception
    {
        if( args.length < 1 || args.length > 4 )
        {
            usage();
        }
        else
        {
            String pdfFile = null;
            String password = "";
            String prefix = null;
            boolean addKey = false;
            boolean useNonSeqParser = false;
            for( int i=0; i<args.length; i++ )
            {
                if( args[i].equals( PASSWORD ) )
                {
                    i++;
                    if( i >= args.length )
                    {
                        usage();
                    }
                    password = args[i];
                }
                else if( args[i].equals( PREFIX ) )
                {
                    i++;
                    if( i >= args.length )
                    {
                        usage();
                    }
                    prefix = args[i];
                }
                else if( args[i].equals( ADDKEY ) )
                {
                    addKey = true;
                }
                else if( args[i].equals( NONSEQ ) )
                {
                    useNonSeqParser = true;
                }
                else
                {
                    if( pdfFile == null )
                    {
                        pdfFile = args[i];
                    }
                }
            }
            if(pdfFile == null)
            {
                usage();
            }
            else
            {
                if( prefix == null && pdfFile.length() >4 )
                {
                    prefix = pdfFile.substring( 0, pdfFile.length() -4 );
                }

                PDDocument document = null;

                try
                {
                    if (useNonSeqParser)
                    {
                        document = PDDocument.loadNonSeq(new File(pdfFile), null, password);
                    }
                    else
                    {
                        document = PDDocument.load( pdfFile );

                        if( document.isEncrypted() )
                        {
                            StandardDecryptionMaterial spm = new StandardDecryptionMaterial(password);
                            document.openProtection(spm);
                        }
                    }
                    AccessPermission ap = document.getCurrentAccessPermission();
                    if( ! ap.canExtractContent() )
                    {
                        throw new IOException(
                            "Error: You do not have permission to extract images." );
                    }

                    List pages = document.getDocumentCatalog().getAllPages();
                    Iterator iter = pages.iterator();
                    while( iter.hasNext() )
                    {
                        PDPage page = (PDPage)iter.next();
                        PDResources resources = page.getResources();
                        // extract all XObjectImages which are part of the page resources
                        processResources(resources, prefix, addKey);
                    }
                }
                finally
                {
                    if( document != null )
                    {
                        document.close();
                    }
                }
            }
        }
    }

    private void processResources(PDResources resources, String prefix, boolean addKey) throws IOException
    {
        if (resources == null)
        {
            return;
        }
        Map<String, PDXObject> xobjects = resources.getXObjects();
        if( xobjects != null )
        {
            Iterator<String> xobjectIter = xobjects.keySet().iterator();
            while( xobjectIter.hasNext() )
            {
                String key = xobjectIter.next();
                PDXObject xobject = xobjects.get( key );
                // write the images
                if (xobject instanceof PDXObjectImage)
                {
                    PDXObjectImage image = (PDXObjectImage)xobject;
                    String name = null;
                    if (addKey) 
                    {
                        name = getUniqueFileName( prefix + "_" + key, image.getSuffix() );
                    }
                    else 
                    {
                        name = getUniqueFileName( prefix, image.getSuffix() );
                    }
                    System.out.println( "Writing image:" + name );
                    image.write2file( name );
                }
                // maybe there are more images embedded in a form object
                else if (xobject instanceof PDXObjectForm)
                {
                    PDXObjectForm xObjectForm = (PDXObjectForm)xobject;
                    PDResources formResources = xObjectForm.getResources();
                    processResources(formResources, prefix, addKey);
                }
            }
        }
    }

    private String getUniqueFileName( String prefix, String suffix )
    {
        String uniqueName = null;
        File f = null;
        while( f == null || f.exists() )
        {
            uniqueName = prefix + "-" + imageCounter;
            f = new File( uniqueName + "." + suffix );
            imageCounter++;
        }
        return uniqueName;
    }

    /**
     * This will print the usage requirements and exit.
     */
    private static void usage()
    {
        System.err.println( "Usage: java org.apache.pdfbox.ExtractImages [OPTIONS] <PDF file>\n" +
            "  -password  <password>        Password to decrypt document\n" +
            "  -prefix  <image-prefix>      Image prefix(default to pdf name)\n" +
            "  -addkey                      add the internal image key to the file name\n" +
            "  -nonSeq                      Enables the new non-sequential parser\n" +
            "  <PDF file>                   The PDF document to use\n"
            );
        System.exit( 1 );
    }

} 
```

现在要裁剪图像，您可以使用：

```
/**
     * Crop the main image according to this rectangle, and scale it to the
     * correct size for a thumbnail.
     */
    public InputStream cropAndScale(InputStream mainImageStream,
            CropRectangle crop) {
        try {
            RenderedOp mainImage = loadImage(mainImageStream);
            RenderedOp opaqueImage = makeImageOpaque(mainImage);
            RenderedOp croppedImage = cropImage(opaqueImage, crop);
            RenderedOp scaledImage = scaleImage(croppedImage);
            byte[] jpegBytes = encodeAsJpeg(scaledImage);
            return new ByteArrayInputStream(jpegBytes);
        } catch (Exception e) {
            throw new IllegalStateException("Failed to scale the image", e);
        }
    } 
```

在[此页面](http://svn.code.sf.net/p/vivo/vitro/code/branches/dev-sdb/webapp/src/edu/cornell/mannlib/vitro/webapp/controller/freemarker/ImageUploadThumbnailer.java)和[项目中可用](http://svn.code.sf.net/p/vivo/vitro/code/branches/dev-sdb/webapp/src/edu/cornell/mannlib/vitro/webapp/controller/freemarker/)

还有其他选项可以解析 pdf 文件中的图像，请特别查看[此](https://svn.atlassian.com/svn/public/atlassian/vendor/pdf-renderer/tags/pdf-renderer-1.13-atlassian-1/src/main/java/com/sun/pdfview/PDFImage.java)[代码](https://svn.atlassian.com/svn/public/atlassian/vendor/pdf-renderer/tags/pdf-renderer-1.13-atlassian-1/src/main/java/com/sun/pdfview/)

# jquery - 如何使切换（）在jQuery中工作

> ID：14864296
> 
> 赞同：1
> 
> 时间：2013-02-13T22:18:29.957
> 
> 标签：jquery, css, toggle

我在一本关于 jQuery 的书中做一个问题。我有以下 HTML：

```
<div id="switcher" class="switcher">
  <h3>Style Switcher</h3>
  <button id="switcher-default">Default</button>
  <button id="switcher-narrow">Narrow</button>
  <button id="switcher-large">Large</button>
</div> 
```

我试图通过单击标题来打开/关闭按钮。这是jQuery：

```
$(document).ready( function () {
 $('#switcher h3').toggle(function() {
   $('#switcher button').addClass('hide');
}, function(){
   $('#switcher button').removeClass('hide');
}); 
```

由于某种原因，H3 元素（标题）在页面加载时立即隐藏，我无法选择它。真的，按钮应该隐藏，而不是 H3，对吧？

这是CSS：

```
.hide {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:23:59.220

`toggle`event 方法在 jQuery 1.8 中已被弃用并在 jQuery 1.9 中被删除，jQuery 1.9 使用`toggle`display 方法并隐藏你的元素。

您可以改为使用`click`和`toggle` *效果*方法：

```
$(document).ready( function () {
   $('#switcher h3').click(function(){
       $(this).siblings('button').toggle();
   })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:27:57.750

这比当前的答案略快：

```
$(function () {
   var switcher = $('#switcher');
   switcher.find('h3').click(function() {
     switcher.find('button').toggle();
  }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:21:09.453

您需要一个[`click()`](http://api.jquery.com/click/)处理程序`h3`，而不是[`toggle()`](http://api.jquery.com/toggle/)处理程序。

然后你可以简单地使用或[`toggleClass()`](http://api.jquery.com/toggleClass/)直接使用.[`toggle()`](http://api.jquery.com/toggle/)`$('#switcher button')`

```
$(document).ready( function () {
  $('#switcher h3').click(function() {
   $('#switcher button').toggleClass('hide');
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T22:22:10.250

该命令`toggle()`立即隐藏/取消隐藏元素。

您似乎正在寻找：

```
$(function () {
   $('#switcher h3').click(function() {
     $('#switcher button').toggle();
  }); 
}); 
```

# java - OpenGL矩阵乘法导致奇怪的浮点行为

> ID：14864299
> 
> 赞同：0
> 
> 时间：2013-02-13T22:18:43.943
> 
> 标签：java, opengl, lwjgl, rotational-matrices

我有一个用 LWJGL 为 java 编写的基本 OpenGL 程序。在阅读了为什么使用俯仰、偏航和滚动变量是一个坏主意后，我才刚刚开始研究旋转矩阵。然而，由于矩阵更难使用，我正在编写一个函数，它接受偏航、俯仰和滚动并将它们转换为旋转矩阵，然后将其与 Modelview 矩阵相乘。我的代码如下：

```
public static void loadRotationalMatrix(double pitch, double yaw, double roll)
{
    FloatBuffer Ry = ByteBuffer.allocateDirect(16 * Double.SIZE).asFloatBuffer();
    FloatBuffer Rx = ByteBuffer.allocateDirect(16 * Double.SIZE).asFloatBuffer();
    FloatBuffer Rz = ByteBuffer.allocateDirect(16 * Double.SIZE).asFloatBuffer();

    Rx.put(new float[]
        {
            1, 0, 0, 0,
            0, (float) cos(pitch), (float) sin(pitch), 0,
            0, (float) -sin(pitch), (float) cos(pitch), 0,
            0, 0, 0, 1
        });
    Ry.put(new float[]
        {
            (float) cos(yaw), 0, (float) -sin(yaw),  0,
            0, 1, 0, 0,
            (float) sin(yaw), 0, (float) cos(yaw), 0,
            0, 0, 0, 1
        });
    Rz.put(new float[]
        {
            (float) cos(roll), (float) sin(roll), 0, 0,
            (float) -sin(roll), (float) cos(roll), 0, 0, 
            0, 0, 1, 0,
            0, 0, 0, 1
        });

    GL11.glMultMatrix(Rx);
    GL11.glMultMatrix(Ry);
    GL11.glMultMatrix(Rz);
} 
```

首先，我传递`0, 0, 0`给了这个函数，我希望它对渲染的场景没有影响。但是，我正在绘制的简单正方形在函数调用后消失了。为了调试，我曾经`glGetFloat`访问模型视图矩阵并查看发生了什么。

这就是事情变得奇怪的地方（至少对我来说）：在我调用我的函数之前，检索到的`FloatBuffer`存储模型视图矩阵是

```
4.6006E-41, 0.0, 0.0, 0.0, 0.0, 4.6006E-41, 0.0, 0.0, 0.0, 0.0, 4.6006E-41, 0.0, 0.0, 0.0, 0.0, 4.6006E-41, 
```

或者，更具可读性，

```
4.6006E-41, 0.0, 0.0, 0.0, 
0.0, 4.6006E-41, 0.0, 0.0, 
0.0, 0.0, 4.6006E-41, 0.0, 
0.0, 0.0, 0.0, 4.6006E-41, 
```

一切正常。

在我打电话之后，矩阵变成了

```
0.0, 0.0, 0.0, 0.0, 
0.0, 0.0, 0.0, 0.0, 
0.0, 0.0, 0.0, 0.0, 
0.0, 0.0, 0.0, 0.0, 
```

我的测试方块消失了。

怎么了？我的矩阵是否创建不正确？有什么我不明白的`glMultMatrix`吗？有什么我需要启用或禁用的吗？为什么普通矩阵中有那些奇怪的浮点数？它不应该是单位矩阵（带1）吗？

编辑：

如果`BufferUtils.createFloatBuffer(16 * Float.SIZE);`使用而不是`ByteBuffer.allocateDirect(16 * Float.SIZE).asFloatBuffer();`，则提到的字节顺序问题消失并且`4.6006E-41`' 成为`1.0`预期的那样。但是，矩阵仍然从单位转换为纯零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:41:01.903

（这真的是一个扩展注释，有代码）

这里肯定存在字节顺序问题。我运行了以下内容：

```
public class Test {
  public static void main(String[] args) {
    float f = (float)4.6006E-41;
    System.out.println(Integer.toHexString(Float.floatToIntBits(f)));
  }
} 
```

并得到输出 803f

浮点 1.0 是大端 0x3f800000。

# python - 如何访问嵌套列表中的元组元素

> ID：14864300
> 
> 赞同：6
> 
> 时间：2013-02-13T22:18:56.130
> 
> 标签：python, list, tuples

我有一个带有嵌套列表的列表，其中包含元组。该列表如下所示：

```
428 [(' whether', None), (' mated', None), (' rooster', None), ('', None)]
429 [(' produced', None), (' without', None), (' rooster', None), (' infertile', None), ('', None)] 
```

我希望能够访问元组的“无”元素，每个索引值。我想创建一个具有相同索引值的新列表，如下所示：

```
428 [(None, None, None, None)]
429 [(None, None, None, None, None)] 
```

我真的不在乎“无”是什么类型。我只是希望它们作为一个单独的列表。

我试过列表推导，但我只能检索元组本身，而不是里面的元素。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T22:27:39.480

仅包含元组的单个列表最简单的是：

```
[x[1] for x in myList]
# [None, None, None, None] 
```

或者如果它总是元组中的最后一个值（如果它包含两个以上的值）：

```
[x[-1] for x in myList]
# [None, None, None, None] 
```

请注意，下面的这些示例使用嵌套列表。它是一个包含元组的列表列表。我想这就是您要寻找的东西，因为您展示了列表的两种变体。

使用嵌套的理解列表：

```
myList =[ [(' whether', None), (' mated', None), (' rooster', None), ('', None)] ,
          [(' produced', None), (' without', None), (' rooster', None), (' infertile', None), ('', None)] ]

print [[x[1] for x in el] for el in myList]
# [[None, None, None, None], [None, None, None, None, None]] 
```

或其他一些变体：

```
myList =[ [(None, None), (' mated', None), (' rooster', None), ('', None)] ,
              [(' produced', None), (' without', None), (' rooster', None), (' infertile', None), ('', None)] ]

# If there are multiple none values (if the tuple isn't always just two values)
print [ [ [ x for x in z if x == None] for z in el ] for el in myList ]
# [[[None, None], [None], [None], [None]], [[None], [None], [None], [None], [None]]]

# If it's always the last value in the tuple
print [[x[-1] for x in el] for el in myList]
# [[None, None, None, None], [None, None, None, None, None]] 
```

另请参阅： [SO：了解嵌套列表理解](https://stackoverflow.com/questions/8049798/understanding-nested-list-comprehension)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T22:22:08.017

您可以像处理列表元素一样处理元组中的元素：使用索引。例如：

```
lst = [1, (2, 3)]
lst[1][1] # first index accesses tuple, second index element inside tuple
=> 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:26:18.620

如果您只想获取`None`它是否存在于元组中：

`tuple([None for t in list if None in t])`

这将重新创建一个包含它所在的每个元组的元组。请注意，如果您想要总共`None`# of ，这不是一个好的解决方案。`None`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:26:39.237

你展示的东西实际上并不是一个列表，而且很难猜测实际的列表可能是什么。但我会假设它是这样的：

```
list_o_lists = [428,
 [(' whether', None), (' mated', None), (' rooster', None), ('', None)],
 429,
 [(' produced', None),
  (' without', None),
  (' rooster', None),
  (' infertile', None),
  ('', None)]] 
```

访问其中的元组的任何列表理解已经非常可怕：

```
[[tup for tup in lst] if is_sequence(lst) else lst for lst in list_o_lists] 
```

但是修改它以访问每个元组的第二个元素是微不足道的：

```
[[tup[1] for tup in lst] if is_sequence(lst) else lst for lst in list_o_lists] 
```

真的，不管你的列表理解是什么，不管它有多可怕，根据你的问题，你在某个地方把每个元组作为一个表达式，这意味着你所要做的就是`[1]`在那个表达式上加上一个。

* * *

从您的评论中：

> 对不起，数字是索引值。

我*认为*你实际上有一些更简单的东西：

```
list_o_lists = [
 [(' whether', None), (' mated', None), (' rooster', None), ('', None)],
 [(' produced', None),
  (' without', None),
  (' rooster', None),
  (' infertile', None),
  ('', None)]] 
```

然后你尝试的列表理解可能是这样的：

```
[[tup for tup in lst] for lst in list_o_lists] 
```

当然这只是一个猜测，因为你还没有向我们展示你的实际列表，或者你尝试的列表理解。但正如我在上面所说的：“……不管你的列表理解是什么……在某个地方你把每个元组作为一个表达式，这意味着你所要做的就是`[1]`在那个表达式上加上一个。”

所以，这个和上面的一样容易改变：

```
[[tup[1] for tup in lst] for lst in list_o_lists] 
```

如果它不是你实际拥有的，那么你实际拥有的*也*将同样容易改变。但是你必须自己做，因为我们反复尝试读懂你的想法都失败了，而你面前有你的实际代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T23:04:05.283

使用带有 * 的 zip 将列表扩展为 args：

```
x = [(' whether', None), (' mated', None), (' rooster', None), ('', None)]
stuff, nones = zip(*x)
# prints: stuff
#(' whether', ' mated', ' rooster', '')
print nones
# prints: (None, None, None, None) 
```

zip 通过获取一堆列表并将每个参数的第一个元素放入列表中，并将第二个参数放入列表等中来工作

星号 (*) 扩展列表，因此您可以将 zip(*x) 想象为 zip(x[0],x[1], x[2],...x[n])

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T00:07:08.387

我想 428 和 429 是列表中不存在的索引。

所以，鉴于这个问题

```
li = [[(' whether', None), (' mated', None),
       (' rooster', None), ('', None)],

      [(' produced', None), (' without', None),
       (' rooster', None), (' infertile', None),
       ('', None)]

      ]

print [ [len(subli)*(None,)] for subli in li] 
```

将完成这项工作。

```
[[(None, None, None, None)], [(None, None, None, None, None)]] 
```

你的问题很奇怪。这些数据有什么用？

# javascript - 替换网页上链接的方括号

> ID：14864301
> 
> 赞同：0
> 
> 时间：2013-02-13T22:18:59.337
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery/Javascript 解析 html 内容。我想查找方括号之间的单词并将整个单词更改为链接。

例子：

```
<div>
   This is text inside a div. It has a reference to an [[Article]]
</div> 
```

我正在尝试使用正则表达式将双括号内的内容更改为如下内容：

```
<div>
   This is text inside a div. It has a reference to an <a href='/dictionary#Article'>Article</a>
</div> 
```

我可以使用这个正则表达式找到方括号之间的所有单词实例：

```
$('article').html().match(/[^[\]]+(?=])/g) 
```

但不知道如何替换文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:21:57.840

```
$("div").html(function(i, html) {
    return html.replace(/\[\[(.+?)\]\]/g, "<a href='/dictionary#$1'>$1</a>");
}); 
```

**演示：http:** [//jsfiddle.net/y4N6e/](http://jsfiddle.net/y4N6e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:32:42.967

就像是：

```
$('div').html($('div').html().replace(/\[\[([^\]]+)\]\]/, '<a href="/dictionary#$1">$1</a>') 
```

应该管用。

但是你应该看看[_.template 方法](http://underscorejs.org/#template)！

# wxpython - wxPython，单选按钮选择/取消选择和 wx.RB_GROUP

> ID：14864308
> 
> 赞同：1
> 
> 时间：2013-02-13T22:19:26.283
> 
> 标签：wxpython, radio-button

wxPython 和（分组的）单选按钮问题：

我有三个单选按钮绑定在一个组中，我看到这让我可以选择单选按钮 A、B 或 C，其中一个总是被选中——我很欣赏这是 wx.RB_GROUP 风格的本质；

是否可以通过仅单击单选按钮来取消选择 A=B=C=False 中的所有按钮？我已经简化了*重置*按钮执行此功能的代码（如下），但理想情况下我只想在 GUI 中取消选择。

```
import wx
class MyForm(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, "Tutorial", size=(300,250))
        panel = wx.Panel(self, wx.ID_ANY)
        self.radio1 = wx.RadioButton(panel, label="A", pos=(20,40), style=wx.RB_GROUP)
        self.radio2 = wx.RadioButton(panel, label="B", pos=(20,70))
        self.radio3 = wx.RadioButton(panel, label="C", pos=(20,100))

        btn = wx.Button(panel, label="Check", pos=(20,140))
        rst = wx.Button(panel, label="Reset", pos=(20,170))
        btn.Bind(wx.EVT_BUTTON, self.onBtn)
        rst.Bind(wx.EVT_BUTTON, self.onRst)

    def onBtn(self, event):
        print "A = ", self.radio1.GetValue()
        print "B = ", self.radio2.GetValue()
        print "C = ", self.radio3.GetValue()
        print "\n\n"

    def onRst(self, event):
        self.radio1.SetValue( 0 )
        self.radio2.SetValue( 0 )
        self.radio3.SetValue( 0 )

if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MyForm().Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T00:26:56.053

据我所知，wxPython 本身并不支持这一点。此外，这不是任何 UI 中单选按钮的预期行为，所以我的第一个想法是您的界面设计不正确。您是否考虑过添加一个进一步的“无”单选按钮，这在逻辑上等同于没有选择您的单选按钮？为什么不？

但是，我确实试图破解您的解决方案，但没有成功。事实上，考虑到我面临的困难，我高度怀疑即使*可以*对这种行为进行编程，你最好还是找到一个替代方案。

我的第一个想法是`wx.RadioButton`通过创建自定义来覆盖选择句柄的方式`wx.RadioButton`。以下是我使用这种方法发现的一些问题：

1.  `wx.EVT_RADIOBUTTON`仅在系统已更改单选按钮的值后才被捕获，因此我实际上*无法**覆盖*行为
2.  按钮在不同时间捕获`wx.EVT_RADIOBUTTON`（`id`指定否时），因此无法预测系统是否有进一步的更改排队，这可能会覆盖您对按钮值所做的任何更改。
3.  `wx.EVT_RADIOBUTTON`如果已选择单选按钮，则不会生成
4.  wxPython 只有`wx.EVT_LEFT_DOWN`和`wx.EVT_LEFT_UP`事件，两者都没有完全描述单选按钮如何知道它已被点击

然后我转向自定义`wx.RadioBox`，但我很快意识到没有方法可以完全取消选择单选框内的按钮，这意味着它也不是一个可接受的选择。

我想您可以编写某种`wx.Panel`包含多个`wx.CheckBox`对象的自定义，并尝试强制一次最多选择一个框，但是您再次遇到问题，这不是用户期望复选框的工作方式。我以前见过这种行为，但每次它都让我觉得很奇怪，我不能推荐它。此外，它还需要相当大的努力来发展。

我能找到的最接近您所要求的解决方案是`wx.RadioButton`双击时取消选择的自定义。这里的问题是用户不希望双击取消选择单选按钮，因此您现在需要考虑如何教他们这一点。

```
class DeselectableRB(wx.RadioButton):
    def __init__(self, parent, label, pos=None, style=0):
        #do the default init
        wx.RadioButton.__init__(self, parent, label=label, pos=pos, style=style)

        #catch double clicks
        self.Bind(wx.EVT_LEFT_DCLICK, self.onDClick)

    def onDClick(self, event):
        self.SetValue(0) 
```

但是，我仍然强烈认为`wx.RadioButton`带有“无”标签的附加功能是您最好的解决方案，因为它需要最少的努力，并且符合用户对单选按钮应该如何工作的期望（使其更直观）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T01:02:23.720

这可以取消选择 RadioButton 就像它是一个复选框：

```
import wx
class MyForm(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, "Tutorial", size=(300,250))
        panel = wx.Panel(self, wx.ID_ANY)
        self.radio1 = wx.RadioButton(panel, label="A", name='radio1', pos=(20,40), style=wx.RB_GROUP)
        self.radio2 = wx.RadioButton(panel, label="B", name='radio2', pos=(20,70))
        self.radio3 = wx.RadioButton(panel, label="C", name='radio3', pos=(20,100))

        self.radio1.Bind(wx.EVT_LEFT_DOWN, self.OnRB)
        self.radio2.Bind(wx.EVT_LEFT_DOWN, self.OnRB)
        self.radio3.Bind(wx.EVT_LEFT_DOWN, self.OnRB)

        btn = wx.Button(panel, label="Check", pos=(20,140))
        rst = wx.Button(panel, label="Reset", pos=(20,170))
        btn.Bind(wx.EVT_BUTTON, self.onBtn)
        rst.Bind(wx.EVT_BUTTON, self.onRst)

    def OnRB(self, event):
        event.GetEventObject().SetValue(not event.GetEventObject().GetValue())

    def onBtn(self, event):
        print "A = ", self.radio1.GetValue()
        print "B = ", self.radio2.GetValue()
        print "C = ", self.radio3.GetValue()
        print "\n\n"

    def onRst(self, event):
        self.radio1.SetValue( 0 )
        self.radio2.SetValue( 0 )
        self.radio3.SetValue( 0 )

if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MyForm().Show()
    app.MainLoop() 
```

请注意，我添加到您的代码中的是：

```
 self.radio1.Bind(wx.EVT_LEFT_DOWN, self.OnRB)
    self.radio2.Bind(wx.EVT_LEFT_DOWN, self.OnRB)
    self.radio3.Bind(wx.EVT_LEFT_DOWN, self.OnRB)

def OnRB(self, event):
    event.GetEventObject().SetValue(not event.GetEventObject().GetValue()) 
```

# c# - 自定义类型和设置设计器：设计器不会将设置值写入 app.config

> ID：14864311
> 
> 赞同：5
> 
> 时间：2013-02-13T22:19:37.570
> 
> 标签：c#, visual-studio-2010, designer, typeconverter, settings.settings

这是我想要做的：

*   具有应用程序范围的设置设置，其值是自定义类型的数组
*   将自定义类型的数组序列化为 XML，而不是字符串
*   将我的设置的序列化值保存在 app.config 中。

到目前为止，这让我望而却步。

我有一个自定义类型：

```
[TypeConverter(typeof(ServiceConfigurationConverter))]
[Serializable]
public class ServiceConfiguration
{
    public string Name { get; set; }
    public string Url { get; set; }
    // more
} 
```

它有一个自定义的 TypeConverter，可以将它从字符串来回转换。我是这样写的，因为我找到的示例都是为了转换为字符串，而且如果这意味着我的值被保存到 app.config 中，我愿意序列化为字符串。但正如我们将看到的，它们不是。

如果我指示（通过直接编辑 Settings.settings 文件）这个设置的类型是`MyNamespace.ServiceConfiguration[]`，我可以手动输入 XML 来表示数组。（我通过编写一个以编程方式构建数组然后使用`XmlSerializer`. .config。

这是有问题的，因为我希望人们能够在 app.config 中以 XML 形式查看属性值，并且能够在需要时更改它们。如果它不是从 app.config 写入和读取的，则它不是运行时可配置的。

如果我在 app.config 下手动创建一个条目`applicationSettings`，并在我的序列化数组中输入设置值，设置设计器会询问我是否要更新设置文件值，然后这样做 - 但删除了我输入的条目在下`applicationSettings`。

如有必要，我愿意考虑为我的自定义类型编写某种设计器，但我不知道那会是哪种设计器。

（我知道如果我只是将属性类型更改为“字符串”，我可以将序列化的 XML 保存为字符串并避免整个问题。但我想要的是一个类型是我的自定义类型的属性，而不是我想要的重组。）

谁能告诉我如何使用自定义类型实现本文顶部的三个目标？

非常感谢。

# objective-c - _underbar 变量在具有自动合成属性的子类中的用法？

> ID：14864314
> 
> 赞同：1
> 
> 时间：2013-02-13T22:20:01.983
> 
> 标签：objective-c

今天在 Xcode 4.6 中遇到了这个问题，这让我大吃一惊。我正在使用自动合成的属性（但手动合成没有区别）。

```
@interface TestA : NSObject
@property (strong) id foo;
@end

#import "TestA.h"
@interface TestB : TestA
- (id)initWithFoo:(id)foo;
@end

@implementation TestB
- (id)initWithFoo:(id)foo
{
    self = [super init];
    if (self)
    {
        _foo = foo; // Xcode says _foo is not defined.
        //self.foo = foo; // This does work though.
    }
    return self;
}
@end 
```

我可以很好地访问`_foo`in的实现，但不能在's 中访问。我可以通过将其作为 ivar 声明来解决此问题，但我认为我不必这样做。这里发生了什么？`TestA``TestB``id _userInfo``TestA.h`

# matlab - Matlab中conv2的替代方案

> ID：14864315
> 
> 赞同：3
> 
> 时间：2013-02-13T22:20:06.130
> 
> 标签：matlab

我正在使用 Matlab 并尝试各种不同的东西，并找出在不使用内置函数的情况下实现目标的方法。显然，Matlab（根据谷歌及其网站）不发布“conv2”功能的源代码。.

是否有“conv2（h1，h2，A）”的替代功能或一种无需使用 Matlabs 就可以编写您自己的版本的方法`conv2`。

Matlab 中的`help`选项/关键字并没有真正帮助我

- - 编辑 - -

这是替代`conv2(A,B)`. 但我正在寻找类似的东西`conv2(h1,h2,A)`

```
 function B = convolve(A, k);
    [r c] = size(A);
    [m n] = size(k);
    h = rot90(k, 2);
    center = floor((size(h)+1)/2);
    left = center(2) - 1;
    right = n - center(2);
    top = center(1) - 1;
    bottom = m - center(1);
    Rep = zeros(r + top + bottom, c + left + right);
    for x = 1 + top : r + top
        for y = 1 + left : c + left
            Rep(x,y) = A(x - top, y - left);
        end
    end
    B = zeros(r , c);
    for x = 1 : r
        for y = 1 : c
            for i = 1 : m
                for j = 1 : n
                    q = x - 1;
                    w = y -1;
                    B(x, y) = B(x, y) + (Rep(i + q, j + w) * h(i, j));
                end
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:29:55.577

我完全同意 Jonas 的观点，但我会向您推荐 FEX 的另一个选项：[`Fast 2-D convolution`](http://www.mathworks.com/matlabcentral/fileexchange/22619-fast-2-d-convolution)是一个 2D conv，用于`svd`在某些条件下使其更快（您需要从代码中挖掘出来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:32:53.597

这里有一些不做卷积的想法`conv2`

*   用于`im2col`将滑动窗口转换为列，然后在每一列上并行执行卷积。

*   使用傅里叶变换：`ifft(fft(A).*fft(B))`- 你必须先填充内核。

# security - 无法在 Windows PE 中的非域计算机上使用 ServerBind 查询 Active Directory

> ID：14864323
> 
> 赞同：1
> 
> 时间：2013-02-13T22:20:43.130
> 
> 标签：security, active-directory, directoryservices, winpe

我需要编写一个 .NET 应用程序，该应用程序将在尚未成为域成员的计算机上的[Windows PE中运行时查询 Active Directory。](http://technet.microsoft.com/en-us/library/cc766093%28v=ws.10%29.aspx)

我们在 Microsoft 部署工具包任务序列期间运行此程序（请注意，MDT 2012 已配置为将 .NET 支持加载到 WinPE 环境中 - .NET 应用程序正在启动而没有任何问题）。

我正在使用下面的代码绑定到域：

```
DirectoryEntry entry = new DirectoryEntry(
  path,
  username,
  password,
  AuthenticationTypes.ServerBind | AuthenticationTypes.Secure); 
```

我尝试了`path`两种形式：

`LDAP://domainServer/dc=domain,dc=name`

而且也没有域控制器名称

`LDAP://dc=domain,dc=name`

我也尝试过使用`username`两种形式`domain\username`，也只是`username`.

该`DirectoryEntry`对象似乎构造得很好，但是当我尝试执行`Console.Writeline(entry.Name)`以确认已建立有效连接时，出现以下异常：

> System.Runtime.InteropServices.COMException (0x80005000): System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
> 在 System.DirectoryServices.DirectoryEntry.Bind() 在 System.DirectoryServices.DirectoryEntry.get_Name() 的未知错误 (0x80005000)

我尝试了此代码的其他变体，尝试使用各种过滤器执行 LDAP 查询，尝试在 VBScript 中重写它等等......但上面发布的代码是我能想出的最简单的例子，它重现了这个问题。

根据我的阅读，在这样的场景中，您总是需要使用`AuthenticationTypes.ServerBind`，这就是我尝试在 ADSI LDAP 路径中指定代码的原因。但是上面的代码有什么问题？对我来说，它看起来像是将参数中所有需要的信息传递给`DirectoryEntry`构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T15:28:52.733

有一种方法可以让它工作，但微软不支持它。这篇文章对我帮助很大。它可以工作、测试和批准用于部署新计算机:)

`ADSIxXX.inf`从 zip 文件中获取`C:\ADSI`

将以下文件从 Windows/System32 复制到`C:\ADSI`. 细心的建筑 `x86 x64`——

```
 adsldp.dll
   adsmsext.dll
   adsnt.dll
   mscoree.dll
   mscorier.dll
   mscories.dll 
```

安装`bootimage.wim`

无需加载包（您的 WinPE 已配置为加载 .NET API），只需添加 ADSI 驱动程序：

```
Dism /Image:C:\Mount /Add-Driver /Driver:C:\ADSI\ADSIxXX.inf /forceunsigned 
```

无需加载他的脚本

卸载`bootimage.wim`

然后它就完成了，如果你的 .NET 应用程序实现得很好；）我不喜欢 PIPE | 也支持作为参数，只需设置为`AuthenticationTypes.Secure`-

```
DirectoryEntry entry = new DirectoryEntry(
  path,
  username,
  password,
  AuthenticationTypes.ServerBind | AuthenticationTypes.Secure); 
```

链接： http: [//www.deploymentresearch.com/Research/tabid/62/EntryId/74/ADSI-plugin-for-WinPE-4-0.aspx#AddComment](http://www.deploymentresearch.com/Research/tabid/62/EntryId/74/ADSI-plugin-for-WinPE-4-0.aspx#AddComment)

# java - 如何使 Content-Type 标头可选？

> ID：14864332
> 
> 赞同：0
> 
> 时间：2013-02-13T22:21:08.327
> 
> 标签：java, spring, rest

我有一个使用 Spring REST 服务实现的心跳 API：

```
@RequestMapping(value = "heartbeat", method = RequestMethod.GET, consumes="application/json")
public ResponseEntity<String> getHeartBeat() throws Exception {
    String curr_time = myService.getCurrentTime();      
    return Util.getResponse(curr_time, HttpStatus.OK);
} 
```

MyService.java 有以下方法：

```
public String getCurrentTime() throws Exception {
    String currentDateTime = null;
    MyJson json = new MyJson();
    ObjectMapper mapper = new ObjectMapper().configure(SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false);

    try {           
        Date currDate = new Date(System.currentTimeMillis());
        currentDateTime = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(currDate);           
        json.setTime(currentDateTime);                      

        ObjectWriter writer = mapper.writerWithView(Views.HeartBeatApi.class);
        return writer.writeValueAsString(json);                 
    } catch (Exception e) {
        throw new Exception("Excpetion", HttpStatus.BAD_REQUEST);           
    }
} 
```

它按预期工作，但有两个问题：

1.  当我调用此 API 时，Content-Type 标头是强制性的，我想知道如何使此标头可选。

2.  如何添加“Accept”标头以支持其他格式，例如 Google Protobuf？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:36:06.637

如果您不想要求 Content-Type 存在并且是“application/json”，则可以完全省略消耗部分。

“Accept”可通过“produces”值获得，而不是“consumes”。所以如果你想支持 Google Protobuf OR application/json，你可以这样做：

```
@Controller
@RequestMapping(value = "/pets/{petId}", method = RequestMethod.GET, produces="application/json")
@ResponseBody
public ResponseEntity<String> getHeartBeat() throws Exception {
    String curr_time = myService.getCurrentTime();      
    return Util.getResponse(curr_time, HttpStatus.OK);
} 
```

# mingw - MingGW-w64 用法

> ID：14864336
> 
> 赞同：0
> 
> 时间：2013-02-13T22:21:19.393
> 
> 标签：mingw, mingw-w64

我最近安装了 MinGW-w64。现在我想编译一个示例程序，但我遇到了一个重要问题：

如何用 32 位或 64 位编译？我找到了一个 lib 和一个 lib32 目录，所以一定有办法同时编译这两个目录。

但是如何将它编译为 32 位和 64 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:37:28.710

如果要编译为 64 位，请使用 64 位编译器

```
x86_64-w64-mingw32-gcc 
```

如果要编译为 32 位，请使用 32 位编译器

```
i686-w64-mingw32-gcc 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:46:40.603

请参阅此处以根据您下载的文件的名称确定您拥有的工具链：http: [//sourceforge.net/apps/trac/mingw-w64/wiki/download%20filename%20structure](http://sourceforge.net/apps/trac/mingw-w64/wiki/download%20filename%20structure)

（预计启动“mingw-w32”或“mingw-w64”并在第一种情况下支持32位目标或在第二种情况下支持64位目标）。

如果您下载 64 位目标的工具链，那么如果您使用它可能也能够生成 32 位目标

```
-m32 
```

选项。

# ios - contentEditable ios webkit safari 上的固定位置损坏

> ID：14864337
> 
> 赞同：7
> 
> 时间：2013-02-13T22:21:22.363
> 
> 标签：ios, safari, webkit, contenteditable, css-position

我想创建一个`wysiwyg-editor`for`ipad`并拥有一个带有`position:fixed`- 的工具栏，以便它始终可用。

但是，当我专注于`div`工具`contentEditable="true"`栏时不再固定。

这是一个错误吗？

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T14:16:58.480

只是在寻找同样的东西时发现了这个 - 出于同样的原因......

我们对工具栏有一个中途解决方案，但它有点偏离页面，然后在滚动最终停止时重置到正确的位置。该解决方案尚未推送到 github，但将在接下来的几天内发布。到目前为止，我们最好的方法是一大块 JS，如果我们认识到我们在 iOS 上工作，它会强制 div 回到原位:-(

但是您可能想检查我们在任何情况下构建的编辑器 :-) [http://www.quink.mobi](http://www.quink.mobi)或[https://github.com/IMD-Business-School/Quink](https://github.com/IMD-Business-School/Quink)。

# asp.net-mvc - TextBoxFor 中“htmlAttributes”的类型以及如何向其添加更多属性

> ID：14864338
> 
> 赞同：2
> 
> 时间：2013-02-13T22:21:27.600
> 
> 标签：asp.net-mvc, extension-methods

我添加了一个扩展方法作为我的 MVC 视图的助手，并希望将另一个属性添加到它已有的任何属性中。这是标准 TextBoxFor 方法的签名（我的，除了我的称为“TextBoxForWithTitle”）：

```
public static MvcHtmlString TextBoxFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression,
    Object htmlAttributes
) 
```

最后一个参数 htmlAttributes 看起来像一个名称值对。当我将鼠标悬停在它上面时（在运行时），它的值是我在 Razor 视图中添加的“{ class = emailtextbox }”。如何在我的扩展方法中为此添加另一个名称/值属性？我尝试将其转换为字典，但这没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:35:33.830

它表明它是对象的类型。如何初始化一个新对象？`new { [properties go here] }`. 所以我们归结为：

```
@Html.TextBoxFor(x => x.SomeId, new { @class = "whatever-class", @id = 5, data_customAttr = "customAttribute"}) 
```

请注意，如果您需要`data-`属性，请使用`_`而不是`-`. 他们将被转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T22:36:21.457

您可以将其作为**RouteValueDictionary**访问：

```
IDictionary<string, object> newAttributes = new RouteValueDictionary(htmlAttributes); 
```

这允许您在代码中添加新项目：

```
newAttributes.Add(new KeyValuePair<string, object>("id", id)); 
```

# ruby - 无法理解在实践中如何使用命令行选项“-T”

> ID：14864344
> 
> 赞同：1
> 
> 时间：2013-02-13T22:21:49.397
> 
> 标签：ruby, ruby-1.9.3

无法理解在实践中如何使用下面的命令行选项。

```
-T[level=1] 
```

我试过这段代码：

```
#commandoptionstest.rb
puts "hello world" 
```

不同`SAFE`级别：

输出正常

```
@ubuntu:~/script$ ruby -x commandoptionstest.rb
# => hello world 
```

为什么会出错？我需要做什么才能`commandoptionstest.rb`允许？`-x``-T`

```
@ubuntu:~/script$ ruby -x -T commandoptionstest.rb
# => ruby: no -x allowed in tainted mode (SecurityError) 
```

输出来了

```
@ubuntu:~/script$ ruby -T commandoptionstest.rb
# => hello world 
```

输出来了

```
@ubuntu:~/script$ ruby -T1 commandoptionstest.rb
# => hello world 
```

输出来了

```
@ubuntu:~/script$ ruby -T2 commandoptionstest.rb
# => hello world 
```

输出来了

```
@ubuntu:~/script$ ruby -T3 commandoptionstest.rb
# => hello world 
```

再次为什么错误？

```
@ubuntu:~/script$ ruby -T4 commandoptionstest.rb
# => commandoptionstest.rb:15:in `write': Insecure operation `write' at level 4 (SecurityError)
#   from commandoptionstest.rb:15:in `puts'
#   from commandoptionstest.rb:15:in `puts'
#   from commandoptionstest.rb:15:in `<main>' 
```

在上面的代码的帮助下，你能解释一下为什么`SAFE`levels `1`, `2`,`3`是打印的`"hello world"`，而`SAFE`level`4`不是吗？要允许`SAFE`level的写操作`4`，这里应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:26:48.900

它设定了`$SAFE`水平。

这决定了如何处理输入，以及关于环境变量、I/O、线程、异常、解释器命令行参数等的大量其他内容。

[http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html)

IMO 文档是一个很好的起点。*如果您对特定*行为有疑问，请询问。

* * *

要解决您的评论和编辑：

是的，我可以，但**文档也可以**，而且可能更好。

**为什么不`-x`工作？**

因为文档说它不会：

> **$SAFE >= 1**
>    * 不允许使用命令行选项 -e、-i、-I、-r、-s、-S 和 -x。

[~]$ ruby​​ --help Usage: ruby​​ [switches] [--] [programfile] [arguments] # elided -T[level=1] 打开污染检查

`-T`因此，如果没有指定数字，则默认级别是`1`，这意味着`$SAFE >= 1`，这正是文档所说的：`-x`不允许。

**为什么不起作用`puts`？**

很难说，因为您实际上并没有提供您正在执行的代码，但很可能再次像文档所说的那样：

> **$SAFE >= 4**
>    * 不能写入文件或管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:26:55.950

[perl CGI FAQ](http://gunther.web66.com/FAQS/taintmode.html)比我能更好地解释这一点。基本上，这是一种确保您的参数已被您验证的方法。

# javascript - 如何将ajax响应加载到iframe而不是div？

> ID：14864345
> 
> 赞同：1
> 
> 时间：2013-02-13T22:21:51.713
> 
> 标签：javascript, jquery, ajax, iframe

我正在加载对 div 的 ajax 响应，但现在我想将它加载到中间 iframe 我尝试了以下操作，但它从来没有工作！你们能告诉我我做错了什么吗？谢谢

```
<script type="text/javascript">// <![CDATA[

    $(document).ready(function() {
    $.ajaxSetup({ cache: false }); 
    setInterval(function() {
    //$('#divToRefresh').load('./doit.php');

    $("#iframe").attr('blank.php','./doit.php'); //change url
    }, 20000); 
    });
    // ]]></script>

<iframe name="top" src="blank.php" id="top"  scrolling="no" noresize frameborder="0" marginwidth="0" marginheight="0" width="100%" height="79"></iframe>
<iframe NAME="middle" src="blank.php" id="middle" noresize frameborder="0" marginwidth="0" marginheight="0" width="100%" height="238" scrolling="auto"></iframe>
<iframe NAME="foot" src="blank.php" id="foot"  scrolling="no"  noresize frameborder="0" marginwidth="0" marginheight="0" width="100%" height="200"></iframe>

<div id="divToRefresh">Loading ...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:25:14.683

attr 用于替换属性，您不是在说明要替换哪个属性，而是在说明该属性的值

它应该是这样的：

```
$("#middle").attr('src','./doit.php'); //change url 
```

然而，这不是 ajax ......它是简单的 iframe 技术，换句话说 $.ajaxSetup({ cache: false }); 在这种情况下不使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:27:32.623

您的 ajax 调用错误或不完整。如果你想使用 ajax 获取数据；您应该阅读[**jQuery.ajax() 文档**](http://api.jquery.com/jQuery.ajax/)。但首先，**[this](http://en.wikipedia.org/wiki/Ajax_%28programming%29)和[this](http://www.w3schools.com/ajax/ajax_intro.asp)或[this](http://www.codeproject.com/Articles/534632/WhatplusisplusAJAX-3f)**。

另请阅读[**.attr() 文档**](http://api.jquery.com/attr/)。第一个参数应该是属性名称，第二个应该是值。

但; 看起来你想重定向那个页面`iframe`。
如果是这种情况，您的选择器应该是`#middle`：

```
$("#middle").attr("src", "./doit.php"); 
```

您也可以通过这样的链接（没有 jQuery 或 javascript）来完成：

```
<a href="./doit.php" target="middle">Do It!</a> 
```

# javascript - 如何解析 JSON 对象？（从服务器端到客户端...javascript）

> ID：14864357
> 
> 赞同：0
> 
> 时间：2013-02-13T22:22:20.407
> 
> 标签：javascript, jquery, asp.net, json

我有一个与服务器端 Web 方法交互的 jquery。Web 方法接受来自 jquery 的字符串“memID”并基于它执行 SQL 查询。然后我创建一个类：-

```
public class Member
{
    // Objects of Member. //
    public string id { get; set; }
    public string HPCode { get; set; }
    public string OPfromDate { get; set; }
    public string OPthruDate { get; set; }

    public Member(string ID, List<string> hpCode, List<string> opfromDate, List<string> opthruDate)
    {
        id = ID;
        for (int j = 0; j < hpCode.Count; j++){ HPCode = HPCode + (hpCode)[j] + '*' };
        for (int j = 0; j < opfromDate.Count; j++){OPfromDate = OPfromDate + (opfromDate)[j] + '*' };
        for (int j = 0; j < opthruDate.Count; j++){OPthruDate = OPthruDate+ (opthruDate)[j] + '*' };   
    }
} 
```

此类用于将我的 SQL 查询结果返回给客户端：-

```
return JsonConvert.SerializeObject(member); 
```

我使用断点并在客户端检查，确实它正在获取返回值。但是，我不确定解析这些值并将它们存储在我的 javascript 端的变量中的最佳方法是什么，以便我可以将它们用于客户端功能。

```
// Ajax function that sends member ID from client side to server side without a post back. 
function ajax() 
{
    $.ajax 
    ({
        url: 'Default.aspx/MyMethod',
        type: 'POST',
        dataType: "json",
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ memID: mem_ID }),
        success: onSuccess, 
        fail : onFail

   });
}

// If client-to-server communication is successful. 
function onSuccess(data) 
 {
     confirm(data.d);
     var returnedstring = (data.d);
     var jsondata = $.parseJSON(data.d);

 } 
```

现在我该如何解析“数据”？有评估功能吗？还是解析函数？

有人有任何网络示例吗？在此之前，我只将 1 个值传回给我的客户端，所以很容易获得，现在我对多个值感到困惑。

**更新：-**

我尝试在我的 javascript 端这样做：-

```
var returnedstring = (data.d);
var member = data.d.id;
var Hp = data.d.HPCode; 
```

但是，当我使用断点并用鼠标悬停在它们上时，我将 member 和 HP 设为未定义，但是返回的字符串具有所有正确的值.....有什么想法吗？

**解决方案（我无法弄清楚答案中建议的其他方式，但这对我有用）：-**

```
function onSuccess(data) 
 {
     // stores entire return in one string.
     var returnedstring = (data.d);

     // parses json returned data
     var jsondata = $.parseJSON(data.d);

     var member = jsondata.id;
     var HpCode = jsondata.HPCode;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:24:11.190

因为您正在使用`dataType: "json"`,`data`已经从 JSON 字符串中解析出来。这就是为什么您可以使用`data.d`Javascript 访问的原因。

要访问成员，您可以执行以下操作：

```
console.log(data.d.HPCode); 
```

# ruby - 带硒的水豚，send_key 不起作用

> ID：14864364
> 
> 赞同：5
> 
> 时间：2013-02-13T22:22:46.697
> 
> 标签：ruby, cucumber, capybara, nokogiri

我正在使用 Cucumber 来测试没有提交按钮的评论表单。我发现 selenium 有一个名为 send_key 的方法，理论上它应该允许我这样做：

```
find_field('my-field').native.send_key(:enter) 
```

但是当我运行测试时，我得到：

```
undefined method `send_key' for #<Nokogiri::XML::Element:0x007f874b361828> (NoMethodError) 
```

不知道我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T09:59:33.797

您必须使用 Selenium 驱动程序而不是`:rack_test`Capybara 中的驱动程序来访问该`send_keys`方法：

*   如果您使用捆绑器，请安装 gem`selenium-webdriver`并将其添加到您的 gem 文件中。
*   使用标记您的测试，`:js => true`以便它与 Selenium 驱动程序一起运行。

您会收到错误消息，因为默认情况下，Capybara 使用`:rack_test`驱动程序。调用`native`元素访问驱动程序特定的方法。`:rack_test`驱动程序元素本机实现为`Nokogiri::XML::Element`，因此这些`send_keys`方法不存在，您会收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:58:23.067

尝试使用 xpath

```
within(:xpath, "//form[@id='the_form']") do
  locate(:xpath, "//input[@name='the_input']").set(value)
  locate(:xpath, "//input[@name='the_input']").node.send_keys(:return)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T22:29:13.030

你也可以有一个隐藏的按钮。Capybara可以看到并点击它。

```
<%= form.submit "OK", style: "display: none;" %> 
```

然后在你的测试中：

```
Capybara.ignore_hidden_elements = false
click_on "OK" 
```

# image - 处理 IText XMLWorker 中的嵌入图像

> ID：14864369
> 
> 赞同：3
> 
> 时间：2013-02-13T22:23:10.530
> 
> 标签：image, base64, itext

处理 IText XMLWorker 中的嵌入图像。

有没有办法在 XMLWorker 中处理嵌入式（Base64）图像？在 5.3.5 版本中，我使用的 ImageProvider 不再工作（之前引发了异常），所以我对 ImageRetrieve 进行了如下修补，但显然这将在下一次 XMLWorker 更新中被破坏：

```
package com.itextpdf.tool.xml.net;

import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;

import com.itextpdf.text.BadElementException;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.codec.Base64;
import com.itextpdf.tool.xml.net.exc.NoImageException;
import com.itextpdf.tool.xml.pipeline.html.ImageProvider;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * @author redlab_b
 *
 */
public class ImageRetrieve {
    final static Pattern INLINE_PATTERN = Pattern.compile("^/data:image/(png|jpg|gif);base64,(.*)");

    private final ImageProvider provider;
    /**
     * @param imageProvider the provider to use.
     *
     */
    public ImageRetrieve(final ImageProvider imageProvider) {
        this.provider = imageProvider;
    }
    /**
     *
     */
    public ImageRetrieve() {
        this.provider = null;
    }
    /**
     * @param src an URI that can be used to retrieve an image
     * @return an iText Image object
     * @throws NoImageException if there is no image
     * @throws IOException if an IOException occurred
     */
    public com.itextpdf.text.Image retrieveImage(final String src) throws NoImageException, IOException {
        com.itextpdf.text.Image img = null;
        if (null != provider) {
            img = provider.retrieve(src);
        }

        if (null == img) {
            String path = null;
            if (src.startsWith("http")) {
                // full url available
                path = src;
            } else if (null != provider){
                String root = this.provider.getImageRootPath();
                if (null != root) {
                    if (root.endsWith("/") && src.startsWith("/")) {
                        root = root.substring(0, root.length() - 1);
                    }
                    path = root + src;
                }
            } else {
                path = src;
            }
            if (null != path) {
                try {
                  Matcher m;
                    if (path.startsWith("http")) {
                        img = com.itextpdf.text.Image.getInstance(path);
                    } else if ((m = INLINE_PATTERN.matcher(path)).matches()) {
                      // Let's handle the embedded image without saving it
                      try {
                        byte[] data = Base64.decode(m.group(2));
                        return Image.getInstance(data);
                      } catch (Exception ex) {
                        throw new NoImageException(src, ex);
                      }
                    } else {
                        img = com.itextpdf.text.Image.getInstance(new File(path).toURI().toURL());
                    }
                    if (null != provider && null != img) {
                        provider.store( src, img);
                    }
                } catch (BadElementException e) {
                    throw new NoImageException(src, e);
                } catch (MalformedURLException e) {
                    throw new NoImageException(src, e);
                }
            } else {
                throw new NoImageException(src);
            }
        }
        return img;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-15T17:41:56.637

你问这个问题已经快一年了，但也许这个答案无论如何都会有所帮助。

最近我遇到了类似的问题。我的目标是在生成的 pdf 中包含存储在数据库中的图像。

为此，我扩展了`com.itextpdf.tool.xml.pipeline.html.AbstractImageProvider`类并重写了它的`retrieve()`方法，如下所示：

```
public class MyImageProvider extends AbstractImageProvider {

  @Override
  public Image retrieve(final String src) {
    Image img = super.retrieve(src);
    if (img == null) {
      try {
        byte [] data = getMyImageSomehow(src);
        img = Image.getInstance(data);
        super.store(src, img);
      }
      catch (Exception e) {
        //handle exceptions
      }
    }
    return img;
  }

  @Override
  public String getImageRootPath() {
    return "http://sampleurl/img";
  }
} 
```

然后，在为 XMLWorker [1] 构建管道时，我将我的类的一个实例传递给上下文：

```
htmlPipelineContext.setImageProvider(new MyImageProvider()); 
```

现在我们希望这应该有效。但是有一个问题！在某个地方，在 xmlworker 库的深处，正在克隆这个 htmlPipelineContext。在此操作期间，我们的 ImageProvider 实现丢失了。这发生在 HtmlPipelineContext 的 clone() 方法中。看一下第 274-280 行（我指的是 5.4.4 版本）：

```
final String rootPath =  imageProvider.getImageRootPath();
newCtx.setImageProvider(new AbstractImageProvider() {
  public String getImageRootPath() {
    return rootPath;
  }
}); 
```

这甚至在 HtmlPipelineContext.clone() 的 javadoc [2] 中有描述：

> 创建这个HtmlPipelineContext的一个克隆，这个克隆只包含初始值，不包含内部值。请注意，当前上下文的状态不会复制到克隆。只有配置重要的东西，如 (...) ImageProvider (new AbstractImageProvider with same ImageRootPath) ， (...) 被复制。

这不是很好笑吗？您会通过将其抽象化来获得为扩展而设计的类，但最后事实证明，该类仅用作属性持有者。

我的解决方法：

```
public class MySpecialImageProviderAwareHtmlPipelineContext extends HtmlPipelineContext {

  MySpecialImageProviderAwareHtmlPipelineContext () {
    super(null);
  }

  public HtmlPipelineContext clone () {
    HtmlPipelineContext ctx = null;
    try {
      ctx = super.clone();
      ctx.setImageProvider(new MyImageProvider());
    } catch (Exception e) {
      //handle exception
    }
    return ctx;
  }

} 
```

然后我只使用它而不是 HtmlPipelineContext。

* * *

[1] [http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html#itextdoc-menu-7](http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html#itextdoc-menu-7)

[2] [http://api.itextpdf.com/xml/com/itextpdf/tool/xml/pipeline/html/HtmlPipelineContext.html#clone()](http://api.itextpdf.com/xml/com/itextpdf/tool/xml/pipeline/html/HtmlPipelineContext.html#clone())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T09:13:43.030

希望您的解决方案似乎已在更高版本（至少 5.5.6）中采用。

# css - IE < 9 上的重叠 div - 在 IE9 和其他浏览器上工作正常

> ID：14864370
> 
> 赞同：1
> 
> 时间：2013-02-13T22:23:10.790
> 
> 标签：css, html, internet-explorer-9, overlapping

我已经开发了一个网站（顺便说一下，为一位年轻且非常有创意的艺术家:) 但我遇到了重叠 div 的问题。

可以在[http://www.anaaragao.com/galeria/看到](http://www.anaaragao.com/galeria/)

如果您按“投资组合”，类别列表将出现错位。此外，如果选择其中一个类别，则帖子图像将显示在单个列上，而不是网格上。

它不会在 IE9、Firefox、Chrome 或 Safari 中发生。如果有人能指出我正确的方向，将不胜感激。与此同时，我一直在寻找。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:37:26.333

我没有看你的js代码，但是在IE 8中加载时似乎创建了错误的样式。这是你源代码中的第一个ul列。

```
<ul class="mcol2 li_cont1" style="width: 293px; cssfloat: left;"> 
```

将样式值从 更改`"width: 293px; cssfloat: left;"`为`"width: 293px; float: left;"`，然后它将解决布局问题。

# heroku - Play 2.x 应用程序在本地运行，但在 Heroku 上因“下载失败”而失败

> ID：14864371
> 
> 赞同：1
> 
> 时间：2013-02-13T22:23:12.010
> 
> 标签：heroku, playframework-2.0, sbt

在本地运行我的应用程序时，一切正常。我什至跑了

```
rm -r ~/.m2 
```

以确保我正在重新下载所有内容。但是，当我部署到 Heroku 时，Heroku 报告它无法下载 commons-codec。我认为这不是回购的间歇性问题，因为回购已经启动。（当然，这可能是 Heroku 的间歇性问题......）

我无法通过谷歌找到任何我能理解的东西（我仍然不清楚 sbt 究竟是如何工作的）。知道如何在 Heroku 上重新启动并运行吗？

```
[warn]  [NOT FOUND  ] commons-codec#commons-codec;1.5!commons-codec.jar (9ms)
   [warn] ==== Typesafe Releases Repository: tried
   [warn]   http://repo.typesafe.com/typesafe/releases/commons-codec/commons-codec/1.5/commons-codec-1.5.jar
   [info] downloading http://repo.typesafe.com/typesafe/releases/org/apache/httpcomponents/httpclient/4.1/httpclient-4.1.jar ...
   [info]   [SUCCESSFUL ] org.apache.httpcomponents#httpclient;4.1!httpclient.jar (101ms)
   [info] downloading http://repo.typesafe.com/typesafe/releases/org/apache/httpcomponents/httpcore/4.1/httpcore-4.1.jar ...
   [info]   [SUCCESSFUL ] org.apache.httpcomponents#httpcore;4.1!httpcore.jar (90ms)
   [info] downloading http://s3pository.heroku.com/maven-central/org/apache/httpcomponents/httpclient/4.1.2/httpclient-4.1.2.jar ...
   [info]   [SUCCESSFUL ] org.apache.httpcomponents#httpclient;4.1.2!httpclient.jar (457ms)
   [info] downloading http://s3pository.heroku.com/maven-central/org/apache/httpcomponents/httpcore/4.1.3/httpcore-4.1.3.jar ...
   [info]   [SUCCESSFUL ] org.apache.httpcomponents#httpcore;4.1.3!httpcore.jar (450ms)
   [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
   [warn]   ::              FAILED DOWNLOADS            ::
   [warn]   :: ^ see resolution messages for details  ^ ::
   [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
   [warn]   :: commons-codec#commons-codec;1.5!commons-codec.jar
   [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
   [error] {file:/tmp/build_19dmxderfnxd/}Xonami WWW/*:update: sbt.ResolveException: download failed: commons-codec#commons-codec;1.5!commons-codec.jar 
```

我的 build.scala 包含：

```
val appDependencies = Seq(
  "org.hibernate" % "hibernate-c3p0" % "4.1.7.Final",
  "org.hibernate" % "hibernate-entitymanager" % "4.1.7.Final",
  "javax.servlet"  % "servlet-api"  % "2.5",
  "spy"  % "spymemcached"  % "2.7.3",
  "postgresql"  % "postgresql"  % "9.1-901.jdbc4",
  "org.slf4j"  % "slf4j-api"  % "1.6.4",
  "javax.mail"  % "mail"  % "1.4.4",
  "com.thoughtworks.xstream"  % "xstream"  % "1.4.2",
  "org.slf4j"  % "slf4j-simple"  % "1.6.4",
  "org.jdom"  % "jdom"  % "1.1",
  "junit"  % "junit"  % "4.10",
  "com.amazonaws"  % "aws-java-sdk"  % "1.3.6",
  "joda-time"  % "joda-time"  % "2.1",
  "org.restlet.jee"  % "org.restlet"  % "2.1-RC3",
  "org.restlet.jse"  % "org.restlet.ext.jetty"  % "2.1-RC3",
  "org.restlet.jee"  % "org.restlet.ext.json"  % "2.1-RC3",
  "org.restlet.jee"  % "org.restlet.ext.servlet"  % "2.1-RC3",
  "org.restlet.jee"  % "org.restlet.ext.xml"  % "2.1-RC3",
  "org.restlet.jee"  % "org.restlet.ext.xstream"  % "2.1-RC3",
  "org.restlet.jee"  % "org.restlet.ext.wadl"  % "2.1-RC3",
  "xalan"  % "xalan"  % "2.7.1",
  "com.rabbitmq"  % "amqp-client" % "3.0.2"
)

val main = PlayProject(appName, appVersion, appDependencies).settings(defaultScalaSettings:_*).settings(
    resolvers += "spy" at "http://files.couchbase.com/maven2/",
    resolvers += "project.local" at "file:${project.basedir}/repo",
    resolvers += "repository.jboss.org-public" at "https://repository.jboss.org/nexus/content/groups/public",
    resolvers += "maven-restlet" at "http://maven.restlet.org"
) 
```

当我添加rabbitmq时问题开始了，但即使我尝试删除它似乎仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T00:35:27.407

我遇到了[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/32KHF25b0IE)，它建议我通过更改我的 PlayProject 函数来“修复”这个问题，如下所示：

```
val main = PlayProject(appName, appVersion, appDependencies).settings(defaultScalaSettings:_*).settings(
    resolvers := Seq("typesafe" at "http://repo.typesafe.com/typesafe/repo"),
    resolvers += "spy" at "http://files.couchbase.com/maven2/",
    resolvers += "project.local" at "file:${project.basedir}/repo",
    resolvers += "repository.jboss.org-public" at "https://repository.jboss.org/nexus/content/groups/public",
    resolvers += "maven-restlet" at "http://maven.restlet.org"
) 
```

我真的不喜欢这个，因为我不明白。我觉得我正在解决 Heroku 的问题。有人可以解释为什么这样做以及为什么它是正确的（或不正确的）吗？

# java - Java 服务器软件在编译为可执行 Jar 时未接收连接

> ID：14864372
> 
> 赞同：0
> 
> 时间：2013-02-13T22:23:12.990
> 
> 标签：java, netbeans, tcp, javafx, executable-jar

我为接收客户端连接并将数据分发给客户端的 tcp (SSL) 服务器编写了代码。服务器 GUI 基于 JavaFX。当我从 Net Beans 或 Eclipse 中运行服务器软件时，它工作正常，接收客户端连接并发送和接收数据。但是当我将代码编译成可执行 Jar 时，服务器不会接收连接并且客户端代码会抛出：连接被拒绝异常。

我尝试 ping 服务器，似乎服务器在从可执行 Jar 运行时不侦听特定端口，但在从 IDE 中运行时却侦听。

老实说，我不知道是什么导致了这种行为。将不胜感激有关如何解决此问题的任何见解、建议或线索。我不认为具体的代码是相关的，但如果有人认为是相关的，我会发布服务器代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:16:29.130

好吧，事实证明问题是相关的密钥库没有正确加载。它们被作为 FileInputStreams 加载，当嵌入到 Jar 文件中时将不起作用。我将它们恢复为作为 InputStreams 加载，它与 SSL 上下文一样工作，现在一切似乎都在工作。

非常感谢他们在整个过程中帮助我消除事情的所有建议。

# asp.net - asp.net framework 4.5 中的 ashx、asmx、axd + cs(handler)、webmethod(in aspx) 和 async 方法有什么区别？

> ID：14864373
> 
> 赞同：7
> 
> 时间：2013-02-13T22:23:15.097
> 
> 标签：asp.net, asmx, ashx, webmethod, axd

我需要知道这些文件的技术差异。哪一个是最好的选择？我们何时以及为什么要使用它？我需要人工回答，而不是 MSDN 链接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T22:53:58.457

`.ashx`文件用于处理 HttpRequests 和修改 HttpResponses；你几乎可以让他们为所欲为。我已经看到它们用于提供 PDF 和进行服务器端处理然后重定向等事情。[请参阅此处了解更多信息。](https://stackoverflow.com/questions/5758777/question-on-ashx-files-in-asp-net)

`.svc`文件（您的问题中未提及）是[MS 新的 Windows Communication Foundation 的](http://msdn.microsoft.com/en-us/library/dd456779.aspx)一部分，该基础用于[SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture)开发。WCF 支持 SOAP、REST 和许多其他很酷的东西。

`.asmx`文件是托管 SOAP 服务的较旧方式。它们通常伴随着`asmx.cs`包含服务背后的实际方法的文件（或 .vb）。[请参阅此处了解更多信息。](http://msdn.microsoft.com/en-us/library/ms972326.aspx)这是一项遗留技术，[我建议在新开发中使用 WCF](https://stackoverflow.com/q/2448472/346561)。

`[WebMethod]`属性用于表示由`asmx`. [请参阅此处了解更多信息。](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx)

该`.axd`扩展被生成的 Web 服务用于许多不同的事情。（例如 MVC3 使用`axd`Web 服务来为 MS 特定的 javascript 提供服务）我不认为你会创建一个`axd`文件，但我可能是错的......至少我从来没有。[请参阅此处了解更多信息。](https://stackoverflow.com/questions/5879824/what-is-an-axd-file)

> 哪一个是最好的选择？

它们是用于解决不同问题的不同工具。何时以及为什么应该使用每一个取决于您要完成的工作。可以使用`ashx`文件来实现对 Web 应用程序行为的较低级别的处理。如果你想提供更标准化的服务，我会推荐使用 WCF 和`svc`文件。请向我们提供有关您正在执行的任务的更多信息，以便我们帮助您选择一项。

# asp.net - 在更新面板更新时，更新面板之外的所有内容都会消失

> ID：14864375
> 
> 赞同：2
> 
> 时间：2013-02-13T22:23:18.587
> 
> 标签：asp.net, updatepanel, ajaxcontroltoolkit

为这样一个广泛而全面的问题道歉，但我不能真正给出具体的代码示例，因为据我从研究中可以看出，这个问题是我正在处理的特定页面所独有的，如果我知道如何复制那么我很可能能够修复它。

我有一个 asp.net vb（使用 ajaxcontroltoolkit v4 的 v3.5）页面，基本上将一些直接的 SQL 数据库数据绑定到 gridview。

网格视图位于更新面板中，每当我做任何导致更新面板内回发的事情时，更新面板外的所有内容都会消失。更新面板正在更新正确性。

没有条件更新，只是一个“开箱即用”的更新面板。

所有其他 ajax 功能都正常工作，例如过滤的文本框扩展器和使用标注扩展器的验证，所以我认为这不是基本的脚本引用错误。

我正在使用 javascript 和 jquery 来动态修改更新面板中的控件。

这是一个用于开发的独立页面，但为了测试这个问题，我将它放入母版页上的内容占位符中。现在在更新时，内容占位符中的所有其他内容都会消失，只留下母版页标题等。

如果您以前没有遇到过这个特殊问题，您能想到我该如何调试它吗？

如果您有任何想法，可能足以让我走上正确的道路。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T07:51:02.113

感谢您抽出宝贵时间提出建议 Mt. Schneiders。

最后......哈哈哇，尴尬......我已经做了 6 年的大部分时间了，在关闭面板上方开始的 div 之前，我正在关闭我的更新面板。

简单的修复。耶！再次感谢。

# python - 运行python的Unix进程

> ID：14864378
> 
> 赞同：0
> 
> 时间：2013-02-13T22:23:22.257
> 
> 标签：python, linux, process

我有一个执行 2 个 python 脚本的 cron。如果进程正在运行，我如何使用“ps”命令查看？

我的脚本名称是：

json1.py json2.py

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:24:37.047

`ps aux | grep json`应该这样做，或者只是`pgrep -lf json`。

# php - 我下载了 XAMPP，当我尝试打开本地文件时，它告诉我在服务器上找不到它

> ID：14864379
> 
> 赞同：0
> 
> 时间：2013-02-13T22:23:26.943
> 
> 标签：php, xampp

我开始观看 thenewboston 的 php 教程，当我尝试将文件保存到 htdocs 并在本地服务器上运行时，它告诉我找不到它。我将如何连接到我的本地服务器？我现在已经尝试了几次，所以我确定我没有任何拼写错误，并且我还运行了 apache 和 mysql。我已经尝试搜索谷歌，但我找不到任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:41:38.393

这里有一些建议：

1.  检查`localhost`或`127.0.0.1`在您的浏览器中
2.  确保结束 url 与文件名完全相同。
3.  如果一切正常，请检查`localhost/phpmyadmin`

# iis - ColdFusion 9 和远程文件包含

> ID：14864381
> 
> 赞同：1
> 
> 时间：2013-02-13T22:23:34.423
> 
> 标签：iis, coldfusion, iis-7.5, coldfusion-9, remote-file-inclusion

我的网站刚刚被黑客入侵，我怀疑这是一次远程文件包含攻击。这些是我的服务器规格：运行 ColdFusion 9 (9.0.1.274733) 和 IIS 7.5 的 Windows Server 2008 R2

这是我的网站被黑后出现的页面的源代码：

```
<!-- # sql_master : securiiity@gmail.com #--> 
<html> 
<head> 
<title>0wned !</title> 
<Meta http-equiv="content-type" content="text/html; charset=windows-1254"> 
<Meta http-equiv="content-type" content="text/html; charset=ISO-8859-9"> 
</head>
<body bgcolor="black"> 
<center>
 <font color="#ffffff" size="3" face="Tahoma">0wned By <br>SQL_Master , Z0mbi3_Ma , xMjahd !</font>
 <br><br> 
 <img src="http://fc08.deviantart.net/fs71/f/2010/255/e/7/never_look_back_by_arbebuk-d2yiadv.jpg" width="600" height="500"/> 
 <br><br> </div> </td>
  <font color="#ffffff" size="3" face="Tahoma"><a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d389e3beb1bae08c9eb293bbbca7beb2babffdb0bcbe">
    [email&nbsp;protected]</a>
    <script type="text/javascript"> /* <![CDATA[ */ (function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})(); /* ]]> */ </script>
  </font><br><br> <font color="#ffffff" size="3" face="Tahoma">FROM MOROCCO</font> </tr> 
</table> 
</body> </html> 
```

赛门铁克会定期扫描我的网站和服务器，它只挑选出入侵我网站的人的 IP。

网站被黑后，我清除了 ColdFusion Verity 搜索，在 IIS 中，我将 .cfm 设置为优先选择的默认文件类型，网站重新上线。

但是，我进行了整个站点搜索，但无法在任何地方找到上述代码。

有人可以向我解释这种类型的攻击是如何进行的，以及我如何清理我的网站和服务器并防止这种情况在未来再次发生。

谢谢你。

# c# - SQL 性能、.Net 优化与最佳实践

> ID：14864384
> 
> 赞同：11
> 
> 时间：2013-02-13T22:23:48.513
> 
> 标签：c#, .net, sql-server, asp.net-mvc, sql-server-2008

我需要您的专业人士/专家的确认/解释，因为我的团队告诉我“没关系”，这让我很沮丧:)

**背景：**我们的主要 MVC3 / .Net4 Web 应用程序正在使用 SQL Server 2008。在任何给定点，我们都有大约 200 多个并发用户。服务器受到了极大的打击（锁定、超时、整体缓慢），我正在尝试应用我在整个职业生涯和最后一次 MS 认证课程中学到的东西。它们是我们都被钻研过的东西（“关闭 SQL 连接 STAT”），我试图向我的团队解释这些“小东西”，虽然不是一个单独的东西会产生影响，但最终会加起来。

我需要知道以下内容是否会对性能产生影响，或者它是否只是“最佳实践”

**1.使用“USING”关键字。** 他们的大部分代码是这样的：

```
public string SomeMethod(string x, string y) {
    SomethingDataContext dc = new SomethingDataContext();
    var x = dc.StoredProcedure(x, y);
} 
```

虽然我试图告诉他们 USING 更快地关闭/释放资源：

```
using (SomethingDataContext dc = new SomethingDataContext()) {
    var x = dc.StoredProcedure(x, y);
} 
```

他们的论点是，在代码执行完成后，GC 的清理工作已经足够好，因此 USING 不会产生巨大的影响。是真是假，为什么？

**2.连接池**

我一直听说设置连接池可以显着加快任何网站（至少 .Net w/MSSQL）。我建议我们将以下内容添加到 web.config 中的连接字符串中：

> ..."池=True；最小池大小=3；最大池大小=100；连接超时=10；"...

他们的论点是 .Net/MSSQL 已经在后台设置了连接池，不需要放入我们的 web.config 中。对或错？为什么每个其他站点都说如果已经设置了池，应该添加池以获得最佳性能？

**3\. 尽量减少对 DB 的调用次数**

默认的 .Net MVC 项目附带的角色/成员资格提供程序非常好 - 它很方便，并且可以为您完成大部分工作。但是这些人正在认真使用`UsersInRoles()`并像全局变量一样自由地使用它（每次调用此方法时都会访问数据库）。我创建了一个“用户对象”，它在每次页面加载时预先加载所有角色（以及其他一些用户内容，例如 GUID 等），然后查询该对象以了解用户是否具有角色。

网站的其他部分有循环超过 200 次的 FOR 语句，每次通过执行 20-30 次 sql 查询 = 超过 4,000 次数据库调用。它以某种方式在几秒钟内完成此操作，但我想要做的是将 20-30 个 DB 调用合并为一个，以便它使 ONE 调用 200 次（每个循环）。但是因为 SQL 分析器说查询花费了“0 秒”，他们的论点是它是如此快速和小，以至于服务器可以处理这些大量的数据库查询。

我的想法是“是的，这些查询运行得很快，但它们正在扼杀整个 SQL Server 的性能。” 这可能是一个促成因素吗？我什么都不担心，还是这是导致服​​务器整体性能问题的（重要）因素？

**4.其他代码优化**

首先想到的是使用`StringBuilder`vs 一个简单的字符串变量。我理解为什么我应该使用`StringBuilder`（尤其是在循环中），但他们说这并不重要——即使他们需要写 10k+ 行，他们的论点是性能增益并不重要。

所以总而言之，我们学习和钻研的所有东西（“最小化范围！”）只是“最佳实践”而没有真正的性能提升，还是它们都导致了真正/可测量的性能损失？

***编辑********** 感谢大家的所有回答！根据您的回答，我有一个新的（第 5 个）问题：他们实际上不使用“USING”，那么这意味着什么？如果自动发生连接池，它是否会占用池中的连接，直到 GC 出现？是否有可能每个与 SQL 服务器的打开连接都给服务器增加了一点负担并减慢了它的速度？

根据您的建议，我计划对连接时间进行一些严肃的基准测试/记录，因为我怀疑 a) 服务器速度很慢，b) 他们没有关闭连接，c) Profiler 说它在 0 秒内运行，速度很慢可能来自连接。

我真的很感谢你们的帮助。再次感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:34:35.030

分支代码，根据当前代码库进行更改并进行基准测试+配置文件。然后，您将有一些证据来支持您的主张。

至于你的问题，这里是：

1.  您应该始终手动处理实现的类`IDisposable`，GC 实际上不会调用 dispose 但是如果该类还实现了终结器，那么它将调用终结器，但是在大多数实现中它们只清理非托管资源。

2.  确实，.NET 框架已经进行了连接池，我不确定默认值是什么，但连接字符串值会在那里允许您更改它们。

3.  SQL 语句的执行时间只是故事的一部分，在 SQL 分析器中，您将看到的只是数据库引擎执行查询所花费的时间，而您所缺少的是 Web 服务器连接到的时间并从数据库服务器接收结果，因此虽然查询可能很快，但您可以通过批处理查询节省大量 IO 和网络延迟。

4.  这是一个很好的做一些分析来证明连接在字符串构建器上使用的额外内存的好方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T22:41:39.950

哎呀。当然，您不能让 GC 为您关闭数据库连接。GC 可能不会在很长一段时间内发生……有时会在几小时后发生。一旦变量超出范围，它不会立即发生。大多数人使用 IDisposable using() { } 语法，这很棒，但至少在某些地方需要调用 connection.Close()

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T22:33:30.953

1.  实现 IDisposable 并持有非托管资源的对象还实现了一个终结器，该终结器将确保在 GC 期间调用 dispose，问题是当它被调用时，gc 可能需要很长时间才能完成，而在此之前你可能需要这些资源. 使用完成后，立即调用 dispose。

2.  您可以在 webconfig 中修改池化参数，但默认情况下它现在是打开的，所以如果您保留默认参数，您将一无所获

3.  您不仅要考虑执行查询需要多长时间，还要考虑应用程序服务器和数据库之间的连接时间，即使它在同一台计算机上也会增加开销。

4.  StringBuilder 不会影响大多数 Web 应用程序的性能，只有将 2 次连接到同一个字符串时才重要，但我认为使用它是一个好主意，因为它更易于阅读。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T22:37:12.900

我认为您在这里有两个不同的问题。

1.  代码的性能
2.  SQL Server 数据库的性能

**SQL 服务器**

您是否对 SQL Server 进行了任何监控？您是否具体知道正在运行哪些导致死锁的查询？

我会阅读[这篇关于死锁](http://www.brentozar.com/archive/2011/07/difficulty-deadlocks/)的文章，并考虑安装出色的[Who is active](http://whoisactive.com)以了解您的 SQL Server 中到底发生了什么。您也可以考虑安装Brent [Ozar](http://www.brentozar.com/blitz/)的 sp_Blitz。这应该让您对数据库中发生的事情有一个很好的了解，并为您提供首先解决该问题的工具。

**其他代码问题**

我无法真正评论其他代码问题。所以我会先看看SQL Server。

**记住**

1.  监视器
2.  识别问题
3.  轮廓
4.  使固定
5.  转到 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T22:34:05.950

好吧，我不是专家，但我有一个建议：如果他们说你错了，告诉他们，“证明一下！给我写一个测试！告诉我 4000 次调用和 200 次调用一样快，并且对服务器造成同样的影响！”

其他事情同上。如果你不能让他们证明你是对的，那就证明他们是错的，用清晰的、有据可查的测试证明你说的是对的。

如果他们甚至不接受从他们自己的服务器收集的确凿证据以及他们可以查看和检查的代码，那么您可能会在该团队上浪费您的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T00:24:40.403

冒着重复这里其他人所说的话的风险，这是我对此事的 2c

首先，你应该谨慎选择你的战斗......我不会在所有 4 点上与你的同事开战，因为一旦你未能证明其中之一，就结束了，从他们的角度来看，他们是对的，而你'错了。还要记住，没有人喜欢被告知他们美丽的代码是一个丑陋的婴儿，所以我假设你会很圆滑——不要说“这很慢”，而是说“我找到了一种方法来让它更快“....（当然你的团队可能是完全合理的，所以我也是基于我自己的经验：）所以你需要从上面的 4 个领域中选择一个来首先解决。

我的钱在#3。1、2 和 4 可以有所作为，但根据我自己的经验，并没有那么大 - 但是你在 #3 中描述的对于可怜的旧服务器来说听起来像是被千张剪纸而死！查询可能执行得很快，因为它们是参数化的，所以它们被缓存了，但你需要记住，探查器中的“0 秒”可能是 900 毫秒，如果你明白我的意思的话……加起来很多事情开始变得缓慢；这也可能是锁的主要来源，因为如果这些嵌套查询中的每一个都一遍又一遍地访问同一个表，无论它运行多快，以及您提到的用户数量，您肯定会发生争用。获取 SQL 并在 SSMS 中运行它，但包括客户端统计信息，这样您不仅可以查看执行时间，还可以查看发送回客户端的数据量；这将使您更清楚地了解所涉及的开销类型。

真正证明这一切的唯一方法是像其他人提到的那样设置测试和测量，但也一定要在服务器上运行一些分析——锁、IO 队列等，这样你就可以证明您的方式不仅更快，而且它在服务器上的负载也更少。

谈到你的第 5 个问题 - 我不确定，但我猜想任何不是自动处理（通过使用）的 SqlConnection 都被视为仍然“活动”并且不再从池中可用。话虽这么说 - 服务器上的连接开销非常低，除非连接实际上在做任何事情 - 但您可以再次通过使用 SQL 性能计数器来证明这一点。

祝你好运，迫不及待地想知道你的进展如何。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T22:35:38.710

using 子句只是语法糖，您实际上是在做

```
try
{
    resouce.DoStuff();
}
finally
{
     resource.Dispose()
} 
```

当对象被垃圾回收时，Dispose 可能无论如何都会被调用，但前提是框架程序员很好地实现[了可丢弃模式](https://stackoverflow.com/questions/898828/c-sharp-finalize-dispose-pattern)。所以这里反对你的同事的论点是：

i) 如果我们养成使用 using 的习惯，我们确保释放非托管资源，因为并非所有框架程序员都聪明地实现一次性模式。

ii) 是的，GC 最终会清理该对象，但可能需要一段时间，具体取决于该对象的年龄。第 2 代 GC 清理每秒只进行一次。

简而言之：

1.  往上看

2.  是的，池化默认设置为 true，最大池大小为 100

3.  你是对的，绝对是推动改进的最佳领域。

4.  过早的优化是万恶之源。首先获得#1 和#3。使用 SQL 分析器和 db 特定方法（添加索引、对其进行碎片整理、监控死锁等）。

5.  是的，可能是。最好的方法是衡量它 - 查看性能计数器 SQLServer：一般统计信息 - 用户连接；[这](http://www.brentozar.com/archive/2006/12/dba-101-using-perfmon-for-sql-performance-tuning/)是一篇描述如何做到这一点的文章。

**始终衡量您的改进，不要在没有证据的情况下更改代码！**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T22:45:10.213

我最近正在处理我们的 Web 应用程序和我们的电子邮件提供商之间的交互中的一个错误。发送电子邮件时，发生协议错误。但不是马上。

我能够确定该错误仅在`SmtpClient`实例关闭时发生，这是在`SmtpClient`处置时发生的，这仅在垃圾收集期间发生。

而且我注意到这通常在单击“发送”按钮后需要*两分钟......*

不用说，代码现在正确地实现`using`了`SmtpClient`和`MailMessage`实例的块。

对智者说一句话...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-13T22:51:31.100

1 已经在上面得到了很好的解决（但是我同意它很好地处理，并且发现它是一个很好的做法）。

2 有点保留以前版本的 ODBC，其中 SQL Server 连接是独立配置的池。它曾经是非默认的；现在它是默认的。

至于 3 和 4，4 不会影响 SQL Server 的性能——`StringBuilder`当然，这可能有助于加快 UI 中的进程，这可能会更快地关闭 SQL 资源，但不会减少负载在 SQL Server 上。

对我来说，3 听起来是最合乎逻辑的集中注意力的地方。我尝试尽快关闭我的数据库连接，并尽可能减少调用次数。如果您正在使用`LINQ`，请将所有内容拉入一个`IQueryable`或其他内容（列表、数组等），以便您可以操作它并构建您需要的任何 UI 结构，同时在任何该hokum 之前释放连接。

综上所述，听起来您需要在探查器上花更多的时间。与其查看每次执行所花费的时间，不如查看处理器和内存使用情况。仅仅因为他们很快并不意味着他们不是“饥饿”处决。

# .htaccess - htacces 重定向和掩码

> ID：14864388
> 
> 赞同：0
> 
> 时间：2013-02-13T22:24:01.160
> 
> 标签：.htaccess, mod-rewrite

如何从根文件夹重定向到子文件夹，然后屏蔽该文件夹？

所以而不是[http://root.com/sub_folder](http://root.com/sub_folder)

它只是[http://root.com](http://root.com)

我努力了：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^root\.com$
RewriteRule (.*) http://root.com/$1 [R=301,L]
RewriteRule ^$ /sub [L] 
```

但是，这是行不通的。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:51:41.257

为了澄清我认为你在寻找什么：

您希望`http://root.com`将没有尾随路径的用户以静默方式重写为`http://root.com/sub`.

但是，如果用户直接输入`http://root.com/sub`，您希望他们被重定向到`http://root.com`。

root.com 中的任何其他路径都应单独保留。

以下两条规则实现了这一点。如果您有多个域并且只希望将其应用于一个域，请在每个 RewriteRule 前面添加原始 RewriteCond。

```
RewriteRule ^sub/?$ http://root.com/ [R=301,L]
RewriteRule ^$ /sub [END] 
```

第一条规则将带有或不带有斜杠的 /sub 重定向到 root.com。第二条规则将基域重写为 /sub。

编辑：根据 Jon Lin 在下面的评论，该`[L]`标志仅停止当前轮次处理，并且内部重写再次通过规则发送（我总是伪造那部分）。因此，您可以改为终止第二行`[END]`，这将停止所有重写处理。问题是它`[END]`仅在 Apache 2.4 或更高版本中可用，因此如果您使用的是旧版本，则需要做一些更棘手的事情。

# asp.net - PhoneGap 是否与 ASP.Net 网络表单齐头并进？

> ID：14864391
> 
> 赞同：1
> 
> 时间：2013-02-13T22:24:12.413
> 
> 标签：asp.net, .net, cordova, webforms

我是 PhoneGap 的新手，我所看到的任何地方都没有建议任何关于使用网络表单作为服务器代码的内容。

> 应用程序服务器通常是 Web 服务器（Apache、IIS 等），并具有服务器端脚本语言，如 ColdFusion、Java、.NET、PHP 等。PhoneGap 与后端技术无关，可以与使用标准 Web 协议的任何应用程序服务器一起工作。应用程序服务器执行业务逻辑和计算，并且通常从单独的数据存储库中检索或保存数据——这通常是一个关系数据库，但可以是用于数据持久性的任何结构或机制。

[http://phonegap.com/2012/05/02/phonegap-explained-visually/](http://phonegap.com/2012/05/02/phonegap-explained-visually/)

然而，这篇文章提到，PhoneGap 几乎可以与包括 .Net 在内的任何应用程序服务器一起工作。

以前有人用过PhoneGap 和webform 吗？做他们的工作？那么表单回发等呢？或者一切都应该是基于 AJAX 的？（调用网络方法等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:56:11.330

从链接文章的末尾：

> PhoneGap 应用程序通常不直接与数据库通信。通信通过应用程序服务器进行路由。客户端到应用程序服务器的通信可以基于对 HTML 内容、REST-ful XML 服务、JSON 服务或 SOAP（或 websockets，如果您的操作系统支持）的标准 HTTP 请求。这些技术与您在基于桌面浏览器的 AJAX 应用程序中使用的技术完全相同。
> 
> 客户端架构通常使用单页应用程序模型，其中应用程序逻辑位于单个 HTML 页面内。此页面永远不会从内存中卸载。所有数据都将通过更新 HTML DOM 来显示，使用 AJAX 技术从应用程序服务器检索数据，变量保存在 JavaScript 中的内存中。

所以是的，一般来说你不会使用回发，你会使用 Ajax 回调到服务器以获取/创建/更新数据 - 这由 asp.net webforms 通过处理程序 (ashx) 甚至静态页面方法支持一个aspx页面。你的实际前端只是用 HTML 和 CSS 设计，没有 asp.net 控件，只是普通的旧 html 输入等。

# loops - 计划 while 循环

> ID：14864396
> 
> 赞同：3
> 
> 时间：2013-02-13T22:24:34.357
> 
> 标签：loops, lisp, scheme, racket, collatz

我在方案语法方面有点新......我正在尝试制作一个简单的程序，您可以在其中输入一个整数，如果整数是偶数做某事，如果它是奇怪的做其他事情。我能够做到这部分。现在，我需要创建一个循环，我可以在其中递减数字直到等于 1。这是我的代码：

```
#lang racket

(define (even? n)
  (if (eqv? n 0) #t
         (odd? (- n 1))))
(define (odd? n)
  (if (eqv? n 0) #f
         (even? (- n 1))))

; this is the function that i wanted to be inside the loop
(define (sequence n)
(cond  
[(even? n) n( / n 2)]
[(odd? n) n(+(* n 3) 1) ] )

)
(sequence 5) 
```

输出应该是一个数字序列。换句话说，它应该在一个列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:36:29.083

输出列表是通过将列表中的每个元素组合起来，然后在输入上推进递归，直到输入用尽（在您的情况下，当数字`n`为 1 时）来构建的。通过连续地在列表的头部使用元素并以空值结束递归，一个新的正确列表被创建并在过程执行结束时返回。就是这样：

```
(define (sequence n)
  (cond [(= n 1)                              ; if n=1, it's the  exit condition
         (list n)]                            ; return a list with last element
        [(even? n)                            ; if n is even
         (cons n (sequence (/ n 2)))]         ; cons n and advance the recursion
        [(odd? n)                             ; if n is odd
         (cons n (sequence (+ (* n 3) 1)))])) ; cons n and advance the recursion 
```

上面将返回一个列表，其中包含给定数字的[Collat​​z](https://en.wikipedia.org/wiki/Collatz_conjecture)`n`序列：

```
(sequence 6)
=> '(6 3 10 5 16 8 4 2 1) 
```

附带说明：程序`even?`和`odd?`是 Scheme 中的标准，您不必重新定义它们。

# c++ - 使用 Linux 编译器出现错误但失去意义

> ID：14864398
> 
> 赞同：0
> 
> 时间：2013-02-13T22:24:40.103
> 
> 标签：c++, compiler-errors, compiler-warnings

我使用代码块构建了我的程序，但对于学校，我们应该通过 linux 系统进行编译。我在下面遇到了这些错误，但我在使用 149 时遇到了问题。我不知道它在抱怨什么。也许有人可以帮助我？

```
In file included from matrix.cpp:9:0:
matrixClass.h: In member function âT Matrix<T>::GetData(int, int) const [with T = int]â:
matrixClass.h:149:17:   instantiated from âstd::ostream& operator<<(std::ostream&, const Matrix<int>&)â
matrix.cpp:22:13:   instantiated from here
matrixClass.h:131:16: warning: converting to non-pointer type âintâ from NULL 
```

我的代码如下。

```
T GetData(int row, int column) const
{
    if (row>=0 && row<numrows() && column>=0 && column<numcols())
    {
        return pData[GetRawIndex(row, column)];
    }
    return NULL;
}

//Output matrix arrays here.
friend ostream& operator<<(ostream& os, const Matrix<T>& matrix)
{
    os << "[";
    for(int i = 0; i<matrix.numrows(); i++)
    {
        for(int j = 0; j < matrix.numcols(); j++)
            os << matrix.GetData(i,j) << " ";

        os << endl;
    }
    os << "]" <<endl;
    return os;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:30:12.083

There are no errors. That's just a single warning. The lines tell you:

1.  Which file included the file with the warning.
2.  Which template function the warning occurred.
3.  In which function that template function was instantiated.
4.  The line at which the instantiation occurred.
5.  The warning itself.

The warning is telling you that you're returning `NULL` when the return type of your function is `int` (`T = int`). Although `NULL` just gives you `0`, the compiler is well aware that `NULL` is only supposed to be used with pointers and gives you a warning that you're probably doing something wrong.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:34:18.477

首先，代码是正确的，尽管可能不是您真正的意思，这就是编译器警告您的原因。

在 C++ 中，`NULL`定义为`0`（整数 0），因此在您的实例化中`Matrix<int>`，如果用户尝试越界访问元素，您将返回 0（整数值 0）。`NULL`用于指示不引用有效内存的指针，编译器看到您在 return 语句中使用它...所以它想知道您是否真的打算返回指针或值 0...

这就引出了一个问题，*你为什么要回来`NULL`？您真的是要返回 0 吗？*因为如果您不这样做，编译器只会帮助您找到错误...

# c# - ASMX Web 服务的配置文件

> ID：14864399
> 
> 赞同：1
> 
> 时间：2013-02-13T22:24:41.397
> 
> 标签：c#, web-services, web-config, asmx

所以我在 Visual Studio 2010 中创建了一个 Web 服务。要将其部署到 IIS Web 服务器上，我将 service.asmx、web.config 和 bin 复制到服务器（wwwroot 文件夹）。这一切都很好。

我的问题是从 web.config 中读取一个简单的字符串。我的代码是：

在一种方法中，我有：

```
string from = System.Configuration.ConfigurationManager.AppSettings["folder_new"]; 
```

在 web.config 文件中，我有：

```
<?xml version="1.0"?>
<configuration>    
  <appSettings>
    <add key="folder_new" value="C:\images\new" />
  </appSettings>
  <...other stuff etc...>
</configuration> 
```

我从“从”位置读入。如果我将其更改为

```
string from = @"C:\images\new"; 
```

它完美地工作。

这真让我抓狂。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T22:28:54.137

您应该使用[WebConfigurationManager](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)类而不是`ConfigurationManager`. 上面的界面基本一样。

```
string notFrom =  
  System.Web.Configuration.WebConfigurationManager.AppSettings["folder_new"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:29:13.450

你在配置中尝试过双\'s吗？像`"c:\\images\\new"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:34:36.420

`ConfigurationManager`用于处理程序集的应用程序配置文件，而不是 Web.config 文件。请`WebConfigurationManager`改用。

# jquery - Jquery fadeId fadeOut 低于较低的 z 索引 div

> ID：14864401
> 
> 赞同：0
> 
> 时间：2013-02-13T22:24:46.937
> 
> 标签：jquery, css, z-index

我正在为创建一个在悬停时淡化背景的菜单栏奠定基础。背景将是整个页面，使用一个半透明的 png 图形并位于整个页面上。

我有 jquery 做它的工作，但它似乎忽略了菜单 div 的 z-index，我试图不让透明 png div 层“下”。

回顾一下 - 页面加载并且有一个带有透明 png 完全覆盖工作区域的 div (#overlay)。#overlay div 也设置为 display:none; 所以它最初没有显示。当鼠标悬停在菜单 div 上时，覆盖 div 会淡入覆盖工作区域。菜单 div 设置为 z-index:20 并且覆盖 div z-index 为 10 问题是覆盖 div 覆盖了菜单并且似乎不尊重 z-index 图层值。

有人可以帮助我了解如何实现这一目标，而无需调整覆盖层以排除菜单区域（margin-top = 菜单高度）。

[http://jsfiddle.net/ERepZ/](http://jsfiddle.net/ERepZ/)

```
$("#box").hover(function () {
    $(this).children("#overlay").fadeIn();
    }, function () {
$(this).children("#overlay").stop().fadeOut();
}); 
```

更新：此代码将隔离与菜单悬停动作更内联的菜单区域：

```
var animationSpeed = 400;
var fadeMax = 0.5;
var fadeMin = 0;
$("#menu").hover(function() {
$("#overlay").stop().fadeTo(animationSpeed, fadeMax);
    }, function() {
$("#overlay").stop().fadeTo(animationSpeed, fadeMin);
}); 
```

[http://jsfiddle.net/sMmSb/1/](http://jsfiddle.net/sMmSb/1/)

（建立在下面 Ruben Infante 的代码之上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:37:58.163

只有被定位的项目（例如，`position: relative`或`position: absolute`）`position: fixed`可以使用 z-index。

```
#menu {
    position: absolute;
    height:50px;
    width: 450px;
    background-color:#999;
    z-index:20;
} 
```

[jsfiddle](http://jsfiddle.net/bBv5R/)

**建议：**

如果您不想使用图像来跨越整个网页，您也可以简单地使用纯色背景颜色并在动画期间使用[`.fadeTo()`](http://api.jquery.com/fadeTo/).

CSS

```
#overlay {
    position: absolute;
    display: none;
    top: 0;
    left: 0;
    width: inherit;
    height: inherit;
    background: #000;
    z-index: 10;
} 
```

JS

```
var animationSpeed = 400;
var fadeMax = 0.5;
var fadeMin = 0;
$("#box").hover(function() {
    $(this).children("#overlay").stop().fadeTo(animationSpeed, fadeMax);
}, function() {
    $(this).children("#overlay").stop().fadeTo(animationSpeed, fadeMin);
}); 
```

[jsfiddle](http://jsfiddle.net/sMmSb/)

# performance - 哪种算法的时间复杂度更好？

> ID：14864407
> 
> 赞同：1
> 
> 时间：2013-02-13T22:25:15.173
> 
> 标签：performance, complexity-theory, time-complexity

我读到了 Big-O 表示法。我理解了一些想法，但是当比较两种算法时，我不明白他说现有的两种算法之后的一些事情。

```
 First f2(n) = 2n + 20 steps. 
second f3(n) = n + 1 steps.
he write f2 = O(f3):

    f2(n)/f3(n)
    =((2n + 20)/(n + 1))<= 20;
   he say Certainly f3 is better than f2?, of course f3 = O(f2), this time with c = 1. 
```

我认为 f3 比 f2 更好，因为因素较少。我的问题

1）为什么常数c = 1他怎么选的？2) 为什么 f3 = O(f2) 以及为什么 f2 = O(f3) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:34:06.223

它们都是线性函数，所以两者都是`O(n)`，并且两者`O`都是彼此的。`f3`渐近地比 快 20 倍`f2`。所有这些事情同时是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:45:09.847

Patrick87 的回答更多地解释了 Big-O 表示法的渐近性质。我将向您展示对此的更多分析。让我们更仔细地检查`f2`一下`f3`：

首先，`f2(n)`我们知道`f2(n) = O(2n + 20)`。20 是一个常数，所以我们可以忽略它。所以，`f2(n) = O(2n + 20) = O(2n)`。同样，2 是一个常数，所以我们也可以忽略它，所以：`f2(n) = O(2n + 20) = O(2n) = O(n)`。

这个分析的意思是，随着`n`增加，函数的增长速度与函数的`2n + 20`增长速度一样快，函​​数的增长速度与函数`2n`的增长速度一样快`n`。如果您考虑一下，这是有道理的：所有这些功能都是平行线。它们的增长速度是相同的。

现在`f3(n)`：我们知道`f3(n) = O(n + 1)`。1 是一个常数，所以我们可以忽略它。所以，`f3(n) = O(n)`。

这就是为什么`f3`和`f2`都是`O(n)`。这并不意味着对于给定的 值，这些函数所用的*时间完全相同*`n`，或者与时钟时间`f2`一样快`f3`。这只是意味着这两个功能的*复杂性*（即他们完成工作所花费的时间）以与增加相同的速度*增加*`n`。

# ruby-on-rails - 升级乘客（对于 nginx）后出现 403 错误让我彻夜难眠……我哪里出错了？

> ID：14864409
> 
> 赞同：1
> 
> 时间：2013-02-13T22:25:22.973
> 
> 标签：ruby-on-rails, nginx, passenger

我想我已经阅读了与乘客/nginx 和 403 错误相关的所有问题和答案，但没有一个能引导我找到解决方案，所以我开始......

我让 Nginx (1.0.6) 和 Passenger (3.0.9) 为 Rails 应用程序运行了很多很多个月，没有真正的问题。今晚我决定从Passenger v3.0.9 升级到v3.0.12 以利用新功能。根据提供的说明（使用 RVM）运行安装后，我访问了我的 rails 应用程序提供的 URL，并得到了可怕的 403 错误。nginx 日志文件首先让我认为这是一个权限错误：

```
 directory index of "/home/SimfoUsers/public/" is forbidden, client: , server: , request: "GET / HTTP/1.1", host: "" 
```

但是在检查了所有可能的许可之后，我不再认为这是问题所在。我认为问题实际上是乘客实际上并没有在运行，并且该页面被 nginx 用作“正常”网页。如果我将 index.html 文件添加到我的 rails 公共目录 (/home/SimfoUsers/public/)，nginx 会按照预期提供此文件，这一事实支持这一点。此外，如果我运行乘客内存统计，零乘客进程正在运行。nginx 不应该在需要时自动生成乘客进程，还是我在这里完全遗漏了什么？

以下是我的 nginx.conf 文件的相关部分：

```
http {
    passenger_root /usr/local/rvm/gems/ruby-1.9.2-p290@Simfo/gems/passenger-3.0.12;
    passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.2-p290@Simfo/ruby;
    ...

    server {
        listen       80;
        server_name  simfo.info www.simfo.info;
        root         /home/SimfoUsers/public;
        passenger_enabled on;
    }
} 
```

基本上，我从以前的工作配置文件中改变的唯一一件事是更新passenger_root 和passenger_ruby 指令以反映新版本的passenger (3.0.12)。所以如果这是一个配置文件问题，我真的很茫然地理解它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:57:29.620

我不确定是删除这个问题，还是留下它，以防它可以拯救其他人同样的挫败感。这绝对是一个掌心的时刻......

无奈之下，我终于重启了服务器。之后，一切正常。似乎在某些时候与乘客相关的进程死亡并且没有自动重新生成。有人会认为重新安装并重新启动 nginx 后会重新启动乘客，但显然情况并非如此。我对任何有类似问题的人的唯一建议是发布一个`ps aux | grep passenger`（或 Windows 上的任务列表？）。您应该会看到一两个与乘客相关的流程。如果没有，那么发生了一些奇怪的事情，重新启动也可能对您有所帮助。

# linux - 带有 hfsbless 的 geniso 不工作

> ID：14864411
> 
> 赞同：0
> 
> 时间：2013-02-13T22:25:34.847
> 
> 标签：linux, macos, bash

我创建了一个顶级文件夹“top”和一个子级文件夹“sub”，并希望用 genisoimage 祝福文件夹“sub”。

genisoimage -r -J -V "top" --hfs-bless top/sub -o top.iso 顶部。

显然，当我在 MAC 中插入 top.iso 图像时，我的文件夹“sub”没有得到祝福。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:35:26.630

是的——你没有指定`--hfs`标志，所以你的 ISO 映像不包含 HFS 文件系统，因此不能有一个祝福文件夹。

话虽这么说：当 Mac OS X 出现时，Blessed 文件夹基本上不再是一个东西。除非您尝试构建某种奇怪的多操作系统引导 CD，否则我不确定这是您想要的。

# asp.net - 删除对 System.Web.Mvc 2 的引用

> ID：14864412
> 
> 赞同：0
> 
> 时间：2013-02-13T22:25:38.683
> 
> 标签：asp.net, visual-studio-2010, dll-reference

Visual Studio 2010 Asp.Net Web 项目（这不是 mvc 项目）

我有一个刚刚升级到新版本的 kentico CMS Web 项目。这个新版本使用 System.Web.Mvc 3。我需要删除 System.Web.Mvc 2 引用。我在 Bin 文件夹中没有看到此引用，那么如何删除 Mvc 2 引用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:23:00.440

我已从 web.config，程序集部分删除了引用

# android - 为什么我的 android 应用程序无法打开/启动？

> ID：14864413
> 
> 赞同：0
> 
> 时间：2013-02-13T22:25:45.610
> 
> 标签：android

当有人从应用商店安装我的应用时，打开按钮（通常在安装完成后位于卸载按钮旁边）显示为灰色，并且在他们的应用抽屉中找不到该应用。

此外，当我从 Eclipse 执行选择默认活动时，它在控制台中说它安装了 APK，但它没有启动。如果我在运行配置中选择 Splash 活动作为默认活动，它会顺利运行，但之后我仍然无法在我的应用程序抽屉中找到它。帮助将不胜感激c：

显现：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.meteorfiber.gangnamstyle.Splash"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.meteorfiber.gangnamstyle.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.meteorfiber.gangnamstyle.MainActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.meteorfiber.gangnamstyle.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

溅：

```
package com.meteorfiber.gangnamstyle;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.preference.PreferenceManager;

public class Splash extends Activity {

private final int SPLASH_DISPLAY_LENGTH = 3000;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
}

@Override
protected void onResume() {
    super.onResume();
    SharedPreferences sp = PreferenceManager
            .getDefaultSharedPreferences(this);

    boolean isSplashEnabled = sp.getBoolean("isSplashEnabled", true);

    if (isSplashEnabled) {
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {

                Splash.this.finish();

                Intent mainIntent = new Intent(Splash.this,
                        MainActivity.class);
                Splash.this.startActivity(mainIntent);
            }
        }, SPLASH_DISPLAY_LENGTH);
    } else {

        finish();
        Intent mainIntent = new Intent(Splash.this, MainActivity.class);
        Splash.this.startActivity(mainIntent);
    }
}
 } 
```

主要活动：

```
package com.meteorfiber.gangnamstyle;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Window;
import android.view.WindowManager;

public class MainActivity extends Activity {

    MediaPlayer ourSong;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new GameView(this));
    ourSong = MediaPlayer.create(MainActivity.this, R.raw.song);
    ourSong.start();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // preventing default implementation previous to
        // android.os.Build.VERSION_CODES.ECLAIR
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    ourSong.release();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:28:23.793

将您的起始活动的意图过滤器更改为

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

android 启动器与设置活动一起尝试在您的应用程序中找到此意图过滤器以启动活动。如果找不到，您的活动将无法使用典型的启动器启动，并且不会显示。

# eclipse - 尝试在 Eclipse 的源菜单下放置新的“生成”选项

> ID：14864415
> 
> 赞同：0
> 
> 时间：2013-02-13T22:25:57.247
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

当您右键单击 Java 文件时，我正在尝试在“源”菜单下添加一个新的“生成...”选项。在这一点上，我只是想让菜单选项出现，但我还没有成功。

就你所见，我的 plugin.xml 文件有问题吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <extension point="org.eclipse.ui.popupMenus">
        <objectContribution
            id="GenerateBuilderPlugin.contribution1"
            objectClass="org.eclipse.core.resources.IFile">
         <action
               class="generatebuilderplugin.popup.actions.GenerateBuilder"
               enablesFor="1"
               id="GenerateBuilderPlugin.newAction"
               label="Generate Builder..."
               menubarPath="org.eclipse.jdt.ui.source.menu/generateGroup">
         </action>
      </objectContribution>
   </extension>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:19:14.357

我最终选择了“Hello, World Command”模板并根据我的需要进行了调整。

下面是更新后的 plugin.xml，它成功地在 Source 菜单上显示了新的“Generate...”选项。基本上只需要设置一个命令和一个执行实际工作的处理程序类。我建议您只遵循“Hello, World Command”插件模板并根据您的需要进行调整。

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <extension point="org.eclipse.ui.commands">
        <command
             name="Generate Builder..."
             id="GenerateBuilderProject.commands.GenerateBuilder">
        </command>
    </extension>
   <extension point="org.eclipse.ui.handlers">
      <handler
            commandId="GenerateBuilderProject.commands.GenerateBuilder"
            class="generatebuilderproject.handlers.GenerateBuilderHandler">
      </handler>
   </extension>
   <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="popup:org.eclipse.jdt.ui.source.menu?after=generateGroup">
        <command
              commandId="GenerateBuilderProject.commands.GenerateBuilder"
              id="GenerateBuilder.menus.GenerateBuilder">
        </command>
      </menuContribution>
   </extension>
</plugin> 
```

# python - Jinja 从字符串加载模板 - 并从文件扩展

> ID：14864416
> 
> 赞同：2
> 
> 时间：2013-02-13T22:25:58.600
> 
> 标签：python, django, django-templates, jinja2

我有以下代码：

```
from jinja2 import Template
templ_str = "lots of garbly html" # Compiled by external logic
templ_context = ast.literal_eval(context_dir)  # Compiled by external logic
template = Template(templ_str)
template.render(**context) 
```

模板的主体被即时编译并传递给模板引擎。但是，我想从文件中使用基本包装器扩展该模板。我知道这可以用 FileSystemLoader 来完成，但我需要从内存中加载我的主模板，而不是从文件中加载。

从 API 文档来看，这似乎是不可行的。任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:52:50.380

我想你可以只用 a`ChoiceLoader`这个吗？将您生成的模板放入 中`DictLoader`，然后`ChoiceLoader`使用`DictLoader`和适当的`FileSystemLoader`.

# c++ - 为什么 select(QTextCursor::BlockUnderCursor) 包含一个额外的垃圾字符？

> ID：14864424
> 
> 赞同：0
> 
> 时间：2013-02-13T22:26:25.113
> 
> 标签：c++, qt

Windows 7 SP1
MSVS 2010
Qt 4.8.4

我`QTextCursor`用来抓取每个块的文本。我`select(QTextCursor::BlockUnderCursor)`用来抓取文本，然后使用`movePosition(QTextCursor::NextBlock)`. 但是当我再次`select(QTextCursor::BlockUnderCursor)`得到一个额外的垃圾字符时，`QString`锚已经移动到前一个块的末尾。

将此用于 text.txt：

```
A
B 
```

此代码的注释贯穿问题并提出以下问题：

```
 #include <QTGui>
 int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QMainWindow*          window = new QMainWindow;
    QTextEdit*            editor = new QTextEdit(window);
    QTextDocument*      document = new QTextDocument(window);

    editor->setDocument(document);
    QFile file("test.txt");
    if (file.open(QFile::ReadOnly | QFile::Text))
        editor->setPlainText(file.readAll());

    QTextBlock block = document->begin();
    QTextCursor* cursor = new QTextCursor(document);
    int pos = cursor->position();           // = 0
    int anchor = cursor->anchor();          // = 0

    cursor->select(QTextCursor::BlockUnderCursor);
    pos = cursor->position();               // = 1
    anchor = cursor->anchor();              // = 0

    QString text = cursor->selectedText();  // = "A"
    int size = text.size();                 // = 1

    cursor->movePosition(QTextCursor::NextBlock);
    pos = cursor->position();               // = 2
    anchor = cursor->anchor();              // = 2

    cursor->select(QTextCursor::BlockUnderCursor);
    pos = cursor->position();               // = 3
    anchor = cursor->anchor();              // = 1 Why not 2?

    text = cursor->selectedText();          // "B" in debugger
                                            // but text.at(0) = junk & test.at(1) = "B"
    size = text.size();                     // = 2 Why? Why not 1?

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:02:19.790

它不是垃圾。第一个字符包括 U+2029 段落分隔符 (HTML: PSEP)。换言之，选择块包括起始段落分隔符。第一个块没有起始 SEP。因此，如果要单独提取后续块的文本，则需要排除第一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:54:19.093

导航值与 a 的性质`QTextBlock`、如何按块导航以及由 确定的内容有关`BlockUnderCursor`。该文档对此提供了一些见解：

[http://doc.qt.digia.com/main-snapshot/qtextblock.html#details](http://doc.qt.digia.com/main-snapshot/qtextblock.html#details)

这是文档的另一部分似乎对我有帮助：

[http://doc.qt.digia.com/main-snapshot/qtextblockformat.html#details](http://doc.qt.digia.com/main-snapshot/qtextblockformat.html#details)

我没有尝试过你的发现，但这里有一些我的想法：

在某些方面，我认为它就像在 MS Word 文档中的 Windows 中按 Ctrl+Up 或 Ctrl+Down。其中一些可能与您使用的行尾有关。"\r\n" v. "\n"。我知道有时使用“eof”字符很奇怪。某些文档和格式需要在文件字符结尾之前换行。

希望有帮助。

# c# - C# 的 IncrementArray 和 Array.Copy 函数

> ID：14864441
> 
> 赞同：0
> 
> 时间：2013-02-13T22:27:46.183
> 
> 标签：c#, ruby

我正在尝试将用 C# 制作的应用程序移植到 Ruby，但我无法理解几个函数。

这是代码。

```
for (int pos = 0; pos < EncryptedData.Length; pos += AesKey.Length)
{
    Array.Copy(incPKGFileKey, 0, PKGFileKeyConsec, pos, PKGFileKey.Length);

    IncrementArray(ref incPKGFileKey, PKGFileKey.Length - 1);
}

private Boolean IncrementArray(ref byte[] sourceArray, int position)
{
    if (sourceArray[position] == 0xFF)
    {
        if (position != 0)
        {
            if (IncrementArray(ref sourceArray, position - 1))
            {
                sourceArray[position] = 0x00;
                return true;
            }
            else return false;
        }
        else return false;
    }
    else
    {
        sourceArray[position] += 0x01;
        return true;
    }
} 
```

我知道数组和键的长度是 16。如果有人能解释 Array.Copy 和 IncrementArray 函数的工作原理，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:31:35.007

Array.Copy copies data from one array to the other:

*   incPKGFileKey is the source array
*   0 is the offset in the source array to start copying from
*   PKGFileKeyConsec is the destionation array
*   pos is the offset to in the destination array start copying to
*   PKGFileKey.Length is the number of array items to copy

IncrementArray, to my knowledge, is not part of the .NET framework, and should be defined somewhere in your project.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:32:27.000

`Array.Copy` is described, like any other .NET type or method, in MSDN library: [http://msdn.microsoft.com/en-us/library/y5s0whfd.aspx](http://msdn.microsoft.com/en-us/library/y5s0whfd.aspx)

`IncrementArray` is obviously in your code (in the same class or the base class of this one), so you will have to read that code.

# controls - 使用三个控件时未调用 camera.lookAt

> ID：14864443
> 
> 赞同：0
> 
> 时间：2013-02-13T22:27:48.203
> 
> 标签：controls, three.js

我正在开发一个使用 THREE.RollControls 的程序，当用户离屏幕中心太远时，他们往往会迷路，所以我正在努力创建一个重新定向它们的函数，面向中心场景。

我打算做的只是简单地调用以下内容：

```
camera.lookAt(scene.position) 
```

但是，这没有影响。从我读到的关于不同堆栈溢出问题的具体内容来看： [ThreeJS camera.lookAt() has no effect, 难道我做错了什么？](https://stackoverflow.com/questions/10325095/threejs-camera-lookat-has-no-effect-is-there-something-im-doing-wrong)

似乎他们的解决方案是使用控件更改相机位置，而不是更改相机本身。

我不相信滚动控件中有任何“目标”，所以我不知道如何根据 THREE.Vector3() 重置相机正在查看的位置是否有一种简单的方法可以做到这一点，或者将我基本上必须：

到目前为止，我已经“尝试”执行以下操作： - 计算相机位置与场景位置的差异。- 规范化这个向量 - 从相机前方的方向减去它 - 在 controls.forward.add(thisVector) 中使用这个向量

但这根本不是我想要的（可能是因为我不知道我在做什么）

提前感谢您的宝贵时间！

艾萨克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:51:48.613

对于 RollControls，同样的事情也困扰着我，但我采取了不同的方法来解决问题。由于控件在示例代码中（在 r55 中），因此您可以修改控件，因为它们不是核心库的一部分。[您可以在http://www.virtuality.gr/AGG/EaZD-WebGL/js/three.js/examples/js/controls/RollControls.js](http://www.virtuality.gr/AGG/EaZD-WebGL/js/three.js/examples/js/controls/RollControls.js)看到我的修改 我引入了一个名为 mouseLook 的局部变量，因为我无法使用this.mouse 看。我将其初始化为假，并且仅在按下按钮时才将其设为真，即在场景中导航时。这解决了我的问题。

# c# - ServiceHost 仅支持类服务类型

> ID：14864444
> 
> 赞同：2
> 
> 时间：2013-02-13T22:27:51.853
> 
> 标签：c#, wcf

我正在创建一个 WCF 服务，它昨天似乎在 VS 测试客户端上运行良好，但今天在我尝试更改 web.config 文件后似乎抛出了这个错误。

下面是代码和配置文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace TSService
{
    interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface ITSService

    [OperationContract]
    List<Sel_Test> RunScript(List<SName> SNamesToRun, int LogPathIndex, RunEnvironment EnvironmentName, BOptions BType, NavOption NavEnum);

}

 [DataContract]
    public class STest
    {
        [DataMember]
        public ScriptName SName { get; set; }
        [DataMember]
        public BOptions BTypeUsed { get; set; }
        [DataMember]
        public int SResult { get; set; }
    }

    [DataContract(Name= "SName")]
    public enum SName
    {
        [EnumMember]
        PXXXX1,
        [EnumMember]
        PXXXX2,
        [EnumMember]
        PXXXX3,
        [EnumMember]
        PXXXX4

    }

    [DataContract]
    public enum NavOption 
    {
        [EnumMember]
        ContinueToNext,
        [EnumMember]
        Skip,
        [EnumMember]
        SignIn,
        [EnumMember]
        Registration
    }

    [DataContract]
    public enum BOptions
    { 
        [EnumMember]
        FAA1,
        [EnumMember]
        ReFi,
        [EnumMember]
        RIE
    }

    [DataContract]
    public enum RunEnvironment 
    {
        [EnumMember]
        D,
        [EnumMember]
        Q,
        [EnumMember]
        S,
        [EnumMember]
        P
    }
    [DataContract]
    public enum PType 
    {
        [EnumMember]
        MAPD,
        [EnumMember]
        PDP,
        [EnumMember]
        MA,
        [EnumMember]
        Mgap
    };
} 
```

在配置文件中我有：

```
<system.serviceModel>

    <behaviors>
      <serviceBehaviors>
        <behavior name="TSServiceBehavior">
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>
      <service name="TSService.ITSService" behaviorConfiguration="TSServiceBehavior">
        <endpoint address=""
                  binding ="basicHttpBinding"
                  contract="TSService.ITSService" />

        <endpoint address="mex"
                  binding="mexHttpsBinding"
                  contract="IMetadataExchange" />
      </service>
    </services>

    <bindings>
      <basicHttpBinding>
        <binding name ="TSServiceBinding" receiveTimeout="00:20:00" sendTimeout="00:20:00">
          <security mode="None"/>
        </binding>
      </basicHttpBinding>
    </bindings>

    <!--<protocolMapping>
      <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>-->
    <serviceHostingEnvironment aspNetCompatibilityEnabled="False" multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\log\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

在 SVC 标记中，我有：

```
<%@ ServiceHost Language="C#" Debug="true" Service="TSService.ITSService" CodeBehind="TSService.svc.cs" %> 
```

我在运行 VS WCFTest 客户端时遇到的错误：

```
Error: Cannot obtain Metadata from http://localhost:55178/TSService.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address. For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error URI: http://localhost:55178/TSService.svc Metadata contains a reference that cannot be resolved: 'http://localhost:55178/TSService.svc'. The requested service, 'http://localhost:55178/TSService.svc' could not be activated. See the server's diagnostic trace logs for more information.HTTP GET Error URI: http://localhost:55178/TSService.svc There was an error downloading 'http://localhost:55178/TSService.svc'. The request failed with the error message:-- 
Server Error in '/' Application.
--------------------------------------------------------------------------------

ServiceHost only supports class service types. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: ServiceHost only supports class service types.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[ArgumentException: ServiceHost only supports class service types.]   System.ServiceModel.Description.ServiceDescription.GetService(Type serviceType) +12912843   System.ServiceModel.ServiceHost.CreateDescription(IDictionary`2& implementedContracts) +58   System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) +146   System.ServiceModel.ServiceHost.InitializeDescription(Type serviceType, UriSchemeKeyedCollection baseAddresses) +46   System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) +146   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) +30   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +494   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +1434   System.ServiceModel.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity) +52   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +598[ServiceActivationException: The service '/TSService.svc' cannot be activated due to an exception during compilation.  The exception message is: ServiceHost only supports class service types..]   System.Runtime.AsyncResult.End(IAsyncResult result) +495736   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178   System.ServiceModel.Activation.ServiceHttpModule.EndProcessRequest(IAsyncResult ar) +348782   System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar) +9662977

--------------------------------------------------------------------------------
Version Information:ÿMicrosoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.18034 --. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:52:28.403

根据评论将此标记为已回答 - “我通过在标记中将 ITSService 更改为 TSSErvice 来消除此错误。”

# msbuild - 在保留相对路径的同时使用 msbuild 动态包含文件？

> ID：14864454
> 
> 赞同：4
> 
> 时间：2013-02-13T22:28:48.060
> 
> 标签：msbuild, embedded-resource, csproj

我正在尝试使用以下 msbuild 目标将来自第二个项目的文件作为 EmbeddedResources 包含在内：

```
 <CreateItem Include="..\MyProject.Templates\**\*.css">
      <Output ItemName="EmbeddedResource" TaskParameter="Include" />
    </CreateItem> 
```

但是包含的文件丢失了它们的路径，例如`~\Views\_Layout.cshtml`包含为`_Layout.cshtml`（不是`Views._Layout.cshtml`所需的）。有什么方法可以达到预期的效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:47:33.583

MSBuild has [New Methods for Manipulating Items and Properties](http://msdn.microsoft.com/en-us/library/bb651786(v=vs.90).aspx). Using these methods, you can map your resources using an ItemGroup (instead of CreateItem), then create another ItemGroup applying [MSBuild Transforms](http://msdn.microsoft.com/en-us/library/ms171476(v=vs.110).aspx) with [MSBuild Well-known Item Metadata](http://msdn.microsoft.com/en-us/library/ms164313.aspx). There are many item metadata options you could use to achieve the desired effect. There's a clear example of the syntax on [this answer](https://web.archive.org/web/20090912102740/http://stackoverflow.com/questions/770298/transform-itemgroup-msbuild-to-another-itemgroup-while-applying-formatting).

I wrote a little script as an example. It creates an ItemGroup with *.exe files and transforms them. Tested with MSBuild 3.5.

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Project DefaultTargets="CreateItems" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="CreateItems">
    <ItemGroup>
      <Exe Include="..\**\*.exe" />
    </ItemGroup>
    <ItemGroup>
      <TransformedExe Include="@(Exe->'%(Relativedir)')"/>
    </ItemGroup>
    <Message Text="1 - @(Exe)" />
    <Message Text="2 - @(TransformedExe)" />
  </Target>
</Project> 
```

# java - 连任后MongoDB java请求慢

> ID：14864458
> 
> 赞同：2
> 
> 时间：2013-02-13T22:29:00.260
> 
> 标签：java, performance, mongodb

我正在使用带有简单 Java 程序（因此使用 java mongodb 驱动程序）的 MongoDB 副本集（具有 3 个副本）。我以这种方式初始化驱动程序：

```
mongoClient = new MongoClient(Arrays.asList(new ServerAddress(node0, port),
                new ServerAddress(node1, port),
                new ServerAddress(node2, port))); 
```

当我关闭 node0 服务器（关闭之前的主服务器）时，将查询写入数据库需要一些时间（5 或 6 秒）。我想知道这是否正常，它没有直接命中新的主节点似乎很奇怪。

如果这是正常的，有什么想法吗？

**编辑**

我不是在谈论在选举过程中发生的查询，而是在选举新领导人后完成的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:33:00.880

Yes, it does take ~10 seconds or so for the election to take place, and the actual failover to happen. [Here](http://docs.mongodb.org/manual/faq/replica-sets/#how-long-does-replica-set-failover-take) is a link to the official documentation:

# java - 检查 char 是否为空

> ID：14864459
> 
> 赞同：4
> 
> 时间：2013-02-13T22:29:07.243
> 
> 标签：java, c++, char, is-empty, isnullorempty

我在将代码从 java 转换为 C++ 时遇到一个小问题

我正在尝试检查是否设置了二维数组，这是我的 java 代码

```
for(int area_y = y -1 ;area_y > 0 ;area_y--)
    {
        for(int area_x =  0 ;area_x < x; area_x++)
        {   
            if(area[area_x][area_y] == 0)
            {
                System.out.print(" "); // this is printed 
                                      //  if area[area_x][area_y] is not set 

            }
            else
            System.out.print(area[area_x][area_y]);

        }
            System.out.println();
    } 
```

这是我的 C++ 代码，它有效

```
for(int area_y = y -1 ;area_y > 0 ;area_y--)
{
    for(int area_x =  0 ;area_x < x; area_x++)
    {   
        if(area[area_x][area_y] == 0) // this line does not work as
                                      // the next line is not executed
        {
            cout << "1";
        }
        else
        cout << (area[area_x][area_y]) ;                
    }

cout << endl;
} 
```

问题在于检查是否设置了该变量，它是`char area[20][50];`

如何在 c++ 中正确检查变量是否为空（未设置）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:36:47.587

在 C++ 中，标量类型的对象不是零初始化的。它们是默认初始化的，这意味着它们在初始化时获得的值是未定义的。

特别是，对于`char`s、`int`等，该值不太可能为 0，并且绝对不应该依赖它来获得任何特定值。如果您希望在开始使用它们之前将数组单元初始化为 0，则必须手动初始化它们。

如果您来自 Java 世界，您可能会认为这是不必要的大量工作，但请考虑您正在使用 C 风格的数组，而 C 并不是为了牺牲程序员的时间而牺牲性能。在某些情况下，初始化为 0 会无用地浪费 CPU 时间，并且您不想为不使用的东西付费。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T22:38:15.027

无法检查变量是否已“设置”。您只能检查它是否等于特定值。

您在 java 中的代码似乎可以工作，因为在 Java 中，所有创建但未初始化的原始数据类型都由编译器赋予了默认值。在 char 的情况下，它是 '\u0000'，相当于 0。

在 c++ 中，这些字符的值是未定义的。如果您想具有相同的行为，则需要在进行检查之前将所有字符显式设置为 0。

# sql - 对于星期一，我需要将 App 的默认日期设置为上一个星期五吗？

> ID：14864464
> 
> 赞同：5
> 
> 时间：2013-02-13T22:29:36.213
> 
> 标签：sql, sql-server

当报告在星期一运行时，它需要将默认日期设置为星期五？还有 4 个其他条件查看要求。如何在 sql 语句中执行此操作是一个问题。

所以在伪代码中，

如果今天的日期是星期一，则使用完整日期格式将默认日期设置为星期五。

如果今天的日期是星期六，则使用完整日期格式将默认日期设置为星期五。

如果今天的日期是星期日，则使用完整日期格式将默认日期设置为星期五。

如果是其他日期，则将默认日期设置为前一个工作日。

所以可能需要一个 sql 语句和一个 case 语句。

现在我发现这些语句给出了星期几，所以现在需要做下一部分，这可能是一个案例陈述或一个函数？这是我需要帮助的部分。

```
select datename(dw,getdate()) --Monday
select datepart(dw,getdate()) -- 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:38:18.377

```
SET DATEFIRST 1;

DECLARE @day DATE = SYSDATETIME();

SELECT @day = DATEADD
(
  DAY, 
  CASE 
    WHEN DATEPART(WEEKDAY, @day) IN (1,2) 
      THEN  -(DATEPART(WEEKDAY, @day)+1) 
    ELSE -1 
  END, 
  @day);

SELECT @day; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:02:37.603

因此，如果 WEEKDAY（或 dw）值为 3-6（周二至周六），则减去一天。否则，星期天减去一天，星期一再减去两天。

幸运的是，星期日的值是 1，星期一的值是 2，所以你可以减去那些日子的值。

```
DECLARE @DefaultDate datetime
SET @DefaultDate = 
    CASE 
        WHEN DATEPART(WEEKDAY, GETDATE()) IN (1,2) -- OR (1,7) outside the U.S.
            THEN DATEADD(DAY, (-1 - DATEPART(WEEKDAY, GETDATE())), GETDATE())                       
        ELSE
            DATEADD(DAY, -1, GETDATE())
    END 
```

# android - ActionBar 2 个选项卡，每个选项卡中的列表，onClick 行并不总是触发

> ID：14864465
> 
> 赞同：0
> 
> 时间：2013-02-13T22:29:37.650
> 
> 标签：android, android-listview, android-actionbar, android-listfragment

这可能是一个重复的问题，但我查看了很多 SO 问题，但没有找到任何帮助。

我有一个使用 ActionBar 的应用程序，它有 2 个选项卡。每个都是 ListFragment，我无法选择其中的任何项目。他们会很好地填充，但 onListItemClick 不会触发。如果我将 setOnItemClickListener 直接用于我的 ListView，它也不会触发。但是，如果我只是扩展 Fragment 而不是 ListFragment，如果我将 onClickListener 附加到每一行，则 onClick 将触发。但这将允许多行可点击，这不是我想要发生的事情。谁能帮我弄清楚我做错了什么？提前致谢。

这是我的主要活动：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Get the action bar
        Drawable drawable = getResources().getDrawable(R.drawable.action_bar);
        ActionBar bar = getActionBar();
        bar.setBackgroundDrawable(drawable);
        bar.addTab(bar.newTab().setText("Tab 1").setTabListener(new TabHandler()));
        bar.addTab(bar.newTab().setText("Tab 2").setTabListener(new TabHandler()));
        bar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_USE_LOGO);
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayShowHomeEnabled(true);
        bar.setDisplayHomeAsUpEnabled(true);
        bar.setDisplayShowTitleEnabled(false);
    }
} 
```

这是我的 TabHandler：

```
public class TabHandler implements ActionBar.TabListener {
    public Fragment mFragment;

    public TabHandler() { }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        switch (tab.getPosition()) {
            case 0:
                if(mFragment == null) {
                    mFragment = new ListFragmentA();
                    fragmentTransaction.add(android.R.id.content, mFragment, null);
                }
                else {
                    fragmentTransaction.show(mFragment); //Looking into detach and attach as well
                }
                break;
            case 1:
                if(mFragment == null) {
                    mFragment = new ListFragmentB();
                    fragmentTransaction.add(android.R.id.content, mFragment, null);
                }
                else {
                    fragmentTransaction.show(mFragment);
                }
                break;

            default:
                break;
        }
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        if (mFragment != null) {
            mFragment.getFragmentManager().popBackStackImmediate();
            fragmentTransaction.hide(mFragment);
        }
   }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        mFragment.getFragmentManager().popBackStackImmediate();
    }
} 
```

这是我的片段之一的示例：

```
public class ListFragmentA extends ListFragment {
MyCustomAdapter myCustomAdapter;
ListView myListView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.my_list_background,container,false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if(getActivity() != null) {
        myListView = (ListView)getActivity().findViewById(android.R.id.list);
        if(myListView != null) {
            CrudService itemService = new CrudService<TestItem>(TestItem.class);
            ArrayList<TestItem> myItems = (ArrayList<TestItem>) itemService.FindAll();
            myCustomAdapter = new MyCustomAdapter(getActivity(), myItems);
            myListView.setAdapter(myCustomAdapter);
            myListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            myListView.setOnItemClickListener(new OnItemClickListener(){
                @Override
                public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                    Log.i("ListFragmentA", "MyListView onItemClick");
                }                
            });
        }
    }
}
//This isn't getting fired
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    Log.i("ListFragmentA", "onListItemClick at position " + position);
}

public class MyCustomAdapter extends ArrayAdapter<TestItem> {
    Context mContext;
    ArrayList<TestItem> mItems;

    public MyCustomAdapter(Context context, ArrayList<TestItem> items) {
        super(context, android.R.id.list, items);
        mContext = context;
        mItems = items;
    }

    public int getCount() {
        return mItems.size();
    }

    public TestItem getItem(int position) {
        return mItems.get(position);
    }

    public long getItemId(int position) {
        return mItems.get(position).getId();
    }

    public View getView(final int position, View convertView, ViewGroup arg2) {
        View rowView = convertView;
        if(rowView == null) {
            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            rowView = inflater.inflate(R.layout.single_item, null);

            TestItemViewHolder viewHolder = new TestItemViewHolder();

            viewHolder.Name = (TextView)rowView.findViewById(R.id.txt_TestItem_Name);
            //I have a few more things
            rowView.setTag(viewHolder);
        }

        TestItemListViewHolder holder = (TestItemListViewHolder)rowView.getTag();

        TestItem gottenItem = getItem(position);
        holder.Name.setText(gottenItem.getName());
        //I have a few more things
        //However, this will fire if not a ListFragment
        rowView.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.i("ListFragmentA", "RowView onClick at position " + position);
            }
        });
        return rowView;
    }
}
} 
```

这是我的“my_list_background”xml 的示例

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/Tab_Layout_A"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="5dp"
android:background="@color/white">

<!-- listview Title Layout -->
<LinearLayout 
    android:id="@+id/ll_Table_Title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:layout_marginBottom="-15dp"
    android:layout_marginTop="7dp"
    android:layout_marginLeft="11dip"
    android:layout_marginRight="11dip"
    android:orientation="horizontal"
    android:weightSum="100"
    android:background="@color/black">

    <TextView
        android:id="@+id/txt_TestItem_Name"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="@string/Name"
        android:textColor="@color/white"
        android:textStyle="bold" />
<!--I have omitted the other columns-->
</LinearLayout>

<LinearLayout
    android:id="@+id/message_List_Layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">
    <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>    
</LinearLayout>
</LinearLayout> 
```

和我的“single_item”xml的一个例子

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/single_row"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" 
android:gravity="center_vertical"
android:weightSum="100">

<TextView 
    android:id="@+id/txt_TestItem_Name"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:padding="2dip"
    android:layout_weight="25"
    android:textColor="@color/black"/>
<ImageButton 
    android:id="@+id/btn_Next"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:padding="2dip"
    android:layout_weight="2"
    android:background="@drawable/disclosure_button"
    android:contentDescription="@string/next_Button"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:08:12.237

好的，所以我发现了我的问题。在我的“single_item”xml 文件中，我有一个 ImageButton 正在窃取焦点。我把它换成了 ImageView，它工作得很好。

# javascript - 循环通过 ajax 脚本来处理页面上的表单

> ID：14864469
> 
> 赞同：0
> 
> 时间：2013-02-13T22:30:00.150
> 
> 标签：javascript, ajax, forms, loops

我有一个页面有很多小的单行表格，每个表格有 5 个项目。表单的 id 为 form1、form2、form3 等，项目的 id 和提交按钮遵循相同的模式。我编写了以下 ajax 脚本，用于一次处理一个表单，其中变量 $n 对应于表单和项目编号。我不确定如何为页面上的每个表单循环遍历此脚本。我是否需要先以某种方式计算页面上的表单数量，然后创建一个循环，如果需要，我该怎么做？

```
$(".submit$n").click(function() {

        var action = $("#form$n").attr('action');
        var form_data = {
            name: $j("#name$n").val(),
            date: $j("#date$n").val(),
            attended: $j("#attended$n").val(),
            paid: $j("#paid$n").val(),
            method: $j("#method$n").val(),
            is_ajax: 1
        };

        $j.ajax({
            type: "POST",
            url: action,
            data: form_data,
            success: function(response){

                if(response == 'success')

                    $j("#form$n").fadeOut(800);
                    console.log(response);  
            }
        });

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:59:47.970

对不起，但我不认为这是正确设置的，也不是公认的答案......它只是非常混乱。我不确定您的原始代码是否已针对您拥有的每种形式复制（因为整个`$n`变量让我感到困惑，让我认为您拥有它多次），但如果是这样，则不需要它。这是我会使用的：

```
$(document).ready(function () {
    $(".submit").click(function () {
        var $this = $(this);
        var $form = $this.closest("form");
        var action = $form.attr('action');

        var form_data = {
            name: $form.find("[id^=name]").val(),
            date: $form.find("[id^=date]").val(),
            attended: $form.find("[id^=attended]").val(),
            paid: $form.find("[id^=paid]").val(),
            method: $form.find("[id^=method]").val(),
            is_ajax: 1
        };

        $.ajax({
            type: "POST",
            url: action,
            data: form_data,
            success: function (response) {
                if (response == 'success') {
                    $form.fadeOut(800);
                }
                console.log(response);
            }
        });

        return false;
    });
}); 
```

只需给所有提交按钮一个“提交”类，这应该可以正常工作。只是为了确保您的 HTML 将具有以下格式：

```
<form id="form1" action="page1.php">
    <input type="text" id="name1" name="name1" /><br />
    <input type="text" id="date1" name="date1" /><br />
    <input type="text" id="attended1" name="attended1" /><br />
    <input type="text" id="paid1" name="paid1" /><br />
    <input type="text" id="method1" name="method1" /><br />
    <input type="submit" class="submit" value="Submit" />
</form> 
```

只是为了让您了解正在发生的事情，当点击提交按钮时，Javascript 会找到提交按钮的父表单。然后，使用该表单，它会查找所有具有`id`以“名称”、“日期”等开头的属性的后代。您可以这样做，因为您已将控件清楚地分隔为它们自己的表单。因此，使用此代码，您可以放心，当您单击提交按钮时，您会从它所在的表单中获取所有控件的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:44:58.873

为所有提交按钮添加一个通用类，例如：`<input type="submit" id="submit1" name="submit1" class="submit" />`

然后将您的代码更改为：

```
$('.submit').on('click', function() {
    var n = this.id.substr(6);
    // n is the number of the form. 6 because the word submit has 6 characters.
    // You might want to do this some other way.

    // you can get the rest of the values by doing
    $('#name' + n).val()
    // and so on
}); 
```

# java - Multithread GAE servlets to handle concurrent users

> ID：14864476
> 
> 赞同：9
> 
> 时间：2013-02-13T22:30:15.450
> 
> 标签：java, multithreading, google-app-engine, servlets

I'd like to multithread my GAE servlets so that the same servlet on the same instance can handle up to 10 (on frontend instance I *believe* the max # threads is 10) concurrent requests from different users at the same time, timeslicing between each of them.

```
public class MyServlet implements HttpServlet {
    private Executor executor;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        if(executor == null) {
            ThreadFactory threadFactory = ThreadManager.currentRequestFactory();
            executor = Executors.newCachedThreadPoolthreadFactory);
        }

        MyResult result = executor.submit(new MyTask(request));

        writeResponseAndReturn(response, result);
    }
} 
```

So basically when GAE starts up, the first time it gets a request to this servlet, an `Executor` is created and then saved. Then each new servlet request uses that executor to spawn a new thread. Obviously everything inside `MyTask` must be thread-safe.

What I'm concerned about is whether or not this truly does what I'm hoping it does. That is, *does this code create a non-blocking servlet that can handle multiple requests from multiple users at the same time*? If not, why and what do I need to do to fix it? And, in general, is there anything else that a GAE maestro can spot that is dead wrong? Thanks in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T07:43:16.700

我认为您的代码行不通。

该`doGet`方法在 servlet 容器管理的线程中运行。`doGet`当一个请求进来时，一个servlet线程被占用，直到方法返回才会被释放。在您的代码中，`executor.submit`将返回一个`Future`对象。要获得实际结果，您需要`get`在对象上调用方法`Future`，它会阻塞直到`MyTask`完成其任务。只有在那之后，`doGet`方法才会返回，新的请求才能启动。

我不熟悉 GAE，但根据[他们的文档](https://developers.google.com/appengine/docs/java/runtime#Requests_and_Servlets)，您可以将您的 servlet 声明为线程安全的，然后容器将并行向每个 Web 服务器发送多个请求：

```
<!-- in appengine-web.xml -->
<threadsafe>true</threadsafe> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T06:44:08.493

你含蓄地问了两个问题，所以让我两个都回答：

**1\. 如何让我的 AppEngine Instance 处理多个并发请求？**

你真的只需要做两件事：

1.  将语句添加`<threadsafe>true</threadsafe>`到您的`appengine-web.xml`文件中，您可以在文件夹中找到该`war\WEB-INF`文件。
2.  确保**所有**请求处理程序中的代码实际上是线程安全的，即在您的 、 等方法中仅使用局部变量，`doGet(...)`或者`doPost(...)`确保您同步所有对类或全局变量的访问。

这将告诉 AppEngine 实例服务器框架您的代码是线程安全的，并且您允许它在不同线程中多次调用**所有请求处理程序以同时处理多个请求。**注意：AFAIK，不可能将这个设置为每个 servlet 的基础。所以，你**所有**的 servlet 都需要是线程安全的！

因此，本质上，您发布的执行程序代码已经包含在每个 AppEngine 实例的服务器代码中，并且实际上`doGet(...)`从 AppEngine 为每个请求创建（或重用）的单独线程的 run 方法内部调用您的方法。基本上`doGet()`已经*是*你的了`MyTask()`。

文档的相关部分在这里（虽然它并没有说太多）：[https ://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)

**2\. 发布的代码对这个（或任何其他）目的有用吗？**

当前形式的 AppEngine 不允许您创建和使用自己的线程来接受请求。它只允许您使用您提到的方法在处理程序内部创建线程，但*只能*对这一个请求进行并行处理，而不是并行接受第二个请求（这发生*在外部*）。`doGet(...)``currentRequestThreadFactory()` *`doGet()`*

 *这个名字`currentRequestThreadFactory()`在这里可能有点误导。这并不意味着它将返回`current` `Factory`of `RequestThreads`，即处理请求的线程。这意味着它返回一个`Factory`可以`Threads`在`currentRequest`. 因此，不幸的是，实际上甚至不允许在当前`doGet()`执行范围之外使用返回的 ThreadFactory，就像您建议的那样，基于它创建一个 Executor 并将其保存在类变量中。

对于前端实例，您在调用中创建的任何线程都将在您的方法返回`doGet()`时立即终止。`doGet()`对于后端实例，您可以创建继续运行的线程，但由于您不允许打开服务器套接字以接受这些线程内的请求，因此这些仍然不允许您自己管理请求处理。

您可以在此处找到有关在 appengine servlet 中可以做什么和不能做*什么*的*更多详细信息：*

[Java Servlet 环境 - 沙盒](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)（特别是*线程*部分）

***为了完整起见，让我们看看如何使您的代码“合法”：***

以下应该可以工作，但它不会对您的代码能够并行处理多个请求产生影响。这将完全由`<threadsafe>true</threadsafe>`appengine-web.xml 中的设置决定。因此，从技术上讲，这段代码效率非常低，并且将一个基本上线性的程序流拆分为两个线程。但无论如何，这里是：

```
public class MyServlet implements HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        ThreadFactory threadFactory = ThreadManager.currentRequestThreadFactory();
        Executor executor = Executors.newCachedThreadPool(threadFactory);

        Future<MyResult> result = executor.submit(new MyTask(request)); // Fires off request handling in a separate thread

        writeResponse(response, result.get()); // Waits for thread to complete and builds response. After that, doGet() returns
    }
} 
```

由于您已经在一个特定于您当前正在处理的请求的单独线程中，因此您绝对应该将自己保存在“线程内的线程”中，而只需执行以下操作：

```
public class MyServlet implements HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        writeResponse(response, new MyTask(request).call()); // Delegate request handling to MyTask object in current thread and write out returned response
    }
} 
```

或者，更好的是，只需将代码从 MyTask.call() 移到 doGet() 方法中。;)

**除了 - 关于您提到的 10 个同时 servlet 线程的限制：**

这是一个（临时）设计决策，允许 Google 更轻松地控制其服务器上的负载（特别是 servlet 的内存使用）。

您可以在此处找到有关这些问题的更多讨论：

*   [问题 7927：允许每个实例的并发请求的可配置限制](http://code.google.com/p/googleappengine/issues/detail?id=7927)
*   [动态后端实例扩展](https://groups.google.com/forum/#!msg/google-appengine/Wvco3AQR-AM/N1Y7S2HfukkJ)
*   [如果您的账单因延迟增加而激增，您可能无法获得所产生的费用退款](https://groups.google.com/forum/#!msg/google-appengine/y-LnZ2WYJ5Q/j_w13F4oSSkJ)

这个话题也一直困扰着我，因为我坚信超精简的 servlet 代码，所以我常用的 servlet 可以轻松处理数百甚至数千个并发请求。至少可以说，由于每个实例 10 个线程的任意限制而不得不为更多实例付费，这对我来说有点烦人。但是阅读我上面发布的链接，听起来他们已经意识到这一点并且正在研究更好的解决方案。那么，让我们看看 Google I/O 2013 将在 5 月发布哪些公告...... :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:42:06.430

*我支持 ericson*和*Markus A*的评估。

 *但是，如果由于某种原因（或其他情况）您想要遵循使用您的代码片段作为起点的路径，我建议您将执行程序定义更改为：

```
private static Executor executor; 
```

以便它跨实例变为静态。**

# logging - Migrating custom log4j levels from version 1.x to 2.0

> ID：14864478
> 
> 赞同：0
> 
> 时间：2013-02-13T22:30:17.617
> 
> 标签：logging, log4j, log4j2

Our application (Spring MVC) uses log4j 1.4 and has a custom log4J level (ALERT which extends Level). Now that we are migrating to log4j 2, how can I migrate the custom ALERT level to log4j 2?.

Per [documentation](http://logging.apache.org/log4j/2.x/manual/architecture.html), `LoggerConfigs will be assigned a Log Level. The set of possible levels includes (TRACE, DEBUG, INFO, WARN, ERROR and FATAL). Note that in Log4j 2, the Level is an Enum and cannot be sub-classed. Users who desire more granularity are encouraged to use Markers instead.`

I am not sure how a Marker can replace a custom Log4J level. Any thoughts?

# xml - 使用 SimpleXML 读取属性

> ID：14864479
> 
> 赞同：0
> 
> 时间：2013-02-13T22:30:17.533
> 
> 标签：xml, simplexml

我仍在尝试掌握 PHP 和 XML。我有一个要截断以节省空间的 XML。我想从每条记录中获取维度名称属性**显示名称值。**我还必须从每条记录中获取**服务器管理器**状态值。

我正在使用：

```
$completeurl = "http://website/data.xml";
$xml = simplexml_load_file($completeurl);
$xml->dimension;

for ($i = 0; $i < 2; $i++) {
    $servername = $dimensions[$i]->attributes()->display-name;
    $status = $dimensions[$i]->servermanager;
}; 
```

但是，我得到：

```
Fatal error: Call to a member function attributes() on a non-object in the lines I am trying to assign variables. 
```

我正在删除我不想解析的维度之间的所有额外数据。截断的 XML 是：

```
<?xml version="1.0"?>
<aostats version="0.6" timestamp="2013-02-13 21:16:01 UTC">
    <dimension name="d1" display-name="Atlantean" loadmax="2" locked="0" players="100%">
        <servermanager status="1"/>
        <clientmanager status="0"/>
        <chatserver status="1"/>
    </dimension>
    <dimension name="d2" display-name="Rimor" loadmax="2" locked="0" players="100%">
        <servermanager status="1"/>
        <clientmanager status="0"/>
        <chatserver status="1"/>
    </dimension>
    <dimension name="dt" display-name="Test" loadmax="2" locked="0" players="100%">
        <servermanager status="1"/>
        <clientmanager status="0"/>
    </dimension>
</aostats> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:33:03.433

我自己通过实验找到了答案：

```
$completeurl = = "http://website/data.xml";
$xml = simplexml_load_file($completeurl);
$dimensions  = $xml->dimension;
for ($i = 0; $i < 3; $i++) {
$servername = $dimensions[$i]["display-name"];
$status = $dimensions[$i]->servermanager["status"];
} 
```

# google-docs-api - Search for files using Google Drive SDK and the Text in File Comment meta-data

> ID：14864480
> 
> 赞同：1
> 
> 时间：2013-02-13T22:30:27.200
> 
> 标签：google-docs-api, google-drive-api

If I "insert" a new text file into Google Drive using the Google Drive SDK and I then "insert" a Comment (content:'abcxyz') to that file, is there any way to search for files based on the text in the Comments. I did a test using

```
File.List {q= fullText contains 'abcxyz'} 
```

however it appears that comments are not included.

# node.js - 监听自定义端口时使用 SSL (https) 连接到 Nodejs/Socket.IO 服务器

> ID：14864481
> 
> 赞同：2
> 
> 时间：2013-02-13T22:30:27.670
> 
> 标签：node.js, https, socket.io

我的 socket.io 服务器正在运行并监听端口 6060。

现在，我向我的域添加了 SSL 证书，以便通过 https 协议为我的网站提供服务。

如果我尝试通过[http://mydomain.com:6060](http://mydomain.com:6060)访问 nodejs/socket.io 服务器，我会收到“欢迎来到 socket.io”。消息，但是当我使用[https://mydomain.com:6060](https://mydomain.com:6060)进行操作时，它不起作用..

是否可以使用 ssl 连接到我的 socket.io 服务器（监听端口 6060）？

在这种情况下，我有什么选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:36:31.007

试试这个：

```
var socket = io.connect('https://mysecuresite.com',{secure: true, port:6060}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:21:56.300

在搜索 sockeio 文档后，我发现了这个：

[https://github.com/LearnBoost/socket.io/issues/1011](https://github.com/LearnBoost/socket.io/issues/1011)

# java - Could it cause jar hell? Or some other class loader issues

> ID：14864485
> 
> 赞同：0
> 
> 时间：2013-02-13T22:30:43.023
> 
> 标签：java, tomcat, jar

Env:tomcat 6 I have one coreTool.jar used in a web project.

For some enhancement in coreTool, I added new class files and save this coreTool to coreToolSec.jar and make both include into the project.

As you can see there would be lots of dublicate classes with same package name, classes name, and I am afraid of doing this may cause system goes wrong.

Any thoughts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:33:30.250

不要那样做。将新的类文件添加到`coreTool.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:38:20.270

> 为了对 coreTool 进行一些增强，我添加了新的类文件并将这个 coreTool 保存到 coreToolSec.jar 并将两者都包含到项目中。

为什么不删除旧的 jar 并只`coreToolSec.jar`将其重命名为`coreTool.jar`并仅将其保留在类路径中？
没有理由再添加一个 jar，因为您正在向现有 jar 添加新类。
因此，您在同一个 jar 中同时拥有新旧类。

这里的朋友可以纠正我，但是按照你的方式，会发生以下情况：
jars是按照classpath中的顺序加载的，所以例如旧的类将首先由类加载器加载，然后它们不会被重新加载（因为类加载器只加载每个类一次），然后新类将从最新的 jar 加载。
但是随后您将获得旧 jar 中的部分类和新 jar 中的部分。
我不确定这是否会导致问题。

# c# - When explicitly setting the date formatter, it breaks when in french?

> ID：14864487
> 
> 赞同：0
> 
> 时间：2013-02-13T22:30:49.633
> 
> 标签：c#, datetime

When a user is viewing the content in french I set the culture like:

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-CA"); 
```

And when in english I set it as:

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-CA"); 
```

Now dates are stored in en-CA format so I explicity always format using:

```
var dateFormatPattern = "M/d/yyyy"; // "MM/dd/yyyy"

var dt = DateTime.MinValue;
if (DateTime.TryParseExact(dateString, dateFormatPattern, null, System.Globalization.DateTimeStyles.None, out dtResult))
{
    dt = dtResult;
} 
```

Now it works in english, but when in french mode, the parse fails.

When in debug mode, I can see the value of dateString is the same in both french and english, but could it be the IDE changing the format? Since it is a string value, I don't think it could.

Then why is it failing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:36:11.110

法国文化的日期分隔符是破折号。将格式字符串传递给 时，格式字符串中`TryParseExact`的任何斜杠都必须与输入日期中的日期分隔符匹配。

这意味着在使用格式`M/d/yyyy`和法国文化进行解析时，您需要提供一个带有格式的字符串`M-d-yyyy`才能成功解析。英语文化的日期分隔符是斜线，所以你看不到任何问题。

正确的解决方法取决于输入的来源以及您希望的宽松程度（例如，如果用户正在查看法语内容但提供了用斜杠格式化的日期怎么办？）。

# java - HashSet removes duplicates but TreeSet does not?

> ID：14864488
> 
> 赞同：5
> 
> 时间：2013-02-13T22:30:53.243
> 
> 标签：java, hashset, treeset

Output of below class is : size is 3 size is 1

But if I change the TreeSet to a HashSet so line :

```
Set<SuggestionDetailBean> set = new TreeSet<SuggestionDetailBean>(); 
```

becomes

```
Set<SuggestionDetailBean> set = new HashSet<SuggestionDetailBean>(); 
```

the output is : size is 3 size is 2

Shout using HashSet or TreeSet not change the size of Set ? Using HashSet seems to behave as expected because it is removing duplicates but when I use TreeSet the duplicates remain ? I think the hashcode and equals methods in SuggestionDetailBean are overriden correctly ?

Here is the code :

```
public class TestSet {

    public static void main(String args[]){

        SuggestionDetailBean s = new SuggestionDetailBean();
        s.setTagList("teddst");
        s.setUrl("testurl");

        SuggestionDetailBean s2 = new SuggestionDetailBean();
        s2.setTagList("teddst");
        s2.setUrl("testurl");

        SuggestionDetailBean s3 = new SuggestionDetailBean();
        s3.setTagList("tessdafat");
        s3.setUrl("fdfaasdfredtestur ldd");

        List<SuggestionDetailBean> list = new ArrayList<SuggestionDetailBean>();
        list.add(s);
        list.add(s2);
        list.add(s3);

        Set<SuggestionDetailBean> set = new TreeSet<SuggestionDetailBean>();
        set.addAll(list);

        System.out.println("size is "+list.size());
        System.out.println("size is "+set.size());

    }

}

public class SuggestionDetailBean implements Comparable<Object> {

    private String url;
    private String tagList;
    private String numberOfRecommendations;
    private String date;
    private String time;
    private String summary;
    private String truncatedUrl;

    public void setTruncatedUrl(String truncatedUrl) {

        if(truncatedUrl.length() > 20){
            truncatedUrl = truncatedUrl.substring(0, 20)+"...";
        }

        this.truncatedUrl = truncatedUrl;
    }

    public String getSummary() {
        if(summary == null){
            return "";
        }
        else {
            return summary;
        }
    }

    public void setSummary(String summary) {
        this.summary = summary;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

        public String getTime() {
            return time;
        }

        public String getTruncatedUrl() {
            return this.truncatedUrl;
        }

        public void setTime(String time) {
            this.time = time;
        }

        public String getTagList() {
            if(tagList == null){
                return "";
            }
            else {
                return tagList;
            }
        }

        public void setTagList(String tagList) {
            this.tagList = tagList;
        }

        public String getUrl() {
            return url;
        }

        public void setUrl(String url) {
            this.url = url;
        }

        public String getNumberOfRecommendations() {
            return numberOfRecommendations;
        }

        public void setNumberOfRecommendations(String numberOfRecommendations) {
            this.numberOfRecommendations = numberOfRecommendations;
        }

        @Override
        public int compareTo(Object o) {

            DateFormat formatter;
            Date date1 = null;
            Date date2 = null;  
            SuggestionDetailBean other = (SuggestionDetailBean) o;

            if(this.date == null || other.date == null){
                return 0;
            }   
            formatter = new SimpleDateFormat(SimpleDateFormatEnum.DATE.getSdfType()+" "+SimpleDateFormatEnum.TIME.getSdfType());
            try {
                date1 = (Date) formatter.parse(this.date + " " + this.time);
                date2 = (Date) formatter.parse(other.date + " " + other.time);
            } catch (ParseException e) {
                System.out.println("Exception thrown in"+this.getClass().getName()+", compareTo method");
                e.printStackTrace();
            }
            catch(NullPointerException npe){
                System.out.println("Exception thrown "+npe.getMessage()+" date1 is "+date1+" date2 is "+date2);
            }

             return date2.compareTo(date1);

        }

        @Override
           public int hashCode() {
                return this.url.hashCode();
            }

        @Override
        public boolean equals(Object obj) {

            SuggestionDetailBean suggestionDetailBean = (SuggestionDetailBean) obj;

            if(StringUtils.isEmpty(this.getTagList())){
                return this.getUrl().equals(suggestionDetailBean.getUrl());
            }
            else {
                return (this.getTagList().equals(suggestionDetailBean.getTagList())) &&
                        (this.getUrl().equals(suggestionDetailBean.getUrl()));
            }

        }

    } 
```

Edit : Note : if I convert the hashset to a treeset using :

```
 Set<SuggestionDetailBean> sortedSet = new TreeSet<SuggestionDetailBean>(hashset); 
```

Then correct sorting is maintained, as the removal of duplicates is based on the object hashcode and equals methods not the compareto method.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T22:33:18.300

根据[Javadoc`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)：

> 请注意，如果要正确实现接口，集合维护的顺序（无论是否提供显式比较器）必须*与 equals 一致。*`Set`（有关*与 equals 一致*的精确定义，请参见`Comparable` or 。）这是因为接口是根据操作定义的，但实例使用其(or ) 方法执行所有元素比较，因此两个元素被视为相等从集合的角度来看，方法是相等的。一个集合的行为 *是*明确定义的，即使它的顺序与equals不一致；它只是不遵守总合同`Comparator`*`Set``equals``TreeSet``compareTo``compare`*`Set`界面。**

 **所以，问题出在你的`compareTo`方法上：要么给出不一致的结果，要么给出一致的结果，不遵守`a.compareTo(b) == 0`if 且仅当`a.equals(b)`.

例如，这个位：

```
 if(this.date == null || other.date == null){
                return 0;
            } 
```

意思是“如果有`this`或`other`有`date == null`，则报告`this`和`other`相等”，这当然不是你想要的。**

# android - 使用 RoboSpice 有没有办法从异常中获取 HTTP 错误代码？

> ID：14864495
> 
> 赞同：14
> 
> 时间：2013-02-13T22:31:45.327
> 
> 标签：android, http-status-code-401, robospice

我正在编写一个使用 RoboSpice 的应用程序。在请求侦听器 onRequestFailure(SpiceException arg0) 中，有没有办法确定错误是由 401 HTTP 错误引起的？

我有一个后端服务，它在令牌过期时返回 401 错误，当这种情况发生时，我需要提示用户重新输入他们的凭据。

有没有办法知道具体发生了 401 HTTP 错误？

以下是我的请求示例。

```
 public class LookupRequest extends SpringAndroidSpiceRequest <Product> {

public String searchText;
public String searchMode;

public LookupRequest() {
    super( Product.class );
}

@Override
public Product loadDataFromNetwork() throws Exception {
    String url = String.format("%s/Lookup?s=%s&m=%s", Constants.BASE_URL, searchText, searchMode);
    Ln.d("Calling URL: %s", url);
    return getRestTemplate().getForObject(url, Product.class );
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T16:21:17.417

我仔细查看了 Spring-Android，似乎 getRestTemplate().getForObject(...) 在发生 401 或任何网络错误时抛出 HttpClientErrorException 。

查看 Robo Spice 在哪里捕获该异常，我发现他们在 processRequest 函数的 RequestProcessor.java 中捕获了它。他们将 Spring-Android 异常作为继承自 Java 异常类的 SpiceException 中的 throwable 传递。

因此，您只需在 RoboSpice RequestListener 中执行以下操作即可查看它是否为 401 UNAUTHORIZED 异常。

```
 private class MyRequestListener implements RequestListener<RESULT> {

    public void onRequestFailure( SpiceException arg0 ) {

        if(arg0.getCause() instanceof HttpClientErrorException)
        {
            HttpClientErrorException exception = (HttpClientErrorException)arg0.getCause();
            if(exception.getStatusCode().equals(HttpStatus.UNAUTHORIZED))
            {
                Ln.d("401 ERROR");
            }
            else
            {
                Ln.d("Other Network exception");
            }
        }
        else if(arg0 instanceof RequestCancelledException)
        {
            Ln.d("Cancelled");
        }
        else
        {
            Ln.d("Other exception");
        }
    };

    public void onRequestSuccess( RESULT result ) {
        Ln.d("Successful request");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:05:50.183

我正在使用带有 RoboSpice 的 google http 客户端并且有同样的问题，但很容易解决`request.setThrowExceptionOnExecuteError(false);`并检查结果`HttpResponse`对象上的响应代码

编辑：按要求提供代码片段

```
HttpRequest request = getHttpRequestFactory().buildPostRequest(new GenericUrl(URL), content);
request.setThrowExceptionOnExecuteError(false);
HttpResponse response = request.execute();

switch(response.getStatusCode())
    {
        case HttpStatusCodes.STATUS_CODE_UNAUTHORIZED:
            return new MyBaseResponse(responseBody);
        default:
            throw new RuntimeException("not implemented yet");
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-11T09:46:25.397

对于那些无法解析`HttpClientErrorException`为类型并且无法在线找到任何文档的人（就是我），这是我的方法：

在我的片段中，这是我的听众：

```
private final class MyRequestListener extends RequestListener<MyResponse> {

  @Override
  public void onRequestFailure(SpiceException spiceException) {
    super.onRequestFailure(spiceException);
    if (spiceException instanceof NetworkException) {
      NetworkException exception = (NetworkException) spiceException;
      if (exception.getCause() instance RetrofitError) {
        RetrofitError error = (RetrofitError) exception.getCause();
        int httpErrorCode = error.getResponse().getStatus();
        // handle the error properly...
        return;
      }
    }
    // show generic error message
  }

} 
```

希望这可能对某人有所帮助。

我会将整个`if`子句移到一个静态函数中，以便可以重用。如果异常不匹配，则返回 0。而且我还没有验证是否可以删除任何铸件...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T03:09:42.027

使用适用于 java 的 google http 客户端，您还可以拦截错误响应，如下所示：

```
public static class InitIntercept implements 
    HttpRequestInitializer, HttpUnsuccessfulResponseHandler {

    @Override
    public boolean handleResponse(
        HttpRequest request, 
        HttpResponse response, 
        boolean retrySupported) throws IOException {

        if (response.getStatusCode() == HttpStatusCodes.STATUS_CODE_UNAUTHORIZED) {
            ...
        }

        return false;
    }

    @Override
    public void initialize(HttpRequest request) throws IOException {
        request.setUnsuccessfulResponseHandler(this);
    }
} 
```

在您的 GoogleHttpClientSpiceService 中：

```
@Override
public HttpRequestFactory createRequestFactory() {
    return AndroidHttp
        .newCompatibleTransport().createRequestFactory(new InitIntercept());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-15T10:10:42.083

它比所有其他答案更容易。

对我来说@Scrotos 的回答是有问题的，因为要捕获 401 的重点是向身份验证端点发出请求，然后再次发出主要请求。这样您就只能返回带有所需数据或一些“真实”错误的 UI。所以它不应该在回调内部完成，而应该在其内部完成`loadDataFromNetwork()`。

我是这样做的：

```
@Override
public SubscriptionsContainer loadDataFromNetwork() {

    //...

    ResponseEntity<SubscriptionsContainer> response = null;
    try {
        response = getRestTemplate().exchange(
        //your request data                    
        );
    } catch (HttpClientErrorException e) {
        HttpStatus statusCode = e.getStatusCode();
        //check the exception, if it's 401, make call to auth and repeat loadDataFromNetwork()
    } 
```

# c# - Not Displaying Date correctly in Razor page?

> ID：14864497
> 
> 赞同：1
> 
> 时间：2013-02-13T22:31:53.870
> 
> 标签：c#, asp.net-mvc-3, datetime

I have a webpage that displays a a table of data pulled back from a sql server view via entity framework and WCF Services.

On my sql server view one of the columns is a Date Field. I am having some difficulty getting it to display without the time part on my page (the time part if not there on the DB but from reading it seems as it is a DateTime property when I generate my entity view the time part will be added.

So basically on my model I have the following (obv the names are just mocked here):

**Model**

```
public List<MySqlView> MySqlView { get; set; } 
```

**Controller**

```
model.MySqlView = MyWCFService.GetMeAlltheData(
                      //pass in some values start date, end date
                  ); 
```

So on this I can see everything I want returning fine and then I pass the model to my view.

To build up my table then in the View I am doing the following:

**cshtml**

```
<tbody>
            @foreach (var item in Model.MySqlView)
            {
                <tr>
                    <td class="table-data">
                        @Html.DisplayFor(modelItem => item.Date)
                    </td>
                    //More stuff in table close loop 
```

I have tried `item.Date.ToShortDateString()` but that throws exception

> Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:03:13.733

Having a ViewModel class separate the model from the view solves virtually all interface issues. The more I work with MVC, the more I realize a better approach is MVVmC. This is a good example of why. Instead of strongly typing to the model itself, create a ViewModel that provides to the view a string property with the correctly formatted date value using `MyDateTimeItem.ToString("MMMM dd, yyyy")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:07:39.927

您可以在 Views/Shared/DisplayTemplates 中使用以下内容创建 DateTime.cshtml

```
@model DateTime

@Html.Label("", Model.ToShortDateString()) 
```

# android - Getting the right icons for Action Bar (ActionBarSherlock) and Options Menu with Android Gingerbread

> ID：14864499
> 
> 赞同：0
> 
> 时间：2013-02-13T22:32:04.063
> 
> 标签：android, actionbarsherlock, android-optionsmenu, android-icons

How do you manage Icons with ABS and Gingerbread? As you can see from the Screenshots, I have a menu item "Help", that sits in the action bar, when there's room for it. (when nothing is selected). The icon looks good so far. But when it moves into the options menu, I probably should use another icon for better visibility :)

How do you normally do that? Any ideas? This is my menu xml:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/new_button"
    android:showAsAction="always"
    android:title="new"
    android:icon="@drawable/content_new_calendar"/>

<item
    android:id="@+id/share_button"
    android:visible="false"
    android:showAsAction="ifRoom"
    android:title="share"
    android:icon="@drawable/social_share"/>

<item
    android:id="@+id/help_button"
    android:showAsAction="ifRoom"
    android:title="help"
    android:icon="@drawable/action_help"/>

</menu> 
```

I know how to create different menus for various api levels, etc. But here, the same phone is showing the icon in the action bar and in the options menu. The simplest solution is to set android:showAsAction="never", but from user reviews I learned, that the App is difficult to understand (especially the Widget-Part), so I would love to have the help menu visible. Any ideas?

P.S. I know that the App is ugly and unfinished. It's work in progress and will be polished :) ![Help Icon in the Action Bar](../Images/96df4fb8e981b4f77863a45dd9849dc5.png) ![Help Icon in the Options Menu](../Images/227a8d0397e0f736259ea1a513d047a4.png) ![Help Icon in the Options Menu (Selected)](../Images/699cdf3fcec4000a8657242ebf65a20e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:48:43.720

尝试像这样使用强制溢出选项：

```
<item name="absForceOverflow">true</item> 
```

# c# - Extending Visual Studio 2012 HTML IntelliSense

> ID：14864500
> 
> 赞同：2
> 
> 时间：2013-02-13T22:32:05.607
> 
> 标签：c#, html, visual-studio-2012, intellisense

I've got an interest in extending the HTML editor in Visual Studio 2012 to support some additional elements and attributes, beyond those supplied as part of the HTML5 specification.

For example:

```
<html>
    <body>
        <h1>Header Text</h1>
        <mycustomelement>some info</mycustomelement>
    </body>
</html> 
```

I saw Mads Kristensen's excellent post, *[Custom schemas in VS2012 CSS editor](http://madskristensen.net/post/custom-schemas-in-vs2012-css-editor)*, that shows how to do something similar for CSS in a very simple manner by implementing `ICssSchemaFileProvider`.

From my research, there doesn't seem to be a simple way of doing this for HTML. Implementing an editor classifier seems to be the way to handle custom [IntelliSense](http://en.wikipedia.org/wiki/IntelliSense), and it's fairly daunting vs the CSS provider that Mads implements.

I really just want to throw an XML schema into the classifier and have it complete HTML5 and my custom additions.

Is there a simple implementation of an editor classifier or some alternative approach?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:20:06.910

根据[Mads 关于实现 Angular IntelliSense 的帖子](http://madskristensen.net/post/improved-javascript-intellisense-in-visual-studio)，HTML 编辑器的扩展方式不同。相反，您将扩展`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\schemas\html\commonHTML5Types.xsd`.

我认为你也可以创建一个新的`exampleNameTypes.xsd`并引用它，`commonHTML5Types.xsd`就像`<xsd:import schemaLocation="exampleNameTypes.xsd"/>`他们对 SVG 所做的那样。

# mysql - Problems with insertion of numbers in mysql with europe style

> ID：14864509
> 
> 赞同：-1
> 
> 时间：2013-02-13T22:33:01.390
> 
> 标签：mysql, insert

I'm trying to insert some information I'm taking from a different website using method crawl.

The number are shown as : 1.658.056 or 12.423.589 with two dots, so i need to add this field and i cant with that double dots.

This is the table where i save the information:

```
Create table IF NOT EXISTS LJugador(
Fecha date,
vm float(10,6),
nom_jugador varchar(80),
FOREIGN KEY (nom_jugador) REFERENCES Jugadores(nombre),
PRIMARY KEY(Fecha, nom_jugador) 
```

I save the information inside of my field vm - float(10,6).

For example if I put 1.230.000 in database is saved as: 1.230000, but when I try to add this amount with another for example 160.000 its give me a result of 161.620000 so I don't know how to make it, and is back me crazy, seriously.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:46:16.467

将`FLOAT(10,6)`产生类似的结果：`IIII.FFFFFF`- 其中`I`和`F`都是整数。

显然，解决方案是在插入记录之前删除本地化的点 - 这很简单。

# objective-c - CoreData 和 setPropertiesToFetch 只返回 1 个实体

> ID：14864510
> 
> 赞同：0
> 
> 时间：2013-02-13T22:33:03.590
> 
> 标签：objective-c, xcode, database-design, core-data, nsfetchrequest

我有一个使用 CoreData 来存储`Customer`实体的应用程序。每个`Customer`实体都有`customerName`、`customerID`和其他属性。

然后，我显示所有`Customers`仅显示其`customerName`和的列表`customerID`。

我可以通过执行获取请求来抓取所有`Customer`实体来做到这一点，但是我只需要显示`customerName`and`customerID`属性。

**问题 1：** 我尝试使用`setPropertiesToFetch`仅指定这些属性，但每次它只返回数组中的 1 个对象。

这是我的方法的样子：

```
 NSFetchRequest *fetchRequest = [NSFetchRequest new];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Customer" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSDictionary *entProperties = [entity propertiesByName];

    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setReturnsDistinctResults:YES];

    [fetchRequest setPropertiesToFetch:[NSArray arrayWithObjects:[entProperties objectForKey:@"customerName"],[entProperties objectForKey:@"customerID"], nil]];

    [fetchRequest setFetchLimit:30];

    NSError *error;
    NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

    NSLog(@"fetched objects count = %d", [fetchedObjects count]);

    if (error) {
        NSLog(@"Error performing fetch = %@", [error localizedDescription]);
        return nil;
    } else {
        NSLog(@"successful fetch of customers");
        for( NSDictionary* obj in fetchedObjects ) {
            NSLog(@"Customer: %@", [obj objectForKey:@"customerName"]);
        }
        return fetchedObjects;
    } 
```

返回的一个对象是可以的，所以我知道它正在抓取至少一个`Customer`对象`customerName`和`customerID`. 我只需要它来返回所有`Customer`对象`customerName`和`customerID`.

**问题2：**

这是最好的方法吗？我的想法是数据库中可能有多达 10k+ 个 Customer 对象。因此，仅获取所需的属性以显示在表中而不是整个`Customer`对象中会节省内存。

然后，当在表中选择客户时，我会获取整个`Customer`对象以显示其详细信息。

但是，我读到如果可以在不久的将来使用相应的实体，加载整个实体而不是仅仅加载它的属性也是一个好习惯。我想这个想法是单个获取请求比两个更好。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-18T13:43:59.250

对于问题 1：这是我用 swift 编写的示例代码。我不断测试CoreData API，找到了这种调用方式。希望能帮到你。

```
let fetchRequest = NSFetchRequest<NSDictionary>(entityName: "Customer")
fetchRequest.resultType = .dictionaryResultType
fetchRequest.propertiesToFetch = [
    #keyPath(Customer.customerID),
    #keyPath(Customer.customerName)
]

let customers: [NSDictionary]
do {
    customers = try managedObjectContext.fetch(fetchRequest)
    customers.forEach {
        print("CustomerID: \($0["customerID"]), CustomerName: \($0["customerName"])")
    }
} catch {
    print(error.localizedDescription)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:58:41.040

random,

Question 2: It sounds like you are using fetch limits when you should be using batch limits. Batch limits are a basic cursoring mechanism. They are designed to handle memory efficiently.

W.r.t. Question 1, I'm a big believer in just writing the app in the natural way and then using Instruments and other tools to decide upon performance and memory optimizations. Try getting the app to run correctly first. Then make it fast.

Andrew

# emacs - 配置Emacs Flymake直接调用g++

> ID：14864511
> 
> 赞同：4
> 
> 时间：2013-02-13T22:33:03.897
> 
> 标签：emacs, flymake

在写简单的，一个文件，C++代码的时候，我一般直接调用g++。默认情况下，Flymake 似乎假设存在带有检查语法目标的 Makefile。如何将 Flymake 配置为直接调用 g++，例如：

```
g++ -c a.cpp 
```

如果可以修改答案以包含编译器标志，那就更好了

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T01:15:27.843

您可以使用以下 flymake 配置直接调用 g++。

```
(require 'flymake)

(defun flymake-cc-init ()
  (let* ((temp-file   (flymake-init-create-temp-buffer-copy
                       'flymake-create-temp-inplace))
         (local-file  (file-relative-name
                       temp-file
                       (file-name-directory buffer-file-name))))
    (list "g++" (list "-Wall" "-Wextra" "-fsyntax-only" local-file))))

(push '("\\.cpp$" flymake-cc-init) flymake-allowed-file-name-masks)
(add-hook 'c++-mode-hook 'flymake-mode) 
```

我打电话时收到以下屏幕截图`flymake-allowed-file-name-masks`

![flymake-c++](../Images/eb1dbd44770d83d10a7d22cf1fa05baf.png)

以下为评论版。

```
;; Import flymake
(require 'flymake)

;; Define function
(defun flymake-cc-init ()
  (let* (;; Create temp file which is copy of current file
         (temp-file   (flymake-init-create-temp-buffer-copy
                       'flymake-create-temp-inplace))
         ;; Get relative path of temp file from current directory
         (local-file  (file-relative-name
                       temp-file
                       (file-name-directory buffer-file-name))))

    ;; Construct compile command which is defined list.
    ;; First element is program name, "g++" in this case.
    ;; Second element is list of options.
    ;; So this means "g++ -Wall -Wextra -fsyntax-only tempfile-path"
    (list "g++" (list "-Wall" "-Wextra" "-fsyntax-only" local-file))))

;; Enable above flymake setting for C++ files(suffix is '.cpp')
(push '("\\.cpp$" flymake-cc-init) flymake-allowed-file-name-masks)

;; Enable flymake-mode for C++ files.
(add-hook 'c++-mode-hook 'flymake-mode) 
```

# java - 导出应用程序

> ID：14864512
> 
> 赞同：0
> 
> 时间：2013-02-13T22:33:08.157
> 
> 标签：java, android, export

我正在尝试使用 Eclipse 将我的应用程序导出为 .apk 文件，但在此过程中我无法选择格式，所以最后我只得到了某种不是 apk 的文件。我能做什么？

# java - 网址重写正则表达式 - 不匹配

> ID：14864513
> 
> 赞同：0
> 
> 时间：2013-02-13T22:33:08.033
> 
> 标签：java, regex, url-rewriting, tuckey-urlrewrite-filter

我有这个用于 url 重写的正则表达式：

```
<from>^/page/([0-9]+)/order/(.*)/by/(.*)/composition/(.*)/location/(.*)/price_min/(.*)/price_max/(.*)/industry/(.*)/type/(.*)$</from>
<to>/page=$1&order=$2&by=$3&composition=$4&location_id=$5&price_min=$6&price_max=$7&industry_id=$8&type_id=$9</to> 
```

我想匹配一个像下面这样的 URL，但是没有匹配。

> /page/2/order/id/by/desc/composition/1/location/none/price_min/2/price_max/2/industry/2/type/3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:13:17.630

考虑使用以下一种：

```
^/page/([0-9]+)/order/(.+?)/by/(.+?)/composition/(.+?)/location/(.+?)/price_min/(.+?)/price_max/(.+?)/industry/(.+?)/type/(.+?)$ 
```

你的正则表达式有两件事：

1.  您应该使用`.+`而不是，因为和`.*`之间总会有数据。 `/``/`
2.  您应该添加`?`，这意味着它将是非贪婪的。它与写作等价`([^/]+)`，这意味着**匹配除`/`多次之外的任何字符多次**。

# javascript - HTML+Javascript+CSS 渲染是一个很好的移动应用框架吗？

> ID：14864517
> 
> 赞同：-3
> 
> 时间：2013-02-13T22:33:11.623
> 
> 标签：javascript, android, ios, mobile

我的印象是，许多移动应用程序使用封装在原生移动应用程序中的 HTML+Javascript+CSS 渲染引擎，以便： - 实现大部分 UI - 在所有平台（iOS、Android、Win8、 web, ...) - 维护一组跨多个平台的可移植代码（例如，使用 Javascript 接收和解析 JSON 格式的内容，并与 DOM 交互以进行渲染。）

我实际上有几个问题： - 这是一种广泛可行的移动应用程序开发模型吗？比如说，您能否在其中实现 Pinterest（具有类似的外观和感觉以及响应能力）？- 以这种方式工作的应用程序的成功示例有哪些？（如果流行的应用程序不使用它，为什么不呢？）

注意：我看过这个：[编写手机广播电台应用程序 - Javascript/HTML/CSS 可行，还是我们需要原生？](https://stackoverflow.com/questions/3942640/writing-a-mobile-phone-radio-station-app-is-javascript-html-css-viable-or-do)，但那是 2010 年。2013 年的情况如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:56:59.200

对此有不同的反应，也有很多与此相关的答案，但我会就我所看到的问题说几句话。

几个有用的链接 [http://mashable.com/2012/09/12/web-vs-native-apps/](http://mashable.com/2012/09/12/web-vs-native-apps/) [http://www.wired.com/insights/2012/11/native-apps-vs-mobile-web /](http://www.wired.com/insights/2012/11/native-apps-vs-mobile-web/)

少数框架：jQuery Mobile、Sencha Touch、Telerik Kendo

还要查看 Phonegap/Cordova。

乍一看，制作一个可以轻松部署到 IOS、Android、Windows 等的应用程序对它有很好的吸引力。但是，到目前为止，我遇到的最大问题是应用内购买、推送通知和外观问题。

IAP 和推送通知或多或少必须为每个设备编码。有帮助程序库和教程可以帮助您完成该过程，但您仍然需要维护单独的代码。当然，您可以在幕后编写所有这些内容并使用 phonegap 访问插件。

外观和感觉 - 在为 IOS、Android、Windows 开发时，它们都要求/建议您的应用看起来是设备原生的。这意味着您现在必须为每个设备管理单独的 css。使用 sass 之类的东西并不难做到这一点，并且一些框架已经部分自动化了。

Web vs Native 的成功很难看到。Facebook 最初是一个 Web 应用程序，但后来放弃了它，转而使用原生应用程序。但同样，如果您查看 Firefox 采用的路线[https://www.mozilla.org/en-US/firefoxos/](https://www.mozilla.org/en-US/firefoxos/)，他们的 UI 将基于 html，这非常棒。本机的最大好处是您将制作一个适用于该设备的应用程序。与本机相比，Web 应用程序的执行速度往往要慢一些，但这可能取决于框架以及您的编码方式。

可能要考虑的另一件事是 MonoTouch [http://xamarin.com/monotouch](http://xamarin.com/monotouch)，它提供了一种用一种语言编写所有后端代码的好方法。它还将它编译成设备的本机代码，因此您可以从两个世界中受益。

至于原生是网络，最终将取决于您的业务需求、您的经验和更多的研究。我无法涵盖所有​​内容，我只提供了我在此过程中遇到的问题以及我的想法。

# ios - 使用 Phonegap 上传多个图像

> ID：14864521
> 
> 赞同：0
> 
> 时间：2013-02-13T22:33:28.880
> 
> 标签：ios, image, cordova, iphone-web-app

我正在寻找一些关于通过 Phonegap 将多个图像上传到服务器的最佳实践的建议。目前我有一个应用程序可以打开相机，拍照，然后通过 POST 将其作为 base64 数据与其他表单数据一起上传。我想允许上传 3 张带有表单数据的图像。有什么建议么？

# eclipse - 卸载 EGit 插件后 Eclipse 无法启动

> ID：14864524
> 
> 赞同：0
> 
> 时间：2013-02-13T22:33:35.063
> 
> 标签：eclipse, git, egit

我刚刚卸载了我之前拥有的所有 EGit 插件。卸载顺利进行，最后要求我重新启动 Eclipse，但 Eclipse 不会开始给我以下错误消息：

![在此处输入图像描述](../Images/eae7db1b51cc8e73680260ff72381c56.png)

当我尝试从“开始”菜单上的快捷方式启动 Eclipse（使用 Win 7）时，我明白了。但是当我转到 Eclipse 安装目录本身并在那里点击 eclipse.exe 时，我收到以下错误消息：

![在此处输入图像描述](../Images/322876605e9cf36a94816dbbf01d1884.png)

我确实去看看上面的目录中是否有jvm.dll，确实在那里。

知道如何解决吗？

**更新 1：** 我重新安装了 Eclipse**和**JRE，但问题仍然存在。

**更新2：** 这是我的内容`eclipse.ini`

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx512m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:08:03.307

JRE 和 Eclipse 都应该是相同的位版本（32 或 64）。您的屏幕截图表明您正在运行 32 位版本的 JRE，但我不知道这是在您重新安装之前还是之后。`java -version`应该对 JRE 有所帮助。您的 eclipse.ini 文件将告诉您正在运行的 Eclipse 位版本。例如：

plugins/org.eclipse.enter code hereequinox.launcher.win32.win32。**x86** _1.0。

您应该确认这一点并尝试手动将 Eclipse 指向您的 JRE 二进制文件。这是一个[Windows 示例](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)

```
-vm c:\java\jdk\1.6\bin\javaw.exe 
```

如果可行，您只需要使用正确的路径更新您的 eclipse.ini。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:01:11.597

结果发现我拥有的 Java（以及由于公司网络限制我可以访问的唯一版本）是 1.6 32 位，即使我的笔记本电脑是 64 位的（为什么这样工作？）。当我尝试重新安装 Eclipse 时，我使用的是 64 位版本。当我安装 32 位版本时它工作。顺便说一句，Eclipse 版本是

`Eclipse IDE for Java EE Developers 1.4.1.20110909-1818 epp.package.jee null`

# android - Android意图额外消息与静态变量

> ID：14864526
> 
> 赞同：7
> 
> 时间：2013-02-13T22:33:41.860
> 
> 标签：android, android-intent, android-activity

使用带有消息的意图而不是仅仅在 java 中声明一个静态变量并从新活动中调用它的目的是什么？这种方式对我来说似乎更容易，因为你可以让静态变量成为你想要的任何东西（即 ArrayList、Object 等）。

```
public class FirstActivity extends Activity {
    public static String name;
... 
    Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
    name = "Robert";
    startActivity(intent);
}

public class SecondActivity extends Activity {
...
    textView.setText(FirstActivity.name);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T22:49:17.763

通过使用 extras 来启动`SecondActivity`，您可以使其更可重用。许多库存活动都以这种方式工作，这就是为什么您可以重用例如相机活动来拍摄和保存照片，因为它不会假设谁在调用它。

在您的情况下`SecondActivity`，取决于是否`FirstActivity`已加载到 JVM 中。我不会指望这一点，当然也不推荐在活动之间建立这种依赖关系。不要这样做。按照 SDK 的建议，使用 extras 在活动之间传递值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:01:12.517

澄清一下，如果他/她之外的另一个应用程序想要处理 Intent，则 OP 的策略将不起作用。因此，这不是“最佳实践”。

Intent 大约有 30 种不同的 putExtra 变体，每个变体代表您可以添加的不同数据类型。它们包括通用数据类型，例如 Bundle、Parcelable、Serializable 等。我想不出这些没有涵盖的任何事情。

我不使用通过覆盖 Application 或其他类似方式定义的静态变量或变量来假设某些数据在存储中浮动。假设我的 Activity 或 Fragment 是完全独立的，则更加可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-29T19:08:24.377

使用 Intent 让你比静态慢例如如果你使用 mvp 或 mvvm 至少你必须稍后通过层传递像 id

# java - Java 使用 Httpurlconnection 进行单点登录

> ID：14864532
> 
> 赞同：3
> 
> 时间：2013-02-13T22:34:05.180
> 
> 标签：java, single-sign-on, httpurlconnection

我正在构建一个旨在处理远程应用程序单点登录的应用程序。不幸的是，其他系统无法使用任何 SSO 库，所以我需要进行登录后。我想知道是否可以使用 Httpurlconnection 之类的东西来为我处理这个任务？我的印象是这会将服务器登录到远程应用程序中，但不会将客户端用户登录到系统中。有人对此有更多见解吗？

目前我正在做这样的事情，但在 html 中暴露密码是一个安全风险。

```
<form name="LoginForm" action="http://support.mydomainname.co/index.php?/Base/User/Login" method="post" target="_blank">
    <input type="hidden" name="scemail" value="${programCompany.username}"/>
    <input type="hidden" name="scpassword" value="${programCompany.password}"/>
    <input type="submit" value="Launch" class="btn btn-primary"/>
</form> 
```

如果我的想法是正确的，我们服务器正在获取登录会话而不是浏览器？如果这是真的，有没有办法将会话传递给浏览器？

# hive - 我可以递归地进行配置单元外部表分区搜索吗

> ID：14864540
> 
> 赞同：2
> 
> 时间：2013-02-13T22:34:18.597
> 
> 标签：hive

所以我每天都有一张带有外部分区的表。我正在创建分区如下：

```
ALTER TABLE <table> ADD PARTITION(year = 2012, month = 5, day = 6) LOCATION 'hdfs://<namenode>/<path>/protos/2012/05/06'; 
```

只有序列文件实际上位于该位置下的多个目录中。我可以在该路径中使用一些通配符或在某处切换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:24:21.557

据我所知，这需要[HIVE-1083](https://issues.apache.org/jira/browse/HIVE-1083)或[HIVE-951](https://issues.apache.org/jira/browse/HIVE-951)，这两个目前都没有解决。

但是，请告诉您是否找到解决此问题的任何方法！

如果/一旦这些问题之一得到解决或我找到另一种解决方法，我将尝试更新此答案...

# jquery - jquery ID 选择取决于用户点击 URL

> ID：14864548
> 
> 赞同：2
> 
> 时间：2013-02-13T22:34:53.277
> 
> 标签：jquery, onclick, capture

这是我的代码：

```
$(document).ready(function() {

            $("#myLink1").click(function(){
            Foo Bar...

        });
    });

<a href = "#" id="myLink1"> click my Link <a>

<a href = "#" id="myLink2"> click my Link2 <a>

<a href = "#" id="myLink3"> click my Link3 <a> 
```

对于第一个很好，而不是重复代码，我如何捕获用户点击的内容，例如如果用户点击 2 或 3 #mylink1 必须是一些如何替换是否有任何通用方法？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:38:24.827

使用身份证

```
$(document).ready(function() {
   $(".your-class").click(function(){
     alert(this.id);
  });
});

<a href = "#" class="your-class" id="myLink1"> click my Link </a>
<a href = "#" class="your-class" id="myLink2"> click my Link2 </a>
<a href = "#" class="your-class" id="myLink3"> click my Link3 </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:40:48.967

在不向链接添加类的情况下，您可以使用 id 选择器来执行此操作。

```
$(document).ready(function() {
    $('[id*="myLink"]').click(function() {
        //Function Code
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:36:58.460

改用一个类：

```
$(document).ready(function() {
   $(".your-class").click(function(){
     // stuff here
   });
});

<a href="#" class="your-class" id="myLink1">Link</a>
<a href="#" class="your-class" id="myLink2">Link2</a>
<a href="#" class="your-class" id="myLink3">Link3</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:37:50.263

尝试这个

```
$("a").on('click', function(){
            Foo Bar...

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:37:58.680

您应该为所有 a 标签提供相同的类，然后将您的 jquery 选择器更改为

```
$('.yourClass').click(function(){
    $(this).whatYouWantToDo()
}); 
```

所以 $(this) 将只引用被点击的那个。

# windows - 是否可以将代理安全毯从一个对象复制到另一个对象？

> ID：14864551
> 
> 赞同：4
> 
> 时间：2013-02-13T22:35:21.387
> 
> 标签：windows, com, dcom

我正在尝试为进程外 COM 服务器（在另一台机器上）编写 C++ 包装器。我希望对班级用户隐藏所有与 COM 相关的肮脏内容。

安全要求迫使我在服务器代理上调用 CoSetSecurityBlanket。那是：

```
CoCreateInstance(CLSID_OutOfProcServer, &proxy);
CoSetProxyBlanket(proxy); 
```

（我遗漏了很多参数）。此外，我必须在此调用中指定凭据，因为*服务器需要本地帐户*。

现在问题来了。这个服务器有很多返回接口的方法，每个接口都是我这边的一个全新的代理。`CoSetProxyBlanket()`因此，我每次得到一个都必须打电话。这是我想要完成的事情：

1.  让我的包装器隐藏 CoSetProxyBlanket 调用（很简单）
2.  避免将凭据存储在内存中（非常困难！）

到目前为止，我已经尝试使用`CoQueryProxyBlanket`and将毯子从一个对象复制到另一个对象`CoSetProxyBlanket`。这不起作用，因为我无法恢复凭据（除非我将它们存储在内存中——我想避免这种情况）。

真正令人沮丧的是，我与服务器建立了经过身份验证的连接。看来我应该能够将其安全上下文复制到新代理中。（或者至少告诉 COM 在创建新代理时为我执行此操作。）有什么方法可以做到这一点，还是我卡在存储凭据上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T22:26:46.747

尝试这个：

1.  通过调用 LogonUser() 获取模拟令牌并存储此令牌而不是凭据
2.  ImpersonateLoggedOnUser() 与令牌
3.  设置代理毯，将 authinfo 设置为 NULL
4.  RevertToSelf()

我没试过，只是建议一个想法......

# json - 使用d3，根据节点点击重绘图形

> ID：14864553
> 
> 赞同：2
> 
> 时间：2013-02-13T22:35:27.487
> 
> 标签：json, d3.js, neo4j, cypher, graph-visualization

我正在使用一个 d3 力导向图来产生一个毛球数据。:-)
我认为要么是这个：[http](http://bl.ocks.org/1138500) ://bl.ocks.org/1138500 要么是这个：http : [//bl.ocks.org/4062045](http://bl.ocks.org/4062045) （我继承了这个，所以不太确定，但这两个可视化确实是相似的！）

当我单击一个节点时，我想放大或仅基于该节点重新绘制图形。所以点击一个节点，其他节点和边就会消失。我怎样才能做到这一点？我正在使用 Ruby on Rails 和 Neo4j，因此密码查询正在创建 d3 使用的 JSON 数据。

我是否必须通过密码重新查询数据库？我希望不是。我希望这可以单独在 d3.js 中完成。

提前感谢您的想法。如果你有一个可行的例子，我很乐意看到它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:44:48.363

可能您需要在 D3 邮件列表中询问。

# android - 从 MainAcivity.java 更新不同布局 xml 中的文本视图？

> ID：14864554
> 
> 赞同：0
> 
> 时间：2013-02-13T22:35:33.193
> 
> 标签：android, android-layout, android-emulator, android-widget, textview

我在名为 game.xml 的布局文件夹中创建了一个新的 .xml 文件。它包含一个 TextView。

是否可以在我的主要活动中位于 game.xml 中的 textview 上设置文本？

game.xml（文本视图部分）

```
<TextView
    android:id="@+id/tV1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView1"
    android:layout_centerVertical="true"
    android:text="TextView" /> 
```

MainActivity.java

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setImageArray();
    String actualword = chooseWord(words);
    createLetterArray(actualword);
    TextView textView1 = (TextView) findViewById(R.id.tV1); //get a reference to the textview on the game.xml file.
    textView1.setText(actualword);

}
    ... 
```

我试过这样。但它不起作用。谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:43:54.443

您不能`TextView`在此处设置不是通过充气机或`setContentView()`. 您可以将值通过 an 传递`Intent`给实际使用`TextView`

```
Intent intent = new Intent(MainActivity.this, NextActivity.class); 
intent.putExtra("key", actualword);
startActivity(intent); 
```

`NextActivity`将显示文本视图的活动在哪里

然后您可以获得该值并将其设置在您的其他活动中

```
Intent recIntent = getIntent();
String text = recIntent.getStringExtra("key");
TextView textView1 = (TextView) findViewById(R.id.tV1); //get a reference to the textview on the game.xml file.
textView1.setText(text); 
```

`setContentView(R.layout.game);`在您使用`onCreate()`第二个活动之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:44:17.510

简短的回答，不

布局文件只是一个蓝图。在布局膨胀（变成视图）之前，实际的 textview 不存在。

我的问题，（如何）你没有使用这个game.xml吗？是在另一个活动中吗？

# c# - 字典中的双值

> ID：14864559
> 
> 赞同：2
> 
> 时间：2013-02-13T22:35:56.973
> 
> 标签：c#, data-dictionary

我有这段代码可以从 json 获得两个双倍：

```
Dictionary<string, object> dict = this.GetDicFromInput();
Decimal tmpLat = (Decimal)dict["lat"];
Decimal tmpLon = (Decimal)dict["lon"]; 
```

这是`GetDicFromInput`：

```
private Dictionary<string, object> GetDicFromInput()
{
    string input = null;

    input = "{\"lon\":34.806109,\"lat\":31.9599733}";

    var json = new JavaScriptSerializer() { MaxJsonLength = int.MaxValue };
    Dictionary<string, object> dict = (Dictionary<string, object>)json.DeserializeObject(input);

    return dict;
} 
```

当我运行它时，我得到：

```
 [NullReferenceException: Object reference not set to an instance of an object.]
   BabySitter.Search.Page_Load(Object sender, EventArgs e) in \\psf\home\Documents\Visual Studio 2010\Projects\BabySitter\BabySitter\Search.aspx.cs:28
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

这是失败线：

```
Decimal tmpLat = (Decimal)dict["lat"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:12:50.523

使用泛型函数返回您正在创建的确切对象类型。

```
public T Deserialize<T>(string input) 
```

在这种情况下，

```
Dictionary<string, object> dict = json.DeserializeObject<Dictionary<string, object>(input); 
```

# asp.net-web-api - 找不到方法：'Int32 Microsoft.Data.OData.Query.SemanticAst.QueryNode.get_Kind()'

> ID：14864562
> 
> 赞同：0
> 
> 时间：2013-02-13T22:36:08.507
> 
> 标签：asp.net-web-api, odata

我正在使用需要支持 oData 的 MVC 4 创建一个 WebApi 应用程序。

我按照建议安装了包 Microsoft.AspNet.WebApi.OData (Install-Package Microsoft.AspNet.WebApi.OData -Pre)，但是在过滤时 [例如：/api/cars?$filter=startswith(Name,'F') ] 我得到了例外：

```
{"Message":"An error has occurred.","ExceptionMessage":"Method not found: 'Int32 Microsoft.Data.OData.Query.SemanticAst.QueryNode.get_Kind()'.","ExceptionType":"System.MissingMethodException","StackTrace":"   at System.Web.Http.OData.Query.Validators.FilterQueryValidator.ValidateSingleValueNode(SingleValueNode node, ODataValidationSettings settings)\r\n   at System.Web.Http.OData.Query.Validators.FilterQueryValidator.ValidateQueryNode(QueryNode node, ODataValidationSettings settings)\r\n   at System.Web.Http.OData.Query.Validators.FilterQueryValidator.Validate(FilterQueryOption filterQueryOption, ODataValidationSettings settings)\r\n   at System.Web.Http.OData.Query.FilterQueryOption.Validate(ODataValidationSettings validationSettings)\r\n   at System.Web.Http.OData.Query.Validators.ODataQueryValidator.Validate(ODataQueryOptions options, ODataValidationSettings validationSettings)\r\n   at System.Web.Http.OData.Query.ODataQueryOptions.Validate(ODataValidationSettings validationSettings)\r\n   at System.Web.Http.QueryableAttribute.ValidateQuery(HttpRequestMessage request, ODataQueryOptions queryOptions)\r\n   at System.Web.Http.QueryableAttribute.ExecuteQuery(IEnumerable query, HttpRequestMessage request, HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)\r\n   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)"} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:51:54.417

与导致此问题的底层 OData 库版本存在二进制不兼容。我强烈建议使用我们的夜间构建。只需在包管理器控制台中使用此命令即可：

```
Install-Package Microsoft.AspNet.WebApi.OData -Source http://www.myget.org/F/aspnetwebstacknightly/ -Pre 
```

这还将为您提供更接近最终版本的 Web API OData 支持版本。

# asp.net - 数据未使用 ASP.net 和 VB 作为代码隐藏文件添加到 SQL Server 2008

> ID：14864566
> 
> 赞同：0
> 
> 时间：2013-02-13T22:36:26.713
> 
> 标签：asp.net, sql-server, vb.net, vb.net-2010

我查看了 StackOverflow 以及其他一些网站，我发现了一些代码可以将它们组合在一起：

```
Imports System.Data
Imports System.Data.SqlClient
Partial Class _Default
Inherits System.Web.UI.Page

  Dim sqlConnection As SqlConnection
  Dim sqlCommand As SqlCommand
  Dim sqlString, iName, iDescription As String
  Dim iQuantity As Integer
  Dim iPrice As Decimal

  Protected Sub cmdAddStock_Click(ByVal sender As Object, ByVal e As System.EventArgs)
  Handles cmdAddStock.Click

    iName = txtItemName.Text
    iDescription = txtDescription.Text
    iQuantity = txtQuantity.Text
    iPrice = txtPrice.Text

    Using myConnection As New SqlConnection("Server=localhost;Database=BBBLeeds;
    Trusted_Connection=True")
        myConnection.Open()

        sqlCommand = New SqlCommand("INSERT INTO tblItem(ItemName, Description, 
        Price, Stock) values('" + iName + "','" + iDescription + "','" + iPrice + 
        "','" + iQuantity + "')")

        sqlCommand.ExecuteNonQuery()
        myConnection.Close()
        Response.Redirect(Request.RawUrl, True)
    End Using
End Sub
End Class 
```

返回的错误如下：

“从字符串“INSERT INTO tblItem(ItemName, De”到类型“Double”的转换无效。”

这是使用 SQL 的数据结构：

[http://i23.photobucket.com/albums/b368/Damo115/Untitled.png](http://i23.photobucket.com/albums/b368/Damo115/Untitled.png)

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:04:13.077

更改您的代码来执行此操作，这将避免任何 sql 注入，并且您不必处理连接和在值周围添加引号。

在您的表中`price`是`money`数据类型，`Stock`但`int`您通过在它们周围添加单引号将值作为字符串发送。

```
sqlCommand = New SqlCommand("INSERT INTO tblItem(ItemName, Description, 
        Price, Stock) values(@item,@descr,@price,@stock)")

sqlCommand.Parameters.AddWithValue("@item",iName)
sqlCommand.Parameters.AddWithValue("@descr",iDescription)
sqlCommand.Parameters.AddWithValue("@price",iPrice)
sqlCommand.Parameters.AddWithValue("@stock",iQuantity)

sqlCommand.ExecuteNonQuery() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:45:12.997

您将字符串参数 (txtPrice.Text) 作为数字传入（db 列 Price 是一个数字）。您需要先将字符串转换为数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T22:51:26.590

您应该使用`&`运算符而不是`+`运算符来连接字符串

```
sqlCommand = New SqlCommand("INSERT INTO tblItem(ItemName, Description, 
        Price, Stock) values('" & iName & "','" & iDescription & "','" + iPrice & 
        "','" & iQuantity & "')") 
```

# android - 有没有办法以编程方式在软键盘上启动语音输入？

> ID：14864567
> 
> 赞同：3
> 
> 时间：2013-02-13T22:36:27.960
> 
> 标签：android, android-widget, android-keypad

这个想法是在按下按钮时获取用户语音输入并将其传递给应用程序内的搜索。由于设备限制，我们使用[SearchViewCompat](http://developer.android.com/reference/android/support/v4/widget/SearchViewCompat.html)而不是有用的 SearchView。我已经能够使用[此链接](http://viralpatel.net/blogs/android-speech-to-text-api/)获取语音输出，但没有一种简单的方法可以通过这种方式将文本传递到搜索栏。
搜索视图本身显示为一个视图（因此没有 setText()），但如果我可以在搜索栏出现时说“使用键盘上的麦克风键”或其他内容，我认为它可能会起作用。任何帮助将不胜感激。
谢谢，SGB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:47:52.970

不，这是不可能的。至少，在不使用或手动单击软键盘上的语音输入按钮的情况下，没有**简单的**方法来启动语音输入。[`RecognitionListener`](http://developer.android.com/reference/android/speech/RecognitionListener.html)

据我所知，[这篇文章](http://android-developers.blogspot.com/2011/12/add-voice-typing-to-your-ime.html)解释了如何将语音集成到实际使用这个库的 IME 中：[google-voice-typing-integration](https://code.google.com/p/google-voice-typing-integration/)。它可能会启发你一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:17:45.023

很抱歉回答了我自己的问题，但它是：我从问题中的链接中删除了整个“从语音输入中获取字符串数组”，然后，而不是仅仅使用 开始搜索`onSearchRequested()`，我这样做了：

```
startSearch(grabString, false, null, false);

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(aViaBuildConfig.MIC_KEY) {
        DebugLog.e(TAG , "onDown event : " + event);
        DebugLog.e(TAG , "onDown keyCode: " + keyCode);
        if(keyCode == Constants.MIC_KEY) {
            onSearchRequested();
            Intent voiceIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            voiceIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
            try {
                startActivityForResult(voiceIntent, Constants.RESULT_SPEECH);
            } catch (ActivityNotFoundException ex) {
                DebugLog.e(TAG, "Not found excpetion onKeyDown: " + ex);
            }
        }
        return super.onKeyDown(keyCode, event);
    }
    return false; 
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
        case Constants.RESULT_SPEECH:
            super.onActivityResult(requestCode, resultCode, data);
            if (resultCode == RESULT_OK && null != data) {
                 ArrayList<String> spokenSearch = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                 DebugLog.e("Glenn: " , "Speech = " + spokenSearch);
                 String grabString = spokenSearch.get(0);
                 startSearch(grabString, false, null, false);
            }
            break;
    }
} 
```

# ffmpeg - FFmpeg 错误：处理输入时发现无效数据

> ID：14864571
> 
> 赞同：5
> 
> 时间：2013-02-13T22:36:39.007
> 
> 标签：ffmpeg

我在尝试编码为 flv 时遇到 FFMPEG 问题

这是我的命令

```
ffmpeg -i 182.1.mov -b 250k -deinterlace -vcodec flv1 -acodec mp3 182.1.flv 
```

是的，应该正确安装 FLV，当我运行 ffmpeg -codecs 时，它确实将 flv1 列为具有功能的选项`DEV.L.`

这是我收到的错误

```
Could not write header for output file #0 (incorrect codec parameters ?): Invalid data found when processing input 
```

# ruby-on-rails - rails 设计用户外部 api

> ID：14864575
> 
> 赞同：0
> 
> 时间：2013-02-13T22:36:48.640
> 
> 标签：ruby-on-rails, devise

我正在尝试在新用户注册时设置时事通讯注册程序。我通过 gibbon 使用 Mailchimp 来处理时事通讯。我在我的模型中添加了一个 subscribe 属性以及一个 getter 和 setter 方法。我还在表单中添加了订阅复选框。我需要做的是，如果选中表单框，则在创建时为用户订阅电子邮件。

模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :subscribe

  validates :username, presence: true
  validates_uniqueness_of :username

  has_many :contest_entries, dependent: :destroy
  has_many :votes, dependent: :destroy

  def subscribe=(join)
    puts "called subscribe with #{join}"
    if join
      Gibbon.new.list_subscribe(:id => "blah", :email_address => self.email)
    end
  end

  def subscribe
    subscribe ||= false
  end

end 
```

表单视图

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <p><%= f.label :username %><br />
  <%= f.text_field :username %></p>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.label :subscribe, "Subscribe to Newsletter?" %><br />
  <%= f.check_box :subscribe, :checked => true %></div>

  <div><%= f.submit "Sign up" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

我希望通过添加 attr_accessible 和一个方法，它会自动从控制器调用 api，但它似乎没有被调用。

关于如何处理这个问题的任何建议？我还可以使用有关如何使用 RSPEC 进行测试的建议来确保它被调用。

谢谢，科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:03:00.867

好的，我发现了这个问题。问题出在 setter 方法中的 join 检查。因为它是一个复选框，所以我需要检查一个匹配的整数 1。

```
def subscribe=(join)
begin
  if join.to_i == 1
    gb = Gibbon.new
    result = gb.list_subscribe(:id => "blah", :email_address => self.email)
  end
rescue
  false
end 
```

结尾

# php - 无法将变量传递给php函数

> ID：14864576
> 
> 赞同：0
> 
> 时间：2013-02-13T22:36:51.703
> 
> 标签：php, function, global

我知道这里已经以各种方式提出了这个问题，但我想我一定是愚蠢的！

我有这个非常简单的功能：

```
$firstline = "please say";

function localSidebarText() {
global $firstline;

echo $firstline;
echo "hello";

}

localSidebarText(); 
```

但是，它输出的是Hello这个词，而不是它前面的“请说”。

我做错了什么非常明显的事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:44:29.820

避免使用全局变量。将某些东西“传递”给函数很简单：

```
function localSidebarText($pageTitle, $firstLine) {
  echo $firstLine;
  echo "hello";
}

localSidebarText("Some page title", "The first line"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:41:00.207

您的变量不在函数范围内，因此在函数本身中未定义。你可以替换：

```
global $pagetitle; 
```

和：

```
global $pagetitle, $firstline; 
```

或将变量放在函数中，或者最后但并非最不重要的是给函数变量作为参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T22:44:39.087

```
global $firstline = "please say";
global $pagetitle;
function localSidebarText() {
echo $firstline;
echo "hello";
}

localSidebarText(); 
```

或者

```
global $pagetitle;
function localSidebarText($textToPrint) {
echo $textToPrint;
echo "hello";
}

localSidebarText("please say"); 
```

# select - 在 MS 访问选择查询中使用 DatePart 进行数据转换

> ID：14864577
> 
> 赞同：2
> 
> 时间：2013-02-13T22:36:52.697
> 
> 标签：select, ms-access-2007, insert-into

我正在尝试在 MS Access 选择查询中使用 DatePart() 从最初采用字符串形式的日期中提取月份和年份（作为数字）

* * *

“YYYY-MM-DD HH:NN:SS.0000000”

* * *

别人写的初始代码说：

```
DatePart("m", date)
DatePart("yyyy", date) 
```

但这导致查询运行时出现“数据类型，条件不匹配”错误，因此我尝试使用 Cdate() 将字符串转换为日期类型。

```
DatePart("m", Cdate(date))
DatePart("yyyy", Cdate(date)) 
```

然而这并没有解决问题。我想知道我的初始日期字符串是否不是 Cdate() 可以转换的形式，或者是否有更简单的方法可以从我的日期字符串中提取部分数字日期。

如果这个问题不完整，我准备进一步详细说明情况，但我不希望超越自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:49:25.760

那些多余的零会是个问题，去掉它们，你可以说

```
CDate(Mid(sdate, 1, InStr(sdate, ".") - 1)) 
```

然后

```
DatePart("m", CDate(Mid(sdate, 1, InStr(sdate, ".") - 1))) 
```

但是，您可能会发现只引用字符串的适当部分会更方便：

```
aYr = Left(sdate,4)
aMnth = Mid(sdate,6,2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:00:55.447

你是对的，小数秒阻止`CDate`接受你的字符串。你可以去掉小数秒。但是由于您最终需要年份和月份，您可以忽略所有时间组件而只使用日期部分。

查看此即时窗口会话是否提供任何有用的信息。

```
MyString = Format(Now(), "yyyy-mm-dd hh:nn:ss") & ".0000000"
? MyString
2013-02-14 23:38:09.0000000
' if date format is always yyyy-mm-dd,
' give CDate the first 10 characters
? CDate(Left(MyString, 10))
2/14/2013 
' year
? DatePart("yyyy", CDate(Left(MyString, 10)))
 2013 
' or
? Year(Left(MyString, 10))
 2013 
' month
? DatePart("m", CDate(Left(MyString, 10)))
 2 
' or
? Month(CDate(Left(MyString, 10)))
 2 

' if date format can vary slightly, eg yyyy-m-d,
' give CDate everything before the first space
? CDate(Left(MyString, InStr(MyString, Chr(32)) -1))
2/14/2013 
? Year(CDate(Left(MyString, InStr(MyString, Chr(32)) -1)))
 2013 
? Month(CDate(Left(MyString, InStr(MyString, Chr(32)) -1)))
 2 
```

您没有提到在获得年份和日期数字后您将如何处理它们。如果您打算将它们作为字符串连接在一起，您可以使用`Format()`.

```
? Format(Left(MyString, 10), "yyyymm")
201302 
```

# three.js - 平铺地形法线

> ID：14864578
> 
> 赞同：2
> 
> 时间：2013-02-13T22:36:55.350
> 
> 标签：three.js

我正在尝试在 ThreeJS 中创建地形解决方案，但在生成法线时遇到了一些麻烦。我通过使用 THREE.PlaneGeometry 类创建许多网格对象来解决这个问题。一旦创建了所有瓷砖，我将遍历每个瓷砖并设置 UV，以便每个瓷砖代表整体的一部分。我还生成了顶点 Y 位置的高度值以创建一些山丘。然后我调用几何函数

```
geometry.computeFaceNormals(); 
geometry.computeVertexNormals(); 
```

这只是为了让每个图块都有一些默认的面和顶点法线。

然后我遍历每个图块并尝试平均每个角上的法线。

问题是（我认为）法线，但我真的不知道该怎么称呼这个问题。创建时，平面角上的每个法线都指向与面相同的方向。这使得地形看起来像一个平坦的阴影对象。为了防止这种情况，我想也许我需要做的是确保每个顶点法线（每个角）具有与其直接邻居法线相同的平均法线。即每个图块的每个角与相邻平面的所有直接法线具有相同的法线。

图A ![在此处输入图像描述](../Images/11f5c770ce421566bc20d37a232c7bdb.png)

在这里，我正在可视化网格上的 4 个法线中的每一个。您可以看到在每个角落的法线是相同的（在彼此之上）

图B ![在此处输入图像描述](../Images/f6b71c4cf8f8d089a92d66ac254979e5.png)

编辑图 C ![在此处输入图像描述](../Images/e3be52945fd93004fcc400f5693980fc.png)

编辑图 D ![在此处输入图像描述](../Images/57f1dccf7dd8323b3ebd758656de0b3e.png)

除非所有顶点共享相同的法线，它仍然会出现所有块状 <:/

我不知道该怎么做...我认为我对需要做什么的理解不正确...？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:48:31.880

你对应该发生的事情基本上是正确的。您得到的阴影与连续法线不一致。如果给定位置的所有顶点面都具有相同的法线，则您不应在第二张图像中看到明显的阴影不连续性。然而，图像看起来也不像简单的面部法线，至少在我看来不是。

有几件事要看：

1）我注意到你的四边形本身不是平面的。您的算法是否有可能假设它们是？非平面四边形网格没有真正的“面法线”可用作基础。

2）在你平均之后，你的归一化归一化了吗？也就是说，它们的向量长度是否为 1？

3）您是否确信法线平均代码实际上是使用正确的法线进行平均？这里的阴影看起来不像完全平坦的阴影图像，其中四边形中的每个顶点面法线都是相同的 - 如果是这种情况，您将在每个四边形上获得一致的阴影，尽管四边形不会是连续的。这可能你原来的顶点面法线实际上没有与面法线对齐？

4）尝试关闭凹凸贴图进行调试。根据着色器中凹凸的完成方式，您可能有不正确的双法线/双切线，而不是坏的垂直法线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:02:30.773

而不是在每个顶点/角处平均邻域法线，您应该平均每个顶点具有的四个法线（每个顶点有 4 个图块）。

# python - 从 Python 中的前缀正则表达式创建表达式树？

> ID：14864585
> 
> 赞同：0
> 
> 时间：2013-02-13T22:37:25.620
> 
> 标签：python, regex, prefix

我得到了一个前缀符号的正则表达式，如下所示：

```
(r* (r. r| a ( r. b b) (r. c (r* c))) a)) 
```

在哪里：

```
c (for any char c) means "regex accepting the single-character string c"
r. means "regex accepting the empty string"
r/ means "regex accepting nothing"
(r| r1 r2 ...) means "r1 union r2 union ..."
(r. r1 r2 ...) means "r1 concat r2 union ..."
(r* r1) means "r1*" 
```

给定上述正则表达式作为输入，我将如何将其解析为表达式树？它不能只在空格处拆分，因为某些术语中有空格，所以我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:54:41.310

我将通过分解带括号的表达式与原子表达式来开始对此进行攻击。像这样的 BNF：

```
<expr> ::= "(" <paren-expr> ")"
         | <atomic-expr>

<exprs> ::= <expr>
          | <expr> <space> <exprs>

<atomic-expr> ::= <empty-expr> | <nothing-expr> | <char>

<paren-expr> ::= <union-expr> | <concat-expr> | <star-expr>

<union-expr> ::= "r|" <space> <exprs>

<star-expr> ::= "r*" <space> <expr> 
```

希望您可以填写其余部分，并弄清楚如何将其转换为实际的可执行解析器。

# wpf - Windows 8 和 wpf 打印

> ID：14864590
> 
> 赞同：1
> 
> 时间：2013-02-13T22:37:35.730
> 
> 标签：wpf, windows-8

我在 Windows 7 和 wpf 中使用 print visual 并且打印看起来不错。我得到小的假脱机文件。在 Windows 8 下，它们变成了几 MB 的图像！知道什么可能会让它们被视为图像吗？

# ios - 在 enumerateObjectsUsingBlock 中打印 NSSet

> ID：14864591
> 
> 赞同：0
> 
> 时间：2013-02-13T22:37:39.727
> 
> 标签：ios, objective-c

我需要在我的项目中显示对象“文献”的内容。我知道这可能需要更多详细信息，但我已经显示了literature.name（第一个NSLog）和childLiteratures（第二个NSLog）的数量，但我不知道如何打印NSSet 的childliteratures 名称。

```
LiteratureFetcher* literatureFetcher = [[LiteratureFetcher alloc]init];
NSArray* apps = [literatureFetcher appLiteratures];

[apps enumerateObjectsUsingBlock:^(Literature* literature, NSUInteger idx, BOOL *stop) {
        NSLog(@"%@",literature.name); -->> returns correct folder name
        NSLog(@"%lu",(unsigned long)literature.childLiteratures.count); -->> returns correct file counts in a folder
}]; 
```

更新：

通过再次迭代literature.childliteratures 解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:41:52.473

您可以`childLiteratures`使用`%@`. `NSLog`将打印集合的全部内容。例子：

```
NSSet *set = [NSSet setWithObjects:@"blue", @"green", @"red", nil];
NSLog(@"set = %@", set); 
```

输出：

```
2013-02-13 16:41:34.505 testApp[996:c07] set = {(
    red,
    green,
    blue
)} 
```

# c++ - 初始化一个以 shared_ptr 作为值的 const 映射

> ID：14864605
> 
> 赞同：3
> 
> 时间：2013-02-13T22:38:21.517
> 
> 标签：c++, c++11, shared-ptr

我正在尝试创建一个键为 int 的 const 映射，第二个值是 shared_ptr 到一个类。

比方说，我有一个带 B 的类 A，而 C 派生自 A。我希望能够创建一个地图

```
const map<int, shared_ptr<A>> mymap 
```

并使用以下值初始化地图：

```
{1, new B()} and {2, new C()} 
```

但是使用初始化列表会出错。关于我该怎么做的任何帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:41:57.830

问题是您正试图`shared_ptr`从原始指针隐式构造一个。您必须以这种方式初始化地图：

```
const map<int, shared_ptr<A>> mymap = {
    {1, shared_ptr<B>(new B())}, 
    {2, shared_ptr<C>(new C())}
    }; 
```

C++11 标准的第 20.7.2.2 段要求`shared_ptr<>`接受原始指针的构造函数为`explicit`：

```
template<typename Y> explicit shared_ptr(Y* p); 
```

问题是您试图`std::pair<int, shared_ptr<A>>`通过将原始指针作为第二个参数传递给`pair<>`的构造函数来构造实例，该构造函数接受`shared_ptr<A>`. 基本上，这与以下内容相同：

```
pair<int, shared_ptr<A>> mymap(1, new B()); // ERROR!
pair<int, shared_ptr<A>> mymap(1, shared_ptr<B>(new B())); // OK 
```

这就是说，除非您有很好的理由不这样做并且您真的知道自己在做什么，否则使用`std::make_shared<>()`创建共享指针总是更好，这既是因为效率（它执行一次内存分配而不是两次）和异常安全性（如果构造函数`B`或`C`抛出异常，它不会泄漏）。因此，您的地图初始化应如下所示：

```
const map<int, shared_ptr<A>> mymap = {
    {1, make_shared<B>()}, 
    {2, make_shared<C>()}
    }; 
```

# c# - 属性和 onchange 事件。需要找到合适的设计模式

> ID：14864607
> 
> 赞同：0
> 
> 时间：2013-02-13T22:38:26.043
> 
> 标签：c#, architecture

所以我做了一个socket通信库。其中一部分是`IConnection`

```
public enum ConnectionState
{
    NotConnected, Connecting, Connected, Authenticated, Disconnecting, Disconnected
}

public interface IConnection
{
    ConnectionState State { get; }

    event Action Connected;
    event Action Disconnected;
    event Action Authenticated;
    event Action AuthenticationFailed;

    // this two methods are the core of my question
    void OnAuthenticated();
    void OnAuthenticationFailed();

    bool Send(byte[] data);
    void Connect();
    void Close();
} 
```

当然`IConnection`提供有关连接状态的信息，并且能够在`Connected/Disconnected`它持有时触发事件`Socket`。毫无疑问。

现在，用户`IConnection`还想知道它何时通过身份验证。例如，服务器可能会监听该事件，并且一旦连接通过身份验证 - 发送客户端的初始配置数据。或者客户端可能会监听该事件并决定开始通信或重试身份验证过程。

但。问题是，认证过程存在于协议层。`IConnection`甚至不知道这样的层存在。协议层实际上是用来向对方`IConnection`发​​送序列化的消息。`byte[]`

因此，为了`IConnection`能够更改其状态并通知订阅者身份验证过程，我必须实现这两种方法

```
void OnAuthenticated();
void OnAuthenticationFailed(); 
```

显然是从协议层身份验证过程代码中调用的。

我觉得我在这里做错了什么。因为我一个人工作，任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:13:14.510

我最终将协议的核心部分（如身份验证、保持活动服务和最有可能在任何地方使用的基本消息类型）移至通信程序集。

所以现在`IConnection`auth 会处理自己，因为它知道核心协议。

# ruby-on-rails - 对象预期哈希找到，Ruby on Rails，Rest

> ID：14864608
> 
> 赞同：0
> 
> 时间：2013-02-13T22:38:29.130
> 
> 标签：ruby-on-rails, json, rest

我为我的网站编写了一个 Rest api。目前我拥有它，以便用户拥有许多他们可以拥有的计算机。我正在尝试发送一个 json 有效负载，以使用计算机更新用户帐户。为了测试这是我发送的：

```
 {"auth_token"=>"AiprpscAqN6hnvNDHSwh",
 "user"=>"{"id":1,
 "username":"Rizowski",
 "email":"test@gmail.com",
 "computer":[{"id":0,
    "user_id":1,
    "name":"Desktop",
    "enviroment":"Windows 8",
    "ip_address":"192.168.1.10",
    "account":[]}]}",
 "format"=>"json",
 "id"=>"1"} 
```

一旦我发送它，Rails 控制器就会接收它并使用 JSON.parse 方法将请求解析为哈希。一旦我尝试保存用户对象，它会说：

```
ActiveRecord::AssociationTypeMismatch in Api::V1::UsersController#update 
Computer(#51701664) expected, got Hash(#17322756) 
```

附带问题：我仍在尝试完全理解 rails 和 rest，但是像我一样发送计算机对象是一个好习惯吗？或者我应该通过我的计算机 api 控制器发送计算机数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:42:38.303

您的错误的解决方案是使用密钥`computer_attributes`而不是`computer`.

这是强关联和分层数据的正常做法。如果`computers`要独立于用户进行更新，您当然应该使用它自己的控制器。

# silverlight - Windows Phone 绑定图像位置

> ID：14864610
> 
> 赞同：1
> 
> 时间：2013-02-13T22:38:36.260
> 
> 标签：silverlight, windows-phone-7, binding, windows-phone-8, windows-phone

我正在尝试通过 Binding 在画布上的某些位置放置一组图像。

出于某种原因，图像正在显示，但不在我指定的位置。

**C＃**

```
_roomView.Room = new Room
{
   Items = new List<Item> {
   new Item {ImageUri = "/Escape;component/Images/Items/a.jpg", XPosition = 190, YPosition = 50},
   new Item {ImageUri = "/Escape;component/Images/Items/b.png", XPosition = 390, YPosition = 100},
   new Item {ImageUri = "/Escape;component/Images/Items/b.png", XPosition = 490, YPosition = 600}}
};

listBoxItems.ItemsSource = _roomView.Room.Items; 
```

**XML**

```
<Canvas>
     <Image Source="{Binding ImageUri}" Stretch="None" Canvas.Left="{Binding Room.Items.XPosition}" Canvas.Top="{Binding Room.Items.YPosition}"/>
</Canvas> 
```

`XPosition`并且`YPosition`是 int 类型。我尝试将它们更改为双倍，但图像仍然没有显示在我想要的位置。它们只显示在屏幕的左上角 - 彼此重叠。

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:18:33.513

您使用的包`URI`格式仅在您的图像具有`Build Action`“ `Embedded Resource`”时才有效。即使那样，我也不确定`URI`是否真的支持这种格式`Image.Source`，如果`URI`必须是`Relative`或`Absolute`. 检查图像`Build Action`（`Right click --> Properties`在那些文件上）并尝试更改`UriKind`.

无论哪种方式，除非您有充分的理由，否则最好将媒体资产保持为：
`Build Action = Content`并使用正常路径`URIs`。将图像添加`DLLs`为嵌入式资源不利于启动性能，因为将较大的图像加载`DLLs`到`AppDomain`.
从内存使用的角度来看，这也很糟糕，因为`DLLs`加载到内存中的现在更大了。

底线：

`<Image Source="myPicture.png" />`格式比性能好得多

`<Image Source="myAssemblyName;component/myPicture.png" />`句法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:30:59.310

您的 C# 代码具有图像集合。

您的 XAML 仅显示单个图像。如果 XAML 在列表框数据模板中，您将获得多个画布，每个画布有 1 个图像。

要在单个 Canvas 上显示一组图像，您可以使用，例如`<ItemsControl>`，将 ItemsPanel 设置为 Canvas，并在数据模板中指定具有源、canvas.left 和 canvas.top 的单个图像。

如果您尝试使用 ListBox 而不是 ItemsControl 来执行我所描述的操作，它不会起作用，因为它在 ItemsPanel 和 item 之间多了一层 UI 元素，即 item 容器。

PS 解决此类 GUI 问题的最快方法 - [XAML Spy](http://xamlspy.com/download)，我已经为自己购买了个人许可证。评估为期 21 天，功能齐全。

# html - 响应式设计失败

> ID：14864611
> 
> 赞同：0
> 
> 时间：2013-02-13T22:38:36.400
> 
> 标签：html, css

我搞砸了响应式设计，如果你把浏览器最小化，你会看到所有的图形都搞砸了。如果浏览器在 css 中的尺寸较小，有没有办法修复图形以保持它们应该在的位置。[http://www.magnixsolutions.com/dev/test/test.html](http://www.magnixsolutions.com/dev/test/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:53:15.333

看起来您正在使用 Bootstrap，它具有响应式设计的工具。最主要的是您要确保使用**.row**类和**spanx**列类。有关更多详细信息，请参阅[如何使用 Twitter Bootstrap 创建响应式网站设计](http://www.onextrapixel.com/2012/11/12/how-to-use-twitter-bootstrap-to-create-a-responsive-website-design/)。

默认网格为 12 列。所以你连续的跨度应该等于十二。您的 HTML 应如下所示：

```
<div class="container">
     <div class="row">
          <div class="span8 image">
          </div>
          <div class="span4 containerForm">
          ...insert form here...
          </div>
     </div>
</div> 
```

正确设置标记后，转到 CSS 并开始添加@media 查询，正如@watson 在他的回答中提到的那样。不过要小心。Bootsrap 有很多默认的 CSS 集。您可能必须覆盖才能获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:41:13.573

您需要使用媒体查询[它们太棒了！](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# java - 表关系多对多在sql中没有中间表？

> ID：14864613
> 
> 赞同：3
> 
> 时间：2013-02-13T22:38:54.287
> 
> 标签：java, sql

我正在制作一个可以查找生物的应用程序，并且正在尝试增加我的知识。

我有一张桌子 Creatures 和一张桌子 Skills

一个生物拥有多种技能，一个技能可以被多个生物使用。

我正在使用 sql 管理器在 java 中编码。

我使用 1,2 来表示生物表中的技能，并使用数值引用技能表。

我的一个想法是有没有办法制作一个重载的存储过程？

我还没有开始编码，因为我仍在计划中，但如果有任何想法发送给我，我将不胜感激。

我并不是想避开中间的桌子，只是看看是否有另一种方法可以做到这一点，而不是那么难，但毫无意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T22:42:55.017

你可能需要中间的桌子。

在 Creatures 表中存储以逗号分隔的技能列表可以很容易地获取每个生物的技能，但是如果您想知道具有给定技能的生物怎么办？

逗号分隔的列表充满了问题。您可以使用它们来优化访问数据的*一种方式，但这会导致对**其他*访问数据的方式的大幅去优化。

另请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:46:35.060

如果您使用的是关系数据库，那么“正确”且通用的解决方法是使用存储关系的表。如果你想避开中间表，你可以限制每个生物的最大技能数量 - 比如说最多 5 个技能，然后有称为技能 1、技能 2、...、技能 5 的字段。我不能推荐这个选项，因为它会使查询变得更加复杂，但在某些情况下它是可能的。此选项的另一个改进是单个 int 或 long 字段，其中每个位代表一种技能。不过在我看来还是不好。

# jboss - 如何以 jboss 为 7 启动 jrebel

> ID：14864618
> 
> 赞同：0
> 
> 时间：2013-02-13T22:39:26.333
> 
> 标签：jboss, jboss7.x, jrebel

我不知道如何将 JRebel 与 Jboss 一起使用（配置）为 7（Bronthes）。

首先，我正在为 Eclipse 下载插件，然后为 JRebel 激活社交许可证。接下来使用简单的例子 Jboss gwt 项目：`gwt kitchensink`.

当我从 Eclipse 控制台运行 Jboss 时，我得到了信息：

> 联系 myJRebel 服务器 .. [2013-02-13 23:34:39] [2013-02-13 23:34:39]
> 
> ################################################# ##### [2013-02-13 23:34:39] [2013-02-13 23:34:39] JRebel 5.1.3
> 
> (201302011417) [2013-02-13 23:34:39] (c) 版权所有 ZeroTurnaround OU，爱沙尼亚，塔尔图。[2013-02-13 23:34:39] [2013-02-13 23:34:39] 在过去 1 天里，JRebel 阻止了 [2013-02-13 23:34:39] 至少 1 次重新部署/重新启动保存你大约0小时。[2013-02-13 23:34:39] [2013-02-13 23:34:39] 本产品授权给 Lukasz Brudny [2013-02-13 23:34:39] [2013-02-13 23 :34:39] 通过 myJRebel 服务器获得的许可证。[2013-02-13 23:34:39] [2013-02-13 23:34:39] 您订阅了“JRebel 社会计划”计划，[2013-02-13 23:34:39] 订阅是终生。[2013-02-13 23:34:39] 2013-03-15 之前需要与服务器进行下一次许可证检查。[2013-02-13 23:34:39] [2013-02-13 23:34:39] 目前禁用以下插件： [2013-02-13 23:34:39] * Camel 插件（设置-德雷贝尔。
> 
> ################################################# ##### [2013-02-13 23:34:39] 23:34:39,592 信息 [org.jboss.modules] JBoss
> 
> 模块版本 1.1.1.GA

我也选中了复选框`Build automatically`，并且`Activate JRebel nature`在这个项目上。

那么接下来呢？JRebel 添加所有 Gwt 东西？我如何将项目部署到服务器？使用 jboss 插件进行 eclipse 或通过 eclipse 部署（运行为 --> 在服务器上运行）？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:53:06.850

What you see is the JRebel banner, meaning you enabled JRebel for the runtime - that is just fine. When you enabled JRebel Nature, it should have generated a config file - rebel.xml - check that it exists in the project.

When the application starts, you should see messages from JRebel, a-la "JRebel: Directory will be monitored".

That's it. You can just make changes to the code and refresh the app in browser window.

# javascript - 旧 IE 中的 JavaScript Object.create

> ID：14864619
> 
> 赞同：0
> 
> 时间：2013-02-13T22:39:26.617
> 
> 标签：javascript, internet-explorer

有没有办法让这段代码向后兼容 IE6/7/8？

```
function Foo() {
    ...
}

function Bar() {
    ...
}

Bar.prototype = Object.create(Foo.prototype); 
```

主要问题是`Object.create`错误，然后浏览器崩溃。

那么是否有一个函数可以用来模拟`Object.create`旧 IE 的行为。或者我应该如何重新编码上面的代码来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:21:24.410

Pointy的评论作为答案

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Polyfill)

```
if (!Object.create) {
    Object.create = function (o) {
        if (arguments.length > 1) {
            throw new Error('Object.create implementation only accepts the first parameter.');
        }
        function F() {}
        F.prototype = o;
        return new F();
    };
} 
```

这个 polyfill 涵盖了创建一个新对象的主要用例，该对象的原型已被选择，但不考虑第二个参数。

# git - 当包是依赖项时，npm install 失败

> ID：14864620
> 
> 赞同：1
> 
> 时间：2013-02-13T22:39:28.553
> 
> 标签：git, node.js, makefile, npm

我正在构建一个 npm 包 ( `libsbmlsim`) 来安装我稍后将在服务器端使用的二进制文件。

该包在我运行时构建得很好`npm install`，但是，当我通过 将它用作不同项目中的依赖项时`npm install libsbmlsim`，它无法找到它所依赖的二进制文件之一（`cmake`）：

```
/bin/sh: ../../node_modules/cmake/bin/cmake: No such file or directory                                                                                                                                      
make: *** [all] Error 127                                                                                                                                                                                   
npm ERR! libsbmlsim@0.0.2 install: `make`                                                                                                                                                                   
npm ERR! `sh "-c" "make"` failed with 2                                                                                                                                                                     
npm ERR!                                                                                                                                                                                                    
npm ERR! Failed at the libsbmlsim@0.0.2 install script. 
```

我怀疑这与我的设置有关，所以我将在这里稍微解释一下。`libsbmlsim`依赖于其他一些二进制文件（`cmake`和`libsbml`），我还捆绑了作为依赖`npm install cmake`项等引入的 npm 包。我在每个包的 package.json 文件中设置了安装脚本来运行`make`，我有一个相应的`Makefile`下载二进制文件。

`npm install`同样，当我作为自己的项目运行时，这有效，`libsbmlsim`但是当它作为依赖项安装时无法安装，即`npm install libsbmlsim`.

这是我的Makefile：

```
all:
    wget http://fun.bio.keio.ac.jp/software/libsbmlsim/downloads/libsbmlsim-1.1.0.tar.gz
    tar -xvzf libsbmlsim-1.1.0.tar.gz
    mkdir -p libsbmlsim-1.1.0/build
    cd libsbmlsim-1.1.0/build; export PATH=../../node_modules/cmake/bin:$(PATH); cmake .. -DCMAKE_INSTALL_PREFIX=../../libsbmlsim -DLIBSBML_INCLUDE_DIR=../../node_modules/libsbml/include -DLIBSBML_LIBRARY=../../node_modules/libsbml/lib64/libsbml.so
    cd libsbmlsim-1.1.0/build; export PATH=../../node_modules/cmake/bin:$(PATH); make -j4
    cd libsbmlsim-1.1.0/build; make install;
    rm -rf libsbmlsim-1.1.0
    rm *.tar.gz 
```

源代码在这里：[https ://github.com/stanley-gu/libsbmlsim](https://github.com/stanley-gu/libsbmlsim)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:48:48.957

Unless you've published your module to the npm registry (`npm publish`), you'd need to look at `npm link` during development.

more details [http://howtonode.org/introduction-to-npm](http://howtonode.org/introduction-to-npm) (somewhat sparse)

# iphone - 在ios上管理文件最方便的方法

> ID：14864624
> 
> 赞同：0
> 
> 时间：2013-02-13T22:39:43.567
> 
> 标签：iphone, ios, ipad, file-io, avfoundation

我有一个 iPhone 应用程序，允许用户在录制视频时创建内容（主要是存储为二进制数据的内容）。所以应用程序的输出是多个文件、录音和用户生成的内容。因为两者之间存在关系，所以我将它们存档并将它们作为单个文件（捆绑包）呈现给用户。但由于视频可能很大，存档变得越来越少，因为存档/取消存档文件需要时间。我还有什么其他选择？当我记录时，我将缓冲区写入磁盘，所以我没有将文件加载到内存中。能够写入档案会很好，但我几乎可以肯定这是不可能的。

# list - “问题9”：打包清单

> ID：14864631
> 
> 赞同：1
> 
> 时间：2013-02-13T22:40:26.850
> 
> 标签：list, f#, pattern-matching, matching, packing

我正在学习 f#，没有以前的函数式编程背景 - 开始取得进展，但一直坚持这一点。谁能帮我理解 99 个 f# 问题中第 9 个问题的解决方案 - 它们可以在这里找到：[http://fssnip.net/an][1]

基本上我不明白模式匹配在提供的解决方案中是如何工作的。首先什么是 xss？为任何帮助欢呼！

问题 9：将列表元素的连续重复项打包到子列表中。如果列表包含重复的元素，则应将它们放置在单独的子列表中。

例子：

包 ['a'; '一个'; '一个'; '一个'; 'b'; 'C'; 'C'; '一个'; '一个'; 'd'; 'e'; 'e'; 'e'; 'e']

验证它：字符列表列表 = [['a'; '一个'; '一个'; '一个']; ['b']; ['C'; 'C']; ['一个'; '一个']; ['d']; ['e'; 'e'; 'e'; 'e']]

样品溶液；

```
let pack xs = 
    let collect x = function
        | (y::xs)::xss when x = y -> (x::y::xs)::xss
        | xss -> [x]::xss
    List.foldBack collect xs [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:49:01.487

`(y::xs)::xss`匹配列表的（非空）列表，`y`并且`xs`是第一个子列表的头部和尾部，并且`xss`是外部列表的尾部。`xss`，在第二种情况下，匹配整个列表（是否为空）。

[`foldBack`](http://msdn.microsoft.com/en-us/library/ee353846.aspx)( `('T -> 'State -> 'State) -> 'T list -> 'State -> 'State`) 将累加器参数从后到前穿过列表。

`collect`是“累加”函数，它基本上是这样写的：如果状态（最初是一个空列表）包含至少一个子列表，该子列表也是非空的，并且当前元素（`x`）与子列表的头部（ ）匹配，则`y`添加`x`到子列表，否则将新的子列表添加到`xss`仅由 . 组成的状态 ( ) 中`x`。每个子列表是一组相等的相邻元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:58:50.583

要理解这一点，首先要了解 F# 中列表的表示方式。F# 列表是：

*   一个空列表写成`[]`或
*   一个值（头）后跟另一个列表（尾），写成`head::tail`

因此，例如，如果您编写，`[ 1; 2; 3 ]`您实际上是在构造一个包含 1 的列表，然后是一个包含 2 的列表，（等等），然后是一个空列表。表达式编译为：

```
1::(2::(3::[])) 
```

你可以省略括号，只写`1::2::3::[]`.

模式匹配使用完全相同的语法，但方向相反。您不是在构造列表，而是在*分解*它们。因此，当您有一个模式`x::xs`时，这意味着您想要获取第一个元素并将其分配给一个变量`x`，而剩余的列表应该分配给一个变量`xs`。

该模式`(x::xs)::xss`有点棘手，因为它适用于*列表列表*。这意味着您匹配的列表的头部也是一个列表。您可以将代码重写为以下更简单的版本：

```
let pack xs = 
    let collect x = function
        | head::xss ->    // Decompose into first element (head) and the rest (tail)
          match head with
          | y::xs when x = y -> (x::y::xs)::xss
          | _ -> [x]::xss
        | xss -> [x]::xss
    List.foldBack collect xs [] 
```

现在您在代码中有一些重复，但是您可以看到，`collect`需要`x`和另一个参数匹配另一个参数`head::xss`（以获取头/尾），然后还分解`head`.

# sharepoint-2010 - SharePoint Integrated Reports 缺少用于管理数据源的下拉菜单

> ID：14864633
> 
> 赞同：1
> 
> 时间：2013-02-13T22:40:47.707
> 
> 标签：sharepoint-2010, reporting-services

我已经使用 SharePoint 集成部署模式安装和配置了 SSRS，并且能够从 SharePoint 成功运行报表。我创建了一个自定义部署应用程序，它将上传所有报告和数据集，并创建所有数据源并在必要时在它们之间建立适当的连接。

我有一份报告失败，我需要手动处理与数据源的报告连接，但我发现下拉列表不包含让我管理其共享数据源的选项（请参见下面的示例）。

在这张图片中，您可以看到我缺少的选项。请原谅颜色，这是我能在紧要关头在网上找到的最好的图像。

![在此处输入图像描述](../Images/c636c1a4771d4a1a95397f25285e1b8d.png)

这仅在一种环境中发生，因此必须进行配置更改，我不想显示这些选项。以下是我已经检查过的内容：

1.  我使用的帐户位于站点所有者组中，并且可以完全控制所有内容，包括报告文件。
2.  由于某种原因，该项目作为文档内容类型上传，但我编辑了属性并将其更改为 Report Builder 报告内容类型。
3.  报表服务器集成网站集功能已被激活。
4.  所有 Reporting Service 内容类型都已添加到列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:48:59.450

所以这原来是由我们的一个定制引起的。我们有一个旧的自定义 javascript 函数，其名称与 SharePoint javascript 函数相同，它与这些下拉操作有关。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:56:42.030

我将恢复从 BIDS 部署以调试此问题。它将在该过程中执行一些验证，并可能返回有意义的错误。

# linux - 如果不是 gcc -static 那么 shell 会说“没有这样的文件”

> ID：14864634
> 
> 赞同：1
> 
> 时间：2013-02-13T22:40:48.790
> 
> 标签：linux, shell, gcc, android-ndk

我不知道为什么，但是（[Android ADB](http://developer.android.com/tools/help/adb.html)）shell 说`no such file or directory`当我在`arm-linux-gnueabi-gcc` **没有**选项的情况下编译时`-static`，然后尝试执行本机可执行文件。这是`no such file or directory`当 shell 知道文件存在于该路径，但不想授予用户知道文件存在的权限时得到的。（例如，您可以检查`chmod 4755`哪个不返回错误消息）。

**如果我使用**该`-static`选项进行编译，则程序将正常执行。

为什么在没有`static`选项的情况下编译会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:51:39.363

如果您静态链接程序所需的所有内容，则将内置。您的设备上的库没有依赖关系，因此它将完美运行。糟糕的是这种编程风格的规模（巨大）！

如果您省略 -static，您的编译器会假定为动态链接，但如果没有一些魔法，您将链接到 (Linux)-glibc：崩溃！请在网上搜索“native C on Android”教程。他们解释了你需要链接到 Android 的所有（可怕的）链接器东西）-glibc 又名“仿生”。

祝你好运，来源可能与你同在，马丁

# css - 完全透明的边框

> ID：14864637
> 
> 赞同：0
> 
> 时间：2013-02-13T22:40:59.090
> 
> 标签：css, border, transparency

简单的问题

目标：使边框（左右）**完全**透明，以便可以看到主体背景颜色。

尝试：http: [//jsfiddle.net/ZRQmY/](http://jsfiddle.net/ZRQmY/)

```
<html>
<body>
<div id="wrap">
<div class="trap">
    Make the white borders transparent, so when I change the background color the background color will be seen through the borders.
    I've tried rgb() with opacity but no luck
</div>
<div class="trap2">
   This is what I'd like but I'm setting the border = bg color;
</div>

</div>
</body>
</html> 
```

CSS

```
body {background:#eee;}
#wrap {padding:50px;}
.trap {
width:350px;
background: rgb(238, 238, 238);
border-right: 30px solid transparent;
border-left: 30px solid transparent;
border-bottom: 30px solid rgb(216, 199, 143);
}
.trap2 {
width:350px;
margin-top:100px;
background: rgb(238, 238, 238);
border-right: 30px solid #fff;
border-left: 30px solid #fff;
border-bottom: 30px solid rgb(216, 199, 143);
} 
```

我已经尝试了许多解决方法，但对我的具体问题无济于事。

你的包里还有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T13:25:22.213

发生这种情况是因为边框的背景是您的 div 的背景，而不是主体。阅读这篇文章以供参考：[http ://css-tricks.com/transparent-borders-with-background-clip/](http://css-tricks.com/transparent-borders-with-background-clip/)

这段代码：

```
#yourElement {
-moz-background-clip: padding;     /* Firefox 3.6 */
-webkit-background-clip: padding;  /* Safari 4? Chrome 6? */
background-clip: padding-box;      /* Firefox 4, Safari 5, Opera 10, IE 9 */
} 
```

使边框保持在 div 之外，因此通过设置透明度，您会看到主体背景的颜色，而不是 div 背景颜色。

这是您更新的小提琴： http: [//jsfiddle.net/C9gJQ/](http://jsfiddle.net/C9gJQ/)
我为边框使用了部分透明度，因此您可以看到它的行为方式，但您可以将其更改为您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:40:59.090

哈..在点击提交前几秒钟找到了答案。

确保设置要透明的元素的背景：`background:none;`或根本不设置任何内容。

编辑：谢谢大卫托马斯

如果不这样做，边框将（完全）透明。但是边框实际上是“绘制在”元素的背景色上；使背景颜色“通过”透明边框可见。

# django - 如何将所见即所得编辑器与 django flatpages 集成？

> ID：14864642
> 
> 赞同：11
> 
> 时间：2013-02-13T22:41:08.750
> 
> 标签：django

如何将所见即所得编辑器与 django flatpages 集成？我尝试了 django-ckeditor，但没有很好地描述它。有人试过吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-01T15:14:36.170

我只是通过 admin.py 中的以下代码将 django-ckeditor 连接到 flatpages 应用程序：

```
from django.contrib import admin
from django.contrib.flatpages.admin import FlatPageAdmin
from django.contrib.flatpages.models import FlatPage
from django.db import models

from cked.widgets import CKEditorWidget

class FlatPageCustom(FlatPageAdmin):
    formfield_overrides = {
        models.TextField: {'widget': CKEditorWidget}
    }

admin.site.unregister(FlatPage)
admin.site.register(FlatPage, FlatPageCustom) 
```

有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:18:02.687

```
from django.db.models import Field
from django.forms import Textarea
from settings import MEDIA_URL

class WidgetWYSIWYG(Textarea):
    def __init__(self, *args, **kwargs):
        super(WidgetWYSIWYG, self).__init__(attrs={'class': 'wysiwygEditor vLargeTextField'}, *args, **kwargs)
    class Media:
        js = (
            MEDIA_URL+'common/tiny_mce/tiny_mce.js',
            MEDIA_URL+'common/filebrowser/js/TinyMCEAdmin.js',
            )

class WYSIWYGField(Field):
    def get_internal_type(self):
        return "TextField"

    def formfield(self, **kwargs):
        defaults = {'widget': WidgetWYSIWYG}
        defaults.update(kwargs)
        return super(WYSIWYGField, self).formfield(**defaults) 
```

在文件 admin.py

```
from django.contrib import admin
from wysiwyg import WidgetWYSIWYG

from django.db import models
from django.contrib.flatpages.models import FlatPage
from django.contrib.flatpages.admin import FlatPageAdmin as FlatPageAdminOld

class FlatPageAdmin(FlatPageAdminOld):
    formfield_overrides = {
        models.TextField: {'widget': WidgetWYSIWYG},
    }

admin.site.unregister(FlatPage)
admin.site.register(FlatPage, FlatPageAdmin) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T13:49:34.217

我会试试这个应用程序。它使用 Tiny MCE。

[https://github.com/mjr27/django-flatpages-tinymce](https://github.com/mjr27/django-flatpages-tinymce)

# java - Java - 二进制搜索（）。如何为拼写检查设置 binarySearch

> ID：14864645
> 
> 赞同：1
> 
> 时间：2013-02-13T22:41:20.407
> 
> 标签：java, binary-search

我正在做一个拼写检查项目。我有一个单词列表，然后是葛底斯堡地址，其中一些单词拼写错误。我的工作是确定哪些单词拼写错误，然后在我打印地址时打印出拼写错误的单词下方的星号或其他内容。我的问题在 binarySearch 部分。我不确定语法，javadoc 看起来像中文。这是我的源代码（binarySearch 在底部）

```
/*
 * Assignment 1: Spell Check
 * Professor Subrina Thompson
 * CS102
 */
package spellcheck;

import java.util.*;
import java.io.*;

public class SpellCheck {

    //48,219 words in the words.txt

    //Declare Variables
    static FileReader reader;
    static Scanner input;
    static ArrayList <String> wordList = new ArrayList<String>();
    static FileReader reader2;
    static Scanner input2;
    static String testWord;
    static String index;

    //Main Method
    public static void main(String[] args) throws FileNotFoundException {
        fileSort();
    }

    //Open file to be read from
    public static void openFile() throws FileNotFoundException {
        reader = new FileReader("words.txt");
        input = new Scanner(reader);

    }

    //sort the file
    public static void fileSort() throws FileNotFoundException{
        openFile();

        //read the word list into an ArrayList
        while (input.hasNext()){
            wordList.add(input.next());
        }

        //Sort the array
        Collections.sort(wordList);
    }

    //read the gettysburg address
    public static void gAddress()throws FileNotFoundException{
        reader2 = new FileReader("gettysburg.txt");
        input2 = new Scanner(reader2);

        //create loop to place word from file into a var then test to see if it is in the dictionary
        for(int i = 0; i < wordList.size(); i++){

            //place the word into a variable
            testWord = input2.next();

            //test if the word is in the dictionary
            index = Collections.binarySearch(wordList,testWord);
        }
    }

    //compare the address and array through binary search 

    //print out if spelling is correct
} 
```

PS。我知道它并不完整并且有很多松散的结局，它仍在进行中。

编辑：

我尝试根据我对 binarySearch 工作原理的理解来制作一个新的搜索功能。这是该功能的代码。“字符串 w” 将是字典中的单词，用于测试地址中的 testWord：

公共静态int binarySearch（字符串w）{

```
 int start = 0;
        int stop  = wordList.size() - 1;

        while (start != stop){
            int half = ((stop - start)/2) + start;
            int res = wordList.get(half).compareToIgnoreCase(w);

            if( res == 0 ){
                return half;
            }
        else if( stop - start <= 1 ){
                return -1;
            }
        else if( res > 0 ){
                start = half;
            }
        else if( res < 0 ){
                stop  = half;
            }

   }

   return -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:45:12.663

这就是你所需要的：

```
if(index < 0) {
  System.out.println(testWord + " not in dictionary");
} 
```

此外，通过检查您的绝对值，`index`您可以轻松地在字典中找到按字母顺序接近您输入错误的单词的单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:56:37.640

javadoc 看起来像中文，因为列表是通用的。

```
public static <T> int binarySearch(List<? extends Comparable<? super T>> list, T key) 
```

应该将 T 视为任何泛型类型，T 是键的类型。第一个参数 list 必须是一个类型的列表，该类型为 T 派生的类型实现 Comparable 接口。

在您的情况下，键类型 T 是字符串。它是一个字符串列表。String 实现了 Comparable，String 是 String 的超类。所以这是有效的。

如果你填写String，方法签名会变成更正常的东西：

```
public static int binarySearch(List<String> list, String key) 
```

因此，给定

```
int index;
List<String> list;
String key; 
```

调用看起来像

```
index = Collections.binarySearch(list, key); 
```

之后`index`将包含列表中搜索键的索引，如果未找到该键，则为负数。更确切地说：

> 搜索键的索引，如果它包含在列表中；否则， *(-(插入点) - 1)*。插入点定义为将键插入列表的点：第一个大于键的元素的索引，或者 list.size()，如果列表中的所有元素都小于指定的键。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:49:26.057

> 创建循环以将文件中的单词放入 var 然后测试它是否在字典中

但这不是你正在做的。您正在创建一个循环来遍历字典中的所有单词，并检查地址中的下一个单词是否在字典中，并且不管它是否被找到。

如果字典有更多的单词然后地址你可能会得到异常，如果地址有更多的单词那么你不会检查所有的。

# python - Beautifulsoup 使用 BeautifulSoup 和 Python 提取 HTML 数据

> ID：14864652
> 
> 赞同：0
> 
> 时间：2013-02-13T22:41:54.367
> 
> 标签：python, html, xml, xml-parsing, beautifulsoup

我的 HTML 文本看起来像以下结构的许多实例：

```
<DOC>
<DOCNO> XXX-2222 </DOCNO>
<FILEID>AP-NR-02-12-88 2344EST</FILEID>
<HEAD>Reports Former Saigon Officials Released from Re-education Camp</HEAD>
<TEXT>
Lots of text here
</TEXT>
</DOC> 
```

我需要做的是索引每个结构，包括 DocNo、标题和文本，以便稍后进行分析（标记化等）。

我正在考虑使用 BeautifulSoup，这是我到目前为止的代码：

```
soup = BeautifulSoup (file("AP880212.html").read()) 
num = soup.findAll('docno') 
```

但这只会给我以下格式的结果：

```
<docno> AP880212-0166 </docno>, <docno> AP880212-0167 </docno>, <docno> AP880212-0168 </docno>, <docno> AP880212-0169 </docno>, <docno> AP880212-0170 </docno> 
```

如何提取 <> 中的数字？并将它们与标题和文本联系起来？

非常感谢你，

萨沙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:00:51.593

要获取标签的内容：

```
docnos = soup.findAll('docno')
for docno in docnos:
    print docno.contents[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:00:24.843

像这样的东西：

```
html = """<DOC>
<DOCNO> XXX-2222 </DOCNO>
<FILEID>AP-NR-02-12-88 2344EST</FILEID>
<HEAD>Reports Former Saigon Officials Released from Re-education Camp</HEAD>
<TEXT>
Lots of text here
</TEXT>
</DOC>
"""

import bs4

d = {}

soup = bs4.BeautifulSoup(html, features="xml")
docs = soup.findAll("DOC")
for doc in docs:
    d[doc.DOCNO.getText()] = (doc.HEAD.getText(), doc.TEXT.getText())

print d
#{u' XXX-2222 ': 
#   (u'Reports Former Saigon Officials Released from Re-education Camp', 
#    u'\nLots of text here\n')} 
```

请注意，我传递`features="xml"`给构造函数。这是因为您的输入中有很多非标准的 html 标签。在将其保存到字典之前，您可能还想输入`.strip()`文本，这样它就不会对空格那么敏感（当然，除非这是您的意图）。

**更新：**

如果同一个文件中有多个 DOC，并且`features="xml"`限制为一个，则可能是因为 XML 解析器期望只有一个根元素。

例如，如果您将整个输入 XML 包装在单个根元素中，它应该可以工作：

```
<XMLROOT>
    <!-- Existing XML (e.g. list of DOC elements) -->
</XMLROOT> 
```

所以你可以在你的文件中执行此操作，或者我建议在将输入文本传递给beautifulsoup之前以编程方式执行此操作：

```
root_element_name = "XMLROOT"  # this can be anything
rooted_html = "<{0}>\n{1}\n</{0}>".format(root_element_name, html)
soup = bs4.BeautifulSoup(rooted_html, features="xml") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:34:15.353

```
docnos = soup.findAll('docno')
for docno in docnos:
       print docno.renderContents() 
```

您还可以使用`renderContents()` 从标签中提取信息。

# git - 如何在git中恢复对特定类型文件的未提交更改

> ID：14864655
> 
> 赞同：38
> 
> 时间：2013-02-13T22:42:05.640
> 
> 标签：git, git-revert

我的 git 存储库中有一堆修改过的文件，其中很多是 xml 文件。如何仅还原 xml 文件的更改（重置修改）？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-13T22:44:36.813

你不需要`find`or `sed`，你可以使用 git 理解的通配符（不依赖于你的 shell）：

```
git checkout -- "*.xml" 
```

引号将阻止您的 shell 在执行之前将命令扩展为仅当前目录中的文件。

您还可以禁用 shell glob 扩展（使用 bash）：

```
set -f
git checkout -- *.xml 
```

当然，这将无法挽回地抹去您的更改！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T23:22:04.797

谢谢大家的回复，但对我来说，我找到了最准确的解决方案：

```
git diff --name-only -- '*.xml' | sed 's, ,\\&,g' | xargs git checkout -- 
```

sed 是用户逃避困扰 xargs 的空间，并且一切工作都非常快速和准确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:45:25.930

```
find . -name '*.xml' -print0 | xargs -0 git checkout HEAD 
```

或等效的东西，如果您的系统没有`find`and `xargs`。或者只是`git checkout HEAD **/*.xml`在`zsh`这种形式的 reqursive globbing 中或任何其他 shell 中。

# android - Google Maps v2 上的动画标记

> ID：14864664
> 
> 赞同：40
> 
> 时间：2013-02-13T22:42:48.940
> 
> 标签：android, google-maps, google-maps-android-api-2, google-maps-mobile

使用 v2 API 在 Google 地图上设置动画标记的最佳方式是什么？

我正在开发一个以地图为中心的游戏，我在其中跟踪人们的位置并将它们显示在地图上供彼此查看。当人们移动时，我想将一个标记从他的当前位置设置为他的最新位置。每个人都有一个方向，所以我需要适当地旋转标记。

使用新的 Google Maps API 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-14T20:40:30.813

一些 Google 工程师提供了一个很好的演示视频，其中包含一些优雅的示例代码，关于如何为所有不同版本的 Android 设置从起点到终点的动画标记：

相关代码在这里：

[https://gist.github.com/broady/6314689](https://gist.github.com/broady/6314689)

还有一个很好的演示视频，展示了所有这些操作。

[http://youtu.be/WKfZsCKSXVQ](http://youtu.be/WKfZsCKSXVQ)

**下面的旧答案**

在文档中，提到无法更改标记图标：

> **图标**
> 
> 为标记显示的位图。如果未设置图标，则会显示默认图标。您可以使用 defaultMarker(float) 指定默认图标的替代颜色。**创建标记后，您将无法更改图标。**

[谷歌地图 API v2 文档](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html)

您将不得不跟踪特定标记，可能使用类似于此处描述的方法：[将标记链接到对象](https://stackoverflow.com/questions/14310280/how-to-link-google-maps-android-api-v2-marker-to-an-object/14324081#14324081)，然后找出需要更新的标记。调用`.remove()`标记，然后根据您想要的“方向”创建旋转图像，使用该图像创建新标记，并将新标记添加到地图中。

您不需要“清除”地图，只需删除要修改的标记，创建一个新标记，然后将其添加回地图。

不幸的是，新的 Maps API 还不是很灵活。希望谷歌继续改进它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-05T20:53:19.350

**[DiscDev 答案的](https://stackoverflow.com/a/14883628/3263659)**完整示例**（上图）：**

 **```
LatLng fromLocation = new LatLng(38.5, -100.4); // Whatever origin coordinates
LatLng toLocation = new LatLng(37.7, -107.7); // Whatever destination coordinates
Marker marker = mMap.addMarker(new MarkerOptions().position(firstLocation));
MarkerAnimation.animateMarkerToICS(marker, toLocation, new LatLngInterpolator.Spherical()); 
```

对于那些使用 GPS / 或任何接收位置更新的位置提供程序的人：

```
Marker ourGlobalMarker;
// We've got a location from some provider of ours, now we can call:
private void updateMarkerPosition(Location newLocation) {

    LatLng newLatLng = new LatLng(newLocation.getLatitude(), newLocation.getLongitude());

    if(ourGlobalMarker == null) { // First time adding marker to map
        ourGlobalMarker = mMap.addMarker(new MarkerOptions().position(newLatLng));
    }
    else {
        MarkerAnimation.animateMarkerToICS(ourGlobalMarker, newLatLng, new LatLngInterpolator.Spherical());
    }         
} 
```

**重要的：**

如果`1MarkerAnimation.java`动画持续时间设置为 X，并且您以小于 X 的速率接收位置更新，则会触发多个动画，并且您可能会看到标记动画有点闪烁（这不是一个好的用户体验）。

为避免这种情况，该`animationMarkerToICS`方法（我以这里`animationMarkerToICS`为例）应如下所示，

**完整的方法实现：**

```
private static Animator animator; // MAKING ANIMATOR GLOBAL INSTEAD OF LOCAL TO THE STATIC FUNCTION

...

// Ice Cream Sandwich compatible
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public static void animateMarkerToICS(Marker marker, LatLng finalPosition, final LatLngInterpolator latLngInterpolator) {

    TypeEvaluator<LatLng> typeEvaluator = new TypeEvaluator<LatLng>() {
        @Override
        public LatLng evaluate(float fraction, LatLng startValue, LatLng endValue) {
            return latLngInterpolator.interpolate(fraction, startValue, endValue);
        }
    };
    Property<Marker, LatLng> property = Property.of(Marker.class, LatLng.class, "position");

    // ADD THIS TO STOP ANIMATION IF ALREADY ANIMATING TO AN OBSOLETE LOCATION
    if(animator != null && animator.isRunning()) {
        animator.cancel();
        animator = null;
    }
    animator = ObjectAnimator.ofObject(marker, property, typeEvaluator, finalPosition);
    animator.setDuration((long) ANIMATION_DURATION);
    animator.start();
} 
```

享受。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-21T08:41:07.037

从 API v2 的 rev.7 开始，Marker 添加了一个新功能。[Marker.setIcon](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#setIcon%28com.google.android.gms.maps.model.BitmapDescriptor%29)，因此您可以使用多个图标来显示方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T13:27:42.033

```
 //Your code         
    double bearing = 0.0;
             bearing = getBearing(new LatLng(
                                                currentPosition.latitude
                                                ,currentPosition.longitude),
                                        new LatLng(
                                                nextPosition.latitude,
                                                nextPosition.longitude));  

          bearing -= 90;
                            CameraPosition cameraPosition = new CameraPosition
                                    .Builder()
                                    .target(new LatLng(nextPosition.latitude, nextPosition.longitude))
                                    .bearing((float) bearing)
                                    .zoom(ZOOM_LEVEL).build();

                            mGoogleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition), 5000, null);

                 animatedMarker(currentPosition,nextPosition,busMarker);

                //Method for finding bearing between two points
                    private float getBearing(LatLng begin, LatLng end) {
                        double lat = Math.abs(begin.latitude - end.latitude);
                        double lng = Math.abs(begin.longitude - end.longitude);
                        if (begin.latitude < end.latitude && begin.longitude < end.longitude)
                            return (float) (Math.toDegrees(Math.atan(lng / lat)));
                        else if (begin.latitude >= end.latitude && begin.longitude < end.longitude)
                            return (float) ((90 - Math.toDegrees(Math.atan(lng / lat))) + 90);
                        else if (begin.latitude >= end.latitude && begin.longitude >= end.longitude)
                            return (float) (Math.toDegrees(Math.atan(lng / lat)) + 180);
                        else if (begin.latitude < end.latitude && begin.longitude >= end.longitude)
                            return (float) ((90 - Math.toDegrees(Math.atan(lng / lat))) + 270);
                        return -1;
                    }

   private void animatedMarker(final LatLng startPosition,final LatLng nextPosition,final Marker mMarker)
    {

        final Handler handler = new Handler();
        final long start = SystemClock.uptimeMillis();
        final Interpolator interpolator = new AccelerateDecelerateInterpolator();
        final float durationInMs = 3000;
        final boolean hideMarker = false;

        handler.post(new Runnable() {
            long elapsed;
            float t;
            float v;

            @Override
            public void run() {
                // Calculate progress using interpolator
                elapsed = SystemClock.uptimeMillis() - start;
                t = elapsed / durationInMs;
                v = interpolator.getInterpolation(t);

                LatLng currentPosition = new LatLng(
                        startPosition.latitude * (1 - t) + nextPosition.latitude * t,
                        startPosition.longitude * (1 - t) + nextPosition.longitude * t);

                mMarker.setPosition(currentPosition);

                // Repeat till progress is complete.
                if (t < 1) {
                    // Post again 16ms later.
                    handler.postDelayed(this, 16);
                } else {
                    if (hideMarker) {
                        mMarker.setVisible(false);
                    } else {
                        mMarker.setVisible(true);
                    }
                }
            }
        });

    } 
```**

# windows - Node.js 无法运行 Windows 7

> ID：14864665
> 
> 赞同：1
> 
> 时间：2013-02-13T22:42:50.610
> 
> 标签：windows, node.js

在 Win7 上运行 node.js 只需执行然后返回到命令提示符。有没有人见过这种行为？node.exe 的环境路径很好。有什么补救的建议吗？

节点-v --> v0.8.19

![在此处输入图像描述](../Images/d2905c9aadcda420c36619aeceb45fab.png)

# php - 如何将 Facebook 中的名称写入 MySQL？

> ID：14864668
> 
> 赞同：0
> 
> 时间：2013-02-13T22:43:00.753
> 
> 标签：php, mysql, facebook, api

我正在尝试运行以下代码：

```
mysql_query("INSERT INTO friend_data (UID, Name) VALUES ($friendUID, $friendName)"); 
```

其中 $friendUID 是从 Facebook 抓取的用户 ID，$friendName 是从 Facebook 抓取的朋友的名字。出于某种原因，$friendName 只是不会写入 MySQL。$friendUID 写得很好，常规文本也是如此。有谁知道为什么或如何使它工作？相关代码如下：

```
$uid = $facebook->getUser();
$friends = $facebook->api('/me/friends');
$friendUID = $value["id"];
$friendName = $value["name"];
echo $friendName;
mysql_query("INSERT INTO friend_data (UID, Name) VALUES ($friendUID, $friendName)"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:51:39.257

首先，您应该考虑使用 MySQLi 或 PDO，因为 PHP MySQL 扩展已经很老了（现在在 PHP5.5 中已弃用）
[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

问题是您试图将原始文本插入 SQL 查询，这除了存在注入风险外，还会导致无效语句：

期望的结果：

```
INSERT INTO friend_data (UID, Name) VALUES (1234, "Friend Name"); 
```

实际结果：

```
INSERT INTO friend_data (UID, Name) VALUES (1234, Friend Name); 
```

您需要将名称值封装在引号中，并在插入值之前对其进行转义：

```
$uid = $facebook->getUser();
$friends = $facebook->api('/me/friends');
$friendUID = mysql_real_escape_string($value["id"]);
$friendName = mysql_real_escape_string($value["name"]);
mysql_query("INSERT INTO friend_data (UID, Name) VALUES ($friendUID, \"$friendName\")"); 
```

# c# - 如何获取 XFA 表单中的字段列表？

> ID：14864669
> 
> 赞同：6
> 
> 时间：2013-02-13T22:43:02.040
> 
> 标签：c#, itextsharp, xfa

我正在尝试获取 XFA 表单中所有字段的简单列表。我正在使用这段代码：

```
private void ListFieldNames()
{
    string pdfTemplate = @"C:\Projects\iTextSharp\SReport.pdf";
    MemoryStream m = new MemoryStream();

    // title the form
    this.Text += " - " + pdfTemplate;

    // create a new PDF reader based on the PDF template document
    PdfReader pdfReader = new PdfReader(pdfTemplate);
    PdfStamper pdfStamper = new PdfStamper(pdfReader, m);
    AcroFields formFields = pdfStamper.AcroFields;        
    AcroFields form = pdfReader.AcroFields;
    XfaForm xfa = form.Xfa;
    StringBuilder sb = new StringBuilder();
    sb.Append(xfa.XfaPresent ? "XFA form" : "AcroForm");
    sb.Append(Environment.NewLine);

    foreach (string key in form.Fields.Keys)
    {
        sb.Append(key);
        sb.Append(Environment.NewLine);
        txtFields.Text = sb.ToString();
    }

    txtFields.Text = sb.ToString();
} 
```

但我得到的只是 XFA 表格，而不是任何字段。知道我做错了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T14:55:35.180

You've taken a code sample from chapter 8 of my book "iText in Action." The result of that code sample is consistent with what I wrote on page 273:

> > Running Listing 8.18 with this form as resource will give you the following result:
> > 
> > `AcroForm`

If your question is *Any idea what I am doing wrong?* then the answer is simple: you stopped reading on page 270, or you used a code sample without reading the accompanying documentation. How to fix this? Read the documentation!

If your question is *Why don't I get any info about the fields?* (which isn't your question, but let's assume it is), the answer is: you're using code to retrieve AcroForm fields, but your form doesn't contain any such fields. Your form is a pure XFA form, which means that all field information is stored as XML and XML only!

Suppose that you now want to know: *How can I extract that XML?* then you should go to the place where you found the example you copy/pasted.

That could be here: [http://itextpdf.com/examples/iia.php?id=164](http://itextpdf.com/examples/iia.php?id=164)

Or maybe here: [http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter08/XfaMovie.cs](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter08/XfaMovie.cs)

Or even here: [http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter08&ex=XfaMovie](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter08&ex=XfaMovie)

This code snippet will return the complete XFA stream:

```
public string ReadXfa(PdfReader reader) {
  XfaForm xfa = new XfaForm(reader);
  XmlDocument doc = xfa.DomDocument;
  reader.Close();

  if (!string.IsNullOrEmpty(doc.DocumentElement.NamespaceURI)) {
    doc.DocumentElement.SetAttribute("xmlns", "");
    XmlDocument new_doc = new XmlDocument();
    new_doc.LoadXml(doc.OuterXml);
    doc = new_doc;
  }

  var sb = new StringBuilder(4000);
  var Xsettings = new XmlWriterSettings() {Indent = true};
  using (var writer = XmlWriter.Create(sb, Xsettings)) {
    doc.WriteTo(writer);
  }
  return sb.ToString();    
} 
```

Now look for the `<xfa:datasets>` tag; it will have a subtag `<xfa:data>` (probably empty if the form is empty) and a subtag `<dd:dataDescription>`. Inside the `dataDescription` tag, you'll find something that resembles XSD. That's what you need to know what the fields in the form are about.

I could go on guessing questions, such as: *How do I fill out such a form?* By using the method `fillXfaForm()`; *How can I flatten such a form?* By using XFA Worker (which is a closed source library written on top of iTextSharp), but let's keep those questions for another thread ;-)

# azure - MVC4 Azure 发布错误 - 无法加载文件或程序集“System.Web.Razor”

> ID：14864670
> 
> 赞同：9
> 
> 时间：2013-02-13T22:43:03.740
> 
> 标签：azure, asp.net-mvc-4, razor-2, fusion

该项目在本地运行良好，仅在发布时出现以下错误：

> 无法加载文件或程序集“System.Web.Razor”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

过去几个小时在谷歌上搜索问题似乎是我添加到项目中的一个 nuget 包引用了 razor 1 并覆盖了我的 razor 2 dll。我尝试将 razor 2.0.0.0 dll 复制到引用而不是 1 但错误仍然存​​在。这是详细构建输出中显示冲突的地方：

```
There was a conflict between "System.Web.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" and "System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35".
1>      "System.Web.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" was chosen because it was primary and "System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" was not.
1>      References which depend on "System.Web.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" [C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies\System.Web.Razor.dll].
1>          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies\System.Web.Razor.dll
1>            Project file item includes which caused reference "C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies\System.Web.Razor.dll".
1>              System.Web.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
1>      References which depend on "System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" [C:\Users\Jack\SkyDrive\LessonUp.Current\packages\RazorEngine.3.0.8\lib\net40\System.Web.Razor.dll].
1>          C:\Users\Jack\SkyDrive\LessonUp.Current\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.dll
1>            Project file item includes which caused reference "C:\Users\Jack\SkyDrive\LessonUp.Current\packages\Microsoft.AspNet.WebPages.2.0.20710.0\lib\net40\System.Web.WebPages.Razor.dll".
1>              System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL 
1>              Recaptcha 
```

* * *

从那里它继续根据剃刀 2 列出其他软件包。

我添加到项目中的包是：Recaptcha、Recaptcha.mvcModel 和 Postal。
有谁知道我可以采取哪些步骤来解决这个问题？
让我知道是否有更多信息可以提供可能导致解决方案的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T23:14:44.723

确保引用 2.0 dll 并复制 local = true，然后尝试在 web.config 中添加程序集绑定重定向：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
</assemblyBinding? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:34:10.687

我在 MVC4 项目中使用 Postal 0.8.0 时遇到了同样的问题。当您使用 NuGet 安装 Postal 时，它会替换`System.Web.Razor 2.0`为`System.Web.Razor 1.0`. 我不得不删除对的引用`System.Web.Razor 1.0`，然后重新添加到`System.Web.Razor 2.0`. 您还必须在“属性”中将“复制本地”设置为，**当然**还要重新构建项目。一旦我这样做了 VS2012 将其复制到部署的 bin 目录中，问题就解决了。`True``System.Web.Razor``System.Web.Razor.dll`

Postal 还将这些依赖项添加到 web.config。我删除了它们，它仍然可以正常工作。

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="2.0.0.0" />
</dependentAssembly>
<dependentAssembly>
    <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
</dependentAssembly>
<dependentAssembly>
    <assemblyIdentity name="RazorEngine" publicKeyToken="9ee697374c7e744a" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-3.0.8.0" newVersion="3.0.8.0" />
</dependentAssembly> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:53:58.080

检查您的项目文件和 web.config 以查看它们是否已被 NuGet 包修改。一个已知的问题子是[postal](http://nuget.org/packages/postal/) 0.8.0。它将 RazorVersion 的 beta 版本作为依赖项引入（即使您已过滤为仅显示稳定版本）。即使您将 RazorVersion 更新到最新版本（该版本稳定），您的项目文件最终也会引用`System.Web.Razor`版本 1，并且您的 web.config 具有不正确的运行时程序集绑定。

**要修复**，请对您的项目文件和 web.config 与一个新的、空的 MVC 4 项目进行比较。然后从原始项目文件中复制正确的`Reference`元素。`System.Web.Razor`在 web.config 中，`dependentAssembly`删除`System.Web.Razor`.

这是您的项目文件的 TLDD（太懒了，没有区分）文本。希望到此代码段过时时，根本原因将得到修复。

```
<Reference Include="System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <Private>True</Private>
  <HintPath>..\packages\Microsoft.AspNet.Razor.2.0.20715.0\lib\net40\System.Web.Razor.dll</HintPath>
</Reference> 
```

（不幸的是，您无法通过卸载并使用 NuGet 重新安装来解决此问题，因为您必须先卸载有问题的依赖包，例如 postal，当您重新安装它时会重新破坏。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-15T21:38:16.770

原来的..

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages.Deployment" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly> 
```

由于某种原因，newVersion 属性设置为 2.0.0.0 版本，而 dll 为 3.0.0.0

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages.Deployment" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly> 
```

比它有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T03:12:20.787

终于得到了这个排序，再次从nuget下载了razor2.0。似乎对 webconfig 进行了排序并修复了依赖错误。在 azure 上启动并运行并非没有任何问题。

# php - 从加入中删除重复条目

> ID：14864672
> 
> 赞同：1
> 
> 时间：2013-02-13T22:43:15.690
> 
> 标签：php, mysql, codeigniter

我遇到了一个我觉得原则上有点简单的问题，所以我可能不会以正确的方式解决这个问题。我本质上是在页面上列出具有各自“评论”的“事件”。我加入了两个表，并希望运行一个 foreach 循环来获取所有事件及其评论。不幸的是，如果一个事件有多个评论，它会因为加入而重新打印原始事件（我怀疑）。有什么更好的方法来实现我想要完成的目标？

在我的模型中：

```
function get_events()
{
    $this->db->select('*');
    $this->db->from('events');
    $this->db->join('comments', 'comments.event_id = events.id', 'left');
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {
        return $query->result();
    }
} 
```

在视图中：

```
<?php foreach($events as $row): ?>
    <div class="event">
        <?= $row->event; ?>
        <?php if($row->comment == null): ?><br>
            <i>No comments.</i>
        <?php else: ?>
            <div class="comment">
                <?= $row->comment; ?>
            </div>
        <?php endif; ?>
    </div>
<?php endforeach; ?> 
```

在数据库中，我基本上有 3 个事件，一个有 2 个评论，一个只有 1 个评论，一个有零评论。第一个事件打印两次，每个都有不同的评论，第二个事件打印很好，有自己的评论，第三个工作完美，打印“无评论”，因为没有任何东西加入。

希望这一切都有意义！

公吨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:55:00.967

您可以检查您是否已经回显了该事件：

```
<?php
$lastEvent = null;
foreach($events as $row) {
    if($row->event != $lastEvent) {
        echo '<div class="event">' . $row->event;
    }
    if($row->comment == null) {
        echo '<br><i>No comments.</i>';
    } else {
        echo '<div class="comment">' . $row->comment . '</div>';
    }
    if($row->event != $lastEvent) {
        echo '</div>';
    }

    $lastEvent = $row->event;
} 
```

# ruby - 如何使 state_machine 块使用默认访问器而不是我的自定义访问器？

> ID：14864674
> 
> 赞同：0
> 
> 时间：2013-02-13T22:43:18.120
> 
> 标签：ruby, ruby-on-rails-3, state-machine, accessor

我正在实施[pluginaweek 的 state_machine gem](https://github.com/pluginaweek/state_machine)。我将代码缩小到这个范围，以便我可以更轻松地理解问题。假设我现在只有一个状态：

```
class Event < ActiveRecord::Base
  state_machine :status, :initial => :active_offer do
  end

  def status
    'Active Offer'
  end
end 
```

通过播种或浏览器创建新事件对象时出现的错误是`{:status=>["is invalid"]}`.

计划是包含所有不同状态的条件并将自定义字符串返回到视图。整个项目的视图当前都使用该`.status`语法，所以我正在尝试顺利安装它。我基于阅读 api 文档开始了这个解决方案：

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Overwriting+default+accessors](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Overwriting+default+accessors)

这是我的主要目标：

```
def status
  if read_attribute(:status) == 'active_offer' && self.start_date > Time.now
    'Active Offer'
  elsif read_attribute(:status) == 'active_offer' && self.start_date < Time.now
    'Expired'
  else read_attribute(:status) == 'cancelled'
    'Cancelled'
  end
end 
```

我该怎么做才能使 state_machine 块使用普通访问器以便它获取数据库值？

**银弹解决方案：**

我的主要问题是访问器覆盖`status`。当 state_machine 代码运行时，它正在通过我的访问器覆盖读取当前状态，因此返回了一个自定义字符串，这是一个无效状态。我不得不让 state_machine 使用 :state。我最初没有这样做，因为我已经有一个省等的：state attr，所以我将它迁移到：address_state。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:46:53.067

很确定您只需要更改定义的名称：

```
class Event < ActiveRecord::Base
  state_machine :status, :initial => :active_offer do
  end

  def active_offer
    'Active Offer'
  end
end 
```

**编辑：**

如果我理解正确，我不确定我是否正确，这将起作用：

```
state_machine :status, initial: :active_offer do
  event :expire do
    transition all => :expired
  end
  event :cancel do
    transition all => :cancelled
  end
end 
```

然后你可以`if...`在控制器或其他东西中做你的陈述等，并用类似的东西来转换它们`@event.expire`or `if @event.expired`。如果您希望它自动化，您将需要像[任何时候](https://github.com/javan/whenever)这样的东西。

# ruby - 我怎样才能杀死一个将自己重新设置为 init 的进程？

> ID：14864676
> 
> 赞同：0
> 
> 时间：2013-02-13T22:43:38.063
> 
> 标签：ruby, linux, unix, process, kill

我有一个程序将自身重新设置为 init，所以我不能使用以下代码：

```
pid=Process.spawn("xxx")
Process.wait(pid) #started xxx with pid, 
                  #but it respawned itself to 
                  #pid2 which has the ppid set to 1 
```

我不确定是否有办法追踪什么是新的 pid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:48:38.430

这个问题有点畸形。但是您可以使用 cgroups 来执行此操作。为您的活动创建一个新的 cgroup 挂载点。这将有一个包含系统中所有进程的“任务”文件。然后你可以创建这个目录的子目录，它会自动得到自己的（空的）任务文件。只需将进程的 PID 写入此新任务文件即可。它及其所有子项将始终出现在该任务文件中，而不是系统其余部分的文件中。“逃避” cgroup 的唯一方法是拥有对任务文件的写访问权。

是的，这听起来很复杂，但事实并非如此。这是 systemd 用来跟踪进程树的机制，可能与您想要的原因相同：杀死进程的所有子进程，不管它们的父进程发生了什么。

显然，对您的问题的一个更简单的答案可能是“使用 systemd”。

# html - 如何正确使用 CSS Class 和 ID

> ID：14864681
> 
> 赞同：2
> 
> 时间：2013-02-13T22:44:02.300
> 
> 标签：html, css

在获得一些初学者建议后，请就如何正确安排一些 CSS。

我有一个基本的 3 页网站。每个页面都将在底部显示一个页脚。页脚将在每个页面上保持主要样式相同（例如宽度、高度等），但我想根据我所在的页面（背景颜色、字体颜色）更改其他样式。我知道这是可以做到的，但我正在寻找一些关于正确使用语法的提示，所以不要学习使用坏习惯，除非这当然是正确的？

我在 CSS 中的内容是：

```
.footer
{
    width: 100%;
    height: 100px;
    border: 1px solid black;
    text-align: center;
}

#footer_page1
{
    background-color: red;
    font-color: white;
}

#footer_page2
{
    background-color: blue;
    font-color: white;
}

#footer_page3
{
    background-color: white;
    font-color: black;
} 
```

...并在我拥有的 HTML 中调用它：

```
<div class="footer" ID="footer_page1">
    Some text here
</div> 
```

这可以吗，还是应该以更好的方式完成？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:46:26.603

您应该使用 id`#footer`和 class`.page1, .page2, .page3`等 - 这是一个更好的尝试，因为您仍然有相同的页脚（所以 ID 应该相同）并且您只想更改某些内容（可以使用不同的类来完成）

**编辑：**和我的一个快速提示：小心设置`width: 100%`，因为除非你设置属性`border: 1px solid black`，否则边框不会在项目的宽度中计算`box-sizing: border-box`

我的意思是，如果你有一个 1024px 宽的屏幕，你展示的带有 css 的页脚将是 1026px 宽，右侧裁剪 2px

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:50:54.167

完全不建议在 CSS 中使用 ID，尽管它有时很有用。事实上，我建议不要使用除了类和伪类之外的任何东西，偶尔也不要使用属性选择器（尽管我个人一直使用 ID 和元素选择器，主要是出于懒惰）。这样做的原因是您只需要在级联中使用一个级别，这可以大大简化样式表中的事情，尤其是当它们变得非常大时。

```
.footer { /* default styles */ }
.page1 { /* this is already after the .footer ruleset, so it overrides
    the earlier rules automatically (by the nature of CSS */ }
.page2 { /* and so on */ }

<div class="footer page1">
    Some text here
</div> 
```

您还可以将类添加到整个页面的容器或其他内容中，这可能更有意义。这样您就可以同时操作页眉和页脚规则集：

```
.footer {}
.header {}
.page1 .footer {}
.page1 .header {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:53:38.003

当你在 css 中引用一个 id 或 class 时，你必须使用你选择的 class 或 id 的全名。例如，当您想引用一个`div`元素时，`id="someid"`您必须`#someid {`在样式表中写入以通过 id 引用此 div。

无论如何，您的想法是正确的，但是您的语法有点不对劲。以下是您可能正在寻找的内容：

```
/* common footer code goes here */
.footer
{
    width: 100%;
    height: 100px;
    border: 1px solid black;
    text-align: center;
}

/* code specific for each page goes here */
#page1.footer
{
    background-color: red;
    font-color: white;
}

#page2.footer
{
    background-color: blue;
    font-color: white;
}

#page3.footer
{
    background-color: white;
    font-color: black;
} 
```

在同一行中使用两个选择器称为[选择器链接](http://www.w3.org/TR/css3-selectors/#selector-syntax)。在这种情况下，您希望将 id 选择器与类选择器链接起来。

编辑： [这是一个 jsfiddle](http://jsfiddle.net/e9tTD/)。

查看您的代码，可以发现明显的“坏习惯”是 id `page1`、`page2`和`page3`都在`div`这些页面的页脚中，这有点令人困惑，因为“页面”并没有完全唯一地定义页脚。确保在任何页面上只使用一个同名的 id，如果确实使用了 id，它应该唯一地描述该元素。

正如其他人所说，应该注意的是，最近避免使用 id 已成为一种好习惯（javascript 功能除外）。尽可能只使用类现在是标准。很高兴知道如何执行选择器链接，当然正确的语法总是很重要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:51:51.343

您需要选择`<div class="footer" ID="page1">`。`.footer#page1`我建议对 page# 使用 class，因为 ID 在一个页面中应该是唯一的，但 ID="page1" 可能会经常使用。

最后的结果可以是

```
.footer
{
    width: 100%;
    height: 100px;
    border: 1px solid black;
    text-align: center;
}

.footer.page1
{
    background-color: red;
    font-color: white;
}

.footer.page2
{
    background-color: blue;
    font-color: white;
}

.footer.page3
{
    background-color: white;
    font-color: black;
} 
```

和

```
<div class="footer page1">
    Some text here
</div> 
```

# python - 按属性或其他条件缩小元素列表的好方法是什么？

> ID：14864684
> 
> 赞同：1
> 
> 时间：2013-02-13T22:44:08.327
> 
> 标签：python, optimization, filtering

我想按属性、类型或其他条件缩小列表元素的列表。

类似的东西`elements.only_type(Flower).get_nearest_to(player)`看起来比`min(filter(lambda i: isinstance(i, Flower), elements), lambda i: i.pos.distance_to(player.pos)`.

就效率、简洁的代码和简单性而言，以下是一个好主意吗？或者已经有一个好的方法、实现或设计模式？

```
class Selector(object):
    def __init__(self, selection):
        self.s3l3ct1on = selection

    def __getattr__(self, name):
        return type(self)(getattr(el, name) for el in self.s3l3ct1on)

    def __iter__(self):
        return iter(self.s3l3ct1on)

    def filter(self, function):
        return type(self)(filter(function, self.s3l3ct1on)) 
```

这就是它的使用方式：（`A`只是一个具有两个属性的类：`a`和`b`）

```
>>> sel = [A(3, 4), A(0, 9), A('test', 3), A(4,22), A(3, 9)]
>>> Selector(sel)
<__main__.Selector object at 0x13b0a90>
>>> list(Selector(sel))
[<__main__.A object at 0x13b0fd0>,
 <__main__.A object at 0x13b0b50>,
 <__main__.A object at 0x13b0150>,
 <__main__.A object at 0x13b0710>,
 <__main__.A object at 0x13b06d0>]
>>> set(Selector(sel).a)
{0, 'test', 3, 4}
>>> list(Selector(sel).b)
[4, 9, 3, 22, 9]
>>> s = Selector(sel).b.filter(lambda i: i%2 == 0)
>>> list(s)
[4, 22] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:12:50.437

为简单起见，您可以将类本身设为 list 的子类。

```
class Elements(list):
   def only_type(self, t):
       return Elements(i for i in self if isinstance(i, t))

   def get_nearest(self, who):
       return min(self, key=lambda x: x.pos.distance_to(who.pos))

el = Elements([Flower(), Person(), Flower(), Something()])

el.only_type(Flower).get_nearest(player) 
```

同样的事情`Selector`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:25:55.503

你提到的每一种选择过程都可以用`itertools`迭代器来定义。以下将其形式化，并且可以轻松扩展以支持更多种类。使用它的语法似乎非常易读。

尽管我没有进行任何性能测试，但我希望结果具有竞争力，因为所涉及的几乎所有开销都在构造函数方法中。唯一可能更快一点的事情就是用等效的`itertools`迭代器函数替换它的用法——所以如果你希望做很多这样的事情，它似乎是一个有效的便利工具加工。

```
import itertools

class Selector(object):
    def __init__(self, iterable, **kwargs):
        if not kwargs:
            self.iterator = iterable
        elif len(kwargs) > 1:
            raise ValueError('only one selector type keyword allowed')
        else:
            selector, target = kwargs.items()[0]

            if selector == 'by_attr':
                self.iterator = itertools.imap(lambda obj: getattr(obj, target), iterable)
            elif selector == 'by_type':
                self.iterator = itertools.ifilter(lambda obj: isinstance(obj, target), 
                                                  iterable)
            elif selector == 'by_func':
                self.iterator = itertools.ifilter(target, iterable)
            else:
                raise ValueError('unknown selector type keyword')

    def __iter__(self):
        return self.iterator

if __name__ == '__main__':
    from selector import Selector

    class A(object):
        def __init__(self, a, b):
            self.a, self.b = a, b

    class Flower(object):
        def __init__(self, name):
            self.name = name

    sel = [A(3, 4), A(0, 9), A('test', 3), A(4,22), A(3, 9)]
    print list(Selector(sel, by_attr='a'))

    sel = [42, Flower('Buttercup'), [1,2,3,5,8], A(20, 13), Flower('Rose')]
    print list(Selector(sel, by_type=Flower))

    sel = [4, 9, 3, 22, 9]
    print list(Selector(sel, by_func=lambda i: i%2 == 0)) 
```

# javascript - 在javascript中将所有空格更改为换行符

> ID：14864695
> 
> 赞同：1
> 
> 时间：2013-02-13T22:44:57.110
> 
> 标签：javascript, text, replace, adobe-illustrator

我在用 Javascript 修改 Adob​​e Illustrator 的脚本时，偶然发现了一个事实，即 Illustrator 不认为第二行是一个函数。我在 js 周围很菜鸟。

```
var item =  activeDocument.selection[0];

var linebreak = item.replace(/\s+/g, "%0D%0A"); 
```

# java - 将多维数组列乘以行

> ID：14864700
> 
> 赞同：1
> 
> 时间：2013-02-13T22:45:12.240
> 
> 标签：java

我在java中有以下数组，我想将array_x列乘以array_y行以最终创建array_z值

```
aray_x        array_y            array_z

4|9          4|11|12|14             |
---          ----------           -----
8|7          13|9|22|7              | 
---                               -----
3|2                                 | 
---                               -----  
9|1                                 | 
```

我的试用代码列表公共类乘法{

```
public static void main(String[] args) {
    int array_x[][] = {{9, 8}, {2, 17}, {49, 4}, {13, 119}, {2, 19}, {11, 47}, {3, 73}};
    int[][] array_y = new int[][]{{4, 11, 12, 14}, {13, 9, 22, 7}};
    int array_z[][] = new int[4][2];
    for (int i = 0; i < array_x.length; i++) {
        for (int j = 0; j < array_x.length; j++) {
            array_z[i][j] = array_x[i][j] * array_y[j][i];
                System.out.print(" "+array_z[i][j]);
        }

    }

} 
```

}

我如何实现这一点 - 那; array_z 的第 1 列由 array_x 的第 1 列和 array_y 的第 1 行的倍数填充。例如 4x4=16, 8x11=88, thius array_x * array_y =array_z array_z 的第 2 列由 array_x 的第 2 列和 array_y 的第 2 行的倍数填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:22:21.290

这是一个使用您的数据编译和运行的完整类...希望这会有所帮助

```
public class Alphy {

    private double[][] x;

    public Alphy (double[][] x) {
        this.x = x;
    }

    public double[][] multiplyWith (double[][] y) {
        int nr = x.length, nc = x[0].length;
        double[][] z = new double[nr][nc];

        for (int i = 0 ; i < nr ; i++)
            for (int j = 0 ; j < nc ; j++)
                z[i][j] = x[i][j] * y[j][i];
        return z;
    }

    public static void print (double[][] m, String label) {
        int nr = m.length, nc = m[0].length;
        System.out.println (label);
        for (int i = 0 ; i < nr ; i++) {
            for (int j = 0 ; j < nc ; j++)
                System.out.print ("\t" + m[i][j]);
            System.out.println();
    }}

    public static void main (String[] args) {
        double[][]  X = {{4, 9}, {8, 7}, {3, 2}, {9, 1}},
                Y = {{4, 11, 12, 14}, {13, 9, 22, 7}},
                Z = new Alphy(X).multiplyWith(Y);
        Alphy.print (X, "Initial Matrix");
        Alphy.print (Y, "Multiplied by");
        Alphy.print (Z, "Gives the result");
}}
/* Output of the above class:

Initial Matrix
    4.0 9.0
    8.0 7.0
    3.0 2.0
    9.0 1.0
Multiplied by
    4.0 11.0    12.0    14.0
    13.0    9.0 22.0    7.0
Gives the result
    16.0    117.0
    88.0    63.0
    36.0    44.0
    126.0   7.0
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:51:24.363

我的数学有点生疏，但这是正确的答案吗？

```
 int array_x[][] = {{4, 9}, {8, 7}, {3, 2}, {9, 1}};
    int array_y[][] = {{4, 11, 12, 14}, {13, 9, 22, 7}};

    int array_z[][] = new int[array_x[0].length][array_y.length];
    for (int i = 0; i < array_x[0].length; i++) {
        for (int j = 0; j < array_y.length; j++) {
            if (array_x.length != array_y[i].length) {
                System.out.println("Dimention missmatch " + array_x.length +" vs "+ array_y[i].length);
                System.exit(-1);
            }

            int sum = 0;
            for (int k = 0; k < array_x.length; k++) {
                sum += array_x[k][i] * array_y[j][k];
             //   System.out.println(i+"\t"+ j +"\t"+k+"\t"+  array_x[k][i] +"\t"+  array_y[j][k] +"\t"+  sum+"\t");
            }
           // System.out.println();
            array_z[i][j] = sum;
        }
    }
    System.out.println(Arrays.deepToString(array_z)); 
```

输出：

```
[[266, 253], [151, 231]] 
```

或者您是否需要一个 4X4 矩阵？

# android - 共享图像的正确方法（使用 Intents）

> ID：14864707
> 
> 赞同：4
> 
> 时间：2013-02-13T22:45:32.987
> 
> 标签：android, image, android-intent, share

我在我的应用程序中创建图像并希望共享这些社交网络 (facebook)、邮件应用程序 (gmail) 和其他可以“接收”图像的应用程序。

问题的根源（我认为）是我不想将外部存储用作图像的基础。我想使用我的数据文件夹或缓存文件夹，因为它们都不需要任何访问权限。

我用来将图像写入文件的代码（并且我指定了`MODE_WORLD_READABLE`其他应用程序可以读取它们）：

```
FileOutputStream fos = null;
try {
    fos = context.openFileOutput("image.jpg", Context.MODE_WORLD_READABLE);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
} finally {
    if (fos != null)
        fos.close();
} 
```

这是我分享图像的代码：

```
File internalFile = context.getFileStreamPath("image.jpg");

Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND);
intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(internalFile));
intent.setType("image/jpeg");
intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

context.startActivity(Intent.createChooser(intent, "share")); 
```

此解决方案非常简单，适用于 facebook 等应用程序，但**不适**用于失败的 gmail：

```
file:// attachment paths must point to file:///mnt/sdcard 
```

* * *

有许多“黑客”（见下文）可以让它与 gmail 一起使用，但我让我问自己是否有更好的方法来共享没有黑客的图像，这是我忽略的。所以，对于问题：

*   共享图像的最佳方式是什么？（外置储存？）
*   是否还有其他（错误）行为与 gmail 类似的应用程序？（我在 google+ 上看到了一些问题）
*   *如果没有其他方法：*我可以编写特殊意图以共享到特定应用程序。当用户在我的监视列表中选择应用程序时，我有默认的共享方式并覆盖它？

* * *

## 黑客

1.  通过简单地指向来**使用****[路径破解](http://stephendnicholas.com/archives/974#comment-127)**`Uri`：

    文件：///mnt/sdcard/../../my/package/name/...

    这个解决方案感觉不对。

2.  **使用`ContentProvider`**[此处](http://stephendnicholas.com/archives/974)描述的 a 。但从链接中引用：

    > 警告：帖子中描述的方法适用于 Gmail，但显然与其他 ACTION_SEND 处理程序（例如 MMS 作曲家）存在一些问题。

    *（问题：它使 MMS 作曲家崩溃）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T06:44:34.890

你试过 ParecelableFileDescriptor 吗？

[http://developer.android.com/reference/android/os/ParcelFileDescriptor.html](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html)

Create with `static ParcelFileDescriptor open(File file, int mode, Handler handler, ParcelFileDescriptor.OnCloseListener listener)` 创建一个访问给定文件的新 ParcelFileDescriptor。 `static ParcelFileDescriptor open(File file, int mode) Create a new ParcelFileDescriptor accessing a given file.`

像这样的接收端： [使用 Androids DownloadManager 从 Parcel File Descriptor 返回输入流](https://stackoverflow.com/questions/8001274/returning-an-input-stream-from-parcel-file-descriptor-using-androids-downloadman)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T09:35:38.333

你应该做3个步骤。
拍照片。

```
public Bitmap takeScreenshot() {
    View rootView = findViewById(android.R.id.content).getRootView();
    rootView.setDrawingCacheEnabled(true);
    return rootView.getDrawingCache();
} 
```

保存图片。

```
public String saveBitmap(Bitmap bitmap) {

File imagePath = new File(Environment.getExternalStorageDirectory() + “/screenshot.png”);
    FileOutputStream fos;
    try {
        fos = new FileOutputStream(imagePath);
        bitmap.compress(CompressFormat.PNG, 100, fos);
        fos.flush();
        fos.close();
    } catch (FileNotFoundException e) {
        Log.e(“GREC”, e.getMessage(), e);
    } catch (IOException e) {
        Log.e(“GREC”, e.getMessage(), e);
    }

    return imagePath.getAbsolutePath();
} 
```

分享到社交网络。

# javascript - 什么相当于 IE < 9 中的 getRangeAt() 方法？

> ID：14864709
> 
> 赞同：0
> 
> 时间：2013-02-13T22:46:00.803
> 
> 标签：javascript, internet-explorer, range

在版本 9 之前，我需要与 Internet Explorer 中的 getRangeAt() 方法等效的方法

```
if (window.getSelection) {
    sel = window.getSelection();
    if (sel.rangeCount) {
        range = sel.getRangeAt(0);
    }
} else if (document.selection && document.selection.createRange) {
    // What shall I write here to do the same thing in IE before version 9
}

var table = document.createElement("table");
table.border = 1;
table.className = "tabley";
range.insertNode(table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T11:49:16.423

document.selection.createRange(); 是在 IE<9 中创建范围对象的代码，等效于 IE>= 9 中使用的 getRangeAt 方法

# javascript - 由页面中的 ajax 调用之一引起的延迟问题

> ID：14864712
> 
> 赞同：0
> 
> 时间：2013-02-13T22:46:17.510
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc

我在页面上有多个 ajax 调用。为简洁起见，我们称它们为 A、B、C。“A”需要很长时间才能从服务器获取数据（我可以 2 分钟），比如 2 分钟。而“B”和“C”响应时间以毫秒为单位。

由于某种原因，AJAX 调用在“A”之后排队。即使 IE 9 可以为同一个域同时有 6 个并发请求连接。您可以在下面的屏幕截图中看到并发连接。

“A”需要 2 分钟，然后“B”和“C”进入挂起状态，直到“A”完成。

我找到了“ajax_threads.js” [http://cmarshall.net/MySoftware/ajax/Threads/](http://cmarshall.net/MySoftware/ajax/Threads/)但我不知道这是否有帮助。我理解“ajax_threads.js”的方式是它只提供多个连接，该功能已经存在于现代浏览器中。IE 7 曾经有 2 个连接。

![待处理的第一个 ajax 调用](../Images/bd34347b1e1f3aaabd82feb327f5cec1.png)

这是Javascript：

```
 $(function () {  $.ajax({
            type: "POST",
            url: "Service1.svc/GetDate",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (msg) {
                // Replace the div's content with the page method's return.
                $("#Result1").text(msg.d);
            }
        });

        $.ajax({
            type: "POST",
            url: "Service1.svc/GetDate2",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (msg) {
                // Replace the div's content with the page method's return.
                $("#Result2").text(msg.d);
            }
        });   }); 
```

HTML：

```
 <input type="button" id="Button1" value="1"/><div id="Result1"></div>
  <br/><input type="button" id="Button2" value="2"/><div id="Result2"></div> 
```

服务器代码：（启用 Ajax 的 WCF）

```
 [ServiceContract(Namespace = "")]
     [AspNetCompatibilityRequirements(RequirementsMode =  
     AspNetCompatibilityRequirementsMode.Allowed)]
     public class Service1
{
    [OperationContract]
    public string GetDate()
    {
        System.Threading.Thread.Sleep(8000);
        return DateTime.Now.ToString();
    }

    [OperationContract]
    public string GetDate2()
    {
        System.Threading.Thread.Sleep(1000);
        return DateTime.Now.ToString();
    }     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:20:41.513

我敢打赌，您正在服务器上使用 ASP.NET Session。这是您使用 Sessions 时的标准症状。原因非常简单，源于 ASP.NET Session 的设计。它不是线程安全的。所以 ASP.NET 所做的只是锁定对它的访问。这样做的结果是您不能从同一个会话中执行并行请求。他们将完全按照您观察的方式排队。

解决它的最佳方法是简单地摆脱这个可怕的 ASP.NET 会话。以下是您可以在 web.config 中添加的内容，以确保项目中的任何开发人员都不会错误地使用它：

```
<system.web>
    <sessionState mode="Off" />
    ...
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:19:56.077

没有简单的方法来处理这个问题。我在网上尝试了几种选择。但最好的解决方案是使用 ASP.NET 的新特性“ASP.NET WEBAPI”。

祝你好运！

# grails - 我如何为 g:select 标签编写一个集合

> ID：14864716
> 
> 赞同：2
> 
> 时间：2013-02-13T22:46:32.823
> 
> 标签：grails, select

![在此处输入图像描述](../Images/d8f2ee152726e657d53e00d747e4e02b.png)如何编写选项以便将其生成为 HTML 选择？这个问题是“选项”需要一个集合，而不是一个数组

这就是我所拥有的一切。我知道命名约定不好，我会解决这个问题，但现在我已经解决这个问题好几天了。

控制器类

```
import org.springframework.dao.DataIntegrityViolationException
import grails.plugin.mail.*

class EmailServiceController {

    static defaultAction = "contactService"

def contactService() {
    def options = new ArrayList()
    options.push("Qestions about service")
    options.push("Feedback on performed service")
    options.push("Other")
    options.push("Why am I doing this")
    options
}

    def send() {
        sendMail(){
            to "mygroovytest@gmail.com"
            from params.email
            subject params.subject
            body params.information
        }
    }
} 
```

领域类

```
class EmailService {

    static constraints = {
    }
} 
```

g：从 gsp 中选择呼叫

```
<g:select name = "subject" from = "${options}" noSelection="Topic"/> 
```

还尝试了以下使用“${selectOptions}”而不是“${options}”但没有运气

```
def selectOptions() {
    def options = new ArrayList()
    options.push("Qestions about service": "QAS")
    options.push("Feedback on performed service":"FoPS")
    options.push("Other":"Other")
    options.push("Why am I doing this":"WHY")
    return options
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T02:16:03.930

好的，我*想*我可能知道这里发生了什么。问题的缺失部分是 gsp 被称为什么。这是适当的方法：

```
class EmailServiceController {

  def contactService() {
    def options = ["Qestions about service", "Feedback on performed service", "Other"]
    // assumes you are going to render contactService.gsp
    // you have to push the options to the view in the request
    [options:options]
  }

} 
```

然后在 contactService.gsp 中，您将拥有：

```
<g:select name="subject" from="${options}" noSelection="['Topic': 'Topic']"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T00:06:56.307

你`options`既不是数组也不是地图。存在语法错误。这就是为什么您的选择中只有一个选项。您需要输入真实列表或地图，如下所示：

```
def selectOptions() {
    def options = [:]
    options["Qestions about service"] = "QAS"
    options["Feedback on performed service"] = "FoPS"
    [options:options]
} 
```

使用地图，您可以在视图中使用它，如下所示：

```
<g:select name="subject" from="${options.entrySet()}" 
    optionValue="key" optionKey="value"
    noSelection="['Topic': 'Topic']"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:59:59.550

您需要在标签中使用双引号，而不是单引号。使用单引号，您只是传递一个看起来像的字符串，`'${options}'`而不是传递一个值为`options`.

```
<g:select name="subject" from="${options}" noSelection="Topic"/> 
```

此外，假设您正在调用该`contactService`操作，您需要`return options`而不是返回`options.push("Other")`. `push()`返回一个布尔值，这意味着 的隐式返回`contactService`是布尔结果`push()`而不是`options`。

# ruby - 正确的设计：在 ActiveRecord 或辅助方法中包含模块

> ID：14864718
> 
> 赞同：2
> 
> 时间：2013-02-13T22:46:45.327
> 
> 标签：ruby, activerecord, coding-style, module, sinatra

我有一个使用 ActiveRecord 的 Sinatra 应用程序，我希望添加一个可以为一组记录生成指纹 (SHA1) 的功能。

我实现这一点的方式是定义一个模块并将其包含在`ActiveRecord::Relation`如下：

```
module Fingerprints
  def sha1
    Digest::SHA1.hexdigest map{ |record| record.attributes.values.join }.join
  end
end

ActiveRecord::Relation.send :include, Fingerprints 
```

我现在可以在 a 上调​​用 'sha1'`ActiveRecord::Relation`并获得我需要的值。

我的问题是这是否是执行此操作的“首选”方式（使用附加功能扩展 ActiveRecord）？

使用的最后一行`send`对我来说感觉不干净，而且我将功能固定到一个不属于我自己的类的简单事实也感觉像一个 hack。我知道这是 Ruby 中的标准模式，但深入到 ActiveRecords 的胆量并以这种方式修补它对我来说并不熟悉。

另一种方法是创建一个接收 a`ActiveRecord::Relation`并返回指纹的 Sinatra 助手。虽然这感觉更干净，但我不禁觉得该`sha1`方法应该真正属于`ActiveRecord::Relation`该类以更好地描述它的意图。

这可能只是个人喜好，但我很想知道其他人是如何做到这一点的，以及是否有一种“正确”的感觉。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:01:46.447

老实说，我看不出你所做的有任何真正的问题。*也许*调用该方法`fingerprint_sha`来防止破坏，*也许*添加一个自定义异常，这样如果发生任何问题，您就知道它是在您的代码中开始的，而不是 AR 的。

就个人而言，我可能会将此作为帮助程序并传递关系，如果在帮助程序中为其他人定义该方法可能会更明显，但就像我说的那样，我看不出你的问题'已经完成并认为这是一个很好的解决方案。

也许其他人会过来说不同的东西，我们都会在这里学到一些东西:)

# php - 如何调用存储为变量的类的静态方法？

> ID：14864724
> 
> 赞同：0
> 
> 时间：2013-02-13T22:47:06.537
> 
> 标签：php

为什么在类实例上下文中，表单`$this->className::staticMethod`调用不起作用，但表单调用`$className::staticMethod`起作用？

在下面的示例中`callDoSomething2`有效，但`callDoSomething`不起作用（我收到解析器错误）。我正在使用 PHP 版本 5.3.15。

```
<?php
class A {
    private $className;

    public function __construct($className) {
        $this->className = $className;
    }

    public function callDoSomething() {
        $this->className::doSomething();
    }

    public function callDoSomething2() {
        $className = $this->className;
        $className::doSomething();
    }
}

class B {
    public static function doSomething() {
        echo "hello\n";
    }
}

$a = new A('B');
$a->doSomething(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:52:44.350

callDoSomething2 是一种方法，另一种方法是使用类似的东西

```
call_user_func("{$this->className}::doSomething"); 
```

# javascript - 使用NodeJS并保存到MongoDB时如何同步多个RESTFul请求？

> ID：14864725
> 
> 赞同：2
> 
> 时间：2013-02-13T22:47:08.230
> 
> 标签：javascript, node.js, mongodb, mongoose, synchronous

我一直在尝试使用 NodeJS 实现 RESTFul API，并使用 Mongoose (MongoDB) 作为数据库后端。

以下示例代码在同时发送请求时使用相同的用户名注册多个用户，这不是我想要的。虽然我尝试添加支票！

我知道这是因为 NodeJS 的异步特性而发生的，但我找不到正确执行此操作的方法。看起来“findOne”方法立即返回，导致 registerUser 返回，然后处理另一个请求。

顺便说一句，我不想​​用单独的API函数检查现有用户，我需要在注册阶段检查。有没有办法做到这一点？

```
Controller.prototype.registerUser = function (req, res) {
    Users.findOne({'user_name': req.body.user_name}, function(err, user) {
        if(!user) {
            new User({user_name: req.body.user_name}).save(function(err) {
                if(!err) {
                    res.send("User saved");
                } else {
                    res.send("DB Error: Could not save user!");
                }
            });
        } else {
            res.send("User exists");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:23:37.310

您应该考虑将 user_name 设置为在 Schema 中是唯一的。即使同时请求设置相同的用户名，这也将确保 user_name 保持唯一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:59:11.267

是的，发生这种情况的原因正如您所怀疑的那样，因为多个请求可以同时执行代码，因此 User.fineOne 可以多次返回 false。顺便说一句，其他堆栈也可能发生这种情况，即使是每个请求使用一个线程的堆栈。

为了解决这个问题，您需要一种方法来以某种方式控制当时只有一个用户正在处理，您可以通过将所有 registerUser 请求添加到队列中然后将它们逐个从队列中拉出并调用 res.仅在从队列中处理后发送。

或者，也许您可​​以保留一个本地用户名数组，每次有新请求进入时检查该数组是否已经存在。如果没有将其添加到数组中并对其进行处理。如果它在数组中，则发送响应“用户存在”。然后，一旦成功创建了用户，您就可以将其从该数组中删除。（我还没有想过这个 100%，但我认为它应该也可以。）

# c# - C# 程序不评估操作并返回错误答案

> ID：14864726
> 
> 赞同：3
> 
> 时间：2013-02-13T22:47:16.350
> 
> 标签：c#, windows, oop, cmd, notepad++

社区。

我正在学习如何用 C# 编程。我编写了这个小程序，它可以从用户那里获取姓名、年龄、喜欢的颜色和两个数字。我使用 Notepad ++ 编写代码并从 Windows 命令提示符运行 C# 编译器。这是程序的源代码

```
using System;

class ShowSomething
{
static void Main(string[] args)

{
    string name, age, favColor;
    int num1,num2, sum, mult, subs;
    float div;

    Console.Write("What is your name? ");
    name = Console.ReadLine();
    Console.WriteLine("Hello, " + name);

    Console.WriteLine();

    Console.Write("How old are you? ");
    age = Console.ReadLine();
    Console.WriteLine("So you are " + age, "I thought that you were older!");

    Console.WriteLine();

    Console.Write("What is your favorite Color? ");
    favColor = Console.ReadLine();
    Console.WriteLine(favColor + " is a cool color!");

    Console.WriteLine();

    Console.WriteLine("Nice meeting you, " + name, "Have a good day!");

    Console.WriteLine();

    Console.WriteLine("Let us do some operations, " + name);

    Console.WriteLine();

    Console.Write("Please enter a number: ");
    num1 = Console.Read();

    Console.Write("Please enter another number: ");
    num2 = Console.Read();

    sum = num1 + num2;
    mult = num1 * num2;
    subs = num1 - num2;
    div = num1 / num2;

    Console.WriteLine();

    Console.WriteLine("Alright, " + name, "Let us blow up your mind!");

    Console.WriteLine();

    Console.WriteLine(num1 + "+" + num2, "=" + sum);
    Console.WriteLine(num1 + "*" + num2, "=" + mult);
    Console.WriteLine(num1 + "-" + num2, "=" + subs);
    Console.WriteLine(num1 + "/" + num2, "=" + div);

    Console.WriteLine();
    Console.WriteLine("Mindblown, Right?");
}   

} 
```

当我执行程序时，几乎一切正常。但是，当用户输入第一个操作数时，程序会跳过第二个提示并打印与预期完全不同的结果。例如，如果我将 0 作为第一个数字，程序将跳转到操作并打印以下内容：

//

48+13

48*13

48-13

48/13

脑洞大开是吧？

//

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:48:30.587

不要使用[`Console.Read`](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)，因为它没有达到预期的效果：

> 从标准输入流中读取下一个字符（并返回表示它的整数值^(1 ）。)

这是 devshort 关于为什么第二次调用`Console.Read`“跳过”的一个很好的解释：

> 如果您在第一件事中输入值“1”，它会将其转换为 ascii 表示。然后回车仍然在屏幕 [input] 缓冲区中，因此当您点击下一次读取 (Console.Read) 时，它会读取换行符并将其转换为数字。

相反，一种方法是使用[`Console.ReadLine`](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)相反（返回一个字符串）与[`int.Parse`](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)或类似的 ..

* * *

¹提示：[回车](http://www.asciitable.com)符的值为 13。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:49:24.517

视觉上的 ascii`0`字节值为 48\. 或`0x30`. 这解释了48。

基本上，您使用了错误的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:26:02.987

好的，我稍微编辑了你的代码并添加了一些解释，因为我改变了一些东西..

```
 string name, age, favColor;
        int num1, num2, sum, mult, subs; 
        float div;

        Console.WriteLine("What is your name? "); 
        //Start a new line and write ..
        name = Console.ReadLine(); 
        //Read the whole line
        Console.WriteLine("\nHello, {0}", name); 
        //{0} stands for the first variable you refer to after the, etc

        Console.WriteLine("How old are you? ");
        age = Console.ReadLine();
        Console.WriteLine("\nSo you are {0}, I thought that you were older!", age);
        // something new.. \n refers to a "new line", so instead of writing Console.Writeline(); you can use this
        Console.WriteLine("What is your favorite Color? ");
        favColor = Console.ReadLine();
        Console.WriteLine("{0} is a cool color!\n", favColor);

        Console.WriteLine("Nice meeting you, {0}", name);
        Console.WriteLine("Have a good day!\n");

        Console.WriteLine("Let us do some operations, {0}", name);

        Console.WriteLine("Please enter a number: ");
        num1 =  Convert.ToInt16(Console.ReadLine());
        //int.TryParse(Console.ReadLine(), out num1);
        //Another way is to "try parse", try converting a string to an integer

        Console.WriteLine("\nPlease enter another number: ");
        num2 = Convert.ToInt16(Console.ReadLine());
        //int.TryParse(Console.ReadLine(), out num2);
        //Another way is to "try parse", try converting a string to an integer where out is the returning variable

        sum = num1 + num2;
        mult = num1 * num2;
        subs = num1 - num2;
        div = num1 / num2;

        Console.WriteLine("\nAlright, {0}", name);
        Console.WriteLine("Let us blow up your mind!\n");

        //Again use {0} ... which writes easier than having to use + every time,
        //its not wrong but its easier this way
        Console.WriteLine("{0} + {1} = {2}", num1, num2, sum);
        Console.WriteLine("{0} * {1} = {2}", num1, num2, mult);
        Console.WriteLine("{0} - {1} = {2}", num1, num2, subs);
        Console.WriteLine("{0} / {1} = {2}", num1, num2, div);

        Console.WriteLine("\nMindblown, Right?");
        Console.ReadLine();
        //Console.ReadLine(); at the end to prevent the program from closing 
```

# html - 选择组合框时查询数据库

> ID：14864728
> 
> 赞同：0
> 
> 时间：2013-02-13T22:47:33.300
> 
> 标签：html, mysql

我有这个组合框，用于选择在这种情况下给定航班运行的日期。

```
 <select style="border:1px solid #DCDCDC; color:#003663; font-size:11px;" class="search" name="day" id="day">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
            </select> 
```

我们要查找信息的表称为 db_schedules。表结构包含一个名为 的列`daysofweek`。0123456 指定天数，0 为星期日，1-6 为星期一至星期六。每条记录都有一个指定的`daysofweek`值，即在第 346 天的搜索中启用了计划 3。

基于上述内容，如何根据组合框中的选定选项查询数据库以进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:04:24.110

从问题中不清楚 column 的数据类型`daysofweek`是否是 varchar 并且您正在存储一个表示一组天的字符串（例如，“1235”的值表示周一、周二、周三和周五），或者这是否是一个整数列，并且您有多行，每天一行。

如果它是 VARCHAR 列，则搜索第 3、4 和 6 天，如果您想要任何与这些天匹配的任何 db_schedule 行：

```
SELECT ... 
 FROM db_schedule d
WHERE (  d.daysofweek LIKE '%3%' 
      OR d.daysofweek LIKE '%4%'  
      OR d.daysofweek LIKE '%6%'
      ) 
```

为了在所有日子里得到匹配，`AND`那些谓词而不是`OR`它们

```
SELECT ... 
 FROM db_schedule d
WHERE (   d.daysofweek LIKE '%3%'
      AND d.daysofweek LIKE '%4%'  
      AND d.daysofweek LIKE '%6%'
      ) 
```

A`REGEXP`可以用来代替`LIKE`. 在“OR”条件的情况下，例如在 '3'、'4' 或 '6' 上查找匹配项：

```
 WHERE d.daysofweek REGEXP '[346]' 
```

一个`INSTR`函数也可以工作：

```
 WHERE (  INSTR(d.daysofweek,'3') 
       OR INSTR(d.daysofweek,'4')  
       OR INSTR(d.daysofweek,'6')
       ) 
```

如果没有关于您所面临的确切问题的更多详细信息，建议其他解决方案确实没有成效。

但我们可能会指出，可能有更合适的数据类型来存储`daysofweek`，MySQL`SET`数据类型似乎符合要求。

* * *

跟进：

如果星期几存储为 VARCHAR(7)，并且您想将“星期二”、“星期三”和“星期五”的参数传递到 SQL 查询中以执行搜索...

我只是不明白为什么你会费心将从选择下拉框中返回的值翻译成字符串，如“星期日”、“星期一”等。

返回的值（根据您的 HTML 代码，它们将是“0”到“7”），并且那些已经“匹配”存储在数据库中的值。

# python - 从 SeqIO.parse python 创建表

> ID：14864729
> 
> 赞同：0
> 
> 时间：2013-02-13T22:47:35.770
> 
> 标签：python, bioinformatics

我之前问过与此类似的问题，但以前的解决方案并没有解决我的问题。我一直在思考和测试东西，但没有任何东西能正常工作。

我有一个包含 500 多个序列的 fasta 文件，我需要从该文件中构建一个表，因此我尝试编写一个脚本来完成它，而不是通过复制粘贴手动完成。我正在使用 Biopython 读取文件：`seq=SeqIO.parse(handle, "fasta")`

从每个序列中，我想知道蛋白质序列所属的物种、蛋白质的名称和 Uniprot ID。当我使用 SeqIO 解析 fasta 文件时，我注意到我可以从中解析的信息不多。

这是我的 fasta 文件的一个子集：

```
>gi|194757291|ref|XP_001960898.1| GF11270 [Drosophila ananassae] >gi|190622196|gb|EDV37720.1| GF11270 [Drosophila ananassae] MSAARTSQDCDCTAKCRLRQHGNTITAALTKRSISSQNLAAFVYKTCGNFANILDDLGRSAVHMSASTGRYEILEWLLNH GAYINGQDYESGSSPLHRALYYGSIDCAVLLLRYGASMELLDEDTCCPLQAICRKCDVDDFATDSQNDVLVWGSNKNYNL GVGSEQNTNAPQSVDFFRKSNIWIEQVALGAYHSLFLDKKGHLYAVGHGKGGRLGTGGENTLPAPKRVKVSSKLGSEDSI RCISVSRQHSLVLTHRSLVFACGLNSDCQLGVRDAPEHLAQFKEVVALRDKGASDLVRVIACDQHSIAYGSRCVYVWGAN QGQFGISANIASIVVPTLIKLPARTTIRFVEANNAATVIYSEEKMIYLYYAEKTRAIKTPNYEDLKSISVMGGHIKNSAK GSAAALKLLMLTETNVVYLWYENTQQFYRCNFLPIRLPQIKKILYKCNQVMVLSEDGCVYRGKCNQIALPASELQEKSRP NLDIWQNNDQNRTEISREHVIRIELQRVPNIDRAVDISCDEGFSSFAVLQESQGKYFRKPTLPRKEHSFKKLLHDTSDCD AVHDVVFHVDGEKYPAHKYIIYSRAPGLRELVRMYLDKDIYLNFENLTGKMFELVLKHIYTNYWPTEDDIDCIQQSLGPA NPQNRSRTCQMFLPHLEKFQLTELAKYVKSYVQDHQFPLPSARQRLPRLHRSDYPELYDVKIKCEDGQVLQAHKCMLVAR LEYFEMMFMHSWAERSSVTMEGVPAEYMEPVLDYLYSLEAEAFCKQAYLETFLYNMITICDQYFIESLQNLCELLILDKI SIRKCGEMLEFATMYNCKLLLKGCMDFICQNLARVLCYRSIEQCDGETLKCLNDHYRNMFSRVFDYRQITPFSEAIEDEL LLSFIDGLEVDLEYRMDAESKAKQAAKTKQKDLRKLNARHQYEQRAISSMMRSISISESNPAPEVATSPQESARSETNNW SRVIDKKEQKRKQAETALKVNKTLKQETSPEPEMVPIERTPVNEQTPPPLSPETEPSTPLNKSYNLDFSSLTPQSQKLSQ KQRKRLSSESKSWRGNSSALLESPTTPVPVPNAWGVTTTPSSSFNDSYTSPTTGSSSDPTSFANMMRSQAASSSATSKDQ SQNFSKILADERRQRESYERMRNKSLVHTQIEETAIAELREFYNVDNIDDEKITIARKSRPSDINFSTWIRQ
>gi|198456847|ref|XP_001360463.2| GA20796 [Drosophila pseudoobscura pseudoobscura] >gi|198135774|gb|EAL25038.2| GA20796 [Drosophila pseudoobscura pseudoobscura] MSTAKAQEYDCTAKCTCRQHGNSITAALTKRSIDNQNLGAFIFKTCGNFANIIDDLGRSAVHMSASVARYEILEWLLNHG AYINGLDYESGSSPLHRALYYGSIDCAVLLLRYGASLELLDEDTRCPLQAICRKCDEDFTTESQNDVLVWGSNKNYNLGI GNEQNTNAPQAVDFFRKSNIWIEQVALGAYHSLFCDKKGHLYAVGHGKGGRLGIGVENSLPAPKRVKVSSKLNDDSIMCI SVSRQHSLLLTRRSLVFACGINTDHQLGVRDAPENLTQFREVVALRDKGASDLLRVIACDQHSIAYSTKCVYVWGANQGQ FGISRTTDTIMAPTLIKLPARTSIRFVEANNAATVIYTEEKMITLFYGDKTRYIKTPNYEDLKSIAVIGGHLKSSTKGSA AALKLLMLTETNVVFLWYENTQQFYRCNFSPIRLPEIKKILYKCNQVLILSLDGCVYRGKCNQIALPAGILEEKSKPNMD IWHNNDQNRTEISREHVIRIELQRVPNIDRATDIFCDESFSSFAVLQESHMKYFRKPPLPRREHNFKKLYHDTCESDAVH DVVFHVDGERFAAHKFILYSRAPGLRELTRIYLDKDVYLNFENLTGKMFELILKYIYTSYWPTEDDIDCIQESLGPANPR ERSRACEMFIPHLEMFQLVDLARYLQSYVRDNQFPIPSTRQRFNRLHRSDYPELYDVRIVCEDSKVLEAHKCMLVSRLEY FEMMFTHSWAERTTVNMEGVPAEYMEPVLDYLYSLDTEAFCKQNYTETFLYNMVTFCDQYFIESLQNVCESLILDKISIR KCGEMLDFAAMYNCKLLHKGCMDFICHNLARVLCYRSIEQCDEATLKCLNDHYRKMFSNVFDYRQITPFSEAIEDELLLS FVVDCDIDLDYRMDPETKLKAAAKHKQKDLRRQDARHYYEQQAISSMMRSLSVSESASGPEATTGPQESTRSEGKNWSRV VDKKEQKRKLADTALKVNNTLKLEEPPRPELEVIERALMKEQTPPPTSPAEETSTPLSKSYNLDLSSLTPQSQKLSQKQR KRLSSESKSWRSPLVEQEPTTPVAVPNAWGLPPATPSSSSFTDSPATGSISDPTSFANMMRGQAAAATTPTEKGQSFSRI LADERRQRESFERMRNKSLAHTQIEETAIAELREFYNVDNTDDETITIERKSRPTDINFSTWLKH
>gi|355695434|gb|AES00009.1| inhibitor of Bruton agammaglobulinemia tyrosine kinase [Mustela putorius furo] KPGNKLKLNQKKCSFLCDVTMKSVDGKEFTCHKCVLCARLEYFHSMLSSSWIEASTCTALEMPIHSDILKVILDYLYTDE AVVIKESQNVDFVCSVLVVADQLLITRLKGMCEVALTEKLTLKNAAMILEFAAMYNAEQLKLSCLQFIGLNM 
```

有什么方法可以从这些序列中获取蛋白质名称、Uniprot ID 和生物体？例如，我想从 seq.description 中解析基因库 ID，然后使用该 ID 在基因库中搜索，但我认为无法做到，并非所有序列都有基因库 ID。任何建议如何做到这一点？任何帮助将非常感激。

所需输出的示例：

```
name    organism    uniprot id  family
GF11270 Sophophora  B3MFN0  
GA20796 Sophophora  Q291S4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:43:14.600

你也可以问 biostar： http: [//www.biostars.org/](http://www.biostars.org/)

从您的 fasta 标头中提取 ACN。例如：GF11270

并使用 uniprot REST API 检索与此 ACN 关联的记录

[http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=xml](http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=xml)

[http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=txt](http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=txt)

[http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=tab](http://www.uniprot.org/uniprot/?query=GF11270&sort=score&format=tab)

# android - 在按钮内调整图像大小

> ID：14864730
> 
> 赞同：0
> 
> 时间：2013-02-13T22:47:48.210
> 
> 标签：android, android-layout

有没有办法调整按钮中的图像大小？图片来源来自`drawables`文件夹。我希望按钮具有以下布局。

![在此处输入图像描述](../Images/5f4601c144505c5c0ad823e5e4960150.png)

我知道我们可以`android:drawableLeft`为按钮使用 XML 标记，但是图像越过了按钮的边界，因此在所有方面都被切断了。

我希望我的**整个图像**都位于上述布局的“图像此处”插槽中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:49:57.903

如果您使用的是默认按钮，请使用默认填充（不要设置填充值）并且图像不应越界。

或者，为了更好地控制，您可以将 ImageView 和 TextView 放置在布局中（例如 LinearLayout）并设置布局的`style="@android:style/Widget.Button"`.

# iphone - 如何在 iOS 上禁用特定元素的缩放功能？

> ID：14864734
> 
> 赞同：4
> 
> 时间：2013-02-13T22:48:13.523
> 
> 标签：iphone, ios, ipad, zooming, pinchzoom

1) 在 iPhone/iPad 上访问：http: [//powellcreative.com/clients/Rotary/](http://powellcreative.com/clients/Rotary/)

我希望，当用户放大他们的设备时，菜单栏不会放大并保持在当前位置和当前大小。

这可能吗？

# c++ - 用于创建库的标头是否必须与使用该库的标头相同

> ID：14864741
> 
> 赞同：2
> 
> 时间：2013-02-13T22:48:55.267
> 
> 标签：c++, static-libraries, object-slicing

在将源代码编译为 .o 文件并使用“ar rcs libMyLibrarylib.a *.o”创建库后，我遇到了段错误，因为我使用的是带有成员变量和私有函数的头文件。当我使用完全相同的标题时，我没有得到错误。删除地图中的指针时会发生段错误。

## 用于创建库的标头

```
#include <**Type**>
class A
{
   public:
    A();
    ~A(); //In the destructor I iterate through the map to free everything before
    void function();
   private:
    void privateFunction();
    std::map<**Type**, int*> myMap;
} 
```

## 与编译库一起使用的头文件

```
class A
{
   public:
    A();
    ~A();
    void function();
} 
```

不使用确切的头文件时是否有切片或其他东西？我想对使用该库的任何人隐藏**类型的#include。**

我对该库进行了单元测试，它没有段错误，但它使用与编译它相同的头文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T22:51:06.497

那是一个格式错误的程序，您遇到了未定义的行为。程序中的翻译单元的类定义必须**完全相同**- 根据**3.2 一个定义规则 [basic.def.odr] \6**。

要隐藏 Type 的包含，您可以只使用 PIMPL 成语，而不是诉诸这些类型的 hack。

```
class AImpl;
class A
{
   public:
    A();
    ~A(); //In the destructor I iterate through the map to free everything before
    void function();
   private:
    AImpl* pImpl;
} 
```

您只需将所有逻辑和数据成员移动到内部`AImpl`并尽可能保持公共接口干净。您所需要的只是`AImpl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:53:26.143

在客户端代码中，您的对象具有不同的大小。当对象在堆栈或堆中分配时，这将覆盖内存。

# ruby-on-rails - 在不向 repo 添加许可证密钥的情况下安装 New Relic

> ID：14864743
> 
> 赞同：11
> 
> 时间：2013-02-13T22:49:11.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, newrelic

我想在我的一个开源 Rails 应用程序（v 3.2.12）上安装 New Relic。我不想在回购中有许可证密钥。我想用ENV之类的东西加载它。

默认情况下加载到`newrelic.yml`文件中。

该 YAML 文件在哪里加载？我想我可以手动将它与从 ENV 哈希加载许可证的哈希合并。

关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T01:17:27.023

我使用[Figaro gem](https://github.com/laserlemon/figaro)来处理带有环境变量的密钥`ENV`，类似于你。对于 New Relic，我有：

**config/application.yml** ( `.gitignore`d 并且不推送到源代码管理)

```
# ...
NEW_RELIC_LICENSE_KEY: {{MY_KEY}} 
```

然后在**config/newrelic.yml**中引用：

```
# ...
license_key: <%= ENV['NEW_RELIC_LICENSE_KEY'] %> 
```

一个名为**config/application.example.yml**的文件被推送到源代码存储库，其中包含将您自己的许可证密钥放入的说明：

**配置/应用程序.example.yml**

```
# ...
NEW_RELIC_LICENSE_KEY: # put your license key here 
```

另请参阅此 StackOverflow Q&A 以了解更多详细信息：
[应从 Ruby on Rails 中的公共源代码控制中删除哪些内容？](https://stackoverflow.com/q/14785257/567863)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T22:55:59.977

我在 IRC 上得到了一个有用的答案。`newrelic.yml`是 erb 插值的。这意味着我可以添加`<%= ENV["NEWRELIC"] %>`到 yml 文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-03T11:55:56.190

对以上答案是肯定的。另外，如果你在**Heroku**上。安装 NewRelic Addon 后，您可以下载`newrelic.yml`文件并更改 `license_key:`为：

`license_key: <%= ENV['NEW_RELIC_LICENSE_KEY']%>`

这将使用 NewRelic 插件设置的**NEW_RELIC_LICENSE_KEY 环境**变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:57:54.653

这不一定能回答您所问的确切问题，但这可能会解决您的最终目标。

通常对于这种情况，我将 newrelic.yml 文件添加到 .gitignore，然后创建一个 newrelic.yml.example，其中填写了所有非敏感字段和密钥的占位符。

通过这种方式，我可以将其添加到我的 newrelic.yml 文件中进行开发，并且还可以签入模板以供其他人使用。

# ruby-on-rails - 您需要一个用 ruby 创建一个基本框架吗？

> ID：14864745
> 
> 赞同：-1
> 
> 时间：2013-02-13T22:49:19.780
> 
> 标签：ruby-on-rails, ruby, frameworks

我很好奇它是如何在 Web 框架中工作的。怎么用ruby开发，不知用ruby开发web框架的基本需求是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:51:59.767

响应 HTTP 请求的能力。

一个 70 行、简单（但线程化，带有一些内容类型处理）的服务器：

[http://blogs.msdn.com/b/abhinaba/archive/2005/10/14/474841.aspx](http://blogs.msdn.com/b/abhinaba/archive/2005/10/14/474841.aspx)

其他的都是糖。将 URL 轻松映射到处理程序的能力是一个实现细节。将数据获取到视图层（假设视图层不仅仅是 Ruby，一个 la Markaby）是一个实现细节。

您在 Rails、Sinatra 等中看到的所有内容都是专门为使开发应用程序更容易、规范化、一致等而设计的实现细节。

# regex - Perl：将新行转换为在 2 个重复单词之间分隔的逗号

> ID：14864752
> 
> 赞同：1
> 
> 时间：2013-02-13T22:49:32.547
> 
> 标签：regex, perl

下面是带有重复行的单列的输出，该行可以是正则表达式/拆分等的一部分。

我想将分组列转换为逗号分隔格式。有人可以帮我弄这个吗？

前：

```
An instance of HostInfo
1=?  
2=?   
3=?    
4=?  
5=?
An instance of HostInfo
1=?
2=?
3=?
4=?
5=? 
```

后

```
1, 1=?, 2=?, 3=?, 4=?, 5=?

2, 1=?, 2=?, 3=?, 4=?, 5=? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:22:20.760

应该记住， Perl 中的*行*处理是*记录*处理的一个实例。您可以将*记录分隔符*设置为适合您的数据的内容。

假设文件*确实*包含字符串“HostInfo 的实例”，您可以执行以下操作。

您还可以设置记录分隔符：

```
use English qw<$RS>;
my $old_rs = $RS;
local $RS = "An instance of HostInfo\n"; 
```

然后您可以读取*这些*块中的文件。

```
while ( <$input> ) { 
    chomp; # removes record separator
    next unless $_;
    ...
} 
```

然后，您可以*将*记录分成几行并用逗号重新加入它们。所以`...`是：

```
say join( ', ', split $old_rs ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:13:05.927

尝试这样做：

```
use strict; use warnings;

my ($count, $hash);

# magic diamond operator to read INPUT
while (<>) {
    # removes newlines
    chomp;
    # if the line contains /An instance/
    # incrementing $count and skipping this line
    do{ $count++; next } if /An instance/;
    # else add current line in a reference to an array
    push @{ $hash->{$count} }, $_;
}

# iterating over "instances"
foreach my $first_level (sort keys %$hash) {
    # finally we print the result by de-referencing the HASH ref
    print "$first_level ", join ", ", @{ $hash->{$first_level} }, "\n";
} 
```

**用法**：

```
perl script.pl < input_file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:05:56.403

这样的事情会起作用吗？

```
use strict;
use warnings;

undef $/;

my $output = <DATA>;

my @parts = split /An instance of HostInfo/m, $output;

my $ctr = 1;
for my $part (@parts) {
  my @lines = split "\n", $part;
  @lines = grep {$_} @lines;
  next unless @lines;
  s/^\s+//g for @lines;
  s/\s+$//g for @lines;
  print $ctr++, ', ', join(", ", @lines),"\n";
}

__DATA__
An instance of HostInfo
1=?  
2=?   
3=?    
4=?  
5=?
An instance of HostInfo
1=?
2=?
3=?
4=?
5=? 
```

这会将您的示例输出读入单个字符串，将其拆分为“HostInfo 的实例”，然后循环遍历每个段，拆分行，修剪它们，最后将它们重新连接在一起。

# javascript - Sencha Touch：如何使用 JSONP 获取简单的 json 文件作为响应？

> ID：14864753
> 
> 赞同：0
> 
> 时间：2013-02-13T22:49:39.727
> 
> 标签：javascript, sencha-touch, sencha-touch-2, jsonp

我正在尝试进行简单的 JSONP 调用以获取加载在远程服务器上的 json 文件。

这是我在服务器上加载的简单 json 文件。

```
{
    "login": [
        {
            "themename": "NO",
            "themeId": "1"
        }
    ],
    "homePage": [
        {
            "themename": "NO",
            "themeId": "1"
        }
    ],
    "transactionDetails": [
        {
            "themename": "NO",
            "themeId": "1"
        }
    ]
} 
```

我的控制器代码调用这个文件来获取数据

```
 Ext.data.JsonP.request(
    {

    url : 'http://xx.xx:8080/ThemeSelector.json',

            callback : 'someCallback' ,

            someCallback: function(success, result) {

            var text = result.responseText;

              var object = Ext.decode(text);
              themeName = object['homePage'][0].themename;

            }
        }); 
```

我收到错误`"Uncaught SyntaxError: Unexpected token : "`

我知道响应应该包含在对象中，但无法在 json 文件和我的代码中进行精确更正。请问有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:50:29.953

JSONP 要求响应采用 JavaScript 函数调用的形式，将实际的 JSON 对象作为参数传递。纯 JSON 不会（不能）工作。

函数调用的具体细节（特别是函数名称）可能会有所不同，但通常它是添加到 HTTP 请求的参数。服务器应根据该参数的值构造响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T06:01:15.170

要使用 JsonP，您的 json 响应应该包含`callback`您发送的参数。没有它，`callback`函数将不会被调用并产生错误，因为它确实需要它。在您的情况下，您只需在服务器上提供纯 JSON 文件即可。所以你不能直接对这个文件使用 JsonP。

如果您对服务器有一定的控制权，那么您可以编写一个可以为您执行此操作的脚本 -

```
<?php
 header('Content-Type: text/javascript');
 $response = file_get_contents('ThemeSelector.json');
 echo $_GET['someCallback'] . '(' . $response .' );';
?> 
```

然后收到的 json 响应看起来像 -

```
Ext.data.JsonP.callback2 (
    {
        "login": [
            {
                "themename": "NO",
                "themeId": "1"
            }
        ],
        "homePage": [
            {
                "themename": "NO",
                "themeId": "1"
            }
        ],
        "transactionDetails": [
            {
                "themename": "NO",
                "themeId": "1"
            }
        ]
    }
) 
```

# css - 在 CMSMS 中缓存动态样式表

> ID：14864754
> 
> 赞同：0
> 
> 时间：2013-02-13T22:49:45.140
> 
> 标签：css, caching, content-management-system, smarty

我正在使用 CMS Made Simple。我试图在我的`css`样式表中包含条件 Smarty 代码。

```
[[if $raduno eq '1']]
  [[assign var='bgcolor' value='#bc3516']] /* red */
[[else]]
  [[assign var='bgcolor' value='#f3c127']] /* yellow */
[[/if]]

body {
    background-color:  [[$bgcolor]];
    ...
} 
```

代码似乎可以正常工作（根据 的值，我得到一个红色和黄色背景`raduno`）。但是，`css`样式表的缓存似乎会干扰这种方法。在清除 CMSMS 服务器缓存后访问的第一个页面上选择的背景颜色是我在所有随后访问的页面上也得到的背景颜色，无论 variable 的值如何`raduno`。

是否可以根据变量的值缓存样式表？（如果是这样，自动还是手动？）

该问题目前通过使用两个单独的样式表得到解决。然而，这使得维护变得困难。此外，在这里禁用缓存不是一个选项 --- 使用两个样式表的模板用于整个站点。

我正在使用 CMSMS 1.10.3 版。我意识到升级*可能会*有所帮助，但我在变更日志中没有发现任何迹象表明这种情况。（*我的*版本安装在 opensourcecms.com 上！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T00:24:07.767

不，这样做的唯一方法是避免缓存样式表，这不是一个好主意。最简单的解决方法是使用内联 css 和 Smarty，或者使用 jquery 进行交换。

# macos - 在 MacBook Pro OS X Lion 10.7.5 上关机后登录丢失

> ID：14864758
> 
> 赞同：-1
> 
> 时间：2013-02-13T22:50:09.197
> 
> 标签：macos, osx-lion

每次我们的工作 MBP 关闭/重新启动时，只会出现一个用户登录。在该用户（显示登录）登录后，其他配置文件再次可见。如果我错过了某种配置文件设置，我不会感到惊讶，因为我对 Mac 不是超级精通。但是，在用尽搜索资源后，我希望 SO 上的某个人遇到了类似的问题。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:07:01.703

您是否设置了 FileVault 2 加密？如果是这样，您可能只有一个用户启用了预启动身份验证。如果这是问题所在，您可以在系统偏好设置 -> 安全和隐私窗格 -> FileVault 选项卡中启用其余用户。

# r - 在 R 中导入拆分的 csv 文件

> ID：14864759
> 
> 赞同：0
> 
> 时间：2013-02-13T22:50:16.560
> 
> 标签：r, csv

我有一个 csv 文件，看起来像：

```
Point            Site Energy Savings (%/yr) Annualized Energy Related Costs ($/yr)
Optimal Point 0        0                        1822.880005
Optimal Point 1        14.39999962              1608.069946
Optimal Point 2        20.65999985              1596.76001
Optimal Point 3        26.05999947              1639.98999
Optimal Point 4        34.54999924              1786.359985

Point            Site Energy Savings (%/yr) Annualized Energy Related Costs ($/yr)
Reference              0                        1822.880005
Iter 1, Pt 1           6.929999828              1818.089966
Iter 1, Pt 2           8.170000076              1863.180054
Iter 1, Pt 3           4.159999847              1845.390015 
```

我正在尝试将它读入 R 以在散点图中绘制第二列和第三列，但是 read.csv 由于双标题而变得混乱。知道如何将其读入 R 跳过第二个标题吗？

我希望在 R 中显示以下内容：

```
Point                Site Energy Savings (%/yr) Annualized Energy Related Costs ($/yr)
Optimal Point 0      0                           1822.880005
Optimal Point 1      14.39999962                 1608.069946
Optimal Point 2      20.65999985                 1596.76001
Optimal Point 3      26.05999947                 1639.98999
Reference            0                           1822.880005
Iter 1, Pt 1         6.929999828                 1818.089966
Iter 1, Pt 2         8.170000076                 1863.180054
Iter 1, Pt 3         4.159999847                 1845.390015 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:06:17.963

我会做类似的事情：

```
# read in first 5 rows only
a <- read.csv(file, nrows=5, header=TRUE) 

# read in the last rows skipping the first 5 row data set 
b <- read.csv(file, skip=6, header=TRUE)   

rbind(a,b) # put them back together 
```

# javascript - 从先前运行的应用程序中获取总和的应用程序

> ID：14864761
> 
> 赞同：0
> 
> 时间：2013-02-13T22:50:25.637
> 
> 标签：javascript

我有一个骰子函数，可以将骰子的总和相乘，将总和存储在变量中，然后将总和打印出来。没问题，但是当我运行应用程序两次时。第二个应用程序影响第一个应用程序的总和。

我尝试使用 localStorage，但没有任何效果。这是我在两个应用程序中显示不同结果的最接近的结果

我希望能够运行多个应用程序但不泄漏信息。有小费吗 ？

一个 jsFiddle [http://jsfiddle.net/dymond/gUL9U/](http://jsfiddle.net/dymond/gUL9U/) <-- 运行应用程序两次，你就会看到问题。

```
function dicesides_func(nr){
    // go to dice-window-wrapper again
    // this could be put in a seporate functon
    var elementToAddDice=" dice-window-wrapper ",
    obj=this, // using this here that's why it's called wiht
    dice,i=0,total=0; // all the dice in this dice window
    // dicesides_func.call to set the right this context
    if(nr)
    {
        while((" "+obj.className+" ").indexOf(elementToAddDice)==-1){
            obj=obj.parentNode;
        }
        obj=obj.getElementsByTagName("ul")[2];
        var dicessides = createElementWithClass('li',nr);
        obj.appendChild(dicessides);
        // calculate total (can do in a seporate function)

        dice = obj.getElementsByTagName("li");
    }
    else
    {
        dice = document.getElementsByClassName("dice");   
    }
    for(i=0;i<dice.length;i++){
        total=total+getNumberForClass(dice[i].className);
    }
    //alert(total);

    var wrapper = document.getElementsByClassName("dice-toolbar-counter-wrapper")[0];

    while (wrapper.hasChildNodes()) {
        wrapper.removeChild(wrapper.lastChild);
    }

    var ttl = total.toString();
    var arr = [];
    for (var i = 0;i<ttl.length;i++) {
        var digit = ttl[i];
        var newelem = createElementWithClass('li',"side-" + ttl[i]);
        //alert(dice_toolbar_counter_wrapper_Li)
        wrapper.appendChild(newelem);
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:09:06.107

试试这个代码：Main.js

```
function pageWrap(){
    /* --------DIV TAGGAR MED CLASS -------- */

    var outerDiv = createElementWithClass('div', 'dice-window-wrapper'),
    innerDiv = createElementWithClass('div', 'dice-menubar-wrapper');
    outerDiv.appendChild(innerDiv);
    document.getElementById("page-content-wrapper").appendChild(outerDiv);

    var dice_windows_wrapper_close = createElementWithClass('div', 'close');
    innerDiv.appendChild(dice_windows_wrapper_close);

    var dice_toolbar_wrapper_close = createElementWithClass('div', 'dice-toolbar-wrapper');
    outerDiv.appendChild(dice_toolbar_wrapper_close);

    var add_remove_roll = createElementWithOutClass('ul');
    dice_toolbar_wrapper_close.appendChild(add_remove_roll);

    var dice_content_wrapper = createElementWithClass('div', 'dice-content-wrapper');
    outerDiv.appendChild(dice_content_wrapper);

    var dice_toolbar_counter_wrapper_Ul = createElementWithClass('ul', 'dice-toolbar-counter-wrapper');
    dice_toolbar_wrapper_close.appendChild(dice_toolbar_counter_wrapper_Ul);

    add_remove_roll_func("add","remove","roll");

    var lielement = createElementWithOutClass('li');
    add_remove_roll.appendChild(lielement);

    lielement.appendChild(dice_toolbar_counter_wrapper_Ul);

    /* <div class="dice-content-wrapper">*/  /*Visar tärningen som kastast*/
    var ul_dice_sides = createElementWithOutClass('ul');
    dice_content_wrapper.appendChild(ul_dice_sides);

    /*###CREATE ADD_REMOVE_ROLL DICES ###*/
    function add_remove_roll_func(){
        for (var i = 0; i<arguments.length; i++){
            li_dice_side_one = createElementWithClass('li',arguments[i]);
            add_remove_roll.appendChild(li_dice_side_one);

        }
    }

    /*ADD EVENT*/
    function AddEvent(){ 
        var AddEvent = "add"; 
        var addClass= document.getElementsByClassName(AddEvent); 
        addClass=addClass[addClass.length-1]; 
        addClass.addEventListener("click", addDiceEvent, true); 
        var diceArray = Array=[ 
        "dice dice-side-one", 
        "dice dice-side-two", 
        "dice dice-side-three", 
        "dice dice-side-four", 
        "dice dice-side-five", 
        "dice dice-side-six"]; 
        function addDiceEvent() { 
            var rand = diceArray[Math.floor(Math.random() * diceArray.length)];
            dicesides_func.call(addClass,rand);
           document.getElementById('mySound').play();
         }
    }
    AddEvent(); 
    /*ADD EVENT END*/               
    /*REMOVE DICE*/
    function RemoveEventDice(){ 
        var removeEvent = "remove"; 
        var removeClass= document.getElementsByClassName(removeEvent); 
        var remove=removeClass[removeClass.length-1]; 
        remove.addEventListener("click", removeDice, true); 

        function removeDice(e) { 
            var obj=e.target; 
            var elementToRemove=" dice-window-wrapper "; 
            while((" "+obj.className+" ").indexOf(elementToRemove)==-1){ 
                obj=obj.parentNode; 
            } 
            var allDiceInWindow=obj.getElementsByClassName("dice"); 
            var diceToRemove=allDiceInWindow[allDiceInWindow.length-1]; 
            diceToRemove.parentNode.removeChild(diceToRemove); 
            dicesides_func.call(remove);//dicesides_func();
        }

    }
    RemoveEventDice();
    /*REMOVE DICE END*/
    /*ROLL DICE*/
    function rollEvent(){ 
        var rollDices = "roll"; 
        var addClass= document.getElementsByClassName(rollDices); 
        addClass=addClass[addClass.length-1]; 
        addClass.addEventListener("click", rollDice, true); 
        var diceArray = Array=[ 
        "dice dice-side-one", 
        "dice dice-side-two", 
        "dice dice-side-three", 
        "dice dice-side-four", 
        "dice dice-side-five", 
        "dice dice-side-six"]; 
        function rollDice(e) { 
            var obj=e.target; 
            var elementToRemove = " dice-window-wrapper "; 
            while((" "+obj.className+" ").indexOf(elementToRemove)==-1){ 
                obj=obj.parentNode; 
            }
            var allDiceInWindow=obj.getElementsByClassName("dice"); 
            for(var i = 0; i<allDiceInWindow.length; i++){
                // set the name individually for each die
                var name = diceArray[Math.floor(Math.random() * diceArray.length)]; 
                allDiceInWindow[i].className = name;
            }
            dicesides_func.call(addClass);//dicesides_func();
        }   
    }
    rollEvent();
    /*END ROLL DICE*/

    function CloseEvent(){  /*BehÃ¶ver Ã¤ndras om index sidan Ã¤ndras*/
        var CloseEvent = "close"; 
        var addClassArr= document.getElementsByClassName(CloseEvent); 
        var addClass = addClassArr[addClassArr.length-1]; 
        addClass.addEventListener("click", closebutton, true); 
        function closebutton(e) { 
            var classToRemove = " "+"dice-window-wrapper"+" "; 
            var obj=e.target; 
            while((" "+obj.className+" ").indexOf(classToRemove)==-1){ 
                obj=obj.parentNode; 
            }        
            obj.parentNode.removeChild(obj); 
        }
    }

    CloseEvent();    
    movewrap();
} 
```

函数器.js

```
/*###CREATE ELEMENT WITH CLASS ###*/

function createElementWithClass(elementName, className)
{
    var el = document.createElement(elementName);
    el.className = className;
    return el;
}

/*###CREATE ELEMENT WITHOUT CLASS ###*/
function createElementWithOutClass(elementName)
{
    var el = document.createElement(elementName);
    return el;
}
/*###CREATE ELEMENT WITH ID ###*/
function createElementWithId(elementName, idName)
{
    var element = document.createElement(elementName);
    element.id = idName;
    return element;
}    

/* Funktionen som visar nya tabort och kasta tÃ¤rningarna ## END */

function getNumberForClass(className){
    var diceArray = Array=[ 
    "dice dice-side-one", 
    "dice dice-side-two", 
    "dice dice-side-three", 
    "dice dice-side-four", 
    "dice dice-side-five", 
    "dice dice-side-six"]; 
    return diceArray.indexOf(className)+1;
}

function dicesides_func(nr){
    var elementToAddDice=" dice-window-wrapper ", obj=this, dice,i=0,total=0;
        while((" "+obj.className+" ").indexOf(elementToAddDice)==-1){
            obj=obj.parentNode;
        }
        obj=obj.getElementsByTagName("ul")[2];
    if(nr){
        var dicessides = createElementWithClass('li',nr);
        obj.appendChild(dicessides);
        dice = obj.getElementsByTagName("li");
    }else{   
        dice = obj.getElementsByTagName("li");
    }

    for(i=0;i<dice.length;i++){
        total=total+getNumberForClass(dice[i].className);
    }

 //   console.log(obj.parentNode.parentNode.className.getElmentsByClassName[]);

    var wrapper = obj.parentNode.parentNode.getElementsByClassName("dice-toolbar-counter-wrapper")[0];
    while (wrapper.hasChildNodes()) {
        wrapper.removeChild(wrapper.lastChild);
    }
    var ttl = total.toString();
    for (var x = 0;x<ttl.length;x++) {
        var newelem = createElementWithClass('li',"side-" + ttl[x]);
        //alert(dice_toolbar_counter_wrapper_Li)
        wrapper.appendChild(newelem);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:49:15.177

选择合适的包装器，你应该没问题：也许在创建应用程序时使用全局计数器变量，以便以后知道你当前正在使用哪个应用程序？

本节选择第一个包装器：

```
var wrapper = document.getElementsByClassName("dice-toolbar-counter-wrapper")[0]; 
```

如果我将此 0 更改为 1 而不是我弄乱了应用程序 2 而不是 1，因为您实际上是在包装器数组中选择 [0] 键。

*顺便说一句！*

# javascript - 从多维数组javascript中删除带有0的行

> ID：14864765
> 
> 赞同：0
> 
> 时间：2013-02-13T22:50:34.603
> 
> 标签：javascript

我有两组数组，它​​们连接起来使其成为二维数组。我喜欢做的是在连接后删除任何价格为 0 值的行，然后排序降序并显示在 html 表中

```
 var desc = new Array();
    var desc = ["Water","Heating","Electric","Gas"];

    var price = new Array();
    var price=["824","325","0","245"];

    var sortdesc;
    var sortdesc = new Array (2);

    for (i = 0; i < desc . length; ++ i)
    {   
      for (var i=0; i < price.length; i++)
        {
                    sortdesc[i] = Array(desc[i], price[i]);
                    if (price[i] == 0 )  
                     {       
                     sortdesc.splice(i,1);

                  }  
              }
     }

    sortdesc.sort(function(a,b){ return b[1] - a[1]; });

    function sortedtable (array)
    {

        document . write("<table  border>");
        var row;
        for (row = 0; row < array . length; ++ row)
        {
        document . write(" <tr>");
        var col;
        for (col = 0; col < array [row].length; ++ col)
            document . write("  <td>" + array [row] [col] + "</td>");
        document . write(" </tr>");

        }

        document.write("</table>");
    }

    sortedtable(sortdesc); 
```

问题是我认为 .splice() 会重组数组我做错了什么？有没有更好的方法来做到这一点

我看到了其他问题，但他们都说使用 .splice() 而不是 delete.array[element] 但 .splice 对我不起作用

请原谅我的代码初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:15:28.080

`splice`成功地从数组中删除了该项目，但在下一个循环中，您将`sortdesc[i]`再次分配给，因此删除的索引将保留`undefined`- 您创建了一个稀疏数组。

除此之外，使用相同计数变量的嵌套循环存在很大问题。至少从 开始，它并没有以无限循环结束`price.length >= desc.length`，但是这个构造是非常值得怀疑的。

要解决您的问题，只需使用以下命令将新元素（并且仅当您真的想添加它们）添加到`sortdesc`数组的末尾`push()`：

```
// no need to double initialize
var desc = ["Water","Heating","Electric","Gas"];
var price = ["824","325","0","245"];

// the Array constructor does not take dimensions. You just want an empty array here
var sortdesc = [];

// … to fill it with other arrays:
for (var i = 0, l = Math.min(desc.length, price.length); i < l; i++) {
    if (price[i] != 0) {
        sortdesc.push( [desc[i], price[i]] );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:31:57.023

简短的回答 - 您不需要从数组中拼接/删除，只需事先检查，如果价格为零，则不要添加项目。

另一个快速评论 - 从您的数据来看， desc 和 price 数组的长度似乎相同。在这种情况下，您可以只使用一个 for 循环，无需遍历两个循环。

工作代码：

```
var desc = ["Water","Heating","Electric","Gas"];

var price = ["824","325","0","245"];

var sortdesc = [];

// Presuming both arrays with be the same length
for (i = 0; i < desc.length; ++ i) {
    if(price[i] !== "0") {
        sortdesc.push([desc[i], price[i]]);
    }
}

sortdesc.sort(function(a,b){ return b[1] - a[1]; });

function sortedtable (array)
{

    document . write("<table  border>");
    for (row = 0; row < array.length; ++ row)
    {
        document . write(" <tr>");
        for (col = 0; col < array[row].length; ++ col)
            document . write("  <td>" + array [row] [col] + "</td>");
        document . write(" </tr>");
    }

    document.write("</table>");
}

sortedtable(sortdesc); 
```

# c# - 具有“自创”属性的对象的自定义 JSON 序列化以无限循环结束

> ID：14864769
> 
> 赞同：2
> 
> 时间：2013-02-13T22:50:46.087
> 
> 标签：c#, json, cyclic-reference, serialization

在我正在处理的项目（在 C# 中）中，我必须使用还包含序列化对象方法的 JSON 表示。这就是我必须实现自己的序列化程序的原因。序列化器通过反射非常简单地实现。我的问题是它还必须能够处理具有与原始对象相同类型的“自创”属性的对象。

例子：

```
class ClassA  
{  
    private ClassA a;
    public ClassA A  
    {  
        get
        {
            if (a == null)
                a = new ClassA();
            return a;  
        }  
    }  
} 
```

每次我迭代 Properties 时，都会创建一个新对象 ( *a* )，这样序列化器就会以无限递归结束。

知道如何避免这种情况吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:38:48.850

创建一个属性来标记您不想在序列化期间触及的属性。仅序列化没有该属性的属性。

```
[AttributeUsage(AttributeTargets.Property)]
public class DoNotSerializeAttribute : Attribute
{
} 
```

用法：

```
class ClassA
{
    private ClassA a;

    [DoNotSerialize]
    public ClassA A
    {
        get
        {
            if (a == null)
                a = new ClassA();
            return a;
        }
    }
} 
```

当您确定要序列化的属性时：

```
var properties = theType.GetProperties()
     .Where(x => x.GetCustomAttributes(typeof (DoNotSerializeAttribute), true).Length == 0); 
```

* * *

如果您无法修改该类，则可以传入要排除的显式属性列表，例如：

```
PropertyInfo[] exclude = new[]{ typeof(ClassA).GetProperty("A") };    
var properties = typeof(ClassA).GetProperties().Except(exclude); 
```

# java - 启动相机而不询问结果

> ID：14864772
> 
> 赞同：0
> 
> 时间：2013-02-13T22:51:03.657
> 
> 标签：java, android, android-intent, camera

我正在寻找启动相机应用程序而不询问结果的意图。

我发现的唯一东西是 Camera.ACTION_NEW_PICTURE 但这只会拍一张照片，我想显示通常的相机应用程序，只是不想要它的结果！

有什么办法吗？

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

这基本上是相关代码，因为这个应用程序为 DashClock 提供了一个扩展，它使用一个服务，这可能只是一个挂起意图的包装器。但是，此代码会导致无限地让相机在按下“拍摄”时拍照，并在接受或返回按钮时崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:49:19.417

是的，试试这个：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivity(cameraIntent); 
```

# regex - 正则表达式在 Java 源文件中查找公共成员

> ID：14864776
> 
> 赞同：0
> 
> 时间：2013-02-13T22:51:19.367
> 
> 标签：regex, parsing

在基于 Java 构建的语言中（所以我不能使用常规解析器）我想解析几个源代码文件并提取以下信息：

*   公共（内部）类的名称和扩展/实现部分
*   公共方法声明

所以对于给定的文件

```
public class A extends B {

  private int foo
  public int getFoo() {
    ...
  }

  private class Inner1 {

  }

  public class Inner2 {

  }
} 
```

我想使用一个或多个正则表达式：

```
public class A extends B
public int getFoo()
public class Inner2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:54:07.260

让我知道这是否不够复杂，但它基本上会查找“public”，后跟一个空格，然后是不是左大括号的任何内容：

```
public\s[^{]+ 
```

输出如下：

![在此处输入图像描述](../Images/8d4804065822a5a4214e3715c3fc70b5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:56:40.987

您需要以任意数量的空格开头的行，然后是`public`，然后是一些空格，然后是一个单词字符：

`^\s*public\s+\w`

# sockets - 使用 Antlr 从永无止境的流中解析数据

> ID：14864777
> 
> 赞同：7
> 
> 时间：2013-02-13T22:51:24.017
> 
> 标签：sockets, stream, eof, antlr4

Antlr 是否适合在要解析的文本之后从没有 EOF 的流中解析数据？根据我的观察，词法分析器在收到下一个标记的第一个字符之前不会发出当前标记。最重要的是 - 解析器似乎不会发出规则，直到收到下一条规则的第一个令牌。这是我尝试过的一个简单语法：

```
fox: 'quick' 'brown' 'fox' '\r'? '\n' ; 
```

然后我将生成的解析器与 UnbufferedCharStream 和 UnbufferedTokenStream 一起使用：

```
 CharStream input = new UnbufferedCharStream(is);
  MyLexer lex = new MyLexer(input);
  lex.setTokenFactory(new CommonTokenFactory(true));
  TokenStream tokens = new UnbufferedTokenStream(lex);
  MyParser parser = new MyParser(tokens);
  MyParser.FoxContext fox = parser.fox(); 
```

当流变得“**快速**”时 - 没有任何反应。

当' **b** '进来-进入规则' *fox* '

然后是 ' **roun** ' - 什么都没有（流中有 2 个标记 - 还没有一个标记是 leser 的！）

只有在“ **f** ”之后，侦听器才访问第一个标记：“ *quick* ”

然后 - “**牛**”上什么都没有

在新行（unix）上：访问令牌'*棕色*'

现在流中包含所有数据（4 个标记），但只有 2 个标记被识别。

我发现为了通过系统推送这些标记，流可以发出 2 个标记，即语法已知的任何标记。它可能是 2 个额外的新行，或者我们说“**狐狸**”和“**棕色**”。只有这样标记“ **fox** ”和“ **\n** ”才被访问，解析器退出规则“ *fox* ”并完成解析。

这是一个错误还是一个功能？有没有办法消除这种滞后？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T03:58:55.007

ANTLR 4 书原本打算包含一个解析流输入的示例，但我反对它，因为使用自适应无限前瞻解析器将不可避免地产生严重的复杂性。

ANTLR 4 没有保证的前瞻界限（也没有办法告诉它寻找甚至尝试强制执行），因此任何在阻塞流上运行的实现都有可能在不返回有关导致该点的解析的信息的情况下死锁. 除非我首先看到一个中间缓冲区，否则我什至不会接受解析流输入的*可能性*。

1.  获取所有可用的（或以前未解析的）输入并将其放在 a`String`或`char[]`.
2.  为缓冲区创建一个`ANTLRInputStream`。
3.  尝试对这个流进行 lex/parse，它最后会有一个隐式的 EOF。

解析的结果将告诉您是放弃该点的结果，还是在有更多数据可用时保留它们以重试：

*   如果没有出现语法错误，则说明输入已成功解析，您可以在稍后可用时解析输入的下一部分。

*   如果在使用 EOF 令牌*之前*报告了语法错误，则实际输入中会出现语法错误，因此您需要处理它（将其报告给用户等）。

*   如果在使用 EOF 令牌时报告了语法错误，那么额外的输入可能会解决问题 - 忽略当前解析的结果，然后在输入流中有更多数据可用时重试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T07:21:06.063

我认为您正确使用了无缓冲流，您看到的是使用这些流的预期结果。但我想你可能对他们有期望，他们没有义务满足。

下面是我们用棍子戳的测试代码。我正在使用`System.in`输入，所以我修改了语法以说明单词标记之间的换行符。

### 流媒体.g

```
grammar Streaming;

fox   : 'quick' NL 'brown' NL 'fox' NL DONE NL;
DONE  : 'done';
NL    : '\r'? '\n'; 
```

### StreamingTest.java

```
import org.antlr.v4.runtime.CommonToken;
import org.antlr.v4.runtime.CommonTokenFactory;
import org.antlr.v4.runtime.Token;
import org.antlr.v4.runtime.UnbufferedCharStream;
import org.antlr.v4.runtime.UnbufferedTokenStream;
import org.antlr.v4.runtime.tree.TerminalNode;

public class StreamingTest {
    public static void main(String[] args) throws Exception {
        lex();
        parse();
    }

    private static void lex() {
        System.out.println("-> Reading from lexer:");
        UnbufferedCharStream input = new UnbufferedCharStream(System.in);
        StreamingLexer lexer = new StreamingLexer(input);
        lexer.setTokenFactory(new CommonTokenFactory(true));

        Token t;

        //read each token until hitting input "done"
        while ((t = lexer.nextToken()).getType() != StreamingLexer.DONE){
            if (t.getText().trim().length() == 0){
                System.out.println("-> " + StreamingLexer.tokenNames[t.getType()]);
            } else { 
                System.out.println("-> " + t.getText());
            }
        }
    }

    private static void parse() {
        System.out.println("-> Reading from parser:");
        UnbufferedCharStream input = new UnbufferedCharStream(System.in);
        StreamingLexer lexer = new StreamingLexer(input);
        lexer.setTokenFactory(new CommonTokenFactory(true));

        StreamingParser parser = new StreamingParser(new UnbufferedTokenStream<CommonToken>(lexer));
        parser.addParseListener(new StreamingBaseListener(){
            @Override
            public void visitTerminal(TerminalNode t) {
                if (t.getText().trim().length() == 0){
                    System.out.println("-> " + StreamingLexer.tokenNames[t.getSymbol().getType()]);
                } else { 
                    System.out.println("-> " + t.getText());
                }
            }
        });

        parser.fox();
    }
} 
```

下面是输入和输出的混合，因为它们在上述程序中的词法分析器和解析器中提供/接收。每行输出都带有前缀`->`。我会解释为什么事情是在那之后的样子。

### 输入输出

```
-> Reading from lexer:
quick
-> quick
brown
-> NL
-> brown
fox
-> NL
-> fox
done
-> NL
-> Reading from parser:
quick
brown
-> quick
-> NL
fox
-> brown
-> NL
done
-> fox
-> NL

-> done

-> NL 
```

我注意到的第一件事是词法分析器立即收到`quick` `NL`输入，但只为`quick`. 这种差异的原因是`UnbufferedCharStream`提前读取了一个字符（即使它`NL`为我准备了一个非常好的令牌！），因为它不会位于一个空的预读字符缓冲区中。唉，未缓冲的流被缓冲了。根据类本身的 Javadoc 注释：

> 这里的“无缓冲”是指它不缓冲所有数据，而不是按需加载char。

这种额外的读取转化为在流上等待更多输入，这解释了为什么词法分析器对于其余输入来说是一个标记。

现在转到解析器。为什么它落后于词法分析器的两个标记？简单：因为`UnbufferedTokenStream`也不会坐在空的前瞻缓冲区上。但是它不能创建下一个标记，直到 a) 它有一个来自词法分析器的备用标记和 b) 词法分析器`UnbufferedCharStream`读取它自己的前瞻字符。实际上，它是词法分析器的单字符“滞后”加上单标记“滞后”。

看来，在 ANTLR v4 中获得“无延迟”的按需数据流意味着自己编写。但在我看来，现有的流按预期工作。

* * *

> Antlr 是否适合在要解析的文本之后从没有 EOF 的流中解析数据？

我还不能对 ANTLR 4 充满信心地回答这个问题。编写一个在需要之前不会提前缓冲的令牌流似乎很容易（覆盖`UnbufferedTokenStream`'s`consume`以跳过调用`sync`），但是无论任何人的缓冲如何，这些字符流都会被自己提前读取的类调用。或者看起来是这样。我会尽我所能继续深入研究，但这可能需要学习官方的方法来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T03:19:35.823

显然问题的根源不在 Unbuffered*Streams 中。它在解释器中，例如 LexerATNSimulator.execATN() 方法。**该方法将词法分析器解释为状态机，一旦next**的第一个字符从一个标签移动到另一个标签**标签被消费。ParserATNSimulator 中使用了类似的算法，它处理 Lexer 识别的令牌。这就是造成双重滞后的原因。所以，现在我非常有信心现在实现的 Antlr 4 不能用于解析连续的交互式数据。与 Flex/Bison 不同，其中词法分析器在最后一个字符可能与标签匹配时立即返回标签。结果 - parse() 函数在匹配语法的数据部分到达时结束。这提供了读取确切数据量的很好的能力，当大小没有另外定义时，由数据结构确定。**

# javascript - Document.addEventListener "this" 上下文

> ID：14864780
> 
> 赞同：1
> 
> 时间：2013-02-13T22:51:35.947
> 
> 标签：javascript, coffeescript, dom-events

我正在编写一个简单的 CoffeeScript 类，但我遇到了这段代码的上下文问题：

```
class DragDrop
constructor: (@selector, @bodyDragEnterClass = "drag-over") ->
    @attachEventHandlers()

attachEventHandlers: () ->
    document.write(@bodyDragEnterClass) # this line tells me, that @bodyDragEnterClass is "drag-over"
    document.addEventListener("dragenter", @onDragEnter, false)

onDragEnter: () ->
    document.write(@bodyDragEnterClass) # this line tells me, that @bodyDragEnterClass is undefined
    jQuery("body").addClass(@bodyDragEnterClass)

window.DragDrop = DragDrop 
```

调用该`attachEventHandlers`方法时，`@bodyDragEnterClass`将按预期设置为“拖动”。但是，当`dragenter`事件被触发并`onDragEnter`调用方法时，它`@bodyDragEnterClass`是“未定义的”。

我在这里创建了一个 jsfiddle 来演示上下文问题：http: [//jsfiddle.net/SVvrM/](http://jsfiddle.net/SVvrM/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:04:16.610

CoffeeScript中的“[胖箭头](http://coffeescript.org/#fat_arrow)”有一个经典案例。

您需要`this`在不同上下文中执行的回调中访问您的 DragDrop 值。使用胖箭头会将当前值绑定`this`到您的`onDragEnter`函数：

```
# "fat arrow" function binding
onDragEnter: () =>
  document.write(@bodyDragEnterClass) # this line tells me, that @bodyDragEnterClass is undefined
  jQuery("body").addClass(@bodyDragEnterClass) 
```

# mongodb - MongoDB Catch-22 不会让我放弃大量收藏

> ID：14864785
> 
> 赞同：1
> 
> 时间：2013-02-13T22:51:49.993
> 
> 标签：mongodb, mongodb-shell

所以我有一个 2TB 硬盘，在 1 个 mongoDB 中有 2 个集合。

*   Collection 1 大约 500gb 并且是必不可少的
*   Collection 2 大约 1500gb，需要删除。

我正在运行一个意外填满整个 HDD 的进程，留下 0% 的空间。除了 Linux Distro 和这个 mongoDB 之外，机器上几乎没有任何东西。

*   我想删除集合 2。

为了做到这一点，我通常会进入 mongo 并输入`db.collection.drop()`

但是，mongoDB 当前没有运行。为了启动它，我正在使用：

*   `[bobby@myPC bin]# ./mongod --dbpath /home/mongo &`

但是，由于 HDD 上没有空间，因此返回：

```
[bobby@myPC bin]# Thu Feb 14 17:47:10 [initandlisten] MongoDB starting : pid=1264 port=27017 dbpath=/home/mongo 64-bit host=localhost.localdomain
Thu Feb 14 17:47:10 [initandlisten] db version v2.2.3, pdfile version 4.5
Thu Feb 14 17:47:10 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
Thu Feb 14 17:47:10 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Thu Feb 14 17:47:10 [initandlisten] options: { dbpath: "/home/mongo" }
Thu Feb 14 17:47:10 [initandlisten] journal dir=/home/mongo/journal
Thu Feb 14 17:47:10 [initandlisten] recover : no journal files present, no recovery needed
Thu Feb 14 17:47:10 [initandlisten]
Thu Feb 14 17:47:10 [initandlisten] ERROR: Insufficient free space for journal files
Thu Feb 14 17:47:10 [initandlisten] Please make at least 3379MB available in /home/mongo/journal or use --smallfiles
Thu Feb 14 17:47:10 [initandlisten]
Thu Feb 14 17:47:10 [initandlisten] exception in initAndListen: 15926 Insufficient free space for journals, terminating
Thu Feb 14 17:47:10 dbexit:
Thu Feb 14 17:47:10 [initandlisten] shutdown: going to close listening sockets...
Thu Feb 14 17:47:10 [initandlisten] shutdown: going to flush diaglog...
Thu Feb 14 17:47:10 [initandlisten] shutdown: going to close sockets...
Thu Feb 14 17:47:10 [initandlisten] shutdown: waiting for fs preallocator...
Thu Feb 14 17:47:10 [initandlisten] shutdown: lock for final commit...
Thu Feb 14 17:47:10 [initandlisten] shutdown: final commit...
Thu Feb 14 17:47:10 [initandlisten] shutdown: closing all files...
Thu Feb 14 17:47:10 [initandlisten] closeAllFiles() finished
Thu Feb 14 17:47:10 [initandlisten] journalCleanup...
Thu Feb 14 17:47:10 [initandlisten] removeJournalFiles
Thu Feb 14 17:47:10 [initandlisten] shutdown: removing fs lock...
Thu Feb 14 17:47:10 dbexit: really exiting now 
```

我无法删除此集合，因为没有空间。而且没有空间，因为我无法删除此集合。

我怎样才能解决这个问题？有什么方法可以识别 /home/mongo 我可以取出哪些 mongoDB 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:49:20.440

根据错误消息，它抱怨没有足够的空间放置日志。在没有日志的情况下在生产环境中运行并不理想，但您可以在解决问题时尝试从它开始。

`./mongod --nojournal --dbpath /home/mongo &`

**编辑**：为了回答你的问题，mongo 为每个数据库创建和分配文件，而不是集合。因此，您将无法针对特定文件来删除集合。

# c++ - 错误 C2065：“CR_HASTE_MELEE”：未声明的标识符

> ID：14864790
> 
> 赞同：0
> 
> 时间：2013-02-13T22:52:02.520
> 
> 标签：c++

我在将枚举从一个头文件引用到另一个时遇到问题。

我有“ **Unit.h** ”，其中包含：

```
enum CombatRating
{
    CR_HASTE_MELEE              = 17,
    CR_HASTE_RANGED             = 18,
    CR_HASTE_SPELL              = 19,
}; 
```

然后是“ **Object.h** ”，其中包含：

```
 void ApplyPercentModFloatValue(uint16 index, float val, bool apply)
    {
        float value = GetFloatValue(index);
        ApplyPercentModFloatVar(value, val, apply);
            if (apply && index == CR_HASTE_MELEE && value > 130.86f)
                value = 130.86f;
        SetFloatValue(index, value);
    } 
```

当我构建我的项目时，我收到“错误 C2065：'CR_HASTE_MELEE'：未声明的标识符”。我尝试在“Object.h”中包含“Unit.h”，但这也给了我很多错误。

有没有办法跨头文件引用枚举，以便可以将百分比应用于“CR_HASTE_MELEE”？

谢谢

# ruby - 如何检查类是否正确实例化

> ID：14864793
> 
> 赞同：1
> 
> 时间：2013-02-13T22:52:19.577
> 
> 标签：ruby, oop, testing

假设我有一堂课：

```
class Product
  def initialize(v)
    @var = v
  end
end 
```

我想用 RSpec 测试类的实例化是否正常。应该在课堂或单元测试中进行测试，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:04:33.277

如果您的初始化程序如此简单，那么不值得对其进行测试。另一方面，如果您要在初始化程序中添加一些参数检查或其他逻辑，那么测试它可能是一个好主意。

大多数情况下，这种情况下的良好做法是在参数错误时引发 IllegalArgumentError。在这种情况下，您只需确保初始化对象确实（或没有）引发错误。

如果您正在做更复杂的事情，您可能需要检查实例变量的值。我不认为 using`attr_reader`是一个好主意，因为我认为更改类实现以进行测试是一个坏主意。相反，我会用它`#instance_variable_get`来读取变量。

```
class Foo
  def initialize(mandatory_param, optional_param = nil)
    raise IllegalArgumentError.new("param cannot be #{param}") if mandatory_param == 42
    @var1 = mandatory_param
    @var2 = optional_param unless param.is_a? String
  end
end

describe Foo do
  it "should not accept 42 as an argument" do
    expect { Foo.new(42, 'hello') }.to raise_error(IllegalArgumentError)
  end

  it "should set var2 properly if it's not a String" do
    f = Foo.new('hello', 1)
    f.instance_variable_get(:@var2).should eq 1
  end

  it "should not set var2 if it's a String" do
    f = Foo.new('hello', 'world')
    f.instance_variable_get(:@var2).should be_nil
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:55:14.610

您需要向该类添加一个 attr_reader，以便通过 RSpec、Test::Unit、Minitest 或其他任何方式验证其状态。但是，您所说的基本上是测试 Ruby 作为一种语言是否正常工作，这确实不是您需要关心的事情。

# jquery - jQuery 从不让 img 离开包含 div 视口的边缘

> ID：14864797
> 
> 赞同：0
> 
> 时间：2013-02-13T22:52:31.257
> 
> 标签：jquery, math

小提琴示例：http: [//jsfiddle.net/wmnWc/5/](http://jsfiddle.net/wmnWc/5/)

调整视口窗口的大小以查看我想要实现的目标。

正如您在我的代码中看到的那样，我已经将容器高度设置为最小高度值到表单容器的外部高度。这是因为我希望能够滚动到表单的自然高度，仍然保持背景图像可见。

我还需要图像始终保持其自然比例。正如你所看到的，这是我试图做的。

样品图片尺寸：

*   宽度：2560 像素
*   高度：1709 像素

**代码**：

```
$(window).bind("resize.browsersize", function () {

    var viewportHeight = $(window).height(),
        viewportWidth = $(window).width(),
        loginHeight = $('#login').outerHeight(),
        containerHeight = $('.background-photo').height(),
        containerWidth = $('.background-photo').width(),
        ratioHeight = 1,
        ratioWidth = 1.497;

    $(".background-photo").css({
        'width': viewportWidth + 'px',
        'height': viewportHeight + 'px',
        'min-height': loginHeight + 'px'
    });

    if (containerHeight > containerWidth) {

        $(".background-photo img").css({
            'height': containerHeight + 'px',
            'width': containerHeight * ratioWidth + 'px',
            'max-width': containerHeight * ratioWidth + 'px'
        });

    } else if (containerWidth > containerHeight) {

        $(".background-photo img").css({
            'width': containerWidth + 'px',
            'height': 'auto',
            'max-width': containerWidth + 'px'
        });

    }

}).trigger("resize.browsersize"); 
```

提前致谢。

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:58:11.737

有什么理由不能使用`background-size: cover`吗？

```
html { 
    background: url('http://www.motocomdigital.co.uk/login-background.jpg') no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

见：http: [//jsfiddle.net/wmnWc/7/](http://jsfiddle.net/wmnWc/7/)

工作于：

```
Safari 3+
Chrome Whatever+
IE 9+
Opera 10+ (Opera 9.5 supported background-size but not the keywords)
Firefox 3.6+ (Firefox 4 supports non-vendor prefixed version) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:58:23.303

为什么不保持简单？

```
.background-photo { position:absolute; top:0; left:0; width:100%; height:100%; z-index:-1; overflow:hidden; }
img { max-width:100%; /*min-width:600px;*/ }

$(document).ready(function(){
    var imgRatio;
    $("img").load(function(){
        var $i = $(this);
        imgRatio = $i.width()/$i.height();
        var $w = $(window);
        $w.on("resize",function(){
            $i.css("min-width",$w.height() * imgRatio);
        }).resize();
    });
}); 
```

[http://jsfiddle.net/wmnWc/10/](http://jsfiddle.net/wmnWc/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:18:00.230

此代码片段将帮助您：我设置了一个垂直填充浏览器窗口的最小高度，并设置了一个水平填充它的 100% 宽度。然后设置图像宽度的最小宽度，以便图像不会小于它的大小。这更容易并且没有js。

```
.background-photo img {
    min-height: 100%;
    min-width: xxxxpx;/* image width */

    /* Set up proportionate scaling */
    width: 100%;
    height: auto;

    /* Set up positioning */
    position: fixed;
    top: 0;
    left: 0;
} 
```

# c++ - C ++将结构传递给函数

> ID：14864802
> 
> 赞同：0
> 
> 时间：2013-02-13T22:52:47.267
> 
> 标签：c++, oop

我正在尝试将结构传递给我的函数，但我无法弄清楚。我有下面的代码

```
struct box
{
char sMaker[40]; 
float fHeight;  //The height of the box
float fWidth;   //The width of the box
float fLength;  //The length of the box
float fVolume;  //The volume of the box
}; //end box

void calcVolume (box *p)
{
p‐&gt;fVolume = p‐&gt;fWidth * p‐&gt;fHeight * p->fLength;
} //end calcVolume 
```

它返回 p- 是一个未声明的标识符的错误。我对c ++真的很陌生，为什么不编译。

太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:56:08.250

`-`使用`emacs`'s查看您的破折号 ( ) 之一`describe-char`：

```
preferred charset: unicode (Unicode (ISO10646))
code point in charset: 0x2010
name: HYPHEN
general-category: Pd (Punctuation, Dash) 
```

将它们全部替换为减号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:55:52.743

检查您的源文件是否为纯 ASCII。在我看来，您正在使用一些扩展的 unicode 字符代替“减号”符号“-”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T22:55:39.997

错误可能在调用 calcVolume 的代码中（或完全在其他地方）。你需要这样称呼它：

```
box b;
calcVolume(&b); 
```

编辑：没关系，真正的错误是连字符 (‐) 而不是减号 (-)。

# django - “类别”未在 Python Django 中定义关键字

> ID：14864804
> 
> 赞同：0
> 
> 时间：2013-02-13T22:52:49.167
> 
> 标签：django

所以我正在关注 Jacob Kaplan-Moss 的 Django 入门教程，他要求在`models.py`

```
from django.db import models

class Package(models.Model):
    name        = models.CharField(max_length=300)
    version     = models.CharField(max_length=300,
                               blank=True)
    home_page   = models.URLField(blank=True)
    summary     = models.TextField()
    description = models.TextField(blank=True)
    keyboards   = models.TextField(blank=True)
    categories  = models.ManyToManyField(Category,
                             related_name="packages") 
```

但是，当我运行时`manage.py validate`，它指出“类别”无法识别。我只是不知道他到底想做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:56:05.537

类别应该是另一个类。例如

```
class Category(models.Model):
    name = models.CharField(max_length=300) 
```

# python - Python列表插入函数和数据类型问题

> ID：14864812
> 
> 赞同：2
> 
> 时间：2013-02-13T22:53:01.727
> 
> 标签：python, list, numpy, insert, type-conversion

我遇到了问题，我认为原因是由于插入功能的性质。文档说插入是这样工作的：

```
list.insert(index, object) 
```

这里的重点是“对象”。为了执行适用于值的 if 语句，我将原始列表转换为数组。该数组的数据类型由 python 自动计算如下：

```
In [25]: MinorTrendTypeArr.dtype
Out[25]: dtype('int64') 
```

但是在列表中插入所需的项目后

```
MinorTrendType 
```

新阵列，

```
MinorTrendTypeArr2 
```

如前所述，这一定是因为插入函数将对象项添加到列表中的方法。有数据类型

```
In [25]: MinorTrendTypeArr2.dtype
Out[25]: dtype('object') 
```

尝试转换时收到以下错误进一步证明了这一点

```
MinorTrendType 
```

变量到新数组中。

```
In [27]: run triptrade.py
This is the length of MinorTrendType the first time = 12356
This is the length of MinorTrendType after adding plustwos elements = 13179
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/usr/lib/python2.7/dist-packages/IPython/utils/py3compat.pyc in execfile(fname, *where)
    173             else:
    174                 filename = fname
--> 175             __builtin__.execfile(filename, *where)

/home/kane/tripkane_python/triptrade.py in <module>()
    579 
    580 MinorTrendArr2 = np.array(MinorTrend, dtype = np.int64)
--> 581 MinorTrendTypeArr2 = np.array(MinorTrendType, dtype = np.int64)
    582 
    583 

ValueError: setting an array element with a sequence. 
```

但是在没有输入外部值的变量中不会出现同样的问题。我认为可能有更好的做事方式，但我目前正在利用我非常有限的知识来取得进展。任何帮助，替代方案的建议都将受到欢迎。注意：我不能在一个循环中输入所有必需的值，因为输入项​​目会改变列表的长度，除非如上所述有更简单的解决方法。

提前致谢，

凯恩

```
for n in range(0, len(MinorTrendType)):

    if MinorTrendTypeArr[n] == 2:
        plustwos.append(n)

pl = []
mi = []

PS1 = len(MinorTrendType)
print "This is the length of MinorTrendType the first time = %d" %PS1

for n in range(0, len(plustwos)):
    bbgun = plustwos[n] + len(plustwos[0:n])
    pl.append(bbgun)
    MinorTrendType.insert(pl[n], 22)
    MinorTrend.insert(pl[n], MinorTrend[pl[n]])

PS2 = len(MinorTrendType)
print "This is the length of MinorTrendType after adding plustwos elements = %d" %PS2

MinorTrendArr2 = np.array(MinorTrend, dtype = np.int64)
MinorTrendTypeArr2 = np.array(MinorTrendType, dtype = np.int64) 
```

更新/编辑：

```
MinorTrendType 
```

是一个整数列表，如下所示： MinorTrendType = [1,0,-1,1,0,-1,2,-1,1,-1,0,0,0,2,1,0,0,- 1,2,1,0,-2…………]

```
MinorTrend 
```

是存在 MinorTrendType 值的索引列表（这些只是满足某些条件）。我想要实现的只是在 MinorTrendType 中每次出现 2 和 -2 值时插入标记，并在 MinorTrend 中的相应位置重复索引值我尝试在循环中使用 map(i, x) int(MinorTrendType[n])并列出和列出理解没有成功。我希望这能让事情更清楚。我不在乎它是如何完成的，只想实现它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:22.307

哈利路亚！解决方案在于 MinorTrendArr2.dtype = 'object' 而不是我怀疑的 'int64' 。解决方案在于以下循环：

```
for n in range(0, len(plustwos)):
bbgun = plustwos[n] + len(plustwos[0:n])
pl.append(bbgun)
MinorTrendType.insert(pl[n], 22)
MinorTrend.insert(pl[n], MinorTrend[pl[n]]) 
```

这应该是：

```
for n in range(0, len(plustwos)):
bbgun = plustwos[n] + len(plustwos[0:n])
pl.append(bbgun)
MinorTrendType.insert(pl[n], [22])
MinorTrend.insert(pl[n], MinorTrend[pl[n]]) 
```

唯一的区别是插入到列表中的对象周围有 [ ]。然后 python 假定数组 MinorTrendArr2 是 'int64' 而不是 object 并允许正确计算下一个 if 语句:)

干杯

# java - 如何使用 Java 动态数组

> ID：14864815
> 
> 赞同：0
> 
> 时间：2013-02-13T22:53:13.033
> 
> 标签：java, arrays, dynamic

我目前正在学习 Java 编程课程，我们正在讨论动态数组的主题。我们被要求编写一个使用动态数组的程序来打印出斐波那契数列。

这就是我所拥有的：

```
public class Fibonacci {
    private static int[] data;

    public static void DynamicArray() {
        data = new int[1];
    }

    public static int get(int position) {
        if (position >= data.length){
            return 0;
        } else {
            return data[position];
        }
    }

    public static void put(int position, int value) {
        if(position >= data.length) {
            int newSize = 2 * position;
            int[] newData = new int[newSize];
            System.arraycopy(data, 0, newData, 0, data.length);
            data = newData;
        }
        data[position] = value;
    }

    public static void main(String[] args) {
        System.out.println("\nFibonacci Sequence:\n");
        System.out.println(data[0]);
        for(int i = 2; i< = 20; i++) {
            data[i] = data[i-1] + data[i-2];
            System.out.println(data[i]);
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-22T12:30:00.350

数组是静态的，因为您使用大小创建它。对于动态，使用 ArrayList。ArrayList 也是一个数组。ArrayList 的默认大小为 10，当达到总大小的 75% 时增长 25%（总大小）。但是它很慢，因为当 ArrayList 达到 75%size 时，java 会创建一个新的 Array 并将数据复制到内存中的新数组。您可以使用 LinkedList，读写数据比 ArrayList 更快，用于读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:32:18.277

在 Java 中，数组是静态的。一旦它们被初始化，它们就不能“增长”。有几种数据结构可以解决这个问题（例如链表）。

如果要调整数组的大小，则必须创建一个具有所需大小的新数组，然后将旧数组中的所有条目复制到新数组中。Java 对这种“动态数组”的实现是 ArrayList。然而这不是很快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T12:14:18.447

```
 while (sequence<4000000)
            {
                   i++;
                   sequence = fibonacciSequence[0]+fibonacciSequence[1];
                   System.out.println(sequence);
                   if (i%2!=0)
                   {
                     fibonacciSequence[0]=sequence;  
                   }
                   else
                   {
                     fibonacciSequence[1]=sequence;  
                   }
                   if (sequence%2==0)
                   {
                    sumEvenTerm = sumEvenTerm + sequence; 
                   }
             } 
```

@Randy 在这里感谢您的回答。在这种情况下，我们确实知道斐波那契数列的长度。在某些情况下，我们不知道长度。我们所知道的是某个斐波那契数的值。我们不能使用上面的程序。

您可以更改 while 循环中的值以满足您的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:30:18.630

我必须做同样的事情别担心它会简单得多然后你让它看看我有你想要的代码

```
 import java.util.Scanner;

        public class DynamicArray
        {
            public static void

d main (String[] args){
        System.out.println("How Long Do You Want To see the Fibonacci Series?");
        Scanner scan = new Scanner (System.in);
        int Length = scan.nextInt();

            int[] Fibonacci = new int[Length];
            Fibonacci[0] = 0;
            Fibonacci[1] = 1;
            System.out.println("Fibonacci Series");

            System.out.println(Fibonacci[0]);

            for (int i = 2; i<Length; i++){
                Fibonacci[i]=Fibonacci[i-2]+Fibonacci[i-1];

        System.out.println(Fibonacci[i]);

            }
        }
    } 
```

所以这里发生的事情是，我声明的长度变量是由用户输入的，它决定了数组将打印多远的斐波那契数列，一旦你知道你要做什么，它就相当简单了。所以这就是你所需要的，因为这是你的老师想要的，希望对你有所帮助。:D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T23:10:21.173

如果您使用 .push() 方法，它是否算作动态数组？如果没问题，您可以只计算斐波那契数列中的下一个数字并使用 MyArray.push(currentFibonacci);

# c++ - 套接字关闭但会话引用未正确销毁

> ID：14864817
> 
> 赞同：1
> 
> 时间：2013-02-13T22:53:15.537
> 
> 标签：c++, boost, boost-asio

我正在使用`boost::asio`. 有一个带有 X 线程的池，使用异步读写（基于[此](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3)示例）。

服务器结构看起来是这样的：

### 服务器

管理程序的线程并开始`async_accept`为每个新客户端创建新会话。

### 会议

代表客户端本身。拥有`socket`ref 并管理她（客户）的`async_read`s 和s。还有超时管理。`async_write``socket`

* * *

有时客户端（硬件设备）冻结，我的服务器没有他的回答。为了解决这个问题，我阅读了有关使用`async_wait`with `deadline_timer`（如[this example](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/examples.html#boost_asio.examples.timeouts)）的信息，并将其应用于我的软件，但发生了一些奇怪的事情：

当发生正常断开连接时，`async`操作被取消（达到 operation_aborted 错误）并且`Session`对象被销毁。但是当设备冻结时，套接字会关闭，但会话对象不会被破坏，并且他的实例仍保留在内存中，即使是`socket.close()`已经调用的也是如此。

我简化了代码并放在下面：

### 服务器.h

```
 class Server
    {
    private:
        boost::asio::io_service& _io_service;
        boost::asio::ip::tcp::acceptor* _acceptor;
        boost::asio::ip::tcp::endpoint* _endpoint;

        boost::asio::signal_set _signals;

        Session_SP _session;
    public:
        Server(boost::asio::io_service& io_service);
        ~Server();

        /**
         * Queues async accept action.
         */
        virtual void queueAccept();

        /**
         * Async accept handler.
         */
        virtual void handleAccept(const boost::system::error_code& error);

        /**
         * Start the server
         */
        virtual void run();

        boost::asio::io_service& getIOService();

        /**
         * Shutdown the service
         */
        virtual void shutdown();
    }; 
```

### 服务器.cpp

```
#include "server.hpp"

Server::Server(boost::asio::io_service& io_service):
    _io_service(io_service), _signals(io_service)
{
    this->_endpoint = new boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), config.getServer().port);

    this->_acceptor = new boost::asio::ip::tcp::acceptor(io_service);

    this->_acceptor->open(boost::asio::ip::tcp::v4());
    this->_acceptor->bind(*this->_endpoint);
    this->_acceptor->listen();

    this->_signals.add(SIGINT);
    this->_signals.add(SIGTERM);
#if defined(SIGQUIT)
    this->_signals_.add(SIGQUIT);
#endif // defined(SIGQUIT)

    this->_signals.async_wait(boost::bind(&Server::shutdown, this));

    this->queueAccept();
}

Server::~Server()
{
    delete this->_acceptor;
    delete this->_endpoint;
}

void Server::queueAccept()
{
    this->_session.reset(new Session(*this));

    _acceptor->async_accept(
        this->_session->getSocket(),
        boost::bind(
            &Server::handleAccept,
            this,
            boost::asio::placeholders::error
        )
    );
}

void Server::handleAccept(const boost::system::error_code& error)
{
    if (!error)
        this->_session->start();

    this->queueAccept();
}

boost::asio::io_service& Server::getIOService()
{
    return this->_io_service;
}

void Server::shutdown()
{
    this->_io_service.stop();
} 
```

### 会话.h

```
 class Session:
        public boost::enable_shared_from_this<Session>
    {
    public:
        Session(Server& server);
        ~Session();

        bool stopped() const;

        virtual void start();

        virtual boost::asio::ip::tcp::socket& getSocket();

        virtual void disconnect();

        /**
         * Async read handler
         */
        void handleRead(const boost::system::error_code& error, size_t bytesTransfered);

        /**
         * Async write handler
         */
        void handleWrite(const boost::system::error_code& error);

        /**
         * Queues write action.
         */
        void queueWrite();

        /**
         * Push a packet to be sent on queue end
         */
        void pushPacket(protocols::SendPacket &packet);

        void handleDeadlineAsyncWait(boost::asio::deadline_timer* deadline);

        void handleDeadlineAsyncWaitKillConnection(boost::asio::deadline_timer* deadline);

    private:
        Server& _server;

        boost::asio::ip::tcp::socket _socket;

        boost::asio::io_service* _ioService;

        boost::asio::io_service::strand _strand;

        boost::asio::deadline_timer _input_deadline;

        boost::asio::deadline_timer _non_empty_output_queue;

        /**
         * Queue that stores the packet to be sent.
         */
        protocols::SendPacketQueue _writeQueue;

        /**
         * Referência do pacote que será atualizado.
         */
        Protocol* _protocol;

        /**
         * Queues the async_read acction.
         */
        virtual void queueRead();

        virtual void _pushPacket(protocols::SendPacket &packet);
    };

    typedef boost::shared_ptr<Session> Session_SP; 
```

### 会话.cpp

```
#include "session.hpp"

Session::Session(Server& server):
    _server(server), _socket(server.getIOService()), _protocol(NULL),
    _ioService(&server.getIOService()), _strand(server.getIOService()),
    _input_deadline(server.getIOService()),
    _non_empty_output_queue(server.getIOService())
{

    this->_input_deadline.expires_at(boost::posix_time::pos_infin);
    this->_non_empty_output_queue.expires_at(boost::posix_time::pos_infin);
}

Session::~Session()
{
}

bool Session::stopped() const
{
    return !_socket.is_open();
}

boost::asio::ip::tcp::socket& Session::getSocket()
{
    return this->_socket;
}

void Session::disconnect()
{
    this->_input_deadline.cancel();
    this->_non_empty_output_queue.cancel();
    try
    {
        this->getSocket().close();
        LOG("Session::disconnect : close successful!");
    }
    catch (void* e)
    {
        // Never reached here!!
    }
}

void Session::queueRead()
{
    this->_input_deadline.expires_from_now(boost::posix_time::seconds(30));

    boost::asio::async_read_until(
        _socket,
        _buffer,
        "\x004", // Just a test
        this->_strand.wrap(boost::bind(
            &Session::handleRead,
            this->shared_from_this(),
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred
        ))
    );
}

void Session::start()
{
    this->queueRead();

    this->_input_deadline.async_wait(
        this->_strand.wrap(boost::bind(
            &Session::handleDeadlineAsyncWait,
            shared_from_this(),
            &this->_input_deadline
        ))
    );

    this->queueWrite();
}

void Session::handleRead(const boost::system::error_code& error, size_t bytesTransfered)
{
    if (this->stopped())
        return;

    if (!error)
    {
        // ... a lot of code here, but isn't important
    }
    else if (error != boost::asio::error::operation_aborted)
        this->disconnect();
}

void Session::handleWrite(const boost::system::error_code& error)
{
    if (this->stopped())
        return;

    if (!error)
    {
        this->_writeQueue.pop_front(); // Dequeue
        this->queueWrite();
    }
    else
    {
        if (error != boost::asio::error::operation_aborted)
            this->disconnect();
    }
}

void Session::queueWrite()
{
    if (this->stopped())
        return;

    if (this->_writeQueue.empty())
    {
        this->_non_empty_output_queue.expires_at(boost::posix_time::pos_infin);
        this->_non_empty_output_queue.async_wait(
            boost::bind(&Session::queueWrite, shared_from_this())
        );
    }
    else
    {
        this->_input_deadline.expires_from_now(boost::posix_time::seconds(this->_server.getConfig().getServer().timeout));

        boost::asio::async_write(
            this->getSocket(),
            boost::asio::buffer(
                this->_writeQueue.front().getData(),
                this->_writeQueue.front().getDataSize()
            ),
            this->_strand.wrap(boost::bind(
                &Session::handleWrite,
                this,
                boost::asio::placeholders::error
            ))
        );
    }
}

void Session::handleDeadlineAsyncWait(boost::asio::deadline_timer* deadline)
{
    if (this->stopped())
        return;

    if (deadline->expires_at() <= boost::asio::deadline_timer::traits_type::now())
    {
        boost::system::error_code sdEc;
        this->getSocket().shutdown(boost::asio::ip::tcp::socket::shutdown_send, sdEc);

        deadline->expires_from_now(boost::posix_time::seconds(15));

        deadline->async_wait(
            this->_strand.wrap(boost::bind(
                &Session::handleDeadlineAsyncWaitKillConnection,
                shared_from_this(),
                deadline
            ))
        );

    }
    else
    {
        deadline->async_wait(
            this->_strand.wrap(boost::bind(
                &Session::handleDeadlineAsyncWait,
                shared_from_this(),
                deadline
            ))
        );
    }
}

void Session::handleDeadlineAsyncWaitKillConnection(boost::asio::deadline_timer* deadline)
{
    this->disconnect();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:53:47.720

您的`async_wait`超时处理程序应该取消未完成的`async_read()`而不是仅仅关闭套接字，否则套接字将保持打开状态。

```
void Session::handleDeadlineAsyncWait(boost::asio::deadline_timer* deadline)
{
    if (this->stopped())
        return;

    if (deadline->expires_at() <= boost::asio::deadline_timer::traits_type::now())
    {
        boost::system::error_code sdEc;
        this->getSocket().shutdown(boost::asio::ip::tcp::socket::shutdown_send, sdEc);
        this->getSocket().cancel(); // <-- add this
    }
    else
    {
        deadline->async_wait(
            this->_strand.wrap(boost::bind(
                &Session::handleDeadlineAsyncWait,
                shared_from_this(),
                deadline
            ))
        );
    }
} 
```

此外，在您的`Session::handleRead()`处理程序中，您应该检测到`boost::asio::error::operation_aborted`错误，因为这意味着读取已被取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:17:27.230

我刚刚发现了问题。

错误在函数中`Session::quereWrite`。

### 会话.cpp

```
void Session::queueWrite()
{
    if (this->stopped())
        return;

    if (!this->_writeQueue.empty())
    {
        boost::asio::async_write(
            this->getSocket(),
            boost::asio::buffer(
                this->_writeQueue.front().getData(),
                this->_writeQueue.front().getDataSize()
            ),
            this->_strand.wrap(boost::bind(
                &Session::handleWrite,
                this,
                boost::asio::placeholders::error
            ))
        );
    }
} 
```

我删除`_non_empty_output_queue`并使用另一种方法来做同样的事情，使用`pushPack`方法。

问题是`async_wait`调用了该`queueWrite`方法，而他`async_wait`自己又调用了另一个方法，但是截止日期计时器已过期，这会导致处理器开销并防止`Session`自毁。

感谢@Sam Miller 的巨大贡献。

# cookies - Cookie 设置服务器端但未显示在 document.cookie 中

> ID：14864818
> 
> 赞同：1
> 
> 时间：2013-02-13T22:53:17.147
> 
> 标签：cookies, response-headers

我正在尝试从该站点上的另一个问题中实现答案：

[检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)

我已经完成了所有步骤，一切都在我尝试检索 cookie 的时候进行。当我使用 Firebug 时，我可以看到我在标头响应中创建的 cookie，以及之前在应用程序中由 javascript 创建的 cookie。

两个cookie在firebug中的信息是：name:earlierCookie,value:1234,Domain:localhost,Path:/,Expires:Session,HttpOnly:false name:cookiefromServer,value:5678,Domain:localhost,Path:/resource/上传/文件，过期：会话，HttpOnly：假

因此，您可以看到 cookie 位于同一个域中（它们具有不同的路径）。查看 document.cookie 时，只有 earlyCookie 存在。

为什么我可以在 Firebug 中看到 cookieFromServer 而不是在 document.cookie 中？

另外，请告诉我是否需要发布更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:30:19.500

这是我自己想出来的。问题是路径。设置到/从服务器的路径允许 cookie 显示在 document.cookie 中我不知道为什么会这样，也找不到解释它的好资源。

# objective-c - 使用数组键作为 UITableView 行的标签

> ID：14864820
> 
> 赞同：0
> 
> 时间：2013-02-13T22:53:29.153
> 
> 标签：objective-c, arrays, cocoa-touch, uitableview

我正在尝试将它们从 plist 中的数组中用作表的标签。这是我到目前为止所尝试的。我已经声明了一个 ivar：`NSArray *viewerKeys;`

在 viewDidLoad

```
`NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath];
viewerKeys = [dictionary allKeys];` 
```

并在 cellForRowAtIndexPath `UILabel *label = (UILabel *)[cell viewWithTag:1000]; label.text = [viewerKeys objectAtIndex:indexPath.row];`

我可以从 viewdidload 记录 viewerKeys，但如果我尝试`NSLog@"%@", [viewerKeys objectATIndex:indexPath.row]`，我什么也得不到 - 甚至没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:45:37.880

我没有正确计算 numberOfRowsInSection 。我的错！

# javascript - jQuery UI 效果导致 iframe 重新加载

> ID：14864821
> 
> 赞同：1
> 
> 时间：2013-02-13T22:53:31.733
> 
> 标签：javascript, jquery, jquery-ui, iframe, jquery-effects

我正在使用 jQuery 显示/隐藏恰好包含 iframe 的 div。它仅适用于标准的“显示”和“隐藏”方法。

所以现在我想从 jQuery UI ( [http://jqueryui.com/effect/](http://jqueryui.com/effect/) ) 中添加一些效果，但突然我的 iframe 每次显示/隐藏时都会重新加载。

这是一个要演示的小提琴：http: [//jsfiddle.net/BnZzk/1/](http://jsfiddle.net/BnZzk/1/) 这是代码，因为 SO 迫使我添加它：

```
<style>
div {
    height: 200px
}
span {
    display: block;
    padding-bottom: 10px;
    margin-bottom: 10px;
    border-bottom: 1px solid black;
}
</style>

<div>
    <iframe src="http://www.wikipedia.org/"></iframe>
</div>
<input type="button" value="Go"/>
<hr/>
<div id="msgs"></div>

<script>
$(function () {

var container = $('div'),
    ifrm = $('iframe'),
    msgs = $('#msgs')
    delay = 10; //change me to adjust delay in seconds between actions

$('input').on('click', normal);
log('First let the iframe load and then clear your network console -- click the "Go" button to get started.');

function log (msg) {
    msgs.append('<span>' + msg + '</span>');
}

function normal () {

    ifrm.
        hide(400, function () {

            log('That was a standard hide with no effect -- is your network console still empty? OK we\'ll pause for ' + delay + ' seconds and then do a standard show.');

            ifrm.
                delay(delay * 1000).
                show(400, function () {
                    log('That was a show with no effect -- is you network console *still* empty? Great! Let\'s try some effects.');
                    log('------------------------<br/>' +
                    '-- Begin Effects --<br/>' +
                    '------------------------<br/>');
                    withEffect();
                });

        }); //hide

} //normal

function withEffect () {

    log('We\'ll pause for another ' + delay + ' seconds -- get ready to watch your network console.');

    ifrm.
        delay(delay * 1000).
        hide('fold', {mode:'hide'}, 400, function () {

            log('That was a hide with effect -- is your network console flooded? Mine too :-( We\'ll wait ' + delay + ' seconds while you clear your console again.');

            ifrm.
                delay(delay * 1000).
                show('fold', {mode:'show'}, 400, function () {
                    log('That was a show with effect -- is your network console flooded again? Bummer ...');
                });

        }); //hide

} //withEffect

});
</<script> 
```

知道如何保持精美效果但不刷新 iframe 的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:08:18.010

发生这种情况是因为这种效果重新组织了 DOM，在 IFRAME 周围放置了一个 DIV 包装器，因此当 IFRAME “重新附加”时，重新加载就会发生！您可以使用 Google Chrome 元素检查器查看此行为。

要解决此问题，我建议您在 IFRAME 的父 DIV 中应用效果，但不要使用`effect`插件。查看[http://api.jquery.com/animate/](http://api.jquery.com/animate/)，操作宽度和高度样式属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:15:48.057

正如@Jamillo Santos 的回答，“重新附加”iFrame 的问题。

如果您正在使用**对话框小部件或其扩展**的 jQueryUI 并希望防止这种情况，只需重新定义小部件实现的**_moveToTop()函数，如下所示。**

```
_moveToTop: function() {
    return null;
}, 
```

# binary-search-tree - BST【作业】这种迭代遍历的方法是如何工作的？

> ID：14864822
> 
> 赞同：0
> 
> 时间：2013-02-13T22:53:34.707
> 
> 标签：binary-search-tree, tree-traversal

我正在使用 Pat Morin 的免费书籍 Open Data Structures (in Java) 中的一个示例。我相信我理解树遍历的概念（继续向左走，直到你不能再向左走，然后向右走，然后再往回走。

然而，我对下面的代码有点困惑。它究竟是如何知道更改结构中的分支的，例如：

```
 r(oot)
  |
 -  -
|    |
a    b
   |  |
   c  d

void traverse2() {
     Node u = r, prev = nil, next;
     while (u != nil) {
       if (prev == u.parent) {
         if (u.left != nil) next = u.left;
         else if (u.right != nil) next = u.right;
         else next = u.parent;
       } else if (prev == u.left) {
         if (u.right != nil) next = u.right;
         else next = u.parent;
       } else {
         next = u.parent;
       }
       prev = u;
       u = next;
} } 
```

从我所见，即使根没有，它也会自动转到父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T04:10:59.547

根的父节点为 nil，因此算法在其父节点离开根时终止（它在访问右子树之后执行此操作。）

# javascript - Ascensor JS 未在正确位置加载 - Internet Explorer 9

> ID：14864824
> 
> 赞同：1
> 
> 时间：2013-02-13T22:53:50.933
> 
> 标签：javascript, jquery, internet-explorer, loading

[我已经使用ascensor js 插件](http://www.kirkas.ch/ascensor/)建立了一个网站， 除了在 Internet Explorer 中，它一切正常。第一次访问该站点时，它将正确加载。如果您刷新页面，它有时会起作用。如果您清除缓存或清除历史记录并访问该网站，它将无法正确加载。URL 将是正确的，但它显示的页面不正确。它应该显示 2 级，但显示 1 级。

我尝试使用该插件查看其他站点，但它们都在 1 级加载了站点。我用来加载它的代码如下。WindowsOn:2，应该让它在第 2 级加载。我尝试修改我的 JavaScript，但没有运气。

任何人都可以帮助我修复或替代以将其加载到正确的位置。www.newworldwhisky.com.au

谢谢

```
$('#ascensorBuilding').ascensor({
    AscensorName:'ascensor',
    ChildType:'section',
    AscensorFloorName:'starward | home | distillery | our_history | our_team | process_and_innovation | participate | buy_our_whisky | work_with_us | news_and_events | contact_us | media',
    Time:700,
    Easing:'easeInOutCubic',
    WindowsOn:2,
    Direction:'chocolate',
    AscensorMap:'1|1 & 2|1 & 3|1 & 3|2 & 3|3 & 3|4 & 4|1 & 4|2 & 4|3 & 4|4 & 5|1 & 5|2',
    KeyNavigation: true,
    Queued:false,
    QueuedDirection:"x"
}); 
```

我还附上了错误的屏幕截图。第一个是它应该如何加载，第二个是错误。

[加载错误截图](http://newworldwhisky.com.au/load_error.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:41:19.457

Ended up finding the solution. The canvas tags were withing the ascensor building that the plugin uses to hold all the pages. I moved it outside of that and it fixed the loading issue in IE

# iphone - 从 URL 读取 JSON 并添加 MKAnnotations

> ID：14864825
> 
> 赞同：3
> 
> 时间：2013-02-13T22:53:54.653
> 
> 标签：iphone, ios, objective-c, xcode, mapkit

我已经通过几个不同的教程试图让这个工作，但它们似乎掩盖了初学者可能不知道的一些关键步骤。

我在 URL 处有一个 JSON 文件，其中列出了名称、纬度和经度。如何将其导入数组或字典（我不知道区别），然后对其进行迭代并在每次迭代时创建一个新注释。

IOS6，故事板

_ 添加代码 _

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController {}

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

@property (nonatomic, strong) NSMutableData *downloadData;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"
#import "MapViewAnnotation.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    _downloadData = [NSMutableData new];

    NSURL *requestURL = [NSURL URLWithString:@"OMITTED/apptest/locations.json"];
    NSURLRequest *request = [NSURLRequest requestWithURL:requestURL];
    NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
    [connection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [_downloadData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    id parsed = [NSJSONSerialization JSONObjectWithData:_downloadData options:kNilOptions error:nil];
    for (NSDictionary *pointInfo in parsed)
    {
        NSLog([parsed objectForKey:@"name"]);
        double xCoord = [(NSNumber*)[parsed objectForKey:@"lat"] doubleValue];
        double yCoord = [(NSNumber*)[parsed objectForKey:@"lon"] doubleValue];
        CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(xCoord, yCoord);

        MKPointAnnotation *point = [MKPointAnnotation new];
        point.coordinate = coords;
        point.title = [parsed objectForKey:@"name"];

        [self.mapView addAnnotation:point]; // or whatever your map view's variable name is
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)viewDidUnload {
    [super viewDidUnload];
    // ARC Problem --- [_mapView release];
    self.mapView = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:21:09.093

在 iOS 5 中，有一个 JSONSerializer 类可以将原始 JSON 数据从您的 URL 转换为适当的数组或字典。

您需要从服务器下载数据：

```
NSURL *requestURL = [NSURL URLWithString:@"<your url here>"];
NSURLRequest *request = [NSURLRequest requestWithURL:requestURL];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start]; 
```

然后您将添加这些委托方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [_downloadData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    id parsed = [NSJSONSerialization JSONObjectWithData:_downloadData options:kNilOptions error:nil];
} 
```

_downloadData 是 NSMutableData 类型的类的实例变量或属性。

该`parsed`变量将包含来自服务器的数据。如果它是一个点列表，它可能是一个数组，因此您可以使用快速枚举对其进行迭代：

```
for (NSDictionary *pointInfo in parsed) {
    double xCoord = [(NSNumber*)[parsed objectForKey:@"<key for lat coord>"] doubleValue];
    double yCoord = [(NSNumber*)[parsed objectForKey:@"<key for long coord>"] doubleValue];
    CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(xCoord, yCoord);

    MKPointAnnotation *point = [[MKPointAnnotation new] autorelease];
    point.coordinate = coords;        
    point.title = [parsed objectForKey:@"<key for title>"];  

    [self.mapView addAnnotation:point]; // or whatever your map view's variable name is
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:25:05.627

我在 GitHub 上有一个开源项目，它使用带有 NSCoding 协议的序列化程序，因此您可以直接从 JSON 流自动创建实例。

它在[这里](http://github.com/ontometrics/JSONCoding.git)。

# express - 使用 Everyauth/Passport.js 向 Twitter 进行身份验证，同时询问用户名/电子邮件/密码

> ID：14864827
> 
> 赞同：0
> 
> 时间：2013-02-13T22:53:58.597
> 
> 标签：express, oauth, twitter-oauth, passport.js, everyauth

我想创建一个身份验证系统，用户可以“使用 Twitter 注册”，但这一切有效地做的是验证他们的 Twitter 帐户并使用他们的 Twitter 用户名预先填写注册表单。然后将要求用户输入电子邮件和密码（或替代用户名）。

因此，在注册后，用户已通过身份验证访问其 Twitter 帐户，并且访问令牌可以存储在数据库中。稍后我将使用它来访问 Twitter API。

诸如`everyauth`和之类的节点模块`passport`使用 OAuth 完成了很多繁重的工作，但它们似乎只提供了一种`findOrCreateUser`方法，它并没有提供很多喘息的空间来做我需要做的事情——也就是说，重定向到注册用户之前的注册表单，或者如果找到用户，只需照常登录即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:41:59.937

这是一个可能的方法的快速草图：

请注意，Passport 不提供`findOrCreateUser`方法。所有数据库管理和记录创建都由您的应用程序定义（应该如此），Passport 只是提供身份验证工具。

这种方法的关键是从 twitter 提供的个人资料数据中简单地在您的数据库中创建一个“不完整”的用户记录。然后，在您的应用程序的路由中，您可以检查是否满足您需要的条件。如果没有，则将用户重定向到一个表单，提示他们填写缺失的详细信息。

```
passport.use(new TwitterStrategy({
    consumerKey: TWITTER_CONSUMER_KEY,
    consumerSecret: TWITTER_CONSUMER_SECRET,
    callbackURL: "http://127.0.0.1:3000/auth/twitter/callback"
  },
  function(token, tokenSecret, profile, done) {
    // Create a user object in your database, using the profile data given by
    // Twitter.  It may not yet be a "complete" profile, but that will be handled
    // later.
    return done(null, user);
  }
));

app.get('/auth/twitter',
  passport.authenticate('twitter'));

app.get('/auth/twitter/callback', 
  passport.authenticate('twitter', { failureRedirect: '/login' }),
  function(req, res) {
    // The user has authenticated with Twitter.  Now check to see if the profile
    // is "complete".  If not, send them down a flow to fill out more details.
    if (req.user.isCompleteProfile()) {
      res.redirect('/home');
    } else {
      res.redirect('/complete-profile');
    }
  });

app.get('/complete-profile', function(req, res) {
  res.render('profile-form', { user: req.user });
});

app.post('/update-profile', function(req, res) {
  // Grab the missing information from the form and update the profile.
  res.redirect('/home');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-15T14:04:12.113

稍微澄清一下。测试“if (req.user.isCompleteProfile())”可以是：

> 如果（req.user.isCompleteProfile）

即，您在 twitter 步骤中创建用户记录时创建一个字段“isCompleteProfile”，并将其标记为真或假，具体取决于您对用户的了解

或：它是对函数的调用，因此

> if (isCompleteProfile(req))

在这种情况下，您有一个单独的函数来测试您刚刚创建/修改的用户的状态，因此：

> function isCompleteProfile(req) { if (typeof req.user.local.email === "undefined") return false; 否则返回真；}

而且，我对 Jared 和这个关于passportjs 身份验证的精彩教程表示赞同。

# xml - 错误格式化 XSLT？

> ID：14864828
> 
> 赞同：1
> 
> 时间：2013-02-13T22:54:01.793
> 
> 标签：xml, xslt, apache-cocoon

我想将 html 转换为 xml，执行转换 XSLT，但我看到这个错误：

```
<message>
Impossible to read XSLT from 'file:/home/antonmm/src/cardMarket/cocoon-cardmarket/src/main/resources/COB-INF/xsl/productCard.xsl', see nested exception
</message>
<stacktrace>
org.apache.cocoon.pipeline.SetupException: Impossible to read XSLT from 'file:/home/antonmm/src/cardMarket/cocoon-cardmarket/src/main/resources/COB-INF/xsl/productCard.xsl', see nested exception at org.apache.cocoon.sax.component.XSLTTransformer.loadXSLT(XSLTTransformer.java:168) at org.apache.cocoon.sax.component.XSLTTransformer.setConfiguration(XSLTTransformer.java:205) at ...... 
```

封锁在茧中：

```
 <map:pipeline>
    <map:match pattern="product">
<!--       <map:generate src="sample/p.xml"/> -->
      <map:generate src="https://productweb.com"/>
      <map:transform src="xsl/product.xsl" />
      <map:serialize type="xml"/>
    </map:match>
  </map:pipeline> 
```

产品.xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:x="http://www.w3.org/1999/xhtml" />
  <xsl:template match="/">
    <img>
      <xsl:apply-templates />
    </img>
  </xsl:template>
  <xsl:template match="x:span[@class='prodImage']/x:img">
    <xxx>
      <value-of select="@src"/>
    </xxx>

  <xsl:template match="text()"/>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:00:18.793

通常这种错误不会出现在格式错误的 XSLT 文件或语法错误中。

这是因为 XSLT 文件的可用性。确保您已正确指定文件名。尝试从资源管理器或浏览器访问您指定的文件路径（这将验证文件路径和文件名）。文件扩展名也应与您指定的相同。如果您指定 as`*.xsl`并且实际文件是，`*.xslt`则它是不可访问的。

# css - IE 7 中的 CSS 精灵不起作用？

> ID：14864830
> 
> 赞同：0
> 
> 时间：2013-02-13T22:54:11.737
> 
> 标签：css, internet-explorer-7, css-sprites

我想为每个无序列表实现项目符号样式。我有它的精灵图像。我实现了它。我从下面的链接中获取了示例。

[http://www.cssbakery.com/2012/08/css-list-with-icon-sprites.html](http://www.cssbakery.com/2012/08/css-list-with-icon-sprites.html)

除了在 IE7 中它工作正常。我也想在 IE7 中运行相同的教程。我怎样才能实现它？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
      <html xmlns="http://www.w3.org/1999/xhtml">
  <head>

    <title>CSS Sprites for Bullets</title>
<!--[if lt IE 8]>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
    <![endif]-->

    <style>
    div
    {
        width:30%;
        float:left;

    }
    .bullet {
        list-style-type: none;
        margin:0; padding:0;
    }

    .bullet li 
    {
            // padding-top: 5px;  
             padding-left: 20px;
             //margin-bottom: 15px;
             //line-height:1.5em;
             //position: relative;
    }
    .magento li:before 
    {
         display: inline-block;
         position: absolute;
         margin: 9px 0 0 -20px;
         min-height: 9px;  
         background: url(images/bulletsprite.png) no-repeat -116px 0px;
         content:"";
        // vertical-align: middle;
         width: 9px; 
         height: 9px;
         float:left;
    }
           </style>
     </head>
<body>
<div>
    <p>Magenta</p>
    <ul class="magento bullet">
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam. 
        </li>
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam. 
        </li>

    </ul>
</div>  
       </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:57:30.187

IE7 不支持`:before`伪选择器，因此这些样式中的大多数都不起作用。

请参阅`:before`/`:after` [浏览器支持图表](http://css-tricks.com/browser-support-pseudo-elements/)。

您可以使用[IE8.js](http://code.google.com/p/ie7-js/)`:before`在 IE7 中工作。

测试前页面：http: [//ie7-js.googlecode.com/svn/test/before.html](http://ie7-js.googlecode.com/svn/test/before.html)

# google-apps-script - 使用 {contentsOnly:true} 的 copyTo 不起作用

> ID：14864831
> 
> 赞同：2
> 
> 时间：2013-02-13T22:54:14.133
> 
> 标签：google-apps-script, google-sheets

需要注意的是，我对 Google Apps 脚本非常陌生。我感谢可以提供的任何帮助。

我正在尝试将工作表的内容复制到新文档中。此代码可以正常工作：

```
// Create a new Spreadsheet and copy the current sheet into it.
var newSpreadsheet = SpreadsheetApp.create("Spreadsheet to export");
var projectname = SpreadsheetApp.getActiveSpreadsheet();
sheet = originalSpreadsheet.getActiveSheet();
sheet.copyTo(newSpreadsheet); 
```

但是，这会复制当前工作表中的公式 - 我试图仅复制值，因为公式引用原始文档中其他工作表上的数据。

我这样做的尝试如下：

```
// Create a new Spreadsheet and copy the current sheet into it.
var newSpreadsheet = SpreadsheetApp.create("Spreadsheet to export");
var projectname = SpreadsheetApp.getActiveSpreadsheet();
sheet = originalSpreadsheet.getActiveSheet();
sheet.copyTo(newSpreadsheet, {contentsOnly:true}) 
```

但是，这会产生以下错误：**找不到方法（类）copyTo（$Proxy914，object）。**

我不确定我做错了什么。任何援助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T23:12:36.853

实际上有 2 个`copyTo`，一个[适用于 sheet](https://developers.google.com/apps-script/class_sheet?hl=fr-FR#copyTo)，另一个[适用于 Range](https://developers.google.com/apps-script/class_range?hl=fr-FR#copyTo)

根据文档（请参阅上面的链接），第二个具有可选参数以仅复制值，而第一个没有。

我猜你可以做的是使用将`Range.copyTo()`整个工作表范围复制到一个临时工作表（在同一个电子表格中），然后将该临时工作表复制到另一个电子表格，最后从源电子表格中删除临时工作表。

希望它足够清楚;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:27:58.960

在脚本库中有一个名为 spreadsheetFrozenBackup 的脚本，通过它可以制作电子表格的副本。

使用了 Serge 提到的 range.copyTo。

这不是一个长脚本，所以我在这里复制它以获取信息：

```
// Make copy of current spreadsheet with backup name.                  
function spreadsheetFrozenBackup() {

  // Get current spreadsheet.
  var ss = SpreadsheetApp.getActiveSpreadsheet();                     

  // Name the backup spreadsheet with date.
  var bssName = ss.getName() + " frozen at " + Utilities.formatDate(new Date(), "GMT", "yyyyMMdd HHmmss");
  var bs = SpreadsheetApp.openById((DocsList.copy(DocsList.getFileById(ss.getId()), bssName)).getId());

  // Make sure all the formulae have been evaluated...                     
  SpreadsheetApp.flush();

  // Get all the sheets in the spreadsheet
  var bsl = bs.getSheets();    

  var pl = "";
  for (var i = 0; i < bsl.length; i++) {
    bsl[i].getDataRange().copyTo(bsl[i].getDataRange(), {contentsOnly:true});

    pl = pl + " " + bsl[i].getName();
    SpreadsheetApp.getActiveSpreadsheet().toast(pl, "Processed Sheets");
  }  
  SpreadsheetApp.getActiveSpreadsheet().toast(bssName, "Frozen Backup");
} 
```

# postgresql - 如何在查询 WHERE 子句中使用 AS 名称？

> ID：14864832
> 
> 赞同：0
> 
> 时间：2013-02-13T22:54:19.083
> 
> 标签：postgresql, postgresql-9.1

给出这样的查询：

```
SELECT 
  id, 
  (SELECT COUNT(*) 
   FROM members 
   WHERE members.network_id = networks.id) AS mem_count
FROM 
  networks
WHERE mem_count > 2 
```

使用此查询，where 子句会中断，因为它不知道 mem_count 是什么......为什么我不能在 where 子句中使用 as var？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:07:38.080

虽然 bernie 建议了该问题的正确答案，但您的查询可以简化为：

```
SELECT
  network_id as id,
  count(*)
FROM
  members
GROUP BY
  network_id 
HAVING
  count(*) > 2 
```

作为额外的奖励，它可以更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:58:14.193

你已经把这个概念搞定了。你只需要正确的语法。您可以像这样重写，并获得使查询符合 ANSI 的额外好处：

```
SELECT 
  id, 
  m.mem_count
FROM 
  networks n 
  JOIN (
    SELECT   m.network_id, 
             COUNT(*) AS mem_count
    FROM     members 
    GROUP BY m.network_id
  ) m 
  ON m.network_id = n.id 
  AND m.mem_count > 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:59:34.567

尝试：

```
SELECT 
  id, 
  (SELECT COUNT(*) as mem_count
   FROM members 
   WHERE members.network_id = networks.id)
FROM 
  networks
WHERE mem_count > 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T23:07:03.060

一种方法是。

```
Select * From (
SELECT 
  id, 
  (SELECT COUNT(*) 
   FROM members 
   WHERE members.network_id = networks.id) AS mem_count
FROM 
  networks)) mem_counts
WHERE mem_count > 2 
```

不过，伯尼建议的加入会更好。基本上你混淆了解析器。当您使用 AS 为列名设置别名时，您会遇到与 group by 或 order by 相同的问题。

# html - 使用 CreateJS 的 HTML5 动画不适用于 iPad

> ID：14864835
> 
> 赞同：1
> 
> 时间：2013-02-13T22:54:22.587
> 
> 标签：html, ipad, animation, sprite, createjs

我正在使用 CreateJS 和 spritesheet 制作动画，但我不明白为什么它不适用于 iPad。这适用于 Chrome 浏览器。CreateJS 框架应该适用于 iOS。

你可以在这里找到我的代码：

> 链接不再可用

你有什么主意吗？

否则，您是否有任何其他解决方案可以从 Web 为 iPad 创建 HTML5 动画？另外，我需要给这个动画添加声音与动画同步，所以动画不能滞后，我需要完美的表演。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:47:10.457

对不起，我的第一个答案没有帮助。我在这里进行了更深入的研究，问题可能是因为 PNG 的大小。您的 PNG 当前为 4096x2048，是 iOS 可接受尺寸的两倍。

确保您的图像小于 2048x2048 - 您可以使用 Zoë 从 Flash 中导出它们，这将为您提供多张图像。 [http://createjs.com/zoe](http://createjs.com/zoe)

干杯。

# ios - 在 alertView if 语句中调用 IBaction

> ID：14864841
> 
> 赞同：1
> 
> 时间：2013-02-13T22:55:01.740
> 
> 标签：ios, if-statement, xcode4.5, uialertview, ibaction

我和我的朋友正在开发一个应用程序，我们完全是新手，但在书籍和护目镜方面已经走了很长一段路。

我们现在被困在这件事上。我们有一堆 texfields，我们有清除按钮与此操作相关联，但是如果您在其中一个警报视图按钮上单击“是”，我们希望调用该操作。

```
- (IBAction)clearText:(id)sender {

Spelare1Slag1.text = @"";
Spelare1Slag2.text = @""; 
```

}

我们也有这个警报视图：

```
 alertDialog = [[UIAlertView alloc]
    initWithTitle: @"Warning"
    message: @"Do you want to delete?"
    delegate: self
    cancelButtonTitle: @"No"
    otherButtonTitles: @"Yes", nil];

- (void)alertView: (UIAlertView *)alertView
clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];
    if ([buttonTitle isEqualToString:@"No"]) {
    }

    else if ([buttonTitle isEqualToString:@"Yes"]){
        Spelare1Slag1.text = @"";
    } 
```

}

所以这就是我们认为我们应该这样做的方式，但是我们不知道在 else if 语句中放置什么。我们希望当您在警报视图中按“是”按钮时清除文本字段，而不是在您按“否”时清除

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:59:54.720

如果我正确理解问题，您可以关闭`AlertView`用户点击的情况。`NO`

你可以像这样关闭警报视图

```
[alertView dismissWithClickedButtonIndex:0 animated:YES]; 
```

但请确保查看`NO`索引是否为 0 或 1，如果您不确定，那么就这样做

```
[alertView dismissWithClickedButtonIndex:nil animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T23:07:12.407

我假设 clearText 方法是您创建的用于删除两个字段中的文本的自定义方法，对吗？因此，它应该是一个 void 方法，而不是一个 IBAction：

```
- (void)clearText {
Spelare1Slag1.text = @"";
Spelare1Slag2.text = @"";
} 
```

现在您需要在 UIAlertView 委托方法中做的就是调用 clearText 方法：

```
- (void)alertView: (UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];
  if ([buttonTitle isEqualToString:@"Yes"]){
      [self clearText];
  }
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T23:25:05.353

类型方法`IBAction`就像任何其他方法一样，您可以直接在代码中调用它们。实际上，`IBAction`只是一个对`void`. `nil`通常，当需要在触发的目标/动作事件的上下文之外调用它时，您将传递一个sender 参数。

```
[self clearText:nil]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T00:54:59.210

为什么需要检查实际的按钮文本？检查按钮索引是最有效的方法。如果您的 alertView 中有两个字段，只需检查索引是 0 还是 1 就可以了。你做额外的工作来检查实际的文本。

顺便说一句，如果您在按下否时不需要执行任何特定操作，只需检查“是”按钮的索引即可。（如果不需要，不要检查两个索引）。

# ios - 通话状态栏对我的 CGAffineTransform 视图有何影响？

> ID：14864845
> 
> 赞同：1
> 
> 时间：2013-02-13T22:55:15.100
> 
> 标签：ios, quartz-2d, cgaffinetransform

我的应用程序（针对 iOS 5+，使用 ARC 和故事板，用于 App Store）使用了一些旋转变换。存在一个错误，其中通话状态栏（例如，如果有正在进行的电话通话或麦克风录音）会导致视图发生变化，超出转换描述的范围。为了诊断这个问题，我编写了一个简单的[测试应用程序](https://github.com/spilliams/SWTransformTester)*，它使用视图的转换。

最初（在模拟器 5.0 和 6.1 以及硬件 6.1 中重现）它看起来像

![在此处输入图像描述](../Images/e30d62d9411387c489ff9a3af3606bfb.png)

旋转20度后：

![在此处输入图像描述](../Images/16772f62cec912ad10f54a54f6e0da16.png)

还可以！但是当我切换通话状态栏（command-T）时会发生一些奇怪的事情：

![在此处输入图像描述](../Images/fb6505d4188652e7d191caa83889b26a.png)

好的，如果我关闭通话状态栏，它可能会恢复

![在此处输入图像描述](../Images/97a18cabfa2b2c5951be652a03863530.png)

灾难！让我们尝试将视图的变换重置为`CGAffineTransformIdentity`

![在此处输入图像描述](../Images/de24e9a8b6c0ae92bf6d2e17388a421c.png)

哦，我让自己陷入了什么？！

无论如何，我是 CGAffineTransforms 和整个 Quartz 2D 的新手，所以如果有人能告诉我为什么会这样，我将不胜感激。如果您想四处逛逛，[可以在 Github](https://github.com/spilliams/SWTransformTester/blob/master/SWTransformTester/SWViewController.m) * 上找到该代码。

*请注意，代码已使用解决方案进行了更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:30:18.540

发生这种情况是因为切换通话状态栏会更改视图框架，它（如果设置为自动调整子视图）会相应地自动调整子视图。如果转换后的视图有任何灵活的边距，它可能会像上面的屏幕截图所示倾斜。为了使它不会像那样倾斜，打开所有四个支柱。

# xpath - 用于选择标签后文本的 xpath 语法

> ID：14864847
> 
> 赞同：3
> 
> 时间：2013-02-13T22:55:26.370
> 
> 标签：xpath

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:58:58.823

要选择 之后的文本`<strong>`，请使用

```
//strong/following-sibling::text()[1] 
```

# .net - 从 .NET 3.5 升级到 .NET 4.0：是否存在配置文件重大更改？

> ID：14864848
> 
> 赞同：0
> 
> 时间：2013-02-13T22:55:26.847
> 
> 标签：.net, .net-4.0

我们的可执行文件是针对 .NET 3.5 编译的。我们不拥有源代码，因此无法重新编译它。因此，为了让它与 .NET 4.0 一起运行，我们将其添加到配置文件中，[每页](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)：

```
<startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
</startup> 
```

现在，我们得到一个似乎与配置文件相关的错误：

![在此处输入图像描述](../Images/f35ee612897dcda096e2a94ad39f96f1.png)

我怀疑 .NET 4.0 不喜欢我们相当复杂的配置文件。为了验证这一点，我做了以下事情：

*   创建了一个空白的 .NET 3.5 WinForms exe
*   如上所示，将supportedRuntime 添加到配置中
*   使用进程资源管理器验证它是否与 .NET 4.0 DLL 一起运行。

我开始简化复杂的配置文件以缩小问题范围，到目前为止，我已经把它搞定了。有谁知道是什么问题？

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
   <startup>
      <supportedRuntime version="v4.0" />
   </startup>
   <configSections>   
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
    </sectionGroup>
  </configSections>
  <spring>
    <context type="Spring.Context.Support.XmlApplicationContext, Spring.Core" name="Default">
      <resource uri="config://spring/objects" />
    </context>
    <objects xmlns="http://www.springframework.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd" default-lazy-init="true">      
      <object id="Foo1" type="Foo.Bar1, Foo.Bar">
        <description>lorem ipsum</description>
      </object>
      <object id="Foo2" singleton="false" type="Foo.Bar2, Foo.Bar">
        <description>lorem ipsum</description>
      </object>
      <object id="Foo3" singleton="false" type="Foo.Bar3, Foo.Bar">      
        <description>lorem ipsum</description>
      </object>
      <object id="Foo4" type="Foo.Bar4, Foo.Bar">            
        <description>lorem ipsum</description>
      </object>
      <object id="Foo5" type="Foo.Bar5, Foo.Bar">            
        <description>
            lorem ipsum
        </description>
        <constructor-arg>
          <list element-type="Foo.IBar5, Foo.Bar">
            <ref object="Foo4" />
          </list>
        </constructor-arg>
      </object>
    </objects>
  </spring>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:36:07.900

原来问题是**configSections**必须是**configuration**的第一个孩子。

我通过将复杂的配置放入空白的 WinForms 配置文件、读取配置并查看引发的异常的详细信息来解决这个问题。

# c++ - 如何在构建后执行makefile

> ID：14864851
> 
> 赞同：2
> 
> 时间：2013-02-13T22:55:34.943
> 
> 标签：c++, makefile

```
CPP=g++
CPPFLAGS=-Iincludes
SOURCEDIR=code
SOURCES=$(shell ls $(SOURCEDIR))
OBJECTDIR=obj
BINDIR=bin
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=bin/assignment1

%.o: $(SOURCEDIR)/%.cpp
    if [ ! -d $(OBJECTDIR) ]; then mkdir $(OBJECTDIR); fi; $(CPP) $(CPPFLAGS) -c $< -o $(OBJECTDIR)/$@

$(EXECUTABLE): $(OBJECTS)
    if [ ! -d $(BINDIR) ]; then mkdir $(BINDIR); fi; $(CPP) $(addprefix $(OBJECTDIR)/,$(OBJECTS)) -o $@

clean:
    if [ -d $(BINDIR) ]; then rm -rfv $(BINDIR); fi; if [ -d $(OBJECTDIR) ]; then rm -rfv $(OBJECTDIR); fi;

all: $(EXECUTABLE) 
```

现在我有我的头在包含，我的主要在代码文件夹中。我想要它，这样当我运行 make 时，它​​会在将程序编译到 bin/assignment1 后运行程序，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:02:38.817

如果你在你的 makefile 中添加几行，你可以让它运行你的代码：

```
CPP=g++
CPPFLAGS=-Iincludes
SOURCEDIR=code
SOURCES=$(shell ls $(SOURCEDIR))
OBJECTDIR=obj
BINDIR=bin
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=bin/assignment1

all: $(EXECUTABLE) run

%.o: $(SOURCEDIR)/%.cpp
    if [ ! -d $(OBJECTDIR) ]; then mkdir $(OBJECTDIR); fi; $(CPP) $(CPPFLAGS) -c $< -o $(OBJECTDIR)/$@

$(EXECUTABLE): $(OBJECTS)
    if [ ! -d $(BINDIR) ]; then mkdir $(BINDIR); fi; $(CPP) $(addprefix $(OBJECTDIR)/,$(OBJECTS)) -o $@

.PHONY : clean
clean:
    if [ -d $(BINDIR) ]; then rm -rfv $(BINDIR); fi; if [ -d $(OBJECTDIR) ]; then rm -rfv $(OBJECTDIR); fi;

.PHONY : run
run: $(EXECUTABLE)
    $(EXECUTABLE) arg1 arg2 
```

我将您的“全部”目标移到顶部 - 这样，如果您键入“make”，默认情况下它会执行“make all”。我还在`clean`and`run`目标上添加了“运行”目标和“.PHONY”，因为它们实际上并没有“制造”任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:03:21.957

您只需要添加另一个目标并将其添加到您的*所有*依赖项列表中，这样您就可以拥有：

```
all: $(EXECUTABLE) run

run:
     bin/assignment1/main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:03:14.373

它可以像替换你当前的`all`目标一样简单

```
all: execute

execute: $(EXECUTABLE)
    $(EXECUTABLE)   # This works because you have a well qualified path
                    # If $(EXECUTABLE) was a bare name you would need 
                    # to use ./$(EXECUTABLE)

.PHONY: execute clean 
```

`all`虽然如果您希望在您只需键入时构建它，您应该将目标作为第一个目标放在 makefile 中`make`；`make`如果您不这样做，您的 makefile 将在未修改的`make all`.

# jquery - 如何在更新/编辑操作中使用 Jasny Fileupload？当用户不更改图像时，这会使字段为空白

> ID：14864854
> 
> 赞同：1
> 
> 时间：2013-02-13T22:55:42.960
> 
> 标签：jquery, jquery-plugins, file-upload, twitter-bootstrap

我正在使用[Jasny Fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload)添加和更新一些图像，当用户添加新图像时一切正常，但是当用户更新图像并且不更改图像时，图像参考以空白形式发送。

我想知道我做错了什么或当用户不更改任何内容时如何保留图像名称？

Tks

下面是：

```
<div class="control-group">
  <label class="control-label" for="">Foto 1-1 (432x254px):</label>
  <div class="controls">
  <div class="fileupload fileupload-exists" data-provides="fileupload">
  <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"><img src="http://localhost/Figoli-Ravecca/backoffice/user_data/<?php echo mysql_result($result,0,"f_1_1_c"); ?>" /></div>
  <div>      
  <span class="btn btn-file"><span class="fileupload-exists">Change</span><input type="file"  name="files[2]" /></span>
  <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div> 
  </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:37:38.143

这个问题在[“Jasny Bootstrap – 使用现有文件上传文件”一](http://www.jasny.net/articles/jasny-bootstrap-file-upload-with-existing-file/)文中有详细回答。

# asp.net-mvc - 从区域调用部分视图

> ID：14864856
> 
> 赞同：2
> 
> 时间：2013-02-13T22:55:49.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我正在使用asp.net mvc4（视图引擎剃须刀）我有一个名为“Reclamos”的区域，在这个区域我创建一个控制器“raTabController”并在这个文件夹中创建视图“raTab”我添加一个部分视图“_Ubicar.cshtml ”。我需要从其他视图文件夹中调用此部分视图“_Ubicar.cshtml”，但出现错误：

> 未找到部分视图“/raTab/_Ubicar.cshtml”或没有视图引擎支持搜索到的位置。搜索了以下位置：/raTab/_Ubicar.cshtml

所以我称之为局部视图

```
<div id="tabs-10">@Html.Partial("/raTab/_Ubicar.cshtml")</div> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:30:01.093

我认为您可能需要参考视图的完整路径

```
@Html.Partial("~/Areas/Reclamos/raTab/_Ubicar.cshtml") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T06:48:24.940

为了准确起见，我建议将路径指定为 app-relative 而不是绝对路径。也就是说，启动它，`~/`以便它相对于应用程序的根文件夹映射，而不是相对于站点的根目录。例如：

```
<div id="tabs-10">@Html.Partial("~/raTab/_Ubicar.cshtml")</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T23:20:15.673

您可以尝试使用 RenderPartial View 做同样的事情

```
@Html.RenderPartial("path_to_your_partial_view"); 
```

# java - JRS-223 是否涵盖运行时环境？

> ID：14864863
> 
> 赞同：0
> 
> 时间：2013-02-13T22:56:14.843
> 
> 标签：java, jython, jsr223

JSR-223 是否涵盖了从 abcl 到 rhino 到 jython 的各种兼容语言中常见的交互式解释器的规范？

如果不是，那么所有这些语言是按照他们想要的方式在 Java 中创建它们的环境，还是它们大多是用自己的语言（作为库）编写的？

例如：python 交互式解释器是用 python 编写的，还是用 C/Java/C# 编写的，取决于它在哪里运行？

* * *

编辑：

我并不是说每种脚本语言都需要一个 REPL，而是说迄今为止我见过的每种基于 JVM 的脚本语言都有一个。如果还没有为标准 REPL 环境建立规范，那么也许是时候这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:47:30.297

### 不，[JSR 223与](http://www.jcp.org/en/jsr/detail?id=223)[read-eval-print loop](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)无关。

此外，JSR 223 甚至没有说明必须如何实现嵌入式脚本引擎，它只提供了一个通用接口。

**[编辑]**最接近“覆盖环境”的可能是一些[`ScriptEngine`静态字段](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html#field_summary)，它们允许 Java 程序指定位置参数 (ARGV) 和模拟正在执行的内容的“文件名”。

请参阅[`javax.script`包](http://docs.oracle.com/javase/6/docs/api/javax/script/package-summary.html)以开始了解 Java Scripting API。

# python - 如何按总和的顺序迭代大量整数元组？

> ID：14864867
> 
> 赞同：3
> 
> 时间：2013-02-13T22:56:32.710
> 
> 标签：python, iterator, combinatorics, itertools

我[`itertools.combinations()`](http://docs.python.org/2/library/itertools.html#itertools.combinations)用来迭代整数元组。

我对满足某些条件的**最低和的元组感兴趣：**

```
def findLowestNiceTuple:
    for tup in itertools.combinations(range(1, 6), 2):
        if niceTuple(tup):
            return tup 
```

生成器的默认顺序不是元素总和的顺序。例如：

```
>>> itertools.combinations(range(1, 6), 2) 
```

给出一个生成器，它将产生以下元素：

```
[(1, 2), (1, 3), (1, 4), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (3, 5), (4, 5)] 
```

如您所见，(1, 5) 的总和大于 (2,3) 的总和。对于提前终止，我需要 order 中的元组`..., (1, 4), (2, 3), (1, 5), ...`。

对于适度数量的组合，您可以使用以下方法解决此问题`sorted()`：

```
>>> sorted(itertools.combinations(range(1, 6), 2), key=sum)
[(1, 2), (1, 3), (1, 4), (2, 3), (1, 5), (2, 4), (2, 5), (3, 4), (3, 5), (4, 5)] 
```

但是，`sorted()`将生成器转换为完全保存在内存中的列表。这意味着它不再可以很好地扩展。类似的东西`itertools.combinations(range(1, 600), 400)`将不可避免地产生一个`MemoryError`.

**有没有更方便记忆的方法来达到预期的效果？**

PS：我确实意识到完全迭代我提到的最后一个序列需要很长时间，但我正在寻找的元组应该非常接近开始。如果我可以依靠订单，我可以在第一个片段中提前终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:13:01.107

这是我解决它的方法，使用递归函数查找总和为给定值的所有组合：

```
def ordered_combinations(pop, n):
    pop = sorted(pop)

    for s in range(sum(pop[:n]), sum(pop[-n:])+1):
        yield from get_sums(pop, s, n)

def get_sums(pop, s, n):
    if n == 1:
        if s in pop:
            yield [s]
        return

    for i, v in enumerate(pop):
        if sum(pop[i:i+n]) > s:
            return
        for rest in get_sums(pop[i+1:], s-v, n-1):
            rest.append(v)
            yield rest 
```

这是它的输出示例：

```
>>> for c in ordered_combinations(range(1, 8), 4):
    print(c, sum(c))

[4, 3, 2, 1] 10
[5, 3, 2, 1] 11
[6, 3, 2, 1] 12
[5, 4, 2, 1] 12
[7, 3, 2, 1] 13
[6, 4, 2, 1] 13
[5, 4, 3, 1] 13
[7, 4, 2, 1] 14
[6, 5, 2, 1] 14
[6, 4, 3, 1] 14
[5, 4, 3, 2] 14
[7, 5, 2, 1] 15
[7, 4, 3, 1] 15
[6, 5, 3, 1] 15
[6, 4, 3, 2] 15
[7, 6, 2, 1] 16
[7, 5, 3, 1] 16
[6, 5, 4, 1] 16
[7, 4, 3, 2] 16
[6, 5, 3, 2] 16
[7, 6, 3, 1] 17
[7, 5, 4, 1] 17
[7, 5, 3, 2] 17
[6, 5, 4, 2] 17
[7, 6, 4, 1] 18
[7, 6, 3, 2] 18
[7, 5, 4, 2] 18
[6, 5, 4, 3] 18
[7, 6, 5, 1] 19
[7, 6, 4, 2] 19
[7, 5, 4, 3] 19
[7, 6, 5, 2] 20
[7, 6, 4, 3] 20
[7, 6, 5, 3] 21
[7, 6, 5, 4] 22 
```

组合总是首先产生最大的值，作为我如何将它们构建为列表的工件（通过在末尾附加小值，而不是通过连接到前面）。如果您希望它们从小到大排序，您可以将这些`rest.append(v); yield rest`行更改为`yield [v]+rest`.

该代码使用`yield from`Python 3.3 引入的语法。如果您使用的是不支持该功能的早期版本，则可以使用以下等效代码：

```
for v in get_sums(pop, s, n):
    yield v 
```

该代码甚至可以处理您描述的从 800 个成员范围中提取的 400 个组合的极端情况。这是该计算的前 20 个结果（仅显示最大的 10 个值，因为其余的都是相同的 390 到 1），以及它们的总和：

```
>>> for i, v in enumerate(ordered_combinations(range(1, 800), 400)):
    if i >= 20:
        break
    print(v[:10], sum(v))

[400, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80200
[401, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80201
[402, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80202
[401, 400, 398, 397, 396, 395, 394, 393, 392, 391] 80202
[403, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80203
[402, 400, 398, 397, 396, 395, 394, 393, 392, 391] 80203
[401, 400, 399, 397, 396, 395, 394, 393, 392, 391] 80203
[404, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80204
[403, 400, 398, 397, 396, 395, 394, 393, 392, 391] 80204
[402, 401, 398, 397, 396, 395, 394, 393, 392, 391] 80204
[402, 400, 399, 397, 396, 395, 394, 393, 392, 391] 80204
[401, 400, 399, 398, 396, 395, 394, 393, 392, 391] 80204
[405, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80205
[404, 400, 398, 397, 396, 395, 394, 393, 392, 391] 80205
[403, 401, 398, 397, 396, 395, 394, 393, 392, 391] 80205
[403, 400, 399, 397, 396, 395, 394, 393, 392, 391] 80205
[402, 401, 399, 397, 396, 395, 394, 393, 392, 391] 80205
[402, 400, 399, 398, 396, 395, 394, 393, 392, 391] 80205
[401, 400, 399, 398, 397, 395, 394, 393, 392, 391] 80205
[406, 399, 398, 397, 396, 395, 394, 393, 392, 391] 80206 
```

因为它是递归的，如果您请求 1000 个组合，此代码可能会失败（这是由于 Python 的默认递归限制）。`sys.setrecursionlimit`如有必要，您可以修改它的限制。

如果你对一个非常大的人口进行非常深入的研究，它也可能存在内存问题，因为`get_sums`在递归步骤中对人口进行切片（并因此复制）。如果您对该代码的使用仅使用`range`s，您可能可以通过从 中删除该`pop = sorted(pop)`行来解决内存问题`ordered_combinations`，因为 Python 3 的`range`对象可以有效地切片（即`range(1,100)[10:]`is `range(11,100)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-31T12:53:38.430

您可以通过遍历可能和的范围而不是生成组合来获得 O(1) 空间中的纯迭代器。从总和值中，产生产生它的数字对的子范围：

```
def sumPairs(minVal,maxVal):
    for total in range(minVal*2,maxVal*2+1):
        for a in range(max(total-maxVal,minVal),min(total-minVal,maxVal)+1):
            if a >= total-a: continue # to skip permutations
            yield (a,total-a) 
```

输出：

```
for pair in sumPairs(1,6):
    print(pair,sum(pair))

(1, 2) 3
(1, 3) 4
(1, 4) 5
(2, 3) 5
(1, 5) 6
(2, 4) 6
(1, 6) 7
(2, 5) 7
(3, 4) 7
(2, 6) 8
(3, 5) 8
(3, 6) 9
(4, 5) 9
(4, 6) 10
(5, 6) 11 
```

**[编辑] n 元组的泛化**

在保持 O(1) 空间复杂度的同时超越对有点棘手。我设法获得了 O(S) 的空间复杂度，其中 S 是元组的大小。所以解决方案的内存空间消耗与数字的范围无关。

相同的策略用于根据预期总和遍历组合，但是对于每个总和值，有多个组合产生相同的总和。这些组合可以通过从以最小数字开始并以将达到该总数的最大数字结束的基本组合开始来生成。这是给定总和可能的最广泛的值分布。所有其他值的组合都是通过逐渐拉低最后一个值来构建的，同时向上偏移较小的值以补偿由于减少最后一个值而导致的减少。

```
# generate offsets in increasing order (>=)
# to produce a total value
def getOffsets(size,total,maxValue):
    #print(size,total,maxValue)
    if not total: yield [0]*size; return
    if size == 1 and total==maxValue: yield [maxValue]; return
    while total>=0 and size*maxValue>=total:
        for prefix in getOffsets(size-1,total-maxValue,maxValue):
            yield prefix + [maxValue]
        maxValue -= 1

# generate all combinations of a range of values
# that produce a given total
def comboOfSum(total,size,minValue,maxValue):
    if size == 1: yield (total,); return
    base        = list(range(minValue,minValue+size)) # start with smallest(s)
    base[-1]    = min(total-sum(base[:-1]),maxValue)  # end with largest
    maxOffset   = base[-1]-base[-2]-1 # freedom of moving smaller values
    totalOffset = total-sum(base)     # compensate decreasing last
    minLast     = (total + size*(size-1)//2)//size # minimum to reach total
    while base[-1]>base[-2] and base[-1] >= minLast:
        for offsets in getOffsets(size-1,totalOffset,maxOffset):
            yield tuple(b+o for b,o in zip(base,offsets+[0])) # apply offsets
        base[-1]    -= 1 # decrease last value
        totalOffset += 1 # increase total to compensate for decrease
        maxOffset   -= 1 # decrease small values' freedom of movement

# generate combinations in order of target sum  
def comboBySum(size,minValue,maxValue):
    minTotal = minValue*size + size*(size-1)//2
    maxTotal = maxValue*size - size*(size-1)//2
    for total in range(minTotal,maxTotal+1):
        yield from comboOfSum(total,size,minValue,maxValue) 
```

验证：（与排序组合相比）

```
size   = 4
minVal = 10
maxVal = 80

from itertools import combinations

A = list(comboBySum(size,minVal,maxVal))
B = list(sorted(combinations(range(minVal,maxVal+1),size),key=sum))

print("same content:",set(A)==set(B))               # True
print("order by sum:",[*map(sum,A)]==[*map(sum,B)]) # True 
```

输出（小规模）：

```
for combo in comboBySum(2,1,6):print(combo,sum(combo))

(1, 2) 3
(1, 3) 4
(1, 4) 5
(2, 3) 5
(1, 5) 6
(2, 4) 6
(1, 6) 7
(2, 5) 7
(3, 4) 7
(2, 6) 8
(3, 5) 8
(3, 6) 9
(4, 5) 9
(4, 6) 10
(5, 6) 11 
```

输出（大规模）：

```
for i,combo in enumerate(comboBySum(400,1,800)):
    print(*combo[:5],"...",*combo[-5:],"sum =",sum(combo))
    if i>20: break

1 2 3 4 5 ... 396 397 398 399 400 sum = 80200
1 2 3 4 5 ... 396 397 398 399 401 sum = 80201
1 2 3 4 5 ... 396 397 398 399 402 sum = 80202
1 2 3 4 5 ... 396 397 398 400 401 sum = 80202
1 2 3 4 5 ... 396 397 398 399 403 sum = 80203
1 2 3 4 5 ... 396 397 398 400 402 sum = 80203
1 2 3 4 5 ... 396 397 399 400 401 sum = 80203
1 2 3 4 5 ... 396 397 398 399 404 sum = 80204
1 2 3 4 5 ... 396 397 398 400 403 sum = 80204
1 2 3 4 5 ... 396 397 398 401 402 sum = 80204
1 2 3 4 5 ... 396 397 399 400 402 sum = 80204
1 2 3 4 5 ... 396 398 399 400 401 sum = 80204
1 2 3 4 5 ... 396 397 398 399 405 sum = 80205
1 2 3 4 5 ... 396 397 398 400 404 sum = 80205
1 2 3 4 5 ... 396 397 398 401 403 sum = 80205
1 2 3 4 5 ... 396 397 399 400 403 sum = 80205
1 2 3 4 5 ... 396 397 399 401 402 sum = 80205
1 2 3 4 5 ... 396 398 399 400 402 sum = 80205
1 2 3 4 5 ... 397 398 399 400 401 sum = 80205
1 2 3 4 5 ... 396 397 398 399 406 sum = 80206
1 2 3 4 5 ... 396 397 398 400 405 sum = 80206
1 2 3 4 5 ... 396 397 398 401 404 sum = 80206 
```

输出（大数字范围）：

```
for i,combo in enumerate(comboBySum(20,12345,1000000)):
    print(*combo[:5],"...",*combo[-5:],"sum =",sum(combo))
    if i>20: break

12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12364 sum = 247090
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12365 sum = 247091
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12366 sum = 247092
12345 12346 12347 12348 12349 ... 12360 12361 12362 12364 12365 sum = 247092
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12367 sum = 247093
12345 12346 12347 12348 12349 ... 12360 12361 12362 12364 12366 sum = 247093
12345 12346 12347 12348 12349 ... 12360 12361 12363 12364 12365 sum = 247093
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12368 sum = 247094
12345 12346 12347 12348 12349 ... 12360 12361 12362 12364 12367 sum = 247094
12345 12346 12347 12348 12349 ... 12360 12361 12362 12365 12366 sum = 247094
12345 12346 12347 12348 12349 ... 12360 12361 12363 12364 12366 sum = 247094
12345 12346 12347 12348 12349 ... 12360 12362 12363 12364 12365 sum = 247094
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12369 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12361 12362 12364 12368 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12361 12362 12365 12367 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12361 12363 12364 12367 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12361 12363 12365 12366 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12362 12363 12364 12366 sum = 247095
12345 12346 12347 12348 12349 ... 12361 12362 12363 12364 12365 sum = 247095
12345 12346 12347 12348 12349 ... 12360 12361 12362 12363 12370 sum = 247096
12345 12346 12347 12348 12349 ... 12360 12361 12362 12364 12369 sum = 247096
12345 12346 12347 12348 12349 ... 12360 12361 12362 12365 12368 sum = 247096 
```

# iphone - 有什么方法知道是否刚刚在 cellForRowAtIndexPath 中添加了部分？

> ID：14864872
> 
> 赞同：0
> 
> 时间：2013-02-13T22:56:39.357
> 
> 标签：iphone, ios, objective-c, uitableview

我正在对刚刚添加到 a 的单元格应用淡化颜色突出显示`UITableView`，但是当之前添加的单元格第一次滚动到视图中时（例如，如果一次性添加了超过一页的项目），它也会被应用。 )

我的问题是，是否可以确定是否`cellForRowAtIndexPath`因为该部分是最近添加的而被调用，或者是否是因为它是第一次滚动到视图中？

或者，是否可以`cellForRowAtIndexPath`判断显示的单元格是否*可见*？

* * *

编辑：一旦一个项目存在不止一次更新，我设法通过向数据源应用一个标志来实现这一点（我经常更新我的数据，所以在将任何新项目添加到列表之前，我只是在来源为“旧”）。

# javascript - 干燥 JavaScript 片段

> ID：14864876
> 
> 赞同：0
> 
> 时间：2013-02-13T22:56:51.040
> 
> 标签：javascript, dry

下面的东西可以干一点吗？

```
if(totals[label]) {
    totals[label] += increment;
} else {
    totals[label] = increment;
} 
```

基本上，我有一个特殊情况 when `totals[label] === undefined`，因为`undefined + increment === NaN`无论何时`typeof increment === 'number'`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:57:57.810

```
totals[label] = (totals[label] || 0) + increment; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:59:46.500

我觉得完全没问题，你没有重复太多。是的，你可以使用

```
totals[label] = (totals[label] || 0) + increment; 
```

但恕我直言，这并没有节省多少。我认为

```
if (label in totals)
    totals[label] += increment;
else
    totals[label] = increment; 
```

更容易阅读，因为它更好地表达了您想要做的事情。

# perl - Perl 中的连接需要一个“空格”吗？

> ID：14864884
> 
> 赞同：4
> 
> 时间：2013-02-13T22:57:29.877
> 
> 标签：perl

### 尽管我可能没有使用正确的搜索词，但谷歌没有找到任何关于这个问题的解释。

脚本1：

```
#!usr/bin/perl
#concatenation2.pl
use warnings;
use strict;
print"Four sevens are",4*7 ,"\n";
print"Four sevens are".4*7 ."\n"; 
```

脚本2：

```
#!usr/bin/perl
#concatenation2.pl
use warnings;
use strict;
print"Four sevens are",4*7,"\n";
print"Four sevens are".4*7."\n"; 
```

script1 的输出是：

```
Four sevens are28
Four sevens are28 
```

好的，所以我（了解到）在关闭双引号之前需要有一个空格。但是，script2 的输出以错误消息结尾：

```
string found where operator expected at concatenate2.pl line 6, near "7."\n""
(Missing operator before "\n"?)
syntax error at concatenate2.pl line 6, near "7."\n"" 
```

我无法找到解释为什么数字和 . 在 script2 中，虽然数字和 之间不需要空格，但我目前依靠 google 和免费的 perl 书籍来帮助我学习语言。任何帮助（此类细微差别的一般准则）将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T23:01:30.863

`7.`是`perl`词法分析器的数字，例如`3.1415926535`. 为避免混淆，请用空格将点与前面的数字分开：`"the answer is " . 4*7 . " times more complicated"`。

# git - Git子树：仅使用子存储库而不是整个存储库

> ID：14864887
> 
> 赞同：16
> 
> 时间：2013-02-13T22:57:50.333
> 
> 标签：git, git-subtree

我有一个使用一些 3rd 方库的项目。所以目录结构是这样的：

```
MY_COOL_PROJECT
   3rdParty
      LIB_1
      LIB_2
   Source
      MY_PROJECT 
```

这些库位于单独的存储库中。因此，如果我想为 3rd 方库使用 git 存储库，我可以这样做：

```
git subtree add --prefix 3rdParty/LIB_1 --squash http://My3rdPartyLibs.com/lib1.git master 
```

但是，在 lib1.git 存储库中，我只需要一个 bin 文件夹。它还包含文档、示例等文件夹。我怎样才能只将我的存储库与 lib1/bin 文件夹而不是整个存储库“连接”？这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T06:51:59.133

通常，完成一个 git repo 以完全克隆/加载。

您*可以*进行**[稀疏结帐](https://stackoverflow.com/a/2861204/6309)**（Git1.7+），但前提是您不打算进行任何修改并将其推回。看[这个例子](http://iweinfuld.blogspot.fr/2010/06/note-to-self-how-to-sparsely-check-out.html)：

```
$ git init
Initialized empty Git repository in /tmp/si-sandbox/.git/
(master) $ git config core.sparsecheckout true
(master) $ echo message-store/ >> .git/info/sparse-checkout
(master) $ git remote add origin git://github.com/iwein/Spring-Integration-Sandbox.git
(master) $ git pull origin master 
```

* * *

[OP](https://stackoverflow.com/users/2070238/user2070238) user2070238[报告](https://stackoverflow.com/questions/14864887/git-subtree-use-only-subrepository-instead-of-whole-repository/14869316#comment20886689_14869316)：

> 这有一些变化。
> 因为，我使用了我必须使用的子模块

```
 echo MY_FOLDER/* >> .git/info/modules/MY_MODULE/sparse-checkout 
```

> 并且由于某种原因，该`MY_FOLDER/`部分无法正常工作`*`

# c# - 等待 Web 浏览器文档完成而不离开方法

> ID：14864891
> 
> 赞同：4
> 
> 时间：2013-02-13T22:58:11.533
> 
> 标签：c#, winforms, webbrowser-control

我想等待网络浏览器完成加载页面并在之后做一些事情；但是我不想离开主要方法，因为我将根据为浏览器页面读取的值返回一个布尔值。

这是我尝试过的，但显然我要离开主要方法

```
 public async Task<bool> Commit()
    {
        try
        {
            Browser = new WebBrowser { ScriptErrorsSuppressed = true };

            Browser.Navigate(Server);
            Browser.DocumentCompleted += DocumentCompleteMethod;

//HERE I WANNA RETURN TRUE,FALSE DEPENDING ON THE VALUE I WILL READ FROM THE WEB PAGE
        }
        catch (Exception ex)
        {
            return false;
        }
        return true;
    }

private void DocumentCompleteMethod(object sender, WebBrowserDocumentCompletedEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:05:19.897

这是异步编程的常见问题。您的正常同步过程不会像您希望的那样工作。

考虑使用异步方法重新构建您的流程。不要返回值，启动流程并让流程处理要采取的操作。例如，让`DocumentCompleteMethod`根据页面的结果采取行动。

如果您确实必须强制异步进程符合同步方法，那么请考虑使用线程同步器，例如`AutoResetEvent`. Jon Skeet 在 StackOverflow 上发布了一个关于在线程中执行 WebBrowser.Navigate 方法的问题的很好答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T23:08:10.953

您可以将代码修改为此。

```
 public async Task<bool> Commit()
        {
            try
            {
                var Browser = new WebBrowser { ScriptErrorsSuppressed = true };

                Browser.Navigate(Server);
                Browser.DocumentCompleted += DocumentCompleteMethod;

               while (Browser.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }

   //At this point you can access the document as it is sure to be loaded.
   string title = Browser.Document.Title;

    //HERE I WANNA RETURN TRUE,FALSE DEPENDING ON THE VALUE I WILL READ FROM THE WEB PAGE
            }
            catch (Exception ex)
            {
                return false;
            }
            return true;
        }

    private void DocumentCompleteMethod(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-24T09:37:17.900

我今天创建了这个类，在 stackoverflow 上的另一篇文章的帮助下，我想使用 (Async/Await) 在没有任何线程阻塞的情况下获得准备好的 webbrowser 控件。

```
Dim bb = New wbBrowser
Dim wb = Await bb.GetBrowserAsync("http://www.msn.com") 
```

这是课程：

```
Imports System.Threading
Imports System.Threading.Tasks

Public Class wbBrowser
    Implements IDisposable

    Dim m_wbBrowser As New WebBrowser
    Dim m_tcs As TaskCompletionSource(Of WebBrowser)

    Public Sub New()
        m_wbBrowser.ScrollBarsEnabled = False
        m_wbBrowser.ScriptErrorsSuppressed = False
        AddHandler m_wbBrowser.DocumentCompleted, Sub(s, args) m_tcs.SetResult(m_wbBrowser)
    End Sub

    Public Async Function GetBrowserAsync(ByVal URL As String) As Task(Of WebBrowser)
        m_wbBrowser.Navigate(URL)
        Return Await WhenDocumentCompleted(m_wbBrowser)
    End Function

    Private Function WhenDocumentCompleted(browser As WebBrowser) As Task(Of WebBrowser)
        m_tcs = New TaskCompletionSource(Of WebBrowser)
        Return m_tcs.Task
    End Function

    Private disposedValue As Boolean
    Protected Overridable Sub Dispose(disposing As Boolean)
        If Not Me.disposedValue Then
            If disposing Then
                m_wbBrowser.Dispose()
            End If
        End If
        Me.disposedValue = True
    End Sub
    Public Sub Dispose() Implements IDisposable.Dispose
        Dispose(True)
        GC.SuppressFinalize(Me)
    End Sub

End Class 
```

# python - 使用 LAPACK 分发基于 Cython 的扩展

> ID：14864895
> 
> 赞同：68
> 
> 时间：2013-02-13T22:58:22.600
> 
> 标签：python, numpy, cython, lapack, blas

我正在编写一个包含 Cython 扩展和使用`LAPACK`（和`BLAS`）的 Python 模块。如有必要，我愿意使用`clapack`or`lapacke`或某种`f2c`or解决方案。`f2py`重要的是我能够在没有 Python 调用开销的情况下在紧密循环中从 Cython调用`lapack`和例程。`blas`

我在[这里](http://sage.math.washington.edu/home/wstein/www/home/dagss/cython-notur09/lapack/)找到了一个例子。但是，该示例取决于 SAGE。我希望我的模块可以在不安装 SAGE 的情况下安装，因为我的用户不太可能想要或不需要 SAGE 做其他任何事情。我的用户可能安装了 numpy、scipy、pandas 和 scikit learn 等软件包，因此这些都是合理的依赖项。要使用的接口的最佳组合是什么，最小的 setup.py 文件是什么样的，可以获取编译所需的信息（来自 numpy、scipy 等）？

**编辑：** 这是我最终做的。它适用于我的 macbook，但我不知道它的便携性如何。肯定有更好的办法。

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy
from Cython.Build import cythonize
from numpy.distutils.system_info import get_info

# TODO: This cannot be the right way
blas_include = get_info('blas_opt')['extra_compile_args'][1][2:]
includes = [blas_include,numpy.get_include()]

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = cythonize([Extension("cylapack", ["cylapack.pyx"],
                                       include_dirs = includes,
                                       libraries=['blas','lapack'])
                   ])
) 
```

这是有效的，因为在我的 macbook 上，`clapack.h`头文件与`cblas.h`. 然后我可以在我的 pyx 文件中执行此操作：

```
ctypedef np.int32_t integer

cdef extern from "cblas.h":
    double cblas_dnrm2(int N,double *X, int incX)
cdef extern from "clapack.h":
    integer dgelsy_(integer *m, integer *n, integer *nrhs, 
    double *a, integer *lda, double *b, integer *ldb, integer *
    jpvt, double *rcond, integer *rank, double *work, integer *
    lwork, integer *info) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-19T15:23:16.443

如果我正确理解了这个问题，您可以将 SciPy 的 Cython 包装器用于 BLAS 和 LAPACK 例程。这些包装器记录在这里：

*   [布拉斯](https://docs.scipy.org/doc/scipy-0.18.0/reference/linalg.cython_blas.html)
*   [拉包](https://docs.scipy.org/doc/scipy-0.18.1/reference/linalg.cython_lapack.html)

正如文档所述，您有责任检查传递给这些函数的任何数组是否与 Fortran 例程正确对齐。您可以根据需要在 .pyx 文件中简单地导入和使用这些函数。例如：

```
from scipy.linalg.cython_blas cimport dnrm2 
from scipy.linalg.cython_lapack cimport dgelsy 
```

鉴于这是在不同平台上运行的经过良好测试、广泛使用的代码，我认为它是可靠分发直接调用 BLAS 和 LAPACK 例程的 Cython 扩展的良好候选者。

* * *

如果您不希望您的代码依赖于整个 SciPy，您可以在[此处](https://github.com/scipy/scipy/tree/master/scipy/linalg)`linalg`的 SciPy目录中找到这些包装函数的许多相关文件。一个有用的参考是[setup.py 的这些行，](https://github.com/scipy/scipy/blob/master/scipy/linalg/setup.py#L136-L160)其中列出了源文件和头文件。请注意，需要 Fortran 编译器！

*理论上*，应该可以仅在此处隔离编译 BLAS 和 LAPACK Cython 包装器所需的源文件，然后将它们作为独立扩展与您的模块捆绑在一起。

在*实践中*，这是非常繁琐的。linalg 子模块的构建过程需要一些 Python 函数来帮助在不同平台上进行编译（例如从[这里开始](https://github.com/scipy/scipy/blob/master/scipy/_build_utils/_fortran.py)）。构建还依赖于其他 C 和 Fortran 源文件（[此处](https://github.com/scipy/scipy/tree/master/scipy/_build_utils/src)），其路径被硬编码到这些 Python 函数中。

很明显，为了确保 SciPy 在不同的操作系统和架构上正确编译，我们做了很多工作。

我确信可以这样做，但是在对文件进行混洗和调整路径之后，我还没有找到正确的方法来独立于 SciPy 的其余部分构建 linalg 子模块的这一部分。如果我找到正确的方法，我一定会更新这个答案。

# html - 运行一个haml文件

> ID：14864898
> 
> 赞同：0
> 
> 时间：2013-02-13T22:58:32.880
> 
> 标签：html, ruby-on-rails, haml

我有一个 rails 应用程序，它在视图中有一个 haml 文件。我想在浏览器中查看haml文件，这样做的正确方法是什么？

我已经启动了`rails s`

使用`http://localhost:3000`

但是我如何自己查看haml文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:05:12.003

Haml 只是另一种类似于 ERb 的模板语言，因此您可以将其与用 ERb 编写的视图完全相同：

1.  创建路线。
2.  为该路由创建一个带有操作的控制器。
3.  为控制器操作创建一个视图。
4.  访问路由对应的URL。

# python - 如何在 Python 中使用 os.walk 获取特定文件或目录列表？

> ID：14864900
> 
> 赞同：0
> 
> 时间：2013-02-13T22:58:39.490
> 
> 标签：python, indexing, tuples, os.walk

我想知道是否可以通过索引号检索 os.walk 类中特定子文件夹中的特定文件。

我还想知道如何仅列出 os.walk 中特定级别的子目录，例如仅列出根目录的子目录。我可以列出所有子目录，我可以看到第一级子目录的列表首先组合在一起，但是我找不到不使用循环来过滤掉那些子目录的方法......

像这样的东西部分有效（改编自另一个问题），但我不知道如何从一个级别过滤文件夹：

```
dirs[:] = [d for d in dirs if re.match('anyname_\d{3}', d, flags=0)] 
```

os.walk 元组在使用 type 命令时显示为“列表”，而在尝试使用索引号时出现的一些错误是指对字典对象的不当使用。我很困惑。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:29:27.680

尚不完全清楚您想要做什么，但我可以提供一个示例，（我认为）做了足够多的事情，您可以弄清楚如何做您想做的事情：打印每个名为“anyname”的目录中第三个文件的路径名这恰好比顶部低两个级别：

```
for dirpath, dirnames, filenames in os.walk(top):
    depth = os.path.relpath(dirpath, top).count(os.pathsep)
    if depth == 2 and os.path.basename(dirpath) == "anyname":
        print(os.path.join(dirpath, filenames[2])) 
```

您可以通过修剪`walk`甚至不查看超过 2 深的目录来提高效率：

```
for dirpath, dirnames, filenames in os.walk(top):
    depth = os.path.relpath(dirpath, top).count(os.pathsep)
    if depth == 2:
        if os.path.basename(dirpath) == "anyname":
            print(os.path.join(dirpath, filenames[2]))
        dirnames.clear() 
```

或者，更有效但更复杂一点，修剪所有未命名为“anyname”的深度 2 目录：

```
for dirpath, dirnames, filenames in os.walk(top):
    depth = os.path.relpath(dirpath, top).count(os.pathsep)
    if depth == 1:
        dirnames[:] = ["anyname"] if "anyname" in dirnames else []
    elif depth == 2:
        print(os.path.join(dirpath, filenames[2]))
        dirnames.clear() 
```

# c++ - 什么时候故意引起未定义的行为是公平的？

> ID：14864901
> 
> 赞同：3
> 
> 时间：2013-02-13T22:58:40.970
> 
> 标签：c++, libraries, undefined-behavior, contract

如果您违反对模板类型的任何要求、提供错误的函数参数或任何其他违约行为，标准库通常会允许未定义的行为。在用户库中允许这样做是否被认为是一种好习惯？什么时候这样做是公平的？

`operator[]`考虑为容器编写一个：

```
template <typename t>
T& container<T>::operator[](int i)
{
  return internal_array[i];
} 
```

如果`i`索引超出了 的范围`internal_array`，我们会遇到未定义的行为。我们应该允许这种情况发生还是进行边界检查并抛出异常？

另一个例子是一个接受`int`参数但只允许受限域的函数：

```
int foo(int x)
{
  if (x > 0 && x <= 10) {
    return x;
  }
} 
```

如果`x`不在域内，则执行将在没有`return`语句的情况下到达函数的末尾 - 这会产生未定义的行为。

图书馆开发人员是否应该因为允许这样做而感到难过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:03:47.490

> 什么时候故意引起未定义的行为是公平的？

假设您是从库实现者的角度提出这个问题：每当您警告客户未能遵守给定函数的先决条件会导致未定义行为，并且您的客户违反了这些先决条件。

C++11 标准库定义了很多这样的函数：想想序列集合的下标运算符。

另一方面，如果您是从应用程序程序员的角度来问这个问题，答案当然是“从不”，*除非*您正在编写依赖于编译器的某些*文档*化扩展和/或某些您的操作系统的功能（但是您是否仍在“谈论 C++”是有争议的）。

> 图书馆开发人员是否应该因为允许这样做而感到难过？

如果是这样的话，先生。斯捷潘诺夫现在应该感觉很*糟糕*。不，这还不错，这仅取决于您的库是为最大效率还是为最大安全而设计的——中间有很多细微差别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:06:28.117

这一切都归结为文档。

直觉上你不会期望`[]`做任何边界检查，但你也可以为`at`你的容器提供一个抛出异常的方法（是的，就像编写`std`. 当然，您可以抛出异常，但要记录此行为。

第二个是公平竞争，只要您清楚地记录如果使用错误参数调用函数**并且**您有充分的理由这样做（红色亮起），则行为未定义。如果您正在设计一个性能关键库，您不希望检查输入的开销。如果不是，则抛出异常。

# php - php 将字符串化对象设为 null

> ID：14864902
> 
> 赞同：1
> 
> 时间：2013-02-13T22:58:43.193
> 
> 标签：php, javascript, jquery

我正在尝试使用 jquery ajax 将一些信息传递给 php 页面。我真的不明白为什么 php 页面不断回显我发送的字符串化 JSON 为空

```
//php
if ($type == "new" || $type == "update"){
    $new_address = json_decode($_REQUEST['address'], true);
    echo json_encode($new_address); //Null
}

//js
var string_encoded_address = JSON.stringify(address_obj.address);
string_encoded_address = encodeURIComponent(string_encoded_address);
console.log(string_encoded_address);
$.ajax({
    type: "post",
    url: "order_queries_templates/queries/address.php",
    data: "type=new&user_id=" + user_id + "&address=" + string_encoded_address,
    dataType: "json",
    success: function (returnedData) {
        console.log(returnedData);
    }
}); 
```

这为我的`data`财产提供了一个字符串：

```
type=new&user_id=8244&address=%7B%22companyName%22%3A%22test%20company%22%2C%22address1%22%3A%222420%20sample%20Road%22%2C%22city%22%3A%22SIOUX%20CITY%22%2C%22state%22%3A%22IA%22%2C%22zip%22%3A%2251106%22%2C%22cityStateZip%22%3A%22SIOUX%20CITY%2C%20IA%2051106%22%7D 
```

它有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:49:27.967

您的代码不起作用的原因是您已`magic_quotes_gpc`启用。它为双引号添加了转义，如使用此`cli`脚本所示：

```
$s = 'address=%7B%22companyName%22%3A%22test%20company%22%7D';
// parse query string into array
parse_str($s, $a);
// print address portion
echo $a['address'], "\n";

php -dmagic_quotes_gpc=On test.php 
```

输出：

```
{\"companyName\":\"test company\"} 
```

额外的转义中断`json_decode()`，因此它返回`null`。

通过`magic_quotes_gpc`使用`.htaccess`或编辑`php.ini`.

但是，让 jQuery 为您处理序列化要容易得多：

```
$.ajax({
    ...,
    data: {
      type:'new', 
      user_id: user_id, 
      adress: address_obj.address
    },
    ...
}); 
```

在这种情况下，您不必再`json_decode()`在服务器上，只需`$_POST['address']`直接引用即可。

# r - 转换 R 数据框中的列

> ID：14864907
> 
> 赞同：2
> 
> 时间：2013-02-13T22:59:07.390
> 
> 标签：r, dataframe

我有一个表单交易数据的数据框

```
transactions <- data.frame(transaction=c("T1","T2","T2","T3","T3","T3"),sku=c("item_a","item_b","item_c","item_a","item_b","item_d")) 
```

这给了我这个

```
 transaction    sku
1          T1 item_a
2          T2 item_b
3          T2 item_c
4          T3 item_a
5          T3 item_b
6          T3 item_d 
```

我想作为输出得到的是这个数据框：

```
output <- data.frame(transaction=c("T1","T2","T3"),sku=c("item_a","item_b item_c","item_a item_b item_d")) 
```

看起来像这样

```
 transaction                  sku
1          T1               item_a
2          T2        item_b item_c
3          T3 item_a item_b item_d 
```

我尝试了各种方法，例如首先通过 transactions$transaction 对原始数据帧使用**拆分**，但后来我无法从结果列表中提取 sku 数据。任何指向正确方向的指针将不胜感激。

**编辑**：输出数据框中的错字已修复。感谢朱巴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T23:04:46.793

这真的很容易使用`data.table`，它有一个打印列表列的好方法

```
library(data.table)
DT <- data.table(transactions)

DT[,list(sku = list(sku)) ,by=transaction]
##    transaction                  sku
## 1:          T1               item_a
## 2:          T2        item_b,item_c
## 3:          T3 item_a,item_b,item_d 
```

如果您希望将它们粘贴在一起，您也可以这样做

```
DT <- data.table(transactions)
DT[,list(sku = paste(sku, collapse = ', ')) ,by=transaction]
   transaction                  sku
1:          T1               item_a
2:          T2        item_b,item_c
3:          T3 item_a,item_b,item_d 
```

`sku`现在将是一个字符向量，而不是每个事务的列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T23:07:26.757

`plyr`与_`summarise`

```
require(plyr)
ddply(transactions, .(transaction), summarise, sku=paste(sku, collapse = " "))

#  transaction                  sku
# 1          T1               item_a
# 2          T2        item_b item_c
# 3          T3 item_a item_b item_d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T23:05:44.193

改为使用`plyr`：

```
library(plyr)
new_trans <- ddply(
  transactions,
  .(transaction),
  transform,
  sku=paste0(sku, collapse=" ")
  )
new_trans <- unique(new_trans)
print(new_trans) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T02:08:02.553

要添加到您的选项中，这在 base R 中也很容易`aggregate`：

```
aggregate(sku ~ transaction, transactions, paste, collapse = " ")
  transaction                  sku
1          T1               item_a
2          T2        item_b item_c
3          T3 item_a item_b item_d 
```

# drupal - 链接到drupal中颜色框内节点的图像

> ID：14864910
> 
> 赞同：0
> 
> 时间：2013-02-13T22:59:15.200
> 
> 标签：drupal, colorbox

我正在寻找一个图像，当单击时将节点加载到颜色框中。

到目前为止，我正在使用 Colorbox 和 Colorbox_node 模块，并且有一个带有这段代码的块

```
< a class="colorbox-node" href="cast?width=500&height=500" >
Link to my node alised 'cast'
< /a > 
```

单击时的文本链接通过弹出一个颜色框完全符合我的要求。虽然如果我用图像链接替换文本，例如：

```
< a class="colorbox-node" href="cast?width=500&height=500" >
< img src="/images/cast.png"  / >
< /a > 
```

图像显示，但不是可点击的链接。

我在某个地方搞砸了，还是有不同的方法一起做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T11:52:07.443

创建新视图：按顺序添加以下字段：Nid Title Image Body

标题：配置

```
Formatter: Image
Image Style: thumbnail
Link image to: Nothing 
```

单击重写结果并选择复选框

```
Output this field as a link 
```

设置选项如下：

```
Link Path: node/[nid]/?width=600&height=600
Checked Checkbox "Use Absolute Path"
Link Class: colorbox-node
Alt Text: [title] 
```

保存您的视图和运行视图。

单击任何图像以在 Colorbox 中加载整个节点内容。注意：必须安装 Colorbox、colorbox_node 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T20:06:45.287

AshwinP 的回答有效，但记得添加类型为 Content: Nid without label 并勾选“exclude from display”的字段，并将其放在要链接的图像之前，否则将无法链接到节点. 图像样式和替代文本也无关紧要，只需使用您自己的设置即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-17T22:42:45.133

这不再起作用了，似乎现在需要向链接添加数据选项:(

# c# - 字符串中的转义序列

> ID：14864913
> 
> 赞同：2
> 
> 时间：2013-02-13T22:59:28.927
> 
> 标签：c#, .net, wpf

我有一个问题，如果我将硬编码字符串`\x1B|200uF`作为参数传递，命令会正确接受它。

但是，当我将 XML 元素中的相同值检索到新的字符串变量中时，我得到以下值：`\\x1B|200uF`

如您所见，有一个额外的转义序列。

所以总结一下问题：

```
 using (XmlReader xmlReader = XmlReader.Create(@"PosPrinter.xml"))
                {     
                    while (xmlReader.Read())
                    {
                        if (xmlReader.NodeType == XmlNodeType.Element)
                        {
                            switch (xmlReader.Name)
                            {
                                case "PosPrinter":
                                    _printer.LogicalName = xmlReader.GetAttribute("LogicalName");
                                    break;

                                case "FeedReceiptCommand":
                                    _printer.FeedReceiptCommand = xmlReader.GetAttribute("value");
                                    break; 
```

我将值检索到我的“FeedReceiptCommand”字符串中，上面提到的值存储在 xml 中，但与开头的额外转义序列一样`\x1B|200uF`被检索到字符串中。`\\x1B|200uF`

然后我使用字符串变量 FeedReceiptCommand 调用我的命令：

> ```
>  _posPrinter.PrintNormal(PrinterStation.Receipt, PrinterSettings.FeedReceiptCommand ); 
> ```

但是由于额外的转义序列，该命令不会执行。

但是，如果我用硬编码的值调用相同的命令：

> ```
>  _posPrinter.PrintNormal(PrinterStation.Receipt, "\x1B|200uF"); 
> ```

...然后命令成功执行..

该值`\x1B|200uF`是使用 Microsoft.PointOfService 发送到 Epson TM-T88V 打印机的 ESC 命令，我认为 '\x' 代表十六进制，而 1B 是十六进制值。

我试图通过使用“Trim”、“Substring”来摆脱额外的转义序列，甚至使用 foreach 循环来循环字符串中的每个字符以构建一个新字符。我也试过字符串生成器。

但我在这里的某个地方错过了重点。

因此，我将不胜感激如何通过变量代替`\x1B|200uF`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:23:29.077

问题确实存在于 XML 文件中（正如@OlafDietsche 指出的那样）。在 C# 字符串中，\x1B 表示“代码为 1B（十六进制）或 27（十进制）的字符”，在 XML 中它只是四个字符。

因此，您必须对 XML 文档中的特殊字符进行不同的编码。从理论上讲，您只需将 \x1B 替换为`&#x1B;`，这是表示“字符编号 1B（十六进制）”的 XML 方式。然而，在这种特定情况下的问题是`&#x1B;`XML 中不允许这样做。XML 文档中的有效字符在此处定义：[http://www.w3.org/TR/xml/#charsets](http://www.w3.org/TR/xml/#charsets) 请注意#x1B 不属于此范围。

您可以使用*不同*的字符来表示 XML 中的 Escape 并在 C# 代码中替换它。确保使用 a) 是有效 XML 字符且 b) 永远不会用作实际数据的代理字符。

例如，选择 xFEED 作为您的转义字符（因为它很容易识别）。所以你的文档看起来像：

```
<FeedReceiptCommand value="&#xFEED;|200uF"/> 
```

在您的 C# 代码中，相应地替换它：

```
string actualValue = reader.GetAttribute("value").Replace('\xFEED', '\x1B') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:09:45.897

在硬编码字符串中，您有字符 hex `1B`for`ESC`加上 string `|200uF`。我还没有看到您的 XML，但我猜在 XML 中，您确实有字符串，`\x1B`即四个字符`\`、`x`和.`1``B`

这就是硬编码和 XML 两者之间的区别。

AFAIK，没有办法`ESC`在 XML 1.0 文档中包含控制字符。`&#x001B;`如果您的 XML 解析器未正确传递它，您可能会尝试将其编码为并自行解析。

# jquery - 动画 Gif 在 FireFox 18.x 中不起作用

> ID：14864915
> 
> 赞同：0
> 
> 时间：2013-02-13T22:59:36.790
> 
> 标签：jquery, asp.net, animation

我在网页中有以下代码。我发现如果我删除了 window.location 的 javascript，那么动画 gif 将正确显示动画，否则它总是显示为冻结。这在 IE 中不会发生。有什么解决办法吗？

```
 <script type="text/javascript">

        function Redirect() {

            jQuery.fn.center = function () {
                this.css("position", "absolute");
                this.css("top", ($(window).height() - this.height()) / 2 + $(window).scrollTop() + "px");
                this.css("left", ($(window).width() - this.width()) / 2 + $(window).scrollLeft() + "px");
                return this;
            }

            $('#wrapperDiv').center();

            $('#imgDiv').html('<img src="../Images/ajaxLoading2.gif" alt="Loading..." />');

           $('#imgDiv').css("display", "block");

            window.location = '<%=RedirectURL %>';

        }

        $(document).ready(function () {

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:20:15.750

我认为这可能只是你无法改变的事情。过去我在 IE 中看到过这种情况，当页面被重定向时它会停止 GIF 动画。

# json - Kentico：JSON 序列化不转义引号

> ID：14864916
> 
> 赞同：3
> 
> 时间：2013-02-13T22:59:37.537
> 
> 标签：json, escaping, kentico

有没有办法强制 Kentico CMS JSON 序列化程序正确转义引号？

今天我正在帮助我的妻子调试一个文本清理例程，在某些情况下，用户创建了 HTML 锚标记，其中 href 目标被引号包围。生成的 JSON 无效，类似于：

```
"news" : "some text <a href="foo.html">click here</a> more text" 
```

显然，围绕“foo.html”的额外引号将阻止正确解析 JSON 数据值。我认为它们应该用斜杠转义：\"

我对 Kentico 不熟悉，但我想知道某处是否有开关？

# android - 转到 API <= 10 中的新 Activity 时如何清除 backstack

> ID：14864917
> 
> 赞同：1
> 
> 时间：2013-02-13T22:59:39.197
> 
> 标签：android, api, android-activity

我有一个具有如下启动流程的应用程序：

**StartupActivity -> LoginDialog -> LoginActivity -> HomeActivity**

当我从 LoginActivity 转到 HomeActivity 时，我调用：

```
Intent intent = new Intent( this, HomeActivity.class );
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB )
{
    intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK );
}
else
{
    intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP );
}
startActivity( intent );
finish(); 
```

`On >= API 11`，这使得它`HomeActivity`是一个全新的任务，并且`StartupActivity`不再在后台堆栈上。

但是，在 上`API <= 10`，从后面的堆栈中`FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP`清除了，但仍然存在。如果用户从 中单击返回，则会将他们带回到。`LoginActivity``StartupActivity``HomeActivity``StartupActivity`

*如何从后台堆栈中清除 StartupActivity？*

*   根据我的研究，似乎最好的方法是 startActivityForResult() 但我可以从对话框中做到这一点吗？谁会得到结果？

**摘要**：

*   从`StartupActivity`，我展示`LoginDialog`。
*   从`LoginDialog`，我在`LoginActivity`不清除后堆栈的情况下转到 。
    *   这是因为我希望用户能够`LoginActivity`从`StartupActivity`.
*   从`LoginActivity`，我去`HomeActivity`并清除后面的堆栈
*   按下返回仍然会回到`StartupActivity`打开状态`devices <= API 10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:05:09.563

我想出了怎么做...

当 LoginDialog 启动 LoginActivity 时，我可以使用 startActivityForResult() 使 LoginActivity 将结果传回 StartupActivity。如果结果是成功登录，我可以完成 StartupActivity。

LoginDialog 可以从多个地方触发，但如果它是从 StartupActivity 触发的，我可以设置一个标志以便调用 startActivityForResult()。

我坚持的事情是如何使用对话框中的 startActivityForResult 将结果返回到启动对话框的活动中......我想通了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:19:41.967

在您的 AndroidManifest.xml 文件中添加以下内容

```
android:noHistory="true" 
```

对于您要从 backstack 中删除的所有活动。您必须将其放在`<activity>`标签内。

或者，只要您开始一项新活动，就在 StartupActivity 上调用完成。

我建议您使用第一个选项，因为它是正确的方法。

干杯。

看看这个答案 - >[答案](https://stackoverflow.com/questions/1898886/removing-an-activity-from-the-history-stack)

# java - 是否需要在同步块内使用线程 wait() 和 notify()？

> ID：14864919
> 
> 赞同：1
> 
> 时间：2013-02-13T22:59:47.057
> 
> 标签：java, concurrency, wait, notify

在Java中，是否需要在块内`wait()`使用线程？`notify()``synchronized`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T23:02:59.367

不会。Java 会自动确保标记部分由一个且只有一个线程输入。

[http://tutorials.jenkov.com/java-concurrency/synchronized.html](http://tutorials.jenkov.com/java-concurrency/synchronized.html)

另请参阅此问题：[java:wait()、notify() 和同步块](https://stackoverflow.com/questions/3190545/java-wait-notify-and-synchronized-blocks?rq=1)

* * *

嗯..似乎是一些语言问题。

您不需要在同步块中使用等待和通知，但如果要使用等待和通知，则必须在同步块中使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T23:06:38.050

简而言之，[是](https://stackoverflow.com/questions/14811803/threadwait-and-notify)的。在调用等待或通知之前，线程必须拥有对象的监视器。

# javascript - 根据屏幕更改不同的背景图像：- css HTML5 Gallery

> ID：14864920
> 
> 赞同：3
> 
> 时间：2013-02-13T22:59:52.233
> 
> 标签：javascript, html, css

概念很简单，我有一个 html5 页面，它是响应式的，只是 bground 图像不会随屏幕大小而变化：现在代码是：

```
<div id="home-gallery" class="gallery-container fullscreen">
<section id="home-welcome" class="slide-1 gallery-slide background-cover" style="background-image:url(static/img/home/image1.jpg)">
.....

<section id="home-campaigns" class="slide-2 gallery-slide background-cover" style="background-image:url(static/img/home/image2.jpg)"> 
```

也就是说，它使用一个常见的图像。我在 CSS 中尝试做的是：

```
@media (min-width:800px) { background-image: url(bg-800.jpg) }
@media (min-width:1024px) { background-image: url(bg-1024.jpg) }
@media (min-width:1280px) { background-image: url(bg-1280.jpg) } 
```

但我不确定如何将`style="background-image:`属性与 css 代码相关联？我应该写：

```
<section id="home-campaigns" class="slide-2 gallery-slide background-cover" style="background-image"> 
```

在CSS中`#home-welcome background-image @media (min-width:800px) { background-image: url(bg-1024.jpg) } @media (min-width:1024px) { background-image: url(bg-1024.jpg) } @media (min-width:1280px) { background-image: url(bg-1280.jpg) }`

请帮忙。我试过了。`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:04:53.300

```
@media (min-width:800px) { 
#home-welcome{
background-image: url(bg-800.jpg);
}
}
@media (min-width:1024px) {
#home-welcome{
 background-image: url(bg-1024.jpg);
}
}
@media (min-width:1280px) {
#home-welcome{
 background-image: url(bg-1280.jpg);
}
} 
```

这将根据屏幕大小设置 home-welcome div 的背景图像。

尽管使用最小宽度，所有三个规则都会匹配。您应该改用 max-width 。

编辑：我收回关于最大宽度的声明。取决于你想要达到的目标。请记住，当多个规则匹配并且最后声明的规则获胜时，css 规则会级联。明智地使用!important。

对应的html

```
<section id="home-welcome" class="slide-2 gallery-slide background-cover"> 
```

还要检查这个[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

您可以使用`background-size:contain`使图像适合容器 div。

# python - 在 Python 列表理解中是否可以访问项目索引？

> ID：14864922
> 
> 赞同：123
> 
> 时间：2013-02-13T22:59:56.703
> 
> 标签：python, list, list-comprehension

考虑下面的 Python 代码，我用它添加了一个新`list2`的索引从 1 到 3 的所有项目`list1`：

```
for ind, obj in enumerate(list1):
    if 4 > ind > 0:
        list2.append(obj) 
```

如果我无法通过枚举访问索引，您将如何使用列表理解来编写此内容？

就像是：

```
list2 = [x for x in list1 if 4 > ind > 0] 
```

但由于我没有`ind`号码，这行得通吗？

```
list2 = [x for x in enumerate(list1) if 4 > ind > 0] 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2013-02-13T23:01:37.407

```
list2 = [x for ind, x in enumerate(list1) if 4 > ind > 0] 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-13T23:02:19.390

如果使用`enumerate`，*则*可以访问索引：

```
list2 = [x for ind, x in enumerate(list1) if 4>ind>0] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-14T00:01:54.157

除非您的实际用例更复杂，否则您应该只使用@wim 建议的列表切片

```
>>> list1 = ['zero', 'one', 'two', 'three', 'four', 'five', 'six']
>>> [x for ind, x in enumerate(list1) if 4 > ind > 0]
['one', 'two', 'three']
>>> list1[1:4]
['one', 'two', 'three'] 
```

对于更复杂的情况 - 如果您实际上不需要索引 - 迭代切片或 islice 会更清晰

```
list2 = [x*2 for x in list1[1:4]] 
```

或者

```
from itertools import islice
list2 = [x*2 for x in islice(list1, 1, 4)] 
```

对于小切片，简单的`list1[1:4]`. 如果切片可以变得非常大，最好使用 islice 来避免复制内存

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-15T18:06:58.387

对于那些想知道的人，如果您的用例需要，您可以轻松地将匹配索引存储为列表推导的结果。您可能需要评估列表中每个项目的值以确定它是否与某个值或模式匹配，并且您只想获取匹配索引的列表以供以后处理而不是匹配值。

这可以如下所示完成：

```
>>> values = ['zero', 'one', 'two', 'three', 'four', 'five', 'six']
>>> search = ['one', 'three', 'five']
>>> matches = [i for i, x in enumerate(values) if x in search]
>>> print(matches)
[1, 3, 5] 
```

上面的重要部分是`[i for i, x in enumerate(l) if ...]`列表理解中模式的使用，其中索引`i`被捕获，而不是`x`使用更典型`[x for x in l if ...]`或替代`[x for i, x in enumerate(l) if ...]`枚举列表理解模式获得的值。

# web - Clojure 网站到 html 和 javascript？

> ID：14864923
> 
> 赞同：2
> 
> 时间：2013-02-13T22:59:57.090
> 
> 标签：web, clojure

问题是：有没有办法在没有服务器的 .WAR 文件的情况下获取或编译用 clojure 编写的网站到 HTML 和 Javascript 文件？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:16:44.047

为此，您可能需要考虑用[ClojureScript](https://github.com/clojure/clojurescript)编写站点。它是一种不同的语言，但与 Clojure 非常相似。这样就可以使用客户端 java 脚本和静态资源（如 HTML、CSS、图像等）编写整个站点。或者您可以使用节点来运行生成的服务器端 JavaScript。

另一种选择，取决于我如何解释您的问题，将其编写为 Clojure 中的动态站点，然后使用 wget 抓取整个内容并保存它的静态快照。虽然也许这不是你所要求的？您还可以使用 Hickup 或 Enlive 创建模板，然后运行模板以生成静态提供的 html，无需应用服务器或动态内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:12:25.987

如果你想创建一个静态站点，有几个选项，

*   [https://github.com/nakkaya/static](https://github.com/nakkaya/static)
*   [https://github.com/liquidz/misaki](https://github.com/liquidz/misaki)

# arrays - 从日历对象到数组的 Powershell 日期范围

> ID：14864928
> 
> 赞同：1
> 
> 时间：2013-02-13T23:00:26.333
> 
> 标签：arrays, date, user-interface, powershell, calendar

我有一个 powershell GUI 日历，您可以在其中选择一系列日期。我需要能够将该信息转换为格式为 YYYYMMDD 的日期数组。

我知道 $Date = "{0:yyyyMMdd}" -f (Get-Date) 会起作用，但我似乎无法将项目放入数组中。

我需要一个这样的数组：

```
20130211
20130212
20130213 
```

这是到目前为止的代码。谢谢你的帮助！

```
$Calendar = New-Object System.Windows.Forms.MonthCalendar 
$Calendar.Location = New-Object System.Drawing.Size(10,80)
$Calendar.ShowTodayCircle = $False
$Calendar.MaxDate = (Get-Date).AddDays(1)
$Calendar.MaxSelectionCount = $CalendarSelect
$MenuBox.Controls.Add($Calendar) 
$Dates = $Calendar.SelectionRange 
```

所以需要将 $Dates 转换为数组。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:38:42.440

的`SelectionRange`属性`MonthCalendar`返回一个[SelectionRange](http://msdn.microsoft.com/en-us/library/system.windows.forms.selectionrange.aspx)对象，其中的`Start`and`End`属性指示范围的开始和结束。您只需遍历范围即可获得所需的输出：

```
for($d = $dates.Start; $d -le $dates.End; $d = $d.AddDays(1)){get-date $d -Format "yyyyMMdd"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T02:38:59.937

试试这个：

```
$formatted = $dates | select @{name='date';expression={get-date $_.date -f yyyyMMdd}} 
```

# javascript - 如何动态创建多个 jQuery 滑块？

> ID：14864930
> 
> 赞同：2
> 
> 时间：2013-02-13T23:00:39.743
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个 WordPress 网站，该网站将自定义帖子类型转换为页面上的滑块。我正在为我的滑块使用[Sequence.js](http://www.sequencejs.com/)，我可以手动创建多个滑块，以下问题没有问题：

```
//sequence slider options to be used by slider1
var options0 = {
    sartingFrameID: 1,
    cycle: true,
    autoPlay: false,
    nextButton: '.next0',
    prevButton: '.prev0',
    fallback: {
        theme: "fade",
        speed: 100
    }
}

//slider1
var sequence0 = $(".slideContainer0").sequence(options0).data("sequence");

//sequence slider options to be used by slider2
var options1 = {
    sartingFrameID: 1,
    cycle: true,
    autoPlay: false,
    nextButton: '.next1',
    prevButton: '.prev1',
    fallback: {
        theme: "fade",
        speed: 100
    }
}

//slider2
var sequence1 = $(".slideContainer1").sequence(options1).data("sequence"); 
```

我怎样才能简化这个？并使其动态化，以便为每个发布的帖子创建一个滑块？任何帮助将不胜感激。

**编辑 - 添加了工作答案**

我在第一部分使用了来自 Cymen 的答案，将选项输出转换为一个函数，并简单地使用每个序列实例的计数器调用该函数。然后使用他答案的第二部分来初始化每个序列滑块，这很有效。

这就是我现在的工作：

```
function options(number) {
    return {
        startingFrameID: 1,
        cycle: true,
        autoPlay: false,
        nextButton: '.next' + number,
        prevButton: '.prev' + number,
        fallback: {
            theme: "fade",
            speed: 100
        }
    };
}

var count = 0;
$('.slideContainer').each(function() {
    var sequence = $(this); 
    sequence.sequence(options(count)).data('sequence');
    count++;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:12:51.427

我没有使用序列，但从您的帖子中我猜您希望能够重新创建选项对象，并增加数字。所以你可以做这样的事情：

```
function options(number) {
  return {
   startingFrameID: 1,
    cycle: true,
    autoPlay: false,
    nextButton: '.next' + number,
    prevButton: '.prev' + number,
    fallback: {
        theme: "fade",
        speed: 100
    }
  };
} 
```

然后像这样使用它：

```
$(target).sequence(options(0)).data("sequence"); 
```

或者在您的具体示例中：

```
//slider1
var sequence0 = $(".slideContainer0").sequence(options(0)).data("sequence");

//slider2
var sequence1 = $(".slideContainer1").sequence(options(1)).data("sequence") 
```

并做你正在谈论的如何给所有序列相同的类，比如说`custom-sequence`然后做这样的事情：

```
var count = 0;
$('.custom-sequence').each(function() {
  var sequence = $(this);
  sequence.sequence(options(count)).data('sequence');
  count++;
}); 
```

这可能有效，也可能无效——我不太清楚它在`.data('sequence')`做什么。

# mysql - MySQL 行标题基于查询中的字段分组的顺序

> ID：14864931
> 
> 赞同：0
> 
> 时间：2013-02-13T23:00:44.190
> 
> 标签：mysql, sql, group-by, sql-order-by

我想在基于 ORDER BY 字段的 MySQL 查询中输出行分组标题。不知道如何解释这一点，所以最好只展示一个我想要完成的例子。

```
SELECT * FROM products_table
ORDER BY Category, Description

Prod_num Category Description Price
type_1
00001    type_1   Prod 1      $1
00002    type_1   Prod 2      $2
00003    type_1   Prod 3      $3
00004    type_1   Prod 4      $4
00005    type_1   Prod 5      $5
type_2
00006    type_2   Prod 6      $6
00007    type_2   Prod 7      $7
00008    type_2   Prod 8      $8
00009    type_2   Prod 9      $9
type_3
00010    type_3   Prod 10     $10
00011    type_3   Prod 11     $11 
```

我希望在显示具有该类别的所有产品之前将类别字段显示为行标题。我想我在某处看到过这个帖子，但经过大量搜索后无法弄清楚如何去做，主要是因为我认为我没有使用正确的术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:34:04.563

我坚信这应该在您的代码的演示方面完成，但是，这是我过去使用`GROUP BY`and看到的方式`WITH ROLLUP`：

```
SELECT  Category, 
        IFNULL(prod_num,'') Prod_Num, 
        IFNULL(description,'') Description, 
        IFNULL(price,'') Price
FROM    
  (
    SELECT *
    FROM   Products_Table
    GROUP BY Category,Prod_num,Description,Price
    WITH ROLLUP
  ) AS X
WHERE Category IS NOT NULL
  AND (
    (Prod_num IS NOT NULL AND Description IS NOT NULL AND Price IS NOT NULL)
     OR 
    (Prod_num IS NULL AND Description IS NULL AND Price IS NULL)
  )
ORDER BY Category,Prod_num,Description,Price 
```

这不是您要求的 100%，因为它将类别列放在首位——我还没有玩够它，看看是否可以改变它。

结果如下：

```
CATEGORY  PROD_NUM  DESCRIPTION  PRICE
type_1          
type_1    00001     Prod 1       $1
type_1    00002     Prod 2       $2
type_2          
type_2    00003     Prod 3       $3
type_2    00004     Prod 4       $4
type_2    00005     Prod 5       $5
type_3          
type_3    00006     Prod 6       $6 
```

和一个样本[Fiddle](http://sqlfiddle.com/#!2/68ef9/1)。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)

# mysql - Mysql JOIN（多个）表

> ID：14864933
> 
> 赞同：2
> 
> 时间：2013-02-13T23:01:01.683
> 
> 标签：mysql

我有 3 张桌子。其中 2 个是相同的（相同的列，不同的数据），第三个有一些关于其他 2 的信息数据。数据库看起来像这样：

表格1：

```
+--------------+
|  ID | Name   |
+--------------+
| 1  | Table 2 |
| 2  | Table 3 |
+--------------+ 
```

表 2：

```
+-------------------------------+
| Name | Temperature | Pressure |
+-------------------------------+
| Table 2 |    22    | 1013     |
+-------------------------------+ 
```

表3：

```
+-------------------------------+
| Name | Temperature | Pressure |
+-------------------------------+
| Table 3 |    20    | 1009     |
+-------------------------------+ 
```

我正在尝试将所有内容加入一个表中，该表应如下所示：

```
+-------------------------------+
| Name | Temperature | Pressure |
+-------------------------------+
| Table 2 |    22    | 1013     |
| Table 3 |    20    | 1009     |
+-------------------------------+ 
```

知道 sql 查询应该是什么样子吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:05:44.557

尝试联合：

```
SELECT table1.name, temperature, pressure 
FROM table1 inner join table2 ON
table1.name = table2.name
UNION
SELECT table1.name, temperature, pressure 
FROM table1 inner join table3 ON
table1.name = table3.name 
```

编辑：您可以从这些结果中进行另一个选择，然后您可以限制、分组或订购：

```
SELECT * FROM
(
    SELECT table1.name, temperature, pressure 
    FROM table1 inner join table2 ON
    table1.name = table2.name
    UNION
    SELECT table1.name, temperature, pressure 
    FROM table1 inner join table3 ON
    table1.name = table3.name
) as JoinedTable
LIMIT 0, 1 
```

编辑 2：要从每个表（表 2 和表 3）中只有一行，您可以对每个查询使用 limit/group by/order by（假设您有列日期）：

```
SELECT table1.name, temperature, pressure 
FROM table1 inner join table2 ON
table1.name = table2.name
ORDER BY date DESC
LIMIT 0, 1
UNION
SELECT table1.name, temperature, pressure 
FROM table1 inner join table3 ON
table1.name = table3.name
ORDER BY date DESC
LIMIT 0, 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:05:53.593

您可以使用[UNION](http://www.w3schools.com/sql/sql_union.asp)语句：

```
(
    SELECT Name, Temperature, Pressure
    FROM Table1 INNER JOIN Table2 ON Table1.Name = Table2.Name
)
UNION
(
    SELECT Name, Temperature, Pressure
    FROM Table1 INNER JOIN Table3 ON Table1.Name = Table3.Name
) 
```

# c# - 检查枚举类型是否为 ulong

> ID：14864934
> 
> 赞同：3
> 
> 时间：2013-02-13T23:01:28.700
> 
> 标签：c#, types

我有一个枚举，我想检查枚举类型是否为 ulong。

到目前为止尝试过：

```
 var checkValue = Enum.GetUnderlyingType(param.ParamType); // param is enum
 if (checkValue is ulong){ } // doesn't work

 var checkValue = param.value;
 if (checkValue is ulong){ } // doesn't work 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T23:05:11.653

[`Enum.GetUnderlyingType`](http://msdn.microsoft.com/en-us/library/system.enum.getunderlyingtype.aspx)返回一个类型的对象`Type`，它确实不是一个`ulong`，它是`ulong`类型本身:)

尝试这个：

```
if (checkValue == typeof(ulong)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:11:31.533

试试这个：

```
var enumType = param.GetType();

var utype = Enum.GetUnderlyingType(entype);

if(utype == typeof(ulong)) 
```

# java - 从运行 Java Jersey Rest API 的 HTTP 服务器传输大文件

> ID：14864939
> 
> 赞同：10
> 
> 时间：2013-02-13T23:01:54.157
> 
> 标签：java, file, jersey, netty

我正在使用 Java JDK 1.7 和 Jersey Web 服务框架编写一个 Web 服务。我需要提供的其中一件事是允许经过身份验证的客户端下载某些大型数据文件（1-3 GB）。理想情况下，我希望这是一个暂停和恢复类型的可下载选项。我尝试了 jersey 多部分 API，并且能够让它在高达 400 MB 的客户端计算机上运行，​​但除此之外它遇到了内存不足的问题。我还担心服务器在面临同时下载请求时可能会失败。关于如何做到这一点的任何想法？Netty 是一种选择吗？关于如何将 Netty 集成到现有的基于 Jersey 的 Web 服务中的任何指示？是否有其他框架作品可以帮助实现这一目标？我确实必须将 java 用于 Web 服务。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:13:22.833

If you are getting stuck on out-of-memory issues, you should check how you are handling the data you are downloading. If you are using Jersey's ClientResponse, make sure you are using getEntityInputStream() and not getEntity(). This way, you can stream the data, write it to file, and toss it aside, rather than letting it build up in the Java heap space.

I can't really speak about your simultaneous download concerns, but if you are using the web services framework, then it should be handled properly.

For both issues, more info on your specific implementation, especially code, will help you get a better response.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T15:05:50.507

服务器和客户端都必须支持 HTTP 分块编码，这允许使用 HTTP 流式传输数据。下面的代码应该适用于 Jersey 2.11。

要下载大文件，请在服务器上尝试：

```
@GET
@Path("/files/{fileName}")
@Produces(MediaType.APPLICATION_OCTET_STREAM)

public StreamingOutput getFile(@PathParam("fileName") final String fileName)  throws Exception  {
  //create instance of StreamingOutput here
  return streamingOutput;
} 
```

尝试使用 Steam 下载文件的客户端 GET 请求。

```
public String getFileReq(File outFile) throws IOException {

  client = ClientBuilder.newClient(new ClientConfig());
  client.property(ClientProperties.REQUEST_ENTITY_PROCESSING, "CHUNKED");
  WebTarget target = client.target(URI)
  OutputStream fileOutputStream = new FileOutputStream(outFile);
  InputStream fileInputStream = target.request().get(InputStream.class);
  writeFile(fileInputStream, fileOutputStream); 
```

}

```
public static void writeFile(InputStream fileInputStream, OutputStream outputStream) throws IOException {
try {
  byte[] buffer = new byte[1024];
  int bytesRead;

  while((bytesRead = fileInputStream.read(buffer)) !=-1) {
      outputStream.write(buffer, 0, bytesRead);
  }

  fileInputStream.close();
  outputStream.flush();
 } catch (IOException e) {
   e.printStackTrace();
 } finally {
   outputStream.close();
} 
```

# javascript - 导航药丸不起作用

> ID：14864940
> 
> 赞同：0
> 
> 时间：2013-02-13T23:01:58.453
> 
> 标签：javascript, jquery, css, twitter-bootstrap

下面的代码在 IE 8.0 中不起作用它在 firefox 和 chrome 浏览器中运行良好。在 IE 中，列表项不是出现在单行中，而是出现在多行中。如何解决这个问题。

我正在使用 Bootstrap v2.0.0 和 jQuery v1.7.1

```
<div class="row-fluid">
        <div class="span12">
            <div class="pull-left">
                <ul class="nav nav-pills">

                    <li>
                        <a  href="#" data-toggle="pill">openorder" 
                        </a>
                    </li>
                    <li >
                        <a  href="#" data-toggle="pill">completedorder</a>
                    </li>

                    <li>
                        <a  href="#" data-toggle="pill">service" </a>
                    </li>
                </ul>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:16:36.360

很难说这里只有 HTML 没有例子。你用`javascript`and标记了这个`jquery`- 这里也有什么问题吗？

我认为您应该删除该`pull-left`课程，因为这只会使里面的时间向左浮动。我怀疑这是你的问题。

# google-app-engine - Google App Engine Cloud 端点，无 API

> ID：14864941
> 
> 赞同：4
> 
> 时间：2013-02-13T23:02:05.933
> 
> 标签：google-app-engine, google-cloud-endpoints

我昨天开始了解 GAE 云端点。从那时起，我正在尝试为我当前的 Web 应用程序生成 API。我正在使用 JPA2.0，我选择了我的一个实体类，右键单击它，然后“生成 Google 端点类”。所以现在我有了另一个带有@API 注释等的实体类。

但问题是在我去部署应用程序后：[https ://developers.google.com/apis-explorer/?base=https://myAppId.appspot.com/_ah/api#p/](https://developers.google.com/apis-explorer/?base=https://myAppId.appspot.com/_ah/api#p/)

服务选项卡为空。当我在本地检查时也是如此（下图） ![在此处输入图像描述](../Images/fd72af85a20d84c8d6b44df9e1fb59d8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:09:35.500

您还需要生成 Cloud Endpoints Library（在 Eclipse 中，右键单击项目，它位于 Google 下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T06:34:28.357

1.登录appengine [https://appengine.google.com/](https://appengine.google.com/)

2.单击主类别中的[版本]链接

3.选择您的版本和[设为默认]按钮

4.您可以访问api资源管理器 [https://myAppId.appspot.com/_ah/api/explorer](https://myAppId.appspot.com/_ah/api/explorer)

最良好的问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:46:58.697

我有类似的问题，这是由于方法中缺少公共属性引起的。

```
@Api
public class MyApi {
   @ApiMethod
   void myMethod() { }
} 
```

导致我没有看到任何方法。添加时

```
@Api
public class MyApi {
   @ApiMethod
   public void myMethod() { }
} 
```

方法开始可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T02:52:56.677

I actually managed to resolve the above issue. So I had a web application existing and I thought I could just add annotations to it and have the APIs represented for it after deployment. But I realized that I had to start from scratch by creating an android app and then generate the back-end for that app and add my classes there. It now works. Thank you.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T17:25:31.320

在端点上工作之前要记住的几点：

1.  需要在运行项目之前创建一个端点客户端库。（在 Eclipse 中：项目 -> 右键单击​​ -> Google -> 生成云端点库）

2.  检查您是否使用最新的 Google 插件。因为端点所需的文件将从插件执行。如果您无法生成端点库。问题出在插件上。尝试更新它。

3.  端点仅适用于默认版本。确保您将版本设为默认值。

4.  最后尝试加载[http://myApp.appspot.com/_ah/api/explorer](http://myApp.appspot.com/_ah/api/explorer)。现在一切都应该好了。

# linux - 如何授予 apache 使用 NTFS 分区上的目录的权限？

> ID：14864944
> 
> 赞同：4
> 
> 时间：2013-02-13T23:02:28.330
> 
> 标签：linux, apache, ubuntu, file-permissions, ntfs

我在具有 20GB 硬盘驱动器的旧机器上运行 Linux (Lubutu 12.10)。我有一个带有 NTFS 分区的 1 TB 外置硬盘。在该分区上，有一个 www 目录，其中包含我的 Web 内容。它在启动时自动挂载为 /media/t515/NTFS。

我想将 apache 文档目录从 /var/www 更改为 /media/t515/NTFS/www。

我需要将分区保留为 NTFS 分区，因为我在运行 WAMP 的不同机器上使用相同的硬盘驱动器。

我将 /etc/apache2/sites-available 中的文件“默认”更改为新位置，然后重新启动服务器。当我试图去本地主机时，我得到了错误：

**403 Forbidden** 您无权访问此服务器上的 /。

然后我将 fstab 中的自动挂载选项更改为包含选项“umask=0000”，然后更改为“umask=2200”，但均无济于事。我仍然收到相同的错误消息。

我可以从其他应用程序毫无问题地访问 NTFS 分区，并且以任何用户身份登录。但是 Apache 似乎无法（或不愿意）访问该分区。如何授予 apache 使用 NTFS 分区上的目录的权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-05T22:47:57.837

经过多次尝试，这对我来说是成功的*，没有别的*了：更改 Apache 的配置，使其不再使用`www-data`（Apache 用户）而是我自己的用户。

做起来很简单。在我的 Apache 版本中，要更改的两行在`/etc/apache2/envvars`文件中（它可以是另一个版本中的另一个文件）：

```
export APACHE_RUN_USER=www-data
export APACHE_RUN_GROUP=www-data 
```

我用`www-data`我的用户名替换（这里`toto`:)）：

```
export APACHE_RUN_USER=toto
export APACHE_RUN_GROUP=toto 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T03:15:52.047

以我的经验，我总是不得不重新安装具有 RW 权限的驱动器。发现这个：

```
sudo mount -t ntfs -o rw,auto,user,fmask=0022,dmask=0000 /dev/whatever /mnt/whatever 
```

或者：

> 对于 NTFS 分区，使用 fstab 中的权限选项。
> 
> 首先卸载 ntfs 分区。
> 
> 然后编辑`/etc/fstab`
> 
> 图形 `gksu gedit /etc/fstab`
> 
> 命令行`sudo -e /etc/fstab`
> 
> 使用 blkid 识别您的分区 UUID
> 
> 须藤 blkid
> 
> 并为 ntfs 分区添加或编辑一行
> 
> ```
> # change the "UUID" to your partition UUID
> UUID=12102C02102CEB83 /media/windows ntfs-3g auto,users,permissions 0 0 
> ```
> 
> 创建一个挂载点（如果需要）
> 
> sudo mkdir /媒体/windows
> 
> 现在挂载分区
> 
> 挂载/媒体/windows
> 
> 我给你的选项 auto 会在你启动时自动挂载分区，用户允许用户 mount 和 umount 。
> 
> 然后，您可以在 ntfs 分区上使用 chown 和 chmod。

两者都在这里找到：[https ://askubuntu.com/questions/11840/how-to-chmod-on-an-ntfs-or-fat32-partition](https://askubuntu.com/questions/11840/how-to-chmod-on-an-ntfs-or-fat32-partition)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T17:11:50.553

None of the answers above solve the issue, in fact, the problem is related to Apache itself, not filesystem or permissions.

The only thing you need to do is :

```
<Directory "/www/mywebdirectoryinapartitioneddisk">
    Require all granted
</Directory> 
```

this will solve the issue

here the post in my blog explaining everything in detail. It could work on NTFS

[http://www.tbogard.com/2014/09/12/making-apache-server-to-read-a-partitioned-disk-the-definitive-solution/](http://www.tbogard.com/2014/09/12/making-apache-server-to-read-a-partitioned-disk-the-definitive-solution/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T23:07:27.967

其实很简单：

1）在Windows主机上创建*本地用户*

2) 向该用户授予适当的 NTFS 权限

3) 验证访问权限（仅限 Windows）

... 然后 ...

4) 在 Linux 上配置你的 NTFS 挂载以使用*相同*的Windows 用户和组（Linux 用户/组在这里无关）

5) 配置 Apache 以使用该 Linux 组（Linux 用户/组在这里是*必不可少*的）

# jquery - 附加到每个列表项的 JQuery 单击函数

> ID：14864949
> 
> 赞同：0
> 
> 时间：2013-02-13T23:02:51.990
> 
> 标签：jquery

我想在 HTML 文档正文的侧边区域附加三个 <li>

*   嘿1*   嘿2*   嘿3并为它们中的每一个附加了一个单击切换功能，以便它可以在 HTML 正文中显示和隐藏适当的 div。

```
 </aside>
  <div id="id1" > I am the  one </div>
  <div id="id2" > I am the  second</div>
  <div id="id3" > I am the  third</div>
  </body> 
```

例如 <li> Hey1 附加的点击功能只会切换 id="id1" 的 div 等等

我写的代码是

```
 $(document).ready(function() {   $("div").hide();    
   jQuery.each([1,2,3], function(n,value){ n++; 

    $('aside').append("<li> hey"+value+" </li>").click(function(){$('#id'+value).toggle()});
    });
    }) 
```

现在代码可以创建 < li > ，并将 click 函数附加到它们上。
问题是，当我特别想要的是，当我点击 <li> Hey1 时，我点击了所有三个 <div> 的切换，然后只有 <div id="id1 " > 我是那个</div> 将被显示和隐藏。

我感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:06:01.770

您没有将点击处理程序附加到`li`'s，而是附加到`aside`, do ：

```
$(document).ready(function() {   
    $("div").hide();    
    $.each([1,2,3], function(n,value){
      $('<li />', {text: 'hey'+value}).appendTo('aside').on('click', function() {
          $('#id'+value).toggle();
      });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:05:29.660

那是因为您将点击事件附加到一边，而不是 li

```
$(document).ready(function() {   $("div").hide();    
    $.each([1,2,3], function(n,value){
        n++; 
        $li = $("<li> hey"+value+" </li>").click(function(){
            $('#id'+value).toggle();
        });
        $('aside').append($li);
    });
}) 
```

# ios - 核心数据和数组

> ID：14864951
> 
> 赞同：0
> 
> 时间：2013-02-13T23:02:56.040
> 
> 标签：ios, objective-c, core-data, nsmutablearray

我需要存储这些值。

x 值 = 时间

y-value1, y-value2, y-value3, ... , y-value10

所以每次都有这些不同的 yValue 切片。这就是两者之间的关联。

我对 Core-Data 方法相当陌生，我听说将它们存储到数组中是不可能的。我不必查询它们，但我确实需要在给定会话之后将它们存储在数据库中（假设超过 1000 个整体——这就是为什么我一开始不想将它们全部放在 NSMutableArray 中）。

Core-Data 是解决这个问题的最实用方法，还是有更好的解决方案来处理如此大量的数据。

编辑：到目前为止，我的模型看起来像这样。

* * *

实体 1：时间片

属性：时间-浮动

关系：价值观

* * *

实体 2：价值观

属性：yValue1, yValue2, yValue3, ..., yValue10 - 浮点数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:55:42.673

这取决于每个 yValue 代表什么类型的变量，但看起来你可能会以一种比你需要的更尴尬的方式来处理它。您可以将它们放在一个数组中，然后将该数组存储在 Core Data 持久存储中的 NSData 属性中。如果您真的不需要查询它们，那么我将确保 yValue 类实现了 encodeWithCoder: 方法，如以下问题所述：[Converting a NSObject into NSData](https://stackoverflow.com/questions/1659922/converting-a-nsobject-into-nsdata)

然后，您可以创建这些对象的数组，并将整个数组存档在 NSData 对象中，并将其存储在实体的单个属性中。这可能是最有效的存储方式。您的核心数据模型将如下所示：

实体 - 时间输入

属性：时间 - NSNumber

属性：yValues - NSData

使用此核心数据模型，您可以查询特定时间（或一组时间），然后根据需要取消归档 NSData 对象。

如果您要创建对象的“类型”，则关系会更好。一个典型的例子是公司->经理->员工范式。每个公司、经理和员工都是一个实体。从公司到许多经理，从每个经理到许多员工，都会有一对多的关系。您还可以将每个员工分配给多个经理等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:03:20.820

Core Data supports ordered relationships, I think from iOS5 onward. Just select "ordered" in the checkbox when editing a to-many relationship.

# xcode - 未找到用于分发的有效签名身份

> ID：14864954
> 
> 赞同：2
> 
> 时间：2013-02-13T23:03:06.230
> 
> 标签：xcode, distribution, provisioning

我只是想将我的第一个 iphone 应用程序提交到应用程序商店。因此，我创建了一个用于分发的配置文件。但是，在 XCode 中安装后，它告诉我“找不到有效的签名身份”。我该如何修复？

这是图片中描述的我目前的情况：

![在此处输入图像描述](../Images/9786da8c4933d6ecc3c4da3f3d463bb5.png)

我需要做什么？

# java - 我需要按住这个窗口，直到按下完成按钮：/

> ID：14864957
> 
> 赞同：-3
> 
> 时间：2013-02-13T23:03:40.953
> 
> 标签：java, swing, user-interface, actionlistener

这里的第一个代码来自我无法弄清楚的主要代码的 prerec。

```
boolean CompanyLoaded, StartingNum = true;

FirstCheck newwin = new FirstCheck();

public CollectNumbers() { 

        if (StartingNum = true) firstCheck = newwin.FirstCheck(); <----Runs FirstCheck okay

        if (CompanyLoaded = true) LoadCompany(); 
```

从现在开始，我将在下面发布我的 FirstCheck 课程。我试过抽象覆盖actionPerformed，我试过线程睡眠，等待，但无法弄清楚如何让我的FirstCheck（）方法等到actionPerformed（）返回我的字符串（Int）。任何帮助，将不胜感激！

```
import java.awt.event.*;

import java.awt.*;

import javax.swing.*;

import java.io.*;

import java.util.*;

abstract class FirstCheck extends JFrame implements ActionListener {

    static int num;
    static boolean bnum = true;
    JTextField NumberEntry;

    Toolkit   tools   = Toolkit.getDefaultToolkit();
    Dimension windowLocVar = tools.getScreenSize(); 

    public int FirstCheck() {

        JFrame frame = new JFrame();

        NumberEntry = new JTextField();

        JButton Done = new JButton("Done");
        Done.addActionListener(this);

        JLabel label = new JLabel("Starting Check Number?");
        label.setVerticalTextPosition(JLabel.BOTTOM);  
        label.setHorizontalTextPosition(JLabel.CENTER);

        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(3,1));
        panel.add(NumberEntry);
        panel.add(label);
        panel.add(Done); 

        frame.add(panel);                       
        frame.pack();                                      
        frame.setVisible(true);                            
        frame.setSize(250,150);                            
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        frame.setLocation(windowLocVar.width/2-300,windowLocVar.height/2-100);

        //try {
        //  Thread.sleep(5000);
        //  } 
        //catch(InterruptedException e) {
        //  // Restore the interrupted status
        //  Thread.currentThread().interrupt();
        //  }

    }

    public int actionPerformed(ActionEvent e) {
               bnum = false;
               num = Integer.parseInt(NumberEntry.getText());
               return num;

    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:17:13.890

而不是`JFrame frame = new JFrame()`使用`JDialog frame = new JDialog((Frame)null, true)`.

这将创建一个模态对话框，它将阻止代码执行`frame.setVisible(true)`直到对话框关闭。

查看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)了解更多信息。

在您的`actionPerformed`方法中，您将需要存储一个“返回”值，一旦对话框关闭，您的应用程序就可以查询该值......

```
public void actionPerformed(ActionEvent e) {
    bnum = false;
    num = Integer.parseInt(NumberEntry.getText());
    Object source = e.getSource();
    if (source instanceof Component) {
        // Close the dialog....
        SwingUtilities.getWindowAncestor((Component)source).dispose();
    }
} 
```

**更新**

同样，您可以只使用 a`JOptionPane`代替...

看一眼

*   [在 JOptionPane 中显示数组](https://stackoverflow.com/questions/13926545/display-array-in-joptionpane/13926750#13926750)
*   [JOptionPane 和读取整数 - 初学者 Java](https://stackoverflow.com/questions/14783836/joptionpane-and-reading-integers-beginner-java/14784096#14784096)

作为几个例子

# vb.net - 从 Process.Start 执行 .exe 时包含（另一个）文件

> ID：14864962
> 
> 赞同：0
> 
> 时间：2013-02-13T23:04:09.033
> 
> 标签：vb.net

我有以下代码，当使用按钮（示例）执行时，将启动程序`rkill.exe`。但是，当`rkill.exe`启动时（命令行界面），它需要文件 lpt$vpn.709。调用时如何包含此文件`rkillProcess.Start()`？

代码 - 这可行，但需要包含 lpt$vpn.709 吗？

```
 Dim rkillProcess As New Process

   rkillProcess.StartInfo.FileName = My.Computer.FileSystem.CurrentDirectory & "\Tools\McAffee\rkill\rkill.exe"

            rkillProcess.StartInfo.CreateNoWindow = True

            rkillProcess.Start() 
```

`rkill.exe`如果我从其目录中双击它，并且目录中包含 lpt$vpn.709，当然运行良好。但是，出于我的程序目的，我需要`rkill.exe`使用按钮事件启动。这就是为什么我需要包含 lpt$vpn.709 以使 rkill 运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:01:30.653

Thanks Mark!

This works:

```
syscleanProcess.StartInfo.WorkingDirectory = My.Computer.FileSystem.CurrentDirectory & "\Tools\TrendMicro\sysclean\"

 syscleanProcess.StartInfo.FileName = My.Computer.FileSystem.CurrentDirectory & "\Tools\TrendMicro\sysclean\sysclean" 
```

# ios - AFHttpclient 在块中获取 json 主体但外部函数返回 null

> ID：14864963
> 
> 赞同：0
> 
> 时间：2013-02-13T23:04:09.143
> 
> 标签：ios, objective-c, ios6

我正在尝试在某些 url 和正文中发送 post 请求以仅作为 json 数据（尝试注册新用户发送 json 之类的

```
{
    "username": "test",
    "password": "test",
    "email": "email@gmail.com"
} 
```

我有类似的功能

```
-(NSString*) sendPostOnUrl:(NSString*) url
            withParameters:(NSDictionary*)params{
    __block NSString* response = nil;
    NSError *error;
    NSURL *u = [NSURL URLWithString:url];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL: u];

    [httpClient postPath:REGISTER
              parameters:params
                 success:^(AFHTTPRequestOperation *operation, id responseObject) {
                     response = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
                     NSLog(@"Request Successful, response '%@'", response);
                 } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                     NSLog(@"[HTTPClient Error]: %@", error.localizedDescription);
                 }];
    return response;
} 
```

其中 params 是 NSDictionary 键，其中包含用户名、密码和电子邮件以及这些键的值。问题是当我发送时，我总是返回得到 null 作为响应（最新行），但在 NSLog 中我得到 json 响应。我对 ios 很陌生，在我看来，我需要以某种方式与 return 同步从功能，但不知道如何，谁能给我一个线索我做错了什么？（当我尝试调试时，params 包含所有这些键，url 没问题，REGISTER 是 NSString 常量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:36:40.133

块是异步的 - 这里的问题是“response = [[NSString alloc] initWithData ...”在您退出方法后执行的块内。更好的方法是不在方法中执行此操作，而是将此代码放置在您调用 sendPostOnUrl:withParameters: 的位置，并在成功块中执行您需要执行的任何操作。所以而不是：

```
self.something = [self sendPostOnUrl:url withParameters:@{"username":"test" etc}]; 
```

你来做这件事：

```
NSError *error;
NSURL *u = [NSURL URLWithString:url];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL: u];
__weak YourClassName *me = self;
[httpClient postPath:REGISTER
          parameters:params
             success:^(AFHTTPRequestOperation *operation, id responseObject) {
                 me.something = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
                 NSLog(@"Request Successful, response '%@'", response);
             } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                 NSLog(@"[HTTPClient Error]: %@", error.localizedDescription);
             }]; 
```

另外，请注意“__weak YourClassName *me = self”，您不能在块内引用 self，因为它会导致保留循环。

# sql - 如何在 SQL 中组合日期期间并创建复合时间线

> ID：14864964
> 
> 赞同：1
> 
> 时间：2013-02-13T23:04:12.200
> 
> 标签：sql, oracle

在一个 oracle 表中，每个家庭（唯一 ID）可以有几个人（唯一 ID）在一个日期范围内处于不同的关系中。我想创建一个时间线，以根据时间段的关系组合获取 FamilyType。下面给出了一个特定家庭的例子。

```
 P1|-----Head---------------------------------------|
           P2|--Partner--------------|
                    P3|---Child----------------------|
                              P4|---Child------------|

    |=Single=|=Couple=|=Family=======|=SingleParent==| 
```

表有列 FamilyId、PersonId、Relationship、StartDate、EndDate

每个 | 是一个日期（没有时间部分）。数据保证在给定日期
* 总会有一个人是负责人。
* 可以有 0 个或 1 个合作伙伴。
* 可以有 0 或 n 个孩子。

规则是
* 如果只有一个 Head 则 FamilyType 为 Single
* 如果有一个 Head 和一个 Partner 则 FamilyType 为 Couple
* 如果有一个 Head 、一个 Partner 和 1 个或多个 Children 则 FamilyType 为 Family
* 如果有一个家庭类型为 SingleParent 的 Head 和 1 个或多个 Children

人们可以在任何日期加入或离开家庭。人们可以改变关系。所以以下情况是可能的

```
P1|----------Head--------------------|
           P2|----partner------------|---Head--------|
                    P3|---Child----------------------|
                          P4|--Child-----------------|

    |=Single=|=Couple=|=Family=======|=SingleParent==|

P1|----------Head--------------------|
           P2|----partner------------|---Head--------|
                    P3|---Child----------------------|
                          P4|--Child-----------------|
                                   p5|---Partner-----|

    |=Single=|=Couple=|=Family=======================| 
```

如何在 Oracle 11GR2 中使用 SQL 来完成此操作（仅使用 SQL 而不是使用过程代码）。我正在尝试评估这是否最好在 SQL 或 C# 中完成。作为特定于 SQL Server 2012 的好奇答案也很好。

结果应该是包含 StartDate、EndDate 和 FamilyType 的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:49:32.413

你可以这样做：

```
with family_ranges(familyid, min_start, max_end, curr_date)
  as (select familyid, 
             min(startdate), 
             max(enddate),
             to_number(to_char(min(startdate), 'j'))
       from family
      group by familyid
      union all
      select familyid, min_start, max_end, curr_date+1
       from family_ranges
       where curr_date < to_number(to_char(max_end,'j')))
select familyid, min(curr_date) fromdate, max(curr_date) todate, state
  from (select familyid, to_date(curr_date,'j') curr_date,
               case when head = 'Y' and partner = 'Y' and child = 'Y' then 'Family'
                when head = 'Y' and partner = 'Y' then 'Couple'
                when head = 'Y'  and child = 'Y' then 'SingleParent'
                when head = 'Y' then 'Single'
               end state
          from (select f.familyid, d.curr_date, f.relationship
                  from family_ranges d
                      inner join family f
                              on f.familyid = d.familyid
                            and to_date(d.curr_date,'j') between f.startdate and f.enddate)
         pivot (
           max('Y')
           for  relationship in ('Head' as head, 'Partner' as partner, 'Child' as child)
         ))
 group by familyid, state
 order by familyid, fromdate; 
```

用日期->朱利安原谅废话。这是为了解决 11.2.0.1-3 的错误，其中日期算术因分解子查询而失败。

虚构的子查询部分为我们提供了家庭跨越的日期列表。从那以后，我们将其重新加入家庭，以计算出那天谁在家庭中。

```
select f.familyid, d.curr_date, f.relationship
  from family_ranges d
      inner join family f
              on f.familyid = d.familyid
            and to_date(d.curr_date,'j') between f.startdate and f.enddate; 
```

现在我们旋转它以获得一个简单的 Y/N 列表

```
SQL> with family_ranges(familyid, min_start, max_end, curr_date)
  2    as (select familyid,
  3               min(startdate),
  4               max(enddate),
  5               to_number(to_char(min(startdate), 'j'))
  6         from family
  7        group by familyid
  8        union all
  9        select familyid, min_start, max_end, curr_date+1
 10         from family_ranges
 11         where curr_date < to_number(to_char(max_end,'j')))
 12  select familyid, to_date(curr_date,'j') curr_date, head, partner, child
 13            from (select f.familyid, d.curr_date, f.relationship
 14                    from family_ranges d
 15                        inner join family f
 16                                on f.familyid = d.familyid
 17                              and to_date(d.curr_date,'j') between f.startdate and f.enddate)
 18           pivot (
 19             max('Y')
 20             for  relationship in ('Head' as head, 'Partner' as partner, 'Child' as child)
 21           );

  FAMILYID CURR_DATE H P C
---------- --------- - - -
         1 09-NOV-12 Y
         1 11-NOV-12 Y
         1 13-NOV-12 Y
         1 23-NOV-12 Y
         2 23-NOV-12 Y
         2 28-NOV-12 Y Y
         2 29-NOV-12 Y Y
         1 30-NOV-12 Y Y
         1 01-DEC-12 Y Y
         1 03-DEC-12 Y Y
         2 18-DEC-12 Y Y Y
         2 20-DEC-12 Y Y Y 
```

那么这是一个简单的案例，可以从规则中获取所需的字符串，并通过分组来获取日期范围。

```
SQL> with family_ranges(familyid, min_start, max_end, curr_date)
  2    as (select familyid,
  3               min(startdate),
  4               max(enddate),
  5               to_number(to_char(min(startdate), 'j'))
  6         from family
  7        group by familyid
  8        union all
  9        select familyid, min_start, max_end, curr_date+1
 10         from family_ranges
 11         where curr_date < to_number(to_char(max_end,'j')))
 12  select familyid, min(curr_date) fromdate, max(curr_date) todate, state
 13    from (select familyid, to_date(curr_date,'j') curr_date,
 14                 case when head = 'Y' and partner = 'Y' and child = 'Y' then 'Family'
 15                  when head = 'Y' and partner = 'Y' then 'Couple'
 16                  when head = 'Y'  and child = 'Y' then 'SingleParent'
 17                  when head = 'Y' then 'Single'
 18                 end state
 19            from (select f.familyid, d.curr_date, f.relationship
 20                    from family_ranges d
 21                        inner join family f
 22                                on f.familyid = d.familyid
 23                              and to_date(d.curr_date,'j') between f.startdate and f.enddate)
 24           pivot (
 25             max('Y')
 26             for  relationship in ('Head' as head, 'Partner' as partner, 'Child' as child)
 27           ))
 28   group by familyid, state
 29   order by familyid, fromdate;

  FAMILYID FROMDATE  TODATE    STATE
---------- --------- --------- ------------
         1 05-NOV-12 24-NOV-12 Single
         1 25-NOV-12 14-DEC-12 Couple
         1 15-DEC-12 24-JAN-13 Family
         1 25-JAN-13 13-FEB-13 SingleParent
         2 05-NOV-12 24-NOV-12 Single
         2 25-NOV-12 14-DEC-12 Couple
         2 15-DEC-12 13-FEB-13 Family 
```

小提琴：[http ://sqlfiddle.com/#!4/484b5/1](http://sqlfiddle.com/#!4/484b5/1)

# c++ - 'vector 的初始化没有匹配的构造函数 ' 与铿锵++ 3.2

> ID：14864967
> 
> 赞同：3
> 
> 时间：2013-02-13T23:04:21.223
> 
> 标签：c++, c++11, clang

我正在使用 C++ Primer，第 5 版学习 C++。

我正在尝试使用 clang++ 编译一个具有 C++11 功能的简单 c++ 程序，但我遇到了应该是有效代码的编译错误。

这是一个例子：

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

int main(){
  int n = 0;
  auto *p = &n; //<-- this compiles  

  cout << *p << endl;

  vector<string> articles = {"a", "an", "the"}; //<-- this fails; copied from the book

  return 0;
} 
```

这是完整的错误：

```
$ clang++ -std=c++11 -v test.cpp -o test
clang version 3.2 (tags/RELEASE_32/final)
Target: x86_64-apple-darwin10.8.0
Thread model: posix
 "/usr/local/Cellar/llvm/3.2/bin/clang" -cc1 -triple x86_64-apple-macosx10.6.0 -emit-obj -mrelax-all -disable-free -main-file-name test.cpp -mrelocation-model pic -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 127.2 -v -resource-dir /usr/local/Cellar/llvm/3.2/bin/../lib/clang/3.2 -fmodule-cache-path /var/folders/pk/pkIeYbRaF-yeeUH3Q6Q5AE+++TI/-Tmp-/clang-module-cache -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/Oton/Desktop -ferror-limit 19 -fmessage-length 150 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime=macosx-10.6.0 -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fencode-extended-block-signature -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/pk/pkIeYbRaF-yeeUH3Q6Q5AE+++TI/-Tmp-/test-w65CaF.o -x c++ test.cpp
clang -cc1 version 3.2 based upon LLVM 3.2svn default target x86_64-apple-darwin10.8.0
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.2.1
 /usr/include/c++/4.2.1/i686-apple-darwin10/x86_64
 /usr/include/c++/4.2.1/backward
 /usr/include/c++/4.0.0
 /usr/include/c++/4.0.0/i686-apple-darwin8
 /usr/include/c++/4.0.0/backward
 /usr/local/include
 /usr/local/Cellar/llvm/3.2/bin/../lib/clang/3.2/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
test.cpp:13:18: error: no matching constructor for initialization of 'vector<string>'
  vector<string> articles = {"a", "an", "the"};
                 ^          ~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.2.1/bits/stl_vector.h:255:9: note: candidate constructor [with _InputIterator = const char *] not viable: no known conversion from
      'const char [4]' to 'const allocator_type' (aka 'const std::allocator<std::basic_string<char> >') for 3rd argument
        vector(_InputIterator __first, _InputIterator __last,
        ^
/usr/include/c++/4.2.1/bits/stl_vector.h:213:7: note: candidate constructor not viable: no known conversion from 'const char [2]' to 'size_type'
      (aka 'unsigned long') for 1st argument
      vector(size_type __n, const value_type& __value = value_type(),
      ^
/usr/include/c++/4.2.1/bits/stl_vector.h:201:7: note: candidate constructor not viable: allows at most single argument '__a', but 3 arguments were
      provided
      vector(const allocator_type& __a = allocator_type())
      ^
/usr/include/c++/4.2.1/bits/stl_vector.h:231:7: note: candidate constructor not viable: requires single argument '__x', but 3 arguments were provided
      vector(const vector& __x)
      ^
1 error generated. 
```

我在 Mac 上，10.6.8，我用自制软件构建了 llvm/clang，并带有选项：

```
brew install llvm -v --all-targets --rtti --shared --with-asan --with-clang --use-clang 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T23:26:16.823

该错误告诉您没有采用初始化列表的 std::vector 构造函数。问题是您使用的标准库实现尚未针对 C++11 进行更新。您使用的是 gcc 4.2 版本的 libstdc++，它是在 C++11 之前几年编写的。

您必须切换到已针对 C++11 更新的库。如果您安装了 libc++，那么您可以只使用 flag `-stdlib=libc++`。我认为 libc++ 二进制文件是 OS X 10.6.8 的一部分，但您还需要标头。也许 homebrew 有一个配方，或者您可以从以下网址下载它们：http: [//libcxx.llvm.org/](http://libcxx.llvm.org/)并将它们粘贴在适当的位置以便找到并与`-stdlib=libc++`.

或者，您可以手动省略普通的 C++ 标准库头文件（在这种情况下是 gcc 4.2 头文件）`-nostdinc++`，手动为粘贴头文件的位置添加包含目录，为二进制文件所在的位置添加库搜索目录（您甚至可以构建自己的二进制文件）并添加链接标志`-lc++`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T11:13:41.423

我不确定这是否是好的规范，但我会回答我自己的问题。我希望这对其他人有帮助。

（我只是一个初学者，所以如果我做错了什么，请纠正我。）

构建上述示例的唯一方法是：

```
-std=c++11 -stdlib=libc++ -nostdinc++ -I/path/to/new/libcxx/include 
```

问题是雪豹，正如其他人在这里所说，它有一个非常旧的 gcc 版本。并且使用上面的选项无法链接，因为`ld: library not found for -lc++`.

所以我不得不构建一个最新版本的 libcxx。有一个 macports 端口，但没有自制配方。我手动构建了它，但有些事情我必须绕过才能成功。

我假设您已经使用 homebrew 安装了 llvm 并且您的路径设置正确：`which clang++ -> /usr/local/bin/clang++`.

首先获取 libc++abi：`svn co http://llvm.org/svn/llvm-project/libcxxabi/trunk libcxxabi`

然后得到 libc++: `svn co http://llvm.org/svn/llvm-project/libcxx/trunk libcxx`。

编辑`libc++abi/lib/buildit`：

```
EXTRA_FLAGS="...
             -I/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin10/4.2.1/include \
             -I/PATH/TO/libcxx/include"
(Add the last two lines, note that the last include should point to the include folder inside libcxx from svn.)

LDSHARED_FLAGS="...-install_name /usr/local/lib/libc++abi.dylib"
(My libc++abi.dylib will reside inside /usr/local/lib.) 
```

现在构建 libc++abi：

```
- cd libc++abi/lib 
- export TRIPLE=-apple-
- ./buildit 
```

我更喜欢用自制软件来管理我所有的 3rd 方库，所以这是可选的：

```
- mkdir -p /usr/local/Cellar/libc++abi/HEAD/lib
- mkdir -p /usr/local/Cellar/libc++abi/HEAD/include
- cp -a *.dylib /usr/local/Cellar/libc++abi/HEAD/lib/
- cp -R /path/to/libcxxabi/include/ /usr/local/Cellar/libc++abi/HEAD/include/libc++abi
  (Note the / after include!)
- brew link libc++abi 
```

现在编辑`libc++/lib/buildit`：

```
if [ "$MACOSX_DEPLOYMENT_TARGET" == "10.6" ]
then
    EXTRA_FLAGS="... -I/usr/local/include/libc++abi"
    LDSHARED_FLAGS="...
        -install_name /usr/local/lib/libc++.1.dylib \
        ..." 
```

现在构建 libc++：

```
- cd libc++abi/lib 
- export TRIPLE=-apple-
- export MACOSX_DEPLOYMENT_TARGET=10.6
- ./buildit 
```

再次可选：

```
- mkdir -p /usr/local/Cellar/libc++/HEAD/lib
- cp -a *.dylib /usr/local/Cellar/libc++/HEAD/lib
- mkdir -p /usr/local/Cellar/libc++/HEAD/include
- cp -R /path/to/libcxx/include/ /usr/local/Cellar/libc++/HEAD/include/libc++
- brew link libc++ 
```

我现在可以使用以下方法构建前面的示例：

```
clang++ -std=c++11 -stdlib=libc++ -nostdinc++ -I/usr/local/include/libc++ -O2 -g -v test.cpp -o test 
```

# ios - 如何创建自己的完成处理程序作为方法参数的一部分

> ID：14864971
> 
> 赞同：26
> 
> 时间：2013-02-13T23:04:32.203
> 
> 标签：ios, objective-c

我想为某个类创建一个完成处理程序，而不是触发类的主代码并等待委托回调。我已经阅读了 Apple 文档，他们似乎没有给出一个很好的例子来说明如何直接实现这样的东西。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-13T23:10:15.797

您需要将完成块视为变量。该方法将接受一个块作为其参数的一部分，然后将其存储以备后用。

`- (void)myMethodWithCompletionHandler:(void (^)(id, NSError*))handler;`

您可以 typedef 该块类型以便于阅读：

`typedef void (^CompletionBlock)(id, NSError*);`

然后将您的块存储为实例变量：

在您的@interface 中：`CompletionBlock _block;`

在 myMethod..`_block = [handler copy]`

然后，当您希望完成块执行时，您只需像常规块一样调用它：

`_block(myData, error);`

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-13T23:31:54.537

如果是异步方法，你可以这样做

```
- (void)asynchronousTaskWithCompletion:(void (^)(void))completion;
{
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Some long running task you want on another thread

    dispatch_async(dispatch_get_main_queue(), ^{
      if (completion) {
        completion();
      }
    });
  });
} 
```

这将被调用

```
[self asynchronousTaskWithCompletion:^{
  NSLog(@"It finished");
}]; 
```

需要注意的是守卫确保它`completion`指向某个东西，否则如果我们尝试执行它会崩溃。

我经常将块用于完成处理程序的另一种方式是当 viewController 完成并希望从导航堆栈中弹出时。

```
@interface MyViewController : UIViewController

@property (nonatomic, copy) void (^onCompletion)(void);

@end

@implementation MyViewController

- (IBAction)doneTapped;
{
  if (self.onCompletion) {
    self.onCompletion();
  }
}

@end 
```

将此视图推送到堆栈时，您将设置完成块

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender;
{
  MyViewController *myViewController = segue.destinationViewController;
  myViewController.onCompletion = ^{
    [self.navigationController popViewControllerAnimated:YES];
  };
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-30T09:52:23.363

Heres an example for a method that takes a String and a completion handler as variables. The completion handler can also receive a String.

**Swift 2.2 Syntax**

Defintion:

```
func doSomething(input: String, completion: (result: String) -> Void {
    print(input)
    completion(result: "we are done!")
} 
```

Calling the function:

```
doSomething("cool put string!") { (result) in
        print(result)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T18:07:42.940

# android - 使用 Fragments 制作 android 应用程序以在 Android 2.X 上运行

> ID：14864973
> 
> 赞同：0
> 
> 时间：2013-02-13T23:04:37.333
> 
> 标签：android, user-interface

这是我的情况……一位客户给了我一份由其他人完成的部分申请。那个人使用片段来构建 UI。

给我应用程序以完成它的开发的人，刚刚意识到他希望应用程序在 2.X 的 android 设备上运行

所以，我想知道是否有可能有两个 UI：一个用于支持 Fragment 的 Android 设备，另一个用于不支持 Fragment 的 Android 设备。

如果可能的话，可以在 xml 上将其定义为替代资源吗？还是需要以编程方式进行？（我的意思是检查 android 操作系统版本和备用 UI）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:10:45.943

幸运的是，支持库中有`Fragment`s，并且支持回 Android 1.6。因此，您可以使用`Fragment`s 的“支持”类，它适用于新旧设备。

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

[http://developer.android.com/training/basics/fragments/support-lib.html](http://developer.android.com/training/basics/fragments/support-lib.html)

# objective-c - 如何通过按钮单击将 1 添加到变量？

> ID：14864978
> 
> 赞同：0
> 
> 时间：2013-02-13T23:04:53.220
> 
> 标签：objective-c

每次单击按钮时，我想将 1 添加到我的变量中，但会出现一个 10 位数字。我在下面的代码中做错了什么？

```
-(IBAction)recordData:(id)sender {
int randomNumber;
randomNumber = randomNumber + 1;
NSString *myRandomNumber = [NSString stringWithFormat:@"%i", randomNumber];
NSString *CompleteData = [[NSString alloc] initWithFormat:DataView.text];
CompleteData = [CompleteData stringByAppendingString: @"\n"];
CompleteData = [CompleteData stringByAppendingString:myRandomNumber];
DataView.text = CompleteData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:11:12.230

制作

```
int randomNumber 
```

要么是静态的，要么将其声明为实例变量。

您当前正在做的是每次调用 recordData 时创建一个新变量。另外，您不初始化它。局部变量未初始化。实例变量用 0/nil 初始化。结果，您的变量具有一些随机内容（正如其名称所暗示的那样：）。对该随机值加 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:11:04.800

1.  您的变量未初始化：`int randomNumber = 0`将解决该问题。
2.  `randomNumber`的范围是`recordData:`方法。您可以将其设为由holex 建议的静态变量，或者更好的是，将其设为您的类的属性。

查看Apple 的 Objecitve-c 文档中的[封装数据](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)以了解有关 iVar 和属性的更多信息。

# authentication - 在 Express 应用程序中生成用户“令牌”（使用everyauth/passport 中间件）

> ID：14864983
> 
> 赞同：0
> 
> 时间：2013-02-13T23:05:23.807
> 
> 标签：authentication, express, passport.js, everyauth

我需要为用户创建“令牌”，以便在他们调用我的 API 时发送。我的问题是，我应该怎么做才能生成这些令牌？

我应该提到我目前正在使用诸如everyauth 和passport 之类的模块来进行身份验证中间件，以防它们包含任何帮助解决此问题的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:59:33.573

颁发令牌的典型方法是使用 OAuth 2.0。 [OAuth2orize](https://github.com/jaredhanson/oauth2orize)是[Passport](http://passportjs.org/)的兄弟项目，它提供了一个用于实现 OAuth 2.0 授权服务器的工具包。

尽管根据您的评论“它们将按会话进行，并且不会提供给第三方”，但我不确定您的用例是什么。您如何在浏览器上下文之外定义“会话”。如果这是在浏览器中，最好使用 Express 提供的内置会话支持。

# string - 试图计算某个字符串及其重复次数。此外，用其他字符替换字符。全部来自文件读取

> ID：14864986
> 
> 赞同：0
> 
> 时间：2013-02-13T23:05:31.200
> 
> 标签：string, character, python-2.x

到目前为止，我的代码似乎会改变字母。但是，应该这样改变：所有 G 变为 C。所有 C 变为 G。所有 T 变为 A。所有 A 变为 T。

这就是我的问题发生的地方。正如所见，例如，由于 T 变为 A 并且 A 变为 T，因此代码只是将其保留为 T。因为它会将其更改为 A，然后将相同的字符更改回 T。我需要使它成为所有更改同时进行，因此不会像那样重叠。与 G 到 C 和 C 到 G 相同。

这是文本文件中的示例：GTCGACTGCACTCGCCCCCACGAGAGAACAGTATTTAAGGAGCTGCGAAGGTCCAAGTCATGCATTATTG TCTCAGTGCAGTTGTCAGTTGCAGTTCAGCAGACGGGCTAACGAGTACTTGCATCTCTTCAAATTTACTT AATTGATCAAGTAAGTAGCAAAAGGGCACACAATTGAAGGAAATTCTTGTTTAATTGAATTTATTATGCA

基本上就是这样的大弦。我需要颠倒上面概述的所有字母。同样，我试图在更改字符之前计算以下字符串出现的次数：“GCAA”。

到目前为止，这是我的代码：

```
f = open("filename.txt", "r")
from string import maketrans
table = maketrans("G", "C")
table = maketrans("C", "G")
table = maketrans("T", "A")
table = maketrans("A", "t")
print(f.read().translate(maketrans('G','C')))
print(f.read().translate(maketrans('C','G')))
print(f.read().translate(maketrans('T','A')))
print(f.read().translate(maketrans('A','T')))

print(table) 
```

我不知道我将如何计算任何东西，所以我还没有到达那部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:29:53.797

像这样使用一次 maketrans 调用：

```
from string import maketrans
table = maketrans("GCTA", "CGAT")
f = open("filename.txt", "r")
input = f.read()
print(input.translate(table))
print(input.count('GCAA')) 
```

# ruby-on-rails - 耙任务 - 未定义的方法

> ID：14864987
> 
> 赞同：0
> 
> 时间：2013-02-13T23:05:39.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, koala

我修改了创建一个 rake 任务的方法，该任务可以获取给定页面的签到量，并抛出 facebook-graph。我使用考拉宝石和导轨。

我通过创建一个 rake 任务来做到这一点：

```
task :get_likes => :environment do
    require 'koala'
    # Grab the first user in the database
    user = User.first

    # Loop throw every school & and call count_checkins
    School.columns.each do |column|
        user.facebook.count_checkins(column.name, user)
    end
end
# Count like for every school else return 0
def count_checkins(name, u)
    a = u.facebook.fql_query('SELECT checkins FROM page WHERE name = "' + name + '"')
    if a[0].nil?
        return 0
    else 
        return b = a[0]["checkins"]
    end
end
# Initialize an connection to the facebook graph
def facebook
    @facebook ||= Koala::Facebook::API.new(oauth_token)
end 
```

但我得到一个错误：

```
private method `count_checkins' called for #<Koala::Facebook::API:0x007fae5bd348f0> 
```

编写 rake 任务的任何想法或更好的方法都会很棒！

在此处检查完整错误：[https ://gist.github.com/shuma/4949213](https://gist.github.com/shuma/4949213)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:42:19.127

无法在评论中正确格式化，所以我将其放在答案中。我会将以下内容放入用户模型中：

```
# Count like for every school else return 0
def count_checkins(name)
    a = self.facebook.fql_query('SELECT checkins FROM page WHERE name = "' + name + '"')
    if a[0].nil?
        return 0
    else 
        return b = a[0]["checkins"]
    end
end

# Initialize an connection to the facebook graph
def facebook
    @facebook ||= Koala::Facebook::API.new(oauth_token)
end 
```

然后将 rake 任务更改为：

```
task :get_likes => :environment do
    require 'koala'
    # Grab the first user in the database
    user = User.first

    # Loop throw every school & and call count_checkins
    School.columns.each do |column|
        user.count_checkins(column.name)
    end
end 
```

这样，count_checkins 是在用户模型上定义的，而不是试图在 Koala 中修改一个类——而且您不必通过传递不必要的更多 User 和 Facebook 参数来重复工作。

# sql - 插入具有多个键的行

> ID：14864988
> 
> 赞同：1
> 
> 时间：2013-02-13T23:05:42.207
> 
> 标签：sql, insert

```
ID  DEPT
user1   A
user1   B
user1   C
user2   A
user2   B
user3   A
user4   A
user4   B
user4   D
user4   E 
```

我想拿一张像上面这样的表，看看哪些用户有部门A但没有C，然后插入C，反之亦然（有C，不是A，用A插入新行）

例如，在上表中，User4 将被标识为具有 A 而不是 C，因此将插入具有 user4 和部门 C 的新行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:13:28.033

```
INSERT INTO tablename(Id, Dept)
SELECT COALESCE(A.ID, C.ID)
,   CASE 
  WHEN A.ID IS NULL THEN 'A'
 WHEN C.ID IS NULL THEN 'C'
END
FROM 
    (select id
    from tableName
    WHERE Dept = 'A') A
FULL OUTER JOIN
    (select id
    from tableName
    WHERE Dept = 'C') C
    ON A.Id = C.Id   
WHERE
    A.Id IS NULL OR C.Id IS NULL 
```

# asynchronous - gunicorn 不会同时处理同时请求

> ID：14864994
> 
> 赞同：6
> 
> 时间：2013-02-13T23:05:57.163
> 
> 标签：asynchronous, gunicorn, worker

我正在尝试使用 gunicorn 及其异步工作者来处理长时间运行的请求，但我找不到任何可以开始工作的示例。我在[这里](http://gunicorn.org/)使用了这个例子，但在返回响应之前添加了一个假延迟（睡眠 5 秒）：

```
def app(environ, start_response):
    data = "Hello, World!\n"
    start_response("200 OK", [
        ("Content-Type", "text/plain"),
        ("Content-Length", str(len(data)))
    ])
    time.sleep(5)
    return iter([data]) 
```

然后我运行 gunicorn ：

`gunicorn -w 4 myapp:app -k gevent`

当我打开两个浏览器选项卡并输入`http://127.0.0.1:8000/`它们并几乎同时发送请求时，请求似乎是**按顺序**处理的——一个在 5 秒后返回，另一个在 5 秒后**返回**。

问：我猜睡眠不友好？但是有 4 个工作人员，所以即使工作人员的类型是“同步”，两个工作人员应该同时处理两个请求？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-13T05:32:52.223

我刚刚遇到了同样的事情，在这里提出了一个问题：[Requests not being distributed across gunicorn workers](https://stackoverflow.com/questions/23038678/requests-not-being-distributed-across-gunicorn-workers)。结果是，浏览器似乎序列化了对同一页面的访问。我猜这可能与可缓存性有关，即浏览器认为页面可能是可缓存的，等到它加载后发现它不是，所以它会发出另一个请求等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T17:01:38.547

试一试`gevent.sleep`，而不是`time.sleep`。

奇怪的是，这`-w 4`是`-k gevent`一个异步工作类型，所以 gunicorn 可能会将两个请求都提供给同一个客户端。假设这是正在发生的事情，`time.sleep`除非您使用`gevent.monkey.patch_all()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T11:44:01.297

~~当使用具有非阻塞工作类型的 gunicorn 时，例如 gevent，它将只使用一个处理请求的进程，因此您的 5 秒工作顺序执行也就不足为奇了。~~

~~当您的工作负载很轻且请求速度很快时，异步工作器很有用，在这种情况下，gunicorn 可以通过切换到另一个~~来利用浪费在等待 IO 上的时间（例如，等待套接字可写来写入对它的响应）~~工人工作的另一个要求。~~通过切换到分配给同一工作人员的另一个请求。

**更新**

我错了。

当使用具有非阻塞工作者类型的 gunicorn 时，使用 gunicorn 中的工作者设置，每个工作者都是一个进程，它运行一个单独的队列。

So if the `time.sleep` was ran on different process, it will run simultaneously, but when it's ran in the same worker, it will be carried out sequentially.

The problem is that the gunicorn loadbalancer may not have distributed the two requests into two worker processes. You can check the current process by `os.getpid()`.

# php - 生成docx时如何在每一页上打印表头？

> ID：14864998
> 
> 赞同：1
> 
> 时间：2013-02-13T23:06:25.060
> 
> 标签：php, docx, opentbs

我的模板很简单。表头和：

> [a.name;block=w:tr] [a.version] [a.description]

我设法创建了一个表格，但我想知道是否可以在每个文档页面上重复表格标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:55:38.153

您可以使用 Ms Word 属性在每一页上重复表格的第一行。

选择表格的第一行，打开表格属性并选择“行”选项卡。如果选择了第一行，则可以选中“在每页顶部重复作为标题行”框。

当然，[OpenTBS](http://www.tinybutstrong.com/opentbs.php)保留了这个属性，这样当表格被数据扩展时，你就会拥有它。