# StackOverflow 问答 14042000-14042999

# pattern-matching - 使用 egrep 对字符串进行正则表达式检查

> ID：14042005
> 
> 赞同：0
> 
> 时间：2012-12-26T14:31:47.720
> 
> 标签：pattern-matching, ksh, grep, sunos

我必须针对日期格式的正则表达式验证字符串`YYYYMMddhhmmss`。

我已经测试了以下代码：

```
temp=echo $file_timestamp | egrep '^(20)[0-9][0-9](0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])(0[0-9]|1[0-9]|2[0123])([0-5])[0-9]([0-5])[0-9]$'; 
```

以下返回`file_timestamp`if 满足模式的内容，否则返回`null`变量`temp`。

此代码片段是否根据 unix 标准进行了优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:21:39.767

不会有明确解决您的问题的 unix 标准。

此外，标准与良好的工作代码有时会发生冲突（不是那么频繁）。

我可以想到至少 3 个关于代码的问题，甚至是 reg 表达式，作为开发人员，我想做的这些问题都被涵盖了。

1.  结果正确吗？这只有你能知道。将您的代码构建为测试驱动开发并不是只有 java 人可以做的事情。制作一个包含您认为应该支持的输入范围的文件，并确保输出适用于所有情况，如果这确实是一个大项目，请有错误消息显示未处理的内容。

2.  是否可维护？一组详细说明您认为正则表达式如何工作的评论将对您之后的人有所帮助，甚至对您 6 个月后的您也有帮助，而您从那以后就没有看过 reg-exp。

3.  表现。是否存在仍然给出正确答案但“运行”更快的正则表达式的替代“措辞”？

考虑到你的定义，我想我会以你的 reg-exp 做不同的事情。请注意，此版本更短，因此通过一个非常简单的指标，它更易于维护。

```
temp=$(echo $file_timestamp \
| egrep '^20[0-9][0-9][0-1][0-9][0-3][1-9][0-2][0-9][0-5][0-9][0-5][0-9]$'
) 
```

除非您愿意解释您对`( .... )`分组字符的使用，否则我认为它们没有任何用处。

（我唯一能想到的是您指定的格式`YYYYMMddhhmmss`比您指出的更灵活。您没有尝试匹配用户可能输入的任何日期格式，即 YYYYMdhms （当任何一个前导零时元素？。当心，这是进入您系统的疯狂和不正确数据的途径！;-)

最后，您没有说明如何在验证中使用 $temp。我认为验证现有变量（并且更灵活）的一种更简单的方法是使用 case 语句。尝试

```
 case ${file_timestamp) in
     20[0-9][0-9][0-1][0-9][0-3][1-9][0-2][0-9][0-5][0-9][0-5][0-9] )
       print -u2 -- "dbg: valid : file_timestamp=${file_timestamp}"
       # do other good stuff here
     ;;
     * )
       print -u2 -- "dbg:NOT valid : file_timestamp=${file_timestamp} "
       # do other error reporting or fixing here
     ;;
   esac 
```

现在您避免了 $( ... ) 和`grep`.

如果您需要像 一样的分组字符`(2[0-9])`，那么您将不得不使用 grep（sed、awk 等），因为 ksh 正则表达式不支持`()`分组（我几乎可以肯定）。

IHTH

# arduino - Arduino：将中断附加到较高的引脚号之一？

> ID：14042006
> 
> 赞同：0
> 
> 时间：2012-12-26T14:31:52.913
> 
> 标签：arduino

我有一个[Arduino Mega 2560](http://arduino.cc/en/Main/arduinoBoardMega2560)。是否可以在较高的引脚号上附加中断，例如 D20 到 D25？我试过[PcInt](http://playground.arduino.cc/Main/PcInt)，但由于某种原因，它不适用于更高的引脚号。

我有一块定制板，它正在使用这些别针，所以我的双手被束缚在要使用的别针上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:44:33.510

Mega2560的[引脚映射](http://arduino.cc/en/Hacking/PinMapping2560)表明引脚 20-25 不是 PCINT 的候选对象（但 20 和 21 将具有 INT）。所以电路板的布局使它与这个 Arduino 完全不兼容。

# c - char数组的大小在传递给C中的函数时发生变化

> ID：14042009
> 
> 赞同：1
> 
> 时间：2012-12-26T14:32:07.593
> 
> 标签：c, arrays, function

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

我将一个`char`数组从一个函数 f1 传递给另一个函数 f2。在函数 f1 中，我使用`sizeof`& 打印它的大小，结果是`9`. 在第二个函数中，我再次使用与上面相同的语句打印它的大小，但这次它的结果是`8`. 事实上，我并没有在打印两个值之间使用这个数组。当我尝试在另一台笔记本电脑上运行相同的代码时，对于第二个函数，它会产生`4`.

从这个[问题](https://stackoverflow.com/questions/609267/passing-char-buffer-to-functions-and-getting-the-size-of-the-buffer)可以清楚地看出为什么我得到 4，但为什么我在另一台笔记本电脑上得到 8。

**为什么会这样？**

我的整个代码太大了，所以我只分享基本部分：（这里我正在谈论的数组是`plid`，我`login`从第一个函数调用函数。由于它们的长度，我没有分享完整的函数。`logp, errorp..`这些是我自己编写的写入文件的函数，我最后分享了。）

**f1**：

```
char choice[1], plid[9];
int choice_len = sizeof(choice);//this is importnat becz recvall takes ppointer to int
int ret;

logp(identity,0,0,"receiving the first choice of the client");
if(recvall(fd, choice, &choice_len, 0) != 0){ //whether want to play(login), or as audience(no login)
    logp(identity,0,0,"Error receiving the first choice of the client");
}

logp(identity,0,0,"Entering the choice Select switch");
switch(choice[0])
{
    case 'a':
        sprintf(buf, "plid_len(%d), username_len(), plid - %d",sizeof(plid), plid);
        logp(identity,0,0,buf);

        logp(identity,0,0,"User entered the choice 'a' and calling login");
        if( (ret = login(fd, plid)) == 0){
            sprintf(buf,"Player id is %s and Contacting player",plid);
            logp(identity,0,0,buf);
            contactPlayer( plid, fd);
            logp(identity,0,0,"Contacted To player succesfully");
        }else{ 
```

**f2**：

```
int login(int fd, char* plid){
char loginInfo[25], username[9], password[16];
int loginInfo_len = sizeof(loginInfo);
int ret;

char identity[IDENTITY_SIZE], buf[100];
sprintf(identity, "DISPATCHER-login-fd: %d -", fd);

sprintf(buf, "plid_len(%d), username_len(%d), plid - %d",sizeof(plid), sizeof(username), plid);
logp(identity,0,0,buf);

logp(identity,0,0,"Calling recvall to recv login credentials");
if ((ret = recvall(fd, loginInfo, &loginInfo_len, 0)) != 0) {
    errorp(identity,0,0,"Unable to recv login credentials");
    debugp(identity,1,errno,NULL);
} 
```

**日志文件输出**：

```
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - DISPATCHER-SocketHandler-fd: 6 -  |  LogMsg - Entering the choice Select switch
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - DISPATCHER-SocketHandler-fd: 6 -  |  LogMsg - plid_len(9), username_len(), plid - -1314939296
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - DISPATCHER-SocketHandler-fd: 6 -  |  LogMsg - User entered the choice 'a' and calling login
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - DISPATCHER-login-fd: 6 -  |  LogMsg - plid_len(8), username_len(9), plid - -1314939296
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - DISPATCHER-login-fd: 6 -  |  LogMsg - Calling recvall to recv login credentials
__LOG__    |  Wed Dec 26 19:21:34 2012  |  Where - access-recvall  |  LogMsg - Successfully recved the complete data 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:33:24.687

当您将数组传递给函数时，它会衰减为指向其第一个元素的指针。
当您`sizeof`在函数内部应用接收参数时，您将获得指针的大小（在该环境中）而不是数组的大小。

如果您需要函数内部数组的大小，只需将其作为附加函数参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:35:52.217

指针大小可能因架构而异，甚至在同一架构内（例如在哈佛架构中）。

对于典型的桌面系统（运行 Windows、Linux 或 OS X 的 x86），64 位版本的操作系统将需要 8 个字节的指针，而 32 位版本只需要 4 个字节。因此，如果您运行的其中一个系统是 64 位，另一个是 32 位，那么这将解释您所看到的结果。

# symfony-sonata - 未读取扩展 Sonata 用户类中的注释

> ID：14042010
> 
> 赞同：6
> 
> 时间：2012-12-26T14:32:12.343
> 
> 标签：symfony-sonata

我使用 Sonata EasyExtends 包扩展了 Sonata 项目的用户包。默认放在 src/Application/Sonata/UserBundle 下

现在我想自定义扩展类并添加一些字段。我注意到虽然没有处理注释，但我需要在 src/Application/Sonata/UserBundle/Resources/config/doctrine/User.orm.xml 中定义映射

有什么方法可以使用注释而不是 XML 文件？我认为它会解决我引用用户类的很多问题，就像现在的命令一样

> php 应用程序/控制台原则：模式：更新 --force

似乎不认识注释..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T12:34:22.517

首先删除 Application/Sonata/UserBundle/Resources/config/doctrine

稍后将 Entity/User.php 和 Entity/Group.php 更改为注释类型：

```
<?php

namespace Application\Sonata\UserBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Sonata\UserBundle\Entity\BaseUser as BaseUser;

/**
 * User
 *
 * @ORM\Table(name="fos_user_user")
 * @ORM\Entity
 */

class User extends BaseUser
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=127)
     */
    protected $test;
} 
```

```
<?php

namespace Application\Sonata\UserBundle\Entity;

use Sonata\UserBundle\Entity\BaseGroup as BaseGroup;
use Doctrine\ORM\Mapping as ORM;

/**
 * Group
 *
 * @ORM\Table(name="fos_user_group")
 * @ORM\Entity
 */
class Group extends BaseGroup
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

} 
```

最后你应该输入： php app/console dictionary:schema:update --force 一切都应该很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-28T08:48:17.597

在简历中，如果您使用 XML，则注释没有规则。

如果你删除 config/doctrine 文件夹，它会寻找注解，在那里，你可以放你想要的。

# c# - wpf 图表：在 X 轴上绘制时间，在 Y 轴上绘制双倍值以绘制折线图

> ID：14042013
> 
> 赞同：0
> 
> 时间：2012-12-26T14:32:38.817
> 
> 标签：c#, wpf, charts, linechart, datavisualization.toolkit

我需要在具有以秒为单位的时间值和双精度值的图表上绘制数据。时间值的格式从 00:00:00 到 23:59:00，间隔为 00:01:00。时间值是连续的。其他值是不连续的，范围从 0.00 到 200.00，间隔为 10.00。现在我可以在 X 轴上绘制时间图，在 Y 轴上绘制双倍值。

```
<ScrollViewer HorizontalScrollBarVisibility="Visible">
    <chartingToolkit:Chart Name="lineChart" Title="Testing.." >
        <chartingToolkit:LineSeries 
                          ItemsSource="{Binding}"
                          IndependentValueBinding="{Binding time}"
                          DependentValueBinding="{Binding value}">
            <chartingToolkit:LineSeries.IndependentAxis>
                <chartingToolkit:CategoryAxis
                Orientation="X" />
            </chartingToolkit:LineSeries.IndependentAxis>
            <chartingToolkit:LineSeries.DataPointStyle>
                <Style TargetType="chartingToolkit:LineDataPoint">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Setter Property="Width" Value="0"/>
                    <Setter Property="Background" Value="Red"/>
                </Style>
            </chartingToolkit:LineSeries.DataPointStyle>
        </chartingToolkit:LineSeries>
    </chartingToolkit:Chart>
</ScrollViewer> 
```

但要求是90度旋转效果。即，时间值应该在 Y 轴上，而双精度值应该在 X 轴上，仍然将图形绘制为“作为时间值的函数绘制的双精度值”。

在上面的代码中，如果我只是将独立轴的方向更改为“Y”，就会出现异常。

# ios6 - iOS 6 自动布局约束错误：“Something is nil”

> ID：14042016
> 
> 赞同：1
> 
> 时间：2012-12-26T14:32:48.887
> 
> 标签：ios6, autolayout, nslayoutconstraint

我正在尝试在 iOS 6 中使用约束并希望将标签与另一个对齐。一个标签和约束是在点击按钮时动态创建的。这是一个非常简单的例子，但我得到一个有线错误，我不知道是什么原因。

编码：

```
- (IBAction)addToLog:(UIButton *)sender {
UILabel *labelLastTime = [[UILabel alloc]initWithFrame:CGRectMake(20, 359, 92, 42)];
labelLastTime.text = [NSString stringWithFormat:@"%@kg x %@", self.selectedPickerWeight, self.selectedPickerRepetitions];

labelLastTime.font = [UIFont boldSystemFontOfSize:17.0];
labelLastTime.textAlignment = NSTextAlignmentCenter;
labelLastTime.textColor = [UIColor colorWithRed:133.0/255.0 green:133.0/255.0 blue:133.0/255.0 alpha:1.0];

labelLastTime.backgroundColor = [UIColor colorWithRed:228.0/255.0 green:228.0/255.0 blue:228.0/255.0 alpha:1.0];
labelLastTime.layer.borderColor = [UIColor colorWithRed:185.0/255.0 green:185.0/255.0 blue:185.0/255.0 alpha:1.0].CGColor;
labelLastTime.layer.borderWidth = 1;
labelLastTime.layer.cornerRadius = 5;

[self.view setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.view addSubview:labelLastTime];

NSLayoutConstraint *cn = [NSLayoutConstraint constraintWithItem:labelLastTime
                                                       attribute:NSLayoutAttributeTop
                                                       relatedBy:NSLayoutRelationEqual
                                                          toItem:self.labelTodayVsLastTime
                                                       attribute:NSLayoutFormatAlignAllBottom
                                                      multiplier:1.0
                                                        constant:5.0];

[self.view addConstraint:cn]; 
```

}

错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法在 descriptionForLayoutAttribute_layoutItem_coefficient 中创建描述。有些东西是零

当我应用约束时发生错误，而不是在我设置它时。我之前设置了一个断点

```
[self.view addConstraint:cn] 
```

当我检查结果时，我得到这 4 的 nil 值

```
container, markerAndPositiveExtraVar, negativeExtraVar and _flange 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T12:55:11.203

> ```
> NSLayoutConstraint *cn = [NSLayoutConstraint constraintWithItem:labelLastTime
>   attribute:NSLayoutAttributeTop
>   relatedBy:NSLayoutRelationEqual
>   toItem:self.labelTodayVsLastTime
>   attribute:NSLayoutFormatAlignAllBottom
>   multiplier:1.0
>   constant:5.0]; 
> ```

我遇到了同样的问题，约束定义略有不同，原因是 Xcode 自动完成问题。

看看第二`attribute:`行。您可能想要类似`attribute: NSLayoutAttributeBottom`.

`NSLayoutFormatAlignAllBottom`用于构建一个`NSLayoutFormatOptions`位掩码以提供给类似`constraintsWithVisualFormat:options:metrics:views:`.

# php - php/javascript 在查询字符串中转义引号的最佳方法

> ID：14042017
> 
> 赞同：1
> 
> 时间：2012-12-26T14:32:59.040
> 
> 标签：php, html-escape-characters

我使用 ajax 和 php 来输出超链接，使用户能够通过电子邮件发送一些文本。链接指向一个邮件脚本，查询字符串包含要发送的文本。通过单击链接，用户将文本发送出去。但是，如果文本（也是用户创建的）包含引号，则此引号会出现在查询字符串中并破坏代码。具体来说，浏览器在遇到引号时认为查询字符串结束。引用后的文本溢出到页面上。我可以将超链接括在撇号而不是引号中，但是如果用户在文本中包含撇号，我也会遇到同样的问题。

我曾尝试使用 json_encode 转义这些特殊字符，但这没有用。我知道有 addlashes 或者我可以用 str_replace 破解一些东西，但我想以正确的方式做到这一点。

感谢您提供有关正确方法的任何建议。

php

```
go to dbase

$text = $row['text'];

echo '<a href="sendmail.php?text='.$text.'">email text</a>';

/*
say for sake of argument text is 'the dimensions of the painting are 24" x 36"'

then above link is

echo '<a href="sendmail.php?text=the dimensions of the painting are 24" x 36"">email text</a>';
 which breaks code
*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:39:00.733

[`urlencode`](http://php.net/urlencode)应该使用，因为您正在对文本进行编码以将其放入 URL。

# .net - 何时在画布上放置元素

> ID：14042019
> 
> 赞同：0
> 
> 时间：2012-12-26T14:33:06.950
> 
> 标签：.net, wpf, canvas

我正在尝试编写一个用于测试图形应用程序的工具，基本上，这就是我所做的：

1.  创建画布
2.  创建形状并将它们放置在创建的画布上。

因此，当我正在编写自动化测试时，我需要等待 Canvas 被创建，然后才能开始在其上放置形状，我使用了 Loaded 事件，但没有创建任何形状。

我的问题是，什么时候开始在 Canvas 上放置元素？除了 Loaded 之外，还有特定的事件吗？

**编辑**

好吧，实际上它不是 Canvas，它是一个 Grid，它充当 ListView 的 DataTemplate，Grid 包含很多子项，我发现很难找到合适的时机说它最终加载了所有子项。

也许，我会继续检测父网格的可视化树中的任何变化，如果在某个特定时间内没有检测到任何变化，那么，我假设所有的孩子都加载并查看了？如果我决定这样走，Visual Tree 中的什么事件会因每次新更改而触发？

```
<Grid x:Class="Graphics.Stage.KPage" Name="Scaller"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:aero="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
    xmlns:model="clr-namespace:Graphics.Models;assembly=Graphics.Models"
    xmlns:p="clr-namespace:Graphics.Stage"
      Cursor="None"
    xmlns:Header_Footer="clr-namespace:Graphics.Stage.Header_Footer" AllowDrop="True"  Width="{Binding Path=Width}"  Height="{Binding Path=Height}"  >
    <Grid.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Graphics.Stage;component/Resources/StageResources.xaml"/>
                <ResourceDictionary Source="/Graphics.UserControls;component/SharedDictionaryGreen.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Grid.Resources>
    <Grid.LayoutTransform>
        <ScaleTransform   ScaleX="{Binding ElementName=PagesList, Path=ScaleX}"
                                         ScaleY="{Binding ElementName=PagesList, Path=ScaleY}"
                        ></ScaleTransform>
    </Grid.LayoutTransform>

    <aero:SystemDropShadowChrome Name="ShadowChrome" Opacity="0.75" Margin="0,0,-5,-5"  />  
    <Border  BorderBrush="{StaticResource dark}"  BorderThickness="1.5" Name="PageBorder"   >

            <Grid  Name="Sizer"   >

            <Canvas Name="Layout"  Background="{StaticResource light}" ClipToBounds="True" Cursor="None"/>

            <Canvas Name="ImportedImageLayer"  Background="Transparent" ClipToBounds="True" Cursor="None"/>

            <p:InkSurface  x:Name="LayerInkSurface"  Cursor="None"  />

            <p:TempSurface  x:Name="TempSurface0" Cursor="None"  />
            <p:TempSurface  x:Name="TempSurface1" Cursor="None"  />

            <p:Surface  x:Name="LayerOnTopTools"  Cursor="None"  >

            </p:Surface>

            <p:Surface  x:Name="DraggingSurface0"  Cursor="None" />
            <p:Surface  x:Name="DraggingSurface1"  Cursor="None" />

            <Header_Footer:HeaderFooterView x:Name="MyHeaderView" VerticalAlignment="Top" PictureVerticalAlignment="Top"  MyVerticalAlignment="Top" />
            <Header_Footer:HeaderFooterView x:Name="MyFooterView" VerticalAlignment="Bottom" PictureVerticalAlignment="Bottom" MyVerticalAlignment="Bottom" />

            <Canvas  Name="GridsCanvas"  ClipToBounds="True"  IsHitTestVisible="False">

            </Canvas>

            <p:TopViewLayer  x:Name="PageTopView"  ClipToBounds="True" />

        </Grid>

    </Border>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:16:16.473

如果事件发生`Canvas`后还没有准备好，`Loaded`也许你可以试试这个`ContentRendered`事件。

```
 ContentRendered += new EventHandler(MainWindow_ContentRendered);

 private void MainWindow_ContentRendered(object sender, EventArgs e)
 {
     // do the dew
 } 
```

# c++ - 没有命名类型

> ID：14042021
> 
> 赞同：1
> 
> 时间：2012-12-26T14:33:17.633
> 
> 标签：c++, compiler-errors

> **可能重复：**
> [解决 C++ 中的循环依赖关系](https://stackoverflow.com/questions/625799/resolve-circular-dependencies-in-c)
> [什么是 C++ 中的前向声明？](https://stackoverflow.com/questions/4926105/what-is-forward-declaration-in-c)

我有两个类 A 和 B。我需要在每个类中都有一个字段，它是指向另一个类的对象的指针。我得到“没有命名类型”，因为该类的定义尚未出现。例如：

```
class A{
   B* b;
}
class B{
   A* a;
} 
```

在第二行得到我“B”没有命名类型“。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:36:12.643

使用前向声明：

```
class B;

class A {
  B* b;
};

class B {
  A* a;
}; 
```

这样你就告诉编译器`B`稍后将声明它不应该担心。有关更多信息，请参见：[前向声明](https://stackoverflow.com/questions/4757565/c-forward-declaration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:36:26.187

前向声明是您问题的关键，这是链接

[什么是 C++ 中的前向声明？](https://stackoverflow.com/questions/4926105/what-is-forward-declaration-in-c)

# python - 由于 bs4 与 BeautifulSoup 导致的导入错误

> ID：14042023
> 
> 赞同：5
> 
> 时间：2012-12-26T14:33:24.363
> 
> 标签：python, beautifulsoup, lxml, bs4

我正在尝试使用`beautifulsoup`compatible `lxml`，它给了我一个错误：

```
from lxml.html.soupparser import fromstring
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/lxml/html/soupparser.py", line 7, in <module>
    from BeautifulSoup import \
ImportError: No module named BeautifulSoup 
```

我已经`bs4`安装了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T17:36:52.970

该错误是由于`soupparser.py`在安装了版本 4 时尝试导入 BeautifulSoup 版本 3 引起的。模块名称在版本 4 中从 更改`BeautifulSoup`为。`bs4`

您可以通过在导入之前将模块映射到in来欺骗`soupparser.py`导入版本 4 ：`bs4``BeautifulSoup`[`sys.modules`](http://docs.python.org/2/library/sys.html#sys.modules)`soupparser`

```
import sys, bs4
sys.modules['BeautifulSoup'] = bs4

from lxml.html.soupparser import fromstring 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T11:59:37.693

现在有一个可以与 bs4 一起使用的 soupparser 版本。它在这里可用：[https ://github.com/lxml/lxml/blob/master/src/lxml/html/soupparser.py](https://github.com/lxml/lxml/blob/master/src/lxml/html/soupparser.py)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T14:47:18.567

尝试添加：

`from bs4 import BeautifulSoup`

并确保您`BeautifulSoup`安装了适合您系统的正确版本。

# android - Sencha Touch 打包到 Android 错误

> ID：14042024
> 
> 赞同：1
> 
> 时间：2012-12-26T14:33:32.817
> 
> 标签：android, sencha-touch, package, sencha-command

我无法在 Windows 中使用 Sencha Cmd v3.0.0.250 将我的应用程序打包到 android。我运行命令`sencha package build packager.json`并给我这个错误：

```
[ERR]       
Created directory C:\Users\Wesker\Desktop\Tiempo\src\com\sencha\Tiempo
Added file C:\Users\Wesker\Desktop\Tiempo\src\com\sencha\Tiempo\STActivity.java
Created directory C:\Users\Wesker\Desktop\Tiempo\res
Created directory C:\Users\Wesker\Desktop\Tiempo\bin
Created directory C:\Users\Wesker\Desktop\Tiempo\libs
Created directory C:\Users\Wesker\Desktop\Tiempo\res\values
Added file C:\Users\Wesker\Desktop\Tiempo\res\values\strings.xml
Created directory C:\Users\Wesker\Desktop\Tiempo\res\layout
Added file C:\Users\Wesker\Desktop\Tiempo\res\layout\main.xml
Added file C:\Users\Wesker\Desktop\Tiempo\AndroidManifest.xml
Added file C:\Users\Wesker\Desktop\Tiempo\build.xml
Added file C:\Users\Wesker\Desktop\Tiempo\proguard-project.txt
'C:\Program' is not recognized as an internal or external command,
operable program or batch file.
""C:/Android\tools\android" create project --target android-10 --name Tiempo --activity STActivity --path "C:/Users/Wesker/Desktop/Tiempo\/" --package com.sencha.Tiempo"
Could not run ant with error: 1
Failed to package application

[ERR]       stbuild exited with non-zero code : 7 
```

这是我的 json 文件：

```
{
"applicationName":"Tiempo",
"applicationId":"com.sencha.Tiempo",
"bundleSeedId":"KPXFEPZ6EF",
"versionString":"1.0",
"versionCode":"1",
"icon": {
    "57":"resources/icons/Icon.png",
    "72":"resources/icons/Icon~ipad.png",
    "114":"resources/icons/Icon@2x.png",
    "144":"resources/icons/Icon~ipad@2x.png"
},
"inputPath":"C:/Users/Wesker/Documents/Tiempo/app",
"outputPath":"C:/Users/Wesker/Desktop/Tiempo",
"configuration":"Debug",
"platform":"Android",
"deviceType":"Universal",
"certificatePath":"C:/Users/Wesker/Documents/Tiempo/keyTiempo.keystore",
"certificateAlias": "tiempo",
"certificatePassword":"123456",
"provisionProfile":"",
"sdkPath":"C:/Android",
"androidAPILevel":"10",
"permissions":[
    "INTERNET",
    "ACCESS_NETWORK_STATE",
    "CAMERA",
    "VIBRATE",
    "ACCESS_FINE_LOCATION",
    "ACCESS_COARSE_LOCATION",
    "CALL_PHONE"
],
"orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
] 
```

}

我不知道为什么它试图执行 C:\Program。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:14:12.700

我不得不把所有工具都放在“程序文件”目录之外。这意味着我将 android、sencha-cmd 等放在 c:\ 上，而不是 c:\Program(NOT_working_SPACE_here) 文件中。

# linux - 将短域转换为完整域 URL

> ID：14042025
> 
> 赞同：-1
> 
> 时间：2012-12-26T14:33:38.550
> 
> 标签：linux, .htaccess, dns

我正在寻找一个脚本来将短域链接转换为主域 URL，例如下面的示例？就像 Facebook.com/username 一样，它会自动将您重定向到完整的 URL www.facebook.com/username

```
When user type short domain = http://abc.com/leon

the system should automatically CONVERT IT TO main domain URL = http://www.abc.com/leon 
```

我需要在 .htaccess 上编辑任何内容吗？如果是这样，我应该添加什么脚本？

我在 .htaccess 上尝试了以下脚本，但它没有转换为主 URL

```
Options +FollowSymLinks -MultiViews 
RewriteEngine On 
RewriteRule ^([a-zA-Z]+)$ /Test.php?pname=$1 [L,QSA] 
```

请帮忙。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:23:04.147

好吧...确定这可能属于 DNS 问题类别并找到此链接 =>[将非 www 重定向到 www 的最佳方式？](https://stackoverflow.com/questions/14033302/best-way-to-redirect-non-www-to-www) ; 以及以下脚本似乎工作

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.youraddress.com$ [NC]
RewriteRule ^(.*)$ http://www.youraddress.com/$1 [R=301,L] 
```

# system.reactive - 如何从一个事件序列切换到另一个事件序列？

> ID：14042028
> 
> 赞同：1
> 
> 时间：2012-12-26T14:33:50.770
> 
> 标签：system.reactive, composition, deferred

我希望第一个事件的到来会引起一些工作。稍后我想稍微减少工作量。到目前为止，我使用了以下代码：

```
var events = Observable.FromEventPattern<...>(...);

var throttled = events.Throttle(TimeSpan.FromSeconds(1));
events.Take(1).Subscribe((x) =>
{
    DoWork(x);
    throttled.Subscribe((y) => DoWork(y);
}); 
```

有没有更优雅的表达方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:06:25.993

显然这很简单：

```
var events = Observable.FromEventPattern<...>(...);

var throttled = events.Throttle(TimeSpan.FromSeconds(1));
events.Take(1).Concat(throttled).Subscribe((x) => DoWork(x)); 
```

[`Concat`](http://msdn.microsoft.com/en-us/library/hh212146%28v=vs.103%29.aspx)将等待第一个序列完成，然后将订阅移至第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:44:43.970

另一种常见的方法是使用多选。这允许您将数据从第一个序列传递到第二个序列，它还允许两个序列具有不同的类型：

在查询理解语法中；

```
var q = from x in xs
        from y in ys
        select new {x, y}; 
```

-或者- 您可以使用标准 linq 运算符作为扩展方法（但是无法访问 x 值）

```
xs.SelectMany(x=>ys)
  .Select(y=>y) 
```

# cross-browser - 使用 CSS 边框半径的奇怪行为

> ID：14042030
> 
> 赞同：1
> 
> 时间：2012-12-26T14:34:23.427
> 
> 标签：cross-browser, css

有人可以解释一下为什么左上角和左下角以这种方式显示：

![在此处输入图像描述](../Images/37ff3ca81b964e3cbf9fb8ee90956b07.png)

使用以下 CSS：

```
form .form-field
 {
    height: 20px;
    padding: 5px;
    border: 1px solid #ccc;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
 } 
```

输入字段和文本区域都有“表单字段”类。（在 Safari、Chrome 和 Firefox 中的行为相同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:39:28.613

就像 TJ 指出的那样，在您的 DOM 树中较高的位置有红色背景。将边框半径添加到角落会暴露这一点。使用浏览器的检查器找到它。应该是快速修复。

# java - 如何创建“FTPS”模拟服务器以对 Java 中的文件传输进行单元测试

> ID：14042033
> 
> 赞同：5
> 
> 时间：2012-12-26T14:34:37.850
> 
> 标签：java, junit, mocking, ftps

我有一个创建 FTPS 连接的 CreateFTPConnection 类。使用此连接传输文件。这是TransferFile类的代码

```
public class TransferFile
{
   private CreateFTPConnection ftpConnection;
   private FTPSClient client;

public TransferFile(CreateFTPConnection ftpConnection) {
    this.ftpConnection = ftpConnection;
    this.client = ftpConnection.getClient();
}

public void transfer(Message<?> msg)
{
    InputStream inputStream = null;
    try
    {
        if(!client.isConnected()){
            ftpConnection.init();
            client = ftpConnection.getClient();
        }
        File file = (File) msg.getPayload();
        inputStream = new FileInputStream(file);
        client.storeFile(file.getName(), inputStream);
        client.sendNoOp();
    } catch (Exception e) {
        try
        {
            client.disconnect();
        }
        catch (IOException e1) {
            e1.printStackTrace();
        }
    }
    finally
    {
        try {
            inputStream.close();
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
    }
}
} 
```

我必须为这个类编写 jUnit 测试用例。为此，我必须创建一个 FTPS 模拟服务器连接，并且必须使用该连接来测试文件传输。那么任何人都可以给我任何关于如何制作 FTPS 模拟服务器和做测试用例的想法。我对此进行了谷歌搜索，但我得到的是 FTP 或 SFTP，而不是 FTPS。请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:05:33.497

您可能会发现这个有用[的 MockFTPServer](http://mockftpserver.sourceforge.net/)

问题是这些模拟服务器没有实现我所看到的 TLS 部分。您可能需要做一些工作以允许通过 TLS 进行连接。

为了您的测试，您应该能够在 SO 上搜索并找到一些关于处理证书（或在某些情况下，绕过它们）的文章。

这是另[一篇文章](http://itsiastic.wordpress.com/2012/11/08/how-to-create-a-java-ftp-server-mock/)，介绍了创建基本 FTP 服务器测试的步骤。

缺少一个完整的 FTP 服务器（Apache http w/ [mod_ftp](http://httpd.apache.org/mod_ftp/ftp/ftp_tls.html) add on），似乎没有任何有用的东西可以做到这一点。

# haskell - 使用 cabal 安装的 Darcs 未注册为 shell 命令

> ID：14042035
> 
> 赞同：3
> 
> 时间：2012-12-26T14:34:47.810
> 
> 标签：haskell, cabal, darcs

作为在我的计算机上安装 Ubuntu 的一部分，我`apt-get`安装了`cabal`. 运行后`cabal update`，我运行`cabal install darcs`，发现我需要curses，安装`libncurses5-dev`，发现我需要curl，安装它，当它仍然不起作用时，运行`cabal install darcs -f-curl`。

这行得通，但 darcs 在运行时不会从 shell 运行`darcs`。它是安装在的`~/.cabal/bin/darcs`，所以我`link`从那里做了一个到`/bin`. Darcs 现在可以在 shell 中工作，但我想知道是否有更好的方法可以做到这一点，也许`cabal install`在 sudo 下运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:44:02.933

`cabal`默认情况下无需管理员权限即可安装。因此，它不能安装到例如`/usr/bin`. 由于`$HOME/bin`不是标准，折衷方案是将可执行文件放入`~/.cabal/bin`.

然后，您可以添加`~/.cabal/bin`到您的路径以查看这些可执行文件（例如，通过将以下内容附加到您的`.bashrc`:

```
 export $PATH=$PATH:~/.cabal/bin 
```

如果您的机器有管理员权限，请务必使用该`--global`标志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T17:50:12.850

首先，不要使用`sudo`. 即使在 root 下运行，也会`cabal`在你的主目录中构建东西，所以`sudo`不加选择地使用会导致你的`~/.cabal`. 相反，`root-cmd: sudo`在您的, 中设置`/.cabal/config`，然后`cabal`使用该`--global`选项将根据需要调用该命令。

其次，使用本地安装通常比使用全局安装更方便、更安全，因为您将包管理器`cabal`分开。因此，您也可以将其添加到您的`~/.bashrc`：

```
export PATH=$HOME/.cabal/bin:$PATH 
```

然后继续安装东西而不使用`sudo`。

[另请参阅：关于 cabal 包管理](http://www.vex.net/~trebla/haskell/sicp.xhtml)的稍微过于悲观但内容丰富的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:34:47.810

在这种`--global`情况下需要标志。运行`sudo cabal install darcs -f-curl --global`，`-f-curl`因为 cabal 找不到 curl，`--global`使其安装到`usr/local/bin`中，并且`sudo`可以肯定的是，可以正常工作。

# php - 简单的jQuery幻灯片问题

> ID：14042037
> 
> 赞同：1
> 
> 时间：2012-12-26T14:34:52.483
> 
> 标签：php, jquery, slideshow

我遇到了一个简单的 jquery 幻灯片放映问题（英语不是我的第一语言，所以我会尝试解释它）。我有我的 index.php，我`slideshow.html`使用 jquery 在其中放置。这是 index.php、jquery 和`slideshow0.html`

索引.php

```
<body>
<div class="main">
    <div class="contenedorHeader">
        <?php include("header.html"); ?>
     </div>
    <div class="central">
        <div class="fondoDescription">
            <div id="contenedorDescription"></div>
        </div>
        <div id="slideshowHolder"></div>
    </div>
    <div class="footer"></div>
</div>
</body> 
```

jQuery代码：

```
$(document).ready(function()
{
    $("#slideshowHolder").load("slideshow0.html");
}); 
```

幻灯片0.html：

```
<script type="text/javascript">

function slideSwitch() {
    var $active = $('#slideshowContent IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshowContent IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('#slideshowContent IMG:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 5000 );
});

</script>
</head>

<body>
 <div id="slideshowContent">
            <img src="images/slideshows/home/image1.png" alt="Slideshow Image 1"  class="active"/>
            <img src="images/slideshows/home/image2.png" alt="Slideshow Image 2" />
            <img src="images/slideshows/home/image3.png" alt="Slideshow Image 3" />
        </div>
</body>
</html> 
```

如您所见，`slideshow0.html`已加载到“slideshowHolder”中。这里没有问题，但是当我单击菜单中的一个项目时，我需要将“slideshow0.html”替换为另一个与此完全相同的幻灯片，除了图像，问题是循环间隔不起作用正确地，它就像一个函数执行了两次，或者类似的东西。我已经在 PHP 之外测试了幻灯片，它们工作正常，所以我猜是 PHP 或加载/替换的方法有问题HTML。

您可以在这里看到该项目：[http](http://www.spamtv.com.ar/coya/index.php) ://www.spamtv.com.ar/coya/index.php第一个幻灯片是`slideshow0.html`，单击“web”以加载下一个幻灯片（不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:25:51.407

当您加载/替换幻灯片时，由定义的旧间隔`setInterval( "slideSwitch()", 5000 );`仍然设置并运行。每次加载新幻灯片时，都会定义一个新的间隔，但不会删除旧的间隔。

您必须手动停止它们：

```
$(document).ready(function()
{
    if (slideshowInterval) {
        clearInterval(slideshowInterval);
    }
    $("#slideshowHolder").load("slideshow0.html");
}); 
```

在定义它时：

```
$(function() {
    slideshowInterval = setInterval( "slideSwitch()", 5000 );
}); 
```

# csv - 使用 Rails 3.2 从 CSV 导入大量联系人

> ID：14042042
> 
> 赞同：0
> 
> 时间：2012-12-26T14:35:06.633
> 
> 标签：csv, ruby-on-rails-3.2

我正在构建一个允许用户从 CSV 文件导入联系人的 rails 3.2 应用程序。如果 CSV 文件中的任何联系人行包含验证错误，则不会导入任何联系人，并且错误会在 CSV 文件中显示给用户。例如，如果联系人 CSV 有 20 行，其中 4 行和 15 行有错误，则不会导入任何联系人，并且 CSV 的第 4 行和第 15 行都会向用户显示错误。

我通过一次读取每一行并使用“ **Contact.new** ”在数组中“**构建**”记录来完成此功能。如果不存在错误，我会通过迭代数组来保存所有联系人，否则会显示存在错误。

 **如果行数增加到 40，那么导入联系人需要大约 20 分钟，这是不好的。有没有办法提高它的性能？

**更新：** 我用 Unicorn 将这个应用程序部署在 Heroku 上。如果我导入包含 40 个联系人的 CSV，应用程序会在 30 秒后崩溃，但所有联系人都会被导入。以下是导致应用程序崩溃的日志：

```
2012-12-26T15:40:28+00:00 app[web.1]: E, [2012-12-26T15:40:27.233802 #2] ERROR -- : worker=0 PID:54 timeout (31s > 30s), killing
2012-12-26T15:40:29+00:00 app[web.1]: E, [2012-12-26T15:40:29.724725 #2] ERROR -- : reaped #<Process::Status: pid 54 SIGKILL (signal 9)> worker=0
2012-12-26T15:40:32+00:00 app[web.1]: Disconnected from ActiveRecord
2012-12-26T15:40:33+00:00 app[web.1]: Disconnected from Redis 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:26:50.343

这是一个错字还是你真的说从 CSV 文件导入 40 条记录需要 20 分钟？如果是这种情况，则说明您的设置存在严重问题。或者你的“联系人”必须有大量的数据字段和验证或其他东西：/

至于 heroku... heroku 将在 30 秒后超时。它这样做是为了防止失控的 Web 请求。他们的官方回答是将其移至后台作业并在那里进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:40:43.747

您可以按块导入联系人并在保存之前验证每条记录。查看[smarter_csv](https://github.com/tilo/smarter_csv)，它允许对 CSV 文件进行块和并行处理。**

# php - 如何从 PDO 对象获取连接资源？

> ID：14042046
> 
> 赞同：7
> 
> 时间：2012-12-26T14:35:29.103
> 
> 标签：php, pdo, odbc

我需要从已经存在的 PDO 对象中获取连接资源。例如：

```
...
$oPDO = new PDO($sOdbcDsn);
$rOdbcConnection = $oPDO -> getConnection();
odbc_prepare($rOdbcConnection, $sQuery);
... 
```

反之亦然，我想将现有连接传递给 PDO 构造函数。我希望能够分别使用 PDO 对象和直接连接。

有没有办法从 PDO 中提取连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:50:31.310

我认为你有两个选择：

1.  将您的 PDO 连接（和方法）包装在一个可以随意传递的类中。定义一个将重用连接句柄的复制构造函数。

2.  从 PHP 源代码中挖掘出 PDO 对象的源代码，然后从那里构建您需要的东西。

# c - 将特定字符从字符串复制到另一个字符串

> ID：14042047
> 
> 赞同：10
> 
> 时间：2012-12-26T14:35:37.580
> 
> 标签：c

假设我有 2 个字符串

```
char str_cp[50],str[50];
str[]="how are you" 
```

我想将第二个单词 ex "are" 放入另一个名为 str_cp 的字符串中，所以如果我使用

```
printf("%s ,%s",str,str_cp); 
```

会像

```
how are you 
are 
```

我怎样才能做到这一点？（我尝试了 strncpy 函数，但它只能从字符串的开头复制特定字符）有没有办法使用指向字符串第 4 个字符的指针并在 strncpy 函数中使用它来复制前 3 个字符但是起点是第四个字符？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T14:38:22.047

> 我尝试了 strncpy 函数，但它只能从字符串的开头复制特定字符

`strcpy`函数族将从您告诉它复制的点开始复制。例如，要从第五个字符开始复制，您可以使用

```
strncpy(dest, &src[5], 3); 
```

或者

```
strncpy(dest, src+5, 3); // Same as above, using pointer arithmetic 
```

请注意，除非您击中源字符串的末尾，`strncpy`否则*不会*为您终止字符串：

> 如果 source 比 num 长（因此，在这种情况下，destination 可能不是以 null 结尾的 C 字符串），则不会在目标末尾隐式附加空字符。

您需要自己对结果进行空终止：

```
strncpy(dest, &src[5], 3);
dest[3] = '\0'; 
```

# android - onClickListener 如何在不在 ListActivity 中的列表视图中工作？

> ID：14042054
> 
> 赞同：0
> 
> 时间：2012-12-26T14:35:56.153
> 
> 标签：android, android-listview

我用自己的适配器创建了一个列表视图，但现在我必须实现 setOnClickListener 方法？阅读我的手册并在网上搜索我发现它在这种情况下无法正常工作，有人可以解释我如何正确使用它，也许有一个例子？

这是我的 MainActivity.java

```
package com.gabriele.progetti;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.res.AssetManager;
import android.graphics.Typeface;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    TextView textview;
    ListView menu;
    final static String[] Scelte = new String[] {"Una citazione a caso", "Cerca per autore", "Cerca per categoria", "Crediti"};

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /* Comincio tutti i magheggi per prendere il font e settarlo */
        AssetManager assetManager = getResources().getAssets();
        Typeface typeface = Typeface.createFromAsset(assetManager, "fonts/stilo.otf");
        textview = (TextView) findViewById(R.id.textView1);
        textview.setTypeface(typeface);
        /* Magheggi finiti */

        menu = (ListView) findViewById(R.id.listView1);
        //SetAdapter e non setlistAdapter perchè non sto usando ListActivity.
        // Gli passo la classe MenuAdapter con un context proprio e la stringa Scelte.
        menu.setAdapter(new MenuAdapter(this, Scelte)); 

    }

} 
```

这是我的 MenuAdapter.java

```
package com.gabriele.progetti;

import java.util.List;

import android.content.Context;
import android.content.res.AssetManager;
import android.graphics.Color;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class MenuAdapter extends ArrayAdapter<String>
{
    private final Context context;
    private final String[] valori;

    public MenuAdapter(Context context, String[] valori) 
    {
        // TODO Auto-generated constructor stub
        super(context, R.layout.activity_main, valori);
        this.context = context;
        this.valori = valori;

    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
         // Dico al service di Android di prepararsi ad una animazione (inflate = animare).
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // Prendo tutte le View all'interno del file XML row_modificata e le metto nella ViewAnimata.
        View ViewAnimata = inflater.inflate(R.layout.row_modificata, parent, false);

        // Dichiaro un context perchè in un arrayadapter se voglio prendere un asset devo utilizzarlo per forza.
        Context context1 = context;
        AssetManager assetManager = context1.getResources().getAssets();

        TextView textView = (TextView) ViewAnimata.findViewById(R.id.textView2);
        Typeface typeface = Typeface.createFromAsset(assetManager, "fonts/menu.ttf");
        textView.setTypeface(typeface);
        textView.setText(valori[position]); // Assegno un testo per ogni valore presente nella stringa che passo.

        return ViewAnimata;

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:37:54.947

在 MainActivity 中添加此代码：

```
 menu.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
            Toast.makeText(activity, "Pressed " + position, Toast.LENGTH_SHORT).show();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:56:59.547

一条评论。最好在适配器内部使用转换视图，不要每次都创建新视图。

```
View itemView;
    if (convertView == null) {
        itemView = inflater.inflate(R.layout.row_modificata, parent, false);
    } else {
        itemView = convertView;
    }
    //set your data here 
```

# python - 在pyqt4中的特定小部件（透明标签）上覆盖文本

> ID：14042060
> 
> 赞同：4
> 
> 时间：2012-12-26T14:36:16.357
> 
> 标签：python, qt4, pyqt, pyqt4, pyside

考虑修改@ekhumoro 的[答案，](https://stackoverflow.com/a/11939294/406686)如下所示。

有一个 mplayer 嵌入在`QWidget`. 现在我想在视频上叠加一些文字。但是我下面的方法不起作用（标签的背景不透明，以至于只能看到视频和文本）。有什么想法可以解决吗？

更一般地说：如何使透明标签定位在自定义小部件上（在我的情况下是 mplayer-widget）？

如果无法完全实现我想要的，那么只需显示冻结视频的最后一帧（或预定义的帧）并在其上显示一些文本就足够了。

请注意，在稍后阶段，我希望覆盖视频的文本随时间而变化，因此解决方案应该已经考虑到这一点。

对于透明的事情，重要的是要注意我使用的是 linux 环境，这应该特别适用于`xmonad`.

```
import mpylayer
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.container = QtGui.QWidget(self)

        #self.container.setStyleSheet('background: black')
        self.button = QtGui.QPushButton('Open', self)
        self.button.clicked.connect(self.handleButton)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.button)

        self.layout.addWidget(self.container)

        self.mplayer = mpylayer.MPlayerControl(
            'mplayer', ['-wid', str(self.container.winId())])

        self.label = QtGui.QLabel('Some text\n and more',self)
        self.label.move(100,100)
        self.label.setGeometry(200,200,900,300)

        #This doesn't work
        self.label.setAttribute(QtCore.Qt.WA_TranslucentBackground)

        #opacity doesn't work
        self.label.setStyleSheet("QLabel {font-size: 100px; opacity:0.5}")

    def handleButton(self):
        path = QtGui.QFileDialog.getOpenFileName()
        if not path.isEmpty():
            self.mplayer.loadfile(unicode(path))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

这是我的非工作方法的屏幕截图：

![非工作方法](../Images/96e2a5852e622336f236523513dcddcb.png)

这是我想要伪造的`gimp`（也许我应该使用红色字体颜色，但这应该只是简单的 css）：

![假货](../Images/96036921fbfe775de76a91cd9ade4045.png)

**编辑** 这是我如何尝试使 X.Jacobs 回答适应我的示例。但是它不起作用。只有当我调整窗口大小时，覆盖的文本/行才会在视频上显示一毫秒，然后再次消失（在这两种情况下，如果视频正在运行并且正在暂停）。

```
import mpylayer
from PyQt4 import QtGui, QtCore

class overlayLabel(QtGui.QLabel):    
    def __init__(self, parent=None):        
        super(overlayLabel, self).__init__(parent)
        self.setAlignment(QtCore.Qt.AlignHCenter|QtCore.Qt.AlignVCenter)

        self.setText("OVERLAY TEXT")
        self.setStyleSheet("QLabel {font-size: 100px;}")
        self.setGeometry(200,200,900,300)

class overlay(QtGui.QWidget):    
    def __init__(self, parent=None):        
        super(overlay, self).__init__(parent)

        palette = QtGui.QPalette(self.palette())
        palette.setColor(palette.Background, QtCore.Qt.transparent)

        self.setPalette(palette)

    def paintEvent(self, event):        
        painter = QtGui.QPainter()
        painter.begin(self)
        painter.setRenderHint(QtGui.QPainter.Antialiasing)
        painter.fillRect(event.rect(), QtGui.QBrush(QtGui.QColor(255, 255, 255, 27)))
        painter.drawLine(self.width()/8, self.height()/8, 7*self.width()/8, 7*self.height()/8)
        painter.drawLine(self.width()/8, 7*self.height()/8, 7*self.width()/8, self.height()/8)
        painter.setPen(QtGui.QPen(QtCore.Qt.NoPen))        

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.container = QtGui.QWidget(self)

        #self.container.setStyleSheet('background: black')
        self.button = QtGui.QPushButton('Open', self)
        self.button.clicked.connect(self.handleButton)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.button)

        self.layout.addWidget(self.container)

        self.mplayer = mpylayer.MPlayerControl(
            'mplayer', ['-wid', str(self.container.winId())])

        ## Both versions don't work:

        #self.label = overlay(self.container)
        self.label = overlayLabel(self.container)

    def handleButton(self):
        path = QtGui.QFileDialog.getOpenFileName()
        if not path.isEmpty():
            self.mplayer.loadfile(unicode(path))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:40:32.357

查看此示例覆盖小部件，您可以根据自己的需要进行调整：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class overlay(QWidget):    
    def __init__(self, parent=None):        
        super(overlay, self).__init__(parent)

        palette = QPalette(self.palette())
        palette.setColor(palette.Background, Qt.transparent)

        self.setPalette(palette)

    def paintEvent(self, event):        
        painter = QPainter()
        painter.begin(self)
        painter.setRenderHint(QPainter.Antialiasing)
        painter.fillRect(event.rect(), QBrush(QColor(255, 255, 255, 127)))
        painter.drawLine(self.width()/8, self.height()/8, 7*self.width()/8, 7*self.height()/8)
        painter.drawLine(self.width()/8, 7*self.height()/8, 7*self.width()/8, self.height()/8)
        painter.setPen(QPen(Qt.NoPen))        

class windowOverlay(QWidget):
    def __init__(self, parent=None):
        super(windowOverlay, self).__init__(parent)

        self.editor = QTextEdit()
        self.editor.setPlainText("OVERLAY"*100)

        self.button = QPushButton("Toggle Overlay")

        self.verticalLayout = QVBoxLayout(self)
        self.verticalLayout.addWidget(self.editor)
        self.verticalLayout.addWidget(self.button)

        self.overlay = overlay(self.editor)
        self.overlay.hide()

        self.button.clicked.connect(lambda: self.overlay.setVisible(False) if self.overlay.isVisible() else self.overlay.setVisible(True))

    def resizeEvent(self, event):    
        self.overlay.resize(event.size())
        event.accept()

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = windowOverlay()
    main.show()
    sys.exit(app.exec_()) 
```

要覆盖文本，请使用以下内容：

```
class overlayLabel(QLabel):    
    def __init__(self, parent=None):        
        super(overlayLabel, self).__init__(parent)
        self.setAlignment(Qt.AlignHCenter|Qt.AlignVCenter)

        self.setText("OVERLAY TEXT") 
```

# objective-c - 使用 RemoteIO 会给出不合理的缓冲区值和大小

> ID：14042061
> 
> 赞同：1
> 
> 时间：2012-12-26T14:36:17.593
> 
> 标签：objective-c, ios, macos, cocoa

使用 iphone 上的回调函数，我正在尝试获取麦克风输入信号。经过这么多问题，我发现了这一点：当我向缓冲区输入一个纯正弦波（到 mac 模拟器）时，我可以看到信号，但随后，它变得越来越低，直到零。

我在想这与苹果的错误有关，mac上缓冲区的样本数是 471 而不是 1024 。我能以某种方式解决这个错误吗？？？

这是我的回调：

```
static OSStatus recordingCallback(void *inRefCon,
                                  AudioUnitRenderActionFlags *ioActionFlags,
                                  const AudioTimeStamp *inTimeStamp,
                                  UInt32 inBusNumber,
                                  UInt32 inNumberFrames,
                                  AudioBufferList *ioData)
{

    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2; //* sizeof(SInt16) ?
    buffer.mData = NULL; 

    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;
    OSStatus status;
    status = AudioUnitRender(audioUnit,
                             ioActionFlags,
                             inTimeStamp,
                             inBusNumber,
                             inNumberFrames,
                             &bufferList);

    int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;

    //here i print q,which is good for 4 seconds-when i can see the pure sin, than it goes down to zero-while sin wave is still in the air 
```

编辑：

这不会在设备上发生，仅在 mac 上发生！我很确定它与mac在缓冲区中看到417个样本的错误有关！

# c# - 时间验证错误

> ID：14042066
> 
> 赞同：0
> 
> 时间：2012-12-26T14:36:27.843
> 
> 标签：c#

我有一个确定时间的文本框，在表单加载时我已经编写了代码，以便时间将填写在这种格式的文本框中 09:09 AM 我使用正则表达式进行验证，所以我已经写了这段代码

```
private bool time()
{
  Regex regex = new Regex("^(1[0-2]|0[1-9]):[0-5][0-9]\040(AM|am|PM|pm)$");
  if (regex.IsMatch(textBox2.Text))
  {
    return true;
  }
  else
  {
    return false;
  }
} 
```

表单中有一个按钮，用于显示是否存在错误，然后错误提供程序显示错误，如果没有，则错误提供程序不会闪烁，按钮单击的代码是

问题是当我将文本框保持空白并单击按钮时，即使我输入 ''09:09 st'' 而不是 ''09:09 pm''，错误提供程序也不会显示错误，但它不会显示错误但我的正则表达式是赖特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:43:38.473

你有你的逻辑倒退。

如果正则表达式匹配，则返回`true`并设置错误消息。我想应该是反过来的。

此外，尝试为您的方法（和表单元素）提供更有意义的名称，例如：

```
private bool CheckTimeFormat(string value)
{
  Regex regex = new Regex("^(1[0-2]|0[1-9]):[0-5][0-9]\040(AM|am|PM|pm)$");
  return regex.IsMatch(value);
}

private void SetInvalidTimeFormatError()
{
  bool isValidTime = CheckTimeFormat(textBox2.Text);
  if (isValidTime)
  {
    errorProvider1.SetError(textBox2, string.Empty);
  }
  else
  {
    errorProvider1.SetError(textBox2, "invalid format");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:48:48.373

你真的不需要正则表达式来进行这样的验证。

```
private bool time() {
    DateTime input;
    return DateTime.TryParse(textbox2.text, out input);
} 
```

您可能想使用更高级的版本`TryParse`来明确指定您期望的日期时间格式。

详细说明见 MSDN：

1.  [`DateTime.TryParse`](http://msdn.microsoft.com/ru-ru/library/wteydsd6.aspx)
2.  [`DateTime.TryParse(String, IFormatProvider, DateTimeStyles, DateTime)`](http://msdn.microsoft.com/ru-ru/library/9h21f14e.aspx)

此外，您可能想为您的函数提供一些有意义的名称，例如`IsValidDateTime`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:55:55.533

我认为文本框中没有选中空白。在您的 time() 函数中，通过给出以下条件进行检查：

```
if(textBox2.Text=="")
return false; 
```

谢谢。

# java - Servlet 过滤器在 AWS 上返回“代理错误”

> ID：14042069
> 
> 赞同：3
> 
> 时间：2012-12-26T14:37:01.317
> 
> 标签：java, gwt, amazon-web-services, servlet-filters, htmlunit

我已经设置了一个`Filter`为我的 GWT Web 应用程序添加爬虫支持。这个想法是捕获所有包含“ `_escaped_fragment_=`”的请求并为爬虫提供快照。

`Filter`我已经按如下方式设置了使用 Guice：

```
filter("/*").through(CrawlerFilter.class); 
```

以下是该`CrawlerFilter`课程的代码（非常感谢[Patrick](https://stackoverflow.com/users/1143684/patrick)）：

```
@Singleton
public class CrawlerFilter implements Filter {
    private static final Logger logger = Logger.getLogger(CrawlerFilter.class.getName());

    /**
     * Special URL token that gets passed from the crawler to the servlet
     * filter. This token is used in case there are already existing query
     * parameters.
     */
    private static final String ESCAPED_FRAGMENT_FORMAT1 = "_escaped_fragment_=";
    private static final int ESCAPED_FRAGMENT_LENGTH1 = ESCAPED_FRAGMENT_FORMAT1.length();
    /**
     * Special URL token that gets passed from the crawler to the servlet
     * filter. This token is used in case there are not already existing query
     * parameters.
     */
    private static final String ESCAPED_FRAGMENT_FORMAT2 = "&" + ESCAPED_FRAGMENT_FORMAT1;
    private static final int ESCAPED_FRAGMENT_LENGTH2 = ESCAPED_FRAGMENT_FORMAT2.length();

    private class SyncAllAjaxController extends NicelyResynchronizingAjaxController {
        private static final long serialVersionUID = 1L;

        @Override
        public boolean processSynchron(HtmlPage page, WebRequest request, boolean async) {
            return true;
        }
    }

    private WebClient webClient = null;

    private static final long _pumpEventLoopTimeoutMillis = 30000;
    private static final long _jsTimeoutMillis = 1000;
    private static final long _pageWaitMillis = 200;
    final int _maxLoopChecks = 2;

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException,
            ServletException {
        // Grab the request uri and query strings.
        final HttpServletRequest httpRequest = (HttpServletRequest) request;
        final String requestURI = httpRequest.getRequestURI();
        final String queryString = httpRequest.getQueryString();
        final HttpServletResponse httpResponse = (HttpServletResponse) response;

        if ((queryString != null) && (queryString.contains(ESCAPED_FRAGMENT_FORMAT1))) {
            // This is a Googlebot crawler request, let's return a static
            // indexable html page post javascript execution, as rendered in the browser.

            final String domain = httpRequest.getServerName();
            final int port = httpRequest.getServerPort();

            // Rewrite the URL back to the original #! version
            // -- basically remove _escaped_fragment_ from the query.
            // Unescape any %XX characters as need be.
            final String urlStringWithHashFragment = requestURI + rewriteQueryString(queryString);
            final String scheme = httpRequest.getScheme();
            final URL urlWithHashFragment = new URL(scheme, "127.0.0.1", port, urlStringWithHashFragment);  // get from localhost
            final WebRequest webRequest = new WebRequest(urlWithHashFragment);

            // Use the headless browser to obtain an HTML snapshot.
            webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
            webClient.getCache().clear();
            webClient.setJavaScriptEnabled(true);
            webClient.setThrowExceptionOnScriptError(false);
            webClient.setRedirectEnabled(false);
            webClient.setAjaxController(new SyncAllAjaxController());
            webClient.setCssErrorHandler(new SilentCssErrorHandler());

            if (logger.getLevel() == Level.FINEST)
                logger.log(Level.FINEST, "HtmlUnit starting webClient.getPage(webRequest) where webRequest = "
                        + webRequest.toString());
            final HtmlPage page = webClient.getPage(webRequest);

            // Important! Give the headless browser enough time to execute
            // JavaScript
            // The exact time to wait may depend on your application.

            webClient.getJavaScriptEngine().pumpEventLoop(_pumpEventLoopTimeoutMillis);

            int waitForBackgroundJavaScript = webClient.waitForBackgroundJavaScript(_jsTimeoutMillis);
            int loopCount = 0;
            while (waitForBackgroundJavaScript > 0 && loopCount < _maxLoopChecks) {
                ++loopCount;
                waitForBackgroundJavaScript = webClient.waitForBackgroundJavaScript(_jsTimeoutMillis);
                if (waitForBackgroundJavaScript == 0) {
                    if (logger.getLevel() == Level.FINEST)
                        logger.log(Level.FINEST, "HtmlUnit exits background javascript at loop counter " + loopCount);
                    break;
                }
                synchronized (page) {
                    if (logger.getLevel() == Level.FINEST)
                        logger.log(Level.FINEST, "HtmlUnit waits for background javascript at loop counter "
                                + loopCount);
                    try {
                        page.wait(_pageWaitMillis);
                    }
                    catch (InterruptedException e) {
                        logger.log(Level.SEVERE, "HtmlUnit ERROR on page.wait at loop counter " + loopCount);
                        e.printStackTrace();
                    }
                }
            }
            webClient.getAjaxController().processSynchron(page, webRequest, false);
            if (webClient.getJavaScriptEngine().isScriptRunning()) {
                logger.log(Level.WARNING, "HtmlUnit webClient.getJavaScriptEngine().shutdownJavaScriptExecutor()");
                webClient.getJavaScriptEngine().shutdownJavaScriptExecutor();
            }

            // Return the static snapshot.
            final String staticSnapshotHtml = page.asXml();
            httpResponse.setContentType("text/html;charset=UTF-8");
            final PrintWriter out = httpResponse.getWriter();
            out.println("<hr />");
            out.println("<center><h3>This is a non-interactive snapshot for crawlers. Follow <a href=\"");
            out.println(urlWithHashFragment + "\">this link</a> for the interactive application.<br></h3></center>");
            out.println("<hr />");
            out.println(staticSnapshotHtml);
            // Close web client.
            webClient.closeAllWindows();
            out.println("");
            out.flush();
            out.close();
            if (logger.getLevel() == Level.FINEST)
                logger.log(Level.FINEST, "HtmlUnit completed webClient.getPage(webRequest) where webRequest = "
                        + webRequest.toString());
        }
        else {
            if (requestURI.contains(".nocache.")) {
                // Ensure the gwt nocache bootstrapping file is never cached.
                // References:
                // https://stackoverflow.com/questions/4274053/how-to-clear-cache-in-gwt
                // http://seewah.blogspot.com/2009/02/gwt-tips-2-nocachejs-getting-cached-in.html
                //
                final Date now = new Date();
                httpResponse.setDateHeader("Date", now.getTime());
                httpResponse.setDateHeader("Expires", now.getTime() - 86400000L); // One day old.
                httpResponse.setHeader("Pragma", "no-cache");
                httpResponse.setHeader("Cache-control", "no-cache, no-store, must-revalidate");
            }

            filterChain.doFilter(request, response);
        }
    }

    /**
     * Maps from the query string that contains _escaped_fragment_ to one that
     * doesn't, but is instead followed by a hash fragment. It also unescapes
     * any characters that were escaped by the crawler. If the query string does
     * not contain _escaped_fragment_, it is not modified.
     * 
     * @param queryString
     * @return A modified query string followed by a hash fragment if
     *         applicable. The non-modified query string otherwise.
     * @throws UnsupportedEncodingException
     */
    private static String rewriteQueryString(String queryString) throws UnsupportedEncodingException {
        // Seek the escaped fragment.
        int index = queryString.indexOf(ESCAPED_FRAGMENT_FORMAT2);
        int length = ESCAPED_FRAGMENT_LENGTH2;
        if (index == -1) {
            index = queryString.indexOf(ESCAPED_FRAGMENT_FORMAT1);
            length = ESCAPED_FRAGMENT_LENGTH1;
        }
        if (index != -1) {
            // Found the escaped fragment, so build back the original decoded
            // one.
            final StringBuilder queryStringSb = new StringBuilder();
            // Add url parameters if any.
            if (index > 0) {
                queryStringSb.append("?");
                queryStringSb.append(queryString.substring(0, index));
            }
            // Add the hash fragment as a replacement for the escaped fragment.
            queryStringSb.append("#!");
            // Add the decoded token.
            final String token2Decode = queryString.substring(index + length, queryString.length());
            final String tokenDecoded = URLDecoder.decode(token2Decode, "UTF-8");
            queryStringSb.append(tokenDecoded);
            return queryStringSb.toString();
        }
        return queryString;
    }

    @Override
    public void destroy() {
        if (webClient != null)
            webClient.closeAllWindows();
    }

    @Override
    public void init(FilterConfig config) throws ServletException {
    }

} 
```

它使用 HtmlUnit 创建快照。

然而; 当我尝试使用常规浏览器访问快照时发生错误。我输入的 URL 格式如下：

```
http://www.myapp.com/?_escaped_fragment_=myobject%3Bid%3D507ac730e4b0e2b7a73b1b81 
```

但是按`Filter`结果处理会出现以下错误：

```
Proxy Error

The proxy server received an invalid response from an upstream server.
The proxy server could not handle the request GET /.

Reason: Error reading from remote server

Apache/2.2.22 (Amazon) Server at www.myapp.com Port 80 
```

任何帮助，将不胜感激。

# html - 如何在 CSS 中更改悬停图像

> ID：14042070
> 
> 赞同：2
> 
> 时间：2012-12-26T14:37:08.833
> 
> 标签：html, css

你好朋友当我**检查元素**时我的代码到目前为止......

```
<div class="ja-megamenu " id="ja-megamenu">
    <ul class="megamenu level0">
        <li  class="mega first active">
            <a href="http://127.0.0.1/"  class="mega first active" id="menu435" >
                <span class="has-image" >
                    <img src=images/on_home.png>
                </span>
            </a>
        </li>
       <li  class="mega haschild">
            <a href="/index.php?option=com_community&amp;view=frontpage&amp;Itemid=455"  class="mega haschild" id="menu455" title="Grower Community">
                <span class="has-image" >
                    <img src=images/active_11.png>
                </span>
            </a>
            <div class="childcontent cols1 ">
                <div class="childcontent-inner-wrap">
                    <div class="childcontent-inner clearfix" style="width: 200px;">
                        <div class="megacol column1 first" style="width: 200px;">
                            <ul class="megamenu level1">
                                <li  class="mega first">
                                    <div class="group">
                                        <div class="group-title">
                                            <a href="/index.php?option=com_community&amp;view=photos&amp;Itemid=507" class="mega first" id="menu507" title="Photos">
                                                <span class="has-image" >
                                                    <img src=images/wt_under_link_01_01.png>
                                                </span>
                                            </a>
                                        </div>
                                    </div>
                                </li>
                                <li class="mega last">
                                    <a href="/index.php?option=com_allvideoshare&amp;view=category&amp;slg=0&amp;orderby=default&amp;Itemid=934"  class="mega last" id="menu934" title="Videos">
                                        <span class="has-image" >
                                            <img src=images/wt_under_link_01_02.png>    
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li  class="mega">
            <a href="/index.php?option=com_kunena&amp;view=topics&amp;mode=replies&amp;Itemid=506"  class="mega" id="menu506" title="Forum">
                <span class="has-image" >
                    <img src=images/active_05.png>
                </span>
            </a>
        </li>
        <li  class="mega last">
            <a href="/index.php?option=com_easyblog&amp;view=blogger&amp;limit=-2&amp;Itemid=944" class="mega last" id="menu944" title="Blog">
                <span class="has-image" >
                    <img src=images/active_07.png>
                </span>
            </a>        
        </li>
    </ul>
</div> 
```

现在在这里我想更改悬停时的图像...

我正在使用这样的东西

```
.ja-megamenu ul.level0 li.mega a.mega span.has-image:hover{
    background:url(../../images/act_05.png) no-repeat 0 0;
} 
```

但图像悬停没有发生......任何人都可以帮助我

我认为悬停不会发生由于跨度...

请建议我在这里可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:52:17.713

正如已经说过的，只要您有图像，背景图像就不会显示，因此您可以在悬停时使用它来隐藏图像`span`：

```
.ja-megamenu ul.level0 li.mega a.mega span.has-image:hover > img {
    visibility:hidden;
} 
```

看到这个[jsfiddle](http://jsfiddle.net/cjtpB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:42:32.713

看起来您正在尝试更改跨度的背景图像，而不是图像标签的 src。

为了做到这一点，使用 jQuery 可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:41:44.710

我建议将`:hover`伪类应用于锚 ( `a.mega:hover`)，然后更改其`<span>`下方的子项。

```
.ja-megamenu ul.level0 li.mega a.mega:hover span.has-image {
    /* background change */
} 
```

请记住，只要跨度内有一个孩子`<img>`，它就会与您在跨度上设置的背景重叠。也就是说span的背景`<img src="...">`在视觉上永远无法超越。

# types - go中的基本类型实现了哪些接口

> ID：14042072
> 
> 赞同：3
> 
> 时间：2012-12-26T14:37:18.090
> 
> 标签：types, interface, numbers, go

你能用接口捕获“支持+、-*和/的类型”吗？或者，如果您想对所有数字类型创建函数，您是否只需要使用类型开关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:58:35.973

接口定义了类型实现的一组方法。在 Go 中，基本类型没有方法。他们唯一满足的接口是空接口，`interface{}`.

如果您希望处理所有数字类型，您可以使用反射和类型开关的组合。如果您只使用类型开关，您将有更多的代码，但它应该更快。如果您使用反射，它会很慢，但需要的代码要少得多。

请记住，在 Go 中，您通常不会尝试使函数适用于所有数字类型。很少需要。

类型开关示例：

```
func square(num interface{}) interface{} {
    switch x := num.(type) {
    case int:
        return x*x
    case uint:
        return x*x
    case float32:
        return x*x
    // many more numeric types to enumerate
    default:
        panic("square(): unsupported type " + reflect.TypeOf(num).Name())
    }
} 
```

Reflect + Typeswitch 示例：

```
func square(num interface{}) interface{} {
    v := reflect.ValueOf(num)
    ret := reflect.Indirect(reflect.New(v.Type()))

    switch v.Type().Kind() {
    case reflect.Int, reflect.Int8, reflect.Int16, reflect.Int32, reflect.Int64:
        x := v.Int()
        ret.SetInt(x * x)
    case reflect.Uint, reflect.Uintptr, reflect.Uint8, reflect.Uint16, reflect.Uint32, reflect.Uint64:
        x := v.Uint()
        ret.SetUint(x * x)
    case reflect.Float32, reflect.Float64:
        x := v.Float()
        ret.SetFloat(x * x)
    default:
        panic("square(): unsupported type " + v.Type().Name())
    }

    return ret.Interface()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:15:22.203

预声明的类型没有附加任何方法。

算术运算符可以声明为某个接口的方法集，但只能声明为例如。方法“添加”、“子”等，即。没有办法重新定义多态 '+', '-', ... 运算符的作用。

# nsis - 如何开始使用 NSIS 组件

> ID：14042085
> 
> 赞同：0
> 
> 时间：2012-12-26T14:39:12.780
> 
> 标签：nsis

> 块引用

我是 NSIS 的新手。我已经有一个包含服务的 Windows 应用程序，从那里进行通信，我有一个创建的安装项目，我使用 .NET 开发。现在我想知道如何将此设置转换为 NSIS 设置。到目前为止，我已经创建了欢迎页面、许可证页面，现在我被困在组件页面中。由于我的项目也包含许多第 3 方 dll。我不知道如何开始。任何人都可以建议如何使用 NSIS 吗？

> 块引用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:23:01.000

组件页面显示脚本中的命名部分，用户可以选择要安装的组件：

```
Page components
Page instfiles

Section "Main Program"
SectionIn RO ; Read only, always installed
Setoutpath $instdir
File "myapp.exe"
SectionEnd

Section "Foo component"
Setoutpath $instdir\plugins
File "Foo.dll"
SectionEnd

Section "Bar component"
Setoutpath $instdir\plugins
File "Bar.dll"
SectionEnd 
```

# javascript - javascript 错误：访问属性“u8”的权限被拒绝

> ID：14042088
> 
> 赞同：0
> 
> 时间：2012-12-26T14:39:28.677
> 
> 标签：javascript, jquery, html

我有一个带有按钮元素的旧版 jsp 页面。我正在使用框架集/框架。单击此按钮功能 parent.u8() 被调用。但是只要我点击按钮，我就会得到以下错误

```
Error: Permission denied to access property 'u8'
parent.u8() 
```

它是一个很大的jsp。所以我不想在这里粘贴完整的内容。我尝试从服务器生成的 html 页面中获取最少的 html 标记，并创建了具有类似结构的 html 页面，它在那里可以正常工作。但在实际应用程序中却不行。

仅供参考，还有一个 iframe 元素，但它完全位于单独的框架中，而不是在按钮存在的框架中（因此与 iframe 相关的东西对我来说看起来很黯淡）。u8 函数位于 top head Tag 内。**伙计们，我知道在没有实际标记的情况下很难说出确切的原因，但也许你可以帮助我了解可能的原因，我什么时候可以得到这种例外权限被拒绝访问属性**

**更新：-**

这是以前的工作。当我开始在其中一个框架中使用 tinymce(WYSIWYG) 编辑器时，问题就开始了。Tinymce 创建了一个 iframe 元素，但仅从 appserver 加载。粘贴在其中一个框架的主体内部生成的代码下方。可能有帮助

```
<span id="bodyTest_parent" class="mceEditor defaultSkin" role="application" aria-labelledby="bodyTest_voice">
<span id="bodyTest_voice" class="mceVoiceLabel" style="display:none;">Rich Text Area</span>
<table id="bodyTest_tbl" class="mceLayout" cellspacing="0" cellpadding="0" role="presentation" style="width: 100%; height: 323px;">
<tbody>
<tr class="mceFirst mceLast">
<td class="mceIframeContainer mceFirst mceLast">
<iframe id="bodyTest_ifr" frameborder="0" src="javascript:""" allowtransparency="true" title="Rich Text AreaPress ALT-F10 for toolbar. Press ALT-0 for help" style="width: 100%; height: 323px; display: block;">
<!DOCTYPE >
<html>
<head xmlns="http://www.w3.org/1999/xhtml">
<body id="tinymce" class="mceContentBody " onload="window.parent.tinyMCE.get('bodyTest').onLoad.dispatch();" spellcheck="false" dir="ltr">
<p>
<span color="blue" data-mce-style="color: blue;" style="color: blue;">
<strong>adain</strong>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:41:11.247

这通常是由存在于不同来源（例如域）上的框架引起的。出于安全原因，不允许 JavaScript 访问来自不同来源的数据。

# android - Android：BigDecimal 始终显示最多 2 位小数

> ID：14042092
> 
> 赞同：0
> 
> 时间：2012-12-26T14:39:52.013
> 
> 标签：android, bigdecimal, number-formatting

```
String TotalAmount= ""; 
```

假设我有 TotalAmount = `10`, or `10.1`or `10.11`or`10.11111`

```
BigDecimal Amount = new BigDecimal(amount); 
```

我想要`Amount`这种模式`#.##`

```
10 -> 10.00
10.1 -> 10.10
10.11 -> 10.11
10.11111 -> 10.11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:47:33.137

你可以试试java.text.NumberFormat，

```
NumberFormat nf = NumberFormat.getNumberInstance();
nf.setMaximumFractionDigits(2);
nf.setMinimumFractionDigits(2);
String res = nf.format(Amount);
System.out.println(res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:32:55.347

自己解决了

```
BigDecimal TotalAmount= new BigDecimal(myAmount);
BigDecimal Amount = TotalAmount.divide(new BigDecimal(1),2, RoundingMode.HALF_UP); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:04:14.553

您可以使用[DecimalFormat](http://developer.android.com/reference/java/text/DecimalFormat.html)（类似于 NumberFormat 但使用 BigDecimal）

# activex - ActiveX 在客户端计算机上不起作用

> ID：14042094
> 
> 赞同：5
> 
> 时间：2012-12-26T14:40:11.687
> 
> 标签：activex, cab, inf

我正在尝试为一个简单的 hello world 消息框运行 activex 控件。首先我创建了类库，现在有了 dll，然后我创建了 HTML 页面并调用了 activeX 控件：

```
<!DOCTYPE>
<html>
<head>
      <title>DemoActiveX</title>
</head>
<body>
   <OBJECT id="DemoActiveX" classid="clsid:400DCE17-4B26-4E59-9A88-AF39E2BE4A55">
</OBJECT>
    <script type="text/javascript">
        try {
            var obj = document.DemoActiveX;
            if (obj) {
                alert(obj.SayHello());
            } else {
                alert("Object is not created!");
            }
        } catch (ex) {
            alert("Some error happens, error message is: " + ex.Description);
        }
    </script>
</body>
</html> 
```

当我在我的机器上尝试它时，我曾经使用 regasm /codebase "dll path" 注册 dll，它工作正常。

当我尝试在另一台机器上运行时出现问题，我按照以下步骤操作：1）我创建了安装项目并添加了 dll 文件。

## 2）我创建了 .inf 文件并尝试了两个内容：

```
[version]
signature="$CHICAGO$"
AdvancedINF=2.0
[Add.Code]
ActiveX.dll=ActiveX.dll

[ActiveX.dll]
file-win32-x86=thiscab
clsid=400DCE17-4B26-4E59-9A88-AF39E2BE4A55
FileVersion=1,0,0,0 
```

## 注册服务器=是

```
[version]
signature="$CHICAGO$"
AdvancedINF=2.0

[Setup Hooks]
install=install

[install]
run=msiexec.exe /package """%EXTRACT_DIR%\DemoActiveXSetup.msi""" /qn 
```

3) 我创建了包含 .inf 和 setup.exe 文件的 .CAB 文件 4) 将 HTML 页面中的对象更改为：

```
<OBJECT id="DemoActiveX" classid="clsid:400DCE17-4B26-4E59-9A88-AF39E2BE4A55" 
codebase="ActiveXCAB.CAB" ></OBJECT> 
```

当我试图在另一台机器上打开页面时，一个请求窗口打开了打开 CAB 的请求，当我按下是时什么也没发生！！！！！！！为什么它不打开 setup.exe 或 msi 文件？顺便说一句，当我手动安装安装文件时，activeX 工作了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:49:55.973

我解决了这个问题:) 问题是：

1) 我以前只将 msi 文件或 setup.exe 放入 CAB 文件，但我必须同时放入 msi 和 setup.exe 并在 inf 文件中引用 setup.exe

2）inf文件格式错误，正确的是：

```
 [version]
 signature="$CHICAGO$"
 AdvancedINF=2.0

 [Add.Code]
 setup.exe=setup.exe

 [setup.exe]
 file-win32-x86=thiscab
 clsid={415D09B9-3C9F-43F4-BB5C-C056263EF270}
 FileVersion=1,0,0,0

 [Setup Hooks]
 RunSetup=RunSetup

 [RunSetup]
 run="%EXTRACT_DIR%\setup.exe" 
```

祝你好运 ：）

# ruby - 争吵位置

> ID：14042097
> 
> 赞同：1
> 
> 时间：2012-12-26T14:40:47.267
> 
> 标签：ruby, splat

为什么这段代码

```
Hash[*[[:first_name, 'Shane'], [:last_name, 'Harvie']].flatten] 
```

返回这个

```
{:first_name=>"Shane", :last_name=>"Harvie"} 
```

我知道`Array#flatten`。但这是什么`*`意思？我如何查找有关它的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:43:34.083

这就是所谓的 splat 运算符。在这种情况下，它需要一个数组并“扩展”它，生成一个要[`Hash.[]`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)调用的参数列表。基本上

```
Hash[*[[:first_name, 'Shane'], [:last_name, 'Harvie']].flatten] 
```

相当于这个

```
Hash[*[:first_name, 'Shane', :last_name, 'Harvie']] 
```

相当于这个

```
Hash[:first_name, 'Shane', :last_name, 'Harvie'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:52:49.480

除了 Sergio 的回答之外，还有一个简单的 splat 运算符示例：

```
def foo(arg1, arg2)
  puts arg1
  puts arg2
end
args = ["bar", "baz"]

foo(args)
#=> ArgumentError: wrong number of arguments (1 for 2)

foo(*args)
#=> "bar"
#=> "baz" 
```

# java - Playn mvn clean install error "NoClassDefFoundError: playn/core/game

> ID：14042098
> 
> 赞同：0
> 
> 时间：2012-12-26T14:40:52.573
> 
> 标签：java, maven, noclassdeffounderror, playn

所以很长一段时间以来，我一直在网上搜索，不断查看其他人的问题和修复，希望他们会尊重我的问题，但我似乎无法找到任何与 playn 有相同问题的人。

我可以运行“mvn test”，cmd 和 mu 小项目运行完美，但是当我最终使用“mvn clean install”导出项目并尝试运行时，`myApp-core-1.0-SNAPSHOT.jar`我得到一个异常：

`Exception in thread "main" java.NoClassDefFoundError: playn/core/game`

我只是想知道过去是否有人遇到过这个问题并且可以指出我克服它的正确方向，因为这个应用程序是我的 A-level 课程并且很快就会提交我很担心我可能达不到交日期的最后期限，我真的希望这不会发生 D:

这是我的`myApp-core pom.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-                            
v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>

<groupId>com.ALevelWork</groupId>
<artifactId>zombiepanic</artifactId>
<version>1.0-SNAPSHOT</version>
</parent>

<artifactId>zombiepanic-core</artifactId>
<packaging>jar</packaging>
<name>ZombiePanic Core</name>

<dependencies>
<dependency>
  <groupId>com.googlecode.playn</groupId>
  <artifactId>playn-jbox2d</artifactId>
  <version>${playn.version}</version>
</dependency>

<dependency>
  <groupId>com.googlecode.playn</groupId>
  <artifactId>playn-core</artifactId>
  <version>${playn.version}</version>
</dependency>

</dependencies>

<build>
<plugins>   

    <plugin>
<!-- Build an executable JAR -->
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
<configuration>
<archive>
  <manifest>
  <addClasspath>true</addClasspath>
  <classpathPrefix>lib/</classpathPrefix>
      <mainClass> ZombiePanic.core.ZombiePanic</mainClass>
  </manifest>
 </archive>
 </configuration>
 </plugin>

   <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
  </plugin>
  </plugins>

  <resources>
  <!-- include the source files in our main jar for use by GWT -->
  <resource>
    <directory>${project.build.sourceDirectory}</directory>
  </resource>
  <!-- and continue to include our standard resources -->
  <resource>
    <directory>${basedir}/src/main/resources</directory>
    </resource>
  </resources>
 </build>
 </project> 
```

提前致谢，

雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:36:19.607

我已经按照本教程（http://jameswilliams.be/blog/entry/255）解决了这个问题，我没有将zombiepanic-core链接到java后端（zombiepanic-java）来做到这一点你需要首先添加将此插件插入 java 后端 pom.xml：

```
<plugin>
    <groupId>org.sonatype.plugins</groupId>
    <artifactId>jarjar-maven-plugin</artifactId>
<version>1.5</version>
<executions>
    <execution>
        <phase>package</phase>
        <goals>
            <goal>jarjar</goal>
        </goals>
        <configuration>
            <rules />
        </configuration>
    </execution>
</executions> 
```

完成此操作后，通过将其也添加到 java 后端 pom.xml 中，将其链接到核心类（zombiepanic-core）：

`<plugin> <groupId>org.apache.maven.plugins</groupId> <artifactId>maven-jar-plugin</artifactId> <configuration> <archive> <manifest> <mainClass>com.YourPackage.java.JarJarDemoJava</mainClass> </manifest> </archive> </configuration> </plugin>`

请记住将主类链接到您的 Java 后端版本，例如 ZombiePanicJava 而不是只是 ZombiePanic 的核心版本。

# gcc - gcc 未定义的引用

> ID：14042103
> 
> 赞同：10
> 
> 时间：2012-12-26T14:41:17.140
> 
> 标签：gcc, undefined-reference

我在跑..

```
gcc -c -I/usr/vt/sample ttssample.c
gcc -L. -lttsapi ttssample.o -o ttsample 
```

我收到以下错误...

```
ttssample.o: In function `_TTSFile':
ttssample.c:(.text+0x352): undefined reference to `TTSRequestFile'
ttssample.o: In function `_TTSFileEx':
ttssample.c:(.text+0x5e0): undefined reference to `TTSRequestFileEx'
ttssample.o: In function `_TTSBuffer':
ttssample.c:(.text+0x833): undefined reference to `_TTSRequestBuffer'
ttssample.o: In function `_TTSBufferEx':
ttssample.c:(.text+0xabd): undefined reference to `_TTSRequestBufferEx'
ttssample.o: In function `_TTSBuffering_cont':
ttssample.c:(.text+0xcbf): undefined reference to `_TTSRequestBuffer'
ttssample.o: In function `_TTSBuffering_stop':
ttssample.c:(.text+0xf2d): undefined reference to `_TTSRequestBuffer'
ttssample.o: In function `_TTSBuffering_SSML':
ttssample.c:(.text+0x122b): undefined reference to `_TTSRequestBufferSSMLEx'   
ttssample.o: In function `_TTSStatus':
ttssample.c:(.text+0x157b): undefined reference to `TTSRequestStatus'
collect2: ld returned 1 exit status 
```

并且 TTSRequestFile 在 lib 标头中，但它的前面有 DllExport，我想知道这是我错误的原因吗？非常感谢任何帮助。

```
DllExport int TTSRequestFile(char *szServer, int nPort, char *pText, int nTextLen, char *szSaveDir, char *szSaveFile, int nSpeakerID, int nVoiceFormat); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-26T15:18:36.873

您的链接命令是错误的。应在命令末尾指定库：

```
gcc ttssample.o -o ttsample -L。-lttsapi
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T15:15:33.793

您可以像这样在调用`ifdefines`周围添加预处理器：`DllExport`

```
#ifdef _WIN32
// we are on windows

#elif defined __linux__
//we are on linux

#elif defined __APPLE__&__MACH__
// we are on mac

#endif // os specific 
```

我为我一直为其编译跨平台的三个平台添加了。请注意，我用来识别平台的关键字可能会发生变化，但`_WIN32`已经在 Windows 7 和 8 上进行了测试。我认为是一年前在 sourceforge 上发现的。我现在找不到该页面，但如果我找到了，我会尽快与您联系。

由于我还不能评论 Nikos C 的答案，所以我会在这里评论：~~你的链接命令是正确的，我当然看不到你的文件，所以我假设你的路径是正确的。~~重要的是`-l`' 需要根据依赖关系以正确的顺序排列，但就我所经历的而言，这通常不是问题。

# javascript - 在 html 文档中保存 javascript 对象的实例

> ID：14042105
> 
> 赞同：0
> 
> 时间：2012-12-26T14:41:22.370
> 
> 标签：javascript, html, asp.net-mvc

首先：我对 Javascript 和 HTML 很陌生。我确实遇到了属于初学者类别的问题/问题，但我不知道要搜索什么来获得答案。我想做这样的事情：

```
<script type="text/javascript">
    var map;
    $(document).ready(function () {
        this.map = new GoogleMap();
        this.map.initialize();
    });
    var addMarker = function(lat, lng, address) {
        this.map.addMarker(lat, lng, address);
    };
</script> 
```

`addMarker`我想从剃刀调用的函数：

```
@foreach (var item in Model.Companies)
{
    <script>
        addMarker(@item.Latitude, @item.Longitude, '@item.Address');
    </script>
} 
```

问题是`map`没有在方法的范围内声明。使这个工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:45:47.660

不要使用`this.map`，但`map`它可以让您访问`map`已在范围内声明的全局变量`window`：

```
var addMarker = function(lat, lng, address) {
    map.addMarker(lat, lng, address);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:45:24.970

访问`map`您在第一行声明的变量 not `this.map`。

# java - 使用 Thymeleaf 时，Spring 安全会话范围似乎为空

> ID：14042106
> 
> 赞同：4
> 
> 时间：2012-12-26T14:41:22.950
> 
> 标签：java, spring, jsp, spring-security, thymeleaf

当使用 Spring Security 登录失败时，它会引发异常并在我的 JSP 中显示如下：

```
<c:if test="${not empty error}">
    <div class="errorblock">
        Your login attempt was not successful, try again.<br /> Caused :
        ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
    </div>
</c:if> 
```

现在我正在从 JSP 更改为 Thymeleaf 并尝试做同样的事情，但是当登录失败时，`sessionScope`变量似乎为空。

```
<div th:if="${error}" class="errorblock" th:text="'testing ' + ${sessionScope}">

</div> 
```

这打印出来`testing null`。当我将视图解析器改回 JSP 时，它运行良好。我想我做错了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T00:04:05.927

In Thymeleaf, you don't access session variables using the `sessionScope` token name. You use `session` instead. So you need to do something like:

```
<div class="error" 
     th:if="${param.login_error}"
     th:with="errorMsg=${session["SPRING_SECURITY_LAST_EXCEPTION"].message}">
  Your login attempt was not successful, try again.<br />
  Reason: <span th:text="${errorMsg}">Wrong input!</span> 
</div> 
```

Disclaimer, according to StackOverflow rules: I am the author of Thymeleaf.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T21:33:10.173

第二个和第一个不一样。如果您在没有变量名的情况下调用隐式 EL 变量，我不确定您应该得到什么`sessionScope`。怎么样：

```
${sessionScope.SPRING_SECURITY_LAST_EXCEPTION.message} 
```

此外，您确定您的页面加入了会话吗？在 JSP 中，有一个`session`指令控制会话范围是否可以通过 EL 获得。

```
<%@ page session="false|true" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T08:59:32.540

以下适用于 Thymeleaf 3.0 和 Bootstrap 4.1

```
<div th:if="${param.error} and ${session}" th:with="errorMsg=${session['SPRING_SECURITY_LAST_EXCEPTION']}">
     <div class="alert alert-dismissible alert-danger error">
          Reason: <span th:text="${errorMsg}">Demo Invalid input</span>
     </div>
</div> 
```

# objective-c - Facebook-朋友的生日返回空值

> ID：14042107
> 
> 赞同：1
> 
> 时间：2012-12-26T14:41:24.340
> 
> 标签：objective-c, facebook, facebook-graph-api

我使用下面的 Objective-c 代码从 facebook 检索朋友列表、id 和生日，这对于朋友列表和 id 工作正常，但返回朋友生日的 null 值。

```
FBRequest* friendsRequest = [FBRequest requestForMyFriends];
[friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,
                              NSDictionary* result,
                              NSError *error) {
NSArray* friends = [result objectForKey:@"data"];
NSLog(@"Found: %i friends", friends.count);
for (NSDictionary<FBGraphUser>* friend in friends) {
    NSLog(@"I have a friend named %@ with id %@  with Birthdate %@", friend.name, friend.id, friend.birthday);
}
}]; 
```

我还为friend_birthday设置了权限，但它仍然为朋友的生日返回空值。谁能帮我检索朋友的生日而不是空值？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:49:45.523

你确定你添加了权限'user_birthday'，它提供了以年份作为生日属性的生日访问权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T10:26:18.187

```
 NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_birthday",@"friends_hometown",
                                @"friends_birthday",@"friends_location",
                                nil];
 [FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES completionHandler: .....

 FBRequest *friendRequest = [FBRequest requestForGraphPath:@"me/friends?fields=name,picture,birthday,location"];
 [ friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) 
{
   NSArray *data = [result objectForKey:@"data"];
   for (FBGraphObject<FBGraphUser> *friend in data) 
   {
      NSLog(@"%@:%@", [friend name],[friend birthday]);
    }
}]; 
```

# android - 无法构建cordova.jar

> ID：14042113
> 
> 赞同：3
> 
> 时间：2012-12-26T14:41:54.717
> 
> 标签：android, cordova, ant, cordova-plugin-proguard

我目前正在尝试使用cordova（phonegap）进入移动设备的跨平台开发。

现在我正在*尝试*构建cordova.jar - 所以我在一开始。

当我 `android update project -p . -t android-15`在我的框架目录中运行时，我得到了输出：

```
E:\eclipse\cordova-android-master\framework>android update project -p . -t android-15
Updated project.properties
Updated local.properties
build.xml: Found version-tag: custom. File will not be updated.
Updated file E:\eclipse\cordova-android-master\framework\proguard-project.txt
It seems that there are sub-projects. If you want to update them
please use the --subprojects parameter. 
```

然后在我`ant jar`在框架目录中运行命令的步骤中，我得到输出：

```
Buildfile: E:\eclipse\cordova-android-master\framework\build.xml

-check-env:
 [checkenv] Android SDK Tools Revision 21
 [checkenv] Installed at E:\eclipse\android-sdk-windows

-setup:
     [echo] Project Name: Cordova
  [gettype] Project Type: Android Library

-pre-clean:

clean:
   [delete] Deleting directory E:\eclipse\cordova-android-master\framework\bin
   [delete] Deleting directory E:\eclipse\cordova-android-master\framework\gen
[getlibpath] Library dependencies:
[getlibpath] No Libraries
   [subant] No sub-builds to iterate on

build-javascript:

-build-setup:
     [echo] Resolving Build Target for Cordova...
[gettarget] Project Target:   Android 4.0.3
[gettarget] API level:        15
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: E:\eclipse\cordova-android-master\framework\bin
    [mkdir] Created dir: E:\eclipse\cordova-android-master\framework\bin\res
    [mkdir] Created dir: E:\eclipse\cordova-android-master\framework\gen
    [mkdir] Created dir: E:\eclipse\cordova-android-master\framework\bin\classes
    [mkdir] Created dir: E:\eclipse\cordova-android-master\framework\bin\dexedLibs
     [echo] ----------
     [echo] Resolving Dependencies for Cordova...
[dependency] Ordered libraries:
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.
     [echo] ----------
     [echo] Building Libraries with '${build.target}'...
   [subant] No sub-builds to iterate on

-pre-build:

-code-gen:
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] Generating BuildConfig class.

-pre-compile:

-compile:
    [javac] Compiling 53 source files to E:\eclipse\cordova-android-master\framework\bin\classes
    [javac] E:\eclipse\cordova-android-master\framework\src\org\apache\cordova\CordovaWebView.java:900: error: cannot find symbol
    [javac]             settings.setAllowUniversalAccessFromFileURLs(true);
    [javac]                     ^
    [javac]   symbol:   method setAllowUniversalAccessFromFileURLs(boolean)
    [javac]   location: variable settings of type WebSettings
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] 1 error 
```

有谁知道我做错了什么？

正如自述文件所说，common-codec-1.6.jar 位于 lib 文件夹中。

已安装 android api 级别 15。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:13:39.977

您需要使用 API 级别 16 进行构建，以免出现编译错误。在 API 级别 16 中引入了 WebSettings.setAllowUniversalAccessFromFileURLs() 方法。

# java - 如何检查是否在 selenium 中选中了 extjs 复选框？

> ID：14042121
> 
> 赞同：0
> 
> 时间：2012-12-26T14:42:35.777
> 
> 标签：java, extjs, selenium, checkbox

我正在测试一个在 ExtJs 中实现的 Web 应用程序（部分......），复选框实现为按钮。使用 Selenium 库用 java 编写的测试。

为了敲击按钮，我正在使用类似的东西：

```
selenium.click("css=input.x-form-field.x-form-checkbox",true); 
```

现在我正在尝试获取**复选框的状态**，如果它被选中，我不知道该怎么做。

这是实现：

```
<td id="checkboxfield-1028-bodyEl" class="x-form-item-body x-form-cb-wrap" colspan="3" role="presentation" style="width: 100%;">
<input id="checkboxfield-1028-inputEl" class="x-form-field x-form-checkbox" type="button" hidefocus="true" autocomplete="off" aria-invalid="false" style="-moz-user-select: text;">
<label id="checkboxfield-1028-boxLabelEl" class="x-form-cb-label x-form-cb-label-after" for="checkboxfield-1028-inputEl">Active</label> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:56:11.110

您可以尝试使用部分 id 查找复选框：

```
driver.findElement(By.xpath("//input[contains(@id, 'checkboxfield')]")).isSelected(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:10:49.033

我假设您使用的是网络驱动程序，所以您可以做的是：

```
 isChecked = e.findElement(By.tagName("input")).Selected; 
```

或者

```
 isChecked = e.findElement(By.Id("checkboxfield-1028-bodyEl")).Selected; 
```

这给了你状态。

您是否正在为它寻找 JUnit 断言？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:15:54.307

我不完全记得 ExtJs，但我假设选中和未选中是两个 css 类。尝试找出这些类（使用 Chrome 开发工具检查页面）。

在页面对象上定义两个 WebElement：

```
@FindBy(cssSelector=".x-form-checkbox.unchecked")
WebElement checked;

@FindBy(cssSelector=".x-form-checkbox.checked")
WebElement unchecked; 
```

然后你需要等到按钮被选中或取消选中。这可以通过添加此方法来完成：

```
protected final void waitForElementPresent(final By by) {
   seleniumContext.getWebDriverWait().until(new ExpectedCondition() {
      @Override
      public Boolean apply(WebDriver driver) {
        try {
          driver.findElement(by);
          return true;
        } catch (NoSuchElementException e) {
          return false;
        }
      }
   });
} 
```

# iphone - iPad 和 iPhone 的不同布局

> ID：14042122
> 
> 赞同：0
> 
> 时间：2012-12-26T14:42:47.883
> 
> 标签：iphone, objective-c, ios, ipad, storyboard

我现在正在制作一个 iphone 应用程序。但将来这个应用程序也应该可用于 iPad。目前我正在使用情节提要，因为以这种方式使其也可用于 iPad 非常容易。

我现在的问题是，一些视图，比如长的个人资料表单，你把它放在一个滚动视图中。但是您不能在情节提要中构建滚动视图布局，因此我在代码中创建了它们。但是，如果我希望 iPad 也可以使用此视图布局，我该怎么办？

我应该重写 iPad 的布局代码，然后进行一些设备检测吗？最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:58:35.747

我认为更好地检测硬件并编写不同的布局代码。
您可以使用 Apple 的宏：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     // Write your layout code for iPad there
}
else
{
     // Write your layout code for iPhone/iPod there
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:45:55.460

解决方案相当简单。首先，我认为您无法在情节提要中创建滚动视图。但这是可能的！你可以在[这里](http://www.devx.com/wireless/Article/45113)找到如何做。

所以现在的解决方案是您专门为 iPad 创建另一个故事板！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:08:12.480

下面将对你有用。

```
#define IS_IPHONE ( [[[UIDevice currentDevice] model] isEqualToString:@"iPhone"] )
#define IS_IPOD   ( [[[UIDevice currentDevice] model] isEqualToString:@"iPod touch"] )
#define IS_IPAD   ( [[[UIDevice currentDevice] model] isEqualToString:@"iPad"] )
#define IS_IPHONE_5_SCREEN [[UIScreen mainScreen] bounds].size.height >= 568.0f && [[UIScreen mainScreen] bounds].size.height < 1024.0f
#define IS_IPHONE_4_SCREEN [[UIScreen mainScreen] bounds].size.height >= 480.0f && [[UIScreen mainScreen] bounds].size.height < 568.0f

if(IS_IPHONE_5_SCREEN)
{
    if(IS_IPHONE)
        NSLog(@"Hey, this is an iPhone 5 screen!");
    else if(IS_IPOD)
        NSLog(@"Hey, this is an iPod 5 screen!");
    else
        NSLog(@"Hey, this is a simulator screen with iPhone 5 screen height!");
}
else if(IS_IPHONE_4_SCREEN)
{
    if(IS_IPHONE)
        NSLog(@"Hey, this is a lower iPhone screen than 5!");
    else if(IS_IPOD)
        NSLog(@"Hey, this is a lower iPod screen than 5!");
    else
        NSLog(@"Hey, this is a lower simulator screen than 5!");
}
else if(IS_IPAD){
    NSLog(@"Hey, this is an iPad screen!");
}
else{
    NSLog(@"Hey, this is an ipad simulator screen!");
} 
```

干杯!

# php - 在 foreach 循环中使用 mysql 更新字符串的最佳方法

> ID：14042123
> 
> 赞同：0
> 
> 时间：2012-12-26T14:42:49.983
> 
> 标签：php, mysql, foreach

提交表单时，我必须更新两个不同的表。

第一个是包含每个发布日期的所有酒店信息的字符串

```
$index = 0;
$insert ="";

foreach($_POST['day'] as $index => $day) {

    $day = $day; 
    $name = $_POST['name'][$index];
    $sgl = $_POST['sgl'][$index];
    $dbl = $_POST['dbl'][$index];
    $nights = $_POST['nights'][$index];
    $status = $_POST['status'][$index];
    $ref = $_POST['ref'][$index];
    $breakfast = $_POST['breakfast'][$index];
    $meal = $_POST['meal'][$index];

    $insert .= "$day|$name|$sgl|$dbl|$nights|$status|$ref|$breakfast|$meal;";       

}

$data['details_accommodation'] = $insert; 
```

此代码可以正常更新第一个表。

然后我需要隔离每个 $day（mysql 日期）并使用 $day 与相应日期匹配的相同字符串更新第二年表。我被困住了。希望我对 mu 问题足够清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:52:58.237

尝试在两个表中插入 UNIX 时间戳，而不是插入 DAY。希望这可以解决您的问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T15:01:27.403

我更愿意使用数组和 implode 函数来连接值，而不是字符串连接。它为这些值提供了更大的灵活性，并且没有在最终循环中设置尾随连接值。

我的建议：将您的数据收集到由“$index”索引的多个数组中，例如：$refs[$index] = $value

然后使用 implode 函数来做你的连接值： $string = implode(',', $refs);

这将简化数据数组供您操作和保存。希望这可以帮助！

# android - 在 android maps version2 中获取地图右上角的 lat 和 long 值的零值

> ID：14042124
> 
> 赞同：0
> 
> 时间：2012-12-26T14:42:53.230
> 
> 标签：android

> 创建活动时如何在andorid maps api v2中获取地图右上角的经度和经度值。我写了代码，但有些如何得到零。

```
public class MainActivity extends android.support.v4.app.FragmentActivity
        implements OnClickListener {

  private GoogleMap mapView;

  @Override 
  public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();

    mapView.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(34.59,
                -113.236), 7));

    //** getting null values on the following line **
    LatLng values = mapView.getProjection().getVisibleRegion(); 
```

# algorithm - 逆波特词干算法

> ID：14042127
> 
> 赞同：3
> 
> 时间：2012-12-26T14:43:20.480
> 
> 标签：algorithm

通过波特算法，这个词的词干：

*   `computer`

*   `compute`,

*   `computation`

    是`comput`。

我想知道是否存在执行波特算法相反的算法。也就是说，给定一个词干`comput`，如何找到所有带词干的词`comput`？

# html - div中的垂直对齐下拉菜单

> ID：14042128
> 
> 赞同：5
> 
> 时间：2012-12-26T14:43:23.563
> 
> 标签：html, drop-down-menu, vertical-alignment

如何在已知宽度和高度的 div 中放置已知宽度的下拉列表？垂直对齐对我没有帮助。

```
 <div id="wrapper">
       <select id="dropdown" ></select>
    </div>

    #wrapper{
       border-style:solid;
       height:100px;
       width:200px;
     }

    #dropdown {      
      vertical-align:middle;
      width:80px;
    } 
```

这是[jsFiddle](http://jsfiddle.net/xxSPW/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:05:17.990

```
#wrapper {
    border-style:solid;
    height:100px;
    width:200px;
    display:table-cell;
    vertical-align:middle;
}
#dropdown { 
   width:80px;
} 
```

# javascript - Javascript Charting Package 能够生成显示的图表

> ID：14042129
> 
> 赞同：0
> 
> 时间：2012-12-26T14:43:24.867
> 
> 标签：javascript, charts

![箱形图](../Images/91a5e16e95c544949fec6d48b99692e8.png)

是否有 Javascript 图表包可以让我创建显示的图表？

*   带中位数的箱线图（红色）
*   正常人口范围（绿色）
*   被测值（红色菱形）

为了把它放在上下文中，这些是给定条件的标记测量。绿色框表示没有条件的人群（正常/参考人群）的读数范围。箱线图代表有条件的人的读数（真阳性）。红色菱形代表正在接受该条件测试的人的读数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:47:09.323

您可以尝试[http://g.raphaeljs.com/](http://g.raphaeljs.com/)，它是 javacript 图表功能的优秀库。

# web-applications - 如果我使用struts2，Jboss如何处理http请求

> ID：14042136
> 
> 赞同：2
> 
> 时间：2012-12-26T14:43:45.577
> 
> 标签：web-applications, struts2, jboss

我对 Jboss 等 Web 容器如何处理 http 请求很感兴趣，假设 JBoss 中有很多`war`，Jboss 如何知道请求应该传递给其中一个？如果我曾经使用过，我想这样做`struts2`。reqeust 最终是如何传递给`Action`struts2 的？任何人都可以帮我弄清楚吗？谢谢。

**更新**

假设您在 A.War 和 B.War 中都有相同的 servlet 映射，如下所示。但它们是不同的实现类`HttpServlet`

```
 <servlet-mapping>
        <servlet-name>DeployServlet</servlet-name>
        <url-pattern>/deploy/*</url-pattern>
    </servlet-mapping> 
```

如果 url 是，JBoss http 请求处理顺序会`/deploy/test`怎样？

**更新**

**总结一下**，当web容器接收到对某个资源的Http请求（*.html *.jsp等）时，web容器会根据上下文xml（如`server.xml`中`tomcat`）选择一个war应用来处理这个请求。然后，这个war应用程序将首先选择Web.xml中定义的一个servlet来处理请求......

好吧，我的问题： `Filter`执行 Http Request 早于`Servlet`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:09:58.380

servlet 映射将与应用程序上下文相关。如果您部署 2 场战争，他们将有 2 个不同的上下文。如果他们不这样做，您将收到部署错误。您可以将战争设置为上下文根，因此假设您将 2 场战争 warA.war 和 warB.war 部署到您的服务器[http://my_server.com](http://my_server.com)

要在任一战争中访问资源，您将使用：

[http://my_server.com/warA/somePage](http://my_server.com/warA/somePage)

或者

[http://my_server.com/warB/somePage](http://my_server.com/warB/somePage)

使用您描述的映射看起来像[http://my_server.com/warA/deploy/](http://my_server.com/warA/deploy/)

如果您将任一 war 设置为上下文根，您可以以[http://my_server.com/deploy/](http://my_server.com/deploy/)访问资源，但服务器仍在将其从 /deploy 转换为 warA/deploy

因此，对于检索哪个 servlet 不会有任何混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T06:21:36.170

首先，Web 服务器接收到 http 请求。通常 Servlet 容器（如 tomcat）和应用服务器（如 JBoss）有一个内置的 Web 服务器。所以 Web 服务器或也称为 http 服务器获取请求并决定它是否可以处理它。

**Web 服务器可以处理静态内容请求，如 html、图像等。**如果请求是动态内容，那么它将请求传递给 Servlet 容器。

Servlet 容器是 Java EE 服务器（如 Tomcat 和 JBoss AS）的一部分。Servlet 容器具有部署描述符（.xml 文件），通过它可以了解所有已部署的应用程序。当容器启动时，这些配置文件会被加载（并转换为对象）。因此，使用部署描述符映射它决定请求是否有效，如果有效，则将请求发送到适当的资源（如 servlet ）。

有关详细信息，您可以阅读 Servlet 的生命周期以及容器的工作原理。

# c# - 来自 c# 的 iPhone 推送通知

> ID：14042138
> 
> 赞同：1
> 
> 时间：2012-12-26T14:43:46.600
> 
> 标签：c#, asp.net, objective-c, xcode

我们一直在使用苹果推送通知服务，我们可以从 gateway.sandbox.push.apple.com 发送推送消息，据我所知这个地址是测试，所以我们必须使用真实地址 gateway.push.apple.com，我们可以不从该地址发送推送消息。你可以帮我们吗？

我们的代码是；

```
public void pushMessage(string deviceID, string Mesaj)
{
    int port = 2195;
    String hostname = "gateway.sandbox.push.apple.com";     // TEST
    //String hostname = "gateway.push.apple.com";           // REAL

    //        @"cert.p12";
    String certificatePath = HttpContext.Current.Server.MapPath("cert.p12");
    //X509Certificate2 clientCertificate = new X509Certificate2(certificatePath, "");

    X509Certificate2 clientCertificate = new X509Certificate2(System.IO.File.ReadAllBytes(certificatePath), "", X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable);

    X509Certificate2Collection certificatesCollection = new X509Certificate2Collection(clientCertificate);
    TcpClient client = new TcpClient(hostname, port);
    SslStream sslStream = new SslStream(client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);
    try
    {
        sslStream.AuthenticateAsClient(hostname, certificatesCollection, SslProtocols.Tls, true);
    }
    catch (Exception e)
    {
        throw (e);
        client.Close();
        return;
    }
    MemoryStream memoryStream = new MemoryStream();
    BinaryWriter writer = new BinaryWriter(memoryStream);
    writer.Write((byte)0);  //The command
    writer.Write((byte)0);  //The first byte of the deviceId length (big-endian first byte)
    writer.Write((byte)32); //The deviceId length (big-endian second byte)

    writer.Write(HexStringToByteArray(deviceID.ToUpper()));
    String payload = "{\"aps\":{\"alert\":\"" + Mesaj + "\",\"badge\":0,\"sound\":\"default\"}}";
    writer.Write((byte)0);
    writer.Write((byte)payload.Length);
    byte[] b1 = System.Text.Encoding.UTF8.GetBytes(payload);
    writer.Write(b1);
    writer.Flush();
    byte[] array = memoryStream.ToArray();
    sslStream.Write(array);
    sslStream.Flush();
    client.Close();
} 
```

* * *

你可以看问题的视频

[视频链接](http://youtu.be/zVt_g7Q1wV8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:09:20.730

听起来您可能会很好地向 Apple 发送信息。此问题可能是您的 iOS 版本未使用生产推送通知服务器。

确保您的构建是 Ad Hoc 或 Distribution 而不是 Development。

[创建和下载分发配置文件](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)

# html - 如何正确增强 Qt HTML5 应用程序？

> ID：14042139
> 
> 赞同：1
> 
> 时间：2012-12-26T14:43:52.177
> 
> 标签：html, qt, qwebview

在 Qt Creator 中，我看到“HTML5 应用程序”向导。它创建一个带有“html5applicationviewer”子项目的项目，该子项目加载 HTML 并注入名为“Qt”的对象，只有公共插槽“quit”（在演示代码中使用）。

如果我将 html5applicationviewer 更改为除了“Qt”之外还注入我的对象，Qt Creator 建议“升级”html5applicationviewer；并且`This file was generated ... It is recommended not to modify this file`在 html5applicationviewer 的文件中有注释。

如何在 Qt HTML5 应用程序的 HTML 部分正确添加更多 Qt C++ 内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:29:16.853

据我所知，有两种方法可以扩展您的 Qt HTML5 应用程序。第一个确实是通过注入你的 QObjects 使它们在 JavaScript 中可见。您这样做是为了响应`javaScriptWindowObjectCleared()`网页视图页面主框架发出的信号。

第二种方法是为网页视图页面提供自定义插件工厂（参见`QWebPage::setPluginFactory()`方法）。`<object>`这种方式允许您直接在 HTML 代码中（使用标签）创建 Qt 对象（例如小部件）实例。

# python - 我应该使用什么 WSGI 版本从头开始构建 python 框架？

> ID：14042140
> 
> 赞同：0
> 
> 时间：2012-12-26T14:43:52.800
> 
> 标签：python, python-3.x, python-2.7, mod-wsgi, wsgi

我即将从头开始构建一个 python 框架......所以，我对 WSGI/Python 版本感到困惑（WSGI 1.0 用于 python 2.x，WSGI 1.0.1 用于 python 3.x）。我应该从哪个版本开始？请注意，我将/可能使用一些现有的中间件或一些现有的代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:42:29.770

WSGI PEP 3333 仍然适用于 Python 2，如果您写入 PEP 3333，它仍然是适用于 Python 2 的有效 PEP 333 WSGI 应用程序。

简短的回答是使用 Python 2 并使用一个对您隐藏 WSGI 内容的框架。当您对 WSGI 一无所知时，不要从头开始构建一个，因为首先需要提出这个问题。

去看看 Flask/Werkzeug。

一旦你了解了 Flask 和底层 Werkzeug 的工作原理以及 WSGI 的一般工作原理，然后毕业并尝试编写自己的。

# sql - 将 CASE 语句设置为变量，然后在 GROUP BY 子句中使用该变量

> ID：14042144
> 
> 赞同：1
> 
> 时间：2012-12-26T14:44:22.670
> 
> 标签：sql, sql-server, variables

我正在使用 SQL Server 2008 并且有一个非常大的 CASE 语句，该语句也用于 GROUP By 子句。我想将 CASE 语句设置为变量，以最大限度地减少代码维护并最大限度地重用。问题是我收到此错误：

```
Each GROUP BY expression must contain at least one column that is not an outer reference. 
```

此 CASED 列不是 GROUP By 子句中引用的唯一列，因此我不确定为什么会出现此错误。

我已经搜索了该站点，但没有发现像我的问题（令人惊讶）。那么，我该如何解决这个问题？

更新：我已经包含了 DB 类型。至于添加我所拥有的代码，我不确定它会添加任何内容，因为它超过 200 行。这根本不是一个复杂的陈述。它只需要各种国家代码并将它们映射到它们的完整国家名称。例如，美国有 50 多个代码，所以我使用 CASE 语句来合并它们。这使我可以按国家/地区对我的信息进行分组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:50:04.507

最好的方法是使用子查询：

```
select var, count(*)
from (select t.*,
             (case <nasty expressions go here>
              end) var
      from t
     ) t
group by var 
```

您得到的错误是因为 中的变量`group by`是一个常量。我不确定为什么错误消息不清晰。

而且，如果您出于某种原因确实想要在其中包含一个常量`group by`（正如我有机会做的那样），那么一列会有所帮助：

```
group by (case when coalesce(col, '') = coalesce(col, '') then 'some constant' end) 
```

至少在 SQL Server 2008 中，引擎不会将表达式识别为常量。

# sql-server-2005 - 如何从 Visual C++ 连接到 SQL Server 2005

> ID：14042147
> 
> 赞同：0
> 
> 时间：2012-12-26T14:44:24.337
> 
> 标签：sql-server-2005, visual-c++, authentication

谁能帮助了解如何从 Visual C++ 连接到 SQL Server 2005？

我正在使用 Visual C++ 开发 ISAPI dll，我需要查询数据库以获取一些详细信息。我尝试使用`CDatabase`. 当我从本地系统调用 dll 时，它可以正常工作。但是当我从远程系统访问 dll 时，它会抛出`Login failed for user NT AUTHORITY/ANONYMOUS LOGON`.

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:06:31.767

这篇[从 Web 应用程序访问 SQL Server](http://msdn.microsoft.com/en-us/library/ht43wsex%28v=vs.100%29.aspx)文章为您提供了可用于 SQL Server 身份验证的选项列表。选择 SQL Server 身份验证方法后，您可以[更改 ISAPI Extensions 的标识](http://msdn.microsoft.com/en-us/library/ms525338%28v=VS.90%29.aspx)以满足 SQL Server 的需求。

# batch-file - 根据批处理文件中的其他文件运行批处理文件

> ID：14042148
> 
> 赞同：0
> 
> 时间：2012-12-26T14:44:25.003
> 
> 标签：batch-file

我正在编写一个批处理文件，它应该（除其他外）调用另一个批处理文件。第二个批处理文件取决于位于同一目录中的文件，因此，当我尝试从第一个批处理文件运行它时，它失败了。

例子：

批处理文件 #1: (位于 C:)

```
@echo  OFF
call C:\Tests\Tests.bat 
```

输出：“找不到 C:\Tests\Tests.txt

原因：Tests.bat 和 Tests.txt 都位于：C:\Tests 下，而我从 C: 调用它。

有任何想法吗？

非常感谢，伊丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:55:45.430

您可以`%-dp0`在批处理文件中使用来获取当前正在执行的批处理文件的路径。每次需要从该目录访问文件时，都可以使用该路径。例如：

```
call "%~dp0\Tests.bat"
for /f "usebackq ..." ... in ("%~dp0\someFile") do ... 
```

另一种选择是使用 PUSHD 将当前目录临时设置为批处理脚本顶部的相同路径。从那时起，您不必担心提供其他命令的路径。只要确保在脚本退出之前使用 POPD。这样脚本就不会影响任何可能调用它的脚本。

```
pushd "%~dp0"
rem Do you work
popd 
```

# joomla - 仅在特色页面中显示文章

> ID：14042151
> 
> 赞同：2
> 
> 时间：2012-12-26T14:44:37.453
> 
> 标签：joomla, joomla2.5, acl

```
http://example.com/products/2-uncategorised/
http://example.com/products/2-uncategorised/2-aaa-bb-ccccc 
```

我有这种结构，其中产品是带有文章的特色页面。我想要的只是阻止对类别和相关文章的访问。

所以，`http://example.com/products/2-uncategorised/`或者`http://example.com/products/2-uncategorised/2-aaa-bb-ccccc`应该重定向到`http://example.com/products`.

我知道的唯一方法是：

```
#RedirectMatch 301 ^/products/.*$ http://www.example.com/products 
```

注意：如果我更改文章的权限，仅对注册用户可用，如果用户未注册，则文章将从精选页面中删除（*错误，此页面应该是**公共的***）。

我需要保留特色页面中的所有文章，并阻止单个文章及其所属类别的访问。

问题：还有另一种方法没有`.htaccess`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T10:15:43.300

同一篇文章有​​多个路径有什么问题？

您是否担心用户体验或对您的 SEO 的影响？如果是后者，那么您可以对此有所控制。使用“规范”标签，您可以规定哪个是 Google 等索引的主 URL。

您还可以为每个类别或菜单项操作机器人设置。

如果是前者，我当然不建议在 htaccess 中进行重定向。如果您绝对必须重定向，请使用 Joomla 附带的重定向组件。仍然不建议这样做。

你为什么不取消特色页面，只使用带有自己隐藏菜单项的文章。这将提供直接访问，没有类别视图。如果你想在博客风格的底部添加其他文章，你可以将文章添加到模块中并获得类似的效果？

# macos - cocos2d-x 有 OS X 的模板吗

> ID：14042154
> 
> 赞同：0
> 
> 时间：2012-12-26T14:44:39.817
> 
> 标签：macos, cocos2d-x

我运行 install-templates-xcode.sh 来安装模板，但我只能选择从 iOS 模板创建新项目。
cocos2d-x 有 OS X 的模板吗？
或者我做了一些错误的步骤...

xcode version: 4.5.1(4G1004)
cocos2d-2.0-x-2.0.4

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:53:49.500

不，cocos2d-x 不支持 Mac OS X 作为目标平台。如果您想创建 Mac OS X 应用程序，请改用 cocos2d-iphone。

# c# - 从内存进程中抓取文件

> ID：14042156
> 
> 赞同：3
> 
> 时间：2012-12-26T14:45:00.493
> 
> 标签：c#, memory

c#中是否有可能通过其他进程将文件加载到内存中？例如图像文件或 txt 文件。我有一个应用程序将一些文件加载​​到内存中。我需要将它转储到磁盘。我想这很难，可以让我以正确的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:15:28.920

这在技术上并非不可能。假设您有足够的权限，您可以使用 ReadProcessMemory() winapi 函数查看另一个进程的内存。需要 Pinvoke。

然而，你会遇到的问题是你会发现你正试图在大海捞针。*除非您对该过程有很多*了解，否则您将不知道要开始读取什么虚拟内存。你从一个很酷的 20 亿个可能的选择开始，你可能会减少到一百万左右。加入一些复杂的东西，比如随机移动东西的垃圾收集器。

使用 SysInternals 的 VMMap 实用程序深入了解另一个进程的虚拟内存。

# php - Joomla 的 Hathor 模板分页不适用于自定义后端组件

> ID：14042157
> 
> 赞同：2
> 
> 时间：2012-12-26T14:45:09.213
> 
> 标签：php, joomla, joomla2.5

编写了一个自定义后端组件，运行良好。仅允许一部分用户访问它，因此我从 Hathor 创建了一个修改过的模板，以消除我无法使用权​​限的所有内容。

发现分页不仅仅适用于 Hathor。我用 Bluestork 试了一下，效果很好。我还使用 Hathor（原始和未修改）和 Bluestork 测试了文章分页，并且都有效。也没有看到任何错误弹出。

什么可能导致我的组件中的分页无法与 Hathor 一起使用？

这是我用于分页的代码：

**模型：**

```
...other query stuff...
//Column ordering
    $orderCol = $this->getState('list.ordering');  //Ordering
    $orderDirn = $this->getState('list.direction'); //Direction

    if ($orderCol != '') {
        $query->order($db->getEscaped($orderCol.' '.$orderDirn));
    } //end column ordering

    return $query;
} 
```

**视图.html.php**

```
public function display($tpl = null)
{
    $this->items = $this->get('Items');
    $this->pagination = $this->get('Pagination'); //getting this automatically and being assigned to the view
    $this->state = $this->get('State');  //for published state drop down 
```

**默认.php：**

```
<input type="hidden" name="filter_order" value"<?php echo $listOrder; ?>" /> <!-- for sorting -->
<input type="hidden" name="filter_order_Dir" value"<?php echo $listDirn; ?>" /> <!-- for list direction --> 
```

有人对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:14:27.313

这可能发生在与表单“adminform”的冲突中，您有两个或没有，并且您的默认 Joomla 导航不起作用（上面的某些按钮也不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:50:23.077

我最后比较了 Chrome 中的一些管理模板输出，发现有大量代码没有被拉入。它似乎与模式窗口有关，所以我在模板的 include 标题行下添加了这个：

`<?php JHtml::_('behavior.modal'); ?>`

我猜分页使用相同的 js 文件。不知道为什么它没有拉进来，也许是因为我限制了对太多后端的访问，它认为它没有被使用？

无论如何 - 固定！

# html - CSS button:active 有时会使按钮不起作用

> ID：14042160
> 
> 赞同：1
> 
> 时间：2012-12-26T14:45:29.477
> 
> 标签：html, css, button

每当我在 CSS 中使用它时（这对我来说很重要）：

```
.button:active {
    position: relative;
    top: 2px;
    left:2px;
} 
```

按钮不想在特定区域起作用，具体取决于您单击它们的位置。（位置确实发生了，但 jQuery 没有启动）这里是[DEMO](http://jsfiddle.net/mMF5r/3/)

您会看到有时他们不会做出反应，这取决于您是否打对了位置。它有点难以注意到，因为它发生了。例如，尝试点击字母 A 下方的联系按钮。或者点击 O 字母下方的 About 按钮。

当我删除 :active 功能按钮工作正常。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:44:15.947

我将所有按钮的高度更改为 100%，它消除了浏览器上的问题。我正在使用 Chrome。这就是我所做的。

```
#btnhome {
margin-left: 121px;
width: 84px;
**height: 100%;**
background-color: black;
border: none;
color: white;
font-size: 14px;
font-weight: 700;
} 
```

# sass - 如何将 $rotate3d 与 create-transform 一起使用？

> ID：14042161
> 
> 赞同：1
> 
> 时间：2012-12-26T14:45:39.633
> 
> 标签：sass, compass-sass

我正在尝试在块`$rotate3d`内使用`create-transform`（以及 scale-x），但我尝试的任何方法都没有正常工作。如果我这样做`rotate3d`，它会很好地工作：

`@include rotate3d(1, 0, 0, 3deg, 800);`

但我需要将其与规模和透视相结合，因此创建变换是我唯一的选择。

`$rotate3d`这是让我感到困惑的多重论点。我试过了，但没有用：

```
@include create-transform(
    $rotate3d: "1, 0, 0, 30deg, 800"
); 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:18:48.190

mixin 的参数由逗号分隔，因此 Sass 认为您正在尝试向`$rotate3d`参数发送单个值。您实际上想要做的是发送一个逗号分隔的列表作为单个参数的值。这可以通过在列表周围添加括号来完成：

```
@include create-transform($rotate3d: (1, 0, 0, 30deg, 800)); 
```

# php - Codeigniter Flashdata 过早消失

> ID：14042164
> 
> 赞同：1
> 
> 时间：2012-12-26T14:45:58.980
> 
> 标签：php, codeigniter, codeigniter-2

我会尽量缩短。当我像这样设置闪存数据时

```
$this->session->set_flashdata('testing', $somevariable); 
```

我应该在会话中得到这样的东西：

```
'flash:new:testing' => string 'Test' 
```

这有效。当我发出新的服务器请求时，它应该说

```
'flash:old:testing' => string 'Test' 
```

我不明白这部分。即使在第一次请求时（虽然它仍然是“新的”），我`boolean (false)`在尝试获取 flashdata 时也会得到。我应该提到这是在 wamp 中工作，但不是在我的实时站点上。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:06:32.703

好像很奇怪！也许您应该在您的实时站点中检查**var_dump($somevariable)的值。**

# wpf - 使用 DispatcherTimer 在 C# 中手动在 WPF 中制作平滑效果

> ID：14042167
> 
> 赞同：-11
> 
> 时间：2012-12-26T14:46:14.113
> 
> 标签：wpf, silverlight, effects, dispatcher, smooth

我试图通过不使用 Storyboard 或 WPF 中其他准备好的/已经完成的东西来取得很好的效果。

我想制作平滑的效果，在某些事件（如点击）上，UI 元素会调整大小 2-3 秒并随着颜色的变化而模糊。我想以流畅漂亮的方式制作所有这些物品。

我准备了这样的类来渲染我的效果的每一帧：

```
public static class ApplicationHelper
{
        [SecurityPermissionAttribute(SecurityAction.Demand,
        Flags=SecurityPermissionFlag.UnmanagedCode)]
        public static void DoEvents(DispatcherPriority priority)
        {
            DispatcherFrame frame = new DispatcherFrame();
            DispatcherOperation oper = Dispatcher.CurrentDispatcher.
                            BeginInvoke(priority,
                            new DispatcherOperationCallback(ExitFrameOperation),
                            frame);

            Dispatcher.PushFrame(frame);
            if (oper.Status != DispatcherOperationStatus.Completed)
            {
                oper.Abort();
            }
        }

        private static object ExitFrameOperation(object obj)
        {
            ((DispatcherFrame)obj).Continue = false;
            return null;
        }

        [SecurityPermissionAttribute(SecurityAction.Demand,
        Flags=SecurityPermissionFlag.UnmanagedCode)]
        public static void DoEvents()
        {
            DoEvents(DispatcherPriority.Background);
        }
} 
```

在这里，我试图让它与 DispatcherTimer 一起工作：

```
 void vb1_click(object sender, System.Windows.Input.MouseButtonEventArgs e)
   {
       DispatcherTimer dt = new DispatcherTimer();
       dt.Interval = new TimeSpan(0, 0, 0, 0, 500);
       dt.Tick += new System.EventHandler(dt_Tick);
       dt.Start();
   }

   void dt_Tick(object sender, System.EventArgs e)
   {
       for(int i = 0; i < 20; i++)
       {
           this.vb2_blur_eff.Radius = (double)i;
           ApplicationHelper.DoEvents();     
       }
   } 
```

主要问题是，当我启动它时，我只是在等待，并且在最后时间（必须渲染最后一帧的时间），我在所有帧中都以非常快的速度获得，但以前什么都没有。

如何在不使用一些现成/完成的东西的情况下以纯 C# 方式解决它并制作完美的平滑效果？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:03:26.217

`ApplicationHelper.DoEvents()`in`dt_Tick`可能什么都不做，因为没有要处理的事件。至少不是你可能期待的那些。

如果我没记错的话，您的代码将快速`Radius`将 所有这些都将每 500 毫秒发生一次（即在每个上）。`0``1``2``19``Tick`

我想你可能会相信每个`Tick`只会设置`Radius`一个值然后等待下一个`Tick`，但事实并非如此。Every`Tick`将 设置`Radius`为所有值，以 结尾`19`。这是您所经历的一种可能的解释。

I would also like to comment on the `DoEvents` approach. It's most likely a bad idea. Whenever I see a `DoEvents` I get chills up my spine. (It reminds me of some seriously bad Visual Basic 5/6 code I stumbled across 10-15 years ago.) As I see it, an event handler should return control of the GUI thread as quickly as possible. If the operation takes a not insignificant amount of time, then you should delegate that work to a worker thread. And nowadays, you have plenty of options for writing asynchronous code.

# jquery - 如何确定在 jquery 中滚动的像素数？

> ID：14042170
> 
> 赞同：1
> 
> 时间：2012-12-26T14:46:19.313
> 
> 标签：jquery, scroll, window

我想获得`px`在 jQuery 中滚动时的值。

例如，在页面中间，我向下滚动一点。`px`在这里，我想知道我滚动了多少。（3像素，5像素，...，10像素，11像素？）

**无论滚动条的位置如何。**

如果我的滚动条距离顶部 300 像素。我滚动了 10 像素。所以我的滚动条现在是 310px。如何获得我滚动的值（这里：10px？）

是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:59:15.343

这是一个工作示例代码：

```
var startScroll,
    toHandler,
    endScroll;

$(window).on("scroll",function(){
    if (!startScroll) {
        startScroll = $(window).scrollTop();
        console.log("Started:" + startScroll);
    } else {
        if (toHandler) {
            clearTimeout(toHandler)
        }
        toHandler = setTimeout(function(){
            endScroll = $(window).scrollTop();
            console.log("Ended :"+endScroll);
            console.log("Scrolled "+(endScroll-startScroll));
            startScroll = 0;
        },200)
    }
});​ 
```

[http://jsfiddle.net/Touki/jXwAG/](http://jsfiddle.net/Touki/jXwAG/)

需要超时以防止滚动事件多次触发并获得不正确的值。

此示例将打印 200 毫秒后它移动了多少像素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:48:42.220

```
$(window).on('scroll', function() {
    var distanceScrolled = $(window).scrollTop();
}); 
```

**编辑：**

使用计时器（绝不准确）：

```
var timer, lastScrolled = 0;

$(window).on('scroll', function() {
    clearTimeout(timer);
    timer = setTimeout(function() {
        $('#test').text('you scrolled '+($(window).scrollTop() - lastScrolled)+' pixels')
        lastScrolled = $(window).scrollTop();
    },400);
});​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/VR5Vz/1/)

# facebook - 用于 Facebook 登录的 Jmeter Oauth 插件

> ID：14042171
> 
> 赞同：-2
> 
> 时间：2012-12-26T14:46:23.800
> 
> 标签：facebook, jmeter

> **可能重复：**
> [使用 Jmeter 登录 Facebook](https://stackoverflow.com/questions/14041488/facebook-login-using-jmeter)

我正在尝试使用 Jmeter 中的[Oauth 插件](http://code.google.com/p/oauth/downloads/list)登录 facebook。我在Oauth request Sampler 中使用Facebook 的Api Key 作为Consumer key 和Api Secret 作为Consumer Secret。但我无法从中检索 Oauth 令牌和 Oauth Secret。

我使用的服务器名称：**facebook.com**和路径：**dialog/permission.request**

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:25:07.577

我们正在尝试将 jmeter 用于使用 fb 登录的应用程序。

我们试图获取从 Facebook 生成的代码值的两种方法

1）使用正则表达式提取器提取代码 - 我们尝试使用正则表达式提取器提取代码值，并使用代码作为参数从 fb 重定向到应用程序，以预测 jmeter 脚本响应标头中存在的代码值。我在 Firefox 上使用 firebug 比较了 Jmeter 脚本和浏览器之间的请求/响应，我可以看到浏览器的脚本中缺少一些信息，例如脚本响应标头中的 Location（具有代码值）。

2) 用于 Facebook 登录的 JMeter oauth 插件 - 我们不知道 jmeter 中的配置详细信息以访问 Facebook 登录。请参阅[http://code.google.com/p/oauth/downloads/list](http://code.google.com/p/oauth/downloads/list)上有关 oauth 的更多详细信息。

# jquery - jquery-自动完成插件搜索

> ID：14042172
> 
> 赞同：2
> 
> 时间：2012-12-26T14:46:24.643
> 
> 标签：jquery, jquery-plugins, autocomplete

有这个[jquery-autocomplete](https://github.com/dyve/jquery-autocomplete)插件，它允许您只搜索确切的字符串..

所以可以说这是数据..

```
 [
        ['apple is good'],
        ['apple grows on tree'],
        ['the tree and the apple'],
        ['red apple'],
        ['apple tree']
    ] 
```

现在搜索“apple”应该会显示所有内容。

但是当输入“apple tree”时，它只会返回“apple tree”。
我希望它返回智能结果（2,3 和 5）。

*   “苹果长在树上”
*   “树和苹果”
*   “苹果树”

这意味着：它应该重新评估每个单词的搜索（但从已经过滤的结果中过滤它）

这个插件允许您提供自己的搜索..

使我们能够智能搜索的精细搜索是什么样的？

它需要忽略空格并将搜索查询拆分为单词以逐个评估每个单词...

```
$("#textInputEle").autocomplete({
    url:"path/to/data.json",
    filter: function(result, filter) {
     //whats should this function be?
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:18:59.680

我相信 jquery 自动完成的开箱即用功能只会返回包含短语“苹果树”的结果。因此，它会从您的示例返回 #5，但对于诸如“他住在苹果树附近”和“苹果树是她院子里最大的”等短语，它也会返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:03:48.407

您可以使用该`filter`选项来提供您自己的过滤逻辑。

您提供的函数需要`result`和`filter`参数。该`filter`参数是用户搜索的内容。该`result`参数是建议列表中的一项。您的函数必须返回`true`（如果建议匹配），或者`false`（如果建议不匹配）。

做你想要完成的事情的逻辑可能看起来像这样：

1.  `result`将您通过空格 ( ) 传递的内容拆分`" "`为一组术语。
2.  从术语数组中的每个字符串创建一个正则表达式
3.  确保用户键入的内容与每个正则表达式匹配

看起来像这样：

```
$("#auto").autocomplete({
    data: [
        ['apple is good'],
        ['apple grows on tree'],
        ['the tree and the apple'],
        ['red apple'],
        ['apple tree']
        ],
    filter: function(result, filter) {
        var terms = filter.split(" "),
            match = true,
            i = 0,
            regex;

        for (; match && i < terms.length; i++) {
            regex = new RegExp(terms[i]);
            match = match && regex.test(result.value);
        }

        return match;
    }
}); 
```

**示例：http:** [//jsfiddle.net/ztkX2/1/](http://jsfiddle.net/ztkX2/1/)

# python - 使用 for 循环在 Python 中设置对象列表的属性

> ID：14042177
> 
> 赞同：0
> 
> 时间：2012-12-26T14:47:06.860
> 
> 标签：python, list, for-loop, tkinter, config

我编写了一个 Python 程序，我需要将一组 tkinter 小部件从启用切换到禁用，然后再返回。我可以这样...

```
deadparrotlabel.config(state=DISABLED)
sillywalkslabel.config(state=DISABLED)
vikingslabel.config(state=DISABLED)
dinsdalelabel.config(state=DISABLED)
antpoetrylabel.config(state=DISABLED)
lumberjacklabel.config(state=DISABLED)
nudgenudgelabel.config(state=DISABLED)
saynomorelabel.config(state=DISABLED)
crunchyfroglabel.config(state=DISABLED)
larksvomitlabel.config(state=DISABLED) 
```

但我觉得应该有一种更有效的方法，用一个 for 循环和一个列表或其他东西。我只是不知道如何让它工作，或者即使它可以完成。这是我尝试过的，但没有奏效：

```
labellist = ['deadparrotlabel', 'sillywalkslabel', 'vikingslabel', 'dinsdalelabel', 'antpoetrylabel', 'lumberjacklabel', 'nudgenudgelabel', 'saynomorelabel', 'crunchyfroglabel', 'larksvomitlabel']
for i in lablelist:
    i.config(state=DISABLED) 
```

Python 将 'i' 解释为字符串而不是对象的名称。我在尝试做不可能的事吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:48:41.070

您可以列出小部件本身：

```
widgets = [deadparrotlabel, sillywalkslabel, ... ]
for w in widgets:
    w.config(state=DISABLED) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:53:41.837

我认为内德的答案是正确的，但是，总的来说，如果你*真的*有一个字符串，而不是一个可以使用的对象，那么：

```
widgets = ['a', 'b', 'c']
for w in widgets:
    globals()[w].config(state=DISABLED) 
```

但是，如果您发现需要这样做，请务必小心——因为您的设计过程中很可能出现了问题......

另一方面-也许`locals()`会更好-但很难说...

# php - 如何在php中验证soap服务中的证书？

> ID：14042180
> 
> 赞同：2
> 
> 时间：2012-12-26T14:47:11.207
> 
> 标签：php, soap, certificate

我们正在使用以下代码向肥皂服务发送证书

```
$wsdl = "https://localhost/MyService/myservices.php?wsdl";
$local_cert = "C:\\SoapCerts\ClientKeyAndCer.pem";
$soapClient = new SoapClient($wsdl, array('local_cert' => $local_cert));
$theResponse = $soapClient->test(); 
```

但是没有参考来验证该证书是否在使用中。我只想知道如何验证服务代码中的正确证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:11:01.693

尝试将私钥和公钥放在同一个 PEM 文件中。在linux中是这样的：

```
# cat publicKey.pem privateKey.pem > key.pem 
```

因此，检查 PEM 文件的路径是否正确（转义斜杠）：

```
$local_cert = "C:\\SoapCerts\\ClientKeyAndCer.pem"; 
```

# android - 用户按下数字序列后如何发送电子邮件

> ID：14042186
> 
> 赞同：-2
> 
> 时间：2012-12-26T14:47:36.937
> 
> 标签：android, email, sequence

我是android世界的新手..

一旦用户输入了一些数字序列，我希望在我的应用程序中发送一封电子邮件。例如，如果用户输入“* 1234”和其他数字，那么他按下一个按钮。之后，该号码将直接使用电子邮件地址发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:26:28.550

不要介意 StackOverflow 上的仇恨者……这是一种超级简单的方法……`android:onClick`为所有按钮使用该属性，以便它们在布局 XML 中看起来像这样（除了不同的标签/文本):

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="checkSequence"
    android:tag="0"
    android:text="0"/> 
```

然后在你的定义这个方法和这些字段`Activity`：

```
private final String FIRST_DIGIT = "*";
private final String SECOND_DIGIT = "1";
private final String THIRD_DIGIT = "2";
private final String FOURTH_DIGIT = "3";
private int counter = 0;

public void checkSequence(View button){

    String input = button.getTag().toString();

    switch (counter){
        case 0:
            if (input.equals(FIRST_DIGIT)){
                counter++;
            }
            break;
        case 1:
            if (input.equals(SECOND_DIGIT)){
                counter++;
            }else{
                //reset the counter b/c they've screwed up the sequence
                counter = 0;
            }
            break;
        case 2:
            if (input.equals(THIRD_DIGIT)){
                counter++;
            }else{
                counter = 0;
            }
            break;
        case 3:
            if (input.equals(FOURTH_DIGIT)){
                //here you know that they've finished the sequence, so send the email
                sendEmail();
                counter = 0;
            }
            break;
    }
} 
```

然后搜索 StackOverflow/google 以了解如何使用 发送电子邮件`Intent`，您将能够编写该`sendEmail()`方法。

# java - 如何将存储在字节数组中的JPG数据转换为Java中的BGR数据

> ID：14042187
> 
> 赞同：1
> 
> 时间：2012-12-26T14:47:37.310
> 
> 标签：java, image, jpeg, bmp, javax.imageio

> **可能重复：**
> [使用java从图像中获取像素数据](https://stackoverflow.com/questions/1604319/getting-pixel-data-from-an-image-using-java)

我已经浏览网页很长一段时间了，但没有找到任何合适的答案，所以如果有人可以帮助我，我会很高兴:)

我有一个字节数组，其中填充了编码为 JPEG 的图像数据。现在我想知道如何将数据转换为图像的相应BGR数据并将其存储在字节数组中。

非常感谢您，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:17:07.927

你可以试试这个：

```
 ByteArrayInputStream input = new ByteArrayInputStream(byteArray);
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    BufferedImage image = ImageIO.read(input); 
    ImageIO.write(image, "bmp", output);  
    byte[] outputBytes = output.toByteArray(); 
```

# ios - 配置：错误：找不到工作的编译器，有关详细信息，请参阅 config.log

> ID：14042188
> 
> 赞同：0
> 
> 时间：2012-12-26T14:47:40.213
> 
> 标签：ios, cross-compiling

我正在尝试将 gmp 库移植到 ios。
我在脚本中设置了所有变量、编译器、库、SDK 的所有路径。
所有都是有效的和存在的。
所有的幸福都以

```
configure: error: could not find a working compiler, see config.log for details 
```

config.log 包含一个错误，即 `int main(){return 0;}' 未编译。该脚本适用于已准备好的几个库。那是因为 arm-apple 编译器吗？

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:40:25.790

如果有人需要回答这个问题：
据我所知，我通过使用 includedir 和 libdir 定义 host=arm-apple-darwin 和标志（ld 和 cc）来配置参数来处理这个错误。

# asp.net - 如何在不单击任何按钮的情况下使用 SignalR 定期保存页面？

> ID：14042191
> 
> 赞同：0
> 
> 时间：2012-12-26T14:47:50.907
> 
> 标签：asp.net, signalr

有人可以向我解释如何使用 SignalR 每分钟将 .aspx 页面保存到数据库吗？我看过很多示例，但没有遇到任何使用 SignalR 定期保存页面而不单击任何按钮的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:02:58.313

您可以创建一个 java-script 或 jquery 函数，将数据保存到您的数据库中。
将函数的间隔设置为 window.setInterval 。
您可以通过以下链接
[在 jQuery 中使用 setInterval 调用函数？](https://stackoverflow.com/questions/5484205/call-function-with-setinterval-in-jquery)

# netbeans - Netbeans IDE 有时会停止自动上传。如何启用它？

> ID：14042192
> 
> 赞同：1
> 
> 时间：2012-12-26T14:48:08.993
> 
> 标签：netbeans

有时与服务器的连接出现问题，自动上传功能就消失了。发生这种情况时，文件在编辑后无法自动上传。

如何重新启用自动上传？我知道的唯一方法是重新启动 netbeans IDE。有没有更好、更快的方法？

# jquery - 停止输入/书写后如何触发输入文本中的事件？

> ID：14042193
> 
> 赞同：88
> 
> 时间：2012-12-26T14:48:11.640
> 
> 标签：jquery, timeout, keypress, typeahead, debouncing

我想在我停止在输入文本框中输入（而不是在输入时）字符后触发一个事件。

我试过：

```
$('input#username').keypress(function() {
    var _this = $(this); // copy of this object for further usage

    setTimeout(function() {
        $.post('/ajax/fetch', {
            type: 'username',
            value: _this.val()
        }, function(data) {
            if(!data.success) {
                // continue working
            } else {
                // throw an error
            }
        }, 'json');
    }, 3000);
}); 
```

但是这个例子会为每个输入的字符产生一个超时，如果我输入 20 个字符，我会收到大约 20 个 AJAX 请求。

[在这个小提琴上](http://jsfiddle.net/xVBMW/1/)，我用一个简单的警报而不是 AJAX 演示了同样的问题。

**有没有解决方案，或者我只是为此使用了一种不好的方法？**

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-12-26T14:52:31.497

您必须使用 a `setTimeout`（就像您一样）但还要存储参考，以便您可以继续重置限制。就像是：

```
//
// $('#element').donetyping(callback[, timeout=1000])
// Fires callback when a user has finished typing. This is determined by the time elapsed
// since the last keystroke and timeout parameter or the blur event--whichever comes first.
//   @callback: function to be called when even triggers
//   @timeout:  (default=1000) timeout, in ms, to to wait before triggering event if not
//              caused by blur.
// Requires jQuery 1.7+
//
;(function($){
    $.fn.extend({
        donetyping: function(callback,timeout){
            timeout = timeout || 1e3; // 1 second default timeout
            var timeoutReference,
                doneTyping = function(el){
                    if (!timeoutReference) return;
                    timeoutReference = null;
                    callback.call(el);
                };
            return this.each(function(i,el){
                var $el = $(el);
                // Chrome Fix (Use keyup over keypress to detect backspace)
                // thank you @palerdot
                $el.is(':input') && $el.on('keyup keypress paste',function(e){
                    // This catches the backspace button in chrome, but also prevents
                    // the event from triggering too preemptively. Without this line,
                    // using tab/shift+tab will make the focused element fire the callback.
                    if (e.type=='keyup' && e.keyCode!=8) return;

                    // Check if timeout has been set. If it has, "reset" the clock and
                    // start over again.
                    if (timeoutReference) clearTimeout(timeoutReference);
                    timeoutReference = setTimeout(function(){
                        // if we made it here, our timeout has elapsed. Fire the
                        // callback
                        doneTyping(el);
                    }, timeout);
                }).on('blur',function(){
                    // If we can, fire the event since we're leaving the field
                    doneTyping(el);
                });
            });
        }
    });
})(jQuery);

$('#example').donetyping(function(){
  $('#example-output').text('Event last fired @ ' + (new Date().toUTCString()));
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<input type="text" id="example" />
<p id="example-output">Nothing yet</p>
```

这将在以下情况下执行：

1.  超时已过，或
2.  用户切换字段（`blur`事件）

（以先到者为准）

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-08-28T10:00:24.337

解决方案：

这是解决方案。在用户停止输入指定的时间后执行函数：

```
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
  clearTimeout (timer);
  timer = setTimeout(callback, ms);
 };
})(); 
```

用法

```
$('input').keyup(function() {
  delay(function(){
    alert('Hi, func called');
  }, 1000 );
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-06-11T17:06:18.690

您可以使用 underscore.js “去抖动”

```
$('input#username').keypress( _.debounce( function(){<your ajax call here>}, 500 ) ); 
```

这意味着您的函数调用将在按键 500 毫秒后执行。但是，如果您在 500 毫秒之前按下另一个键（触发另一个按键事件），之前的函数执行将被忽略（去抖动），新的函数将在新的 500 毫秒计时器后执行。

有关额外信息，使用 _.debounce(func,timer, **true** ) 意味着将执行第一个函数，并且所有其他具有后续 500 毫秒计时器的按键事件将被忽略。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-06T09:47:25.840

你需要去抖！

这是一个[jQuery 插件](https://github.com/cowboy/jquery-throttle-debounce)，这里是您需要了解的关于[debounce](http://unscriptable.com/2009/03/20/debouncing-javascript-methods/)的所有信息。如果您是从 Google 来到这里的，并且 Underscore 已进入您应用的 JSoup，那么它已经[在](http://underscorejs.org/#debounce)!

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-02-11T11:17:05.580

您应该分配`setTimeout`给一个变量并`clearTimeout`在按键时使用它来清除它。

```
var timer = '';

$('input#username').keypress(function() {
  clearTimeout(timer);
  timer = setTimeout(function() {
    //Your code here
  }, 3000); //Waits for 3 seconds after last keypress to execute the above lines of code
}); 
```

[小提琴](http://jsfiddle.net/asrmwuky)

希望这可以帮助。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-02-24T11:48:04.797

清洁溶液：

```
$.fn.donetyping = function(callback, delay){
  delay || (delay = 1000);
  var timeoutReference;
  var doneTyping = function(elt){
    if (!timeoutReference) return;
    timeoutReference = null;
    callback(elt);
  };

  this.each(function(){
    var self = $(this);
    self.on('keyup',function(){
      if(timeoutReference) clearTimeout(timeoutReference);
      timeoutReference = setTimeout(function(){
        doneTyping(self);
      }, delay);
    }).on('blur',function(){
      doneTyping(self);
    });
  });

  return this;
}; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-23T11:39:07.173

我制作了一些简单的[插件，可以做到这一点。](https://github.com/AdamPietrasiak/Bid)它需要的代码比建议的解决方案少得多，而且非常轻巧（~0,6kb）

首先，您创建`Bid`的对象比`bumped`任何时候都多。每个*碰撞*都会延迟下一个给定时间的触发*投标回调。*

```
var searchBid = new Bid(function(inputValue){
    //your action when user will stop writing for 200ms. 
    yourSpecialAction(inputValue);
}, 200); //we set delay time of every bump to 200ms 
```

当`Bid`对象准备好时，我们需要以`bump`某种方式对其进行处理。让我们将碰撞附加到`keyup` `event`.

```
$("input").keyup(function(){
    searchBid.bump( $(this).val() ); //parameters passed to bump will be accessable in Bid callback
}); 
```

* * *

**这里发生的是：**

每次用户按键时，出价都会在接下来的 200 毫秒内“延迟”（碰撞）。如果 200 毫秒后没有再次“碰撞”，回调将被触发。

此外，您还有 2 个附加功能可用于停止出价（例如，如果用户按下 esc 或单击外部输入）以及立即完成和触发回调（例如，当用户按下回车键时）：

```
searchBid.stop();
searchBid.finish(valueToPass); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-22T01:25:27.503

我一直在寻找一个简单的 HTML/JS 代码，但没有找到。然后，我使用`onkeyup="DelayedSubmission()"`.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br">
<head><title>Submit after typing finished</title>
<script language="javascript" type="text/javascript">
function DelayedSubmission() {
    var date = new Date();
    initial_time = date.getTime();
    if (typeof setInverval_Variable == 'undefined') {
            setInverval_Variable = setInterval(DelayedSubmission_Check, 50);
    } 
}
function DelayedSubmission_Check() {
    var date = new Date();
    check_time = date.getTime();
    var limit_ms=check_time-initial_time;
    if (limit_ms > 800) { //Change value in milliseconds
        alert("insert your function"); //Insert your function
        clearInterval(setInverval_Variable);
        delete setInverval_Variable;
    }
}

</script>
</head>
<body>

<input type="search" onkeyup="DelayedSubmission()" id="field_id" style="WIDTH: 100px; HEIGHT: 25px;" />

</body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-28T15:51:04.217

**当您只想重置时钟时，为什么要这样做？**

```
var clockResetIndex = 0 ;
// this is the input we are tracking
var tarGetInput = $('input#username');

tarGetInput.on( 'keyup keypress paste' , ()=>{
    // reset any privious clock:
    if (clockResetIndex !== 0) clearTimeout(clockResetIndex);

    // set a new clock ( timeout )
    clockResetIndex = setTimeout(() => {
        // your code goes here :
        console.log( new Date() , tarGetInput.val())
    }, 1000);
}); 
```

如果您正在使用 wordpress，那么您需要将所有这些代码包装在一个 jQuery 块中：

```
jQuery(document).ready(($) => {
    /**
     * @name 'navSearch' 
     * @version 1.0
     * Created on: 2018-08-28 17:59:31
     * GMT+0530 (India Standard Time)
     * @author : ...
     * @description ....
     */
        var clockResetIndex = 0 ;
        // this is the input we are tracking
        var tarGetInput = $('input#username');

        tarGetInput.on( 'keyup keypress paste' , ()=>{
            // reset any privious clock:
            if (clockResetIndex !== 0) clearTimeout(clockResetIndex);

            // set a new clock ( timeout )
            clockResetIndex = setTimeout(() => {
                // your code goes here :
                console.log( new Date() , tarGetInput.val())
            }, 1000);
        });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-04T10:23:18.710

## 我们可以使用 useDebouncedCallback 在 react 中执行这个任务。

导入 { useDebouncedCallback } from 'use-debounce'; - 如果未安装，请安装相同的 npm packge

```
const [searchText, setSearchText] = useState('');

const onSearchTextChange = value => {
    setSearchText(value);
  };

//call search api
  const [debouncedOnSearch] = useDebouncedCallback(searchIssues, 500);
  useEffect(() => {
    debouncedOnSearch(searchText);
  }, [searchText, debouncedOnSearch]); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-04T09:50:43.520

这就是我使用的 formControl。这个对我有用。

```
this.form.controls[`text`].valueChanges
  .pipe(debounceTime(500), distinctUntilChanged())
  .subscribe((finalText) => {
    yourMethod(finalText);
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-05T11:05:45.377

`<input>`在您的 html中使用属性 onkeyup="myFunction()" 。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-12-26T16:49:26.093

在我看来，当用户不专注于该输入时，他就会停止写作。为此，您有一个名为“blur”的函数，它可以执行以下[操作](http://fiddle.jshell.net/2z2dW/)

# c++ - 目标地址反转

> ID：14042196
> 
> 赞同：0
> 
> 时间：2012-12-26T14:48:33.077
> 
> 标签：c++

我习惯用 Python 编写代码。现在我正在尝试 C++。当我运行程序时，我看到目标地址（w/Wireshark）反转，即使我使用 htonl。在 Python 中，同样的程序运行良好。按照代码。在底部我打印了结果。我正在使用 Ubuntu 12.04LTS 和 g++ (Ubuntu/Linaro 4.6.3)。

```
//UdpClient.cpp
#include <iostream>
#include <string>
#include <sstream>
#include <sys/socket.h>
#include <sys/types.h>
#include <netdb.h>
#include <cstdlib>
#include <arpa/inet.h>
#include <typeinfo>
using namespace std;

int main(int argc, char* argv[])
{
    int s, p, rb,rs;
    int bytesend;
    char buf[1024];
    int len;
    char ent[16];
    char Porta[5];
    unsigned long EndServ;
    struct sockaddr_in UdpServer, UdpClient;
    int UdpServerLen = sizeof(UdpServer);
    //do text
    string msg("The quick brown fox jumps over the lazy dog\n");
    len = msg.copy(buf, msg.size(), 0);

    buf[len] = '\0';
    //do socket
    s = socket(AF_INET, SOCK_DGRAM, 0);
    if (s == -1){
        cout << "No socket done\n";
    }
    else {
        cout << "Socket done\n";
    }
    //populate UdpClient struct
    UdpClient.sin_family = AF_INET;
    UdpClient.sin_addr.s_addr = INADDR_ANY;
    UdpClient.sin_port = 0;
    //populate UdpServer struct
    UdpServer.sin_family = AF_INET;
    UdpServer.sin_addr.s_addr = inet_addr(argv[1]);
    //check if addres is correct
    cout << "ServerAddress: " << hex << UdpServer.sin_addr.s_addr << endl;
    UdpServer.sin_port = htons(atoi(argv[2]));
    //bind socket
    rb = bind(s, (struct sockaddr *)&UdpClient, sizeof(UdpClient));
    if (rb == 0){
        cout << "Bind OK!\n";
    }
    else {
        cout << "Bind NOK!!!\n";
        close(s);
        exit(1);
    }
    //send text to Server
    cout << "UdpServSiz: " << sizeof(UdpServer) << endl;
    rs = sendto(s, buf, 1024, 0, (struct sockaddr *)&UdpServer, sizeof(UdpServer));
    if (rs == -1){
        cout << "Message NOT sent!!!\n";
    }
    else {
        cout << "Message SENT!!!\n";
    }
    close(s);
    return 0;
}
/*
  edison@edison-AO532h:~/CmmPGMs$ ./UdpClient 127.0.0.1 6789
  Socket done
  ServerAddress: 100007f (using htonl or not!!)
  Bind OK!
  Message SENT!!!
  edison@edison-AO532h:~/CmmPGMs$ 
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:22:56.007

听起来你在 ARM (Linaro) 上？在这种情况下，处理器的字节序匹配网络顺序，所以 htonl 和 ntohl 基本上什么都不做。

# iphone - 在 scrollViewWillBeginDragging 中检测 UIScrollView 滚动的方向

> ID：14042203
> 
> 赞同：22
> 
> 时间：2012-12-26T14:49:05.557
> 
> 标签：iphone, ios, cocoa-touch

我做了足够的谷歌，并且在发布之前我确实在stackoverflow中检查了这样的帖子（[在UIScrollView中找到滚动的方向？ ）。](https://stackoverflow.com/questions/2543670/iphone-sdk-finding-the-direction-of-scrolling-in-uiscrollview)我在 iPhone 应用程序中有动态数量的照片，通过`UIScrollView`. 在任何时候，滚动视图中都只显示了 3 张照片。当我总共有 4 张照片时： 第一张照片：显示在偏移量 0.0 第二张照片：显示在偏移量 320.0 第三张照片：显示在偏移量 640.0

现在，当用户滚动到第四张照片时，滚动视图重置为 0.0 偏移量。如果用户试图滚动“超出”第 4 张照片，则滚动应该只在右侧停止（这样用户就不会滚动“超出”）。但目前，用户“能够”滚动到最后一张照片之外；但是，我以编程方式检测到这一点并重置偏移量。但它看起来并不整洁，因为用户会暂时看到黑色背景。我想检测到用户已经开始滚动“右”（记住，滚动“左”，即到“上一张”照片是可以的）`scrollViewWillBeginDragging`，这样我就可以停止向右滚动。

我尝试了什么：

1.  尝试使用`self.scrollView.panGestureRecognizer`'s `translationInView`不起作用，因为首先没有 `panGestureRecognizer`返回实例（！），尽管 UIScrollView API 声称如此。
2.  检测到这一点`scrollViewDidEndDecelerating`是可能的，尽管它不符合我的目的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-16T19:44:37.923

`scrollViewWillBeginDragging`检查滚动视图时确定方向没有问题`panGestureRecognizer`：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{ 
    CGPoint translation = [scrollView.panGestureRecognizer translationInView:scrollView.superview];

    if(translation.y > 0)
    {
        // react to dragging down
    } else
    {
        // react to dragging up
    }
} 
```

我发现当用户向禁止方向拖动时，在第一次拖动时取消滚动非常有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-02-28T09:27:50.510

**斯威夫特 3 解决方案**

1-添加 UIScrollViewDelegate

2-添加此代码

```
func scrollViewWillBeginDecelerating(_ scrollView: UIScrollView) {
    let actualPosition = scrollView.panGestureRecognizer.translation(in: scrollView.superview)
    if (actualPosition.y > 0){
        // Dragging down
    }else{
        // Dragging up
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-21T09:20:56.530

对于 swift 2.0+ & ios 8.0+

```
func scrollViewWillBeginDecelerating(scrollView: UIScrollView) {
    let actualPosition = scrollView.panGestureRecognizer.translationInView(scrollView.superview)
    if (actualPosition.y > 0){
        // Dragging down 
    }else{
        // Dragging up
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-27T14:01:48.793

谢谢你，克里斯。这对我有用，最后：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Detect the scroll direction
    if (lastContentOffset < (int)scrollView.contentOffset.x) {
    ...
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-06T14:20:42.457

这是我使用的，它至少在 iOS 6.0 上运行良好：

```
- (void)scrollViewDidScroll:(UIScrollView*)scrollView
{
   CGPoint translation = [scrollView.panGestureRecognizer translationInView:scrollView];

   // Detect direction by accessing x or y of translation
} 
```

为您保存实例变量`lastContentOffset`...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T15:07:27.243

看看`scrollViewWillEndDragging:withVelocity:targetContentOffset:`。您可以使用该方法进行任何检查，看看它是否在不应该的地方，然后在该方法中您可以设置一个新的`targetContentOffset`.

根据[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/reference/uiscrollviewdelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewWillEndDragging%3awithVelocity%3atargetContentOffset%3a)：

> 当滚动视图的 pagingEnabled 属性值为 YES 时，不会调用此方法。您的应用程序可以更改 targetContentOffset 参数的值以调整滚动视图完成其滚动动画的位置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-22T17:36:50.193

根据 iOS 7+ 中 scrollView 的平移识别器的翻译检测滚动方向似乎存在问题。就我的目的而言，这似乎可以无缝地工作

```
func scrollViewDidScroll(scrollView: UIScrollView) {
    if !scrollDirectionDetermined {
        let translation = scrollView.panGestureRecognizer.translationInView(self.view)
        if translation.y > 0 {
            println("UP")
            scrollDirectionDetermined = true
        }
        else if translation.y < 0 {
            println("DOWN")
            scrollDirectionDetermined = true
        }
    }
}

func scrollViewWillBeginDragging(scrollView: UIScrollView) {
    scrollDirectionDetermined = false
}

func scrollViewDidEndDecelerating(scrollView: UIScrollView) {
    scrollDirectionDetermined = false
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-09T22:18:49.623

`scrollView.panGestureRecognizer translationInView:scrollView``scrollViewWillBeginDragging`在 iOS 7中没有报告任何有用的信息。

这样做：

在里面`@interface`

```
BOOL scrollDirectionDetermined; 
```

和：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (!scrollDirectionDetermined) {
        if ([scrollView.panGestureRecognizer translationInView:scrollView.superview].x > 0) {
            //scrolling rightwards
        } else {
             //scrolling leftwards
       }
    scrollDirectionDetermined = YES;
    }
} 
```

和：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    scrollDirectionDetermined = NO;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-10T20:38:40.347

基于@Oscar 的回答，您可以执行以下操作

`scrollView.bounces = actualPosition.y < 0`如果您希望滚动视图在滚动到底部时反弹，但在滚动到顶部时不反弹

# iphone - 如何使用发布请求异步将图像上传到 url？

> ID：14042212
> 
> 赞同：0
> 
> 时间：2012-12-26T14:49:30.997
> 
> 标签：iphone, objective-c, ios

我必须将图像上传到特定的网址。我必须遵循的规范如下： 1\. 方法应该是 post 2\. 图片必须使用多部分 HTTP 内容类型上传 3\. HTTP 字段的名称应该是“uploadingTheFile”。4\. 多部分数据应该有文件名。5.图片内容类型应在以下-jpeg,jpg,png,gif之间

我想使用 NSURLConnection 异步上传。我认为我无法以正确的方式设置请求中的参数。我得到的状态代码为 200，这表明我的 NSURLConnection 委托方法没有问题。我正在尝试的代码是：

```
NSString *stringBoundary=@"0xKhTmLbOuNdArY";
// create request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:url]];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@",stringBoundary] forHTTPHeaderField:@"uploadfile"];

NSMutableData *postBody = [NSMutableData data];
NSData *imageData=UIImagePNGRepresentation([UIImage imageNamed:@"IMG_0215.JPG"]);

//[postBody appendData:imageData];
[postBody appendData:[@"Content-Disposition: form-data; name=\"data;filename=\"media.png\"\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[NSData dataWithData:imageData]];
[postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:postBody];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
if (connection) {
    self.data = [NSMutableData data];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:52:08.507

我正在使用以下代码，它对我来说工作正常。

```
NSData *imageData = UIImageJPEGRepresentation(empImgView.image, 90); // convert image in NSData
    NSString *urlString = @"http://abc.com/saveimage/Default.aspx"; // your url

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSString *imgNameString = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n",[responseSrting substringWithRange:NSMakeRange(1, responseSrting.length - 2)]];    
    [body appendData:[[NSString stringWithString:imgNameString] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:00:22.220

在这里你可以学习如何使用afnetworking上传图片

[https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-06T13:38:04.603

您可以使用[AFNetworking](http://cocoadocs.org/docsets/AFNetworking/3.1.0/)（它是开源的），这是对我有用的代码。这适用于 AFNetworking 3.0 版本。

```
NSString *serverUrl = [NSString stringWithFormat:@"http://www.yoursite.com/uploadlink", profile.host];
NSMutableURLRequest *request = [[AFHTTPRequestSerializer serializer] requestWithMethod:@"POST" URLString:serverUrl parameters:nil error:nil];

NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];
AFURLSessionManager *manager = [[AFURLSessionManager alloc] initWithSessionConfiguration:configuration];

manager.responseSerializer = [AFHTTPResponseSerializer serializer];

NSURL *filePath = [NSURL fileURLWithPath:[url path]];
NSURLSessionUploadTask *uploadTask = [manager uploadTaskWithRequest:request fromFile:filePath progress:^(NSProgress * _Nonnull uploadProgress) {
// This is not called back on the main queue.
// You are responsible for dispatching to the main queue for UI updates
     dispatch_async(dispatch_get_main_queue(), ^{
                //Update the progress view
                LLog(@"progres increase... %@ , fraction: %f", uploadProgress.debugDescription, uploadProgress.fractionCompleted);
            });
        } completionHandler:^(NSURLResponse *response, id responseObject, NSError *error) {
            if (error) {
                NSLog(@"Error: %@", error);
            } else {
                NSLog(@"Success: %@ %@", response, responseObject);
            }
        }];
[uploadTask resume]; 
```

# asp.net-web-api - 在 LINQPad 中使用 WebAPI？

> ID：14042213
> 
> 赞同：17
> 
> 时间：2012-12-26T14:49:42.010
> 
> 标签：asp.net-web-api, linqpad, self-hosting, attributerouting

当我尝试在 LINQPad 中使用 Selfhosted WebAPI 时，我一直收到相同的错误，即该类的控制器不存在。

我是否必须为 WebAPI（控制器/类）创建单独的程序集，然后在查询中引用它们？

这是我正在使用的代码

```
#region namespaces
using AttributeRouting;
using AttributeRouting.Web.Http;
using AttributeRouting.Web.Http.SelfHost;
using System.Web.Http.SelfHost;
using System.Web.Http.Routing;
using System.Web.Http;
#endregion

public void Main()
{

    var config = new HttpSelfHostConfiguration("http://192.168.0.196:8181/");
    config.Routes.MapHttpAttributeRoutes(cfg =>
    {
        cfg.AddRoutesFromAssembly(Assembly.GetExecutingAssembly());
    });
    config.Routes.Cast<HttpRoute>().Dump();

    AllObjects.Add(new UserQuery.PlayerObject { Type = 1, BaseAddress = "Hej" });

    config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
    using(HttpSelfHostServer server = new HttpSelfHostServer(config))
    {
        server.OpenAsync().Wait();
        Console.WriteLine("Server open, press enter to quit");
        Console.ReadLine();
        server.CloseAsync();
    }

}

public static List<PlayerObject> AllObjects = new List<PlayerObject>();

public class PlayerObject
{
    public uint Type { get; set; }
    public string BaseAddress { get; set; }
}

[RoutePrefix("players")]
public class PlayerObjectController : System.Web.Http.ApiController
{
    [GET("allPlayers")]
    public IEnumerable<PlayerObject> GetAllPlayerObjects()
    {
        var players = (from p in AllObjects
                    where p.Type == 1
                    select p);
        return players.ToList();
    }
} 
```

此代码在 VS2012 的单独控制台项目中工作正常。

当我没有让“正常”WebAPI 路由工作时，我开始通过 NuGET 使用 AttributeRouting。

我在浏览器中遇到的错误是：`No HTTP resource was found that matches the request URI 'http://192.168.0.196:8181/players/allPlayers'.`

附加错误：`No type was found that matches the controller named 'PlayerObject'`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T23:55:50.773

默认情况下，Web API 会忽略不公开的控制器，并且 LinqPad 类是*嵌套的 public*，我们在[scriptcs中遇到了类似的问题](https://github.com/scriptcs/)

您必须添加一个自定义控制器解析器，它将绕过该限制，并允许您手动从正在执行的程序集中发现控制器类型。

这实际上已经修复（现在 Web API 控制器只需要*可见*而不是公开），但这发生在 9 月，并且自主机的最新稳定版本是从 8 月开始的。

所以，添加这个：

```
public class ControllerResolver: DefaultHttpControllerTypeResolver {

    public override ICollection<Type> GetControllerTypes(IAssembliesResolver assembliesResolver) {
        var types = Assembly.GetExecutingAssembly().GetExportedTypes();
        return types.Where(x => typeof(System.Web.Http.Controllers.IHttpController).IsAssignableFrom(x)).ToList();
    }

} 
```

然后根据您的配置注册，您就完成了：

```
var conf = new HttpSelfHostConfiguration(new Uri(address));
conf.Services.Replace(typeof(IHttpControllerTypeResolver), new ControllerResolver()); 
```

这是一个完整的工作示例，我刚刚针对 LinqPad 进行了测试。请注意，您必须以管理员身份运行 LinqPad，否则您将无法监听端口。

```
public class TestController: System.Web.Http.ApiController {
    public string Get() {
        return "Hello world!";
    }
}

public class ControllerResolver: DefaultHttpControllerTypeResolver {
    public override ICollection<Type> GetControllerTypes(IAssembliesResolver assembliesResolver) {
        var types = Assembly.GetExecutingAssembly().GetExportedTypes();
        return types.Where(x => typeof(System.Web.Http.Controllers.IHttpController).IsAssignableFrom(x)).ToList();
    }
}

async Task Main() {
    var address = "http://localhost:8080";
    var conf = new HttpSelfHostConfiguration(new Uri(address));
    conf.Services.Replace(typeof(IHttpControllerTypeResolver), new ControllerResolver());

    conf.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    var server = new HttpSelfHostServer(conf);
    await server.OpenAsync();

    // keep the query in the 'Running' state
    Util.KeepRunning();
    Util.Cleanup += async delegate {
        // shut down the server when the query's execution is canceled
        // (for example, the Cancel button is clicked)
        await server.CloseAsync();
    };
} 
```

# android - 普通表与虚拟表 SQLite DB

> ID：14042216
> 
> 赞同：10
> 
> 时间：2012-12-26T14:49:53.847
> 
> 标签：android, sqlite, fts3

当需要搜索时，Android 开发人员手册似乎更喜欢 SQLite DB 中的 FTS3。我阅读了 FTS3 描述，它似乎创建了一个虚拟表而不是永久表。SQLite 中的虚拟表（FTS3）和普通表有什么区别？即使在我退出应用程序后，虚拟表是否是永久的并保留在数据库中？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:38:32.823

虚拟表允许 SQLite 引擎使用（通常）非 SQLite 代码访问数据存储的内容。这允许开发人员向 SQLite 添加自定义功能。

对于 FTS，它最初不是 SQLite 引擎的一部分。它是 SQLite 外部的代码，允许最终用户对数据进行全文搜索。

虚拟表是永久的吗？这取决于实施。对于 FTS，数据是永久性的。但是，您可以创建一个使用 RAM 进行存储的实现——这显然会在应用程序终止时消失。

更多关于虚拟表：[http ://www.sqlite.org/vtab.html](http://www.sqlite.org/vtab.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:34:45.780

我认为更准确的说法是创建搜索界面的 API 指南指出 FTS3 进行全文搜索的速度比 LIKE 快得多，*具体取决于搜索的特性*。例如，使用 LIKE 的常规 SQLite 查询允许使用通配符，而使用 MATCH 的 FTS3 查询则不允许。如果您想搜索令牌，您可能需要使用 FTS3。如果您要进行不精确的匹配，则绝对必须使用 LIKE。

# iphone - 将值传递给目标控制器

> ID：14042220
> 
> 赞同：2
> 
> 时间：2012-12-26T14:50:08.630
> 
> 标签：iphone, objective-c, ios

我将 ID 从 UITABLEVIEWCONTROLLER 传递到另一个 UITABLEVIEWCONTROLLER 但它引发以下错误。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBarController setCityId:]: unrecognized selector sent to instance 0x75225e0' 
```

这里是 prepareForSegue 函数：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"cityPushToTab"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        featuredViewController *destViewController = segue.destinationViewController;
        destViewController.cityId = [productKeys objectAtIndex:indexPath.row];
    }

} 
```

在我调用特色控制器的 cityId 之前，该功能做得很好。我试图记录打印正确值的productKeys，但是当我尝试将值分配给目标视图控制器对象时它正在终止。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:02:23.460

你确定`destViewController`是一流的`featuredViewController`吗？我确定不是。崩溃日志告诉它是一个`UITabBarController`.

我推荐的是创建一个继承自`UITabBarController`. 我会打电话`MyTabBarViewController`的。将情节提要中的标签栏控制器的类设置为这个新类。

在`MyTabBarViewController.h`中，创建一个属性：

```
@property (nonatomic, strong) id cityId; 
```

（请注意，cityId 可以是您需要的任何类型，例如`NSString`, `NSNumber`, ...）。

然后，更改您的`prepareForSegue`代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"cityPushToTab"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        MyTabBarViewController *destViewController = segue.destinationViewController;
        destViewController.cityId = [productKeys objectAtIndex:indexPath.row];
    }
} 
```

接下来，在标签栏中的 4 个视图控制器的 .m 文件中，您可以使用以下代码访问`cityId`：

```
// Cast the viewcontroller's tab bar to your class
MyTabBarViewController *tabBarController = (MyTabBarViewController*)self.tabBarController;

// Access your property
id cityId = tabBarController.cityId;
// You can test to see if it works by casting to an NSString and NSLog it
NSString *cityIdString = (NSString*) tabBarController.cityId;
NSLog (@"%@", cityIdString); 
```

# c++ - 使用 C++11 的大多数基本并行化都失败了

> ID：14042223
> 
> 赞同：4
> 
> 时间：2012-12-26T14:50:29.673
> 
> 标签：c++, multithreading, c++11, pthreads

我尝试使用 g++ 4.7 使用 C++11 主题库。首先我有一个问题：预计下一个版本不需要手动链接 pthread 库吗？

所以我的程序是：

```
#include <iostream>
#include <vector>
#include <thread>

void f(int i) {
    std::cout<<"Hello world from : "<<i<<std::endl;
}

int main() {
    const int n = 4;
    std::vector<std::thread> t;
    for (int i = 0; i < n; ++i) {
        t.push_back(std::thread(f, i));
    }
    for (int i = 0; i < n; ++i) {
        t[i].join();
    }
    return 0;
} 
```

我编译：

```
g++-4.7 -Wall -Wextra -Winline -std=c++0x -pthread -O3 helloworld.cpp -o helloworld 
```

它返回：

```
Hello world from : Hello world from : Hello world from : 32
2
pure virtual method called

terminate called without an active exception
Erreur de segmentation (core dumped) 
```

问题是什么以及如何解决？

更新：

现在使用互斥锁：

```
#include <iostream>
#include <vector>
#include <thread>
#include <mutex>

static std::mutex m;

void f(int i) {
    m.lock();
    std::cout<<"Hello world from : "<<i<<std::endl;
    m.unlock();
}

int main() {
    const int n = 4;
    std::vector<std::thread> t;
    for (int i = 0; i < n; ++i) {
        t.push_back(std::thread(f, i));
    }
    for (int i = 0; i < n; ++i) {
        t[i].join();
    }
    return 0;
} 
```

它返回：

```
pure virtual method called
Hello world from : 2
terminate called without an active exception
Abandon (core dumped) 
```

更新2：嗯......它适用于我的默认GCC（g ++ 4.6），但它与我手动编译的gcc版本（g ++ 4.7.1）一起失败。有没有我忘记编译 g++ 4.7.1 的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:55:28.690

一般编辑：

为防止多个线程同时使用 cout 导致字符交错，请执行以下操作：

1) 在 f() 的声明之前声明：

```
static std::mutex m; 
```

2）然后，保护“cout”线：

```
m.lock();
std::cout<<"Hello world from : "<<i<<std::endl;
m.unlock(); 
```

显然，由于某些不清楚的原因，必须链接到 -lpthread 库。至少在我的机器上，不链接 -lpthread 会导致核心转储。添加 -lpthread 会导致程序具有正确的功能。

如果从不同线程访问 cout 时不使用锁定，则字符交错的可能性在这里表示：

[https://stackoverflow.com/a/6374525/1284631](https://stackoverflow.com/a/6374525/1284631)

更准确地说：“[注意：如果用户希望避免交错字符，他们仍必须同步多个线程对这些对象和流的并发使用。-结束注释]”

OTOH，至少在 C++11 标准中可以保证避免竞争条件（请注意，该标准的 gcc/g++ 实现仍处于实验级别）。

请注意，Microsoft 实现（参见：http: [//msdn.microsoft.com/en-us/library/c9ceah3b.aspx](http://msdn.microsoft.com/en-us/library/c9ceah3b.aspx)归功于@SChepurin）比标准更严格（显然，它保证避免字符交错），但这gcc/g++ 实现可能不是这种情况。

这是我用来编译的命令行（更新版本和原始代码版本，在我的 PC 上一切正常）：

```
g++ threadtest.cpp -std=gnu++11 -lpthread -O3 
```

OTOH，没有 -lpthread，它可以编译，但我有一个核心转储（Linux 64 上的 gcc 4.7.2）。

我了解到您在同一台机器上使用了两个不同版本的 gcc/g++ 编译器。只要确保正确使用它们（不要混合不同的库版本）。

# python - 我想通过 Pylast 的 Last.fm API 获取用户信息

> ID：14042225
> 
> 赞同：0
> 
> 时间：2012-12-26T14:50:33.820
> 
> 标签：python, api, last.fm

我想通过 Pylast 通过 Last.fm API 获取用户信息，但它返回错误：绑定方法，我想我需要你的帮助。

```
import pylast

API_KEY = "xxx"
API_SECRET = "xxx"

username = "xxx"
password_hash = pylast.md5("xxx")

network = pylast.LastFMNetwork(api_key = API_KEY, api_secret = API_SECRET, username =  username, password_hash = password_hash)

#Get User Info
user = pylast.User('xxx',network=network)
print user.get_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:10:01.767

这不是错误，它只是告诉您这`user.get_id`是一个**绑定**到对象的函数。

我认为您需要`print user.get_id()`调用该函数并查看它为您提供了什么...确保您知道什么是函数:)

# php - 使用 XAMPP 在 Windows 8 上安装 Wordpress 但 PHP 未运行

> ID：14042228
> 
> 赞同：1
> 
> 时间：2012-12-26T14:51:04.007
> 
> 标签：php, wordpress, xampp

我是想要安装 Wordpress 的 Windows 8 用户。

我正在使用`XAMPP`并检查我的 XAMPP 是否正常工作。我还在 MySql 上创建了一个数据库，并`wp-config.php`使用我之前创建的数据库详细信息进行设置。但是每次我单击 wp-admin/install.php 时，都会出现此错误：

> 错误：PHP 未运行 WordPress 要求您的 Web 服务器运行 PHP。您的服务器没有安装 PHP，或者 PHP 已关闭。

我正在使用 mySQL 数据库，数据库名称是 wordpress。
这是我的配置：

> // ** MySQL 设置 - 您可以从您的虚拟主机获取此信息 ** // /** WordPress 数据库的名称 */ define('DB_NAME', 'wordpress');
> 
> /** MySQL 数据库用户名 */ define('DB_USER', 'root');
> 
> /** MySQL 数据库密码 */ define('DB_PASSWORD', '');
> 
> /** MySQL 主机名 */ define('DB_HOST', 'localhost');
> 
> /** 用于创建数据库表的数据库字符集。*/ 定义('DB_CHARSET', 'utf8');
> 
> /** 数据库整理类型。如有疑问，请勿更改此设置。*/ 定义('DB_COLLATE', '');

我仍然收到错误，需要一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:45:57.903

去检查 C:\xampp\apache\conf\httpd.conf 是否加载了 php 模块或者是否存在此行*Include "conf/extra/httpd-xampp.conf"*。如果没有，那么添加这一行：包括“conf/extra/httpd-xampp.conf”，但在去检查这个文件是否存在之前。如果此文件不存在，则将此行添加到 httpd.conf：**LoadModule php5_module "C:/xampp/php/php5apache2_2.dll"**

打开 CMD 并执行以下命令：

**c:\xampp\apache_start.bat**

该命令的输出将显示错误，如果 apache 没有启动，为什么它没有启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:00:24.200

使用 XAMPP 控制面板启动 Apache (PHP) 和 MySQL。每次关闭 Windows 时，Apache 和 MySQL 也会关闭。如果您尚未将 Apache (PHP) 和 MySQL 设置为服务，则需要通过控制面板手动启动 apache(PHP) 和 MySQL。**C:\xampp\xampp-control.exe**如果您使用默认目录。确保以管理员身份运行程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T19:19:47.043

我也有这个问题。我按照指示前往“发球台”。但最后，我去了 wordpress/wp-admin/install.php 文件并打开了它；这就是我收到“错误：PHP 未运行”消息的地方。

但后来我去了，进入了路径

```
http://localhost/wordpress/wp-admin/install.php 
```

在我浏览器的地址栏中，它起作用了！我一开始不这样做很愚蠢，但希望这个答案能帮助你们中的一些人。

# android - 删除 /data/data 文件夹

> ID：14042229
> 
> 赞同：0
> 
> 时间：2012-12-26T14:51:06.923
> 
> 标签：android

我的应用程序是系统应用程序。我需要的是为所有其他应用程序执行干净的数据。据我所知，所有应用程序的数据都存储在 /data/data 中。有没有办法以编程方式删除 /data/data 中的所有文件夹/文件？

我知道如何从 adb 做到这一点：

```
adb shell
# rm -r /data/data 
```

这就是我试图在代码中做到这一点的方式：

```
Process process;
    try {
        process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        os.writeBytes("mount -o remount,rw -t rfs /dev/stl5 /data; \n");
        os.writeBytes("rm -r /data/data; \n");
        os.writeBytes("mount -o remount,ro -t rfs /dev/stl5 /data; \n");

        return;
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:27:32.447

根据定义，您的应用程序*不能*是系统应用程序，除非您已将手机植根。对于非 root 手机，您无权访问其他应用程序的数据，除非他们将数据写入公共区域并使其可在世界范围内写入。即便如此，您的应用程序也应该避免触摸它不拥有的任何东西。

如果你在 adb 中这样做会发生什么？您可能会导致其他应用程序停止正常工作。

但是，您问的是“如果我将手指伸入灯座会发生什么？”的编程等价物？我们当中明智的人会得出结论，我们没有义务回答你，如果你真的会去做的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:58:25.750

我不知道这是否有效，但即使有效，您的程序肯定需要 root（su / 超级用户）才能弄乱该位置。

# jquery - 将 json 结果发送到 mvc 视图

> ID：14042230
> 
> 赞同：0
> 
> 时间：2012-12-26T14:51:09.500
> 
> 标签：jquery, json, asp.net-mvc

经过一些处理后，我将用户请求从 mvc 视图发送到控制器和控制器，并将结果作为 json 对象发送回视图。我当前的解决方案有效，但我想在视图端呈现 html 元素，而不是在 js 函数中（就像现在一样）。

```
function GetTabData(xdata) {
    $.ajax({
        url: ('/Home/GetData'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: xdata }),

        success: function (result) {
            var data = null;
            data = '<div class="list-products clearfix">
            data += '<a href="/Home/MyData/' + item.Id + '">
....
} 
```

所以我想删除所有这些 div 和其他 html 元素并发送纯数据并在视图上对其进行格式化，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:52:45.573

好吧，然后让您的控制器操作返回一个`PartialView`包含*准备好使用的*HTML 片段而不是 JsonResult：

```
public ActionResult GetData()
{
    MyViewModel model = ...
    return PartialView(model);
} 
```

现在您需要在成功回调中做的就是使用 jQuery 的[`.html()`](http://api.jquery.com/html/)函数：

```
success: function (data) {
    $('#someContainingDiv').html(data);
} 
```

然后你会有一个相应的局部视图（`~/Views/Home/GetData.cshtml` )，它将被强类型化到视图模型并呈现相应的 HTML：

```
@model MyViewModel
<div class="list-products clearfix">
@Html.ActionLink("click me", "MyData", "Home", new { id = Mode.Id }, null)
... 
```

如您所见，这允许您使用 HTML 帮助程序来生成正确的标记和 URL，而在您的原始示例中，您在锚标记中硬编码 URL，例如`/Home/MyData`这确实是一件非常糟糕的事情。

您应该真正找到从由 AJAX 请求调用的控制器操作发送的纯 JSON 数据与发送包含标记的部分视图之间的平衡。如果您发现自己在 AJAX 成功回调中使用了大量字符串连接来构建一些 HTML 标记，那么您可能应该切换服务器端逻辑以直接返回所需的 HTML。

# c++ - 除了加密之外，还有什么方法可以防止访问文本文件？

> ID：14042231
> 
> 赞同：0
> 
> 时间：2012-12-26T14:51:12.807
> 
> 标签：c++

基本上我正在实现一个字典，我不希望任何用户访问我的字典 .txt 文件。我需要从我的程序中访问该文件。txt 文件太大，加密方法需要很长时间才能解密它们。还有哪些其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:58:29.323

你给自己设定了一个几乎不可能完成的任务。

根据“读取”的一些定义，您的程序的任何用户都可以“读取”文件，只需要求程序进行查找即可。

如果您想通过程序以外的其他方式阻止对文件的读取访问，您唯一有效的选择是拒绝对文件的物理访问（通过将其托管在服务器上并在其前面有一个仅允许查询的 API） . 任何能够访问程序和数据文件的知识渊博和坚定的用户都将能够破译它。对某些人来说，加密数据文件会使这变得更加困难，但前提是程序中没有内置密钥，但用户必须手动输入。然后只有那些拥有密钥的人才有合理的机会破译数据文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:03:21.267

巴特的回答是完全有效的。但问题可能有解决方案。

根据字典的实际作用，您可以使用 Bloom 过滤器或其他概率哈希数据结构来避免以任何直接方式存储其内容。但是在这种情况下，您将无法访问单词，只能检查单词是否存在。

通过向程序查询所有可能的单词，这样的字典仍然容易受到攻击。这可能可行，也可能不可行；目前还不清楚你到底在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:04:55.517

如果您真的很重视安全性，那么您应该使用适当的长密钥加密。[但是请参阅有关“您将密钥存储在哪里”的评论-您无法安全地执行此操作]。

但是，如果您只是想让文件在文本编辑器中有点难以阅读，您可以使用某种形式的简单压缩[还有一个好处是占用更少的空间]。字节对编码很容易实现。霍夫曼编码需要更多的努力。显然，使用现有的编码技术，如 gzip、bzip2、xz 或其他一些技术，破解的难度会小一些，因此不会具有相同的保护特性。

如果目的是让普通用户（例如，不精通破解代码和破解软件的人）难以使用，则使用简单的“位旋转”来存储密钥 - 例如获取顶部和底部 4 位字符并反转它们：`char ch = (orig_ch >> 4) | ((orig_ch & (1<<4)-1) << 4);`会使普通用户几乎无法阅读内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:26:30.397

就像许多人已经观察到的那样，不可能 100% 地保护您的数据免受用户的侵害。只要有足够的时间，任何有足够决心的用户都会得到它。

但是，有一种“简单”的方法可以确保用户不会“弄乱”字典文件中的数据：您可以使用二进制文件 I/O：

```
ofstream out("dictionary.dat",ios::binary);
out.write((char*) &your_data, sizeof(your_data)); 
```

对于阅读，您可以执行类似的操作：

```
ifstream in("dictionary.dat",ios::binary);
in.read((char*) &your_data, sizeof(your_data)); 
```

这不是真正意义上的“加密”，它只是一种替代表示，使人们更难“弄乱”您的数据。

此外，与其担心用户*是否*会弄乱您的数据文件，不如实施检测文件是否被篡改的方法（例如：校验和、文件哈希等）并拒绝加载它会更有意义。

# c# - Moq - 将模拟设置为第一次回调和第二次引发事件

> ID：14042234
> 
> 赞同：3
> 
> 时间：2012-12-26T14:51:45.673
> 
> 标签：c#, events, callback, moq

我得到的东西看起来像这样：

```
public delegate void MyCallback(string name);

public class MyClass
{
    public virtual void MyFunc(string name, MyCallback callback)
    {
        ...
    }
} 
```

现在，当我用 moq 模拟 MyClass 时，我希望第一次调用 MyFunc 来调用回调，然后第二次调用该函数来引发一些事件，但是在使用 moq 回调之后我无法引发事件！

我能做些什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T23:01:40.213

据我所知，起订量不支持这种链接，但你可以轻松地绕过它：

```
var mock = new Mock<MyClass>();
int callsCount = 0;
mock
    .Setup(m => m.MyFunc(It.IsAny<int>(), It.IsAny<MyCallback>()))
    .Callback<int, MyCallback>(
        (i, callback) => 
        {
            if (callsCount++ == 0) callback("Some string");
            else mock.Raise(m => m.SomeEvent += null, EventArgs.Empty);
        }); 
```

# c# - MembershipUserCollection.GetEnumerator() 的返回类型是什么？

> ID：14042238
> 
> 赞同：0
> 
> 时间：2012-12-26T14:52:27.937
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我需要帮助理解这一点

在我的控制器中，我有

```
MembershipUserCollection usersObj = Membership.GetAllUsers();
IEnumerator<MembershipUserCollection> model = usersObj.GetEnumerator();
return PartialView(model ); 
```

我需要一个`IEnumerator object`迭代，但我不确定`IEnumerator` `MembershipUserCollection.GetEnumerator()`返回哪种类型。

我想将它传递`IEnumerator`给一个视图，我将`Enumerator`在其中使用它`foreach`：

```
 @foreach (var membershipUser in Model.getEnumerator())
 { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:03:08.347

您的问题错误地假设此代码有效：

```
@foreach (var membershipUser in Model.getEnumerator()) { ... } 
```

事实上，你应该这样写：

```
@foreach (var membershipUser in Model) { ... } 
```

这样一来，您的整个问题就变得没有意义了。编译器处理调用的细节`GetEnumerator`，并且，当您使用`var`关键字时，它也推断循环变量的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:57:39.000

`foreach`遍历从`IEnumerable`接口继承的对象，因此如果从接口`MembershipUserCollection`继承（并且[确实如此](http://msdn.microsoft.com/en-us/library/system.web.security.membershipusercollection.aspx)），您可以将其传递给模型并且它应该可以工作。

```
MembershipUserCollection usersObj = Membership.GetAllUsers();
return PartialView(usersObj); 
```

并且在视图中

```
@model System.Web.Security.MembershipUserCollection

<h2>Users</h2>
<ul>
    @foreach(var u in Model)
    {
        <li>u.UserName</li>
    }
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:35:20.340

GetEnumerator() 返回一个遍历集合的枚举器。

收集必须满足以下要求：

```
The collection type:
    1\. Must be one of the types: interface, class, or struct.
    2\. Must include an instance method named GetEnumerator that returns a type, for example, Enumerator.

The type Enumerator (a class or struct) must contain:
   1\. A property named Current that returns ItemType or a type that can be converted to it. The property accessor returns the current element of the collection. 
```

有关详细信息，请参阅以下链接：http: [//msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx)

# c - GNU/Linux下获取fgetc处理Mac OS CR

> ID：14042240
> 
> 赞同：1
> 
> 时间：2012-12-26T14:52:38.747
> 
> 标签：c, linux, macos

在 GNU/Linux 下，使用以下文件 'foo.csv'（当然*\r*是 Mac 回车）：

```
0,1,2,3\r
4,5,6,7\r
6,9,10,11\r 
```

*fgets*函数将整个文件作为一行返回。如何指定*fgets*应将 \r 处理为换行符？

C 代码示例：

```
#include <stdio.h>

int main(int argc, char **argv) {
        FILE *stream = fopen(argv[1],"r");
        char tmp[1024];
        int i=0;
        while (fgets (tmp, 1024, stream) != NULL) {
                printf("line %d\n", i);
                i++;
        }
} 
```

我想避免通过转换*\r* => *\n*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:00:11.650

也许`getdelim`按照本页所述使用： [http ://www.gnu.org/software/libc/manual/html_node/Line-Input.html](http://www.gnu.org/software/libc/manual/html_node/Line-Input.html)

请注意`getdelim`(and `getline`) 与 fgets 的工作方式不同，因此您需要稍微更改代码 - 特别是，您需要以`char *ptr = NULL`and开头`size = 0`；然后将它们传递为`getdelim(&ptr, &size, '\r', stream);`- 当你读完整个文件时，调用`free(ptr);`.

编辑：要找出文件结尾的行：

```
int lineending(FILE *f)
{
    int ch;
    long fpos = ftell(f);
    while((ch = fgetc(f)) != EOF)
        if (ch == '\r' || ch == '\n')
            break;
    fseek(f, fpos, CUR_BEGIN);
    return ch;
} 
```

你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:56:54.430

在 Linux 和 OSX 上，您都可以调用`getdelim`，它允许您指定分隔符。

# java - 以编程方式向 ShapeDrawable 添加阴影

> ID：14042251
> 
> 赞同：5
> 
> 时间：2012-12-26T14:53:27.487
> 
> 标签：java, android, shadow, shapedrawable

我正在尝试以编程方式制作具有不同渐变的按钮。我使用 ShapeDrawable，它就像一个魅力。

```
RoundRectShape rs = new RoundRectShape(new float[] { 12f, 12f, 12f, 12f, 12f, 12f, 12f, 12f }, null, null);
ShapeDrawable sd = new ShapeDrawable(rs);
ShapeDrawable.ShaderFactory sf = new ShapeDrawable.ShaderFactory() {

    @Override
    public Shader resize(int width, int height) {
        LinearGradient lg = new LinearGradient(0, 0, 0, height,
                new int[] { 
                    Color.parseColor("#feccb1"), 
                    Color.parseColor("#f17432"), 
                    Color.parseColor("#e86320"),
                    Color.parseColor("#f96e22") },
                new float[] {
                    0, 0.50f, 0.50f, 1 },
                Shader.TileMode.REPEAT);
             return lg;
        }
    };
sd.setShaderFactory(sf);
myBtn.setBackgroundDrawable(sd); 
```

但是我想以编程方式为按钮添加**阴影**，**而不是按钮文本。**任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T19:21:01.650

> 但是我想以编程方式为按钮添加阴影，而不是按钮文本。

我猜你想要你构建的当前drawable背后的阴影。如果是，则将 a[`LayerDrawable`](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)与另一个`Drawable`（放置在第一位）一起作为阴影：

```
 RoundRectShape rss = new RoundRectShape(new float[] { 12f, 12f, 12f,
            12f, 12f, 12f, 12f, 12f }, null, null);
    ShapeDrawable sds = new ShapeDrawable(rss);
    sds.setShaderFactory(new ShapeDrawable.ShaderFactory() {

        @Override
        public Shader resize(int width, int height) {
            LinearGradient lg = new LinearGradient(0, 0, 0, height,
                    new int[] { Color.parseColor("#e5e5e5"),
                            Color.parseColor("#e5e5e5"),
                            Color.parseColor("#e5e5e5"),
                            Color.parseColor("#e5e5e5") }, new float[] { 0,
                            0.50f, 0.50f, 1 }, Shader.TileMode.REPEAT);
            return lg;
        }
    });

    LayerDrawable ld = new LayerDrawable(new Drawable[] { sds, sd });
    ld.setLayerInset(0, 5, 5, 0, 0); // inset the shadow so it doesn't start right at the left/top
    ld.setLayerInset(1, 0, 0, 5, 5); // inset the top drawable so we can leave a bit of space for the shadow to use

    b.setBackgroundDrawable(ld); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-16T16:37:13.280

一种更干净的方法是使用[杰克的](https://stackoverflow.com/a/26356439/2313889)`Paint.setShadowLayer`回答

# javascript - 用户输入决定显示数量

> ID：14042253
> 
> 赞同：0
> 
> 时间：2012-12-26T14:53:30.153
> 
> 标签：javascript

几天来，我一直在努力让它发挥作用。我有基本代码，但每次我尝试添加最后一个要求时，我都会破坏代码。我确定我错过了很多，这就是为什么我不能添加带有显示数量的警报框。因此，它会询问用户姓名、他们想查看的次数和警告框，如果他们输入无效答案，他们会看到警告框告诉他们输入正确的值。我坚持的最后一部分是用户输入的值决定了有多少警报框显示他们的名字，并且框需要说明它是哪个框。所以，`<Name>`这是 的时间`<count of displays>`数`<total time to display>`。我正在尝试使用限制和 FOR 不同的东西，用户 Y 变量是限制器。任何线索或帮助将不胜感激。

```
<!DOCTYPE html>
<html>
<body>

<p>Please enter your name followed by how many times you would like to be alerted.</p>

<button onclick="myFunction()">Start</button>

<script>

function myFunction() {
    var x;

    var name = prompt("Please enter your name", "");
    if (name == null || name == "") {
        alert("Please input a name.");

        return false;
    }
    else {
        var y;
        var y = prompt("Please enter a number between 1-10");
        if (y == null || y == "") {
            alert("Please input a number for the times to alert the name.");
            return false;
        }
        if (y > 10) {
            alert("Please input a number between 1 and 10.")
            var y = prompt("Please enter a number between 1-10");

        }
        if (y <= 0) {
            alert("Please input a number great than zero.")
            var y = prompt("Please enter a number between 1-10");

        }
    }
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:01:06.633

没有太大的改变。

尝试：

```
function myFunction() {
    var x, y;

    var name = prompt("Please enter your name", "");
    if (name == null || name == "") {
        alert("Please input a name.");

        return false;
    }
    else {
        var y = prompt("Please enter a number between 1-10");
        if (y == null || y == "") {
            alert("Please input a number for the times to alert the name.");
            return false;
        }
        while (y >= 10 || y <= 0) {
            alert("Please input a number between 1 and 10.")
            var y = prompt("Please enter a number between 1-10");
            if (y == null || y == "") {
                alert("Please input a number for the times to alert the name.");
                return false;
            }
        }
    }
    for(var i = 0; i < y; i++) {
        alert("this is an alert");
    }
} 
```

这会在循环中检查 1 <= y <= 10。

见[http://jsfiddle.net/tMXNM/2/](http://jsfiddle.net/tMXNM/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:07:34.780

这消除了您的大部分`alert`陈述并一直保持`prompt`直到提交有效值。

```
function myFunction() {
    var x,y,name = "";
    while(name.length < 1) {
        name = prompt("Please enter your name", "");
    }

    while(!((y > 0) && (y <11))) {
       y = prompt("Please enter a number between 1-10");
    }

    for(x = 0; x < y; x++) {
       alert(name);
    }
} 
```

工作示例：

[http://jsfiddle.net/DwxmT/](http://jsfiddle.net/DwxmT/)

# asp.net - ASP.NET MVC 3\. System.IO.IOException：进程无法访问文件''，因为它正被另一个进程使用

> ID：14042255
> 
> 赞同：1
> 
> 时间：2012-12-26T14:53:47.343
> 
> 标签：asp.net, asp.net-mvc-3

请帮帮我。我有一个 asp.net mvc 3 应用程序。我需要从服务器中删除一个文件，但我不能。当我在本地计算机上测试我的应用程序时 - 删除成功，但是当我在 Web 服务器上运行它时出现错误 System.IO.IOException: The process cannot access the file '' because it is being used by another process.

```
[HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
     ...
     if (ad.AdPhoto1 != null)
        {
            System.IO.File.Delete(AppDomain.CurrentDomain.BaseDirectory + "Content/photos/" + ad.AdPhoto1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:28:50.370

对不起，问题不那么完整，我昨天没有太多时间......文件是图像（例如.jpg）。我有一个模型：

```
public class Ad
{
    public int AdId { get; set; }
    ...
    [Display(Name = "Photo")]
    public string AdPhoto1 { get; set; }
    [Display(Name = "Photo 2")]
    public string AdPhoto2 { get; set; }
    [Display(Name = "Photo 3")]
    public string AdPhoto3 { get; set; }
    [Display(Name = "Photo 4")]
    public string AdPhoto4 { get; set; }
    ...
} 
```

当我创建一个新的“广告”时，我将照片上传到服务器上并将其名称写入我的模型。我是怎么做的：

```
[HttpPost]
public ActionResult Create(Ad ad, int? Categories, int? SubCategories, IEnumerable<HttpPostedFileBase> fotoUpload)
{
    ...
    if (ModelState.IsValid)
        {
            int count = 1;
            foreach (var file in fotoUpload)
            {
                Random random = new Random();
                int randomItem = random.Next(1, 100);

                if (file != null)
                {
                    string path = AppDomain.CurrentDomain.BaseDirectory + "Content/photos/";
                    string filename = randomItem + count + "Photo" + Path.GetFileName(file.FileName);

                    if (Request.ContentLength > 1228800) 
                    {
                        ViewBag.FileSizeError = "Сумарный размер загружаемых вами файлов превышает ограничение в 1,2 МБ";
                        ModelState.Remove("Categories");
                        ValuteInitializer();
                        return View();
                    }

                    file.SaveAs(Path.Combine(path, filename));

                    switch (count)
                    {
                        case 1:
                            ad.AdPhoto1 = filename;
                            break;
                        case 2:
                            ad.AdPhoto2 = filename;
                            break;
                        case 3:
                            ad.AdPhoto3 = filename;
                            break;
                        case 4:
                            ad.AdPhoto4 = filename;
                            break;
                    }

                }

                count++;
            }
            if (User.Identity.IsAuthenticated)
            {
                ad.AdAuthor = User.Identity.Name;
                ad.AdVisibility = true;
                db.SaveChanges();
            }
            ad.AdData = DateTime.Now;
            ad.AdPriority = 3;
            ad.CategoryId = Categories;
            ad.SubCategoryId = SubCategories;
            db.Ads.Add(ad);
            db.SaveChanges();
            return RedirectToAction("CreateSuccess");
        }

        return View(ad);
    } 
```

我看了很多关于同样问题的帖子，但我还没有找到解决问题的方法。我猜这个问题可能与流有关，也许。所以，我希望有人可以帮助我...

# iphone - 提取部分 UIImageView

> ID：14042260
> 
> 赞同：1
> 
> 时间：2012-12-26T14:54:34.283
> 
> 标签：iphone, objective-c, uiimageview, resize, warp

我想知道是否可以“提取” `UIImageView`.

例如，我选择使用 Warp Affine 的一部分`UIImageView`并且我知道所选部分`frame`。

就像这张图片：

![在此处输入图像描述](../Images/6a97e137d63324e434d6a924799f9d66.png)

是否可以从原件中`UIImageView`仅获取选定的部分而不会损失质量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T20:45:38.540

通过 category 方法获取视图的快照：

```
@implementation UIView(Snapshot)

-(UIImage*)makeSnapshot
{
  CGRect wholeRect = self.bounds;

  UIGraphicsBeginImageContextWithOptions(wholeRect.size, YES, [UIScreen mainScreen].scale);

  CGContextRef ctx = UIGraphicsGetCurrentContext();
  [[UIColor blackColor] set];
  CGContextFillRect(ctx, wholeRect);
  [self.layer renderInContext:ctx];

  UIImage* image = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();

  return image;
}

@end 
```

然后通过另一种类别方法将其裁剪到您的矩形：

```
@implementation UIImage(Crop)

-(UIImage*)cropFromRect:(CGRect)fromRect
{
  fromRect = CGRectMake(fromRect.origin.x * self.scale,
                        fromRect.origin.y * self.scale,
                        fromRect.size.width * self.scale,
                        fromRect.size.height * self.scale);
  CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, fromRect);
  UIImage* crop = [UIImage imageWithCGImage:imageRef scale:self.scale orientation:self.imageOrientation];
  CGImageRelease(imageRef);
  return crop;
}

@end 
```

在你的 VC 中：

```
UIImage* snapshot = [self.imageView makeSnapshot];
UIImage* imageYouNeed = [snapshot cropFromRect:selectedRect]; 
```

`selectedRect`应该在你的`self.imageView`坐标系中，如果没有，那么使用 `selectedRect = [self.imageView convertRect:selectedRect fromView:...]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:19:57.590

是的，这是可能的。首先，您应该使用此属性获取 UIImageView 的图像：

```
@property(nonatomic, retain) UIImage *image; 
```

和 NSImage 的：

```
@property(nonatomic, readonly) CGImageRef CGImage; 
```

然后你得到剪切图像：

```
CGImageRef cutImage = CGImageCreateWithImageInRect(yourCGImageRef, CGRectMake(x, y, w, h)); 
```

如果你想要一个 UIImage，你应该使用这个 UIImage 的方法：

```
+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage; 
```

**PS：**不知道直接怎么做，不用转成CGImageRef，或许有办法。

# ruby-on-rails - 创建表和控制器

> ID：14042262
> 
> 赞同：2
> 
> 时间：2012-12-26T14:55:08.313
> 
> 标签：ruby-on-rails

我想创建 TODO 列表应用程序。

所以我想创建一个管理页面和一个工作页面。

为此，我需要两个控制器：

```
rails generate controller Admins

rails generate controller Workers 
```

现在，我想创建两个表并在控制器中使用它们：

**第一个表**将是工作人员：电子邮件（字符串）、全名（文本）、is_worker（布尔值）。

**第二个表**将是连接：email_admin(string)、email_worker(string)、task(text)、done (boolean)。

我应该如何定义表格？

我试过：

```
rails generate scaffold workers email: string, full_name: text, is_worker: boolean
rake db:migrate
rails generate scaffold connection email_admin: string, email_worker: string, task: text, done: boolean
rake db:migrate 
```

但它定义了我的控制器：“工人”和“连接”，我不想创建控制器，而只是表。（然后我将使用以下控制器中的表：Admins 和 Workers）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:03:06.813

使用`rails generate model worker`和`rails generate model connection`。此命令将创建两个模型及其对应的表。

# c# - 允许用户选择颜色并将其存储以供以后使用

> ID：14042266
> 
> 赞同：1
> 
> 时间：2012-12-26T14:55:27.247
> 
> 标签：c#, console

我正在编写一个控制台应用程序，其中我想要实现的一件事是让用户选择他们想要代表他们的颜色，然后在整个程序中使用它。

我的想法是有一个通过 switch 语句工作的菜单（见下文），这部分很简单，但我怎样才能在程序的后面继续调用他们在这个 switch 中选择的颜色呢？

```
private static void colorSelector()
    {
        var myKey = Console.ReadKey(true);
        switch (myKey.Key)
        {
            case ConsoleKey.F1:
                Console.ForegroundColor = ConsoleColor.Green;
                break;
            case ConsoleKey.F2:
                Console.ForegroundColor = ConsoleColor.Cyan;
                break;
            case ConsoleKey.F3:
                Console.ForegroundColor = ConsoleColor.Red;
                break;
            case ConsoleKey.F4:
                Console.ForegroundColor = ConsoleColor.Magenta;
                break;
            case ConsoleKey.F5:
                Console.ForegroundColor = ConsoleColor.Blue;
                break;
            case ConsoleKey.F6:
                Console.ForegroundColor = ConsoleColor.Yellow;
                break;
        } 
```

我希望我在这里让自己足够清楚，我会很感激任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:56:41.257

不要直接将它分配给`Console.ForegroundColor`，而是使用一个变量，然后再使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:45:33.220

你可以像这样使用变量

```
ConsoleColore color; 
```

然后像这样保存你的颜色

```
color = ConsoleColor.Red; 
```

之后你就可以在你的程序中使用它了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:00:00.910

您可以将其分配给类级别变量，然后在整个类中检索它：

```
class Program
{
    private static ConsoleColor _userColor;
    static void Main(string[] args)
    {

        var myKey = Console.ReadKey(true);
        switch (myKey.Key)
        {
            case ConsoleKey.F1:
                _userColor = ConsoleColor.Green;
                break;
            case ConsoleKey.F2:
                _userColor = ConsoleColor.Cyan;
                break;
            case ConsoleKey.F3:
                _userColor = ConsoleColor.Red;
                break;
            case ConsoleKey.F4:
                _userColor = ConsoleColor.Magenta;
                break;
            case ConsoleKey.F5:
                _userColor = ConsoleColor.Blue;
                break;
            case ConsoleKey.F6:
                _userColor = ConsoleColor.Yellow;
                break;

        }

        DoSomething();

        Console.ReadLine();
    }

    private static void DoSomething()
    {
        Console.ForegroundColor = _userColor;
        Console.WriteLine("color choosen");

        Console.ForegroundColor = ConsoleColor.Black;
        Console.BackgroundColor = _userColor;
        Console.WriteLine("flipped it");

    }
} 
```

# android - 旧设备上的 Holo 快速滚动外观

> ID：14042269
> 
> 赞同：8
> 
> 时间：2012-12-26T14:55:51.307
> 
> 标签：android, android-layout, android-theme, android-holo-everywhere, fastscroll

## 关于我的应用

我有一个具有全息外观的应用程序。

对于Honeycomb 之前的设备，我只是向后移植了Holo 主题的一些元素。

CheckBox、RadioButton 可以使用主题、样式和属性...

## 我正在尝试做的事情

我使用[ListView](https://developer.android.com/reference/android/widget/ListView.html)来显示很多项目。我想在我的[ListView](https://developer.android.com/reference/android/widget/ListView.html)上启用快速滚动，并且希望它具有全息外观。

## 我的问题

我在将快速滚动[Drawable](https://developer.android.com/reference/android/graphics/drawable/Drawable.html)集成到我的应用程序主题中时遇到了一些困难。

## 到目前为止我尝试过的

1.  **寻找执行此操作的库。** [HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)很有希望，但没有处理。

2.  **尝试自己做：**

我刚刚添加了那些drawable：

![在此处输入图像描述](../Images/a91244f67b89c79c0e34b22b1e9fa5c2.png) ![在此处输入图像描述](../Images/e01b91abfa8ac09e54a36f0cf03b385f.png)

然后还添加了这个drawable：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/fastscroll_thumb_pressed_holo" />
    <item android:drawable="@drawable/fastscroll_thumb_default_holo" />
</selector> 
```

在我的中添加了这个**`attrs.xml`**：

```
<attr name="fastScrollThumbDrawable" format="reference" /> 
```

我在我的**`themes.xml`**：

```
<style name="MyTheme">
    <item name="fastScrollThumbDrawable">@drawable/fastscroll_thumb_holo</item>
</style> 
```

此主题已正确设置为我的应用程序**`Manifest.xml`**：

```
android:theme="@style/MyTheme" 
```

请记住，`android:fastScrollThumbDrawable` [不存在 pre-honeycomb](https://developer.android.com/reference/android/R.attr.html#fastScrollTrackDrawable)。

* * *

我希望你能帮我解决这个问题。:)

**更新 ：**

几个小时前， [HoloEverywhere 似乎](https://github.com/ChristopheVersieux/HoloEverywhere)添加了快速滚动支持：

> [https://github.com/ChristopheVersieux/HoloEverywhere/commit/34561e48339bf6a3e0307d2d35fc4c5ac8409310](https://github.com/ChristopheVersieux/HoloEverywhere/commit/34561e48339bf6a3e0307d2d35fc4c5ac8409310)

我会检查一下。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T07:53:37.553

我正在使用，`android:fastScrollThumbDrawable`但我不知道为什么它不起作用，所以在网上搜索我发现[这里](http://www.cnblogs.com/zhuqiang/archive/2013/01/22/2871318.html)有一个硬代码解决方案，我不知道它是否像你需要的那样适用于旧 API，但在我的情况下解决了这个问题。注意我正在使用 API 18 之类的目标和具有 API 17 的设备进行测试。

编码：

```
try {
    Field f = AbsListView.class.getDeclaredField("mFastScroller");
    f.setAccessible(true);
    Object o = f.get(<<your listView here>>);
    f = f.getType().getDeclaredField("mThumbDrawable");
    f.setAccessible(true);
    Drawable drawable = (Drawable) f.get(o);
    drawable = getResources().getDrawable(R.drawable.<<your thumb drawable here can be a selector>>);
    f.set(o, drawable);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:27:26.540

改变这个：

```
<style name="MyTheme">
    <item name="fastScrollThumbDrawable">@drawable/fastscroll_thumb_holo</item>
</style> 
```

对于这样的事情，您似乎在那里忘记了一个属性：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<style name="listviewfastscrollstyle" parent="android:Theme">
    <item name="android:fastScrollTrackDrawable">@drawable/fastscroll_thumb_holo</item>
    <item name="android:fastScrollThumbDrawable">@drawable/fastscroll_thumb_holo</item>
</style>

</resources> 
```

现在它应该可以工作了:)

此致

苹果浏览器

# visual-studio-2012 - 无法使用 IP 地址连接到 IIS Express

> ID：14042271
> 
> 赞同：1
> 
> 时间：2012-12-26T14:55:55.480
> 
> 标签：visual-studio-2012, iis-express

据我了解，VS2012默认自带IIS Express版本。它允许您使用 IP 地址连接到开发站点。目前我可以使用`http://localhost:22222`. 但这不会使用 this `http://xxx.xxx.xxx.xxx:22222`where xxx 只是开发机器的本地 IP 进行连接。我已验证 IIS Express 正在运行并正在使用中。IE 错误是 http 400 错误请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T14:22:00.747

I know you have asked question since a long time. I have an answer to this question at [this link.](https://stackoverflow.com/questions/14881515/vs2012-iis-express-browse-web-site-with-ip-address-rather-than-localhost/14881682#14881682)

Go to your `IISExpress>Config` folder, locate `applicationhost.config`. Change `<bindings>` as below:

```
<bindings>
      <binding protocol="http" bindingInformation="*:1407:YOUR_IP_ADDRESS" />
</bindings> 
```

Before you do this , you will have to register this IP address using `netsh` command as below:

If you’re running Windows 7, pretty much all incoming connections are locked down, so you need to specifically allow incoming connections to your application. First, start an administrative command prompt. Second, run these commands, replacing 192.168.1.11:1234 with whatever IP and port you are using:

```
> netsh http add urlacl url=http://192.168.1.11:1234/ user=everyone 
```

This just tells `http.sys` that it’s ok to talk to this url.

```
> netsh advfirewall firewall add rule name="IISExpressWeb" dir=in protocol=tcp localport=1234 profile=private remoteip=localsubnet action=allow 
```

This adds a rule in the Windows Firewall, allowing incoming connections to port 58938 for computers on your local subnet.More information at [this link](http://johan.driessen.se/posts/Accessing-an-IIS-Express-site-from-a-remote-computer).

**Note:** Be sure to change the bindings of your project only by locationg its name. You can even keep the localhost binding and add a new one , this way you can access same webpage using the given IP address.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T01:10:50.683

对我有用的解决方案是[这个](https://stackoverflow.com/questions/18454751/unable-to-launch-the-iis-express-web-server-error)：

为我解决此问题的一件事是`<bindings>`在 applicationhost.config 文件中为我的站点部分使用以下行：

```
<bindings>
    <binding protocol="http" bindingInformation="*:8099:" />
</bindings> 
```

关键是简单地删除本地主机。不要用星号替换它，不要用 IP 或计算机名称替换它。冒号后留空即可。

这样做之后，我就不需要以管理员身份运行Visual Studio了，我可以自由地将项目属性中的Project Url更改为本地IP或计算机名。然后我设置了端口转发，它可以访问 Internet。

**编辑：**

我发现了另一个对让 IIS Express 正确处理外部请求很重要的怪癖。

如果您以管理员身份运行 Visual Studio/IIS Express，则**不得**使用“netsh http add urlacl ...”命令向 HTTP.SYS 添加预留。这样做会导致 HTTP 503 Service Unavailable 错误。删除您在 URLACL 中所做的任何保留以解决此问题。

如果您**没有**以管理员身份运行 Visual Studio/IIS Express，则**必须**向 URLACL 添加预留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-14T09:30:38.587

## 它位于哪里？应用程序主机.config :)

这里

> %userprofile%\Documents\IISExpress\config 文件夹

或者

> %userprofile%\My Documents\IISExpress\config 文件夹

# algorithm - 在基于平铺地图的游戏中访问圆形平铺的快速算法

> ID：14042272
> 
> 赞同：2
> 
> 时间：2012-12-26T14:56:04.247
> 
> 标签：algorithm, geometry

我需要一个非常快速的算法来访问磁盘中的图块。最后，我不需要完美的光盘，但我确实**需要一个非常快速的**算法。

我知道我可以使用边界方块，并遍历该方块中的所有图块，然后计算`x²+y²<R²`以确定图块是否在圆盘中。在我的情况下，这将非常慢，因为我必须每秒测试数千个圆圈，这意味着数百万个图块，而`x²+y²<R²`对数百万个图块的测试很慢。

我需要一些**快速**的东西，即使它不是很准确（=即使它不是一个完美的光盘，变形）

如果速度足够快，即使是八边形（填充）也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:14:39.520

`x² + y² < R²`→`x² < R² − y²`所以`x ∈ ( −√(R²−y²); +√(R²−y²))`

我认为计算每条线的范围已经足够快了。如果没有，请使用 Bresenham 的算法使其更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:17:02.950

与其遍历所有图块并测试它们是否位于圆形区域中，不如直接进入实际上位于圆中的图块并根据需要添加标志和进程...

使用八边形可能会便宜得多，但是当标题/区域的宽度发生变化时，您会遇到必须计算八边形宽度高度和适当角度的问题。的优点`x^2 + y^2`是一致性。

最后，我建议研究极坐标。`x = rcos(theta)`和`y = r*sin(theta)`。如果将`cos(theta)`和的所有值`sin(theta)`放入一个数组中，程序将跳过必要的三角计算并跳转到直接测试数据。快速谷歌搜索将提供所有必要的极坐标关系。

# html - Monocross/HTML5 与 MonoDroid/MonoTouch/Windows

> ID：14042274
> 
> 赞同：4
> 
> 时间：2012-12-26T14:56:25.603
> 
> 标签：html, xamarin.ios, cross-platform, xamarin.android, monocross

我一直在阅读一些关于 Monocross 的文章，它似乎支持与 ASP.NET MVC 非常相似的模型。它可以使用 HTML5/CSS/Javascript 作为 UI。

最初直接看 MonoDroid 和 MonoTouch，它鼓励开发人员使用设备原生控件进行开发。我说 Monocross 在所有设备上都支持带有 HTTP/GET/POST 的 HTML/CSS/Javascript 是否正确？MonoDroid/MonoTouch 支持一直到 UI 的跨平台开发，但这种方法似乎在理论上得到了 100%（或接近）的代码重用。它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:32:17.737

MonoCross[是 Xamarin 代码之上的一个非常薄的层](https://github.com/MonoCross/MonoCross/tree/master/MonoCross.Touch)。（看到右上角的 Xamarin 贴纸了吗？）
他们提议在不同的实现中重用相同的 MVC 代码，例如 MonoTouch 和 MonoDroid。

![](../Images/ed0af8c8d3c9eb23ddda4dce3d095e3f.png)

抽象出 MVC 适用于小样本，但这些人似乎虔诚地相信 100% 的代码共享——我不赞成这一点。这是一个美丽的概念，但它在现实生活中从未奏效。

制作出色的应用程序很难，但我不认为这很困难，因为数据库技术不同，或者因为您必须为 ASP .NET MVC、MonoTouch 或 MonoDroid 编写类似的类。如果这是软件开发的真正挑战，我们早就在很多年前解决了。

MonoCross 似乎是一种[过早泛化](https://softwareengineering.stackexchange.com/a/51523/3939)的练习——所有程序员都喜欢的东西。
但是**抽象不是免费**的。想想 Eric Gunnerson 的这则轶事：

> 我知道团队滚雪球——他们最终得到了一个“瑞士军刀”组件，用于许多不同的场景。就像许多功能强大的组件一样，它很大、很复杂，并且有很多难以理解的行为。*但开发它对于所涉及的开发人员来说是一个有趣的技术挑战（读作“有趣且对他们的职业有好处”......）*
> 
> 当团队发现一项操作需要大约 4 倍的时间时，问题就出现了。但是由于执行操作的组件的通用性，没有简单的方法来优化它。
> 
> 如果该操作是在不使用“超级组件”的情况下从头开始开发的，则可以采用几种简单的优化方法。但是这些都不适用于通用组件，因为您不能只在一个场景中实现优化——它必须适用于所有场景。你负担不起让它在任何地方都能工作的开发成本，在这种情况下，即使你可以，它也会导致性能在其他情况下倒退。

（重点是我的。）

虽然[MonoCross 开发人员似乎对此充满热情](http://vagabondrev.org/2011/04/20/monocross-the-technology/)，但该项目周围似乎没有社区，而且我找不到基于 iFactr 或 MonoCross 构建的单个应用程序。

话虽如此，我不认为他们提供任何比 MonoTouch 或 MonoDroid 更有价值的东西。
在旁注中，[米格尔同意:-)](http://vagabondrev.files.wordpress.com/2011/07/photo.jpg?w=800)。

# extjs - 如何将数据对齐到视口。现在卡了一段时间

> ID：14042278
> 
> 赞同：1
> 
> 时间：2012-12-26T14:56:45.700
> 
> 标签：extjs, extjs3

团队，

如何将数据对齐到视口。我有两个面板，无法达到预期的效果。我正在使用 extjs 3.4

我面临以下问题：

1.  边框重叠，非常厚。无法从顶部和左侧留下空间。
2.  无法设置高度，它正在扩展到整个页面。
3.  网格和面板宽度应该减少我只有三列

代码。

```
<html>
<head>
<title>Title</title>
<link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
<style type="text/css">
.add24 {
    background-image: url(images/fiber_Cable.jpg) !important;
}
</style>
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext-3.4.0/ext-all.js"></script>
</head>
<body>

<script type="text/javascript">
    Ext.onReady(function() {
        var baseParamsv = {
        "pager":""
        };

        Ext.QuickTips.init();

        var searchFormPanel = new Ext.FormPanel({
            id: 'searchForm'
            ,region:'north'
            ,title:'Heading'
            ,layout:'table'
            ,bodyStyle:'padding:10px;'
            ,height:100
            ,width:200
            ,padding: '5 5 5 5' 
            ,layoutConfig: {columns: 2}
            ,defaults: {ctCls:'padding3'}
        });
        searchFormPanel.add({xtype: 'label', text:'Search User:'});
        searchFormPanel.add({xtype: 'label', text: ''});
        searchFormPanel.add({xtype: 'textfield', id: 'search1', name: 'search1', value: '',enableKeyEvents: true});
        searchFormPanel.add({xtype: 'button', id: 'go', cls: 'spacing3', text: 'Go!', handler:function() {} });

        var gridColumnModel = new Ext.grid.ColumnModel([
        { header: "checked",sortable:true, menuDisabled:true, dataIndex:'checked',width:20,renderer:checkBoxRenderer},
        { header: "username",sortable:true, menuDisabled:true, dataIndex:'username',width:40,renderer:UserNameRenderer},
        { header: "emailid",sortable:true, menuDisabled:true, dataIndex:'emailid',width:30, renderer:emailidRenderer}
    ]);     
    var store = new Ext.data.JsonStore({    
            baseParams:baseParamsv,
            fields: [
                {name:'checked'},
                {name:'username'},
                {name:'emailid'}
            ],
            root:'data',
            totalProperty: 'total',
            url:'data.json',
            id:'offlineDataStoreId' 
    });

    var dataGrid = new Ext.grid.GridPanel({
            colModel:gridColumnModel
            ,region:'center'
            ,store:store
            ,stripeRows:true
            ,viewConfig: { autoFill:true, emptyText : 'No data found to display', forceFit: true, scrollOffset: 2 }
            ,layout:'fit'
            ,listeners: {
                    render: function(){
                        var initParams =  Ext.apply({},baseParamsv);
                        Ext.apply(initParams, {
                             start:0,
                             limit:10
                        });
                        this.store.load({params:initParams});
                    }
                }
        });

    function checkBoxRenderer(val, meta, record, rowIndex, colIndex, offlineStore) {
        return '<input type=checkbox name="check_box" value="'+record.get('emailid')+'">';
    }

    function UserNameRenderer(val, meta, record, rowIndex, colIndex, offlineStore) {
        return val;
    }

    function emailidRenderer(val, meta, record, rowIndex, colIndex, offlineStore) {

        return val;
    }

        var innerPanel = {
        xtype: 'panel',
        id: 'inner-panel',
        layout: 'border',
        region: 'center',
        title:'Heading',
        width:200,
        bodyStyle:'padding:10px;',
        padding: '5 5 5 5' ,
        items :[dataGrid]
        };

         var viewPort = new Ext.Viewport({
            layout: 'border',
            title: 'Ext Layout Browser',
            items:[searchFormPanel,innerPanel],
            bodyStyle:'padding:10px;margin-top:10px',
            renderTo:Ext.getBody()
        });
        viewPort.doLayout();

    });

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:23:13.363

如果您不想使用整个页面，只需使用面板而不是 Viewoprt：

```
var viewPort = new Ext.Panel({
    layout: 'border',
    width: 400,
    height: 300,
    title: 'Ext Layout Browser',
    items:[searchFormPanel,innerPanel],
    bodyStyle:'padding:10px;margin-top:10px',
    renderTo:Ext.getBody()
}); 
```

在这里你可以看到结果：http: [//jsfiddle.net/3CabN/6/](http://jsfiddle.net/3CabN/6/)

# javascript - 如何为 Disqus 添加别名域？

> ID：14042281
> 
> 赞同：5
> 
> 时间：2012-12-26T14:57:13.873
> 
> 标签：javascript, comments, blogs, jekyll, disqus

我有两个网站：

一个是`xxx.ruhoh.com`，另一个是`blog.xxx.com`。实际上它们是相同的站点，唯一不同的是域名。我将代码`disqus`嵌入到页面中。但是，他们的评论系统无法共享。例如，如果我在 发表评论`xxx.ruhoh.com/post1`，则在 看不到该评论`blog.xxx.com/post1`。

有没有人有关于如何在两个域中合并/共享评论系统以进行 disqus 的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:13:58.363

本质上，您要做的是在多个唯一 URL 上加载单个线程。这不是开箱即用的，因为 Disqus 将通过唯一的 URL 识别每个唯一的线程。

您需要做的是在您的 Disqus 代码中添加一个通用`disqus_identifier`和/或javascript 变量。[标识符和其他 javascript 变量在此处](http://help.disqus.com/customer/portal/articles/472099)和[此处](http://help.disqus.com/customer/portal/articles/472098-javascript-configuration-variables)`disqus_url`进行了详细描述。

从上面的示例中，您可能可以提取`/post1`用作两个子域之间的标识符。我们建议设置 a `disqus_url`，即使您使用标识符，因为一个 URL 仍用作通知、小部件等的链接到 URL。因此，您必须选择一个您喜欢我们链接到的子域，并制作确保在博客文章的两个版本上都设置了它。

# c++ - 在每个循环（ cocos2dx ）中，类的成员变量已更改

> ID：14042284
> 
> 赞同：0
> 
> 时间：2012-12-26T14:57:19.410
> 
> 标签：c++, cocos2d-iphone, cocos2d-x, game-development

我在 cocos2dx 程序中声明了一些类，并为它们的成员变量设置了一些值，但是在每次程序循环（CCDirector 的主循环）之后，它们的所有值都被删除了！我希望它类保存它的下一个场景，当场景应该被替换时应该被替换或推送（正如你在代码中看到的，2 秒后，introPage 类调用一个函数“IntoPageDone”并且场景应该被替换）我已经为下一个场景设置了一个名为*nextScene*的变量，但是在每个循环之后，它的值都会变为*NULL*。请帮我解决这个问题，还有一些更好的方法来处理它们的场景和变化吗？很多！

StartingPage 是一个继承自 CCLayerColor 的类。这是*CoCoGui.h*文件：

```
#ifndef _COCOGUI_H_
#define _COCOGUI_H_

#include "StartingPage.h"
#include "IntroPage.h"
using namespace cocos2d;

class CoCoGui : public CCLayerColor{

public:
    CoCoGui();
    virtual ~CoCoGui(void);
    virtual bool init();
    static CCScene* scene();
    CREATE_FUNC(CoCoGui);
private:
    IntroPage * introPage;
    StartingPage * startingPage;
    void onEnterTransitionDidFinish();
};

#endif /* COCOGUI_H */ 
```

这是*CoCoGui.cpp*文件：

```
#include "CoCoGui.h"
#include <iostream>
using namespace std;

CCScene* CoCoGui::scene(){
    CCScene *scene = CCScene::create();

    CoCoGui *layer = CoCoGui::create();

    scene->addChild(layer);

    return scene;
}

CoCoGui::CoCoGui ( )
{
    this->startingPage = new StartingPage ( );
    this->introPage = new IntroPage ( );
}

CoCoGui::~CoCoGui(void)
{
    delete introPage;
    delete startingPage;
}

bool CoCoGui::init ( ){
    if ( !CCLayerColor::initWithColor ( ccc4 (100,100,100,255) ) ){
        return false;
    }
    return true;
}

void CoCoGui::onEnterTransitionDidFinish ( ){
    this->introPage->setNextScene ( StartingPage::scene( ) );
    CCScene * scene = NULL;
    scene = IntroPage::scene();
    CCTransitionFade * trans = CCTransitionFade::create( 0.4f, scene , ccBLACK);
    CCDirector::sharedDirector()->pushScene(trans);
    cout << "step" << endl;
} 
```

这是*introPage.h*文件：

```
#ifndef INTROPAGE_H_
#define INTROPAGE_H_

#include "cocos2d.h"
#include "StartingPage.h"

using namespace cocos2d;

class IntroPage: public CCLayerColor {
public:
    IntroPage( CCScene * nextScene );
    IntroPage ( );
    virtual ~IntroPage();
    static CCScene* scene();
    bool init();
    void intoPageDone();
    CREATE_FUNC(IntroPage);
    CC_SYNTHESIZE_READONLY(CCLabelTTF*, _label, Label);
    CCScene * getNextScene( );
    void setNextScene ( CCScene * nScene );
private:
    CCScene * nextScene;
};

#endif /* INTROPAGE_H_ */ 
```

还有*IntroPage.cpp*：

```
#include "IntroPage.h"

IntroPage::IntroPage( CCScene * nextScene ) {
    this->introPageDone = false;
    this->setNextScene ( nextScene );
}

IntroPage::IntroPage( ){
}

IntroPage::~IntroPage() {

}

void IntroPage::setNextScene ( CCScene * nScene ){
    this->nextScene = nScene;
}

CCScene* IntroPage::scene(){
    CCScene *scene = CCScene::create();

    IntroPage *layer = IntroPage::create();

    scene->addChild(layer);

    return scene;
}

bool IntroPage::init() {
    if (CCLayerColor::initWithColor (ccc4(0, 0, 0, 255) )) {
        this->runAction(
                CCSequence::actions(CCDelayTime::actionWithDuration(2),
                        CCCallFunc::actionWithTarget(this,
                                callfunc_selector(IntroPage::intoPageDone)),
                        NULL));
        return true;
    }
    return false;
}

void IntroPage::intoPageDone() {
    this->introPageDone = true;
    CCDirector::sharedDirector( )->popScene( );
    CCDirector::sharedDirector( )->pushScene( this->nextScene );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:19:37.147

终于我找到了答案！我们应该使用静态变量，这样它们就不会在主循环后被破坏

# ruby - Resque - 可以用来执行 Rake 任务吗？

> ID：14042285
> 
> 赞同：2
> 
> 时间：2012-12-26T14:57:23.703
> 
> 标签：ruby, cucumber, rake, resque

我正在研究使用 Resque 将 rake 任务存储为作业并稍后在多个工作人员之间执行它们的可能性。这可能吗？我已经阅读了 redis+resque 的文档，并尝试搜索这样做的人的示例，但没有成功。

我想作为作业执行的 rake 任务会触发 cucumber+selenium 来执行一些 Web 自动化测试，这需要一些时间才能完成。

提前致谢！罗德里戈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:42:20.987

正如 Amar 所说，使用调用工作得很好。

# sql-server - 如何在转换数据类型时复制 DataTable？

> ID：14042286
> 
> 赞同：0
> 
> 时间：2012-12-26T14:57:27.500
> 
> 标签：sql-server, vb.net, datatable

我有一个 DataTable 填充以下列，`UPC`, `NUMBER`, `DESCRIPTION`, `BRAND`, `UOM`, `GROUP`, `TOTAL_DOLLARS`, `TOTAL_UNITS`, 和`DATE`。它们都是`String`除 之外的类型`Date`，它已经是 DateTime 格式。

我想要么——

1.  （理想情况下）将此 DataTable 写入 SQL Server 数据库表
2.  将此数据表复制到另一个数据表

--同时将列中的所有值转换为 并将`TOTAL_DOLLARS`列中的`Decimal`所有值转换`TOTAL_UNITS`为`Int32`. 请注意，没有空值，所以这不应该是一个问题。

这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:03:30.920

如果可以在没有额外机会的情况下转换值：

```
Select UPC, NUMBER, DESCRIPTION, BRAND, UOM, [GROUP], Cast(TOTAL_DOLLARS as Decimal(38,17)) as TOTAL_DOLLARS, Cast(TOTAL_UNITS as int) as TOTAL_UNITS, DATE
Into NewTable
From OldTable 
```

# html - 有哪些免费的客户端库可以帮助开发带有 HTML5 Canvas 元素的游戏？

> ID：14042288
> 
> 赞同：0
> 
> 时间：2012-12-26T14:57:38.010
> 
> 标签：html, html5-canvas, game-engine, game-physics

我打算用 HTML5 Canvas 开发一个游戏。由于使用原生 JavaScript 处理画布对于游戏开发来说非常困难，我宁愿采用任何免费且良好的客户端库和良好的教程。

我已经开始使用[CAAT](http://labs.hyperandroid.com/animation)工作，但发现它有很多教程。我找到了[Cocos2d-x HTML5](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Html5)，但我又遇到了同样的问题。

任何人都可以向我推荐具有良好教程帮助的好图书馆吗？

PS :: 我的游戏包含复杂的物理运算，所以需要用到Box2D。如果库已将 Box2D 与其集成并具有良好的集成教程，这将很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:34:59.540

[cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph)可以与 Box2D 一起使用。我们已经为篮球比赛做过了。

示例页面还没有包含 Box2D 示例，但是，由于我是框架的设计者，我可以通过向您发送代码片段来帮助您。

查看 cgSceneGraph[示例页面](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html)( [http://gwennaelbuchet.github.com/cgSceneGraph/examples.html](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html) )。

无论如何，如果您需要，请随时询问更多示例或教程。我很乐意帮助你。

# python - TypeError: 不支持的操作数类型 -: 'int' 和 'list'

> ID：14042291
> 
> 赞同：9
> 
> 时间：2012-12-26T14:57:44.873
> 
> 标签：python, list, int, typeerror

[我正在尝试在 python 中创建一个程序，它会告诉您使用 Zeller 算法http://en.wikipedia.org/wiki/Zeller%27s_congruence](http://en.wikipedia.org/wiki/Zeller%27s_congruence)出生的星期几，但它给了我这个错误

> TypeError: 不支持的操作数类型 -: 'int' 和 'list'

这是为什么？

```
date = raw_input ("Introduce here the day, month and year you were born like this: DDMMYYYY")

if date.isdigit() and len(date) == 8:
    day = date[0:2]
    month = date[2:4]
    year = date[4:8]
    day = int(day)
    month = int(month)
    year = int(year)
    result = (day + (month + 1) * 2.6, + year % 100 + (year % 100) / 4 - 2 * [year / 100]) % 7 
```

（这是我自己创建的第一个程序，请善待；））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:12:00.750

@mellamokb 和评论已经回答了您的直接问题的答案...

但是，我要指出 Python 已经是这个内置的，并且会更容易：

```
from datetime import datetime
d = datetime.strptime('1312981', '%d%m%Y')
# datetime(1981, 12, 13, 0, 0) 
```

然后，您可以更轻松地对实际上是`datetime`而不是强制字符串的对象执行计算...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T15:01:01.153

我认为`2 * [year / 100]`应该是括号而不是方括号，否则表明您要创建一个单元素列表：

```
(year % 100) / 4 - 2 * (year / 100))
                       ^          ^ change [] to () 
```

# java - 如何使用 Java JAX-RPC 添加 SOAP 标头？

> ID：14042295
> 
> 赞同：4
> 
> 时间：2012-12-26T14:58:16.387
> 
> 标签：java, web-services, jax-rpc

我有一个这样的 SOAP 请求：

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ch="urn://mfots.com/xmlmessaging/CH" xmlns:oas="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<soapenv:Header>
<ch:MFprofileMnt>
<ch:myID>1458</ch:myID>
<ch:bigID>raptool</ch:bigID>
<ch:matID>5689</ch:matID>
</ch:MFprofileMnt> 
```

现在我在java中创建了这样的请求：

```
 Name headerContextName = soapEnvelope.createName("MFprofileMnt", "ch","");
        SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(headerContextName);
        // mustUnderstand attribute is used to indicate
        // whether the header entry is mandatory or optional for the
        // recipient to process.
        soapHeaderElement.setMustUnderstand(true);
        //Now set the attribute children
        // create the first child element and set the value
        SOAPElement element1 = soapHeaderElement.addChildElement("myID", "ch");
        element1.setValue("1458");
        //create the second child element and set the value
        SOAPElement element2 = soapHeaderElement.addChildElement("bigID", "ch");
        element2.setValue("raptool");
        //create the third child element and set the value
        SOAPElement element3 = soapHeaderElement.addChildElement("matID", "ch");
        element3.setValue("5689"); 
```

但是，当我运行程序时，我不断收到这些错误：

```
org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.
faultActor: null
faultDetail: 
```

我真的被困在这里。请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:03:51.857

我做了很多研究，发现了我的错误。我没有传递安全命名空间 URL。所以而不是：

```
Name headerContextName = soapEnvelope.createName("MFprofileMnt", "ch",""); 
```

我给了它：

```
Name headerContextName = soapEnvelope.createName("MFprofileMnt", "ch",SOAP_Security_Namespace_URL); 
```

瞧，它开始工作并且没有名称空间错误。希望这可以帮助遇到类似问题的其他人。

# ios - 如何使我的 UIControl 子类成为以编程方式创建的 UIElements 的超类？

> ID：14042296
> 
> 赞同：0
> 
> 时间：2012-12-26T14:58:19.233
> 
> 标签：ios, objective-c, uielement, uicontrol

在我的应用程序中，我想与`NSMutableDictionary`所有`UIElements`（`UIButton`、、`UILable`等）相关联，我可以通过对每个元素进行子类化来轻松实现这一点，但我只想知道我是否可以创建自己的`UIControl`子类 - 具有类型的属性`NSMutableDictionary`- 作为所有元素的超类无论如何以编程方式创建`UIElement`s，这样我就可以减少子类的数量。

这里像这样

```
@interface UIControl : MyControls
{

}
@property(nonatomic,retain) NSMutableDictionary *details;
@end 
```

并`MyControls`作为所有以编程方式创建的 UIElements 的超类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:01:10.510

您可以做到这一点，不是通过子类化，而是通过将自己的属性和方法添加到`UIControl`自身（ 、 等的超类`UIButton`）`UILabel`。然后，这些将被您实例化的任何标准按钮、标签等继承。[Objective-C 允许您使用Categories](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW1)非常轻松地添加自己的方法。但是，您不能通过类别添加实例变量。为此，您需要使用[Objective-C 运行时参考中记录的关联参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)。

有一个很好的教程关于如何做到这一点[here](http://www.davidhamrick.com/2012/02/12/Adding-Properties-to-an-Objective-C-Category.html)。

顺便说一句，我不一定不同意 inturbidus。但是，如果您确定要走这条路，那就是这样做的方式。

# d - 无法覆盖结构的 opCmp 和 opEquals

> ID：14042298
> 
> 赞同：3
> 
> 时间：2012-12-26T14:58:27.370
> 
> 标签：d, dmd

来自 D 的[文档](http://dlang.org/operatoroverloading.html#equals)：

> 或者，您可以使用 auto ref 参数声明单个模板化 opEquals 函数：
> 
> ```
> bool opEquals()(auto ref S s) { ... } 
> ```
> 
> <...>
> 
> 如果结构声明一个 opCmp 成员函数，它应该遵循以下形式：
> 
> ```
> int opCmp(ref const S s) const { ... } 
> ```

那么为什么下面的代码编译失败呢？

```
import std.stdio;
import std.conv;

struct Fgs {
    int v;
    this(int iv) {
        v = iv;
    }

    bool opEquals()(auto ref Fgs another) {
        return v == another.v;
    }

    int opCmp(ref const Fgs another) const {
        if (this == another) {
            return 0;
        } else if (this.v < another.v) {
            return -1;
        } else {
            return 1;
        }
    }
}

unittest {
    auto a = Fgs(42);
    auto b = Fgs(10);
    assert(a != b);
    assert(a > b);
} 
```

这是 DMD 的输出：

```
/home/mfag/lighthouse/testss.d(15): Error: template testss.Fgs.opEquals does not match any function template declaration
/home/mfag/lighthouse/testss.d(10): Error: template testss.Fgs.opEquals() cannot deduce template function from argument types !()(const(Fgs)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:11:58.333

`const`写的时候没有考虑到。这应该有效：

```
bool opEquals()(auto const ref Fgs another) const 
```

但这是语言的一个领域，它有点处于不断变化的状态，`auto ref`将来可能会在非模板上使用。

# java - 两个属性视图

> ID：14042299
> 
> 赞同：1
> 
> 时间：2012-12-26T14:58:31.873
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

Eclipse RCP 应用程序中是否可以有两个属性视图？我有两个单独的插件，每个插件负责它自己的属性视图。我怎样才能同时显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:03:12.933

不确定这是否是您需要的，但在属性视图的右上角是一个小视图菜单。单击此菜单后，可以选择“新属性视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:40:28.353

您的插件贡献的每个属性视图都将添加到已经提供的现有属性视图中。

我认为任何一个插件可以贡献的属性贡献数量没有任何限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T02:49:58.843

为方便起见，您始终可以创建自己的辅助“属性视图”来显示第二个窗口的属性。这只是您自己的视图，恰好看起来和行为类似于属性视图，但不是包含的视图。

在尝试以编程方式区分它们或管理工作台/窗口选择时，使用包含属性视图的两个实例会让您头疼。

# c++ - 取回失败的输出

> ID：14042302
> 
> 赞同：1
> 
> 时间：2012-12-26T14:58:48.740
> 
> 标签：c++, c

我正在尝试运行脚本并在控制台中输出结果。它有效，但有一个

我现在面临的小问题。如果“脚本”文件写入/编码错误，我会得到如下输出：

```
 syntax error, unexpected $undefined, expecting $end puts 
```

这很好，它告诉我脚本文件中的代码有问题，但在我的代码行中：

```
printf("%s", path); 
```

它不会打印给我，我希望它打印出来，这样我就可以在屏幕上显示它。请帮帮我

```
 fp = popen("our script...is here", "r");
    if (fp == NULL)
        /* Handle error */;

    while (fgets(path, PATH_MAX, fp) != NULL)
        printf("%s", path);

    status = pclose(fp); 
```

Ps：只是为了更清楚，我使用的是 xcode，不介意 C 或 C++ 中的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:05:45.153

你必须关心标准错误 -`popen()`只处理标准输出：

> 相反，从“打开的”流中读取命令的标准输出，

shell 错误将打印到 stderr - popen() 无法处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:12:40.797

默认情况下`fgets()`仅从流的标准输出中读取。要捕获`stderr`，您可以简单地将其重定向到`stdout`：

```
 fp = popen("./script 2>&1", "r"); 
```

现在 stdout 和 stderr 都将转到您的 C 代码可以读取的 stdout。

请注意，一旦您按照上述方式进行了重定向，就无法区分 stdout 和 stderr。

# javascript - Javascript方法执行和触发事件

> ID：14042303
> 
> 赞同：0
> 
> 时间：2012-12-26T14:58:55.510
> 
> 标签：javascript, jquery, methods, jquery-events, eventtrigger

我很难清除一个概念；说我有以下代码片段：

```
$('a.classA').on('click', function(){
  // something do here
});

$('a.classB').on('click', function(){
  // something do here
  $('a.classA').trigger('click');
  // rest of the code
}); 
```

我们知道 Javascript 是按顺序执行的。那么当方法对应于正在执行的`click`事件时，那么事件`a.classB`的编程触发将暂停当前方法的执行，而当事件结束时，它将执行其余的代码？或者该方法将在不同的线程或其他东西中执行；虽然线程在 Javascript 中不可用。`click``a.classA``click``a.classA`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:02:38.990

您可以`setTimeout`用来制作*异步*触发器：

```
$('a.classB').on('click', function(){
  // something do here
  setTimeout(function(){
  $('a.classA').trigger('click');
  },1);
  // rest of the code       
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:03:15.910

触发“点击”是一个同步操作，所以它实际上就像一个函数调用。如果您希望在当前事件循环完成后进行操作，您可以使用具有零毫秒延迟的超时。

# html - 垂直对齐 div 中的文本，单行和多行

> ID：14042305
> 
> 赞同：0
> 
> 时间：2012-12-26T14:59:05.727
> 
> 标签：html, css

我想在文本适合一行时和文本适合两行时垂直对齐文本。这里有一个**[jsFiddle](http://jsfiddle.net/NgD4W/)**。

![在此处输入图像描述](../Images/45694b97cb28ed765e6b03a9be619d63.png)

假设我的 HTML 如下所示：

```
<div class="Container">
   <div class="SomeClass">test text</div>
   <div class="SomeClass">some very very long text</div>  // this text is cut
</div>​ 
```

我的 CSS 看起来像这样：

```
.Container{
    padding:3px 0px 6px 0px;
    height:30px;
    margin:30px 30px;}

.SomeClass{
    height:30px;
    float:left;
    width:100px;
    overflow:hidden;
    border:1px solid black;
    text-align:center;
    font-family:"Trebuchet MS";
    font-weight:bold;
    font-size:13px;
    line-height:28px;}​ 
```

目前，我正在使用该`line-height`属性：我将其设置为容器的高度，并且垂直对齐文本。问题是当文本适合 2 行时，这不再起作用。请注意，这些`.Container`项目必须具有一定的高度/宽度并留下`overflow:hidden;`

如果您有任何建议，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:03:42.173

首先我不明白这个

> 请注意， .Container 项目必须具有一定的高度并留下溢出：隐藏；

如果你给出一个固定的高度，我相信它*不会适合*那里的 2 行......

关于答案，您可以使用`display: table-cell`、使用和`vertical-align: middle;`删除`float: left;``.SomeClass`

[**演示**](http://jsfiddle.net/NgD4W/1/)

CSS（当然你可以玩高度）

```
.Container{
    padding: 3px 0px 6px 0px;
    margin:30px 30px;
    height: 200px;
}

.SomeClass{
    width:100px;
    height: 200px;
    border:1px solid black;
    text-align:center;
    font-family: "Trebuchet MS";
    font-weight: bold;
    font-size: 13px;
    display: table-cell;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:05:56.167

如果不使用 CSS3 或表格，就无法垂直对齐多行文本。

Line-height 定义了文本的高度，是垂直对齐单行文本的好方法。多行文本也可以使用 line-height 对齐，但是这一次，你必须小心进行正确的边距计算，因为 line-height 是 2 行的两倍，3 行的三倍，等等。

我建议使用 CSS3 或使用 php 或其他服务器端语言来强制换行 '
'，然后使用适当的 css 垂直偏移文本。

# delphi - Delphi 到达 DBGrid 的行

> ID：14042306
> 
> 赞同：2
> 
> 时间：2012-12-26T14:59:13.337
> 
> 标签：delphi, rows, dbgrid

所以我有一个 TDBGrid，我的目的是搜索 DBGrid 的 Fieldname 并将其与我的 Edit 的 Text 属性进行比较，如果它们相等，

我想将找到匹配项的整个列写入 ListBox。

使用带有 fieldcount 的 for 循环，我可以比较 FieldName，但由于没有可以使用的 rows 或 rowcount 属性，我不知道如何获得整列的索引。

```
for i:=0 to DBGrid1.FieldCount-1 do
begin
 if DBGrid1.Fields[i].FieldName=Edit1.Text then
   for j:=1 to DBGrid1.RowCount-1 do
     ListBox1.Items.Add(DBGrid1.Rows.Fields[i].Index.AsString);
end; 
```

这是我试图做的假想代码......

PS：我还在用Delphi 7，（教育原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:11:26.777

您不能直接从 DbGrid 获取行值。相反，您必须浏览用于提供 DbGrid 的数据集。

此示例假设您使用的是`TClientDataSet`.

```
for i := 0 to DBGrid1.FieldCount - 1 do
begin
  if DBGrid1.Fields[i].FieldName = Edit1.Text then
  begin
    ClientDataSet1.DisableControls;
    try
      ClientDataSet1.First();
      while (not ClientDataSet1.Eof) do
      begin
        ListBox1.Items.Add(ClientDataSet1.FieldByName(Edit1.Text).AsString);
        ClientDataSet1.Next();
      end;
    finally
      ClientDataSet1.EnableControls;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:15:02.423

至于 DBGrid 只显示数据的摘录，恕我直言，您应该

*   获取数据集的书签
*   禁用控件
*   首先使用，而不是 eof 与您的数据集一起使用，将 Dataset.FieldbyName(Edit1.text).asString 添加到您的列表中
*   转到书签
*   启用控件

# vim - 如何区分vim脚本中第一个创建的窗口？

> ID：14042308
> 
> 赞同：2
> 
> 时间：2012-12-26T14:59:18.210
> 
> 标签：vim

以更精确的方式问：是否有一个函数像 一样工作`winnr()`，但为每个窗口返回一个不变的值？

我正在尝试使用热键在我的 vim 中的缓冲区之间切换。一切都很好。但是当我将光标放在另一个像 NERDTree 这样的窗口中并按下热键时，NERDTree 就消失了，它的窗口切换到另一个缓冲区。为了解决这个问题，我认为只有当光标位于使用 vim 打开的第一个窗口中时，我才应该启用热键。有没有类似`is_first_window()`vim脚本的功能？</p>

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:52:21.277

一个窗口可以随时显示任何缓冲区；缓冲区没有（永久）附加到特定窗口，因此没有这样的唯一 ID。

您想要的是一种将特殊窗口（如显示 NERDTree 的窗口）与常规缓冲区区分开来的方法。这样做的方法是通过缓冲区名称，`bufname('%')`如 romainl 所建议的那样，通过 获得。您的映射可以包含特殊缓冲区的已知名称列表（如`NERD_tree_1`），或者您可以尝试一般地检查特殊窗口，因为它们中的大多数都有`&buftype == 'nofile'`. 许多插件也有自己的特殊标记变量，例如 NERDTree 允许像这样检查它的窗口：

```
echo exists("t:NERDTreeBufName") && bufwinnr(t:NERDTreeBufName) == winnr() 
```

# telerik - 在 Telerik 树视图中添加节点

> ID：14042312
> 
> 赞同：0
> 
> 时间：2012-12-26T15:00:31.517
> 
> 标签：telerik, treeview, radtreeview

我需要在 radtreeview 中添加 treenode 类型的节点，但这不起作用，需要帮助

```
TreeNode result = new TreeNode(path);
this.radTreeView1.Nodes.Add(result); 
```

我需要给出treenode类型参数，而它接受字符串类型，而对于简单的treeview同样适用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T16:00:18.657

为了将树节点添加到 RadTreeView，它必须是 RadTreeNode 类型，是的，它还接受字符串作为文本，并且它还有另一个接受文本和值及以下的构造函数：

```
RadTreeNode result=new RadTreeNode(path);// that would be the Text of the Node 
```

或者//

`RadTreeNode result=new RadTreeNode(path,"value");`// 这个构造函数接受第一个参数和节点文本，第二个作为节点值

问候

# powershell - 检查数据是否连续

> ID：14042313
> 
> 赞同：0
> 
> 时间：2012-12-26T15:01:00.420
> 
> 标签：powershell, filesystems, directory

每小时数据都会进入我的目录树的每个文件夹。我需要检查它是否每小时都来，或者是否有任何中断。（例如，2-3 小时内没有数据进入。）

我正在尝试编写一个 PowerShell 脚本来检查`LastWriteTime`每个文件夹，但它可以解决有间隙的问题。如果我早上检查日志，我会发现如果一些数据在一小时前进入文件夹，但在几个小时前不存在，那么一切正常。

所以恕我直言`LastWriteTime`不适合它。

子文件夹也有问题。我只需要检查每个目录树中的最后一个文件夹。我不知道如何删除任何以前的文件夹，例如：

```
Z:\temp #need to drop
Z:\temp\foo #need to drop
Z:\temp\foo\1 #need to check 
```

我曾尝试编写一个检查 的脚本`LastAccessTime`，但它会引发错误：

> 表达式只允许作为管道的第一个元素。

脚本如下：

```
$rootdir = "Z:\SatData\SatImages\nonprojected\"
$timedec1 = (Get-date).AddHours(-1)
$timedec2 = (Get-date).AddHours(-2)
$timedec3 = (Get-date).AddHours(-3)
$timedec4 = (Get-date).AddHours(-4)

$dir1 = get-childitem $rootdir –recurse | ?{ $_.PSIsContainer } | Select-Object FullName | where-object {$_.lastwritetime -lt $timedec1} | $_.LastWriteTime -gt $timedec4 -and $_.LastWriteTime -lt $timedec3

$dir1 
```

但正如我之前所说，它并不能解决问题。

- 主要问题正是关于检查连续数据收集。我会做 dir tree bu 手，但我需要检查数据是否每小时都进入文件夹，或者是否有几个小时没有数据......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:35:48.703

您可以尝试将 powershell 脚本设置为在 Windows 调度程序中运行（每小时运行一次）。这样，脚本只需检查过去一小时内是否有任何数据到达。

# java - 当只有子类实现可序列化时，序列化如何工作

> ID：14042319
> 
> 赞同：26
> 
> 时间：2012-12-26T15:02:20.720
> 
> 标签：java, inheritance, serialization, deserialization, notserializableexception

**只有**子类实现了`Serializable`接口。

```
import java.io.*;

public class NewClass1{

    private int i;
    NewClass1(){
    i=10;
    }
    int getVal() {
        return i;
    }
    void setVal(int i) {
        this.i=i;
    }
}

class MyClass extends NewClass1 implements Serializable{

    private String s;
    private NewClass1 n;

    MyClass(String s) {
        this.s = s;
        setVal(20);
    }

    public String toString() {
        return s + " " + getVal();
    }

    public static void main(String args[]) {
        MyClass m = new MyClass("Serial");
        try {
            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("serial.txt"));
            oos.writeObject(m); //writing current state
            oos.flush();
            oos.close();
            System.out.print(m); // display current state object value
        } catch (IOException e) {
            System.out.print(e);
        }
        try {
            ObjectInputStream ois = new ObjectInputStream(new FileInputStream("serial.txt"));
            MyClass o = (MyClass) ois.readObject(); // reading saved object
            ois.close();
            System.out.print(o); // display saved object state
        } catch (Exception e) {
            System.out.print(e);
        }
    }
} 
```

我在这里注意到的一件事是，父类没有序列化。那么，为什么它`NotSerializableException`确实没有抛出它正在显示以下

**输出**

```
Serial 20
Serial 10 
```

此外，输出与`Serialization`和不同`De-serialization`。我只知道，是因为父类没有实现`Serializable`。但是，如果有人向我解释，对象序列化和反序列化期间会发生什么。它如何改变价值？我无法弄清楚，我也在我的程序中使用了注释。所以，如果我在任何时候错了，请告诉我。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-26T15:11:05.557

根据[Serializable javadoc](https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html)

> 在反序列化过程中，不可序列化类的字段将使用类的公共或受保护的无参数构造函数进行初始化。可序列化的子类必须可以访问无参数构造函数。可序列化子类的字段将从流中恢复。

此外，仅当被序列化的类不可序列化时才会引发序列化异常。拥有不可序列化的父母很好（只要他们有一个无参数的构造函数）。对象本身不是可序列化的，并且一切都扩展了它。上面的引用还解释了为什么您会为 value 字段获得不同的值 - 父类的无参数构造函数已设置，它将 value 字段设置为 10 - 该字段属于（不可序列化的）父级，因此它的值不是写入/读取流。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T15:12:27.213

如果您的 MyClass 持有对不可序列化类对象的引用，您将在运行时获得 NotSerializable 异常。要进行测试，请修改 MyClass，使其包含对 NewClass1 对象的引用。如果你再次运行它会抛出一个异常。

反序列化本质上是创建可序列化类的实例并恢复其属性。在此过程中，不调用可序列化类的构造函数。而是调用第一个不可序列化超类的无参数构造函数。

在您的情况下，NewClass1 的无参数构造函数将 10 分配给其实例变量 i。因此，在反序列化期间，它打印的是 10 而不是 20。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:09:23.363

我还没有测试过，但是你会得到一个`NotSerializableException`if 序列化基类的实例。当您的类包含一些不是`Serializable`.

意味着如果您创建一个对象`NewClass1 nc1 = new NewClass1();`并尝试序列化 obj nc1，您将获得所需的异常。

# list - Prolog - 为什么变量没有被绑定？

> ID：14042320
> 
> 赞同：2
> 
> 时间：2012-12-26T15:02:22.573
> 
> 标签：list, prolog

我定义了一个目标 lowerpartition/3 如下：

```
lowerpartition(X,P,Z) :- var(Z),!,lowerpartition(X,P,[]).
lowerpartition([],_,_).
lowerpartition([X|Xs],P,Z) :- X=<P, lowerpartition(Xs,P,[X|Z]).
lowerpartition([X|Xs],P,Z) :- X>P, lowerpartition(Xs,P,Z). 
```

当我打电话时

```
lowerpartition([1,2,3,4,5],3,X). 
```

我希望 X 绑定到列表 [3,2,1]，但 Prolog 只返回 false。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:24:43.460

您似乎正在将基于累加器的方法与基于堆栈的方法混合在一起。你的第一个条款：

```
lowerpartition(X,P,Z) :- var(Z),!,lowerpartition(X,P,[]). 
```

将`Z`保持未实例化，在检查它是一个变量后不使用它，因此它不会被统一......

试试这个：

```
lowerpartition([], _, []).
lowerpartition([X|Xs], P, [X|Zs]):-
  X =< P, lowerpartition(Xs, P, Zs).
lowerpartition([X|Xs], P, Zs):-
  X > P, lowerpartition(Xs, P, Zs). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T15:23:31.167

因为您在第一个子句中使用了 prolog 无法统一的谓词。

```
lowerpartition(X,P,Z) :- var(Z),
                         !,
                         lowerpartition(X,P,[]). % here is what prolog cant unify 
```

对代码稍作修改：

```
lowerpartition(X,P,Z) :- var(Z),lowerpartition_1(X,P,Z),!. % note the position of cut aswell

lowerpartition_1([],_,[]).
lowerpartition_1([X|Xs],P,[X|Z]) :- X=<P, lowerpartition_1(Xs,P,Z).
lowerpartition_1([X|Xs],P,Z) :- X>P, lowerpartition_1(Xs,P,Z). 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T03:43:05.613

这是一个基于 DCG 的解决方案：我的简单测试返回与 gusbro 解决方案相同的结果。

```
lowerpartition(P), [X] --> [X], {X=<P}, lowerpartition(P), !.
lowerpartition(P) --> [X], {X>P}, lowerpartition(P).
lowerpartition(_) --> []. 
```

这是如何调用它：

```
?- phrase(lowerpartition(3), [1,2,3,4,5,3,2,6,7], X).
X = [1, 2, 3, 3, 2]. 
```

但是如果你使用的是带有 lìbrary( [apply](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) ) 的 Prolog，那么

```
lowerpartition(Xs, P, Rs) :- exclude(compare(<, P), Xs, Rs). 
```

返回与上面相同的结果

# ember.js - EmberJs：组件模板

> ID：14042322
> 
> 赞同：1
> 
> 时间：2012-12-26T15:02:29.890
> 
> 标签：ember.js

我尝试从[http://www.eyecon.ro/bootstrap-colorpicker/](http://www.eyecon.ro/bootstrap-colorpicker/)
包装一个 colorPicker 组件 我需要用视图的“值”属性填充模板的“背景颜色 css 属性”......我已尝试设置 {{value}} 但它不起作用...

有什么建议吗？

JavaScript：

```
App.ColorPicker = Em.View.extend({
      classNames: 'input-append color',
      attributeBindings: ['name', 'value'],
      value: '',
      template: Ember.Handlebars.compile('{{view Ember.TextField valueBinding="this.value"}}<span class="add-on"><i style="background-color: {{value}}"></i></span>'),
      didInsertElement: function() {
            $('#backgroundColor').colorpicker({format: "rgb"});
      }
    })

; 
```

html:

```
{{view App.ColorPicker placeholder="Background color" name="backgroundColor" valueBinding="App.controller" classNames="input-large" id="backgroundColor"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:30:39.350

您需要查看`{{bindAttr}}`助手。[这里](http://www.emberist.com/2012/04/06/bind-and-bindattr.html)有一篇旧但很好的帖子

基本上，您不能只将绑定值放入 HTML 标记中，因为它会插入包装脚本标记并破坏所有内容。

您正在寻找的是：

```
App.ColorPicker = Em.View.extend({
  classNames: 'input-append color',
  attributeBindings: ['name', 'value'],
  value: '',
  template: Ember.Handlebars.compile('{{view Ember.TextField valueBinding="this.value"}}<span class="add-on"><i {{bindAttr style="view.iStyle"}}></i></span>'),
  iStyle: function() {
    return "background-color:" + this.get('value');
  }.property('value'),
  didInsertElement: function() {
    $('#backgroundColor').colorpicker({format: "rgb"});
  }
}); 
```

# perl - 舞者：如何在 2 个 POST 之间共享数据并等待响应而不阻塞

> ID：14042330
> 
> 赞同：2
> 
> 时间：2012-12-26T15:03:12.080
> 
> 标签：perl, dancer编写的, 休息, , , json, redis, 高可用性, perl, scalability, high-availability, dancer, poe

我在虚拟机上有一个用[perl](/questions/tagged/perl "show questions tagged 'perl'") [dancer编写的](/questions/tagged/dancer "show questions tagged 'dancer'")[休息](/questions/tagged/rest "显示标记为“休息”的问题")服务器，这是工作流程：

*   客户在路由中发布一些[json](/questions/tagged/json "显示标记为“json”的问题")内容`/post_wait`：POST 应该等待业务处理返回结果
*   请求由另一个 VM 处理（通信由[POE + IKC](http://poe.perl.org/)处理）
*   报告应通过路由返回给服务器`/report`使用会话 ID 标识的客户`REST`

**舞者代码：（这就是我到目前为止所尝试的）**

```
package var;
use Data::Dumper;
use Dancer ':syntax';
use JSON::XS;

my $session = {};

# curl -H 'Content-Type: application/json' -X POST -d '{"id":22}' http://127.0.0.1:3000/post_wait
post '/post_wait' => sub {
    my $json = request->body;
    my $h = decode_json $json;
    my $id = $h->{id};
    until (exists $session->{$id}->{report}) {
        sleep 1;
        print STDERR ".";
    }

    return Dumper $session;
};

# curl -H 'Content-Type: application/json' -X POST -d '{"foobar":"xxxx"}' http://127.0.0.1:3000/report
post '/report' => sub {
    my $json = request->body;
    my $h = decode_json $json;
    my $id = $h->{id};
    $session->{$id}->{report} = $h;
    return "OK\n";
};

true; 
```

**问题是这段代码挂起，因为我让父进程休眠。**

也许我应该使用：

*   [用POE-Component-Server-REST](https://github.com/jstebens/POE-Component-Server-REST.git)重写它？
*   [Dancer::Plugin::Async](http://search.cpan.org/~mstplbg/Dancer-Plugin-Async-0.001/lib/Dancer/Plugin/Async.pm)模块 ? 但我可以避免使用这个吗？（有一些[技术限制](http://search.cpan.org/~mstplbg/Dancer-Plugin-Async-0.001/lib/Dancer/Plugin/Async.pm#PROBLEMS)）...
*   另一个脚本作为子进程？
*   像[redis](/questions/tagged/redis "显示标记为“redis”的问题")队列这样的数据库`BLPOP`用于出队？（这需要一些子流程代码）
*   [舞者::会议](https://metacpan.org/module/Dancer%3a%3aSession)？
*   `fork()`?
*   线程？（我觉得不是）

我的信息系统应该是可扩展的并处于[高可用性](/questions/tagged/high-availability "显示标记为“高可用性”的问题")模式。

**做我想做的事的最佳做法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:15:36.973

你需要某种视觉跟踪。为此使用 Dancer::Session。

你需要做一些“异步”，可能是 fork()。

然后您可以通过调用来启动业务流程

```
# curl -H 'Content-Type: application/json' -X POST -d '{"id":22}' http://127.0.0.1:3000/post_wait 
```

进程被分叉并且pid存储在会话中的位置。

然后你可以打电话

```
# curl -H 'Content-Type: application/json' -X POST -d '{"foobar":"xxxx"}' http://127.0.0.1:3000/report 
```

从您的会话中获取 pid（如果有的话）并检查该进程是否仍在运行。

# html - 光标在具有更高 z-index 的重叠 div 上可见

> ID：14042335
> 
> 赞同：6
> 
> 时间：2012-12-26T15:03:23.183
> 
> 标签：html, css, internet-explorer, mouse-cursor

我的问题是关于光标在重叠 div 上的外观，该 div 具有更高的`z-index`.

问题是单击按钮后，会`div`出现一个。现在单击之前可见的 div。您将能够在新出现的 div 上查看光标，即使它`z-index`更高。此问题仅在 IE 中，不在 FF 或 chrome 上。

```
$("#y").click(function() {
  $("#u").css("display", "block");
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div id="u" style="height:auto;zindex:999;display:none;border:3px solid red;width:300px;background-color:white;position:absolute;">
  awaeqweqweqwe<br>awqeqweqw<br>aweqweqweq<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br>a<br></div>
<div contenteditable="true" style="border:2px solid black;margin-top:30px;height:100px"></div>
<input type="buton" id="y" value="askjhdka">
```

[jsFiddle](http://jsfiddle.net/YZpDk/1/.) - 签入 IE9。

IE有什么解决方案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-07T13:30:17.137

如果您从逻辑上看，如果他们不想检查覆盖，用户将单击 textarea。我认为那个时候你应该隐藏覆盖。

$('.textarea').focus(function(){
$("#u").css("display","none");
});

# jquery - 如何使用 jquery 根据在第一个选择框中选择的值禁用第二个选择框的额外选项

> ID：14042339
> 
> 赞同：0
> 
> 时间：2012-12-26T15:03:45.093
> 
> 标签：jquery, jquery-selectors

我有 2 个选择框，代码如下。

父选择框

```
<select name="user_type" id="user_type">
    <option value="">Please Choose An Option</option>
    <option value="PRIVATE OWNER">PRIVATE OWNER</option>
    <option value="TRADER">TRADER</option>
</select> 
```

子选择框

```
<select name="package_type" id="package_type">
    <option value="">Please Choose An Option</option>
    <option value="SINGLE ENTRY">SINGLE ENTRY</option>
    <option value="FEATURED ENTRY">FEATURED ENTRY</option>
    <option value="STANDARD">STANDARD</option>
    <option value="ULTIMATE">ULTIMATE</option>
</select> 
```

我希望如果从父选择框中选择私有所有者，那么应该只显示单个条目和精选条目，其余的将使用 jquery 删除或删除。

我不知道如何实现这一目标。

下面是我的 jquery 代码，它不包含关于我所要求的逻辑的代码，因为我不知道如何动态添加或删除标签。

另外请排除下面代码中的 php 部分，因为它是我自己的逻辑来从会话和数据库中获取值并将它们提供给 jquery 变量等。

请让我知道如何实现这一目标。

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
<?php
// Pre Populate User From Session
$user_type = $session->getSession("packages_user_type");
if ($user_type != "TRADER")
{
?>
    $('#package_type_container, #slots_container, #notes_ultimate').hide();
<?
}
?>
    $('#user_type').change(function()
    {
        var user_type = $(this).val();
        if(user_type == "TRADER")
        {
            $('#package_type_container').slideDown().show();
            $('#slots_container').slideDown().show();
        }
        else
        {
            $("#package_type").find("option:selected").removeAttr('selected');
            $('#package_type_container').slideUp();
            $('#slots_container').slideUp();
        }
    });

    $('#package_type').change(function()
    {
        var package_type = $(this).val();
        if(package_type == "SINGLE ENTRY")
        {
            $('#slots').val('1').attr('readonly', true);
            $('#cost').val('').removeAttr('readonly');
        }
        else if(package_type == "FEATURED ENTRY")
        {
            $('#slots').val('1').attr('readonly', true);
            $('#cost').val('').removeAttr('readonly');
        }
        else if (package_type == "ULTIMATE")
        {
            $('#notes_ultimate').slideDown().show();
            $('#slots').val('').removeAttr('readonly');
            $('#cost').val('0').attr('readonly', true);
        }
        else
        {
            $('#notes_ultimate').hide();
            $('#slots').val('').removeAttr('readonly');
            $('#cost').val('').removeAttr('readonly');
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:35:42.540

我建议在 HTML 中明确定义选项之间的关系，指示`option`第二个中的 s`select`应该可用以响应从第一个中选择的`option`（使用自定义`data-*`属性），所以我会使用类似以下的内容：

HTML：

```
<select name="user_type" id="user_type">
    <option value="">Please Choose An Option</option>
    <option value="private owner">private owner</option>
    <option value="trader">trader</option>
</select>

<select name="package_type" id="package_type">
    <option value="">Please Choose An Option</option>
    <option value="single entry" data-relatesTo="privateOwner trader">single entry</option>
    <option value="featured entry" data-relatesTo="privateOwner trader">featured entry</option>
    <option value="standard" data-relatesTo="trader">standard</option>
    <option value="ultimate" data-relatesTo="trader">ultimate</option>
</select>​ 
```

jQuery：

```
$('#user_type').change(
    function() {
        // camel-cases the value of the selected option
        var v = $(this).val().replace(/\s+(\w)/, function(a) {
            return a.replace(/(^\s+)/, '').toUpperCase();
        });
        // finds all disabled options and un-disables/enables them
        $('#package_type option:disabled').prop('disabled', false);
        // selects all options in the second select
        $('#package_type option').filter(

        function() {
            // caches the current $(this) object, since we might use it more than once
            var that = $(this);
            // returns the current $(this) if it has a value that's not an empty string
            // AND
            // if the camel-cased value (from above) is *not* found in the
            // data-relatesTo attribute
            return that.val() !== '' && that.attr('data-relatesTo').indexOf(v) === -1;
        }).prop('disabled', true);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/avCja/)。

参考：

*   JavaScript：

    *   [`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
    *   [正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
    *   [`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).
    *   [`String.toUpperCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase).
*   jQuery：

    *   [`attr()`](http://api.jquery.com/attr/).
    *   [`change()`](http://api.jquery.com/change/).
    *   [`:disabled`选择器](http://api.jquery.com/disabled-selector/)。
    *   [`filter()`](http://api.jquery.com/filter/).
    *   [`prop()`](http://api.jquery.com/prop/).
    *   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:26:38.263

您可以使用[.detach()](http://api.jquery.com/detach/)执行类似的操作来删除选项，然后附加相关选项

```
var $popts = $('#package_type option'); // store all available options
var sel = {
    "default": $popts.eq(0), 
    "PRIVATE OWNER": $popts.slice(1,3), // available values for PRIVATE OWNER
    "TRADER": $popts.slice(1) // available values for TRADER
};

$('#user_type').change(function(){
    // detach all options
    $('#package_type option').detach();
    // if value is '' then append the default - else append the correct options
    $('#package_type').append(this.value == '' ? sel['default'] : sel[this.value]);    
});​ 
```

[小提琴](http://jsfiddle.net/wirey00/zNqmZ/ "给你简单的小提琴:)")

# excel - 根据条件将范围复制到新工作簿的宏

> ID：14042340
> 
> 赞同：0
> 
> 时间：2012-12-26T15:03:50.013
> 
> 标签：excel, vba

> **可能重复：**
> [宏将范围复制到具有条件的新工作簿](https://stackoverflow.com/questions/14034522/macro-to-copy-range-to-new-workbook-with-condition)

我没有成功地尝试为以下目的创建宏：将工作簿的范围复制到新工作簿。查看示例 1 中的第一个屏幕截图，我想要实现的是将范围 R4:AB6 复制到一个新工作簿，并附加一个标准。宏应该只复制活动单元格的行包含值的行。示例 1 的第二个屏幕截图显示了宏的结果：一个新工作簿，其中粘贴了基于上述条件的范围。我添加了另一个示例以使我需要更清楚。在示例 2 中，屏幕截图 2 显示了活动单元格为 R7 的起始位置。运行宏的结果将是最终的屏幕截图，其中第 4 行和第 5 行已与活动单元格的行一起复制，并且仅当该行不为空时。

我真的很感激任何帮助，因为我对 vba 还很陌生，并且很长一段时间以来一直在努力解决这个问题！

![示例 1](../Images/18e4dc86b7b3e948254fec3e037b09f1.png) ![示例 1](../Images/0342f9f49f8150c8b8a11a6686c766de.png) ![示例 2](../Images/971d39d8b160e426be649cc22b682121.png) ![示例 2](../Images/36823ec7a261f3b27f1a572e9acf8c99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:11:11.893

这很粗糙，但希望这会有所帮助..

```
Sub bks()

Application.ScreenUpdating = False
Dim WB1 As Workbook
Dim WB2 As Workbook
Dim name1 As String
Dim name2 As String
Dim colLet As String

'grab name of current workbook
name1 = ThisWorkbook.Name
Set WB1 = Workbooks(name1)

'create new workbook and set it
Workbooks.Add.Activate
name2 = ActiveWorkbook.Name
Set WB2 = Workbooks(name2)

WB1.Activate

Dim i As Integer
Dim j As Integer
Dim k As Integer
Dim m As Integer
Dim mAdjust As Integer
Dim x As Double

'set x equal to number of rows you have
x = 100

Dim colSave() As Double
ReDim colSave(x)

j = 1
k = 1

'the `17` adjust the loop for the R column (17 columns over from 1)
    For i = 1 + 17 To 11 + 17
        For m = 1 To x

'for each row of records, set the first report column to 1 via the array colSave(m)
        If i = 1 + 17 Then
            colSave(m) = 1
        End If
           mAdjust = m + 5
               WB2.Activate
        j = colSave(m)

'convert the column number to column letter
            If i > 26 Then
               colLet = Chr(Int((i - 1) / 26) + 64) & Chr(Int((i - 1) Mod 26) + 65)
            Else
               colLet = Chr(i + 64)
            End If

            WB1.Activate

        'the conditional statements you wanted
                If Cells(mAdjust, i) <> "" Then
                    Range(colLet & "4," & colLet & "5," & colLet & mAdjust).Activate
                        Selection.Copy
                        WB2.Activate
                        Sheets("Sheet1").Cells((m - 1) * 5 + 1, j).Activate
                        ActiveSheet.Paste
                    colSave(m) = colSave(m) + 1
                End If
            Next m
    Next i

Application.ScreenUpdating = True
WB2.Activate

'`j` and `k` allow you to move the paste columns sperately based on your condition.
End Sub 
```

# asp.net - ASP.NET最好把数据控件隐藏在里面吗？

> ID：14042346
> 
> 赞同：0
> 
> 时间：2012-12-26T15:04:19.093
> 
> 标签：asp.net, controls

我想使用一个包含指向其他页面的链接的控件，并将所有这些链接放在一个控件（EG 表）中，这样我就可以用代码隐藏它（仅对管理员显示）

除了表格，我应该使用哪个控件？我应该使用面板还是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:06:21.890

如果要隐藏某些链接，请使用简单的超链接控件并仅为管理员设置可见属性。您可以使用Repeater控件来呈现表格并在ItemTemplate中设置超链接。

否则你可以使用 Placeholder 并在其中放置表格，并设置 Placeholder 的可见属性，Placehodler 不会渲染任何东西。

毕竟你可以使用同一个表，添加 ID 和 runat="server" 属性并设置为从后面的代码可见。

例如 ：

```
<table ID="myTable" runat="server">
... 
```

然后在代码中隐藏整个表格：

```
protected void Page_Load(object sender, EventArgs e)
{
  myTable.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:09:15.107

正如 Antonio Bakula 所说，取决于您的目标，您可以将每个单独的链接设置为不可见。

或者，如果它们很多，则将它们放在可以批发打开和关闭的面板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:11:44.420

面板是一个不错的选择。

An`<asp:Panel />`在 HTML 中呈现为`<div>`. 如果您不熟悉 HTML，a`<div>`只是一个盒子，您可以在其中放入任何东西（包括 a `<table>`）。例如，StackOverflow 上的每个答案都显示在`<div>`.

如果您设置`Visible="false"`，那么整个`<div>`内容将从您的 HTML 输出中删除，即使它存在于`.aspx`页面上。基本上，您可以使用这种方法非常有效地隐藏非管理员的链接。

但是，这仍然不是很安全。恶意用户通过猜测来尝试找到管理员链接是很常见的（例如：`/admin/default.aspx`、`/admin/admin.aspx`等...）。您应该使用[角色](http://www.asp.net/web-forms/tutorials/security/roles/creating-and-managing-roles-cs)来阻止用户访问您的管理员链接。角色甚至会阻止某些类型的用户（例如：未登录的用户或非管理员用户）访问这些页面。用户将看到一条错误消息，而不是看到该页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T15:12:38.540

您可以使用 a`panel`在其中插入所有其他控件（超链接、按钮...等），并且在您的代码中，您可以通过调用显示和隐藏面板以及里面的所有内容

```
panel.visible=true
panel.visible=false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T15:08:09.140

我会使用 a`<asp:PlaceHolder`因为它只是一个占位符..并且没有其他语义价值，如表格、面板或这些东西..

# php - 正则表达式来操作字符串中的变量赋值

> ID：14042350
> 
> 赞同：0
> 
> 时间：2012-12-26T15:04:44.020
> 
> 标签：php, regex, preg-replace

我的 PHP 脚本需要一个正则表达式，它可以帮助我使用`preg_replace`.

例如，假设我有以下字符串：

```
myvar = first_value AND var2 = second_value 
```

我想将其转换为：

```
myvar = 'first_value' AND var2 = 'second_value' 
```

但是，当值周围已经有一个单引号时，我也希望它忽略。所以`myvar = first_value AND var2 = 'second_value'`会变成`myvar = 'first_value' AND var2 = 'second_value'`而不是`myvar = 'first_value' AND var2 = ''second_value''`。

当值周围已经有一个单引号时，我还希望它处理子字符串中的空格。所以`myvar = first_value AND var2 = 'second value'`会变成`myvar = 'first_value' AND var2 = 'second value'`而不是`myvar = 'first_value' AND var2 = 'second' value'`。

注意：在任何时候，字符串都不会包含带有空格的未加引号的字符串值的变量赋值，即`myvar = first value`永远不会出现的场景。但是，字符串可以包含任何其他字符，即使是特殊字符，例如`myvar = &%$@_imspecial_*`也是完全有效的。

我正在使用的 PHP 代码如下所示（#DontLaugh）：

```
$col_clause_str = "myvar = first_value AND var2 = second_value";
$replace_pattern_str = '/([\w\@\-]+)\s*(\=|\>|\>\=|\<|\<\=)\s*\'{0,1}([\w\@\.\:\+\-\/\|\{\}\[\]\~\%\$\*\!]+)\'{0,1}/i';
$replace_str = '\1 \2 \'\3\'';
$col_clause_str = preg_replace($replace_pattern_str, $replace_str, $col_clause_str); 
```

我该如何改进这个正则表达式？！

提前致谢。

**编辑：** 我将问题更新为更具描述性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:09:29.487

您可以替换此正则表达式：-

```
"/(?<==\s)(\w+)/i" 
```

和： -

```
'\1' 
```

* * *

**更新： -**

好的，对于您更新的问题，您可以使用此正则表达式：-

```
"/(?<==\s)([^\s']+)/i" 
```

并用相同的字符串替换它 -`'\1'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:04:32.840

我不熟悉 PHP 及其正则表达式功能，但也许这段 Python 代码对您有所帮助：

```
In [1]: import re

In [2]: str1 = "myvar = first_value AND var2 = second_value"

In [3]: str2 = "myvar = first_value AND var2 = 'second_value'"

In [4]: str3 = "myvar = 'first value' AND var2 = second_value"

In [5]: regex = r"""
 .....:     (?P<variable_name>
 .....:         \w+
 .....:         \s*
 .....:         =
 .....:         \s*
 .....:     )
 .....:     (?<! ' )     # negative look-behind assertion
 .....:     (?P<value>
 .....:         \w+
 .....:     )
 .....:     (?! ' )      # negative look-ahead assertion
 .....:     """

In [6]: replacement = "\g<variable_name>'\g<value>'"

In [7]: re.sub(regex, replacement, str1, flags=re.X)
Out[7]: "myvar = 'first_value' AND var2 = 'second_value'"

In [8]: re.sub(regex, replacement, str2, flags=re.X)
Out[8]: "myvar = 'first_value' AND var2 = 'second_value'"

In [9]: re.sub(regex, replacement, str3, flags=re.X)
Out[9]: "myvar = 'first value' AND var2 = 'second_value'" 
```

您可能必须调整`\w+`以适应所有字符，而不是变量名称中可能出现的字符。这里的想法是使用否定的后视和前瞻断言来检查变量值是否已经被引号包围。

# wordpress - C网站名称

> ID：14042356
> 
> 赞同：1
> 
> 时间：2012-12-26T15:05:04.763
> 
> 标签：wordpress, dns, cname

如果没有 www，我的网站将无法运行。自从我安装了 WordPress 后它就无法正常工作。

请原谅我，我不是想推销我的网站。但它来了

`http://www.stratageeks.com`作品

`http://stratageeks.com`没有

我在wordpress中的设置

![在此处输入图像描述](../Images/a50a6a73921bd3a05cb67cc0cdb99e4d.png)

如果我从这两个地方移除`www`，而不是其他方式，我有问题`www`

我需要在其他地方挖掘吗？CName 还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:13:46.943

我相信问题出在您的 DNS 设置上。您可以与您的托管服务提供商联系，并确保Stratageeks.com 的A 名称和CNAME www。指向Stratageeks.com。A 名称通常包含您服务器的 IP，而 CNAME 指向一个网址

# ruby-on-rails - 我如何从 Rails 应用程序中获取日期到 Sencha Touch 2 应用程序而不是无效日期？

> ID：14042357
> 
> 赞同：0
> 
> 时间：2012-12-26T15:05:05.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, extjs, sencha-touch, sencha-touch-2

**问题：**在 Sencha Touch 2 应用程序的模型实例中的日期字段中获取一个类似于“2012-11-11T04:27:25Z”（这是 Rails 应用程序的默认日期输出）的 JSONP 响应中的日期没有它是一个无效的日期。

**背景：**我有一个生成 JSONP 的 Rails 应用程序，我将其读入我的 Sencha Touch 2 应用程序中的商店，并且由 Rails 格式化的日期作为无效日期进入 Sencha Touch 2 应用程序。

**重现：**要重现此问题的问题并复制错误，请使用下面的小提琴。注意：我通过将数据硬连接到存储中，将 Rails 服务器从图片中删除，日期格式与 Rails 应用程序输出它们的方式相同。因此，换句话说，我通过模仿我的 Rails 应用程序在服务器端所做的事情，在 Sencha Touch 2 应用程序中本地重现了整个问题。

**小提琴：** [http](http://www.senchafiddle.com/#7qQkb) ://www.senchafiddle.com/#7qQkb 。要查看问题，请从 Webkit 浏览器运行 Fiddle 并查看 Webkit 开发人员工具中的 JavaScript 控制台。

**症状：**将发生的情况是应用程序中的 List 组件创建的 XTemplate 执行代码（在 {[]} 括号内）以输出日期以供您在控制台中检查。当您检查输出的日期时，您将看到：`__proto__: Invalid Date`。日期仍会在视图中正常显示，但由于它是无效日期，我无法格式化日期或检索日期对象的不同部分。

**我的问题是：**我可以对我的模型或我的商店，或者我的 Rails 应用程序做些什么，以将日期放入模型实例而不是无效日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:14:28.130

你看到的只是 Date 原型中 toString 方法的返回值

```
Date.prototype.toString(); // "Invalid Date" 
```

这就是为什么所有的“日期”都说完全相同的原因。但是，这并不意味着日期是错误的！在 extjs 中，如果你想在你的模型中格式化一个日期字段，你应该使用：

```
{ name: 'timestamp', type: 'date', dateFormat: "Y-m-d H:i" } 
```

但是如果你只想格式化它以显示它，你可以使用你使用的格式，命名的内置格式之一或我在示例中使用的相同格式：**Ymd H:i**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:46:01.470

我已经通过更多的研究回答了这个问题。Rails 在 JSON / JSONP 响应中表示日期的默认方式对于 Sencha Touch 2 来说已经足够了。`__proto__`日期对象的属性将始终表示为无效日期，但您仍然可以通过`Ext.Date.format()`在 XTemplate 对象中使用来操纵日期，如下所示：

```
'<p>{[Ext.Date.format(values.timestamp, "F d, Y g:i A")]}</p>' 
```

（`timestamp`您希望格式化的日期在哪里。）

它在控制台中显示为无效日期这一事实无关紧要。

# grails - 添加一个 进入 Grails 2.1 中的 web.xml

> ID：14042360
> 
> 赞同：2
> 
> 时间：2012-12-26T15:05:16.313
> 
> 标签：grails, web.xml, grails-plugin, grails-2.1

我想在 web.xml 中添加一个节点。
我尝试使用 webxml grails 插件，但看起来它无法管理节点。任何帮助或示例将不胜感激...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T15:38:08.533

你可以使用你自己的`web.xml`，你想要的任何内容。跑

```
> grails install-templates 
```

并编辑`/src/templates/war/web.xml`文件（它是一个模板，所以不要删除现有的 Grails 代码）

请参阅[http://grails.org/doc/latest/ref/Command%20Line/install-templates.html](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T01:14:22.213

我还不能添加评论，所以就这样吧。

通过查看您的最后评论，我想您正在寻找*grails:exec*：

```
mvn grails:exec -Dcommand=install-templates 
```

许多 Grails 命令没有直接通过 Maven 公开的等效包装器。

# vb.net - 在 VB.NET 2010 中打印

> ID：14042362
> 
> 赞同：1
> 
> 时间：2012-12-26T15:05:31.393
> 
> 标签：vb.net, printing

我想使用 VB.NET 2010 使用存折打印机（Epson PLQ 20）在存折（用于记录银行交易的纸质书）上打印。

我当前的mysql表结构是，

```
1\. tblLoanRegistry(LoanID pk, EMPNumber, Date, Amount, NoOfInstallments, Teller)
2\. tblLoanAccount(ID pk, LoanID fk, Date, Payment, Interest, Total, Auto bool, Installment int, teller) 
```

我的问题是：

1.  如何检测打印的最后一行？
2.  如何在书的正确位置（正确行）打印第一行未打印的行。

我决定在上面提到的每个表中添加一个字段“打印”（布尔值）。打印与否。我可以在 vb.net 中使用同一台打印机打印文本、数字等（例如：首页上的帐户持有人详细信息）。但是我在打印交易时遇到了上述问题。非常感谢您的帮助/意见。

**更多信息：** 实际上，我为非营利组织开发了一个使用 php 和 mysql 的基于 Web 的帐户处理系统，作为我的学位项目。现在他们想像我之前描述的那样在存折上打印交易。

因此，我正在使用 VB.NET 创建一个应用程序（我对 VB.NET 完全陌生。但在 vb6 方面有经验），而我正在学习它。我设法进行了简单的打印，但这是不同的。

我没有解决上述两个问题的好主意。

**更新：** 我以不同的（可能是不好的）方式做到了。打印按钮的单击事件。

```
 Dim sqlLoan As String

    conn = New MySqlConnection(cnString)

    sqlLoan = "SELECT tblLoanAccount.Date,if(Installment = 0, 'Interest', concat('Installment : ', Installment)) as Description, tblLoanAccount.Payment, tblLoanAccount.Interest, " &
        " tblLoanAccount.Total, tblLoanAccount.Auto, tblLoanAccount.Installment FROM tblLoanAccount join tblloanRegistry on  tblloanRegistry.LoanID = tblLoanAccount.LoanID " &
        " where(tblloanRegistry.EMPNumber = " & cmbEMPN.Text & " And tblLoanAccount.LoanID = tblLoanRegistry.LoanID) AND tblLoanAccount.Total <> 0 ORDER BY tblLoanAccount.ID"

    Using conn As New MySqlConnection(cnString)
        Using cmd As New MySqlCommand(sqlLoan, conn)
            conn.Open()
            Using myReader As MySqlDataReader = cmd.ExecuteReader()
                Using writer As StreamWriter = New StreamWriter("c:\file.txt")
                    While myReader.Read()
                        writer.WriteLine("{0}, {1}, {2}, {3}, {4}", myReader.Item(0), myReader.Item(1), myReader.Item(2), myReader.Item(3), myReader.Item(4))
                    End While
                End Using
                Call Printing()
            End Using
        End Using
    End Using

    ' Print the file. 
Public Sub Printing()
    Try
        streamToPrint = New StreamReader(("c:\file.txt"))
        Try
            printFont = New Font("Arial", 10)
            Dim pd As New PrintDocument()
            AddHandler pd.PrintPage, AddressOf pd_PrintPage
            ' Print the document.
            pd.Print()
        Finally
            streamToPrint.Close()
        End Try
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 'Printing 
```

其他代码为 msdn [PrintDocument Class](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:20:50.667

[您可以尝试在http://www.jcl.vdtec.net](http://www.jcl.vdtec.net)上使用我在 MySql 和 VB.Net 中使用的易于使用的轻量级报告编写器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:27:28.037

这个问题有很多未知数。例如，当您将某个项目标记为已打印时，您是希望将其标记为通用（针对所有应用程序、所有事务和所有时间）还是仅在有限的上下文中（特定应用程序、事务或时间范围）？

事务是在单个 .NET 线程中启动和完成的，还是此应用程序是多线程的，还是事务跨越多个独立执行？您是否需要打印超出实际纸张的项目的一些记录？

假设您想要仅在特定交易中打印的项目记录，您可能需要创建第三个表，称为 tblPrintTransaction，其中包含主键或其他标识符列以及您想要的任何其他列（交易开始日期，结束日期、用户 ID、上下文信息等）。当您启动应用程序时，在此表中创建一个新行并获取行 ID。

现在，创建第四个表，称为 tblPrintTransactionArtifact，至少有两列。一列将是标识事务的外键（来自 tblPrintTransaction 表），一列或多列将用于标识已打印的项目。例如，您的表可能包含两列来标识打印项目：一列指定“注册表”或“帐户”，另一列指定项目的 ID。

当然，所有这些信息都可以在应用程序本身中创建和维护（使用变量等），但是将它们存储在一个表中意味着它们将在应用程序执行之后持续存在，从而为您提供永久记录。我建议您跟踪应用程序中打印页面上的当前“行”，因为我认为在您的数据库中这几乎没有用处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T04:22:33.167

将 sqlLoan 调暗为字符串

```
conn = New MySqlConnection(cnString)

sqlLoan = "SELECT tblLoanAccount.Date,if(Installment = 0, 'Interest', concat('Installment : ', Installment)) as Description, tblLoanAccount.Payment, tblLoanAccount.Interest, " &
    " tblLoanAccount.Total, tblLoanAccount.Auto, tblLoanAccount.Installment FROM tblLoanAccount join tblloanRegistry on  tblloanRegistry.LoanID = tblLoanAccount.LoanID " &
    " where(tblloanRegistry.EMPNumber = " & cmbEMPN.Text & " And tblLoanAccount.LoanID = tblLoanRegistry.LoanID) AND tblLoanAccount.Total <> 0 ORDER BY tblLoanAccount.ID"

Using conn As New MySqlConnection(cnString)
    Using cmd As New MySqlCommand(sqlLoan, conn)
        conn.Open()
        Using myReader As MySqlDataReader = cmd.ExecuteReader()
            Using writer As StreamWriter = New StreamWriter("c:\file.txt")
                While myReader.Read()
                    writer.WriteLine("{0}, {1}, {2}, {3}, {4}", myReader.Item(0), myReader.Item(1), myReader.Item(2), myReader.Item(3), myReader.Item(4))
                End While
            End Using
            Call Printing()
        End Using
    End Using
End Using

    ' Print the file. 
Public Sub Printing()
    Try
        streamToPrint = New StreamReader("c:\file.txt")
        Try
            printFont = New Font("Arial", 10)
            Dim pd As New PrintDocument()
            AddHandler pd.PrintPage, AddressOf pd_PrintPage
            ' Print the document.
            pd.Print()
        Finally
            streamToPrint.Close()
        End Try
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 'Printing 
```

其他代码为 msdn PrintDocument 类。

# google-app-engine - 从appengine（python）上传文件到谷歌驱动器

> ID：14042374
> 
> 赞同：2
> 
> 时间：2012-12-26T15:06:56.650
> 
> 标签：google-app-engine, google-drive-api

我正在尝试从谷歌应用引擎将文件上传到谷歌驱动器。我尝试了 2 种不同的方法，但都丢失了信息。

第一个是下一个：

- html表单：

```
<html><body><form id='myForm' method='post' action='/guardar' 
    enctype='multipart/form-data' >
<input type="file" id="doc" name="doc" >
<input type="submit" value="Enviar"></form>
</body></html> 
```

-python代码：

```
class guardar(webapp.RequestHandler):

  @decorator.oauth_required

  def post(self):      

  http = decorator.http()

  service = build('drive', 'v2', http=http)

  thefile = self.request.get('doc')

  media_body = MediaInMemoryUpload(thefile, mimetype='text/plain', resumable=True)

  response = service.files().insert(body={'title': 'prueba_si','mimeType': 'text/plain'},media_body=media_body).execute() 
```

这样我也丢失了上传文件的 mimetype 和标题；我需要两者。

我尝试过这种其他方式，但它总是说这样的文件不存在：

-html文件：

```
<html><body><form id='myForm' method='post' action='/guardar' >
<input type="file" id="doc" name="doc" >

<input type="submit" value="Enviar"></form>

</body></html> 
```

-python代码：

```
class guardar(webapp.RequestHandler):

  @decorator.oauth_required

  def post(self):      

  http = decorator.http()

  service = build('drive', 'v2', http=http)

  thefile = self.request.get('doc')

  mime_type=mimetypes.guess_type(thefile,strict=True)
    media_body = MediaFileUpload(filename, mimetype=mime_type, resumable=True)
  response = service.files().insert(body={'title': 'prueba_si','mimeType': mime_type},media_body=media_body).execute() 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:35:07.197

您不需要在媒体上传和元数据中传递 mime 类型。我会把它留在媒体上传中。

您不应该丢失标题信息，但我无法重现您的错误。

# android - 如何在 Android 谷歌地图上添加搜索按钮？

> ID：14042375
> 
> 赞同：3
> 
> 时间：2012-12-26T15:07:05.563
> 
> 标签：android

我想将搜索按钮放在 Android 应用程序的谷歌地图中（就像我添加缩放控件的方式一样）。但是，我无法找到添加它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:33:29.287

如果要添加搜索按钮，则必须使用从 EditText 接收搜索字符串的 GeoCoder 实现反向地理编码，因此使用获得的坐标，您可以在 MapOverlay 中设置地理点以在地图上显示搜索的位置.

有关 Google 地图地理编码的更多信息，请参阅： [https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:21:33.543

这个问题太模糊了。你在说什么“搜索按钮”？你是说 SearchView 吗？maps.google.com 网络界面中有一个搜索小部件，但这不是标准的 Android 设计。Android Google Maps 应用程序使用带有历史记录和自动完成功能的 SearchView。

# jsf - 如何将 initParam 的值注入托管 bean？

> ID：14042383
> 
> 赞同：1
> 
> 时间：2012-12-26T15:07:36.567
> 
> 标签：jsf, managed-bean

我在 web.xml 中有一个上下文参数：

```
<context-param>
        <description>Version number will be prefixed to url of requests</description>
        <param-name>version_id</param-name>
        <param-value>11</param-value>
</context-param> 
```

我想将它注入到一个 ManagedBean 这个 bean 有一个范围无

我尝试了下面的代码，但它不起作用，我在启动时遇到异常并出现此错误：

表达式 #{initParam[version_id]} 引用的对象的范围，应用程序，比引用的托管 bean (responseData) 范围短

```
@ManagedBean
@NoneScoped
public class ResponseData implements Serializable {

    @ManagedProperty(value = "#{initParam.version_id}")
    private String version;

    public ResponseData() {
    }

    /**
     * @param version the version to set
     */
    public void setVersion(String version) {
        this.version = version;
    }

} 
```

将上下文参数的值作为托管属性注入托管 bean 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:55:51.830

您正在尝试的是，您正在尝试获取具有比 NoneScoped 的 ResponseData 托管 bean 更小的范围的托管属性的值。

但是，您应该能够从中获取上下文参数，`ServletContext`而无需引用另一个 bean。

```
ServletContext servletContext = (ServletContext) FacesContext
   .getCurrentInstance().getExternalContext().getContext();
servletContext.getInitParameter("version_id"); 
```

# objective-c - cocos2d mac 应用程序启动时如何添加闪屏（Default.png）

> ID：14042385
> 
> 赞同：4
> 
> 时间：2012-12-26T15:07:47.853
> 
> 标签：objective-c, ios, xcode, macos, cocos2d-iphone

我正在将我的 iOS 应用程序迁移到 mac。加载时间有点长（大约 5 秒），因此我需要一个初始加载屏幕（就像 iOS 的 Default.png 图像一样），但是由 cocos2d 模板制作的项目只显示一个白屏。不确定其他应用程序。那么有没有设置它？

我知道 Mac 应用程序上的屏幕尺寸不固定。但我设置了默认大小。并在全屏模式下使用自动缩放。

编辑：

我也尝试过轻量级加载场景，但失败了，因为 MainScene 本身也是轻量级的。我认为主要的加载时间是由于设置了 cocos2d 环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:01:27.807

根据我在 Cocos2d 1.0.1 和 2.0 中的测试，基本的 Cocos2d OS X 应用程序启动得非常快。

这看起来很可能是您的第一个场景需要很长时间才能加载，或者其他什么。Instruments 可以帮助你收集关于你的应用正在做什么的信息。

我建议您制作一个初始轻量级 cocos2d 场景，该场景将在启动时快速加载，然后加载您的第二个场景并过渡到它。理想情况下，您的第二个场景的资产加载将是异步的（至少是那些很慢的）。有很多关于如何做到这一点的博客文章。（搜索“cocos2d 异步加载”，你会发现很多，比如这个： [How to preload your game assets in a loading scene](http://xperienced.com.pl/blog/how-to-preload-your-game-assets-in-loading-scene)，尽管更新一些可能更可取）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:25:08.577

在 OS X 中，应用程序启动时会出现一个窗口，它不是为使用闪屏而设计的。您可能需要重新考虑该选择。

但是，如果窗口仍然加载缓慢或显示其内容，您仍然可以这样做，但手动操作并不像在 iOS 中那样容易。您需要在窗口内显示另一个视图，直到它加载。

**编辑**

更多的上下文：例如，您可以在您的 xib 文件中设置一个包含图像的图像视图来显示。
然后你启动另一个线程来加载你需要的所有内容。之后，在更新窗口的主线程上运行一个选择器。

# android - 如何正确使用 ViewPager 的片段？

> ID：14042388
> 
> 赞同：1
> 
> 时间：2012-12-26T15:08:14.380
> 
> 标签：android, android-fragments, android-viewpager

我知道许多应用程序在 ViewPager 中使用片段。我的应用程序中也需要它。我没有找到任何指南，我怎么能排除[这个](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)。这是我的代码：

```
public class MainActivity extends FragmentActivity {

    Vector<Fragment> fragments;
    ViewPager viewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        viewPager = (ViewPager) findViewById(R.id.pager);

        fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));

        viewPager.setOffscreenPageLimit(fragments.size());
        PagerAdapter pagerAdapter = new PagerAdapter(super.getSupportFragmentManager(), fragments);

        viewPager.setAdapter(pagerAdapter);

        viewPager.setCurrentItem(0);
    }

    class PagerAdapter extends FragmentPagerAdapter {

        private List<Fragment> fragments;

        public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public Fragment getItem(int position) {
            return this.fragments.get(position);
        }

        @Override
        public int getCount() {
            return this.fragments.size();
        }

    }

} 
```

但是这段代码不能很好地工作。有时我在 Fragment1 中收到关于 getActivity() 返回 null 的错误。我从该站点和其他有关此错误的帖子中阅读了许多帖子，现在我知道这是不好的方法-使用 Vector 来存储片段。但我仍然不知道，如何正确使用片段进行 ViewPager。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T17:36:51.223

即使我一开始也很难理解这个概念，我不会说我完全理解它。但，

以下是我在示例应用程序中使用片段的方式：

第 1 步：创建我的适配器：

```
public class AllPagesAdapter extends FragmentStatePagerAdapter {

            public AllPagesAdapter(FragmentManager fm) {

                super(fm);

            }

            @Override
            public Fragment getItem(int index) {

        switch (index) {
            case 0:

                return new Fragment1();

            case 1:

                return new Fragment2();
            case 2:

                return new Fragment3();

            case 3:

                return new Fragment4();

            case 4:

                return new Fragment5();

        }
        return null;

    }

    @Override
    public int getCount() {
        return 5;
    }

} 
```

第 2 步：在主要活动中，我正在扩展片段活动并实现 ActionBar.TabListener。这是我的做法：

```
public class SomeActivity extends FragmentActivity implements ActionBar.TabListener {

    public ViewPager viewPager;
    private AllPagesAdapter mAdapter;
    private ActionBar actionBar;
    private String [] tabs = {"Fragment1","Fragment2","Fragment3","Fragment4","Fragment5"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //Initializing all stuff
        viewPager = (ViewPager)findViewById(R.id.pager);

        actionBar = getActionBar();
        mAdapter = new AllPagesAdapter(getSupportFragmentManager());
        viewPager.setAdapter(mAdapter);
        actionBar.setHomeButtonEnabled(true);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        //Add the tabs here
        for(String tab_name:tabs){
            actionBar.addTab(actionBar.newTab().setText(tab_name).setTabListener(this));
        }

        viewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener(){

            @Override
        public void onPageSelected(int position){

                //on Page change, that particular page should be selected
                actionBar.setSelectedNavigationItem(position);
            }

            @Override
                public void onPageScrolled(int arg0,float arg1,int arg2){

            }
            @Override
        public void onPageScrollStateChanged(int position){

            }

        });
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction fragmentTransaction) {

        viewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction fragmentTransaction) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction fragmentTransaction) {

        viewPager.setCurrentItem(tab.getPosition());

    }
} 
```

第 3 步：对于这个例子，我只有一个片段：

这是代码：

```
public class Fragment1 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        //Can be layout you want it to be.
        View databaseview = inflater.inflate(R.layout.database, container, false);

        return databaseview;

    }

} 
```

第 4 步：最后一部分是布局：这将是起点。

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"></android.support.v4.view.ViewPager> 
```

最后，一件重要的事情是，片段的数量应该等于主活动中定义的字符串数组。如果没有，应用程序会崩溃。

希望我解释得很好..:)

我知道这是一个非常古老的帖子，但这个答案可以用于未来的观众。

# java - 运行非活动类

> ID：14042389
> 
> 赞同：0
> 
> 时间：2012-12-26T15:08:22.050
> 
> 标签：java, android, eclipse, debugging

我有更多的理解问题。我在我的 Android 项目中添加了一个新类。该类不是活动类，它使用非活动类的对象来获取一些信息。但是，我无法测试它是否能发挥作用。我无法调试它，我在代码中构建的日志消息都没有显示在 logcat 中。否则我如何在项目中测试一个类？

我在 java+Android+Eclipse 方面的知识非常有限，所以我不知道，这里的问题是哪一个。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:46:16.187

添加一个类

```
public static void main(String[] args) 
```

并运行它。

例如

```
public class Runner {
public static void main(String[] args) {
    //do smth here
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:52:24.180

您可以简单地使用触发类功能的按钮开发一个基本 Activity

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:11:33.277

创建测试`Activity`，添加一些与你做一些逻辑的 UI 元素`non-Activity class`，然后测试它

# sockets - 是否可以从两个不同的来源接收 UDP 数据报？

> ID：14042393
> 
> 赞同：0
> 
> 时间：2012-12-26T15:08:49.687
> 
> 标签：sockets, visual-c++, winsock2

我正在使用 VC++ 2010 和 Windows 7。

我有两个 UDP 源，只有一个接收器。假设 source1 发送：1、3、5 和 source2 发送 2、4、6。我想在同一个函数中接收 1、2、3、4、5、6（数字顺序无关紧要）。到目前为止，我制作了 2 个套接字，监听 2 个不同的端口来接收数据，然后将它们组合起来。

如何使用单个套接字实例接收来自多个源的 UDP 流量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:36:22.590

在接收方创建单个套接字并将其绑定到某个端口。然后让两个发件人在目标地址调用中指定此端口`sendto`。这应该可以解决问题。

使用 UDP 时您应该记住几件事。未指定数据报到达的顺序。您也不知道是否有任何数据报未交付。此外，您甚至可能多次获得重复的数据报。

# security - symfony2 的 post 值中的安全性

> ID：14042396
> 
> 赞同：-2
> 
> 时间：2012-12-26T15:09:18.633
> 
> 标签：security, symfony, xss, sql-injection

我的网站上有文本框。此文本框使用表单和发布方法提供文本值。此表单在数据库中搜索特殊文本。如何确定来自 sql injectionin 或 xss 的安全输入数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:21:15.967

由于 Symfony2 中 ORM 数据库风格的本质，您自然会受到 SQL 注入的保护。无论如何，与您的配置或验证器类设置的约束不匹配的数据将在到达数据库之前被拒绝。

数据在传递到请求类之前会自动编码。XSS 是不可能的，因为在接收端和输出端，数据都不是 RAW 格式，除非您指定它是，在这种情况下，无论如何您都会否定内置的安全性。

表单中的 XSS 是不可行的，因为 Symfony 默认情况下（使用表单类时）会在您的表单提交中创建 CSRF 令牌以验证请求的发送者。除非您特别禁用它们，否则它们将自动生成并包含在隐藏字段中。

symfony 的内置功能只是第一步，最佳实践是使用数据转换器来确保您的数据具有您期望的格式和类型。

数据转换器：[http ://symfony.com/doc/current/cookbook/form/data_transformers.html](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

最后，关于 SQL 注入，使用内置的查询构建器或使用 DQL 语言（如果您使用学说）是另一层安全性，可在使用高度自定义的查询时防止注入。

# c++ - 我很惊讶在图像中找到大多数线条的交点

> ID：14042397
> 
> 赞同：0
> 
> 时间：2012-12-26T15:09:18.897
> 
> 标签：c++, image-processing, opencv

我使用标准霍夫变换来获得使用 OpenCV 的图像中的直线。现在，我需要找到图像中大多数线的交点的 x 和 y 坐标。我的想法是将图像分成几个 8*8 像素段（我还没有决定大小），然后在该区域中搜索线条。但我不确定如何计算段中的行数。在这一点上我很震惊。所以我无法做的事情（使用openCV）是1.将图像分成8 * 8像素段（我不知道是否有它的功能，如果没有我该怎么办）2.计算数字每个段中的行数。任何有关代码的阅读材料或提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:52:07.497

您检测交叉点的方式是完全错误的。有一个简单的数学公式。我给你一个纯 C. 的示例代码：

```
// This is a point
typedef struct{
   int x,y;
} MYintPOINT;

// This is line
typedef struct {
    MYintPOINT  pStart;
    MYintPOINT  pEnd;
} MyLine;

#define PointMinusPoint(P,Q,R)      {(P).x = (Q).x - (R).x; (P).y = (Q).y - (R).y;}
#define PointCross(P,Q)             (((P).x*(Q).y)-((P).y*(Q).x))
#define SIGN(X)             (((X)>=0)? 1:-1 )
#define ABS(a)              ((a) >= 0 ? (a) : (-(a)))
#define ROUND(a)            ((SIGN(a)) * ( ( int )( ABS(a) + 0.5 ) ) ) 

// Given 2 line segments, find their intersection point
// rerurns [Px,Py] point in 'res' or FALSE if parallel. Uses vector cross product technique.
int findLinesIntersectionPoint(const MyLine*l1, const MyLine*l2, MYintPOINT *res){
    MYintPOINT  p  = l1->pStart;
    MYintPOINT  dp;
    MYintPOINT  q  = l2->pStart;
    MYintPOINT  dq;
    MYintPOINT  qmp;            // q-p
    int         dpdq_cross;     // 2 cross products
    int         qpdq_cross;     // dp with dq,  q-p with dq
    float       a;

    PointMinusPoint(dp,l1->pEnd,l1->pStart);
    PointMinusPoint(dq,l2->pEnd,l2->pStart);
    PointMinusPoint(qmp,q,p);

    dpdq_cross = PointCross(dp,dq);
    if (!dpdq_cross){
        // Perpendicular Lines
        return 0;
    }

    qpdq_cross = PointCross(qmp,dq);
    a = (qpdq_cross*1.0f/dpdq_cross);

    res->x = ROUND(p.x+a*dp.x);
    res->y = ROUND(p.y+a*dp.y);
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:46:37.953

我可以帮助您将图像分成 8*8 像素段。

OpenCV 中的`rowRange()`和`colRange()`函数对此很有用。（[此处的文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#cv-mat-rowrange)）这是一个示例：

```
cv::Mat img = cv::imread("myImage.png");
cv::Mat region = img.rowRange(0,7).colRange(0,7);  //upper-left 8x8 image region 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:04:51.473

请注意，由于噪声，大多数线可能根本不会在某一点相交，除此之外，请尝试以下操作：

```
create black_image 
for each line
    create temporary_black_image
    draw a line to temporary_black_image, use cvScalar(1) as a color for the line
    cvAdd both temporary_black_image to black_image
apply cvSmooth to black_image
CvPoint minLoc; CvPoint maxLoc;
double minVal; double maxVal;
cvMinMaxLoc( black_image, &minVal, &maxVal, &minLoc, &maxLoc );

maxLoc->x and maxLoc-> y will be your estimate 
```

您可以尝试通过改变 cvSmooth 函数的参数来稍微调整结果

# .net - 在visual basic中将图像旋转为环

> ID：14042398
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:09:20.163
> 
> 标签：.net, windows, vb.net, image, visual-studio

我想知道有没有办法像戒指一样在视觉基础中旋转图像？我想创建一个 Windows 窗体应用程序，它从目录中获取图像并将它们旋转到一个窗口中。

例如： http: [//www.primefaces.org/showcase/ui/ring.jsf](http://www.primefaces.org/showcase/ui/ring.jsf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:35:09.627

WPF 就是为此而生的。您可以转换任何控件或形状，并使用 Storyboard 进行动画处理，以实现它们旋转的平滑过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:57:16.023

它被称为轮播控件。这是[CodeProject 上的免费实现](http://www.codeproject.com/Articles/283025/Simple-Carousel-Control-for-Windows-Forms)。

另请参阅：[如何在 WinForms 中创建自定义 3D 轮播控件？](https://stackoverflow.com/questions/4908333/how-can-i-create-a-custom-3d-carousel-control-in-winforms)

那里有付费控件，只需在 Google 上搜索`carousel control for winforms`.

# android - 是否可以通过单击列表视图外的按钮来获取列表视图内的视图值？

> ID：14042402
> 
> 赞同：0
> 
> 时间：2012-12-26T15:09:28.587
> 
> 标签：android, listview, button, view, onclicklistener

我有一个列表视图，我正在做 setAdapter。在列表项中，我有 2 个文本视图和一个搜索栏。在我的活动中，除了列表视图之外，我还有一个按钮。我想点击这个按钮，我应该得到在这些文本视图中设置的值。我通过更改搜索栏来设置文本视图中的值。

我想知道这是否可以通过单击不属于列表视图但在同一活动中的按钮来获取列表视图内视图的值（在更改搜索栏后设置）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:13:35.807

`HashMap`在您的地图中创建`Activity`并保存文本值

`TextView`从第一行获取对象`ListView`：

```
View v = listView.getChildAt(0);
// if your row base layout is LinearLayout
// get it and find in this layout your TextView by id

if(v instanceof LinearLayout){
    v.findViewById(R.id.textView);
} 
```

# sql - SQL 查询：将多个字符串类型的列合并为一个

> ID：14042407
> 
> 赞同：4
> 
> 时间：2012-12-26T15:09:55.340
> 
> 标签：sql

假设我的表包含以下列

```
 Roll_number numeric           not null
 Subject1    varchar(40)       null
 Subject2    varchar(40)       null
 . . .
 Subject8    varchar(40)       null 
```

我必须使用 SQL 查询在所有这些主题 1 到 8 中搜索主题。在所有这些列中搜索子字符串的最佳查询是什么，请记住其中任何一个都可以具有 NULL 值。

我写

```
select * 
from students_data 
where subject1="BIOLOGY" or subject2="BIOLOGY" . . . . or subject8="BIOLOGY" 
```

但我需要一个简单的查询，因为实际上我的表中有 20 多列

查询

```
select * from table1 where "BIOLOGY" in (subject1,subject2,subject3) 
```

很有帮助，但是如果我必须只匹配该表字段中的子字符串（该主题的一部分），例如
**“BIO” ，该怎么办**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:13:05.310

您可以`IN`像这样使用谓词：

```
SELECT * 
FROM students_data 
WHERE 'BIOLOGY' IN (subject1, subject2, . . . , subject8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:17:48.840

这个怎么样？

```
SELECT * 
FROM students_data
WHERE subject1 + ' ' + subject2 + ' ' + ..... + subject8 LIKE '%BIOLOGY%'; 
```

* * *

## 更新 1

对于**NULL**值，请在下面使用。

```
SELECT * 
FROM students_data
WHERE ISNULL(subject1,'') + ' ' + ISNULL(subject2,'')
+ ' ' + ..... + ISNULL(subject8,'') LIKE '%BIOLOGY%'; 
```

对于使用 BIO，您可以使用`LIKE '%BIO%';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:44:59.693

这可能不会更快，但我相信它更清楚。

首先创建一个规范化视图（您可以以这种方式存储数据——这将是理想的）

```
Create View SubjectData AS
(
   SELECT Roll_number, 1 AS SubjectNumber, Subject1 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 2 AS SubjectNumber, Subject2 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 3 AS SubjectNumber, Subject3 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 4 AS SubjectNumber, Subject4 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 5 AS SubjectNumber, Subject5 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 6 AS SubjectNumber, Subject6 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 7 AS SubjectNumber, Subject7 AS Subject FROM TABLE1
   UNION ALL
   SELECT Roll_number, 8 AS SubjectNumber, Subject8 AS Subject FROM TABLE1
) 
```

现在选择很简单：

```
SELECT Roll_number, SubjectNumber from SubjectData where CONTAINS(Subject,'Bio') 
```

**注意**注意使用[CONTAINS](http://msdn.microsoft.com/en-us/library/ms187787%28v=SQL.105%29.aspx)，无论你怎么做都应该更快。

我没有测试上述查询，他们可能有错别字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T15:26:20.780

在这种情况下，关于这个，

```
SELECT * 
FROM students_data
WHERE 
nvl(subject1,'') + ' ' + nvl(subject2,'') + ' ' + ..... + nvl(subject8,'') 
LIKE '%BIO%'; 
```

如果您的数据库不支持，请选择`ifnull()`或`decode()`

# ssis - ssis 2008，在 Excel 上用标题冻结窗格

> ID：14042412
> 
> 赞同：0
> 
> 时间：2012-12-26T15:10:45.857
> 
> 标签：ssis

我将 SSIS 用于 SQL Server 2008。

我有一个 SSIS，它从 SQL Server 数据库中获取数据并将其导出到 excel 文件中。

在控制流上，我有一个数据流。在数据流上，我有一个 Ole DB 源和一个 Excel 目标。Excel 目标使用 Excel 连接管理器。在 Excel 连接管理器上，定义了一个 Excel 文件的路径。

excel 文件包含列名。

我已将列名作为冻结窗格放在 Excel 文件中。事实上，我已经冻结了 excel 文件的前 5 行（列名在第四行）。

如果我此时运行 SSIS，它运行良好。

现在，我在 excel 文件的第二行放置了 excel 文件的标题。但是在 SSIS 中，如果我右键单击 Excel 目标并单击编辑，然后转到映射选项卡，我无法看到目标列上的列名。我唯一看到的是标题和一些单元格（f1，f2）。

我该怎么做才能像以前一样看到我的目标列并且在 excel 文件上仍然有标题？

编辑：Excel数据：

```
Code    Code2   Code3   
AB         31     MQ    
AC         32     MR 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:11:25.767

我在 excel 文件上放置了一个命名范围，并使 Excel 目标指向该范围。所以问题解决了。谢谢！

# c# - Extenders（MaskEdit + Validator）的ajax textBox-watermark问题 - 设置自定义默认值

> ID：14042420
> 
> 赞同：2
> 
> 时间：2012-12-26T15:11:32.017
> 
> 标签：c#, javascript, asp.net, ajax

我正在尝试 通过使用事件 ( ) 为该“TBXinsertDate”`asp:TextBox`控件设置默认值，但是……在我看来，如果这是问题所在， 实际上它会用它自己的**操作覆盖我的操作，**
`focus``js``ajax watermark Extender`

 ****我如何设置自己的默认值？**

**`aspx`**

```
<cc1:TextBoxWatermarkExtender  ID="insertDate_TextBoxWatermarkExtender" runat="server" TargetControlID="TBXinsertDate" WatermarkText="insertDate" WatermarkCssClass="WaterMarkedTextBox">
</cc1:TextBoxWatermarkExtender>

<cc1:MaskedEditExtender enabled="true" MaskType="Date" ID="insertDate_MaskedEditExtender" runat="server" BehaviorID="tet"
                                TargetControlID="TBXinsertDate"  InputDirection="LeftToRight"  CultureName="en-GB" 
                                UserDateFormat="None" Mask="99/99/9999" MessageValidatorTip="true"  OnFocusCssClass="maskedFocus" ErrorTooltipEnabled="true" ErrorTooltipCssClass="toolTipForInvalid">
</cc1:MaskedEditExtender>

<asp:TextBox ID="TBXinsertDate" runat="server" ToolTip="please insert date" Width="76px">
                        </asp:TextBox> 
```

我知道，我可以使用任何类型的 datePicker ...，但要求是有问题的，通过键盘手动设置。

**更新**

默认应该是今天的日期，比如...26/12/2012

**更新 #2**代码

下面是：Javascript+Ajax双模水印

**Update3**和最***重要的一个***：

1）不是**这个Js代码**是我的问题的特殊之处......它甚至不是它的来源

2) 如果我从 ASPX 中省略 Ajax Extenders: `validation`+ ，则问题不存在！`maskEdit`

3）总结一下，问题是设置默认值=今天日期

如果我不添加扩展器 - `validator`+`Maskedit` 我的尝试工作正常！值已设置。

## 请有经验的人在`Ajax Toolkit`这里提供一些帮助。

我也会更新这个问题的标题

```
 var masked = "__/__/____";
    var MultiWatermark = function (obj, options) {

        var defaultOptions = {
            // These variables can be changed to alter functionality using the passed in options object
            watermarkVals: ["insert date", "mmddyyyy"], // all watermark values.
            totalIterations: 20, // how many times to go through watermark Array.
            watermarkClassName: "WaterMarkedTextBox",
            normalClassName: "NormalTextBox",
            changeDelay: 1000, // in milliseconds
            extraValsToCheck: ['', null]// 
        }

        //merge options with defaultOptions
        for (var property in defaultOptions) {
            if (!options.hasOwnProperty(property)) {
                options[property] = defaultOptions[property];
            }
        }

        // local variables (do not change)
        var textBox = obj;
        var iterationCounter = 0;
        var itemCounter = 0;
        var intrId;

        var startWatermark = function () {
            itemCounter = 0; iterationCounter = 0; // resets for after blur
            intrId = setInterval(function () { alterWaterMark() }, options.changeDelay);
        }

        var stopWatermark = function () {
            clearInterval(intrId);
        }

        var alterWaterMark = function () {

            if (iterationCounter < options.totalIterations) {

                textBox.value = options.watermarkVals[itemCounter];
                itemCounter += 1;
                if (itemCounter == options.watermarkVals.length) {
                    itemCounter = 0;
                    iterationCounter += 1;
                }

            }
            else {
                stopWatermark();
            }

        }

        var isWatermarkValue = function (val) {

            var i = options.watermarkVals.length;
            while (i--) {
                if (options.watermarkVals[i] === val) {
                    return true;
                }
            }
            // value is not in watermark array, so check secondary values.
            i = options.extraValsToCheck.length;
            while (i--) {
                if (options.extraValsToCheck[i] === val) {
                    return true;
                }
            }
        }

        var setClass = function () {
            textBox.className = isWatermarkValue(textBox.value) ? options.watermarkClassName : options.normalClassName;

          ///////this is wher i tried to set it <==========
            textBox.value = "26/12/2012";
        }

        var focusEvent = function () {

            stopWatermark();
            if (isWatermarkValue(textBox.value)) {
                textBox.value = "";

          ///////this is where  i was First time  trying to set it <==========

                //alert("was focused");
            }
            setClass()
        }

        var blurEvent = function () {

            if (isWatermarkValue(textBox.value)) {
                startWatermark();
            }
            setClass();

        }

        var initWatermark = function () {
            setClass();
            textBox.onfocus = focusEvent;
            textBox.onblur = blurEvent;
            startWatermark();
        }

        initWatermark();
    }

    function runWatermarkOn(formId, targetid, wm1,wm2,wm3, iterations, delay) {

        var dateOptions = {
            // These variables alter functionality, the main script will use the defaults of any options not included here 
            watermarkVals: [wm1, wm2], // all watermark values.
            totalIterations: iterations,
            changeDelay: delay, // in milliseconds
            extraValsToCheck: ['', null, masked]
        }
        if (wm3!= undefined)
            dateOptions.watermarkVals[2] = arguments[4];
        new MultiWatermark(document.forms[formId].elements[targetid], dateOptions);

    }
    runWatermarkOn("form1", "TBXinsertDate", "insert Date", "dd/mm/yyyy", undefined, 2, 1500); 
```

请参阅上面代码块中间的注释。那就是我尝试的地方。尝试硬编码今天的日期，因为它的价值。正如我所指的问题。这个想法是，我尝试使用什么 javascript 或 Jquery 并不重要，因为 MaskEditExtender 超过了我的价值。

我将非常感谢这里的一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:05:34.353

像往常一样，当问题的代码太长而无法通读时，由我解决

虽然代码不是问题，但正如我所说，是 Extender-MaskEdit 覆盖了我的价值观。

作为一种解决方法，我所做的是 C# onload 禁用 MaskEdit

```
 insertDate_MaskedEditExtender.Enabled = false; 
```

和 javascript

```
var MaskEdit1 = $('#BEHAVIOR-id' (not the standart one of the extender);
MaskEdit1.disabled = false; 
```**

# javascript - 如何将 id 从父表单传递给 JavaScript

> ID：14042423
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:11:50.953
> 
> 标签：javascript, jsf, jsf-2

假设我们有这个代码

```
<h:form id="#{id}">
    <h:panelGroup id="#{id}suggestionPanel">
        <h:panelGroup>
            <h:inputText value="#{searchString}"
                         rendered="#{validationId == null}"
                         id="#{id}search"
                         onkeyup="autocompleteHandler(this.value)"/>
        </h:panelGroup>
    </h:panelGroup>
</h:form> 
```

是否有可能将表单的 ID 传递给名为“autocompleteHandler”的 JavaScript 方法，或者通过其他方式获取 ID，然后 getElementById。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:18:06.377

每个输入元素都有一个`form`属性，该属性包含对其父表单的引用。您可以`this`在调用函数时将输入元素的引用传递给回调函数。然后，您可以在回调中读取传递元素的表单属性，以获取对表单的引用。表单元素将依次具有一个 ID 属性，用于保存表单 ID。

一个简单的示例如下所示：

**标记：**

```
<form id="test">
    <input type="text" onkeyup="autocompleteHandler(this);" />
</form>​ 
```

**JavaScript：**

```
function autocompleteHandler(elm) {
    alert(elm.form.id);
}​ 
```

[**演示**](http://jsfiddle.net/mjqWH/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:14:51.023

你总是可以使用 javascript 的 parentNode

```
var node = myElement;
var form = node.parentNode.parentNode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:16:48.453

在`autocompleteHandler`函数中，您可以简单地使用`this.form.id`.

`form`从输入中，您可以在属性中获取它所属的表单。

例子：

```
function autocompleteHandler(val) {
    alert(this.form.id);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:38:01.113

您好，我想出了一种方法来获取外部形式的ID，所以我想与您分享。这并不限制您使用输入标签或其他东西。

javascript 看起来像这样。

```
function autocompleteHandler(elem)
{       
    var x = elem.parentNode;
    if(x.nodeName == "FORM") 
    {
        //do something with your form
    }
    else
    {
        autocompleteHandler(x);
    }
} 
```

# ruby-on-rails-3 - 编译和未编译资产的rails环境问题

> ID：14042426
> 
> 赞同：0
> 
> 时间：2012-12-26T15:12:09.490
> 
> 标签：ruby-on-rails-3, sprockets

我希望这非常简单，因为它非常基础。使用资产管道在子子文件夹中获得了一个 CSS，例如

供应商->stylesheets->foo->bar->style.css

在这个 style.css 我得到了以下

背景图像：url（“../../Template/img/k.png”）

这在未编译资产和资源时有效（开发）

但不是在生产中.. 在生产中 ../ 需要被删除。

我如何让它在任何情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:19:14.870

最终，我将 css 文件移动到了我的 assets/styleshit 的根文件夹中，并且它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:18:54.810

尝试将您的图像移动到`app/assets/images`目录并将您的行替换为以下内容：

```
background-image: image-url('k.png') 
```

或者，如果您想保持文件夹层次结构，假设您的图像位于`app/assets/images/Template/img/`：

```
background-image: image-url('Template/img/k.png') 
```

[更多](http://edgeguides.rubyonrails.org/asset_pipeline.html)关于`-url`和提供`-path`帮助的信息`sass-rails`。

# android - Android：相机和画廊意图崩溃

> ID：14042431
> 
> 赞同：1
> 
> 时间：2012-12-26T15:12:29.913
> 
> 标签：android, crash, image-gallery, android-camera-intent

我修改了 Android SDK 示例中的示例，以便用户可以在手机中添加和保存联系人详细信息，同时引入一个名为“地理标签照片”的新照片实体。用户有两个选项（画廊或相机）来导入图像。

但是当用户从图库中选择图像时应用程序崩溃，如果用户拍照也是如此。

下面是我的课：

```
package com.example.android.contactmanager;   

public final class ContactAdder extends Activity implements OnAccountsUpdateListener
{
    public static final String TAG = "ContactsAdder";
    public static final String ACCOUNT_NAME =
            "com.example.android.contactmanager.ContactsAdder.ACCOUNT_NAME";
    public static final String ACCOUNT_TYPE =
            "com.example.android.contactmanager.ContactsAdder.ACCOUNT_TYPE";
    private final int CAMERA_PICTURE = 1;
    private final int GALLERY_PICTURE = 2;
    private ImageView userPictureImageView;
    private Intent pictureActionIntent = null;

    private ArrayList<AccountData> mAccounts;
    private AccountAdapter mAccountAdapter;
    private Spinner mAccountSpinner;
    private EditText mContactEmailEditText;
    private ArrayList<Integer> mContactEmailTypes;
    private Spinner mContactEmailTypeSpinner;
    private EditText mContactNameEditText;
    private EditText mContactPhoneEditText;
    private ArrayList<Integer> mContactPhoneTypes;
    private Spinner mContactPhoneTypeSpinner;
    private Button mContactSaveButton;
    private AccountData mSelectedAccount;
    private EditText mContactGeoPhotoEditText;
    /**
     * Called when the activity is first created. Responsible for initializing the UI.
     */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        Log.v(TAG, "Activity State: onCreate()");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact_adder);

        Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
        buttonLoadImage.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startDialog();
            }

        });

        // Obtain handles to UI objects
        mAccountSpinner = (Spinner) findViewById(R.id.accountSpinner);
        mContactNameEditText = (EditText) findViewById(R.id.contactNameEditText);
        mContactPhoneEditText = (EditText) findViewById(R.id.contactPhoneEditText);
        mContactEmailEditText = (EditText) findViewById(R.id.contactEmailEditText);
        mContactPhoneTypeSpinner = (Spinner) findViewById(R.id.contactPhoneTypeSpinner);
        mContactEmailTypeSpinner = (Spinner) findViewById(R.id.contactEmailTypeSpinner);
        mContactSaveButton = (Button) findViewById(R.id.contactSaveButton);
        mContactGeoPhotoEditText = (EditText) findViewById(R.id.PhotoLocation);

        mContactPhoneTypes = new ArrayList<Integer>();
        mContactPhoneTypes.add(ContactsContract.CommonDataKinds.Phone.TYPE_HOME);
        mContactPhoneTypes.add(ContactsContract.CommonDataKinds.Phone.TYPE_WORK);
        mContactPhoneTypes.add(ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE);
        mContactPhoneTypes.add(ContactsContract.CommonDataKinds.Phone.TYPE_OTHER);
        mContactEmailTypes = new ArrayList<Integer>();
        mContactEmailTypes.add(ContactsContract.CommonDataKinds.Email.TYPE_HOME);
        mContactEmailTypes.add(ContactsContract.CommonDataKinds.Email.TYPE_WORK);
        mContactEmailTypes.add(ContactsContract.CommonDataKinds.Email.TYPE_MOBILE);
        mContactEmailTypes.add(ContactsContract.CommonDataKinds.Email.TYPE_OTHER);

        // Prepare model for account spinner
        mAccounts = new ArrayList<AccountData>();
        mAccountAdapter = new AccountAdapter(this, mAccounts);
        mAccountSpinner.setAdapter(mAccountAdapter);

        // Populate list of account types for phone
        ArrayAdapter<String> adapter;
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        Iterator<Integer> iter;
        iter = mContactPhoneTypes.iterator();
        while (iter.hasNext()) {
            adapter.add(ContactsContract.CommonDataKinds.Phone.getTypeLabel(
                    this.getResources(),
                    iter.next(),
                    getString(R.string.undefinedTypeLabel)).toString());
        }
        mContactPhoneTypeSpinner.setAdapter(adapter);
        mContactPhoneTypeSpinner.setPrompt(getString(R.string.selectLabel));

        // Populate list of account types for email
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        iter = mContactEmailTypes.iterator();
        while (iter.hasNext()) {
            adapter.add(ContactsContract.CommonDataKinds.Email.getTypeLabel(
                    this.getResources(),
                    iter.next(),
                    getString(R.string.undefinedTypeLabel)).toString());
        }
        mContactEmailTypeSpinner.setAdapter(adapter);
        mContactEmailTypeSpinner.setPrompt(getString(R.string.selectLabel));

        AccountManager.get(this).addOnAccountsUpdatedListener(this, null, true);

        // Register handlers for UI elements
        mAccountSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int position, long i) {
                updateAccountSelection();
            }

            public void onNothingSelected(AdapterView<?> parent) {
                // We don't need to worry about nothing being selected, since Spinners don't allow
                // this.
            }
        });
        mContactSaveButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                onSaveButtonClicked();
            }
        });
    }

    @Override

  //working original
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {

        //try with integrated
         super.onActivityResult(requestCode, resultCode, data);
            if (requestCode == GALLERY_PICTURE)
            {
                Uri selectedImage = data.getData();
                if (selectedImage != null) 
                {
                    // User had pick an image.
                    Cursor cursor = getContentResolver().query(selectedImage, new String[] { android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
                    cursor.moveToFirst();
                    // Link to the image
                    final String imageFilePath = cursor.getString(0);
                    File photos = new File(imageFilePath);

                    Toast picturePath = Toast.makeText(this, imageFilePath, Toast.LENGTH_LONG);
                    picturePath.show();

                    Bitmap b = decodeFile(photos);
                    b = Bitmap.createScaledBitmap(b, 150, 150, true);
                    userPictureImageView.setImageBitmap(b);
                    cursor.close();

//                  ImageView imageView = (ImageView) findViewById(R.id.imgView);
//                  imageView.setImageBitmap(BitmapFactory.decodeFile(imageFilePath));

                }
                else 
                {
                    Toast toast = Toast.makeText(this, "No Image is selected.", Toast.LENGTH_LONG);
                    toast.show();
                }

            }
            else if (requestCode == CAMERA_PICTURE) {
                CheckEnableGPS();
                if (data.getExtras() != null) {
                    // here is the image from camera
                    Bitmap bitmap = (Bitmap) data.getExtras().get("data");
                    userPictureImageView.setImageBitmap(bitmap);

                    ImageView imageView = (ImageView) findViewById(R.id.imgView);
                }

            }

        }

    private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        }
        catch (FileNotFoundException e) {
        }
        return null;
    }

    private void startDialog() {
        AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
        myAlertDialog.setTitle("Select Pictures Option");
        myAlertDialog.setMessage("How do you want to set your picture?");

        myAlertDialog.setPositiveButton("Gallery", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT, null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
            }
        });

        myAlertDialog.setNegativeButton("Camera", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(pictureActionIntent, CAMERA_PICTURE);
            }
        });
        myAlertDialog.show();
    }

            private void CheckEnableGPS() 
            {

               String provider = Settings.Secure.getString(getContentResolver(),
               Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
               if(!provider.equals("")){
               //GPS Enabled
               Toast.makeText(ContactAdder.this, "GPS Enabled: " + provider, Toast.LENGTH_LONG).show();
               }
               else
               {
                       AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);
                       dlgAlert.setMessage("Please make sure that you turn on the GPS setting and have a clear view of the sky.");
                       dlgAlert.setTitle("Kindly Remind That...");
                       dlgAlert.setPositiveButton("OK", new DialogInterface.OnClickListener() 
                       {                   
                        @Override
                        public void onClick(DialogInterface arg0, int arg1) 
                        {
                            try
                            {
                                Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
                                startActivity(intent);
                            }//end try
                            catch(Exception e)
                            {
                                Toast.makeText(getBaseContext(),  "", Toast.LENGTH_LONG).show();
                            }//end catch
                        }//end onClick()
                    }).create();
                    dlgAlert.setCancelable(true);
                    dlgAlert.create().show();               
               }
            }

                public void onStatusChanged(String provider, int status, Bundle extras) {}
                public void onProviderEnabled(String provider) {}
                public void onProviderDisabled(String provider) {}

    private void geoTag(String absolutePath, double latitude, double longitude) {
        // TODO Auto-generated method stub

    }

    /**
     * Actions for when the Save button is clicked. Creates a contact entry and terminates the
     * activity.
     */
    private void onSaveButtonClicked() {
        Log.v(TAG, "Save button clicked");
        createContactEntry();
        finish();
    }

    /**
     * Creates a contact entry from the current UI values in the account named by mSelectedAccount.
     */
    protected void createContactEntry() {
        // Get values from UI
        String name = mContactNameEditText.getText().toString();
        String phone = mContactPhoneEditText.getText().toString();
        String email = mContactEmailEditText.getText().toString();
        int phoneType = mContactPhoneTypes.get(
                mContactPhoneTypeSpinner.getSelectedItemPosition());
        int emailType = mContactEmailTypes.get(
                mContactEmailTypeSpinner.getSelectedItemPosition());
//       String geotagPhoto = mContactGeoPhotoEditText.getText().toString() ;

        // Prepare contact creation request
        //
        // Note: We use RawContacts because this data must be associated with a particular account.
        //       The system will aggregate this with any other data for this contact and create a
        //       corresponding entry in the ContactsContract.Contacts provider for us.
        ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, mSelectedAccount.getType())
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, mSelectedAccount.getName())
                .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, name)
                .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, phone)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, phoneType)
                .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Email.DATA, email)
                .withValue(ContactsContract.CommonDataKinds.Email.TYPE, emailType)
                .build());
//        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
//              .withValue(ContactsContract.CommonDataKinds.Note.DATA1, geotagPhoto)
//              .build());

        // Ask the Contact provider to create a new contact
        Log.i(TAG,"Selected account: " + mSelectedAccount.getName() + " (" + mSelectedAccount.getType() + ")");
        Log.i(TAG,"Creating contact: " + name);
        try {
            getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
        } catch (Exception e) {
            // Display warning
            Context ctx = getApplicationContext();
            CharSequence txt = getString(R.string.contactCreationFailure);
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(ctx, txt, duration);
            toast.show();

            // Log exception
            Log.e(TAG, "Exceptoin encoutered while inserting contact: " + e);
        }
    }

    /**
     * Called when this activity is about to be destroyed by the system.
     */
    @Override
    public void onDestroy() {
        // Remove AccountManager callback
        AccountManager.get(this).removeOnAccountsUpdatedListener(this);
        super.onDestroy();
    }

    /**
     * Updates account list spinner when the list of Accounts on the system changes. Satisfies
     * OnAccountsUpdateListener implementation.
     */
    public void onAccountsUpdated(Account[] a) {
        Log.i(TAG, "Account list update detected");
        // Clear out any old data to prevent duplicates
        mAccounts.clear();

        // Get account data from system
        AuthenticatorDescription[] accountTypes = AccountManager.get(this).getAuthenticatorTypes();

        // Populate tables
        for (int i = 0; i < a.length; i++) {
            // The user may have multiple accounts with the same name, so we need to construct a
            // meaningful display name for each.
            String systemAccountType = a[i].type;
            AuthenticatorDescription ad = getAuthenticatorDescription(systemAccountType,
                    accountTypes);
            AccountData data = new AccountData(a[i].name, ad);
            mAccounts.add(data);
        }

        // Update the account spinner
        mAccountAdapter.notifyDataSetChanged();
    }

    /**
     * Obtain the AuthenticatorDescription for a given account type.
     * @param type The account type to locate.
     * @param dictionary An array of AuthenticatorDescriptions, as returned by AccountManager.
     * @return The description for the specified account type.
     */
    private static AuthenticatorDescription getAuthenticatorDescription(String type,
            AuthenticatorDescription[] dictionary) {
        for (int i = 0; i < dictionary.length; i++) {
            if (dictionary[i].type.equals(type)) {
                return dictionary[i];
            }
        }
        // No match found
        throw new RuntimeException("Unable to find matching authenticator");
    }

    /**
     * Update account selection. If NO_ACCOUNT is selected, then we prohibit inserting new contacts.
     */
    private void updateAccountSelection() {
        // Read current account selection
        mSelectedAccount = (AccountData) mAccountSpinner.getSelectedItem();
    }

    /**
     * A container class used to represent all known information about an account.
     */
    private class AccountData {
        private String mName;
        private String mType;
        private CharSequence mTypeLabel;
        private Drawable mIcon;

        /**
         * @param name The name of the account. This is usually the user's email address or
         *        username.
         * @param description The description for this account. This will be dictated by the
         *        type of account returned, and can be obtained from the system AccountManager.
         */
        public AccountData(String name, AuthenticatorDescription description) {
            mName = name;
            if (description != null) {
                mType = description.type;

                // The type string is stored in a resource, so we need to convert it into something
                // human readable.
                String packageName = description.packageName;
                PackageManager pm = getPackageManager();

                if (description.labelId != 0) {
                    mTypeLabel = pm.getText(packageName, description.labelId, null);
                    if (mTypeLabel == null) {
                        throw new IllegalArgumentException("LabelID provided, but label not found");
                    }
                } else {
                    mTypeLabel = "";
                }

                if (description.iconId != 0) {
                    mIcon = pm.getDrawable(packageName, description.iconId, null);
                    if (mIcon == null) {
                        throw new IllegalArgumentException("IconID provided, but drawable not " +
                                "found");
                    }
                } else {
                    mIcon = getResources().getDrawable(android.R.drawable.sym_def_app_icon);
                }
            }
        }

        public String getName() {
            return mName;
        }

        public String getType() {
            return mType;
        }

        public CharSequence getTypeLabel() {
            return mTypeLabel;
        }

        public Drawable getIcon() {
            return mIcon;
        }

        public String toString() {
            return mName;
        }
    }

    /**
     * Custom adapter used to display account icons and descriptions in the account spinner.
     */
    private class AccountAdapter extends ArrayAdapter<AccountData> {
        public AccountAdapter(Context context, ArrayList<AccountData> accountData) {
            super(context, android.R.layout.simple_spinner_item, accountData);
            setDropDownViewResource(R.layout.account_entry);
        }

        public View getDropDownView(int position, View convertView, ViewGroup parent) {
            // Inflate a view template
            if (convertView == null) {
                LayoutInflater layoutInflater = getLayoutInflater();
                convertView = layoutInflater.inflate(R.layout.account_entry, parent, false);
            }
            TextView firstAccountLine = (TextView) convertView.findViewById(R.id.firstAccountLine);
            TextView secondAccountLine = (TextView) convertView.findViewById(R.id.secondAccountLine);
            ImageView accountIcon = (ImageView) convertView.findViewById(R.id.accountIcon);

            // Populate template
            AccountData data = getItem(position);
            firstAccountLine.setText(data.getName());
            secondAccountLine.setText(data.getTypeLabel());
            Drawable icon = data.getIcon();
            if (icon == null) {
                icon = getResources().getDrawable(android.R.drawable.ic_menu_search);
            }
            accountIcon.setImageDrawable(icon);
            return convertView;
        }
    }
} 
```

logcat如下：</p>

```
12-26 15:15:13.628: V/ContactManager(377): Activity State: onCreate()
12-26 15:15:13.878: W/Resources(377): Converting to string: TypedValue{t=0x12/d=0x0 a=2 r=0x7f05000d}
12-26 15:28:33.378: V/ContactManager(410): Activity State: onCreate()
12-26 15:28:33.698: W/Resources(410): Converting to string: TypedValue{t=0x12/d=0x0 a=2 r=0x7f05000d}
12-26 15:29:17.698: I/TAG(410): You clicked item 1 at position 0
12-26 15:29:17.718: I/Show Contact Clicked:(410): Tan Chi WeeEmail: null
12-26 15:29:17.827: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 72K, 49% free 2782K/5379K, external 2032K/2137K, paused 53ms
12-26 15:29:20.018: W/KeyCharacterMap(410): No keyboard for id 0
12-26 15:29:20.018: W/KeyCharacterMap(410): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-26 15:29:20.158: W/Resources(410): Converting to string: TypedValue{t=0x12/d=0x0 a=2 r=0x7f05000d}
12-26 15:29:21.578: D/ContactManager(410): mAddAccountButton clicked
12-26 15:29:21.648: V/ContactsAdder(410): Activity State: onCreate()
12-26 15:29:21.758: I/ContactsAdder(410): Account list update detected
12-26 15:29:26.408: W/IInputConnectionWrapper(410): showStatusIcon on inactive InputConnection
12-26 15:29:29.348: D/AndroidRuntime(410): Shutting down VM
12-26 15:29:29.348: W/dalvikvm(410): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-26 15:29:29.359: E/AndroidRuntime(410): FATAL EXCEPTION: main
12-26 15:29:29.359: E/AndroidRuntime(410): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=2, result=-1, data=Intent { dat=content://media/external/images/media/1 (has extras) }} to activity {com.example.android.contactmanager/com.example.android.contactmanager.ContactAdder}: java.lang.NullPointerException
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.os.Looper.loop(Looper.java:130)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-26 15:29:29.359: E/AndroidRuntime(410):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 15:29:29.359: E/AndroidRuntime(410):  at java.lang.reflect.Method.invoke(Method.java:507)
12-26 15:29:29.359: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-26 15:29:29.359: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-26 15:29:29.359: E/AndroidRuntime(410):  at dalvik.system.NativeStart.main(Native Method)
12-26 15:29:29.359: E/AndroidRuntime(410): Caused by: java.lang.NullPointerException
12-26 15:29:29.359: E/AndroidRuntime(410):  at com.example.android.contactmanager.ContactAdder.onActivityResult(ContactAdder.java:221)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
12-26 15:29:29.359: E/AndroidRuntime(410):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
12-26 15:29:29.359: E/AndroidRuntime(410):  ... 11 more
12-26 15:29:31.818: I/Process(410): Sending signal. PID: 410 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:01:12.180

正如评论中提到的，你的崩溃是在这一行：

```
userPictureImageView.setImageBitmap(b); 
```

这意味着它`userPictureImageView`是空的。快速浏览您的代码可以确认这一点：您在类中定义它（作为成员变量），但从不定义它。

您需要`onCreate()`与其他人一起这样做：

```
userPictureImageView = (ImageView) findViewById(R.id.______); // Insert your ID here 
```

旁注：学习阅读 LogCat 日志：

```
12-26 15:29:29.359: E/AndroidRuntime(410): Caused by: java.lang.NullPointerException
12-26 15:29:29.359: E/AndroidRuntime(410):  at com.example.android.contactmanager.ContactAdder.onActivityResult(ContactAdder.java:221)

com.example.android.contactmanager.ContactAdder.onActivityResult(ContactAdder.java:221)
^-----------package--------------^ ^--class---^ ^-----method---^ ^---file--------^ ^line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:42:40.810

你在这里有一个空指针异常：在`com.example.android.contactmanager.ContactAdder.onActivityResult(ContactAdder.java:221)`

# javascript - 向下钻取热图图表

> ID：14042434
> 
> 赞同：4
> 
> 时间：2012-12-26T15:12:55.650
> 
> 标签：javascript, graph, charts, heatmap, drilldown

我需要 `drill down`热图图表。

我需要一些javascript框架。我查过了`extjs`，`highcharts`。但到目前为止，还没有什么吸引人的地方。

我想要的和谷歌分析完全一样。首先是世界地图

![在此处输入图像描述](../Images/8049a165940e74d21d4359bf5f3e50cb.png)

单击美国后，我将向下钻取到州级

![在此处输入图像描述](../Images/2ef99a2992d62fb1e290b75dbce5d6b8.png)

我们有任何谷歌API吗？有什么框架吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-26T15:50:22.247

我认为谷歌也在使用谷歌地图和分析的封闭。[https://developers.google.com/closure/](https://developers.google.com/closure/)

# c# - 有什么方法可以在不重写的情况下使这个 c# 类线程安全吗？

> ID：14042445
> 
> 赞同：6
> 
> 时间：2012-12-26T15:14:04.697
> 
> 标签：c#, multithreading

我喜欢在 C# 中创建类的快速方法，我们可以轻松地创建成员，而无需实现 get 和 set 代码，但是（据我所知）它们不是线程安全的！

```
public class SocksEntry
{
    public int Int1 { get; set; }
    public int Int2 { get; set; }
} 
```

C# 是否提供了一种快速简单的方法来添加线程安全而不必这样做？

```
public class SocksEntry
{
    protected object _lock = new object();

    // internal
    private int _int1 = 0;
    private int _int2 = 0;

    // accessors
    protected int Int1
    {
        get { lock (_lock) return _int1; }
        set { lock (_lock) _int1 = value; }
    }

    protected int Int2
    {
        get { lock (_lock) return _int2; }
        set { lock (_lock) _int2 = value; }
    }
} 
```

与非线程安全版本相比，它显然使整个类变得更大并且创建起来很痛苦！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T15:15:58.693

使类线程安全比您想象的要困难得多。在 getter 和 setter 周围加锁可能还不够。所以最好的做法是让类不是线程安全的，如果他需要线程安全，则让这个类的消费者负责同步对它的访问。如果消费者不需要线程安全，那很好，你不会因为你在类中构建线程安全而不需要它而惩罚应用程序的性能。为什么你认为 .NET 中 99.99% 的类不是线程安全的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:17:44.107

一句话，没有。

自动实现的属性很棒，但是当遇到限制时，就是这样。

但是，您可以创建一个[Visual Studio 片段](http://msdn.microsoft.com/en-us/library/ms165392%28v=vs.80%29.aspx)（如`prop`）来为您编写样板代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:49:27.270

最简单也是唯一正确的方法是使类[不可变](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)，因此只有读取操作可用。

```
public sealed class SocksEntry
{
    public int Int1 { get; private set; }
    public int Int2 { get; private set; }
} 
```

但是，如果这对于特定的业务实体是不可能的 - 公开一些业务方法而不是属性设置器，那么同步整个方法（想想事务）而不是每个属性设置器要容易得多，这有时是有意义的。

```
// lock entire business transaction if possible
public void UpdateEntity(int a, int b)
{
   lock (entityLock)
   {
       Int1 = a;
       Int2 = b;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T15:50:09.203

在 .NET 内存模型中，小于或等于平台指针大小（即`int`32 位、`long`64 位）的本机整数类型的读取和写入是原子的。原子意味着您可以在不使用锁的情况下读取和写入它，并且您永远不会读取或写入不完整的（即写入之间的中间值）值。

但是，.NET 不保证写入将立即对其他线程可见（这意味着您可以在线程 A 中写入，然后在线程 B 中读取，并且仍然读取旧值）。在 x86 上，您可以立即了解架构，但在其他平台上，您需要使用`volatile`字段或`Thread.MemoryBarrier`写入后。`lock`为您插入内存屏障，因此您无需担心。

另一件要考虑的事情是你如何*使用*这个类。虽然单个访问是原子的，`lock`但如果您想读取或写入多个字段作为一个原子操作，仍然需要 a 。（嗯，技术上并非总是如此——有时你可以做一些优化，但在你学习的时候坚持简单的东西）

简而言之：这`lock`有点矫枉过正——如果您需要立即可见性，您可以摆脱它并使用 volatile/barriers。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T15:19:44.733

我认为您所指的线程安全问题是这样的：

```
public int Value { get; set; }

public void Foo()
{
    if (this.Value > 0)   // Read the property and make a decision based on its present value
    {
        // Do something with the property, assuming its value has passed your test.
        // Note that the property's value may have been changed by another thread between the previous line and this one.
        Console.WriteLine(this.Value);
    }
} 
```

问题是属性值可能在您检查它和使用它之间发生了变化。无论您使用自动属性、支持变量还是问题中的锁，都会发生这种情况。正确的解决方案取决于您需要应用程序的行为方式（如果值在一行和另一行之间发生变化，它应该怎么做）。一个常见的解决方案是将值缓存在您使用它的函数中：

```
public int Value { get; set; }

public void Foo()
{
    int cachedValue = this.Value;

    if (cachedValue  > 0)
    {
        Console.WriteLine(cachedValue );
    }
} 
```

但是，这对于您的应用程序应该做的事情并不一定是正确的。

# c++ - Splay Tree Zig-Zag & Zag-Zig 旋转 ISSUE

> ID：14042446
> 
> 赞同：2
> 
> 时间：2012-12-26T15:14:05.713
> 
> 标签：c++, data-structures, binary-tree, splay-tree

好的，这里是 splay 算法，如果你想检查的话。 ![展开算法](../Images/b4f03a55eefd3b31149223fce723a96c.png)

这是我的伸展功能：

```
template <class WA>
void SplayTree<WA>::Do_Splay(SplayNODE<WA> *temp)   //temp is the node which is to be splayed
{
    if (temp==root) //if temp is root then
    {   return;     }   //Do Nothing

    else if (root->left==temp || root->right==temp) //else if temp is a child of root
    {
        if (root->left==temp)   //if temp is left child of root then
        {
            Zig(root);  //perform ZIG
        }
        else if (root->right==temp) //else if temp is right child of root then
        {
            Zag(root);  //perform ZAG
        }
    }
    else    //if temp is some node lower in tree then
    {
        SplayNODE<WA> *father = findfather(temp, root);
        SplayNODE<WA> *grandfather = findfather(father, root);
        //cout<<"\n\tf = "<<father->key<<"\tgf = "<<grandfather->key;
        ////--------------------------------------------------------------------//-------////
        if ( grandfather->left == father)   //if father itself is left child
        {
            if(father->left == temp)    //if temp is left child of father then
            {       //CASE = ZIG ZIG
                cout<<"\tZig(father)---Zag(grandfather)";
                Zig(grandfather);   
                Zig(father);        
            }

            else if ( father->right == temp )   //if temp is right child of father then
            {       //CASE = ZIG ZAG
                cout<<"\tZig(father)---Zag(grandfather)";
                Zig(father);    
                Zag(grandfather);
            }
        }
        //--------------------------------------------------------------------//-------////
        if (grandfather->right == father)   //if father itself is right child
        {
            if(father->right == temp) 
            {       //CASE = ZAG ZAG
                cout<<"\tZag(grandfather)---Zag(father)";
                Zag(grandfather);
                Zag(father);
            }
            else if (father->left == temp)
            {       //CASE = ZAG ZIG
                cout<<"\tZag(father)---Zig(grandfather)";
                Zag(father);
                Zig(grandfather);
            }
        }
        ////--------------------------------------------------------------------//-------////
    }
} 
```

**以下是 Zig (Single Rotate Left) & Zag (Single Rotate Right) 的方法。**

```
template <class WA>
void SplayTree<WA>::Zig(SplayNODE<WA> * & k2)   //k2 is temp node where imbalance is present & we have to rotate it
{
    SplayNODE<WA> *k1 = k2->left;   //create copy of temp's left & store it in k1
    k2->left = k1->right;   //make k1's right child as temp's left child
    k1->right = k2; //make k1 as parent of temp node    
    k2 = k1;    //assign k1 as new temp node (this is done because temp was passed by reference)
}
//==============================//==============================//
template <class WA>
void SplayTree<WA>::Zag(SplayNODE<WA> * & k2)
{
    SplayNODE<WA> *k1 = k2->right;  //create copy of temp's right child & store it in k1
    k2->right = k1->left;   //store k1's left child as temp's right child
    k1->left = k2;  //make k2 as left child of k1
    k2 = k1;    //assign k1 as temp node (due to reference of k2)
}
//==============================//==============================// 
```

&这是我的**问题。首先，我只在搜索功能中展开。即如果找到具有特定*密钥*的节点，则展开。

*我的搜索功能：*

```
template <class WA>
SplayNODE<WA>* SplayTree<WA>::search(SplayNODE<WA> *temp, WA value) /////PVT DEFINITION
{
    SplayNODE<WA> *to_searched = 0; //created new node pointer in which address of required node will be saved
    if (temp!=0)    //if arg. given temp node is not empty, then
    {
        if (temp->key==value)   //if temp node has user-specified value then
        {   
            to_searched = temp;     //assign address of temp to to_searched node, which will be return @ the end
            Do_Splay(temp); //perform splay at node which is found
        }   
        if (to_searched==0) //if node is still empt then
        {   to_searched = search(temp->left, value);    }   //recursive call to search in left sub-tree of temps
        if (to_searched==0) //if node is still empt then
        {   to_searched = search(temp->right, value);   }   //recursive call to search in right sub-tree of temps
    }
    return to_searched; //Finally return the searched node
}
//==============================//==============================// 
```

如果节点是根的子节点，则以下工作正常。- Zig Single - Zag Single 但是，一旦我们关闭一个节点，问题就开始了。我无法成功执行任何这些事情。 **之字形 - 之字形 - 之字形 - 之字形 - 之字形**

这是样本树。（之字形案例）

```
 20
       /  \
     10   25
    /  \
   5   15 
```

当搜索到 5 时，答案应该是。

```
 5
  \
  10
    \
    20
   /  \
  15  25 
```

但我的输出变成：

```
 20
  /  \
15   25 
```

无法弄清楚是什么问题。试运行这东西 100 次，但是。:( *任何和所有帮助表示赞赏。在此先感谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:01:12.030

在算法更改和尝试中...

{“X 是右-左孙子吗？”} ---YES---> {右旋转关于 p，左旋转关于 g}

{“X 是左右孙子吗？”} ---YES---> {左旋转关于 p，右旋转关于 g}

# java - 使用 TreeSet 计算磁盘交叉点

> ID：14042447
> 
> 赞同：9
> 
> 时间：2012-12-26T15:14:06.607
> 
> 标签：java

在我将实际测试作为工作申请的一部分之前，我正在尝试 Codility 的演示问题。他们的一个演示是一个问题，涉及计算磁盘阵列的磁盘交叉点的数量。

任务描述是

> 给定一个包含 N 个整数的数组 A，我们在 2D 平面中绘制 N 个圆盘，使得第 I 个圆盘以 (0,I) 为中心，半径为 A[I]。如果 J ≠ K 并且第 J 和第 K 圆盘至少有一个公共点，我们说第 J 个圆盘和第 K 个圆盘相交。写一个函数：class Solution { public int number_of_disc_intersections(int[] A); } ，给定一个描述 N 个圆盘的数组 A，如上所述，返回相交圆盘对的数量。

您可以在[此处](http://codility.com/c/intro/demoRHS3WV-H4J)查看测试。

有一些明显的 O(n^2) 时间复杂度解决方案，但目标是 O(n*log(n))。

我想出了这个，它适用于我提供的任何示例，以及 codility 给出的简单测试用例（ [1, 5, 2, 1, 4, 0] ），但 Codility 告诉我它在大多数情况下都失败了其他人，但我不太明白为什么。

它当然应该是 O(n log n)，因为将 n 个磁盘中的每一个添加到 TreeSet 是 log n，然后我们遍历每个磁盘，只有 O(1) 操作 TreeSet.headSet()。

```
import java.util.*;

class Circle implements Comparable<Circle> {
  long edge;
  int index;

  Circle (long e, int i){
    edge = e;
    index = i;
  }

  long getRightAssumingEdgeIsLeft(){
    return (long)(2*index - edge + 1);
  }

  @Override
  public int compareTo(Circle other){
    return Long.valueOf(edge).compareTo(other.edge);
  }
}

class Solution {
  public int number_of_disc_intersections ( int[] A ) {
    int N = A.length;
    if (N<2) return 0;
    int result = 0;

    SortedSet<Circle> leftEdges  = new TreeSet<Circle>();
    for (int i=0; i<N; i++) {
      leftEdges.add( new Circle( (long)(i-A[i]), i ) );
    }
    int counter = 0;
    for (Circle c : leftEdges) {
      long rightEdge = c.getRightAssumingEdgeIsLeft();
      Circle dummyCircle = new Circle (rightEdge, -1);
      SortedSet<Circle> head = leftEdges.headSet(dummyCircle);
      result +=  head.size() - counter;
      if (result > 10000000) return -1;
      counter++;
    }
    return result;
  }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T15:37:06.367

不同的算法（`O(N log N)`）：

这个糟糕的场景图：

![在此处输入图像描述](../Images/22caa1449fb2d332dd76b86a4d9ab604.png)

可以翻译成范围列表：（不完全一样的场景）

图 2 ![在此处输入图像描述](../Images/1db5ed8b21edb8f3d5723cf841a641f1.png)

O(N log N)：我们首先对标记进行排序，如果我们想将切线圆盘计算为重叠，请注意绿色标记出现在红色标记之前。

O(N)：我们从左到右扫描，`total`初始`= 0`和`overlaps`初始`= 0`。每次我们击中一个绿色标记，`total += 1`和每个红色标记，`total -= 1`。此外，在每个绿色标记处，`if total > 0, then overlaps += total`。

图2中的黑色数字在`total`每一步；橙色是`overlaps`。

那么`overlaps`应该就是答案了。

在此处查看粗略的实现：http: [//ideone.com/ggiRPA](http://ideone.com/ggiRPA)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T00:27:19.790

有一个更简单的方法...

1.  创建 2 个包含 N 个元素的数组（leftEdge、rightEdge）。
2.  对于每个元素计算左右边缘（索引 -/+ 值）并将其设置在数组中。
3.  对数组进行排序。
4.  对于 rightEdge 数组中的每个元素，循环遍历 leftEdge 数组以找到第一个更大或相等的元素。保存剩余元素的数量和当前索引。对于从保存的索引开始循环的下一个元素...

这样我们实际上只循环遍历每个排序数组一次，所以算法的复杂度是 O(N log N)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-04T05:08:54.747

此方法不需要任何特殊类，例如圆形或复杂容器，例如 PriorityQueue 或 TreeSet。只需要简单的整数数组。它是 O(N * logN)。语言是Java。

```
public int numberOfDiscIntersections(int [] A) {
    // 0 <= A.length <= 100,000
    // 0 <= A[i] <= 2147483647
    int [] leftEdge = new int[A.length];
    int [] rightEdge = new int[A.length];

    int maxLength = 100000;
    // maxLength is used to prevent integers > 2147483647
    // and integers < -2147483647
    for (int i = 0; i < A.length; i++) {
        leftEdge[i] = i - A[i];
        rightEdge[i] = i - maxLength + A[i];
    }
    Arrays.sort(leftEdge);
    Arrays.sort(rightEdge);

    int sum = mergeAndCountOverlaps(leftEdge,rightEdge, maxLength);
    return sum;
} 
```

合并例程是来自合并排序的修改合并。它合并两个排序数组，保持排序顺序不变并添加重叠计数功能。在这种情况下，我们不需要返回合并后的数组，只需要返回重叠计数。

```
private int mergeAndCountOverlaps(int[] leftEdge, int [] rightEdge, int maxLength) {
    int leftIndex = 0;
    int rightIndex = 0;
    int sum = 0;
    int total = 0;
    while ((leftIndex < leftEdge.length) || (rightIndex < rightEdge.length)) {
        if ((leftIndex < leftEdge.length) && (rightIndex < rightEdge.length)) {
            boolean compareLeftEdgeandRightEdge;
            if (leftEdge[leftIndex] < -2147483647 + maxLength) {
                compareLeftEdgeandRightEdge = leftEdge[leftIndex] <= rightEdge[rightIndex] + maxLength;
            } else {
                compareLeftEdgeandRightEdge = leftEdge[leftIndex] - maxLength <= rightEdge[rightIndex];
            }
            if (compareLeftEdgeandRightEdge) {
                // a new left edge
                sum += total;
                if (sum > 10000000) {
                    return -1;
                }
                total++;
                leftIndex++;
            } else {
                // a new right edge
                total--;
                rightIndex++;
            }
        } else if (leftIndex < leftEdge.length) {
            // a new left edge
            sum += total;
            if (sum > 10000000) {
                return -1;
            }
            total++;
            leftIndex++;
        } else if (rightIndex < rightEdge.length) {
            // a new right edge
            total--;
            rightIndex++;
        }
    }
    return sum;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T15:26:14.400

第一件事：你定义了 compareTo() 但不是 equals()。TreeSet JavaDoc 说：“*集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致*”

其他奇怪：我不明白这个`edge`领域是什么，也不明白你为什么把它设置为`i - A[i]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-09T19:02:12.950

我做了同样的演示来准备一个编程职位。我没有及时开发解决方案，结果得到了一个糟糕的分数（十几岁的时候）。然而，对这个问题很感兴趣，我继续自己完成了它。这是我的解决方案：

```
 ============================================================================
 Name        : cFundementalsTest.c
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

int main(void) {

    int N = 5;
    int A[6] = {1, 5, 2, 1, 4, 0 };

        int pos_1, pos_2;
        int total;
        for(pos_1=0;pos_1<=N;pos_1++)
        {
            for(pos_2=pos_1+1;pos_2<=N;pos_2++)
            {
                if(A[pos_1] + A[pos_2] >= abs(pos_1 - pos_2))
                { // they share a common point
                    total++;
                    printf("%d and %d\n",pos_1, pos_2);
                    if(total > 10000000)
                        return(-1);
                }
            }
        }
        printf ("\n\n the total is %d",total);
} 
```

这是看起来正确的结果：

```
0 and 1
0 and 2
0 and 4
1 and 2
1 and 3
1 and 4
1 and 5
2 and 3
2 and 4
3 and 4
4 and 5

 the total is 11 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-28T21:05:00.847

在[Codility 上](https://app.codility.com/programmers/lessons/6-sorting/number_of_disc_intersections/)，您需要使用排序来解决它，对吧？下面是**通过 100% 测试**的 JavaScript 解决方案。

我们在轴上使用两个范围数组`x`。两个数组中的值相同，但首先按`from`参数排序，然后按`to`（均升序）排序。然后我们同时扫描两个阵列并跟踪重叠以计算不同的对。

您可以在[jsbin](https://jsbin.com/keyavek/edit?js,console)中使用此代码。

```
function solution(arr) {
  const r1 = arr.map((n, i) => ({from: i - n, to: n + i})).sort((a, b) => a.from - b.from)
  const r2 = r1.slice().sort((a, b) => a.to - b.to)
  let i = 0, j = 0
  let overlaps = 0
  let pairs = 0

  while (i < r1.length || j < r2.length) {
    if (i < r1.length && r1[i].from <= r2[j].to) {
      pairs += overlaps
      if (pairs > 10000000) {
        return -1
      }
      overlaps++
      i++
    } else {
      overlaps--
      j++
    }
  }
  return pairs
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-05T14:58:20.117

```
class Solution {
    public int solution(int[] A) {
        // write your code in Java SE 8
        long[] leftpoint=new long[A.length];
        long[] rigthpoint=new long[A.length];
        if(A.length<2)return 0;

        for(int i=0;i<A.length;++i){
            leftpoint[i]=-A[i];
            leftpoint[i]+=i;
            rigthpoint[i]=A[i];
            rigthpoint[i]+=i;
        }
        Arrays.sort(leftpoint);
        Arrays.sort(rigthpoint);
        int intersection =0;
        int j=0;
        int i=0;
        int open=0;
        while(i<A.length&&j<A.length){
             if(rigthpoint[i]>=leftpoint[j]){
                   intersection+=open; 
                   open++; 
                   j++;
             }else{
                 open--;
                 i++;
             }
             if(intersection>10000000)return -1;
            }
        return intersection;
    }
} 
```

1）创建两个数组，一个用于圆圈的左侧，一个用于右侧 2）对数组进行排序 3）创建一个变量以保持您通过的左侧点的数量少于您通过的右侧点（打开），一个用于ans(intersection) and tow to run on the array 4）我们都有尚未关闭的开放点！对于任何小于左点的右点我们有一些额外的交点作为尚未关闭的点的数量所以我们将它们添加到答案 + (open++;"new open point 因为我们已经到达新的左点") 如果我们到达一个关闭的点，我们会从开放的圆圈中删除一个，因为一个圆圈将不再位于另一个交叉点 **该算法的想法是注意每个左点与仅比它小的左点相交，因此我们只能从左数左数比我们多多少！重要的是要理解，当有一个点关闭一个圆时，其中一个圆不再参与“开--”，因此如果左点小于的未闭合圆的数量仍然减去每个较大的左点检查点**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-24T15:28:38.217

这是 Python 中具有 O(N*LOG(N)) 时间复杂度的简单代码。

让我们描述一下代码的逻辑。

1.  我将 i（中心）和 A[i]（半径）转换为起点和终点。

    *   开始= iA[i]
    *   结束= i+A[i]
2.  将点添加到元组列表（开始/结束点，“打开或关闭状态”）

3.  根据开始/结束（升序）和“打开或关闭状态”（降序）对列表进行排序。在半径 = 0 的情况下，避免在“打开”状态之前“关闭”。

4.  从最低点到最高点（X 轴从左到右）开始处理，如果是“开放”点，则将其添加到相交的总和中，否则，只需减少开放点的数量（total_open）。

    ```
    import operator
    def solution(A):
     intersects=0
     n=len(A)
     points=[]
     for i in range(n):
         points.append((i-A[i],"open"))
         points.append((A[i]+i,"close"))

     points.sort(key=operator.itemgetter(1),reverse=True)
     points.sort(key=operator.itemgetter(0))
     total_open=0
     for i in points:
         if (i[1]=="open"):
             intersects+=total_open
             total_open+=1
         if(i[1]=="close"):
             total_open-=1
         #print("intersects", intersects,"\t Total:",total_open)
     if(intersects>10000000):
         return -1
     return intersects 
    ```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-04-24T16:19:08.790

假设 j 总是大于 i，为了满足两个圆相互作用，下面的不等式应该总是有效的：

```
|R(i) - R(j)| <= j - i <= R(i) + R(j) 
```

那是另一种说法：

```
abs(A[i] - A[j]) <= j - i <= A[i] + A[j] 
```

我没有测试过，但我认为它有效。希望能帮助到你。

```
#include <stdlib.h>

public int number_of_disc_intersections(int[] A){

    int len = A.length;
    int intersections = 0;

    for(int i = 0; i < len - 1; i++){

        if(A[i] <= 0){
            continue;
        }

        for(int j = i + 1; j < len; j++){

            if(A[j] <= 0){
                continue;       
            }

            if(abs((A[i] - A[j]) <= j - i) && (j - i <= A[i] + A[j])){
                intersections ++;
            }
        }
    }

    return intersections;
} 
```

# vba - 访问编译错误：参数不是可选的

> ID：14042449
> 
> 赞同：0
> 
> 时间：2012-12-26T15:14:10.300
> 
> 标签：vba, forms, function, ms-access, subform

我有一个访问数据库，这与我之前提出的问题类似，带有一个下拉列表和一个子表单。我希望能够从下拉列表中选择一个选项，并让它在下面的子表单中打开相应的子表单。这是我的代码...

```
Option Compare Database
Option Explicit

Private Sub btnCloseHRForms_Click()
  DoCmd.Close

End Sub

Private Sub cmbSelectFrms_AfterUpdate()
Select Case selectSubform
  Case 1
    Forms!frm_HRForms!subformHRForms.Form!subform1.Visible = True
  Case 2
    Forms!frm_HRForms!subformHRForms.Form!subform2.Visible = True
  Case 3
    Forms!frm_HRForms!subformHRForms.Form!subform3.Visible = True
End Select
End Sub

Private Sub Form_Load()
Dim dba As Database
Dim rst As Recordset
Dim SQL As String

Set dba = CurrentDb
Set rst = dba.OpenRecordset("tbl_Forms", dbOpenDynaset, dbSeeChanges)
SQL = "SELECT ListName FROM tbl_Forms"
Set rst = dba.OpenRecordset(SQL, dbOpenDynaset, dbSeeChanges)

Set rst = Nothing
Set dba = Nothing
End Sub

Function selectSubform(ID)
Dim dbacurrent As Database
Dim rstcurrent As Recordset
Dim SQL As String

Set dbacurrent = CurrentDb
SQL = "SELECT * FROM tbl_Forms WHERE ID = " & ID
Set rstcurrent = dbacurrent.OpenRecordset(SQL, dbOpenDynaset, dbSeeChanges)
selectSubform = rstcurrent.Fields("ID")

Set dbacurrent = Nothing
Set rstcurrent = Nothing

End Function 
```

有什么建议么？访问 VBA 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:06:08.283

您的函数 selectSubform(ID) 需要传递一个 ID 参数，而您没有传递一个。定义函数时：

```
Function selectSubform(ID)
    ' ... Do some stuff
    selectSubform = SomeValue
End Function 
```

您告诉编译器需要一个名为 ID 的参数。

顺便说一句，我强烈建议您在每个代码模块的顶部放置一个 Option Explicit 语句，并在编辑器中打开 Option Explicit 选项。这将要求您指明数据类型。就目前情况而言，我们不知道期望什么数据类型作为 ID 参数，也不知道您的函数返回什么数据类型（尽管在您的 Select Case 语句中使用明显的整数暗示了这一点）。做出一些假设，我会尝试以下更改（我现在无法对此进行测试，也无法与您的其余代码交谈）。

我在这里假设组合框中的选择是相应子表单的 ID。如果没有，您可能需要向我们说明 ID 参数的来源）：

```
Private Sub cmbSelectFrms_AfterUpdate()
    Select Case selectSubform(Me.cmbSelectForms)
        Case 1
            Forms!frm_HRForms!subformHRForms.Form!subform1.Visible = True
        Case 2
            Forms!frm_HRForms!subformHRForms.Form!subform2.Visible = True
        Case 3
            Forms!frm_HRForms!subformHRForms.Form!subform3.Visible = True
    End Select
End Sub 
```

这里可能还隐藏着其他问题。但是，将您的 VBA IDE 设置为需要显式变量声明并向每个代码模块添加 Option Explicit 将有助于您识别问题。

# postgresql - 使用 psql \copy 导入带有时间戳列 (dd.mm.yyyy hh.mm.ss) 的 .csv

> ID：14042452
> 
> 赞同：10
> 
> 时间：2012-12-26T15:14:30.380
> 
> 标签：postgresql, csv, timestamp, psql, postgresql-9.2

`psql \COPY`我正在尝试使用命令（而不是 SQL COPY）将 .csv 文件中的数据导入 postgresql 9.2 数据库。

输入 .csv 文件包含一个带有 dd.mm.yyyy hh.mm.ss 格式的时间戳的列。

我已经将数据库日期样式设置为 DMY 使用。

```
set datestyle 'ISO,DMY' 
```

不幸的是，当我运行`\COPY`命令时：

```
\COPY gc_test.trace(numpoint,easting,northing,altitude,numsats,pdop,timestamp_mes,duration,ttype,h_error,v_error) 
FROM 'C:\data.csv' WITH DELIMITER ';' CSV HEADER ENCODING 'ISO 8859-1' 
```

我收到此错误：

> 错误：日期/时间字段值超出范围：“16.11.2012 07:10:06”
> 
> 提示：也许您需要不同的“日期样式”设置。
> 
> 上下文：复制跟踪，第 2 行，列 timestamp_mes：“16.11.2012 07:10:06”

日期样式有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T15:28:26.663

您是否尝试过设置[*服务器*](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC-DATESTYLE)[`datestyle`的设置](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC-DATESTYLE)*？*

 *```
SET datestyle = 'ISO,DMY'; 
```

您正在使用 psql meta-command `\copy`，这意味着输入文件是客户端的本地文件。但仍然是服务器必须强制输入匹配的数据类型。

`\copy`更一般地说，与在服务器上调用`COPY`并与之密切相关的 psql 元命令不同。我引用[了有关以下内容的手册`\set`](http://www.postgresql.org/docs/current/interactive/app-psql.html)：

> 注意：此命令与 SQL 命令 SET 无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-05T09:02:37.260

我发现在应用 psql 命令时很难在同一个会话中应用 'SET datestyle'。更改整个数据库/服务器上的日期样式（仅用于导入）也可能会对其他用户或现有应用程序产生副作用。所以我通常在加载之前修改文件本身：

```
#!/bin/bash 
#
# change from dd.mm.yyyy to yyyy-mm-dd inside the file
# note: regex searches for date columns separated by semicolon (;) 
sed -i 's/;\([0-9][0-9]\)\.\([0-9][0-9]\)\.\([0-9][0-9][0-9][0-9]\);/;\3-\2-\1;/g' myfile
# then import file with date column
psql <connect_string> -c "\COPY mytable FROM 'myfile' ...." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T09:50:22.590

您似乎使用的日期样式是德语。PostgreSQL 支持这种日期样式。尝试使用这个：

```
SET datestyle TO German; 
```*

# ruby-on-rails - 如何测试轮胎 indexed_json 结果？

> ID：14042459
> 
> 赞同：0
> 
> 时间：2012-12-26T15:14:49.827
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

我想测试我的搜索方法，但如何测试`to_indexed_json`结果。

这是我的测试：

```
describe Search do
  before do
    Question.index.delete
    Question.tire.create_elasticsearch_index
    app = create :app, name: "Marketing", id: 76
    @question1 = create :question, content: "Some super question?", app: app
    @question2 = create :question, content: "Some extra question?", app: app
  end

  describe "#results" do
    it "returns matched results" do
      Search.new("Some", \[76\]).results.should == \[@question1, @question2\]
    end
  end
end 
```

这是我收到的错误：

![](../Images/804c496985aabe49ed6e242122a7f344.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:41:00.687

首先，您并没有真正`to_indexed_json`在发布的代码中进行测试——您正在测试对搜索结果的一些期望。这很好，实际上是更合理的做法:)，但仍然是另一回事。

其次，在集成测试中，一定要`Tire::Index#refresh`在索引测试数据后调用，这样它们就可以立即被搜索——默认延迟是 1 秒。

第三，您正在代码中创建一些测试模型，然后期望返回这些确切的对象。要使*轮胎*的行为如此，请使用`:load => true`选项（从数据库中加载模型），*或者*不要设置对对象等价的期望，而是测试例如。您的模型的某些属性（例如`content`）。

# python - Python：使用 Wing IDE 导入模块

> ID：14042462
> 
> 赞同：1
> 
> 时间：2012-12-26T15:14:53.060
> 
> 标签：python, import, module, wing-ide

我是 Python 新手，无法使用 Wing IDE/Python 2.7/Mac OS 导入模块

我已阅读： [从 Wing Ide 中的其他目录导入模块](https://stackoverflow.com/questions/5258104/import-module-from-other-directory-in-wing-ide)

和： [http ://docs.python.org/2/tutorial/modules.html](http://docs.python.org/2/tutorial/modules.html)

但我还是不明白。

如果如第二个链接中所示，我创建了一个 fibo.py 脚本并将其保存在我的 Python 路径中，那么当我尝试导入它时，我会遇到以下错误：

```
import fibo
Traceback (most recent call last):
File "<string>", line 1, in <fragment>
ImportError: No module named fibo 
```

虽然 fibo 在我输入时可用于自动完成

```
import 
```

我错过了什么？感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:22:54.703

该错误表明在路径上找不到模块，因此它位于错误的位置或路径不是您认为的那样。您可以查看 sys.path（在“import sys”之后）以查看路径。

我不确定为什么 Wing 会在那里提供自动完成功能。一种可能是您在项目属性中修改了 Python 路径（或 Wing 101 中的配置 Python 对话框），并且尚未从其选项菜单重新启动 Python Shell。

# logging - 部署到 Jetty 的每个战争的单独日志文件

> ID：14042467
> 
> 赞同：2
> 
> 时间：2012-12-26T15:15:27.517
> 
> 标签：logging, jetty, war, slf4j, logback

我有一个打包为 war 文件的 Web 应用程序，它使用 slf4j 作为日志记录外观。它取决于`slf4j-api-*.jar`，但内部不包含一个。我想将这场战争部署到 Jetty 并在 Web 容器端配置日志记录。
我已经把`slf4j-api-*.jar`,`logback-classic-*.jar`和`logback-core-*.jar`to`${jetty.home}/lib/ext`和`logback.xml`to `${jetty.home}/resources`, 我配置为将日志写入到`${jetty.home}/logs/jetty.log`.
这很好用，但我已将所有内容都记录到`jetty.log`. 我想将每个战争日志和码头自己的日志写入单独的文件。

1.  日志框架无关紧要，如果有帮助，我可以使用与 logback 不同的东西。
2.  我已经阅读了 logback 文档中的“记录分离”一章。这迫使我更改 web.xml 并将 logback jar 添加到战争中，所以这不是我想要的。
3.  我已经阅读了“Jetty/Tutorial/Sifting Logs with Logback”。它是关于按最热名称而不是按应用程序分隔的，所以它也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:49:50.250

在文档中，[使用 LogBack 筛选日志](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)，该示例使用[slf4j MDC](http://www.slf4j.org/api/org/slf4j/MDC.html)将“主机”设置为拆分。[您可以对自己的MDCHandler](https://github.com/jetty-project/jetty-and-logback-example/blob/master/jetty-slf4j-mdc-handler/src/main/java/org/eclipse/jetty/examples/logging/MDCHandler.java)使用任何您想要的拆分选择。

由于关键是使用 MDCHandler，它必须能够挖掘传入请求对象中存在的任何信息。（这样做的原因是 MDCHandler 不是 webapp 本身的 servlet 范围和上下文的参与者，因为它位于它的前面）

一种技术是使用[request.getContextPath()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)来拆分您的 webapp 已部署到的任何上下文。

# excel - 在 VBScript 中，有没有办法获取可以存在于任何目录中的文件的完整路径？

> ID：14042470
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:15:41.137
> 
> 标签：excel, vbscript, wsh, vba

目前，我正在使用`PATH`脚本语言对 .EXCEL 文件进行硬编码，如下所示：

```
 Set objExcel1 = CreateObject("Excel.Application")
    strPathExcel1 = "D:\VA\GE_Wing_To_Wing_Report.xlsx"
    Set objWB = objExcel1.Workbooks.open(strPathExcel1) 
```

在 VBScript 中，有没有办法`"D:\VA\`在运行时获取任何文件的完整路径？这样我就可以从我的脚本中删除这样的硬代码。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:39:41.123

您可以像其他答案建议的那样使用文件浏览器或输入框，但两者都对用户来说很烦人，如果将 excel 文件与脚本放在同一个地图中，则可以仅引用没有路径的文件名，您可以将其放入您在主脚本或页面中加载的配置文件，或者最后您可以将其作为参数提供给脚本，您可以在控制台命令或快捷方式中提供该参数。让我知道你喜欢哪个，然后我可以给你举个例子。

编辑：正如所承诺的，实际上在 Excel 的情况下它有点困难但并非不可能，请参阅这个例子

```
Set objExcel1 = CreateObject("Excel.Application")
objExcel1.visible = true
strPathExcel1 = CreateObject("Scripting.FileSystemObject").GetAbsolutePathName(".") & "\GE_Wing_To_Wing_Report.xlsx"
Set objWB = objExcel1.Workbooks.open(strPathExcel1) 
```

# excel-2007 - 使 RibbonUI 中的 xml 对象无效

> ID：14042471
> 
> 赞同：1
> 
> 时间：2012-12-26T15:15:45.973
> 
> 标签：excel-2007, excel-2010, fluent-ribbon

我在符合 2007/2010 的 Excel 文档中有一个 RibbonUI（Fluent Ribbon）。

当根据文件中包含的设置加载 excel 文件时，我可以成功地在 xml 文件中显示/隐藏选项卡/组。

如果我想将其范围扩展到单个按钮，我需要合并什么才能发生这种情况？

我是否需要将该`getVisible`属性扩展到每个有条件可见的按钮？

# objective-c - 如何在调整 timeInterval 时让 NSTimer 继续 - iOS

> ID：14042472
> 
> 赞同：0
> 
> 时间：2012-12-26T15:15:46.850
> 
> 标签：objective-c, ios, nstimer

我有一个旋钮可以`IBAction`调节.`timeInterval``NSTimer`

但我找不到一种方法让计时器在调整`timeInterval`. 我想这是因为我不断地使计时器无效并重新实例化，对吧？

有没有办法让它顺利工作 - 以便计时器将随着旋钮运动加速/减速？

```
-(IBAction)autoSpeed:(UISlider *)sender
{
    timeInterval = (60/sender.value) / 4;

    if (seqState){
        [self changeTempo];
    }

    [self displayBPM:[sender value]:[sender isTouchInside]];
}

-(void) changeTempo
{
    if (repeatingTimer!= nil) {
        [repeatingTimer invalidate];
        repeatingTimer = nil;
        repeatingTimer = [NSTimer scheduledTimerWithTimeInterval: timeInterval target:self selector:@selector(changeAutoSpeedLed) userInfo:nil repeats:YES];

    }
    else
        repeatingTimer = [NSTimer scheduledTimerWithTimeInterval: timeInterval target:self selector:@selector(changeAutoSpeedLed) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:49:23.493

它运行不顺畅的原因是因为您正在使用`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`，根据Apple的文档：

> 创建并返回一个新的 NSTimer 对象，并以默认模式将其安排在当前运行循环中。

默认模式被 UI 交互阻止，因此如果您控制旋钮，则计时器被阻止。如果您改为使用以下代码：

```
[[NSRunLoop currentRunLoop] addTimer:repeatingTimer forMode:NSRunLoopCommonModes]; 
```

那么代码将不会被 UI 阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:18:57.557

您可以在滴答声中重新创建计时器。

* * *

## .h 文件

您必须创建一个称为间隔的属性。

```
@property NSTimeInterval interval; 
```

* * *

## .m 文件

首先，初始化它：

```
self.interval = 100;
[self timerTick]; 
```

然后您可以使用该`timerTick`方法重新创建计时器，如果

```
- (void)timerTick {
    if (self.interval) {
        [self.timer invalidate];
        self.timer = [NSTimer scheduledTimerWithTimeInterval:self.interval target:self selector:@selector(timerTick) userInfo:nil repeats:YES];
        self.interval = 0;
    }

    // Do all the other stuff in the timer
} 
```

然后您可以随时设置`self.interval`，计时器将自动重新创建。

# php - PDO 连接：带有 SET NAMES / CHARACTER SET 的 UTF-8 声明？

> ID：14042474
> 
> 赞同：8
> 
> 时间：2012-12-26T15:16:06.357
> 
> 标签：php, pdo, character-encoding, database-connection

根据 php.net、Stack Overflow 和其他信任来源，我可以找到 4 种在 PDO 连接上设置 UTF-8 的不同方法，但找不到更好的选择：

```
$pdo_db = 'mysql:host=localhost;dbname=local_db;charset=utf8'; // METHOD #1
$pdo_login = 'root';
$pdo_pass = 'localpass';

$db = new PDO($pdo_db, $pdo_login, $pdo_pass, array(
    PDO::ATTR_ERRMODE => $localhost ? PDO::ERRMODE_EXCEPTION : PDO::ERRMODE_SILENT,
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8', // METHOD #2
));
$db->exec('SET NAMES utf8'); // METHOD #3
$db->exec('SET CHARACTER SET utf8'); // METHOD #4 
```

所以，我的理解是，方法 1 仅适用于 PHP 5.3+（但似乎有点错误），方法 2 仅适用于 MySQL。方法 3 和 4 之间的区别是[MySQL 的东西](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)，但我仍然不知道哪个更好。有没有办法在 PDO 属性中调用 SET NAMES，但不是只用于 MySQL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:42:20.733

在 DSN 中设置它是**唯一**正确的方法（尽管它仅从 5.3 开始支持）。
您可以同时使用这个`SET NAMES`。

所有其他方式将使臭名昭著的半虚构 GBK 注入成为可能。

请注意，您对 error_reporting() 的设置是完全错误的。它必须是无条件的-1。如果您担心*显示*`display_errors`错误 -可以在运行时设置一个适当的 ini 设置，称为。
虽然 error_reporting 设置错误*级别*并且应该始终处于最大值。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-26T15:19:58.397

我总是在我的 dbconfig 文件中写下这些代码：

```
mysql_query("SET character_set_results = 'utf8',
                 character_set_client = 'utf8', 
                 character_set_connection = 'utf8',
                 character_set_database = 'utf8',  
                 character_set_server = 'utf8'"); 
```

# asp.net - 设置asp:RadioButtonList的选中值

> ID：14042476
> 
> 赞同：0
> 
> 时间：2012-12-26T15:16:19.790
> 
> 标签：asp.net, radiobuttonlist

我有一个单选按钮列表，我找到以下解决方案来使用后面的代码设置所选值。

```
 RadioButtonList1.Items.FindByValue("1").Selected = true; 
```

我想知道是否有**不**使用背后代码的解决方案。下面的代码显然不起作用，但我想做如下的事情。提前致谢

```
 <asp:RadioButtonList ID="ItemValue" runat="server" Width="109px" value="<%# Bind("ID")%>">
                <asp:ListItem Value="1">Test1</asp:ListItem>
                <asp:ListItem Value="2">Test2</asp:ListItem>
   </asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T15:35:39.793

使用 Binding 时尝试使用 SelectedValue 而不是 Value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T15:41:00.790

rematnarab - 任何一种方法都应该工作 - 您的方法将所需项目的 selected 属性设置为 true，但不将其他项目设置为 false。

因此，ASPaiva 的方法是更好的方法，但是请注意，如果 SelectedValue 设置为不在单选按钮项目列表中的值，则不会发生任何事情。

# visual-studio-2010 - Visual Studio 在 RDLC 中遇到过

> ID：14042481
> 
> 赞同：0
> 
> 时间：2012-12-26T15:17:03.650
> 
> 标签：visual-studio-2010, visual-studio-2012, extension-methods, rdlc

好吧，我只是对这个错误有点好奇。每次我打开项目并为一个值设置表达式并使用一些扩展名时，都会出现一次此错误。但是它的扩展工作正常，在*设计时*我没有遇到这个错误的问题或崩溃。

我只想知道这个错误背后到底发生了什么以及为什么会出现这个错误，那么扩展是否正常工作？提前谢谢。

![在此处输入图像描述](../Images/a7885f93f9b8bd85c6adfd0d50c7c4c7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:27:34.447

Em...也许你应该按照建议使用 /log 参数启动 msvc 并检查日志中的错误描述？

# freebase - 是否有使用 SPARQL 查询 Freebase RDF 数据的 Web 界面？

> ID：14042484
> 
> 赞同：0
> 
> 时间：2012-12-26T15:17:17.337
> 
> 标签：freebase, mql

我知道 Freebase 最近以 RDF 文件的形式上传了他们的数据。是否有任何 Web 界面可以通过 SPARQL 端点查询此 RDF 数据？

此外，是否有任何 Web 门户可以上传此 RDF 文件，然后使用 SPARQL 查询它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:37:37.070

没有 Google/Freebase 提供的 SPARQL 端点。我从未听说过通用 RDF/SPARQL 托管服务（我想您正在寻找免费的东西）。这似乎不是一种可以开发可行的商业模式的事情。

当然，如果您没有可用的本地专用计算资源，您可以使用您最喜欢的 quad 存储和 SPARQL 前端启动一个 Amazon EC2 实例并将 RDF 转储加载到其中。

# jquery - 创建一个 Jquery 幻灯片动画

> ID：14042486
> 
> 赞同：0
> 
> 时间：2012-12-26T15:17:21.750
> 
> 标签：jquery, jquery-animate, slideshow

我正在尝试创建自己的幻灯片，我知道有很多可用的插件，但我找不到任何符合我需求的插件。

幻灯片本身可以工作，我遇到的问题是动画。当你多次点击下一个按钮时，一切都搞砸了..

.stop() 和 .clearQueue() 函数都起作用，因为这会使动画在没有先完成的情况下停止。

来源： [http ://www.alphadesigns.nl/ADtest/JQ/js/portfolio.js](http://www.alphadesigns.nl/ADtest/JQ/js/portfolio.js)

预览： [http ://www.alphadesigns.nl/ADtest/JQ/](http://www.alphadesigns.nl/ADtest/JQ/)

任何帮助表示赞赏！

附言。幻灯片本身并没有通过长镜头完成，“巨大的图像”将更改为较小的缩略图等，但我首先希望动画能够正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:38:40.037

从您的脚本来看，您似乎正在陷入竞争状态。您删除和添加类的速度比您想象的要快，因此在您打算只选择一个项目时，您会选择多个项目。

例如：

```
slidecontent = $('.slidecontent');
slideimg.prepend(slidecontent.children('img').addClass('slidecontent'));
slidecontent.removeClass('slidecontent').addClass('slideleft thisclassc'); 
```

在您的`previmg`功能中，您有上述几行。如果您过快地单击触发此功能的按钮，您最终会在对象中拥有多个项目，`slidecontent`因为您将相同的类分配给列表中的下一个元素。您需要以某种方式锁定该功能，直到它完成，或者您需要制作更具体的选择器。

我能想到的最简单但不是最优雅的方法是创建一个锁定标志。然后，您将在函数运行之前测试锁定标志以避免竞争条件**并设置即时超时，以便您立即返回并忽略额外的点击**：

```
var animActive = false;

$.fn.previmg = function(){
    $(this).click(function(){
        if(totalrightimg != 0 && animActive==false){
            animactive = true;
            setTimeout(function(){
                //everything else
                animactive = false;
            },0);
        }
        else if(totalrightimg == 0 && animActive==false){
            animactive = true;
            setTimeout(function(){
                //everything else
                animactive = false;
            },0);
        }
    }
}); 
```

如果您添加此变量然后进行此检查，您将确保避免竞争条件，因为您不会在彼此之上运行操作。每次操作运行时，它都会锁定其再次运行的能力，直到完成为止。因此，后续的点击将被忽略。

如果这种行为是不可取的，你会想研究一种方法来缩小你的 ' `slidecontent`' 类的选择器，这样你就可以确保你只选择一个元素。

编辑：完全忽略了点击事件的同步处理。我的错。上面的代码将强制锁定和解锁到不同的范围，因此您应该可以安全地执行更改代码。

# java - 如果用户尝试使用无效的用户名和密码登录超过 3 次，如何将用户转发到“resetPassword”页面（STRUTS2）

> ID：14042488
> 
> 赞同：0
> 
> 时间：2012-12-26T15:17:32.350
> 
> 标签：java, struts2, interceptor

我想实现：

如果用户尝试使用无效的用户名和密码登录超过 3 次。我想将它们转发到我的“重置密码页面”。

这背后的逻辑是什么。我无法理解这个问题的确切逻辑。请帮忙。

我想应用的内容：从我的表单文本字段传递默认值作为`Login_attempt=1`我的表单，

```
//geter & setter of loginAttempt
if(loginAttempt>3)
{
    return resetPassword;//forwarding to resetPassword.jsp from my struts.xml
} 
else
{    
    //perform other tasks
} 
```

但是从我上面的逻辑我有疑问：我怎样才能`loginAttempt`在每次提交表单时增加值。这样我上面的代码就可以为我工作。

如果您有任何其他逻辑要实现。请与我分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:31:51.437

随心所欲地这样做会成为一个安全漏洞，因为尝试次数将成为 html 的一部分，因此任何人都可以更改它（您不需要特殊工具，例如，您可以使用 chrome 开发工具来做到这一点）。因此，考虑到这一点，一些恶意用户可以让程序无限尝试暴力攻击。

为了避免这种安全漏洞，您可以使用以下方法之一：

*   存储会话中的尝试次数。在我看来，鉴于您使用 Struts2 作为您的框架，这是最简单的方法。要在 Struts2 Action 中获取会话，您应该实现[SessionAware](http://struts.apache.org/2.0.11/struts2-core/apidocs/org/apache/struts2/interceptor/SessionAware.html)接口。此外，一旦用户成功登录，不要忘记重置尝试的值。

*   一些开发人员不喜欢使用会话，所以他们使用数据库。就性能而言，这是一种比会话更好的方法，特别是在您的网站拥有大量用户的情况下。

*   另一种选择是在表单中使用 cookie 甚至隐藏参数，但对其信息进行加密（例如，第一个是 Ruby on Rails 框架的方法）。

最佳选择取决于您的项目要求。在我自己看来，除非您使用一些支持它的框架或工具，否则您不应该使用最后一个选项。

要在其他两个选项之间进行选择，一个好的指标是您希望您的网站拥有的用户数量（如果您的用户数量很少或者您正在做一个私人网站，那么会话可能是一个更好的方法。数据库总是很好，但是所需的开发时间通常更长，并且可能对可维护性更有害）。

当然，还有更多的解决方案，但我想我已经介绍了最常见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:19:54.677

大致回答您的新问题，完全未经测试：

```
public class LoginAction {
    // Getters, setters, password checking, utils, etc. elided.

    public String execute() {
        return tooManyAttempts(password) ? RESET_PASSWORD : SUCCESS;
    }

    public boolean tooManyAttempts(String password) {
        Integer attempts = default(session.get(LOGIN_ATTEMPTS), 0);
        attempts = passwordCorrect() ? 0 : attempts + 1;
        session.put(LOGIN_ATTEMPTS, attempts);
        return attempts > 3;
    }
} 
```

您的代码有点难以阅读。

# python - 如何在 python 中访问“常规”私有变量？

> ID：14042491
> 
> 赞同：0
> 
> 时间：2012-12-26T15:17:55.463
> 
> 标签：python, variables, accessor, private-members

我有一个 python 模块，m1。

```
# m1.py
class C1(object):
    def __init__(self):
        self.__pri = 10
        self._pro = 5
        self.pub = 1 
```

然后在bpython中，

```
>>> import m1
>>> c = m1.C1()
>>> c.__pri
Traceback (most recent call last):
  File "<input>", line 1, in <module>
AttributeError: 'C1' object has no attribute '__pri'
>>> c._pro
5
>>> c.pub
1
>>> dir(c)
['_C1__pri', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', 
'__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_pro', 'pub']
>>> c._C1__pri
10 
```

我认为python中没有私有变量的概念。我们现在如何解释这种行为？

编辑：我期待直接访问 c.__pri 但事实证明这`name mangling`阻止了我这样做，如下面的回答。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:21:43.030

双下划线将类名与属性相混淆，前缀为单个下划线

```
 c._C1__pri 
```

允许访问该属性。有点像伪隐私，但它还有其他用途。我不确定你期望会发生什么`c.__private`。我认为您打算这样做，`c.__pri`尽管结果是相同的。

该`__pri`属性不是私有的，因为它可以在类之外访问，只需额外添加几个字符即可。

正如下面提到的 jadkik94，这并不是要使其无法访问，而是向另一个程序员发出信号，表明他们不应该使用该属性。

仅供参考，这可能会派上用场是在使用继承时

```
class Parent: 
    def __method(self): 
        print 'Parent method'

class Child(Parent): 
    def __method(self): 
        print 'Child method'

>>> c = Child()
>>> c._Child__method()
Child method
>>> c._Parent__method()
Parent method 
```

双下划线可防止名称被意外覆盖（并非经常出现这种情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:22:09.027

[名称修改](http://docs.python.org/release/1.5/tut/node67.html)

这提供了一种声明*私有**类*成员的方法。

这种双下划线名称修饰有助于防止覆盖子类中的内部私有变量。

表明不应使用成员变量的典型方法是在其前加一个下划线，尽管这只是一个约定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:22:35.697

您正在观察的是[*name mangling*](http://docs.python.org/release/1.5/tut/node67.html)，其中具有两个前导下划线和最多一个尾随下划线的变量的名称被重命名以防止与子类发生意外冲突并防止临时黑客修改私有字段。

但是，很容易在修改后确定变量的名称是什么，因此它不会挫败确定的病态用户。

# c# - 休眠条件：返回空列表

> ID：14042492
> 
> 赞同：1
> 
> 时间：2012-12-26T15:17:57.420
> 
> 标签：c#, nhibernate

有这样的类结构
Permit -> Financial ->ICollection instrumentList
Instrument -> Agency

也就是说，Permit 实例包含 Financial
实例 Financial 实例包含 Instrument 对象集合 Instrument
实例包含 Agency

使用 NHibernate Critieria，我想获取带有某种类型机构的工具的许可证列表
此代码获取所有带有财务信息的许可证（可能是许可证没有财务信息的情况，在这种情况下我没有'不需要它）

```
// get all all Permits with Financial info
var financialCriteria = DetachedCriteria.For<Financial>()
       .SetProjection(Projections.Property("Permit.Id")); // Permit.Id in Select 

queryCriteria.Add(Subqueries.PropertyIn("Id", financialCriteria)); // Permit.Id in Select 
```

然后我想将该列表限制为类型 2 和 3 的代理：

```
// then restrict to certain Agency types
var instrumentCriteria = DetachedCriteria.For<Instrument>()
    .SetProjection(Projections.Property("Id")) // Instrument.Id in Select
    .Add(Restrictions.In("Agency", new object[] { 2, 3})); // Where

queryCriteria.Add(Subqueries.PropertyIn("Id", instrumentCriteria)); // 
```

但是，当使用第二块代码运行时，当我知道有 2 和 3 时，我会返回一个空列表。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:43:46.860

如果我确实了解您的情况，则`instrumentCriteria`返回 Instrument **ID**列表。所以有了这个列表，我们不应该限制`queryCriteria`但`financialCriteria`. 所以试试这个：

```
financialCriteria.Add(Subqueries.PropertyIn("Id", instrumentCriteria)); 
```

而不是*queryCriteria.Add(Subqueries.PropertyIn("Id", instrumentCriteria));*

的结果（投影）`instrumentCriteria`应该是拥有的`Financial`ID：

```
var instrumentCriteria = DetachedCriteria.For<Instrument>()
    .SetProjection(Projections.Property("Financial.Id")) // owner ID 
```

编辑：

如果它`Instrument`可以引用`Financial`，或者至少有属性`FinancialId`，返回 Permit 的语法，由 Agency 过滤将如下所示：

```
var instrumentCriteria = DetachedCriteria.For<Instrument>()
    // I. Financial as a reference
    .SetProjection(Projections.Property("Financial.ID")) 
    // II. or just a int property FinancialId
    // .SetProjection(Projections.Property("FinancialId")) 
    .Add(Restrictions.In("Agency.ID", new object[] { 2, 3 })); // Where

var financialCriteria = DetachedCriteria.For<Financial>()
    .SetProjection(Projections.Property("ID")) // the ID of instrument
    .Add(Subqueries.PropertyIn("ID", instrumentCriteria));

var queryCriteria = session.CreateCriteria<Permit>()
    .Add(Subqueries.PropertyIn("Financial.ID", financialCriteria));

var result = queryCriteria.List<Permit>();
Assert.IsTrue(result.Any()); 
```

# android - DialogFragment - 屏幕旋转后保留监听器

> ID：14042495
> 
> 赞同：31
> 
> 时间：2012-12-26T15:18:31.890
> 
> 标签：android, android-fragments, android-lifecycle

我有一个创建 DatePickerDialog 的 DialogFragment。我正在使用一个调用`newInstance`来设置初始值的静态方法，以便使用默认的空构造函数。但是，我应该如何设置监听器？屏幕旋转后，当点击“完成”按钮时，监听器不做任何事情，因为它不存在。

```
public class DatePickerFragment extends DialogFragment {
    public static final String ARG_YEAR = "year";
    public static final String ARG_MONTH = "month";
    public static final String ARG_DAY = "day";

    private OnDateSetListener listener_;

    public static DatePickerFragment newInstance(OnDateSetListener listener, int year, int month, int day) {
        final DatePickerFragment date_picker = new DatePickerFragment();
        date_picker.setListener(listener);

        final Bundle arguments = new Bundle();
        arguments.putInt(ARG_YEAR, year);
        arguments.putInt(ARG_MONTH, month);
        arguments.putInt(ARG_DAY, day);
        date_picker.setArguments(arguments);

        return date_picker;
    }

    private void setListener(OnDateSetListener listener) {
        listener_ = listener;
    }

    @Override
    public Dialog onCreateDialog(Bundle saved_instance_state) {
        final Bundle arguments = getArguments();
        final int year = arguments.getInt(ARG_YEAR);
        final int month = arguments.getInt(ARG_MONTH);
        final int day = arguments.getInt(ARG_DAY);

        return new DatePickerDialog(getActivity(), listener_, year, month, day);
    }
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-26T18:59:30.060

> 但是，我应该如何设置监听器？

`onCreate`您在以下方法中更新侦听器引用`Activity`：

```
private OnDateSetListener mOds = new OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
             // do important stuff
    }
}; 
```

并在`onCreate`方法中：

```
if (savedInstanceState != null) {
    DatePickerFragment dpf = (DatePickerFragment) getSupportFragmentManager()
            .findFragmentByTag("theTag?");
    if (dpf != null) {
        dpf.setListener(mOds);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-27T09:55:27.747

在我看来，使用 Fragment 生命周期有一种更有效的方法。您可以使用片段生命周期回调`onAttach()`并`onDetach()`自动将活动转换为侦听器，如下所示：

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        _listener = (OnDateSetListener)activity;
    } catch(ClassCastException e) {
        // check if _listener is null before using,
        // or throw new ClassCastException("hosting activity must implement OnDateSetListener");
    }
}

@Override
public void onDetach() {
    super.onDetach();
    _listener = null;
} 
```

此技术[在此处正式记录](http://developer.android.com/guide/components/fragments.html#EventCallbacks)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-01T18:37:43.993

Luksprog 的答案是正确的，我只想指出，解决的关键是 findFragmentByTag() 函数。因为 Activity 也会在屏幕旋转后重新创建，所以不能调用其成员 Fragment 变量的 setter 函数，而是应该通过该函数找到旧的 Fragment 实例。

顺便说一句，标签是调用 DialogFragment.show() 时的第二个参数。

# c++ - 异步 I/O 回调方法并发

> ID：14042499
> 
> 赞同：0
> 
> 时间：2012-12-26T15:18:54.607
> 
> 标签：c++, concurrency, concurrent-programming, overlapped-io

我已经用我担心并发的回调实现了异步 I/O。我向你提出异议，因为我总是使用同一个文件，并且操作系统文件**物理**I/O 基本上是同步操作，所以我的回调方法中不需要锁定机制 - 但我很可能在这里错了- 输入 SO :o) 我有一个缓冲区管理器，当读取操作完成时，它会将读取的数据放入其缓冲区缓存中，并且有一个基于 EOverlappedStates 枚举状态的每个重叠操作的状态引擎；“I/O 未启动”、“成功”和“错误”。你认为我需要锁定回调方法来确保像我们这样的多线程程序的并发性吗？

打开文件：

```
OS_FILE_HANDLE CUniformDiskInterface::OpenFile(const wchar_t *fileName, bool *fileExists, bool readData, bool writeData, bool overlap, 
bool disableDiskCache, bool disableOsCache, bool randomAccess, bool sequentalScan) {
// Set access method
DWORD desiredAccess = readData ? GENERIC_READ : 0;
desiredAccess |= writeData ? GENERIC_WRITE : 0;

// Set file flags
DWORD fileFlags = disableDiskCache ? FILE_FLAG_WRITE_THROUGH : 0;
fileFlags |= disableOsCache ? FILE_FLAG_NO_BUFFERING : 0;
fileFlags |= randomAccess ? FILE_FLAG_RANDOM_ACCESS : 0;
fileFlags |= sequentalScan ? FILE_FLAG_SEQUENTIAL_SCAN : 0;
fileFlags |= !fileFlags ? FILE_ATTRIBUTE_NORMAL : 0;
fileFlags |= overlap ? FILE_FLAG_OVERLAPPED : 0;

HANDLE hOutputFile = CreateFile(
    fileName,
    desiredAccess,
    0,
    NULL,
    OPEN_EXISTING,
    fileFlags,
    NULL); 
```

读取文件：

```
_UINT64 CUniformDiskInterface::ReadFromFile(OS_FILE_HANDLE hFile, void *outData, _UINT64 bytesToRead, OVERLAPPED *overlapped, LPOVERLAPPED_COMPLETION_ROUTINE completionRoutine) {
DWORD wBytesRead = 0;

BOOL result = completionRoutine ? 
    ReadFileEx(hFile, outData, (DWORD)(bytesToRead), overlapped, completionRoutine) : 
    ReadFile(hFile, outData, (DWORD)(bytesToRead), &wBytesRead, overlapped);

if (!result)
{
    int errorCode = GetLastError();
    if (errorCode != ERROR_IO_PENDING )
    {
        wstringstream err(wstringstream::in | wstringstream::out);
        err << L"Can't read sectors from file. [ReadFile] error #" << errorCode << L".";
        throw new FileIOException(L"CUniformDiskInterface", L"ReadFromFile", err.str().c_str(), GETDATE, GETFILE, GETLINE); 
    }
}

return (_UINT64)wBytesRead; } 
```

扩展重叠结构：

```
 /*!
        \enum EOverlappedStates
        \brief The different overlapped states
        \details Used as inter-thread communication while waiting for the I/O operation to complete 
        */
        enum EOverlappedStates
        {
            /** The I/O operation has not started or in in-progress */
            EOverlappedNotStarted, 

            /** The I/O operation is done and was successful */
            EOverlappedSuccess, 

            /** The I/O operation is done but there was an error */
            EOverlappedError
        };

        /*!
        \struct OverlappedEx
        \brief Extended overlapped structure
        */
        struct OverlappedEx : OVERLAPPED
        {           
            /** The buffer manager that is designated to cache the record when it's loaded */
            CBufferManager *bufferManger;

            /** Transaction ID related to this disk I/O operation */
            _UINT64 transactionId;

            /** Start disk sector of the record */
            _UINT64 startDiskSector;

            /** Buffer */
            void *buffer;

            /** Number of bytes in \c buffer */
            _UINT64 bufferSize;

            /** Current overlapped I/O state. Used for inter-thread communication while waiting for the I/O to complete */
            EOverlappedStates state;

            /** Error code, or \c 0 if no error */
            _UINT32 errorCode;
        }; 
```

回调方法：

```
 /*! \brief Callback routine after a overlapped read has completed
\details Fills the buffer managers buffer cache with the read data
\todo This callback method may be a bottleneck, so look into how to handle this better
*/
VOID WINAPI CompletedReadRoutine(DWORD dwErr, DWORD cbBytesRead, LPOVERLAPPED lpOverLap) 
{ 
    OverlappedEx *overlapped = (OverlappedEx*)lpOverLap;
    overlapped->errorCode = (_UINT32)dwErr;

    if (!dwErr && cbBytesRead) 
    { 
        overlapped->state = EOverlappedSuccess;
        overlapped->bufferManger->AddBuffer(overlapped->startDiskSector, overlapped->buffer, overlapped->bufferSize);
    }
    else
    {
        // An error occurred
        overlapped->state = EOverlappedError;
    }
} 
```

用法：

```
 _UINT64 startDiskSector = location / sectorByteSize;
void *buffer = bufferManager->GetBuffer(startDiskSector);
if (!buffer)
{
    /*
    The disk sector was not cached, so get the data from the disk and cache in internal memory with
    the buffer manager
    */
    buffer = new char[recordByteSize];

    // Create a overlapped structure to enable disk async I/O operations
    OverlappedEx *overlapped = new OverlappedEx;
    memset(overlapped, 0, sizeof(OverlappedEx));
    overlapped->Offset = (DWORD)(startDiskSector & 0xffffffffULL);
    overlapped->OffsetHigh = (DWORD)(startDiskSector >> 31ULL);
    overlapped->hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    overlapped->bufferManger = bufferManager;
    overlapped->startDiskSector = startDiskSector;
    overlapped->buffer = buffer;
    overlapped->bufferSize = recordByteSize;
    overlapped->state = EOverlappedNotStarted;

    // Read from disk
    diskApi.ReadFromFile(fileHandle, buffer, sectorByteSize, overlapped, CompletedReadRoutine);
    return overlapped;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:41:15.040

根据[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365468%28v=vs.85%29.aspx)，回调函数只会在调用该`ReadFileEx`函数的同一线程上被调用，并且只有在线程等待事件发生时才会被调用。因此，保证调用`ReadFileEx`和调用回调之间没有同步问题。

这意味着只要只有一个线程尝试读取该结构的特定实例，就不需要同步对`OverlappedEx`数据结构的访问，这相当于仅从一个线程读取特定文件。如果您尝试从多个线程读取单个文件，您可能会在 Windows 本身中遇到问题（我认为异步 I/O 本身不是线程安全的），因此锁定互斥锁对您没有帮助在这种情况下。

# jqgrid - Jqgrid xml数据填充

> ID：14042507
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:19:28.850
> 
> 标签：jqgrid

我有一个数组列表，其中包含多个不同大小的数组列表。我需要在接受 xml 输入的 jqgrid 中填充这些数据。可以做些什么来实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:25:24.483

你看过关于数据源格式的 Wiki 吗？

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#xml_string](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#xml_string)

这是 XML 的格式

```
<invoices> 
   <request>true</request> 
   ... 
   <currentpage>1</currentpage>
   <totalpages>10</totalpages>
   <totalrecords>20</totalrecords>
   <result> 
      <invoice> 
         <asin>12345</asin>
         <invoiceno>data1</invoiceno>
         <invoicedate>data2</invoicedate> 
         <invoiceamount>data3</invoiceamount> 
         <invoicetax>data4</invoicetax> 
         <invoicetotal>data5</invoicetotal> 
         <notes>data6</notes> 
      </invoice> 
      ... 
   </result> 
</invoices> 
```

# variables - 将变量从一种形式传递到另一种形式

> ID：14042509
> 
> 赞同：2
> 
> 时间：2012-12-26T15:19:36.337
> 
> 标签：variables, ms-access

我正在尝试通过单击按钮将 ComboBox 中的名称从一种形式传递到另一种形式，但我似乎无法使其正常工作。我不习惯使用 MS Access，我相信它是一个简单的答案。这是我到目前为止所拥有的：

表格 A：

```
Private Sub Command104_Click()
On Error GoTo Err_Command104_Click

    Dim stDocName As String
    Dim stLinkCriteria As String

    stDocName = "Vol_Hrs"
    DoCmd.OpenForm stDocName, , , stLinkCriteria
    Forms.Vol_Hours.Search.Value = Me.Combo94.Column(0)

Exit_Command104_Click:
    Exit Sub

Err_Command104_Click:
    MsgBox Err.Description
    Resume Exit_Command104_Click

End Sub 
```

表格 B：

```
Private Sub cmdAddNew_Click()
On Error GoTo Err_cmdAddNew_Click

    Dim stDocName As String
    Dim stLinkCriteria As String

    DoCmd.Close

    stDocName = "frmLookupScreen"
    DoCmd.OpenForm stDocName, , , stLinkCriteria
    Forms.frmLookupScreen.Combo94.Value = Me.Search.Column(0)

Exit_cmdAddNew_Click:
    Exit Sub

Err_cmdAddNew_Click:
    MsgBox Err.Description
    Resume Exit_cmdAddNew_Click

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:40:47.367

当引用一个对象时，即文本框使用它。

```
Forms!FormName!ObjectName.ObjectProperty = "Testing" 
```

访问方法时使用这个。

```
Forms!FormName.Form.Method. 
```

话说回来。当我在表单之间使用信息来提取调用表单名称时，我发现它要容易得多。然后我就可以访问呼叫表格上的几乎所有信息。如果需要更新组合框或列表框、更改文本、重新查询等，我还可以将数据推送回调用表单。

```
Private Sub Form_Load()

    Set frmPrevious = Screen.ActiveForm

    Me.tbText.value = frmPrevious.cbPassTest.value

End Sub 
```

将该代码放入您正在调用的表单的 LOAD() 中，然后您就可以提取您需要的内容。

# php - PHP Yii 框架和 jQuery AJAX getJSON

> ID：14042512
> 
> 赞同：0
> 
> 时间：2012-12-26T15:19:45.050
> 
> 标签：php, jquery, ajax, yii, getjson

在一个视图中，我有一个 html 选择元素，例如

```
<select id="g" name="g" style="width: 160px; height: 26px; background-color: white; border: 2px solid silver; padding: 0px 4px 0px 4px; box-shadow: 4px #333333;">
    <option value="value1">Value1</option>
    <option value="value2">Value2</option>
    <option value="value3">Value3</option>
    <option value="value4">Value4</option>
</select> 
```

在控制器中我有一个动作如下

```
 public function actionGetCategories($genre) {
    if(isset($genre)) {

        $c = new Category();            

        return CJSON::encode($c->findAll(array(
            'select'=>'category',
            'condition'=>'genre = \'' . $genre .'\''
        )));
    } else {
        return 0;
    } 
```

所以，我希望当用户更改选择元素时，应用程序会自动更改另一个名为“c”的选择元素的元素列表。我试图通过以下 JS 代码来做到这一点：

```
 <script type="text/javascript">
    $(function () {
        $("#g").change(function () {
            var items = "<option>All categories</option>";
            var self = $(this);

            $.getJSON("<?php echo $this->createUrl('site/getcategories', array('genre'=>'value')) ?>", 
                function (data) {
                    $.each(data, function (index, item) {
                        items += "<option>" + item + "</option>";
                    });
                $("#c").html(items);
            });
        });
    });
    </script> 
```

但不工作！我还尝试使用完整的根 URL 将 .getJSON url 参数更改为“http://localhost/project/index.php?r=site/getcategories&genre=value”，但没有。可以帮助别人吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:17:16.977

如果您使用 CActiveForm 小部件来构建表单或 CHtml 帮助程序，您可以在没有任何 javascript 代码的情况下执行此操作，请查看此示例：

```
echo $form->dropDownList($model, 'company_id', $model->getCompanyProjectOptions(),array('empty'=>'--select company--','ajax'=>array
                    (
                        'url' => CController::createUrl('/project/updateProjects'),   //only if you want an action here
                        'type' => 'get',
                        'data' =>  array('id' => 'js:$(this).val()'),
                        'update' => '#projects-list',   //or any other jQuery selector
                    ))); 
```

控制器中的 updateProjects 操作可以是这样的：

```
public function ActionUpdateProjects($id) {
        $model = new Project;
        $criteria = new CDbCriteria();
        $criteria -> addCondition('company_id=' . (int)$id);
        $criteria -> scopes = array('noRemove', 'noArchive');
        $criteria -> order = 'prj_nom';
        $data = Project::model() -> findAll($criteria);
        if (is_array($data) && !empty($data)) {
            echo CHtml::activeLabel($model, 'prj_parent_id');
            echo $data = CHtml::activeDropDownList($model, 'prj_parent_id', CHtml::listData($data, 'prj_id', 'prj_name'), array('empty' => '-- Select parent --'));
        }
    } 
```

并且不要在 accessRule 函数中授予此操作权限。

[http://www.yiiframework.com/wiki/24/](http://www.yiiframework.com/wiki/24/)

希望这可以帮助

# javascript - 在父 div 中最大化子 div 的高度

> ID：14042518
> 
> 赞同：5
> 
> 时间：2012-12-26T15:21:20.960
> 
> 标签：javascript, css

我有一个简单的 div 设置：

```
<div id="container">
    <div id="title"><h4>Title</h4></div>
    <div id="content"></div>
</div> 
```

元素设置为`#container`固定高度。我想让`#content`我们所有可用的高度，但我还没有找到一个干净的跨浏览器方法来做到这一点。这是CSS：

```
div {
  width: 100%;
}
#container {
  height: 400px;
}
#content {
  height: 100%;
} 
```

但这会导致与父级`#content`具有相同的高度并溢出。`#container`

可以在[http://jsbin.com/amekah/2/edit](http://jsbin.com/amekah/2/edit)看到一个活生生的例子。

* * *

我应该注意，我正在编写一个 JavaScript 库，它将`#content`div 附加到输入 div 元素（`#container`在此示例中），因此我不想过多地摆弄父元素或任何子元素的布局。我不介意使用 JavaScript 动态计算可用高度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:27:38.373

溢出问题是由`#content`div 的 100% 声明引起的。把这个属性拿出来。

如果您希望#content div 在与标题 div 重叠的同时具有 100% 的高度，那么您必须使用绝对位置。

```
#container {
  height: 400px;
  position: relative;
}
#content {
  top: 0;
  bottom: 0;
  position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T15:46:22.200

使用 Javascript 非常简单。我目前正在我当前的项目中做类似的事情。

1.  **获取容器的高度**：`elem.offsetHeight`其中 elem 是指向对象的 javascript 指针。在您的示例中，这将是：

    `var containerHeight = document.getElementById('container').offsetHeight`.

2.  **获取容器中子元素的高度**：这是有关[如何正确获取 childNodes](https://stackoverflow.com/questions/593785/get-elements-just-1-level-below-the-current-element-by-javascript)的链接。这是我要做的：

    ```
    var lastChild = elem.childNodes[elem.childNodes.length - 1];
    var verticalOffset = lastChild.offsetTop + lastChild.offsetHeight; 
    ```

现在您有了容器的高度和从父项顶部到最后一个子项的垂直偏移量加上最后一个子项的高度。

剩下要做的就是计算差异并将其指定为 的高度`#content`。

```
document.getElementById('content').style.height = (containerHeight - verticalOffset) + "px"; 
```

编辑：[概念证明](http://jsfiddle.net/jWPkL/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:29:59.150

在标题和内容之间共享可用容器的高度怎么样？

```
#container {
  background: #FEE;
  height: 400px;
}
#title {
  border: 1px dotted green;
  height : 20%;
}
#content {
  border: 1px dotted red;
  height: 80%;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T18:38:04.250

如果你使用 jQuery 会更容易：

```
function setHeight() {
  // using outer height to get margins and padding into account,
  // see http://jqapi.com/#p=outerHeight
  var titleHeight = $("#title").outerHeight(true), 
      totalHeight = $('#container').outerHeight(true);
  $('#content').outerHeight(totalHeight - titleHeight);      
}
// start on document.ready
$(function() {
  setHeight();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T15:31:34.110

如果您不介意为标题元素使用固定高度，您可以轻松实现这一点。第一步是使#container 位置相对，然后内容可以具有绝对位置，底部设置为 0，顶部设置为标题的高度（参见[演示](http://jsbin.com/amekah/13/)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T15:43:49.457

我找到了一种方法来`#content`使用剩余的可用高度：

```
#container { display: table }
#container > div { display: table-row } 
```

你可以在这里看到它：http: [//jsbin.com/amekah/32/](http://jsbin.com/amekah/32/)

我仍然对它不满意，因为它可能会更改表格行没有的其他 CSS 元素（如边框）​​。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T15:46:27.410

`#content`实际上具有相同的高度，`#container`只是它溢出了，`#container`因为`#title`已经吃掉了`#container`'s 高度的一些百分比。您可以尝试定位您的元素。

```
div {
  width: 100%;
}
#container {
  background: #FEE;
  height: 400px;
  position: relative;
}
#title {
  border: 1px dotted green;
  position: relative;
  z-index: 1; /* if you don't want #content overlapping with this element */
}
#content {
  border: 1px dotted green;
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 0;
} 
```

# c# - 使用 VS 2010 自定义模板将文件夹层次结构添加到现有 .net 项目

> ID：14042520
> 
> 赞同：0
> 
> 时间：2012-12-26T15:21:27.013
> 
> 标签：c#, visual-studio-2010, itemtemplate

我有一个包含许多小型应用程序的大型 .net (C#) 项目。这是公司的设计：

```
Main.Transport
 + Properties
 + References
 + ASD
 - Customer
   + Css
   - Js
     customer.js
   + Images
   - Support
     CustBroker.cs
     CustProvider.cs
   CustHandler.ashx
   Default.aspx
 - Order
   + Css
   - Js
     order.js
   + Images
   - Support
     OrderBroker.cs
     OrderProvider.cs
   OrderHandler.ashx
   Default.aspx 
```

每当我们必须开发更多应用程序时，我必须遵循相同的步骤：

```
- Create a new folder
- Add subfolders
- Add some images, configs, css, js etc
- Add broker and provider classes
- Add handler and default page to the main folder (app) 
```

我不确定我们是否可以在 Visual Studio 2010 中创建一些自定义模板来加快我的设置和编码过程。这可以通过创建项目模板或任何其他方式来完成吗？任何建议和链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:51:33.073

你可以创建一个 bash 脚本，它可以很好地完成一些事情，比如自动添加文件夹和处理图像。
有关更多详细信息，请参阅[bash 脚本的初学者教程](http://www.howtogeek.com/67469/the-beginners-guide-to-shell-scripting-the-basics/)

# matlab - 模式识别、最大似然、朴素贝叶斯分类器

> ID：14042523
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:21:57.350
> 
> 标签：matlab, pattern-recognition

我得到了 2 个由行组成的类（“class1.dat”和“class2.dat”），每行是一个包含 20 个特征（20 个值）的向量。

我取 10，将它们与 Fisher 比率排列并保留最好的 5 个结果，然后以最大似然估计每个正态分布（假设它们是正态分布）的值，并使用朴素贝叶斯分类器计算误差。

这是我的代码：

```
% i take 10 random characteristics

    C1= class_1(:,1:10)
    C2= class_2(:,1:10)                  
% FDR matrix initialize

    FDR=zeros(1,10);                   
%Calculate fisher ratio
%[t]=Fisher(x,y) where t:fisher ratio,x:data vector of first class,y: ...of second class

    for i=1:10
    FDR(i)=Fisher(C1(i,:),C2(i,:));                
    end 
%i find that the highest fisher ratio are 1,3,4,5,7 so i save them in a new matrix X

    X1=[C1(:,1),C1(:,3),C1(:,4),C1(:,5),C1(:,7)];
    X2=[C2(:,1),C2(:,3),C2(:,4),C2(:,5),C2(:,7)];
    X=[X1;X2];
%Calculate the Gaussian ml estimate
%[m,S]=Gaussian_ML_estimate(X) where X:LxN matrix m:L dimensional estimate of mean and %S:LxL dimensional estimate of convariance

    [C1mean_mle, C1cov_mle]=Gaussian_ML_estimate(C1');                   
    [C2mean_mle, C2cov_mle]=Gaussian_ML_estimate(C2');             
%I put together the estimates to use them in the last function, the naive bayes

    Cmean_mle(:,1)=C1mean_mle;
    Cmean_mle(:,2)=C2mean_mle;
    Ccov_mle(:,:,1)=C1cov_mle;
    Ccov_mle(:,:,2)=C2cov_mle; 
```

我对接下来要做什么感到困扰。我有一个功能：

```
[z] = bayes_classifier(m,S,P,X) 
```

输入参数： m：lxc 矩阵，其第 j 列是第 j 类的平均值。
S：lxlxc矩阵，其中S(:,:,j)对应第j类正态分布的协方差矩阵。
P：c维向量，其第j个分量是第j个类的先验概率。
X：lxN矩阵，其列是待分类的数据向量。

输出参数：
z：N 维向量，其第 i 个元素是第 i 个数据向量被分类的类的标签。

这个功能：

```
[clas_error] = compute_error(y,t_est) 
```

根据数据集计算分类器的误差。

输入参数：
y：N 维向量，包含数据集的 N 个向量的类标签。
t_est：N 维向量，包含根据分类规则为 X 的每个向量分配的类的标签。
OUTPUT
clas_error：分类错误。

我知道这是一篇很长的文章，所以感谢阅读那些阅读的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:17:48.507

我熟悉朴素贝叶斯，从您所写的内容中，我感觉我可能可以回答您的问题。我只是不完全确定它是什么。你能详细说明一下吗？

我要注意的一件事是，我认为有点不寻常的是您在谈论协方差。朴素贝叶斯的整个假设是特征在给定类的情况下是条件独立的。如果您使用协方差，那么每个状态实际上都有从 n 维高斯（而不是 n、独立、一维高斯）中提取的数据。那时，它并不是真正的朴素贝叶斯，而是高斯混合模型。也是一个非常好的模型。它只是更具表现力，因此更适合当您拥有大量数据时（它很容易过度拟合较小的数据集）。

此外，使用 Fischer 信息标准消除不太相关的数据也很有趣。除了减轻以后的计算负担外，我不确定我是否看到了优势。当您继续并拟合朴素贝叶斯时，可以稍后提取哪些元素在决定标签时更重要。

# c# - DateTime.Now 真正进入 Web 应用程序的时间是什么时候？

> ID：14042536
> 
> 赞同：7
> 
> 时间：2012-12-26T15:23:42.637
> 
> 标签：c#, datetime, web-applications, asp.net-mvc-4

在设计 Web 应用程序时，尤其是使用 Asp.net MVC4 c#，一旦我使用

```
 private DateTime currentDateTime = DateTime.Now; 
```

在我的代码中某处并将 currentDateTime 保存在数据库中；然后，我在网络上部署我的应用程序，

currentDateTime 的值是多少？

一种。打开我的应用程序的浏览器/计算机的日期时间（时区问题）

湾。我部署应用程序的服务器的日期时间（所有值都在一个时区内）

抱歉，但我刚开始使用 Web 应用程序，所以这让我感到困惑。希望你能给我澄清一下。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:26:26.780

该值将是服务器上的本地时间。

但是，我强烈建议使用通用协调时间 (UTC)，例如`DateTime.UtcNow`，它使日期时间的推理变得更加简单，这意味着您将能够在世界任何地方托管您的应用程序而不会产生不利影响。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T15:24:47.803

ASP.Net 代码在服务器上执行，所以它是服务器时间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-26T15:25:09.003

正确答案是：

湾。我在其中部署我的应用程序的服务器的 DateTime，因为那是代码正在执行的地方。

还有另一个`DateTime`属性，`DateTime.UtcNow`它总是获取 UTC 时间。
我建议在应用程序和数据库中都使用它（例如 getutcdate() ins sql server），因为它可以避免各种同步问题。

如果您需要向客户显示日期，只需将保存的时间抵消客户时区，您就可以了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-26T15:26:12.850

这将是服务器上的时间，因为那是代码执行的地方。

您可能想[`DateTime.UtcNow`](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)改用，因为这样可以减少时区问题。当您去显示或评估时间时，您可以在客户端或服务器上轻松转换为本地时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-26T15:25:02.163

这将是服务器上的时间。

# jscript - 如何从另一个 HTA 关闭 HTA 窗口？

> ID：14042537
> 
> 赞同：1
> 
> 时间：2012-12-26T15:23:53.473
> 
> 标签：jscript, hta, activexobject

我试图实现我自己的模式对话框（[为什么？](https://stackoverflow.com/q/11727815/1169519)）。我使用以下命令打开一个新窗口`WScript.Shell`：

```
dlg = shell.Run(dlgPath, 1, true); 
```

上面的行创建了一个“半模态”HTA 窗口。脚本执行在这一行停止，但主窗口仍然响应。这个问题在`onfocusin`eventhandler 中得到解决，它使用`shell.AppActivate()`. 这甚至可以防止“关闭窗口”按钮关闭主窗口。但是，在 Windows7 中，有一个关闭主窗口的后门，即 Windows 任务栏中的图标。

如果主窗口关闭，一个体面的模态对话框也应该关闭。在这种情况下，它不会关闭，因为打开的 HTA 窗口不是主窗口的真正子窗口。

`onbeforeunload`我可以在下面的主窗口的处理函数中关闭这个对话框模拟器。

```
beforeTopClose = function () {
    var wmiLocator = new ActiveXObject('WbemScripting.SWbemLocator'),
        wmiService = wmiLocator.ConnectServer('.', 'root\\CIMV2'),
        htas = new Enumerator(wmiService.ExecQuery("Select * from Win32_Process Where name = 'mshta.exe'"));
    while (!htas.atEnd()) {
        if (htas.item().CommandLine.indexOf('_tools\\dlgbase') > -1) {
            htas.item().Terminate(0);
        }
        htas.moveNext();
    }
    return;
} 
```

现在一切看起来都很好，屏幕上没有我的应用程序的窗口。但是，当我打开 Windows 任务管理器进程 - 选项卡时，我可以看到*主窗口*的进程仍在运行。

为什么主窗口仍在运行？是在等待进程的结束`shell`吗？我应该在`onbeforeunload`处理程序中做什么才能完全关闭主窗口？如果我需要不同的方法来解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:53:53.460

我刚刚意识到，我也可以在`beforeTopClose()`. 下面的固定代码。

```
beforeTopClose = function () {
    var thisHta = {},
        thisHtaPath = lib.shell.currentDirectory + '\\index.hta', // Path to current HTA
        htas = new Enumerator(lib.wmiService.ExecQuery("Select * from Win32_Process Where name = 'mshta.exe'"));
    while (!htas.atEnd()) {
        if (htas.item().CommandLine.indexOf('_tools\\dlgbase') > -1) {
            htas.item().Terminate();
        }
        if (htas.item().CommandLine.indexOf(thisHtaPath) > -1) {
            thisHta = htas.item();
        }
        htas.moveNext();
    }
    thisHta.Terminate();
    return;
} 
```

# android - 片段中的吐司不显示

> ID：14042538
> 
> 赞同：0
> 
> 时间：2012-12-26T15:24:01.280
> 
> 标签：android, android-fragments, toast

当用户单击活动片段中的按钮时，我希望弹出上下文帮助。我曾尝试使用`Toast`来执行此操作，但徒劳无功。弹出对话框不显示（另请注意，[在 Fragment 中使用 Toast](https://stackoverflow.com/questions/10770055/use-toast-inside-fragment)中的建议没有帮助）。

我在片段类中的代码如下所示：

```
 final Button help = (Button) view.findViewById(R.id.help_button);
        del.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
            Context context = (TabsActivity) getActivity().getApplicationContext();
            CharSequence text = "Hello toast!";
            int duration = Toast.LENGTH_LONG;
            Toast toast = Toast.makeText(view.getContext(), text, duration);
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.show();
            }
        }); 
```

我已经尝试了几种变体`CONTEXT`，其中两种在代码中显示。我也试过`getActivity()`, `getView().getContext()`,`getContext()`都是徒劳的。您能否帮助理解如何在片段中设置上下文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:33:10.720

使用您的应用程序上下文，而不是再次将其从视图中移除。

```
 Context context = getActivity().getApplicationContext();
        Toast.makeText(context, "Hello toast!", Toast.LENGTH_LONG).show(); 
```

保持简单并从那里开始工作，这样您就可以确定我们的哪个位实际上导致了您的错误。

将日志记录到您的代码中，然后您可以确定何时实际使用 onClick 侦听器而不是依赖 Toast

```
 setOnClickListener(new View.OnClickListener(){
     @Override
     public void onClick(View v) {
          Log.d("MyTag", "Button 1 was pressed");
     }
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T15:33:41.427

简单地使用 getActivity() 没有其他东西。也不需要强制转换或获取应用程序上下文。

我用`Toast.makeText(getActivity(), "Simple Toast",1000).show();`

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:33:03.917

在您的代码中：

```
 final Button help = (Button) view.findViewById(R.id.help_button);
        del.setOnClickListener(new View.OnClickListener(){ 
```

不应该阅读（请注意，帮助现在正在获取此 onclick 侦听器）：

```
 final Button help = (Button) view.findViewById(R.id.help_button);
        help.setOnClickListener(new View.OnClickListener(){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T15:36:09.480

尝试这个，

```
Toast toast = Toast.makeText(getActivity().getApplicationContext(), "text", 100);
toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
toast.show(); 
```

# python - Python中AKS算法的多项式部分

> ID：14042545
> 
> 赞同：0
> 
> 时间：2012-12-26T15:24:52.400
> 
> 标签：python, primes

我需要 AKS 算法的多项式部分的帮助。

我在网上看了很多描述。我已经完成了完美的电源测试，我认为我的 get_r() 函数是正确的。我不知道如何去做这部分算法：

```
For a = 1 to square-root(totient(r) * log(n)):
if (X+a)^n != X^n+a (mod X^r − 1,n), output composite 
```

（另请参阅 wikipedia 文章[AKS primality test](http://en.wikipedia.org/wiki/AKS_primality_test)以了解该[算法](http://en.wikipedia.org/wiki/AKS_primality_test#Algorithm)的说明。）

以下是我为实现 miller-rabin 测试和我的（未完成的）aks 代码而编写的程序的链接。

如果有人可以解释数学或给我一些伪代码，我应该没问题。谢谢

[aks.py](https://www.dropbox.com/s/pcwq3owcgv1il57/aks.py) [米勒.py](https://www.dropbox.com/s/k3me2xsjn2brwcr/miller.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:14:50.453

[我在我的博客](http://programmingpraxis.com)中详细描述了 AKS 。我在手机上输入这个，所以你必须自己搜索。

# windows - 我们可以从 ExitInstance 调用 FreeLibrary

> ID：14042546
> 
> 赞同：6
> 
> 时间：2012-12-26T15:24:53.367
> 
> 标签：windows, dll, mfc

从 MSDN 文档中可以看出，我们不应该在 DllMain 入口点函数中调用 LoadLibrary/FreeLibrary。

> 入口点函数应该只执行简单的初始化或终止任务。它不能调用 LoadLibrary 或 LoadLibraryEx 函数（或调用这些函数的函数），因为这可能会在 DLL 加载顺序中创建依赖循环。这可能导致在系统执行其初始化代码之前使用 DLL。同样，入口点函数在进程终止期间不得调用 FreeLibrary 函数（或调用 FreeLibrary 的函数），因为这可能导致在系统执行其终止代码后使用 DLL。

**我的问题是：我们可以从 ExitInstance() 调用 FreeLibrary 吗？**例如：

**Test.exe** - 主要可执行文件

```
HINSTANCE hDllMFC = LoadLibrary(L"TestApp.dll");
if (hDllMFC != NULL)
{
    FreeLibrary(hDllMFC);
}

while unload the hDllMFC, the call stack looks like:

TestApp.dll!CTestAppApp::ExitInstance() Line 42 C++
TestApp.dll!InternalDllMain() Line 155  C++
TestApp.dll!DllMain() Line 272  C++
TestApp.dll!__DllMainCRTStartup() Line 512  C
TestApp.dll!_DllMainCRTStartup() Line 477   C
ntdll.dll!LdrpUnloadDll()   Unknown
ntdll.dll!LdrUnloadDll()    Unknown
KernelBase.dll!FreeLibrary()    Unknown
Test.exe!wmain() Line 17    C++ 
```

**TestApp.dll** - 动态链接到 MFC 的常规 DLL

```
CTestApp theApp;
HINSTANCE hDllResource = NULL;

BOOL CTestApp::InitInstance()
{
    hDllResource = ::LoadLibrary(L"TestApp_Resource.dll");

    return CWinApp::InitInstance();
}

int CTestApp::ExitInstance()
{
    ::FreeLibrary(hDllResource);

    return CWinApp::ExitInstance();
} 
```

**TestApp_Resource.dll** - 常规 DLL、资源

...

我认为我们不应该，但是从 CWinApp::ExitInstance() 的实现中，我们可以看到，它也在试图卸载资源 dll。这是否意味着我们可以在 ExitIntance() 中调用 FreeLibrary？

```
int CWinApp::ExitInstance()
{
  //... 

 if (m_hLangResourceDLL != NULL)
  {
    ::FreeLibrary(m_hLangResourceDLL);
    m_hLangResourceDLL = NULL;
  }
  //...
} 
```

我还发现了一个文档，它确认在 Win95 中从 ExitInstance 调用 FreeLibrary 时存在错误。

BUG：从 ExitInstance 调用 AfxFreeLibrary 时断言 [http://support.microsoft.com/kb/187684](http://support.microsoft.com/kb/187684)

> **状态**： Microsoft 已确认这是 Windows 95 中的一个错误。我们正在研究此错误，并将在 Microsoft 知识库中发布新信息，因为它可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T02:19:36.737

如果实际上 ExitInstance 是从 DllMain 调用的（由堆栈跟踪确认），则适用于 DllMain 的所有规则，包括禁止以递归方式加载或卸载其他 DLL。（请注意，将您的 CWinApp 放入 DLL 是非常不寻常的，MFC 可能还有其他问题，例如知识库文章中提到的问题。并不是说有或没有任何其他问题潜伏，而是添加一个额外的注释警告。）

# jquery - jQuery 模糊（）和点击（）

> ID：14042549
> 
> 赞同：8
> 
> 时间：2012-12-26T15:25:06.850
> 
> 标签：jquery

我有以下 jQuery 函数：

1.  提交表格

    $(".content").delegate('.entryButton','click', function() { var form = $(this).closest("form"); var id = form.attr('id'); var text = form.find("textarea").val(); Sijax.request('add_entry', [id, text]);

    ```
     //Prevent the form from being submitted (default HTML)
         return false;
     }); 
    ```

2.  放大表格并显示输入按钮

    $("textarea").focus(function() { $(this).css('height', '80px'); var button = $(this).parent().next().children(); button .css('visibility', 'visible'); button.css('height', '20px') });

3.  使文本区域更小并隐藏按钮

    $("textarea").blur(function() { $(this).css('height', '30px'); var button = $(this).parent().next().children(); button .css('高度', '0px') });

当我尝试输入时会发生这种情况：

*   点击字段（焦点事件），字段变大并显示输入按钮
*   输入文字
*   第一次单击输入按钮：**现在会触发模糊事件，这会使字段再次变小，但单击事件不会触发**
*   如果我再次单击该按钮，表单会提交

我认为这意味着模糊和点击事件相互干扰？

**[你可以在这里](http://jsfiddle.net/2nUba/)找到问题的答案。**当您在字段聚焦的情况下按下按钮时，它会模糊该字段但不会输入它。当您按下字段模糊的按钮时，条目会被提交。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:14:20.607

您的问题是`click`在按钮上触发`mouseup`，但是当您更改高度时，它会在发生时鼠标不再位于按钮上`mouseup`。使用`mousedown`而不是`click`然后`trigger('blur')`在上`textarea`使这两个事件发生。

注意：您仍然需要一个`click`事件，以便您可以`return false`取消默认的表单提交功能。

[小提琴](http://jsfiddle.net/scrimothy/yUhkC/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:30:15.090

```
$('.entryButton').on('click', function (e) {
    return false; // to prevent default form post
});
$("form").delegate('.entryButton','mousedown', function() {
    $('textarea').trigger('blur');
    var form = $(this).closest("form");
    var id = form.attr('id');
    var text = form.find("textarea").val();
    $("#test").append(text);                 

    //Prevent the form from being submitted (default HTML)
    return false;
}); 
```

并保持对焦和模糊功能和以前一样。

```
thanks. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T21:04:41.677

这里的问题是`blur`事件，它比`click`事件工作得更快。这就是为什么它使字段更小而不是先提交表单。

您只需要将第一行从更改`click`为`mousedown`：

```
$(".content").delegate('.entryButton','mousedown', function() {
// your code
}); 
```

或者：

```
$(".content").bind('mousedown', function() {
// your code
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T08:25:12.527

我发现自己使用[http://api.jquery.com/unbind/很舒服](http://api.jquery.com/unbind/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T16:11:38.033

看起来改变高度并强制回流会取消点击事件。最简单的解决方案是使用`mousedown`而不是单击（它在模糊之前触发）或将 css 更改包装在`setTimeout`.

# jquery - Jquery 1.7 和 Jquery 1.8.3

> ID：14042556
> 
> 赞同：1
> 
> 时间：2012-12-26T15:26:03.387
> 
> 标签：jquery

我使用 Jquery 1.7 作为滑块，使用 Jquery 1.8.3 作为效果，但是这些都有问题

```
$( "button" ).hover(function(e) {   
    $( ".support-part" ).toggle( 'slow' );
}); 
```

此代码在 1.8.3 中工作，但是当它工作时，滑块不起作用现在我想知道我们如何可以毫无问题地一起使用两个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:30:10.023

如果“一起”是指加载在同一页面上——这**不是**一个好主意。

加载一个并使用`noConflict()`，如果您*真的*想同时使用两个，则加载另一个。

```
<script src="jQuery1.7"></script>
<script> 
    $7 = $.noConflict();
</script>
<script src="jQuery1.8.3"></script> 
```

用于`$7`jQuery 1.7 和`$`jQuery 1.8.3

# google-cloud-storage - 单个文件的 setcors / getcors

> ID：14042563
> 
> 赞同：1
> 
> 时间：2012-12-26T15:26:20.343
> 
> 标签：google-cloud-storage

我尝试对单个文件执行[setcors / getcors ，但我得到了](https://developers.google.com/storage/docs/gsutil_reference_guide#setorgetcors)

```
CommandException: URI gs://bucket/cat.png must name a bucket for the setcors command
gsutil getcors gs://bucket.commondatastorage.googleapis.com/cat.png
CommandException: "getcors" command must specify a bucket 
```

它（setcors / getcors）适用于整个存储桶，但文档说明不同。
我需要更新我的 gsutil 实用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:29:45.563

不可以，它只能在存储桶级别指定。您在文档中是否有一个 URL 表示您可以将其设置在单个对象上？

# c++ - 为什么 -i++ 和 -(i++) 不同？为什么结果如下？

> ID：14042567
> 
> 赞同：-3
> 
> 时间：2012-12-26T15:26:33.557
> 
> 标签：c++, language-lawyer

> **可能重复：**
> [使用 std::cout 评估参数的顺序](https://stackoverflow.com/questions/7718508/order-of-evaluation-of-arguments-using-stdcout)

**我现在知道了！这是负责*'cout'*** 的所有代码：

```
#include <iostream>
using namespace std;
int main()
{
   int i = 3;
   cout <<-i++<<endl<<i<<endl<<-(i++)<<endl<<i<<endl;
   return 0;
} 
```

我用VC++6.0编译，输出是：`-4 4 -3 3` 但是我用g++编译，输出是：`-4 5 -3 5` 为什么？我认为它们应该是相同的：`-4 4 -4 4`

PS：我试试：

```
int main()
{
   int i = 3;
   cout <<-i++<<endl;
   return 0;
} 
```

和

```
int main()
{
   int i = 3;
   cout <<-（i++）&lt;<endl;
   return 0;
} 
```

我一一编译，结果是一样的：-3 3思考所有答案，我可能在某种程度上测试-i++和-(i++)有错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T16:00:18.043

就目前而言，您的代码具有未定义的行为。您既可以使用 1 的值，也可以在没有干预序列点¹`i`的情况下进行修改。这给出了未定义的行为。`i`

两行结果的差异*并非*源于括号的使用——它纯粹源于`++`第一行中的 修改了 的值`i`，所以当你到达第二行时，它的值已经增加了。

总而言之，由于您有未定义的行为，因此*任何*输出都是完全合理和允许的，但这`-4 4 -3 3`是非常合理和可以理解的。

* * *

1.  从 C++ 11 开始，该标准不再使用短语“sequence point”，而是使用诸如“sequenced before”或“sequenced after”之类的短语来描述相同的基本意图。一些事情最终从这个变化中得到了定义的行为，但不是很多（特别是，不是这段代码）*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:42:52.560

两条线是一样的

尝试

```
int i = 3;
cout << - i++  << endl << i << endl;
i=3
cout << -(i++) << endl << i << endl; 
```

任何运算符的运算符优先级可在此处找到：

[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

而且，*后缀 ++*（您使用的那个）比*一元加号和减号*具有更高的优先级。

另一方面，你应该阅读这个问答：

[为什么 a = i + i++ 未定义而不是未指定的行为](https://stackoverflow.com/questions/12572618/why-is-a-i-i-undefined-and-not-unspecified-behaviour)

您的示例实际上与此相同：

```
(
  (
    (
      cout.operator<<(-(i++))
    ).operator<<(endl)
  ).operator<<(i)
).operator<<(endl); 
```

本质上，修改一个变量并在同一个表达式中使用它通常是*未定义*的行为：允许程序做*任何事情*。

# javascript - 为什么登录页面中没有使用javascript？

> ID：14042568
> 
> 赞同：0
> 
> 时间：2012-12-26T15:26:36.397
> 
> 标签：javascript, html, security

我注意到许多 JavaScript 繁重的应用程序，如 gmail、google doc 等（google SSO）和其他网站不使用 javascript 来验证他们的登录表单。一般的做法是 JS 用作第一级验证，服务器端验证用作第二级 那么为什么人们不使用 JavaScript 验证登录页面呢？是否存在任何特定的安全风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:35:49.300

您可以验证电话号码是否看起来像 Javascript 中的电话号码，这是一种简单的格式验证。

您*无法*使用 Javascript 验证登录凭据是否有效，这*必须*在服务器上进行。那是因为它不是简单的格式验证，而是服务器必须检查数据库中的信息是否与输入的数据匹配。

您可以在 Javascript 客户端中做的最多的事情是验证用户名是否看起来像一个有效的用户名（如果您有这样的限制）或密码是否符合您的有效密码规则（如果您有这样的规则）。这样做是更快地清除绝对无效的值。但特别是对于登录信息，您*不想*加快进程。您希望该过程尽可能慢，以使攻击者更难随机尝试用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:47:02.587

简而言之，如果关闭了 javascript，那么您的验证就会成功。考虑到您无法关闭它们，使用诸如 php 之类的服务器端语言来验证表单只是验证表单的最有效和最安全的方式。

> 如果有人关闭了他们的 JS，他们可以在没有用户名或密码的情况下创建一个帐户，您只需运行 php 即可，这不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:29:27.277

我想不出任何不这样做的充分理由 - 至少要验证是否为用户名/密码字段输入了某些内容。

# java - Web应用程序Java中的线程

> ID：14042571
> 
> 赞同：0
> 
> 时间：2012-12-26T15:26:42.130
> 
> 标签：java, tomcat, web-applications

好吧，我试图在 Java 中构建一个 Web 应用程序，每次有人在地址中发出 http 请求时都会启动一个线程。这是一个好习惯吗？可以工作吗？？优点还是缺点？工作在下面并使用一个弹簧示例，只是添加了我想要的线程

ps：这是在tomcat中运行的

```
> HomeController.java

    @Controller  public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! The client locale is {}.", locale);

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );
        new Teste().start();
        return "home";
    }}class Teste extends Thread{

    @Override
    public void run() {

        while(true){
            System.out.println("im in thread");
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
    }

> web.xml

    <?xml version="1.0" encoding="UTF-8"?>  
<web-app version="2.5"xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/n/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app>

> servlet-context.xml

    <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.example.threadTestes" />

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:30:25.663

在托管环境中使用线程通常是一个坏主意。为什么每次有人发送请求时不使用[JMS](https://en.wikipedia.org/wiki/Java_Message_Service)之类的抽象来启动后台处理程序？这样您就可以控制活动线程的数量（jms 池大小）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:11:02.987

在任何应用程序中为每个请求启动一个线程都是一个糟糕的主意，无论是托管还是非托管，#1 原因是操作系统可以用来为新线程分配堆栈的内存量是有限的；它不仅是有限的，而且在盒子上的所有进程之间共享（尽管您的 java 进程可能只允许使用其中的一部分）。现在想象一下，这些线程根本不会终止，或者随着新请求的不断到来而终止的速度不够快——操作系统最终会耗尽新线程的空间；根据操作系统及其设置，结果可能会有所不同，从 new Thread() 中相当迷人的 OutOfMemoryError 到整个盒子变得明显没有响应，因为您的 java 进程消耗了所有可用空间并且根本无法创建新线程。所以：1）处理请求至少使用线程池（Executor）；如果您需要持久性，JMS 是一个选项，但您再次处理池中的请求 - 它只是从 JMS 2) 中提供的，您可以在应用程序启动期间启动一个单独的线程。在这两种情况下，请自行清理并在关闭期间停止其他线程。

# jquery - XSLT 两列无序列表

> ID：14042573
> 
> 赞同：1
> 
> 时间：2012-12-26T15:26:58.613
> 
> 标签：jquery, html, css, xml, xslt

我需要 xsl 转换方面的帮助。我有 xml 被 SharePoint Server 控件吐出，如下所示：

```
<rows>
    <row>A</row>
    <row>B</row>
    <row>C</row>
    <row>D</row>
    <row>E</row>
    <row>F</row>
    <row>G</row>
    <row>H</row>
</rows> 
```

我需要将上面的 xml 转换为以下内容：

```
 <==  A-----------B  ==> An li sliding back and forth with the help of a slider plugin
       C-----------D
       E-----------F
       G-----------H 
```

像这样：（ [来源：][[imagesup.net](http://www.imagesup.net/?di=1135653604016)][）][![像这样](../Images/35549baa7d2a7ff9be3817363509e72c.png)](https://i.stack.imgur.com/XTho5.png)

需要以下格式的 HTML，因为这是滑块插件要求呈现 html 以使其工作的方式：

```
<div class="content-carousel">
<!-- start Basic Jquery Slider -->
        <ul class="bjqs">
          <li>
              <div class="content-left">
               <h4>A</h4>
               </div>
              <div class="content-right">
               <h4>B</h4>
               </div>
          </li>
        <li>
              <div class="content-left">
               <h4>C</h4>
               </div>
              <div class="content-right">
               <h4>D</h4>
               </div>
          </li>
          .
          .
        </ul>
</div> 
```

这是实际的原始 XML：[https ://gist.github.com/4380967](https://gist.github.com/4380967)

这是 bjqs 滑块插件要求：（ [来源：][[imagesup.net](http://www.imagesup.net/?di=11135653673210)][）][![插入](../Images/1936aa2cc94590d12bc25612e86144f7.png)](https://i.stack.imgur.com/0YqZq.png)

我目前拥有的：我能够获得两列布局，但这样做涉及表格行，这会发出不必要的标记，对滑块插件不利。因此，对于每一行，以下内容适用：

```
 <xsl:if test="$CurPos = 1 ">
    <xsl:text disable-output-escaping="yes">&lt;div&gt;&lt;table&gt;</xsl:text>
  </xsl:if>
  <xsl:if test="$CurPos mod 2 = 1">
    <xsl:text disable-output-escaping="yes">&lt;tr&gt;</xsl:text>
  </xsl:if> 

<li>
  <td width="50%" valign="top">
    <table width="90%">
      <tr height="35px" min-height="35px" valign="top">
        <td>
          <span>
            <xsl:if test="string-length($SafeImageUrl) != 0">
              <div class="image-area-left">
                <a href="{$SafeLinkUrl}" target="{$LinkTarget}">
                  <img class="image" src="{$SafeImageUrl}" alt="{@ImageUrlAltText}" />
                </a>
              </div>
            </xsl:if>

            <H3>
                <a href="{$SafeLinkUrl}"> <xsl:value-of select="@Title"/> </a>
            </H3>
            <div class="newsgist"><xsl:value-of select="substring(@Comments,0,200)"/>
                <xsl:if test="string-length(@Comments) &gt; 200">…&lt;/xsl:if>         <a href="{$SafeLinkUrl}"> Details…&lt;/a>  
            </div>
          </span> 
        </td>
      </tr>

    </table>
  </td></li>

  <xsl:if test="$CurPos mod 2 = 0">
    <xsl:text disable-output-escaping="yes">&lt;/tr&gt;</xsl:text>
  </xsl:if>
  <xsl:if test="$CurPos = $LastRow ">
    <xsl:text disable-output-escaping="yes">&lt;/table&gt;&lt;/div&gt;</xsl:text> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:24:32.680

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <div class="content-carousel">
     <ul class="bjqs">
      <xsl:apply-templates select="*[position() mod 2 =1]"/>
     </ul>
   </div>
 </xsl:template>

 <xsl:template match="row">
   <li>
     <div class="content-left">
        <h4><xsl:value-of select="."/></h4>
     </div>
       <div class="content-right">
         <h4><xsl:value-of select="following-sibling::*[1]"/></h4>
       </div>
  </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<rows>
    <row>A</row>
    <row>B</row>
    <row>C</row>
    <row>D</row>
    <row>E</row>
    <row>F</row>
    <row>G</row>
    <row>H</row>
</rows> 
```

**产生了想要的正确结果：**

```
<div class="content-carousel">
   <ul class="bjqs">
      <li>
         <div class="content-left">
            <h4>A</h4>
         </div>
         <div class="content-right">
            <h4>B</h4>
         </div>
      </li>
      <li>
         <div class="content-left">
            <h4>C</h4>
         </div>
         <div class="content-right">
            <h4>D</h4>
         </div>
      </li>
      <li>
         <div class="content-left">
            <h4>E</h4>
         </div>
         <div class="content-right">
            <h4>F</h4>
         </div>
      </li>
      <li>
         <div class="content-left">
            <h4>G</h4>
         </div>
         <div class="content-right">
            <h4>H</h4>
         </div>
      </li>
   </ul>
</div> 
```

# javascript - jquery.event.drag - 为每个拖动的 X 个像素运行脚本

> ID：14042574
> 
> 赞同：2
> 
> 时间：2012-12-26T15:27:11.453
> 
> 标签：javascript, jquery, drag-and-drop

我在我正在创建的项目中使用[jquery.event.drag.js](http://threedubmedia.com/code/event/drag)，并且我试图找出一种方法来为我拖动的每 X 个像素量运行一个脚本。为此，我只使用 X 轴。这是我现在拥有的一些代码。

```
$('body').drag(function( ev, dd ){
    var newcell = currentCell;
    var dragOffset = Math.floor(dd.offsetX / 100);
    if (dragOffset >= 1) {
        alert("Dragged 100px");
    }
    newcell += dragOffset;
    $('#info').html(dragOffset + " | " + dd.offsetX);
    updateStack(newcell, magnifyMode);
}); 
```

但是，这是可行的，因为此脚本针对拖动的每个像素运行，因此在拖动 100px 后会运行警报，但从那时起，它会针对我之后拖动的每个像素运行。我正在寻找一种只为每拖动 100 像素运行它的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:33:15.440

我对 drag.js 并不完全熟悉，但是，您可以使用模除法来确保它每 100 像素。

x % 100 - 如果能被 100 整除，则为 0，所以

```
if(dd.offsetX % 100 == 0)
{
    alert("Dragged 100px");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:33:45.867

上次发出警报时有一个外部变量跟踪：

```
var chunkedOffset = 0;
$('body').drag(function( ev, dd ){
    var newcell = currentCell;
    var dragOffset = dd.offsetX / 100;
    if (dragOffset > chunkedOffset) {
        chunkedOffset = dragOffset;
        alert("Dragged 100px");
    }
    newcell += dragOffset;
    $('#info').html(dragOffset + " | " + dd.offsetX);
    updateStack(newcell, magnifyMode);
}); 
```

# hyperlink - Smalltalk：如何制作超链接

> ID：14042579
> 
> 赞同：1
> 
> 时间：2012-12-26T15:27:38.300
> 
> 标签：hyperlink, smalltalk

在 smalltalk 中，如何添加字符串链接

例子 ：

我有一个字符串 str = "试用字符串"

我想向它添加另一个字符串，但是当我单击它时，我会转到某个目的地

和 str 会看起来像

试用字符串和[SomeLocation](http://diy.stackexchange.com "鼠标悬停时出现此文本")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:36:11.877

如果您使用 Seaside，则可以在渲染组件时使用以下代码。

```
renderContentOn: html
  html anchor
    url: 'http://www.seaside.st';
    with: 'Visit the Seaside'. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:40:07.047

在任何编程语言中，字符串只是字符序列。超链接（在 html 标记语言中）是否显示为可点击链接，正如它在 Web 浏览器中显示的那样，取决于显示它的编辑器/查看器如何解释字符串。

如果您想在 Smalltalk 代码中显示超链接，我不知道有任何支持该功能的 Smalltalk IDE。但如果有一些项目支持这样做，我不会感到惊讶。

# .net - Castle Windsor 延迟加载服务

> ID：14042581
> 
> 赞同：9
> 
> 时间：2012-12-26T15:27:47.860
> 
> 标签：.net, castle-windsor, lazy-loading

有时，我发现自己处于仅在满足特定条件时才需要解决服务的情况。例如，用户可能选择发送电子邮件或短信通知。我想根据用户的选择延迟加载电子邮件或短信服务，这样我就不必同时加载它们并浪费资源（例如，如果用户有 10 个选项...？ ）。

我遇到的问题是在我的引导代码之外使用容器（我不希望我的代码依赖于容器）。我似乎找不到将容器用于延迟加载服务的方法（除非我手动创建所需的服务并手动执行所有 DI）。这是可以改变规则的情况还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:36:56.907

如果您使用的是 Castle Windsor 3.0 或更新版本，您可以使用惰性解析。

有关详细信息，请参阅[Windsor 3 中的新增功能](https://github.com/castleproject/Windsor/blob/master/docs/whats-new-3.0.md)。

注册过程有一点变化（必须注册新的组件加载器）。

之后，您只是像往常一样注册组件，但将依赖项解析为`Lazy<T>`而不是`T`. 除非您不访问`.Value`的属性`Lazy<T>`，否则不会解决依赖关系，因此您可以传递一些惰性评估的对象，并仅在需要时访问您需要的对象。

如果您对用户有更多选择，也许您应该考虑创建某种抽象工厂接口。然后，您将只注册并解析该工厂，工厂本身将创建适当的服务来发送通知（无论是邮件、短信还是任何其他选项）。工厂的实现可以手动编码，或者您可以用 Castle Windsor 编码（我认为是从 3.0 版开始）。

通常当我确实使用这样的工厂时，我会手动实现它并将容器作为它的依赖项传递，所以只有工厂实现依赖于我的容器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T05:04:46.763

只是一个简化的例子（基于 Marcin Deptuła 的回答）

```
// activate Lazy initialization feature  for all Components
.Register(Component.For<ILazyComponentLoader>().ImplementedBy<LazyOfTComponentLoader>())     
// register rest of component(s)
.Register(Component.For<IIssueRepository>().ImplementedBy<IssueRepository>()) 
. .... 
```

懒惰地解决（属性注入）

```
public Lazy<IIssueRepository> IssueRepository { get; set; }
IssueRepository.Value.GetLastIssue(); 
```

解析正常（属性注入）

```
public IIssueRepository IssueRepository { get; set; }
IssueRepository.GetLastIssue(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:37:51.257

通常，您可以使用[Typed Factory Facility](https://github.com/castleproject/Windsor/blob/master/docs/typed-factory-facility.md)来做到这一点。

简而言之，当您解析使用这些服务的组件时，不是给它一个电子邮件或短信服务，而是给它一个可以创建它们的**工厂**（由您定义，不引用容器）

该设施将负责“实现”您的工厂（从您创建的界面），因此几乎没有什么可做的。

# c# - 如何在 XAML 中使用动态分配的表名进行绑定？

> ID：14042583
> 
> 赞同：0
> 
> 时间：2012-12-26T15:27:49.940
> 
> 标签：c#, wpf, xaml, binding

我只是（再次）意识到我不了解 WPF 中的绑定。我使用以下构造将表绑定到数据网格（这发生在窗口中）：

```
OdbcConnection con; 
... // open con 
DataSet ds = new DataSet();
// in the database we have a table named "producer"
OdbcDataAdapter adapter = new OdbcDataAdapter("select * from producer", con);
adapter.Fill(ds,"producer"); // (1), map the tablename in ds to "producer"
this.DataContext = ds;
... 
```

和 XAML 的相关部分：

```
<DataGrid ItemsSource="{Binding producer}"  // (2)
    ...// other properties
/> 
```

由于这工作正常，我现在想概括此代码，以便我也可以将它用于其他表。那就是我想`"producer"`用（1）和（2）中的字符串变量替换标记为（1）和（2）的行中的固定字符串`tableName`。它的内容在（2）中。这是我卡住的地方：如何在 (2) 中定义此绑定？我试图创建`tableName`Window 类的 a 属性，但在 XAML 中我收到“IEnumerable 的类型转换器不支持从字符序列转换”的错误（我将最后一条语句从它的德语形式翻译，所以它可能不精确匹配英文对应）。

我实际上可以在 XAML 中执行此操作，还是需要以编程方式定义绑定？

# c++ - GetCommandLine linux *true* 等效

> ID：14042586
> 
> 赞同：5
> 
> 时间：2012-12-26T15:28:14.187
> 
> 标签：c++, c, linux, windows, equivalent

与 Linux 等效的 GetCommandLine 和 CommandLineToArgv 类似的问题

是否可以在 linux中获取*原始命令行？*文件 /proc/self/cmdline 被破坏。

```
./a.out files="file 1","file 2" param="2" 
```

印刷

```
./a.outfiles=file 1,file 2param=2 
```

这是垃圾

转义命令行确实适用于除第一个参数之外的所有参数。

```
./a.out files=\"fil 1\",\"fil 2\"\ param=\"2\" 
```

印刷

```
./a.outfiles="fil1","fil2" param="2" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T15:38:31.980

你不能那样做。命令行参数实际上作为单独的字符串传递给新进程。查看linux内核源码： [kernel_execve](http://lxr.linux.no/linux+%2a/fs/exec.c#L1695)

请注意，它`kernel_execve(...)`需要一个`const char *argv[]`- 因此在 Linux 中没有长字符串命令行之类的东西 - 它是上面的层，需要将参数拆分为单独的组件。

编辑：实际上，系统调用在这里：

[excve 系统调用](http://lxr.linux.no/linux+%2a/fs/exec.c#L1666)

但上面的说法仍然适用。argv 的参数在内核从 C 库调用 exec 中获取它时已经被拆分。

生成 argv[] 数组是“程序的启动者”（通常是 shell，但不一定是）的责任。它将执行“通配符”（将通配符文件名扩展为它匹配的实际文件）并去除引号、变量替换等。

我还要指出，尽管 C 库中有多种“exec”变体，但进入内核的方式只有一种。所有变体最终都出现在`execve`我上面链接的系统调用中。其他变体仅仅是因为调用者可能不喜欢将参数拆分为单个元素，因此 C 库通过为程序员这样做来“帮助”。类似地，将环境数组传递给新程序 - 如果程序员不需要特定环境，他/她可以调用自动获取父进程 env 的变体。

# java - 将 JavaScript 面板添加到 GWT 面板中

> ID：14042592
> 
> 赞同：0
> 
> 时间：2012-12-26T15:28:46.460
> 
> 标签：java, javascript, gwt, jsni

我想将一个包含彩色面板和一个按钮的外部 JavaScript 文件添加到 GWT 面板中。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:58:09.567

您可以使用 GWT 中的按钮创建面板，在此面板上设置您的原生 JavaScript 代码所需的 ID，然后[使用 JSNI 执行原生 JavaScript 方法](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI?hl=de)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:48:34.347

不，我不能用 gwt 创建按钮

我只能在 gwt 中创建一个空面板，然后添加一个 javascript 面板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:36:33.653

如果您需要在导入的 javascript 文件（库）中调用函数。

第 1 步 - 您需要通过带有标签的模块 gwt xml 文件加载 js 文件`<script src="thirparty.js" />`

第 2 步 - 使用 JSNI 从导入的第三方库中获取元素（面板）。创建一个 div 或使用 innerhtml 并将其设置为 GWT 面板。

如果您正在尝试寻找第三方颜色选择器 -

```
http://www.auroris.net/gwt/colorpicker/
http://code.google.com/p/auroris/ 
```

# actionscript-3 - 如何在课堂上使用 GETURL (AS3)

> ID：14042593
> 
> 赞同：0
> 
> 时间：2012-12-26T15:28:50.690
> 
> 标签：actionscript-3, flash, flash-cs5

我使用此代码，但在发布后，当我自动打开我的文件时，2 个互联网浏览器（www.example.com）已打开

```
package {

    import flash.display.SimpleButton;
    import flash.display.Sprite;
    import flash.net.navigateToURL;
    import flash.net.URLRequest;
    import flash.net.URLRequestMethod;
    import flash.net.URLVariables;

    public class bAEForm extends SimpleButton {

        public function bAEForm() {
            var url:String = "http://www.google.com";
            var request:URLRequest = new URLRequest(url);

            var variables:URLVariables = new URLVariables();
            variables.exampleSessionId = new Date().getTime();
            variables.exampleUserLabel = "guest";
            request.data = variables;
            request.method = URLRequestMethod.POST;

            navigateToURL(request);
        }
    }
} 
```

我想，当我按下按钮时，应该打开浏览器间（www.example.com）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:06:22.857

据我了解您的问题：

您不希望浏览器已经打开，而是单击某个按钮。

如果是这种情况，Currently`navigateToURL(request);`在**bAEForm**类的构造函数中。

将其移动到点击事件中，如下所示：

```
myButton.addEventListener(MouseEvent.MOUSE_CLICK, 

          function(e) { navigateToURL(request); }, false,0,true); 
```

其中**myButton**是您希望浏览器打开的单击按钮实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:08:28.147

如果您想在单击按钮时导航到 URL，您的代码应该是这样的：

```
package {

    import flash.display.SimpleButton;
    import flash.display.Sprite;
    import flash.net.navigateToURL;
    import flash.net.URLRequest;
    import flash.net.URLRequestMethod;
    import flash.net.URLVariables;

    import flash.events.MouseEvent;

    public class bAEForm extends SimpleButton {

        public function bAEForm() {
            this.addEventListener(MouseEvent.CLICK, clickHandler);
        }

        private function clickHandler(event:MouseEvent)
        {
            var url:String = "http://www.google.com";
            var request:URLRequest = new URLRequest(url);

            var variables:URLVariables = new URLVariables();
            variables.exampleSessionId = new Date().getTime();
            variables.exampleUserLabel = "guest";
            request.data = variables;
            request.method = URLRequestMethod.POST;

            navigateToURL(request);
        }
    }
} 
```

您不能在构造函数中使用 navigateToURL 函数

# mysql - 一列中的所有列数据由特殊字符分隔，例如 -

> ID：14042594
> 
> 赞同：0
> 
> 时间：2012-12-26T15:29:06.600
> 
> 标签：mysql

我有如下表

```
create table myTable (id int, 
                  col1 varchar(20),
                  col2 varchar(20),
                  col3 varchar(20),
                  col4 varchar(20),
                  col5 varchar(20),
                  col6 varchar(20),
                  col7 varchar(20),
                  col8 varchar(20),
                  col9 varchar(20)
                 ); 
```

并将数据作为

```
insert into myTable values
(1, 'col1','col2','col3','col4','col5','col6','col7','col8','col9'); 
```

我想要的是输出为

```
id +  AllInOne
++++++++++++++++++++++++++++++++++++++++++++++++++
 1 + col1-col2-col3-col4-col5-col6-col7-col8-col9
++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

知道如何用最小的查询完成这项工作吗？我知道我可以通过使用 CONCATENATE 来完成上述工作。但我需要的是其他方式。也许是一些预定义的 MySQL 函数？

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/7be5b/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:30:15.667

使用[CONCAT_WS](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)，它使用分隔符连接字符串（跳过空字符串）：

```
SELECT id, CONCAT_WS('-', col1, col2, col3, col4, col5, col6, col7, col8, col9)
FROM your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:39:05.197

这将完全按照您的要求返回输出：

```
SELECT CONCAT(id,' + ', col1,'-',col2,'-',col3,'-',col4,'-',col5,'-',col6,'-',col7,'-',col8,'-',col9) FROM `your_table` WHERE id = 1 
```

# google-chrome - 如何更改 chrome 上的当前字体？

> ID：14042597
> 
> 赞同：0
> 
> 时间：2012-12-26T15:29:21.673
> 
> 标签：google-chrome, fonts

真的很紧急。我搜索了它，但找不到。

在我的电脑上安装“Helvetica”字体后，一些网站的字体开始看起来像这样：

[http://i.stack.imgur.com/K6Z0c.jpg](http://i.stack.imgur.com/K6Z0c.jpg)

如何在不删除字体的情况下永久更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:33:04.157

在 Chrome 中，点击设置，然后点击页面底部的“高级”链接。该菜单展开后，转到“Web 内容”部分并单击“自定义字体”。您可以在此处选择默认字体并单击“确定”以保存更改。

# mysql - 将 base64 编码数据存储为 BLOB 或 TEXT 数据类型

> ID：14042599
> 
> 赞同：21
> 
> 时间：2012-12-26T15:29:33.387
> 
> 标签：mysql, text, blob, innodb

我们有一个 MySQL InnoDB 表，其中包含大约 10 列小型 base64 编码的 javascript 文件和 png（<2KB 大小）图像也经过 base64 编码。

相对而言，插入次数很少，读取次数也很多，但是输出会在 Memcached 实例上缓存几分钟以避免后续读取。

因为现在我们正在使用`BLOB`这些列，但我想知道在`TEXT`性能或快照备份方面切换到数据类型是否有优势。

我的搜索挖掘表明`BLOB`和`TEXT`我的情况几乎相同，因为我事先不知道实际将存储哪种类型的数据，所以我选择了`BLOB`.

对于这个特定案例，您对 TEXT 与 BLOB 辩论有什么建议吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-26T15:39:03.730

## 不应将 Base64 编码的数据存储在自己的数据库中...

Base64 是一种仅使用可打印文本字符表示任意二进制数据的编码：它设计用于需要通过只能处理可打印文本的协议或介质（例如 SMTP/电子邮件）传输此类二进制数据的情况。它增加了数据大小（增加了 33%）并增加了编码/解码的计算成本，因此除非绝对必要，否则应避免使用。

相比之下，列***的全部意义`BLOB`在于它们存储不透明的二进制字符串***。因此，只需继续将您的内容直接存储到您的`BLOB`列中，而无需先对它们进行 Base64 编码。（也就是说，如果 MySQL 有更适合存储的特定数据的类型，您可能希望使用它：例如，像 JavaScript 源代码这样的文本文件可以从存储在`TEXT`MySQL 原生跟踪特定文本元数据的列中受益- 更多关于这个下面）。

SQL 数据库需要像 Base64 这样的可打印文本编码来处理任意二进制数据的（错误的）想法已经被大量信息不灵的教程所延续。这个想法似乎是基于一个错误的信念，即因为 SQL 在其他上下文中只包含可打印的文本，所以它肯定也需要二进制数据（至少对于数据传输，如果不是为了数据存储）。这根本不是真的：SQL 可以通过多种方式传达二进制数据，包括纯字符串文字（前提是它们像任何其他字符串一样被正确引用和转义）；当然，将数据（任何类型）传递到数据库的首选方式是通过参数化查询，并且参数的数据类型可以很容易地成为原始二进制字符串。

## ...除非出于性能原因对其进行缓存...

存储 Base64 编码数据可能有一些好处的唯一情况是，它通常在从数据库中检索*后*立即通过需要这种编码的协议（例如通过电子邮件附件）进行传输——在这种情况下，存储 Base64 编码的数据表示将不必在每次提取时对其他原始数据执行编码操作。

但是，请注意，从这个意义上讲，Base64 编码的存储只是充当*缓存*，就像出于性能原因可能存储非规范化数据一样。

## `TEXT`...在这种情况下不应该`BLOB`

如上所述：`TEXT`和`BLOB`列之间的唯一区别是，对于`TEXT`列，MySQL 还为您跟踪特定于文本的元数据（例如*字符编码*和*排序规则*）。这个额外的元数据使 MySQL 能够在存储和连接字符集（在适当的情况下）之间转换值，并执行花哨的字符串比较/排序操作。

一般来说：如果两个使用不同字符集的客户端应该看到相同的*字节*，那么你需要一个`BLOB`列；如果他们应该看到相同的*字符*，那么您需要一`TEXT`列。

使用 Base64，这两个客户端最终必须发现数据*解码为相同的字节*；但他们应该看到存储/编码的数据具有相同的*字符*。例如，假设有人希望插入`'Hello world!'`（即`'SGVsbG8gd29ybGQh'`）的 Base64 编码。如果插入应用程序使用 UTF-8 字符集工作，则它将字节序列发送`0x53475673624738676432397962475168`到数据库。

*   如果该字节序列存储在`BLOB`列中，然后由使用 UTF-16 ^*的应用程序检索，则将返回*相同的字节*`'升噳扇㡧搲㥹扇全'`——它们表示而不是所需的 Base64 编码值；然而

*   如果该字节序列存储在`TEXT`列中，然后由使用 UTF-16 的应用程序检索，则 MySQL 将即时转码以返回字节序列`0x0053004700560073006200470038006700640032003900790062004700510068`——它代表所需的原始 Base64 编码值`'SGVsbG8gd29ybGQh'`。

当然，您仍然可以使用`BLOB`列并以其他方式跟踪字符编码——但这只会不必要地重新发明轮子，增加维护复杂性和引入意外错误的风险。

* * *

^(* 实际上 MySQL 不支持使用与 ASCII 字节不兼容的客户端字符集（因此 Base64 编码在它们的任何组合中总是一致的），但是这个示例仍然用于说明`BLOB`和`TEXT`列类型之间的区别，因此解释了为什么`TEXT`在技术上对此目的是正确的，即使`BLOB`实际上可以正常工作（至少在 MySQL 添加对非 ASCII 兼容客户端字符集的支持之前）。)

# google-apps-script - % 运算符似乎在谷歌应用脚 本中不起作用

> ID：14042603
> 
> 赞同：1
> 
> 时间：2012-12-26T15:29:52.187
> 
> 标签：google-apps-script

我要数A队和B队3连胜的次数。似乎总是进入最后的ifs。不是当 consecutivas 等于 3,6,9...

```
 var consecutivasA = 0;
  var consecutivasB = 0;
  var plusA = 0;
  var plusB = 0;

  for (var i = 2; i <= 30; i++) {
    var row = values[i];

      if (row[3] > row[4]) { 
        consecutivasA++;
        consecutivasB = 0;
      }
      else if (row[3] < row[4]) {
        consecutivasB++;
        consecutivasA = 0;
      }
      else {
        consecutivasA = 0;
        consecutivasB = 0;
      }

      if (consecutivasB % 3 == 0) { plusB++; } 
      if (consecutivasA % 3 == 0) { plusA++; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:40:25.630

在最终 ifs 之前记录 consecutivasA 和 B 的值...我强烈怀疑由于早期的逻辑错误，您的值始终为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:41:13.883

我会以另一种方式去做——而不是使用你提供的逻辑，我认为它只是检查 A 队或 B 队的胜利总数是否可以被 3 整除（这不一定说明胜利是否是*连续*的），我会尝试以下方法：

遍历您的数组并编写一个 if 语句来检查 A 队是否在特定位置获胜。如果是，请检查它是否也在 n+1 和 n+2 中获胜。如果是，则增加 plusA。

再次遍历您的数组并编写一个 if 语句检查 B 队是否在特定位置获胜。如果是，请检查它是否也在 n+1 和 n+2 中获胜。如果是，则增加 plusB。

**注意：**只检查数组中最后一个条目之前的两个条目，因为超出此范围会返回数组大小错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:49:09.420

当 consecutivas 为 0 时，您执行此操作的方式也会增加，因为 0 % 3 也是 0。此示例将示例数据的结果写入日志。

```
function consecutivasMod () {
  var consecutivasA = 0;
  var consecutivasB = 0;
  var plusA = 0;
  var plusB = 0;
  values=[
    [0,0,0,1,0],    [0,0,0,1,0],    [0,0,0,1,0],    [0,0,0,0,1],    [0,0,0,0,1],
    [0,0,0,0,1],    [0,0,0,0,0],    [0,0,0,0,0],    [0,0,0,0,0],    [0,0,0,0,2],
    [0,0,0,0,3],    [0,0,0,0,4],    [0,0,0,0,5],    [0,0,0,0,6],    [0,0,0,0,7],
     ]
  for (var i = 0; i < 15; i++) {
    var row = values[i];

     if (row[3] > row[4]) { 
       consecutivasA++;
       consecutivasB = 0;
     }
     else if (row[3] < row[4]) {
       consecutivasB++;
       consecutivasA = 0;
     }
     else {
       consecutivasA = 0;
       consecutivasB = 0;
     }

     if (consecutivasB>0&&(consecutivasB % 3) == 0) { plusB++; } 
     if (consecutivasA>0&&(consecutivasA % 3) == 0) { plusA++; }
  }
 Logger.log ("consecutivasA "+plusA);
 Logger.log ("consecutivasB "+plusB);
} 
```

# apache-flex - Flex 3 到 Flex 4 警告

> ID：14042614
> 
> 赞同：0
> 
> 时间：2012-12-26T15:30:39.940
> 
> 标签：apache-flex, flex4, flex3, flash-builder

您好，我正在将 flex 3 迁移到 flex 4，我有 1 个警告，我尝试修复它，但没有任何效果。

警告是：数据绑定将无法检测到顶级应用程序的分配

在 flex 3 我有 application.Application 现在我有 FlexGlobals.topLevelApplication

我有 1400 个 FlexGlobals.topLevelApplication 和 +- 150 个 .AS 文件。

我尝试使用 Application(FlexGlobals.topLevelApplication)、mainAPP(FlexGlobals.topLevelApplication)，但没有任何效果，唯一认为清除警告的是如果我添加 [Bindable] public var myApplication:Object = FlexGlobals.topLevelApplication; 到所有 .AS 文件，但是当我运行项目并尝试登录应用程序时，我遇到了动作脚本错误

错误 #1009：无法访问空对象引用的属性或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:03:59.760

你是对的。访问应用程序的干净方式是通过 FlexGlobals.topLevelApplication。

```
[Bindable]
public var app:mainApp = mainApp(FlexGlobals.topLevelApplication); // fail fast to find erros 
```

应该工作，如果不是这样，您似乎太早地访问该实例。在调度 FlexEvent.CREATION_COMPLETE 之后，您应该引导应用程序（并从那里继续）。另外，我建议如果你在你的课程中引入一个领域，比如

```
private const app:mainApp = mainApp(FlexGlobals.topLevelApplication); // fail fast to find errors

protected final get app():mainApp { return app; } 
```

在您的应用程序中干净地访问该字段并避免对您的应用程序过多的依赖。

PS：类名，即使后缀为 .mxml 也应该以大写字母开头。

# objective-c - NSString 属性在 IBAction 方法中失去价值

> ID：14042621
> 
> 赞同：1
> 
> 时间：2012-12-26T15:31:29.520
> 
> 标签：objective-c, properties, nsstring, ibaction

我在 Viewcontroller 中有一个 NSString 属性 self.textFromTextVC，它的值在 IBAction 方法中变为空。

```
- (IBAction)buttonPressed:(id)sender
{

    NSLog(@"text before alarm is created: %@", self.textFromTextVC);

} 
```

下面的方法在同一个“.m”文件中，它们保留了 NSString 属性的值。

```
-(void)setPropertyTextToReceivedText:(NSString *)text
{

    self.textFromTextVC = text;

    NSLog(@"text received from text VC: %@", self.textFromTextVC);

    [self doesStringKeepValue]; //I call this method to check and see if the NSString value     
                                //was retained

}

-(void)doesStringKeepValue
{

    NSLog(@"keep value: %@", self.textFromTextVC); //NSString value the same from the above
                                                   //method
} 
```

下面是我声明 NSString 属性的方式：

```
@property (nonatomic, copy) NSString *textFromTextVC; 
```

基本上，我是`self.textFromTextVC`在调用 IBAction 方法之前设置的，这就是我感到困惑的原因。我真的不确定发生了什么。我选择了 ARC。我希望我只是犯了一个简单的错误......帮助？谢谢，

下面是另一个视图控制器中的方法，我在其中调用了 setPropertyTextToReceivedText：

```
@implementation TextViewController

@synthesize typedText;

- (IBAction)doneButton:(id)sender {

    [self.typedText resignFirstResponder];

    AlarmViewController *receiver = [[AlarmViewController alloc]init];
    [receiver setPropertyTextToReceivedText:self.typedText.text];

    //[self showAlert];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:43:31.050

您的问题是与显示`receiver`的对象不同的对象`VC`（存在/推送）。

```
AlarmViewController *receiver = [[AlarmViewController alloc]init];
[receiver setPropertyTextToReceivedText:self.typedText.text]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:39:56.280

改变这个：

`NSLog(@"text before alarm is created: %@", self.textFromTextVC);`

对此：

`NSLog(@"%@: text before alarm is created: %@", self, self.textFromTextVC);`

它可能会告诉您，您确实在查看同一类的两个不同对象实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T16:43:18.087

我想你忘记了：

```
@synthesize textFromTextVC; 
```

# webfonts - 在fabricjs中使用网络字体

> ID：14042623
> 
> 赞同：1
> 
> 时间：2012-12-26T15:31:36.943
> 
> 标签：webfonts, fabricjs

尝试使用 Google Web 字体并按照[http://fabricjs.com/fabric-intro-part-2/上的示例](http://fabricjs.com/fabric-intro-part-2/)

我不确定“fontFamily”属性的合法值是什么。[我尝试在http://www.google.com/webfonts](http://www.google.com/webfonts)上使用随机名称，但它只是默认为“Times New Roman”（尽管示例中的“Impact”确实有效）。

我在哪里可以获得内置列表？（grep -R Impact * 在我的源代码树中获得 0 次点击）如何添加我想使用的自定义字体？（假设它存在于谷歌网站上，但也想知道创建我自己的本地字体）

# java - 交换排序算法查询

> ID：14042624
> 
> 赞同：1
> 
> 时间：2012-12-26T15:31:38.473
> 
> 标签：java, arrays, algorithm, sorting

所以我试图让这个算法工作，但每次我运行它时，我都会得到 [10,11,7,10,7,5,7,5 ] 作为我的输出。目标是按降序获得结果。此外，当我的数组仅包含 6 个值时，我不明白为什么会有 8 个结果。请帮助..谢谢。公共类搜索{

```
public static void main (String[]args)
{
    int[] array = {10,7,11,5,13,8};
    //ExchangeSort(array);

};

public static void ExchangeSort(int[] num)
{
    int i,j,temp;

    for(i=1;i<num.length-1;i++)
    {
        for(j=i+1;j<num.length;j++)
        {
            if(num[i]<num[j])
            {
                temp = num[i];
                num[i] = num[j];
                num[j] = temp;

                //System.out.println(temp);
            }
        }

    }
}; 
```

};

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:42:53.293

您忽略排序中的第一个元素，因为数组索引从`0`. 您的第一个循环应该从 index 开始`0`并上升到`length-1`：

```
 for(i=0;i<num.length-1;i++) 
```

您还需要在循环之外或在 main 方法中使用`Arrays.toString` **（不需要循环）**打印排序数组：

```
 // this will print the array elements
     System.out.println("Sorted Array: "+Arrays.toString(num)); 
```

并从方法末尾删除分号`;`。

天文台注：您的方法名称不应以大写字母开头。

编辑：您的完整更正代码如下：

```
public static void main(String[] args) {
    int[] array = {10,7,11,5,13,8};
    exchangeSort(array);
    System.out.println("Sorted Array: "+Arrays.toString(array));
}
public static void exchangeSort(int[] num) {
    int temp;
    for(int i=0;i<num.length-1;i++){
        for(int j=i+1;j<num.length;j++){
            if(num[i]<num[j]){
                temp = num[i];
                num[i] = num[j];
                num[j] = temp;
            }
        }
    }
    System.out.println("Sorted Array: "+Arrays.toString(num));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:43:00.353

你的输出来自哪里？

我之前删除了评论`ExchangeSort(array);`并添加了一个简单的输出：

```
 ExchangeSort(array);

    for (int i : array) {
        System.out.println(i);
    } 
```

然后，当我运行您的代码时，我得到：`10 13 11 8 7 5`接近预期结果。位置错误，`10`因为您的循环索引以 1 开头，但数组索引以 0 开头。因此第一个元素不会更改。

`i`您可以通过将from的起始值更改为来解决此`1`问题`0`：

```
for(i=0; i<num.length-1; i++) 
```

# javascript - AJAX 加载内容后如何调用 javascript 函数？

> ID：14042629
> 
> 赞同：0
> 
> 时间：2012-12-26T15:32:07.737
> 
> 标签：javascript, jquery, ajax, flash, tumblr

我正在使用 AJAX 在 Tumblr 博客上使用一些代码进行无限滚动，除了加载某些 Flash 内容时，它运行良好。无限滚动的代码在[这里](http://static.tumblr.com/5huhcpw/HuQmfn8mh/infinitescroll.js)。

我使用本网站用户[Daniel K](https://stackoverflow.com/users/1250319/daniel-k)建议的一些[代码](https://stackoverflow.com/a/12897344/1119079)对 Flash 内容问题有部分解决方案。我已经实现了在页面加载时调用该函数的代码，但是在 AJAX 加载无限滚动的内容后，我无法弄清楚如何调用该函数。

我有几个 Tumblr 主题，很多人要求我实现无限滚动。由于 Flash 问题，我一直不愿意添加它。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:16:07.863

这个答案中的代码可能会稍微修正一下，但它应该暂时适合你。只要确保将它放在无限滚动回调中即可。

[Tumblr 音频和视频 + 无限滚动](https://stackoverflow.com/questions/12404807/tumblr-audio-video-infinite-scroll/12481862#12481862)

# c# - 如何根据频率产生声音？

> ID：14042630
> 
> 赞同：18
> 
> 时间：2012-12-26T15:32:11.683
> 
> 标签：c#, .net, audio

> **可能重复：**
> [在 C# 中创建正弦波或方波](https://stackoverflow.com/questions/203890/creating-sine-or-square-wave-in-c-sharp)

我想产生声音。要么是这样的：

```
MakeSound(frequency, duration); 
```

或者：

```
MakeSound(MyArrayOfSamples); 
```

我发现了一个叫做：`Microsoft.Directx.DirectSound`但读到它已经停产的东西。而且我在 Visual Studio (2010) 中找不到它作为参考的选项。我找到[了这个链接](http://www.microsoft.com/en-us/download/details.aspx?id=9977)，根据我读过的内容，应该包含它，但我对使用 2006 年的东西犹豫不决，因为它可能不再受支持。而[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/bb318658%28v=vs.85%29.aspx)说它是用于 C/C++ 的（尽管也说：“托管代码”），我不想浪费几周时间试图理解如何将它包装到托管代码中，只是为了发现我做不到。我发现的最有希望的链接是[WaveFormat](http://msdn.microsoft.com/en-us/library/windows/desktop/bb280526%28v=vs.85%29.aspx)，但我找不到如何使用它。

我*不是*在问如何获得声波的数学表示。我也不是在问如何播放 mp3 文件等。我也不是在寻找第三方软件或包装器。仅针对特定目标的 C# / .net 解决方案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-26T15:40:53.810

不管你怎么看，除非你想使用非托管代码，否则你将不得不构建一个 WAV 来播放它。[然而，下面是来自Eric Lippert 博客](http://blogs.msdn.com/b/ericlippert/archive/2005/04/15/desafinado-part-four-rolling-your-own-wav-files.aspx)的代码片段，它将向您展示如何使用频率滚动您自己的 WAV 文件。

```
namespace Wave
{
   using System;
   using System.IO;
   class MainClass {
      public static void Main() {
         FileStream stream = new FileStream("test.wav", FileMode.Create);
         BinaryWriter writer = new BinaryWriter(stream);
         int RIFF = 0x46464952;
         int WAVE = 0x45564157;
         int formatChunkSize = 16;
         int headerSize = 8;
         int format = 0x20746D66;
         short formatType = 1;
         short tracks = 1;
         int samplesPerSecond = 44100;
         short bitsPerSample = 16;
         short frameSize = (short)(tracks * ((bitsPerSample + 7)/8));
         int bytesPerSecond = samplesPerSecond * frameSize;
         int waveSize = 4;
         int data = 0x61746164;
         int samples = 88200 * 4;
         int dataChunkSize = samples * frameSize;
         int fileSize = waveSize + headerSize + formatChunkSize + headerSize + dataChunkSize;
         writer.Write(RIFF);
         writer.Write(fileSize);
         writer.Write(WAVE);
         writer.Write(format);
         writer.Write(formatChunkSize);
         writer.Write(formatType);
         writer.Write(tracks); 
         writer.Write(samplesPerSecond);
         writer.Write(bytesPerSecond);
         writer.Write(frameSize);
         writer.Write(bitsPerSample); 
         writer.Write(data);
         writer.Write(dataChunkSize);
         double aNatural = 220.0;
         double ampl = 10000;
         double perfect = 1.5;
         double concert = 1.498307077;
         double freq = aNatural * perfect;
         for (int i = 0; i < samples / 4; i++) {
            double t = (double)i / (double)samplesPerSecond;
            short s = (short)(ampl * (Math.Sin(t * freq * 2.0 * Math.PI)));
            writer.Write(s);
         }
         freq = aNatural * concert;
         for (int i = 0; i < samples / 4; i++) {
            double t = (double)i / (double)samplesPerSecond;
            short s = (short)(ampl * (Math.Sin(t * freq * 2.0 * Math.PI)));
            writer.Write(s);
         }
         for (int i = 0; i < samples / 4; i++) {
            double t = (double)i / (double)samplesPerSecond;
            short s = (short)(ampl * (Math.Sin(t * freq * 2.0 * Math.PI) + Math.Sin(t * freq * perfect * 2.0 * Math.PI)));
            writer.Write(s);
         }
         for (int i = 0; i < samples / 4; i++) {
            double t = (double)i / (double)samplesPerSecond;
            short s = (short)(ampl * (Math.Sin(t * freq * 2.0 * Math.PI) + Math.Sin(t * freq * concert * 2.0 * Math.PI)));
            writer.Write(s);
         }
         writer.Close();
         stream.Close();
      }
   }
} 
```

根据您的需要将其分开，但请注意`aNatural`变量 - 它是一个频率 - 就像您正在寻找的一样。

*现在，您可以将其放入 a 中`MemoryStream`，然后根据`SoundPlayer`需要进行播放。*

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-26T15:44:07.820

[这是内核中Beep](http://msdn.microsoft.com/en-us/library/ms679277%28v=vs.85%29.aspx)函数的包装器，采用持续时间和频率。现在`Beep`用声卡；在我的日子里，它使用了一些粘在主板上的压电设备。

```
using System;
using System.Runtime.InteropServices;

class BeepSample
{
    [DllImport("kernel32.dll", SetLastError=true)]
    static extern bool Beep(uint dwFreq, uint dwDuration);

    static void Main()
    {
        Console.WriteLine("Testing PC speaker...");
        for (uint i = 100; i <= 20000; i++)
        {
            Beep(i, 5);
        }
        Console.WriteLine("Testing complete.");
    }
} 
```

在我的 Win10 机器上，我需要将持续时间（最后一个参数）设置为比此处的 5 毫秒大得多，最多可达 50 毫秒，但要获得合理的值，我必须将其设置为 100 毫秒。

或者，如果您想采取简单的方法，请使用[Console.Beep(Int32, Int32)方法。](https://msdn.microsoft.com/nl-nl/library/4fe3hdb1(v=vs.80).aspx)该方法是在 .Net 2.0 中引入的。

# javascript - 避免获取 HTML DOM 的所有内容

> ID：14042634
> 
> 赞同：1
> 
> 时间：2012-12-26T15:32:54.620
> 
> 标签：javascript, html, jquery

## 语境

我有一个 HTML5+CSS+JS 幻灯片，旨在通过一个无线路由器在国内 LAN 中的 50 个客户端之间同步。

## 问题

**由于幻灯片的**内容（主要是图片）可能太重，我想为每张幻灯片动态加载它们（例如，当客户端单击“下一步”按钮时），因为目前该站点从服务器在开始加载页面时，使路由器超载。

在[这个问题](https://stackoverflow.com/questions/13992274/get-html-elements-from-a-document-in-the-server-and-show-them-dynamically-in-the)（同一问题的另一种方法）中，用户建议我使用 AJAX 仅获取 DOM，然后动态加载其内容。然而，他的解决方案对我不起作用，因为内容是在我想要的那一刻之前加载的。

这种基于 AJAX 的方法是否正确？如果是这样，我可能做错了什么？

## 我的代码

*slideshow.html*（幻灯片结构）

```
<html>
  <head>
    <title>My Slideshow</title>
    <script src="javascripts/slidesplayer.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
  </head>

  <body>    
    <div id="slides-containter">

      <div class="slide" id="slide_1">
        <!--Contents such as images, text, video and audio sources -->
      </div>

      <div class="slide" id="slide_2">
        <!--Contents -->
      </div>

      <!--A bunch of slides here-->

    </div>
    <script>
      // Here I load the slides calling a function defined in slidesplayer.js
    </script>
  </body>
</html> 
```

*slideshow-placeholder.html*（当我进入幻灯片 URL 时加载）

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="/path/to/ajaxSlidesScript.js"></script>
  </head>
  <body>
    <h1>Hello slides!</h1>
  </body>  
</html> 
```

*ajaxSlidesScript.js*

```
$(document).ready(function() {
  $.ajax('/path/to/slideshow.html', {
    async : false,
    complete : function ajaxCallback(slidesDOM) {

      // Pull out the individual slides from the slideshow HTML
      $slides = $(slidesDOM.responseText).find('.slide');

      // For each one ...
      $slides.each(function prepareSlide() {

        // Store a reference to the slide's contents        
        var $slideContent = $($(this).html());  // <--- GETs all the files for this slide which I want to avoid.

        // Empty the contents and keep only the slide element itself
        var $slideWrapper = $(this).empty();

        // Attach to focus event handled by the slideware
        $slideWrapper.appendTo('body').on('focus', function injectContent() {
        // Put the content in — NOW external resources should be downloaded via GET and loaded, not before.
          $slideWrapper.append($slideContent);
        });
      });
    }
  });
}); 
```

**更新：**这种方法是行不通的，因为操作 DOM 对象会导致资源的下载，即使您不将它们插入 DOM 也是如此。你可以看到我在[这个问题](https://stackoverflow.com/a/14142056/370798)中做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:40:09.533

Ajax 绝对是解决您问题的正确技术，但据我所知，您的问题很简单。

```
<script src="javascripts/slidesplayer.js"></script>
<link rel="stylesheet" href="/stylesheets/style.css"> 
```

使用这段代码，是否使用 ajax 并不重要，因为您已经加载了 CSS 文件，并且此 CSS 文件中引用的所有图像都直接在开头加载。此外，您应该异步加载所有文件。

您可以`<img>`通过 JavaScript 添加标签并异步加载图像...

# windbg - 如何显示包含在 WinDbg 中的数组中的嵌套结构成员的内容？

> ID：14042636
> 
> 赞同：1
> 
> 时间：2012-12-26T15:33:02.157
> 
> 标签：windbg

我有一个数组 gEpPool：

```
0:031:x86> dt gEpPool[1]
[1] 0x06b4d5c8 
   +0x004 m_objectID       : 0x33b
   +0x000 __VFN_table : 0x6a643330 
   +0x008 m_errorCode      : 0n0
   +0x00c m_beenHereOnce   : 0 ( NEVER_BEEN )
   +0x010 m_beenHere       : 0n0
   +0x014 m_header         : 0xbaadf00d Void
   +0x018 m_nodeType       : 0n23
   +0x01c m_myID           : 1
   +0x020 m_nodeID         : 0n1
   +0x024 m_nodesList      : CSimpleList
   +0x038 m_addressSet     : CEntitySet 
```

我想显示嵌套在 m_nodesList 中的成员的内容：

```
0:031:x86> dt gEpPool[1] m_nodesList
[1] 0x06b4d5c8 
   +0x024 m_nodesList : CSimpleList 
```

我知道如何递归地做到这一点：

```
0:031:x86> dt -r gEpPool[1]
[1] 0x06b4d5c8 
   +0x004 m_objectID       : 0x33b
   +0x000 __VFN_table : 0x6a643330 
   +0x008 m_errorCode      : 0n0
   +0x00c m_beenHereOnce   : 0 ( NEVER_BEEN )
   +0x010 m_beenHere       : 0n0
   +0x014 m_header         : 0xbaadf00d Void
   +0x018 m_nodeType       : 0n23
   +0x01c m_myID           : 1
   +0x020 m_nodeID         : 0n1
   +0x024 m_nodesList      : CSimpleList
      +0x000 m_objectID       : 0x33c
      +0x004 m_pTail          : 0x06b42938 SimpleCell
         +0x000 pNext            : (null) 
         +0x004 data             : 0x06b42960 Void
         +0x008 size             : 0xc
      +0x008 m_semaphore      : CSem
         +0x000 m_objectID       : 0x33d
         +0x004 m_sem            : (null) 
         +0x008 m_count          : 0xf00d
   +0x038 m_addressSet     : CEntitySet
      +0x000 m_objectID       : 0x33e
      +0x004 m_set            : [10] CEntitySet::setItems
         +0x000 from             : CEntityAddress
         +0x00c to               : CEntityAddress
         +0x018 mode             : 1 ( Set_Include )
         +0x01c user0            : 0xbaadf00d
         +0x020 user1            : 0xbaadf00d
      +0x16c m_numberOfEntriesInSet : 1 
```

但是信息量太大了。我想`gEpPool[1].m_nodesList.m_pTail->data`直接查看会员。

我该怎么做？

一旦出现，我怎样才能将它显示为另一种类型（它被声明为`void *`，但我知道它更具体）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:41:47.097

```
dt gEpPool[1] m_nodesList->m_pTail->data 
```

# android - Android - 保持/存储加载的 JSON 的良好做法

> ID：14042641
> 
> 赞同：3
> 
> 时间：2012-12-26T15:33:26.657
> 
> 标签：android, json, web-services, android-sqlite

我想做一个像[《纽约时报》这样的 Android 版](http://play.google.com/store/apps/details?id=com.nytimes.android&hl=en)新闻阅读器。

我解析了一个 JSON 文件，其中包含大约 100 篇文章（标题、内容字符串、图像 url 等）。

我会使用 ListFragment 显示文章列表（标题和图片），并在 ViewPager 上显示完整内容，以便读者可以浏览文章。

因此 Listfragment 和 ViewPager 将使用相同的文章数据集。

保存/存储下载的文章的好习惯是什么？

我有一些想法：

*   将文章保存在静态 ArrayList 中？（保存json文件以供离线阅读）
*   创建 SQLite 数据库并使用游标访问？（很慢吗？）
*   创建数据库，并在应用程序启动时将所有文章加载到静态 ArrayList 中？
*   将 ArrayList 保留为 Activity 的成员变量并将列表传递给片段？

非常感谢您的帮助！（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:48:26.617

创建`SQLite`数据库，工作速度足够快。`JSON`文件也是速度解决方案（取决于您将如何解析该文件）。**不要**使用静态字段

# c# - 依赖注入架构设计 - 服务类循环引用

> ID：14042645
> 
> 赞同：1
> 
> 时间：2012-12-26T15:33:44.737
> 
> 标签：c#, dependency-injection, inversion-of-control, circular-dependency

我有以下服务类：

```
public class JobService {
  private UserService us;

  public JobService (UserService us) {
    this.us = us;
  }

  public void addJob(Job job) {
    // needs to make a call to user service to update some user info
    // similar dependency to the deleteUser method
  }
}

public class UserService {
  private JobService js;
  public UserService(JobService js) {
    this.js = js;
  }

  public void deleteUser(User u) {
    using (TransactionScope scope = new TransactionScope()) {
      List<IJob> jobs = jobService.findAllByUser(u.Id);
      foreach (IJob job in jobs) {
        js.deleteJob(job);
      }
      userDao.delete(user);
      scope.Complete();
    }
  }
} 
```

这些服务类中的每一个都由 IoC 容器实例化，并且没有功能问题，但是对我来说，这种方法存在潜在的设计缺陷，我想知道是否有更有意义的替代方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:34:55.043

正如有人已经指出的那样，问题不在于 DI 容器的限制，而在于您的设计。

我看到了你有一个单独的`UserService`和一个`JobService`包含相互引用的原因。这是因为两者都`UserService` 包含`JobService`一些需要其他服务作为参考的逻辑（添加作业需要添加用户等）。但是，我认为您不应该从另一项服务中引用一项服务。相反，您应该在服务后面有另一个抽象层，这些服务将用于公共逻辑。因此，服务将包含不能（不应该）重用的逻辑，而助手将包含共享逻辑。

例如：

```
 public class UserHelper{
      //add all your common methods here
    }
    public class JobService {
      private UserHelper us;

      public JobService (UserHelper us) {
        this.us = us;
      }

      public void addJob(Job job) {
 // calls helper class
      }
    }

    public class UserService {

      public UserService(UserHelper js) {
        this.js = js;
      }

      public void deleteUser(User u) {
        // calls helper class
      }
    } 
```

这样，循环引用就不会有任何问题，并且您将拥有一个包含需要由不同服务重用的逻辑的地方。

此外，我更喜欢拥有彼此完全隔离的服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:22:33.370

您遇到的问题实际上与您的 DI 容器的限制无关，但这是一个普遍的问题。即使没有任何容器，也无法创建这些类型：

```
var job = new JobService([what goes here???]);
var user = new UserService(job); 
```

因此，一般的答案是将依赖项之一提升为属性。这将打破依赖循环：

```
var job = new JobService();
var user = new UserService(job);

// Use property injection
job.User = user; 
```

但是，请防止使用比严格需要更多的属性。这些依赖循环应该是非常少见的，这使得将类型连接在一起或验证 DI 配置的正确性变得更加困难。构造函数注入使这更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T15:51:41.997

这在 Autofac 中不起作用。请参阅文档的[循环依赖](http://code.google.com/p/autofac/wiki/CircularDependencies)部分。

> **构造函数/构造**函数依赖关系 不支持具有循环构造函数依赖关系的两种类型。当您尝试解析以这种方式注册的类型时，您将遇到异常。

您可能会使用[关系类型](http://code.google.com/p/autofac/wiki/RelationshipTypes)( `Func<>`, `Lazy<>`) 来打破循环。

您的代码有点过于通用，无法提出适当的解决方案，但无论您使用什么 IoC 容器，您都应该考虑更改依赖关系的方向。

```
public class JobService {
  private UserService us;

  public JobService (UserService us) {
    this.us = us;
  }

  public void addJob(Job job) {
    // needs to make a call to user service to update some user info
  }
}

public class UserService {
  private JobService js;
  public UserService(Func<JobService> jsFactory) {
    this.js = jsFactory(this);
  }

  public void deleteUser(User u) {
    // needs to call the job service to delete all the user's jobs
  }
} 
```

或者，在您的示例中，您可以移动`deleteUser`并创建一个方法，删除作业服务上的所有作业，而不是使用 id 来引用用户。这通过使用 id 打破了依赖关系。

另一种选择是将作业服务作为参数传递给`deleteUser`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T17:03:36.987

您可以使用事件解耦服务。当一个动作被执行时，不是调用另一个服务的依赖方法，而是引发一个事件。然后，集成商可以通过事件连接服务。一个服务甚至不知道另一个服务的存在。

```
public class JobService
{
    public event Action<User, Job> JobAdded;

    public void AddJob(User user, Job job)
    {
        //TODO: Add job.
        // Fire event
        if (JobAdded != null) JobAdded(user, job);
    }

    internal void DeleteJobs(int userID)
    {
        //TODO: Delete jobs
    }
}

public class UserService
{
    public event Action<User> UserDeleted;

    public void DeleteUser(User u)
    {
        //TODO: Delete User.
        // Fire event
        if (UserDeleted != null) UserDeleted(u);
    }

    public void UpdateUser(User user, Job job)
    {
        //TODO: Update user
    }
} 
```

集成商连接服务

```
public static class Services
{
    public static JobService JobService { get; private set; }
    public static UserService UserService { get; private set; }

    static Services( )
    {
        JobService = new JobService();
        UserService = new UserService();

        JobService.JobAdded += JobService_JobAdded;
        UserService.UserDeleted += UserService_UserDeleted;
    }

    private static void UserService_UserDeleted(User user)
    {
        JobService.DeleteJobs(user.ID);
    }

    private static void JobService_JobAdded(User user, Job job)
    {
        UserService.UpdateUser(user, job);
    }
} 
```

（注意：我稍微简化了事件引发。这样不是线程安全的。但您可以假设事件是提前订阅的，以后不会更改。）

# c++ - 使用 sigaction 和 alarm 打破无限循环

> ID：14042647
> 
> 赞同：0
> 
> 时间：2012-12-26T15:33:44.800
> 
> 标签：c++

这是我的代码：

```
#define _OPEN_SYS
#include <unistd.h>
#include <stdio.h>
#include <signal.h>
#include <time.h>

volatile int footprint = 0;

void catcher(int signum) {
puts("inside signal catcher!");
alarm(0);
footprint = 1;
return;
}

main() {
printf("footprint=%d\n", footprint);
struct sigaction sact;
sigemptyset(&sact.sa_mask);
sact.sa_flags = 0;
sact.sa_handler = catcher;
if (footprint == 0) {
    puts("the signal catcher never gained control");
    sigaction(SIGALRM, &sact, NULL);
    printf("before loop");
    alarm(5); /* timer will pop in five seconds */
    while (true);
} else
    puts("the signal catcher gained control");
printf("after loop");
} 
```

我的输出是：

```
footprint=0
the signal catcher never gained control
before loopinside signal catcher! 
```

并且应用程序永远运行，我需要某种方式来打破这个循环，我正在使用类似的代码来使 sybase 语句执行超时，因为 OCCI 不支持超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:16:11.047

一个循环`while (true);`不能被中断，除非终止执行它的线程。必须对循环进行编码以检查中断条件并退出。

正如亚历克斯在评论中提到的，`while ( footprint == 0 ) ;`将正确地为给定的信号处理程序实现循环检查。

只是迂腐，`footprint`应该声明`sig_atomic_t`not `int`，但这可能无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:40:18.610

诸如`SIGALRM`会中断大多数系统调用的信号（但要注意自动重启的调用）。您不能依赖它们来中断您的无系统调用循环。即使它这样做了，执行也会在一个信号之后恢复，所以你的代码很高兴地回到了循环。

事实上，您的代码甚至不是有效的 C++ (!!!)。标准的第 1.10p24 节说：

> 实现可能假设任何线程最终都会执行以下操作之一：
> 
> *   终止，
> *   调用库 I/O 函数，
> *   访问或修改 volatile 对象，或
> *   执行同步操作或原子操作。

Alex 的建议`while ( footprint == 0 ) ;`至少会纠正这个缺陷。

# ruby-on-rails - Rails：如何在 AJAX 中通信视图控制器？

> ID：14042648
> 
> 赞同：0
> 
> 时间：2012-12-26T15:33:53.060
> 
> 标签：ruby-on-rails

情况是当用户单击添加链接时，如果 url 已经添加，则会有一个警报，否则将显示一个添加新书签的表单。下面的代码非常适合检查重复的 url，但如果 url 不重复，我只是不知道如何呈现添加书签（在这种情况下，页面将像正常的非 ajax 请求一样加载）

这是视图中的链接

```
 <%= link_to "add", user_bookmark_add_path(current_user, bookmark), remote: true %> 
```

该链接将调用控制器操作添加

```
# controllers/bookmarks_controller.rb
def add 
  @bookmark = Bookmark.find(params[:bookmark_id])
  respond_to do |format|
    format.js 
  end
end 
```

javascript文件

```
# views/bookmarks/add.js.erb
<% if duplicated_url? @bookmark.url %>
   alert("Duplicated")
<% else %>
   # how to render the new bookmark form here
<% end %> 
```

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:54:56.053

为新的书签表单创建一个部分。

**_form.html.erb**

```
<%= form_for(bookmark) do |f| %>

  <%= f.text_field :name %>
  <%= f.submit "submit" %>

<% end %> 
```

将 id 添加到您的链接

**.html.erb**

```
 <%= link_to "add", user_bookmark_add_path(current_user, bookmark), remote: true, id: "bookmark" %> 
```

将您的链接替换为部分链接。

**.js.erb**

```
<% if duplicated_url? @bookmark.url %>
   alert("Duplicated")
<% else %>
   $("#bookmark").replaceWith("<%= j render "form", bookmark: Bookmark.new %>");
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:55:08.490

在您的`add.js.erb`文件中，在`else`代码的一部分中，您可以`append`像`partial`这样添加到您的列表中：

```
$('#your_list').append(
  "<%= escape_javascript(render('your_item_of_the_table_partial')) %>"
); 
```

这`partial`可以是列表项、表格行、包含您的内容的 div 等等。问题是，您将需要一大块 html 来在屏幕上重新呈现新内容。

列表项部分示例：

```
# _bookmark_item.html.erb
<li><%= @bookmark.url %> </li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:56:10.263

尝试这样的事情：

```
$('#your_div_id').append('<%= escape_javascript(raw render :partial => 'your_form_partial') %>') 
```

这会将您的 ruby​​ 部分的内容添加到 DOM。

# java - 设置和 getListAdapter 错误

> ID：14042649
> 
> 赞同：0
> 
> 时间：2012-12-26T15:34:06.227
> 
> 标签：java, android, sql, adapter

我不知道为什么它显示错误。有人可以帮助我。

```
public class MainActivityT extends Activity {
    private VerlaufDataSource datasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_t);

        datasource = new VerlaufDataSource(this);
        datasource.open();

        List<Entry> values = datasource.getAllEntries();

        ArrayAdapter<Entry> adapter = new ArrayAdapter<Entry>(this,
            android.R.layout.simple_list_item_1, values); 
```

在下一行中，它向我显示了一个错误，即：

```
Multiple marlcers at this line
- The method setArrayAdapter(ArrayAdapter< Entry>) is undefined for the type MainActivityT
-Uno broakpoint:MainActivityT [lino: 3S] - onCroato(Bundlo)
- The method setlistAdapter(ArrayAdapter< Entrv>) is undefinod for tho type MainActivitvT

        setListAdapter(adapter);

    }

    List<Entry> AufgabenListe = new ArrayList<Entry>();

    public void VerlaufKlick(View view)
    {
        @SuppressWarnings("unchecked") 
```

在下一行中，它向我显示了一个错误，即：此行有多个制造商 - 方法 getArrayAdapter() 对于 MainActivityT 类型未定义 - 方法 qetlistAdapter() 对于 tvpe MainActivitvT 未定义

```
 ArrayAdapter<Entry> adapter = (ArrayAdapter<Entry>) getListAdapter();
        Entry comment = null;
        switch (view.getId()) 
        {
        case R.id.button1:
          String[] comments = new String[] { "Cool", "Very nice", "Hate it" };
          int nextInt = new Random().nextInt(3);
          comment = datasource.createEntry(comments[nextInt]);
          adapter.add(comment);
          break;

        }
        adapter.notifyDataSetChanged();

    }
    @Override
      protected void onResume() 
      {
        datasource.open();
        super.onResume();
      }

      @Override
      protected void onPause() 
      {
        datasource.close();
        super.onPause();
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:38:13.513

您的活动需要扩展`ListActivity`而不是`Activity`.

类中没有可用的方法 setListAdapter/getListAdapter `Activity`。如果您扩展它们，它们是可用的`ListActivity`。

阅读这篇关于如何使用 ListActivity 的文章[。](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:39:36.023

使用 ListActivity 而不是 Activity 作为基类

# sql - 即使高效编写，查询执行速度也很慢

> ID：14042651
> 
> 赞同：-3
> 
> 时间：2012-12-26T15:34:33.417
> 
> 标签：sql, sql-server, sql-server-2008, tsql, common-table-expression

这是我的查询：

```
With cte as (
    Select
        ROW_NUMBER() OVER (Order By  d.OldInstrumentID ) peta_rn,   
        d.DocumentID
    From Documents d
    Inner Join Users u on d.UserID = u.UserID 
    Where 1=1  
       And (d.JurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9)
       And d.DocumentStatusID <> 3 And  d.DocumentStatusID <> 8 
       And  d.DocumentStatusID <> 7 
       AND ((CreatedByJurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9 Or CreatedByAccountID IN (Select AccountID From AccountsJurisdictions Where JurisdictionID = 1)))  
      And d.DocumentStatusID = 9
) 
Select
    d.DocumentID,
    d.IsReEfiled,
    d.IGroupID,
    d.ITypeID,
    d.RecordingDateTime,
    d.CreatedByAccountID,
    d.JurisdictionID, 
    Case 
        When d.OldInstrumentID IS NULL 
        THEN d.LastStatusChangedDateTime 
        Else d.RecordingDateTime 
    End as LastStatusChangedDateTime,
    dbo.FnCanChangeDocumentStatus(d.DocumentStatusID,d.DocumentID) as CanChangeStatus,
    d.IDate, 
    d.InstrumentID, 
    d.DocumentStatusID,
    d.DocumentDate,
    Upper(dbo.GetFlatDocumentName(d.DocumentID)) as FlatDocumentName
From Documents d
Inner Join cte on cte.DocumentID = d.DocumentID 
Where 1=1 
  And peta_rn>=80000 
  AND peta_rn<=80050 
Order by peta_rn 
```

DB 中几乎没有 100,000 条记录，但此查询执行大约需要 2 秒才能获取 50 条记录。完全不能接受！我什至在大多数使用连接的列上都有索引。

在 CTE 的基本子句中进行了单个连接，但这是必需的。我知道加入是杀手，但我需要 1 加入。如果这删除这段代码：

```
And (d.JurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9)
And d.DocumentStatusID <> 3 
And d.DocumentStatusID <> 8 
And d.DocumentStatusID <> 7 
AND ((CreatedByJurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9 Or CreatedByAccountID IN (Select AccountID From AccountsJurisdictions Where JurisdictionID = 1))) 
And d.DocumentStatusID = 9 
```

它运行得非常快。在 SSMS 中显示 0 秒。有什么方法可以加快这个查询？我需要这些条件，因为它们甚至没有那么大。为什么条件会减慢查询速度？我已经在 CreatedByAccountID 和其他列上有索引。真的很烦！

**编辑：**

感谢您的回复。更多细节：

你们中的许多人建议删除多余的条件。抱歉，这段 SQL 是在代码中动态形成的，我将该版本粘贴到 SSMS 和此处。从 where 子句中删除这些条件无济于事：

```
Where 1=1
  And (d.JurisdictionID = 1 Or d.DocumentStatusID = 5 Or d.DocumentStatusID = 9)
  And d.DocumentStatusID <> 3 
  And  d.DocumentStatusID <> 8 
  And  d.DocumentStatusID <> 7 
  AND ((CreatedByJurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9 Or CreatedByAccountID IN (Select AccountID From AccountsJurisdictions Where JurisdictionID = 1)))  
  And d.DocumentStatusID = 9 
```

事实上，只要我放入 where 子句，它就会变慢。所以，即使这个也很慢：

```
 Where 1=1 
   And (d.JurisdictionID = 1 Or d.DocumentStatusID = 5 Or d.DocumentStatusID = 9) 
```

更多细节。Row_Number() 中的 order by 子句是决定因素。`OldInstrumentID`varchar(14) 类型很慢，需要 2 秒，而如果我按`d.DocumentID`int 类型排序，即使我保留所有这些冗余条件，它也会在 0 秒内正常工作。

这是我的执行计划：

![在此处输入图像描述](../Images/e07ee230ceb0b49e56c7059028098639.png)

**更新：**

我在每一列上创建了这样的索引，它似乎运行得非常快。呜呜呜！！！

```
Create NonClustered Index   IX_DocumentDate on Documents
(
    DocumentDate     

)
Include(
    JurisdictionID,
    JudgementTypeID,
    IDate,
    EfileDate,
    UserID,
    RecordingDateTime,
    ApprovedBy,
    ACEfileBankAccountID,
    LastStatusChangedDateTime,
    ACEfileCreditCardID,
    EfiledByUserID,
    ITypeID,
    IGroupID,
    InstrumentID,
    OldInstrumentID,
    [CreatedByJurisdictionID],
    CreatedByAccountID,
    [DocumentStatusID]      

      ,[Remarks]
      ,[InternalNotes]
      ,[ParentDocumentID]
      ,[FilingNumber]
      ,[StampData]      
      ,[Receipt]
      ,[ReceiptNo]
      ,[IsReEfiled]      
      ,[ImportedFromInstrumentID]

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:54:14.527

这些条件可能会减慢您的查询速度有几个可能的原因：

*   我怀疑查询引擎别无选择，只能执行索引或表扫描以从 Documents 表中获取 DocumentStatusID 的值。但是，根据我的阅读，大部分工作都是多余的，因为条件的最后一行表明 DocumentStatusID 必须始终等于 9。如果 SQL Server 引擎最后处理此条件，则可能是它正在执行更多的表扫描评估其他条件而不是它需要的。您的其他条件可能会被重写，因为您只会返回 DocumentStatusID 为 9 的文档。
*   您的 CTE 中有一个子查询，每次请求您的 CTE 的值时都会执行该子查询。如果 AccountsJurisdictions 表很大并且 AccountID 没有被索引，那么这里可能会影响性能。

就像另一个注意事项一样，可能应该删除“WHERE 1=1”语句，因为它们将强制 SQL Server 引擎检索和处理我认为的所有行 - 您可能正在使用这种语法对抗内置查询优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:29:55.270

您的 CTE 可以通过多种方式进行简化。特别是，您正在检查，因此可以删除`d.DocumentStatusID = 9`对的任何其他引用。`documentStatusId`

但是，我认为性能问题是由于`in`嵌入在复杂`where`逻辑中的子句所致。 `In`通常在 SQL Server 中优化得很好。不过，在这种情况下，我猜你得到的是一个嵌套循环连接。尝试进行显式连接：

```
 Select  ROW_NUMBER() OVER (Order By  d.OldInstrumentID ) peta_rn,   
            d.DocumentID
    From Documents d Inner Join
         Users u left outer join
         on d.UserID = u.UserID 
         (select distinct AccountId
          from AccountsJurisdictions
          Where JurisdictionID = 1
         ) aj1
         on u.CreatedByAccountID = aj1.AccountId and
               (d.JurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9) AND
               d.DocumentStatusID <> 3 And d.DocumentStatusID <> 8 AND
               d.DocumentStatusID <> 7 AND
               (CreatedByJurisdictionID = 1 Or DocumentStatusID = 5 
                 Or DocumentStatusID = 9 Or aj1.AccountId is not NULL
                ) AND
               d.DocumentStatusID = 9 
```

您也可以尝试创建一个索引，`AccountsJurisdictions(JurisdictionId, AccountId)`以便该索引用于该部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:15:51.760

如果 d.DocumentStatusID = 9 则有很多冗余条件

```
;With cte as (
               Select  ROW_NUMBER() OVER (Order By  d.OldInstrumentID ) peta_rn, d.DocumentID
               From Documents d
               Join Users u 
                    on d.UserID = u.UserID 
               Where -- 1 = 1 AND
               d.DocumentStatusID = 9 
               AND (CreatedByJurisdictionID = 1  
                    Or CreatedByAccountID IN (Select AccountID From AccountsJurisdictions Where JurisdictionID = 1)
                   )
               -- below redundant as  d.DocumentStatusID = 9
               --(d.JurisdictionID = 1 Or DocumentStatusID = 5 Or DocumentStatusID = 9)
               --And d.DocumentStatusID <> 3 
               --And d.DocumentStatusID <> 8 
               --And  d.DocumentStatusID <> 7 
               --AND (
               --      Or DocumentStatusID = 5 
               --      Or DocumentStatusID = 9 
               --    )  
             ) 
Select  d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime -- ...
From Documents d 
Join cte 
  on cte.DocumentID = d.DocumentID 
Where -- 1=1 AND
     peta_rn>=80000 AND peta_rn<=80050 
Order by peta_rn 
```

这甚至是必要的吗？
在 d.UserID = u.UserID 上加入用户 u
如果 u 是 FK，那么这将始终为真

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T16:07:13.803

我会尝试将`DocumentstatusID`,`JurisdictionID`和`CreatedByJurisdictionID`作为 CTE 中的列，并将非常复杂的连接子句作为 WHERE 放在最终连接上。

对于所有那些“不等于”的情况和复杂的逻辑，我并不感到惊讶，因为“不等于”本身并不是一个快速的操作。我会尝试简化围绕这些的所有代码。

# jquery - 悬停动作后如何保存css样式

> ID：14042655
> 
> 赞同：3
> 
> 时间：2012-12-26T15:34:45.313
> 
> 标签：jquery, css

在使用 jquery 和 css 实现菜单控件期间，我遇到了以下问题：

[**这是我创建的现场演示，以展示我当前的问题**](http://jsfiddle.net/pkysylevych/85V6P/)

例如，当我将鼠标悬停在“菜单**项 1”****上****时**，该**项目**的样式已更改`background: white;`（但在我的示例中不起作用。 ******`background: white;`******

 ******此外，当将鼠标悬停在**Menu Item 2**上时，应将以前的菜单项样式（**Menu Item 1**）更改为默认样式。

有谁知道如何解决这个问题？

在链接腐烂的情况下，这是小提琴中的代码：

**HTML**

```
<ul id="jsddm">
    <li><a href="#">Menu Item 1</a>
        <ul>
            <li><a href="#">Sub Menu Item 1</a></li>
            <li><a href="#">Sub Menu Item 2</a></li>
            <li><a href="#">Sub Menu Item 3</a></li>
            <li><a href="#">Sub Menu Item 4</a></li>
        </ul>
    </li>
    <li><a href="#">Menu Item 2</a>
        <ul>
            <li><a href="#">Sub Menu Item 1</a></li>
            <li><a href="#">Sub Menu Item 2</a></li>
            <li><a href="#">Sub Menu Item 3</a></li>
            <li><a href="#">Sub Menu Item 4</a></li>
            <li><a href="#">Sub Menu Item 5</a></li>
        </ul>
    </li>
    <li><a href="#">Menu Item 3</a>
        <ul>
            <li><a href="#">Sub Menu Item 1</a></li>
            <li><a href="#">Sub Menu Item 2</a></li>
            <li><a href="#">Sub Menu Item 3</a></li>
        </ul>
    </li>
    <li><a href="#">Menu Item 4</a></li>
</ul>​ 
```

**脚本**

```
var timeout = 200;
var closetimer = 0;
var ddmenuitem = 0;

function jsddm_open() {
    jsddm_canceltimer();
    jsddm_close();
    ddmenuitem = $(this).find('ul').eq(0).css('visibility', 'visible');
}

function jsddm_close() {
    if (ddmenuitem) ddmenuitem.css('visibility', 'hidden');
}

function jsddm_timer() {
    closetimer = window.setTimeout(jsddm_close, timeout);
}

function jsddm_canceltimer() {
    if (closetimer) {
        window.clearTimeout(closetimer);
        closetimer = null;
    }
}

$(document).ready(function() {
    $('#jsddm > li').bind('mouseover', jsddm_open);
    $('#jsddm > li').bind('mouseout', jsddm_timer);
});

document.onclick = jsddm_close;​ 
```

**CSS**

```
/* menu styles */
#jsddm
{
    margin: 0;
    padding: 0;
    float: left;
    background: #4370b6;
    width: 100%;
}

#jsddm > li
{
    float: left;
    list-style: none;
    font: 12px Tahoma, Arial;
    background: #4370b6;
    padding: 0 5px;
}

#jsddm > li a
{
    display: block;
    padding: 0 15px;
    text-decoration: none;
    color: #FFF;
    white-space: nowrap;
    height: 62px;
    line-height: 60px;
}

#jsddm > li a:hover
{
    background: #FFF;
    color: #4370b6;
    padding: 0 15px;
    -moz-box-shadow: 0 3px 5px rgba(0,0,0,17);
    -webkit-box-shadow: 0 3px 5px rgba(0,0,0,17);
    box-shadow: 0 3px 5px rgba(0,0,0,17);
}

#jsddm li ul
{
    margin: 0;
    padding: 0;
    position: absolute;
    visibility: hidden;
}

#jsddm li ul li
{
    float: none;
    display: inline;
    width: auto;
    background: #0b0b0b;
    color: #FFF;
}

#jsddm li ul li a
{
    height: 40px;
    min-width: 240px;
    border-bottom: 1px solid #e9e9e9;
    -moz-box-shadow: 0 3px 5px rgba(0,0,0,17);
    -webkit-box-shadow: 0 3px 5px rgba(0,0,0,17);
    box-shadow: 0 3px 5px rgba(0,0,0,17);
    background: #FFF;
    color: #0b0b0b;
    text-align: left;
    line-height: 40px; /* IR Fix */
}

#jsddm li ul li a:hover
{
    /*background: #4370B6;
    color: #FFF;*/
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:42:17.630

问题出在你的 CSS 中。您声明了以下内容：

```
#jsddm > li a:hover
{
    background: #FFF;
    color: #4370b6;
    padding: 0 15px;
    -moz-box-shadow: 0 3px 5px rgba(0,0,0,17);
    -webkit-box-shadow: 0 3px 5px rgba(0,0,0,17);
    box-shadow: 0 3px 5px rgba(0,0,0,17);
} 
```

只需将其更改为：

```
#jsddm > li:hover > a, #jsddm > li:hover > ul a:hover
{
    background: #FFF;
    color: #4370b6;
    padding: 0 15px;
    -moz-box-shadow: 0 3px 5px rgba(0,0,0,17);
    -webkit-box-shadow: 0 3px 5px rgba(0,0,0,17);
    box-shadow: 0 3px 5px rgba(0,0,0,17);
} 
```

它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:39:09.423

改变

```
#jsddm > li a:hover 
```

到

```
#jsddm > li:hover a 
```

[**演示**](http://jsfiddle.net/85V6P/1/)******

# ios - 快速加载 AVFoundation 视频会话

> ID：14042656
> 
> 赞同：2
> 
> 时间：2012-12-26T15:34:55.363
> 
> 标签：ios, performance, avfoundation, avcapturesession

我遇到了一个非常有趣的例子，我很想复制它。有一个我非常喜欢的很棒的应用程序： [https ://itunes.apple.com/en/app/oldbooth/id298007500?mt=8](https://itunes.apple.com/en/app/oldbooth/id298007500?mt=8)

我不是广告，因为我不是作者。现在他们有一个有趣的点，当从一个表格视图中，通过选择一个拇指，一个带有视频会话的 ViewController 被加载。我注意到了什么：

1）视频会话屏幕的加载速度非常快，几乎没有等待。

2) 不存在 UIImagePicker 快门动画

3）VC外观动画看起来像“pushVC”，我的意思是它是水平的

4）带有预览的视图首先是白色的，然后带有 alpha 动画它变为 0 alpha。

我有一些使用 AVFoundation 视频捕获的经验，但它没有那么快！这对我来说太不可思议了，我看到这种速度水平是可能的，当然我也想要同样的速度。请你建议如何才能达到这种水平的性能？

我正在尝试以下操作：

在父 VC 中，在 didLoad 中：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
    self.photoVC = [storyboard instantiateViewControllerWithIdentifier:@"PhotoCreationVC"];

    dispatch_async(queue, ^{    
        [self.photoVC configureFoundation];
    }); 
```

该方法执行以下操作：

```
-(void) configureFoundation{
    NSError * error;
    _captureManager = [[AVCamDemoCaptureManager alloc] init];
    if ([_captureManager setupSessionWithPreset:AVCaptureSessionPresetHigh error:&error]) {
        [self setCaptureManager:_captureManager];
        _sessionEstablished = YES;
    } else {
        [Utils showMessage:[error localizedDescription] withTitle:@"Input Device Init Failed"];
    }

} 
```

当 VC 运行 didLoad 时：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (_sessionEstablished) {
        AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[_captureManager session]];
        UIView *view = self.previewView;
        CALayer *viewLayer = view.layer;
        CGRect bounds = view.bounds;

        [captureVideoPreviewLayer setFrame:bounds];

        if ([captureVideoPreviewLayer isOrientationSupported]) {
            [captureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationPortrait];
        }

        [captureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

        self.captureVideoPreviewLayer = captureVideoPreviewLayer;

        if ([[_captureManager session] isRunning]) {

            [_captureManager setDelegate:self];

            NSUInteger cameraCount = [_captureManager cameraCount];
            if (cameraCount < 1) {
            } else if (cameraCount < 2) {
            }

            if (cameraCount < 1) {

            }

            [viewLayer insertSublayer:captureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

        } else {
            [Utils showMessage:@"Failed to start session." withTitle:@"Error"];
        }

    }

} 
```

那么会发生什么：在 iTunes 应用程序中，它首先加载屏幕，然后释放白色视图的 alpha（我猜它只是封面视图，延迟后开始丢失 alfa）。就我而言，它在加载 VC 之前仍然需要考虑一段时间。时间（1.5秒）是一样的，但是等待不是那么友好。

如果我将所有加载代码放在 didAppear 中，它会立即加载，但是加载，所以点击和准备视频之间的总时间增加到 2.5 秒，这不好。

如果我将加载代码放在 willAppear 中，它的工作方式与第一种情况相同，当它首先想到时，加载（总共 1.5 秒）......

PS 我使用来自 Apple 的 AVCamDemoCaptureManager 示例代码，经过简化，没有任何音频和电影输出。只是视频输入设备和静止图像捕获。

伙计们，请给我一些性能建议吗？如何在加载相机会话时实现一些高性能？任何帮助将不胜感激！

# php - 检查来自 textarea 的语言

> ID：14042658
> 
> 赞同：-2
> 
> 时间：2012-12-26T15:35:10.950
> 
> 标签：php, unicode, textarea

> **可能重复：**
> [从 PHP 中的字符串中检测语言](https://stackoverflow.com/questions/1441562/detect-language-from-string-in-php)

如何根据包含的语言（阿拉伯语、西班牙语等）更改文本区域的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:45:34.523

你的原始问题提到了阿拉伯语。

如果通过检测语言你的意思是阿拉伯语与英语*字符*，那么你可以使用这个：

```
preg_match('/[\x{0600}-\x{06FF}]/ui', $string) 
```

考虑到您的输入是 UTF-8 编码，阿拉伯语[的字符范围](https://en.wikipedia.org/wiki/List_of_Unicode_characters#Arabic)是 U+0600 到 U+06FF，对于其他一些语言，它是另一组字符，等等。

# c#-4.0 - 包含大量信息的网格 - 为空时不显示

> ID：14042660
> 
> 赞同：0
> 
> 时间：2012-12-26T15:35:19.917
> 
> 标签：c#-4.0, windows-runtime, winrt-xaml

我有一个非常大的网格，我在下面显示我的一些 XAML，但如果值为空，它不应该在行上显示 Textblockes。
我怎样才能创造它？

```
<Grid x:Name="JobDetailGrid">
   <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="10" />
      <ColumnDefinition Width="*"/>
   </Grid.ColumnDefinitions>
   <TextBlock Grid.Row="0" Grid.Column="0" x:Uid="JobDetailTaskType" />
   <TextBlock Grid.Row="0" Grid.Column="2" x:Uid="JobDetailTaskTypeSrv" Text="{Binding TaskType}" />
   <TextBlock Grid.Row="1" Grid.Column="0" x:Uid="JobDetailStatus" />
   <TextBlock Grid.Row="1" Grid.Column="2" x:Uid="JobDetailStatusSrv" Text="{Binding Status}" />
   <TextBlock Grid.Row="4" Grid.Column="0" x:Uid="JobDetailApproved" />
   <TextBlock Grid.Row="4" Grid.Column="2" x:Uid="JobDetailApprovedSrv" Text="{Binding Approved}" /> 
```

也许我可以在 C# 中做到这一点，但我在想，如果我可以制作一个 Binding 或创建一个 StackPanel，但我看到的 StackPanel 的问题是我需要在每个 TextBlock 之后创建边距

或者我是否需要为此创建自己的用户控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:55:46.247

这可以通过绑定轻松完成！您需要创建一个将接受字符串并返回可见性的[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)（因此空字符串将隐藏文本框），然后将文本块的可见性设置如下：-

```
<TextBlock Grid.Row="0" Grid.Column="0" x:Uid="JobDetailTaskType" Visibility={Binding TaskType, Converter={StaticResource visibilityConverter}}/> 
```

将可见性放​​在文本块（标签和值）上，并且由于您具有自动高度，因此您不需要弄乱边距。

# jersey - JAX-RS 2.0 球衣准备好 4-5 月项目投产了吗？

> ID：14042662
> 
> 赞同：1
> 
> 时间：2012-12-26T15:35:35.240
> 
> 标签：jersey, jax-rs

我正在构建一个 RESTful Web 应用程序，我有兴趣在其中使用异步功能和过滤。该应用程序需要在四月/五月左右投入生产。开始研究 JAX-RS 2.0 Jersey 的可用选项是一个好主意，因为我无法在 JAX-RS 1.0 中使用此功能。如果没有，那么我可能不得不研究其他选项，例如 Play Framework（我目前正在评估）。我已经看到 Resteasy 2.3.5 也具有所需的功能，但我希望使用正确的 JAX-RS 2.0 实现。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:16:59.143

如果你的应用服务器是 jboss 7.x 我推荐你 RESTEasy，Jboss 人负责 RESTEasy 并且它与 JBoss 7.x 集成，RESTEasy 和 Jersey 的问题是**安全性**，请在选择之前阅读**OAuth** ，安全性很重要,请先实现这个，不要只看，**实现它**

# objective-c - 如何在滚动的 TableView 上方创建一个具有固定 MapKit 的 ViewController？

> ID：14042663
> 
> 赞同：0
> 
> 时间：2012-12-26T15:35:39.783
> 
> 标签：objective-c, ios, uiviewcontroller, uiscrollview, mapkit

**如何在滚动的 TableView 上方创建一个具有固定 MapKit 的 ViewController？**

我正在使用 Storyboards 进行编码，虽然我是一位经验丰富的开发人员，但这是我第一次使用 iOS、XCode 和 Objective-C。我目前有一种可行的方法，但是我当前使用的方法通过将 MapKit 设置为 UITableViewController 内的表视图的部分标题来工作，并且看起来不正确。（它之所以有效，是因为我只有一个部分，当我滚动表格视图时，MapKit 部分将始终是固定的。）

执行此操作的代码如下所示：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 200.0;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    MKMapView *mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 200)];
    return mapView;
} 
```

不幸的是，这样做意味着滚动条出现在地图和表格视图旁边。**相反，我希望滚动条与表格视图一样高。**

网站上还有其他关于做这样的[事情](https://stackoverflow.com/a/6961973)的答案，但没有一个提到滚动条的高度（以及代码的优雅性。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:46:41.880

您提供的链接正是您应该做的，但在 Xib 文件中还包括表视图上方的 MKMapView，并为此正确设置插座（并实现正确的委托协议）。滚动条只会与表格视图一样高，因为它是实际表格的子视图，并且通常这是在 UI 上接受的处理方式，除非您绝对想以编程方式完成所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-06T11:37:57.543

在这种情况下，您可以使用单独的 UIView 并将其放在 Exit 之后。将您的 mapView 放入该 UIView 并执行所需的[![在此处输入图像描述](../Images/c60ac9e33c1b34c157616bc6f08756db.png)](https://i.stack.imgur.com/R9MOK.jpg). 还要为您的 tableView(myTableView) 和 UIView(viewWithMapView) 绘制一个出口。现在将其添加到您的 viewDidLoad() 中：-

```
 [_myTableView setTableHeaderView:_viewWithMapView]; 
```

这会将您的 mapView 添加为 tableView 标题而不是剖面视图标题。

# android - Android图像转换矩阵，将触摸坐标翻译回来

> ID：14042673
> 
> 赞同：2
> 
> 时间：2012-12-26T15:36:34.833
> 
> 标签：android, matrix, image-rotation

我正在为 android 构建一个“导航类型”应用程序。

对于导航部分，我正在构建一个 Activity，用户可以在其中使用触摸事件移动和缩放地图（这是一个位图），并且地图也可以使用指南针围绕屏幕中心旋转。

我正在使用 Matrix 来缩放、转置和旋转图像，然后将其绘制到画布上。

这是加载视图时调用的代码，以使图像在屏幕中居中：

```
 image = new Matrix();
    image.setScale(zoom, zoom);

    image_center = new PointF(bmp.getWidth() / 2, bmp.getHeight() / 2);

    float centerScaledWidth = image_center.x * zoom;
    float centerScaledHeigth = image_center.y * zoom;

    image.postTranslate(
            screen_center.x -  centerScaledWidth, 
            screen_center.y - centerScaledHeigth); 
```

图像的旋转是使用*postRotate*方法进行的。

然后在*onDraw()*方法中我只调用

```
 canvas.drawBitmap(bmp, image, drawPaint); 
```

问题是，当用户触摸屏幕时，我想在图像上触摸点，但显然我无法获得正确的位置。我试图反转**图像**矩阵并转换触摸点，但它不起作用。

有人知道如何翻译点坐标吗？

**编辑**

我正在使用此代码进行翻译。 *dx*和*dy*是从*onTouch*侦听器获取的平移值。*new_center* 是一个浮点值数组，格式为 {x0, y0, x1, y1...}

```
 Matrix translated = new Matrix();
  Matrix inverted = new Matrix();

  translated.set(image);
  translated.postTranslate(dx, dy);

  translated.invert(inverted);
  inverted.mapPoints(new_center);
  translated.mapPoints(new_center);

  Log.i("new_center", new_center[0]+" "+new_center[1]); 
```

实际上我尝试使用 as *new_center = {0,0}*：

仅应用*转换*后的矩阵，我得到了 bmp 的 (0,0) 点和屏幕的 (0,0) 点之间的距离，但它似乎没有考虑到旋转。

将*倒置*矩阵应用于我得到这些结果的点，以各种可能的方式移动图像。

```
 12-26 13:26:08.481: I/new_center(11537): 1.9073486E-6 -1.4901161E-7
  12-26 13:26:08.581: I/new_center(11537): 0.0 -3.874302E-7
  12-26 13:26:08.631: I/new_center(11537): 1.9073486E-6 1.2516975E-6
  12-26 13:26:08.781: I/new_center(11537): -1.9073486E-6 -5.364418E-7
  12-26 13:26:08.951: I/new_center(11537): 0.0 2.682209E-7
  12-26 13:26:09.093: I/new_center(11537): 0.0 7.003546E-7 
```

相反，我正在观察图像上翻译的坐标。

我的思路正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:41:30.930

好的我明白了。

首先，我将旋转与图像的平移和缩放分开。

因为我创建了一个自定义 ImageView，所以这很简单。我将旋转应用于 ImageView 的*画布*，并将其他转换应用于图像矩阵。

我通过全局矩阵变量获得了画布矩阵的踪迹。

一些代码：

要为相应的*onTouch事件设置正确的移动，首先我使用**画布*矩阵的倒数“旋转回”从*onTouch*传递的点（*开始*点和*停止点）*

 *然后我计算 x 和 y 之间的差异，并将其应用于*图像*矩阵。

```
 float[] movement = {start.x, start.y, stop.x, stop.y};

  Matrix c_t = new Matrix();
  canvas.invert(c_t);
  c_t.mapPoints(movement);

  float dx = movement[2] - movement[0];
  float dy = movement[3] - movement[1];

  image.postTranslate(dx, dy); 
```

相反，如果您想检查图像移动是否不超过其大小，请在*image.postTranslate(dx, dy);之前* 你把这段代码：

```
 float[] new_center = {screen_center.x, screen_center.y};

  Matrix copy = new Matrix();
  copy.set(image);
  copy.postTranslate(dx, dy);

  Matrix translated = new Matrix();
  copy.invert(translated);
  translated.mapPoints(new_center);

  if ((new_center[0] > 0) && (new_center[0] < bmp.getWidth()) && 
    (new_center[1] > 0) && (new_center[1] < bmp.getHeight())) {

        // you can remove the image.postTranslate and copy the "copy" matrix instead
        image.set(copy);
  ... 
```

需要注意的是：

A) 图像的中心旋转是屏幕的中心，所以在画布旋转过程中不会改变坐标

B）您可以使用屏幕中心的坐标来获取图像的旋转中心。

使用此方法，您还可以将每个触摸事件转换为图像坐标。*

# c# - 如何使用 Google Search API 无限制地搜索网络

> ID：14042678
> 
> 赞同：0
> 
> 时间：2012-12-26T15:36:43.060
> 
> 标签：c#, google-api, google-search-api

我需要一个网络搜索作为我的应用程序，使用谷歌网络搜索就可以了。当我自己编写代码或使用 GAPI 之类的程序集时，这适用于不同的情况。问题是我曾经因为分页结果而出错：

> ResponseStatus：400，原因：超出范围开始

关于这个问题，我由 GAPI 开发人员发现：Google AJAX 搜索 API 不允许超过 64 个结果（例如，最大页面为 56）。

但是我需要更多的结果，因为这对于我的使用来说更少，我至少需要 500 个……还有其他方法可以通过搜索网络获得更多结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:50:09.137

看起来 GAPI 使用的是自 2010 年 11 月 1 日起正式弃用的旧版 Google 搜索 API。

如果您想要更多结果，您应该查看另一个库或使用 Google 自定义搜索 API 实现您自己的库：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

# git - 无法提交对 repo 的更改

> ID：14042680
> 
> 赞同：0
> 
> 时间：2012-12-26T15:36:55.800
> 
> 标签：git

我正在从命令行使用 GIT 并尝试提交我对 repo 所做的一些更改。我是 GIT 的新手，所以我确定我错过了一些非常简单的东西。

我已导航到项目所在的目录，并且位于我要提交的文件所在的目录中。我正在尝试更新 gemfile 以包含“minintest”

我试过了：

> git commit gemfile -m 将 minitest 添加到 gemfile

错误：pathspec 'gemfile' 与 git 已知的任何文件都不匹配

对不起新手问题。我是使用 git 的新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:45:45.647

您需要`git add gemfile`将文件添加到暂存部分。*然后*你可以提交它（如果你不想让 git 启动你的 $EDITOR，可以`git commit`选择添加）。`-m "the commit message"`

另一种选择是使用`git commit -a`which 提交所有更改的文件（只要它们已经被跟踪），以防您没有任何不想提交的更改。

# c# - System.Data.SqlClient.SqlConnection 不包含 Query with dapper 和 c# 的定义

> ID：14042685
> 
> 赞同：22
> 
> 时间：2012-12-26T15:37:08.457
> 
> 标签：c#, .net, dapper

以下代码在编译时给出以下错误消息：

> 'System.Data.SqlClient.SqlConnection' 不包含'Query' 的定义，并且找不到接受'System.Data.SqlClient.SqlConnection' 类型的第一个参数的扩展方法'Query'（您是否缺少 using 指令还是汇编参考？）

我使用 nuget 打包器添加了 Dapper。

有任何想法吗？谢谢，

**代码：**

```
using (SqlConnection sqlConnection = new SqlConnection(Connectionstring))
{
    sqlConnection.Open();
    Member customer = sqlConnection.Query<Member>("SELECT * FROM member");
    return customer;
} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-26T15:42:57.683

您需要在 .cs 文件中放置一条 using 语句，以使 Dapper 扩展方法可用。

```
using ...;
using Dapper;
using ...; 
```

# android - android中每个应用程序的CPU使用率

> ID：14042687
> 
> 赞同：35
> 
> 时间：2012-12-26T15:37:12.460
> 
> 标签：android

我是 android 编程的新手。我们如何在 android 中获取每个应用程序的 CPU 使用率？你的帮助会更有帮助

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-26T15:50:41.337

使用 adb 命令：

```
adb shell top -m 10 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-10T11:21:08.400

来源： [识别 android 应用程序 CPU 使用率的技术](http://web.archive.org/web/20131215204905/http://blog.isys-labs.com/tool-for-optimizing-android-app-cpu-usage-and-battery-drain/)

*   Linux：

    > adb 外壳顶部-m 10 | **grep** *包名*

*   视窗：

    > adb 外壳顶部-m 10 | **FINDSTR 包** *名*

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-26T16:03:32.057

去`Settings -> Developer Tools -> Show CPU Usage`

然后运行应用程序

编辑：这必须在应用程序中完成。如果您在 2019 年阅读本文，请使用[CPU Profiler](https://developer.android.com/studio/profile/cpu-profiler)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-15T03:19:18.903

两种方法：

*   `adb shell "top -n 1"`
*   `adb shell dumpsys cpuinfo`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-15T10:58:05.827

使用新的[Android Studio 3.0 分析器](https://developer.android.com/studio/profile/cpu-profiler.html)，您可以获得有关您的 APP 的 CPU 使用率和 CPU 检查的更高信息。

[![在此处输入图像描述](../Images/d5418e3c0c172f47898000448d4a89bb.png)](https://i.stack.imgur.com/M7uiL.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T15:41:28.413

有几种方法。

第一个是在Jelly Bean开发者选项中打开CPU使用率。

第二个选项是`adb shell top -m 10`在 Windows Android SDK 文件夹或`./adb shell top -m 10`Mac/Linux 中运行该函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-24T10:43:57.390

这让您以更顶级的方式进行监控

```
watch -n 0.5 adb shell top -n 1 
```

`0.5`是轮询间隔

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-06-03T03:40:02.483

您可以使用应用程序访问这些类型的信息。例如**简单系统监视器**、[简单系统监视器](https://play.google.com/store/apps/details?id=com.dp.sysmonitor.app)。

# c# - 使用从 DropDownList 中选择的日期时间值并在 sql 查询条件中使用它

> ID：14042688
> 
> 赞同：0
> 
> 时间：2012-12-26T15:37:14.353
> 
> 标签：c#, asp.net, sql

我有一个下拉列表，我通过将存储在我的数据库中的日期时间值提取到 AccessDataSource 中来填充它。因此，当我运行我的 asp.net 程序时，我得到以下示例：23-DEC-12 12:00:00 AM。这是我在 AccessDataSource 中使用的查询：

```
SELECT DISTINCT date_time FROM temperature 
```

现在我想要做的是在这个下拉列表中获取选定的值（日期时间值）并将其用作 sql 查询中的条件。这是我要修复的代码：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    cnstr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\user\\Desktop\\Thermal Analysis\\thermal.accdb";
    OleDbConnection cn = new OleDbConnection(cnstr);
    cn.Open();
    OleDbCommand cmd = new OleDbCommand("SELECT ID,temp FROM temperature where date_time=#'" + DropDownList1.SelectedItem + "'# ", cn);
    OleDbDataReader dr = cmd.ExecuteReader();
} 
```

谁能告诉我我做错了什么！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:44:44.903

利用

```
DropDownList1.SelectedValue 
```

获取下拉列表的**值。**该值是您要在 SQL 语句中使用的值。此外，请考虑使用 DJ Kraze 在评论中提到的参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:58:21.353

你用过

```
 OleDbCommand cmd = 
      new OleDbCommand("SELECT ID,temp FROM temperature where date_time=#'" 
      + DropDownList1.SelectedItem + "'# ", cn); 
```

这是错误的。因为`SelectedItem`是`Text`and的集合，`value`你应该使用 text 或 value

您的代码应如下所示

```
OleDbCommand cmd = new OleDbCommand("SELECT ID,temp FROM temperature where date_time='" + DropDownList1.SelectedValue + "'", cn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:52:17.580

用这个替换你的 OleDbcommand 语句：

```
OleDbCommand cmd = new OleDbCommand("SELECT ID,temp FROM temperature where date_time=#'" + DropDownList1.SelectedValue + "'# ", cn); 
```

# itext - 未找到 iText 和 org.bouncycastle.asn1.ASN1Primitive

> ID：14042693
> 
> 赞同：6
> 
> 时间：2012-12-26T15:37:31.547
> 
> 标签：itext, bouncycastle, classnotfound

我是 iText 的新手。这是我第一个使用这个库的项目。

我正在构建一个基本上有一个大表的 PDF，在编译时，我收到了这个 Class Not Found 错误：找不到***org.bouncycastle.asn1.ASN1Primitive 的类文件***

我很困惑，因为我只使用基本功能，甚至没有触及 PDF 签名功能。我应该怎么做才能修复错误？

我在用着：

*   JDK 1.7
*   iText 5.3.5
*   extrajars 2.2（提供 bcmail-jdk15-146.jar、bcprov-jdk15-146.jar 和 bctsp-jdk15-146.jar）

我只在一个类中使用 iText，这些导入：

```
import com.itextpdf.text.BadElementException;
import com.itextpdf.text.BaseColor;
import com.itextpdf.text.Chunk;
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Font;
import com.itextpdf.text.Image;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfWriter; 
```

如果有帮助，我想澄清一下，当我在 NetBeans 中运行项目时，它编译并运行得很好。当我尝试将其编译为单个可执行 jar 文件（包括 dist/lib）时出现错误

这是出现错误的 build.xml 目标：

```
<target name="single_jar" depends="jar">

    <property name="store.jar.name" value="Final"/>

    <property name="store.dir" value="store"/>
    <property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>

    <echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>

    <delete dir="${store.dir}"/>
    <mkdir dir="${store.dir}"/>

    <jar destfile="${store.dir}/temp_final.jar" filesetmanifest="skip">
        <zipgroupfileset dir="dist" includes="*.jar"/>
        <zipgroupfileset dir="dist/lib" includes="*.jar"/>

        <manifest>
            <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
    </jar>

    <zip destfile="${store.jar}">
        <zipfileset src="${store.dir}/temp_final.jar"
        excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
    </zip>

    <delete file="${store.dir}/temp_final.jar"/>

</target> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T16:32:19.417

当前的 iText 版本（自 5.3.0 起）使用 BouncyCastle 1.47，但您提供 1.46；尽管这看起来只是一小步，但这些 BC 版本之间存在实质性变化；任何明智的版本管理都会将其称为 2.0。

请更新依赖项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-07T14:47:01.917

我得到`java.lang.NoClassDefFoundError: org/bouncycastle/asn1/ASN1Primitive`什么时候取决于：

```
 <dependency>                    
        <groupId>com.itextpdf.tool</groupId>
        <artifactId>xmlworker</artifactId>
        <version>5.5.0</version>
    </dependency>
    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>itextpdf</artifactId>
        <version>5.5.0</version>
    </dependency> 
```

我需要明确包含较新的 bouncycastle 工件：

```
 <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcprov-jdk15on</artifactId>
        <version>1.50</version>
    </dependency>
    <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcpkix-jdk15on</artifactId>
        <version>1.50</version>
    </dependency>        
    <dependency>                    
        <groupId>com.itextpdf.tool</groupId>
        <artifactId>xmlworker</artifactId>
        <version>5.5.0</version>
    </dependency>
    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>itextpdf</artifactId>
        <version>5.5.0</version>
    </dependency> 
```

# sql - 以不同方式分组或更改为多个子查询

> ID：14042694
> 
> 赞同：4
> 
> 时间：2012-12-26T15:37:35.490
> 
> 标签：sql, sql-server-2005

我是一个 .net 开发人员，除了基本的 CRUD 之外不做很多 SQL。

我在 SQL Server 2005 中有一个表：

```
CREATE TABLE [dbo].[Cases](
    [CasesID] [int] IDENTITY(1,1) NOT NULL,
    [Enterprise_Date_Key] [int] NOT NULL,
    [Interval_Num] [int] NOT NULL,
    [QueueID] [int] NOT NULL,
    [TotalCases] [int] NOT NULL, 
```

数据类似于：

```
4609    3   0   12455   4532
4610    3   0   12452   7963
4625    3   1   12455   4542
4626    3   1   12452   7993
4627    3   2   12455   4552
4628    3   2   12452   7823
. 
```

我运行查询：

```
set @enterpriseDateKey = 3
select QueueID, interval_num, max(TotalCases)
    from Case_Process_Status_Hourly_Fact a  
    where a.Enterprise_Date_Key = @enterpriseDateKey    
    group by QueueID,Interval_Num 
```

结果是：

```
12452   0   4532
12455   0   7963
12452   1   4542
12455   1   7993
12452   2   4552
12455   3   7823
.
.
. 
```

我需要一个查询的帮助，该查询将以不同的方式对数据进行分组，其中间隔是列（X 轴）并且`QueueID`在行（Y 轴）上分组。如：

```
12452   4532    4542    4552    .   .
12455   7963    7993    7823    .   . 
```

老实说，我不知道该往哪个方向走才能得到想要的结果。我不知道我是否应该沿着创建多个子查询的路径来获取我的数据，或者是否有任何方法可以进行不同的分组以获得我想要的结果。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:21:38.637

由于您使用的是 SQL Server 2005，因此您还可以实现该`PIVOT`功能：

```
select QueueID,
  [0] as Int_0, 
  [1] as Int_1, 
  [2] as Int_2, 
  [3] as Int_3
from
(
  select QueueID, interval_num, TotalCases
  from Case_Process_Status_Hourly_Fact a  
  where a.Enterprise_Date_Key = @enterpriseDateKey   
) src
pivot
(
  max(TotalCases)
  for interval_num in ([0], [1], [2], [3])
) piv 
```

请记住，如果您有未知数量的`interval_num`值，您还可以实现动态 sql 来执行此数据转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:04:05.040

在 SQL Server 中，将结果从行转换为列的方法不止一种。在这种情况下，最明显的方法似乎是使用聚合：

```
select QueueID,
      max(case when interval_num = 0 then TotalCases end) as Int0,
      max(case when interval_num = 1 then TotalCases end) as Int1,
      max(case when interval_num = 2 then TotalCases end) as Int2,
      max(case when interval_num = 3 then TotalCases end) as Int3,
      . . .
from Case_Process_Status_Hourly_Fact a  
where a.Enterprise_Date_Key = @enterpriseDateKey    
group by QueueID 
```

这本质上是您使用`select`具有透视列的子句的查询。在 SQL 中，您必须指定列数，因此请输入您认为必要的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:58:54.237

请看一下

```
http://stackoverflow.com/questions/6267660/sql-query-to-convert-rows-into-columns 
```

它可能对你有帮助

或者在网上寻找 T-SQL。它可以帮助你。

# objective-c - 将两个视图添加到 UIView

> ID：14042695
> 
> 赞同：0
> 
> 时间：2012-12-26T15:37:39.987
> 
> 标签：objective-c, uitableview, uiview

我有一个故事板文件，其中添加了一个 UITableView 和一个 UIView。UIView 是我尝试制作一个自定义标题，它将是半透明的，因此 tableview 将通过它可见（我不确定这是否可能，因为我是新手，这是我的第一个 iPhone 应用程序）。

在处理了与我的 ViewController 类的所有连接后，当我运行代码时，我给了我这个错误：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want.          
Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
"<NSAutoresizingMaskLayoutConstraint:0x8988060 h=--& v=--& V:[UIView:0x7574100(460)]>",
"<NSLayoutConstraint:0x7574780 V:|-(0)-[UIView:0x75742b0]   (Names: '|':UIView:0x7574100      )>",
"<NSLayoutConstraint:0x7574700 V:[UIView:0x75742b0]-(494)-|   (Names: '|':UIView:0x7574100)>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x7574700 V:[UIView:0x75742b0]-(494)-|   (Names: '|':UIView:0x7574100     )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in   <UIKit/UIView.h> may also be helpful. 
```

关于为什么会发生这种情况的任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:42:59.270

您已经在界面构建器中配置了一个不可能的状态，正如消息所述，您所拥有的布局约束不能一次全部满足。由于您是新手，我建议禁用自动布局约束（转到文档选项卡 - 最左边的选项卡 - 在界面构建器中并取消选中自动布局）这将使您摆脱这个问题

是的，你可以有两个相互叠加的视图，你只需要使用 alpha 值来配置半透明

# jquery - 如何在流星中使用 jQuery UI？

> ID：14042696
> 
> 赞同：9
> 
> 时间：2012-12-26T15:37:40.633
> 
> 标签：jquery, jquery-ui, meteor

在 Meteor 应用程序中安装 jQuery UI 的正确方法是什么？由于它还不是一个包，我将下载的 jquery-ui.min.js 和 jquery-1.8.3.js 添加到`lib`我的流星项目的文件夹中。这导致以下致命错误：

```
Your app is crashing. Here's the latest log.
app/lib/jquery-1.8.3.js:9472
})( window );

ReferenceError: window is not defined
at app/lib/jquery-1.8.3.js:9472:5

(.........)

Exited with code: 1
Your application is crashing. Waiting for file change. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T03:38:13.763

我实际上添加了一个可以安装的[jquery-ui 陨石包](https://atmosphere.meteor.com/package/jquery-ui)

`mrt add jquery-ui`

**请注意**，此包是 1.8.16 版，是[jquery-ui-bootstrap 包](https://atmosphere.meteor.com/package/jquery-ui-bootstrap)的依赖项，如果安装，将自动包含`jquery-ui`和`bootstrap-updated`smart 包。（所有这些都使 bootstrap 和 jquery-ui 可以很好地结合在一起）。

要安装所有内容，您可以使用： `mrt add jquery-ui-bootstrap`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-28T09:42:43.847

您需要将 jquery UI 放在`client`目录中，否则 Meteor 会在客户端和服务器上加载它并使您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T19:53:58.700

我为 Meteor 创建了一个替代 jquery-ui 包，其中还包括图像：

> [https://github.com/mizzao/meteor-jqueryui](https://github.com/mizzao/meteor-jqueryui)

使用`mrt add jqueryui`（注意没有破折号）安装它。我知道，由于事情没有得到维护，这个 Meteor 包的扩散很糟糕。但是当 Meteor 发布其官方包装系统时，这一切应该会很快好转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T18:41:09.893

这个问题越来越胡须......这是新的正确方法：

> 流星添加mizzao：jquery-ui

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-18T13:02:57.500

我在这里发表了一篇关于如何正确执行此操作的帖子

[https://dontbeanocoiner.com/blog/dkuhKsg7fac67nnfP](https://dontbeanocoiner.com/blog/dkuhKsg7fac67nnfP)

您必须安装包 jquery-ui-dist 并导入为：

```
import 'jquery-ui-dist/jquery-ui'
import 'jquery-ui-dist/jquery-ui.css' 
```

然后将图像文件夹复制到您的 /public 文件夹。

# c++ - 计算两个向量之间的方位角，然后将其与通过的角度进行比较

> ID：14042698
> 
> 赞同：0
> 
> 时间：2012-12-26T15:37:59.103
> 
> 标签：c++, math, angle

我试图从另一个向量中找到最接近所提供角度的集合中的 2D 向量。

因此，如果我有`v(10, 10)`并且我想找到沿 90 度角的最接近的其他矢量`v(20, 10)`，例如，它应该找到 。我写了一个我认为返回两个向量之间正确方位的方法。

```
float getBearing(
    const sf::Vector2f& a, const sf::Vector2f& b)
{
    float degs = atan2f(b.y - a.y, b.x - a.x) * (180 / M_PI);
    return (degs > 0.0f ? degs : (360.0f + degs)) + 90.0f;
} 
```

这似乎可以正常工作，尽管如果我将一个放在另一个之上，它会返回 180，这很好，而 360，这很奇怪。如果它在它的正上方，它不应该返回 0 吗？最好的方法是检查 360 并返回 0 我猜。

我的问题是我无法计算出通过的角度（例如 90 度）和从`getBearing`. 我什至不确定退回的轴承是否在所有情况下都是正确的。

任何人都可以帮助纠正我的轴承方法中任何明显的错误，并提出一种方法来区分两个轴承吗？我一直在网上寻找，但是有很多方法可以做到，其中大部分都以其他语言显示。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:18:39.643

如果你需要的只是找到最接近某个角度的向量，你可以按照@swtdrgn方法；相反，如果您确实需要计算两个向量之间的角度差，则可以利用点积的一个简单属性：

![点积几何定义](../Images/031c7ddcb66756e4b19253320ca37f22.png)

其中 theta 是两个向量之间的角度；因此，反转公式，你得到：

![上面公式的逆](../Images/523a67dbe2eef90aa9e4318ca0977e80.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:02:38.840

我建议采用正在比较的两个向量并进行单位点积。最近的方位应该是最大的，1 是最大值（意味着向量指向相同的方向），-1 是最小值（意味着向量指向相反的方向）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:09:00.730

我现在找到了解决方案。我花了好几个小时试图解决这个问题，我终于在问 SO 几分钟后才解决这个问题，典型的。可能有更好的方法可以做到这一点，所以我仍然愿意接受其他答案的建议。

目前我仍在使用问题中的方位法，它总是返回一个 0 到 360 之间的值。然后我得到返回值和指定角度之间的差异，就像这样。

```
fabs(fmodf(getBearing(vectorA, vectorB) + 180 - angle, 360) - 180); 
```

这将返回一个正浮点数，用于测量两个向量之间方位角之间的距离（以度为单位）。[@swtdrgn 的回答](https://stackoverflow.com/a/14043006/455137)建议使用两个向量的点积，这可能比我的方位法简单得多，因为我实际上不需要角度，我只需要差异。

# android - Eclipse 不允许添加 API 级别 15 的新虚拟机

> ID：14042699
> 
> 赞同：0
> 
> 时间：2012-12-26T15:37:59.517
> 
> 标签：android, eclipse

我对android开发不熟悉，我想创建一个API级别高于10的虚拟机。但是eclipse不允许我这样做。确定按钮保持禁用状态。当我更改 API 级别 10 时，确定按钮已启用。我确定我已经正确下载了 API 17 和 ADT 插件的 ARM EABI v7a 系统映像，但我找不到是否需要为不同的 API 级别进行进一步配置。任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:41:40.453

确保您已在 Android SDK 管理器中下载API 15 的**ARM EABI v7a 系统映像**映像，以便在模拟器中运行 Android API 15。

它在[这里](https://developers.google.com/android/add-ons/google-apis/installing "这里")解释。

# php - 我如何将选择查询中的连接值保留为表？

> ID：14042700
> 
> 赞同：0
> 
> 时间：2012-12-26T15:38:03.353
> 
> 标签：php, mysql, sql, join, left-join

我有 sql 查询从多表中选择值。

我使用了 left join ，但我有一个问题。

我想左加入另一个表，但问题是这个表名是关于同一查询中列的值。

这是查询：

```
SELECT tags_assign.*,COUNT(*) AS total from tags_assign
  LEFT JOIN tags ON tags.id = tags_assign.tags_id 
  LEFT JOIN tags_assign.module module ON module.id = tags_assign.module_id 
  WHERE tags.name = 'music theory'; 
```

当我执行此查询时，出现此错误：

> SELECT 命令拒绝用户 'jason'@'62.100.08.01' 用于表 'module' database_tags_assign.sql

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:19:59.280

我的猜测是所有表都在同一个数据库中，并且查询中有一个错字：

```
SELECT tags_assign.*,COUNT(*) AS total from tags_assign
  LEFT JOIN tags ON tags.id = tags_assign.tags_id 
  LEFT JOIN tags_assign module ON module.id = tags_assign.module_id 
  WHERE tags.name = 'music theory' 
```

也就是说，而不是`tags_assign.module module`仅仅使用`tags_assign module`。我的猜测是没有 tags_assign 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:40:53.493

您通过身份验证的用户（您传递给`connect`函数的用户）无权访问`SELECT`该数据库或表。您需要进入控制面板并授权用户名来执行此操作，或者您使用了错误的用户名/密码。

# jquery - jquery中的循环列表

> ID：14042703
> 
> 赞同：2
> 
> 时间：2012-12-26T15:38:17.677
> 
> 标签：jquery, asp.net

我有一个清单：

```
public List<Sale> AllSales { get; set; } 
```

我想在 jquery 中循环它：

```
 $(document).ready(function() {

            for (var i = 0; i < <%= AllSales %>; i++) {
                 alert("test");
            }

         }); 
```

但是我没有收到任何警报或任何东西，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:40:17.383

您需要使用`Count`属性，例如

```
$(document).ready(function() {

        for (var i = 0; i < <%= AllSales.Count %>; i++) {
             alert("test");
        }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:39:41.047

使用`AllSales.Count`而不是`AllSales`限制循环。如果您想访问列表的值，那么您可能需要使用`ajax`将这些值带到 javascript。

```
$(document).ready(function() {

     for (var i = 0; i < <%= AllSales.Count %>; i++) {
             alert("test");
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:41:14.280

您可以使用 jquery 来获取下拉对象的计数：

```
var myCount = $('#myDropDown > option'); 
```

...然后在循环定义中使用这个新变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:02:45.817

考虑你的类型视图

```
@model List<Sale> 
```

尝试这个：

```
for (var i = 0; i < <%= Model.Count %>; i++) {
    // operations...
} 
```

如果它是您模型的属性，请尝试以下操作：

```
for (var i = 0; i < <%= Model.AllSales.Count %>; i++) {
   // operations...
} 
```

我还建议您更改 from `List<Sale>`to`IEnumerable<Sale>`并使用`Count()`from 方法从 获取列表的长度`System.Linq`。`IEnumerable`比更抽象`List`，您将受到保护，可以在“查看列表”范围内添加项目。

# ruby-on-rails - Rails 3.2.8 & JQuery Tokeninput：尝试通过关系为 has_many 添加新记录，而不是替换表单中的所有当前记录

> ID：14042713
> 
> 赞同：0
> 
> 时间：2012-12-26T15:39:30.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, has-many-through, jquery-tokeninput

我有一个相互关联的技能数据库，作为彼此的先决条件。在技​​能索引中，我希望能够搜索其他技能并添加 1 个或更多作为先决条件。重要的是要注意，我只希望用户能够添加先决条件，而不是删除它们，因为这是通过上下投票系统处理的。我正在使用 JQuery Tokeninput 并且实际上所有这些都可以工作，除了一件事：我无法弄清楚如何只*添加*先决条件，而不是在提交时*替换*特定技能的所有先决条件。

**型号**：

```
class Skill < ActiveRecord::Base
  attr_accessible :skill_relationship_attributes, :prereq_tokens      

  has_many :skill_relationships
  has_many :prereqs, :through => :skill_relationships
  has_many :inverse_skill_relationships, :class_name => 'SkillRelationship', :foreign_key => "prereq_id"
  has_many :inverse_prereqs, :through => :inverse_skill_relationships, :source => :skill

  attr_reader :prereq_tokens

  accepts_nested_attributes_for :skill_relationships, :allow_destroy => true

  def prereq_tokens=(ids)
    self.prereq_ids = ids.split(",")
  end
end

class SkillRelationship < ActiveRecord::Base
  attr_accessible :skill_id, :prereq_id, :skill_attributes, :prereq_attributes

  belongs_to :skill
  belongs_to :prereq, :class_name => 'Skill'
end 
```

**查询**：

```
$('#skill_prereq_tokens').tokenInput('/skills.json',
  { theme:'facebook',
    propertyToSearch:'title',
    queryParam:'search',
    preventDuplicates:'true'
  }); 
```

**查看**：

```
<%= simple_form_for skill do |f| %>
  <%= f.input :prereq_tokens %>
  <%= f.submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:20:09.620

之前没有得到这个我觉得有点傻，但我通过改变我的技能模型中的 prereq_tokens 变成 prereq_ids 的方式解决了我的问题。

我只是改变了这个：

```
def prereq_tokens=(ids)
  self.prereq_ids = ids.split(",")
end 
```

对此：

```
def prereq_tokens=(ids)
  self.prereq_ids += ids.split(",")
end 
```

就是这样。等号之前的那个小加号。我希望这可以帮助其他编码时间过长而没有休息的人！

# php - 在验证时保留表单值

> ID：14042715
> 
> 赞同：1
> 
> 时间：2012-12-26T15:39:37.460
> 
> 标签：php, forms, validation, reset

我想在验证后防止字段重置。我已经搜索了一些主题，但我无法在我的代码中实现它。

```
if($form_view == true) { 
echo ''; 
if($error != '') { 
    echo '<strong><font color="#FF0000">Fout:</font></strong><br />'.$error.'<br />'; 
} 

echo '<form method="POST" action="'.$filename.'" style="border:0px; margin:0px; padding:0px;"> 
Voornaam
<br /> 
<input type="text" name="voornaam" maxlength="50" id="input_contact" style="width: 200px; value="'.(isset($_POST['voornaam']) ? $_POST['voornaam'] : '').'"> 
<br />
Achteraam 
<br /> 
<input type="text" name="achternaam" maxlength="50" id="input_contact" style="width: 200px; value="'.(isset($_POST['achternaam']) ? $_POST['achternaam'] : '').'"> 
<br />
Adres 
<br /> 
<input type="text" name="adres" maxlength="50" id="input_contact" style="width: 400px; value="'.(isset($_POST['adres']) ? $_POST['adres'] : '').'"> 
<br />
Postcode <h7><i><small>(1234 AB)</small></i></h7>
<br /> 
<input type="text" name="postcode" maxlength="7" id="input_contact" style="width: 100px; value="'.(isset($_POST['postcode']) ? $_POST['postcode'] : '').'"> 
<br />
Woonplaats 
<br /> 
<input type="text" name="woonplaats" maxlength="50" id="input_contact" style="width: 200px; value="'.(isset($_POST['woonplaats']) ? $_POST['woonplaats'] : '').'"> 
<br />
Telefoonnummer <h7><i><small>(0123-456789)</small></i></h7> 
<br /> 
<input type="text" name="telefoonnummer" maxlength="11" id="input_contact" style="width: 100px; value="'.(isset($_POST['telefoonnummer']) ? $_POST['telefoonnummer'] : '').'">
<br /><br /> 
```

如果你能给我一个关于如何在一个领域实现这一点的例子。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:21:21.477

如果帖子不是在他们登陆的这个特定页面上发布的，那么 $_POST 变量将不包含该信息。

快速而肮脏的是将$_SESSION[]中提交的信息保存为数组。

提交表单时，除了做当前正在做的任何事情外，还需要将提交到会话中的信息保存在接收脚本上。

```
if ($_POST['submit']) {
// repeat or configure as desired to save submitted fields into Session
$_SESSION['form_info']['email_address'] = $_POST['email_address'];
} 
```

在表单页面本身上，您将使用以下内容

```
if (isset($_SESSION['form_info'])) {
// You'll want to most likely consider filtering these using appropriate functions.
<input type="text" name="email_address" maxlength="50" id="email_address" style="width: 200px; value="<?php if (isset($_SESSION['form_info']['email_address']) { $_SESSION['form_info']['email_address']; }  ?>">

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:01:42.960

表单操作变量 $filename 是指这个特定的 php 文件还是其他发生验证的地方？如果表单操作发生在其他地方，Moylin 的答案就是您的解决方案（使用 $_SESSION）。否则，如果可能，在此处进行验证是合理且简单的。正如你所做的那样，将 $_POST 回显到值字段应该足够了（如果你想要短代码，你甚至不需要那里的三元运算）。

```
<form method="POST" action="thisPhpFile.php" >

value ="'. @$_POST['voornaam'] .'" 
```

在验证部分（在回显表单之前），您自然要检查所有错误、必填字段等。如果一切都有效，只需将用户指向想要的位置。这些方面的东西：

```
if(isset($_POST['mySubmit'] {
    //check errors/validate
    if($valid == true) {
    Header("Location: yourLocation.php");
    }
}
else {
    //echo your form here
} 
```

# mysql - MySQL - 按天计算多个表

> ID：14042718
> 
> 赞同：2
> 
> 时间：2012-12-26T15:39:53.510
> 
> 标签：mysql, select, group-by, union

我有各种表格来跟踪系统中创建的东西、销售、客户帐户等，它们都在上面创建了时间。我可以使用以下查询每天总结其中的任何一个：

```
select date(created_time), count(*) from customers group by date(created_time) 
```

产生如下输出：

```
+--------------------+----------+
| date(created_time) | count(*) |
+--------------------+----------+
| 2012-10-12         |       15 |
| 2012-10-13         |        4 | 
```

这可以完成工作，尽管它确实跳过了没有发生任何事情的日子。

但是我想做的是一次为多个表生成相同的东西，产生类似的东西：

```
+--------------------+--------------+------------------+
| date(created_time) | count(sales) | count(customers) |
+--------------------+--------------+------------------+
| 2012-10-12         |           15 |                1 |
| 2012-10-13         |            4 |                3 | 
```

我可以为每个表单独运行查询并手动加入它们，但是跳过 0 天会使加入变得困难。

有没有办法在单个 mysql 查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:11:06.673

尝试这个：

```
SELECT created_time, SUM(customers), SUM(sales) 
FROM (SELECT DATE(created_time) created_time, COUNT(*) customers, 0 sales 
      FROM customers 
      GROUP BY created_time 
      UNION 
      SELECT DATE(created_time) created_time, 0 customers, COUNT(*) sales 
      FROM sales 
      GROUP BY created_time
     ) as A
GROUP BY created_time; 
```

# php - 无法让 preg_match 用于网络抓取

> ID：14042719
> 
> 赞同：0
> 
> 时间：2012-12-26T15:39:55.417
> 
> 标签：php, html, regex, web-scraping

我这里有一些代码，但我无法让它工作。有人可以帮助我吗？

```
$file_string = file_get_contents('URL');
$search = "<tr><th> <a href=''>Data_name</a></th><td>(.*)</td></tr>";
preg_match($search, $file_string, $title);
$title_out = $title[1];
echo $title_out; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:20:59.777

看看@Touki 说了什么 - 但这可能会帮助您解决将来可能遇到的任何正则表达式问题：

1.  您可能没有看到第一行之外的任何内容。你想使用“[多行](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)”

2.  `<tr><th> <a href=''>Data_name</a></th><td>(.*)</td></tr>`似乎看起来非常精确的字符串。确保您的空白是正确的（制表符、空格、换行符等）。您似乎还缺少一个超链接，不确定这是否是故意的。

# xml - Postgresql 9.2 xml命名空间前缀错误

> ID：14042724
> 
> 赞同：2
> 
> 时间：2012-12-26T15:40:04.873
> 
> 标签：xml, postgresql

在 PostgreSQL 9.1 上，我可以在没有任何错误的情况下执行这两个查询，结果正确：

```
SELECT xpath('/a', '<a s:dd="11"><c>test</c></a>')
SELECT xpath('/a', '<a s:dd="11"><c>test</c></a>',ARRAY[ARRAY['s', 'http://example.com']]) 
```

在 PostgreSQL 9.2 上，相同的查询会引发错误：

```
ERROR:  could not parse XML document
DETAIL:  line 1: Namespace prefix s for dd on a is not defined 
```

只有这个查询可以正常工作：

```
SELECT xpath('/a', '<a xmlns:s="ddd" s:dd="11"><c>test</c></a>') 
```

我如何解析 XML 文件，修改 XML 代码？

当我想对 xml 元素进行 xpath 查询时，问题就开始了，从以前的查询中得到。

例如xml文档：

```
 <some xmlns:my="somens">
      <a>
          <b my:param="11" />
      </a>
 </some> 
```

我想做这样的事情：

```
 elem = xpath('/a',doc);
 elem2= xpath('//b',elem[0]); 
```

第二行抛出错误，因为未知前缀 my. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:11:33.040

除了 PostgreSQL 破坏功能之外，我看不到您遇到的问题。在第一个文件中

这是严格的 XML 解析器的预期行为。PostgreSQL 改变行为的事实很糟糕，但我想我们只需要处理一些事情。

这个

```
SELECT xpath('/a', '<a s:dd="11"><c>test</c></a>') 
```

失败，因为`s`名称空间未在 XML 文档中声明。这有效：

```
# SELECT xpath('/a', '<a xmlns:s="http://example.com" s:dd="11"><c>..</c></a>');
                      xpath                       
--------------------------------------------------
 {"<a xmlns:s=\"http://example.com\" s:dd=\"11\">+
   <c>..</c>                                   +
 </a>"}
(1 row) 
```

你在这里做什么：

```
SELECT xpath('/a', '<a xmlns:s="http://example.com" s:dd="11"><c>..</c></a>',
    ARRAY[ARRAY['s', 'http://example.com']]); 
```

是将`s`命名空间绑定到`http://example.com`使您能够在该命名空间中运行 xpath 表达式。观察：

这是原始查询，但`a`标签在`http://example.com`命名空间中的位置。当您查询默认命名空间中的元素时，您的查询 ( `/a`) 不匹配任何文档：`a`

```
# SELECT xpath('/a', '<s:a xmlns:s="http://example.com" s:dd="11"><c>test</c></s:a>');
 xpath 
-------
 {}
(1 row) 
```

然而，这会选择根元素：

```
# SELECT xpath('/x:a', '<s:a xmlns:s="http://example.com" s:dd="11"><c>..</c></s:a>',
    ARRAY[ARRAY['x', 'http://example.com']]);
                       xpath                        
----------------------------------------------------
 {"<s:a xmlns:s=\"http://example.com\" s:dd=\"11\">+
   <c>test</c>                                     +
 </s:a>"}
(1 row) 
```

注意`s`和如何`x`绑定到同一个命名空间`http://example.com`。使用不同的命名空间绑定是令人困惑的，但我只是想向您展示它是如何工作的。

# ruby-on-rails - 从不同的控制器方法访问 POST 参数

> ID：14042728
> 
> 赞同：0
> 
> 时间：2012-12-26T15:40:16.850
> 
> 标签：ruby-on-rails, ruby

我继承了一个 Rails 2.2.2 项目，该项目有一个没有服务器端表单验证的表单，所以我正在尝试添加它。

有没有办法将 POST 变量从下面的 submit_request 方法传递回注册方法（也在下面）？

我要做的就是用输入的内容重新填充表单，以及表单验证错误消息：

```
class LoginController < ApplicationController

 ## The controller that displays & processes the form

 # Form view
 def signup
   @hide_logout = "YES"
 end

 #Form validator/processor
 def submit_request
   @hide_logout = "YES"
   @name = (params[:name] ? params[:name] : "")
   @email = (params[:email] ? params[:email] : "")
   ...
   ## Validate posted values here

   ## Build error message, if needed
    if(error_str !="")
     flash[:warning] = error_str
     redirect_to :controller => "login/signup" and return
    end

  end
end 
```

然后，在表单视图中获取 POSTED 值并填充表单：

```
 <%= text_field_tag("name", (@name !=nil ? @name.to_s : nil), :size => 40) %><br><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:16:26.863

我猜你只是想显示注册页面，所以这样做：

```
def submit_request
  @hide_logout = "YES" #why don't you use boolean here?
  @name  = params[:name]  || ""
  @email = params[:email] || ""
  ...
  ## Validate posted values here

  ## Build error message, if needed
  unless error_str.blank?
   flash[:warning] = error_str
   render :signup and return
  end
end 
```

奖励：我更正了一些代码语法以使其更轻。

# ruby-on-rails - Rspec与标题不匹配

> ID：14042731
> 
> 赞同：1
> 
> 时间：2012-12-26T15:40:28.913
> 
> 标签：ruby-on-rails, rspec, capybara

我有以下规格

```
describe "user enters 150 into time" do
 before do
   fill_in "workout[total_time]", with: "150"
   click_button "Update Workout"
 end
  it "should be on profile page" do
    save_and_open_page
    page.should have_selector("h1", text: "Profile")
    page.should have_selector("title", text: "Profile")
  end
end 
```

它失败并显示以下消息：

```
Capybara::ExpectationNotMet: expected to find css "title" with text "Profile" but there were no matches. Also found "", which matched the selector but not all filters. 
```

源代码（来自`save_and_open_page`）包含以下`head`部分：

```
<head>
 <meta content="width=device-width, initial-scale=1.0" name="viewport">
 <title>Profile
 </title>
 <meta content="Composer Delete" name="description">
 <link href="/assets/application.css" media="all" rel="stylesheet" type="text/css">
 <script src="/assets/application.js" type="text/javascript"></script>
</head> 
```

这是视图：

```
- content_for :title do
  Profile
%h1 Profile
%table.table.table-striped
  %thead
    %tr
      %th Name
  %tbody
  - current_user.workouts.each do |workout|
    %tr
      %td= link_to workout.name, workout
      %td= link_to "Edit", edit_profile_workout_url(workout)
      %td= link_to "Remove", profile_workout_url(workout), method: :delete, confirm: "Are you sure?"
= link_to "Create New Workout", new_profile_workout_url 
```

并且`content_for`来自`layouts/application.html.haml`：

```
%title= content_for?(:title) ? yield(:title) : "Composer Delete" 
```

页面标题显示为“个人资料”。

任何想法为什么这个规范失败？

导轨 3.2.3

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:17:38.410

这是 Capybara 2.0 错误（或功能:)。尝试使用以前的版本（1.1.2 对我来说很好）。

[https://github.com/jnicklas/capybara/issues/844](https://github.com/jnicklas/capybara/issues/844)

使用 has_title 拉取请求？匹配器：

[https://github.com/jnicklas/capybara/issues/844](https://github.com/jnicklas/capybara/issues/844)

# c++ - WSASend 后处理 LPWSAOVERLAPPED

> ID：14042734
> 
> 赞同：0
> 
> 时间：2012-12-26T15:40:33.453
> 
> 标签：c++, winapi, memory, c++-cli, winsock

我目前正在用托管 C++ 编写一个 winsock 服务器端套接字。创建 LPWSAOVERLAPPED 对象并将其传递给 WSASend 函数后，我看不到在操作完成非阻塞时将其删除的位置（WSASend 返回 SOCKET_ERROR 并且 WSAGetLastError() 返回 WSA_IO_PENDING）。我当前的解决方案是创建一个 System::Threading::WaitHandle，获取指向等待句柄的不安全指针并将其传递给 LPWSAOVERLAPPED 对象下的 hEvent。但是，这会导致不必要的对象创建，因为我并不真正关心发送操作何时完成。另一方面，我需要一个 LPWSAOVERLAPPED 对象以使操作完全无阻塞。有没有人有更好的解决方案来解决这个问题？这是我当前的代码：

```
void Connectivity::ConnectionInformation::SendData(unsigned char data[], const int length)
{
    if (isClosed || sendError)
        return;

    Monitor::Enter(this->sendSyncRoot);
    try
    {
        LPWSAOVERLAPPED overlapped = OverlappedObjectPool::GetOverlapped();
        WaitHandle ^ handle = gcnew ManualResetEvent(false);
        IntPtr handlePointer = handle->SafeWaitHandle->DangerousGetHandle();

        sendInfo->buf = (char*)data;
        sendInfo->len = length;

        overlapped->Internal = 0;
        overlapped->InternalHigh = 0;
        overlapped->Offset = 0;
        overlapped->OffsetHigh = 0;
        overlapped->Pointer = 0;
        overlapped->hEvent = (void*)handlePointer;                      //Set pointer

        if (WSASend(connection, sendInfo, 1, NULL, 0, overlapped, NULL) == SOCKET_ERROR)
        {
            if (WSAGetLastError() == WSA_IO_PENDING)
            {
                ThreadPool::UnsafeRegisterWaitForSingleObject(handle, sentCallback, (IntPtr)((void*)overlapped), -1, true);
            }
            else
            {
                this->sendError = true;
                //The send error bool makes sure that the close function doesn't get called
                //during packet processing which could lead to a lot of null reffernce exceptions.
                OverlappedObjectPool::GiveObject(overlapped);
            }
        }
        else
        {
            handle->Close();
            sentData((IntPtr)((void*)overlapped), false);
        }
    }
    finally
    {
        Monitor::Exit(this->sendSyncRoot);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:46:35.123

对于异步 I/O，通过调用完成例程或将 IOCP 完成消息排队到 IOCP 完成队列来通知完成。在这两种情况下，应该注意 OVL 结构的生命周期至少应该是整个异步操作的生命周期，但如果方便的话可以更长:)

在完成例程的情况下，OVL 中未使用的 hEvent 参数可用于传输指向“IOrequest”类实例的指针，该类实例包含数据缓冲区、WSABUF 数组和 OVL 结构作为成员（当然是指向已为其发出 I/O 的套接字对象的指针）。OVL 指针作为参数提供给完成例程，因此可以检索 hEvent 并将其转换为类类型，因此检索完整的类实例 - OVL、数据缓冲区等。当数据已被处理时，（或立即在WSASend 的完成例程），并且这个 IOrequest 最终被销毁（或重新池化），OVL 将随之而来。这听起来有点乱伦，但效果很好，不需要任何讨厌的宏或其他技巧。

类似的方法可以用于完整的 IOCP，或者作为 lpCompletionKey 'spare' 参数传递的 OVL。

哦 - 你确实关心操作是否完成 - 你至少需要检查错误。

# java - 如何在 Java 中查找给定服务器的 DNS MX 记录？

> ID：14042742
> 
> 赞同：5
> 
> 时间：2012-12-26T15:41:13.967
> 
> 标签：java, dns, smtp, mx-record

有人知道如何使用标准库在 java 中获取 MX 地址（例如来自 gmail.com）吗？还是我需要下载外部的？

如果它有帮助（如果它为此提供了一些东西），我正在使用 netbeans。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T15:46:21.383

我还在 java 中为此搜索标准库。不成功。

然后我使用了[dnsjava](http://www.xbill.org/dnsjava/)。

```
private Record[] lookupMxRecords(final String domainPart) throw TextParseException
{
    final Lookup dnsLookup = new Lookup(domainPart, Type.MX);
    return dnsLookup.run();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-26T06:44:16.117

主.java

```
import java.util.Enumeration;
import java.util.Hashtable;

import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;

public class Main {
    public static void main(String args[]) throws Exception {
        Hashtable<String, String> env = new Hashtable<String, String>();
        env.put("java.naming.factory.initial", "com.sun.jndi.dns.DnsContextFactory");
        env.put("java.naming.provider.url", "dns://8.8.8.8/");
        DirContext ctx = new InitialDirContext(env);
        Attributes attrsl = ctx.getAttributes("google.com", new String[] {"MX"});
        Attribute attr = attrsl.get("MX");
        if (attr != null) {
            System.out.println("MX records:");
            for (Enumeration vals = attr.getAll(); vals.hasMoreElements();) {
                System.out.println(vals.nextElement());
            }
        }
    }
} 
```

问题

```
$ javac Main.java && java Main
MX records:
20 alt1.aspmx.l.google.com.
50 alt4.aspmx.l.google.com.
10 aspmx.l.google.com.
40 alt3.aspmx.l.google.com.
30 alt2.aspmx.l.google.com. 
```

# php - 按索引预设对数组进行排序

> ID：14042744
> 
> 赞同：1
> 
> 时间：2012-12-26T15:41:19.440
> 
> 标签：php, arrays

我有这个数组

```
$immagini = array('1.jpg','2.jpg','3.jpg','4.jpg'); 
```

如果我让 var_dump($immagini) 返回这个

```
 array(4) { 
[0]=> string(5) "1.jpg" 
[1]=> string(5) "2.jpg" 
[2]=> string(5) "3.jpg" 
[3]=> string(5) "4.jpg" 
} 
```

现在我如何以另一种方式订购它们，我喜欢从索引 [2] 开始......所以我想要这个结果

```
array(4) {
 [2]=> string(5) "3.jpg" 
 [3]=> string(5) "4.jpg" 
 [0]=> string(5) "1.jpg" 
 [1]=> string(5) "2.jpg" 
} 
```

我想从索引中返回完整列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:45:40.857

您不能使用 var_dump 来完成此操作。您需要自己的循环从自定义起始索引进行打印。从起始索引开始，在每次迭代时将循环迭代器递增 1，直到循环长度为数组时间。如果要访问数组元素，请使用`loopIterator mod length of array`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:53:45.710

您可以使用将所有索引 < 2 移动到列表末尾的比较函数对它们进行排序。例如，这将是这样一个比较：

```
function cmp($a,$b) {
    $a = ($a < 2) ? $a + 1000 : $a;
    $b = ($b < 2) ? $b + 1000 : $b;
    return $a - $b;
} 
```

像这样调用：

```
$immagini = array('1.jpg','2.jpg','3.jpg','4.jpg');
uksort($immagini, 'cmp');
var_dump($immagini); 
```

给出以下输出：

```
array(4) {
  [2]=>
  string(5) "3.jpg"
  [3]=>
  string(5) "4.jpg"
  [0]=>
  string(5) "1.jpg"
  [1]=>
  string(5) "2.jpg"
} 
```

演示：http: [//ideone.com/XeAkQL](http://ideone.com/XeAkQL)

# jquery - 使用jquery修改css

> ID：14042745
> 
> 赞同：1
> 
> 时间：2012-12-26T15:41:24.853
> 
> 标签：jquery, click

如何在以下示例中使用 jquery 更改 css 属性？我需要做的是在用户单击该项目时更改“btn1”类的背景位置。我无法使用“click”功能定位“btn1”类...顺便说一句，我不是专家

```
<div class="menu">
    <ul>
        <li><a href="#" onclick="loadListaClientes(1);loadClientWeb(1);loadSlideWeb(1);return false;" class="btn1"></a>
        <li><a href="#" onclick="loadListaClientes(2);loadClientGr(1);return false;" class="btn2"></a></li>
        <li><a href="#" onclick="loadListaClientes(3);loadClientAds(1);return false;" class="btn3"></a></li>
        <li><a href="#" onclick="loadListaClientes(4);loadClientPh(1);return false;" class="btn4"></a></li>
        <li><a href="#" onclick="loadListaClientes(5);loadClientMo(1);return false;" class="btn5"></a></li>
        <li><a href="#" onclick="loadListaClientes(6);loadClientApp(1);return false;" class="btn6"></a></li>
       <li><a href="#" onclick="loadListaClientes(7);loadClientId(1);return false;" class="btn7"></a></li>
    </ul>
</div> 
```

ps：我更新了标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:44:37.103

像这样试试

```
$("a.btn1").on("click", function() {
    $(this).css('background-position', 'new_values_here');
}); 
```

此外，如果您使用的是列表，则`<ul>`最好使用它的项目`<li>`。否则它没有语义意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:39:44.653

I did some modifies to your code and now it looks like [this](http://fiddle.jshell.net/w83Pj/1/)

For making this wokring you should load jQuery in your project. I guess [this](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery) is a good start

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:22:23.427

简化 HTML：

```
<ul class="menu">
    <li><a href="#" class="btn1"></a></li>
    <li><a href="#" class="btn2"></a></li>
    <li><a href="#" class="btn3"></a></li>
    <li><a href="#" class="btn4"></a></li>
    <li><a href="#" class="btn5"></a></li>
    <li><a href="#" class="btn6"></a></li>
    <li><a href="#" class="btn7"></a></li>
</ul> 
```

使用委托添加一键式处理程序：

```
$(document).ready(function() { // wait for DOM load
    // handle click on menu
    $(".menu").on("click", "a", function(ev) { // delegate to menu div
        ev.preventDefault(); // similar to "return false"
        var button = $(this); // the "a" that was clicked
        var itemIndex = $(button.parent(), ".menu").index() + 1; // calculate element number
        loadListaClientes(itemIndex); // first function can be called using index
        // handle buttons case by case
        switch (itemIndex) {
        case 1:
            // ".btn1" handled here
            button.css('background-position', newPosition); // change background CSS
            loadClientWeb(1);
            loadSlideWeb(1)
            break;
        case 2:
            // ".btn2", etc.
            loadClientGr(1);
            break;
        case 3:
            loadClientAds(1);
            break;
        case 4:
            loadClientPh(1);
            break;
        case 5:
            loadClientMo(1);
            break;
        case 6:
            loadClientApp(1);
            break;
        case 7:
            loadClientId(1);
            break;
        default:
            // default menu action or throw error here
        }
    });
}); 
```

# php - “唯一 7 字符串” - 相关问题

> ID：14042749
> 
> 赞同：3
> 
> 时间：2012-12-26T15:41:38.317
> 
> 标签：php, string, unique

我阅读了几个与我所要求的主题相似的主题，但似乎没有一个对我很有帮助。

我有一个表单，用户可以在其中生成存储在具有唯一约束的列中的代码。代码是长度为 7 个字符的字符串。用户可以输入一个数字，程序会生成那么多代码，并且可以重复此操作，直到达到最大代码数量。

我的问题是重复值。但不是在输入新条目时数据库中已经存在的值（我成功检查了这些值），但新组（比如 10000）代码中的一些条目（可能）是相同的。所以我的代码在同一个事务中生成两个（或更多）相同的代码，并且数据库中的唯一约束抱怨它。

我想在每个条目后检查数据库，但考虑到我们谈论的是 10000 个或有时更多条目，这非常耗时。

所以现在我认为唯一的选择是首先修改生成它们的代码，因为它似乎效率低下并生成双打。

问题的很大一部分是所需的代码长度，否则我会使用纯 'uniqid()' 或类似的东西，但由于我必须将其限制为 7 个字符，我想这会使情况变得更糟。另外，我必须从代​​码中的代码中排除一些字符[标记为'problem_characters']。

这是代码，我无法正确修改它以仅生成唯一值。

```
$problem_characters = array("0", "o", "O", "I", "1", 1);

$code = md5(uniqid(rand(), true));

$extId = strtoupper(str_replace($problem_characters,rand(2,9),substr($code, 0, 7)));

//insert $extId in the database 
```

* * *

@Geo好的，我尝试了您的解决方案并且它正在工作（当然），但是后来我遇到了一个新问题-在您的“如果”的“其他”部分中，我正在执行以下操作：

```
$extId = strtoupper(str_replace($problem_characters,rand(2,9),substr($code, 0, 7)));

while(true){     

      if((!in_array($extId, $allExternalIdsHandled)) && (!in_array($extId, $newEnteredValues))){
       break;
        }else{
 $extId = strtoupper(str_replace($problem_characters,rand(2,9),substr($code, 0, 7)));   }
               }
//insert the modified value in the DB here 
```

所以，现在它进入了一个无限循环，它没有用'break'命令中断，即使它应该通过执行'random'调用来改变，然后输入if并中断......

我在这里看不到问题。有人可以给我一些指导吗？

编辑：它有时会挂起，有时不会。我刚刚输入了 10000 个值并通过“else”路径修改了两个条目。我使用日志观察到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:51:46.823

已经有一些[库](http://www.hashids.org/php/)为您完成了艰苦的工作，允许您选择生成字符串时要使用的“字母表”和字符串的长度。

您的“相同条目”问题称为[冲突](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)，无法避免。

**编辑**因此，类似于 Geo 的建议，我正在使用 a`PHP`创建`n`唯一条目列表。不同之处在于 SQL 插入可能会失败，所以我有 2 层迭代以确保我们填充所需的总数：

```
<?php

require('hashids.php'); // I'm using the library I suggested

$hashids = new hashids('some salt', 7); // use the default alphabet, feel free to pass the 3rd parameter with the alphabet you want to use

$generationTries = 0;

$hashesInDBCount = 0; // get from your database
$desiredHashesCount = 50; // use a parameter
$totalDesiredHashes = $hashesInDBCount + $desiredHashesCount;
do
{
    // when coming back in the loop, only generate what's still required
    $desiredHashesCount = $totalDesiredHashes - $hashesInDBCount; 
    $generatedHashesCount = 0;
    $generatedHashes = array();

    while($generatedHashesCount < $desiredHashesCount)
    {
        $hash = $hashids->encrypt($generationTries++);
        if(!in_array($hash, $generatedHashes))
        {
            array_push($generatedHashes, $hash);
            ++$generatedHashesCount;
        }
    }

    // insert $generatedHashes in your Database

    $hashesInDBCount = 50; // again, query your database as you might come through this loop more than once, 
                           // I'm hardcoding the value to have a working example
}
while($hashesInDBCount < $totalDesiredHashes);

echo "Generated " . count($generatedHashes) . " hashes in " . $generationTries . " tries\n";
var_dump($generatedHashes); 
```

这给了我一个类似的输出：

```
Generated 50 hashes in 50 tries
array(50) {
  [0]=>
  string(7) "eAcgAcx"
  [1]=>
  string(7) "Exidai8"
  [2]=>
  string(7) "ExTbqT8"
  [3]=>
  string(7) "4Acz8cB"
  [4]=>
  string(7) "LRipxir"
  [5]=>
  string(7) "zATe5Tx"
  ...
} 
```

添加随机盐每次都会给你随机值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:10:46.470

```
<?php

$problem_characters = array('0', 'o', 'O', 'I', '1', 1);
$length = 10000;
$i = 0;
$hashes = array();
while ($i < $length) {
    $code = md5(uniqid(rand(), TRUE));
    $extId = strtoupper(str_replace($problem_characters, rand(2, 9), substr($code, 0, 7)));
    if ( ! in_array($extId, $hashes)) {
        $hashes[] = $extId;
        $i++;
        // insert $extId in the database
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:23:11.853

首先 - 您使用 md5 来生成字符串代码，因为 md5 是十六进制编码的字符串，您正在严重减少可能组合的数量，生成具有 30 个可能字符的随机字符串会给您 210 亿 (10^9) 种可能性，而不是2.68 亿 (10^6) 十六进制字符

另一方面 - 你永远不能创建真正唯一的值（guid-s 是机器唯一的），生成相同值的概率会随着较短的字符串而增加。

我可以采用三种不同的方法（我假设您至少有 30 个无问题的字符），您可以创建唯一的非随机值。假设你有两个计数器生成请求计数和请求计数器。因此，如果用户 1 要求提供 100 个代码，则诸如 user_request_counter-code_counter : '00-00-00_00-00-00-01' to '00-00-01_00-00-03-00' 之类的代码肯定是唯一的（并且是实际上 7 - 每组最多 30 的两位数字可以用单个字符表示（就像十六进制对 16 个字符一样 - 你可以选择任何你喜欢的基数）这将允许你创建 30^4（810,000）个代码到 30^ 3 (27,000) 个用户。这样您就不需要使用昂贵的随机调用，也不需要担心重复代码。

我曾经使用的第二种方法是简单地用随机代码填充数据库，然后将它们分配给用户，这很有用，因为您只需要偶尔执行一次，并且可以离线完成新代码的生成（带有数据库的转储）然后推送到服务器，这样您就可以在 php 代码上的代码生成上获得出色的性能 o(1)，在数据库服务器端获得 o(1)，因为不需要更新表索引数千次，就像您将 php 生成的代码插入数据库时​​所做的那样。

如果您唯一的问题是您在 php 生成的值中得到重复项，则第三种方法是将它们放入数组中，然后检查这些值是否是新的。由于 php 数组是作为哈希表实现的，因此您将获得相当不错的性能）。

如果您选择在 PHP 中随机生成代码 - 您将始终面临两个问题 - 第一个 - 无法保证代码不会存在于数据库中，因此您将始终需要处理双键问题，第二个是因为您需要生成许多代码 - 将它们插入到 db 在 sql server 端将非常昂贵，并且由于您有更多代码 - 会显着减慢脚本

# matlab - 如何将任何十进制数转换为matlab中的下一个整数？

> ID：14042754
> 
> 赞同：1
> 
> 时间：2012-12-26T15:41:57.043
> 
> 标签：matlab

我知道有两个函数'fix'和'round'可以将十进制转换为整数。但是，我找不到将任何十进制数四舍五入到下一个整数的方法。任何人都知道如何做到这一点。

例如，我想将 1.1 转换为 2、3.01 转换为 4、4.009 转换为 5 或任何十进制数。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:43:58.863

这是天花板函数，matlab [`ceil`](http://www.mathworks.com/help/matlab/ref/ceil.html)：

```
>> ceil(1.1)

ans =

     2

>> ceil(3.01)

ans =

     4

>> ceil(4.009)

ans =

     5 
```

# ios - CoreAnimation 混淆：CATransaction vs CATransition vs CAAnimationGroup？

> ID：14042755
> 
> 赞同：5
> 
> 时间：2012-12-26T15:41:58.260
> 
> 标签：ios, macos, core-animation, catransition, catransaction

我已经多次分开使用这三个类。

例如，当我想将多个动画（即：CABasicAnimations 等）组合在一起同时发生时，我首先想到的是`CAAnimationGroup`，当我想看到一个图层从一种状态变为另一种状态（即：出现、滑入等）时，我想到了`CATransition`. 但同时`CATransaction`意味着批量执行动画（WTH？）

`CATransaction``CATransition`似乎是不同的野兽，但我通常在`CATransitions`里面看到`CATransactions`？我已经多次阅读这些文档，但从未将它们并排比较以及它们应该用于何时/什么。

如果有人能指出他们的关系/用途是什么，那就太好了:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T15:55:01.653

`CATransaction`确实是不同的`CATransition`野兽......

您的理解中缺少的部分似乎是`CATransaction`; 一旦你明白了，那么也许所有的部分都会自行到位。

`CATransaction`每次播放 Core 动画时都会创建A。

> 对层的每一次修改都是事务的一部分。CATransaction 是核心动画类，负责将多个层树修改批处理为渲染树的原子更新。

（[来源](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html)）

发生的情况是，如果您没有明确指定一个，则会`CATransaction`为您创建一个隐式。

您可以创建显式事务（通过`[CATransaction begin/commit]`）来调整动画的多个参数，例如是否应使用默认动画、它们的时长等。这些都在`CATransaction`参考中进行了描述。

> 在同时设置多个图层的属性（例如，在布置多个图层时）、临时禁用图层动作或临时更改生成的隐含动画的持续时间时，显式事务特别有用。

因此，恢复一切，CATransaction 是运行核心动画动画的“大伞”，无论它是一个`CABasicAnimation`、一个`CATransition`或组动画。它允许您设置一些影响动画/过渡发生方式的一般参数，如果您不提供，则使用默认（隐式）参数。

希望这可以帮助。

# matlab - 如何在 MATLAB GUI 上自由绘制和擦除？

> ID：14042758
> 
> 赞同：2
> 
> 时间：2012-12-26T15:42:09.953
> 
> 标签：matlab, user-interface, draw, erase

我想创建一个 gui，它可以作为画布使用鼠标和擦除选项来自由绘制线条......

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:51:57.427

最简单的解决方案是看看其他人是如何实现的。例如，在[File Exchange 上搜索手绘](http://www.mathworks.com/matlabcentral/fileexchange/?search_submit=fileexchange&query=freehand&term=freehand)就会出现[这种手绘功能](http://www.mathworks.com/matlabcentral/fileexchange/7347-freehanddraw)。

作为一个基本概念，您需要定期捕获鼠标位置，或者评估鼠标移动的回调。

# ruby-on-rails - 如果没有默认协议，如何在 URL 前添加默认协议？

> ID：14042759
> 
> 赞同：2
> 
> 时间：2012-12-26T15:42:13.980
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3, url

我正在使用 Ruby on Rails 3.2.9。我的模型类有一个`link`属性，在将相关对象存储到数据库之前，我想在该值（URL、字符串类型）不存在的情况下使用默认协议*（*示例协议可以是`http://`、`https://`、`ftp://`和`ftps://`依此类推；默认值为`http://`)。为了做到这一点，我正在考虑使用一些正则表达式实现 Rails 回调，也许可以使用[URI Ruby library](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)，但我在如何实现它方面遇到了麻烦。

任何想法？我怎么能/应该做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:52:56.397

仅使用简单的正则表达式替换怎么样？

```
class String
  def ensure_protocol
    sub(%r[\A(?!http://)(?!https://)(?!ftp://)(?!ftps://)], "http://")
  end
end

"http://foo".ensure_protocol # => "http://foo"
"https://foo".ensure_protocol # => "https://foo"
"ftp://foo".ensure_protocol # => "ftp://foo"
"ftps://foo".ensure_protocol # => "ftps://foo"
"foo".ensure_protocol # => "http://foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:03:16.037

before_validation 回调可能是您想要开始的地方

```
class YourModel < ActiveRecord::Base

  PROTOCOLS = ["http://", "https://", "ftp://", "ftps://"]
  validates_format_of :website, :with => URI::regexp(%w(http https ftp ftps))
  before_validation :ensure_link_protocol

  def ensure_link_protocol
    valid_protocols = ["http://", "https://", "ftp://", "ftps://"]
    return if link.blank?
    self.link = "http://#{link}" unless PROTOCOLS.any?{|p| link.start_with? p}
  end

end 
```

# geocoding - 无法为 QGIS 中的不同图层获得相同的 CRS

> ID：14042761
> 
> 赞同：0
> 
> 时间：2012-12-26T15:42:18.990
> 
> 标签：geocoding, shapefile, coordinate-systems, qgis

我刚刚开始摆弄QGIS。现在，我有一个包含瑞典地图的 .shp 文件。我想通过 Delimited Text File 插件添加一个新的点图层来向该地图添加一个矢量点。我正在导入的 CSV 文件包含以下数据：

```
id,lat,long
1,62.30000,14.10000 
```

点出现在屏幕上，但离国家地图很远。我认为这是因为图层设置为不同的 CRS，但是在右键单击每个图层并将 CRS 更改为 WGS 84 后，没有任何变化。我在这里做错了什么？

编辑：只需删除点图层，将 CSV 文件中的坐标更改为 SWEREF99 TM，然后使用相同的插件重新导入图层即可。但是我仍然想知道导入后是否无法更改CRS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:23:32.877

您始终可以通过覆盖图层属性 - 常规选项卡中的设置来更改图层的 CRS。请注意，更改此设置时不会重新投影要素。你只是告诉 QGIS 以不同的方式解释坐标。

# java - JUnit：通过 eclipse 和 maven 测试运行。速度差别很大，为什么？

> ID：14042764
> 
> 赞同：6
> 
> 时间：2012-12-26T15:42:39.190
> 
> 标签：java, eclipse, testing, maven-2, junit4

我有一个 JUnit 类，这个类包含几个测试方法。我正在尝试通过`Eclipse IDE`菜单*Run As -> Junit* Test 运行这个测试类。

执行速度：

1次。**30 秒。**

2 次：**29 秒。**

3次：**23秒。**

在此之后，我尝试`maven run`在终端中执行测试类。在这种情况下执行速度：

1次：**1分钟。10 秒。**

2次：**59秒。**

3次：**56秒。**

所以，正如你所看到的，这两种情况之间有很大的不同。但是我们如何解释这个巨大的差异呢？

PS 我正在使用最新版本的 Eclipse IDE 和 maven。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:42:16.760

Maven 有一个构建生命周期，它涉及以下步骤：

1.  证实
2.  编译
3.  测试
4.  包裹
5.  集成测试
6.  核实
7.  安装
8.  部署

Eclipse 只是编译并运行测试。
我想这可能是原因。

# java - 在 Java 中存储 PostgreSQL/PostGIS“几何（多多边形）”数据类型

> ID：14042767
> 
> 赞同：1
> 
> 时间：2012-12-26T15:42:46.630
> 
> 标签：java, jakarta-ee, postgis, mapserver, postgresql-9.2

我需要将 PostgreSQL 的几何（MultiPolygon）类型变量存储到 java 变量中，这是因为我试图将几何列添加到非空间表中以使用 mapserver 查询地图

我试图将它存储在一个导致错误的字符串中。

请建议我使用 Java 中的数据类型，以便我可以将值存储在空间数据库的几何列中。

这是我的代码片段：

```
 String query="select geom from apmandal where mandalname='"+mname+"'";
    ResultSet rs=st.executeQuery(query);
    rs.next();
    Geometry geomval=rs.getXXX(); 
```

请建议一个 getXXX() 方法，以便我可以检索几何列值

提前致谢

**从评论编辑：**

```
String query = "select geom from apmandal order by area desc;"; 
ResultSet rs = st0.executeQuery(query); 
rs.next(); 
String geomval = rs.getString(1).toString(); 
String newquery = "insert into test(mname, geom) values('ZAHEERABAD','"+geomval+"');"; 
int tel = st1.executeUpdate(newquery); 
System.out.println("inserted "+tel+" record"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:02:55.430

您可以简单地转换为`text`表示：

```
String query="select geom**::text** from apmandal where mandalname='"+mname+"'";
```

然后你可以像对待任何其他文本一样对待它。
我在这里引用[PostGIS 手册](http://postgis.net/docs/manual-2.0/reference.html#PostGIS_Types)：

> 至少从 PostgreSQL 8.3 开始 - 一切都可以 CAST 到文本（大概是因为神奇的未知类型），所以没有定义的 CASTS 需要为您提供将对象转换为文本。

# linux - DCE RPC bink_nak 原因协议版本不支持

> ID：14042774
> 
> 赞同：2
> 
> 时间：2012-12-26T15:42:59.317
> 
> 标签：linux, windows, rpc, dce

我有一个托管在 Linux 5.5 上的应用程序，它使用 SMB 和 RPC 调用 Windows 服务器从注册表中获取一些数据。

问题是，当我查看wireshark 跟踪时，我看到来自Windows 服务器的响应，指出不支持bind_nak 原因协议版本。我看到 Linux 服务器正在使用主要版本 5 和次要版本 0。尝试使用 Windows 2008 服务器。看到同样的问题。因此，我无法获得我想要的数据。

知道如何解码问题吗？我在 windows/linux 服务器上寻找什么。

注意： - 使用 SMB 协议的初始往返是成功的。也就是说，我可以在wireshark跟踪中看到有协议协商，然后我可以看到诸如会话设置和x请求、会话设置和x响应、NT创建和x请求、NT创建和x响应等命令。

# mysql - MYSQL - 表大小似乎不正常

> ID：14042783
> 
> 赞同：3
> 
> 时间：2012-12-26T15:43:49.093
> 
> 标签：mysql, indexing, size

我有一个具有这样架构的表：

```
id int(10) PK,
fk_id int(10) FK,
c3 int(10),
c4 timestamp,
c5 tinyint(3),
c6 varchar(50) latin1_swedish_ci,
c7 tinyint(3),
c8 tinyint(3),
c9 tinyint(1) 
```

现在这个表有 10,000 条记录，它的大小是 1.8 MB，根据 MYSQL 所说，索引大小为 0.3 MB，数据大小为 1.5 MB。

但是归档 c6 的所有记录几乎都是 10 或 15 个字符长度的字符串，如果您计算最大传入大小，它将是这样的：

(4+4+4+4+1+15+1+1+1)*10000 = 350 KB

但数据大小为 1500 KB。现在我很困惑为什么这张桌子的大小会高速增长，不知道这种差异的原因。MYSQL 是否可能显示错误的数据大小？或者索引大小和数据大小的错误组合？或任何其他原因？

我真的很困惑，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:03:24.747

我建议的第一件事是优化表格

```
OPTIMIZE TABLE mytable 
```

我希望 InnoDB 会有一些开销，请参见此处：

[http://dev.mysql.com/doc/refman/5.5/en/innodb-physical-record.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-physical-record.html)

但没有你说的那么多。可能是存在碎片和未使用的空间，特别是如果您经常对该表进行插入和更新。优化表应该回收该空间。

# opengl - 我的 bmp imporer 怎么了？

> ID：14042784
> 
> 赞同：0
> 
> 时间：2012-12-26T15:43:55.820
> 
> 标签：opengl, textures, bmp

所以我有点制作了一个小的bmp导入器，以便能够在opengl中使用纹理但是在我加载图片和东西而不是纹理之后它只是将颜色棕色放在......我也尝试过超过1质地，我得到了同样的结果。这是一些代码：

```
int LoadBitmap ( char *filename) {
  BITMAPFILEHEADER fileheader;
  BITMAPINFOHEADER fileinfo;
  RGBTRIPLE rgb;
  unsigned char *texture;
  FILE *f=fopen(filename,"r");
  num_texture++;
  fread(&fileheader,sizeof(fileheader),1,f);
  fread(&fileinfo,sizeof(fileinfo),1,f);
  cout<<fileinfo.biWidth<<" "<<fileinfo.biHeight<<endl;

  texture=new unsigned char[fileinfo.biWidth*fileinfo.biHeight*4];
  int j=0;
  for(int i=0;i<fileinfo.biWidth*fileinfo.biHeight;i++)
  {
    fread(&rgb,sizeof(rgb),1,f);

    texture[j]=rgb.rgbtRed;
    texture[j+1]=rgb.rgbtGreen;
    texture[j+2]=rgb.rgbtBlue;
    texture[j+3]=255;
    j+=4;
  }
  fclose(f);

  glBindTexture(GL_TEXTURE_2D,num_texture);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);

  glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

  glTexImage2D(GL_TEXTURE_2D,0,4,fileinfo.biWidth,fileinfo.biHeight,0,GL_RGBA,GL_UNSIGNED_BYTE,texture);
  gluBuild2DMipmaps(GL_TEXTURE_2D,4,fileinfo.biWidth,fileinfo.biHeight,GL_RGBA,GL_UNSIGNED_BYTE,texture);

  delete[] texture;
  return num_texture;
  return 0;
} 
```

这是绘图部分：

```
glEnable(GL_TEXTURE_2D);
int a=LoadBitmap("texture1.bmp");
glBindTexture(GL_TEXTURE_2D,a);
glBegin(GL_QUADS);
  glTexCoord2f(0,0);
  glVertex3f(-10,-10,0 );
  glTexCoord2f(0,1);
  glVertex3f(-10,10,0);
  glTexCoord2f(1,1);
  glVertex3f(10,10,0 );
  glTexCoord2f(1,0);
  glVertex3f(10,-10,0 );
 glEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:58:41.977

```
FILE *f=fopen(filename,"r"); 
```

您可能想尝试以二进制模式打开文件，它可能只是检测文件结尾，或者以其他方式破坏输入。

```
FILE *f=fopen(filename,"rb"); 
```

您还对文件的实际格式做出了一些假设，但假设您自己生成了 BMP，我想这可能没问题。

# sql - oracle销售总额查询

> ID：14042787
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:08.970
> 
> 标签：sql, oracle, sum

在我目前工作的一个项目中，我们需要获得每月、每季度和每年的客户销售额。我尝试了一个如下所示的查询，该查询今天得到了正确的结果。但我也需要去年的销售结果。（去年月销售额是那个月的总和）

我真的需要在这里快速修复，提前感谢每条评论

```
SELECT    
CUSTOMER,        
PRODUCT,
EXTRACT(MONTH FROM DAY) MONTH,
EXTRACT(YEAR FROM DAY) YEAR,
SUM(
    CASE
        WHEN DAY >= TRUNC(sysdate,'MM')
        THEN DAILY_SALE
        ELSE 0
    END) AS MONTH_SALE,
SUM(
    CASE
        WHEN DAY >= add_months(TRUNC(sysdate,'MM'),-3)
        AND DAY < TRUNC(sysdate,'MM')
        THEN DAILY_SALE
        ELSE 0
    END) AS THREE_MONTHL_SALE,
SUM(
    CASE
        WHEN DAY >= add_months(TRUNC(sysdate,'MM'),-6)
        AND DAY < TRUNC(sysdate,'MM')
        THEN DAILY_SALE
        ELSE 0
    END) AS SIX_MONTHL_SALE,
SUM(
    CASE
        WHEN DAY >= add_months(TRUNC(sysdate,'MM'),-12)
        AND DAY < TRUNC(sysdate,'MM')
        THEN DAILY_SALE
        ELSE 0
    END) AS YEAR_SALE
FROM
SALES_TABLE
GROUP BY
CUSTOMER,
PRODUCT,
EXTRACT(MONTH FROM DAY),
EXTRACT(YEAR FROM DAY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:29:10.020

这可能有助于满足您的需求……它为您提供每个月和每个季度以及全年、每年的总计。如果你想要一个特定的年份，我建议添加“where EXTRACT(YEAR FROM DAY) = 2012”或类似的子句。

我相信这是您要求的，但这与您提供的样本不同。您提供的样本提供了过去 3、6、9 和 12 个月的销售额，这与季度年和月不同。不过，如果需要，您可以轻松混合和匹配。

```
SELECT    
CUSTOMER,        
PRODUCT,
EXTRACT(YEAR FROM DAY) YEAR,
SUM(DAILY_SALE) as YEAR_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '01' THEN DAILY_SALE ELSE 0 END) AS MONTH_01_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '02' THEN DAILY_SALE ELSE 0 END) AS MONTH_02_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '03' THEN DAILY_SALE ELSE 0 END) AS MONTH_03_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '04' THEN DAILY_SALE ELSE 0 END) AS MONTH_04_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '05' THEN DAILY_SALE ELSE 0 END) AS MONTH_05_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '06' THEN DAILY_SALE ELSE 0 END) AS MONTH_06_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '07' THEN DAILY_SALE ELSE 0 END) AS MONTH_07_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '08' THEN DAILY_SALE ELSE 0 END) AS MONTH_08_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '09' THEN DAILY_SALE ELSE 0 END) AS MONTH_09_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '10' THEN DAILY_SALE ELSE 0 END) AS MONTH_10_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '11' THEN DAILY_SALE ELSE 0 END) AS MONTH_11_SALES,
SUM(CASE WHEN TO_CHAR(DAY, 'MM') = '12' THEN DAILY_SALE ELSE 0 END) AS MONTH_12_SALES,
SUM(
    CASE
        WHEN TO_CHAR(DAY, 'MM') IN ('10', '11', '12')
        THEN DAILY_SALE
        ELSE 0
    END) AS Q4_SALES,
SUM(
    CASE
        WHEN TO_CHAR(DAY, 'MM') IN ('07', '08', '09')
        THEN DAILY_SALE
        ELSE 0
    END) AS Q3_SALES,
SUM(
    CASE
        WHEN TO_CHAR(DAY, 'MM') IN ('04', '05', '06')
        THEN DAILY_SALE
        ELSE 0
    END) AS Q2_SALES,
SUM(
    CASE
        WHEN TO_CHAR(DAY, 'MM') IN ('01', '02', '03')
        THEN DAILY_SALE
        ELSE 0
    END) AS Q1_SALES,
FROM
SALES_TABLE
GROUP BY
CUSTOMER,
PRODUCT,
EXTRACT(YEAR FROM DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:53:53.727

这可能不是您所需要的，但它可能会有所帮助：

```
select a.Product_Name, 
d.Company_Name, 
to_char(Order_Date, 'YYYY') as OrderYear,
sum(case to_char(c.Order_Date, 'Q') when '1' 
    then b.Unit_Price*b.Quantity*(1-b.Discount) else 0 end) "Qtr 1",
sum(case to_char(c.Order_Date, 'Q') when '2' 
    then b.Unit_Price*b.Quantity*(1-b.Discount) else 0 end) "Qtr 2",
sum(case to_char(c.Order_Date, 'Q') when '3' 
    then b.Unit_Price*b.Quantity*(1-b.Discount) else 0 end) "Qtr 3",
sum(case to_char(c.Order_Date, 'Q') when '4' 
    then b.Unit_Price*b.Quantity*(1-b.Discount) else 0 end) "Qtr 4" 
from Products a 
.... 
```

此外，请在此处查找您可能需要的良好示例：http: [//docs.oracle.com/html/B13915_04/appendix.htm#BEHJBJDE](http://docs.oracle.com/html/B13915_04/appendix.htm#BEHJBJDE)

# php - CakePHP 中表格和分页器的 COUNT

> ID：14042788
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:09.647
> 
> 标签：php, count, pagination, cakephp-2.0

我有一个这样的模型`Catalog`：

```
class Catalog extends AppModel {
  public $hasMany = array(
    'Entries' => array(
      'className' => 'Entry',
    );
  );
} 
```

在我`index`看来，我想显示`Entries`per的数量`Catalog`。我还想让用户可以`Catalogs`按`Entries`.

我是 CakePHP 的初学者，有什么方法可以获取`COUNT(entry_id)`per`Catalog`并将其显示在数组中？并通过`$this->Paginator`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:59:11.850

您可以将[虚拟字段](http://book.cakephp.org/2.0/en/models/virtual-fields.html)与自定义查询一起使用

## 在你的模型中

```
var $virtualFields = array(
    'entry_count' => 'SELECT COUNT(entry_id) FROM entries as Entry WHERE Entry.catalog_id = Catalog.id'
  ); 
```

# facebook - 抓取 Facebook 赞页面最新状态的脚本？

> ID：14042789
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:09.740
> 
> 标签：facebook, token, status

我正在尝试编写一个获取最新 Facebook 状态的脚本。我通过调用[https://graph.facebook.com/](https://graph.facebook.com/) **LIKEPAGE** ?fields=statuses.limit%281%29.fields%28message,updated_time%29&access_token= **TOKEN获得最新状态**

问题是令牌过期了。我在 Facebook 上阅读了有关该问题的信息。[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/) 服务器可以访问页面（graph.facebook）并获取 JSON 响应吗？还是我每次都必须让用户登录？这是一个选择，但如果可能的话，我想避免它？

那么，我可以在不让用户登录的情况下通过 PHP 脚本获取最新状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:49:44.743

您应该动态生成访问令牌。为此，您应该首先创建一个 Facebook 应用程序，只需创建它并将其留空。从这个应用程序中，您将获得 Fb App ID 和 Fb App Secret。然后使用这个网址：

[https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=FB_APP_ID&client_secret=FB_APP_SECRET](https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=FB_APP_ID&client_secret=FB_APP_SECRET)

您将获得访问令牌。

# javascript - 绘制引擎以创建便利贴并保存图像

> ID：14042790
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:44:14.317
> 
> 标签：javascript, html, flash

我正在寻找客户端绘图引擎。我更喜欢 JavaScript，并希望最大限度地兼容浏览器。

那里有引擎吗？

用户应该能够在便利贴（作为背景）上绘画并保存此 img。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:54:23.557

您可以从 HTML5 画布或 SVG 开始。已经有许多可用的框架。[http://www.backslash.gr/content/blog/webdevelopment/7-10-javascript-canvas-frameworks](http://www.backslash.gr/content/blog/webdevelopment/7-10-javascript-canvas-frameworks)

# django - 使用内联通过 Django admin 添加对象时出现 DoesNotExist 异常

> ID：14042793
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:30.763
> 
> 标签：django, django-admin

**模型.py**

```
class Service(models.Model):

    provider = models.ForeignKey("services.ServiceProvider",
                                 verbose_name=_("Service provider"),
                                 related_name="services")
    title = models.CharField(_("Title"), max_length=150)

class Entertainment(Service):

    types = models.ManyToManyField(EntertainmentType, verbose_name=_("Types"),
                                   related_name="entertainments")

    description = models.TextField(_("Description"), blank=True)

class EntertainmentPhoto(models.Model):

    entertainment = models.ForeignKey(Entertainment, related_name="photos")
    description = models.TextField(_("Description"), max_length=1000,
                                   blank=True)
    photo = ImageWithThumbsField(_("Photo"), sizes=(),
                                 upload_to="services/photos/entertainment")
    is_main = models.BooleanField(verbose_name=_("Main"), default=False)

    class Meta:
        ordering = ('-is_main',)
        verbose_name = _("Photo")
        verbose_name_plural = _("Photos")

**admin.py**

class EntertainmentPhotoInline(admin.TabularInline):

    model = EntertainmentPhoto

class EntertainmentAdmin(CustomModelAdmin):

    filter_horizontal = ["types"]
    list_display = Entertainment.list_display
    list_filter = ["provider", "types", ]
    inlines = [EntertainmentPhotoInline] 
```

`admin.site.register(Entertainment, EntertainmentAdmin)`

如果我添加一个没有任何照片的娱乐对象并在编辑时添加照片，一切都工作正常。但是，如果我在添加娱乐时尝试添加任何照片，则会出现以下异常：

```
> Environment:
> 
> 
> Request Method: POST Request URL:
> http://mydomain.com/admin/entertainment/entertainment/add/
> 
> Django Version: 1.5b2 Python Version: 2.7.3 Installed Applications:
> ['south',  'gunicorn',  'django_extensions', 
> 'django.contrib.databrowse',  'django.contrib.contenttypes', 
> 'django.contrib.sessions',  'django.contrib.messages', 
> 'django.contrib.staticfiles',  'django.contrib.admin', 
> 'authentication',  'framework',  'framework.menu',  'services', 
> 'maps',  'services.entertainment',  'services.otherservices']
> Installed Middleware: ('django.middleware.common.CommonMiddleware', 
> 'django.contrib.sessions.middleware.SessionMiddleware', 
> 'django.middleware.csrf.CsrfViewMiddleware', 
> 'django.contrib.auth.middleware.AuthenticationMiddleware', 
> 'django.contrib.messages.middleware.MessageMiddleware', 
> 'django.middleware.clickjacking.XFrameOptionsMiddleware')
> 
> 
> Traceback: File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/core/handlers/base.py"
> in get_response
>   116\.                         response = callback(request, *callback_args, **callback_kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/contrib/admin/options.py"
> in wrapper
>   370\.                 return self.admin_site.admin_view(view)(*args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/utils/decorators.py"
> in _wrapped_view
>   91\.                     response = view_func(request, *args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/views/decorators/cache.py"
> in _wrapped_view_func
>   89\.         response = view_func(request, *args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/contrib/admin/sites.py"
> in inner
>   202\.             return view(request, *args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/utils/decorators.py"
> in _wrapper
>   25\.             return bound_func(*args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/utils/decorators.py"
> in _wrapped_view
>   91\.                     response = view_func(request, *args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/utils/decorators.py"
> in bound_func
>   21\.                 return func(self, *args2, **kwargs2) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/db/transaction.py"
> in inner
>   208\.                 return func(*args, **kwargs) File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/contrib/admin/options.py"
> in add_view
>   1045\.                 self.save_related(request, form, formsets, False) File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/contrib/admin/options.py"
> in save_related
>   762\.             self.save_formset(request, form, formset, change=change) File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/contrib/admin/options.py"
> in save_formset
>   750\.         formset.save() File "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/forms/models.py"
> in save
>   494\.         return self.save_existing_objects(commit) + self.save_new_objects(commit) File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/forms/models.py"
> in save_new_objects
>   628\.             self.new_objects.append(self.save_new(form, commit=commit)) File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/forms/models.py"
> in save_new
>   728\.         pk_value = getattr(self.instance, self.fk.rel.field_name) File
> "/Users/aemdy/virtualenvs/django1.5/lib/python2.7/site-packages/django/db/models/fields/related.py"
> in __get__
>   389\.             raise self.field.rel.to.DoesNotExist
> 
> Exception Type: DoesNotExist at
> /admin/entertainment/entertainment/add/ Exception Value: 
```

# php - 将所有条目插入 MySQLi 数据库的问题

> ID：14042796
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:54.587
> 
> 标签：php, mysqli

我正在使用一个表单从 Amazon 检索信息，然后将该信息插入到 MySQLi 表中。我的问题是某些记录可以完美插入，而另一些则根本不会插入。这是要插入到表中的查询（是的，我知道它对于 sql 注入是完全开放的，但我需要让它正常工作，然后才能使其成为网络安全）：

```
 $conn->query("INSERT INTO video (upc, title, manufacturer, rating, platform, weight, listed_price, release_date, asin, image)
    VALUES ('$upc', '" . addslashes($amazonResult['Title']) . "', '" . addslashes($amazonResult['Author']) . "', '" . $amazonResult['Rating'] . "',
         '" . $amazonResult['Platfrom'] . "', " . $amazonResult['Weight'] . "," . $amazonResult['ListPrice'] . ",
         '" . $amazonResult['PublishDate'] . "', '$asin','" . addslashes($amazonResult['ImageURL']) . "' )"); 
```

据我所知，没有产生任何错误。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:39:57.077

> 是的，我知道它对于 sql 注入是开放的，但我需要让它正常工作，然后才能使它成为网络安全

你做的是颠倒的。
注入只是*代码格式不正确*的结果。
因此，您的插入问题很可能是同一来源。

因此，如果您正确地格式化您的代码，您将同时实现这两个目标。

> 据我所知，没有产生任何错误。

您必须向 mysqli 询问它们。
至少以这种方式运行所有查询

```
$sql = "..."
$conn->query($sql) or trigger_error($conn->error."[$sql]"); 
```

通知错误和问题查询。

# linq-to-entities - EF5 检索嵌套导航属性

> ID：14042797
> 
> 赞同：0
> 
> 时间：2012-12-26T15:44:57.487
> 
> 标签：linq-to-entities, entity-framework-5, dbcontext

使用 .Net Framework 4、VB.Net、EF5、DbContext

请考虑三个表及其生成的实体：

公司、员工、任务

Task 有一个 Employee 的外键， Employee 有一个 Company 的外键。

在部分类公司中，我如何编写一个简单的查询来返回公司内的所有任务？

为了获得所有任务，我现在正在使用这个冗长的例程：

```
Public ReadOnly Property Tasks As List(Of Task)
    Get
        Dim taskList = New List(Of Task)

        For Each e In Employees
            For Each t In e.Tasks
                taskList.Add(t)
            Next
        Next

        Return taskList
    End Get
End Property 
```

它的表现很糟糕。有没有更有效的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:30:57.443

使用 LINQ 的 SelectMany 函数（我将尝试在 VB 中执行此操作，但如果我弄错了，您可以[在此处查看 SelectMany 的示例）：](http://msdn.microsoft.com/en-us/library/bb534336.aspx)

```
taskList = _ Companies.SelectMany(Function(c) _ c.Employees.SelectMany(Function(e) e.Tasks)).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:39:32.787

由于我是在 Company 类的一个属性中写这个的，我想应该是：

```
Return Employees.SelectMany(Function(e) e.Tasks).ToList 
```

这很有效，并且可以更有效地使用对象服务，因此我会将您的回复标记为答案。

但是，它的性能与我使用的循环一样差。我将把它归结为循环生成的 SQL。我真的不想对它进行分析和查看——我敢肯定这是一团糟。

我所做的是在属性内：

```
Using context = New Entities
    Return context.Tasks.Where(Function(t) t.Employee.CompanyID = Me.CompanyID).ToList
End Using 
```

这表现相当不错。虽然我不确定从 Model 项目中查询上下文是否被认为是一种好的做法，但我决定走这条路。

非常感谢。

# php - 当 svg 文件具有嵌入图像时，如何使用 Imagemagick 将 svg 图像转换为 png 图像？

> ID：14042800
> 
> 赞同：2
> 
> 时间：2012-12-26T15:45:24.150
> 
> 标签：php, image, svg, imagemagick, png

使用 PHP，我正在创建一个带有嵌入内容（base64 编码文件）的图像。如果我使用 Firefox 看到它，或者下载它然后用 Inkscape (www.inkscape.org) 打开它，图像很好！

但是当我尝试使用 imagemagick 转换它（使用转换命令或 Imagick 对 PHP 的支持）时，嵌入的图像不会与最终结果一起出现。

我不知道我是否缺少特殊命令或配置。我没有使用任何特殊设置。只是 ...

```
convert image.svg image.png 
```

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:26:39.200

ImageMagick 的内置 SVG 渲染真的很可怕。如果可以避免，请不要使用它。我建议改用[librsvg](https://live.gnome.org/LibRsvg)，或者使用命令行[`rsvg`](http://linux.die.net/man/1/rsvg)工具，或者可能使用[PHP rsvg 扩展](http://pecl.php.net/package/rsvg)。

（Librsvg 的渲染也不总是完美的，但它*应该*能够很好地处理嵌入的图像。如果你想要更好的渲染，你总是可以尝试[从命令行使用 Inkscape](http://wiki.inkscape.org/wiki/index.php/Frequently_asked_questions#Can_Inkscape_be_used_from_the_command_line.3F)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:33:59.717

嵌入的图像是 PNG 还是 Jpeg 格式？PHP中使用什么转换器？我在 Windows 上尝试了最新的 ImageMagick，它没有随 RSVG 一起提供。我找到了一个[适用于 Windows 的 RSVG-Converter 版本](http://opensourcepack.blogspot.fr/2012/06/rsvg-convert-svg-image-conversion-tool.html)，虽然它做得很好，但它跳过[了测试文件](http://dev.w3.org/SVG/profiles/1.1F2/test/svg/struct-image-04-t.svg)图像的 Jpeg 版本。

另一方面，内置转换器可以正确处理两个图像，但在[SVG 教程](http://www.imagemagick.org/Usage/draw/#svg)中显示的[主图像](http://www.imagemagick.org/Usage/draw/home.svg)上做得很糟糕。

# android - 在哪里可以找到 Google Play Developer Console 的设备型号：崩溃和 ANR？

> ID：14042802
> 
> 赞同：1
> 
> 时间：2012-12-26T15:45:32.387
> 
> 标签：android

我记得在 android 应用程序上看到一个复选框，当崩溃时，它会要求发送带有崩溃报告的设备数据。

我的应用程序在我的客户设备上产生了一些，`java.lang.OutOfMemoryError`我想看看他们正在使用的手机型号，看看我是否可以为他们低于平均水平的硬件创建替代品。或者，如果没有别的，禁止他们的模型下载该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:55:56.550

除非它在报告中说明（因为设备发送了该数据），否则唯一的其他地方是用户发送的带有错误报告的消息中。

* * *

**如果这两个地方都不是，那么您现在无法确定。**但是，如果您知道代码的哪一部分导致错误，您可以将代码包装在 try catch 中并使用设备类型重新抛出它。这只会使您将来受益，而不是当前的报告。像这样：

```
try{
   myVar.methodThatCausesCrash():
} catch (OutOfMemoryException e){
  throw new Exception("OutOfMemoryException model: " + Build.MODEL, e); // or rethrow another OoME
} 
```

# mysql - 是否可以在子查询中为 INSERT 选择列名？

> ID：14042804
> 
> 赞同：1
> 
> 时间：2012-12-26T15:45:34.133
> 
> 标签：mysql, sql, insert, subquery

是否可以在子查询中为 INSERT 选择列名？

例如，如果我有一个表 (table1)，它将事件映射到另一个表 (table2) 中的列：

表格1：

```
+------+--------+---------+
| id   | events | columns |
+------+--------+---------+
|    1 | event1 | column1 |
|    2 | event2 | column2 |
|    3 | event3 | column3 |
|    4 | event4 | column1 |
|    5 | event5 | column2 |
|    6 | event6 | column3 |
+------+--------+---------+ 
```

表2：

```
+------+---------+---------+---------+
| id   | column1 | column2 | column3 |
+------+---------+---------+---------+
|  ... |     ... |     ... |     ... |
+------+---------+---------+---------+ 
```

是否有SQL语句，如：

```
INSERT INTO table2 
(
    id, 
    (SELECT columns          /* the interesting subquery */
     FROM table1 
     WHERE events='event1')
) 
VALUES (1, 123); 
```

这将导致插入 table2 的值：

```
+------+---------+---------+---------+
| id   | column1 | column2 | column3 |
+------+---------+---------+---------+
|    1 |     123 |    NULL |    NULL |
+------+---------+---------+---------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:53:01.310

不，您不能对标识符使用表达式。你可以这样做：

```
insert into table2 (id, column1, column2, column3)
select 1,
  case columns when 'column1' then 123 else null end,
  case columns when 'column2' then 123 else null end,
  case columns when 'column3' then 123 else null end
from table1
where events = 'event1' 
```

# assembly - 寻找大型汇总表十六进制操作码 - asm

> ID：14042805
> 
> 赞同：0
> 
> 时间：2012-12-26T15:45:34.287
> 
> 标签：assembly

几十年前，它曾经是从 286 本书中手工重写的。它看起来像：

```
x    0    1    2    3    4    5    6    7    8    9    A    B    C    D    E

0    ADD    ADDW
   rm,reg   rm,reg
1
....................

F   LOCK    REP/REPNE/
             REPNZ 
```

它非常方便。你见过这样的桌子吗？我需要当代 x86 微处理器。我不相信它不存在，因为它是不可或缺的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:06:38.737

[它在英特尔手册 2B](http://download.intel.com/design/processor/manuals/253667.pdf)的附录 A 中

# android - 发生 ArrayIndexOutOfBoundsException

> ID：14042809
> 
> 赞同：1
> 
> 时间：2012-12-26T15:45:48.740
> 
> 标签：android, android-layout, android-arrayadapter

我正在使用 BaseAdapter：

```
public class MyAdapter extends BaseAdapter{
private final LayoutInflater mInflater;
private final String[] mItems;
private final String[] mClasses;
private final Drawable[] mIcons;
private final Integer mii;
public MyAdapter(Activity c, String[] objects, Drawable[] dricons, String[] classes, Integer ii) {
    mInflater = c.getLayoutInflater();
    mClasses = classes;
    mItems = objects;
    mIcons = dricons;
    mii = ii;
}
public int getCount() {
    return mItems.length;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.listitem, null);
    }
    ((TextView)convertView).setCompoundDrawablesWithIntrinsicBounds( mIcons[position], null, null, null);
    ((TextView)convertView).setText(mItems[position]);
    ((TextView)convertView).setTag(mClasses[position]); 
    return convertView;
}
@Override
public Object getItem(int position) {
    return mItems[position];
//  return mClasses[position];
}
@Override
public long getItemId(int position) {
    return position;
} 
```

}

当我向下滚动 ListView 时，应用程序会在滚动一半 Lis​​t 后抛出 suxh 异常。

```
12-26 19:39:36.020: E/AndroidRuntime(11800): FATAL EXCEPTION: main
12-26 19:39:36.020: E/AndroidRuntime(11800): java.lang.ArrayIndexOutOfBoundsException
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.tsysv.widgetchanger.MyAdapter.getView(MyAdapter.java:38)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.AbsListView.obtainView(AbsListView.java:1294)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.ListView.makeAndAddView(ListView.java:1727)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.ListView.fillDown(ListView.java:652)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.ListView.fillGap(ListView.java:623)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2065)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.widget.ListView.onTouchEvent(ListView.java:3315)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.View.dispatchTouchEvent(View.java:3765)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:905)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:944)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1701)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1116)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.app.Activity.dispatchTouchEvent(Activity.java:2093)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1685)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1802)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.os.Looper.loop(Looper.java:144)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at android.app.ActivityThread.main(ActivityThread.java:4937)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at java.lang.reflect.Method.invoke(Method.java:521)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-26 19:39:36.020: E/AndroidRuntime(11800):    at dalvik.system.NativeStart.main(Native Method) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:48:06.373

问题是当您调用构造函数时，您没有向适配器提供两个长度相同的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:48:32.510

中的项目数`mClasses`小于 中的项目数`mItems`。

所以这一行`((TextView)convertView).setTag(mClasses[position]);`会给你一个 Out Of Bounds 异常，因为你的适配器的长度是：

```
public int getCount() {
    return mItems.length;
} 
```

但是您的 mClass 的长度会更小。

# jquery - Jquery滑块手柄不动

> ID：14042814
> 
> 赞同：2
> 
> 时间：2012-12-26T15:46:15.943
> 
> 标签：jquery, slider, handle

我正在将我们的 drupal 6 网站升级到 drupal 7，并且随之而来的是更新版本的 Jquery。我有一个带有一些方框图的滑块库，您可以水平浏览它们，在新站点上您仍然可以滚动浏览内容，但手柄不会移动。

知道为什么滑块仍然有效但手柄本身不再有效吗？

我也在[JqueryUi.com](http://jqueryui.com/slider/#side-scroll)上尝试过滑块，但是使用那个滑块甚至都没有显示出来......

最初的版本是基于[这个slidergallery](http://jqueryfordesigners.com/slider-gallery/)，但是由于Jquery 的更新，那个不能再使用了。

的CSS：

```
 /* slider specific CSS */
body.page-node-483 .sliderGallery {
     background: url(/sites/all/themes/fourpees2011/css/images/productbrowser-background3.png) no-repeat;
     overflow: hidden;
     position: relative;
     padding: 10px;
     height: 200px;
     width: 960px;
 }

body.page-node-483 .sliderGallery ul {
     position: absolute;
     list-style: none;
     overflow: none;
     white-space: nowrap;
     padding: 0;
     margin: 0;
 }

body.page-node-483 .sliderGallery ul li {
     display: inline;
     margin-right: 30px;
 }

body.page-node-483 .sliderGallery ul li.first {
     margin-left: 20px;
 }

body.page-node-483 .slider {
     width: 950px;
     height: 19px;
     margin-top: 160px;
     margin-left: 5px;
     padding: 1px;
     position: relative;
     background: url(/sites/all/themes/fourpees2011/css/images/productbrowser-scrollbar2.png) no-repeat;
 }

body.page-node-483 .handle {
     position: absolute;
     cursor: move;
     height: 19px;
     width: 187px;
     top: 0;
     background: url(/sites/all/themes/fourpees2011/css/images/productbrowser-scroller2.png) no-repeat;
     z-index: 100;
 }

body.page-node-483 .slider span {
     color: #bbb;
     font-size: 80%;
     cursor: pointer;
     position: absolute;
     z-index: 110;
     top: 3px;
 } 
```

剧本 ：

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script type="text/javascript" charset="utf-8">
    window.onload = function () {
        var container = $('div.sliderGallery');
        var ul = $('ul', container);

        var itemsWidth = ul.innerWidth() - container.outerWidth();

        $('.slider', container).slider({
            min: 0,
            max: itemsWidth,
            handle: '.handle',
            stop: function (event, ui) {
                ul.animate({'left' : ui.value * -1}, 500);
            },
            slide: function (event, ui) {
                ul.css('left', ui.value * -1);
            }
        });
    };
</script> 
```

和 HTML：

```
<div class="sliderGallery">
        <ul>
            <li><a href="/products/atomyx/atomyx-portal"<li><img src="/sites/default/files/products/boxshots/small/boxshot_Atomyx-Portal_LEFT_LR.png"></li></a>
            <li><a href="/products/axaio-software/madetoprint"<li><img src="/sites/default/files/products/boxshots/small/MadeToPrint_0.png"></li></a>
            <li><a href="/products/axaio-software/madetocompare"<li><img src="/sites/default/files/products/boxshots/small/MadeToCompare_0.png"></li></a>
            <li><a href="/products/axaio-software/madeforlayers"<li><img src="/sites/default/files/products/boxshots/small/MadeForLayers.png"></li></a>
            <li><a href="/products/callas-software/pdftoolbox"<li><img src="/sites/default/files/products/boxshots/small/pdfToolbox_0.png"></li></a>
            <li><a href="/products/callas-software/pdftoolbox-server"<li><img src="/sites/default/files/products/boxshots/small/pdfToolboxServer_0.png"></li></a>
            <li><a href="/products/callas-software/pdfapilot"<li><img src="/sites/default/files/products/boxshots/small/pdfaPilot_0.png"></li></a>
            <li><a href="/products/callas-software/pdfapilot-server"<li><img src="/sites/default/files/products/boxshots/small/pdfaPilotServer_0.png"></li></a>
            <li><a href="/products/ctrlpublishing/ctrlchanges"<li><img src="/sites/default/files/products/boxshots/small/CtrlChanges.png"></li></a>
            <li><a href="/products/ctrlpublishing/ctrllayers"<li><img src="/sites/default/files/products/boxshots/small/CtrlLayers.png"></li></a>
            <li><a href="/products/ctrlpublishing/ctrlcrosstalkid"<li><img src="/sites/default/files/products/boxshots/small/CtrlCrossTalkID.png"></li></a>
            <li><a href="/products/ctrlpublishing/ctrlcrosstalk"<li><img src="/sites/default/files/products/boxshots/small/CtrlCrossTalk.png"></li></a>
            <li><a href="/products/elpical/claro-premedia"<li><img src="/sites/default/files/products/boxshots/small/ClaroPremedia.png"></li></a>
            <li><a href="/products/elpical/claro-single"<li><img src="/sites/default/files/products/boxshots/small/ClaroSingle.png"></li></a>
            <li><a href="/products/printfactory/printfactory"<li><img src="/sites/default/files/products/boxshots/small/PrintFactory_0.png"></li></a>
            <li><a href="/products/printfactory/printfactory-go"<li><img src="/sites/default/files/products/boxshots/small/PrintFactory_Go_Boxshot_0.png"></li></a>
            <li><a href="/products/proofmaster/proofmaster-plus"<li><img src="/sites/default/files/products/boxshots/small/ProofMasterPlus.png"></li></a>
            <li><a href="/products/proofmaster/proofmaster-certify"<li><img src="/sites/default/files/products/boxshots/small/ProofMasterCertify.png"></li></a>
            <li><a href="/products/proofmaster/proofmaster-media"<li><img src="/sites/default/files/products/boxshots/small/ProofMasterMedia.png"></li></a>
            <li><a href="/products/remote-director/remote-director"<li><img src="/sites/default/files/products/boxshots/small/Remote-director.png"></li></a>
            <li><a href="/products/remote-director/press-director"<li><img src="/sites/default/files/products/boxshots/small/Press-director.png"></li></a>
            <li><a href="/products/twixl-media/twixl-publisher"<li><img src="/sites/default/files/products/boxshots/small/Twixl-boxshot.png"></li></a>
            <li><a href="/products/twixl-media/twixl-publisher-enterprise-kiosk"<li><img src="/sites/default/files/products/boxshots/small/Twixl-Enterprise-Kiosk-boxshot.png"></li></a>
        </ul>
        <div class="slider">
            <div class="handle"></div>
        </div>
</div> 
```

整个在 JSfiddle 上：http: [//jsfiddle.net/vTr5c/2/](http://jsfiddle.net/vTr5c/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:20:51.367

从 jquery-1.7.1.min.js 迁移到 jquery-1.9.1.min.jss 时，我遇到了类似的“滑块手柄不动”问题。在我这一边，经过测试，这是因为这个文件更改——当然——。Jquery 中的某些语法可能从 1.7.1 更改为 1.9.1。我无法让您的代码/滑块出现在 JSfiddle 上。jsfiddle.net/vTr5c/2/

# linux - Linux 系统的 OPEN_MAX 定义在哪里？

> ID：14042824
> 
> 赞同：7
> 
> 时间：2012-12-26T15:46:45.647
> 
> 标签：linux, gcc, system-calls

`OPEN_MAX`是定义单个程序允许的最大打开文件数的常量。

根据开始 Linux 编程第 4^版，第 101 页：

> 限制，通常由limits.h 中的常量OPEN_MAX 定义，因系统而异，...

在我的系统`limits.h`中，目录 中的文件`/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed`没有这个常量。我看错了`limits.h`还是自 2008 年以来位置发生了`OPEN_MAX`变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:18:12.550

值得一提的是，《[Beginning Linux Programming](https://rads.stackoverflow.com/amzn/click/com/0470147628) 》第 4 版于 2007 年出版；它的一部分可能有点过时了。（这不是对这本书的批评，我还没有读过。）

`OPEN_MAX`至少在 Linux 系统上，这似乎已被弃用。原因似乎是可以同时打开的文件的最大数量不固定，因此扩展为整数文字的宏不是获取该信息的好方法。

`FOPEN_MAX`还有另一个应该类似的宏；我想不出一个原因，如果`OPEN_MAX`和`FOPEN_MAX`，如果它们都被定义，应该有不同的值。但是`FOPEN_MAX`是 C 语言标准规定的，所以系统没有不定义它的选项。C标准说`FOPEN_MAX`

> 扩展为一个整数常量表达式，该表达式是实现保证可以同时打开的最小文件数

（如果“最小”这个词令人困惑，它保证一个程序可以一次打开*至少*那么多文件。）

如果要*当前*最大可以打开的文件数，看一下[`sysconf()`](http://linux.die.net/man/3/sysconf)函数；在我的系统上，`sysconf(_SC_OPEN_MAX)`返回 1024。（`sysconf()`手册页指的是一个符号`OPEN_MAX`。这不是计数，而是由 . 识别的值`sysconf()`。而且它没有在我的系统上定义。）

我在我的 Ubuntu 系统上搜索了`OPEN_MAX`（单词匹配，所以不包括`FOPEN_MAX`），发现了以下内容（这些显然只是简短的摘录）：

`/usr/include/X11/Xos.h`：

```
# ifdef __GNU__
#  define PATH_MAX 4096
#  define MAXPATHLEN 4096
#  define OPEN_MAX 256 /* We define a reasonable limit.  */
# endif 
```

`/usr/include/i386-linux-gnu/bits/local_lim.h`：

```
/* The kernel header pollutes the namespace with the NR_OPEN symbol
   and defines LINK_MAX although filesystems have different maxima.  A
   similar thing is true for OPEN_MAX: the limit can be changed at
   runtime and therefore the macro must not be defined.  Remove this
   after including the header if necessary.  */  
#ifndef NR_OPEN
# define __undef_NR_OPEN
#endif
#ifndef LINK_MAX
# define __undef_LINK_MAX
#endif
#ifndef OPEN_MAX
# define __undef_OPEN_MAX
#endif
#ifndef ARG_MAX
# define __undef_ARG_MAX
#endif 
```

`/usr/include/i386-linux-gnu/bits/xopen_lim.h`：

```
/* We do not provide fixed values for 

   ARG_MAX      Maximum length of argument to the `exec' function
                including environment data.

   ATEXIT_MAX   Maximum number of functions that may be registered
                with `atexit'.

   CHILD_MAX    Maximum number of simultaneous processes per real
                user ID. 

   OPEN_MAX     Maximum number of files that one process can have open
                at anyone time.

   PAGESIZE
   PAGE_SIZE    Size of bytes of a page.

   PASS_MAX     Maximum number of significant bytes in a password.

   We only provide a fixed limit for

   IOV_MAX      Maximum number of `iovec' structures that one process has
                available for use with `readv' or writev'.

   if this is indeed fixed by the underlying system.
*/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T16:49:04.533

除了 cste 给出的链接，我想指出，有一个`/proc/sys/fs/file-max`条目提供了系统在任何给定时间可以打开的文件数量。

这是一些文档： [https ://access.redhat.com/knowledge/docs/en-US/Red_Hat_Directory_Server/8.2/html/Performance_Tuning_Guide/system-tuning.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Directory_Server/8.2/html/Performance_Tuning_Guide/system-tuning.html)

请注意，这并不是说可以保证您可以打开那么多文件 - 如果系统耗尽了某些资源（例如“没有更多可用内存”），那么它很可能会失败。

FOPEN_MAX 表示 C 库允许打开这么多文件（至少，如所讨论的那样），但可能首先发生其他限制。例如，SYSTEM 限制为 4000 个文件，而一些已经运行的应用程序打开了 3990 个文件。那么您将无法打开超过 7 个文件 [因为 stdin、stdout 和 stderr 也占用了三个插槽]。如果`rlimit`设置为 5，那么您只能打开 2 个自己的文件。

在我看来，知道是否可以打开文件的最好方法是打开它。如果失败了，你必须做其他事情。如果您有一些需要打开许多文件的进程[例如，在具有 256 个内核和每个内核 8 个线程的机器上进行多线程搜索/比较，并且每个线程使用三个文件（文件“A”、“B”和“diff”）] ，那么您可能需要确保您的 FOPEN_MAX 允许在开始创建线程之前打开 3 * 8 * 256 个文件，因为无法打开其文件的线程将毫无意义。但是对于大多数普通应用程序，只需尝试打开文件，如果失败，告诉用户（日志或其他内容），和/或重试...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T16:19:39.533

我建议使用魔法`grep`来找到这个常数`/usr/include`：

```
grep -rn --col OPEN_MAX /usr/include

...
...
/usr/include/stdio.h:159:   FOPEN_MAX   Minimum number of files that can be open at once.
...
... 
```

希望对你有帮助

# javascript - 将 Twitter 小部件放在网页右侧

> ID：14042825
> 
> 赞同：0
> 
> 时间：2012-12-26T15:46:48.987
> 
> 标签：javascript, html, css

我是 HTML 新手，正在制作一个简单的单页网站，并想添加 twitter 小部件，但是当我添加小部件时，它会出现在我的表单下方。有没有办法让它转到页面的右侧以及调整 twitter 小部件的宽度。该网页的代码如下。

[http://codepad.org/QcPq5Xur](http://codepad.org/QcPq5Xur)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:59:54.253

将表单放入它自己的 div 容器中。

将此 div 设置为您希望它占用的左侧空间量的特定宽度。

创建另一个新 div，并在其中插入 twitter 提要脚本。

如果需要，设置一个特定的宽度，为它设置一个绝对宽度，或者一个百分比。如果您不设置宽度，它应该填充包含表单的 div 未使用的任何额外空间。

只要两个div的宽度小于浏览器区域的宽度，就会并排显示。如果您希望无论浏览器分辨率如何，它们都被并排强制，您也可以将两者包装在另一个包含最小宽度的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:00:15.460

那是因为您的表单是用`div`块级元素包装的。尝试将其显示更改为`inline-block`

```
<div id="formContainer" style='text-align: center; display: inline-block;'>
    <a name="form789985197" id="formAnchor789985197"></a>
</div> 
```

# windows-phone-7 - 从xml文档中提取元素

> ID：14042826
> 
> 赞同：1
> 
> 时间：2012-12-26T15:46:57.063
> 
> 标签：windows-phone-7, linq-to-xml

我有一个 xml 文档，我想在其中提取每 10 个元素。我使用这段代码来提取最后 10 个元素，但我的想法是在它们之前获取接下来的 10 个元素，因为我得到了整个文档，所以我不能对 linq 使用分页：

```
slideView.ItemsSource = 
    (from channel in xmlItems.Descendants("album")     
     orderby (int)channel.Element("catid") descending 
     select new onair
     {
         title = (string)channel.Element("name"),
         photo = (string)channel.Element("picture")
     }).Take(10); 
```

请问有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:55:22.150

在查询结束时尝试 .Skip(10).Take(10) 。

# django - Solr 4.0 的 django-haystack 限制

> ID：14042834
> 
> 赞同：2
> 
> 时间：2012-12-26T15:48:08.623
> 
> 标签：django, solr, django-haystack

我们计划在我们的网络应用程序中使用 django-haystack 和 Solr4.0（近乎实时的搜索），我想知道是否有人可以就使用 haystack 的限制提出建议（与直接使用 solr 相比）。即使用 django-haystack 是否会影响性能/开销？我们有大约 300 万多个文档需要索引 + 每天额外增加（估计）100k。

理想情况下，我认为我们需要一个基于 Solr4 的简单 API - 但我发现很难找到仍然积极维护的特定于 python 的任何东西（当然 django-haystack 除外）。我很感激这方面的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T18:01:17.277

您的问题似乎可以改写为“Haystack 是如何烧伤您的？” 干草堆在某些方面很好，但也让我在工作中有些头疼。以下是我不得不编写的一些代码。

你提到了索引。Haystack 具有用于重建索引的管理命令。我们将在测试期间将这些用于核弹和铺路重建，但为了重新索引我们的生产内容，我们有点碰壁了。该命令将永远持续下去，就进度而言，您将不知道它在哪里，如果失败，您将被搞砸，不得不重新开始。我们达到了一个点，我们有太多的内容，它会足够可靠地失败。我们转而制作批量内容并在 celery 任务中重新索引这些内容。我们制定了一个管理命令来进行批处理并启动所有这些任务。面对部分故障，这更加健壮，甚至更好的是，它实际上完成了。底层任务将使用 haystack 调用将数据库对象转换为 solr 文档——这种 ORMiness 很好，并且没有 还没烧死我。不过，我们手动编辑我们的 solr 模式。

查询 API 适用于简单的东西。如果您正在执行更复杂的 solr 查询，您会发现自己只是在输入原始查询。这可能导致意大利面条代码。我们最终将原始意大利面条推送到 solrconfig 文件中的请求处理程序中。我们仍然使用 haystack 来打开突出显示或选择特定的请求处理程序，但同样，当我们保持简单并且我们确实破解了一种根据需要添加任意参数的方法时，我更高兴。

关于如何使用 solr 的其他假设似乎已融入代码。Haystack 是唯一一个我真正熟悉代码的开源项目。我不确定这是否是一件好事，因为它并不总是可以选择的。我们有很多层蛋糕代码扩展了一个 haystack 类并覆盖它以做正确的事情。这并不可怕，但是当您还必须将 haystack 代码复制并粘贴到那些被覆盖的方法中时，它开始变得更加糟糕。

所以......它并不完美，但零件很方便。如果您无论如何都在编写自己的 API 时犹豫不决，那么使用 haystack 可能会为您节省一些麻烦，尤其是当您想要获取所有 solr 结果并将它们传递回 django 模板或其他任何东西时。听起来随着文档的稳定涌入，无论如何您都希望编写一些批量索引作业。从那开始，准备被烧掉一点，然后在发生这种情况时查看源代码，它实际上非常可读。

# android - 本地化 Titanium Android 应用程序

> ID：14042838
> 
> 赞同：-2
> 
> 时间：2012-12-26T15:48:37.233
> 
> 标签：android, localization, titanium, titanium-mobile

我有一个完整的 Titanium Android 应用程序（开发人员不是我）。我想本地化它，但字符串和 UI 都在源代码中硬编码。用 javascript 构建的应用程序。

UI 也很重要，因为我们还想要一个从右到左的应用程序版本。

需要提一下，我对 Titanium 环境还很陌生。

**完成这项任务的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:44:51.493

您需要获取源代码并找到所有硬编码字符串并将它们移动到 il8n/ 文件夹的 string.xml 文件中。您需要在适当的语言目录中使用与您要表示的特定硬编码值相对应的字符串创建这些文件之一。

例如：

```
var mystring = L('hi_text'); 
```

在 Titanium 中，此代码将转到语言文件夹（设备设置的，即 English 或 en 文件夹）并查找如下条目：

il8n/en 文件夹：

```
<string name="hi_text">Hello</string> 
```

如果设备处于西班牙语模式，则相同的代码将查看 il8n/es 文件夹：

```
<string name="hi_text">Hola<string> 
```

这将允许您切换语言，但更改 UI 可能会对源代码进行重大更改。在 app.js 文件中，您可能会尝试检测设备的语言并分支到完全不同的屏幕逻辑。您也可以在特定的屏幕 javascript 文件中执行此操作，您可以在其中为每种不同的语言调用一个创建函数。如果应用程序尚未内置该要求，您可能会更改应用程序的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T16:07:12.970

这是官方文档： [https ://developer.appcelerator.com/question/125732/localization-not-working](https://developer.appcelerator.com/question/125732/localization-not-working)

# delphi - 解密不工作>>>

> ID：14042840
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:49:03.260
> 
> 标签：delphi, encryption

我使用了这个加密纯文本的简单代码。然后我尝试使用相同的加密方法对其进行解密，但在加密部分进行了反转。有一个乘法过程，我不知道如何在解密代码中反转它。

这是代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  s: String;
  count, ilength: Integer;
begin
  s := edit1.Text;
  ilength := Length(s);
  FOR count := 1 to ilength do
  begin
    s[count] := chr(ord(s[count]) * 4 + 1); // Encoding
  end;
  Label1.caption := s;
  // Display encoded text
  // Decoding section
  // This will probably be placed in another procedure.
  FOR count := 1 to ilength do
  begin
    s[count] := chr(ord((s[count]) / 4) - 1);
    // Here I Get An Error ! Please Help Guys, Thanks
  end;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T15:57:21.173

您正在尝试执行整数除法。在 Delphi 中，您可以使用`div`. `/`运算符用于浮点除法。查看代码，您正在尝试反转此计算：

```
ord(s[count]) * 4 + 1 
```

你像这样反转：

```
(ord(s[count]) - 1) div 4 
```

但是，您的算法将不起作用。考虑一下加密 64 和 128 时会发生什么。乘以 4 分别得到 256 和 512。然后加一得到 257 和 513。然后存储回 8 位数据类型并丢失高位字节。所以这两个字符都被编码为值 1。

我假设您使用的是 8 位文本。但是，如果您使用 16 位文本，您的算法仍然会以完全相同的方式失败。您提出的算法是不可逆的。

我敦促您找到现成的加密算法，而不是尝试编写自己的加密算法。加密很难正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T15:57:09.383

你`/`用来做除法。这将返回一个浮点数。改为`DIV`返回一个整数。

# dns - 为什么 google.com 会重定向到 google.co.in

> ID：14042841
> 
> 赞同：0
> 
> 时间：2012-12-26T15:49:06.677
> 
> 标签：dns

你有没有看到 Google.com 没有打开，谁能告诉这背后的原因是什么。如果您在印度搜索 Google.com，那么它会自动重定向到 Google.co.in 我需要技术答案（可能就 dns 而言意味着完整的流量分析）。另外，我知道 google.com/ncr 会打开 google.com，但为什么它会重定向到本地服务器。这背后的基本流程是什么？？？？

如果有人可以请帮忙？？？任何评论或任何其他链接都可以理解...

还有fqdn/realm/domain有什么区别？？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:52:05.260

当您连接到为 Google.com 提供服务的 HTTP 服务器时，它会根据您的 IP 地址确定您所在的国家/地区，然后发送一个 HTTP 302 状态代码，将您重定向到相应的域名。

访问`google.com/ncr`将设置一个 cookie 来`google.com`检查以防止重定向。

# spring - 缓存 (Ehcache) - Hibernate 二级缓存和 Spring

> ID：14042844
> 
> 赞同：1
> 
> 时间：2012-12-26T15:49:14.150
> 
> 标签：spring, hibernate, caching, ehcache

在我的 Web 应用程序（Spring 3.1、Hibernate 4）中，我将 Ehcache 用于 Hibernate 二级缓存和 Spring @Cache。我想知道，Hibernate Cache和Spring Cache在哪里使用？

例如，我有几个域类（在数据库中查看）用作屏幕上的查找值。我可以使用 Hibernate 二级缓存以及 Spring @Cache 来缓存它们。

因此，在我的服务层中，如果我使用 Spring @Cache 缓存这些域对象，一旦缓存，我将接收到这些对象而根本不会触及持久层（休眠 HQL 查询）。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:12:05.540

取决于您的层架构。

假设您有三个服务（或同一服务中的三个方法），它们都返回一个`Customer`实体集合，即域对象。如果您在服务层缓存，则单个数据库记录的相同表示很可能会多次存在于缓存中。它们是具有基本相同信息的多个对象。为什么？因为 和 的结果`Service.getWhateverCustomers(String)`存储`Service.getWhateverCustomers(String, Integer)`在两个不同的缓存键下。

另一方面，如果您使用 JPA [@Cachable](http://en.wikibooks.org/wiki/Java_Persistence/Caching)`Customer`注释在实体级别缓存，则无论您从哪个服务或服务方法调用实际检索实体的代码，您的实体都会被缓存。当然，有关 JPA 提供者何时可以/确实缓存实体的规则适用。如果您不熟悉它们，请阅读它们。

希望这能让你知道要走哪条路。如果您有更多问题，请发表后续评论，我将编辑此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:44:44.800

正确的做法是：

1.  问问自己是否需要处理缓存的复杂性。您的应用程序是否未能达到要求？
2.  仅当上一个问题的答案是“是”时，分析您的应用程序以找出性能问题所在。
3.  确定解决步骤 2 中确定的性能问题的适当方法。它可能涉及也可能不涉及缓存以防止代价高昂的操作。如果它确实涉及缓存，那么在哪里缓存以及使用哪个缓存应该非常清楚，因为您将确切地知道您要防止发生什么。

这个故事的寓意是你不缓存，因为它很酷。您缓存性能。而且[只有在证明有必要时才优化代码](http://c2.com/cgi/wiki?PrematureOptimization)。

# python - 从python中的列表字典中删除常见元素

> ID：14042848
> 
> 赞同：0
> 
> 时间：2012-12-26T15:49:26.717
> 
> 标签：python, list, dictionary

我有一个列表字典，列表包含这样的字典：

```
my_dict = {
'list1': [{'catch': 100, 'id': '1'}, {'catch': 101, 'id': '2'}, 
          {'catch': 50, 'id': '1'}], 
'list2': [{'catch': 189, 'id': '1'}, {'catch': 120, 'id': '12'}], 
'list3': [{'catch': 140, 'id': '1'}, {'catch': 10, 'id': '100'}]
} 
```

删除具有 commin 'id' 值的列表项并将它们存储在单独的列表中的最*Pythonic方法是什么？*所以输出会是这样的：

```
my_dict = {
'list1': [{'catch': 101, 'id': '2'}], 
'list2': [{'catch': 120, 'id': '12'}], 
'list3': [ {'catch': 10, 'id': '100'}],
'list4': [{'catch': 100, 'id': '1'}, , {'catch': 50, 'id': '1'}, 
          {'catch': 189, 'id': '1'}, {'catch': 140, 'id': '1'}]
} 
```

在我的程序中，我有 7 个与此类似的列表，如果“id”出现在这些列表中的两个或多个列表中，我想将具有该“id”的项目的所有外观存储在第 8 个列表中以供进一步处理

关于，finnurtorfa

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:07:05.727

考虑将您的数据重组为如下所示：

```
>>> import itertools
>>> { k: [d['catch'] for d in v] for k, v in itertools.groupby(sorted(itertools.chain(*my_dict.itervalues()), key=lambda d: d['id']), lambda d: d['id']) }
{'1': [100, 50, 140, 189], '2': [101], '100': [10], '12': [120]} 
```

您尚未描述您的数据代表什么，因此这可能不适合您。但是使用的工具（`chain`和`groupby`from `itertools`）至少应该给你一些想法。

编辑：我在测试中偶然使用了问题的示例答案。通过将排序添加到`groupby`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:02:04.317

```
>>> get_id = operator.itemgetter("id")
>>> flattened_dict = itertools.chain.from_iterable(my_dict.values())
>>> groups = itertools.groupby(sorted(flattened_dict, key=get_id), get_id)
>>> {k: list(v) for k, v in groups}
{'1': [{'catch': 100, 'id': '1'},
  {'catch': 50, 'id': '1'},
  {'catch': 140, 'id': '1'},
  {'catch': 189, 'id': '1'}],
 '100': [{'catch': 10, 'id': '100'}],
 '12': [{'catch': 120, 'id': '12'}],
 '2': [{'catch': 101, 'id': '2'}]} 
```

解释：

*   `get_id``x`是一个接受对象并返回的函数`x["id"]`。
*   `flattened_dict`只是对所有列表的可迭代（即连接`.values()`所有`my_dict`
*   现在我们`flattened_dict`使用 key 函数`get_id`进行排序——即按 ID 排序——并按 id 对结果进行分组。

这基本上有效，因为`itertools.groupby`太棒了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:02:59.873

大致如下：

```
my_dict = {
'list1': [{'catch': 100, 'id': '1'}, {'catch': 101, 'id': '2'}, 
      {'catch': 50, 'id': '1'}], 
'list2': [{'catch': 189, 'id': '1'}, {'catch': 120, 'id': '12'}], 
'list3': [{'catch': 140, 'id': '1'}, {'catch': 10, 'id': '100'}]
}

from itertools import groupby

sub = {}
for k in my_dict:
 for kk, g in groupby( my_dict[k], lambda v: v["id"] ):
   if not kk in sub:
    sub[kk] = []
   sub[kk] = sub[kk] + list( g )

print sub

{'1': [{'catch': 100, 'id': '1'}, {'catch': 50, 'id': '1'}, {'catch': 140, 'id': '1'}, {'catch': 189, 'id': '1'}], '12': [{'catch': 120, 'id': '12'}], '100': [{'catch': 10, 'id': '100'}], '2': [{'catch': 101, 'id': '2'}]} 
```

# telerik - Rad Editor 是否有智能感知属性？

> ID：14042853
> 
> 赞同：0
> 
> 时间：2012-12-26T15:50:01.350
> 
> 标签：telerik, radeditor

我正在使用作为 Telerik 组件的 Rad 编辑器。

Rad 编辑器是否具有智能感知属性？

也就是说; 在我开始写`"Stack"`单词时使用 rad 编辑器时，我想将其自动完成为“StackOverflow”，或者如果可能的话，我想显示一些选项，例如`"StackOver"`, `"StackUser"`.

在我研究它时，我发现并考虑了以下链接作为解决方案。 [http://demos.telerik.com/aspnet-ajax/editor/examples/spellchecker/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/editor/examples/spellchecker/defaultcs.aspx)

如果可能的话，我必须自定义智能感知属性。也就是说，如果用户进入`stack`，建议他/她`StackOverflow`和`StackUser`。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:25:03.977

它不提供智能感知，因为它在您键入时提供主动检查。提供拼写检查的两个功能是提供拼写检查功能的 RadSpell 控件，以及内置拼写检查的浏览器（如 Chrome）。

使用拼写检查器，您可以自定义词典以包含您希望它使用的单词列表。

# javascript - DOMContentReady 未在 Chrome 扩展程序中触发

> ID：14042857
> 
> 赞同：1
> 
> 时间：2012-12-26T15:50:11.043
> 
> 标签：javascript, google-chrome, google-chrome-extension, domready

我在 manifest.json 文件中编写了以下代码：

```
{
   "name":"SecondExtension",                     
   "version":"1.0",
   "manifest_version":2,
   "content_security_policy": "script-src 'self';object-src 'self'",
   "permissions":["tabs", "http://*/*", "https://*/*"],
   "browser_action": {
          "defaul_icon":"icon.png",
          "default_title":"Security" ,
          "default_popup":"pops.html"
   }
} 
```

我在 pops.html 中编写了以下代码

```
<html>
<head>
<script src='popup.js'>
</script>
</head>
<body>

<p>Username : </p></br><input type="text"  id="name" height="20" width="50" />

<p>Password :</p></br> <input type="password"  id="password" height="20" width="50" />

<a href="pops2.html">login</a>
<button id="login">login</button>
<textarea id="return_name" rows="2" columns="20"></textarea>
</body>
</html> 
```

popup.js 中的代码是：

```
function check() {
    alert('its working');
}
document.addEventListener('DOMContentReady', function () {
    document.getElementById('login').addEventListener('click', check);
}); 
```

现在的问题是 JavaScript 没有像我点击登录按钮时那样运行，它没有提醒消息“它正在工作”。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:57:52.207

AFAIK，没有**DOMContentReady**事件，有**DOMContentLoaded**

尝试用这个替换你的代码 -

```
 function check() {
    alert('its working');
 };
 document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('login').addEventListener('click', check);
 }); 
```

# c# - 使用 MAF 加载程序集的正确方法

> ID：14042860
> 
> 赞同：8
> 
> 时间：2012-12-26T15:50:32.117
> 
> 标签：c#, .net, maf

我有一个使用托管加载项框架 (MAF) 的基于插件架构的程序。我正在尝试以它们在自己的进程中运行的方式加载我的加载项程序集，并且我可以指定它们应该在哪里查找要加载的其他程序集。以下是我尝试过的两种不同方法以及为什么它们不能 100% 工作：

```
AppDomain _domain;

// Create application domain setup information.
AppDomainSetup domaininfo = new AppDomainSetup();

// Configure
domaininfo.ApplicationName = PluginName;
domaininfo.ApplicationBase = MyPath;
domaininfo.PrivateBinPath = MyPath;
domaininfo.LoaderOptimization = LoaderOptimization.MultiDomain;
domaininfo.DisallowApplicationBaseProbing = false;
domaininfo.DisallowBindingRedirects = false;
domaininfo.DisallowCodeDownload = false;
domaininfo.DisallowPublisherPolicy = false;

System.Security.Policy.Evidence adevidence = AppDomain.CurrentDomain.Evidence;
// Create the new application domain using setup information.
_domain = AppDomain.CreateDomain(PluginName + "_Domain", adevidence, domaininfo);

_addin = _token.Activate<IOpenSourceAutomationAddInv2>(_domain); 
```

此方法允许我告诉每个加载项在新的应用程序域中运行，并且我可以指定在哪里查找其他程序集。这很重要，因为每个加载项都位于其自己的子目录中，并且需要在与主机相同的目录中查找以加载其他程序集。这种方法的问题是，如果加载项有未处理的异常，它将导致主机崩溃，因为它在同一进程中运行。

```
AddInProcess _process;
_process = new AddInProcess(Platform.AnyCpu);

_addin = _token.Activate<IOpenSourceAutomationAddInv2>(_process,AddInSecurityLevel.FullTrust); 
```

此方法将每个加载项加载到其自己的进程中，因此单个加载项崩溃它不会影响主机。问题是我无法弄清楚是否可以告诉加载项在哪里寻找其他程序集。他们只会查看他们的目录而不是主机的目录。

为了完成我正在寻找的东西，使用 MAF 的最佳方法是什么？我需要能够加载我的加载项是一种将它们与主机分开的方式，因为我没有编写加载项。我无法控制他们的代码，所以我需要确保他们不会让主机崩溃。我还需要能够指定加载项应从何处加载程序集，因为它们将位于自己的子目录中，并且需要从主机目录加载程序集。如果可能，我也希望不使用 GAC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:32:34.563

如果插件不受信任，我认为更好的解决方案是使用单独的进程加载它，就像在您的第二个解决方案中一样。

关于引用可能每个插件都在其私有目录中查找是正确的，否则如果您有 2 个插件使用不同的不兼容引用编译，您会遇到麻烦。

如果您真的想强制使用公共目录，我可以想到 2 个解决方案：

*   使用 AddInProcess.exe.Config 您可以指定探测目录，如 http://msdn.microsoft.com/en-us/library/823z9h8w.aspx
*   在激活插件之前将所有主机引用复制到插件目录

# c - 如何从标准输入读取文本并将其写入使用低级文件处理的文件？

> ID：14042861
> 
> 赞同：0
> 
> 时间：2012-12-26T15:50:33.367
> 
> 标签：c, stdin

我尝试使用以下代码从键盘读取文本并将其写入文件*text.dat*。该文件已创建，但它是空的。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <io.h>
#include <string.h>

int main()
{
    char s[201];
    int n,f = open("text.dat", O_RDWR | O_CREAT);
    while (fgets(s,200,stdin) != NULL)
        write(f, s,sizeof(s));
    close(f);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:53:00.443

`write(f, s, strlen(s))` 虽然我会使用`read()`而不是`fgets()`使用它的结果而不是`strlen()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:54:36.180

`write`是错的。尝试这个：

```
write(f, s, sizeof(s)); 
```

第二个参数应该是指向开头的指针`s`。您实际传递的是指向指针的指针。

当您使用它时，请摆脱未使用的`int n`：

```
int f = open("text.dat", O_RDWR | O_CREAT); 
```

**编辑添加**

你`write()` *必须*使用`strlen()`而不是`sizeof()`- 你可能正在写出未初始化的垃圾，这使得文件*看起来*是空的。

```
write(f, s, strlen(s)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:16:19.347

您以错误的方式打开文件。尝试`open("text.dat", O_RDWR | O_CREAT,0666 );`

PS
您根本没有文件的写权限。

# javascript - Javascript append子问题

> ID：14042863
> 
> 赞同：-1
> 
> 时间：2012-12-26T15:51:00.210
> 
> 标签：javascript, appendchild

单击缩略图图像时会发生此功能；它使用缩略图的 ID 来获取包含图像和一些文本的 div ("item"+f) 的 ID，然后将其粘贴到 "display" div。

问题是我想在每次单击时清除显示 div，因此只显示一个 div，但我在使用“appendChild”时遇到了麻烦（我被告知建议使用 innerHTML）。下面我当前的解决方案是尝试获取显示 div 中的内容并将其附加到隐藏的 div 以便以后可以再次使用，但似乎没有成功。

displayimage 和 removeimage 是我用来保存我正在移动的 div 的 div……这似乎没有意义，但似乎效果更好。如果您发现我的流程有任何问题或如何更好地使用“appendChild”，那将很有帮助。

```
function thumbclick(clickedimage) {
var f = clickedimage.charAt(clickedimage.length - 1);
displayimage = document.getElementById("item"+f);
removeimage = document.getElementById("display").getElementsByTagName("div")[0];
document.getElementById("galleryimages").appendChild(removeimage);
document.getElementById("display").appendChild(displayimage);
} 
```

我经常收到“未捕获的错误：NOT_FOUND_ERR：DOM Exception 8”，经过研究，这似乎是我没有附加正确类型的元素......但我只是将 div 附加到 div？

编辑：抱歉没有发布足够的细节；评论中的 CN Kanode 似乎有我的问题，显示 div 一开始是空的，所以没有什么要删除的。谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-26T16:04:48.093

以下代码应该与您的代码具有相同的效果，仅使用 jQuery，这在操作 DOM 时肯定没有问题：

```
function thumbclick(clickedimage) {
    var f = clickedimage.charAt(clickedimage.length - 1);
    var removeimage = $('#display div');
    $('#galleryimages').append(removeimage);
    removeimage.remove();
    $('#display div').append($('item'+f));
}​ 
```

编辑：您需要将其包含在`<head>`您的 html 中以使 jQuery 正常工作：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

# android - 状态列表可绘制和禁用状态

> ID：14042866
> 
> 赞同：56
> 
> 时间：2012-12-26T15:51:13.090
> 
> 标签：android, android-layout

我有一个按钮，我希望它在设置时具有不同的背景：

```
android:enabled="false" 
```

这是背景的资源文件：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="false"
          android:drawable="@drawable/bttn_orange_normal" /> <!-- pressed -->
    <item android:state_pressed="true"
          android:drawable="@drawable/bttn_orange_selected" /> <!-- focused -->
    <item android:state_enabled="false" android:drawable="@drawable/bttn_grey_disabled"/>
    <item android:state_enabled="true" android:drawable="@drawable/bttn_orange_normal"/>
</selector> 
```

但是按钮在禁用时仍然具有正常背景。我错过了什么？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-12-26T16:56:05.500

把这一行：

```
<item android:state_enabled="false" android:drawable="@drawable/bttn_grey_disabled"/> 
```

作为标签的**第一项**（它必​​须是第一项，否则它将不起作用） 。`selector`

最后 ：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
            <item android:state_enabled="false" android:drawable="@drawable/bttn_grey_disabled"/>
            <item android:state_pressed="false"
              android:drawable="@drawable/bttn_orange_normal" /> <!-- pressed -->
            <item android:state_pressed="true"
              android:drawable="@drawable/bttn_orange_selected" /> <!-- focused -->
            <item android:state_enabled="true" android:drawable="@drawable/bttn_orange_normal"/> <!-- idle state -->
</selector> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-07-07T01:07:22.773

Vincent Ducastel 的回答是正确的，但它没有描述解决方案**为何**有效。

当 Android 遍历可用项目列表时，它会从上到下遍历列表，在每种情况下评估视图的当前状态是否与为每个项目定义的状态匹配。然后它**选择与条件匹配的第一个项目**并忽略其余项目。

这就是为什么您应该始终在列表底部提供一个默认项，并提供一种显示复杂选择条件的方法。例如，如果您希望在项目被禁用时具有特殊的按下状态，您将定义以下项目：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    ...
    <item android:state_enabled="false" android:state_pressed="false" android:drawable="@drawable/btn_grey_disabled"/>
    <item android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/btn_white_disabled_selected"/>
    ...
</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T22:24:22.933

添加了**活动、默认和禁用**状态的示例

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!--Disable-->
    <item android:drawable="@drawable/ic_button_disable"
        android:state_enabled="false" 
        android:state_pressed="false" />

    <item android:drawable="@drawable/ic_button_disable_touch" 
        android:state_enabled="false" 
        android:state_pressed="true" />

    <!--Default-->
    <item android:drawable="@drawable/ic_button_default"  
        android:state_pressed="false"    
        android:state_selected="false" />

    <item android:drawable="@drawable/ic_button_default_touch" 
        android:state_pressed="true" 
        android:state_selected="false"  />

    <!--Active-->
    <item android:drawable="@drawable/ic_button_active" 
        android:state_enabled="true" 
        android:state_selected="true" 
        android:state_pressed="false" />

    <item android:drawable="@drawable/ic_button_active_touch" 
        android:state_enabled="true" 
        android:state_pressed="true" 
        android:state_selected="true" />
</selector> 
```

# ruby - 计算围绕中心的等距 GPS 点

> ID：14042874
> 
> 赞同：1
> 
> 时间：2012-12-26T15:51:54.423
> 
> 标签：ruby, gps, gem, geometry, coordinates

我对一些 GPS 计算有疑问。我的问题如下：

我有一个特定的点 P，我想计算 P 周围的 N 个点。

这是算法：

```
P = (x, y) // latitude, longitude
N = 8
angle_size = 360/N

points = []

for i in 1..N
    points.push compute_100meter(P, angle_size*i)
end 
```

在这个例子中，我试图计算距离 P 100 米内的 8 个等距点。

有谁知道允许我这样做的*红宝石宝石？*我的问题是写内容`compute_100meter`

**编辑：**

我必须考虑地球曲率并以度数（纬度，经度）获取点坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:45:35.543

只要半径足够小（应该是 100 米，除非你就在北极或南极旁边），一个简单的线性近似应该足够好：

```
def perimeter_point(lat, lon, angle, radius)
    # convert angle from degrees to radians
    angle *= Math::PI / 180
    # convert meters to degrees approximately, assuming spherical Earth
    radius /= 6371000 * Math::PI / 180
    # calculate relative length of the circle of longitude compared to equator
    scale = Math.cos( lat * Math::PI / 180 );
    # add offsets to longitude and latitude and return them
    # (I'm assuming that angle = 0 means due east)
    lat += radius * Math.sin(angle)
    lon += radius * Math.cos(angle) / scale
    return lat, lon
end 
```

请注意，如果您的中心点在 180 度子午线附近，这可能会返回低于 -180 或高于 +180 的经度。如果这是一个问题，请检查它并根据需要进行标准化。（如果中心点在北极或南极附近，则±90 范围之外的输出纬度在技术上也是可行的，但无论如何我使用的近似值在两极附近都会失效。）

# perl - 在 Windows XP 上安装 Text::Aspell

> ID：14042888
> 
> 赞同：0
> 
> 时间：2012-12-26T15:53:19.660
> 
> 标签：perl, spell-checking, aspell

[我已经从http://aspell.net/win32/](http://aspell.net/win32/)安装了 Aspell-0-50-3-3-Setup.exe 和字典 Aspell-en- 0.50-2-3.exe我已经在我的环境变量 PATH : C:\Program Files\Aspell\bin 但我仍然无法安装 Text::Aspell。我的 perl 版本是 ActivePerl 5.16.1 Build 1601。这些是我得到的错误消息：

```
 Checking if your kit is complete...
    Looks good
    Note (probably harmless): No library found for -laspell
    Aspell.xs:4:20: aspell.h: No such file or directory
    Aspell.xs:9: error: syntax error before "AspellCanHaveError"
    Aspell.xs:9: warning: no semicolon at end of struct or union
    Aspell.xs:10: warning: data definition has no type or storage class
    Aspell.xs:11: error: syntax error before '*' token
    Aspell.xs:11: warning: data definition has no type or storage class
    Aspell.xs:14: error: syntax error before '}' token
    Aspell.xs:14: warning: data definition has no type or storage class
    Aspell.xs:17: error: syntax error before '*' token
    Aspell.xs: In function `_create_speller':

    Writing Makefile for Text::Aspell
    Writing MYMETA.yml and MYMETA.json
    cp Aspell.pm blib\lib\Text\Aspell.pm
    C:\Perl\bin\perl.exe C:\Perl\lib\ExtUtils\xsubpp -noprototypes -typemap
    C:\Perl\lib\ExtUtils\typemap -typemap typemap  Aspell.xs > Aspell.xsc && 
    C:\Perl\bin\perl.exe -MExtUtils::Command -e mv -- Aspell.xsc Aspell.c 
    C:\Perl\site\bin\gcc.exe -c -DNDEBUG -DWIN32 -D_CONSOLE -DNO_STRICT 
    DPERL_TEXTMODE_SCRIPTS -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -DUSE_PERLIO -D_USE_32BIT_TIME_T -DHASATTRIBUTE -fno-strict-
    aliasing -mms-bitfields -O2                        -DVERSION=\"0.09\"    -
    DXS_VERSION=\"0.09\"  "-IC:\Perl\lib\CORE"   Aspell.c
    [32m  HANK/Text-Aspell-0.09.tar.gz[0m
    [31m  C:\Perl\site\bin\dmake.exe -- NOT OK[0m
    [32mRunning make test 
    [32m  Can't test without successful make
    [32mRunning make install Make had returned bad status, install seems impossible
    [32mFailed during this command:
    HANK/Text-Aspell-0.09.tar.gz 
    : make NO
    [32m[0m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:29:07.640

Your problem is `Note (probably harmless): No library found for -laspell`

The solution from [http://cpansearch.perl.org/src/HANK/Text-Aspell-0.09/README](http://cpansearch.perl.org/src/HANK/Text-Aspell-0.09/README) is to tell Makefile.PL where to find libaspell

```
perl Makefile.PL CCFLAGS=-I$HOME/local/include     LIBS="-L$HOME/local/lib -laspell" 
```

You can read about [CCFLAGS](http://search.cpan.org/perldoc/ExtUtils%3a%3aMakeMaker#CCFLAGS)/[LIBS](http://search.cpan.org/perldoc/ExtUtils%3a%3aMakeMaker#LIBS) in [ExtUtils::MakeMaker](http://search.cpan.org/perldoc/ExtUtils%3a%3aMakeMaker) and probably some tutorials too :)

# android - Android：编辑文本中的“工作”图像

> ID：14042895
> 
> 赞同：1
> 
> 时间：2012-12-26T15:54:06.520
> 
> 标签：android, android-edittext

我想在edittext中有一个图像，这将在用户键入时通过动画改变它的可绘制性，如下所示：

![在此处输入图像描述](../Images/a2ec345392ae045bcf423202b49059f5.png)

![在此处输入图像描述](../Images/f8dd45d7ec8b7436b69e79f33a0ae3ab.png)

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:00:21.320

你只需要设置**CompoundDrawables** {Right | 左 | 顶部 | xml 中的底部} 属性

```
<EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/searchedTxt"
        android:width="200dp"
        android:layout_alignParentRight="true"
        android:drawableLeftt="@android:drawable/ic_menu_search"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:56:44.870

放置`EditText`并`ImageView`在`RelativeLayout`更改文本时更改图像

**编辑：**添加示例代码

1) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">
    <EditText
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:text="New EditText"
            android:id="@+id/editText"/>
    <ImageView
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:id="@+id/imageView"
            android:background="@drawable/first_image"
            />
</RelativeLayout> 
```

2) MyActivity 类

```
public class MyActivity extends Activity {

    private EditText editText;
    private ImageView image;
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initializeFormViews();
        initializeFormEvents();
    }

    public void initializeFormViews(){
        editText = (EditText) findViewById(R.id.editText);
        image = (ImageView) findViewById(R.id.imageView);
    }

    public void initializeFormEvents(){

        editText.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
            }

            @Override
            public void afterTextChanged(Editable s) {
                // changes image after editing text in EditText
                image.setBackgroundResource(R.drawable.second_image);
            }
        });

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:19:16.057

请使用下面给出的 xml 代码片段作为主 xml 文件的一部分（负责 UI）：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget665"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="left"
    android:paddingLeft="1dip"
    android:paddingRight="2dip">
        <ImageView
            android:id="@+id/searchImageView"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@android:drawable/ic_search_category_default"
            android:layout_gravity="center_vertical"
            android:paddingTop="2dip"
            android:paddingBottom="2dip">
        </ImageView>
            <EditText
            android:id="@+id/search_edit_text"
            android:layout_width="fill_parent"
            android:layout_height="35dip"
            android:text=""
            android:textSize="18sp"
            android:background="#f5f5dc"
            android:layout_gravity="center_vertical">
        </EditText>
</LinearLayout> 
```

将此内部类放在您的主要活动中

```
public class SearchTextWatcher implements TextWatcher{

    @Override
    public void afterTextChanged(Editable arg0) {

    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {

    }

    @Override
    public void onTextChanged(CharSequence prefix, int start, int before, int count) {

                if(!prefix.equals("")){
                    changeImageToProcessing();
                }else{
                    changeImageToIdle();
                }

    }

} 
```

在 onCreate() 期间从 contentView 中提取 searchBar (EditText) 和 iv (ImageView)，类似于

```
searchBar = (EditText)contentView.findViewById(R.id.customer_search_edit_text);
iv = (ImageView)contentView.findViewById(R.id.searchImageView); 
```

将文本更改监听器附加到搜索栏编辑文本

```
 searchBar.addTextChangedListener(searchTextWatcher); 
```

添加几个帮助方法，他们将负责相应地更改图像

```
 public void changeImageToProcessing(){

        iv.setImageResource(resId);// resid is the id of the working image
    }

public void changeImageToIdle(){

    iv.setImageResource(resId);// resid is the id of the idle image
} 
```

//这些方法是从 SearchTextWatcher 类中的 onTextChange() 调用的

# c - flex：仅在单独编译/链接时未定义对“yywrap”的引用

> ID：14042903
> 
> 赞同：8
> 
> 时间：2012-12-26T15:54:40.470
> 
> 标签：c, flex-lexer

我一直在学习使用 Flex（词法分析器），并且一直在使用以下命令进行编译：

`gcc -lfl -o test lex.yy.c`

一切都很好。但是，我想将它与其他文件链接，所以我单独编译并链接它

`gcc -c lex.yy.c`

其次是

`gcc -lfl -o test lex.yy.o`

但 gcc 告诉我有一个未定义的引用`yywrap()`。那么，这里发生了什么？

我正在使用 Flex 2.5.35、gcc 4.7.2 和 ld 2.22

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-28T12:47:13.837

`-lfl`在末尾而不是开头添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-04T11:51:51.233

使用`gcc lex.yy.c -ll`. 否则它将产生一个未定义的引用`yywrap`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T02:17:30.047

或者，如果您不想使用该库，只需`#define yywrap()`.l 文件中的 1，或提供`yywrap()`返回 1 的方法。

它已记录在案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T13:02:18.217

我的解决方案是：

sudo apt-get install flex

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-24T22:04:07.167

我创建了一个文件 addon.c

```
int yywrap (void )
{
    return 1;
} 
```

并将其添加到目标中。

# c# - ListView与DataTable绑定，删除行后不更新

> ID：14042904
> 
> 赞同：6
> 
> 时间：2012-12-26T15:54:46.300
> 
> 标签：c#, .net, wpf, binding, ado.net

所以基础知识：我有一个带有 ListView 的窗口，它由我的网格的数据上下文填充：

```
mainGrid.SetBinding(Grid.DataContextProperty, 
    new Binding() { 
        Source = new DataView() 
            { Table = SQLHandler.GetHandler[classType.ToString()] } 
    }
); 
```

在xml中：

```
<ListView Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" ItemsSource="{Binding}"> 
```

一切正常，它的人口。正如您在上面看到的，我有一个可以由 Singleton 访问的 SQLHandler 类，并且我可以使用索引器访问我的表。

问题：窗口加载，我正在选择一行，单击编辑按钮，新窗口加载，我在其中获取所选行的详细信息。当我通过这个新窗口删除这一行并关闭它时，主窗口（显示完整数据表的位置）不会相应更新。我知道解决方案应该是什么，但我无法让它发挥作用。（inotifyproperty 将接口更改为 SqlHandler 类、Binding.IndexerName 等。）

这是主要的事情：数据集不在我的 SqlHandler 类中，它在 SqlExecuter 中，我的所有 sqlcommands 都在其中执行。

```
public override DataTable this[string key]
{
    get
    {
        if (sqlExecuter.GetDataSet.Tables.Contains(key)) 
            return sqlExecuter.GetDataSet.Tables[key];
        throw new KeyNotFoundException("The specified key was not found");
    }
} 
```

其中 GetDataSet 是：

```
public DataSet GetDataSet
{
    get { return ds; }
} 
```

我怎样才能使这项工作？当我在另一个窗口中删除一行并关闭该行时，主窗口的列表视图不会自行更新。我唯一的选择是放一个刷新按钮，然后重新绑定 datacontext 属性，然后它当然可以工作，但我的目标是拥有一个“实时”更新系统，毕竟这就是 Binding 的用途。

我尝试过： SqlExecuter 中的 GetDataSet：实现了 inotifypropertychanged 接口，但没有任何改变。而且我不能在 SqlHandler 的索引器上实现 inotifypropertychanged，因为它没有设置器，我总是只是从代码隐藏访问表，我的 sqldataadapter 正在填充它们（填充方法）

ps：我真的不打算创建一个 ObservableCollection，因为我 90% 的代码应该被重写，当我删除一行时，我会清除我的数据集并再次填充它，所以我什至不希望它注意到每一个改变，就在我重新填充我的数据表时，我的列表视图应该知道它..并刷新自己

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T09:00:02.963

I think using a second window as a popup might be the problem here. If you were doing the editing on the same page then you could use a simple

```
ListView1.DataBind() 
```

To refresh the contents of the list at the end of the delete command. Or you could use the IsPostBack method to update the list if the page was bring redrawn rather than reloaded.

You could try calling the page name and then the list view from your other window but I'm not sure if you can perform that kind of command from another window.

Alternatively you could do the editing on a different page, rather than a separate window so when you return to the original page the listview is being redrawn.

Like yourself I'm sure there is a simpler solution to your problem, but unfortunately I don't know it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:04:18.173

您可能需要将绑定模式设置为两种方式：

```
Mode = BindingMode.TwoWay 
```

WPF 出于一些不明显的原因，默认为单向绑定。希望有帮助。我不是特别了解情况，但我已经看到了与 ObservableCollections 的简单数据绑定的问题，并且 TwoWay 绑定修复了它。

# sql - 将会话变量传递给 asp:gridview 的 sqldatasource 选择命令

> ID：14042907
> 
> 赞同：2
> 
> 时间：2012-12-26T15:54:57.503
> 
> 标签：sql, .net, vb.net

我目前在尝试在我的 asp gridview 中获取带有会话变量的选择命令时遇到问题。我一直在看这里和其他网站，并没有真正遇到太多。这必须是一个我还没有遇到过的简单修复。这是我的代码

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ConnectionStrings:mySql_Connection %>"
                    SelectCommand =  "Select [Username], [Name] FROM UserPassword WHERE CustID = '" & session("CustID") & "'>
                </asp:SqlDataSource> 
```

我什至不确定这是否接近正确。我明白了`the server tag is not well formed`。或无效的语法。有人可以展示如何做到这一点。我一直坚持这一点，它真的让我烦恼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:31:38.040

您可以使用会话参数

```
<asp:SqlDataSource ConnectionString="<%$ConnectionStrings:mySql_Connection %>"
                SelectCommand =  "Select [Username], [Name] FROM UserPassword WHERE CustID     = @CustID>
 <SelectParameters>
  <asp:SessionParameter Name="CustID" SessionField="CustID"
   DefaultValue="0" />

 </SelectParameters>
</asp:SqlDataSource> 
```

您也可以参考以下链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sessionparameter.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sessionparameter.aspx)

# ios - 有没有办法在最新的 XCode 上为 iOS 4.3 到 iOS 6 开发和测试 iOS 应用程序？

> ID：14042908
> 
> 赞同：1
> 
> 时间：2012-12-26T15:54:59.467
> 
> 标签：ios, xcode, ios4, xcode4.5

我正在开始开发 iOS 应用程序。我的应用程序的主要目标之一是支持尽可能多的设备，所以经过一些研究后，我发现我的应用程序需要在 iOS 4.3 及更高版本上得到支持。我有 OSX Mountain Lion 和 XCode 4.5，其中预装了 iOS 6.0 SDK 和模拟器。

我已经从 XCode 首选项下载了 iOS 5 模拟器，但没有下载 iOS 4 模拟器的选项。是否有任何解决方法可以让 iOS 4 模拟器在我的 Mountain Lion 上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:58:08.120

打开方案菜单（在运行和停止按钮旁边），在模拟器/设备列表下，会有一个选项，“更多模拟器...”。您可以在那里一直下载到 4.3。但是，在模拟器上进行测试并不能替代在设备上进行测试，最好是安装 4.3 的 iPhone 或 iPod touch 进​​行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T18:41:43.563

你可以试试这个：

1.  下载 4.5.x 之前版本的 XCode
2.  挂载并打开磁盘映像 [.dmg]
3.  从 Finder 菜单栏中选择“转到文件夹...”命令并输入路径“/Volumes/Xcode and iOS SDK/Packages/”
4.  双击**iPhoneSimulatorSDKx_x.pkg** [其中“x_x”是 iOS 模拟器的版本]
5.  单击目标磁盘，然后单击“选择文件夹...”按钮
6.  选择您的“开发者”文件夹
7.  启动 [或重启] XCode

这样，您将用`iOS simulator`以前的替换 XCode 4.5.x 中的。我不知道这是否可行，因为在 OSX 10.8 Mountain Lion 上只有 iOS Simulator 5.0+ 可用。如果您确实需要使用 iOS 4.3 [及之前的版本] 测试您的应用程序，您可以做的最好的事情是将 OSX 降级到 10.7 并安装 XCode 4.5.x [或 4.4.x]。顺便说一句，我认为使用 iOS 模拟器 5.0+ 测试您的应用程序就可以了。

# c++ - 读取外部文件

> ID：14042909
> 
> 赞同：1
> 
> 时间：2012-12-26T15:54:59.533
> 
> 标签：c++, c

我正在做 cpu 调度程序模拟器，我需要它来读取外部文件。我以 txt 格式创建了文件，并将其保存到桌面，该文件包含格式中的数字 -

```
12;3;5
3;4;2
3;4;5 
```

我将文件保存为桌面上的 input.txt。我尝试使用此代码阅读它

```
FILE *fa;
fa= fopen("input.txt","r");
   if ((fa = fopen("input.txt", "r")) == NULL)
{
    printf("input.txt file not found\n");
    getchar();
    return 0;
}
while (fgets(line,1024, fa) != NULL)
{        
    e=k+1;
    sscanf(line,"%d;%d;%d\n",&num[0],&num[1],&num[2]);
    a[i][0]=num[0];
    printf("%d",&a[i][0]);
    a[i][1]=num[1];
    a[i][2]=num[2];
    a[i][3]=e;
    i++;
    k++;
  }
fclose(fa); 
```

这段代码给了我一个输出，显示 input.txt not found，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:58:40.463

你打开它两次。此外，您可能使用错误的工作目录运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:59:00.713

当您说`fopen("input.txt","r");`时，库将假定文件的特定路径，它将假定位于当前工作目录中，通常与可执行文件本身（在 Windows/visual C++ 中）相同的文件夹或 exe 所在的位置推出（大多数基于 unix 的系统）。

所以除非可执行文件在桌面上（或者桌面是当前工作目录），否则这就是失败的原因。解决此问题的两种方法是以某种方式使路径成为绝对路径，或者将文件移动到可执行文件的预期工作目录。

# javascript - 下推所有元素，包括使用 position:fixed 的元素

> ID：14042911
> 
> 赞同：3
> 
> 时间：2012-12-26T15:55:00.893
> 
> 标签：javascript, jquery, html, css, css-position

我正在尝试为我的站点网络构建固定的 html 工具栏。我正在使用css的位置：固定和顶部：0并使用body：margin-top推送所有元素。

问题是当特定站点已经有一个固定到顶部的元素时。

考虑到我不知道是否有一个或它的 id/class/top 值是什么，有没有办法（使用 css 或 js）将所有元素（包括固定元素）下推给定的像素值。

例如，如果一个站点正在使用 HelloBar (www.hellobar.com)，我需要我的栏来推动它，并且所有页面内容都向下而不是漂浮在上面。

希望我的问题足够清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:01:52.850

您需要使用 jquery 获取工具栏的高度。然后给包含内容的容器一个 margin-top = 工具栏的高度。

```
var toolbar_height = $('.toolbar').height();

$('.container').css({'margin-top':toolbar_height}); 
```

# c++ - 无论是否初始化，使用 sizeof(p[0]) 真的无害吗？

> ID：14042913
> 
> 赞同：4
> 
> 时间：2012-12-26T15:55:12.000
> 
> 标签：c++, sizeof

我在和我的一个朋友争论，如果我们定义了一个数组/指针：

```
sometype * p; 
```

如果我们想知道类型的大小，他说应该使用：

```
sizeof(sometype) 
```

我说也可以使用：

```
sizeof(p[0]), 
```

它应该是一样的。他不同意，他的观点是如果`p`没有初始化，那么这种用法`p[0]`可能会导致问题。

但据我所知，只有当我们改变或依赖 的值时`p[0]`，这才会有害。由于我们不改变`p[0]`也不使用`p[0]`'s 的价值，这是完全明智的。

既然无法说服对方，谁能把这个概念说清楚。

我知道这个问题没有用，几乎所有的开发者都会使用 sizeof(sometype)，包括我:)。但是这个问题很有趣，我真的很想知道 sizeof(p[0]) 是否会有害。

==================================
让我稍微扩展一下这个问题。如果我确实使用了一些不相关的值（或被认为是随机的或其他的）。我可以一直使用`p[0]`来获得价值吗？

为了让问题更清楚，如果我不更改未初始化指针的值，只使用它指向的值，我是否可以始终获得一个值而不会造成问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T15:58:11.147

to 的参数`sizeof`是一个*未计算的操作数*，因此指针取消引用等不必引用有效内存。它纯粹基于类型信息。

（作为推论，`sizeof *p`它不是多态的，它只使用静态类型。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T15:57:00.107

`sizeof`[在编译时进行评估，](https://stackoverflow.com/q/2615203/298479)因此无论是否初始化内存都无关紧要，因为这是运行时的事情。

所以`sizeof p[0]`or - 我认为更好，因为它看起来不像数组 -`sizeof *p`是避免在使用`sizeof`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-26T16:00:11.863

在 C++ 语言中，参数 of`sizeof`永远不会被计算，这意味着参数表达式中使用的变量是否保持有效值是完全不相关的。只有表达式的静态类型才`sizeof`重要，它是在编译时确定的。

此外，实际上最好使用表达式（而不是类型名称）作为参数，`sizeof`以使代码更加独立于类型。

在 C 中，在某些情况下（可变长度数组）可能会计算参数表达式，但在 C++ 中则不会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T15:57:12.993

sizeof() 由编译器评估，因此未初始化的变量不是问题。

# virtualization - 在 linux fc14 上启动 G-WAN 3.12.26 32 位时出现分段错误

> ID：14042917
> 
> 赞同：0
> 
> 时间：2012-12-26T15:55:33.557
> 
> 标签：virtualization, out-of-memory, g-wan, hypervisor

我有一个带有 2.6.35.13 自定义编译内核的 fc14 32 位系统。当我尝试启动 G-wan 时，出现“分段错误”。我没有做任何更改，只是从 g-wan 站点下载并解压缩文件。

在日志文件中，我有：“[Wed Dec 26 16:39:04 2012 GMT] Available network interfaces (16)”这是不正确的，在机器上我有大约 1k 个接口，主要是 ppp 接口。

我认为崩溃与检测接口/IP地址有关，因为在上述行之后的日志中，我有 16 行 ip 属于 fc14 机器，之后大约 1k 行带有“0.0.0.0”或“随机”ip地址。

我在 fc16 上运行 gwan 3.3.7 64 位，具有大约相同数量的接口并且没有问题，它仍然报告错误数量的接口（16）但它没有崩溃并且在日志文件中我只有 16带有属于 fc16 机器的 IP 地址的行。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:36:02.183

> 我有大约 1k 个接口，主要是 ppp 接口

只有前 16 个将被列出，因为此信息与更多接口无关（目的是让用户找到侦听尝试失败的原因）。

这可能是长长的 1K 列表，在分配器从头开始重新设计后，许多事情在内部发生了变化。感谢您报告错误。

我还确认说维护脚本崩溃的评论。感谢那。

请注意，带宽整形将被修改以避免较新的 Linux 系统调用，因此 GLIBC 2.7 要求将被取消。

> ...使用自定义编译内核

作为一般规则，在提出问题之前，请再次检查 Debian 6.x 等标准系统：已知系统有足够的空间来解决问题 - 无需添加自定义系统组件。

感谢大家这两天收到的关于新版本的大量电子邮件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:44:24.827

我有一个类似的“分段错误”错误；每当我使用 9+GB 的 RAM 时，都会发生这种情况。8GB的一模一样的机器运行正常，10GB的甚至不报错，只是返回提示。

有趣的行为...您是否尝试过调整 RAM 的数量以查看会发生什么？

（在 Debian 6.x 上运行 G-WAN 4.1.25）

# ruby-on-rails - Ruby on Rails + jQuery Mobile + phonegap - 所有服务器端 HTML 渲染 - 可以吗？

> ID：14042919
> 
> 赞同：2
> 
> 时间：2012-12-26T15:55:49.103
> 
> 标签：ruby-on-rails, cordova, jquery-mobile, server-side

为了能够在阅读本文后使用 ROR3 Jquery Mobile 和 phonegap 创建一个丰富的应用程序 - [http://fuelyourcoding.com/getting-started-with-jquery-mobile-rails-3/](http://fuelyourcoding.com/getting-started-with-jquery-mobile-rails-3/)

我想知道是否可以在 jquery mobile 处理所有漂亮的转换时在服务器端呈现所有应用程序内容？

可以作为 phonegap 应用程序工作吗？（考虑到根本没有使用 JSON）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:37:30.897

是的，您可以将 ROR 与 jQM 一起使用，没有问题。jQM 将仅用于处理 HTML GUI 重新设置样式。但是你不会在关闭 ajax 的情况下进行转换。

再说一遍，这不应该让您担心，因为过渡不适用于较旧的 Android 平台。即使是 4+ 版本也有一些问题。

是的，这个应用程序可以与 phonegap 一起使用，正如我之前所说的，只是没有过渡。

**编辑 ：**

如果您仍然想使用 ajax（可以这样做），您只会遇到表单提交的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T22:16:39.333

它肯定会起作用，证明是我使用 Phonegap 导出的示例*rails* */* ember.js*应用*程序。它带有令牌认证 (ember-auth) + OAuth (Google, LinkedIn,..) 和*设计*。

 **在我的基础 App 项目的 devel 分支中查看它：[https ://github.com/joscas/base_app/tree/devel](https://github.com/joscas/base_app/tree/devel)

Life deploy：[https](https://starter-app-staging.herokuapp.com) ://starter-app-staging.herokuapp.com （桌面版）

它使用我创建的 gem ( [phonegap-rails ) 来导出资产、修复路径等。](https://github.com/joscas/phonegap-rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T16:30:53.893

我认为您实际上可以在服务器端渲染所有内容并使其仍然有效。这就是 basecamp 使用 turbolink 的方式，以及我们正在尝试的方式。GoNative.io 为您处理这一切，但您也可以在 phonegap 中创建一个网页，该网页仅打开您网站的外部 URL（用户无法分辨）。我在他们的文档上没有看到这一点，但我们已经做到了并且它有效。文件上传和 UI 存在一些可以解决的问题，但 GoNative.io 声称在处理这些问题时会为您完成所有工作。我们最初使用 PhoneGap 来完成我们的工作，这可能会奏效，但最终切换到了 GoNative。使用这种方法进入苹果商店可能会有问题，但我们乐观地认为我们可以进入（GoNative.io 声称没有问题）**

# lotus-notes - Lotus Notes 获取特定的视图列值

> ID：14042922
> 
> 赞同：1
> 
> 时间：2012-12-26T15:56:08.783
> 
> 标签：lotus-notes

我创建了一个视图，其中第一列可以是表单上三个不同名称中的任何一个。我想让代理浏览视图中的每个文档，并为视图中的每个人创建一封电子邮件，其中包含与该人有关的文档中的信息。每个人可以是表单上三个姓名字段中的任何一个，但他们只能在表单上出现一次，因此如果一个人有 5 个文档，则姓名 a 可能有 3 个，姓名 b 中可能有 1 个，姓名中可能有 1 个。名字 c.

当我尝试获取文档第一列中的值时，我的问题出现了。由于获取第一个文档只会让我得到一个包含 3 个名称的文档，因此我需要知道视图中的列中的名称。因为当我到达其他两个字段中的人员时，我将再次处理此文档，但是我必须按字母顺序执行此操作，并且我必须为一个人完成所有文档，然后才能移动到视图中的下一个人。

这是可以使用此视图完成的事情，还是我必须对每个名称进行搜索并以这种方式获取每个人的文档。我认为有一种简单的方法可以简单地获取视图列值，但是对于我这里的示例，我不确定它是如何工作的。或者这是非常简单的事情，我只是脑抽筋。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:25:20.613

如果我没听错的话，您应该能够使用 NotesView 的`AllEntries`属性遍历视图条目而不是文档。在每个条目（即 NotesViewEntry 对象）中都有一个列值属性，因此您可以获得为该特定条目显示的特定列值。

```
Dim session As New NotesSession
Dim db As NotesDatabase
Dim view As NotesView
Dim entry As NotesViewEntry

Dim vc As NotesViewEntryCollection
Dim doc As NotesDocument
Set db = session.CurrentDatabase
Set view = db.getView("My View")
Set vc = view.AllEntries

Set entry = vc.GetFirstEntry()
While Not (entry Is Nothing)

    *** Process columns from entry here ***

    Set entry = vc.GetNextEntry()
Wend 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:58:11.790

你可以使第一列的公式像这样

```
(fieldA +"^A") : (fieldB  +"^B") : (fieldC  + "^C') 
```

添加带有标量的列表会将标量附加到列表的每个元素，因此列中的每个名称都将使用原始字段的名称进行标记。你应该得到这样的结果：

```
Adam Abel^A
Adam Abel^A
Adam Abel^C
Bob Baker^B
Carl Cook^A
Carl Cook^B
David Day^B
David Day^C
David Day^C 
```

然后在遍历列条目时将名称从字段 id 中拆分出来就很简单了。

# ace-editor - 没有在 ace 编辑器上触发 keydown 事件

> ID：14042926
> 
> 赞同：2
> 
> 时间：2012-12-26T15:56:20.427
> 
> 标签：ace-editor

ace 编辑器可防止触发 keydown 事件。我认为它`preventDefault`。

如何在执行编辑器事件之前删除此预防或绑定到 keydown 事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T09:16:12.503

ace 仅停止它已经处理的事件，您可以使用捕获事件侦听器 (editor.container.addEventListener("keydown", handler, true)) 或使用 ace 的命令处理程序

更新：仅阻止 ace 命令有时捕获事件处理程序会起作用，但有时 ace hashHandler 比大切换键码更好

```
HashHandler = require("ace/keyboard/hash_handler").HashHandler
var turn = 0
var h = new HashHandler([{
    bindKey: "Up",
    descr: "Block cursor movement smetimes",
    exec: function(ed){
        turn++
        if (turn % 2)
            return false // allow other ace commands to handle event
    }
}])
editor.keyBinding.addKeyboardHandler(h)
// editor.keyBinding.removeKeyboardHandler(h) 
```

或更紧凑的形式

```
var h = new HashHandler()
h.bindKeys({"Up": function(ed){...}}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T08:41:19.943

我还希望能够选择性地过滤光标按键（并在弹出窗口中使用它们而不是它）。我能够使用以下代码注入此功能：

```
editor.keyBinding.origOnCommandKey = editor.keyBinding.onCommandKey;
editor.keyBinding.onCommandKey = function(e, hashId, keyCode) {
    if (...) { 
        this.origOnCommandKey(e, hashId, keyCode);
    }
} 
```

keyCode 38 代表光标向上，keyCode 40 代表向下，13 代表回车。如果不调用原始函数，Ace 将看不到此键按下。不幸的是，Ace 仍然使用返回键。

这可以通过类似的解决方案来防止：

```
editor.keyBinding.origOnTextInput = editor.keyBinding.onTextInput;
editor.keyBinding.onTextInput = function(text) {
    if (...) {
        this.origOnTextInput(text);
    }
} 
```

在这种情况下，文本是换行符。

# objective-c - 对 JSON 对象进行排序

> ID：14042930
> 
> 赞同：3
> 
> 时间：2012-12-26T15:56:24.730
> 
> 标签：objective-c, json, ios5, sorting, nsmutablearray

我有 3 个`MutableArray`，但只想使用其中一个，在 tableView 中对它们进行排序。

```
jsonArray = [[NSMutableArray alloc] init]; //NAME
jsonStations = [[NSMutableArray alloc] init]; //URL
jsonSubtitle = [[NSMutableArray alloc] init]; //TABLEVIEW CELL SUBTITLE 
```

我想使用 对`jsonArray`我的 tableView 中的所有 json 数据进行排序。

以下是我获取 json 数据的方法：

```
 NSURL *url = [NSURL URLWithString:@"http://www.xxxxx.com/xxx.json"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    connection = [NSURLConnection connectionWithRequest:request delegate:self];
    if(connection)
    {
        jsonData = [[NSMutableData alloc] init];
    }

...

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
    NSArray *arrayOfItems = [allDataDictionary objectForKey:@"items"];

    for (NSDictionary *diction in arrayOfItems) {
        NSString *titles = [diction objectForKey:@"title"];
        NSString *subtitles = [diction objectForKey:@"subtitle"];
        NSString *station = [diction objectForKey:@"url"];

        [jsonArray addObject:titles];
        [jsonSubtitle addObject:subtitles];
        [jsonStations addObject:station];

        [self.tableview reloadData];

    }    
} 
```

Sooo 我如何对我的 jsonArray 进行`titles`排序并显示然后在 tableView 中排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:08:28.323

这是您可以对其进行排序的方式：

```
 NSArray *sortedArray;
sortedArray = [jsonArray sortedArrayUsingComparator:^NSComparisonResult(NSString *title1, NSString *title2)
             {
                 if ([title1 compare:title2] > 0)
                     return NSOrderedAscending;
                 else
                     return NSOrderedDescending;
             }]; 
[jsonArray setArray:sortedArray]; 
```

# web-services - 谷歌分析数据，显示实时数据，但标准报告什么也没显示

> ID：14042932
> 
> 赞同：0
> 
> 时间：2012-12-26T15:56:32.587
> 
> 标签：web-services, google-analytics

尝试使用 GA 记录访问某些 Web 服务的流量。代码构造一个 gif url 并打开到它的连接。

在测试时，我可以打开 GA 并查看实时报告的流量。然而，标准报告没有显示任何内容。我已经等了几天，以防它“神奇地”出现，但没有这样的运气。我没有对此配置文件起作用的过滤器。

我认为任何实时请求对于标准报告来说都足够有效，但是除了过滤器之外，两者之间还有哪些其他差异会导致这种差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T05:58:35.960

导航到管理>跟踪信息并打开您网站的子域。

# c# - 编译器在视图中找不到@model MembershipUserCollection - Asp Net MVC 4 Application

> ID：14042933
> 
> 赞同：1
> 
> 时间：2012-12-26T15:56:43.887
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

为什么我无法使用

```
@model MembershipUserCollection 
```

也不

```
@model System.Web.Security.MembershipUserCollection 
```

在我看来。

编译器抱怨说`MembershipUserCollection`没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:07:06.163

你错过了`using`声明

```
@using System.Web.Security
@model MembershipUserCollection

your html code 
```

# java - 仅在第一个周期中检查条件，在其余周期中执行一些代码

> ID：14042935
> 
> 赞同：3
> 
> 时间：2012-12-26T15:56:45.590
> 
> 标签：java, for-loop, conditional-statements

有没有办法仅在 for 循环的第一个循环中检查条件，如果条件被评估为真，则在其余循环中执行一些代码？我有一个 for 循环和两个基本条件，只需要在第一个循环中检查。如果其中任何一个为真，则在所有其他周期中正在执行一段或另一段代码。我无法在其他周期中检查这些条件，但第一个，因为两者都是正确的，这不是我需要的（（

```
 public void someMethod() {
    int index;
    for (int j = 0; j < 10; j++) {
        if (j == 0 && cond1 == true && cond2 == true) {
            methodXForTheFirstCycle();// this method will change cond2
            methodXForTheRestCycles();// not the right place to put it
        } else if (j == 0 && cond1 == true) {// and cond2 == false
            methodYForTheFirstCycle();// this method will change cond2
            methodYForTheRestCycles();// not the right place to put it
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:27:24.573

我建议你稍微松开你的循环。

```
if (cond1)
   // j == 0
   if (cond2) 
        methodXForTheFirstCycle();
   else 
        methodYForTheFirstCycle();
   cond2 = !cond2;

   for (int j = 1; j < 10; j++) {
     if (cond2)
        methodXForTheRestCycle();
     else 
        methodYForTheRestCycle();
     cond2 = !cond2;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:10:06.627

我有点困惑，因为如果你的代码什么都不做`j!=0`- 那么为什么要循环呢？

我会把循环分开。拉出`i==0`哪个调用第一个方法，然后循环for`i=1 .. 9`

这就是我认为您的描述的意思：

```
public void someMethod() {
  int index;
  if (cond1) {
    if (cond2) {
      methodXForTheFirstCycle();
      for (int j = 1; j < 10; j++) {
        methodXForTheRestCycles();
      }
    } else {
      methodYForTheFirstCycle();
      for (int j = 1; j < 10; j++) {
        methodYForTheRestCycles();   
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:03:48.237

如果我正确理解您想要什么，您可以做的是检查这两个条件一次，如果它们失败则中断。如果它们成功，则将标志设置为 true，以便它绕过后续迭代中的检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:21:14.660

尝试使用新标志（布尔值），也不需要将布尔值比较为真，如下所示：

```
public void someMethod() {
  int index;
  boolean firstConditionSuccess = false;
  for (int j = 0; j < 10; j++) {
    if (j == 0 && cond1 && cond2) {
        methodXForTheFirstCycle();
        firstConditionSuccess = true;
    } else if (j == 0 && cond1) {// and cond2 == false
        methodYForTheFirstCycle();
        firstConditionSuccess = true;
    }
    if(firstConditionSuccess ){
       methodYForTheRestCycles();
    }
 }
} 
```

# html - 移除 HTML 画布边框

> ID：14042938
> 
> 赞同：1
> 
> 时间：2012-12-26T15:57:00.810
> 
> 标签：html, css

我正在使用交互式动画自定义我的主页[http://geotheory.co.uk/ ，但无法让它在页面中看起来更不显眼。](http://geotheory.co.uk/)我想删除动画画布对象的边框，因为这会创建不必要的滚动条。我尝试了各种样式选项，例如`border`但`padding`没有任何运气。动画是一个[处理脚本](http://geotheory.co.uk/rectangles.pde)，然后被[翻译](http://geotheory.co.uk/processing-1.4.1.min.js)成 javascript。index.html 内容如下：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>geotheory.co.uk</title>
    <style>
        canvas:focus{outline:none;}
    </style>

</head>
<body  id="home" bgcolor="blue">
    <script src="processing-1.4.1.min.js"></script>
    <div id="canvasContainer">
    <canvas data-processing-sources="rectangles.pde"></canvas>
    </div>
</body> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:59:03.033

我猜你还没有重置浏览器默认样式...所以你需要重置默认样式..使用这个

```
* {
   margin: 0;
   padding: 0;
} 
```

解释：浏览器为某些元素提供填充，边距，所以为了重置它们，你需要使用我告诉你的样式，否则你也可以使用 CSS 重置

也`display: block;`用于`<canvas>`（如 Kolink 所说）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T15:59:00.727

添加`margin: 0;`到`body`您的 css`display: block;`中的标签，以及您的 css 中的`canvas`标签。

**例子：**

```
canvas {
    display:block;
}

body {
    margin:0;
} 
```

# xml - xpath where 子句

> ID：14042942
> 
> 赞同：8
> 
> 时间：2012-12-26T15:57:21.043
> 
> 标签：xml, xpath

我正在尝试在以下 xml 文件上构建 xpath 查询：

```
<recordGroup>
    <records>
        <year>1985</year>   
        <album>
            <name> album1 </name>
            <artist>artist1 </artist>
            <label> labelA</label>
        </album>    
        <album>
            <name>album2 </name>
            <artist>artist2 </artist>
            <label> labelB</label>
        </album>    
    </records>      
    <records>
        <year>1986</year>   
        <album>
            <name>album3 </name>
            <artist> artist1 </artist>
            <label>labelC</label>
        </album>    
        <album>
            <name>album4 </name>
            <artist>artist2</artist>
            <label> labelA</label>
        </album>    
    </records>

</recordGroup> 
```

我想检索以下查询：选择标签 = 'LabelA' 的所有记录（艺术家、姓名和年份）。

XML 结构可能不适合显示此数据，但我从另一个软件获取此流，所以我无法更改它。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T16:26:31.483

这将带回`records`包含标签为***labelA的专辑的完整内容***

```
//records[album/label='labelA'] 
```

* * *

你也可以使用

```
//records[album/label='labelA']/*[self::year or self::album[label='labelA']] 
```

将仅返回与***labelA***匹配的`year`完整内容`album`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:14:26.550

试试这个：

> var = doc(/recordGroup/records[album[@label="LabelA"]]);*

# iphone - 使用 iPhone 向远程客户端发送 HTML

> ID：14042950
> 
> 赞同：1
> 
> 时间：2012-12-26T15:58:12.177
> 
> 标签：iphone, objective-c, ios, cocoa-touch, networking

早上好，

我读完 Beej 的网络编程指南以刷新我对 C 网络概念的记忆。

对于我正在构建的应用程序的下一部分，我希望用户能够使用端口（例如 8080）通过 Web 浏览器连接到他们的 iPhone/iDevice。

因此，出于测试目的，我自己尝试了一下，但遇到了一些意想不到的问题。我将一个端口绑定到内核并等待传入​​连接。为了模拟远程用户，我进入我的网络浏览器并输入 localhost:8080

我在整个应用程序中设置的 NSLog 和 printf() 消息表明我确实连接了，我什至通过显示连接用户的 IP 地址来验证它，但应用程序的客户端没有按预期运行。我在我的服务器代码中向客户端发送 HTML，但没有显示任何内容。这是我到目前为止的代码

```
- (void) start
{

   struct addrinfo hints ,*res;
   struct sockaddr_storage connectionInfo;

   socklen_t connectionSize;
   memset(&hints,0,sizeof(hints));
   hints.ai_family = AF_INET;
   hints.ai_socktype = SOCK_STREAM;
   hints.ai_flags = AI_PASSIVE;
   int status;
   if((status = getaddrinfo(NULL,"8080",&hints,&res) )!= 0)
   {
       NSLog(@"Error inding getaddrinfo..");
       printf("%s",gai_strerror(status));

       return;
   }

   int sockFd = socket(res->ai_family,res->ai_socktype,res->ai_protocol);

   int yes = 1;
   setsockopt(sockFd,SOL_SOCKET,SO_REUSEADDR,&yes,sizeof(int));

   if(sockFd < 0)
   {
       NSLog(@"Error on the socket() call");
       printf("%s",gai_strerror(sockFd));
       freeaddrinfo(res);
       return;
   }

   NSLog(@"Made the socket connection!");

   if(bind(sockFd , res->ai_addr, res->ai_addrlen) < 0)
   {
       NSLog(@"Bind error!");
       freeaddrinfo(res);
       return;

   } 

   if(listen(sockFd,10) < 0)
   {
       NSLog(@"Unable to listen!");
       freeaddrinfo(res);
       return;
   }
   printf("Listening for a connection\n");

   connectionSize = sizeof(connectionInfo);

   int new_fd = accept(sockFd,(struct sockaddr*)&connectionInfo,&connectionSize);

   const char* data = "<html><head><title> hi </title><body><h1> Test</h1> 
     </body></head></html>";
   send(new_fd,data,strlen(data),0);
   if(new_fd < 0)
   {
       NSLog(@"Cannot communicate with the new_fd");
       freeaddrinfo(res);
       printf("%s",gai_strerror(new_fd));
       return;
   }
   NSLog(@"Communication with the new_fd!!!");
   struct sockaddr_in whoAreThey;
   socklen_t size = sizeof(whoAreThey);
   getpeername(new_fd, (struct sockaddr*)&whoAreThey, &size);
   char theirIp[16];
   void* addrPtr = &(whoAreThey.sin_addr);
   inet_ntop(AF_INET, addrPtr, theirIp, sizeof(theirIp));
   NSLog(@"IP Address ");
   printf("%s  Connected\n",theirIp);
   NSLog(@"The data were sent");
   close(sockFd);
   freeaddrinfo(res);

} 
```

在我的 viewDidLoad 方法中，我这样调用 start ：

```
- (void) viewDidLoad
{
      [super viewDidLoad];  
      [self start];

} 
```

为什么客户端（网络浏览器）不显示 HTML？谢谢

注意：我知道数据正在发送，因为使用 telnet localhost 8080 向我提供了 HTML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:04:17.573

您没有阅读浏览器的请求。浏览器可能不会读取您的数据，除非您完全读取它发送给您的数据。

因此，在应该解决您的问题`recv`之前的循环（直到没有来自浏览器的更多数据） 。`send`

编辑：最终解决方案是响应行没有发送到浏览器。违规行是：

```
const char* data = "<html><head><title> hi </title></head><body><h1> Test</h1></body></html>"; 
```

应该是：

```
const char* data = "HTTP/1.0 200 OK\r\n\r\n<html><head><title> hi </title></head><body><h1> Test</h1></body></html>"; 
```

# .htaccess - 将 .htaccess 转换为 Nginx - 当前 re_rewrite 不起作用

> ID：14042951
> 
> 赞同：0
> 
> 时间：2012-12-26T15:58:17.040
> 
> 标签：.htaccess, mod-rewrite, nginx

作为 Nginx 的新手（我真的是一个菜鸟），我刚刚发现我的 .htaccess url 重写不适用于 Nginx。

我在这里找到了一些转换器： [http ://winginx.com/htaccess](http://winginx.com/htaccess)

我尝试在那里转换我的 .htaccess，但是在集成我的 nmy .conf 之后，结果出现了一个奇怪的结果，即在单击它们时提示下载一些 url 等。

也许我误解了如何集成它，但我所做的是在 .conf 中为我的特定站点定义它，即：

/etc/nginx/sites-available/mydomain.conf

我原来的 .htaccess 如下所示：

```
#php_value arg_separator.output &amp;

Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.mydomain.com\.com$
RewriteRule (.*) http://www.mydomain.com/$1 [R=301,L]

RewriteRule ^([^/\.]+)/?$ index.php?cat=$1 [L]
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ picture-normal.php?pic=$2 [L]
#RewriteRule ^([^/\.]+)/([^/\.]+)/(.*)$ ./$3 [L]

#RewriteRule ^[^/]/([0-9]*) test.html?id=$1

#RewriteRule ^set([0-9]*)-Assorted_Images_([0-9\-]*).html set.php?id=$1
#RewriteRule ^Funny-(.*)-([0-9]*).html jokes.php?id=$2
#RewriteRule ^Funny-(.*)-([0-9]*)-page([0-9]*).html jokes.php?id=$2&page=$3
#RewriteRule ^funny-joke-([0-9]*)-(.*).html joke.php?id=$1

#RewriteRule ^(.*).html index.php?p=$1 
```

其中转换为：

```
 # nginx configuration

    location / {
      if ($http_host !~ "^www\.mydomain\.com$"){
        rewrite ^(.*)$ http://www.mydomain.com/$1 redirect;
      }
      rewrite ^/([^/\.]+)/?$ /index.php?cat=$1 break;
      rewrite ^/([^/\.]+)/([^/\.]+)/?$ /picture-normal.php?pic=$2 break;
    } 
```

整个 .conf 看起来像这样： /etc/nginx/sites-available/mydomain.conf ：

```
server
{
    server_name .mydomain.com;

    access_log /var/log/nginx/mydomain.com.access.log;

        error_log /var/log/nginx/mydomain.com.error.log;

    root /var/www/mydomain.com/html;

    index index.php index.html index.htm;

    # use fastcgi for all php files
    location ~ \.php$
    {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    # deny access to apache .htaccess files
    location ~ /\.ht
    {
        deny all;
    }

    # nginx configuration

    location / {
      if ($http_host !~ "^www\.mydomain\.com$"){
        rewrite ^(.*)$ http://www.mydomain.com/$1 redirect;
      }
      rewrite ^/([^/\.]+)/?$ /index.php?cat=$1 break;
      rewrite ^/([^/\.]+)/([^/\.]+)/?$ /picture-normal.php?pic=$2 break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:41:02.327

如果您确实正确设置了 PHP fastcgi，那么这应该对您有用。

```
server {
    listen 80;
    server_name mydomain.com;
    return       301 http://www.mydomain.com$request_uri;
}
server {
    listen 80;
    server_name www.mydomain.com;
    access_log /var/log/nginx/mydomain.com.access.log;
    error_log /var/log/nginx/mydomain.com.error.log;
    root /var/www/mydomain.com/html;
    index index.php index.html index.htm;

    # use fastcgi for all php files
    # Are you sure you have this set up?
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    # deny access to apache .htaccess files
    location ~ /\.ht {
        deny all;
    }

    # nginx configuration
    location / {
        rewrite ^([^/\.]+)/?$ index.php?cat=$1 last;
        rewrite ^([^/\.]+)/([^/\.]+)/?$ picture-normal.php?pic=$2 last;
    }
} 
```

主要区别是在单独的服务器块中执行 mydomain 到 www.mydomain 的重定向，这更有效，并将“breaks”替换为“last”，如果 PHP fastcgi 设置正确，将修复下载问题。

# binary-tree - 带字符串的二叉搜索树

> ID：14042955
> 
> 赞同：3
> 
> 时间：2012-12-26T15:58:30.450
> 
> 标签：binary-tree, binary-search-tree

我有一本书以一种非常糟糕的方式解释了二叉搜索树背后的理论我知道左右孩子的顺序都有一些东西，但我仍然无法理解一个大于另一个前一个级别的想法。

以这个字符串树为例：

![名字的二叉树](../Images/32996da30092a4ad9d92aec3941852b4.png)

（对不起我的油漆）这个例子直接取自我的书:)

有人可以向我解释订单吗？这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T16:01:03.627

在 BST 中，每个节点最多有一个左孩子和一个右孩子。给定节点左侧的每个节点都小于它，而给定节点右侧的每个节点都大于它。这样做的后果之一是你不能有重复的值，所以我不确定这个例子是否正是这本书的内容。

在您的示例中，字符串按字母顺序排列。以根节点为例，Bob 在 Karen 之前，所以 Bob 在 Karen 的左边。汤姆在凯伦之后，所以汤姆在凯伦的右边。从整个树来看，您可以看到 Karen 左侧的每个节点（Bob、Alan、Ellen）按字母顺序排在 Karen 之前，而 Karen 右侧的每个节点（Tom、Wendy）按字母顺序排在 Karen 之后。无论您查看哪个节点，此模式都是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:01:27.497

对于任何节点（例如，Karen - 根），左子树中的*每个*节点（Bob、Alan、Ellen）在字典上都小于 Karen，而右子树中的每个节点（Tom、Wendy）都大于 Karen。

正如@mellamokb 在评论中指出的那样，第二个凯伦不应该在那里。

因此，您可以在 O(log N) 时间内对这棵树进行二分搜索，就像搜索排序数组一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:02:05.553

对于任何节点：

1.  左分支中的所有内容都按字母顺序排列<当前节点。
2.  右分支中的所有内容都按字母顺序排列 > 当前节点。

这提供了几个独特的属性

1.  您可以通过简单地根据您要搜索的键在字典上是 < 还是 > 而不是当前节点来找到任何节点。您将及时到达目的地或不匹配的叶节点（在这种情况下，密钥不存在）`O(Log n)`。
2.  有序遍历按字母顺序给出所有键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:04:23.523

在您的示例中，它们表示每个名称中第一个符号的顺序。

如果您看到，名称顺序从左到右是从 ABC 中的第一个字符到最后一个字符。

此外，Karen 名称的第二次出现有一个特殊情况 - 如果输入相同的数据，此树中的默认行为是“向右移动”，那么 Karen 与 Tom 相比 -> K 是“更小”的 T，所以它离开它。

无论如何，这是一个更好的例子，从中您可以看到二叉树中的订单号：http: [//www.codeproject.com/Articles/4647/A-simple-binary-tree-implementation-with-VB-NET](http://www.codeproject.com/Articles/4647/A-simple-binary-tree-implementation-with-VB-NET)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T16:12:05.820

我认为下面的这篇文章对你理解二叉树的概念很有帮助，它还提供了 C/C++ 和 Java 中的常见代码示例：

[http://cslibrary.stanford.edu/110/BinaryTrees.html](http://cslibrary.stanford.edu/110/BinaryTrees.html)

# javascript - Kendo UI 一个用于多个网格的数据源

> ID：14042958
> 
> 赞同：2
> 
> 时间：2012-12-26T15:58:42.690
> 
> 标签：javascript, jquery, css, kendo-ui

我最近遇到了 Kendo UI 的问题，我有 1 个数据源，它被 3 个网格使用。这一切都有效，但由于某种原因，网格的样式由于缺乏更好的词而被“拆除”。

如果我从网格 A 过滤数据源，网格 A 看起来不错，但网格 B 和 C 看起来像这样（不要介意列中的名字“错误”）：

![网格 B 和 C](../Images/098cff1b96d5fe1235da1b13b7a2d92b.png)

如果我从网格 B 中过滤数据源，现在网格 B 看起来不错，但网格 A 和 C 看起来会“被拆除”。可能是什么问题呢？

网格 A：

```
 $('#grid-a').kendoGrid({
      autoBind: false,
      dataSource: emp_ds,
      toolbar: kendo.template($("#mainlist-template").html()),
      scrollable: true,
      sortable: true,
      selectable: 'row',
      pageable: {
        input: true,
      },
      columns: [{
          field: "id",
          title: "ID",
          width: 100
        },{
          field: "firstname",
          title: "Firstname"
        },{
          field: "lastname",
          title: "Lastname"
        }
      ]
    }); 
```

网格 B：

```
 $('#grid-b').kendoGrid({
      autoBind: false,
      dataSource: emp_ds,
      toolbar: kendo.template($("#emplist-template").html()),
      scrollable: true,
      sortable: true,
      selectable: 'row',
      pageable: {
        input: true,
      },
      columns: [{
          field: "id",
          title: "ID",
          width: 100
        },{
          field: "firstname",
          title: "Firstname"
        },{
          field: "lastname",
          title: "Lastname"
        },{ 
          command: {
            text: 'Select',
            click: function(e) {
              e.preventDefault();

              if(employeeSelectSwitch == 2) {
                return;
              }

              varholder.curUid = $(e.currentTarget).closest("tr").data('uid');

              $('#daterange-dialog').data('kendoWindow').center().open();
            }
          },
          width: 140
      }]
    }); 
```

数据源：

```
emp_ds = new kendo.data.DataSource({
    transport: {
      read: {
        dataType: 'json',
        url: url.employeeList
      }
    },
    schema: {
      model: {
        fields: {
          id: { type: 'number' },
          firstname: { type: 'string' },
          lastname: { type: 'string' },
        }
      }
    },
    pageSize: 15
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:12:59.357

开玩笑地思考为什么需要 3 个网格来显示相同​​的数据，如果您不共享数据源，请使用 3 个数据源。故事看看@Kendo 共享数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T15:56:46.553

如果您真的只想要一个执行一次的数据源，并且您无法共享它，因为每个数据源的过滤方式不同，

您可以在后台填充数据源，当数据返回时，将其拆分到网格中，如下所示：

```
 var dsBackground = new kendo.data.DataSource(myDsConfig);

 dsBackground.read().then(function (e) {
    if (dsBackground.data().length > 0) {
        $(".parallel-grid").each(function() {
            var grid = $(this).data("kendoGrid");
            if (grid != null)
            {
                dsBackground.filter({ field: "foo-type", operator: "eq", value:$(this).data("foo-type")});
                grid.dataSource.data(dsBackground.view());
                grid.dataSource.page(1);
                grid.dataSource.pageSize(10);
            }
        });
    }
}); 
```

这是一个带有一些假数据的工作示例：

[http://dojo.telerik.com/@paltimus/EmUXE/2](http://dojo.telerik.com/@paltimus/EmUXE/2)

# database - 多个实例 Oracle XE

> ID：14042967
> 
> 赞同：0
> 
> 时间：2012-12-26T15:59:11.767
> 
> 标签：database, oracle, virtual-machine, windows-virtual-pc

我有一个运行 Windows 7 的 vm，我用它来测试 IE8 和 IE9 中的 Web 应用程序。另外，我使用这个 vm 来运行 Oracle XE。

我有一个 Java 系统，它会有一些变化。这些更改会修改数据库，但我需要保留旧版本的系统和旧的数据库结构。我正在考虑使用多个 Oracle 实例并应用它的新版本。

问题：

1.  一个 vm Windows 7 平均有 30GB，而我只有 17GB 可用空间。
2.  我使用的是 Oracle XE，所以我不能拥有多个实例。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:41:30.237

> “一个 vm Windows 7 平均有 30GB，而我只有 17GB 可用空间。”

现在是 2012 年，快到 2013 年了。我们可以花一点钱买[32GB 的拇指驱动器](http://www.amazon.co.uk/s/?ie=UTF8&keywords=32gb%20sandisk%20usb&tag=googhydr-21&index=aps&hvadid=14377522436&hvpos=1t1&hvexid=&hvnetw=g&hvrand=19879262771695796002&hvpone=&hvptwo=&hvqmt=b&ref=pd_sl_37gimiwy5x_b)。如果您真的无法获得具有更多磁盘空间的服务器，则只能进行外部化。性能可能有点糟糕，但大概你只是对功能测试感兴趣。

# model - 在 \Phalcon\Mvc\Model 中定义源表的最正确方法是什么？

> ID：14042971
> 
> 赞同：2
> 
> 时间：2012-12-26T15:59:52.183
> 
> 标签：model, phalcon

据我所知，可以通过以下变体定义表名：

1) 通过定义方法 getSource()

```
class Table1 extends \Phalcon\Mvc\Model 
{
    public function getSource()
    {
        return 'table1';
    }
} 
```

2) 通过定义 $_source 属性

```
protected $_source = 'table1'; 
```

3) 哪里需要定义源表？在 initialize() 方法或 __construct() 中，为什么？

4）也许你可以告诉其他可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:29:35.740

最好的方法是`getSource`在你的类中定义方法

```
public function getSource()
{
    return 'table1';
} 
```

但是，您也可以使用`setSource()`in `initialize()`，或`$_source`再次设置 in`initialize()`功能。

```
public function initialize()
{
    $this->setSource('table1');
} 
```

执行所有必要的`initialize()`工作以将模型绑定到数据库并执行其他操作，以便向开发人员公开功能。`__construct()`就像人们在创建对象时所期望的那样调用。

`$_source`只要设置正确，我认为设置的位置没有太大差异。我个人的偏好是设置在`getSource()`. 它使事情保持整洁，我不必跟踪`$_source`变量。

# import - 如何从不同的 osgi 包中导入相同的包？

> ID：14042981
> 
> 赞同：7
> 
> 时间：2012-12-26T16:00:12.973
> 
> 标签：import, split, osgi, bundle

在我的 osgi 项目中，我有 maven-bundle-plugin 以及导入某些路径的说明，例如：org.blah.blah。* 我还有另外两个导出此类包的包。如何配置我的包以从他们两个导入 org.blah.blah.*？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T19:11:19.960

您不能从多个捆绑包中导入给定的包名称。您可以做的是 Require-Bundle 这两个捆绑包，这将使您的捆绑包可以作为拆分包访问这两个包，并具有拆分包和 Require-Bundle 的所有固有问题。请参阅 OSGi Core Release 5 规范中的 3.13.3。

更好的是重构（如果可以的话）以避免拆分包。

# asp.net - 我需要做什么才能连接到使用 RC4 和高级 SSL 密码的 Web 服务？

> ID：14042985
> 
> 赞同：1
> 
> 时间：2012-12-26T16:00:19.400
> 
> 标签：asp.net, vb.net, web-services, ssl, iis-6

我们的网站连接到外部网络服务，[上周突然停止工作](https://stackoverflow.com/q/13993703/302677)。在调查问题后，问题的出现似乎是因为 Web 服务供应商切换到 RC4 和高级 SSL 密码，所以现在我们需要更新我们的 Web 服务器以能够与新的安全设置进行通信。

我不是网络安全方面的专家，所以这对我来说毫无意义。我们的网站代码只是将 Web 服务添加为 Web 参考，并使用所有默认设置进行连接。

```
request = New ExternalWebService.ProcessRequestService
response = request.processCommand(parameters) 
```

这适用于我的 Windows XP 测试环境，但不适用于运行 IIS 6.0 的 Windows Server 2003 R2 Web 服务器。

我需要在 Web 服务器上安装或配置什么才能使用 RC4 和高级密码连接到外部 Web 服务？

该站点当前使用的是 .Net Framework 2.0，但如果需要，我可以升级到 4.0。

# asp.net-mvc - 验证嵌套模型

> ID：14042988
> 
> 赞同：5
> 
> 时间：2012-12-26T16:00:42.583
> 
> 标签：asp.net-mvc, validation, viewmodel, model-binding

我目前有这样的 ViewModel 设置：

```
public class OurViewModel
    {
        public OurViewModel() { }

        [Required]
        public int LeadID { get; set; }
        [Required]
        public int Rate { get; set; }
        [Required]
        public bool DepositRequired { get; set; }
        [RequiredIfOtherPropertyIsTrue("DepositRequired")]
        public BankInfo { get; set; }
    } 
```

...在这种情况下，“RequiredIfOtherPropertyIsTrue”是一个验证器，它的作用与它所说的差不多：检查另一个属性是否为真（在这种情况下，我们的布尔值表示是否需要存款），而 BankInfo 是另一个看起来像这样的模型：

```
public class BankInfo
{
    public enum AccountTypeEnum
    {
        CHECKING,
        SAVINGS
    }

    public BankAccountInfo() { }

    [DisplayName("Account Number")]
    [Required(ErrorMessage = "You must provide a valid bank account number")]
    public String AccountNumber { get; set; }

    [DisplayName("Bank Routing Number")]
    [Required(ErrorMessage = "You must provide a valid routing number")]
    [StringLength(9, MinimumLength = 9, ErrorMessage = "Your bank routing number must be exactly 9 digits")]
    public String ABANumber { get; set; }

    [DisplayName("Bank Account Type")]
    [Required]
    public AccountTypeEnum AccountType { get; set; }

    [DisplayName("Name on Bank Account")]
    [Required(ErrorMessage = "You must provide the name on your bank account")]
    public String AccountName { get; set; }
} 
```

现在，在我们的 ViewModel 中，我们有一个绑定到我们的 DepositRequired 布尔值的复选框，以及一个带有 BankInfo 自定义模板的 EditorFor。提交后，我们无法弄清楚如何禁用 BankInfo 上*的*验证，如果模型不需要它（例如，即使我们不需要 ViewModel 上的属性，它仍然会触发 BankInfo 上的 val ，因此在任何形式的帖子）。是否有任何标准方法来处理 ViewModel 绑定上的嵌套模型验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:51:24.923

不幸的是，通过内置验证，您必须使用

```
ModelState.Remove("BankInfo"); 
```

有条件地忽略该对象上的任何验证失败。

如果使用 FluentValidation 是一个选项，您可以在 OurViewModelValidator 中执行以下操作：

```
RuleFor(ourViewModel=> ourViewModel.BankInfo).SetValidator(new BankInfoValidator()).When(ourViewModel=> ourViewModel.DepositRequired); 
```

然后让 BankInfoValidator 处理该对象的验证。

就像是：

```
public class BankInfoValidator : AbstractValidator<BankInfo>
{
    public BankAccountInfoValidator() 
    {
        RuleFor(bank => bank.AccountName).NotEmpty().WithMessage("You must provide a name for your bank account.");
        RuleFor(bank => bank.AccountNumber).NotEmpty().WithMessage("You must provide an account number for your bank information.");
        RuleFor(bank => bank.AccountType).NotEmpty().WithMessage("You must select what kind of bank account you're entering information for (checking, savings).");
        RuleFor(bank => bank.ABANumber).NotEmpty().WithMessage("You must provide a routing number for your bank information.");
        RuleFor(bank => bank.ABANumber).Must(BeOnlyDigits).WithMessage("Your routing number can only contain numeric characters, 0-9.");
        RuleFor(bank => bank.AccountNumber).Must(BeOnlyDigits).WithMessage("Your account number can only contain numeric characters, 0-9.");
    }

    private bool BeOnlyDigits(string digitString)
    {
        int result;
        return int.TryParse(digitString, out result);
    } 
```

# html - Sitefinity 5.3：如何订购我的 CSS？

> ID：14042991
> 
> 赞同：0
> 
> 时间：2012-12-26T16:01:14.160
> 
> 标签：html, css, visual-studio, sitefinity

我要做的是在我正在构建的模板中包含我自己的 style.css 文件。在 Visual Studio 中，我已经打开`~/Template/App_Themes/Global/cssLoadOrder.xml`并订购了我希望它们在页面中显示的 CSS 文件。但是，当我将模板上传到 Sitefinity 时，没有任何 CSS 文件`cssLoadOrder.xml`出现在生成的 HTML 中的任何位置。

在 5.2 中，来自的 CSS 文件`cssLoadOrder.xml`被附加到`<head>`.

在 5.3 中，唯一附加到 . 末尾的`<head>`是`<link href="/Default2/Telerik.Web.UI.WebResource.axd?...">`，忽略来自`cssLoadOrder.xml`.

如何链接到我自己的 CSS 以及`Reset.css`从加载中删除默认文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:26:57.213

v5.2 - v5.3 之间的功能或流程没有变化，因此添加新主题的正常工作流程仍然有效。

1.  从应用程序的根目录创建一个具有以下文件夹结构的新主题：

    \App_Data\Sitefinity\WebsiteTemplates\MyTheme\App_Themes\MyTheme1

2.  在 MyTheme1 文件夹中，添加 3 个文件夹（全局、样式和图像）。

3.  [使用以下示例cssLoadOrder.xml](https://github.com/jbokkers/SF-BOILERPLATED/blob/master/Boilerplate/App_Themes/Boilerplate/Global/cssLoadOrder.xml)添加一个名为 cssLoadOrder.xml 的文件， 其中 sfnormalize.min.css 和 sfproject.min.css 是您的 css 文件的名称。

4.  登录到 Sitefinity 的后端并转到

    管理>>设置>>高级>>外观>>前端主题

5.  选择新建并填写以下字段：名称：MyTheme1 路径：~/App_Data/Sitefinity/WebsiteTemplates/MyTheme1/App_Themes/MyTheme1

6.  注销（并回收以避免缓存问题）。

7.  登录到 Sitefinity 的后端并转到设计>>页面模板

8.  选择您的页面正在使用的模板，然后单击它进行编辑。

9.  在屏幕的右上角单击主题按钮，然后从下拉列表中选择“MyTheme1”。

有关渲染源的屏幕截图，[请单击此处](https://dl.dropbox.com/u/19007909/sitefinity/sfv533900-custom_theme.png)。

* * *

这些步骤可能很麻烦，因此您可以使用免费的 Sitefinity Thunder 扩展（[下载链接](http://visualstudiogallery.msdn.microsoft.com/381fde64-9898-4a5d-ae20-861e119bbf92)）

安装和设置后，只需在 VisualStudio 中打开您的解决方案并选择项目 >> 添加新项目。在那里你会发现几个 Sitefinity 类型，包括一个 Sitefinity 主题。

这将自动处理步骤 1 到 6，您剩下要做的就是将该新主题应用于您喜欢的任何模板（步骤 7-9）。

* * *

如果您想了解更多相关信息，[官方文档](http://www.sitefinity.com/documentation/documentationarticles/designer-s-guide/themes/applying-a-theme)对如何应用主题/

# sql - 在数据库中表示 4d 表的最佳方法（oracle）

> ID：14042996
> 
> 赞同：0
> 
> 时间：2012-12-26T16:01:48.500
> 
> 标签：sql, oracle, normalization

我正在开发一个对一堆证券进行情景分析的金融应用程序。“场景”非常简单，它们采用某些输入（在我的情况下，特别是两个，比如 A 和 B）并“冲击”它们（即乘以 10%、20%、30% 等）然后计算输出（我有大约 20 种不同的输出指标）。

这会产生一个 4-d 表，其中：

1.  x 轴是输入 A 的冲击（10%A、20%A、30%A 等）
2.  y 轴是输入 B 的冲击（10%B、20%B、30%B 等）
3.  z 轴是 20 个不同的输出指标
4.  w轴是不同的证券

我想将此表保存到数据库（oracle）中。我这样做的方法是有 2 张桌子：

1.  `Table S`对于输入的冲击水平（百分比）
2.  `Table O`安全与输出

这是每个表的样子：

```
 Table S
 -------------------------
 shock_id    shock_value
 0           0%
 1           10%
 2           20%
 3           30%
 4           40%
 ...   ...

 Table O
 --------------------------
 security_id   A_shock_id   B_shock_id   output_1   output_2 
 1             0            0            1.2        2.3
 1             1            0            1.34       3.52
 1             2            0            2.4        3.98
 1             3            0            3.42       5.31
 1             4            0            23.2       133.1
 1             0            1            2.2        32.1
 1             0            2            23.1       4.2
 1             0            3            ...        ...
 ...           ...          ...          ...        ... 
```

基本上我已经将 PK 的 4-d 表弄平了，`Table O`是`(security_id, A_shock_id, B_shock_id)`where`A_shock_id`和`B_shock_id`are FKs to `Table S`。这种方式的明显缺点是，如果我想添加其他可冲击输入，它不灵活（因为冲击输入被硬编码为列）。

有没有更灵活/标准的方式来表示这样的数据？或者这是规范化数据库的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:14:23.863

这是否是关系数据库的限制或特性绝对是一个悬而未决的问题。但是，是的，关系数据库旨在将“已知”数据映射到具有它们之间关系的表/集合中。大多数涉及关系数据库的项目都从数据建模开始，作为该过程中的正式或非正式步骤。

您提出的问题很容易映射到关系技术。你太专注于结果的输出了。您似乎有两种类型的输入：

*   证券
*   可调参数

以及 20 个输出指标。

您应该以与执行输出指标相同的方式将可调整参数编码为具有不同列的表。参数集表将从两列开始：Shock_A 和 Shock_B。我还将包括一个“类型”列，这样您就知道准确地期望这两个参数。添加其他变量就像在此表中添加一列一样简单。

这种结构不是纯粹标准化的。一种无法很好地映射到大多数 SQL 引擎的关系类型是 one-of 关系。参数集就是一个例子。具有不同参数的“类型”列是表示此结构的适当方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:21:29.090

另一种解决方案可能是完全规范化模式，通过`InputTypes`具有列`Id`和`Description`. 在您的情况下，表格将显示如下：

```
Table InputTypes
-----------------------
Id   Description
0    A
1    B
... 
```

在另一个表格中`ShockCombinations`，您可能会有不同的冲击组合，如下所示：

```
Table ShockCombinations
-----------------------------
Id InputType_Id ShockValue
1  0            10%
1  1            20%
2  0            0%
2  1            10%
.... 
```

在表中`OutputTypes`，您可以有不同的输出类型：

```
Table OutputTypes
-----------------------------
Id Description
1  Output1
2  Output2
.... 
```

这样表`O`可以具有以下结构：

```
Table O
--------------------------
security_id   ShockCombination_id   OutputType_id Values 
1             1                     1             1.2
1             1                     2             2.3
1             2                     1             1.34
1             2                     2             1.77
... 
```

这样，您可以处理的输入组合和输出的数量没有限制，并且您可以轻松添加新的输入类型、它们的组合和输出，而无需修改您的模式。