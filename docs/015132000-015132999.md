# StackOverflow 问答 15132000-15132999

# javascript - 锚点只有在鼠标经过时才可见

> ID：15132001
> 
> 赞同：0
> 
> 时间：2013-02-28T09:33:59.970
> 
> 标签：javascript, html, kineticjs

下面的代码创建了一个可缩放且可拖动的三角形，其顶点具有锚点。我希望锚点只有在鼠标经过它们时才可见？还有，如何实现碰撞检测以避免在三角形内绘制其他空间？

```
<html>
  <head>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.0.js"></script>
    <script type="text/javascript">
      // the circle anchor points
      function buildAnchor(layer, x, y, name) {
        var anchor = new Kinetic.Circle({
          x: x,
          y: y,
          radius: 6,
          stroke: "#666",
          fill: "#ddd",
          strokeWidth: 2,
          draggable: true,
          name : name
        });

        // add hover styling
        anchor.on("mouseover", function() {
          document.body.style.cursor = "pointer";
          this.setStrokeWidth(4);
          layer.draw();
        });
        anchor.on("mouseout", function() {
          document.body.style.cursor = "default";
          this.setStrokeWidth(2);
          layer.draw();
        });

        layer.add(anchor);
        return anchor;
      }

      function buildTriangle(layer, points, name) {
        var triangle = new Kinetic.Polygon({
          stroke : "red",
          strokeWidth : 4,
          name : name,
          draggable : true
        });

        triangle.a = buildAnchor(layer, points[0], points[1], "anchor");
        triangle.b = buildAnchor(layer, points[2], points[3], "anchor");
        triangle.c = buildAnchor(layer, points[4], points[5], "anchor");
    triangle.was = { x : 0, y : 0 };

        layer.add(triangle);
        return triangle;
      }

      function drawTriangle() {
        var triangle = this.get(".triangle")[0];

        if ( !triangle.isDragging() ) { 
          triangle.setPoints([ triangle.a.attrs.x - triangle.was.x, 
                               triangle.a.attrs.y - triangle.was.y,
                               triangle.b.attrs.x - triangle.was.x,
                               triangle.b.attrs.y - triangle.was.y,
                               triangle.c.attrs.x - triangle.was.x,
                               triangle.c.attrs.y - triangle.was.y ]);
        } else {
          var anchors = this.get(".anchor");

          for ( var i = 0; i < anchors.length; i ++ ) {
            anchors[i].setX(anchors[i].getX() + (triangle.getX() - triangle.was.x));
            anchors[i].setY(anchors[i].getY() + (triangle.getY() - triangle.was.y));
          }

          triangle.was.x = triangle.getX();
          triangle.was.y = triangle.getY();
        }
      }

      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          height: 200
        });

        var layer = new Kinetic.Layer({
          drawFunc : drawTriangle
        });

        var triangle = buildTriangle(layer, [60, 100, 90, 100, 90, 140], "triangle");
        triangle.moveToBottom();

        // add the layer to the stage
        stage.add(layer);
      }
    </script>
    <style>
      #container {
        border: 1px solid black;
      }
    </style>
  </head>
  <body onmousedown="return false;">
    <div id="container"></div>
  </body>
</html> 
```

jsFiddle：http: [//jsfiddle.net/Y9AtR/](http://jsfiddle.net/Y9AtR/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:58:43.343

我喜欢@Tomalak 的解决方案，这是我的：

[http://jsfiddle.net/Y9AtR/2/](http://jsfiddle.net/Y9AtR/2/)

```
triangle.on('mouseover', function(){
     triangle.a.show();
     triangle.b.show();
     triangle.c.show();
     layer.draw();
});

triangle.on('mouseout', function(){
     //if( not near triangle ) // add some logic so that they don't disappear right away, maybe use distance formula?
     triangle.a.hide();
     triangle.b.hide();
     triangle.c.hide();
     layer.draw();
}) 
```

# css - CSS sprite 缩放到 div 尺寸

> ID：15132002
> 
> 赞同：0
> 
> 时间：2013-02-28T09:34:01.693
> 
> 标签：css, sprite

我想知道是否有办法将精灵图像缩放到包含 div 的尺寸例如，如果我有一个包含 10 帧（每个 100x100 像素，使其为 1000x100）的精灵图像，并且包含 div 的宽度例如为 200px 或50px，有没有办法让框架在 div 中正确显示？background-size 可以在那里做任何事情吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:40:55.153

你用的是 CSS3 吗？因此，您可以执行以下操作

(HTML)

```
<div class='your-box'></div> 
```

(CSS)

```
.your-box {
  background-image: url(.);
  background-repeat: no-repeat;
  background-size: contain;
} 
```

你可以在这里测试一下，[http://www.w3schools.com/cssref/playit.asp?](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-size&preval=contain) filename=playcss_background-size&preval= contain (w3 school ftw)

我的书签里也有这个，[http://caniuse.com/background-img-opts](http://caniuse.com/background-img-opts)，它让我可以看到哪些浏览器适用。

如果你希望它居中，你可以添加到 CSS

```
 position: absolute;
      height: 100%;
      width: 100%;
      background-position: center; 
```

但正如我所说，这适用于 CSS3，并且大多数人仍然使用 IE8（IE9+ 支持 css），但正如我之前所说，再次查看哪些浏览器与 CSS3 链接兼容（[http://caniuse.com/background- img-opts](http://caniuse.com/background-img-opts) )

# c# - XmlDocument.LoadXml() 和 XML 声明编码属性

> ID：15132005
> 
> 赞同：0
> 
> 时间：2013-02-28T09:34:04.140
> 
> 标签：c#, .net

这可能是给定的，但我试图做到彻底；由于 .NET 的`string`类型是 UTF-16，是否`XmlDocument.LoadXml(string)`只是简单地忽略`encoding`XML 声明中的属性，因为文档编码的任何内容都应该已经转换为 UTF-16，因为它包含在 .NET 字符串中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:36:36.907

XML 属性确定编码类型。

例如

```
 <?xml version="1.0" encoding="utf-8" ?> 
```

这就是它的读取方式，然后将其转换为 UTF-16 字符串，但如果您希望看到 UTF-16 字符，您不会，它们会丢失。

从[这里](http://msdn.microsoft.com/en-us/library/system.string.aspx)的字符串的 MSDN 文档：

> 字符串中的每个 Unicode 字符由 Unicode 标量值定义，也称为 Unicode 代码点或 Unicode 字符的序数（数字）值。每个代码点都使用 UTF-16 编码进行编码，编码的每个元素的数值由一个 Char 对象表示。

这意味着当您通过 XmlDocument.LoadXml() 传递带有 XML 标头的字符串时，它必须说编码是 UTF-16。否则，实际的底层编码将与标头中报告的编码不匹配，并将导致引发 XmlException。

此处的扩展说明： [为什么 C# XmlDocument.LoadXml(string) 在包含 XML 标头时会失败？](https://stackoverflow.com/questions/310669/why-does-c-sharp-xmldocument-loadxmlstring-fail-when-an-xml-header-is-included)

# c# - 单元测试以使用实际类而不是类的副本

> ID：15132009
> 
> 赞同：2
> 
> 时间：2013-02-28T09:34:16.077
> 
> 标签：c#, unit-testing, visual-studio-2008

我目前正在使用 Visual Studio 2008 在更大的系统软件中为某些类/模块创建单元测试。类的源文件存储在一个存储库中。当然，每当我要测试这些类时，我都必须通过选择“添加现有项”将它们包含在项目中，这样我就可以得到一个可以测试的类的精确副本。这使得 VS2008 制作自己的类副本。但问题是，需求突然发生了变化，我必须使用实际的类本身，而不是它们的副本（比如，在测试项目中放置一个引用），这样每当类被编辑/更改/更新时，单元测试肯定会失败。我似乎找不到任何选项，可以在其中引用测试项目中的实际类，然后从那里，我 d 创建单元测试。有什么方法可以让我自己测试实际的课程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:35:52.397

关键是将文件添加为链接（类似于快捷方式）：

`Add Existing Item > Add As Link`

看截图：

![在此处输入图像描述](../Images/2c95c2c64afe178e6dca13d524093072.png)

这样，Visual Studio 将不会复制文件，如果您在原始源中更改它们，它们也将在您的解决方案中进行修改。

# asp.net - ASP.NET - 在 excel 文件中导出格式化数据

> ID：15132011
> 
> 赞同：0
> 
> 时间：2013-02-28T09:34:22.680
> 
> 标签：asp.net, formatted

我想将数据导出到 excel 文件。数据应格式化并采用可读格式。

谁能建议我这样做的方法？还请推荐现成的免费库，我们可以在 ASP.NET 中使用它来进行格式化导出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:38:21.420

试试[http://epplus.codeplex.com/](http://epplus.codeplex.com/) 现在我致力于导出 excel，这是迄今为止我尝试过的最好的。便于使用。

# php - 未定义变量：位置

> ID：15132018
> 
> 赞同：1
> 
> 时间：2013-02-28T09:34:36.600
> 
> 标签：php, ajax, variables, undefined

对不起，伙计们，我正在网上阅读和搜索，但我找不到解决方案:(。如果你能帮助我:) 谢谢。

如果我硬编码**位置**，那么它工作得很好。我已经尝试过几种不同的方式......

PS我必须为练习创建某种图像库ajax​​页面:)我认为这个**位置**变量应该在单例/静态类中我猜。我还不能测试这个类，但我认为这只适用于第一个和最后一个图像总是:)（在java代码中这很容易做到:)）。

错误： **注意：未定义变量：第 11 行 D:\Wamp\www\test\gethint.php 中的位置**

```
<?php

class Index {
    private $position=1;

    public function next(){
        return $position++;;
    }

    public function prev(){
        return $position--;
    }

     public function reset(){
        $position=1;
        return $position;
    }
}

$action=$_REQUEST["action"];
    $index = 0;

if($action!=1){
    $index=Index::prev();
} else {
    $index=Index::next();
}

if($index < 1){
    $index=7;
}
if($index > 7){
    $index=1;
}

    $response="<img border=\"0\" src=\"".$index.".jpg\" alt=\"".$index."\" width=\"500\" height=\"334\">";

 echo $response;
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:36:40.603

```
class Index {
    private $position=1;

    public function next(){
        return $this->position++;
    }

    public function prev(){
        return $this->position--;
    }

     public function reset(){
        $this->position=1;
        return $this->position;
    }
} 
```

您必须获取类变量，而不是局部变量；）

并且重置方法有效，因为您将局部变量设置为 1 然后返回它，在其他两种方法中 $position 变量都将是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:37:39.980

更改此行

```
return $position++;; 
```

到

```
return $position++; // extra ; 
```

并像这样访问类变量

```
$this->position++; // not $position 
```

用于创建静态变量使用`static`关键字

```
private static $position=1; 
```

用于访问静态变量使用

```
self::$position; 
```

改变这个

```
if($action!=1){
    $index=Index::prev();
} else {
    $index=Index::next();
} 
```

到

```
$in = new Index();
if($action!=1){
    $index= $in->prev();
} else {
    $index= $in->next();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:38:39.153

你`$position++;;`在下一个函数中拥有这个`Index`应该是的类，`$position++;`并且要访问你应该使用的类属性 $this。

所以用它作为`$this->position++;`

# sinatra - sinatra 应用在 jruby 上的性能

> ID：15132020
> 
> 赞同：2
> 
> 时间：2013-02-28T09:34:45.147
> 
> 标签：sinatra, jetty, jruby, jruby-rack, trinidad-gem

我有一个 sinatra 应用程序，它的执行速度比我想要的要慢得多。我的第一个怀疑是我自己的代码是瓶颈，所以我将它提取到一个独立的基准测试脚本中。

```
THREADS = 100
ITERATIONS = 1

def make_calls
  ITERATIONS.times do
 # ... my stuff here
 end
end

1.upto(THREADS) do |n|
  Benchmark.bm do |bm|
    threads = []
    n.times do
      threads << Thread.new { make_calls }
    end
    bm.report("#{n} threads:") { threads.each { |t| t.value } }
  end
end 
```

make_calls 调用我自己的代码的地方。我很高兴地说，当我们达到 100 个线程时，所有线程中 make_calls 的累积时间是 0.6 秒，这对于我的目的来说已经足够快了。我在上面的线程中包装 make_calls 方法的原因是因为我自己的代码使用线程（通过 java.concurrent.FixedThreadPool(500) 的 java 本机线程）/ExecutorService，我想确保这在一个环境中表现良好可能使用其他线程模型。一旦 jruby 热身，单线程中的单次迭代将在大约 0.02 秒内运行。

所以上面是好的，但是当我将它添加到一个 sinatra web 服务器时：

```
require 'sinatra'
get '/' do
  # ... my stuff here
end 
```

对此端点的请求的响应时间约为 0.5 秒 - 增加并发请求的数量，响应时间以线性方式上升。我已经使用了 jetty-rackup 和 trinidad 来尝试这个，在 linux 和 solaris 上都使用了 jruby 1.7。

我试图优化 trinidad 实例无济于事（最大/最小运行时间等）。我们看到的最佳性能是在线程安全中运行任一服务器！模式，并且两台服务器在此模式下都表现出比较的性能。

谁能向我解释时间消耗在哪里或如何改进此设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T13:46:13.650

听起来服务器并不是限制因素。也许这是 rack 或 Sinatra 的问题，但是

```
# ... my stuff here 
```

并没有真正放弃太多。尝试使用分析工具（[VisualVM](http://visualvm.java.net/)可以开始使用）来检查您是否分配了大量不需要的对象，是否所有线程都在等待等，然后更改或消除您认为的瓶颈。

重复此操作，直到您认为它足够快；）

# r - 为什么变量不改变？

> ID：15132022
> 
> 赞同：-1
> 
> 时间：2013-02-28T09:35:01.587
> 
> 标签：r

我有以下代码 *. 在此我将变量“epsf1”更改为先前的值“epsf1 = eps[ii,1]-c1*epsf1”。我打印它的值，它是 0。但它应该是完全不同的东西。我找不到它发生的原因，我无法用同样的问题编写更短的代码。看起来“eps[ii]”中的值没有用于“epsf1 = eps[ii,1]-c1*epsf1;” 陈述。

*:

```
delka_experimentu = 1000;
lambda  = 1;
Q = diag(3);

e = rnorm(delka_experimentu);
u = rnorm(delka_experimentu);#rep(10,delka_experimentu)
y = rep(0,delka_experimentu);
y[1] = e[1];

for(ii in c(2:delka_experimentu)){
 y[ii] = 0.5*y[ii-1]+0.3*u[ii-1]+e[ii]-0.2*e[ii];
}

Res =  matrix(0,delka_experimentu,6);

P = 1000*diag(3);
R1 = 0.1*diag(3);
K = matrix(0,3,1);
eps = matrix(0,delka_experimentu,1)
epsf1 = y[1];
print(c(epsf1))
epsf2 = 0;
ef3 = 0;
yf1 = y[1];
yf2 = 0;
yf3 = 0;
uf1 = u[1];
uf2 = 0;
uf3 = 0;
eps[1,1] = y[1];

epst1 = 0;
pomocna1 = 0;
pomocna2 = 0;
theta = matrix(0,3,1);

for(ii in 2:30){ #delka_experimentu
a1 = theta[1];
b1 = theta[2];
c1 = theta[3];

pomocna1 = epsf1;
epsf1 = eps[ii,1]-c1*epsf1;
epsf2 = pomocna1;
print(c(epsf1))

pomocna1 = yf1;
yf1 = y[ii]-c1*yf1;
yf2 = pomocna1;

pomocna1 = uf1;
uf1 = u[ii]-c1*uf1;
uf2 = pomocna1;

eps[ii,1] = y[ii]+a1*y[ii-1]-b1*u[ii-1]-c1*eps[ii-1]

#if(eps[ii]*eps[ii]>100){paste("problem",ii)}

psi = matrix(c(yf2,uf2,epsf2),3,1);

b = t(psi)%*%P%*%psi;
P = (P - P%*%psi%*%solve(1+b[1,1])%*%t(psi)%*%P)/lambda #lambda*solve(Q)
K = P%*%psi%*%solve(1+b[1,1]); #lambda*solve(Q)
theta = theta + K%*%eps[ii];
Res[ii,] = theta;
}

plot(c(0,delka_experimentu),c(min(Res,-0.5),max(Res,1)),col="white")
lines(Res[,1],col="red")
#lines(Res[,2],col="red",type=o)
lines(Res[,3],col="blue")
#lines(Res[,4],col="blue")
lines(Res[,5])
#lines(Res[,6])

lines(c(0,delka_experimentu),c(-0.5,-0.5),col="red")
lines(c(0,delka_experimentu),c(0.3,0.3),col="blue")
lines(c(0,delka_experimentu),c(-0.2,-0.2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:25:53.737

问题是你乘以0。`eps`（即`eps[ii,1]`当`ii=2`）的第二行是0，并且`theta`是0的矩阵，所以很明显`epsf1`最终会是0。我认为你的问题是你`eps[ii,1]`在循环中定义的位置是之后你分配`epsf1`. 所以我修改了你的循环来移动那条线，它打印了一个变化的变量。这是编辑后的代码：

```
rm(list=ls())
delka_experimentu = 1000;
lambda  = 1;
Q = diag(3);

e = rnorm(delka_experimentu);
u = rnorm(delka_experimentu);#rep(10,delka_experimentu)
y = rep(0,delka_experimentu);
y[1] = e[1];

for(ii in c(2:delka_experimentu)){
  y[ii] = 0.5*y[ii-1]+0.3*u[ii-1]+e[ii]-0.2*e[ii];
}

Res =  matrix(0,delka_experimentu,6);

P = 1000*diag(3);
R1 = 0.1*diag(3);
K = matrix(0,3,1);
eps = matrix(0,delka_experimentu,1)
epsf1 = y[1];
print(c(epsf1))
epsf2 = 0;
ef3 = 0;
yf1 = y[1];
yf2 = 0;
yf3 = 0;
uf1 = u[1];
uf2 = 0;
uf3 = 0;
eps[1,1] = y[1];

epst1 = 0;
pomocna1 = 0;
pomocna2 = 0;
theta = matrix(0,3,1);

for(ii in 2:30){ #delka_experimentu
  a1 = theta[1];
  b1 = theta[2];
  c1 = theta[3];
  eps[ii,1] = y[ii]+a1*y[ii-1]-b1*u[ii-1]-c1*eps[ii-1] #This is the line I moved
  pomocna1 = epsf1;
  epsf1 = eps[ii,1]-c1*epsf1;
  epsf2 = pomocna1;
  print(c(epsf1))
  pomocna1 = yf1;
  yf1 = y[ii]-c1*yf1;
  yf2 = pomocna1;

  pomocna1 = uf1;
  uf1 = u[ii]-c1*uf1;
  uf2 = pomocna1;

  #if(eps[ii]*eps[ii]>100){paste("problem",ii)}

  psi = matrix(c(yf2,uf2,epsf2),3,1);

  b = t(psi)%*%P%*%psi;
  P = (P - P%*%psi%*%solve(1+b[1,1])%*%t(psi)%*%P)/lambda #lambda*solve(Q)
  K = P%*%psi%*%solve(1+b[1,1]); #lambda*solve(Q)
  theta = theta + K%*%eps[ii];
  Res[ii,] = theta;
}  
}

plot(c(0,delka_experimentu),c(min(Res,-0.5),max(Res,1)),col="white")
lines(Res[,1],col="red")
#lines(Res[,2],col="red",type=o)
lines(Res[,3],col="blue")
#lines(Res[,4],col="blue")
lines(Res[,5])
#lines(Res[,6])

lines(c(0,delka_experimentu),c(-0.5,-0.5),col="red")
lines(c(0,delka_experimentu),c(0.3,0.3),col="blue")
lines(c(0,delka_experimentu),c(-0.2,-0.2)) 
```

给出以下输出：

```
[1] 0.003594182
[1] -0.9812494
[1] -5.430992
[1] -27.87607
[1] -143.5392
[1] -732.6409
[1] -3729.887
[1] -18962.87
[1] -96278.02
[1] -488131.6
[1] -2471325
[1] -12494038
[1] -63075221
[1] -317971881
[1] -1600659248
[1] -8043157617
[1] -40412374164
[1] -203058922762
[1] -1.020209e+12
[1] -5.125226e+12
[1] -2.308228e+13
[1] -1.039444e+14
[1] -4.680327e+14
[1] -2.107201e+15
[1] -9.47394e+15
[1] -4.259006e+16
[1] -1.914032e+17
[1] -8.600152e+17
[1] -3.905738e+18 
```

# android - Package_Install 的 BroadcastReceiver 不起作用

> ID：15132023
> 
> 赞同：1
> 
> 时间：2013-02-28T09:35:02.200
> 
> 标签：android, android-intent, broadcastreceiver

```
@Override
public void onReceive(Context context, Intent intent) {

    // TODO Auto-generated method stub
    Toast.makeText(context, "Package Received", Toast.LENGTH_SHORT).show();
    Log.d("Package Installing", "Package Installing");
    String action=intent.getAction();
    if(action.equals(intent.ACTION_PACKAGE_INSTALL))
    {
        Toast.makeText(context, "Package Added", Toast.LENGTH_SHORT).show();
        Log.d("Package INstalling", "Package Installed");
    }
} 
```

//我的清单文件：

```
<receiver android:name="com.example.anotherbroadcastreceiverexample.MyReceiver" android:enabled="true">
            <intent-filter><action android:name="android.intent.action.PACKAGE_INSTALL"/></intent-filter>

    </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:45:28.537

您能否尝试通过以下方式修改您的清单：

```
<intent-filter>
    <action android:name="android.intent.action.PACKAGE_INSTALL" />
    <action android:name="android.intent.action.PACKAGE_ADDED" />
    <data android:scheme="package"/>
</intent-filter> 
```

**更新：**

检查不是 PACKAGE_INSTALL 检查操作 PACKAGE_ADDED。

# zsh - zsh：强制单个选项卡完成

> ID：15132028
> 
> 赞同：5
> 
> 时间：2013-02-28T09:35:28.887
> 
> 标签：zsh, zshrc, zsh-completion

我最近从 bash 切换到 zsh。如何实现以下选项卡完成行为：

输入第一个字母，然后按`TAB`。完成输入直到第一个模棱两可的字母，并立即显示选项/备选方案。

目前，它的行为如下：

```
# ls .m*
  .mysql_history  .matlab  .matplotlib  .mono  .mozilla
# cd .m<TAB>
  .matlab/  .matplotlib/  .mono/  .mozilla/
# cd .mo<TAB>
  .mono/  .mozilla/
# cd .ma<TAB><TAB> (here two tabs are necessary: the first one completes to .mat, 
                    the second one show .matlab and .matplotlib) 
```

在最后一种情况下，我想去掉第二个标签。zshs完成系统可以做到这一点吗？

这是我目前的`.zshrc`：

```
HISTFILE=~/.histfile
HISTSIZE=10000
SAVEHIST=1000

# Options
setopt autocd

# Aliases
alias ls='ls --color -h --group-directories-first'
alias ll='ls -laF --color -h --group-directories-first'
alias la='ls -A --color -h --group-directories-first'

alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# Prompt
PS1="[%n@%m]%F{112}[%~]%f# "

# Enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
fi

# Set vim mode
bindkey -v

# Key bindings
# Vi insert mode
bindkey -M viins 'jj' vi-cmd-mode
bindkey -M vicmd '^i' vi-down-line-or-history
bindkey -M vicmd '^k' vi-up-line-or-history

# Vi command mode
bindkey -M vicmd 'l' vi-forward-char
bindkey -M vicmd '^l' vi-forward-word
bindkey -M vicmd 'j' vi-backward-char
bindkey -M vicmd '^j' vi-backward-word
bindkey -M vicmd 'h' vi-insert
bindkey -M vicmd 'i' vi-down-line-or-history
bindkey -M vicmd 'k' vi-up-line-or-history

# Environment variables
export TERM=xterm-256color

# Completion
zstyle :compinstall filename '/home/jeschma/.zshrc'

autoload -Uz compinit
compinit 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T10:23:58.863

好的，我发现`listambiguous`默认情况下设置了 zsh 选项。我刚刚插入`unsetopt listambiguous`我的 zshrc，我的问题就解决了。现在，`TAB`每次只需按一下即可显示可能的完成情况。

# java - 操作 BigDecimal 给出意外的结果

> ID：15132034
> 
> 赞同：0
> 
> 时间：2013-02-28T09:35:38.527
> 
> 标签：java, android, bigdecimal

我目前正在使用`BigDecimal`，这是我获得 2 精度数字的实现之一：

```
 mDbHelper.open();
    BigDecimal total = mDbHelper
            .getTotal(Type.Income, "20130101 12:00:00", "20131231 12:00:00");
    BigDecimal expense = mDbHelper.getTotal(Type.Expense, "20130101 12:00:00",
            "20131231 12:00:00");
    BigDecimal saving = mDbHelper.getSaving("feb");
    mDbHelper.close();
    BigDecimal remaining = total.subtract(expense.add(saving));

    Log.d("total get", total.toPlainString());
    Log.d("expense get", expense.toPlainString());
    Log.d("saving get", saving.toPlainString());
    Log.d("remaining get", remaining.toPlainString());

    try {
        percentRemain = (double) Math.round(remaining.multiply(new BigDecimal(10000.0))
                .divide(total, BigDecimal.ROUND_HALF_UP).doubleValue()) / 100;
        Log.d("percentRemain", "" + percentRemain);
        percentExpense = (double) Math.round(expense.multiply(new BigDecimal(10000.0))
                .divide(total, BigDecimal.ROUND_HALF_UP).doubleValue()) / 100;
        Log.d("percentExpense", "" + percentExpense);
        Log.d("before calculation saving =", saving.toPlainString());
        Log.d("before calculation total =", total.toPlainString());
        percentSaving = ((double) Math.round(saving.multiply(new BigDecimal(10000.0))
                .divide(total, BigDecimal.ROUND_HALF_UP).doubleValue())) / 100d;
        Log.d("percentSaving", "" + percentSaving);

        Log.d("multiply", "" + saving.multiply(new BigDecimal(10000.0)).doubleValue());

        Log.d("divide",
                ""
                        + saving.multiply(new BigDecimal(10000.0))
                                .divide(total, BigDecimal.ROUND_HALF_UP).doubleValue());

    } catch (ArithmeticException e) {
        e.printStackTrace();
        percentRemain = 0.0f;
        percentExpense = 0.0f;
        percentSaving = 0.0f;
    } 
```

不知道为什么`percentSaving == 0.0`什么时候`saving >= 10,000,000`

有什么看法吗？请指导我。

这是我记录的变量值：

```
02-28 16:55:12.250: D/total get(29448): 41623000
02-28 16:55:12.250: D/expense get(29448): 7186545.0
02-28 16:55:12.250: D/saving get(29448): 10000000
02-28 16:55:12.250: D/remaining get(29448): 24436455.0
02-28 16:55:12.250: D/percentRemain(29448): 58.71
02-28 16:55:12.250: D/percentExpense(29448): 17.27
02-28 16:55:12.250: D/before calculation saving =(29448): 10000000
02-28 16:55:12.250: D/before calculation total =(29448): 41623000
02-28 16:55:12.250: D/percentSaving(29448): 0.0
02-28 16:55:12.250: D/multiply(29448): 1.0E11
02-28 16:55:12.250: D/divide(29448): 0.0 
```

`percentExpense`具有相同的公式`percentSaving`

添加了我的方法和日志。对不起，混乱。

**解决方案**

我已将公式更改为此，似乎它现在返回了正确的值。

```
percentExpense = (double) Math.round(expense.multiply(new BigDecimal(10000.0))
                .divide(total, 4, BigDecimal.ROUND_HALF_UP).doubleValue()) / 100; 
```

# php - CodeIgniter flashdata 西里尔文错误

> ID：15132037
> 
> 赞同：1
> 
> 时间：2013-02-28T09:35:42.400
> 
> 标签：php, codeigniter

我的 database.table ci_sessions 是 utf8_general_ci，在我设置的 .htaccess 中

```
addDefaultCharset UTF-8 
```

在我的配置文件中：

```
$config['charset'] = 'UTF-8'; 
```

但是如果我在我的闪存会话数据中写了一个西里尔字符，我的所有会话都会被破坏并且我会自动注销，如何解决这个问题？

我的文件是没有bom的utf-8，但是如果我在里面写

```
$message = 'ВЦФАФАП';
$this->session->set_flashdata('message', $message);
            redirect($_SERVER['HTTP_REFERER']); 
```

会话被破坏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:12:36.030

我遇到了同样的问题，但我的会话一开始并没有存储在数据库中。我的字符集也设置为 UTF-8。

我对这个问题的解决方案是确保文件的编码也设置为 UTF-8。如何执行此操作取决于您使用的编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T10:59:52.307

尝试添加 base64_encode() 函数。对于插入数据库`base64_encode(serialize($session_data))`。对于选择`unserialize(base64_decode($db_data))`。

# javascript - 我如何处理这个 jQuery ajax 响应

> ID：15132047
> 
> 赞同：0
> 
> 时间：2013-02-28T09:36:13.050
> 
> 标签：javascript, jquery, ajax

我收到以下

```
[{"user_id":"1","user_invoice_add1":"Stark Towers","user_invoice_add2":"123 Reginald Street","user_invoice_city":"Newport","user_invoice_state":"New York","user_invoice_country":"US","user_invoice_zip":"321654"}] 
```

我如何从中提取信息？

尝试**data.user_id**或**data[0].user_id**返回未定义

**jQuery**

```
$.post('post.php', qString, function (obj) {
console.log(obj);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:39:31.187

您必须首先使用 jQuery 函数将此字符串转换为 JSON 对象`var obj = $.parseJSON(data)`。它将返回一个 JSON 对象，您可以像这样访问它`obj[0].user_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:39:50.713

用这个：

```
 myObject = jQuery.parseJSON( dataReceived ); 
```

然后您可以将数据作为对象的属性访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:40:34.173

试试这样。。

```
$.map(data.d, function (item) {
     alert(item.user_id)                 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:40:51.107

[jquery.ajax](http://api.jquery.com/jQuery.ajax/)有一个设置，称为`dataType`这就是您从服务器获得响应的内容。

> “json”：将响应评估为 JSON 并返回一个 JavaScript 对象。在 jQuery 1.4 中，JSON 数据以严格的方式解析；任何格式错误的 JSON 都会被拒绝并引发解析错误。

```
$.ajax({
   ....
   dataType:"json",
   success:function(data){
       alert(data.user_id) //no need to parseJSON...dataType does it 
   };
}); 
```

使用 POST

```
$.post('post.php', qString, function (obj) {
  console.log(obj);
}, "json"); 
```

或者您可以使用`$.parseJSON(data)`将字符串转换为 json 对象

# c++ - 关于“有效 C++”方法的编译器警告，以避免 const 和非 const 成员函数中的重复

> ID：15132048
> 
> 赞同：1
> 
> 时间：2013-02-28T09:36:17.907
> 
> 标签：c++, c++11, compiler-errors, constants, overloading

**此问题已更新。请查看代码。**

以下代码使用 VC++ Nov 2012 CTP 编译。Scott Meyers 的《**Effective C++**》一书建议我们应该使用 的方法来避免 const 和 non-const 成员函数的重复。但是，以下代码会导致警告（级别 1）。因为WDK构建工具将警告视为错误，所以下面的代码无法编译成功。

还有其他更好的方法吗？

```
struct A
{
    int n;

    A(int n)
        : n(n)
    {}

    int Get() const
    {
        return n;
    }

    int Get()
    {
        return static_cast<const decltype(*this)&>(*this).Get();
    }
};

int main()
{
    const A a(8);

    //
    // warning C4717: 'A::Get' : recursive on all control paths,
    // function will cause runtime stack overflow
    //
    a.Get(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:42:40.970

您已经调换了两种`Get`方法的主体，因此编译器是正确的；const`Get`方法正在调用自身。您现在不高兴您的构建工具将警告视为错误吗？:)

交换它们：

```
int& Get()
{
    return const_cast<int&>(static_cast<const A&>(*this).Get());
}

const int& Get() const
{
    return n;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T09:43:05.367

我相信你把它弄反了。这是非常量版本，它抛弃了 const 版本的 constness。

请参阅：[重复、const 和 non-const、getter 的优雅解决方案？](https://stackoverflow.com/questions/856542/elegant-solution-to-duplicate-const-and-non-const-getters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:50:50.540

回答更新的问题。（您应该将此作为一个新问题）

In `static_cast<const decltype(*this)&>(*this)`,`*this`是 type 的左值`A`，所以表示的类型`decltype(*this)`是`A&`（参见 7.1.6.2 [dcl.type.simple]/4）。

因此，您的非常量`Get()`函数相当于：

```
int Get()
{
    typedef A & Aref;
    // IMHO a const_cast would be the better choice here
    return static_cast<const Aref&>(*this).Get();
} 
```

*引用类型上的*cv 限定符被忽略。*使用引用折叠，您的演员最终等同于`static_cast<A&>(*this)`，因此您无需添加所需的 const 。*

 *所以使用`decl_type`在这里不起作用。如果你非常想使用它，你需要：

```
int Get()
{
    // Made my suggested change of cast here
    return const_cast<const std::remove_reference<decltype(*this)>::type&>(*this).Get();
} 
```*

# java - 重复的局部变量“附加”错误？

> ID：15132049
> 
> 赞同：-3
> 
> 时间：2013-02-28T09:36:18.213
> 
> 标签：java

我正在尝试调试一段代码，但出现“重复的局部变量”错误。我将如何解决这个问题？我不确定错误是什么，所以我在这里问。

```
public JumpPlusPlayer(JumpPlus plugin, Player p) {
    loadPermissions(p, plugin);
    fillConfig(plugin);
  }

  protected void loadPermissions(Player p, JumpPlus plugin) {
      HashSet<PermissionAttachmentInfo> perms = new HashSet<PermissionAttachmentInfo>();
    PermissionAttachment attach;
    if (plugin.usingPEX) {
      PermissionUser user = PermissionsEx.getUser(p);
      String world = p.getWorld().getName();
      attach = new PermissionAttachment(plugin, p);
      for (String perm : user.getPermissions(world)) {
        String expression = user.getMatchingExpression(perm, world);
        perms.add(new PermissionAttachmentInfo(p, perm, attach, user.explainExpression(expression)));
      }
    } else {
      perms = (HashSet<PermissionAttachmentInfo>) p.getEffectivePermissions();
    }

    for (PermissionAttachmentInfo attach : perms) {
      String perm = attach.getPermission();
      if (perm.contains("jumpplus.config.")) {
        String[] aux = perm.split("jumpplus.config.");
        aux = aux[1].split("-");
        if (aux[0].equals("hspeed"))
          this.hSpeed = Double.valueOf(Double.parseDouble(aux[1]));
        else if (aux[0].equals("vspeed"))
          this.vSpeed = Double.valueOf(Double.parseDouble(aux[1]));
        else if (aux[0].equals("maxjumps"))
          this.maxJumps = Integer.valueOf(Integer.parseInt(aux[1]));
        else if (aux[0].equals("maxfreejumps"))
          this.maxFreeJumps = Integer.valueOf(Integer.parseInt(aux[1]));
        else if (aux[0].equals("jumpcost"))
          this.jumpCost = Integer.valueOf(Integer.parseInt(aux[1]));
        else if (aux[0].equals("fallmodifier"))
          this.fallModifier = Integer.valueOf(Integer.parseInt(aux[1]));
        else if (aux[0].equals("particleeffect"))
          this.particleEffect = Boolean.valueOf(Boolean.parseBoolean(aux[1]));
        else if (aux[0].equals("defaultstate"))
          this.enable = Boolean.valueOf(Boolean.parseBoolean(aux[1]));
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:37:39.073

> 我将如何解决这个问题？

嗯，不要在同一个作用域内两次声明一个局部变量？

在增强的 for 循环中使用不同的局部变量名称，或者将第一个变量的声明移到`if`语句中：

```
PermissionAttachment attach = new PermissionAttachment(plugin, p); 
```

（你不在语句之外*使用*它`if`，那为什么要在开始时声明它？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:38:32.677

问题出在您的`loadPermissions`方法上，尤其是这两行：

```
PermissionAttachment attach;
for (PermissionAttachmentInfo attach : perms) { 
```

第一行声明了一个名为`attach`. 第二行*还*声明了一个名为 的局部变量`attach`，但由于它已经存在，因此不能这样做。您需要为其中一个选择不同的名称。

# c++ - 为什么c局部变量需要翻译为void？

> ID：15132053
> 
> 赞同：2
> 
> 时间：2013-02-28T09:36:34.377
> 
> 标签：c++

最近我在github研究一个项目，发现了这个。为什么最后有一个“(void)n”？

```
void CurrentThread::cacheTid()
{
  if (t_cachedTid == 0)
  {
    t_cachedTid = detail::gettid();
    int n = snprintf(t_tidString, sizeof t_tidString, "%5d ", t_cachedTid);
    assert(n == 6); (void) n;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:38:16.290

`(void)n`实际上是一个空操作。但是，它*会*阻止编译器在关闭断言并且`assert()`编译出前面的内容时发出“未使用的变量”警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T09:38:23.643

此构造抑制有关已声明但从未使用过的变量的警告

# c# - 默认 SolidColorBrush

> ID：15132054
> 
> 赞同：1
> 
> 时间：2013-02-28T09:36:36.067
> 
> 标签：c#, wpf, windows-runtime

我有一个转换器，它将自定义对象转换`SolidColorBrush`为 ListView 项目的文本颜色，可以是红色或黑色。问题是列表视图的 PointerOver 模板（和其他模板）会自动反转文本颜色以匹配对比度，但转换器设置的颜色不会自动更改，所以我的问题是是否有默认的 SolidColorBrush 不会使这是个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-18T16:03:53.623

试试这个：

```
SolidColorBrush defaultBrush = new SolidColorBrush();
controlObject.BorderBrush = defaultBrush; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:36:49.520

我相信`default(SolidColorBrush)`是`null`。

您可以使用[ItemContainerStyleSelector](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.itemcontainerstyleselector.aspx)代替转换器或与转换器一起使用以使用不同的项目样式，包括画笔。您当前的解决方案可能会覆盖`{TemplateBinding Foreground}`默认模板之一中某处的设置，这会破坏依赖属性值推断链。您可以查看此以获取有关依赖属性[Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx)的更多信息。

# c - 如何将数组元素传递给结构？

> ID：15132058
> 
> 赞同：1
> 
> 时间：2013-02-28T09:36:46.267
> 
> 标签：c

我正在尝试学习 C。我创建了这个结构，我试图将名称从现有数组传递到结构元素名称之一 [100]，我无法理解如何传递它？伙计们请帮助我并指导我如何做到这一点。如果有人可以指导我学习一个好的结构教程（网上有很多，但只有基础知识），那将是一个很大的帮助……谢谢。

```
typedef struct new_st{

        char name[100];

        int icon_number;

        float calculation;

        }var;

char arr_name[] = {“name1”,  “name1”,  “name1”,  “name1” };/this lines throws error

int main(){

var *ptr_var;

New_var = malloc(sizeof(struct new_st)*100);

 strcpy(&arr_name[0], ptr_var[1].name);//this lines throws error

return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:39:01.193

使用`strcpy()`：

`strcpy(New_var[0].name, arr_name[0]);`

建议：不要将返回值从`malloc()`

-- 源代码发布后编辑 --

您可能的意思是：`strcpy(ptr_var[1].name, arr_name[0]);`和

这应该是：

```
char *arr_name[] = {“name1”,  “name1”,  “name1”,  “name1” };/*this lines throws error*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:40:27.310

我想你想要做的是：

```
var  *ptr_var;
ptr_var  = malloc(sizeof(struct new_st) * 100);

ptr_var[0].calculation = 1.5f; //assigning variable inside your struct 0 in your array of structs
ptr_var[0].name = "Foobar";

strcpy(&arr_name[0], ptr_var[1].name); //copy string 
//Free memory at end of your program
free(ptr_var); 
```

# ios - iOS中如何自动回调UINavigationController的BackItem？

> ID：15132059
> 
> 赞同：0
> 
> 时间：2013-02-28T09:36:47.107
> 
> 标签：ios, cocoa-touch, uinavigationcontroller

就像我的问题标题一样，我需要在`UINavigationController's`不点击的情况下回调 BackItem 事件`BackBarItem`。

我正在使用`UINavigationController`，我想自动调用这些事件。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:38:58.620

您可以使用该`popViewControllerAnimated:`方法以编程方式在导航控制器中返回一步：

```
[navigationController popViewControllerAnimated:YES]; 
```

# knockout.js - 拒绝可观察值变化

> ID：15132060
> 
> 赞同：6
> 
> 时间：2013-02-28T09:36:46.713
> 
> 标签：knockout.js

有没有办法拒绝/取消对可观察值的修改？像这样：

```
observable.subscribe (function (newvalue) {
   if ( newvalue < 0 ) {

        // cancel changing
   }
   else{ 
        // proceed with change
   }

}, this) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T09:43:43.360

编辑：

我发现了别的东西：Writeable computed observables。

这是一个例子：

```
function AppViewModel() {
    this.field = ko.observable("initValue");
    this.computedField = ko.computed({
        read: function () {
            return this.field();
        },
        write: function (value) {
            if(value > 0) {
                this.field(value);
            }
        },
        owner: this
    });
} 
```

那么你绑定到计算域。

/编辑

我会使用自定义绑定。

这是自定义绑定的教程： http://learn.knockoutjs.com/#/?tutorial= [custombindings](http://learn.knockoutjs.com/#/?tutorial=custombindings)

或者这里是文档： http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-07T17:32:45.400

为了帮助拒绝写入值，我使用了以下内容：

*   创建一个隐藏的可观察对象来存储该值。
*   根据隐藏的 observable 返回一个可写的计算 observable。
*   当某些东西被写入计算的 observable 时，在接受它之前验证它。

我使用以下代码扩展了 Knockout：

```
ko.conditionedObservable = function (initialValue, condition) {
    var obi = ko.observable(initialValue);
    var computer = ko.computed({
        read: function () { return obi(); },
        write: function (newValue) {
            //unwrap value - just to be sure
            var v = ko.unwrap(newValue);
            //check condition
            if (condition(v)) {
                //set it to the observable
                obi(v);
            }
            else {
                //reset the value
                computer.notifySubscribers();
            }
        }
    });
    return computer;
}; 
```

在这样的对象中使用它：

```
field = ko.conditionedObservable<number>(null, (v) => parseInt(v) > 0); 
```

有关更多解释，请查看我的[Conditioning Knockout Observables：reject values](https://keestalkstech.com/2017/09/conditioning-knockout-observable-reject-values/)博客。

# java - 如何定义额外的 Java 日志级别？

> ID：15132064
> 
> 赞同：0
> 
> 时间：2013-02-28T09:37:05.237
> 
> 标签：java, logging, syslog

[标准 Java 日志记录](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html)定义了以下日志级别：

*   严重（最高）
*   警告
*   信息
*   配置
*   美好的
*   更精细
*   最好的

这与[RFC 5424](https://www.rfc-editor.org/rfc/rfc5424)不兼容，因为它在 INFO 和 WARNING 之间缺少 NOTICE 级别。Java 缺少一些额外的日志级别（错误、关键、警报和紧急情况），但 NOTICE 是让我很受伤的一个。

有没有办法扩展可能的日志级别列表以添加缺少的 NOTICE 级别？还是有必要重写整个日志记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:06:56.283

这应该工作

```
class Level2 extends Level {
    public static final Level2 NOTICE = new Level2("NOTICE", 850);

    private Level2(String name, int level) {
        super(name, level);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:21:22.510

感谢叶夫根尼。这是完整的例子：

**系统日志级别**

```
导入 java.util.logging.Level；

公共类 SyslogLevel 扩展级别
{
    公共静态 SyslogLevel EMERG = new SyslogLevel("EMERG", 1100);
    公共静态 SyslogLevel ALERT = new SyslogLevel("ALERT", 1000);
    公共静态 SyslogLevel ERR = new SyslogLevel("ERR", 950);
    公共静态 SyslogLevel WARNING = new SyslogLevel("WARNING", 900);
    公共静态 SyslogLevel NOTICE = new SyslogLevel("NOTICE", 850);
    公共静态 SyslogLevel INFO = new SyslogLevel("INFO", 800);
    公共静态 SyslogLevel DEBUG = new SyslogLevel("DEBUG", 300);

    受保护的 SyslogLevel（字符串名称、int 值、字符串 resourceBundleName）
    {
        超级（名称，值，resourceBundleName）；
    }

    protected SyslogLevel（字符串名称，整数值）
    {
        超级（名称，值）；
    }
}

```

**日志记录**

```
导入 java.util.logging.Logger；
导入 java.util.logging.Level；
导入 java.util.logging.FileHandler；
导入 java.util.logging.SimpleFormatter；

公共类日志记录
{
    公共静态无效主要（字符串 [] 参数）
    {
        记录器 logger = Logger.getLogger("MyLog");
        文件处理程序 fh;
        尝试 {
            fh = new FileHandler ("logging.log", true);
            logger.addHandler (fh);
            logger.setLevel (Level.ALL);
            fh.setFormatter (new SimpleFormatter());
            logger.log（SyslogLevel.NOTICE，“运行！”）；
        }
        捕捉（java.io.IOException e）{
            e.printStackTrace();
        }
    }
}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:41:33.417

您可以扩展`Level class`并提供更多功能。

# c# - 其他格式的 XML 序列化

> ID：15132066
> 
> 赞同：1
> 
> 时间：2013-02-28T09:37:06.530
> 
> 标签：c#, .net, xml, xml-serialization

我有一个类`Folders`，我需要以指定的格式序列化这个类：

```
<?xml version="1.0" encoding="UTF-8"?>
<ListFolders  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Folders>
<Id>Dir_1 </Id>
    <Folders>
        <Id>Dir_1_1 </Id>
    </Folders>
    <Folders>
        <Id>Dir_1_2 </Id>
        <Folders>
        <Id>Dir_1_2_1 </Id>
        </Folders>
        <Folders>
        <Id>Dir_1_2_2 </Id>
        </Folders>
    </Folders>
</Folders>
</ListFolders> 
```

但是在序列化之后我得到了这个：

```
<?xml version="1.0" encoding="UTF-8"?>
    <ArrayOfFolders xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Folders>
    <Id>Dir_1 </Id>
    <ListFolder>
        <Folders>
            <Id>Dir_1_1 </Id>
        </Folders>
        <Folders>
            <Id>Dir_1_2 </Id>
            <ListFolder>
                <Folders>
                    <Id>Dir_1_2_1 </Id>
                </Folders>
                <Folders>
                    <Id>Dir_1_2_2 </Id>
                </Folders>
            </ListFolder>
        </Folders>
    </ListFolder>
    </Folders>
    </ArrayOfFolders> 
```

类`Folder`：

```
public class Folders
{
    public string Id { get; set; }
    public List<Folders> ListFolder { get; set; }
} 
```

如何以正确的格式序列化？

升级版：

```
using (TextWriter reader = new StreamWriter("data.xml"))
{
    (new XmlSerializer(typeof(List<Folders>))).Serialize(reader, data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:51:16.093

将`XmlElement`属性添加到文件夹列表：

```
public class Folders
{
    public string Id { get; set; }
    [XmlElement("Folders")]
    public List<Folders> ListFolder { get; set; }
} 
```

序列化`Folders`对象的结果将是

```
<?xml version="1.0"?>
<Folders xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>Dir_1</Id>
  <Folders>
    <Id>Dir_1_1</Id>
  </Folders>
  <Folders>
    <Id>Dir_1_2</Id>
    <Folders>
      <Id>Dir_1_2_1</Id>
    </Folders>
    <Folders>
      <Id>Dir_1_2_2</Id>
    </Folders>
  </Folders>
</Folders> 
```

BTW`Folders`是一个非常混乱的类名。`Folder`似乎更适合我。

# c# - 强制实体框架生成的类具有 Pascal 大小写和列名具有 Camel 大小写

> ID：15132067
> 
> 赞同：6
> 
> 时间：2013-02-28T09:37:09.963
> 
> 标签：c#, entity-framework, entity-framework-4, camelcasing, pascalcasing

我一直在使用 Entity Framework 4 和 SQL Server。我发现的主要问题是数据库中的表名都是小写并且有下划线。这意味着当我在 Visual Studio 中创建实体时，类和属性都是带有下划线的小写字母。有没有办法为创建的类实现 Pascal 大小写和属性的 Camel 大小写？

例如：

table_name--> 转换为 TableName

是否需要添加任何其他模板或任何其他方式来实现这一点。

**不建议手动编辑类名和属性，因为我有大量实体**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:51:44.203

为什么不使用 T4 模板来生成实体类？这样，您可以添加一种将表名转换为您选择的约定的方法。

VS 带有几个用于 EF 的内置 T4 模板，因此您很可能只需选择其中一个并对其进行修改。我不建议从头开始编写自己的！

如果您以前没有使用过 T4 模板，快速入门是在设计器中打开您的 EF 模型，右键单击设计图面的空白部分并选择“添加代码生成项”。这将打开一个对话框，其中包含已安装的 EF T4 模板，您可以选择您认为最合适的任何一个。

然后，您可以在解决方案资源管理器中右键单击 T4 模板文件（它将具有 .tt 扩展名）并选择“运行自定义工具”以自行生成实体。您可以编辑 .tt 文件（它只是一个纯文本文件，包含一些看起来非常像 VBScript 的东西！）并进行修改。然后再次运行自定义工具，查看生成的实体是否具有正确的名称。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T15:32:05.720

以下博客文章对如何执行此操作有很好的回应。它涉及修改创建数据模型时创建的 T4 模板文件。

[http://khalidk7.wordpress.com/2014/04/21/entity-framework-ef-t4-template-modification-to-output-pascalcasing-database-objects/](http://khalidk7.wordpress.com/2014/04/21/entity-framework-ef-t4-template-modification-to-output-pascalcasing-database-objects/)

# hadoop - 如何将数据从大型机拉到 Hadoop

> ID：15132071
> 
> 赞同：7
> 
> 时间：2013-02-28T09:37:29.067
> 
> 标签：hadoop, mainframe

我在大型机中有文件。我希望将这些数据推送到 Hadoop(HDFS)/HIVE。

我可以将 Sqoop 用于 Mainframe DB2 数据库并将其导入 HIVE，但是文件（如`COBOL`等`VASM`）呢？

是否有任何我可以编写的自定义水槽源或一些替代工具可以在这里使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T12:55:51.010

COBOL 是一种编程语言，而不是一种文件格式。如果您需要导出由 COBOL 程序生成的文件，您可以使用与这些文件由 C、C++、Java、Perl、PL/I、Rexx 等生成的文件相同的技术。

通常，您将拥有三种不同的数据源：平面文件、VSAM 文件和 DBMS，例如 DB2 或 IMS。

DMBS 具有将数据复制到平面文件中的导出实用程序。请记住，DB2 中的数据可能会被规范化，因此您可能需要相关表的内容才能理解数据。

VSAM 文件可以通过[IDCAMS](https://www.ibm.com/docs/en/zos/2.4.0?topic=commands-repro)实用程序导出为平面文件。

我强烈建议您将文件转换为文本格式，然后再将它们传输到具有不同代码页的另一个框中。尝试处理混合文本（必须翻译其代码页）和二进制（不得翻译其代码页但可能必须从大端转换为小端）比预先进行转换更难。

转换很可能通过大型机上的 SORT 实用程序完成。大型机 SORT 实用程序往往具有广泛的数据操作功能。您可以使用其他机制（其他实用程序、以您选择的语言编写的自定义代码、购买的软件包），但这是我们在这些情况下倾向于做的事情。

一旦您将平面文件转换为所有数据都是文本，您可以通过 FTP 或 SFTP 或 FTPS 将它们传输到您的 Hadoop 盒子。

这不是对该主题的详尽介绍，但它将帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T11:00:01.503

Syncsort 已经处理大型机数据 40 年（大约 50% 的大型机已经运行该软件）他们有一个名为 DMX-H 的特定产品，它可以获取大型机数据、处理数据类型转换、导入 cobol 副本并直接加载它进入 HDFS。Syncsort 最近还为 Apache Hadoop 核心贡献了一项新功能增强功能，我建议您通过 www.syncsort.com 与他们联系，他们在最近的 Cloudera 路演中的演示中展示了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-29T12:58:23.657

2018 年更新：

有许多商业产品有助于将数据从大型机转移到分布式平台。这是我遇到的那些感兴趣的人的列表。所有这些都按照问题中的描述获取 Z 上的数据，并将进行一些转换并使数据能够移动到其他平台。不是完全匹配，但是，行业已经发生了变化，将数据移动到其他平台进行分析的目标正在增长。Data Virtualization Manager 提供了最强大的工具来转换我所看到的数据。

[同步排序 IronStream](https://www.syncsort.com/en/Products/Mainframe/Ironstream)

[IBM 公共数据提供者](https://www.ibm.com/support/knowledgecenter/en/SSGE3R/product_welcome_cdpz.html)

[相关日志](https://correlog.com/)

[IBM 数据虚拟化管理器](https://www.ibm.com/us-en/marketplace/data-virtualization-manager-for-zos)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T10:43:40.300

为什么不：`hadoop fs -put <what> <where>`？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-29T16:58:33.433

cobol 布局文件的传输可以通过上面讨论的选项来完成。然而，将它们实际映射到 Hive 表是一项复杂的任务，因为 cobol 布局具有复杂的格式，如依赖子句、可变长度等，

我曾尝试创建自定义 serde 来实现，尽管它仍处于初始阶段。但这里是链接，它可能会让您了解如何根据您的要求进行反序列化。

[https://github.com/rbheemana/Cobol-to-Hive](https://github.com/rbheemana/Cobol-to-Hive)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-26T04:59:15.533

不是拉，而是推：使用 Dovetailed Technologies 的[Co:Z Launcher](https://dovetail.com/products/coz.html)。

例如（JCL 摘录）：

```
//FORWARD  EXEC PGM=COZLNCH
//STDIN    DD *
hadoop fs -put <(fromfile /u/me/data.csv) /data/data.csv
# Create a catalog table
hive -f <(fromfile /u/me/data.hcatalog)
/* 
```

其中 /u/me/data.csv（Hadoop 中所需的基于大型机的数据）和 /u/me/data.hcatalog（对应的 HCatalog 文件）是 z/OS UNIX 文件路径。

有关数据恰好是日志记录的更详细示例，请参阅将日志[提取到 Hadoop](http://www-01.ibm.com/support/knowledgecenter/SSKKZM_1.3.0_ims/fuwutsk_big_data_hadoop.dita)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-22T19:17:15.713

[Cobrix](https://github.com/AbsaOSS/cobrix)或许可以为您解决。它是 Spark 的开源 COBOL 数据源，可以解析你提到的文件。

# opengl - 什么时候编译着色器比较好？

> ID：15132072
> 
> 赞同：4
> 
> 时间：2013-02-28T09:37:34.613
> 
> 标签：opengl, glsl, shader, fragment-shader, vertex-shader

我正在尝试进入“现代”OpenGL。我想我到目前为止了解`shader`s 的概念并且我知道如何编译它们，但是我不确定什么时候这样做是好的。

有一个函数可以`shader`在应用程序启动时编译所有 s 并将它们存储在某种管理器中，这可以满足当前需要`shader`吗？

或者也许我应该只在需要它们时编译它们，而下次需要它们时只使用我已经创建的那个？

而且我认为创建`shader program`每一帧不是一个好主意。

我将不胜感激有关如何以一种好的方式组织它的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:45:41.443

> 是否有一个函数可以在应用程序启动时编译所有着色器，将它们存储在某种管理器中，该管理器将服务于当前需要的着色器？

是的。这是可以被视为OpenGL“初始化”的一次性初始化的事情之一。

# android - 具有多个表的 Android 内容提供程序未知 uri 错误

> ID：15132079
> 
> 赞同：2
> 
> 时间：2013-02-28T09:37:55.460
> 
> 标签：android, android-contentprovider, android-sqlite

我遵循了关于 sqlite 和内容提供程序的教程，但它只有一个表的示例，我最终设法弄清楚如何扩展该提供程序以包含两个表，并且一切似乎都工作正常。
我正在尝试制作的作为自我练习的应用程序现在具有待办事项模式和笔记模式，课程几乎相同，唯一的区别是一些数据库列条目。
待办事项模式（在示例中）完美运行，我可以创建新条目、查看和删除它们，而注释模式可以创建和删除条目但由于某些奇怪的原因它无法打开它们，因为它给了我一个例外关于 uri 未被识别。

这是我得到的错误：

```
02-28 10:08:40.343: E/AndroidRuntime(20079): FATAL EXCEPTION: main
02-28 10:08:40.343: E/AndroidRuntime(20079): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jackomel.maddonote/com.jackomel.maddonote.NotesDetailActivity}: java.lang.IllegalArgumentException: Unknown URI: content://com.jackomel.maddonote.contentprovider/maddonote/1
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2304)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread.access$600(ActivityThread.java:150)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.os.Looper.loop(Looper.java:137)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread.main(ActivityThread.java:5191)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at dalvik.system.NativeStart.main(Native Method)
02-28 10:08:40.343: E/AndroidRuntime(20079): Caused by: java.lang.IllegalArgumentException: Unknown URI: content://com.jackomel.maddonote.contentprovider/maddonote/1
02-28 10:08:40.343: E/AndroidRuntime(20079):    at com.jackomel.maddonote.contentprovider.MyTodoContentProvider.query(MyTodoContentProvider.java:103)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.content.ContentProvider.query(ContentProvider.java:652)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.content.ContentResolver.query(ContentResolver.java:372)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.content.ContentResolver.query(ContentResolver.java:315)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at com.jackomel.maddonote.NotesDetailActivity.fillData(NotesDetailActivity.java:102)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at com.jackomel.maddonote.NotesDetailActivity.onCreate(NotesDetailActivity.java:56)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.Activity.performCreate(Activity.java:5104)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-28 10:08:40.343: E/AndroidRuntime(20079):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
02-28 10:08:40.343: E/AndroidRuntime(20079):    ... 11 more 
```

这是我现在拥有的内容提供商（跳过发布所有导入）

```
public class MyMaddoContentProvider extends ContentProvider {
// Database
private MaddoDatabaseHelper database;

// Used for urlMacher
private static final int TODOS = 10;
private static final int TODO_ID = 20;

private static final int NOTES = 11;
private static final int NOTE_ID = 21;

private static final String AUTHORITY = "com.jackomel.maddonote.contentprovider";

private static final String BASE_PATH = "maddo";
//private static final String NOTE_PATH = "notes";
public static final Uri TODO_URI = Uri.parse("content://" + AUTHORITY + "/" + BASE_PATH + "todo");
public static final Uri NOTE_URI = Uri.parse("content://" + AUTHORITY + "/" + BASE_PATH + "note");

public static final String CONTENT_TYPE_TODO = ContentResolver.CURSOR_DIR_BASE_TYPE + "/todos";
public static final String CONTENT_ITEM_TYPE_TODO = ContentResolver.CURSOR_ITEM_BASE_TYPE + "/todo";

public static final String CONTENT_TYPE_NOTE = ContentResolver.CURSOR_DIR_BASE_TYPE + "/notes";
public static final String CONTENT_ITEM_TYPE_NOTE = ContentResolver.CURSOR_ITEM_BASE_TYPE + "/note";

public static final String[] todoAvailable = { TodoTable.COLUMN_CATEGORY,
        TodoTable.COLUMN_SUMMARY, TodoTable.COLUMN_DESCRIPTION,
        TodoTable.COLUMN_ID };
public static final String[] noteAvailable = { NotesTable.COLUMN_CATEGORY,
    NotesTable.COLUMN_SUMMARY, NotesTable.COLUMN_CONTENT, NotesTable.COLUMN_DATE,
    TodoTable.COLUMN_ID 

};

private static final UriMatcher sURIMatcher = new UriMatcher(
        UriMatcher.NO_MATCH);
static {
    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "todo", TODOS);
    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "todo" + "/#", TODO_ID);

    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "note", NOTES);
    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "note" + "/#", NOTE_ID);
}

@Override
public boolean onCreate() {
    database = new MaddoDatabaseHelper(getContext());
    return false;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {

    // Using SQLiteQueryBuilder instead of query() method
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

    // Check if the caller has requested a column which does not exists
    //checkColumns(projection);

    // Set the table
    //queryBuilder.setTables(TodoTable.TABLE_NAME);

    int uriType = sURIMatcher.match(uri);
    checkColumns(projection, uriType);
    switch (uriType) {
    case TODOS:
        queryBuilder.setTables(TodoTable.TABLE_NAME);
        break;
    case TODO_ID:
        queryBuilder.setTables(TodoTable.TABLE_NAME);
        // Adding the ID to the original query
        queryBuilder.appendWhere(TodoTable.COLUMN_ID + "="
                + uri.getLastPathSegment());
        break;
    case NOTES:
        queryBuilder.setTables(NotesTable.TABLE_NAME);
        break;
    case NOTE_ID:
        queryBuilder.setTables(NotesTable.TABLE_NAME);
        queryBuilder.appendWhere(NotesTable.COLUMN_ID + "=" + uri.getLastPathSegment());

    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }

    SQLiteDatabase db = database.getWritableDatabase();
    Cursor cursor = queryBuilder.query(db, projection, selection,
            selectionArgs, null, null, sortOrder);
    // Make sure that potential listeners are getting notified
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
}

@Override
public String getType(Uri uri) {
    return null;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsDeleted = 0;
    long id = 0;
    String curPath;
    switch (uriType) {
    case TODOS:
        System.out.println("Inserimento in tabella TODOS");
        id = sqlDB.insert(TodoTable.TABLE_NAME, null, values);
        curPath = "todo";
        break;
    case NOTES:
        System.out.println("Inserimento in tabella NOTES");
        id = sqlDB.insert(NotesTable.TABLE_NAME, null, values);
        curPath = "note";
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return Uri.parse(BASE_PATH + curPath + "/" + id);
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsDeleted = 0;
            String id;
    switch (uriType) {
    case NOTES:
        rowsDeleted = sqlDB.delete(NotesTable.TABLE_NAME, selection, selectionArgs);
        break;
    case NOTE_ID:
        id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsDeleted = sqlDB.delete(NotesTable.TABLE_NAME, NotesTable.COLUMN_ID + "=" + id, null);
        } else {
            rowsDeleted = sqlDB.delete(NotesTable.TABLE_NAME, NotesTable.COLUMN_ID + "=" + 
        id + " and " + selection, selectionArgs);
            break;
        }

    case TODOS:
        rowsDeleted = sqlDB.delete(TodoTable.TABLE_NAME, selection,
                selectionArgs);
        break;
    case TODO_ID:
        id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsDeleted = sqlDB.delete(TodoTable.TABLE_NAME,
                    TodoTable.COLUMN_ID + "=" + id, null);
        } else {
            rowsDeleted = sqlDB.delete(TodoTable.TABLE_NAME,
                    TodoTable.COLUMN_ID + "=" + id + " and " + selection,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsDeleted;
}

@Override
public int update(Uri uri, ContentValues values, String selection,
        String[] selectionArgs) {

    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsUpdated = 0;
    String id;
    switch (uriType) {
    case NOTES:
        rowsUpdated = sqlDB.update(NotesTable.TABLE_NAME, values, selection, selectionArgs);
        break;
    case NOTE_ID:
        id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsUpdated = sqlDB.update(NotesTable.TABLE_NAME, values, 
                    NotesTable.COLUMN_ID + "=" + id, null);
        } else {
            rowsUpdated = sqlDB.update(TodoTable.TABLE_NAME, values,
                    NotesTable.COLUMN_ID + "=" + id + " and " + selection, selectionArgs);
        }
        break;
    case TODOS:
        rowsUpdated = sqlDB.update(TodoTable.TABLE_NAME, values, selection,
                selectionArgs);
        break;
    case TODO_ID:
        id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsUpdated = sqlDB.update(TodoTable.TABLE_NAME, values,
                    TodoTable.COLUMN_ID + "=" + id, null);
        } else {
            rowsUpdated = sqlDB.update(TodoTable.TABLE_NAME, values,
                    TodoTable.COLUMN_ID + "=" + id + " and " + selection,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsUpdated;
}

private void checkColumns(String[] projection, int uriType) { 

    if (projection != null) {
        HashSet<String> requestedColumns = new HashSet<String>(
                Arrays.asList(projection));
        HashSet<String> availableColumns = null;
        switch (uriType) {
        case TODOS: case TODO_ID:
            availableColumns = new HashSet<String>(
                    Arrays.asList(todoAvailable));
        break;
        case NOTES: case NOTE_ID:
            availableColumns = new HashSet<String>(
                    Arrays.asList(noteAvailable));
            break;

        }

        // Check if all columns which are requested are available
        if (!availableColumns.containsAll(requestedColumns)) {
            throw new IllegalArgumentException(
                    "Unknown columns in projection");
        }
    }
}
} 
```

这些是导致错误的活动（再次跳过导入）：

```
public class NotesOverviewActivity extends ListActivity implements
LoaderManager.LoaderCallbacks<Cursor>{

private static final int ACTIVITY_CREATE = 0;
private static final int ACTIVITY_EDIT = 1;
private static final int DELETE_ID = Menu.FIRST + 1;
// private Cursor cursor;
private SimpleCursorAdapter adapter;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.notes_list);
    this.getListView().setDividerHeight(2);
    fillData();
    registerForContextMenu(getListView());
}

// Create the menu based on the XML defintion
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.listmenu, menu);
    return true;
}

// Reaction to the menu selection
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.insert:
        createNote();
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
                .getMenuInfo();
        Uri uri = Uri.parse(MyMaddoContentProvider.NOTE_URI + "/"
                + info.id);
        getContentResolver().delete(uri, null, null);
        fillData();
        return true;
    }
    return super.onContextItemSelected(item);
}

private void createNote() {
    Intent i = new Intent(this, NotesDetailActivity.class);
    startActivity(i);
}

// Opens the second activity if an entry is clicked
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, NotesDetailActivity.class);
    Uri notesUri = Uri.parse(MyMaddoContentProvider.NOTE_URI + "/" + id);
    i.putExtra(MyMaddoContentProvider.CONTENT_ITEM_TYPE_NOTE, notesUri);

    startActivity(i);
}

private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { NotesTable.COLUMN_SUMMARY };
    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.notes_row, null, from,
            to, 0);

    setListAdapter(adapter);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
}

// Creates a new loader after the initLoader () call
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { NotesTable.COLUMN_ID, NotesTable.COLUMN_SUMMARY };
    CursorLoader cursorLoader = new CursorLoader(this,
            MyMaddoContentProvider.NOTE_URI, projection, null, null, null);
    return cursorLoader;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore, delete reference
    adapter.swapCursor(null);
}

} 
```

错误似乎发生在 onListenClick 方法中，就在它启动 notesDetailActivity 之后，我将其包括在下面

```
public class NotesDetailActivity extends Activity {

private Spinner mCategory;
private EditText mTitleText;
private EditText mBodyText;
private EditText mDateText;

private Uri noteUri;

@Override
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.notes_edit);

    mCategory = (Spinner) findViewById(R.id.category);
    mTitleText = (EditText) findViewById(R.id.todo_edit_summary);
    mBodyText = (EditText) findViewById(R.id.todo_edit_description);
    mDateText = (EditText)findViewById(R.id.date); 
    mDateText.setText(java.text.DateFormat.getTimeInstance().format(Calendar.getInstance().getTime()));
    Button confirmButton = (Button) findViewById(R.id.todo_edit_button);

    Bundle extras = getIntent().getExtras();

    // Check from the saved Instance
    noteUri = (bundle == null) ? null : (Uri) bundle
            .getParcelable(MyMaddoContentProvider.CONTENT_ITEM_TYPE_NOTE);

    // Or passed from the other activity
    if (extras != null) {
        noteUri = extras
                .getParcelable(MyMaddoContentProvider.CONTENT_ITEM_TYPE_NOTE);

        fillData(noteUri);
    }

    confirmButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (TextUtils.isEmpty(mTitleText.getText().toString())) {
                makeToast();
            } else {
                setResult(RESULT_OK);
                finish();
            }
        }

    });
}

// Create the menu based on the XML defintion
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.detailsmenu, menu);
        return true;
    }

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.save:
        saveData();
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void saveData() {
    if (TextUtils.isEmpty(mTitleText.getText().toString())) {
        makeToast();
    } else {
        setResult(RESULT_OK);
        finish();
    }
}

private void fillData(Uri uri) {
    String[] projection = { NotesTable.COLUMN_SUMMARY,
            NotesTable.COLUMN_CONTENT, NotesTable.COLUMN_CATEGORY, NotesTable.COLUMN_DATE };
    Cursor cursor = getContentResolver().query(uri, projection, null, null,
            null);
    if (cursor != null) {
        cursor.moveToFirst();
        String category = cursor.getString(cursor
                .getColumnIndexOrThrow(NotesTable.COLUMN_CATEGORY));

        for (int i = 0; i < mCategory.getCount(); i++) {

            String s = (String) mCategory.getItemAtPosition(i);
            if (s.equalsIgnoreCase(category)) {
                mCategory.setSelection(i);
            }
        }

        mTitleText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(NotesTable.COLUMN_SUMMARY)));
        mBodyText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(NotesTable.COLUMN_CONTENT)));
        mDateText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(NotesTable.COLUMN_DATE)));

        // Always close the cursor
        cursor.close();
    }
}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putParcelable(MyMaddoContentProvider.CONTENT_ITEM_TYPE_NOTE, noteUri);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

private void saveState() {
    String category = (String) mCategory.getSelectedItem();
    String summary = mTitleText.getText().toString();
    String description = mBodyText.getText().toString();
    String date = mBodyText.getText().toString();

    // Only save if either summary or description
    // is available

    if (description.length() == 0 && summary.length() == 0) {
        return;
    }

    ContentValues values = new ContentValues();
    values.put(NotesTable.COLUMN_CATEGORY, category);
    values.put(NotesTable.COLUMN_SUMMARY, summary);
    values.put(NotesTable.COLUMN_CONTENT, description);
    values.put(NotesTable.COLUMN_DATE, date);

    if (noteUri == null) {
        // New note
        noteUri = getContentResolver().insert(
                MyMaddoContentProvider.NOTE_URI, values);
    } else {
        // Update note
        getContentResolver().update(noteUri, values, null, null);
    }
}

private void makeToast() {
    Toast.makeText(NotesDetailActivity.this, "Please maintain a summary",
            Toast.LENGTH_LONG).show();
}

} 
```

我显然对uri做错了，仍然不知道到底是什么，考虑到待办事项部分几乎完全相同（当然除了变量名和数据库表）并且没有给出这样的错误。
问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T20:53:42.323

我遵循了相同的示例..这是您的解决方法-

在清单和 MyMaddoContentProvider 类中更改您的权限名称，如下所示：-

```
private static final String AUTHORITY = "com.jackomel.maddonote.contentprovide.MyMaddoContentProviderr"; 
```

和

```
android:name="com.jackomel.maddonote.contentprovider.MyMaddoContentProvider" 
android:authorities="com.jackomel.maddonote.contentprovider.MyMaddoContentProvider" 
```

它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T14:52:15.560

我想我可能已经找到了解决这个问题的方法。我遇到了类似的问题，除了我的错误是说我有无效的表而不是 URI。我按照上面的 Jackomels 示例进行了他的设置表查询，并且能够让我的编辑工作。他的 Uri 的设置与我的不同，我认为这就是错误所在。他对两个表使用相同的 BASE_PATH，但我认为每个表都需要有不同的“基本路径”。

我有 private static final String BASE_PATH = "todos" & private static final String DEVICE_PATH = "devices";

我在下面粘贴我的代码，以防它帮助其他人。

```
package com.cossioinsurance.rentalsafety.contentprovider2;
import java.util.Arrays;
import java.util.HashSet;

import com.cossioinsurance.rentalsafety.database.TodoDatabaseHelper;
import com.cossioinsurance.rentalsafety.database.NoteTable;
import com.cossioinsurance.rentalsafety.database.DeviceTable;

import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;

public class MyNoteContentProvider extends ContentProvider{

	  // database
	  private TodoDatabaseHelper database;

	  // used for the UriMacher
	  private static final int TODOS = 10;
	  private static final int TODO_ID = 20;
	  private static final int DEVICES = 30;
	  private static final int DEVICE_ID = 40;

	  private static final String AUTHORITY = "com.cossioinsurance.rentalsafety.contentprovider2";

	  private static final String BASE_PATH = "todos";
	  private static final String DEVICE_PATH = "devices";

	  public static final Uri CONTENT_URI_TODOS = Uri.parse("content://" + AUTHORITY
	      + "/" + BASE_PATH);
	  public static final Uri CONTENT_URI_DEVICES = Uri.parse("content://" + AUTHORITY
		      + "/" + DEVICE_PATH);

	  public static final String CONTENT_TYPE_TODOS = ContentResolver.CURSOR_DIR_BASE_TYPE
	      + "/todos";
	  public static final String CONTENT_TYPE_DEVICES = ContentResolver.CURSOR_DIR_BASE_TYPE
		      + "/devices";

	  public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
	      + "/todo";

	  public static final String CONTENT_ITEM_TYPE2 = ContentResolver.CURSOR_ITEM_BASE_TYPE
		      + "/device";

	  private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
	  static {
	    sURIMatcher.addURI(AUTHORITY, BASE_PATH, TODOS);
	    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", TODO_ID);
	    sURIMatcher.addURI(AUTHORITY, DEVICE_PATH, DEVICES);
	    sURIMatcher.addURI(AUTHORITY, DEVICE_PATH + "/#", DEVICE_ID);
	  }

	  @Override
	  public boolean onCreate() {
	    database = new TodoDatabaseHelper(getContext());
	    return false;
	  }

	  @Override
	  public Cursor query(Uri uri, String[] projection, String selection,
	      String[] selectionArgs, String sortOrder) {

	    // Uisng SQLiteQueryBuilder instead of query() method
	    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

	    // check if the caller has requested a column which does not exists
	    checkColumns(projection);

	    // Set the table

	    int uriType = sURIMatcher.match(uri);
	    switch (uriType) {
	    case TODOS:
	    	queryBuilder.setTables(NoteTable.TABLE_TODO);
	      break;
	    case TODO_ID:
	    	queryBuilder.setTables(NoteTable.TABLE_TODO);
	      // adding the ID to the original query
	      queryBuilder.appendWhere(NoteTable.COLUMN_ID + "="
	          + uri.getLastPathSegment());
	      break;
	    case DEVICES:
	    	queryBuilder.setTables(DeviceTable.TABLE_DEVICE);
	      break;
	    case DEVICE_ID:
	    	queryBuilder.setTables(DeviceTable.TABLE_DEVICE);
	      // adding the ID to the original query
	      queryBuilder.appendWhere(DeviceTable.COLUMN_ID + "="
	          + uri.getLastPathSegment());
	      break;
	    default:
	      throw new IllegalArgumentException("Unknown URI: " + uri);
	    }

	    SQLiteDatabase db = database.getWritableDatabase();
	    Cursor cursor = queryBuilder.query(db, projection, selection,
	        selectionArgs, null, null, sortOrder);
	    // make sure that potential listeners are getting notified
	    cursor.setNotificationUri(getContext().getContentResolver(), uri);

	    return cursor;
	  }

	  @Override
	  public String getType(Uri uri) {
	    return null;
	  }

	  @Override
	  public Uri insert(Uri uri, ContentValues values) {
	    int uriType = sURIMatcher.match(uri);
	    SQLiteDatabase sqlDB = database.getWritableDatabase();
	    int rowsDeleted = 0;
	    long id = 0;
	    switch (uriType) {
	    case TODOS:
	      id = sqlDB.insert(NoteTable.TABLE_TODO, null, values);
	      break;
	    case DEVICES:
		  id = sqlDB.insert(DeviceTable.TABLE_DEVICE, null, values);
		  break;
	    default:
	      throw new IllegalArgumentException("Unknown URI: " + uri);
	    }
	    getContext().getContentResolver().notifyChange(uri, null);
	    return Uri.parse(BASE_PATH + "/" + id);

	  }

	  //Deleted Rows

	  @Override
	  public int delete(Uri uri, String selection, String[] selectionArgs) {
	    int uriType = sURIMatcher.match(uri);
	    SQLiteDatabase sqlDB = database.getWritableDatabase();
	    int rowsDeleted = 0;  
	    String id = uri.getLastPathSegment();
	    switch (uriType) {
	    case TODOS:
	      rowsDeleted = sqlDB.delete(NoteTable.TABLE_TODO, selection,
	          selectionArgs);
	      break;
	    case TODO_ID:

	      if (TextUtils.isEmpty(selection)) {
	        rowsDeleted = sqlDB.delete(NoteTable.TABLE_TODO,
	            NoteTable.COLUMN_ID + "=" + id, 
	            null);
	      } else {
	        rowsDeleted = sqlDB.delete(NoteTable.TABLE_TODO,
	            NoteTable.COLUMN_ID + "=" + id 
	            + " and " + selection,
	            selectionArgs);
	      }
	      break;
	    case DEVICES:
		      rowsDeleted = sqlDB.delete(DeviceTable.TABLE_DEVICE, selection,
		          selectionArgs);
		      break;
		    case DEVICE_ID:

		      if (TextUtils.isEmpty(selection)) {
		        rowsDeleted = sqlDB.delete(DeviceTable.TABLE_DEVICE,
		            DeviceTable.COLUMN_ID + "=" + id, 
		            null);
		      } else {
		        rowsDeleted = sqlDB.delete(NoteTable.TABLE_TODO,
		            DeviceTable.COLUMN_ID + "=" + id 
		            + " and " + selection,
		            selectionArgs);
		      }
		      break;
	    default:
	      throw new IllegalArgumentException("Unknown URI: " + uri);
	    }
	    getContext().getContentResolver().notifyChange(uri, null);
	    return rowsDeleted;
	  }

	  //Update Rows
	  @Override
	  public int update(Uri uri, ContentValues values, String selection,
	      String[] selectionArgs) {

	    int uriType = sURIMatcher.match(uri);
	    SQLiteDatabase sqlDB = database.getWritableDatabase();
	    int rowsUpdated = 0;

	    switch (uriType) {
	    case TODOS:
	      rowsUpdated = sqlDB.update(NoteTable.TABLE_TODO, 
	          values, 
	          selection,
	          selectionArgs);
	      break;
	    case TODO_ID:
	    	String id = uri.getLastPathSegment();
	      if (TextUtils.isEmpty(selection)) {
	        rowsUpdated = sqlDB.update(NoteTable.TABLE_TODO, 
	            values,
	            NoteTable.COLUMN_ID + "=" + id, 
	            null);
	      } else {
	        rowsUpdated = sqlDB.update(NoteTable.TABLE_TODO, 
	            values,
	            NoteTable.COLUMN_ID + "=" + id 
	            + " and " 
	            + selection,
	            selectionArgs);
	      }
	      break;
	    case DEVICES:
		      rowsUpdated = sqlDB.update(DeviceTable.TABLE_DEVICE, 
		          values, 
		          selection,
		          selectionArgs);
		      break;
		    case DEVICE_ID:
		    	id = uri.getLastPathSegment();
		      if (TextUtils.isEmpty(selection)) {
		        rowsUpdated = sqlDB.update(DeviceTable.TABLE_DEVICE, 
		            values,
		            DeviceTable.COLUMN_ID + "=" + id, 
		            null);
		      } else {
		        rowsUpdated = sqlDB.update(DeviceTable.TABLE_DEVICE, 
		            values,
		            DeviceTable.COLUMN_ID + "=" + id 
		            + " and " 
		            + selection,
		            selectionArgs);
		      }
		      break;
	    default:
	      throw new IllegalArgumentException("Unknown URI: " + uri);
	    }
	    getContext().getContentResolver().notifyChange(uri, null);
	    return rowsUpdated;
	  }

	  private void checkColumns(String[] projection) {
	    String[] available = { NoteTable.COLUMN_CATEGORY,
	        NoteTable.COLUMN_SUMMARY, NoteTable.COLUMN_DESCRIPTION, NoteTable.COLUMN_EMAIL, NoteTable.COLUMN_RENTALDATES, 
	        NoteTable.COLUMN_ENDDATES, NoteTable.COLUMN_TIME, NoteTable.COLUMN_LOCATION, NoteTable.COLUMN_NOTES,
	        NoteTable.COLUMN_ID, DeviceTable.COLUMN_ID, DeviceTable.COLUMN_CATEGORY, DeviceTable.COLUMN_NAME, DeviceTable.COLUMN_TYPE };
	    if (projection != null) {
	      HashSet<String> requestedColumns = new HashSet<String>(Arrays.asList(projection));
	      HashSet<String> availableColumns = new HashSet<String>(Arrays.asList(available));
	      // check if all columns which are requested are available
	      if (!availableColumns.containsAll(requestedColumns)) {
	        throw new IllegalArgumentException("Unknown columns in projection");
	      }
	    }
	  }
}
```

# java - TransformerFactory.newTransformer 出现 Java 不可预测的错误

> ID：15132080
> 
> 赞同：0
> 
> 时间：2013-02-28T09:37:57.030
> 
> 标签：java, xslt

我面临一个非常烦人的问题，使服务器Java进程终止，从这段代码中踢出（精简）：

```
_sesXslProc = new ArrayList<Transformer>();
TransformerFactory tFactory = TransformerFactory.newInstance();
for( String it : lesFichiers )
{
    try
    {
        _sesXslProc.add( tFactory.newTransformer( new StreamSource( it ) ) ); // breaks there
    }
    catch( Exception ex )
    {
        ...
    }    
} 
```

此代码由 cron 在服务器上运行，可以同时运行许多这样的进程（最多 5 个），ex.getMessage 显示：

```
javax.xml.transform.TransformerConfigurationException: Chargement impossible de la classe translet 'cdt17totifv3'

EN : Unable to load Translet class 'cdt17totifv3' 
```

因此，我坚持这一点，手动启动流程很好（通常很少失败）。

有没有人知道*什么*会导致 XSL 转换初始化失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:47:35.437

在我看来，这就像几个不同的线程或进程试图同时使用相同的资源并相互干扰的问题。也许他们正在根据当前时钟时间生成一个临时文件名，因此有时会有多个进程选择相同的名称。

如果您有多个操作系统级进程同时运行，请尝试为其`java.io.tmpdir`系统属性赋予每个不同的值，以使它们使用不同的临时目录。如果它是同一个 java 进程中的多个线程，那么我不知道除了将`newTransformer`调用包装在一个`synchronized`块中之外是否还有很多选择。

# algorithm - 查找与总和列表相对应的对组

> ID：15132082
> 
> 赞同：8
> 
> 时间：2013-02-28T09:38:02.320
> 
> 标签：algorithm, matching, subset-sum

给定两个数字列表和一个总计列表（没有任何特定顺序）：

```
a = [1,2,3]
b = [4,5,6]
c = [6,7,8] 
```

我怎样才能找到所有成对的集合，`d`使得`d[k] = (a[i], b[j])`从`c[k] = a[i] + b[j]`a 和 b 中使用对而不替换？（所有列表都可以有重复项）

```
d = [(1,5), (3,4), (2,6)]
d = [(2,4), (1,6), (3,5)] 
```

对于`c = [7,7,7]`：

```
d = [(1,6), (2,5), (3,4)] 
```

（1个答案，因为所有排列本质上都是等价的）

我想用长度约为 500 的列表来做这件事，所以天真的匹配/回溯搜索是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T06:02:34.483

好的，有修剪的蛮力方法。这需要 O(N^3)

为了便于演示，我将通过一个 N×N 正方形，其中**a**和**b之和**

```
S:
 + | 4 5 6 
 --|-------
 1 | 5 6 7 
 2 | 6 7 8
 3 | 7 8 9 
```

我正在寻找构建 c={6,7,8}我在**S**
中找到一个“6” 。我将其删除，并将其行和列标记为不可用

 **```
S:
 + | 4 5 6 
 --|-------
 1 | / X / 
 2 | 6 / 8
 3 | 7 / 9

Solution = { (1,5) } 
```

然后我试着找到一个'7'

```
S:
 + | 4 5 6 
 --|-------
 1 | / X / 
 2 | / / 8
 3 | X / /

Solution = { (1,5) (3,4) } 
```

最后是“6”

```
S:
 + | 4 5 6 
 --|-------
 1 | / X / 
 2 | / / X
 3 | X / /

Solution = { (1,5) (3,4) (2,6) } 
```

第一个循环（'6' 的循环）将继续并找到另一个匹配项：(2,4)。这将形成第二个解决方案 { (2,4) (1,6) (3,5) }

现在，改进这一点的一种方法是，使用一些动态编程：找出所有可能的组合，预先给出结果。

```
Given c={ 6 7 8}, create sets S_x where x is {6,7,8} and 
    S_x = { (i,j) } such that S[i][j]=x
So:
    S_6 = { (1,2) (2,1) }
    S_7 = { (1,3) (2,2) (3,1)  }
    S_8 = { (2,3) (3,2) } 
```

现在，具有给定启发式的相同算法将在 O(S_l1 * S_l2 * ... S_lN) 中运行，其中 S_li 表示 S_i 的长度。

在一般情况下，这**可能**运行得更快。它还将正确处理 c={7,7,7} 的情况。

这就是我所得到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:11:02.187

这是 C++ 中的蛮力方法。它不会修剪等价排列，例如 c=[7,7,7]。

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <utility>

using namespace std;

// numerical 3d match: x + y + z = b where                                                                                         
// x = a, y = b, z = -c, b = 0                                                                                                     
template <typename T>
vector<pair<vector<T>, vector<T> > > n3dmatch(vector<T> a, vector<T> b, vector<T> c) {
  vector<pair<vector<T>, vector<T> > > result;
  if (a.size() != b.size() || b.size() != c.size()) return result;

  vector<vector<T> > ap, bp;
  sort(a.begin(), a.end());
  sort(b.begin(), b.end());
  do { ap.push_back(a); } while (next_permutation(a.begin(), a.end()));
  do { bp.push_back(b); } while (next_permutation(b.begin(), b.end()));

  for (int i = 0; i < ap.size(); i++) {
    for (int j = 0; j < ap.size(); j++) {
      bool match = true;
      for (int k = 0; k < a.size(); k++) {
        if ((ap[i][k] + bp[j][k]) != c[k]) {
          match = false; break;
        }
      }
      if (match) result.push_back({ ap[i], bp[j] });
    }
  }
  return result;
}

int main(int argc, char *argv[]) {
  vector<int> a = { 1, 2, 3 };
  vector<int> b = { 4, 5, 6 };
  vector<int> c = { 6, 7, 8 };
  //vector<int> c = { 7, 7, 7 };                                                                                                   
  auto result = n3dmatch(a, b, c);
  for (int i = 0; i < result.size(); i++) {
    vector<int> &a = result[i].first;
    vector<int> &b = result[i].second;
    for (int j = 0; j < a.size(); j++) cout << a[j] << " "; cout << endl;
    for (int j = 0; j < b.size(); j++) cout << b[j] << " "; cout << endl;
    cout << "-" << endl;
  }
  return 0;
} 
```**

# javascript - jQuery添加输入字段并处理选择更改事件

> ID：15132083
> 
> 赞同：0
> 
> 时间：2013-02-28T09:38:11.807
> 
> 标签：javascript, jquery

我想用 1 个输入或选择和 1 个选择字段克隆一行。取决于第一个选择的值，它应该将第二个更改为输入或选择字段。它适用于父母，但不适用于克隆。

```
 jQuery("body").delegate("p", "click", function(){
        var $tr    = jQuery(this).closest('.tr_clone');
        var $clone = $tr.clone();
        $tr.after($clone);
    });
    jQuery('.art_der_fahrt').hide();
    jQuery('.wert_input').show();
    jQuery(".fahrtenbuch_aenderungen").change(function() {
                if(jQuery(this).val() == '52') {
                    jQuery(this).parent('td').next('td').children(".art_der_fahrt").show();
                    jQuery(this).parent('td').next('td').children('.wert_input').hide();
                }
                else {
                    jQuery(this).parent('td').next('td').children(".art_der_fahrt").hide();
                    jQuery(this).parent('td').next('td').children('.wert_input').show();
                }

            });

<td>
    <select class="fahrtenbuch_aenderungen" name="fahrtenbuch_aenderungen">
      <option></option>
      <option value="24">Fahrtziel</option>
      <option value="23">Besuchte Personen / Firmen / Objekte</option>
      <option value="3">Fahrer</option>
      <option value="52">Art der Fahrt</option>
      <option value="14">Fahrzeugstandort</option>
      <option value="111">Fahrtzweck</option>
    </select>
</td>
<td>
    <input value="" class="wert_input" name="wert" type="text">
    <span class="art_der_fahrt">
        <select tabindex="111" class="test" name="select">
            <option></option>
            <option value="Dienstfahrt">Dienstfahrt</option>
            <option selected="selected" value="Wohnung">Wohnung</option>
            <option value="Bereitschaft">Bereitschaft</option>
            <option value="3">Fahrer</option>
            <option value="52">Privatfahrt</option>
            <option value="Familienheimfahrt">Familienheimfahrt</option>
        </select>
    </span>

</td>
<td colspan="2">
<p>Click me!</p>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:39:51.803

采用`.on`

```
jQuery(document).on("click", "p", function(){ 
```

还

```
jQuery(".fahrtenbuch_aenderungen").on('change',(function() { 
```

因为 .on 已经替换了`.live`and`.bind`和`.delegate`。并且 .on 也比其他更快.. [http://jsperf.com/bind-vs-live-vs-delegate-vs-on/5](http://jsperf.com/bind-vs-live-vs-delegate-vs-on/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:50:38.623

您正在绑定更改侦听器 –</p>

```
jQuery(".fahrtenbuch_aenderungen").change(function() { 
```

– 在只有一个`select`元素的时候。只有那个元素会有监听器。您还需要在这里使用委托：

```
jQuery("body").delegate(".fahrtenbuch_aenderungen", "change", function() { 
```

在这里使用`.delegate`，从某种意义上说，你已经在自己的帖子中使用了它，假设是旧版本的 jQuery。正如其他人指出的那样，您应该更喜欢`.on`它是否可用。

[演示](http://jsfiddle.net/XzkA6/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T09:42:19.643

使用以下

```
$("td > p").on("click", function(){
    // your code here
}); 
```

"on" 可以将事件绑定到动态生成的 dom

# iphone - 一起播放 .mp3 文件的两个循环

> ID：15132085
> 
> 赞同：1
> 
> 时间：2013-02-28T09:38:16.917
> 
> 标签：iphone, ios

有没有办法在 iphone sdk 中一起播放声音文件的 2 个循环

谢谢和问候 shweta

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:43:00.857

```
 #import <Foundation/Foundation.h>
    #import <AVFoundation/AVFoundation.h>

    @interface MultiAVPlay : NSObject <AVAudioPlayerDelegate> {
        AVAudioPlayer* myplayer;
        NSArray* fileNames;
        int ind;
    }

    @property (nonatomic, retain) AVAudioPlayer* myplayer;
    @property (nonatomic, retain) NSArray* fileNames;

    - (id)initWithFileNameQueue:(NSArray*)names;
    - (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag;
    - (void)play:(int)i;
    - (void)stop;

    @end

#import "MultiAVPlay.h"
@implementation MultiAVPlay
@synthesize myplayer, fileNames;

- (id)initWithFileNameQueue:(NSArray*)files {
    if ((self = [super init])) {
        self.fileNames = files;
        index = 0;
        [self play:index];
    }
    return self;
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    if (index < fileNames.count) {
        [self playMp3:index];
    } else {
        //reached end of queue
    }
}

- (void)playMp3:(int)i {
    self.myplayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:[fileNames objectAtIndex:i] ofType:nil]] error:nil];
    [myplayer release];
    myplayer.delegate = self;
    [myplayer prepareToPlay];
    [myplayer play];    
    index++;
}

- (void)stop {
    if (self.myplayer.playing) [myplayer stop];
}

- (void)dealloc {
    self.filenames = nil;
    self.myplayer = nil;        
    [super dealloc];
}

@end 
```

# c# - 在运行时将字符串转换为对象类型

> ID：15132094
> 
> 赞同：0
> 
> 时间：2013-02-28T09:38:35.767
> 
> 标签：c#, reflection

我有一堂课，简单的像

```
class Example
{
    uint id;
    ushort value1;
    string value2;
    DateTime timestamp;
 } 
```

我也有一个csv，比如：

```
id;value1;value2;timestamp
5;0x2313;whatever;2012-12-23-12:14:34,567
6;0x2A14;something;2012-12-24:13:14:15:167 
```

我想基于 CSV 创建对象，但是*真正的*类要大得多并且容易改变，所以我想使用反射。我有一些代码获取属性的名称并找到相应的字符串。我没有得到的是，如何将字符串转换为属性的任何类型。我发现了一些代码示例如何转换值，但是将字符串转换为短字符串并不是一个解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:41:23.653

您可以使用以下[`Convert.ChangeType`](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)方法：

```
myObject.Field = Convert.ChangeType(value, fieldType); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:41:16.537

您可能想查看[Convert](http://msdn.microsoft.com/en-us/library/bds4fye2.aspx)类。如果您知道要将字符串转换为的类型，则可以使用它。

或者，您可以使用该类型的 Parse() 或 TryParse() 方法。

例如，要将字符串转换为短字符串，您可以使用[Int16.TryParse()](http://msdn.microsoft.com/en-us/library/9hh1awhy.aspx)

# jquery - 样式 Jquery 对话框内容 div

> ID：15132096
> 
> 赞同：1
> 
> 时间：2013-02-28T09:38:39.407
> 
> 标签：jquery, dialog

我有这种情况：

```
var div = document.createElement('div');
div.id="content";

$(div).dialog('open'); 
```

div 的内容在对话框中打开，但我无法设置它的样式。我试图通过 id 或 className 访问它。问题是我想让内容填充对话框的 100% 宽度和高度。

我看起来 JQuery 以某种方式覆盖了我的 CSS。请帮忙...

CSS：

```
#content {
    width:100%;
    height:100%;
    background-color:black;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:46:18.677

对于您可以提供的样式，它可能会对您有所帮助

```
#content{
    width:100%;
    height:100%;
    background-color:black;
    position:fixed;
    top:0;
    left:0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:42:55.000

尝试更高级一点，但让对话更好一点:)

```
 $("#myDialog").dialog(
    {                                
        modal: true,
        show: "fade",
        hide: "fade",
        draggable: false,
        resizable: false,
        closeOnEscape: false,
        width: 400,
        position: "top",
        buttons: 
        {
            Close:  function()
                    { 
                        $(this).dialog('close');                                
                    }
        },
        open:   function()
                {        
                    /* styling dialog */
                    $(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").remove();             
                    $(this).parents(".ui-dialog").css("padding", 5);  
                    $(this).parents(".ui-dialog").css("border", 0);
                    $(this).parents(".ui-dialog:first").find(".ui-dialog-content").css("padding", 0);

                    $(this).css("-webkit-box-shadow", "0px 0px 10px rgba(0, 0, 0, 0.8)");
                    $(this).parents(".ui-dialog").css("-webkit-box-shadow", "0px 0px 10px rgba(0, 0, 0, 0.8)");
                    $(this).parents(".ui-dialog").css("-moz-box-shadow", "0px 0px 10px rgba(0, 0, 0, 0.8)");                        
    }); 
```

# c++ - C++ 检查参数是否为动态数组。有必要吗？

> ID：15132104
> 
> 赞同：0
> 
> 时间：2013-02-28T09:39:21.830
> 
> 标签：c++

```
void Example1( char* ArrayA, unsigned int Length )
{
    if( ArrayA == 0 )
    {
        ArrayA = new char[ Length + 1 ];
        // Fill it with 2 - whatever
        ::memset( ArrayA, 0x02, sizeof( char ) * Length );
        ArrayA[ Length ] = '0\n';
    }
    // Do whatever with ArrayA

    // Clean-Up
    // Error occurs
    delete [ ] ArrayA;
};

void Example2( char* ArrayB, unsigned int Length )
{
    bool IsDynamic = false;
    if( ArrayB == 0 )
    {
        ArrayB = new char[ Length + 1 ];
        // Fill it with 2 - whatever
        ::memset( ArrayB, 0x02, sizeof( char ) * Length );
        ArrayB[ Length ] = '0\n';
        IsDynamic = true;
    }
    // Do whatever with ArrayA

    // Clean-Up
    // Have to check...
    if( IsDynamic )
        delete [ ] ArrayB;
};

int main( void )
{
    Example1( "\x01\x02\0x03", 3 ); // Example1 WILL NOT* declare ArrayA as a dynamic array - ERROR (caused by deleting non dynamic array)

    Example2( 0, 3 ); // ArrayB will be a dynamic array - OK
    Example1( 0, 3 ); // OK

    Example2( "\x04\x05\0x06", 3 ); // ArrayB isn't a dynamic array - OK

    return ( 0 );
}; 
```

尝试删除函数 Example1 中的 char* ArrayA 时会出现问题，因为 ArrayA 不是动态数组。如果它等于零/空，它只会是一个动态数组。所以，为了解决这个问题，我创建了一个类似的函数 - Example2。唯一的区别是 Example2 有一个布尔值，用于检查 char* ArrayB 是否为动态数组。

我知道我在做什么是不正确的或“noobish”。所以请帮助我。我会从我的错误中吸取教训。

你会怎么做？

```
void Example3( char* ArrayC, unsigned int Length ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:48:31.677

也许你可以使用这个：

```
void Example2( char* ArrayB, unsigned int Length )
{
    std::vector< char > internalArray;
    if ( ArrayB != 0 )
    {
        internalArray.assign( ArrayB, ArrayB + Length );
    }
    else
    {
        internalArray.resize( Length, 0x2 );
    }
    // Do whatever with internalArray !!! <-------

    // No (!!!) clenup need
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:42:22.497

> 我知道我在做什么是不正确的或“noobish”。所以请帮助我。

我的总体建议是从使用 C 数组转为使用`std::vector`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:54:04.270

你`example1`绝对是坏的，因为它试图释放一个不是动态分配的数组——这是永远不对的。正如其他地方所解释的，如果您跨 DLL 边界调用，您可能还有不同的分配器，所以如果内存没有分配到它被删除的地方，事情就会出错。让分配它的人删除它。最好使用已经存在的标准功能，例如`std::vector`

你`example2`只使用`delete`在函数中创建的东西，这很好。它不会尝试`delete`在同一个分配器中分配它不知道的东西。然而， a`std::vector`肯定会更容易处理。

# git - 无跟踪推送的用例

> ID：15132108
> 
> 赞同：3
> 
> 时间：2013-02-28T09:39:36.300
> 
> 标签：git, push

当我将纯本地分支推送到 SmartGit 中的远程时，它会询问我是否配置跟踪。我总是选择配置它，因为我不明白为什么根本不应该配置跟踪。

是否存在在*不*配置跟踪的情况下推送分支有意义的用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:38:08.300

你从 remote1 拉，但你推到 remote2。

您只能跟踪一个遥控器。如果您跟踪 remote1，那么您不能同时跟踪 remote2。

# objective-c - 架构 armv7 和 Phonegap 的未定义符号

> ID：15132110
> 
> 赞同：0
> 
> 时间：2013-02-28T09:39:40.253
> 
> 标签：objective-c, xcode, cordova, compiler-errors, linker-errors

我有一个使用 Phonegap 作为组件的静态 iOS 库。（我按照文档提供的步骤），我可以单独编译库没有问题。现在我尝试在 iOS 应用程序中使用我的静态库。所以我有我的应用程序，它有一个对我的静态库的项目引用，它有一个对 phonegap 的项目引用。看起来像

*   应用程序
*   *   图书馆
*   *   *   电话间隙

现在，当我要编译时，会出现很多错误，并且看起来像：

```
Undefined symbols for architecture armv7:
"_kUTTypeVideo", referenced from:
  -[CDVCapture captureVideo:] in libmyLibrary.a(CDVCapture.o) 
```

我尝试以多种组合更改有效架构，并且交换机仅构建有效架构，但没有任何效果。

如果它有帮助，它就不是 ARC 项目......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:43:17.840

我遇到了同样的问题...看来您使用的是旧版本的 PhoneGap（比如 1.2 ...）。这个问题的唯一解决方案是使用 Cordova 库（最新的），它解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:52:24.427

我目前发现了问题，我必须将 phonegap 文档中描述的所有框架导入到使用 phonegap 的静态库中，而且还导入到主应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:56:18.950

您使用的 cordova 库似乎与 armv7 不兼容。使用与 armv7 架构兼容的最新 cordova 库。

# android - 安卓增强现实。传感器读数错误

> ID：15132114
> 
> 赞同：0
> 
> 时间：2013-02-28T09:39:55.357
> 
> 标签：android, augmented-reality

首先，对不起我的英语。我正在按照 Raghav Sood 书中的步骤编写适用于 Android 的增强现实浏览器。它的标题是 Pro Android Augmented Reality。问题是，当我在我的设备中启动第 9 章的示例（名为 Pro Android AR 9 并位于[https://github.com/RaghavSood/ProAndroidAugmentedReality](https://github.com/RaghavSood/ProAndroidAugmentedReality)）时，它是否正常工作取决于设备的类型。

在我的带有 Android 4.0.4 的 Sony Ericsson Xperia Arc 中，Raghav 实现的浏览器运行良好。当我在 Asus Eee Pad Transformer 或 Samsung Galaxy Tab 中测试增强现实浏览器时，它们都使用 Android 4.0.3，传感器的读数似乎是错误的。将平板电脑以横向模式放在我面前，如果我专注于一个点（维基百科、推特或本地标记）并将自己向右翻转，这些点就会下降。如果我向左转，斑点会上升。如果我想让这些点向左移动，我必须倾斜设备，使它们的屏幕看起来朝向地面。以同样的顺序，如果我转动使屏幕向上看的设备，这些点将向右移动。

似乎该程序混淆了传感器读数。有谁知道怎么解决这个问题？？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:53:09.980

我做到了。我不知道这是否是一个好的解决方案，但似乎在平板电脑上运行良好。

将轴更改为：

```
SensorManager.remapCoordinateSystem(temp, SensorManager.AXIS_X, SensorManager.AXIS_Y, rotation) 
```

在 SensorActivity 中似乎修复了轴故障。另一个问题是与每个 POI 相关联的文本出现在使用横向模式的平板电脑中。为了避免这种情况，我在 PaintablePosition 类的 set 方法中使用了条件旋转修改：

```
if(drawObj.toString().toLowerCase().contains("paintableboxedtext")) rotation=rotation+270; 
```

# php - 如何禁用从 cakephp 的下拉列表中选择一个或多个选项？

> ID：15132116
> 
> 赞同：4
> 
> 时间：2013-02-28T09:40:03.713
> 
> 标签：php, jquery, html, cakephp

我想禁用下拉列表中的一些选项，我有一个这样的数组

```
 array(
'all' => 'ALL',
'skip1' => 'User Define Groups:',
(int) 43 => '--Usii Group2',
(int) 105 => '--Usii Mailing [ mailing list]',
(int) 106 => '--test [ mailing list]',
'skip2' => 'Dynamic Define Groups:'

i want to disable value of skip1 and skip2, if user click on skip1 and skip2 value it can't be select in dropdown list, this is my view file     

    echo $this->FormManager->input('view',array('label'=>'View ','type'=>'select','options'=>$viewGroup,'default'=>$default)); 
```

任何人都可以帮助做到这一点，将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:56:19.540

我认为您应该禁用客户端的选项，即来自 Jquery 的类似这样的选项

**HTML**

```
<select>
    <option value="all">ALL/option>
    <option value="skip1">User Define Groups:</option>
    <option value="43 ">--Usii Group2</option>
    <option value="105">--Usii Mailing [ mailing list]</option>
    <option value="106">--test [ mailing list]</option>
    <option value="skip2">'Dynamic Define Groups:</option>
</select> 
```

**jQuery**

```
$('option[value=skip1]').prop('disabled', true);
$('option[value=skip2]').prop('disabled', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T10:30:33.127

为了补充 Moyed Ansari 的回答：您可以使用 .attr jquery 函数。

```
$('option[value=skip1]').attr('disabled', true);
$('option[value=skip2]').attr('disabled', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T11:11:45.873

尝试通过以下方式重新排列数组：

```
 array(
      'all' => 'ALL',
      'skip1' => array(
           'name' => 'User Define Groups:',
           'value' => 'skip1',
           'disabled' => true
      )
      (int) 43 => '--Usii Group2',
      (int) 105 => '--Usii Mailing [ mailing list]',
      (int) 106 => '--test [ mailing list]',
      'skip2' => (
           'name' => 'Dynamic Define Groups:'
           'value' => 'skip2',
           'disabled' => true
      )
 ) 
```

或者你可以简单地在你的视图上试试这个：

```
echo $this->FormManager->input('view',array('label'=>'View ','type'=>'select','options'=>$viewGroup,'default'=>$default, 'disabled'=>array('skip1','skip2'))); 
```

两者都不需要任何 JavaScript 或 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:46:31.990

使用数组数组。

```
$values = array(
  'all' => 'all',
  'skip1' => array(
    5 => 'ex',
    6 => 'ex',
    7 => 'ex',
  ),
  'skip2' => array(
    5 => 'ex',
    6 => 'ex',
    7 => 'ex',
  )
) 
```

见这里：[http ://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::select](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::select)

# ios - 将应用程序“重置”为默认状态

> ID：15132119
> 
> 赞同：2
> 
> 时间：2013-02-28T09:40:13.410
> 
> 标签：ios, objective-c

我的堆栈中有导航控制器和一些根视图控制器的应用程序。我需要一种将应用程序状态重置为默认值的方法，即当我的应用程序中的任何时候只有navigationController 并且它是根viewController 时。例如，我向后端发出一些后台数据请求并获得响应，这表示我必须立即注销用户。在那一刻，让我们假设，用户已经在 navigationController 堆栈中打开了很多其他的 viewController，并且可能一些展示了带有自己的 navigationController 的 viewController。所以我需要一种将用户从他所在的地方拉回到应用程序的根视图控制器的方法。

我知道这是一个糟糕的用户体验，但它绝对比崩溃的应用程序要好，无论如何这应该是一种罕见的情况。

我不认为在所有视图控制器之间创建连锁反应，将它们一个接一个地解除，直到它到达我的根视图控制器对我来说是一个好主意。在每个 VC 中都有太多相同的代码，我不想创建 UIViewController 的子类并从中继承我所有的 VC 来完成这项工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:48:55.600

您可以使用`[self.navigationController popToRootViewControllerAnimated:YES];` 从应用程序的任何视图转到主 rootview 控制器。

# c# - 使用 OpenEMM Web 服务 2.0 进行身份验证

> ID：15132124
> 
> 赞同：0
> 
> 时间：2013-02-28T09:40:30.347
> 
> 标签：c#, soap-client

有没有人有使用 OpenEMM Web 服务的经验？

每当我连接到服务时，都会出现以下错误：

com.sun.xml.wss.XWSSecurityException：未满足摘要密码的接收方要求；嵌套异常是 com.sun.xml.wss.XWSSecurityException：com.sun.xml.wss.XWSSecurityException：未满足摘要密码的接收方要求

这是我的 web.config 文件：

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="openemmSoap11">
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Digest" />
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://newsletter.********.co.uk/openemm-ws2/" binding="basicHttpBinding"
        bindingConfiguration="openemmSoap11" contract="emmservice.openemm"
        name="openemmSoap11" />
    </client>
  </system.serviceModel> 
```

（我在 apache 上安装 ssl 证书玩得很开心）

这是我的实现：

```
 var param = new[]
        {
            new MapItem {key = "email", value = "*******************"},
            new MapItem {key = "mailtype", value = "0"}, new MapItem {key = "gender", value = "0"}
        };

    var service = new AddSubscriberRequest
        {
            parameters = param,
            overwrite = false,
            doubleCheck = true,
            keyColumn = "email"
        };

    var request = new openemmClient();
    request.ClientCredentials.UserName.UserName = "***********";
    request.ClientCredentials.UserName.Password = "********";
    request.Open();
    request.AddSubscriber(service);
    request.Close(); 
```

有什么想法我可能会出错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T16:27:02.007

OpenEMM Web services 2.0 要求创建nonce、时间戳和密码加密。官方文档在[这里](ftp://ftp.heanet.ie/disk1/sourceforge/o/op/openemm/OpenEMM%20documentation/Documentation%20%28latest%20versions%29/Webservice-API_2.0_EN_1.1.2.pdf)

您没有随机数或密码加密首先尝试文档示例

如果您在实施方面需要帮助 - 询问！

# ios - 无法更改 UISearchBar 中取消按钮的标题

> ID：15132125
> 
> 赞同：2
> 
> 时间：2013-02-28T09:40:31.317
> 
> 标签：ios, uibutton, uiappearance, xamarin.ios

我想更改`UISearchBar`使用 MonoTouch 的取消按钮的标题。是的，我见过这种“ [hack](https://stackoverflow.com/questions/15130180/how-can-i-change-string-of-cancel-button-using-monotouch) ”，但我更喜欢更优雅的方式。我正在尝试使用：

```
UIButton.AppearanceWhenContainedIn(typeof(UISearchBar)).SetTitle("xxxx"); 
```

它应该在objective-c中工作，但在MonoTouch中我得到以下错误

> 消息：错误 CS1061：键入 `MonoTouch.UIKit.UIButton.UIButtonAppearance' does not contain a definition for`SetTitle' 并且找不到扩展方法`SetTitle' of type` MonoTouch.UIKit.UIButton.UIButtonAppearance'（您是否缺少 using 指令或程序集引用？）

我正在使用 Xamarin Studio 版本。4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:22:20.030

这很*老套——Objective* -C 代码之所以有效，是因为*当前*的实现`UIAppearance`使用了代理对象。IOW Apple 没有承诺保持实现相同，并且没有记录该特定功能。

既然您已经意识到了这一点，并且如果您仍想将它与 Xamarin.iOS 一起使用，那么您可以使用我在此[Q&A](https://stackoverflow.com/q/14531463/220643)中描述的 hack 来完成它。这将允许您在代理上使用任何`UIButton`API 。`UIAppearance`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:15:35.970

为什么不使用更轻量级的 hack？

```
 public static void SetSearchBarCancelButtonTitle (UISearchBar sb, string title)
    {
        foreach (var subview in sb.Subviews)
            if (subview is UIButton)
                (subview as UIButton).SetTitle (title, UIControlState.Normal);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T04:04:45.620

UIButton 似乎不再是 UISearchBar 的直接子视图。你必须像下面这样递归，直到找到它：

```
 public static bool SetButton(UIView parentView, string title, UIColor tint)
        {
            foreach (var sub in parentView.Subviews)
            {
                if (sub is UIButton)
                {
                    (sub as UIButton).SetTitle(title, UIControlState.Normal);
                    (sub as UIButton).SetTitleColor(tint, UIControlState.Normal);
                    return true;
                }

                if (SetButton(sub, title, tint))
                    return true;
            }

            return false;
        } 
```

# asp.net - 动态数据驱动的网站本地化

> ID：15132130
> 
> 赞同：0
> 
> 时间：2013-02-28T09:40:47.930
> 
> 标签：asp.net, localization, data-driven

我有一个网站，可以从数据库中读取其部分内容，我需要该网站的语言版本，英语和阿拉伯语。

所需内容以两种语言在数据库中复制。假设我的数据库中有一个 En_Name 和 Ar_Name 列。

例如，对于网站的阿拉伯语版本，链接将显示来自 Ar_Name 的文本，而对于英文版本，它应该显示来自 En_Name 的文本。

对于我网站中的静态内容，我认为使用 ASP.NET 默认本地化（使用 .resx 文件）是个好主意。但我不知道如何对网站的动态部分进行本地化。

那么，如何根据用户选择（本地化）从 Ar_Name 字段读取一次相同的超链接，然后从 En_Name 读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:00:49.897

有很多方法可以做到这一点。您没有提到您使用的是哪种数据库技术，所以我的示例是使用实体框架。您可能需要根据自己的情况对其进行自定义。

LinqToSql 或其他 ORM 可能会出现类似的情况。如果您完全使用其他东西，那么关键是要有一个中心类，您可以将一致的东西传递给（因此是接口）进行翻译。

例如，如果我使用的是实体框架，那么数据库中包含这两个字段的每个表我都会添加一个公开这些字段的接口。然后，我将有一个辅助类，其方法采用具有该接口的任何实体并检查当前本地化并返回文本的正确版本。

```
public interface IBilingualEntity
{
    // Defines a consistent interface that indicates which language version
    // each thing is in.
    string Ar_Name { get; }
    string En_Name { get; }
}

public partial MyEntity : IBilingualEntity
{
    // This is a class generate by Entity Framework. But it could
    // be anything really if you are using some other framework.
    //
    // Nothing to do here as the other side of the partial
    // should already implement the interface with the code
    // generated from Entity Framework. If not, implement the
    // interface and return the correct language version in
    // the property.
}

// This is the helper that works out which language version to use.
public class BilingualHelper
{
    public string GetName(IBilingualEntity entity)
    {
        // NOTE: You may have to strip away the region part of the name
        // but off the top of my head I can't remember the format.
        // If you are using something else to store the culture you'll 
        // have to reference that instead.
        var cultureName = Thread.CurrentThread.CurrentUICulture.Name;
        if (cultureName == "ar")
            return entity.Ar_Name;
        return entity.En_Name;
    }
} 
```

# android - Canvas.drawText() 如何真正绘制文本？

> ID：15132134
> 
> 赞同：8
> 
> 时间：2013-02-28T09:40:59.553
> 
> 标签：android, android-canvas, android-custom-view

在此方法文档中，它写道：

```
x   The x-coordinate of origin for where to draw the text
y   The y-coordinate of origin for where to draw the text 
```

但它没有说明这个文本的绘制方向。我知道文本是从原点向上绘制的，但是当我给出以下参数时，我的文本会被剪切：

```
canvas.drawText(displayText, 0, canvas.getHeight(), textPaint); 
```

另外，假设我正在使用 Align.LEFT （意味着文本绘制在 x,y 原点的右侧）

那么正确的论点应该是什么（假设我不想使用固定数字）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:29:03.960

这是我最终使用的：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    if (textAlignment == Align.CENTER) {
        canvas.drawText(displayText, canvas.getWidth()/2, canvas.getHeight()-TEXT_PADDING, textPaint);  
    }
    else if (textAlignment == Align.RIGHT) {
        canvas.drawText(displayText, canvas.getWidth()-TEXT_PADDING, canvas.getHeight()-TEXT_PADDING, textPaint);   
    }
    else if (textAlignment == Align.LEFT) {
        canvas.drawText(displayText, TEXT_PADDING, canvas.getHeight()-TEXT_PADDING, textPaint); 
    }   
    //canvas.drawRect(0, 0, canvas.getWidth(), canvas.getHeight(), p);
} 
```

两条评论：

1.  TEXT_PADDING 是我在运行时转换为像素的 dp 尺寸（在我的情况下为 3dp）。
2.  您可以取消注释最后一行以在画布周围绘制矩形以进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:21:31.560

也许您可以使用以下代码段来查看它是否工作：

```
int width = this.getMeasuredWidth()/2;
int height = this.getMeasuredHeight()/2;
textPaint.setTextAlign(Align.LEFT);
canvas.drawText(displayText, width, height, textPaint); 
```

在我的情况下，宽度和高度只是任意计算的。

# java - 如何检查用户输入路径是否正确？

> ID：15132146
> 
> 赞同：0
> 
> 时间：2013-02-28T09:41:39.547
> 
> 标签：java, validation, user-input

我需要证明用户输入路径。
因为当用户给出的不是文件夹路径而是文件路径时。程序“跌倒”。
我知道这是一个错误，但如何确保用户路径正确。

**代码：**

```
 class PathAndWord {
    final String path;
    final String whatFind;

    PathAndWord(String path, String whatFind) {
        this.path = path;
        this.whatFind = whatFind;
    }

    boolean isProperlyInitialized() {
        return path != null && whatFind != null;
    }
}

public void askUserPathAndWord() {
    try {
        tryToAskUserPathAndWord();
    } catch (IOException | RuntimeException e) {
        System.out.println("Wrong input!");
        e.printStackTrace();
    } catch (InterruptedException e) {
        System.out.println("Interrupted.");
        e.printStackTrace();
    }
}

private void tryToAskUserPathAndWord() throws IOException, InterruptedException {
    PathAndWord pathAndWord = readPathAndWord();

    if (pathAndWord.isProperlyInitialized()) {
        performScan(pathAndWord, "GameOver.tmp");
        System.out.println("Thank you!");
    } else {
        System.out.println("You did not enter anything");
    }
}

private PathAndWord readPathAndWord() throws IOException {
    System.out.println("Please, enter a Path and Word (which you want to find):");

    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));

    String path = readPath(bufferedReader);
    String whatFind = readWord(bufferedReader);
    return new PathAndWord(path, whatFind);
}

private String readPath(BufferedReader bufferedReader) throws IOException {
    System.out.println("Please enter a Path:");
    return bufferedReader.readLine();
}

private String readWord(BufferedReader bufferedReader) throws IOException {
    System.out.println("Please enter a Word:");
    return bufferedReader.readLine();
}

private void performScan(PathAndWord pathAndWord, String endOfWorkFileName) throws InterruptedException {
    BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

    File endOfWorkFile = new File(endOfWorkFileName);
    CountDownLatch latch = new CountDownLatch(2);

    FolderScan folderScan = new FolderScan(pathAndWord.path, queue, latch,
            endOfWorkFile);
    FileScan fileScan = new FileScan(pathAndWord.whatFind, queue, latch,
            endOfWorkFile);

    Executor executor = Executors.newCachedThreadPool();
    executor.execute(folderScan);
    executor.execute(fileScan);

    latch.await();
} 
```

**问题：**

*   如何检查用户输入`path`是否正确？
*   如果路径不正确，则显示消息`path is wrong! Try again`。
*   能够检查单词 -`whatFind`是否正确，也是。
*   需要之前点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:50:38.240

```
private String readPath(BufferedReader bufferedReader) throws IOException {
    boolean ok = false;
    do {
        System.out.println("Please enter a Path:");
        File f = new File(bufferedReader.readLine());
        if(f.exists() && f.isDirectory())
            ok = true;
        else
            System.err.println("Doesn't exist or is not a folder.");
    } while(!ok);
    return f.getAbsolutePath();
} 
```

编辑：此方法执行任务“从用户读取路径，该路径存在并且是一个目录”。如果用户输入了无效的路径（不存在或文件），该方法会识别到这一点，警告用户并再次询问他们......一次又一次 - 直到他们正确回答。

如果可以的话，在本地检查数据是一个很好的习惯。稍后调用该方法时，您可以确定它会返回您期望的结果。

# java - 使用 IKVM 生成的 DLL

> ID：15132151
> 
> 赞同：2
> 
> 时间：2013-02-28T09:41:51.500
> 
> 标签：java, c++, dll, ikvm

我使用 IKVM 从 JAR 文件生成了一个 DLL：

ikvmc -target:library mylib.jar

我想在 Visual C++ 项目中使用 DLL。从我自己的代码中调用 dll 函数需要哪些步骤？我如何知道 DLL 导出了哪些方法以及如何在没有头文件的情况下调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:56:04.887

IKVM.NET 是为 .NET 框架 2.0 编写的。在 Visual Studio C++ 项目中的使用可能很困难。但是应该可以[通过 COM 接口访问它](https://stackoverflow.com/a/14975883/12631)。看看[这个答案](https://stackoverflow.com/a/14975883/12631)。

# extjs - 没有在 Ext JS 表单面板中获取数据

> ID：15132159
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:17.207
> 
> 标签：extjs, formpanel

```
function open() {
    var req_spec_store = new Ext.data.SimpleStore({
        url: 'mngr_req_ajx.php',
        fields: ['value', 'text'],
        data: [
            ['Android', 'Android'],
            ['iPhone', 'iPhone'],
            ['iPhone2', 'iPhone2'],
            ['iPhone3', 'iPhone3']
        ]
    });
    req_spec_store.load({
        params: {
            todo: 'Get_Req_Spec'
        }
    });

    var menuWin = new Window('menuWindow', {
        title: "Create Data",
        width: 980,
        height: 340,
        draggable: true,
        destroyOnClose: true,
        hideEffect: Element.hide,
        showEffect: Element.show,
        minimizable: false,
        maximizable: false,
        closable: true,
        resizable: false,
        items: [new Ext.FormPanel({
            renderTo: 'r_sp',
            id: 'mngReqForm',
            layout: 'form',
            height: innerHeight - 250,
            width: innerWidth - 50,
            frame: true,
            destroyOnClose: true,
            defaults: {
                msgTarget: 'side',
                labelSeparator: ''
            },
            labelAlign: 'right',
            items: [{
                xtype: 'combo',
                fieldLabel: 'Data Entry ',
                store: req_spec_store,
                displayField: 'text',
                valueField: 'value',
                mode: 'local',
                emptyText: 'Select Entry...',
                triggerAction: 'all',
                name: 'specId2',
                id: 'specId2',
                hiddenName: 'specIdHid',
                width: 150,
                forceSelection: false,
                editable: false,
                selectOnFocus: true
            }]
        })]
    });
} 
```

点击按钮打开窗口。在窗口里面，有表格面板。其中有一个组合类型元素。我正在使用 ajax 调用 PHP，在直接执行这些操作时成功获取数据，`Ext.onReady()`但在打开窗口的情况下不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:43:25.520

您商店的数据应该是 JSON 格式（也是 {} 而不是 []=

```
data : [ {value:'Android', text:'Android' }, ... ] 
```

# openxml - 图像在生成的演示文稿中被裁剪

> ID：15132161
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:22.410
> 
> 标签：openxml, openxml-sdk

我正在使用open xml sdk将幻灯片复制到另一个演示文稿中，当幻灯片被复制并生成我想要的演示文稿时，我遍历生成文档的每张幻灯片并用我选择的图像替换其现有图像，该过程正在执行并且图像被替换，但这里是绑定，如果我的图像尺寸大于文档中的图像，图像将被裁剪以适合替换图像先前占用的大小。但如果我这样做整个过程手动，通过用我的鼠标右键单击，电源点改变了图像的尺寸，它变得更短但它没有被裁剪，整个图像被显示出来......

那么我应该采用什么方法，我必须通过代码更改一些 xml 设置，还是必须使用 c# 类更改图像的尺寸，解决这个问题的正确方法是什么？？？

伙计们，我会焦急地等待你的回应......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:48:24.117

最好在替换目标演示文件中的图像之前更改图像。由于 power point 会将您的图像嵌入文件本身，如果您在替换之前将图像压缩到所需的尺寸，则可以减小整个生成文件的大小。

更改 xml 中的尺寸也是一个有效的想法，但是您将图像嵌入到文件中而没有任何额外的优势。

关于如何在 c# 中调整图像大小的一些指示：

[https://stackoverflow.com/a/87786/860243](https://stackoverflow.com/a/87786/860243)

[http://www.peterprovost.org/blog/2003/05/29/Resize-Image-in-C/](http://www.peterprovost.org/blog/2003/05/29/Resize-Image-in-C/)

[http://dzone.com/snippets/c-resize-image-while](http://dzone.com/snippets/c-resize-image-while)

# android - 适用于 Macbook 2009 和三星 Galaxy Tab 2 10.1 的媒体查询

> ID：15132164
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:24.783
> 
> 标签：android, ios, css, media-queries

我正在创建一个响应式电子邮件模板。我遇到了一个问题。

我为三星 Galaxy Tab 2.0 10.1 编写了一个媒体查询“：

```
/* 10.1 inch Samsung Galaxy Tab (portrait and landscape) ----------- */
    @media only screen
    and (min-device-width : 800px)
    and (max-device-width : 1280px) {

        .tablethide{
            display: none;
        }

    .tablet_width{
        zoom: 1.8;
    }

} 
```

但由于三星平板电脑和 MacBook 共享相同的分辨率，因此缩放功能也适用于 mackbook。

所以我必须在 mediaquery 中添加一些其他的东西来区分平板电脑和 Macbook。

有人知道我如何实现这一目标吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T00:14:26.297

嘿遇到同样的问题我发现Galaxy Tab 2 10.1的分辨率实际上是（最大宽度：2560px）和（方向：横向）或（最大宽度：1600像素）和（方向：纵向）

# php - 需要 iphone 集成 phpfox 中使用的即时聊天

> ID：15132165
> 
> 赞同：2
> 
> 时间：2013-02-28T09:42:25.897
> 
> 标签：php, iphone, ios, phpfox

我想在我们的 iphone 应用程序中集成 phpfox 中使用的默认 IM 聊天。我能够进行 xmpp 聊天，但不知道如何从该 phpfox IM 聊天中获取用户的 Jabberid。

有没有集成这个 IM 聊天的 api。

# c++ - Boost 库的 C++ 编译失败

> ID：15132168
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:27.863
> 
> 标签：c++, boost, namespaces, std, powerpc

我最近为 PowerPC 交叉编译了 Boost 库并生成了线程和系统库。然后在我的目标上测试库，尝试了 Boost 库中的示例代码之一，并尝试使用先前构建的 boost 库构建二进制文件，但得到以下编译错误

```
.
.
GNU C++ version 4.2.2 (powerpc-linux)
compiled by GNU C version 2.96 20000731 (Red Hat Linux 7.3 2.96-113).
GGC heuristics: --param ggc-min-expand=98 --param ggc-min-heapsize=128176
Compiler executable checksum: dd5a9a41381fa3b9978b2738b80f5a75
In file included from /shared/deps/powerpc/include/boost/config/platform/linux.hpp:15,
             from /shared/deps/powerpc/include/boost/config.hpp:53,
             from /shared/deps/powerpc/include/boost/thread/detail/platform.hpp:14,
             from /shared/deps/powerpc/include/boost/thread/thread.hpp:12,
             from helloworld.cpp:7:
4.2.2/cstdlib:106: error: '::div_t' has not been declared
4.2.2/cstdlib:107: error: '::ldiv_t' has not been declared
4.2.2/cstdlib:109: error: '::abort' has not been declared
4.2.2/cstdlib:110: error: '::abs' has not been declared
4.2.2/cstdlib:111: error: '::atexit' has not been declared
4.2.2/cstdlib:112: error: '::atof' has not been declared
4.2.2/cstdlib:113: error: '::atoi' has not been declared
.
. 
```

下面是 Boost 库给出的示例程序

```
#include <boost/thread/thread.hpp>
#include <iostream>

void helloworld()
{
    std::cout << "Hello World!" << std::endl;
}

int main()
{
    boost::thread thrd(&helloworld);
    thrd.join();
} 
```

制作文件：

```
CC=ppc_4xx-gcc
CPP=ppc_4xx-g++
CFLAGS=-c -g -Wall -static -v
LDFLAGS_TARGET=-$(LDFLAGS_PowerPC)
LIBS_TARGET=$(LIBS_PowerPC)
CPPFLAGS=$(CPPFLAGS_COMMON) $(CPPFLAGS_PowerPC)
INCLUDES=-I/opt/ELDK/4.2/ppc_4xx/usr/include/ -I. -I/opt/ELDK/4.2/ppc_4xx/usr/src/u-boot-1.3.1/board/xilinx/common/ -I/opt/ELDK/4.2/ppc_4xx/usr/src/linux-2.6.24/arch/powerpc/boot/ -I4.2.2/

DEPSROOT=/shared/deps
COMMON_INCLUDES = $(DEPSROOT)/common/include
PowerPC_INCLUDES=$(DEPSROOT)/powerpc/include
CPPFLAGS_PowerPC=-I$(PowerPC_INCLUDES)
CPPFLAGS_COMMON = -I$(COMMON_INCLUDES)
PowerPC_LIBS=$(DEPSROOT)/powerpc/lib
LDFLAGS_PowerPC=-L$(PowerPC_LIBS)
LIBS_PowerPC=-lboost_thread -lboost_system

all: helloworld

helloworld: helloworld.o
$(CPP) -g helloWorld.o -o helloworld -static

helloworld.o: helloworld.cpp
$(CPP) $(CFLAGS) $(CPPFLAGS) $(INCLUDES) $(MODS) helloworld.cpp

clean:
rm -rf *.o helloWorld 
```

错误在以下位置的文件 cstdlib 中

```
.
.
_GLIBCXX_BEGIN_NAMESPACE(std)

using ::div_t;
using ::ldiv_t;
using ::abort;
.
. 
```

宏 _GLIBCXX_BEGIN_NAMESPACE 将命名空间设置为具有一定可见性的 std。我对此并不陌生，因此无法完全遵循。

有没有人遇到过类似的问题？我在一些帖子中读到缺少命名空间导致此错误，但我不确定这是否是我的问题。

* * *

**编辑** 我得到了关于这个问题的更多信息。首先，我认为问题出在命名空间上，所以我手动将命名空间更改为 std 但没有帮助。**然后我在使用 ::div_t;**的语句之前添加了结构 div_t 的定义；并且其中一个错误减少了（即该语句已编译）。所以问题在于缺少 div_t 结构的定义。

现在结构 div_t 定义在文件 stdlib.h 中，该文件包含在当前文件 cstdlib 中。当我对文件名 stdlib.h 进行定位时，我找到了以下参考

```
/opt/ELDK/4.2/ppc_4xx/usr/include/stdlib.h
/opt/ELDK/4.2/ppc_4xx/usr/include/bits/stdlib.h
/opt/ELDK/4.2/ppc_4xx/usr/include/c++/4.2.2/tr1/stdlib.h
/opt/ELDK/4.2/ppc_4xx/usr/include/freetype2/freetype/config/ftstdlib.h
/opt/ELDK/4.2/ppc_4xx/usr/src/linux-2.6.24/arch/powerpc/boot/stdlib.h
/opt/ELDK/4.2/ppc_4xx/usr/src/linux-2.6.24-xenomai/arch/powerpc/boot/stdlib.h 
```

只有第一个文件有 div_t 的定义，其他文件没有。讨论中的文件**cstdlib**位于文件夹 ../include/c++/4.2.2/ 中，现在如果文件**stdlib.h**包含在此处，则包含多个 stdlib.h 中的哪一个？**/opt/ELDK/4.2/ppc_4xx/usr/include**位置存在于我的包含路径中。

顺便说一句，我怎么知道包含了哪个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:19:59.603

[该问题与PowerPC 架构的 Cross Compile Boost library](https://stackoverflow.com/questions/14974902/cross-compile-boost-library-for-powerpc-architecture)相同。省略了具有 dev_t 定义的包含路径，并使用了下一个包含路径。不幸的是，它还有一个文件 stdlib.h 没有 dev_t 结构的定义。我创建了软链接并确保编译器选择了正确的 stdlib.h 文件。

# bash - glassfish 死了并且不再开始

> ID：15132169
> 
> 赞同：2
> 
> 时间：2013-02-28T09:42:28.740
> 
> 标签：bash, ubuntu, glassfish

我们的一个应用服务器（Glassfish v3.0.1）一直无缘无故地崩溃。有时，我远离互联网，所以我无法再次运行它。因此，我编写了一个简单的 bash 脚本等待 10 分钟，然后以管理员身份运行。它像是：

```
#!/bin/bash
while true; 
do sleep 600;
sudo /home/ismetb/glassfishv3.0.1/glassfish/bin/asadmin start-domain; 
done 
```

这似乎工作正常，但我有几个问题：

1.  如果我终止了 bash 脚本（通过按 ctrl+z 按钮），Java 进程（Glassfish）就会终止，`start-domain`并且`stop-domain`命令根本不起作用。这意味着，我既不能停止 Glassfish，也不能访问它。我不知道其他人之前是否遇到过这个问题。如果进程死了，我唯一能做的就是查找 Java 进程的 ID 并从终端中将其杀死。这根本不可取。任何想法为什么当我退出脚本时 Java 进程会死掉？
2.  我想添加到脚本中的是检查 Glassfish 正在使用的端口。如果端口被占用，也许我可以假设 Glassfish 没有关闭！（但是，尽管 Glassfish 已死，但 Glassfish 仍可能使用端口（默认为 8080），我不确定）。如果没有，那么借助一个简单的代码，我可以获取 Java 进程的 id 并将它们全部杀死。然后`start-domain`命令将成功运行。关于如何做到这一点的任何想法或任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:16:33.790

您可以改用[`cron`](https://help.ubuntu.com/community/CronHowto)作业。要为 root 安装 cron 作业，请输入

```
sudo crontab -e 
```

并添加这一行

```
*/10 * * * * /home/ismetb/glassfishv3.0.1/glassfish/bin/asadmin start-domain 
```

这将`asadmin`每十分钟运行一次。

如果您对命令行不满意，您也可以尝试`gnome-schedule`，但我没有这方面的经验。

对于第二个问题，您可以使用`curl`or`wget`访问 glassfish。您可以尝试获取一些 URL，甚至访问管理界面，如果没有得到响应，则假设 glassfish 已关闭。

# shell - 通过shell脚本打开新的终端

> ID：15132170
> 
> 赞同：1
> 
> 时间：2013-02-28T09:42:31.640
> 
> 标签：shell

实际上我正在使用腻子。我想创建一个脚本，我们可以通过它打开 N 号。腻子窗口并相应地调整新终端的大小。

如果可能的话，请帮助我。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:05:42.473

`Nautilus`您可以执行脚本，在当前位置或您选择的目录位置打开一个 gnome 终端。

此链接详细解释它在[此处添加打开终端](http://www.cyberciti.biz/faq/linux-gnome-open-terminal-shell-prompt-here/)

这是代码：

```
base="`echo $NAUTILUS_SCRIPT_CURRENT_URI | cut -d'/' -f3- | sed 's/%20/ /g'`"

if [ -z "$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" ]; then
     dir="$base"
else
     while [ ! -z "$1" -a ! -d "$base/$1" ]; do shift; done
     dir="$base/$1"
fi

gnome-terminal --working-directory="$dir" 
```

# javascript - 使用 javascript 从我的服务器读取 txt 文件

> ID：15132171
> 
> 赞同：2
> 
> 时间：2013-02-28T09:42:38.180
> 
> 标签：javascript, html, text

我知道这种问题已经被问过很多次了。但我很困惑，因为没有答案真的对我有帮助。

**问题：**

我有一个 .txt 文件`http://example.come/test.txt`。

而我想做的是在一个test.html文件中使用JS显示txt文件的所有内容。

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:58:01.060

您可以进行 Ajax 调用来接收文本文件的内容，然后将其插入到您的 DOM 中。它应该是这样的：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(function() {
            $.get('text.txt', function(data) {
                $('#text-file-container').html(data);
            });
        });
    </script>
</head>
<body>
    <div id="text-file-container"></div>
</body>
</html> 
```

# ios - iOS：收藏视图不显示

> ID：15132172
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:38.503
> 
> 标签：ios, interface-builder, uicollectionview

我的应用程序中有一个集合视图，我希望它包含一个自定义单元格。我创建了一个自定义单元格视图 xib 文件。然后我在我的数据源方法中使用它：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
 OtherCustomersCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:OTHER_CUSTOMERS_CELL_IDENTIFIER forIndexPath:indexPath];

  if(cell == nil){
      NSArray *nsObjects = [[NSBundle mainBundle] loadNibNamed:@"OtherCustomersCell" owner:nil options:nil];
    for(id obj in nsObjects)
        if([obj isKindOfClass:[OtherCustomersCell class]])
            cell = (OtherCustomersCell*) obj;
}
[cell.name setText:@"AAAA BBBBB"];

return cell;
} 
```

但是当我运行应用程序时，只有一个黑色矩形应该是集合视图（在表格视图的底部）：

![在此处输入图像描述](../Images/be515de1383238f5d28da43f4613a19d.png)

我究竟做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:51:17.520

集合视图与表格视图的工作方式不同，因为如果一个单元格不能出列，您不必创建一个单元格。

相反，您必须先为单元格注册笔尖：

```
- (void)viewDidLoad
{
    ...

    UINib *cellNib = [UINib nibWithNibName:@"OtherCustomersCell" bundle:nil];
    [collectionView registerNib:cellNib forCellWithReuseIdentifier:OTHER_CUSTOMERS_CELL_IDENTIFIER];
} 
```

然后，您可以使单元格出列，如有必要，它将自动为您创建：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    OtherCustomersCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:OTHER_CUSTOMERS_CELL_IDENTIFIER forIndexPath:indexPath]; // cell won't be nil, it's created for you if necessary!
    [cell.name setText:@"AAAA BBBBB"];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:54:28.090

您必须`UICollectionView`通过以下方式在 viewdidload 中注册实例，然后才能使用它。

```
[self.photoListView registerNib:[UINib nibWithNibName:@"UIcollectionViewCell" bundle:nil] forCellWithReuseIdentifier:@"Identifier"]; 
```

# java - 始终在 Android 中显示地图标记标题

> ID：15132174
> 
> 赞同：39
> 
> 时间：2013-02-28T09:42:43.627
> 
> 标签：java, android, google-maps

我通过以下方式将默认标记添加到 GoogleMap：

```
GoogleMap map = ((MapFragment) getFragmentManager().findFragmentById(R.id.editMapMap)).getMap();

MarkerOptions markerOptions = new MarkerOptions();
markerOptions.position(currentLocation.getCoordinate());
markerOptions.title(Utils.getLocationString(currentLocation.getCoordinate()));
markerOptions.snippet("Blah");

locationMarker = map.addMarker(markerOptions);
locationMarker.setDraggable(true); 
```

如何使标记始终显示标题和片段而无需触摸？我还想禁用在触摸时隐藏它们。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-04-22T12:32:45.187

这很容易：

```
locationMarker.showInfoWindow(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-03T12:56:23.460

使用`showInfoWindow()`和添加标记如下。

```
Marker marker = mMap.addMarker(new MarkerOptions().position(currentPosition).title("Your text"));
marker.showInfoWindow(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-21T16:44:14.587

只需返回 false 即可`onMarkerClickListener`，如果返回 true 则显示`infoWindow`.

当我们点击标记时隐藏标题：

```
map.setOnMarkerClickListener(this);
...

@Override
public boolean onMarkerClick(Marker arg0) {     
  Log.i(TAG,"marker arg0 = "+arg0);               
  return false;
} 
```

如果我们返回 true 标题将被显示，否则如果我们返回 false 标题将不会显示。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-12T20:14:47.980

有两种显示和隐藏标记的方法。布尔返回值只是阻止默认行为发生 (false) 或允许它发生 (true)。换句话说，它会通知系统您是否消费了该事件。请参阅[Google API 参考](https://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener.html)。

```
private GoogleMap.OnMarkerClickListener onMarkerClickedListener = new GoogleMap.OnMarkerClickListener() {
    @Override
    public boolean onMarkerClick(Marker marker) {
        if (marker.isInfoWindowShown()) {
            marker.hideInfoWindow();
        } else {
            marker.showInfoWindow();
        }
        return true;
    }
};

mGoogleMap.setOnMarkerClickListener(onMarkerClickedListener); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-12T18:13:57.403

我知道这个问题很老，但我会在这里发布我的答案，以防它帮助某人。

信息窗口不适用于我的情况，我希望标题仅在有空间时显示，如果没有足够的空间显示，可能会隐藏，以免它们相互重叠。

我在互联网上没有找到解决方案，所以我卷起袖子制作了这个库来解决我的问题，希望它也能帮助其他人：

[https://github.com/androidseb/android-google-maps-floating-marker-titles](https://github.com/androidseb/android-google-maps-floating-marker-titles)

这是它如何工作的预览：

[![预习](../Images/f05679240323056176468cfc511ebff1.png)](https://i.stack.imgur.com/pMZ5Z.gif)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-01T15:37:09.707

坚持，但这是我的答案：

从文档中，有一条文字说信息窗口一次显示一个，所以没有办法做到这一点：

> “信息窗口允许您在用户点击标记时向用户显示信息。***一次只显示一个信息窗口***。如果用户单击标记，当前信息窗口将关闭，新信息窗口将被显示。请注意，如果用户单击当前显示信息窗口的标记，则该信息窗口将关闭并重新打开。

地图 api 文档 说：

> “最佳实践：为获得最佳用户体验，任何时候都应在地图上打开一个信息窗口。多个信息窗口会使地图显得杂乱无章。如果您一次只需要一个信息窗口，则可以只创建一个`InfoWindow`对象并在地图事件（例如用户点击）时在不同位置或标记处打开它。如果您确实需要多个信息窗口，您可以同时显示多个`InfoWindow`对象。

在[https://developers.google.com/maps/documentation/javascript/infowindows](https://developers.google.com/maps/documentation/javascript/infowindows)

# .net - 通过 Roslyn API 读取默认命名空间

> ID：15132175
> 
> 赞同：2
> 
> 时间：2013-02-28T09:42:43.683
> 
> 标签：.net, roslyn

有没有办法从 IProject 接口或任何其他 Roslyn 接口读取默认命名空间设置？我知道我可以解析项目的文件，但我认为这应该可以使用 Roslyn API，但我找不到如何做到这一点。提前感谢您的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:11:49.927

不幸的是，Roslyn 目前没有公开这样做的方法，但我同意这是我们最终可能需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T00:50:01.347

库 Microsoft.Build.Evaluation，我相信，Roslyn 的继任者确实有这个功能，但并不容易找到。

我使用下面的代码来获取默认命名空间。

我的测试表明它与存储在 .csproj 文件中的 RootNamespace 匹配。

```
 private string GetDefaultNamespace(Microsoft.Build.Evaluation.Project p)
    {
        string rtnVal = "UNKNOWN_NAMESPACE";

        foreach (ProjectItemDefinition def in p.ItemDefinitions.Values)
        {
            if (def.ItemType == "ProjectReference")
            {
                foreach(ProjectProperty prop in def.Project.AllEvaluatedProperties){
                    if(prop.Name == "RootNamespace"){
                        rtnVal = prop.EvaluatedValue;
                    }
                }
            }
        }

        return rtnVal;
    } 
```

# java - 绑定 Web 服务 (wsdl) 错误

> ID：15132177
> 
> 赞同：0
> 
> 时间：2013-02-28T09:42:49.103
> 
> 标签：java, web-services, wsdl, eclipse-virgo

我在处女座跑步（OSGi）

我的 binding.xml 文件：

```
<jaxws:bindings wsdlLocation="CustomerService.wsdl"
          xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
          xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <!-- <jaxws:enableAsyncMapping>true</jaxws:enableAsyncMapping> -->
  <jaxws:bindings  node="wsdl:definitions/wsdl:types/xs:schema">
      <jxb:globalBindings>
        <jxb:javaType name="java.util.Date" xmlType="xs:dateTime"
                      parseMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.parseDateTime"
                      printMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.printDateTime"/>
        <jxb:javaType name="java.util.Date" xmlType="xs:date"
                      parseMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.parseDate"
                      printMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.printDate"/>
      </jxb:globalBindings>
  </jaxws:bindings>
</jaxws:bindings> 
```

日志：

```
[2013-02-28 16:27:26.938] region-dm-12                 <AG0000E> Application context creation failure for bundle 'com.etasgroup.visu.graph.services' version '1.0.0.201302280924'. org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 5 in XML document from URL [bundleentry://232.fwk1459808981/META-INF/spring/binding.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 5; columnNumber: 57; cvc-elt.1: Cannot find the declaration of element 'jaxws:bindings'.
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
        at org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:170)
        at org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:140)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.access$800(AbstractDelegatedExecutionApplicationContext.java:60)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext$3.run(AbstractDelegatedExecutionApplicationContext.java:242)
        at org.eclipse.gemini.blueprint.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.startRefresh(AbstractDelegatedExecutionApplicationContext.java:220)
        at org.eclipse.gemini.blueprint.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(DependencyWaiterApplicationContextExecutor.java:224)
        at org.eclipse.gemini.blueprint.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(DependencyWaiterApplicationContextExecutor.java:177)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:157)
        at org.eclipse.gemini.blueprint.extender.internal.activator.LifecycleManager$1.run(LifecycleManager.java:211)
        at org.eclipse.virgo.kernel.agent.dm.ContextPropagatingTaskExecutor$2.run(ContextPropagatingTaskExecutor.java:95)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'jaxws:bindings'.
        at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
        at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
        at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
        ... 21 common frames omitted

[2013-02-28 16:27:26.945] start-signalling-1           <DE0006E> Start failed for bundle 'com.etasgroup.visu.graph.services' version '1.0.0.201302280924'. org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 5 in XML document from URL [bundleentry://232.fwk1459808981/META-INF/spring/binding.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 5; columnNumber: 57; cvc-elt.1: Cannot find the declaration of element 'jaxws:bindings'.
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
        at org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:170)
        at org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:140)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.access$800(AbstractDelegatedExecutionApplicationContext.java:60)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext$3.run(AbstractDelegatedExecutionApplicationContext.java:242)
        at org.eclipse.gemini.blueprint.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.startRefresh(AbstractDelegatedExecutionApplicationContext.java:220)
        at org.eclipse.gemini.blueprint.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(DependencyWaiterApplicationContextExecutor.java:224)
        at org.eclipse.gemini.blueprint.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(DependencyWaiterApplicationContextExecutor.java:177)
        at org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:157)
        at org.eclipse.gemini.blueprint.extender.internal.activator.LifecycleManager$1.run(LifecycleManager.java:211)
        at org.eclipse.virgo.kernel.agent.dm.ContextPropagatingTaskExecutor$2.run(ContextPropagatingTaskExecutor.java:95)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'jaxws:bindings'.
        at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
        at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
        at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
        ... 21 common frames omitted

[2013-02-28 16:27:26.961] start-signalling-1           <DE0010I> Stopping bundle 'com.etasgroup.visu.graph.services' version '1.0.0.201302280924'.
[2013-02-28 16:27:26.963] start-signalling-1           <DE0011I> Stopped bundle 'com.etasgroup.visu.graph.services' version '1.0.0.201302280924'. 
```

有任何想法吗？

# ruby-on-rails-3 - Rails如何获取模型链表的叶节点

> ID：15132183
> 
> 赞同：0
> 
> 时间：2013-02-28T09:43:11.817
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我想创建一个模型的链接列表，这种结构

```
A <- B <- C // (C is the leaf)
D <- E <- F // (F is the leaf)
G <- H // (H is the leaf)
I // (I has no children, I itself is the leaf) 
```

我已经在这样的红宝石模型中完成了

```
class Node < ActiveRecord::Base
  has_one :child, class_name: "Node", foreign_key: "parent_id", dependent: :destroy
  belongs_to :parent, class_name: "Node"
end 
```

我只想获取叶节点列表，即,`C`和，我知道如何在 SQL 中执行此操作，如何在 rails 中执行此操作？我在rails 3.1上。`F``H``I`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:49:53.847

一种纯红宝石解决方案，但性能不高：

Node.all.select{|n| n.child.blank?}

基本上在rails中编写一个SQL解决方案：

```
Node.joins("LEFT JOIN nodes AS children ON nodes.id = children.parent_id").where("children.id IS NULL") 
```

# php - 在 codeigniter 中连接页面

> ID：15132184
> 
> 赞同：0
> 
> 时间：2013-02-28T09:43:14.603
> 
> 标签：php, codeigniter

我有一个简单的问题，我有一个表单，用户可以在其中输入他的详细信息，当点击提交按钮并将他的详细信息提交到数据库时，它会将用户带到另一个页面，我正在使用 codeigniter，我对此很陌生怎么做？tnx 为您提供帮助。这是我的cmv：

**控制器**

```
 <?php

class Info extends CI_Controller{

    function index(){

        $this->load->view('info_view');
    }
    // insert data
    function credentials()
    {   
     $data = array(
         'name' => $this->input->post('name'),
         'second_name' => $this->input->post('second_name'),
         'phone' => $this->input->post('phone'),
         'email' => $this->input->post('email'),  
         );

          $this->info_model->add_record($data);

    }

 }

?> 
```

**模型**

```
<?php

class Info_model extends CI_Model {

    function get_records()
          {
          $query = $this->db->get('credentials');

          return $query->result();   
          }

    function add_record($data)
          {
          $this->db->insert('credentials', $data);
          return;
       }

}

?> 
```

**看法**

```
<html>
    <head>
    </head> 
 <body>
   <?php echo form_open('info/credentials'); ?>
     <ul id="info">  
       <li>Name:<?php echo form_input('name')?></li>
       <li>Second Name: <?php echo form_input('second_name');?></li>
       <li>Phone: <?php echo form_input('phone');?></li>
       <li>Email: <?php echo form_input('email');?></li>
       <li><?php echo form_submit('submit', 'Start survay!!' );?></li>
     </ul>  

 <?php echo form_close();?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:07:53.217

如果您只需要在提交表单时进行简单的重定向：

```
$this->info_model->add_record($data);
redirect('controller/method'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:22:31.283

您可以使用 URL Helper 中的 redirect() 函数来实际重定向用户
（[http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)）

像这样：

```
$this->load->helper('url');
redirect('/some/other/page'); 
```

请注意，必须在将任何数据输出到浏览器之前调用它。

另一种方法是简单地根据上下文加载两个不同的视图。通常您还需要一些表单验证，以便您可以使用它来指导用户。我通常在我的函数中得到类似这样的东西，它既用于发布数据，也用于将其插入数据库和“重定向”：

```
$this->load->library('form_validation');
$this->form_validation->set_rules('name', 'Name', 'required|trim|xss_clean');
/* More validation */

if ($this->form_validation->run() !== FALSE) {
    $data = array(
     'name' => $this->input->post('name'),
     'second_name' => $this->input->post('second_name'),
     'phone' => $this->input->post('phone'),
     'email' => $this->input->post('email'),  
     );
    $this->info_model->add_record($data);

    $this->load->view('some_other_view');
} else {
    $this->load->view('info_view');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:23:26.557

您还可以使用 refresh 作为第二个参数：

```
$this->info_model->add_record($data);
redirect('controllerName/methodName','refresh'); 
```

# c - 混合 C 和汇编源代码并使用 cmake 构建

> ID：15132185
> 
> 赞同：32
> 
> 时间：2013-02-28T09:43:15.463
> 
> 标签：c, gcc, assembly, cmake, avr

我正在使用 eclipse 构建一个混合了汇编代码和 C 源文件的 avr-gcc 项目。我想摆脱 eclipse 的自动生成文件，因为我需要将一些过程自动化到生成文件中以及出于其他原因。

我以前使用过 cmake，我对它很满意，所以我想尝试使用它来编译我的源文件。一切都按预期使用 C 源代码运行。问题是最后我需要编译一些汇编文件（实际上是2个）并将它们添加到目标中。

我用谷歌搜索，但我没有找到这样做的方法。有人知道如何做到这一点？

问题是在eclipse中我有-x assembler-with-cpp

添加到 gcc 参数列表。我需要找到一种方法来选择性地将这个参数添加到标准 gcc 参数列表中，仅适用于 asm 文件。我没有找到任何方法来做到这一点。

先感谢您

解决方案：在 CMakeLists.txt 中设置每个文件在同一个列表中编译

```
enable_language(C ASM)

set ( SOURCES 
    foo.c
    bar.c
    foobar.s
)

add_executable(program  ${SOURCES} ) 
```

在工具链文件中，您应该放置：

```
SET(ASM_OPTIONS "-x assembler-with-cpp")
SET(CMAKE_ASM_FLAGS "${CFLAGS} ${ASM_OPTIONS}" ) 
```

第二行只是在编译 asm 文件时需要传递额外的选项。我想通过所有的 CFLAGS 加上一些 ASM_OPTIONS

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-28T15:22:09.453

CMake 支持开箱即用的汇编程序。请确保在您的[项目](https://cmake.org/cmake/help/latest/command/project.html)中启用“ASM”语言。如果汇编源文件需要预处理，还要设置源文件的[编译](https://cmake.org/cmake/help/latest/prop_sf/COMPILE_OPTIONS.html)选项：

```
project(assembler C ASM)
set_property(SOURCE foo.s APPEND PROPERTY COMPILE_OPTIONS "-x" "assembler-with-cpp")
add_executable(hello foo.s bar.c) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-16T01:07:34.523

根据您的解决方案，最简单的解决方案之一是这个单行：

```
SET(CMAKE_ASM_FLAGS "${CFLAGS} -x assembler-with-cpp") 
```

# php - PDO mySQL 中的命名占位符导致服务器错误

> ID：15132187
> 
> 赞同：0
> 
> 时间：2013-02-28T09:43:22.580
> 
> 标签：php, mysql, pdo

对于 mySQL，我是个新手，对于 PDO 更是如此。我正在尝试创建一些简单的插入代码，但我不断收到服务器错误。我觉得这与定义`$STH`两次有关。这是我的代码：

```
$dsn    = "mysql:host=localhost;dbname=Menu_Items";
$user   = "root";
$pass   = "root";

// Connect to database
try{
    $DBH = new pdo($dsn, $user, $pass);
}
catch(PDOException $e) {
    echo $e->getMessage();
}

// Define user input as $food
$name = $_POST['food'];

$STH->bindParam(':name', $name);

// Insert user input into table
$STH = $DBH->prepare("INSERT INTO foods ( name ) VALUES ( :name )");

$result = $DBH -> query($STH);
if($result){
    echo("<br>Input data is succeed");
}else{
    echo("<br>Input data is fail");
} 
```

此 php 代码连接到一个简单的 html 表单：

```
<form id="menu_input" name="menu_input" method="post" action="insert.php">
      <table>
        <thead>Enter a new item</thead>
        <tr>
          <th><label for="food">Food</label></th>
          <td><input type="text" name="food" id="food" placeholder="Food Name" required></td>
        </tr>
        <tr>
          <td><input type="submit"></td>
        </tr>
      </table>
 </form> 
```

我一直在做研究，但在让它发挥作用时遇到了一点困难。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:45:28.027

首先创建/获取对象/实例，然后使用它的方法；不是相反。

```
// Insert user input into table
$STH = $DBH->prepare("INSERT INTO foods ( name ) VALUES ( :name )");
$STH->bindParam(':name', $name);
$STH->execute(); 
```

和 (nit-picking mode: on) 不需要变量`$name`

```
// Insert user input into table
$STH = $DBH->prepare("INSERT INTO foods ( name ) VALUES ( :name )");
$STH->bindValue(':name', $_POST['food']);
$STH->execute(); 
```

会的，也会的

```
// Insert user input into table
$STH = $DBH->prepare("INSERT INTO foods ( name ) VALUES ( :name )");
$STH->execute(array('name'=>$_POST['food'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:45:40.780

命名占位符与您的问题无关。
他们不是“最好的选择”。它只是一种语法糖，完全没有必要。

您的问题不是命名占位符，而是您不知从何而来的语法。

1.  始终阅读您正在使用的功能的手册页。query() 方法不支持占位符。
2.  在提出问题之前，请务必阅读[标签 wiki 。](https://stackoverflow.com/tags/pdo/info)在那里你可以看到正确的例子。

请阅读我在上面链接的 PDO 上的 Stackoverflow 标签 wiki 并使用那里的代码。用于连接和查询执行。
您必须设置错误报告才能查看错误。否则无法知道您的代码有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:46:13.537

使用`bindValue`代替`bindParam`，因为您是绑定值，而不是参数。`bindValue`声明后调用`prepare`：

```
...
$name = $_POST['food'];

// Insert user input into table
$STH = $DBH->prepare("INSERT INTO foods ( name ) VALUES ( :name )");
$STH->bindValue(':name', $name);

$result = $DBH->query($STH);
... 
```

# opencv - 无法训练 OpenCV CascadeClassifier 来检测公司徽标

> ID：15132188
> 
> 赞同：1
> 
> 时间：2013-02-28T09:43:22.870
> 
> 标签：opencv, computer-vision, image-recognition

我正在尝试从 OpenCV 训练 CascadeClassifier 以检测简单的高对比度公司徽标，但它不起作用。它检测到的看起来只是随机的图像补丁。它甚至不适用于原始样本。我正在使用 opencv_createsamples 从单个原始徽标图像在纯白色背景上创建一组正片。

同时，我能够使用来自真实文档的许多样本成功地训练一个级联来检测邮票。这对我来说看起来很奇怪，因为邮票比公司标志复杂得多。

我做错了什么？可以使用 LBP 或 Haar 特征来描述一个简单的对象，例如徽标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T20:16:50.973

这取决于公司标志的类型和准确度。LBP 在训练数据方面非常快，但不如 Haar 分类器准确。哈尔分类器可能需要一周的时间来学习识别，但非常准确。要拥有一个好的分类器，您需要拥有大量数据。我不知道你有什么数据和多少mutch。所以我看到这个问题是很久以前提出的......

# c# - Asp.net mvc3 如何将字节显示为字符串？ASP.NET mvc3

> ID：15132190
> 
> 赞同：0
> 
> 时间：2013-02-28T09:43:24.340
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, view

我在员工的 Db 中将 Gender 属性设置为 tiny int。当用户创建新员工时，我希望他通过单击单选按钮选择男性/女性（工作正常）。一切工作正常（创建和编辑），但我想以表格（用于索引、详细信息和删除）显示，不是 1 或 2，而是男性/女性。应该有一些 if 语句，但我不知道放在哪里或如何写正确的......

任何想法？谢谢！这是模型代码的一部分： ![在此处输入图像描述](../Images/ffe7241e162d7ad4e012d7e34d002424.png)

这个来自 details.cshtml：

![在此处输入图像描述](../Images/2e2a6b842fa786a8a13557c71e513c11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:52:44.310

如果你想避免在你的模型上有额外的属性或向你的 viewbag 添加东西，你可以使用如下所示的 razor 语法内联编写它。

```
<div class="display-field">
@if (model.GENDER == 0){ @Html.Raw("Male") }
@else if (model.GENDER == 1){ @Html.Raw("Female") }
</div> 
```

这不是我的想法，所以你可能需要检查确切的语法，但我认为这很接近。它也只会在 div 中转储“男性”或“女性”，您可能希望至少将其放在标签或 p 标签中。

然而，这不是我在生产应用程序中使用的方法，在整个代码中，我将使用性别枚举来赋予您的位值以意义，并扩展枚举以包含您可以解析以用于演示目的的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:12:11.353

我认为从你所说的你可以使用如下的剃刀语法在你的 details.cshtml 中内联编写它

```
<div class="display-field">
@if(model.GENDER ==0)
{
 <label>Male</label>
}
else if(model.Gender==1)
{
 <label>Female</label>
}
</div> 
```

我认为这足以在详细信息页面中显示性别。如果您需要任何帮助，请发表评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:13:42.237

我建议您创建一个[ViewModel](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)类，以与数据库模型分离的视图友好格式表示 Employee 实体，并将其呈现在强类型视图中，以便您可以从控制器返回它。

提示：将`Gender`属性表示为字符串，`ViewModel`然后将字节转换为字符串表示`controller`

您可以将代码放在您的控制器中，例如：

`public ActionResult EmployeeDetails(int id)`

`{`

```
 //retrieve the entity from the DB
   //set other employee properties here.
   //I'm assuming you have set males to 2 and females to 1
   ...

   employeeViewObject.Gender = employeeObjectFromDB.Gender.Value==2?"Male":"Female";
   return View(employeeObjectFromDB); 
```

`}`

您的强类型视图在显示性别时不会遇到问题，同时为您节省混合代码和标记的麻烦： `<p>model.Gender</p>` 或

`Html.DisplayFor(model=>model.Gender)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:47:03.700

使用`condition ? true : false`选择器

```
int gender = 1; // assumed male

String genderDesc = (gender == 1) ? "Male" : "Female"; 
```

您可以将此设置为下拉字段吗？在您的控制器中执行以下操作：

```
ViewBag.Gender = new[] 
        {
            new SelectListItem { Text = "Male", Value = "1" }, 
            new SelectListItem { Text = "Female", Value = "2" }
        }.WithEmpty(); 
```

这`WithEmpty()`将为您提供一个空白选项，否则将选择最上面的选项。

```
@Html.DropDownListFor(m=> m.Gender, (Ienumarable<SelectListItem>)ViewBag.Gender); 
```

这样，用户将看到男性和女性，但该值将使用 1 或 2 值绑定到您的模型。

# java - 访问 @Id 时出现 LazyInitializationException

> ID：15132191
> 
> 赞同：2
> 
> 时间：2013-02-28T09:43:27.963
> 
> 标签：java, hibernate, jpa, lazy-loading

我们在 wicket/spring/hibernate 应用程序中得到 org.hibernate.LazyInitializationException。这种情况很少发生，可能每 100 次代码运行一次。

起初，当我们访问延迟加载的对象数据时（大约每 100 次代码运行），我们得到了异常。所以我们认为，如果我们通过从数据库中获取对象的 ID 来手动将对象加载到内存中，问题就会得到解决。我们的理解是，带有注释的字段`javax.persistence.Id`应该始终在内存中。令我们惊讶的是，我们**在访问 id 时**仍然遇到异常。也许一个例子会更清楚..

这些是我们的 POJO：

```
public abstract class SuperDimension{ 

    @Id
    @GeneratedValue(generator = "Dimension_id_gen", strategy = GenerationType.TABLE)
    @GenericGenerator(name = "Dimension_id_gen", strategy = "uuid")
    protected String UUID;

   /*getters, setters and abstract stuff*/

}

public class Dimension extends SuperDimension{

    private String number;

    /*getters, setters and overridden methods*/
}

public class DimensionHolder{

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "myDim")
    private Dimension myDim;

    /*getters, setters*/
} 
```

我们有一个 DimensionHolder 实例，并且想要获取它的 Dimension (myDims) 编号。一开始我们是这样做的：

```
dimensionHolder.getMyDim().getNumber(); 
```

这导致（每 100 次）.getNumber() 上的惰性初始化异常。这是我们尝试在访问号码之前手动加载它：

```
Dimension freshDimensionFromDataBase = dataBase.getDimensionFromUUID(dimensionHolder.getMyDim().getUUID);
String number = freshDimensionFromDataBase.getNumber(); 
```

这仍然会导致 .getUUID() 上的惰性初始化异常。即使 myDim 是代理，id 是否仍然可用？

问题是否可能是 id 在Dimensions 超类中，并且我们正在使用的当前Dimension 实例是来自休眠的代理对象？这在我们的耳朵里听起来也很奇怪，所以也许某个善良的灵魂可以阐明我们的问题？

谢谢！

**编辑**：这是堆栈跟踪：

```
Root cause: org.hibernate.LazyInitializationException: could not initialize proxy - no Session Root Cause Message: LazyInitializationException: could not initialize proxy - no Session
Message: WicketRuntimeException: Method onRequest of interface org.apache.wicket.behavior.IBehaviorListener targeted at eyesys.web.invoice.invoice.InvoicePage$20 {event='onclick'} on component [WebMarkupContainer [Component id = okayButton]] threw an exception
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:270)
    at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:241)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:255)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:781)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:185)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Thread.java:662)
Caused by:

    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:260)
    at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:241)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:255)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:781)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:185)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Thread.java:662)
Caused by:

    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
    at eyesys.domain.Dimension3_$$_javassist_17.getUUID(Dimension3_$$_javassist_17.java)
    at eyesys.web.invoice.invoice.lines2.AccountingLineRow$33.validate(AccountingLineRow.java:918)
    at org.apache.wicket.markup.html.form.Form.validateFormValidator(Form.java:1826)
    at org.apache.wicket.markup.html.form.Form.validateFormValidators(Form.java:1839)
    at org.apache.wicket.markup.html.form.Form$17.component(Form.java:1865)
    at org.apache.wicket.markup.html.form.Form$17.component(Form.java:1853)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:273)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrder(Visits.java:244)
    at org.apache.wicket.markup.html.form.Form.validateNestedForms(Form.java:1851)
    at org.apache.wicket.markup.html.form.Form.validate(Form.java:1715)
    at org.apache.wicket.markup.html.form.Form.process(Form.java:803)
    at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:762)
    at org.apache.wicket.ajax.form.AjaxFormSubmitBehavior.onEvent(AjaxFormSubmitBehavior.java:158)
    at org.apache.wicket.ajax.AjaxEventBehavior.respond(AjaxEventBehavior.java:184)
    at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:369)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:260)
    at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:241)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:255)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:781)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:185)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Thread.java:662) 
```

AccountingLineRow = DimensionHolder。

维度 3 = 维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:41:22.293

AFAIK，代理已初始化，无论您调用什么方法。这样做可能有充分的理由。例如，您的`getId()`方法可能包含以下说明：

```
public void getId() {
    LOG.debug("getId() called for entity with ID " + this.id + " and name " + name);
    return this.id;
} 
```

如果代理未初始化，则记录的名称将为空，这是不正确的。

我在某处读到，`getId()`如果您使用属性访问类型而不是字段访问类型（即，如果您的 getter 使用映射注释而不是字段进行注释），则调用时代理未初始化。

但是我会在关闭会话之前简单地初始化对象，而不是在之后初始化它，方法是发出一个新的 sessio 和一个新的数据库查询。

# sql - 我可以多选但只返回一个结果集吗

> ID：15132192
> 
> 赞同：7
> 
> 时间：2013-02-28T09:43:31.360
> 
> 标签：sql

如果我有多个这样的选择：

```
select * from A where A.name = 'linköping'

IF @@ROWCOUNT = 0
begin
    select * from A where A.amount = 45
end 
```

...如果第一个选择返回内容，我会得到 1 个结果集。但如果它运行第二个，我会得到两个结果集；第一个没有行，第二个有一些行。

如果运行第二个选择，有没有办法只返回第二个结果集？

我写这样的代码是因为 Andrey Gordeev 对这篇文章的回答：[你能在 SQL 中有 if-then-else 逻辑吗？](https://stackoverflow.com/questions/15085990/can-you-have-if-then-else-logic-in-sql)

(MSSQL 2000)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:47:16.270

您需要通过在运行选择*之前*检查是否会返回任何结果来防止第一次选择。

例如：

```
IF EXISTS (SELECT 1 FROM A WHERE A.name = 'linköping')
BEGIN
    SELECT * FROM A WHERE A.name = 'linköping'
END
ELSE 
BEGIN
    SELECT * FROM A WHERE A.amount = 45
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:46:19.750

这将适用于 IF-ELSE 逻辑。[测试]

```
DECLARE @count as int
set @count = (SELECT count(1) from A where A.name = 'linköping')
if (@count = 0)
BEGIN
    select * from A where A.amount = 45
END
ELSE
BEGIN
select * from A where A.name = 'linköping'
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:51:51.593

不，不可能返回结果取决于选择语句的数量。如果您想进行单选，请遵循@RB 或@Jwalin Shah 解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T15:18:28.173

试试这个

```
IF @@ROWCOUNT = 0
BEGIN
    select * from A where A.amount = 45
END
ELSE
BEGIN
    select * from A where A.name = 'linköping'
END 
```

# jquery - 客户端验证jQuery

> ID：15132194
> 
> 赞同：0
> 
> 时间：2013-02-28T09:43:37.677
> 
> 标签：jquery, jquery-validate

我有一个从数据库填充的选择选项字段，我想验证用户何时没有选择任何内容并按下提交按钮。我无法获得验证。这是我到目前为止所做的：

对于选择选项列表：

```
<form id="dataForm" method="get" action="">
<b>Year</b>
<?php
$sql = 'SELECT Year_Id,Year_Released FROM {extdb_year} WHERE Only_For_Trend = 0 ORDER BY Year_Released DESC';
$res = db_query($sql);

echo "<select id='Year_Released' name='Year_Released'>
  <option value='-1'>-Select-</option>";
$cnt = 0;
$options = array();
foreach ($res as $row)
{
    $cnt++;
    echo "<option value = '{$row->Year_Id}'";
    if ($cnt==1)
        echo "selected = 'selected'";
    echo ">{$row->Year_Released}</option>";

    $options[$row->Year_Id] = $row->Year_Released;
}
echo "</select>";

?>
<p>
     <input class="submit" type="submit" value="Submit"/>
   </p>
</form> 
```

用于验证的 JQuery 代码

```
$(document).ready(function(){

    $("#dataForm").validate({

    rules: {

        Year_Released: {
            required: true
        }

    },
    messages: {

    Year_Released: "You must select a Year."

    }

    });
}); 
```

在这方面的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:11:25.633

您的验证代码是正确的，但是元素中的第一个必须将 设置`option`为空。`select``value`

```
echo "<select id='Year_Released' name='Year_Released'>
    <option value=''>-Select-</option>"; 
```

**工作演示：http: [//jsfiddle.net/qhprG/](http://jsfiddle.net/qhprG/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:47:24.780

放置`<option value="">Choose an option</option>`为空白而不是 -1

使用 jquery 验证

```
rules: {
select: "required" } 
```

# c# - 由于元组，在 HTML 辅助方法中设置名称属性会导致命名错误

> ID：15132200
> 
> 赞同：0
> 
> 时间：2013-02-28T09:44:07.353
> 
> 标签：c#, asp.net-mvc, ado.net

您好我正在尝试在 asp.net MVC 中发布一个表单，但似乎当我单击提交按钮时我的控制器没有被调用。

我认为发生这种情况是因为每个输入的名称没有正确设置，因为我使用的是元组。我尝试使用 HTML 属性设置名称，但它似乎不起作用。

他是我的模特：

```
 public int Id { get; set; }
            public string Name { get; set; }
            public string Author { get; set; }
            public string Description { get; set;}
            public DateTime PublicationDate { get; set; }
            public int CategoryId { get; set; } 
```

这是我的控制器：

```
 public ActionResult AddBook()
        {
            IEnumerable<CategoryModel> categories = categoryContext.GetCategories();
            Tuple<BookModel1, IEnumerable<CategoryModel>> model =
                new Tuple<BookModel1, IEnumerable<CategoryModel>>(book, categories);
            return View(model);
        }

        [HttpPost]
        public ActionResult AddBook(BookModel1 book)
        {
            bookContext.AddBook(book);
            return RedirectToAction("Index", "ProductManager");
        } 
```

这是我的观点：

```
 @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)
        <fieldset>
               @Html.LabelFor(x => x.Item1.Name , "Book Name")
               @Html.TextBoxFor(x => x.Item1.Name, new { name = "Name" })
               @Html.LabelFor(x => x.Item1.Author)
               @Html.TextBoxFor(x => x.Item1.Author , new { name = "Author" })
               @Html.LabelFor(x => x.Item1.PublicationDate ,"Publication Date")
               @Html.TextBoxFor(x => x.Item1.PublicationDate , new { name = "PublicationDate" })
               @Html.LabelFor(x => x.Item2 , "Select category")
               @Html.DropDownListFor(x => x.Item2, new SelectList(Model.Item2, "Id", "Name")) 
               @Html.LabelFor(x => x.Item1.Description)
               @Html.TextAreaFor(x => x.Item1.Description ,  new { name = "Description" })
            <p>
                <input type="submit" value="Create" class="link"/>
                @Html.ActionLink("Back to List", "Index", "ProductManager", null,new { @class ="link"})
            </p>
        </fieldset>
    } 
```

即使我尝试使用 HTMLAttributes 设置名称属性，生成的名称仍然看起来像这样：Item1.PublicationDate。我正在使用 ADO.NET 进行数据访问。

我该如何解决这个问题，以便我可以调用`AddBook(BookModel1 book)`控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:26:56.917

是的，问题是因为`Tuple`类。该`Item`属性是只读的，它没有设置器，这意味着默认模型绑定器无法在回发时设置其值。您应该改用视图模型：

```
public class MyViewModel
{
    public BookModel1 Book { get; set; }
    public IEnumerable<CategoryModel> Categories { get; set; }
} 
```

然后使您的视图强类型化到视图模型：

```
@model MyViewModel
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        @Html.LabelFor(x => x.Book.Name, "Book Name")
        @Html.TextBoxFor(x => x.Book.Name, new { name = "Name" })
        @Html.LabelFor(x => x.Book.Author)
        @Html.TextBoxFor(x => x.Book.Author, new { name = "Author" })
        @Html.LabelFor(x => x.Book.PublicationDate, "Publication Date")
        @Html.TextBoxFor(x => x.Book.PublicationDate , new { name = "PublicationDate" })
        @Html.LabelFor(x => x.Book.CategoryId, "Select category")
        @Html.DropDownListFor(
            x => x.Book.CategoryId, 
            new SelectList(Model.Categories, "Id", "Name")
        ) 
        @Html.LabelFor(x => x.Book.Description)
        @Html.TextAreaFor(x => x.Book.Description, new { name = "Description" })
        <p>
            <input type="submit" value="Create" class="link"/>
            @Html.ActionLink("Back to List", "Index", "ProductManager", null, new { @class ="link"})
        </p>
    </fieldset>
} 
```

最后是你的控制器：

```
public ActionResult AddBook()
{
    var model = new MyViewModel();
    model.Categories = categoryContext.GetCategories();
    model.Book = ...
    return View(model);
}

[HttpPost]
public ActionResult AddBook(MyViewModel model)
{
    bookContext.AddBook(model.Book);
    return RedirectToAction("Index", "ProductManager");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:26:42.147

最好的方法不是使用元组，而是创建一个复杂的视图模型类，其中包含视图所需的所有数据。另一种方法是使用前缀绑定您的输入 BookModel1：

```
public ActionResult AddBook([Bind(Prefix = "Item1")]BookModel1 book) 
/*since you use Tuple and your bookmodel data is Item1*/ 
```

另外，检查您的表单是否正在发布以及您发布的数据（使用 fiddler/charles 或 firebug）

# php - 将日期格式更改为仅回显没有 0 的天数

> ID：15132203
> 
> 赞同：0
> 
> 时间：2013-02-28T09:44:13.503
> 
> 标签：php, date

我有

```
$date= '2013-11-03'; 
```

我需要编辑此格式以仅回显天数而没有 0

所以输出 = 3

请问我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:47:41.167

尝试这个 ：

```
$dt_str = '2013-11-03';
$date   = new Datetime($dt_str);
echo $date->format('Y-m-j'); 
```

如果您只需要显示一天：

```
echo $date->format('j'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:49:50.213

只需使用这个

```
 $date= '2013-11-03';
 $dateSet =  date('d', strtotime($date));
 printf("%d", $dateSet); 
```

它会工作...... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:46:52.217

```
echo date('d', strtotime($date)); 
```

# long-polling - 长轮询阻塞多个窗口？

> ID：15132204
> 
> 赞同：1
> 
> 时间：2013-02-28T09:44:17.300
> 
> 标签：long-polling

长轮询解决了我 99% 的问题。现在只有另一个问题。想象一个便士拍卖网站，人们在其中出价。在首页，有几个拍卖。

如果用户打开其中三个拍卖，并且由于 javascript 不是多线程的，那么您将如何让其他页面加载？他们不会总是因为等待长轮询结束而陷入困境并且无法加载吗？在实践中，我经历过这一点，我想不出办法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:13:44.170

javascript 有两种方法可以解决其中的一些问题。

1.  虽然 javascript 在概念上是单线程的，但它使用完成处理程序在单独的线程中执行其 io。这意味着在您等待网络请求完成时，可以运行其他 javascript 片段。
2.  每个页面（甚至每个页面中的每个框架）的 Javascript 都与其他页面/框架上的 Javascript 隔离。这意味着每个 javascript 副本都可以在自己的线程中运行。

对您来说更大的问题可能是浏览器通常会限制与给定站点的并发连接数，听起来您想与同一站点建立许多并发连接。在这种情况下，您将被锁定。

如果您同时控制服务器和客户端，则需要将来自客户端的多个长轮询请求组合成一个对服务器的长轮询请求。

# c# - 在 C# 中实现 NavieBayes

> ID：15132205
> 
> 赞同：-1
> 
> 时间：2013-02-28T09:44:29.600
> 
> 标签：c#, data-mining

只是想知道我可以在 C# 中实现 NavieBayes 算法吗？我只想在 C# 中使用 Navie Bayes 算法计算精度、TP-rate、FP-rate 等。

我只是使用 SQL 逻辑计算我的数据集的平均值和标准差

```
SELECT state, AVG([v2o] * 1.0) FROM portability WHERE state = 'Queensland' GROUP BY state 
```

和

```
SELECT state, STDEV([v2o] * 1.0) FROM portability WHERE state = 'Queensland' GROUP BY state 
```

谁能告诉我如何实现 Navie Bayes 算法。

例如，让我们考虑以下数据集作为示例

![在此处输入图像描述](../Images/e9365e8e7c8d1a956eefb0ee6f5e7758.png)

谁能告诉我为上述数据集实现 Navie Bayes 的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:54:58.617

检查[Accord.net](https://code.google.com/p/accord/)库。它具有您可以使用的朴素贝叶斯算法的实现。

# c# - RichTextBox 新文本附加在顶部

> ID：15132206
> 
> 赞同：4
> 
> 时间：2013-02-28T09:44:30.857
> 
> 标签：c#, winforms

我的应用程序中有`RichtTextBox`一个`C#`向用户显示日志。问题是`appends`旧文本下方新插入的文本，但我想将`append`它放在旧文本之上。

例如，当我附加文本“Newtext”时，它看起来像这样：

`RichtTextBox`：

```
|---------------------
|Oldtext             |
|Newtext             |
|--------------------- 
```

但它需要看起来像这样：

`RichTextBox`：

```
|---------------------
|Newtext             |
|Oldtext             |
|--------------------- 
```

这是我用来填充我的代码`RichTextBox`：

```
public void DisplayLog(string logtext)
        {
            if (logtext != "")
            {
                if (this.txtLog.InvokeRequired && !txtLog.IsDisposed)
                {
                    Invoke(new MethodInvoker(delegate()
                        {
                            txtLog.AppendText(DateTime.UtcNow + ": " + logtext + "\n");
                        }));
                }
                else if (!txtLog.IsDisposed)
                {
                    txtLog.AppendText(DateTime.UtcNow + ": " + logtext + "\n");
                }
            }
        } 
```

有人可以帮帮我吗？

**回答：**

[在富文本框顶部插入](https://stackoverflow.com/questions/1818875/inserting-at-top-of-richtextbox)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T09:49:38.343

使用插入

```
txtLog.Text =  txtLog.Text.Insert(0,DateTime.UtcNow + ": " + logtext + "\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:58:43.983

我认为 txtlog 是 RichTextBox，你应该在前面加上它。

为此，请在开始使用

```
txtlog .SelectionStart = 0;
txtlog .SelectionLength = 0;
txtlog .SelectedText = (DateTime.UtcNow + ": " + logtext + "\n"); 
```

# java - 使用 Servlet 写入文本文件

> ID：15132207
> 
> 赞同：-4
> 
> 时间：2013-02-28T09:44:34.283
> 
> 标签：java, servlets

如何使用 Servlet 在 HTML 页面上设置三个文本字段并将输入的数据存储在服务器上的文本文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:50:39.640

1.  Create a form in the HTML page and have the action set to the name of the Servlet.
2.  Within that Servlet, call the parameters with request.getParameter("...");
3.  Append the combined String to the file using something like:

    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("FileName", true))); out.println(createFullNameString(firstName, middleName, lastName)); out.close();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:02:17.820

```
 <input type="text" name="firstname" id="firstname" />
 <input type="text" name="middlename" id="middlename" />
 <input type="text" name="lastname" id="lastname" />

    in servlet

    String firstname=request.getParameter("firstname");
String middlename=request.getParameter("middlename");
String lastname=request.getParameter("lastname"); 
```

# php - 不能对 jQuery 中的 .load()-ed 内容做任何事情？

> ID：15132210
> 
> 赞同：0
> 
> 时间：2013-02-28T09:44:56.070
> 
> 标签：php, javascript, jquery

我面临一个有趣的问题，一切都完美无缺。我对每一步都进行控制台记录，它会以应有的方式发挥作用。但！我在我的 .load(a-file.php) 中有一个#div。现在“a-file.php”也包含 HTML 标记，更具体地说，我想让某些链接“激活”加载。

设想; 页面加载发生，Javascript 加载文件并将其加载到 div 中。该 div 现在有选项卡，我希望第一个选项卡处于“活动”状态，这需要我 addClass('active');。但以下似乎没有效果

```
$('#content').load('file.php'); // works.
$('#content a[rel="weird-page"]').addClass('active'); // does not work. 
```

任何形式的帮助，即使是远程确定它，都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:47:13.933

改成：

```
$('#content').load('file.php', function() {
   $('#content a[rel="weird-page"]').addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:54:29.747

jQuery`load()`异步工作，因此您的`addClass()`方法在完成之前被调用`load()`。

使用`load()`回调函数，它将确保您的内容已加载：

```
$('#content').load('file.php', function() {
   $(this).find('a[rel="weird-page"]').addClass('active');
}); 
```

*无耻插件警告：*我写了[一篇关于 jQuery 回调函数](http://curtistimson.net/Blog/Article/Using-jQuery-callback-functions)的博客文章，您可能会发现它很有用。

# list - 检查列表是否已排序的 Groovy 方法

> ID：15132211
> 
> 赞同：11
> 
> 时间：2013-02-28T09:44:59.610
> 
> 标签：list, sorting, groovy

Groovy 是否有一种智能方法来检查列表是否已排序？前提是 Groovy 实际上知道如何对对象进行排序，例如字符串列表。

我现在做的方式（这个例子只有一些测试值）是将列表复制到一个新列表，然后对其进行排序并检查它们是否相等。就像是：

```
def possiblySorted = ["1", "2", "3"]
def sortedCopy = new ArrayList<>(possiblySorted)
sortedCopy.sort() 
```

我在几个地方的单元测试中使用它，所以它会很好：

```
def possiblySorted = ["1", "2", "3"]
possiblySorted.isSorted() 
```

有没有像这样的好方法来检查列表是否在 Groovy 中排序，或者哪种是首选方法？我几乎希望 Groovy 有这样的东西，因为它在集合和迭代方面非常聪明。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T10:54:37.530

如果您想避免执行 O(n*log(n)) 操作来检查列表是否已排序，您可以只迭代一次并检查每个项目是否小于或等于下一个项目：

```
def isSorted(list) {
    list.size() < 2 || (1..<list.size()).every { list[it - 1] <= list[it] }
}

assert  isSorted([])
assert  isSorted([1])
assert  isSorted([1, 2, 2, 3])
assert !isSorted([1, 2, 3, 2]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T09:47:36.627

为什么不将它与同一列表的排序实例进行比较？

```
def possiblySorted = [ 4, 2, 1 ]

// Should fail
assert possiblySorted == possiblySorted.sort( false ) 
```

我们传递`false`给 sort 方法，因此它返回一个新列表而不是修改现有列表

你可以像这样添加一个方法：

```
List.metaClass.isSorted = { -> delegate == delegate.sort( false ) } 
```

然后，你可以这样做：

```
assert  [ 1, 2, 3 ].isSorted()
assert ![ 1, 3, 2 ].isSorted() 
```

# css - 如何相对于视口调整元素的大小，同时“限制”它的最大和最小尺寸？

> ID：15132215
> 
> 赞同：0
> 
> 时间：2013-02-28T09:45:07.543
> 
> 标签：css

我在 p 标签中有一些文本，在我的 css 中有： p { min-width: 100px; 最大宽度：400px 字体大小：24vw；}

我希望文本根据视口宽度改变大小，但限制为最小和最大宽度。

编辑： [这是一个工作示例](http://jsbin.com/mazuxe/edit?html,css,output)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:53:00.613

**习惯了这个css**

**[演示](http://tinkerbin.com/m5ycg3F8)**

```
p { min-width: 100px; 
max-width: 400px;
 font-size: 24px; } 
```

你的css中缺少一些...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T16:41:39.097

要根据视口宽度设置动态字体大小，并限制最大和最小元素宽度，请使用 max/min-width 属性设置宽度限制，并使用 'vw'(viewport-width) 属性来获取相对于视口宽度的字体大小单位。

使用原始问题中所述的代码：

```
p { 
 min-width: 100px; 
 max-width: 400px 
 font-size: 24vw; 
} 
```

我发布的原始代码运行良好，当时我对代码几乎没有经验。

[这是一个工作示例](http://jsbin.com/mazuxe/edit?html,css,output)

# java - 运算符 || 未为 Android 应用程序中的参数类型 java.lang.String、java.lang.String 定义

> ID：15132217
> 
> 赞同：1
> 
> 时间：2013-02-28T09:45:18.720
> 
> 标签：java, android

我正在尝试获取数据库存储的值并检查是否存在任何值，然后应该调用一个方法。但是，在检查时我收到此错误-> 运算符`||`未定义参数类型`java.lang.String`java.lang 。细绳

```
if ((DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY
    || DBAdapter.KEY_AUDIENCE_TARGETING_WORLD) != null)
{
    populate();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:46:40.023

您错过了“if”第一部分中的布尔表达式：

`DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY`并且`DBAdapter.KEY_AUDIENCE_TARGETING_WORLD`不是布尔值

您只能将 , 等逻辑运算符`||`与`&&`布尔类型一起使用。

尝试分别将每个值与“null”进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:47:34.240

尝试：

```
if(DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY != null || DBAdapter.KEY_AUDIENCE_TARGETING_WORLD != null)
{
 populate();
} 
```

您只能将逻辑运算符（如`||`and &）`&`与布尔值一起使用。就像`DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY`和`DBAdapter.KEY_AUDIENCE_TARGETING_WORLD`都是字符串一样，当您将运算符添加到其中时，Java 不知道如何处理它们`||`。您需要将它们分别与 null 进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:48:05.160

如果这些是字符串，你想这样做：

```
if (DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY != null ||
    DBAdapter.KEY_AUDIENCE_TARGETING_WORLD != null)
{
    // executes if at least one of the values is not null
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T09:47:06.660

```
if(DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY != null || DBAdapter.KEY_AUDIENCE_TARGETING_WORLD != null)
{
  populate();
} 
```

在 Java 中，您只能对s使用`boolean`操作。`boolean`希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:12:14.240

```
if((DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY ) || (DBAdapter.KEY_AUDIENCE_TARGETING_WORLD ))
{
  populate();
} 
```

试试这个，如果它有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T09:50:08.590

你应该像这样使用它。

```
if (DBAdapter.KEY_AUDIENCE_TARGETING_COUNTRY != null
    || DBAdapter.KEY_AUDIENCE_TARGETING_WORLD != null)
{
    populate();
} 
```

`||`使用String时不能使用。您只能将其用于布尔值。

# c# - 优化代码以增加 char 值

> ID：15132219
> 
> 赞同：0
> 
> 时间：2013-02-28T09:45:26.477
> 
> 标签：c#, optimization, ascii

这是我的 c# 代码，用于将 ascii 值增加 13

```
int a = Convert.ToInt32('z');
            for (int i = 0; i < 13; i++)
            {
                if (a > 96 && a < 122)
                {
                    a++;
                }
                else
                {
                    a = 97;
                }

            }
            string c = Convert.ToChar(a).ToString(); 
```

所以这个输出`m`是`z+13` 避免for循环的任何方式。

基本上我正在尝试实施[ROT-13](http://www.dotnetperls.com/rot13)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:50:33.923

## 初步答案

你当然可以只做`a += 13;`你现在做 for 循环的地方。

但这可以进一步缩短。

```
char c = 'a';
if (c >= 'a' && c <= 'z') {
    c = (char)(((int)c)+13);
} 
```

## 更新

对于您更新的问题，我认为您可以通过以下方式做到这一点：

```
char c = 'z';
c = (char)(((int)'a') + ((c - (int)'a' + 13) % 26));
// Output c = 'm'
// If you use c = 'a', then the output is c = 'n' 
```

实际上，您可以将强制转换为 int 和一些括号。这留下了以下内容，这可能会更清楚一些。

```
char c = 'z';
c = (char)('a' + (c - 'a' + 13) % 26);
// Output c = 'm'
// If you use c = 'a', then the output is c = 'n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:47:12.223

怎么样：

```
a += 13; 
```

现在，如果在这个加法之后数字太高，你应该可以减去 26 来“环绕”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:58:34.397

我认为这会做到：

```
int a = Convert.ToInt32('z');
a = (a >= 97 && a <= 122) ?
        (a > 109) ?
            a -= 13 : a += 13 : (a >= 65 && a <= 90) ?
                (a > 77) ?
                    a -= 13 : a += 13 : a;
string c = Convert.ToChar(a).ToString(); 
```

它基本上是单个字符的[C# ROT13 方法，但形式更短（且可读性更低）。](http://www.dotnetperls.com/rot13)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:55:09.000

你不需要这个 for 循环：

```
int a = Convert.ToInt32('z');
            if (a > 96 && a < 122)
            {
                a+=13;
            }
            else
            {
                a = 97;
            }
        string c = Convert.ToChar(a).ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T09:48:38.250

不需要`for`循环 - 您只需将 13 添加到`int`值：

```
a = a + 13; 
```

或者

```
a += 13; 
```

# asp.net-mvc-3 - 通过 WIF 进行身份验证后，User.Identity.Name 为空

> ID：15132220
> 
> 赞同：3
> 
> 时间：2013-02-28T09:45:26.523
> 
> 标签：asp.net-mvc-3, wif

我正在使用 WIF 登录我的应用程序。一切似乎都很好（日志记录、重定向到站点等），但是当我尝试`User.Identity.Name`在我的 cod 中使用时，异常被抛出 -`User`为空。任何想法我做错了什么？我在 VS 2012 上工作。web.config 中生成的部分如下所示：

```
 <system.identityModel>
    <identityConfiguration>
      <audienceUris>
        <add value="http://xxx/" />
      </audienceUris>     
      <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <trustedIssuers>
          <add thumbprint="yyyy" name="https://zzz" />
        </trustedIssuers>
      </issuerNameRegistry>
    </identityConfiguration>
  </system.identityModel> 
```

和：

```
 <system.identityModel.services>
    <federationConfiguration>
      <cookieHandler requireSsl="false" />
      <wsFederation passiveRedirectEnabled="true" issuer="https://zzz/Secure/FederatedLogin.ashx" realm="http://xxx" requireHttps="false" />          
    </federationConfiguration>        
  </system.identityModel.services> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:09:10.947

检查 STS 是否包含用户的**名称**声明，否则 User.Identity.Name 将为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:20:02.767

使用 WIF 时，您应该使用 Thread.CurrentPrincipal.Identity.Name 而不是 User.Identity.Name。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/magazine/ff872350.aspx](http://msdn.microsoft.com/en-us/magazine/ff872350.aspx)以了解有关 Windows Identity Foundation 的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T18:11:01.870

Instead I used:

```
namespace System.Security.Claims
{
    public static class System_Security_Claims_Extensions
    {
        public static string getName(this ClaimsIdentity ci)
        {
            foreach (Claim c in ci.Claims)
            {
                if (c.Type == ClaimTypes.Name)
                {
                    return c.Value;
                }
            }
            return string.Empty;
        }
    }
} 
```

And used in this context
`((ClaimsIdentity)Thread.CurrentPrincipal.Identity).getName()`

# javascript - 选择最接近的控制元素，无论类型如何（输入、选择等）进行验证

> ID：15132223
> 
> 赞同：0
> 
> 时间：2013-02-28T09:45:32.077
> 
> 标签：javascript, jquery, html

让我解释：

我有一个表格，需要一些字段，我正在尝试创建自定义验证。

例子：

```
<table>
   <tr>
     <td class="required">Description</td>
     <td>
        <input id="input1" />
      </td>
      <td>Phone</td>
      <td>
         <input id="input2" />
       </td>
    </tr>
    <tr>
       <td class="required">Location</td>
       <td> 
         <select id="select1"/>
       </td>
       <td>Email</td>
       <td>
          <input id="input3"/>
        </td>
    </tr>
  </table> 
```

我想做的是找到所有需要类的元素，这很容易使用：

```
var requiredElements = document.querySelectorAll(".required"); 
```

然后我想找到他们最近的控制元素并检查它的值是否为空。问题是我不知道它是要输入还是选择。我正在考虑使用 .closest() 函数，但如果两个不同的输入同样接近所需的值（如上面的示例），它可能会导致不需要的结果。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:09:06.290

您可以通过使用任意一种[选择器](http://api.jquery.com/category/selectors/)并将其与一个或多个附加选择器组合使用[jQuery](http://jquery.com/)来选择控件，而不管其类型如何。

在您提供的代码片段中，您要选择的控件 (`input1`和`select1`) 是表格单元格元素的子元素，该单元格元素是具有“必需”类的单元格的兄弟，因此我们可以构建一个选择：

```
$(".required + td").child 
```

分解为：

1.  找到应用了“必需”类的元素。这将为我们提供 2 个表格单元格：

    ```
    <td class="required">Description</td> 
    ```

    和

    ```
    <td class="required">Location</td> 
    ```

2.  **对于1**返回的每个元素。使用“下一个相邻”选择器`+`来`td`获取下一个表格单元格：

    ```
    <td><input id="input1" /></td> 
    ```

    和

    ```
    <td><select id="select1" /></td> 
    ```

3.  **对于2.**返回的每个元素，获取子元素：

    ```
    <input id="input1" /> 
    ```

    和

    ```
    <select id="select1" /> 
    ```

还有一个[jsFiddle](http://jsfiddle.net/raad/e4fvX/2/)来说明对目标的操作（将边框更改为深红色）。

**编辑**
这是有效的，因为您的代码片段中的布局始终将您想要定位的元素放置在相对于具有您的选择标准的元素的相同位置。您**必须**有一些一致的方法来查找未标有类/id 的元素，否则您将无法实现目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:47:57.640

虽然我喜欢 Raad 的回答，但我想发布这个答案来说明我为解决我的问题所做的工作。

首先，我为每个标签 td 添加了一个自定义属性 labelFor ，其值等于其相应输入的 id ，如下所示：

```
<table>
   <tr>
     <td class="required" labelFor="input1">Description</td>
     <td>
        <input id="input1" />
      </td>
      <td labelFor="input2">Phone</td>
      <td>
         <input id="input2" />
       </td>
    </tr>
    <tr>
       <td class="required" labelFor="select1">Location</td>
       <td> 
         <select id="select1"/>
       </td>
       <td labelFor="input3">Email</td>
       <td>
          <input id="input3"/>
        </td>
    </tr>
  </table> 
```

然后我使用了以下验证功能：

```
 function validateForm () {
                var self = this;
                var validationPassed = true;
                //First I will gather every .required element in an Array
                var requiredTags = document.querySelectorAll(".required"); 
                //Then I will loop through the array
                for (var i = 0; i < requiredTags.length; i++) {
//Get value of attribute "labelFor" which would be the controlId that this label refers to
                    var controlId = $(requiredTags[i]).attr("labelFor");
    //Then I use this to check if that control's value is empty.
                    if ($("#" + controlId).val() == ('' || null)) {
                        validationPassed = false;
                    }  
                }
                if (!validationPassed) {
                    alert("Please fill all the required fields");
                }
                return validationPassed; 
            } 
```

这样，我检查所有必填字段是否不为空并返回 true，或者返回 false 并发出警告以警告用户。

我发现 Raad 在他的编辑中描述的问题是这种方法更有用的主要原因。如果您的输入元素相对于标签 td 元素始终位于相同的位置，您不必担心。

# jquery - 我们是否需要为 malsup.com/jquery/form/ 配置或自动加载某些内容才能在 codeigniter 中工作

> ID：15132226
> 
> 赞同：0
> 
> 时间：2013-02-28T09:45:41.253
> 
> 标签：jquery, ajax, forms, codeigniter, file-upload

我正在尝试使用 ajax 上传带有图像和其他输入的表单。我在用

[http://malsup.com/jquery/form/#ajaxForm](http://malsup.com/jquery/form/#ajaxForm)。当我在没有 Codeigniter 的情况下工作时，一切正常。但是当我在我的视图中集成代码然后提交表单时，它正在加载一个新页面，即实际给出的页面。如果我删除该操作并在脚本中放置一个 url，则不会发生任何事情 - 就好像脚本没有被调用一样。这是我的代码：-

```
 <html>
 <head>

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
 <script src="http://malsup.github.com/jquery.form.js"></script> 

<script type="text/javascript">
$(document).ready(function() {
    var options = { 
        clearForm: true,
        resetForm: true
    };
    // bind 'myForm' and provide a simple callback function 
    $('#myForm').ajaxForm(function() { 
        //alert("Thank you for your comment!"); 

    }); 
    $('#myForm').ajaxForm(options);

}); 
</script> 

</head>

<body>
<form id="myForm" name="myForm" action="/main/comment" method="post"   enctype="multipart/form-data"> 
<input type="text" name="name" />
<br /> 
<textarea name="comment"></textarea> 
<br />
<input type="file" value="Share a Pic" name="file" id="file" />
<br />
<input type="submit" value="Submit Comment" /> 
</form>
</body> 
```

# jquery - jQueryMobile弹出错误3次然后返回导航

> ID：15132232
> 
> 赞同：0
> 
> 时间：2013-02-28T09:46:08.953
> 
> 标签：jquery, web-applications, jquery-mobile, mobile, popup

我的移动网络应用程序有一个非常奇怪的问题。我已经为此工作了几个月，突然间出现了这个问题。您可以将问题称为**“3 次罢工，您出局了！”** .

我用：

*   jQuery - 1.7.1
*   jQueryMobile - 1.2.0

编辑：
1\. 当我关闭弹出窗口时，我收到此错误消息：

```
XHR finished loading: "http://192.168.0.67/".
  f.support.ajax.f.ajaxTransport.send
  f.extend.ajax 
  a.mobile.loadPage 
  a.mobile.changePage 
  a.mobile.navreadyDeferred.done.a.mobile._handleHashChange 
  a.extend.onPopState 
  f.event.dispatch 
  f.event.add.h.handle.i 

Uncaught TypeError: Cannot call method '_trigger' of undefined 
  z 
  a.mobile.changePage 
  a.mobile.changePage.a.mobile.loadPage.done.fail.m 
  f.Callbacks.n 
  f.Callbacks.o.fireWith 
  f.Callbacks.o.fire 
  a.mobile.loadPage.a.mobile.allowCrossDomainPages.h.isSameDomain.a.ajax.success
  f.Callbacks.n 
  f.Callbacks.o.fireWith 
  w 
  f.support.ajax.f.ajaxTransport.send.d 
```

1.  第二次没有什么特别的事情发生。

2.  但是我第三次关闭弹出窗口 - 浏览器返回到上一个网页的导航！！！

我不想更改页面，但我认为这就是 jQuery 想要的。如何防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:13:56.557

这个答案解决了我的问题： [https ://stackoverflow.com/a/13699396/1340601](https://stackoverflow.com/a/13699396/1340601)

问题是 jQueryMobile 弹出窗口正在处理浏览器历史记录。我把它从全局（在mobileinit中）转向解决了这个问题。

```
$.mobile.popup.prototype.options.history = false; 
```

# oracle - 为什么Oracle在加载UTF8数据时将U+2002转为U+0020？

> ID：15132237
> 
> 赞同：1
> 
> 时间：2013-02-28T09:46:13.383
> 
> 标签：oracle, utf-8, character-encoding, plsql

使用 UTF8 作为字符集将 blob 数据转换为 clob 数据时，Oracle (11gR2) 似乎将字节 0xE2 0x80 0x82 转换为 0x20。正如我所怀疑的那样，这是完全错误的吗？甚至可能是一个错误？

我需要编辑包含 UTF8 编码数据的 clob，同时保留原始字符（所有字符，尤其是 EN 空间）。

仅供参考：0xE2 0x80 0x82 是“EN 空间”，而 0x20 是“正常空间”

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lob.htm#i1020356](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lob.htm#i1020356)

[http://en.wikipedia.org/wiki/Space_%28punctuation%29](http://en.wikipedia.org/wiki/Space_%28punctuation%29)

[http://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192)

```
declare
    v_clob                  clob;
    v_clob_content          varchar2(8);
    v_content_ok            varchar2(64);
    v_content_bad           varchar2(64);
    v_blob                  blob;
    v_raw                   raw(8);

    v_c_dst_offset          pls_integer := 1;
    v_c_src_offset          pls_integer := 1;
    v_c_ctx                 pls_integer := 0;
    v_c_warn                pls_integer;
begin

    -- Create temporary lobs and cache them
    dbms_lob.createtemporary(v_blob,true);
    dbms_lob.createtemporary(v_clob,true);

    -- Write 0xE2 0x80 0x82 to the BLOB
    v_raw := hextoraw('E2') || hextoraw('80') || hextoraw('82');
    dbms_lob.write(v_blob,utl_raw.length(v_raw),1,v_raw);

    -- Convert the BLOB to CLOB using AL32UTF8 as encoding
    dbms_lob.converttoclob(
       v_clob,
       v_blob,
       dbms_lob.getlength(v_blob),
       v_c_dst_offset,
       v_c_src_offset, 
       nls_charset_id('AL32UTF8'),
       v_c_ctx,
       v_c_warn);

    -- Put the CLOB contents into a varchar2
    v_clob_content := dbms_lob.substr(v_clob,dbms_lob.getlength(v_clob));   

    -- Output the HEX value of respectively the BLOB content and the CLOB content
    select rawtohex(v_clob_content) into v_content_bad from dual;
    select rawtohex(v_raw) into v_content_ok from dual;
    dbms_output.put_line('[' || v_content_bad || ']');
    dbms_output.put_line('[' || v_content_ok || ']');

    -- Release resources
    dbms_lob.freetemporary(v_clob);
    dbms_lob.freetemporary(v_blob);
end;
/ 
```

输出：

```
[20]
[E28082]

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:26:50.700

您的数据库可能没有在`AL32UTF8`字符集下运行？

IE：

```
SQL> col value format a20
SQL> select * from nls_database_parameters where parameter like '%CHARACTERSET%';

PARAMETER                      VALUE
------------------------------ --------------------
NLS_CHARACTERSET               AL32UTF8
NLS_NCHAR_CHARACTERSET         UTF8

SQL> declare
  2      v_clob                  clob;
  3      v_clob_content          varchar2(8);
  4      v_content_ok            varchar2(64);
  5      v_content_bad           varchar2(64);
  6      v_blob                  blob;
  7      v_raw                   raw(8);
  8
  9      v_c_dst_offset          pls_integer := 1;
 10      v_c_src_offset          pls_integer := 1;
 11      v_c_ctx                 pls_integer := 0;
 12      v_c_warn                pls_integer;
 ...
 46  end;
 47  /
[E28082]
[E28082]

PL/SQL procedure successfully completed. 
```

vs 在非 al32utf8 数据库中运行：

```
SQL> select * from nls_database_parameters where parameter like '%CHARACTERSET%';

PARAMETER                      VALUE
------------------------------ --------------------
NLS_NCHAR_CHARACTERSET         UTF8
NLS_CHARACTERSET               WE8ISO8859P15

SQL> set serverout on
SQL> declare
  2      v_clob                  clob;
...
 47  /
[BF]
[E28082] 
```

lob 在我的西方 ISO 数据库中进行了转换。如果您需要保留`AL32UTF8`非二进制数据类型，请确保您的数据库在该字符集下运行。

# iphone - 如何在IOS中自定义Camera视图

> ID：15132238
> 
> 赞同：0
> 
> 时间：2013-02-28T09:46:16.570
> 
> 标签：iphone, ios, objective-c, xcode

我有一个要求，例如在相机视图中添加一个圆圈并仅在该圆圈中拍摄照片。我该怎么做。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:54:28.230

您可以在视图上方叠加视图请参考以下链接

[iPhone sdk - 使用自定义相机](https://stackoverflow.com/questions/5181590/iphone-sdk-use-a-custom-camera)

为了在圆圈中拍照，当用户点击拍照按钮时，您可以截取该特定区域的屏幕截图

```
UIGraphicsBeginImageContextWithOptions(vw.frame.size, NO, [[UIScreen mainScreen] scale]);
CGContextRef context = UIGraphicsGetCurrentContext();
[vw.layer renderInContext:context];
UIImage * img UIGraphicsGetImageFromCurrentImageContext(); 
```

**希望这将帮助您建立自己的逻辑**

# c# - 为什么 C# 中的 Lookup 是不可变的？

> ID：15132252
> 
> 赞同：18
> 
> 时间：2013-02-28T09:46:49.123
> 
> 标签：c#, dictionary, lookup

与 不同`Dictionary`，您不能通过`Lookup`逐个添加元素来构造 a 。你碰巧知道原因吗？

`Lookup`就像`multimap`在 C++ 中一样；为什么我们不能在 C# 中修改它？如果我们真的不能，我们如何`multimap`在 C# 中构造数据结构？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T09:49:22.563

`Lookup`并`ILookup`作为 LINQ 的一部分引入，它通常采用比框架的其他方面更具功能性的方法。就我个人而言，我*喜欢*（至少公开地）不可变的事实`Lookup`——我期待[更多不可变的集合可用](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)。

如果你想创建自己的多图数据结构，只需维护一个`Dictionary<TKey, List<TValue>>`或类似的东西。您可能想查看我的[Edulinq 实现以`Lookup`](https://code.google.com/p/edulinq/source/browse/src/Edulinq/Lookup.cs)获取一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T11:09:34.747

这是我写的一个实现

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

public class MultiLookup<Key, Value> : ILookup<Key, Value>
{
    Dictionary<Key, HashSet<Value>> Contents = new Dictionary<Key, HashSet<Value>>();

    public void Add(Key key, Value value)
    {
        if (!Contains(key))
        {
            Contents[key]=new HashSet<Value>();
        }
        Contents[key].Add(value);
    }

    public void Add(IEnumerable<Tuple<Key, Value>> items)
    {
        foreach (var item in items)
        {
            Add(item.Item1, item.Item2);
        }
    }

    public void Remove(Key key, Value value)
    {
        if (!Contains(key))
        {
            return;
        }
        Contents[key].Remove(value);
        if (Contents[key].Count==0)
        {
            Contents.Remove(key);
        }
    }

    public void RemoveKey(Key key)
    {
        Contents.Remove(key);
    }

    public IEnumerable<Key> Keys
    {
        get
        {
            return Contents.Keys;
        }
    }

    public int Count
    {
        get
        {
            return Contents.Count;
        }
    }

    public bool Contains(Key key)
    {
        return Contents.ContainsKey(key);
    }

    private class Grouping : IGrouping<Key, Value>
    {
        public MultiLookup<Key, Value> _source;
        public Key _key;

        public Key Key
        {
            get { return _key; }
        }

        public static HashSet<Value> Empty = new HashSet<Value>();
        public IEnumerator<Value> GetEnumerator()
        {
            if (!_source.Contains(_key))
            {
                yield break;
            }
            else
            {
                foreach (var item in _source[_key])
                {
                    yield return item;
                }
            }
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return this.GetEnumerator();
        }
    }

    public IEnumerator<IGrouping<Key, Value>> GetEnumerator()
    {
        return (from p in Contents
               select new Grouping() { _key = p.Key, _source = this }).GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }

    public IEnumerable<Value> this[Key key]
    {
        get { return Contents[key]; }
    }
} 
```

和一个测试用例（可能并不详尽）给你

```
using FluentAssertions;
using System.Linq;
using Xunit;

public class MultiLookupSpec
{
    MultiLookup<int, string> Fixture = new MultiLookup<int,string>();

    [Fact]
    public void NewLookupShouldBeEmpty()
    {
        Fixture.Count.Should().Be(0);
    }

    [Fact]
    public void AddingANewValueToANonExistentKeyShouldCreateKeyAndAddValue()
    {
        Fixture.Add(0, "hello");
        Fixture.Count.Should().Be(1);
    }

    [Fact]
    public void AddingMultipleValuesToAKeyShouldGenerateMultipleValues()
    {
        Fixture.Add(0, "hello");
        Fixture.Add(0, "cat");
        Fixture.Add(0, "dog");

        Fixture[0].Should().BeEquivalentTo(new []{"hello", "cat", "dog"});
    }

    [Fact]
    public void RemovingAllElementsOfKeyWillAlsoRemoveKey()
    {
        Fixture.Add(0, "hello");
        Fixture.Add(0, "cat");
        Fixture.Add(0, "dog");

        Fixture.Remove(0, "dog");            
        Fixture.Remove(0, "cat");            
        Fixture.Remove(0, "hello");

        Fixture.Contains(0).Should().Be(false);
    }

    [Fact]
    public void EnumerationShouldWork()
    {
        Fixture.Add(0, "hello");
        Fixture.Add(0, "cat");
        Fixture.Add(0, "dog");
        Fixture.Add(1, "house");
        Fixture.Add(2, "pool");
        Fixture.Add(2, "office");

        Fixture.Select(s => s.Key).Should().Contain(new[] { 0, 1, 2 });
        Fixture.SelectMany(s => s).Should().Contain(new[] { "hello", "cat", "dog", "house", "pool", "office" });

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T16:45:18.033

我有同样的问题和疑问。为什么查找是不可变的？我用 IDictionary 的一些扩展方法解决了这个问题

```
public static void Add<TKey,TList,TItem>(this IDictionary<TKey,TList> dict,TKey key,TItem item)
        where TList : ICollection<TItem>,new()
    {
        if(!dict.ContainsKey(key))
        {
            dict.Add(key, new TList());
        }
        dict[key].Add(item);
    }

    public static void Remove<TKey, TList, TItem>(this IDictionary<TKey, TList> dict, TKey key)
        where TList : IEnumerable<TItem>, new()
    {
        if (dict.ContainsKey(key))
        {
            dict.Remove(key);
        }
    }

    public static TList Items<TKey, TList, TItem>(this IDictionary<TKey, TList> dict, TKey key)
        where TList : IEnumerable<TItem>, new()
    {
        if (dict.ContainsKey(key))
        {
            return dict[key];
        }
        return default(TList);            
    } 
```

# php - 使用 PHP 进行测试。如何确保事情正常运行？

> ID：15132254
> 
> 赞同：6
> 
> 时间：2013-02-28T09:46:58.747
> 
> 标签：php, testing, automated-tests

首先，我不知道它是否称为单元测试。如果它有不同的名称，请随时纠正我。

我目前正在开发这样的网络应用程序。

假设我正在开发一个表单来将值保存到数据库中。我开发 HTML 和 PHP。我不时在浏览器中按 F5 并检查 HTML/jQuery 是否没有错误，并且 PHP 不会给出错过分号之类的错误。

当它完成并且一切都准备好进行测试时，我开始测试我的一小部分代码。像;

1.  -$_POST 数组是否正确地从表单文件中获取值？（我用 print_r 测试）
2.  -“$email”变量是否被正确清理为有效的电子邮件？（我用不同的可能性对其进行测试，例如：aaa@bbb、aa@bb.com、a@@b.net 等）
3.  - 提交的表单是否通过所有控制，并成功插入数据库？（我检查了我的 MySQL 表。）
4.  - 表单是否正确显示错误/成功消息？
5.  -...ETC。

如果它以正确的值工作，并且以错误的值失败；我相信表单按预期工作并且没有错误，所以我转向其他事情。

我不想这样做，而是想确保一切正常运行，否则会在不向浏览器发送垃圾邮件 F5 的情况下通知我问题。

像这样;

```
<?php
/* Unit Testing Start --
-ensure: isset($_POST['submit']) returns TRUE;
-ensure: isset($email) returns TRUE;
-ensure: isValidEmail($email) returns TRUE;
-ensure: connectDatabase() returns TRUE;
-ensure: getMysqlAffectedRows() returns 1;
-ensure: hasErrors() returns false;
*/

?> 
```

我的表单代码，使用我上面发布的功能。

当它运行时，它应该向我显示这样的消息：（最好也记录它）

```
Test complete. Tested (6) possibilities, (4) succeeded, (2) failed. 
Failed 1: isValidEmail() returned FALSE, expected: TRUE. 
Failed 2: getMysqlAffectedRows returned NULL/0, expected INTEGER 1. 
```

这样的事情会节省我很多时间，并且更容易维护我的代码。

我不想这样做：

```
$email = 'xxx@yyy.com';
echo isValidEmail($email) ? 'true' : 'false'; 
```

然后我必须从我的 PHP 脚本中删除这些行。测试必须永远留在那里，除非我手动删除它们。它们应该像评论一样在生产网站中，它们不会被执行。但是，在我的开发 PC 中，我将安装我需要安装的任何东西，并且必须解析/记录这些评论。

是的。就这样。现在进入问题：

*   有可能与PHP有关吗？如果是这样，我该怎么做？

*   它叫什么，单元测试，还是什么？

*   你们如何测试你开发的任何东西？

*   你们如何在不担心的情况下设法开发大型 Web 应用程序？“如果我改变这个功能，整个网站可能会崩溃。”？另外，您如何确定更改功能没有破坏任何东西？X 页面可能工作正常，但 Y 页面可能会因为您之前没有想到的事情而损坏。比如，X 页除以 3 可以正常工作，但是 Y 页除以 0 肯定会出错，但你只检查了 X 页？

如果您能回答我的问题并帮助我成为更好的开发人员，我将非常高兴。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:55:39.507

是的，自动化测试是可靠的软件开发的基石，正是因为通过单击浏览器来手动检查所有内容是不可能的。*单元测试*通常是“技术”测试，可确保特定“单元”（通常是函数或类）返回指定输入的预期返回值。*功能测试*测试更大的代码单元的正确行为。*验收测试* 从用户的角度测试最终的应用程序。

有许多框架和工具可以满足这些不同的需求：

*   [PHPUnit](http://www.phpunit.de/manual/current/en/automating-tests.html) - PHP 的事实上的单元测试框架
*   [Behat](http://behat.org) - 一个专注于提供“业务可读”测试的测试框架
*   [Codeception](http://codeception.com) - 一个试图兼具可读性和技术性的框架

以上所有内容都有出色的文档，可让您轻松考虑使用单元测试。我建议您从阅读 PHPUnit 开始，然后看看 Behat 或 Codeception 可以为您提供什么。

* * *

作为一般建议：测试您的代码是否*行为正确*。不要测试“什么是做什么”，测试你做某事时是否得到你期望的*结果。*例如，不要测试`isset($_POST['submit'])`. 这太详细了，用测试覆盖应用程序的每一行是没有意义的。相反，测试更大的代码单元。测试当您提交具有已知给定值的表单时，您的代码正确地将您重定向到下一页。或者测试您的身份验证系统是否正确拒绝非特权用户的访问。您希望测试如下所示：

```
Scenario: Login
  Given I am on the login page
  When I log in as user "Jon" with the password "foo"
  Then I should be logged in 
```

或者：

```
Scenario: Deny unprivileged user
  Given I am logged in as the user "Jon" with access level 1
  When I try to access the action "restricted"
  Then I should be denied access 
```

不是：

```
Scenario: Login
  Given I submit a form with the values "Jon" as username and "foo" as password
  When I check the $_POST array I should see "Jon" in the key "name" and ...
  ... 
```

顺便说一句，以上内容实际上可以是 Behat 中的测试。

* * *

为了确保您编写的这些测试确实有价值，您需要定期*运行它们。*也许您在版本控制系统中创建了一个触发器，以便在签入代码时自动运行您的测试套件，并拒绝未通过测试的签入。最好的是如果你有一个*[持续集成](http://en.wikipedia.org/wiki/Continuous_Integration)服务器*设置它定期从您的存储库中获取最新代码并在其上运行测试。如果您设置得当，您将自动收到有关在常规开发过程中容易被忽略的各种边缘问题的通知。例如，CI 服务器应该每次都尝试从头开始设置和运行应用程序，并且可能会提醒您从您所依赖的第三方获取依赖项时出现问题，或者您的数据库迁移脚本中存在问题。否则您不会注意到的事情，因为您并不总是获取依赖项并且并不总是重新运行您的迁移脚本。

最后，您的目标是从所有可能的角度持续自动“执行”您的代码。这是找到问题的唯一方法。

对于 CI 软件，我个人非常喜欢[TeamCity](http://www.jetbrains.com/teamcity/)，但[Jenkins](http://jenkins-ci.org)和[Hudson](http://hudson-ci.org)非常受欢迎，还有很多[其他 CI 工具](http://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:54:53.717

根据维基百科：

> 在计算机编程中，单元测试是一种方法，通过该方法，源代码的各个单元、一个或多个计算机程序模块的集合以及相关的控制数据、使用程序和操作程序，被测试以确定它们是否适合使用。

我猜这你正在做的可以称为单元测试。

UnitTest 的最佳方式是使用[众所周知的框架](https://www.google.co.uk/search?q=php%20unit%20test%20framewok&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)。PHP的很少。我猜最流行的是[PHPUnit](http://www.phpunit.de/manual/current/en/)。Appart 通过测试它会做其他很酷的事情，比如代码覆盖率报告（我相信其他框架也会这样做）。

我在 Eclipse 上工作，并且我的 IDE 集成了 PHPUnit。在开发过程中，我不必在窗口之间切换。我只是运行一个测试，看看我的代码是否有效。它节省了大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:52:52.720

听起来您应该检查一下[simpletest](http://www.simpletest.org/en/first_test_tutorial.html)。

# java - SWT：如何右对齐工具栏中的项目

> ID：15132257
> 
> 赞同：2
> 
> 时间：2013-02-28T09:47:07.217
> 
> 标签：java, swt, jface

在纯 SWT/JFace 应用程序中，我需要将工具栏项向右对齐。在创建工具栏时，我首先尝试使用 SWT.RIGHT 样式，但项目仍然左对齐。经过一番调查，我发现 SWT.RIGHT 用于对齐项目内的文本，而不是用于对齐工具栏上的项目。

任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:47:07.217

可以通过显式更改其布局来右对齐工具栏中的项目：

```
GridDataFactory.fillDefaults().align(SWT.END, SWT.CENTER).grab(true, false).applyTo(toolBar); 
```

来源：[http ://codifyit.blogspot.com/2010/04/eclipse-tips-part-2.html](http://codifyit.blogspot.com/2010/04/eclipse-tips-part-2.html)

# c# - 通过 datagridview 实时更新 MDB 数据库

> ID：15132260
> 
> 赞同：0
> 
> 时间：2013-02-28T09:47:12.790
> 
> 标签：c#, ms-access, datagridview, real-time-updates

我目前正在尝试创建一个小程序，该程序从显示在 datagridview 中的 MDB 数据库中获取数据。该程序应允许用户修改（添加、更新、删除）datagridview 中的数据。此外，所有内容都应自动更新到 MDB（无按钮）。我知道有很多关于这个主题的话题，但是由于某种原因，我无法重现相同的结果。

我能够从 MDB 文件中检索数据并将其显示在 datagridview 中，但我无法添加、修改或删除数据。该程序不断向我抛出异常，但我不明白为什么。

首先，用户必须创建一个数据库。数据库由代码自动生成。

```
private void CreateNewDatabase_Click(object sender, EventArgs e)
{
    string DB_FILENAME = "c:\Test.mdb";

    // GENERATE THE ACCESS FILES, ITS TABLES AND ITS COLUMNS

    var cnnStr = "Provider=Microsoft.Jet.OLEDB.4.0.;Data Source=" + DB_FILENAME; //Use a late bound COM object to create a new catalog. This is so we avoid an interop assembly
    var catType = Type.GetTypeFromProgID("ADOX.Catalog");
    object o = Activator.CreateInstance(catType);
    catType.InvokeMember("Create", System.Reflection.BindingFlags.InvokeMethod, null, o, new object[] { cnnStr });
    OleDbConnection cnn = new OleDbConnection(cnnStr);
    cnn.Open();
    var cmd = cnn.CreateCommand();

    // CREATE SCHEDULE TABLE
    cmd.CommandText = "CREATE TABLE SCHEDULE ([ID] IDENTITY PRIMARY KEY, [Day] TEXT, [Month] TEXT, [Year] TEXT, [IMS] TEXT, [Customer] TEXT, [Short Description] TEXT, [Long Description] TEXT, [Delivery Ticket Number] TEXT, [Returned] TEXT)";
    cmd.ExecuteNonQuery();

    cmd.CommandText = "INSERT INTO SCHEDULE ([ID]) VALUES (1)";
    cmd.ExecuteNonQuery();

    // DISPOSE OF THE VARIABLES USED
    cnn.Close();
    cnn.Dispose();
    cmd.Dispose();

} 
```

一旦创建了数据库，它将在带有 datagridview 的 windows 窗体中使用。

```
public void Initialize()
{

    Con = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + sttngs.DBloc);
    Con.Open();

    // TRY TO OPEN THE DATABASE FILE AND POPULATE THE DATAGRIDVIEW
    da = new OleDbDataAdapter("SELECT [Day], [Month], [Year], [IMS], [Customer], [Short Description], [Long Description], [Delivery Ticket Number], [Returned] FROM SCHEDULE",Con); // WHERE [Returned] = '" + "NO' ", Con);

    // POPULATE cBuilder
    cBuilder = new OleDbCommandBuilder(da);
    ScheduleData = new DataTable();
    da.Fill(ScheduleData);

    if (ScheduleData.Rows.Count > 0)
    {
       BindingSource BDS = new BindingSource();
       BDS.DataSource = ScheduleData;
       this.dataGridView.DataSource = BDS;        
    }
} 
```

一旦 datagridview 中的数据发生更改（由 CellValidating 事件处理），则应在 MDB 中更新数据。

```
 private void dataGridView_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
 {
     if (ScheduleData.GetChanges() != null)
     {
        dataGridView.EndEdit();
        da.Update(ScheduleData);
        ScheduleData.AcceptChanges();
     }
 } 
```

代码非常简单，但由于某种原因，我无法弄清楚为什么 MDB 中的数据没有更新。我已经被困了一段时间，所以任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:12:01.330

我可以看到会导致问题的一件事是，当您设置命令构建器时，您没有请求相关的 UPDATE、DELETE 和 INSERT 命令。

当您像这样生成命令生成器时：-

```
cBuilder = new OleDbCommandBuilder(da); 
```

跟进：-

```
cBuilder.GetUpdateCommand();
cBuilder.GetInsertCommand();
cBuilder.GetDeleteCommand(); 
```

您可能需要在 Cell Validating 中声明所有这些，我不确定。试试看。

查看这篇 MSDN 文章，它适用于 SQLcommamdbuilder，但适用相同的规则：-

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)

此外，当您尝试更新数据适配器时，您没有打开连接：-

```
if (ScheduleData.GetChanges() != null)
     {
        dataGridView.EndEdit();

        //Open a connection Here
        da.Update(ScheduleData);

        ScheduleData.AcceptChanges();
     } 
```

您的 SQL 字符串不正确，请尝试：-

```
"SELECT (Day, Month, Year, IMS, Customer, Short Description, Long Description, Delivery Ticket Number, Returned) FROM [SCHEDULE]" 
```

# java - 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 3090 >= 3090 at java.util.Vector.elementAt

> ID：15132268
> 
> 赞同：0
> 
> 时间：2013-02-28T09:47:29.810
> 
> 标签：java, arrays, libsvm

我明白了

```
exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3090 >= 3090
    at java.util.Vector.elementAt(Vector.java:470) 
```

当我在下面运行一段代码时。欢迎任何帮助。

```
prob = new svm_problem();
prob.l = vy.size();
prob.x = new svm_node[prob.l][];
for(int i=0;i<prob.l;i++)
    prob.x[i] = vx.elementAt(i);
prob.y = new double[prob.l];
for(int i=0;i<prob.l;i++)
    prob.y[i] = vy.elementAt(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:49:43.290

`vy.size()`用于确定循环的边界，然后访问`vx`和`vy`。看起来`vx`比 短`vy`，导致显示的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:51:39.570

`prob.l`是 的大小`vy`，您还需要找到 的大小`vx`。

```
for(int i=0;i<vx.size();i++)
    prob.x[i] = vx.elementAt(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:52:20.253

您在 vx 上从 0 循环到 prob.l-1，但 prob.l 是基于 vy 的大小，这似乎更大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:50:53.693

当它从 0 迭代`i`到. 如果大于这将导致类似于您所拥有的异常。`vx``vy.size() - 1``vy``vx`

# ios - 如何在不触摸的情况下更改按钮的图像

> ID：15132271
> 
> 赞同：0
> 
> 时间：2013-02-28T09:47:34.060
> 
> 标签：ios, objective-c, xcode, uibutton, uiimage

当我以编程方式创建按钮时，我正在尝试更改按钮的图像

```
//Create a Buttonfav
UIImage *imagefavNormal   = [UIImage imageNamed:@"favtop_unselect_icon2.png"];

btnFav = [UIButton buttonWithType:UIButtonTypeCustom];
[btnFav showsTouchWhenHighlighted];
btnFav.adjustsImageWhenHighlighted = YES;
[btnFav setAdjustsImageWhenDisabled:YES];
[btnFav setHighlighted:YES];

btnFav.bounds = CGRectMake( 0, 0, imagefavNormal.size.width, imagefavNormal.size.height );

btnFav.userInteractionEnabled = NO;

[btnFav setImage:imagefavNormal forState:UIControlStateNormal];
[btnFav addTarget:self action:@selector(btnFavPressed:) forControlEvents:UIControlEventTouchUpInside];

//Create UIBarButtonItem = barButtonfav
barButtonfav = [[UIBarButtonItem alloc] initWithCustomView:(UIButton*)btnFav]; 
```

现在我正在尝试用方法更改按钮图像

```
 -(void) toggleFavoriteButtonState:(BOOL) isEnable {

    UIImage *imagefavNormal   = [UIImage imageNamed:@"favtop_unselect_icon2.png"];
    UIImage *imagefavSelected = [UIImage imageNamed:@"favtop_select_icon2.png"];

    if (isEnable) {
        [btnFav setImage:imagefavSelected forState:UIControlStateNormal];
    }
    else {
        [btnFav setImage:imagefavNormal forState:UIControlStateNormal];;
    }
} 
```

当我没有触摸按钮时，它不工作。它会更改图像但不会突出显示图像。

我在这段代码中犯了什么错误？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:04:06.840

尝试使用`UIControlStateDisabled`按钮状态。

```
UIImage *imagefavNormal   = [UIImage imageNamed:@"favtop_unselect_icon2.png"];
UIImage *imagefavSelected = [UIImage imageNamed:@"favtop_select_icon2.png"];
[btnFav setImage:imagefavSelected forState:UIControlStateDisabled]
[btnFav setImage:imagefavNormal forState:UIControlStateNormal]; 
```

可能对您的要求有所帮助。谢谢。

# c# - 如何解决 Berkeley DB 批量插入模式下的内存泄漏？

> ID：15132274
> 
> 赞同：-1
> 
> 时间：2013-02-28T09:47:39.763
> 
> 标签：c#, berkeley-db

我正在使用 Berkeley DB v5.3.21 将大量数据（100K 记录）插入 BDB 队列。

当我开始使用批量插入模式时，也就是 using `MultipleDatabaseEntry`，它似乎会导致非托管内存部分的内存泄漏。

*   我该如何解决这个问题？
*   有没有人偶然发现过 BDB 的此类问题？

附言

作为替代解决方案，我想只使用 .Net`FileStream`将我的数据写入文件，因为植入将包括：

*   一位顺序作家。
*   多个随机存取阅读器。
*   固定数据输入大小。

您认为实现起来应该足够简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:34:22.743

我建议您将问题发布到 Oracle Berkeley DB 论坛。 [https://forums.oracle.com/forums/forum.jspa?forumID=271](https://forums.oracle.com/forums/forum.jspa?forumID=271)

# objective-c - iOS UITextField 中的密码验证

> ID：15132276
> 
> 赞同：15
> 
> 时间：2013-02-28T09:47:43.737
> 
> 标签：objective-c, validation, ios5, passwords, uitextfield

我的 iPhone 应用程序中有 1 个`UITextfield`密码。

我想通过以下验证来验证这个文本字段。

*   必须至少为 10 个字符
*   必须至少包含一个小写字母、一个大写字母、一个数字和一个特殊字符
*   有效的特殊字符是 –`@#$%^&+=^.*(?=.{10,})(?=.*d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$`

我该如何限制`UITextField`上述要求？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-01T12:57:02.710

我就是这样做的。当用户输入密码而不是介于两者之间时，应在最后完成验证。我不会使用`NSRegularExpression`.

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
   int numberofCharacters = 0;
   BOOL lowerCaseLetter,upperCaseLetter,digit,specialCharacter = 0;
   if([textField.text length] >= 10)
   {
      for (int i = 0; i < [textfield.text length]; i++) 
      {
         unichar c = [textfield.text characterAtIndex:i];
         if(!lowerCaseLetter)
         {
           lowerCaseLetter = [[NSCharacterSet lowercaseLetterCharacterSet] characterIsMember:c];
         }
         if(!upperCaseLetter)
         {
           upperCaseLetter = [[NSCharacterSet uppercaseLetterCharacterSet] characterIsMember:c];
         }
         if(!digit)
         {
            digit = [[NSCharacterSet decimalDigitCharacterSet] characterIsMember:c];
         }
         if(!specialCharacter)
         {
            specialCharacter = [[NSCharacterSet symbolCharacterSet] characterIsMember:c];
         }
      }

      if(specialCharacter && digit && lowerCaseLetter && upperCaseLetter)
      {
         //do what u want
      }
      else
      { 
         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Please Ensure that you have at least one lower case letter, one upper case letter, one digit and one special character"
                                                       delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
      }

   }
   else
   {
      UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Please Enter at least 10 password"
                                                       delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
   }
} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-09T12:35:48.677

您也可以使用`Regex`. 以下是我为您提供的几个示例：

```
// *** Validation for Password ***

    // "^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$" --> (Minimum 8 characters at least 1 Alphabet and 1 Number)
    // "^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,16}$" --> (Minimum 8 and Maximum 16 characters at least 1 Alphabet, 1 Number and 1 Special Character)
    // "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$" --> (Minimum 8 characters at least 1 Uppercase Alphabet, 1 Lowercase Alphabet and 1 Number)
    // "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&]{8,}" --> (Minimum 8 characters at least 1 Uppercase Alphabet, 1 Lowercase Alphabet, 1 Number and 1 Special Character)
    // "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&]{8,10}" --> (Minimum 8 and Maximum 10 characters at least 1 Uppercase Alphabet, 1 Lowercase Alphabet, 1 Number and 1 Special Character) 
```

***列表中的第四个****是您的情况，以下代码片段显示了如何使用它：*

```
-(BOOL)isValidPassword:(NSString *)passwordString
{
    NSString *stricterFilterString = @"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&]{10,}";
    NSPredicate *passwordTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", stricterFilterString];
    return [passwordTest evaluateWithObject:passwordString];
} 
```

*使用方法：*

```
if(![self isValidPassword:txtPassword.text]) {
    /* Show alert: "Password must be minimum 10 characters,
       at least 1 Uppercase Alphabet, 1 Lowercase Alphabet, 
       1 Number and 1 Special Character" */
}
else {
    // Password is valid
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-10T11:08:48.287

**条件**：密码至少应包含 8 个字符，1 个大写字母和 1 个数字

**Swift 3 中的解决方案**

你可以这样写**字符串扩展**，

```
extension String {
    func isValidPassword() -> Bool {
        let regularExpression = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&]{8,}"
        let passwordValidation = NSPredicate.init(format: "SELF MATCHES %@", regularExpression)

        return passwordValidation.evaluate(with: self)
    }
}

//Example 1

var password = "@Abcdef011" //string from UITextField (Password)
password.isValidPassword() // -> true

//Example 2

var password = "Abcdef011" //string from UITextField 
password.isValidPassword() // -> false 
```

或者你可以这样写函数，

```
func validate(password: String) -> Bool
{
    let regularExpression = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&]{8,}"

    let passwordValidation = NSPredicate.init(format: "SELF MATCHES %@", regularExpression)

    return passwordValidation.evaluate(with: password)
} 
```

这会给你同样的结果。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-05-30T23:49:58.880

**斯威夫特 3**

检查密码是否强？

1.  长度大于或等于 8
2.  小写
3.  大写
4.  十进制数字
5.  !@#$%^&*()_-+ 等特殊字符是可选的

    **为什么我不使用正则表达式？**

    **因为在正则表达式语法中很难支持保留字符。**

* * *

```
 func isValidated(_ password: String) -> Bool {
     var lowerCaseLetter: Bool = false
     var upperCaseLetter: Bool = false
     var digit: Bool = false
     var specialCharacter: Bool = false

     if password.characters.count  >= 8 {
         for char in password.unicodeScalars {
             if !lowerCaseLetter {
                 lowerCaseLetter = CharacterSet.lowercaseLetters.contains(char)
             }
             if !upperCaseLetter {
                 upperCaseLetter = CharacterSet.uppercaseLetters.contains(char)
             }
             if !digit {
                 digit = CharacterSet.decimalDigits.contains(char)
             }
             if !specialCharacter {
                 specialCharacter = CharacterSet.punctuationCharacters.contains(char)
             }
         }
         if specialCharacter || (digit && lowerCaseLetter && upperCaseLetter) {
             //do what u want
             return true
         }
         else {
             return false
         }
     }
     return false
 }
 let isVaildPass:Bool = isValidated("Test**00+-")
 print(isVaildPass) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-12T06:26:15.337

您可以使用以下函数验证您的密码验证，只需传递一个密码字符串，这将返回您的 BOOL 值。

```
-(BOOL) isPasswordValid:(NSString *)pwd {

    NSCharacterSet *upperCaseChars = [NSCharacterSet characterSetWithCharactersInString:@"ABCDEFGHIJKLKMNOPQRSTUVWXYZ"];
    NSCharacterSet *lowerCaseChars = [NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyz"];

    //NSCharacterSet *numbers = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];

    if ( [pwd length]<6 || [pwd length]>20 )
        return NO;  // too long or too short
    NSRange rang;
    rang = [pwd rangeOfCharacterFromSet:[NSCharacterSet letterCharacterSet]];
    if ( !rang.length )
        return NO;  // no letter
    rang = [pwd rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]];
    if ( !rang.length )
        return NO;  // no number;
    rang = [pwd rangeOfCharacterFromSet:upperCaseChars];
     if ( !rang.length )
         return NO;  // no uppercase letter;
    rang = [pwd rangeOfCharacterFromSet:lowerCaseChars];
    if ( !rang.length )
        return NO;  // no lowerCase Chars;
    return YES;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-28T11:29:38.037

对我来说最好的方法是使用`NSPredicate`和正则表达式。这是您的情况的正则表达式：`^(?=.{10,})(?=.*[0-9])(?=.*[a-zA-Z])([@#$%^&=a-zA-Z0-9_-]+)$`

[![在 debuggex.com 上创建的图像](../Images/5393e698ab482b3f8ef262adbcf6488f.png)](https://i.stack.imgur.com/GRUdK.png)

目标C代码：

```
NSString *regex = @"^(?=.{10,})(?=.*[0-9])(?=.*[a-zA-Z])([@#$%^&=a-zA-Z0-9_-]+)$";

NSPredicate *passwordTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];

BOOL isValid = [passwordTest evaluateWithObject:yourTextfield.text]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-28T09:57:14.283

使用正则表达式（NSRegularExpression 类有关于如何编写模式本身的文档），然后：

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    //delete
    if (string.length == 0) {
        return YES;
    }

    if (self.regEx) {
        NSMutableString* check = [NSMutableString stringWithString:theTextField.text];
        [check replaceCharactersInRange:range withString:string];
        NSTextCheckingResult* match = [self.regEx firstMatchInString:check options:0 range:NSMakeRange(0, [check length])];
        if (match.range.length != check.length) {
            return NO;
        }
    }
} 
```

**警告：以这种方式限制输入确实会让用户感到困惑。您键入并键入，您键入的字符不会出现！**

我可能会在测试字段旁边使用一个小红色（！），但我总是允许输入本身！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-04-14T10:29:40.420

我有这个优雅的表单解决方案（比如注册），你有很多验证

我在我的自定义 UITextField 中有插座：

```
@IBInspectable var regexpValidation: String? = nil 
```

在情节提要中，我可以通过属性检查器访问它并像这样放置正则表达式字符串（用于电子邮件）：

`[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?`

然后在我的子类中我有这个计算变量：

@IBInspectable var regexpValidation：字符串？= nil // 可选，在 InterfaceBuilder 中设置

```
var inputIsValid: Bool {
    get {
        if let expr = regexpValidation {
           return (text.rangeOfString(expr, options: NSStringCompareOptions.RegularExpressionSearch, range: nil, locale: nil) != nil)
        } else {
            return true
        }

    }
} 
```

可以这样使用：

```
 override func resignFirstResponder() -> Bool {
        if (inputIsValid) {
            return super.resignFirstResponder()
        }
        else {
            text = ""
            return false
        }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-28T09:54:15.720

您需要在此委托方法中编写验证代码`UITextField`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

您可能想要参考实施的几个链接

[如何在 iOS sdk 中使用正则表达式](https://stackoverflow.com/questions/11206144/how-to-use-regular-expression-in-ios-sdk)

[iOS 文本字段验证](https://stackoverflow.com/questions/7665323/ios-textfield-validation)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-28T09:58:19.787

使用允许您验证 NSTextField 值的协议`control:isValidObject:`方法。`NSTextFieldDelegate`假设您已经正确配置了所有界面构建器，您可能会执行以下操作：

```
@interface PreferencesController : NSWindowController <NSTextFieldDelegate> {
    IBOutlet NSTextField *username, *password;
}

@end

@implementation PreferencesController

- (BOOL)control:(NSControl *)control isValidObject:(id)object
{
    if (control == password) {
      // Perform validation and return YES or NO
    }

    return YES;
}

@end 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-22T08:09:18.287

SWIFT 5 使用 RXSWIFT，一种更好、更简洁、反应灵敏的方法。

验证密码功能将是这样的，显然您可以根据需要添加任意数量的条件。

```
 func validatePassword(password: String) -> (Bool, String) {
  //Minimum 8 characters at least 1 Alphabet and 1 Number:
var tuple: (Bool, String) = (true, "")
var string = "Requires atleast"

if(password.rangeOfCharacter(from: CharacterSet.letters) == nil){
    string = "uppercase"
    tuple = (false, string)

}
if(password.rangeOfCharacter(from: CharacterSet.decimalDigits) == nil){
    string += ", number"
       tuple = (false, string)

   }
if(password.count < 8 ){
    string += ", 8 chars"
       tuple = (false, string)

   }
return tuple }

 func isPasswordValid(in string: String) -> Observable<(Bool, String)> {
    return Observable.create { observer -> Disposable in

        let tuple = self.validation.validatePasswordForSymbol(password: string)

        observer.onNext(tuple)

        return Disposables.create()
    }
} 
```

您可以根据您的架构在 viewModel 或 VC 中使用上述功能。然后在您的 VC 中调用如下所示的相同函数。

```
passwordTextField.rx.text
            .orEmpty //1
            .filter { $0.count >= 1 } //2
            .flatMap { self.isPasswordValid(in: $0) }
            .subscribe(onNext: { result in
                print("Valid password", result)
                //update UI here 
                // result will be like (false, "Requires atleast, 8 chars, number")
            }).disposed(by: disposeBag) 
```

# android - 安卓活动版

> ID：15132277
> 
> 赞同：1
> 
> 时间：2013-02-28T09:47:47.143
> 
> 标签：android, android-activity, sdk, version

我有一个支持 android 2.3.3 的 android 项目。

但它也支持 sdk 版本 17。当我创建一个新活动时，它会创建一个特定于版本 17 的活动。

如何进行适用于 SDK 10 和 17 的正确活动？

我已经添加了以下内容：

```
<uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:51:15.463

您应该指定 minSdk 版本为 10 和 targetSdk 为 17。这意味着您的代码将在 sdk 版本 17 下编译，以防止某些代码反射

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" /> 
```

您的问题与 API 依赖无关。这是关于造型。如果你想让你的活动在 2.1 以后的每个 android 版本上看起来都一样，你应该使用 HoloEverywhere 库 [https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:50:28.750

实际上，您只需要添加`<uses-sdk android:minSdkVersion="10" />`清单文件即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:50:33.780

在您的清单中设置`minSdkVersion`and`targetSdkVersion`相应地。据我所知，您可以为整个应用程序设置此设置，而不是为单个活动设置。

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:51:03.123

当您创建新项目时，您设置了最小和最大 SDK 版本。您的应用程序将在最小到最大版本上完美运行。您可以设置目标版本并在之后更改它。此目标版本表示您的测试设备版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:21:29.423

在您的代码中，您是否使用了平台 10 不支持但 17 支持的某些 api 或方法？你有没有用过这种代码`@SuppressWarnings("deprecation") @SuppressWarnings("unused")`

# oracle - Zend DbTable 不区分大小写

> ID：15132278
> 
> 赞同：0
> 
> 时间：2013-02-28T09:47:46.937
> 
> 标签：oracle, zend-framework, zend-db, zend-auth

我的 webapp 有一个登录系统，使用 Zend auth 适配器运行良好，但问题是我希望用户登录时电子邮件不区分大小写。我使用 Oracle 作为后端数据库，通常我会使用该`LOWER(EMAIL)=LOWER(:email)`方法. 我试图在 setIdentityColumn() 中传递该 Oracle 函数，但出现错误：

> 提供给 Zend_Auth_Adapter_DbTable 的参数未能生成有效的 sql 语句，请检查表名和列名的有效性。

```
protected function _getAuthAdapter()
{
    //$dbAdapter = Zend_Db_Table::getDefaultAdapter();
    $db = Zend_Registry::get('db');
    $authAdapter = new Zend_Auth_Adapter_DbTable($db);
    $authAdapter->setTableName('USER_TABLE')
        ->setIdentityColumn('LOWER(EMAIL)') //Tried to pass LOWER()
        ->setCredentialColumn('ENCODED_PW')
        ->setCredentialColumn('PASSWORD');
    return $authAdapter;
} 
```

错误来自类`_authenticateCreateSelect()`中的函数`Zend_Auth_Adapter_DbTable`。问题是脚本的这一部分：

```
$dbSelect->from($this->_tableName, array('*', $credentialExpression))
             ->where($this->_zendDb->quoteIdentifier($this->_identityColumn, true) . '   = ?', $this->_identity); 
```

该`quoteIdentifier()`方法类似于 PHP `quote()`，并且正在转换如下查询：

> 从 LOWER(:email) 中选择 *

进入这个：

> 从“LOWER（：电子邮件）”中选择 *

有人看到解决方法吗？

亲切的问候内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:54:14.263

尝试这样的事情：

```
$authAdapter->setTableName('USER_TABLE')
            ->setIdentityColumn(new Zend_Db_Expr('LOWER(USERID)'))
             ->setCredentialColumn('PASSWORD'); 
```

问题是如果你将'LOWER(USERID)' 作为一个简单的字符串传递，Zend 会在它周围加上引号，导致它创建一个无效的查询。使用 Zend_Db_Expr 将阻止 Zend 这样做。

# java - 可嵌入 Datanucleus

> ID：15132282
> 
> 赞同：1
> 
> 时间：2013-02-28T09:48:06.203
> 
> 标签：java, jpa, datanucleus

我有以下模型类：

```
@Entity
public class A {
    private B b;
}

@Embeddable
public class B {
    ...
} 
```

我正在使用 Spring MVC，控制器使用 @Transactional 注释，并且我指定了以下数据核属性（以及其他属性）

```
datanucleus.detachAllOnCommit=true
datanucleus.detachAllOnClose=true
datanucleus.detachState=all
datanucleus.copyOnAttach=true
datanucleus.attachSameDatastore=true
datanucleus.maxFetchDepth=2 
```

在视图（JSP）中，当事务应该结束并且对象分离时，如果我尝试访问`${a.b.whatever}`我会收到此错误

```
javax.jdo.JDODetachedFieldAccessException: You have just attempted to access field "b" yet this field was not detached when you detached the object. Either dont access this field, or detach it when detaching the object.
A.jdoGetb(A.java)
A.getB(A.java)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
javax.el.BeanELResolver.getValue(BeanELResolver.java:62)
javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
org.apache.el.parser.AstValue.getValue(AstValue.java:123)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:935) 
```

...

我将 DataNucleus 3.1.3 与 MySQL 一起使用。

知道为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:08:56.137

添加

```
 @Basic(fetch=FetchType.EAGER) 
```

前

```
private B b; 
```

这将使 B 急切地取出并使其可正确拆卸。

您可以尝试使用提取组来指定何时提取什么。

# installshield - InstallShield - 将配置添加到文件

> ID：15132287
> 
> 赞同：0
> 
> 时间：2013-02-28T09:48:27.307
> 
> 标签：installshield

我正在使用 InstallShield 构建安装项目。安装文件将执行以下任务：

*   将我的应用程序安装到机器上。
*   查找基于通用字符串的文件夹（例如：MySecondApp），因为每台机器可能有不同的文件夹名称：
    *   笔记本电脑1：C:\Program Files\WindowsApp\MySecondApp_1.2.3.4_asdfsjhewrnewj
    *   桌面 2：C:\Program Files\WindowsApp\MySecondApp_1.2.3.5_asdfsjhewrnewj
*   在这个文件夹中，我有一个名为“myconfig.cfg”的配置文件。我的设置文件将通过添加一些新配置来修改此文件。

你能告诉我如何使用 InstalledShield 来做到这一点吗？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:52:39.007

我通过编写 C# 库并在 InstallShield 中使用它来搜索和修改我的配置文件解决了这个问题。

# python - 在 Python Flask 和大多数其他语言中避免使用幻数

> ID：15132293
> 
> 赞同：1
> 
> 时间：2013-02-28T09:48:49.620
> 
> 标签：python, database-design, python-2.7, refactoring

我正在为我的应用程序定义模型，并且我需要一个名为“状态”的列来进行各种验证程序。这是一个简化的用户模型。

```
类用户
    编号（整数）
    名称（字符串）
    status(int) # 0-新建 1-活动 2-不活动 3-报告 4-删除

```

我请一位 Python 开发人员检查我的代码；他建议我避免使用“幻数”。他的解决方案是这样的：

```
班级选择：
    @classmethod
    def get_value(cls, key):
        # 如果需要显示则获取字符串显示
        对于 cls.CHOICES 中的 k、v：
            如果 k == 键：
                返回 v
        返回 ””

类用户状态选择（选择）：
    新 = 0
    活跃 = 1
    非活动 = 2
    报告 = 3
    已删除 = 4

    选择 = (
        （新，“新”），
        （活动，“活动”），
        （不活跃，“不活跃”），
        （报告，“报告”），
        （已删除，“已删除”），
    )

```

我不能用简单的字典来代替吗？有没有人看到'class'y解决方案的充分理由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:04:42.790

基于[Python Enum 类构建（使用 tostring fromstring）](https://stackoverflow.com/questions/4472901/python-enum-class-with-tostring-fromstring/4472993#4472993)

```
class Enum(object):
    @classmethod
    def tostring(cls, val):
        for k,v in vars(cls).iteritems():
            if v==val:
                return k

    @classmethod
    def fromstring(cls, str):
        return getattr(cls, str.upper(), None)

    @classmethod
    def build(cls, str):
        for val, name in enumerate(str.split()):
            setattr(cls, name, val)
class MyEnum(Enum):
    VAL1, VAL2, VAL3 = range(3)

class YourEnum(Enum):
    CAR, BOAT, TRUCK = range(3)

class MoreEnum(Enum):
    pass

print MyEnum.fromstring('Val1')
print MyEnum.tostring(2)
print MyEnum.VAL1 

print YourEnum.BOAT
print YourEnum.fromstring('TRUCK')

# Dodgy semantics for creating enums.
# Should really be
# MoreEnum = Enum.build("CIRCLE SQUARE")
MoreEnum.build("CIRCLE SQUARE")
print MoreEnum.CIRCLE
print MoreEnum.tostring(1)
print MoreEnum.tostring(MoreEnum.CIRCLE) 
```

**编辑**添加了构建类方法，以便可以使用字符串来构建枚举。

尽管那里可能有更好的解决方案。

# memory-management - DLL 仅部分加载

> ID：15132296
> 
> 赞同：0
> 
> 时间：2013-02-28T09:48:52.053
> 
> 标签：memory-management, dll, citrix

我的应用程序包含一些关于 DLL 的特定逻辑（这里解释有点复杂）。但在这种逻辑中，我注意到以下内容（在客户的 Citrix 终端服务器上）：

在 NTDLL.DLL 上调用 GetModuleInformation 时，返回的 MODULEINFO 返回 0x7d600000 的第一个地址 (lpBaseOfDll) 和 0xf0000 的大小（因此它的最后一个字节应该在 0x7d6effff）。

但是，在故障转储文件中，我在 WinDbg 中看到以下内容（使用！address）：

```
* 7d600000 7d601000     1000   Image "J:\WINDOWS\system32\ntdll.dll"
* 7d610000 7d65f000    4f000   <unclassified> 
* 7d65f000 7d660000     1000   <unclassified> 
* 7d660000 7d699000    39000   <unclassified> 
* 7d6a0000 7d6a6000     6000   <unclassified> 
* 7d6b0000 7d6df000    2f000   <unclassified> 
* 7d6e0000 7d6e4000     4000   <unclassified> 
* 7d800000 7d801000     1000   Image "J:\WINDOWS\SysWOW64\gdi32.dll"
* 7d810000 7d855000    45000   <unclassified> 
* 7d860000 7d861000     1000   <unclassified> 
* 7d861000 7d862000     1000   <unclassified> 
* 7d870000 7d871000     1000   <unclassified> 
* 7d880000 7d882000     2000   <unclassified> 
```

所以看起来 NTDLL.DLL 的大小只有 0x1000 而不是 0xf0000。

这就解释了为什么对超过 0x1000 大小的 VirtualLock 的调用会失败（错误代码 998：对内存位置的访问无效）并且访问内存会使应用程序崩溃。

我在哪里可以找到解释为什么 DLL 仅部分加载？Citrix 是否将 DLL 替换为存根，但未通过 GetModuleInformation 正确报告？还是发生了其他事情？

为什么 NTDLL.DLL 是从 J:\WINDOWS\SYSTEM32 加载的，而大多数其他 DLL 是从 J:\WINDOWS\SYSWOW64 加载的？（这可能表明确实使用了一些 32/64 存根）。

这是我第一次遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:49:20.703

Citrix 不会存根 DLL，但它确实对各种 DLL 进行了大量挂钩。这将是我对您所看到的问题的最佳猜测。以下文章描述了挂钩以及如何禁用它：

[http://support.citrix.com/article/CTX107824](http://support.citrix.com/article/CTX107824)

[http://support.citrix.com/article/CTX107825](http://support.citrix.com/article/CTX107825)

尝试为您的应用程序禁用挂钩，看看这些问题是否会消失。

# java - 监控页面的变化？

> ID：15132298
> 
> 赞同：3
> 
> 时间：2013-02-28T09:49:02.180
> 
> 标签：java, web-crawler

好吧，我被要求监视大约 10-20 个站点的任何更改。
我一直在尝试获取这些站点的标题信息并使用此方法检查它们的最后更新时间。

```
url = new URL( "http://www.wikipedia.org/" );
HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection();
System.out.println( "Connection established" );
httpConnection.setRequestMethod( "HEAD" );
httpConnection.connect();
long lastModified = httpConnection.getLastModified();
if( lastModified != 0 ) {
    System.out.println( new Date( lastModified ) );
} else {
    System.out.println( "Last-Modified not returned" );
}
httpConnection.disconnect();` 
```

但是这种方法的问题是一些站点（很多）没有放置完整的标题信息。我还想知道这是向服务器发出头部请求的正确方法还是我错过了什么？？？

还有其他方法可以监控网站吗？
我一直在将整个站点转换为 md5 值，然后监视站点，但是这种方法太敏感了，即使是最小的更改也会通知我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:11:58.080

如果服务器没有提供准确的最后修改标题，则由您来计算站点何时更改。您将不得不在一段时间内不断检索网页并自己检查更改。md5 总和确实对即使是最小的变化也很敏感——也许你可以找出一个对变化不太敏感的替代方案。也许该网站使用 HTML 表格来显示投标发布，您可以计算表格的行数。

也许您可以做一些涉及右上角的“单击此处以获取有关新投标发布的通知”的操作？:)

注意：如果您正在获取完整 Web 响应的 md5 总和，则您也可能是 md5'ing 标头数据，这很可能会发生变化。或许如果你把不带header数据的html的md5总和，你可以准确的监控到页面何时发生变化。只是一个建议-如果您有报酬，我不想为您解决任务:)

附加说明：我看到您有自己的代码来请求网页 - 我觉得我必须建议您使用许多现有的[java 网络爬虫库](https://stackoverflow.com/questions/2495289/what-is-a-good-java-web-crawler-library)中的任何一个。代码可能会变得更可靠，更容易使用。

# php - PHP MySQL 更新语句不会接受除数值以外的任何内容

> ID：15132299
> 
> 赞同：2
> 
> 时间：2013-02-28T09:49:06.533
> 
> 标签：php, mysql, sql-update

我有以下 sql update 语句，并且变量正在被预先清理。信息来自表单，数据库列是 TEXT。插入工作完美无缺。

数据库结构：

file_title=文本 file_description=文本 id=INT

```
mysqli_query($con,"UPDATE images
        SET file_title=$FileTitle, file_description=$FileDescription
        WHERE id=$image_id"); 
```

由于某些未知原因，我只能使用数值进行更新，因为它不会使用任何令人沮丧的文本进行更新。

我一定只是错过了一些非常基本的东西。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:50:27.373

您需要引用文本和字符串值：

```
mysqli_query($con,"UPDATE images
        SET file_title='$FileTitle', file_description='$FileDescription'
        WHERE id=$image_id"); 
```

可以不加引号地传递数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:51:52.963

因为字符串需要用单引号括起来。单引号用于字符串文字，而反引号用于标识符，

```
UPDATE images
SET    file_title='$FileTitle', file_description='$FileDescription'
WHERE id=$image_id 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:51:34.527

对文本值使用单引号。

```
mysqli_query($con,"UPDATE images
        SET file_title='$FileTitle', file_description='$FileDescription'
        WHERE id=$image_id"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:52:55.200

CHAR 值必须被引用，但更重要的是您应该使用准备好的语句：

```
$stmt = mysqli_prepare($con,"UPDATE images
    SET file_title=?, file_description=?
    WHERE id=?");
mysqli_stmt_bind_param($stmt, 'ssd', $FileTitle, $FileDescription, $image_id);
mysqli_stmt_execute($stmt); 
```

# cxf - 从 Mule 3.2 多次调用 web 服务时出现 I/O 异常

> ID：15132300
> 
> 赞同：1
> 
> 时间：2013-02-28T09:49:08.633
> 
> 标签：cxf, mule

我正在使用 Mule ESB 3.2 调用 Web 服务。由于响应是分页的，我需要多次调用此服务并合并结果。第二次调用 wevservice 时，我在 Mule 中遇到 I/O 异常，并且在被调用的服务端看不到任何内容。我还尝试使用 SOAP UI 模拟服务，结果相同。

来自 Mule 日志的错误 (MULE_ERROR-42999)：

```
 org.apache.commons.httpclient.HttpMethodDirector: I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error 
```

这是我的骡子配置：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" 
xmlns="http://www.mulesoft.org/schema/mule/core" 
xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:core="http://www.mulesoft.org/schema/mule/core"
xmlns:spring="http://www.springframework.org/schema/beans" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
xmlns:http="http://www.mulesoft.org/schema/mule/http"
xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/xml      http://www.mulesoft.org/schema/mule/xml/3.2/mule-xml.xsd
http://www.mulesoft.org/schema/mule/core     http://www.mulesoft.org/schema/mule/core/3.2/mule.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/3.2/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.2/mule-http.xsd">

<configuration defaultResponseTimeout="30000" />

<custom-transformer class="com.mutnelat.transform.ComingEvents"
    name="ComingEvents">
    <spring:property name="eventBrandIdDefault" value="${eventBrandIdDefault}" />
    <spring:property name="fatherClassificationId" value="${fatherClassificationId}" />
</custom-transformer>

<custom-transformer class="com.mutnelat.transform.ComingEventsResponse"
    name="ComingEventsResponse" mimeType="text/plain" />

<custom-transformer class="com.mutnelat.transform.PageCount" name="PageCount"/>

<!-- Eventlist flows -->

<flow name="EventList" processingStrategy="synchronous">
    <http:inbound-endpoint address="${web.service.url}/events" exchange-pattern="request-response">
    </http:inbound-endpoint>
    <flow-ref name="GetEventsFromCRM" />
    <transformer ref="PageCount" />
    <choice>
        <when evaluator="groovy"
            expression="message.getSessionProperty('page_count') > 0">
            <logger level="INFO" message="More than one page..." />
            <flow-ref name="GetEventsFromCRM" />
        </when>
    </choice>
    <transformer ref="ComingEventsResponse" />
    <mulexml:xslt-transformer name="transform-response-fi"
        xsl-file="events.xsl" mimeType="text/xml" />
</flow>

<!-- Eventlist subflows -->

<flow name="GetEventsFromCRM" processingStrategy="synchronous">
    <transformer ref="ComingEvents" />
    <logger level="INFO" doc:name="Logger" message="Calling..." />      
    <http:outbound-endpoint host="${adapter.host}" method="GET"
        port="${adapter.port}" path="crmService" user="${adapter.username}"
        password="${adapter.password}">
        <cxf:jaxws-client operation="sendFetchXml" serviceClass="com.mutnelat.adapter.ws.CRMService" />
    </http:outbound-endpoint>
    <logger level="INFO" doc:name="Logger" message="Reveived coming events" />
</flow> 
```

# c# - 文本框中的文本消失和重新出现

> ID：15132302
> 
> 赞同：0
> 
> 时间：2013-02-28T09:49:15.150
> 
> 标签：c#, javascript, jquery, asp.net, visual-studio-2010

```
<asp:TextBox ID="TextBox2" runat="server" value="Your Text here" onfocus=" this.value = '';" onblur="if(this.value == '') ****{ this.value='?????'; }****"></asp:TextBox> 
```

当我单击文本框时，我希望文本框中的文本消失，我可以通过我使用过的 onfocus 来实现....

但是，当文本框为空时，我希望出现以前输入的值，如果它是第一次，即。如果我之前没有输入任何文本，那么应该出现默认值（“Your Text here”）。

例如：我第一次点击文本框并输入值“80”，然后我再次点击文本框，里面的值应该清除，如果我没有输入任何值并点击外面然后“80”应该显示在文本框中，而不是“您的文本”。

感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:51:38.950

如果您的浏览器支持 HTML5：

```
<input type="text" placeholder="Your Text here" /> 
```

如果你想为默认不支持的浏览器支持 placeholder 属性，这里有一个 javascript 后备：

```
$('[placeholder]').focus(function() {
   var input = $(this);
   if (input.val() == input.attr('placeholder')) {
       input.val('');
       input.removeClass('placeholder');
   }
}).blur(function() {
    var input = $(this);
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
    }
}).blur(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:02:27.573

你可以像这个例子一样。声明一个全局变量，将当前值设置为 blur 时的值，然后单击使其值为 null，如果当前输入的值为 null，则重新分配。

```
<script src="https://www.google.com/jsapi"></script>
<script>
google.load('jquery', '1.3.1');
</script>
<body>
    <input type="text" value="Your text here" id="test" onclick="clicked();" onblur="outted();">
    <script>
    var pre_value = '';
    function clicked(){ pre_value = $('#test').val(); $('#test').val('');}

    function outted(){ if($('#test').val() == '') $('#test').val(pre_value); }
    </script>
</body> 
```

希望能帮助到你

# java - 在 Java 应用程序中包含 GIT 安装

> ID：15132303
> 
> 赞同：1
> 
> 时间：2013-02-28T09:49:18.350
> 
> 标签：java, git, jar

我有一个使用 GIT 的 Java 应用程序。

我想在用户的计算机上无缝安装 GIT - mac、win 和 linux - 而不是要求他们自己安装它......

如何在 Java 应用程序中包含 GIT 安装？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:52:35.513

您可以将[JGit](http://eclipse.org/jgit/)用作 git 的独立 Java 实现，而不是使用本机实现。这将使与您的 Java 应用程序捆绑变得更加容易，并允许与 Java 更轻松地进行互操作。JGit 专为嵌入 Java 应用程序而设计。

# c# - 将 C# 连接到红砖数据库

> ID：15132304
> 
> 赞同：0
> 
> 时间：2013-02-28T09:49:20.510
> 
> 标签：c#, database, connection-string, redbrick

我读到连接到 C# Microsoft 不支持的数据库，我们可以使用 ODBC 连接。我的问题是 C# 中连接字符串的示例是什么连接到红砖数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:08:25.840

你必须下载红砖数据库的odbc驱动并安装。

然后在中添加一个DSN（数据源名称）

> 控制面板 > 管理工具 > odbc

然后设置你的连接字符串：

```
OdbcConnection odbc = new OdbcConnection("Dsn=RedBrickDSN;uid=xxx;PWD=yyy"); 
```

# xslt - XSLT Group by + 基于几个标签级别的计数

> ID：15132305
> 
> 赞同：0
> 
> 时间：2013-02-28T09:49:21.093
> 
> 标签：xslt

```
<result>
    <account id="123456">
        <missing_data missing_in="Archimede"/>
            <line_not_found db_table="PRODUCT" id="PDT">
            </line_not_found>
            <line_not_found db_table="ADRESS" id="ADR">
            </line_not_found>
        </missing_data>
        <missing_data missing_in="Cassiope">
            <line_not_found db_table="PRODUCT" id="PDT">
            </line_not_found>
            <line_not_found db_table="PRODUCT" id="PDT">
            </line_not_found>
            <line_not_found db_table="ADRESS" id="ADR">
            </line_not_found>
            <line_not_found db_table="ADRESS" id="ADR">
            </line_not_found>
            <line_not_found db_table="ADRESS" id="ADR">
            </line_not_found>
            <line_not_found db_table="ADRESS" id="ADR">
            </line_not_found>
        </missing_data>
    </account>
</result> 
```

我想对 missing_data@missing_in 和 line_not_found@id 进行分组和计数

例如，在这种情况下： 阿基米德 - PDT : 1 阿基米德 - ADR : 1 仙后座 - PDT : 2 仙后座 - ADR : 4

我不得不承认我是 XSLT 的初学者。我试图从[Xslt distinct select / Group by](https://stackoverflow.com/questions/1012321/xslt-distinct-select-group-by)中获得灵感，但问题并不完全相同，因为我的密钥是复合的，但来自多个 XML 标记。

我的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:key name="missing_data_key" match="line_not_found" use="concat(../@missing_in, ',', @id)"/>
    <xsl:template match="/">
    <xsl:for-each select="result/account">
        <xsl:value-of select="@id" />
        <xsl:for-each select="missing_data/line_not_found[
    count(
        .|key('missing_data_key', @id)[1]
        ) = 1
    ]
">
            <ul>
                <xsl:value-of select="@id"/>
    ( absent dans 
    <xsl:value-of select="../@missing_in"/>
    )
    <xsl:value-of select="' - '"/>
                <xsl:value-of select="
        count(
            key('missing_data_key', ../@missing_in)[
                count(
                  key('missing_data_key', concat(../@missing_in,',',@id))[1]
                ) = 1
            ]
        )
      "/>
            </ul>
        </xsl:for-each>
    </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

XSLT 1 在这个项目中是强制性的

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:37:54.397

因为您在 XSLT 1.0 中对元素进行分组，所以您必须使用 Muenchian Grouping 来实现您想要做的事情：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output method="text" />

    <!-- Use the following key to index all line_not_found elements
        in the document by their id -->
    <xsl:key name="line-key"
             match="missing_data/line_not_found"
             use="@id" />

    <xsl:template match="missing_data">
        <!-- Obtain information from current node before losing the
            context -->
        <xsl:variable name="id" select="generate-id()" />
        <xsl:variable name="location" select="@missing_in" />
        <!-- Obtain the first element of each group which parent is the current missing_data element  -->
        <xsl:for-each select="line_not_found[generate-id() = generate-id(key('line-key', @id)[generate-id(..) = $id][1])]">
            <!-- Counts the subset of line_not_found elements which are children of
                 the current missing_data parent (put into in a variable for clarity) -->
            <xsl:variable name="count-children" select="count(key('line-key', @id)[generate-id(..) = $id])" />
            <xsl:value-of select="concat($location, ' - ', @id, ' : ', $count-children, ' ')" />
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

# linux - 跨同一 Linux 发行版的不同版本的二进制和共享库兼容性

> ID：15132310
> 
> 赞同：3
> 
> 时间：2013-02-28T09:49:32.437
> 
> 标签：linux, compatibility

假设我在 Linux 发行版 X ver N 上编译了共享库和二进制文件。它可以在同一个发行版 N+1 上工作吗？

确定这一点的一般规则是什么？（例如 gcc/glibc 版本，可能是特定于发行版的，LSB 等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:18:15.063

首先，检查二进制文件和库的外部依赖项：

```
ldd yourlib.so a.out ... 
```

样本输出是

```
  librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f7906ee6000)
  libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f7906b29000)
  libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f790690b000)

```

然后检查所需的库在 N+1 中是否没有显着更改：确定拥有这些库的包（`rpm -qf file`或）并比较[upstream-tracker](http://upstream.rosalinux.ru/)`dpkg -S file`中找到的包的版本（N 和 N+1）。

最后，检查 gcc 的版本是否没有明显变化（从 2.x 到 3.y 或从 3.x 到 4.y）。

此外，如果该工具支持，请尝试针对 N+1 版本的发行版在所有二进制文件上使用[Linux Application Checker 。](http://www.linuxfoundation.org/collaborate/workgroups/lsb/all-about-linux-application-checker)

[![在此处输入图像描述](../Images/d98f65ce41efe7cb8981a2ab8be1ef1b.png)](https://i.stack.imgur.com/2a5hR.jpg)

# gwt - Windows 8 手机的 PhoneGap 应用教程

> ID：15132314
> 
> 赞同：1
> 
> 时间：2013-02-28T09:49:45.123
> 
> 标签：gwt, cordova, windows-phone-8

是否有可能在 Windows 8 手机的 PhoneGap 中运行 gwt Web 应用程序？我找到了仅适用于 iPhone 和 Android 的教程，但不知道如何在 WP8 中制作它。

gwt web 应用程序如何与PhoneGap 应用程序捆绑在一起，以便所有东西都可以在一个数据包中安装到Windows 8 手机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:55:31.423

好的教程是，令人惊讶的是，在[PhoneGap 自己的网站上](http://docs.phonegap.com/en/2.4.0/guide_getting-started_windows-phone-8_index.md.html#Getting%20Started%20with%20Windows%20Phone%208)，在完成 Hello World 之后，继续在 www 文件夹上编码。在那里，您甚至可以复制粘贴您自己现有的 Web 项目输出，这样在将应用程序移植到移动设备时，您可以节省大量的编码工作。

# c# - 输入字符串的格式不正确 错误

> ID：15132315
> 
> 赞同：-4
> 
> 时间：2013-02-28T09:49:46.687
> 
> 标签：c#

对于下面提到的代码，我收到“输入字符串的格式不正确”错误：

```
Convert.ToInt32(TextBox2.ToString()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:51:15.277

而不是`TextBox2.ToString()`你需要`TextBox2.Text`被解析为整数。您需要使用该`Text`属性从`TextBox`.

因此，以下检查将失败：

```
if (Convert.ToInt32(Carton_Qty_Bal) < Convert.ToInt32(TextBox2.ToString())) 
                                                      ^^^^^^^^^^^^^^^^ 
```

此外，您不必`ToString`像在代码中那样调用 Text 属性，因为`Text`它已经是字符串类型。

```
TextBox1.Text.ToString() 
```

*（您应该查看[Int32.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)方法以获得更安全的整数解析）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:51:49.063

我怀疑你的错误归结为试图解析

`Textbox.ToString()`

尝试使用`TextBox.Text`，否则您正在解析代表文本框对象的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:58:00.603

你的代码

```
if (Convert.ToInt32(Carton_Qty_Bal) < Convert.ToInt32(TextBox2.ToString())) 
```

不使用`Text`TextBox 的属性。

您正在使用`TextBox2.ToString()`它返回 TextBox 类型的字符串表示形式。使用该`Text`属性并将代码更改为`TextBox2.Text`.

但请注意：您应该检查`TextBox.Text`属性的值以确保有效的数字输入。

# sql - 在查询和更新基表中使用物化视图

> ID：15132322
> 
> 赞同：1
> 
> 时间：2013-02-28T09:50:27.133
> 
> 标签：sql, performance, oracle, query-optimization

我是甲骨文的新手，很乐意帮助回答我的问题。

我为表“A”创建了一个物化视图“A_MV”。我有一个过程，它将从materialzied视图“A_MV”执行SELECT查询，然后在基表“A”的某些条件下更新基表“A”。

来自“A_MV”的 SELECT 查询很快，但对基表的更新太慢了。

好心劝告。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:14:43.077

如果 mview 设置为在提交时更新，那么这将强制在每次提交时重建 mview。此外，如果定义了物化视图日志，那么这可以更频繁地更新，这会减慢它的速度。

oracle 的合并语句是一个非常快的内置函数。在这种情况下建议确保在合并之前将 mview 上的刷新设置为按需刷新。请注意，如果您愿意，可以稍后将其更改回来，而无需重建 mview。

# git - 如何为 git diff 中使用的寻呼机设置标签大小？

> ID：15132325
> 
> 赞同：10
> 
> 时间：2013-02-28T09:50:30.320
> 
> 标签：git, formatting, diff

**我最常**使用寻呼机

 **看到 tabsize=8 的 diff 输出很痛苦。如何指定 tabsize==2 ？

```
@@ -48,6 +49,7 @@
                                                <div class="content_inner">
                                                        <%= yield %>
                                                        <div class="clear"></div>
+              <%= render "emoticons/menu" %>
                                                </div>
                                        </div>
                                        <div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T09:57:33.713

对于`less`寻呼机，您可以更新寻呼机

`git config --global core.pager 'less -x2'`

`most`如果此选项具有更改标签大小的选项，您也可以这样做**

# delphi - 表格背景中的平铺/中心图像

> ID：15132326
> 
> 赞同：4
> 
> 时间：2013-02-28T09:50:31.993
> 
> 标签：delphi, wallpaper

有没有办法将图像放置在表单背景中并能够平铺或居中？

我还需要在图像顶部放置其他组件。

我尝试了 rmControls，但我无法在图像顶部放置任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T10:05:07.373

您可以`OnPaint`在表单的处理程序中绘制图像。这是一个简单的平铺示例：

```
procedure TMyForm.FormPaint(Sender: TObject);
var
  Bitmap: TBitmap;
  Left, Top: Integer;
begin
  Bitmap := TBitmap.Create;
  Try
    Bitmap.LoadFromFile('C:\desktop\bitmap.bmp');
    Left := 0;
    while Left<Width do begin
      Top := 0;
      while Top<Height do begin
        Canvas.Draw(Left, Top, Bitmap);
        inc(Top, Bitmap.Height);
      end;
      inc(Left, Bitmap.Width);
    end;
  Finally
    Bitmap.Free;
  End;
end; 
```

在实际代码中，您希望缓存位图而不是每次都加载它。我相信您可以解决如何调整它以使位图居中。

输出如下所示：

![在此处输入图像描述](../Images/c1b49db546c0378f5956c0a289d91a83.png)

但是，由于这是表单的背景，因此最好在`WM_ERASEBACKGROUND`. 这也将确保您在调整大小时不会有任何闪烁。这是演示这一点的程序的更高级版本，以及拉伸绘制选项。

```
procedure TMyForm.FormCreate(Sender: TObject);
begin
  FBitmap := TBitmap.Create;
  FBitmap.LoadFromFile('C:\desktop\bitmap.bmp');
end;

procedure TMyForm.RadioGroup1Click(Sender: TObject);
begin
  Invalidate;
end;

procedure TMyForm.FormResize(Sender: TObject);
begin
  //needed for stretch drawing
  Invalidate;
end;

procedure TMyForm.PaintTile(Canvas: TCanvas);
var
  Left, Top: Integer;
begin
  Left := 0;
  while Left<Width do begin
    Top := 0;
    while Top<Height do begin
      Canvas.Draw(Left, Top, FBitmap);
      inc(Top, FBitmap.Height);
    end;
    inc(Left, FBitmap.Width);
  end;
end;

procedure TMyForm.PaintStretch(Canvas: TCanvas);
begin
  Canvas.StretchDraw(ClientRect, FBitmap);
end;

procedure TMyForm.WMEraseBkgnd(var Message: TWmEraseBkgnd);
var
  Canvas: TCanvas;
begin
  Canvas := TCanvas.Create;
  Try
    Canvas.Handle := Message.DC;
    case RadioGroup1.ItemIndex of
    0:
      PaintTile(Canvas);
    1:
      PaintStretch(Canvas);
    end;
  Finally
    Canvas.Free;
  End;
  Message.Result := 1;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T14:17:40.853

在对我的第一个答案的评论中，您询问如何绘制 MDI 表单的客户区域。这有点困难，因为您没有`OnPaint`我们可以挂起的就绪事件。

相反，我们需要做的是修改 MDI 客户端窗口的窗口过程，并实现一个`WM_ERASEBKGND`消息处理程序。

这样做的方法是`ClientWndProc`在您的 MDI 表单中覆盖：

```
procedure ClientWndProc(var Message: TMessage); override;
....
procedure TMyMDIForm.ClientWndProc(var Message: TMessage);
var
  Canvas: TCanvas;
  ClientRect: TRect;
  Left, Top: Integer;
begin
  case Message.Msg of
  WM_ERASEBKGND:
    begin
      Canvas := TCanvas.Create;
      Try
        Canvas.Handle := Message.WParam;
        Windows.GetClientRect(ClientHandle, ClientRect);
        Left := 0;
        while Left<ClientRect.Width do begin
          Top := 0;
          while Top<ClientRect.Height do begin
            Canvas.Draw(Left, Top, FBitmap);
            inc(Top, FBitmap.Height);
          end;
          inc(Left, FBitmap.Width);
        end;
      Finally
        Canvas.Free;
      End;
      Message.Result := 1;
    end;
  else
    inherited;
  end;
end; 
```

它看起来像这样：

![在此处输入图像描述](../Images/1ecf9636b6ee237be11cf0face4e2a35.png)

* * *

事实证明，您使用的是旧版本的 Delphi，它不允许您覆盖`ClientWndProc`. 这使它有点困难。您需要一些窗口过程修改。我使用了与 Delphi 6 源代码完全相同的方法，因为那是我手头碰巧拥有的旧版 Delphi。

您的表单希望如下所示：

```
type
  TMyForm = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    FDefClientProc: TFarProc;
    FClientInstance: TFarProc;
    FBitmap: TBitmap;
    procedure ClientWndProc(var Message: TMessage);
  protected
    procedure CreateWnd; override;
    procedure DestroyWnd; override;
  end; 
```

和这样的实现：

```
procedure TMyForm.FormCreate(Sender: TObject);
begin
  FBitmap := TBitmap.Create;
  FBitmap.LoadFromFile('C:\desktop\bitmap.bmp');
end;

procedure TMyForm.ClientWndProc(var Message: TMessage);
var
  Canvas: TCanvas;
  ClientRect: TRect;
  Left, Top: Integer;
begin
  case Message.Msg of
  WM_ERASEBKGND:
    begin
      Canvas := TCanvas.Create;
      Try
        Canvas.Handle := Message.WParam;
        Windows.GetClientRect(ClientHandle, ClientRect);
        Left := 0;
        while Left<ClientRect.Right-ClientRect.Left do begin
          Top := 0;
          while Top<ClientRect.Bottom-ClientRect.Top do begin
            Canvas.Draw(Left, Top, FBitmap);
            inc(Top, FBitmap.Height);
          end;
          inc(Left, FBitmap.Width);
        end;
      Finally
        Canvas.Free;
      End;
      Message.Result := 1;
    end;
  else
    with Message do
      Result := CallWindowProc(FDefClientProc, ClientHandle, Msg, wParam, lParam);
  end;
end;

procedure TMyForm.CreateWnd;
begin
  inherited;
  FClientInstance := Classes.MakeObjectInstance(ClientWndProc);
  FDefClientProc := Pointer(GetWindowLong(ClientHandle, GWL_WNDPROC));
  SetWindowLong(ClientHandle, GWL_WNDPROC, Longint(FClientInstance));
end;

procedure TMyForm.DestroyWnd;
begin
  SetWindowLong(ClientHandle, GWL_WNDPROC, Longint(FDefClientProc));
  Classes.FreeObjectInstance(FClientInstance);
  inherited;
end; 
```

# neo4jclient - 在 Neo4jClient 密码流畅查询中使用 with 子句

> ID：15132339
> 
> 赞同：0
> 
> 时间：2013-02-28T09:50:56.533
> 
> 标签：neo4jclient

我正在尝试使用 Neo4JClient编写带有[WITH 子句的密码查询。](http://docs.neo4j.org/chunked/milestone/query-with.html)但是，我在任何 ICypherFluentQuery 命名空间中的任何地方都看不到 With 操作。

Neo4JClient 是否支持 with 子句？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:25:44.110

确实如此，从构建 1.0.0.500 开始。

# objective-c - 使用 ARC 在 iOS6 上工作的 OSC 库

> ID：15132342
> 
> 赞同：0
> 
> 时间：2013-02-28T09:51:01.840
> 
> 标签：objective-c, c, ios6, automatic-ref-counting, osc

现在我正在寻找使用 ARC 在 iOS6 上工作的 OSC 库。我一开始尝试了 vvOSC。但我得到了一个错误“-（NSString *）stringByDeletingLastAndAddingFirstSlash;” 也许编译器找不到该方法。

然后我尝试为 iOS6 编译 liblo。我用谷歌搜索了这样做的方法。但我找不到一个例子。我对UINIX一无所知，所以我放弃了liblo。

然后我尝试了 CocoaOSC。实际上，示例代码在 iPhone 模拟器 6.1 上运行良好。但是这个例子没有使用 ARC，当我在使用 ARC 的项目中使用 CocoaOSC 时，我遇到了很多错误。我删除了 CocoaOSC 中的内存管理内容，例如“自动释放、保留等”。

我是 Objective-C 的新手。所以我认为我不能用 ARC 解决 CocoaOSC 问题。

因此，如果有人知道带有 ARC 的 iOS6 的优秀 OSC 库。请告诉我。

原谅我的英语不好。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:40:54.733

您可以混合和匹配 ARC 和非 ARC 代码。您只需`-fno-objc-arc`为不想使用 ARC 的每个实现文件设置编译器标志。这将允许您轻松地将非 ARC 库与 ARC 代码混合。

鉴于此，您需要 ARC 库是否有特定原因？

# maven - Intellij maven war项目与模块依赖，如何只部署需要的？

> ID：15132345
> 
> 赞同：1
> 
> 时间：2013-02-28T09:51:06.097
> 
> 标签：maven, tomcat, intellij-idea

我目前的项目包括：

*   父 maven pom 声明项目的每个模块和公共依赖项
*   每个功能有一个子模块（例如实体审计、导出...），其中一个是依赖于其他几个模块的战争模块。注意：依赖项可能包含战争使用的资产（例如 html 模板、配置文件...），因此在重新部署时也可能需要刷新战争上下文。

我可以构建项目并使用tomcat部署战争的爆炸版本。`WEB-INF/lib`这场战争正确地包含了其文件夹中的每个依赖项。现在，如果我在 IntelliJ 中修改这些依赖项之一，我希望能够仅将此模块部署到爆炸战争中，我该怎么做？目前我是`maven package`依赖项并在tomcat实例上重新部署......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:47:55.760

看来您正在尝试做的是某种热部署。您有几个解决方案，它们与 IntelliJ 没有直接关系，但通常与 Java 应用程序相关：

*   在调试模式下，JVM 允许您仅在更改方法主体时才可以[热交换类](http://en.wikipedia.org/wiki/Hot_swapping)
*   如果你想支持类/方法/字段添加/删除等，你应该看看[JRebel](http://www.zeroturnaround.com/jrebel/)，它还支持重新加载许多框架配置

开箱即用的热交换非常有限，所以如果您不打算购买/使用专用工具进行热部署，我担心没有令人满意的解决方案可以解决您的问题。

# java - 为什么枚举声明中的类型参数包含递归类型边界？

> ID：15132351
> 
> 赞同：0
> 
> 时间：2013-02-28T09:51:25.163
> 
> 标签：java, generics, enums

```
 public abstract class Enum<E extends Enum<E>>
            implements Comparable<E>, Serializable {
     // All code goes here

    } 
```

在上面的代码中，为什么 的类型参数存在递归类型绑定，`Enum`以及为什么包含`Comparable<E>`. 换句话说，为什么它是`Comparable<E>`而不是`Comparable<E extends Comparable<E>>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:53:27.727

`Enum<E extends Enum<E>>`是定义`E`和限制它的类型。

到您到达的时间`Comparable<E>` `E`现在已定义，因此您无需进一步限定它。

`Comparable<<E> extends Comparable<E>>`会很傻。如果你的意思是这样的，`Comparable<E extends Enum<E>>`那么你就不需要它，因为`E`已经定义和过滤了。在这一点上，您现在正在告诉用户更多关于这个类的对象做什么，即他们实现了`Comparable<E>`接口。

`Enum`类型具有递归类型边界，因为它们是递归类型，即 an本身`enum` **就是**`Enum`一个（注意大小写差异）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:01:04.293

它`Comparable<E extends Comparable<E>>`也是。`Comparable<E>`与`Comparable<E extends Enum<E>>`cause相同`E extends Enum<E>`，`Enum<E>`与`Comparable<E>`由于继承相同。因此`Comparable<E>`等同于`Comparable<E extends Comparable<E>>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:55:11.367

可能不需要将 的泛型类型参数绑定`Comparable`到特定类型，而`Enum`必须将 绑定到扩展类型`Enum`。

# python - Python int() 是一个浮点数的字符串

> ID：15132352
> 
> 赞同：4
> 
> 时间：2013-02-28T09:51:25.240
> 
> 标签：python

很可能是一个愚蠢的问题，但我想知道为什么 python 不能从实际上是浮点数的字符串中生成整数。

```
>>> int(1.0)
1
>>> int(float('1.0'))
1 
```

但

```
>>> int('1.0')
Traceback (most recent call last):
  File "<pyshell#17>", line 1, in <module>
    int('1.0')
ValueError: invalid literal for int() with base 10: '1.0' 
```

谁能澄清为什么不能一步完成？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T09:53:30.057

> 谁能澄清为什么不能一步完成？

引用 Python 之禅：[显式优于隐式。](http://www.python.org/dev/peps/pep-0020/)

> 我想知道为什么 python 不能从实际上是浮点数的字符串中生成整数。

根据 Python 的哲学，如果一个字符串包含一个浮点数，然后您想将其转换为一个 int，那么您有责任将其拼写出来。该语言不会尝试和猜测您的意图。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T09:56:33.050

直接来自关于`int`：

> 如果 x 不是数字或给出了 base，则 x 必须是字符串或 Unicode 对象，表示以基数为基数的整数文字。

以下是基数基数中的整数文字的定义方式：

```
longinteger    ::=  integer ("l" | "L")
integer        ::=  decimalinteger | octinteger | hexinteger | bininteger
decimalinteger ::=  nonzerodigit digit* | "0"
octinteger     ::=  "0" ("o" | "O") octdigit+ | "0" octdigit+
hexinteger     ::=  "0" ("x" | "X") hexdigit+
bininteger     ::=  "0" ("b" | "B") bindigit+
nonzerodigit   ::=  "1"..."9"
octdigit       ::=  "0"..."7"
bindigit       ::=  "0" | "1"
hexdigit       ::=  digit | "a"..."f" | "A"..."F" 
```

如您所见`.`，词汇定义中不存在。

更多关于[int](http://docs.python.org/2/library/functions.html#int)和[整数文字](http://docs.python.org/2/reference/lexical_analysis.html#integer-and-long-integer-literals)

还值得一提的是，您希望在[静态类型](http://en.wikipedia.org/wiki/Type_system#Static_typing)语言中自然可以实现，而 Python 采用[动态类型。](http://en.wikipedia.org/wiki/Type_system#Dynamic_typing)

# r - 如何将变量转化为数量？

> ID：15132358
> 
> 赞同：1
> 
> 时间：2013-02-28T09:51:35.133
> 
> 标签：r, variables, quantitative

我有一个数据矩阵（900 列和 5000 行），我想对其进行 pca ..

该矩阵在 excel 中看起来非常好（意味着所有值都是定量的），但是在我在 R 中读取我的文件并尝试运行 pca 代码后，我收到一条错误消息，提示“以下变量不是定量的”，我得到了非定量变量列表。

所以一般来说，有些变量是定量的，有些不是。请参见以下示例。当我检查变量 1 时，它是正确且定量的..（随机一些变量在文件中是定量的）当我检查变量 2 时，它是不正确且非定量的..（随机一些像这样的变量是非定量的在文件中）

```
> data$variable1[1:5]
[1] -0.7617504 -0.9740939 -0.5089303 -0.1032487 -0.1245882

> data$variable2[1:5]
[1] -0.183546332959017 -0.179283451229594 -0.191165669598284 -0.187060515423038
[5] -0.184409474669824
731 Levels: -0.001841783473108 -0.001855956210119 ... -1,97E+05 
```

所以我的问题是，我怎样才能把所有的非定量变量变成定量的？

使文件简短无济于事，因为这些值本身就是量化的。我不知道发生了什么。所以这是我的原始文件的链接 <- [https://docs.google.com/file/d/0BzP-YLnUNCdwakc4dnhYdEpudjQ/edit](https://docs.google.com/file/d/0BzP-YLnUNCdwakc4dnhYdEpudjQ/edit)

我也尝试了下面给出的答案，但它仍然没有帮助。

所以让我展示一下我到底做了什么，

```
> data <- read.delim("file.txt", header=T)
> res.pca = PCA(data, quali.sup=1, graph=T)
Error in PCA(data, quali.sup = 1, graph = T) :
The following variables are not quantitative:  batch
The following variables are not quantitative:  target79
The following variables are not quantitative:  target148
The following variables are not quantitative:  target151
The following variables are not quantitative:  target217
The following variables are not quantitative:  target266
The following variables are not quantitative:  target515
The following variables are not quantitative:  target530
The following variables are not quantitative:  target587
The following variables are not quantitative:  target620
The following variables are not quantitative:  target730
The following variables are not quantitative:  target739
The following variables are not quantitative:  target801
The following variables are not quantitative:  target803
The following variables are not quantitative:  target809
The following variables are not quantitative:  target819
The following variables are not quantitative:  target868
The following variables a
In addition: There were 50 or more warnings (use warnings() to see the first 50) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:18:56.497

默认情况下，R 将字符串强制转换为因子。这可能会导致意外行为。使用以下命令关闭此默认选项：

```
 read.csv(x, stringsAsFactors=F) 
```

或者，您可以将因子强制转换为数字

```
 newVar<-as.numeric(oldVar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:07:21.463

正如 Arun 所提到的，R 将您的变量视为因素。因此它创建了一个 data.frame（实际上是一个列表）。有很多方法可以解决这个问题，一种是通过以下方式将其转换为数据矩阵；

```
matrix <- as.numeric(as.matrix(data))
dim(matrix) <- dim(data) 
```

现在您可以在矩阵上运行 PCA。

编辑：

稍微扩展示例，查理建议的第二部分将不起作用。复制以下会话，看看它是如何工作的；

```
d <- data.frame(
 a = factor(runif(2000)),
 b = factor(runif(2000)),
 c = factor(runif(2000)))

as.numeric(d) #does not work on a list (data frame is a list)

as.numeric(d$a) # does work, because d$a is a vecor, but this is not what you are 
# after. R converts the factor levels to numeric instead of the actual value.

(m <- as.numeric(as.matrix(d))) # this does the rigth thing
dim(m)                        # but m loses the dimensions and is now a vector

dim(m) <- dim(d)              # assign the dimensions of d to m

svd(m)                        # you can do the PCA function of your liking on m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-04T18:06:11.717

`as.numeric(as.character(data$variable2[1:5]))`, 用于`as.character`首先获取因子变量标签的字符串表示，然后将它们转换为`as.numeric`

# javascript - 如何更改 jQuery UI Draggable 中发生快照的距离

> ID：15132364
> 
> 赞同：2
> 
> 时间：2013-02-28T09:51:41.660
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有一个 100% 的页面高度面板，我将其从页面左侧拖到右侧。我已经应用了它的捕捉选项，它可以很好地捕捉到页面的左侧/右侧。现在我需要增加它发生的距离。比如说，我将面板从左到右移动到页面宽度的 80%，在这种情况下，我希望它贴在页面的右侧。是否可以自定义此行为？

这是页面的外观

![在此处输入图像描述](../Images/fa0924a0625fc18103a304b662a58352.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:09:00.287

您是否尝试过该选项[`snapTolerance`](http://api.jqueryui.com/draggable/#option-snapTolerance)？

```
$( ".selector" ).draggable({ snapTolerance: 200 }); 
```

要获得 20% 的窗口宽度，请使用以下命令：

```
$(document).width() * 0.2 
```

# c# - 无法在多封电子邮件中重复使用电子邮件附件

> ID：15132365
> 
> 赞同：2
> 
> 时间：2013-02-28T09:51:46.583
> 
> 标签：c#, asp.net-mvc-3

我目前在 MVC3 中提供一个表单供用户填写一些字段并附加文件。提交时，我将发布的信息（带有附件）发送两次......一次作为收据发送给海报，第二次发送给另一封目标电子邮件。

我遇到的问题是第一封电子邮件使用正确的附件成功发送。第二封电子邮件会发送一个大小为 0 的附件。似乎从文件上传制作附件对象后，我无法再次重复使用它。使用调试器我可以看到文件上传对象仍在内存中，但其 ContentLength 变为 0。

所以在下面的例子中，如果我简化我的代码如下：

```
public static void SendDummyEmail1()
{
    using (var mailMessage = new MailMessage("from@email.com", "to@email.com"))
    {
        mailMessage.Subject = "Email Subject"
        mailMessage.Body = Razor.Parse(template, (dynamic)dynamicTokens);
        mailMessage.IsBodyHtml = true;

        if (_fileUpload != null && _fileUpload.ContentLength > 0)
        {
            var attachment = new Attachment(_fileUpload.InputStream, _fileUpload.FileName, MediaTypeNames.Application.Octet);
            attachment.ContentDisposition.FileName = Path.GetFileName(_fileUpload.FileName);
            mailMessage.Attachments.Add(attachment);
        }

        SendMail(mailMessage);
    }
}

public static void SendMail(MailMessage message)
{
    var client = new SmtpClient
    {
        Host = ConfigurationManager.AppSettings[SmtpHostname],
        Port = Convert.ToInt32(ConfigurationManager.AppSettings[SmtpPortNumber]),
        UseDefaultCredentials = true,
        Credentials = CredentialCache.DefaultNetworkCredentials,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        EnableSsl = true,  
    };

    // Work around remote certificate validation
    // Ref: http://stackoverflow.com/questions/777607/the-remote-certificate-is-invalid-according-to-the-validation-procedure-using
    ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

    client.Send(message);
} 
```

如果我连续两次调用上述方法，第一封电子邮件将成功通过。第二封电子邮件将通过，但没有附件，因为 ContentLength 变为 0。

```
SendDummyEmail1();
SendDummyEmail1(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:42:07.617

我想`_fileUpload.InputStream.CanSeek`在你的情况下等于`false`，这意味着你不能再次结束它 ( `Position = 0`) 并从中读取。尝试先将上传的文件流复制到内存流中，然后使用它而不是初始流，如下所示：

```
MemoryStream ms = new MemoryStream();
_fileUpload.InputStream.CopyTo(ms);
byte[] data = ms.ToArray();
SendDummyEmail1(data);
SendDummyEmail1(data);

public static void SendDummyEmail1(byte[] fileContent)
{
 ...
 var attachment = new Attachment(new MemoryStream(fileContent), ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:56:14.590

使用内存流作为实例变量而不是 _fileUpload。然后将其克隆到每封电子邮件的新蒸汽中（因此不要有多个消费者）。请记住在写入流后重置流，以便从头开始读取附件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:10:40.617

将上传的文件存储在服务器上并使用附件中的文件路径。

```
var attachment = new Attachment(filePath, MediaTypeNames.Application.Octet); 
```

发送电子邮件后，如果需要删除上传的文件。

# vba - vba CreateObject("DataLink") 指定 32 位或 64 位

> ID：15132367
> 
> 赞同：1
> 
> 时间：2013-02-28T09:51:50.293
> 
> 标签：vba, createobject

我正在使用以下内容创建 DataLink 对象并提示用户创建数据库连接：

```
Set oDLink = CreateObject("DataLinks")
sconnectionstring = oDLink.PromptNew() 
```

我遇到的问题是，在 64 位机器上它接缝 32 位驱动程序未列出。

那么如何指定使用 32 位版本的 DataLinks (dll)。大概我想要 sysWOW64 文件夹中的那个。

我已经看到您可以使用 CreateObject 指定 ProgID，也许 32 位和 64 位版本有不同的 ProgID，但我不知道它们可能是什么。

感谢任何帮助，花这么多时间谷歌搜索却无处可去。

# liferay - 用短信替换验证电子邮件地址

> ID：15132371
> 
> 赞同：0
> 
> 时间：2013-02-28T09:52:04.060
> 
> 标签：liferay

我想通过短信验证用户，例如：“活动用户 ID”发送 8xxx 当收到活动短信但不工作时，我尝试在 USER_ 表中设置 EMAILADDRESSVERIFIED 等于 1，我在创建新用户时检查 TICKET 表，该表包含票证密钥通过电子邮件激活，但票证密钥的长度太长，我想向用户（响应活动短信）发送一个短代码，所以我必须创建新表以将新代码映射到票证密钥。在 verify_email_address.jsp 中，我在发送到服务器之前将新的活动代码与票证密钥映射但不起作用。所以任何人都可以告诉我一个简单的方法来解决这个问题，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:59:59.257

我创建了新表来映射 user_id 和激活状态，以及自定义登录页面，谢谢大家！

# asp.net-mvc - 从 MVC ASP.NET 中的多个表中检索数据

> ID：15132373
> 
> 赞同：0
> 
> 时间：2013-02-28T09:52:16.267
> 
> 标签：asp.net-mvc, indexing, viewmodel

我有一个使用基本模型制作的 ViewModel。我还能够将数据插入表中。

我现在想检索数据并显示在我的表单上。我应该在我的**Index View**中编写什么代码。

**我的 ViewModel 由来自 2 个不同基本模型的属性组成。因此，在视图中，当我尝试使用我的ViewModel**的属性获取信息时，它会给出“对象未设置为对象的实例”错误。

* * *

代码如下：

**视图模型类：**

```
public class VideoContextViewModel
{
    public string VideoName { get; set; }
    public string DescriptionVideo { get; set; }
    public string actor { get; set; }
    public HttpPostedFileBase references { get; set; }
} 
```

**基本模型类：**

```
public class video
{       
    public int ID { get; set; }
    public string VideoName { get; set; }
    public string DescriptionVideo { get; set; }
    public string FilmName { get; set; }
    public int ratings { get; set; }
}

public class videoDetails
{
    public int VideoDetailsID { get; set; }
    public string actor { get; set; }
    public byte[] reference { get; set; }
    public int ID { get; set; }
    public virtual video Video { get; set; }
} 
```

**索引视图：**

```
@model IEnumerable< ConnectDatabase. VideoContextViewModel>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table>
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.VideoName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DescriptionVideo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.actor)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ })
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
} 
```

当我运行解决方案时，我收到错误：

> 对象不能设置为对象的实例。我将鼠标悬停在 foreach 循环中的“模型”上，它显示为 Null。

因此，我应该在这里写什么以便显示两个表中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:47:51.243

这是一个示例，您可以尝试这种方法：

```
 public class Equipment
    {
       [Key] public int EquipID { get; set; }
        public string EquipName { get; set; }
        public string EquipDescription { get; set; }
        public string EquipSerialNumber { get; set; }
        public string EquipImage { get; set; }
        public string EquipManufacturor { get; set; }
        public string EquipLocation { get; set; }
        public string EquipCalibrationFreq { get; set; }
        public virtual ICollection<Calibration> Calibrations { get; set; }
    }

 public class Calibration
    {
      [Key]  public int RecID { get; set; }
       public int EquipID { get; set; }

        public DateTime CalibrationDate { get; set; }
        public decimal? CalibrationCost { get; set; }
        public int ContactID { get; set; } 
        public String CalibrationCert { get; set; }
        public DateTime NextCalibrationDue { get; set; }
        public String ResponsibleSection { get; set; }
        public virtual Contact Contact { get; set; }
        public virtual Equipment Equipment { get; set; }
    }

 public class CalibrationContext:DbContext
    {
        public DbSet<Equipment> Equipments { get; set; }
        public DbSet<Calibration> Calibrations { get; set; }
        public DbSet<Contact> Contacts { get; set; }
        public DbSet<RFQ> RFQs { get; set; }
        public DbSet<RFQDetails> RFQDetails { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    } 
```

然后在 EquipmentController 我有这个功能

```
//
        // GET: /Equipment/Details/5

        public ViewResult Details(int id)
        {
            Equipment equipment = db.Equipments.Find(id);
            return View(equipment);
        } 
```

这是详细信息视图

```
@model QA.Models.Equipment

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>Equipment</legend>

     <div class="display-label">Equipment Name: </div>
      <div class="display-field">@Html.DisplayFor(model => model.EquipName)</div>

    <div class="display-label">EquipDescription: </div>
    <div class="display-field">    @Html.DisplayFor(model => model.EquipDescription)</div>

    <div class="display-label">Serial Number</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.EquipSerialNumber)
    </div>

    <div class="display-label">Image</div>
    <div class="display-field">
              @if(! string.IsNullOrEmpty(Model.EquipImage)){

            <img src="@Url.Content("~/Content/EquipImages/" + System.IO.Path.GetFileName(Model.EquipImage))" alt="" width="70" height="70"/>
            }else{
               <img src="@Url.Content("~/Content/EquipImages/NoImage.jpg")" alt="" width="70" height="70"/>
          }
    </div>

    <div class="display-label">Manufacturor</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.EquipManufacturor)
    </div>

    <div class="display-label">Location</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.EquipLocation)
    </div>

    <div class="display-label">Calibration Frequency</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.EquipCalibrationFreq)
    </div>

    <div class="display-label">
   <b> @Html.LabelFor(model => model.Calibrations)</b>
</div>
<div class="display-field">
    <table>
        <tr>
            <th>Calibration Date</th>
            <th>Calibrated By</th>
            <th>Calibration Cost</th>
            <th>Next Calibration Due on</th>
            <th>Calibration Certificate</th>
        </tr>
        @foreach (var item in Model.Calibrations)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.CalibrationDate)</td>
                <td>@Html.DisplayFor(modelItem => item.Contact.CompanyName)   </td>
                <td>@Html.DisplayFor(modelItem => item.CalibrationCost)</td>
                <td>@Html.DisplayFor(modelItem => item.NextCalibrationDue)</td>

                <td>   @if (item.Contact != null)
                {
                    <a href = @Url.Action("ViewCertificate", new { fileName = item.CalibrationCert }) > <img src = "@Url.Content("~/Content/Icons/pdf.jpg")"  alt = "attachment" /> </a> 
                }</td>

            </tr>
        }
    </table>
</div>

</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.EquipID }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

# jquery - 引用 Jquery 1.9.1 但 1.7.1 工作正常的问题

> ID：15132374
> 
> 赞同：1
> 
> 时间：2013-02-28T09:52:17.623
> 
> 标签：jquery

我在我的代码中引用了如下所示的 jQuery，它工作正常：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

但是，当我引用最新版本（如下）时，它就像没有 jQuery

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

我对 jQuery 很陌生，我什至不确定如何测试这个问题，任何帮助将不胜感激。

**更新**

这是我正在尝试做的一个小提琴：http: [//jsfiddle.net/aeNke/](http://jsfiddle.net/aeNke/)

在 1.7.1 中，列表是可排序的，但它不会提醒顺序，在 1.9.1 中，列表根本不可排序。

我在错误控制台中收到的唯一错误是“TypeError：jQuery.curCss 不是函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:54:00.630

很可能您已经使用过折旧的函数，并且您的代码现在抛出错误。

最*常见的错误*是通过使用现已贬值的功能`.live()`。

有关详细信息，请参阅升级指南

*   [http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

**提示：**查看所有带有关键字**“removed”的函数**

**例如：** `.toggle()` , `.live()`,`.die()`已被删除。

有关更多信息，请参阅相关线程[https://stackoverflow.com/a/14354091/584192](https://stackoverflow.com/a/14354091/584192)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:02:05.217

如果你想使用，你可以添加一个迁移插件`jQuery 1.9.0+`：

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
 <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

虽然我建议你通过`upgrade guide and look for the removed`并尝试`replacing those with the suggested ones`。

# php - 在 Symfony 2 中记录警告和通知

> ID：15132379
> 
> 赞同：4
> 
> 时间：2013-02-28T09:52:33.510
> 
> 标签：php, logging, symfony

在开发环境中，symfony ErrorHandler 可以捕获警告，这很好。在 prod env 中，symfony 忽略警告，我只在 php 错误日志中得到它们。现在我希望这些错误也被记录下来。

由于根本没有处理这些错误，因此对日志级别进行脱脂不起作用。那么如何在 Symfony prod 环境中记录这些错误呢？

我正在使用 Symfony 2.0

编辑：好的，我看到不处于调试模式（Kernel.php）时甚至没有错误处理程序：

```
if ($this->debug) {
        ini_set('display_errors', 1);
        error_reporting(-1);

        DebugUniversalClassLoader::enable();
        ErrorHandler::register();
        if ('cli' !== php_sapi_name()) {
            ExceptionHandler::register();
        }
} else {
    ini_set('display_errors', 0);
} 
```

那么在不违反框架的情况下实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T08:44:07.807

您可以通过实现自定义`ErrorHandler`和覆盖某些`AppKernel`方法来做到这一点。例如：

```
class AppKernel
{
    protected $prodErrorHandler;
    public function init()
    {
        if ($this->debug) {
            ini_set('display_errors', 1);
            error_reporting(-1);

            DebugUniversalClassLoader::enable();
            ErrorHandler::register();
            if ('cli' !== php_sapi_name()) {
                ExceptionHandler::register();
            }
        } else {
            ini_set('display_errors', 0);
            error_reporting(-1);
            $this->prodErrorHandler = new CustomErrorHandler();
            set_error_handler(array($this->prodErrorHandler, 'handle'));
        }
    }
    public function boot()
    {
        $booted = $this->booted;
        parent::boot();
        if (!$booted && $this->prodErrorHandler !== null && $this->container->has('logger')) {
            $this->prodErrorHandler->setLogger($this->container->get('logger'));
        }
    }
    // ... other methods
}
class CustomErrorHandler
{
    protected $logger;
    protected $buffer = array();
    public function setLogger($logger)
    {
        $this->logger = $logger;
        foreach ($this->buffer as $error) {
            $this->logger->warning($error);
        }
        $this->buffer = array();
    }
    public function handle($level, $message, $file, $line, $context)
    {
        if (error_reporting() & $level) {
            $error = new \ErrorException(sprintf('%s: %s in %s line %d', isset($this->levels[$level]) ? $this->levels[$level] : $level, $message, $file, $line));
            if ($this->logger !== null) {
                $this->logger->warning($error);
            } else {
                $this->buffer[] = $error;
            }
            return true;    // this would skip logging to file etc. Return false to just log and pass error handling to other handlers
        } else {
            return false;
        }
    }
} 
```

类似的事情也可以用单独的 Bundle 完成，但它可以“跳过”在 bundle 注册之前发生的一些错误。

如果您使用`Monolog 1.6`或更高版本，您还可以使用[`Monolog\ErrorHandler`](https://github.com/Seldaek/monolog/blob/1.6.0/src/Monolog/ErrorHandler.php)logger 来注册错误、未处理的异常和致命错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:13:20.747

您必须通过告诉内核在调试模式下运行来自定义您的环境来执行此操作。

```
new AppKernel('prod', true); 
```

> 重要但与环境主题无关的是上面前端控制器第 8 行的错误键。这指定应用程序是否应在“调试模式”下运行。无论环境如何，Symfony2 应用程序都可以在调试模式设置为 true 或 false 的情况下运行。这会影响应用程序中的许多事情，例如是否应显示错误或是否在每个请求上动态重建缓存文件。尽管不是必需的，但调试模式通常设置为开发和测试环境的 true 和 prod 环境的 false。

[http://symfony.com/doc/2.0/cookbook/configuration/environments.html](http://symfony.com/doc/2.0/cookbook/configuration/environments.html)

# android - Android VideoView 闪烁

> ID：15132382
> 
> 赞同：0
> 
> 时间：2013-02-28T09:52:37.033
> 
> 标签：android, android-videoview

我有一个具有 2 种视图类型的画廊：图像和带有图像和视图视图的布局。当我滚动浏览它并创建带有视频视图的项目时，整个屏幕都会闪烁。我尝试在适配器 onCreate 中为该项目充气，但没有任何改变。在调用 getView 后，闪烁发生在某处。

# drools-guvnor - DROOLS 2.5 是否支持 Guvnor

> ID：15132387
> 
> 赞同：0
> 
> 时间：2013-02-28T09:52:57.217
> 
> 标签：drools-guvnor

DROOLS 2.5（旧版）是否支持任何用于管理规则的 Guvnor 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:28:12.933

要使用 Guvnor，您需要客户端运行时使用与 Guvnor 相同版本的 Drools。Guvnor 自 5.2 以来才存在（据我所知），因此您将无法将 2.5 版与 Guvnor 一起使用。

如果您仍在使用 Drools 2.5 版，那么您确实需要升级。

# php - 覆盖 Doctrine 注释驱动程序

> ID：15132388
> 
> 赞同：2
> 
> 时间：2013-02-28T09:53:00.367
> 
> 标签：php, symfony, doctrine-orm

我必须在 Doctrine\Common\Persistence\Mapping\Driver\Annotation::getAllClassNames 中进行一些更改，因为 Doctrine 使用 require_one 并且我希望它使用我的自定义 spl 自动加载器。

我的问题是：如何告诉 Doctrine 使用我自己的代码而不更改 Symfony 的供应商文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:28:48.890

您可以通过`doctrine.orm.metadata.annotation.class`在 parameters.ini/yml/xml 中将参数设置为类的名称来实现此目的。

从 Doctrine/Bundle/DoctrineBundle/Resources/config/orm.xml：

```
 <parameter key="doctrine.orm.metadata.annotation.class">Doctrine\ORM\Mapping\Driver\AnnotationDriver</parameter> 
```

我自己没有对此进行测试，但这就是我过去如何覆盖这样的事情。

# java - 在 JAVA 中解析大型 XML 文档

> ID：15132390
> 
> 赞同：12
> 
> 时间：2013-02-28T09:53:01.030
> 
> 标签：java, xml, sqlite, xml-parsing

我有以下问题：

我有一个 XML 文件（大约 1GB），并且必须向上和向下迭代（即不是连续的；一个接一个）才能获得所需的数据并对其进行一些操作。最初，我使用 DOM Java 包，但很明显，在解析 XML 文件时，JVM 达到其最大堆空间并停止。

为了克服这个问题，我想出的一个解决方案是找到另一个解析器来迭代 XML 中的每个元素，然后我将它的内容存储在我硬盘上的一个临时 SQLite 数据库中。因此，通过这种方式，不会超出 JVM 的堆，一旦所有数据都填满，我将忽略 XML 文件并继续对临时 SQLite 数据库进行操作。

还有其他方法可以解决我手头的问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T10:02:27.137

[SAX（XML 的简单 API）](http://en.wikipedia.org/wiki/Simple_API_for_XML)将在这里为您提供帮助。

> 与 DOM 解析器不同，SAX 解析器不创建 XML 文档的内存表示，因此速度更快，使用的内存更少。相反，SAX 解析器通过调用回调来通知客户端 XML 文档结构，也就是说，通过调用 `org.xml.sax.helpers.DefaultHandler`提供给解析器的实例上的方法。

这是一个示例实现：

```
SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
DefaultHandler handler = new MyHandler();
parser.parse("file.xml", handler); 
```

您在哪里`MyHandler`定义生成文档/元素的开始/结束等事件时要采取的操作。

```
class MyHandler extends DefaultHandler {

    @Override
    public void startDocument() throws SAXException {
    }

    @Override
    public void endDocument() throws SAXException {
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
    }

    // To take specific actions for each chunk of character data (such as
    // adding the data to a node or buffer, or printing it to a file).
    @Override
    public void characters(char ch[], int start, int length)
            throws SAXException {
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:30:53.537

如果您不想受**内存限制**的限制，我当然建议您使用当前的方法，并将所有内容存储在数据库中。

`SAX parser`正如每个人（包括我）所建议的那样，XML 文件的解析应该由 a 完成。这样，您一次可以创建一个对象，并且可以立即将其持久化到数据库中。

对于后处理（解决交叉引用），您可以使用`SELECT`数据库中的 s，制作主键、索引等。如果您觉得舒服，也可以使用 ORM（Eclipselink、Hibernate）。

其实我不是很推荐 SQLite，它更容易设置一个 MySQL 服务器，并将数据存储在那里。以后您甚至可以重用 XML 数据（如果您不删除）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:49:44.787

如果您想使用比 SAX 更高级别的方法（编程可能非常棘手），您可以使用最近的 Saxon-EE 版本查看流式 XSLT 转换。但是，您对正在执行的精确处理过于模糊，不知道这是否适用于您的特定情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-20T15:35:23.573

如果您需要一种资源友好的方法来处理非常大的 xml，请尝试以下操作： [http](http://www.xml2java.net/xml-to-java-data-binding-for-big-data/) ://www.xml2java.net/xml-to-java-data-binding-for-big-data/ 它允许您在 SAX 中处理数据方式，但具有获取高级事件（映射到 java 的 xml 数据）并能够直接在代码中使用这些对象的优势。因此它结合了 jaxb 的便利性和 SAX 资源友好性。

# php - 如何在 Zend Framework 1.12 中集成 paypal？

> ID：15132391
> 
> 赞同：2
> 
> 时间：2013-02-28T09:53:01.673
> 
> 标签：php, zend-framework, paypal, sandbox

我知道你可能会问我为什么不先用谷歌搜索解决方案，现在我可以说我已经用谷歌搜索过了，不幸的是它出现了太多的解决方案和不同的方法来做到这一点。

我的情况是这样的，我想让那些客户能够**每年**订阅我的服务。

从[这个链接](http://devzone.zend.com/370/choosing-the-right-paypal-solution/)，他们提出了太多的解决方案，我不知道哪个 1 适合我的情况。当然，我想使用免费服务*（直接借记需要月费）*。

这意味着，我希望每年在我的客户订阅的服务到期时将交易＃存储到我的数据库中，并且它会自动向客户和我公司的电子邮件发送确认电子邮件。

总之，

1.  哪种方式适合我的情况。
2.  在这种情况下是否需要 cron 工作？还是只需要使用贝宝提供的定期付款？
3.  是否有任何**链接**或示例*（即沙箱中的编码实现）*？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-10T21:10:56.690

嗨，我为 ZF 编写了代码

> ```
> public function processPaymentAction()
> {
>     $methodName = 'CreateRecurringPaymentsProfile';
>     // from nvpHeader function
>     $API_Endpoint = 'https://api-3t.sandbox.paypal.com/nvp';
>     $version = '65.2'; 
> ```

```
 // But you can use here your own Sandbox API credentials of Business account
    // and you can get through Payapl Sandbox API Credentials Link on Left.

    $API_UserName = 'platfo_1255077030_biz_api1.gmail.com';
    $API_Password = '1255077037';
    $API_Signature = 'Abg0gYcQyxQvnf2HDJkKtA-p6pqhA1k-KTYE0Gcy1diujFio4io5Vqjf';
    $subject = '';
    global $nvp_Header, $AUTH_token, $AUTH_signature, $AUTH_timestamp;
    $nvpHeaderStr = "";

    //pr($this->data);die;
    //$this->data['User']['paymentType']
    $paymentType = urlencode('Sale');
    $firstName = urlencode("Jaskaran");
    $lastName = urlencode("Singh");
    $creditCardType = urlencode("Visa");
    $creditCardNumber = urlencode("4798720058660243");
    $expDateMonth =urlencode(11);

    // Month must be padded with leading zero
    $padDateMonth = str_pad($expDateMonth, 2, '0', STR_PAD_LEFT);

    $expDateYear = urlencode(2015);
    $cvv2Number = urlencode(962);
    $address1 = urlencode("1 Main St");
    $address2 = urlencode("");
    $city = urlencode("San Jose");
    $state = urlencode("CA");
    $zip = urlencode(95131);
    $amount = urlencode(1.00);

//  $init_amount = urlencode($this->data['User']['pack_price']);

    $currencyCode="USD";

    $profileDesc = urlencode("Welcome to the world of shopping where you get everything");
    $billingPeriod = urlencode("Week");
    $billingFrequency = urlencode(4);
    $totalBillingCycles = urlencode(0);

    ################# Commented as we need to define through Admin ##############

    $profileStartDateDay = 10;
    // Day must be padded with leading zero
    $padprofileStartDateDay = str_pad($profileStartDateDay, 2, '0', STR_PAD_LEFT);

    $profileStartDateMonth = 02;
    // Month must be padded with leading zero
    $padprofileStartDateMonth = str_pad($profileStartDateMonth, 2, '0', STR_PAD_LEFT);

    $profileStartDateYear = 2015;

    $profileStartDate = urlencode($profileStartDateYear . '-' . $padprofileStartDateMonth . '-' . $padprofileStartDateDay . 'T00:00:00Z');

    //string from nvpHeader
    $nvpHeaderStr = "&PWD=".urlencode($API_Password)."&USER=".urlencode($API_UserName)."&SIGNATURE=".urlencode($API_Signature);

    $nvpstr="&AMT=$amount&CREDITCARDTYPE=$creditCardType&ACCT=$creditCardNumber&EXPDATE=". $padDateMonth.$expDateYear."&CVV2=$cvv2Number&FIRSTNAME=$firstName&LASTNAME=$lastName&STREET=$address1&CITY=$city&STATE=$state".
    "&ZIP=$zip&COUNTRYCODE=US&CURRENCYCODE=$currencyCode&PROFILESTARTDATE=$profileStartDate&DESC=$profileDesc&BILLINGPERIOD=$billingPeriod&BILLINGFREQUENCY=$billingFrequency&TOTALBILLINGCYCLES=$totalBillingCycles";

    $nvpstr = $nvpHeaderStr.$nvpstr;
    //check if version is included in $nvpStr else include the version.
    if(strlen(str_replace('VERSION=','', strtoupper($nvpstr))) == strlen($nvpstr)) 
    {
        $nvpstr = "&VERSION=" . urlencode($version) . $nvpstr;
    }
    $nvpreq="METHOD=".urlencode($methodName).$nvpstr;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POST, 1);

    //$nvpreq=”METHOD=”.urlencode($methodName).$nvpStr;

    //setting the nvpreq as POST FIELD to curl
    curl_setopt($ch,CURLOPT_POSTFIELDS,$nvpreq);

    //getting response from server
    $response = curl_exec($ch);

    //convrting NVPResponse to an Associative Array
    $nvpResArray=$this->deformatNVP($response);
    $nvpReqArray=$this->deformatNVP($nvpreq);

    if (curl_errno($ch)) 
    {
        echo "cURL Error";
        die;
        // moving to display page to display curl errors
        $_SESSION['curl_error_no']=curl_errno($ch) ;
        $_SESSION['curl_error_msg']=curl_error($ch);
        //$location = "APIError.php";
        //header("Location: $location");
    } 
    else 
    {
        //closing the curl
        curl_close($ch);
    }

    #### Checking error ###
    if(!empty($nvpResArray))
    {
        if($nvpResArray['ACK'] == 'Failure')
        {
            echo "ERROR : ". $errmsg = $nvpResArray["L_LONGMESSAGE0"];
            echo "<pre>";
            print_r($nvpResArray);
            die;
        }
    }

    // Print this array you will get some necessary info
    ################ Starting data insert##################

    if($nvpResArray['ACK'] == 'Success')
    {
        echo 'Success';
        print_r($nvpResArray);
        die;
        // save data into tables for Recurring Profile
    }

}

############### Function deformatNVP #########
/** This function will take NVPString and convert it to an Associative Array and it will decode the response.
 * It is usefull to search for a particular key and displaying arrays.
 * @nvpstr is NVPString.
 * @nvpArray is Associative Array.
 */
function deformatNVP ($nvpstr)
{
    $intial = 0;
    $nvpArray = array();
    while (strlen($nvpstr)) {
        //postion of Key
        $keypos = strpos($nvpstr, '=');
        //position of value
        $valuepos = strpos($nvpstr, '&') ? strpos($nvpstr, '&') : strlen(
        $nvpstr);
        /*getting the Key and Value values and storing in a Associative Array*/
        $keyval = substr($nvpstr, $intial, $keypos);
        $valval = substr($nvpstr, $keypos + 1, $valuepos - $keypos - 1);
        //decoding the respose
        $nvpArray[urldecode($keyval)] = urldecode($valval);
        $nvpstr = substr($nvpstr, $valuepos + 1, strlen($nvpstr));
    }
    return $nvpArray;
}
function formAutorization ($auth_token, $auth_signature, $auth_timestamp)
{
    $authString = "token=" . $auth_token . ",signature=" . $auth_signature .
     ",timestamp=" . $auth_timestamp;
    return $authString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:18:42.130

You could use PayPal Payments Pro with the Direct Payment API to process the initial credit card transactions. Then you can store the transaction in your system, and set your system to run a cron job and perform a reference transaction API call to charge the buyer again. This will give you the effects of setting up a recurring payment profile without actually having the service through PayPal.

However, if you prefer to do less coding and setting up your system to perform cron jobs and etc, then you could just sign up for PayPal's recurring payments/recurring billing services, which would allow you to just make an API call to PayPal to set up a profile. Then PayPal will take of billing your buyers when they should be billed.

# actionscript-3 - AS3 类间变量

> ID：15132399
> 
> 赞同：0
> 
> 时间：2013-02-28T09:53:20.223
> 
> 标签：actionscript-3, variables

我有一个按钮，那是一个类，比如说，Button。还有一个主文档（Main 类），我可以在其中看到文本字段中的所有更改，每帧都刷新（是的，我不喜欢 trace()）。该按钮具有更改主文件中使用的变量的功能。因此，当我按下将主文件添加到舞台的按钮时，我需要它的功能才能工作。按钮类有 this.addEventListener(MouseEvent.CLICK,function)，进一步的函数添加到主类的 var 中。因此，如果确实添加了，我会在文本字段中看到更改。我在图形编辑器中看到我直接添加的对象所做的更改，但我添加的按钮没有更改。变量是公开的。函数都是公开的。所以...

**类不能自由交换变量？**

**如何通过不同类中的函数更改变量？**

也许我需要导出和导入var？我认为它们都作为一个共享所有公共变量的统一程序工作。

Main：我创建 var i，将 Button child 添加到 stage 并显示 i 每帧 =D

按钮：当你按下我时，我给 i 加 1 =D

SherWood：主要，YU 不显示 i，由 Button 更改？T_T

代码示例：

[http://piratepad.net/g5tTMFX4Bo](http://piratepad.net/g5tTMFX4Bo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:15:59.933

Button（或任何其他类）没有使用它的实例的环境的内置知识。

DisplayObject 祖先能够通过`parent`和`stage`属性检查父容器和“主”容器。

程序员的角色（你）是编写灵活的方式来交换任何 2 个（或更多）类需要的信息，例如通过公开公共方法/属性、调度事件（其他方可以监听）等。

因此，如果 Main 需要知道单击了 Button（Button 的实例），则为该按钮添加侦听器以进行单击事件，然后您将能够做任何您想做的事情，例如添加一个`i`

如果 Button 然后，例如需要通过公开的方法呈现最新的值 Main 可以做到这一点，例如`myButton.setLabel("Value of i="+i);`可以在上述点击侦听器中执行，

问候

# symfony - Symfony2 为什么转发嵌套请求对象？

> ID：15132402
> 
> 赞同：1
> 
> 时间：2013-02-28T09:53:31.097
> 
> 标签：symfony, httpresponse, forwarding

当我在控制器中执行 forward() 时，我丢失了路由和 route_parameters。

当我有 ParentAction 时，它会转发给 ChildAction。在 Childaction 中，我`return $this->render('myTemplate.html.twig', array());`会嵌套请求属性！

所以当模板被渲染时，而不是`$request['attributes']['_route_parameters']`我得到`$request['attributes']['request']['attributes']['_route_parameters']`.

虽然在 ChildAction 中，当我做一个`$this->getRequest();`层次结构时是正常的。

这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T01:39:08.343

原因是 symfony 不假设你有相同的路由参数。所以转发的时候需要重新提供新路由需要的路由参数，即使是相同的。

（顺便说一句，您还必须为新路由提供任何查询参数。）

```
public function indexAction($param)
{

    return $this->forward(
        'AppBundle\\Controller\\DefaultController::otherAction',
        array("someOtherParam" => $param),
        $request->query->all() // Causes query string params to be copied
    );
}

// This route has a different parameter.
public function otherAction($someOtherParam) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T11:21:30.287

在我的情况下，以下代码有所帮助：

```
$subRequest = $this->container->get('request')->duplicate(
    array(), 
    null, 
    array('topicId' => $topicId,'_controller' => 'SomeBundle:Topic:close'));

return $this->container->get('http_kernel')
    ->handle($subRequest, HttpKernelInterface::SUB_REQUEST); 
```

“主题”是 TopicController，“关闭”是 closeAction

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:56:37.550

一个可能的解决方案是在转发时将您的请求作为第二个参数传递。

```
$response = $this->forward('MyBundle:MyController:myAction', array('request' => $request)); 
```

此外，由于 forward 只是 Symfony2 核心功能的快捷方式，[这](https://stackoverflow.com/questions/8707586/symfony-2-forward-request-passing-along-get-post-params)可能会有所帮助。

# jquery - Jquery 不会在 html 中从 XML 中插入 CDATA

> ID：15132403
> 
> 赞同：1
> 
> 时间：2013-02-28T09:53:34.477
> 
> 标签：jquery, html, xml, parsing, cdata

我一直在寻找一个类似的问题以避免提出已经解决的问题，但我还没有找到适合我的有效答案，抱歉，如果有，我还没有看到。我正在从 Jquery 读取一个 XML 文件，该 xml 文件有一些我特意添加的 CDATA 内容，我想保留这些内容以用于格式化目的：

```
<?xml version="1.0" encoding="UTF-8"?>
<categories>
    <description name="whatever">
        Blah, blah, blah<![CDATA[<br />]]>blah, blah, blah
    </description>
</categories> 
```

阅读后，我将其附加到一个 div 中：

```
$(xml).find('description[name="whatever"]').each(function()
{       
    $(container).append($(this));
}); 
```

我所拥有的是 Jquery 似乎避开了 '<' 和 '>' 所以我终于有了：

```
Blah, blah, blah&l;tbr /&gt;blah, blah, blah 
```

我已经尝试强制附加将内容视为文本，如下所示：

```
$(container).text($(this)); 
```

但后来我得到：

```
[Object object] 
```

如果我这样做 .html() 我会得到与 .append() 相同的结果...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:22:58.190

Ordinary XML processors have no way of knowing whether anything they process came from a `CDATA` section; as far as they know, any `CDATA` content is just plain text. As such, when jQuery processes `CDATA` stuff, it isn't going to treat it any differently than stuff that appeared in a string literal (in fact, since jQuery is simply a layer over the `DOM`, it has absolutely no way of knowing whether its input came from a `CDATA` section or a string literal, since the `DOM` doesn't make any such distinction).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:41:41.983

For the folks that may fall in the same hole in the future:

First of all, declare it as XML:

```
$.get("yourxml.xml", {}, function (data) 
{            

},'xml'); 
```

Afterwards, introduce it like text:

```
$(xml).find('description[name="whatever"]').each(function()
{       
    $(container).append($(this).text());
}); 
```

This is working for me like a charm!

# python - python中的纪元转换

> ID：15132404
> 
> 赞同：1
> 
> 时间：2013-02-28T09:53:39.047
> 
> 标签：python, timestamp, epoch

在处理日志文件时，我需要比较 epoc 和人类可读的时间戳。

```
epoc=time.strftime("%d.%m.%Y %H:%M - %Z", time.localtime(1358252743927))
print epoc 
```

和

```
t1=time.gmtime(1358252743927)
print t1 
```

两者都返回类似

> 26.04.45011 22:52 - CEST

[而使用此站点](http://www.epochconverter.com/)转换 1358252743927 会返回

```
GMT: Tue, 15 Jan 2013 12:25:43 GMT
Your time zone: 1/15/2013 1:25:43 PM GMT+1 
```

这是正确的时间-但不知何故python无法处理这个时间戳。

有谁知道如何转换时间戳以获得后者的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:01:25.977

看起来您那里的时间戳有几毫秒，gmtitme 函数无法处理。你提到的网站可以。如果你删除这个巨大数字的最后三位，网站仍然会给你同样的结果，因为它不相信你真的想要 45011 年。

因此，只需在通过之前将数字除以 1000（如果您确定，您总是可以获得高分辨率），您就可以了：

```
t1 = time.gmtime(1358252743.927)
print t1 
```

给出：

```
time.struct_time(tm_year=2013, tm_mon=1, tm_mday=15, tm_hour=12, tm_min=25, tm_sec=43, tm_wday=1, tm_yday=15, tm_isdst=0) 
```

这似乎很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:02:27.233

Python以秒为单位处理纪元时间，我怀疑，看看你的时间戳有多大，而是以毫秒为单位。

如果你去掉最后 3 位，你会得到预期的时间：

```
>>> value = 1358252743927
>>> import time
>>> time.strftime("%d.%m.%Y %H:%M - %Z", time.localtime(value / 1000))
'15.01.2013 13:25 - CET' 
```

（减去 Python 已知的时区问题）。

# latex - 在 org 模式下，如何在使用 #+INCLUDE: 时保留图像的原始路径？

> ID：15132406
> 
> 赞同：4
> 
> 时间：2013-02-28T09:53:49.320
> 
> 标签：latex, org-mode

我可以用：

> #+包括：

将一个 org 文件包含在另一个 org 文件中，这允许我从各种 org 文件组装一个网站。我正在从`C-c C-e`org-mode 7.5 的导出器中导出。

我可以通过这种方式维护一个相当复杂的出版物。这种模块化方法在 LaTeX 和 Texinfo 等出版物中很常见。

但是，#+INCLUDEd 组织文件中的图像链接不再起作用。似乎正在发生的事情是图像的路径来自我从中导出的 org 文件，而不是引用图像的实际 org 文件。

我能看到解决此问题的唯一方法是：

*   使用平面文件结构；或者
*   从引用文件（我可能事先不知道）而不是本身创建图像路径。

这些都不是真正可持续的。

我如何告诉 org 使用来自其自己的相关 org 文件而不是父 org 文件的正确图像路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:45:17.653

据我对导出器的了解，`INCLUDE`文件在导出之前被插入到文档中。因此，内容是文档的一部分，然后才开始沿着路径到达文件（图像）的任何链接。

经过一些测试后，您可能需要使用绝对文件路径。由于您在 Windows 和 Linux 之间移动，因此最好的选择是从您的主目录开始在两者上使用一致的方案。

像这样，您可以创建 Org 链接： `[[~/path/to/image.jpg]]`，这将在两个系统上都有效（假设您在 Windows 上设置了 %HOME% ）。

选项 1 可能是一种替代方案（尽管我同意它根本不理想），而如果您将文件包含在多个未来的文档中，则第二个选项将有明显的缺陷。

# shell - 睡眠命令后的 Unix 返回码更改

> ID：15132407
> 
> 赞同：0
> 
> 时间：2013-02-28T09:53:58.123
> 
> 标签：shell, unix, exit-code

```
stop()
{
sh stop.sh
ret_code=$?
<1>echo ret_code is $ret_code
}

once=true
while $once
do
stop & PID=$!
<2>echo ret_code is $ret_code
sleep 2m
<3>echo ret_code is $ret_code
if [ $ret_code == 0 ]
then
break
else
kill $PID
fi
done 
```

<1> 处的 ret_code 为 0

<2> 处的 ret_code 不打印

<3> 处的 ret_code 为空白

有人能说出为什么在 sleep 命令期间和之后更改 ret_code 值吗？

编辑：

我尝试了另一种方法。有效 -

```
#! /bin/sh

once=true
while $once
do
sh stop.sh & PID=$!
sleep 2m
kill $PID
if [ $? != 0 ]
then
echo stop has completed successfully within the time limit
echo starting ...
sh start.sh
break
fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:40:06.757

`stop`，作为后台进程，在子shell中运行，因此`ret_code`它设置的值与您在 <2> 和 <3> 中检查的值不同（应该相同，因为它的值不受`sleep`命令影响） .

# c#-2.0 - 使用图片框从网络摄像头捕获图像

> ID：15132408
> 
> 赞同：0
> 
> 时间：2013-02-28T09:53:59.513
> 
> 标签：c#-2.0

我有一个带有两个图片框的 windowsform，用于从网络摄像头捕获图像。第一个图片框显示网络摄像头图像，第二个图片框显示捕获的图像。然后如何编写代码从网络摄像头获取图像并在第二个图片框中预览捕获的图像。请帮助我

提前谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T09:19:00.123

我已经回答了这个

[在 Windows 应用程序中，我如何使用 C#.Net 2.0 在图片框中保存来自网络摄像头的实时图像](https://stackoverflow.com/questions/17989595/in-windows-application-how-can-i-save-a-live-image-from-webcam-in-picturebox-usi/17989851#17989851)

# c# - 如何停止缓存电子邮件中的图像？

> ID：15132411
> 
> 赞同：1
> 
> 时间：2013-02-28T09:54:00.613
> 
> 标签：c#, email, caching, amazon

我正在使用 c# 和 Amazon SES 发送电子邮件。电子邮件由多张图片组成。当我第一次在我的客户端上打开该电子邮件时，它会从主机加载所有图像，但是当我第二次打开它时，似乎所有图像都已预先加载，我不想要这种行为。我知道这是因为缓存，但我怎么能强制不缓存这些图像并每次从托管服务器重新加载。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:31:57.883

尝试在您的电子邮件图像目录中放置一个 web.config 文件。这应该向电子邮件客户端（在请求图像时）指示这些正在提供的图像不会被缓存（假设所述电子邮件客户端正确实现了 HTTP 协议）

```
<?xml version="1.0"?>
 <configuration>
  <location>
   <system.web>
    <authorization>
     <allow users="*" />
    </authorization>
   </system.web>
   <system.webServer>
    <httpProtocol>
    <customHeaders>
      <add name="Cache-Control" value="no-cache" />
    </customHeaders>
    </httpProtocol>
    <staticContent>
     <clientCache cacheControlMode="DisableCache" />
    </staticContent>
   </system.webServer>
  </location>
 </configuration> 
```

# backbone.js - 骨干本地存储

> ID：15132412
> 
> 赞同：0
> 
> 时间：2013-02-28T09:54:02.443
> 
> 标签：backbone.js

总而言之，我是 Backbone 的菜鸟，我问的问题对你来说可能很容易。最近开始学习一些基础教程，发现很多demo中提到了`localstorage`看不懂的地方。假设我们有一些这样的代码。

```
window.EmployeeList = Backbone.Collection.extend({
        model : Employee,
        localStorage: new Store("employees")
    }); 
```

谁能帮忙告诉我数据`employee`存储在哪里？是什么`localStorage`？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:57:05.007

localStorage 是内置在浏览器中的小型数据库。通常用于<5MB的小数据

您可以将其视为一种更好的 cookie 形式。您可以像“员工”商店一样创建商店，并像普通数据库一样将数据保存到其中。

这应该会提高现代 Web 应用程序的性能和功能。例如，谷歌邮件使用这个本地存储来保存收件箱的本地副本，以防您的客户端离线（移动设备上没有网络）

您可以通过 F12 -> Resources -> LocalStorage 在 google chrome 中检查本地存储

# c# - 如何通过 URL 中的查询字符串保护与 IFrame 窗口的通信

> ID：15132416
> 
> 赞同：0
> 
> 时间：2013-02-28T09:54:07.393
> 
> 标签：c#, asp.net, url, iframe, webforms

在我的应用程序中，我在 ajax 选项卡面板中使用 MSSQL reportviewer ASP.NET 控件作为 IFrame。我选择将其放入 iframe 是因为[这个答案。](https://stackoverflow.com/questions/159391/reportviewer-control-and-ajax-updatepanel)
在加载 iframe 时，我的应用程序将查询字符串发送到 iframe 窗口，类似这样的 URL

```
TabID=92&_dc=1362044299421&doc_id=456 
```

doc_id 参数是我的参数，它在加载 iframe 之前填充在主窗口中。
_dc 参数我认为这是一个 ajax 自动添加到查询字符串的参数。

在我的主要 Web 表单旁边，有什么方法可以保护 iframe 免受不必要的加载。
我不会允许用户打开 Web 浏览器并使用其他一些“doc_id”参数输入 url 并将其传递给我的 asp.net 子页面并获取不需要的数据。

我如何保护在 Iframe 中打开的子页面，该 Iframe 仅在由我的 WebForm 调用时才呈现。
此 _dc 参数是否可用作校验和或密钥以保护 URL 内的查询字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:02:36.687

您应该在主窗体服务器端代码中为每个会话变量生成一个随机变量，将其传递给 url 查询，并检查它在 iframe 页面服务器端代码上是否正确。

此外，您不应忘记检查您的用户是否已获得授权，使用与主页上相同的方法（如授权 cookie）。

# python - Python：将 Varbinary 类型时间戳转换为 unix 时间戳

> ID：15132418
> 
> 赞同：0
> 
> 时间：2013-02-28T09:54:11.087
> 
> 标签：python, mysql, timestamp, unix-timestamp

我有一个将时间戳存储在 varbinary 列中的 mysql 数据库，我的目标是将其转换为 unix 时间戳，以便我可以在两个时隙之间计算经过时间。

```
+---------+------------+-------------------+----------------+--------------------------+
| some_id | some_name  | user_registration | some_count     | some_value_yes_no        |
+---------+------------+-------------------+----------------+--------------------------+
|  some_id | some_user | 20091129060140    |           2685 |                        1 |
+---------+------------+-------------------+----------------+--------------------------+ 
```

这里的 user_registration 是 mysql varbinary(14)，假设在连接并提取这些数据后，我将 user_registration 存储在 python 端的一个变量中，

```
...
    timestamp = row['user_registration'] 
```

如何将其转换为 unix 时间戳，以便我可以在另一个时间戳之间进行时间差。我查看了[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)但我找不到任何这样的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:08:43.983

您可以先将其转换为 datetime 对象，然后使用 time 模块转换为 Unix 时间。

```
import datetime
import time

user_reg_time = datetime.datetime.strptime("20091129060140", "%Y%M%d%H%m%S")
epochs_time = time.mktime(user_time_reg.timetuple()) 
```

顺便说一句，如果您只需要比较时间，则实际上不需要转换为 Unix 时间；Python 有一个内置的“timedelta”对象。这也可以：

```
import datetime
import time

user_reg_time = datetime.datetime.strptime("20091129060140", "%Y%M%d%H%m%S")
if datetime.datetime.now() - user_reg_time > datetime.timedelta(weeks=4):
    print "User was registered more than 4 weeks ago" 
```

您可以在 Python 官方文档中获取有关[timedelta的更多信息。](http://docs.python.org/2/library/datetime.html#datetime.timedelta)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:59:51.127

```
>>> import time
>>> 
>>> date_str = "20091129060140"
>>> time_tuple = time.strptime(date_str, "%Y%m%d%H%M%S")
>>> timestamp = time.mktime(time_tuple)
>>> 
>>> print timestamp
1259470900.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:18:36.350

如果你得到字符串，它将如下所示：

```
from datetime import datetime
datetime.strptime(timestamp, '%Y%m%d%H%M%S'); 
```

# linux - 当前线程执行的共享对象文件路径

> ID：15132424
> 
> 赞同：0
> 
> 时间：2013-02-28T09:54:31.243
> 
> 标签：linux, shared-libraries

有没有办法获取当前正在由线程执行的 .so 的文件路径/文件名？该程序是用 C++ 编写的，在 64 位 Linux 3.0 机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:58:43.807

您可以顺序读取（从您的进程内部）文件`/proc/self/maps`以获取当前进程的内存映射（包括共享对象的映射）。

然后你可以得到你的程序计数器（或调用者的程序计数器）并找到它在哪个段中。也许`backtrace`或[GCC builtin_return_address](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)是相关的。

您也可以使用该`dladdr`功能。

请参阅[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)、[backtrace(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html)、[dladdr(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dladdr.3.html)手册页以及[此答案](https://stackoverflow.com/a/15129154/841108)。

### 附加物

当使用[sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html) with发送信号时，您可以从信号处理程序获取程序计数器`SA_SIGINFO`。`sa_sigaction`函数指针获得一个，`ucontext_t`您可以从中获得程序计数器寄存器（使用机器相关的 C 代码）。那你就可以处理了。

^(我建议详细了解 GCC 正在做什么)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:59:38.387

我认为关闭的事情是获取您的进程加载的所有共享库的列表。您可以使用`pmap`或来做到这一点`lsof`。

# javascript - FB Like 对话框没有消失

> ID：15132425
> 
> 赞同：0
> 
> 时间：2013-02-28T09:54:33.937
> 
> 标签：javascript, html, facebook-like

喜欢一个页面时，我遇到了奇怪的行为。Like-dialog 过去可以正确地发布在liker 的墙上，但现在由于某种原因它不再起作用了。发送按钮工作正常。

我的 html 头部有所有 og-meta 标记，FB 调试器会找到有关该站点的所有正确信息。以下是按钮功能的关键行：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
...
<meta property="og:title" content="Suuri Journalistipalkinto" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://suurijournalistipalkinto.fi/fi/kilpailu/" />
<meta property="og:image" content="http://suurijournalistipalkinto.fi/img/aanesta_like.jpg" />
<meta property="og:site_name" content="Suuri Journalistipalkinto" />
<meta property="og:description" content="Suuri Journalistipalkinto on jaettu Suomessa vuodesta 2001\. Palkinnolla tuetaan ja edistetään hyvää journalismia. Se jaetaan joka vuosi kolmessa palkintoluokassa, palkinnon perusteena on jokin merkittävä journalistinen teko palkinnon julkistusta edeltäneen vuoden aikana." />
<meta property="fb:app_id" content="199611810178732" /> 
```

在身体里：

```
<div id="fb-root"></div>
<script>
(function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "http://connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

// Additional JS functions here
window.fbAsyncInit = function() {
    FB.init({
        appId      : '199611810178732', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : false  // parse XFBML
    });
... 
```

在页脚中：

```
<fb:like href="http://suurijournalistipalkinto.fi/fi/kilpailu/" send="true" width="450" show_faces="false" font="arial"></fb:like> 
```

如果有人遇到类似的情况，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:16:30.743

试试这个脚本。这可能会帮助你...

```
<div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script> 
```

插件代码：

```
 <div class="fb-like" data-href="http://suurijournalistipalkinto.fi/fi/kilpailu/" data-send="true" data-width="450" data-show-faces="true"></div> 
```

# iphone - 我创建新的配置文件想在 xcode 项目中更新它

> ID：15132431
> 
> 赞同：0
> 
> 时间：2013-02-28T09:55:03.197
> 
> 标签：iphone, ios

我用苹果帐户中的新设备 ID 更新了我的配置文件。我下载了新的配置文件，但在新建时我的新配置文件没有更新。任何人都可以提供一些我可以更新我的配置文件的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:58:14.937

您可以`Xcode Organizer->Provisioning profiles`在设备选项卡部分打开并删除所有配置文件并刷新它，并且会出现新的配置文件，不要忘记查看它们是否有`status valid profiles`. 确保您也为旧的配置文件请求清洁钥匙串。您可以按照本教程[逐步配置配置文件](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:25:12.557

您需要在 Target 和 Project 部分中选择 Provisioning profile。请按照以下提到的步骤操作：

1.  您登录苹果开发者“会员中心”
2.  您添加了设备的 UDID
3.  您转到配置配置文件部分并编辑了您的配置文件。选中它旁边的复选标记
4.  您引用了您的页面并下载了新的个人资料
5.  现在，您在 Project 和 Target 中都选择了这个新配置文件。

在 Project 和 Target 中选择配置文件很重要。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:56:54.317

首先从您的 xCode 中删除旧配置文件。现在双击新配置文件，该配置文件将在 xCode 中更新

祝一切顺利 ！！！

# haskell - Haskell Parsec 出现多个表达式的奇怪问题

> ID：15132433
> 
> 赞同：0
> 
> 时间：2013-02-28T09:55:05.183
> 
> 标签：haskell, parsec

这是我认为不应该引起任何问题但出于某种原因会引起任何问题的代码？

```
 program = expr8
        <|> seqOfStmt  

    seqOfStmt = 
        do list <- (sepBy1 expr8 whiteSpace)
            return $ if length list == 1 then head list else Seq list 
```

关于“列表”不在范围内，我得到 3 个错误？出了什么问题可能很明显，但我不知道为什么

如果有任何替代方案，我非常想听听他们的意见！

在此先感谢， 肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:06:01.767

最后一行使用制表符进行缩进，而其他行仅使用空格。

您在编辑器中将制表符设置为四个空格，但 ghc 使用八个字符制表位（就像终端一样）。

因此，您的`return`行被解析为上一行的延续，并且`list`尚未在范围内。

解决此问题的一种简单方法是避免使用制表符：仅使用空格。

* * *

一旦你解决了这个问题，你的下一个错误可能是一个类型错误：`head list`并且`Seq list`有不同的类型（除非你`head`因为某种原因重新定义了）。如果列表仅包含一个元素，则不清楚为什么要以不同方式处理列表。

# postgresql - 简单 UPDATE 查询中的语法错误

> ID：15132438
> 
> 赞同：6
> 
> 时间：2013-02-28T09:55:15.053
> 
> 标签：postgresql

我有这个查询（PostgreSQL 9.1）：

```
=> update tbp set super_answer = null where packet_id = 18;
ERROR:  syntax error at or near "=" 
```

我不明白。我这里真的无语了。

```
 Table "public.tbp"
    Column    |          Type          | Modifiers 
--------------+------------------------+-----------
 id           | bigint                 | not null
 super_answer | bigint                 | 
 packet_id    | bigint                 | 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T10:15:05.490

原来我复制了一些白色的 unicode 字符，而 Postgres 不喜欢它。在 Python 控制台中：

```
>>> u'update "tbp" set "super_answer"=null where "packet_id" = 18'
u'update "tbp" set\xa0"super_answer"=null where "packet_id" = 18' 
```

生活有时会很奇怪。

# hadoop - Pig-0.10.0：CSVLoader 无法转换为 org.apache.pig.StoreFuncInterface

> ID：15132440
> 
> 赞同：0
> 
> 时间：2013-02-28T09:55:19.357
> 
> 标签：hadoop, apache-pig

我似乎无法弄清楚我要去哪里错了。该脚本非常适用于 PigStorage，但为我提供了 CSVLoader 的 ClassCastException。

我检查了文档，但没有帮助。

这是堆栈跟踪：

```
Pig Stack Trace
---------------
ERROR 1200: Pig script failed to parse: 
<file pig_script.pig, line 15, column 0> pig script failed to validate: java.lang.ClassCastException: org.apache.pig.piggybank.storage.CSVLoader cannot be cast to org.apache.pig.StoreFuncInterface
org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1000: Error during parsing. Pig script failed to parse: 
<file pig_script.pig, line 15, column 0> pig script failed to validate: java.lang.ClassCastException: org.apache.pig.piggybank.storage.CSVLoader cannot be cast to org.apache.pig.StoreFuncInterface
at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1597)
at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1540)
at org.apache.pig.PigServer.registerQuery(PigServer.java:540)
at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:970)
at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:386)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
at org.apache.pig.Main.run(Main.java:555)
at org.apache.pig.Main.main(Main.java:111)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:59:21.947

如果没有您的 pig 脚本，这是一个猜测，但是您是否尝试在 STORE 语句中使用 CSVLoader？

[CSVLoader](http://pig.apache.org/docs/r0.9.2/api/org/apache/pig/piggybank/storage/CSVLoader.html)没有实现[StoreFuncInterface](http://pig.apache.org/docs/r0.9.2/api/org/apache/pig/StoreFuncInterface.html)，这是您想要用来存储结果的任何东西所必需的。CSVLoader 用于 LOAD 语句。

您可能需要[CSVExcelStorage](http://pig.apache.org/docs/r0.9.2/api/org/apache/pig/piggybank/storage/CSVExcelStorage.html)，因为它确实实现了接口。上一个链接也详细说明了用法：

```
STORE x INTO '<destFileName>'
USING CSVExcelStorage(['<delimiter>' [,{'YES_MULTILINE' | 'NO_MULTILINE'} [,{'UNIX' | 'WINDOWS' | 'UNCHANGED'}]]]); 
```

# vb.net - 桌面应用程序 vb.net 中带有提醒信功能的通知

> ID：15132442
> 
> 赞同：0
> 
> 时间：2013-02-28T09:55:27.690
> 
> 标签：vb.net, vb.net-2010

我是 Vb.net 中桌面应用程序的新手。我想显示通知，它具有提醒我的信函功能，因此它将在 1 天（或其他）后显示。所以现在我正在使用后台工作人员来显示通知，但是我应该使用什么来处理提醒我的信。有 Windows 服务，但如何使用它来显示通知，因为服务不与 UI 组件交互。

那么如何使用提醒信功能。

或者你还有什么其他解决方案......！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:18:07.333

尝试这个：

```
Dim notif As New NotifyIcon()
notif.Visible = True
notif.Icon = New Icon("C:\image1.ico")
notif.ShowBalloonTip(2000, "ALARM", "Remember to take your pills", ToolTipIcon.Info) 
```

请参阅MSDN 的[高级使用](http://support.microsoft.com/kb/903898/en-us)。

# javascript - Javascript无法在函数内调用函数

> ID：15132444
> 
> 赞同：-4
> 
> 时间：2013-02-28T09:55:35.847
> 
> 标签：javascript, jquery

我有以下 javascript 代码：

```
$("form").submit(function() {
    $(':radio').each(function() { // loop through each radio button    
        //Code to check for radio button selected - Works
    });   
    //A 
}); 
```

代码运行良好。但是，如果添加如下代码代替 //A 则会出现错误，即 trim() 未定义。但我正在使用上面的其他 jquery 函数，它们正在工作。我也无法从位置//A调用任何函数（用户定义）。

```
var textboxes = $('input:text');
textboxes.each(function() {    
    attrval = $(this).attr("val");
    attrval =  trim(attrval);  // Error Line    
}); 
```

这里的范围有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:58:36.343

这是执行该`trim()`功能的语法：

`$.trim(' your string ');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:00:09.433

我想你应该打电话

```
$.trim(attrval) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:00:18.567

你可能想要这样做：

```
 var textboxes = $('input:text');
  textboxes.each(function() {    
  attrval = $(this).attr("val").trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:59:58.667

你也可以使用纯javascript：

```
attrval.trim(); 
```

`trim()`自 Javascript 1.8.1 以来存在：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

或者你可以使用上面提到的 jQuery：

```
$.trim( attrval ); 
```

# android - 没有封闭的实例 .. 是可访问的

> ID：15132448
> 
> 赞同：0
> 
> 时间：2013-02-28T09:55:44.577
> 
> 标签：android, instance

我有这个错误的代码： ![在此处输入图像描述](../Images/043afdfc2cc775ecfa6a6e2515d7b30d.png)

我试图将这些类更改为静态，但只允许公开、抽象和最终。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:58:56.670

对于从片段到活动的通信，您需要使用片段回调，直接您无法访问，请使用此[链接](http://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:01:46.747

我猜“onTextChanged”覆盖了 EditText 方法，所以“this”是当前上下文中的 EditText。您的父类名称是 StartActivity，因此您可以使用 StartActivity.this 访问 StartActivity 实例。

但我们在这里看不到您的 KartyListFragment 来自哪里。您可能需要展示更多代码才能获得更好的答案。

# c# - formcollection如何访问html表单关联数组

> ID：15132450
> 
> 赞同：3
> 
> 时间：2013-02-28T09:55:52.617
> 
> 标签：c#, arrays, associative-array

我尝试在 c# 中访问关联数组。该数组按帖子发送到我的 c# mvc Web 应用程序。

例如html表单

```
 <Input Name="myArray[hashKey1]" value="123">
 <Input Name="myArray[hashKey2]" value="456"> 
```

在 c# 中，我需要键和值 - 也许使用数据字典？！

```
 [HttpPost]
    public ActionResult Index(FormCollection collection)
    {
    Dictionary<string, string> = KEY, VALUE

     ...
    } 
```

我希望你能关注我：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:25:22.447

是的你可以; 但您需要指定 POST 的方法。

这不起作用：

```
<form id="frmThing" action="@Url.Action("Gah", "Home")">
    <input id="input_a" name="myArray[hashKey1]" value="123" />
    <input id="input_b" name="myArray[hashKey2]" value="456" />

    <input type="submit" value="Submit!"/>
</form> 
```

这样做：

```
<form id="frmThing" action="@Url.Action("Gah", "Home")" method="POST">
    <input id="input_a" name="myArray[hashKey1]" value="123" />
    <input id="input_b" name="myArray[hashKey2]" value="456" />

    <input type="submit" value="Submit!"/>
</form> 
```

编辑：要实际访问 C# 中的详细信息，在您的示例中，您将执行以下操作之一：

```
String first = collection[0];
String secnd = collection[1]; 
```

或者

```
String first = collection["myArray[hashKey1]"];
String secnd = collection["myArray[hashKey2]"]; 
```

甚至：

```
foreach (var item in collection) {
    string test = (string)item;
} 
```

编辑二：

这是一个技巧，您可以使用它来获得您想要看到的行为。首先，定义一个扩展方法：

```
public static class ExtensionMethods
{
    public static IEnumerable<KeyValuePair<string, string>> Each(this FormCollection collection)
    {
        foreach (string key in collection.AllKeys)
        {
            yield return new KeyValuePair<string, string>(key, collection[key]);
        }
    }
} 
```

然后在您的操作结果中，您可以执行以下操作：

```
public ActionResult Gah(FormCollection vals)
{
    foreach (var pair in vals.Each())
    {
        string key = pair.Key;
        string val = pair.Value;
    }

    return View("Index");
} 
```

# php - 如何在特定时间刷新 div 块

> ID：15132461
> 
> 赞同：-1
> 
> 时间：2013-02-28T09:56:40.657
> 
> 标签：php, jquery

如何在特定时间刷新 div 块，以便可以在浏览器中看到数据库中所做的更改。这样，我不必每次都按**F5来查看更改。**

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:57:55.503

您可以使用`setInterval`或`setTimeout`允许在周期性时间后调用函数的 javascript 方法。

`setInterval(function(){ },2000);`其中 2000 是以毫秒为单位的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:03:35.393

setTimeout（表达式，超时）；超时后运行代码/函数一次。

setInterval（表达式，超时）；以间隔运行代码/函数，它们之间的超时长度。

例子：

```
var intervalID = setInterval(alert, 1000); // Will alert every second.
// clearInterval(intervalID); // Will clear the timer.

setTimeout(alert, 1000); // Will alert once, after a second. 
```

jsfiddle 上的示例 [http://jsfiddle.net/fengelz/Svx3n/](http://jsfiddle.net/fengelz/Svx3n/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:08:38.743

试试这个：

```
// Delay is the time in milliseconds
var delay = 60000;

var refreshId = setInterval(function () {
    $('#YourDivID').fadeOut("slow").load('Recent_updates.php').fadeIn("slow");
}, delay); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:58:19.113

使用 jquery，通过 ajax 调用加载 div 块的内容。然后在javascript中使用定时器函数每隔xx秒重新加载ajax加载函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:02:25.573

你的分区：

```
<div id="divId">...</div> 
```

jQuery代码：

```
var auto_refresh = setInterval(
function ()
{
   $('#divId').load('your_file.html');
}, 1000) // every 1000 milliseconds 
```

当您想停止循环刷新时，只需调用

```
crealInterval(auto_refresh); 
```

# delphi - 如何在 Delphi 中提取本地计算机站点本地和链接本地 IPv6 地址？

> ID：15132463
> 
> 赞同：1
> 
> 时间：2013-02-28T09:56:49.493
> 
> 标签：delphi

我目前正在尝试开发一个显示 IPv6 流量的应用程序。我对如何提取本地站点和本地计算机的链接本地地址感到困惑。任何指导将不胜感激。

我正在使用的 delphi 中 IPv6 数据包的结构是：

```
type
 PIPV6HeaderPtr = ^TIPV6Header;
 TIPV6Header = packed record
 ip6_flow       : DWORD;    // 4  bits = version #,// 8  bits = Trafic class,// 20 bits = flow label
ip6_len        : Word;//Cardinal;    // Payload length
//ip6_next       : Cardinal;    // Next Header
  ip6_next       : Byte;    // Next Header
ip6_hops       : Byte;         // Hop Limit
  h_source  : IN6_ADDR;
 h_dest    : IN6_ADDR;
end;

//
// IPv6 extension header format
//
 type
  PIPV6EXTPTR = ^TIPV6EXT;
  TIPV6EXT = packed record
  ip6_next       : Byte;
  ip6_len        : Byte;
  ip6_data       : array[0..1] of Byte;

End;

 type
    PIPV6EXT_FRAGPTR = ^TIPV6EXT_FRAG;
    TIPV6EXT_FRAG    = packed record
    ip6_next       : Byte;
   ip6_reserved   : Byte;
   ip6_offlg      : Word;
   ip6_ident      : DWORD;
 End; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:38:40.237

有关什么是站点本地地址和链接本地地址以及它们如何工作的说明，请参见以下说明：

[IPv6 教程 – 第 6 部分：站点本地地址和链路本地地址](http://4sysops.com/archives/ipv6-tutorial-part-6-site-local-addresses-and-link-local-addresses/)

您可以使用 Win32 API[`GetAdapterAddresses()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915.aspx)函数来获取本地机器的 IPv6 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:39:59.693

我找到了另一种使用 WSAIoctl 获取地址的方法。我在下面添加我的代码。

使用 WinSock2；// 在网络上广泛可用

```
 function TForm1.GetIPUsingIoctlMethod(var sInt: string): Boolean;
   var
     s: TSocket;
     wsaD: TWSADATA;
     NumInterfaces: Integer;
     BytesReturned, SetFlags: u_long;
     pAddrInet: SOCKADDR_IN;
     pAddrString: PCHAR;
     PtrA: pointer;
     Buffer: Array[0..20] Of  INTERFACE_INFO_EX;
     i: Integer;
     Local_IpList : TStringList ;
     addrList : LPSOCKET_ADDRESS_LIST ;
     in6 :  PSockAddr;
     protoInfo : WSAProtocol_Info;
     text : Array[1..46] Of Char;
     Buffer1 : DWORD;
     Str : String;

 begin
      result := False;                               // Initialize
      sInt := '';
Try

    WSAStartup($0101, wsaD);                      // Start WinSock
                                                  // You should normally check
                                                  // for errors here :)

    {Create a WSA Socket}
    //s := WSASocketA(AF_INET6,SOCK_STREAM, IPPROTO_IP, nil, 0, 0);

    s:= Socket(AF_INET6,SOCK_STREAM,IPPROTO_IP);

    //s := Socket(AF_INET6, SOCK_STREAM, 0);         // Open a socket
    if (s = INVALID_SOCKET) then exit;

    try                                           // Call WSAIoCtl
      PtrA := @bytesReturned;

      if (WSAIoCtl(s, SIO_ADDRESS_LIST_QUERY, nil, 0, @Buffer, SizeOf(Buffer), PtrA, nil, nil)<> SOCKET_ERROR)
        then
          begin                                       // If ok, find out how
                                                   // many interfaces exist

                Result   := True;
                addrList := LPSOCKET_ADDRESS_LIST(@Buffer);

                DebugLog(' i = ' + IntToStr(addrList.iAddressCount),0);
               // NumInterfaces := BytesReturned div SizeOf(INTERFACE_INFO);

                Local_IpList := TStringList.Create ;
                for i := 0 to addrList.iAddressCount - 1 do        // For every interface
                begin
                   If ( addrList.Address[i].lpSockaddr.sin_family = AF_Inet6) Then
                   Begin
                      in6 := PSockaddr(@addrList.Address[i].lpSockaddr);
                      Buffer1 := SizeOf(Text);
                      //protoInfo.
                      FillChar(Text,SizeOf(Text),#0);
                      If WSAAddressToString(addrList.Address[i].lpSockaddr,addrList.Address[i].iSockaddrLength,
                                          nil,@text,Buffer1) <> 0 Then
                      Begin
                          debuglog('err1 = ' + SysErrorMessage(WSAGetLastError),0);
                      end;
                      Str := Text;
                      DebugLog(' Addr cnt =' + IntToStr(i) + ' = ' + Str,0);
                      Buffer1 := 0;
                      FillChar(Text,SizeOf(Text),#0);
                      //in6.
                      //DebugLog('ip = ' + );
                      //IN6_IS_ADDR_LINKLOCAL
                   end;
                end;

      end
      Else
          sInt := SysErrorMessage(WSAGetLastError);
    except
    end;
  //
  // Close sockets
  //
    CloseSocket(s);
    WSACleanUp;
 Except
 End; 
```

结尾;

debugLog 只是一种写入文本文件的方法。

# c++ - 未定义对 .. 的引用 - mingw - winxp - eclipse juno

> ID：15132468
> 
> 赞同：-2
> 
> 时间：2013-02-28T09:57:01.497
> 
> 标签：c++, c, windows-xp, mingw, eclipse-juno

正如标题所说，我不断收到未定义的错误引用，但我不知道为什么..

我有一个主例程，其中包含我要使用的函数的标头，因此包含在定义该函数的 cpp 文件中。我还包括了项目设置的路径

我知道我应该发布代码，但我不允许这样做，但仍然希望我能得到一些解决此错误的提示。

提前致谢

```
UART_write(UARTvar, LVL);  //This is where I call the function

int UART_write(int uart, const char* var);//Declaration in the header

int UART_write(int uart, const char* var)
{
return (int)1;//just for testing
} 
```

未定义对“UART_write”的引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:12:19.543

如果您有以下项目结构：

**标头.h：**

```
#ifndef _HEADER_H_
#define _HEADER_H_

int UART_write(int uart, const char* var);

#endif 
```

**主.c：**

```
#include "header.h"

int main()
{
    ...
    UART_write(UARTvar, LVL);
    ...
} 
```

所以请确保您没有`_HEADER_H_`在任何其他地方定义，因为在这种情况下`UART_write()`原型不会包含在 build.xml 中。

还请检查`UART_write()`原型是否未放置在`#if`or`#ifdef`和`#endif`预处理器命令之间。

最后一个，您可以通过在标题中`#error "This code is compiled"`的原型之前添加来检查上面的内容。`UART_write()`如果这部分代码被编译，那么你会得到编译错误`This code is compiled`。

# vim - 绕过vim缺少“插入一个字符”命令的正确用法是什么？

> ID：15132469
> 
> 赞同：13
> 
> 时间：2013-02-28T09:57:01.510
> 
> 标签：vim, insert

这对 SO 来说可能不是一个好问题，但*多年来*一直困扰着我，而 Google 也不知道，所以让我们试一试，因为它确实会影响我每周的编程工作：

我经常发现自己处于缺少一个字符的情况，例如“=”而不是“==”，缺少空格，用引号/括号括起来等。

**那么，为什么*vim*没有正确的命令来插入单个字符呢？**我的意思是，支持计数和重复`.`。

什么是基本原理，我缺少什么正确的使用模式，这使得这个功能变得不必要？我似乎一直都需要它，所以一定有一些原因它还没有被添加到原来的*vi*中。

我知道添加一个简单的基本键绑定之类`:nmap <Space> i_<Esc>r`的很容易，但是在新环境中进行快速编辑时，这是相当不方便的，而且这个简单的版本无论如何都不能正常工作。

PS。如果实际上有一个*默认*绑定只插入一个字符，*总共两次*击键并保持在命令模式，类似于`r`用两次击键替换一个字符，我承诺第一个答案是 100 的赏金，它告诉我它是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:29:41.643

对我来说，`i` `<Char>` `Esc`（没有修饰键的 3 次击键）非常短且内置。您已经发现了自定义映射，可以将其减少到两次击键；我也从你的开始，随着时间的推移，它变得更加先进以满足我的需要，并添加了映射变体以在光标位置或之后插入单个空格。

据推测，没有内置命令，因为键空间（特别是对于单个未移位键）*非常*有限，这个不能证明这样的主要空间是合理的，并且任何多键替代方案（如以 开头的 Vim `g`）将是在效率方面毫无价值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T10:37:48.430

*不*，没有默认的键绑定（`:viusage`正常模式命令的完整列表）。

如果你想知道为什么，恐怕你得问问 Bram Moolenaar 或 Bill Joy。

但这里有一个想法：对光标`r`下`s`的字符进行处理。他们所做的相当有限且是一维的，但是您的命令将如何工作？

它会像在当前字符*之前*`i`插入那个单个字符还是会像在当前字符*之后*插入那个单个字符一样工作？*`a`*

 **因为“插入文本”可以在当前字符*之前*或*之后*`i`发生，所以我们有而且`a`，而且很明显，我们需要*两个*命令来快速插入单个字符。

这使问题变得更加复杂。

我们应该使用什么键，因为所有的字母键都已经被占用了？`<C-something>`? `<C-i>`被占用，`<C-a>`也被占用。`<C-S-i>`并且`<C-S-a>`都是不实用的并且不能保证在任何地方都可以工作，那又如何？`<M-something>`? 它也不会在任何地方都有效。也许是两个字符的映射？但是哪一个并遵循什么助记逻辑？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-21T09:50:59.797

我也为这个问题而苦苦挣扎，我在互联网上的某个地方（我不记得在哪里）找到了这样做的人：

`:nnoremap s :exec "normal i".nr2char(getchar())."\e"<CR>`

它并不完美，因为它不支持计数，但`.`我现在使用它可以重复它，所以也许其他用户也会对此感到满意。**

# iphone - 使用百分比转义 iphone 编码字符串的问题

> ID：15132472
> 
> 赞同：-2
> 
> 时间：2013-02-28T09:57:05.607
> 
> 标签：iphone, ios, ipad, nsstring, nsurl

这是我的字符串。

```
NSString *str=@"A & B"; 
```

现在我将其转换为 NSUTF8StringEncoding。

```
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"str: %@", str); 
```

空格替换为 %20，但 & 不替换为 %26。

nslog 显示

```
str: A%20&%20B 
```

这也行不通

```
NSString *str=@"(A) & (B)";
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"str: %@", str); 
```

nslog 显示

```
str: (A)%20&%20(B) 
```

我需要这个，因为我必须将它作为 webservice 中的参数值传递。任何人都有这个想法。请帮我解决这个问题。很好的答案将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:09:15.533

你可以用它`CFURLCreateStringByAddingPercentEscapes()`来做到这一点：

```
NSString *string = ...;
NSString *encodedString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)string, NULL, CFSTR("!*'();:@&=+$,/?%#[]"), kCFStringEncodingUTF8)); 
```

# atg - 无法使用 Weblogic App Server 为 ATG 10.1.2 运行 ./cim.sh

> ID：15132475
> 
> 赞同：0
> 
> 时间：2013-02-28T09:57:10.457
> 
> 标签：atg

大家好，我已经在我的 Linux 机器上安装了 ATG 10.1.2 以及 CRS 、 Search 、 CSC 。我正在使用 weblogic 作为我的应用程序服务器。但是，当我尝试运行 ./cim.sh 时，出现如下错误

它说它无法找到类 weblogic.utils.classloaders.ClassFinder 。

我已将环境变量设置如下：

```
export JAVA_HOME=/home/install/mediaStore/jdk1.6.0_41
export PATH=$JAVA_HOME/bin:/home/install/software/ant/apache-ant-1.8.2/bin:/home/install/Oracle11gR2/install/product/11.2.0/dbhome_1/bin:$PATH
export ANT_HOME=/home/install/software/ant/apache-ant-1.8.2
export PATH=$PATH:ANT_HOME/bin
export DYNAMO_ROOT=/home/install/mediaStore/ATG/ATG10.1.2
export DYNAMO_HOME=$DYNAMO_ROOT/home
export ATGJRE=$JAVA_HOME/bin/java
export CLASSPATH=/home/install/Oracle11gR2/install/product/11.2.0/dbhome_1/jdbc/lib/ojdbc6.jar:$CLASSPATH
export WEBLOGIC_HOME=/home/install/mediaStore/Weblogic
export WEBLOGIC_SERVER=$WEBLOGIC_HOME/wlserver_12.1 
```

[install@JJPLRHEL01 bin]$ ./cim.sh 以下已安装的 ATG 组件用于启动： ATGPlatform 版本 10.1.2 安装在 /home/install/mediaStore/ATG/ATG10.1.2

```
Error      Thu Feb 28 15:21:35 IST 2013    1362045095625   /       **atg.nucleus.NucleusResources->cantResolveComponent : Unable to resolve component /atg/dynamo/service/validation/JavaxValidatorFactory**        java.lang.NoClassDefFoundError: weblogic/utils/classloaders/ClassFinder
Error      Thu Feb 28 15:21:35 IST 2013    1362045095625   /               at javax.validation.Validation.byProvider(Validation.java:166)
Error      Thu Feb 28 15:21:35 IST 2013    1362045095625   /       ***Caused by :java.lang.ClassNotFoundException: weblogic.utils.classloaders.ClassFinder***
Error      Thu Feb 28 15:21:35 IST 2013    1362045095625   /               at 
```

任何帮助或意见或指导将不胜感激。

谢谢，阿齐姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:34:51.260

我将以下内容添加到我的类路径中

/home/install/mediaStore/Weblogic/wlserver_12.1/server/lib/wls-api.jar

此外，目前 ATG 10.1.2 不支持 Weblogic 12.1。因此，您将无法使用它配置 CRS。

# iphone - 如何确定键盘是否隐藏子视图...？

> ID：15132478
> 
> 赞同：4
> 
> 时间：2013-02-28T09:57:22.003
> 
> 标签：iphone, ios, objective-c, uiscrollview, keyboard

我有一个滚动视图，上面有多个视图。所有这些视图上都有文本字段，一旦单击，键盘就会弹出。在某些情况下，键盘可能会隐藏这个子视图，我想确定这是否可以提前计算出来。如果是的话，我该怎么做..？`scrollRectToVisible`of方法可以`UIScrollView`在这里用于任何用途.. 吗？您可以查看随附的图片以进行进一步说明。感谢您的任何想法..

**编辑：** 这些子视图是动态绘制的，所以我无法确定和硬编码。

![在此处输入图像描述](../Images/b0951261dc69cd2aa9a6204a9230a743.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:05:57.747

在横向模式下：

iPad 高度：768 像素。

键盘高度：352 像素。

这意味着键盘 x 坐标：0.0 和 y 坐标：416

每当您的控件 y 坐标大于 416 时。请理解当键盘弹出时它会被隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:38:52.127

注册以下通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardDidChangeFrame:)
                                                 name:UIKeyboardDidChangeFrameNotification
                                               object:nil]; 
```

确保你处理这个：

```
- (void)keyboardDidChangeFrame:(NSNotification *)notification
{
    CGRect keyboardEndFrame;
    [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];
    CGRect keyboardFrame = [self.view convertRect:keyboardEndFrame fromView:nil];

    // Add your code to check if the keyboard is hiding your views.
    // CGRectIntersectsRect should help you here.
    // For each view you are worried about hiding, run CGRectIntersectsRect to check
    // if an intersection occurs. If it does, then you can
    // move your view using UIScrollView's setContentOffset: animated: method.

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:09:37.927

是的，您需要将子视图向上移动一点，使其可见，您可以使用此动画将其移动到任何点。只需通过图层和目标点。并且一旦用户按下键盘上的返回，再次将其移到上一点:)

```
-(void)moveLayer:(CALayer*)layer to:(CGPoint)point
{
    // Prepare the animation from the current position to the new position
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.fromValue = [layer valueForKey:@"position"];
    animation.duration = 0.2;

    animation.toValue = [NSValue valueWithCGPoint:point];

    // Update the layer's position so that the layer doesn't snap back when the animation completes.
    layer.position = point;

    // Add the animation, overriding the implicit animation.
    [layer addAnimation:animation forKey:@"position"];
} 
```

# magento - Magento：试图覆盖 Mage_Adminhtml_Block_Widget_Form

> ID：15132479
> 
> 赞同：2
> 
> 时间：2013-02-28T09:57:25.490
> 
> 标签：magento, rewrite, block, adminhtml

我试图在我的扩展程序中覆盖 Mage_Adminhtml_Block_Widget_Form 但我似乎无法让它工作。

我的配置看起来像这样

```
<global>
   <blocks>
      <adminhtml>
         <rewrite>
             <widget_form>Baldwin_TestModule_Block_Adminhtml_Widget_Form</widget_form>
        </rewrite>
      </adminhtml>
   </blocks>
</global> 
```

我的覆盖类（在目录中：Baldwin/TestModule/Block/Adminhtml/Widget/Form.php）看起来像这样

```
class Baldwin_TestModule_Block_Adminhtml_Widget_Form
extends Mage_Adminhtml_Block_Widget_Form
{
    /**
     * Set Fieldset to Form
     *
     * @param array $attributes attributes that are to be added
     * @param Varien_Data_Form_Element_Fieldset $fieldset
     * @param array $exclude attributes that should be skipped
     */
    protected function _setFieldset($attributes, $fieldset, $exclude=array())
    {
        die("test");
    }
} 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:15:04.993

你到底期待什么？通常由具体的小`Mage_Adminhtml_Block_Widget_Form`部件**扩展**，您不能通过重写来更改继承树。仅当表单小部件直接在某处实例化时，您的重写才有效，例如：

```
Mage::getBlock('adminhtml/widget_form'); 
```

不幸的是，您将不得不*覆盖*其中的类`code/local/Mage/Adminhtml/Block/Widget/Form.php`或为您的要求找到另一个不改变核心类的解决方案（首选！）

# google-chrome-extension - 用于在现有 Excel 工作表上写入用户数据的 chrome 扩展

> ID：15132480
> 
> 赞同：0
> 
> 时间：2013-02-28T09:57:27.037
> 
> 标签：google-chrome-extension

我创建了一个带有用户表单的 chrome 扩展，其中包含 chrome 中现有书签文件夹的列表以及通过文本框进行的用户评论。

是否可以借助 chrome 扩展将用户表单数据写入本地驱动器中的现有 excel 工作表？

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:44:53.937

不允许 chrome 扩展访问本地文件（[请参阅此处](http://productforums.google.com/forum/#!topic/chrome/aj4X_sA44JI)）。

为了解决这个问题，我建议你构建一个小 webapp，将它托管在你的本地主机或服务器上，然后使用 XMLHttpRequest 将你的用户数据发送到你的 webapp，然后你可以将它写在现有的 Excel 表上。

# shell - Shell Script调用vim编辑器，获取exit方法

> ID：15132481
> 
> 赞同：2
> 
> 时间：2013-02-28T09:57:28.030
> 
> 标签：shell, vim, debian, exitstatus

我即将编写一个 shell 脚本来编辑一些文件。

我这样做是这样的：

```
/usr/bin/vim $file 
```

现在我想问一下vim的退出状态。如果用户关闭并保存了更改，则执行某些操作（:wq 或 :x），或者如果没有更改而关闭（:q, :q!），请执行其他操作

```
if [ vi-exit-status=wq ] ; then
    # do this
else # vi didn't save anything
    # do that
fi 
```

我怎样才能做到这一点？当我调用 vi 来创建一个新文件并退出它而不保存（：q！）然后我通过检查状态

```
echo $? 
```

答案是 0。如果我通过 vi/vim 保存某些内容或创建文件，它也是 0。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:02:29.620

退出状态不会告诉你用户在 vim 中做了什么。也许您可以比较文件之前和之后的时间戳，看看它是否被写入？

这对我有用：

```
echo Edit me > editme.txt
time1=`stat -c%y editme.txt`
vim editme.txt
time2=`stat -c%y editme.txt`
if [ "$time1" != "$time2" ]; then
    echo You saved it.
else
    echo No change.
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:03:48.167

退出状态与仅当应用程序失败时不同。

在你的情况下，我建议你：

1.  将当前 md5sum 保存到变量中
2.  打开vim
3.  将当前 md5sum 保存到变量中
4.  比较两者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:17:20.880

影响 Vim 退出状态的唯一方法是使用`:cquit`，但用户通常不会这样做。

你更想要的是文件是否被 Vim 修改过的指示。您可以通过检查编辑前后的*修改时间来做到这一点，就像在这个 Bash 片段中一样：*

```
EDIT=/path/to/file.txt
MODTIME=$(stat -c %Y "$EDIT")
"$EDITOR" "$EDIT" || { echo 2>&1 "Unclean exit of editor; aborting!"; exit $?; }
NEWMODTIME=$(stat -c %Y "$EDIT")

if [ $NEWMODTIME -eq $MODTIME ]; then
    echo "No changes done."
    exit 0
fi 
```

# mysql - 选择 MySQL 中同一临时表的不同列的计数

> ID：15132490
> 
> 赞同：2
> 
> 时间：2013-02-28T09:57:46.947
> 
> 标签：mysql, sql, sql-server

假设我有一个表（在 MySQL 中），例如：

```
CREATE TEMPORARY table IF NOT EXISTS tbl  
(   
    REF_REQ_ID int AUTO_INCREMENT PRIMARY KEY,
    FunctionalArea varchar(200),
    Industry varchar(200)
);

INSERT INTO tbl
SELECT 1, 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 2, 'HR Jobs', NULL UNION ALL
SELECT 3, NULL, 'HR related Jobs' UNION ALL
SELECT 4, NULL, 'IT related Jobs' UNION ALL
SELECT 5, NULL, NULL UNION ALL
SELECT 6, 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 7, 'HR Jobs', NULL UNION ALL
SELECT 8, NULL, 'HR related Jobs' UNION ALL
SELECT 9, 'HR Jobs', NULL; 
```

我想在单列（`distinct`值）中加入和组合两列并排序`NoOfJobs`，我该如何实现？

**预期结果**

```
JobTitle         NoOfJobs
HR Jobs           3
IT related Jobs   3
HR related Jobs   2
IT Jobs           2 
```

如果您有任何疑问或问题内容不合适，请发表评论。

数据库是 MySQL，我知道如何在 SQL Server 中实现这一点。

只需运行此查询（对于 MS SQL Server）：

```
DECLARE  @tbl  table
(   
    REF_REQ_ID int IDENTITY(1,1),
    FunctionalArea varchar(200),
    Industry varchar(200)
)

INSERT INTO @tbl
SELECT 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 'HR Jobs', NULL UNION ALL
SELECT NULL, 'HR related Jobs' UNION ALL
SELECT NULL, 'IT related Jobs' UNION ALL
SELECT NULL, NULL UNION ALL
SELECT 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 'HR Jobs', NULL UNION ALL
SELECT NULL, 'HR related Jobs' UNION ALL
SELECT 'HR Jobs', NULL

SELECT 
    JobTitle As JobTitle,
    COUNT(REF_REQ_ID) As NoOfJobs
FROM    
    (SELECT 
        FunctionalArea As JobTitle,
        REF_REQ_ID
    FROM @tbl
    UNION 
    SELECT 
        Industry As JobTitle,
        REF_REQ_ID
    FROM @tbl)t
WHERE JobTitle IS NOT NULL
GROUP BY JobTitle
ORDER BY NoOfJobs desc 
```

它会给我预期的结果，但不幸的是 MySQL 不支持`UNION`同一张表（临时）。

**MySQL 读者**：我怎样才能达到预期的效果？

**SQL Server 读者**：做同样的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:12:46.293

```
select * from (
select FunctionalArea as JobTitle,count(1) as NoOfJobs
from tbl
where FunctionalArea IS NOT NULL
group by FunctionalArea
UNION ALL
select Industry as JobTitle,count(1)as NoOfJobs
from tbl
where Industry IS NOT NULL
group by Industry) t
order by t.NoOfJobs desc 
```

结果

```
JobTitle         NoOfJobs
HR Jobs           3
IT related Jobs   3
HR related Jobs   2
IT Jobs           2 
```

[演示在这里](http://sqlfiddle.com/#!8/8156f/7)

注意：我在 Demo sqlfiddle 中使用了不同的表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:43:04.553

我正在发布答案，它给了我预期的结果，非常感谢所有人。

我又添加了一张**临时表**（不是**真实表**）

```
CREATE TEMPORARY table IF NOT EXISTS tbl  
(   
    REF_REQ_ID int AUTO_INCREMENT PRIMARY KEY,
    FunctionalArea varchar(200),
    Industry varchar(200)
);

TRUNCATE TABLE tbl;

INSERT INTO tbl
SELECT 1, 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 2, 'HR Jobs', NULL UNION ALL
SELECT 3, NULL, 'HR related Jobs' UNION ALL
SELECT 4, NULL, 'IT related Jobs' UNION ALL
SELECT 5, NULL, NULL UNION ALL
SELECT 6, 'IT Jobs', 'IT related Jobs' UNION ALL
SELECT 7, 'HR Jobs', NULL UNION ALL
SELECT 8, NULL, 'HR related Jobs' UNION ALL
SELECT 9, 'HR Jobs', NULL;

CREATE TEMPORARY table IF NOT EXISTS tbl_industry
(   
    REF_REQ_ID int,
    Industry varchar(200)
);

TRUNCATE TABLE tbl_industry;

INSERT INTO tbl_industry
SELECT 
    REF_REQ_ID,
    Industry 
FROM tbl
WHERE Industry IS NOT NULL;

SELECT 
    JobTitle As JobTitle,
    COUNT(REF_REQ_ID) As NoOfJobs
FROM    
    (SELECT 
        FunctionalArea As JobTitle,
        REF_REQ_ID
    FROM tbl
    UNION 
    SELECT 
        Industry As JobTitle,
        REF_REQ_ID
    FROM tbl_industry)t
WHERE JobTitle IS NOT NULL
GROUP BY JobTitle
ORDER BY NoOfJobs desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:25:14.017

您不能在同一查询中多次引用 TEMPORARY 表。例如，以下内容不起作用：

```
mysql> SELECT * FROM temp_table, temp_table AS t2;
ERROR 1137: Can't reopen table: 'temp_table' 
```

[参考](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)

@dan1111 解决方案看起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:14:01.103

最简单的解决方案是创建一个真实表而不是临时表。

只要你记得在完成后删除表，并且只要表名不与其他表名冲突，那么它不会有任何区别。

[这个问题](https://stackoverflow.com/questions/4078873/accessing-a-temporary-table-multiple-times-in-mysql)对此进行了很好的讨论，并且还显示了另一种解决方法（尽管在我看来，另一种解决方法比仅使用真实表格要混乱得多）。

**更新：**另一种可能性是重新设计，以便联合发生在临时表之前：临时表可以填充联合操作的结果。这是否有意义取决于您的其余代码。

# c# - 如何防止我的对话框多次打开？

> ID：15132493
> 
> 赞同：1
> 
> 时间：2013-02-28T09:57:54.180
> 
> 标签：c#, wpf, mvvm

我在两个选项卡中有一个数据网格。因此，当第二个选项卡单击时，它应该打开一个过滤器窗口（不是 a `<popup>`，它是 a `<window>`）。我这样做如下。

```
if (tabControl1.SelectedIndex == 1)  {      
     DashboardFilterView filterWindow = new DashboardFilterView();   
     filterWindow.ShowDialog();  } 
```

当我单击窗口的关闭按钮时，它会关闭。

**问题**：

关闭弹出窗口后，如果单击当前选项卡中的数据网格行，将再次显示弹出窗口。

我怎样才能防止这种情况不止一次发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:38:51.073

由于`tabControl1_SelectionChanged`即使单击网格行也会触发事件，因此我添加了一个检查以确认此事件是否从选项卡发生。

`e.OriginalSource is TabControl`解决了这个问题。

```
 private void tabControl1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (e.OriginalSource is TabControl)
            {
                if (tabControl1.SelectedIndex == 0)
                {
                    // Do something               
                }
                else if (tabControl1.SelectedIndex == 1)
                {  
                    DashboardFilterView filterWindow = new DashboardFilterView();
                    filterWindow.ShowDialog();         
                }
            }

        } 
```

# time - cmd bat 文件 - 知道指令执行时间

> ID：15132505
> 
> 赞同：1
> 
> 时间：2013-02-28T09:58:25.477
> 
> 标签：time, cmd

我有一个包含许多说明的 bat 脚本文件。其中一个需要很多时间，我想知道执行需要多少时间。

在 Unix 中，使用前缀 'time' 非常简单。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:13:48.687

最好的解决方案是使用命令

```
Measure-Command {copy *.* d:\dossier\} 
```

# asp.net-mvc - ASP.net MVC - 身份验证 cookie 和重定向

> ID：15132513
> 
> 赞同：0
> 
> 时间：2013-02-28T09:58:37.960
> 
> 标签：asp.net-mvc, session-cookies

我正在寻找正确方向的一点...

我们有一个 MVC 站点，有各种虚拟目录，它们都指向相同的代码，例如

```
https://www.x.com/dir1
https://www.x.com/dir2 
```

由于 URL 的“内容”，不同的虚拟目录部分用于商业原因，部分用于控制站点的外观。

这些站点被锁定以使用表单身份验证进行访问，我正试图找出一个稍微难以捉摸的问题。

用户使用 url 'dir1' 登录站点，验证良好，调用 SetAuthCookie。

我们的代码在整个站点的 OnActionExecuting 上运行 - 它获取登录用户并确定他们应该访问的虚拟目录（每个用户一个），如果它们位于错误的 URL 中，将重定向它们，例如（简化代码）：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if (Authenticated && UserIsNotInCorrectDirectory())
    {
        filterContext.Result = new RedirectResult("https://www.x.com/dir2");
    }
} 
```

我遇到的问题是 - 如果我启动一个新的浏览器（此时使用 firefox 来查看 cookie）并执行以下操作：

1.  使用 'dir1' url 登录网站。
2.  我通过了身份验证——我可以看到包含我们的身份验证 cookie 的 set-cookie http 标头。此响应还将我重定向到“dir2”。
3.  在随后的页面上，当我查看 cookie 时，auth cookie 不存在 - 这就是问题所在。

为了增加我的困惑，如果我再次打开登录页面（相同的浏览器，会话未关闭），然后再试一次，它就可以了。有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:07:47.217

我敢打赌，您的`OnActionExecuting`过滤器会妨碍您的登录表单，并且当您覆盖结果时，您的会话 cookie 会丢失。如果此代码驻留在属性中，我会尝试从您的`Login`操作中删除该属性，看看是否有效。

# android - 如何根据与相机相关的顶点对 OpenGL 对象应用一些排序

> ID：15132517
> 
> 赞同：0
> 
> 时间：2013-02-28T09:58:43.680
> 
> 标签：android, opengl-es-2.0, rajawali

在 OpenGL 中处理透明度时我遇到了很多麻烦。目前我正在使用此处找到的 Rajawali 库示例 2000PlanesExample.java ...

[https://github.com/MasDennis/Rajawali](https://github.com/MasDennis/Rajawali)

它可能在库中不可用，但我确信 OpenGL 中有功能。如何以及在哪里可以/应该对顶点进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:05:14.630

在 OpenGL 中处理是一个相当大的问题，看看[这篇 OpenGL 文章](http://www.opengl.org/wiki/Transparency_Sorting)

# mysql - 在同一台服务器上运行 MySQL 和 PostgreSQL

> ID：15132523
> 
> 赞同：20
> 
> 时间：2013-02-28T09:58:51.937
> 
> 标签：mysql, postgresql, opennms

对于我们的客户，正在运行的应用程序正在使用 MySQL 数据库。但是，此服务器没有监控。我想安装 OpenNMS（使用 PostgreSQL）应用程序来监控解决方案并将陷阱发送到主 NMS 系统。

在同一台服务器上是否有任何问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-28T10:12:14.707

不，没有技术问题。两者都默认为它们侦听的不同端口。

唯一*可能*出现的问题是，与单独的物理机器上的安装相比，每个单独的数据库可能会更慢，因为它们都共享（并争夺）相同的资源（I/O、内存、CPU、网络...... )

# javascript - 如果在 jsp 页面中的 jstl 标记中为 else

> ID：15132526
> 
> 赞同：0
> 
> 时间：2013-02-28T09:59:06.067
> 
> 标签：javascript, jsp, session, jstl

```
<div align="right">
     <b> Connected:</b> <%=(String)session.getAttribute("CONNECTION_DBNAME")%>
     </div> 
```

*   我在jsp页面中有上面的代码
*   最初，会话 CONNECTION_DBNAME 没有任何值。
*   当 CONNECTION_DBNAME 为空时，我需要显示未连接
*   当 CONNECTION_DBNAME 有值时，会打印一些值。
*   我知道可以通过在条件下使用 if else 来实现，但我不知道如何在 jstl 标记中使用 if else。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T14:01:12.217

```
<c:if test="${sessionScope.CONNECTION_DBNAME!= null}"> 
 Connected:${sessionScope.CONNECTION_DBNAME}
</c:if>
<c:if test="${sessionScope.CONNECTION_DBNAME== null}"> 
 NOT CONNECTED
</c:if>

  or 

<c:choose>
 <c:when test="${sessionScope.CONNECTION_DBNAME != null}">
   Connected:${sessionScope.CONNECTION_DBNAME}
 </c:when>  
 <c:otherwise>
  NOT CONNECTED
 </c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:43:55.013

```
<div align="right">
     <b> Connected:</b> <%=(session.getAttribute("CONNECTION_DBNAME")!=null)?(String)session.getAttribute("CONNECTION_DBNAME"): "not connected"%>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T07:18:05.323

[你可以像@PSR](https://stackoverflow.com/users/937892/psr)推荐的那样做同样的事情，只是写得更小一点，使用[三元](/questions/tagged/ternary "显示标记为“三元”的问题")表达式，像这样：

```
${empty sessionScope.CONNECTION_DBNAME ? 'NOT CONNECTED' : 'Connected' + sessionScope.CONNECTION_DBNAME } 
```

或相反；检查`not empty`并交换两个结果的位置..

```
${not empty sessionScope.CONNECTION_DBNAME ? 'Connected' + sessionScope.CONNECTION_DBNAME : 'NOT CONNECTED'} 
```

# ios - 不兼容的指针间转换

> ID：15132527
> 
> 赞同：0
> 
> 时间：2013-02-28T09:59:09.737
> 
> 标签：ios, objective-c, xcode

以下代码生成编译器警告（代码下方）

```
NSUInteger positionat = [_bhkButtons indexOfObject:sender];
BOOL val = (BOOL) [_searchModel.BHkNo objectAtIndex:positionat];
val = !val;

[_searchModel.BHkNo insertObject:val atIndex:positionat]; 
```

不兼容的整数到指针转换'BOOL'（又名'signed char'）到'id'类型的参数

我是Objective-C的新手。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:01:11.990

由于`BOOL`是原始数据类型并且数组接受对象，因此您必须对`BOOL`变量进行装箱/包装。您可以使用`NSNumber`该类，如下所示。

```
[_searchModel.BHkNo insertObject:[NSNumber numberWithBool:val] atIndex:positionat]; 
```

# java - 类扩展不止一个类Java？

> ID：15132528
> 
> 赞同：20
> 
> 时间：2013-02-28T09:59:31.797
> 
> 标签：java, class, inheritance, subclass, multiple-inheritance

我知道一个类可以实现多个接口，但是可以扩展多个类吗？例如，我希望我的课程同时扩展`TransformGroup`我创建的课程。这在Java中可能吗？两个语句都`class X extends TransformGroup extends Y`收到`class X extends TransformGroup, Y`一个错误。如果不可能，为什么？`TransformGroup`扩展`Group`，但我猜它也扩展`Node`了，因为它继承了字段，`Node`并且可以在需要`Node`对象的地方传递。此外，像 Java 中的所有类一样，它们扩展`Object`类。那么为什么不能扩展一个以上的类呢？

[TransformGroup 继承](http://www.cs.indiana.edu/classes/jett/dgerman/2005/html-javadoc/javax/media/j3d/TransformGroup.html)

那么，如果这是可能的，那么正确的方法是什么？如果不是，为什么以及如何解决问题？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-28T10:00:28.550

在 Java 中不允许多重继承。作为设计决策，它被排除在语言之外，主要是为了避免循环依赖。

**场景 1：**正如您所了解的，在 Java 中不可能进行以下操作：

```
public class Dog extends Animal, Canine{

} 
```

**场景 2：**但是以下情况是可能的：

```
public class Canine extends Animal{

}

public class Dog extends Canine{

} 
```

这两种方法的区别在于，第二种方法有一个明确定义的父类或`super`类，而第一种方法中的`super`类是模棱两可的。

考虑是否两者`Animal`都有`Canine`一个方法`drink()`。在第一种情况下，如果我们调用哪个父方法会被调用`Dog.drink()`？在第二种情况下，我们知道只要没有覆盖类方法，调用`Dog.drink()`就会调用它。`Canine``drink``Dog`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T10:02:57.643

不，这在 java 中是不可能的（也许在 java 8 中它会可用）。除了在树中延伸的情况。例如：

```
class A
class B extends A
class C extends B 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T10:14:09.683

在 Java 中，仅针对接口的实现（类）不允许多重继承：

```
interface A extends B, C 
```

例如[MouseInputListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/MouseInputListener.html)扩展了 MouseListener 和 MouseMotionListener

当然，一个类可以实现多个接口：

```
class X implements A, F 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T10:06:06.573

类不能实现多重继承，可以通过接口实现，但类不行。它是由java语言设计的。看看 James gosling 的评论。

> James Gosling 在 1995 年 2 月给出了一个关于为什么 Java 不支持多重继承的想法。
> 
> JAVA 省略了 C++ 中许多很少使用、难以理解、令人困惑的特性，根据我们的经验，这些特性带来的痛苦多于好处。这主要包括运算符重载（尽管它确实有方法重载）、多重继承和广泛的自动强制。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T10:01:13.160

Java中没有多重继承的概念。只能实现多个接口。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-05T18:30:28.923

[![多重继承](../Images/9c618baeb1cf17dd7a6ab742105fa2e4.png)](https://i.stack.imgur.com/AYf7E.png)

假设 B 和 C 正在覆盖继承的方法和它们自己的实现。现在 D 使用多重继承同时继承了 B 和 C。D 应该继承被覆盖的方法。问题是将使用哪个被覆盖的方法？它来自B还是C？这里我们有一个歧义。为了排除这种情况，Java 中没有使用多重继承。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-28T10:06:03.253

java不能支持多重继承，但是你可以这样做

```
class X
{
}
class Y extends X
{
}
class Z extends Y{
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-28T10:03:53.830

Java 没有提供多重继承。
当您说 A 扩展 B 时，这意味着 A 扩展 B 并且 B 扩展 Object。
这并不意味着 A 扩展 B、Object。

`class A extends Object`
`class B extends A`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-11T06:37:14.100

给出的大多数答案似乎都假设我们希望继承的所有类都是由我们定义的。

但是，如果我们没有定义其中一个类，即我们无法更改其中一个类继承自什么，因此无法使用已接受的答案，那么会发生什么？

那么答案取决于我们是否至少定义了一个类。`A`即在我们想要继承的类列表中存在一个类，它`A`是由我们创建的。

除了已经接受的答案之外，我还提出了这个多重继承问题的另外 3 个实例以及每个实例的可能解决方案。

## 继承类型 1

好吧，假设您想要一个类`C`来扩展类，`A`并且`B`，哪里`B`是在其他地方定义的类，但`A`由我们定义。我们可以做的就是把它`A`变成一个接口，然后类`C`可以`A`在扩展的同时实现`B`。

```
class A {}
class B {} // Some external class
class C {} 
```

变成

```
interface A {}
class AImpl implements A {}
class B {} // Some external class
class C extends B implements A 
```

## 继承类型 2

现在假设你有两个以上的类要继承，同样的想法仍然成立——除了一个类之外的所有类都必须由我们定义。因此，假设我们希望类`A`从以下类继承，`B`, `C`, ...`X`其中`X`是我们外部的类，即在其他地方定义的类。我们应用相同的想法将所有其他类，但最后一个类转换为接口，然后我们可以拥有：

```
interface B {}
class BImpl implements B {}
interface C {}
class CImpl implements C {}
...
class X {}
class A extends X implements B, C, ... 
```

## 继承类型 3

最后，还有一种情况是你只有一堆类要继承，但它们都不是你定义的。这有点棘手，但可以通过使用[委托](https://en.wikipedia.org/wiki/Delegation_pattern)来实现。委托允许一个类`A`伪装成其他类，但是对定义在 中的一些公共方法的`B`任何调用，实际上都是将该调用委托给一个类型的对象并返回结果。这使得课堂成为我所说的`A``B``B``A``Fat class`

这有什么帮助？

嗯，这很简单。您创建一个接口，指定您想要使用的外部类中的公共方法，以及您正在创建的新类中的方法，然后您让新类实现该接口。这听起来可能令人困惑，所以让我更好地解释一下。

最初我们有以下外部类`B`, `C`, `D`, ..., `X`，我们希望我们的新类`A`继承自所有这些类。

```
class B {
    public void foo() {}
}

class C {
    public void bar() {}
}

class D {
    public void fooFoo() {}
}

...

class X {
    public String fooBar() {}
} 
```

接下来我们创建一个接口，该接口`A`公开之前在类 A 中的公共方法以及来自上述类的公共方法

```
interface A {
    void doSomething(); // previously defined in A
    String fooBar(); // from class X
    void fooFoo(); // from class D
    void bar(); // from class C
    void foo(); // from class B
} 
```

最后，我们创建一个`AImpl`实现接口的类`A`。

```
class AImpl implements A {
    // It needs instances of the other classes, so those should be
    // part of the constructor
    public AImpl(B b, C c, D d, X x) {}
    ... // define the methods within the interface
} 
```

你有它！这是一种伪继承，因为类型的对象`A`不是我们开始使用的任何外部类的严格后代，而是公开了一个接口，该接口定义了与这些类中相同的方法。

你可能会问，为什么我们不只是创建一个定义我们想要使用的方法的类，而不是定义一个接口。即*为什么我们没有一个`A`包含我们想要继承的类的公共方法的类？*这样做是为了减少[耦合](https://en.wikipedia.org/wiki/Coupling_(computer_programming))。我们不希望类过去`A`必须过多地依赖于类`A`（因为类往往会发生很多变化），而是要依赖于接口中给出的承诺`A`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-19T05:53:01.693

Java does not allow extending multiple classes.

Let's assume C class is extending A and B classes. Then if suppose A and B classes have method with same name(Ex: method1()). Consider the code:

`C obj1 = new C();` `obj1.method1();` - here JVM will not understand to which method it need to access. Because both A and B classes have this method. So we are putting JVM in dilemma, so that is the reason why multiple inheritance is removed from Java. And as said implementing multiple classes will resolve this issue.

Hope this has helped.

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-10-26T07:00:40.773

您好请注意像真正的工作。

**孩子不能有两个妈妈**

所以在java中，子类不能有两个父类。

# ember-data - 防止单个项目的 Ember Data 批量提交？

> ID：15132531
> 
> 赞同：0
> 
> 时间：2013-02-28T09:59:44.373
> 
> 标签：ember-data

我需要 Ember Data 来批量更新我的一个模型。所以我设置

```
 bulkCommit: true 
```

在`DS.RESTAdapter`. 但现在它甚至使用批量提交来更新单个记录！

这是非常出乎意料的行为。

那么如何修改 Ember Data 以仅在提交*超过 1 个项目*时使用批量提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:42:43.980

这是我现在所做的：

```
 updateRecords: function(store, type, records) {
    var arr;
    arr = records.list;
    if (arr.length === 1) {
      return this.updateRecord(store, type, arr[0]);
    } else {
      return this._super(store, type, records);
    }
  } 
```

这会检查是否`records`由单个项目组成，`updateRecord`然后调用。

`createRecords`并`deleteRecords`相应改变。

# drag-and-drop - 我可以将电子邮件拖放到 gmail 中的侧边栏小工具吗？

> ID：15132532
> 
> 赞同：1
> 
> 时间：2013-02-28T09:59:46.267
> 
> 标签：drag-and-drop, gmail, google-api

我想在 gmail 中制作一个侧边栏小工具，我可以将电子邮件消息拖到该小工具中，并在小工具中获取该消息的链接。

这可以做到吗？

我发现一个关于它的论坛对话没有明确的答案。

# jquery - jquery在选择一个选项时启用提交按钮

> ID：15132537
> 
> 赞同：0
> 
> 时间：2013-02-28T10:00:00.417
> 
> 标签：jquery, jquery-selectors

当用户选择一个选项时，我需要启用提交按钮，这是一个动态数据。我的 HTML：

```
<form method="post" action="xxx" id="member">
    <tr>
        <td>1</td>
        <select name="status">
            <option value="a">aktif</option>
            <option value="l">terkunci</option>
            <option value="b" selected="b">blokir</option>
        </select>
        </td>
        <input type="hidden" name="update_buyer" value="TRUE" />
        <input type="hidden" name="id" value="1" />
        <td>
            <button role="button" data-toggle="modal" data-target="#modal" class="btn btn-danger delete">Delete</button>&nbsp;
            <input type="submit" class="btn btn-primary save" disabled="disabled" value="Save">
        </td>
    </tr>
    </form>
        <form method="post" action="xxx" id="member">
    <tr>
        <td>2</td> 
        <td>
        <select name="status">
            <option value="a" selected="a">aktif</option>
            <option value="l">terkunci</option>
            <option value="b">blokir</option>
        </select>
        </td>
        <input type="hidden" name="update_buyer" value="TRUE" />
        <input type="hidden" name="id" value="2" />
        <td>
            <button role="button" data-toggle="modal" data-target="#modal" class="btn btn-danger delete" data-email="tess@email.com">Delete</button>&nbsp;
            <input type="submit" class="btn btn-primary save" disabled="disabled" value="Save">
        </td>
    </tr>
    </form> 
```

我试试

```
$('select').change(function(){
$('.save').removeAttr('disabled');
} 
```

但它启用所有提交按钮，我只想启用哪个用户点击，而不是所有提交按钮。

也许喜欢

```
$('select').change(function(){
$(this).parent('form').find('.save').removeAttr('disabled');
} 
```

但它不起作用:(我该怎么做？帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:06:37.477

使用`.prop()`：

```
$('select').change(function(){
  $(this).parent().siblings().find('.save').prop('disabled', false);
}); 
```

## 笔记：

你有`same id for both forms`这可能会导致问题并`its invalid`使用这种方式。`ID should be unique`到单个页面上的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:11:05.117

试试这个 -

```
$(document).ready(function(){
  $('select').change(function(){
       $('.save').removeAttr('disabled');        
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:07:02.717

试试这个

```
$('select').change(function(){
 $('.save').prop("disabled", false);
} 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:08:22.317

.parent 方法只会在 DOM 树上向上爬一次，因此只有当表单元素是 select 元素的直接父级时，代码才会起作用，在这种情况下它不是。使用 .parents() 代替。

```
$('select').change(function(){
  $(this).parents('form').find('.save').removeAttr('disabled');
} 
```

另外，请注意，您的第一个选择不在 <td> 内

编辑：其他使用 .parent() 似乎有效的建议恰好利用了您的无效 HTML（没有表格的 tr，未打开的 td 等），它们不适用于正确的 html，要么删除行和列并使用其他元素或建立适当的有效表格（每个表格一个表格）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:08:44.797

你的第二个代码正在工作，但是你有无效的 HTML 标签..检查出来..

[这](http://jsfiddle.net/bipen/TktAC/)是使用您的代码的工作小提琴。

```
$('select').change(function(){
  $(this).parent('form').find('.save').removeAttr('disabled');
});
-^----here 
```

**注意：**我可以看到您在更改功能末尾缺少括号...（不确定是否是错字）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T10:09:05.527

JSFiddle[在这里](http://jsfiddle.net/7vGaQ/1/)

```
$('select').change(function(){
   $(this).parent().children('.save').prop('disabled', false);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T10:11:51.380

为您的每个表单提供不同的 ID 名称。它们都是 id="member"，它们必须是唯一的。不确定这是你的错误。

即使使用相同的 ID，这也对我有用。

```
$('#member select[name=status]').change(function(){
    $('#member input[type="submit"]').removeAttr('disabled');
 }) 
```

# c# - 双向绑定视图的 DependencyProperty 到视图模型的属性？

> ID：15132538
> 
> 赞同：24
> 
> 时间：2013-02-28T10:00:04.700
> 
> 标签：c#, wpf, mvvm, dependency-properties

网络上的多个消息来源告诉我们，`MVVM`视图和视图模型之间的通信/同步应该通过依赖属性发生。如果我理解正确，视图的依赖属性应该使用双向绑定绑定到视图模型的属性。现在，以前也有人问过类似的问题，但没有足够的答案。

在我开始分析这个相当复杂的问题之前，这是我的问题：

**如何将*自定义*视图`DependencyProperty`与视图模型的属性同步？**

在理想的世界中，您只需将其绑定为：

```
<UserControl x:Class="MyModule.MyView" MyProperty="{Binding MyProperty}"> 
```

这不起作用，因为`MyProperty`不是`UserControl`. 嗬！我尝试了不同的方法，但没有一个被证明是成功的。

一种解决方案是定义一个基类，`UserControlEx`具有必要的依赖属性以使上述工作正常。然而，这很快变得非常混乱。还不够好！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-18T10:37:39.770

如果您想在 XAML 中执行此操作，您可以尝试使用样式来实现。

这是一个例子：

```
<UserControl x:Class="MyModule.MyView"
             xmlns:local="clr-namespace:MyModule">
    <UserControl.Resources>
        <Style TargetType="local:MyView">
            <Setter Property="MyViewProperty" Value="{Binding MyViewModelProperty, Mode=TwoWay}"/>
        </Style>
    </UserControl.Resources>
    <!-- content -->
</UserControl> 
```

在您的情况下，两者都`MyViewProperty`将`MyViewModelProperty`被命名`MyProperty`，但我使用不同的名称只是为了清楚什么是什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T11:03:22.523

我使用 Caliburn.Micro 将 ViewModel 与 View 分开。尽管如此，它可能在 MVVM 中以相同的方式工作。我猜 MVVM 也将视图的`DataContext`属性设置为 ViewModel 的实例。

## 看法

```
// in the class of the view: MyView
public string ViewModelString // the property which stays in sync with VM's property
{
    get { return (string)GetValue(ViewModelStringProperty); }
    set
    {
        var oldValue = (string) GetValue(ViewModelStringProperty);
        if (oldValue != value) SetValue(ViewModelStringProperty, value);
    }
}

public static readonly DependencyProperty ViewModelStringProperty =
    DependencyProperty.Register(
        "ViewModelString",
        typeof(string),
        typeof(MyView),
        new PropertyMetadata(OnStringValueChanged)
        );

private static void OnStringValueChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
{
    // do some custom stuff, if needed
    // if not, just pass null instead of a delegate
}    

public MyView()
{
    InitializeComponent();
    // This is the binding, which binds the property of the VM
    // to your dep. property.
    // My convention is give my property wrapper in the view the same
    // name as the property in the VM has.
    var nameOfPropertyInVm = "ViewModelString"
    var binding = new Binding(nameOfPropertyInVm) { Mode = BindingMode.TwoWay };
    this.SetBinding(SearchStringProperty, binding);
} 
```

## 虚拟机

```
// in the class of the ViewModel: MyViewModel
public string ViewModelStringProperty { get; set; } 
```

请注意，这种实现完全缺乏`INotifyPropertyChanged`接口的实现。您需要正确更新此代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-12T06:53:08.547

假设您已经在 View 中定义了 DependencyProperty“DepProp”，并希望在 ViewModel 中使用完全相同的值（它实现了 INotifyPropertyChanged 但不实现 DependencyObject）。您应该能够在 XAML 中执行以下操作：

```
<UserControl x:Class="MyModule.MyView"
         xmlns:local="clr-namespace:MyModule"
             x:Name="Parent">
    <Grid>
        <Grid.DataContext>
            <local:MyViewModel DepProp="{Binding ElementName=Parent, Path=DepProp}"/>
        </Grid.DataContext>
    ...
    </Grid>
</UserControl> 
```

# jquery - 从标签中获取文本并将其隐藏而不影响标签内的另一个标签

> ID：15132540
> 
> 赞同：0
> 
> 时间：2013-02-28T10:00:09.730
> 
> 标签：jquery, text, each, loops

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:02:56.543

使用`.wrap()`jQuery 方法会有所帮助。

```
$('ul#nav li').each(function(i){
  var a = $(this).find('a').wrap('<span style="display:none;" />');
}); 
```

也`.wrapInner()`将起作用。

```
<script type="text/javascript">

    $(function()
    {
        $('ul#nav li').each(function(i){
            var a = $(this).find('a').wrapInner('<span style="display:none;" />');
        });
    });

</script>

<ul id="nav">
    <li><a href="">asd</a></li>
    <li><a href="">12312</a></li>
    <li><a href="">asdas</a></li>
    <li><a href="">123123123</a></li>
    <li><a href="">asdda56s4da56s4</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:06:50.690

将以下内容应用于锚标记的 css。

```
text-indent: -9999px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T11:22:11.927

给锚点透明颜色。这将隐藏文本。

```
color:transparent 
```

`!important`如果它首先不起作用，您也可以使用with style

# ember.js - 路由 + DS 与 ember-1.0.0-rc.1 + ember.data-11 [demo + tutorial + source]

> ID：15132541
> 
> 赞同：2
> 
> 时间：2013-02-28T10:00:09.913
> 
> 标签：ember.js, ember-data

在哪里可以找到最新 ember-1.0.0-rc.1 + ember.data-11 版本的教程 + 演示 + 源？入门级。

我尝试了很多教程，但我发现的都是过时的:(

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:14:56.657

[https://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)值得一看。它是最新的，旨在提供一个完整的端到端示例，使用由一个简单的 Rails 3.2 应用程序支持的 ember 和 ember-data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:58:24.490

ember 文档和开发源是我唯一确定的信息来源，但官方示例仍在更新以正常工作。Ember 数据更加遥不可及——请注意他们在常见问题上的警告，不要将其用于生产。

如前所述，有一个非常出色的 peepcode 视频，但它是在 RC1 大规模更改前几周发布的，所以它只有在使用 pre-RC1 库时才能工作。我无法想象 peepcode 生产者对他们的培训如此迅速地几乎完全过时感到非常高兴。

至少 RC1 应该是打破一切的最后一个重大变化，所以尽量向前而不是向后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:39:18.277

我最喜欢的绝对是：[http](http://trek.github.com/) ://trek.github.com/了解它所涉及的所有细节。我建议你坐下来读一读，一边喝杯好咖啡，让你继续前进。

# c++ - DLL 包装器和 DLL 之间的区别

> ID：15132542
> 
> 赞同：6
> 
> 时间：2013-02-28T10:00:12.860
> 
> 标签：c++, windows, dll

我不知道什么是 DLL 包装器。有人可以解释一下
1) 什么是 DLL 包装器？
2) 它与 DLL 有何不同？
3）如何使用它？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T10:39:00.317

当程序使用 DLL 时，它是这样的：

*   应用程序加载 foo.dll
*   foo.dll 中的应用程序调用函数
*   foo.dll 执行函数并将值返回给应用程序

使用包装 DLL，会发生这种情况：

*   应用程序加载 foo.dll（不知道也不关心 foo.dll 实际上是包装器，并且原来的 DLL 已重命名为 foo_original.dll）
*   foo.dll 加载 foo_original.dll
*   foo.dll 中的应用程序调用函数
*   foo.dll 将调用转发给 foo_original.dll
*   foo_original.dll 执行函数并将值返回给 foo.dll
*   foo.dll 向应用程序返回值

这使 DLL 包装器有机会检查/记录应用程序对原始 DLL 的所有调用，以及修改在两者之间传递的数据的机会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:19:05.950

DLL 包装器调用另一个 dll 来提供所需的功能。出于简单性或兼容性的原因，它可能会也可能不会提供其特殊的 API。 [这是一个](http://www.svenberra.net/wraptutor.zip)展示如何制作包装 DLL 的教程。在这个特定的教程中，DirectX 9 中的一些类被封装并用于在 Blitz3D 窗口中渲染茶壶。

# cocoa - 从 NSCalendar 获取一个月的第一天

> ID：15132547
> 
> 赞同：8
> 
> 时间：2013-02-28T10:00:22.600
> 
> 标签：cocoa, cocoa-touch, calendar, nscalendar, nsdatecomponents

我有一个方法的这个子集，需要获取当前月份的第一天。

```
NSDate *today = [NSDate date];  // returns correctly 28 february 2013
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = 1;
NSDate *dayOneInCurrentMonth = [gregorian dateByAddingComponents:components toDate:today options:0]; 
```

`dayOneInCurrentMonth`然后打印出来`2013-03-01 09:53:49 +0000`，下个月的第一天。

如何获得当月的第一天？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T10:06:00.350

您的逻辑是错误的：您没有将日期设置为 1，而是在当前日期添加了一天。

尝试这样的事情：

```
NSDate *today = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [gregorian components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit) fromDate:today];
components.day = 1;

NSDate *dayOneInCurrentMonth = [gregorian dateFromComponents:components]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T22:57:32.467

从给定日期到第一个的简单方法：

```
NSDate *first = [gregorian dateBySettingUnit:NSCalendarUnitDay value:1 ofDate:date options:0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:06:08.260

你想要`[NSCalender dateFromComponents:]`：

```
NSDate *dayOneInCurrentMonth = [gregorian dateFromComponents:components]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-20T15:33:40.890

获取上个月的第一个和最后一个日期的简单方法是：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
NSDateComponents *comp = [gregorian components:(NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitDay ) fromDate:[NSDate date]];

//TO GET PREVIOUS MONTH LAST DAY
[comp setMonth:[comp month]];
[comp setDay:1];
NSDate *tDateMonth = [gregorian dateFromComponents:comp];
NSLog(@"LAST DAY OF PREVIOUS MONTH ;  %@", tDateMonth);

//TO GET PREVIOUS MONTH FIRST DAY
[comp setMonth:[comp month]-1];
[comp setDay:3];
NSDate *td = [gregorian dateFromComponents:comp];
NSLog(@"FIRST DAY OF PREVIOUS MONTH ;  %@", td); 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-05T10:07:06.493

```
NSDate *startDate = nil;
[[NSCalendar currentCalendar] rangeOfUnit:NSCalendarUnitMonth startDate:&startDate interval:NULL forDate:date];

return startDate; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-30T02:46:50.347

通过创建新变量会消耗内存，最好使用日期格式化程序来获取当月的第一天

```
today = [NSDate date];

firstDayDateFormatter = [[NSDateFormatter alloc] init];
[firstDayDateFormatter setDateFormat:@"01-MM-yyyy"];
dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
[dateFormatter setLocale:[NSLocale localeWithLocaleIdentifier:@"en_US"]];
firstDayOfTheMonth = [mdfDateFormat dateFromString:[firstDayDateFormatter stringFromDate:today]]; 
```

# jquery - Yii + renderPartial + window.location

> ID：15132553
> 
> 赞同：0
> 
> 时间：2013-02-28T10:00:43.283
> 
> 标签：jquery, redirect, yii, render

我刚刚创建了一个视图，它使用“renderPartial”加载到 ctonroller 中，然后集成到主视图中。不幸的是，我的 JQuery onSuccess 没有重定向页面：

```
$this -> widget('bootstrap.widgets.TbButton', array(
            'buttonType' => 'ajaxSubmit',
            'icon' => 'ok',
            'url' => Yii::app() -> createUrl('hr/userDeployment/createShipping'),
            'label' => 'Submit',
            'ajaxOptions' => array('success' => 'function(data){
                    Loading.show();
                    var obj = $.parseJSON(data);
                    if(obj.status=="success"){
                    $("#newUserDeployment").modal("hide");
                    window.location.replace(obj.url);
} else {
                    Loading.hide();
                    $("#userDeployment-form-error-div").show();
                    $("#userDeployment-form-error-div").html("");
                    var $inputs = $("#user-time-form :input");
                    $inputs.each(function() {
                    $(this).removeClass("error");
                    $(this).closest(\'div[class^="control-group"]\').addClass("success validating");
});
                    for (var p in obj) {
                    if(document.getElementById(p)) {
                    $("#"+p).closest(\'div[class^="control-group"]\').removeClass("success");
                    $("#"+p).closest(\'div[class^="control-group"]\').addClass("error");
}
                    $("#userDeployment-form-error-div").append(obj[p]  + "<br/>");
}
}
}'),
    )); 
```

这是按钮的代码。在主视图上，成功中的重定向工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:02:58.197

检查[renderPartial](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)的第四个参数是否设置为`true`. 它是`processOutput`打开 Javascript 的变量。

# ios - 如何在没有登录的情况下在 ios 中显示 facebook 新闻提要？

> ID：15132557
> 
> 赞同：0
> 
> 时间：2013-02-28T10:01:01.437
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我需要在 ios 中显示 facebook 提要。例如，我需要在视图中显示“ [https://www.facebook.com/Google ”的提要。](https://www.facebook.com/Google)

我点击了[这个链接](https://stackoverflow.com/questions/10599278/facebook-feeds-on-ios-app)，但这里的解决方案只显示整页？有没有其他方法可以单独显示提要？不要求登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:07:18.213

要从 Facebook 页面获取提要，您可以使用[FacebookGraphAPI](https://www.facebook.com/login.php?next=https://developers.facebook.com/docs/reference/api/group/)。
您无需登录即可获取提要，您可以使用以下网址从页面获取提要：

[https://graph.facebook.com/Google/feed?access_token=YourAcessToken](https://graph.facebook.com/Google/feed?access_token=YourAcessToken) 。

将“YourAccessToken”替换为真正的访问令牌，您可以通过在[developers.facebook.com](http://developers.facebook.com)上注册您的应用程序来获得该令牌。
这将返回一个 JSON，您可以解析并获取提要。

问候

**注意**：在这里，在此示例 URL 中，我使用“Google”作为您要求的 facebook 页面名称，您可以将其更改为您需要从中获取提要的页面名称。

# node.js - 如何将所有数据从一个连接转发到另一个连接（NodeJS）？

> ID：15132558
> 
> 赞同：0
> 
> 时间：2013-02-28T10:01:01.467
> 
> 标签：node.js, forwarding

我希望服务器监听来自 100.0.0.0:3000 的连接。当连接发生时，它应该打开一个到 200.0.0.0:3000 的新连接，并保持从第一个连接到第二个连接的准确数据转发。

请注意，这不是 HTTP。

我不是 NodeJS 连接实用程序的专家，所以我的尝试是一个充满错误的混乱，根本无法正常工作（如果我愿意，我可以告诉你）。我确信有一种简单的方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:04:54.907

查看此代理：[https](https://github.com/gonzalo123/nodejs.tcp.proxy/blob/master/proxy.js) ://github.com/gonzalo123/nodejs.tcp.proxy/blob/master/proxy.js 。

真的很简单。做的工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:55:47.423

您可以使用[HAProxy](http://haproxy.1wt.eu/)或[IPTables](https://serverfault.com/questions/140622/how-can-i-port-forward-with-iptables)来转发端口。

# html - twitter bootstrap IE9，导航崩溃不会将其余内容向下推

> ID：15132559
> 
> 赞同：0
> 
> 时间：2013-02-28T10:01:03.237
> 
> 标签：html, css, twitter-bootstrap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:16:52.507

您可以尝试添加这个 css 类：

```
.nav-collapse.collapse.in {
height: auto !important;
} 
```

因为当你下拉导航时，bootstrap 会给它一个固定的初始宽度。

# c# - 自定义 PropertyGrid 控件

> ID：15132560
> 
> 赞同：1
> 
> 时间：2013-02-28T10:01:04.047
> 
> 标签：c#, .net, winforms

我正在尝试自定义一个属性，如果我单击省略号按钮 [...]，将显示一个新的对话框表单。不幸的是，表格不会显示。您能否检查以下代码并告知我哪里出错了？

```
using System.ComponentModel;
using System.Drawing.Design;
using System.Windows.Forms;
using System.Windows.Forms.Design;
using System;

namespace Test01
{
    /// <summary>
    /// Description of MainForm.
    /// </summary>
    public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
        }

        void MainFormLoad(object sender, EventArgs e)
        {
            Form form = new Form();

            propertyGrid1.SelectedObject = new MyType();

        }
    }

    class MyType
    {
        private string bar;

        [Editor(typeof(FooEditor), typeof(UITypeEditor))]
        [TypeConverter(typeof(ExpandableObjectConverter))]
        public string Bar
        {
            get { return bar; }
            set { bar = value; }
        }
    }

    [Editor(typeof(FooEditor), typeof(UITypeEditor))]
    [TypeConverter(typeof(ExpandableObjectConverter))]
    class Foo
    {
        private string bar;
        public string Bar
        {
            get { return bar; }
            set { bar = value; }
        }
    }
    class FooEditor : UITypeEditor
    {
        public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
        {
            return UITypeEditorEditStyle.Modal;
        }
        public override object EditValue(ITypeDescriptorContext context, System.IServiceProvider provider, object value)
        {
            IWindowsFormsEditorService svc = provider.GetService(typeof(IWindowsFormsEditorService)) as IWindowsFormsEditorService;
            Foo foo = value as Foo;
            if (svc != null && foo != null)
            {
                using (FooForm form = new FooForm())
                {
                    form.Value = foo.Bar;
                    if (svc.ShowDialog(form) == DialogResult.OK)
                    {
                        foo.Bar = form.Value; // update object
                    }
                }
            }
            return value; // can also replace the wrapper object here
        }
    }
    class FooForm : Form
    {
        private TextBox textbox;
        private Button okButton;
        public FooForm() 
        {
            textbox = new TextBox();
            Controls.Add(textbox);
            okButton = new Button();
            okButton.Text = "OK";
            okButton.Dock = DockStyle.Bottom;
            okButton.DialogResult = DialogResult.OK;
            Controls.Add(okButton);
        }

        public string Value
        {
            get { return textbox.Text; }
            set { textbox.Text = value; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:07:34.233

您的编辑器使用该`Foo`类型（如果`value`不是`Foo`，则不会显示对话框），但您创建 的实例`MyType`，它包含一个`Bar`类型的属性，`string`然后您的`FooEditor`.

要尝试您的代码如何工作，您应该将属性`Bar`从更改`string`为`Foo`：

```
class MyType
{
    private Foo bar = new Foo();

    [Editor(typeof(FooEditor), typeof(UITypeEditor))]
    [TypeConverter(typeof(ExpandableObjectConverter))]
    public Foo Bar
    {
        get { return bar; }
        set { bar = value; }
    }
} 
```

**示例**
让我们看两个示例。在第一个中，您编辑`Attribute`已应用 的属性（然后您的编辑器更改属性本身的值）：

这是您将在 中编辑的类`PropertyGrid`，我删除了`Foo`该类，因为对于此示例无用：

```
class MyType
{
    private string bar;

    [Editor(typeof(MyStringEditor), typeof(UITypeEditor))]
    [TypeConverter(typeof(ExpandableObjectConverter))]
    public string Bar
    {
        get { return bar; }
        set { bar = value; }
    }
} 
```

这是将编辑您的`Bar`属性的编辑器。实际上它适用于任何类型的属性`string`：

```
class MyStringEditor : UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        var svc = (IWindowsFormsEditorService)provider.GetService(typeof(IWindowsFormsEditorService));
        string text = value as string;
        if (svc != null && text != null)
        {
            using (FooForm form = new FooForm())
            {
                form.Value = text;
                if (svc.ShowDialog(form) == DialogResult.OK)
                {
                    return form.Value;
                }
            }
        }

        return value;
    }
} 
```

现在再举一个例子，编辑器不会更改属性值本身，而是更改该属性的属性值（编辑器应用于`MyType.Bar`（类型的`Foo`）属性，但它会更改.`Value``Foo`

`Bar`让我们再次为您的属性引入一个复杂类型：

```
class Foo
{
    private string _value;
    private object _tag; // Unused in this example

    public string Value
    {
        get { return _value; }
        set { _value = value; }
    }

    public object Tag
    {
        get { return _tag; }
        set { _value = _tag; }
    }
} 
```

更改`MyType`类以发布我们编写的复杂类型的一个属性，注意`EditorAttribute`现在使用特定于该`Foo`类型的新编辑器：

```
class MyType
{
    private Foo bar = new Foo();

    [Editor(typeof(FooEditor), typeof(UITypeEditor))]
    [TypeConverter(typeof(ExpandableObjectConverter))]
    public Foo Bar
    {
        get { return bar; }
        set { bar = value; }
    }
} 
```

最后我们为类型编写编辑器`Foo`。请注意，此编辑器只会更改 property 的值，不会触及`Foo.Value`暴露的其他属性：`Foo`

```
class FooEditor : UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        var svc = (IWindowsFormsEditorService)provider.GetService(typeof(IWindowsFormsEditorService));
        Foo foo = value as Foo;
        if (svc != null && foo != null)
        {
            using (FooForm form = new FooForm())
            {
                form.Value = foo.Value;
                if (svc.ShowDialog(form) == DialogResult.OK)
                {
                    // Updates the value of the property Value
                    // of the property we're editing. 
                    foo.Value = form.Value;
                }
            }
        }

        // In this case we simply return the original property
        // value, the property itself hasn't been changed because
        // we updated the value of an inner property
        return value;
    }
} 
```

最后注意事项：在我们有来自 的更新值的`if`块中，属性（应用编辑器的地方）不会改变，但我们将更新它包含的实例的属性。大致相当于写这样的东西：`svc.ShowDialog()``Form``Bar``Value``Foo`

```
MyType myType = new MyType();
myType.Bar.Value = form.Value; 
```

如果我们只是为属性返回一个新值（如前面的示例），则`Tag`属性的旧值将丢失，如下所示：

```
MyType myType = new MyType();
Foo foo = new Foo();
foo.Value = form.Value;
myType.Bar = foo; 
```

你能看到差别吗？无论如何，这将是一个教程而不是答案......

请注意，示例未经测试，我只是在这里写的，我只是想公开这个概念，而不是提供一个可靠的示例。

**参考**

在这里您可以找到有用资源的简短列表：

*   关于如何工作的[综合示例](http://msdn.microsoft.com/en-us/library/ms171840.aspx)`UITypeEditor`
*   文档的主要来源`PropertyDescriptor`始终是 MSDN，但[在这里](http://www.codeproject.com/Articles/5988/Unleash-PropertyGrid-with-Dynamic-Properties-and-G)您可以找到一个非常简短的示例。
*   如果您只需要本地化属性名称，您可以[在 SO 上查看此条目](https://stackoverflow.com/questions/12193770/how-to-refresh-localized-attributes-in-propertygrid)。

# java - 从要打印的文件中读取布尔值

> ID：15132566
> 
> 赞同：1
> 
> 时间：2013-02-28T10:01:22.987
> 
> 标签：java, readfile, numberformatexception

我在从 .txt 文件中读取布尔值的主类上遇到了问题...运行我的程序给了我这个消息，尽管编译它并没有给出任何错误

> 阅读课程单元... 1 阅读如果选修课程... false 阅读科目成绩... 0阅读课程年份... 3 阅读学期... 2 阅读课程编号... IT 412a 实习阅读描述性标题... 2 阅读课程单元... falsejava.lang.NumberFormatException：对于输入字符串：“false”
> 
> ```
> at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
> at java.lang.Integer.parseInt(Integer.java:492)
> at java.lang.Byte.parseByte(Byte.java:148)
> at java.lang.Byte.parseByte(Byte.java:174)
> at ChecklistDisplay.readChecklistInfo(ChecklistDisplay.java:74)
> at ChecklistDisplay.run(ChecklistDisplay.java:20)
> at ChecklistDisplay.main(ChecklistDisplay.java:8) 
> ```

这是我的 .txt 文件的示例

> 4,2,IT 423,信息系统规划/信息资源管理,3,false,0 年,学期,课程号,单元,(科目采取?),科目等级

```
System.out.println("Reading if course is taken...");
                s = lineScan.next();
                System.out.print(s);
                boolean taken = Boolean.parseBoolean(s.trim()); 
```

请告诉我您是否需要查看我的完整程序以供审查，或者我的问题不够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:08:53.513

`Boolean.parseBoolean`不扔`java.lang.NumberFormatException`。

因此，您可能正在尝试`Integer.parseInt("false")`在代码中的某处执行类似操作，但它会引发异常。如果不查看所有代码，很难更具体。

此外，输出与您显示的示例 txt 提取不对应，这无助于理解问题可能是什么。

# android - 为什么我在 Android 选项菜单中看不到我的图标？

> ID：15132567
> 
> 赞同：0
> 
> 时间：2013-02-28T10:01:24.040
> 
> 标签：android

我有以下代码来生成菜单项：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu1"
          android:icon="@drawable/ic_action1"
          android:title="@string/foo" />
</menu> 
```

我在菜单中看到项目，但看不到图标。怎么了？我不想像下面这样使用它：

```
android:showAsAction="ifRoom|withText" 
```

然后我看到了图标，但我不希望它出现在操作栏中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:19:41.290

当您使用 ActionBar / Holo 主题时，您不会在溢出菜单中看到任何菜单项图标，抱歉。我认为当您将 pre-Holo 主题应用于您的活动时，您将恢复旧菜单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:13:42.363

尝试这样的事情

```
 onCreateOptionsMenu(Menu menu){
       MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.your_menu, menu);

       menu.getItem(R.id.your_item_id).setIcon(R.drawable.your_drawable_id);
    } 
```

# php - foreach 循环中的 Array_combine 还是什么？

> ID：15132570
> 
> 赞同：0
> 
> 时间：2013-02-28T10:01:30.557
> 
> 标签：php, mysql, database

现在，我对 foreach 循环和数组有一个大问题。

我想在具有 2 列（codice，giacenza）的 MySQL 表中插入存储在 txt 文件中的值。这是txt文件的示例：

> *$S0AE7375 $L01$F003$T017$B00000002$I001$G00201$R00000000$O03$N*
> *$S0AE8909 $L01$F001$T017$B00000006$I001$G00201$R00000000$O03$N*

通过解析，我已经获得了我所搜索的内容，我是一个简单的文件，其中包含值代码和 giacenza。这是 parsin.php 文件：

```
<?php
 $file = file_get_contents("./upload/magazzino.txt");
 $file2 = str_replace ("B00000", "", $file);
 $file3 = str_replace ('$S', '$', $file2);
 $rows = explode("\n", $file3);

 foreach($rows as $row) { 
     $linee  = explode ("$", $row);
     echo $linee[1].$linee[5]. "<br>\n";
    }
?> 
```

我在循环中使用了`echo`in`foreach`来查看发生了什么以及结果是什么，结果是这样的：

> 0AE7375 002
> 0AE8909 006

第一个是 codice (0AE7375,ecc..)，第二个是 giacenza (002,ecc..) 但 codice 和 giacenza 不是一个数组，而是两个不同的数组。我想使用 array_combine 因为对于一个 codice 对应一个 giacenza，但我不知道是否正确。

最后，我必须使用 insert 方法将值插入到 SQL 表中。

Hanyone有解决这个问题的想法吗？我尝试了各种解决方案，但我不知道我必须在`foreach`循环中使用。

我已经尝试过了，但不起作用：

```
mysql_query("INSERT INTO prodotti
         ($linee[1] , $linee[5] )
         VALUES
         ('codice', 'giacenza' )") OR DIE(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:21:12.773

mysql insert 的语法是：（`INSERT INTO prodotti(codice, giacenza) values ('val1', 'val2')`假设`codice`and`giacenza`是数据库中的字段名）

# mysql - 从 html 表单中获取值并通过 django 将其存储在 mysql db 中

> ID：15132572
> 
> 赞同：1
> 
> 时间：2013-02-28T10:01:43.247
> 
> 标签：mysql, django-templates, django-views

我需要通过 Python/Django 中的 html 提交按钮将数据更新到数据库（mysql）的代码。需要带有 html 代码的 view.py 内容。考虑我有一个带有书名、作者名和出版商名的表我需要更新这些值的值通过 html 提交按钮。

请在这方面帮助我..我是这个框架的新手...无法通过。

如果您向我发送通过 Django/Python 在 mysql 中编辑表的代码，那将更加感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:22:24.043

模型.py

```
class Book(models.Model):
   book_name = models.CharField(max_length = 32, unique = True)
   author_name = models.CharField(max_length = 32, unique = True)
   publisher_name = models.CharField(max_length = 32, unique = True) 
```

表格.py

从您的路径导入图书

```
class BookForm(forms.ModelForm):
   class = Book 
```

视图.py

```
def save_book(request):  
  form = BookForm
  if request.POST:
     form = BookForm(request.POST)
     if form.is_valid():
        form.save()
  return render_to_response('book.html.html',{'form': form} ,                 context_instance=RequestContext(request)) 
```

book.html

```
<body>
<form action="." method="post" name="book" id="book">{% csrf_token %}
<table>
<tr><td>{{form.book_name.label}}</td><td>{{form.book_name}}</td></tr>
<tr><td>{{form.author_name.label}}</td><td>{{form.author_name}}</td></tr>
<tr><td>{{form.publisher_name.label}}</td><td>{{form.publisher_name}}</td></tr>
<tr><td></td><td><input type="button" name="btnSave" id="bntSave" value="Save"  class = "default2"/></td>
</table>
</body> 
```

url.py 调用你的 url

# php - PHP代码打印出页面标题和元描述？

> ID：15132590
> 
> 赞同：-1
> 
> 时间：2013-02-28T10:02:29.163
> 
> 标签：php, title, meta

我需要一个 php 代码来打印页面标题和/或元描述。

他们已经在那里，但我需要它在推特共享链接中放置一个动态标题......

```
For example: This is Twitter sharing link which works :
<a href="http://twitter.com/share?text=Hello+World&url=<?php echo curPageURL();?>"

I want to include there Page Title/ or Meta Description 
so the link would look like :
<a href="http://twitter.com/share?text=<?php /// ?>&url=<?php echo curPageURL();?>" 
```

标题/元描述由论坛和插件生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:26:38.203

好的，我实际上找到了解决方案:)

如果我可以投票，我会带着问题投票给本

> 实际的页面标题来自哪里？是什么产生的？你在用cms吗？– 本

# eclipse - Eclipse JFace :: 如何在多页编辑器中工作时摆脱键绑定冲突

> ID：15132593
> 
> 赞同：0
> 
> 时间：2013-02-28T10:02:34.530
> 
> 标签：eclipse, jface, key-bindings, eclipse-plugin

我有一个多页编辑器，其中每个页面都有复制粘贴删除操作和 f3 导航操作。我创建上下文并激活和停用操作

下面是 plugin.xml 的样子：

```
<extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com.sap.adt.wda.controller.ui.navigate"
            contextId="com.sap.adt.wda.controller.ui.contextTabScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F3">
      </key>

</extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            description="%context_navigateToController_ymsg"
            id="com.sap.adt.wda.controller.ui.contextTabScope"
            name="%context_navigateToController_yins"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension> 
```

它是通过上下文的激活和停用来完成的。下面是代码片段。

```
private void activateHandlers() {
        IContextService contextService = (IContextService) (PlatformUI.getWorkbench().getService(IContextService.class));
        if (contextService != null) {
            activation = contextService.activateContext(IControllerConstants.CONTEXT_TAB_ECLIPSE_CONTEXT_ID);
        }
        IEditorSite site = getEditor().getEditorSite();
        IHandlerService service = (IHandlerService) site.getService(IHandlerService.class);

        IHandlerActivation navigateHandlerActivation = service.activateHandler(NavigationHandler.COMMAND_ID, new NavigationHandler());
        activatedHandlers = new ArrayList<IHandlerActivation>();
        activatedHandlers.add(navigateHandlerActivation);
    }

    public void deactivateHandlers() {
        IContextService contextService = (IContextService) (PlatformUI.getWorkbench().getService(IContextService.class));
        contextService.deactivateContext(activation);
        IHandlerService service = (IHandlerService) getEditor().getEditorSite().getService(IHandlerService.class);
        if (activatedHandlers != null) {
            service.deactivateHandlers(activatedHandlers);
            activatedHandlers = null;
        }
    } 
```

这两个方法分别从页面更改中调用，以在页面处于活动状态时激活上下文，在页面不处于活动状态时取消激活。

问题是它仍然与另一个打开的编辑器冲突，因为当我在编辑器之间切换时，甚至没有调用 pagechange ！请告诉我实现这一点的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T07:13:21.090

在编辑器的 sourceViewer 上添加焦点监听器

```
 focusListener = new FocusListener() {

        @Override
        public void focusLost(FocusEvent e) {
            deactivateHandlers();
        }

        @Override
        public void focusGained(FocusEvent arg0) {
            activateHandlers();
        }
    };

   sourceViewer.getTextWidget().addFocusListener(focusListener); 
```

在每页切换时，将调用 focusLost 和 focusGained。覆盖 activateHandlers() 和 deactivateHandlers() 以启用和禁用编辑器每个部分的相应处理程序

# android - 谷歌即时家庭定位

> ID：15132595
> 
> 赞同：2
> 
> 时间：2013-02-28T10:02:37.840
> 
> 标签：android, google-maps, google-now

在我的应用程序中，我有一个按钮，用于在 Google 地图视图上向用户显示他要走的路。

有没有办法从 Google Now 获取用户的家庭/工作位置？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T10:52:22.070

You can use Google Maps API in your application and find out your location through existing methods like this

```
LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria criteria = new Criteria();
String provider = service.getBestProvider(criteria, false);
Location location = service.getLastKnownLocation(provider);
LatLng userLocation = new LatLng(location.getLatitude(),location.getLongitude()); 
```

credits : [https://stackoverflow.com/a/14493351/2071742](https://stackoverflow.com/a/14493351/2071742)

# drupal - 通过了解用户 Drupal 7 的 IP 将用户重定向到区域语言站点版本

> ID：15132596
> 
> 赞同：0
> 
> 时间：2013-02-28T10:02:40.013
> 
> 标签：drupal, redirect, ip, drupal-modules

我们基本上是在开发一个支持多语言的 Drupal 7 站点。应根据用户的 IP 将用户重定向到区域翻译页面。

我曾尝试使用以下模块，但它们无助于实现我想要的。

*   [内化](http://drupal.org/project/i18n)
*   [IP 到语言环境](http://drupal.org/project/ip2locale)

如何根据用户的 IP 将用户重定向到特定页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:35:48.997

我已经添加了一个相同的模块......只需添加代码。只需稍加修改，它就可以配置为任何语言和选项。

1.  我正在使用来自[http://ipinfodb.com/](http://ipinfodb.com/)的 API 。
2.  ip2locationlite.class.php -> 文件可以从这个链接“ [http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php) ”下载。该文件由一个非常简单的类组成，仅用于调用[http://ipinfodb.com/](http://ipinfodb.com/)提供的 web 服务，可以通过使用您自己的带有 file_get_contents 的类来避免。

3.  我只用了中文。

/** 作者 : Sunny Jhunjhunwala (sunny.jhunjhunwala@sourcen.com) * @file - 该文件主要使用 ipinfodb 提供的 php api 来获取用户的国家 */

/** * 实现 hook_init()。* 仅第一次检查用户是否来自中国，如果是则将用户重定向到网站的中文版本。*/ 函数 dw_ip2location_init() {

if (!(array_key_exists('visited', $_COOKIE)) && empty($GLOBALS['user']->uid)) { // 设置 cookie 以检查用户是新用户还是现有用户。setcookie("已访问", 1, time() + (10 * 365 * 24 * 60 * 60)); include_once ('ip2locationlite.class.php'); $ipLite = 新的 ip2location_lite；$ipLite->setKey('a00740f71ae6ed8db250cb4c3a8ecdac672b5eae4d2a28c06284aa5461d0636d'); // @TODO : 移至生产时删除下面的 if-else。if (isset($_GET['ip2location'])) { $locations = $ipLite->getCountry($_GET['ip2location']); } else { $locations = $ipLite->getCountry($_SERVER['REMOTE_ADDR']); } if (!empty($locations) && is_array($locations)) { // 检查用户是否来自中国并重定向。
$path = $_GET['q'];
$translations = i18n_get_path_translations($path);
$language = i18n_language_interface();
if($language->prefix != 'cn' ) { 全局 $base_url; if(!drupal_is_front_page() && array_key_exists('zh-hans', $translations)) { drupal_goto( $base_url . '/cn/' . $translations['zh-hans']['href'], array('absolute ' => 真））；} else { drupal_goto( $base_url . '/cn/', array('absolute' => true)); }
} } } } }

# workflow-foundation - 如何/何时在 WF 4.5 中使用具有 sql 持久性的所有者锁

> ID：15132605
> 
> 赞同：1
> 
> 时间：2013-02-28T10:03:04.203
> 
> 标签：workflow-foundation

我找不到有关该机制如何工作或正确方法是什么的信息，我的情况：

-WorklfowApplication 实例加载一个 xaml 文件 -工作流运行并通过书签进入空闲状态，卸载然后自动持久化 -在稍后阶段，新的 WorkflowApplication 实例加载工作流并恢复书签 -工作流完成并卸载

如果我从不费心做任何清理工作，这一切都很好。我只在启动工作流时创建一个锁，然后在恢复书签时我没有创建一个锁，但是我在“LockOwnersTable”中留下了很多记录。

我希望有人能解释什么时候应该创建和释放锁以及“Lock Expiration”在“LockOwnersTable”中的含义。

# joomla - Joomla 文章文本在类别列表中截断

> ID：15132610
> 
> 赞同：0
> 
> 时间：2013-02-28T10:03:20.913
> 
> 标签：joomla

我在使用 Joomla 时遇到问题，而在类别博客或类别列表中显示的文章文本被截断。我想在页面上显示所有文本且不被截断的文章。

这是问题的图片。如您所见，第一篇文章被截断，而第二篇和第三篇文章都很好，因为它们比长度短。

![在此处输入图像描述](../Images/4cc5e7a2ea644f53d369c89482db5ab7.png)

我尝试修改“阅读更多”设置，更改介绍文本大小和其他几个选项，但似乎无法解决这个问题。我还查看了内容文章的默认模板以手动更改大小，但看不到我可以在哪里执行此操作。

有人可以帮助解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:10:26.390

*   单击内容->类别
*   单击选项（在类别页面上）
*   单击博客/特色布局
*   将“#Leading Articles”计数从 1 更改为 10 或更高
*   将“# Intro Articles”计数更改为 0

# c# - 在 Fluent NHibernate 中通过 ID 设置引用的实体

> ID：15132611
> 
> 赞同：2
> 
> 时间：2013-02-28T10:03:29.673
> 
> 标签：c#, .net, nhibernate

我正在使用 Fluent NHibernate (v. 1.3)，我有两个实体：

```
public class MyObject
{
    public virtual int Id { get; protected set; }
    public virtual string Tag { get; set; }
    public virtual List ListValue { get; set; }
}

public class List
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; set; }
} 
```

映射如下所示：

```
public MyObjectMap()
{
    Table("my_table");

    Id(x => x.Id).Column("dtl_id").GeneratedBy.Native();
    Map(x => x.Tag).Column("mfl_tag").Not.Nullable();
    References<List>(x => x.ListValue).Column("lst_id").Nullable();
}

public ListMap()
{
    Id(x => x.Id).Column("lst_id").GeneratedBy.Native();
    Map(x => x.Name).Column("lst_name").Nullable().Length(50);
} 
```

现在我想在 MyObject 上设置“lst_id”值（即 ListValue.Id）。
通常我只会将 ListValue 属性设置为 List 对象的一个​​实例，但在特定情况下我只有一个 Id。

我可以使用 Id 从数据库中获取 List 对象，但这似乎没有必要，因为我不想对列表对象本身做任何事情，我只想设置 lst_id 值并保存对象。

另一种选择是将 List 中 Id 的 setter 属性更改为 public 而不是 protected。然后我可以创建一个新的 List 实例，将 Id 设置为我想要的任何值并将其分配给 MyObject.ListValue。这也可以，但是感觉不对，因为 Id 是由数据库生成的，并且将 setter 设置为 protected 清楚地表明了这一点。

有第三种选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:00:02.933

尝试

```
Model.List = session.Load<List>(yourid); 
```

这不会访问数据库。

# javascript - 如何使图像适合 div 容器？

> ID：15132617
> 
> 赞同：0
> 
> 时间：2013-02-28T10:03:36.177
> 
> 标签：javascript, image, html, containers

我有个问题。

[http://img831.imageshack.us/img831/2111/18435469.png](http://img831.imageshack.us/img831/2111/18435469.png)

在这里您可以看到一个图像不适合容器。如果宽度、高度是固定的，这很容易做到，但这种布局是灵活的，并且当您调整浏览器窗口大小时，图像高度+宽度会发生变化。

也许有一种简单的方法可以用 Javascript 做到这一点？

CSS：

```
.photo:nth-child(4n+1) {
background:#ff0000;
max-width:100%;
margin: 0;
clear: both;
}

.photo:nth-child(4n+2) {
background:#EEE;
max-width: 33.33%;
min-height: 300px;
float:left;
margin: 0;
}

.photo:nth-child(4n+3) {
background:#AAA;
max-width: 33.33%;
min-height: 300px;
float:left;
margin: 0;
}

.photo:nth-child(4n+4) {
background:#CCC;
max-width: 33.33%;
min-height: 300px;
float:left;
margin: 0;
}
.photo:nth-child(4n+1) img {
width: 100%;
}

.photo:nth-child(4n+2) img {
max-width: 100%;
max-height: 100%;
}

.photo:nth-child(4n+3) img {
max-width: 100%;
max-height: 100%;
}

.photo:nth-child(4n+4) img {
max-width: 100%;
max-height: 100%;
} 
```

PHP代码：

```
 <div class="photo">
<img class="group2" href="uploads/'.$row[2].'" src="uploads/'.$row[2].'"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T17:44:37.023

这仅适用于 css：

包含 div：

```
.image_holder {
overflow:hide;
} 
```

图片：

```
.image_holder img {
height: 100%;
max-width: 150%;
width: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:54:00.103

使用以下 jquery ....

```
$(document).ready(function(){
var height = $(".photo").height();
var width=$(".photo").width();
$(".group2").attr("height",height );
$(".group2").attr("width",width);
}); 
```

这将获得图像的高度和宽度并分配给图像。所以图像适合

笔记。最好总是使用 id 来获取高度和宽度。

# java - 在android中使用蓝牙进行数据传输

> ID：15132618
> 
> 赞同：0
> 
> 时间：2013-02-28T10:03:47.467
> 
> 标签：java, android, xml, bluetooth, transfer

我正在开发一个应用程序，首先我必须搜索可用的蓝牙设备并建立连接。我已经完成了这个任务。在此之后，将打开一个新的 Activity，其中有一个 Edittext 和一个 Button。我已经开发了以下代码。它没有给出任何输出。我正在使用连接设备的 MAC 地址传递数据。

.java文件...

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.UUID;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.ContentValues;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

@SuppressLint("NewApi")
public class NewMessage extends Activity {

    Button btn;
    EditText et;
    String message1="Hello";//on button click by default

    BluetoothAdapter mBluetoothAdapter1 = null;;

    // BluetoothAdapter mBluetoothAdapter;

    public static String MacAddress;

    @Override
    public void onCreate(Bundle mSavedInstanceState) {
        super.onCreate(mSavedInstanceState);
        setContentView(R.layout.message);

        btn = (Button) findViewById(R.id.btn);
        et = (EditText) findViewById(R.id.et);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mBluetoothAdapter1 = BluetoothAdapter.getDefaultAdapter();

                byte[] toSend=message1.getBytes();

                try
                {
                    final UUID applicationUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
                    BluetoothDevice device=mBluetoothAdapter1.getRemoteDevice(MacAddress);
                    BluetoothSocket socket=device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
                    OutputStream mmout=socket.getOutputStream();
                    mmout.write(toSend);
                    mmout.flush();
                    mmout.close();
                    socket.close();
                    Toast.makeText(getBaseContext(), MacAddress, 10000).show();
                }
                catch (IOException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

    }

    /*private void sendDataToPairedDevice(String message ,BluetoothDevice device){       
           byte[] toSend = message.getBytes();
            try 
            {
                BluetoothSocket socket = device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
                OutputStream mmOutStream = socket.getOutputStream();
                mmOutStream.write(toSend);
                // Your Data is sent to  BT connected paired device ENJOY.
            } catch (IOException e) {
                e.printStackTrace();
            }
        }*/

} 
```

xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/et"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:hint="@string/hint">

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/send" />

</LinearLayout> 
```

请帮帮我...

这是我的代码，有问题..

```
public void onClick(View v) {
                    // TODO Auto-generated method stub

                            mBluetoothAdapter1 = BluetoothAdapter.getDefaultAdapter();

                            byte[] toSend=message1.getBytes();

                            try
                            {

                                final UUID applicationUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
                                BluetoothDevice device=mBluetoothAdapter1.getRemoteDevice(MacAddress);
                                BluetoothSocket socket=device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
                                OutputStream mmout=socket.getOutputStream();
                                mmout.write(toSend);
                                mmout.flush();
                                mmout.close();
                                socket.close();

                            }
                            catch (IOException e) 
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:16:17.737

这并不能直接回答您的问题，但我注意到的一件事是`10000`您的持续时间参数`Toast.makeText()`是无效的。它只接受`Toast.LENGTH_SHORT`or `Toast.LENGTH_LONG`，实际上只是 0 或 1。检查文档：http: [//developer.android.com/reference/android/widget/Toast.html](http://developer.android.com/reference/android/widget/Toast.html)

[**编辑**] 我在您的代码中看到的另一个错误是您将一个空传递`String`给`getRemoteDevice`. 尝试做`getRemoteDevice("00001101-0000-1000-8000-00805F9B34FB")`，看看会发生什么。再次阅读文档： http: [//developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getRemoteDevice(java.lang.String)](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getRemoteDevice(java.lang.String))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T07:31:11.487

包括连接功能。

```
BluetoothSocket socket=device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
socket.connect();  // here
OutputStream mmout=socket.getOutputStream(); 
```

# ios - CFPreferences 后台同步队列崩溃

> ID：15132621
> 
> 赞同：2
> 
> 时间：2013-02-28T10:03:49.797
> 
> 标签：ios, crash, core-foundation, cfpreferences

我已经集成了 crashlytics 来跟踪我的 ios 应用程序中的崩溃。应用程序崩溃并且堆栈跟踪未指向应用程序，并且此崩溃不一致，无法重现。任何人都可以知道为什么会出现问题。 ![Crashlytics 堆栈跟踪](../Images/40537e608436ab169ce5c16eb780f16a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T03:20:03.417

将存储在首选项中的对象转换为属性列表时发生了崩溃。其中一个很可能在存储后被过度释放或以其他方式损坏。

# ios - 作为 HTTP POST 发送的图像在写入服务器中的文件时损坏

> ID：15132625
> 
> 赞同：2
> 
> 时间：2013-02-28T10:03:58.523
> 
> 标签：ios, objective-c, http, post, http-post

我使用下面的代码将图像发布到我的服务器。

```
NSString *localCacheDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Downloads"];
NSString *localPathToSaveFile = [localCacheDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"lion.jpg"]];

NSMutableString *urlForUploadingAttachment = MY_SERVER_URL;

NSData *myData = [NSData dataWithContentsOfFile:localPathToSaveFile];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"--------";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];
NSMutableData *body = [NSMutableData data];

// add image data
NSData *imageData = UIImageJPEGRepresentation([UIImage imageWithContentsOfFile:localPathToSaveFile], 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", @"lion.jpg"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

// setting the body of the post to the reqeust
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

// set the content-length
NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

// set URL
[request setURL:[NSURL URLWithString:urlForUploadingAttachment]];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString* returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@", returnString); 
```

在服务器端 .net 应用程序中，我将文件写为

```
 public void SaveAttachment(string filePath, string fileName)
    {
        if (!Directory.Exists(filePath))
        {
            Directory.CreateDirectory(filePath);
        }
        string fullFilePath = filepath + "\\" + fileName;
        using (Stream file = File.OpenWrite(fullFilePath))
        {
            CopyStream(Request.InputStream, file);
            try
            {
                file.Close();
            }
            catch (Exception ex) { }
        }
    }

    public void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[8 * 1024]; int len;
        while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, len);
        }
    } 
```

但是服务器写入的文件已损坏。即使文件被写入，我也无法打开或预览它。文件大小也符合预期。但是当我双击图像时，我会收到文件已损坏、损坏或太大的消息。这里有什么问题？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:19:48.380

对于图片发布`POST Method`，这里简单的代码根据您的要求使用它：

```
NSString  *imgPath = fullPathOfYourImage;
    if([[NSFileManager defaultManager] fileExistsAtPath:imgPath])
    {
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];                                                        
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"photo\"; filename=\"YourImageName.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                                                                                                               ^..YourImageName….^

        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithContentsOfFile:imgPath]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    } 
```

# javascript - 如何防止文档滚动但允许在 iOS 和 Android 网站上的 div 元素内滚动？

> ID：15132630
> 
> 赞同：33
> 
> 时间：2013-02-28T10:04:11.067
> 
> 标签：javascript, html, css, jquery-mobile, scroll

我用 jQueryMobile 为 iOS 和 Android 创建了一个网站。

我不希望文档本身滚动。相反，只有一个区域（一个`<div>`元素）应该是可滚动的（通过 css 属性`overflow-y:scroll`）。

所以我通过以下方式禁用了文档滚动：

```
$(document).bind("touchstart", function(e){
    e.preventDefault();
});

$(document).bind("touchmove", function(e){
    e.preventDefault();
}); 
```

但这也将禁用文档中所有其他元素的滚动，无论是否`overflow:scroll`设置。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-28T14:41:42.390

**这个仅限 CSS**的解决方案怎么样：

[https://jsfiddle.net/Volker_E/jwGBy/24/](https://jsfiddle.net/Volker_E/jwGBy/24/)

`body`获取`position: fixed;`以及您希望的所有其他元素`overflow: scroll;`。适用于移动 Chrome (WebKit)/Firefox 19/Opera 12。

您还将看到我对 jQuery 解决方案的各种尝试。但是，一旦您将`touchmove`/绑定`touchstart`到文档，无论是否未绑定，它都会阻碍子 div 中的滚动。

免责声明：这个问题的解决方案在很多方面基本上不是很好的用户体验！您永远不会知道访问者的视口到底有多大或他们使用的字体大小（例如客户端用户代理样式），因此很容易将重要内容隐藏在您的文档中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T23:37:25.310

最后，我让它工作了。真的很简单：

```
var $layer = $("#layer");
$layer.bind('touchstart', function (ev) {
    var $this = $(this);
    var layer = $layer.get(0);

    if ($this.scrollTop() === 0) $this.scrollTop(1);
    var scrollTop = layer.scrollTop;
    var scrollHeight = layer.scrollHeight;
    var offsetHeight = layer.offsetHeight;
    var contentHeight = scrollHeight - offsetHeight;
    if (contentHeight == scrollTop) $this.scrollTop(scrollTop-1);
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-17T19:45:27.347

也许我误解了这个问题，但如果我是正确的：

您希望除某个元素外无法滚动，因此您：

```
$(document).bind("touchmove", function(e){
    e.preventDefault();
}); 
```

防止文档中的所有内容。

* * *

你为什么不停止你想要滚动的元素上的事件冒泡呢？ *（PS：您不必阻止 touchstart -> 如果您使用 touch start 来选择元素而不是也阻止单击，则仅需要触摸移动，因为它实际上是在跟踪移动）*

```
$('#element').on('touchmove', function (e) {
     e.stopPropagation();
}); 
```

现在在元素 CSS

```
#element {
   overflow-y: scroll; // (vertical) 
   overflow-x: hidden; // (horizontal)
} 
```

如果您使用的是移动设备，您甚至可以更进一步。您可以强制硬件加速滚动（尽管并非所有移动浏览器都支持此功能）；

```
Browser Overflow scroll:

Android Browser Yes
Blackberry Browser  Yes
Chrome for Mobile   Yes
Firefox Mobile  Yes
IE Mobile           Yes
Opera Mini          No
Opera Mobile    Kinda
Safari          Yes

#element.nativescroll {
    -webkit-overflow-scrolling: touch;
} 
```

普通的：

```
<div id="element"></div> 
```

原生感觉：

```
<div id="element" class="nativescroll"></div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-13T07:44:47.623

这是我正在使用的解决方案：

$scrollElement 是滚动元素，$scrollMask 是一个带有 style 的 div `position: fixed; top: 0; bottom: 0;`。$ scrollMask`z-index`小于 $scrollElement。

```
$scrollElement.on('touchmove touchstart', function (e) {
    e.stopPropagation();
}); 
```

```
$scrollMask.on('touchmove', function(e) {
    e.stopPropagation();
    e.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-16T20:00:53.477

我正在寻找一种不需要调用应该滚动的特定区域的解决方案。拼凑一些资源，这对我有用：

```
 // Detects if element has scroll bar
    $.fn.hasScrollBar = function() {
        return this.get(0).scrollHeight > this.outerHeight();
    }

    $(document).on("touchstart", function(e) {
        var $scroller;
        var $target = $(e.target);

        // Get which element could have scroll bars
        if($target.hasScrollBar()) {
            $scroller = $target;
        } else {
            $scroller = $target
                .parents()
                .filter(function() {
                    return $(this).hasScrollBar();
                })
                .first()
            ;
        }

        // Prevent if nothing is scrollable
        if(!$scroller.length) {
            e.preventDefault();
        } else {
            var top = $scroller[0].scrollTop;
            var totalScroll = $scroller[0].scrollHeight;
            var currentScroll = top + $scroller[0].offsetHeight;

            // If at container edge, add a pixel to prevent outer scrolling
            if(top === 0) {
                $scroller[0].scrollTop = 1;
            } else if(currentScroll === totalScroll) {
                $scroller[0].scrollTop = top - 1;
            }
        }
    }); 
```

此代码需要 jQuery。

资料来源：

*   这个帖子
*   [https://github.com/luster-io/prevent-overscroll](https://github.com/luster-io/prevent-overscroll)
*   [如何检查滚动条是否可见？](https://stackoverflow.com/questions/4814398/how-can-i-check-if-a-scrollbar-is-visible)
*   [Jquery检查任何父div是否有滚动条](https://stackoverflow.com/questions/27875195/jquery-check-if-any-parent-div-have-scroll-bar)

* * *

**更新**

我需要一个原生的 JavaScript 版本，所以下面是修改后的版本。我实现了一个边距检查器和一些明确允许输入/文本区域可点击的东西（我在我使用它的项目中遇到了这个问题......你的项目可能不需要它）。请记住，这是 ES6 代码。

```
const preventScrolling = e => {
    const shouldAllowEvent = element => {
        // Must be an element that is not the document or body
        if(!element || element === document || element === document.body) {
            return false;
        }

        // Allow any input or textfield events
        if(['INPUT', 'TEXTAREA'].indexOf(element.tagName) !== -1) {
            return true;
        }

        // Get margin and outerHeight for final check
        const styles = window.getComputedStyle(element);
        const margin = parseFloat(styles['marginTop']) +
            parseFloat(styles['marginBottom']);
        const outerHeight = Math.ceil(element.offsetHeight + margin);

        return (element.scrollHeight > outerHeight) && (margin >= 0);
    };

    let target = e.target;

    // Get first element to allow event or stop
    while(target !== null) {
        if(shouldAllowEvent(target)) {
            break;
        }

        target = target.parentNode;
    }

    // Prevent if no elements
    if(!target) {
        e.preventDefault();
    } else {
        const top = target.scrollTop;
        const totalScroll = target.scrollHeight;
        const currentScroll = top + target.offsetHeight;

        // If at container edge, add a pixel to prevent outer scrolling
        if(top === 0) {
            target.scrollTop = 1;
        } else if(currentScroll === totalScroll) {
            target.scrollTop = top - 1;
        }
    }
};

document.addEventListener('touchstart', preventScrolling);
document.addEventListener('mousedown', preventScrolling); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-29T08:22:07.970

就我而言，我有一个可滚动的主体和一个可滚动的浮动菜单。两者都必须是可滚动的，但是当“浮动菜单”（位置：固定）接收到触摸事件并且正在滚动并到达顶部或底部时，我必须阻止正文滚动。默认情况下，浏览器开始滚动正文。

我真的很喜欢[jimmont 的回答](https://stackoverflow.com/a/17979071/4078503)，但不幸的是，它在所有设备和浏览器上都不能正常工作，尤其是在快速和长时间滑动时。

我最终在浮动菜单上使用了[MOMENTUM SCROLLING USING JQUERY (hnldesign.nl)](http://www.hnldesign.nl/work/code/momentum-scrolling-using-jquery/)，它可以防止默认浏览器滚动，然后动画滚动本身。为了完整起见，我在此处包含[该代码：](http://code.hnldesign.nl/hnl.inertial.js)

```
/**
 * jQuery inertial Scroller v1.5
 * (c)2013 hnldesign.nl
 * This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.
 **/
/*jslint browser: true*/
/*global $, jQuery*/

/* SETTINGS */
var i_v = {
    i_touchlistener     : '.inertialScroll',         // element to monitor for touches, set to null to use document. Otherwise use quotes. Eg. '.myElement'. Note: if the finger leaves this listener while still touching, movement is stopped.
    i_scrollElement     : '.inertialScroll',         // element (class) to be scrolled on touch movement
    i_duration          : window.innerHeight * 1.5, // (ms) duration of the inertial scrolling simulation. Devices with larger screens take longer durations (phone vs tablet is around 500ms vs 1500ms). This is a fixed value and does not influence speed and amount of momentum.
    i_speedLimit        : 1.2,                      // set maximum speed. Higher values will allow faster scroll (which comes down to a bigger offset for the duration of the momentum scroll) note: touch motion determines actual speed, this is just a limit.
    i_handleY           : true,                     // should scroller handle vertical movement on element?
    i_handleX           : true,                     // should scroller handle horizontal movement on element?
    i_moveThreshold     : 100,                      // (ms) determines if a swipe occurred: time between last updated movement @ touchmove and time @ touchend, if smaller than this value, trigger inertial scrolling
    i_offsetThreshold   : 30,                       // (px) determines, together with i_offsetThreshold if a swipe occurred: if calculated offset is above this threshold
    i_startThreshold    : 5,                        // (px) how many pixels finger needs to move before a direction (horizontal or vertical) is chosen. This will make the direction detection more accurate, but can introduce a delay when starting the swipe if set too high
    i_acceleration      : 0.5,                      // increase the multiplier by this value, each time the user swipes again when still scrolling. The multiplier is used to multiply the offset. Set to 0 to disable.
    i_accelerationT     : 250                       // (ms) time between successive swipes that determines if the multiplier is increased (if lower than this value)
};
/* stop editing here */

//set some required vars
i_v.i_time  = {};
i_v.i_elem  = null;
i_v.i_elemH = null;
i_v.i_elemW = null;
i_v.multiplier = 1;

// Define easing function. This is based on a quartic 'out' curve. You can generate your own at http://www.timotheegroleau.com/Flash/experiments/easing_function_generator.htm
if ($.easing.hnlinertial === undefined) {
    $.easing.hnlinertial = function (x, t, b, c, d) {
        "use strict";
        var ts = (t /= d) * t, tc = ts * t;
        return b + c * (-1 * ts * ts + 4 * tc + -6 * ts + 4 * t);
    };
}

$(i_v.i_touchlistener || document)
    .on('touchstart touchmove touchend', function (e) {
        "use strict";
        //prevent default scrolling
        e.preventDefault();
        //store timeStamp for this event
        i_v.i_time[e.type]  = e.timeStamp;
    })
    .on('touchstart', function (e) {
        "use strict";
        this.tarElem = $(e.target);
        this.elemNew = this.tarElem.closest(i_v.i_scrollElement).length > 0 ? this.tarElem.closest(i_v.i_scrollElement) : $(i_v.i_scrollElement).eq(0);
        //dupecheck, optimizes code a bit for when the element selected is still the same as last time
        this.sameElement = i_v.i_elem ? i_v.i_elem[0] == this.elemNew[0] : false;
        //no need to redo these if element is unchanged
        if (!this.sameElement) {
            //set the element to scroll
            i_v.i_elem = this.elemNew;
            //get dimensions
            i_v.i_elemH = i_v.i_elem.innerHeight();
            i_v.i_elemW = i_v.i_elem.innerWidth();
            //check element for applicable overflows and reevaluate settings
            this.i_scrollableY      = !!((i_v.i_elemH < i_v.i_elem.prop('scrollHeight') && i_v.i_handleY));
            this.i_scrollableX    = !!((i_v.i_elemW < i_v.i_elem.prop('scrollWidth') && i_v.i_handleX));
        }
        //get coordinates of touch event
        this.pageY      = e.originalEvent.touches[0].pageY;
        this.pageX      = e.originalEvent.touches[0].pageX;
        if (i_v.i_elem.is(':animated') && (i_v.i_time.touchstart - i_v.i_time.touchend) < i_v.i_accelerationT) {
            //user swiped while still animating, increase the multiplier for the offset
            i_v.multiplier += i_v.i_acceleration;
        } else {
            //else reset multiplier
            i_v.multiplier = 1;
        }
        i_v.i_elem
            //stop any animations still running on element (this enables 'tap to stop')
            .stop(true, false)
            //store current scroll positions of element
            .data('scrollTop', i_v.i_elem.scrollTop())
            .data('scrollLeft', i_v.i_elem.scrollLeft());
    })
    .on('touchmove', function (e) {
        "use strict";
        //check if startThreshold is met
        this.go = (Math.abs(this.pageX - e.originalEvent.touches[0].pageX) > i_v.i_startThreshold || Math.abs(this.pageY - e.originalEvent.touches[0].pageY) > i_v.i_startThreshold);
    })
    .on('touchmove touchend', function (e) {
        "use strict";
        //check if startThreshold is met
        if (this.go) {
            //set animpar1 to be array
            this.animPar1 = {};
            //handle events
            switch (e.type) {
            case 'touchmove':
                this.vertical       = Math.abs(this.pageX - e.originalEvent.touches[0].pageX) < Math.abs(this.pageY - e.originalEvent.touches[0].pageY); //find out in which direction we are scrolling
                this.distance       = this.vertical ? this.pageY - e.originalEvent.touches[0].pageY : this.pageX - e.originalEvent.touches[0].pageX; //determine distance between touches
                this.acc            = Math.abs(this.distance / (i_v.i_time.touchmove - i_v.i_time.touchstart)); //calculate acceleration during movement (crucial)
                //determine which property to animate, reset animProp first for when no criteria is matched
                this.animProp       = null;
                if (this.vertical && this.i_scrollableY) { this.animProp = 'scrollTop'; } else if (!this.vertical && this.i_scrollableX) { this.animProp = 'scrollLeft'; }
                //set animation parameters
                if (this.animProp) { this.animPar1[this.animProp] = i_v.i_elem.data(this.animProp) + this.distance; }
                this.animPar2       = { duration: 0 };
                break;
            case 'touchend':
                this.touchTime      = i_v.i_time.touchend - i_v.i_time.touchmove; //calculate touchtime: the time between release and last movement
                this.i_maxOffset    = (this.vertical ? i_v.i_elemH : i_v.i_elemW) * i_v.i_speedLimit; //(re)calculate max offset
                //calculate the offset (the extra pixels for the momentum effect
                this.offset         = Math.pow(this.acc, 2) * (this.vertical ? i_v.i_elemH : i_v.i_elemW);
                this.offset         = (this.offset > this.i_maxOffset) ? this.i_maxOffset : this.offset;
                this.offset         = (this.distance < 0) ? -i_v.multiplier * this.offset : i_v.multiplier * this.offset;
                //if the touchtime is low enough, the offset is not null and the offset is above the offsetThreshold, (re)set the animation parameters to include momentum
                if ((this.touchTime < i_v.i_moveThreshold) && this.offset !== 0 && Math.abs(this.offset) > (i_v.i_offsetThreshold)) {
                    if (this.animProp) { this.animPar1[this.animProp] = i_v.i_elem.data(this.animProp) + this.distance + this.offset; }
                    this.animPar2   = { duration: i_v.i_duration, easing : 'hnlinertial', complete: function () {
                        //reset multiplier
                        i_v.multiplier = 1;
                    }};
                }
                break;
            }

            // run the animation on the element
            if ((this.i_scrollableY || this.i_scrollableX) && this.animProp) {
                i_v.i_elem.stop(true, false).animate(this.animPar1, this.animPar2);
            }
        }
    }); 
```

另一个观察：我还在 touchmove 事件中尝试了菜单 div 上的 e.stopPropagation() 和 window/body 上的 e.preventDefault() 的各种组合，但没有成功，我只设法阻止我想要的滚动而不是我不想要的滚动. 我还尝试在整个文档上设置一个 div，在文档和菜单之间使用 z-index，仅在 touchstart 和 touchend 之间可见，但它没有收到 touchmove 事件（因为它在菜单 div 下）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T19:19:56.287

这是一个使用 jQuery 处理事件的解决方案。

```
var stuff = {};
$('#scroller').on('touchstart',stuff,function(e){
  e.data.max = this.scrollHeight - this.offsetHeight;
  e.data.y = e.originalEvent.pageY;
}).on('touchmove',stuff,function(e){
  var dy = e.data.y - e.originalEvent.pageY;
  // if scrolling up and at the top, or down and at the bottom
  if((dy < 0 && this.scrollTop < 1)||(dy > 0 && this.scrollTop >= e.data.max)){
    e.preventDefault();
  };
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-27T18:13:18.227

首先将 innerScroller 放置在屏幕上任何您想要的位置，然后通过将其 css 设置为“隐藏”来修复 outerScroller。当您想恢复它时，您可以将其设置回“自动”或“滚动”，无论您以前使用过哪个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-28T16:32:53.373

这是我在触摸设备和笔记本电脑上的实现。

```
function ScrollManager() {
    let startYCoord;

    function getScrollDiff(event) {
        let delta = 0;

        switch (event.type) {
            case 'mousewheel':
                delta = event.wheelDelta ? event.wheelDelta : -1 * event.deltaY;
                break;
            case 'touchstart':
                startYCoord = event.touches[0].clientY;
                break;
            case 'touchmove': {
                const yCoord = event.touches[0].clientY;

                delta = yCoord - startYCoord;
                startYCoord = yCoord;
                break;
            }
        }

        return delta;
    }

    function getScrollDirection(event) {
        return getScrollDiff(event) >= 0 ? 'UP' : 'DOWN';
    }

    function blockScrollOutside(targetElement, event) {
        const { target } = event;
        const isScrollAllowed = targetElement.contains(target);
        const isTouchStart = event.type === 'touchstart';

        let doScrollBlock = !isTouchStart;

        if (isScrollAllowed) {
            const isScrollingUp = getScrollDirection(event) === 'UP';
            const elementHeight = targetElement.scrollHeight - targetElement.offsetHeight;

            doScrollBlock =
                doScrollBlock &&
                ((isScrollingUp && targetElement.scrollTop <= 0) ||
                    (!isScrollingUp && targetElement.scrollTop >= elementHeight));
        }

        if (doScrollBlock) {
            event.preventDefault();
        }
    }

    return {
        blockScrollOutside,
        getScrollDirection,
    };
}

const scrollManager = ScrollManager();
const testBlock = document.body.querySelector('.test');

function handleScroll(event) {
  scrollManager.blockScrollOutside(testBlock, event);
}

window.addEventListener('scroll', handleScroll);
window.addEventListener('mousewheel', handleScroll);
window.addEventListener('touchstart', handleScroll);
window.addEventListener('touchmove', handleScroll);
```

```
.main {
   border: 1px solid red;
   height: 200vh;
 }

 .test {
   border: 1px solid green;
   height: 300px;
   width: 300px;
   overflow-y: auto;
   position: absolute;
   top: 100px;
   left: 50%;
 }

 .content {
   height: 100vh;
 }
```

```
<div class="main">
  <div class="test">
    <div class="content"></div>
  </div>
</div>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-08T11:31:26.133

这对我来说适用于 Android 和 IOS 设备。

想象一下，我们有一个`div class="backdrop">`永远不想滚动的元素。但是我们希望能够滚动到位于 this 之上的元素`backdrop`。

```
function handleTouchMove(event) {
    const [backdrop] = document.getElementsByClassName('backdrop');
    const isScrollingBackdrop = backdrop === event.target;

    isScrollingBackdrop ? event.preventDefault() : event.stopPropagation();
}

window.addEventListener('touchmove', handleTouchMove, { passive: false }); 
```

所以，我们监听`touchmove`事件，如果我们在背景上滚动，我们会阻止它。如果我们正在滚动其他内容，我们允许它但停止它的传播，因此它也不会滚动`backdrop`.

当然，这是非常基本的，可以重新设计和扩展很多，但这就是解决我在 VueJs2 项目中的问题的原因。

希望能帮助到你！;)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-25T03:38:26.717

我可以通过在 HTML 上添加 css "overflow-y: hidden" 来禁用主文档的滚动。

它根本没有弄乱定位。

# blackberry-10 - 由于密钥库问题，BlackBerry10 应用程序未正确签名

> ID：15132633
> 
> 赞同：0
> 
> 时间：2013-02-28T10:04:17.790
> 
> 标签：blackberry-10, signing

我正在创建一个煎茶应用程序，我想在 BB10 设备上运行它。我已经向 BlackBerry 请求了登录密钥文件，并通过邮件收到了两个 .csj 注册文件。为了签署我的应用程序，我使用以下命令：

**blackberry-signer –register –csjpin 01234567 –storepass mcube F:\BB10Key-28Feb\client-PBDT-1975809.csj F:\BB10Key-28Feb\client-RDK-1975809.csj**

它给出了错误：

**“错误：密钥库加载：DerInputStream.getLength():lengthTag=109，太大。”**

我不知道它将如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:04:47.590

欢迎来到 StackOverflow.com

我认为您将错误的文件传递给签名者。

```
blackberry-signer -register -csjpin <csj pin> 
-storepass <KeystorePassword> <client-RDK-xxxxxx.csj file> 
<client-PBDT-xxxxx.csj file> 
```

我看到您首先传递 PBDT 密钥而不是 RDK 密钥。

您的代码将是这样的（请不要在签名时复制粘贴此命令，因为这仅用于演示目的）

```
blackberry-signer –register –csjpin 01234567 –storepass mcube F:\BB10Key-28Feb\client-RDK-1975809.csj F:\BB10Key-28Feb\client-PBDT-1975809.csj 
```

您应该传递 RDK 密钥，然后传递 PBDT 密钥。修改您的 bar signer 工具命令并使用正确的参数再次运行。有关更多信息，请访问[设置为 BlackBerry 10 应用程序](http://developer.blackberry.com/html5/documentation/signing_setup_bb10_apps_2008396_11.html)签名和为[您的 BlackBerry 10 应用程序签名](http://developer.blackberry.com/html5/documentation/signing_your_bb10_app_2008398_11.html)。

如果这解决了您的问题，请将此作为答案。

# wordpress - 为什么不能在 Wordpress 中将美元符号用作 jQuery 的替代品？

> ID：15132634
> 
> 赞同：9
> 
> 时间：2013-02-28T10:04:18.557
> 
> 标签：wordpress

如果在 wordpress 中使用 jQuery，为什么我们不能使用“$”代替？通常“$”是jQuery的替代品，对吗？但在 Wordpress 中，它显示**"$" is not a function**。我不明白为什么会这样。谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:09:37.027

看看这个网页中的技巧 5：[5 Tips for using jquery with wordpress](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/)：

> 重要的是要知道 WordPress 自带的 jQuery 版本会自动调用 jQuery.noConflict(); 函数，它将 $ 变量的控制权交还给第一个实现它的库。如果您正在加载 jQuery 的不同副本，则需要手动调用 jQuery.noConflict();，如有必要，从您的一个 JavaScript 文件中调用。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:08:05.073

> 棘手的是这个特殊的 jQuery 副本默认处于兼容模式。这意味着 jQuery 的典型“$”快捷方式不起作用，因此它不会与任何其他也使用美元符号的 JavaScript 库发生冲突，例如 MooTools 或 Prototype。

资料来源：[在 WordPress 中使用“$”而不是“jQuery”](http://digwp.com/2011/09/using-instead-of-jquery-in-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:05:52.487

`jQuery(...)`应该用来代替`$(...)`

编辑----对不起，我误读了你的问题。这取决于您的 wordpress 版本的 jquery 实现。我见过允许使用的wordpress网站`$`，但我真的不知道它取决于什么。

# ejabberd - offline_message_hook：发送离线消息时不被调用

> ID：15132636
> 
> 赞同：0
> 
> 时间：2013-02-28T10:04:27.667
> 
> 标签：ejabberd

我正在开发使用 ejabberd 作为 XMPP 服务器的 android 聊天应用程序。我想在用户离线时发送 GCM 推送通知。为此，我在 ejabberd 中创建了新模块，注册了 offline_message_hook，但是只有当有人开始输入并完成输入时才会调用此函数。以下是传递给此钩子的唯一数据包。虽然，用户在他/她上线时会收到消息。

```
Packet: {xmlelement,
      "message",
      [{"type",
       "chat"},
      {"id",
       "purple7d4d0773"},
      {"to",
       "xxx@rakshith"}],
      [{xmlelement,
       "paused",
       [{"xmlns",
         "http://jabber.org/protocol/chatstates"}],
       []}]}
Packet: {xmlelement,
      "message",
      [{"type",
       "chat"},
      {"id",
       "purple7d4d0773"},
      {"to",
       "xxx@rakshith"}],
      [{xmlelement,
       "composing",
       [{"xmlns",
         "http://jabber.org/protocol/chatstates"}],
       []}]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T04:08:47.070

关于 ejabberd 中的钩子的两件事： 1) 回调总是按顺序调用，顺序由您在注册时指定的优先级定义。2) 如果回调返回“停止”，它会阻止事件传播到链上的其余侦听器。

正在发生的事情是 ejabberd 离线模块正在侦听 offline_message_hook，这与您的代码相同。它处理消息并返回“停止”，因此您的代码不会被执行。

（您的代码确实收到了聊天状态通知的消息，因为这些消息被离线模块忽略，因此在这些情况下它不会停止链）。

您可能希望您的代码 在离线存储模块*之前运行。*请记住不要返回“停止”，以便离线模块有机会存储消息。

# c# - 为什么对值类型的虚拟调用与指向值和装箱值的指针一起使用？

> ID：15132638
> 
> 赞同：1
> 
> 时间：2013-02-28T10:04:37.433
> 
> 标签：c#, .net, cil, primitive, virtual-functions

在下面的示例中，我在值类型 ( ) 上调用虚拟方法`int`：

```
namespace ShortTest
{
    class Program
    {
        static void Main(string[] args)
        {
            int i = 42;
            i.ToString();
            ((object)i).ToString();
        }
    }
} 
```

查看 Reflector 中生成的 CIL，我可以看到以下两个调用的代码：

```
.locals init ([0] int32 i, ...)
...
L_001a: ldloca.s i
L_001c: call instance string [mscorlib]System.Int32::ToString()
L_0021: pop
L_0022: ldloc.0
L_0023: box int32
L_0028: callvirt instance string [mscorlib]System.Object::ToString()
L_002d: pop
... 
```

该`this`参数在第一种情况下是指向 int 的托管指针，在第二种情况下是对装箱的引用`int`（即，指向具有标头字段和 int 字段的对象的指针）。

由于两个调用（`int`实现`ToString()`）使用相同的方法，这如何工作？该`System.Int32::ToString()`方法使用`ldind.i4`指针`this`来检索`int`' 值，因此它应该`int`在第一种情况下获取 ' 值，但在第二种情况下它应该获取装箱`int`的第一个字段（标题）的值：

```
L_0000: ldarg.0
L_0001: ldind.i4
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:14:24.900

> 但它应该在第二种情况下获得装箱 int 的第一个字段（标题）的值

您假设该`ToString`方法传递了一个指针，并且恰好指向的任何字节都是被读取的。这种假设是错误的。

值类型的实例方法的行为就像它有一个`ref T`“this”参数。无论值类型是否被装箱，.NET 运行时都将确保正确传递它，因此该方法不需要对装箱值进行任何特殊处理。

你的出发点是正确的：

> **I.8.9.7 值类型定义**
> 
> 当在值类型上调用非静态方法（即实例或虚拟方法）时，它的 this 指针是对实例的托管引用，而当在关联的装箱类型上调用方法时，this 指针是对象引用。

但是，这种情况发生的方式是相同的`ldind.i4`指令无论如何都可以工作。只有当它引用非托管指针时，它才会简单地读取字节。

你发现了

> **II.13.3 值类型的方法**
> 
> 类的实例和虚拟方法应被编码为期望对类实例的引用作为 this 指针。相比之下，值类型的实例和虚方法应被编码为期望一个托管指针（参见第 I 部分）指向该值类型的未装箱实例。当装箱值类型作为 this 指针传递给其实现由未装箱值类型提供的虚方法时，CLI 应将装箱值类型转换为指向未装箱值类型的托管指针。

乍一看与上述内容相矛盾，但实际上它说实现必须简单地使用任何必要的魔法来使其工作。

# java - 在 JTable 中将 MouseListener 设置为 JLabel

> ID：15132643
> 
> 赞同：0
> 
> 时间：2013-02-28T10:04:50.277
> 
> 标签：java, swing, jtable, jlabel, mouselistener

我有一个 JTable，其中包含一些带有字符串的列和两列用于编辑和删除。我在 JLabel 上添加了 ImageIcon，并在 JTable 中为所有行设置了该标签。现在我想为那个 JLabel 设置 MouseListener（因为没有办法为 ImageIcon 设置 MouseListener）。

如何在 JTable 中将 MouseListener 设置为 JLabel？

我可以得到用户点击了哪个单元格，但我只想设置监听器。

请建议我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:53:17.147

我发现没有办法将直接侦听器添加到 JTable 中的组件。您只需要使用 JTable 的侦听器即可。

# scala - 使用 squeryl 和 scala 时出现奇怪的结果

> ID：15132645
> 
> 赞同：0
> 
> 时间：2013-02-28T10:04:56.333
> 
> 标签：scala, one-to-many, squeryl

我试图通过获取正确的linkedAccount 来选择耦合用户。创建的查询是正确的，但是当尝试在 dbuser 上使用属性时，例如`dbuser.lastName`我得到一个编译错误，因为 dbuser 不是 User 类型而是 Query1 size=?
这可能是非常简单的事情，但我无法弄清楚，因为我是一个 scala 和 squeryl 菜鸟！

为什么它不返回正确的值，我在查询中做错了什么？此外，保存工作没有任何问题。

**用户：**

```
class User(
            @Column("id") val id: Long,
            @Column("first_name") val firstName : String,
            @Column("last_name") val lastName : String,
            @Column("email") val email : String,
            @Column("email_validated") val emailValidated: Boolean = false,
            @Column("last_login") val lastLogin: Timestamp = null,
            val created: Timestamp,
            val modified: Timestamp,
            val active: Boolean = false
                 ) extends KeyedEntity[Long] {

  lazy val linkedAccounts: OneToMany[LinkedAccount] = AppDB.usersToLinkedAccounts.left(this)
} 
```

**关联账户：**

```
class LinkedAccount(
                     @Column("id") val id: Long,
                     @Column("user_id") val userId: Long,
                     @Column("provider_user_id") val providerUserId: String,
                     @Column("salt") val salt: String,
                     @Column("provider_key") val providerKey: String) extends KeyedEntity[Long] {

  lazy val user: ManyToOne[User] = AppDB.usersToLinkedAccounts.right(this)

} 
```

**应用数据库：**

```
object AppDB extends Schema {
  val users = table[User]("users")
  val linkedAccounts = table[LinkedAccount]("linked_account")
  val usersToLinkedAccounts = oneToManyRelation(users, linkedAccounts).via((u, l) => u.id === l.userId)

def userByLinkedAccount(prodivderKey: String, providerUserId: String) = {
    from(AppDB.users)(u =>
      where(u.id in
        from(AppDB.linkedAccounts)(la =>
          where(la.userId === u.id and la.providerKey === prodivderKey and la.providerUserId === providerUserId)
            select (la.userId)
        )
      )
        select (u)
    )    
  } 
```

**来电：**

```
val dbuser = inTransaction {
      val u2 = AppDB.userByLinkedAccount(id.providerId, id.id)
      println(u2.statement)              
    }
     println(dbuser.lastName) 
```

**生成的sql**

```
Select
  users10.last_login as users10_last_login,
  users10.email as users10_email,
  users10.modified as users10_modified,
  users10.last_name as users10_last_name,
  users10.first_name as users10_first_name,
  users10.id as users10_id,
  users10.created as users10_created,
  users10.email_validated as users10_email_validated,
  users10.active as users10_active
From
  users users10
Where
  (users10.id in ((Select
     linked_account13.user_id as linked_account13_user_id
   From
     linked_account linked_account13
   Where
     (((linked_account13.user_id = users10.id) and (linked_account13.provider_key = 'facebook')) and (linked_account13.provider_user_id = 'XXXXXXXXXX'))
  ) )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:28:24.763

好的，想通了。在这种情况下，我需要拨打电话：

```
.headOption 
```

在 Per 的一些提示之后也修复了查询

```
def userByLinkedAccount(providerKey : String, providerUserId : String) = {
    inTransaction {
      from(AppDB.users, AppDB.linkedAccounts)((u,la) =>
        where (u.id === la.userId and la.providerKey === providerKey and la.providerUserId === providerUserId)
          select(u)
      ).headOption
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:49:19.940

顺便说一句，在文档中`@Column`说`@ColumnBase`：

> 定义列元数据的首选方法是不定义它们（！）

因此，您可以将列定义为

`val id: Long,`

代替

`@Column("id") val id: Long`

# .net - 为什么 System.Drawing.Graphics.GetHdc() 会增加内存使用量

> ID：15132650
> 
> 赞同：2
> 
> 时间：2013-02-28T10:05:17.073
> 
> 标签：.net, vb.net, winapi, gdi

```
Public Shared Function Render(ByRef pdfDoc As PDFLibNet.PDFWrapper) As System.Drawing.Bitmap
    Try
        If pdfDoc IsNot Nothing Then
            Dim PW As Integer = pdfDoc.PageWidth
            Dim PH As Integer = pdfDoc.PageHeight
            Dim backbuffer As System.Drawing.Bitmap = New Bitmap(PW, PH)
            pdfDoc.ClientBounds = New Rectangle(0, 0, pdfDoc.PageWidth, pdfDoc.PageHeight)
            Dim g As Graphics = Graphics.FromImage(backbuffer)
            Using g
                Dim hdc As IntPtr = g.GetHdc()
                pdfDoc.DrawPageHDC(hdc)
                g.ReleaseHdc()
            End Using
            g.Dispose()
            Return backbuffer
        End If
    Catch ex As Exception
        Throw ex
        Return Nothing
    End Try
    Return Nothing
End Function 
```

此函数将图像绘制到从函数返回的位图类型变量“backbuffer”的 hdc 中。但是我对这个函数中内存的两次大增加（我的图像很大）不满意：
在行

```
Dim backbuffer As System.Drawing.Bitmap = New Bitmap(PW, PH) 
```

并在线

```
Dim hdc As IntPtr = g.GetHdc() 
```

所以，我有一个问题：
为什么第二行会增加与我的图像等效大小的内存，
为什么如果我绘制到 hdc 中，我会得到绘制的位图，然后返回（可能首先是装箱，然后是正在拆箱）？

如果我绘制到 hdc（针对具体绘图表面的图像的优化副本），我的绘图如何从该优化副本恢复到原始的“后缓冲”位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:22:34.713

我认为这是因为当您创建位图类的新实例然后 g.hdc() 强制它创建与您声明的页面大小相等的新位图文件时，因此这些内存使用高峰不是异常的，您应该不用担心他们。

还要确保在函数末尾处理后缓冲变量，以确保释放该对象使用的所有内存。

# java - 更改 GridLayout 元素的颜色

> ID：15132653
> 
> 赞同：2
> 
> 时间：2013-02-28T10:05:40.943
> 
> 标签：java, swing, jframe, grid-layout, chess

注意：这个问题可能看起来有点像我几周前发布的另一个问题。那时我没有将按钮添加为数组，这就是这一次让我更加困难的原因。

我正在玩国际象棋游戏，我已经能够自己建立一个 64 个方格的棋盘。然而，对于我来说，将颜色添加到正方形似乎有点太复杂了。

我的代码如下所示：

**国际象棋.java**

```
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Chess implements config {

public static void main(String[] args) {

    int[] squareArray;

    squareArray = new int[65];

    int i = 1;

    JFrame frame = new JFrame("Chessboard");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new GridLayout(ROWS, COLS, 2, 2));

    for (i = 1; i < 65; i++) {
        squareArray[i] = i;

        frame.add(new JButton("" + squareArray[i]));
        }

    frame.setSize(800, 800);
    frame.setVisible(true);
    }
} 
```

**片断.java**

```
import java.awt.Color;
import javax.swing.JFrame;

public class Piece extends JFrame implements config {

public Piece (int n) {

    setBackground(calcColor(n));
    }

public void Pieces() {
    new Pieces();
        //This class contains nothing at the moment.
    }

Color calcColor(int n) {
    boolean everysecondSquare = (n % 2 == 0);
    boolean everysecondRow = ((n / ROWS) % 2 == 0);
    return (everysecondSquare != everysecondRow ? P1Color : P2Color);

    }

} 
```

**配置.java**

```
import java.awt.Color;

public interface config {

public int ROWS = 8;
public int COLS = 8;

Color P1Color = (new Color(245,222,179));
Color P2Color = (new Color(244,164,96));

} 
```

我很清楚这可能是非常糟糕的编码，因为我对 Java 很陌生。如果有人能帮我解决这里的颜色问题，我会非常高兴和感激，因为我已经被困了好几天了，没有进一步了解。我不希望有人为我完成代码，而只是在到达那里的路上帮助我。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:21:41.823

那这个呢？

```
for (i = 1; i < 65; i++) {
    squareArray[i] = i;

    JButton b=new JButton("" + squareArray[i]);
    b.setBackground(desiredColorHere);
    frame.add(b);
} 
```

# javascript - 永久谷歌地图信息窗口

> ID：15132658
> 
> 赞同：0
> 
> 时间：2013-02-28T10:05:53.470
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个具有动态位置的标记（即定期更新）。单击标记时，会显示一个信息窗口，但当标记位置更新时，信息窗口会自动关闭。我希望在更新标记位置时，信息窗口位置也应该自动更新。如何解决这个问题。

PS :- infowindow 包含一个可由用户编辑的表单。

问题：当用户正在编辑/填写表单并且标记位置得到更新（表单尚未提交）时，表单将被关闭并且用户将丢失他的数据。

```
<script type="text/javascript">
var map;
var lat_longs = new Array();
var geocoder = null;
var infoWindow = new google.maps.InfoWindow();
var trafficLayer = null;
var weatherLayer = null;
var markers = new Array();
var poi = new Array();
var fitMap = 0;
loc_array = new Array();
totUpdateOld = new Array();
ident = 0;

function showMap() {
    var mapOptions = {
        zoom: 5,
        center: new google.maps.LatLng('-0.57128','117.202148'),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    geocoder = new google.maps.Geocoder();
    trafficLayer = new google.maps.TrafficLayer();

    weatherLayer = new google.maps.weather.WeatherLayer({
        temperatureUnits: google.maps.weather.TemperatureUnit.CELCIUS
    });

    showCarPosition(function() {
        fitMapToBounds();
    });
}

function showCarPosition(){
    if (markers.length>0){
        ident = 2;
    }
    var car_icon;
    jQuery.getJSON('<s:property value="jsonUrl"/>','', function(data) { 
        var arrayCar = data.listCar;
        for (var i = 0; i < arrayCar.length; i++) {
            var car = arrayCar[i];
            var status = "";
            var tanggal = "never";
            var car_type = (car.type != "" || car.type != null)?' ('+car.type+')':'';
            if(car.lastUpdate == null){
                car_icon = ctx + 'web/img/car_black.png';
                status = "Belum pernah kirim data";
            }else if((not_active = (currentdate - stringToDate(car.lastUpdate))/ 1000 / 60) >= 30){ //diff in minute
                car_icon = ctx + 'web/img/car_red.png';
                status = convertMinute(not_active);
            }else if((((currentdate - stringToDate(car.lastUpdate))/ 1000 / 60) >= 5) && (car.lastSpeed == 0)){ //diff in minute
                car_icon = ctx + 'web/img/car_yellow.png';
                status = "Berhenti";
            }else               
                car_icon = ctx + 'web/img/car_green.png';
            if(car.lastUpdate != null){
                var splitDate = car.lastUpdate.split("T");
                tanggal = splitDate[1]+" "+splitDate[0].split("-")[2]+"-"+bulan[parseInt(splitDate[0].split("-")[1])]+"-"+splitDate[0].split("-")[0];
            }

            var coordinate = new google.maps.LatLng(car.latitude, car.longitude);
            var windowContent =[
                  '<div class="windowcontent"><ul class="nav infowindow nav-pills nav-stacked">',
                  '<li class="active"><a href="viewcarlog?id='+car.id+'" class="viewlog">'+car.plate +car_type+' - '+ car.driverName +'</a></li>',
                  (status != null)?'<li>'+status+'</li>':'',
                  (car.phoneNumber != null)?'<li>Phone : ' + car.phoneNumber+ '</li>':'',
                  '<li>Last Temp : ' + car.lastTemp+ '</li>',
                  (parseInt(car.lastSpeed)>0)?'<li>Last Speed : ' + car.lastSpeed+ '</li>':'',
                  (car.type != "" || car.type != null)?'<li>Last Speed : ' + car.lastSpeed+ '</li>':'',
                  '<li>Last Connected : ' + tanggal+ '</li>',
                  '<li>'+((car.note != null)?car.note:'no notes')+'<li>',
                  '<div id="'+car.id+'"></div></ul>',
                  '<span id="'+car.id+'" onclick="editinfo(this, \''+car.note+'\');">Edit Note</span></div>']
                  .join('');
            if (ident == 0){
                var marker = createMarker({
                    map: map,
                    position: coordinate,
                    icon: car_icon,
                    labelContent: ((car.driverName == null)?car.plate:car.driverName)+'-'+car.lastSpeed,
                    labelAnchor: new google.maps.Point(32, 0),
                    labelClass: "unitlabel",
                    labelStyle: {opacity: 1.0}
                });
                loc_array[car.id] = i;
                bindInfoWindow(marker, 'click', windowContent);
                google.maps.event.addListener(infoWindow, 'domready', function(){ 
                    jQuery('.viewlog').click(function() {
                        jQuery.history.load(jQuery(this).attr('href'));
                        return false;
                    });
                }); 
            }else{
                if (car.totalUpdate > totUpdateOld[car.id]) {
                    var map_post = loc_array[car.id];
                    markers[map_post].setMap(null);
                    var marker = updateMarker({
                        map: map,
                        position: coordinate,
                        icon: car_icon,
                        labelContent: ((car.driverName == null)?car.plate:car.driverName)+'-'+car.lastSpeed,
                        labelAnchor: new google.maps.Point(32, 0),
                        labelClass: "unitlabel",
                        labelStyle: {opacity: 1.0}
                    }, map_post);
                    bindInfoWindow(marker, 'click', windowContent);
                    google.maps.event.addListener(infoWindow, 'domready', function(){ 
                        jQuery('.viewlog').click(function() {
                            jQuery.history.load(jQuery(this).attr('href'));
                            return false;
                        });
                    }); 
                }
            }
            totUpdateOld[car.id] = car.totalUpdate;
        }
        fitMapToBounds();
    });
    setTimeout("showCarPosition()",5000);
}

function createMarker(markerOptions) {
    var marker = new MarkerWithLabel(markerOptions);
    markers.push(marker);
    lat_longs.push(marker.getPosition());
    return marker;
}

function updateMarker(markerOptions,id) {
    var marker = new MarkerWithLabel(markerOptions);
    markers[id] = marker;
    lat_longs[id] = marker.getPosition();
    return marker;
}

function fitMapToBounds() {
    var bounds = new google.maps.LatLngBounds();
    if (fitMap == 0){
        if (lat_longs.length>0) {
            for (var i=0; i<lat_longs.length; i++) {
                bounds.extend(lat_longs[i]);
            }
            map.fitBounds(bounds);
            fitMap = 1;
        }
    }
}

function bindInfoWindow(marker, event, windowContent) {
    google.maps.event.addListener(marker, event, function() {
        infoWindow.setContent(windowContent);
        infoWindow.open(map, marker);
    });
}

jQuery(document).ready(function() {
    showMap();
});

</script>

<div id="map_canvas" class="widgettitle" style="height:540px;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:47:35.813

在调用停止重新定位的文本字段上放置一个 onblur 事件处理程序。

然后当它提交并转到新点时，重新启动它（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:44:28.650

当标记位置改变时调用这个函数。

```
infowindow.open(map,marker); 
```

# php - 将字符串数组（每个字符串都有点分隔值）转换为多维数组

> ID：15132659
> 
> 赞同：4
> 
> 时间：2013-02-28T10:05:53.753
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
Array
(
    [0] => INBOX.Trash
    [1] => INBOX.Sent
    [2] => INBOX.Drafts
    [3] => INBOX.Test.sub folder
    [4] => INBOX.Test.sub folder.test 2
) 
```

如何将此数组转换为这样的多维数组：

```
Array
(
    [Inbox] => Array
        (
            [Trash] => Array
                (
                )

            [Sent] => Array
                (
                )

            [Drafts] => Array
                (
                )

            [Test] => Array
                (
                    [sub folder] => Array
                        (
                            [test 2] => Array
                                (
                                )

                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:37:41.447

试试这个。

```
<?php
$test = Array
(
    0 => 'INBOX.Trash',
    1 => 'INBOX.Sent',
    2 => 'INBOX.Drafts',
    3 => 'INBOX.Test.sub folder',
    4 => 'INBOX.Test.sub folder.test 2',
);

$output = array();
foreach($test as $element){
    assignArrayByPath($output, $element);   
}
//print_r($output);
debug($output);
function assignArrayByPath(&$arr, $path) {
    $keys = explode('.', $path);

    while ($key = array_shift($keys)) {
        $arr = &$arr[$key];
    }
}

function debug($arr){
    echo "<pre>";
    print_r($arr);
    echo "</pre>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:52:12.193

我对此非常感兴趣，因为尝试这样做时遇到了巨大的困难。在查看（并通过）乔恩的解决方案后，我想出了这个：

```
$array = array();
function parse_folder(&$array, $folder)
{
    // split the folder name by . into an array
    $path = explode('.', $folder);

    // set the pointer to the root of the array
    $root = &$array;

    // loop through the path parts until all parts have been removed (via array_shift below)
    while (count($path) > 1) {
        // extract and remove the first part of the path
        $branch = array_shift($path);
        // if the current path hasn't been created yet..
        if (!isset($root[$branch])) {
            // create it
            $root[$branch] = array();
        }
        // set the root to the current part of the path so we can append the next part directly
        $root = &$root[$branch];
    }
    // set the value of the path to an empty array as per OP request
    $root[$path[0]] = array();
}

foreach ($folders as $folder) {
    // loop through each folder and send it to the parse_folder() function
    parse_folder($array, $folder);
}

print_r($array); 
```

# .net - 我可以在 App.config 中声明和使用 DTD 实体吗？

> ID：15132662
> 
> 赞同：7
> 
> 时间：2013-02-28T10:05:59.443
> 
> 标签：.net, app-config, dtd

我试图在我的`App.config`. 例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration [
  <!ENTITY dataSource ".\SQLEXPRESS">
]>
<configuration>
  <appSettings>
    <add key="FooDataSource" value="&dataSource;" />
  </appSettings>
  <connectionStrings>
    <add name="Foo" connectionString="Data Source=&dataSource;;Integrated Security=SSPI;" />
  </connectionStrings>
</configuration> 
```

用于`System.Configuration.ConfigurationManager`读取`appSettings`或`connectionStrings`不会引发错误，但它也不会解析 DTD 实体。

（有时程序根本不会执行。我不知道为什么 .NET 有时只抱怨配置错误。）

我对 DTD 的使用不正确，还是 .NET 不支持自定义 DTD 实体`App.config`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:14:24.273

System.Configuration 使用默认的 XmlReaderSettings 来确定如何读取 .config 文件。其中有一个 ProhibitDtd 属性。您可以使用以下代码查看其默认值：

```
 Console.WriteLine(new XmlReaderSettings().ProhibitDtd); 
```

输出：真

这就是为什么您的 .config 文件不起作用的简单解释。没有任何方法可以将其配置为覆盖设置。

解释程序启动困难的原因需要更多的努力。第一次读取文件的时间很早，甚至在 CLR 启动之前。引导程序需要读取 .config 文件以确定要加载的 CLR 版本，该`<requestedRuntime>`元素很重要。它没有使用成熟的 XML 解析器，它是一个非常精简的解析器，删除了所有 DTD 解析位。下载SSCLI20可以看到，XML解析器存放在clr/src/xmlparser子目录下。究竟什么可能出错并不清楚，但如果该解析器对 .config 文件有任何问题，那么您将不会找出问题可能是什么。这种情况发生得太早，无法生成任何合理的诊断。检查“输出”窗口以获取提供提示的可能退出代码号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:51:10.190

您对实体的使用是正确的；这是格式正确的 XML，使用属性中的属性引用应该没有任何问题。

它必须是 .NET* 的东西（我不知道）。

为了证明实体是正确的，下面是通过解析实体的 XSLT 身份转换传递的 XML：

**XML 输入**

```
<!DOCTYPE configuration [
  <!ENTITY dataSource ".\SQLEXPRESS">
]>
<configuration>
  <appSettings>
    <add key="FooDataSource" value="&dataSource;" />
  </appSettings>
  <connectionStrings>
    <add name="Foo" connectionString="Data Source=&dataSource;;Integrated Security=SSPI;" />
  </connectionStrings>
</configuration> 
```

**XSLT**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<configuration>
   <appSettings>
      <add key="FooDataSource" value=".\SQLEXPRESS"/>
   </appSettings>
   <connectionStrings>
      <add name="Foo"
           connectionString="Data Source=.\SQLEXPRESS;Integrated Security=SSPI;"/>
   </connectionStrings>
</configuration> 
```

*以下是我发现的一些链接，其中提到了其他人无法使 XML 实体工作：

*   [从另一个文件加载 App.Config 的一部分](https://stackoverflow.com/questions/1193863/load-parts-of-app-config-from-another-file)
*   [http://bytes.com/topic/net/answers/577026-app-config-using-doctype-entity-blocks](http://bytes.com/topic/net/answers/577026-app-config-using-doctype-entity-blocks)
*   [app.config/web.config 中的变量](https://stackoverflow.com/questions/603009/variables-within-app-config-web-config)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:24:29.233

Reflector（在.NET 4.0上）说`System.Configuration.ConfigXmlReader`（内部，密封）用于读取配置数据，它基于`System.Xml.XmlTextReader`并调用它的构造函数`XmlTextReader(TextReader input)`，谁创建`internal XmlTextReaderImpl(TextReader input)`，并且这个构造函数调用`this(string.Empty, input, new NameTable())`哪个调用`this(nt)`（仅使用NameTable）将私有字段初始化为**`this.entityHandling = EntityHandling.ExpandCharEntities;`**

MSDN[说](http://msdn.microsoft.com/en-us/library/system.xml.entityhandling.aspx)ExpandCharEntities：

> 扩展字符实体并将一般实体作为 EntityReference 节点返回。

所以看起来你不能在 .config 文件中使用你自己的实体:(

# c# - ASP.NET WebAPI - 未找到任何操作

> ID：15132666
> 
> 赞同：5
> 
> 时间：2013-02-28T10:06:04.337
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有以下代码，但请求结束 (Foo() / Bar()) 总是在`No action was found on the controller 'Device' that matches the request.`

我的 WebApiConfig 中有一个自定义路由：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new {id = RouteParameter.Optional}
    ); 
```

我的 ASP.NET WebAPI 控制器：

```
[HttpPost]
public void UpdateToken(string newToken)
{
    _deviceHandler.UpdateToken(newToken);
} 
```

要查询我的 ASP.NET WebAPI，我使用的是 RestSharp。

```
private static void Send(string resource, Method method, object payload)
{
    var client = new RestClient(baseUrl);
    var request = new RestRequest(resource, method);
    request.XmlSerializer = new JsonSerializer();
    request.RequestFormat = DataFormat.Json;
    request.AddBody(payload);

    var response = client.Execute(request);
    // ... handling response (exceptions, errors, ...)
}

public void Foo()
{
    var newToken = "1234567890";
    Send("/api/device/updatetoken", RestSharp.Method.POST, newToken );
}

public void Bar()
{
    var newToken = new { newToken = "1234567890" };
    Send("/api/device/updatetoken", RestSharp.Method.POST, newToken );
} 
```

避免此错误的唯一方法是创建一个包装类，其中包含一个属性 (get;set;)，其中包含控制器参数的名称 (newToken)。

我有很多请求发送一个或两个自定义字符串（未定义长度）作为帖子（get 长度有限）。但是为每个场景创建一个包装器实现是真正的开销！我正在寻找另一种方式。

PS：我希望我通过简化场景没有犯任何错误=）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T13:01:41.543

默认情况下，原语是从 URI 绑定的。如果你想要一个原语来自身体，你应该像这样使用 [FromBody] 属性：

```
[HttpPost]
public void UpdateToken([FromBody] string newToken)
{
    _deviceHandler.UpdateToken(newToken);
} 
```

然后将使用适当的格式化程序对字符串进行反序列化。如果是 JSON，则请求正文应如下所示：

```
"1234567890" 
```

# asp.net-web-api - 从 asp.net web api 自定义 odata 输出

> ID：15132667
> 
> 赞同：8
> 
> 时间：2013-02-28T10:06:04.780
> 
> 标签：asp.net-web-api, odata

我正在使用新的 ASP.NET webapi odata（根据 Nuget，4.0.0 版最后发布于 27/2/2013）

基本上我是按照这里的描述做的：[http ://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api)

我正在发布我的数据传输对象并创建了 odata atom pub 提要，但我希望对其进行更多控制。主要是我希望能够做到以下几点：

*   决定提要的标题、作者和更新元素的内容
*   决定是否有编辑链接
*   更改作为我的应用程序中的类`<category term="X"`的`m:type`子属性中显示的内容。目前他们公开了具有完整命名空间的 c# 类名，但我不想公开它。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T02:20:15.713

OData 媒体类型格式化程序现在更具可扩展性。样品如下。

1) 决定提要的标题、作者和更新元素的内容

```
public class AtomMetadataFeedSerializer : ODataFeedSerializer
{
    public AtomMetadataFeedSerializer(IEdmCollectionTypeReference edmType, ODataSerializerProvider serializerProvider)
        : base(edmType, serializerProvider)
    {
    }

    public override ODataFeed CreateODataFeed(IEnumerable feedInstance, ODataSerializerContext writeContext)
    {
        ODataFeed feed = base.CreateODataFeed(feedInstance, writeContext);
        feed.Atom().Title = new AtomTextConstruct { Kind = AtomTextConstructKind.Text, Text = "My Awesome Feed" };
        return feed;
    }
}

public class CustomSerializerProvider : DefaultODataSerializerProvider
{
    public override ODataEntrySerializer CreateEdmTypeSerializer(IEdmTypeReference edmType)
    {
        if (edmType.IsCollection() && edmType.AsCollection().ElementType().IsEntity())
        {
            // feed serializer
            return new AtomMetadataFeedSerializer(edmType.AsCollection(), this);
        }

        return base.CreateEdmTypeSerializer(edmType);
    }
} 
```

并使用注册自定义序列化程序提供程序，

```
config.Formatters.InsertRange(0, ODataMediaTypeFormatters.Create(new CustomSerializerProvider(), new DefaultODataDeserializerProvider())); 
```

2) 自定义编辑链接

```
public class CustomEntityTypeSerializer : ODataEntityTypeSerializer
{
    public CustomEntityTypeSerializer(IEdmEntityTypeReference edmType, ODataSerializerProvider serializerProvider)
        : base(edmType, serializerProvider)
    {
    }

    public override ODataEntry CreateEntry(EntityInstanceContext entityInstanceContext, ODataSerializerContext writeContext)
    {
        ODataEntry entry = base.CreateEntry(entityInstanceContext, writeContext);
        if (notProduceEditLinks)
        {
            entry.EditLink = null;
        }

        return entry;
    }
}

public class CustomSerializerProvider : DefaultODataSerializerProvider
{
    public override ODataEntrySerializer CreateEdmTypeSerializer(IEdmTypeReference edmType)
    {
        if (edmType.IsEntity())
        {
            // entity type serializer
            return new CustomEntityTypeSerializer(edmType.AsEntity(), this);
        }

        return base.CreateEdmTypeSerializer(edmType);
    }
} 
```

并如上所述注册自定义序列化程序提供程序。

我们仍然不支持场景 3，即别名类型名称和命名空间。

# httpwebrequest - IBM http 服务器通过多个实例进行故障转移

> ID：15132668
> 
> 赞同：0
> 
> 时间：2013-02-28T10:06:06.290
> 
> 标签：httpwebrequest, websphere

在以下情况下我需要帮助：

我有两个 WebSphere 应用程序服务器和 WebSphere HTTP 服务器。我需要执行以下操作：

1.  当一个服务器上的请求失败或（超时）时，Http Server 不会将请求前导到另一个 WebSphere Application Server。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:42:50.627

这是一个复杂的过程，不容易解释，有很多事情可能是错误的。您是否开始使用 WAS Admin 指南？它对此过程进行了演练。在这里找到它：[http ://www.redbooks.ibm.com/abstracts/sg247615.html?Open](http://www.redbooks.ibm.com/abstracts/sg247615.html?Open)

# css - 线高的 EM

> ID：15132671
> 
> 赞同：36
> 
> 时间：2013-02-28T10:06:11.330
> 
> 标签：css, fluid-layout

我想将我的新网站从像素转换为 em。我的问题是，我是否也应该将 ems 应用于我的文本行高属性？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-28T12:05:59.923

假设“转换为 ems”意味着使用`em`单位为`font-size`，那么您应该`line-height`以一种也适应字体大小的方式进行设置。这两个属性密切相关，如果您将其中一个设置为 in`em`而将另一个（例如）设置为`px`or `pt`，则如果更改字体大小，页面将中断。因此，将本质上不同的单位用于本质上连接的属性将违背“使用 ems”的想法。

例如，如果您设置`font-size: 1.5em`and `line-height: 18px`，那么事情将取决于元素父级的字体大小，如果该大小比预期的小得多或大得多，则可能会出错。

无论您使用`em`单位还是纯数字是一个不同的问题。仅使用数字，如`line-height: 1.2`，主要等同于使用`em`单位，如`line-height: 1.2em`。但不同的是，当`line-height`被继承时，继承的是纯数字，而不是计算值。

例如，如果一个内部元素的字体大小是其父元素的两倍，那么继承的值`1.2`意味着使用其自身字体大小的 1.2 倍，这是可以的。但是如果父级有`line-height: 1.2em`，那么子级将继承一个 1.2 倍于父级字体大小的值——这比它自己的字体大小要小得多。

有关更多解释结束示例，请参见[line-height @Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/CSS/line-height)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T10:19:48.203

`line-height`可以设置在`px`, `em`'s 中，每个单元都适合。

`line-height`如果您使用因子/乘数，则效果最好并且面向未来，这意味着没有单位，而只是一个与您的字体大小相乘的数字。

```
.foo {
  font-size: 1.3em; /* based that 1em == 10px */
  line-height: 1.3; /* 16.9px line-height */
} 
```

所以，是的，你可以，回答你的问题：不，你不应该。

只需选择基于因子的 line-height 即可。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-21T10:20:44.237

建议对 line-height 使用无单位数（以防止继承问题）。然后，计算的 line-height 将是**无单位值乘以元素的 font size 的乘积**。

使用 CSS 快捷方式可能更方便`font`，如下所示（示例取自 Mozilla CSS 文档）：

```
div { font: 10pt/1.2  Georgia,"Bitstream Charter",serif } 
```

此处给出了为什么首选无单位值的一个很好的例子：[Preferless numbers for line-height values](https://developer.mozilla.org/en-US/docs/Web/CSS/line-height#Prefer_unitless_numbers_for_line-height_values)。

# java-ee-6 - 如何将 EJB 注入抽象 CDI 类？

> ID：15132673
> 
> 赞同：2
> 
> 时间：2013-02-28T10:06:14.607
> 
> 标签：java-ee-6, glassfish-3, cdi, ejb-3.1, codi

我在将 EJB 注入作为我的 JSF CDI bean 的父类的抽象类时遇到问题。在我的项目中，我使用的是 MyFaces CODI 1.0.5 (ViewScope)、Omnifaces 1.3、PrimeFaces 3.4.2 和 GlassFish 3.1.2。

应用程序是 EAR，抽象类在 EJB 模块中，JSF CDI bean 在 WAR 模块中：

```
webframework-demo.ear
|__ webframework-war.war -> concrete JSF CDI bean
|__ webframework-ejb-lib.jar -> abstract class with EJB injection
|__ lib\
    |__ shared libs 
```

我的抽象类：

```
public abstract class AbstractListPageAction<T extends AbstractViewBean<K>, K extends Serializable> {

    ...

    @EJB
    private CriteriaFacadeLocal<K> facade;

    @PostConstruct
    public void create() {
        ...

        facade.setEntityClass(getEntityClass());
        ...
    }

    ...

    public abstract Class<K> getEntityClass();

} 
```

我的 CDI 豆：

```
import org.apache.myfaces.extensions.cdi.core.api.scope.conversation.ViewAccessScoped;

@Named
@ViewAccessScoped
public class UserListAction extends AbstractListPageAction<UserViewBean, UserEntity>
        implements Serializable {

    private static final long serialVersionUID = -1178878323047991855L;

    ...

    @Override
    public Class<UserEntity> getEntityClass() {
        return UserEntity.class;
    }

    ...
} 
```

当我部署应用程序并访问 JSF 页面时，会创建 UserListAction 但未注入 CriteriaFacadeLocal 并且我在 @PostConstruct 方法中以 NullPointerException 结束。

当我更改 UserListAction 并添加一个空的 @PostConstruct 方法时，注入 CriteriaFacade 并且一切正常：

```
@Named
@ViewAccessScoped
public class UserListAction extends AbstractListPageAction<UserViewBean, UserEntity>
        implements Serializable {

    private static final long serialVersionUID = -1178878323047991855L;

    ...

    @PostConstruct
    public void init() {
    }

    @Override
    public Class<UserEntity> getEntityClass() {
        return UserEntity.class;
    }

    ...
} 
```

我在每个模块中都有 beans.xml。但是为什么我的 CDI bean 中必须有一个空的 @PostConstruct 方法？放置在 EJB 模块中的抽象类是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:09:35.037

在 EJB 中使用泛型可能会有些问题。

请参阅[EJB 3.1 中泛型的使用](http://blog.diabol.se/?p=353)。

或者，您可以`qualified`在层次结构中创建 EJB。请参阅[javax.inject.Qualifier](http://docs.oracle.com/javaee/6/api/javax/inject/Qualifier.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T14:59:33.850

*我从编辑的问题中创建了答案：*

我认为这可能是 EAR/EAR 模块类加载器的问题。我将 webframework-ejb-lib.jar 移动到 webframework-war.war WEB-INF/lib 文件夹中：

```
webframework-demo.ear
|__ webframework-war.war -> concrete JSF CDI bean
|   |__ WEB-INF
|       |__lib
|          |__ webframework-ejb-lib.jar -> abstract class with EJB injection
|__ ... (other ejb modules)
|__ lib\
    |__ shared libs 
```

突然一切都好了。

# copy - jstree crrm.move.check_move cy 并不总是定义

> ID：15132675
> 
> 赞同：0
> 
> 时间：2013-02-28T10:06:23.067
> 
> 标签：copy, jstree

我想用我可以检查节点是否被移动或复制以及用户是否有权这样做的功能来实现 crrm.move.check_move。我的代码如下所示：

```
var _isUserHasRightToMoveNodes = false; // set depending on user rights
var _isUserHasRightToCopyNodes = true; // set depending on user rights

var _jsTreePlugins = ["themes", "html_data", "ui"];
if ((_isUserHasRightToMoveNodes) || (_isUserHasRightToCopyNodes)) {
    _jsTreePlugins.push("dnd");
    _jsTreePlugins.push("crrm");
}

$( this ).jstree({
     plugins: _jsTreePlugins,
     ...,
     crrm : {
        "move" : {
            "check_move" : function( m ) {
                // wenn der Knoten verschoben wird
                if ((!_isUserHasRightToMoveNodes) && ((m.cy == null) || (!m.cy)))
                return false;
                // wenn der Knoten kopiert wird
                if ((!_isUserHasRightToCopyNodes) && (m.cy != null) && (m.cy))
                    return false;
                return true;
             }
        }
     }
}); 
```

当我复制一个节点时，它似乎不可能（红十字图标），但它仍在被复制（应该如此）。

我已经用 firebug 进行了调试，发现 m.cy 仅在节点被删除时才定义，而不是在鼠标悬停在其他节点上时定义，因此是红十字图标。但是当然，一旦它被删除，m.cy 就会被定义并复制节点，就像它应该的那样。

我做错了什么还是这是一个错误？有什么解决方法吗？

谢谢你的帮助！塔尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T17:28:44.937

```
Your return is not as expected - Sample code below should help you:

"crrm": {
    "move" : {
         "check_move" : 
             function(tree)
             {
               //check the condition to enable the drag
                   if(tree.r.attr("id") !=  ...){   
                        return {
                               after : true,
                               before : false,
                               inside : false
                               }
                   }else{
                    return false;
                   }       
              }            
          }
} 
```

# c# - HTML 助手标签文本框使其只读

> ID：15132681
> 
> 赞同：1
> 
> 时间：2013-02-28T10:06:51.000
> 
> 标签：c#, html, asp.net-mvc, html-helper

如何使以下字段只读..？

```
<%: Html.TextBoxFor(x => x.Age, new { value = "0"}) %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:08:01.000

您可以设置`readonly`属性：

```
<%= Html.TextBoxFor(x => x.Age, new { @readonly = "readonly" }) %> 
```

如果您想禁用文本框（与用户的只读相同，但在提交表单时其值不会发送到服务器），您可以使用该`disabled`属性：

```
<%= Html.TextBoxFor(x => x.Age, new { disabled = "disabled" }) %> 
```

就设置文本框的默认值而言，我建议您在填充模型时在控制器上执行此操作：

```
MyViewModel model = ...
model.Age = 0;
return View(model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:21:25.473

使用以下

```
<%= Html.TextBoxFor(x => x.Age, new { @readonly = "readonly" }) %> 
```

您可以在调用这样的助手时一次传递多个属性

```
<%= Html.TextBoxFor(x => x.Age, new { @readonly = "readonly", @class="Text", style="INLINE STYLE" }) %> 
```

# zend-framework - 通过雅虎登录！帐户

> ID：15132682
> 
> 赞同：1
> 
> 时间：2013-02-28T10:06:52.657
> 
> 标签：zend-framework, single-sign-on, yahoo-api

我正在使用 Zend Framework 1.x 来开发我的 Web 应用程序。我想创建“通过 Yahoo! 帐户登录”功能。以下这些选项是我尝试过的：

1.  使用[雅虎！社交 API 客户端](http://developer.yahoo.com/social/sdk/php/)，但在 PHP 5.3 中，它通常会捕获关于静态和非静态、对象和非对象方法的错误“严格标准”。
2.  我尝试了另一种方式，使用[Zend_OAuth](http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html)。但是，这一次，我得到了 consumer_key_rejected 错误。

两种方式，我都使用 OAuth 来获取用户信息。请帮我解决这个问题或告诉我其他创建“通过 Yahoo! 帐户登录”功能的方法。

谢谢

**编辑：** 使用第二种方法，如果我只想获取基本的用户配置文件（电子邮件、姓名、性别），它会得到 consumer_key_rejected。当我注册新范围（联系人）时，我得到了 oauth_token 和 oauth_verifer，但我呆在那里，我不知道下一步如何获取用户信息。

# zend-framework - 我是否手动设置我的 zend baseUrl？

> ID：15132691
> 
> 赞同：2
> 
> 时间：2013-02-28T10:07:24.077
> 
> 标签：zend-framework

我知道 baseUrls 大多是在 zend 项目中自动设置的，当从子文件夹运行应用程序时它们会派上用场，但我是从根`public`文件夹运行我的应用程序，使用 server-name `myzend.loc`。

所以当我做`echo $this->baseUrl()`or时`var_dump($this->baseUrl())`，我得到一个空字符串`''`。这是正常的，并且是没有从子文件夹运行应用程序的结果吗？还是我手动设置baseUrl；例如`$request->getHelper('baseUrl')->setBaseUrl($_SERVER['SERVER_NAME']);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:11:07.683

`$this->baseUrl()`由zend框架设置..你不需要设置..你得到一个空baseurl的原因是在你的apache httpd.conf中你的Virtualhost documentroot被设置到项目目录

`DocumentRoot "/usr/local/apache2/docs/yourproject"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T12:13:04.353

尽管有名称，但`baseUrl`返回绝对路径，而不是 URL。它返回一个空字符串将是您对不在子文件夹中的普通 ZF 项目所期望的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T15:12:16.270

快速回答是，在我的 ZF1 应用程序服务于虚拟 Web 主机根目录的站点上，我还得到一个空字符串：

```
Zend_Controller_Front::getInstance()->getBaseUrl() 
```

正如@TimFountain 指出的那样，它本身不会返回真正的URL，并带有`http`或`https`协议前缀。因此，它可以更多地解释为文件路径而不是 URL。但它更多的是*相对*文件路径：相对于 docroot 的路径。

而且，当然，如果您将`baseUrl`- 可能设置为带有协议前缀的真实 URL - 那么所有解释都将关闭：它只会返回您设置的任何内容。

还值得注意的是关于在`baseUrl()`中实现的 view-helper的两件事`Zend_View_Helper_BaseUrl`：

1.  它使用上面的前置控制器`getBaseUrl()`方法。

2.  这需要争论！

对于（2），根据我的经验，许多人使用`baseUrl()`视图助手如下（例如在视图脚本中）：

```
<?php echo $this->baseUrl() . '/assets/css/styles.css'; ?> 
```

但我发现写起来更简洁：

```
<?php echo $this->baseUrl('/assets/css/styles.css'); ?> 
```

对我来说，这不仅仅是几个额外字符的问题。更多的是应用程序的核心应该知道他自己的内部结构，而不是他的部署细节。以这种方式使用`baseUrl()`view-helper 隐含地承认需要一些部署感知映射来解析内部部署独立资产引用到其部署后对应项。

# java - Java - 根据当前日期检查文件名？

> ID：15132693
> 
> 赞同：1
> 
> 时间：2013-02-28T10:07:29.377
> 
> 标签：java, date, directory

我对 Java 还是很陌生，并且正在制作一个小程序，它必须检查一个文件夹，里面装满了数千个文件，这些文件以它们以某种格式创建的日期命名（`YYYYMMDD`例如`20130228`，将它们移动到新目录中。目前我的代码可以扫描文件夹并给我一个文件名列表，如果它发现有多个文件，它会创建它们需要移动到的文件夹，但我将如何实际去做检查文件名并移动它们是否超过 7 天？

这是我到目前为止所拥有的：

```
public static void main(String[] args) {
    Date date = new Date();
    SimpleDateFormat dateFormat = new SimpleDateFormat("YYYY-MM-DD");

    // Gets a list of files in specified folder
    File folder = new File("C:/Users/workspace/Test");
    File[] listOfFiles = folder.listFiles();
    for (File file : listOfFiles) {
        if (file.isFile()) {
            System.out.println(file.getName());
        }
    }

    // Creates a temp folder with the date if files are in the specified folder
    File file = new File("C:/Users/workspace/Test");
    if (file.isDirectory()) {
        String[] files = file.list();
        if (files.length > 0) {
            File dir = new File("Temp " + (dateFormat.format(date)));
        dir.mkdir();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:20:18.280

```
class OldFileFilter extends FileFilter {
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    public boolean accept(File f) {
        Date date = dateFormat.parse(f.getName());
        return System.currentTimeMillis() - date.getTime() > 7 * 24 * 3600 * 1000;
    }

    public String getDescription() {
        return "Filter old files";
    }
}

File[] files = dir.listFiles(new OldFileFilter());
//Then move... 
```

对于 Java 7 中的 nio，请查看[How to replace File.listFiles(FileFilter filter) with nio in Java 7](https://stackoverflow.com/a/14893382/1365960)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:11:39.687

可能有两种解决方案

1- 要获取文件的最后修改日期，我们可以使用 File 类的 lastModified() 方法。此方法返回一个 long 值。获取此值后，您可以创建 java.util.Date 类的实例并将此值作为参数传递。此日期将保存文件的最后修改日期。

您可以获取所有文件并将每个文件的 lastModified 日期与您请求的日期进行比较。

2-

```
public static void deleteFilesOlderThanNdays(int daysBack, String dirWay, org.apache.commons.logging.Log log) {

    File directory = new File(dirWay);
    if(directory.exists()){

        File[] listFiles = directory.listFiles();            
        long purgeTime = System.currentTimeMillis() - (daysBack * 24 * 60 * 60 * 1000);
        for(File listFile : listFiles) {
            if(listFile.lastModified() < purgeTime) {
                if(!listFile.delete()) {
                    System.err.println("Unable to delete file: " + listFile);
                }
            }
        }
    } else {
        log.warn("Files were not deleted, directory " + dirWay + " does'nt exist!");
    }
} 
```

在这里而不是删除你应该将这些文件移动到你想要的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:16:20.673

解析文件名，检查现在和日期之间的差异是否> 7天

```
Date date = dateFormat.parse(file.getName());
if (System.currentTimeMillis() - date.getTime() > 7 * 24 * 3600 * 1000) {
    // older than 7 days
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:19:00.303

您可以通过将文件名与当前日期进行比较来做到这一点：

```
 SimpleDateFormat formatter;
          formatter = new SimpleDateFormat("yyyyMMdd");
          Date d = null;
          try {
            d = formatter.parse(filename);//filename of the file
        } catch (ParseException e) {
            e.printStackTrace();
        }

     Date newDate = new Date();
    if (newDate.getTime() - d.getTime() > 7 * 24 * 3600 * 1000) {
        //Whatever You want to do
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T11:58:31.013

一些想法……</p>

谨防从跟踪中省略时间。我知道你在考虑一整天。但请记住，一天的开始和结束取决于时区。如果不指定时区，则使用 JVM 的默认值。这意味着，如果您将应用程序部署在其他计算机/服务器上，或者以其他方式更改计算机/JVM 的时区，您将获得不同的行为。

如果您在格式中包含连字符，您将遵循常见的[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式：`YYYY-MM-DD`. 这种格式更容易阅读。Joda-Time 也方便地使用该格式（如下所述）。

据我所知，当您在文件夹/目录中存储超过两三千个文件时，大多数文件系统都会变得暴躁。验证本机操作系统文件系统的行为，或将文件分组在嵌套文件夹中，例如按月或按年。

# 乔达时间

[使用Joda-Time](http://www.joda.org/joda-time/)库，这种日期时间工作更容易。与 Java 捆绑在一起的`java.util.Date`&`Calendar`类是出了名的麻烦，应该避免使用。

在 Joda-Time 中，如果您确实确定要忽略时间和时区，请使用该[`LocalDate`](http://www.joda.org/joda-time/apidocs/org/joda/time/LocalDate.html)课程。否则，使用[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)类加上一个[`DateTimeZone`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html)对象。

```
LocalDate now = LocalDate.now();
LocalDate weekAgo = now.minusWeeks( 1 );

String input = "20130228";

DateTimeFormatter formatter = DateTimeFormat.forPattern( "yyyyMMdd" );
LocalDate fileLocalDate = formatter.parseLocalDate( input );

boolean isThisFileOld = fileLocalDate.isBefore( weekAgo ); 
```

# mysql - 如何将数据库从 mysql 迁移到 postgres

> ID：15132696
> 
> 赞同：0
> 
> 时间：2013-02-28T10:07:33.693
> 
> 标签：mysql, postgresql

我有一个 .sql 文件，但无法使用 pgadmin 打开它。我如何导入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:11:21.617

PostgreSQL wiki 有很多有趣的链接：[http ://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL#MySQL](http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL#MySQL)

# jinja2 - jinja2 模板字符限制

> ID：15132702
> 
> 赞同：4
> 
> 时间：2013-02-28T10:07:45.180
> 
> 标签：jinja2

在`{{blog.content}}`我想限制查看者最多只能看到 50 个字符，我该如何使用 jinja2 来做到这一点？

在搜索了他们的文档后，我发现它`{{ s|autolink[ length[ nofollow]] }}`有一个长度属性，但它会自动链接！我不希望这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:25:30.333

您是否尝试过 python 切片表示法？

```
{{ blog.content[:50] }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T21:04:07.383

jinja2 的文档说使用`{{ blog.content|truncate(50) }}`. 这就是我迄今为止一直在使用的。

[您可以在此处](http://jinja.pocoo.org/docs/dev/templates/#truncate)找到模板文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T23:07:10.473

**它对我有用：**

`{{article.content|safe|truncatechars:50}}`

采用`this -> truncatechars:XX <- type here`

[见 DOC 在这里](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#truncatechars)

# c++ - 检测到堆损坏：在 0x00DB4E70 的正常块 (#151) 之后

> ID：15132705
> 
> 赞同：0
> 
> 时间：2013-02-28T10:07:51.037
> 
> 标签：c++, visual-studio, memory-management

当程序试图删除我的列表时，我已经为我的类 Word 实现了一个列表，并且检测到了 HEAP CORRUPTION。它在析构函数中进入循环并删除第一个元素，然后当他第二次进入并试图破坏“新”头时，我得到堆损坏错误。我不明白为什么会出错。任何帮助将非常感激。

**字.h：**

```
#include <cstring>
class Word
{
protected:
  char* word;
  char* type;
public:
  Word();
  Word(char );
  Word(char *);
  Word(char *, int);
  Word(const Word&);

  Word& operator=(const Word &);

  void setWord(char);
  void setWord(char *);
  void setWord(char*, int);

  void setType(char);
  void setType(char*);
  void setType(char*, int);

  ~Word();
}; 
```

**单词列表.h：**

```
#include "Word.h"
#include <cstdlib>

class WordList
{
public:
 struct Node
 {
    Word data;
    Node  *next, *prev;
    //~Node();
 };
 Node *head;
 Node *tail;
 WordList();
 ~WordList();
 void add(Word &d);

}; 
```

**单词列表.cpp：**

```
#include "WordList.h"

WordList::WordList(void)
{
head = nullptr;
tail = nullptr;
}

WordList::~WordList(void)
{
   while(head != nullptr)
   {
    Node *n = head->prev;
    delete head;
    head = n;
   }
}

void WordList::add(Word &d)
{
  Node *n = new Node;
  n->data = d;   // I overload =, and it copies information from d to data
  n->next = head; 
  if (head!=nullptr)
    head->prev = n;
  if(head == nullptr){
    head = n;
    tail = head;
  } else 
    head = n;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:13:55.383

在析构函数中

```
 Node *n = head->prev; 
```

需要是

```
 Node *n = head->next; 
```

如果您按照添加方法进行操作，您会发现您从未设置`n`过`prev`值，因此`head->prev`具有与您从未设置过的值相同的值`n->prev`（为空），留下`head->prev`垃圾值，删除该地址获胜不要漂亮。

# kendo-ui - kendoAutoComplete 选项，例如 dataTextField？

> ID：15132709
> 
> 赞同：1
> 
> 时间：2013-02-28T10:08:09.917
> 
> 标签：kendo-ui

我的 kendoAutoComplete 有问题我想将两个字段绑定到 kendoAutoComplete，现在我可以将一个字段名称绑定到 dataTextField 但对于像 id 这样的另一个字段我没有任何其他选项，以下是我的代码

```
var alld="";
function getData(req) {
            $.ajax({
                url: 'BookingCity.asmx/GetAllCityBus',
                contentType: 'application/json; charset=utf-8',
                type: 'POST',
                dataType: 'json',
                minLength: 1,
                async: false,
                cache: false,
                data: "{'prefixText':'" + req + "'}",
                success: function(response) {
                    alld = response.d;

                                   },
                error: function(xhr, status) {
                    alert("error");
                }

            });
        }   
 $("#totext").kendoAutoComplete({
                dataSource: {
                    read: getData($("#totext").attr("value")),
                    data: alld

                },
                minLength: 2,
                placeholder: "Select city...",
                dataTextField: "Name",
                dataTextField:"Id"

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:34:39.747

我想你可能正在寻找`dataValueField:"Id"`

**笔记：**

kendoAutoComplete 中不使用 dataValueField（我很抱歉）。它错误地出现在 Kendo UI 网站的演示页面上。似乎可以使用下拉列表或组合框。

*这是假设您需要返回一个与 dataTextField 对应的值（如 Id）。*

您可以在[Kendo UI 论坛上阅读更多相关信息 - DataValueField 是否存在？](http://www.kendoui.com/forums/ui/autocomplete/datavaluefield-does-exist.aspx)

或查看此相关摘录：

> 自动完成 UI 小部件仅保留选定的文本。实际上，您只能发布输入元素的内容。这是预期的行为。至于演示，“dataValueField”是错误留下的，我们将在 KendoUI 的下一个版本中修复它。
> 
> 为了实现您的目标，**您将需要使用 dropdownlist 或 combobox**，它们会保留选定的 id。
> 
> 问候， Georgi Krustev Telerik 团队

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:04:36.820

您可以使用**模板**来实现这一点：

```
$("#totext").kendoAutoComplete({
            template: "#=Name# #=Adress#",
            //.. rest of the options 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:06:39.223

你为什么要这样做？您只能将一个字段绑定到 dataTextField 属性，因此如果您想显示两个，只需向数据源添加一个额外的计算字段，其中包含两个字段的连接值并绑定到该字段。

# python - 连接组件清理 cv2.arcLength OpenCv：断言失败

> ID：15132712
> 
> 赞同：0
> 
> 时间：2013-02-28T10:08:25.653
> 
> 标签：python, opencv, image-processing

我正在尝试在 OpencCV 2.3.4 Python API 中实现连接组件噪声消除，如[学习 OpenCV中的第 287 页所述](http://www.cse.iitk.ac.in/users/vision/dipakmj/papers/OReilly%20Learning%20OpenCV.pdf)

我已经计算了轮廓的长度，其中我得到了一个神秘的断言错误。

```
OpenCV Error: Assertion failed (curve.checkVector(2) >= 0 && (curve.depth() == CV_32F || curve.depth() == CV_32S)) in unknown function, file ..\..\..\OpenCV-2.4.3\modules\imgproc\src\contours.cpp, line 1886 
```

这是我的代码：

```
import cv2
import os
import numpy as np
import cPickle

CVCONTOUR_APPROX_LEVEL = 2
CVCLOSE_ITR = 1

def main():
    mask = cv2.imread('input.jpg', cv2.CV_LOAD_IMAGE_GRAYSCALE)
    findConnectedComponents(mask)

def findConnectedComponents(mask,
                            poly1Hull0 = 1,
                            perimScale = 4,
                            num = None,
                            bbs = None,
                            centers = None):
    cv2.morphologyEx(mask, cv2.MORPH_OPEN, np.array(0), iterations=CVCLOSE_ITR)
    cv2.morphologyEx(mask, cv2.MORPH_CLOSE, np.array(0), iterations=CVCLOSE_ITR)

    contours = cv2.findContours(mask, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

    #the Pickle trick solves some strange type errors
    tmp = cPickle.dumps(contours)    
    contours = cPickle.loads(tmp)

    for contour in contours:
        perimeter = cv2.arcLength(np.array(contour), True)

if __name__ == '__main__':
    main()
    print 'done' 
```

任何想法错误意味着什么以及我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:08:15.503

1 -`cv2.findContours()`为您提供两个输出，**轮廓和层次结构**。您只指定了轮廓。所以更改如下（这是主要错误）：

```
contours,hierarchy = cv2.findContours(mask, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE) 
```

2 -`contours`是一个 numpy 数组的列表。每个数组都是一个轮廓。因此，当您将轮廓传递给您时，`cv2.arcLength()`您无需再次将其设为 numpy 数组。（这不是错误，而是不必要的操作），因此将该行更改如下：

```
 for contour in contours:
        perimeter = cv2.arcLength(contour, True) 
```

现在尝试您的代码并检查它是否有效！

有关 OpenCV 上的轮廓操作的更多详细信息，**[请访问此处。](http://opencvpython.blogspot.com/2012/06/hi-this-article-is-tutorial-which-try.html)**

# gwt - 如何使用 Bootstrap Typeahead 的选定值设置文本框值？

> ID：15132717
> 
> 赞同：0
> 
> 时间：2013-02-28T10:08:44.170
> 
> 标签：gwt, uibinder, gwt-bootstrap

我有以下 gwt-bootstrap ui.xml ：

```
<b:Typeahead ui:field="typeahead">
   <b:TextBox ui:field="searchBox" searchQuery="true"
     placeholder="Search..." />
</b:Typeahead> 
```

我如何以编程方式获取预先输入项目的建议响应“单击时”并将其设置为文本进入搜索框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:08:26.350

好吧，Adarsha Answer 在我的情况下并没有真正起作用，因为我使用的是完整的 gwt。所以我的解决方案是：

```
typeahead.setUpdaterCallback(new Typeahead.UpdaterCallback() {

        @Override
        public String onSelection(Suggestion selectedSuggestion) {
            String text = selectedSuggestion.getDisplayString();
            return null;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:39:35.003

下面的链接肯定会帮助你 -

[获取 Bootstrap 的 typeahead 的选定项目值](https://stackoverflow.com/questions/9459437/get-selected-items-value-for-bootstraps-typeahead)

一旦获得选定的值，只需执行 textbox.setValue(value)。

# java - 在java中使用正则表达式否定特定字符串的第一次出现。

> ID：15132718
> 
> 赞同：0
> 
> 时间：2013-02-28T10:08:48.867
> 
> 标签：java, regex

在附加的代码中，我正在尝试修改**String toParse = "love love koo love love koo";** 并获得输出

> 结果爱爱结果爱爱

但我正在使用的模式

> 爱[^koo]*

会给我输出结果

> 结果爱 l 结果爱 l

**即在第一次出现“k”或“o”时它的分裂**，但我的意图是在第一次**出现“koo”**时它必须分裂，这样我才能得到想要的结果。简而言之，我的意图是创建一个模式，直到第一次出现**“koo”。**

我还附上了我的java代码。

```
public static void main(String[] args) {

    // regular expression here
    Pattern pattern = Pattern.compile("love[^koo]*");
    // String here
    String toParse = "love love koo love love koo";

    Matcher matcher = pattern.matcher(toParse);

    boolean found = false;
    while (matcher.find()) {

        System.out.println("Result "
                + toParse.substring(matcher.start(), matcher.end()));
        found = true;
    }
    if (!found) {
        // console.format("No match found.%n");
        System.out.println("No match found");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:15:44.197

如果我理解你的问题是正确的，并且你想得到一切直到 koo，你的正则表达式应该是：

```
"(.+?)koo" 
```

您的结果在组中(1)

```
while (matcher.find()) {
        System.out.println("Result "+ matcher.group(1));
        found = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:39:18.800

保持简单，拆分...

```
 String str = "love love koo love love koo";
    for (String s : str.split("koo *")) {
        System.out.print("Result " + s);
    } 
```

# java - 使用 Play Framework 将选定字段加入自定义格式化程序

> ID：15132722
> 
> 赞同：0
> 
> 时间：2013-02-28T10:08:58.990
> 
> 标签：java, forms, playframework

我是 Play Framework 的新手，我想检查我的表格。

我目前尝试为日期创建自定义格式化程序。当我收到一个名为“startTimestamp”的字段时，我希望它通过我的自定义格式化程序，它将其转换为 Java 日期。

这是我的代码：

```
public static Result create() {
    Formatters.register(Date.class, new Formatters.SimpleFormatter<Date>(){

        @Override
        public Date parse(String timestamp, Locale arg1) throws ParseException {
            return new Date(Long.parseLong(timestamp));
        }

        @Override
        public String print(Date arg0, Locale arg1) {
            // TODO Auto-generated method stub
            return null;
        }

    });

    // controller code 
} 
```

我不明白它怎么可能工作。我怎么能告诉我的格式化程序需要格式化一个名为“startTimestamp”的特殊字符串字段，但我的其他字符串字段不需要它？

一开始我想将我的对象与其他一些对象绑定，但 play 表单中的 bind 方法只接受字符串。如果有解决方案，我也会感兴趣！

我清楚了吗？我的英语不是很好，所以可能会让你有点困惑^^

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:57:12.997

这将起作用，因为 play 知道在地图和具有相同属性名称的对象之间进行转换

此外，您在模板上指定映射到此表单的对象，使用两者一起足以推断要转换的字段的类型

您不能绑定其他类型然后是字符串，因为转换是在网页（Http 格式）和 Java 语言之间完成的。Http 没有对象只有字符串

我也不会说一口流利的英语

您可以在 Global.Onstart 上注册格式化程序

# java - 在单个查询中获取文档和它们的总数，包括分页

> ID：15132725
> 
> 赞同：4
> 
> 时间：2013-02-28T10:09:11.560
> 
> 标签：java, spring, mongodb, spring-data

我是 mongo 的新手，我的查询使用**mongodb 聚合框架**。我需要检索一些满足某些条件的记录（**包括分页+排序）**并获取记录**总数**。

现在，我执行以下步骤：

1.  创建`$match`运算符
    `{ "$match" : { "year" : "2012" , "author.authorName" : { "$regex" : "au" , "$options" : "i"}}}`
2.  添加了排序和分页
    `{ "$sort" : { "some_field" : -1}} , { "$limit" : 10} , { "$skip" : 0}`

查询后，我收到了预期的结果：10 个包含所有字段的文档。

对于分页，我需要知道满足这些条件的记录总数，在我的例子中是 25。

我使用下一个查询来获取计数：`{ "$match" : { "year" : "2012" , "author.authorName" : { "$regex" : "au" , "$options" : "i"}}} , { "$group" : { "_id" : "$all" , "reviewsCount" : { "$sum" : 1}}} , { "$sort" : { "some_field" : -1}} , { "$limit" : 10} , { "$skip" : 0}`

但我不想执行**两个单独的查询**：一个用于检索文档，第二个用于满足特定条件的记录总数。

我想在一个**查询**中完成并以下一种格式获得结果：

```
{
        "result" : [
                {
            "my_documets": [
                        {
                        "_id" : ObjectId("512f1f47a411dc06281d98c0"),
                        "author" : {
                                "authorName" : "author name1",
                                "email" : "email1@email.com"
                            }
                        },
                        {
                        "_id" : ObjectId("512f1f47a411dc06281d98c0"),
                        "author" : {
                                "authorName" : "author name2",
                                "email" : "email2@email.com"
                            }
                        }, .......

                    ],
                    "total" : 25
                }
        ],
        "ok" : 1
} 
```

我尝试修改组运算符： `{ "$group" : { "_id" : "$all" , "author" : "$author" "reviewsCount" : { "$sum" : 1}}}` 但在这种情况下，我得到：“**异常：组聚合字段'作者'必须定义为对象内的表达式**”。如果在 _id 中添加所有字段，则 reviewsCount 总是 = 1，因为所有记录都不同。

没有人知道它如何在单个查询中实现？也许 mongodb 对于这种情况有一些特性或操作符？使用两个单独的查询实现会降低查询数千或数百万条记录的性能。在我的应用程序中，这是非常关键的性能问题。

我整天都在研究这个问题，但找不到解决方案，所以我想求助于 stackoverflow 社区。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-07T07:34:21.860

您可以尝试在聚合管道中使用 $facet 作为

```
db.name.aggregate([
{$match:{your match criteria}},
{$facet: {
       data: [{$sort: sort},{$skip:skip},{$limit: limit}],
       count:[{$group: {_id: null, count: {$sum: 1}}}]
}}
]) 
```

在数据中，您将获得带有分页的列表，在计数中，计数变量将具有匹配文档的总数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:28:06.883

好的，我有一个示例，但我认为这是一个非常疯狂的查询，我只是为了好玩，但如果这个示例比 2 查询快，请在评论中告诉我们。

对于这个问题，我创建了一个名为“so”的集合，并将 25 个文档放入这个集合中，如下所示：

```
{
    "_id" : ObjectId("512fa86cd99d0adda2a744cd"),
    "authorName" : "author name1",
    "email" : "email1@email.com",
    "c" : 1
} 
```

我的查询使用聚合框架：

```
db.so.aggregate([
    { $group:
        { 
            _id: 1, 
            collection: { $push : { "_id": "$_id", "authorName": "$authorName", "email": "$email", "c": "$c" } }, 
            count: { $sum: 1 }
        }
    },
    { $unwind: 
        "$collection"
    },
    { $project: 
        { "_id": "$collection._id", "authorName": "$collection.authorName", "email": "$collection.email", "c": "$collection.c", "count": "$count" }
    },
    { $match: 
        { c: { $lte: 10 } } 
    },
    { $sort : 
        { c: -1 }
    },
    { $skip:
        2
    },
    { $limit:
        3
    },
    { $group: 
        { 
            _id: "$count", 
            my_documets: { 
                $push: {"_id": "$_id", "authorName":"$authorName", "email":"$email", "c":"$c" } 
            } 
        } 
    },
    { $project: 
        { "_id": 0, "my_documets": "$my_documets", "total": "$_id" }
    }
]) 
```

此查询的结果：

```
{
    "result" : [
        {
            "my_documets" : [
                {
                    "_id" : ObjectId("512fa900d99d0adda2a744d4"),
                    "authorName" : "author name8",
                    "email" : "email8@email.com",
                    "c" : 8
                },
                {
                    "_id" : ObjectId("512fa900d99d0adda2a744d3"),
                    "authorName" : "author name7",
                    "email" : "email7@email.com",
                    "c" : 7
                },
                {
                    "_id" : ObjectId("512fa900d99d0adda2a744d2"),
                    "authorName" : "author name6",
                    "email" : "email6@email.com",
                    "c" : 6
                }
            ],
            "total" : 25
        }
    ],
    "ok" : 1
} 
```

最后，我认为对于大集合 2 查询（首先是数据，第二个是计数）工作得更快。例如，您可以像这样计算集合的总数：

```
db.so.count() 
```

或像这样：

```
db.so.find({},{_id:1}).sort({_id:-1}).count() 
```

在第一个示例中我不完全确定，但在第二个示例中我们只使用光标，这意味着更高的速度：

```
db.so.find({},{_id:1}).sort({_id:-1}).explain()
{
    "cursor" : "BtreeCursor _id_ reverse",
    "isMultiKey" : false,
    "n" : 25,
    "nscannedObjects" : 25,
    "nscanned" : 25,
    "nscannedObjectsAllPlans" : 25,
    "nscannedAllPlans" : 25,
    "scanAndOrder" : false,
    !!!!!>>>  "indexOnly" : true, <<<!!!!!
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:48:26.563

为了完整起见（完整的讨论在[MongoDB Google Groups](https://groups.google.com/d/topic/mongodb-user/5AlOJATYq2I/discussion)上），这里是您想要的聚合：

```
db.collection.aggregate(db.docs.aggregate( [
    {
        "$match" : {
            "year" : "2012"
        }
    },
    {
        "$group" : {
            "_id" : null,
            "my_documents" : {
                "$push" : {
                    "_id" : "$_id",
                    "year" : "$year",
                    "author" : "$author"
                }
            },
            "reviewsCount" : {
                "$sum" : 1
            }
        }
    },
    {
        "$project" : {
            "_id" : 0,
            "my_documents" : 1,
            "total" : "$reviewsCount"
        }
    }
] ) 
```

顺便说一句，您在这里不需要聚合框架 - 您可以使用常规查找。您可以从游标中获取 count() 而无需重新查询。

# java - 如何使用 Tomcat 管理后端进程？

> ID：15132726
> 
> 赞同：1
> 
> 时间：2013-02-28T10:09:13.593
> 
> 标签：java, jsp, tomcat

我有一个网页，用户按下按钮并在专有应用程序（驻留在 Tomcat 中）中启动操作。

该操作是一个长期运行的过程，我必须查看发生了什么的唯一方法是登录到服务器并查看日志文件。

我编写了一个快速的 Java 函数，它读取日志文件并就正在发生的事情提供反馈。（基本上它只是拖尾文件并解析出我需要的东西）

我希望能够添加一个 jsp，我可以在不登录服务器的情况下查看输出。

===

从设计的角度来看，我理解 JSP 应该快速返回结果，而不仅仅是继续处理。

所以我的想法是创建一个简单的网页，查询 jsp 的更新并将最新信息写入屏幕。等待 30 秒，再次轮询服务器，然后附加最新更新。

我正在努力掌握的是如何让 JSP 与后端进程通信，以及应该如何生成/终止该后端进程。

这是一件非常偶然的事情（每两周一次，开始完成需要一两个小时），所以我不希望守护进程一直在运行。我希望能够暂时打开它并关闭它。

如果我从一个简单的 servlet 中生成一个进程，我如何在完成后结束该进程？我如何与它沟通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:05:01.873

您可以创建一个`java.lan.Runnable`女巫读取文件内容并将其保存到缓冲区中。Runnable 使用`while`循环读取文件内容，以便可以从外部设置中断条件，正在执行 Runnable 的线程将在 Runnable 的`run`方法终止时终止。

在您的 JSP 中，您可以创建一个`java.lang.Thread`Runnable 实例并将其传递给它。将可运行的实例保存在 中，`ServletContext`以便您可以跨请求访问它。如果您想终止轮询，而不仅仅是从 JSP 设置 Runnable 的中断条件，则 rum 方法将终止，因此线程也将终止。

您可以使用 javascript`setInterval()`功能并`XMLHttpRequest`刷新页面。

这是一个示例基本实现（我希望这会满足您的要求）：

轮询可运行

```
package com.web;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;

public class FilePollingThread implements Runnable {

    private String filepath = null;
    private boolean polling = false;
    private StringBuffer dataWritenAfterLastPoll = null;
    private String error = null;

    public FilePollingThread(String filepath) {
        this.filepath = filepath;
    }

    @Override
    public void run() {
        BufferedReader br = null;
        try {
            br = new BufferedReader(new InputStreamReader(new FileInputStream(filepath)));
            dataWritenAfterLastPoll = new StringBuffer();
            polling = true;

            String line = null;

            while(polling) {
                try {
                    line = br.readLine();
                    while(line == null) {
                        try {
                            Thread.sleep(500L);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                            error = e.toString();
                        }
                        line = br.readLine();
                    }
                    dataWritenAfterLastPoll.append(markUp(line));
                } catch (IOException e) {
                    e.printStackTrace();
                    error = e.toString();
                }
            }

        } catch (FileNotFoundException e) {
            e.printStackTrace();
            error = e.toString();
        } finally {
            if(br != null) {
                try {
                    br.close();
                } catch (IOException e) {
                    e.printStackTrace();
                    error = e.toString();
                }
            }
        }
    }

    private String markUp(String line) {
        String markup = "";
        if(line != null) {
            markup = "<div style=\"height: 6px\"><span style=\"line-height: 1.1;\">" + line + "</span></div>\n";
        }
        return markup;
    }

    public synchronized void stopPolling() {
        polling = false;
    }

    public synchronized String poll() {
        String tmp = markUp(error == null ? "Not ready" : error);
        if(dataWritenAfterLastPoll != null) {
            tmp = dataWritenAfterLastPoll.toString();
            dataWritenAfterLastPoll = new StringBuffer();
        }
        return tmp;
    }
} 
```

一个 JSP 女巫发起轮询并不断检索数据

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ page import="com.web.FilePollingThread" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Poll file</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" type="text/css" href="style/default.css"></link>
<script type="text/javascript">
    var c = 1;
    var ih;
    var polling = false;
    var filepath = null;
    function startPolling(interval) {
        ih = setInterval(function () {
            try {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.onreadystatechange = function () {
                    if(xmlHttp.readyState == 4) {
                        if(xmlHttp.status == 200) {
                            var w = getElementById('ajax_content');
                            w.innerHTML = w.innerHTML + xmlHttp.responseText;
                            getElementById('page_refresh').innerHTML = c++;
                            polling = true;
                            window.scrollTo(0, document.body.scrollHeight);
                        } else {
                            polling = false;
                            throw 'HTTP ' + xmlHttp.status;
                        }
                    }
                };
                xmlHttp.open('GET', 'pollfile.jsp?filepath=' + filepath + '&c=' + c, true);
                xmlHttp.send();
            } catch(e) {
                alert('Error at startPolling: ' + e);
                clearInterval(ih);
            }
        }, interval);
    }

    function startStopPolling() {
        var orgPolling = polling;
        try {
            if(polling) {
                polling = false;
                clearInterval(ih);
                doPolling();
            } else {
                polling = true;
                doPolling();
                startPolling(1000);
            }
            flipStartStopButtonsLabel();
        } catch(e) {
            polling = orgPolling;
            flipStartStopButtonsLabel();
            alert('Error at startStopPolling: ' + e);
        }
    }

    function flipStartStopButtonsLabel() {
        var label;
        if(polling) {
            c = 1;
            label = 'Stop polling';
            getElementById('page_refresh').innerHTML = '0';
        } else {
            label = 'Sart polling';
            getElementById('page_refresh').innerHTML = 'stoped';
        }
        var buttons = document.getElementsByName('start_stop_polling');
        if(buttons) {
            for(var i = 0; i < buttons.length; i++) {
                buttons[i].value = label;
            }
        }
    } 

    function doPolling() {
        var url = 'pollfile.jsp?polling=';
        if(polling) {
            filepath = getElementById('filepath');
            if(filepath && filepath.value && filepath.value.length > 0) {
                url += 'true&filepath=' + encodeURIComponent(filepath.value);
            } else {
                throw 'No filepath specified.';
            }
        } else {
            url += 'false';
        }
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
            if(xmlHttp.readyState == 4) {
                if(xmlHttp.status != 200) {
                    throw 'HTTP ' + xmlHttp.status;
                }
            }
        };
        xmlHttp.open('POST', url, false);
        xmlHttp.send();
    }

    function clearWindow() {
        var w = getElementById('ajax_content');
        if(w) {
            w.innerHTML = '';
        }
    }

    function getElementById(id) {
        try {
            if(id) {
                elm = document.getElementById(id);
                return elm;
            } 
        } catch(e) {
            alert('Error at getElementById: ' + e);
        }
        return null;
    }
</script>
</head>
<body>

<%
    String polling = request.getParameter("polling");

    if("true".equals(polling)) {
        String filepath = request.getParameter("filepath");
        if(filepath != null && filepath.length() > 0) {
            FilePollingThread pollingThread = new FilePollingThread(filepath);
            new Thread(pollingThread, "polling thread for file '" + filepath + "'").start();
            request.getServletContext().setAttribute("pollingThread", pollingThread);
        }
    } else if("false".equals(polling)) {
        FilePollingThread pollingThread = (FilePollingThread) request.getServletContext().getAttribute("pollingThread");
        if(pollingThread != null) {
            pollingThread.stopPolling();
        }
    } else {
        FilePollingThread pollingThread = (FilePollingThread) request.getServletContext().getAttribute("pollingThread");
        if(pollingThread != null) {
            response.getWriter().println(pollingThread.poll());
            response.getWriter().close();
            return;
        }
    }
%>
<div class="label">
        <span>Page polling:</span>
    </div>
    <div style="float: left;">
        <span id="page_refresh">0</span>
    </div>
<div class="clear_both">&nbsp;</div>
<form id="input_form" action="pollfile.jsp" method="get">
    <div>
        <div style="float: left;">
            <label>Filepath:
                <input style="height: 24px;" id="filepath" type="text" size="120" value=""/>
            </label>
        </div>
        <div style="clear: both;"/>
        <div style="float: left;">
            <input style="height: 24px;" name="start_stop_polling" id="start_stop_polling_button" type="button" onclick="startStopPolling(); return false;" value="Start polling"/>
        </div>
        <div style="float: left;">
            <input style="height: 24px;" name="clear_window" id="clear_window_button" type="button" onclick="clearWindow(); return false;" value="Clear"/>
        </div>
        <div style="clear: both;">&nbsp;</div>
    </div>
</form>
<div id="ajax_content">
</div>
<div>
    <div style="float: left;">
        <input style="height: 24px;" name="start_stop_polling" id="start_stop_polling_button" type="button" onclick="startStopPolling(); return false;" value="Start polling"/>
    </div>
    <div style="float: left;">
        <input style="height: 24px;" name="clear_window" id="clear_window_button" type="button" onclick="clearWindow(); return false;" value="Clear"/>
    </div>
    <div style="clear: both;">&nbsp;</div>
</div>
</body>
</html> 
```

**编辑**

有一个错误`FilePollingThread`：如果文件中没有可用的数据，则线程可能会卡在内部 while 循环中。它应该是

```
while(line == null && polling) 
```

JSP 也不能在 IE 上工作（IE9 上的 testet）。似乎将数据写入该行中的响应

```
response.getWriter().println(pollingThread.poll()); 
```

包含漏洞页面的 HTML。如果添加到目标 div IE 似乎无法呈现它。

我使用一个简单的静态 HTML 文件和一个 servlet 制作了另一个版本，因为它对写入响应的内容提供了更多控制。

如果您对代码感兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:11:11.620

您应该考虑使用[JMS 之](http://en.wikipedia.org/wiki/Java_Message_Service)类的东西来控制您的后台进程。

为了进行控制，您的前端代码可以发送消息启动/停止/检查进程。
对于监控，您的流程可以发布到 JMS 主题以供您的前端代码阅读。

# html - 样式表链接失败 HTML/CSS

> ID：15132731
> 
> 赞同：1
> 
> 时间：2013-02-28T10:09:29.210
> 
> 标签：html, css

我一直在处理一个带有 HTML 和外部 CSS 文件的项目。当我在 Mac 上的 adobe Dreamweaver 上做链接时，该链接在学校运行良好，但我通过 Dropbox 将这两个文件发送回家，并且 css 似乎没有与 html 文件链接。我相信我的文件路径和一切都正确，但只是为了确保：

```
 <link rel="stylesheet" type="text/css" href="Desktop/Stylesheet.css" /> 
```

我也尝试从文件目录中删除“桌面/”位，但它仍然没有工作。我的索引文件和 Css 文件都在我的桌面上。我正在使用窗户。相同的代码在学校工作，所以我相信这可能与文件位置有关。请帮助提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:25:18.700

这就是链接的工作方式，

假设您的 html 文件位于名为“xyz”的文件夹中。现在，当链接到 css 时，地址与您的 html 文件的位置有关。所以如果你提到

```
 <link rel="stylesheet" type="text/css" href="Stylesheet.css" /> 
```

它会假设 css 文件与您的 html 位于同一文件夹中，而如果您将其链接为

```
 <link rel="stylesheet" type="text/css" href="Desktop/Stylesheet.css" /> 
```

它会假设文件夹 xyz 中有一个名为 Desktop 的文件夹，并且您的 css 文件可能存储在 Desktop 中。

现在我假设您只是将 html 和 css 都直接放在桌面上，这不是一个好习惯，因为您可能也会将这些文件移回学校。因此，我建议您将两者都放在一个文件夹中，然后使用

```
 <link rel="stylesheet" type="text/css" href="Stylesheet.css" /> 
```

并且不要忘记注意大小写，是的 html 不区分大小写，但是在链接外部文件时，大写确实很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:13:43.757

您的目录结构应如下所示：

```
 Root Directory 
  | 
  |-page.html 
  |-Desktop
      |-StyleSheet.css 
```

如果不是，您需要修改目录结构或更改标签`href`上的属性`link`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:11:35.300

如果它在同一目录中，只需将路径设置为`href="Stylesheet.css"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:13:36.517

问题在于您的文件位置。
如果您使用 Dreamweaver 或任何其他代码编辑器，只需浏览到文件的路径以将其插入到链接 href 属性中，而不是手动输入路径。

# linq - 使用 LINQ 获取唯一对象

> ID：15132732
> 
> 赞同：1
> 
> 时间：2013-02-28T10:09:30.033
> 
> 标签：linq

我有一个人类：

```
Public Class Person
{
public string Name {get; set;}
public string Id {get; set;}
}

Public EqualityOnPerson : IEqualityComparer<Person>
{
public bool Equals(PersonData x, PersonData y)
    {
        return x.Id == y.Id;
    }

    public int GetHashCode(Person obj)
    {
        return obj.Id.GetHashCode();
    }

} 
```

我有一个包含重复 ID 的人员对象列表：

```
Person.Name = "ABC"
Person.Id = "123"

Person.Name = "CBA"
Person.Id = "123"

Person.Name = "DEF"
Person.Id = "456"

Person.Name = "GHI"
Person.Id = "789"

Person.Name = "JKL"
Person.Id = "789"

Person.Name = "MNO"
Person.Id = "789"

Person.Name = "PQR"
Person.Id = "101"

Person.Name = "STU"
Person.Id = "102" 
```

使用 distinct 将给出

```
Person.Name = "CBA"
Person.Id = "123"

Person.Name = "DEF"
Person.Id = "456"

Person.Name = "GHI"
Person.Id = "789"

Person.Name = "PQR"
Person.Id = "101"

Person.Name = "STU"
Person.Id = "102" 
```

我怎么得到这个

```
Person.Name = "DEF"
Person.Id = "456"

Person.Name = "PQR"
Person.Id = "101"

Person.Name = "STU"
Person.Id = "102" 
```

只有那些不重复的人对象。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:13:37.000

您需要使用平等比较器将人员分组，然后从只有一个人的组中选择人员：

```
var unduplicatedPersons = persons
    .GroupBy(p => p, new EqualityOnPerson())
    .Where(g => g.Count() == 1)
    .Select(g => g.Key); 
```

* * *

这是一个专用的扩展方法，如果需要，它可能会有轻微的性能优势（只是为了好玩）：

```
public IEnumerable<T> DistinctOnly<T>(this IEnumerable<T> source,
                                      IEqualityComparer<T> comparer)
{
    HashSet<T> all = new HashSet<T>(comparer);
    HashSet<T> distinct = new HashSet<T>(comparer);
    foreach (T t in source)
    {
        if (all.Add(t))
            distinct.Add(t);
        else
            distinct.Remove(t);
    }
    return distinct;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:21:42.887

```
var result = persons.Where(outer => 
     persons.Count(inner => inner.Id == outer.Id ) < 2) 
```

这样你就不需要相等比较器了。

# sql-server - SQL Server 存储过程删除语句

> ID：15132738
> 
> 赞同：0
> 
> 时间：2013-02-28T10:09:47.043
> 
> 标签：sql-server, select, stored-procedures, join

我希望删除一个 select 语句返回的结果，我这样做的原因是因为我在表之间有关系，如果我从最顶层的表中删除它的其他表中的子行也必须被删除。

任何人都可以为我纠正这个存储过程吗？

```
ALTER proc [dbo].[storedprocname] 
    (@Parameter uniqueidentifier = '00000000-0000-0000-0000-000000000000')
AS BEGIN
    DELETE FROM TableOne 
    WHERE IDOne IN
        (SELECT
           IDOne,
           DescOne, IndexOne,
           IDTwo,
           QuestionTwo, ControlTypeTwo, IndexTwo,
           IDThree,
           DescThree, IndexThree,
           QuestionFour,
           OptionFour
    FROM
           TableOne
        INNER JOIN 
           TableTwo ON TableTwo.CatID = TableOne.IDOne
        INNER JOIN 
           TableThree ON TableThree.Question = TableTwo.IDTwo
        LEFT OUTER JOIN
           TableFour ON TableFour.Question = TableThree.IDThree
        WHERE
           TableOne.IDOne = @Parameter)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:17:54.867

```
ALTER proc [dbo].[storedprocname] 
  (@Parameter uniqueidentifier = '00000000-0000-0000-0000-000000000000')
AS BEGIN
  DELETE FROM TableOne 
    WHERE IDOne IN
      (SELECT
         IDOne
       FROM
         TableOne
       INNER JOIN 
         TableTwo ON TableTwo.CatID = TableOne.IDOne
       INNER JOIN 
         TableThree ON TableThree.Question = TableTwo.IDTwo
       LEFT OUTER JOIN
         TableFour ON TableFour.Question = TableThree.IDThree
       WHERE
         TableOne.IDOne = @Parameter)
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:18:30.020

由于您要删除`IDOne`可能值列表中的所有行 - 那么您需要确保 之后的子查询`IN (...)`也返回可用于比较**的单个列！**毕竟，您无法将单个`IDOne`值与您当前返回的整个列列表进行比较......

尝试这样的事情：

```
ALTER proc [dbo].[storedprocname] 
    (@Parameter uniqueidentifier = '00000000-0000-0000-0000-000000000000')
AS BEGIN
    DELETE FROM TableOne 
    WHERE IDOne IN
        (SELECT
           IDOne
         FROM
           TableOne
        INNER JOIN 
           TableTwo ON TableTwo.CatID = TableOne.IDOne
        INNER JOIN 
           TableThree ON TableThree.Question = TableTwo.IDTwo
        LEFT OUTER JOIN
           TableFour ON TableFour.Question = TableThree.IDThree
        WHERE
           TableOne.IDOne = @Parameter)
END 
```

我不知道（您的问题太模糊且不够清楚）是否`JOIN`真的需要子查询中的所有这些....您可能需要根据您的要求进行调整。

# c# - 获取文件路径的文件名

> ID：15132740
> 
> 赞同：0
> 
> 时间：2013-02-28T10:09:51.467
> 
> 标签：c#, asp.net, filepath

我在使用子字符串时遇到了一些麻烦。我正在尝试从字符串中删除“\”，但我尝试了很多不同的东西。

例如。

C:\Program Files\Internet Explorer\iexplore.exe

我试图以 iexplore.exe 结束

有什么建议么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:12:06.477

System.IO.Path.GetFileName 怎么样：

```
System.IO.Path.GetFileName(@"C:\Program Files\Internet Explorer\iexplore.exe") 
```

# c# - 数据集 - 并非所有代码路径都返回值

> ID：15132741
> 
> 赞同：0
> 
> 时间：2013-02-28T10:09:56.193
> 
> 标签：c#, sql, dataset

我在课堂上公开声明了一个数据集，这是代码

```
public DataSet GetUsersDataSet()
    {
        SqlConnection con = new SqlConnection(connectionString);
        SqlDataAdapter da = new SqlDataAdapter("SELCT * FROM login", con);
        DataSet ds = new DataSet();
        try
        {
            con.Open(); 
            da.Fill(ds, "login");
            return ds;

        }

        catch 
        { 
            new ApplicationException("Data Error:");

        }
        finally { con.Close(); }

    } 
```

但它给了我错误：

> WebApplication1.classes.LoginDB.GetUsersDataSet()'：并非所有代码路径都返回值。

但是在我的代码`ds`正在返回中，我在删除 try catch 之后尝试过，那时它很好。任何人都可以告诉错误是什么。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:11:16.633

如果`try`失败会发生什么？您需要在块`return`之外的语句。`try/catch`

```
public DataSet GetUsersDataSet()
{
    SqlConnection con = new SqlConnection(connectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELCT * FROM login", con);
    DataSet ds = new DataSet();

    try
    {
        con.Open(); 
        da.Fill(ds, "login");
    }
    catch 
    { 
        new ApplicationException("Data Error:");
    }
    finally { con.Close(); }

    return ds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:12:13.680

试想一下，如果您遇到异常，则不会在 catch 块中返回任何内容。所以添加 try catch 块的返回端。使用单次退货而不是多次退货。

```
try
{
   con.Open(); 
    da.Fill(ds, "login");

 }
catch
{
    new ApplicationException("Data Error:");

}
return ds; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:11:35.870

由于您的方法返回类型是`DataSet`，因此您也应该在`try/catch`语句之外返回，因为您的`try`块可能会失败。如果失败，您的方法不会返回任何值。这就是您收到此错误的原因。你可以像这样使用它；

```
public DataSet GetUsersDataSet()
{
    SqlConnection con = new SqlConnection(connectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELCT * FROM login", con);
    DataSet ds = new DataSet();
    try
    {
        con.Open(); 
        da.Fill(ds, "login");

    }

    catch 
    { 
        new ApplicationException("Data Error:");

    }
    finally { con.Close(); }

    return ds;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:16:06.803

您的方法应该返回一个`dataset`。返回的数据集应该在 try-catch 语句之外。

```
public DataSet GetUsersDataSet()
{
    SqlConnection con = new SqlConnection(connectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELCT * FROM login", con);
    DataSet ds = new DataSet();
    try
    {
        con.Open(); 
        da.Fill(ds, "login");

    }

    catch 
    { 
        new ApplicationException("Data Error:");

    }
    finally { con.Close(); }

    return ds;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:16:54.200

该方法可能不[返回](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)a `DataSet`(fe if `da.Fill`throws an exception)，但这是`return`语句的约定。

您可以通过将`return`移到外部来确保它`try-catch`：

```
public DataSet GetUsersDataSet()
{
    DataSet ds = new DataSet();
    // ...
    try{
        // ...
    }
    catch{ 
        //...
    }
    finally{ 
        //...
    }
    return ds;
} 
```

C# 规格：

> 8.9.4 return 语句将控制权返回给出现 return 语句的函数成员的调用者。

//...

> 如果 return 语句被一个或多个带有相关 finally 块的 try 块包围，则控制最初转移到最里面的 try 语句的 finally 块。当控制到达 finally 块的终点时，控制将转移到下一个封闭 try 语句的 finally 块。重复这个过程，直到所有封闭的 try 语句的 finally 块都已执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T10:17:59.220

您只是忘记抛出您在捕获时创建的异常。那应该可以解决您的问题。

看看这个[链接](http://msdn.microsoft.com/en-us/library/ms173163.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T10:20:51.540

据我了解，您想在数据库操作失败时重新引发异常：

```
public DataSet GetUsersDataSet()
{
    SqlConnection con = new SqlConnection(connectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELCT * FROM login", con);
    DataSet ds = new DataSet();
    try
    {
        con.Open(); 
        da.Fill(ds, "login");
        return ds;

    }
    catch 
    { 
       throw new ApplicationException("Data Error:");

    }
    finally { con.Close(); }
} 
```

因此，如果块中抛出异常，将在`try`块关闭连接`ApplicationException`后重新抛出。`finally`

如果我弄错了，这不是你想要的。`new ApplicationException("Data Error:");`不会在您的`catch`块中执行任何操作，而是创建新实例，`ApplicationException`因此您应该将其删除。

# javascript - 如何使用 javascript 对搜索查询进行编码

> ID：15132745
> 
> 赞同：2
> 
> 时间：2013-02-28T10:10:21.150
> 
> 标签：javascript

如果我搜索如何格式化我得到

> 如何%20到%20格式化

但我想成为**如何格式化**

```
window.location = '/search/'+encodeURIComponent(query); 
```

也逃逸（），encodeURI（）不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:12:39.493

试试这样：

```
window.location = '/search/'+ query.replace(/\s+/gi, '-'); 
```

将多个空格合并为一个的工作示例：

*   [http://jsfiddle.net/VVEpE/](http://jsfiddle.net/VVEpE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:13:03.700

`encodeURIComponent`（以及损坏的、已弃用的`escape`）会将空格字符转换为可以放入 URI 中的空格表示。

如果您想使用自定义 slug 生成规则，那么您必须自己编写它们，可能使用正则表达式。

例如

```
query.replace(/\s/g, "-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:13:04.530

[`string.replace(searchvalue,newvalue)`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)

在这种情况下

`window.location = '/search/'+query.replace(/ /g, '-')`

# java - Java/Android webserver：通过 HttpRequestHandler 从浏览器分段上传到服务器

> ID：15132749
> 
> 赞同：2
> 
> 时间：2013-02-28T10:10:25.553
> 
> 标签：java, android, http, webserver, multipartform-data

我正在我的 Android 应用程序中实现一个小网络服务器。因此，我有一个 WebServer 类，我正在通过 HttpRequestHandler 处理客户端的请求。一切正常，我可以通过浏览器访问 html 文件等等。唯一不起作用的是将多部分文件上传到服务器。为此，我有一个带有文件输入字段的小 html 表单。然后我将表单发送到服务器并希望将文件保存在服务器上。我的 HttpRequestHandlers 如下所示：

```
public class UploadHandler implements HttpRequestHandler {
    private Context context = null;

    public IndexCommandHandler(Context context) {
        this.context = context;
    }

    @Override
    public void handle(HttpRequest request, HttpResponse response,
    HttpContext httpContext) throws HttpException, IOException {

        //HERE i want to save the multipart file

    }

    public Context getContext() {
    return context;
    }
} 
```

所以我的问题是将来自客户端的 HttpRequest 解析为文件。我怎么能用java做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:32:53.963

有关解析请求的讨论，请参阅[在 Python 中创建和解析多部分 HTTP 请求](https://stackoverflow.com/questions/4434170/create-and-parse-multipart-http-requests-in-python)

这是特定于 python 的，但这些概念仍然适用。

有关更多信息，请参阅[Multipart requests/responses java](https://stackoverflow.com/questions/4595173/multipart-requests-responses-java)

# asp.net - 在具有不同应用程序池的 IIS 7 中添加子应用程序

> ID：15132751
> 
> 赞同：0
> 
> 时间：2013-02-28T10:10:26.717
> 
> 标签：asp.net, iis-7

我是 IIS 新手。我有两个网站，一个在 VS2005，另一个在 VS2010。我已将 VS2005 网站设置为 IIS7 中的网站。并将VS2010作为应用程序添加到该站点，具有不同的framework 4.0应用程序池。VS2005 应用程序中的所有页面都正确打开。但是当我想打开与 VS2010 应用程序相关的网页（这是 IIS 7 中的子应用程序）时，我收到以下错误。

```
**Could not load type 'JsonpHttpModule' from assembly 'App_Code'.** 
```

我还尝试将这一行
"<"add name="JSONPModule" type="JsonpHttpModule, App_Code"/>
放在 VS2010 应用程序的 Web 配置中。但同样的错误正在发生。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:32:30.350

我已经通过从 vs2005 应用程序的 web.config 文件中删除 jsonphttpmodule 行解决了这个问题。

# java - GlassFish 中的连接泄漏监控

> ID：15132752
> 
> 赞同：3
> 
> 时间：2013-02-28T10:10:27.777
> 
> 标签：java, glassfish

由于在某些时候应用程序抛出了一个`java.sql.SQLException: Error in allocating a connection. Cause: In-use connections equal max-pool-size and expired max-wait-time`我已经启用从 glassfish 管理 Web 控制台监视相关服务器实例上的 JDBC 连接池。

然后我远程调试应用程序，我在获得连接后但在关闭它之前持有调试点。然后我刷新 web 管理控制台并检查 NumConnFree Resource Statistics 的值，它仍然显示初始值 8。由于我当前正在使用连接，它应该是 7 对吗？

任何人都会遇到这种情况。我不确定它是管理 Web 控制台的问题。还有什么其他最好的方法来监控连接泄漏？我的目标是检查 NumPotentialConnLeak 属性的值并检查特定于任何泄漏的日志。但由于我面临上述问题，我不确定管理控制台是否显示正确的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T16:10:04.477

不确定您是否正在查看此线程，但我发现这非常有用

[http://pe-kay.blogspot.ca/2011/10/using-glassfish-monitoring-and-finding.html?m=1](http://pe-kay.blogspot.ca/2011/10/using-glassfish-monitoring-and-finding.html?m=1)

# html - 在不创建节点的情况下附加 innerHTML

> ID：15132754
> 
> 赞同：2
> 
> 时间：2013-02-28T10:10:32.247
> 
> 标签：html, domdocument

我有一个像下面这样的元素。我想删除里面存在的块引用并用它的 innerHTML 替换它们

```
 <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">
     <blockquote style="margin-right: 0px; margin-left: 40px; border: none; padding: 0px;">HTML</blockquote>
     <blockquote style="margin-right: 0px; margin-left: 40px; border: none; padding: 0px;">Java</blockquote>
 </blockquote> 
```

至

```
 <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">
     HTML<br>
     Java<br>
 </blockquote> 
```

我怎样才能做到这一点？我知道一种通过创建另一个节点（如 span/div）然后替换 . 但我不想添加任何其他元素，只想要它的 innerHTML 元素。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:42:51.070

你的意思是这样的：

```
document.getElementById("your-element").innerHTML = "HTML<br>Java<br>"; 
```

或者，如果您想附加：

```
document.getElementById("your-element").innerHTML += "HTML<br>Java<br>"; 
```

*注意*：覆盖`innerHTML`元素可能会导致问题。例如，如果您有`onclick`活动。看更多：

*   [添加到 innerHTML 正确的语法](https://stackoverflow.com/questions/14977179/adding-to-innerhtml-correct-syntax/14977267#14977267)
*   [Onclick 不断恢复其原始值](https://stackoverflow.com/questions/14446006/onclick-keeps-going-back-to-its-original-value/14725744#14725744)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:31:29.510

如果你可以使用 jquery，你可以这样做：

```
$('blockquote > blockquote').each(function() {
  var text = $(this).text();
  $(this).after(text + '<br />');
  $(this).remove();
}); 
```

小提琴示例：http: [//jsfiddle.net/cjsuV/](http://jsfiddle.net/cjsuV/)

对于 YUI DOM，您可以使用：

```
YUI().use('node', function(Y) {
  var blockQuotes = Y.all('blockquote > blockquote');
  blockQuotes.each(function (blockQuote) {
    var textNode = document.createTextNode(blockQuote.get('innerHTML'));
    var brNode = document.createElement('br');
    blockQuote.insert(brNode, 'after');
    blockQuote.insert(textNode, 'after');
    blockQuote.remove();
  });
}); 
```

小提琴示例：http: [//jsfiddle.net/cjsuV/4/](http://jsfiddle.net/cjsuV/4/)

# java - 使用 Scribe 库的 Flickr Oauth 登录

> ID：15132755
> 
> 赞同：4
> 
> 时间：2013-02-28T10:10:34.603
> 
> 标签：java, android, flickr, scribe

我对android很陌生，请原谅任何错误。

```
package net.schwiz.oauth;

import org.json.JSONException;
import org.json.JSONObject;
import org.scribe.builder.ServiceBuilder;
import org.scribe.builder.api.TwitterApi;
import org.scribe.model.OAuthRequest;
import org.scribe.model.Response;
import org.scribe.model.Token;
import org.scribe.model.Verb;
import org.scribe.model.Verifier;
import org.scribe.oauth.OAuthService;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.TextView;

public class Main extends Activity {

    final static String APIKEY = "XXXXXXXXXXXXXXXXXXXX";
    final static String APISECRET = "XXXXXXXXXXXXXXXXXXXX";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final TextView textView = (TextView)findViewById(R.id.textview);
        final  WebView webview = (WebView) findViewById(R.id.webview);

        if(APIKEY == null || APISECRET == null){
            textView.setText("You must enter your own APIKEY and SECRET to use this demo.  dev.twitter.com");
            webview.setVisibility(View.GONE);
            return;
        }

        //set up service and get request token as seen on scribe website 
        //https://github.com/fernandezpablo85/scribe-java/wiki/Getting-Started
        final OAuthService s = new ServiceBuilder()
        .provider(TwitterApi.class)
        .apiKey(APIKEY)
        .apiSecret(APISECRET)
        .callback(CALLBACK)
        .build();

        final Token requestToken = s.getRequestToken();
        final String authURL = s.getAuthorizationUrl(requestToken);

        //attach WebViewClient to intercept the callback url
        webview.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                //check for our custom callback protocol otherwise use default behavior
                if(url.startsWith("oauth")){
                    //authorization complete hide webview for now.
                    webview.setVisibility(View.GONE);

                    Uri uri = Uri.parse(url);
                    String verifier = uri.getQueryParameter("oauth_verifier");
                    Verifier v = new Verifier(verifier);

                    //save this token for practical use.
                    Token accessToken = s.getAccessToken(requestToken, v);

                    if(uri.getHost().equals("twitter")){
                        OAuthRequest req = new OAuthRequest(Verb.GET, "URL here");
                        s.signRequest(accessToken, req);
                        Response response = req.send();
                        try {
                            JSONObject json = new JSONObject(response.getBody());
                            textView.setText(json.toString(3));
                        } catch (JSONException e) {
                            e.printStackTrace();
                        }
                    }

                    return true;
                }

                return super.shouldOverrideUrlLoading(view, url);
            }
        });

        //send user to authorization page
        webview.loadUrl(authURL);
    }
} 
```

我尝试了这段代码，它在 twitter 上运行良好，但现在我想使用 Flickr 对用户进行身份验证，上面的代码在这种情况下不起作用，if 条件`if(url.startsWith("oauth"))`没有按我想象的方式工作。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:36:30.640

我已经找到问题所在了！当我调用该方法`webview.loadUrl(authURL);`时，flickr www.flickr.com 的 url 更改为 m.flickr.com，这会`shouldOverrideUrlLoading`在任何用户登录/身份验证之前触发事件。

```
if(authURL.charAt(7)=='w')
{
   authURL=authURL.replaceFirst("www", "m");
} 
```

解决了我的问题。

# azure - Azure VM：多个公共 IP

> ID：15132756
> 
> 赞同：3
> 
> 时间：2013-02-28T10:10:39.853
> 
> 标签：azure

谁能确认 Azure VM 是否允许多个公共 IP？我们希望在单个 VM 上托管多个网站，因此希望每个网站有不同的 IP。我知道我们可以托管更多的虚拟机，但这也会大大增加我们的费用。所以，我只想在 VM 上拥有 1 个以上的公共 IP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-24T18:08:10.100

您可以为云服务添加多个 IP 地址。由于虚拟机位于云服务“内部”，这在某种程度上为您提供了虚拟机的多个公共 IP 地址。该过程记录在 [1] 中。其他地址目前的费用约为每月 3 美元。

以下是将新的保留 IP 地址添加到云服务的步骤。

首先创建一个新的保留 IP 地址：

```
New-AzureReservedIP –ReservedIPName "MyIPAddress"  –Location "West Europe" 
```

将 IP 地址与云服务关联：

```
Add-AzureVirtualIP -VirtualIPName MyIPAddress -ServiceName MyCloudService 
```

创建将 IP 地址映射到虚拟机的端点。如果您有多个虚拟机并需要负载平衡器，请为每个虚拟机重复此操作。为了运行多个网站，您可以将每个网站放到不同的端口（本地端口）。端点侦听公共端口上的连接并将它们转发到虚拟机的本地端口。

```
Get-AzureVM -ServiceName MyCloudService -Name myserver `
| Add-AzureEndpoint -Name QuvastoMail -Protocol tcp `
      -LocalPort 8002 -PublicPort 80 -VirtualIPName MyIPAddress `
| Update-AzureVM 
```

[1] [http://azure.microsoft.com/en-us/documentation/articles/load-balancer-multivip/](http://azure.microsoft.com/en-us/documentation/articles/load-balancer-multivip/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-05T01:56:50.190

看来您现在可以为负载平衡的云服务拥有多个公共 IP：

[http://azure.microsoft.com/en-gb/updates/multiple-vips-per-cloud-service/](http://azure.microsoft.com/en-gb/updates/multiple-vips-per-cloud-service/)

> 现在，您可以将多个负载平衡的公共 IP 地址分配给一组虚拟机，从而实现高可用性和高规模方案。您可以在云服务中托管多个安全网站，或允许多个 SQL Server AlwaysOn 可用性组侦听器访问同一组虚拟机。
> 
> 有关更多信息，请访问负载均衡器页面。此功能不收取额外费用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:31:04.797

您需要不同的云服务（Web 角色或虚拟机）才能拥有不同的 IP 地址。是的，这会增加总成本。

Windows Azure Web 角色和 VM 的 VIP（公共 IP）在云服务级别分配。将云服务视为一个逻辑容器——它可以包含 Web/工作者角色或虚拟机（目前不能同时包含两者）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-08T21:42:50.567

除了先前关于云服务的答案之外，现在可以在 Azure VM 上拥有多个 IP 地址。 [https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-multiple-ip-addresses-portal](https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-multiple-ip-addresses-portal)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-13T22:46:06.640

非常可能，实际上非常容易。

1.  让您的应用在您的 Azure 资源托管 VM 上侦听，例如端口 3001、3002、3003..

2.  然后创建一个负载均衡器（只需搜索它）。

3.  创建公共 IP 地址。
4.  将其添加到负载均衡器的前端池中
5.  将您的 VM 添加到负载均衡器的后端池
6.  在负载均衡器的入站 NAT 规则中，单击“添加”
7.  选择您的前端 IP、您的 VM 的网络 IP 配置、协议、端口和映射端口（单击“自定义”）以设置自定义端口。

示例：-您希望新创建的公共 ip “52.165.147.25”路由到您的 vm 的端口 3001。-在配置上将是端口 80 tcp，然后是映射端口上的端口 3001。- 无需启用“Floating IP (direct server return)”以防万一。

PS：在 linux VM 上，您可能必须“优化您的网络内核参数”..

在这里查看（滚动到底部）：[http ://docs.fluentd.org/v0.12/articles/before-install](http://docs.fluentd.org/v0.12/articles/before-install)

```
sudo nano /etc/sysctl.conf 
```

# 添加这些条目：

```
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1
net.ipv4.ip_local_port_range = 10240    65535 
```

# 注意空格，至关重要。

# 保存。

```
sudo sysctl -p 
```

# 完毕。

# 编辑：

## 在上述步骤中，您可能还需要处理 CORS（只需 google 即可）

## 另外，我忘记提到的另一种选择是将网卡/网络接口添加到您的虚拟机中。由于 azure max-nic-per-vm 限制，这不是一个可行的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T12:21:51.463

每个部署只能有一个公共 IP 地址。因此，如果您在单个部署中有 3 个虚拟机，它们将共享 IP 地址。然后，您可以选择跨实例对流量进行负载平衡，或将流量定向到特定端口号的特定 VM（或云服务中的角色）。

您可以在单个 VM 中使用主机标头并支持多个网站。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-04-29T06:07:48.797

我们也有类似的问题。我们希望将多个 SSL 证书应用于虚拟机托管的多个站点。

但这似乎根本不可能。等待 MS 发布此功能。

相比之下，Godaddy 和其他托管服务提供商也会免费提供 2-3 个 IP 地址，如果您需要更多，您可以轻松请求额外的 IP 地址。

以及获得支持太难了。

MZ azure 真的很烂。:(

# java - 解析android上传下载

> ID：15132759
> 
> 赞同：0
> 
> 时间：2013-02-28T10:10:45.360
> 
> 标签：java, android

我正在使用 parse.com 的服务，android 指南：

[https://www.parse.com/docs/android_guide](https://www.parse.com/docs/android_guide)

它对我不起作用（我收到一条消息：应用程序必须关闭......）

这是我的代码：

```
gameScore = new ParseObject("GameScore");
gameScore.put("score", 1337);
gameScore.put("playerName", "Sean Plott");
gameScore.put("cheatMode", false);
try {
    gameScore.save();
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
gameScore.saveInBackground(new SaveCallback() {
      public void done(ParseException e) {
        //  Access the object id here
          objectId= gameScore.getObjectId();
      }
    });

ParseQuery query = new ParseQuery("GameScore");

query.getInBackground(objectId, new GetCallback() {

@Override
public void done(ParseObject parseObject, ParseException arg1) {
    // TODO Auto-generated method stub
    int score= parseObject.getInt("score");
    Integer i =new Integer(score);
    t1.setText(i.toString());
}
}); 
```

这是Logcat：

```
02-28 09:59:10.552: E/AndroidRuntime(773): FATAL EXCEPTION: main
02-28 09:59:10.552: E/AndroidRuntime(773): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.salebook/com.example.salebook.MainActivity}: java.lang.NullPointerException
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.os.Looper.loop(Looper.java:137)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread.main(ActivityThread.java:5041)
02-28 09:59:10.552: E/AndroidRuntime(773):  at java.lang.reflect.Method.invokeNative(Native Method)
02-28 09:59:10.552: E/AndroidRuntime(773):  at java.lang.reflect.Method.invoke(Method.java:511)
02-28 09:59:10.552: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-28 09:59:10.552: E/AndroidRuntime(773):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-28 09:59:10.552: E/AndroidRuntime(773):  at dalvik.system.NativeStart.main(Native Method)
02-28 09:59:10.552: E/AndroidRuntime(773): Caused by: java.lang.NullPointerException
02-28 09:59:10.552: E/AndroidRuntime(773):  at com.example.salebook.MainActivity.onCreate(MainActivity.java:69)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.Activity.performCreate(Activity.java:5104)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-28 09:59:10.552: E/AndroidRuntime(773):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-28 09:59:10.552: E/AndroidRuntime(773):  ... 11 more 
```

此外，当我处于调试模式时，我看到 objectId 为 null ，尽管我可以在服务器中看到该对象成功上传并出现问题并且它具有有效的 objectId。

此外，当我在 eclipse 中查看 gameScore 对象时，我可以看到它具有与服务器中相同的 objectId，但是它再次在 objectId 中返回 null

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:43:17.397

所以发生的事情是你正在执行从一个新线程开始的 saveInBackground 。然后，您将立即使用 null objectId 调用 query.getInBackground。您需要在 gameScore.saveInBackground 中的 done 调用之后等待并调用 query.getInBackground。

我建议将第二次调用移动到上面的 gamerScore.saveInBackground 执行中的 done 函数调用。此外，您必须考虑保存可能会失败，因此您需要按如下方式捕获异常：

```
public void done(List<ParseObject> items, ParseException e) {
    if (e == null) {
       //execute query here
    } else {
       //handle exception here
    } 
```

}

# templates - xslt 通过调用模板进行分组

> ID：15132763
> 
> 赞同：-2
> 
> 时间：2013-02-28T10:10:56.790
> 
> 标签：templates, xslt, grouping, xslt-grouping

我是 xslt 的新手，正在尝试学习如何使用键和模板来学习分组。

有人可以帮助我如何在 xslt 中执行以下操作。我必须从另一个模板调用一个模板来进行转换。

谢谢

这是我的xml。

```
<Doc>
<ExOrder>121</ExOrder>
<Line>
    <Ordernumber>225</Ordernumber>
    <OrderID>1</OrderID>
    <Quantity>5</Quantity>
</Line>
<Line>
    <Ordernumber>225</Ordernumber>
    <OrderID>5</OrderID>
    <Quantity>5</Quantity>
</Line>
<Line>
    <Ordernumber>226</Ordernumber>
    <OrderID>2</OrderID>
    <Quantity>5</Quantity>
</Line> 
```

这是之后的样子。

```
<Doc>
    <Order>
        <Ordernumber>225</Ordernumber>
        <Line>
            <ID>1</ID>
            <ID>5</ID>
        </Line>
    </Order>
    <Order>
        <Ordernumber>225</Ordernumber>
        <Line>
            <ID>1</ID>
            <ID>5</ID>
        </Line>
    </Order>
</Doc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:31:01.047

我将假设您真正想要的输出是：

```
<Doc>
  <Order>
    <Ordernumber>225</Ordernumber>
    <Line>
      <ID>1</ID>
      <ID>5</ID>
    </Line>
  </Order>
  <Order>
    <Ordernumber>226</Ordernumber>
    <Line>
      <ID>2</ID>
    </Line>
  </Order>
</Doc> 
```

由于您提供的示例输出没有意义。当在您的示例输入上运行时，此 XSLT 将产生上面的输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kOrder" match="Line" use="Ordernumber"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <Doc>
      <xsl:apply-templates select="Line[generate-id() = 
                                        generate-id(key('kOrder', Ordernumber)[1])]" />
    </Doc>
  </xsl:template>

  <xsl:template match="Line">
    <Order>
      <xsl:apply-templates select="Ordernumber" />
      <Line>
        <xsl:apply-templates select="key('kOrder', Ordernumber)/OrderID" />
      </Line>
    </Order>
  </xsl:template>

  <xsl:template match="OrderID">
    <ID>
      <xsl:value-of select="."/>
    </ID>
  </xsl:template>
</xsl:stylesheet> 
```

# objective-c - 为纸牌游戏创建具有多个枚举状态的构造函数？

> ID：15132764
> 
> 赞同：0
> 
> 时间：2013-02-28T10:10:56.460
> 
> 标签：objective-c, arrays, constructor, enums

我正在尝试编写一个自定义对象，我希望在该对象上关联或标记多个字母。

我正在尝试编写一个类似的设置，其中一个对象可以分配多个字母（或布尔标志）。

例如，`Company`可能有字母“A,B,C,F”（从字母 A 到 F）。

我想创建一张`Company`卡片并在构造方法中为其分配某些字母。

起初我以为我会使用一个数组 - 但我想保持字母分开，因为字母实际上只是一个“布尔”标志的大矩阵。

```
IE:
Letters          A    B   C   D   E   F
"Brand X"        Y    Y   N   N   Y   N 
```

我的代码如下；

```
typedef enum _Letters {
    LetterA,
    LetterB,
    LetterC,
    LetterD,
    LetterE,
    LetterF,
} Letters;

@interface Corporation : NSObject
{
    NSString *_name; // Name of the card ie: "Automative"
    NSArray *_letters; // A->F
    int _value; // Value of the card in $
    VENCardState _state; // Current state of the card (is it in play or discard pile, etc)
} 
```

我想要但确定的是如何`letters`在 init 构造函数中包含我想要的所有字母。

IE;

`initWithLetters:A,B,C....`

但我不确定如何做到这一点。

基本上我想要一种简单的方法来制作一个具有多个枚举状态的构造函数，然后该方法会将这些枚举状态添加到一个数组中`letters`

我应该能够记录该对象并发现它与哪些字母相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:48:27.617

试试这个： - (id) initWithLetters:(VENLetters)letter, ...; 或： - (id) initWithLettersArray:(NSArray*)lettersArray;

# c++ - OpenCV在带有C++的iOS上使用base64通过HTTP发送图像

> ID：15132766
> 
> 赞同：1
> 
> 时间：2013-02-28T10:11:04.673
> 
> 标签：c++, ios, post, opencv, base64

我正在 iOS 上创建一个应用程序，我在其中发送一个 keyPoints 列表（这有效）和一个`Mat`从`OrbDescriptorExtractor`. 图像的发送工作，接收到的base64与base64发送相同。所以我的猜测是它在编码和解码上出错了。

左边的图像是编码前的图像，右边的图像是服务器接收到的解码图像：

![在base64之前](../Images/82af20c1184d4243cda81d331a76806d.png) ![base64之后](../Images/bd757005b7fda4255d1ae8dbe5982b47.png)

这是用base64编码`Mat`（desc）图像的代码，我使用的base64函数来自[这个站点](http://www.adp-gmbh.ch/cpp/common/base64.html)。

```
char sendFile[1000];
char temp[100];

std::sprintf(temp, "^^%d^^%d^^", desc.cols, desc.rows);
strcat(sendFile, temp);

const unsigned char* inBuffer = reinterpret_cast<const unsigned char*>(desc.data);

strcat(sendFile, base64_encode(inBuffer, strlen((char*)inBuffer)).c_str());
strcat(sendFile, "\0"); 
```

在此之后，文件通过 HTTP Post 保存在服务器上，然后`exec()`在 PHP 中打开 C++ 脚本，这样就可以了。

在此之后，图像以这种方式解码：

```
int processData(string input, int* width, int* height){
    int cur = 0, k = 0;
    for(unsigned int i = 0; i < input.length(); i++){
        if(input.substr(i, 2) == "^^"){
            if(cur == 0){
                k = i + 2;          
            }else if(cur == 1){
                *width = getIntFromString(input, k, i);         
                k = i + 2;
            }else{
                *height = getIntFromString(input, k, i);        
                break;
            }
            cur++;
        }
    }
    return 0;
}

int error, w, h;
string line, data;
ifstream file;

file.open(argv[1]);

if(file.is_open()){
    error = processData(line, &w, &h);
    if(error != 0){
        printf("Processing keypoints failed \n");
        return 1;
    } 
    getline(file, line);
    data = base64_decode(line);

    file.close();
}else{
    printf("Couldn't open file.\n");
    return 1;
}

Mat tex_des(Size(w, h), CV_8UC1, (void*)data.c_str()); 
```

如何以正确的方式发送 OpenCV 图像而不会丢失数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:47:06.277

您不得在二进制数据上使用任何 str... 函数！

strlen((char*)inBuffer) 在第一个零处停止，给出错误的结果

使用 desc.total() 代替缓冲区长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:38:02.700

我正在使用稍微不同的方法。我会写它，希望它会有所帮助：

```
//Consider we have the image saved in UIImage
UIImage * myImage;

//Get the data 
NSData imageData = UIImageJPEGRepresentation(myImage, 1.0);

//I am using this extension to encode to base 64 (https://gist.github.com/Abizern/1643491)
//Article from the save author http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html
NSString *encodedImage = [imageData base64EncodedString]; 
```

我发送`encodedImage`到服务器。

# scala - Play 2.1 Scala链多个future和promise

> ID：15132769
> 
> 赞同：3
> 
> 时间：2013-02-28T10:11:10.800
> 
> 标签：scala, future, playframework-2.1, promise

我有一个用于处理数据的现有 java 类。如何在我的 Scala 异步操作中使用第一个承诺中的 ObjectNode 以及更多处理？

```
public class JavaClass extends Controller {
  public static Promise<ObjectNode> intensiveComputation(String imageId) {
  }
}

def index = Action {
  val futureInt = scala.concurrent.Future { JavaClass.intensiveComputation() }
  Async {
    futureInt.map(promise => 
      var objJs = promise.GetObjectNodeFromPromise()
      (objJs \ Config.RESP_STATUS_PARAM).as[String] match {
        // I WANT TO READ ObjectNode from promise and do more works here
      }
      Ok(Json.toJson(Map("status" -> "ok")))
  }
} 
```

> 编辑 1

我尝试使用@hbf 代码，但是，在这一行出现编译错误。

```
[error]  found   : org.codehaus.jackson.node.ObjectNode => play.api.mvc.SimpleResult[play.api.libs.json.JsValue]
[error]  required: play.libs.F.Function[org.codehaus.jackson.node.ObjectNode,?]
[error]                 var result = futureObj map { objJs: ObjectNode => 
```

如果我从 objJs 中删除 ObjectNode，我会收到此错误。

```
[error]  missing parameter type
[error]                 var result = futureObj map { objJs => 
```

新代码

```
def index = Action {
  val futureInt = JavaClass.intensiveComputation()
  Async {
    var result = futureObj map { objJs: ObjectNode =>
      Ok(Json.toJson(Map("status" -> "ok")))
    }
    result
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:32:32.933

我假设您正在遵循[Play 文档指南](http://www.playframework.com/documentation/2.1.0/ScalaAsync)，对吗？

首先，请注意 Play 现在（从 2.1 版开始）使用 Scala 期货，因此，命名法发生了变化：您的方法`intensiveComputation()`返回一个 (Scala) `Future<ObjectNode>`（而在 2.1 之前的版本中，它被称为`Promise<ObjectNode>`）。

```
public class JavaClass extends Controller {
  public static Future<ObjectNode> intensiveComputation(String imageId) {
    /* ... */
  }
} 
```

另请注意，在[Play 文档示例](http://www.playframework.com/documentation/2.1.0/ScalaAsync)中，直接`intensiveComputation()`返回值（即`ObjectNode`），而您的版本返回保存该值的未来（即`Future<ObjectNode>`）。

其次，在 your`futureInt.map`中，闭包接收未来的价值，而不是未来本身。所以尝试类似：

```
def index = Action {
  val futureInt = JavaClass.intensiveComputation() // I's already a future!
  Async {
    futureInt.map(objJs => // `objJs` is the result of `intensiveComputation`
      // Extract from `objJs` whatever you need ...
      // ... and make the `Ok` call here (and not outside)
      Ok(Json.toJson(Map("status" -> "ok")))
    )
  }
} 
```

# html - 如何构建一个简单的 HTML5 高尔夫游戏？

> ID：15132771
> 
> 赞同：0
> 
> 时间：2013-02-28T10:11:13.060
> 
> 标签：html, mobile, html5-canvas

我想做一个简单的 HTML5 高尔夫游戏。我发现了这个，[http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/)

我已将重力更改为 0，它非常适合我想要的！但是有一个问题，当我在我的智能手机或平板电脑上测试它时，当我拖动球后，球会立即捕捉到我认为是 X=0 Y=0 的左上角位置。

如何使这个 HTML5 画布与智能手机或平板电脑中的桌面浏览器一样完美地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:23:39.170

根据智能手机/平板电脑是什么，您应该实现对[触摸](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)或[指针](http://www.w3.org/TR/2013/WD-pointerevents-20130219/)事件的支持。因为这些设备不会触发鼠标事件。

# playframework-2.0 - 在 prod 模式下调试 play framework 应用程序

> ID：15132776
> 
> 赞同：2
> 
> 时间：2013-02-28T10:11:17.817
> 
> 标签：playframework-2.0

如何将 JPDA 调试器连接到在生产模式下运行的 Play 2.0 应用程序？

由于 Play 2.0 中的开发模式存在死锁错误，我正在使用生产模式进行开发（键入“start”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:40:50.873

我最终只使用开发模式并每次都终止进程，因为死锁错误似乎没有出现在第一次运行中。

# asterisk - 星号：记录应用程序正在生成空文件

> ID：15132780
> 
> 赞同：0
> 
> 时间：2013-02-28T10:11:26.780
> 
> 标签：asterisk

拨打电话的用户被要求拨打分机。这是通过 1#playing**背景**提示然后 2#wait_for_digit 来完成的。根据已拨打的分机，确定目标号码并将呼叫转移到该号码。

如果被叫方未接听，则使用**Playback 播放**提示，要求用户录制语音消息；录制语音消息是使用**录制**应用程序完成的。

这个**Record**应用程序总是生成空的 wav 文件，大小为 44 字节。如果我删除 1#playing a prompt with **Background**，则**Record**应用程序正在生成正确的文件。如果包含**背景**，则所有记录都是空的。

我正在使用 Perl Asterisk::AGI 模块。

```
$agi->exec('Answer');
....
.....
$agi->exec('Background', 'en/extra/please-enter-the-extension,n'); # this is the troubling part
my $my_extension = $agi->wait_for_digit(5000);
....
.....
$agi->exec('Playback', 'en/extra/the-party-you-are-calling&en/extra/is-curntly-busy,noanswer');
$agi->exec('Playback', 'en/vm-intro,noanswer');
my $file = 'xyz.wav';
$agi->exec('Record', "$file,0,10,k");
...
... 
```

我应该怎么做才能让它按我的意愿工作？

谢谢你。

更新 1：相同的脚本现在可以正常工作。不确定与脚本无关的内容是否发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:17:36.260

您很可能已经检查了您的编解码器。如果您使用 g729 或 g723 并且没有转码器，它就无法以 wav 格式写入。

# django - django - 使用选择框选项创建单选

> ID：15132781
> 
> 赞同：0
> 
> 时间：2013-02-28T10:11:27.107
> 
> 标签：django, django-forms, django-crispy-forms

我想创建一组如下所示的单选选项：

![作为小部件的单选选项](../Images/5802761d03017113ff362cd5db47ffe7.png)

非标准部分是选择第一个或第二个单选按钮选项需要用户进一步从选择框中指定信息。

如何使用 django 表单执行此操作？根据我在[文档](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ChoiceField)中看到的内容，您可以传递一个只有字符串作为人类可读值的选择 2 元组，我需要能够传递一个小部件和一个标签。我通过模板中的 django-crispy-forms 呈现表单（即我的所有模板都是`{% crispy form %}`），所以我更喜欢不需要任何模板端操作的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T11:56:27.093

在forms.py中

```
CHOICES = (('0', 'option1',), ('1', 'option2',), ('2', 'option3',)) 
```

类 NameForm(forms.ModelForm):

```
options = forms.ChoiceField(initial=0, widget = forms.RadioSelect(renderer = HorizontalRadioRenderer), choices=OPTIONS) 
```

# android - 片段活动开始时未调用片段 oncreateview

> ID：15132782
> 
> 赞同：1
> 
> 时间：2013-02-28T10:11:33.443
> 
> 标签：android, android-fragments, android-tabhost

我需要实现两个选项卡选项。1）顶级站 2）我的站 我使用标签主机的片段活动。我知道应该使用操作栏，但根据 psd 我需要在底部显示选项卡选项，所以我使用了 tabhost，因为我不知道如何在屏幕底部显示操作栏它完成了。在我的所有片段中，我正在调用 Web 服务并解析 json 响应并在 lisview 中安排响应。我已经在片段的 oncreaview 中编写了服务端通信代码。我面临的问题是，当我从登录活动片段 oncreateview 切换到我的片段活动时，没有被调用，因此我的列表视图不会出现。但是当我更改标签时，它开始出现。我放了日志，发现调用活动时没有调用片段的oncreatview。

这是 fragmentActivity 的代码： 现在我只使用了两个片段。

```
 public class AwesomeActivityNew extends FragmentActivity implements
        TabHost.OnTabChangeListener {
    private TabHost mTabHost;

    private HashMap mapTabInfo = new HashMap<String, TabInfo>();

    private TabInfo mLastTab = null;

    public class TabInfo {

        private String tag;

        private Class<?> clss;

        private Bundle args;

        private Fragment fragment;

        TabInfo(String tag, Class<?> clazz, Bundle args) {

            this.tag = tag;

            this.clss = clazz;

            this.args = args;

        }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        /**
         * 
         * @param context
         */

        public TabFactory(Context context) {

            mContext = context;

        }

        /**
         * (non-Javadoc)
         * 
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */

        public View createTabContent(String tag) {

            View v = new View(mContext);

            return v;

        }

    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v.app.FragmentActivity#onCreate(android.os.Bundle)
     */

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // Step : Inflate layout

        setContentView(R.layout.maintab_new);

        // Step : Setup TabHost

        initialiseTabHost(savedInstanceState);

        if (savedInstanceState != null) {

            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); // set
                                                                                // the
                                                                                // tab
                                                                                // as
                                                                                // per
                                                                                // the
                                                                                // saved
                                                                                // state

        }

    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */

    protected void onSaveInstanceState(Bundle outState) {

        outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                // selected

        super.onSaveInstanceState(outState);

    }

    /**
     * 
     * Step : Setup TabHost
     */

    private void initialiseTabHost(Bundle args) {

        mTabHost = (TabHost) findViewById(android.R.id.tabhost);

        mTabHost.setup();

        TabInfo tabInfo = null;

        AwesomeActivityNew.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab2").setIndicator("Tab2 "),
                (tabInfo = new TabInfo("Tab2", TopStation.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        AwesomeActivityNew.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab3").setIndicator("My station", getResources().getDrawable( R.drawable.star )),
                (tabInfo = new TabInfo("Tab3", MyStation.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        // Default to first tab

        this.onTabChanged("Tab");

        //

        mTabHost.setOnTabChangedListener(this);

    }

    /**
     * 
     * @param activity
     * 
     * @param tabHost
     * 
     * @param tabSpec
     * 
     * @param clss
     * 
     * @param args
     */

    private static void addTab(AwesomeActivityNew activity, TabHost tabHost,
            TabHost.TabSpec tabSpec, TabInfo tabInfo) {

        // Attach a Tab view factory to the spec

        tabSpec.setContent(activity.new TabFactory(activity));

        String tag = tabSpec.getTag();

        // Check to see if we already have a fragment for this tab, probably

        // from a previously saved state. If so, deactivate it, because our

        // initial state is that a tab isn't shown.

        tabInfo.fragment = activity.getSupportFragmentManager()
                .findFragmentByTag(tag);

        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {

            FragmentTransaction ft = activity.getSupportFragmentManager()
                    .beginTransaction();

            ft.detach(tabInfo.fragment);

            ft.commit();

            activity.getSupportFragmentManager().executePendingTransactions();

        }

        tabHost.addTab(tabSpec);

    }

    /**
     * (non-Javadoc)
     * 
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */

    public void onTabChanged(String tag) {

        TabInfo newTab = (TabInfo) this.mapTabInfo.get(tag);

        if (mLastTab != newTab) {

            FragmentTransaction ft = this.getSupportFragmentManager()
                    .beginTransaction();

            if (mLastTab != null) {

                if (mLastTab.fragment != null) {

                    ft.detach(mLastTab.fragment);

                }

            }

            if (newTab != null) {

                if (newTab.fragment == null) {

                    newTab.fragment = Fragment.instantiate(this,

                    newTab.clss.getName(), newTab.args);

                    ft.add(android.R.id.tabcontent, newTab.fragment, newTab.tag);

                } else {

                    ft.attach(newTab.fragment);

                }

            }

            mLastTab = newTab;

            ft.commit();

            this.getSupportFragmentManager().executePendingTransactions();

        }

    }
} 
```

这是片段的代码：

```
 public class TopStation extends Fragment {

    boolean jsonloadflag = false;
//  int count = 0;
    int currentpage = 0;
    ListView ls;
    JSONArray jsonarray;
    Downloader downloader;
    JSONLoader jsonloader;
    MyCustomadapter adp;
    int totalpages = 0;
    TextView page;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // HttpClient client = new DefaultHttpClient();
        // HttpPost post = new
        // HttpPost("http://eluminoustechnologies.net/webapp/services/toptenstations.php");

    }
    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
        if (!jsonloadflag) {
            jsonloader = new JSONLoader();
            jsonloader.execute(getActivity().getString(
                    R.string.web_root_service)
                    + getActivity().getString(+R.string.TOPTEN_STATION_URL));
        }
        Log.e("onattach top station called","true");
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // count = 0;
        //Log.e("oncreate view top station called","true");
        // Inflate the layout for this fragment
        // return inflater.inflate(R.layout.afragment, container, false);
        Log.e("inside top station oncrateview","true");
        currentpage = 0;
        View v = inflater.inflate(R.layout.top_station, container, false);
        ls = (ListView) v.findViewById(R.id.listview_topstation);
        page = (TextView) v.findViewById(R.id.textView2);
        /*
         * View v1 = inflater.inflate(R.layout.footer_mystation, null);
         * ls.addFooterView(v1);
         */
        Button nextbtn = (Button) v.findViewById(R.id.btnnext);
        Button previousbtn = (Button) v.findViewById(R.id.btnprevious);

        new Downloader(currentpage).execute();
        nextbtn.setClickable(false);
        previousbtn.setClickable(false);
        nextbtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                if (currentpage < totalpages) {
                    new Downloader(currentpage).execute();
                    currentpage += 1;
                    page.setText("Page " + currentpage);
                }
            }
        });
        previousbtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                if (currentpage > 1) {
                    new Downloader(currentpage).execute();
                    currentpage -= 1;
                    page.setText("Page " + currentpage);
                }
            }
        });

        return v;

    }
    @Override
    public void onPause() {
        // TODO Auto-generated method stub
        super.onPause();

    }

    class MyCustomadapter extends BaseAdapter {

        ArrayList<HashMap<String, String>> data;
        ArrayList<HashMap<String, Bitmap>> images;

        public MyCustomadapter(ArrayList<HashMap<String, String>> ls,
                ArrayList<HashMap<String, Bitmap>> listbitmap) {

            this.data = ls;
            this.images = listbitmap;
            // this.data=imagename;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return images.size();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return data.get(arg0);
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
        //  Log.e("inside getview " + count, "true");
            View row;
            LayoutInflater inflater = getActivity().getLayoutInflater();
            row = inflater.inflate(R.layout.list_row, null, false);
            // grid=inflater.inflate(R.layout.gridrow, null);
            ImageView stationimg = (ImageView) row
                    .findViewById(R.id.imageView1);
            TextView stationname = (TextView) row.findViewById(R.id.textView1);
            TextView description = (TextView) row.findViewById(R.id.textView2);
            HashMap<String, String> map = data.get(position);
            HashMap<String, Bitmap> imagemap = images.get(position);
            stationname.setText(map.get("station_name"));
            // Log.e("map data for desc", map.get("description"));
            description.setText(map.get("description"));
            if (imagemap.get("station_picture") != null)
                stationimg.setImageBitmap(imagemap.get("station_picture"));
            // stationimg.setBackgroundResource(dataimg[position]);

            return (row);
        }
    }

    private class Downloader extends AsyncTask<Void, Void, Void> {
        int cpage = 0;
        ProgressDialog dialog;
        ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
        ArrayList<HashMap<String, Bitmap>> listbitmap = new ArrayList<HashMap<String, Bitmap>>();

        public Downloader(int page) {
            this.cpage = page;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            dialog = new ProgressDialog(getActivity());
            dialog.show();
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            adp = new MyCustomadapter(list, listbitmap);
            ls.setAdapter(adp);
            adp.notifyDataSetChanged();
            Log.e("onPostExecute called", "true");
            Log.e("size of data list", "" + list.size());
            Log.e("size of data list", "" + listbitmap.size());
            dialog.dismiss();

        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            Log.e("do inbackground downloader of downloader called", "true");

            if (jsonloadflag) {
                for (int j = cpage * 4; j < cpage * 4 + 4
                        && j < jsonarray.length(); j++) {
                    HashMap<String, String> map = new HashMap<String, String>();
                    HashMap<String, Bitmap> imagemap = new HashMap<String, Bitmap>();
                    JSONObject jsonobj;
                    try {
                        jsonobj = jsonarray.getJSONObject(j);

                        String station_id = jsonobj.getString("station_id");
                        String station_name = jsonobj.getString("station_name");
                        String station_picture = jsonobj
                                .getString("station_picture");
                        String description = jsonobj.getString("description");
                        map.put("station_id", station_id);
                        map.put("station_name", station_name);
                        // map.put("station_picture", station_picture);
                        map.put("description", description);
                        String imageurl = getActivity().getResources()
                                .getString(R.string.web_root)
                                + getActivity().getResources().getString(
                                        R.string.station_image_path)
                                + station_picture.replace(" ", "%20");

                        try {
                            URL url = new URL(imageurl);

                            HttpURLConnection conn = (HttpURLConnection) url
                                    .openConnection();

                            conn.setDoInput(true);
                            conn.connect();
                            InputStream is = conn.getInputStream();

                            Bitmap bmImg = BitmapFactory.decodeStream(is);
                            if (bmImg != null)
                                imagemap.put("station_picture", bmImg);
                            else {
                                Drawable myDrawable = getResources()
                                        .getDrawable(R.drawable.ic_launcher);
                                Bitmap defaultimg = ((BitmapDrawable) myDrawable)
                                        .getBitmap();
                                imagemap.put("station_picture", defaultimg);
                            }

                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        // Log.e("station_id",station_id);
                        // Log.e("station_name", station_name);
                        // Log.e("station_picture",station_picture);
                        // Log.e("description", description);
                        // Log.e("counter is",""+count);
                        list.add(map);
                        listbitmap.add(imagemap);
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            //  count += 5;
            }
            return null;
        }
    }

    private class JSONLoader extends AsyncTask<String, Void, Void> {

        JSONParser parser = new JSONParser();

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            if (jsonarray.length() > 0) {
                page.setText("Page " + 1);
                currentpage = 1;

            }

        }

        @Override
        protected Void doInBackground(String... params) {
            // TODO Auto-generated method stub
            Log.e("do in background of json loader called", "true");
            if (!jsonloadflag) {
                jsonarray = parser.getJSONarrayFromUrl(params[0]);
                if (jsonarray.length() % 4 == 0)
                    totalpages = jsonarray.length() / 4;
                else
                    totalpages = jsonarray.length() / 4 + 1;
                // Log.e("url param", params[0]);
                // Log.e("server side json", jsonarray.toString());
                jsonloadflag = true;
            }

            return null;
        }
    }

    } 
```

请帮助我如何在我的片段活动启动时显示我的片段并加载包含选项卡主机和片段的服务端数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:30:46.073

您能否更清楚地解释预期的行为是什么？我查看了您的代码，应该在激活片段时调用片段 oncreateview，在活动开始时不会调用它。此外，从 asynctask 加载数据可能需要一些时间，您可能看不到结果。尝试使用来自服务器的较短的 json 数据字符串，或尝试从预加载的资产/原始文件中读取 json。

# c# - 带有网格的 WPF 项目

> ID：15132783
> 
> 赞同：0
> 
> 时间：2013-02-28T10:11:34.900
> 
> 标签：c#, .net, wpf

我有这个 Windows 应用程序：

```
<Window x:Class="PlayTube.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="800" Width="1400">
<Grid Background="#FFD86F6F">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid Height="70" Background="#FF9A9A9A">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <TextBox Grid.Column="1" Height="25" Width="200" Name="SearchTextBox" />
        <Button Grid.Column="2" Height="25" Width="80" Content="Search" Click="Button_Click" />
    </Grid>

    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" MaxWidth="250" />
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="300" MaxWidth="350"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid Background="#FFFFFF89">

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
              VerticalAlignment="Stretch" 
              Grid.Column="1" ResizeBehavior="PreviousAndNext"
              Width="5" Background="#FFBCBCBC" />

        <Grid Background="#FF05BECB" Grid.Column="2">

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
              VerticalAlignment="Stretch" 
              Grid.Column="3" ResizeBehavior="PreviousAndNext"
              Width="5" Background="#FFBCBCBC"/>

        <Grid Background="#FF4E04A7" Grid.Column="4">
            <MediaElement Stretch="Fill" />
        </Grid>
    </Grid>
</Grid> 
```

如您所见，我有 3 个`Grids`，我想知道是否有可能从一个类管理每个网格，因为我不希望所有逻辑都在这个 Windows 主类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:22:37.640

右键单击您的项目，选择添加子菜单，然后选择用户控件，您应该会看到此对话框。

![在此处输入图像描述](../Images/5114f929bb66c68654361d72fda6b18d.png)

给控件起个名字，然后点击确定

构建您的项目并查看工具箱，您应该会在顶部看到您添加的新用户控件将在那里。

![在此处输入图像描述](../Images/7b4ebf786658cd4db7afd78cd26b112e.png)

将此项目拖到网格的内容中，它应该为您设置所有内容。

这样做之后，我的窗口现在看起来像

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1" x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <local:UserControl1 HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="100"/>
    </Grid>
</Window> 
```

# oracle - ORACLE 服务器会话因致命错误而终止

> ID：15132797
> 
> 赞同：0
> 
> 时间：2013-02-28T10:12:02.070
> 
> 标签：oracle, triggers, oracle11g, ora-00600

我编辑了一个`Trigger`并尝试保存。然后我得到了以下错误。

```
Error: ORA-00603: ORACLE server session terminated by fatal error
ORA-00600: internal error code, arguments: [kqlidchg1], [], [], [], [], [], [], [], [], [], [], []
ORA-00604: error occurred at recursive SQL level 1
ORA-00001: unique constraint (SYS.I_PLSCOPE_SIG_IDENTIFIER$) violated 
```

我无法保存我`trigger`的修改。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-06T01:52:54.033

我反复得到这个错误列表创建一个触发器：

```
ORA-00603: ORACLE server session terminated by fatal error
ORA-00600: internal error code, arguments: [kqlidchg1], [], [], [], [], [], [], [], 
ORA-00604: error occurred at recursive SQL level 1
ORA-00001: unique constraint (SYS.I_PLSCOPE_SIG_IDENTIFIER$) violated
00603\. 00000 -  "ORACLE server session terminated by fatal error" 
```

在 SQLDeveloper 中，编辑 PLSCOPE_SETTINGS：

```
Tools->Preferences ->Database->PL/SQL Compiler 
```

将“PLScope 标识符：”设置为“无”这解决了问题，此后我没有任何问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T10:16:13.730

ORA-00600 是一个通用的 Oracle 消息，表示您的操作存在未处理的副作用，即 Oracle 错误。错误的确切原因可能取决于数据库版本、补丁级别和平台（操作系统风格和版本）。

处理这些事情的正确方法是联系 Oracle 支持。如果您没有支持合同，您可能不走运。ORA-00600 的性质意味着它们中的一些会访问非常特定的站点，所以也许以前没有其他人遇到过这种情况。但是试试谷歌，你永远不会知道...

* * *

瞧！Google 为[Marc Tempel 提供了这颗宝石](http://logbuffer.wordpress.com/2011/10/19/oracle-ora-0600-on-creating-trigger-on-11-2/)。也许它会帮助你。

# python - Appengine - 几个上传处理程序

> ID：15132800
> 
> 赞同：0
> 
> 时间：2013-02-28T10:12:07.927
> 
> 标签：python, google-app-engine, file-upload, image-uploading

在 python 中为 gae 设置不同的上传处理程序的最佳方法是什么？

```
class MainHandler(webapp.RequestHandler):
    def get(self, test):
        self.response.out.write(test)
        upload_url = blobstore.create_upload_url('/upload')
        self.response.out.write('<html><body>')
        self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
        self.response.out.write("""Upload File: <input type="file" name="file"><br>         <input type="submit" name="submit" value="Submit"> </form></body></html>""")

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]
        self.redirect('/') 
```

此代码工作正常，但始终在 url /upload 调用 Uploadhandler

```
 upload_url = blobstore.create_upload_url('/another_url') 
```

upload_url 仍然指 /upload，那么从表单 A 重定向到上传处理程序 A 以及从表单 B 重定向到上传处理程序 B 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:59:22.320

您是否错过了网址开头的“/_ah/”？Afaik，create_upload_url 总是指向类似 /_ah/upload/xxxx （这是您上传到的 url），然后调用内部重定向到您提供的 url（/upload 或 /another_url）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:28:05.543

uploadhandler 接收到带有上传文件的回调。要传递其他信息，例如 webapp2 会话数据，您可以使用多重继承并使用会话数据来找出要使用的重定向。

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler, webapp2.RequestHandler):

.... 
```

# apache-flex - 创建闪光灯转盘

> ID：15132815
> 
> 赞同：0
> 
> 时间：2013-02-28T10:12:46.143
> 
> 标签：apache-flex, flash

我需要能够生成场景的 .swf 文件（或我可以在 Flex 中使用的任何其他格式）。

不是您站在中心环顾四周的传统全景图，而是您围绕对象/场景旋转的全景图。转盘？

通常用于展示产品，因为您可以旋转它们（从以不同角度呈现的对象的多个图像生成）。

有这方面的免费软件吗？

我想要的是生成`.swf`不同场景的文件，我可以在我的软件中使用。这些组件应该是转盘。如果我在 swf 上单击并拖动鼠标，我将能够围绕对象/场景旋转。就像一个倒置的全景查看器。这是通过在对象周围以 360 度角渲染多个图像，并在我拖动旋转时滚动这些图像来实现的。

我已经在 Flex 中实现了它，但我正在徘徊，是否有任何工具可以为我做这件事，这样它会更轻。

现在，我将 180 帧缓冲到内存中，并在拖动视图时交换图像。

我想我不擅长解释。检查这个：[http ://productorbit.com/](http://productorbit.com/)

忽略生成过程。我使用 3D 渲染材质。我想要的是直升机的结果转盘，如该页面上的视频下方所示。

# javascript - 与 JQM 一起使用的图像链接轮播

> ID：15132817
> 
> 赞同：1
> 
> 时间：2013-02-28T10:12:49.090
> 
> 标签：javascript, jquery, carousel, jquery-mobile

谁能指导我一些代码，在那里我可以获得一个整洁的图像轮播，这些图像也是与 jqm 一起使用的链接。如果我可以选择影响滚动方向的某些东西来指示我在旋转木马中到达的位置，那就太好了。我认为最理想的 JavaScript 解决方案。提前致谢

# objective-c - 转换 unicode

> ID：15132818
> 
> 赞同：2
> 
> 时间：2013-02-28T10:12:50.417
> 
> 标签：objective-c, unicode

我必须`UITextField`输入一个`unicode`值，当我点击`UIButton`需要转换它并显示在 a 中时`UILabel`。
下面的代码对我来说工作正常（我的代码中的 unicode）：

```
NSString *str = [NSString stringWithUTF8String:"\u0D05"];
    m_CtrlLabel.text=str; 
```

我的问题是我无法从`UITextField`. 那就是我在`0D05`里面输入`UITextField`，我需要转换它并显示在标签中，我尝试了很多组合但没有运气。
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:40:42.800

`0D05`只是一个十六进制数。您可以使用`NSScanner`将十六进制字符串解析为整数，然后创建一个`NSString`包含 Unicode 字符的字符。

```
NSString *hexString = yourInputField.text;

NSScanner *scanner = [NSScanner scannerWithString:hexString];
uint32_t unicodeInt;
if ([scanner scanHexInt:&unicodeInt]) {
    unicodeInt = OSSwapHostToLittleInt32(unicodeInt); // To make it byte-order safe
    NSString *unicodeString = [[NSString alloc] initWithBytes:&unicodeInt length:4 encoding:NSUTF32LittleEndianStringEncoding];
    yourOutputLabel.text = unicodeString;
} else {
    // Conversion failed, invalid input.
} 
```

这甚至适用于 Unicode > U+FFFF，例如`1F34C`（感谢 R. Martinho Fernandes 的反馈）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:02:05.427

尝试更改`UILable`.
实际上有些字体不能显示所有的 unicode 输出！
这曾经发生在我身上`Java Swing`！
我试图在 a`unicode`上显示一个字符串，`JLabel`但 unicode 字符串没有显示在`JLablel`.
然后我将字体更改为`Arial`显示的 unicode 值！
因此，我建议您尝试将字体从 to`Arial`或其他字体更改。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:29:23.637

问题是输入应该是字符指针

```
NSString *str = [NSString stringWithUTF8String:[self.textField.text UTF8String]];
    m_CtrlLabel.text=str; 
```

# algorithm - 生成配对游戏的时间表

> ID：15132821
> 
> 赞同：2
> 
> 时间：2013-02-28T10:12:55.020
> 
> 标签：algorithm, scheduling

我们有8名球员。

在一张桌子上玩 4 名玩家（两对）。

![在此处输入图像描述](../Images/50e534a4fb71596ab70f8065b1bff090.png)

因此，每个玩家都需要与所有其他 7 名玩家配对，并让这些玩家作为对手的计数相同。

如果只是创建表并从列表中删除它，我们有：

```
Tour 1: (1,2) - (3,4) | (5,6) - (7,8)
Tour 2: (1,3) - (2,5) | (4,7) - (6,8)
.....................................
.....................................
Tour 7: (1,8) - (2,7) | (3,6) - (4,5) 
```

但是一些付款人会比其他人经常遇到一些反对者。

我需要朝那个方向思考？

****更新**** 在 Jens Schauders 解决方案的情况下，我们将进行 7 轮。如果玩家 2 与对手对弈，我们将有 3 次对手 4 和 1 次对手 7。

如果在此模式中拆分对

```
 TABLE 1 |  TABLE 2

Pair1: 1    2  |  3    4
      ------------------
Pair2: 5    6  |  7    8 
```

错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:06:29.413

我认为您正在寻找的算法有一个简单的可视化：

想象一张长桌，对手坐在对面：

```
1    2    3    4
----------------
5    6    7    8 
```

现在，对于每一轮新的回合，每个人都移动到他左边的位置。可能在桌子的另一边，除了一个例外：玩家一号保持她的座位。所以下一轮看起来像这样

```
1    5    2    3    
----------------
6    7    8    4 
```

如果您现在将长桌分成两部分，您将获得适合您的小桌的配对。

**关于更新的问题**

为了使对手分布更均匀，可以尝试以不同的方式拆分大表，例如从第一列和第四列构建一个小表，从第 2+3 列构建第二个小表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:45:26.427

您可以在 4 支球队之间进行 6 场独特的比赛。有 7 种可能的配对，因此有 42 种独特的游戏。

每个玩家只与其他玩家配对一次，并且与他们中的每个人精确对战 6 次。

列表：

```
Pairs 01: (1,2),(3,4),(5,6),(7,8)
PairRound 1:
GameRound 01: (1,2) - (3,4) | (5,6) - (7,8)
GameRound 02: (1,2) - (7,8) | (3,4) - (5,6)
GameRound 03: (1,2) - (5,6) | (3,4) - (7,8)

Pairs 02: (1,3),(2,4),(5,7),(6,8)
PairRound 2:
GameRound 04: (1,3) - (2,4) | (5,7) - (6,8)
GameRound 05: (1,3) - (6,8) | (2,4) - (5,7)
GameRound 06: (1,3) - (5,7) | (2,4) - (6,8)

Pairs 03: (1,4),(2,3),(5,8),(6,7)
PairRound 3:
GameRound 07: (1,4) - (2,3) | (6,7) - (5,8)
GameRound 08: (1,4) - (5,8) | (2,3) - (6,7)
GameRound 09: (1,4) - (6,7) | (2,3) - (5,8)

Pairs 04: (1,5),(2,6),(3,7),(4,8)
PairRound 4:
GameRound 10: (1,5) - (2,6) | (3,7) - (4,8)
GameRound 11: (1,5) - (4,8) | (2,6) - (3,7)
GameRound 12: (1,5) - (3,7) | (2,6) - (4,8)

Pairs 05: (1,6),(2,5),(3,8),(4,7)
PairRound 5:
GameRound 13: (1,6) - (2,5) | (3,8) - (4,7)
GameRound 14: (1,6) - (4,7) | (2,5) - (3,8)
GameRound 15: (1,6) - (3,8) | (2,5) - (4,7)

Pairs 06: (1,7),(2,8),(3,5),(4,6)
PairRound 6:
GameRound 16: (1,7) - (2,8) | (3,5) - (4,6)
GameRound 17: (1,7) - (4,6) | (2,8) - (3,5)
GameRound 18: (1,7) - (3,5) | (2,8) - (4,6)

Pairs 07: (1,8),(2,7),(3,6),(4,5)
PairRound 8:
GameRound 19: (1,8) - (2,7) | (3,6) - (4,5)
GameRound 20: (1,8) - (4,5) | (2,7) - (3,6)
GameRound 21: (1,8) - (3,6) | (2,7) - (4,5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T13:04:02.027

下面是两个时间表。第一个时间表是 2 轮循环固定合作伙伴时间表。这是一个平衡的 2 轮循环“对”赛程。或者，另一种说法是我们正在安排“对”中的“对”。我想这就是你要找的吗？

第二个赛程是一个“平衡的”2 轮循环赛“单打”赛程，有 8 名球员（每个球员都是一个团队）。

**注意：在这两个时间表上，所有球员/球队都轮流通过所有表。**没有球员/球队固定在一个固定的位置**，这对大多数联赛来说都是不受欢迎的，因为它会造成不平衡的时隙分布**。该线程上发布的其他两个答案将单个团队锁定在单个时间段中，然后将其他 7 个团队轮换通过该时间段。

下面的 PAIRS-4 时间表是**固定的合作伙伴**时间表。我们还有一个 8 人**轮换合作伙伴**的时间表。在每轮循环赛中，所有球员都与其他 7 名球员中的每一个搭档一次，并且与所有其他球员正好交手两次。

```
PAIRS-4 SCHEDULE                     Date 8/4/14            
-    
DATE   DAY  TIME   LOCATION     GM#   HOME  v  AWAY
Week 1         
AUG  4 MON  6:00pm Table-1       1  #1 & #2 v #7 & #8
AUG  4 MON  6:00pm Table-2       1  #3 & #4 v #5 & #6
Week 2
AUG 11 MON  6:00pm Table-1       2  #7 & #8 v #3 & #4
AUG 11 MON  6:00pm Table-2       2  #5 & #6 v #1 & #2
Week 3    
AUG 18 MON  6:00pm Table-1       3  #1 & #2 v #3 & #4
AUG 18 MON  6:00pm Table-2       3  #5 & #6 v #7 & #8
Week 4
AUG 25 MON  6:00pm Table-1       4  #5 & #6 v #3 & #4
AUG 25 MON  6:00pm Table-2       4  #7 & #8 v #1 & #2
Week 5        
SEP  1 MON  6:00pm Table-1       5  #1 & #2 v #5 & #6
SEP  1 MON  6:00pm Table-2       5  #3 & #4 v #7 & #8
Week 6    
SEP  8 MON  6:00pm Table-1       6  #7 & #8 v #5 & #6
SEP  8 MON  6:00pm Table-2       6  #3 & #4 v #1 & #2
-    
========================================================
-
SINGLES-8 SCHEDULE               Date 8/5/14 
-
DATE   DAY  TIME    LOCATION   GM#  HOME v AWAY
Week 1
AUG  5 TUE  6:00pm  Table-1     1   #1 v #8
AUG  5 TUE  6:00pm  Table-2     1   #2 v #7
AUG  5 TUE  6:00pm  Table-3     1   #3 v #6
AUG  5 TUE  6:00pm  Table-4     1   #4 v #5
Week 2    
AUG 12 TUE  6:00pm  Table-1     2   #5 v #2
AUG 12 TUE  6:00pm  Table-2     2   #8 v #6
AUG 12 TUE  6:00pm  Table-3     2   #7 v #1
AUG 12 TUE  6:00pm  Table-4     2   #3 v #4
Week 3
AUG 19 TUE  6:00pm  Table-1     3   #2 v #3
AUG 19 TUE  6:00pm  Table-2     3   #5 v #7
AUG 19 TUE  6:00pm  Table-3     3   #4 v #8
AUG 19 TUE  6:00pm  Table-4     3   #6 v #1
Week 4
AUG 26 TUE  6:00pm  Table-1     4   #6 v #4
AUG 26 TUE  6:00pm  Table-2     4   #1 v #5
AUG 26 TUE  6:00pm  Table-3     4   #7 v #3
AUG 26 TUE  6:00pm  Table-4     4   #8 v #2
Week 5
SEP  2 TUE  6:00pm  Table-1     5   #3 v #5
SEP  2 TUE  6:00pm  Table-2     5   #4 v #1
SEP  2 TUE  6:00pm  Table-3     5   #2 v #6
SEP  2 TUE  6:00pm  Table-4     5   #7 v #8
Week 6
SEP  9 TUE  6:00pm  Table-1     6   #6 v #7
SEP  9 TUE  6:00pm  Table-2     6   #4 v #2
SEP  9 TUE  6:00pm  Table-3     6   #5 v #8
SEP  9 TUE  6:00pm  Table-4     6   #1 v #3
Week 7
SEP 16 TUE  6:00pm  Table-1     7   #7 v #4
SEP 16 TUE  6:00pm  Table-2     7   #8 v #3
SEP 16 TUE  6:00pm  Table-3     7   #2 v #1
SEP 16 TUE  6:00pm  Table-4     7   #5 v #6
Week 8
SEP 23 TUE  6:00pm  Table-1     8   #7 v #2
SEP 23 TUE  6:00pm  Table-2     8   #6 v #3
SEP 23 TUE  6:00pm  Table-3     8   #5 v #4
SEP 23 TUE  6:00pm  Table-4     8   #8 v #1
Week 9
SEP 30 TUE  6:00pm  Table-1     9   #6 v #8
SEP 30 TUE  6:00pm  Table-2     9   #1 v #7
SEP 30 TUE  6:00pm  Table-3     9   #4 v #3
SEP 30 TUE  6:00pm  Table-4     9   #2 v #5
Week 10
OCT  7 TUE  6:00pm  Table-1    10   #7 v #5
OCT  7 TUE  6:00pm  Table-2    10   #8 v #4
OCT  7 TUE  6:00pm  Table-3    10   #1 v #6
OCT  7 TUE  6:00pm  Table-4    10   #3 v #2
Week 11
OCT 14 TUE  6:00pm  Table-1    11   #5 v #1
OCT 14 TUE  6:00pm  Table-2    11   #3 v #7
OCT 14 TUE  6:00pm  Table-3    11   #2 v #8
OCT 14 TUE  6:00pm  Table-4    11   #4 v #6
Week 12
OCT 21 TUE  6:00pm  Table-1    12   #1 v #4
OCT 21 TUE  6:00pm  Table-2    12   #6 v #2
OCT 21 TUE  6:00pm  Table-3    12   #8 v #7
OCT 21 TUE  6:00pm  Table-4    12   #5 v #3
Week 13
OCT 28 TUE  6:00pm  Table-1    13   #2 v #4
OCT 28 TUE  6:00pm  Table-2    13   #8 v #5
OCT 28 TUE  6:00pm  Table-3    13   #3 v #1
OCT 28 TUE  6:00pm  Table-4    13   #7 v #6
Week 14
NOV  4 TUE  6:00pm  Table-1    14   #3 v #8
NOV  4 TUE  6:00pm  Table-2    14   #1 v #2
NOV  4 TUE  6:00pm  Table-3    14   #6 v #5
NOV  4 TUE  6:00pm  Table-4    14   #4 v #7
-               
-                 # # # # #    
- 
```

您可以将上面的时间表复制并粘贴到您的文字处理器中，然后使用“搜索和替换”将球员号码替换为真实姓名。您还可以编辑时间表，即更改日期和时间、添加注释、图形、每个玩家的联系信息等。

# asp.net - 如何使用 asp.net 获取未读电子邮件信息？

> ID：15132822
> 
> 赞同：2
> 
> 时间：2013-02-28T10:12:57.220
> 
> 标签：asp.net, c#-4.0

```
Pop3Client pop3Client;
if (Session["Pop3Client"] == null)
{
    pop3Client = new Pop3Client();
    pop3Client.Connect(txtMailServer.Text, int.Parse(txtPort.Text), chkSSL.Checked);
    pop3Client.Authenticate(txtUserName.Text, txtPassword.Text);
    Session["Pop3Client"] = pop3Client;
}
else
{
    pop3Client = (Pop3Client)Session["Pop3Client"];
}
int count = pop3Client.GetMessageCount();
DataTable dtMessages = new DataTable();
dtMessages.Columns.Add("MessageNumber");
dtMessages.Columns.Add("From");
dtMessages.Columns.Add("Subject");
dtMessages.Columns.Add("DateSent");
int counter = 0;
for (int i = count; i >=1 ; i--)
{
Message message = pop3Client.GetMessage(count);
Message msg = pop3Client.GetMessage(count);
    dtMessages.Rows.Add();
    dtMessages.Rows[dtMessages.Rows.Count - 1]["MessageNumber"] = count;
    dtMessages.Rows[dtMessages.Rows.Count - 1]["Subject"] = message.Headers.Subject;
    dtMessages.Rows[dtMessages.Rows.Count - 1]["DateSent"] = message.Headers.DateSent;
    counter++;
    if (counter > 5)
    {
        break;
    }
}
gvEmails.DataSource = dtMessages;
gvEmails.DataBind(); 
```

谁能告诉我如何使用 asp.net Web 应用程序获取未读电子邮件信息？我只知道如何获取所有电子邮件。我想收听来自此应用程序的新电子邮件，请任何人帮助我？

而且我还需要下载附件？？？有人告诉我怎么做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:26:22.720

为此，您可以使用 IMAP 协议。我认为这些链接[首先](http://www.codeproject.com/Answers/205509/How-to-read-email-from-gmail-using-asp-net.aspx#answer1)和[其次会很方便](http://www.eggheadcafe.com/community/asp-net/17/10172236/how-to-retrieve-mails-from-gmail.aspx)

# java - 我们什么时候应该修改通过引用传递的对象？

> ID：15132825
> 
> 赞同：0
> 
> 时间：2013-02-28T10:13:05.953
> 
> 标签：java, pass-by-reference

在查看一些 java 代码时，我遇到了这样一段代码：

```
Integer initialQ = someObject.getInitialQ();
Integer finalQ = null;
BigDecimal factor = calculateFactor(initialQ, finalQ);

if (finalQ.compareTo(initialQ) != 0){
   //do something
} 
```

`finalQ`在方法 calculateFactor 中进行了修改。

Eclipse 给我一个“空指针访问：变量 idUnidadFinal 在这个位置只能为空”警告`if (finalQ...)`。我明白，由于我们需要`factor`从方法中返回，唯一的修改方法`finalQ`是将它作为参考传递。但是，这是正确的、被接受的方式吗？

我能想到的唯一选择是设计一个新的类，它具有`finalQ`和`factor`作为字段，但看起来不必要地复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:15:57.330

这不是通过引用传递。在传递给它的函数中创建了一个新对象。的值`finalQ`只能为空。如果要更改值或使其成为`finalQ`全局对象，则需要返回该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:24:49.097

java中没有所谓**的通过引用传递，这是一个令人困惑的术语。**

当你将一个对象传递给另一个函数时，传递的是**引用的值**。在该方法中，创建引用的本地副本并指向相同的内存地址。所以通常如果你传递一个非空变量并在一个单独的方法中修改它，原始对象也会改变，因为原始对象和方法本地副本指向相同的内存地址，但是如果你分配一个新实例到方法本地复制然后随后更改为本地副本与原始副本无关。

在您的情况下，我猜您在**calculateFactor中为****finalQ**分配了一个非空实例，这使得**finalQ 的本地副本**指向另一个内存地址并保留**原始 finalQ**。

 ******因此，如果要修改传递给方法的对象，则只能**更改它本身**，而不能将其分配给另一个引用。如果最初传入的对象为 null 并且您期望对原始对象进行更改，则必须返回更改后的对象。******

# google-chrome - window.location 在 Chrome 和 Safari 中不起作用

> ID：15132831
> 
> 赞同：0
> 
> 时间：2013-02-28T10:13:11.343
> 
> 标签：google-chrome, redirect, safari, location

我有下面的脚本来打开电子邮件客户端并重定向页面以避免空白，但是该脚本在`Firefox`and中工作正常`IE`，但是`Chrome`并`Safari`没有打开电子邮件客户端而只是重定向到 url，是否有任何解决方法可以解决这个问题?

```
if(!empty($emails)){
    echo '<script>
    window.location = "mailto:abc@site.com?cc=xyz@site.com&bcc='.$emails.'&subject=Hello:";
    window.location = "http://www.site.com/current_page.php";
    </script>';
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:18:50.643

采用

```
window.location.href 
```

代替

```
window.location 
```

更好用

以下适用于我的当前版本的 IE、FireFox、Chrome 和 Safari for Windows (fiddle = [http://jsfiddle.net/MgX9U/](http://jsfiddle.net/MgX9U/) )

```
window.location.replace("mailto:?subject=hi&body=content"); 
```

编辑：我们在第二次调用之前使用 setTimeout 函数，并为第二次调用延迟。

# ios - 如何找到您正在使用的 iOS 版 FacebookSDK.framework？

> ID：15132832
> 
> 赞同：7
> 
> 时间：2013-02-28T10:13:12.897
> 
> 标签：ios, facebook

我正在维护一个较旧的 iOS 项目，但我似乎无法找到该`FacebookSDK.framework`项目正在使用的版本。

我可以在哪里找到任何想法？

**[更新]**

我所拥有的只是`FacebookSDK.framework`在项目目录中。版本是否包含在这些标题中的任何位置？到处看了看，没有太多运气。谢谢

# java - 强制将 JRE 系统库添加到 android 项目

> ID：15132838
> 
> 赞同：0
> 
> 时间：2013-02-28T10:13:48.227
> 
> 标签：java, android, eclipse

在一台机器上，我的 android 库构建并运行良好。另一方面，在我添加 JRE System Runtime 之前，它不会构建相同的构建路径。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:07:33.830

**解决方案应该在这些地方：**

*   确保机器的两个 jre 库路径相同。

*   并且您还应该查看 android sdk 是否与另一台机器相同

*   并且机器应该具有相同的操作系统的 32 位或 64 位

# java - Java简化代码

> ID：15132842
> 
> 赞同：0
> 
> 时间：2013-02-28T10:13:56.070
> 
> 标签：java

我有一个初学者问题：

我有 3 个类扩展 Thread。他们在做同样的工作：打开一个 ServerSocket，然后在一个 while 循环中等待连接。这些类之间的唯一区别是，当它们有连接时，它们会启动一个特定的线程。我想简化这一点，让一个班级做这项工作，atm 3 个班级正在做。在该示例中，唯一的区别是对 SocketThread1、SocketThread2 和 SocketThread3 的调用。

我怎么能做 1 节课而不是 3 节课？

例子：

```
\\class 1

public void run()
{
    while(true)
    {
        Socket s = serversocket.accept();
        new SocketThread1(s).start();
    }}

\\class 2

public void run()
{
    while(true)
    {
        Socket s = serversocket.accept();
        new SocketThread2(s).start();
    }

}

\\class 3

public void run()
{
    while(true)
    {
        Socket s = serversocket.accept();
        new SocketThread3(s).start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:17:50.530

为什么不为 SocketThread 1,2 和 3 实现一个接口（或父类），然后只传递这个接口的一个实例并调用它的 start() 方法？

编辑：我的意思是这样的：（代码未经测试，应该适应您的要求）

```
public class SocketThread1 implements SocketThread{...}
public class SocketThread2 implements SocketThread{...}
public class SocketThread3 implements SocketThread{...}
public class YourClass implements Runnable{
private SocketThread thread;
public YourClass(SocketThread thread){
    this.thread = thread;
}
public void run()
{
thread.start();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:19:34.737

您可以有一个 Server 类，它在构造函数中接收一个 SocketThreadFactory。

或者，服务器可以是抽象的，子类应该实现 createClientHandlerThread(Socket) 方法：

```
public abstract class Server extends Thread {
    private ServerSocket serverSocket;

    public Server(int port) throws IOException {
        serverSocket = new ServerSocket(port);
    }

    public void run() {
        try {
            while (true) {
                Socket s = serverSocket.accept();
                createClientHandlerThread(s).start();
            }
        } catch (IOException e) {
            // TODO: handle the exception
        }

    }

    protected abstract Thread createClientHandlerThread(Socket s);
} 
```

现在定义三个（或更多）简单的子类，它们只处理给定套接字的线程创建。

# iis - nlog 配置 - 基于时间的文件归档不起作用

> ID：15132843
> 
> 赞同：3
> 
> 时间：2013-02-28T10:14:00.153
> 
> 标签：iis, nlog

我已经按照[这里](http://nlog-project.org/wiki/File_target#Time-based_file_archival)的示例并在我的 IIS 中定义了一个基于时间的文件存档，如下所示

```
<nlog autoReload="true" throwExceptions="true" >
 <targets async="true">
  <target name="file" type="File"
        layout="${longdate} ${logger} ${message}"
        fileName="${basedir}/logs/logfile.txt"
        archiveFileName="${basedir}/logs/archives/log.{#}.${longdate}.txt"
        archiveEvery="Day"
        archiveNumbering="Rolling"
        maxArchiveFiles="31"
        concurrentWrites="true"
        keepFileOpen="false"
        encoding="iso-8859-2" />
 </targets>
<rules>
  <logger name="*" minlevel="Trace" writeTo="file" />
</rules> 
```

虽然我已经创建了文件夹 - 文件没有存档。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:01:03.237

我在所有项目中都使用了以下配置，并且似乎归档得很好：

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true">

    <variable name="LogFileName" value="App"/>
    <variable name="LogFileExtension" value="log"/>
    <variable name="LogsLocation" value="c:\TempFiles\AppLogs" />

    <targets async="true">
      <target name="console" xsi:type="Console" />
      <target name="flatFileTarget" xsi:type="File"
              layout="${date:format=dd-MM-yyyy HH\:mm\:ss.fff} | ${message}"
              fileName="${LogsLocation}\${LogFileName}.${LogFileExtension}"
              archiveFileName="${LogsLocation}\${LogFileName}.{#####}.${LogFileExtension}"
              archiveAboveSize="500000" maxArchiveFiles="10"
              archiveNumbering="Rolling"
              createDirs="true"
              concurrentWrites="true"
              archiveEvery="Day"
              deleteOldFileOnStartup="true" />
    </targets>

    <rules>
      <logger name="*" writeTo="flatFileTarget" />
      <logger name="*" writeTo="console" />
    </rules>

  </nlog> 
```

还要确保运行应用程序的用户对将创建日志文件的文件夹具有操作系统级别的写入权限。HTH。

# msbuild - 指定的解决方案配置“Latest|Any CPU”无效

> ID：15132848
> 
> 赞同：8
> 
> 时间：2013-02-28T10:14:12.107
> 
> 标签：msbuild, jenkins

我在 Jenkins 中运行的 MSBuild 脚本出现此错误

```
C:\<path>\<solutionname>.sln.metaproj : error MSB4126: The specified solution
configuration "Latest|Any CPU" is invalid. Please specify a valid solution 
configuration using the Configuration and Platform properties (e.g. MSBuild.exe
Solution.sln
/p:Configuration=Debug /p:Platform="Any CPU") or leave those properties blank
to use the default solution configuration. 
```

在我的 Jenkins 配置中 Build->Command Line Arguments 我有

```
/t:Deploy /P:Configuration=Latest 
```

我以前在其他项目上使用过这个没有任何问题，而且我也几乎使用相同的构建文件，但我以前从未见过这个问题发生过。我怀疑由于唯一不同的是解决方案文件，因此可能需要更改一些不同的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T11:05:03.913

“最新”配置是否存在？默认情况下，当您创建新解决方案时，Visual Studio 会创建 2 个配置。如果要创建自定义配置，则需要使用 Visual Studio 中的配置管理器，它们是“调试”和“发布”。

在解决方案资源管理器中右键单击解决方案并选择“配置管理器”，然后您将看到以下 UI。这列出了解决方案中的所有项目，它们是什么类型（任何 CPU、x86 等）以及它们是否应该作为该配置的一部分进行构建。

![Visual Studio 配置管理器 UI](../Images/2ca9eafca2e210ade016e4211a7e7c50.png)

您现在可以创建一个名为“最新”的配置并决定需要为该配置构建什么。

# java - Android - AutoCompleteTextView、showDropDown() 并不总是有效

> ID：15132849
> 
> 赞同：1
> 
> 时间：2013-02-28T10:14:19.137
> 
> 标签：java, android, view

当我每次尝试动态更新 autoCompleteTextview ArrayAdapter 时，如果显示下拉列表，它就会消失并且 showDropDown() 无效。

我的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {

.................................................

    mAutoComepleteTextView = (AutoCompleteTextView)findViewById(R.id.tv_autocomplete_search);
    mAutoComepleteTextView.setOnItemClickListener(this);
    mAutoComepleteTextView.addTextChangedListener(this);

    mArrayAdaptor = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line);
    mArrayAdaptor.setNotifyOnChange(false);

    mAutoComepleteTextView.setAdapter(mArrayAdaptor);
    mAutoComepleteTextView.setOnFocusChangeListener(this);
    mAutoComepleteTextView.setOnClickListener(this);
.................................................
} 
```

OnClick 事件：

```
 @Override
public void onClick(View v) {
     super.onClick(v);
     switch(v.getId()){
         case R.id.tv_autocomplete_search:
        mAutoComepleteTextView.showDropDown(); // here work fine
        break;
    default :
        break;
    }
} 
```

onFocusChange 事件：

```
 @Override
public void onFocusChange(View v, boolean hasFocus) {
    switch(v.getId()){
    case R.id.tv_autocomplete_search:
        mAutoComepleteTextView.showDropDown(); // here work fine
        break;
    default :
        break;
    }       
} 
```

我的回调，这是我的问题：

```
 @Override
public void onNewFriends(Vector<Friend> friends) {
    super.onNewFriends(friends);
    runOnUiThread(new Runnable() {

        @Override
        public void run() {
            boolean isVisible = mAutoComepleteTextView.isPopupShowing();
            if(isVisible)
                mAutoComepleteTextView.dismissDropDown();
            mArrayAdaptor.clear();

            for (Friend friend : ActivitiesPrefsData.getInstace().getFriends()) {
                if (friend.m_strEmail.equals(D.username)){
                    mArrayAdaptor.add(friend.m_deviceInfo.m_strName);
                }
                else
                    mArrayAdaptor.add(friend.m_strEmail);
            }
             mArrayAdaptor.notifyDataSetChanged();
             if(isVisible)
                mAutoComepleteTextView.showDropDown(); // here doesn't work
             }
    });
} 
```

如果有任何帮助，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:28:42.587

我在这里发布我找到的解决方案，重置适配器：

```
 @Override
public void onNewFriends(Vector<Friend> friends) {
    super.onNewFriends(friends);
    runOnUiThread(new Runnable() {

        @Override
        public void run() {
            mArrayAdaptor.clear();

            for (Friend friend : ActivitiesPrefsData.getInstace().getFriends()) {
                if (friend.m_strEmail.equals(D.username)){
                    mArrayAdaptor.add(friend.m_deviceInfo.m_strName);
                    Log.d("java", friend.m_strEmail + " -- " + friend.m_deviceInfo.m_strName);
                }
                else
                    mArrayAdaptor.add(friend.m_strEmail);
            }
            mAutoComepleteTextView.setAdapter(null);          //this work
            mAutoComepleteTextView.setAdapter(mArrayAdaptor); //for me
        }
    });
} 
```

# php - 将数据从 Mysql 导出到 Excel

> ID：15132850
> 
> 赞同：-2
> 
> 时间：2013-02-28T10:14:21.683
> 
> 标签：php, mysql

**我正在使用 php 脚本将数据从 Mysql 数据库导出到 Excel 工作表。打开 excel 文件时，我遇到以下错误。错误在 codenovssem.xls 中找到不可读的内容你想恢复这个内容吗工作簿？如果您信任工作簿的来源，请单击是...当我单击是时它显示如下“无法读取文件..”我使用了以下代码**

```
$result=mysql_query("select * from t3diff ");//retrieving records from database
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download");
header("Content-Type: application/x-msexcel;charset=utf-8");
header("Content-Disposition: attachment;filename=codenovsem.xls "); 
header("Content-Transfer-Encoding: binary ");
xlsBOF();
/*
Make a top line on your excel sheet at line 1 (starting at 0).
The first number is the row number and the second number is the column, 
both are start       at '0'
*/
xlsWriteLabel(0,0,"student Marks" );
// Make column labels. (at line 3)
xlsWriteLabel(2,0,"codeno");
xlsWriteLabel(2,1,"na");
xlsWriteLabel(2,2,"marks");
xlsWriteLabel(2,3,"subname");
xlsWriteLabel(2,4,"subcode");
xlsWriteLabel(2,5,"branch");
xlsWriteLabel(2,6,"year");
xlsWriteLabel(2,7,"sem");
xlsWriteLabel(2,8,"setno");
xlsWriteLabel(2,9,"bundleno");
xlsWriteLabel(2,10,"afor");
xlsWriteLabel(2,11,"oname");
xlsWriteLabel(2,12,"valdate");
xlsWriteLabel(2,13,"valtime");
$xlsRow =  3;
// Put data records from mysql by while loop.
while($row=mysql_fetch_array($result)){
xlsWriteNumber($xlsRow,0,$row['codeno']);
xlsWriteNumber($xlsRow,1,$row['na']);
xlsWriteNumber($xlsRow,2,$row['marks']);
xlsWriteNumber($xlsRow,3,$row['subname']);
xlsWriteNumber($xlsRow,4,$row['subcode']);
xlsWriteNumber($xlsRow,5,$row['branch']);
xlsWriteNumber($xlsRow,6,$row['year']);
xlsWriteNumber($xlsRow,7,$row['sem']);
xlsWriteNumber($xlsRow,8,$row['setno']);
xlsWriteNumber($xlsRow,9,$row['bundleno']);
xlsWriteNumber($xlsRow,10,$row['afor']);
xlsWriteNumber($xlsRow,11,$row['oname']);
xlsWriteNumber($xlsRow,12,$row['valdate']);
xlsWriteNumber($xlsRow,13,$row['valtime']);
$xlsRow++;
} 
xlsEOF();//End of Excel file
exit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:19:43.413

几天前我遇到了同样的问题。实际上，您不会导出真正的 .xls 文件。它仍然是一个扩展名为 .xls 的文本文件。

所以我建议你使用[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

创建 xls 文件是 100% 成功的。它还有一个惊人的文档。

# javascript - link_to 对 :confirm => 没有反应

> ID：15132853
> 
> 赞同：0
> 
> 时间：2013-02-28T10:14:45.860
> 
> 标签：javascript, jquery, ruby-on-rails

我现在确实搜索了两天，以找出为什么这个看似简单的 javascript 在我的 Ruby on Rails 应用程序中不起作用。我有以下代码：

```
<%= link_to "+ nieuw verzoek", :controller => "tickets", :action => "new", :confirm => "are you sure ?" %> 
```

该链接有效，但没有向我显示带有确认问题的弹出屏幕。我不知道为什么。

以下是有关我的应用程序文件的一些信息：

```
My Gemfile:
-------------

source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bcrypt-ruby', '3.0.1'

group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development do
gem 'pg', '0.12.2'
gem 'annotate'
#gem 'sqlite3', '1.3.5'
end

group :production do
gem 'pg', '0.12.2'
end
------end gemfile-----

---------------
software versions
---------------
Rails 3.2.8
ruby 1.9.3p362
---------------

-------------------
application.js
-------------------
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
---------------------

----------------------
application.html.erb
----------------------

<head>
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Old+Standard+TT' rel='stylesheet' type='text/css'>
<title>SimpleCms</title>
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %>

</head>

----------------------- 
```

Jquery 确实有效。当我创建一个简单的：

```
<div> <a class="jq" href="#"> test </a></div> 
```

或通过使用这个：

```
<%= link_to "test",{}, :href => "#",:class => "jq" %> 
```

我可以通过 Jquery 代码来操作这个类的内容。

```
$(document).ready(function() {
$('.jq').click(function() {
$('.jq').animate(
{
fontSize: '40px'    
},
5000 
);

});
}); 
```

但是当我像这样通过 link_to 生成链接时：

```
<%= link_to "+ nieuw verzoek", :controller => "tickets", :action => "new", :confirm => "are you sure ?" %> 
```

没有 javascript 正在发挥作用。

希望有人能给我一些指导来解决我的小问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:45:40.473

你可以这样做

```
<%= link_to "+ nieuw verzoek", {:controller => "tickets", :action => "new"}, :confirm => "are you sure ?" %> 
```

# asp.net - 将视频上传到我的 ASP.net 网站

> ID：15132854
> 
> 赞同：0
> 
> 时间：2013-02-28T10:14:52.087
> 
> 标签：asp.net

我正在使用此代码部分为我的 ASP.net 网站上传视频。但它给出了这样的错误“mySrc 由于它的保护级别而无法访问”我该如何解决它

```
protected void Button1_Click(object sender, EventArgs e)
{
        try
        {
           playSound();
        }
        catch (Exception ex)
        {
            Response.Write("Error in Page:" + ex.Message);
        }
}

public void playSound()
{
    mySrc = @"http://google.com//alarm.wav";
} 
```

## 页面

```
<asp:panel id="Panel1" runat="server" height="1px" width="1px" xmlns:asp="#unknown">
            <object classid="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" id="player">
                class="style3" height="1px" width="1px" >
                <param name="url" value="<%=mySrc %>" />
                <param name="src" value="<%=mySrc %>" />
                <param name="showcontrols" value="true" />
                <param name="autostart" value="true" />
               <!--[if !IE]>-->
                    <object type="video/x-ms-wmv" data="<%=mySrc %>" class="style4" height="1px" width="1px">
                        <param name="src" value="<%=mySrc %>" />
                        <param name="autostart" value="true" />
                        <param name="controller" value="true" />
                </object>
               <!--<![endif]-->
           </object>
        </asp:panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:17:58.413

这样做

`public mySrc =string.Empty;`// 使用公共和全局变量。以便您可以访问。

```
public void playSound()
{
    mySrc = @"http://google.com//alarm.wav";
} 
```

# java - Jersey Web 服务中的 PathParam 值为 null

> ID：15132855
> 
> 赞同：1
> 
> 时间：2013-02-28T10:14:53.900
> 
> 标签：java, android, web-services, jersey, jax-rs

我是网络服务的新手，我是编写代码以在 Android 中调用 Jersey 网络服务。但是我得到 null 作为 PathParam 的参数值。请帮助我了解我的代码有什么问题。

以下是Android中**Web 服务调用的代码：**

```
HttpClient httpClient = new DefaultHttpClient();  
HttpPost httpPost = new HttpPost(url);  

httpPost.setHeader("content-type", "application/json");  
JSONObject data = new JSONObject();  

try {  
   data.put("email_id", strEmailId);  
   data.put("password", strPassword);  
   Log.d("1", data.toString());  
   HttpEntity entity;  
   StringEntity s = new StringEntity(data.toString());  
   entity = s;  
   httpPost.setEntity(entity);  
   HttpResponse response = httpClient.execute(httpPost);  
} 
```

这是**网络服务代码**：

```
@POST  
@Consumes(MediaType.APPLICATION_JSON)  
@Produces(MediaType.APPLICATION_JSON)  
@Path("/dbconnect")  
public String connectToDbTest(@PathParam("email_id") String email_id,@PathParam("password") String password) {  
   System.out.println(email_id+" "+password);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:34:07.227

我不确定是否使用 StringEntity 类，但是在服务器代码上，如果使用 Path 参数，则应在使用前在模板中声明参数。例如

```
 @Path("/dbconnect/{email_id}/{password}") 
```

并且在服务器上收到的 URL 应该是

```
 protocol://server/context/dbconnect/email@id.com/password 
```

虽然通过 url 传递密码是一个非常糟糕的主意，但从功能上讲，它会起作用。

# php - Facebook“弃用offline_access”设置

> ID：15132856
> 
> 赞同：0
> 
> 时间：2013-02-28T10:14:58.413
> 
> 标签：php, facebook-php-sdk

我在我的 Facebook 应用设置中找不到此`Deprecate offline_access`设置。

为什么我找不到？**我的迁移设置如下所示**：

![在此处输入图像描述](../Images/b13d1105d11a602f28949a39723c303a.png)

但是，在**开发者路线图文档中给出的 Facebook 示例中**，设置如下所示：

![在此处输入图像描述](../Images/30c43967b5575969740fd181f10a439d.png)

我究竟做错了什么？？我在使用这个 PHP SDK 时遇到了这样的问题，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:19:03.780

Facebook 禁用了 Offline_access 功能。文章 - [http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/) 您可以尝试这篇文章来创建 FB 应用程序[http://www.123codings.com/facebook/how-to-create-your-first -facebook-application.html](http://www.123codings.com/facebook/how-to-create-your-first-facebook-application.html)。

# asp.net - 带有 Kendo UI 的 Jquery Mobile UI 列表视图

> ID：15132861
> 
> 赞同：0
> 
> 时间：2013-02-28T10:15:07.073
> 
> 标签：asp.net, html, jquery-mobile, kendo-ui, kendo-grid

我正在使用 Jquery 移动 UI 列表视图。

```
<div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="a">

                    <li>
                        <a href="Area.aspx">Area</a>
                    </li>

            </div> 
```

在“Area.aspx”页面中，我有一个 Kendo UI 网格。

```
<div id="example" class="k-content">
            <div id="clientsDb">

                <div id="grid" style="height: 380px"></div>

            </div>

            <style scoped>
                #clientsDb {
                    width: 692px;
                    height: 413px;
                    margin: 30px auto;
                    padding: 51px 4px 0 4px;
                    background: url('web/grid/clientsDb.png') no-repeat 0 0;
                }
            </style>

            <script type="text/javascript">
                $(document).ready(function () {
                    $("#grid").kendoGrid({
                        dataSource: {
                            data: createRandomData(50),
                            pageSize: 10
                        },
                        groupable: true,
                        sortable: true,
                        pageable: {
                            refresh: true,
                            pageSizes: true
                        },
                        columns: [{
                            field: "FirstName",
                            width: 90,
                            title: "First Name"
                        }, {
                            field: "LastName",
                            width: 90,
                            title: "Last Name"
                        }, {
                            width: 100,
                            field: "City"
                        }, {
                            field: "Title"
                        }, {
                            field: "BirthDate",
                            title: "Birth Date",
                            template: '#= kendo.toString(BirthDate,"dd MMMM yyyy") #'
                        }, {
                            width: 50,
                            field: "Age"
                        }
                        ]
                    });
                });
            </script>
        </div> 
```

我的问题是当我点击链接区域页面没有导航时。它被显示的 Jquery 加载图像卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:40:04.843

这是因为 jquery Mobile 会拦截`<a>`标签并使用 AJAX 获取 HTML 来导航页面，而不是直接更改页面。这将导致您在“Area.aspx”中的 javascript 将无法执行。

要解决此问题，您将在 url 中添加`data-ajax="false"`和。`rel="external"`

更多了解jquery Mobile，请参考jquery mobile api：http:
[//jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html](http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html)

或者我关于这个问题的博客：http:
[//demanstudio.blogspot.com/2013/02/javascript-do-not-execute-in-jquery.html](http://demanstudio.blogspot.com/2013/02/javascript-do-not-execute-in-jquery.html)

```
<a href="Area.aspx" rel="external" data-ajax="false">Area</a> 
```

# sql - 如何使用where子句从另一个表修改sql表？

> ID：15132864
> 
> 赞同：0
> 
> 时间：2013-02-28T10:15:28.503
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想更新`test1`表中的一些行。`ColumnC`在 test1 中为零。

例如：

ColumnA 是父节点。ColumnA+ColumnB 是主键。

```
create table test(ColumnA int,  ColumnB int,  ColumnC int);
Insert Into test Values(1, 10,0);
Insert Into test Values(2, 11,0);
Insert Into test Values(3, 14,0);

create table test1(ColumnA int,  ColumnB int,  ColumnC int);
Insert Into test1 Values(1, 9,123);
Insert Into test1 Values(1, 10,0);
Insert Into test1 Values(2, 10,128);
Insert Into test1 Values(2, 11,0);
Insert Into test1 Values(3, 13,145);
Insert Into test1 Values(3, 14,0); 
```

我想要的结果：

![在此处输入图像描述](../Images/a46d4bb20655c29701e71f7713e059a1.png)

我不工作的代码：

```
update test1 a 
set a.ColumnC = b.ColumnC
from test1 as b where convert(nvarchar,b.ColumnA)+
convert (nvarchar,b.ColumnB)in(select
convert(nvarchar,c.ColumnA)+
convert (nvarchar,c.ColumnB)  ColumnC  
from test as c);
select * from test1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:13:36.403

试试这个 ：

```
update a set a.ColumnC=b.ColumnC

from test1 a 
inner join test1 b
on b.ColumnA=a.ColumnA and b.ColumnC!=0
and a.ColumnC=0;

select * from test1; 
```

[SQL小提琴](http://sqlfiddle.com/#!6/b837f/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:38:49.193

如果你想更新表 test1，它必须在你的 where 子句中。

# c - SDMA 飞思卡尔 imx535

> ID：15132865
> 
> 赞同：2
> 
> 时间：2013-02-28T10:15:29.217
> 
> 标签：c, linux-kernel, embedded, arm

这个问题涉及在飞思卡尔 i.mx 设备（具体为[i.MX535](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=i.MX535&nodeId=018rH3ZrDR988D)）上运行 SDMA 引擎？

我想从 UART 接收大于 32 字节的数据包，并使用 SDMA 引擎自动获取它们。这可能吗？有没有人有关于 SDMA 使用的其他信息？

**编辑：**我会更具体地说明我的情况和问题。

我已经设法加载并运行我自己的 SDMA 脚本。测试台是，

1.  在 UART2 上设置 UART 通信（9600，原始）（不使用标准的飞思卡尔 UART 驱动程序）。
2.  使用阈值级别 16 设置 UART2 rx dma 请求。
3.  为 UART2 设置 SDMA 通道，该通道运行像*UART 2 外部存储器*这样的脚本。

此设置适用于小于 32 字节的数据包，但如果大小大于 32 字节，则会丢弃`RX FIFO Overrun`设置位的数据。如果我们使用在 UART2 上启用 SDMA 的标准飞思卡尔 UART 驱动程序，则会发生同样的错误（从 UART 打印出带有*DMA 错误*标签的状态寄存器）。

**Q1。**有人设法在像 UART2 这样的*普通UART 上接收到大于 32 字节的数据包。*暗示我的脚本中有一个BUG。

*普通*UART如何表明它们也是直接连接到 SDMA 内核的共享 UART。我也在 UART3 上测试了这个 UART 脚本。我的结论和观察是：
首先，我使用标准的飞思卡尔 UART 驱动程序和使用标准脚本启用的 SDMA 对其进行测试。这适用于大于 32 字节的数据包和 1MHZ 的波特率。所以我希望用我自己的脚本和 UART 驱动程序让它工作，但我无法构建一个从 UART3 RX 寄存器读取的脚本。

**Q2。**有人写过一个从共享 UART 读取数据的脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:09:23.090

> 有人写过一个从共享 UART 读取数据的脚本吗？

如果要从共享外设读取/写入数据，则必须通过内部 SDMA ram (0x1000-0xFFFF) 中的内存映射“外设 x 内存空间”区域访问数据。所以在我的例子中，访问 0x3000 内部 sdma ram 从 UART3 RXD 寄存器读取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T18:02:37.337

您必须将您的第一个孩子卖给**飞思卡尔**才能获得此类信息。他们有*许多*内部文件。获得答案并非易事。

尝试获取这个 repo：git://git.pengutronix.de/git/imx/sdma-firmware.git

ROM 中有各种例程，其中包含您需要了解的 API。如果您想修改内容，通常没有足够的 RAM 将所有代码放在那里。也许您可以使用 Sasha 的反汇编程序并尝试调整您的二进制文件之一。

IMX25**参考**有更多关于 SDMA 控制器的*公共文档；*我在**IMX53 参考手册**中看到的关于 SDMA 的内容很少。

# c# - 当我将它与列表对象绑定时，如何在网格视图中排列列顺序？

> ID：15132866
> 
> 赞同：0
> 
> 时间：2013-02-28T10:15:29.773
> 
> 标签：c#, windows

当我将它与列表类型对象绑定时，如何在我的数据网格视图中为 Windows 应用程序排列列？

在 db 中，我有 2 个查询来获取数据，因此我无法更改我需要在表单级别进行更改，请建议。

以下是一个小代码

```
public void FillGrid(string DriverID)
{
     grdOrderByDriver.DataSource = cOrder.GetOrderDetailByDriver(int.Parse(DriverID));
     double sum = 0.0;
     SetGird();
     sum = CalculateOrderTotal(sum);
} 
```

`GetOrderDetailByDriver`返回对象

```
BindingList<cOrder> lstOrderByDriver = new BindingList<cOrder>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:54:55.220

“安排”是什么意思？

如果您打算更改列顺序，则有两种可能性：

*   更改列的 DisplayIndex
*   如果您的列是自动生成的，请更改 cOrder 中属性的顺序

如果“排列”是指排序，那么您需要像这样实现一个 SortableBindingList（因为 BindingList 不支持排序）：http: [//www.codeproject.com/Articles/31418/Implementing-a-Sortable-BindingList-非常非常快](http://www.codeproject.com/Articles/31418/Implementing-a-Sortable-BindingList-Very-Very-Quic)

# ajax - jqgrid中的分页ajax调用问题

> ID：15132873
> 
> 赞同：1
> 
> 时间：2013-02-28T10:15:49.330
> 
> 标签：ajax, jquery, jqgrid, struts2-jquery

我已经构建了`jqgrid`使用`struts2-jquery-jqgrid`插件。**除了分页**，一切都很好，

**问题：**当我点击寻呼机中的下一个按钮时，我想执行一些基于 ajax 的操作。我正在使用 `onPaging(jqgrid method)`或`onPagingTopics`主题（jqgrid-plugins）来捕获**分页**事件。我成功地获得了这个分页事件，但从这里开始实际问题。当我点击下一个按钮时，我使用 onPagingTopics **Topics**捕获分页事件，在这个事件中我调用一个 ajax-request，但是在这个 ajax-request 完成之前，它`jqgrid`会自动**重新加载**，这就是为什么我不能使**ajax 调用**成功。为什么会发生这种情况以及如何**限制**jqgrid 重新加载。

**注意：**我的 jqgrid 正在通过调用我在此网格中指定的**url****重新加载。**您可以在此处查看网格[如何在 jqgrid 中加载 json](https://stackoverflow.com/questions/15068668/how-to-load-json-in-jqgrid)

 ****这就是我捕获分页事件的方式：**

```
$.subscribe('paging',function(event,data) 
 {
   var search_string=$("#searchString").val();
   var search_field=$("#searchField").val();        
$.ajax({
         url:"adminJsontable?searchString="+search_string,
         dataType:"json",
         success: function(jsondata,stat)
          {
            var mgrid = jQuery("#gridtable")[0];
            mgrid.addJSONData(jsondata);
          }
       });
  }); 
```

**更新部分：**

```
 $.subscribe('before',function(event,data) 
  {
    var grid = jQuery("#gridtable"); 
    grid.jqGrid('setGridParam',{url:"adminJsontable?searchString="+"neo"});
  }); 
```

这就是我更改网址的方式，但它不起作用。这样我就可以得到任何事件，比如准备好、完成、成功。请指导我现在必须做什么。

**注意：**我可以使用 jqgrid 中使用的任何方法或任何事件，但不知道如何制作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:09:54.207

我认为只是误解了 jqGrid 的工作原理。如果用户选择另一个页面**jqGrid 默认向服务器发出 ajax 请求**。如果您需要在对服务器的请求中包含额外的自定义过滤器，您可以使用`postData`（请参阅[答案](https://stackoverflow.com/a/2928819/315935)）。例如，您可以执行以下操作

```
$("#grid").jqGrid({
    url: "adminJsontable",
    postData: {
        searchField: function () {
            return $("#searchField").val();
        },
        searchValue: function () {
            return $("#searchString").val();
        }
    },
    ... // other options which you use
}); 
```

我自己不使用 Struts，但我相信您可以重写自己以在 Struts 内部使用。

上面的代码将在*每个请求*中向服务器发送附加参数`searchField`，包括分页排序等。因此，如果用户输入一些数据，那么您的服务器代码将考虑这些数据。`searchValue`*`#searchField``#searchString`*

 ***更新**：如果您不知道如何`postData`在使用 struts2-jquery-jqgrid 插件的情况下指定，您仍然必须能够在 HTML 页面上包含一些 JavaScript 文件。如果你包括

```
$.extend(true, $.jgrid.defaults, {
    postData: {
        searchField: function () {
            return $("#searchField").val();
        },
        searchValue: function () {
            return $("#searchString").val();
        }
    }
}); 
```

您将能够将jqGrid 参数的默认值重新定义为我上面建议的值`{}`。`postData`上面的代码应该在创建 jaGrid*之前执行，这一点很重要。*如果您只能*在*创建网格后执行 JavaScript 代码，您可以执行以下代码

```
$.extend(true, $("#gridtable").jqGrid("getGridParam", "postData"),
    {
        searchField: function () {
            return $("#searchField").val();
        },
        searchValue: function () {
            return $("#searchString").val();
        }
    }
}); 
```***

# google-chrome - 如何在chrome中逐行调试jquery代码

> ID：15132874
> 
> 赞同：1
> 
> 时间：2013-02-28T10:15:56.397
> 
> 标签：google-chrome

```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
    debugger
        $("a").click(function () {
            alert("Hello World..");
        });
    });
</script> 
```

我对这个 jquery 很陌生。我想在 chrome 中查看我的程序执行流程。调试 jquery 的程序是什么。我的执行流程没有进入 .click 。但是正在显示警报消息![在此处输入图像描述](../Images/0e36eaa4e56b5c79a53a5c3457ca60a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:19:18.310

您可以为 chrome 安装 firebug lite，并且可以通过在使用的 jquery 文件中添加断点和监视来进行调试。我希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:19:45.240

一种方法是在开发人员工具的源选项卡中找到您的代码，并在您要停止的每一行代码旁边添加一个断点，然后刷新页面。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T10:28:39.767

如果你想在 chrome 中执行 JS，你必须这样做我附上一张图片，请找到它

转到控制台并输入您的 JS 并输入！

# java - android中日期的小时和分钟

> ID：15132878
> 
> 赞同：3
> 
> 时间：2013-02-28T10:16:00.403
> 
> 标签：java, android, android-date

我有 java util date 作为`Thu Feb 28 15:35:00 GMT+00:00 2013`

如何将其转换为`HH:MM`.

我正在尝试通过以下代码段执行此操作：

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:MM");
        formatter.setTimeZone(TimeZone.getTimeZone("GMT"));
        return formatter.format(objDate); 
```

它给出了正确的结果，`dd mmm`但总是给出分钟为 02`HH:MM`

请建议我这个功能有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T10:17:10.163

`MM`是 中的*月份*值`SimpleDateFormat`。你想要`mm`。请注意，使用`HH`将为您提供 24 小时制 (00-23)...您可以使用`hh`12 小时制 (01-12)，但在这种情况下您可能还需要 am/pm 指示符。

有关可用的各种格式说明符的更多详细信息，请参阅[文档。`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

另请注意，出于国际化目的，您可能会更好：

```
DateFormat formatter = DateFormat.getTimeInstance(DateFormat.SHORT, locale); 
```

...以便它将为给定的语言环境使用适当的“短时间格式”。如果这是为了显示（人类可读）的目的，那是合适的；对于计算机可读格式，创建自定义格式很好，但我建议明确使用`Locale.US`以避免获取不同的日历和格式符号（例如时间分隔符）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:17:06.490

采用

```
String str ="Thu Feb 28 15:35:00 GMT+00:00 2013";

SimpleDateFormat formatter_from = new SimpleDateFormat("EEE MMM dd hh:mm:ss ZZ yyyy");
SimpleDateFormat formatter_to = new SimpleDateFormat("hh:mm");

try {
    java.util.Date d = formatter_from.parse(str);

    System.out.println(formatter_to.format(d));

} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# exchange-server - [E2007][EWSMA] 识别/获取 NDR 的原因/原因

> ID：15132882
> 
> 赞同：2
> 
> 时间：2013-02-28T10:16:09.767
> 
> 标签：exchange-server, exchangewebservices

我需要解析 NDR 并确定其原因（电子邮件未送达的原因）。如果是由于无效的电子邮件或无效的域或邮箱已满或其他原因。

有没有办法做到这一点而不必解析不是最完整的证明方式的电子邮件正文...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T19:43:13.373

不幸的是，您必须解析消息正文以获取指示无法传递电子邮件的原因的状态代码。有关传递状态、NDR 和状态代码的更多详细信息，请参阅此[链接](http://technet.microsoft.com/en-us/library/bb232118%28v=exchg.150%29.aspx)。

# ios - 即使在调用释放方法后我也能够访问对象变量 ios

> ID：15132890
> 
> 赞同：0
> 
> 时间：2013-02-28T10:16:40.943
> 
> 标签：ios, objective-c

```
 Profile *myProfile= [[Profile alloc]init];

[myProfile setName:@"Jhon Applesead"];
[myProfile setCompany:@"Apple"];

[myProfile release];

NSLog(@"Name is %@", [myProfile name]); 
```

日志是

2013-02-28 15:41:36.866 练习[8124:303] 名字是 Jhon Applesead

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:29:44.797

当您在对象上发送`release`消息时，该对象实际上**并没有从内存中删除**。释放消息只是**将引用计数减一**。如果引用计数为零，则该对象被标记为空闲。然后系统将其从内存中删除。在此释放发生之前，您可以访问您的对象。即使您`release`是对象，您的对象**指针仍然指向该对象**，除非您分配`nil`给该指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:28:12.710

我想那是因为你没有释放`name`并且在`company`里面`dealloc``Profile`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:29:59.050

**释放**不一定会破坏对象。它只是将保留计数减一。如果该保留计数变为零，则只有该对象才会被**释放**。因此，此代码有效，因为发生了释放但没有触发**dealloc**。

有关更多详细信息，请参阅 Apple 的[内存管理指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。

# internet-explorer - 在 HTTP 基本身份验证中使用 cookie 的正确方法

> ID：15132892
> 
> 赞同：2
> 
> 时间：2013-02-28T10:16:42.660
> 
> 标签：internet-explorer, http, asp.net-web-api

我正在尝试对我的 IIS 托管的 WebAPI 服务实施基本的 HTTP 身份验证。我试图使用 cookie 在服务器和客户端之间发送用户相关数据。当客户端是 Firefox 时，此代码似乎可以工作，但如果我使用 IE 或 Chrome，则 cookie 永远不会发送回服务器。

我有以下。

我将cookie添加到这样的响应消息中......在HttpModule.AuthenticateRequest-event handler中......

```
HttpApplication app = sender as HttpApplication;

HttpResponse response = app.Context.Response;
HttpRequest request = app.Context.Request;

HttpCookie c = new HttpCookie("MyCookie", "Hellou!");
c.Expires = DateTime.Now.AddDays(1);
c.Domain = request.Url.Host;
c.Path = "/";

response.Cookies.Add(c); 
```

...或在控制器 POST 操作中：

```
CookieHeaderValue chv = new CookieHeaderValue("MyCookie", "Hellou");
chv.Expires = DateTime.Now.AddDays(1);
chv.Domain = Request.RequestUri.Host;
chv.Path = "/";

rmsg.Headers.AddCookies(new CookieHeaderValue[] { chv }); 
```

我在 HttpModule.AuthenticateRequest-event 处理程序中读取这样的 cookie

```
HttpApplication app = sender as HttpApplication;
HttpRequest request = app.Context.Request;

if (request.Cookies.Count > 0)
{
    HttpCookie c = request.Cookies.Get("MyCookie");
    if (c != null)
    {
        // ...
    }
} 
```

cookie 代码是否正确？有没有办法确保 cookie 在所有客户端都有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:22:13.943

基本身份验证的整个想法是用户的用户名和密码由客户端在 Authorization 标头中的每个请求上发送。设计 API 时不需要任何 cookie。

如果您不想使用基本身份验证（因为需要在每个请求上发送用户名和密码），您可以使用令牌保护您的 API。看[`following article`](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)一个例子。

# excel - Excel VBA 检查 InStr 函数中的值

> ID：15132893
> 
> 赞同：2
> 
> 时间：2013-02-28T10:16:46.107
> 
> 标签：excel, vba

**我的情况**

我编写此代码的主要原因是检查 IP 地址是内部连接还是外部连接。

我的数据表中的一个单元格不仅包含 IP 地址值，还可以包含其他类型的文本。铁：

“BE-ABCDDD-DDS 172.16.23.3”

**我的问题**

我想检查一个单元格是否在“172.31”之间包含一个 IP 地址“172.16”。在上面的示例中，它将返回一个值 true/Intern。如果单元格包含值“172.32”将返回 false/extern。

**这是我的代码：**

```
For Each source In Range("E6", Range("E" & Rows.Count).End(xlUp))      
    If (InStr(source, "-10.") <> 0 Or InStr(source, "-192.168.") <> 0 Or InStr(source, "-  172.") <> 0) And InStr(source.Offset(0, 22).Value, "Extern") = 0 Then
source.Offset(0, 22) = "Intern"
    End If
Next source 
```

正如您在我的代码中看到的，它只检查“172”。在这一刻。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:36:13.773

我强烈建议为此使用正则表达式。如果您使用 VBA，您可以在 VBA 项目中引用 Microsoft VBScript 正则表达式库。

一旦引用了它，就可以使用正则表达式在字符串中搜索给定的匹配模式。这是“可能有效的 IP 字符串”的示例 VBScript 正则表达式友好表达式：\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}

这将匹配具有 4 个 1-3 位数字序列的字符串，其中包含句点，例如 127.0.0.1，但也可能是 955.556.234.234。所以一旦你有一个匹配的字符串，我会在你认为 IP '有效'之前验证代码中的 ip 组件。一旦你有一个有效的 IP，它应该很容易检查你的状况。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:00:39.917

您可以/应该将该测试分解为它自己的功能。这是一个仅解析字符串的示例。

```
Sub Main()

    Dim rCell As Range

    For Each rCell In Sheet1.Range("A1:A5").Cells
        If IsInternal(rCell.Value) Then
            Debug.Print rCell.Address, rCell.Value
        End If
    Next rCell

End Sub

Public Function IsInternal(sIpAdd As String) As Boolean

    Dim bReturn As Boolean
    Dim lIpStart As Long
    Dim lSecQuad As Long

    Const sIPSTART As String = "172."
    Const lMIN As Long = 16
    Const lMAX As Long = 31

    'Default to false unless we explictly set it to true
    bReturn = False

    'See if 172\. exists in the string
    lIpStart = InStr(1, sIpAdd, sIPSTART)

    'If 172\. exists
    If lIpStart > 0 Then
        'Parse out the second quadrant
        lSecQuad = Val(Mid(sIpAdd, lIpStart + Len(sIPSTART), 2))

        'See if the second quadrant is in range
        'and set to true if so
        bReturn = lSecQuad >= lMIN And lSecQuad <= lMAX
    End If

    IsInternal = bReturn

End Function 
```

# ruby-on-rails - 无法在 .html.erb 文件中处理带有 \n 的字符串？

> ID：15132894
> 
> 赞同：0
> 
> 时间：2013-02-28T10:16:50.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我有一个通常是这样的字符串

```
@error = "Error - No data \n Error - Incorrect id \n Error - Msg not relayed \n"; 
```

在我的**show.html.erb**文件中：

我有类似'<%= @error %>`

但是当打印在屏幕上时，它是单行的，而不是 3 个单独的行？

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:20:41.883

你可以做：

```
@error = "Error - No data <br/> Error - Incorrect id <br/> Error - Msg not relayed <br/>" 
```

在您看来：

```
<%= @error.html_safe %> 
```

# asp.net - 每次回发时呈现的 Asp.NET 菜单图标

> ID：15132896
> 
> 赞同：0
> 
> 时间：2013-02-28T10:17:01.840
> 
> 标签：asp.net, menu, master-pages

我有一个包含菜单栏的母版页。此菜单链接到具有数十个选项的站点地图。我所做的是为每个菜单项呈现图标。

```
 protected void NavigationMenu_MenuItemDataBound(object sender, MenuEventArgs e)
    {
     SiteMapNode node = e.Item.DataItem as SiteMapNode;

     if (!string.IsNullOrEmpty(node["imageUrl"]))
       e.Item.ImageUrl = node["imageUrl"];    
    } 
```

我知道在每次回帖时，此事件都会触发。有没有一种方法可以让我只加载一次而不必再次加载它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:36:07.027

处理程序在每个数据绑定事件上执行。此事件通常不会在每个回帖上执行，因为一旦在跟踪 ViewState 后设置了图像 url，它就会进入控件的 ViewState。

这意味着如果控件（菜单）的 DataBind() 没有被显式调用，则不会触发此事件。

这至少是其他数据绑定控件所做的。例如，网格不会在每次回发时重新绑定自身，除非分页/排序等 -> 需要重新构建状态的操作。

# ipython-notebook - Ipython：在笔记本中调试代码

> ID：15132898
> 
> 赞同：18
> 
> 时间：2013-02-28T10:17:10.083
> 
> 标签：ipython-notebook

我在亚马逊 EWS EC2 上免费安装了 epd 7.3.2，并将 ipython notebook 作为公共笔记本服务器。

我以这种方式运行服务器：

```
nohup ipython notebook --profile=nbserver % 
```

一切正常，我可以在 https 和代码上使用密码登录。

现在我想使用 pdb/ipdb 来**调试笔记本中的 python 函数**，但是在互联网上我找不到如何设置调试器的过程。

有人能帮我吗 ？

问候

马西莫

这些是已安装的软件包：

```
root@domU-xx-xx-xx-xx-xx-xx:/opt/epdFree7.3.2/bin# ./pip freeze
EPD==7.3
Examples==7.3
Jinja2==2.6
MKL==10.3
PIL==1.1.7
Pygments==1.4
PythonDoc==2.7.3
appinst==2.1.2
apptools==4.1.0
casuarius==1.0
chaco==4.2.0
cloud==2.4.6
configobj==4.7.2
distribute==0.6.26
enable==4.2.0
enaml==0.2.0
enstaller==4.5.6
etsproxy==0.1.1
freetype==2.4.4
idle==2.7.3
ipdb==0.7
ipython==0.13.1
kernmagic==0.1.0
matplotlib==1.1.0
nose==1.1.2
numpy==1.6.1
ply==3.4
pyaudio==0.2.4
pyface==4.2.0
pyglet==1.1.4
python-dateutil==1.5
pytz==2011n
pyzmq==2.1.11
scipy==0.10.1
tornado==2.2
traits==4.2.0
traitsui==4.2.0
wsgiref==0.1.2
wxPython==2.8.10.1 
```

* * *

```
root@domU-xx-xx-xx-xx-xx-xx:/opt/epdFree7.3.2/bin# ./enpkg -l
prefix: /opt/epdFree7.3.2
Name                 Version              Store
============================================================
appinst              2.1.2-1              -
apptools             4.1.0-1              -
casuarius            1.0-1                -
chaco                4.2.0-1              -
cloud                2.4.6-1              -
configobj            4.7.2-2              -
distribute           0.6.26-1             -
enable               4.2.0-1              -
enaml                0.2.0-1              -
enstaller            4.5.6-1              api rh5-64
EPD                  7.3-0                -
etsproxy             0.1.1-1              -
Examples             7.3-0                -
freetype             2.4.4-1              -
idle                 2.7.3-1              -
ipython              0.13.1-2             api rh5-64
Jinja2               2.6-2                -
kernmagic            0.1.0-1              -
matplotlib           1.1.0-1              -
MKL                  10.3-1               api rh5-64
nose                 1.1.2-1              -
numpy                1.6.1-3              api rh5-64
PIL                  1.1.7-3              -
ply                  3.4-1                -
pyaudio              0.2.4-1              -
pyface               4.2.0-1              -
pyglet               1.1.4-2              -
Pygments             1.4-1                -
python_dateutil      1.5-2                -
PythonDoc            2.7.3-1              -
pytz                 2011n-1              -
pyzmq                2.1.11-1             -
scipy                0.10.1-0             -
tornado              2.2-1                -
traits               4.2.0-1              -
traitsui             4.2.0-1              - 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-06T00:02:41.960

只是扩展@Ken Arnold 的观点，这样人们就不必阅读所有答案来弄清楚这一点。从 1.0 版开始，在 ipython 笔记本中调试**确实有效。**

只需启动单元格，`%debug`然后您就可以使用 ipdb 的典型控件（`(n)ext`、`step`等）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-27T23:40:28.407

不幸的是，调试器尚未集成到笔记本中，但您可以使用另一个前端连接到内核并在那里运行调试器。如果您设置了 X 转发，最简单的方法是运行`%qtconsole`（请参阅[http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#workflow-and-limitations](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#workflow-and-limitations)）。您也可以运行`%connect_info`，然后使用它提供的信息来运行`ipython console`（即普通终端模式之一）连接到同一个内核。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T11:15:39.760

这不可能！

我找到了这个：

“非常重要的是，这意味着 %debug 魔法在 notebook 中不起作用！我们打算纠正这个限制，但与此同时，有一种方法可以在 notebook 中调试问题：你可以将 Qt 控制台附加到现有的笔记本内核，并从 Qt 控制台运行 %debug。”

在[Ipython 文档上](http://ipython.org/ipython-doc/stable/interactive/htmlnotebook.html)

现在的重点是：

*   远程 ipython 笔记本 --profile=nbserver 正在美国 EWS EC2 上运行
*   本地 ipython qtconsole 正在我的电脑上运行

远程 EWS EC2 上的 JSON 连接文件是：

```
{
  "stdin_port": 55986,
  "ip": "127.0.0.1",
  "hb_port": 55385,
  "key": "984e86e7-4d88-4d74-8912-cbe46bc316c0",
  "shell_port": 49024,
  "iopub_port": 33440
} 
```

# python - Python子进程找不到程序

> ID：15132901
> 
> 赞同：1
> 
> 时间：2013-02-28T10:17:18.033
> 
> 标签：python, subprocess

我正在尝试从 python 脚本调用 java 应用程序。安装 Java 时，将`java.exe`程序添加到`c:\windows\system32`文件夹中，该文件夹包含在`PATH`环境变量中。

跑步

```
import subprocess
import os
subprocess.call("java") //or "c:/windows/system32/java.exe" 
```

结果是

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Program Files (x86)\Quantum GIS Lisboa\apps\Python27\Lib\subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "c:\Program Files (x86)\Quantum GIS Lisboa\apps\Python27\Lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "c:\Program Files (x86)\Quantum GIS Lisboa\apps\Python27\Lib\subprocess.py", line 893, in _execute_child
    startupinfo)
WindowsError: [Error 2] Het systeem kan het opgegeven bestand niet vinden 
```

进一步调查后，我尝试`cmd`使用相同的方式运行控制台 ()。`dir c:\windows\system32`在那个控制台做的时候，`java.exe`是没有列出来的！事实上，与从“普通”控制台运行相同命令相比，没有列出一大堆文件。

我不知道是什么原因造成的，因为完全相同的工作流程确实可以在另一台计算机上运行。我知道我可以通过直接调用java安装而不是system32文件夹中的可执行文件来绕过这个问题，但我想找到这个问题的根源。

此问题出现在 Quantum Gis 插件中。Quantum Gis 使用包含的 python 安装，所以我没有自己安装 python。列出的 python 版本是“Win32 上的“2.7.2（默认，2011 年 6 月 12 日，15:08:59）[MSC v.1500 32 位（英特尔）]”。我正在运行 Windows 7 专业版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:18:47.640

不，`subprocess.call("java")`永远**不会**导致`NameError`被抛出。

您正在运行它而不使用引号：

```
>>> import subprocess
>>> subprocess.call(java)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'java' is not defined 
```

一个`NameError`例外是 Python 告诉您全局名称`java`未*在您的代码*`java`中定义，而不是在您的机器上未找到该命令。

# php - 使用 codeigniter 在 if 条件下检查查询字符串

> ID：15132903
> 
> 赞同：0
> 
> 时间：2013-02-28T10:17:20.513
> 
> 标签：php, codeigniter, query-string

嘿，我想在 if 条件下检查查询字符串的类型，这样做的正确方法是什么，请帮忙。. 我的网址是这样的。.

```
http://localhost/kccs/index.php/dbcont/addnew?type=moderator
http://localhost/kccs/index.php/dbcont/addnew?type=member 
```

我想检查

```
if(query string type==moderator)
{
   //some stuff
}
if(query string type==member)
{
  //some stuff
} 
```

我只想启用查询字符串两页我在另一个链接上找到了这个

```
parse_str($_SERVER['QUERY_STRING'],$_GET); 
```

但我不知道如何使用它.. 我怎么能这样做。. 任何想法请帮助我。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:21:32.160

您应该检查[GET](http://www.w3schools.com/php/php_get.asp)变量。使用 if 的代码示例：

```
if ($_GET['type'] == 'moderator') {
  //do something
} elseif ($_GET['type'] == 'member') {
  //do something else
} 
```

或者，您可以使用[switch()](http://php.net/manual/en/control-structures.switch.php)：

```
switch($_GET['type']) {
  case 'moderator':
    //do something
    break;
  case 'member':
    //do something else
    break;
  default: //else
    //you're a guest
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:16:37.983

试试这个：

```
$this->input->get('some_variable', TRUE); 
```

[查看更多信息](http://ellislab.com/codeigniter/user-guide/libraries/input.html)

# drupal - 如何在drupal 7中为所有类型的用户设置子模块访问权限？

> ID：15132905
> 
> 赞同：0
> 
> 时间：2013-02-28T10:17:25.230
> 
> 标签：drupal, drupal-7

我的用户访问权限复选框不适用于管理员、经过身份验证的匿名用户。我创建了子模块并使用了 hook_permission，它还在管理员上显示复选框，但在选中和未选中时都不起作用。请给我解决方案？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:44:18.997

您可能因为没有代码示例而被否决。确实很难回答你的问题，但它很简单，所以我会试一试。

如果您在权限页面上看到复选框，那么我知道您的 hook_permission() 很可能已正确声明。

你没有提到你是如何检查权限的，所以我将通过两种方法：

1) 如果您使用的是 hook_menu()，请查看该`access_arguments`行。这就是您为整个页面设置权限的方式。

```
function mymodule_menu() {
  $items['abc/def'] = array(
    'page callback' => 'mymodule_abc_view',
    'access arguments' => array('administer my module')
  );
  return $items;
} 
```

2）如果您想在一段代码中检查权限，作为条件，您可以这样使用它。

```
if (user_access('administer my module')) {
  // show administrator stuff here
} 
```

# php - 如何添加指示以区分 apache 服务器的每个页面的生产版本和开发版本？

> ID：15132906
> 
> 赞同：0
> 
> 时间：2013-02-28T10:17:26.037
> 
> 标签：php, apache, http, apache2, webserver

当打开网页的生产版本或开发版本时，我通常会感到困惑。例如，当我编辑开发代码时，我被愚弄了，对生产版本中的任何更改感到惊讶。希望我不是唯一遇到这种问题的人。

我的想法是为开发 apache 服务器上运行的所有页面添加一个可见的标识符。它可以是不同的背景颜色或类似信息框的东西。我考虑更改图标，这将是最简单的解决方案，但立即引起您注意的东西会更好。

我想出了检查`$_SERVER['SERVER_ADDR']`每一页的想法。但我不希望服务器为每个请求都处理这个检查！那么，有什么想法可以通过 apache 服务器添加提到的标识符吗？

PS标题可能需要改写！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:47:04.763

> 我想出了在每一页上检查 $_SERVER['SERVER_ADDR'] 的想法。但我不希望服务器为每个请求都处理这个检查！

字符串比较几乎没有影响。您必须有一些应用程序入口点（一个`include('init.php')`或多个，或者在使用时重写您`index.php`的示例）。

在那里你可以简单地做这样的事情：

```
if ($_SERVER['SERVER_ADDR'] == 'development') {
    $template['headerColor'] = 'green';
} else {
    $template['headerColor'] = 'red';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:30:19.413

你可以这样做一次。通常我会在我使用的每个页面（文件）中包含一些辅助功能（实际上`require_once`是在开头）。您可以通过设置一个变量（或定义一个常量）来执行此操作，并在输出 HTML`BODY`标记时通过更改 STYLE='background-color: ...' 或类似的东西来检查它。

我认为 $_SERVER 的这个检查不像 PHP 中的任何其他语句那样需要更多的处理工作。

# c# - 使用 XML 文件作为输入参数调用函数

> ID：15132909
> 
> 赞同：0
> 
> 时间：2013-02-28T10:17:33.017
> 
> 标签：c#, xml

我创建了一个 WCF 服务，我在其中创建了以下方法

```
public List<AddTravelDetails> ReadXML(XmlDocument xDoc) 
```

现在我想使用该服务。谁能帮我？如何`XmlDocument`作为`ReadXML`函数的输入参数传递？

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:46:58.040

```
XmlDocument doc = new XmlDocument();
doc.Load(pathToYourFile); 
```

其中 pathToYourFile 是例如：`@"D:\yourfile.xml"`

# jmeter - 使用 Jmeter 在两台不同的服务器上（同时或一个接一个）发送相似的负载（完全相同的请求）

> ID：15132913
> 
> 赞同：2
> 
> 时间：2013-02-28T10:17:51.923
> 
> 标签：jmeter, load-testing

任何想法如何去做。我不想运行两个不同的 Jmeter 实例。我想分析修复前后的系统性能。

因此，从概念的角度来看，有两种选择：

*   记录请求并重放它们（并将它们发送到前后系统）；
*   多路复用请求（并将它们发送到两个环境）。

有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T17:30:22.813

JMeter 中的[线程组](http://jmeter.apache.org/usermanual/test_plan.html#thread_group)元素旨在在同一个测试计划中运行多个操作。

一旦建立了要在第一台服务器上执行的基本测试，右键单击并在 JMeter GUI 中“复制”该线程组。为第二个服务器编辑新创建的组的采样器。

如果测试计划设置没有选中“连续运行线程组”框，这些线程组将同时针对 2 个不同的目标执行。

如果您希望您的听众报告两个线程组的活动，请确保它们是测试计划的“孩子”而不是线程组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:03:15.697

运行 2 次测试对我来说似乎更简单，否则你将如何区分新旧采样器？除非你调整计划所以更多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T11:27:02.097

找到了解决方案：

使用jmeter的-J属性-

如下所示：

> 声明 -a arr=("web01.example.com" "web02.example.com" "web03.example.com")
> 
> 对于“${arr[@]}”中的我
> 
> 做
> 
> jmeter -n -t PostRequest.jmx -JWEB_SERVER=$i

利用

> ${__P(WEB_SERVER)}

在

stringProp name="HTTPSampler.domain">${__P(WEB_SERVER)} <-代替你的服务器。

# parallel-processing - 在 ArrayFire 中使用带有 double2 数组的 seq 时降级为 float2

> ID：15132914
> 
> 赞同：1
> 
> 时间：2013-02-28T10:17:54.460
> 
> 标签：parallel-processing, arrayfire

我正在使用以下利用 ArrayFire 库的测试代码。

```
void test_seq(const array& input, array& output, const int N)
{
    array test      = seq(0,N-1);                                         
    output          = input;
}

(for the moment `array test` has no role)

double2* test_CPU; test_CPU=(double2*)malloc(10*sizeof(double2));       
for (int k=0; k<10; k++) { test_CPU[k].x=2.; test_CPU[k].y=1.; }
array test_GPU(10, test_CPU);
array test_GPU_output = constant(0.,10, c64);
test_seq(test_GPU,test_GPU_output,10);
print(test_GPU_output);
try {
    double2 *CPU_test = test_GPU_output.host<double2>();
    printf("%f %f\n",CPU_test[0].x,CPU_test[0].y);
} catch (af::exception& e) {
fprintf(stderr, "%s\n", e.what()); 
} 
```

一切都编译并正确运行。

但是，然后我将上述功能更改为

```
void test_seq(const array& input, array& output, const int N)
{
    array test      = seq(0,N-1);                                         
    output          = input * test;
} 
```

我收到以下运行时错误消息

**src/gena/gtypes.cpp:112：错误：从 cuComplex 类型的数组请求 cuDoubleComplex**

如果，在另一边，我改变线

```
double2 *CPU_test = test_GPU_output.host<double2>(); 
```

至

```
float2 *CPU_test = test_GPU_output.host<float2>(); 
```

一切都再次运行良好。似乎与使用`seq`. `seq(0,N-1,f64)`如果我使用类似的东西（我什至不知道 ArrayFire 是否允许），上述问题不会消失。

我怎样才能继续`double2`处理并避免降级`float2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:40:20.833

将 seq 转换为数组时，它存储为单精度（浮点）。

目前在arrayfire中，涉及两个不同精度数组的操作的规则是选择较低的精度。这就是`input * test`从双精度转换为单精度（因此`float2`）的原因。

现在的解决方案是在 test 的生成下面添加一行。

```
test = test.as(f64); 
```

它将增加非常少的开销，因为只有在必要时才会生成数组。

# opengl - 如何使用 OpenGL 获得最大常量缓冲区大小？

> ID：15132916
> 
> 赞同：1
> 
> 时间：2013-02-28T10:17:56.770
> 
> 标签：opengl

在我的应用程序中，我想获得最大常量缓冲区大小。有了DX，就有一个宏`D3D10_REQ_CONSTANT_BUFFER_ELEMENT_COUNT`代表这个值。

我怎样才能得到这个值`OpenGL`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:40:52.217

OpenGL 没有这样的限制。

[缓冲区对象](http://www.opengl.org/wiki/Buffer_Object)可以是任意大小。但是，缓冲区对象的不同*用途*有不同的大小限制。[顶点数组数据](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)的来源本质上是无界的。但是[缓冲区纹理](http://www.opengl.org/wiki/Buffer_Texture#Limitations)有大小限制。[统一缓冲区数据的绑定范围](http://www.opengl.org/wiki/Uniform_Buffer_Object#Limitations)的大小是有限制的。并且根据需要，[各种其他用途](http://www.opengl.org/wiki/Buffer_Object#General_use)都有限制。但是内存缓冲区*本身*的大小没有限制。

基本上，将缓冲区对象视为指向 GPU 内存的指针，使用`glBufferData`as `malloc`。使用指针的不同 API 可以限制它们可以访问多少内存。但`malloc` *它本身*并没有任何特别的限制（当然，除了内存不足）。

# c# - 在 C# 中处理事件列表

> ID：15132917
> 
> 赞同：2
> 
> 时间：2013-02-28T10:17:57.777
> 
> 标签：c#, event-log, state-machine

我正在用 C# 实现状态机，但遇到了问题。我有一个事件日志，包含事件和时间戳。在处理这个时，我得到以下格式的输出：转换的时间戳，状态转换到，状态时间

我在这里遇到的问题是，在我运行事件日志并找到有效的转换之前，我还不知道状态时间。在我的实现中，我使用一些函数来处理事件的触发，并返回一个元组，其中包含一个带有一些数据（转换时间和新状态）的字符串，但是因为我不知道这个状态的时间是多少我还不能正确地写它。在处理完一个事件集（启动此事件的多种方法、步进函数、运行到断点函数）之后，元组中的字符串被写入一个列表，当整个事件日志被处理时，该列表被写入一个文件。

不要过多地看元组的扩展使用，这是因为我正在测试一些东西，那部分仍然可以优化，我只是在寻找一些好主意来解决我在状态部分的时间问题。

触发一个事件的函数：

```
/// <summary>
/// Trigger an event in the event log on the state machine
/// </summary>
/// <param name="ev">Event to be triggered</param>
/// <param name="oldDate">Initial date</param>
/// <param name="oldMs">Initial milliseconds</param>
/// <returns>Tuple containing output string for event log, new date and new milliseconds belonging to the date</returns>
public Tuple<Tuple<string, string, string>, DateTime, int> TriggerEvent(Event ev, DateTime oldDate, int oldMs)
{
    string outputString;
    int newMs = oldMs;
    DateTime newDate = oldDate;
    Tuple<string, string, string> outPut;
    if (this.Fire(ev.Trigger))
    {
        int outputMs = ev.Milliseconds - oldMs;
        TimeSpan outputTs = ev.Timestamp - oldDate;
        if (outputMs < 0)
        {
            outputMs = Math.Abs(outputMs);
            outputTs = outputTs.Add(TimeSpan.FromSeconds(-1));
        }
        string firstPart = ev.Timestamp + "." + ev.Milliseconds.ToString();
        string secondPart = this.fsm.State;
        string thirdPart = outputTs + "." + outputMs.ToString().PadRight(6, '0');
        outputString = firstPart + "," + secondPart;// +"," + thirdPart;
        newDate = ev.Timestamp;
        newMs = ev.Milliseconds;
        this.activeState = this.GetStateByTag(this.fsm.State);
        outPut = new Tuple<string, string, string>(firstPart, secondPart, thirdPart);
    }
    else
    {
        outputString = string.Empty;
        outPut = new Tuple<string, string, string>(string.Empty, string.Empty, string.Empty);
    }

    this.lastEvent = ev;

    return new Tuple<Tuple<string, string, string>, DateTime, int>(outPut, newDate, newMs);
} 
```

处理事件列表的函数：

```
/// <summary>
/// Process an event log
/// </summary>
/// <param name="list">Event list to process</param>
/// <returns>List containing the output for storage</returns>
public Tuple<List<string>, Event> ProcessEventSet(List<Event> list)
{
    List<string> tmpObj = new List<string>();
    Tuple<string, string, string> outPut;

    if (this.initialDate == DateTime.MinValue)
    {
        this.initialDate = list.First().Timestamp;
        this.initialMs = list.First().Milliseconds;
    }

    foreach (Event ev in list)
    {
        Tuple<Tuple<string, string, string>, DateTime, int> newData = this.TriggerEvent(ev, this.initialDate, this.initialMs);
        outPut = newData.Item1;

        if (!string.IsNullOrEmpty(newData.Item1.Item1))
        {
            string output;
            if (outPut.Item3 == "00:00:00.000000")
            {
                output = outPut.Item1 + "," + outPut.Item2;
            }
            else
            {
                output = outPut.Item1 + "," + outPut.Item2 + "," + outPut.Item3;
            }

            tmpObj.Add(output);
            this.initialDate = newData.Item2;
            this.initialMs = newData.Item3;
        }
    }
    return new Tuple<List<string>, Event>(tmpObj, list.Last());
} 
```

我得到的输出：

```
7-1-2013 0:00:06.193133,State B,00:00:00.000000
7-1-2013 0:00:06.227664,State C,00:00:00.345310
7-1-2013 0:00:07.391359,State D,00:00:01.163695
7-1-2013 0:06:22.693034,State A,00:06:15.301675
7-1-2013 1:10:43.770820,State B,01:04:21.777860
7-1-2013 1:10:43.808832,State A,00:00:00.380120
7-1-2013 4:59:16.704133,State B,03:48:32.104699
7-1-2013 4:59:16.742639,State C,00:00:00.385060
7-1-2013 5:01:57.975030,State A,00:02:41.232391
7-1-2013 6:50:03.577993,State B,01:48:05.397037
7-1-2013 6:50:03.613139,State C,00:00:00.351460
7-1-2013 6:50:03.680799,State D,00:00:00.676600
7-1-2013 6:51:10.399170,State A,00:01:06.281629
7-1-2013 8:51:02.344653,State B,01:59:51.545170
7-1-2013 8:51:02.383053,State A,00:00:00.384000
7-1-2013 10:11:46.822542,State B,01:20:44.439489
7-1-2013 10:11:46.871144,State A,00:00:00.486020
7-1-2013 10:22:29.117037,State B,00:10:42.754107
7-1-2013 10:22:29.153400,State A,00:00:00.363630
7-1-2013 10:39:08.495431,State B,00:16:39.342031
7-1-2013 10:39:08.537063,State A,00:00:00.416320
7-1-2013 11:29:54.932916,State B,00:50:46.395853
7-1-2013 11:29:54.971428,State A,00:00:00.385120 
```

我想要的输出：

```
7-1-2013 0:00:06.193133,State B,00:00:00.345310
7-1-2013 0:00:06.227664,State C,00:00:01.163695
7-1-2013 0:00:07.391359,State D,00:06:15.301675
7-1-2013 0:06:22.693034,State A,01:04:21.777860
7-1-2013 1:10:43.770820,State B,00:00:00.380120
7-1-2013 1:10:43.808832,State A,03:48:32.104699
7-1-2013 4:59:16.704133,State B,00:00:00.385060
7-1-2013 4:59:16.742639,State C,00:02:41.232391
7-1-2013 5:01:57.975030,State A,01:48:05.397037
7-1-2013 6:50:03.577993,State B,00:00:00.351460
7-1-2013 6:50:03.613139,State C,00:00:00.676600
7-1-2013 6:50:03.680799,State D,00:01:06.281629
7-1-2013 6:51:10.399170,State A,01:59:51.545170
7-1-2013 8:51:02.344653,State B,00:00:00.384000
7-1-2013 8:51:02.383053,State A,01:20:44.439489
7-1-2013 10:11:46.822542,State B,00:00:00.486020
7-1-2013 10:11:46.871144,State A,00:10:42.754107
7-1-2013 10:22:29.117037,State B,00:00:00.363630
7-1-2013 10:22:29.153400,State A,00:16:39.342031
7-1-2013 10:39:08.495431,State B,00:00:00.416320
7-1-2013 10:39:08.537063,State A,00:50:46.395853
7-1-2013 11:29:54.932916,State B,00:00:00.385120
7-1-2013 11:29:54.971428,State A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:38:08.500

我通过对输出进行后处理而不是每次迭代都解决了这个问题。在每次迭代中执行此操作的逻辑似乎很难实现。

# android - 通过 Android 摄像头检测人脚

> ID：15132920
> 
> 赞同：-4
> 
> 时间：2013-02-28T10:18:02.467
> 
> 标签：android, android-camera, detection, face-detection

我们可以在 Android 中检测人脸特征。但我也想检测手和腿。

我们如何检测这些？是否有任何其他类或逻辑可以用来检测这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:43:54.153

没有像面部检测那样允许您检测人的脚或手的 Android 类。您必须编写自己的检测方案。

# node.js - node.js socket.io 捕获到不可用房间的连接

> ID：15132921
> 
> 赞同：0
> 
> 时间：2013-02-28T10:18:02.947
> 
> 标签：node.js, socket.io

我可以创建一些侦听器来捕获不存在的房间上的连接吗？

在不可用房间发送的请求会发生什么？这是 d/dos 的一种方式吗？

# php - 如何在mysql中根据语义进行搜索

> ID：15132924
> 
> 赞同：3
> 
> 时间：2013-02-28T10:18:12.033
> 
> 标签：php, database-design, search-engine, semantics

我正在用 PHP 开发一个需要搜索东西的应用程序。但是我想根据含义搜索事物，因为有人搜索词 home 我想包含包含“house”作为关键字的事物。任何方式或任何库来实现这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:24:42.280

对于复杂的搜索，您可能需要查看搜索服务器，例如[Apache Solr](http://lucene.apache.org/solr/)。

# iphone - 如何在 tableView 控制器中更改 tableView 的大小

> ID：15132934
> 
> 赞同：3
> 
> 时间：2013-02-28T10:18:38.350
> 
> 标签：iphone, xcode, ipad, uitableview

我创建了一个拆分视图控制器，我想减小表视图的大小，但它内置在 tableView 控制器中，所以有什么方法可以从代码中更改表的大小，这意味着我只有 4 行并且它得到了所有方面在 splitViewController 我想减小 tableViewController 的大小。在 My Root 控制器中，它是 tableViewController，因此可以通过任何方式解决此问题。

我还附上了表格图像下方的图像，因为它只有三个记录，所以我希望它必须只显示三行，它也显示空行。

![在此处输入图像描述](../Images/f49dff097a89629326f55c8fa6707fb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:20:29.283

你可以在 UITableView 的这个委托方法中设置每一行的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

一旦你设置了高度，你就必须到`reload`你的桌子上。

**编辑：**

```
- (void) viewDidLoad
{
  [super viewDidLoad];

  self.tableView.tableFooterView = [[[UIView alloc] init] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:31:25.443

您可以添加此代码。这不会在您的`UITableView`

```
- (void) addFooter
{
    UIView *v = [[UIView alloc] initWithFrame:CGRectZero];

    [self.myTableView setTableFooterView:v];

    [v release];
} 
```

您还可以通过此设置行的高度

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //Set height according to your condition
  if (indexPath.row == 0)
  {
  }
  else
  {
  }
} 
```

然后你可以重新加载你的`UITableView`

```
[tableview reloadData]; 
```

**编辑：**`addFooter`调用函数`- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section`

你也可以添加这个

```
- (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
     // This will create a "invisible" footer
     return 0.01f;
 } 
```

# image - 如何从 rgba 创建图像？

> ID：15132935
> 
> 赞同：1
> 
> 时间：2013-02-28T10:18:40.083
> 
> 标签：image, button, c++-cli, rgba

我从 ColorDialog 得到 RGBA rgba。如何从 rgba 创建图像？

我想根据用户颜色选择设置按钮的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:18:35.157

为您的按钮创建一个正确大小的位图，并将像素的颜色更改为您的 rbga 颜色。

例如：

```
 Bitmap image1 = gcnew Bitmap(160,160);
     int x;
     int y;

     Color pixelColor =  Color::FromArgb( A, R, B, G );
     // Loop through the images pixels to reset color. 
     for ( x = 0; x < image1->Width; x++ )
     {
        for ( y = 0; y < image1->Height; y++ )
        {
           image1->SetPixel( x, y, pixelColor );

        }

     } 
```

您还可以获得位图的图形上下文并使用 Graphics.FillRectangle 方法来填充它。

位图是图像，因此您可以将其设置为按钮的图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:36:30.487

您可以创建一个位图，从中创建一个图形对象并用任何颜色填充它。

```
Bitmap^ bmp = gcnew Bitmap(WIDTH, HEIGHT);
Graphics^ g = Graphics::FromImage(bmp);
g->FillRectangle(
   gcnew SolidBrush(Color::FromArgb(alfa, red, green, blue)),
   Rectangle(Point.Empty, bmp.Size() ); 
```

太简单。

# java - 删除/替换唯一的孩子后 JTree.expandPath 的奇怪问题

> ID：15132937
> 
> 赞同：1
> 
> 时间：2013-02-28T10:18:46.697
> 
> 标签：java, swing, jtree

我想出了这个 SSCCE 来重现我在一个更大的程序中遇到的一些奇怪的行为：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

public class TreeExpandTest {

    private JFrame frame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TreeExpandTest window = new TreeExpandTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public TreeExpandTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");
        final JTree tree = new JTree(root);
        tree.setShowsRootHandles(true);
        final DefaultTreeModel model = (DefaultTreeModel) tree.getModel();
        final DefaultMutableTreeNode level1 = new DefaultMutableTreeNode("Level 1");
        root.add(level1);
        DefaultMutableTreeNode level2a = new DefaultMutableTreeNode("Level 2a");
        level1.add(level2a);

        final TreeNode[] nodes = model.getPathToRoot(level1);
        tree.expandPath(new TreePath(nodes));

        frame.getContentPane().add(tree, BorderLayout.CENTER);

        JButton btnDoStuff = new JButton("Remove 2a, replace with 2b");
        frame.getContentPane().add(btnDoStuff, BorderLayout.SOUTH);
        btnDoStuff.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                level1.remove(0);
                int[] removed = {0};
                model.nodesWereRemoved(level1, removed, null);

                DefaultMutableTreeNode level2b = new DefaultMutableTreeNode("Level 2b");
                level1.insert(level2b, 0);
                int[] inserted = {0};
                model.nodesWereInserted(level1, inserted);

                //tree.collapsePath(new TreePath(nodes));
                tree.expandPath(new TreePath(nodes));
            }
        });
    }
} 
```

要完全理解问题，请执行以下操作：

1.  启动程序。
2.  单击底部的按钮。这应该 (i) 删除“Level 2a”，然后 (ii) 将其替换为“Level 2b”，最后 (iii) 重新展开“Level 1”节点，以便新插入的替换可见。
3.  点击后，注意“Level 1”是折叠的，而应该展开的时候。
4.  这就是它变得非常奇怪的地方：单击“Level 1”前面的手柄以展开它。请注意，没有任何反应！再次单击它，它最终会展开。这种奇怪的行为让我相信它实际上是从一开始就被扩展的，但不知何故绘制不正确。我不知道有什么方法可以要求重新绘制树，而且我相信我`nodesWereInserted`正确地调用了该方法，这真的是我能做的，对吧？

我找到了一种“解决”问题的解决方法，但不能满足我的好奇心。

1.  取消注释源代码中倒数第二行，然后启动程序并再次按下按钮。请注意，它现在可以完美运行。

问题仍然存在……出了什么问题，为什么需要我的解决方法？为什么我需要先折叠树，然后再告诉它我希望它展开？

编辑添加：仅当我删除/替换独生子女时才会发生这种情况。如果有多个孩子并且我删除/替换使得父母永远不会没有孩子，那么每件事都会按预期运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:34:46.827

通知不正确，应该是：

```
level1.remove(0);
int[] removed = {0};
Object[] children = new Object[]{level2a};
model.nodesWereRemoved(level1, removed, children); 
```

注意子元素数组而不是 null

顺便说一句，我建议尽可能使用模型 api 来修改节点/结构（相对于更改其脚下的节点）。对于单节点更改，上述内容为：

```
model.removeNodeFromParent(level2a);
DefaultMutableTreeNode level2b = new DefaultMutableTreeNode("Level 2b");
model.insertNodeInto(level2b, level1, 0); 
```

# java - 使用 Hazelcast 在磁盘上持久化数据

> ID：15132946
> 
> 赞同：12
> 
> 时间：2013-02-28T10:19:08.733
> 
> 标签：java, hazelcast, in-memory

我已经安装了 HazelCast 2.5。我想将我的记录保存到磁盘中。我了解到 MapStore 可以完成这项工作。但是我不确定如何实现 MapStore。

到目前为止我写的代码：

```
public class MyMaps implements MapStore<String,String> {

    public static Map<Integer, String> mapCustomers = Hazelcast.getMap("customers");

    public static void main(String[] args) {
        {
            mapCustomers.put(1, "Ram");
            mapCustomers.put(2, "David");
            mapCustomers.put(3, "Arun");

        }
    }
} 
```

我如何将所有这些条目放入磁盘。

是否需要有 MySQL 或 PostgreSQL 之类的后端才能使用此类？

我相信可以使用以下功能：

```
public void delete(String arg0);
public void deleteAll(String arg0);
public void store(String arg0);
public void storeAll(String arg0); 
```

我需要一个如何实现 MapStore 的示例片段。

请向我提供示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-21T09:53:43.700

是的，您可以使用 MapStore 和 MapLoader 将文件持久保存到本地存储。在此处阅读官方文档。

[https://docs.hazelcast.org/docs/latest/manual/html-single/#loading-and-storing-persistent-data](https://docs.hazelcast.org/docs/latest/manual/html-single/#loading-and-storing-persistent-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-22T06:41:05.137

Hazelcast 在分区策略方面有两种类型的分布式对象：

*   每个分区存储实例的一部分的数据结构，即分区数据结构。

*   单个分区存储整个实例的数据结构，即非分区数据结构。

不支持分区的 Hazelcast 数据结构持久性数据到本地文件系统，需要一个可以从所有 hazelcast 成员访问的集中式系统，如 mysql 或 mongodb。

您可以从[hazelcast-code-samples](https://github.com/hazelcast/hazelcast-code-samples/blob/master/distributed-map/entrystore/src/main/java/DummyEntryStore.java)获取代码。

# r - R setRefClass 访问器

> ID：15132947
> 
> 赞同：3
> 
> 时间：2013-02-28T10:19:08.900
> 
> 标签：r, oop, reference-class

我创建了一个`setRefClass`, 我想知道如何实现访问器，以便在创建此类的新实例时可以使用`setXXX`,访问字段`getXXX`。我正在考虑使用`.self$accessors(names(.self$fields()))`in initialize 方法，但它似乎不起作用。

```
pathRoot <- setRefClass(
    Class = "pathRoot",
    fields = list(
            # basic info of path
            W = "character",
            Y = "character",
            H = "character"
            ),
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:31:04.230

要自动生成 getter 和 setter，只需使用以下`accessors`方法：

```
pathRoot$accessors(c("W", "Y", "H")) 
```

**例子**

```
p = pathRoot$new(W="A",Y="B",H="C")
R> p$getY()
[1] "B"
R> p$setW("Hi")
R> p$getW()
[1] "Hi" 
```

您还可以通过 访问变量`$`，例如

```
p$W 
```

# javascript - 适用于 iPhone 的在线 html5 IDE

> ID：15132951
> 
> 赞同：1
> 
> 时间：2013-02-28T10:19:19.130
> 
> 标签：javascript, html, css, ide

是否有基于云/网络的在线 HTML5 IDE 或某种游乐场，让我可以使用 iPhone（或任何现代移动设备）玩 JavaScript、JavaScript 库、HTML 和 CSS3？

我正在寻找一种可以让我在旅途中快速测试的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:24:00.763

Tinkerbin.com 似乎可以在 iphone 上运行（我刚刚测试过）。

这并不理想，但它运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:07:48.923

*   [JS斌](http://jsbin.com/)
*   [渲染](http://rendera.heroku.com/)

（最流行的替代品之一，[JsFiddle](http://jsfiddle.net/)在 iOS 下不适合我。）

# ios - Objective C：方法调用查询

> ID：15132954
> 
> 赞同：1
> 
> 时间：2013-02-28T10:19:31.263
> 
> 标签：ios, objective-c, xcode4

我是 Objective C 和 iOS 的新手。到目前为止，我已经为初次动手制作了简单的应用程序。我正在浏览网络中的一个示例，但无法理解代码中方法调用的实现

下面是方法调用

```
[db addObserver:(DBObserver*)self]; 
```

我知道“db”对象正在调用带有参数的方法“addObserver”。但是“自我”在这里意味着什么。对争论有点困惑。

对于这样愚蠢的问题，我感到非常抱歉，但请考虑我是 iOS 和 Objective C 的初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:32:44.427

在这种情况下，声明：

```
[db addObserver:(DBObserver*)self]; 
```

表示“将**我**( `self`) 添加为`db`对象的观察者”。

但是，它似乎不是 Key Value Observing ( [KVO](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html) )，因为它具有不同的方法签名，因此它必须是观察者模式的其他一些实现。

**更新**我怀疑强制转换`DBObserver *`是不必要的，但这取决于该方法的声明方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:20:49.140

`self`在 Objective-C 中等于`this`在 C++ 中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:22:58.203

`self``this`与in 相同`java`或`C++`

# matlab - MATLAB 中的闭环优化

> ID：15132957
> 
> 赞同：0
> 
> 时间：2013-02-28T10:19:35.570
> 
> 标签：matlab, optimization, vectorization

我想矢量化以下循环：

```
for I=1:N
  x = f(x);
end 
```

其中 f 是自定义函数，即匿名函数。是否有像 arrayfun 这样的命令允许这样做？

编辑：向量化在这里可能是错误的词，应该使用优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:24:51.290

我不检查代码，但也许：

`x = arrayfun(@(y) f(x), 1:N);`

`arrayfun`您可以将传递的向量的每个元素作为参数。在上面的示例中，`y`指的是 vector 的每个元素`1:N`，它也表示`for`您作为示例发布的循环的索引。在您的`for`循环中，您不使用索引，因此您可以在 中执行相同的操作`arrayfun`并在向量上执行您想要的操作：`f(x)`。最后，您可以将输出分配给`x`. 可能，通过您检索长度`arrayfun`输出的方式以及迭代中每个结果的结果。使用循环，您将在每次迭代中覆盖.`x``N``f(x)``for``x`

希望你对我的英语有所帮助和抱歉。

# android - 库项目的 Android .properties 文件被覆盖

> ID：15132967
> 
> 赞同：0
> 
> 时间：2013-02-28T10:19:57.673
> 
> 标签：android, properties, settings, project

我创建了一个库项目并将我的属性存储在一个 .properties 文件（release.properties 和 test.properties）中。我使用 Properties 对象访问它们，我访问的文件取决于布尔值（DEBUG true/false）。

但是，如果我创建一个使用我的 lib 项目的应用程序项目，并且如果此应用程序项目的 ONE 属性值与 lib 不同，我必须将整个文件复制到我的应用程序项目中并更改不同的一行.

这是一个糟糕的情况。如果我在我的库项目中的 .properties 中添加一行，我将不得不将它添加到所有应用程序项目中，这与更改 lib 项目中的一行相同。

问题是 app-project 中的 .properties 文件覆盖了 lib-project 中的整个文件，这种覆盖不是基于行的。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T08:31:36.163

答案是创建一个 CustomProperties 类，该类在初始化时将两个属性文件 default.properties（来自库项目）和 my.properties（来自应用程序项目）加载到 2 个不同的 Properties 对象中。

在 CustomProperties 中：为 String、int、boolean 等创建 getter，并在这些方法中检查 my.properties 是否包含该值，如果是则返回此值，如果不返回则从 default.properties 返回值。

根据调试设置（真或假），我选择使用调试文件还是实时文件。所以我有 4 个属性文件，库项目中有 2 个（调试 + 实时），应用项目中有 2 个（调试 + 实时）。

# python - 跟踪 celery.group 任务的进度？

> ID：15132968
> 
> 赞同：10
> 
> 时间：2013-02-28T10:20:06.257
> 
> 标签：python, django, celery, django-celery

```
@celery.task
def my_task(my_object):
    do_something_to_my_object(my_object)

#in the code somewhere 
tasks = celery.group([my_task.s(obj) for obj in MyModel.objects.all()])
group_task = tasks.apply_async() 
```

问题：celery 有什么东西可以检测小组任务的进度吗？我可以计算那里有多少任务以及已经处理了多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:03:09.160

修补外壳（ipython 的选项卡自动完成）我发现`group_task`（它是一个`celery.result.ResultSet`对象）有一个名为的方法`completed_count`，它给出了我所需要的。

[还可以在http://docs.celeryproject.org/en/latest/reference/celery.result.html#celery.result.ResultSet.completed_count](http://docs.celeryproject.org/en/latest/reference/celery.result.html#celery.result.ResultSet.completed_count)找到文档

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-15T15:18:14.007

这是基于@dalore's answer的完整工作示例。

首先`tasks.py`。

```
import time
from celery import Celery, group

app = Celery('tasks', broker='pyamqp://guest@127.0.0.1//', backend='redis://localhost')

@app.task(trail=True)
def add(x, y):
    time.sleep(1)
    return x + y

@app.task(trail=True)
def group_add(l1, l2):
    return group(add.s(x1, x2) for x1, x2 in zip(l1, l2))() 
```

使用 Docker 启动 redis 服务器：`docker run --name my-redis -p 6379:6379 -d redis`.

使用 Docker 启动 RabbitMQ `docker run -d --hostname my-rabbit --name my-rabbit -p 5672:5672 rabbitmq:alpine`：.

在单独的 shell 中启动单个进程 celery worker `celery -A tasks worker --loglevel=info -c 1`：.

然后运行下面的测试脚本。

```
from tasks import group_add
from tqdm import tqdm

total = 10

l1 = range(total)
l2 = range(total)
delayed_results = group_add.delay(l1, l2)
delayed_results.get()  # Wait for parent task to be ready.

results = []
for result in tqdm(delayed_results.children[0], total=total):
    results.append(result.get())
print(results) 
```

您应该会看到类似下面的内容，其中进度条每秒增加 10%。

```
50%|#####     | 5/10 [00:05<00:05,  1.01s/it
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18] 
```

最后，清理你的 redis 和 rabbitmq 容器。

```
docker stop my-rabbit my-redis
docker rm my-rabbit my-redis 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T15:35:55.790

阅读文档，`AsyncResult`有一种`collect`方法可以在结果进入时收集结果。

[http://docs.celeryproject.org/en/latest/reference/celery.result.html#celery.result.AsyncResult.collect](http://docs.celeryproject.org/en/latest/reference/celery.result.html#celery.result.AsyncResult.collect)

```
from celery import group
from proj.celery import app

@app.task(trail=True)
def A(how_many):
    return group(B.s(i) for i in range(how_many))()

@app.task(trail=True)
def B(i):
    return pow2.delay(i)

@app.task(trail=True)
def pow2(i):
    return i ** 2 
```

示例输出：

```
>>> from celery.result import ResultBase
>>> from proj.tasks import A

>>> result = A.delay(10)
>>> [v for v in result.collect()
...  if not isinstance(v, (ResultBase, tuple))]
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

注意：`Task.trail`必须启用该选项，以便子列表存储在`result.children`. 这是默认设置，但为了说明而明确启用。

编辑：

经过进一步测试，发现虽然收集状态它将收集结果，但它仍在等待。我发现要获得进展，您需要获得孩子的结果，如下所示：

```
group_result = mygrouptask.delay().get()
for result in tqdm(group_result.children, total=count):
    yield result.get() 
```

tqdm 在控制台中显示进度

mygrouptask 是一个返回芹菜组，如下所示：

```
return group(mytask.s(arg) for arg in args)() 
```

# c# - 优势数据库错误 5175

> ID：15132969
> 
> 赞同：3
> 
> 时间：2013-02-28T10:20:11.450
> 
> 标签：c#, .net, indexing, collation, advantage-database-server

我正在尝试使用 Advantage .Net 数据提供程序从 Advantage 数据库中读取数据。当我执行我的应用程序时，出现以下错误：

> “错误 5175 索引是使用不同的排序规则创建的”

修复它的一种方法是使用 Advantage Data Architect 打开表并重新索引或删除索引文件 (.adi) 但我不能这样做，因为该数据库由会计软件 (Sage BOB 50) 使用，如果我重新索引或删除索引，软件无法再访问数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:35:09.983

您的连接将使用的排序规则取决于您连接到服务器的方式。（另请参阅[Advantage Database Index Collat​​ion Sequence](https://stackoverflow.com/questions/15130953/advantage-database-index-collation-sequence)）。

为了避免 5175 错误，您应该使用与会计软件相同的连接方法。

如果它使用 ALS，您可以将`adslocal.cfg`配置文件复制到您的应用程序中。如果它使用 ADS，则应确保连接到与会计软件相同的数据库服务器。

# javascript - Jquery：图像加载器位置和隐藏混乱

> ID：15132971
> 
> 赞同：0
> 
> 时间：2013-02-28T10:20:16.770
> 
> 标签：javascript, jquery, ajax

我有一个模态对话框，它会弹出然后加载并显示加载器图像，几秒钟后它将隐藏并预览“modalLogin”页面。

一开始加载主页面并单击模态对话框按钮弹出它很好，但是当我关闭模态对话框并再次单击模态按钮时，加载混乱！那么有人可以向我解释什么是错的吗？

```
 $(href).fadeIn(100, function(){
                $('#loadingImage').show(1,function(){

                     setTimeout( function(){
                         $('#loadingImage').hide(1,
                             function(){

                            if(thisId == 'loginModal' ){
                                $('#previewOutput').load('modalLogin.php');
                                //alert("Login");
                            }
                         }
                  );                             

                     },500);

                });

            }); 
```

这里的链接：http: [//jsfiddle.net/UZ6JN/1/](http://jsfiddle.net/UZ6JN/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:44:58.083

这是因为当您放置文本时，`.html()`它会停留在那里，如果您想正确查看，请在其中添加一行：

```
 $('.window .close').click(function (e) {
     //Cancel the link behavior
     e.preventDefault();
     $('#previewOutput').html(''); //<--------add this one here
     $('#mask').hide();
     $('.window').hide();
 }); 
```

[**在这里检查一下小提琴**](http://jsfiddle.net/UZ6JN/2/)

# javascript - Facebook Like 按钮 - 显示实际数字？

> ID：15132972
> 
> 赞同：2
> 
> 时间：2013-02-28T10:20:16.637
> 
> 标签：javascript, facebook, facebook-like

我目前正在使用网站上的 Facebook 点赞按钮，当数字变得相当高时，数字会被截断为“k”代表千或“m”代表百万。

不是显示'1m'，而是显示实际数字，即1,000,543。

文档和演示似乎显示了标准布局的原始数字，但在属性部分中没有提到这一点，也没有提到如何对 button_count 布局进行操作。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:52:49.883

正如在[https://stackoverflow.com/a/7324769/2089361](https://stackoverflow.com/a/7324769/2089361)中回答的那样，

使用 facebook **graph API**：查询[http://graph.facebook.com/http://www.facebook.com/thedoors](http://graph.facebook.com/http://www.facebook.com/thedoors)，获取 JSON 字符串作为响应，解析它，这是实际的喜欢计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:11:50.430

```
function fb_like_count($facebook_name){
    $data = json_decode(file_get_contents("https://graph.facebook.com/".$facebook_name));
    echo $data->likes;
} 
```

请问点赞`echo`数。`$facebook_name`是`url`页面的。

# html - 错误：元素元上属性 http-equiv 的错误值 X-UA-Compatible

> ID：15132973
> 
> 赞同：4
> 
> 时间：2013-02-28T10:20:18.030
> 
> 标签：html

这一行：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/> 
```

在 Firebug 中导致此错误：

```
Error: Bad value X-UA-Compatible for attribute http-equiv on element meta. 
```

为什么？我该如何解决？

顺便提一句。我正在使用 HTML 5 文档类型，例如：

```
<!DOCTYPE html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:23:34.917

在 Apache 上，将其添加到您的根 .htaccess 文件中：

```
Header set X-UA-Compatible "IE=edge" 
```

查看这篇文章以获取有关错误的更多信息：[http ://www.456bereastreet.com/archive/201103/x-ua-compatible_and_html5/](http://www.456bereastreet.com/archive/201103/x-ua-compatible_and_html5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T18:55:41.700

您可以尝试使用 PHP 来解决它（来源：[http](http://www.validatethis.co.uk/news/fix-bad-value-x-ua-compatible-once-and-for-all/) ://www.validatethis.co.uk/news/fix-bad-value-x-ua-compatible-once-and-for-all/ ）。

```
if (isset($_SERVER['HTTP_USER_AGENT']) &&
(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false))
    header('X-UA-Compatible: IE=edge,chrome=1'); 
```

它对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T19:26:44.873

我对 Firebug 有同样的问题。由于 IE 是唯一需要元标记的浏览器，您可以将元标记包装在 IE 条件块中。

```
<!--[if IE]>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<![endif]--> 
```

# netbeans - 如何阻止 Netbeans 双引号命令行参数

> ID：15132977
> 
> 赞同：0
> 
> 时间：2013-02-28T10:20:31.000
> 
> 标签：netbeans, opensuse

我对 Netbeans 自动双引号项目属性 - > 运行 - > 运行命令中设置的每个命令行参数有疑问。
因为我想将命令行输出重定向到一个文件，`> dump.txt`所以这是一个问题。将转储命令包装在 `` 中没有帮助。
我试图在不同的终端中运行它，但它们都将那些双引号参数传递给它们......

这是 Netbeans 的问题，是我缺少设置，还是与 OpenSUSE 相关（我在 lubuntu 下没有这个问题）？

PS：Netbeans 7.0.1版

# android - Android - 使用 ObjectAnimator 的移动按钮不起作用

> ID：15132980
> 
> 赞同：1
> 
> 时间：2013-02-28T10:20:43.073
> 
> 标签：android, animation, objectanimator

我需要将按钮从一个位置移动到另一个位置。查看位置移动工作正常，但只有旧区域是可点击的。

这是我的代码：

```
 Button animatorButton = (Button)findViewById(R.id.animatorbutton);
 ObjectAnimator objectAnimatorButton = ObjectAnimator.ofFloat(animatorButton, "translationX", 0f, 400f);
 objectAnimatorButton.setDuration(1000);
 objectAnimatorButton.start(); 
```

如何移动禁用旧可点击区域的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:50:44.360

你用的是什么安卓版本？在 3.0 之前，您需要在动画完成后手动移动视图才能移动可点击区域。请参阅此响应作为参考“[如何使用 Android 进行交互式动画（翻译）](https://stackoverflow.com/questions/9595881/how-to-do-interactive-animation-translation-with-android)。

在 3.0 和更新版本中，PropertyAnimator 也会移动可点击区域。您是否在 3.0 之前的设备上使用 Nineoldandroid 动画包？如果是这样，您将只能看到视图动画的效果，而不是属性（也称为可点击区域）移动的全部效果。

# scala - 玩 2.1 将 Java ObjectNode 转换为 Scala Json

> ID：15132981
> 
> 赞同：2
> 
> 时间：2013-02-28T10:20:45.957
> 
> 标签：scala, playframework-2.1

如何将 java ObjectNode 转换为 Scala Json？

```
import org.codehaus.jackson.node.ObjectNode
import play.api.libs.json._

var objNode = JavaClass.returnObjNode()
var json = objNode.convertToScalaJson() 
```

# c++ - 如何在 Matlab 中训练模型，将其保存到磁盘并加载到 C++ 程序中？

> ID：15132982
> 
> 赞同：5
> 
> 时间：2013-02-28T10:20:48.627
> 
> 标签：c++, matlab, machine-learning, libsvm

我正在使用 libsvm 3.16 版。我在 Matlab 中进行了一些培训，并创建了一个模型。现在我想将此模型保存到磁盘并将此模型加载到我的 C++ 程序中。到目前为止，我找到了以下替代方案：

1.  这个答案解释了[如何](https://stackoverflow.com/questions/11744244/lib-svm-how-to-convert-mymodel-mat-to-mymodel-model)从基于[这个](http://ick.mech.kumamoto-u.ac.jp/kumon/ja/node/26)网站的 C++ 中保存模型。不完全是我需要的，但可以适应。（这需要开发时间）。
2.  我可以在 Matlab 中找到最好的训练参数（内核、C）并用 C++ 重新训练所有内容。（每次更改参数时都需要在 C++ 中进行培训。它不可扩展）。

因此，这两种选择都不令人满意，

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-26T15:43:53.430

我的解决方案是用 C++ 重新训练，因为我找不到直接保存模型的好方法。这是我的代码。您需要对其进行调整并对其进行一些清理。最大的改变是你必须让它`svm_parameter`不像我那样对值进行硬编码。您还必须替换`FilePath`为`std::string`. 我在这里复制、粘贴和进行小编辑，所以格式不会完美：

像这样使用：

```
 auto targetsPath = FilePath("targets.txt");
    auto observationsPath = FilePath("observations.txt");

    auto targetsMat = MatlabMatrixFileReader::Read(targetsPath, ',');
    auto observationsMat = MatlabMatrixFileReader::Read(observationsPath, ',');
    auto v = MiscVector::ConvertVecOfVecToVec(targetsMat);
    auto model = SupportVectorRegressionModel{ observationsMat, v };

    std::vector<double> observation{ { // 32 feature observation
        0.883575729725847,0.919446119013878,0.95359403450317,
        0.968233630936732,0.91891307107125,0.887897763183844,
        0.937588566544751,0.920582702918882,0.888864454119387,
        0.890066735260163,0.87911085669864,0.903745573664995,
        0.861069296586979,0.838606194934074,0.856376230548304,
        0.863011311537075,0.807688936997926,0.740434984165146,
        0.738498042748759,0.736410940165691,0.697228384912424,
        0.608527698289016,0.632994967880269,0.66935784966765,
        0.647761430696238,0.745961037635717,0.560761134660957,
        0.545498063585615,0.590854855113663,0.486827902942118,
        0.187128866890822,- 0.0746523069562551
    } };

    double prediction = model.Predict(observation); 
```

`miscvector.h`

```
 static vector<double> ConvertVecOfVecToVec(const vector<vector<double>> &mat)
    {
        vector<double> targetsVec;
        targetsVec.reserve(mat.size());
        for (size_t i = 0; i < mat.size(); i++)
        {
            targetsVec.push_back(mat[i][0]);
        }
        return targetsVec;
    } 
```

`libsvmtargetobjectconvertor.h`

```
#pragma once

#include "machinelearning.h"

struct svm_node;

class LibSvmTargetObservationConvertor
{
public:
    svm_node ** LibSvmTargetObservationConvertor::ConvertObservations(const vector<MlObservation> &observations, size_t numFeatures) const
{
    svm_node **svmObservations = (svm_node **)malloc(sizeof(svm_node *) * observations.size());
    for (size_t rowI = 0; rowI < observations.size(); rowI++)
    {
        svm_node *row = (svm_node *)malloc(sizeof(svm_node) * numFeatures);
        for (size_t colI = 0; colI < numFeatures; colI++)
        {
            row[colI].index = colI;
            row[colI].value = observations[rowI][colI];
        }
        row[numFeatures].index = -1; // apparently needed
        svmObservations[rowI] = row;
    }
    return svmObservations;
}

svm_node* LibSvmTargetObservationConvertor::ConvertMatToSvmNode(const MlObservation &observation) const
{
    size_t numFeatures = observation.size();
    svm_node *obsNode = (svm_node *)malloc(sizeof(svm_node) * numFeatures);
    for (size_t rowI = 0; rowI < numFeatures; rowI++)
    {
        obsNode[rowI].index = rowI;
        obsNode[rowI].value = observation[rowI];
    }
    obsNode[numFeatures].index = -1; // apparently needed
    return obsNode;
}
}; 
```

`machinelearning.h`

```
#pragma once

#include <vector>
using std::vector;

using MlObservation = vector<double>;
using MlTarget = double;

//machinelearningmodel.h
#pragma once

#include <vector>
#include "machinelearning.h"
class MachineLearningModel
{
public:
    virtual ~MachineLearningModel() {}
    virtual double Predict(const MlObservation &observation) const = 0;
}; 
```

`matlabmatrixfilereader.h`

```
#pragma once

#include <vector>
using std::vector;

class FilePath;
// Matrix created with command:
// dlmwrite('my_matrix.txt', somematrix, 'delimiter', ',', 'precision', 15);
// In these files, each row is a matrix row. Commas separate elements on a row.
// There is no space at the end of a row. There is a blank line at the bottom of the file.
// File format:
// 0.4,0.7,0.8
// 0.9,0.3,0.5
// etc.
static class MatlabMatrixFileReader
{
public:
    static vector<vector<double>> Read(const FilePath &asciiFilePath, char delimiter)
{

    vector<vector<double>> values;
    vector<double> valueline;
    std::ifstream fin(asciiFilePath.Path());
    string item, line;
    while (getline(fin, line))
    {
        std::istringstream in(line);

        while (getline(in, item, delimiter))
        {
            valueline.push_back(atof(item.c_str()));
        }           
        values.push_back(valueline);
        valueline.clear();
    }
    fin.close();
    return values;
}

}; 
```

`supportvectorregressionmodel.h`

```
#pragma once

#include <vector>
using std::vector;
#include "machinelearningmodel.h"

#include "svm.h" // libsvm

class FilePath;

class SupportVectorRegressionModel : public MachineLearningModel
{
public:
    SupportVectorRegressionModel::~SupportVectorRegressionModel()
{
    svm_free_model_content(model_);
    svm_destroy_param(&param_);
    svm_free_and_destroy_model(&model_);
}

SupportVectorRegressionModel::SupportVectorRegressionModel(const vector<MlObservation>& observations, const vector<MlTarget>& targets)
{
    // assumes all observations have same number of features
    size_t numFeatures = observations[0].size();

    //setup targets
    //auto v = ConvertVecOfVecToVec(targetsMat);
    double *targetsPtr = const_cast<double *>(&targets[0]); // why aren't the targets const?

    LibSvmTargetObservationConvertor conv;
    svm_node **observationsPtr = conv.ConvertObservations(observations, numFeatures);

    // setup observations
    //svm_node **observations = BuildObservations(observationsMat, numFeatures);

    // setup problem
    svm_problem problem;
    problem.l = targets.size();
    problem.y = targetsPtr;
    problem.x = observationsPtr;

    // specific to out training sets
    // TODO:    This is hard coded. 
    //          Bust out these values for use in constructor
    param_.C = 0.4;                 // cost
    param_.svm_type = 4;            // SVR
    param_.kernel_type = 2;         // radial
    param_.nu = 0.6;                // SVR nu
                                    // These values are the defaults used in the Matlab version
                                    // as found in svm_model_matlab.c
    param_.gamma = 1.0 / (double)numFeatures;
    param_.coef0 = 0;
    param_.cache_size = 100;        // in MB
    param_.shrinking = 1;
    param_.probability = 0;
    param_.degree = 3;
    param_.eps = 1e-3;
    param_.p = 0.1;
    param_.shrinking = 1;
    param_.probability = 0;
    param_.nr_weight = 0;
    param_.weight_label = NULL;
    param_.weight = NULL;

    // suppress command line output
    svm_set_print_string_function([](auto c) {});

    model_ = svm_train(&problem, &param_);
}

double SupportVectorRegressionModel::Predict(const vector<double>& observation) const
{
    LibSvmTargetObservationConvertor conv;
    svm_node *obsNode = conv.ConvertMatToSvmNode(observation);
    double prediction = svm_predict(model_, obsNode);
    return prediction;
}

SupportVectorRegressionModel::SupportVectorRegressionModel(const FilePath & modelFile)
{
    model_ = svm_load_model(modelFile.Path().c_str());
}
private:
    svm_model *model_;
    svm_parameter param_;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:04:34.237

选项1实际上是相当合理的。如果您通过 matlab 将模型保存为 libsvm 的 C 格式，那么使用 libsvm 提供的函数可以直接在 C/C++ 中处理模型。尝试在 C++ 中使用 matlab 格式的数据可能会更加困难。

`main`“svm-predict.c”（位于 libsvm 包的根目录中）中的函数可能具有您需要的大部分功能：

```
if((model=svm_load_model(argv[i+1]))==0)
{
    fprintf(stderr,"can't open model file %s\n",argv[i+1]);
    exit(1);
} 
```

例如，要`x`使用模型预测标签，您可以运行

```
int predict_label = svm_predict(model,x); 
```

最棘手的部分是将您的数据转换为 libsvm 格式（除非您的数据是 libsvm 文本文件格式，在这种情况下您可以使用`predict`“svm-predict.c”中的函数）。

libsvm 向量`x`是一个`struct svm_node`表示稀疏数据数组的数组。每个 svm_node 都有一个索引和一个值，并且向量必须以设置为 -1 的索引终止。例如，要对 vector 进行编码`[0,1,0,5]`，您可以执行以下操作：

```
struct svm_node *x = (struct svm_node *) malloc(3*sizeof(struct svm_node));
x[0].index=2; //NOTE: libsvm indices start at 1
x[0].value=1.0;
x[1].index=4;
x[1].value=5.0;
x[2].index=-1; 
```

对于分类器 (C_SVC) 以外的 SVM 类型，请查看`predict`“svm-predict.c”中的函数。

# c++ - 使用发行版 EXE 调试 DLL

> ID：15132990
> 
> 赞同：3
> 
> 时间：2013-02-28T10:21:09.773
> 
> 标签：c++, debugging, release

是否可以使用发布模式 EXE 执行调试模式 DLL？

我正在尝试这种情况，但 EXE 不加载调试 DLL 并抛出错误“此应用程序无法启动...”。

我知道这不是一个好的方案，但由于某些要求，我必须完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:07:31.673

如果您的 dll 接口不依赖于在调试和发布中可能看起来不同的类，它就可以工作。例如，MSVC 中的 std::string 和 std::vector 在调试和发布时不兼容。（栅栏……）

所以例如

```
std::string GetName(); 
```

不管用。

此外，不应转移 new 和 delete，因为调试/发布使用不同的运行时。但无论如何，您应该始终`delete`与`new`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T09:26:01.647

是的，这可以工作。

您的“应用程序无法启动”问题很可能是您将 DLL 的调试版本（使用 Visual Studio 构建在您的机器上）复制到没有安装 DEBUG CRT 的机器上。通常将 MSVCRTD(version).dll 复制到与程序文件相同的目录可以解决此问题。我有一个先前的答案，其中涵盖了其中的一些[内容](https://stackoverflow.com/a/6963678/104458)。

最好的办法是始终将所有二进制文件链接到同一个动态 MSVCRT DLL，以便它们都共享同一个运行时。

另一个简单的解决方法是编译您的 DEBUG DLL 以使用与 MSVCRT DLL 相同的风格（或静态链接到 CRT）。在 VS 项目属性页面（我认为是代码生成）中的某处是选择 CRT 的下拉菜单。将零售 MSVCRT 链接到调试 DLL 或静态链接没有任何问题。

需要注意的是，当您有不同风格的调试 C 运行时链接到不同的二进制文件时。如果您为 EXE 链接了发行版 MSVCRT dll，但为 DLL 提供了调试 MSCVRTD DLL，则在某些情况下可能会导致问题。这是因为句柄和内存块由 CRT 的两个不同实例跟踪。

例子：

1.  如果你在 EXE 中分配内存，但在 DLL 中释放。反之亦然。

2.  文件句柄在 EXE 中使用 fopen() 打开，但在 EXE 中使用或关闭（反之亦然）。

3.  对于 DLL 接口的任何头文件，在头文件中实现任何类型的内联函数或方法都是导致 #1 或 #2 发生的简单方法。

4.  共享 STL 对象（std::string、std::list、std::vector）是混合 CRT 使用的绝对禁忌。

# java - 使用 JMeter 测试 JSF 时提取 ViewState

> ID：15132991
> 
> 赞同：6
> 
> 时间：2013-02-28T10:21:11.343
> 
> 标签：java, jsf, jmeter

我正在使用 JMeter 对我的 JSF 应用程序进行一些负载测试，但我无法通过页面传递 ViewState。ViewState 变量根本不会被提取，或者它不会在页面中传递。

我已经用代理服务器记录了我的测试步骤，它是这样的：

![第一个 GET 请求](../Images/ffb5d0ff2ac4bf5aef374a54044d2001.png)

我在第一个 GET 请求中添加了 Regex 提取器。测试了正则表达式，它是正确的。

![第一个 POST 请求](../Images/86a4570194da838da527b59da3492991.png)

在每个 POST 请求中，我用我的变量替换硬连线的视图 ID。

当我发送请求时，我得到以下内容：

![已发送请求](../Images/96996946f52b2bb36b5d9ce2cfedb339.png)

POST 参数不正确，因为它发送变量的名称。

发布数据：

> loginForm%3ArequestToken=&loginForm%3Ausername=heller&loginForm%3Apassword=%21QAYxsw2%A7EDC&loginForm%3AloginButton=Anmelden& **com.sun.faces.VIEW=%24%7BjsfViewState%7D** &loginForm=loginForm

你能告诉我在这里做错了什么吗？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:05:55.153

ViewState 参数是一个编码值（我相信是 Base64 吗？），如果通过 url 在 GET 请求中传递，可能包含不合适的值。URL 参数通常经过编码，以便在请求到达服务器时可以表示和解码特殊值（例如空格 -> %20）。

这里的问题是以下请求是一个 POST，这意味着参数不需要进行 URL 编码。

> com.sun.faces.VIEW=%24%7BjsfViewState%7D&loginForm=loginForm

上面显示JMeter或其他一些进程正在对请求中的ViewState进行URL编码，这是不正确的。ViewState 的值应该简单地按原样发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:00:14.787

发现我的问题：正则表达式错误，因此在响应中找不到任何内容。我不得不更改正则表达式。添加默认值“未找到”后注意到它。