# StackOverflow 问答 15568000-15568999

# .net - HostFactory.Run 和 HostFactory.New 有什么区别

> ID：15568000
> 
> 赞同：21
> 
> 时间：2013-03-22T10:24:22.540
> 
> 标签：.net, topshelf

我需要在我所在的项目中使用 topshelf 并且我希望有一个简单的问题。当我使用时一切正常`HostFactory.Run`，但我认为`HostFactory.New`通过阅读函数上的名称来使用它似乎更合理，这里使用的是：http: [//docs.topshelf-project.com/en/latest/配置/config_api.html](http://docs.topshelf-project.com/en/latest/configuration/config_api.html)。

然而，在更简单的示例[http://docs.topshelf-project.com/en/latest/configuration/quickstart.html](http://docs.topshelf-project.com/en/latest/configuration/quickstart.html)中，`HostFactory.Run`使用了 insted 的`HostFactory.New`. 那么区别是什么呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T21:19:20.723

`Run`几乎只包含：

```
return New(configureCallback).Run(); 
```

因此`Run`，这只是创建并立即运行实例的便捷方法，而不是像现在`New`这样创建实例。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-07T08:35:49.077

`HostFactory.Run`会吃掉所有异常，所以它会无声退出，你永远不知道是什么原因造成的。

> HostFactory.New

会抛出异常。

# html - 如何从 HTML 电子邮件的 Outlook 电子邮件视图中删除默认填充/边距

> ID：15568005
> 
> 赞同：6
> 
> 时间：2013-03-22T10:24:31.007
> 
> 标签：html, email, outlook, html-email

在大多数版本的 Outlook 中，我很难从我的 html 电子邮件周围删除填充或边距默认值。我想知道是否可以将某些内容放入我的 HTML 电子邮件中以防止显示填充/边距。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:07:28.640

这有效：

```
<body style="margin: 0px; padding: 0px; background-color: #252525" bgcolor="#252525"> 
```

只要注意你设置的正文背景颜色，如果它被转发，它就会渗入电子邮件链。我建议将主体保留为白色并在 html 容器表上设置颜色以防止这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T19:41:38.860

尝试使用[HTML Boilerplate](http://htmlemailboilerplate.com/)中的 CSS 重置：

```
body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;}
.ExternalClass {width:100%;} 
```

或者更好的是，只需使用样板作为您的电子邮件的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:11:25.383

此外，如果您需要表格单元格完全平坦而没有填充和空，请确保将其添加到表格中：

```
 <table cellpadding="0" cellspacing="0"> 
```

在空单元格的情况下

```
 <td style="font-size:0px;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:26:11.123

您可以添加内联样式，覆盖 Outlook 的默认值（它们具有更高的优先级）。

例如。

```
<div style="padding:0; margin:0;" class="wrapper">
  ... etc ...
</div> 
```

# java - 修复抱怨不安全操作时的“通用数组创建”

> ID：15568008
> 
> 赞同：2
> 
> 时间：2013-03-22T10:24:47.510
> 
> 标签：java

以下代码行导致`javac`发出不安全操作警告：

```
LinkedList<Node>[] buckets = new LinkedList[bucketCount]; 
```

但是，当我尝试通过这样做来解决这个问题时：

```
LinkedList<Node>[] buckets = new LinkedList<Node>[bucketCount]; 
```

我得到一个`generic array creation`错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:29:18.577

简而言之，[泛型类型的数组是有问题的](https://stackoverflow.com/questions/897251/how-do-i-use-arrays-of-generic-types-correctly)。

变成s的`buckets`一个：`ArrayList``LinkedList`

```
ArrayList<LinkedList<Node>> buckets = new ArrayList<LinkedList<Node>>(bucketCount);
for (int i = 0; i < bucketCount; ++i) {
    buckets.add(new LinkedList<Node>());
} 
```

这样，您将获得编译时类型安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:42:04.823

LinkedList只有两个构造函数，一个是默认的，另一个接受一个继承Collection的参数，

```
public LinkedList(Collection<? extends E> c) {
this();
addAll(c);
} 
```

也就是说LinkedList不能有初始化大小，如果需要初始化容器的容量，最好使用ArrayList，如下：

```
List<Node> list = new ArrayList<Node>(bucketCount); 
```

祝你好运 ：）

# java - 如何在我的应用程序中使用 ua-parser？

> ID：15568009
> 
> 赞同：0
> 
> 时间：2013-03-22T10:24:57.300
> 
> 标签：java, user-agent

如何在我的 Web 应用程序中使用“ua-parser”？[我在 git hub 存储库https://github.com/tobie/ua-parser](https://github.com/tobie/ua-parser)中找不到任何 jar 存档。我搜索了谷歌，但找不到任何 ua-parser 的网站。我在哪里可以下载 ua-parser for jar 存档？有没有 ua-parser 的网站？有人在使用 ua-parser 吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:49:40.070

克隆存储库并从 java 文件夹运行 mvn package。这在[这里](https://github.com/tobie/ua-parser/tree/master/java)进行了详细解释 你最终会得到一个 jar（如果你计算依赖项，实际上是一堆 jar）

# scala - Scala 对象克隆（复制），无需重新评估

> ID：15568016
> 
> 赞同：5
> 
> 时间：2013-03-22T10:25:07.627
> 
> 标签：scala, copy, clone

我有大对象：

```
case class BigObject(val str: String, val number: Int) {
val someVal = ...
val someVal2 = ...
    } 
```

我想复制这个对象而不重新评估值。是否可以？现在我正在使用这种方法：

```
val newBigObject = oldBigObject.copy(str = newStr) 
```

正如我从日志/调试器中看到的那样，“someVal”和“someVal2”被重新评估。有可能避免吗？由于我的 BigObject 非常大，价值重新评估需要一些时间，但性能对我来说真的很重要。

感谢您的回答！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T10:43:46.527

这里有一个方法：

制作也传递给构造函数的 and 字段，并为伴生对象中的这些字段提取初始化逻辑`someVal`。`someVal2`

在你的情况下：

```
class BigObject private(val str: String,
                        val number: Int,
                        val someVal: SomeType,
                        val someVal2: SomeType) {

   def copy(newStr: String = str, newNumber: Int = number) = {
     new BigObject(newStr, newNumber, someVal, someVal2)
   }
}

object BigObject {

  def apply(str: String, number: Int): BigObject = {
    val someVal = initialize() //your initialization logic here
    val someVal2 = initialize2()
    new BigObject(str, number, someVal, someVal2)
  }

} 
```

现在，您可以在不重新评估内部字段的情况下进行复制：

```
val bigObj = BigObject("hello", 42)
val anotherBigObj = bigObj.copy(newStr = "anotherStr") 
```

或者，如果您不喜欢伴随对象，您可以创建两个构造函数。主要字段包括所有字段（也包括不可见字段）并且是私有的。公开的只有两个可见参数：

```
class BigObject private(val str: String,
                        val number: Int,
                        val someVal: Any,
                        val someVal2: Any) {

  def this(str: String, number: Int) = this(str, number, initializeVal, initializeVal2)

  def copy(newStr: String = str, newNumber: Int = number) = {
    new BigObject(newStr, newNumber, someVal, someVal2)
  }

} 
```

用法：

```
val bigObj = new BigObject("hello", 42)
val anotherBigObj = bigObj.copy(newStr = "anotherStr") 
```

# ruby-on-rails - ruby on rails - 具有不同进程 ID 的延迟作业更新同一列

> ID：15568017
> 
> 赞同：1
> 
> 时间：2013-03-22T10:25:12.837
> 
> 标签：ruby-on-rails, sql-update, multiprocess

我发现了这个问题，它与锁无关。似乎在生产中，我有一个工作：工作永久运行，这被称为我不知道如何！因此，该进程处理的所有作业都会在其他地方做某事！而且其他地方不是我的数据库，所以我只是将其杀死，一切都开始正常工作。

对不起，浪费你的时间！！

* * *

对不起，忘了告诉我正在使用 rails 2.3.8！

我对来自不同后台进程的同一行、同一列进行了异步更新。我正在使用delayed_jobs gem。

我想做的是：

```
ActiveRecord::Base.connection.execute(
"Update table_name set column = column + #{updated_number}
where id = #{self.id}"). 
```

我的数据库是mysql，我写的表是InnoDB。

所以问题是，在不同的delayed_jobs 中运行该查询会导致一些数据增量丢失。请注意 (column = column + #{updated_number}) 我想增加表上的当前值！

使用 rails lock 不起作用，因为每个延迟的作业都在不同的进程中运行，我想更像是表是否有一些锁可以安全地进行更新。

还有一件事，使用锁！，在我的开发代码中，我运行了 3 次 rake 作业：工作，然后我在 delay_job 表上确认 3 个不同的进程锁定了 3 个作业，并且它是完美运行的开发代码。

但是，当将该代码投入生产时，它就不起作用了。增量数据的丢失仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:35:07.867

使用[悲观锁定](http://apidock.com/rails/v3.2.8/ActiveRecord/Locking/Pessimistic/with_lock)：

```
your_object.with_lock do
  your_object.column += updated_number
  your_object.save!
end 
```

这将确保更新通过数据库同步。

# codeigniter - CodeIgniter - 我无法更新表中的行

> ID：15568024
> 
> 赞同：0
> 
> 时间：2013-03-22T10:25:43.073
> 
> 标签：codeigniter

我找不到更新表格中一行的正确方法。

我的观点：

```
...
<?php echo form_open('ImenikController/verify_editing_phonebook/'.$this->uri->segment(3)); ?>
Ime i prezime*:
<input type='text' name='ime_prezime' value=""> <br><br>
    Ulica i broj: <input type='text' name='ulica' value="">  <br><br>
    Mesto:        <input type='text' name='mesto' value="">  <br><br>
    Telefon*:     <input type='text' name='telefon' value=""> <br><br>

    <u>Napomena: Polja sa zvezdicom su obavezna.</u> <br /> <br />
    <input background:url('images/login-btn.png') no-repeat; border: none; 
      width='103' height='42' style='margin-left:90px;'  type='submit' value='Izmeni'>
<?php echo form_close(); ?>
... 
```

我的控制器：

```
function verify_editing_phonebook()
{
    if ($this->session->userdata('logged_in'))
    {
        if ($this->session->userdata('admin') == 1)
        {

            $this->form_validation->set_rules('ime_prezime', 'Ime i prezime', 'trim|required|xss_clean');               
            $this->form_validation->set_rules('telefon', 'Telefon', 'trim|required|xss_clean');

            if ($this->form_validation->run() == TRUE)
            {
                $id = $this->uri->segment(3);
                if (isset($id) and $id > 0)
                {
                    $this->load->model('LoginModel');
                    $this->LoginModel->edit_phonebook($id);

                    redirect(site_url().'ImenikController/', 'refresh');
                }
            }
            else {
                $temp = $this->session->userdata('logged_in');
                $obj['id'] = $temp['id'];
                $data['records'] = $this->LoginModel->get_Username($obj);
                $this->load->view('ErrorEditing', $data);

            }
        }
        else {
            $this->load->view('restricted_admin');
        }
    }
    else {
        $this->load->view('restricted');
    }
} 
```

我的模型：

```
function edit_phonebook($id)
    {
        $data = array ('ime_prezime' => $this->input->post('ime_prezime'), 
            'ulica' => $this->input->post('ulica'),
            'mesto' => $this->input->post('mesto'),
            'telefon' => $this->input->post('telefon'));

       $this->db->where('id', $id);
     $this->db->update('pregled', $data);        
    } 
```

该解决方案不起作用。我得到了网址：localhost/imenik114/ImenikController/verify_editing_phonebook

这是一个空白（白色）页面。并且不编辑表格中的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:34:35.577

**基本调试策略**

(1) 您是否创建了所有视图文件？

(2) 您是否`edit_phonebook($id)`独立测试过？

(3)`redirect(site_url().'ImenikController/', 'refresh');`显示什么？您是否为 定义了索引函数`ImenikController`？

(4) 当您说“该解决方案不起作用”时，您使用了哪个 URL。?

(5) 如果您的 URL 是：“localhost/imenik114/ImenikController/verify_editing_phonebook”，您没有在`id`第三段中输入

(6) 如果你没有登录，你看到正确的`restricted`视图了吗？

(7) 如果您已登录而不是管理员，您是否看到正确的`restricted_admin`视图？

**潜在错误**

查看代码的这一部分：

```
 if ($this->form_validation->run() == TRUE)
        {
            $id = $this->uri->segment(3);
            if (isset($id) and $id > 0)
            {
                $this->load->model('LoginModel');
                $this->LoginModel->edit_phonebook($id);

                redirect(site_url().'ImenikController/', 'refresh');
            }
            // You need to handle the case of $id not set
            else
            {
              // load a view with error page saying $id is missing...
            }
        } 
```

如果您的表单验证，并且您没有传入`segment(3)`，您的控制器将不会加载视图，因此，您将获得一个空白页面。

您需要检查`$id`不存在的情况，请参阅代码。

**代码修复**

更多细节：该语句`$id = $this->uri->segment(3);`将设置`$id`为`id`number 或`FALSE`，因此，您的 if 语句中不需要`isset($id)`。我会写`$id = $this->uri->segment(3,0);`将默认设置为`0`而不是`FALSE`让逻辑更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:07:04.713

感谢您的回答，但我以某种方式解决了我的问题。我在我的视图中做了一个链接：

```
<a href="<?php echo site_url(). 'Controller/edit/'.$row->id; ?>" title="">Edit</a> 
```

并考虑编辑：

```
<?php echo form_open('Controller/verify_editing_phonebook/'.$this->uri->segment(3)); ?> 
```

函数 verify_editing_phonebook 通过了验证和加载视图。

再次感谢并为我的英语感到抱歉...

# symfony-2.2 - 我正在尝试使用 Sonata Admin Bundle 安装 Symfony 2.2，但我从 Composer 收到以下错误：

> ID：15568028
> 
> 赞同：2
> 
> 时间：2013-03-22T10:25:54.240
> 
> 标签：symfony-2.2

使用包信息加载作曲家存储库更新依赖项（包括 require-dev）您的需求无法解析为可安装的包集。

问题 1 - 在任何版本中都找不到请求的包 sonata-project/admin-bundle，包名可能有拼写错误。问题 2 - 在任何版本中都找不到请求的包 sonata-project/doctrine-orm-admin-bundle，包名可能有拼写错误。问题 3 - 在任何版本中都找不到请求的包 sonata-project/user-bundle，包名可能有拼写错误。

代码作曲家.json

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",
        "sonata-project/admin-bundle": "*",
        "sonata-project/cache-bundle": "*",
        "sonata-project/doctrine-orm-admin-bundle": "*",
        "stof/doctrine-extensions-bundle": "1.1.x-dev",
        "sonata-project/user-bundle": "*",
        "sonata-project/easy-extends-bundle": "*",
        "friendsofsymfony/user-bundle": "*",
        "friendsofsymfony/jsrouting-bundle": "*",
        "liip/imagine-bundle": "*",
        "simplethings/form-extra-bundle": "dev-master",
        "antimattr/google-bundle": "dev-master",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        "genemu/form-bundle": "2.1.*",
        "behat/behat": "2.4.*@stable",
        "behat/mink": "1.4.*@stable",
        "behat/symfony2-extension": "*@stable",
        "behat/mink-extension": "*@stable",
        "behat/mink-selenium2-driver": "*@stable",
        "behat/mink-browserkit-driver": "*",
        "liip/functional-test-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "alpha",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "branch-alias": {
        "dev-master": "2.2-dev"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:31:46.097

您需要指定“dev-master”并添加“Bock-Bundle”依赖项。

只是改变

```
"sonata-project/admin-bundle": "", 
```

至

```
"sonata-project/block-bundle": "dev-master",
"sonata-project/admin-bundle": "dev-master", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:35:40.820

在你的 composer.json 中试试这个：

"sonata-project/admin-bundle": "dev-master",
"sonata-project/cache-bundle": "2.1\. *",
"sonata-project/doctrine-orm-admin -bundle”：“dev-master”，
“knplabs/knp-menu-bundle”：“1.1.-* dev ”，
“sonata-project/block-bundle”：“dev-master”

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T15:52:06.427

在将 Symfony 2.2 与 Sonata Admin Generator 和 FOS User Bundle 一起使用时，我遇到了非常相似的问题。

这是我在无数小时的依赖相关头痛之后创建的配置文件。使用此配置的“composer update”运行没有任何问题。

* * *

*作曲家.json*

```
....    
"require": {
            "php": ">=5.3.3",
            "symfony/symfony": "2.2.*",
            "doctrine/orm": "~2.2,>=2.2.3",
            "doctrine/doctrine-bundle": "1.2.*",
            "twig/extensions": "1.0.*",
            "symfony/assetic-bundle": "2.1.*",
            "symfony/swiftmailer-bundle": "2.2.*",
            "symfony/monolog-bundle": "2.2.*",
            "sensio/distribution-bundle": "2.2.*",
            "sensio/framework-extra-bundle": "2.2.*",
            "sensio/generator-bundle": "2.2.*",
            "jms/security-extra-bundle": "1.4.*",
            "jms/di-extra-bundle": "1.3.*",
            "symfony/console": "2.2.*@dev",
            "doctrine/doctrine-fixtures-bundle": "dev-master",
            "doctrine/data-fixtures" : "dev-master",
            "friendsofsymfony/user-bundle": "*",
            "doctrine/doctrine-migrations-bundle": "dev-master",
            "doctrine/migrations": "dev-master",
            "sonata-project/admin-bundle": "dev-master",
            "sonata-project/doctrine-orm-admin-bundle": "dev-master",
            "sonata-project/intl-bundle": "2.1.*",
            "sonata-project/cache-bundle": "2.*",
            "sonata-project/block-bundle": "2.2.*@dev",
            "simplethings/entity-audit-bundle": "dev-master",
            "knplabs/knp-menu-bundle":"1.1.x-dev"
        },
....
  "minimum-stability": "alpha", 
```

* * *

*应用内核.php*

```
 public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Doctrine\Bundle\MigrationsBundle\DoctrineMigrationsBundle(),
            new Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new FOS\UserBundle\FOSUserBundle(),
            new Sonata\BlockBundle\SonataBlockBundle(),
            new Sonata\jQueryBundle\SonatajQueryBundle(),
            new Sonata\AdminBundle\SonataAdminBundle(),
            new Sonata\DoctrineORMAdminBundle\SonataDoctrineORMAdminBundle(),
            new SimpleThings\EntityAudit\SimpleThingsEntityAuditBundle(),
            new Knp\Bundle\MenuBundle\KnpMenuBundle(),
        ); 
```

* * *

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:13:11.493

您没有看到“sonata-project/doctrine-orm-admin-bundle dev-master 需要 knplabs/knp-menu-bundle 1.1.x-dev”错误？

# solr - Solr 复制定期启动

> ID：15568030
> 
> 赞同：0
> 
> 时间：2013-03-22T10:25:58.267
> 
> 标签：solr

solr 在什么条件下从头开始复制，我们注意到在我们的主从设置中，solr 会定期从头开始复制整个索引。

尽管触发了完整的复制获取，但我们尚未对架构或配置文件进行任何更改。如何避免这种情况。

问候， 阿尤什

# sql - 显示不一致结果的 UNION 语句

> ID：15568031
> 
> 赞同：0
> 
> 时间：2013-03-22T10:26:01.603
> 
> 标签：sql, oracle

我有一个 SQL 查询，它由两个联合在一起的 SELECT 语句组成。当它们单独运行时，第一个 SELECT 返回 10 条记录，第二个 SELECT 返回 1 条记录，所以当我联合这两个 SELECT 时，我希望返回 11 条记录，但事实并非如此，我只得到 9 条记录。

由于 SQL 的性质，我实际上无法在此处发布它，但它包含跨 5 个表的大量 JOINS。返回的所有内容都是正确和有效的。

只是想知道是否有人在 UNION'ing 两个 SELECT 语句时看到过这个问题，以及是否有人对可能是什么原因有任何建议，甚至可以为我指明正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:31:15.260

[UNION](http://dev.mysql.com/doc/refman/5.6/en/union.html)默认删除重复项。为防止删除重复项，应使用[UNION ALL 。](http://dev.mysql.com/doc/refman/5.6/en/union.html)

引用文档：

> UNION 的默认行为是从结果中删除重复的行。可选的 DISTINCT 关键字除了默认值之外没有任何作用，因为它还指定重复行删除。使用可选的 ALL 关键字，不会发生重复行删除，结果包括所有 SELECT 语句中的所有匹配行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:30:07.363

默认情况下，Oracle 将隐式 distinct 子句应用于联合的结果。您可能需要检查单独查询的结果是否包含常见项目。

如果您不希望出现这种行为，则需要改用 UNION ALL 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:30:11.160

尝试使用`UNION ALL`而不是仅`UNION`. UNION 只返回不同的行。[看看这个](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)。

# php - Symfony2 Form 具有一对一关系的实体集合

> ID：15568035
> 
> 赞同：0
> 
> 时间：2013-03-22T10:26:16.553
> 
> 标签：php, symfony, doctrine-orm, twig, symfony-forms

您是否遇到过表单包含包含一对一关系的实体集合的情况？

我有一个有很多地址的实体，每个地址都与其他实体一对一的关系。显示保存的数据时出现问题，因为当我使用

```
{% for address in form.clubAddress %}
<div class="entry grid_9">
    <div class="grid_12">
        {{ form_widget(address.street) }}
        {{ form_widget(address.geoInfo.street) }}
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
</div>
{% endfor %} 
```

它仅显示最后一个 geoInfo 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T08:54:02.830

如果有人感兴趣，问题出在

```
form_widget() 
```

每个一对一的元素都有相同的 id，所以 form_widget 只显示一次。我做了一个宏来解决这个问题。

# html - onclick改变div颜色填充的百分比

> ID：15568043
> 
> 赞同：0
> 
> 时间：2013-03-22T10:26:40.023
> 
> 标签：html, colors, onclick

我正在创建一个交互式调查，并有一个包含 div，以 2 种颜色显示用户回答（同意/不同意）的百分比。我要求 div 根据用户的回答改变 %。

如何使用 onClick 实现这一点？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:38:42.707

如果您创建一个包含 2 个元素（同意和不同意）的容器 div，您可以动态更改它们的宽度。通过连接一个 onclick 事件来调整它，你应该能够得到你需要的结果：

```
$(".vote-agree-button").click(function() {
    $(".agree").width($(".agree").width() + 1);
    $(".disagree").width($(".disagree").width() - 1);    
});

$(".vote-disagree-button").click(function() {
    $(".agree").width($(".agree").width() - 1);
    $(".disagree").width($(".disagree").width() + 1); 
}); 
```

工作的 JSFiddle 示例：http: [//jsfiddle.net/d8QLa/](http://jsfiddle.net/d8QLa/)

# symfony - symfony2 特殊路由通配符没有别的

> ID：15568044
> 
> 赞同：2
> 
> 时间：2013-03-22T10:26:41.550
> 
> 标签：symfony, match, routes

问题：

需要有这样的网址：

```
wall:
pattern:  /{username}/ 
```

但是.. 它**匹配每个 url**，如 /Messages/、/Settings/

唯一想到的解决方案是检查该用户是否存在......以及是否没有重定向到真实的 /Settings ？但它为每一页选择一个，我不喜欢它。

还有其他方法吗？+ 我可能还需要拒绝使用路由模式注册用户？如何？

**不，我不想添加到** /User/{username} 之类的 URL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:04:47.417

根据我的评论，这可能是一种解决方法：

```
pages:
    pattern: /{page}/
    requirements:
        page: "(Messages|Settings|SomeOtherPage|YetAnotherPage)"
wall:
    pattern:  /{username}/ 
```

基本上，它要求页面（设置、消息等）以大写字母 ([AZ]) 开头，页面名称的其余部分并不重要。

至于用户个人资料页面，它们应该明确地以小写字符 ([az]) 开头。

不知道能不能满足你的要求……

**编辑：**

这实际上是@tomas.pecserke 的简化解决方案。我刚刚编辑了路由，因此所有页面都在单个路由中枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:00:25.150

我强烈建议不要使用这种方法。您应该明确地为路线添加前缀。但是如果一定要这样的话，可以先指定其他路由。RouteMatcher 选择与模式匹配的第一个路由。

```
# src/Acme/DemoBundle/Resources/routing.yml
account:
    pattern: /account
    defaults: # ...
some_other_route:
    pattern: /some_other_route
    defaults: # ...
wall:
    pattern: /{username}/
    defaults: # ...
    # you can set requirements
    requirements:
        username: [a-z0-9]+ # regular expression 
```

# php - 通过链接的 api 获取基本个人资料和电子邮件地址

> ID：15568045
> 
> 赞同：1
> 
> 时间：2013-03-22T10:26:42.050
> 
> 标签：php, linkedin

我在我的网站中用 php 整合了linkedin。当用户单击“与linkedin 连接”按钮时。用户被重定向到linkedin 登录页面。当用户登录时，它被重定向到我定义的页面。问题是如何在用户登录后检索用户的基本个人资料和电子邮件地址。我参考了此链接以获取帮助 [http://developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication)

这是我重定向到linkedin授权页面的代码：

header('位置：'。' [https://www.linkedin.com/uas/oauth2/authorization?response_type=code&&client_id=1ba8ogpm9e05&scope=r_basicprofile%20r_emailaddress&state=STATE&redirect_uri=http://127.0.0.1/linkedin/test.php](https://www.linkedin.com/uas/oauth2/authorization?response_type=code&&client_id=1ba8ogpm9e05&scope=r_basicprofile%20r_emailaddress&state=STATE&redirect_uri=http://127.0.0.1/linkedin/test.php) ' );

在这个 url 中，redirect_uri 是授权后重定向用户的页面。那么如何检索用户基本资料和电子邮件地址呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:39:18.787

我在 ZF2 中实现了linkedin api。

请设置回调 url，如linkedIn api 的访问权限和密钥。

```
$content = $linkedInObject->getProfile("~:(id,first-name,last-name,headline,picture-url)");
$profile = $this->objectToArray($content); 

/*

public $base_url = "http://api.linkedin.com";
public $secure_base_url = "https://api.linkedin.com";
public $oauth_callback = "oob";

*/
function getProfile($resource = "~")
    {
            $profile_url = $this->base_url . "/v1/people/" . $resource;
            $request = OAuthRequest::from_consumer_and_token($this->consumer, $this->access_token, "GET", $profile_url);
            $request->sign_request($this->signature_method, $this->consumer, $this->access_token);
            $auth_header = $request->to_header("https://api.linkedin.com"); # this is the realm

            $response = $this->httpRequest($profile_url, $auth_header, "GET");
            return $response;
    } 
```

// 为 ZF2 修改，但在你的情况下 [http://api.linkedin.com/v1/people/~:(id,first-name,last-name,headline,picture-url)](http://api.linkedin.com/v1/people/~:(id,first-name,last-name,headline,picture-url))

现在你可以得到 $profile['first-name'] 的名字。

谢谢

# android - 从 URL 下载 xml 作为 Inputstream 的最佳方法

> ID：15568047
> 
> 赞同：0
> 
> 时间：2013-03-22T10:26:43.963
> 
> 标签：android

我的代码如下，用于从 url 下载 xml 内容，这在 wifi 网络中下载需要更多时间，我的 xml 只有 29.2kb。我对此使用 AsyncTask。

```
InputStream getInputStreamForUrl(String url) {
        BufferedHttpEntity bufferedEntity = null;
        InputStream is = null;
        try {
            bufferedEntity = download(url);
            if (bufferedEntity != null) {
                is = bufferedEntity.getContent();
                if (is != null) {
                    BufferedReader feedReader = new BufferedReader(new InputStreamReader(is, Utility.UTF_ENCODING),
                            16 * 1024);
                    Utility.cacheFeed(feedReader, url);
                }
            }
        } catch (NetworkNotAccessable e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                if (bufferedEntity != null) {
                    bufferedEntity.consumeContent();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return (url != null) ? Utility.getInputStreamForCache(url) : null;
    } 
```

我使用 HttpGet 请求的下载（url）方法如下：

```
public BufferedHttpEntity download(String url)
            throws ClientProtocolException, IOException, 
                    IllegalStateException, NetworkNotAccessable {
        HttpGet get = new HttpGet(url);
        HttpResponse response = mDefaultHttpClient.execute(get);
        int status = response.getStatusLine().getStatusCode();
        if (status != 200) {
            throw new NetworkNotAccessable(url + "error code:" + status);
        }   
        HttpEntity entity = response.getEntity();           
        BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);      

        while (bufHttpEntity.isStreaming()) {
            try {
                bufHttpEntity.wait(500);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        return bufHttpEntity;
    } 
```

请让我知道是否有任何最好的方法来压缩整个 url 并下载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:59:10.470

如果您说实际下载是在“下载（url）”方法中发生的，那么恐怕我看不到这种情况发生，下载方法也是从 getInputStream 方法调用的，您返回的输入流看不到任何原因那...

还有你为什么要使用 bufHttpEntity.wait(500); 这是一个阻塞状态（可能导致严重延迟）

在您的下载方法中使用以下代码来检索 xml：

```
 URL url = new URL(url);
       HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
       try {
         InputStream in = new BufferedInputStream(urlConnection.getInputStream());
         byte buffer[] = new byte[4096];

         int count;
         String xmlData = "";
         while( (count = in.read(buffer)) != -1){
           xmlData += new String(buffer, 0, count);
       } finally {
         urlConnection.disconnect();
       }

             Log.d(TAG, " Data: " + xmlData ); 
```

# playframework - 播放框架 Ebean BigDecimal 分数

> ID：15568048
> 
> 赞同：6
> 
> 时间：2013-03-22T10:26:44.277
> 
> 标签：playframework, h2, ebean

我正在使用带有 Ebean 和 H2 数据库的 Play Framework。

问题是，`BigDecimal`数据库脚本中的结果为：

```
 sum                       decimal(38), 
```

但我想要的是：

```
 sum                       decimal(38,2), 
```

我已经尝试像这样定义模型中的值：

```
 @Digits(integer=6, fraction=2)
    private BigDecimal sum; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T10:05:45.487

您应该使用**@Column(precision = 38, scale = 2)**注释。@Digits 注释似乎是用于验证目的，而不是用于 DDL 生成。

38 看起来也有点矫枉过正。你要把所有的钱都存起来吗？:)

# php - 如何添加一个函数来替换 php 中的 preg_replace？

> ID：15568052
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:26:50.197
> 
> 标签：php, function, preg-replace

这似乎工作正常：

```
function findImageTags($string) {       
    $pattern = '/<div(.*?)sourcefile="([^"]+)"(.*?)>(.*?)<\/div>/s';
    return preg_replace($pattern, $this->generateImage("$2"), $string);
}

function generateImage($url){
    return $url;
} 
```

但是当在 generateImage 函数中我尝试对参数做一些我不能做的事情时，因为参数的值是 $2 而不是实际值。

所以这不起作用：

```
function generateImage($url){
    $array = explode('.', $url);
    return $array;
} 
```

顺便说一下，在模式中用 e 替换 s 似乎不起作用，因为我认为它已被弃用。

那么如何在 generateImage() 中操作参数的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:30:40.947

你想要的可能是[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)而不是`preg_replace`. 在这里，您可以使用返回替换值的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:30:11.210

你现在编码的方式，`$this->generateImage("$2")`代码在你调用的那一刻被执行`preg_replace`。它不是作为回调传递，而是首先执行，输出作为回调传递。

如果要执行该函数，则必须将 PHP 代码作为字符串传递，并使用`e`修饰符（[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)了解更多信息）。

```
return preg_replace($pattern, '$this->generateImage("$2")', $string); 
```

或者[`preg_replace_callback()`](http://www.php.net/manual/en/function.preg-replace-callback.php)当然使用。

# java - 如何全局更改 JTable 行高？

> ID：15568054
> 
> 赞同：6
> 
> 时间：2013-03-22T10:26:58.380
> 
> 标签：java, swing, jtable, nimbus

我正在使用 Nimbus L&F。我正在尝试使用以下代码全局更改所有 JTable 的字体大小：

```
NimbusLookAndFeel nimbus = new NimbusLookAndFeel();
UIManager.setLookAndFeel(nimbus);
UIDefaults d = nimbus.getDefaults();
d.put("Table.font", new FontUIResource(new Font("SansSerif", Font.PLAIN, 18))); 
```

它正在工作，应用程序中所有 JTable 的行都使用新字体。我正在使用更大的字体大小以使表格在大分辨率下更具可读性。

但问题是行高没有改变，导致字体被截断。我试过以下代码：

```
d.put("Table.contentMargins", new Insets(50,50,50,50));
d.put("Table:\"Table.cellRenderer\".contentMargins", new Insets(50,50,50,50)); 
```

但它并没有改变显示的表格中的任何内容。

我可以在不调用`setRowHeight()`每个 JTable 实例的情况下全局更改行高吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T11:00:01.260

基本上，没有任何意图。BasicTableUI 中的相关[代码注释](https://github.com/openjdk/jdk/blob/c8b6cfbdc53dd0b58f05f234bfa46c9d4b709e88/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableUI.java#L1436-L1442)：

```
// JTable's original row height is 16\.  To correctly display the
// contents on Linux we should have set it to 18, Windows 19 and
// Solaris 20\.  As these values vary so much it's too hard to
// be backward compatable and try to update the row height, we're
// therefor NOT going to adjust the row height based on font.  If the
// developer changes the font, it's there responsability to update
// the row height. 
```

从好的方面来说，像 fi Nimbus 这样的一些 LAF 尊重 rowHeight 的 ui 属性：

```
UIManager.put("Table.font", new FontUIResource(new Font("SansSerif", Font.PLAIN, 28)));
// here simply the font height, need to do better 
int height = 28;
UIManager.put("Table.rowHeight", height); 
```

# spring - UserDetailsS ervice 实现中的 RollbackException 并且无法提交 JPA 事务（休眠）

> ID：15568056
> 
> 赞同：0
> 
> 时间：2013-03-22T10:27:08.953
> 
> 标签：spring, hibernate, jpa, spring-mvc, spring-security

我已经被这个问题困扰了一段时间，我需要你的帮助。我会尽量提供尽可能多的细节，并会根据需要进行编辑。

我正在尝试在 Spring 安全性的自定义 UserDetailsS​​ervice 中的数据库中创建用户。场景是：当用户登录我的应用程序时，如果用户存在，我会检查我的数据库；如果不存在，我会调用 Web 服务来检查该用户是否存在并导入他的所有信息，以便将它们保存到我自己的数据库中并授予他对 Web 应用程序的访问权限。

我可以从数据库中读取信息（SELECT 查询），但是如果没有得到以下（美丽的）错误，我就无法进行任何插入：

```
org.springframework.security.authentication.AuthenticationServiceException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction
org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:85) 
```

在应用程序的其他部分（一旦经过身份验证），我可以使用来自控制器的任何服务。插入+选择工作正常。

关于我的配置，我有以下文件： spring security config (Spring security context) is in "applicationContext-security.xml" spring beans (Root Context) in "applicationContext.xml" spring mvc (DispatcherServlet) in webmvc-config.xml和一个 applicationContext-jpa.xml + persistence.xml

UserDetailsS​​ervice 的实现：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
public class CustomUserDetailsService implements UserDetailsService {

    @PersistenceContext
    private EntityManager em;

    [...Other Declarations...]

    @Autowired
    private userService userService;

    @Override
    public UserDetails loadUserByUsername(String login) throws UsernameNotFoundException {
        User user = null; //extends spring security UserDetails 

            //If I try to find existing users in database here, it works perfectly
        User user = userService.findUserByLogin(login);

        List<GrantedAuthority> authorities = ...
        Set<String> permissions = ...

        if(user == null){
             //Call webservice and get User if exists => newUser

           //Save in user table
                userService.saveUser(newUser);  
               //No error here, I can even try a userService.findUser(newUser.getId()); and I get the results. the commit is after returning the UserDetails from this method.

             //I also tried the following solution... the entitymanager is well Autowired and I can access everything as usual
           //   em.getTransaction().begin();  // => Throw here 'nested exception is java.lang.IllegalStateException: Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead'
           //   em.persist(operator); 
           //   em.getTransaction().commit();
           //   em.close();
                    user = newUser

            }
            else{
                      //Other things
            }

        }
        return user;  //if I tried a saveUser, commit is done after the return and the exception is thrown
    }
} 
```

我在类和方法本身上尝试了 @Transactional 的所有组合。

现在所有的配置文件[只有配置文件的有用部分]

网页.xml：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
  </context-param>
  <listener>
     <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
  </listener>
  <listener>
     <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>myApp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

应用上下文.xml：

```
<context:spring-configured/>

<context:component-scan base-package="com.company.myApp">
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan>

<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="minEvictableIdleTimeMillis" value="1800000"/>
    <property name="validationQuery" value="SELECT 1 FROM DUAL"/>
</bean>

<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

我的事务管理器处于模式 =“aspectj”（我试过没有它，代理）我的所有 Aspectj 库都运行良好。加载时编织等等。我还在我的应用程序中使用 *.aj 文件。我还尝试在我的 customUserDetailsS​​ervice 类上添加一个 aop:advisor

applicationContext-security.xml：

```
<beans:beans xmlns="http://www.springframework.org/schema/security" 
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd" profile="local,dev,int">
    <global-method-security pre-post-annotations="enabled">
        <expression-handler ref="expressionHandler"/>
    </global-method-security>
    <!-- HTTP security configurations -->
    <http auto-config="true" use-expressions="true">
        <expression-handler ref="webExpressionHandler"/>
        <form-login login-processing-url="/resources/j_spring_security_check" login-page="/login" authentication-failure-url="/login?login_error=t" />
        <logout logout-url="/resources/j_spring_security_logout" />
        <!-- Configure these elements to secure URIs in your application -->
        <intercept-url pattern="/resources/**" access="permitAll" />
        <intercept-url pattern="/login/**" access="permitAll" />
        <intercept-url pattern="/**" access="isAuthenticated()" />
        <session-management session-fixation-protection="migrateSession">
            <concurrency-control max-sessions="1"/>
        </session-management>
        <x509 subject-principal-regex="CN=[^,]* ([^,]*),.*$" user-service-ref="customUserDetailsService"  />
        <logout delete-cookies="JSESSIONID" />
    </http>
    <!-- Configure Authentication mechanism -->
    <authentication-manager alias="authenticationManager">
        <!-- SHA-256 values can be produced using 'echo -n your_desired_password | sha256sum' (using normal *nix environments) -->
        <authentication-provider  user-service-ref="customUserDetailsService">
            <password-encoder hash="sha-256" />
        </authentication-provider>
    </authentication-manager>    
</beans:beans> 
```

applicationContext-jpa.xml 只有基本的存储库声明：

```
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.springframework.org/schema/data/jpa"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

      <repositories base-package="com.company.myApp.common.repository" />

</beans> 
```

webmvc-config 有 context:component-scan 用于控制器和其他仅适用于 webapp 的东西。with`<aop:aspectj-autoproxy/>`和其他 aop:advisors。

我正在测试嵌入在 Eclipse STS 中的 ApacheTomcat 服务

编辑：完整的堆栈跟踪：

```
Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction
org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:85)
org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:132)
org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:174)
org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:194)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:88)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:615)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:409)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:49:48.210

我终于找到了解决方案......这是一个愚蠢的错误，但我接近解决方案。上面的配置其实很好。RootContext 和 SecurityContext 共享事务和 bean。

通过从实体管理器手动调用persist() 方法而不开始事务，给了我另一个堆栈跟踪。问题实际上是 JSR303 验证失败......（来自网络服务的错误 RegExp）

因此，对于将来的使用，如果您想将“数据源”共享给 Spring SecurityContext，则此配置（在问题中）有效。为了从我的问题中获取堆栈跟踪，我使用了以下内容：

```
 em.persist(user); 
   em.flush();  
   em.close(); 
```

无论如何，谢谢你的帮助:)

# directx - 只有u轴变化时的高效像素着色器？

> ID：15568080
> 
> 赞同：0
> 
> 时间：2013-03-22T10:28:38.693
> 
> 标签：directx, directx-11, pixel-shader

我正在编写一个像素着色器，它具有以下属性：对于给定的四边形，返回的值仅因 u 轴值而异。即对于固定的 u，颜色输出随着 v 的变化而保持不变。

计算像素颜色的计算相对昂贵 - 即每个像素/循环等多个样本。

有没有办法利用 v-invariance 属性？如果我在 CPU 上执行此操作，那么您显然只会缓存计算后的值，但猜测由于并行性而这并不适用。我可以将纹理生成移到 CPU 端并让着色器访问 Texture1D，但我不确定这会有多快。

在 GPU 卡上是否有适合这种情况的范例？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:36:41.177

将数据存储在 1D 纹理中并在像素着色器中对其进行采样看起来是一个不错的解决方案。您的 GPU 将能够使用纹理缓存功能，允许它利用许多像素使用 1D 纹理中的相同值这一事实。这应该非常快，纹理获取和缓存是您的 gpu 在渲染方面如此高效的主要原因之一。

通常的做法是在计算像素着色器中的值或使用查找表纹理之间进行权衡。您正在通过它的声音进行复杂的计算，因此使用查找纹理肯定会提高性能。

请注意，您仍然可以通过 GPU 生成此纹理，无需将其移动到 CPU。只需使用您现有的着色器代码作为 prepass 渲染到这个 1D 纹理。

# ios - 在 ABAddressBookSave 上获取 EXC_BAD_ACCESS

> ID：15568087
> 
> 赞同：2
> 
> 时间：2013-03-22T10:29:04.953
> 
> 标签：ios, iphone, exc-bad-access, addressbook

我正在使用以下代码从我的通讯录中删除联系人。（在 iOS 5.0 上）。但它每次都给我 EXC_BAD_ACCESS `ABAddressBookSave(addressBook, NULL);`。我选择了 NSZombieEnalbeld，但它仍然没有给我明确的错误。

```
ABAddressBookRef addressBook = ABAddressBookCreate();
 CFErrorRef error = NULL;

 ABRecordRef person = ABAddressBookCopyArrayOfAllSources(addressBook);

 BOOL success = ABAddressBookRemoveRecord(addressBook, person, &error);

 if (success)
 {
     BOOL su = ABAddressBookSave(addressBook, NULL);
     NSLog(@"Removed ----");
 }
 CFRelease(addressBook); 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:12:46.407

问题在于这一行：

```
ABRecordRef person = ABAddressBookCopyArrayOfAllSources(addressBook); 
```

[`ABAddressBookCopyArrayOfAllSources`](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABSourceRef_iPhoneOS/Reference/reference.html)返回一个`CFArray`而**不是**一个`ABRecord`

如果你想从通讯录中删除一个人，你需要得到它的参考，如：

```
ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook, recordID); 
```

其中recordID，您要删除的人的ID（您需要获取它）。

关于如何从通讯录中获取人的更多信息，您可以查看[此 SO 响应](https://stackoverflow.com/a/10627147/312312)

# eclipse - Eclipse 文本编辑器中的多个装饰器列

> ID：15568093
> 
> 赞同：2
> 
> 时间：2013-03-22T10:29:20.413
> 
> 标签：eclipse, breakpoints, multiple-columns, text-editor

有没有办法在 Eclipse 编辑器中为装饰器添加多个列。例如，同一行上的断点和搜索箭头不能相互配合。

![在此处输入图像描述](../Images/d5bf2444d73348997e4151eb0881ea1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:07:35.987

假设您是 Eclipse 插件开发人员，您可以使用[扩展点](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_workbench_texteditor_rulerColumns.html)[添加新列。](https://stackoverflow.com/questions/11082933/eclipse-editor-show-markers-on-custom-column-of-vertical-ruler)

但是，您不能以 Eclipse 用户的身份更改它。

# django - Django dynamodb 集成资源未找到异常

> ID：15568098
> 
> 赞同：2
> 
> 时间：2013-03-22T10:29:28.263
> 
> 标签：django, amazon-dynamodb

首先，我是 django 和`dynamodb`. 我按照[https://github.com/gtaylor/django-dynamodb-sessions](https://github.com/gtaylor/django-dynamodb-sessions)链接并尝试将 django 与 DynamoDB 集成以创建 api 。

我确保 AWS 密钥正确，并且可以使用 python 和 boto 连接表，但仍然在服务器上运行时出现错误；

```
 "DynamoDBResponseError: 400 Bad Request
{'message': 'Requested resource not found: Table: employee not found', '__type': 'com.amazonaws.dynamodb.v20111205#ResourceNotFoundException'}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:34:59.260

我发现它是我自己的，当我连接该区域时，我的数据库连接到一个区域，它工作正常.. :)

# jquery - 如何在 jQuery 选择器中添加变量

> ID：15568099
> 
> 赞同：6
> 
> 时间：2013-03-22T10:29:29.380
> 
> 标签：jquery

再会

我想在 jQuery 选择器中添加一个变量，但语法错误：

```
var c = $(this).attr('class');

            if ($('#articleThumb ul li img').hasClass(c)) {
                $('#articleThumb ul li img.'+c').clone().appendTo('#articleFeatured');
            } 
```

班上

**img.class**是一个变量，而不是像**img.birds**这样的常量......

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T10:30:32.843

您的报价已关闭，请注意后面的流浪者`c`。它应该是：

```
$('#articleThumb ul li img.' + c) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:30:45.960

您可以简单地将变量与选择器字符串连接起来。删除选择器中 c 末尾多余的单引号。

*改变*

```
 $('#articleThumb ul li img.'+c') 
```

*到*

```
$('#articleThumb ul li img.' + c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T10:31:00.813

看起来你正在添加一个额外的`'`

```
$('#articleThumb ul li img.' + c) 
```

# c++ - boost::asio::io_service 运行方法阻塞/解除阻塞时感到困惑

> ID：15568100
> 
> 赞同：99
> 
> 时间：2013-03-22T10:29:34.560
> 
> 标签：c++, boost-asio

作为 Boost.Asio 的初学者，我对[`io_service::run()`](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/io_service/run/overload1.html). 如果有人可以在此方法阻止/解除阻止时向我解释，我将不胜感激。文件指出：

> 该`run()`函数会阻塞，直到所有工作完成并且没有更多的处理程序要分派，或者直到`io_service`停止。
> 
> 多个线程可以调用该`run()`函数来建立一个线程池，`io_service`可以从中执行处理程序。在池中等待的所有线程都是等效的，`io_service`可以选择其中任何一个来调用处理程序。
> 
> 正常退出`run()`函数意味着`io_service`对象已停止（`stopped()`函数返回 true）。后续调用`run()`,或将立即返回`run_one()`，除非之前调用过。`poll()``poll_one()``reset()`

以下陈述是什么意思？

> [...] 不再派发处理程序 [...]

* * *

在试图理解 的行为时`io_service::run()`，我遇到了这个[示例](http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio/?pg=4)（示例 3a）。在其中，我观察到`io_service->run()`阻塞并等待工作指令。

```
// WorkerThread invines io_service->run()
void WorkerThread(boost::shared_ptr<boost::asio::io_service> io_service);
void CalculateFib(size_t);

boost::shared_ptr<boost::asio::io_service> io_service(
    new boost::asio::io_service);
boost::shared_ptr<boost::asio::io_service::work> work(
   new boost::asio::io_service::work(*io_service));

// ...

boost::thread_group worker_threads;
for(int x = 0; x < 2; ++x)
{
  worker_threads.create_thread(boost::bind(&WorkerThread, io_service));
}

io_service->post( boost::bind(CalculateFib, 3));
io_service->post( boost::bind(CalculateFib, 4));
io_service->post( boost::bind(CalculateFib, 5));

work.reset();
worker_threads.join_all(); 
```

但是，在我正在处理的以下代码中，客户端使用 TCP/IP 进行连接，并且 run 方法会阻塞，直到异步接收到数据。

```
typedef boost::asio::ip::tcp tcp;
boost::shared_ptr<boost::asio::io_service> io_service(
    new boost::asio::io_service);
boost::shared_ptr<tcp::socket> socket(new tcp::socket(*io_service));

// Connect to 127.0.0.1:9100.
tcp::resolver resolver(*io_service);
tcp::resolver::query query("127.0.0.1", 
                           boost::lexical_cast< std::string >(9100));
tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
socket->connect(endpoint_iterator->endpoint());

// Just blocks here until a message is received.
socket->async_receive(boost::asio::buffer(buf_client, 3000), 0,
                      ClientReceiveEvent);
io_service->run();

// Write response.
boost::system::error_code ignored_error;
std::cout << "Sending message \n";
boost::asio::write(*socket, boost::asio::buffer("some data"), ignored_error); 
```

`run()`在下面的两个示例中描述其行为的任何解释都将受到赞赏。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-03-22T16:48:01.787

## 基础

让我们从一个简化的示例开始，并检查相关的 Boost.Asio 部分：

```
void handle_async_receive(...) { ... }
void print() { ... }

...  

boost::asio::io_service io_service;
boost::asio::ip::tcp::socket socket(io_service);

...

io_service.post(&print);                             // 1
socket.connect(endpoint);                            // 2
socket.async_receive(buffer, &handle_async_receive); // 3
io_service.post(&print);                             // 4
io_service.run();                                    // 5 
```

### 什么是*处理程序*？

*处理程序*只不过是一个回调。在示例代码中，有 3 个处理程序：

*   处理程序( `print`1)。
*   处理程序( `handle_async_receive`3)。
*   处理程序( `print`4)。

即使同一个`print()`函数被使用了两次，每次使用都被认为是创建自己的唯一可识别的处理程序。处理程序可以有多种形状和大小，从上面的基本函数到更复杂的构造，例如从函数`boost::bind()`和 lambda 生成的函数。不管复杂性如何，处理程序仍然只是一个回调。

### 什么是*工作*？

工作是 Boost.Asio 被要求代表应用程序代码执行的一些处理。有时 Boost.Asio 可能会在被告知后立即开始一些工作，而有时它可能会等待稍后的时间点完成工作。一旦完成工作，Boost.Asio 将通过调用提供的*处理*程序来通知应用程序。

Boost.Asio 保证*处理程序*只会在当前调用`run()`、`run_one()`、`poll()`或的线程中运行`poll_one()`。这些线程将工作并调用*处理程序*。因此，在上面的示例中，`print()`当它发布到`io_service`(1) 中时不会调用。相反，它被添加到`io_service`并且将在稍后的时间点被调用。在这种情况下，它在`io_service.run()`（5）之内。

### 什么是异步操作？

[异步操作](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/asynchronous_operations.html)创建工作，Boost.Asio将调用*处理程序*以在工作完成时通知应用程序。异步操作是通过调用一个名称带有前缀的函数来创建的`async_`。这些函数也称为*启动函数*。

异步操作可以分解为三个独特的步骤：

*   启动或通知相关联`io_service`的工作需要完成。`async_receive`操作 (3) 通知它`io_service`需要从套接字异步读取数据，然后`async_receive`立即返回。
*   做实际工作。在这种情况下，当`socket`接收到数据时，字节将被读取并复制到`buffer`. 实际工作将在以下任一方面完成：
    *   启动函数（3），如果Boost.Asio可以确定它不会阻塞。
    *   当应用程序显式运行时`io_service`(5)。
*   调用`handle_async_receive` [ReadHandler](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/ReadHandler.html)。再一次，*处理程序*只在运行`io_service`. 因此，无论何时完成工作（3 或 5），都保证`handle_async_receive()`只会在`io_service.run()`（5）内调用。

这三个步骤在时间和空间上的分离称为控制流倒置。这是使异步编程变得困难的复杂性之一。但是，有一些技术可以帮助缓解这种情况，例如使用[协程](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/overview/core/spawn.html)。

### 做什么`io_service.run()`？

当线程调用时，将从该线程中调用`io_service.run()`工作和*处理程序。*在上面的例子中，`io_service.run()`(5) 将阻塞直到：

*   它已从两个`print`处理程序调用并返回，接收操作以成功或失败完成，并且其`handle_async_receive`处理程序已被调用并返回。
*   通过`io_service`明确停止[`io_service::stop()`](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/io_service/stop.html)。
*   从处理程序中引发异常。

一种潜在的伪流可以描述如下：

```
创建 io_service
创建套接字
将打印处理程序添加到 io_service (1)
等待套接字连接 (2)
向io_service添加异步读工作请求（3）
将打印处理程序添加到 io_service (4)
运行 io_service (5)
  有工作或处理程序吗？
    是的，有 1 个工作和 2 个处理程序
      socket有数据吗？不，什么都不做
      运行打印处理程序 (1)
  有工作或处理程序吗？
    是的，有 1 个工作和 1 个处理程序
      socket有数据吗？不，什么都不做
      运行打印处理程序 (4)
  有工作或处理程序吗？
    是的，有 1 件作品
      socket有数据吗？不，继续等待
  -- 套接字接收数据 --
      套接字有数据，将其读入缓冲区
      将 handle_async_receive 处理程序添加到 io_service
  有工作或处理程序吗？
    是的，有 1 个处理程序
      运行 handle_async_receive 处理程序 (3)
  有工作或处理程序吗？
    否，将 io_service 设置为已停止并返回
```

请注意，当读取完成时，它如何将另一个*处理程序*添加到`io_service`. 这个微妙的细节是异步编程的一个重要特征。它允许将*处理程序*链接在一起。例如，如果`handle_async_receive`没有得到它期望的所有数据，那么它的实现可能会发布另一个异步读取操作，从而导致`io_service`更多的工作，因此不会从`io_service.run()`.

请注意，当`io_service`已用完工作时，应用程序必须[`reset()`](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/io_service/reset.html)在`io_service`再次运行之前。

* * *

## 示例问题和示例 3a 代码

现在，让我们检查问题中引用的两段代码。

### 问题代码

`socket->async_receive`将工作添加到`io_service`. 因此，`io_service->run()`将阻塞直到读取操作以成功或错误完成，并且`ClientReceiveEvent`已经完成运行或引发异常。

### [示例 3a](http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio/?pg=4)代码

为了使其更容易理解，这里有一个较小的注释示例 3a：

```
void CalculateFib(std::size_t n);

int main()
{
  boost::asio::io_service io_service;
  boost::optional<boost::asio::io_service::work> work =       // '. 1
      boost::in_place(boost::ref(io_service));                // .'

  boost::thread_group worker_threads;                         // -.
  for(int x = 0; x < 2; ++x)                                  //   :
  {                                                           //   '.
    worker_threads.create_thread(                             //     :- 2
      boost::bind(&boost::asio::io_service::run, &io_service) //   .'
    );                                                        //   :
  }                                                           // -'

  io_service.post(boost::bind(CalculateFib, 3));              // '.
  io_service.post(boost::bind(CalculateFib, 4));              //   :- 3
  io_service.post(boost::bind(CalculateFib, 5));              // .'

  work = boost::none;                                         // 4
  worker_threads.join_all();                                  // 5
} 
```

概括地说，程序将创建 2 个线程来处理`io_service`的事件循环 (2)。这会产生一个简单的线程池，用于计算斐波那契数 (3)。

问题代码和此代码之间的一个主要区别在于，此代码在实际工作*之前*`io_service::run()`调用(2) ，并将处理程序添加到(3)。为了防止立即返回，创建了一个对象 (1)。此对象可防止工作结束；因此，不会因为没有工作而返回。*`io_service``io_service::run()`[`io_service::work`](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/reference/io_service__work.html)`io_service``io_service::run()`*

 *整体流程如下：

1.  创建并添加`io_service::work`添加到`io_service`.
2.  创建的线程池调用`io_service::run()`. 这些工作线程不会`io_service`因为`io_service::work`对象而返回。
3.  将 3 个计算斐波那契数的处理程序添加到`io_service`, 并立即返回。工作线程，而不是主线程，可能会立即开始运行这些处理程序。
4.  删除`io_service::work`对象。
5.  等待工作线程完成运行。这只会在所有 3 个处理程序都完成执行后才会发生，因为它们`io_service`既没有处理程序也没有工作。

代码可以以与原始代码相同的方式以不同的方式编写，其中将处理程序添加到`io_service`，然后`io_service`处理事件循环。这消除了使用的需要`io_service::work`，并产生以下代码：

```
int main()
{
  boost::asio::io_service io_service;

  io_service.post(boost::bind(CalculateFib, 3));              // '.
  io_service.post(boost::bind(CalculateFib, 4));              //   :- 3
  io_service.post(boost::bind(CalculateFib, 5));              // .'

  boost::thread_group worker_threads;                         // -.
  for(int x = 0; x < 2; ++x)                                  //   :
  {                                                           //   '.
    worker_threads.create_thread(                             //     :- 2
      boost::bind(&boost::asio::io_service::run, &io_service) //   .'
    );                                                        //   :
  }                                                           // -'
  worker_threads.join_all();                                  // 5
} 
```

* * *

## 同步与异步

尽管问题中的代码使用了异步操作，但它实际上是同步运行的，因为它正在等待异步操作完成：

```
socket.async_receive(buffer, handler)
io_service.run(); 
```

相当于：

```
boost::asio::error_code error;
std::size_t bytes_transferred = socket.receive(buffer, 0, error);
handler(error, bytes_transferred); 
```

作为一般经验法则，尽量避免混合同步和异步操作。很多时候，它可以把一个复杂的系统变成一个复杂的系统。这个[答案](https://stackoverflow.com/a/5291002/1053968)突出了异步编程的优点，其中一些也包含在 Boost.Asio[文档](http://www.boost.org/doc/libs/1_56_0/doc/html/boost_asio/overview/core/async.html)中。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-22T10:40:28.200

为了简化如何`run`做，将其视为必须处理一堆纸的员工；它需要一张纸，按照纸上说的做，把纸扔掉，然后拿下一张；当他的床单用完时，它就离开了办公室。每张纸上都可以有任何类型的说明，甚至可以添加一张新纸。回到 asio：您可以通过`io_service`两种方式赋予作品，本质上是：通过`post`在您链接的示例中使用它，或者通过使用内部调用`post`的其他对象`io_service`，如 the`socket`及其`async_*`方法。*

# android-activity - 单击虚拟设备中的按钮时出现问题

> ID：15568109
> 
> 赞同：1
> 
> 时间：2013-03-22T10:29:57.897
> 
> 标签：android-activity

我正在尝试创建一个包含 3 页信息的应用程序。

我的最终目标是创建 3 个按钮，当单击按钮时，应该打开该活动的相关布局。

我在 manifest.xml 和 3 个不同的布局和 3 个 java 类中创建了 3 个活动，并且编码全部完成。

现在，当我单击虚拟设备中的任何按钮时，我得到“不幸的是页面已停止”。

以下是 LogCat 文件：

> 03-22 03:45:40.971: D/dalvikvm(1158): GC_CONCURRENT freed 285K, 15% free 2581K/3012K, paused 37ms+13ms,总共237ms
> 
> 03-22 03:45:40.971: D/dalvikvm(1158): WAIT_FOR_CONCURRENT_GC 阻塞 101ms
> 
> 03-22 03:45:41.191：I/Choreographer(1158)：跳过 67 帧！应用程序可能在其主线程上做了太多工作。
> 
> 03-22 03:45:41.672: I/Choreographer(1158): 跳过 161 帧！应用程序可能在其主线程上做了太多工作。
> 
> 03-22 03:45:41.861: D/gralloc_goldfish(1158): 没有检测到 GPU 仿真的仿真器。
> 
> 03-22 03:46:05.892: D/AndroidRuntime(1158): 关闭 VM
> 
> 03-22 03:46:05.892: W/dalvikvm(1158): threadid=1: 线程以未捕获的异常退出 (group=0x40a71930)
> 
> 03-22 03:46:06.051：E/AndroidRuntime（1158）：致命异常：主要
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): java.lang.IllegalStateException: 无法执行活动的方法
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.view.View$1.onClick(View.java:3599)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.view.View.performClick(View.java:4204)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.view.View$PerformClick.run(View.java:17355)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.os.Handler.handleCallback(Handler.java:725)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.os.Looper.loop(Looper.java:137)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.ActivityThread.main(ActivityThread.java:5041)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): at dalvik.system.NativeStart.main(Native Method)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 由: java.lang.reflect.InvocationTargetException 引起
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.view.View$1.onClick(View.java:3594)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): ... 11 更多
> 
> 03-22 03:46:06.051：E/AndroidRuntime(1158)：原因：android.content.ActivityNotFoundException：找不到显式活动类 {com.example.page/com.example.page.Page3}；您是否在 AndroidManifest.xml 中声明了此活动？
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Activity.startActivityForResult(Activity.java:3370)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Activity.startActivityForResult(Activity.java:3331)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Activity.startActivity(Activity.java:3566)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 android.app.Activity.startActivity(Activity.java:3534)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): 在 com.example.page.PageActivity.onClickPage3(PageActivity.java:32)
> 
> 03-22 03:46:06.051: E/AndroidRuntime(1158): ... 14 更多
> 
> 03-22 03:51:06.541: I/Process(1158): 发送信号。PID：1158 SIG：9

# spring - 将 proxy-target-class="true" 与 Spring bean 一起使用

> ID：15568112
> 
> 赞同：27
> 
> 时间：2013-03-22T10:30:05.287
> 
> 标签：spring, jersey

我正在使用 Jersey Rest 并希望 Jersey 过滤器能够访问一些春豆。

但是，正如我从其他线程中发现的那样，如果它们是 Java 代理而不是生成的 Java 代理，Jersey 不会获得 Spring bean。我想添加 proxy-target-class="true"

这样做有什么影响，也可以只在单个 bean 上设置还是需要在所有引用的 bean 上设置？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-22T10:49:29.773

通过设置`proxy-target-class="true"`，您将使用`CGLIB2`您的代理，而不是 jdk 代理。

[如文档](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch08s06.html)中所述，含义如下：

> *   不能建议最终方法，因为它们不能被覆盖。
>     
>     
> *   您将需要类路径中的 CGLIB 2 二进制文件，而动态代理可用于 JDK。当 Spring 需要 CGLIB 并且在类路径中找不到 CGLIB 库类时，Spring 会自动警告您。
>     
>     
> *   代理对象的构造函数将被调用两次。这是 CGLIB 代理模型的自然结果，其中为每个代理对象生成一个子类。对于每个代理实例，都会创建两个对象：实际的代理对象和实现通知的子类的实例。使用 JDK 代理时不会出现此行为。通常，调用代理类型的构造函数两次不是问题，因为通常只有赋值发生，构造函数中没有实现真正的逻辑。

此外，您应该能够通过使用为特定组件制作“目标代理”

```
proxyMode=ScopedProxyMode.TARGET_CLASS 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-08-06T13:10:38.120

尽管控制器正式实现了接口（SpringBoot 1.2.3.RELEASE 和 Spring 4.1.6.RELEASE），但强制使用 CGLib-Proxy：

```
@Controller
@Scope( proxyMode = ScopedProxyMode.TARGET_CLASS )
public class ServiceImpl implements ServiceIntf
{ .... } 
```

这将启用有效且有效的 @RequestMapping 和 @Transactional 注释

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-27T13:11:54.267

在 Java Spring Config 类中使用以下注解：

> @EnableAspectJAutoProxy(proxyTargetClass = true)

# android - 同时设置 android:onClick 和 OnTouchListener

> ID：15568113
> 
> 赞同：2
> 
> 时间：2013-03-22T10:30:05.990
> 
> 标签：android, button

如何在同一个按钮上设置 android:onClick 方法和 OnTouchListener？我的应用程序真的需要这个。

我知道它们的区别，并且只使用 android:onClick 或 OnTouchListener 确实有效。一旦我尝试两者都做，只有 OnTouchListener 起作用。

对于不同布局中的不同功能，我需要它。

只是为了更好的理解。**使用 android:onClick 我的意思是您在 xml 文件中**分配此按钮的方法，例如 android:onClick="InitMethod"

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T11:01:36.703

是的，你可以在同一个按钮上同时使用 onClick 和 onTouch，但是 OnTouch 回调你会得到像 ACTION_MOVE、ACTION_UP、ACTION_DOWN 等的motionEvent，不要忘记在 onTouch 回调中返回 false ( [Details )。](http://developer.android.com/reference/android/view/View.OnTouchListener.html)请参考以下代码

```
Button button = (Button) findViewById(R.id.button);
        button.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                Log.d("test", "ontouch");
                return false;
            }
        });
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Log.d("test", "onclick");
            }

        }); 
```

只需分别在回调 onTouch 和 onClick 中做你想做的操作。请注意单击是用户按下按钮并释放时执行的操作，但当用户按下它时将进行触摸。

因此，单击一下，日志将是这样的。1.ACTION_DOWN, 2.ACTION_UP 3.点击

```
03-22 16:19:39.735: D/test(682): ontouch
03-22 16:19:39.735: D/test(682): ontouch
03-22 16:19:39.735: D/test(682): onclick 
```

# javascript - 如何排除模式中的 brs

> ID：15568120
> 
> 赞同：0
> 
> 时间：2013-03-22T10:30:21.947
> 
> 标签：javascript, regex

我有这种模式可以使 url 可点击，现在在我的文本中有`<br />`and `<BR />`，如果链接后跟 br，则模式包括`<br />`和`<BR />`在链接中，我怎样才能在这种模式中排除它们：

```
replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim; 
```

这是使用该模式的代码：

```
replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_blank">$1</a>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:55:30.240

**正则表达式模式**

```
(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])(?:<[bB][rR]\s?\/?>)* 
```

**替换模式**

```
<a href="$1" target="_blank">$1</a> 
```

**输入**

```
http://www.stackoverflow.com<br>
http://www.stackoverflow.com<br/>
http://www.stackoverflow.com<br />
http://www.stackoverflow.com<BR>
http://www.stackoverflow.com
http://www.stackoverflow.com<BR/>
http://www.stackoverflow.com<BR /> 
```

这是一个链接：[http ://regexr.com?3485d](http://regexr.com?3485d)

正则表达式将检查是否存在（可选）br-tag。如果没有，它只会匹配正常的 url。

# jquery - 转到课程链接

> ID：15568121
> 
> 赞同：0
> 
> 时间：2013-03-22T10:30:21.507
> 
> 标签：jquery, html, css

我正在使用灯箱图像查看器，我想在图像查看器上添加一个按钮，上面写着下载。当他们点击它时，他们将被带到一个外部链接。

Lightbox 已经使用了 href，所以我添加了一个类。

我只需要让它像

[http://www.websitetogo.com](http://www.websitetogo.com) = 一类

一个类=thisiswheretogo

location.href = 'thisiswheretogo' ;

对不起我的错误解释

**HTML**

```
<a href="img/image viewer/the-infinity.png" rel="lightbox" class="http://www.websitetogo.com" >...</a> 
```

**JavaScript**

```
 $lightbox.find('.download').on('click', function(e) {
     location.href = 'class' ;
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:32:58.030

[HTML 数据属性](http://ejohn.org/blog/html-5-data-attributes/)被认为是针对 DOM 存储任意数据的更好解决方案。以后可以通过以下方式检索此数据[`jQuery.data()`](http://api.jquery.com/data/)：

```
<a href="img/image viewer/the-infinity.png" rel="lightbox" data-external-link="http://www.google.com/">Image</a> 
```

```
$lightbox.find('.download').on('click', function(e) {
    window.location.href = $(this).data('external-link');
    return false;
}); 
```

灯箱插件本身可以通过利用数据属性进行改进：

```
<a href="viewer/the-infinity.png" data-media-type="img/image" data-external-link="http://www.google.com/" rel="lightbox">Image</a> 
```

# python - 如何在解析之前检查 XML 中是否存在属性和标签？

> ID：15568126
> 
> 赞同：42
> 
> 时间：2013-03-22T10:30:40.167
> 
> 标签：python, xml, parsing, conditional-statements, elementtree

我正在通过 python 中的元素树解析 XML 文件，并将内容写入 cpp 文件。

子标签的内容会因不同的标签而异。例如，第一个事件标签将派对标签作为子标签，但第二个事件标签没有。

-->如何在解析前检查标签是否存在？

-->儿童在第一个事件标签中具有值属性，但在第二个事件标签中没有。如何在获取属性值之前检查属性是否存在。

--> 目前我的代码为不存在的派对标签引发错误，并为第二个子标签设置“无”属性值。

```
<main>
  <event>
    <party>Big</party>
    <children type="me" value="3"/>
  </event>

  <event>
    <children type="me"/>
  </event>

</main> 
```

代码：

```
import xml.etree.ElementTree as ET
tree = ET.parse('party.xml')
root = tree.getroot()
for event in root.findall('event'):
    parties = event.find('party').text
    children = event.get('value') 
```

我想检查标签，然后取它们的值。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-22T10:33:17.127

如果标签不存在，则`.find()`确实返回`None`. 只需测试该值：

```
for event in root.findall('event'):
    party = event.find('party')
    if party is None:
        continue
    parties = party.text
    children = event.get('value') 
```

您已经使用`.get()`on event 来测试`value`该属性；`None`如果属性不存在，它也会返回。

属性存储在`.attrib`字典中，因此您也可以使用标准 Python 技术来显式测试属性：

```
if 'value' in event.attrib:
    # value attribute is present. 
```

# android - java.lang.IllegalStateException：活动已被销毁

> ID：15568128
> 
> 赞同：3
> 
> 时间：2013-03-22T10:30:43.450
> 
> 标签：android, robolectric

与 Robolectric 合作，我对 android 很陌生。我使用 Activity 创建了第一个测试类。它工作得很好。现在我想对片段进行测试。

```
@RunWith(RobolectricTestRunner.class)
public class LoginFragmentTest {
    private LoginFragment fragment;

    @Before
    public void setup() {
        fragment = new LoginFragment();
        startFragment(fragment);
        assertThat(fragment, notNullValue());
        assertThat(fragment.getActivity(), notNullValue());
    }

    private void startFragment(LoginFragment fragment) {
        FragmentManager fragmentManager = new FragmentActivity().getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(fragment, null);
        fragmentTransaction.commit();
    }

    @Test
    public void login() {
        EditText idEditText = (EditText)fragment.getActivity().findViewById(R.id.main_id);
        assertThat(idEditText, notNullValue());
    }
} 
```

这是我的第一个片段类测试类。它抛出

```
"java.lang.IllegalStateException: Activity has been destroyed" in startFragment#fragmentTransaction.commit(). 
```

任何人都知道如何解决这个问题？

[您可以从https://github.com/msbaek/frame-test](https://github.com/msbaek/frame-test)找到整个源代码

提前致谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T17:47:50.337

就我而言，具体来说，我的问题是在创建活动时。我正在使用

```
 activity = Robolectric.buildActivity(MyActivity.class).get(); 
```

它应该是

```
 activity = Robolectric.buildActivity(MyActivity.class).create().get(); 
```

希望它可以帮助某人：D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T07:33:25.303

```
@RunWith(RobolectricTestRunner.class)
public class LoginFragmentTest {
    private LoginFragment fragment;

    @Before
    public void setup() {
        fragment = new LoginFragment();
        startFragment();
        assertThat(fragment, notNullValue());
        assertThat(fragment.getActivity(), notNullValue());
    }

    private void startFragment() {
        FragmentActivity activity = new FragmentActivity();
        shadowOf(activity).callOnCreate(null);
        shadowOf(activity).callOnStart();
        shadowOf(activity).callOnResume();

        FragmentManager fragmentManager = activity.getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(fragment, null);
        fragmentTransaction.commit();
    }

    @Test
    public void login() {
        EditText idEditText = (EditText) fragment.getView().findViewById(R.id.main_id);
        assertThat(idEditText, notNullValue());
    }
} 
```

这是工作版本。以下 3 行很重要（它来自 robolectric 源 - DialogFragmentTest）。

```
 shadowOf(activity).callOnCreate(null);
        shadowOf(activity).callOnStart();
        shadowOf(activity).callOnResume(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T10:52:12.763

片段应该从活动中显示。流程应该是：

*   在 FragmentActivity 类中分配一个新的片段对象
*   让片段管理器添加新分配的片段

在您的情况下，您与实际活动没有联系。您使用 new FragmentActivity() 分配一个 FragmentActivity 并尝试获得支持经理。虽然这个编译没有“真正的”活动能够管理你的片段。可以在已经显示的活动上添加片段，但情况并非如此。

我建议阅读此页面，因为它很好地解释了这些事情：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-09T16:19:37.090

当我使用 fragmentTransaction.commitAllowingStateLoss(); 时，这发生在我身上。来自其父片段具有 setRetainInstance(true) 的子片段；我将活动作为财产，导致轮换活动泄漏。

# java - 具有单元格选择和多区间选择的 JTable 显示选择不正确

> ID：15568131
> 
> 赞同：0
> 
> 时间：2013-03-22T10:30:54.957
> 
> 标签：java, swing, jtable

我想要一个人们可以自由选择单元格的表格。

为此，我使用了 ListSelectionModel.MULTIPLE_INTERVAL_SELECTION 和*table.setCellSelectionEnabled(true)*。

我有两个问题：

*   方法*table.addRowSelectionInterval*不选择任何单元格
*   如果选择 2 个块，则选择了相同行和列的单元格也会被选中。例如选择 B2-D4 然后 F7。这也将选择 B7-D7 和 F2-F4。

这是重现这些问题的程序：

```
import java.awt.BorderLayout;
import javax.swing.*;

public class JTableCellSelection {
    public static void showDemo(JComponent demo, String title) {
        JFrame mainFrame = new JFrame();
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.setTitle(title);
        JPanel contentPanel = new JPanel(new BorderLayout());

        contentPanel.add(demo);

        mainFrame.add(contentPanel);
        mainFrame.pack();
        mainFrame.setVisible(true);
    }

    public static void main(String[] args) {
        JTable table = new JTable(10, 10);
        table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        table.setCellSelectionEnabled(true);
        table.addRowSelectionInterval(6, 7); // Select 2 lines
        showDemo(new JScrollPane(table), "Select a block and some rows");
    }
} 
```

感觉就像我必须自己检查选择，而不是依赖表格单元格渲染器的 isSelected。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:54:41.160

所以我在 JTable 中实现了它。

请注意，此解决方案有几个缺点：

*   您不能使用*table.getListSelectionModel*来选择行，您需要调用*table.addRowSelectionInterval*
*   尝试选择选定块旁边的另一列将取消选择行
*   我没有测试列选择，但我的猜测是它不起作用
*   选择块时改变方向并不总是有效

但对于其余部分，它几乎可以满足我的需求

```
/*
 * Copyright 2013 Japplis.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import java.awt.Point;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;
import javax.swing.JTable;
import javax.swing.table.TableModel;

/**
 * The JTable used to display data.
 * This class is only to fix bugs or improve existing functionalities.
 *
 * @author Anthony Goubard - Japplis
 */
public class SheetTable extends JTable {

    private Map<Integer, Set<Integer>> selectedCells = new HashMap<>();
    private Point firstExtendCell;

    public SheetTable(TableModel tableModel) {
        super(tableModel);
    }

    @Override
    public void changeSelection(int rowIndex, int columnIndex, boolean toggle, boolean extend) {
        if (toggle && isCellSelected(rowIndex, columnIndex) && !extend) {
            selectedCells.get(rowIndex).remove(columnIndex);
        } else {
            if (!toggle && !extend) {
                selectedCells.clear();
            }
            Set<Integer> selectedColumns = selectedCells.get(rowIndex);
            if (selectedColumns == null) {
                selectedColumns = new TreeSet<>();
                selectedCells.put(rowIndex, selectedColumns);
            }
            selectedColumns.add(columnIndex);
            if (!extend) {
                firstExtendCell = new Point(rowIndex, columnIndex);
            } else {
                for (int i = Math.min(firstExtendCell.x, rowIndex); i <= Math.max(firstExtendCell.x, rowIndex); i++) {
                    for (int j = Math.min(firstExtendCell.y, columnIndex); j <= Math.max(firstExtendCell.y, columnIndex); j++) {
                        selectedCells.get(i).add(j);
                    }
                }
            }
        }
        super.changeSelection(rowIndex, columnIndex, toggle, extend);
    }

    @Override
    public void addRowSelectionInterval(int index0, int index1) {
        for (int i = index0; i < index1; i++) {
            selectedCells.remove(i);
        }
        super.addRowSelectionInterval(index0, index1);
    }

    @Override
    public void removeRowSelectionInterval(int index0, int index1) {
        for (int i = index0; i < index1; i++) {
            selectedCells.remove(i);
        }
        super.removeRowSelectionInterval(index0, index1);
    }

    @Override
    public void selectAll() {
        selectedCells.clear();
        super.selectAll();
    }

    @Override
    public void clearSelection() {
        if (selectedCells != null) {
            selectedCells.clear();
        }
        super.clearSelection();
    }

    @Override
    public boolean isCellSelected(int row, int column) {
        if (!getSelectionModel().isSelectedIndex(row)) {
            return false;
        }
        if (getSelectionModel().isSelectedIndex(row) && selectedCells.get(row) == null) {
            return true;
        }
        return selectedCells.get(row).contains(column);
    }
} 
```

最后一个版本位于[bitbucket.org上的 Joeffice Mercurial 存储库中](https://bitbucket.org/agoubard/joeffice/src/f292ca49106fd03905997ac4362c8175507ad79c/Spreadsheet/src/org/joeffice/spreadsheet/SheetTable.java?at=default "比特桶")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:15:03.843

我做了一些实验，还阅读了[这里](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setCellSelectionEnabled%28boolean%29)的文档。它说`setCellSelectionEnabled()`方法：

设置此表是否允许列选择和行选择同时存在。*设置后，表格将行和列选择模型的交集视为选定单元格。*

我之前添加了两行代码用于调试目的，`showDemo()`以查看添加行间隔后选定的行和列是什么：

```
public static void main(String[] args) {
    JTable table = new JTable(10, 10);
    table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

    table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
    table.setCellSelectionEnabled(true);
    table.addRowSelectionInterval(6, 7); // Select 2 lines

    // Let's see what rows and columns have been selected 

    System.out.println("Rows: " + Arrays.toString(table.getSelectedRows()));
    System.out.print("Columns: " + Arrays.toString(table.getSelectedColumns()));

    showDemo(new JScrollPane(table), "Select a block and some rows");
} 
```

我得到了这个输出：

```
Rows: [6, 7]
Columns: [] 
```

这解释了为什么`addRowSelectionInterval`不能按预期工作。添加缺少的部分很容易：

```
 ...
    table.addRowSelectionInterval(6, 7); // Select 2 lines
    table.addColumnSelectionInterval(0, 9); // and Select ** ALL** the columns
    ... 
```

可以为其他观察做出类似的理由。

# java - 经常需要重建项目

> ID：15568132
> 
> 赞同：3
> 
> 时间：2013-03-22T10:30:56.530
> 
> 标签：java, compiler-errors, intellij-idea

有时当我在 IDEA12 中运行编译时，我会收到有关不存在 100 个错误的消息（似乎是最大显示错误）：例如 Blabla.java 找不到符号：Blabla1 类，但是当我在 IDE 中打开此文件时，我没有查看任何编译错误。为了消除这个错误，我应该重建项目，然后我没有得到上述错误。我在 IDEA11 中没有看到这样的错误。谁能解释我为什么会出现这个错误？

对不起我的英语不好。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:32:59.510

如果您删除`.class`文件，例如，如果您在 IDEA 外部运行一个干净的文件，就会发生这种情况。

即使清理是 ant/mvn 编译步骤的第一步，IDEA 似乎仍然会感到困惑，直到您运行重建。

# javascript - 无法将可编辑的单元格值放入数组

> ID：15568133
> 
> 赞同：0
> 
> 时间：2013-03-22T10:30:57.177
> 
> 标签：javascript, jquery, ajax, servlets, jqgrid

使用以下代码我可以获得网格值但无法获得可编辑的单元格值 -

```
 var rows= jQuery("#list").jqGrid('getRowData');
              var paras=new Array();
                for(var i=0;i<rows.length;i++)
                {
                    var row=rows[i];
                    paras.push($.param(row));
                }
                 for(var i=0;i < paras.length;i++){
                var pa1=paras[i];
                $.ajax({
                type: "POST",
                url: "JQGridServlet?action=arraydata&"+pa1, 
```

所以请建议我将可编辑的单元格值放入数组中？

# php - 如何使用 .htaccess 隐藏网页名称后的所有内容

> ID：15568134
> 
> 赞同：3
> 
> 时间：2013-03-22T10:30:59.260
> 
> 标签：php, .htaccess, url, mod-rewrite, get

当我进入我的站点和浏览其他站点时，我得到一个参数 more: etc .php?p=pagename&id=1

我想隐藏 .dk 之后的所有内容

我试过了：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9]+)$ index.php?p=$1 [L,QSA]
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?p=$1 [L,QSA]

RewriteRule ^/index.php$ http://www.madsweb.dk/ [R,NC,L] 
```

但这似乎不起作用。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:47:31.257

> RewriteRule ^/index.php$ [http://www.madsweb.dk/](http://www.madsweb.dk/) [R,NC,L]

重写工作反过来。您不会重写用户在其地址栏中看到的内容，而是将请求重写为另一个请求（如重定向，但在服务器上透明处理）。

这也是你在那里尝试做的事情是**不可能**的原因。

如果您喜欢 90 年代并且不关心可用性，则可以使用框架。

但除了笑话，最好建立在这条规则上，这已经很好了：

> 重写规则 ^([a-zA-Z0-9]+)$ index.php?p=$1 [L,QSA]

并将附加信息（`id`在本例中）放入模式中。例子：

```
RewriteRule ^([a-zA-Z0-9]+)/?$ index.php?p=$1 [L,QSA]
RewriteRule ^([a-zA-Z0-9]+)/([0-9]+)$ index.php?p=$1&id=$2 [L,QSA] 
```

或更通用（但仍然只有一个参数）：

```
RewriteRule ^([a-zA-Z0-9]+)/?$ index.php?p=$1 [L,QSA]
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([0-9]+)$ index.php?p=$1&$2=$3 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:37:25.757

> 我想隐藏 .dk 之后的所有内容

这是不可能的。mod_rewrite 不能消除对每个资源都有唯一 URL 的需要。

（如果你确实做到了，那么它会破坏链接，包括书签和搜索引擎）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-22T10:51:03.017

嘻嘻

试试

> $pathInfo = explode('/', trim($_SERVER['PATH_INFO'], '/'));
> $pagina = $pathInfo[0];
> $actie = $pathInfo[1]; RewriteRule ^([a-zA-Z0-9]+)/?$ index.php?p=$1 [L,QSA] RewriteRule ^([a-zA-Z0-9]+)/([0-9] +)$ index.php?p=$1&id=$2 [L,QSA]

或更通用（但仍然只有一个参数）：

```
RewriteRule ^([a-zA-Z0-9]+)/?$ index.php?p=$1 [L,QSA]
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([0-9]+)$ index.php?p=$1&$2=$3 [L,QSA] 
```

或者

list($pagina, $actie) = explode('/', trim($_SERVER['PATH_INFO'], '/'));

你也可以试试：

> 选项 +FollowSymLinks RewriteEngine On RewriteRule ^folder1/(.*)$ /Link. com/folder2/$1 [R=301,L]

# python - Python 数据库 API 中指定的连接对象的 __enter__ 和 __exit__ 行为？

> ID：15568137
> 
> 赞同：12
> 
> 时间：2013-03-22T10:31:16.463
> 
> 标签：python, database, api, mysql-python, specifications

# 背景

我最近发现了 Python`with`关键字，并开始看到它在更漂亮地处理一些我以前使用过`try: ... finally: ...`构造的场景方面的潜在用途。我立即决定在我正在编写的一些代码中对 MySQLdb 连接对象进行尝试。

我没有费心去阅读Python 数据库 API 的实现者的行为方式`__enter__`和`__exit__`行为方式，并且天真地期望这种行为类似于文件对象的行为——我所期望的只是 exit 调用`connection.close()`.

那么，想象一下我对这种行为的困惑：

```
>>> with util.get_db_connection() as conn:
...     print conn
... 
<MySQLdb.cursors.Cursor object at 0xb6ca8b4c> 
```

`get_db_connection()`返回一个 MySQLdb 连接对象，但该`__enter__`连接对象的方法返回一个游标对象，而不是我所期望的连接对象本身，因为文件对象的方式`__enter__`和`__exit__`工作方式。我想我应该这样做`with util.get_db_connection() as cursor:`，否则根本不使用`with`。

# 问题

这个发现立刻让我想知道一些事情：

1.  `__enter__`MySQLdb 连接对象的和方法还有什么`__exit__`作用？是否`__exit__`会在没有我明确要求的情况下为我神奇地提交或回滚更改？还有什么我应该知道的不明显的吗？
2.  这种行为在 Python 数据库 API 的其他实现者（如 sqlite3、django 或 psycopg2）中是否相同？
3.  这种行为在任何地方都有正式规定吗？`ctrl-f`为 'enter'、'exit' 和 'context manager' 制定最新规范（[PEP 249 -- Python Database API Specification v2.0](http://www.python.org/dev/peps/pep-0249/)）并没有抛出任何东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-22T10:38:43.977

Python DBAPI 在上下文管理器被添加到 Python 语言之前就已经编写好了。

因此，不同的数据库库*自己*决定如何实现上下文管理器支持（如果他们实现了它的话）。

*通常*将数据库用作上下文管理器会将您与事务联系起来。事务开始于`__enter__`，并于 提交或中止`__exit__`，具体取决于是否存在异常。因此，您应该在单独连接后使用 MySQL 连接作为上下文管理器：

```
connection = util.get_db_connection()

with connection as cursor:
    cursor.execute(...)

# connection commit is issued if no exceptions were raised. 
```

[`sqlite3`上下文管理器](http://docs.python.org/2/library/sqlite3.html#using-the-connection-as-a-context-manager)的实现略有不同；它还管理事务，但不从`__enter__`方法返回游标：

```
con = sqlite3.connect(":memory:")
with con:
    cursor = con.cursor()
    # or use the connection directly
    con.execute(...) 
```

从技术上讲，它只是返回`self`。`__enter__`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-14T11:05:55.133

请参阅`__enter__`此链接中的功能。 [https://github.com/PyMySQL/mysqlclient-python/blob/master/MySQLdb/connections.py](https://github.com/PyMySQL/mysqlclient-python/blob/master/MySQLdb/connections.py)

`__enter__`连接对象的函数返回`self.cursor()`。

这就是为什么你得到游标对象而不是 Connection 对象的原因。

# java - 如何使用.bash rc文件在linux中为java创建堆空间

> ID：15568139
> 
> 赞同：1
> 
> 时间：2013-03-22T10:31:18.733
> 
> 标签：java, linux, bash, heap-memory

在 linux 服务器中运行我的 java 代码时，我遇到了异常。java.lang.OutOfMemoryError：Java 堆空间

你能告诉我在linux服务器中克服的方法吗？

如何在 linux 服务器中使用 .bashrc 文件增加 java 堆空间？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T16:15:39.970

执行以下操作：

```
export _JAVA_OPTIONS="-Xmx10g" 
```

为了确保它正常工作，每当你运行一个 java 文件时，它应该输出： Picked up _JAVA_OPTIONS: -Xmx10g

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T10:33:43.550

我确定这已经被回答过，但是类似

```
export JAVA_OPTS=-Xmx1024m 
```

希望有帮助。

# javascript - 使用 Sinon Js 触发事件后调用的测试回调

> ID：15568140
> 
> 赞同：1
> 
> 时间：2013-03-22T10:31:22.867
> 
> 标签：javascript, events, sinon, spy

这是我第一次使用 Mocha/Sinon/Chai 对 Javacript 进行测试，我不知道是否可以这样做：

```
var obj = {
    first : function () {
        console.log('make job 1');
    }
};

var objManager = function() {
    $(document).on('event1', obj.first);
};

new objManager();

var spy = sinon.spy(obj, 'first');

describe('Test', function () {

    it('My first test', function () {
        $(document).trigger('event1');
        spy.should.not.have.been.called;
    });
}); 
```

我的间谍没有被调用，也不明白为什么......我的函数“obj.first”打印了“make job 1”。

如果我修改我的测试：

```
it('My first test', function () {
    obj.first();
    spy.should.not.have.been.called;
}); 
```

我的间谍被召唤了。所以我的问题是：如何让 sinon spy 与事件一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:26:11.253

问题是您首先将函数绑定到事件，然后将函数替换`obj`为间谍。这样做不会对绑定到事件的函数产生任何影响，因为这仍然是原始函数。

做测试，你必须在实例化你的`objManager`.

# wpf - 在嵌套的 Listview 中绑定所选项目时遇到问题

> ID：15568141
> 
> 赞同：1
> 
> 时间：2013-03-22T10:31:24.220
> 
> 标签：wpf, xaml, mvvm, windows-8, windows-store-apps

我目前使用嵌套在列表视图中的列表视图来以图形方式显示淘汰赛风格的锦标赛，由 SectionTreeOne 在 ViewModel 中备份，其中包含对象“TournamentNode”的列表列表。但是，当我单击它时，我无法绑定我选择的“锦标赛节点”。

```
 <Grid Grid.Row="2">
          <ListView ItemsSource="{Binding SectionTreeOne}">
                                <ListView.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <VirtualizingStackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>
                                <ListView.ItemTemplate >
                                    <DataTemplate>
                                        <ListView ItemsSource="{Binding}" SelectionMode="Single" 
                                                  SelectedItem="{Binding SelectedTournamentNode}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Name}" />
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid> 
```

C# 绑定：

收藏

```
public List<List<TournamentNodeModel>> SectionTreeOne
            {
                get { return _sectionTreeOne; }
                set
                {
                    _sectionTreeOne = value;
                    base.OnPropertyChanged("SectionTreeOne");
                }
            } 
```

选择项目：

```
public TournamentNodeModel SelectedTournamentNode
        {
            get { return _selectedTournamentNode; }
            set
            {
                if (value == _selectedTournamentNode)
                    return;

                _selectedTournamentNode = value;
                base.OnPropertyChanged("SelectedTournamentNode");
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:40:12.200

尝试使用以下绑定：

```
SelectedItem="{Binding SelectedTournamentNode, Mode=TwoWay}" 
```

请记住，WinRT 始终使用`OneWay`默认绑定模式，这与 WPF 不同，它会根据属性性质或可访问性自动选择绑定模式。

我在 WinRT 中使用的一个避免此类错误的好原则是始终明确指定绑定模式。

* * *

所以我终于弄清楚你装订的错误是什么。首先，`SelectedItem`绑定模式必须`TwoWay`明确设置为如上所述。

其次，嵌套列表绑定到列表中的内部列表`SectionTreeOne`，因此如果要绑定`SelectedItem`到视图模型上的属性，则必须使用命名元素将此属性重新绑定到`DataContext`父列表的。您实际上是在尝试绑定到内部列表上不存在的属性，而不是绑定到该属性所在的视图模型。

```
<ListView x:Name="listView" ItemsSource="{Binding SectionTreeOne}">
    ...
    <ListView.ItemTemplate >
        <DataTemplate>
            <ListView ItemsSource="{Binding}" SelectionMode="Single" 
                      SelectedItem="{Binding Path=DataContext.SelectedTournamentNode, ElementName=listView, Mode=TwoWay}">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" />
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

请阅读 Visual Studio 调试器输出，它包含有关绑定链中可能发生的绑定错误的非常有用的信息，特别是如果您绑定嵌套在另一个列表中的列表，它将为您省去很多麻烦！

# c# - 从 WSDL 文档生成代理类时出错

> ID：15568142
> 
> 赞同：0
> 
> 时间：2013-03-22T10:31:29.203
> 
> 标签：c#, class, proxy, wsdl

以下是 WSDL 文件，我无法为此 WSDL 文件生成代理类。

```
<?xml version ='1.0' encoding ='ISO-8859-1' ?>
<definitions name='SunesisService' targetNamespace='https://exg.sunesis.uk.net/'     xmlns:tns='https://exg.sunesis.uk.net/' xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC='http://schemas.xmlsoap.org/soap/encoding/' xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/' xmlns='http://schemas.xmlsoap.org/wsdl/' xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<wsdl:types>
    <xsd:schema targetNamespace="https://exg.sunesis.uk.net/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <xsd:element name="destinyXML">
            <xsd:complexType name="mimeXmlType" use="required">
                <xsd:sequence>
                    <xsd:any/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </xsd:schema>
</wsdl:types>

<message name='receiveILRRequest'>
    <part name='receiveILRRequest_username' type='xsd:string' />
    <part name='receiveILRRequest_password' type='xsd:string' />
    <part name='receiveILRRequest_destinyXMLFileName' type='xsd:string' />
    <part name='receiveILRRequest_destinyXML' type='mimeXmlType' />
</message>
<message name='receiveILRResponse'>
    <part name='receiveILRResponse_Result' type='xsd:string' />
</message>

<portType name='DestinyReceipt'>

    <operation name='acceptEXG'>
        <input message='tns:receiveILRRequest'/>
        <output message='tns:receiveILRResponse'/>
    </operation>

</portType>

<binding name='SunesisBinding' type='tns:DestinyReceipt'>
    <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http' />
    <operation name='acceptEXG'>
        <soap:operation soapAction='urn:localhost-catalog#acceptILR'/>
        <input>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/' />
        </input>
        <output>
            <soap:body use='encoded' namespace='urn:localhost-catalog' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/' />
        </output>
    </operation>
</binding>

<service name='SunesisService'>
    <port name='SunesisPort' binding='SunesisBinding'>
        <soap:address location='https://exg.sunesis.uk.net/module_soap/sunesis.php' />
    </port>
</service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:43:14.053

You must close your `definitions node` in the end of your document

try with this format

```
<definitions name='SunesisService' targetNamespace='https://exg.sunesis.uk.net/'     xmlns:tns='https://exg.sunesis.uk.net/' xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC='http://schemas.xmlsoap.org/soap/encoding/' xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/' xmlns='http://schemas.xmlsoap.org/wsdl/' xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">

        ..........

    <service name='SunesisService'>
        <port name='SunesisPort' binding='SunesisBinding'>
            <soap:address location='https://exg.sunesis.uk.net/module_soap/sunesis.php' />
        </port>
    </service>
</definitions> 
```

# c# - 用于选择目录然后删除其中所有文件的 SQL 查询 - C#

> ID：15568143
> 
> 赞同：0
> 
> 时间：2013-03-22T10:31:32.020
> 
> 标签：c#, sql, sql-server-2008, c#-4.0, .net

我需要删除目录中的所有文件（由于画廊脚本保留全尺寸图像但不使用它们！）。

我编写了一些代码，将查询转储到 DataTable 中，然后遍历记录。但是，当我介绍查找所有文件并删除它们的循环时，它似乎只针对第一个 SiteID 运行。应该至少有 350 个目录要扫描，但它只扫描第一个 SiteID（此 SiteID 内的所有模块）。

任何想法，因为我很难过！

```
private void frmMain_Load(object sender, EventArgs e)
{
    SqlConnection con = null;
    try
    {
        // Open connection to the database
        string ConnectionString = "server=(local);UID=x;PWD=y;database=mojoportal2";
        con = new SqlConnection(ConnectionString);
        con.Open();

        SqlDataAdapter da = new SqlDataAdapter();
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();

        da.SelectCommand = new SqlCommand(@"SELECT SiteID, ModuleID FROM mp_Modules where ModuleDefID = 16 ORDER By SiteID DESC", con);
        da.Fill(ds, "Sites");
        dt = ds.Tables["Sites"];

        foreach (DataRow dr in dt.Rows)
        {
            string SiteID = dr["SiteID"].ToString();
            string ModuleID = dr["ModuleID"].ToString();
            string directoryPath = @"E:\Website\" + SiteID + @"\media\GalleryImages\" + ModuleID + @"\FullSizeImages";

            MessageBox.Show("Deleting Files In " + directoryPath);

            string[] files = Directory.GetFiles(directoryPath);
            string[] dirs = Directory.GetDirectories(directoryPath);

            foreach (string file in files)
            {
                MessageBox.Show(file);
                //File.SetAttributes(file, FileAttributes.Normal);
                //File.Delete(file);
            }
        }
    }
    catch (Exception ex)
    {
        // Print error message
        MessageBox.Show(ex.Message);
    }
    finally
    {
        if (con.State == ConnectionState.Open)
            con.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:48:14.567

首先，我会在您填写完数据集后立即关闭您的连接字符串。我会在您的 DataTable 上进行“快速观察”，并确保您的所有数据都在那里。如果不是，则修改您的查询。

# android - 使用 Google Drive SDK v2 从 Android 应用撤消访问权限

> ID：15568144
> 
> 赞同：2
> 
> 时间：2013-03-22T10:31:34.470
> 
> 标签：android, google-drive-api

如何使用适用于 Android 的 Google Drive SDK v2 撤销授权而不是令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T18:32:01.623

请参阅此问题：[在哪里撤消在 Android 上授予的 Google API 权限？](https://stackoverflow.com/questions/8561525/where-to-revoke-google-api-permissions-granted-on-android)

请参阅“AndroidDev”的解决方案，我正在使用他的解决方案，它对我有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-24T00:30:36.277

撤销令牌和授权是一回事。去这里撤销它：

[https://accounts.google.com/b/0/IssuedAuthSubTokens](https://accounts.google.com/b/0/IssuedAuthSubTokens)

# c++ - c++中一个类可以拥有的最大成员数是多少

> ID：15568145
> 
> 赞同：6
> 
> 时间：2013-03-22T10:31:35.147
> 
> 标签：c++, class, member

请将此查询视为一个好奇的问题。

我只想知道一个类在 C++ 中可以拥有的成员数量是否有任何限制。希望会有一些最大允许数量，因为我猜在一种语言中一切都是有限的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T10:34:38.067

该值由每个实现定义。C++ 标准在附件 B 中推荐了一些最低支持数量：

> — 单个类中的数据成员 [16 384]。
> 
> [...]
> 
> — 直接和间接基类 [16 384]。
> 
> — 单个类的直接基类 [1 024]。
> 
> — 在单个类中声明的成员 [4 096]。
> 
> — 类中的最终覆盖虚函数，可访问或不可访问 [16 384]。
> 
> — 类的直接和间接虚基 [1 024]。
> 
> — 类的静态成员 [1 024]。

“在单个类中声明的成员”的最小值小于“在单个类中的数据成员”的最小值，因为类可以从其基类继承数据成员。

# java - 不等待输入java

> ID：15568147
> 
> 赞同：-2
> 
> 时间：2013-03-22T10:31:43.780
> 
> 标签：java, java.util.scanner

我有一个程序应该接受整数输入，根据输入输出一些字符，然后提示再次运行程序。例如

```
Please enter an integer --> 3

x

xx

xxx

xx

x

Do you want to run again? 
```

这是我的程序的代码：

```
import java.util.*;
public class CMIS242Assignment1Stars 
{
    public static void main(String[] args) 
    {
        String again;

       do //start of "run again" loop
        {
            System.out.print("Input a positive integer and press [ENTER]--> ");
            Scanner input = new Scanner(System.in);

            if (input.hasNextInt()) // check if input is parsable to an int
            {        
                int num = Integer.parseInt(input.next());

                if (num <= 0) //check if num is positive
                {
                    System.out.println(num + " is not a positive integer. Using +" + (num*-1) + " instead.");
                    num = num *= -1;
                }    
                String stars = new String(new char[num]).replace("\0", "*"); // create a string of '*' of length 'num'
                int forNum = num * 2;
                int flip = 0;

                for (int x = 0; x <= forNum ; x++)
                {
                    System.out.println(stars.substring(0,stars.length() - num)); //create substrings of variable length from 'stars'

                    if(num <= 0)
                    {
                        flip = 1;
                    }

                    if(flip == 0)
                    {
                        num--;
                    }
                    else
                    {
                        num++;
                    }
                }
            }           
            else 
            {
                System.out.println("ERROR: Please input a positive integer!");//error message if a non-integer is entered
            }

            System.out.print("Would you like to run again? [Yes / No] ");
            again = input.next();     
        }
        while(again.equalsIgnoreCase("yes") || again.equalsIgnoreCase("y")); // end of "run again" loop

        System.out.print("Good Bye!"); //exit message        
    }
} 
```

我认为问题在于确保正确输入的代码。如果输入了 int 或负 int，则程序可以完美运行，但是当输入非 int 作为输入时，程序不会等待“再次运行”提示。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:48:51.253

你需要稍微修正一下你的逻辑。

对您来说最简单的解决方案是修复您的 else 语句。

```
else 
{
  //Move scanner position.
  String badInput = input.next();
  System.out.println("ERROR: Please input a positive integer!");//error message if a non-integer is entered
} 
```

你检查`input.hasNextInt()`但它没有，控制台有一些不是整数的东西。当`hasNextInt()`您使用`hasNextInt()`. 为了解决这个问题，我们`input.next()`在 else 语句中使用了 a。

# jquery - WCF jQuery 发布数据不起作用

> ID：15568149
> 
> 赞同：0
> 
> 时间：2013-03-22T10:31:44.640
> 
> 标签：jquery, json, wcf, rest, cross-domain

我在使用 WCF 服务时遇到了一些问题：该服务应该与在另一台服务器上运行的 AJAX 客户端通信。所以，我有一个跨域问题。我搜索并工作了 2 天，但我没有找到一些解决方案，这很容易理解。

当我使用 Fiddler 时，它们可以与服务器通信，但只有在将 content-length 属性设置为零时。

GET 方法也可以工作，但 PUT 永远不会。

这是一些方向的代码：

# 服务器方法：

## 模型：

```
[DataContract]
public class Person
{
    [DataMember]
    private string id;
    [DataMember]
    private string name;

    public Person(string id, string name)
    {
       this.id = id;
       this.name = name;
    }

    public string Id { get; set; }
    public string Name { get; set; }

  } 
```

## 服务器接口和实现：

```
 [ServiceContract]
   interface IPersonService
   {
       ...

       [OperationContract]
       Person InsertPerson(Person person);
   }

 [AspNetCompatibilityRequirements(RequirementsMode=AspNetCompatibilityRequirementsMode.Allowed)]
 public class PersonService : IPersonService
 {

     [WebInvoke(UriTemplate = "/POST/PersonPost", Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    public Person InsertPerson(Person per)
    {
        Debug.WriteLine("InsertPerson");
        if (per == null)
        {
            return new Person("2", "null");
        }
        Debug.WriteLine("POST:[PersonId = {0} PersonName = {1}]", per.Id, per.Name);
         return new Person("1", "InsertPerson");
    } 
```

# 最后是客户

```
var person = '{"per":{';
                person = person + '"id":"' + '"abc123"' + '",'
                person = person + '"name":"' + '"john"' + '"'
                person = person + '}}';

                alert(person);
                $.support.cors = true;

                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "jsonp",
                    data: person,
                    processData: false,
                    crossDomain: true,
                    url: "http://localhost:59291/Person/POST/PersonPost",
                    success: function (data) {
                        alert("Post erfolgreich: ");

                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert("Fehler Post: Status " + xhr.status + " AntwortText " + xhr.responseText);
                    }
                }); 
```

有人能告诉我我该怎么做才能让它发挥作用：简而言之，当我使用我的 jQuery 方法时，目前我没有与服务器的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:33:46.987

首先你应该使用一个对象：

```
var myObject ={};
myObject.Id = '';
myObject.Name =''; 
```

并使用`JSON.stringify(myObject);`

可能想从您的 ajax 调用中删除它：`dataType: "jsonp",`您也可能想从这个问题[Cross domain ajax request](https://stackoverflow.com/questions/15477527/cross-domain-ajax-request)中检查问题。

```
 var person = {};
person.id ="abc123";
person.name ="aaaa";
var per = {};
per.per = person;

                $.support.cors = true;

                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(per),
                    dataType: "jsonp",
                    processData: false,
                    crossDomain: true,
                    url: "http://localhost:59291/Person/POST/PersonPost",
                    success: function (data) {
                        alert("Post erfolgreich: ");

                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert("Fehler Post: Status " + xhr.status + " AntwortText " + xhr.responseText);
                    }
                }); 
```

# scala - 如何在 scala 中实现 neo4j？

> ID：15568157
> 
> 赞同：2
> 
> 时间：2013-03-22T10:31:55.630
> 
> 标签：scala, neo4j

我计划在我的项目中实现 neo4j，并想使用 scala。谁能建议是否使用 neo4j-scala 包装器（[https://github.com/FaKod/neo4j-scala/](https://github.com/FaKod/neo4j-scala/)）或者我应该从头开始实施？

还有 Neo4j-scala 包装器的任何文档（并且还在寻找一些示例）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:51:13.623

这是[重复](https://stackoverflow.com/questions/15515865/using-neo4j-with-scala)的。我建议看看[gremlin-scala](https://github.com/mpollmeier/gremlin-scala)。免责声明：我是维护者；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:54:43.360

您还可以使用非常好的[https://github.com/wfreeman/AnormCypher 。](https://github.com/wfreeman/AnormCypher)

# android - 如何在 Android 应用程序中使用 Facebook 登录按钮获取 FB 用户 ID

> ID：15568159
> 
> 赞同：11
> 
> 时间：2013-03-22T10:32:09.920
> 
> 标签：android, facebook, facebook-android-sdk

我正在开发一个应用程序，我在其中使用`Facebook`来自 SDK 的登录按钮。我能够得到`access_token`用户，但我`userID`也想要。我几乎尝试了一切，但没有成功。我已经使用 facebook 教程来实现这一点。这是链接：[Facebook 登录按钮](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)

请帮助我`userID`从同一个登录按钮获取。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-03T17:21:43.370

使用 FB Profile 类的 getId 方法（Facebook SDK 4.0）。

```
 Profile profile = Profile.getCurrentProfile();
  System.out.println(profile.getFirstName());
  System.out.println(profile.getId()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-11T19:37:56.030

```
loginResult.getAccessToken().getUserId() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T12:48:22.820

登录成功后，需要调用以下代码。您可以获取带有 id 的登录用户详细信息作为响应。

```
Session session = Session.getActiveSession();
Request request = Request.newGraphPathRequest(session, "me", null);
com.facebook.Response response = Request.executeAndWait(request) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-01T05:28:29.990

您应该使用新的 facebook sdk 3.0 和

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
        if (Session.getActiveSession().isOpened()) {
            // Request user data and show the results
            Request.executeMeRequestAsync(Session.getActiveSession(), new Request.GraphUserCallback() {

                @Override
                public void onCompleted(GraphUser user, Response response) {
                    // TODO Auto-generated method stub
                    if (user != null) {
                        // Display the parsed user info
                        Log.v(TAG, "Response : " + response);
                        Log.v(TAG, "UserID : " + user.getId());
                        Log.v(TAG, "User FirstName : " + user.getFirstName());

                    }
                }

            });
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-14T10:12:38.053

根据使用已弃用 API 的 @Ketan Mehta ( [https://stackoverflow.com/a/17397931/624109](https://stackoverflow.com/a/17397931/624109) ) 的回答，您应该使用以下代码：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);

    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

    if (Session.getActiveSession().isOpened())
    {
        // Request user data and show the results
        Request.newMeRequest(Session.getActiveSession(), new GraphUserCallback()
        {
            @Override
            public void onCompleted(GraphUser user, Response response)
            {
                if (null != user)
                {
                    // Display the parsed user info
                    Log.v(TAG, "Response : " + response);
                    Log.v(TAG, "UserID : " + user.getId());
                    Log.v(TAG, "User FirstName : " + user.getFirstName());

                }
            }
        }).executeAsync();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-16T10:56:36.633

由于这些所有答案都是针对较旧的 SDK 的，因此对于 SDK 4.0，这里是代码

```
loginButton.registerCallback(callbackManager, new    FacebookCallback<LoginResult>() {
        @Override
        public void onSuccess(LoginResult loginResult) {
            // App code
            Profile profile = Profile.getCurrentProfile();

            Log.d("facebook",profile.getId());
        }

        @Override
        public void onCancel() {
            // App code
            Log.d("facebook","failed");
        }

        @Override
        public void onError(FacebookException exception) {
            // App code
            Log.d("facebook","failed");
        }
    }); 
```

我正在寻找同样的东西，看起来 Session 对象不再可访问，所以上面是获取用户配置文件和用户 ID 的新方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-22T10:42:03.997

Facebook 图形 API 允许您进行返回 JSON 的调用，您可以在 Android 中使用 JSONObject 解析它，如下面的代码所示。

```
JSONObject me = new JSONObject(fb.request("me"));
String id = me.getString("id"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-11T11:03:56.007

您可以使用以下代码获取用户 ID：

```
document.getElementById('status').innerHTML =
   'Welcome ' + response.name + '!' + "<br />"+
   'Your user ID is : ' + response.id; 
```

# c++ - C中多线程的串口编程

> ID：15568165
> 
> 赞同：0
> 
> 时间：2013-03-22T10:32:47.113
> 
> 标签：c++, linux, serial-port

我正在编写一个 gtk 应用程序（在 C++ 中）以通过串行端口与电机控制器进行通信。我正在使用 Linux Ubuntu 和 termios lib。我需要有关最佳解决方案的建议。所以这里是我的限制： 1- 当我发送请求时，控制器给我发回一条消息 2- 如果发生错误，控制器可以随时向我发送错误通知 3- 请求是 ANSII 字符串以 [CR 结尾] 4- 控制器答案是 ANSII 字符串以 [CR][NL] 结尾

由于（3）和（4），我认为在CANONICAL模式下配置串口是合适的。由于 GUI + (2)，我想到了多线程：一个在串口上写入用户请求的主线程和另一个读取控制器答案的无限线程。你认为这是个好主意吗？

第二个问题：如果我使用多线程，我希望能够在需要时写入数据，所以我必须找到一种方法来在写入过程中停止/休眠读取线程，也许可以使用 pthread_cond_wait。我对吗？我见过 poll 和 select 函数，但我不太了解它们，我不确定它们是否与规范模式兼容。

我开始使用多线程和串行端口。我在谷歌，论坛上阅读了很多东西......但是大量的信息对于初学者来说有点不知所措。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:07:27.883

将 GUI 与串行端口分开时要考虑的主要问题是延迟。您是否会执行任何会导致您需要在特定时间内轮询端口的操作，这对用户来说是显而易见的？如果您只是在进行请求/回复并且这些延迟非常低，您的用户可能不会注意到任何这些延迟。此外，接收这些异步错误消息也不会导致我想象的任何明显的延迟。除非您知道在 Init 消息或类似消息发送到控制器之后可能会有数秒延迟的事实，否则保持应用程序单线程可能会让您的生活变得更加简单。

另一方面，如果会有很大的延迟，或者你只想搞乱多线程，我会从一个执行所有 GUI 工作的线程和另一个处理所有串行 IO 的线程开始。在这两个线程之间使用消息传递或事件通知来协调您的活动，它应该非常简单。

# c# - SignalR 客户端默认后备传输

> ID：15568167
> 
> 赞同：6
> 
> 时间：2013-03-22T10:32:55.607
> 
> 标签：c#, signalr

对于使用 .Net Framework 4.0 连接到服务器的[SignalR 客户端（因此不支持 WebSockets 传输），这将是下一个后备传输？](https://github.com/SignalR/SignalR/wiki/SignalR-Client)

此外，如果有一个后备链，知道它会很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T16:56:17.867

从[https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/introduction-to-signalr#transports-and-fallbacks](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/introduction-to-signalr#transports-and-fallbacks)如果 WebSockets 不可用，则使用以下内容：

*   Server Sent Events，也称为EventSource（如果浏览器支持Server Sent Events，基本上是除了Internet Explorer之外的所有浏览器。）
*   Forever Frame（仅适用于 Internet Explorer）。Forever Frame 创建一个隐藏的 IFrame，该 IFrame 向未完成的服务器上的端点发出请求。然后服务器不断向客户端发送脚本，该脚本立即执行，提供从服务器到客户端的单向实时连接。从客户端到服务器的连接使用从服务器到客户端连接的单独连接，并且像标准 HTML 请求一样，为需要发送的每条数据创建一个新连接。
*   Ajax 长轮询。长轮询不会创建持久连接，而是使用保持打开状态的请求轮询服务器，直到服务器响应，此时连接关闭，并立即请求新连接。这可能会在连接重置时引入一些延迟。

更新：最新文档可在此处获得：[http ://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/introduction-to-signalr](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/introduction-to-signalr)

# ios - 用 CAGradientLayer 替换 CALayer 不起作用

> ID：15568170
> 
> 赞同：0
> 
> 时间：2013-03-22T10:33:05.703
> 
> 标签：ios, objective-c, calayer, quartz-core

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我想动态更改背景层：

```
#import <QuartzCore/QuartzCore.h>
@interface MyClass : UIView
{
@private
    CALayer* _gradientBackground;
} 
```

还有一些方法：

```
- (CALayer*)createLayerWithColor:(UIColor*)color
{
    CALayer* layer  = [CALayer layer];
    layer.frame = CGRectMake(NSLayerX, NSLayerY,
                                     NSLayerWidth, NSLayerHeight);
    layer.backgroundColor = [color CGColor];
    layer.cornerRadius = NSCornerRadius;

    return layer;
}
- (CAGradientLayer*)createLayerWithGradient:(UIColor*)startColor
                                   endColor:(UIColor*)endColor
{
    CAGradientLayer* gradientLayer  = [CAGradientLayer layer];
    gradientLayer.frame = CGRectMake(NSLayerX, NSLayerY,
                                     NSLayerWidth, NSLayerHeight);
    gradientLayer.colors =
        [NSArray arrayWithObjects:(id)[startColor CGColor],
                                  (id)[endColor CGColor], nil];
    gradientLayer.cornerRadius = NSCornerRadius;

    return gradientLayer;
}

- (void)changeBackgroundWithLayer:(CALayer*)newLayer
{
    if (_gradientBackground != nil)
        [_gradientBackground removeFromSuperlayer];

    _gradientBackground = newLayer;
    [self.layer insertSublayer:newLayer atIndex:0];
} 
```

我这样做是为了改变背景层：

```
[self changeBackgroundWithLayer:[self createLayerWithGradient:startColor endColor:endColor]]; 
```

有时这样：

```
[self changeBackgroundWithLayer:[self createLayerWithColor:newColor]]; 
```

我的做法是：第一个实心层，下一个渐变层，最后是实心层。

我也试过这段代码没有结果：

```
- (void)changeBackgroundWithLayer:(CALayer*)newLayer
{
    if (_gradientBackground != nil)
        [self.layer replaceSublayer:_gradientBackground with:newLayer];
    else
        [self.layer insertSublayer:newLayer atIndex:0];
    _gradientBackground = newLayer;
} 
```

但它不起作用。

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:14:59.320

试试这个

```
- (void)changeBackgroundWithLayer:(CALayer*)newLayer
{
    [_gradientBackground removeFromSuperlayer], _gradientBackground = nil;
    [self.layer insertSublayer:newLayer atIndex:0];
    _gradientBackground = newLayer;
} 
```

这将在每种情况下删除并将其`_gradientBackground`设置为`nil`，这在 Objective-C 中是完全可以接受的。将`newLayer`添加到图层层次结构并`gradientBackground`更新图层。

# jquery - jQuery - 如何在加载之前引用元素

> ID：15568172
> 
> 赞同：0
> 
> 时间：2013-03-22T10:33:09.913
> 
> 标签：jquery, ajax, element

我有“函数 1”，它引用了一个成功的元素：

```
$('#element').show(); 
```

但是，该元素是在“函数 1”之后通过 ajax 加载的，并且该元素不显示。

我如何告诉 jQuery 这个元素现在存在并且能够引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:04:26.550

jquery .on() 可用于引用将来要添加的 DOM 元素

# c - 在c程序中用sudo执行shell命令

> ID：15568176
> 
> 赞同：2
> 
> 时间：2013-03-22T10:33:21.580
> 
> 标签：c, shell, command-line, system, execute

在我的 C 程序中执行此命令的最佳方法是什么：“sudo cat /var/log/auth.log | grep Accepted”？我尝试使用：

```
sprintf(command_result,"sudo cat /var/log/auth.log | grep Accepted"); 
```

但这显然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:35:26.070

`sprintf()`您`system()`至少无法执行命令

使固定：

```
sprintf(command_result, "sudo cat /var/log/auth.log | grep Accepted");
system(command_result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:55:36.113

您可以使用管道执行命令

```
FILE *fp;
fp=popen(command_result,"r"); 
```

然后你可以从管道中读取命令输出，`fp`就像从文件中读取`fgets()`or `fread()`...

顺便说一句，如果 sudo 命令中需要密码，则不能执行 sudo 命令

# ruby-on-rails - 分页是否适用于具有 method="POST" 的表单？

> ID：15568179
> 
> 赞同：0
> 
> 时间：2013-03-22T10:33:33.537
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

由于 URI 请求变得太大而浏览器无法处理，我将高级订单表单从 GET 切换为 POST。一切正常，除了意志分页。它不断将页面添加到 url 本身`http://localhost:3000/orders/advanced_search`就像`http://localhost:3000/orders/advanced_search?page=2`失败一样，因为这是一个 post 调用，而不是一个 get 调用。

有什么方法可以只更新 params[:page] 但不对链接做任何事情？

我以前只是打电话`<%= will_paginate @orders["order_items"] %>`，当它是一个 GET 电话时效果很好

`@orders["order_items"] = @orders["order_items"].paginate(:page => params[:page], :per_page => limit, :total_entries=>@orders["total"])`

我想要的很简单，将其添加到参数中，但不要将其添加到链接中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T20:05:55.747

发布的另一个答案是错误的。will_paginate 不是为处理发布请求而构建的。

您选择“使” will_paginate 与发布请求一起使用包括：

**编写一些javascript到：**

*   preventDefault 点击 will_paginate 生成的链接

> $(".pagination li a").click(function(e){ e.preventDefault(); ....

*   通过点击的链接找到目标页面。

（下面的代码假设所有 will_paginate 链接都有一个查询字符串......它们确实如此。但请注意，如果您通过 will_paginate 的 params 选项在控制器中传递更多参数，则此特定代码行将不起作用。你不应该放在首位，因为我们正在尝试实现发布请求。）

> var tp_id = $(this).attr("href").split('?page=')[1]

*   根据单击的 will_paginate 链接生成具有正确名称属性的隐藏输入。

> $('form').append("< input type='hidden' name='page' value='" + tp_id +"' >")

*   最后发布到搜索表单的控制器操作。

> $('form').submit()

。完毕。我希望这能让你走上正确的道路。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T10:40:00.250

您可以将参数添加到 will_paginate

[https://github.com/mislav/will_paginate/wiki/API-documentation](https://github.com/mislav/will_paginate/wiki/API-documentation)

```
<%= will_paginate @orders['order_items'], :params => { :method => :post } %> 
```

如果它不起作用，请将完整的控制器和操作设置为参数。

# html - 我应该采用哪个平台进行 Web 和移动开发？

> ID：15568183
> 
> 赞同：-4
> 
> 时间：2013-03-22T10:33:49.887
> 
> 标签：html, actionscript-3, ide, flash-builder

在过去的 15 年中，我一直使用 Flash Builder 和以前的 Flash，并且正在研究关于基于 Flash 的软件消亡的“写在墙上”。我发现 ActionScript3 是一种功能强大且优雅的编程语言，并且对于向我认为的 html5 发展方向犹豫不决，因为看起来底层的编程语言就像是时光倒流。它似乎不是完全面向对象的，我还没有看到一个复杂的 IDE。此外，我还没有看到一个 html5 等效的 Flash 媒体服务器来捕获和传递视频。我不是专业的开发人员，我是一名从事大量设计和开发工作的大学教授，我需要一个能够存在一段时间、技术先进、并且会继续发展的平台。我' 我曾与 xCode 合作过，但我担心它太局限于 IOS。我想听听其他可以指导我做决定的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:30:55.190

对于基于网络的东西，在你的情况下，我肯定会说用 AS3 坚持下去，直到事情变得更加绝对。Flash 有 HTML5 没有的问题，但反之亦然。Flash 的问题是更持久的和/或 Adob​​e 不关心的问题，但据我了解，HTML5 仍然“成长”并且还不是很成熟。Flash 还没有死，它仍然很成熟，而且你已经真正习惯了使用它。所以我会说现在就坚持下去，等到合适的时候再改变。

# c++ - 桶排序和计数排序的场景

> ID：15568185
> 
> 赞同：1
> 
> 时间：2013-03-22T10:33:57.797
> 
> 标签：c++, algorithm, sorting

这让我困惑了一段时间。我想知道在桶排序中应该使用计数排序（或反之亦然）的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:37:59.760

这两个页面提供了有关这两种排序的一些信息。

*   [计数排序](http://en.wikipedia.org/wiki/Counting_sort)
*   [桶排序](http://en.wikipedia.org/wiki/Bucket_sort)

**关于计数排序：**

> 因为计数排序使用键值作为数组的索引，所以它不是比较排序，比较排序的 Ω(n log n) 下限不适用于它。[1](http://en.wikipedia.org/wiki/Counting_sort)桶排序可用于许多与计数排序相同的任务，具有相似的时间分析；然而，与计数排序相比，桶排序需要链表、动态数组或大量预分配的内存来保存每个桶内的项目集，而计数排序则在每个桶中存储单个数字（项目数）。 4]

**关于桶排序：**

> 桶排序可以看作是计数排序的推广；实际上，如果每个桶的大小为 1，那么桶排序会退化为计数排序。桶排序的可变桶大小允许它使用 O(n) 内存而不是 O(M) 内存，其中 M 是不同值的数量；作为交换，它放弃了计数排序的 O(n + M) 最坏情况行为。

# sql - 组合位于两台不同机器上的两个 Postgresql 相似表

> ID：15568193
> 
> 赞同：1
> 
> 时间：2013-03-22T10:34:33.647
> 
> 标签：sql, postgresql, postgresql-9.2

我有两台装有 PostgreSQL 的 Windows 机器（PC1 和 PC2）。在 PC1 中，我有一张桌子：

![在此处输入图像描述](../Images/6f1f7a4876af56b7d4c4b3cb6fcb3e76.png)

在 PC2 中，我有同一张表，其中包含以下记录：

![在此处输入图像描述](../Images/d6705d9ff53adf50a619221ad8485a92.png)

我想组合两个表并将它们放在 PC1 中（顺序不重要）：

![在此处输入图像描述](../Images/dd150ac1ea3f6e51841930a6bd72fbda.png)

怎么能这样做？我正在使用 PostgreSQL 9.2 和 pgAdminIII。如果可能的话，我更喜欢使用 U 盘而不是网络传输数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:42:44.493

您可以将数据转储出去：

```
pg_dump --data-only dbname > outfile.sql 
```

这将为您提供所有数据的文件。如果您在将此数据插入另一个节点时必须担心重复，那么这是一个大问题。

这是您导入数据的方式：

```
psql --set ON_ERROR_STOP=on dbname < outfile.sql 
```

如果您继续需要同步这两个数据库，另一种解决方案是使用 PostgreSQL 的一些复制策略。[http://www.postgresql.org/docs/9.2/static/warm-standby.html#STREAMING-REPLICATION](http://www.postgresql.org/docs/9.2/static/warm-standby.html#STREAMING-REPLICATION)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:45:52.213

这就是我会做的：

PC1-> pgadmin-> yourtablename -> 右键-> 备份

文件选项：格式：普通，编码：your_ecnoding

转储选项 #1：仅数据，使用列插入。

这将创建 sql 查询。**用 yourtablename2 替换 yourtablename**并在 PC2 上执行它

*删除重复记录并添加数据：*

```
delete from yourtablename2 where id in (select id from yourtablename)

insert into yourtablename 
select * from yourtablename2

drop table yourtablename2 
```

# matlab - 在 Matlab 中创建一个 3 点的蒙版？

> ID：15568206
> 
> 赞同：0
> 
> 时间：2013-03-22T10:35:06.567
> 
> 标签：matlab, geometry

我有这 3 个点（x，y），我需要获得一个带有三角形的蒙版，其中顶点是点。我应该尊重一些参数，比如像素间距，我需要一个从最小 x 坐标到最大 x 坐标的网格（对于 y 也是一样）。

我尝试在 matlab 中使用函数 poly2mask 执行此操作，但问题是生成的图像：当我有负坐标时，我看不到多边形。

所以我试图使多边形居中，但我失去了原始坐标，我不能让它们再次回来，因为我需要对图像做一些详细说明。

如何在不修改点和尊重参数的情况下从 3 个点获得一个遮罩三角形？

# c++ - C++ 通过套接字发送字符串

> ID：15568215
> 
> 赞同：1
> 
> 时间：2013-03-22T10:35:20.263
> 
> 标签：c++, sockets, character-encoding

我正在做一个小型客户端/服务器项目作为 C++ 课程的最终项目。我们得到了一些处理通信的类（使用 sys/socket.h），我们基本上`connection->send(byte)`可以发送一个字节的数据。

假设我有一个要发送的字符串。当从客户端发送到服务器时，如何确保“a”被解释为“a”，反之亦然？由于标准没有说明 char 默认为 unsigned 或 signed 我不知道如何处理它。

我有一些想法，我可以`std::numeric_limits<char>::min()`在每一端减去，但我不确定它是否是一个好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:41:23.077

TCP 和 UDP 都不关心字符串的编码。它总是被解释为一个字节数组。因此，为了确保您的字符串被正确解释，服务器和客户端必须就通用编码达成一致。

在您的情况下，我将简单地使用`c_str()`std::string 的方法来发送字符串并通过将接收到的数据解释为`const char*`（对于 ASCII 字符串）来分配字符串。只要客户端应用程序和服务器应用程序使用相同的字符串库，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:47:19.560

要验证您的通信，您应该使用网络嗅探器。Wireshark 是一个不错的选择。

如果嗅探器捕获您的以太网数据包并说它有一个“a”，那么您可以非常确定您发送了一个“a”。

以我的经验，当您发送具有类似内容的字符串时：

```
string myString = "Hello World";

mySocket.send(myString.c_str(), myString.length()); 
```

如果我使用 (char*) 或 (unsigned char*) 对 myString.c_str() 进行强制转换，结果是相同的。

一个字节总是 8 位 :)

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:40:15.903

其他需要注意的是，CPU 的字节序，大于 1 字节的类型可能是个问题。尝试将**大端**作为标准，因为它是大多数常见网络协议的标准。

最好的祝福。

# php - 使用 PHP、Zend 框架和 PostgreSQL 的连接池

> ID：15568220
> 
> 赞同：1
> 
> 时间：2013-03-22T10:35:29.523
> 
> 标签：php, postgresql, zend-framework, connection-pooling

环境：独立服务器上的 PostgreSQL 9.2、PHP 5.3、Zend Framework 1

我每分钟在几台服务器上执行数百个 PHP 脚本（从 shell 启动，而不是作为 WWW 服务器请求），这些脚本用于 Zend Framework`pdo_pgsql`与 PostgreSQL 的连接。平均脚本执行时间约为 15 秒，大部分时间他们不使用数据库。现在每个脚本都在开始时打开数据库连接并在结束时关闭它。它效率低下，所以我决定脚本将在执行期间关闭并重新打开数据库连接几次。

但是重新打开与数据库的连接也效率低下。由于我的 PHP 脚本作为单独的进程（而不是 WWW 服务器工作程序）运行，因此无法使用 PHP 持久连接。在我看来，最好的解决方案是在每台服务器上使用连接池系统，它将为 PHP 脚本存储到 PostgreSQL 的连接。

我对吗？如果是，您建议将哪种连接池系统与 PHP、Zend 框架（`pdo_pgsql`适配器）和 PostgreSQL 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:05:46.103

[PgBouncer](http://wiki.postgresql.org/wiki/PgBouncer)非常适合这项工作。如果在会话池模式（默认）中使用，它将减少连接开销，而不会增加其他不必要的复杂性。更激进的池模式（如事务池或语句池）确实会影响客户端应用程序，因此您应该仅在实际需要时才使用它们。

正如 James 指出的那样，可以[在 PostgreSQL wiki 上找到更多信息。](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)

# android - 在android中获取在线openstreetmap视图

> ID：15568228
> 
> 赞同：0
> 
> 时间：2013-03-22T10:36:01.790
> 
> 标签：android, openlayers, openstreetmap, osmdroid

我目前正在尝试在 Android 应用程序中获取 openstreet 地图的在线地图视图。但我找不到任何解释如何做到这一点的教程。有人可以帮我怎么做吗？或者给我一些建议。我发现了一些像 osmdroid 这样的应用程序，但它使用嵌入式地图。不是在线的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:54:32.113

[osmdrid](http://code.google.com/p/osmdroid/) is a library you can use in your own app. It is a tile besed rather than vector based solution. It supports online as well as offline maps. There are examples availible and some documentation as well as a discussion groupe bug tracker etc. check the project page.

There is a very good list of libraries to help with OpenStreetMap on the on the [OpenStreetMap web pages](http://wiki.openstreetmap.org/wiki/Frameworks).

# asp.net - ASP .NET Web 安装程序，网址到网站

> ID：15568229
> 
> 赞同：0
> 
> 时间：2013-03-22T10:36:04.377
> 
> 标签：asp.net, .net, visual-studio, url, installation

一开始，我要感谢您的所有回答。

我有问题，安装后如何获取安装 URL 的网站，我需要将它用于另一个项目，但我找不到获取此 URL 的好方法。我想，关于安装后发送到网站的消息或在最后阶段带有复选框的选项，例如“打开网站”。

我应该在哪里寻找这个，在安装程序项目中的 IIS 配置或自定义操作中。欢迎所有提示。

再次感谢所有答案。

# mysql - 找到工资最少的公司

> ID：15568231
> 
> 赞同：1
> 
> 时间：2013-03-22T10:36:10.107
> 
> 标签：mysql, sql, sql-server

嗨，我有以下数据库架构。

```
employee (employee-name, street, city)
works (employee-name, company-name, salary)
company (company-name, city)
manages (employee-name, manager-name) 
```

我需要找到工资最少的公司。

我写了以下查询，但我的教练告诉我它错了。

```
SELECT company-name
FROM works
GROUP BY company-name
HAVING sum(salary) < ( SELECT sum(salary)
FROM works
GROUP BY company-name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:43:27.063

你的子查询

```
SELECT company-name, sum(salary)
FROM works
GROUP BY company-name 
```

将为您提供每家公司的累积工资（工资单）。
如果您按升序对这些数据进行排序，则第一个记录将是工资单最少的公司。

```
SELECT company-name, sum(salary)
FROM works
GROUP BY company-name
ORDER BY sum(salary) 
```

您可以使用 MySQL 的[LIMIT](http://www.mysqlfaqs.net/mysql-faqs/SQL-Statements/Select-Statement/How-to-use-LIMIT-clause-in-MySQL)子句将该记录集限制为单个记录，使用

```
SELECT company-name, sum(salary)
FROM works
GROUP BY company-name
ORDER BY sum(salary)
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:38:07.023

我再给你一个提示。这`<`就是问题所在（仔细考虑子查询返回的内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T07:16:03.667

我们可以`< All`在这种情况下使用吗？

例如：

```
SELECT company-name
FROM works
GROUP BY company-name
HAVING sum(salary) < ALL( SELECT sum(salary)
FROM works
GROUP BY company-name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-13T13:43:10.947

您可以按如下方式找到它：

```
SELECT company_name, SUM (salary) AS lowest_payroll
    FROM works
GROUP BY company_name
  HAVING SUM (salary) = (SELECT MIN (payrl)     AS low_payroll
                           FROM (  SELECT company_name, SUM (salary) payrl
                                     FROM works
                                 GROUP BY company_name)); 
```

# java - 调用其他类中实现的接口方法时出现空指针异常

> ID：15568234
> 
> 赞同：2
> 
> 时间：2013-03-22T10:36:21.320
> 
> 标签：java, android, nullpointerexception

我正在尝试调用`getFailureDialog()`接口的方法`OnSelectedListener`。该方法在`MainActivity.java`. 但是当我调用该方法时，我得到了空指针异常。

我知道它因为`OnSelectedListener`仍未初始化，而您正在调用`getFailureDialog()`未初始化的对象。显然，接口方法永远不会被初始化。但是那我如何`getFailureDialog()`从我的班级中调用该方法`Common.java`呢？

我只在下面放置相关的源代码-

源代码：

**SharedFragment.java**

```
public class SharedFragment extends DialogFragment 
{       
    Bundle bundle = getArguments();
    final String email = bundle.getString("email");

    Thread t=new Thread(new Runnable() 
    {
        public void run() {
        common.myRecord(email);
    }
    });   t.start(); 
} 
```

**通用.java**

```
public class Common
{
OnSelectedListener mCallback;

    public interface OnSelectedListener 
    {
        public void getFailureDialog();
    }

    public void myRecord(String email)
    {
        mCallback.getFailureDialog();  //null pointer exception here
    }
} 
```

**MainActivity.java**

```
public class MainActivity implements Common.OnSelectedListener
{

@Override
    public void getFailureDialog()
    {

        RecordFailure fd = new RecordFailure(); 
        fd.show(getSupportFragmentManager(), "dialog");
    }
} 
```

**错误日志**

```
03-22 15:50:39.032: W/dalvikvm(20796): threadid=16: thread exiting with uncaught exception (group=0x4204c450)
03-22 15:50:39.052: E/AndroidRuntime(20796): FATAL EXCEPTION: Thread-30126
03-22 15:50:39.052: E/AndroidRuntime(20796): java.lang.NullPointerException
03-22 15:50:39.052: E/AndroidRuntime(20796):    at com.cornmail.util.Common.myRecord(Common.java:2062) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T10:37:21.940

```
OnSelectedListener mCallback; 
```

永远不会被初始化，或者被初始化为空值。

```
public class Common
{
    OnSelectedListener mCallback = new OnSelectedListener(){
        public void getFailureDialog(){
            JOptionPane.showMessageDialog(null, "An Error Has Occurred.");
        }
    };

    public interface OnSelectedListener 
    {
        public void getFailureDialog();
    }

    public void myRecord(String email)
    {
        mCallback.getFailureDialog();  //now this works.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:52:41.043

[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/gallery3d/ui/OnSelectedListener.java)是源代码`OnSelectedListener`。由于这是一个接口，因此您必须使用*new*初始化它并覆盖该`onSelected()`方法，或者让您的类实现此侦听器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:55:33.120

在里面添加一个方法

```
public class Common
{
    OnSelectedListener mCallback;

    public void setOnSelectedListener(OnSelectedListener listener){
        mCallback = listener;
    }

    public interface OnSelectedListener 
    {
        public void getFailureDialog();
    }

    public void myRecord(String email)
    {
        mCallback.getFailureDialog();  //null pointer exception here
    }
} 
```

现在使用`setOnSelectedListener()`初始化你的监听器

但是从您的代码中，您可能还需要在您的代码中实现另一个侦听器`SharedFragment`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:03:48.087

你必须重新设计你的代码人，让 Common 类实现`OnSelectedListener`接口。所以分开`OnSelectedListener`作为外部接口而不是作为内部接口。

我会这样编码。

```
public interface OnSelectedListener 
{
    public void getFailureDialog();
} 
```

那么`Common`班级应该是这样的

```
public class Common implements OnSelectedListener
{
    public void getFailureDialog()
    {
        RecordFailure fd = new RecordFailure(); 
        fd.show(getSupportFragmentManager(), "dialog");
    }

    public void myRecord(String email)
    {
        getFailureDialog();
        //do something more rather than just call existing method
    }
} 
```

并且此代码将顺利运行。如果您需要在 MainActivity 中实现 getFailureDialog，请将这个 Common 类作为抽象类。

普通班会是这样

```
public abstract class Common implements OnSelectedListener
{
    public abstract void getFailureDialog();

    public void myRecord(String email)
    {
        getFailureDialog();
        //do something more rather than just call existing method
    }
} 
```

现在你的`MainActivity`类可以从这个类扩展来实现缺失的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-11T20:02:35.960

您需要修改Common 和MainActivity。在 Common 添加一个基本的构造函数。然后激活回调，如 startMyCallback 所示。

通用.java

```
public class Common
{

 public Common() {}

 OnSelectedListener mCallback;

 public interface OnSelectedListener 
 {
    public void getFailureDialog();
 }

 public void myRecord(String email)
 {
    mCallback.getFailureDialog();  //null pointer exception here
 }
} 
```

MainActivity.java

```
public class MainActivity implements Common.OnSelectedListener
{

    Common common = new Common();

    public MainActivity()
    {

    }

    public void startMyCallback()
    {
        common.mCallback = this;
    }

    @Override
    public void getFailureDialog()
    {
        RecordFailure fd = new RecordFailure(); 
        fd.show(getSupportFragmentManager(), "dialog");
    }
} 
```

# nstask - 通过 NSpipe 进行通信的独立进程

> ID：15568235
> 
> 赞同：1
> 
> 时间：2013-03-22T10:36:25.590
> 
> 标签：nstask, nspipe

我需要使用 NSPipe 通道实现两个应用程序之间的通信。一个 NSPipe 必须写入数据，另一个必须读取数据（双向），这将在两个不同应用程序中的单独进程之间进行通信。

例如，c# 中的此类事情可以通过 NamedPipeClientStream、NamedPipeServerStream 类轻松完成，其中管道由 id 字符串注册。

任何建议如何在Objective-C中实现它？

关于，瓦迪维卢

# jquery - 如何重新创建这个 jQuery 内容滑块效果

> ID：15568238
> 
> 赞同：0
> 
> 时间：2013-03-22T10:36:33.077
> 
> 标签：jquery, clone

我正在尝试重新创建此站点上滑块的效果[http://www.goldmansachs.com](http://www.goldmansachs.com)

幻灯片中的每个框似乎都有自己的时间，然后沿任一方向（左或右）分离，这就是我想用 jQuery 重新创建的效果。

可能有一些东西可以做到这一点，但我无法找到它。我将如何在滑块中创建这种效果，每张幻灯片中都有不同数量的框，它需要自动检测框的数量，然后根据方向创建动画。

我不需要任何 URL 或导航状态更改，我只是看到它是一个带有多个包含框的幻灯片的滑块。

谢谢

# javascript - 如何在 Visual Studio 中调试（仅）JavaScript？

> ID：15568245
> 
> 赞同：42
> 
> 时间：2013-03-22T10:37:00.617
> 
> 标签：javascript, visual-studio, debugging

我正在使用 Microsoft Visual Studio 2012 开发一个 web 应用程序（asp.net mvc 4），随着解决方案越来越大，调试越来越慢。

需要知道是否有一种方法可以在 Visual Studio 上仅调试我的客户端（javascript）而不是整个应用程序（服务器+客户端）。

有什么方法可以附加到 IE 进程并让断点工作......？

对让调试器在整个客户端/服务器应用程序上运行不感兴趣，**只是 client**。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T10:50:14.853

首先打开 Visual Studio ..在解决方案资源管理器中选择您的项目..右键单击并选择“浏览方式”选项，然后将 IE 设置为默认浏览器。

![在此处输入图像描述](../Images/ca8b34dcd0875df1f80f2e6c30e59c2a.png) 现在打开 IE ..转到
`Tools >> Internet option >> Advance>> uncheck the checkbox having "Disable Script Debugging (Internet Explorer).`然后单击`Apply`，`OK`然后你就完成了..

现在您可以在 JS 文件中设置断点，然后点击 VS 中的调试按钮。

![在此处输入图像描述](../Images/5bc8829785b503666bb28db041c9583e.png)

**编辑：-**对于 asp.net Web 应用程序，右键单击作为您的启动页面的页面（例如 default.aspx）并执行相同的步骤。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-25T05:24:03.053

是的，您可以在 Visual Studio 的客户端页面上放置断点

首先将调试器放入 java-script 代码并在浏览器中运行页面

> 调试器

[![在此处输入图像描述](../Images/3b1ea6ab291faa8ff8ec16926e22cc22.png)](https://i.stack.imgur.com/B84kI.png)

之后在浏览器中打开您的页面并查看检查元素，您会看到以下视图

[![在此处输入图像描述](../Images/62b343db6f0c533b72ea836fae2ae985.png)](https://i.stack.imgur.com/bLyR5.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-22T10:38:51.363

调试器应使用 Visual Studio 2012 自动附加到浏览器。您可以使用`debugger`关键字在应用程序中的某个点停止或`breakpoints`直接使用 VS。

您还可以在 Visual Studio 中分离默认调试器，并使用预加载 Internet Explorer 或 FireBug 等的开发人员工具。

为此，请转到`Visual Studio`-> `Debug`-> `Detatch All`，然后单击 Start debugging in `Internet Explorer`。然后，您可以在此级别设置断点。 ![在此处输入图像描述](../Images/4e2cf69784aa68d62a0c9efba1990c0c.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-21T09:34:50.893

在 VS2015 中调试 JavaScript 代码，不需要

1.  在 IE 选项 -> 高级选项卡中启用脚本调试
2.  在 JavaScript 代码中编写调试器语句

附加 IE 不起作用，但这里有一个解决方法。

选择 IE

[![在此处输入图像描述](../Images/92da736f70f50c16d00a7aa9d328a0aa.png)](https://i.stack.imgur.com/F8e0z.png)

并按 F5。这将附加工作进程和 IE，如下所示 - [![在此处输入图像描述](../Images/19041f26c83212c1f1eb62522ca73fc1.png)](https://i.stack.imgur.com/efKAI.png)

如果您对调试服务器代码不感兴趣，请将其从“进程”窗口中分离出来。 [![在此处输入图像描述](../Images/9649d45b90b8e121888177d55ac1a916.png)](https://i.stack.imgur.com/hp6M6.png)

当您按下 F5 并且您的所有服务器代码在 VS 中编译和加载时，您仍然会面临缓慢的问题。请注意，您可以重新分离并附加从 VS 启动的 IE 实例。JavaScript 断点的命中方式与它们在服务器端代码中的方式相同。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-01T07:45:26.857

可以通过在要调试的位置写入关键字“调试器”进行调试，然后按 F5 键调试 JavaScript 代码。

[http://www.aspsnippets.com/Articles/Debug-JavaScript-and-jQuery-using-Visual-Studio-in-Internet-Explorer-browser.aspx](http://www.aspsnippets.com/Articles/Debug-JavaScript-and-jQuery-using-Visual-Studio-in-Internet-Explorer-browser.aspx)

# html - Css 导航子菜单移动不起作用

> ID：15568248
> 
> 赞同：0
> 
> 时间：2013-03-22T10:37:09.463
> 
> 标签：html, css, navigation, submenu

我正在构建一个带有子菜单的导航菜单，其中只有 CSS（媒体查询）和 html。

它在视觉上工作正常，但问题是：在移动浏览器上，当我点击任何子菜单时，它不起作用，有时它只是重定向到第一个菜单地址，有时它甚至不重定向。在计算机浏览器上也可以正常工作。

这是我的代码：

```
#nav{
    position: relative;
    height: 100%;
}

#nav ul{
    margin: 0px;
    padding: 0px;
    height: 100%;
}

#nav ul li{
    list-style: none;
    float: left;
    height: 100%;
    border-right: black solid 2px;
    text-align: center;
    padding: 0px 15px 0px 15px;
}

#nav ul li:hover{
    background: #47350e;
}

#nav ul li a{
    position: relative;
    font-family: 'Oswald';
    font-size: 18px;
    color: white;
    text-transform: uppercase;
    text-decoration: none;
    top: 15px;
}

#nav ul li a:hover{

}

#nav ul li .children li{
    border: 0px;
}

#nav ul li .children li a{
    font-size: 13px;
    top: 5px;
    font-weight: normal;
}

#nav ul li .children li a:hover{
    text-decoration: underline;
}

#nav ul li .children{
    display: none;
    position: absolute;
    left: 0px;
    top: 46px;
    height: 30px;
    width: 100%;
    background: #47350e;
    padding-left: 120px;
    z-index: 5;
}

#nav ul li:hover .children{
    display: block;
} 
```

和 HTML

```
<div id="nav">
            <ul id="nav-items">

                <li>
                    <a href=#>option 1</a>
                </li>
                <li>
                    <a href=#>option 2</a>
                    <ul class="children">
                        <li>
                            <a href=#>option 3</a>
                        </li>
                        <li>
                            <a href=#>option 4</a>
                        </li>

                    </ul>
                </li>

            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:46:11.807

对于移动版本，您可以使用选择菜单。

```
 <div id="mobile_menu">
    <select>
<option>option1</option>
<option>option2</option>
<option>option3</option>
</select>
    </div> 
```

CSS 处于正常 css 中

```
#mobile_menu{display:none;} 
```

对于手机

```
 @media only screen and (min-width: 320px) and (max-width: 479px) {
    #mobile_menu{display:block;}
#nav{display:none;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:42:55.170

Possibly your `#nav ul li a {` rule is creating the mess.

```
position: relative;
top: 15px; 
```

is working for both the levels, i.e. option 1 and option 3

Check if this is the issue. If do not resolve please share the link to your code.

# vba - 如何优化以下 VBA 代码的运行速度？

> ID：15568250
> 
> 赞同：-2
> 
> 时间：2013-03-22T10:37:15.297
> 
> 标签：vba, optimization

我想提高遵循 VBA 代码的效率。我能想到的是在代码中使用“With”和“End With”。我还能做些什么来优化代码吗？

谢谢！

```
 Sub ONLY_CORP_Lives_Premiums()
Dim row_phil, row_phl, row_eveeb, row_evenb As Integer
Dim row_indiv, row_sme, row_corp As Integer
Dim row As Variant
Dim row_start, row_end As Integer
Dim i, k As Integer
Dim start_time, end_time

start_time = Now()
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
Sheets("SETUP").Range("J32") = Sheets("SETUP").Range("J28")

Sheets("LIVES PROJECTION").Activate
row_phil = Application.CountIf(Range("B1237:B1048576"), "PHIL" & "*")
row_phl = Application.CountIf(Range("B1237:B1048576"), "PHL" & "*") + row_phil
row_eveeb = Application.CountIf(Range("B1237:B1048576"), "EVEEB" & "*") + row_phl
row_evenb = Application.CountIf(Range("B1237:B1048576"), "EVENB" & "*") + row_eveeb
row = Array(0, row_phil, row_phl, row_eveeb, row_evenb)

For i = LBound(row) To (UBound(row) - 1)

    row_start = row(i) + 34
    row_end = row(i + 1) - 1 + 34
    row_indiv = Application.CountIf(Range("d" & row_start & ":d" & row_end), "INDIV")
    row_sme = Application.CountIf(Range("d" & row_start & ":d" & row_end), "SME")
    row_corp = Application.CountIf(Range("d" & row_start & ":d" & row_end), "CORP")
        For k = row_start + row_indiv + row_sme - 34 To row_start + row_indiv + row_sme + row_corp - 1 - 34
        With Sheets("LIVES PROJECTION")
        .Range("B12:G12").Value = .Range("B34:G34").Offset(k, 0).Value
        .Range("B12:FM26").Calculate
        End With
        Sheets("PREMIUMS PROJECTION").Range("B12:FM26").Calculate
        Sheets("LIVES PROJECTION").Range("H34:FM34").Offset(k, 0).Value = Sheets("LIVES PROJECTION").Range("H12:FM12").Value
        Sheets("PREMIUMS PROJECTION").Range("H34:FM34").Offset(k, 0).Value = Sheets("PREMIUMS PROJECTION").Range("H12:FM12").Value
        Next k
Next i
''
Application.ScreenUpdating = True
Application.Calculation = xlCalculationAutomatic
Sheets("SETUP").Range("J33") = Sheets("SETUP").Range("J28")
Calculate!
end_time = Now()
Sheets("SETUP").Range("j50") = DateDiff("s", start_time, end_time)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:00:09.560

你真的需要在`For .. Next`循环内部计算这么多吗？如果不这样做，请`Application.Calculation = xlCalculationManual`在开始时切换到，并在结束时计算一次。如果您确实需要在代码执行期间进行计算，请尝试对其进行修改，使其尽可能少地计算。使用`With .. End With`并没有太大帮助。如果有的话。

# asp.net - 使用位从存储过程返回布尔值

> ID：15568251
> 
> 赞同：1
> 
> 时间：2013-03-22T10:37:16.907
> 
> 标签：asp.net, sql, stored-procedures

这是我用于检查电子邮件可用性的存储过程的代码。

```
ALTER PROCEDURE [dbo].[usp_CheckEmailMobile](@Name VARCHAR(50), @Email NVARCHAR(50), @Password NVARCHAR(50), @CountryCode INT, @Mobile VARCHAR(50), @Result BIT OUTPUT)
AS 
BEGIN 

IF EXISTS (SELECT COUNT (*) FROM AUser WHERE  [Email] = @Email AND [Mobile] = @Mobile) 

SELECT 'FALSE'; --Email &/or Mobile does not exist in database

ELSE
 --Insert the record & register the user 
INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) VALUES (@Name, @Email, @Password, @CountryCode, @Mobile)  

END 
```

如何将此 SP 的结果分配给 @Result （它的输出参数）？

这是cs代码：我在哪里出错了？

```
 protected void btnRegister_Click(object sender, EventArgs e)
    {

        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();

        SqlCommand Cmd = new SqlCommand("usp_CheckEmailMobile", con);
        Cmd.CommandType = CommandType.StoredProcedure;
        Cmd.CommandText = "Registration";
        Cmd.Parameters.AddWithValue("@Name", txtName.Text);
        Cmd.Parameters.AddWithValue("@Email", txtEmailAddress.Text);
        Cmd.Parameters.AddWithValue("@Password", txtPassword.Text);
        Cmd.Parameters.AddWithValue("@CountryCode", ddlCountryCode.Text);
        Cmd.Parameters.AddWithValue("@Mobile", txtMobileNumber.Text);
        //Cmd.Parameters.Add("@Result", DbType.Boolean);
        SqlParameter sqlParam = new SqlParameter("@Result", DbType.Boolean);
        //sqlParam.ParameterName = "@Result";
        //sqlParam.DbType = DbType.Boolean;
        sqlParam.Direction = ParameterDirection.Output;
        Cmd.Parameters.Add(sqlParam);
        Cmd.ExecuteNonQuery();
        con.Close();
        Response.Write(Cmd.Parameters["@Result"].Value);

    } 
```

经历了这个，力求帮助... [如何从C#运行具有OUTPUT参数的存储过程？](https://stackoverflow.com/questions/3433694/how-to-run-the-stored-procedure-that-has-output-parameter-from-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:48:45.183

您只需将其设置为像这样的普通变量

```
 ALTER PROCEDURE [dbo].[usp_CheckEmailMobile](@Name VARCHAR(50), @Email NVARCHAR(50), @Password NVARCHAR(50), @CountryCode INT, @Mobile VARCHAR(50), @Result BIT OUTPUT)
    AS 
    BEGIN 

    IF EXISTS (SELECT COUNT (*) FROM AUser WHERE  [Email] = @Email AND [Mobile] = @Mobile) 
    BEGIN

    SELECT 'FALSE'; --Email &/or Mobile does not exist in database
    @Result = 0
    END
    ELSE
    BEGIN
     --Insert the record & register the user 
    INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) VALUES (@Name, @Email, @Password, @CountryCode, @Mobile)  

    @Result = 1
    END

    END 
```

对于服务器端代码

```
SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
            con.Open();

            SqlCommand Cmd = new SqlCommand("usp_CheckEmailMobile", con);
            Cmd.CommandType = CommandType.StoredProcedure;
            Cmd.Parameters.AddWithValue("@Name", txtName.Text);
            Cmd.Parameters.AddWithValue("@Email", txtEmailAddress.Text);
            Cmd.Parameters.AddWithValue("@Password", txtPassword.Text);
            Cmd.Parameters.AddWithValue("@CountryCode", ddlCountryCode.Text);
            Cmd.Parameters.AddWithValue("@Mobile", txtMobileNumber.Text);
            SqlParameter sqlParam = new SqlParameter("@Result", DbType.Boolean);            
            sqlParam.Direction = ParameterDirection.Output;
            Cmd.Parameters.Add(sqlParam);
            Cmd.ExecuteNonQuery();
            con.Close();
            Response.Write(Cmd.Parameters["@Result"].Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:47:18.447

做这个：

```
ALTER PROCEDURE [dbo].[usp_CheckEmailMobile](@Name VARCHAR(50), @Email NVARCHAR(50), @Password NVARCHAR(50), @CountryCode INT, @Mobile VARCHAR(50), @Result BIT OUTPUT)
AS 
BEGIN 

Declare @result bit

IF EXISTS (SELECT COUNT (*) FROM AUser WHERE  [Email] = @Email AND [Mobile] = @Mobile) 
Begin

Set @result=0; --Email &/or Mobile does not exist in database
End
ELSE
Begin
 --Insert the record & register the user 
INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) VALUES (@Name, @Email, @Password, @CountryCode, @Mobile)  

Set @result=1 --True
End

Select @result as Result
END 
```

**cs代码：**

```
bool? IsSuccess= YourDBObject.usp_CheckEmailMobile(all params).FirstOrDefault().Result; 
```

# ckeditor - Liferay ckeditor 升级

> ID：15568259
> 
> 赞同：0
> 
> 时间：2013-03-22T10:37:51.460
> 
> 标签：ckeditor, liferay-6

我正在使用 Liferay 6.1.20 版，但遗憾的是，在这个版本中，ckeditor 4.0 尚未实现。

有没有办法手动升级CKEditor？还是因为工作量太大而我不应该开始这份工作？

我想手动更新 CKEditor，因为我连接的插件与旧版本的 CKEditor 不兼容。

我一直在网上四处寻找。但据我所知，没有任何信息存在。我很想知道它是否在尝试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:52:04.890

Ckeditor 4.0 包含在后备箱（6.2 M4）中（这可以在[Liferay 论坛](http://www.liferay.com/community/forums/-/message_boards/message/18520875)中 Juan Fernández 的帖子中看到。不知道它是否会在不久后成为 6.1 GA3 的一部分。我不确定它有多复杂是升级CKEditor，你可能想看看Juan的帖子中提到的github pull request。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:35:47.820

看起来替换 ckeditor.js 文件并添加所有新的必需文件是替换 ckeditor 的第一步。除此之外，更改 CKeconfig.jsp 并删除所有旧配置也很重要。可以进行工具栏设置。这些似乎不会引起任何问题。

如果您使用 .on 方法，请注意 contentDom 事件被触发了 2 次。一次加载，一次当编辑器准备好。我检查了 editor.status === "ready" 以防止这种情况发生。因为它在未准备好时会附加听众。因此，它将不起作用。

=== 编辑 ===

仍然有问题。但现在有了另存为草稿动作。它正在保存数据，但没有我所做的 Html 更改。我正在制作具有特殊属性的跨度。但编辑不会保存它们..

== 编辑 2 == 问题是缺少 CKEDITOR 配置标签。config.allowedContent = true; （见问题编辑）

# java - 无法在 Linux 服务器上第二次关注 JDialog 中使用的 JTextField

> ID：15568260
> 
> 赞同：1
> 
> 时间：2013-03-22T10:37:53.653
> 
> 标签：java, linux, swing, focus, jdialog

我正在使用一个带有 2 个 JTextfields 和 JButtons 的 JDialog。当 Jdialog 第一次打开时，我的第一个文本字段上有一个光标。现在，如果我单击 Jdialog 外部的某个位置，然后尝试返回 JDialog，我在任何文本字段上都看不到光标，并且无法在文本字段上编写或编辑任何内容。

我已将模态设置为 true。因此，即使我单击其他任何地方，我的对话框仍会出现在屏幕上，但会被停用。

此问题仅适用于 linux 服务器，而不适用于 windows。Windows 完美运行。

在此处添加示例代码以了解该问题。这里TestClass 是扩展JFrame。

```
public TestClass(){
    setSize(new Dimension(600,500));
    setLocationRelativeTo(null);
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    myPanel = new JPanel();

    JButton openDialog = new JButton("Click here");
    openDialog.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            // TODO Auto-generated method stub
            dialog = new JDialog(myFrame,true);
            dialog.setSize(new Dimension(400,400));

            JTextField myField = new JTextField(10);
            JPanel innerPanel = new JPanel();
            innerPanel.add(myField);

            dialog.add(innerPanel);
            dialog.setVisible(true);
            //add(dialog);
        }
    });

    myPanel.add(openDialog);
    add(myPanel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:54:53.897

您的不完整示例无法测试。下面的示例展示了 Mac OS X 和 Ubuntu 12 在 Java 6 下的预期行为。特别是，文本字段在从另一个程序切换回来后仍然有效。

![图片](../Images/1655dacf0234e315fd1d4678cebad6b2.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

/**
 * @see http://stackoverflow.com/a/15576897/230513
 */
public class TestClass extends JFrame {

    private static JFrame myFrame;

    public TestClass() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        JButton openDialog = new JButton("Click here");
        JPanel myPanel = new JPanel();
        myPanel.add(new JButton(new AbstractAction("Click here") {
            @Override
            public void actionPerformed(ActionEvent e) {
                JDialog dialog = new JDialog(myFrame, true);
                JTextField myField = new JTextField(10);
                JPanel innerPanel = new JPanel();
                innerPanel.add(myField);
                dialog.add(innerPanel);
                dialog.pack();
                dialog.setSize(new Dimension(160, 120));
                dialog.setLocationRelativeTo(myFrame);
                dialog.setVisible(true);
            }
        }));
        add(myPanel);
        pack();
        setSize(new Dimension(320, 240));
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                myFrame = new TestClass();
            }
        });
    }
} 
```

# asp.net - DotNetNuke 初学者教程

> ID：15568262
> 
> 赞同：2
> 
> 时间：2013-03-22T10:38:02.583
> 
> 标签：asp.net, content-management-system, dotnetnuke

我刚刚安装了最新版本的 Dot Net Nuke。我是这个 CMS 的新手。任何人都可以帮助开始使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:08:34.230

我建议您首先查看 DotNetNuke.com [http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx](http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx)上的教程页面，特别是查看**DotNetNuke 6.2 系列入门，**尽管您可能正在使用 DNN7 视频在大多数情况下仍然适用。

披露：这些视频大部分是我在 DNNcorp 工作时创建的，即使我不再在那里工作，它们仍然非常有用。

# json - 如何将 java 字符串数组发送到 sencha 触摸列表？

> ID：15568267
> 
> 赞同：1
> 
> 时间：2013-03-22T10:38:16.700
> 
> 标签：json, servlets, sencha-touch-2

如何将 java 字符串数组发送到 sencha 触摸列表。我正在使用 servlet 和 gson，并且在创建 JsonObject 行时出现错误。

```
import com.google.gson.JsonObject;
public void doGet(HttpServletRequest request,HttpServletResponse response)
       throws ServletException, IOException  {
       response.setContentType("text/html");
       String[] anArray;
       anArray = new String[11]; //assign each element of array later
       JsonObject myObj = new JsonObject();
       PrintWriter out = response.getWriter();
      for(int i = 0; i <11; i++){
       myObj.addProperty(anArray[i], i);
      }
  out.println(myObj.toString());
  out.close(); 
```

}

例如：- 以下链接使用 jdbc 通过数据库为其提供服务。 [http://www.mysamplecode.com/2012/05/sencha-touch-list-example.html](http://www.mysamplecode.com/2012/05/sencha-touch-list-example.html)

与此类似，但数据将从字符串数组中获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:01:33.513

将您的内容类型设置为`application/json`第 4 行 -

```
response.setContentType("application/json"); 
```

并确保从 servlet 发送格式正确的 JSON。

# gwt - 如何在原生 GWT 中实现双向数据绑定？

> ID：15568268
> 
> 赞同：4
> 
> 时间：2013-03-22T10:38:23.950
> 
> 标签：gwt

我们已经使用 GWT 大约 4 年了。本机 GWT 中最常讨论的特性之一是数据绑定。阅读另一个 Google 产品的 AngularJs，我发现了[http://devgirl.org/2013/03/21/fun-with-angularjs/](http://devgirl.org/2013/03/21/fun-with-angularjs/)。我不想使用 GXT 或任何其他第三方工具。我也希望避免与生成器相关的解决方案。

1.  **有什么方法可以在纯本机 GWT 中实现？**

2.  **GWT 不能开箱即用地提供这个有什么具体原因吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:22:26.200

你试过[GWT 果胶](http://code.google.com/p/gwt-pectin/)吗？

前段时间我在一个更大的项目中成功地使用了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T08:03:07.010

我建议你试试 HexaBinding，它是非侵入性的，只专注于数据绑定。这是链接：[https ://github.com/learno/hexa.tools/blob/master/hexa.binding/README.md](https://github.com/ltearno/hexa.tools/blob/master/hexa.binding/README.md)

它适用于纯 Java、GWT，并且很快也适用于 Android 和 JavaFX。它甚至可以与 J2Objc 一起使用，但还不确定……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:48:26.330

我读过你在 devgirl 上提到的关于 AngularJS 的帖子。在那篇文章中，“2 路数据绑定”是指代码的属性，用于自动反映视图当前显示的数据发生的更改。

这是自 2.1 版以来在 GWT 中使用[Cell Widgets实现的](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets)

在我上面链接的 Cell Widgets 文档的第一段中，明确指出：

> 单元小部件可以接受来自任何类型数据源的数据。数据模型处理异步更新以及推送更新。**当您更改数据时，视图会自动更新。**

如果您想在 GWT 中做一些与 devGirl 帖子中的[示例](http://embed.plnkr.co/dECGEtvMvcMwabCP1IoZ/preview)一样基本的事情，您需要编写一个 onKeyup 处理程序（在 AngularJS 中，您应该为此编写一个[Scope ），它将您输入的内容复制到链接标签。](http://docs.angularjs.org/guide/scope)像这样的东西：

```
...
final TextBox nameField = new TextBox();
final Label enteredName = new Label("");
...
    public void onKeyUp(KeyUpEvent event) {
        enteredName.setText(nameField.getText());
    }
... 
```

# html - 动态/移动菜单中的菜单标题

> ID：15568269
> 
> 赞同：1
> 
> 时间：2013-03-22T10:38:30.053
> 
> 标签：html, css

好的，简单地说，我最近在我的一个导航链接中加入了一个下拉菜单，您单击导航选项，菜单就会被淹没，没有问题，但是当您在移动设备上查看该网站时，虽然菜单选项在那里，标题不是..

我的正常导航菜单如下：

> ***主页 关于 产品 Bullion Contacts***

***产品***是下拉部分。

这是我目前在移动菜单中得到的，

> 主页
> 关于
> 主页 1
> 主页 2
> 主页 3
> 主页 4
> Bullion
> 联系方式

这就是我想要的样子

> 主页
> 关于
> 产品
>    主页 1
>    主页 2
>    主页 3
>    主页 4
> Bullion
> 联系方式

你和我到目前为止？我希望如此，
现在这是导航菜单的移动 CSS；

```
 /* Mobile UI */

#mobileUI-site-titlebar {
    background: url('images/headerM.png') 0px -35px;
    box-shadow: inset 0px 15px 30px 0px rgba(255,255,255,0.1);
}

#mobileUI-site-title {
    color: #fff;
    text-shadow: -1px -1px 1px rgba(0,0,0,1);
    line-height: 51px;
    font-size: 1.5em;
}

#mobileUI-site-nav-opener {
    width: 50px;
    background: url('images/mobileUI-site-nav-opener-bg.svg') 

center center no-repeat;
    text-indent: -9999em;
    height: 50px;
    opacity: 0.5;
}

#mobileUI-site-nav-opener:active {
    opacity: 1.0;
}

#mobileUI-site-nav {
    background: #1e1e1e top left repeat-x;
    box-shadow: inset -5px 0px 60px 0px rgba(0,0,0,0.25);
}

#mobileUI-site-nav-inner {
    padding: 1em 0 1em 0;
}

.mobileUI-site-nav-link {
    text-shadow: -1px -1px 0 rgba(0,0,0,0.25);
    color: #fff;
    text-decoration: none;
    font-size: 1.4em;
    padding: 0.5em 1em 0.5em 1em;
} 
```

这是导航菜单的html..

```
 <nav class="mobileUI-site-nav" id="site-nav">
                    <ul>
                        <li><a href="#">Homepage</a>

                        </li>
                        <li><a href="#">About Us</a>

                        </li>

                         <li class="headLink">Products
                                <ul id"cssdropdown">
                                    <li><a href="#">Home1</a>

                                    </li>
                                    <li><a href="#">Home4</a>

                                    </li>
                                    <li><a href="#">Home2</a>

                                    </li>
                                    <li><a href="#">Home3</a>

                                    </li>
                                    <li><a href="#">Home5</a>

                                    </li>
                                </ul>
                            </li>
                            <li><a href="#">Bullion</a>

                            </li>
                            <li class="current_page_item"><a href="#">Contact Us</a>

                            </li>
                        </ul>
                </nav> 
```

希望这会让它更清楚一点..这是我的桌面导航..
![在此处输入图像描述](../Images/cfe9540c608b14ee862dc87c67344fa3.png)

这是移动导航..
![在此处输入图像描述](../Images/4cccaa8a310efb4aaa9db6544dd7c77d.png)

我知道对齐已经失效，但现在我只想固定移动元素。
所以基本上，我希望标题***产品***出现在移动导航菜单中。我以为它会自动出现，但我显然做错了什么。
任何帮助将不胜感激！

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:49:38.830

从您的代码中，我只能确定您希望 #cssdropdown 位于左侧...只需将此 css 代码添加到您的 css...

**CSS：-**

```
#cssdropdown { margin-left:5px; } //Increase it as your wish 
```

# c# - 将架构添加到 XmlSchemaSet 时出错

> ID：15568277
> 
> 赞同：0
> 
> 时间：2013-03-22T10:38:46.660
> 
> 标签：c#, xml, xsd

我正在尝试将 xsd 添加到 XmlSchemaSet 中，但出现以下错误“根级别的数据无效。第 1 行，位置 1。”

```
 XmlSchemaSet schemas = new XmlSchemaSet();
        schemas.Add("", XmlReader.Create(new StringReader(@"C:\source\Net4\Clocks\Handlers\XML_Schemas\test.xsd")));

<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="interface">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="node1" type="xs:string" />
        <xs:element name="node2" type="xs:string" />
        <xs:element name="node3" type="xs:string" />
        <xs:element name="node4" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="node5" type="xs:unsignedByte" />
              <xs:element name="node6">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="node6" type="xs:dateTime" />
                    <xs:element name="node7" type="xs:string" />
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:43:47.440

您需要将文件的内容传递给`StringReader`，而不是文件的路径。

```
var pathToFile = @"C:\source\Net4\Clocks\Handlers\XML_Schemas\test.xsd";

var reader = new StringReader(File.ReadAllText(pathToFile));

schemas.Add("", XmlReader.Create(reader)); 
```

添加阅读器的替代方法`XmlSchemaSet`是

```
schemas.Add("", new XmlTextReader(pathToFile)); 
```

# java - 线程同步行为

> ID：15568278
> 
> 赞同：1
> 
> 时间：2013-03-22T10:38:49.477
> 
> 标签：java, multithreading, synchronized

```
class Untitled {
    public static void main(String[] args) {
        MyRunnable r1 = new MyRunnable();
        Thread t1 = new Thread(r1,"Thread 1:");
        Thread t2 = new Thread(r1,"Thread 2:");
        t1.start();
        t2.start();

    }
}

class MyRunnable implements Runnable
{
    String s1 = "Hello World";
    String s2 = "Hello New World";
    public void run()
    {
        synchronized(s1)
        {
            for(int i =0;i<3;++i)
            System.out.println(Thread.currentThread().getName()+s1);

        }
        synchronized(s2)
        {
            for(int i = 0;i<3;++i)
            System.out.println(Thread.currentThread().getName()+s2);
        }

    }
} 
```

输出：

```
Thread 1:Hello World
Thread 1:Hello World
Thread 1:Hello World
Thread 1:Hello New World
Thread 2:Hello World
Thread 1:Hello New World
Thread 2:Hello World
Thread 1:Hello New World
Thread 2:Hello World
Thread 2:Hello New World
Thread 2:Hello New World
Thread 2:Hello New World 
```

为什么在执行第一个同步块时即使锁对象不同也不能`Thread2`执行`run()`方法中的第二个同步块。执行是否在第一个同步块处等待直到离开该块？`Thread1``Thread2``Thread1`

如果是这样如何使两个同步块同时运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T10:43:17.030

> Thread2 的执行是否在第一个同步块处等待，直到 Thread1 离开该块？

是的，这就是想法 - thread2 一个接一个地执行块。如果它被阻塞并且无法进入第一个，它将在那里等待直到`s1`锁可用。

> 如果是这样如何使两个同步块同时运行？

您需要将它们拆分为两个不同的可运行文件，并为每个文件使用一个线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T10:43:08.283

因为在 run 方法中的语句是按顺序执行的，而不是并行执行的。

因此，线程 1 或线程 2 获得 s1 other 的锁的人将等待直到它被释放。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T10:44:09.517

这两个块是一个接一个，这意味着线程 2 必须先通过块 1，然后才能通过块 2

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T10:45:25.517

> 为什么Thread1在执行第一个同步块时，线程2不能在run()方法中执行第二个同步块

代码逐行执行，执行不会跳转到下一个块，线程 2 等待线程 1 离开第一个同步块。

> Thread2 的执行是否在第一个同步块处等待，直到 Thread1 离开该块

是的。

> 如果是这样如何使两个同步块同时运行？

所以将它们保存在单独的可运行实例中。并且不是在一个序列中一个接一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T10:46:47.533

它只是编译器执行代码，即编译器按它们编写的方式按顺序执行代码。线程 2 不能跳过第一个代码块。它将首先执行第一个块然后其他块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T10:56:01.013

这是让它们同时运行的示例。请注意，我不仅将每个循环放在单独的线程中，而且还将同步的范围缩小到仅打印。

```
public class Test {
  static class MyRunnable implements Runnable {
    final String s1 = " Hello World - ";
    final String s2 = " Hello New World - ";
    static final int n = 10;

    @Override
    public void run() {
      // Two loops in two threads.
      new Thread(new Runnable() {
        @Override
        public void run() {
          for (int i = 0; i < n; ++i) {
            // Scope reduced.
            synchronized (s1) {
              System.out.println(Thread.currentThread().getName() + s1 + i);
            }
          }
        }
      }, Thread.currentThread().getName() + "(a)").start();
      // Two loops in two threads.
      new Thread(new Runnable() {
        @Override
        public void run() {
          for (int i = 0; i < n; ++i) {
            // Scope reduced.
            synchronized (s2) {
              System.out.println(Thread.currentThread().getName() + s2 + i);
            }
          }
        }
      }, Thread.currentThread().getName() + "(b)").start();
    }
  }

  public void test() {
    MyRunnable r1 = new MyRunnable();
    Thread t1 = new Thread(r1, "Thread 1:");
    Thread t2 = new Thread(r1, "Thread 2:");
    t1.start();
    t2.start();
  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T11:08:37.323

```
class ThreadExample {
    public static void main(String[] args) {
        MyRunnable15756 r1 = new MyRunnable15756();
        Thread t1 = new Thread(r1,"Thread 1:");
        Thread t2 = new Thread(r1,"Thread 2:");
        t1.start();
        t2.start();

    }
}

class MyRunnable15756 implements Runnable
{
    String s1 = "Hello World";
    String s2 = "Hello New World";
    Runnable runnable1 =  new Runnable(){
        @Override
        public void run() {
              synchronized(s1)
                {
                    for(int i =0;i<30;++i)
                    System.out.println(Thread.currentThread().getName()+s1);

                }

        }
    };

    Runnable runnable2 =  new Runnable(){
        @Override
        public void run() {
             synchronized(s2)
                {
                    for(int i = 0;i<30;++i)
                    System.out.println(Thread.currentThread().getName()+s2);
                }

        }
    };
    public void run()
    {

        new Thread(runnable1).start();

        new Thread(runnable2).start();

    }
} 
```

# sql - SQL GROUP BY 或 JOIN

> ID：15568283
> 
> 赞同：4
> 
> 时间：2013-03-22T10:39:11.630
> 
> 标签：sql, join, group-by

我正在使用 SQL 2008，只是无法让这个查询工作。我有一张表，里面有航班价格的详细信息。每条路线每天都有很多行，我想返回路线每天的最低价格以及 DateAdded（添加行的日期时间）。我快到了，因为我似乎设法获得了每天最低的退货价格，但我似乎无法获得正确的退货日期。下面的代码似乎可以返回每天的最低价格，但我认为我需要某种加入来返回 DateAdded？

```
ALTER PROCEDURE [dbo].[FlightInfoLowestPricePerDay]
(
@AirportFrom    varchar(5),
@AirportTo      varchar(5)
)

AS
select  DATEADD(dd, 0, DATEDIFF(dd, 0, TimeDeparture)) as FlightDate, MIN(Price) as MinPrice

from FlightInfo
where AirportFrom = @AirportFrom and AirportTo = @AirportTo
AND TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))

Group By DATEADD(dd, 0, DATEDIFF(dd, 0, TimeDeparture))
Order by FlightDate ASC 
```

我已经尝试过诸如下面的代码之类的东西，但是我还没有完全理解联接，因此已经挣扎了很长时间，尽管我确定我错过了一些非常简单的东西！

```
ALTER PROCEDURE [dbo].[FlightInfoLowestPricePerDay]
(
@AirportFrom    varchar(5),
@AirportTo      varchar(5)
)

AS
select  DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture)) as FlightDate, MIN(fi1.Price)     as       MinPrice, fi2.DateAdded

from FlightInfo 
fi1 join FlightInfo fi2 on fi1.Price = fi2.Price
where fi1.AirportFrom = @AirportFrom and fi1.AirportTo = @AirportTo
AND fi1.TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))

Group By DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture))
Order by FlightDate ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:30:16.073

您可以进行两个子查询（一个获取每天的小价格，第二个获取 DateAdded）

```
SELECT  f1.FlightDate, f1.MinPrice, f2.DateAdded From  
(  
    SELECT  
        DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture)) as FlightDate,
        MIN(fi1.Price) as MinPrice
    FROM FlightInfo fi1
    WHERE fi1.AirportFrom = @AirportFrom and fi1.AirportTo = @AirportTo
        AND fi1.TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
    Group By 
        DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture))
) f1
INNER JOIN 
(
    SELECT DISTINCT
        DATEADD(dd, 0, DATEDIFF(dd, 0, fi2.DateAdded)) AS DateAdded, 
        Price FROM FlightInfo fi2
    WHERE fi2.AirportFrom = @AirportFrom and fi2.AirportTo = @AirportTo
        AND fi2.TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
) f2 ON f2.Price = f1.MinPrice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:44:01.917

在 Group By 中添加 fi2.DateAdded

```
ALTER PROCEDURE [dbo].[FlightInfoLowestPricePerDay]
(
@AirportFrom    varchar(5),
@AirportTo      varchar(5)
)

AS
select  DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture)) as FlightDate, MIN(fi1.Price)     as       MinPrice, Cast(Convert(varchar(20),fi2.DateAdded,101) as datetime) DateAdded

from FlightInfo 
fi1 join FlightInfo fi2 on fi1.Price = fi2.Price
where fi1.AirportFrom = @AirportFrom and fi1.AirportTo = @AirportTo
AND fi1.TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))

Group By DATEADD(dd, 0, DATEDIFF(dd, 0, fi1.TimeDeparture)),Cast(Convert(varchar(20),fi2.DateAdded,101) as datetime)
Order by FlightDate ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:53:04.717

好的，我决定简化一下，因为我已经浪费了太多时间，所以现在我将特定日期传递给查询并多次运行查询以获得我需要的结果：

```
ALTER PROCEDURE [dbo].[FlightInfoLowestPriceDateAddedForSpecificDate]
(
@AirportFrom    varchar(5),
@AirportTo      varchar(5),
@Date           datetime
)

AS

select  top 1 *
from FlightInfo 

where AirportFrom = @AirportFrom and AirportTo = @AirportTo
AND DATEADD(dd, 0, DATEDIFF(dd, 0, TimeDeparture)) = DATEADD(dd, 0, DATEDIFF(dd, 0, @Date))

Order by Price asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:31:49.097

您想为此使用窗口功能。一种方法是`row_number()`：

```
select flightDate, price
from (select DATEADD(dd, 0, DATEDIFF(dd, 0, TimeDeparture)) as FlightDate, fi.*,
             ROW_NUMBER() over (partition by airportFrom, airportTo, DATEADD(dd, 0, DATEDIFF(dd, 0, TimeDeparture)) order by price) as seqnum
      from FlightInfo fi
      where AirportFrom = @AirportFrom and AirportTo = @AirportTo and
            TimeDeparture > DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
     ) fi
where seqnum = 1 
```

如果您使用的是较新版本的 SQL Server，则可以利用`date`数据类型：

```
select flightDate, price
from (select cast(TimeDeparture as date) as FlightDate, fi.*,
             ROW_NUMBER() over (partition by airportFrom, airportTo, cast(TimeDeparture as date) order by price) as seqnum
      from FlightInfo fi
      where AirportFrom = @AirportFrom and AirportTo = @AirportTo and
            TimeDeparture > cast(getdate() as date)
     ) fi
where seqnum = 1 
```

# scala - 使用 Gatling 将场景模块化以按顺序运行

> ID：15568284
> 
> 赞同：22
> 
> 时间：2013-03-22T10:39:14.070
> 
> 标签：scala, performance-testing, gatling

我正在尝试模块化 Gatling 中的一系列性能测试。

有几个测试通过页面执行相同的初始路径，所以我认为我可以将它们分解为一系列场景，每个场景都是在自己的文件中定义的一系列共享操作，然后是最终的模拟定义一个接一个地执行指定的场景。

然后我需要让我的模拟按顺序运行这些场景；但我只能找到如何同时运行它们，或者每个之间有指定的延迟。是否有任何模拟设置选项可以在不指定任意延迟的情况下一个接一个地运行定义的场景？

**编辑**

目前，我有以下一组文件：

主页Headers.scala

```
package advanced

object homepageHeaders {

    val homepage_headers_1 = Map(
        "Accept" -> """text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8""",
        "If-Modified-Since" -> """Wed, 20 Mar 2013 15:36:31 +0000""",
        "If-None-Match" -> """"1363793791""""
    )

} 
```

主页Chain.scala

```
package advanced
import com.excilys.ebi.gatling.core.Predef._
import com.excilys.ebi.gatling.http.Predef._
import com.excilys.ebi.gatling.jdbc.Predef._
import akka.util.duration._
import homepageHeaders._

object homepageChain {

    val homepageChain = 
        //Homepage
        exec(http("homepage")
                    .get("/")
                    .headers(homepageHeaders.homepage_headers_1)
            )

} 
```

pageHeaders.scala

```
package advanced

object pageHeaders {

    val page_headers_1 = Map(
            "Accept" -> """text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"""
    )

} 
```

pageChain.scala

```
package advanced
import com.excilys.ebi.gatling.core.Predef._
import com.excilys.ebi.gatling.http.Predef._
import com.excilys.ebi.gatling.jdbc.Predef._
import akka.util.duration._
import pageHeaders._

object pageChain {

    val pageChain = 
        //Page Menu
        exec(http("page request")
                    .get("/page1")
                    .headers(pageHeaders.page_headers_1)
            )

} 
```

pageSimulation.scala

```
package advanced
import com.excilys.ebi.gatling.core.Predef._
import com.excilys.ebi.gatling.http.Predef._
import com.excilys.ebi.gatling.jdbc.Predef._
import homepageChain._
import pageChain._

class pageSimulation extends Simulation {

    val urlBase = "http://www.mytestsite.com"

    val httpConf = httpConfig
            .baseURL(urlBase)
            .acceptHeader("image/png,image/*;q=0.8,*/*;q=0.5")
            .acceptEncodingHeader("gzip, deflate")
            .acceptLanguageHeader("en-gb,en;q=0.5")
            .userAgentHeader("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0")

    val pageScenario = scenario("Bodycare Scenario")
        .exec(homepageChain.homepageChain)
        .exec(pageChain.pageChain)

    setUp(
            homepageScenario.users(1).protocolConfig(httpConf)
        )
} 
```

我得到的错误是：

```
14:40:50.800 [ERROR] c.e.e.g.a.ZincCompiler$ - /Gatling/user-files/simulations/advanced/pageChain.scala:13: not found: value exec
14:40:50.807 [ERROR] c.e.e.g.a.ZincCompiler$ -          exec(http("page request")
14:40:50.808 [ERROR] c.e.e.g.a.ZincCompiler$ -          ^
14:40:53.988 [ERROR] c.e.e.g.a.ZincCompiler$ - /Gatling/user-files/simulations/advanced/homepageChain.scala:13: not found: value exec
14:40:53.989 [ERROR] c.e.e.g.a.ZincCompiler$ -          exec(http("homepage")
14:40:53.989 [ERROR] c.e.e.g.a.ZincCompiler$ -          ^
14:41:17.274 [ERROR] c.e.e.g.a.ZincCompiler$ - two errors found
Exception in thread "main" Compilation failed 
```

显然我在我的定义中遗漏了一些东西，但我只是不明白它是什么

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T11:00:49.090

您可以组合链，而不是场景。

例如：

```
val login = exec(...)...
val foo = exec(...)...
val bar = exec(...)...
val scn1 = scenario("Scenario1").exec(login).exec(foo)
val scn2 = scenario("Scenario2").exec(login).exec(bar) 
```

清除？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-16T14:42:34.033

您可以级联场景，以便它们按如下顺序执行：

```
val allScenarios = scenario1.exec(scenario2).exec(scenario3) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-16T22:23:17.703

另一种选择可能是这样的：

```
object GetAllRunDetails {
    val getAllRunDetails = exec( ....)
}

object GetRunIdDetails{
   val getRunIdDetails =  exec( .... )
}

val scn1 = scenario("Scenario 1")
    .exec(GetAllRunDetails.getAllRunDetails)

val scn2 = scenario("Scenario 2")
    .exec(GetRunIdDetails.getRunIdDetails)

setUp(scn1.inject(atOnceUsers(1)),
      scn2.inject(atOnceUsers(1))); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-26T06:45:39.937

感谢 Stephane，他还给了我一个解决方案来创建多个链的对象并将其传递给场景。

```
val login = exec(...)...
val foo = exec(...)...
val bar = exec(...)...
val scn_inpute = Seq(login, foo, bar)
val scn1 = scenario("Scenario1").exec(scn_inpute) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-26T17:54:00.753

由于同一模拟中的**Gatling 3.4**场景现在可以使用`andThen`.

```
setUp(
  parent.inject(injectionProfile)
    // child1 and child2 will start at the same time when last parent user will terminate
    .andThen(
      child1.inject(injectionProfile)
        // grandChild will start when last child1 user will terminate
        .andThen(grandChild.inject(injectionProfile)),
      child2.inject(injectionProfile)
    )
) 
```

见[官方文档](https://gatling.io/docs/current/general/simulation_setup/?highlight=andthen#sequential-scenarios)。

# struct - 在类图中提供结构

> ID：15568286
> 
> 赞同：1
> 
> 时间：2013-03-22T10:39:18.807
> 
> 标签：struct, uml

我有 struct chartManager 包含系列结构和包含点结构的结构系列。他们都在图表类。像这样的东西

```
Class Chart
{
protected:
  struct points
  {
    int seriesPoints[10];
  };

  struct series
  {
    points seriespoints;
    char seriesName[20];
  };

  struct pageManager
  {
    char chartName[20];
    series totalSeries[5];
  };
}; 
```

我如何在类图中显示这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:09:09.780

一个好的答案是：永远不要从特定语言转到 UML :)

尽管如此，对我来说，具有基数的组合/聚合是要走的路（结构与类几乎相同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-10T14:52:32.990

我看到这是一篇旧帖子，但也许我可以帮助某人回答我的问题。
描述上述示例的最佳方式是使用**“嵌套”**连接。组合或聚合的先决条件是它们是独立的，而不是在类本身内。

# firefox - 谷歌地图在缩小firefox19时崩溃

> ID：15568288
> 
> 赞同：0
> 
> 时间：2013-03-22T10:39:25.583
> 
> 标签：firefox, google-maps-api-3, hardware-acceleration

我们在我们的应用程序中使用了 Google Map API V3，似乎发现了一个奇怪的问题，该问题并非在所有机器上都可以重现。以下是我们可以重现的机器配置：操作系统：Windows7 显卡：128MB（我想这应该足够了，因为我觉得问题与这些参数有关。）

在我们的应用程序中从 Google 地图缩小时，我们从 Firefox 19 收到以下错误，并且它完全崩溃：l

AdapterVendorID: 0x8086, AdapterDeviceID: 0x 166GL 上下文？GL 上下文+ GL 层？GL Layers+ xpcom_runtime_abort(###!!! ABORT：帧缓冲区未完成 – 错误 0x8cd6，mFBOTextureTarget 0xde1，aRect.width 4736，aRect.height 1967：文件 /builds/slave/rel-m-rel-osx64_bld-0000000000/build/ gfx/layers/opengl/LayerManagerOGL.cpp，第 1446 行）产品 ID：{ec8030f7-c20a-464f-9b0e-13a3a9e97384}

在谷歌上寻找类似的问题后，我们发现关闭硬件加速后，地图不再崩溃。然而，在我们的案例中，这不是一个可行的解决方案，因为我们有一个网站，我们不能要求每个用户关闭硬件加速。

谁能想到一些可能的原因，为什么 Firefox 在我们的应用程序中从谷歌地图缩小时崩溃？硬件加速到底想做什么？

如果需要任何进一步的信息，请告诉我。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:36:22.013

它对我来说刚刚开始崩溃，但它似乎只有在我使用 Open GL 时才会发生。如果我把它关掉，它工作正常......到目前为止！

# java - 从 jasper JspServlet 停止 PWC6117 错误？

> ID：15568294
> 
> 赞同：1
> 
> 时间：2013-03-22T10:39:52.890
> 
> 标签：java, jsp, jetty

对于我的 spring webapp，我将所有 JSP 文件保存在 WEB-INF 中，以确保人们无法通过浏览器直接访问它们。

如果有人试图直接访问一个 jsp 文件（例如[http://myapp.com/index.jsp](http://myapp.com/index.jsp)），他们会得到一个正确的 404 错误。但是，我的日志中出现以下错误：

```
SEVERE: PWC6117: File "/myapp/webapp/index.jsp" not found 
```

我不想记录这个，因为我对有人在寻找 JSP 文件时得到 404 不感兴趣——他们不应该找到它。但是此错误消息意味着我的日志中充满了“严重”错误。有什么方法可以停止这种日志记录，或者让 jasper 完全忽略来自客户端的 JSP 请求？

我正在使用码头 7.x

谢谢！

# web - 如何播放 24 小时视频 Web 的一部分

> ID：15568297
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:15.913
> 
> 标签：web, video-streaming, media-player, wowza

我有 24 小时的视频，但根据用户的要求，我想让他只观看一段视频。我应该使用什么播放器或什么系统来实现这个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:18:57.650

您可以使用时间表。

看看[这个](http://www.wowza.com/forums/content.php?427-How-to-do-scheduled-streaming-with-Stream-class-streams-%28application-module%29)。

# xna - 3D旋转和相机角度？

> ID：15568298
> 
> 赞同：1
> 
> 时间：2013-03-22T10:40:18.480
> 
> 标签：xna

我的轮换有点问题。我的模型旋转了，但随后稍微偏离了不在中心的摄像机角度位置。这是我的轮换代码，正确吗？

```
matrix m = matrix.createrotationZ(MathHelper.ToRadian(30))
matrix object = matrix.createtranslation(objectPos) * m; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:30:10.450

正如 Lucius 在他的评论中指出的那样，矩阵表示一系列线性变换。将它们相乘的顺序很重要。

`RotationMatrix`*`TranslationMatrix`表示“在模型空间中围绕其轴旋转此模型，然后将旋转后的模型转换为世界空间。”

`TranslationMatrix`*`RotationMatrix`表示“将此模型转换为世界空间，然后围绕世界原点旋转模型。”

更改矩阵乘法的顺序。

`*`顺便说一句，当您开始向序列添加更多转换时，使用运算符进行矩阵相乘会很快变得昂贵。它最终可能会创建许多从未实际使用过的额外矩阵。您可以通过使用类上的静态[`Multiply()`](http://msdn.microsoft.com/en-us/library/bb198134.aspx)方法来优化它`Matrix`。

# javascript - 我被以下 JS 卡住了，即使复选框未选中 rect() 函数被调用

> ID：15568300
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:21.733
> 
> 标签：javascript, jquery

我有一个问题。虽然我正在检查复选框是否选中，然后调用 rect() 函数，但即使未选中，也会调用 rect()。你能帮忙吗？我已经检查了功能函数 OnChangeCheckbox （复选框）中复选框的选中/取消选中

```
<html lang="en">
    <head>
        <script>
            $(function() {
                $( "#check" ).button();
                $( "#format" ).buttonset();
            });
        </script>

        <style>
            #format { margin-top: 2em; }
        </style>

        <script>
            function OnChangeCheckbox (checkbox) {
                if (checkbox.checked == true) {
                    rect();
                }
                else if(!checkbox.checked)
                {
                    alert("Uncheck");             
                }
            }
        </script>

        <script>
            function rect() {
                var canvas = document.getElementById('canvasSignature'),
                ctx = canvas.getContext('2d'),
                rect = {},
                drag = false;
                function init() {
                    canvas.addEventListener('mousedown', mouseDown, false);
                    canvas.addEventListener('mouseup', mouseUp, false);
                    canvas.addEventListener('mousemove', mouseMove, false);
                }

                function mouseDown(e) {
                    rect.startX = e.pageX - this.offsetLeft;
                    rect.startY = e.pageY - this.offsetTop;
                    drag = true;
                }

                function mouseUp() {
                    drag = false;
                }

                function mouseMove(e) {
                    if (drag) {
                        rect.w = (e.pageX - this.offsetLeft) - rect.startX;
                        rect.h = (e.pageY - this.offsetTop) - rect.startY ;
                        //ctx.clearRect(0,0,canvas.width,canvas.height);
                        draw();
                    }
                }

                function draw() 
                {
                    ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
                }

                init();
            }
        </script>

    </head>

    <div id="format">
        <input type="checkbox" id="check1"  onclick="OnChangeCheckbox(this)" /><label for="check1">Rectangle</label>
    </div>

    <div id="canvasDiv">
        <canvas id="canvasSignature" width="580px" height="788px" style="border:2px solid    #000; background: #FFF;"></canvas>
    </div>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:54:24.553

尝试

```
 if (checkbox.checked === true) {
         rect();
} 
```

# c# - wpf itemlist不更新值

> ID：15568302
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:29.787
> 
> 标签：c#, .net, wpf, listbox

所以我有三件事：

*   窗口中的列表框
*   授予我访问 ObservableList 的数据库类
*   联系人实现 INotifyChanged

在我的主窗口中，我有三个按钮（一个用于新列表条目，一个用于编辑，一个用于删除项目）

我这样填写列表：

```
lbKontakte.ItemsSource = DB.GetInstance().Kontakte; 
```

而 Kontakte 是 ObservableCollection

我可以使用创建一个新条目

```
DB.GetInstance().Kontakte.Add(New Kontakt(...)); 
```

或使用删除条目

```
DB.GetInstance().Kontakte.Remove(...); 
```

Boh 动作在 ListBox 中立即可见。

但是，如果我修改一个值，我没有使用任何代码。我有一个绑定到联系人姓名字段的文本框。如果我对其进行更改，理论上应该立即对绑定的联系人对象进行更改。

但是，如果我确实修改了文本，则更改不会在 ListBox 中变得可见。如果我暂停代码并查看对象，我可以看到它的名称字段已正确更改。

为什么我的 ListBox 没有更新？

PS：Contact 确实使用以下代码实现了 INotifyChanged：

```
public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, e);
        }
    } 
```

和

```
public String Name
    {
        get { return _name; }
        set { _name = value; OnPropertyChanged(new PropertyChangedEventArgs("Name")); }
    } 
```

编辑：文本框不是主窗口的一部分，但如果用户单击编辑按钮，则窗口显示为对话框。然后在 Constructor 中为 Window 提供转换为 Kontakt 的 selectedItem。像这样绑定到字段：

```
<TextBox Name="txtName" Grid.Column="1" Grid.Row="0" Margin="4" Text="{Binding Path=Name}"></TextBox> 
```

和

```
public KontaktAddUI(Kontakt kontaktToEdit)
    {
        InitializeComponent();
        this.kontaktToEdit = kontaktToEdit;
        this.MainGrid.DataContext = kontaktToEdit;
    } 
```

## 正确答案在评论中，再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:12:09.120

如果您的项目属性已更改这是一个已知问题，您的问题`ObservableCollection`不会得到通知
要解决此问题，您需要将您的`INotifyPropertyChanged`事件连接到您的`CollectionChanged`事件`ObservableCollection`

[在这里](https://stackoverflow.com/a/5256827/1993545)，您可以看到一个示例，您可以如何做到这一点。

# asp.net - 如何根据文件夹中的大小和日期删除文件

> ID：15568303
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:34.383
> 
> 标签：asp.net, directory

假设我在一个文件夹中有 4 个文件 昨天的 2 个文件 1 个文件 - 1 mb 2nn 文件 - 2mb 2 个文件今天第一个文件 - 5 mb 第二个文件 - 10 mb

首先，我要检查每个文件的日期，并根据该文件检查大小文件，最小的文件将从文件夹中删除

在我的代码中，我删除了所有具有最小大小的文件，但我想删除具有最小大小的文件

这是我的代码：

```
 private void DeleteFiles()
    {
        DirectoryInfo di = new DirectoryInfo("E:\\test");
        var files = di.GetFiles();
        var maxFile = files.Max(r => r.Length);

        foreach (FileInfo file in files.Where(r => r.Length < maxFile))
        {
            file.Delete();
        }   
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        this.DeleteFiles();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:01:43.830

像这样的东西应该工作：

```
private void DeleteFiles()
{
  var di = new DirectoryInfo("E:\\test");
  var files = di.GetFiles().GroupBy(f => f.LastWriteTime.Date);

  foreach (var fileGrp in files)
  {
    var maxFile = fileGrp.Max(r => r.Length);

    foreach (FileInfo file in fileGrp.Where(r => r.Length < maxFile))
    {
      file.Delete();
    }
  }
} 
```

# mysql - 带有远程数据库的 Rails 应用程序 - 我应该在我的应用程序中复制还是远程连接

> ID：15568306
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:37.197
> 
> 标签：mysql, ruby-on-rails, postgresql

我正在为客户构建一个新的 Rails 应用程序。他们已经有一个单独的 Rails 应用程序来管理用户（使用所有标准的设计字段），并且不希望在两个应用程序中都维护用户，这是完全有意义的。

我可以使用 database.yml 连接到他们的远程数据库以获取连接详细信息，并在我的用户模型中建立连接：它可以工作，虽然有点慢（通过公共互联网）。我担心依赖这个远程数据库来查询很多东西会严重降低我的应用程序的速度。我也无法与远程数据库进行连接。

我的想法是在我的应用程序中复制用户表，并有一个每隔几个小时（甚至更频繁）运行一次的 cron 作业，以使我的表与“主”保持同步。

有什么理由不这样做吗？从设计的角度来看，这是一个糟糕的想法吗？

我应该提到我的数据库是 postgres 而远程数据库是 mysql。我也开始阅读 DbCharmer gem ( [http://dbcharmer.net/](http://dbcharmer.net/) )，但我还没有完全理解它。

- 编辑： -

我还应该提到，我需要从远程数据库中读取其他表，而不仅仅是用户表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:27:12.083

我建议在本地*缓存*他们的数据库，因此当您查找远程记录时，您将其记录在本地（如果它存在远程），或者如果远程不存在，则在本地记录*否定结果*- 您缓存远程记录不存在的记录. 请记住将负面结果缓存的时间少于正面结果。

然后，您可以查看本地缓存并查看是否有足够新鲜的结果可以返回，并且仅在本地缓存的结果过时或没有本地缓存​​的结果时才查询远程。

这就是我个人的做法；我会缓存而不是复制和同步。不过，您当然可以通过定期将通常提取的内容预取到缓存中来组合这两种方法。

本地缓存不需要使用 Pg，您可以轻松地使用 redis/memcached/whatever（我是 Pg 开发人员，所以我并不完全偏向于 Redis）。

# python - 如何让两个 Python 脚本通过 Internet 进行通信？

> ID：15568309
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:56.203
> 
> 标签：python, sockets, communication

我正在寻找一种让两个 Python 脚本通过 Internet 进行通信的方法。类似于 Socket.IO 对 NodeJS 所做的事情，但没有浏览器，并且在 Python 中。

持续连接（套接字？）在我的选择中是最好的，但如果这不可能或真的很困难，使用普通的 HTTP 请求也可以。

有没有框架可以做到这一点？如果是，是哪些？有适当的文件吗？如果不是，如果没有框架，这将如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:52:45.910

[`sockets`](http://docs.python.org/2/library/socket.html)确实是您正在寻找的。Python 文档在我链接的页面底部 有[很好的示例。](http://docs.python.org/2/library/socket.html#example)

至于框架，[扭曲](http://twistedmatrix.com/trac/)的可能有助于为您简化套接字构造和消息处理。

最后，在使用套接字编程时，我经常参考一个[非常有用的指南。](http://beej.us/guide/bgnet/)警告：本指南是为 C 编写的，但概念仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:46:55.020

You should try to do this with `xmlrpclib` : [http://docs.python.org/2/library/xmlrpclib.html](http://docs.python.org/2/library/xmlrpclib.html).
It handle HTTP request.

# sql - 文件流上传问题

> ID：15568310
> 
> 赞同：0
> 
> 时间：2013-03-22T10:40:56.670
> 
> 标签：sql, tsql, filestream

我正在尝试使用 Filestream 将图片插入数据库，我已经创建了表和列并创建了一个 Insert 语句，但我不断收到以下错误消息：

消息 515，级别 16，状态 2，第 2 行无法将值 NULL 插入列“id”，表“Racing.dbo.Course_Info”；列不允许空值。插入失败。该语句已终止。

第 1 列 - id - 唯一标识符 第 2 列 - RacecourseID - 这需要为 11 第 3 列 - filestream_data

那么你能告诉我我的插入语句有什么问题吗？

```
INSERT INTO Course_Info (RacecourseID, filestream_data)
VALUES ('11', (SELECT * 
   FROM OPENROWSET(BULK N'C:\Users\Administrator\Desktop\Pictures for Database\Racecourses\Cheltenham-Racecourse.jpg', SINGLE_BLOB) as rs)) 
```

谢谢

韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:55:02.920

我怀疑你会在这里踢自己。

```
USE Racing
INSERT INTO Course_Info(RaceCourseID,filestream_data)
SELECT 11, * FROM OPENROWSET(BULK N'C:\Users\Administrator\Desktop\Pictures for Database\Racecourses\Cheltenham-Racecourse.jpg', SINGLE_BLOB) rs 
```

将是一种方式。必须阅读错误消息 RaceCourseID，不能为空，意味着您必须输入一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:05:47.163

错误说明了一切：行的唯一标识符不可为空，并且您没有在列列表中指定它。另一个问题是您没有设置`RacecourseID`.

要设置这两个值，请修改您的查询，例如：

```
INSERT INTO Course_Info (id, RacecourseID, filestream_data)
SELECT newid(), 11, * FROM OPENROWSET(BULK N'filename.jpg', SINGLE_BLOB) as rs)) 
```

newid [()](http://msdn.microsoft.com/en-us/library/ms190348.aspx)将为每个插入的行生成一个新的唯一标识符，常量 11 将用于该`RacecourseID`字段。

# jsf - primefaces fileUpload 使用简单模式对文件进行图像预览

> ID：15568311
> 
> 赞同：1
> 
> 时间：2013-03-22T10:40:58.610
> 
> 标签：jsf, primefaces

形式：

```
<h:form enctype="multipart/form-data">  
    <p:fileUpload value="#{testController.file}" 
                  mode="simple"
                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  
</h:form> 
```

有没有办法在选择文件后添加要上传的文件的图像预览？我知道 fileUpload 的高级模式可以完成这项工作，但我需要它处于简单模式。

# javascript - Div Visibility 在 Firefox 中不起作用，内部图像不显示

> ID：15568312
> 
> 赞同：0
> 
> 时间：2013-03-22T10:41:03.373
> 
> 标签：javascript, css, firefox, razor

[编辑]问题现已解决

我在另一个包含可编辑内容的 div 中有一个编辑（带有图像的 div）按钮，我的计划是隐藏按钮，直到光标悬停在内容 div 上。

我的问题是，如果我`display:none;`在 CSS 中使用，然后使用 javascript 函数再次显示和隐藏 divButton，则图像不会在 FireFox 中显示。

如果我使用`element.style.visibility = "visible";`，那么 FireFox 根本不会显示 div。

任何输入将不胜感激谢谢:)

相关代码：

HTML

```
<div id="c1ContentSrc" class="widgetContent editable">
    @Html.Raw(HttpUtility.HtmlDecode(row.column1Content))
    <div id="c1ContentEdit" class="cmsEditButton"><img src="../../Content/images/cmsEdit.png" alt="edit" /></div>
</div> 
```

CSS

```
.cmsEditButton{
    display:none;
    position:absolute;
    top:37px;
    right:8px;
    width:16px;
    height:16px;
} 
```

备用 CSS

```
.cmsEditButton{
    visibility:hidden;
    position:absolute;
    top:37px;
    right:8px;
    width:16px;
    height:16px;
} 
```

javascript函数

```
function showEditButton(id, editId) {
    if(editId.style.display == "none"){
        if (!id.isContentEditable) {
            editId.style.display = "block";
        }
    }else{
        editId.style.display = "none";
    }
} 
```

备用 JavaScript 代码

```
function showEditButton(id, editId) {
    if (editId.style.visibility == "hidden" || editId.style.visibility == "") {
        if (!id.isContentEditable) {
            editId.style.visibility = "visible";
        }
    }else{
        editId.style.visibility = "hidden";
    }
} 
```

函数调用

```
document.getElementById("c1ContentSrc").addEventListener("mouseover", function () {
       showEditButton(document.getElementById("c1ContentSrc"), document.getElementById("c1ContentEdit"))
   }, false);

document.getElementById("c1ContentSrc").addEventListener("mouseout", function () {
       showEditButton(document.getElementById("c1ContentSrc"), document.getElementById("c1ContentEdit"))
   }, false); 
```

现在通过以下更改解决了问题，将图像移到剃刀输出上方，似乎有干扰，还删除了不必要的 div

```
 <div id="c1ContentSrc" class="widgetContent editable">
    <img id="c1ContentEdit" class="cmsEditButton" title="edit" src="../../Content/images/cmsEdit.png" alt="edit" />
    @Html.Raw(HttpUtility.HtmlDecode(row.column1Content))
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:48:29.063

而不是使用可见性；您可以使用

```
display:none;
display:block;
display:none !important;
style="display:none;" //inline css 
```

如果您正在使用显示，请避免使用可见性，您可以同时使用它们并实现正确的代码......

# javascript - URL in backbone.js single page app gets way too long (~98'000 characters)

> ID：15568321
> 
> 赞同：0
> 
> 时间：2013-03-22T10:41:25.847
> 
> 标签：javascript, backbone.js, single-page-application, backbone-routing

I have a JavaScript single page app (using backbone.js), where the app's state is stored as part of URL parameters. This webpage has a lot of checkboxes.

So if a user hits a URL like `http://my-app.org/project/#app/load?checkboxID[4053]=1&checkboxID[4054]=1&checkboxID[4055]=1&checkboxID[4056]=1&checkboxID[4057]=1&checkboxID[4058]=1&checkboxID[4059]=1...goes on and on, various further params...`

then the page configures itself (using Backbone.Router) with the given checkboxes selected. Notice the hash **#app** in the URL, meaning that the parameters are handled by the JavaScript app.

The problem is now that the app has now much more parameters than I previously thought of. Hence, with all checkboxes enabled, I get an URL that is about 98.000 characters long, whereas according to [this answer](https://stackoverflow.com/a/417184/1129950) it can only be 2.000 at most. Oops :-(

What's your advice to handle this? I thought maybe there is a smart way of "shortening"/"compressing" the URL string in JavaScript (like gzipping + base64 encoding the URL string), but even this does not shorten the URL enough to be under 2000 characters.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:58:06.160

我不认为通过 URL 传递 App 的状态是好的做法。您可以有一个适当命名空间的对象来存储状态。

```
var myApp = myApp || {};
myApp.state = myApp.state || {}; 
```

而当你使用 URL 来承载状态时，只需填充这个对象并使用它。

PS：这个答案可能不会让您满意，因为您正在寻找类似压缩的东西并且不想过多地更改您的代码。还是给你一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:49:04.987

您不能重新配置 url 以将参数读取为数组而不是单个项目，例如

```
checkboxId=[4053, 4054, 4054 ...] 
```

这将节省一些字符，您可以循环遍历所述数组中的 id。

如果“40”是一个普通字符，或者如果“4”是普通字符，您甚至可以从值中删除它并在运行脚本时添加它？

# c# - 在 WPF 中过滤 DataGrid

> ID：15568325
> 
> 赞同：20
> 
> 时间：2013-03-22T10:41:43.347
> 
> 标签：c#, wpf, datagrid, filter

我使用以下方法在数据网格中加载对象列表：

```
dataGrid1.Items.Add(model); 
```

`model`成为数据库中的数据。它有一个`Id(int)`,`Name(string)`和`Text(string)`

在我的数据网格中，我只显示`model`. 当我在文本框中输入内容时，现在如何过滤数据网格？

我在这个页面： http: [//msdn.microsoft.com/en-us/library/vstudio/ff407126](http://msdn.microsoft.com/en-us/library/vstudio/ff407126(v=vs.100).aspx) (v=vs.100).aspx但我不明白那里的代码，我无法解释如何我应该为我的问题转置它。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-22T13:30:56.360

有多种过滤收藏的方法

让我们建议这是您的项目类

```
public class Model
{
    public string Name
    {
        get;
        set;
    }
} 
```

你的收藏看起来像

```
 var ObColl = new ObservableCollection<Model>();

        ObColl.Add(new Model() { Name = "John" });
        ObColl.Add(new Model() { Name = "Karl" });
        ObColl.Add(new Model() { Name = "Max" });
        ObColl.Add(new Model() { Name = "Mary" }); 
```

## 方式1（谓词）：

```
 public MainWindow()
    {
        InitializeComponent();

        // Collection which will take your ObservableCollection
        var _itemSourceList = new CollectionViewSource() { Source = ObColl };

        // ICollectionView the View/UI part 
        ICollectionView Itemlist = _itemSourceList.View;

        // your Filter
        var yourCostumFilter= new Predicate<object>(item => ((Model)item).Name.Contains("Max"));

        //now we add our Filter
        Itemlist.Filter = yourCostumFilter;

        dataGrid1.ItemsSource = Itemlist;
    } 
```

## 方式2（FilterEventHandler）：

```
 public MainWindow()
    {
        InitializeComponent();

        // Collection which will take your Filter
        var _itemSourceList = new CollectionViewSource() { Source = ObColl };

       //now we add our Filter
       _itemSourceList.Filter += new FilterEventHandler(yourFilter);

        // ICollectionView the View/UI part 
        ICollectionView Itemlist = _itemSourceList.View;

        dataGrid1.ItemsSource = Itemlist;
    }

    private void yourFilter(object sender, FilterEventArgs e)
    {
        var obj = e.Item as Model;
        if (obj != null)
        {
            if (obj.Name.Contains("Max"))
                e.Accepted = true;
            else
                e.Accepted = false;
        }
    } 
```

## 扩展信息到方式 1

如果需要多个条件或一些复杂的过滤器，您可以将方法添加到您的 Predicat

```
 // your Filter
    var yourComplexFilter= new Predicate<object>(ComplexFilter);

    private bool ComplexFilter(object obj)
    {
        //your logic
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T12:31:11.693

这是使用 ICollectionView 的 Filter 属性的简单实现。假设您的 XAML 包含以下内容：

```
<TextBox x:Name="SearchTextBox" />
<Button x:Name="SearchButton"
        Content="Search"
        Click="SearchButton_OnClick"
        Grid.Row="1" />
<DataGrid x:Name="MyDataGrid"
          Grid.Row="2">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Lorem ipsum column"
                            Binding="{Binding}" />
    </DataGrid.Columns>
</DataGrid> 
```

然后在构造函数中，您可以获得数据的默认视图，您可以在其中设置过滤谓词，该谓词将为您的集合中的每个项目执行。CollectionView 不知道什么时候应该更新集合，因此当用户单击搜索按钮时，您必须调用 Refresh。

```
private ICollectionView defaultView;

public MainWindow()
{
    InitializeComponent();

    string[] items = new string[]
    {
        "Asdf",
        "qwer",
        "sdfg",
        "wert",
    };

    this.defaultView = CollectionViewSource.GetDefaultView(items);
    this.defaultView.Filter =
        w => ((string)w).Contains(SearchTextBox.Text);

    MyDataGrid.ItemsSource = this.defaultView;
}

private void SearchButton_OnClick(object sender, RoutedEventArgs e)
{
    this.defaultView.Refresh();
} 
```

在此 url，您可以找到 CollectionViews 的更详细说明： [http ://wpftutorial.net/DataViews.html](http://wpftutorial.net/DataViews.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-04T14:36:57.127

@WiiMaxx，不能评论为没有足够的代表。我会更加小心那里的直接演员表。一方面它们可能很慢，另一方面，如果将相同的过滤器应用于包含不同复杂类型数据的网格，您将遇到 InvalidCastException。

```
// your Filter
    var yourCostumFilter= new Predicate<object>(item =>
    {
        item = item as Model;
        return item == null || item.Name.Contains("Max");
    }); 
```

这不会破坏您的数据网格，并且如果转换失败也不会过滤结果。如果代码错误，对用户的影响会更小。最重要的是，由于“as”运算符没有像直接强制转换操作那样进行任何显式类型强制，过滤器会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:34:49.677

看看 DataBinding --> 在你的情况下不要将项目添加到你的网格中，而是设置 itemssource

```
<Datagrid ItemsSource="{Binding MyCollectionOfModels}" /> 
```

或者

```
dataGrid1.ItemsSource = this._myCollectionOfModels; 
```

如果您想要某种过滤、排序、分组，请查看[CollectionView](https://docs.microsoft.com/en-us/dotnet/api/system.windows.data.collectionview)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T07:20:22.883

您可以使用 dataview 过滤器来过滤数据网格行。

```
 DataView dv = datatable.DefaultView;

            StringBuilder sb = new StringBuilder();
            foreach (DataColumn column in dv.Table.Columns)
            {
                sb.AppendFormat("[{0}] Like '%{1}%' OR ", column.ColumnName, "FilterString");
            }
            sb.Remove(sb.Length - 3, 3);
            dv.RowFilter = sb.ToString();
            dgvReports.ItemsSource = dv;
            dgvReports.Items.Refresh(); 
```

其中“数据表”是提供给数据网格的数据源，使用字符串构建器构建过滤器查询，其中“过滤器字符串”是要在数据网格中搜索的文本并将其设置为数据视图，最后将数据视图设置为数据网格的项目源并刷新它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-25T11:22:01.597

我找到了一个愚蠢的方法，知道这是一个老问题，但是......只需在 DataGrid 对象上的 items 属性上使用 Filter 函数。像这样：（对不起，我只学了VB）

```
Public Property SearchName As String
    Get
        Return _SearchName
    End Get
    Set
        _SearchName = Value
        DG_drw_overview.Items.Filter = New Predicate(Of Object)(Function(x) x.Name.Contains(Value))           
    End Set
End Property 
```

每次在文本框中键入内容时，此属性都会更改。DG_drw_overview 是 DataGrid 实例。在 Predicate 中，对象代表您放入 DataGrid 中的对象。

然后将 SearchName 绑定到文本框

```
<TextBox x:Name="TB_search" 
         Text="{Binding SearchName, UpdateSourceTrigger=PropertyChanged}"/> 
```

将文本框的datacontext设置为主类（通常在InitializeComponent()之后）

```
TB_search.DataContext = Me 
```

# linq - 带有 group by 子句的 Linq 查询

> ID：15568328
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:41:48.880
> 
> 标签：linq

我的表有以下列：-

LevelId、LevelName、ScenarioId、TeamId。

我想在按teamId分组时选择与最小LevelId对应的LevelName

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:43:49.500

所以，你想要：

*   按团队 ID 分组
*   在每个组中，按级别 ID 排序
*   取第一个结果的级别名称

这听起来像：

```
var query = table.GroupBy(x => x.TeamId)
                 .Select(g => g.OrderBy(x => x.LevelId).First().Name); 
```

不要只接受这个查询并将其包含在您的代码中 - 确保您*理解*它，以便下次您有类似的事情要做时，您可以提出自己的解决方案。

如果这是在 LINQ to Objects 中，您可能会发现[MoreLINQ](http://morelinq.googlecode.com)会很有用，它的`MinBy`方法是：

```
var query = table.GroupBy(x => x.TeamId)
                 .Select(g => g.MinBy(x => x.LevelId).Name); 
```

这避免了对整个组进行排序，只是为了找到具有最小级别 ID 的条目。

# c# - How do i Download FTP root folder with its subfolder and files in C# using FTPwebRequest

> ID：15568330
> 
> 赞同：-2
> 
> 时间：2013-03-22T10:41:58.817
> 
> 标签：c#, ftpwebrequest

I want to download A ftp directory which has its sub directories and files, I am using C# Ftpwebrequst.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:48:01.277

There is no way to directly download an entire folder in a single command. `FTP` does not support this. You would need to enumerate through all files in the directory and their subdirectories and download files one-by-one.

[Here](http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/079fb811-3c55-4959-85c4-677e4b20bea3/) is a thread from MSDN forums and [here](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx) is the documentation on `FtpWebRequest`-class from MSDN.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:47:25.877

I think you need something like this and you will have to recurse into each folder inidividually:

```
 WebRequest request = WebRequest.Create(FTPServerDirectory);
            request.Method = WebRequestMethods.Ftp.ListDirectory;
            request.Credentials = new NetworkCredential(Username, Password);
            request.GetResponse(); 
```

# spring - 在 spring roo 中使用属性文件中的值

> ID：15568331
> 
> 赞同：0
> 
> 时间：2013-03-22T10:42:03.090
> 
> 标签：spring, properties, spring-roo

我是 spring 和 spring-roo 的新手。我尝试构建一个应用程序并从属性文件中读取一些键值对。

我创建了一个 myconfig.properties 文件并将其保存到 src/main/resources/META-INF/spring/。该文件的内容是：

```
## My Configuration settings
myconfig.url=https://1.2.3.4/api.php
myconfig.username=user1
myconfig.password=password1 
```

现在我在同一目录中的 appilcationContext.xml 中添加了一个 bean 配置

```
 <bean id="MyConfig" class="com.test.client.MyClient">
    <property name="url" value="${myconfig.url}" />
    <property name="username" value="${myconfig.username}" />
    <property name="password" value="${myconfig.password}" />
</bean> 
```

在我的类文件中，我尝试访问这些值，但我得到一个 File not found 错误

```
 package com.test.client;

     import org.springframework.context.support.AbstractApplicationContext;
     import org.springframework.context.support.ClassPathXmlApplicationContext;
     import org.springframework.roo.addon.javabean.RooJavaBean;
     import org.springframework.roo.addon.jpa.activerecord.RooJpaActiveRecord;
     import org.springframework.roo.addon.tostring.RooToString;
     import org.springframework.util.LinkedMultiValueMap;
     import org.springframework.util.MultiValueMap;
     import org.springframework.web.client.RestTemplate;

     @RooJavaBean
     @RooToString
     @RooJpaActiveRecord
     public class MyClient {

         private String url;

         private String username;

         private String password;

         public static String login()
 {
    // Construct the spring application context
    AbstractApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");

    MyClient config = (MyClient) context.getBean("MyConfig");

    // Register hook to shutdown Spring gracefully
    // See http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-shutdown
    context.registerShutdownHook();

    String token = null;

    final String url = config.getUrl();
    final String username = config.getUsername();
    final String password = config.getPassword();

  .... 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:55:16.683

尝试

```
AbstractApplicationContext context = new ClassPathXmlApplicationContext("classpath*:META-INF/spring/applicationContext.xml"); 
```

但是最好的做法是实现 interface `ApplicationContextAware`。

斯特凡诺

# batch-file - how can i send successful ping to one file and email log of failed ping using blat and nncron

> ID：15568336
> 
> 赞同：0
> 
> 时间：2013-03-22T10:42:24.353
> 
> 标签：batch-file, cron, blat

I am able to send body of text with blat and also schedule task with nncron to send at specified time.

Now I want to echo the failure of the ping to another file and send it using email via blat. something like this:

```
ping -n 4 %%a| findstr "TTL=">>%log% || (
<<want to write to unreachables log here>>
Blat body.txt -i "on behalf of name" -to name@domain -attach %hosts% -attach %unreachables%
) 
```

Please let me know how I can write to the other file then email it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:06:07.050

```
ping -n 4 %%a| findstr "TTL=">>%log% || (
echo ping to %%a failed >>%unreachables%
Blat body.txt -i "on behalf of name" -to name@domain -attach %hosts% -attach %unreachables%
) 
```

应该向其名称所在的文件产生一条消息`unreachables`

# eclipse - Could not configure konakart shopping - cart

> ID：15568337
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:42:27.117
> 
> 标签：eclipse, gwt, shopping-cart, konakart

How to import and configure konakart shopping-cart source code in Eclipse?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:51:24.210

在 KonaKart 中有一个 ANT 任务，您可以运行它来创建 Eclipse 项目：

转到安装下的自定义目录，然后：

```
C:\Program Files\KonaKart\custom>bin\kkant -p
Buildfile: build.xml

Main targets:

make_eclipse_project   Create an Eclipse Project for Developing the Struts-2 Storefront 
```

所以你会输入：

```
C:\Program Files\KonaKart\custom>bin\kkant make_eclipse_project 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:13:18.610

不仅 GWT 项目对于任何 java 项目的过程都是一样的。

在这里，您可以找到一个[文档](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-importproject.htm)，`Eclipse`将现有项目导入您的工作区

在Eclipse 中[附加源代码](http://veerasundar.com/blog/2011/08/attaching-java-source-with-eclipse-ide/) ：[是否有一种简单的方法可以在 Eclipse 中附加源代码？](https://stackoverflow.com/questions/122160/is-there-an-easy-way-to-attach-source-in-eclipse)

要先完成任务，您必须下载`*src.zip *`相应项目的。

# asp.net - 必需的字段验证器不适用于动态生成的用户控件内的控件

> ID：15568340
> 
> 赞同：1
> 
> 时间：2013-03-22T10:42:37.690
> 
> 标签：asp.net, user-controls, dynamically-generated, requiredfieldvalidator, webusercontrol

我有一个用户控件，其中包含一些服务器控件，例如文本框和下拉列表。

我还添加了一些必需的字段验证控件。如果我在设计时添加用户控件，通常这些验证工作正常。

但是当我动态添加用户控件时，验证控件不起作用并且页面被回发。

**用户控制：**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="myUserControl.ascx.cs" Inherits="myUserControl" %>

<table cellpadding="0" cellspacing="0" >
<tr>
    <td>
        <asp:TextBox runat="server" ID="txtLastName" Width="80px" MaxLength="64" />
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="txtLastName" runat="server" ErrorMessage="Required Value" Display="None"></asp:RequiredFieldValidator>
        <ajaxToolkit:ValidatorCalloutExtender ID="ValidatorCalloutExtender1" runat="server" TargetControlID="RequiredFieldValidator1"></ajaxToolkit:ValidatorCalloutExtender>
    </td>
    <td>
        <asp:TextBox runat="server" ID="txtFirstName" Width="80px" MaxLength="64" />
        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" ControlToValidate="txtFirstName" runat="server" ErrorMessage="Required Value" Display="None"></asp:RequiredFieldValidator>
        <ajaxToolkit:ValidatorCalloutExtender ID="ValidatorCalloutExtender2" runat="server" TargetControlID="RequiredFieldValidator2"></ajaxToolkit:ValidatorCalloutExtender>
    </td>
    <td>
    <asp:Button ID="btnDelete" runat="server" Text="Delete" OnClick="DeleteButton_Click" CausesValidation="false" />
    </td>
</tr>
</table> 
```

**包含表单标记：**

```
 <form id="form1" runat="server">
        <div>
            <div align="right" ><asp:Button ID="btnAdd" runat="server" Text="Add Order Line" onclick="btnAdd_Click" CausesValidation="false" /></div>
            <asp:PlaceHolder runat="server" ID="DynamicNameList" />
<asp:Button ID="btnSubmit" runat="server" Text="Submit" onclick="btnSubmit_Click" />
         </div>
        </form> 
```

**包含表格代码：**

```
 public partial class WebForm1 : System.Web.UI.Page, IDynamicControlContainer
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            foreach (string id in LoadControlIdList())
            {
                Create(id);
            }

        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
        }

        protected void btnAdd_Click(object sender, EventArgs e)
        {
            Create(null);
        }

        public void Create(string id)
        {
            string targetId = id ?? Guid.NewGuid().ToString();
            myUserControl control = LoadControl("~/CustomControls/myUserControl.ascx") as myUserControl;
            control.ID = targetId;

            DynamicNameList.Controls.Add(control);
            SaveControlIdList();
        }

        public void Delete(Control control)
        {
            DynamicNameList.Controls.Remove(control);
            SaveControlIdList();
        }

        public void SaveControlIdList()
        {
            List<string> idList = new List<string>();
            foreach (Control control in DynamicNameList.Controls)
            {
                idList.Add(control.ID);
            }

            ViewState["IdList"] = idList;
        }

        public string[] LoadControlIdList()
        {
            var list = (List<string>)ViewState["IdList"];

            if (list == null)
            {
                return new string[0];
            }
            return list.ToArray();
        }

    }

    public interface IDynamicControlContainer
    {
        /// <summary>
        /// Deletes the specified control from the container
        /// </summary>
        /// <param name="control">The control.</param>
        void Delete(Control control);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T15:25:25.650

您需要使用 Page_Init 或 CreateChildControls 事件来执行此操作。到 Page_Load 启动时，控件树已经加载。

# android - android web browser and the virtual keyboard

> ID：15568344
> 
> 赞同：0
> 
> 时间：2013-03-22T10:42:49.933
> 
> 标签：android, css, html, virtual-keyboard

I'm writing an HTML5 application using PhoneGap 2.5.0.

In some portions of the app, like the search page, when the virtual keyboard appears, it shrinks the entire page, so I can still see the footer right above the keyboard.

However in other portions of the app, like a dialog box, the keyboard covers the page, thus potentially covers some of the fields.

I don't use any "fixed" positioned elements in the app. All elements required to stay in the same place were made "absolute".

When does the keyboard is placed over the view and when does it shrinks it? I couldn't find the answer so far.

The relevant HTML:

```
<body>
    <div role="dialog" id="details">
        <div class="popup-content">
            <header>
                <h1 role="heading">Details</h1>
            </header>
            <article>
                <div class="content">
                    <div class="label">Some Title</div>
                    <div id="dynamic_form">
                        <form><!-- dynamically filled form --></form>
                    </div>
                </div>
            </article>
            <footer>
                <ul class="footer-nav-buttons">
                    <li><a>Back</a></li>
                </ul>
            </footer>
        </div>
    </div>

    <page id="search">
        <header>
            <h1>Search</h1>
        </header>
        <article class="page-content">
            <div class="ui-header">
                <input name="searchterm" id="searchtermtextbox" value="" type="text">
            </div>
            <article>
                <div id="searchresultscontainer"></div>
            </article>
        </article>
    </page>

    <footer>
        <ul class="footer-nav-buttons main-navigation-bar">
            <li><a href="#menu" role="menuitem" class="button-menu"></a></li>
            <li><a href="#contacts" class="button-contacts"></a></li>
            <li><a href="#search" class="button-search"></a></li>
        </ul>
    </footer>
</body> 
```

And the relevant CSS (not perfect yet, I'll try to improve it later on, but it contains the basic rules I'm using, not including visual styles like colors, gradients, shadows, etc.):

```
body { margin: 0; position: absolute; height: 100%; width: 100%; }
page { position: absolute; top: 0; bottom: 0; left: 0; right: 0; display: none; }
page.selected { display: block; }
page>header { position: absolute; top: 0; left: 0; right: 0; height: 1cm; }
page article { position: absolute; top: 1cm; left: 0; bottom: 15mm; right: 0; }

div[role='dialog'] div.popup-content footer { position: relative; }
div[role='dialog'].visible { opacity: 1; z-index: 100; }
div[role='dialog'].active { display: -webkit-box; display: box; -webkit-box-align: center; }
div[role='dialog'] div.popup-content article { position: relative; }
div[role='dialog'] div.popup-content article div.content { position: relative; }

body>footer { position: absolute; bottom: 0; left: 0; right: 0; height: 15mm; }
ul.footer-nav-buttons { position: relative; display: -webkit-box; display: box; -webkit-box-align: center;
                        box-align: center; -webkit-box-pack: center; box-pack: center; list-style: none;
                        height: 100%; width: 100%; padding: 0; margin: 0;
                        -webkit-margin-before: 0;-webkit-margin-after: 0; -webkit-margin-start: 0;
                        -webkit-margin-end: 0; -webkit-padding-start: 0; }
ul.footer-nav-buttons li a { margin: 5px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T14:36:12.090

解决这个 android 讨厌的最简单方法是使用输入焦点和模糊事件。

在 jQuery 中：

```
$("input").focus(function(){
    $('footer').hide();
});

$("input").blur(function(){
    $('footer').show();
}); 
```

# javascript - 播放中的 HTML5 视频触发事件（昏暗页面）

> ID：15568357
> 
> 赞同：2
> 
> 时间：2013-03-22T10:43:31.323
> 
> 标签：javascript, css, html, events, video

当我使用这个脚本时：

```
<script>
myVid=document.getElementById("video1");
myVid.oncanplay=alert("Can start playing video");
</script> 
```

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_av_event_canplay](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_av_event_canplay)

当视频可以播放时会弹出一个窗口。

我想在视频开始播放时从 div 更改 css（使背景变暗） 我可以使用 play 事件吗？

问候

托尔斯滕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:12:42.373

此脚本将允许您触发对`<video>`元素的 Play 事件的操作，该操作（在这种情况下）更改 a 的背景颜色`div`，但您可以使用相同的方法来调整一个或多个元素的类等（或应用不透明度到中间层）。该示例将事件关闭，因此它是一次性的，但是添加事件以捕获播放、暂停、结束、错误等，您可以对行为进行相当精细的控制。

```
<!DOCTYPE HTML>
<html>
<body style="background-color: white"> 
<div id="dimMe" style="background-color:blue">
    <video id="video" autobuffer controls muted width=240 height=200>
        <source src="http://jcath-drg.s3.amazonaws.com/BigBuck.m4v">
        </source>
    </video>
</div>
<script>
document.getElementById("video").addEventListener('play', dimBack, false);

function dimBack() {
    this.removeEventListener('play', dimBack, false);
    document.getElementById("dimMe").style.backgroundColor="green";
}
</script>
</body>
</html> 
```

# ios - 谷歌分析 - 任何人都可以解释维度和指标吗？

> ID：15568360
> 
> 赞同：2
> 
> 时间：2013-03-22T10:43:44.240
> 
> 标签：ios, google-analytics, google-analytics-api

我已经为 iOS 实现了新的 Google Analytics 库 (2.0) 以进行应用跟踪。跟踪视图等非常简单，但我无法理解如何使用维度和指标。

我已经多次阅读文档，但我无法理解它。

基本上，我想检查有多少用户在使用该应用程序时启用了特定设置。

在半伪代码中，这是我想做的：

```
- (void)applicationLaunched
{
    id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"My ID"];

    if (_mySettingIsEnabled) {
        [tracker setUserValue:@"Enabled" forKey:@"My Setting"];
    } else {
        [tracker setUserValue:@"Disabled" forKey:@"My Setting"];
    }
} 
```

谁能向我解释如何使用维度和指标为每个用户执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T07:52:58.843

查看官方文档：[https ://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets](https://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets)

*   确保您有一个新属性（GA 组织在帐户/属性/配置文件中，因此单击“主页”，而不是帐户，而不是添加新的应用程序属性） - 我有一个较旧的属性/配置文件，但没有任何工作IOS GA 库 2.0。

*   在 GA 网站上注册，打开一个属性，会有一个自定义定义选项卡，您可以在其中注册自定义维度和指标 - 比如说“AppMode”，这是索引为 1 的自定义定义。

*   在代码中设置自定义维度/指标值：

    ```
    NSString *appMode = @"Demo";
    [_gaiTracker setCustom:1 dimension:appMode]; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T15:15:06.643

基本上，您可能会使用[自定义变量](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#visitorLevel)。

启用特定设置可能是在用户级别或会话级别，因此您应该将范围设置为 1 或 2。您要跟踪的设置是自定义 var 的值或“维度”，具体取决于范围您会自动获得用户数量或访问次数的指标。

在 JS 中看起来像

```
_gaq.push(['_setCustomVar',
      1,                // This custom var is set to slot #1\.  Required parameter.
      'My Setting',    // The name of the custom variable.  Required parameter.
      'Disabled',        // The value of the custom variable.  Required parameter.
                        //  (possible values might be Free, Bronze, Gold, and Platinum)
      1                 // Sets the scope to visitor-level.  Optional parameter.
 ]); 
```

# c# - MVC 4 - 创建和下载 .ZIP 存档

> ID：15568375
> 
> 赞同：0
> 
> 时间：2013-03-22T10:44:44.200
> 
> 标签：c#, asp.net-mvc, zip

我正在使用 MVC4，我的一个视图包含允许从视图下载文档的超链接。事实上，我还想显示一个链接，该链接允许下载 .zip 存档中压缩的所有文件。我的文件以 varbinary 格式存储在我的数据库中。

我的下载操作：

```
public ActionResult DownloadDocument(long id)
{
    Document element = db.Documents.Single(obj => obj.Id_Document == id);

    try
    {
        Response.ClearHeaders();
        Response.AddHeader("Content-Disposition", "attachment; Filename=\"" + element.Name + "\"");
        Response.AddHeader("Content-Transfer-Encoding", "Binary");
        Response.BinaryWrite(element.Buffer);
        Response.Flush();
        Response.End();
    }
    catch(Exception ex)
    {

    }

    return View("Details", element.ProductAllocationLog);

} 
```

我的观点 ：

```
@model BuSIMaterial.Models.ProductAllocationLog
@{
    ViewBag.Title = "Create";
}
<h2>Create</h2>
@using (Html.BeginForm("Create", "ProductAllocationLog", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>ProductAllocationLog</legend>
        <div class="editor-label">
            Date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Date, new { @class = "datepicker"})
            @Html.ValidationMessageFor(model => model.Date)
        </div>
        <div class="editor-label">
            Message :
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>
        <div class="editor-label">
            Allocation :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductAllocation", String.Empty)
            @Html.ValidationMessageFor(model => model.Id_ProductAllocation)
        </div>
        <p>
            <input type="file" name="files" multiple="multiple"/>
        </p>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

关于我可以用来做到这一点的方式的任何想法？谢谢。

# javascript - ajax 调用在 ajax 中不起作用

> ID：15568376
> 
> 赞同：0
> 
> 时间：2013-03-22T10:44:44.743
> 
> 标签：javascript, asp.net-mvc-3, jquery

我将 mvc 控制器与 ajax 一起使用。我使用 jquery 确认框执行任务。当我单击“确定”按钮时，它需要调用另一个 ajax 并将其链接到另一个控制器但它不起作用

示例代码：

```
function button_click() {

    $.ajax({
        type: 'POST',
        url: 'url',
        data: {data},
        dataType: 'json',
        success: function (data) {
          if (data.success == true) { call(data); }
                            else { alert(data.data); }

          }
    });
}

function call(data)
{
var ans =  confirm(data)
if(ans)
{
  $.ajax({
 type: 'POST',
        url: '@(Url.Action("StudentList", new { Area = "Mec", Controller = "HOD" }))',, // this url not goes to the controller
        data: {data},
        dataType: 'json',
        success: function (data) {
          if (data.success == true) { alert(data.data); }
                            else {  }

          }
    });
} else { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:34:50.770

我试过你的代码，但它对我有用。不同之处在于你需要以正确的格式传递数据。数据：数据或数据：{数据：数据}但不是数据：{数据}

```
 function button_click() {
        $.ajax({
            type: 'POST',
            url: 'Demo/Demo_action',
            data: { data: "what you want to pass" },
            //dataType: 'json',
            //contentType: 'application/json',
            success: function (data) {
                if (data == "hello") {
                    call(data);
                }
            }
        });
    }
    function call(data) {
        var ans = confirm(data)
        if (ans) {
            $.ajax({
                type: 'POST',
                url: '@(Url.Action("Demo_action2", new { Area = "Mec", Controller = "Home" }))',
                //url: 'Home/Demo_action2', // this url not goes to the controller
                data: { data: data },
                dataType: 'json',
                success: function (data) {
                    alert(data);
                }
            });
        }
        else
        { }
    } 
```

# java - 如何在电子邮件中创建指向带有参数的 java 程序的链接

> ID：15568380
> 
> 赞同：0
> 
> 时间：2013-03-22T10:45:14.473
> 
> 标签：java, parameters, hyperlink, args

在我的医院内，我希望向工作人员发送一封电子邮件，其中包含一个链接，单击该链接将运行一个 Java 应用程序，该应用程序显示一个要完成的表格。我已经为一个标准表格工作，要求他们提供详细信息。但是我需要能够提供带有参数的链接。我努力了：

1.  \location\program.jar 参数
2.  \location\program.jar?param
3.  \location\program.jar%20param

都给出“无法打开指定文件”。信息。没有参数可以正常工作。一定可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:07:52.777

如果你使用 JavaMail，你可以试试这个：

```
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setText(html, "UTF-8", "html"); 
```

# c++ - 容器的模板参数推导

> ID：15568382
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:45:14.570
> 
> 标签：c++, c++11

我的问题是，我不知道如何强制编译器在不使用虚拟参数的情况下推断模板参数。这是一个无效的示例：

```
template<int I, class C, class T, std::size_t N>
inline typename std::enable_if<
  std::is_same<C, std::array<T, N> >::value,
  std::array<T, N> >::type
create_container()
{
  std::array<T, N> array;
  // I is used somewhere
  return array;
} 
```

这是一个工作示例：

```
template<int I, typename T, std::size_t N>
std::array<T, N> create_container(std::array<T, N> const&) // dummy parameter helps deduction
{
  std::array<T, N> array;
  // I is used somewhere
  return array;
} 
```

在第一个示例中，模板参数`C`指定要实例化的容器，但在第二个示例中，函数是根据虚拟参数选择的。SFINAE 或其他一些魔法可能吗？想到了部分模板专业化，但函数模板不可能。

`create_container`是这样调用的：

```
template <std::size_t O, typename R, typename ...A, std::size_t ...I>
inline R forward(R (*f)(A...), indices<I...>)
{
  return (*f)(create_container<I + O, A>()...);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:50:40.880

您是否只是缺少类型特征来检测 C 是否为 a `std::array<T,N>`？如果是这样的话：

```
template< typename >
struct is_std_array : std::false_type {};

template< typename T, std::size_t N >
struct is_std_array< std::array< T, N > > : std::true_type {}; 
```

和

```
template<int I, typename C>
typename std::enable_if< is_std_array< C >::value, C >::type create_container()
{
   C container;

   // to access T and N from std::array<T,N>, use this:
   typedef typename C::value_type T;
   constexpr std::size_t N = container.size();

   // I is used somewhere
   return container;
} 
```

# jsf-2 - Primefaces选项卡ajax部分更新错误

> ID：15568383
> 
> 赞同：1
> 
> 时间：2013-03-22T10:45:17.360
> 
> 标签：jsf-2, primefaces

我相信在尝试使用 ajax 对其进行部分更新时，primefaces 中存在错误。我在 primefaces 论坛上发布了相同的查询，但没有任何人回复。

我附上了一个示例，其中我有一个带有两个选项卡的 tabView。当我单击“加载新选项卡内容”按钮时，它会调用我的支持 bean 来动态更改 tab1 的内容。它应该清除 tab1 的现有内容并加载新内容，在这种情况下它只是一个 inputText。然后我使用 RequestContext.getCurrentInstance().update(updateIds) 方法来指示我希望 tab1 自行刷新。问题是标签标题没有改变，新的 inputText 内容放在 tab1 和 tab2 中，但我从未指定对 tab2 做任何事情，所以不明白为什么还有一个新的 inputText。您可以使用此代码并尝试自己查看是否得到相同的结果，或者如果我做错了什么，请纠正我。

*   Primefaces 3.5
*   Mojarra JSF API (javax.faces/2.1) 2.1.15 (20121116-1711)
*   Mojarra JSF 实施 (javax.faces/2.1) 2.1.15 (20121116-1711)
*   雄猫 7.0.32
*   JDK 1.6.0_07

**

## dynamicTabLoading.xhtml

**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:p="http://primefaces.org/ui"   >

    <h:head>
      <title>Prime Prototype Dynamic Tabs</title>
   </h:head>

   <h:body>

      <h:form id="myForm">
         <p:panel>
            <h:outputText value="Dynamic Tab Loading..."></h:outputText>
            <p:commandButton id="loadTabContentBtn" value="Load New Tab Content"
                  actionListener="#{tabManager.loadNewTabContent}"  />

            <p:tabView id="tabView1" binding="#{tabManager.tabViewComponent}" dynamic="true" >

               <p:tab id="tab1" title="Tab 1" closable="true" >   
                  <h:outputText value="blank 1" />
               </p:tab>

               <p:tab id="tab2" title="Tab 2" closable="true" >   
                  <h:outputText value="blank 2" />
               </p:tab>      

            </p:tabView>   

         </p:panel>
      </h:form>

      <!-- TODO remove for production -->
      <ui:debug />

   </h:body>

</html> 
```

**

## TabManager.java

**

```
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.component.UIComponent;

import org.primefaces.component.inputtext.InputText;
import org.primefaces.component.tabview.Tab;
import org.primefaces.component.tabview.TabView;
import org.primefaces.context.RequestContext;

@ManagedBean
public class TabManager {

   private TabView tabViewComponent;

   public void loadNewTabContent() {

      /* get list of tabs from tabView*/
      List<UIComponent> tabs = getTabViewComponent().getChildren();

      /* get the first tab which had id="tab1" */
      Tab targetTab = (Tab)tabs.get(0);
      System.out.println("Target Tab Id is " + targetTab.getClientId());

      /* clear the tabs current content */
      targetTab.getChildren().clear();

      /* set new tab title and new content */
      targetTab.setTitle("Tab 1 Changed");            
      InputText inputTxt = new InputText();
      inputTxt.setValue("This is new content for Tab 1 ");
      targetTab.getChildren().add(inputTxt);

      List<String> updateIds = new ArrayList<String>();
      updateIds.add(targetTab.getClientId());

      RequestContext.getCurrentInstance().update(updateIds);
   }

   public TabView getTabViewComponent() {
      return tabViewComponent;
   }

   public void setTabViewComponent(TabView tabViewComponent) {
      this.tabViewComponent = tabViewComponent;
   }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T06:46:46.427

加载 tabview 时，它会将内容放入缓存中。因此，当您要重新加载内容时，它不会刷新内容。尝试在 tabview 属性中使用 dynamic="true" 和 cache="false" 来解决相同的问题。

# php - Codeigniter 从视图中获取 php 数组

> ID：15568385
> 
> 赞同：0
> 
> 时间：2013-03-22T10:45:23.260
> 
> 标签：php, codeigniter

在 Codeigniter 中，我有一个视图`theme-fonts.php`，我正在另一个视图中加载`page.php`。

`page.php`

```
<?php $this->load->view('theme-fonts'); ?>
<script type="text/javascript">
    try{
        var fontsArray = <?php json_encode($font_list); ?>;
        console.log(fontsArray);
    }catch(err){
        console.log(err.message);
    }
</script> 
```

以下是我`theme_fonts.php`文件中的定义：

```
<link href="http://fonts.googleapis.com/css?family=Aclonica" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Michroma" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Paytone+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Denk+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Wendy+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" />
<?php   
    $font_list = array();
    array_push($font_list,"Aclonica");
    array_push($font_list,"Michroma");
    array_push($font_list,"Paytone+One");
    array_push($font_list,"Denk+One");
    array_push($font_list,"Wendy+One");
    array_push($font_list,"Fjalla+One");
?> 
```

所以我的问题是如何从`theme-fonts.php`主视图的视图中访问 php 数组`page.php`？

问候： 杰汉则布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:52:29.893

您需要将数组传递给您的视图：

`<?php $this->load->view('theme-fonts', array('font_list' => $font_list); ?>`

我建议您在控制器中声明数组并将其传递给主视图，这样该数组将在您加载的所有视图中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:54:32.813

在 MVC 框架中，单例类随处可用，因此您需要将变量存储到某些属性中，最好的位置是配置对象，

```
$this->config->set_item('item_name', 'item_value'); 
```

[阅读 CI 配置](http://ellislab.com/codeigniter/user-guide/libraries/config.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:48:33.483

好吧，在我解决了这个问题之后，我觉得这是一个愚蠢的问题。因为我正在`theme-fonts`视图内加载视图`page`而不是并行加载。`theme-fonts`我可以简单地在视图中编写我的脚本代码。这将反过来写入我的`page`观点。

**页面.php**

```
<?php $this->load->view('theme-fonts'); ?> 
```

**主题字体.php**

```
<link href="http://fonts.googleapis.com/css?family=Aclonica" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Michroma" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Paytone+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Denk+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Wendy+One" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" />
<?php   
    $font_list = array();
    array_push($font_list,"Aclonica");
    array_push($font_list,"Michroma");
    array_push($font_list,"Paytone+One");
    array_push($font_list,"Denk+One");
    array_push($font_list,"Wendy+One");
    array_push($font_list,"Fjalla+One");
?>
<script type="text/javascript">
    try{
        var fontsArray = <?php print(json_encode($font_list)); ?>;
        console.log(fontsArray);
    }catch(err){
        console.log(err.message);
    }
</script> 
```

# java - 在 Domino 对象上使用回收会导致 bean 不返回数据

> ID：15568390
> 
> 赞同：0
> 
> 时间：2013-03-22T10:45:42.090
> 
> 标签：java, javabeans, xpages

我有一个会话范围的 bean，它读取视图的内容并存储 SelectItem 对象的哈希图。这些然后用于填充 XPage 上的组合框值。

代码工作正常，除非我尝试在最内层循环中回收 ViewEntry 对象。如果该行被注释掉，我的 SelectItems 会很好地返回。如果该行未注释，则我的组合框为空。所以我想知道的是：

1.  为什么会这样？
2.  我该如何解决这个问题并像优秀的开发人员一样正确回收对象？
3.  如果我不能明确回收对象，对内存等有什么潜在影响？

代码（突出显示问题行并当前已注释掉）：

```
public class comboBox extends HashMap<String, List<SelectItem>> implements Serializable {
    private static final long serialVersionUID = 1L;
    public comboBox() {
        this.init();
    }

    private void init() {
        Database database = null;
        View vwData = null;
        ViewNavigator navData = null;
        try {
            PrimeUser thisUser = (PrimeUser) resolveVariable(FacesContext.getCurrentInstance(), "PrimeUser");
            String lang = thisUser.getLang();
            database = getCurrentDatabase();
            vwData = database.getView("DataLookup");
            navData = vwData.createViewNavFromCategory(lang);
            ViewEntry keyCat = navData.getFirst();
            ViewEntry nextCat = null;
            while (keyCat != null) {
                String thisKey = (String) keyCat.getColumnValues().get(1);
                List<SelectItem> options = new ArrayList<SelectItem>();
                options.add(new SelectItem("Please select..."));
                ViewEntry dataEntry = navData.getChild(keyCat);
                ViewEntry nextChild = null;
                while (dataEntry != null) {
                    nextChild = navData.getNextSibling();
                    Object optValue = dataEntry.getColumnValues().get(2);
                    String optLabel = (String) dataEntry.getColumnValues().get(3);
                    options.add(new SelectItem(optValue, optLabel));

                    // dataEntry.recycle(); //<---- PROBLEM HERE

                    dataEntry = nextChild;
                }
                this.put(thisKey, options);
                nextCat = navData.getNextCategory();
                keyCat.recycle();
                keyCat = nextCat;
            }
        } catch (NotesException e) {
            e.printStackTrace();
        } finally {
            try {
                navData.recycle();
                vwData.recycle();
                database.recycle();
            } catch (NotesException e) {
            }
        }
    }

    public List<SelectItem> get(String key) {
        return this.get(key);
    }
} 
```

解决：

解决方案非常简单（感谢 Sven Hasselbach 提醒我再次查看服务器日志输出）。改变很简单——交换这条线：

```
 nextCat = navData.getNextCategory(); 
```

为了这：

```
 nextCat = getNextSibling(keyCat); 
```

虽然“getNextCategory”是ViewNavigator的一个方法，没有任何参数；它只获取当前条目之后的下一个类别。如果当前条目已被回收 - 就像上面的情况一样 - 那么显然当前条目为 null 并且该方法会引发异常。

“getNextSibling”有一个可选的 ViewEntry 参数，如果指定，它将覆盖指向当前 ViewEntry 的指针，否则它将使用它。

我责怪星期五。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:58:08.753

首先查看您的服务器控制台：您在那里看到 NotesException 吗？如果您遇到异常，您的*put*将永远不会被执行，因此您的组合框将为空。

在回收对象之前，您必须测试它是否为*null*，并被 try/catch 块包围。有一些实现可以更轻松地回收 Notes 对象，例如[http://openntf.org/XSnippets.nsf/snippet.xsp?id=recycleobject-helper-for-recycling-of-objects](http://openntf.org/XSnippets.nsf/snippet.xsp?id=recycleobject-helper-for-recycling-of-objects)

关于回收的一个很好的解释可以在这里找到：http: [//nathantfreeman.wordpress.com/2013/03/21/recycle-and-the-retail-experience/](http://nathantfreeman.wordpress.com/2013/03/21/recycle-and-the-retail-experience/)

# linux - Linux中的.htaccess之类的东西

> ID：15568392
> 
> 赞同：3
> 
> 时间：2013-03-22T10:45:50.743
> 
> 标签：linux

我有一个包含很多文件的目录（超过 4.000.000 个文件）。所有文件名都具有相同的模式：

```
PREFIX-XXXXXX-YY.ext 
```

在哪里

*   `XXXXXX`包含字母和数字
*   `YY`包含数字
*   `ext`是文件的扩展名（.txt、.jpg）

文件结构有 12MB，因此该目录的列出/搜索需要很长时间。我将此目录的所有内容划分为子目录，取决于文件名，精确地是`XXXXXX`上述模式的第一个字母。

IE。

*   `main_directory/A/PREFIX-AXXXXX-YY.ext`
*   `main_directory/B/PREFIX-BXXXXX-YY.ext`
*   `main_directory/1/PREFIX-1XXXXX-YY.ext`

是在 Linux 中制定规则的简单方法，例如当我输入 linux 命令时

```
test:/home/usr/admin # ls main_directory/PREFIX-AXXXXX-* 
```

我将从 main_directory/A/ 目录中获取文件名列表？此规则必须仅适用于`main_directory`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:02:22.570

你不能在文件系统层拥有这个，而不是创建链接并回到你原来的问题。我可以想到两个简单的方法。

# 采取1：脚本

您可以编写一个简短的脚本来为您重写名称。

假设您有一个`rewrite`脚本，它接受`PREFIX-AXXXX-*`并输出`main_directory/A/PREFIX-AXXXX-*`. 然后，您可以将您的`ls`线路更改为：

```
$ ls `rewrite PREFIX-AXXXXX-*` 
```

这可以使用 或任何其他即时文本转换工具轻松`sed`完成`awk`。

Shell 程序是可组合的，这是有原因的！:)

# 采取 2：嵌入更快的文件系统

您可以通过使用安装在主目录中的更快的文件系统来消除重组和重写名称。[XFS](http://en.wikipedia.org/wiki/XFS)听起来不错。它应该毫不费力地消除您的性能问题。

然而，这需要更深入地了解发生了什么对日常使用有效。

**编辑**：[这](http://freecode.com/articles/virtual-filesystem-building-a-linux-filesystem-from-an-ordinary-file)是一篇关于如何创建虚拟用户空间文件系统的文章。

**编辑2**：实际上不，我认为`XFS`不会削减它。不过，也许是另一个文件系统。

# jquery - jQuery循环通过嵌套的gridview

> ID：15568396
> 
> 赞同：1
> 
> 时间：2013-03-22T10:46:08.090
> 
> 标签：jquery, loops, gridview, nested

无论如何循环嵌套的gridview？这是我到目前为止的javascript，我认为我离解决方案还差得很远：

```
$(document).ready(function() {
    $("#<%=gvAdmin.ClientID %> tr").each(function() {
        $(this).find(".gvSubMain tr").each(function() {
            var hdnDate = $(this).find(".Date").val();
            //Do Stuff
        });
    });
}); 
```

两个网格视图是；一个名为 gvAdmin 的主要网格视图和一个名为 gvSubAdmin 的嵌套网格视图。我已经研究了这个问题很长一段时间，并看到了一些变化，例如：

```
$(document).ready(function() {
    $("#<%=gvAdmin.ClientID %> tr").each(function() {
        $(this).find(".gvSubMain > tr").each(function() {
            var hdnDate = $(this).find(".Date").val();
            //Do Stuff
        });
    });
}); 
```

还有另一个变体：

```
$(document).ready(function() {
    $("#<%=gvAdmin.ClientID %> tr").each(function() {
        $(this).find(".gvSubMain").find("tr").each(function() {
            var hdnDate = $(this).find(".Date").val();
            //Do Stuff
        });
    });
}); 
```

但是这些都不起作用，这是我正在努力解决的一个小语法问题还是我的逻辑问题？我需要使用`.find(".gvSubMain")`gridview还是可以通过其他方式调用gridview？

谢谢，

第一岬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:00:38.590

试试这个：

```
$(document).ready(function () {
    $("#<%=gvAdmin.ClientID %> > tbody > tr").each(function () {
        $(this).find(".gvSubMain > tbody > tr").each(function () {
            var hdnDate = $(this).find(".Date").val();
            //Do Stuff
        });
    });
}); 
```

# sql - 如何在sql数据库中优化保存二维数组的快照

> ID：15568401
> 
> 赞同：0
> 
> 时间：2013-03-22T10:46:27.763
> 
> 标签：sql, sql-server, relational-database

我有一个生成数百万个二维双数组（矩阵）条件的数据源。维度的大小不断变化（但可以通过数学变换来简化情况，只允许一个维度改变大小）。所以，我需要将这个矩阵的所有状态保存到数据库中（她的近似大小是从 10x50 到 10x100 - 第二维大小随时间变化）。如果我使用时间作为主键，这意味着我将不得不创建数百万个表，每个表将包含 10 列和 50 到 100 行......这不是很方便。有没有办法更有效地对矩阵状态进行分组？我是 SQL 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:48:53.057

具有以下列的表怎么样：

(id,) state_number, 行, 列, 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:09:14.730

**理论：如何使用重型工具（如 MySQL）**

MySQL 通常被归类为“重型工具”。重型工具可以很好地解决相当广泛的问题，但通常在它们做得好、做得不好或根本不做方面也具有独特的特征。对于所有重型工具，挑战在于找到您的问题与重型工具的特性之间最接近的匹配，然后以最简单的方式弥合差距。您正在执行第 2 步。

**解决方案步骤 1：您与工具之间最接近的匹配**

我能想到的与 MySQL 特性的具体问题最接近的匹配与您的相同：看起来像这样的表。

列：

```
id dataset_time col1 col2 col3 col4 col5 col6 col7 col8 col9 col10

auto increment: id
primary key: id 
```

**解决方案第 2 步：缩小剩余差距**

然而，正如您所注意到的，为每个矩阵创建一个表并不是弥合您的问题与 MySQL 可以做什么之间的剩余差距的最简单方法。MySQL 可以在表名中创建数以千计的带有数字索引的表，但这样做的效果很差。

弥合差距的最简单方法是引入一个名为 dataset_id 的附加列，以使表如下所示：

列：

```
id dataset_time col1 col2 col3 col4 col5 col6 col7 col8 col9 col10 dataset_id

auto increment: id
primary key: id
non-unique index: dataset_id 
```

您应该手动增加数据集 id 并将其插入每一行和相应的时间。这比按时间识别每个数据集更稳健。

然后你可以像这样检索数据集：

```
SELECT * FROM matrices WHERE dataset_id=761 
```

MySQL 具有高效的索引功能和优雅的语法，可以从数百万行中检索几十行，因此可以说它做得非常好。所以这是你的最佳解决方案。

# youtube-data-api - 如何计算我的 YouTube API 使用量？

> ID：15568405
> 
> 赞同：63
> 
> 时间：2013-03-22T10:46:45.177
> 
> 标签：youtube-data-api

我正在为一个客户构建一个相当大的应用程序，该应用程序将聚合来自各种来源的提要。我的客户估计一开始会有大约 900 个可关注的用户在这个系统中，随着时间的推移会增加更多。他希望每 15 分钟更新一次提要数据，因此我们需要每秒更新一个用户提要，假设有 900 个提要和 15 分钟的 TTL。由于请求需要几秒钟才能完成，因此我们需要在几个线程之间进行负载平衡以异步处理队列。

我应该担心配额错误或遇到任何限制吗？如果是这样，我们的选择是什么？

我已经阅读了他们的帮助页面和文档，但是非常模糊；我需要具体的数字。对他们的 API 进行负载测试以找出限制是不可行的。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-22T21:49:08.953

YouTube 数据 API 的第 3 版在您注册 API 密钥的 Google API 控制台中列出了具体的配额编号。您每天可以使用 10,000 个单位。在 2016 年 4 月 20 日之前启用 YouTube 数据 API 的项目的默认配额为每天 50,000,000 个。

您可以在这里阅读有关单位的信息： [https ://developers.google.com/youtube/v3/getting-started#quota](https://developers.google.com/youtube/v3/getting-started#quota)

*   仅检索每个返回资源的 ID 的简单读取操作的成本约为 1 个单位。
*   一次写入操作的成本约为 50 个单位。
*   视频上传的成本约为 1600 单位。

如果您达到限制，Google 将停止返回结果，直到您的配额被重置。您每天可以申请超过 1,000,000 个请求，但您必须为这些额外请求付费。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-20T12:36:44.857

YouTube 提供了一个计算器来检查您的使用情况。它是估计您的使用情况的好工具。

[https://developers.google.com/youtube/v3/determine_quota_cost](https://developers.google.com/youtube/v3/determine_quota_cost)

![Google Developers 网站上计算器页面的屏幕截图](../Images/f0aca491ef570d347fcbfdea97ea4115.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-18T08:19:12.850

如果您需要提出比分配更多的请求，您可以在此处请求更高的配额：https: [//support.google.com/youtube/contact/yt_api_form](https://support.google.com/youtube/contact/yt_api_form)

# c - 将数据写入以 2 帧发送的套接字

> ID：15568412
> 
> 赞同：2
> 
> 时间：2013-03-22T10:47:06.203
> 
> 标签：c, linux, sockets, tcp

我的应用程序使用套接字小消息通过电线发送。每条消息大约是 200 字节的数据。我希望看到我的数据以 2 帧而不是 1 帧发送。我的问题是

1.  如何做到这一点，即有没有办法让 TCP 自动将缓冲区分成 2 帧？
2.  如果我在 2 次单独的写入中发送缓冲区，我会得到相同的结果吗？

我正在使用 Linux 和 C。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:52:31.330

> 如何做到这一点，即有没有办法让 TCP 自动将缓冲区分成 2 帧？

TCP是流式通信协议，所有数据都是连续的。您应该通过分隔符拆分数据。

例如，在 HTTP 协议中，每个单独的请求都被两个`\n`.

> 如果我在 2 次单独的写入中发送缓冲区，我会得到相同的结果吗？

不，您将收到它们作为一个连续的数据流。帧是没有意义的。

*注意：在应用程序中接收任何数据 TCP 之前，数据包会被分离，但操作系统会收集并重新组装它们。这个过程对您的应用程序是透明的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:42:58.037

您可以考虑以下几点。

1.  TCP 确实有[PSH 标志](http://packetlife.net/blog/2011/mar/2/tcp-flags-psh-and-urg/)，您可以在数据包中设置它，这使得 TCP 推出任何缓冲的数据。但这会有点不可靠，因为理论上，数据可以在接收端再次组合。但在实践中，您会看到数据是分开交付的。
2.  您不能真正使用“\n”作为分隔符，因为它可以自然地出现在您的数据中。您必须想出某种转义序列才能使用，并转义数据中所有出现的“\n”。这可能很痛苦。
3.  如果您需要消息边界，请考虑支持它的协议。像UDP一样。但是使用 UDP，您将失去保证交付。您将不得不滚动自己的确认、重试等等。
4.  最后是[SCTP](http://linux.die.net/man/7/sctp)。较少使用的协议，但至少在 Linux 堆栈中可用。它为您提供两全其美的体验。消息边界、保证传递、保证顺序。

# ruby-on-rails-3 - Store#index 中的 NoMethodError

> ID：15568413
> 
> 赞同：0
> 
> 时间：2013-03-22T10:47:14.020
> 
> 标签：ruby-on-rails-3

我收到以下错误，请任何人查看并帮助我解决这个问题。实际上这是我的 development.log 文件中显示的错误。

```
ActionView::Template::Error (undefined method `quantity' for #<LineItem:0xaa47b1c>):
4: <tr>
5: <% end %>
6: <tr>
7: <td><%= line_item.quantity %>&times;</td>
8: <td><%= line_item.product.title %></td>
9: <td class="item_price"><%= number_to_currency(line_item.total_price) %></td>
10: </tr>
  app/views/line_items/_line_item.html.erb:7:in `_app_views_line_items__line_item_html_erb___826332857_89103730'
  app/views/carts/_cart.html.erb:4:in `_app_views_carts__cart_html_erb___185026047_87767060'
  app/views/layouts/application.html.erb:19:in `_app_views_layouts_application_html_erb___370633105_87583010'
  app/helpers/application_helper.rb:6:in `hidden_div_if'
  app/views/layouts/application.html.erb:18:in `_app_views_layouts_application_html_erb___370633105_87583010' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:51:45.177

错误很明显：您的`LineItem`类没有名为`quantity`.

# javascript - 从 FileReader 获得的 JPEG 数据与文件中的数据不匹配

> ID：15568415
> 
> 赞同：5
> 
> 时间：2013-03-22T10:47:18.727
> 
> 标签：javascript, html, xmlhttprequest, filereader

我正在尝试通过 HTML5 FileReader 在 Web 浏览器中选择一个本地 JPEG 文件，这样我就可以将其提交到服务器而无需重新加载页面。所有机制都在工作，我想我正在传输和保存 JavaScript 给我的确切数据，但结果是服务器上的 JPEG 文件无效。这是演示该问题的基本代码：

```
<form name="add_photos">
    ​&lt;input type=​"file" name=​"photo" id=​"photo" /><br />
    ​&lt;input type=​"button" value=​"Upload" onclick=​"upload_photo()​;​" />​
</form>

<script type="text/javascript">
    function upload_photo() {
        file = document.add_photos.photo.files[0];
        if (file) {
            fileReader = new FileReader();
            fileReader.onload = upload_photo_ready;
            fileReader.readAsBinaryString(file);
        }
    }

    function upload_photo_ready(event) {
        data = event.target.result;
        // alert(data);

        URL = "submit.php";
        ajax = new XMLHttpRequest();
        ajax.open("POST", URL, 1);
        ajax.setRequestHeader("Ajax-Request", "1");
        ajax.send(data);
    }
</script> 
```

然后我的 PHP 脚本执行此操作：

```
$data = file_get_contents("php://input");
$filename = "test.jpg";
file_put_contents($filename, $data);
$result = imagecreatefromjpeg($filename); 
```

最后一行抛出 PHP 错误“test.jpg 不是有效的 JPEG 文件”。如果我将数据下载回我的 Mac 并尝试在 Preview 中打开它，Preview 会说文件“可能已损坏或使用了 Preview 无法识别的文件格式”。

如果我在文本编辑器中打开桌面上的原始文件和服务器上上传的文件以检查它们的内容，它们几乎但不完全相同。原始文件的开头是这样的：

```
ˇÿˇ‡JFIFˇ˛;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 90 
```

但是上传的文件是这样开始的：

```
ÿØÿàJFIFÿþ;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 90 
```

有趣的是，如果我在上面注释掉的行中查看 JavaScript 警报中的数据，它看起来就像上传文件的数据，所以看起来 FileReader 在一开始就没有提供正确的数据，而不是在服务器上传输或保存数据时引入的问题。谁能解释一下？

我正在使用 Safari 6，我也尝试过 Firefox 14。

更新：我刚刚发现，如果我跳过 FileReader 代码并将 ajax.send(data) 更改为 ajax.send(file)，图像就会正确传输并保存在服务器上。所以我的问题基本解决了，但是我会将答案点奖励给任何可以解释为什么我使用 readAsBinaryString 的原始方法不起作用的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:34:29.680

你的问题在于`readAsBinaryString`。这会将二进制数据逐字节传输到字符串中，以便您将文本字符串发送到您的 PHP 文件。现在一个文本字符串总是有一个编码；当您使用 XmlHttpRequest 上传字符串时，[默认情况下它将使用 UTF-8](http://www.w3.org/TR/XMLHttpRequest/#dom-XMLHttpRequest-send-a-string)。

因此，原本应该代表一个字节的每个字符都将被编码为 UTF-8 ......它为每个字符使用*多个字节，代码点高于 127！*

Your best best is to use [`readAsArrayBuffer`](https://developer.mozilla.org/en-US/docs/DOM/FileReader#readAsArrayBuffer%28%29) instead of `readAsBinaryString`. This will avoid all the character set conversions (that are necessary when [dealing with strings](http://www.joelonsoftware.com/articles/Unicode.html)).

# angularjs - 以编程方式控制 angular-ui 手风琴的好方法是什么？

> ID：15568422
> 
> 赞同：16
> 
> 时间：2013-03-22T10:47:39.913
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap

我正在使用来自[http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)的手风琴指令，我需要更好地控制手风琴何时打开和关闭。

更准确地说，我需要手风琴组内的一个按钮，该按钮将关闭其父手风琴并打开下一个手风琴（所以基本上模仿如果 close-others 设置为 true 时单击下一个标题会做什么）。在允许关闭手风琴并打开下一个手风琴之前，我还需要进行一些验证，并且我还需要将其连接到手风琴标题上的单击事件。

我对 Angular 很陌生，我们目前正在将应用程序从 Backbone+JQuery 重写为 Angular。在 Backbone 版本中，我们使用 Twitter Bootstrap 手风琴，并使用 JQuery 打开和关闭它们。虽然我们仍然可以继续这样做，但我宁愿完全摆脱 JQuery DOM 操作，所以我正在寻找一个纯粹的角度解决方案。

我在验证方面尝试做的是

```
<accordion-group ng-click="close($event)"> 
```

在我的控制器中

```
 event.preventDefault();
    event.stopPropagation(); 
```

这显然不起作用，因为 DOM 元素被指令替换并且从未添加单击处理程序。我一直在查看源代码（并发现了一些非常好的未记录功能），但我什至不知道从哪里开始解决这个特定的挑战。我正在考虑分叉 angular-ui 并尝试将此功能添加到手风琴指令中，但如果我可以在不修改指令的情况下实现这一点，那就更好了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-22T12:38:26.327

有指向可绑定表达式的`is-open`属性。`accordion-group`通过使用此表达式，您可以以编程方式控制手风琴项目，例如：

```
<div ng-controller="AccordionDemoCtrl">
  <accordion>
    <accordion-group ng-repeat="group in groups" heading="{{group.title}}" is-open="group.open">
      {{group.content}}
    </accordion-group>    
  </accordion>
  <button class="btn" ng-click="groups[0].open = !groups[0].open">Toggle first open</button>
  <button class="btn" ng-click="groups[1].open = !groups[1].open">Toggle second open</button>
</div> 
```

和这里的工作plunk：http://plnkr.co/edit/DepnVH? [p =preview](http://plnkr.co/edit/DepnVH?p=preview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-16T18:05:22.667

对于@pkozlowski.opensource 的解决方案不起作用的人（例如我），您可以强制组件接受将关闭它的CSS（即没有过渡）。

**理论：** angular 指令被扩展为标准的 HTML，主要是 div 元素，其中 CSS 样式赋予它手风琴的外观。带类的 div`.panel-collapse`是手风琴组元素的主体。您可以将其第二类从更改`.in`为`.collapse`与其他一些更改一起，如下所示。

**编码：**

```
$scope.toggleOpen = function(project) {

        var id = '<The ID of the accordion-group you want to close>';
        var elements = angular.element($document[0].querySelector('#'+id));
        var children = elements.children();

        for(var i = 0; i < children.length; i++) {

            var child = angular.element(children[i]);

            if(child.hasClass('panel-collapse')) {
                if(child.hasClass('in')) { // it is open
                    child.removeClass('in');
                    child.addClass('collapse');
                    child.css('height', '0px');
                } else { // it is closed
                    child.addClass('in');
                    child.removeClass('collapse');
                    child.css('height', 'auto');
                }

            }
        }
    }; 
```

当我们谈论 Angular 时，很可能您正在通过 ng-repeat 标签生成手风琴。在这种情况下，您还可以为以下元素生成 id：

```
<accordion-group ng-repeat="user in users"
                 is-disabled="user.projects.length == 0"
                 id="USER{{user._id}}"> 
```

给定一个 Mongoose 模型用户，请注意我提供的 id 不是`user._id`，而是在前面附加了“USER”。这是因为 Mongoose 可能会生成以数字开头的 id，而 querySelector 不喜欢这样 ;-) 看图！

# asp.net-mvc - parsing json from asp.net mvc controller action to ajax.actionlink

> ID：15568423
> 
> 赞同：0
> 
> 时间：2013-03-22T10:47:40.367
> 
> 标签：asp.net-mvc, json, jquery

I am working on asp.net mvc application and I have added an actionlink like this:

```
<%= Ajax.ActionLink("Event Notifications", "processCallrecording", new { Id = ViewData["RecordingIDsEdit"] }, new AjaxOptions
{
    OnSuccess = "StatusChanged",
    HttpMethod = "POST"
})%> 
```

My controller is like this:

```
 [HttpPost]
        public JsonResult ProcessCallRecording(int Id = 0)
        {
int result = id;
 return Json(new {NewStatus = result.ToString()});
        } 
```

My js function is like this:

```
function StatusChanged(data) {   
alert("order #:" + data.NewStatus + "has a new status: "
    + data.NewStatus);
} 
```

and I see undefined in alert. I am struggling for last 2 hours on this issue. Please suggest me what is wrong ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:38:19.677

尝试这个

```
<%= Ajax.ActionLink("Event Notifications", "processCallrecording", new { Id = Convert.ToInt32(ViewData["RecordingIDsEdit"]) }, new AjaxOptions
{
    OnSuccess = "StatusChanged",
    HttpMethod = "POST"
})%> 
```

因为你我使用了 viewData，所以你错过了将其转换为 Int。还要确保我在操作链接之前添加了这些脚本。

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

# string - Replace a statement in java file using shell script

> ID：15568426
> 
> 赞同：0
> 
> 时间：2013-03-22T10:47:55.780
> 
> 标签：string, bash, shell, string-comparison

I need to replace a variable assignment statement using shell script. Eg: MyConstants.java file contains lines like

```
 String abcd = "ABCD"; 
 String abc = "ABC";
 String e = abcd + "e"; 
```

I need to replace variable abcd as

```
 String abcd = "newString"; 
 String abc = "ABC";
 String e = abcd + "e"; 
```

The problem is it contains \n \r characters in random manner like

```
 String abcd = 
 "ABCD"; 
 or 
 String abcd 
 = 

 "ABCD";
 String abc = "ABC";
 String e = abcd + "e"; 
```

I had a look at [How to replace catch block in *.java using sed?](https://stackoverflow.com/questions/3931887/how-to-replace-catch-block-in-java-using-sed) But all commands are based on a single line pattern. (Takes input as a single line) How do I sort out this? Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:01:45.673

为什么不将“ABCD”替换为“newString”？喜欢

```
sed 's/\"ABCD\"/\"newString\"/' 
```

或者 /n/r 符号可以在“ABCD”中间找到？或者，另一种方法是首先删除不靠近“;”的/n/r/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:24:34.773

这是源文件：

```
$ cat test
String abcd =
"ABCD";
String abcd
=
"ABCD";
String abc = "ABC";
String e = abcd + "e"; 
```

这就是，我们如何从错误的地方替换所有 \n\r 并更改变量值：

```
cat test | tr '\n' ' ' | sed 's/abcd = \"[a-zA-Z0-9_]*\"/abcd = \"newString\"/g' | tr ';' '\n'
String abcd = "newString"
 String abcd = "newString"
 String abc = "ABC"
 String e = abcd + "e" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:46:57.810

看看这是否适合您作为起点。

```
sed -ne "H;/;/bsubst;\$bsubst;b;:subst;s/.*//;x;s/^\n//;/String\s*abcd/s/\".*\"/\"newstring\"/;p" testfile 
```

它的作用如下：每一行都被添加到保持空间 (H)，然后如果它包含一个 ; or 是最后一行，则跳转到 :subst 标签，否则跳转到末尾并转到下一行。

在 :subst 我们清除当前行并将其与保留空间交换（这将获取累积的数据并清除下一批的保留空间）。然后我们删除一个换行符，因为此时似乎有一个额外的（不知道为什么）。之后，如果行包含正确的变量名并打印我们拥有的任何内容，它会替换变量的值。我不会说它是万无一失的，但它适用于测试数据。

# .net - 嵌入规则引擎即服务

> ID：15568430
> 
> 赞同：2
> 
> 时间：2013-03-22T10:48:06.200
> 
> 标签：.net, asp.net-web-api, rules, rule-engine

我一直在搜索支持.net 的开源规则引擎有一段时间了。它的目的是允许最终用户通过定制的 Web 客户端 UI 编辑他们自己的规则，以控制他们家的能源消耗（例如打开/关闭某些东西..）。

Drools 似乎是规则引擎列表中最好的之一。但是，它的维护版本支持 Java，但对于 .NET 平台，它自 2007 年以来几乎已被放弃。我找不到任何有用的文章或教程，其中将 Drools .NET 集成到 .NET 4.5 应用程序中。

所以现在我的结论是开源 BRE 不能很好地支持 .NET。因此，我使用 WWF 的 Rule SET 和 WebRule（它的免费版本）开始了一些试验。在通过自定义 UI 向最终用户公开规则编辑时，两者都有一些限制。这就是为什么我计划将 BRE 作为服务公开，然后创建一个通过 Web API 与 BRE 通信的 UI。

这甚至可能吗？你们认为这个策略可以引导我实现我的目标，还是我应该探索其他路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T07:29:36.803

你试过wso2 brs吗？

它使用流口水，并通过规则服务器公开为 Web 服务。似乎它就像你想要的那样工作。

# ruby-on-rails - 通过 AJAX 向嵌套表单添加动态字段

> ID：15568431
> 
> 赞同：10
> 
> 时间：2013-03-22T10:48:11.823
> 
> 标签：ruby-on-rails, ajax, nested-forms, railscasts

我一直在我的应用程序上观看和复制这些 railscast：[196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)和[197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)。我还没有专业帐户，所以我无法观看修订后的剧集。

我正在 rails4 (edge) 下开发，并且`link_to_function`已被弃用，取而代之的是不引人注目的 JS（这很棒）。

我将保留上述 railscasts 的示例（即调查/问题）。我想做的是通过不显眼的javascript使用问题的部分，我只是不知道我应该如何以及在哪里这样做。

我在想两种方法：

*   第一种方法是在我`app/assets/javascripts`的文件中添加`surveys.js`该函数`add_question`，但我不知道如何从这里使用我的部分。
*   另一种方法是在我的中创建一个新操作，`SurveyController`该操作将使用部分问题进行响应，但我对在我的调查控制器中具有特定于问题的操作这一事实感到困扰。

我不禁想到必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T12:37:08.347

您知道远程链接和表单吗？您可以在这里使用远程链接来完成您想要的。

在您看来：

```
link_to 'Add question', add_question_path(@survey), remote: true 
```

在您的控制器中

```
def add_question
  @survey = Survey.find(params[:id])

  respond_to do |format|
    format.js #add_question.js.erb
  end
end 
```

最后一步是创建一个文件 app/views/surveys/add_question.js.erb

```
$('#my_survey').append('<%=j render partial: 'my_question_partial' %>') 
```

不要忘记为您的 ask_question_path 创建路线

有关远程链接和表单的更多信息，请参阅：[http ://tech.thereq.com/post/17243732577/rails-3-using-link-to-remote-true-with-jquery-ujs](http://tech.thereq.com/post/17243732577/rails-3-using-link-to-remote-true-with-jquery-ujs)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T12:40:04.800

我也没有 Railscasts 的专业帐户，但有时看看[Ryan 的 Github 帐户](https://github.com/ryanb)是个好主意。他经常为他在剧集中所涵盖的内容开发宝石。在那里你会发现这个很棒[的nested_form](https://github.com/ryanb/nested_form) gem，它完全符合你的要求。

当然你可以重新发明轮子，但我认为使用 Ryan 的 gem 更容易、更快捷。该文档完美地解释了如何使用它。玩得开心！

# c# - 'System.Collections.Generic.List 没有隐式引用转换 '到'T'

> ID：15568434
> 
> 赞同：21
> 
> 时间：2013-03-22T10:48:22.653
> 
> 标签：c#, generics

```
class Class1<T>
{
    public virtual void Update(T entity)
    {
        Update(new List<T>() { entity }); //It's failed
    }

    public virtual void Update(IEnumerable<T> entities)
    {
    }

    public virtual void Update<TSub>(TSub entity) where TSub : T
    {
    }

    public virtual void Update<TSub>(IEnumerable<TSub> entities) where TSub : T
    {
    }
} 
```

我有一段代码。但它总是失败。

如果我替换`Update(new List<T>() { entity })`为`Update((new List<T>() { entity }).AsEnumerable())`，就可以了。

删除第三种方法也可以`Update<TSub>(TSub entity) where TSub : T`。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-22T16:35:45.233

好的，让我们仔细检查一下。我们有

```
Update(new List<T>()); 
```

还有三个候选人——请注意，我们只关心那些候选人的*签名*，所以我们将去掉*不属于签名*的返回类型和约束：

```
Update(IEnumerable<T> entities)
Update<U>(U entity) 
Update<V>(IEnumerable<V> entities) 
```

我们的第一个任务是对最后两个候选者进行*类型推断*。如果推理失败，则它们不是适用的候选者。

考虑第二种方法

```
Update<U>(U entity) 
```

我们有一个类型`List<T>`参数和一个形参`U`。因此我们推断`U`是`List<T>`。

考虑第三种方法：

```
Update<V>(IEnumerable<V> entities) 
```

我们有一个 type 的参数`List<T>`和一个 type 的形参`IEnumerable<V>`。`List<T>`实现`IEnumerable<T>`所以我们推断V是T。

好的，所以我们的候选列表现在包括：

```
Update(IEnumerable<T> entities)
Update<List<T>>(List<T> entity) 
Update<T>(IEnumerable<T> entities) 
```

所有这些候选人都*适用*吗？是的。在每种情况下`List<T>`都可以转换为形式参数类型。我们还不能消除它们中的任何一个。

既然我们只有适用的候选人，我们必须确定哪一个是*唯一最好*的。

我们可以立即消除第三个。第三个和第一个在形式参数列表中是相同的。C# 的规则是，当您有两个在其形式参数列表中相同的方法时，其中一个“自然地”到达那里并且其中一个通过类型替换到达那里，被替换的那个就失败了。

我们也可以消除第一个。显然，第二个中的完全匹配优于第一个中的不完全匹配。

这使得第二个成为最后一个站着的人。它赢得了过载解决之战。然后在最终验证期间，我们发现违反了约束：`List<T>`不保证是 的派生类`T`。

因此重载决议失败。您的论点导致选择的最佳方法无效。

> 如果我打电话`Update((new List<T>() { entity }).AsEnumerable())`，那就没问题了。

正确的。再过一遍。三名候选人：

```
Update(IEnumerable<T> entities)
Update<U>(U entity) 
Update<V>(IEnumerable<V> entities) 
```

我们有一个 type 的参数`IEnumerable<T>`，所以我们推断第二个和第三个是：

```
Update(IEnumerable<T> entities)
Update<IEnumerable<T>>(IEnumerable<T> entity) 
Update<T>(IEnumerable<T> entities) 
```

现在我们有了三个具有相同参数列表的适用候选。那些正在建设中的自然会比自然的更糟糕，所以我们消除了第二个和第三个，只留下第一个。它赢了，它没有被违反的限制。

> 删除第三种方法也可以

您的陈述是错误的；这将产生与第一种情况相同的错误。带走第三位候选人不会导致第一位候选人突然开始击败第二位候选人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T11:14:01.993

约束不是签名的一部分，Eric Lippert 有[一篇](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)关于这个主题的好文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T11:10:16.693

`List<T>`您本质上是在问为什么编译器没有从to创建隐式转换`IEnumerable<T>`。原因是 C# 团队做出了深思熟虑的设计决定，即必须由程序员而不是编译器解决潜在的歧义情况。（请注意，VB.NET 团队做出了不同的决定，始终尝试与感知到的程序员意图一致的合理事情。）

在这种情况下的好处是可以最大限度地减少意外——在幕后不会发生任何意外；缺点是偶尔需要更冗长的代码。

# iphone - 如何在iphone中点击“正方形”和“圆形”按钮？

> ID：15568436
> 
> 赞同：1
> 
> 时间：2013-03-22T10:48:29.313
> 
> 标签：iphone, ios, xcode, ipad

我有一个项目，我必须在按钮 clcik 上制作一个正方形和圆形。

在 button 之前有 textfileds，在 textfiled 上我们给出诸如 45 之类的值，点击 uibutton 时执行动作，45 square 将自动调整 iphone scfreen 本身。

假设屏幕尺寸为 320 * 480 ，那么正方形会随着屏幕自动调整。

如果我们在 Textfiled 上给出值 300，则 300 个方块将在屏幕上自动创建和调整。

如果我们给出像 1500 这样的值，它将在一个阶段像方格纸一样显示。

我不知道如何去做以及如何开始以及从哪里开始。

我只是想它会使用 Quartcore Framework ，但我不知道从哪里开始我搜索的项目。

我想要专家的建议和想法。非常欢迎专家提出任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:09:45.123

创建一个按钮、一个标签和 2 个文本字段（一个用于高度，一个用于宽度）。在标签上设置一个1像素的边框，并将标签的宽度和高度设置为屏幕大小。为按钮创建一个 IBAction，并根据文本字段内的内容分配标签的宽度和高度。这将创建正方形。要创建圆，您可以使用 QuartzCore 并将角半径设置为高度/宽度的一半，或者您可以通过编程方式绘制它。这是实现您所要求的最快的方法，而无需过多地使用 GL 在屏幕上绘图，并且将是了解操作和输入如何工作的良好开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:32:39.497

```
// Step 1 : Add QuartzCore.framework in your project
// Step 2 : Create following two files .h and .m
// Step 3 : How to Use

// Import your custom file
#import "myDrawingView.h"

// Create object and add to your viewcontroller
myDrawingView *obj = [[myDrawingView alloc] initWithFrame:self.view.frame];
[obj drawSquaresWithNumber:17 andSize:self.view.frame.size];
[self.view addSubview:obj];

//------------------------------------------------------
// filename : myDrawingView.h
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface myDrawingView : UIView
{
    int nSquares;
    CGSize mazeSize;
}

- (void)drawSquaresWithNumber:(int)numberOfSquares andSize:(CGSize)screenSize;

@end
//------------------------------------------------------
    // filename : myDrawingView.m
#import "myDrawingView.h"

@implementation myDrawingView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    // Calculate height and width for each sqaure.
    float area = mazeSize.height*mazeSize.width;

    float squareSize = (area/nSquares)/100;
    NSLog(@"row : %f %f",mazeSize.width/squareSize,mazeSize.height/squareSize);

    int row, col;
    row = ceil(mazeSize.width/squareSize);
    col = ceil(mazeSize.height/squareSize);

    float height = mazeSize.height/row;
    float width = mazeSize.width/col;
    NSLog(@"%d %d",row,col);
    NSLog(@"h %f w %f",height,width);
    NSLog(@"square size : %f",squareSize);
    // Create Current Context To Draw
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Draw Line
    CGContextSetLineWidth(context, 0.5f);
    CGContextSetFillColorWithColor(context, [myDrawingView randomColor].CGColor);
    CGContextSetStrokeColorWithColor(context, [myDrawingView randomColor].CGColor);

    int x ,y, cnt;
    x = y = 0;
    cnt = 1;
    // A loop for number of squares

    for(int i=0;i<row;i++)
    {
        for(int j=0;j<col;j++)
        {
            if(cnt<=nSquares)
            {
                CGRect rect = CGRectMake(x, y, width, height);
                // Draws Squares
                UIBezierPath *path = [UIBezierPath bezierPathWithRect:rect];
                // To draw Oval uncomment
//                    UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:rect];
                [path fill];
                [path stroke];
            }
            x += width;
            cnt++;
        }
        x = 0;
        y += height;
    }
}

+ (UIColor *) randomColor {

    CGFloat red =  arc4random()%256;
    CGFloat blue = arc4random()%256;
    CGFloat green = arc4random()%256;
    return [UIColor colorWithRed:abs(red)/255.0f green:abs(green)/255.0f blue:abs(blue)/255.0f alpha:1.0];
}

- (void)drawSquaresWithNumber:(int)numberOfSquares andSize:(CGSize)screenSize
{
    nSquares = numberOfSquares;
    mazeSize = screenSize;
    [self setNeedsDisplay];
}

@end 
```

# javascript - 如何检查qq ajax文件上传器中的条件？

> ID：15568437
> 
> 赞同：1
> 
> 时间：2013-03-22T10:48:30.920
> 
> 标签：javascript, jquery

在使用 qq ajax 文件上传器打开文件之前，我必须检查下拉列表必须选择一个值。如何检查这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:42:49.920

让最初的上传控件被禁用。将下面的代码放入 document.ready()

：

```
$("#dropdown_Id").change(function () {
                         if($("#dropdown_Id").val()!=0)//Assuming selected value of dropdownlist initially is 0
                           {
                             //Code to enable upload control
                              }
                            else
                            {
                              //Code to disable upload control
                             }
                     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:15:23.200

将事件绑定到下拉列表，并取决于上传器的禁用/启用状态更改

# java - 如何使用java跳过带有多个评论结束标签的多行评论

> ID：15568438
> 
> 赞同：1
> 
> 时间：2013-03-22T10:48:33.670
> 
> 标签：java, parsing, comments

我有一个 java 程序，它读取一个文本文件并添加和删除部分内容。它也适用于文本文件中的内联和多行注释。

例如以下部分将被跳过

```
// inline comment

/*multiple
 *comment
 */ 
```

例如，在发生多个评论关闭的情况下，我遇到了问题

```
/**
*This
* is
*/
* a multiple line comment
*/ 
```

在这种情况下，只要出现第一个注释结束标记，就会停止跳过注释，并将该行的其余部分打印到输出文件中。

这是我这样做的方法

```
boolean commentStart = false;
boolean commentEnd = false;

if(line.trim().indexOf("/*") != -1) {  // start
   commentStart = true;
}

if(line.trim().indexOf("*/") != -1 && commentStart) {  // closed
   commentEnd = true;
   commentStart = false;
}

if(commentStart || (!commentStart && commentClosed)) {
    //skip line
} 
```

有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:09:55.147

我有一个 Perl 正则表达式，它会在充分考虑引用字符串和所有内容的情况下从 Java 中删除注释。唯一不能理解的是使用 \uXXXX 序列的注释或引用。

```
sub strip_java_comments_and_quotes
{
  s!(  (?: \" [^\"\\]*   (?:  \\.  [^\"\\]* )*  \" )
     | (?: \' [^\'\\]*   (?:  \\.  [^\'\\]* )*  \' )
     | (?: \/\/  [^\n] *)
     | (?: \/\*  .*? \*\/)
   )
   !
     my $x = $1;
     my $first = substr($x, 0, 1);
     if ($first eq '/')
     {
         # Replace comment with equal number of newlines to keep line count consistent
         "\n" x ($x =~ tr/\n//);
     }
     else
     {
         # Replace quoted string with equal number of newlines to keep line count consistent
         $first . ("\n" x ($x =~ tr/\n//)) . $first;
     }
   !esxg;
} 
```

我将尝试将其转换为 Java：

```
Pattern re = Pattern.compile(
 "(  (?: \" [^\"\\\\]*   (?:  \\\\.  [^\"\\\\]* )*  \" )" +
 "| (?: ' [^'\\\\]*   (?:  \\\\.  [^'\\\\]* )*  ' )" +
 "| (?: //  [^\\n] *)" +
 "| (?: /\\*  .*? \\*/)" +
 ")", Pattern.DOTALL | Pattern.COMMENTS);
 Matcher m = Pattern.matcher(entireSourceFile);
 Stringbuffer replacement = new Stringbuffer();
 while (m.find())
 {
      String match = m.group(1);
      String first = match.substring(0, 1);
      m.appendReplacement(replacement, ""); // Beware of $n in replacement string!!
      if (first.equals("/"))
      {
         // Replace comment with equal number of newlines to keep line count consistent
         replacement.append( match.replaceAll("[^\\n]", ""));
      }
      else
      {
         // Replace quoted string with equal number of newlines to keep line count consistent
         // Although Java quoted strings aren't legally allowed newlines in them
         replacement.append(first).append(match.replaceAll("[^\\n]", "")).append(first);
       }
 }
 m.appendTail(replacement); 
```

类似的东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:58:16.067

除非您将自己限制在嵌套注释中，否则您那里的文件格式不正确。如果没问题，那么您需要定义什么*是*评论，如果不仅仅是介于`/*`and之间的东西`*/`。从您的示例来看，*您*`*/`对评论的定义似乎是任何以,`/*` *或* 开头的行`*`。在正则表达式中：`^[/\\\b]?*`.

如果可行，如果它们与正则表达式匹配，我会跳过行。

# maven - 在本地找不到元数据

> ID：15568439
> 
> 赞同：22
> 
> 时间：2013-03-22T10:48:33.797
> 
> 标签：maven, dependencies, maven-3, artifactory

在本地机器上，我安装了一个带有 maven 存储库的 Artifactory，并且我的项目有一个非常简单的 .pom 文件，它指向它：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>MYGROUP</groupId>
    <artifactId>NAME</artifactId>
    <packaging>jar</packaging>
    <version>VERSION</version>
    <build>
        <sourceDirectory>SRCFOLDER</sourceDirectory>
        <testSourceDirectory>TESTFOLDER</testSourceDirectory>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>

    </build>

    <repositories>
        <repository>
            <id>local-artifactory</id>
            <name>Artifactory</name>
            <url>http://localhost:8081/artifactory/repo</url>
            <layout>default</layout>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
                <checksumPolicy>warn</checksumPolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
                <checksumPolicy>warn</checksumPolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>local-artifactory-plugins</id>
            <name>Artifactory Plugins</name>
            <url>http://localhost:8081/artifactory/repo</url>
        </pluginRepository>
    </pluginRepositories>

<dependencies>
    <dependency>
        <groupId>MYGROUP</groupId>
        <artifactId>DEPENDENCY1</artifactId>
        <version>bla-SNAPSHOT</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>MYGROUP</groupId>
        <artifactId>DEPENDENCY2</artifactId>
        <version>bla-SNAPSHOT</version>
        <scope>compile</scope>
    </dependency>
</dependencies>
</project> 
```

所以我声明了本地工件存储库，目的是每次都会重新加载所有内容。我也有几个依赖项，它们是 SNAPSHOTS。

现在我使用的是 maven 3.0.5，当我编译它时它工作正常，但它根本不刷新快照。绝不。曾经。日志文件如下所示：

```
[DEBUG] Could not find metadata MYGROUP:DEPENDENCY1:bla-SNAPSHOT/maven-metadata.xml in local (/opt/myuser/.m2/repository)
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://localhost:8081/artifactory/repo
Downloading: http://localhost:8081/artifactory/repo/MYGROUP/DEPENDENCY1/bla-SNAPSHOT/maven-metadata.xml
Downloaded: http://localhost:8081/artifactory/repo/MYGROUP/DEPENDENCY1/bla-SNAPSHOT/maven-metadata.xml (314 B at 13.9 KB/sec)
[DEBUG] Writing resolution tracking file /opt/myuser/.m2/repository/MYGROUP/DEPENDENCY1/bla-SNAPSHOT/resolver-status.properties
[DEBUG] Could not find metadata MYGROUP:DEPENDENCY1:bla-SNAPSHOT/maven-metadata.xml in local (/opt/myuser/.m2/repository)
[DEBUG] Skipped remote update check for MYGROUP:DEPENDENCY1:bla-SNAPSHOT/maven-metadata.xml, already updated during this session. 
```

所以它不断地抱怨它找不到本地的 maven-medatada.xml，当然他是完全正确的——它不存在。并且无法用它做任何事情。

所以我尝试使用 dependency:purge-local-repository 来清除本地库存，你猜怎么着？显然它无法清除它，因为每个工件中都没有 maven-metadata.xml，这是多么了不起的功能！

除了 .jar 和 .pom 之外的每个 .m2 工件目录都包含 maven-metadata-local-artifactory.xml（以及当前工件中 maven-metadata.xml 的正确副本）、_mave.repositories 和 resolver-status.properties。

Maven 是开箱即用的，.m2 中没有配置，/conf 文件夹中的配置是默认的，没有任何更改。

更新：我刚刚从工件手动下载了 maven-metadata.xml 并将其作为 maven-metadata.xml 放置在 .m2 中以作为依赖项 - 没有效果，它仍然“丢失”它。所以我不知道它想从我这里得到什么。它只是无法更新依赖项，因为“在此会话期间已更新”。好吧，我不知道它到底更新了什么，但显然是别的。

UPDATE2：服务器上 maven-metadata.xml 的内容：

```
<metadata>
    <groupId>MYGROUP</groupId> 
    <artifactId>DEPENDENCY1</artifactId> 
    <version>bla-SNAPSHOT</version> 
    <versioning>
        <snapshot>
            <buildNumber>1</buildNumber> 
        </snapshot>
        <lastUpdated>20130322155759</lastUpdated> 
    </versioning>
</metadata> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-27T20:36:43.357

我的 maven 抱怨它在本地找不到元数据，等等等等……基本上，发生的事情是我设法在中间 maven-build 中拔下电源线，并且相关本地 .m2 子目录中的元数据已损坏。我进去，从他们的 .m2 位置删除了有问题的工件，然后重新尝试构建。一切正常。只是想把这条消息留给那些和我有类似问题的人，但偶然发现了你的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T11:30:22.723

从 Maven 元数据 xml 文件看来，您在存储库中使用了非唯一快照。Maven 3 不支持非唯一的、仅使用 TIMESTAMP-BUILDNUMBER 而不是 SNAPSHOT 的快照 pom 文件。你有：

```
http://localhost:8081/artifactory/repo/MYGROUP/DEPENDENCY1/bla-SNAPSHOT/DEPENDENCY1-bla-XXXXX-Y.pom 
```

文件？

# javascript - 有没有一种巧妙的方法可以从 SVG 文档中提取所有元素并将它们放在 html 文本框中？

> ID：15568441
> 
> 赞同：0
> 
> 时间：2013-03-22T10:48:43.317
> 
> 标签：javascript, html, svg

我试图让用户能够手动编辑 SVG 文档。

是否有一种使用 DOM 从 SVG 文档中提取所有元素并将其放置在文本框中的直截了当的方法？我尝试使用innerHTML，但这不起作用（不适用于SVG）。

JavaScript 中是否有一种方法可以从嵌入式 SVG 文档中提取所有 SVG 元素并将它们存储为字符串？如果可以避免的话，我不想使用 jQuery 或插件。

对不起我的措辞，我的英语很差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:30:13.027

您可以使用它`XMLSerializer`来执行此操作。

```
var str = new XMLSerializer().serializeToString(svgDocument); 
```

如果你有一个`<object>`引用 svg 的标签，你的`svgDocument`变量应该设置为`yourObjectElm.contentDocument`. 如果 svg 在 html 中是内联的，那么您可以传递元素而不是文档。

# mysql - 正则表达式 - 删除包裹在 img 标签周围的锚标签

> ID：15568444
> 
> 赞同：2
> 
> 时间：2013-03-22T10:48:46.503
> 
> 标签：mysql, sql, regex, wordpress, phpmyadmin

我目前正在开发一个非常大的 WordPress 构建，其中包含大量帖子。我收到了一个请求，我必须执行以下操作...

删除包裹在 img 标签周围的所有锚标签。

例如，我需要以下...

```
<a href="some-random-page"><img src="some-radom-image"/></a> 
```

成为...

```
<img src="some-random-image"/> 
```

这完全可以使用我可以在 phpMyAdmin 中运行的 SQL 更新语句来完成，因为所有 WordPress 帖子都存储在“帖子”表中。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T14:21:40.313

对于匹配使用：`(<a[^<]*>.*?)(<img[^>]*>)([^<]*</a>)`

替换使用：`$2`

示例： http: [//RegExr.com?37vbk](http://RegExr.com?37vbk)

（用您的字符串替换示例中的虚拟文本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:05:07.507

您可以使用 Dreamweaver 执行此操作。导出您的数据库表。在 Dreamweaver 中打开。

找到以下选中“正则表达式”选项的内容。

```
<a href="([^>]*)"><img src="([^>]*)"/></a> 
```

现在将其替换为：

```
<img src=$2/> 
```

现在将 db 表导入 MySQL。

# android - Edittext布局问题

> ID：15568445
> 
> 赞同：3
> 
> 时间：2013-03-22T10:48:50.077
> 
> 标签：android

![截屏](../Images/7ca1c4a33ef0d60e76fe1dcacd70b46d.png)当我滚动屏幕时，该屏幕中的所有文本字段仅显示一半文本..我通过调整大小尝试了很多但没有得到问题..谁能解释我？

这是我的代码

```
 <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingTop="20dip" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background" >

            <EditText
                android:id="@+id/edit_signup_fname_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/firstname_hint"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background" >

            <EditText
                android:id="@+id/edit_signup_email_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/emailid_hint"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background" >

            <EditText
                android:id="@+id/edit_signup_familyname_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/familyname_hint"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background"
            android:singleLine="true" >

            <EditText
                android:id="@+id/edit_signup_familyemail_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/familyemail_hint"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background" >

            <EditText
                android:id="@+id/edit_signup_password_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/password_hint"
                android:inputType="textPassword"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dip"
            android:layout_marginRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/inputtext_background" >

            <EditText
                android:id="@+id/edit_signup_retype_id"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="15dip"
                android:layout_marginRight="15dip"
                android:layout_marginTop="10dip"
                android:hint="@string/retype_hint"
                android:inputType="textPassword"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dip"
            android:gravity="center_horizontal" >

            <Button
                android:id="@+id/btn_signup_sign_id"
                android:layout_width="150dip"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:background="@drawable/btn_sign_bg"
                android:text="@string/sign_up"
                android:textColor="#FFFFFF"
                android:textSize="20dip" />
        </LinearLayout>

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="200dp" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:33:33.007

在线性布局**或**Edittext 上留出边距。两者都没有。`marginTop`正在削减edittext的空间

# html - 动画 HTML5 细节元素

> ID：15568449
> 
> 赞同：0
> 
> 时间：2013-03-22T10:49:03.313
> 
> 标签：html, animation, details-tag

**是否可以在没有**jQuery的情况下为 html5 详细信息元素设置动画？

我在网络上看到了一些 jQuery 后备，可以为 details 元素设置动画，但我**不想**使用 jQuery。

动画细节元素的 jQuery 示例：http: [//afarkas.github.io/webshim/demos/demos/details.html](http://afarkas.github.io/webshim/demos/demos/details.html)

# java - jbpm spring集成中如何访问人工任务的任务形式

> ID：15568455
> 
> 赞同：0
> 
> 时间：2013-03-22T10:49:26.887
> 
> 标签：java, spring, spring-mvc, jbpm

我已经使用本地服务集成`JBPM 5.4`了。`Spring Framework 3.x.x`我的 Web 应用程序运行成功。我`LocalHTWorkItemHandler`用来启动、执行、暂停或完成人工任务。

但我的问题是如何向用户显示与任务关联的表单。我可以通过调用 REST API 来做这件事`/gwt-console-server/rs/form/task/{id}/render`。但是如何检索表单并将其集成到我的`SpringMVC`应用程序的视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:53:11.977

I believe you use Guvnor for storing your assets (process-definition, rules, etc).By default the task's form is stored by the name "*TaskName-taskform*" in guvnor.

You can use the rest services exposed by the Guvnor and read the form's source.

I believe that is how TaskFormDispatcher ,as mentioned by Kris, gets the form source.

Ex. The source of a task named "*UpdateComments*" in package "*HR*" will be

```
 http://guvnorserver:8080/drools-guvnor/rest/packages/HR/assets/UpdateComments-taskform/source 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:11:44.327

您可以使用 jBPM 控制台提供的内容作为 REST 服务的一部分，但如果您想要在自己的应用程序中更集成的东西，您可以自己渲染任务表单，它们是简单的 freemarker 模板，任务数据被注入其中。例如看一下这个类（以及同一个包中的其他类）： [https ://github.com/droolsjbpm/jbpm/blob/5.4.0.Final/jbpm-gwt/jbpm-gwt-form/src/主/java/org/jbpm/integration/console/forms/TaskFormDispatcher.java](https://github.com/droolsjbpm/jbpm/blob/5.4.0.Final/jbpm-gwt/jbpm-gwt-form/src/main/java/org/jbpm/integration/console/forms/TaskFormDispatcher.java)

# java - 如何将课程移动到单独的文档？

> ID：15568456
> 
> 赞同：-3
> 
> 时间：2013-03-22T10:49:28.720
> 
> 标签：java

在这段代码中，我想将类移动`Dollar`到一个单独的`.java`文件中。然后我需要在这个文件中添加什么样的导入语句？我需要调整`CLASSPATH`吗？我在 Mac OS X 上工作。

```
import org.junit.Test;
import static org.junit.Assert.*;

public class TestDollar
{
    class Dollar
    {
        int amount;

        Dollar(int amount)
        {
        }

        void times(int multiplier)
        {
        }
    }

    public void testMultiplication()
    {
        Dollar five = new Dollar(5);
        five.times(2);
        assertEquals(10, five.amount);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:52:02.563

只需创建另一个名为 Dollar 的类，然后使用指令 import yourpackage.Dollar 将其导入您的类 TestDollar；希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:51:59.030

只要`Dollar`将保留在同一个包中，您就不需要任何导入。如果这两个文件将驻留在不同的位置，您将需要更改类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:50:00.100

如果有人感兴趣，我现在有一个`Dollar`名为 Dollar.java 的类的文件：

```
class Dollar
{
    int amount;

    Dollar(int amount)
    {
    }

    void times(int multiplier)
    {
    }
} 
```

和一个带有测试的文件，名为`TestDollar.java`：

```
import static org.junit.Assert.*;

public class TestDollar
{
    public void testMultiplication()
    {
        Dollar five = new Dollar(5);
        five.times(2);
        assertEquals(10, five.amount);
    }
} 
```

通过调用运行测试`javac TestDollar.java`。在我的 .bash_profile 中，我设置

```
export CLASSPATH=/Users/machine/programming/tdd/junit-4.11.jar
export CLASSPATH=$CLASSPATH:/Users/machine/programming/tdd 
```

该目录包含`junit-4.11.jar`和`hamcrest-core-1.3.jar`文件。

# linux - 绕过 Flash Player 版本检查或覆盖现有版本号？

> ID：15568459
> 
> 赞同：0
> 
> 时间：2013-03-22T10:49:33.320
> 
> 标签：linux, firefox, flash, legacy

是否可以绕过 Flash 播放器版本检查？

我正在使用带有 FF 2.0 和 Flash Player 10 的旧嵌入式 Linux 设备。不幸的是，我们无法进一步升级现有版本。YouTube 和许多其他视频网站在修改浏览器的用户代理字符串时工作正常。我们只对检查 Flash 播放器版本的少数网站有问题。

例如 Flash 播放器检查 JavaScript：

`if($('.video-player-container').length > 0){` `if (swfobject.hasFlashPlayerVersion("10.2.0")) {` `else { flashWarning.... }` 

或者有没有办法在不升级播放器的情况下覆盖现有版本号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:42:00.877

您可以使用一些技巧来更改显示的版本号。简短的指示是通过用新版本号替换每次出现的旧版本号来更改共享库文件：

```
sudo sed -i -e 's/your_current_version/desired_version/g' /usr/lib/flashplugin-installer/libflashplayer.so 
```

在此之后，重新启动您的浏览器并转到[Adob​​e Flash 的“关于”](http://www.adobe.com/software/flash/about/)页面，看看它是否有效。

更长的迹象可以在[这篇博文](http://funkysea.com/?p=62)中找到。

编辑：我应该在这里添加一点警告：这是一种非常肮脏的方法，它可能只在您的 Flash 播放器下一次更新之前有效。只要原始版本号和所需版本号具有相同的位数，它就可能起作用！所以，请在尝试之前备份原始文件，即

```
sudo cp /usr/lib/flashplugin-installer/libflashplayer.so /usr/lib/flashplugin-installer/libflashplayer.so.backup 
```

要恢复原始未更改的文件，请键入：

```
sudo mv /usr/lib/flashplugin-installer/libflashplayer.so.backup /usr/lib/flashplugin-installer/libflashplayer.so 
```

# java - 泛型 Java，无界通配符

> ID：15568460
> 
> 赞同：3
> 
> 时间：2013-03-22T10:49:36.663
> 
> 标签：java, generics, unbounded-wildcard

您好，直接来自 Oracle [http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html提供的 java 教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)

```
static void filter(Collection<?> c) {
    for (Iterator<?> it = c.iterator(); it.hasNext(); )
        if (!cond(it.next()))
            it.remove();
} 
```

我知道编译时的类型擦除。而且我也知道类型（无界）将被 Object 替换。意识到在编译时使用无界通配符编译器会做什么？只是将其删除，因为它是原始类型？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:27:09.630

假设我们有一个泛型声明

```
interface Foo<T>
    T get();
    void set(T);
    void bet(); 
```

原始类型`Foo`等价于声明为的类型

```
interface Foo
    Object get();
    void set(Object);
    void bet();
    // all generics info are stripped 
```

例如，在 Java 5 中`List<E>`，它的原始版本包含与 pre-java5接口`List`完全相同的方法签名。`List`原始类型用于向后兼容。

Raw`List`非常接近`List<Object>`; 但与`List<?>`

* * *

类型的对象`foo`的`Foo<?>`类型为

```
interface Foo<X>
    X get();
    void set(X);
    void bet(); 
```

对于一些确定的，尽管未知的类型 X。虽然 X 是未知的，但我们仍然可以调用`foo.get()`and `foo.bet()`。但是我们不能调用`foo.set(a)`，因为没有办法知道 is 是否`a`属于未知类型`X`- 除非`a`is `null`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T11:11:57.410

之前已经回答过这个问题：[Java 泛型 - 无界通配符中的真正内容是什么？](https://stackoverflow.com/questions/7796220/java-generics-whats-really-in-a-unbounded-wildcard?rq=1)例如，未绑定通配符和[原始类型之间的差异](https://stackoverflow.com/questions/14242174/difference-between-an-unbound-wildcard-and-a-raw-type?rq=1)。

所以，是的，`<?>`原始类型是相同的（在运行时）。

# c# - 锚点/停靠以定位 DataGridView

> ID：15568463
> 
> 赞同：0
> 
> 时间：2013-03-22T10:49:40.690
> 
> 标签：c#, .net, datagridview, anchor, docking

我试图弄清楚如何在父容器内正确定位我的 DataGridView，但尽管尝试了宽度/高度/码头/锚点/等。我绝对想不通。

*   我想让桌子固定在左/右/底部，但有一些填充物以防止它与侧面/底部齐平。

*   我想在顶部保留一些额外的空间，因为我计划在那里放置第二个容器和其他选项。

*   不确定这是否相关，但我希望这些行是 DataGridView 宽度的百分比。这可以做到吗？

我怎样才能做到这一点？我目前有以下设置，但从屏幕截图中可以看出，它似乎只锚定在左侧，并且由于某种原因停留在顶部附近。

```
 dgv.Width = parent.Width;
    dgv.Anchor = (AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Bottom); 
```

![在此处输入图像描述](../Images/ec95b710e742fca567f76c3edb5140f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-15T15:42:53.453

您可以使用 DataGridView(dgv) 的以下属性来工作

```
Anchor: Top,Left // dgv.Anchor = AnchorStyles.Top | AnchorStyles.Left
AutoSizeColumn: Fill // we can fill for all columns or else it is enough to fill the last column dgv..Columns[0].AutoSizeModeDataGridViewAutoSizeColumnMode.Fill;
Dock: Fill // dgv.Dock = DockStyle.Fill 
```

只需查看链接[如何在表单调整大小时调整 datagridview 控件的大小](https://stackoverflow.com/questions/8183422/how-to-resize-datagridview-control-when-form-resizes)

# jquery - chrome 不透明度覆盖溢出问题影响边框半径

> ID：15568464
> 
> 赞同：1
> 
> 时间：2013-03-22T10:49:40.957
> 
> 标签：jquery, google-chrome, opacity, css

```
$("#page-circle").mouseover(function(){
    $(this).find('span').animate({"opacity":0.4},{queue:false});
}).mouseout(function(){
    $(this).find('span').animate({"opacity":0},{queue:false});
}); 
```

这个问题只存在于 chrome 浏览器中；跨度父溢出设置为隐藏；

这是跨度CSS：

```
#page-circle span{  
    position:absolute;  
    height:100%;
    width:100%; 
    bottom:0px;
    display:block;
    opacity:0;
    color:#fff;
    text-align:right;
    padding:8px 10px;
    background-image:url(../images/bg-overlay.png);
    background-color:#000;
} 
```

链接到 jsfiddle：http: [//jsfiddle.net/T4mer/zjr9Y/](http://jsfiddle.net/T4mer/zjr9Y/)

![在此处输入图像描述](../Images/b4bdb71a55202ea4fcef08a58af5675e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:30:46.647

你试过`border-radius`像这样在你的跨度上放一个吗？[http://jsfiddle.net/zjr9Y/3/](http://jsfiddle.net/zjr9Y/3/)

# javascript - 原生 Android 调用的 Javascript 在 Android 4.2 上不起作用

> ID：15568465
> 
> 赞同：1
> 
> 时间：2013-03-22T10:49:44.830
> 
> 标签：javascript, android

我有一个 Android 应用程序，我正在其中加载一个静态 HTML 页面。加载页面后，我想注入一些 javascript，这些 javascript 将从我的 Javascript 接口调用方法。

问题是在装有 Android 4.2.2 的设备上运行时，此调用未完成（我收到错误：“对象没有方法...”）。

**我知道，为了使它适用于为 API 级别 17 或更高级别构建的应用程序，该方法必须使用 @JavascriptInterface 进行注释。在这种情况下，它可以工作。我遇到的问题是因为该应用程序是为 API 级别 10 构建的，我无权访问 @JavascriptInterface。**

在这一点上，我能想到的是，如果应用程序是为小于 17 的 API 级别构建的。这将不适用于运行 Android 4.2.2 的设备。

如果这是真的，你有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:19:03.473

您可以尝试为 API 17 构建，但将最低版本设置得更低。类似 <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17"/>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T11:30:54.040

> 我遇到的问题是因为该应用程序是为 API 级别 10 构建的，我无权访问 @JavascriptInterface。

将您的构建目标更改为 API 级别 17（例如，在 Eclipse 中，转到 Project > Properties > Android）。将您设置`android:minSdkVersion`为 10，Lint 会指出您使用 API 级别 17 上存在但 API 级别 10 上不存在的东西的地方。

此时，您将能够使用`@JavascriptInterface`. `@TargetApi`根据 Lint 投诉，您可能还需要添加合适的注释。

# visual-studio-2010 - TFS 上的 MSBuild 失败 - WebDeploy 包

> ID：15568466
> 
> 赞同：2
> 
> 时间：2013-03-22T10:49:49.707
> 
> 标签：visual-studio-2010, tfsbuild, iis-express, webdeploy

我目前正在为一个项目进行构建，但我在 TFS 构建方面遇到了困难。
我只想使用来自 IIS Express 的参数创建一个 zip 包，使用 TFS 构建。

CSPROJ 配置： [![网络](../Images/51e984719d12cc87066b38862c593aea.png)](https://i.stack.imgur.com/RyIVG.png) [![打包/发布网络](../Images/3d4b1414bb38c4ec669275262fbd81a4.png)](https://i.stack.imgur.com/YJIoU.png)

IIS Express 存在于我的机器和构建服务器上（我可以访问项目中的 *.svc 文件）。
一切都在源代码控制上。

当我在我的机器上使用“构建部署包”时，我得到了 zip。
当我在构建服务器上使用“构建部署包”时，我得到了 zip。
当我在两者上使用 MSBuild 的命令行时，我得到了 zip。

有问题的命令行：

```
"C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe" "C:\WORKSPACES\[...]\Project.csproj" /p:Platform=AnyCPU;Configuration=Release /p:DeployTarget=Package /p:DeployOnBuild=true;DefaultPackageFileName=ZipName.zip 
```

但是当我将相同的命令行放入构建中时，它会失败：

```
"C:\Builds\2\[...]\Project.csproj" (default target) (1) ->
(PackageUsingManifest target) -> 
  C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5): error : Web deployment task failed.(Object of type 'manifest' and path 'C:\Builds\2\Project Release\Binaries\_PublishedWebsites\Project_Package\Project.SourceManifest.xml' cannot be created.) [C:\Builds\2\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5): error :  [C:\Builds\2\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5): error : Object of type 'manifest' and path 'C:\Builds\2\Project Release\Binaries\_PublishedWebsites\Project_Package\Project.SourceManifest.xml' cannot be created. [C:\Builds\2\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5): error : One or more entries in the manifest 'sitemanifest' are not valid. [C:\Builds\2\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5): error : Site '' does not exist. [C:\Builds\2\[...]\Project.csproj] 
```

附加信息，第 3009 行参考：

```
<VSMSDeploy Condition="!$(UseMsdeployExe)"
   MSDeployVersionsToTry="$(_MSDeployVersionsToTry)"
   Source="@(MsDeploySourceProviderSetting)"
   Destination="@(MsDeployDestinationProviderSetting)"
   DeploymentTraceLevel="$(PackageTraceLevel)"
   DisableLink="$(PackageDisableLinks)"
   EnableLink="$(PackageEnableLinks)"
   DeclareParameterItems="@(_Package_MsDeployDeclareParameters)"
   OptimisticParameterDefaultValue="$(EnableOptimisticParameterDefaultValue)"
   ImportDeclareParametersItems="$(_VsPackageParametersFile)"
   ReplaceRuleItems="@(MsDeployReplaceRules)"
   RetryAttempts="$(RetryAttemptsForDeployment)"> 
```

我知道我遗漏了一些东西，但我看不到什么......所以，如果你有建议......将非常受欢迎！:)

当我登录构建服务器时，tfs 构建没有使用与我相同的帐户运行。
IIS Express 是否可以通过 tfs build 很好地启动？
当我查看时`C:\Users\svcTfsBuild\Documents`，没有 IISExpress 目录，就像我的用户一样（svcTfsBuild 是 TFS Build 的服务帐户）。

**主要目标：**

*   获取带有这些参数的 tfs 构建的 zip 包（zip 包中的parameters.xml）。
*   **或者**
*   有一个 zip 包，我们可以在导入时指定应用程序池和物理路径。

像这样：

```
<parameters>
  <parameter name="IIS Web Application Name" defaultValue="Default Web Site/Project" tags="IisApp">
    <parameterEntry kind="ProviderPath" scope="AppHostConfig" match="^ProjectTest/Project$" />
    <parameterEntry kind="ProviderPath" scope="contentPath" match="^C:\\WORKSPACES\\[...]\\obj\\Release\\Package\\PackageTmp$" />
    <parameterEntry kind="ProviderPath" scope="setAcl" match="^C:\\WORKSPACES\\[...]\\obj\\Release\\Package\\PackageTmp$" />
  </parameter>
  <parameter name="IIS Web Application Pool Name" defaultValue="ASP.NET v4.0">
    <parameterEntry kind="DeploymentObjectAttribute" scope="application" match="application[@applicationPool='Clr4IntegratedAppPool']/@applicationPool" />
  </parameter>
  <parameter name="IisVirtualDirectoryPhysicalPath" defaultValue="D:\CompanyName\Project" tags="PhysicalPath">
    <parameterEntry kind="DestinationVirtualDirectory" scope=".*" match="^C:\\WORKSPACES\\[...]$" />
  </parameter>
</parameters> 
```

注意：我们可以直接在 csproj 上的 parameters.xml 中指定配置，因为工作空间在我们的机器上不一样，在 tfs 构建服务器上......

我希望这很清楚

**编辑：drk 的建议**

就像你说的，我从服务帐户运行命令行，得到了这个，特别是：

```
GenerateMsdeployManifestFiles:
  Generate source manifest file for Web Deploy package/publish ...
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018: The "IsCleanMSDeployPackageNeeded" task failed unexpectedly. [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> Microsoft.Web.Deployment.DeploymentException: Object of type 'package' and path 'C:\WORKSPACES\[...]\obj\Release\Package\Project.zip' cannot be created. ---> Microsoft.Web.Deployment.DeploymentException: The Zip package 'C:\WORKSPACES\[...]\obj\Release\Package\Project.zip' could not be loaded. ---> System.UnauthorizedAccessException: Access to the path 'C:\WORKSPACES\[...]\obj\Release\Package\Project.zip' is denied. [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.Win32Native.RaiseIOExceptionFromErrorCode(Win32ErrorCode errorCode, String maybeFullPath) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.FileStreamEx.CreateInstance(String path, FileMode fileMode, FileAccess fileAccess, FileShare fileShare) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.ZipFile.Load() [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.ZipPackageProvider..ctor(DeploymentProviderContext providerContext, DeploymentBaseContext baseContext, String path) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    --- End of inner exception stack trace --- [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.ZipPackageProvider.GetAttributes(DeploymentAddAttributeContext addContext) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.DeploymentObject.EnsureValidAttributes() [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    --- End of inner exception stack trace --- [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.DeploymentManager.CreateObjectPrivate(DeploymentProviderContext providerContext, DeploymentBaseOptions baseOptions, DeploymentObject sourceObject) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.DeploymentManager.CreateObject(DeploymentProviderOptions providerOptions, DeploymentBaseOptions baseOptions) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.DeploymentManager.CreateObject(String provider, String path, DeploymentBaseOptions baseOptions) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Deployment.DeploymentManager.CreateObject(DeploymentWellKnownProvider provider, String path) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    --- End of inner exception stack trace --- [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Publishing.Tasks.DynamicAssembly.CallStaticMethod(String typeName, String methodName, Object[] arguments) [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Web.Publishing.Tasks.IsCleanMSDeployPackageNeeded.Execute() [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() [C:\WORKSPACES\[...]\Project.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(2850,5): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) [C:\WORKSPACES\[...]\Project.csproj]
Done Building Project "C:\WORKSPACES\[...]\Project.csproj" (default targets) -- FAILED.

Build FAILED. 
```

我检查了服务帐户（在我的例子中是 SvcTfsBuild）。他可以完全控制工作区（所以是源代码）。而且我的帐户和 SvcTfsBuild 帐户在同一个组中（本地管理员）。

但是 TFS BUILD 日志（详细模式）没有显示任何权限问题...

**编辑 2013/03/25**

我已取消选中 Web 选项卡中的“使用 IIS Express”复选框。
构建生成好的 zip 包。
***所以，我认为只有 IIS Express 存在问题。***

在构建中，我在“在代理上运行”序列上有一个“InvokeProcess”，就在“CreateLabel”之后。
它使用这些参数启动 ISS Express：

```
/site:Project-Site 
```

在日志文件中，我的 Result 为 0（因此，我假设 ISS Express 启动良好，如果没有，它应该抛出异常）。但是，如果命令行格式不正确或错误（即：无法组合使用 /site 和 /path），结果也是 0。
如果我以这种方式启动 ISS Express，构建将停止（iisexpress 等待手动停止或只是听）。

**编辑 2 2013/03/25**

为了在构建的同时启动 IIS Express，我做了这个： [![TFBUILD](../Images/c379142d5cba9ab33467c9bea9d89650.png)](https://i.stack.imgur.com/7FqJ1.png)

在并行上，我有一个名为“BuildFinished”的变量，在构建过程的最后（左侧）中设置为 True。

但是，我又遇到了同样的错误（站点''不存在）。

通过“构建部署包”（在 VS2010 中）和通过 TFBUILD 构建时，我还发现了两个 Project.SourceManifest.xml 之间的区别。

构建部署包：

```
<?xml version="1.0" encoding="utf-8"?>
<sitemanifest>
  <appHostConfig path="Project-Site/Project" />
  <contentPath path="C:\WORKSPACES\Project\obj\Release\Package\PackageTmp" />
  <setAcl path="C:\WORKSPACES\Project\obj\Release\Package\PackageTmp" setAclResourceType="Directory" />
  <setAcl path="C:\WORKSPACES\Project\obj\Release\Package\PackageTmp" setAclUser="anonymousAuthenticationUser" setAclResourceType="Directory" />
</sitemanifest> 
```

构建：

```
<?xml version="1.0" encoding="utf-8"?>
<sitemanifest>
  <appHostConfig path="/Project" />
  <contentPath path="C:\Builds\1\Project\obj\Release\Package\PackageTmp" />
  <setAcl path="C:\Builds\1\Project\obj\Release\Package\PackageTmp" setAclResourceType="Directory" />
  <setAcl path="C:\Builds\1\Project\obj\Release\Package\PackageTmp" setAclUser="anonymousAuthenticationUser" setAclResourceType="Directory" />
</sitemanifest> 
```

路径值不一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:52:45.447

经过几次尝试，我认为问题出在 IIS Express 和 MSDeploy 之间，它们不能一起工作（这就是说“ `Site '' does not exist.`”）。

因此，我们并没有试图让它工作，而是改变主意使用一种有效的配置：在构建过程中修改 csproj 以使用 IIS。

步骤 1：构建服务器上的 IIS

1.  创建应用程序池：名称和框架版本是重要的两件事。而已。
2.  创建应用程序：名称和应用程序池很重要。您可以使用 C:\temp 作为物理路径。

第 2 步：构建的定义
您有两种选择：创建自定义构建活动（更好的一个）或在 xaml 中执行（丑陋的一个）。
目标是具有以下步骤：

1.  在“在代理上运行”序列上，就在“如果创建标签”之后
2.  删除目标 csproj 上的 readonly 属性（由 TFS 创建的工作区上的那个）
3.  阅读 csproj 的内容
4.  替换以下 XML 标记

`<UseIISExpress>True</UseIISExpress>`by `<UseIISExpress>False</UseIISExpress>`
`<UseIIS>False</UseIIS>`by `<UseIIS>True</UseIIS>`
`<IncludeIisSettings>False</IncludeIisSettings>`by `<IncludeIisSettings>true</IncludeIisSettings>`
`<IISUrl>{IIS Express URL}</IISUrl>`by `<IISUrl>{IIS URL}</IISUrl>`
/!\ 注意：布尔值可以是 True 或 true！
/!\ Beware2：如果使用 Cassini，IISUrl 的标签可能有自动换行，例如：

```
`<IISUrl>  
</IISUrl>` 
```

这只发生在 4 个开发人员的机器中的一台上。

{IIS Express URL}：与 IIS Express 类似`http://localhost:8080/`或`http://localhost:8080/Application`与 Cassini 为空。
{IIS URL}：就像`http://localhost/Application`.

最后，用修改内容覆盖 csproj（记住，TFS 工作区中的那个，而不是源代码控制上的那个）。

{IIS Express URL} 和 {IIS URL} 可以是构建的参数，但前提是构建一个接一个地采用 csproj（1 个构建 = 1 个 zip 包，因此必须修改 1 个 csproj）。

使用该解决方案（我认为有一个更好的解决方案，我不知道），我们使用我们知道它有效的配置。

在 IIS 中导入 zip 包时，可以更改应用程序池和物理路径。
这是我们的目标。

希望这可以帮助。

# excel - Excel：在数据透视表中使用列分组的 count() 的 max()

> ID：15568467
> 
> 赞同：2
> 
> 时间：2013-03-22T10:49:50.787
> 
> 标签：excel, excel-2007, pivot-table

我有一个从 MySQL 视图提供的数据透视表。每个返回的行基本上是“一个人，有一个角色，在一个地点，在一个日期”的实例。然后每个单元格显示人数（我们称之为 person_id）。

当你在 excel 中旋转它时，你会得到一个很好的表格：

```
 | Dates -->
--------------------------
Venue   |
   Role | -count of person- 
```

这很有意义，最终用户喜欢这种格式，但要求已更改为将列（日期）分组为一周。

当您以正常方式对它们进行分组时，此计数也会应用于列中。当然，这是合乎逻辑的行为，但我真正想要的是`max()`原始的`count()`.

所以问题是：有谁知道如何拥有细胞`count()`，但分组执行`max()`？

为了说明这一点，想象一下一周的列。然后将分组成像`max()`为一周，给出：

老的：

```
 | M | T | W | T | F | S | S ||
---------------------------------------   .... for several weeks
Venue X  |
   Role Y| 1 | 1 | 2 | 1 | 2 | 3 | 1 || 
```

新的（按周分组）

```
 | Week 1 |    ...
---------------------------
Venue X  |
   Role Y|    3   |    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:49:34.190

我不在我的电脑上，但以下步骤应该大致正确：

1.  您应该能够右键单击数据透视表上的日期字段并选择组。
2.  然后突出显示周，您可能还必须选择年份。
3.  最后右键单击您已经拥有的计数数据并展开汇总，然后选择最大值。

# django - 表单错误 int() 参数必须是字符串或数字，而不是 'QueryDict'

> ID：15568469
> 
> 赞同：0
> 
> 时间：2013-03-22T10:50:02.533
> 
> 标签：django, django-forms

有人可以帮我解决以下错误并解释问题吗？我所做的只是用查询集填充一个组，但是在提交表单时我收到以下错误...

* ***/sms/addbatch int() 参数中的 TypeError 必须是字符串或数字，而不是 'QueryDict'* ***

**视图.py**

```
def add_batch(request):
    # If we had a POST then get the request post values.
    if request.method == 'POST':
        form = BatchForm(request.POST)
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            # Clean all data and add to var data.
            data = form.cleaned_data
            groups = data['group'].split(",")
            for item in groups:
                batch = Batch(content=data['message'],
                              group=Group.objects.get(pk=item),
                              user=request.user
                              ) 
```

**表格.py**

```
class BatchForm(forms.ModelForm):

    class Meta:
        model = Batch

    def __init__(self, user=None, *args, **kwargs):
        super(BatchForm, self).__init__(*args,**kwargs)
        if user is not None:
            form_choices = Batch.objects.for_user_pending(user)
        else:
            form_choices = Batch.objects.all()

        self.fields['group'] = forms.ModelMultipleChoiceField(
            queryset=form_choices
        ) 
```

**模型.py**

```
class BatchManager(models.Manager):
    def for_user_pending(self, user):
        return self.get_query_set().filter(user=user, status="Pending") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:51:23.637

您将`request.POST`作为`user`参数传递给您的表单。做这个：

```
form = BatchForm(data=request.POST) 
```

```
#  first parameter ---v
def __init__(self, user=None, ...

#  first parameter ---v
form = BatchForm(request.POST) 
```

# android - Android 模拟器错误：std::bad_alloc

> ID：15568475
> 
> 赞同：9
> 
> 时间：2013-03-22T10:50:21.800
> 
> 标签：android, eclipse, android-emulator

我正在使用 Eclipse Juno 和 Android 模拟器 (SDK Tools 21.1)，并且我经常遇到此错误（嗯，6 小时内出现两到三次）：

```
[2013-03-22 11:41:19 - Emulator] terminate called after throwing an instance of 'std::bad_alloc'
[2013-03-22 11:41:19 - Emulator]   what():  std::bad_alloc
[2013-03-22 11:41:19 - Emulator] 
[2013-03-22 11:41:19 - Emulator] This application has requested the Runtime to terminate it in an      unusual way.
[2013-03-22 11:41:19 - Emulator] Please contact the application's support team for more information. 
```

我用谷歌搜索了它，但它似乎是一个 C++ 错误。我不知道这是我的应用程序的错误还是 Eclipse 或模拟器的错误。（LogCat 不显示任何错误）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T11:16:56.843

对不起，我的声誉不够高，这应该是一个评论，因为它不是一个真正的解决方案。

我遇到了同样的问题，但是当我禁用“使用主机 GPU”时它会停止。我认为这一定是模拟器的错误，因为我在模拟器中玩耍时也会产生问题（不使用我自己的应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T19:01:28.273

正如 RobinDeCroon 所说，我只有在使用“使用主机 GPU”时才会遇到这个问题。从 [相关](https://stackoverflow.com/questions/13364118/android-linux-error-of-failed-request-badalloc-insufficient-resources-for-ope)，这可能是旧英特尔显卡的错误/问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T22:37:30.887

我在使用 Android Studio 时遇到了完全相同的错误消息，并通过将启动选项从快速启动更改为冷启动来修复它。在 Android Studio 中，您可以进入 Tools > Android > AVD Manager > Edit (The Pencil) > Show Advanced Settings > 并从 Quick Boot 更改为 Cold Boot。

我不知道如何仅使用模拟器来做到这一点，但这可能是如何解决这个问题的线索。

# sql-server - sql内连接查询

> ID：15568477
> 
> 赞同：-3
> 
> 时间：2013-03-22T10:50:30.543
> 
> 标签：sql-server, inner-join

我正在处理sql查询，请检查并给我解决方案

请在下面找到表格的任务简要详细信息

表 1 `'tbl_SuperAdmin'`已归档

数据样例

```
s_id name age gtc.......
1     abc  23 .........
2     cda  42 .......... 
```

另一个表2有`'tbl_Renewal'`

```
renewalid  renname date supid   Payed etc......
1          first   -     1        1    ........
2          first   -     2        1    ........
3          second -      1        0     ........
4          second -      1        1     ........
5          third-        1        1     ........ 
```

查询是 `select *from tbl_superadmin as a inner join tbl_Renewal as b on a.s_id=b.supid`

结果是

```
 s_id name age gtc....... renewalid  renname date supid   Payed etc.......
1     abc  23 .............1        first     -      1         1    ........
2     cda  42 .............2       first      -      2         1    ........
1     abc  23 .............3       second     -      1        0     ........
1     abc  23 .............4       second     -      1        1     ........
1     abc  23 .............5       third      -      1        1     ........ 
```

在这里我想要如何支付=1 和更新id desc 并且不需要 s_id 不再重复 1 次

我想展示我的结果

```
 s_id name age gtc....... renewalid  renname date supid   Payed etc.......
    1     abc  23 .............5       third      -      1        1     ........ 
    2     cda  42 .............2       first      -      2         1    ........ 
```

像这个结果我想要请任何人帮助它

谢谢 pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:10:49.750

要删除重复项，您需要使用[Windows Function](https://www.simple-talk.com/sql/learn-sql-server/window-functions-in-sql-server/)。

```
With cte as 
(
 select *,row_number() over(partition by s_id order by renewalid desc )rn
 from tbl_superadmin as a 
 inner join tbl_Renewal as b 
 on a.s_id=b.supid
)
Select * from cte where rn=1 
```

[SQL FIDDLE](http://sqlfiddle.com/#!3/d1f7f/2)中的演示

**更新**

```
;With cte as 
( 
 select *,row_number() over(partition by s_id order by renewalid desc )rn 
 from alz_SuperAdmin as a inner join alz_Renewal as b on a.s_id=b.supid
)
select top 2 CONVERT(varchar(6),a.lastdate,6) as lastdate,
(select name from alz_states where ID=a.joblocation ) as locat,
from alz_jobpost as a
inner join 
(Select col1,col2,col3.... from cte where rn=1 )ct
on ct.commonColumn=a.CommonColumn  and 
ct.Product in 
(Select query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:54:25.103

您应该在查询中使用 GROUP BY 和 ORDER。像这样的东西：

```
SELECT 
    * 
FROM 
    tbl_SuperAdmin AS a
INNER JOIN 
    tbl_Renewal AS b 
ON 
    a.s_id = b.supid
GROUP BY
    a.s_id
ORDER BY
    b.renewalid
DESC 
```

# three.js - 三.js，是否可以交互改变平移速度？

> ID：15568486
> 
> 赞同：2
> 
> 时间：2013-03-22T10:50:45.653
> 
> 标签：three.js, webgl, pan

我正在使用 OrbitControls 来控制 3D 模型。

我将 panSpeed 配置为 (0.1) 以具有较慢的平移速度，但是当我缩放到场景中的一个对象时，这个 panSpeed (0.1) 对于该视图来说非常高。

我的意思是整体视图和对象视图需要不同的 panSpeed。

我们如何根据到对象的距离交互式地改变 panSpeed？这种交互式平移有助于流畅地控制场景。

谢谢。

# jquery - 显示记录的下拉列表不起作用

> ID：15568490
> 
> 赞同：0
> 
> 时间：2013-03-22T10:51:10.570
> 
> 标签：jquery, datatable

我有以下代码对我的数据表执行过滤器。

```
$("a").click(function(event){
   $("#datepicker").val('',3);
oTable.fnFilter(this.InnterHtml,3); 
```

好的，这是清除此日期选择器文本框，然后根据在 a href 标记中选择的内容应用特定过滤器。

我现在的问题是，当我使用下拉菜单显示“所有”记录时，它不起作用。如何清除数据表中的所有过滤器，并将其恢复为默认状态。

这是完整的 JQuery 代码。

```
 $(document).ready(function () {
           var oTable;
           function renderDetailTable(result) {
               var dtDetailData = [];
               $.each(result, function () {
                   dtDetailData.push([
                       this.Sender,
                       this.MessageDate,
                       this.MessageTime,
                       this.Reference,
                       this.MessageType,
                       this.Receiver,
                       this.ValueDate,
                       this.Currency,
                       this.Amount

                   ]);
               });

               $.datepicker.regional[""].dateFormat = 'dd/mm/yy';
               $.datepicker.setDefaults($.datepicker.regional['']);

               oTable = $('#tblMessageDetail').dataTable({
                   "aaData": dtDetailData,
                   "aLengthMenu": [[10, 25,50, 100, -1], [10, 25,50, 100, "ALL"]],
                   "asStripClasses": null,
                   "iDisplayLength": 10,
                   //"aaSorting": [[0, "asc"]],
                   "bJQueryUI": true,
                   "bFilter": true,
                   //"bAutoWidth": false,
                   //"bProcessing": true,
                   // "sDom": 'RC<"clear">lfrtip',
                   "sDom": 'RC<"H"lfr>t<"F"ip>',

                   "aoColumnDefs": [
                       {"bVisible": false, "aTargets": [11,12,13,14]}
                   ],

                   //Scrolling .......
                   "sScrollY": "250px",
                   "sScrollX": "100%",
                   "sScrollXInner": "100%",
                   "bScrollCollapse": true,

                   //Dynamic Language .......
                   "oLanguage": {
                       "sZeroRecords": "There are no messages that match your search criteria",
                       "sLengthMenu": "Display _MENU_ records per page&nbsp;&nbsp;",
                       "sInfo": "Displaying _START_ to _END_ of _TOTAL_ records",
                       "sInfoEmpty": "Showing 0 to 0 of 0 records",
                       "sInfoFiltered": "(filtered from _MAX_ total records)",
                       "sEmptyTable": 'No Rows to display.....!',
                       "sSearch": "Search all columns:"
                   },
                   "oSearch": {
                       "sSearch": "",
                       "bRegex": false,
                       "bSmart": true
                   }
               });
           }

           $.ajax({
               type: 'POST',
               url: 'Default.aspx/GetMessageDetail',
               data: '{}',
               contentType: 'application/json;charset=utf-8',
               dataType: 'json',
               success: function (response) {
                   //console.log(response);
                   //alert(response.d);
                   renderDetailTable(response.d);
               },
               error: function (errMsg) {
                   $('#errorMessage').text(errMsg);
               }
           });

           $("#datepicker").datepicker({
               "onSelect": function (date) {
                   oTable.fnFilter(date, 1);
               }
           }).keyup(function () {
               oTable.fnFilter('');
               oTable.fnFilter(this.value, 1);
           });

           $(".reference").click(function (event) {
               event.preventDefault();
               $("#datepicker").val('');
                oTable.fnFilter('',1);
                oTable.fnFilter(this.innerHTML, 3);
           });

           $("#resetTable").click(function (event) {
              // event.preventDefault();
               alert("clicked");
              // oTable.fnResetAllFilters();
           }); 
       }); 
```

下拉列表是数据表的一部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:58:42.397

如果您的代码中没有更多特殊内容，则默认过滤器应如下所示：

```
$("a").click(function(event){
   $("#datepicker").val('',3);
oTable.fnFilter(''); 
```

如果它不起作用，那么你可以检查[这个](http://datatables.net/plug-ins/api#fnFilterClear)。尝试使用 `fnFilterClear` 添加该插件代码并编写以下代码：

```
oTables.fnResetAllFilters(); 
```

# css - 为什么 css3 只有 + 和 ~ 兄弟组合？那么如何解决这种问题？

> ID：15568495
> 
> 赞同：1
> 
> 时间：2013-03-22T10:51:24.977
> 
> 标签：css, css-selectors

```
<div class="box">
    <a><p>hello-1</p></a>
    <p>world</p>
    <a><p>hello-2</p></a>
</div> 
```

我想在悬停时使用 CSS3 制作`<a>`，只会`<p>world</p>`将颜色变为红色。

但是，在 CSS3 中，如果使用`div.box a:hover + p`, 仅适用于将鼠标悬停在 上`hello-1`，`hello-2`无效。

`+`并且`~`在 CSS3 之后所有元素都在为元素工作，有没有办法让这两个在悬停时`<a>`可以改变`<p>world</p>`颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:00:16.747

试试这个：

```
.box:hover > p { color: red; }
.box > p:hover { color: black; } 
```

## [*现场演示*](http://codepen.io/thebabydino/pen/afeti)

# jquery - 使用 jQuery 的 slideDown 和 slideUp 多个字段

> ID：15568497
> 
> 赞同：0
> 
> 时间：2013-03-22T10:51:34.950
> 
> 标签：jquery, slide, slidedown, slideup, toggleclass

我正在尝试使用显示字段向下滑动多个内容。这工作正常。班级也很好地变成了“向上”。然而，当我再次单击文本时，什么也没有发生。为什么这不起作用？有没有人有更好的解决方案？

```
jQuery('#slidetoggle.down').click(function(e){
    jQuery('.slider').slideUp();
    jQuery(this).text('show fields');
    jQuery(this).toggleClass('down');
    jQuery(this).toggleClass('up');
});
jQuery('#slidetoggle.up').click(function(e){
    jQuery('.slider').slideDown();
    jQuery(this).text('hide fields');
    jQuery(this).toggleClass('up');
    jQuery(this).toggleClass('down');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:57:21.490

代码如：

```
jQuery('some selector') 
```

说要立即找到匹配的元素`'some selector'` *，*而不是留意以后可能与选择器匹配的元素。

大概您的元素最初只有“向上”和“向下”类之一，因此只有一个单击处理程序被绑定。

你可以这样做：

```
jQuery('#slidetoggle').click(function(e){
    if ($(this).hasClass('down')) {
       jQuery('.slider').slideUp();
       jQuery(this).text('show fields').toggleClass('down up');
    } else {
       jQuery('.slider').slideDown();
       jQuery(this).text('hide fields').toggleClass('up down');
    }
}); 
```

演示：http: [//jsfiddle.net/SBDDx/](http://jsfiddle.net/SBDDx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:48:38.700

我设法用不同的策略得到了相同的结果。

最初用 display:none; 隐藏其中一个按钮。然后：

```
jQuery('#slidetoggle.down').click(function(e){
    jQuery('.slider').slideUp();
    jQuery(this).hide();
    jQuery('#slidetoggle.up').show();
});
jQuery('#slidetoggle.up').click(function(e){
    jQuery('.slider').slideDown();
    jQuery(this).hide();
    jQuery('#slidetoggle.down').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:03:27.790

如果我正确地告诉你，那么你还需要更改 ID，因为我想你正在使用相同的按钮..你正在更改文本而不是输入的 id ...所以其他 ID 的代码不会工作

尽管如此，您需要为一个选择器编写此代码，如下所示

```
jQuery('#slidetoggle').click(function(e)
{
  var text   = (jQuery(this).text() == 'show fields')?'hide field':'show fields';
  jQuery('.slider').slideToggle();
  jQuery(this).text(text);
  jQuery(this).toggleClass('down');
  jQuery(this).toggleClass('up');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:22:27.107

您需要做的就是切换-

```
jQuery('#slidetoggle').click(function(e){
   jQuery('.slider').toggle('slideUp'); 
```

});

[演示](http://jsfiddle.net/Eeq3u/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:13:43.380

因为`.up`页面加载时元素不存在。

你应该做的“稍微”不同:)

```
$('#slidetoggle')
.on('click', function(e){
    var $this = $(this),
        $slider = $('.slider'),
        isOpened = $slider.is(':visible');

    if (isOpened)
    {
        $slider.slideUp();
        $this.text('show fields');
    }
    else
    {
        $slider.slideDown();
        $this.text('hide fields');
    }
}); 
```

[http://jsfiddle.net/qwL33/](http://jsfiddle.net/qwL33/)

# xml - WCF Rest : DataContractSerializer - 序列化名称包含冒号的对象

> ID：15568514
> 
> 赞同：1
> 
> 时间：2013-03-22T10:52:36.980
> 
> 标签：xml, wcf, rest, post, serialization

大家好，我需要从我的 WCF/REST 获取 XML 自定义，但我的属性名称没有按照我的意愿进行序列化，因为它包含一个冒号。

我的 DataContract 用于错误响应

```
[DataContract(Namespace = "xxxx:xxxx:rest", Name = "hs:rest")]                 
public class ErrorResult
{
 [DataMember(Order = 0, Name = "status")]
    string Status
    {
        get
        {
            return "ERROR(5698)";
        }
        set { }
    }
    [DataMember(Order = 1, Name = "reason")]
    public string Reason { get; set; }
    [DataMember(Order = 2, Name = "extendedMessage")]
    public string ExtendedMessage { get { return string.Empty; } set { } }
    [DataMember(Order = 3, Name = "result")]
    public string Result { get { return string.Empty; } set { } }
    [DataMember(Order = 4, Name = "type")]
    public string Type { get { return string.Empty; } set { } }
    [...]
} 
```

我的序列化器

```
public string XmlTranslation(ErrorResult error)
    {

        using (var memoryStream = new MemoryStream())
        {
            using (var reader = new StreamReader(memoryStream))
            {
                var serializer = new DataContractSerializer(error.GetType());
                serializer.WriteObject(memoryStream, error);
                memoryStream.Position = 0;
                return reader.ReadToEnd();
            }
        } 
```

使用这些方法并分析与提琴手的网络通信，结果如下：

要求：（不重要）

```
<?xml version="1.0" encoding="UTF-8"?><rest xmlns="xxxx:xxxx:rest" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance ">
<type>date</type> 
<domain>test.it</domain>
<date>2009-03-13</date>
<page>1</page>
<reportType>daily</reportType>
<actionName>store</actionName>
</rest> 
```

回复：

```
<hs_x003A_rest xmlns="xxxx:xxxx:rest" xmlns:i="http://www.w3.org/2001/XMLSchema-
instance">
<status>ERROR(5698)</status>
<reason>InternalError(1011)</reason>
<extendedMessage/>
<result/>
<type/>
</hs_x003A_rest> 
```

我得到一个像“hs_x003A_rest”这样的名字，但我得到“hs：rest”你有什么建议吗？提前感谢您的回答

# c++ - Fl_Gl_Window 在创建时闪烁

> ID：15568520
> 
> 赞同：0
> 
> 时间：2013-03-22T10:52:45.060
> 
> 标签：c++, opengl, fltk

我有一些简单的 fltk 代码：

```
#include <FL/Fl.H>
#include <FL/Fl_Gl_Window.H>
#include <FL/gl.h>

class MyWin : public Fl_Gl_Window {
  public:
  MyWin(int x,int y, int w,int h, const char*l = 0) :
    Fl_Gl_Window(x,y,w,h,l)
  {
  }
  void draw();
  void resize(int X,int Y,int W,int H) {
    Fl_Gl_Window::resize(X,Y,W,H);
    glLoadIdentity();
    glViewport(0,0,W,H);
    glOrtho(-W,W,-H,H,-1,1);
    redraw();
  }
};

void MyWin::draw() {
  ortho();
  glBegin(GL_QUADS);  
    glColor3d(1,0,0);
    glVertex3f(10,10,0);
    glColor3d(0,1,0);
    glVertex3f(w()-10,10,0);
    glColor3d(0,0,1);
    glVertex3f(w()-10,h()-10,0);
    glColor3d(1,1,0);
    glVertex3f(10,h()-10,0);
  glEnd();
}

int main(int argc,char* argv[]) {
  Fl_Window win(500,500, "OpenGL");
  MyWin window(10,10,win.w()-20,win.h()-20);
  win.end();
  win.resizable(window);
  win.show(argc,argv);
  return Fl::run();
} 
```

这个示例在 Windows 7 上使用 mingw 为我完美地编译和链接，但是当我运行它时，它变得非常丑陋。首先屏幕变暗，并闪烁白色。然后屏幕被重绘，我的窗口出现了。当我关闭应用程序时也会发生同样的情况。

我试图删除绘图代码，同样发生，然后我从外部窗口中删除了 gl 窗口，它仍然发生。所以它不受实际绘图的影响。所以我怀疑是opengl上下文创建导致了这个。删除 gl 窗口的创建支持这一假设，因为窗口现在“安静地”出现。

有谁知道我怎样才能让 Fl_Gl_Window 在 Windows 中正常播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:57:46.983

在 draw() 函数中，我使用

```
 if (!valid())
    {
        valid(1);
        glLoadIdentity();
        glViewport(0,0,w(),h());
        ortho();
    } 
```

在其他任何事情之前。我认为这是一个OpenGL函数。如果你在这里放一个 printf 语句，你会看到它在第一次绘制和任何调整大小时被调用。

也许它与这个问题有关：[有效的 OpenGL 上下文](https://stackoverflow.com/questions/14364/valid-opengl-context)？

# zend-framework2 - ZF2 中的 Zend\Paginator\Adapter\DbSelect DISTINCT 问题

> ID：15568529
> 
> 赞同：3
> 
> 时间：2013-03-22T10:53:08.023
> 
> 标签：zend-framework2, paginator

在 ZF2 的分页器 DbSelect 适配器中使用 DISTINCT 查询时遇到问题。我的步骤是。

首先我创建了 Select 对象。

```
$select = new Select();
$select->columns(
    array(
          'personId' => new Expression("DISTINCT $this->table.person_id"),
'first_name', 'middle_name', 'last_name'));
$select->from($this->table); 
```

然后我将此对象传递给 Zend\Paginator\Adapter\DbSelect

```
$result = new DbSelect($select, $this->adapter, $this->resultSetPrototype); 
```

现在的问题是，如果我通过打印 sql 查询 `echo str_replace('"', '', $select->getSqlString());` 并在 mysql 上运行此查询，它会显示 12 个结果。

但`$result->count();`显示 55 结果。

我试图找出问题并发现 Zend\Paginator\Adapter\DbSelect`count()`函数可能有问题。

当我在 Zend\Paginator\Adapter\DbSelect`count()`函数中打印 sql 查询时，它会从查询中删除 DISTINCT 子句并添加自己的计数列 c。

`SELECT COUNT(1) AS c FROM myTable;`

请建议我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T01:17:06.620

是的，Manish，你是对的，计数功能有问题。它留下了 distinct 和 group by 子句。我也遇到了同样的问题。虽然没有找到解决方案。

正如人们所看到的那样[https://github.com/zendframework/zf2/blob/master/library/Zend/Paginator/Adapter/DbSelect.php](https://github.com/zendframework/zf2/blob/master/library/Zend/Paginator/Adapter/DbSelect.php)

如果您使用 distinct 或 group by 子句，count 函数计算的计数可能会有所不同。

有两种解决方案。1）提出问题并等待他们解决问题 2）编写自己的适配器

我会选择第二个。ZF2 最令人敬畏的事情之一是它为您提供了根据需要编写所有内容的灵活性。所以继续创建你自己的适配器

# android - 我可以从相机意图中保存自己的图像吗？

> ID：15568535
> 
> 赞同：0
> 
> 时间：2013-03-22T10:53:36.920
> 
> 标签：android, camera

我正在开发一个从相机拍照并加密的应用程序。我的想法是使用相机意图，然后获取图像进行加密。

问题是我想获取相机生成的图像并在写入 SDCARD**之前对其进行加密。**

我已经阅读了教程，他们都使用“put_extra”函数来设置文件名以保存图片。

可以在 RAM 中获取 JPG 而不是将其保存在 SD 中吗？或者在这种情况下必须制作我自己的相机？

我知道我可以让相机写入图像，对其进行加密，然后删除旧图像，但这并不安全，因为有人可以尝试从 SD 中恢复已删除的文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:06:14.993

据我所知，如果不保存到文件，您将无法做到这一点。但是考虑创建自己的相机活动，那么您将对相机有更多的控制权。使用表面视图进行相机预览，并实现您的自定义 PictureCallback 并覆盖 onPictureTaken(byte[] data, Camera camera) 以便您无需将图像数据保存到文件系统即可获取图像数据。

# jquery - JQuery甘特图 - 变量作为值

> ID：15568536
> 
> 赞同：0
> 
> 时间：2013-03-22T10:53:37.527
> 
> 标签：jquery, variables, gantt-chart

我正在尝试操作我在网上找到的 jquery 甘特图（此处： http: [//www.maro-z.com/examples/jquery.gantt/](http://www.maro-z.com/examples/jquery.gantt/)），因为它在简单性和重量轻方面完全符合我的需求是。

是否可以在 jquery 中使用变量而不是值？以下代码用于创建甘特图：

```
 $("#gantt").gantt({
    'tasks':[
        { 'titles': 'Task01', 'start_date': '20130323', 'end_date': '20130323' },
        { 'titles': 'Task02', 'start_date': '20130327', 'end_date': '20130327' },
        { 'titles': 'Task03', 'start_date': '20130406', 'end_date': '20130406' }
    ]
}); 
```

我想将每个 { 'titles': 'Task01', 'start_date': '20130323', 'end_date': '20130323' } 替换为：

```
 for(i in title){
                { 'titles': title[i], 'start_date': startdate[i], 'end-date': enddate[i] },
                } 
```

这可能吗？

非常感谢您的帮助:)

卡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:14:58.410

这是错误的方式。我需要一个对象，而不是字符串。以下是一种享受：

```
 GanttOptions[i] = new Object();
    GanttOptions[i]['titles'] = title[i];
    GanttOptions[i]['start_date'] = startdate[i];
    GanttOptions[i]['end_date'] = enddate[i];

$("#gantt").gantt({
    'tasks':GanttOptions
}); 
```

# .net - 我怎么知道它的用户是否相同但IP不同。

> ID：15568540
> 
> 赞同：0
> 
> 时间：2013-03-22T10:53:46.550
> 
> 标签：.net, ip

我们的网站上有很多虚假用户。

我们从 IP 地址或电子邮件地址阻止他们，但发现他们从不同的 ip 再次返回我们如何知道我们阻止的同一用户？（请注意我们需要在他们登录之前阻止他们）我们的网站在.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:58:24.553

尝试通过`Set-Cookie`标头在客户端上创建一个 cookie，例如表示一个 GUID，并将它们存储在一个临时表中。因此，如果这些用户不使用隐私浏览，他们的 cookie 将是可访问的，因此如果您在阻止列表中找到 GUID cookie，则该客户端曾经被 IP/电子邮件阻止，因此相同。但很可能您将无法做到这一点，因为他们需要在被禁止获取该 cookie 后连接到您的网站，或者他们使用清除 cookie 的隐私浏览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:17:23.163

简单的回答，你不能。如果您想要足够糟糕，可以更改连接的每个识别功能。唯一真正的解决方案是限制在没有经过批准的帐户的情况下可能造成的损害。

# list - 列出文件夹但排除特定文件夹的批处理脚本

> ID：15568541
> 
> 赞同：5
> 
> 时间：2013-03-22T10:53:47.523
> 
> 标签：list, batch-file, directory, dir

我希望此脚本列出文件夹名称中包含“已删除”的所有文件夹，但如果它们位于名为“完成”的文件夹中，则不列出。

例如：列出文件夹，如果它在`C:\temp`，如果它在，`C:\temp\random_folder_name`但不是如果它在`C:\temp\done`

```
dir /s "C:\temp" | findstr "\deleted" 
```

短篇小说，排除所有名为“完成”的文件夹及其内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T11:06:06.637

你快到了。

Findstr /v 返回所有不包含字符串的行

dir /ad 将只显示目录 (Atrribut=Directory)

```
dir /s /ad "C:\temp" | findstr "\deleted" | findstr /v "\done" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:01:28.500

```
dir /s "C:\temp" | findstr "\deleted"|findstr /i /v "\temp\done\" 
```

应该符合要求

*   `\temp`或者如果您想省略任何在路径上作为目录“完成”的名称，请删除该部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T18:11:34.300

在很多情况下：

```
dir /b /s /aa <path> 
```

Will do the trick. /b for less verbose output, /s for recursive (sub directories) and /aa for only files ready to be archived. This is usually the case for normal created files - it defaults to on!

# ruby - resque 被工人工作阻止

> ID：15568542
> 
> 赞同：0
> 
> 时间：2013-03-22T10:53:49.857
> 
> 标签：ruby, redis, resque

我正在使用 redis pub/sub withing resque worker，resque 在第一份工作后挂起，我的工作任务是阻塞性质的。我的理解是 resque 为每个新工作分配一个新线程。

我的工人如下

```
class SendInvitation
  @queue = :outbound_dialer
  def self.perform(contact_type, contact_no, invitation_audio_file)
    @invitationManager = DRbObject.new_with_uri(DRB_SERVER_URL)

    task_id = @invitationManager.send_invitation(contact_type, contact_no, invitation_audio_file)
    puts task_id+"is the currents task id"
    $redis = Redis.new(:timeout=>REDIS_TIMEOUT)
    $redis.subscribe('outbound_dialer') do |on|
      on.message do |channel, msg|
        data = JSON.parse(msg)
        if(data['id'] == task_id)
          puts 'here'
          @invitationManager = nil
          # exit
        end
      end
    end
  end
end 
```

ps -ef 结果

这里线程 5784 正在阻塞 resque 任务，一旦我终止当前处理任务，resque 就开始下一个任务，并在完成该根 3595 1 0 14:14 后再次开始等待？00:00:34 /usr/bin/ruby1.9.1 /usr/local/bin/resque-web root 5370 1887 0 15:40 pts/1 00:00:04 resque-2.0.0.pre.1：分叉 5784在 1363947580 根 5784 5370 0 15:49 pts/1 00:00:00 resque-2.0.0.pre.1：处理 outbound_dialer 自 1363947580 [SendInvitation] 根 5803 2140 0 15:49 pts/2 00:00:00 grep --color=auto resque

我已经尝试过 COUNT=5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:58:09.513

Resque 确实为一项工作分叉了一个新进程（不是线程）。然后它等待工人完成并抓住下一个工作。如果您想要更多并行运行的作业 - 运行更多 resque 工作进程。

# c# - C#进程管理

> ID：15568548
> 
> 赞同：0
> 
> 时间：2013-03-22T10:54:18.287
> 
> 标签：c#, .net, multithreading

我们正在尝试实现一个启动进程的程序。但同时最多可以有 2 个进程在内存中运行。如果进程数超过 2，我们会因为许可政策而出现异常。所以基本上我们需要等到 2 个进程结束，然后再开始另外 2 个，直到我们完成。我试图检查内存中是否有 2 个或更多进程然后让线程睡眠，但它似乎不能正常工作

```
while (Process.GetProcesses().Where(x => x.ProcessName == "myProcessName").Count() >= 2)
{
 Thread.Sleep(100);
}
//Start next process 
```

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:56:22.833

似乎您需要[SemaPhore](http://msdn.microsoft.com/en-IN/library/system.threading.semaphore.aspx)来确保 atmax 2 进程一次运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:02:29.440

您可以启动进程并等待`Exited`事件重新启动另一个，如下所示：

```
using System;
using System.Diagnostics;

namespace ConsoleApplication1 {
    class Program {
        static void StartProcess(string Path) {
            Process Process = Process.Start(Path);
            Process.EnableRaisingEvents = true;
            Process.Exited += (sender, e) => {
                StartProcess(Path);
            };
        }

        static void Main(string[] args) {
            for (int i = 0; i < 2; i++) {
                StartProcess("notepad");
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:38:35.040

我们找到了临时解决方案：

```
while (true)
  {
    lock (_lock)
    {
      if (Process.GetProcesses().Where(x => x.ProcessName == "processName").Count() < GetProcessNumber)
      {
        //do Smth
        break;
      }
      Thread.Sleep(1000);
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:36:22.633

如果先前运行的进程全部退出，这将考虑已经运行的进程并且也只启动新进程。

```
string processName = "calc";
int processCount = 2;

while ( true )
  {
  while ( Process.GetProcessesByName( processName ).Count() < processCount )
    {
    Process.Start( processName );
    }

  var tasks = from p in Process.GetProcessesByName( processName )
              select Task.Factory.StartNew( p.WaitForExit );
  Task.WaitAll( tasks.ToArray() ); 
  } 
```

# c# - Linq where 子句中的自定义 Func<> 委托

> ID：15568551
> 
> 赞同：0
> 
> 时间：2013-03-22T10:54:20.753
> 
> 标签：c#, linq, func

我应该自定义一个 Func 表达式，以便检查其中的字节数组，如果该数组等于 POCO 中的字段，则返回 true。

所以不知道怎么定义...

```
public Patient GetPatientByIdentificationCode(byte[] bytes)
    {
        return DbSet.Where(Func<>).FirstOrDefault();
    } 
```

患者有一个标识码，它是一个字节数组......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:58:31.940

原则上，这样的事情应该有效：

```
return DbSet
  .Where(i => i.IdentificationCode.Length == bytes.Length)
  .FirstOrDefault(); 
```

如果您可以更清楚，那么我们可能会更有帮助。具体来说，您可以判断使用是否`DbSet`是集合`Patient`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:35:05.790

如果字节的顺序是相等的一部分，那么您可以使用[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb342073.aspx)：

```
return DbSet.Where(p => p.IdentificationCode.SequenceEqual(bytes)).FirstOrDefault(); 
```

如果顺序无关紧要，那么您可以检查元素是否相同并且长度是否相同：

```
return DbSet.Where(p => 
                 p.IdentificationCode.Length == bytes.Length && 
                 p.IdentificationCode.Intersect(bytes).Count() == p.IdentificationCode.Length)
            .FirstOrDefault(); 
```

它可能会比`SequenceEqual`只在字节顺序不重要时使用它要慢。

作为旁注，我强烈建议将其设为真正的方法或扩展方法，`Patient`因为我怀疑您会经常使用它。

要么，要么更改为比字节数组更容易比较（和可显示）的类型。

# ruby-on-rails - 如何访问我在 rails 中创建的 json 数据

> ID：15568557
> 
> 赞同：1
> 
> 时间：2013-03-22T10:54:37.157
> 
> 标签：ruby-on-rails, json

我可以输入什么 url 来查看 json 值以及如何让我的 iphone 项目访问它。

这是我的索引方法

```
def index
        @players = Player.find(:all)
        respond_to do |format|
            format.html
            format.json  { render :json => @players.to_json }
        end
    end 
```

这是我的路线。

```
ChooseTeams::Application.routes.draw do
  resources :players
 root :to => "players#index"
end 
```

请询问任何其他信息，因为我是 Rails 新手，不知道这里还提供什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:58:40.193

索引方法：localhost:(port)/players.json (方法 GET)

显示方法：localhost:(port)/players/1.json (方法 GET)

我向您推荐 POSTMAN（在 Google Chrome 中）来测试此响应。

要响应 iPhone JSON，请使用 REST API

[http://railscasts.com/episodes/350-rest-api-versioning](http://railscasts.com/episodes/350-rest-api-versioning)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:42:41.160

您应该在请求 URL 时设置接受标头：

```
curl -H 'Accept: application/json' http://localhost:<PORT>/players 
```

在您的 iOS 项目中，您应该设置用于设置上述标头的任何 HTTP 库。

# c++ - 在 c++ 中使用 unicode char 支持从 TCHAR 转换为 char*

> ID：15568559
> 
> 赞同：2
> 
> 时间：2013-03-22T10:54:38.953
> 
> 标签：c++, visual-c++

如何使用 unicode 字符将 TCHAR 转换为 char*。我使用以下代码

```
//BROWSE FOLDER - Opens a browse folder dialog.
char* browse_folder(void)
{
char *selected_path = NULL;

TCHAR path[MAX_PATH];
BROWSEINFO bi = { 0 };

bi.ulFlags = BIF_RETURNONLYFSDIRS | BIF_USENEWUI;
LPITEMIDLIST pidl = SHBrowseForFolder(&bi);

if (pidl != 0)
{
    // get the name of the folder and put it in path
    SHGetPathFromIDList(pidl, path);

    //Set the current directory to path
    SetCurrentDirectory(path);

    // free memory used
    IMalloc* imalloc = 0;
    if (SUCCEEDED(SHGetMalloc(&imalloc)))
    {
        imalloc->Free(pidl);
        imalloc->Release();
    }
    //selected_path = ;
    USES_CONVERSION;
    selected_path = T2A(path);
}
} 
```

我在 Visual Studio 项目设置中启用了 unicode。我正在使用此功能浏览文件夹，当我将其转换为 char* 时，我在路径（TCHAR）中获得了准确的值* unicode 字符被替换为（?????）符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:29:26.777

由于您的项目支持 unicode 字符，您应该使用 WideCharToMultiByte() 转换为 char*。尝试使用它。

# c# - 野田时间入门

> ID：15568561
> 
> 赞同：18
> 
> 时间：2013-03-22T10:54:43.740
> 
> 标签：c#, .net, datetime, nodatime

我希望将 Noda 时间用于一个相当简单的应用程序，但是我正在努力寻找任何文档来处理一个非常基本的用例：

我有一个登录用户，并将他们的首选时区存储在设置中。来自客户端的任何日期/时间都采用已知的文本格式（例如“dd/MM/yyyy HH:mm”），具有已知的时区 ID（例如“Europe/London”）。我计划将这些时间转换为 UTC/Noda Instants，以防止需要在数据库中存储每个日期的时区信息。

首先，这听起来像一个明智的方法吗？我几乎可以自由地改变任何东西，所以很高兴能走上更好/更明智的路线。数据库是 MongoDb，使用 C# 驱动程序。

我尝试过的是沿着这些路线，但努力克服第一步！

```
var userSubmittedDateTimeString = "2013/05/09 10:45";
var userFormat = "yyyy/MM/dd HH:mm";
var userTimeZone = "Europe/London";

//noda code here to convert to UTC

//Then back again: 
```

我知道有人会问“你试过什么”，我所拥有的只是各种失败的转换。很高兴被指向“野田时间入门”页面！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T18:30:46.720

> 我计划将这些时间转换为 UTC/Noda Instants，以防止需要在数据库中存储每个日期的所有时区信息。

*如果*您以后不需要知道原始时区，那很好。（例如，如果用户更改了时区，但仍希望在原始时区重复出现某些内容）。

无论如何，我会将其分为三个步骤：

*   解析成一个`LocalDateTime`
*   将其转换为`ZonedDateTime`
*   将其转换为`Instant`

就像是：

```
// TODO: Are you sure it *will* be in the invariant culture? No funky date
// separators?
// Note that if all users have the same pattern, you can make this a private
// static readonly field somewhere
var pattern = LocalDateTimePattern.CreateWithInvariantCulture("yyyy/MM/dd HH:mm");

var parseResult = pattern.Parse(userSubmittedDateTimeString);
if (!parseResult.Success)
{
    // throw an exception or whatever you want to do
}

var localDateTime = parseResult.Value;

var timeZone = DateTimeZoneProviders.Tzdb[userTimeZone];

// TODO: Consider how you want to handle ambiguous or "skipped" local date/time
// values. For example, you might want InZoneStrictly, or provide your own custom
// handler to InZone.
var zonedDateTime = localDateTime.InZoneLeniently(timeZone);

var instant = zonedDateTime.ToInstant(); 
```

# documentation - appledoc 中的宏或动态占位符

> ID：15568563
> 
> 赞同：1
> 
> 时间：2013-03-22T10:54:49.983
> 
> 标签：documentation, documentation-generation, appledoc

在我的 iOS 项目中，我在一些类的文档中添加了截图图像。
该文档是使用[appledoc](http://gentlebytes.com/appledoc/)生成的。

基本上，对于 class `TheViewController`，这看起来像这样：

```
/**
 * A view controller: awesome and helpful class description.
 *
 * **iPhone Screenshot:**
 * ![](../docs/documentation_data/ViewControllersScreenshotsGallery/screenshots/TheViewController_iPhone.png)
 *
 * **iPad Screenshot:**
 * ![](../docs/documentation_data/ViewControllersScreenshotsGallery/screenshots/TheViewController_iPad.png)
 */ 
```

**有什么办法可以干燥这个吗？**
一个宏，预处理（通过`preprocess-headerdoc`？），动态占位符，脚本，提供给appledoc的选项？

理想情况下，我只想拥有这个：

```
/**
 * A view controller: awesome and helpful class description.
 *
 * SCREENSHOTS_FOR_IPAD_AND_IPHONE
 */ 
```

* * *

如果我什至不必添加 line `SCREENSHOTS_FOR_IPAD_AND_IPHONE`，则奖励积分，并且仅在满足某些条件时才添加内容（即，如果在预期的位置找到图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:14:31.080

目前没有这样的功能。

# jquery - jQuery图形/绘图插件在元素上具有拖放功能？

> ID：15568567
> 
> 赞同：0
> 
> 时间：2013-03-22T10:55:03.367
> 
> 标签：jquery, graph, plot, flot, drag-and-drop

简短版本：

我正在寻找一个图形/绘图/网格/图表插件，就像[flot](http://www.flotcharts.org/)插件一样，但在元素上具有拖放功能。有什么建议么？

长版：

我正在构建一个用于管理工作流程和任务的工具。我正在想象一个图表，x 轴上是时间，y 轴上是员工。然后，该图表会显示特定时间跨度内所有员工的分配。然后你可以看到，例如，是否有任何任务相互重叠，任务多长时间，或者任何员工的时间线是否有任何重大漏洞等。这部分相对容易。困难的部分是我想在分配元素上启用拖放功能，这样如果两个分配相互重叠，您可以简单地将其中一个拖到另一个员工身上。例如，您还应该能够像通常调整文本区域的大小一样缩小或扩展分配。

如果有一个插件可以检测鼠标/元素的 x/y 位置、交互时易于访问的事件以及拖放和调整大小时元素的开始结束点，那会让我的生活变得轻松。更具体的技术问题，例如在两个员工之间拖动元素时检测 y 轴上最近的员工等，将是以后关注的问题。

现在我只是在寻找一个好的起点。任何想法都会很乐意被接受/考虑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T15:52:44.673

我最终使用了 Telerik 的 Scheduler RadControl。经过一些修改，它能够满足我的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:35:50.873

这不是一个直接的答案，但我想指出 Flot 确实支持交互事件。设置 'clickable' 和 'hoverable'[绘图选项](https://github.com/flot/flot/blob/master/API.md#customizing-the-grid)会导致它产生 'plotclick' 和 'plothover' 事件，这些事件应该为您提供足够的信息来实现拖放。

# wpf - 数据绑定到 wpf 中的复选框

> ID：15568568
> 
> 赞同：1
> 
> 时间：2013-03-22T10:55:07.453
> 
> 标签：wpf, data-binding

我有一个带有几个复选框的 WPF 窗口。我想将这些复选框绑定到我的对象中的布尔属性，因此数据的更改将反映在视图中，视图的更改将反映在数据中。我必须从 INotifyPropertyChanged 派生这个对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:57:44.797

正如[文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)所建议的那样，您将不得不这样做。你必须提供`properties`和里面那些`properties`火`PropertyChangedEvent`。这是文档中的一个示例：

```
public string PhoneNumber
    {
        get
        {
            return this.phoneNumberValue;
        }

        set
        {
            if (value != this.phoneNumberValue)
            {
                this.phoneNumberValue = value;
                NotifyPropertyChanged();
            }
        }
    } 
```

不过，您需要使其适合您的需求。请查看 MSDN，了解如何正确实现接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:56:10.210

是的，否则当您更改对象中的值时，复选框的绑定将无法正确更新。

# c++ - 没有自然排序顺序的两个 std::vector 之间的区别

> ID：15568569
> 
> 赞同：0
> 
> 时间：2013-03-22T10:55:10.487
> 
> 标签：c++, stdvector, set-difference

我正在寻找一种有效的方法来获得两者之间的差异`std::vectors`。它们包含的对象没有任何自然顺序；我能做的最好的就是测试平等。这似乎排除了这个`std::set_difference`选项。

有比比较两个嵌套迭代器中的对象更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:43:36.013

目标是通过将可能的正匹配组合在一起来减少相等测试的数量。

我能想到的最好的方法是用第一个向量构建一个哈希图，然后从哈希图中减去第二个向量的所有元素。这意味着您需要为您的元素提供一个像样的散列函数。

简单地说，如果您正在存储指针，并且您的相等谓词基于它，您还可以将哈希基于该指针整数值。

请参阅[什么是好的散列函数？](https://stackoverflow.com/questions/34595/what-is-a-good-hash-function).

如评论中所述，另一种可能性是对元素的某些属性建立排序，并使用它来减少相等的可能性。您可能必须先对两个向量进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:28:42.467

您可以利用向量的一个属性，它们具有连续的内存分配，这意味着向量保留了一个很大的内存空间（通常比使用时更大），并且没有花哨的优化，您可以直接比较内存空间。

在 C++0x 中，您有 data() 方法，可以让您直接访问该内存空间的开头。您可以使用[memcmp](http://www.cplusplus.com/reference/cstring/memcmp/)来比较向量内的所有数据。

```
std::vector<char> vector_1;
std::vector<char> vector_2;

// data in to vector_1
// data in to vector_2

if(!memcmp(vector1.data(),vector_2.data(),SIZE_OF_BUFFER_TO_COMPARE))
{
    std::cout <<< "equal vectors" << std::endl;
} 
```

# c++ - eclipse中的mingw出错1

> ID：15568570
> 
> 赞同：0
> 
> 时间：2013-03-22T10:55:13.743
> 
> 标签：c++, eclipse, makefile, mingw

试图在 Eclipse 中构建一个 cpp 程序，我遇到了 make: *** Error 1 查看控制台我得到以下信息：

```
make all 
Building target: mrconvert
Invoking: Cross G++ Linker
g++ -LC:\GnuWin32\lib\ -o "mrconvert"  ./src/mrconvert.o   -llibgsl
g++.exe: error: mrconvert: No such file or directory
make: *** [mrconvert] Error 1 
```

mrconvert 是我要编译的 cpp 程序的名称。为什么我会收到文件或目录不存在的错误消息？

编辑：

通过将工具链从 Cross GCC 更改为 MinGW GCC，我不再得到上述 Make Error 1。但是，我现在得到了一个不错的新错误列表：

```
11:42:55 **** Incremental Build of configuration Debug for project mrconv ****
Info: Internal Builder is used for build
g++ "-IC:\\Users\\Jesse\\Documents\\Work\\Research\\FiberTracking\\Software\\mrtrix\\source\\mrtrix-0.2.11\\lib" "-IC:\\Users\\Jesse\\Programs\\gtk+\\lib" "-IC:\\Users\\Jesse\\Programs\\gtk+\\bin" "-IC:\\Users\\Jesse\\Programs\\gtk+\\include\\glib-2.0" "-IC:\\Users\\Jesse\\Programs\\gtk+\\lib\\glib-2.0\\include" "-IC:\\gtkmm64\\include\\glibmm-2.4\\glibmm" "-IC:\\gtkmm64\\include\\glibmm-2.4" "-IC:\\gtkmm64\\lib\\glibmm-2.4\\include" "-IC:\\gtkmm64\\include\\sigc++-2.0" "-IC:\\gtkmm64\\lib\\sigc++-2.0\\include" "-IC:\\Program Files (x86)\\GnuWin32\\include" "-IC:\\Program Files (x86)\\GnuWin32\\include\\gsl" -O0 -g3 -Wall -c -fmessage-length=0 -o "src\\mrconvert.o" "..\\src\\mrconvert.cpp" 
g++ "-LC:\\GnuWin32\\lib\\" -o mrconv.exe "src\\mrconvert.o" -llibgsl 
src\mrconvert.o: In function `main':
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:119: undefined reference to `MR::App::run(int, char**)'
src\mrconvert.o: In function `ZN5MyApp7executeEv':
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:123: undefined reference to `MR::parse_floats(std::string const&)'
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:167: undefined reference to `MR::DataType::parse(std::string const&)'
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:174: undefined reference to `MR::Image::parse_axes_specifier(MR::Image::Axes const&, std::string const&)'
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:201: undefined reference to `MR::parse_ints(std::string const&, int)'
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:225: undefined reference to `MR::ProgressBar::init(unsigned int, std::string const&)'
src\mrconvert.o: In function `_static_initialization_and_destruction_0':
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:55: undefined reference to `MR::Argument::End'
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:95: undefined reference to `MR::Option::End'
src\mrconvert.o: In function `ZNK2MR9Exception7displayEv':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:187: undefined reference to `MR::Exception::level_offset'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:187: undefined reference to `MR::error'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:188: undefined reference to `MR::Exception::level_offset'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:188: undefined reference to `MR::info'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:189: undefined reference to `MR::debug'
src\mrconvert.o: In function `ZN2MR11ProgressBar3incEv':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:451: undefined reference to `MR::ProgressBar::current_val'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:451: undefined reference to `MR::ProgressBar::current_val'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:452: undefined reference to `MR::ProgressBar::display'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:452: undefined reference to `MR::ProgressBar::stop'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:453: undefined reference to `MR::ProgressBar::multiplier'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:453: undefined reference to `MR::ProgressBar::stop_watch'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:453: undefined reference to `Glib::Timer::elapsed() const'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:453: undefined reference to `MR::ProgressBar::current_val'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:453: undefined reference to `MR::ProgressBar::multiplier'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:454: undefined reference to `MR::ProgressBar::percent'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:455: undefined reference to `MR::ProgressBar::percent'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:456: undefined reference to `MR::ProgressBar::display_func'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:458: undefined reference to `MR::ProgressBar::stop'
src\mrconvert.o: In function `ZN2MR11ProgressBar4doneEv':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:461: undefined reference to `MR::ProgressBar::display'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/mrtrix.h:461: undefined reference to `MR::ProgressBar::done_func'
src\mrconvert.o: In function `ZN2MR5Image6ObjectD1Ev':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/image/object.h:49: undefined reference to `MR::info'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/image/object.h:49: undefined reference to `MR::Image::Mapper::unmap(MR::Image::Header const&)'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/image/object.h:49: undefined reference to `MR::Image::Mapper::~Mapper()'
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/image/object.h:49: undefined reference to `MR::Image::Mapper::~Mapper()'
src\mrconvert.o: In function `ZN2MR5Image6Object3mapEv':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/image/object.h:57: undefined reference to `MR::Image::Mapper::map(MR::Image::Header const&)'
src\mrconvert.o: In function `ZNK2MR7ArgBase9get_imageERNS_5Image6HeaderE':
C:/Users/Jesse/Documents/Work/Research/FiberTracking/Software/mrtrix/source/mrtrix-0.2.11/lib/args.h:201: undefined reference to `MR::Image::Object::create(std::string const&, MR::Image::Header&)'
src\mrconvert.o: In function `ZN5MyAppC1EiPPcPPKcPKN2MR8ArgumentEPKNS5_6OptionEPKjS3_S3_':
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:119: undefined reference to `MR::App::App(int, char**, char const**, MR::Argument const*, MR::Option const*, unsigned int const*, char const*, char const*)'
src\mrconvert.o: In function `ZN5MyAppD1Ev':
C:\Users\Jesse\workspace\mrconv\Debug/../src/mrconvert.cpp:119: undefined reference to `MR::App::~App()'
collect2.exe: error: ld returned 1 exit status

11:42:57 Build Finished (took 1s.854ms) 
```

我该如何解决这些链接错误？

非常感激！

杰西

# xslt - 选择值是否总是返回字符串？

> ID：15568575
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:55:28.067
> 
> 标签：xslt

我有一个 HTML 代码要替换为

```
<xsl:value-of select="proj/test/output"/> 
```

例如与

```
<font color='green'>Hello world!</font> 
```

但是当我使用它时，我无法让浏览器将其解释为 HTML 代码。

通常它应该简单地写绿色 Hello world！但相反，它写的完全一样，没有解释任何东西。

有没有办法让浏览器按原样解释它而不是像文本那样写？

问题下方的评论解决了这个问题。我唯一需要补充的是`using disable-output-escaping="yes"`

所以：

```
<xsl:value-of disable-output-escaping="yes" select="proj/test/output"/> 
```

作品...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:57:00.607

如果要复制整个节点，请使用示例`copy-of`：

```
<copy-of select="proj/test/output"/> 
```

区别：

*   `value-of`- 仅从选定节点复制文本。
*   `copy-of`- 从选定节点复制所有元素（元素可以是另一个标签或文本）。

来自[XSLT 规范](http://www.w3.org/TR/xslt#value-of)：

> xsl:value-of 元素被实例化以在结果树中创建一个文本节点。
> 
> (...)
> 
> xsl:copy-of 元素可用于将节点集复制到结果树，而无需将其转换为字符串。

# java - 使用 jquery 创建的选项卡

> ID：15568576
> 
> 赞同：0
> 
> 时间：2013-03-22T10:55:28.933
> 
> 标签：java, jsp, tabs, jquery-ui-tabs

我使用 jquery 创建了一些选项卡，当我加载主页（包含选项卡）时，主页刷新的次数与该页面中选项卡的数量一样多......这发生在 firefox 浏览器中......我该如何解决这个问题？

提前致谢...

嗨，这是我的代码......

```
 <ul class="ui-tabs-nav">
    <li id="planDetails-tab"><a id="hrefPlanDetailsid" accesskey="p" href="#divPlanDetailsTab" class="planTabHeader">&nbsp;Plan Details</a></li>
    <li id="serviceArea-tab"><a href="#divServiceAreaTab" accesskey="s" class="planTabHeader">Service Area</a></li>
</ul> 
```

我已将这些选项卡的页面包含为

```
 <s:include value="PlanDetail.jsp" /> 
```

# javascript - Jquery addClass 延迟

> ID：15568579
> 
> 赞同：0
> 
> 时间：2013-03-22T10:55:33.133
> 
> 标签：javascript, jquery, html, html-lists

我有一个这样的基本菜单：

```
<ul>
    <li>item 1</li>
    <li>item2</li>
</ul> 
```

如何`<li>`每 800 毫秒为我的每个元素添加“当前”类，当然还要删除旧的当前元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:59:50.277

```
$('li').each(function(i){
    var $that = $(this);
    setTimeout(function(){
        $that.addClass('current').siblings().removeClass('current');
    }, i *800);
}); 
```

[**现场演示**](http://jsfiddle.net/5eZaY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:24:45.700

这将永远循环通过任意数量的列表项：

```
$(document).ready(function() {
    var $lis = $("li"), i = -1;
    function nextCurrent() {
        $lis.eq(i).removeClass("current");
        $lis.eq(i=(i+1)%$lis.length).addClass("current");
        setTimeout(nextCurrent, 800);
    }
    nextCurrent();
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/4skLV/](http://jsfiddle.net/nnnnnn/4skLV/)

我可以建议您在下一个问题之前阅读这篇文章：[您尝试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

# php - Php mail() - 优先类型

> ID：15568583
> 
> 赞同：5
> 
> 时间：2013-03-22T10:55:47.977
> 
> 标签：php

想知道什么是 php mail() 优先级类型。我读了这个[问题](https://stackoverflow.com/questions/4169605/php-mail-how-to-set-priority)，我读了 php 手册，

```
<?php
    $headers = "MIME-Version: 1.0\n" ;
    $headers .= "Content-Type: text/html; charset=\"iso-8859-1\"\n";
    $headers .= "X-Priority: 1 (Higuest)\n";
    $headers .= "X-MSMail-Priority: High\n";
    $headers .= "Importance: High\n";
    $status   = mail($to, $subject, $message,$headers);
?> 
```

但它没有解释我们可以使用哪些类型。`X-Priority: 1 (Higuest)`以及`X-MSMail-Priority: High`用于此的两个不同的词。我发现的优先级很少。例如：低、中、高、紧急、紧急、关键我们如何使用这些类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T11:14:14.827

值：1 = 高，3 = 正常，5 = 低

您无需输入两行，使用 X-MSMail-Priority 或 X-Priority

> X-Priority 的替代方案，但 X-Priority 是首选。“High”对应X-Priority:1，“Normal”对应X-Priority:3，“Low”对应“X-Priority:5”。在同一个电子邮件标题中同时包含 X-Priority 和 X-MSMailPriority 是可以的，尽管他们最好同意。
> 
> 例子：
> 
> 任何一个
> 
> X-MSMail 优先级：高
> 
> 或者
> 
> X 优先级：1

并通过此链接，您将更多地了解邮件功能

[http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/](http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/)

# clojure - 在clojure中使用reduce进行分组

> ID：15568588
> 
> 赞同：4
> 
> 时间：2013-03-22T10:56:03.900
> 
> 标签：clojure, group-by, reduce

我想聚合大型数据集以获得类似的东西

```
SELECT SUM(`profit`) as `profit`, `month` FROM `t` GROUP BY `month` 
```

所以，我像这样修改了clojure的group-by函数

```
(defn group-reduce [f red coll]
  (persistent!
   (reduce
    (fn [ret x]
      (let [k (f x)]
        (assoc! ret k (red (get ret k) x))))
    (transient {}) coll))) 
```

这是用法：

```
(group-reduce :month (fn [s x]
                       (if s
                         (assoc s :profit (+ (:profit s) (:profit x)))
                         x))
              [{:month 10 :profit 12}
               {:month 10 :profit 15}
               {:month 12 :profit 1}])

#_=> {10 {:profit 27, :month 10}, 12 {:profit 1, :month 12}} 
```

它可以工作，但也许还有另一种方法可以做到这一点，使用 clojure 标准库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:26:01.423

最接近核心的是`merge-with`：

```
(def t [{:month 10 :profit 12}
        {:month 10 :profit 15}
        {:month 12 :profit 1}])

(apply merge-with + (for [x t] {(:month x) (:profit x)}))
;=> {12 1, 10 27} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:44:38.657

一些例子：

```
user=> (def groups (group-by :month [{:month 10 :profit 12}
  #_=>                               {:month 10 :profit 15}
  #_=>                               {:month 12 :profit 1}])
{10 [{:profit 12, :month 10} {:profit 15, :month 10}], 12 [{:profit 1, :month 12}]}

user=> (for [[k v] groups] {:month k :sum-profit (apply + (map :profit v))})
({:month 10, :sum-profit 27} {:month 12, :sum-profit 1})

user=> (into {} (for [[k v] groups] [k (apply + (map :profit v))]))
{10 27, 12 1} 
```

# java - 解析 adb 版本的输出失败？苹果电脑

> ID：15568589
> 
> 赞同：0
> 
> 时间：2013-03-22T10:56:08.160
> 
> 标签：java, android, eclipse, macos, adt

我在 Windows 7 中使用过 Android ADT 包。没有问题。

但是当我尝试在 MAC 中使用 Android ADT 包时，我在 Eclipse 中收到以下错误：

```
dyld: unknown required load command 0x80000022 
```

和

```
Failed to parse the output of "adb version". 
```

我正在运行 Mac OS X 10.5.8、JDK 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T06:18:07.403

平台`adt-bundle-mac-x86_64.zip`是 Mac OS X 64 位，所以似乎没有 32 位 Mac 版本。我们仍然可以下载 Eclipse，然后手动添加 ADT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T00:32:34.250

为 android sdk 制作可见的 java

$sudo ln -s /home/azware/tmp/jdk1.7.0_03/bin/java /usr/bin/java

# java - 在 java ServerSocket 中测试模块的启动？

> ID：15568591
> 
> 赞同：0
> 
> 时间：2013-03-22T10:56:14.590
> 
> 标签：java, sockets

我开发了一个始终运行的 Java ServerSocket，它执行许多模块。我的服务器首先执行一个 BatchScript 文件 (start.bat)。我想测试模块是否成功执行并在 cmd 控制台上给用户 w 反馈（当我从 eclipse 启动服务器时，我只能在 eclipse 控制台上看到 long ）。我想在一段时间后检查我的服务器状态，知道它总是在运行。

这是我的服务器的实现：

```
public Server() throws InterruptedException
{
    //this.es = e;
    try {
        sockserv= new ServerSocket(6020) ;

        System.out.println("Server Started");
        myModule mod= new myModule(); 
        mod.displayLogOnCmd();
                    mod.checkServerEveryPeriodOfTime();

    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
}

@Override
public void run() 
{
    while(SERVER_STATUT)
    {
            try {
                Socket socket = sockserv.accept();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    } 
```

我的问题：如何在 Cmd 中显示 eclipse 的日志信息？以及如何查看服务器是否启动了模块？谢谢你 ：）

# java - DatabaseHelper 类，onCreate() 未调用

> ID：15568592
> 
> 赞同：0
> 
> 时间：2013-03-22T10:56:16.893
> 
> 标签：java, database, sqliteopenhelper

我正在主要活动中创建一个`DBHelper`类的实例。`onCreate()`

```
 databaseHelper = new DatabaseHelper(getBaseContext()); 
```

我没有得到什么时候被`onCreate()`调用。我试着给`Toast`。一旦`getWritableDatabase();`被称为应用力关闭。这是我的代码：

```
public class DatabaseHelper extends SQLiteOpenHelper
{
    SQLiteDatabase db;
    // Database Name
    private static final String DATABASE_NAME = "manasi.db";
    // database table name
    private static final String TABLE_DATA = "data";
    // Database table fields
    private static final String KEY_IMEI = "imei";
    private static final String KEY_LAT = "lat";
    private static final String KEY_LONG = "long";
    private static final String KEY_DATETIME = "datetime";
    private static final String KEY_ALTITUDE = "altitude";
    private static final String KEY_SPEED = "speed";
    private static final String KEY_BATTERY = "battery";
    Context context;
    /**
     * @param context Application Context
     */
    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        // db = this.getWritableDatabase();
        Toast.makeText(context, "db helper", Toast.LENGTH_LONG).show();
    }
    /* Called when the database is created for the first time.
     * @see android.database.sqlite.SQLiteOpenHelper#onCreate(android.database.sqlite.SQLiteDatabase)
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE DB_TABLE(_id INTEGER PRIMARY KEY AUTOINCREMENT, content TEXT);");
        Toast.makeText(context, "db helper onCreate", Toast.LENGTH_LONG).show();
        String CREATE_DATA_TABLE = "CREATE TABLE " + TABLE_DATA + "("
                + KEY_IMEI + " TEXT ," + KEY_LAT + " DOUBLE," + KEY_LONG
                + "DOUBLE," + KEY_DATETIME + "DATETIME," + KEY_ALTITUDE + "DOUBLE,"
                + KEY_SPEED + "TEXT," + KEY_BATTERY + "TEXT" + ")";
        db.execSQL(CREATE_DATA_TABLE);
        Context context = null;

    }

    /* Called when the database needs to be upgraded.
    * @see    android.database.sqlite.SQLiteOpenHelper#onUpgrade(android.database.sqlite.SQLiteDatabase, int, int)
    */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("DatabaseHelper", "Upgrading database, which will destroy all old data");
        onCreate(db);
    }

    public void insertRecordToDB(Data data) {
        db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(KEY_IMEI, data.getImei());
        values.put(KEY_LAT, data.getLatitude());
        values.put(KEY_LONG, data.getLongitude());
        values.put(KEY_DATETIME, data.getDateTime());
        values.put(KEY_ALTITUDE, data.getAltitude());
        values.put(KEY_SPEED, data.getSpeed());
        values.put(KEY_BATTERY, data.getBattery());
        // Inserting Row
        db.insert(TABLE_DATA, null, values);
        db.close(); // Closing database connection*/
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:13:25.743

在您的活动中执行此操作

```
databaseHelper = new DatabaseHelper(this);
SQLiteDatabase sb = databaseHelper.getWritableDatabase();//this line responsible to call onCreate() 
```

并阅读此[http://mobileapplications-by-himanshu.blogspot.in/](http://mobileapplications-by-himanshu.blogspot.in/)

onCreate() 调用一次。

# javascript - 使用 HTML5 文件 API 在上传之前唯一标识文件

> ID：15568594
> 
> 赞同：4
> 
> 时间：2013-03-22T10:56:24.847
> 
> 标签：javascript, html, upload, fingerprinting

我正在使用 HTML5 文件 API 构建文件上传器。我想确保根据它们包含的实际数据没有上传重复的文件。这意味着即使两个文件的名称不同或位于不同的文件夹中，它们也应被视为相同。

我考虑过使用 md5 计算哈希，但因为这一切都必须在客户端发生，使用 javascript，更大的文件将花费太长时间。当我说大时，我的意思是高达 5GB 的视频。

需要明确的是，这不必涉及校验和，我只想唯一标识文件。为此目的，散列可能有点矫枉过正，但这是首先想到的。

*更新：*我想我需要一个轻量级的[指纹](http://en.wikipedia.org/wiki/Fingerprint_%28computing%29)算法。我在 Wikipedia 上找到了[Rabin](http://en.wikipedia.org/wiki/Rabin_fingerprint)作为示例，但我不知道如何在 javascript 中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:05:59.727

不存在捷径。如果您需要识别零歧义的重复文件，那么您必须阅读并比较文件的全部内容。

但是，如果您可以忍受某种程度的误报，那么您可能会采取一些策略。对于类似的问题，我计算给定文件块子集的 MD5 哈希（使用预定义的不变窗口）。

# php - PHP SimpleXMLElements::xpath() 在不同的 XML 结构中找不到值详细信息

> ID：15568596
> 
> 赞同：0
> 
> 时间：2013-03-22T10:56:32.427
> 
> 标签：php, xpath, simplexml

我的问题是，我有一个 XML 内容。我用 PHP SimpleXMLElements() 类阅读它。XML 如下所示：

```
<search_result>
<movies>
     <movie>
        <title>Rambo 1</title>
     </movie>
     <movie>
        <title>Terminator 1</title>
     </movie>
     <movie>
        <title>Romeo and Juliett</title>
     </movie>
</movies>
<program>
    <item>
        <id>5405059</id>
        <show_date>03.22.</show_date>
        <show_time>14:30</show_time>
        <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
        <title>Doku-cinema</title>
        <genre/>
        <channel_name>d1 Tv</channel_name>
        <channel_id>232</channel_id>
    </item>
    <item>
        <id>5405059</id>
        <show_date>03.22.</show_date>
        <show_time>14:30</show_time>
        <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
        <title>Romantic-Romeo and Juliett</title>
        <genre/>
        <channel_name>d1 Tv</channel_name>
        <channel_id>232</channel_id>
    </item>
    <item>
        <id>5405059</id>
        <show_date>03.22.</show_date>
        <show_time>14:30</show_time>
        <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
        <title>Doku-cinema</title>
        <genre/>
        <channel_name>d1 Tv</channel_name>
        <channel_id>232</channel_id>
    </item>
</program> 
```

我想找到所有包含示例“罗马”的节点并只取回该节点。我的意思是……例如：

```
$xml = simplexml_load_file("moviecinemas.xml");
$searchNodes = $xml->xpath('//*[contains(.,'Romeo')]'); 
```

我想得到这个结构：

```
<item>
<id>5405059</id>
<show_date>03.22.</show_date>
<show_time>14:30</show_time>
<rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
<title>Romantic-Romeo and Juliett</title>
<genre/>
<channel_name>d1 Tv</channel_name>
<channel_id>232</channel_id>
</item>
<movie>
<title>Romeo and Juliett</title>
</movie> 
```

我不知道这怎么可能，是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:36:01.800

对于我所看到的，您只是有一点 XPath 问题。顺便说一句，在您的问题中，示例 XML 格式错误，它没有**search_result**节点关闭标记。

这是一个工作示例：

```
<?php
$xml = <<<XML
<search_result>
    <movies>
        <movie>
            <title>Rambo 1</title>
         </movie>
         <movie>
            <title>Terminator 1</title>
         </movie>
         <movie>
            <title>Romeo and Juliett</title>
         </movie>
    </movies>
    <program>
        <item>
            <id>5405059</id>
            <show_date>03.22.</show_date>
            <show_time>14:30</show_time>
            <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
            <title>Doku-cinema</title>
            <genre/>
            <channel_name>d1 Tv</channel_name>
            <channel_id>232</channel_id>
        </item>
        <item>
            <id>5405059</id>
            <show_date>03.22.</show_date>
            <show_time>14:30</show_time>
            <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
            <title>Romantic-Romeo and Juliett</title>
            <genre/>
            <channel_name>d1 Tv</channel_name>
            <channel_id>232</channel_id>
        </item>
        <item>
            <id>5405059</id>
            <show_date>03.22.</show_date>
            <show_time>14:30</show_time>
            <rfcdate>Fri, 22 Mar 2013 14:30:00 +0100</rfcdate>
            <title>Doku-cinema</title>
            <genre/>
            <channel_name>d1 Tv</channel_name>
            <channel_id>232</channel_id>
        </item>
    </program>
</search_result>
XML;

$sxe        = new SimpleXMLElement($xml);
$romeoItems = $sxe->xpath('//program/item[contains(./title, "Romeo")]');

print_r($romeoItems); 
```

**输出：**

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [id] => 5405059
            [show_date] => 03.22.
            [show_time] => 14:30
            [rfcdate] => Fri, 22 Mar 2013 14:30:00 +0100
            [title] => Romantic-Romeo and Juliett
            [genre] => SimpleXMLElement Object
                (
                )
            [channel_name] => d1 Tv
            [channel_id] => 232
        )
) 
```

# perl - Perl Getopt::Long 分配变量然后进入子程序

> ID：15568597
> 
> 赞同：0
> 
> 时间：2013-03-22T10:56:33.270
> 
> 标签：perl, getopt, getopt-long

我有以下一段代码

```
my $use = "Use: " . basename($0) . " [options]";
my $version = "Version: 0.1 \n";
my $variableA;
my $variableB;

GetOptions(
'a=s'           => \$variableA,
'help'          => sub { print $use; exit 0 },
'version'       => sub { print $version; exit 0 },
'b'             => sub { \$variableB, &this_subroutine; goto NOWGOHERE; },
 );

die "Incorrect use. \n" unless (defined $variableA || defined $variableB);

sub this_subroutine {

     print "$variableB\n";

}

NOWGOHERE: print "HELLO I'M NOW HERE\n"; 
```

我想要做的是设置`$variableB`然后执行`&this_subroutine`and the`goto NOWGOHERE`但我只能让它做一个或另一个，而不是两者，使用一个`'b=s' => \$variableB,`或`sub { &this_subroutine; goto NOWGOHERE;0 },`

尝试同时执行这两种操作时，我似乎无法打印`$variableB`，是否有明显的我遗漏或在语法上做错了什么？

使用`'b=s' => \$variableB, sub { &this_subroutine; goto NOWGOHERE; },`似乎也不起作用？

非常感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:12:14.787

`$variableB`永远不会有值，因为您从未分配给它。

```
'a=s'           => \$variableA, 
```

给出`$variableA`一个值，因为当给 Getopt::Long 一个标量引用时，它会将选项的值分配给该标量。

另一方面，

```
'b'             => sub { \$variableB, &this_subroutine; goto NOWGOHERE; }, 
```

给 Getopt::Long 一个*代码*引用，它不能将选项值分配给它。

根据文档，它似乎将选项名称和选项值作为参数传递给 coderef，在这种情况下

```
'b=s'             => sub { $variableB = $_[1]; this_subroutine(); goto NOWGOHERE; }, 
```

可能应该做你想做的事。

# lucene - 使用Lucene索引自定义收集器的方式

> ID：15568600
> 
> 赞同：6
> 
> 时间：2013-03-22T10:56:38.807
> 
> 标签：lucene

有人可以帮助我了解在 Lucene 中使用抽象 Collector 类的自定义实现的方式吗？

我用一些测试文本实现了两种查询索引的方法：

1.Total hits is eq to 2\. 两个文件名相同，因此结果大小为 eq to 1，因为我将它们保存在一个集合中。

```
TopDocs topDocs = searcher.search(query, Integer.MAX_VALUE);
LOG.info("Total hits " + topDocs.totalHits);
ScoreDoc[] scoreDosArray = topDocs.scoreDocs;
for (ScoreDoc scoreDoc : scoreDosArray) {
    Document doc = searcher.doc(scoreDoc.doc);
    String fileName = doc.get(FILENAME_FIELD);
    results.add(fileName);
} 
```

2.CountCollect 是 eq 到 2。我在 Collector 的 collect 方法中从中获取文件名的两个文档都是唯一的，因此最终结果大小也是 eq 到 2。CountNextReader 变量在逻辑末尾是 eq 到 10。

```
private Set<String> doStreamingSearch(final IndexSearcher searcher, Query query) throws IOException {
    final Set<String> results = new HashSet<String>();
    Collector collector = new Collector() {
        private int base;
        private Scorer scorer;
        private int countCollect;
        private int countNextReader;

        @Override
        public void collect(int doc) throws IOException {
            Document document = searcher.doc(doc);
            String filename = document.get(FILENAME_FIELD);
            results.add(filename);
            countCollect++;
        }

        @Override
        public boolean acceptsDocsOutOfOrder() {
            return true;
        }

        @Override
        public void setScorer(Scorer scorer) throws IOException {
            this.scorer = scorer;
        }

        @Override
        public void setNextReader(AtomicReaderContext ctx) throws IOException {
            this.base = ctx.docBase;
            countNextReader++;
        }

        @Override
        public String toString() {
            LOG.info("CountCollect: " + countCollect);
            LOG.info("CountNextReader: " + countNextReader);
            return null;
        }
    };
    searcher.search(query, collector);
    collector.toString();
    return results;
} 
```

我不明白为什么在 collect 方法中与以前的实现相比，我得到不同的文档和不同的文件名？我希望得到相同的结果，或者？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T12:29:55.287

该`Collector#collect`方法是搜索请求的热点。每个与查询匹配的文档都会调用它，而不仅仅是您返回的文档。事实上，您通常只取回最重要的文档，这些文档实际上是您向用户展示的文档。

我建议不要这样做：

```
TopDocs topDocs = searcher.search(query, Integer.MAX_VALUE); 
```

这将迫使 lucene 返回过多的文档。

无论如何，如果您只有两个匹配的文档（或者您要求所有匹配的文档），那么您返回的文档数量和对 collect 方法的调用次数应该是相同的。

该`setNextReader`方法是完全不同的东西，你不应该太在意。如果您想了解更多关于 AtomicReader 等的信息，请查看[这篇文章。](http://blog.thetaphi.de/2012/02/is-your-indexreader-atomic-major.html)为了简短起见，Lucene 将数据存储为段，即小型可搜索倒排索引。每个查询都按顺序在每个段上执行。每次搜索切换到下一个段时，`setNextReader`都会调用该方法以允许在`Collector`. 例如，内部 lucene 文档 id 仅在段内是唯一的，因此您需要添加`docBase`到它以使其在整个索引中唯一。这就是为什么您需要在段更改时存储它并考虑到它。您的`countNextReader`变量只包含已为您的查询分析的段数，它与您的文档没有任何关系。

深入研究您的代码，我还注意到您在按 id 检索文档时`Collector`没有考虑到。`docBase`这应该解决它：

```
Document document = searcher.doc(doc + docBase); 
```

还要记住，在 a 中加载存储的字段`Collector`并不是一件明智的事情。这会让你的搜索变得非常慢，因为存储的字段是从磁盘加载的。您通常仅为要返回的文档子集加载存储字段。您通常会在其中`Collector`加载对有效负载或类似内容等文档进行评分所需的信息，通常也使用 lucene 字段缓存。

# actionscript-3 - actionscript 删除（concat？）子数组

> ID：15568606
> 
> 赞同：0
> 
> 时间：2013-03-22T10:57:06.520
> 
> 标签：actionscript-3, concatenation, arrays

我在一个巨大的数组中有多个子数组 - MasterArray - 这意味着子数组已经在 MasterArray 内部。我想“融合”所有这些子数组 - 删除那些 [ ] 方括号。

我想避免使用“concat”方法，因为数组已经在 MasterArray 中。有没有命令/方法如何做到这一点？谢谢你。

```
var englandCities:Array = [London, Manchester, Leeds];
var franceCities:Array = [Paris, Orleans, Avignon];

var europeanCities:Array = [englandCities, franceCities]; 
```

我想指出让我们说......以某种方式嵌套在欧洲城市数组中的“伦敦”。在我尝试追踪它之后，它给了我“englandCities”，这是有道理的。

```
trace(europeanCities[0]);
// displays "englandCities"
// how can I make it display "London" ? 
```

如何使 euroCities 数组显示“London”？我需要在不使用 concat() 的情况下从“europeanCities”数组中删除那些方括号...

好的，让我重新表述一下。我的主阵列：

```
var europeanCities:Array = [englandCities, franceCities]; 
```

等于

```
[[London, Manchester, Leeds], [Paris, Orleans, Avignon]]; 
```

我对吗？现在，如何移除内括号以获得如下内容：

```
[London, Manchester, Leeds, Paris, Orleans, Avignon]; 
```

请记住，该数组比 englandCities 和 frenchCities 长得多......有...... 30 个不同的城市。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:00:24.297

创建一个空数组，然后遍历`masterArray`所有子数组，并`concat()`为您的新数组做一个。这将使您成为另一个平坦的阵列，而不会干扰主阵列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:46:41.607

我只是在这里写这个，因为它是可能的。

如果你坚持不使用 concat 这里是一个不好的解决方案：

```
 // join elements into a comma delimited string
 var s: String = europeanCities.join(','); 
 // Split the string with delimiter as commas
 europeanCities = s.split(','); 
```

由于子数组元素将自动使用“，”连接，而不管连接分隔符如何，并且我们的连接分隔符已经是“，”这将起作用。

但是这个解决方案是 cpu 密集型的，并不是最优的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:24:47.583

您可以`concat`轻松地将它们组合在一起，这确实是最简单的选择：

```
var englandCities:Array = ["London", "Manchester", "Leeds"];
var frenchCities:Array = ["Paris", "Orleans", "Avignon"];
var masterArray:Array = [englandCities, frenchCities];

var europeanCities:Array = new Array();

for each(var country:Array in masterArray) {
    europeanCities = europeanCities.concat(country);
}

trace(europeanCities); // London,Manchester,Leeds,Paris,Orleans,Avignon 
```

我不确定我是否理解您避免这样做的原因`concat`，除非问题是您不想重复这些值。（所以修改`englandCities[0]`也会修改`europeanCities[0]`。）

如果您的城市`Objects`不是原始`String`s，则串联`Array`将可以正常工作。但是，如果它们是原语，则无法使用`Array`. 但是，您可以编写一个*函数*来提供类似的行为，如下所示：

```
var englandCities:Array = ["London", "Manchester", "Leeds"];
var frenchCities:Array = ["Paris", "Orleans", "Avignon"];
var allCities:Array = [englandCities, frenchCities];

function europeanCities(id:int):String {
    var cityID:uint = 0;
    while (id > allCities[cityID].length - 1) {
        id -= allCities[cityID].length;
        cityID++;
    }
    return allCities[cityID][id];
}

trace (europeanCities(0)); // London
trace (europeanCities(5)); // Avignon 
```

# ios - iOS FFT 绘制频谱

> ID：15568607
> 
> 赞同：11
> 
> 时间：2013-03-22T10:57:07.717
> 
> 标签：ios, core-audio, fft, spectrum, vdsp

我读过这些问题：

[使用 Apple FFT 和 Accelerate 框架](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)

[使用 Accelerate 框架进行 FFT 时如何设置缓冲区？](https://stackoverflow.com/questions/4804119/how-do-i-set-up-a-buffer-when-doing-an-fft-using-the-accelerate-framework?rq=1)

[iOS FFT Accelelate.framework 在播放期间绘制频谱](https://stackoverflow.com/questions/10636134/ios-fft-accerelate-framework-draw-spectrum-during-playback)

它们都描述了如何使用加速框架设置 fft。在他们的帮助下，我能够设置 fft 并获得基本的频谱分析仪。现在，我正在显示从 fft 获得的所有值。但是，我只想显示 10 到 15 个或可变数量的条来表示某些频率。就像 iTunes 或 WinAmp 电平表一样。1\. 我是否需要对一系列频率的幅度值进行平均？还是它们只是向您显示特定频率条的幅度？2\. 另外，我需要将幅度值转换为 db 吗？3\. 如何将我的数据映射到某个范围。我是否映射到我的声音位深度的最大分贝范围？获取 bin 的最大值将导致最大映射值跳跃。

我的渲染回调：

```
static OSStatus PlaybackCallback(void *inRefCon,
                                 AudioUnitRenderActionFlags *ioActionFlags,
                                 const AudioTimeStamp *inTimeStamp,
                                 UInt32 inBusNumber,
                                 UInt32 inNumberFrames,
                                 AudioBufferList *ioData)
{
    UInt32 maxSamples = kAudioBufferNumFrames;

    UInt32 log2n = log2f(maxSamples); //bins
    UInt32 n = 1 << log2n;

    UInt32 stride = 1;
    UInt32 nOver2 = n/2;

    COMPLEX_SPLIT   A;
    float          *originalReal, *obtainedReal, *frequencyArray, *window, *in_real;

    in_real = (float *) malloc(maxSamples * sizeof(float));

    A.realp = (float *) malloc(nOver2 * sizeof(float));
    A.imagp = (float *) malloc(nOver2 * sizeof(float));
    memset(A.imagp, 0, nOver2 * sizeof(float));

    obtainedReal = (float *) malloc(n * sizeof(float));
    originalReal = (float *) malloc(n * sizeof(float));
    frequencyArray = (float *) malloc(n * sizeof(float));

    //-- window

    UInt32 windowSize = maxSamples;
    window = (float *) malloc(windowSize * sizeof(float));

    memset(window, 0, windowSize * sizeof(float));
    //    vDSP_hann_window(window, windowSize, vDSP_HANN_DENORM);

    vDSP_blkman_window(window, windowSize, 0);

    vDSP_vmul(ioBuffer, 1, window, 1, in_real, 1, maxSamples);

    //-- window

    vDSP_ctoz((COMPLEX*)in_real, 2, &A, 1, maxSamples/2);

    vDSP_fft_zrip(fftSetup, &A, stride, log2n, FFT_FORWARD);
    vDSP_fft_zrip(fftSetup, &A, stride, log2n, FFT_INVERSE);

    float scale = (float) 1.0 / (2 * n);

    vDSP_vsmul(A.realp, 1, &scale, A.realp, 1, nOver2);
    vDSP_vsmul(A.imagp, 1, &scale, A.imagp, 1, nOver2);

    vDSP_ztoc(&A, 1, (COMPLEX *) obtainedReal, 2, nOver2);
    vDSP_zvmags(&A, 1, obtainedReal, 1, nOver2);

    Float32 one = 1;
    vDSP_vdbcon(obtainedReal, 1, &one, obtainedReal, 1, nOver2, 0);

    for (int i = 0; i < nOver2; i++) {
        frequencyArray[i] = obtainedReal[i];
    }

    // Extract the maximum value
    double fftMax = 0.0;
    vDSP_maxmgvD((double *)obtainedReal, 1, &fftMax, nOver2);

    float max = sqrt(fftMax);
} 
```

播放一些音乐，我得到从 -96db 到 0db 的值。在以下位置绘制一个点：

```
CGPointMake(i, kMaxSpectrumHeight * (1 - frequencyArray[i]/-96.)); 
```

给了我一个相当圆润的曲线：

[情节1](http://pitchmywatch.wanjaja.com/photo.PNG)

如果我不转换为 db，我可以通过将我的数组值乘以 10000 来绘制并获得漂亮的峰值。

[情节2](http://pitchmywatch.wanjaja.com/photo2.PNG)

我做错了什么吗？以及如何显示可变数量的条？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T11:33:52.783

> 1.  我是否需要对一系列频率的幅度值进行平均？还是它们只是向您显示特定频率条的幅度？

是的，您肯定需要在您定义的范围内取平均值。只显示一个 FFT bin 太疯狂了。

> 2.  另外，我需要将幅度值转换为 db 吗？

是：dB 是对数刻度。并非巧合的是，人类的听觉也（大致）在对数尺度上起作用。因此，如果在绘制它们之前取值的 log2()，这些值对人类来说会更自然。

> 3.  如何将我的数据映射到某个范围。我是否映射到我的声音位深度的最大分贝范围？获取 bin 的最大值将导致最大映射值跳跃。

我发现最容易做的事情（至少在概念上）是将您的值从任何格式转换为 a `0..1`，即“标准化和缩放”浮点值。然后，如果需要，您可以从那里转换为您需要绘制的东西。例如

```
SInt16 rawValue = fft[0]; // let's say this comes back as 12990

float scaledValue = rawValue/32767.; // This is MAX_INT for 16-bit;
        // dividing we get .396435438 which is much easier for most people
        // to see conceptually as 39% of our max possible value

float displayValue = log2(scaledValue);

my_fft[0] = displayValue; 
```

# haskell - Common Lisp 中的 Haskell 样式部分

> ID：15568609
> 
> 赞同：9
> 
> 时间：2013-03-22T10:57:17.420
> 
> 标签：haskell, lambda, common-lisp

在 Haskell 中，如果我有一个如下所示的 lambda

```
(\x -> doStuff x y) 
```

来自周围`y`的范围，我可以将它分割并变成

```
(`doStuff` y) 
```

它更短更简洁（也是我最喜欢 Haskell 的事情之一）。

现在，在 Common Lisp 中，我会将等效代码编写为

```
(lambda (x) (do-stuff x y)) 
```

这对我来说实际上是一件很常见的事情，但我觉得即使是一点点样板也让我有些困扰，所以我想知道是否有办法在 Common Lisp 中获得类似 Haskell 风格的部分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T11:41:44.123

除非您更有经验，否则我建议您学习在 Lisp 中编写 Lisp，而不是如何在 Lisp 中编写 Haskell。后者不是一个好主意。Haskell 的工作方式非常不同。

Lisp 不做任何“currying”（或 schönfinkeling ;-)）。

你可以把它写成：

```
CL-USER 5 > (defun curry (fn arg) (lambda (&rest args) (apply fn arg args))) 
CURRY

CL-USER 6 > (mapcar (curry #'expt 2) '(2 3 4 5 6))
(4 8 16 32 64) 
```

不过，这样会花费一点效率。

```
CL-USER 7 > (mapcar (lambda (base) (expt base 2)) '(2 3 4 5 6))
(4 8 16 32 64) 
```

我个人更喜欢后者，因为我有一个真正可读的变量名称。这有助于调试器，在那里我看到了回溯。像这样的工具在 Lisp 中可能比在 Haskell 中更重要。

```
CL-USER 12 > (mapcar (lambda (base) (expt base 2)) '(2 3 "four" 5 6)) 
```

错误。让我们看看回溯：

```
CL-USER 12 : 1 > :bb
...

Condition: In EXPT of ("four" 2) arguments should be of type NUMBER.

Call to SYSTEM::ARGS-TO-BINARY-ARITHMETIC-FN-NOT-OF-TYPE {offset 189}
  SYSTEM::FN-NAME : EXPT
  SYSTEM::ARG1    : "four"
  SYSTEM::ARG2    : 2
  TYPE  {Closing} : NUMBER

Interpreted call to (SUBFUNCTION :ANONYMOUS SYSTEM::ANONYMOUS-LAMBDA):
  BASE : "four" 
```

现在我可以看到这个东西有一个名字。我将字符串传递`"four"`给带有名为`base`.

使用 REPL 和调试工具进行交互式开发很常见。最好准备对这种开发风格有用的代码。Common Lisp 没有经过优化，无法为完整的程序编译器提供广泛的类型检查——就像在 Haskell 中一样。

Lisp的主要*问题*之一是很难找出一段代码的真正作用。默认（带有前缀语法的严格函数式程序）相对容易理解。但是有很多可能性可以改变 Lisp 中代码的含义（宏、读取宏、符号宏、元对象协议、建议......）。

第一条规则：如果您正在编写基本的 Lisp 代码，请坚持使用基本的句法和语义可能性。防御性地写。期望其他人需要理解代码。为此，代码应该是可读的、易于理解的、使用常见的成语并且应该是可调试的。

在 Haskell 中，许多具有数学背景的人希望以非常紧凑的方式编写具有高度抽象性的代码。你也可以在 Lisp 中做到这一点。但是对于普通代码，我不会走这条路，对于较大的代码，Lisp 经常使用其他机制（通过宏进行代码转换，...​​）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T11:38:36.087

您可以为此类表单开发任意特殊语法。有多种变体。例如，我使用受 Clojure 启发的[尖反引号语法](https://github.com/vseloved/rutils/blob/master/core/readtable.lisp#L29)。使用它，您的表单将如下所示：

```
#`(do-stuff % y) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T11:10:15.413

我不认为你可以直接做到这一点，但是......

如果你知道你总是想做一些等价的事情`(lambda (x) (fun x lexical))`并且只是想要一种更短的表达方式，那么理论上你可以使用宏。

我个人建议不要这样做，`(lambda (x) (fun x lex))`不需要太多的打字，并从你的代码中删除一层晦涩难懂的东西。但是，如果它是一种足够常见的模式，需要进行特殊处理，则可能会执行以下操作：

```
(defmacro section (function lexical)
   (let ((sym (gensym))
     `(lambda (,sym) (,function ,sym ,lexical)))) 
```

这使得 Haskell 部分：

```
(`doStuff` y) 
```

成为 Common Lisp 部分：

```
(section dostuff y) 
```

因此，我并没有发现它更具可读性，至少在短期内，但如果它是我一次又一次看到的东西，我确实会考虑（并且已经这样做，更多是出于实验目的而不是其他任何事情）宏以使其更快（我在某处有一个半生不熟的宏，它允许您执行`(_ func _2 lexical _1)`->之类的操作`*(lambda (a b) (func b lexical a))`，有时很方便，但并没有真正提高可读性）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T07:41:33.823

[Let Over Lambda](http://letoverlambda.com/index.cl/guest/chap6.html#sec_2)中有一个尖锐的反引号读取宏可以适用于这种情况：

```
CL-USER>
(print
  '#`,(+ a1 y))

(LAMBDA (A1) (+ A1 Y))
(LAMBDA (A1) (+ A1 Y))

CL-USER>
(let ((y 2))
  (mapcar #`,(+ a1 y)
          (list 1 2 3 4)))
(3 4 5 6)
CL-USER> 
```

这种方法与@Vsevolod Dyomkin 提到的技术非常相似。Hoyte 的版本确实有一些额外的特性，比如用任意数量的参数构建一个 lambda。另一方面，它有点难以解析，因为它是以更高级别的符号表示的，为了评估一个表单，你必须取消引用反引号（在这个例子中使用'，'）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T13:05:10.107

Scheme 有`cut`宏（在 SRFI-26 中），它允许您在使用`<>`. 例如：

```
(cut doStuff <> y)  ;; same as (lambda (x) (doStuff x y))
(cut - 5 <> 6 <> 7) ;; same as (lambda (x y) (- 5 x 6 y 7)) 
```

您可能可以在 CL 中定义类似的内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-20T23:13:42.800

我也错过了使用普通 lisp 时 Haskell 风格的函数柯里化和组合的易用性。结果，我编写了以下包，它定义了 lisp 中简洁的 curry 和组合的读取器宏（它使用 alexandria 函数）。

[http://eschulte.github.io/curry-compose-reader-macros/](http://eschulte.github.io/curry-compose-reader-macros/)

有了这个包`(mapcar (compose (curry #'* 2) (curry #'+ 1)) (list 1 2 3 4))`就变成了`(mapcar [{* 2} {+ 1}] (list 1 2 3 4))`。我现在在几乎所有的 CL 项目中都使用它，并发现它大大减少了代码大小并提高了可读性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-01T10:32:37.720

alexandria 包导出符号`curry`和`rcurry`. 因此，在您的情况下，您只需执行 `(alexandria:rcurry function arg)`例如`(rcurry #'do-staff y)`.

Rcurry 和 curry 返回函数，因此您需要像往常一样调用结果。

# c# - 将多个值从一个表插入到另一个表

> ID：15568611
> 
> 赞同：0
> 
> 时间：2013-03-22T10:57:18.247
> 
> 标签：c#, mysql, insert-into

我想将具有不同值的多行插入到 anthor 表中的一个表中，该表具有一些 device_id 但它给出错误这是我的查询

```
MySqlCommand cmd = new MySqlCommand("INSERT INTO ind_master(ind,device_id) SELECT ind FROM schedule_days WHERE device_id = '"+DBdevice_id+"','"+DBdevice_id+"'", con);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:15:32.463

```
MySqlCommand cmd = new MySqlCommand("INSERT INTO ind_master(ind,device_id) SELECT ind,'"+DBdevice_id+"' FROM schedule_days WHERE device_id = '"+DBdevice_id+"'", con); 
```

如果 device_id 是整数，则删除单引号 ''

# php - 空白页的原因

> ID：15568613
> 
> 赞同：0
> 
> 时间：2013-03-22T10:57:32.293
> 
> 标签：php, codeigniter

```
<?php 
class Customer extends CI_controller
{

public function __construct()
{
    parent::__construct();
    $this->load->model('Customer_model');

}
public function create()
{

    $this->load->helper('form');
    $this->load->library('form_validation');
    $this->form_validation->set_rules('name', 'Title', 'required');
    $this->form_validation->set_rules('address', 'text', 'required');

    if ($this->form_validation->run() === FALSE)
    {

    $this->load->helper('url');
    $this->load->view('templates/header');  
    $this->load->view('master/customer');

    }
    else
    {
    $this->Customer_model->register();

    $this->load->view('templates/header');
    $this->load->view('templates/success');
    }
    }
} 
```

我已使用此代码成功地将数据插入到表中。在我尝试显示相同的标题模板和中心部分（success.php）后，它显示一个空白页面。评论标题页面后，它正在工作 IE 成功页面即将到来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:03:37.487

我认为您还需要在`load`它`helper`上面：

```
$this->load->helper('url'); 
```

# java - 如何使设备的 GridView 居中？

> ID：15568617
> 
> 赞同：0
> 
> 时间：2013-03-22T10:57:54.553
> 
> 标签：java, android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#FFFFFF"
    android:layout_gravity="center"
    android:padding="5dip" >
    <GridView
        android:id="@+id/homeGridView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="200dip"
        android:adjustViewBounds="true" 
        android:layout_gravity="center"
        android:gravity="center"
        android:horizontalSpacing="0dip"
        android:numColumns="2"
        android:stretchMode="none"
        android:verticalSpacing="@dimen/grid_vertical_space" />
</LinearLayout> 
```

如何使设备的 GridView 居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:02:48.447

使用**相对布局**而不是线性布局并在您的网格视图中应用**android:layout_centerInParent="true"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:00:28.723

您是否尝试设置 Gridview`android:layout_width`和`android:layout_height`wrap_content？

# c# - 如何在 WPF MVVM 应用程序中组织接口和实现

> ID：15568619
> 
> 赞同：7
> 
> 时间：2013-03-22T10:57:57.203
> 
> 标签：c#, wpf, mvvm, architecture

我正在开发包含以下项目的 WPF MVVM 项目，

*   领域，
*   视图模型，
*   基础设施，
*   意见

例如我需要`IFileService`提供一些对文件的操作并且不包含任何业务逻辑，我确信这个接口 FileService 的实现将在基础设施项目中，但我有问题把`IFileService`接口放在哪里

我需要在 ViewModels 项目中使用这个接口，如果我把它放在这个项目中，这意味着基础设施将对 ViewModels 有引用，我认为这不是很好，如果我将它放在包含相同业务相关类的 Domain 中。

帮助我组织项目之间的结构和引用以及将接口放在哪里最好`IFileService`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:12:39.333

嗯，为什么不创建一个额外的项目，比如`DAL`or `DataLayer`？它提供了模型类，我在您的列表中也缺少这些类。您也可以将界面放在`IFileService`那里，尽管我更喜欢使用`DataProviders`or `Repositories`（这是我的首选选项），这样 VM 就不会知道数据是从哪里加载的。

恕我直言，该项目`Infrastructure`不应包含任何复杂的逻辑。我会在那里放一些有用的方法和类，并尽可能保持简单和干净，以便在任何地方都可以引用它。可能，你甚至不需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:29:38.510

我用于 MVVM 项目的唯一规则是，所有项目**都引用**了我的基础设施项目，而我的基础设施项目**没有引用**我的其他项目。

所以恕我直言，IFileService 和一般的接口应该在基础设施项目中。然后由您决定将实现放在哪里。基础设施项目通常具有非常基本的逻辑实现，最终实现进入一个专门的项目。

我有时添加到这条规则的唯一例外是当我基于现有的 MVVM 框架进行开发时，基础设施也可能会引用它，但我会尽量避免这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:14:53.763

您应该将**IFileService**接口放入 Infrastructure 项目。因为这将使每个项目都可以使用它，因为这是核心项目。并且您可能有不同的实现，例如同步文件阅读器和异步文件阅读器。所以实现可以进入你的模块或视图模型。

# iphone - 使用 NSKeyedUnarchiver 将 NSData 转换为 NSDictionary 时出错

> ID：15568620
> 
> 赞同：0
> 
> 时间：2013-03-22T10:57:58.550
> 
> 标签：iphone, ios, objective-c, nsdictionary, nsdata

我想要`archive`和`Unarchive`包含`NSDictionary`对象的数据。`Unarchiving`在数据时观察到崩溃。请在下面找到代码和错误，

## 档案：

```
 NSData *data = [NSKeyedArchiver archivedDataWithRootObject:mydictobject]; 
```

## 解档：

```
 NSData *Objdata = [[NSData alloc] initWithBytes:sqlite3_column_blob(statement, 2)   
                    length:sqlite3_column_bytes(statement, 2)];
 NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] 
                                   initForReadingWithData:Objdata];
 NSDictionary *dict = [NSDictionary dictionaryWithDictionary:
                       [NSKeyedUnarchiver unarchiveObjectWithData:Objdata]];
[dict objectForKey:@"key1"]; 
```

## 错误：

*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“****-[NSKeyedUnarchiver initForReadingWithData:]: incomprehensible archive (0xfffffff8, 0xffffffc7, 0xf, 0x1, 0x2, 0x0, 0x0, 0x0)' ** * First throw call stack: (0x222b012 0x194e7e 0x222adeb 0xe78c90 0xe7f2 0x3c11 0x19256 0x43f8d5 0x43fb3d 0xe46e83 0x21ea376 0x21e9e06 0x21d1a82 0x21d0f44 0x21d0e1b 0x21857e3 0x2185668 0x39065c 0x2612 0x2545 0x1) libc++abi.dylib：终止调用抛出异常*

 *谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:35:49.637

```
// To read data do following
-(void) readAnimalsFromDatabase {

    // Setup the database object
    sqlite3 *database;

    // Init the animals Array
    dataArray = [[NSMutableArray alloc] init];

    // Open the database from the users filessytem
    if(sqlite3_open([databasePath UTF8String], &amp;database) == SQLITE_OK) {
        // Setup the SQL Statement and compile it for faster access
        const char *sqlStatement = "select * from anyTable";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &amp;compiledStatement, NULL) == SQLITE_OK) {
            // Loop through the results and add them to the feeds array
            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                // Read the data from the result row
                NSString *aName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
                NSString *aImageUrl = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

                NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:aName, @"name", aDescription, @"description", aImageUrl, @"imageURL", nil];

                // Add the animal object to the animals Array
                [dataArray addObject:dict];

            }
        }
        // Release the compiled statement from memory
        sqlite3_finalize(compiledStatement);

    }
    sqlite3_close(database);

    // Archive NSArray to NSData
    NSData *archiveData = [NSKeyedArchiver archivedDataWithRootObject:dataArray];

    // UnArchive NSData to NSDictionary
    NSArray *array = [NSArray arrayWithArray:[NSKeyedUnarchiver unarchiveObjectWithData:data]];
    NSLog(@"%@",array);
} 
```*

# api - twitter api：只有推文的数量

> ID：15568621
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:00.247
> 
> 标签：api, twitter

我只想知道带有标签#zzzrrererererfdd 的推文数量

而且我找不到如何使用 twitter api 来做到这一点。我不想要用户等所有的东西......

如果有人知道如何在不解析所有结果的情况下做到这一点。

谢谢

比西埃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:48:49.510

不幸的是，这对于 Twitter API 是不可能的。

您可以使用`search/tweets`API 端点查找带有特定主题标签的推文（通过提供主题标签作为`q`参数），但响应数据不包含任何有关推文计数的元数据。您需要自己循环并计算推文。

[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

# java - 如何在 Java 中管理 Linux 文件权限？

> ID：15568629
> 
> 赞同：3
> 
> 时间：2013-03-22T10:58:26.990
> 
> 标签：java, linux, permissions, chmod, ext3

是否有任何机制来获取和设置文件/目录权限？

例如，我想以 shell 方式显示文件的权限：

```
-rwxr-xr-- 
```

是否可以使用 Java 做到这一点？

*   我知道类中有一些方法`File`可以知道文件`canExecute`,`canRead`和`canWrite`, 但 AFAIK 此信息仅适用于当前用户。我需要知道整个八进制数，例如 755，所以我需要从用户、组和其他人那里获取它。
*   我知道 Java7 带来了 Posix 操作，但是如何使用更小的 JRE 来做到这一点？
*   我不想使用`ls`, 或之类的命令`chmod`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:47:46.340

如果可以使用外部库，有几个：

*   [JPosix](http://www.kanga.org/jposix/)
*   [用于 java 的 Posix](http://bmsi.com/java/posix/)
*   [jnr-posix](https://github.com/jnr/jnr-posix)

如果整个库看起来很麻烦，那么创建一个调用`lstat`C 函数并返回访问模式的 JNI 包装器大约需要 10 分钟。[这是一个为and](http://jonisalonen.com/2012/calling-c-from-java-is-easy/)[函数](http://jonisalonen.com/2012/calling-c-from-java-is-easy/)创建这样一个[包装器`isatty``ttyname`](http://jonisalonen.com/2012/calling-c-from-java-is-easy/)的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:02:09.317

正如您所说，在 Java7 中，JVM 支持它，因此您可以保证这可以在所有操作系统中可移植地完成（因为 JVM 实现会处理它）。在 Java7 下，您必须为每个要支持的*操作系统使用本机库。*这可能比执行更脏`chmod`

# mysql - 如何避免使用 ASP Classic 和 MySQL 对分页进行数据库重新查询？

> ID：15568630
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:28.353
> 
> 标签：mysql, asp-classic

我有一个页面从数据库中查询产品，然后显示在 30 个项目的页面中。当我导航到下一页时，应用程序重新查询数据库并显示页码。2 以此类推。

如何避免此数据库重新查询？我可以将结果存储在某个地方吗？我们谈论的是 1500-2000 行/查询，当我们有 400-450 个在线用户时，我们的专用服务器以 100% 的 CPU 容量运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:04:51.900

正如我所说，我寻求解决方案的主要原因是避免 CPU 过载。服务器在只有 500-600 个在线用户的情况下被 100% 堵塞似乎是不自然的。我发现了优化表 MySQL 命令，它适用于 MyISAM 表，它完全解决了问题。执行命令后，CPU 使用率立即下降到 10-12%。

因此，如果有其他人在运行导致 CPU 过载的 MySQL 应用程序，您应该首先尝试优化表命令和此处描述的其他维护任务[http://dev.mysql.com/doc/refman/5.5/en/optimize -table.html](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:50:49.847

您是否有足够的内存来预加载整个“目录”（在应用程序级别存储中），然后让 SQL 返回所有结果，但只存储索引（在每个会话中）。像这样： 在应用程序开始时：创建我的只读应用程序级缓存 在搜索时：SQL 返回所有结果（我假设您必须执行 SQL，因此您可以检查业务条件 在结果上：构建映射到应用程序缓存的索引列表在显示页面上：从应用程序缓存中读取并显示适当的范围

如果您没有足够的内存，那么“结果”表可能会提供一些优化：在每个会话的基础上，将整个查询结果缓存到“扁平”表中，以避免潜在的昂贵（业务逻辑繁重）产品询问。您必须小心检测查询何时更改，以便您可以丢弃缓存，并且还有一些服务器端逻辑来清理旧的、过期的搜索。

# database - 数据库 - 更改此数据库架构还是保留它更好？

> ID：15568631
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:28.580
> 
> 标签：database, entity-relationship

我的数据库中有三个表：Book、Series、Author。

这些都具有彼此之间的多对多关系。

```
Book - Series: many-to-many
Book - Author: many-to-many
Author - Series: many-to-many 
```

所以，这意味着我必须在我的数据库中再添加三个表：

```
1\. tableBookSeries, which will have id, idBook, idSeries
2\. tableBookAuthor, which will have id, idBook, idAuthor
3\. tableAuthorSeries, which will have id, idAuthor, idSeries 
```

这意味着我的数据库中将有 6 个表。

有没有办法优化这个数据库或者现在很好？我可以减少桌子的数量吗？这对我有什么好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:15:50.960

在我看来，作者 - 系列没有直接关系。作者只写书籍，而这些书籍恰好属于或不属于 Serie。

在数据库中会是这样的（使用 5 个表而不是 6 个）：

1.  书 - 系列：多对多 - 正确
2.  书 - 作者：多对多 - 正确
3.  作者 - 系列：多对多 - 不正确（不要这样做）

额外表：

1.  tableBookSeries，它将具有 id、idBook、idSeries - 正确
2.  tableBookAuthor，它将具有 id、idBook、idAuthor - 正确
3.  tableAuthorSeries，它将具有 id、idAuthor、idSeries - 不正确（不要这样做）

避免作者和系列之间的联系。如果您需要知道与作者相关的系列，您仍然可以通过搜索他的书籍来知道。同样，要知道谁写了 Serie，您可以使用关联的 Books 获取作者列表。

希望我有帮助

# scala - Scala条件列表构造

> ID：15568634
> 
> 赞同：11
> 
> 时间：2013-03-22T10:58:34.570
> 
> 标签：scala, collections

我正在使用 Scala 2.9.2，并想根据某些条件构建一个列表。

考虑以下情况，其中 cond 是某个函数，采用谓词 p 和类型 T 的值（在本例中为 t3）：

```
t1 :: t2 :: cond( p, t3 ) :: t4 
```

我想要的行为如下。如果 p 为真，这应该给出：

```
List[T]( t1, t2, t3, t4 ) 
```

如果 p 评估为假，这应该给出：

```
List[T]( t1, t2, t4 ) 
```

我可能正在以完全错误的方式思考这个问题，但我正在努力想出一个优雅的解决方案。我可以在任何地方都涉及选项，然后进行过滤，但这会使代码更难阅读：

```
def cond[T]( p : => Boolean, v : T ) : Option[T] =
{
    p match
    {
        case true => Some( v )
        case false => None
    }
} 
```

这允许以下操作：

```
scala> ( Some( 1 ) :: Some( 2 ) :: cond( true, 3 ) :: Some( 4 ) :: Nil ).flatten
res4: List[Int] = List(1, 2, 3, 4)

scala> ( Some( 1 ) :: Some( 2 ) :: cond( false, 3 ) :: Some( 4 ) :: Nil ).flatten
res5: List[Int] = List(1, 2, 4) 
```

然而，这不是最优雅的解决方案，因为它要求用户将所有非条件元素包装在 Some() 中，并记住在最后进行展平。谁能想到一个更优雅的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T11:06:14.720

产生一个列表怎么样？

```
@inline def cond[T]( p : => Boolean, v : T ) : List[T] = if(p) v::Nil else Nil 
```

然后像这样使用它们：

```
List(1,2,3) ++ cond(false, 3 ) ++ List(4) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T11:07:40.663

尝试根据您的条件创建和过滤新列表：

```
List[T](t1, t2, t3, t4).filter(p) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T16:16:38.990

因此，这不可能与标准列表一起使用，因为类型是错误的：`::`需要一个类型为列表类型的元素`[A >: T]`，`T`而您想给它一些可能会或可能不会产生该类型元素的元素.

但是，没有理由不能定义一种方法，该方法非常乐意采用仅可选地生成下一个元素的方法。`List`它本身是密封的，所以我们不能直接扩展它，但我们可以很容易地复制我们需要的行为：

```
trait QList[+T] {

  def hd : T
  def tl : QList[T]

  def ?::[A >: T](hd : A) : QList[A] = new ?::[A](hd, this)
  def ?::[A >: T](hd : => Option[A]) : QList[A] = hd match {
    case Some(a) => ?::(a)
    case None => this
  }
}

case object QNil extends QList[Nothing] {
  def hd = throw new Exception("Head of empty list")
  def tl = throw new Exception("Tail of empty list")
}
case class ?::[+T](val hd: T, val tl : QList[T]) extends QList[T]

def cond[T]( p : => Boolean, v : T ) : Option[T] =
{
  p match
  {
    case true => Some( v )
    case false => None
  }
}

val truelist = 1 ?:: 2 ?:: 3 ?:: cond(true, 4) ?:: 5 ?:: QNil
val falselist = 1 ?:: 2 ?:: 3 ?:: cond(false, 4) ?:: 5 ?:: QNil 
```

我们基本上是重新创建列表，但是用一个需要条件的重载前置操作来填充它。

`?::`通过使用隐式转换到另一个具有正确方法的类，可以将该方法添加到标准列表中。您提到您使用的是 2.9.2，这很遗憾，因为否则这是隐式值类非常适合的事情，但我们不需要它们，它们只是让事情变得更容易：

```
class ConditionallyAppend[T](tl : List[T]) {
  def ?::[A >: T](hd : A) : List[A] = hd :: tl
  def ?::[A >: T](x : => Option[A]) : List[A] = x match {
    case Some(a) => a :: tl
    case None => tl
  }
}

implicit def ListToConditionallyAppend[A](x : List[A]) = new ConditionallyAppend(x) 
```

现在我们可以这样做了：

> val truelist = 1 ?:: 2 ?:: 3 ?:: cond(true, 4) ?:: 5 ?:: Nil
> 
> 真实列表：列表 [任何] = 列表（1、2、3、4、5）

和这个：

> val falselist = 1 ?:: 2 ?:: 3 ?:: cond(false, 4) ?:: 5 ?:: Nil
> 
> 假名单：List[Any] = List(1, 2, 3, 5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-05T03:09:04.013

作为一个选项，您可以考虑切换到使用 Scala.collection.mutable 包中的 ListBuffer

```
val listBuffer = new ListBuffer[<item_type>]
if(<item1_cond>) listBuffer += <item1>
if(<item2_cond>) listBuffer += <item2> 
```

请注意，这仍然是一个指向可变集合的 val（不可变引用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:06:23.023

如果您需要知道索引以选择正确的谓词，您可以`zipWithIndex`将索引与值配对，然后使用`collect`而不是`filter`允许您从结果中删除索引并将谓词选择和应用程序编码在保护中。例如：

```
List(1, 4, 9, 16, 25).zipWithIndex.collect { case (n, i) if (n + i) % 3 <= 1 => n }
res0: List[Int] = List(1, 16) 
```

# c++ - 没有 make 运行 qpid c 示例的方法是什么？

> ID：15568635
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:37.113
> 
> 标签：c++, apache, message-queue

有什么方法可以在没有 make 的情况下运行 apache qpid c++ helloworld 示例，并且使用 g++ 我需要创建一个 helloworld.o 目标文件如何执行这些操作？

g++ -I ./includes/ -om hello_world.cpp

```
/tmp/cc9Jao8f.o: In function `main':
hello_world.cpp:(.text+0x169): undefined reference to `qpid::messaging::Connection::Connection(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
hello_world.cpp:(.text+0x178): undefined reference to `qpid::messaging::Connection::open()'
hello_world.cpp:(.text+0x1a1): undefined reference to `qpid::messaging::Connection::createSession(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
hello_world.cpp:(.text+0x1e8): undefined reference to `qpid::messaging::Session::createReceiver(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
hello_world.cpp:(.text+0x205): undefined reference to `qpid::messaging::Session::createSender(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
hello_world.cpp:(.text+0x239): undefined reference to `qpid::messaging::Message::Message(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
hello_world.cpp:(.text+0x254): undefined reference to `qpid::messaging::Sender::send(qpid::messaging::Message const&, bool)'
hello_world.cpp:(.text+0x267): undefined reference to `qpid::messaging::Message::~Message()'
hello_world.cpp:(.text+0x27b): undefined reference to `qpid::messaging::Message::~Message()'
hello_world.cpp:(.text+0x2d6): undefined reference to `qpid::messaging::Duration::SECOND'
hello_world.cpp:(.text+0x2db): undefined reference to `qpid::messaging::operator*(qpid::messaging::Duration const&, unsigned long)'
hello_world.cpp:(.text+0x2f7): undefined reference to `qpid::messaging::Receiver::fetch(qpid::messaging::Duration)'
hello_world.cpp:(.text+0x30d): undefined reference to `qpid::messaging::Message::getContent() const'
hello_world.cpp:(.text+0x366): undefined reference to `qpid::messaging::Session::acknowledge(bool)'
hello_world.cpp:(.text+0x375): undefined reference to `qpid::messaging::Connection::close()'
hello_world.cpp:(.text+0x389): undefined reference to `qpid::messaging::Message::~Message()'
hello_world.cpp:(.text+0x39f): undefined reference to `qpid::messaging::Message::~Message()'
hello_world.cpp:(.text+0x3bb): undefined reference to `qpid::messaging::Sender::~Sender()'
hello_world.cpp:(.text+0x3d2): undefined reference to `qpid::messaging::Sender::~Sender()'
hello_world.cpp:(.text+0x3e8): undefined reference to `qpid::messaging::Receiver::~Receiver()'
hello_world.cpp:(.text+0x3ff): undefined reference to `qpid::messaging::Receiver::~Receiver()'
hello_world.cpp:(.text+0x415): undefined reference to `qpid::messaging::Session::~Session()'
hello_world.cpp:(.text+0x42c): undefined reference to `qpid::messaging::Session::~Session()'
hello_world.cpp:(.text+0x483): undefined reference to `qpid::messaging::Connection::close()'
hello_world.cpp:(.text+0x4b5): undefined reference to `qpid::messaging::Connection::~Connection()'
hello_world.cpp:(.text+0x4cc): undefined reference to `qpid::messaging::Connection::~Connection()'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:06:59.210

你只需要链接到图书馆。`libqpid.so`例如，如果调用该库，您将添加`-lqpid`到您的构建命令中。

# c# - 编译时/构建后依赖注入 IoC？

> ID：15568637
> 
> 赞同：7
> 
> 时间：2013-03-22T10:58:40.480
> 
> 标签：c#, security, dependency-injection, ninject, fody

我目前使用[NInject](http://www.ninject.org/)将接口绑定到具体类型并将它们注入到我的类中。但是，据我了解，这是一个运行时事务。对我来说，如果有人想改变我的应用程序的行为，这似乎是一个攻击点。

**有什么可以让我将我的依赖注入 IoC 迁移到编译时（阅读：构建后 IL 编织/替换）？**

* * *

*详细说明*

在我的代码中，我设置了一个绑定

```
Bind<IFoo>().To<Foo>()
Bind<Bar>().ToSelf().InSingletonScope(); 
```

与 ctor`Foo(Bar dependency)`

在我的应用程序的根目录（在启动时）我解析了图表

```
var foo = kernel.Get<IFoo>(); 
```

假设我**没有服务定位器**（[反模式对吗？](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/)）。所以我已经没有用`kernel`了。

现在我想要一个“post-build release-compile”，用实例替换内核的解析引擎，或者引用常量/单例等。这样虽然我的代码看起来像这样；

```
var foo = kernel.Get<IFoo>(); 
```

实际上，在我的最终构建阶段更换 IL 后，它看起来像这样：

```
var bar = new Bar(); 
var foo = new Foo(bar); 
```

并且不再引用 NInject 了。

我对这个问题的理由是我正在使用[Fody](https://github.com/Fody/Fody/wiki)来 IL Weave 我所有的 PropertyChanged raisers，我想知道是否可以为依赖注入做类似的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T11:18:47.897

一般来说，从安全角度来看，使用 DI 容器不会对您的应用程序构成任何额外威胁。

当您编写服务（例如 Web 服务或网站）应用程序时，攻击者只能在该应用程序或服务器已被破坏时更改应用程序的 DI 配置行为。发生这种情况时，服务器应被视为丢失（您必须重新格式化该服务器或将其完全丢弃）。DI 不会使情况变得更糟，因为 DI 容器通常不允许从外部更改行为。你将不得不做一些非常奇怪的事情来实现这一点。

另一方面，对于在用户机器上运行的应用程序，您应该始终认为该应用程序受到了破坏，因为攻击者可以反编译您的代码，在运行时更改行为等。同样，DI 不会使情况变得更糟，因为您只能保护自己免受对服务边界的攻击。该客户端应用程序必须与服务器通信，并且存储贵重资产的位置在服务边界内。例如，您永远不应该将帐户密码存储在客户端的 DLL 中。不管它是否加密。

然而，使用 DI 可以使攻击者更容易更改客户端应用程序的行为，尤其是当您在 XML 中配置所有内容时。但这适用于您存储在配置文件中的所有内容。如果那是你唯一的防线（无论有没有 DI），你还是完蛋了。

> 如果有人想改变我的应用程序的行为，这似乎是一个攻击点

请注意，任何应用程序都可以被反编译、更改和重新编译。无论它是托管的（.NET、Java）还是非托管的（C++），或者是否被混淆，都无关紧要。同样，从安全的角度来看，您执行运行时 DI 还是编译时 DI 并不重要。如果这是一个问题，请不要在您无法控制的机器上部署该代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T09:54:02.220

正如所讨论的，您引用的这样做的原因并没有加起来。然而，Philip Laureano（Linfu 的作者）前段时间做了一个[Hiro 项目](http://plaureano.blogspot.ie/2009/04/introducing-hiro-worlds-fastest-ioc_15.html)，该项目进行了预部署 DI。不知道有没有去哪里...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-12T11:39:51.107

我正在使用源生成器为.Net开发一个编译时IOC容器：

[https://github.com/YairHalberstadt/stronginject](https://github.com/YairHalberstadt/stronginject)

[https://www.nuget.org/packages/StrongInject/](https://www.nuget.org/packages/StrongInject/)

有了它，您可以执行以下操作：

```
using StrongInject;

[Registration(typeof(Foo), typeof(IFoo))]
[Registration(typeof(Bar), Scope.SingleInstance)]
public class Container : IContainer<IFoo> {}

public static class Program
{
    public static void Main()
    {
        new Container().Resolve(foo => //use foo here);
    }
} 
```

如果无法解决`IFoo`并避免使用反射，这将为您提供编译时错误和警告。

# php - 使用 Jquery (AJAX) 将不同域上的 PHP 连接到 HTML

> ID：15568640
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:44.977
> 
> 标签：php, jquery, cross-domain

尝试从与我的 HTML 位于不同域的 PHP 接收响应：

```
 $.get('getstate.php', {
                email: $('#game-email').val(),
                country: 'DE',
                lang: lang,
                source: 'promotion'
            }, function (data) {
                console.log(data);
             }); 
```

在铬我得到这个错误：

> XMLHttpRequest 无法加载..... Access-Control-Allow-Origin 不允许 Origin null。

我需要做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:03:13.187

一个快速的谷歌告诉我，这已经在这里回答过很多次了......[出于安全原因，ajax 是不可能的](http://en.wikipedia.org/wiki/Same_origin_policy)，所以你必须要么

1.  从您的 PHP 脚本中调用另一个域，或者
2.  看看[JSONP](https://stackoverflow.com/questions/7334666/how-to-post-cross-domain-data-and-get-a-response-using-php-and-jquery?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:05:43.360

试试 dataType: 'jsonp'
`$`.get('page.php, {}, callback, "jsonp");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:10:06.753

来自[http://jquery-howto.blogspot.co.uk/2009/04/cross-domain-ajax-querying-with-jquery.html的简单 PHP 代理](http://jquery-howto.blogspot.co.uk/2009/04/cross-domain-ajax-querying-with-jquery.html)

```
<?php
// Set your return content type
header('Content-type: application/xml');

// Website url to open
$daurl = 'http://feeds.feedburner.com/jQueryHowto';

// Get that website's content
$handle = fopen($daurl, "r");

// If there is something, read and return
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        echo $buffer;
    }
    fclose($handle);
}
?> 
```

# c++ - 使用 Windows API 文件函数 c++

> ID：15568641
> 
> 赞同：0
> 
> 时间：2013-03-22T10:58:48.957
> 
> 标签：c++, winapi

Windows 编程新手，互联网上有几个我要问的例子，但没有一个显示我认为失败的比较。

我在整个 C++ 程序中使用了几个 windows api 调用，只需要一些关于如何正确使用它们的指导。

例如下面我有 GetFileAttributes() 它从文件属性常量返回任何东西。

```
DWORD dwAttributes = GetFileAttributes(strPathOfFile.c_str());
if ( dwAttributes != 0xffffffff )
{
    if ( dwAttributes == FILE_ATTRIBUTE_NORMAL )
    {
        pkFileInfoList->Add( strPathOfFile + "\t" +"FILE_ATTRIBUTE_NORMAL");
    }
    else if ( dwAttributes == FILE_ATTRIBUTE_ARCHIVE )
    {
        pkFileInfoList->Add( strPathOfFile + "\t" + "FILE_ATTRIBUTE_ARCHIVE");
    }
} 
```

[/代码]

if/else 语句继续使用文件属性常量中的所有内容。

我是否正确使用了这个，我有一个包含超过 2500 个文件的目录，我正在反复提供路径。它总是返回 FILE_ATTRIBUTE_ARCHIVE。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:06:29.270

`GetFileAttributes`返回一组属性，而不是单个属性，因此要正确测试，您应该这样做：

```
DWORD dwAttributes = GetFileAttributes(strPathOfFile.c_str());
if ( dwAttributes != 0xffffffff )
{
    if ( dwAttributes & FILE_ATTRIBUTE_NORMAL )
    {
        pkFileInfoList->Add( strPathOfFile + "\t" +"FILE_ATTRIBUTE_NORMAL");
    }
    else if ( dwAttributes & FILE_ATTRIBUTE_ARCHIVE )
    {
        pkFileInfoList->Add( strPathOfFile + "\t" + "FILE_ATTRIBUTE_ARCHIVE");
    }
} 
```

即使用按位 & 代替 ==

# c# - Kendo UI 自动完成功能打开两次

> ID：15568643
> 
> 赞同：1
> 
> 时间：2013-03-22T10:58:58.123
> 
> 标签：c#, javascript, kendo-ui

我将 Kendo UI Autocomplete 与 ASMX 服务一起使用，该服务返回如下字符串数组：

```
<ArrayOfString>
    <string>One string</string>
    ...
</ArrayOfString> 
```

除了项目列表打开两次外，一切正常。一键关闭一个列表，“第二个后面”仍然打开。当列表打开时，我们可以看到第二个列表在第一个列表后面打开。

任何想法 ？

**JS代码：**

```
<input id="autoCompleteTest" />
<script>
    var dataSource = new kendo.data.DataSource({
        serverFiltering: true,
        transport: {
            read: {
                data: {
                    startswith: function(){
                        return $("#autoCompleteTest").data("kendoAutoComplete").value();
                    }
                },
                url: "WebService.asmx/GetStrings",
                type: "POST",
            }
        },
        schema: {
            // specify the the schema is XML
            type: "xml",
            // the XML element which represents a single data record
            data: "/ArrayOfString/string",
            // define the model - the object which will represent a single data record
            model: {
                // configure the fields of the object
                fields: {
                // the "title" field is mapped to the text of the "title" XML element
                value: "text()"
            }
        }
    }
});
$("#autoCompleteTest").kendoAutoComplete({
    minLength: 3,
    dataValueField : "value",
    dataTextField : "value",
dataSource: dataSource
});
</script> 
```

**C#代码：**

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public String[] GetStrings(string startswith)
{
    using (var dataContext = new DataClassesDataContext())
    {
        var query = from x in dataContext.product where x.shortName.StartsWith(startswith) select x.shortName;
        return query.ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T12:52:28.930

我遇到了类似的问题并在[此处发布](https://stackoverflow.com/q/23112297/3541513)

请确认您的自动完成控件不位于另一个强制 Kendo 控件再次渲染的控件内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T11:12:46.853

当 dom 准备好进行 kendo 多选时，您是否编写客户端代码：$(document).ready(function () { ..yourcode.});

见：[http ://docs.telerik.com/kendo-ui/controls/editors/multiselect/overview#accessing-an-existing-multiselect](http://docs.telerik.com/kendo-ui/controls/editors/multiselect/overview#accessing-an-existing-multiselect)

# java - 从 JList 取回数据

> ID：15568646
> 
> 赞同：10
> 
> 时间：2013-03-22T10:59:03.880
> 
> 标签：java, swing, jlist

我在谷歌上搜索从 JList 组件中检索数据的解决方案，但没有找到任何解决方案。那么，是否有一种 Jlist 方法可以返回其项目？我不想要一个选定的。我想要整个清单。

原因是我有这个方法可以根据列表框的选定值更新对话框的所有组件。我想用同样的方法更新那个列表框。所以要做到这一点，该方法不应该在被调用时更新列表框。它应该将列表框中的值与我存储在一个类中的最新数据进行比较。（否则进入无限循环）只有当列表框中的数据与类中的数据不匹配时，它才会更新。

有没有这样的方法来检索列表框的所有数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T11:02:26.273

您必须使用 getModel() 方法来获取模型数据，然后使用 ListModel 中的方法来获取所有数据元素。

```
ListModel model = list.getModel();

for(int i=0; i < model.getSize(); i++){
     Object o =  model.getElementAt(i);  
} 
```

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getModel()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getModel())

[http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T11:07:12.000

要获得选择，您需要使用`getModel`和的组合`getSelectedIndices`

```
ListModel model = jListInstance.getModel();

for(int index : jListInstance.getSelectedIndices()) {
    System.out.println(model.getElementAt(index));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:10:37.390

使用**getModel()**方法检索 JList 中包含的数据模型。List 模型可以通过以下方式遍历：

```
ListModel list = jListObj.getModel();
for(int i = 0; i < list.getSize(); i++){
     Object obj = list.getElemenetAt(i);
} 
```

[http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html) [http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html #getModel%28%29](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getModel%28%29)

# qml - 如何将一堆图像加载到 QML 中的图像中？

> ID：15568653
> 
> 赞同：0
> 
> 时间：2013-03-22T10:59:36.433
> 
> 标签：qml, qt-quick

我想将一些图像加载到 QML 中的 Image 对象中。我想在一个循环中一个接一个地做，我认为有一些延迟，因为它应该假装看起来像一个动画。我是 Qt 和 QML 的新手，所以有人能帮我如何开始吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:11:47.927

适用于 QML 1.x 和 2.0 的最简单的解决方案是使用 a`Repeater`和 a `Timer`：

```
import QtQuick 2.0

Rectangle {
    id: base;
    width: 800;
    height: 600;

    property variant images : [
        "image1.jpg",
        "image2.jpg",
        "image3.jpg",
        "image4.jpg",
        "image5.jpg"
    ];
    property int currentImage : 0;

    Repeater {
        id: repeaterImg;
        model: images;
        delegate: Image {
            source: modelData;
            asynchronous: true;
            visible: (model.index === currentImage);
        }
    }

    Timer {
        id: timerAnimImg:
        interval: 500; // here is the delay between 2 images in msecs
        running: false; // stopped by default, use start() or running=true to launch
        repeat: true;
        onTriggered: {
            if (currentImage < images.length -1) {
                currentImage++; // show next image
            }
            else {
                currentImage = 0; // go back to the first image at the end
            }
        }
    }
} 
```

应该这样做，如果您不想在到达最后一张图像时重新启动动画，只需`currentImage = 0;`在`stop();`计时器的`onTriggered`.

此外，您可能需要稍微调整一下代理`Image`以`Repeater`使其具有您想要的外观（大小、填充模式、位置等......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:31:39.690

如果您使用的是 QtQuick 2，那么 AnimatedSprite 是最好的方法：http: [//qt-project.org/doc/qt-5.0/qtquick/qtquick-effects-sprites.html](http://qt-project.org/doc/qt-5.0/qtquick/qtquick-effects-sprites.html)

否则，您可以使用 Timer 或 NumberAnimation 来触发更改图像源，但在第一次加载图像时可能会出现不可预知的延迟（缓存应该在第一次循环后解决这个问题）。如果您只有几张图像，则可以拥有三个图像并循环它们的可见性。

# ruby-on-rails - 使用预先存在的记录向 Rails 中的数据库添加新记录

> ID：15568655
> 
> 赞同：1
> 
> 时间：2013-03-22T10:59:50.363
> 
> 标签：ruby-on-rails, database, rails-activerecord

好的，你可以在下面看到我的模型和控制器。我想要做的是，当用户添加新租约时，用户可以从数据库中已有的属性列表中选择 property_id，还可以从文件中的租户列表中选择 tenant_id . 我对 Rails 比较陌生，真的不知道我将如何去做。在我的控制器中，我放置了 @property = Property.all @tenant = Tenant.all 以使它们可以访问，但我不知道如何以我想要的方式利用它们。

租赁模式

```
class Lease < ActiveRecord::Base
  attr_accessible :lease_end, :lease_start, :property_id, :tenant_id
  belongs_to :tenant
  belongs_to :property
end 
```

属性模型

```
class Property < ActiveRecord::Base
  attr_accessible :address_line_1, :city, :county, :image, :rent
  belongs_to :lease
end 
```

租户模型

```
class Tenant < ActiveRecord::Base
  attr_accessible :email, :name, :phone
  belongs_to :lease 
end 
```

用于添加新租约和编辑租约的租赁控制器方法

```
 def new
    @lease = Lease.new
    @property = Property.all
    @tenant = Tenant.all
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @lease }
    end
  end

  # GET /leases/1/edit
  def edit
    @lease = Lease.find(params[:id])
    @property = Property.all
    @tenant = Tenant.all
  end 
```

编辑：下拉框工作，但选项不是我想要的。我得到了像 # 代表租户和 # 代表属性这样的选项。我想如果我能得到租户的姓名和物业的地址

_form 文件代码已根据**teresko**的建议进行了更新

```
<%= form_for(@lease) do |f| %>
  <% if @lease.errors.any? %>
    <div id="error_explanation">
       <h2><%= pluralize(@lease.errors.count, "error") %> prohibited this lease from          
          being saved:</h2>
      <ul>
      <% @lease.errors.full_messages.each do |msg| %>
       <li><%= msg %></li>
     <% end %>
     </ul>
    </div>
 <% end %>

 <div class="field">
  <%= f.label :tenant_id %><br />
  <%= f.select :tenant, options_for_select(@tenants) %>
</div>
<div class="field">
  <%= f.label :property_id %><br />
  <%= f.select :property, options_for_select(@properties) %>
</div>
<div class="field">
  <%= f.label :lease_start %><br />
  <%= f.date_select :lease_start %>
</div>
<div class="field">
  <%= f.label :lease_end %><br />
  <%= f.date_select :lease_end %>
</div>
<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:07:03.850

第一个提示：好的做法是`@properties`在你有很多属性时使用，而不是`@property`. 同上`@tenants`。

然后，您可以在新页面或编辑页面中进行设置：

```
<% form_for @lease do |f| %>
  <%= f.select :property, options_for_select(@properties) %>
  <%= f.select :tenant, options_for_select(@tenants) %>
<% end %> 
```

下一个技巧是使用局部命名`app/views/leases/_form.html.erb`来设置以前的表单，当`new`和`edit`正在渲染相同的表单时。然后，您的新视图和编辑视图将变为

```
<%= render :partial => 'form' %> 
```

要显示特定选项，您可以阅读 options_for_select 或 options_from_collection_for_select 文档

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

```
<%= f.select :property, options_from_collection_for_select(@properties, 'id', 'name') %> 
```

为您的案例选择最佳方法。

# c - 将输入字符与C中的整数数组进行比较

> ID：15568657
> 
> 赞同：0
> 
> 时间：2013-03-22T10:59:56.213
> 
> 标签：c

我对 C 有点陌生，我无法使用 If 语句将用户输入的字符与存储在数组中的 int 进行比较。

例如：

```
 int i[2] = {1,2};
    char input[3];
    printf("Select option:");
    fgets(input,3,stdin);

    if(strcmp(*input,i[0]) == 0)
       printf("1 chosen");
    if(strcmp(*input,i[1]) == 0)
       printf("2 chosen"); 
```

编译时，我收到两个比较语句的警告：

```
 warning: passing argument 1 of 'strcmp' makes pointer from integer without cast
    warning: passing argument 2 of 'strcmp' makes pointer from integer without cast 
```

我知道这可能是因为我比较了非字符串元素，但是我将如何转换它们然后比较它们？

执行时我得到：

```
 Segmentation fault(core dumped) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:36:32.777

除了说它是“错误的”之外，没有人解释过*为什么你正在做的事情是不正确的。*

C 中的字符串只是内存中的一串连续字符，其中字符串中的最后一个字符的值为零。您可以将字符串存储在`char`数组中，也可以使用`char`指针 ( `char*`) 指向内存中的某个位置。

当您输入一个十进制数时，您正在读取恰好在 to 范围内的单个字符`'0'`，`'9'`可能以可选的 . 为前缀`'-'`。您将这些作为字符串读取，如果要将它们视为整数，则需要将它们转换为整数数据类型（而不是一系列`char`值）。

这就是类似的东西有`atoi`帮助的地方，尽管它不再流行。你应该使用`strtol`. `unsigned`[处理,`long long`或它们的组合，以及`double`和`float`类型，有一整套函数]。

这解决了大约一半的问题。现在，您正在使用`strcmp`并期望它能够正常工作。你正在做的事情有几件事是错误的。主要错误是您不能将整数视为字符串。如果你真的想使用字符串比较，你必须将整数转换为字符串。这意味着你做了相反的事情`strtol`。

这是一个更大的讨论，在你的情况下，这不是正确的方法，所以我不会进入它。但我想指出，在所有条件相同的情况下，您将错误的类型发送到`strcmp`. 它需要两个`char*`指针（`const char *`真的）。您所做的是取消引用`input`指向`char`第一个元素的 a 的指针，然后传递`int`第二个元素的 a 。

```
strcmp(*input,i[0]) 
```

指针基本上只是一个数字。它给出了一些数据的内存地址。在这种情况下，数据应该是`char`类型（单字节）。该`strcmp`函数需要有效的内存地址（实际上在您的堆栈或堆中的东西）。但是你给它的是`*input`（输入字符串中第一个字符的值）和`i[0]`（数字`1`）。

那些编译器警告告诉你一些非常重要的事情，你知道的！=)

因此，为了完整起见（尽管其他人已经回答了这个问题），您应该忘记字符串比较（并记下有关 C 中字符串的更多信息），然后执行以下操作：

```
int value = strtol( input, NULL, 10 );

if( value == i[0] )
   printf("1 chosen");
if( value == i[1] )
   printf("2 chosen"); 
```

还有其他方法可以解决这个问题。我可以谈论如何从字符串转换个位数，但我想我已经咆哮了足够长的时间了。希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:08:34.827

除了列出作为您的 qn 答案的各种方法之外。

你为什么不把用户输入当作int？

```
#include<stdio.h>

int main()
{

int i[2] = {1,2};
int input;
    printf("Select option:");
    scanf("%d",&input);

    if(input==i[0])
       printf("1 chosen");
    if(input==i[1])
       printf("2 chosen");

return 0;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:12:06.650

您必须使用 scanf 而不是 fgets：

```
int input;
printf("Select option:");
scanf("%d", &input);
if (input == i[0]) 
```

等等。

见[http://en.wikibooks.org/wiki/C_Programming/Simple_input_and_output#Input_using_scanf.28.29](http://en.wikibooks.org/wiki/C_Programming/Simple_input_and_output#Input_using_scanf.28.29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:02:52.700

您需要将输入字符串与一些已知字符串进行比较。但是您正在比较第一个字符与一些整数。 `strcmp()`如果您将正确的参数传递给它，它将做您需要的事情：两个字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:05:52.433

在这里，您尝试使用 strcmp 将字符串与整数进行比较：

```
if(strcmp(*input,i[0]) == 0) 
```

那是行不通的。

你可以这样做：

```
const char *numbers[2] = {"1", "2"};
char input[3];
printf("Select option:");
fgets(input,3,stdin);

if(strcmp(*input, numbers[0]) == 0)
    printf("1 chosen");
if(strcmp(*input, numbers[1]) == 0)
    printf("2 chosen"); 
```

比较两个字符串，而不是将数字与字符串进行比较

或者您可以使用 sscanf 或 atoi 将输入字符串转换为 int

```
int i[2] = {1,2};
char input[3];
int num;

printf("Select option:");
fgets(input,3,stdin);

sscanf(input, "%d", &num);

if(num == i[0])
   printf("1 chosen");
else if(num == i[1]) 
   printf("2 chosen"); 
```

我没有编译它们，也许我缺少某些东西，但这是一般的想法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:10:43.633

使用`atoi`. 它会将您的字符串转换为整数

```
 int i[2] = {1,2};
    char input[3];
    printf("Select option:");
    fgets(input,3,stdin);

    if(atoi(input)==i[0]))
       printf("1 chosen");
    if(atoi(input)==i[1]))
       printf("2 chosen"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T11:14:24.483

使用 atoi 函数更好地将输入 char 转换为 int。

[http://www.cplusplus.com/reference/cstdlib/atoi/](http://www.cplusplus.com/reference/cstdlib/atoi/)

```
int i[2] = {1,2};
char input[3];
int opt=0;
printf("Select option:");
fgets(input,3,stdin);
opt = atoi(input); 
if(opt== i[0])
   printf("1 chosen");
if(opt == i[1])
   printf("2 chosen"); 
```

# java - Hibernate 实体映射

> ID：15568658
> 
> 赞同：0
> 
> 时间：2013-03-22T10:59:58.520
> 
> 标签：java, hibernate, one-to-many

我有实体单位，员工，我想映射到单位中的员工列表。

示例 SQL：

```
select e.*
from wfm.WFM_EMPLOYEE e
    join wfm.wfm_position2unit p2u on p2u.UNIT_POSITION_ID=e.unit_position_id
    join wfm.WFM_POSITION p on p.POSITION_ID=p2u.POSITION_ID
    join wfm.wfm_unit u on u.UNIT_ID=p2u.UNIT_ID
where u.unit_id = 337 
```

现在我可以通过“嵌套”@OneToMany 注释访问员工：

单位：

```
@Entity
@Table(name = "WFM_UNIT", schema = AppData.WFM_SCHEMA)
public class Unit implements Serializable {
    ...
    @OneToMany(mappedBy = "unit", fetch = FetchType.EAGER)
    private List<Position2unit> position2units;
    ...
} 
```

位置到单位：

```
@Entity
@Table(name = "WFM_POSITION2UNIT", schema = AppData.WFM_SCHEMA)
public class Position2unit implements Serializable {
    ...
    @ManyToOne(fetch = FetchType.LAZY, optional = true)
    @JoinColumn(name = "POSITION_ID")
    private Position position;

    @ManyToOne(fetch = FetchType.LAZY, optional = true)
    @JoinColumn(name = "UNIT_ID")
    private Unit unit;

    @OneToMany(mappedBy = "position2unit", fetch = FetchType.LAZY)
    private List<Employee> employees;
    ...
} 
```

员工：

```
@Entity
@Table(name = "WFM_EMPLOYEE", schema = AppData.WFM_SCHEMA)
public class Employee implements Serializable {
    ...
    @NotFound(action = NotFoundAction.IGNORE)
    @ManyToOne(fetch = FetchType.LAZY, optional = true)
    @JoinColumn(name = "UNIT_POSITION_ID")
    private Position2unit position2unit;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:50:31.930

我认为到目前为止最简单的解决方案是向 Unit 添加一个方法：

```
Collection<Employee> getEmployees() {
  final Collection<Employee> employees = new HashSet<Employee>();
  for (final Position2unit p2u : position2units) {
    employees.addAll(p2u.employees);
  }
  return employees;
} 
```

完全忘记映射。

# r - 如何根据其他列中的条件创建具有唯一值的列？

> ID：15568661
> 
> 赞同：0
> 
> 时间：2013-03-22T11:00:07.027
> 
> 标签：r, for-loop, conditional-statements, lapply

我有一个data.frame：

```
head(data)
    År                        Namn N_medlemmar
1 1938  Asea-personalens erk. Csk.        8796
2 1938 Bohuslän-Hallands erk. Csk.       73765
3 1938    Dala-Gäleborgs erk. Csk.       87053
4 1938     De dövstummas erk. Csk.         718
5 1938  Eskilstuna stads erk. Csk.       15657
6 1938       Gefle stads erk. Csk.        9316 
```

我想添加一个`Code`具有基于上述条件的唯一值的列`Name column`。例如：

```
 År                        Name N_medlemmar  Code
1 1938   Asea-personalens erk. Csk.        8796  1
2 1938  Bohuslän-Hallands erk. Csk.       73765  2
3 1939  Bohuslän-Hallands erk. Csk.       12392  2
4 1940     Dala-Gäleborgs erk. Csk.       87053  3
5 1941      De dövstummas erk. Csk.         718  4
6 1942   Eskilstuna stads erk. Csk.       15657  5
7 1943   Eskilstuna stads erk. Csk.        9316  5 
```

所以该`Code`列是一个以`Name`上面列为条件的唯一值。

```
dput(data)
structure(list(År = c(1938L, 1938L, 1938L, 1938L, 1938L, 1938L
), Namn = c("Asea-personalens erk. Csk.", "Bohuslän-Hallands erk. Csk.", 
"Dala-Gäleborgs erk. Csk.", "De dövstummas erk. Csk.", "Eskilstuna stads erk. Csk.", 
"Gefle stads erk. Csk."), N_medlemmar = c(8796L, 73765L, 87053L, 
718L, 15657L, 9316L)), .Names = c("År", "Namn", "N_medlemmar"
), class = "data.frame", row.names = c(NA, 6L)) 
```

我尝试循环但没有成功...`lapply`有什么建议吗？`for`最好的祝福！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:08:03.110

我想你要的是

```
data$Code <- as.integer(as.factor(data$Namn)) 
```

或者只是把它作为一个因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:09:10.173

或者你可以用 match 来做这样的事情......

```
data$Code <- match( data$Namn , unique(data$Namn)) 
```

# 编辑 - 关于`for`和`apply`在这种情况下

首先我想问一下你为什么在这种情况下如此热衷于使用`for`or`apply`循环？这听起来很像你有一个要求你使用循环的任务？如果是这种情况，当矢量化方法完全合适时，您应该回答您拒绝使用一种方法，从而获得额外的奖励。如果您*真的非常*需要出于某种奇怪的原因使用循环，那么实现此目的的众多示例之一可能是：

```
data$Code <- rep( NA , nrow(data) )
for( i in 1:nrow(data) ){
  data$Code[i] <- match( data$Namn[i] , unique(data$Namn))
} 
```

你明白为什么这本质上更糟吗？除了效率较低之外，您还必须进行更多的键入和索引才能获得相同的结果。简而言之，**不要这样做！**

我也真的建议你不要这样做（*在这种情况下*）......

```
data$Code <- unlist( lapply( data[,"Namn"] , function(x){ match( x , unique(data$Namn)) } ) ) 
```

*使用向量 Luke。*

# java - 通过向现有 ListView 添加片段来丢失数据

> ID：15568665
> 
> 赞同：0
> 
> 时间：2013-03-22T11:00:23.960
> 
> 标签：java, android, android-listview, fragment

我正在尝试使用页脚填充我的 ListView。出于这个原因，我创建了一个片段。但是我在将数据传递给片段时遇到问题。在不同的地方它工作得很好，就像我做的那样。

```
 listView1 = (ListView) findViewById(R.id.listView1);     

    MenueAdapter adapter = new MenueAdapter(MainActivity.this,
            R.layout.mainview_menue_item_row, data_Storage_news, 
            getWindowManager().getDefaultDisplay().getWidth());    

    Intent intent_onTv = new Intent(context,
            OnTvFragment.class);

    intent_onTv.putExtra("data_Storage_tv", data_Storage_tv);

    OnTvFragment frag = new OnTvFragment();
    frag.setArguments(intent_onTv.getExtras());
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();        
    ft.commit();    

    LayoutInflater inflater = getLayoutInflater();      
    View footer = inflater.inflate(R.layout.ontv_fragment, null);       

    getSupportFragmentManager().executePendingTransactions();

    listView1.addFooterView(footer);       
    listView1.setAdapter(adapter); 
```

Fragment 包含一个 ViewFlipper 并且在另一个活动中工作得很好。

任何人都知道我做错了什么，或者可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:55:00.693

将片段作为页脚添加到 ListView - 我的解决方案：

```
ListView.LayoutParams lp = new ListView.LayoutParams(ListView.LayoutParams.WRAP_CONTENT, ListView.LayoutParams.WRAP_CONTENT);        

    View footer = new View(listView1.getContext()); 

    footer = ((LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.on_tv_fragment_empty, null);        
    footer.setLayoutParams(lp);     

    OnTvFragment frag = new OnTvFragment();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();        
    ft.replace(R.id.ll, frag).commit();       
    getSupportFragmentManager().executePendingTransactions();

    listView1.addFooterView(footer);
    listView1.setAdapter(adapter); 
```

确保这`footer`是在膨胀一个空的 FrameLayout，例如：

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"     
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"   
    android:background="@layout/gradient_box"
    android:id="@+id/ll"
    /> 
```

避免以下错误： [单击列表项时如何进行片段事务？](https://stackoverflow.com/questions/13120413/how-to-make-fragment-transaction-when-clicked-on-a-listitem)

我的结果如下所示： ![在此处输入图像描述](../Images/62ae81307f12dcdd9b620dd67136b961.png)

希望这对任何人都有帮助:)

# c# - 带有 Nullable 的 Asp.Net MVC 部分视图 模型

> ID：15568670
> 
> 赞同：1
> 
> 时间：2013-03-22T11:00:29.607
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在尝试开发一个简单的局部视图：

```
@model Nullable<DateTime>
@if (Model == null)
{
    <span>Active</span>
}
else
{
    <span>Resigned on @Model.GetValueOrDefault().ToShortDateString()</span>                                    
} 
```

并从另一个角度使用它：

```
@Html.Partial("ViewTemplates/UserStatus",user.ResignDate) 
```

除非它是一个`Nullable<T>`.

我收到错误：

> 传递到字典中的模型项的类型为“System.Collections.Generic.List `1[Models.UserModel]', but this dictionary requires a model item of type 'System.Nullable`1[System.DateTime]”。

当然 user.ResignDate 是一个可以为空的日期时间。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:19:14.893

如果传递给 Partial 方法 (user.ResignDate) 的模型参数为 null，则 asp.net-mvc 将调用者视图的模型传递给 Partial 视图，您会收到错误消息。

如果您遵循约定并将 UserStatus 放入 DisplayTemplates 文件夹，我会建议您将 Partial 调用替换为[DisplayFor 方法](http://msdn.microsoft.com/en-us/library/ee407420%28v=vs.98%29.aspx)

```
@Html.DisplayFor(model => model.user.ResignDate, "UserStatus") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:27:34.410

请检查 user.ResignDate 的数据类型，它应该是 DateTime 不可为空的 DateTime

# spring - Spring 仅在已经为范围实例化时才获取 bean

> ID：15568671
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:00:29.733
> 
> 标签：spring, scope, javabeans, instance

嗨，我正在使用 Spring 3

我正在使用

```
applicationContext.getBeansOfType 
```

是否有可能只获取当前范围内已经实例化的 bean？

我不想实例化当前请求中尚未使用的 Bean。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:45:45.763

我认为不是，但你可以写一个，比如：

```
public static List<Object> getBeansInScope(Class<?> type, AbstractApplicationContext ctx, int scope) {
        List<Object> beans = new ArrayList<Object>();
        String[] names = ctx.getBeanNamesForType(type);
        RequestAttributes attributes = RequestContextHolder.currentRequestAttributes();

        for (String name : names) {
            Object bean = attributes.getAttribute(name, scope);
            if (bean != null) 
                beans.add(bean);
        }

        return beans;
    } 
```

这仅适用于请求和会话范围。

# linux - 在 ubuntu linux 服务器上安装 google wavebox 时出错

> ID：15568676
> 
> 赞同：0
> 
> 时间：2013-03-22T11:00:39.873
> 
> 标签：linux, clone

我正在尝试配置[http://waveinabox.net/](http://waveinabox.net/)的实例。在 linux 服务器中安装 wave box 时遇到错误

操作系统：Ubuntu 12.04.1 LTS

我使用了来自该站点的命令：[http ://www.waveprotocol.org/wave-in-a-box/setting-up](http://www.waveprotocol.org/wave-in-a-box/setting-up)

```
 $sudo apt-get install mercurial ant default-jdk mongodb eclipse
  $mkdir wave-development
  $cd wave-development 
```

当我输入这一行时问题就开始了

```
 $hg clone https://wave-protocol.googlecode.com/hg/ wave-protocol 
```

我收到错误（错误是：未`clone`找到命令）

我不太习惯 linux 命令，谁能告诉我可能是什么问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T21:58:50.123

you need to install mercurial - sudo apt-get install mercurial after installing try it.

# iphone - 连接时如何在两个字符串之间留出空格

> ID：15568677
> 
> 赞同：0
> 
> 时间：2013-03-22T11:00:43.730
> 
> 标签：iphone, nsstring, concatenation

我正在使用以下方式连接两个字符串

```
 NSString *firstString =@"Added Contnet To My Learning";
NSString *secondString = appDelegate.activity_Description;
appDelegate.activity_Description = [firstString stringByAppendingString:secondString]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:04:02.650

你可以这样做。

```
NSString *firstString =@"Added Contnet To My Learning";
NSString *secondString = appDelegate.activity_Description;
appDelegate.activity_Description = [NSString stringWithFormat:@"%@ %@", firstString, secondString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:03:07.300

你试过了吗？

```
 NSString *firstString =@"Added Contnet To My Learning ";
 // a space after the first string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:33:30.000

这是你可以用字符串做的所有方法

```
//1st Way
NSString *finalString = [NSString stringWithFormat:@"%@ %@",firstString,secondString];

//2nd Way
NSString *finalString = [firstString stringByAppendingFormat:@" %@",secondString];

//3rd way
NSArray *ary= [NSArray arrayWithObjects:firstString,secondString, nil];
NSString *finalString= [ary componentsJoinedByString:@" "]; 
```

按照这个[如何在iphone中连接两个字符串](https://stackoverflow.com/questions/16579543/how-to-concatenate-two-strings-in-iphone/16579565#16579565)

# wix - WiX：删除现有产品 + ADDLOCAL

> ID：15568678
> 
> 赞同：2
> 
> 时间：2013-03-22T11:00:48.953
> 
> 标签：wix, wix2

我正在使用 Wix 2。我正在使用`RemoveExistingProducts`，但想保留以前安装的功能。此外，我想`ADDLOCAL`通过命令行给出的参数添加新功能。但是，根据[这篇文章](http://msdn.microsoft.com/de-de/library/windows/desktop/aa370839%28v=vs.85%29.aspx) `ADDLOCAL`确实设置了`Preselected`标志。

因此`MigrateFeatureStates`不开火：

```
Skipping MigrateFeatureStates action: feature settings already made 
```

有没有可能同时使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:40:53.937

不，不是两者兼而有之。文档非常清楚`ADDLOCAL`（以及通过命令行属性进行的所有其他功能状态控制）接管选择管理器。不幸的是，它使得使用命令行来控制特性状态变得非常棘手。

# html - 防止缓存清单返回 404 后丢弃应用程序缓存

> ID：15568680
> 
> 赞同：0
> 
> 时间：2013-03-22T11:00:49.227
> 
> 标签：html, html5-appcache

我创建了一个 Web 应用程序并将其放置在我们的 Intranet Web 服务器上。如果 iPad 在 Intranet 网络上加载应用程序，则应用程序可以运行。如果我打开飞行模式，该应用程序将在离线模式下运行。

但是，我相信（而且我没有要测试的调试器），如果 iPad 然后连接到互联网，应用程序会尝试访问缓存清单，因为它看到它已连接到网络，但清单请求返回一个404，因为它不在 Intranet 上。然后应用程序缓存被丢弃，应用程序停止运行。

如果我说的是正确的，当清单返回 404 时，是否有某种方法可以减轻 appcache 被丢弃？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:33:58.697

幸运的是，我完全不正确。您确实可以从不同的网络环境中移动，并且该应用程序将继续运行。

我的问题是我的 web 框架将在生产模式下发布一些 javascript 文件的缩小版本，我没有将其包含在我的缓存清单中。

让我感到震惊的是，Chrome 在无法访问清单时会抛出错误，这在这种情况下显然是完全可以预料的。鉴于网络上的大部分资料都指向如果在缓存加载过程中发生错误，appcache 将被丢弃，我原以为这就是正在发生的事情。幸运的是，此特定错误不会影响离线模式。

# java - JSP - Twitter Bootstrap 模态表单处理

> ID：15568683
> 
> 赞同：0
> 
> 时间：2013-03-22T11:01:08.380
> 
> 标签：java, html, css, jsp, twitter-bootstrap

我想用jsp进行模态表单。我的问题是，按钮在另一个 div 中，因此 servlet '/user' 不会被渲染。

```
<div class="modal-body">
    <form class="form-horizontal" action="/user" method="post">
          <fieldset>
              <div class="control-group">
                 <!-- Text input-->
                 <label class="control-label" for="input01">Email:</label>
                      <div class="controls">
                           <input name="email" placeholder="email" class="input-xlarge" type="text"value="<%=request.getParameter("email")%>">
                     </div>
             </div>

             <div class="control-group">
                  <!-- Text input-->
                  <label class="control-label" for="input01">Password:</label>
                         <div class="controls">
                              <input name="password" placeholder="password" class="input-xlarge" type="text" value="<%=request.getParameter("password")%>">
                         </div>
            </div>

        </fieldset>
   </form>
</div> 
```

如何正确编写我可以使用其他 div 中的按钮提交表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:15:32.947

您可以在表单上放置一个 id 属性，在按钮的 onclick 事件上，您可以调用 document.forms["formId"].submit() 或 jQuery $('#formId').submit()

```
<form id="myForm" class="form-horizontal" action="/user" method="post"> //add id attr 
```

在你的按钮上试试这个：

```
<input type='button' value='submit' onclick='document.forms["myForm"].submit();'/> 
```

或使用 jQuery：

```
<input type='button' value='submit' onclick='$("#myForm").submit();'/> 
```

# php - 向用户提供 ical 文件以打开

> ID：15568685
> 
> 赞同：0
> 
> 时间：2013-03-22T11:01:17.033
> 
> 标签：php, javascript, ajax, icalendar

我创建了一个 HTML5 应用程序，允许用户下载 iCal 格式的日历条目。这些 iCal 是使用 PHP 创建的。直到今天，我的方法是使用 PHP 生成 iCal 文件并将其写入 Web 服务器上的硬盘。之后，我将此文件的 URL 传递给前端（JavaScript），以便可以使用`window.open()`命令打开它。

这种方法的缺点是在硬盘上创建了越来越多的文件。我知道必须有另一种方法，即向 PHP iCal 生成器发送的响应添加特定的标头。这是真的？

我尝试使用这些标题：

```
header('Content-type: application/force-download; charset=utf-8'); 
header('Content-Disposition: attachment; filename="eintrag.ics"'); 
```

直接调用PHP生成文件时，iCal文件会正确显示在浏览器中以供打开。但是当我从我的 HTML5 应用程序中使用 AJAX 调用这个 PHP 文件时，什么也没有发生。

我究竟做错了什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:08:32.517

AJAX 是用户浏览器和服务器之间的“幕后”通信。通过 AJAX 请求数据不会自动显示给用户，它只是将其传递给浏览器。然后，您负责处理该数据（在页面上显示、发送给用户等）。

在不了解您的架构的情况下，您可以尝试类似 (jQuery) 的方法：

```
$.get('ical/', { param1: 'val', param2: 'val'}, function(response) {
    // we can let the user decide to download the new ical
    message = 'Your iCal is ready, click <a href="' + response.icalPath + '">here to download it';
    $('.message').html(message);

    // or force the user's browser to download the ical file directly
    window.location.href = response.icalPath;
}); 
```

PHP：

```
// beep boop ... generate iCal

// return the new iCal path to the HTML5 app
return json_encode(array('success' => true, 'icalPath' => 'tmp/icals/generated.ical')); 
```

如果您真的不想将 iCal 存储在磁盘上，则可以使用不太灵活的解决方案，例如：

```
window.location.href = '/ical?param=1&param=2'; 
```

PHP 将读取 GET 参数，在内存中生成 iCal 并返回您之前指定的标头。

# jquery - KendoUI Grid 在从自动完成中选择时填充相邻单元格

> ID：15568686
> 
> 赞同：1
> 
> 时间：2013-03-22T11:01:20.440
> 
> 标签：jquery, kendo-ui, kendo-grid

我有一个自动完成设置，所有这些都适用于我网格中的一个单元格。

如何选择下一个相邻的`<td>`或`input`以便我可以用我指定的值填充它？

我知道我需要更改的第一件事是 id 需要继续输入。因此，这只是选择下一个单元格/输入的情况。

这是我的下拉代码：

```
function partNumberScanner(container, options)
{
  $('<input id="partEntry" class="k-input k-textbox" data-bind="value:' + options.field + '"/>')
  .appendTo(container);
  $('#partEntry').kendoAutoComplete({
    dataTextField: "idealForm",
    dataValueField: "Id",
    dataSource: {
      serverFiltering: true,
      transport: {
        read: {
          url: ROOT+"part/fetchParts",
          type: "POST",
          dataType: "json"
        }
      },
      error: function(e) {
        alert(e.errorThrown+"\n"+e.status+"\n"+e.xhr.responseText) ;
      },
      schema: {
        id: "id",

      }
    },
    change: function(e)
    {

    },
    minLength: 5,
    filter: "contains",
    placeholder: "Start typing...",
    change: function(e) {
      selectedPart = this.value();
      alert(this.element[0].id)

      $(this).next('td').val(selectedPart);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:17:55.793

将选择定义为：

```
select        : function (e) {
    var index = e.item.index();
    var item = this.dataItem(e.item.index());
} 
```

其中`index`是在 中选择的条目的编号，`AutoComplete`并且`item`包含来自 AutoComplete 中使用的 DataSource 的信息。

# jira - 在 JIRA 中自动更改自定义字段值

> ID：15568693
> 
> 赞同：0
> 
> 时间：2013-03-22T11:01:37.677
> 
> 标签：jira, jira-plugin

我在问题页面中有一个名为“*详细状态”的自定义字段。*测试人员验证问题后，他们会将此字段的值更改为“*准备部署*”。在我们将最新的代码部署到服务器后，这应该更改为“*部署后验证*”。

目前，每次部署后至少会出现 10-15 个问题，这需要开发人员手动转到每个问题并将自定义字段的值更改为“*部署后验证*”

有没有办法可以自动化这个？

我浏览了文档 - 我发现了进行[批量编辑](https://confluence.atlassian.com/display/JIRA/Modifying+Multiple+%28%27Bulk%27%29+Issues)的选项，但我的项目架构师根本不会听到任何手动干预。
事件侦听器不会达到目的，因为部署不是 Jira 事件而是外部流程。这可以使用脚本来完成吗？通过直接对 JIRA 表进行更新？

很抱歉听起来很模糊和无知，因为我对 JIRA 定制很陌生。任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:11:57.833

脚本可以使用 REST API 来更新问题中的自定义字段。

[从http://jira-python.readthedocs.org/en/latest/](http://jira-python.readthedocs.org/en/latest/) 或 [https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues#JIRARESTAPIExample-Editissues-](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues#JIRARESTAPIExample-Editissues-Examplesofupdatinganissueusingfields)开始使用字段更新问题的[示例](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues#JIRARESTAPIExample-Editissues-Examplesofupdatinganissueusingfields)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:02:38.813

听起来您的 QA 在开发过程中（在开发/测试/阶段环境中）采取行动来验证问题已得到解决，并在部署到生产环境后再次采取行动。如果这是真的，您可以修改您的工作流程以允许状态和转换通过发布功能自动设置字段。

如果 QA 点击“通过”，它会将问题发送到工作流程中，该操作会更新“详细状态”字段，如果他们点击“失败/重新打开”，它将连同您想要的相应状态一起发送回 Dev自定义字段。这将满足无人工干预的任务。

有几个免费插件可以实现这一点，并简化您的工作流程，使其反映您的开发实践。

# sql-server-2008 - 在 CLR 中操作字符串时出现奇怪的 CLR 结果

> ID：15568695
> 
> 赞同：0
> 
> 时间：2013-03-22T11:01:38.473
> 
> 标签：sql-server-2008, clr, bytearray

这有点难以描述，但我会试一试。

我有一些从 SQL Server 2008 中的 UDF 调用的 CLR 代码。主数据库和包含 CLR 代码和 UDF 的数据库具有不同的排序规则。

在 CLR 代码中，我正在操作 varchar 字符串，例如，转换为 byte[] 数组并再次转换回来。

问题是，当再次转换为 byte[] 数组 abd 时，它似乎使用了 Master 数据库的排序规则，尽管正如我所说，CLR 代码和 UDF 完全在应用程序数据库中并且没有参考曾经对主数据库进行过。

有没有办法强制 CLR 代码使用它所属的数据库的排序规则，而不是 Master 数据库？

我希望这很清楚。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:08:14.377

.Net 中的 System.String 不支持 SQL 排序规则 - 所有字符串都以 Unicode 格式存储，因此您遇到的问题几乎肯定是 byte[] 操作的结果。

# java - socket.io 的最佳 Java 服务器实现

> ID：15568700
> 
> 赞同：48
> 
> 时间：2013-03-22T11:01:55.553
> 
> 标签：java, socket.io

我想使用[socket.io将数据从服务器推送到浏览器，但项目是 java tomcat 之一，并且](http://socket.io/)*Github*中有很多实现用于`socket.io`. 他们中的大多数人说它们已被*弃用*或有更好的可用。任何人都可以建议我一个好的实现。

我看到很多关于使用`socket.io`. 我的要求是将不同的消息推送给不同的客户端。有人能指点我一些处理这些东西的好演示或教程吗？

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-05-23T10:45:14.140

作为作者，我建议在 Java 上尝试我的 SocketIO 服务器实现：

[https://github.com/mrniko/netty-socketio](https://github.com/mrniko/netty-socketio)

稳定和生产就绪的库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T19:33:03.933

我们在生产中使用这个：[Socket.IO-Java](https://github.com/Ovea/Socket.IO-Java)。我们已经根据我们的要求对其进行了定制。但在主要情况下，它足够好。

[我的同事在github](https://github.com/sciworth/Socket.IO-Java)中分享了定制版本。我们使用的是 Jetty 8，另一个 servlet 容器可能会出现问题。此外，当微软不支持 XP 时，我们考虑仅使用 WebSocket 实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-26T23:37:30.180

你可以试试这个：[https ://github.com/codeminders/socket.io-server-java](https://github.com/codeminders/socket.io-server-java)

此实现松散地基于其他答案中提到的旧 Socket.IO-Java 库。

它支持 Socket.IO 1.0+ 客户端。websocket 传输是使用 Jetty 9 实现的，但库的核心部分不依赖于 Jetty。如果需要，用 Tomcat 实现 websocket 传输应该不是很困难。

我试图保持 API 类似于 Node.JS Socket.IO 服务器 API。因此，要将消息发送到特定的套接字，您只需要调用`socket.emit()`

这是要在 SocketIO servlet 中调用的一小段代码：

```
on(new ConnectionListener() {
        public void onConnect(Socket socket)
        {
            try
            {
                socket.emit("welcome", "Welcome to Socket.IO Chat!");
            }
            catch (SocketIOException e)
            {
                socket.disconnect(true);
            }
       }
}); 
```

# iphone - 在网格视图中显示来自 url 字符串的图像

> ID：15568701
> 
> 赞同：0
> 
> 时间：2013-03-22T11:01:57.113
> 
> 标签：iphone, ios, gridview, nsstring

我有一个网格视图，我需要显示包含要显示的 URL 的字符串中的网格视图图像。请检查我收到错误的代码

```
- (void)viewDidLoad
{

_imageDatas=[[NSMutableArray alloc]init];
_imageDatas=[DelegateClass magazine].mg_art_of_sleeping;

NSLog(@"string %@",_imageDatas);

for(int z=0;z< [_imageDatas count]; z++){
 NSLog(@"url%@",[[_imageDatas objectAtIndex:z] _image_url]);

  }

 - (MMGridViewCell *)gridView:(MMGridView *)gridView cellAtIndex:(NSUInteger)index
 {

MMGridViewDefaultCell *cell = [[MMGridViewDefaultCell alloc] initWithFrame:CGRectNull];
cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", index];
cell.imageView.image =[UIImage imageNamed:[_imageDatas objectAtIndex:index]];
// cell.imageView.image crash the code

return cell;
 } 
```

cell.imageView.image 使代码崩溃并出现错误

```
2013-03-22 16:25:59.141 Magazine[3890:17c03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ArtOfSleeping pathExtension]: unrecognized selector sent to instance 0x887bb40'
*** First throw call stack:
(0x207c052 0x1ae6d0a 0x207dced 0x1fe2f00 0x1fe2ce2 0xd9c979 0xc716f9 0xd004014 0xc714bd 0xd004072 0x103f2d 0x1054c5 0xc951b3 0x66cc17 0x67f12d 0x59f15d 0x67efd2 0x66ccf1 0x673281 0x66cd17 0x676c5c 0x5fcfb9 0x5feea6 0x5fe580 0x20509ce 0x1fe7670 0x1fb34f6 0x1fb2db4 0x1fb2ccb 0x2318879 0x231893e 0xc56a9b 0x30b5 0x2fb5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:07:50.050

```
UIImage* myImage = [UIImage imageWithData: 
[NSData dataWithContentsOfURL: 
[NSURL URLWithString:[imageArray objectAtIndex:index]]]];

cell.imageView.image = myImage; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:37:37.437

不要使用 imageNamed 方法而不是使用 initWithContentOfFile

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:11:10.437

我认为它很有用：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[_imageDatas objectAtIndex:index]]];
 NSData *data = [NSData dataWithContentsOfURL:url];
 UIImage *img = [UIImage imageWithData:data]; 
```

# reflection - 如何通过反射获取 F# 类型缩写列表？

> ID：15568703
> 
> 赞同：2
> 
> 时间：2013-03-22T11:02:05.383
> 
> 标签：reflection, f#, units-of-measurement

如何通过反射获得 F# 类型缩写的列表？`Assembly.GetTypes`不返回它们，我在`Microsoft.FSharp.Reflection`. 我正在尝试获取所有类型的缩写`Microsoft.FSharp.Data.UnitSystems.SI.Unit`Names`和`Microsoft.FSharp.Data.UnitSystems.SI.UnitSymbols`

# asp.net-mvc - Html.ActionLink() 与标签

> ID：15568705
> 
> 赞同：3
> 
> 时间：2013-03-22T11:02:07.660
> 
> 标签：asp.net-mvc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:58:32.810

@Html.ActionLink 绑定到 MVC 路由定义中。它不仅仅是编写锚标记的助手，它使用路由来确定 href 的外观和结构。

通过使用 ActionLink，您可以确保根据 MVC 路由的配置方式呈现所有链接。

路由功能强大，可以避免使用大量查询字符串变量或隐藏字段来传递数据。

使用@Html.ActionLink，最终额外的努力可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:12:50.253

这是一个偏好问题。

`Html.ActionLink()`只是一个最终呈现`<a>`标签的 HTML Helper。

我更喜欢使用`<a>`标签。

# regex - 如何使用正则表达式选择特定数量的字符词

> ID：15568709
> 
> 赞同：0
> 
> 时间：2013-03-22T11:02:26.497
> 
> 标签：regex, text

我有如下文字。

```
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum 
has been the industry's standard dummy text ever since the fivec harword 1500s, when an unknown printer 
took a galley of type and scrambled it to make a type specimen fivec harword book. It has survived not
only five centuries, but also the leap into electronic typesetting, remaining essentially 
unchanged. It was popularised in the 1960s with the release of fivec harword Letraset sheets containing 
Lorem Ipsum passages, and more recently with desktop publishing software like Aldus 
PageMaker including versions of Lorem Ipsum. 
```

这是我需要的正则表达式：

1-选择五个字符的单词。

2-第一步后选择一个空间。

3-在第二步后选择七个字符。

它应该捕获所有`fivec harword`字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:09:20.513

使用这个：

```
\b\w{5}\s\w{7}\b 
```

**解释：**

```
The regular expression:

(?-imsx:\b\w{5}\s\w{7}\b)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  \w{5}                    word characters (a-z, A-Z, 0-9, _) (5
                           times)
----------------------------------------------------------------------
  \s                       whitespace (\n, \r, \t, \f, and " ")
----------------------------------------------------------------------
  \w{7}                    word characters (a-z, A-Z, 0-9, _) (7
                           times)
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:06:12.813

这应该可以解决问题

```
(^|\W)\w{5}\s\w{7}($|\W) 
```

`(^|\W)`字符串或非单词字符的开头。

`\w{5}`一串 5 个单词字符

`\s`空间

`\w{7}`一串 7 个单词字符

`($|\W)`字符串结尾或非单词字符

如果您特别希望字符串周围有空格（而不是标点符号等），请将两者都替换`\W`为`\s`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:15:44.687

试试这个

```
\b[a-zA-Z]{5}\s[][a-zA-Z]{7}\b 
```

\b 表示边界

[a-zA-Z] 所有 Alpha 投注

{5} 5 个字符，前面的表达式

\s 单个空格

# jquery - 使用 AJAX 提交动态创建的表单

> ID：15568714
> 
> 赞同：0
> 
> 时间：2013-03-22T11:02:32.020
> 
> 标签：jquery, ajax

我使用 AJAX POST 使用 jQuery 提交静态表单，它工作得很好。

但是，在调用之后，我将表单内部替换为第一个 AJAX 调用的结果。之后，再次发布表单将不起作用。但为什么？

这是我的表格：

```
 <form>
      <div id="optionForm">
        Just some SELECT menus
      </div>        
    </form> 
```

这就是我发布表单并替换表单内部的方式（使用一些 SELECT 菜单）：

```
<script>
    jQuery(document).ready(function() {
        $("select").change(function() {
            var data = $('form').serialize();
            $.post("/test/Update.do", data, function(data) {
                $("#optionForm").html(data);
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:05:36.883

您的问题并不完全清楚，但我猜您所指的选择*在*表格中？

`$('select').change`只会将更改侦听器绑定到`$('select')`执行时找到的元素。当您替换整​​个表单时，您会破坏旧的选择并创建新的选择，这些选择没有绑定任何侦听器。改用委托事件：

```
$('#optionForm').on('change', 'select', function() {
    // post...
}); 
```

# sql - SQL：如何在 TSQL 中将行转换为列

> ID：15568715
> 
> 赞同：0
> 
> 时间：2013-03-22T11:02:33.090
> 
> 标签：sql, sql-server, tsql, pivot

这是表结构和示例数据

```
create table #tmp ( Id int, Name varchar(100))
insert into #tmp (Id,Name)
Values (1,'Add')
insert into #tmp (Id,Name)
Values (2,'Update')

insert into #tmp (Id,Name)
Values (3,'Delete') 
```

和预期的结果应该是。

```
Add  Update  Delete
===  ======  ======
1    2       3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:06:01.783

有几种方法可以将数据从行转换为列。

如果您的数据库有一个`PIVOT`函数，那么您可以使用以下代码来透视数据：

```
select [Add], [Update], [Delete]
from
(
  select id, name
  from #tmp
) src
pivot
(
  max(id)
  for name in ([Add], [Update], [Delete])
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c8a16/5)。

或者您可以使用带有`CASE`表达式的聚合函数：

```
select 
  max(case when name = 'Add' then id end) [Add],
  max(case when name = 'Update' then id end) [Update],
  max(case when name = 'Delete' then id end) [Delete]
from #tmp 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/c8a16/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:06:18.723

请试试：

```
SELECT [Add], [Update], [Delete]
    FROM (select * from #tmp) up 
        PIVOT (sum(id) FOR Name IN ([Add], [Update], [Delete])) AS pvt 
```

# python - virtualenv：在 Mac 上使用 Pip 安装后找不到命令

> ID：15568718
> 
> 赞同：8
> 
> 时间：2013-03-22T11:02:45.403
> 
> 标签：python, macos, virtualenv, pip, homebrew

我正在尝试在我的 Mac 上安装 VirtualEnv。我已经用 brew 安装了 Python 和 Pip。运行 pip install virtualenv 后，当我尝试使用它时，我得到：

```
bash: "virtualenv: command not found" 
```

我不确定 virtualenv 安装在哪里。我的 PATH 环境变量包含：

`/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/usr/X11/bin`

我正在使用：Mac Os 10.7.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T22:43:34.050

我遇到了类似的问题。

您需要做的是将软件包安装位置的路径名添加到您的 .profile 文件中。查看 virtualenv 包的安装位置——在我的例子中是 /Users/ianloke/Library/Python/2.7/bin。然后将此路径名附加到 PATH 环境变量。

# php - PHP Mailer 表单 - 标记为垃圾邮件

> ID：15568731
> 
> 赞同：-2
> 
> 时间：2013-03-22T11:03:29.890
> 
> 标签：php, email-spam

我在 php 中构建了一个邮件表单，它允许我输入一个电子邮件地址，它会直接向输入的地址发送一封电子邮件，这是为了节省大量时间，因为我必须发送数千。php如下：

```
<?php
{
$to = $_POST['contactEmail'];
$subject = "UK Exporters - Buyers of Commercial Vehicles";
$headers = "Content-type:text/html;charset=iso-8859-1";

$message = 
"
<html><head></head><body style='font-family: arial;'>      
<span style='font-weight: bold;'>To whom it may concern,</span><br /><br />

At UK Exporters, we are buyers of Scanias, Volvos, Mercedes, Renaults, DAFs.<br /> 
Runners and non-runners.<br />
4 X 2’s, 8 x 4’s, 6 x 2’s.<br /><br />

We need your old stock for export orders. Top prices paid. For export orders. If you     have any items that you believe we would be interested in purchasing then please reply and let me know. Thank you for reading this email, we hope to hear from you soon.<br /><br />

Kind regards,<br /><br />

Sam<br />
UK Exporters<br /><br />
<img src='http://uk-exporters.co.uk/emailer/card.jpg' />
</body>
</html>"
; 

mail($to, $subject, $message, $headers);
echo "Another bites the dust! :D<br /><a href='http://uk-exporters.co.uk/emailer'>Send     another</a>"?>
<?php  }
?> 
```

我不是 php 专家，因此将不胜感激，我还列出了它被标记为垃圾邮件的原因：

```
Content analysis details:   (5.5 points, 5.0 required)

pts rule name              description
---- ---------------------- --------------------------------------------------
-0.7 RCVD_IN_DNSWL_LOW      RBL: Sender listed at http://www.dnswl.org/, low
                        trust
                        [82.197.130.210 listed in list.dnswl.org]
 0.0 HTML_MESSAGE           BODY: HTML included in message
 1.8 HTML_IMAGE_ONLY_08     BODY: HTML: images with 400-800 bytes of words
 1.1 MIME_HTML_ONLY         BODY: Message only has text/html MIME parts
 1.3 RDNS_NONE              Delivered to internal network by a host with no rDNS
 2.0 MIME_HEADER_CTYPE_ONLY 'Content-Type' found without required MIME
                            headers 
```

电子邮件会发送得非常好，直到我尝试将图像连同它一起发送，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:10:41.850

你的分析细节很清楚。您需要通过添加以下内容使您的标题更适合您的消息：

```
 #For 'Content-Type' found without required IME headers
 $headers .= "MIME-Version: 1.0" . "\r\n"; 
```

似乎您在标头中缺少 FROM Address

```
 $headers  .= 'From: from@email.com' . "\r\n" . 
```

有关邮件标题的更多信息，请阅读[此](http://rob.sun3.org/archives/107)内容。

# javascript - CKEditor 内联选择换行

> ID：15568732
> 
> 赞同：0
> 
> 时间：2013-03-22T11:03:30.623
> 
> 标签：javascript, ckeditor

我正在寻找一种将带有属性的内联 span 元素添加到选择中的方法。困难的部分是让它处理通过多个块级元素的选择。

我正在查看 StyleCombobox 的源代码并找到了这一行。

```
var style = styles[ value ],
elementPath = editor.elementPath();
editor[ style.checkActive( elementPath ) ? 'removeStyle' : 'applyStyle' ]( style ); 
```

这样，它已经适用于多个块级元素。

唯一的事情是我想将属性应用于围绕不同块级元素的多个选择而不是应用样式元素所做的跨度。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:24:45.263

我用这个作为解决方案。确实可以设置属性和元素类型。这没有在 api 中定义。我在 CKEditor 3.0 api（旧版本）中找到了这个

```
var style = new CKEDITOR.style({attributes: {name:"changed"}});
editor.applyStyle(style); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T10:16:58.707

针对您的问题的最新解决方案。

**获取选定文本：**

```
editor.getSelection().getSelectedText(); 
```

**放置标签和属性**

```
editor.applyStyle(new CKEDITOR.style({
        element : 'span', 
        attributes : {'class':'YourClass','data-Otherattr':'otherattrvalue'}, 
        style : {'background-color':'gray'} 
    });
); 
```

# ios - 需要有关使用凭据调用 REST Web 服务的帮助

> ID：15568740
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:03:54.673
> 
> 标签：ios, objective-c, nsurlconnection, restkit, afnetworking

在我当前的项目中，我需要调用一个基于 REST 的 Web 服务，我的同事创建了一个简单的 Web 服务（nodeJS 和 express 框架），它以 json 格式返回数据。我成功地使用`NSUrlConnection`. 现在我的同事将身份验证应用于服务，首先我尝试使用`NSUrlConnection`然后[AFNetworking](https://github.com/AFNetworking/AFNetworking)然后[RestKit](http://restkit.org)但没有成功。

RestKit 的搜索教程很旧（restkit 版本 0.10）或没有可用的身份验证教程，我想要做的就是调用一个简单的基于 REST 的带有凭据的 Web 服务。需要帮助挣扎了两天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:16:39.193

显然，Apple 的本机 HTTP 方法已经回答了这个问题。我不确定您在使用 AFNetworking 时遇到了什么问题，但在[这里](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.h#L223-L243)的 AFHTTPClient 中，您显然可以调用其中任何一个

```
- (void)setAuthorizationHeaderWithUsername:(NSString *)username
                                  password:(NSString *)password;

- (void)setAuthorizationHeaderWithToken:(NSString *)token; 
```

取决于您的网络服务。由于 RestKit 是建立在 AFNetworking 之上的，它`RKObjectManager`有一个`httpClient`属性是`AFHTTPClient`show 的一个实例，你也可以调用上面的方法（从[这里](https://github.com/RestKit/RestKit/blob/development/Code/Network/RKObjectManager.h#L275-L292)）。

然后你可以打电话

```
- (void)postPath:(NSString *)path
      parameters:(NSDictionary *)parameters
         success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
         failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure; 
```

从[这里](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.h#L377-L390)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:13:09.040

要使用 RestKit 0.20 处理 GET/POST 请求/响应，您可以按照以下顺序：-

首先使用基本服务器 URL 配置 RKObjectManager ：-

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:baseUrl];
[manager.HTTPClient setDefaultHeader:@"Accept" value:RKMIMETypeJSON];
manager.requestSerializationMIMEType = @"application/json"; 
```

由于 RestKit 总是处理请求和响应的对象，因此您必须创建一个具有您期望响应的所有参数的对象。

```
@interface AuthenticationRequest : NSObject
@property (nonatomic, copy) NSNumber *userName;
@property (nonatomic, copy) NSString *password;
@end

@interface AuthenticationResponse : NSObject
@property (nonatomic, copy) NSNumber *token;
@property (nonatomic, copy) NSString *expiryDate;
@property (nonatomic, copy) NSString *userId;
@end 
```

然后使用服务器 JSON 响应中的键为本地对象中的实例变量配置请求和响应映射。

注意：仅在 POST 或 PUT 请求的情况下配置请求映射。

```
RKObjectMapping *requestMapping = [RKObjectMapping mappingForClass:[AuthenticationRequest class]];
[requestMapping addAttributeMappingsFromDictionary:@{
                @"userName": @"userName",
                @"password" : @"password",
            }];

RKObjectMapping *responseMapping = [RKObjectMapping mappingForClass:[AuthenticationResponse class]];
[responseMapping addAttributeMappingsFromDictionary:@{
                @"TOKEN": @"token",
                @"expiryDate" : @"expiryDate",
                @"USERID": @"userId"
            }]; 
```

然后创建一个响应描述符，该描述符将根据您传递的 pathPattern 值执行服务器 JSON 对象与您的本地对象的映射。

```
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping  objectClass:[AuthenticationResponse class] rootKeyPath:nil]
[manager addRequestDescriptor:requestDescriptor];
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mapping pathPattern:<rest of the path excluding the baseURL> keyPath:nil statusCodes:nil];
    [manager addResponseDescriptor:responseDescriptor]; 
```

现在通过以下方式在服务器上执行 GET 请求：-

```
[manager getObjectsAtPath:(NSString *)<rest of the path excluding the baseURL>              parameters:(NSDictionary *)parameters
                 success:(void (^)(RKObjectRequestOperation *operation, RKMappingResult *mappingResult))success
                 failure:(void (^)(RKObjectRequestOperation *operation, NSError *error))failure]; 
```

或通过以下方式在服务器上执行 POST 请求：-

```
[manager postObject:AuthenticationRequest
              path:<rest of the path excluding the baseURL>
           success:(void (^)(RKObjectRequestOperation *operation, RKMappingResult *mappingResult))success
           failure:(void (^)(RKObjectRequestOperation *operation, NSError *error))failure]; 
```

成功和失败块将保留您对响应的处理。

如需更多帮助，您可以参考来自 RestKit 的以下链接：-

```
https://github.com/RestKit/RKGist/blob/master/TUTORIAL.md 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:18:45.167

在 NSURLConnectionDelegate

> *   (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;

方法将在那里，它将帮助您进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:28:54.470

> credential = [NSURLCredential credentialWithUser:userName password:passWord persistence:NSURLCredentialPersistenceNone];
> 
> [[挑战发件人] useCredential:credential forAuthenticationChallenge:challenge];

# asp.net - IIS 7.5 自定义重定向

> ID：15568743
> 
> 赞同：0
> 
> 时间：2013-03-22T11:04:01.083
> 
> 标签：asp.net, iis-7.5

原来的问题变得多余了。问题是 IIS7.5 超出了 aspdotnetstorefront 处理重定向到错误页面的方式

问题是如何让 IIS7.5 像 IIS6 一样处理重定向

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:31:07.907

我认为您需要某种 url 重定向..

这是可以帮助您的帖子，

[http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx](http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)

另一个是

[http://www.sslshopper.com/iis7-redirect-http-to-https.html](http://www.sslshopper.com/iis7-redirect-http-to-https.html)

希望能帮助到你。干杯。

# c# - 使用 NuGet.targets 创建 Nuget 包

> ID：15568751
> 
> 赞同：4
> 
> 时间：2013-03-22T11:04:38.357
> 
> 标签：c#, nuget

我有一个使用 Nuget 进行包管理的 C# 项目。我启用了包还原，因此它创建了`.nuget`文件夹。然后我想为这个项目创建一个 Nuget 包。当我处于发布模式时，我可以在文件夹中创建 nuget`.nuspec`文件`.nuget`并修改文件以允许创建包并上传到画廊吗？`Nuget.targets`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:45:32.590

你可以这样做。或者，您可以在构建后事件中使用 nuget.exe pack 命令（更多详细信息 @ [http://docs.nuget.org/docs/reference/command-line-reference#Pack_Command](http://docs.nuget.org/docs/reference/command-line-reference#Pack_Command)）或在 csproj 文件中使用 true。

# c# - XML记录到C#中的数组

> ID：15568753
> 
> 赞同：0
> 
> 时间：2013-03-22T11:04:58.640
> 
> 标签：c#, xml, arrays

我整个早上都在尝试，但似乎无法正常工作。我有一个如下的 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Details>
  <cityItems>
    <city>Amsterdam</city>
    <city>New York</city>
  </cityItems>
  <streetItems>
    <street>Mainstreet</street>
    <street>Secondstreet</street>
  </streetItems>
</Details> 
```

我试图让输出有点像这样；

```
string[] cities = { "Amsterdam", "New York" };
string[] streets = { "Mainstreet", "Secondstreet" }; 
```

街道和城市没有相互联系或任何东西。我似乎无法在互联网上找到正确的示例来使其正常工作。

你能帮我或指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:08:58.323

我已经更改了您的 xml，以便它具有正确的关闭节点`</cityItems>`

```
var xml = XDocument.Parse(str);

Func<string, string[]> readAllCities = 
                            nodeName => 
                                     xml.Descendants(nodeName)
                                        .SelectMany(node => node.Elements("city")
                                                                .Select(v => v.Value))
                                        .ToArray();

string[] streets  = readAllCities("streetItems");
string[] cities  = readAllCities("cityItems"); 
```

我将保留旧版本的代码副本，以便您可以选择更好的版本并将其更舒适地集成到您的解决方案中

```
string[] cities = xml.Descendants("cityItems")
                     .SelectMany(node => node.Elements("city")
                                             .Select(v => v.Value))
                     .ToArray();

string[] strets = xml.Descendants("streetItems")
                     .SelectMany(node => node.Elements("city")
                                             .Select(v => v.Value))
                     .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:12:21.687

我猜你需要使用 LINQ to XML 并将结果循环到数组中。这里有一些东西可以为你指明正确的方向

```
 XDocument xdoc = XDocument.Load("data.xml");

   //Run query
    var lv1s = from lv1 in xdoc.Descendants("level1")
       select new { 
           Header = lv1.Attribute("name").Value,
           Children = lv1.Descendants("level2")
       }; 
```

# android - 单击通知按钮后如何关闭状态栏/通知面板

> ID：15568754
> 
> 赞同：31
> 
> 时间：2013-03-22T11:04:59.223
> 
> 标签：android, notifications, statusbar

我浏览了 Stackoverflow 并看到有人问过这个问题，但我没有找到任何解决方案。

我有一个带有 2 个按钮的自定义通知。我希望在按下该通知上的按钮后关闭状态栏面板，但不知道如何操作。如果我按下通知本身（即 contentIntent），则面板会关闭，这也是我想要的按钮。

这是我的通知代码：

```
Notification notification = new Notification(R.drawable.icon, "Service running", System.currentTimeMillis());
notification.flags |= Notification.FLAG_ONGOING_EVENT;
notification.contentIntent = openIntent;
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification_layout);

contentView.setOnClickPendingIntent(R.id.button1, stopIntent);
contentView.setOnClickPendingIntent(R.id.button2, addIntent);

notification.contentView = contentView;

notificationManager.notify(NOTIFICATION_ID, notification); 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-12-06T09:36:33.917

使用以下两行代码折叠通知栏。

```
Intent it = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
context.sendBroadcast(it); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:38:55.207

好的，我找到了解决方案。它不是公共 API，但它可以工作（目前）：

```
Object sbservice = c.getSystemService( "statusbar" );
                    Class<?> statusbarManager = Class.forName( "android.app.StatusBarManager" );
                    Method hidesb = statusbarManager.getMethod( "collapse" );
                    hidesb.invoke( sbservice ); 
```

为了这个工作

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR"/> 
```

需要

# java - tomcat上的logback配置

> ID：15568757
> 
> 赞同：2
> 
> 时间：2013-03-22T11:05:08.207
> 
> 标签：java, tomcat, logback

我在 tomcat (7.0.37) 上使用 Logback。我想配置 logback，它可以为我编写 Web 可访问的日志文件，但我什至可以将它配置为在控制台上写入。我无法在控制台上格式化日志消息。它总是以默认格式和异常返回给我。

`%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n`

这是我的 logback-access.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true">
    <statusListener class="ch.qos.logback.core.status.OnConsoleStatusListener" />

    <appender name="RootFileAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>testing</file>
        <append>true</append>

        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <fileNamePattern>testing.%i</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>12</maxIndex>
        </rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>1MB</maxFileSize>
        </triggeringPolicy>

        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
            <layout class="ch.qos.logback.classic.html.HTMLLayout">
              <pattern>%d{yyyy-MM-dd HH:mm:ss} %m%n</pattern>
            </layout>
        </encoder>
    </appender>

    <appender name="RootConsoleAppender" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d{yyyy-MM-dd HH:mm:ss} %-6level- %logger{36}: %msg%n</pattern>
        </encoder>
    </appender>

    <appender-ref ref="RootFileAppender"/>
    <appender-ref ref="RootConsoleAppender"/>
</configuration> 
```

使用此配置，每次当我的服务器收到 http 请求时，我都会收到异常，如下所示：

```
18:08:19,951 |-ERROR in ch.qos.logback.core.ConsoleAppender[RootConsoleAppender] - Appender [RootConsoleAppender] failed to append. java.lang.ClassCastException: ch.qos.logback.access.spi.AccessEvent cannot be cast to ch.qos.logback.classic.spi.ILoggingEvent
    at java.lang.ClassCastException: ch.qos.logback.access.spi.AccessEvent cannot be cast to ch.qos.logback.classic.spi.ILoggingEvent
    at  at ch.qos.logback.classic.PatternLayout.doLayout(PatternLayout.java:60)
    at  at ch.qos.logback.core.encoder.LayoutWrappingEncoder.doEncode(LayoutWrappingEncoder.java:134)
    at  at ch.qos.logback.core.OutputStreamAppender.writeOut(OutputStreamAppender.java:188)
    at  at ch.qos.logback.core.OutputStreamAppender.subAppend(OutputStreamAppender.java:212)
    at  at ch.qos.logback.core.OutputStreamAppender.append(OutputStreamAppender.java:103)
    at  at ch.qos.logback.core.UnsynchronizedAppenderBase.doAppend(UnsynchronizedAppenderBase.java:88)
    at  at ch.qos.logback.core.spi.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:48)
    at  at ch.qos.logback.access.tomcat.LogbackValve.invoke(LogbackValve.java:182)
    at  at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at  at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at  at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at  at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at  at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:10:29.147

Logback-access 用于访问日志。Logback-access 与 logback-classic 有不同的意图。因此，在 logback-access 配置文件中，您需要使用`PatternLayoutEncoder`“ch.qos.logback.access **”**包而不是“ch.qos.logback.classic **.encoder** ”包。

例如，写：

```
<appender name="RootConsoleAppender" class="ch.qos.logback.core.ConsoleAppender">
  <encoder class="ch.qos.logback.access.PatternLayoutEncoder">
    <pattern>%clientHost %l %user %date "%r" %statusCode %bytesSent</pattern>
  </encoder>
</appender> 
```

另请参阅可用于[**logback-access** PatternLayout](http://logback.qos.ch/manual/layouts.html#AccessPatternLayout)的列表转换词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-14T12:46:05.493

我在寻找异常解决方案时发现了这个主题

```
ch.qos.logback.classic.AsyncAppender - Appender failed to append. java.lang.ClassCastException: ch.qos.logback.access.spi.AccessEvent cannot be cast to ch.qos.logback.classic.spi.ILoggingEvent 
```

这似乎是众所周知的问题，在这里报告：[https ://github.com/qos-ch/logback/pull/185](https://github.com/qos-ch/logback/pull/185)

**长话短说**

`AsyncAppender`不适用于`AccessEvent`哪些是tomcat的**默认访问日志**。

# c# - 通过基类使用继承类的方法

> ID：15568765
> 
> 赞同：0
> 
> 时间：2013-03-22T11:05:35.073
> 
> 标签：c#, inheritance, methods, call, parent

所以我无法在任何地方找到答案。我有一个实体类，我从中创建游戏中的所有角色。eg：玩家继承实体。

现在我想做的是从实体类调用 Player 中的“更新”方法。这可能吗？因为我需要为我现在创建的每个新实体类型执行此操作：

```
 foreach (Entity entity in entityList) {
                if (entity is Zombie) {
                    Zombie zombie = (Zombie)entity;
                    zombie.Update();
                }
                //new character here
            } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:07:39.270

如果“更新”的概念适用于所有实体，您可以创建`Update`一个虚函数`Entity`并让它`Player`覆盖它。然后，您的内部成员函数`Entity`只需调用`Update()`特定`Entity`对象并让调用动态分派：

```
foreach (Entity entity in entityList) { entity.Update(); } 
```

如果`Update()`对所有 s 都没有意义`Entity`，那么将它们作为虚函数`Entity`会污染该类的接口，在我看来，您的选择是正确的。

如果您想避免动态向下转换，您也可以考虑使用[访问者模式。](http://en.wikipedia.org/wiki/Visitor_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:07:24.167

覆盖`Update()`子类中的方法。然后，只需调用`entity.Update()`任何遇到的实体。这就是所谓的多态性。

# android - Android 数据存储，何时使用 SqlLite，何时使用 JSON，Linq 替代方案

> ID：15568767
> 
> 赞同：4
> 
> 时间：2013-03-22T11:05:39.100
> 
> 标签：android, json, performance, sqlite

我使用 .Net 和 C# 与 webdev 有几年的经验......我真正喜欢的一个功能是用于查询数据的 linq-expressions.. Android 有什么类似的东西可以用来查询 JSON 或反对SqlLite 数据库？（我想我正在寻找一个类型化的表达式/查询框架）。

对于我的下一个问题.. 我应该使用 JSON 方法和 SQLLite 方法中的哪一种.. 什么时候？我知道这已经被问了一百万次了..但似乎没有任何严格的答案..

SQLLite 是否用于更复杂的查询，当我有更多的数据时，而使用 JSON 时有更少量的数据并且不需要太多的查询？

我可以将所有 JSON 数据存储在内存中以便更快地读/写访问吗？..因为我听说将它存储在存储/磁盘上可能是一个缓慢的过程。

但另一方面，我也听说 SQLLite 通常很慢......

最后..当我们谈到“慢”时，它是慢吗，单次读/写查找整个应用程序几毫秒，还是与执行查询和快速处理的内存数据库相比慢如同闪电

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T11:28:49.363

> 何时使用 SQLite

`SQLite`是如何保存数据、如何保护数据的一种形式。通常，如果您想存储更大的数据量并快速访问它们（并且如果这些数据是“敏感的”），`SQLite`这是一个不错的选择。因此，我不同意您`SQLite`的缓慢选择，我猜绝对不是。

我有`SQLite`大约有 650 000 条记录的数据库，并且性能仍然很智能（有时需要使用索引）。

> 何时使用 JSON

`JSON`是为人类可读的数据交换而设计的轻量级数据结构，主要是与语言无关的。如果您想通过网络发送数据（将数据发送到远程服务器等），这是一个很好的选择（也许是最好的选择），但我认为对于数据持久化不是很好，而且它也不像 SQLite 那样安全。

通常你应该比较`JSON`，`XML`但你不能比较 SQLite 和 JSON，这是两个不同的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T11:10:07.440

大概的概念

SqlLite：[用于本地存储](http://www.vogella.com/articles/AndroidSQLite/article.html)

JSON：[对于服务器端存储](http://www.vogella.com/articles/AndroidJSON/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:10:45.567

比较 SQLite 和 JSON 是没有意义的。一种是存储解决方案，另一种是数据格式。

在决定选择哪种存储解决方案（SQLite、首选项、文件系统......）之前，您可能应该阅读官方指南：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

如果你想使用 SQLite 持久性，你可以使用一些第三方 ORM 来简化查询（例如[ORMLite](http://ormlite.com/sqlite_java_android_orm.shtml)是最流行的）

# web-services - SOAP 请求不是由第一个 body 子元素的 QName 分派的

> ID：15568768
> 
> 赞同：0
> 
> 时间：2013-03-22T11:05:41.533
> 
> 标签：web-services, soap, wsdl, wso2, wso2esb

我有一个用这个[WSDL](http://pastebin.com/8BUStH03)描述的服务。当使用此[请求](http://pastebin.com/b0FBHwSC)`createService`调用它的操作时，一切都很好。对于此服务，已在 WSO2 ESB 4.6.0 上创建了代理服务。[这](http://pastebin.com/ccWjNvz0)是 ESB 为代理服务生成的 WSDL。当我尝试使用soapUI向代理服务发送相同的请求时，会出现以下错误：

> 未找到操作的端点参考 (EPR) 是 /services/test.testHttpSoap11Endpoint 和 WSA Action = 。如果此 EPR 以前可以访问，请联系服务器管理员。

使用 ESB 的代理服务测试工具发送此请求的正文我没有问题。我认为是因为这个工具使用 WS-Addressing 来发送它。如果端点 URL 附加了 .soapUI，请求也会顺利发送`?createRequest`。根据这篇[文章](http://wso2.org/library/176)，问题的原因是 SOAPMessageBodyBasedDispatcher。由于某种原因，它无法通过 SOAP 主体元素的第一个子元素的 QName 识别目标操作。但我不明白为什么 SOAPMessageBodyBasedDispatcher 在我的情况下搞砸了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:40:55.273

WSO2 ESB 4.6.0 和更早版本的主要区别在于 WSO2 ESB 4.6.0 默认启用直通传输 (PTT)。PTT 用于在 WSO2 ESB 中实现非常高的性能提升，您可以在此处找到一些数字[http://wso2.org/library/articles/2013/01/esb-performance-65](http://wso2.org/library/articles/2013/01/esb-performance-65)。

您的用例的主要问题是它期望 SOAPMessageBodyBasedDispatcher 调度操作名称。SOAPMessageBodyBasedDispatcher 构建消息并使用第一个孩子的本地名称来调度此操作被认为非常昂贵，因此目前在 PPT 中不支持。目前，您可以将预期的 SOAPAction 作为 HTTP 标头发送来解决此问题。在这个线程中，我提供了一些其他解决方案[Error accessesing published WS proxy in WSO2 ESB 4.6: EPR not found](https://stackoverflow.com/questions/15544406/error-accesing-published-ws-proxy-in-wso2-esb-4-6-epr-not-found/15556669#15556669)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:11:56.267

更改 httpGetProcessor 将无济于事，您必须更改 transportSender 和 transportReceiver 配置。您可以注释掉现有的 PTT transportSender/transportReceiver 并取消注释 axis2.xml 文件上的 NHTTP transportSender/transportReceiver 配置。

这就是您在 ESB 4.6.0 上所拥有的

```
<transportSender name="http" class="org.apache.synapse.transport.passthru.PassThroughHttpSender">
    <parameter name="non-blocking" locked="false">true</parameter>
</transportSender>

<transportReceiver name="http" class="org.apache.synapse.transport.passthru.PassThroughHttpListener">
    <parameter name="port" locked="false">8280</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>       
    <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.PassThroughNHttpGetProcessor</parameter>      
</transportReceiver> 
```

你需要的是

```
<transportReceiver name="http" class="org.apache.synapse.transport.nhttp.HttpCoreNIOListener">
    <parameter name="port" locked="false">8280</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>
    <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor</parameter>
    <parameter name="disableRestServiceDispatching" locked="false">true</parameter>
</transportReceiver>

<transportSender name="http" class="org.apache.synapse.transport.nhttp.HttpCoreNIOSender">
    <parameter name="non-blocking" locked="false">true</parameter>
</transportSender> 
```

# android - AdMob：第一次布局后无法获取 viewWidth

> ID：15568772
> 
> 赞同：1
> 
> 时间：2013-03-22T11:05:56.207
> 
> 标签：android, width, admob, adview

我通过画布添加 AdMob：

```
public void drawAddMob(final Activity a){
a.runOnUiThread(new Runnable(){
public void run(){
LinearLayout ll = new LinearLayout(a);
ll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
adView = new AdView(a, AdSize.BANNER,  "a15140cd49b6e7b");  
adView.setLayoutParams(new LayoutParams(320,50));
AdRequest request = new AdRequest();
adView.loadAd(request);
ll.addView(adView);
ll.draw(canvas);
}});
} 
```

但是当它加载时我得到这样的错误：

```
 W/webcore(347): Can't get the viewWidth after the first layout 
```

及其重新加载-再次请求admob，每次我收到此错误，3次后它停止并写入“onRecieveAd（）”但它没有出现在屏幕上并且仍然在它之前我得到错误

# jquery - 错误对象不支持 jquery 1.9 中的属性或方法“每个”

> ID：15568779
> 
> 赞同：1
> 
> 时间：2013-03-22T11:06:06.513
> 
> 标签：jquery, jquery-ui

我正在使用该`_on()`函数来绑定鼠标事件。请参考以下代码：

```
 this._on(document,"mouseup",this.ChartMouseUp); 
```

当我使用`document`元素时，它会抛出错误`Object doesn't support this property or method`。当我与**this.element**绑定时，它工作正常。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:11:46.553

基本 jQuery UI 小部件公开的[_on()](http://api.jqueryui.com/jQuery.widget/#method-_on)方法采用以下参数：

```
_on( [ suppressDisabledCheck ] [, element ], handlers ) 
```

`suppressDisabledCheck`默认为`false`（仅在小部件未禁用时才调用处理程序）并`element`默认为小部件增强的元素，因此看起来您想要编写：

```
this._on({ mouseup: this.ChartMouseUp }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:11:32.650

在 jquery 小部件内部，“this”指的是小部件对象，而 this.element 指的是已应用小部件的元素。

_on 方法用于将事件处理程序附加到元素而不是小部件对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:38:05.403

我找到了解决方案。请参考以下代码

```
this._on($(document),"mouseup",this.ChartMouseUp); 
```

我们需要将文档作为 jquery 对象传递。

谢谢，

湿婆

# wordpress - 从 apache 到 nginx：wordpress 重写规则

> ID：15568781
> 
> 赞同：10
> 
> 时间：2013-03-22T11:06:07.493
> 
> 标签：wordpress, apache, .htaccess, nginx, permalinks

我正在从 apache2 迁移到 nginx。我不知道如何为 wordpress 重写这个**重写规则**。

这实际上是我的配置文件

```
server {
        listen 80;    
        root /usr/share/nginx/blog.com/public_html;
        index index.html index.htm index.php;

        server_name blog.com www.blog.com;

        location / {
                try_files $uri $uri/ /index.html;

        }

        location /doc/ {
                alias /usr/share/doc/;
                autoindex on;
                allow 127.0.0.1;
                allow ::1;
                deny all;
        }

        location ~ .php$ {
                fastcgi_pass 127.0.0.1:9000;

                fastcgi_param  SCRIPT_FILENAME /usr/share/nginx/blog.com/public_html$fastcgi_script_name;
                fastcgi_index index.php;
                include fastcgi_params;
        }

} 
```

我正在使用 php5-fpm。

这是我想添加的规则：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

你能帮我么？谢谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T11:11:49.903

你应该阅读[http://wiki.nginx.org/WordPress](http://wiki.nginx.org/WordPress)

例如

```
 location /blog {
            try_files $uri $uri/ /blog/index.php?$args;
    }

    location ~ \.php$ {
            fastcgi_split_path_info ^(/blog)(/.*)$;
    } 
```

# jmeter - 想要在 Jmeter 中在 10 分钟内发布 1500 个事件

> ID：15568782
> 
> 赞同：0
> 
> 时间：2013-03-22T11:06:11.673
> 
> 标签：jmeter, performance-testing, beanshell, jmeter-plugins

我有一个 Jmeter 脚本，我想在 10 分钟内发布 1500 个事件。
是否可以使用“终极线程组”或“吞吐量整形计时器”进行配置？
如果是，那么如何？

我尝试使用默认线程组，其中我使用“线程数”为 30 和“循环计数”为 50，以便进行 1500 个事件。但是，我怎样才能在 10 分钟内发布 1500 个事件呢？

我使用 JMS 点对点作为我的采样器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:00:50.183

尝试使用运行时控制器 - 运行时控制器控制允许其子级运行的时间。 [http://jmeter.apache.org/usermanual/component_reference.html#Runtime_Controller](http://jmeter.apache.org/usermanual/component_reference.html#Runtime_Controller)

# android - PushNotifications - 如何实现

> ID：15568790
> 
> 赞同：0
> 
> 时间：2013-03-22T11:06:39.560
> 
> 标签：android, push-notification

我是android的新手。我开发的应用程序很少，但都简单明了，只是使用了android的内置功能。

在我的一次采访中，有人问我推送通知，我决定看看推送通知是什么。我理解推送通知的概念（我认为），但每当我读到“服务器”这个词时，我都吓坏了。

我了解所有客户端编码，但我不知道如何实现服务器端编码。我见过有人用XMPP、MQTT等，那是什么？这是我的场景和我想知道的..

场景 ::: 假设我有一个网站，有一个表（从数据库中检索值），我每天更新几列。我希望这些更新反映在我的 android 应用程序中。因此，正如我所读到的，推送通知可以告诉应用程序有可用的更新。好的。到这里为止我很好。。

1.  当应用程序收到通知时，我的应用程序是否应该联系网站并获取最新信息？还是会通过推送通知发送更新的信息？我想，我的应用程序会联系网站并获取信息。现在，我如何从网站获取数据？我应该获取页面的来源并进行某种解析吗？

我会问更多问题，因为专家会澄清我的问题......

对不起，如果我的问题太天真，但这是唯一可以帮助我的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:11:08.193

**推送通知意味着适用于 Android 的 Google Cloud Messaging** (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。

你可以参考这个文档

[**适用于 Android 的 Google 云消息传递**](http://developer.android.com/google/gcm/index.html)

**[GCM：入门](http://developer.android.com/google/gcm/gs.html)**

并且还给出了[Demo App Tutorial](http://developer.android.com/google/gcm/demo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:12:10.520

在您的情况下，您需要创建 HTTP Web 服务以从服务器获取数据。所以当您收到有关服务器端更新的通知时。您只需要调用此 Web 服务并获取您需要更新的数据

# android - OAuth 和自定义方案导致 Chrome 中出现“ERR_UNKNOWN_URL_SCHEME”

> ID：15568792
> 
> 赞同：12
> 
> 时间：2013-03-22T11:06:46.373
> 
> 标签：android, android-intent, android-manifest

我已经坚持了好几个小时了，因为这件事以前一直在工作，但突然停止了，表现得像预期的那样。我真的不知道如何以及为什么，因为我一直在重新检查过程中的每一行代码，却看不出有什么问题，所以我向你们寻求帮助。

好的。所以我有一个`LoginScreen`带有一个按钮的活动，它在点击时开始一个新`Intent.ACTION_VIEW`的。这将在浏览器中启动 OAUTH 进程并`ApiManager.OAUTH_CALLBACK_URI`设置为`stjapp://oauthresponse`.

这是我`AndroidManifest.xml`参与此活动的部分：

```
<activity
    android:name=".LoginScreen"
    android:label="@string/application"
    android:launchMode="singleTask">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="stjapp" android:host="oauthresponse" />
    </intent-filter>
</activity> 
```

我如何开始`Intent.ACTION_VIEW`我的活动：

```
private View.OnClickListener loginHandler = new View.OnClickListener() {
        public void onClick(View v) {
             OAuthClientRequest request = null;
             try {
                request = OAuthClientRequest
                    .authorizationLocation(ApiManager.OAUTH_AUTHORIZE)
                    .setClientId(ApiManager.CLIENT_ID).setRedirectURI(ApiManager.OAUTH_CALLBACK_URI)
                    .buildQueryMessage();
            } 
            catch (OAuthSystemException e) { e.printStackTrace(); } 
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(request.getLocationUri() + "&response_type=code"));
            startActivity(intent);
        }
    }; 
```

这是浏览器中发生的情况的屏幕截图：

![在此处输入图像描述](../Images/872fff6e52075443f3c41a7f440bfb1a.png)

在那里，我应该回到我的`LoginScreen`活动并处理方法中的`code`查询参数，`onNewIntent`但是......是的，事情不再按预期工作了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T16:36:38.267

看起来这是一个[Chromium 错误](https://code.google.com/p/chromium/issues/detail?id=181186)。我正在使用的解决方法是 RedirectURI 的 PHP 登录页面，它通过 JavaScript 打开应用程序（不受该错误的影响）：

```
<script language="javascript">
    window.location = 'myscheme://myhost/?<?=$_SERVER["QUERY_STRING"]?>';
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-30T22:23:11.163

我有同样的错误，并通过在 url 前加上前缀来解决它`http://`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-25T23:01:16.420

在 Chrome 40 及更高版本中，此错误再次出现，但前提是您在地址栏中手动输入重定向页面的 URL。问题在铬问题跟踪器[上](https://code.google.com/p/chromium/issues/detail?id=459156)。

从问题粘贴的“解决方法”的响应：

> 好的，我发现通过意图的 window.location 重定向将起作用，只要从外部源或页面上的链接单击它。如果您在地址栏中手动输入重定向页面的地址，应用程序的重定向/打开将失败并出现上述错误。
> 
> 因此，当用户单击链接时，通过电子邮件或 SMS 发送指向重定向页面的链接就可以正常工作。在地址栏中手动输入地址将失败。 `window.location = chromeUrl;`应该可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-11T07:52:53.720

仅当您在地址栏中手动输入重定向页面的 URL 时。问题在铬问题跟踪器上。

从问题粘贴的“解决方法”的响应：

好的，我发现通过意图的 window.location 重定向将起作用，只要从外部源或页面上的链接单击它。如果您在地址栏中手动输入重定向页面的地址，应用程序的重定向/打开将失败并出现上述错误。

因此，当用户单击链接时，通过电子邮件或 SMS 发送指向重定向页面的链接就可以正常工作。在地址栏中手动输入地址将失败。window.location = chromeUrl; 应该可以正常工作。

# php - 删除所有重复的mysql？

> ID：15568802
> 
> 赞同：0
> 
> 时间：2013-03-22T11:07:34.100
> 
> 标签：php, mysql, select, duplicate-removal

我想删除具有相同 badge_id 的重复行，我们检查 user_id ：

例如，使用以下数据：

```
id user_id badge_id badge_slot
1 2 ACH_1 0
2 1 ACH_1 0
3 1 ACH_1 0
4 1 AAAAA 0

```

怎么删？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:09:04.030

如果您想保留最低记录，`id`您可以使用`min()`

```
delete from your_table
where id not in
(
   select * from 
   (
     select min(id)
     from your_table
     group by user_id, badge_id
   ) x
) 
```

在 MySQL 中，您会遇到无法从要删除的同一个表中进行选择的问题。但是您可以通过子选择来克服这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:32:36.053

尝试这个 ..

```
 ALTER IGNORE TABLE table ADD UNIQUE KEY idx1('badge_id','user_id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:10:56.083

尝试这个：

```
 DELETE * ,count(*)as n your_table by badge_id HAVING n>1 . 
```

希望有帮助！

# iphone - 在特定半径内查找 iPhone 设备/设备令牌：-

> ID：15568814
> 
> 赞同：0
> 
> 时间：2013-03-22T11:08:13.213
> 
> 标签：iphone, find, device, token

我想在特定位置的特定半径内查找 iPhone 设备/设备令牌。

例如：在距离悉尼 25 公里半径范围内，我想获得 iPhone 设备代币。

> > 我正在为此开发 ASP.NET MVC2。

让我知道，是否有任何API？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:14:42.203

您只能获取您“了解”的设备的详细信息。您的应用需要为每台设备记录唯一的 ID，并且您的应用需要记录设备的已知位置。然后，您可以从中央数据库中查找一定距离内设备的详细信息。iPhone 在后台运行时可以更新重大的位置变化，但您可以跟踪设备并接受数据可能并不总是正确的限制。例如。如果用户不在连接范围内，那么您仍然会为该用户记录一个旧位置。

我不知道提供此服务的单个 API，如果您正在对其进行编码，那么在您的应用程序中，您需要将设备标识符和位置信息注册到中央服务器。您还需要创建查找来查询您的数据以查找某个位置内的设备。我猜您可能想要发送推送通知，在这种情况下，您的应用程序也需要注册通知服务。

您无法发现没有运行您的应用程序并且您也不知道所有者是谁的设备。

# php - 你是如何将你的项目从开发到生产的？

> ID：15568818
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:08:21.983
> 
> 标签：php, laravel

祝大家有美好的一天，

我目前正在[Laravel](http://www.laravel.com)上开发一个项目。到目前为止，我一直在线开发，通过 FTP 直接在网络服务器上编辑我的文件（使用 PSPad 或类似的简单编辑工具）。

我现在想做的（以及我相信大多数人实际做的）是在我的本地机器上设置一个（W）LAMP 堆栈并在本地编程。但是，我有点不清楚**如何使我的本地代码（包括数据库）与实时网站保持同步**。你们是怎么做到的？我知道可能有很多方法和工具可以做到这一点，但您对最佳实践有何建议？任何建议都会非常受欢迎:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:17:49.747

许多公司所做的是离线构建，然后使用[`git`](http://git-scm.com/).

我不是该软件的专家，所以我无法以基本形式描述您所做的事情：

我的建议是在您编辑/更新时创建一个在线存储库（存储库）来存储您的项目。

有几个`git`项目管理系统，例如[`github`](http://www.github.com)或[`bitbucket`](http://bitbucket.org)。我个人使用`bitbucket`

什么`git`是当您在本地 (w)lamp 上离线构建或添加所需的内容时，然后将`git push`它们上传到您的存储库或服务器。然后，更改的文件将与 repo 或服务器上的现有文件合并。如果您想要项目的最新版本，您只需`git pull`将它们下载下来即可。

[阅读此处的完整文档](http://git-scm.com/documentation)以查看使用时可用的各种选项`git`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:13:52.303

我们的平台中有一个设置数组，可用作 $res::Config。

在运行时，在检查 HTTP 主机后，变量会从“dev”更改为“live”，这显然取决于 IP 地址。

在我们的框架引导中，根据 $res::Config->$env 的值，或者之前设置为 dev 或 live 的环境，设置数据库连接的设置。您将这些设置作为 db_live 或 db_dev 存储在 Config 数组中。

不管你怎么做，使用环境变量来确定你想要 live 还是 dev，并相应地设置和设置数组。

我们还为间歇性开发阶段提供沙箱和分期。

至于版本控制，使用git或subversion。

编辑：也有可能在我们的**vhost**文件中，我们将环境变量设置为 live 或 dev，并且我们的应用程序会相应地从中读取。我建议这种方法:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:18:03.730

有很多方法可以做到这一点。但这是你问的一个看似巨大的问题。这里有一些好的实践建议——去研究这些项目，然后看看我的方法。

通常，您使用称为版本控制的过程，它允许您创建系统的“版本”或快照。常用的“SVN”软件很好，但新出现的（不再是）孩子是 GIT，我个人推荐它。

您可以使用此系统以受控方式实时推送代码库。虽然文件/上传功能本质上类似于 FTP，但它允许您实时转储站点的特定版本。

在有多个开发人员的环境中，这是理想的 - 您可以相互比较/测试和解决问题，并且版本控制往往会阻止开发人员之间的错误。

所以 - 建议第 1 部分：查找并了解版本控制，然后使用它将 CODE 发布到实时环境。

第 2 部分：我使用数据库转储并将它们返回到我的机器上使用。如果实时数据库需要更新，我可以在本地工作并简单地导出，然后在实时系统上重新导入。

例如：在我最近参与的一个 Moodle 项目中，刷新整个数据库需要几秒钟的时间……我可以在几分钟内推送一个补丁和数据库更新。但是：您应该考虑维护和调度......如果站点是实时的并且有持续的数据更改，那么您需要小心这一点。考虑添加维护页面。

建议 2：研究 SQL 转储/导出和导入。

我个人使用 phpmyadmin 转储和重新导入，因为它非常方便。

建议 3：在本地工作然后推送现场是更好的做法。你正在开始一条比你现在更安全、更好的道路！

希望这会有所帮助......但请记住 - 这是一个很大的主题，因此您需要进行一些研究。

# wordpress - 读取文件大小 PHP 时出错

> ID：15568819
> 
> 赞同：0
> 
> 时间：2013-03-22T11:08:23.217
> 
> 标签：wordpress, post, attachment, filesize

我想获取我的 wordpress 帖子附件的文件大小。但是当我运行该站点时，我得到了这个错误......有人可以帮助我吗？

“警告：filesize(): stat failed for [http://XXX.de/webdev/wp-content/uploads/2013/03/example.zip](http://XXX.de/webdev/wp-content/uploads/2013/03/example.zip)在 C:\Users\XXX\Desktop\XAMPP\htdocs\webdev\wp -content\themes\web dev-theme\modul-page.php 在第 27 行"

```
<?php
 $a =  filesize($img['url']);
 echo$a;
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:56:27.453

首先检查文件/目录是否可读/可写。

我会在文件中执行此操作，只是为了获得最佳实践。很难确定哪里出了问题，因为您没有指定第 27 行是什么。

```
if ( file_exists($img['url']) ) {
    $the_file_size = filesize($img['url']);
    if ( $the_file_size >= 0 ) {
        echo $the_file_size . ' bytes';
    } else {
        echo "File size could not be determined";
    }
} 
```

# php - 用php发送多个附件

> ID：15568822
> 
> 赞同：1
> 
> 时间：2013-03-22T11:08:33.173
> 
> 标签：php, dynamic, file-upload

好吧，我认为这有点棘手，我有一个表单，我想用它来允许用户上传文件，当他们点击提交时，将文件通过电子邮件发送给某人。我有这个为一个文件工作。

查看代码

```
 <html>
<head>
  <title>Administration - upload new files</title>
</head>
<body>
<h1>Upload new news files</h1>
<form enctype="multipart/form-data" action="upload.php" method="post">
  <input type="hidden" name="MAX_FILE_SIZE" value="1000000">
  Upload this file: <input name="userfile" type="file">

  <input type="hidden" name="MAX_FILE_SIZE" value="1000000">
  Upload this file: <input name="userfile" type="file">
  <input type="submit" value="Send File">
</form>
</body>
</html> 
```

和

```
<html>
<head>
  <title>Uploading...</title>
</head>
<body>
<h1>Uploading file...</h1>
<?php
$youremail = "your@email.co.uk";
$tmp_name = $_FILES['userfile']['tmp_name'];
    $type = $_FILES['userfile']['type'];
    $name = $_FILES['userfile']['name'];
    $size = $_FILES['userfile']['size'];
    if (file_exists($tmp_name))
        {
         if(is_uploaded_file($tmp_name)) {
            $file = fopen($tmp_name,'rb');            //open the file
                 $data = fread($file,filesize($tmp_name));    //read the file
                 fclose($file);                    // close the file
                 $data = chunk_split(base64_encode($data));    // encode and split
                }
            $bound_text = "x".md5(mt_rand())."x";
            $bound = "--".$bound_text."\r\n";
            $bound_last = "--".$bound_text."--\r\n";
             $headers = "From: {$sendersname}<{$sendersemail}>\r\n"
            ."MIME-Version: 1.0\r\n"
              ."Content-Type: multipart/mixed; boundary=\"$bound_text\"";
            $message .= "If you can see this MIME than your client doesn't accept MIME types!\r\n"
              .$bound;

            $message .= "Content-Type: text/html; charset=\"iso-8859-1\"\r\n"
              ."Content-Transfer-Encoding: 7bit\r\n\r\n"
              .$sendcontent."\r\n"
              .$bound;

            $message .= "Content-Type: ".$type."; name=\"".$name."\"\r\n" 
              ."Content-Transfer-Encoding: base64\r\n"
              ."Content-disposition: attachment; file=\"".$name."\"\r\n" 
              ."\r\n"
              .$data
              .$bound_last; 
            }

    mail($youremail, $subject, $message, $headers);
    ?> 
```

当我想附加多个文件时，问题就来了。我要按什么顺序进行操作，在第一页上我想要它，这样当您单击附加文件时，它将添加一个新文件框，然后当再次单击它时，会出现另一个文件框，依此类推。所以表单是动态创建的。

这将带我进入下一个问题，即发送附件，因为我们不知道用户附加了多少。

我确定任何指针都不会像将 if (file_exists($tmp_name) 更改为一段时间那样简单？

非常感谢你提前

编辑所以现在我有

```
<form enctype="multipart/form-data" action="upload.php" method="post">
  <input type="hidden" name="MAX_FILE_SIZE" value="1000000">
  Upload this file: <input name="userfile[]" type="file">

  <input type="hidden" name="MAX_FILE_SIZE" value="1000000">
  Upload this file: <input name="userfile[]" type="file">
  <input type="submit" value="Send File"> 
```

和

```
<html>
<head>
  <title>Uploading...</title>
</head>
<body>
<h1>Uploading file...</h1>
<?php
$youremail = "email@email.co.uk";

$i = count($_FILES['userfile']);

foreach($_FILES['userfile'] as $file){    
    $tmp_name = $file['tmp_name'];
    $type = $file['type'];
    $name = $file['name'];
    $size = $file['size'];

    if (file_exists($tmp_name))
        {
         if(is_uploaded_file($tmp_name)) {
            $file = fopen($tmp_name,'rb');            //open the file
                 $data = fread($file,filesize($tmp_name));    //read the file
                 fclose($file);                    // close the file
                 $data = chunk_split(base64_encode($data));    // encode and split
                }
            $bound_text = "x".md5(mt_rand())."x";
            $bound = "--".$bound_text."\r\n";
            $bound_last = "--".$bound_text."--\r\n";
             $headers = "From: {$sendersname}<{$sendersemail}>\r\n"
            ."MIME-Version: 1.0\r\n"
              ."Content-Type: multipart/mixed; boundary=\"$bound_text\"";
            $message .= "If you can see this MIME than your client doesn't accept MIME types!\r\n"
              .$bound;

            $message .= "Content-Type: text/html; charset=\"iso-8859-1\"\r\n"
              ."Content-Transfer-Encoding: 7bit\r\n\r\n"
              .$sendcontent."\r\n"
              .$bound;

            $message .= "Content-Type: ".$type."; name=\"".$name."\"\r\n" 
              ."Content-Transfer-Encoding: base64\r\n"
              ."Content-disposition: attachment; file=\"".$name."\"\r\n" 
              ."\r\n"
              .$data
              .$bound_last; 
            }
echo "$i";
        }

    mail($youremail, $subject, $message, $headers);

    ?> 
```

它正在发送一封电子邮件，但没有附件我把 $i 放进去看看发生了什么，如果只有 2 个文件上传，它返回 5 不应该是 2 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:15:46.340

您可以将文件输入更改为这样的数组：

```
<input name="userfile[]" type="file"> 
```

`$_FILES`这将为您的阵列增加额外的深度。您可以确定使用 上传的附件数量`count($_FILES['userfile'])`。并循环通过提供的附件：

```
foreach($_FILES['userfile'] as $file) {
   // Access the elements with:
   // $file['name']
   // etc..
} 
```

至于单击链接以创建任意数量的文件输入，您需要使用 Javascript。这可以通过 vanilla JS 完成，但如果您使用的是 jQuery，您可能需要查看[clone()](http://api.jquery.com/clone/)。

# java - 图标路径中的 Java Illegal Exscape 字符

> ID：15568827
> 
> 赞同：0
> 
> 时间：2013-03-22T11:08:42.277
> 
> 标签：java, swing, netbeans, jframe

我有一个使用 netbeans IDE 的桌面应用程序我想更改默认标题图像我使用 ImageIcon 对象和`imageobject.getImage();`

下面是代码片段

```
IconImage img = new ImageIcon("\GNSSRegistry\src\my\gnssregsitry\NSSIcon\logobig.jpg"); 
```

然后我在netbeans IDE提供的jframe,s图标属性窗口中设置如下代码

```
jframe.setIconImage(img.getImage()); 
```

但是 netbeans 抱怨图像路径中有一个非法的转义字符，前提是我很困惑我希望我没有弄错路径设置。

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:10:31.690

反斜杠`\`用作转义字符，您需要在字符串中转义它们，因此，您的字符串应该看起来像`"\\GNSSRegistry\\src\\my\\gnssregsitry\\NSSIcon\\logobig.jpg"`

# c++ - std::vector Erase - 它会自动取消分配吗？

> ID：15568828
> 
> 赞同：0
> 
> 时间：2013-03-22T11:08:54.907
> 
> 标签：c++, stdvector

在下面的代码中， **mKnownRSList**的类型是：

```
 std::vector<RSAddress *> 
```

其中**RSAddress**是我写的一个类。函数**removeItem**从此向量中删除一个项目。

我的问题是，在调用 mKnownRSList 上的擦除函数后，我是否应该取消分配 std::remove_if 返回的迭代器所指向的地址。目前，我对名为 last 的取消引用迭代器显式发出删除调用。您认为这种方法正确吗？谢谢。

```
void 
ABC::removeItem(RSAddress * rsAddr)
{
   auto last = 
   std::remove_if(mKnownRSList.begin(),
                  mKnownRSList.end(),
                 [rsAddr]( RSAddress * o )
                 {
                   return (*o == *rsAddr);
                 });

 mKnownRSList.erase(last, mKnownRSList.end());

 delete *last;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:12:32.800

您应该*首先*删除容器内指针所指向的内容，然后从容器中删除/擦除实际指针。

你在这里所做的是取消引用一个指向不再存在的东西的迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:12:05.983

> 您认为这种方法正确吗？

没有。正确的方法是使用 smart_pointers 像[shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)。如果你愿意，那么你应该只做`erase`它。像这样

```
std::vector< std::shared_ptr< RSAddress  > > mKnownRSList;
...

mKnownRSList.erase( std::remove_if(mKnownRSList.begin(),
                                   mKnownRSList.end(),
                                   [rsAddr]( const std::shared_ptr< RSAddress > & o )
                                   {
                                       return (*o == *rsAddr);
                                   }),
                    mKnownRSList.end()
); 
```

# css - 如何将图像对齐到 div 的底部（在引导程序中）？

> ID：15568829
> 
> 赞同：6
> 
> 时间：2013-03-22T11:08:55.490
> 
> 标签：css, twitter-bootstrap

我希望能够将不同大小的图像对齐到 div 的底部。

我有以下标记：

```
<div class="container">
  <div class="container">
    <div class="footer-images">
      <a href="link1"><img src="img1"></a>
      <a href="link2"><img src="img2"></a>
      <a href="link3"><img src="img3"></a>
    </div>
  </div>
  <div class="container">
    <div class="copyright">
      <p>© Some Company YYYY</p>
    </div>
  </div>
</div> 
```

我不知道如何将所有图像对齐到 footer-images div 的底部。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:37:11.980

试试这个

```
 .footer-images img{
        vertical-align:bottom;
        border:0;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:24:47.377

这有帮助吗？

```
<style type="text/css">
.footer-images {
    margin: auto;
    display: block;
    position: absolute;
    bottom: 0;
}
.footer-images .copyright {
    text-align: center;
}
</style> 
```

使用这个 HTML

```
<div class="container">
  <div class="container">
    <div class="footer-images">
      <a href="link1"><img src="http://placehold.it/350x150"></a>
      <a href="link2"><img src="http://placehold.it/640x480"></a>
      <a href="link3"><img src="http://placehold.it/120x120"></a>
      <div class="container">
        <div class="copyright">
          <p>© Some Company YYYY</p>
        </div>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-06T14:55:32.067

在 Bootstrap v4 中，您可以使用该类`align-items-end`在 div 中实现底部对齐。您可以在行或列上使用此类。

所有列内容都与底部对齐的示例。

```
<div class="container">
  <div class="row align-items-end">
    <div class="col">
      One of three columns
    </div>
    <div class="col">
      One of three columns
    </div>
    <div class="col">
      One of three columns
    </div>
  </div>
</div> 
```

第一列顶部、第二列中间和第三列底部对齐的示例。

```
<div class="container">
  <div class="row">
    <div class="col align-self-start">
      One of three columns
    </div>
    <div class="col align-self-center">
      One of three columns
    </div>
    <div class="col align-self-end">
      One of three columns
    </div>
  </div>
</div> 
```

来源：[引导文档](https://getbootstrap.com/docs/4.4/layout/grid/#alignment)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T11:11:26.010

习惯了这个 css 并应用

```
.footer-images img{
width:xxpx;
height:xxpx;           // add here your style as like with height border etc.
vertical-align:top;
border:0;
} 
```

有关[**引导程序的更多信息**](http://twitter.github.com/bootstrap/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T14:08:43.230

就足够了：

```
margin-top: auto; 
```

见[https://jsfiddle.net/d3jau1gx/](https://jsfiddle.net/d3jau1gx/)

# asp.net - 我想要电话号码的必填字段验证器和数字验证器的验证表达式

> ID：15568830
> 
> 赞同：0
> 
> 时间：2013-03-22T11:08:56.770
> 
> 标签：asp.net, validation

我想要电话号码的必填字段验证器和数字验证器的验证表达式

```
 <asp:TextBox ID="txtPhonenumber" runat="server" MaxLength="11" TabIndex="11" onKeyPress="return validateNumbersOnly();" ></asp:TextBox>

            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="Enter Phone Number" ControlToValidate="txtPhonenumber" ></asp:RequiredFieldValidator> 
```

此代码仅在字段为空时有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T21:13:18.960

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtPhonenumber" ErrorMessage="Only Numbers" Display="None" ValidationExpression="^\d+$" ></asp:RegularExpressionValidator> 
```

ValidationExpression="^\d+$" 用于数字格式验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:43:26.123

```
<asp:TextBox ID="txtPhonenumber" runat="server" MaxLength="11"  ></asp:TextBox><asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="Enter Phone Number" ControlToValidate="txtPhonenumber" ></asp:RequiredFieldValidator><asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtPhonenumber" ErrorMessage="Only Numbers" Display="None" ValidationExpression="^\d+$" ></asp:RegularExpressionValidator> 
```

# c# - 以下 C# 程序是使用静态绑定还是动态绑定？

> ID：15568832
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:01.823
> 
> 标签：c#, dynamic-binding, static-binding

我有以下课程：

```
class Polygon
{
    protected string name;
    protected float width, height;
    public Polygon(string theName, float theWidth, float theHeight)
    {
        name = theName;
        width = theWidth;
        height = theHeight;
    }
    public virtual float calArea()
    {
        return 0;
    }
}

class Rectangle : Polygon
{
    public Rectangle(String name, float width, float height) : base(name,width,height)
    {
    }
    public override float calArea()
    {
        return width * height;
    }
} 
```

主要功能1：

```
 static void Main(string[] args)
    {
        Rectangle rect1  = new Rectangle("Rect1", 3.0f, 4.0f);
        float Area = rect1.calArea()
    } 
```

主要功能2：

```
 static void Main(string[] args)
    {
        Polygon poly = new Rectangle("Rect1", 3.0f, 4.0f);
        float Area = poly.calArea()
    } 
```

我了解主要功能 2 使用动态绑定。
如果我在 Rectangle 类的 calArea 方法中将 override 关键字更改为 new，则它是静态绑定。主要功能1呢？它使用静态/动态绑定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:26:12.067

我不认为“动态”绑定是正确的词。您正在谈论编译时（静态）和运行时绑定。如果没有从 Rectangle 继承类 - 那么在示例 1 中，编译器有足够的信息来决定将调用哪个方法，并且它可以进行编译时（静态）绑定。

**[编辑]：**

显然我是不对的。我检查了示例 1 和示例 2 生成的 IL 代码，使用“new”而不是“override”，Main 函数的代码似乎相同：

```
 IL_000f:  newobj     instance void Console.Program/Rectangle::.ctor(string,
                                                                          float32,
                                                                          float32)
  IL_0014:  stloc.0
  IL_0015:  ldloc.0
  IL_0016:  callvirt   instance float32 Console.Program/Polygon::calArea() 
```

从这段代码中我们看到，即使对于示例 1 - callArea 方法也是从 Polygon 类调用的。因此，在编译为 IL 代码的阶段，没有绑定到确切的方法实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:17:10.000

非虚拟方法是静态绑定的，这意味着它在编译时就知道要调用哪个方法。通过提供 new 关键字，您告诉编译器这是虚拟/覆盖区域。

主要功能 1 没有定义 new 关键字，AFAIK 将使用动态绑定，因为它仍然在虚拟覆盖的范围内。

# php - PHP中视频上传的最佳方法是什么

> ID：15568833
> 
> 赞同：2
> 
> 时间：2013-03-22T11:09:03.310
> 
> 标签：php, codeigniter, video, flv, video-player

用 PHP 上传和播放视频的最佳方法是什么？我不想上传到 youtube。上传后我应该转换成任何格式吗？请建议我应该使用哪个播放器来播放它？我正在使用 PHP condeigntier 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:12:36.767

您可以为此使用任何上传脚本。

您应该使用 ffmpeg 将视频文件编码为 flv 格式。

这是这篇文章。

[http://youtubeclone.wordpress.com/2007/05/26/how-to-convertencode-files-to-flv-using-ffmpeg-php/](http://youtubeclone.wordpress.com/2007/05/26/how-to-convertencode-files-to-flv-using-ffmpeg-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:21:29.343

我使用 flowplayer 在浏览器上播放视频。对于上传 swfupload 实用程序非常适合一次上传多个视频。高达 30MB

# java - 检测到的 JDK 版本：1.6.0-24 不在允许的 1.7 范围内

> ID：15568835
> 
> 赞同：8
> 
> 时间：2013-03-22T11:09:05.617
> 
> 标签：java, maven, centos

当我运行命令时

```
mvn clean package 
```

我收到错误：

```
Detected JDK Version: 1.6.0-24 is not in the allowed range 1.7. 
```

如何解决上述错误？我试图检查 jdk 版本是否已安装并得到了这个

```
java version "1.7.0_03"
Java(TM) SE Runtime Environment (build 1.7.0_03-b04)
Java HotSpot(TM) 64-Bit Server VM (build 22.1-b02, mixed mode) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T11:19:31.510

通常在执行时`mvn -v`您可能会看到类似

```
Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 
                    2013-02-19 20:51:28+0700)
Maven home: C:\Java.Application\Apache\apache-maven-3.0.5\bin\..
Java version: 1.7.0_15, vendor: Oracle Corporation
Java home: C:\Java.Application\Sun\Java\jdk1.7.0_15\jre
Default locale: en_US, platform encoding: MS874
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows" 
```

如果结果指向`JDK Version: 1.6.0-24`或与您的预期不同。请简单地将 设置`JAVA_HOME`为您的`JDK Version: 1.7.0_03`。

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:35:20.010

确保您的环境 (PATH) 设置为使用您要用于编译的 JDK 版本。您可以通过在要运行 Maven 的 shell 或命令窗口中运行以下命令来检查这一点：

```
java -version
javac -version 
```

确保两者`java`都`javac`指向正确的版本。您可能有一个 1.7 JRE（不包括编译器）和一个 1.6 JDK（包括编译器）并且使用了错误的 JRE。

如有必要，调整您的`JAVA_HOME`和`PATH`环境变量。

刚刚注意到您在 CentOS 上 - 有可能`java`并`javac`指向不同的版本。使用`alternatives`命令进行检查，请参见此处的示例：[http](http://wiki.centos.org/HowTos/JavaRuntimeEnvironment) ://wiki.centos.org/HowTos/JavaRuntimeEnvironment - 您必须同时检查 the`java`和`javac`命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-17T23:31:22.247

在 Eclipse 中检查您的 JRE 系统库。它显示jdk1.6.0-24吗？

对我来说，我必须右键单击 JRE System Library 并转到 Build Path -> Configure Build Path，在 Libraries 选项卡中，我必须单击 JRE System Library 并对其进行编辑。我将它设置为工作区默认 JRE，对我来说是 jdk1.7.0_80（不知道为什么它还没有设置）。

# android - 在android中未接来电时访问来电者的号码

> ID：15568836
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:06.290
> 
> 标签：android, android-intent, android-service

我正在尝试从通话记录中获取最近未接的电话号码。我使用了下面的代码，我想让它在后台运行，现在我把它写成我的 mainActivity 类中的一个方法，当一个呼叫移动到未接来电日志时，这个函数应该可以工作。如何使它成为可能请帮助

```
 public void SendSMStoMissedCall()
{
    String[] strFields = {android.provider.CallLog.Calls.CACHED_NAME, 
            android.provider.CallLog.Calls.NUMBER,android.provider.CallLog.Calls.DATE, 
            android.provider.CallLog.Calls.TYPE};

    String strOrder = android.provider.CallLog.Calls.DATE + " DESC";

    Cursor mCallCursor = getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,strFields, null, null, strOrder);

    if (mCallCursor.moveToFirst())
    {

        do 
        {
            boolean missed = mCallCursor.getInt(mCallCursor.getColumnIndex(CallLog.Calls.TYPE)) == CallLog.Calls.MISSED_TYPE;

            if (missed) 
            {
                String name = mCallCursor.getString(mCallCursor.getColumnIndex(CallLog.Calls.CACHED_NAME));
                number = mCallCursor.getString(mCallCursor.getColumnIndex(CallLog.Calls.NUMBER));
                String time = mCallCursor.getString(mCallCursor.getColumnIndex(android.provider.CallLog.Calls.DATE));
                      Log.d("PhoneLog", "You have a missed call from " + name + " on " + number  + " at " + time);  
                String ContactName = objUtility.getContactNameFromNumber(number);

                SendMessage(number);
                getCurrentLocation();
            }
       } 
      while (mCallCursor.moveToNext());

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:58:32.707

创建一个服务，`PhoneStateListener`在服务中实现一个。在扩展类中`PhoneStateListener`，在`onCallStateChanged`方法中把你的代码放在上面的`TelephonyManager.CALL_STATE_IDLE`case中。

# java - 调用 getter 后执行业务逻辑

> ID：15568838
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:11.000
> 
> 标签：java, jsf, getter-setter

我想在调用 getter 和 setter 之后编写我的业务逻辑（两次），因为我在业务逻辑中使用它们的对象值。然而 Construct，Post 构造，actionevents，.. 在 getter 之前被调用。

那么，如果我不想在 getter 中编写业务逻辑，我该如何使用它们的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:49:11.967

> *我想导航到该站点并从显示到 outputText 的数据库中获取数据。*

在 bean 的（后）构造函数中完成工作。

```
@ManagedBean
@RequestScoped
public class Bean {

    private String data;

    @EJB
    private SomeService service;

    @PostConstruct
    public void init() {
        data = service.load();
    }

    // Getter.
} 
```

和

```
<h:outputText value="#{bean.data}" /> 
```

* * *

> *当我更改（primefaces）selectOneMenu 值时，bean 获取 selectOneMenu 的值并在数据库中执行该值的查询，并将查询结果写入 outputText 中。*

`change`在附加到输入组件事件的 bean 的 ajax 侦听器方法中完成这项工作。

```
@ManagedBean
@ViewScoped
public class Bean {

    private String selectedItem;
    private String result;

    @EJB
    private SomeService service;

    public void changeSelectedItem(AjaxBehaviorEvent event) {
        result = service.find(selectedItem);
    }

    // Getters+setter.
} 
```

和

```
<p:selectOneMenu value="#{bean.selectedItem}">
    <f:selectItems ... />
    <p:ajax listener="#{bean.changeSelectedItem}" update="result" />
</p:selectOneMenu>
<h:outputText id="result" value="#{bean.result}" /> 
```

* * *

*在调用 getter之后*执行此操作为时已晚。那时 JSF 已经完成了 HTML 输出的呈现。之后您无法更改 HTML 输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:07:15.587

你在思考中犯了一个基本错误。

没有像“吸气剂”这样的阶段。Getter 只是读取 bean 属性的约定。

这些属性可以在整个请求中单独读取。有些可能早在“创建/恢复视图”期间就被咨询，而另一些可能在“呈现响应”期间咨询。

没有这样的事情，JSF 在某个特定阶段会扫描您的代码，并且为了好玩，它会调用它找到的每个 getter。

你的解决方案是放开这种想法。我知道放弃你认为是真的事情可能很难，但是吸气，让你头脑清醒，告别你目前对事情如何运作的理解，从头开始重新学习。

然后，您很快就会自己找到答案。祝你好运！

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-22T11:56:46.387

没有完全理解你的问题，但明显的方法是将逻辑放在 getter 和 setter 中。

# android - 哪些 XML 文件将用于不同的屏幕

> ID：15568840
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:14.050
> 
> 标签：android, android-layout

我正在开发 android 应用程序，我为不同的布局创建了不同的屏幕。有 3 种类型的`Android XML`文件，`Android Layout XML`以及`Android values XML`。要选择哪一种。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:19:36.947

仅将 Layout XML 用于布局和横向在 res 文件夹内创建另一个文件夹 layout-land 并创建具有不同设计的相同名称的布局，适用于横向模式。并使用所有子视图具有相同名称和相同 ID 的不同布局。然后 android 在方向更改时自动选择

使用此作为参考 [http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)

# html - 需要帮助更正将在 Gmail 中使用的 HTML 简报的代码

> ID：15568843
> 
> 赞同：-3
> 
> 时间：2013-03-22T11:09:21.713
> 
> 标签：html, css, email, gmail, newsletter

在我的浏览器中看起来不错，但是当我将它移动到 Gmail 时，我的#Container 移动到我的背景图像中“Kamala”字中的“K”字母下，另一个问题是当我将它作为电子邮件发送时，在收到电子邮件#Container 中的所有内容都已经在我的背景图像下。如果 div 无法实现，我应该回到表格，因为我现在有很多问题。我知道我想学习这个错误，但从 2 天开始就不能让它成为应有的方式。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Untitled Document</title>

 <style type="text/css">
div#Container {
position: absolute;
left: 9px;
top: 15px;
 }

 div#Room {
margin-left: 83.5%;
margin-top: 11%;
width: 625px;
 }

 #Room span {
font-family: Times New Roman, Times, serif;
font-weight: bold;
text-align: left;
font-size: 23px;
color: #522405;
 }

 #D { padding-left: 70px;
 }

 #GD { padding-left: 103px;
 }

 #GPV { padding-left: 53px;
 }

 div#Content {
margin-left: 83.5%;
margin-top: 1%;
width: 625px;
 }

 #Right {
position: absolute;
left: 1152px;
top: 222px;
 }

  img.Spacer {
margin-left: 10px;
 }

 div.content {
font-family: Arial, Helvetica, sans-serif;
text-align: left;
color: black;
font-size: 17px;
font-weight: bold;
 }

 .BP {
vertical-align: text-top;
margin-top: 10px;
margin-left: 245px;
 }

 .table {
vertical-align: text-top;
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
text-align: center;
color: #002b55;
margin-left: 83.5%;
 }

 .TD {
margin-left: 30px;
 }

 .adress {
font-family: Times New Roman, Times, serif;
font-size: 10px;
text-align: center;
font-weight: bold;
color: #100073; 
 }

 .OOT {
font-family: Arial, Helvetica, sans-serif;
font-size: 13px;
font-weight: bold;
color: #100073;
text-align:center;
 }

 .res {
vertical-align: top;
padding-left: 25px;
 }
</style>

</head>

<body>

<div align="center">

<img style="position: relative;" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BK_zpsa93ab347.png" alt="Background" />

</div>

<div id="Container">

<div id="Room" aling="left">

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" >

    <img align="left" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/D_zpsf4ea5de8.jpg" border="0px" alt="Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" >

    <img align="left" class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GD_zpse78278b7.jpg" border="0px" alt="Grand Deluxe" />

    </a>

    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" >

    <img align="left" class="Spacer" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/GPV_zpsb381cd33.jpg" border="0px" alt="Grand Pool Villa" />

    </a>

    <br />

    <a href="http://bit.ly/XSyPG5" title="Deluxe" target="_blank" style="text-decoration: none;"><span id="D">Deluxe</span></a>
    <a href="http://bit.ly/XSyPG5" title="Grand Deluxe" target="_blank" style="text-decoration: none;"><span id="GD">Grand Deluxe</span></a> 
    <a href="http://bit.ly/XSyPG5" title="Grand Pool Villa" target="_blank" style="text-decoration: none;"><span id="GPV">Grand Pool Villa</span></a>
  </div>

  <div align="left" id="Content" class="content">Situated on a hill, Ayara Kamala offers a beautiful garden and ocean view rooms. The place of the hotel provides quiet, calm and romantic holiday away from all other hotels on Kamala Beach.
<br />
<br />

Big size of rooms, king size beds and impressive bathrooms, are making Ayara Kamala            perfect selection for couples who are looking for privacy and relaxing holiday.
 </div>

<table align="left" class="table" style="border-collapse: separate; border-spacing: 1px;" width="625" border="0">
 <tr>
  <td align="right" style="padding-left: 20px;" width="302"><a href="http://bit.ly/XSyPG5" title="Book Now !"><img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/BP_zps15c948a1.png" border="0px" alt="Best Rate"/></a></td>
 <td width="321" valign="top"><table class="TD" style="border-collapse: separate; border-spacing: 0px;" border="0px">
 <tr>
 <td height="30" class="res" align="center"><a href="http://bit.ly/XSyPG5" title="B2B Online Booking"><span>www.b2b.onlyonetour.com</span></a></td>
 </tr>
 <tr>
 <td class="res" height="30" align="center"><span>Tel : (66) 02 - 688 - 8883 </span>      </td>
</tr>
<tr>
<td class="res" height="30" align="center"><a href="mailto:rsvn@onlyonetour.com" title="E-mail Reservation"><span>rsvn@onlyonetour.com</span></a></td>
</tr></table>
</td>
</tr>
</table>

<div align="center" id="Right"><a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><img width="149px" height="90px" src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/logoOOT_zps24c21653.png" border="0px" alt="Logo" /></a>
<a style="text-decoration: none;" href="http://bit.ly/XSyPG5" title="Only One Tour &amp; Travel Group Co., Ltd." target="_blank"><span class="OOT">Only One Tour &amp; Travel<br />Group Co., Ltd.</span></a><br /><br />
<a style="text-decoration: none;" href="http://on.fb.me/XXqq56" title="Only One Tour Facebook Page" target="_blank"> <img src="http://i1300.photobucket.com/albums/ag93/dobriyan/E-mail%20-%20Ayara%20Kamala/facebook-logo-png-format-i18_zps83b6a9aa.png" width="145px" height="50px" border="0px" alt="FB"/></a><br /><br />
 <span class="adress">2128/9-11 Charoenkung Rd.,</span><br />
 <span class="adress">Watprayakrai, Bangkorleam,</span><br />
 <span class="adress">10120 Bangkok, Thailand.</span><br />
<a class="adress"  href="http://bit.ly/XSyPG5" target="_blank">www.b2b.onlyonetour.com</a><br />
<a class="adress" href="http://on.fb.me/XXqq56" target="_blank">www.onlyonetour.com (offline)</a>
 </div>

</div>

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:54:40.140

HTML emails are still having to be built primarily using tables due to the numerous email clients and their varying issues with other HTML elements like div tags. So if you're looking for this to be well received by a number of people (and therefore clients) it would be worth, as you suggest, doing it using tables.

See this for more detailed info on email clients and the support they offer: [http://www.campaignmonitor.com/blog/post/3472/div-tags-in-html-email-newsletters/](http://www.campaignmonitor.com/blog/post/3472/div-tags-in-html-email-newsletters/)

I hope that gives you a little more info on the subject.

# xcode - 在 XCode 4 中指定符号/源路径以进行调试

> ID：15568845
> 
> 赞同：1
> 
> 时间：2013-03-22T11:09:27.703
> 
> 标签：xcode, macos, debugging, xcode4, xcode4.5

我有一个要调试的 .app 包，它不包含符号。但是，我有一个单独的文件夹，其中包含应用程序中二进制文件的所有符号。在另一个文件夹中，我拥有所有应用程序源代码。符号中的路径与我系统上的源路径不同。我尝试了很长时间的google，但令人惊讶的是没有找到任何解决方案。如何调试应用程序：

1.  使用位于单独文件夹中的符号。
2.  并且，使用与符号文件中的位置不同的源。

非常感谢帮助。

# sql - GROUP BY 函数问题

> ID：15568846
> 
> 赞同：1
> 
> 时间：2013-03-22T11:09:27.850
> 
> 标签：sql, oracle

我有以下示例：

```
SELECT name, age, location, SUM(pay)
FROM employee
GROUP BY location 
```

正如预期的那样，这会给我一个错误：

```
ORA-00979: not a GROUP BY expression 
```

我怎样才能解决这个问题？我需要按一列或两列分组，但需要返回所有列，即使它们没有在 GROUP BY 子句中使用，我已经查看了子查询来解决它，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:24:26.650

您可以使用分析函数：

```
SELECT name
, age
, location
, pay
, SUM(pay) over (partition by location order by location ) total
    FROM employee 
```

因此，您可以返回所有行，即使它们未在分组中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:08:25.867

因此，您想知道按地点划分的总工资，并且想知道每个地点员工的姓名和年龄？怎么样：

```
SELECT e.NAME,
       e.AGE,
       e.LOCATION,
       t.TOTAL_LOCATION_PAY
  FROM EMPLOYEE e
  INNER JOIN (SELECT LOCATION,
                     SUM(PAY) AS TOTAL_LOCATION_PAY
                FROM EMPLOYEE
                GROUP BY LOCATION) t
    ON (t.LOCATION = e.LOCATION) 
```

分享和享受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:32:48.213

（Group b[http://docs.oracle.com/javadb/10.6.2.1/ref/rrefsqlj32654.html] 必须在每一列中都有一个聚合函数，而不是group by子句。分组时，意味着您希望每组一行。子句中列的不同值出现在最终结果集中。

这是因为 oracle 无法知道要检索的 group by 中没有的列的哪些值。考虑一下：

```
A    X
B    X

Select col1, col2 from myTable group by col2; -- incorrect
Select min(col1), col2 from myTable group by col2; -- correct 
```

为什么第一个不正确？因为 oracle 不知道是为 X 值检索 A 还是 B，所以您必须指定它。即最小值、最大值等。

这个命名的分析函数有一个替代方法，它允许您在结果集的窗口下工作。

现在，如果您希望按地点支付员工总工资，并且每个员工都可能想要这个。

```
SELECT name, age, location, SUM(pay) OVER(PARTITION BY location)
FROM employee 
```

我相信这比@Bob Jarvis 查询要好，因为您只查询表一次。如果我错了，请纠正我。他也有雇员和雇员。错字？

# iphone - 使用“http://upload.twitter.com/1/statuses/update_with_media.json”将图像上传到 Twitter

> ID：15568848
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:35.740
> 
> 标签：iphone, objective-c

任何人都可以指导我或使用此 api“ [http://upload.twitter.com/1/statuses/update_with_media.json](http://upload.twitter.com/1/statuses/update_with_media.json) ”生成一些源代码。这是一个 twitter api，用于将图像从 iphone 应用程序直接上传到 twitter。

这是我的代码。

```
enter code here

-(void)PostToTwitter
{
    NSString *consumerKey = kOAuthConsumerKey;

    NSString *consumerSecret = kOAuthConsumerSecret;

    NSString *accessTokenKey = kOAuthaccessTokenKey;

    NSString *secretTokenKey = kOAuthsecretTokenKey;

    NSString *url = @"https://upload.twitter.com/1/statuses/update_with_media.json";

    OAConsumer *consumer = [[OAConsumer alloc] initWithKey:consumerKey secret:consumerSecret];

    OAToken *authToken = [[OAToken alloc] initWithKey:accessTokenKey secret:secretTokenKey];

    OAMutableURLRequest *postRequest = [[OAMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url] consumer:consumer token:authToken realm:nil signatureProvider:nil];

    [postRequest setHTTPMethod:@"POST"];

    [postRequest prepare]; 

    NSString *message = @"Testing Tweet and image upload to Twitter server directly.";

    //NSString *stringBoundary = @"0xKhTmLbOuNdArY---This_Is_ThE_BoUnDaRyy---pqo";
    NSString *stringBoundary = @"----------------------------9fa90e137c50";

    NSString *headerBoundary = [NSString stringWithFormat:@"multipart/form-data;boundary=%@",stringBoundary];

    [postRequest addValue:headerBoundary forHTTPHeaderField:@"Content-Type"];

    NSMutableData *postBody = [NSMutableData data];

    // message part

    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"status\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[message dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[@"Content-Disposition: form-data; name=\"media[]\"; filename=\"sunflower.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[@"Content-Type: image/jpeg\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[@"Content-Transfer-Encoding: binary\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];    

    UIImage  *img=[UIImage imageNamed:@"sunflower.jpg"] ;//=[self correctImageOrientation:img];   //cFun
    NSData *imageData = UIImageJPEGRepresentation(img, 90);

    /*NSURL *imageURL = [NSURL URLWithString:@"http://www.prepare-community.com/ShareFiles/index-fr.jpg"];

    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];*/

   // NSData *imageData = UIImagePNGRepresentation([UIImage imageNamed:@"road.jpg"]);

    [postBody appendData:imageData];

    [postBody appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [postRequest setHTTPBody:postBody];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:postRequest delegate:self];

    if (theConnection)
    {

        webData = [NSMutableData data];
        NSLog(@"web data = %@ =",webData);

    }

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    //[responseData appendData:data];
    [webData appendData:data];
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    //[connection release];

    NSString* responseString = [[NSString alloc] initWithData:webData     encoding:NSUTF8StringEncoding];
    NSLog(@"result: %@", responseString);

    // [responseString release];
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"error - read error object for details");
} 
```

在上面的代码中，我得到了 WebData 的输出是 <> 空标签。

响应字符串是 {"errors":[{"message":"Internal error","code":131}]}

可以请告诉我为什么我得到这个错误。我在上面的代码中错了。如果有人知道使用 udate_with_media 方法将图像上传到 Twitter 的解决方案，请指导我或发布一些源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:26:28.957

您可以使用此代码在 Twitter 上发帖。

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {

    SLComposeViewController *twitterComposer = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

    //add initial text
    [twitterComposer setInitialText:@"Tweeting from iPhone 5 #TesingApp"];

    //present composer
    [self presentViewController:twitterComposer animated:YES completion:nil];
} else {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"twitter Error"
                              message:@"You may not have set up twitter service on your device or\n                                  You may not connected to internent.\nPlease check ..."
                              delegate:self
                              cancelButtonTitle:@"OK"
                              otherButtonTitles: nil];
    [alertView show];
} 
```

这只会在 iOS 6+ 中使用。

# html - Node.js - 如何从 html 发送数据以表达

> ID：15568851
> 
> 赞同：45
> 
> 时间：2013-03-22T11:09:40.970
> 
> 标签：html, node.js, forms, node.js-client, http-post

这是 html 中的表单示例：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>CSS3 Contact Form</title>
</head>
<body>
<div id="contact">
    <h1>Send an email</h1>
    <form action="/myaction" method="post">
        <fieldset>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" placeholder="Enter your full name" />

            <label for="email">Email:</label>
            <input type="email" id="email" placeholder="Enter your email address" />

            <label for="message">Message:</label>
            <textarea id="message" placeholder="What's on your mind?"></textarea>

            <input type="submit" value="Send message" />

        </fieldset>
    </form>
</div>
</body>
</html> 
```

这是在服务器上运行的 node.js 函数：

```
var sys = require('sys'),
    http = require('http');
    http.createServer(function (req, res) {
            switch (req.url) 
                case '/myaction':
                        res.end(?????);
                    break;
            }
    }).listen(8080);
sys.puts('Server running at http://127.0.0.1:8080/'); 
```

我有两个问题：

1.  如何`myaction`从 html 页面调用 node.js 中的函数？因为 html 文件在端口 80 上运行，node.js 在 8080 上运行（当我尝试将 node.js 移动到端口 80 时，它会写入“// Unhandled 'error' event”）
2.  在我放置“???????”的node.js函数中 如何从 html 表单中获取数据。当我输入 req.html.body.name 时，我没有得到数据......

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-22T11:26:58.163

Using`http.createServer`是非常底层的，对于按原样创建 Web 应用程序真的没有用。

在它之上使用的一个很好的框架是 Express，我会认真建议使用它。您可以使用`npm install express`.

拥有后，您可以创建一个基本应用程序来处理您的表单：

```
var express = require('express');
var bodyParser = require('body-parser');
var app     = express();

//Note that in version 4 of express, express.bodyParser() was
//deprecated in favor of a separate 'body-parser' module.
app.use(bodyParser.urlencoded({ extended: true })); 

//app.use(express.bodyParser());

app.post('/myaction', function(req, res) {
  res.send('You sent the name "' + req.body.name + '".');
});

app.listen(8080, function() {
  console.log('Server running at http://127.0.0.1:8080/');
}); 
```

您可以使用以下方法使您的表单指向它：

```
<form action="http://127.0.0.1:8080/myaction" method="post"> 
```

您无法在端口 80 上运行 Node 的原因是该端口上已经有一个进程正在运行（它正在为您的`index.html`. 您还可以使用 Express 来提供静态内容，例如`index.html`，使用`express.static`中间件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-05T00:39:29.427

我想扩展 Obertklep 的答案。在他的示例中，它是一个名为的 NPM 模块`body-parser`，它完成了大部分工作。他放哪里`req.body.name`，我相信他/她是`body-parser`用来获取提交表单时收到的名称属性的内容。

如果您不想使用 Express，请使用`querystring`内置的 Node 模块。有关如何使用的示例，请参阅下面链接中的答案`querystring`。

查看[这个答案](https://stackoverflow.com/questions/4295782/how-do-you-extract-post-data-in-node-js)可能会有所帮助，这与您的任务非常相似。

# c# - 如何找出谁杀死了进程？

> ID：15568854
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:45.473
> 
> 标签：c#, .net, process

我需要保护我的程序的进程。为此，关闭我需要知道是什么进程导致了程序的关闭（taskkill，FAR）。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:16:22.643

你不能阻止你的进程被杀死（见[这个问题](https://stackoverflow.com/questions/3121746/prevent-c-sharp-app-from-process-kill)和[这篇文章](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/16/73780.aspx)），也没有办法知道谁杀死了这个进程。

# aem - tracker.js 直接点击调度程序 URL？如何解决？

> ID：15568856
> 
> 赞同：2
> 
> 时间：2013-03-22T11:09:48.817
> 
> 标签：aem

我的网站生产环境中有多个发布实例和多个调度程序。当我在 Firefox 中看到 net 选项卡时，我看到 tracker.js 的失败请求直接命中调度程序 URL。

获取[http://web.dispatcher.com/libs/wcm/stats/tracker.js?blah-blah](http://web.dispatcher.com/libs/wcm/stats/tracker.js?blah-blah)

在哪里 web.dispatcher.com

我觉得调度程序 URL 不应该像这样暴露。以及为什么它甚至会命中调度程序 URL。有任何想法吗？我觉得要么关闭印象跟踪器，但不知道该怎么做？或者重写请求以隐藏调度程序。有什么建议么？怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-24T19:42:44.440

如果您转到 [host]:[port]/system/console/configMgr，您将看到“Day CQ WCM Page Statistics”的配置

修改它以配置您希望跟踪器将其请求发送到的完整 URL。

此外，这个 XHR 请求是由 stats.jsp 生成的，它通常包含在你的 head.jsp 中。如果您只是从模板中删除该脚本包含（或将其更改为有条件包含，即在 WCMMode==DISABLED 时不包含），您可以停止生成该请求。

# android - 如何使用 Parcelable 将 CountDownTimer 的对象传递给意图？

> ID：15568857
> 
> 赞同：0
> 
> 时间：2013-03-22T11:09:51.347
> 
> 标签：android

我的倒计时计时器如下

```
public class MyCountDownTimer extends CountDownTimer implements Parcelable
{

    Context mContext;

    long tempMillisInFuture     = 0;
    long tempCountDownInterval  = 0;

    Ringtone mRingTone      = null;
    Vibrator mVibratorObj   = null;
    List<Object> mlistObjs  = null;

    int isVibratingOn       = 0;

    public MyCountDownTimer(long millisInFuture, long countDownInterval, Ringtone ringTone, Context context, List<Object> listObjs) 
    {
        super(millisInFuture, countDownInterval);
        // TODO Auto-generated constructor stub
        mRingTone   = ringTone;
        mContext    = context;
        mlistObjs   = listObjs;

        tempMillisInFuture      = millisInFuture;
        tempCountDownInterval   = countDownInterval;
    }

    @Override
    public void onFinish() 
    {

    }
    @Override
    public void onTick(long millisUntilFinished) 
    {
        // TODO Auto-generated method stub
        try 
        {
            System.out.println(" millisUntilFinished  ..................... ............. "+millisUntilFinished);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub

    }
} 
```

我创建了 CountDownTimer 的对象如下

```
timer = new MyCountDownTimer(10000, 1000, ringTone, context, listObjs);
timer.start(); 
```

添加到捆绑包中

```
Bundle bundle = new Bundle();
bundle.putParcelable("Timer", timer); 
```

开始其他活动

```
Intent intentPopUp = new Intent(context, DialogPopUp.class);
intentPopUp.putExtras(bundle);
startActivity(intentPopUp); 
```

在**DialogPopUp.java 文件**中，我试图检索计时器对象，但它给了我异常

```
MyCountDownTimer timer = (MyCountDownTimer)bundle.getParcelable("Timer"); 
```

**例外是：**

```
android.os.BadParcelableException: Parcelable protocol requires a Parcelable.Creator object called  CREATOR on class com.iprospl.iprohabittrackbeta.iproreminder.MyCountDownTimer
    at android.os.Parcel.readParcelable(Parcel.java:1975)
    at android.os.Parcel.readValue(Parcel.java:1854)
    at android.os.Parcel.readMapInternal(Parcel.java:2094)
    at android.os.Bundle.unparcel(Bundle.java:223)
    at android.os.Bundle.getBoolean(Bundle.java:761)
    at com.iprospl.iprohabittrackbeta.iproreminder.ReminderDialogPopUp.onCreate(ReminderDialogPopUp.java:97)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

我可能会**遗漏一些东西来制作可包裹的物体**。
如果有人知道，请回复我。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:41:25.530

所有 Parcelables 必须有一个 CREATOR 实现以下两种方法

```
public static final Parcelable.Creator<MyCountDownTimer> CREATOR = new Parcelable.Creator<MyCountDownTimer>() {
    public MyCountDownTimer createFromParcel(Parcel in) {
        return new MyCountDownTimer(in);
    }

    public MyCountDownTimer[] newArray(int size) {
        return new MyCountDownTimer[size];
    }
}; 
```

# android - Android套接字应用程序崩溃

> ID：15568862
> 
> 赞同：0
> 
> 时间：2013-03-22T11:10:00.550
> 
> 标签：android, sockets, client-server

我希望我的应用程序连接到服务器。我只想要客户。

```
protected void onCreate(Bundle savedInstanceState) {
    //...
    try {
             InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
             socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);

    } catch (UnknownHostException e1) {
         //... 
    } catch (IOException e1) {
         //...
    }
} 
```

但是应用程序只是崩溃了。我通过按一个按钮开始了这项活动。你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:16:29.010

您需要在一个线程中执行所有阻塞进程，并释放主 UI 线程，例如：

```
protected void onCreate(Bundle savedInstanceState) {
    //...
    new Thread(){
        public run(){
            try {
                InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
            } catch (UnknownHostException e1) {
                //... 
            } catch (IOException e1) {
                //... 
            }
        }
    }.start();
} 
```

# android - 在带有位图的 LayerDrawable 上使用 setLayerInset 会产生意想不到的结果

> ID：15568867
> 
> 赞同：4
> 
> 时间：2013-03-22T11:10:21.893
> 
> 标签：android, android-drawable

我正在使用 LayerDrawable 将小点位图（“热点”）动态放置在大位图图像上。索引 0 处的图层包含大图像。图像上点的位置是根据大图像的百分比指定给我的。例如，我可能有一个热点，它应该位于大型基础图像左侧的 50% 和顶部的 75%。为了将点定位在图像的正确部分，我使用

```
setLayerInset(layer, leftOffset, topOffset, rightOffset, bottomOffset) 
```

并根据包含 LayerDrawable 的 ImageView 的宽度和高度计算偏移量。我很高兴计算是正确的，并且正在检索正确的高度和宽度，并希望正确显示点，但事实并非如此。点沿 Y 轴倾斜，并且它们的位置不正确（太高且向左太远）。有没有人遇到过类似的问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T11:10:21.893

我花了一天半的时间来解决这个问题，试图弄明白这些数字，这就是我发现的：

在我正在处理的情况下，第一层包含 BitmapDrawable 并且我正在为后续层设置插图，调用中的偏移量：

setLayerInset（层，leftOffset，topOffset，rightOffset，bottomOffset）

是**相对于第一层中位图的尺寸的**，即使这些尺寸大于放置 DrawableLayer 的视图（例如，当视图自动重新调整位图尺寸时）。

离奇和出乎意料，但却是真实的。希望这可以节省一些时间。

# php - Jquery Ajax 和 json

> ID：15568869
> 
> 赞同：1
> 
> 时间：2013-03-22T11:10:23.477
> 
> 标签：php, jquery

我正在通过 ajax 向 mysql 查询发送一个值。我从查询中得到输出作为数组。我用了`echo json_encode($var);`

如果我的数组大小大于 1，则不会调用我的成功函数。我可以在 fire bug 中看到响应和状态代码 200。

我应该如何在我的成功函数中检索值？

```
 success: function(data){
         ob = jQuery.parseJSON(data); 
  } 
```

**从 firebug更新** 我的 Json 响应

```
{"uid":"4",
"name":"ram\u00fcrmeg\u00f6zl\u00fcer",
"pic_big":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-prn1\/4149__3333_n.jpg"}
    $.ajax({
        type: "POST",
        url: "x.php",
        dataType: 'json',
        data: y,
        success: function(data){    
         }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:34:28.590

你可以试试：

```
 $.ajax({
    type: "POST",
        url: "x.php",
        dataType: 'json',
        data: y,
        success: function(data){

           $.each(data, function() {
              var uid = this.uid; // etc
           } 

          // this works alone if your response is wrapped in [ ], if not:
          if(!data.length) {
              var uid = data.uid;
          } else { // above $.each code 
          }

      } 
```

这里的 jsFiddle：http: [//jsfiddle.net/Y73xe/](http://jsfiddle.net/Y73xe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:36:51.817

您的响应已经是一个对象，无需解析它。只需执行此操作即可获取值：

```
console.log(data.uid);
console.log(data.name);
console.log(data.pic_big); 
```

或者你想用这些值做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:19:03.063

试试下面的，看看你是否收到任何警报。

```
if(!$.isEmptyObject(data))
       { 
       alert (data);  
       var len = data.length;
       for (var i = 0; i< len; i++) {
    var var1 = [data[i].uid];
    var var2 = [data[i].name];
            var var3 = [data[i].pic_big];   

      }
else{alert('No data')} 
```

# html - 我怎样才能使用html5 标签播放aac文件？

> ID：15568884
> 
> 赞同：9
> 
> 时间：2013-03-22T11:10:56.333
> 
> 标签：html, audio, aac

```
<audio controls>
  <source src="xxx.aac" type="audio/aac">
</audio> 
```

我可以让它在 safari 中工作，但不能在 chrome 和 firefox 中工作。任何解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T11:14:12.463

只有 Safari 和 IE 支持 .aac。以下是每个浏览器支持的内容：

*   Internet Explorer 9.0+：.mp3、.aac
*   铬：.ogg、.mp3、.wav、.aac*
*   火狐：.ogg、.wav
*   Safari：.mp3、.aac、.wav
*   歌剧：.ogg、.wav

* [Chrome 似乎支持 .aac](http://www.chromium.org/audio-video)，但它并未包含在官方支持的文件扩展名列表中。

我建议同时使用 .ogg 和 .mp3 或 .ogg 和 .aac 来涵盖所有基础。

### 参考

*   [HTML 5 Doctor - HTML5 音频，播放状态](http://html5doctor.com/html5-audio-the-state-of-play/)
*   [Chromium - 音频/视频](http://www.chromium.org/audio-video)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-31T08:29:27.703

`<audio controls="controls"> <source src="xxx.aac" type="audio/mp4" /> </audio>`

```
+---------------------+-----+-----+-----+-----+
| Browser             | Ogg | MP3 | AAC | Wav |
+---------------------+-----+-----+-----+-----+
| Internet Explorer 9 | No  | Yes | Yes | No  |
| Firefox 5           | Yes | No  | No  | Yes |
| Chrome 12           | Yes | Yes | Yes | Yes |
| Safari 5            | No  | Yes | Yes | Yes |
| Opera 11.5          | Yes | No  | No  | Yes |
+---------------------+-----+-----+-----+-----+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-15T20:45:18.417

AAC 音频格式似乎在大多数浏览器中被 HTML5 广泛支持，只要它位于 MP4 容器中。例如，apple .m4a 文件是仅包含音频文件的 MP4，通常是 AAC 文件。

.aac 文件本身不会得到广泛支持。

因此：

```
<audio controls="controls">
    <source src="xxx.m4a" type="audio/mpeg" />
</audio> 
```

来源： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats)

请参阅浏览器兼容性图表 - “MP4 中的 AAC”行和脚注。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-23T06:40:24.057

```
 <source src="test.acc" type="audio/ogg; codecs=vorbis" /> 
```

这对我有用，因为有人仍在寻找答案

# graph - matlab中的3-D图

> ID：15568897
> 
> 赞同：0
> 
> 时间：2013-03-22T11:11:38.513
> 
> 标签：graph, plot

我有 3 个参数 x、y、z，我想问一下如何在 matlab 中绘制 3-D 图。

```
49.2088   18.7600   60.0000
49.2088   18.7599   65.0000
49.2089   18.7599   59.0000
49.2089   18.7600   62.0000
49.2090   18.7600   68.0000
49.2090   18.7600   65.0000
49.2090   18.7600   65.0000
49.2091   18.7600   66.0000
49.2091   18.7600   71.0000
49.2091   18.7600   78.0000
49.2092   18.7601   80.0000
49.2093   18.7601   77.0000
49.2093   18.7601   82.0000
49.2094   18.7602   80.0000
49.2093   18.7602   81.0000
49.2091   18.7605   54.0000
49.2090   18.7605   50.0000
49.2087   18.7608   66.0000
49.2087   18.7608   66.0000
49.2084   18.7611   75.0000
49.2083   18.7611   75.0000 
```

图的形状应该像[http://uloz.to/xGWT2Sz/graph-jpg](http://uloz.to/xGWT2Sz/graph-jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:21:45.967

看看这个例子

```
% Load the spectra data
load spectraData masscharge time spectra;

% Create the 3D plot
figure;
plot3(masscharge, time, spectra);
box on;

% Set the viewing angle and the axis limits
view(26, 42);
axis([500 900 0 22 0 4e8]);

% Add title and axis labels
xlabel('Mass/Charge (M/Z)');
ylabel('Time');
zlabel('Ion Spectra');
title('Extracted Spectra Subset'); 
```

**3-D 看起来洛克**

[![图片](../Images/f285231a6abadee4ae9762842fb4da9f.png)](https://i.stack.imgur.com/9E3Vu.png)
[（来源：[mathworks.com](http://www.mathworks.com/matlabcentral/fx_files/35262/1/content/html/Line_Plot_3D_01.png)）]

为了更好的学习[**访问这个**](https://in.mathworks.com/products/matlab/plot-gallery.html)

# php - 子页面及其特色图片不会拉到 wordpress 的父页面中

> ID：15568911
> 
> 赞同：0
> 
> 时间：2013-03-22T11:12:16.557
> 
> 标签：php, wordpress-theming, wordpress

由于 Genisis 框架中的某些原因，wordpress 以下代码没有拉出子页面及其特色图像

```
 add_filter( 'body_class', 'add_body_class' );
function add_body_class( $classes ) {
   $classes[] = 'portfolio';
return $classes;
}

add_filter( 'genesis_pre_get_option_site_layout', '__genesis_return_full_width_content'         ); // Force Full-Width Layout
remove_action( 'genesis_before_loop', 'genesis_do_breadcrumbs' ); // Removes     breadcrumbs
remove_action( 'genesis_post_title','genesis_do_post_title' ); // Removes post title
remove_action( 'genesis_post_content', 'genesis_do_post_content' ); // Removes content
add_action( 'genesis_post_content', 'child_do_content' ); // Adds your custom page code/content

     // Do Custom Content
function child_do_content() { ?>

<?php global $wpdb; ?>
<?php the_content(); ?>
<?php
$child_pages = $wpdb->get_results("SELECT *    FROM $wpdb->posts WHERE post_parent = ".$post->ID."    AND post_type = 'page' ORDER BY menu_order", 'OBJECT');    ?>
<?php if ( $child_pages ) : foreach ( $child_pages as $pageChild ) : setup_postdata( $pageChild ); ?>
<?php echo get_the_post_thumbnail($pageChild->ID, 'thumbnail'); ?>
 <a href="<?php echo  get_permalink($pageChild->ID); ?>" title="<?php echo $pageChild->post_title; ?>"><?php echo $pageChild->post_title; ?></a>
<?php endforeach; endif; ?>

<?php }genesis(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T14:43:20.190

错误在于您的`get_results()`论点。

首先分配`post->ID`给一个变量，然后`get_results()`像这样使用它：

```
$parent = $post->ID;
$child_pages = $wpdb->get_results("SELECT *    FROM $wpdb->posts WHERE post_parent = $parent AND post_type = 'page' ORDER BY menu_order", 'OBJECT');    ?> 
```

此外，我不确定您是否可以使用`menu_order`以及您使用`'page'`的方式，请查看[文档](http://codex.wordpress.org/Class_Reference/wpdb)如何获取这些。

# c# - 如何让 VS 假设一切都是默认公开的

> ID：15568912
> 
> 赞同：3
> 
> 时间：2013-03-22T11:12:16.933
> 
> 标签：c#, visual-studio-2012, resharper, code-snippets, access-levels

我使用 VS2012 和 ReSharper 7 编写 C# 代码。我的项目很少如此庞大或复杂，以至于需要考虑精细的访问级别。我通常更容易将所有内容公开，而不是花费时间和精力来弄清楚应该以什么方式开放访问。无论如何，我是唯一一个使用我的代码的人。

我意识到这并不适用于所有人，并且我意识到访问修饰符是该语言的重要特征，应该谨慎使用。但在我目前的情况下，这并不重要，一切都可以公开（实际上我确实将它们公开）。我怀疑这适用于许多其他程序员，尤其是非企业程序员。

但是，VS2012 的趋势是默认为最低访问级别。例如，如果我通过键入来添加一个新字段`int id_number;`，那么我将分号`private`添加到该字段的那一刻，然后我必须返回并更改它`public`是否是我的意图（通常是）。

如何让 VS/ReSharper 生成具有最高可能访问级别的类、字段、方法等（本质上，让一切`public`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:17:15.840

你不能。

Resharper 添加了`private`，因为如果您不指定任何访问修饰符，这是默认设置。
因此，Resharper 不会更改您的字段的访问级别。它只是使其明确，因此，Resharper 没有任何自动更改访问级别的功能。

但是您可以轻松使用自动属性。甚至还有一个实时模板。只需键入`prop`并按 TAB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:20:53.387

对于类和接口（键入`class MyClass`将导致 ReSharper 将“类”识别为快捷方式，并插入模板`class MyClass { }`而不是`public class MyClass { }`），可以通过 ReSharper -> 模板资源管理器编辑模板。

诸如由 Extract... 命令创建的生成方法之类的东西似乎是由 Visual Studio 的代码片段确定的。这些位置可以在代码片段管理器（Ctrl+K，B）中找到。每个片段都是一个 XML 文件，[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms171418.aspx)描述了编辑它们。

# android - 导出数据库的光保护

> ID：15568916
> 
> 赞同：0
> 
> 时间：2013-03-22T11:12:38.580
> 
> 标签：android, database, file

在我的应用程序中，我实现了通过复制 sdcard 上的数据库文件来导出数据库的可能性。在不加密文件或需要特殊密钥来读取它的情况下，我只想确保拾取文件的任何人都能够通过在 sqlite 文件阅读器中打开它来读取数据库结构或数据。

如何为我的文件实施轻量级的简单保护？

以下是我的数据库导出代码。

```
public void exportDB() {
    final String destFolder = "/"+Constants.Files.APP_FOLDER+"/"+Constants.Files.BACKUP_FOLDER;
    try {
        File myBackupDir = new File(Environment.getExternalStorageDirectory() + destFolder);
        if(!myBackupDir.exists() || !myBackupDir.isDirectory()) myBackupDir.mkdirs();
        if(myBackupDir.isDirectory()){
            File data = Environment.getDataDirectory();
            if (Environment.getExternalStorageDirectory().canWrite()) {
                final String  currentDBPath= "//data//" + Constants.Files.PACKAGE_NAME + "//databases//" + Constants.Files.DB_NAME;
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(myBackupDir, Constants.Files.DB_NAME);
                if(currentDB.isFile()){
                    copyFile(new FileInputStream(currentDB), new FileOutputStream(backupDB))
                }
            }
        }
    } catch (Exception e) {
        Log.e(mTag, "exportDB", e);
    }
}

public static void copyFile(FileInputStream fromFile, FileOutputStream toFile) throws IOException {
    FileChannel fromChannel = null;
    FileChannel toChannel = null;
    try {
        fromChannel = fromFile.getChannel();
        toChannel = toFile.getChannel();
        fromChannel.transferTo(0, fromChannel.size(), toChannel);
    } finally {
        try {
            if (fromChannel != null) {
                fromChannel.close();
            }
        } finally {
            if (toChannel != null) {
                toChannel.close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:57:35.017

您可以使用[sqlcipher](http://sqlcipher.net/)。它支持[android](http://sqlcipher.net/sqlcipher-for-android/)。您可以使用现有代码导出它，因为数据库已经加密。

# c# - 阅读器关闭时尝试阅读无效 - 但没有关闭阅读器？

> ID：15568918
> 
> 赞同：0
> 
> 时间：2013-03-22T11:12:46.173
> 
> 标签：c#, sql, sql-server-ce

在我的 C# 应用程序中，我正在与 SQL Compact 数据库进行交互。在这种情况下，我有三个表；`customer`, `list`, and `customerlist`（客户和列表是多对多的关系）。

我有一个函数，当我想删除一个列表时我会调用它。该函数还从表中删除相关条目`customerlist`，只是为了清洁（因为如果列表本身已被删除，它们将失效）。

我的代码是这样的：

```
 private void clearRedundantSubscriptions()
    {
        string sql;
        // Check if there are any entries in customerlist table which point to non-existing lists
        try
        {
            sql = "select distinct cl.listid from customerlist cl inner join list l on cl.listid != l.listid";
            SqlCeCommand cmdGetDisusedLists = new SqlCeCommand(sql, DbConnection.ceConnection);
            SqlCeDataReader reader = cmdGetDisusedLists.ExecuteReader();
            while (reader.Read())
            {
                DbFunctions.DeleteList(reader.GetInt32(0), false, false);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error cleaning up list entries." + ex.Message);
        }
        return;
    }

    public static bool DeleteList(int id, bool display, bool close)
    {
        string sql;
        string title = "";
        bool ranOk = false;
        try
        {
            sql = "select ShortDesc from list where listid=" + id;
            DbFunctions.runSQL(sql, out title);
            sql = "delete from list where ListId=" + id;
            SqlCeCommand cmdDelList = new SqlCeCommand(sql, DbConnection.ceConnection);
            cmdDelList.ExecuteNonQuery();
            sql = "delete from customerlist where listid=" + id;
            SqlCeCommand cmdDelEntries = new SqlCeCommand(sql, DbConnection.ceConnection);
            cmdDelEntries.ExecuteNonQuery();
            if (display)
                General.doneWork(title + " list deleted.");
            ranOk = true;
        }
        catch (Exception ex)
        {
            if (display)
                MessageBox.Show("Unable to delete list. " + ex.Message);
        }
        finally
        {
            if (close)
                DbConnection.closeConnection();
        }
        return ranOk;
    }

    public static void closeConnection()
    {
        if (_sqlCeConnection != null)
            _sqlCeConnection.Close();
    } 
```

你会注意到在我的 deletelist 函数中，我传入了一个名为“close”的布尔参数。我添加了这个，因为在阅读器内部关闭与数据库的连接会导致上述错误。所以现在，如果我想在阅读器中使用这个函数，我调用 deleteList 函数并确保 'close' 参数作为`false`. 这不是问题 - 这意味着在此函数中**未**调用 DbConnection.closeConnection。

所以我没有关闭阅读器，也没有关闭数据库连接。那么有什么想法为什么我仍然会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:06:26.407

我已经修改了你的代码，试试这个。

我不知道您的 DbFunctions.runSQL 方法内部发生了什么，因此您可能需要在调用之前重新打开连接。

```
private void clearRedundantSubscriptions()
{
    string sql;
    // Check if there are any entries in customerlist table which point to non-existing lists
    var list = new List<int>();
    try
    {
        if (DbConnection.ceConnection.State == ConnectionState.Closed)
            DbConnection.ceConnection.Open();

        sql = "select distinct cl.listid from customerlist cl inner join list l on cl.listid != l.listid";

        SqlCeCommand cmdGetDisusedLists = new SqlCeCommand(sql, DbConnection.ceConnection);
        SqlCeDataReader reader = cmdGetDisusedLists.ExecuteReader();
        while (reader.Read())
        {
            list.Add(reader.GetInt32(0));
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error cleaning up list entries." + ex.Message);
        throw;
    }
    finally
    {
        DbConnection.closeConnection();
    }

    foreach(var id in list)
    {
        DeleteList(id,false);

    }
    return;
}

public static bool DeleteList(int id, bool display)
{
    string sql;
    string title = "";
    bool ranOk = false;
    try
    {
        sql = "select ShortDesc from list where listid=" + id;
        DbFunctions.runSQL(sql, out title);

        sql = "delete from list where ListId=" + id;
        SqlCeCommand cmdDelList = new SqlCeCommand(sql, DbConnection.ceConnection);
        cmdDelList.ExecuteNonQuery();
        sql = "delete from customerlist where listid=" + id;
        SqlCeCommand cmdDelEntries = new SqlCeCommand(sql, DbConnection.ceConnection);
        cmdDelEntries.ExecuteNonQuery();
        if (display)
            General.doneWork(title + " list deleted.");
        ranOk = true;
    }
    catch (Exception ex)
    {
        if (display)
            MessageBox.Show("Unable to delete list. " + ex.Message);
    }
    finally
    {
            DbConnection.closeConnection();
    }
    return ranOk;
}

public static void closeConnection()
{
    if (_sqlCeConnection != null)
        _sqlCeConnection.Close();
} 
```

# ssl - Heroku ssl：带有 GlobalSign ExtendedSSL 的端点

> ID：15568922
> 
> 赞同：3
> 
> 时间：2013-03-22T11:12:50.390
> 
> 标签：ssl, heroku, ssl-certificate

我已经注册了 GlobalSign ExtendedSSL。

我只是不知道如何将其添加到`ssl:endpoint`插件中。

当我注册 ExtendedSSL 时，我必须生成 CSR 证书，其中包含以下文件：

*   私钥.key
*   www.domain.com_csr.pem

签名完成后，GlobalSign 给了我以下信息：

*   SSL 证书
*   扩展 SSL 中间证书
*   扩展验证交叉证书

我结合了 SSL 证书、扩展 SSL 中间证书和扩展验证交叉证书 server.crt。我已将 private-key.key 复制到 server.key

当我尝试将其添加到添加中时，我得到：

```
$ heroku certs:add server.crt server.key --app myapp
Resolving trust chain... failed
! No valid, non-passphrase-protected keys given. 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T16:58:56.720

我找到了答案。

私钥受密码保护。您不能将密码密钥添加到 heroku。您可以通过运行删除密码：

```
openssl rsa -in private-key.key -out private-key-new.key 
```

然后运行：

```
heroku certs:add server.crt private-key-new.key --app myapp 
```

# c++ - Mountain Lion 上的 Mex 文件：显式实例化错误

> ID：15568925
> 
> 赞同：2
> 
> 时间：2013-03-22T11:12:59.390
> 
> 标签：c++, matlab

我在 Mountain Lion 上使用 MATLAB r2012b，安装的 XCode 版本是 4.6.1。我还使用了[http://www.mathworks.it/support/solutions/en/data/1-IXBVKD/](http://www.mathworks.it/support/solutions/en/data/1-IXBVKD/)上的补丁，然后我输入了“mex - setup”并选择了唯一可用的选项

```
1: /Applications/MATLAB_R2012b.app/bin/mexopts.sh : Template Options file for building gcc MEX-files 
```

我正在尝试使用一个使用 mex 文件的稀疏建模框架（用 C++ 编写）。为了安装以前的框架，我必须在框架内调用一个调用 mex 函数的 matlab 文件：但是当我调用这个函数时，我收到以下消息......

```
compilation of: -I./linalg/ -I./decomp/ -I./dictLearn/ dictLearn/mex/mexTrainDL.cpp
./linalg/linalg.h: In member function 'void Matrix<T>::print(const std::string&) const [with T = float]':
./linalg/linalg.h:1084:   instantiated from 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]'
./linalg/linalg.h:1084:   instantiated from 'void Matrix<T>::print(const std::string&) const [with T = float]'
dictLearn/mex/mexTrainDL.cpp:197:   instantiated from here
./linalg/linalg.h:1084: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available
./linalg/linalg.h: At global scope:
./linalg/linalg.h: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':
./linalg/linalg.h:1084:   instantiated from 'void Matrix<T>::print(const std::string&) const [with T = float]'
dictLearn/mex/mexTrainDL.cpp:197:   instantiated from here
./linalg/linalg.h:1084: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available
./linalg/linalg.h: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':
./linalg/linalg.h:1084:   instantiated from 'void Matrix<T>::print(const std::string&) const [with T = float]'
dictLearn/mex/mexTrainDL.cpp:197:   instantiated from here
./linalg/linalg.h:1084: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available

mex: compile of ' "dictLearn/mex/mexTrainDL.cpp"' failed. 
```

问题与框架无关。谷歌搜索我发现我不是唯一一个遇到 matlab 问题的人，但我不知道如何解决它。非常感谢您的任何帮助。

马蒂亚

更新：

我发现错误是由以下代码块产生的

区块 1：

```
/// print the sparse matrix
template<typename T> inline void SpMatrix<T>::print(const string& name) const {
    cerr << name << endl;
    cerr << _m << " x " << _n << " , " << _nzmax << endl;
    for (int i = 0; i<_n; ++i) {
        for (int j = _pB[i]; j<_pE[i]; ++j) {
            cerr << "(" <<_r[j] << "," << i << ") = " << _v[j] << endl;
        }
     }
}; 
```

第 2 座

```
/// Print the matrix to std::cout
template <typename T> inline void Matrix<T>::print(const string& name) const {
   std::cerr << name << std::endl;
   std::cerr << _m << " x " << _n << std::endl;
   for (int i = 0; i<_m; ++i) {
      for (int j = 0; j<_n; ++j) {
         printf("%10.5g ",static_cast<double>(_X[j*_m+i]));
         //         std::cerr << _X[j*_m+i] << " ";
      }
      printf("\n ");
      //std::cerr << std::endl;
   }
   printf("\n ");
}; 
```

区块 3

```
template <typename T> void ShiftMatrix<T>::print(const string& name) const {
   cerr << name << endl;
   cerr << "Shift Matrix: " << _shifts << " shifts" << endl;
   _inputmatrix->print(name);
}; 
```

和第 4 块

```
template <typename T> void DoubleRowMatrix<T>::print(const string& name) const {
   cerr << name << endl;
   cerr << "Double Row Matrix" << endl;
   _inputmatrix->print(name);
}; 
```

并且错误总是由于上述块的第一行，即...

```
cerr << name << endl; 
```

在 4 个块中注释上述行，编译成功终止。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:41:19.863

我通过该行添加编译标志“-mmacosx-version-min=10.7”解决了这个问题

```
compile_flags=[compile_flags ' -mmacosx-version-min=10.7']; 
```

在 SPAMS 框架的 compile.m 中，紧接在调用 mex 的 for 块之前。

这个解决方案来自[Trying to build muParser: error: explicit instantiation of 'std::basic_ostream but no definition available](https://stackoverflow.com/questions/11748504/trying-to-build-muparser-error-explicit-instantiation-of-stdbasic-ostream-b) and [Building libsigc++ failed (std::basic_ostream explicit instantiation)](https://stackoverflow.com/questions/15233978/building-libsigc-fails-stdbasic-ostream-explicit-instantiation)这似乎与其他包相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T13:12:11.800

我通过在 mexopts.sh 中将 MACOSX_DEPLOYMENT_TARGET='10.5' 更改为 '10.6' 解决了类似的问题。

# c# - 在 C# 中从一个系统到另一个系统的文件传输

> ID：15568926
> 
> 赞同：2
> 
> 时间：2013-03-22T11:13:01.017
> 
> 标签：c#

我有这个作为客户端的 c# 程序从服务器接收文件。有时它可以无缝运行。有时它会在`fileName = Encoding.ASCII.GetString(dataByte, 4, fileNameLen);`.

```
ArgumentOutOfRange Exception
Index and count must refer to a location within the buffer.
Parameter name: bytes 
```

如果值为`fileNameLen`is `8`or `12`then 它可以正常工作。否则会`1330795077`。这是为什么？谁能解释我为什么会这样？请。这是我的代码。

```
 string fileName = string.Empty;
        int thisRead = 0;
        int blockSize = 1024;
        Byte[] dataByte = new Byte[blockSize];
        lock (this)
        {
            string folderPath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)+"\\";
            ns.Read(dataByte, thisRead, blockSize);
            int fileNameLen = BitConverter.ToInt32(dataByte, 0);

            fileName = Encoding.ASCII.GetString(dataByte, 4, fileNameLen);
            Stream fileStream = File.OpenWrite(folderPath + fileName);
            fileStream.Write(dataByte, 4 + fileNameLen, (1024 - (4 + fileNameLen)));
            while (true)
            {
                thisRead = ns.Read(dataByte, 0, blockSize);
                fileStream.Write(dataByte, 0, thisRead);
                if (thisRead == 0)
                    break;
            }
            fileStream.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:20:34.680

> index 和 count 不表示以字节为单位的有效范围。

**编码.ASCII.GetString()**

引发 ArgumentOutOfRangeException 的原因如下：

*   索引或计数小于零。

*   index 和 count 不表示以字节为单位的有效范围。

*计数*在您的情况下：*fileNameLen*

该文档指出：

> 要转换的数据，例如从流中读取的数据，只能在顺序块中可用。在这种情况下，或者如果数据量太大需要将其分成更小的块，应用程序应该分别使用GetDecoder方法或GetEncoder方法提供的[Decoder或Encoder。](http://msdn.microsoft.com/en-us/library/system.text.decoder.aspx)

查看[文档](http://msdn.microsoft.com/en-us/library/38b953c8.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:22:15.423

您需要检查`dataByte`它何时被转移的内容。如果您尝试从中创建整数`dataByte`并将其转换为 Int32，`fileNameLen`您可能会收到愚蠢的值，例如`1330795077`，这不是有效的索引`Encoding.ASCII.GetString(dataByte, 4, fileNameLen);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:28:15.120

在您的代码中`ns.Read(dataByte, thisRead, blockSize);`应该返回一个 int 值，表示读取的实际长度。使用该返回值来控制要转换为字符串的字节数，以避免创建愚蠢的值。

# android - proguard 不会忽略引用的库

> ID：15568927
> 
> 赞同：6
> 
> 时间：2013-03-22T11:13:06.463
> 
> 标签：android, proguard

我使用 proguard，在 proguard-project.txt 中，我有忽略引用类的行

-不要警告 com.google.ads.**

日志说：

> 警告：com.flurry.android.ab：找不到引用的类 com.google.ads.InterstitialAd 警告：com.flurry.android.ab：找不到引用的类 com.google.ads.InterstitialAd 警告：com. flurry.android.ab：找不到引用的类 com.google.ads.InterstitialAd 警告：com.flurry.android.ab：找不到引用的类 com.google.ads.AdRequest 警告：com.flurry.android。 ab：找不到引用的类 com.google.ads.AdRequest
> 
> …………
> 
> 您应该检查是否需要指定其他程序 jar。警告：有 277 个未解析的类或接口引用。您可能需要指定其他库 jar（使用“-libraryjars”）。java.io.IOException: 请先更正上述警告。在 proguard.Initializer.execute(Initializer.java:321) 在 proguard.ProGuard.initialize(ProGuard.java:211) 在 proguard.ProGuard.execute(ProGuard.java:86) 在 proguard.ProGuard.main(ProGuard.java: 492)

我将行 -libraryjars ./libs/FlurryAgent.jar 包含到配置文件中。我的问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T22:40:56.260

正如你所尝试的，你应该把这一行放在`proguard-project.txt`：

```
-dontwarn com.google.ads.** 
```

您必须确保 ProGuard 实际上正在使用此配置文件，此行位于`project.properties`：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

这是 Android SDK r20 或更高版本的标准行（旧版本仅使用`proguard.config=proguard.cfg`，在这种情况下，您必须指定整个配置，而不是依赖于 SDK 中的配置）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T07:58:04.190

只需将这些行添加到您的 proguard-android.txt 中。

```
# Flurry SDK support
-dontwarn com.google.ads.**
-dontwarn com.inmobi.androidsdk.**
-dontwarn com.jumptap.adtag.**
-dontwarn com.millennialmedia.android.**
-dontwarn com.mobclix.android.sdk.**
-dontwarn com.flurry.android.monolithic.sdk.** 
```

# android - 在android中使用意图自动选择youtube

> ID：15568930
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:13:18.143
> 
> 标签：android, android-intent, youtube

我想在 youtube 上上传视频，我正在使用此代码上传视频，但问题是，每当我从我的应用程序中单击按钮时，我必须从电子邮件、蓝牙、youtube 的列表视图中选择 youtube， ETC..

所以我想要一个永久的解决方案，只要我从我的应用程序中单击一个按钮，它就会自动移动到 youtube 而不显示列表视图。

所以，这是我用来通过 youtube 上传视频的代码。

```
 **ContentValues content = new ContentValues(4);
                content.put(Video.VideoColumns.TITLE, "My Test");
                content.put(Video.VideoColumns.DATE_ADDED,
                System.currentTimeMillis() / 1000);
                content.put(Video.Media.MIME_TYPE, "video/mp4");
                content.put(MediaStore.Video.Media.DATA, outputFile);
                ContentResolver resolver = getContentResolver();
                Uri uri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,content);

                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("video/*");
                intent.putExtra(Intent.EXTRA_STREAM, uri);
                startActivity(Intent.createChooser(intent, "Share using"));** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:21:19.947

这可能对你有帮助，

```
String url = "http://youtu.be/mo1DmO9JH3Y"; // Your Url here..
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube://"+url));  
activity.startActivity(intent); 
```

# php - 改进我的解压缩和移动功能 - PHP

> ID：15568932
> 
> 赞同：0
> 
> 时间：2013-03-22T11:13:25.377
> 
> 标签：php, wordpress, amazon-s3, zip, unzip

我是 PHP 新手，因此正在寻找一些关于我创建的 PHP 函数的建议，以便在 Wordpress 安装中使用。

正如您从下面的代码中看到的那样，当管理员之一在待处理的帖子上按下“发布”时，它就会运行。

它需要一个用户通过 Gravity Forms 上传的 Zip 文件，然后仅解压缩 .mp3 扩展名。重新压缩所有文件并将其移动到我们 Amazon S3 目录中的新文件夹中。

该代码是根据我有限的知识拼凑而成的，并在此过程中提供了一些帮助。

所以，这就是我最终的结果：

```
 add_action('pending_to_publish', 'unzip_to_s3');  
   function unzip_to_s3() { 
   global $post;
   global $wpdb;

   // Only run function if post is portfolio post type
    if ('portfolio' == $post->post_type) {

   // Set temp path
   $temp_path = '../wp-content/uploads/gravity_forms/1-9e5dc27086c8b2fd2e48678e1f54f98c/2013/02/tmp/';

   // Get filename from Zip file
   $file = get_post_meta($post->ID, 'file_url', true);
   $zip_file = basename($file);

   // Create full Zip file path
   $zip_file_path = $temp_path.$zip_file;

   // Generate unique name for temp sub_folder for unzipped files
   $temp_unzip_folder = uniqid('temp_TMS_', true);

   // Create full temp sub_folder path
   $temp_unzip_path = $temp_path.$temp_unzip_folder;

   // Make the new temp sub_folder for unzipped files
   if (!mkdir($temp_unzip_path, 0755, true)) {
    die('Error: Could not create path: '.$temp_unzip_path);
   }

   // Unzip files to temp unzip folder, ignoring anything that is not a .mp3 extension
   $zip = new ZipArchive();
   $filename = $zip_file_path;

   if ($zip->open($filename)!==TRUE) {
      exit("cannot open <$filename>\n");
   }

   for ($i=0; $i<$zip->numFiles;$i++) {
      $info = $zip->statIndex($i);
      $file = pathinfo($info['name']);
      if(strtolower($file['extension']) == "mp3") {
           file_put_contents($temp_unzip_path.'/'.basename($info['name']), $zip->getFromIndex($i));
      } else {
      $zip->deleteIndex($i);
      }
   }
   $zip->close();

   // Re-zip the unzipped mp3's and store new zip file in temp folder created earlier
   $temp_unzip_path = $temp_unzip_path.'/';
   $zip = new ZipArchive();
   $dirArray = array();
   $new_zip_file = $temp_unzip_path.$zip_file;

   $new = $zip->open($new_zip_file, ZIPARCHIVE::CREATE);
   if ($new === true) {
       $handle = opendir($temp_unzip_path);
       while (false !== ($entry = readdir($handle))) {
           if(!in_array($entry,array('.','..')))
           {
               $dirArray[] = $entry;
               $zip->addFile($temp_unzip_path.$entry,$entry);
           }
       }
       closedir($handle);
   } else {
       echo 'Failed to create Zip';
   }

   $zip->close();

   // Set Media bucket dir
   $bucket_path = '../wp-content/uploads/gravity_forms/1-9e5dc27086c8b2fd2e48678e1f54f98c/2013/02/mixtape2/';

   // Generate unique name for sub_bucket
   $sub_bucket = uniqid('TMS_', true);

   // Create full sub_bucket path
   $sub_bucket_path = $bucket_path.$sub_bucket;

   // Make the new sub_bucket
   if (!mkdir($sub_bucket_path, 0755, true)) {
    die('Error: Could not create path: '.$sub_bucket_path);
   }

   // Move mp3's to new sub_bucket 
   // Get array of all source files
   $files = scandir($temp_unzip_path);
   // Identify directories
   $source = $temp_unzip_path;
   $destination = $sub_bucket_path.'/';
   // Cycle through all source files
   foreach ($files as $file) {
    if (in_array($file, array(".",".."))) continue;
        // if move files is successful delete the original temp folder
        if (rename($source.$file, $destination.$file)) {
            rmdir($temp_unzip_path);
        }
    }

   // Delete original Zip file
   unlink($temp_path.$zip_file);

   // Update Custom field for new Zip file location
   update_post_meta($post->ID, 'file_url', 'http://themixtapesite.com/wp-content/uploads/gravity_forms/1-9e5dc27086c8b2fd2e48678e1f54f98c/2013/02/mixtape2/'.$sub_bucket.'/'.$zip_file);

   }
   } 
```

虽然这个功能确实有效，但我们正在处理大文件，所以它确实需要一段时间来处理......发生的事情是当管理员按下发布它触发这个功能但页面只是坐在那里直到它完成这个功能和然后会继续。此功能可能需要大约 5 分钟才能运行。

我正在寻找优化这个功能（在代码方面），但也看看是否有一种方法可以在后台运行它，以便管理员可以继续处理其他事情，而不必坐在那里等待。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:12:44.363

您可能想尝试 WP cron 并在此时安排任务，以便它在后台运行。这里有一些资源。基本概念是这样的。

```
if ( ! wp_next_scheduled( 'pending_to_publish' ) ) {
  wp_schedule_single_event($timestamp,'pending_to_publish');
}

add_action('pending_to_publish', 'unzip_to_s3'); 
```

[http://wpengineer.com/1908/use-wordpress-cron/](http://wpengineer.com/1908/use-wordpress-cron/)

[http://codex.wordpress.org/Category%3aWP-Cron_Functions](http://codex.wordpress.org/Category%3aWP-Cron_Functions)

[https://wordpress.stackexchange.com/questions/42694/run-a-cron-job-or-similar-in-the-background-of-wp-after-post-update-create](https://wordpress.stackexchange.com/questions/42694/run-a-cron-job-or-similar-in-the-background-of-wp-after-post-update-create)

# import - 如何使用php从服务器导出和导入mysql数据库

> ID：15568933
> 
> 赞同：0
> 
> 时间：2013-03-22T11:13:27.200
> 
> 标签：import, phpmyadmin, export

如何使用php从服务器导出和导入mysql数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:23:06.323

对于导出和导入，我使用 SSH 命令，它非常快。

对于导出数据库：

```
$db_host = '15.2.4.222’;                  // database server
$db_user = 'db_user';                    // database user name
$db_pwd = 'dbpasword';             // database password
$db_schema = 'db_name';         // name of database to be exported

    exec(sprintf(
    'mysqldump --opt -h%s -u%s -p%s %s | gzip > /var/www/vhosts/yoursitename.com/httpdocs/ backups_db/backup_filename_%s.sql.gz',
    $db_host,
    $db_user,
    $db_pwd,
    $db_schema,
    $today
    ));
    exit; 
```

现在进口：

```
$db_host = '15.2.4.222’;                  // database server
$db_user = 'db_user';                    // database user name
$db_pwd = 'dbpasword';             // database password
$db_schema = 'db_name';         // name of database to be exported

// Command to restore database      
exec("mysql -h [db server ip here] -u [db username here] –p[password here] [db name here] < /var/www/vhosts/yoursite.com/httpdocs/foldername_wherefile_exist/filename.sql");
// Example:
exec("mysql -h 15.2.4.222 -u db_username -ptestpassword test_db_name < /var/www/vhosts/phproots.com/httpdocs/backups_db/filename.sql"); 
```

请使用它来备份和恢复数据库。

# php - PHP插入中的mysqli_affected_rows

> ID：15568936
> 
> 赞同：1
> 
> 时间：2013-03-22T11:13:35.893
> 
> 标签：php, mysql, rows

我有这个代码：

```
if(mail($to, $subject, $message, $headers)){
    $insert_member_sql = "INSERT INTO members (id, username) VALUES('$id', '$username')";
    $insert_member_res = mysqli_query($con, $insert_member_sql);
    if(mysqli_affected_rows($con, $insert_member_res)>0){
    echo "1";
    }else{
    echo "0";
    }
}; 
```

发送电子邮件并将信息插入数据库时​​一切正常，但 mysqli_affected_rows 不起作用 - 如何在运行查询后编辑此代码以回显 1？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T11:15:07.707

改变这个

```
if(mysqli_affected_rows($con, $insert_member_res)>0) 
```

到

```
if(mysqli_affected_rows($con)>0) 
```

`mysqli_affected_rows`只需要`connection link`对象，但您传递了查询对象，这也是问题所在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-09T14:09:22.167

或者你可以回应它

```
echo mysqli_affected_rows($con); 
```

如果您当然想仔细检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:18:56.403

```
if(mail($to, $subject, $message, $headers)){
    $insert_member_sql = "INSERT INTO members (id, username) VALUES('$id', '$username')";

    if (!mysql_query($insert_member_sql) ){
    echo "1";
    }else{
    echo "0";
    }
}; 
```

# asp.net - 使用 HotTowel（Durandal 框架）+ VS2012 翻译视图

> ID：15568939
> 
> 赞同：5
> 
> 时间：2013-03-22T11:13:42.850
> 
> 标签：asp.net, asp.net-mvc, breeze, durandal, hottowel

我用 Durandal 和 Breeze 开发了一个 ASP.NET MVC 解决方案。我需要将前端翻译成法语和荷兰语。如何进行 Durandal/淘汰赛？

在经典的 ASP.NET MVC 解决方案中，我们有机会将视图呈现在服务器端（感谢 razor）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:04:24.693

为了扩展 Rob 尝试为 require.js 使用 i18n.js 插件的答案，这是我遵循的步骤（我正在 Visual Studio 中使用 Durandal 入门模板）。

1.  下载[i18n.js 插件](http://requirejs.org/docs/download.html#i18n)并将其放入`App`文件夹中。
2.  创建一个`App/nls`文件夹，您将在其中放置 require.js 资源包，例如`App/nls/welcomeBundle.js`.

    ```
    define({
        "root": {
            "displayName": "Welcome to the Durandal Starter Project!"
        },
        "fr-fr": true
    }); 
    ```

3.  你会看到我添加了一行来告诉 require.js 有一个法语版本可用。这将在 中创建`App/nls/fr-fr/welcomeBundle.js`，我在下面做了一些（更改为 le :D）

    ```
    define({
        "displayName": "Welcome to le Durandal Starter Project!"
    }); 
    ```

4.  require.js 最初需要使用语言环境进行配置（不能动态完成）。所以在 main.js 文件中，我声明了以下`getLocale()`函数，我用它来配置 require.js 的语言环境：

    ```
    function getLocale() {
        var locale = 'en-us';
        if (localStorage) {
            var storedLocale = localStorage.getItem('locale');
            locale = storedLocale || locale;
        }
        return locale;
    }

    requirejs.config({
        paths: {
            'text': 'durandal/amd/text'
        },
        locale: getLocale()
    }); 
    ```

5.  然后在welcome.js 模块中加载包并将其用于displayName 属性：

    ```
    define(function(require) {
        var bundle = require('i18n!nls/welcomeBundle');
        return {
            displayName: bundle.displayName,
            ...
        }
    }); 
    ```

6.  然后我将语言环境设置为法语并通过 JavaScript 重新加载页面：

    ```
     localStorage.setItem('locale', 'fr-fr');
     location.reload(); 
    ```

希望有帮助:)

**编辑：2013-04-04：**我更新了上面的内容以在 main.js 文件中而不是在 shell.js 模块中初始化语言环境，因为由于某种原因，在 shell 中加载包时没有正确使用语言环境模块。认为无论如何都应该尽快配置它。

# r - 根据限制将数值向量转换为二进制 (0/1)

> ID：15568942
> 
> 赞同：6
> 
> 时间：2013-03-22T11:13:48.200
> 
> 标签：r, vector

我有一个数字向量：

```
p = c(0.69, 0.43, 0.72, 0.62, 0.29, 0.7) 
```

我希望将这些值与一个限制进行比较，例如 0.5。如果值等于或大于截止值，则结果应为 1。小于 0.5 的值应变为 0。

我试过`ifelse`了，但它错误：

```
newvector = rep(0, length(p))
newvector = ifelse(p >= 0.5, newvector = 1, newvector = 0)
# Error in ifelse(p >= 0.5, newvector = 1, newvector = 0) : 
#   unused arguments (newvector = 1, newvector = 0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T11:16:37.823

您不需要`newvector`事先制作并将其用作`ifelse`导致错误的参数。

试试这个...

```
newvector <- ifelse( p>=0.5 , 1 , 0 ) 
```

但更好的是把它矢量化......

```
newvector <- as.integer( p >= 0.5 ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T11:14:54.887

只需使用：

```
newvector <- ifelse(p>=0.5,1,0) 
```

的第二个和第三个参数`ifelse`不是表达式，而是要返回的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T11:18:34.400

您也可以`findInterval`用于这种特殊情况：

```
findInterval(p, .5) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T11:21:24.587

在这种情况下，您可以使用`newvector<-round(p)`而不是`ifelse`.

# ibm-mobilefirst - ReferenceError：未定义 wlInitOptions

> ID：15568943
> 
> 赞同：0
> 
> 时间：2013-03-22T11:13:50.240
> 
> 标签：ibm-mobilefirst

我正在做一个工作灯项目。在我将工作灯从 5.0.5 更新到 5.0.6 之前，该项目运行良好。在浏览器模拟器中运行项目时出现以下错误。我在文件结构中没有找到文件 initOptions.js。 . 它是 wlInitOptions.js 还是 wlInitOptions 是它试图找到的文件 initOptions.js 中的变量？

```
ReferenceError: wlInitOptions is not defined 
```

# ios - 仅在我的 iOS 应用程序中将 tesseract 字符限制为 az 和 number

> ID：15568948
> 
> 赞同：0
> 
> 时间：2013-03-22T11:13:54.530
> 
> 标签：ios, ocr, tesseract

我正在使用 tesseract 来识别我的一个 iOS 项目中的字符。它现在正在读取所有字符，包括字母数字字符。但我只想读取字符 az 和数字 0-9。我关注[了 tesseract 正在寻找的限制字符](https://stackoverflow.com/questions/2363490/limit-characters-tesseract-is-looking-for)，但不知道如何在我的 iOS 应用程序中实现它。

谁能建议我如何在我的 iOS 项目中实现这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:29:51.260

您可以在提取之前使用 TessBaseAPI.SetVariable 指定白名单（允许的字符）

```
 tesseract->SetVariable("tessedit_char_whitelist", "abcdefghijklmnopqrstuvwxyz012345789"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T15:36:20.920

试试这个：

```
[tesseract setVariableValue:@"abcdefghijklmnopqrstuvwxyz012345789" forKey:@"tessedit_char_whitelist"]; 
```

您也可以尝试变量“tessedit_char_blacklist”

# iphone - iPhone上的RSA/ECB/PKCS1Padding解密

> ID：15568952
> 
> 赞同：0
> 
> 时间：2013-03-22T11:14:17.357
> 
> 标签：iphone, ios, objective-c, cryptography, rsa

我已经搜索了很多关于我的任务的内容，例如，

我正在通过 XML 获取数据，该 XML 使用后端的**RSA/ECB/PKCS1Padding**进行加密，他们给了我一个文件名**“publickey.der”**。根据他们的说法，这是公钥，您需要使用此密钥进行解密。

说真的，我不知道在Objective C上使用这个公钥解密。

请指导我需要使用哪个框架或库或 sdk，或者任何人有任何示例代码。我只指望你们。

期待您的回复

再一次感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:47:22.153

[公钥用于加密，私钥用于解密](http://en.wikipedia.org/wiki/Public-key_cryptography#How_it_works)。你必须先纠正这个问题。

RSA/ECB/PKCS1Padding 也不常见，当你想对大量数据进行 rsa 加密时，通常你用 rsa 加密 aes 密钥，然后用 aes 加密你的数据。

基本上，要在 java 之外进行这个 RSA/ECB 解密，它将是手动的，你将不得不通过你的块大小（密钥大小）来分解你的密文，然后在没有填充的情况下解密每个块，直到最后用填充阻塞，这就是你得到欧洲央行的方式。

这并不理想，再加上他们为您提供公钥并告诉您解密，这表明向您提供数据的人需要修复他们的加密问题。

# java - 从 Eclipse 将 apache 作为服务运行

> ID：15568953
> 
> 赞同：0
> 
> 时间：2013-03-22T11:14:17.847
> 
> 标签：java, eclipse, web-services, tomcat, axis2

我一直在使用 AXIS 和 Apache Tomcat 开发 Java Web 服务。我已经将它远程部署在服务器上，并且我正在使用 eclipse 来运行 Web 服务器。

当我从机器上注销时，Web 服务将停止。

无论如何，我都需要保持 Web 服务始终运行。如果eclipse能处理这个就更好了。

我会很感激一个具体的答案。

# javascript - 使用 knockout.js 在选择和文本输入之间切换可见性

> ID：15568955
> 
> 赞同：0
> 
> 时间：2013-03-22T11:14:25.037
> 
> 标签：javascript, html, knockout.js

我正在尝试使用 knockout.js 的可见绑定在选择的值之间进行切换，并取决于选择的值。当值为 = '5' 我想切换元素时，谁能解释我哪里出错了？我也在 foreach 中执行此操作，也许我的变量范围不适合比较？谢谢

```
<table border="1" cellpadding="4" cellspacing="0" id="terms_table">
<thead>
<tr class="term_row">
<th><div align="center">Percentage</div></th>
<th><div align="center">Payment Terms</div></th>
<th><div align="center">Stage</div></th>
<th><div align="center">Delete</div></th>
</tr>
</thead>
<tbody data-bind="foreach: terms" >
<tr class='spec_row'>
<td class='center'><input size='5' data-bind="value : percentage" /></td>
<td class='center'>
<select data-bind='visible: $data.term != 5, options: $parent.termOptions, 
value: $data.term, optionsValue: "id", optionsText: "option"'></select>
<input data-bind='value: other, visible: $data.term == 5 ' />
</td>
<td class='center'><input size='60' data-bind="value : stage" /></td>
<td class='center' valign='middle'>
<input type='hidden' data-bind="value : id" />
<input type='hidden' data-bind="value : rank" />
<img width='12' height='12' class='move' src='/images/cursor_drag_arrow.png'  />
<img width='12' height='12' class='psuedo_link' src='/images/deleteCross.gif' 
data-bind='click: $parent.removeTerm' /></td>
</tr>  
</tbody>
</table>      
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:40:46.270

如果 term 是可观察的，您需要这样访问它：

```
visible: $data.term() != 5
visible: $data.term() == 5 
```

# c++ - 没有实际块的 if 块内的声明是否有效？

> ID：15568959
> 
> 赞同：11
> 
> 时间：2013-03-22T11:14:47.970
> 
> 标签：c++, language-lawyer

以下代码有效吗？如果有，范围是`x`多少？

```
int main()
{
   if (true) int x = 42;
} 
```

我的直觉说，它没有创建范围，`if`因为它后面没有实际的块（`{}`）。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-22T11:16:06.677

GCC 4.7.2 向我们展示了，虽然代码是*有效*的，[但范围`x`仍然只是有条件的](https://ideone.com/MOnO5C)。

### 范围

这是因为：

> `[C++11: 6.4/1]:` *[..]**选择语句*中的子语句（每个子语句，`else`以语句的形式`if`）隐式定义了一个块范围。*[..]*

因此，您的代码等效于以下内容：

```
int main()
{
   if (true) {
      int x = 42;
   }
} 
```

### 有效性

它在语法方面是*有效*的，因为选择语句的产生因此是 (by `[C++11: 6.4/1]`)：

> *选择**语句*：（***条件*****）*****语句***
>   **`if`（*****条件*）*语句**语句*
>   `if`（*条件*）语句 **`else` *`switch`*****

 ***并且`int x = 42;`是一个*陈述*（by `[C++11: 6/1]`）：

> *语句*：
>   *标记语句*
>   *属性说明符序列*[选择] *表达式语句*
>   *属性说明符序列*[选择] *复合语句*
>   *属性说明符序列*[选择] *选择语句*
>   *属性说明符序列*[选择] *迭代语句*
>   *属性说明符序列*[选择] *跳转语句*
>   ***声明语句***
>   *属性说明符序列*[选择] *尝试块*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:20:09.947

我的 Visual Studio 说你的变量 x 的生命周期非常短——就在我们在运算符 if 中时，所以当我们超出 if 条件时，x 将被销毁，这样声明变量绝对没有意义。***

# javascript - 如何在javascript中提取特殊键？

> ID：15568964
> 
> 赞同：2
> 
> 时间：2013-03-22T11:14:55.573
> 
> 标签：javascript, jquery, html, regex

我正在调用`.keyup`搜索文本框的功能，并且`keyup()`正在从数据库中刷新 GRID。

**问题：**

但是网格正在刷新（也有特殊键）箭头键、数字锁、功能键和所有其他键，并且不需要刷新这些键。除了退格、返回、制表符、空格、删除。

我想构造一个正则表达式，以便过滤掉所有控制键。

**示例代码：**

```
$('#searchContent').keyup(function (e) {
    var key = e.which;
    if ( /*condition*/ ) {
        return;
    }
    //my code goes here...
} 
```

**我做了什么：**

彻底搜索网络，我想出了[hotkey](https://code.google.com/p/js-hotkeys/downloads/detail?name=jquery.hotkeys-0.7.9.zip)，但这并没有解决我的目的。那么，有什么智能正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:34:34.597

试试这个 HTML 看看哪些代码与哪些键匹配（取自[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/event.charCode#Notes)）：

```
<html>
<head>
    <title>charCode example</title>

    <script type="text/javascript">

        function showChar(e)
        {
            alert("Key Pressed: " + String.fromCharCode(e.charCode) + "\n"
                  + "charCode: " + e.charCode);
        }

        </script>
    </head>

    <body onkeypress="showChar(event);">
        <p>Press any 'character' type key.</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:01:14.527

试试这个技巧：

```
function checkForChanges(){
   var txt = $('#searchContent');
   if(txt.val() != txt.attr('xvalue') {
      //do referesh grid content here
   }
}

$('#searchContent').keyup(function (e) {
    $(this).attr('xvalue') = this.value;    
    clearTimeout(this.changeTimer);    
    this.changeTimer = setTimeout(checkForChanges, 20);
} 
```

# ms-access - 使用 VBA 通过 Access 填充 PowerPoint 模板中的数据？

> ID：15568967
> 
> 赞同：0
> 
> 时间：2013-03-22T11:15:10.083
> 
> 标签：ms-access, vba, powerpoint

我正在开发一个小项目，使用 Access、SQL、Word 和 PowerPoint，这个项目的目标也是允许用户添加个人信息，在 Access 中，通过用户表单，在 SQL 数据库中注册该信息，以及将其传递给 Word 和 PowerPoint 中的模板。

当按下访问表单中的按钮（word 或 powerpoint）时，会加载模板并填充其中的动态数据。

因此，通过使用书签，这一切都很好，但是在 powerpoint 中，事情变得很棘手，没有书签（该死的微软）。

所以我一直在搜索 SO 和 Google，但似乎找不到适合我的示例。所有的例子都在谈论创建一个新的 powerpoint 演示文稿，这不是我想要的。

目标只是添加动态数据，在本例中为文本框和照片，并将静态数据留在模板中。

所以流程会是这样的

SQL（数据库）-> ACCESS（用户界面）-> Word 和 Power Point（最终模板）。

如果有人有一个如何开始的例子，我将非常感谢您的帮助。

感谢大家花时间在这件事上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:29:43.500

我不清楚到底是什么问题。您是否需要知道如何根据现有模板开始新的演示文稿？如果是这样，您将打开您的模板文件，就好像它是一个演示文稿一样，然后立即将其保存为演示文稿（而不是开始一个新的演示文稿并应用模板，这将只为您提供设计但没有内容..模板文件的幻灯片...）。

我也不明白为什么您希望所有应用程序，Word、Excel、PowerPoint 和其他应用程序都是相同的。如果 Word 完成了 PowerPoint 所做的所有事情，那么就不需要其中之一了。理所当然地，它们将根据使用情况而具有不同的功能集。

在任何情况下，要在整个演示文稿中根据需要添加用户名，查看每个形状以查看它是否包含文本非常快，如果是，则将 %%USERNAME%% 替换为实际用户名你正在和你一起工作。

您可以类似地在形状中查找特殊文本，例如 PICTURE:portrait，如果找到，插入图片，调整大小以匹配形状，然后删除或隐藏原始形状。

# rspec - 如何使用 shoulda 的消息测试 mongoid 模型验证？

> ID：15568968
> 
> 赞同：2
> 
> 时间：2013-03-22T11:15:12.570
> 
> 标签：rspec, mongoid, shoulda

我有一个带有验证的模型，如下所示：

```
class Order
  include Mongoid::Document

  field :first_name, type: String
  field :last_name, type: String

  validates_presence_of :first_name, :message => "Can't be empty"
  validates_presence_of :last_name, :message => "Can't be empty"
end 
```

我通过`rspec`和[thinkbot的`shoulda`](https://github.com/thoughtbot/shoulda)描述模型：

```
describe Order do
  # validations
  it { should validate_presence_of(:first_name) }
  it { should presence_of(:last_name) }
end 
```

但我失败了：

```
Failures:

  1) Order 
     Failure/Error: it { should validate_presence_of(:first_name) }
       Expected errors to include "can't be blank" when first_name is set to nil, got errors: ["first_name Can't be empty (nil)", "last_name Can't be empty (nil)"]
     # ./spec/models/order_spec.rb:10:in `block (2 levels) in <top (required)>' 
```

此外，“应该”案例在模型验证中没有消息也能很好地工作。

如何使用消息测试模型验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-26T12:46:38.560

[mongoid-rspec](https://github.com/evansagge/mongoid-rspec) gem 允许使用消息测试模型验证。

```
it { should validate_uniqueness_of(:email).with_message("is already taken") } 
```

# ms-access - Access 2010 运行时错误 2185

> ID：15568970
> 
> 赞同：1
> 
> 时间：2013-03-22T11:15:14.203
> 
> 标签：ms-access, ms-access-2007, runtime-error, ms-access-2010

您好我在 Access 2007 中创建了一个应用程序，它的前端和后端是分开的。我正在尝试使用 Access 2010 运行时打开数据库，但是当我更改组合框的选定项时应用程序崩溃。

我收到以下错误：

**“由于运行时错误，此应用程序的执行已停止。应用程序无法继续，将被关闭。”**

在研究了这个问题之后，一些人提到运行紧凑型和修复，发现解决了他们的问题，但对我的没有任何影响。

但是，我发现大多数人会回来说设置了一些错误日志记录。所以我已经这样做了，当在 2010 运行时运行时，会收到一条弹出消息，内容如下：

**错误号：2185，除非控件具有焦点，否则不能引用控件的属性或方法。**

但是，在 Access 2007 中运行时，没有错误并且代码工作正常。

这是我一直在使用的代码：

```
Private Sub ComboBox1_Change()
If Not ComboBox1.Text = "" Then
ComboBox1.Dropdown
End If
End Sub 
```

我的问题是，当 Access 2007 中没有错误时，为什么这会突然成为在 2010 运行时运行的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:50:56.607

更改`If Not ComboBox1.Text = "" Then`为`If Not ComboBox1 = "" Then`

无论出于何种原因，Access 都不喜欢您在`.Text`其严格控制之外使用该属性。

# ruby-on-rails - 如何使第一个用户成为具有能力文件的管理员 (cancan)

> ID：15568972
> 
> 赞同：0
> 
> 时间：2013-03-22T11:15:19.903
> 
> 标签：ruby-on-rails

```
class Ability
include CanCan::Ability

def initialize(user)
user ||= User.new 
if user.admin == 1 #admin
    can :manage, :all
elsif 
  user.id != nil # registred users
  can :read, :all
  can :create, Post
  cannot :manage, User
else
   can :read, :all # guest user (not logged in)
   cannot :manage, User

end 
```

这是我的能力档案。我希望它使第一个注册用户成为管理员，并赋予他们编辑整个网页的所有权限，而用户只能管理帖子，而访客用户只能阅读帖子。但是，当我使用 if can 时？在我的代码中，管理员获得了与普通用户相同的访问权限。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:06:52.087

在我的工作中，我必须做同样的事情，但要与公司合作。

我检查的每个公司创建是否是第一个，如果是，我将其设置为管理员，否则设置为普通用户。

`if can?`此处用于定义菜单是隐藏还是可见。只有这样，如果用户键入 URL，您仍将访问该页面，因此您需要添加`load_and_authorize_resource`，以便用户收到有关没有权限的消息。

那是你需要的吗？=)

# jsp - 选择标签值没有进入 Servlet

> ID：15568975
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:15:23.840
> 
> 标签：jsp, servlets

我的 JSP 页面中有表单字段。它的 Select 标记值很少。我只需要选择一个值，然后根据我的 servlet 中的值，我将转发到其他页面。这是我的 Select 标签的 JSP 代码

```
<select name="options">
    <option>Choose Your Option</option>
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
    <option value="option3">Option 3</option>
    <option value="option4">Option 4</option>
</select> 
```

在我的 servlet 中，我正在根据所选值进行处理。这是我的 servlet 代码

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
String options[]=request.getParameterValues("options");
        if(options[0].equals("option1"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option1.jsp");
            rd.forward(request, response);
        }
        else if(options[0].equals("option2"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option2.jsp");
            rd.forward(request, response);
        }
        else if(options[0].equals("option3"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option3.jsp");
            rd.forward(request, response);
        }
        else if(options[0].equals("option4"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option4.jsp");
            rd.forward(request, response);
        }
    } 
```

真正的问题是，当我选择选项 1 或选项 2 时，它将转发到相应的页面。但是，如果我选择选项 3 或选项 4，它将不起作用。问题是什么？我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:27:33.107

```
String option = request.getParameter("options") 
```

这将给出选定的值

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
       String selectedValue=request.getParameterValues("options");
        if(selectedValue.equals("option1"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option1.jsp");
            rd.forward(request, response);
        }
        else if(selectedValue.equals("option2"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option2.jsp");
            rd.forward(request, response);
        }
        else if(selectedValue.equals("option3"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option3.jsp");
            rd.forward(request, response);
        }
        else if(selectedValue.equals("option4"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option4.jsp");
            rd.forward(request, response);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T17:39:48.297

您只能选择一个选项，因此真正的分析器是：

```
String selectedValue=req.getParameter("genre");
if(option.equals("option1"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option1.jsp");
            rd.forward(request, response);
        }
        else if(option.equals("option2"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option2.jsp");
            rd.forward(request, response);
        }
        else if(option.equals("option3"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option3.jsp");
            rd.forward(request, response);
        }
        else if(option.equals("option4"))
        {
            RequestDispatcher rd=request.getRequestDispatcher("Option4.jsp");
            rd.forward(request, response);
        }
    } 
```

# php - if语句检查文本框中的字符数

> ID：15568978
> 
> 赞同：1
> 
> 时间：2013-03-22T11:15:35.433
> 
> 标签：php, jquery, html, mysql, css

当用户添加联系人时，它会检查“字符”计数是否为 8，然后检查数据库以查看用户名和 NewContact 是否已存在，如果为“假”，则插入新联系人。不起作用的位是将字符数限制为 8

```
if (intval($s_id) == 8)
     {
        $db = mysql_connect("at-web2.xxx", "user_xxx", "xxxx");
        mysql_select_db("db_xxx",$db);

        $result = mysql_query("SELECT * FROM contacts WHERE u_id='$username' and c_id='$s_id'",$db);

        $myrow = mysql_fetch_row($result);

        if(!$myrow)
        {
            mysql_query("INSERT INTO contacts(u_id,  c_id) VALUES ('$username','$s_id')",$db);

            header("Contact Added");
        }
        else
        {

            header("Contact Already Exist");
        }
    }
else
    {
         header("Incomplete Contact");

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:18:17.677

你需要[strlen](http://php.net/manual/en/function.strlen.php)函数。

```
if(strlen($s_id) == 8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:19:18.117

你必须用来`strlen`获取字符数

```
 if (intval($s_id) == 8) 
```

应该

```
if (strlen($s_id) == 8) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T14:42:37.627

尝试使用`strlen`with`trim`函数来获得准确的字符串长度。

```
if(strlen(trim($s_id)) == 8) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T19:27:47.470

使用 strlen (stringlength) 预定义的 php 函数来获取字符串的确切长度。

```
if(strlen($string) == 8)
{

//Statements

}
else
{
  //statements
} 
```

# mysql - 运行 mySQL 查询可以接受多长时间

> ID：15568980
> 
> 赞同：1
> 
> 时间：2013-03-22T11:15:40.450
> 
> 标签：mysql

当我测试这个查询时，大约需要 17 - 20 秒才能完成。

```
 UPDATE ex_hotel_temp
SET specialoffer='1'
WHERE hid IN
    (SELECT hid
     FROM ex_dates
     WHERE offer_id IS NOT NULL
       OR xfory_id IS NOT NULL
       OR long_id IS NOT NULL
       OR early_id IS NOT NULL
     GROUP BY hid) 
```

虽然这是一个在夜间运行的 cronjob 以对数据库进行一些整理（没有站点访问者坐在那里等待结果），但在我看来，这对服务器来说是一个不可接受的负载。我是对的，还是我什么都不在乎？

当我单独运行查询的每个元素时，大约需要 0.001 秒。因此，我是否应该将其分解为一系列简单的查询？

后期编辑：在收到的评论和答案的帮助下，我决定将查询分成两部分。结果是这样的：

```
$query_hotel = "SELECT hid FROM ex_dates WHERE offer_id IS NOT NULL OR xfory_id IS NOT NULL OR long_id IS NOT NULL OR early_id IS NOT NULL GROUP BY hid";
$hotel = mysql_query($query_hotel, $MySQL_XXX) or die(mysql_error());
$row_hotel = mysql_fetch_assoc($hotel);
$totalRows_hotel = mysql_num_rows($hotel);

$hid_array = array();
do {
    array_push($hid_array,$row_hotel['hid']);
}while ($row_hotel = mysql_fetch_assoc($hotel)) ;
$hid_list = implode("','",$hid_array);
$hid_list = "'$hid_list'";

// Mark the hotels as having a special offer 
$query_update = "UPDATE ex_hotel_temp SET specialoffer='1' WHERE hid IN ($hid_list)";
$result = mysql_query($query_update, $MySQL_XXX) or die(mysql_error()); 
```

它不漂亮，但它有效。

由于有两个查询包含一些 PHP，我无法准确衡量运行所需的时间，但仅通过查看页面加载时间显然更接近于一秒多于 20 秒。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:24:16.203

我不在乎，只要确保 cron 作业在进程中途不会超时。我个人过去有过查询，然后在 cron 作业中运行了几分钟，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:10:52.683

你说这在 CRON 工作中运行了一夜，你说这支持一个“站点”——如果这是一个面向公众的网站，是的，你应该担心。

互联网上没有营业时间之类的东西 - 将有访问者与您的网站互动，希望在一天中的所有时间都试图购买东西；根据我的经验，即使是“国家”网站也往往会在夜间看到流量（尽管与高峰时段相比通常只有很小的速度）。

您的 CRON 作业也可能导致其他查询运行缓慢 - 这取决于导致查询运行缓慢的原因，以及您是否使用事务。网站的问题是，当网站速度慢时，用户往往会变得不耐烦，刷新页面，往往会给数据库带来更多的流量，如果网站上还有其他慢查询，网站变得无法使用也不是不可能的。一段时间，即使用户数量相当有限。

因此，如果在脚本运行时*可能*有您网站的用户，那么绝对值得整理一下。

您可能担心的另一个原因是，根据我的经验，数据库性能不是线性的 - 查询的速度不会与表中的记录数成线性比例。相反，它们往往像曲棍球棒一样——一切都很好，直到你达到临界点，一切都停止了。您可能正在骑曲棍球棒曲线，它很容易从 17-20 秒升级到 17-20 分钟。

修复看起来很简单 - group by 是多余的，将查询拆分为较小的查询应该有助于子选择使用索引。

# c# - 是否可以找到为特定命令按下的按钮？

> ID：15568989
> 
> 赞同：0
> 
> 时间：2013-03-22T11:15:59.150
> 
> 标签：c#, xaml, icommand

如果我有这样的事情：

```
 <Button Command="{Binding TestCommand}">Test</Button>
 <Button Command="{Binding TestCommand}">another Test</Button> 
```

TestCommand 是一个实现 ICommand 的命令对象。

是否可以在 TestCommand 的 Execute 函数中检测两个按钮中的哪一个被按下？

如果我使用 object 参数，我认为这是可能的，但我还有其他参数要传递，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:19:42.050

尝试使用命令参数：

```
<Button Command="{Binding TestCommand}" 
    CommandParameter="{Param, ButtonUsed}">
       Test</Button> 
```

# linux - 双重角色 WiFi SoftAP

> ID：15568992
> 
> 赞同：0
> 
> 时间：2013-03-22T11:16:03.310
> 
> 标签：linux, networking, wifi, driver, firmware

我知道softAP在WiFi中的用途。

在启用 softAP WiFi 扮演主机角色时，我们无法激活客户端角色，直到停用 softAP。

为什么我们不能设计双角色softAP，也就是说为什么我们不能激活我们的WiFi来同时播放客户端和主机？

如果我们这样做，我们碰巧面临什么样的问题，是不可能的？

因为在 GSM 中，我们正在为数据、通话、短信等创建虚拟多路复用端口。同样，为什么我们不能为 WiFi 开发任何类似这样的固件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:31:19.673

当然，这是可能的，并且存在于各种 NIC 中。它更复杂，因为双模式需要处理两个链路的共存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-11T01:36:16.257

[微软在 Windows 7 及更高版本的操作系统中添加了一项名为“虚拟 Wi-Fi”的功能，使 Wi-Fi 卡能够同时充当 Wi-Fi 客户端和无线接入点。虽然是一个相对较新的概念，但现在正在发布带有“虚拟 WiFi”作为默认程序的 Windows 7 及更高版本的新计算机，从而使个人计算变得不那么复杂，而无需第二台设备。](https://en.wikipedia.org/wiki/SoftAP)

# python - Python sys.stdout.flush() ，刷新它之前的所有东西

> ID：15568999
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:16:08.200
> 
> 标签：python

我是 python 新手，我有一个程序，女巫是在命令行中显示百分比的王者：

```
sys.stdout.write("[")

    for x in xrange(1,int(number)):

        percentage = (x*100)/int(number)
        numberfile.write(str(x)+'\n') 

        sys.stdout.write("\r%d%%" %percentage)
        sys.stdout.flush()

    sys.stdout.write("][Done]") 
```

但我的问题是flush（）函数，删除它之前的所有输出，输出是这样的：

> 100%][完成]

我怎么能把它改成

> [100%][完成]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:19:38.227

问题不是冲洗，而是“\r”

```
sys.stdout.write("\r%d%%" %percentage) 
```

也许你想要

```
sys.stdout.write("\r[%d%%" %percentage) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:23:12.067

```
 sys.stdout.write("\r%d%%" %percentage) 
```

应该

```
 sys.stdout.write("\r[%d%%]" %percentage) 
```

为了避免有趣的显示：

[伪代码]

```
for x in xrange(1,int(number)):

    percentage = (x*100)/int(number)
    numberfile.write(str(x)+'\n') 

    lastP = percentage
    if (percentage  > lastP)
        sys.stdout.write("[%d%%]" %percentage);
        sys.stdout.flush();
        lastP = percentage 
```