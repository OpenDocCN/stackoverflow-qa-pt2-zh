# StackOverflow 问答 15149000-15149999

# ruby-on-rails - twitter bootstrap navbar 在我的 Rails 应用程序上崩溃

> ID：15149004
> 
> 赞同：0
> 
> 时间：2013-03-01T01:38:27.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我似乎无法让导航栏崩溃在我的 Rails 应用程序上工作

application.html.erb 是

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/stylesheets/bootstrap-responsive.css" rel="stylesheet">
    <%= analytics_init if Rails.env.production? %>
  <title>Guidelines for Me</title>

  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>

  <script type="text/javascript">
function clearDefault(el) {
if (el.defaultValue==el.value) el.value = ""
}
function clearText(){
    search = $('.search-query');
    if (search.defaultValue==search.value)
    search.value = ""
}

</script>
</head>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <% if Guideline.count % 100 ==0 %>
                <%= link_to "#{Guideline.count}" " guidelinesforme available - yay!", guidelines_path, :class => 'brand' %>
            <% else %>

                    <%= link_to "#{Guideline.count}" " guidelinesforme available!", guidelines_path, :class => 'brand' %>
            <% end %>

            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        </a>

    <div class="nav-collapse collapse">

            <ul class="nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        List guidelines by...
                        <b class="caret"></b>
                        </a>

                <ul class="dropdown-menu">

                    <li><%= link_to "...Topic", topics_path %></li>
                    <li><%= link_to "...Hospital", hospitals_path %></li>
                    <li><%= link_to "...Specialty", specialties_path %></li>
                    </li>   
                </ul>

                    <% if user_signed_in? %>
                    <li><%= link_to "Favourites", favourites_path %></li>
                    <% else %>  
                    <li><%= link_to "Favourites", register_path %></li>
                    <% end %>
            </ul>

            <ul class="nav pull-right">

                    <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <% if user_signed_in? %>
                    <%= current_user.first_name %>
                    <% else %>
                    Log in or Sign up
                    <% end %>
                    <b class="caret"></b>
                    </a>

                <ul class="dropdown-menu">

                    <% if user_signed_in? %>
                        <li ><%= link_to "Edit profile", edit_path %></li>
                        <li> <%= link_to "Log out", logout_path %></li>
                        <li> <%= link_to "My additions", profiles_show_path(id: current_user.profile_name) %></li>
                    <% else %>
                        <li><%= link_to "Log in", login_path %></li>
                        <li><%= link_to "Sign Up", register_path %></li>
                    <% end %>

                    <li><%= link_to "About us", about_path %></li>
                </li>
                </ul>

                    <li class="nav pull-right">
                    <%= form_tag guidelines_path, :class => 'navbar-search pull-right', :onSubmit=>"clearText(this)",:method => :get do %>  

                    <%= text_field_tag :search, params[:search], :class => 'search-query input-small', :placeholder=>"Search", :ONFOCUS=>"clearDefault(this)" %> <% end %></li>
            </ul>
        </div>
        </div>
    </div>

    <div class="container">
        <% flash.each do |type, message| %>
            <div class="alert <%= flash_class type %>">
                <button class="close" data-dismiss="alert">x</button>
                <%= message %>
    </div>
        <% end %>

        <%= yield %>

    </div>
</body>

<script src="/assets/js/bootstrap-dropdown.js"></script>
</html> 
```

在我的 application.js

```
$(".collapse").collapse() 
```

我没有使用 bootstrap gem，我只是手动添加了 bootstrap。我不确定这是否是插件要求的问题或如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:44:43.240

你需要添加

```
<script src="/assets/js/bootstrap-dropdown.js"></script> 
```

在模板的末尾

和

```
$(".collapse").collapse() 
```

在 your_scripts.js 里面，不在你的 style.css 文件中

# javascript - 如何显示消失的分页框

> ID：15149010
> 
> 赞同：1
> 
> 时间：2013-03-01T01:39:00.527
> 
> 标签：javascript, jquery, html, css, wordpress

![在此处输入图像描述](../Images/09cec477ea4fe8af3382f5e4ab3d9b88.png)

美好的一天，伙计们。我只是想问你如何使如下图所示的分页控制框出现。只有当我将鼠标悬停在推荐 div 时才会出现。该控件与主题功能（wordpress）一起使用，并且似乎没有使其默认显示的选项。我尝试应用样式 Opacity:1 和 Visibility:visible 但这些都不起作用。我认为它在 javascript 上，我不知道如何追踪它的代码。这是网站的链接`http://67.222.16.144/~lasikoma/`。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:44:14.113

```
<style>
    .ether-ctrl-wrap {
        display: block !important;
    }
</style> 
```

在方便的地方添加这种样式。

# ruby - Rails.cache 的问题：在 Rails 上复制数组时出现异常：TypeError（无法修改冻结的对象）

> ID：15149014
> 
> 赞同：1
> 
> 时间：2013-03-01T01:39:30.203
> 
> 标签：ruby, ruby-on-rails-3, caching

以下代码生成一个**TypeError (can't modify freeze object)**。但是我们所做的只是复制缓存的项目。有谁知道为什么？我们在 Rails 3.0.6 和 Ruby 1.8.7 上。谢谢！

我们还尝试使用**克隆**然后解冻生成的对象，但这也产生了相同的异常。

**pack**没有在其他任何地方定义。

```
 cached_pack = Rails.cache.fetch( 'packs/' + pack_id, {:expires_in => 10.days} ) do
        Rails.logger.info '+++ Cache miss: '
        Pack.find pack_id
    end         

    pack = cached_pack.dup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:32:49.250

**TLDNR**版本：使用`clone`，而不是`dup`。

`clone`和之间有两个主要区别`dup`：

*   `dup`不克隆单例方法，而`clone`这样做；
*   冻结对象的 the`clone`也被冻结（而`dup`冻结对象的 a 不是）。

这就是它在 Rails 3.1+ 中的工作方式。在您的情况下，您应该使用`clone`因为`ActiveRecord#dup`在 Rails 3.1 中引入，因此您可能会调用`Kernel#dup`.

**UPD** BTW，`Rails.cache`静默冻结对象，被放入缓存中（至少在 Rails < 3.2 中）。为了避免这种行为，可以将对象的副本而不是对象本身缓存：

```
cached_resource.cache.write( \
  key, object.dup, :expires_in => cached_resource.generate_ttl \
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:50:24.727

解决方案是升级到 Rails 3.1 或更高版本，因为那时引入了 dup。

# c++ - 提升文件系统copy_file“成功”但没有复制文件

> ID：15149016
> 
> 赞同：1
> 
> 时间：2013-03-01T01:40:00.120
> 
> 标签：c++, boost, filesystems, boost-filesystem

我无法弄清楚为什么我的文件不会复制。这是代码的简短部分：

（`dir_itr`是 directory_iterator &`root`是路径）

```
if (!(is_directory(dir_itr->path())))
{
    cout << "copying: " << dir_itr->path().filename() << endl;
    try
    {
        copy(dir_itr->path(), root);
        remove(dir_itr->path());
    } catch (filesystem_error& ex) {
        //more code 
```

在命令窗口中结果如下：

```
boost::filesystem::copy_file: The operation completed successfully: 
"C:\Documents and Settings\R\Desktop\New Folder\New Folder (2)\New Bitmap Image 3.bmp", 
"C:\Documents and Settings\R\Desktop\New Folder" 
```

但是没有文件被复制。

我基本上只是想将所述文件从文件夹移动`c:\x\y\file.file`到`c:\x`

我假设为什么我不能移动它是因为我需要一个完整的文件名而不仅仅是一个目录或什么？如果是这种情况，如何将路径根转换为字符串，以便向其添加文件名？（如果我尝试，我会遇到一千个错误，它们太长了，我无法一直滚动到窗口以查看它从哪里开始）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:54:38.770

也许[boost::filesystem::system_complete](http://www.boost.org/doc/libs/1_46_1/libs/filesystem/v3/doc/reference.html#system_complete)可以帮助：

（对不起，我在我的 Mac 上而不是 windows 上，但它显示了一种从相对路径获取绝对路径的方法）。祝你好运。

```
#include <iostream>
#include <boost/filesystem.hpp>

using namespace std;

int main(int argc, char *argv[]) {
    boost::filesystem::path cwd(".");
    boost::filesystem::path resolved = boost::filesystem::system_complete(cwd);

    std::cout << cwd << std::endl;
    std::cout << resolved << std::endl;
} 
```

输出：

```
"."
"/private/var/folders/qw/x23nm9f11fxc45rgddb04n_w0000gn/T/CodeRunner/." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:51:49.673

重新开始工作，我添加/更改了以下内容：

```
try
{
    string temp = root.string() + "\\" + dir_itr->path().filename().string();
    path p(temp);
    copy(dir_itr->path(), p);
    remove(dir_itr->path());
//more code 
```

它似乎奏效了。我想我在复制时需要包含文件名的假设是正确的。

# ruby-on-rails - 我们很抱歉，但有些不对劲。（Heroku 错误）

> ID：15149018
> 
> 赞同：1
> 
> 时间：2013-03-01T01:40:12.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rubygems

我刚刚在部署到 Heroku 时遇到“我们很抱歉，但出了点问题。”错误。

作为 Heroku 的新手，我无法识别问题并对其进行故障排除。

应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module User101
  class Application < Rails::Application

    #seperate
     # Prevents heroku rake abort on assets compile
    # From http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/
    config.assets.initialize_on_precompile = false

    # Enable the asset pipeline
    config.assets.enabled = true

    # wysihtml5 css issue - https://github.com/sferik/rails_admin/issues/1312
    config.assets.precompile += ['*.css', '*.js']
    #seperate

    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

  end
end 
```

### 更新 Heroku 日志 2：

```
 [StartupBlog]$heroku logs
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal.rb:246:in `block in action'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal.rb:203:in `dispatch'
2013-03-01T04:13:47+00:00 heroku[router]: at=info method=GET path=/users/sign_in host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=2ms service=17ms status=500 bytes=643
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:73:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:36:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/mapper.rb:42:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:601:in `call'
2013-03-01T04:13:47+00:00 
app[web.1]:   vendor/bundle/ruby/1.9.1/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:177:in `call!'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:157:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/omniauth-1.1.3/lib/omniauth/builder.rb:48:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/head.rb:14:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/flash.rb:242:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/cookies.rb:341:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:64:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__3394535389802165164__call__3147947447447898363__callbacks'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-03-01T04:13:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-03-01T04:13:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-03-01T04:13:47+00:00 app[web.1]: 
2013-03-01T04:13:47+00:00 app[web.1]: 
2013-03-01T04:13:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-03-01T04:13:50+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=1ms service=12ms status=304 bytes=0
2013-03-01T04:13:50+00:00 heroku[router]: at=info method=GET path=/assets/logo2.png host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=2ms service=9ms status=404 bytes=728
2013-03-01T04:13:50+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T04:13:50+00:00 app[web.1]: 
2013-03-01T04:13:50+00:00 app[web.1]:   Rendered partials/_footer.html.erb (1.3ms)
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block i
n call'
2013-03-01T04:13:50+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (2.7ms)
2013-03-01T04:13:50+00:00 app[web.1]: Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
2013-03-01T04:13:50+00:00 app[web.1]: Started GET "/assets/logo2.png" for 174.95.207.136 at 2013-03-01 04:13:50 +0000
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-01T04:13:50+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 04:13:50 +0000
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   Rendered partials/_header.html.erb (1.0ms)
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-01T04:13:50+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/assets/logo2.png"):
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-01T04:13:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-01T04:13:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-03-01T04:13:50+00:00 app[web.1]: 
2013-03-01T04:13:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-03-01T04:13:50+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-03-01T04:13:50+00:00 app[web.1]: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:15:04.083

看来你的`logo.png`文件有问题。您是否在部署之前预编译了资产？

```
rake assets:precompile 
```

这将生成用于生产的资产。签入生成的文件（公共/资产），然后推送回 Heroku。

# clearcase - 如何在不产生冲突的情况下将同时创建的 2 个分支从主分支合并回主分支

> ID：15149020
> 
> 赞同：1
> 
> 时间：2013-03-01T01:40:20.040
> 
> 标签：clearcase

![在此处输入图像描述](../Images/547559218c0b4870379eff97c9758d14.png)

在这个例子中，从“windows”和“test”分支合并回“main”是如何正常处理的（红线）？

例如，“windows”分支下的开发人员通过设置A=1修复了一个bug，然后在“windows”下测试修复并称之为“done”，因此他将“windows”合并回“main”为“main/8” ” 到目前为止，这还不是问题。

但是，假设“测试”分支下的开发人员将 A 更改为“A=0”以修复他正在处理的错误。

当“test/4”合并回“main”时会发生什么？

现在“main/9”显示“A=0”，覆盖了“windows/1”所做的修复。

然后说在“windows”下进行修复的开发人员现在需要进行另一个修复并创建“windows_2”。他会认为 A 仍然是“A=1”，因为他就是这样离开的。开发人员可能会经历一个痛苦的过程来发现现在“A=0”。

如何处理这些类型的更改，因此当从主“主干”并行创建分支时，更改不会从一个合并反转到下一个合并？

任何信息将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:31:11.470

> 当“<code>test/4”合并回“main”时会发生什么？

这是一个不平凡的合并，因为与共同祖先相比， “ `A=`”的*same* 行已被修改*了两次。*这是合并期间的明显冲突，并且不会是自动的。

因此，合并回`test`分支的开发人员将不得不在`test`和`windows`line 之间进行选择，并希望与`windows`分支的开发人员进行核对。

从[合并页面](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/how_merge_file_dir.htm)：

> 当两个或更多贡献者与基本贡献者不同时，Diff Merge 会检测到冲突，并提示您解决它。它显示所有贡献者的差异，您可以接受或拒绝每一个。

```
 [changed 10]            |          [changed to 10 file 2]---
A;                                | A=1;
                                 -|-
          [changed 10]            |          [changed to 10 file 3]---
A;                                | A=0
                                  |-
Do you want the CHANGE made in file 2? [yes] 
no  
Do you want the CHANGE made in file 3? [yes] 
yes
Applying CHANGE from file 3 [line 10]
============ 
```

* * *

但真正的答案是**沟通**：如果*同一个*文件需要修改（尤其是在*同一*行），应该有一些方法来管理和协调这些类型的开发工作。

ClearCase 还建议在检出时锁定 ( `cleartool checkout -reserved`)，这将防止`test`在检出`windows`版本时被检出。这也可以促使开发人员`test`与他/她的同事核实，并了解正在完成的修复的性质。

# python - 使用字符串运算符将变量添加到 python 字典

> ID：15149030
> 
> 赞同：-2
> 
> 时间：2013-03-01T01:41:31.837
> 
> 标签：python, string, dictionary

尝试添加一个包含变量的字符串，该变量可能是我的一个字典。Temp 只是一个随机的文本字符串，33 个字符长。

```
lst = ''
temp = ''
def randomstr():
    global lst, temp
    temp = ''
    lst = [random.choice(string.ascii_letters + string.digits) for n in xrange(33)]
    temp = "".join(lst)
headers = {"Content-type": "text/xml", "Accept": "text/plain", "Host": "chat.site.com", "Accept-Encoding": "identity", "User-agent": "Client Python-urllib/2.6", "userid": "39",}
headers["If-none-match"] = "jrc-%s"%temp
headers["If-none-match"] = "jrc-" + temp
headers["If-none-match"] = "jrc-%s" % (temp) 
```

这些都不起作用，我做错了什么？

```
print temp
print headers 
```

输出：

K60IcFrZveioTrPY9cAJ38IOANj67eElK

{'Accept-Encoding': 'identity', 'Host': 'chat.site.com', 'Accept': 'text/plain', 'User-agent': 'Client Python-urllib/2.6', 'userid ': '39', 'If-n one-match': 'jrc-', 'Content-type': 'text/xml'}

这很奇怪，因为 temp 本身输出很好，但在字典中却没有

```
headers["If-none-match"] = "jrc-"+str(temp) 
```

也不输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:45:25.570

在`temp`is a`tuple`具有多个元素的情况下，上述操作将失败：

```
 "jrc-%s"%temp #not the right number of elements for formatting
 "jrc-"+temp   #can't concatenate string and tuple 
```

`work`我相信如果`dict`出于类似原因，它也会失败。

应该“工作”*的东西是`"jrc-"+str(temp)`

*这里的工作是通过不抛出异常来定义的

# html - 如何在此菜单上正确使用 display:block？

> ID：15149033
> 
> 赞同：1
> 
> 时间：2013-03-01T01:41:47.267
> 
> 标签：html, css, drop-down-menu, menu

代码：

```
 <div class="menu">
 <ul class="top_thing">
      <li class="one_one">Services</li>
           <ul class="the_one">
                 <li class="second">Language 1</li>
         <li class="second">Language 2</li>
         <li class="second">Language 3</li>
         <li class="second">Language 4</li>
             <li class="second">Language 5</li>
    </ul>
  <li class="one_one">About Us</li>
      <li class="one_one">Contact</li>
 </ul>
 </div> 
```

对于 CSS：我在 .the_one 上使用 display:none。现在，一旦服务选项卡悬停，我想显示 .the_one。我怎样才能做到这一点？我试着做：

```
 li.the_one:hover {
 display:block;
 } 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:46:05.110

您的 HTML 无效。 `<ul>`必须仅`<li>`作为子级（并且包括其他`<ul>`. 修复该问题后，添加以下规则：

```
.the_one {
    display: none;
}

.one_one:hover .the_one {
    display: block;
} 
```

[http://jsfiddle.net/xvEvj/](http://jsfiddle.net/xvEvj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:43:42.037

您需要定位 CSS 中的内部列表以使其显示。

改变你的CSS如下：

```
li.the_one:hover ul.the_one
{
display:block
} 
```

“li.the_one:hover”表示当带有“the_one”类的 li 悬停在上面时会发生这种情况，然后它将显示：块应用于具有类“the_one”的 ul，其中包含类“唯一的那个”。

希望这可以帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:58:11.663

您的 HTML 无效。

```
<div class="menu">
<ul class="top_thing">
    <li class="one_one">Services
        <ul class="the_one">
            <li class="second">Language 1</li>
            <li class="second">Language 2</li>
            <li class="second">Language 3</li>
            <li class="second">Language 4</li>
            <li class="second">Language 5</li>
        </ul>
    </li>
    <li class="one_one">About Us</li>
    <li class="one_one">Contact</li>
</ul> 
```

第二个无序列表应该位于第一个无序列表的列表项中。

# iphone - setImage 方法改变 UIBarButtonItem 的宽度，即使图像大小没有改变

> ID：15149038
> 
> 赞同：7
> 
> 时间：2013-03-01T01:42:21.773
> 
> 标签：iphone, ios, objective-c, uibarbuttonitem

我想在导航栏中添加一个“书签”按钮作为 rightBarButtonItem

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Add bookmark button
    UIBarButtonItem *bookmarkBarButton = [[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStyleBordered target:self action:@selector(bookmark:)];
    [bookmarkBarButton setImage:[UIImage imageNamed:@"greyBookmark.png"]];
    [self.navigationItem setRightBarButtonItem:bookmarkBarButton];
    bookmarkBarButton.tintColor = [UIColor colorWithRed:0.4 green:0.4 blue:0.4 alpha:0.9f];
    b_bookmarked = false;
}

// Will call this method when the bookmark button is pressed
- (IBAction)bookmark:(id)sender
{
    // Toggle color of bookmark icon on button
    if ( (b_bookmarked = !b_bookmarked) )
    {
        [self.navigationItem.rightBarButtonItem setImage:[UIImage imageNamed:@"blueBookmark.png"]];
    }
    else
    {
        [self.navigationItem.rightBarButtonItem setImage:[UIImage imageNamed:@"greyBookmark.png"]];
    }

    // Save bookmark

} 
```

grayBookmark.png 和 blueBookmark.png 的大小均为 10x26。出现视图时按钮看起来变窄。但是当我单击此按钮时，按钮变宽，图像仍然会发生变化。在书签中调用 setImage 方法时宽度会发生变化：方法（恢复为默认大小）。我试图通过调用 [navigationItem.rightBarButtonItem setWidth:] 来明确设置宽度 - 也无济于事。根据文档，在此之前，宽度属性设置为 0，并且按钮应根据其图像大小调整大小。

我希望 rightBarButtonItem 具有 const 宽度。在第二次调用 setImage 之后它变得更宽有什么原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T05:32:57.537

```
UIImage *myImage = [UIImage imageNamed:@"greyBookmark.png"];
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton setImage:myImage forState:UIControlStateNormal];
myButton.showsTouchWhenHighlighted = YES;
myButton.frame = CGRectMake(0.0, 3.0, 70,30);
[myButton addTarget:self action:@selector(BookmarkButtonPressed) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *rightbutton = [[UIBarButtonItem alloc] initWithCustomView:myButton];
self.navigationItem.rightBarButtonItem = rightbutton; 
```

把这个方法放在`viewDidLoad`

```
-(void)BookmarkButtonPressed

{

      //Do ur work here for Button Action

} 
```

# python - 模拟我正在使用 unittest 测试的对象

> ID：15149039
> 
> 赞同：1
> 
> 时间：2013-03-01T01:42:23.030
> 
> 标签：python, unit-testing, python-3.x

我有一个函数`vertex_set`，它接受一个变量`graph`（它是一组边和一组顶点的元组）并返回顶点。该函数在一个被调用的模块`undirected_graph`中，而不是在一个类中，而是一个常规函数。

我正在编写一个单元测试，我的测试函数如下所示：

```
def test_vertex_test(self, graph) 
```

我正在使用 Python 3.3.0，其中包含`mock`内置库。我会在这个测试中模拟`graph`变量：`graph = MagicMock()`然后用这个图调用真正的函数吗？还是我只是构建一些图表然后传递它，然后调用`assertEquals`以检查它是否返回了真实的东西？

我将如何在这里使用模拟或存根？还是在我的示例中无关紧要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:30:33.197

正如您似乎已经知道的那样，编写单元测试是为了确保您的代码按预期和设计运行。为此，我们将预期的参数传递给我们的函数并测试我们是否获得了预期的结果。相反，如果我们传递了意想不到的参数，我们想测试我们的函数是否可以处理它们。因此，我们单独运行测试；每个测试方法应该只测试我们应用程序的*一个*特性。

有时我们需要测试的函数使用不属于我们应用程序的库。这打破了隔离，使测试代码的逻辑变得困难。例如，我们的方法调用了一个外部库（它通过文件系统，创建文件，读取其他文件，最后返回是否成功）。在这个极端的例子中，我们无法控制这个外部库的输出。这使得我们很难测试我们的代码，因为我们不知道库将返回什么。进入模拟。我们会模拟对这个第三方函数的调用以返回我们期望的结果，True 和 False。这样，我们可以测试我们的代码是否可以处理这两个结果，而无需运行外部库的开销。

现在，对于你剩下的问题:)

如果您`vertex_set`没有使用第三方库，则以下内容将适用。

我正在编造`vertex_set`工作原理以解释如何测试它。

无向图.py

```
def vertex_set(graph):
   """Set's the vertex based on the graph passed.

      Returns set of vertices.
      Raises ValueError if graph is not a tuple of sets.
    """ 
```

由于这`vertex_set`可以返回 2 个不同的东西（顶点集和引发 ValueError），我们的测试需要确保我们可以在适当的时候得到这些结果。

test_undirected_graph.py

```
import unittest
import undirected_graph

class UndirectedGraphTestCase(unittest.testCase):
    def test_vertex_set(self):

        # Test we can set a vertex
        graph = ({1, 2}, {3, 4})
        result = undirected_graph.vertex_set(graph)
        self.assertEqual(result. {3, 4})

        # Test we can handle a negative vertex
        graph = ({1, 2}, {-3, -4})
        result = undirected_graph.vertex_set(graph)
        self.assertEqual(result, {-3, -4})

        # Test we can handle when we give an invalid graph
        graph = ()
        self.assertRaises(ValueError, undirected_graph.vertex_set, graph) 
```

希望我能明确何时需要 Mocks，何时不需要。如果您有更多问题，请告诉我:)

# javascript - JS 图像加载性能

> ID：15149040
> 
> 赞同：1
> 
> 时间：2013-03-01T01:42:25.657
> 
> 标签：javascript, jquery, css, performance

该网站在手机和笔记本电脑上的加载时间很慢，如何提高 JavaScript 的性能？

[http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/](http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/)

```
 Gallery = {
            _config: {
                speed: 500,
                size: 65,
                lightbox: !0,
                closeOnEsc: !0,
                animation: "default",
                slideshow: !1,
                slideshow_speed: 3E3,
                cube_speed: 1E3
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:48:23.347

获取此 Firefox 插件：

[https://addons.mozilla.org/en-us/firefox/addon/yslow/](https://addons.mozilla.org/en-us/firefox/addon/yslow/)

您可以在您的网站上运行报告并找到一些有助于您诊断问题的重要信息。

*更新* 是的，Chrome 似乎有一个 YSlow：[https ://chrome.google.com/webstore/detail/yslow/ninejjcohidippngpapiilnmkgllmakh?hl=en](https://chrome.google.com/webstore/detail/yslow/ninejjcohidippngpapiilnmkgllmakh?hl=en)

但是，我实际上并没有早先点击该链接——这完全是我的错。这些立方体上有大量的动画（而且 melonJS 看起来很棒！）。YSlow 在一般意义上会有所帮助。但是，您可能会遇到计算机 CPU/视频卡的限制。我的下一个建议是尝试分析应用程序。在 Chrome 菜单中，转到查看 -> 开发人员 -> Javascript 控制台。然后转到配置文件选项卡并尝试各种配置文件选项。这将向您显示所有 CPU 资源被占用的位置，并可能让您了解将注意力集中在哪里。

他们的网站[http://www.melonjs.org/](http://www.melonjs.org/)有一个论坛。我讨厌从 Stack Overflow 转移流量，但是如果你在那里发布你的问题，你可能会找到更精通 melonJS 的人的回复。Stack Overflow 上还没有 melonjs 标签，所以不幸的是，他们的专家似乎并没有潜伏在这里。

祝你好运！

# excel - 使用系统时间每 30 秒保存一次 excel 文件

> ID：15149041
> 
> 赞同：2
> 
> 时间：2013-03-01T01:42:35.193
> 
> 标签：excel, vba, datetime, time

我想根据当前系统时间每 30 秒保存一个 excel 文件。所以在 HH:MM:30 和 HH:NN:00。我知道您可以使用 TimeValue 在特定时间调用宏（以保存工作簿），例如在 16:30:00（见下文）。有谁知道当当前系统时间在excel中更新为XX：XX：30或XX：XX：00时，是否可以使用此功能或其他功能来保存打开的工作簿。

```
Private Sub Workbook_Open()

Application.OnTime TimeValue("16:30:00"), "macro_save"

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:23:49.827

在您的工作簿代码中：

```
Private Sub Workbook_Open()
    If Second(Now) < 30 Then
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now), 30), "macro_save"
    Else
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now) + 1, 0), "macro_save"
    End If
End Sub 
```

在标准模块中：

```
Public Sub macro_save()
    ThisWorkbook.Save
    If Second(Now) < 30 Then
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now), 30), "macro_save"
    Else
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now) + 1, 0), "macro_save"
    End If
End Sub 
```

您可能需要处理`macro_save`代码中的错误，否则可能会让用户非常（非常）烦人。

# jquery - IE 8 问题 - HTML 解析错误：在子元素关闭之前无法修改父容器元素 (KB 927917)

> ID：15149042
> 
> 赞同：0
> 
> 时间：2013-03-01T01:42:46.987
> 
> 标签：jquery, asp.net, .net, internet-explorer-8

如果我从我的母版页中评论下面的代码，我在 IE 8 中没有收到错误。其余所有浏览器都可以正常使用此代码。它唯一的 IE 8 搞砸了。但用户只使用 IE 8

我的母版页末尾的代码：

```
 </form>
</div>

    <script src="../Uploadedfiles/System/Scripts/layerslider/jQuery/jquery-easing-1.3.js" type="text/javascript"></script>
    <script src="../Uploadedfiles/System/Scripts/layerslider/js/layerslider.kreaturamedia.jquery-min.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $('#layerslider').layerSlider({
                skin: 'lightskin',
                skinsPath: '../uploadedfiles/System/Scripts/layerslider/skins/'
            });
        }); 
    </script>

</html> 
```

我该如何解决这个问题？我已经阅读了这个[链接](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/html-parsing-error-unable-to-modify-the-parent/e64759e0-d344-42d6-b1d8-0ce27504dd71) ，当尝试这样做时，错误没有弹出，网站也没有加载！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:43:39.977

您似乎缺少`</body>`标签。

# c++ - 计算顶点法线

> ID：15149045
> 
> 赞同：4
> 
> 时间：2013-03-01T01:42:56.597
> 
> 标签：c++, opengl, vertex, normals

我已经在谷歌搜索了很多小时没有很好解释的答案，我正在使用照明，我需要顶点法线，假设我们有这个顶点缓冲区（它是一个立方体）：

```
static const GLfloat g_vertex_buffer_data[] = {
-1.0f,-1.0f,-1.0f,
-1.0f,-1.0f, 1.0f,
-1.0f, 1.0f, 1.0f,
1.0f, 1.0f,-1.0f,
-1.0f,-1.0f,-1.0f,
-1.0f, 1.0f,-1.0f,
1.0f,-1.0f, 1.0f,
-1.0f,-1.0f,-1.0f,
1.0f,-1.0f,-1.0f,
1.0f, 1.0f,-1.0f,
1.0f,-1.0f,-1.0f,
-1.0f,-1.0f,-1.0f,
-1.0f,-1.0f,-1.0f,
-1.0f, 1.0f, 1.0f,
-1.0f, 1.0f,-1.0f,
1.0f,-1.0f, 1.0f,
-1.0f,-1.0f, 1.0f,
-1.0f,-1.0f,-1.0f,
-1.0f, 1.0f, 1.0f,
-1.0f,-1.0f, 1.0f,
1.0f,-1.0f, 1.0f,
1.0f, 1.0f, 1.0f,
1.0f,-1.0f,-1.0f,
1.0f, 1.0f,-1.0f,
1.0f,-1.0f,-1.0f,
1.0f, 1.0f, 1.0f,
1.0f,-1.0f, 1.0f,
1.0f, 1.0f, 1.0f,
1.0f, 1.0f,-1.0f,
-1.0f, 1.0f,-1.0f,
1.0f, 1.0f, 1.0f,
-1.0f, 1.0f,-1.0f,
-1.0f, 1.0f, 1.0f,
1.0f, 1.0f, 1.0f,
-1.0f, 1.0f, 1.0f,
1.0f,-1.0f, 1.0f
}; 
```

那么，如何计算顶点法线？就这样。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T01:47:27.430

这不是计算它们本身的问题，法线是对象艺术品的一部分。如果你让每个角的法线点从立方体“向外”，它就会有一种蓬松、圆润的外观，而如果你让它们直接指向外面（垂直于立方体那一侧的平面），你会有一个尖锐的定义的立方体。

如果您有一个包含许多三角形的更复杂（光滑）表面，您可以通过平均三角形边的叉积的值来计算法线。这将给出最平滑的外观。在这种情况下，您仍在进行艺术判断。每个对象都没有一个答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T01:53:31.690

如果你只有几何体，但没有法线，那么你可以编写一个小程序来生成每个顶点的法线。一般过程是平均共享给定顶点的面的面法线。但是，对于更“离散”的形状（对不起，数学家），例如立方体，最好只使用一个面法线并将其用于一侧的顶点法线。

[这个 Lighthouse3D 教程](http://www.lighthouse3d.com/opengl/terrain/index.php3?normals)解释了顶点法线背后的数学，就像[这个 USC Lecture 的幻灯片 22](http://run.usc.edu/cs480-s11/lec10-shading-opengl/10-shading-opengl.pdf)一样。

# python - 从 Thread 继承时调用超类构造函数

> ID：15149046
> 
> 赞同：0
> 
> 时间：2013-03-01T01:42:58.647
> 
> 标签：python, multithreading, inheritance, constructor

我很好奇为什么我不能调用`super(Thread, self).__init__()`而不是`Thread.__init__(self)`当我的类继承自 Thread 时。你能帮我理解这个问题吗？

```
#!/usr/bin/python

from threading import Thread
from Queue import Queue
class ThreadManager(object):

    def work(self, items):
        q = Queue()
        for item in items:
            q.put(item)

        print q.qsize()

        p = Worker()
        p.start()
        p.join()

class Worker(Thread):
    def __init__(self):
        # Why doesn't this work?
        #super(Thread, self).__init__()

        Thread.__init__(self)

    def run(self):
        print 'thread running'

def main():
    items = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
    tm = ThreadManager()
    tm.work(items)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:47:27.400

> 我很好奇为什么我不能调用`super(Thread, self).__init__()`而不是`Thread.__init__(self)`当我的类继承自`Thread`.

因为这不是[`super`](http://docs.python.org/2/library/functions.html#super)工作方式。您必须将您*自己的*类型作为第一个参数传递，以便它可以搜索该类型的下一个祖先。如果你通过了它`Thread`，你就要求`Thread`.

如果你的父类是一个常规的新式 Python 类，做错这件事通常意味着你跳过了一个祖先类，这可能是无害的，或者可能*看起来*有效但实际上并没有做正确的事情。但是`threading.Thread`有特定的检查来确保它被正确初始化，所以你可能会得到这样的东西：

```
AssertionError: Thread.__init__() was not called 
```

如果你的父类是一个 C 扩展类，它可能没有任何祖先，而且`super`即使有，它也可能没有实现，所以你通常也会这样得到错误。

如果您想了解所有这些是如何工作的（因为上面链接的文档不一定是最好的介绍性讨论），您可能想阅读[Python 的 super() 被认为是超级的。](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)

所以，总结一下：

```
super(Worker, self).__init__() 
```

# ruby-on-rails - Rails 表单使用独角兽随机损坏

> ID：15149068
> 
> 赞同：3
> 
> 时间：2013-03-01T01:45:43.743
> 
> 标签：ruby-on-rails, unicorn

我正在生产中的独角兽上在[http://ec2-54-245-163-172.us-west-2.compute.amazonaws.com](http://ec2-54-245-163-172.us-west-2.compute.amazonaws.com)上运行我的名为 Mockaroo 的应用程序。大约每 10 次用户单击主页上的“下载”按钮，post 参数没有正确转换为传递给控制器​​的参数哈希，在这种情况下会导致某些必需的参数不存在。根据错误页面中显示的调试输出，我可以判断出这种情况。发生错误时，参数看起来像：

```
{"mns_attributes"=>{"1"=>{"min_date"=>"2/28/2012"}},
 "schema"=>{"columns_attributes"=>{"1"=>{"max_date"=>"3/1/2013",
 "date_format"=>"%-m/%-d/%Y",
 "values"=>"",
 "min_words"=>"10",
 "max_words"=>"20",
 "min_paragraphs"=>"1",
 "max_paragraphs"=>"3", ... 
```

当它实际上应该看起来像

```
{"utf8"=>"✓",
 "authenticity_token"=>"LAV7Olx38E2UH64CS6BWpIT1qiHigcwfF780250iHkE=",
 "schema"=>{"columns_attributes"=>{"0"=>{"name"=>"id",
 "forgery_type"=>"Popular.row_number",
 "position"=>"1",
 "min"=>"1",
 "max"=>"100",
 "decimal_places"=>"2",
 "min_date"=>"2/28/2012",
 "max_date"=>"2/28/2013", ... 
```

这几乎就像它正在丢弃柱体的第一部分。当我在开发中运行薄弱时，这不会发生。请注意，我直接在端口 80 上运行 unicorn，而不是在另一个 Web 服务器（如 nginx 或 apache）后面。有没有其他人遇到过这个问题？如果您想自己尝试一下，当您看到以下消息时，您就会知道您遇到了错误：

```
NoMethodError in DataController#generate

undefined method `empty?' for nil:NilClass 
```

最奇怪的是，它只出现在 Chrome 和 Safari 等 webkit 浏览器中，而从未出现在 Firefox 中。有没有人遇到过这样的事情。对于如何进一步调试有什么建议吗？

- 更新 -

值得注意的是，我使用乘客和 apache 在另一台服务器上安装了相同的应用程序，并且没有发生此错误 - 所以它一定是独角兽特有的。

# computer-science - 源代码/机器语言的比例

> ID：15149072
> 
> 赞同：0
> 
> 时间：2013-03-01T01:45:49.573
> 
> 标签：computer-science, computer-architecture

对于计算机科学作业，我应该用任何语言编写一个小程序，并确定源代码指令与已编译机器代码指令的比率——我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:25:11.667

根据您的编译器，您可以使用开关来创建代码的汇编器版本。汇编代码是操作码（“机器语言”）的直接助记符表示。

[使用`gcc`](http://gcc.gnu.org/onlinedocs/gcc-4.4.5/gcc/Overall-Options.html#Overall-Options)`-masm=intel`（如果您更喜欢英特尔而不是默认的 AT&T 语法，请考虑添加）：

```
gcc -S ... 
```

据我所知，unixoid 系统上的其他编译器也支持`-S`. 这将跳过编译，您将要查找以源文件命名的文件，但扩展名为`.s`.

或[使用 MSVC](http://msdn.microsoft.com/en-us/library/367y26c6.aspx)：

```
cl.exe /FA 
```

...您可以添加`c`(ie `/FAc`) 这也将编译它。然后，您将要查找`.asm`文件。

另请参阅：[如何查看 C++ 程序的汇编代码？](https://stackoverflow.com/questions/840321)

完成此操作后，您基本上会比较（相关！）源代码行。然而，什么是相关的取决于你自己（或你老师）的判断。有一些工具可以计算[SLOC](https://en.wikipedia.org/wiki/Source_lines_of_code)，例如这篇维基百科文章中引用的工具：[SLOCCount](http://www.dwheeler.com/sloccount/)。

注意：第一段中关于直接代表的陈述略有不正确。如果我们在谈论宏汇编程序，那么这不成立，因为宏。但是即使 MSVC 使用宏汇编器作为后端，编译器也没有过多地使用宏功能，因此它们不应该（*太多*）干扰 SLOC 计数。

# python - IPython notebook 命令返回错误

> ID：15149075
> 
> 赞同：3
> 
> 时间：2013-03-01T01:46:22.833
> 
> 标签：python, ipython, ipython-notebook

我是 Python 新手，正在努力让 IPython（也是 numpy/scipy 包）在我的 Win7 机器上正常工作。我安装了 Python3.3，IDLE 工作，命令“ipython3”单独启动 ipython 环境，但是我无法启动笔记本。我收到以下错误消息。帮助将不胜感激。

```
C:\Users\Emre> ipython3 notebook Traceback (most recent call last):   
File "C:\Python33\Scripts\ipython3-script.py", line 9, in <module> load_entry_point('ipython==0.13.1', 'console_scripts', 'ipython3')()   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\frontend\terminal\ipapp.py", line 388, in launch_ new_instance app.initialize()   
File "<string>", line 2, in initialize   File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py", line 84, in catch_config_ error return method(app, *args, **kwargs)   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\frontend\terminal\ipapp.py", line 313, in initial ize super(TerminalIPythonApp, self).initialize(argv)   File "<string>", line 2, in initialize   
File   "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py", line 84, in catch_config_ error return method(app, *args, **kwargs)   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\core\application.py", line 325, in initialize self.parse_command_line(argv)  
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\frontend\terminal\ipapp.py", line 308, in parse_c ommand_line return super(TerminalIPythonApp, self).parse_command_line(argv)   
File "<string>", line 2, in parse_command_line   
File   "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py",   line 84, in catch_config_ error  return method(app, *args, **kwargs)   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py", line 420, in parse_comman d_line  return self.initialize_subcommand(subc, subargv)   
File "<string>", line 2, in initialize_subcommand   
File   "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py", line 84, in catch_config_ error   return method(app, *args, **kwargs)   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\config\application.py", line 352, in initialize_s ubcommand subapp = import_item(subapp)   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\utils\importstring.py", line 40, in import_item module = __import__(package,fromlist=[obj])   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\frontend\html\notebook\notebookapp.py", line 54, in <module>from .clustermanager import ClusterManager   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\frontend\html\notebook\clustermanager.py", line 2 7, in <module> from Python.parallel.apps.ipclusterapp import IPClusterStart   
File  "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\parallel\__init__.py", line 36, in <module>from .client.client import Client   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\parallel\client\client.py", line 46, in <module>from IPython.external.ssh import tunnel  
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\external\ssh\tunnel.py",  line 40, in <module>from IPython.external import pexpect   
File "C:\Python33\lib\site-packages\ipython-0.13.1-py3.3.egg\IPython\external\pexpect\__init__.py",   line 2, in <module>import pexpect  
File "C:\Python33\lib\site-packages\pexpect-2.4-py3.3.egg\pexpect.py", line 82  except ImportError, e: ^ SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:06:06.207

您已经在 Windows 上的 Python 3 上安装了 pexpect。这有两个问题：

*   pexpect 不适用于 Python 3
*   pexpect 在 Windows 上不起作用

您应该卸载 pexpect ( `pip uninstall pexpect`)。如果您想要 Python 3 中的 pexpect 功能，那么您需要与 Python 3 兼容的 fork [pexpect-u](https://pypi.python.org/pypi/pexpect-u)，但这不适用于 Windows。

# css - 垂直菜单的下拉菜单无法正常使用边距

> ID：15149082
> 
> 赞同：0
> 
> 时间：2013-03-01T01:47:17.903
> 
> 标签：css, drop-down-menu, web, web-site-project

嗨专家兄弟/姐妹，

我正在使用一个网站，并且遇到了下拉菜单的问题。网站上有两个下拉菜单。一种是水平下拉菜单，另一种是垂直下拉菜单。我已经成功放置了两个下拉菜单。请首先查看该图像：

1.  水平菜单的下拉菜单（父“购物车”） ![水平菜单的下拉菜单](../Images/f6b77535e578d9d4b2810a74a8d9799e.png)
2.  垂直菜单的下拉菜单（父“杂志”） ![垂直菜单的下拉菜单](../Images/1fdc4a9624c2501924574d179a83a408.png)

我遇到了第二个问题（垂直菜单的下拉菜单）：下拉菜单属于“杂志”选项卡。您可能会看到主导航/选项卡和下拉导航之间有一个边距。我的问题是那个边距。我必须使用那个余量。但是，**为了创建该边距，我无法从 "Magazine nav" 轻松地将鼠标放在下拉菜单上**。

你可以检查[链接](http://abidhasan.zxq.net/help/)。看，从“购物车”菜单到它的下拉菜单也有一个边距（图 1）。但是，可以轻松地将鼠标放在“购物车”的下拉菜单上。但是，您不能在“杂志”菜单的下拉菜单中轻松选择/放置鼠标。

虽然从“购物车”菜单到它的下拉菜单也有一个边距，但它没有造成问题。因为，我给“购物车”li 赋予了高度，这在睁开的眼里看起来很边缘。因此，从“购物车”菜单到它的下拉菜单没有实际的边距（marin-top）。但是，我不能对“杂志”菜单使用相同的技术，我的意思是我不能为“杂志”菜单使用更大的宽度来作为其下拉菜单的抽象边距。因为，如果我使用更大的宽度而不是边距，“杂志”菜单中也会出现背景颜色和图像。

那么，你能帮帮我吗？我可以向您说明我的问题吗？简而言之，我想告诉你，**我不能轻易地将鼠标从“杂志”菜单放到它的下拉菜单中，因为在“杂志”菜单到它的下拉菜单的左侧创建了一个边距**。

感谢大家阅读我的问题。

（我试图在此处提供该菜单的代码。但是，我无法在此处格式化。这就是为什么，如果有人需要，我已将其上传：[下载](https://www.dropbox.com/s/y2auoux3a0jvm2i/help.zip)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:14:01.730

好吧，这是一个糟糕的 hack，但你可以像这样伪造边距：

```
.vertical_nav li ul li {
  border-left: 15px solid #fff;
} 
```

# c# - 如何在 C# 中解析命令行参数

> ID：15149083
> 
> 赞同：1
> 
> 时间：2013-03-01T01:47:18.547
> 
> 标签：c#

我正在尝试制作一个 C# 应用程序，它接受命令行参数（用户名和密码）并将它们都声明为变量，所以我会给参数 Bob 和 12345，它将 Bob 保存为变量：用户名和 12345 作为变量：密码. 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:48:23.067

您可以使用[命令行参数](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)来做到这一点。

例子：

```
public static void Main(string[] args)
   {
       //The arguments are 0 and 1, for the first and second args.
       var username = args[0];
       var password = args[1];
   } 
```

# jquery - 在 RoR 中使用 jQuery 将事件绑定到动态创建的按钮的正确方法是什么？

> ID：15149086
> 
> 赞同：0
> 
> 时间：2013-03-01T01:47:40.243
> 
> 标签：jquery, ruby-on-rails

我在 application.js 文件中包含了一个点击事件：

```
 $('#test_container').on( 'click', '#test_button', function(event){
    alert("HI");
    event.preventDefault();
  }); 
```

我正在通过我的应用程序中的部分动态创建该按钮。事件永远不会发生。我认为 jQuery`on`甚至可以用于动态创建的东西。我在这里缺少什么吗？

我知道`live`并且我相信它有效，但它已贬值，所以我尽量不使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:49:58.890

哇，对不起`.live()`

那你用`.on()`错了。

```
$(document).on("click", '#test_button', function(){ 
  alert("Goodbye!"); 
}); 
```

该页面`.live()`显示如何转换为`.on()`：

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# python - I am having trouble with a Python list display using "in range"

> ID：15149089
> 
> 赞同：1
> 
> 时间：2013-03-01T01:48:13.480
> 
> 标签：python, list

My first question here, so if I don't do something correctly, please tell me so I can correct it and/or do it correctly next time.

I am trying to allow a user to input ten numbers, then spit them back out in the reverse order they gave them. I can't get the ranges right, though, because it keeps either asking me for just 9 numbers, or it doesn't assign anything to the last variable in my list.

I am using Python 3.x.

Here is my code:

```
#Creating my list
myNumbers=[1,2,3,4,5,6,7,8,9,10,11]

#Creating a for loop for inputs
for A in range (1,10):
    myNumbers[A]=input("Enter a number: ")

#Creating a for loop for outputs
for B in range (10,1,-1):
    print(myNumbers[B]) 
```

It's only allowing me to input 9 numbers, and then my output is the number 11, then my reverse input.

Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:51:03.277

`range` always omits the last value, and starts from 0 by default (remember that lists are 0-indexed in Python, so a 10-element list has indices 0 through 9).

```
>>> list(range(10))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

Also, instead of using `range(10,1,-1)`, I would recommend just using `reversed`:

```
for i in reversed(range(10)): # iterates from 9 down to 0 
```

or, since you are just printing out the items in the list, just iterate over the reversed list items directly:

```
for item in reversed(myNumbers):
    print(item) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:50:56.147

The reason it's only letting you enter 9 numbers, is that the first element in a list has index of `0`, so you should be assigning to `A[0]...A[9]`

If you start with an empty list, you can `append` to it as many times as you wish, so you don't need to know the size in advance.

```
my_numbers = []

for i in range(10):
    my_numbers.append(input("Enter a number: "))

for item in reversed(my_numbers):
    print(item) 
```

Loop variables in Python don't have to be numbers, you can iterate over anything that returns a sequence of objects.

There is a shorthand way of creating a list like this called a list comprehension. Then your program becomes just 3 lines

```
my_numbers = [input("Enter a number: ") for i in range(10)]

for item in reversed(my_numbers):
    print(item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:53:26.270

Try using range (0,10) instead of range (1,10)

range (1,10) is similar to `for (i=1;i<10;i++)` which runs only 9 times(does not run for i=10) also, the array index starts from 0 and not 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T02:35:04.700

```
print( '\n'.join(reversed([input("Enter a number: ") for i in range(10)])) ) 
```

or

```
li = []
for i in xrange(4):
    li.insert(0,input("Enter a number: ")
print( '\n'.join(li) ) 
```

This solution doesn't create a new (reversed) list object. We directly construct the desired list.
It can be shortened to

```
li = []
any(li.insert(0,input("Enter a number: ")) for i in xrange(4))
print( '\n'.join(li) ) 
```

# python - 使用 paramiko 将命令发送到具有交互元素的打开 shell

> ID：15149093
> 
> 赞同：1
> 
> 时间：2013-03-01T01:48:55.560
> 
> 标签：python, ssh, paramiko

我正在尝试在 Oracle ZFS 阵列上执行远程脚本。他们设计 CLI 的方式是您可以通过 SSH 向它发送一个 javascript“脚本”。这个脚本应该在第一行有“脚本”这个词，它将调用一个子shell，它在执行之前在它自己的行上等待一段时间

例子：

```
script
run('shares');
var projects = list();
dump(projects);
. 
```

如果你像这样使用它：

```
$ ssh array < above_script 
```

以 JSON 可读格式输出一个很好的项目列表。

我想让它在 python 脚本中与 paramiko ssh 一起使用，但到目前为止我运气不佳。成功连接并获取 SSHClient 实例后，我正在尝试以下操作：

```
try:
    get_projects = """run('shares');
                    var projects = list();
                    dump(projects);"""
    w, r, e = ssh.exec_command('script')

    for line in get_projects.split('\n'):
        w.write(line)
    w.write('.')
    pp.pprint(e.readlines())
    pp.pprint(r.readlines())

except paramiko.SSHException, e:
    logger.exception("Couldn't execute script on array %s: %s" % (array.name, e)) 
```

问题是它永远不会回来，它只是坐在那里。我什至不能 ctrl-c 停止它，我必须 ctrl-z 并杀死它。

如果我删除了读取 stderr 的尝试，并且 stdout 它返回但没有捕获任何内容，因此似乎从套接字读取存在问题：

```
INFO:paramiko.transport:Authentication (publickey) successful!
INFO:root:Not none
DEBUG:paramiko.transport:[chan 1] Max packet in: 34816 bytes
DEBUG:paramiko.transport:[chan 1] Max packet out: 32768 bytes
INFO:paramiko.transport:Secsh channel 1 opened.
DEBUG:paramiko.transport:[chan 1] Sesch channel 1 request ok
DEBUG:paramiko.transport:EOF in transport thread 
```

任何见解将不胜感激。

* * *

小更新（这看起来很难看）：使用 ssh.invoke_shell() 调用 Channel 允许我发送脚本，然后运行 ​​shell.recv(1024) 返回下面的混乱输出：

```
INFO:paramiko.transport:Authentication (publickey) successful!
>>> shell = ssh.invoke_shell()
DEBUG:paramiko.transport:[chan 1] Max packet in: 34816 bytes
DEBUG:paramiko.transport:[chan 1] Max packet out: 32768 bytes
INFO:paramiko.transport:Secsh channel 1 opened.
DEBUG:paramiko.transport:[chan 1] Sesch channel 1 request ok
DEBUG:paramiko.transport:[chan 1] Sesch channel 1 request ok
>>> get_projects = """script
...                             run('shares');
...                             var projects = list();
...                             dump(projects);
...                             .
...                             """
>>> get_projects
"script\n                            run('shares');\n                            var projects = list();\n                            dump(projects);\n                            .\n                            "
>>> shell.send(get_projects)
203
>>> shell.recv(1024)
'Last login: Fri Mar  1 02:26:58 2013 from 10.91.134.163\r\r\n\r\x1b[1mciczfsa:>\x1b[m\x0f \x1b[m\x0fscript\n\r\r("." to run)> \x1b[m\x0f                            run(\'shares\');\n\r\r("." to run)> \x1b[m\x0f                            var projects = list();\n\r\r("." to run)> \x1b[m\x0f                            dump(projects);\n\r\r("." to run)> \x1b[m\x0f                            .\n\r[\'Project1\', \'Project_PoolA_2\', \'RBR_PROJECT\', \'SAS_501\', \'TestProject\', \'default\', \'reptest\', \'testproj1\', \'testproj2\']\r\n\r\x1b[1mciczfsa:>\x1b[m\x0f \x1b[m\x0f                            ' 
```

这里没有太多帮助，因为它显然不是结构化的。理想情况下，我想将脚本发送到 shell，并接收结构化响应，我可以将其解析为 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-27T15:33:10.440

来自原始海报：

> 解决方法是我需要为每个“新行”发送一个换行符（很有趣）：

```
try:
    get_projects = """run('shares');
                    var projects = list();
                    dump(projects);
                    ."""
    w, r, e = ssh.exec_command('script')

    for line in get_projects.split('\n'):
        w.write(line.lstrip().rstrip())
        w.write('\n')
    pp.pprint(r.readline())

except paramiko.SSHException, e:
    logger.exception("Couldn't execute script on array %s: %s" % (array.name, e)) 
```

# matching - SIFT 或 SURF 对象检测

> ID：15149094
> 
> 赞同：-1
> 
> 时间：2013-03-01T01:49:08.463
> 
> 标签：matching, sift, surf, object-detection

请帮助我找到 SIFT 和 SURF 对象检测的代码。我不知道 OpenCV。我在哪里可以下载 SIFT 或 SURF 对象检测的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:24:23.057

您可以在以下网址找到一个开源库 VLfeat： [http](http://www.vlfeat.org/overview/sift.html) ://www.vlfeat.org/overview/sift.html 它包含 SIFT 代码。

冲浪代码也可以通过以下方式在 Matlab 中获得：detectSURFFeatures

成为成功者，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:14:21.113

好吧，我不知道用于对象检测的 sift 代码，但可以很容易地找到 sift 算法。只需 google sift_Yantoneomie，你一定会找到一个……祝你好运！

# c# - asp.net MVC MySQL 错误 [无法初始化提供程序。缺少或不正确的架构。]

> ID：15149104
> 
> 赞同：0
> 
> 时间：2013-03-01T01:50:26.337
> 
> 标签：c#, mysql, model-view-controller

我下载了 nearforum 并尽我所能使用 MySql 进行设置。我收到此错误：

```
 Server Error in '/' Application.
    --------------------------------------------------------------------------------

    Configuration Error 
    Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

    Parser Error Message: Unable to initialize provider.  Missing or incorrect schema.

    Source Error: 

    Line 49:                <clear/>
    Line 50:                <add name="ForumsMembershipProvider"
    Line 51:                     type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.6.4.0, Culture=neutral"
    Line 52:                     connectionStringName="Forums" 

    Source File: C:\nearforumsc#\web\web.config    Line: 51 

 //This is my config file.

    <?xml version="1.0" encoding="utf-8"?>
    <!--
        For more information on how to configure your ASP.NET application, please visit
        http://go.microsoft.com/fwlink/?LinkId=152368
        -->
    <configuration>
        <configSections>
            <section name="routeMapping" type="NearForums.Configuration.Routing.RouteMappingConfiguration, NearForums" requirePermission="false" />
            <section name="site" type="NearForums.Configuration.SiteConfiguration, NearForums" requirePermission="false" />
            <section name="redirector" type="NearForums.Configuration.Redirector.RedirectorConfiguration, NearForums" requirePermission="false" />
            <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" requirePermission="false" />
        </configSections>
        <appSettings>
            <add key="ClientValidationEnabled" value="true" />
            <add key="UnobtrusiveJavaScriptEnabled" value="true" />
        </appSettings>
        <routeMapping configSource="Config\Routes.config" />
        <site configSource="Config\Site.config" />
        <redirector configSource="Config\Redirector.config" />
        <nlog configSource="Config\Logging.config" />
        <connectionStrings>
            <add name="Forums" connectionString="Server=localhost;Database=nearforum;UID=root;PASSWORD=admin;" providerName="MySql.Data.MySqlClient" />
    <!--
            The above connectionstring with name "forums" will be used by the site.
            Below this line you can see 2 samples of connection strings, one that points to a Microsoft SQL Server database and other that points to a MySql database.
            <add name="ForumsMSSQL" connectionString="Data Source=localhost;Initial Catalog=Forums;User ID=root;Password=admin" providerName="System.Data.SqlClient"/>
            <add name="ForumsMySql" connectionString="Server=localhost;Database=nearforum;UID=root;PASSWORD=admin;" providerName="MySql.Data.MySqlClient"/>
    -->
        </connectionStrings>
        <system.data>
            <DbProviderFactories>
                <remove invariant="MySql.Data.MySQLClient" />
                <add invariant="MySql.Data.MySqlClient" name="MySQL Data Provider" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data" />
            </DbProviderFactories>
        </system.data>
    <!--
        <system.net>
            <mailSettings>
                <smtp deliveryMethod="SpecifiedPickupDirectory" from="admin@yoursite.com">
                    <specifiedPickupDirectory pickupDirectoryLocation="c:\Temp\"/>
                </smtp>
            </mailSettings>
        </system.net>
    -->
        <system.web>
            <authentication mode="Forms" />
            <membership defaultProvider="ForumsMembershipProvider">
                <providers>
                    <clear/>
                    <add name="ForumsMembershipProvider"
                         type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.6.4.0, Culture=neutral"
                         connectionStringName="Forums" 
                         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" maxInvalidPasswordAttempts="30" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="NearForums"/>

                </providers>
            </membership>
            <compilation targetFramework="4.0">
                <assemblies>
                    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                </assemblies>
            </compilation>
            <customErrors mode="RemoteOnly"/>
            <pages>
                <namespaces>
                    <add namespace="System.Web.Helpers" />
                    <add namespace="System.Web.Mvc" />
                    <add namespace="System.Web.Mvc.Ajax" />
                    <add namespace="System.Web.Mvc.Html" />
                    <add namespace="System.Web.Routing" />
                    <add namespace="System.Web.WebPages" />
                </namespaces>
            </pages>
            <httpHandlers>
                <remove verb="GET,HEAD,POST" path="*" />
                <add verb="*" path="*" type="NearForums.Web.Handlers.StaticFileHandler, NearForums.Web" />
            </httpHandlers>
            <httpModules>
                <add name="RedirectorModule" type="NearForums.Web.Modules.RedirectorModule, NearForums.Web" />
                <add name="ModelBinderModule" type="NearForums.Web.Modules.ModelBinderModule, NearForums.Web" />
                <add name="CompressionModule" type="NearForums.Web.Modules.CompressionModule, NearForums.Web" />
            </httpModules>
            <httpRuntime requestValidationMode="2.0" />
        </system.web>
    <!-- 
        IIS 7.0\.  or above
    -->
        <system.webServer>
            <validation validateIntegratedModeConfiguration="false" />
            <modules runAllManagedModulesForAllRequests="true">
                <add name="RedirectorModule" type="NearForums.Web.Modules.RedirectorModule, NearForums.Web" />
                <add name="ModelBinderModule" type="NearForums.Web.Modules.ModelBinderModule, NearForums.Web" />
            </modules>
        </system.webServer>
        <runtime>
            <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
                <dependentAssembly>
                    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
                    <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
                </dependentAssembly>
            </assemblyBinding>
        </runtime>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:10:22.787

不得不手动添加以下行：TY web development，因为太简单了，浪费时间。

```
<roleManager enabled="true" defaultProvider="MySqlRoleProvider">
<providers>
<clear />
 <add connectionStringName="MySqlMembershipConnection"
 applicationName="/"
 name="MySqlRoleProvider"
 type="MySql.Web.Security.MySQLRoleProvider, mysql.web"
 autogenerateschema="true"/>
 </providers>
 </roleManager>

 <profile>
 <providers>
 <clear/>
 <add type="MySql.Web.Security.MySqlProfileProvider, mysql.web"
 name="MySqlProfileProvider"
 applicationName="/"
 connectionStringName="MySqlMembershipConnection"
 autogenerateschema="true"/>
 </providers>
 </profile> 
```

# java - 如何使用 tile 建立一个灵活的网站？

> ID：15149111
> 
> 赞同：1
> 
> 时间：2013-03-01T01:51:10.177
> 
> 标签：java, struts2, tiles, tiles2, apache-tiles

我的网站中有 4 种不同类型的成员，比如说 memberA、memberB、memberC 和 memberD。每个都应该有自己的标题`headerA.jsp`, `headerB.jsp`, `headerC.jsp`, `headerD.jsp`。

如下所示，每个成员类型都有一个定义，并定义了它们的特定标题和正文。每个都有自己的标题，但其中一些例如`memberA`，`memberB`并作为它们的主体属性`memberC`共享。`gbody.jsp`

```
 <definition name="MemberA" extends="baseLayout">
            <put-attribute name="header" value="/headerA.jsp"/>
            <put-attribute name="body" value="/gbody.jsp"/>
        </definition>

       <definition name="MemberB" extends="baseLayout">
            <put-attribute name="header" value="/headerB.jsp"/>
            <put-attribute name="body" value="/bodyB.jsp"/>
        </definition>

        <definition name="MemberC" extends="baseLayout">
            <put-attribute name="header" value="/headerC.jsp"/>
            <put-attribute name="body" value="/gbody.jsp"/>
        </definition>

        <definition name="MemberD" extends="baseLayout">
            <put-attribute name="header" value="/headerD.jsp"/>
            <put-attribute name="body" value="/gbody.jsp"/>
        </definition> 
```

会员登录时有两个问题

1.  我如何向他们展示他们的特定标题？
2.  我如何定义他们的特定身体属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:15:47.267

您可以这样定义4个标题

```
<definition name="Members" extends="baseLayout">
    <put-attribute name="headerA" value="/headerA.jsp"/>
    <put-attribute name="headerB" value="/headerB.jsp"/>
    <put-attribute name="headerC" value="/headerC.jsp"/>
    <put-attribute name="headerD" value="/headerD.jsp"/>
    <put-attribute name="body" value="/gbody.jsp"/>
</definition> 
```

然后在基本布局中有一些代码说

```
<c:if test="${memberA}">
    <tiles:insert attribute="headerA"/>
</c:if>
etc... 
```

# python - Python：将变量无序插入字符串

> ID：15149114
> 
> 赞同：1
> 
> 时间：2013-03-01T01:51:33.133
> 
> 标签：python

是否可以在不知道顺序的情况下将变量值注入字符串？
我熟悉

```
"% world" % "Hello" 
```

语法，但有什么可比的

```
string = "Order id %{order.id}, price: %price" % (price, order) 
```

我之所以问，是因为我想要一个字符串列表，其中变量的使用及其位置不一致，并且我想在函数中全部替换它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:53:47.540

您可以使用`.format`：

```
>>> class order(object) : pass
... 
>>> a = order()
>>> a.id=3
>>> "{order.id}".format(order=a)
'3'
>>> "{order.id} and then a {foo} hit the {baz} ".format(baz="fan",foo="rocket",order=a) 
'3 and then a rocket hit the fan ' 
```

这使用本质上无序的关键字参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:55:41.500

你有字符串*列表*还是字典？如果它是一个实际的列表，那么你不可能做任何有用的事情，因为你不知道什么是什么值。但如果它是一个字典，你有几个选择。使用`%`运算符：

```
"Order number %(order_id)s, price: %(price)s" % dict(order_id=3, price=4.00) 
```

但我注意到你`order.id`在你的例子中，这听起来像是`order`一些自定义对象。在这种情况下，您可以使用较新的`.format`方法，它可以让您直接在字符串中查找属性：

```
"Order number {order.id}, price: {price}".format(order=..., price=...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:54:46.307

这假设`order`和`price`是整数。您可以使用任何其他格式说明符代替`d`. （即`f`浮动）

```
string = "Order id %(order)d, price: %(price)d" % {'price': price, 'order': order} 
```

# perl - 在 Perl 中逐行读取文件时会丢失文本行。 错配

> ID：15149118
> 
> 赞同：1
> 
> 时间：2013-03-01T01:51:41.807
> 
> 标签：perl, eol

我想从 3G 调制解调器中提取和记录各种参数，因为存在间歇性丢失。因此，我使用 wget`3Ginfo.html`从 3G 调制解调器读取并将内容放入文件`contents.txt`中。使用 Notepad++ 打开此文件会显示所有数据。

由于我的声誉，我无法发布图片，因此下面的代码是我能做的最好的；从记事本++（打开查看所有字符），我得到：

```
<tr>[LF]

<td class='hd'>Signal Strength:</td>[LF]

<td>[LF]

-72[CR]

&nbsp(dBm)&nbsp(High)</td>[LF]

</tr>[LF] 
```

但是，当从 Perl 逐行读取文件时，很明显行数少于 Notepad++ 报告的行数，并且数据丢失。在这种情况下，缺少实际信号强度值。

这是读取文件的 Perl 代码：

```
open hLOGFILE, "<output.txt";
while (<hLOGFILE>) 
{ 
    print "Line no $.  Text is $_ ";
} 
```

这是输出（作为文本，因为我还不能发布图片）：

```
Line no 98  Text is <tr>

Line no 99  Text is <td class='hd'>Signal Strength:</td>

Line no 100  Text is <td>

&nbsp(dBm)&nbsp(High)</td>

Line no 102  Text is </tr> 
```

很明显，有缺失的行，它与`<cr>`行结束符有关。我试过啜饮文件，但这些行仍然丢失。

除了逐字节读取然后尝试以这种方式解析文件（这不是很吸引人）之外，我找不到解决方案。

我的计划是每分钟左右简单地提取和记录感兴趣的行。

我尝试打开指定各种编码的文件，但仍然没有乐趣。如果 Notepad++ 可以读取并显示所有数据，为什么它在 Perl 中不起作用。从 Windows XP 命令行使用`more`时，它显示数据也丢失了。

当我从 chrome 查看源代码时，我得到了，

```
<tr>
    <td class='hd'>Received Signal Code Power(RSCP):</td>
    <td align='center'> -78 dBm</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:52:18.807

这`-72[CR]`条线没有*丢失*。你只是没有看到它。

这是因为它不是*一行*，因为回车字符通常不被识别为换行符。正在发生的事情是您将其作为一行阅读：

```
-72[CR]&nbsp(dBm)&nbsp(High)</td>[LF] 
```

正在发生的事情是您正在打印：

```
Line No. 101 is -72 
```

然后打印回车符，使光标回到行首。然后，打印该行的其余部分。这掩盖了您打印的内容，因此您会看到：

```
&nbsp(High)</td> 
```

因为这覆盖了该行上的先前文本。

我用 VI 创建了三个不同的文件，具有三种不同的文件格式（“mac”=“\r”、“unix”=“\n”和“dos”=“\r\n”），然后我使用了 Unix cat 命令将它们组合成一个混杂的文件。

这是我的程序：

```
use 5.12.0;
use autodie;

open my $test_fh, "<:crlf", "new_test";

local ($/);               #Enable "slurp" mode
my $file = <$test_fh>;    #Whole file is read in.

$file =~ s/[\r\n]+/\n/g;  #Make all line endings just \n

#
# Now "rewrite" the file
#
my @file = split /\n/, $file;
for my $line (@file) {
    say qq(Line: "$line");
} 
```

这打印出来：

```
Line: "MAC FILE"
Line: "this"
Line: "is"
Line: "a"
Line: "test of my"
Line: "program"
Line: "this"
Line: "WINDOWS FILE"
Line: "is"
Line: "a"
Line: "test of my"
Line: "program"
Line: "UNIX FILE"
Line: "this"
Line: "is"
Line: "a"
Line: "test of my"
Line: "program" 
```

如您所见，*MAC 文件*确实显示了所有行，但单词`Line:`并没有全部打印出来。那是因为 Perl 把它读成了一大行。我`s/\r+/\n/g`将其转换为在多行上打印，但`while`循环将其作为单行读取。

看看我的`open`陈述。我使用三个参数来解决 Perl 中的一些小问题。好处是您可以将图层或编码附加到文件中。例如，`<:crlf`自动将 Windows 文件从`\r\n`结尾转换为 just `\n`，但不会触及 Unix 文件。对于在混合 Unix/Windows 环境中工作的人来说，这是一个救命稻草。

我希望为旧的*Mac*风格的文本文件找到一些类似的层（在 Mac OS X 之前的日子里，Macintosh 文件只以 a 结尾，`\r`而根本没有`\n`。那将真正解决问题。不幸的是，我没有找到任何文档。很长时间以来，您没有 OS X Macintosh 之前的文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:05:08.830

回车是`\r`. 它列在[perldoc perlreref](http://perldoc.perl.org/perlreref.html)中。从您的输入中删除它，例如在您的那个循环中，可以这样做：

```
while (<hLOGFILE>) { 
    s/\r//g;
    print "Line no $.  Text is $_ ";
} 
```

备择方案

```
tr/\r//d;        # same thing as above, really
s/[\r\n]+$//;    # remove all line endings 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:49:35.773

你可以 chomp() 关闭它...

```
open hLOGFILE, "<output.txt";
while (<hLOGFILE>)
{
    chomp(); 
    print "Line no $.  Text is $_ \n" if( $_ );
} 
```

在某些系统上，我看到需要调用 chomp() 两次，以摆脱多个行尾字符……是的，确实存在。您可能还想添加一些东西来去除所有这些 HTML 标记？请参阅：[如何使用 Perl 去除字符串中的 HTML？](https://stackoverflow.com/questions/1067414/how-can-i-strip-html-in-a-string-using-perl)

# ios - didFinishLaunchingWithOptions 和其他没有被调用

> ID：15149120
> 
> 赞同：0
> 
> 时间：2013-03-01T01:52:22.500
> 
> 标签：ios, objective-c, xcode, push-notification

使用断点我发现`didFinishLaunchingWithOptions`没有被调用，也不是常量声明`static NSString *kAppKey = @"0000000";`

我要做的是在我的应用程序中设置推送通知，但没有调用任何基本功能。这也没有被调用/

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    [PushWizard startWithToken:deviceToken andAppKey:kAppKey andValues:nil];

} 
```

这些都在我的 AppDelegate 中。关于造成这种情况的任何建议？

# objective-c - 在中间值显示警报（Objective-C 或任何其他）

> ID：15149121
> 
> 赞同：1
> 
> 时间：2013-03-01T01:52:23.437
> 
> 标签：objective-c

我有一个问题，我尝试了几种方法，但我找不到解决方案。

问题（例如在 Objective-C 中） 我有一个从 0 开始的进度，并且对于每次迭代，该值增加 3 个点。即 0、3、6、9、12、15 等

好吧，我需要当计数器超过10时，显示警报，但只有当超过10、20、30、40等时，中间值（3、6、9等）不应该显示.

例如：

```
0 -> nothing
3 -> nothing
6 -> nothing
9 -> nothing
12 -> ALERT!!
15 -> nothing
18 -> nothing
21 -> ALERT!!
24 -> nothing
27 -> nothing
30 -> ALERT!!
33 -> nothing
36 -> nothing
[...] 
```

任何想法？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:58:37.133

`value`向下舍入为 10 的倍数。向下`value-3`舍入为 10 的倍数。如果四舍五入的值不同，则显示警报。

```
static int roundToMultipleOf10(int n) {
    return 10 * (n / 10);
}

static void showAlertIfAppropriateForValue(int value) {
    if (roundToMultipleOf10(value) != roundToMultipleOf10(value - 3)) {
        UIAlertView *alert = [[UIAlertView alloc] init...];
        [alert show];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:58:50.113

您的要求意味着`ALERT!!`仅出现在 x0、x1 或 x2 中，其中 x 是 10 位数字：

```
for (int i = 0; i < 1000; i += 3) {
    if (i > 10 && i % 10 <= 2) {
        NSLog(@"ALERT!!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:40:18.113

混合所有答案后，我的最终解决方案。谢谢！

```
 // Round function
    int (^roundIntegerTo10)(int) =
    ^(int value) {
        return value / 10 * 10;
    };

    // Progress evaluator
    if (_currentProgress > _nextProgress && _currentProgress >= 10) {
        NSLog(@"ALERT!!!");
        _nextProgress = roundIntegerTo10(_currentProgress) + 10;
    } 
```

# c - 来自字符串的向量导致分段错误

> ID：15149122
> 
> 赞同：0
> 
> 时间：2013-03-01T01:52:25.793
> 
> 标签：c

我正在尝试将字符串转换为向量。我的代码是：

```
char **my_str2vect(char *str)
{
    char** vect;
    char* temp;
    int num_whitespaces = 0;

    temp = str;

    for(; *temp!= '\0'; temp++)
    {
        if(*temp == ' ')
        {
            num_whitespaces++;
        }
    }

    vect = (char **)malloc((num_whitespaces+1)*sizeof(char *));

    *vect = str;

    for(; *str != '\0'; str++)
    {
        if(*str == ' ')
        {
             *str = '\0';
             *vect = ++str;
             vect++;
        }
    }

    *vect = NULL;

    return vect;
} 
```

不幸的是，我遇到了分段错误。我使用以下代码调用该函数：

```
n = read(0, buffer, MAX-1);
buffer[MAX] = '\0';

if(n >= 0)
{
     vect = my_str2vect(buffer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:13:35.620

您的代码中有几个错误： 1\. 在您的`my_str2vect`函数中，指针`vect`被移动到您分配的内存的末尾，所以当您返回 vect 并想使用某些东西`vect[1]`或`vect[2]`在调用者函数中时，一定有段错误。`vect_tmp`在开始操作之前，您可以使用 a来存储原始位置`vect`。2\. 开始转换字符串时出现一些逻辑错误。请参考我下面的修改代码。

```
char **my_str2vect(char *str)
{
    char** vect;
    char** vect_tmp;
    char* temp;
    int num_whitespaces = 0;

    temp = str;

    for(; *temp!= '\0'; temp++)
    {
        if(*temp == ' ')
        {
            num_whitespaces++;
        }
    }

    vect_tmp = (char **)malloc((num_whitespaces+1)*sizeof(char *));
    vect = vect_tmp;

    *vect = str;

    for(; *str != '\0'; str++)
    {
        if(*str == ' ')
        {
             *str = '\0';
             *(++vect) = str + 1;
        }
    }

    *(++vect) = NULL;

    return vect_tmp;
} 
```

请注意，即使经过修改，该功能仍然无法处理一些连续空格的特殊情况。您可能会花更多的时间来提高兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:54:58.653

您仅分配向量，而不是向量的每种情况。你可以使用`calloc`它。

# python - os.listdir() 中的 Windows 错误

> ID：15149125
> 
> 赞同：2
> 
> 时间：2013-03-01T01:52:46.207
> 
> 标签：python, windows, python-2.7

我正在编写我的第一个 Python 脚本来做一些跨平台的工作，但遇到了一个我没想到的错误，并且找不到任何相关信息（或者我可能不明白我在读什么）。

```
brand_dir = os.path.join(os.getcwd(), 'Resources', 'html', brand )
for f in os.listdir(brand_dir):
  # BREAKS WITH: cannot find the file path specified: 
  # 'C:\\path\\to\\Resources\\html\\brand_value/*.*' 
```

在 OSX 上运行良好。唯一看起来很奇怪的部分是，`/*.*`所以我有点松散地假设这是问题所在，但我没有看到任何迹象表明这应该引发 Python 循环。

我确定这是一个菜鸟错误，但它是什么？Python 2.7.3，Windows XP 32 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:35:25.207

您是否检查过这`C:\\path\\to\\Resources\\html\\brand_value`是您系统上的有效路径？该`/*.*`部分很正常，当Windows找不到路径时，它会发生。

# php - Netbeans 和 Xdebug

> ID：15149127
> 
> 赞同：2
> 
> 时间：2013-03-01T01:53:01.333
> 
> 标签：php

我已经安装了 netbeans 7.3，php 5.4.7 和 xdebug via xampp 配置正确。

当我尝试在我的 index.html 文件上启动调试会话时，该文件包含我提交给我的 php 文件的表单，调试器永远不会连接（等待连接）。但是，如果我在它运行的 php 文件上启动调试器，但它当然没有索引页面上的表单中的值？

这是我的 php.ini 设置：

```
zend_extension = "C:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll"
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:49:09.893

我不能说完全解决方案，但根据我的经验，您应该尝试以下步骤

1.  [从xdebug 自定义下载](http://xdebug.org/wizard.php)中下载正确版本的 xdebug 并粘贴您的 phpinfo() 输出
2.  重新启动 netbeans 和 xammp
3.  如果希望您在这些 ini 设置之前有 [xdebug]，我的 php ini 中有以下内容

    ; XDEBUG 扩展

    zend_extension = "c:/wamp/bin/php/php5.3.5/zend_ext/php_xdebug-2.1.0-5.3-vc6.dll"

    [xdebug] xdebug.remote_enable=on xdebug.remote_handler=dbgp xdebug.collect_params=0 xdebug.remote_host=localhost xdebug.remote_port=9000

我正在使用 netbeans 7.3、php 5.3.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T05:58:03.973

我使用 xampp 1.8.1(php 5.4.7) 和 netbeans ide 7.3

这是我的 php.ini 配置，当 apache 启动时我有一些警告，但我可以很好地调试。

还要确保在 netbeans tools,php,debbug,port 9000 配置调试端口

```
[XDebug]
zend_extension = "C:\xampp\php\ext\php_xdebug.dll"
;xdebug.profiler_append = 0;
;xdebug.profiler_enable = 1;
;xdebug.profiler_enable_trigger = 0 ;
;xdebug.profiler_output_dir ="C:\xampp\tmp" ;
;xdebug.profiler_output_name = "cachegrind.out.%t-%s" ;
xdebug.remote_enable = 1;
xdebug.remote_handler = "dbgp" ;
xdebug.remote_host = "127.0.0.1";
xdebug.remote_port = 9000;
;xdebug.trace_output_dir = "C:\xampp\tmp"; 
```

# javascript - 如何将歌曲添加到 jPlayer 播放列表的开头？

> ID：15149128
> 
> 赞同：1
> 
> 时间：2013-03-01T01:53:04.170
> 
> 标签：javascript, jquery, html, jplayer

我正在制作一个使用 jPlayer 播放列表的网站。我需要使用将歌曲添加到播放列表（或索引）开头的函数，但我看到的唯一添加函数将歌曲添加到播放列表的末尾。

根据他们的[网站](http://www.jplayer.org/latest/demo-02-jPlayerPlaylist/)，他们的添加功能是

```
add(media:Object, [playNow:Boolean]) : Void
Add a media item to the end of the playlist. Optional playNow param to start it playing after adding it. 
```

我没有看到任何支持添加到播放列表的开头。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:12:33.737

找到了答案。:) 您可以获取当前播放列表的副本，将新的播放列表项添加到列表的开头并再次重置播放列表：

```
var myPlaylist = new jPlayerPlaylist({...});
var tempPlaylistItems = myPlaylist.playlist;
myPlaylist.setPlaylist(tempPlaylistItems.unshift({title: "blah", artist: "blah", mp3: "blah", oga: "blah", poster: "blah"})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-24T23:34:32.693

您可以在最后添加您的媒体并使用此方法首先播放它：myPlaylist.play(-1);

```
 $("#add-new-song").click(function() {
    myPlaylist.add({
        title:"Hidden",
        artist:"Miaow",
        free: true,
        mp3:"g/audio/mp3/Miaow-02-Hidden.mp3",
        oga:"/audio/ogg/Miaow-02-Hidden.ogg",
        poster: "/audio/poster/Miaow_640x360.png"
    });
    myPlaylist.play(-1);
}); 
```

# javascript - 带有面板导航的 jQuery Mobile 多页结构

> ID：15149133
> 
> 赞同：2
> 
> 时间：2013-03-01T01:53:30.030
> 
> 标签：javascript, jquery, html, jquery-mobile, navigation

现在我在一个文档中有多个页面，我想使用 jQM 1.3 的 Panel 小部件来控制页面之间的导航。问题在于到目前为止，面板必须在页面内。

有没有办法做到这一点，而不必在每个页面内一遍又一遍地复制相同的面板导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:30:45.980

我使用来自 javascript mvc 库的[jQuery.View](http://javascriptmvc.com/docs.html#!jQuery.View)进行客户端模板化，效果很好。查看“From File”部分，它允许您编写模板并将数据绑定到它。您可以在每个页面中导入面板小部件。

# javascript-framework - 使用 Chaplinjs 的命名空间

> ID：15149137
> 
> 赞同：0
> 
> 时间：2013-03-01T01:53:38.953
> 
> 标签：javascript-framework, chaplinjs

我刚刚开始使用带有 JavaScript 的 Chapling 作为编写代码的语言。问题是在使用 ChaplinJs 开发应用程序时如何处理命名空间？

Chaplinjs 框架是否会自动处理模型、视图和控制器的命名空间并在扩展的应用程序对象中创建它们，或者我们必须手动管理它？

例如

在我的旧项目中，我们曾经有

```
(function(global) {
    who = global.mycompany || {};
    who.ui = {};
    who.app = who.app || {};
    who.models = {};
    who.templates = {};
})(typeof(window) === undefined ? this : window); 
```

在我们基于卓别林的新项目中，我们刚刚定义了

```
var MyApplication = Chaplin.Application.extend({
//all init logic goes here

return MyApplication;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:20:42.687

Chaplinjs 自动处理对象，并根据需要分配和释放它们。您可能唯一需要考虑的是那些出于效率原因想要一直保留的控制器，例如标题视图控制器。看看里面`application.coffee`（或者如果你不使用CoffeeScript的话，看看JS版本）。

当然，如果您想在代码中引用特定对象，您应该考虑在正确的时间将其放入可访问的变量中。无论如何，控制器将始终能够引用其视图和模型，因此这不是问题。它只是您必须交叉引用另一个对象的地方，通常您希望它始终处于活动状态。所以你把它放在你的应用程序对象中（见上文）然后找到它就没有问题了。

# android - How to downgrade an app that uses the ActionBar from 4.2 to 2.2?

> ID：15149143
> 
> 赞同：-2
> 
> 时间：2013-03-01T01:54:50.237
> 
> 标签：android, android-2.2-froyo

I need to use a HTC Legend which runs Android 2.2 to run
the open source [nyaruka/android-sms-relay](https://github.com/nyaruka/android-sms-relay). However, this app's build target is Android 4.2.

I tried to simply change the build target from 4.2 to 2.2 but was unable to compile the app.

I got the following errors:

```
public **ActionProvider** getActionProvider() {
        // Noop
        return null;
    } 
```

> ActionProvider cannot be resolved to a type

```
@Override
protected Context getActionBarThemedContext() {
         return mActivity.**getActionBar()**.getThemedContext();
    } 
```

> The method getActionBar() is undefined for the type Activity

```
 ImageButton actionButton = new ImageButton(mActivity, null,
                itemId == android.R.id.**home**
                        ? R.attr.actionbarCompatItemHomeStyle
                        : R.attr.actionbarCompatItemStyle);
        actionButton.setLayoutParams(new ViewGroup.LayoutParams(
                (int) mActivity.getResources().getDimension(
                        itemId == android.R.id.**home**
                                ? R.dimen.actionbar_compat_button_home_width
                                : R.dimen.actionbar_compat_button_width),
                ViewGroup.LayoutParams.FILL_PARENT)); 
```

> home cannot be resolved or is not a field

**Anyone who down voted this question, please explain the reason!**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:02:24.303

You are seeing this error because the [ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html) is a new concept introduced in Android 3
and is not available in 2.2

There are some [Android 2.2 ActionBar samples](https://github.com/johannilsson/android-actionbar) out there,
and there is also the 'ActionBarCompat' sample in the Google SDK.

However, these might still require a few modifications to be made
in order to get your project to compile again.

*Update: I just figured out you are talking about [https://github.com/nyaruka/android-sms-relay](https://github.com/nyaruka/android-sms-relay) If are unable to use a different ActionBar yourself, you may be able to get some help from the community behind the project (on github) to get it working on 2.2*
Also... it would seem they are not using the built-in ActionBar either but this: [http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html). I suggest you check out the documentation on that project as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:04:33.440

You can't just downgrade the build target if you are using stuff that are new to the 2.2 API. As comented above, you must use another Action Bar as it's not available in that API. You can see here that android 2.2 is API 8 [http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T05:34:06.067

Use android compatible library for getting Action Bar in Android 2.2 and it also works on above Android 3.0\.

# highcharts - Highstock 性能问题

> ID：15149145
> 
> 赞同：0
> 
> 时间：2013-03-01T01:55:05.797
> 
> 标签：highcharts, highstock

使用 Highstock 时，当我们使用带有比较的行时，我们会遇到性能问题。我们需要添加 15 个线系列，每个系列有 800 个点。它会在 IE 8 或更低版本中导致“停止运行此脚本”问题。

这不仅发生在我们向图表添加数据时，当我们改变图表的大小时也会发生这种情况。

有没有人有这个问题的经验？

在 IE 9 或其他浏览器中它运行良好，但性能很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:57:43.220

您是否尝试过修改 turbothreshold 参数？ [http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold](http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold)

看看[http://www.highcharts.com/component/content/article/2-news/48-loading-millions-of-points-in-highcharts](http://www.highcharts.com/component/content/article/2-news/48-loading-millions-of-points-in-highcharts)

此外，您可以尝试禁用动画/标记/阴影以提高性能。

# javascript - XPath 选择属性在 Chrome 上失败

> ID：15149149
> 
> 赞同：2
> 
> 时间：2013-03-01T01:55:26.790
> 
> 标签：javascript, google-chrome, xpath, html

这是我运行的一个小测试`expect.js`：

```
describe('xpath', function () {
    it('finds attribute nodes', function () {
        $(document.body).append('<string fooBar="bar"><data id="xyz"></data></string>');
        var xyz = document.getElementById('xyz');
        expect(xyz).not.to.be(null);

        var nodes = document.evaluate('../@fooBar', xyz, null, XPathResult.ANY_TYPE, null);
        var element = nodes.iterateNext();
        expect(element.nodeValue).to.equal('bar');
    });
}); 
```

我正在使用 Testacular 在 Chrome 和 Firefox 上对其进行测试，当它在 Firefox 上通过时，它在 Chrome 上失败，并显示错误`element`为`null`. 对我来说真正疯狂的部分是，如果我更改`fooBar`为 just `foo`，它会在两个系统上传递。如果我使用 Chrome`Foo`代替`foo`. 换句话说，当寻找的属性中包含大写字母时，Chrome 上的 XPath 查询似乎会中断。这是正常行为吗？我错过了什么吗？或者这是 Chrome 中的错误？

## 更新 1

我添加了 Google 的 Wicked Good XPath，现在 Internet Explorer 也可以工作了，但 Chrome 仍然失败。

## 更新 2

如果实际属性有大写字母，则 XPath 查询在 Chrome 上有效，但 XPath 值全为小写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:03:31.930

你在使用 XHTML 吗？如果是这样，XHTML 规范规定[所有元素和属性名称必须小写](http://www.w3.org/TR/xhtml1/#h-4.2)。

您可能会发现 Chrome 只准备在此基础上评估 XPath，而其他浏览器则更符合 XML（任何情况下都有效）。

# .htaccess - .htaccess 更改查询字符串

> ID：15149150
> 
> 赞同：-1
> 
> 时间：2013-03-01T01:55:28.677
> 
> 标签：.htaccess, mod-rewrite

这是我的网址：

```
localhost/myweb/home.php 
```

现在我刚刚使用以下代码删除了文件扩展名：

```
RewriteEngine on  
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

转向这个：

```
localhost/myweb/home 
```

它工作正常。

现在我想更改这个 URL：

```
localhost/myweb/home.php?str=tmprow 
```

对此：

```
localhost/myweb/home/tmprow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:34:49.947

你可以尝试这样的事情：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?([^/]+)?/?  $1.php?str=$2  [L,NC] 
```

静默地图

`http://localhost/myweb/par1`或者

`http://localhost/myweb/par1/par2`带或不带斜杠

至：

`http://localhost/myweb/par1.php`或者

`http://localhost/myweb/par1.php?str=par2`

必要时设置`RewriteBase`为，根据实际设置和。`/myweb``DocumentRoot`

假定所有字符串都是可变的，而`myweb`假定是固定的。

对于永久重定向，替换`[L,NC]`为`[R=301,L,NC]`

# bash - Bash脚本打印包含在变量中的转义序列

> ID：15149151
> 
> 赞同：7
> 
> 时间：2013-03-01T01:55:38.880
> 
> 标签：bash

巴什代码：

```
yellow="\e[1;33m"
chosen_colour="${yellow}"
declare -i score=300
printf '%s %d\n' "${chosen_colour}" "${score}" 
```

结果：

```
\e[1;33m 300 
```

应该：

```
300 /* in yellow */ 
```

* * *

如何在不使用以下任何一种语法的情况下将包含 ANSI 转义序列的字符串值插入到 printf 语句中：

### 避免1：（其实可以，但是做很多`+=`s就很浪费了）

```
s="${yellow}"
s+="${score}"
s+=...
s+=...
s+=...
s+=...
s+=...
s+=...
s+=...
s+=... 
```

### 避免2：（在我的情况下，由于需要此构造的变量数量众多，很难做到）

```
printf "${yellow}${score}${a1}${a2}${a3}${a4}${a5}${a6}${a7}${a8}........." 
```

* * *

我希望能够根据预定义的 FORMAT 字符串，使用调用的*参数*部分传递要替换的值`printf`，就像我在第一个示例中天真地做的那样。

我可以忍受这样的事情：

```
printf \
  '%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s...' \
    "${a1}" \
    "${a2}" \
    "${a3}" \
    "${a4}" \
    "${a5}" \
    "${a6}" \
    ... 
```

虽然最终，对于我的许多变量，我会使用这样的构造：

```
${!a*} # or similar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T02:03:34.463

你做：

```
printf "^[%s foo" "${a1}" # that is ctrl+v, ESC, followed by %s 
```

或者：

```
printf "\033%s foo" "${a1}"  # 033 octal for ESC 
```

# python - 从 python 生成带有项目符号的 pdf 报告

> ID：15149153
> 
> 赞同：6
> 
> 时间：2013-03-01T01:55:42.673
> 
> 标签：python, pdf

我想从 python 脚本生成一个动态的 pdf 文档，如下图所示。每个句子都以一个项目符号开头，文本和行数取决于用户指定的内容。关于如何从 python 生成它的任何建议或想法？我目前正在查看 appy.pod 和 reportlab，有人知道如何制作要点吗？

![在此处输入图像描述](../Images/ed04af70c6bf6e00d631a64795c77836.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T02:05:25.087

只需使用 unicode 项目符号字符 •</p>

要在 python 中使用 unicode 字符，您可以直接指定字符或使用其 unicode 代码点。

```
u'•' == u'\u2022' 
```

例如：

```
from reportlab.pdfgen import canvas

c = canvas.Canvas("test.pdf")
c.drawString(100, 100, u'\u2022 First sentence')
c.save() 
```

# php - 示例签名 php

> ID：15149155
> 
> 赞同：0
> 
> 时间：2013-03-01T01:55:55.087
> 
> 标签：php, encryption, signature

我实现了一个例子（为了更好地理解我自己）数字签名是如何工作的（在我的例子中是 php）。

我在“如何使用数字签名进行身份验证？”下使用了 Bob 和 Alice 的故事。来自[http://www.verisign.com.au/repository/tutorial/digital/intro1.shtml](http://www.verisign.com.au/repository/tutorial/digital/intro1.shtml)

*Bob 可以确信该消息确实来自 Alice，并且自她签署以来没有改变。如果消息摘要不相等，则消息要么源自其他地方，要么在签名后被更改（或私钥不同）。”*

在我发布代码之前，我想提一下，这可能不是不使用标准生成密钥的正确方法。但我应该让我（也许还有你）了解签名的工作原理。

```
echo "Example 2 <br><br>";

$res = openssl_pkey_new();

/* Extract the private key from $res to $privKey */
openssl_pkey_export($res, $privKey);

/* Extract the public key from $res to $pubKey */
$pubKey = openssl_pkey_get_details($res);
$pubKey = $pubKey["key"];

$message = "Im a message";

echo "<br><br><strong>Public key:</strong><br>";
echo $pubKey;
echo "<br><br><strong>Private key:</strong><br>";
echo $privKey;

echo "<br><br><strong>Message:</strong><br>";
echo $message;

echo "<br><br><strong>Message digest:</strong><br>";
echo $md5message = sha1($message);

echo "<br><br><strong>Message digest encrypted(signature):</strong><br>";
openssl_private_encrypt($md5message, $crypted, $privKey);
echo $crypted;

echo "<br><br><strong>Bob uses sha1 as well for the message:</strong><br>";
echo $md5message = md5($message);

echo "<br><br><strong>Bob checks with decrypt(verify):</strong><br>";
openssl_public_decrypt($crypted, $decrypted, $pubKey);
echo $decrypted; 
```

我有3个问题：

1) 签名工作流程是否正确？我应该改变什么（如前所述，我不想生成“正确的”.pem、.crt 等键......对我来说是下一步）。

2）在我的理解中，私钥总是用来解密的。用于加密的公钥。我知道这里的措辞是私钥的签名，并使用公钥进行验证。显然我可以在这个例子中只用公钥来验证它。我无法理解这一点。这怎么可能？也许你可以给我一个更好的例子或链接？

3）我应该在我的实施中改变什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:37:28.207

好的，我会发表一些意见。

1.  关于 Alice 和 Bob 的文本似乎是正确的，尽管最后一句“如果消息摘要不相等，则消息要么源自其他地方，要么在签名后被更改”。显然可以用“或用不同的私钥签名的消息”来扩展。

2.  工作流程是正确的，虽然`openssl_private_encrypt`有点太高了，无法显示真正发生的事情。它可能会为签名生成执行填充，但不会对所使用的散列算法的 OID 进行编码（请参阅相当易读的 PKCS#1 规范以了解我在说什么）。因此，从这个意义上说，您的签名方案不太可能与其他任何东西一起验证。

3.  所以很明显，验证部分缺少实际验证，您需要将生成的哈希与您在本地计算的哈希进行比较。此外，您永远不应该使用 MD5。您可能应该使用 PSS 填充方案而不是旧的 PKCS#1 v1.5 兼容方案。

# c++ - c++中什么时候使用以及clog和cerr的区别

> ID：15149156
> 
> 赞同：3
> 
> 时间：2013-03-01T01:56:02.827
> 
> 标签：c++, clog

我什么时候在 C++ 中使用`std::clog`和？`std::cerr`

`clog << "test" << endl;`和 有什么区别`cerr << "test" << endl;`？

`clog << "0"`不用`endl`缓冲区直接打印吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:00:07.637

根据文档[clog](http://www.cplusplus.com/reference/iostream/clog/)将字符输出发送到环境的标准日志流，而[cerr](http://www.cplusplus.com/reference/iostream/cerr/)将输出发送到错误流。例如，由环境处理的这些流可以指向不同的日志记录工具。在生产代码中，通常需要将更重要的日志记录事件（注意错误等）发送到特定的日志记录设施 - 例如用于异地存储或警报。考虑到这一点，除非您确实注意到错误情况，否则请开始练习使用较低严重性的阻塞功能！

# php - 在 mysqli 中插入许多值的最佳方法？

> ID：15149157
> 
> 赞同：15
> 
> 时间：2013-03-01T01:56:07.540
> 
> 标签：php, mysql, mysqli

我正在寻找一种使用 PHP 和 MySQLi 一次插入大量行（约 2000 年）的 SQL 注入安全技术。
我有一个包含所有必须包含的值的数组。目前我正在这样做：

```
<?php
$array = array("array", "with", "about", "2000", "values");

foreach ($array as $one) 
{
    $query = "INSERT INTO table (link) VALUES ( ?)";
    $stmt = $mysqli->prepare($query);
    $stmt ->bind_param("s", $one);
    $stmt->execute();
    $stmt->close();
}
?> 
```

我试过[call_user_func_array()](http://php.net/manual/de/function.call-user-func-array.php)，但它导致堆栈溢出。

什么是更快的方法来做到这一点（比如一次插入它们？），但仍然可以防止 SQL 注入（比如准备好的语句）和堆栈溢出？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-01T02:47:25.360

You should be able to greatly increase the speed by putting your inserts inside a transaction. You can also move your prepare and bind statements outside of your loop.

```
$array = array("array", "with", "about", "2000", "values");
$query = "INSERT INTO table (link) VALUES (?)";
$stmt = $mysqli->prepare($query);
$stmt ->bind_param("s", $one);

$mysqli->query("START TRANSACTION");
foreach ($array as $one) {
    $stmt->execute();
}
$stmt->close();
$mysqli->query("COMMIT"); 
```

* * *

**I tested this code with 10,000 iterations on my web server.**

Without transaction: `226 seconds.` With transaction: `2 seconds.` Or a `two order of magnitude speed increase`, at least for that test.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T02:07:47.963

再试一次，我不明白为什么你的原始代码在稍作修改后就不能工作：

```
$query = "INSERT INTO table (link) VALUES (?)";
$stmt = $mysqli->prepare($query);
$stmt->bind_param("s", $one);

foreach ($array as $one) {
    $stmt->execute();
}
$stmt->close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T02:15:08.137

是的，您可以手动构建一个大查询，例如：

```
$query = "";
foreach ($array as $curvalue) {
  if ($query)
    $query .= ",";
  $query .= "('" . $mysqli->real_escape_string($curvalue) . "')";
}
if ($query) {
  $query = "INSERT INTO table (link) VALUES " . $query;
  $mysqli->query($query);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-09T19:17:12.830

You should first convert your array into a string. Given that it is an array of strings (not a two-dimentional array), you can use the [implode](http://php.net/manual/ru/function.implode.php) function.

Please be aware that each value should be enclosed into parenthesis and properly escaped to ensure a correct `INSERT` statement and to avoid the risk of an SQL injection. For proper escaping you can use the [quote](http://php.net/manual/ru/pdo.quote.php) method of the `PDOConnection` -- assuming you're connecting to MySQL through PDO. To perform this operation on every entry of your array, you can use [array_map](http://php.net/manual/ru/function.array-map.php).

After escaping each value and imploding them into a single string, you need to put them into the `INSERT` statement. This can be done with [sprintf](http://php.net/manual/ru/function.sprintf.php).

Example:

```
<?php
$connection = new PDO(/*...*/);
$connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$dataToBeSaved = [
    'some',
    'data',
    'with "quotes"',
    'and statements\'); DROP DATABASE facebook_main; --'
];

$connection->query(
    sprintf(
        'INSERT INTO table (link) VALUES %s',
        implode(',',
            // for each entry of the array
            array_map(function($entry) use ($connection) { 
                // escape it and wrap it in parenthesis
                return sprintf('(%s)', $connection->quote($entry));
            }, $dataToBeSaved)
        )
    )
); 
```

*Note*: depending on the amount of records you're willing to insert into the database, you may want to split them into several `INSERT` statements.

# c# - 自动调整文本框的大小，以便不需要滚动条（或在发生换行后检测实际行数）

> ID：15149159
> 
> 赞同：0
> 
> 时间：2013-03-01T01:56:20.320
> 
> 标签：c#, .net, textbox

我需要根据文本框内容调整表单大小。目前，我无法可靠地检测到 textbox.text 中的实际行数。我所能做的就是计算`\n`字符的出现次数，但这并没有考虑到自动换行。

而且字符没有固定的宽度，所以我无法预测新行会出现在哪里。

是否可以检测文本框的垂直滚动条值/最小值/最大值，以便我可以知道有多少隐藏线？（并增加文本框大小直到消除滚动）

我有文本框：

```
textBox1.Multiline = true;
textBox1.ScrollBars = System.Windows.Forms.ScrollBars.Vertical; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:11:01.907

您最好的选择可能是使用[TextRenderer.MeasureText](http://msdn.microsoft.com/en-us/library/7sy6awsb.aspx)来计算文本的大小，然后相应地调整控件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:46:58.950

如果您使用的是 WPF，您可以将 Grid 布局面板中的列和行的宽度设置为“自动”并让它确定您需要的大小，或者如果您使用的是 WinForms，也许这样的东西会有所帮助？

[VB.NET：在绘制到控件之前查找要绘制的文本的大小](https://stackoverflow.com/questions/12898841/vb-net-finding-the-size-of-text-to-be-drawn-before-it-is-drawn-to-a-control)

# java - ServletHttpRequest.getRequestUrl 丢失端口号

> ID：15149163
> 
> 赞同：0
> 
> 时间：2013-03-01T01:56:45.790
> 
> 标签：java, apache, tcp, jboss

我们使用 JBoss 4.2.2.GA（服务于端口`7001`）和 Apache http 服务器作为前端（服务于端口`9999`）

当我访问时`xxx.xxx.com:9999`不`request.getRequestUrl()`返回端口号。

这怎么可能发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:12:49.573

请查看 Apache http 服务器如何向 JBoss appserver 发送请求。我猜它是通过跳过端口并`xxx.xxx.com/xz/`直接调用来掩盖调用。

您仍然可以获得原始 URL，因为它可能在 HTTP 标头中记录为`Referer`

监控 apache http 服务器中的流量以清楚地了解它。

[http://httpd.apache.org/docs/1.3/logs.html#accesslog](http://httpd.apache.org/docs/1.3/logs.html#accesslog)

# haskell - 如何在 Real World Haskell 中执行代码？

> ID：15149165
> 
> 赞同：3
> 
> 时间：2013-03-01T01:56:53.910
> 
> 标签：haskell

首先 - 道歉。这是我编译的第一个 Haskell 代码。我正在直接从 Real World Haskell 第 24 章编译一些代码。该代码使用在另一个源文件中实现的 MapReduce 引擎来计算一行中的单词数。这是代码：

```
module Main where

import Control.Monad (forM_)
import Data.Int (Int64)
import qualified Data.ByteString.Lazy.Char8 as LB
import System.Environment (getArgs)

import LineChunks (chunkedReadWith)
import MapReduce (mapReduce, rnf)

lineCount :: [LB.ByteString] -> Int64
lineCount = mapReduce rdeepseq (LB.count '\n')
                      rdeepseq sum

main :: IO ()
main = do
  args <- getArgs
  forM_ args $ \path -> do
    numLines <- chunkedReadWith lineCount path
    putStrLn $ path ++ ": " ++ show numLines 
```

这段代码编译得很好，我得到了一个 LineCount.exe。

现在，我应该如何实际使用它来计算文件中的行数？我有一个文件“测试”，其中包含一些测试文本。但是当我这样做时：

```
LineCount test 
```

在命令行上，我得到：

```
Exception: test: hGetBufSome: illegal operation (handle is closed) 
```

有什么问题？

这是另一个文件中的更多代码：

```
module LineChunks
    (
      chunkedReadWith
    ) where

import Control.Exception (bracket, finally)
import Control.Monad (forM, liftM)
import Control.Parallel.Strategies (NFData, rdeepseq)
import Data.Int (Int64)
import qualified Data.ByteString.Lazy.Char8 as LB
import GHC.Conc (numCapabilities)
import System.IO

data ChunkSpec = CS {
      chunkOffset :: !Int64
    , chunkLength :: !Int64
    } deriving (Eq, Show)

withChunks :: (NFData a) =>
              (FilePath -> IO [ChunkSpec])
           -> ([LB.ByteString] -> a)
           -> FilePath
           -> IO a
withChunks chunkFunc process path = do
  (chunks, handles) <- chunkedRead chunkFunc path
  let r = process chunks
  (rdeepseq r `seq` return r) `finally` mapM_ hClose handles

chunkedReadWith :: (NFData a) =>
                   ([LB.ByteString] -> a) -> FilePath -> IO a
chunkedReadWith func path =
    withChunks (lineChunks (numCapabilities * 4)) func path
{-- /snippet withChunks --}

{-- snippet chunkedRead --}
chunkedRead :: (FilePath -> IO [ChunkSpec])
            -> FilePath
            -> IO ([LB.ByteString], [Handle])
chunkedRead chunkFunc path = do
  chunks <- chunkFunc path
  liftM unzip . forM chunks $ \spec -> do
    h <- openFile path ReadMode
    hSeek h AbsoluteSeek (fromIntegral (chunkOffset spec))
    chunk <- LB.take (chunkLength spec) `liftM` LB.hGetContents h
    return (chunk, h)
{-- /snippet chunkedRead --}

{-- snippet lineChunks --}
lineChunks :: Int -> FilePath -> IO [ChunkSpec]
lineChunks numChunks path = do
  bracket (openFile path ReadMode) hClose $ \h -> do
    totalSize <- fromIntegral `liftM` hFileSize h
    let chunkSize = totalSize `div` fromIntegral numChunks
        findChunks offset = do
          let newOffset = offset + chunkSize
          hSeek h AbsoluteSeek (fromIntegral newOffset)
          let findNewline off = do
                eof <- hIsEOF h
                if eof
                  then return [CS offset (totalSize - offset)]
                  else do
                    bytes <- LB.hGet h 4096
                    case LB.elemIndex '\n' bytes of
                      Just n -> do
                        chunks@(c:_) <- findChunks (off + n + 1)
                        let coff = chunkOffset c
                        return (CS offset (coff - offset):chunks)
                      Nothing -> findNewline (off + LB.length bytes)
          findNewline newOffset
    findChunks 0
{-- /snippet lineChunks --}

-- Ensure that a series of ChunkSpecs is contiguous and
-- non-overlapping.
prop_contig (CS o l:cs@(CS o' _:_)) | o + l == o' = prop_contig cs
                                    | otherwise = False
prop_contig _ = True 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:04:11.997

代替

```
LineCount < test 
```

采用

```
LineCount test 
```

说明：在 main 中对 getArgs 的调用从命令行获取 args。使用“<”意味着从标准输入读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:36:10.290

转到Real World Haskell随附代码中的“ch24”目录，进行以下更改并运行

ghc -O2 --make -threaded LineCount && ./LineCount LineCount.hs

然后它应该给出输出

```
LineCount.hs: 22 
```

以下是必要的更改：

```
diff --git a/ch24/LineChunks.hs b/ch24/LineChunks.hs
index 0e82805..bda104d 100644
--- a/ch24/LineChunks.hs
+++ b/ch24/LineChunks.hs
@@ -6,7 +6,7 @@ module LineChunks

 import Control.Exception (bracket, finally)
 import Control.Monad (forM, liftM)
-import Control.Parallel.Strategies (NFData, rnf)
+import Control.DeepSeq(NFData,rnf)
 import Data.Int (Int64)
 import qualified Data.ByteString.Lazy.Char8 as LB
 import GHC.Conc (numCapabilities)
diff --git a/ch24/LineCount.hs b/ch24/LineCount.hs
index c6dd40b..46218e3 100644
--- a/ch24/LineCount.hs
+++ b/ch24/LineCount.hs
@@ -7,11 +7,11 @@ import qualified Data.ByteString.Lazy.Char8 as LB
 import System.Environment (getArgs)

 import LineChunks (chunkedReadWith)
-import MapReduce (mapReduce, rnf)
+import MapReduce (mapReduce, rdeepseq)

 lineCount :: [LB.ByteString] -> Int64
-lineCount = mapReduce rnf (LB.count '\n')
-                      rnf sum
+lineCount = mapReduce rdeepseq (LB.count '\n')
+                      rdeepseq sum

 main :: IO ()
 main = do
diff --git a/ch24/MapReduce.hs b/ch24/MapReduce.hs
index d0ff90b..87c79aa 100644
--- a/ch24/MapReduce.hs
+++ b/ch24/MapReduce.hs
@@ -3,7 +3,7 @@ module MapReduce
       mapReduce
     , simpleMapReduce
     -- exported for convenience
-    , rnf
+    , rdeepseq
     , rwhnf
     ) where 
```

有关您遇到的错误的原因，请参阅此答案的先前版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T02:38:58.047

这对我有用：

```
module Main where

import Control.Monad (forM_)
import Data.Int (Int64)
import qualified Data.ByteString.Lazy.Char8 as LB
import System.Environment (getArgs)

import LineChunks (chunkedReadWith)
import Control.Parallel.Strategies(rdeepseq)
import MapReduce (mapReduce)

lineCount :: [LB.ByteString] -> Int64
lineCount = mapReduce rdeepseq (LB.count '\n')
                      rdeepseq sum

lineCountFile :: FilePath -> IO Int64
lineCountFile path =   chunkedReadWith lineCount path 
```

我改为`rnf`因为`rdeepseq`似乎`rnf`不再在“并行包”中。

这是本书的配套代码： [http ://examples.oreilly.com/9780596514983/rwh-examples2.zip](http://examples.oreilly.com/9780596514983/rwh-examples2.zip)

# c - 对gets_s的未定义引用？

> ID：15149168
> 
> 赞同：1
> 
> 时间：2013-03-01T01:57:18.710
> 
> 标签：c, c11, tr24731

我使用以下命令在 Ubuntu 4.6.1 和 SUSE 4.6.2 上使用 gcc

```
gcc gets_s.c 
```

我的源代码是

```
// Read and Display Lines
// gets_s.c

#include <stdio.h>

int main(void)
{

    char first_name[11]; 
    char last_name[11]; 

    printf("First Name : ");
    gets_s(first_name, 11);
    printf("Last Name  : ");
    gets_s(last_name, 11);
    puts(first_name);
    puts(last_name);

    return 0;

} 
```

详细说明我的问题：

对我来说，主要问题是行输入和保存的行之间的一一对应关系。

成功时，fgets 和 gets_s 之间的区别在于 fgets 包含换行符终止符，而 gets_s 将换行符终止符替换为空终止符，以便在行输入和成功调用 gets_s 之间保持一一对应。

对于溢出缓冲区长度的输入，fgets 接受适合缓冲区的字符数，并将其余字符留在输入缓冲区中以供下一个 fgets 使用。

标准（K.3.5.4.1）规定，gets_s（与gets不同）需要在n-1个字符内出现换行符、EOF或读取错误。因此溢出是违反运行时约束的。如果存在运行时约束违规，则将缓冲区中的第一个字符设置为空字符，并读取并丢弃 stdin 输入缓冲区中的字符，直到读取换行符为止，发生文件结尾或发生读取错误。

因此，在成功时，我期望：

```
>fgets

First Name : Chris
Last Name  : Szalwinski
Chris

Szalwinski

>

>gets_s
First Name : Chris
Last Name  : Szalwinski
Chris
Szalwinski
> 
```

溢出时，我预计 fgets 和 gets_s 的行为会有所不同。换句话说，

```
>fgets
First Name : Christopher
Last Name  : Christophe
r

>

>gets_s
First Name : Christopher
Last Name  : Szalwinski

Szalwinski

> 
```

请注意我希望 gets_s 如何完全删除第一行输入的内容。

如果主要问题是输入行和保存行之间的一一对应关系，这在调试中很重要，我们仍然需要编写自己的函数（类似于 K&R 的 getline）

```
char *gets_s(char *s, int n) 
{
    int i, c;
    for (i = 0; i < n - 1 && (c = getchar()) != EOF && c != (int)'\n'; i++)
        s[i] = c;
    s[i] = '\0';
    while (n > 1 && c != EOF && c != (int)'\n')
        c = getchar();
    return c != EOF ? s : NULL;
} 
```

使用这样的函数，保持一一对应，缓冲区饱和并且没有运行时约​​束违规。

我得出这个结论是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:16:39.727

您是否尝试过传递 `-std=c11'？

根据[this page](http://en.cppreference.com/w/c/io/gets)，`gets_s`在C11中进行了介绍。假设您使用的是 GCC，您可以使用 `-std=c11' 选项启用有限的 C11 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:23:47.620

您应该做的第一件事是启用编译器警告。例如，传递`-Wall`给 GCC。完成后，它将发出以下信息：

```
warning: implicit declaration of function ‘gets_s’ 
```

这基本上意味着编译器不知道`gets_s()`函数是什么。那么它到底是如何编译的呢？在 C 中，这称为隐式函数声明，它基本上表示如果没有函数声明，编译器应该假定存在一个返回整数并接受任意数量参数的函数。例如：

```
int foo(...); 
```

所以编译器很乐意为您生成代码。在您的特定情况下，从那里下山。你看，如果你使用了一个实际存在的函数（比如，`printf()`标准库中确实存在的标准之类的东西），那么一切都会很好（几乎，还有更多的陷阱）。实际上，虽然`gets_s()`在 C11 之前的世界中没有这样的东西（如果我没记错的话，它只出现在 Microsoft 的 C 库中）。因此，链接器不能简单地找到它。这就是为什么它放弃尝试将程序组装在一起并吐出您收到的错误消息的原因。换句话说——不要使用`gets_s`. 改为使用`fgets`。它几乎是一样的——唯一的区别是它是标准的，它希望你指定`FILE *`（你给它`stdin`）。`man fgets`您可以通过在终端中键入来阅读这些文档。或者（因为您的系统上可能未安装手册页），您可以在[此处](http://man7.org/linux/man-pages/man3/fgets.3.html)在线找到它。

正如这里很少有朋友指出的那样，`gets_s()`是在C11中添加的。不幸的是，C11 没有在 Ubuntu 使用的 GCC（和 glibc）中完全实现。这项工作正在进行中，您可以在 GCC 的[C11 Status Wiki](http://gcc.gnu.org/wiki/C11Status)中查看其状态。

正如@Keith Thompson 提到的，与C11 Annex K“边界检查接口”的其余部分一起，是*可选*的，即使对于完全符合C11 的实现（gcc 还没有）也是如此。一个实现可以定义宏`__STDC_LIB_EXT1__`并提供接口——也可以不提供。

所以，基本上，使用[`fgets`](http://man7.org/linux/man-pages/man3/fgets.3.html).

# apache - 在 Mountain Lion 上配置 Apache 代理到 Node.js

> ID：15149171
> 
> 赞同：0
> 
> 时间：2013-03-01T01:57:35.773
> 
> 标签：apache, node.js, osx-mountain-lion, mod-proxy

我正在尝试让 OSX 10.8.2 上的 Apache 将请求代理到特定 URL 到运行在端口 8080 上的 Node.js 服务器，遵循本指南：[http](http://garrows.com/?p=455)
://garrows.com/?p=455 为了做到这一点，我将以下内容添加到 apache2/users/george.conf：

```
ProxyRequests Off
ProxyPass /foo http://localhost:8080
ProxyPassReverse /foo http://localhost:8080 
```

但是添加了这个，apache不会启动。事实上，只要我添加了“ProxyRequests Off”指令，apache 将不再启动。这是该指令的正确位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:56:28.997

这对我有用（我在这里使用端口 3000 连接到我自己的服务器）：

```
<Directory "/Users/psq/Sites/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all

</Directory>

ProxyRequests Off
ProxyPass /foo http://localhost:3000
ProxyPassReverse /foo http://localhost:3000 
```

但是如果你把它放在里面就不起作用了`<Directory>`。

要调试，您可以运行：

```
sudo apachectl configtest 
```

这将告诉您配置中哪里有错误。

# java - 记录异常并在同一方法中计数异常

> ID：15149172
> 
> 赞同：1
> 
> 时间：2013-03-01T01:57:42.237
> 
> 标签：java, exception, try-catch

我正在考虑发生`count`的数量`exceptions`并记录这些`exceptions`。所以我所做的是，我创建了一种方法`addException`来计算所有异常。

`addException`方法接受两个参数，`one is the String`和 other`boolean flag`表示我们是否要因为任何异常而终止程序。意思是，如果该标志为真，那么只要有任何异常，我都需要终止程序。

因此，如果您查看我的下面的`catch`块，我有`addException`用于计算异常的方法调用，并且在该方法调用下面我也在记录异常。

```
catch (ClassNotFoundException e) {
    addException(e.getCause() != null ? e.getCause().toString() : e.toString(), Read.flagTerminate);
    LOG.error("Threw a ClassNotFoundException in " + getClass().getSimpleName(), e);
} catch (SQLException e) {
    addException(e.getCause() != null ? e.getCause().toString() : e.toString(), Read.flagTerminate);
    //DAMN! I'm not....
    LOG.error("Threw a SQLException while making connection to database in " + getClass().getSimpleName(), e);
} 
```

**问题陈述：-**

现在我正在寻找的是-

有没有更清洁的方法来做同样的事情？意思是现在我正在计算方法中的异常，然后在 catch 块内的下一行打印出异常。

# r - 用相关值连续 3 天对数据框进行子集

> ID：15149173
> 
> 赞同：1
> 
> 时间：2013-03-01T01:57:47.830
> 
> 标签：r, date, subset

我有一个示例数据框：

```
 Date      p
4   2001-01-04  6.9
5   2001-01-05  4.5
6   2001-01-06  5.9
8   2001-01-08 15.8
24  2001-01-24  1.3
25  2001-01-25  4.6
26  2001-01-26 13.0
27  2001-01-27 45.1
32  2001-02-01  5.0
36  2001-02-05 21.9
37  2001-02-06 25.4
40  2001-02-09  1.4
41  2001-02-10  1.9
44  2001-02-13  9.1
45  2001-02-14 23.0
46  2001-02-15  8.8
53  2001-02-22  1.1
59  2001-02-28 24.8 
```

我想在连续 3 天及其相关的 p 值（例如日期）时对数据框进行子集：`(2001-01-04,2001-01-05,2001-01-06)`使用它们的 p 值`(6.9,4.5,5.9)`。我有巨大的数据框，我在这里写了其中的一部分，我只需要连续 3 天被选择。

对上述问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:39:58.417

这构造了一个 diff() 向量并挑选出长度 >= 2 的运行。然后将该向量移回一个并执行逻辑 OR，因为运行中的第一项将具有 rle()$value== 的 FALSE 值1

```
dat$Date <- as.Date(dat$Date)
dat$diff <- c(0, diff(dat$Date))
datrl <- rle(dat$diff)  # Inadvertently omitted this line in initial posting
grp <- rep(seq_along(datrl$lengths), datrl$lengths)* 
       rep(datrl$values==1, datrl$lengths)*
       rep(datrl$lengths>=2, datrl$lengths)
dat[ grp | c(grp[-1], 0) , ]

#----
>  dat[ grp | c(grp[-1], 0) , ][1:3.]
         Date    p diff
1  2001-01-04  6.9    0
2  2001-01-05  4.5    1
3  2001-01-06  5.9    1
5  2001-01-24  1.3   16
6  2001-01-25  4.6    1
7  2001-01-26 13.0    1
8  2001-01-27 45.1    1
14 2001-02-13  9.1    3
15 2001-02-14 23.0    1
16 2001-02-15  8.8    1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:23:47.847

假设您想要 3 个连续日期子集的列表。

```
data <- read.table(textConnection("Date      p\n2001-01-04  6.9\n2001-01-05  4.5\n2001-01-06  5.9\n2001-01-08 15.8\n2001-01-24  1.3\n2001-01-25  4.6\n2001-01-26 13.0\n2001-01-27 45.1\n2001-02-01  5.0\n2001-02-05 21.9\n2001-02-06 25.4\n2001-02-09  1.4\n2001-02-10  1.9\n2001-02-13  9.1\n2001-02-14 23.0\n2001-02-15  8.8\n2001-02-22  1.1\n2001-02-28 24.8"), 
    header = TRUE, colClasses = c("Date", "numeric"))

# find out which dates are 3rd consecutive dates. sel below is logical vector indicating such dates
sel <- c(0, diff(data$Date)) == 1 & c(0, 0, diff(data$Date, 2) == 2)

# get start and end dates
start <- which(sel) - 2
end <- which(sel)

# get all the 3 consecutive dates subsets
mapply(function(start, end) data[start:end, ], start, end, SIMPLIFY = FALSE)
## [[1]]
##         Date   p
## 1 2001-01-04 6.9
## 2 2001-01-05 4.5
## 3 2001-01-06 5.9
## 
## [[2]]
##         Date    p
## 5 2001-01-24  1.3
## 6 2001-01-25  4.6
## 7 2001-01-26 13.0
## 
## [[3]]
##         Date    p
## 6 2001-01-25  4.6
## 7 2001-01-26 13.0
## 8 2001-01-27 45.1
## 
## [[4]]
##          Date    p
## 14 2001-02-13  9.1
## 15 2001-02-14 23.0
## 16 2001-02-15  8.8
## 
```

# python - 是否有一个 python pickle 等效库可以转储 ascii 而不是二进制流？

> ID：15149175
> 
> 赞同：5
> 
> 时间：2013-03-01T01:57:50.207
> 
> 标签：python, serialization, pickle

的输出`pickle`是非人类可读的，因此不可编辑。

我正在寻找可以做完全相同（或非常接近）pickle 的东西，它可以将所有 python 可理解的对象转储到一个文件中，然后能够直接将其加载回来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:00:23.703

不要再看了，去[json](http://docs.python.org/2/library/json.html)。json 是一种文本格式，可以轻松编辑。开箱即用，您可以使用它来序列化 Python 内置类型的对象，如列表、字典、字符串等，但也有一些方法可以将您自己的类的对象序列化为 json，请参见此处： [如何制作类 JSON 可序列化](https://stackoverflow.com/questions/3768895/python-how-to-make-a-class-json-serializable)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T02:47:09.637

嗯........我发现这有点适合我。

**将对象转储到文件**

```
import pprint
f = open('a.txt', 'w')
pprint.pprint(myobject, f)
f.close() 
```

**从文件加载对象**

```
import pprint
f = open('a.txt')
lines = f.read()
myobject = eval(lines)
f.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:53:22.530

如果你想拥有泡菜的所有灵活性，我想说最明智的做法是创建一种可以帮助你的特定格式。

我不知道有任何工具可以像 pickle 一样强大，但会生成可编辑的导出数据，但您可以创建自己的。前段时间，我创建了一个玩具模块，该模块将包装一个 Python 模块，以便它可以发送和接收 XML 消息，主要是为了向朋友展示使用 Python 是多么容易:) 这不是*你*要找的，但是可以作为一个起点，所以[看看它](https://bitbucket.org/brandizzi/telepython/overview)。

（顺便说一句，我很高兴知道其他一些以更好的方式做同样事情的工具。它*应该*存在，我相信我只是还没有找到它。）

# sql - 使用字符串和单词组合按 ID 排序

> ID：15149182
> 
> 赞同：0
> 
> 时间：2013-03-01T01:58:54.123
> 
> 标签：sql, oracle

我有一个客户表，在 id(primary key) 中它与'customer'+sequential_number 组合在一起，

假设我有这些数据：

```
customer9998  | name1 | birtdate1
customer9999  | name2 | birtdate2
customer10000 | name3 | birtdate3
customer10001 | name4 | birtdate4 
```

当我使用这个查询时：

```
select max(cust_id) from customer_table; 
```

我得到了 customer9999，这是不正确的 - 任何建议如何做到这一点，特别是在 sql 查询标准中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:00:40.877

如果前缀总是相同的长度，那么你可以使用：

```
order by length(cust_id) desc, cust_id desc 
```

这不是标准的 SQL，因为一些数据库使用`len()`而不是`length()`. 字符串函数往往因数据库而异，所以我不确定是否有一种纯粹的数据库兼容方式来做到这一点（`replace`可能在数据库中很常见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:05:51.220

您想选择最大的数字而不是字符串；所以你必须先拆分字符串。正确的答案是：

```
SELECT 'customer' || MAX(CAST(SUBSTR(CUST_ID, 9) AS NUMBER)) from CUSTOMER_TABLE; 
```

`SUBSTR(CUST_ID, 9)`提取数字（现在是一个字符串）。

`CAST(... AS NUMBER)`将字符串转换为数值。

`MAX(...)`选择最大金额。

`customer' || ...``'customer'`在此最大值之前 添加以将其转换回其原始形式。

请注意，当您比较两个字符串格式的数字时，结果可能与您比较数字格式的相同数字时不同。例如，在`'9'`和之间`'1000000000000'`，最大金额`'9'`不是`'1000000000000'`。这是因为该操作获得了两个字符串中的最大值，而不是两个数字。因此，在获得最大值之前，您需要将 ID 字符串转换为其等效的数字格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T02:03:45.110

我假设您想按 customerid 字段的数量进行排序？假设是这样，您可以使用`REGEXP_REPLACE`and `CAST`：

```
SELECT MAX(CAST(REGEXP_REPLACE(YourField, '[^0-9]+', '') as Number))
FROM TableName 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!4/406c7/2)

这是一个返回字段的演示：[http ://www.sqlfiddle.com/#!4/406c7/6](http://www.sqlfiddle.com/#!4/406c7/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T02:01:41.070

```
Select SCOPE_IDENTITY() from customer_table; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T13:53:15.247

我同意 - 你的数据库设计并不完美 :) 但你可以用这样的查询做一些解决方法

```
select max(TO_NUMBER(SUBSTR(cust_id, 9))) from customer_table; 
```

以及用于加速它们的基于函数的索引

```
create index ndxCustomerNumber on customer(TO_NUMBER(SUBSTR(cust_id, 9))); 
```

# c# - WP7：Grid.Row 中所有可点击的区域

> ID：15149185
> 
> 赞同：1
> 
> 时间：2013-03-01T01:59:06.340
> 
> 标签：c#, windows-phone-7, xaml

我搜索该网站和每个地方，但似乎没有人知道这个问题。基本上我想使用 Tap 或任何其他事件使 Grid.Row 可点击！问题是它有效，但仅适用于其中有文本的地方。看一下图片，我希望它甚至可以在空白处点击，所以基本上是行的整个表面。

![在此处输入图像描述](../Images/be19f05cd4168d86b5b4e69a698d29d7.png)

我知道它可能有很多应用程序，如诺基亚传输甚至 Windows Phone 设置页面都是这样的，它们完全按照我希望我的应用程序工作的方式工作！

我已经尝试了一切，我尝试了 Grid 的 Tap 事件：不起作用仍然只能在文本区域上单击

我试过 Stackpanel ，没有机会

我也尝试过 Toolkit Gesture 事件，但没有机会

有人可以帮我吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:22:44.737

输入事件将穿过透明区域。在这种情况下，我通常会使用几乎透明的背景颜色。

```
<Grid HorizontalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" Background="#01ffffff" Tap="UIElement_OnTap" HorizontalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0">Test Block</TextBlock>
        <TextBlock Grid.Column="1">3000</TextBlock>
    </Grid>
</Grid> 
```

在此示例中，请注意最外层网格中的每一行都是另一个跨越整行并处理**Tap**事件的网格。

尽管如此，在这个例子中重要的是**Background="#01ffffff"**。这种颜色*几乎是透明*的，但不透明足以捕捉到 Tap 事件。

祝你好运！

**编辑：**虽然前面的答案有效，但事实证明您也可以设置**Background="Transparent"**。背景只需设置为某个值，而不是要捕获的触摸事件的未设置值。

# php - PHP：根据用户的时区显示时间

> ID：15149186
> 
> 赞同：8
> 
> 时间：2013-03-01T01:59:08.880
> 
> 标签：php, timezone

我想知道是否有办法在 php 中获取用户的时区，然后根据查看者的时区显示时间。我知道它可以用 javascript 完成，但我想要 php 中的解决方案。我进行了很多搜索，但找不到完成这项工作的方法。

所以基本上假设时间是 8:30 GMT+0530。如果用户在纽约查看它，我希望它在印度时区，那么它应该是 21:30。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T02:14:32.077

如果您在注册时添加了用户时区，或者您以某种方式知道用户时区，那么您可以试试这个...

```
$users = [
    [
        'username' => 'foo',
        'timezone' => 'America/Los_Angeles'
    ],
    [
        'username' => 'bar',
        'timezone' => 'America/New_York'
    ]
];

foreach ($users as $user) {
    date_default_timezone_set($user['timezone']);
    echo $user['username'] . ' date and time is ' . date('Y-m-d H:i:s') . '<br />';
} 
```

输出

```
foo time is 2013-02-28 18:13:49
bar time is 2013-02-28 21:13:49 
```

您还可以在 JavaScrpt 中使用用户时[区在 JavaScript 中获取客户端的时区](https://stackoverflow.com/questions/1091372/getting-the-clients-timezone-in-javascript)。发出 Ajax 请求并保存在 PHP 会话或数据库中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T02:06:34.860

您必须获取用户信息并设置默认时区

看[date_default_timezone_set()](http://php.net/manual/en/function.date-default-timezone-set.php)

和[ip geolocation api](http://www.ipinfodb.com/ip_location_api.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T02:12:25.670

您可以通过将用户的 IP 与许多可用的地理位置数据库（例如[IPInfoDB ）交叉来获取用户的时区](http://ipinfodb.com/)

[http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php)

您需要注册一个免费的 API 密钥，但他们也为您提供了一个工作示例（上图）

# javascript - 是否可以使用 Javascript 获取某人的 UDID？

> ID：15149190
> 
> 赞同：0
> 
> 时间：2013-03-01T01:59:52.857
> 
> 标签：javascript, ios, web-applications, web

我想知道您是否可以在人们访问您的网站时访问他们的 UDID？

如果可能的话，请给我一个好的教程，如果你知道的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:08:40.087

自 iOS6 以来没有，它将可访问的 UDID 替换为非永久的、非个人的设备标识符 - Advertising Identifier

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:06:47.220

从 iOS 5 开始，您不能再检索用户 UDID。所以答案是否定的，不是在 javascript 中，不是在本机代码中，根本不是。除非你穿高领毛衣...

# google-drive-api - 使用 Google Drive API 进行递归搜索

> ID：15149200
> 
> 赞同：5
> 
> 时间：2013-03-01T02:00:50.620
> 
> 标签：google-drive-api

我正在使用 Google Drive API v2。

我尝试使用 API 中包含的功能来实现搜索功能。

似乎“children.list”不是递归的，这意味着它不会查看所有子文件夹。对于每个文件夹子引用，我是否必须通过多次调用 API 来实现它？或者我在这里错过了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:13:33.867

据我所知，children.list 和 files.list 都支持递归列表，所以我认为你必须按照你提到的那样实现它。也许这种行为是由 Google 完成的，因为以前版本的 Drive（当时它仍被称为 Docs）允许文件位于多个“标签”中（有标签，还没有文件夹），保留该属性的剩余文件可能如果无限循环导致 kind

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T15:25:40.980

当您获得 ChildReferences 列表时，您无法确定它们是否是文件夹，除非您实际检索该文件。因此，如果您正在进行大型递归搜索，您应该使用批处理来实现这一点。我创建了一种方法来递归更改文件夹中所有文件的所有者，这可能会有所帮助：

```
private void updateFolderOwner(String folderId, final String newOwnerEmail) throws IOException{
    String permissionId = service.permissions().getIdForEmail(newOwnerEmail).execute().getId();

    Children.List request = service.children().list(folderId);

    JsonBatchCallback<Permission> callback = new JsonBatchCallback<Permission>() {
        @Override
        public void onSuccess(Permission permission, HttpHeaders responseHeaders) {}

        @Override
        public void onFailure(GoogleJsonError e, HttpHeaders responseHeaders) {
            System.out.println("Error Message: " + e.getMessage());
        }
    };

    JsonBatchCallback<File> findFolderCallback = new JsonBatchCallback<File>() {
        @Override
        public void onSuccess(File file, HttpHeaders responseHeaders) throws IOException {
            if (file != null) {
                String fileExtension = file.getFileExtension();
                String mimeType = file.getMimeType();
                if (mimeType != null && mimeType.equals("application/vnd.google-apps.folder") && (fileExtension == null || fileExtension.equals(""))) {
                    //Recursively search this folder...
                    updateFolderOwner(file.getId(),newOwnerEmail);
                }
            }
        }
        @Override
        public void onFailure(GoogleJsonError e, HttpHeaders responseHeaders) {
            System.out.println("Error Message: " + e.getMessage());
        }
    };

    do {
        try {
            ChildList children = request.execute();

            BatchRequest changeOwnerBatch = service.batch();
            BatchRequest findFolderBatch = service.batch();

            Permission permission = new Permission();
            permission.setEmailAddress(newOwnerEmail);
            permission.setValue(newOwnerEmail);
            permission.setType("user");
            permission.setRole("owner");

            for (ChildReference child : children.getItems()) {
                service.files().get(child.getId()).queue(findFolderBatch, findFolderCallback);
                service.permissions().update(child.getId(), permissionId, permission).setTransferOwnership(true).queue(changeOwnerBatch, callback);
            }
            changeOwnerBatch.execute();
            findFolderBatch.execute();

            request.setPageToken(children.getNextPageToken());
        } catch (IOException e) {
            System.out.println("An error occurred: " + e);
            request.setPageToken(null);
        }
    } while (request.getPageToken() != null && request.getPageToken().length() > 0);

} 
```

# hardware - 即使条件为真，我的代码也不会进入下一个状态

> ID：15149202
> 
> 赞同：3
> 
> 时间：2013-03-01T02:00:55.233
> 
> 标签：hardware, verilog, fpga, hdl

我必须在 7 段 LED 上显示一条消息和一个计时器。所以我通过使用多路复用器进行管理，并在一种状态下显示消息“Hi”，然后在计数器达到 7500 一段时间后，它应该停止显示“Hi”并开始显示计时器。

问题是它只显示“Hi”并且不会从那里向前移动。

```
localparam [1:0]
                    idle = 2'b00,
                    starting = 2'b01,
                    time_it = 2'b10,
                    done = 2'b11;

reg state_reg, state_next;
reg [12:0] count_reg, count_next; //**change for simulation

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin 
            state_reg <= idle;
            count_reg <= 0;
        end
    else
        begin
            state_reg <= state_next;
            count_reg <= count_next;
        end
end
always @ (*)
begin
state_next = state_reg; //default state stays the same
count_next = count_reg;

case(state_reg)
    idle:
        begin
            //DISPLAY HI HERE
            sel = 2'b00;
            if(start)
            begin
                count_next = random; //get the random number from LFSR module
                state_next = starting;
            end
        end
    starting:
        begin
            if(count_next == 7500) 
            begin                           //and starting from 'rand' ensures a random delay
                outled = 1'b1; //turn on the led 
                state_next = time_it; //go to next state
            end

            else
                count_next = count_reg + 1; 
        end     
    time_it:
        begin
                sel = 2'b01; //start the timer
                state_next = done;                  
        end

    done:
        begin
            if(stop)
                begin
                    sel = 2'b10; //stop the timer
                    outled = 1'b0;
                end
        end

    endcase

case(sel)
    2'b00: //hi
    begin
        go_start = 0; //make sure timer module is off
        regd0 = 4'd12; 
        regd1 = 4'd10;
        regd2 = 4'd11;
        regd3 = 4'd12;
    end

    2'b01: //timer
    begin

        go_start = 1'b1; //enable start signal to start timer
        regd0 = reg_d0; //get values from stopwatch module
        regd1 = reg_d1; //get values from stopwatch module
        regd2 = reg_d2; //get values from stopwatch module
        regd3 = reg_d3; //get values from stopwatch module
    end

    2'b10: //stop timer
    begin
        go_start = 1'b0;
    end

    default:
    begin
        regd0 = 4'bx;
        regd1 = 4'bx;
        regd2 = 4'bx;
        regd3 = 4'bx;
    end
endcase         
end 
```

现在在模拟中，`case`保持在 00 并且即使在`time_it`状态下被告知这样做也不会改变。由于未启用`sel`不更改`go_start`，这就是为什么永远不会打开计时器的原因。为什么会留在里面`sel=00`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T02:42:07.403

将您的状态寄存器从 1 位宽更改为 2 位宽：

```
reg [1:0] state_reg, state_next; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T02:19:57.400

你能弄清楚reg“start”的定义吗？如果它保持为 0，那么可以确定当前状态永远不会变为“开始”状态。

# iphone - 将构建与本地化分开

> ID：15149205
> 
> 赞同：0
> 
> 时间：2013-03-01T02:01:46.453
> 
> 标签：iphone, ios, objective-c, xcode, localization

我想为我的 iOS 应用程序添加本地化。我能够通过 XCode 中的本地化机制做到这一点，并为 2 个语言环境中的每一个使用“localizable.strings”+ 通过情节提要和不同的 ViewController 本地化 UI。

事情是我希望创建两个单独的构建/应用程序，一个来自每个语言环境。我不希望它成为一个通用应用程序，它会根据用户区域设置自动本地化，因为我希望它可用于具有不同货币化模式的不同国家。

从每个本地化创建单独构建的正确方法是什么（并且没有整个项目的两个版本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:03:51.070

创建一个新目标并在每个目标中包含必要的文件。不过，您将必须拥有不同的应用程序ID...

您可以为每个目标指定“编译源”，例如，您可以将某些视图控制器构建到一个目标，而将其他视图控制器构建到另一个目标......

# codeigniter - CodeIgniter 服务器错误

> ID：15149206
> 
> 赞同：0
> 
> 时间：2013-03-01T02:01:49.440
> 
> 标签：codeigniter, controller

在我的 codeigniter 应用程序中，有 10 个控制器，但其中 2 个出现服务器错误，这是什么问题？

在我的控制器中：

```
function index($offset='') {
    $this->load->model('branch_model','branch');
    .....
    $limit = 5;
    $data = $this->branch->page($limit, $offset);
    .....
    $this->load->view('branch', array(
        'branch'=>$data
    ));
} 
```

如果我插入 echo 'hi'; 什么都没有出现，只是服务器错误，那是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:55:02.153

您确定您的控制器正在扩展 CI_Controller 类并且您的模型正在扩展 CI_Model 类吗？

# google-chrome-extension - 使用 Chrome 扩展修改谷歌搜索结果页面

> ID：15149207
> 
> 赞同：7
> 
> 时间：2013-03-01T02:02:13.060
> 
> 标签：google-chrome-extension

我想做一个 Chrome 扩展来修改谷歌搜索结果页面。我知道我可以使用内容脚本来做到这一点，因为它有能力做到这一点。但不幸的是它失败了。我写了代码

```
$('h3.r').append('<b>a</b>') 
```

或其他与 DOM 操作相关的东西，它们都失败了。但如果我只是写

```
alert('aa') 
```

或者

```
document.body.style.backgroundColor='green' 
```

， 有用。为什么？顺便说一句，我想进行调试，但是当我打开开发工具时，我找不到我的扩展内容脚本。我可以看到其他扩展的内容脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T03:34:40.357

您是否将 jQuery 添加到清单中的 content_scripts 中？

如果你使用 jQuery，你必须`manifest.json`这样写：

```
 "content_scripts":[
        {
            "matches":["http://www.google.com/*"],
            "js":["jquery-1.9.1.min.js", "contentscripts.js"]
        }
] 
```

OK，看了谷歌搜索结果页面的页面源码我想我知道问题出在哪里了：

Google 使用 AJAX 加载搜索结果，因此，当您更改查询词并再次搜索时，页面不会刷新，这就是您无法在搜索结果中获取任何 DOM 元素的原因。

这意味着您必须为 DOMNodeInserted 添加一个事件侦听器。

代码是这样的：

```
function findH3(){
  $('h3.r').append('<b>a</b>')

}

searchResultArea.addEventListener('DOMNodeInserted', findH3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:33:32.387

将目标 URL 的权限添加到清单文件

```
{
 ---
    "permissions": [
        "https: //www.google.co.in/*"
    ]
 ---
} 
```

# 参考

*   [权限](https://developer.chrome.com/extensions/declare_permissions.html)

# c# - 如何跨 AppDomain 边界传递 CancellationToken？

> ID：15149211
> 
> 赞同：15
> 
> 时间：2013-03-01T02:02:46.487
> 
> 标签：c#, .net, concurrency, appdomain, abort

我有一个命令对象，根据来自请求队列的请求进行工作。此特定命令将在子 appdomain 中执行其工作。在子应用程序域中完成其工作的一部分涉及阻塞 ConcurrentQueue 操作（例如，添加或获取）。我需要能够通过请求队列将中止信号传播到子应用程序域，并唤醒其中的工作线程。

因此，我认为我需要跨 AppDomain 边界传递一个 CancellationToken。

我尝试创建一个继承自 MarshalByRefObject 的类：

```
protected class InterAppDomainAbort : MarshalByRefObject, IAbortControl
    {
        public InterAppDomainAbort(CancellationToken t)
        {
            Token = t;
        }

        [SecurityPermissionAttribute(SecurityAction.Demand, Flags = SecurityPermissionFlag.Infrastructure)]
        public override object InitializeLifetimeService()
        {
            return null;
        }

        public CancellationToken Token
        {
            get;
            private set;
        }

    }; 
```

并将其作为参数传递给工作函数：

```
// cts is an instance variable which can be triggered by another thread in parent appdomain
cts = new CancellationTokenSource();
InterAppDomainAbort abortFlag = new InterAppDomainAbort(cts.Token);
objectInRemoteAppDomain = childDomain.CreateInstanceAndUnwrap(...);

// this call will block for a long while the work is being performed.
objectInRemoteAppDomain.DoWork(abortFlag); 
```

但是当 objectInRemoteAppDomain 尝试访问 Token getter 属性时，我仍然遇到异常：

```
System.Runtime.Serialization.SerializationException: Type 'System.Threading.CancellationToken' in Assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' is not marked as serializable. 
```

我的问题是：如何在 appdomains 中传播中止/取消信号并唤醒可能在 .NET 并发数据结构中被阻塞的线程（支持 CancellationToken 参数）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T21:38:16.840

自从我查看任何跨 AppDomain 的东西以来已经有一段时间了，所以这段代码可能存在我没有意识到的问题，但它似乎可以完成这项工作。根本问题是似乎没有办法将 CancellationToken[Source] 从一个 AppDomain 转移到另一个 AppDomain。所以我创建了两个来源，主要设置为在适当时取消次要来源。

*在这种情况下有*两个单独的令牌源这一事实当然可能是一个问题，但我认为您并没有解决这样一个事实，即缺乏可序列化性会阻止您在两个单独的 AppDomain 中使用相同的一个。

`Dispose`关于最小错误检查、实现等的标准警告。

```
// I split this into a separate interface simply to make the boundary between
// canceller and cancellee explicit, similar to CancellationTokenSource itself.
public interface ITokenSource
{
    CancellationToken Token { get; }
}

public class InterAppDomainCancellable: MarshalByRefObject,
                                        ITokenSource,
                                        IDisposable
{
    public InterAppDomainCancellable()
    {
        cts = new CancellationTokenSource();
    }

    public void Cancel() { cts.Cancel(); }

    // Explicitly implemented to make it less tempting to call Token
    // from the wrong side of the boundary.
    CancellationToken ITokenSource.Token { get { return cts.Token; } }

    public void Dispose() { cts.Dispose(); }

    private readonly CancellationTokenSource cts;
}

// ...

// Crucial difference here is that the remotable cancellation source
// also lives in the other domain.
interAppDomainCancellable = childDomain.CreateInstanceAndUnwrap(...);

var primaryCts = new CancellationTokenSource();
// Cancel the secondary when the primary is cancelled.
// CancellationToken.Register returns a disposable object which unregisters when disposed.
using (primaryCts.Token.Register(() => interAppDomainCancellable.Cancel()))
{
    objectInRemoteAppDomain = childDomain.CreateInstanceAndUnwrap(...);
    // DoWork expects an instance of ITokenSource.
    // It can access Token because they're all in the same domain together.
    objectInRemoteAppDomain.DoWork(interAppDomainCancellable);
    // ... some other work which might cancel the primary token.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T15:18:00.853

假设您的代理类型是单一职责，实际上有一种更简单的方法可以克服这个障碍。我当然假设您维护了您创建的域的集合，并在您的应用程序关闭或您的包含对象被处置时卸载它们。我还假设您需要取消令牌的原因是取消封送引用类型中的某些异步操作。您只需要执行以下操作：

创建您的 tokenSource 和 token 字段并在您的构造函数中初始化它们。

```
_cancellationTokenSource = new CancellationTokenSource();
_token = _cancellationTokenSource.Token; 
```

订阅以下活动。UnhandledException 将用于捕获任何导致您的域过早关闭的错误异常。这应该是最佳实践。

```
var currDomain = AppDomain.CurrentDomain;
            currDomain.DomainUnload += currDomain_DomainUnload;
            currDomain.UnhandledException += currDomain_UnhandledException; 
```

调用域卸载事件时，在您的令牌源上调用取消。此外，您可能希望有一个 dispose 方法取消订阅从其中一个调用的域事件，或者只是让域清理处理垃圾收集。

```
void currDomain_DomainUnload(object sender, EventArgs e)
    {
        _log.Debug(FormatLogMessage(_identity, "Domain unloading Event!"));
        _cancellationTokenSource.Cancel();
        _logPlayer.Dispose();
    }

 void currDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        _log.Error(string.Format("***APP Domain UHE*** Error:{0}", e.ExceptionObject);
        _cancellationTokenSource.Cancel();
        _logPlayer.Dispose();
    } 
```

# android - 更改适配器顶部的元素而不重新定位较低的项目

> ID：15149215
> 
> 赞同：0
> 
> 时间：2013-03-01T02:03:13.597
> 
> 标签：android, listview, baseadapter

我有一个自定义适配器（扩展 BaseAdapter）。可以在列表的顶部或底部添加或删除项目。物品的高度各不相同，有些比其他的要高得多。

我看到的行为是这样的：

1.  向下滚动到列表中间

2.  异步地，将一个项目添加到列表顶部或从列表顶部删除，调用 notifyDataSetChanged()

**Desired**：用户没有任何变化，因为数据集的变化只影响屏幕外的项目

**实际**：列表的屏幕部分跳转，因为其中的所有项目的位置都增加或减少，并且不同的项目位于旧位置

更改项目时如何避免打乱当前视图？

对我来说，适配器应该能够翻阅无限的数据列表似乎是合理的，但我没有运气在野外找到这样的例子。思考这个问题的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:09:27.033

你在使用 ViewHolder 模式吗？这将完全符合您的要求（由于“屏幕外”更改而不会刷新 UI）。

此外，它将使您的列表更加流畅和响应迅速。

我认为这是一个明显的例子： [http ://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

# c# - OleDB 选择语句

> ID：15149220
> 
> 赞同：1
> 
> 时间：2013-03-01T02:03:40.713
> 
> 标签：c#, .net, winforms, oledb

我的程序中有一个搜索按钮。我想要的是每次搜索时我都会输入`lastname`和 当`lastname`等于`lastname`数据库中的任何时，人的`firstname`和`lastname`将显示在 a 中`listbox`，每当我单击结果时`listbox`，将显示该人的详细信息在`textboxes`. 问题是当有相同姓氏的人时，他们的名字是唯一列出的，但是当我点击名字时，相同的细节会出现在`textboxes`.

请帮忙。

这是我的代码：

```
 connection.Open();
    OleDbCommand select = new OleDbCommand();
    select.Connection = connection;
    select.CommandText = "Select * From Accounts Where Lastname  = '" + searchtb.Text + "'";
    OleDbDataReader reader = select.ExecuteReader();
    while (reader.Read())
    {
        listBox1.Items.Add(reader[1].ToString() + "," + reader[2].ToString());
    }
    connection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:27:19.617

您在此代码中没有任何错误，您的错误可能在您的 listbox_events 上。

显示列表框部分的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T08:39:41.937

```
 cFat_items2 = new OleDbDataAdapter("
      SELECT COUNT(Fat_Items.i_num) AS Count_i_num, Fat_Items.i_num, g.i_num 
      FROM Fat_Items INNER JOIN Fat_Items AS g ON Fat_Items.fat_nr = g.fat_nr 
      WHERE Fat_Items.i_num = '" + this.kLDataSet.Fat_Items.Rows[i].ItemArray[0].ToString() + "' 
      AND g.i_num = '" + this.kLDataSet.Fat_Items.Rows[j].ItemArray[0].ToString() + "' 
      GROUP BY Fat_Items.i_num, g.i_num HAVING COUNT(Fat_Items.i_num)>='" + Support + "'", con);

 cFat_items2.Fill(dFat_items2); 
```

# php - 我们如何使 cakephp url 看起来像 cakephp/pages/1 到 cakephp/about-us？

> ID：15149221
> 
> 赞同：0
> 
> 时间：2013-03-01T02:03:43.240
> 
> 标签：php, url, cakephp, url-rewriting, seo

我在 cakephp 中完成了一个简单的 cms，但注意到 url 看起来并不那么漂亮。至于显示任何页面 url 看起来像**cakephp/pages/1**。什么是让它看起来更好和对 SEO 友好的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:59:24.460

links:

```
cakephp/pages/page_title_here
cakephp/pages/another_example_page_title 
```

controller:

```
class Pages extends CI_Controller {
  public function index($page = false)
  {
    if($page && file_exists('./application/views/pages/'.$page.'.php')) { $this->load->view($page); } else { show_404(); }
  }
} 
```

this controller would search for a template name equivalent to what you typed, i.e. if you are trying to reach pages/aboutus it would load the template from application/views/pages/aboutus.php

route:

```
$route['pages/(:any)'] = 'pages/index/$1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:04:37.840

CakePHP 有很好的规则来提供对 SEO 友好的 URL，而无需修改任何基本代码。您所要做的就是将您的视图文件放入您的`app/views/pages`文件夹中。

例如，如果您有 'home'、'about' 和 contact_us' 这样的页面，只需将 'home.ctp'、'about.ctp' 和 'contact_us.ctp' 放在 pages 文件夹中。

所以，文件夹结构应该是这样的：

```
/app/
    /views/
           /pages/
                 /home
                 /about
                 /contact_us 
```

访问页面的 URL 结构应如下所示：

`http://www.yourwebsite.com/pages/home`

`http://www.yourwebsite.com/pages/about`

`http://www.yourwebsite.com/pages/contact_us`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:13:53.323

我认为，使用 SEO 的扩展更容易解决。试试这个高级 SEO 套件[http://mirasvit.com/magento-extensions/advanced-seo-suite.html](http://mirasvit.com/magento-extensions/advanced-seo-suite.html)

# python - 在python中将文本网格转换为嵌套字典

> ID：15149223
> 
> 赞同：3
> 
> 时间：2013-03-01T02:03:45.463
> 
> 标签：python

想象一下文本文件中的网格，如下所示：

```
 A  B  C
A 0  1  2
B 3  0  5
C 6  7  0 
```

将其转换为 python 中的字典的最佳方法是什么，如下所示：

```
{
  'A': {'A': 0, 'B':3, 'C':6},
  'B': {'A': 1, 'B':0, 'C':7},
  'B': {'A': 2, 'B':5, 'C':0}
} 
```

所以我可以通过以下方式访问单元格：

```
matrix['A']['B'] # 3 
```

我目前确实有一些非常粗略的代码（请不要太苛刻地评价我）：

```
matrix = {}
f = open(filepath, 'r')
lines = f.readlines()
keys = lines[0].split()

for key in keys:
    matrix[key] = {}

for line in lines[1:]:
    chars = line.split()
    key_a = chars[0]
    for i, c in enumerate(chars[1:]):
        key_b = keys[i-1]
        matrix[key_a][key_b] = int(c)

print matrix

# Outputs {'A': {'A': 1, 'C': 0, 'B': 2}, 'C': {'A': 7, 'C': 6, 'B': 0}, 'B': {'A': 0, 'C': 3, 'B': 5}} 
```

虽然这没有错，但我已经离开 python 很长时间了，有没有更好的方法？也许嵌套字典实际上不是最好的方法？

**更新**：

1.  不幸的是，我需要在 vanilla python 中执行此操作，因此无法使用外部库（相信我会喜欢）
2.  将我的示例代码形式的伪代码更新为实际代码。羞愧地低着头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T02:07:28.703

您的代码是合理的，但这里有一个替代方案：

```
import collections
with open('grid_file.txt', 'r') as f:
    columns = next(f).split()
    matrix = collections.defaultdict(dict)
    for line in f:
        items = line.split()
        row, vals = items[0], items[1:]
        for col, val in zip(columns, vals):
            matrix[col][row] = int(val)
print(matrix) 
```

产生

```
defaultdict(<type 'dict'>, {'A': {'A': 0, 'C': 6, 'B': 3}, 'C': {'A': 2, 'C': 0, 'B': 5}, 'B': {'A': 1, 'C': 7, 'B': 0}}) 
```

* * *

一些技巧：

*   采用

    ```
    with open(...) as f
        ... 
    ```

    代替

    ```
    f = open(...)
    f.close() 
    ```

    因为当[Python](http://effbot.org/zone/python-with-statement.htm)离开 `with-block`. 通过使用`with`，您将永远不会忘记关闭文件句柄，即使发生异常，文件句柄在离开`with-block`.

*   `f.readlines()`一般来说，如果可以的话，最好避免。这会将整个文件放入列表中。这对内存来说可能很繁重，尤其是在文件很大的情况下。通常

    ```
    with open(...) as f:
        for line in f: 
    ```

    可以代替使用。

*   如果您创建`matrix`一个[collections.default(dict)](http://docs.python.org/2/library/collections.html#collections.defaultdict)那么 默认情况下`matrix[field]`将是一个`dict`。所以你可以跳过初始化：

    ```
    for key in keys:
        matrix[key] = {} 
    ```

*   A`defaultdict`是 的子类`dict`，因此您可以像使用 a 一样使用它`dict`。如果您不喜欢它的打印方式，或者想停止`matrix`自动将空 dict 分配给 `matrix[key]`for any `key`，您可以将 defaultdict 转换回常规`dict`：

    ```
    matrix = dict(matrix) 
    ```

*   `for-loops`如果可以，请避免使用数字索引。

    ```
    for i, c in enumerate(chars[1:]): 
    ```

    尽管这对于大多数类 C 语言来说都是*必需*的，但 Python 有一个更好的方法：循环遍历项目本身：

    ```
    for col, val in zip(columns, vals): 
    ```

    这使代码更具可读性，因为它为您真正感兴趣的对象分配了一个变量名，而不仅仅是一个索引，然后您必须将其组合成诸如`keys[i-1]`. 它还可以帮助您避免当您必须将索引调整一时可能发生的“非一”错误，如`keys[i-1]`.

* * *

另一种可能性是不使用嵌套字典，而是使用 2 元组（列、行）作为键：

```
with open('grid_file.txt', 'r') as f:
    columns = next(f).split()
    matrix = {}
    for line in f:
        items = line.split()
        row, vals = items[0], items[1:]
        for col, val in zip(columns, vals):
            matrix[col, row] = int(val)
print(matrix) 
```

产量

```
{('B', 'C'): 7, ('A', 'A'): 0, ('B', 'B'): 0, ('B', 'A'): 1, ('C', 'A'): 2, ('C', 'B'): 5, ('C', 'C'): 0, ('A', 'B'): 3, ('A', 'C'): 6} 
```

然后您可以像这样访问矩阵中的（列，行）：

```
print(matrix['A','C'])
# 6 
```

* * *

顺便说一句，如果你安装[pandas](http://pandas.pydata.org/)：

```
import pandas as pd
import io

text = '''\
A  B  C
A 0  1  2
B 3  0  5
C 6  7  0'''

df = pd.read_table(io.BytesIO(text), sep='\s+')
print(df.to_dict()) 
```

产量

```
{'A': {'A': 0, 'B': 3, 'C': 6},
 'B': {'A': 1, 'B': 0, 'C': 7},
 'C': {'A': 2, 'B': 5, 'C': 0}} 
```

# r - 在 x 轴上绘制矩阵的所有列

> ID：15149226
> 
> 赞同：0
> 
> 时间：2013-03-01T02:03:55.213
> 
> 标签：r, matrix, plot, multiple-columns

我想在 x 轴上分别绘制矩阵的所有列，y 轴是矩阵列中的值。为了说明我在创建矩阵时要查找的内容：

```
test=matrix(c(1,4,3,2,3),ncol=5,nrow=5) 
```

并使用

```
boxplot(test) 
```

矩阵列的每个箱线图分别出现在 x 轴上。我想要的正是这个，除了点在 y 轴上而不是箱线图上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:22:22.470

并不是说以这种方式布置数据很有意义，但这里是：

```
test=matrix(c(1,4,3,2,3),ncol=5,nrow=5)
plot(rep(1:5, 5), c(t(test))) 
```

![在此处输入图像描述](../Images/1e8b87bea4ac47c9a945857cf0c85002.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:39:52.260

使用`reshape2`库来融化数据

```
library(reshape2)

test = matrix(c(1, 4, 3, 2, 3), ncol = 5, nrow = 5)

plot(melt(test)[, 2:3]) 
```

![在此处输入图像描述](../Images/c295306fb6e745412e2bbdf6ed4ec4d8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:40:19.317

`boxplot`有一个`plot`论点：

> `plot`
> 如果`TRUE`（默认）然后生成箱线图。如果不是，则返回箱线图所基于的摘要。

您感兴趣的结果在`stats`组件中。

然后你可以使用 `matpoints`或`matplot(..., type = 'p')`

请注意，您必须转置结果以获得所需的图

```
matpoints(t(boxplot(test, plot = FALSE)$stats), pch = 19, col = 'black') 
```

# java - java中设置的时间间隔

> ID：15149227
> 
> 赞同：6
> 
> 时间：2013-03-01T02:03:58.653
> 
> 标签：java, algorithm, guava, intervals, interval-tree

我有一个带有整数值的区间列表[例如。[1, 4], [10, 19] 等]。有没有办法将这些间隔放入一些 java 集合的容器中 [例如。设置] 这样我就可以在容器上调用“联合”函数。“联合”函数应该给我一个间隔列表，这样如果任何 2 个插入的间隔重叠，那么它们应该合并到输出中。我尝试在 Guava 中使用 Range 类，但最终在合并之前将所有间隔相互比较。对此的优雅方法将不胜感激！这是我根据下面的回复尝试过的。输出为 [[1, 15], [17, 20]]，正确。我想知道是否有一些现有的 API 实现了这样的东西。

```
public static void main(String[] args) {
    // mock data
    List<MyIntRange> rng_lst = new ArrayList<Junk.MyIntRange>();
    rng_lst.add(new MyIntRange(1, 10));
    rng_lst.add(new MyIntRange(5, 15));
    rng_lst.add(new MyIntRange(17, 20));

    // sort intervals by start position
    Collections.sort(rng_lst);

    // merge the intervals which overlap
    List<MyIntRange> res_lst = new ArrayList<Junk.MyIntRange>();
    MyIntRange old_rng = null;
    for (MyIntRange cur_rng : rng_lst) {
        if (old_rng == null) {
            old_rng = cur_rng;
        } else {
            if (old_rng.rng.upperEndpoint() < cur_rng.rng.lowerEndpoint()) {
                // this does not over lap with the next one
                res_lst.add(old_rng);
                old_rng = cur_rng;
            } else {
                // overlap
                old_rng = new MyIntRange(old_rng.rng.lowerEndpoint(),
                        cur_rng.rng.upperEndpoint());
            }
        }
    }
    // add the last range
    res_lst.add(old_rng);

    // done!
    System.out.println(res_lst);
}

// wrapper around Guava's Range to make it comparable based on the
// interval's start
public static class MyIntRange implements Comparable<MyIntRange> {
    Range<Integer> rng;

    public MyIntRange(int start, int end) {
        rng = Ranges.closed(start, end);
    }

    public int compareTo(MyIntRange that) {
        int res = -1;
        if (this.rng.lowerEndpoint() > that.rng.lowerEndpoint()) {
            res = 1;
        }
        return res;
    }

    public String toString() {
        return "[" + rng.lowerEndpoint() + ", " + rng.upperEndpoint() + "]";
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T02:33:29.660

这基本上正是`RangeSet`刚刚发布的 Guava 14.0 中所做的，除了它为您进行合并，而不是告诉您可以合并哪些范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T02:17:06.637

一个基本算法：

1.  按开始索引对区间进行排序
2.  浏览列表。对于第`i`th 项：
    1.  比较st 项的结束索引`i`和开始索引。`(i+1)`
    2.  如果结束索引更大，则将结束索引设置`i`为的结束索引`i+1`，并删除该`i+1`元素。（这将它们合并。）

时间复杂度：`O(nlgn)`，因为初始排序。（也就是说，如果删除操作正确。）

# node.js - browserify v2 中间件

> ID：15149230
> 
> 赞同：2
> 
> 时间：2013-03-01T02:04:15.283
> 
> 标签：node.js, express, coffeescript, middleware, browserify

在开发中，我在我的 Express 服务器上同时使用 Coffeescript 和 Browserify 中间件来交付我的客户端 JS，如下所示：

`app.use browserify mount: '/client.js', entry: './client.coffee', watch: yes`

今天我正在升级我的依赖项，并在 browserify v2 网站上注意到了这一点：

> browserify 中最糟糕的想法之一，用于托管捆绑包的临时 http 服务器中间件终于消失了。
> 
> 对咖啡脚本的默认支持已不复存在。您仍然可以在您的程序中使用咖啡脚本，您只需要编译为 js 或自己将源转换挂钩到捆绑管道中。
> 
> 请记住，如果您不同意我希望很多人会同意的这些削减，那么通过 v2 重构，您可以更轻松地了解 browserify 应该如何使用底层新库作为起点。

很公平。

唯一的问题是，我已经阅读了新 API 的文档，但我对如何实际实现自己的中间件有点茫然。事实上，我什至无法使用`browserify.add()`and获得一个基本的独立示例`browserify.bundle()`，更不用说作为快速中间件了。

我可以继续使用 v1，但由于这个项目仍在开发中，我想保持我的依赖项是最新的。任何建议都非常感谢。

### 更新：

我已经做到了这一点：

```
browserify = require 'browserify'
coffee = require 'coffee-script'
through = require 'through'

app.get '/client.js', (req, res) ->
  b = browserify()
  b.add './client.coffee'
  b.transform (file) ->
    write = (buf) ->
      data += buf
    end = ->
      @queue coffee.compile(data)
      @queue null
    data = ''
    return through(write, end)
  b.bundle {}, (err, src) ->
    res.send src 
```

这行得通，除了我曾经说过的`require './module'`地方，我现在必须这样做`require './module.coffee'`。这不是很理想，我不想更新我的应用程序中的每个需求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T04:23:48.587

我得到了这个工作：

```
browserify = require('browserify-middleware')
coffeeify = require('coffeeify')
express = require('express')

app = express()

browserify.settings('transform', [coffeeify])

app.get('/client.coffee', browserify('./client.coffee'));

app.listen(3230); 
```

但它可能无法解决需要的`require("X.coffee")`问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T20:09:03.363

如果你喜欢 grunt 进行开发，我已经开发了这个任务： [https ://github.com/amiorin/grunt-watchify](https://github.com/amiorin/grunt-watchify)

它缓存依赖项并监视文件系统。因此，构建速度非常快。您可以将它与 grunt-contrib-watch 和 grunt-contrib-connect 一起使用，也可以单独使用。您可以在 github 存储库中找到 Gruntfile.js 示例。

如果不使用 grunt，可以使用来自 @substack 的原始 watchify：[https ://github.com/substack/watchify](https://github.com/substack/watchify)

你当然可以用咖啡和`transform`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T12:55:35.800

为 browserify 提供咖啡脚本编译中间件的方法是通过带有 -t 标志的转换模块或带有 -c 标志的转换命令。它们有其局限性，但它们可以完成简单的咖啡脚本编译。使用任一标志，每个所需文件都会通过一个进程运行（例如，从 coffeescript 编译为 javascript），然后再对其进行分析并连接到输出包中

事实上，browserify 自述文件现在有关于如何完全为咖啡脚本做到这一点的文档：

[https://github.com/substack/node-browserify#btransformtr](https://github.com/substack/node-browserify#btransformtr)

在您的情况下，最简单的方法就是使用以下命令：

`browserify -c 'coffee -sc' main.coffee > bundle.js`

假设您的入口点咖啡脚本文件名为 main.coffee。

Substack 还创建了一个 coffeeify npm 模块来包装它，但它是当前版本后面的咖啡脚本版本（例如，没有源映射）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T15:53:26.950

此时您有两个转换器选项，它们都支持源映射。

*   [@substack](https://github.com/substack/coffeeify)的咖啡化
*   [缓存-咖啡化](https://github.com/thlorenz/caching-coffeeify)

它们是相同的，只是后者只重新编译`coffee`实际更改的文件，从而加快开发过程。

在这两种情况下，您都需要打开源映射，`--debug`如果您[使用命令行则传递一个标志，或者如果您使用的是](https://github.com/substack/node-browserify/blob/master/example/source_maps/build.sh)[构建脚本](https://github.com/substack/node-browserify/blob/master/example/source_maps/build.js)则提供`{debug: true }`给`bundle`函数。

还要确保在浏览器中启用源映射。

我[在博客上写了这一切，](http://thlorenz.com/blog/browserify-sourcemaps)所以如果你需要更多细节，你应该在这里找到你需要的所有信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-21T21:36:04.953

我写了一个肮脏的 broweserify 中间件咖啡编译器（js 和下划线模板也是）。它不是非常好，但它确实有效。

[https://github.com/pr1ntr/bundlr](https://github.com/pr1ntr/bundlr)

用法很简单

```
var bundlr = require('bundlr');
app.use(bundlr({options})) 
```

选项：

src = bootstrap js 或咖啡的位置

dest = (如果你想让它写一个你想要的文件)

route = 让它编译的路径或路径

如果您希望它不压缩并添加源映射，则 debug = true/false

cache = 如果您希望服务器缓存响应（用于生产环境）

如果你想让它把文件写到目的地，write = 传递 true

# c# - 后台工作人员如何

> ID：15149235
> 
> 赞同：2
> 
> 时间：2013-03-01T02:05:09.150
> 
> 标签：c#, asp.net, backgroundworker

我正在尝试在我的程序中实现后台工作程序，以便在我运行程序并开始检索我需要的数据时它不会冻结。

我不太确定后台工作人员是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T02:07:36.160

后台工作者是在后台运行的线程，并且在不中断/阻塞主线程的情况下工作。

[你可以在这里](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)阅读更多。

简而言之：

在 DoWork 中执行阻塞操作。只要有可能，使用`(sender as BackgroundWorker).ReportProgress(50);`例如报告 50% 的完成度来报告您的操作完成的程度。

您可以让您的主线程订阅“ProgressChanged”事件，该事件可以更新 GUI 或执行进度更改时应该发生的其他任务。

# javascript - 使用纯 Javascript/JQuery 镜像图像

> ID：15149236
> 
> 赞同：2
> 
> 时间：2013-03-01T02:05:14.157
> 
> 标签：javascript, jquery, mirror

由于设备限制，我只能使用 javascript 或 JQuery 来“镜像”图像。我曾尝试过 Reflection.js，但这不是我想要的。

我想要的是简单地“镜像” img 标签的图像。

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:11:02.143

试试 jsfiddle 中提到的这个例子：

**CSS：**

```
div.reflection
{
    -webkit-transform: scaleY(-1);
    -moz-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    -ms-transform: scaleY(-1);
    transform: scaleY(-1);
}

img{
    height: 150px;
    width: 150px;
} 
```

**HTML 代码：**

```
<div>
    <img src='http://2.bp.blogspot.com/-TslgI6ySuW8/VNC-u9YQYeI/AAAAAAAABtA/mviMstL4pIk/s1600/Screenshot_2015-02-03-17-55-46.png'/>
</div>
<div class="reflection">
    <img src='http://2.bp.blogspot.com/-TslgI6ySuW8/VNC-u9YQYeI/AAAAAAAABtA/mviMstL4pIk/s1600/Screenshot_2015-02-03-17-55-46.png'/>
</div> 
```

[点击这里](http://jsfiddle.net/pFRXS/128/)

# ios - UIWebView：在用户交互期间访问嵌入 HTML 的数据

> ID：15149239
> 
> 赞同：1
> 
> 时间：2013-03-01T02:05:30.717
> 
> 标签：ios, uiwebview

**场景：**
1）用户通过 UIWebView 与网页交互。
2) 服务器根据用户响应返回嵌入数据（HTML 注释的 XML 数据）。

**问题：**
UIWebView 的委托方法“webViewDidFinishLoad”在初始加载期间仅触发一次。所以我不能根据服务器对用户输入的响应来传播 UIWebView 的内容。

但是，每次 UIWebView 刷新/服务器响应时，UIWebView 的委托方法“shouldStartLoadWithRequest”都会触发；但刷新的 html 尚未加载。

**问题：**
每次重新加载时捕获 HTML 文档（带有嵌入数据）的最简单方法是什么？

同样，“webViewDidFinishLoad”只*触发一次*；除非发送了新的 http 调用（通过重定向远程或从 Objective-C 内部）。

顺便说一句：我们使用 JQuery Mobile 在页面之间导航。

# java - EDT-swing 问题

> ID：15149242
> 
> 赞同：0
> 
> 时间：2013-03-01T02:05:35.180
> 
> 标签：java, swing, event-dispatch-thread

我有一个在 EDT 中执行的方法。是这样的：

```
myMethod()
{
  System.out.prinln(SwingUtilities.isEventDispatchThread());

  for (int i = 0; i < 10; i++)
  {
   Thread.sleep(3000);
   someJPanel.remove(otherJPanel);
  }
} 
```

我期望发生的事情：十个 JPanel 将从它们的父级中一个一个地删除，每次删除之间会有三秒钟的停顿......

实际发生了什么：在所有 10 个元素同时被移除之后，一切都冻结了 30 秒。

控制台中的行始终为 true (SwingUtilities.isEventDispatchThread())。

既然我在 EDT 中做这一切，为什么没有即时更改？为什么它要先等待方法结束？

我应该如何更改我的代码以实现删除之间的三秒延迟？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T02:10:56.760

Swing 使用单个线程来分派事件和处理重绘请求。任何时候你阻塞这个线程，你都会阻止 EDT 处理这些重绘请求，使 UI 看起来像是“停止”了。

相反，使用类似 a 的东西[`javax.swing.Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来插入延迟并执行操作。这将在 EDT 内执行操作，但将在后台线程中等待。

阅读[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)以获取详细信息...

**更新了定时器示例**

```
public class SlowDecline {

    public static void main(String[] args) {
        new SlowDecline();
    }
    private TestPane last;

    public SlowDecline() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                TestPane parent = new TestPane(Color.RED);
                TestPane tp = add(parent, Color.BLUE);
                tp = add(tp, Color.GREEN);
                tp = add(tp, Color.CYAN);
                tp = add(tp, Color.LIGHT_GRAY);
                tp = add(tp, Color.MAGENTA);
                tp = add(tp, Color.ORANGE);
                tp = add(tp, Color.PINK);

                last = tp;

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(parent);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Timer timer = new Timer(1000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if (last != null) {
                            Container parent = last.getParent();
                            if (parent != null) {
                                parent.remove(last);
                                parent.repaint();
                                if (parent instanceof TestPane) {
                                    last = (TestPane) parent;
                                }
                            } else {
                                last = null;
                            }
                        } else {
                            (((Timer)e.getSource())).stop();
                        }
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();
            }
        });
    }

    public TestPane add(TestPane parent, Color color) {

        TestPane child = new TestPane(color);
        parent.add(child);
        return child;
    }

    public class TestPane extends JPanel {

        public TestPane(Color background) {
            setLayout(new BorderLayout());
            setBorder(new EmptyBorder(10, 10, 10, 10));
            setBackground(background);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(50, 50);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T02:13:46.043

这是因为 UI 线程负责绘制屏幕，​​以及处理事件。当您让 UI 线程进入睡眠状态时，就不会再发生绘画或事件处理了。当线程恢复绘画时，所有面板都已被移除。

这个 URL 非常全面地介绍[了如何使用 Swing 处理线程](http://www.ntu.edu.sg/home/ehchua/programming/java/J5e_multithreading.html)。

您最好创建一个删除面板的线程。

（未经测试）

```
Thread t = new Thread() {
   @Override
   public void run() {  // override the run() for the running behaviors
     for (int i = 0; i < 10; i++)
     {
        Thread.sleep(3000);
        SwingUtilities.invokeLater(new Runnable() {
          public void run() {
           someJPanel.remove(...);
          });
     }
   }
};
t.start();  // call back run() 
```

# javascript - 我如何启用/禁用收音机选择上的 div

> ID：15149256
> 
> 赞同：0
> 
> 时间：2013-03-01T02:07:08.220
> 
> 标签：javascript, html, radio-button, show-hide

我有一个表格，我想在其中提供 3 个选项来支付活动费用。每个选项都是一个单选按钮，并包含一个带有付款详细信息的 div。我希望在选择单选按钮之前隐藏这些 div。

我用我目前拥有的东西创建了一个 JSfiddle：http: [//jsfiddle.net/Kvg8M/1/](http://jsfiddle.net/Kvg8M/1/)

目前，我已经设法让所有 3 个 div 都被隐藏并同时出现，但我只想根据收音机选择显示一组细节并隐藏其他细节。

这是JS：

```
$(document).ready(function () {
    $(".paymentmethod").click(function () {
        $(".paymentinfo").show('slow');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:47:34.067

查看值并显示适当的 DIV。

```
$(document).ready(function () {
    $(".paymentmethod").click(function () {
        $(".paymentinfo").hide();
        switch ($(this).val()) {
            case "Direct Deposit":
                $("#pay0").show("slow");
                break;
            case "Credit Card Authorisation":
                $("#pay1").show("slow");
                break;
            case "Cash at FAA Office (In Person)":
                $("#pay2").show("slow");
                break;
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/barmar/Kvg8M/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:04:04.657

我会`data-pay`为每个输入添加一个属性，其值等于您要显示`id`的值：`<div>`

**HTML：**

```
<input type="radio" value="Direct Deposit" id="CAT_Custom_249152_0" name="CAT_Custom_249152" class="paymentmethod" data-pay="pay0"/>
<input type="radio" value="Credit Card Authorisation" id="CAT_Custom_249152_1" class="paymentmethod" name="CAT_Custom_249152" data-pay="pay1"/>
<input type="radio" value="Cash at FAA Office (In Person)" id="CAT_Custom_249152_2" class="paymentmethod" name="CAT_Custom_249152" data-pay="pay2"/> 
```

**Javascript：**

```
$(document).ready(function () {
  $(".paymentmethod").click(function () {
    $('.paymentinfo').hide();
    $('#'+$(this).data('pay')).show('slow');
  });
}); 
```

[小提琴](http://jsfiddle.net/Kvg8M/3/)

# iphone - CoreBluetooth[ERROR] XPC 连接中断，正在重置

> ID：15149262
> 
> 赞同：12
> 
> 时间：2013-03-01T02:08:14.163
> 
> 标签：iphone, core-bluetooth

当我尝试使用我的 iphone 应用程序连接蓝牙 LE 时。它给 CoreBluetooth[ERROR] XPC 连接中断，重置。为什么。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-15T00:30:28.137

“CoreBluetooth[ERROR] XPC 连接中断，正在重置”表示`blued`蓝牙守护进程已崩溃。您可以通过打开控制台并查看系统日志和诊断报告来查看更多详细信息。

就我而言， blued 中的异常似乎是因为 SerialNumber 在某处为零。我没有解决方法，已将其报告给 bugreport.apple.com（错误 16075785）。

实际导致异常的方法是确定性的，但因计算机而异。在一台具有内部蓝牙 4.0 芯片的计算机上，调用`-[CBPeripheral discoverCharacteristics:forService:]`. 在另一台带有蓝牙 4.0 USB 适配器的计算机上，调用`-[CBPeripheral writeValue:forCharacteristic:type:]`或`-[CBPeripheral setNotifyValue:forCharacteristic:]`

```
'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: SerialNumber)'
    *** First throw call stack:
    (
        0   CoreFoundation                      0x00007fff91b1141c __exceptionPreprocess + 172
        1   libobjc.A.dylib                     0x00007fff9231de75 objc_exception_throw + 43
        2   CoreFoundation                      0x00007fff91a0c62e -[__NSDictionaryM setObject:forKey:] + 1102
        3   blued                               0x0000000103d5d422 blued + 336930
        4   blued                               0x0000000103d4b115 blued + 262421
        5   IOBluetooth                         0x00007fff97354093 -[IOBluetoothL2CAPChannel processIncomingData:] + 576
        6   IOBluetooth                         0x00007fff97353e3c -[IOBluetoothL2CAPChannel handleMachMessage:] + 45
        7   Foundation                          0x00007fff94d98e35 __NSFireMachPort + 94
        8   CoreFoundation                      0x00007fff91a42d04 __CFMachPortPerform + 388
        9   CoreFoundation                      0x00007fff91a42b69 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 41 
```

编辑 2014-02-27：我的特定崩溃发生是因为设备 GATT 表包含服务 180A «设备信息»中的特征 2A25 «序列号字符串»的无效非 UTF8 值，并且 blued 守护程序正在从中创建一个 NSString*并将其放入 NSMutableDictionary。一个临时的解决方法是通过跳转到最近的 ret 命令使 setObject:forKey: 在 blued 内永远不会失败：

```
sudo /Applications/Xcode.app/Contents/Developer/usr/bin/lldb <<PID of blued>>
breakpoint set --fullname "-[__NSDictionaryM setObject:forKey:]" --condition "$rdx == 0"
breakpoint command add 1
register write pc `$pc+967`
continue
DONE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:09:04.557

也发生在我身上 - 特别是当我停止 CM 扫描并重新启动它时启动 CBCentralManager (CM) 扫描时 - 它通常会得到解决。恐怕这是 CoreBluetooth 实现中的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T15:16:16.203

我在向 CBPeripheralManager 添加服务时遇到了这个崩溃。事实证明，我在获取一些特征 id 的方法中有一个令人讨厌的错字（没有编译器错误或警告）。因此，使用 nil id 创建了几个特征。我得到的只是 iOS 7.1.1 下的日志中的这个错误，并且在查看我的设备日志时发现了 BTServer 崩溃报告。我的 iOS 8.1.2 设备没有将其记录到控制台，因此发现问题可能会更糟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T08:27:39.533

偶然发现了这个错误的另一个原因**：USB集线器**和连接或电源不佳导致我的调试环境损坏。这意味着它确实不定期地报告错误。

关于我的 Odyssee 的更多信息：通常我直接连接到构建机器，但是当我遇到这个问题时，它是通过我显示器的 USB 集线器连接的。我重新启动了 Xcode，重新启动了 buildmachine，但没有成功。有趣的事实：相同的设置现在可以正常工作 3 天，但是在星期五（今天）连接到调试器是不情愿的。

希望这个提示不是一次性的奇迹；-)

# php - 即使未选中，也使复选框出现在 $_POST 数组中

> ID：15149263
> 
> 赞同：3
> 
> 时间：2013-03-01T02:08:14.820
> 
> 标签：php, html, forms

我在 HTML 表格中有一张发票。您选择项目名称，然后选择项目批次和项目编号。最后有一个复选框来标记是否已售罄。

```
<input type="checkbox" name="soldout[]"> 
```

当我处理表单时，$_POST 复选框数组显然不包含未选中的框。在将复选框与项目匹配时，这会导致我出现问题

```
foreach($productID as $key=>$id){
    $p = $id;
    if(isset($soldout[$key])){
        $so = true;
    }
} 
```

因此，如果我有三个订单项，并且第一个和最后一个被标记为已售罄，它会处理为前 2 个已售罄，最后一个未售罄。

我不认为我可以这样做：

```
<input type="checkbox" name="soldout[<?php echo $i; ?>]"> 
```

因为我在需要时使用 javascript 添加空发票行，并且不知道如何增加数组键。

关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:21:07.113

对此没有直接的 HTML 解决方案。如果 Javascript 是一个选项，您可以查看那里，但如果您想要一个直接的 HTML 解决方案，未选中的复选框不会出现在 PHP 中，但单选按钮会出现。

```
<input type="radio" name="soldout[<?php echo $i; ?>]" value="true"> Yes
<input type="radio" name="soldout[<?php echo $i; ?>]" value="false"> No 
```

然后在 PHP 中你可以像访问它一样

```
foreach($productID as $key=>$id){
    $p = $id;
    if($soldout[$key] == "true"){
        $so = true;
    }
    else {
        $so = false;
    }
} 
```

记住周围的引号，`"true"`因为它是一个字符串

* * *

再说一次，如果您在服务器端填充复选框，您还应该知道应该存在哪些值，如果它们不存在`$_POST`，则假设它们未选中。

```
foreach ($availableProductIDs as $id) {
    if(isset($_POST['soldout'][$id]){
        $so = true;
    }
    else {
        $so = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:23:48.670

当您使用 JS 增加数组时，只需将名称更改为 soldout_new 然后增加一个变量。

像这样的东西：

```
var soldout_new = 0;

function add()
{
'<input type="checkbox" name="soldout_new[' + soldout_new + ']">';

soldout_new += 1;
} 
```

或者您也可以将变量设置为 php 中的 id：

```
var soldout = <?php echo $i; ?>;

function add()
{
'<input type="checkbox" name="soldout[' + soldout + ']">';

soldout += 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T04:46:48.950

为什么不做这样的事情？

```
<input type="checkbox" name="soldout[]" value="<?= $productID[0] ?>">
<input type="checkbox" name="soldout[]" value="<?= $productID[1] ?>"> 
```

然后在 PHP

```
foreach($productID as $key=>$id) {
    $p = $id;
    if(in_array($id, $soldout) {
        $so = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T13:23:13.953

Java免费解决方案：

```
&lt;input type="hidden" name="hsoldout[]" value="$value"&gt;
&lt;input type="checkbox" name="soldout[]" value="$value"&gt;<br /> 
```

`soldout`提交后，如果和之间出现差异`hsoldout`，则表示`checkbox`已订婚。实际上，每个表单只需要一个隐藏键：

```
if(array_key_exists($_POST[hsoldout],$i)) { <br/>
    $_POST[soldout][$i] = $_POST[soldout][$i];   // makes sure it is set as a 
    $_POST var <br />
    .... <br />
} 
```

# datetime - 熊猫时间增量错误

> ID：15149265
> 
> 赞同：0
> 
> 时间：2013-03-01T02:08:22.437
> 
> 标签：datetime, pandas, time-series, series, timedelta

运行 pandas 文档中的代码示例时出现错误。

我怀疑这可能与我正在使用的熊猫版本有关，但我无法确认。

```
pandas VERSION 0.10.1  
numpy VERSION 1.7.0  
scipy VERSION 0.12.0.dev-14b1e07 
```

以下示例直接取自此处的 pandas 文档：

[pandas - 时间增量](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas)
这行得通

```
from datetime import datetime, timedelta  
from pandas import *  

s  = Series(date_range('2012-1-1', periods=3, freq='D'))  
s  

Out[52]:  
0   2012-01-01 00:00:00  
1   2012-01-02 00:00:00  
2   2012-01-03 00:00:00 
```

就像这个

```
td = Series([ timedelta(days=i) for i in range(3) ])  
td  
Out[53]:  
0            0:00:00  
1     1 day, 0:00:00  
2    2 days, 0:00:00  

df = DataFrame(dict(A = s, B = td))  
df  
Out[54]:  
                    A                B  
0 2012-01-01 00:00:00          0:00:00  
1 2012-01-02 00:00:00   1 day, 0:00:00  
2 2012-01-03 00:00:00  2 days, 0:00:00 
```

根据文档，这似乎与预期的输出一致。

示例代码中的下一行会产生错误：

```
df['C'] = df['A'] + df['B'] 
```

...

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-55-7057e174d79e> in <module>()
----> 1 df['C'] = df['A'] + df['B']

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/series.pyc in wrapper(self, other)
     91             if self.index.equals(other.index):
     92                 name = _maybe_match_name(self, other)
---> 93                 return Series(wrap_results(na_op(lvalues, rvalues)),
     94                               index=self.index, name=name)
     95 

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/series.pyc in na_op(x, y)
     63             if isinstance(y, np.ndarray):
     64                 mask = notnull(x) & notnull(y)
---> 65                 result[mask] = op(x[mask], y[mask])
     66             else:
     67                 mask = notnull(x)

TypeError: ufunc add cannot use operands with types dtype('<M8[ns]') and dtype('O') 
```

数据类型：

```
df.dtypes

Out[56]: 
A    datetime64[ns]
B            object 
```

同样，当我做加法/减法时，我得到一个错误：

```
s - s.max()

<ipython-input-57-8d53e24db927> in <module>()
----> 1 s - s.max()

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/series.pyc in wrapper(self, other)
     78 
     79         if (com.is_datetime64_dtype(self) and
---> 80             com.is_datetime64_dtype(other)):
     81             lvalues = lvalues.view('i8')
     82             rvalues = rvalues.view('i8')

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/common.pyc in is_datetime64_dtype(arr_or_dtype)
   1003         tipo = arr_or_dtype.type
   1004     else:
-> 1005         tipo = arr_or_dtype.dtype.type
   1006     return issubclass(tipo, np.datetime64)
   1007 

AttributeError: 'Timestamp' object has no attribute 'dtype' 
```

这段代码是为了便于参考。

[https://gist.github.com/hernamesbarbara/5061972](https://gist.github.com/hernamesbarbara/5061972)

感谢您的任何帮助或建议；非常感谢。

-奥斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:21:36.817

如果您查看链接到的页面标题（浏览器窗口顶部），您会发现它是 pandas 的开发版本：http: [//pandas.pydata.org/pandas-docs/dev/timeseries。 html#time-deltas](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas)

所以，今天，这是版本

```
'0.11.0.dev-13ae597' 
```

这段代码工作正常的地方。

稳定版的文档在这里：

[http://pandas.pydata.org/pandas-docs/stable/](http://pandas.pydata.org/pandas-docs/stable/)

您将在浏览器窗口顶部看到的位置

```
pandas 0.10.1 
```

这是你的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T05:56:26.793

我尝试关闭所有 python 实例并再次重新启动所有内容，但它仍然无法正常工作。
然而，这对我有用。
**卸载熊猫**：

```
conda remove pandas 
```

或者

```
pip uninstall pandas 
```

然后**重新**安装

```
conda install pandas 
```

或者

```
pip install pandas 
```

# jquery - 使用 json 附加和删除动态 php 菜单

> ID：15149266
> 
> 赞同：0
> 
> 时间：2013-03-01T02:08:25.023
> 
> 标签：jquery, json

我正在使用以下代码将动态 php 菜单附加到表格单元格。

```
$("input:radio[id='l1_allowed_0']").click(function() {  

$(".l1_p1_action").append('<select name="pathway_actions[]" id="pathway_actions">' );

$.getJSON('../scripts/get_pathway_actions.php', function (json) {
$("#pathway_actions").empty();
$.each(json, function () {
$("#pathway_actions").append(new Option(this.action));
});  
});
}); 
```

我会用什么来从 $(".l1_p1_action") 中删除菜单，比如：

```
$("input:radio[id='l1_allowed_1']").click(function() {  

}); 
```

**编辑**

我已更改代码以创建具有唯一 ID 的菜单。两个问题：

删除不起作用，每次单击单选按钮时都会附加一个新菜单：

```
$("input:radio[id='l1_allowed_0']").click(function() {  

$(".l1_p2_actions").remove();
$(".l1_p3_actions").remove();
$(".l1_p4_actions").remove();

$(".l1_p1_action").append('<select name="l1_p1_actions" id="l1_p1_actions">' );

$.getJSON('../scripts/get_pathway_actions.php', function (json) {
$("#l1_p1_actions").empty();
$.each(json, function () {
$("#l1_p1_actions").append(new Option(this.action));
});  
});
});

$("input:radio[id='l1_allowed_1']").click(function() {  

$(".l1_p1_actions").remove();
$(".l1_p3_actions").remove();
$(".l1_p4_actions").remove();

$(".l1_p2_action").append('<select name="l1_p2_actions" id="l1_p2_actions">' );

$.getJSON('../scripts/get_pathway_actions.php', function (json) {
$("#l1_p2_actions").empty();
$.each(json, function () {
$("#l1_p2_actions").append(new Option(this.action));
});  
});
}); 
```

啊，删除行上的错误选择器...更改为以下内容，删除现在正在工作。

```
$("#l1_p2_actions").remove();
$("#l1_p3_actions").remove();
$("#l1_p4_actions").remove(); 
```

如果多次单击单选按钮，仍然存在将额外的空菜单附加到单元格的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:14:16.333

您可以只使用 remove 函数并指定要删除的元素的 id，因为 id在页面上*应该*是唯一的：

```
$("input:radio[id='l1_allowed_1']").click(function() {
    $("#pathway_actions").remove();
}); 
```

# python - 编程新手：在 python 中创建儿童添加游戏

> ID：15149267
> 
> 赞同：-1
> 
> 时间：2013-03-01T02:08:35.583
> 
> 标签：python

我是编程新手，并且遇到了家庭作业问题。这是作业问题：

开发一个简单的游戏，教幼儿园的孩子如何添加个位数。您的函数`game()`将以整数 n 作为输入，然后询问 n 个个位数的加法问题。要添加的数字应从 [0,9] 范围内随机选择（即 0 到 9 包括在内）。用户将在提示时输入答案。您的函数应该为正确答案打印“正确”，为错误答案打印“不正确”。在 n 个问题之后，您的函数应该打印正确答案的数量。

例如：

```
>>>game(3)
8+2=
Enter answer: 10
Correct.
6+7 =
Enter answer: 12
Incorrect.
7+7=
Enter answer: 14
Correct.

You got 2 correct answers out of 3 
```

这是我到目前为止所拥有的：

```
def game(n):
  x = random.randrange (0,10)
  y = random.randrange(0,10)
  numbers = (x+y)
  print (x, "+", y)
  guess = eval(input("Enter your guess: "))
  count = 0
  total = 0
  while total <= n:
    if guess == numbers:
      count = count + 1
      total = total + 1
      print("Correct.")
      break
    elif guess != numbers:
      total = total + 1
      print("Inncorrect")
      break
  return ("You got" + sum(count) + "correct answers out of" + sum(total)) 
```

我可以到达它说明答案是否正确的地方，但无法弄清楚如何让它运行 n 次并显示结果。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T02:21:00.400

显示的片段有几个问题，一些是功能性的，一些与样式和可读性有关。

首先，`while`循环不重复的原因是`break`语句。这些导致程序继续执行while 之后的指令，即它们导致“过早”退出while 循环。

您还需要将猜测提示等*放在*循环内......如图所示，它们将在循环之前执行一次，而不是每次迭代。

您不需要`sum()`for count 和 total。

现在讨论风格问题：
**编辑**：我也想插上`Jon Clements`一句：避免`eval()`！
我`eval`在其他 SO 帖子中对自己进行了足够的抨击，这是有原因的：尽管有很少的用例`eval()`是必要的，但在大多数情况下，对于这个相对“危险”的功能，有更好的替代方案。在这里，使用 int() 将用户的输入转换为整数。

您可以考虑避免重复，`total = total + 1`因为在两种情况下都必须这样做，无论答案是正确还是不正确。（也可以考虑`for x in range(n)`使用循环，见下文。）
也将 elif 替换为普通的，`else`因为测试的条件与“if”条件相反。
[正如 `nneonneo`] 所建议的：在不需要的地方避免括号（如在数字分配中），使用`+=`运算符（避免重复左值）。

将循环更改为 a 也是一个好主意，`for total in range(n)`因为这将完全避免您管理总变量。我避免形成后一种更改，以保持您的初始代码的精神。

```
total = 1
while total <= n:
    x = random.randrange(0,10)
    y = random.randrange(0,10)
    numbers = x + y
    print (x, "+", y)
    guess = eval(input("Enter your guess: "))
    total = total + 1
    if guess == numbers:
        count = count + 1
        print("Correct.")
    else:
        print("Incorrect")
 print("You got", count, "correct answers out of", total) 
```

# sql - 标记：用于返回标记和未标记项目的 SQL 查询

> ID：15149269
> 
> 赞同：0
> 
> 时间：2013-03-01T02:08:38.783
> 
> 标签：sql, ms-access, tagging

我正在构建一个数据库，该数据库将包含标记，并使用了 'toxi' 模式，其中我有 3 个表：

```
Items: Item, ItemID, more fields
Tags: TagName, TagID, more fields
TagMap: TagID, ItemID 
```

我正在尝试构建一个查询，该查询将列出所有项目及其标签，其中许多项目可能没有标签。我找不到可以同时执行这两种操作的查询。

以下查询按名称获取带有标签的项目，但只会提取*具有*标签的项目。

```
SELECT Items.Item, Tags.Tag
FROM Items INNER JOIN 
(Tags INNER JOIN TagMap ON Tags.ID = TagMap.TagId)
ON Items.ID = TagMap.ItemId; 
```

如果它们已被标记，则以下查询会为我获取所有项目及其 TagID，但我似乎无法进入在单个查询中将这些 TagID 转换为 TagNames 的下一步。

```
SELECT [Items].Item, [TagMap].TagId
FROM Items LEFT JOIN TagMap ON [Items].ID=TagMap.ItemId; 
```

[MSDN](http://msdn.microsoft.com/en-us/library/office/bb243855%28v=office.12%29.aspx)说“外部联接可以嵌套在多表联接中的内部联接中，但内部联接不能嵌套在外部联接中”，但我找不到任何嵌套两个不引发错误的联接的方法。据我所知，我需要 LEFT JOIN 才能出现在 Items 上。

我正在使用 Access 在概念数据库上构建我的证明，因为它已经安装在我的机器上。我可能会在某个时候切换到 SQL Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:10:21.573

你很接近 - 只需要添加 1 个额外的`LEFT JOIN`：

```
SELECT [Items].Task, [TagMap].TagId, Tags.TagName
FROM Items 
    LEFT JOIN TagMap ON [Items].ID=TagMap.TaskId
    LEFT JOIN Tags ON TagMap.TagID=Tags.TagID 
```

由于您使用的是 MS Access，因此您需要在连接周围使用括号——这样的内容应该很接近：

```
SELECT [Items].Task, [TagMap].TagId, Tags.TagName
FROM (Items 
    LEFT JOIN TagMap ON [Items].ID=TagMap.TaskId)
    LEFT JOIN Tags ON TagMap.TagID=Tags.TagID 
```

# android - 从“通知”和启动器图标启动有什么区别？

> ID：15149271
> 
> 赞同：0
> 
> 时间：2013-03-01T02:08:43.197
> 
> 标签：android, android-notifications

我`MainActivity`是压倒一切的`onNewIntent`。myService 是带有通知的前台服务。

`launcher icon`在 myprogram 被杀死后，如果我从,启动我的程序，`onNewIntent`最终会被调用。但是，如果我从 , 启动`Notification`，`onNewIntent`则永远不会被调用。

我认为堆栈是不同的。你怎么看？

我的 myService 类的通知是这样的

```
Intent i = new Intent(this,InputMainActivity.class);
PendingIntent pi = PendingIntent.getActivity(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

Notification n = new Notification(R.drawable.notiicon,"comment",System.currentTimeMillis());
                    n.setLatestEventInfo(myService.this,"comment",“comment“,pi);
startForeground(1,n); 
```

从通知调用此程序时，我应该如何调用 onNewIntent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:04:00.910

它适用于此代码吗？

```
PendingIntent pi = PendingIntent.getActivity(this, 0, i, PendingIntent.FLAG_CANCEL_CURRENT); 
```

# jquery - 如何在 jquery 滑块中设置最小值和最大值？

> ID：15149273
> 
> 赞同：1
> 
> 时间：2013-03-01T02:08:55.980
> 
> 标签：jquery, slider, uislider, jquery-ui-slider

我正在使用 jquery - Filamentgroup 滑块。我想限制滑块的移动。

**Javascript**

```
$('select#valueA, select#valueB').selectToUISlider({
            sliderOptions: {
                    change:function(e, ui) {
                        return false;

                    }
            },
            labels: 12
        }); 
```

**HTML**

```
<fieldset>
        <label for="valueA">From:</label>
        <select name="valueA" id="valueA">
            <option value="6am">6:00</option>
            <option value="7am">7:00</option>
            <option value="8am">8:00</option>
            <option value="9am" selected="selected">9:00</option>
            <option value="10am">10:00</option>
            <option value="11am">11:00</option>
            <option value="Noon">Noon</option>
            <option value="1pm">1:00</option>
            <option value="2pm">2:00</option>
            <option value="3pm">3:00</option>
            <option value="4pm">4:00</option>
            <option value="5pm">5:00</option>
            <option value="6pm">6:00</option>
            <option value="7pm">7:00</option>
            <option value="8pm">8:00</option>
            <option value="9pm">9:00</option>
            <option value="10pm">10:00</option>
            <option value="11pm">11:00</option>
            <option value="12pm">12:00</option>
        </select>

        <label for="valueB">To:</label>
        <select name="valueB" id="valueB">
            <option value="6am">6:00</option>
            <option value="7am">7:00</option>
            <option value="8am">8:00</option>
            <option value="9am">9:00</option>
            <option value="10am">10:00</option>
            <option value="11am">11:00</option>
            <option value="Noon">Noon</option>
            <option value="1pm">1:00</option>
            <option value="2pm">2:00</option>
            <option value="3pm">3:00</option>
            <option value="4pm">4:00</option>
            <option value="5pm">5:00</option>
            <option value="6pm">6:00</option>
            <option value="7pm">7:00</option>
            <option value="8pm">8:00</option>
            <option value="9pm" selected="selected">9:00</option>
            <option value="10pm">10:00</option>
            <option value="11pm">11:00</option>
            <option value="12pm">12:00</option>
        </select>
    </fieldset> 
```

我如何控制滑块的移动。这意味着如果有人将滑块移动到某个位置，我需要务实地将滑块移动到特定位置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:22:21.387

该插件不允许通过选择元素覆盖最小值和最大值，您应该使用输入元素

```
<input type="range" name="slider" id="slider" value="0" min="0" max="1"  /> 
```

接着

```
$('#slider').selectToUISlider(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:27:09.293

不太肯定您要实现的目标，但请查看[滑块控件](http://jqueryui.com/slider/#rangemin)的 jQuery-UI 网站上的代码示例。

这是文档中的一个示例：

### Javascript

```
$(function() {
  $( "#slider-range-min" ).slider({
    range: "min",
    value: 37,
    min: 20,  //valueA
    max: 50,  //valueB
    slide: function( event, ui ) {
      $( "#amount" ).val( "$" + ui.value );
    }
  });
  $( "#amount" ).val( "$" + $( "#slider-range-min" ).slider( "value" ) );
}); 
```

### HTML

```
<label for="amount">Maximum price:</label>
<input type="text" id="amount" />
<div id="slider-range-min"></div> 
```

### Stack Snippets 和[jsFiddle中的工作演示](https://jsfiddle.net/KyleMit/EHLQL/)

```
$(function () {
  $("#slider-range-min").slider({
    range: "min",
    value: 37,
    min: 30,
    max: 50,
    slide: function (event, ui) {
      $("#amount").val("$" + ui.value);
    }
  });
  $("#amount").val("$" + $("#slider-range-min").slider("value"));
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" rel="stylesheet"/>

<label for="amount">Maximum price:</label>
<input type="text" id="amount" />
<div id="slider-range-min"></div>
```

# javascript - 获取执行 node.js 的目录

> ID：15149274
> 
> 赞同：20
> 
> 时间：2013-03-01T02:08:58.883
> 
> 标签：javascript, node.js, path, directory, pwd

我有一些项目，我用`node main.js`/`make test`等运行它。我需要的是从脚本中获取这个目录。不仅来自`main.js`，还来自任何子模块。我尝试使用`path`plugin 和`__directory`，但我得到了当前文件的路径（例如子模块）。我也试过`require('path').dirname(require.main.filename)`了，但是当我运行时，`make test`我得到 mocha dirname 而不是我的项目目录。解决这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-01T02:10:58.797

[`process.cwd()`](https://nodejs.org/api/all.html#process_process_cwd)将提供。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T02:11:08.090

`__dirname`为您提供文件所在的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T21:23:35.587

`require.cache`存储每个加载的模块及其相关的导入值、父模块、子模块、绝对文件路径等。

我相信每个模块都使用其文件路径作为缓存键分配给缓存对象，但您可能需要仔细检查以确保。

但是，如果是这种情况，那么简单的事情`Object.keys(require.cache)`将为您提供所有模块的文件路径数组。然后只需根据需要解析每个路径，以从每个模块路径中提取您要查找的目录信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T18:52:14.997

这是一个方便的功能，可以从控制台访问提供相对路径的文件

```
function getPath(filename) {
    return (filename[0] != '/' ? process.cwd() + '/' : "") + filename
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-11T21:15:28.957

如果您想要可执行文件而不是 JS 模块的路径，还有一种选择。您可以使用：

```
process.argv[1] // 0 is path to node 
```

`__dirname`并且`__filename`也可以使用，但这些是模块的路径，因此如果将其放入文件中，`require`它将显示该文件的路径。

# php - 具有单个元素的 PHP Foreach 循环

> ID：15149280
> 
> 赞同：3
> 
> 时间：2013-03-01T02:09:32.697
> 
> 标签：php, arrays, foreach

我有一个函数可以解析嵌套数组中的“条目”：

```
$data = Array(
   [date] => 'date'
   [entry] => Array(
      [0] => Array(
         [Title] => 'title0'
         [Price] => 'price0'
      )
      [1] => Array(
         [Title] => 'title1'
         [Price] => 'price1'
      )
   )
 ) 
```

`foreach($data['entry'] as $entry){`如果有多个条目，则用 a 循环遍历这个效果很好。但是，我只有一个条目：

```
 $data = Array(
   [date] => 'date'
   [entry] => Array(
      [Title] => 'title'
      [Price] => 'price'
   )
 ) 
```

并且 foreach 循环失败。

有没有一种优雅的方法来编写一个 foreach 来获取每个条目 [0]、条目 [1] 子数组（像正常一样），或者如果只有一个条目并获取整个“条目”数组，则返回一个级别？

* * *

附录：我在条目上所做的事情非常复杂......我想我可以把它分成一个不同的函数，做一个 if(is_array) 检查然后调用这个函数一次，或者每个......但是看起来不优雅……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T04:16:16.370

从技术上讲，您不需要 $temp 变量步骤。

```
$data['entry'] = isset($data['entry'][0]) ? $data['entry'] : array($data['entry']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T02:15:11.947

最好的优雅方法是基于键创建一个数组，即使只有一个。

像这样：

```
$data = Array(
   [date] => 'date'
   [entry] => Array(
      [0] => Array(
         [Title] => 'title0'
         [Price] => 'price0'
      )
   )
 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:17:28.937

这是因为您定义了一个像这样的结构的多维数组：

`entry = array(array())`

在第二种情况下，您只声明`entry = array()`

想一想：

`if(is_array(entry[0]))` ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T03:13:04.413

```
 if(!isset($data['entry']['0'])){
    $temp = $data['entry'];
    unset($data['entry']);
    $data['entry']['0'] = $temp;
 }
 foreach($data['entry'] as $entry) ... 
```

不是很“优雅”，但它确实有效......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T09:44:52.833

试试这个它对我有用

```
foreach ($data as $key => $value) {
            if (!is_numeric($key)) {
            //not multidimensional
                 $data1 = $data;                    
            } else {                   
                 $data1 = $value;
            }
            //do your stuff
            echo $data1;                        
} 
```

最终你可以做一个递归函数

# objective-c - 为 OCMock 对象调用 isKindOfClass 时如何获取模拟值？

> ID：15149284
> 
> 赞同：12
> 
> 时间：2013-03-01T02:10:03.533
> 
> 标签：objective-c, unit-testing, mocking, ocmock

将 OCMock 对象传递给函数调用 isKindOfClass 的方法。但是对于单元测试，返回的值不是模拟类而是 OCMockObject

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T09:07:59.753

这是一整篇文章，解释了如何准确编写该`OCMock isKindOfClass`方法（默认情况下不存在）以及如何使用它： http: [//blog.carbonfive.com/2009/02/17/custom-constraints-for-ocmock/](http://blog.carbonfive.com/2009/02/17/custom-constraints-for-ocmock/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:44:53.057

如果要将 OCMock 对象传递给函数调用 isKindOfClass 的方法，则需要创建部分模拟。以下代码可能会对您有所帮助。它对我有用。

```
-(void)testMyTest
{
    FirstViewController* masterVC = [[FirstViewController alloc]init];
    SecondViewController *second = [[SecondViewController alloc] init];
    id master = [OCMockObject partialMockForObject:second];
    [[master expect] getName:@"PARAM"];
    [masterVC doSomething:master];
    [master verify];

    [masterVC release];
    [second release];
} 
```

FirstViewController 中的 doSomething 方法

```
-(void)doSomething:(SecondViewController *)detail
{
    if ([detail isKindOfClass:[SecondViewController class]])
    {
        NSString * returnVal = [detail getName:@"PARAM"];
        NSLog(@"returnVal %@",returnVal);
    }
} 
```

另一种选择是模拟 isKindOfClass 方法，因此测试用例将变为

```
- (void)testMyTest
{
     CalculatorViewController* masterVC = [[CalculatorViewController alloc]init];
     id master = [OCMockObject niceMockForClass:[SecondViewController class]];
     BOOL ret = YES;
     [[[master expect] andReturnValue:OCMOCK_VALUE(ret)] isKindOfClass:[SecondViewController class]];
     [[master expect] getName:@"PARAM"];
     [masterVC doSomething:master];
     [master verify];
} 
```

# javascript - 订购抖动到 256 种颜色

> ID：15149290
> 
> 赞同：1
> 
> 时间：2013-03-01T02:10:50.567
> 
> 标签：javascript, image-processing, canvas, gif, dithering

我每次都尝试将HTML5 画布中的[抖动](http://en.wikipedia.org/wiki/Ordered_dithering)图像向下或接近 256 色。我有抖动算法工作，您可以在我的[测试页面](http://gifpaint.com/DitherExample/)上看到（检查浏览器控制台的颜色计数）。

但是我无法理解如何为不同的图像选择或生成最佳深度和阈值图，结果根据原始图像有多少颜色而有很大差异。

到目前为止，我有 2x2,3x3,4x4,8x8 地图的这些功能之一，

```
 function ditherImageData4x4(imageDataToDither){
    var depth = $('#depth').val();
    var threshold_map = [
        [  1,  9,  3, 11 ],
        [ 13,  5, 15,  7 ],
        [  4, 12,  2, 10 ],
        [ 16,  8, 14,  6 ]
    ];
    var dataWidth  = imageDataToDither.width;
    var dataHeight = imageDataToDither.height;
    var pixel  = imageDataToDither.data;
    var x, y, a, b;
    for ( x=0; x<dataWidth; x++ ){
        for ( y=0; y<dataHeight; y++ ){
            a    = ( x * dataHeight + y ) * 4;
            b    = threshold_map[ x%4 ][ y%4 ];
            pixel[ a + 0 ] = ( (pixel[ a + 0 ]+ b) / depth | 0 ) * depth;
            pixel[ a + 1 ] = ( (pixel[ a + 1 ]+ b) / depth | 0 ) * depth;
            pixel[ a + 2 ] = ( (pixel[ a + 2 ]+ b) / depth | 0 ) * depth;
            //pixel[ a + 3 ] = ( (pixel[ a + 3 ]+ b) / depth | 3 ) * depth;
        }
    }
    return pixel;
}; 
```

# c# - 遍历 .Text 值的数组

> ID：15149296
> 
> 赞同：1
> 
> 时间：2013-03-01T02:11:11.887
> 
> 标签：c#, arrays, iteration, tic-tac-toe

我正在制作一个 Windows Forms Tic-Tac-Toe 程序，它的网格大小由 App.config 文件中的值设置。因此，如果值为 9，则网格为常规 3 x 3，如果为 25，则为 5 x 5，依此类推。

我有一个 Gameboard 类，它为数组制作实际的按钮：

```
public Gameboard(int numberofButtons) //Constructor method that is referencing the App.config for the dimensions value to make the board
{
    buttonArray = new Button[numberofButtons]; //creating an array the size of numberofButtons which is the dimensions value from App.config
    Font font = new Font("Times New Roman", 36.0f); //creates an instance of the Font class
    int sqrtY = (int) Math.Sqrt(numberofButtons);
    int z = 0; //Counter for array

    //Create the buttons for the form
    for (int x = 0; x < sqrtY; x++)
    {
        for (int y = 0; y < sqrtY; y++)
        {
            buttonArray[z] = new Button();
            buttonArray[z].Font = font;
            buttonArray[z].Size = new System.Drawing.Size(100, 100);
            buttonArray[z].Location = new System.Drawing.Point(100*y, 100*x);
            buttonArray[z].Click += new EventHandler(button_click);
            z++; 
        }
    }
} 
```

如果我想通过简单地检查 buttonArray.Text 的值来检查 buttonArray 中的位置来检查数组中的获胜模式，我该如何迭代呢？

例如，在 4x4 网格中，水平获胜的获胜线将是

```
0,1,2,3
4,5,6,7
8,9,10,11
12,13,14,15 
```

所以

```
x=0, x<sqrt(dimension), x++
buttonArray[x].Text == "X" <-- to test 
```

我意识到这确实编码很差而且令人困惑，但我试图用一维数组来做到这一点，因为这是老师要求的。我想检查一个值`buttonArray[]`的值，首先检查行，然后是列，然后是对角线。

表单没有按钮，因此当表单加载时，它会使用用于网格的按钮来填充它。它旨在与计算机对战，因此当您单击按钮时，.Text 变为“X”，然后计算机应该放下“O”等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:46:52.227

我提供了如何区分您指定的标准的示例。我非常愿意回答具体问题，但由于这是一个家庭作业问题，我不想提供所有内容。希望这会有所帮助。

```
string[] values = buttonArray.Select(b => b.Text).ToArray();

//uses integer divison to separate out rows
string[][] rows = values
    .Select((v, i) => new {index = i, value = v})
    .GroupBy(anon => anon.index/size)
    .Select(grp => grp.Select(anon => anon.value).ToArray())
    .ToArray();

foreach(string[] row in rows)
{
    //Pseudocode
    var winner = CheckAllValuesArePopulatedAndTheSameAKAWinner(row);
    if (winner exists)
        return winner;
}

//uses modulus to separate out columns, basically a transpose
string[][] columns = values
    .Select((v, i) => new { index = i, value = v })
    .GroupBy(anon => anon.index % size)
    .Select(grp => grp.Select(anon => anon.value).ToArray())
    .ToArray();

string[] diagonal1 = values
    .Select((v, i) => new {index = i, value = v})
    .Where(anon => anon.index%(size + 1) == 0)
    .Select(anon => anon.value) //take just the string value, drop the index
    .ToArray();

string[] diagonal2 = values
    .Select((v, i) => new { index = i, value = v })
    .Where(anon => anon.index % (size - 1) == 0)
    .Skip(1) //skip 0 index
    .Take(size) //skip last index
    .Select(anon => anon.value) //take just the string value, drop the index
    .ToArray(); 
```

指数示例：

```
//given size and dimension

//run this code once per different size, not on each check (probably move variable to some outer scope)
Dictionary<string, int[]> winningSets = new Dictionary<string, int[]>();
int[] indices = Enumerable.Range(0, dimension).ToArray(); //make array of 0 to (dimension - 1)

for (int rowNum = 0; rowNum < size; ++rowNum) //0 based row index/num
{
    int[] rowIndices = indices
        .Where(i => i / size == rowNum)
        .ToArray();
    winningSets.Add(String.Format("Row Number {0}", rowNum + 1), rowIndices); //use 1 based row index/num for display
}

for (int colNum = 0; colNum < size; ++colNum) //0 based row index/num
{
    int[] colIndices = indices
        .Where(i => i % size == colNum)
        .ToArray();
    winningSets.Add(String.Format("Column Number {0}", colNum + 1), colIndices); //use 1 based column index/num for display
}

int[] diag1 = indices
    .Where(i => i % (size + 1) == 0)
    .ToArray();
winningSets.Add("Diag TR to BL", diag1);

int[] diag2 = indices
    .Where(i => i % (size - 1) == 0)
    .Skip(1) //skip 0 index
    .Take(size) //skip last index
    .ToArray(); 
winningSets.Add("Diag TL to Br", diag2);

//run this for each check
foreach(KeyValuePair<string, int[]> winningSet in winningSets)
{
    //Pseudo
    if (all of winningSet.Value indices are populated and same)
        return winningSet.Name; //Name of winning set, ex will not return multiple winning set which is possible in this game
    //this example does not show who won, but whoever had the last turn is the winner if one is found.
} 
```

添加如何检查值数组的示例（表示行/列/对角线）

```
 string CheckWinner(string[] setOfValues)
    {
        if (setOfValues.Any(individualValueFromSetOfValues => String.IsNullOrEmpty(individualValueFromSetOfValues))) // some values/cells are not filled in so no winner here
            return null; 
        if (setOfValues.Distinct().Count() == 1) //all data is the same
            return setOfValues.First(); //any value would work, we just checked that they're all the same
        return null; // all values/cells are full but they are not all the same
    } 
```

# android - 一个简单的 HTML 文件不会在 Android 全屏上显示

> ID：15149297
> 
> 赞同：0
> 
> 时间：2013-03-01T02:11:18.677
> 
> 标签：android, html, webview

我试过打电话

`zoomIn();`

`setBuiltInZoomControls(true);`

`supportZoom(true);`

等等，但它只是行不通。

只是一个提示......当我双击文本时它确实适合屏幕但没有换行。

任何提供的线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:19:17.893

您是否添加了视口元标记？

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

如果 HTML 正文设置为 100%，则文本应自动填满屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:36:14.323

嗨试试下面的代码：

```
 public class Terms extends Activity {
    WebView mWebView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.terms); 

    this.mWebView = ((WebView)findViewById(R.id.mWebView));     
    this.mWebView.getSettings().setBuiltInZoomControls(false);
    this.mWebView.getSettings().setLoadWithOverviewMode(false);
    this.mWebView.getSettings().setUseWideViewPort(false);
    this.mWebView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.CLOSE);
    this.mWebView.loadUrl("file:///android_asset/Terms.html");
    Button  back_btn = (Button)findViewById(R.id.back);
    back_btn.setOnClickListener(new View.OnClickListener(){
        public void onClick(View view)
        {
            finish();
        }
    });

  }
@SuppressWarnings("unused")
private class Callback extends WebViewClient {
      @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
      return(false);
    }
  }  
} 
```

# jquery - 点击触发Jquery循环

> ID：15149298
> 
> 赞同：0
> 
> 时间：2013-03-01T02:11:36.223
> 
> 标签：jquery, html, twitter-bootstrap

我有一段代码有问题，我有一个输入文件，用户可以在其中上传文件，当用户选择一个文件并尝试单击相同的输入时，我想显示一个模式框，显示确认替换的消息，如果用户单击接受文件浏览器窗口应该出现，现在这部分得到它但是，

当用户单击按钮时，模式会显示，但如果再次调用此模式，则会导致循环并显示几个文件浏览器窗口。怎么了？

我尝试使用 event.preventDefault()，但文件浏览器窗口不会显示

```
$(".fileinput-button").click(function (event) {
    var fileupload = $(this);

    if ($(this).hasClass('change')) {
        var name = $('.change').find('span').prop("id");
        $("#documentName").html(name);
        $("#replaceConfirmation").modal('show');

        $("#replaceFile").click(function () {
            fileupload.find('input').trigger('click');

            $("#replaceConfirmation").modal('hide');
        });

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:44:13.200

尝试

```
var fileupload;

$(".fileinput-button").on('click',function (event)
{
    fileupload = $(this);
    if ($(this).hasClass('change'))
    {
        var name = $('.change').find('span').prop("id");
        $("#documentName").html(name);
        $("#replaceConfirmation").modal('show');
    }
});

$("#replaceFile").on('click',function ()
{
    fileupload.find('input').trigger('click');
    $("#replaceConfirmation").modal('hide');
}); 
```

# c++ - MFC 自定义 CEdit 密码支持

> ID：15149299
> 
> 赞同：0
> 
> 时间：2013-03-01T02:11:37.943
> 
> 标签：c++, mfc, cedit

我在制作一个我添加最多的自定义 CEdit 类并给它一些样式时遇到了一些麻烦，但是我在一天中的大部分时间都在谷歌上搜索了一个树桩，但没有运气猜测谷歌今天讨厌我。

好的，所以我继承了 CEdit 类

我已经重写了 OnPaint 部分以对其进行样式设置，但是当我更新显示纯密码的文本时，我将此类应用于密码字段，而不是*** * 抱歉，如果我没有正确解释，但只做了 4 天 :)。

这是我的代码，里面有我不需要的东西，但我很累，放弃了:)

[http://pastebin.com/yegsh7E3](http://pastebin.com/yegsh7E3)

如果有人可以帮忙请做:)

谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:25:36.343

无需自定义控件，只需给它样式[`ES_PASSWORD`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775464%28v=vs.85%29.aspx)。我敢肯定，如果它在对话框中，您也可以从资源编辑器中设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:05:11.547

好的，我设法自己使用 ON_WM_PAINT 和 ON_WM_CTLCOLOR_REFLECT 对其进行排序，它现在可以完美处理它们，但感谢您的帮助

# c# - 是否有一种标准方法可以创建对服务器的 Web 请求以在其上使用应用程序？

> ID：15149300
> 
> 赞同：1
> 
> 时间：2013-03-01T02:11:45.810
> 
> 标签：c#, powershell, mono

我一直在开发一个与 PowerShell for Windows 交互的应用程序。到目前为止，一切都很好。但是，它直接连接到 MySQL（我猜这不是一个好的做法？）并且还直接连接到本地 PowerShell 实例。然而，我未来的目标是让它跨平台。我目前购买了一本关于跨平台开发的书（我相信基于单声道），以了解一些基本事物的最佳实践公共服务层。但是，我无法理解如何使用 PowerShell 来做到这一点。

我的问题是，有没有办法在某个地方托管一个服务器，该服务器通过一次来自多个连接的 Web 请求远程接受 Powershell 连接？否则，我看不到如何将这样的应用程序移植到 Android 等。

此外，我不会反对一些关于 Web 请求等最佳实践的基本链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:57:33.383

看看[PowerShell Web 访问](http://blogs.msdn.com/b/powershell/archive/2012/03/07/introducing-windows-powershell-web-access-in-windows-server-8-beta.aspx)。

# jquery-ui - jQuery-ui Tooltip 在点击时获取标题

> ID：15149302
> 
> 赞同：0
> 
> 时间：2013-03-01T02:12:13.320
> 
> 标签：jquery-ui, jquery-ui-tooltip

我正在使用 jquery-ui。我可以创建带有标题的元素并显示标题。但是，单击时，我想获取标题并填充另一个 div（这是因为启用触摸的设备没有工具提示）。我可以获得点击事件，但在点击事件中我无法获得标题。

```
 $("div").click(function( event ) {
      // just to prove that we are entering this event
      $("#preShow").html ( Date() );

      // show the title
      var toolTip = this.attributes.title.value;
      $("#show").html ( toolTip );

      // just to prove that there was no crash
      $("#postShow").html ( Date() );
  }); 
```

我也尝试过使用

```
 var toolTip = $(this).attr ("title"); 
```

这是显示问题的jsfiddle

[http://jsfiddle.net/jK5xQ/](http://jsfiddle.net/jK5xQ/)

**如果**我创建一个 HTML 文件并在 Firefox 中运行它并在 click 事件的第一行设置一个断点，则相同的代码可以工作。有没有人经历过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:25:44.440

这是因为 jQueryUI 的 Tooltip 移除了标题并使用了它。试着像这样去做...

```
$(document).ready(function () {
    $( document ).tooltip( {
        track:    true,
        content:  function() {
            return  $( this ).attr( "title" );
        }
    });      
    $('div').click(function(){
        $('#show').html($('#' + $(this).attr('aria-describedby')).children().html());
    });
}); 
```

演示：http: [//jsfiddle.net/jK5xQ/4/](http://jsfiddle.net/jK5xQ/4/)

如果您有任何问题，请告诉我！

# ios - 为什么 objectForKey:@"" 返回（null）？

> ID：15149305
> 
> 赞同：2
> 
> 时间：2013-03-01T02:12:31.620
> 
> 标签：ios, objective-c, indexing, nsarray, nsdictionary

我整天都在为此苦苦挣扎，不知道我做错了什么。我有一个`NSDictionary`

```
NSDictionary*dict=[tutorialsNodes objectAtIndex:0]; 
```

当我`NSLog(@"%@",dict);`返回以下...

```
{
nodeAttributeArray =     (
            {
        attributeName = class;
        nodeContent = style1;
    }
);
nodeChildArray =     (
            {
        nodeContent = "Number of Patrons Using Facility: 151";
        nodeName = text;
    },
            {
        nodeName = br;
    },
            {
        nodeContent = "
\n      Room Occupancy: 210 ";
        nodeName = text;
    },
            {
        nodeName = br;
    },
            {
        nodeContent = "
\n      Current Wait: 0 minutes ";
        nodeName = text;
    }
);
nodeName = p;
} 
```

但是，当我输入以下代码时...

```
NSArray*dictArray=[dict objectForKey:@"nodeChildArray"];
NSLog(@"%@",dictArray); 
```

它返回`null`。我正在尝试从`NodeChildArray`密钥中提取 nodeContent，但我什至无法提取密钥。不知道为什么它一直返回 null

修订

这是我正在执行的确切行...

```
//some HTML parsing before this
NSArray *tutorialsNodes = [tutorialsParser   
searchWithXPathQuery:tutorialsXpathQueryString];

NSDictionary*dict=[tutorialsNodes objectAtIndex:0];

NSArray*dictArray=[dict objectForKey:@"nodeChildArray"];

NSLog(@"%@",dictArray); 
```

它返回`null`两次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:11:35.070

根据您的评论：

> 当我打印 [dict allKeys] 时应用程序崩溃...我收到以下错误 *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[TFHppleElement allKeys]：无法识别的选择器已发送到 instanc

这就是为什么您无法根据 Key 提取值的原因。您正在从字典中获取 THppleElement。您需要再次[将此 TFHppleElement 解析为 NSDictionary](https://stackoverflow.com/questions/2860941/tfhppleelement-hpple-parsing-html-on-iphone)以获取所需的 valueForKey。

# ruby-on-rails - Rmagick 未能在 OSX Lion 上构建原生 gem

> ID：15149307
> 
> 赞同：3
> 
> 时间：2013-03-01T02:12:50.437
> 
> 标签：ruby-on-rails, rmagick

我正在尝试在我的画廊上工作，我需要安装 rmagick。但是我一直无法这样做，因为我收到了无法构建 gem 原生扩展的错误。我看过其他帖子，但他们的错误与我的不同。

我不知道如何让它工作。如果有人知道修复程序，那将有很大帮助！

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/lexi87/.rvm/rubies/ruby-1.9.3-p385/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
checking for /usr/local/bin/gcc-4.2... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for snprintf() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AcquireImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AffinityImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AffinityImages() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AutoGammaImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AutoLevelImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for BlueShiftImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for ConstituteComponentTerminus() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DeskewImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for EncipherImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for EqualizeImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for FloodfillPaintImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for FunctionImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetAuthenticIndexQueue() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetImageAlphaChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetVirtualPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelImageColors() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelColorsImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelizeImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LiquidRescaleImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for MagickLibAddendum() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for OpaquePaintImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for QueueAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for RemapImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for RemoveImageArtifact() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SelectiveBlurImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetImageAlphaChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetImageArtifact() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetMagickMemoryMethods() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SparseColorImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SyncAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for TransformImageColorspace() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for TransparentPaintImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for TransparentPaintImageChroma() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for QueryMagickColorname() new signature... yes
checking for Image.type in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.kerning in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.interline_spacing in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.interword_spacing in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DitherMethod in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for MagickFunction in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for ImageLayerMethod in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for long double in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AlphaChannelType.CopyAlphaChannel... yes
checking for AlphaChannelType.BackgroundAlphaChannel... yes
checking for CompositeOperator.BlurCompositeOp... yes
checking for CompositeOperator.DistortCompositeOp... yes
checking for CompositeOperator.LinearBurnCompositeOp... yes
checking for CompositeOperator.LinearDodgeCompositeOp... yes
checking for CompositeOperator.MathematicsCompositeOp... yes
checking for CompositeOperator.PegtopLightCompositeOp... yes
checking for CompositeOperator.PinLightCompositeOp... yes
checking for CompositeOperator.VividLightCompositeOp... yes
checking for CompressionType.DXT1Compression... yes
checking for CompressionType.DXT3Compression... yes
checking for CompressionType.DXT5Compression... yes
checking for CompressionType.ZipSCompression... yes
checking for CompressionType.PizCompression... yes
checking for CompressionType.Pxr24Compression... yes
checking for CompressionType.B44Compression... yes
checking for CompressionType.B44ACompression... yes
checking for DistortImageMethod.BarrelDistortion... yes
checking for DistortImageMethod.BarrelInverseDistortion... yes
checking for DistortImageMethod.BilinearForwardDistortion... yes
checking for DistortImageMethod.BilinearReverseDistortion... yes
checking for DistortImageMethod.DePolarDistortion... yes
checking for DistortImageMethod.PolarDistortion... yes
checking for DistortImageMethod.PolynomialDistortion... yes
checking for DistortImageMethod.ShepardsDistortion... yes
checking for DitherMethod.NoDitherMethod... yes
checking for FilterTypes.KaiserFilter... yes
checking for FilterTypes.WelshFilter... yes
checking for FilterTypes.ParzenFilter... yes
checking for FilterTypes.LagrangeFilter... yes
checking for FilterTypes.BohmanFilter... yes
checking for FilterTypes.BartlettFilter... yes
checking for FilterTypes.SentinelFilter... yes
checking for MagickEvaluateOperator.PowEvaluateOperator... yes
checking for MagickEvaluateOperator.LogEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdBlackEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdWhiteEvaluateOperator... yes
checking for MagickEvaluateOperator.GaussianNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.ImpulseNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.LaplacianNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.MultiplicativeNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.PoissonNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.UniformNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.CosineEvaluateOperator... yes
checking for MagickEvaluateOperator.SineEvaluateOperator... yes
checking for MagickEvaluateOperator.AddModulusEvaluateOperator... yes
checking for MagickFunction.ArcsinFunction... yes
checking for MagickFunction.ArctanFunction... yes
checking for MagickFunction.PolynomialFunction... yes
checking for MagickFunction.SinusoidFunction... yes
checking for ImageLayerMethod.FlattenLayer... yes
checking for ImageLayerMethod.MergeLayer... yes
checking for ImageLayerMethod.MosaicLayer... yes
checking for ImageLayerMethod.TrimBoundsLayer... yes
checking for VirtualPixelMethod.HorizontalTileVirtualPixelMethod... yes
checking for VirtualPixelMethod.VerticalTileVirtualPixelMethod... yes
checking for VirtualPixelMethod.HorizontalTileEdgeVirtualPixelMethod... yes
checking for VirtualPixelMethod.VerticalTileEdgeVirtualPixelMethod... yes
checking for VirtualPixelMethod.CheckerTileVirtualPixelMethod... yes
checking for ruby/io.h... yes
checking for rb_frame_this_func() in ruby.h,ruby/io.h... yes
creating extconf.h
creating Makefile

======================================================================
Thu 28Feb13 20:39:13
This installation of RMagick 2.13.2 is configured for
Ruby 1.9.3 (x86_64-darwin12.2.0) and ImageMagick 6.8.0 Q16 
======================================================================

make
compiling rmagick.c
compiling rmdraw.c
compiling rmenum.c
compiling rmfill.c
compiling rmilist.c
rmilist.c: In function ‘ImageList_map’:
rmilist.c:448: warning: ‘MapImages’ is deprecated (declared at /usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/magick/deprecate.h:200)
compiling rmimage.c
rmimage.c: In function ‘Image_map’:
rmimage.c:8159: warning: ‘MapImage’ is deprecated (declared at /usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/magick/deprecate.h:198)
rmimage.c: In function ‘Image_recolor’:
rmimage.c:10705: warning: ‘RecolorImage’ is deprecated (declared at /usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/magick/deprecate.h:140)
compiling rminfo.c
compiling rmmain.c
compiling rmmontage.c
compiling rmpixel.c
compiling rmstruct.c
compiling rmutil.c
rmutil.c: In function ‘rm_fatal_error_handler’:
rmutil.c:1612: warning: format not a string literal and no format arguments
rmutil.c: In function ‘handle_exception’:
rmutil.c:1652: warning: format not a string literal and no format arguments
linking shared-object RMagick2.bundle
ld: file not found: /usr/local/lib/libltdl.7.dylib for architecture x86_64
collect2: ld returned 1 exit status
make: *** [RMagick2.bundle] Error 1

Gem files will remain installed in /Users/lexi87/.rvm/gems/ruby-1.9.3-p385/gems/rmagick-2.13.2 for inspection.
Results logged to /Users/lexi87/.rvm/gems/ruby-1.9.3-p385/gems/rmagick-2.13.2/ext/RMagick/gem_make.out
An error occurred while installing rmagick (2.13.2), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.2'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:23:06.627

看起来您缺少一个名为的共享库`libltdl`，这是构建 gem 所必需的。快速的 Google 搜索显示这是由[libtool 包](http://www.gnu.org/software/libtool/manual/html_node/Using-libltdl.html)提供的。

1.  尝试安装 libtool 看看是否能解决问题。如果您有[Homebrew](http://mxcl.github.com/homebrew/)，则可以使用`brew install libtool`.

2.  显然，Mountain Lion 上有一个[已知问题](https://github.com/mroth/lolcommits/issues/65)，建议的解决方案是：将 XCode 更新到 4.4，更新 XCode 命令行工具，安装 XQuartz（可能不需要），最后：

    ```
    brew uninstall imagemagick
    brew install --fresh imagemagick 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T10:32:23.243

缺少的库由`libtool`包提供。您可以通过 brew 安装：

> 冲泡安装 libtool

安装后，您会收到以下消息：

> Xcode 4.2 及以下提供 glibtool。
> 
> 一般来说，这对您没有任何后果。如果您构建自己的软件并且它需要此公式，则需要添加到构建变量中：
> 
> ```
> LDFLAGS:  -L/usr/local/opt/libtool/lib
> CPPFLAGS: -I/usr/local/opt/libtool/include 
> ```

将这些环境变量添加到您当前的环境中：

```
export LDFLAGS="-L/usr/local/opt/libtool/lib"  
export CPPFLAGS="-I/usr/local/opt/libtool/include" 
```

然后再次安装 rmagick gem。我还将 XCode 命令行工具更新到最新版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:06:53.550

为了解决这个问题，我必须卸载然后重新安装 RVM。然后运行“brew install ruby​​”以获取最新版本。然后“捆绑”。

我希望这可以帮助其他遇到我所做的确切错误的人。

# php - 未捕获的 CurlException：77：设置证书验证位置时出错

> ID：15149308
> 
> 赞同：2
> 
> 时间：2013-03-01T02:12:49.980
> 
> 标签：php, facebook, curl

我不断收到同样的错误。我刚刚安装了 SSL，没有运气。我已经查看了所有其他帖子，但似乎没有一个解决方案对我有用。

有谁知道我应该做什么？

> 致命错误：未捕获的 CurlException：77：错误设置证书验证位置：CAfile：/etc/pki/tls/certs/ca-bundle.crt CApath：/home/acmesoft/public_html/Oddsmaker/php_sdk/base_facebook.php 中没有抛出第 977 行

```
if ($result === false) {
  $e = new FacebookApiException(array(
    'error_code' => curl_errno($ch),
    'error' => array(
    'message' => curl_error($ch),
    'type' => 'CurlException',
    ),
  ));
  curl_close($ch);
  throw $e;
}
curl_close($ch);
return $result; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-04T01:52:00.047

Riyanto Wibowo 的反应很危险，因为您实际上是在关闭 SSL。小心走那条路。从[对 php 手册的评论](http://php.net/manual/en/function.curl-setopt.php#110457)：

> 请大家停止将 CURLOPT_SSL_VERIFYPEER 设置为 false 或 0。如果您的 PHP 安装没有最新的 CA 根证书捆绑包，请在 curl 网站上下载该捆绑包并将其保存在您的服务器上：
> 
> [http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)
> 
> 然后在你的 php.ini 文件中设置它的路径，例如在 Windows 上：
> 
> curl.cainfo=c:\php\cacert.pem
> 
> 关闭 CURLOPT_SSL_VERIFYPEER 允许中间人 (MITM) 攻击，这是您不想要的！

我会将此作为评论发布，但我没有足够的声誉。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T14:49:39.547

我和你有同样的错误，这个问题已经解决了，我只是把这 2 行

```
Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;
Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 2; 
```

在您的 Facebook 应用程序定义之后

```
$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'xxx',
  'cookie' => true,
  'perms' => 'publish_stream,read_stream,email',
  'domain' => 'example.com'
)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T07:21:24.013

您只需要将 fb_ca_chain_bundle.crt 与 base_facebook.php 放在同一文件夹中。你可以在这里得到它：[https ://github.com/facebook/facebook-php-sdk/blob/master/src/fb_ca_chain_bundle.crt](https://github.com/facebook/facebook-php-sdk/blob/master/src/fb_ca_chain_bundle.crt)

# actionscript-3 - FLEX 高清采集卡部分视频

> ID：15149313
> 
> 赞同：0
> 
> 时间：2013-03-01T02:13:27.383
> 
> 标签：actionscript-3, apache-flex

当我使用高清采集卡（1080i）采集视频时，只采集了部分视频，但我使用USB采集（EasyCAP），它采集了相机的完整视频。

```
 cam=Camera.getCamera(); 
            if(cam != null){
                cam.setMode(480,360,15,true);
                cam.setQuality(0,100);
            }

            video = new Video();
            video.width = cam.width;
            video.height = cam.height;
            video.attachCamera(cam);
            vdDisplay.addChild(video); 
```

如何捕获全尺寸的相机视频并在 VideoDisplay 中显示，尺寸为 480 x 360？

# google-chrome-extension - 执行 Chrome 扩展 onclick 而不是页面加载

> ID：15149322
> 
> 赞同：15
> 
> 时间：2013-03-01T02:14:08.310
> 
> 标签：google-chrome-extension

我创建了一个按预期工作的 Chrome 扩展程序，除了它仅在我加载与清单中的条件匹配的页面时执行。我已经尝试了几个小时通过单击扩展图标来使其执行无济于事。

我最接近我想要的是我已经能够使扩展图标单击以运行代码，但是它不会在加载的页面上运行它。它在扩展的空间而不是页面 DOM 上运行它。

在当前状态下，我的代码仅在指定域中的页面打开时运行。我只想在它匹配该规则时运行它，但只有当我单击扩展图标时。

这是我的代码： **manifest.json**

```
 {
        "name": "Get Response URL",
        "version": "1.0",
        "manifest_version": 2,
        "browser_action": {
        "default_icon": "mkto_icon.png",
        "name": "Click to get URL"
        },
        "content_scripts": [{
            "js": ["contentscript.js"],
            "matches": ["http://mydomain.com/*"]
        }]
    } 
```

**内容脚本.js**

```
 if (document.getElementsByName("returnURL")){
        alert("\nThe Response URL on this form is:\n\n" + document.getElementsByName("returnURL")[0].value);
    } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-01T06:26:57.090

正如我所见，你想在什么时候运行代码

*   用户点击了浏览器操作图标和
*   URL 模式是匹配的

如果是这样，您已将背景页面与 Tabs API 结合使用。

# 示范

这是您的用例的示例演示，您可以放置​​所有代码并为所有匹配 URL 分配权限。

### 清单.json

已注册背景页面、浏览器操作和目标页面的权限。

```
{
        "name": "Get Response URL",
        "version": "1.0",
        "manifest_version": 2,
        "browser_action": {
        "name": "Click to get URL"
        },
        "background":{
            "scripts":["background.js"]
        },
        "permissions":["https://www.google.co.in/*"] //Put All your URL here
 } 
```

### 背景.js

将所有 Your Target Matching URL 放入一系列 if 条件中

```
chrome.browserAction.onClicked.addListener(function (tab) { //Fired when User Clicks ICON
    if (tab.url.indexOf("https://www.google.co.in/") != -1) { // Inspect whether the place where user clicked matches with our list of URL
        chrome.tabs.executeScript(tab.id, {
            "file": "contentscript.js"
        }, function () { // Execute your code
            console.log("Script Executed .. "); // Notification on Completion
        });
    }
}); 
```

### 内容脚本.js

```
alert("Code Executed ... "); 
```

# 输出

当您浏览到[https://www.google.co.in/](https://www.google.co.in/)并单击浏览器操作后，您会在页面中看到警报。

# 参考

*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:29:17.570

使用 browserAction API，见[这里](https://developer.chrome.com/extensions/browserAction.html)

onClick 事件可能会对您有所帮助。还可以从谷歌查看[这些示例](https://developer.chrome.com/extensions/samples.html#cb771f28a910d79a2fcfeb1c5be6983b)：

# ruby - 当引用由不同的对象持有时如何确保文件关闭

> ID：15149325
> 
> 赞同：4
> 
> 时间：2013-03-01T02:14:43.577
> 
> 标签：ruby, nokogiri

在 Ruby 中，当对打开文件的引用被传递给另一个对象时，如以下代码所示，我是否需要将另一个对象引用包装在“ `begin`/ `ensure`”块中，以确保非托管资源被关闭，或者是否有另一个方式？

```
@doc = Nokogiri::XML(File.open("shows.xml"))

@doc.xpath("//character")
# => ["<character>Al Bundy</character>",
#    "<character>Bud Bundy</character>",
#    "<character>Marcy Darcy</character>",
#    "<character>Larry Appleton</character>",
#    "<character>Balki Bartokomous</character>",
#    "<character>John "Hannibal" Smith</character>",
#    "<character>Templeton "Face" Peck</character>",
#    "<character>"B.A." Baracus</character>",
#    "<character>"Howling Mad" Murdock</character>"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T02:37:30.380

一般来说，不用担心打开单个文件是可以的，如果没有其他东西会尝试写入它，并且您的程序不是一个长时间运行的应用程序。Ruby 将在文件关闭并退出时关闭该文件。（我怀疑如果操作系统看到文件已打开，它也会这样做，但如果不进入低级调试器或深入研究操作系统的代码，这将很难测试。）

但是，如果您对此感到担心，我建议您使用块形式，`File.open`因为它会在您的代码退出块时自动关闭文件：

```
require 'nokogiri'

doc = ''
File.open('./test.html', 'r') do |fi|
  doc = Nokogiri::HTML(fi)
end

puts doc.to_html 
```

* * *

因为我很好奇并且一直想知道，所以我做了一个小测试。我将一些 HTML 保存到一个名为“test.html”的文件中，并在 IRB 中运行它：

```
test.rb(main):001:0> require 'nokogiri'
=> true
test.rb(main):002:0> page = File.open('test.html', 'r')
=> #<File:test.html>
test.rb(main):003:0> page.eof?
=> false
test.rb(main):004:0> page.closed?
=> false
test.rb(main):005:0> doc = Nokogiri::HTML(page)
=> #<Nokogiri::HTML::Document:0x3fc10149bc98 name="document" children=[#<Nokogiri::XML::DTD:0x3fc10149b6f8 name="html">, #<Nokogiri::XML::Element:0x3fc10149ef60 name="html" children=[#<Nokogiri::XML::Element:0x3fc10149ed58 name="head" children=[#<Nokogiri::XML::Element:0x3fc10149eb50 name="title" children=[#<Nokogiri::XML::Text:0x3fc10149e948 "Example Domain">]>, #<Nokogiri::XML::Element:0x3fc10149e740 name="meta" attributes=[#<Nokogiri::XML::Attr:0x3fc10149e6dc name="charset" value="utf-8">]>, #<Nokogiri::XML::Element:0x3fc10149e218 name="meta" attributes=[#<Nokogiri::XML::Attr:0x3fc10149e1b4 name="http-equiv" value="Content-type">, #<Nokogiri::XML::Attr:0x3fc10149e1a0 name="content" value="text/html; charset=utf-8">]>, #<Nokogiri::XML::Element:0x3fc10149da98 name="meta" attributes=[#<Nokogiri::XML::Attr:0x3fc10149da34 name="name" value="viewport">, #<Nokogiri::XML::Attr:0x3fc10149da20 name="content" value="width=device-width, initial-scale=1">]>, #<Nokogiri::XML::Element:0x3fc10149d318 name="style" attributes=[#<Nokogiri::XML::Attr:0x3fc10149d2b4 name="type" value="text/css">] children=[#<Nokogiri::XML::CDATA:0x3fc1014a0dd8 "\n\tbody {\n\t\tbackground-color: #f0f0f2;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tfont-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n\n\t}\n\tdiv {\n\t\twidth: 600px;\n\t\tmargin: 5em auto;\n\t\tpadding: 3em;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 1em;\n\t}\n\ta:link, a:visited {\n\t\tcolor: #38488f;\n\t\ttext-decoration: none;\n\t}\n\t@media (max-width: 600px) {\n\t\tbody {\n\t\t\tbackground-color: #fff;\n\t\t}\n\t\tdiv {\n\t\t\twidth: auto;\n\t\t\tmargin: 0 auto;\n\t\t\tborder-radius: 0;\n\t\t\tpadding: 1em;\n\t\t}\n\t}\n\t">]>]>, #<Nokogiri::XML::Element:0x3fc1014a0aa4 name="body" children=[#<Nokogiri::XML::Text:0x3fc1014a089c "\n">, #<Nokogiri::XML::Element:0x3fc1014a07c0 name="div" children=[#<Nokogiri::XML::Text:0x3fc1014a05b8 "\n\t">, #<Nokogiri::XML::Element:0x3fc1014a04dc name="h1" children=[#<Nokogiri::XML::Text:0x3fc1014a02d4 "Example Domain">]>, #<Nokogiri::XML::Text:0x3fc1014a00cc "\n\t">, #<Nokogiri::XML::Element:0x3fc10149fff0 name="p" children=[#<Nokogiri::XML::Text:0x3fc10149fde8 "This domain is established to be used for illustrative examples in documents. You do not need to\n\t\tcoordinate or ask for permission to use this domain in examples, and it is not available for\n\t\tregistration.">]>, #<Nokogiri::XML::Text:0x3fc10149fbe0 "\n\t">, #<Nokogiri::XML::Element:0x3fc10149fb04 name="p" children=[#<Nokogiri::XML::Element:0x3fc10149f8fc name="a" attributes=[#<Nokogiri::XML::Attr:0x3fc10149f898 name="href" value="http://www.iana.org/domains/special">] children=[#<Nokogiri::XML::Text:0x3fc10149f3d4 "More information...">]>]>, #<Nokogiri::XML::Text:0x3fc1014a309c "\n">]>, #<Nokogiri::XML::Text:0x3fc1014a2e94 "\n">]>]>]>
test.rb(main):006:0> page.eof?
=> true
test.rb(main):007:0> page.closed?
=> false
test.rb(main):008:0> page.close
=> nil
test.rb(main):009:0> page.closed?
=> true 
```

因此，换句话说，Nokogiri 不会*关闭*打开的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:21:49.663

我相信 Nokogiri 会在读取文件后立即关闭文件，但是如何安全并替换`File.open`为`File.read`

* * *

不，正如铁皮人指出的那样，Nokogiri 在读取文件句柄后并没有关闭它。处理它的正确方法仍然是：

```
doc = Nokogiri::XML File.read("shows.xml") 
```

# cordova - 使用 Apache Cordova 从相机胶卷中的图片获取 EXIF 数据

> ID：15149328
> 
> 赞同：0
> 
> 时间：2013-03-01T02:15:09.343
> 
> 标签：cordova, ibm-mobilefirst

环境：

*   工作灯 v5.0.5
*   iOS6

有没有办法从使用 Cordova(worklight bundle) Camera API 检索的照片中获取 EXIF 数据？

似乎 Cordova 在获取 EXIF 时遇到问题 [https://issues.apache.org/jira/browse/CB-1285](https://issues.apache.org/jira/browse/CB-1285)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:34:13.910

由于 Worklight 中的相机访问由 Cordova 处理，这是一个 Cordova 错误……这个问题实际上与 Worklight 无关。一旦 Cordova 提供了解决方法，您就可以自由地实施它。

请注意，Worklight 当前捆绑了 Cordova 2.2（以及即将发布的 5.0.6 版本中的 2.3）。此错误的修复计划用于 Cordova 2.5 或更高版本...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:48:02.613

如果您可以将图像作为 DOM 对象获取，Jacob Seidelin 发布了一个纯 Javascript EXIF 阅读器：

[http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html](http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html)

这可以与允许您检索图像数据的 Cordova Camera API 相关联：

[http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#camera.getPicture)

因此，将这些页面中的这两个示例合并在一起，您最终可能会得到以下内容：

```
navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: Camera.DestinationType.DATA_URL
 }); 

function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
    alert("Camera make: " + EXIF.getTag(image , "Make"));
}

function onFail(message) {
    alert('Failed because: ' + message);
} 
```

这对你有用吗？

# c - 从文件 C 中的单行读取多个变量类型

> ID：15149330
> 
> 赞同：0
> 
> 时间：2013-03-01T02:15:15.363
> 
> 标签：c, string, file, input, strtok

好吧，我整天都在做这件事，我这辈子都无法理解，也许你们可以帮忙。我有一个文件，内容如下

> 1301,105515018,"水手长","迈克尔 R.",ABC, 123,="R01"
> 
> 1301,103993269,"卡斯蒂利亚","小迈克尔",ABC, 123,="R03"
> 
> 1301,103993267,"卡斯蒂利亚","珍妮丝",ABC, 123,="R03"
> 
> 1301,104727546,"Bonczek","克劳德",ABC, 123,="R01"
> 
> 1301,104731479,"克鲁兹","阿基姆迈克",ABC, 123,="R01"
> 
> 1301,105415888,"Digiacomo","斯蒂芬",ABC, 123,="R02"
> 
> 1301,106034479,"Annitto Grassis","苏珊",ABC, 123,="R04"
> 
> 1301,106034459,"Als","Christian",ABC, 123,="R01"

这是我的代码...

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_NAME 15
#define MAX_SUBSEC 3
#define N 128

//void printArr(struct *students);

struct student{

int term;
int id;
char lastname[MAX_NAME];
char firstname[MAX_NAME];
char subjectname[MAX_SUBSEC];
int catalog;
char section[MAX_SUBSEC];

}students[10];

int main(){

int term;
int id;
char lastname[MAX_NAME];
char firstname[MAX_NAME];
char sub[MAX_SUBSEC];
int cat;
char sec[MAX_SUBSEC];

char fname[N];
FILE *inputf;

printf("Enter the name of the text file: ");
scanf("%123s",fname);

strcat(fname,".txt");

inputf = fopen(fname,"r");

if (inputf == NULL){

     printf("I couldn't open the file for reading.\n");
     exit(0);

}
//TROUBLE HERE!

fscanf(inputf, "%d,%d,%[^,]s", &students[0].term, &students[0].id,students[0].lastname);

printf("%d\n", students[0].term);

printf("%d\n", students[0].id);

printf("%s\n", students[0].lastname);

/*for (j = 1 ; j <= 10-1 ; j++){

    for(k = 0 ; k <= 10-2 ; k++){

        if(students[k] > students[k+1]){

            temp = students[k];
            students[k] = students[k+1];
            students[k+1] = temp;

            }
        }
    }*/

fclose(inputf);

system("pause");

return 0;

}

void printArr(int a[], int tally){

int i;

for(i = 0 ; i < tally ; i++){

 printf("%d ", a[i]);

}

printf("\n");

} 
```

我的目标是获取文本文件中的每个值并将其输入到它在结构中所属的位置，然后输入到结构数组中，但我无法通过前 2 个整数。

获取 lastname 字符串，因为它最多为 15 个字符，它会溢出到它之后的名字字符串，并获取它需要的剩余字符以填充 lastname char 数组。显然我不想要这个。如您所见，我尝试过 strtok 但它没有做任何事情，但不确定我必须做什么，因为我以前从未使用过它。也尝试过将所有变量都包含到 fscanf 语句中，但我要么得到相同的输出，要么变得一团糟。实际上，我非常迷茫，如何将这些值放入它们所属的变量中？！

编辑：更新了我的代码，我已经走得更远了，但不多。我现在可以只打印出姓氏，但不能更远，我无法得到名字字符串或超出它的任何变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-04T07:25:53.670

使用`fscanf`格式字符串`"%d,%d,\"%[^\"]\",\"%[^\"]\",%[^,],%d,=\"%[^\"]\""`，我们可以读取整行的数据。此外，您必须定义

```
char lastname[MAX_NAME+1];
char firstname[MAX_NAME+1];
char subjectname[MAX_SUBSEC+1];
int catalog;
char section[MAX_SUBSEC+1]; 
```

—`+1`解释终止字符 '\0'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:08:09.667

你有一个带引号的字符串的 CSV 文件，所以我建议你使用 CSV 解析器（或滚动你自己的）而不是尝试全部使用`scanf`（因为`scanf`无法处理引号，例如引号字符串中的逗号）。一个快速的谷歌搜索出现了[libcs​​v.c](http://amath.colorado.edu/courses/management/libcsv.c)，你可以在你的项目中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:15:24.837

我有一个问题要问你……如果你想知道如何使用金刚石切割机，你是试试看，还是查阅手册？这里的问题不是你选择的结果，而是你的选择本身。信不信由你，我已经多次回答这些问题，以至于我厌倦了重复自己。答案都在手册中。

阅读[POSIX 2004`scanf`手册](http://pubs.opengroup.org/onlinepubs/000095399/functions/fscanf.html)— 或[POSIX 2008/2013 版本](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fscanf.html)— 并回答[这个问题](https://stackoverflow.com/questions/14472004/how-to-use-fgets-and-sscanf-for-integers-in-loop/14472455#14472455)，你就会对你应该做的事情有所了解。甚至`fscanf`代码也应该`assert`用作调试辅助，以确保读取的项目数是正确的。

`%[^,]s`这里似乎有一个错误。也许你的意思是`%[^,]`。`%[`格式说明符是与格式说明符不同的格式说明符`%s`，因此在可能错误的代码中有两个指令：`%[^,]`和`s`. 该`s`指令告诉`scanf`读取's'并丢弃它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T03:04:43.307

1.有语法错误

```
while(result != NULL){

      printf(".....);

      ......

}

}//error 
```

1.  `fscanf(inputf, "%s", lastname);` 看不懂一行，`fscanf`遇到空格就会停下

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T04:55:39.263

fscanf 一次读取一行，您可以轻松捕获每一行的内容，因为您的文件格式非常好，特别是由于逗号分隔（如果您的分隔值都不包含逗号，则非常有用）。

您可以传递 fscanf 一种格式，就像您使用 "%d" 来捕获一个 int，使用 "%s" 来捕获一个字符串（以空格结尾，例如在尝试查找像“Annitto”这样的名称时要厌倦这一点Grassis，这将需要 2 %s) 等，从文件的当前读取行。您可以更高级并使用正则表达式模式来定义要捕获为字符的内容，例如“Boatswain”，一个由字符组成的序列来自集合 {AZ}、{az} 和 {"}。您需要扫描文件直到到达末尾（在 C 中由 EOF 表示），这样您就可以这样做并捕获该行的内容并将值适当地分配给如下变量：

> while( fscanf(inputf, "%d,%d,%[\"A-Za-z ],%[\"A-Za-z .]", &term, &id, lastname, firstname) != EOF) {
> 
> .... //对 term、id、lastname、firstname 做一些事情——把它们放在一个学生结构中
> 
> }

有关 regex 的更多信息， Jeff Friedl 的*Mastering Regex*是一本学习该主题的好书。

# php - 如何添加到 .json 文件中的 JSON 数组

> ID：15149331
> 
> 赞同：1
> 
> 时间：2013-03-01T02:15:19.613
> 
> 标签：php, json, file, arrays

如何使用 PHP 添加到 .json 文件？目前，我正在使用 PHP 附加一个 .json 文件，但它不会将数据添加到现有的 JSON 对象。它创建了一个新对象。我需要将数据全部存储在一个对象中，在一个外部 JSON 文件中。基本上，我有一个 JSON 对象，并想向它添加更多值。

```
$jsonFile = "test.json";
$fh = fopen($jsonFile, 'w');

$json = json_encode(array("message" => $name, "latitude" => $lat, "longitude" => $lon, "it" => $it));

fwrite($fh, $json); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T02:45:01.067

您可以将 json 文件解码为 php 数组，然后插入新数据并再次保存。

```
<?php
$file = file_get_contents('data.json');
$data = json_decode($file);
unset($file);//prevent memory leaks for large json.
//insert data here
$data[] = array('data'=>'some data');
//save the file
file_put_contents('data.json',json_encode($data));
unset($data);//release memory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-09T08:21:57.917

上面的建议是艰难的。我正在考虑应该有一种更简单的方法，将数组逐字附加到 json 文件中。

这是算法：

```
$handle=fopen($jsonFile);
fseek($handle,-1,SEEK_END);
fwrite($handle,$arrayToAdd);
fclose($handle); 
```

但我不确定这样做是否比将整个 json 文件读入内存、添加数组然后存储它更有效。

# spring - 在 CloudFoundry 中激活除“云”之外的 Spring Profiles

> ID：15149332
> 
> 赞同：1
> 
> 时间：2013-03-01T02:15:23.680
> 
> 标签：spring, cloud-foundry

我知道在 CloudFoundry 上允许使用云配置文件，但是是否可以激活多个配置文件？按照这些思路，是否可以指定在云配置文件之外激活的配置文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T05:56:09.717

答案是肯定的。Cloud Foundry 隐式接受名为“cloud”的配置文件，但您始终可以激活您的应用程序应该使用的任何配置文件。有多种方法可以做到这一点，其中我更喜欢使用 vmc 客户端来设置系统属性：

```
vmc set-env APP JAVA_OPTS "-Dspring.profiles.active=cloud,cloud2" 
```

有关bean定义配置文件概念和使用的更多详细信息，请参阅此处的文档：http: [//blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

# javascript - js，设置不加载浏览器上的拖放文件

> ID：15149333
> 
> 赞同：2
> 
> 时间：2013-03-01T02:15:34.843
> 
> 标签：javascript, jquery, drag-and-drop

我想得到帮助来检查我的例子。

[http://jsfiddle.net/fantill/J3Mms/7/](http://jsfiddle.net/fantill/J3Mms/7/)

我只想在文件放在 div 上时简单地运行警报。

```
$('#a').on('dropover', function(e){
    e.preventDefault();
    alert(1);
}); 
```

但是，当我删除文件时，浏览器只会读取并将页面更改为文件的内容......

我真的不知道我错过了什么以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:21:09.390

它`dragover`不是`dropover`

```
$('#a').on('dragover', function(e){
    e.preventDefault();
    alert(1);
}); 
```

[http://jsfiddle.net/J3Mms/8/](http://jsfiddle.net/J3Mms/8/)

# facebook-apps - 无法创建 Facebook 应用

> ID：15149335
> 
> 赞同：3
> 
> 时间：2013-03-01T02:15:36.687
> 
> 标签：facebook-apps, facebook-app-requests

第一次尝试创建 Facebook 应用程序。浏览到[https://developers.facebook.com/apps](https://developers.facebook.com/apps)，它有一个用于注册的链接，然后再创建一个您接受 T&C 的链接。现在它说，“创建一个应用程序开始......”但是没有按钮可以点击创建应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T03:56:30.493

**我刚才**遇到了同样的问题。我有一个经过验证的个人帐户（电子邮件和信用卡），但我看不到按钮。这就是我得到的： ![在此处输入图像描述](../Images/dbef16d0a0f16419ccc6ad5c99c920b4.png)

在阅读了 5 个小时的类似问题后，我不知所措，开始拔睫毛……因为我没有头发。我试过了：

*   关闭 AdBlock
*   在多个浏览器和操作系统中进行测试
*   使用 Chrome Inspector 检查该区域...出现了一个空的#DeveleperAppDashHeader div
*   向雨神祈祷

最终，我变得如此绝望，以至于我开始输入随机网址，而这个来自奥丁乌鸦的网址奏效了：http: [//developers.facebook.com/setup](http://developers.facebook.com/setup)

它会创建一个弹出窗口，让您开始滚动。让我知道这是否有效，因为我该死的几乎准备好兴奋地拱起我的椅子了。

另外，我怀疑这是一个错误......因为如果我可以使用此链接而不是通过开发仪表板创建一个应用程序，那么就会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-02T22:43:39.747

以下是有关如何创建新应用程序的说明 - [http://ftutorials.com/create-facebook-app/](http://ftutorials.com/create-facebook-app/)

首先，您应该检查您是否尝试从企业帐户创建新应用程序。您只能从真实用户的 Facebook 帐户创建新应用程序。

还有一些 facebook 错误，在您单击“创建应用程序”后，没有任何反应，但您的应用程序已创建。

# ruby-on-rails - 身份验证测试 - Rails 无法识别登录方法

> ID：15149337
> 
> 赞同：0
> 
> 时间：2013-03-01T02:15:48.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在研究 M. Hartl 的 Rails 教程，并且已经到了无法理解为什么我的身份验证测试无法通过的地步。我的应用程序在此时应该在各个方面工作，我想知道为什么测试继续失败。

我对 Rails 还是很陌生，如果我可以发布任何其他元素来帮助使情况更清楚，请告诉我。

斯图尔特

错误信息：

```
Failures:

1) Authentication signin with valid information 
 Failure/Error: it { should have_selector('title', text: user.name) }
   expected css "title" with text "Stuart Culpepper" to return something
 # ./spec/requests/authentication_pages_spec.rb:33:in `block (4 levels) in <top (required)>'

2) Authentication signin with valid information 
 Failure/Error: it { should have_link('Settings', href: edit_user_path(user)) }
   expected link "Settings" to return something
 # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

3) Authentication signin with valid information 
 Failure/Error: it { should have_link('Profile', href: user_path(user)) }
   expected link "Profile" to return something
 # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

4) Authentication signin with valid information 
 Failure/Error: it { should_not have_link('Sign in', href: signin_path) }
   expected link "Sign in" not to return anything
 # ./spec/requests/authentication_pages_spec.rb:37:in `block (4 levels) in <top (required)>'

5) Authentication signin with valid information 
 Failure/Error: it { should have_link('Sign out', href: signout_path) }
   expected link "Sign out" to return something
 # ./spec/requests/authentication_pages_spec.rb:36:in `block (4 levels) in <top (required)>' 
```

我的身份验证 Rspec：

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
before { visit signin_path }

it { should have_selector( 'h1', text: 'Sign in' )}
it { should have_selector( 'title', text: 'Sign in' )}
  end

  describe "signin" do
before { visit signin_path }

  describe "with invalid information" do
    before { click_button "Sign in" }

    it { should have_selector( 'title', text: 'Sign in' )}
    it { should have_error_message('Invalid') }

    describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_error_message( 'invalid')}
  end
 end

   describe "with valid information" do
     let(:user) { FactoryGirl.create(:user) }
     before { valid_signin(user) }

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Settings', href: edit_user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" 
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end
end

end 
```

我的 Rrpec/Support/Utilities.rb

```
include ApplicationHelper

def valid_signin(user)
fill_in "Email",    with: user.email
fill_in "Password", with: user.password
click_button "Sign in"
end

RSpec::Matchers.define :have_error_message do |message|
match do |page|
    page.should have_selector('div.alert.alert-error', text: message)
end
end

def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

会话控制器

```
class SessionsController < ApplicationController

def new
    @title = "Sign in"
end

def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_to user
    else
        flash.now[:error] = "Invalid email/password combination"
        @title = "Sign in"
    render 'new'
  end
end

def destroy
    sign_out
    redirect_to root_url
end
end 
```

路由.rb

```
SampleApp3::Application.routes.draw do
  resources :users
  resources :sessions, only: [ :new, :create, :destroy ]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  root to: 'static_pages#home'

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'  
end 
```

应用程序/视图/会话/new.html.erb

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>

<div class="row">
    <div class="span6 offset3">
            <%= form_for(:session, url: sessions_path) do |f| %>

            <%= f.label :email %>
            <%= f.text_field :email %>

            <%= f.label :password %>
            <%= f.text_field :password %>

            <%= f.submit "Sign in", class: "btn btn-large btn-primary" %>
        <% end %>

        <p>New user? <%= link_to "Sign up now!", signup_path %><p>
    </div>
</div> 
```

app/spec/requests/user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "after submission" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
    end
  end

  describe "edit" do
  let(:user) { FactoryGirl.create(:user) }
    before { visit edit_user_path(user) }

  describe "page" do
    it { should have_selector( 'h1', text: "Update your profile" ) }
    it { should have_error_message('title', text: "Edit user") }
    it { should have_link( 'change', href: 'http://gravatar.com/emails') }
  end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content( 'error' ) }
  end
 end
end 
```

# ruby-on-rails - Rails 自动完成 jquery 搜索

> ID：15149339
> 
> 赞同：0
> 
> 时间：2013-03-01T02:16:12.140
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, jquery-autocomplete

我正在尝试自动完成搜索，唯一的问题是我正在获取两个信息。我正在关注这里的教程[http://railscasts.com/episodes/102-auto-complete-association-revised](http://railscasts.com/episodes/102-auto-complete-association-revised)

这里的问题

```
 def index
    @titles = Event.order(:title).where("title like ?", "%#{params[:term]}%")
    @customers = Customer.order(:first_name).where("first_name like ?", "%#{params[:term]}%")
    render json: @titles.map(&:title)
    render json: @customers.map(&:title)
  end 
```

如果两者都包含一些东西，我怎么能返回这两个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:23:49.373

您必须创建一个包含这两种信息的 JSON 对象，如下所示：

```
respond_to do |format|
  format.json { render json: {titles: @titles.map(&:title), customers: @customers.map(&:title)} }
end 
```

没有测试过，但它应该可以工作。

# c++ - 多线程客户端未从服务器接收消息

> ID：15149340
> 
> 赞同：0
> 
> 时间：2013-03-01T02:16:25.317
> 
> 标签：c++, sockets, client-server, client-side

我有一个多客户端服务器程序。客户端控制台将需要等待用户输入要发送到服务器的消息，并且客户端还需要始终可以接收来自服务器的消息（这种情况会间歇性地发生）。为了做到这一点，我尝试在客户端设置两个线程，一个用于接收，一个用于发送。

最初，客户端程序（我从[这里](http://www.codeproject.com/Articles/7785/Single-Server-With-Multiple-Clients-a-Simple-C-Imp)下载）旨在向服务器发送消息并立即接收回消息。这是初始代码（我没有在此处包含函数，因为我知道它们可以工作，并且函数名称是不言自明的）：

```
int main()
{
//initialize the winsock library
myTcpSocket::initialize();

//get client's information 
string clientName = clientInfo.getHostName();
string clientIPAddress = clientInfo.getHostIPAddress();

//get server's IP address and name
string serverIPAddress = "";
readServerConfig(serverIPAddress);

myHostInfo serverInfo(serverIPAddress,ADDRESS);
string serverName = serverInfo.getHostName();

//create the socket for client
myTcpSocket myClient(PORTNUM);

// connect to the server.
myClient.connectToServer(serverIPAddress, ADDRESS);

int recvBytes = 0;
while (1)
{
    // send message to server
    char messageToServer[MAX_MSG_LEN+1];
    memset(messageToServer, 0, sizeof(messageToServer));
    cout << "[SEND] ";
    cin.getline(messageToServer,MAX_MSG_LEN);

    winLog << "[SEND] " << messageToServer << endl;
    myClient.sendMessage(string(messageToServer));

    if ( !string(messageToServer).compare("Quit") || !string(messageToServer).compare("quit") ) 
        break;

    //receive message from server
    string messageFromServer = "";
    recvBytes = myClient.receiveMessage(messageFromServer);
    if ( recvBytes == -99 ) break;

    cout   << "[RECV:" << serverName << "]: " << messageFromServer << endl;
    winLog << "[RECV:" << serverName << "]: " << messageFromServer << endl;

}

return 1;
} 
```

此代码有效，但由于服务器在接收到消息时并不总是有消息要发送回客户端，因此这会阻止客户端的进程，这就是我使用如下多线程结构的原因（函数不是由于上述原因而包括在内），将接收和发送功能分离到不同的线程中：

```
DWORD WINAPI sendHandleThread(LPVOID threadInfo) //sending thread
{
//this structure contains all the data this callback will work on
myThreadArgument* sendArgument = (myThreadArgument*)threadInfo;

//create the socket for client
myTcpSocket myClient(PORTNUM); //PORTNUM = 1200

// connect to the server.
string serverIPAddress = "";
readServerConfig(serverIPAddress);
myClient.connectToServer(serverIPAddress, ADDRESS);

myHostInfo serverInfo(serverIPAddress,ADDRESS);
string serverName = serverInfo.getHostName();

int recvBytes = 0;

while (1)
{
    // send message to server
    char messageToServer[MAX_MSG_LEN+1];
    memset(messageToServer, 0, sizeof(messageToServer));
    cout << "[SEND] ";
    cin.getline(messageToServer,MAX_MSG_LEN);

    winLog << "[SEND] " << messageToServer << endl;
    myClient.sendMessage(string(messageToServer));

    if ( !string(messageToServer).compare("Quit") || !string(messageToServer).compare("quit") ) 
        break;
}
return 1;
}

DWORD WINAPI recHandleThread(LPVOID threadInfo) //receiving thread
{
//this structure contains all the data this callback will work on
myThreadArgument* recArgument = (myThreadArgument*)threadInfo;

//create the socket for client
myTcpSocket myClient(PORTNUM); //PORTNUM = 1200

// connect to the server.
string serverIPAddress = "";
readServerConfig(serverIPAddress);
myClient.connectToServer(serverIPAddress, ADDRESS);

myHostInfo serverInfo(serverIPAddress,ADDRESS);
string serverName = serverInfo.getHostName();

int recvBytes = 0;

while (1)
{
    //receive message from server
    string messageFromServer = "";
    recvBytes = myClient.receiveMessage(messageFromServer);
    if ( recvBytes == -99 ) break;

    cout   << "[RECV:" << serverName << "]: " << messageFromServer << endl;
    winLog << "[RECV:" << serverName << "]: " << messageFromServer << endl;
}
return 1;
}

int main()
{
//semaphore
mySemaphore coutSemaphore(string(""), 1);

//initialize the winsock library
myTcpSocket::initialize();

//get client's information (assume neither the name nor the address is given)
string clientName = clientInfo.getHostName();
string clientIPAddress = clientInfo.getHostIPAddress();

//get server's IP address and name
string serverIPAddress = "";
readServerConfig(serverIPAddress);

myHostInfo serverInfo(serverIPAddress,ADDRESS);
string serverName = serverInfo.getHostName();

//create sending thread
myTcpSocket send;
string sendName = "sendName";
myThreadArgument* sendArgument = new myThreadArgument(&send, &coutSemaphore, sendName);
myThread* sendThread = new myThread(sendHandleThread, (void*)sendArgument);
sendThread->execute();

//create receiving thread
myTcpSocket rec;
string recName = "recName";
myThreadArgument* recArgument = new myThreadArgument(&rec, &coutSemaphore, recName);
myThread* recThread = new myThread(recHandleThread, (void*)recArgument);
recThread->execute();

while (1)
{

    //dummy process
    Sleep(30000);
    cout << "--" << endl;

}

return 1;
} 
```

我已经测试过我已经正确设置了线程 - 但只有我的发送线程工作，即当用户输入消息时，它将被发送到服务器并由服务器接收。但是，我似乎无法从我的服务器接收消息。

我对此很陌生-我做错了什么吗？抱歉，如果问题不够清楚 - 我不知道还需要什么。

我的服务器代码的相关片段在这里供参考（我不知道是否需要更多，因为服务器部分似乎按照我需要的方式工作） - 目前我已经设置它进行测试，以便当它收到来自客户端的消息，它会立即“回复”（这样我就可以在我的客户端上测试接收线程）。随后它不会立即回复，但只有当它有消息要传递给客户端时。

```
DWORD WINAPI clientHandleThread(LPVOID threadInfo)
{
     // this structure will contain all the data this callback will work on
     myThreadArgument* clientArgument = (myThreadArgument*)threadInfo;

   // get the client connection: receiving messages from client and
   // sending messages to the client will all be done by using
   // this client connection
   myTcpSocket* clientConnection = clientArgument->getClientConnect();
   string clientName = clientArgument->getHostName();

   // the server is communicating with this client here
   while(1)
   {
       string messageFromClient = "";

       // receive from the client

       int numBytes = clientConnection->recieveMessage(messageFromClient);
       if ( numBytes == -99 ) break;

       cout   << "[RECV fr " << clientName << "]: " << messageFromClient << endl;

       // if the client wants to disconnect
       if ( messageFromClient.compare("quit") == 0 || messageFromClient.compare("Quit") == 0 )
       {
           break;
       }
       else // send to the client
      {
           clientConnection->sendMessage(string("testing")); //test reply
       }
   }

   // if we reach here, this session with the client is done,
   // so we set the event on this thread to inform the main
  // control that this session is finished
   clientArgument->getExitEvent()->setEvent();
   return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T06:18:20.537

在您的多线程程序中，您正在创建两个客户端，一个 in`sendHandleThread`另一个 in `recHandleThread`，以及两个连接。当然，服务器通过客户端消息进入的连接发送它的回复消息，即发送到`sendHandleThread`不准备接收它的连接，而`recHandleThread`通过它的连接没有接收任何东西，因为那里没有发送任何东西。要纠正这一点，您必须只创建一个客户端连接并让两个线程使用相同的。

# applescript - OSX Mountain Lion 和 Applescript - Finder '窃取' 焦点

> ID：15149342
> 
> 赞同：1
> 
> 时间：2013-03-01T02:16:32.533
> 
> 标签：applescript, osx-mountain-lion, finder

我已经搜索了高低以找到解决方案，但已经出现了王牌。

在以全屏模式打开浏览器之前，我有一个简单的 Applescript 等待一分钟。（也允许 MAMP 启动）。

我面临的问题是，“Finder”有焦点，当Applescript去执行全屏命令'keystroke f {command down, shift down}它打开“所有文件”对话框，而不是所需的，浏览器焦点，输入全屏。

请问有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:33:52.543

你不能在进入全屏之前激活目标应用程序吗？

```
delay 10
tell application "Safari"
    activate
    reopen
end
tell application "System Events" to tell window 1 of process "Safari"
    perform action "AXPress" of (button 1 where subrole is "AXFullScreenButton")
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:35:08.257

```
keystroke tab using {command down} 
delay 1 
keystroke "f" using {command down, shift down} 
```

这在我的实例中有效，因为 Finder 具有焦点，下一个打开的应用程序是我的浏览器，这是我想要的焦点。因此，如果我要手动执行此操作，我会按住 COMMAND 并按 TAB 一次，以获得“下一个应用程序”的焦点

我不确定是否需要延迟，但我添加了 1 秒延迟只是为了确保浏览器有焦点，然后我执行击键来调用全屏模式！

# r - 如何提取与列列表对应的矩阵元素

> ID：15149344
> 
> 赞同：2
> 
> 时间：2013-03-01T02:16:50.767
> 
> 标签：r, apply

使用 apply 函数似乎应该非常简单，但我发现自己正在为此苦苦挣扎。

我有一个数据矩阵（数据框也可以）：

```
u <- matrix(sample(seq(4),20,T),5,4)
u
     [,1] [,2] [,3] [,4]
[1,]    1    2    4    2
[2,]    4    3    2    2
[3,]    3    3    3    1
[4,]    3    2    4    4
[5,]    4    1    3    4 
```

假设我只想使用列 j 的元素（如 excel 中的间接元素）从每一行中选择相应的列值。

例如给定 col(j) = 3

> 第 1 行将获取对应于 row=1,col(j=3)=4 的元素并返回 2 (row(1):col(4))
> 
> 第 2 行将获取对应于 row=2,col(j=3)=2 的元素并返回 3 (row(2):col(2))
> 
> ...
> 
> 第 5 行将获取对应于 row=5,col(j=3)=3 的元素并返回 3 (row(5),col(3))
> 
> 我最终得到了这些值的向量 v<-c(4,2,...3)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:24:30.097

您可以使用矩阵索引：

```
i <- seq_len(nrow(u))
j <- u[, 3]
u[cbind(i, j)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:32:07.037

我认为以下方法也有效：

```
sapply(1:nrow(u), function(i) u[i,u[i,3]]) 
```

# pyephem - 您如何获得地球卫星物体的天体测量 RA 和 Dec

> ID：15149353
> 
> 赞同：1
> 
> 时间：2013-03-01T02:17:39.847
> 
> 标签：pyephem

以下是 Pyephem 文档中提供的示例：

```
 iss = ephem.readtle("ISS (ZARYA)","1 25544U 98067A   03097.78853147  .00021906  00000-0  28403-3 0  8652","2 25544  51.6361  13.7980 0004256  35.6671  59.2566 15.58778559250029")
    gatech = ephem.Observer()
    gatech.lon, gatech.lat = '-84.39733', '33.775867'
    gatech.date = '2003/3/23'
    iss.compute(gatech)
    print iss.rise_time, iss.transit_time, iss.set_time
    2003/3/23 00:00:44 2003/3/23 00:03:22 2003/3/23 00:06:00 
```

当我运行这个例子时，我得到了完全相同的结果，所以我希望我至少做这部分是正确的。我想知道的是卫星在 J2000 坐标中的天体测量位置，所以我可以将它与星图进行比较。我尝试了以下代码，但答案很可疑，因为 a_ra 和 ra 是相同的。我相信 a_ra 和 ra 都在时代给出，而不是 a_ra 是 J2000 中的天体测量解决方案。

```
 print iss.a_ra, iss.ra, iss.g_ra
    8:50:10.99 8:50:10.99 6:54:40.64 
```

有没有办法将岁差/章动应用于 pyephem 中的地形中心 ra 和 dec？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:44:37.593

好问题！在查看了 PyEphem 基础的 C 代码之后，看起来*和*值都已经进入观察者对象的纪元（在您的情况下是 J2000 的默认值）。供您参考，这是来自以下问题的代码：`ra``a_ra``libastro``earthsat.c`

```
if (epoch != EOD && mjd != epoch)
    precess (mjd, epoch, &ra, &dec);
op->s_ra = ra;
op->s_dec = dec; 
```

在我看来是这样的`.ra`，并且`.dec`价值*已经*进动了。让这个代码保持不变可能是我的疏忽。很可能我真正应该做但当时没有看到的是将这些赋值语句移到语句*之前*的位置`if`，这样它们就不会被进动，因此与天体测量的 RA 和 dec 不同稍后通过我自己添加的代码设置几行。

所以：目前，你实际上——如果我正确理解 PyEphem——得到你想要的 RA 和 dec，并且可以继续你的项目。同时，我将追查那张票，并尝试获取`.ra`并`.dec`开始给出与`.a_ra`和不同的数字`.a_dec`！

# c++ - 在基于 C++ 范围的 for 循环中获取当前元素的索引

> ID：15149354
> 
> 赞同：50
> 
> 时间：2013-03-01T02:17:40.387
> 
> 标签：c++, for-loop, c++11, iteration

我的代码如下：

```
std::cin >> str;
for ( char c : str )
    if ( c == 'b' ) vector.push_back(i) //while i is the index of c in str 
```

这是可行的吗？或者我将不得不使用老式的 for 循环？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-01T02:29:36.680

也许有一个变量就足够了`i`？

```
unsigned i = 0;
for ( char c : str ) {
  if ( c == 'b' ) vector.push_back(i);
  ++i;
} 
```

这样您就不必更改基于范围的循环。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-01T02:49:50.000

假设`str`是一个`std::string`或其他具有连续存储的对象：

```
std::cin >> str;
for (char& c : str)
    if (c == 'b') v.push_back(&c - &str[0]); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-01T02:21:14.810

范围循环不会给你索引。它旨在抽象出这些概念，并让您遍历集合。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-01T02:20:47.057

您所描述的在其他语言中被称为“每个都有索引”操作。进行一些快速的谷歌搜索，似乎除了“老派 for 循环”之外，您还有一些相当复杂的解决方案，涉及 C++0x 兰巴或可能一些 Boost 提供的宝石。

编辑：作为一个例子，看到这个[问题](https://stackoverflow.com/questions/3752019/how-to-get-the-index-of-a-value-in-a-vector-in-c0x-for-each-algorithm-and-lamb)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-01T02:33:16.197

您可以在 c++11 中使用 lambda：

```
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
#include <iterator>

using namespace std;

int main() {
    std::string str;
    std::vector<char> v;
    auto inserter = std::back_insert_iterator<decltype(v)>(v);

    std::cin >> str;
    //If you don't want to read from input
    //str = "aaaaabcdecccccddddbb";

    std::copy_if(str.begin(), str.end(), inserter, [](const char c){return c == 'b';});

    std::copy(v.begin(),v.end(),std::ostream_iterator<char>(std::cout,","));

    std::cout << "Done" << std::endl;

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2022-02-20T03:53:17.237

在 C++ 20 中，我使用如下初始化器：

```
for(unsigned short i = 0; string item : nilai){
   cout << i << "." << "address " << &item << " -> " << item << endl;
   i++;
} 
```

因此，您的情况将是：

```
for (unsigned short i = 0; char c : str ) {
  if ( c == 'b' ) vector.push_back(i);
  ++i;
} 
```

我不知道在您的情况下“向量”是什么意思，什么是 push_back()。不要忘记添加`-std=c++20`（我只是使用g ++进行编译，所以我对其他编译器了解不多）。如果您愿意，也可以从 1 开始“i”值。我觉得够优雅

# cakephp - 如何为多个复选框更改 Cakephp Form Helper 的分隔符

> ID：15149359
> 
> 赞同：0
> 
> 时间：2013-03-01T02:18:27.493
> 
> 标签：cakephp, formhelper

我正在通过表单助手生成一堆复选框。本质上我有一个像 $tests = array

```
$tests = array(1 => 'test', 15=>'test2'); 
```

然后我可以像这样使用它

```
echo $this->Form->input('test_id', array(
            'type' => 'select', 
            'multiple' => 'checkbox', 
            'div' => false,
            'before' => '<li>',
            'after' => '</li>',
            'separator' => '</li> <li>')); 
```

我希望它会使用 div => false 来取消每个复选框的 div ，但它只将选项应用于外部块。无论如何将所有块从更改`<div class=>'checkbox'>`为`<li class='anything else'>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:07:26.333

只需查看它生成的字段，然后编写您自己的简单`foreach()`循环并自己将它们写入您想要的任何包装元素中。

我忘记了 Cake 是否可能，但不认为是。以上是我们之前所做的——因为它写起来很简单，所以我们写的时间比深入研究它所花的时间要少:)

# macos - 用引号编写一个 bash 函数

> ID：15149362
> 
> 赞同：0
> 
> 时间：2013-03-01T02:18:50.850
> 
> 标签：macos, bash, function, escaping

我正在尝试编写一个使用 perl 查找和替换字符的 bash 函数。我写了以下函数：

```
find_replace() {
 perl -p -i -e "s/$1/$2/g" "$3"

} 
```

我认为它现在不起作用，因为 $1 和 $2 被围绕它们的引号转义（据我所知，这是需要存在的 perl 语法的一部分）。

有关如何使此功能起作用的任何提示（或避免此问题的更好的编写方法）？

编辑：

按照 Barmar 的建议，这是我尝试运行该函数时的输出：

```
dholtz$ find_replace \001 , revenue_by_offer_tid
+ find_replace 001 , revenue_by_offer_tid
+ perl -p -i -e ''\''s/001/,/g'\''' revenue_by_offer_tid
++ update_terminal_cwd
++ local 'SEARCH= '
++ local REPLACE=%20
++ local PWD_URL=file://Dave-Mac-2.local/Users/dholtz
++ printf '\e]7;%s\a' file://Dave-Mac-2.local/Users/dholtz
dholtz$ head revenue_by_offer_tid
+ head revenue_by_offer_tid
Friday00228686050.0
Friday00228690410.0
Friday017438366585.040000000000004
Friday017438366591.3200000000000003
Friday017438366600.12
Friday0174383666114.759999999999962
Friday017438371407.440000000000006
Friday0174383815118.599999999999977
Friday017438382221.5600000000000005
Friday017438383663.480000000000002 
```

预期输出为：

```
Friday,0,0,22,86860,50.0
Friday,0,0,22,86904,10.0
Friday,0,1,7438,36658,5.040000000000004
Friday,0,1,7438,36659,1.3200000000000003
Friday,0,1,7438,36660,0.12
Friday,0,1,7438,36661,14.759999999999962
Friday,0,1,7438,37140,7.440000000000006
Friday,0,1,7438,38151,18.599999999999977
Friday,0,1,7438,38222,1.5600000000000005
Friday,0,1,7438,38366,3.480000000000002 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:22:27.620

反斜杠阻止引号被正确处理

```
find_replace() {
  perl -p -i -e "s/$1/$2/g" "$3"    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T13:15:42.973

bash手册告诉：

> 不带引号的反斜杠 (\) 是转义字符。它保留后面的下一个字符的文字值，...

因此，正如我们在上面的输出中看到的，您的命令

```
find_replace \001 , revenue_by_offer_tid 
```

被视为 (\ 只是不必要地保留了 0)

```
find_replace 001 , revenue_by_offer_tid 
```

- 不是你想要的。要保留反斜杠，您必须*在输入的命令行中*引用它，例如

```
find_replace \\001 , revenue_by_offer_tid 
```

# c++ - 构造函数/析构函数是否必须有代码，或者函数是否足够？

> ID：15149363
> 
> 赞同：1
> 
> 时间：2013-03-01T02:18:54.393
> 
> 标签：c++

所以如果我有课

```
class Transaction {

int no;
char dollar;

public:

    Transaction();
    ~Transaction();
} 
```

在我的构造函数/析构函数中

```
Transaction::Transaction {
    cout << "Entering constructor" << endl;
}

Transaction::~Transaction {
    cout << "Leaving program" << endl;
} 
```

该代码是否足以让我的构造函数和析构函数工作？即使我在构造函数中没有声明任何内容，它是否会将我的类中的数据成员设置为安全状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:30:37.787

如果您提供构造函数而不为所述子对象指定初始化程序，则每个子对象都将被默认初始化。

该标准第 8.5 节规定：

> 如果没有为对象指定初始化器，则该对象是默认初始化的；如果不执行初始化，则具有自动或动态存储持续时间的对象具有不确定的值。[ 注意：具有静态或线程存储持续时间的对象是零初始化的，请参见 3.6.2。——尾注]

然后

> *默认初始化*类型的对象`T`意味着：
> 
> *   if`T`是（可能是*cv-qualified*）类类型，`T`调用默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的）；
> *   如果 T 是数组类型，则每个元素都是默认初始化的；
> *   否则，不执行初始化。
> 
> 如果程序要求对 const 限定类型的对象进行默认初始化`T`，`T`则应是具有用户提供的默认构造函数的类类型。

初始化子对象有两种方法：在*ctor-initializer-list 中*，以及在成员声明中的*大括号或相等初始化器*中（对于非静态成员，后者在 C++11 中是新的）。

实际上，这意味着当您不提供初始值设定项时，原始类型的变量（例如`int`and `char`）会保留之前留在内存中的任何值。在大多数情况下，很难预测这将是什么值，但您应该知道它可能是剩余的敏感数据，例如密码。

在初始化静态存储持续时间的变量（例如命名空间范围内的对象及其成员）的情况下，标准进一步提供（同一部分）：

> 在任何其他初始化发生之前，在程序启动时，每个静态存储持续时间的对象都被初始化为零。

如果您没有定义构造函数，这与*值初始化*期间发生的情况略有不同：

> 对类型对象进行值初始化`T`意味着：
> 
> *   如果`T`是具有用户提供的构造函数的（可能是*cv 限定的*）类类型，则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误）；
> *   if`T`是没有用户提供的构造函数的（可能是*cv 限定的*）非联合类类型，则该对象被零初始化，并且如果`T`的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
> *   如果`T`是数组类型，则每个元素都是值初始化的；
> *   否则，对象被零初始化。

但效果是一样的——原始成员设置为零，所有其他成员都调用了它们的零参数构造函数。

nneonneo 建议显式初始化所有成员是好的，因为仅对静态存储持续时间的变量进行零初始化通常会导致难以发现的错误。但是使用大*括号或相等初始化器*技术是完全可行的：

```
class Transaction
{
    int no = 0;
    char dollar = 0;
public:

    Transaction();
    ~Transaction();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:22:20.847

您的类只有简单的数据成员，因此您甚至不需要（或不应该想要）析构函数。

但是，您应该在构造函数中初始化数据成员：

```
Transaction::Transaction()
  : no(0), dollar('$') {
    cout << "Entering constructor" << endl;
} 
```

否则，它们将不会被初始化，并且可能包含随机值（如果您不在构造函数中初始化它们，C++ 不保证将原始非静态成员初始化为任何特定值）。如果您有指针成员，这可能会特别阴险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:19:39.773

不，它不必有代码。事实上，在大多数语言中，您可以将其省略，它会正确构建类。

# ruby-on-rails - rails 渲染集合不起作用 - 未定义的局部变量或方法

> ID：15149365
> 
> 赞同：1
> 
> 时间：2013-03-01T02:18:58.603
> 
> 标签：ruby-on-rails

我正在尝试创建一个显示模型所有评论的提要。

**_comments.html.erb**

```
<% if @comments.any? %>
    <ol>
      <%= render partial: 'shared/comment_feed', collection: @comments %>
    </ol>
    <%= will_paginate @comments %>
<% else %>
    <h2>Be the first one to comment on this episode!</h2>
<% end %> 
```

**_comment_feed.html.erb**

```
<li id="<%= comment.id %>">
  <%= link_to gravatar_for(comment.user), comment.user %>
  <span class="user">
    <%= link_to comment.user.name, comment.user %>
  </span>
  <span class="content"><%= simple_format comment.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(comment.created_at) %> ago.
  </span>
  <% if current_user?(comment.user) %>
    <%= link_to "delete", comment, method: :delete,
                                   confirm: "Are you sure?",
                                   title: comment.content %>
  <% end %> 
</li> 
```

上面的代码给了我一个***未定义的局部变量或方法“注释”***错误。当使用部分渲染评论集合时，rails 不会自动生成评论吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:23:08.947

局部变量的名称对应于部分的名称。在您的情况下，局部变量将被命名为`comment_feed`.

# javascript - 带填充的 DIV 背景定位

> ID：15149366
> 
> 赞同：1
> 
> 时间：2013-03-01T02:18:59.727
> 
> 标签：javascript, html, css, background, jsfiddle

我有一个复选标记，我想把它放在按钮中的文本旁边，但是当我做 Background:left center; 它可以工作，但我想向它添加填充和类似的东西，有什么办法可以用[JSFiddle](http://jsfiddle.net/FzxKy/1/)提供的代码来做到这一点？我想将复选标记居中并稍微隔开一点。

```
.Button {
    padding:10px;
    border:1px solid #000;
    width:auto;
    color:#CCC
}

.Button:hover {
    color:#FFF;
    cursor:pointer;
}

.Check{
    background:url('http://67.184.73.19/Munet/Assets/Pictures/OffTick.png') no-repeat;
}

.Check:hover {
    background:url('http://67.184.73.19/Munet/Assets/Pictures/Tick.png') no-repeat;
} 
```

HTML：

```
<div class="Button Check" style="background-color:rgb(69,72,77);">Test</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:27:29.947

这是您的小提琴的代码，并在适当的位置进行了更新：

```
.Button {
  padding:10px 10px 10px 20px;
  border:1px solid #000;
  width:auto;
  color:#CCC
}

.Button:hover {
  color:#FFF;
  cursor:pointer;
}

.Check{
  background:url('http://67.184.73.19/Munet/Assets/Pictures/OffTick.png') no-repeat;
  background-position: 5px 15px;
  OR: background-position: 5px center;
}

.Check:hover {
  background:url('http://67.184.73.19/Munet/Assets/Pictures/Tick.png') no-repeat;
  background-position: 5px 15px;
  OR: background-position: 5px center;
} 
```

更新：

还要确保根据 GordonsBeard 的回答，您了解为什么这样做有效：[http ://www.w3schools.com/cssref/playit.asp?filename=playcss_background-position&preval=10px%20200px](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-position&preval=10px%20200px)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:25:12.430

您可以使用`background-poisition`标签。

```
background-position: <spacefromleft> <spacefromtop>; 
```

或者您可以在同一个背景声明中声明它。

[https://developer.mozilla.org/en-US/docs/CSS/background-position](https://developer.mozilla.org/en-US/docs/CSS/background-position)

```
.Check{
    background:url('OffTick.png') no-repeat 10px center;
}

.Check:hover {
    background:url('Tick.png') no-repeat 10px center;
} 
```

如果您想让 Text 与背景匹配，那么只需确保在您的上提供正确的填充`.Button`（即：左侧的填充比其他三个侧面的填充更大）。

# android - 主应用程序上的 ClassNotFoundException

> ID：15149367
> 
> 赞同：0
> 
> 时间：2013-03-01T02:19:01.507
> 
> 标签：android

所以我有一个应用程序的构建，它使用自定义 Application 类（扩展`android.app.Application`）并在清单的应用程序部分的属性中`full.class.path.Application`使用..`android:name`

当我通过 adb 安装时，该应用程序运行良好。

但是，在导出后（在不同的手机上尝试了几次），我会得到一个`NoClassFoundException full.class.path.Application`

我做错了`android:name`什么吗？

认为系统信息可能有用：平台工具 16.0.2、ADT 21.1、OSX 和 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:57:33.503

事实证明，Eclipse 中最新的 ADT 有问题。

我使用 IntelliJ 再次导出它并且它工作。

希望这对遇到类似问题的人有所帮助！

# android - TextView 中的多行渐变省略号

> ID：15149372
> 
> 赞同：4
> 
> 时间：2013-03-01T02:19:46.403
> 
> 标签：android, textview

我可以通过设置 android:ellipsize="end" 来制作一个文本被省略号截断的多行 TextView，我可以通过设置 android:ellipsize="marquee" 来制作一个文本淡出的单行 TextView。但是当 TextView 中有超过一行时，选取框设置不起作用。

有没有办法通过淡出多行TextView中的最后一行来截断文本？

编辑：我可以使用两个单独的 TextViews 进行一种 hacky 实现，并将 OnLayoutChangeListener 添加到第一个以检查文本是否会超过 X 行数，然后将文本从那里剪掉并将其余部分放入第二个TextView，仅限于一行，因此可以使用 ellipsize=marquee 淡出。

```
<TextView
    android:id="@+id/text_one"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
/>
<TextView
    android:id="@+id/text_two"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:singleLine="true"
/> 
```

```
mTextOne = (TextView) v.findViewById(R.id.text_one);
mTextTwo = (TextView) v.findViewById(R.id.text_two);

mTextOne.addOnLayoutChangeListener(new OnLayoutChangeListener() {
    @Override
    public void onLayoutChange(View v, int left, int top, int right,
            int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
        if (mTextOne.getLineCount() > 4) {
            int start = mTextOne.getLayout().getLineStart(3);
            String twoText = mTextOne.getText().toString().substring(start);
            mTextTwo.setText(twoText);
            mTextOne.setMaxLines(3);
        }
    }
}); 
```

不幸的是，我希望对列表中的每个项目都实现这一点，但我找不到这样做的方法。我只在静态页面上有两个简单的 TextView 的情况下才使用它。

# c# - 使用 IEnumerable > 并行

> ID：15149379
> 
> 赞同：0
> 
> 时间：2013-03-01T02:20:07.560
> 
> 标签：c#, .net, parallel-processing, task

有人可以指导我如何`IEnumerable<IEnumerable<double>>`有效地并行/任务使用。感谢你的帮助。

```
public IEnumerable<IEnumerable<int>> Execute(IEnumerable<IEnumerable<int>> lists)
{
          //Looking to process each enumerable item in separate thread/task
); 
```

# connection - Hbase 区域服务器无法连接到主服务器

> ID：15149380
> 
> 赞同：1
> 
> 时间：2013-03-01T02:20:09.973
> 
> 标签：connection, hbase, fedora, master

我在六个节点的集群上使用 Hbase{ hbase-0.94.3 } 和 hadoop{ hbase-0.94.3 }。我的机器上安装的操作系统fedora。对于 Hbase，我有一个主节点和 6 个区域服务器。

但奇怪的问题是，我的 Hbase 区域服务器无法连接到主服务器。只有与 master 运行在同一台机器上的 region server 才能连接到 master。

对于 6 个区域服务器中的 5 个，我收到以下错误：

我收到以下错误消息：2013-02-28 19:50:26,609 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Attempting connect to Master server at serv11.mycompany.com,60000,1362102564107 2013-02- 28 19:51:26,657 警告 org.apache.hadoop.hbase.regionserver.HRegionServer：无法连接到主服务器。重试。错误是：java.net.ConnectException：连接在 sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) 被拒绝 ....

对此的任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:03:40.483

内部/外部 ip addr 看起来有些问题。我使用了外部 IP 地址，然后大部分事情都解决了。

对网络了解不多，但随着问题的解决，请关闭此问题。

# python - re: position += heading*distance_moved TypeError: can only concatenate tuple (not "Vector") to tuple

> ID：15149393
> 
> 赞同：0
> 
> 时间：2013-03-01T02:21:16.750
> 
> 标签：python, pygame

*尽管该操作的所有部分都是元组 python 似乎认为在这种情况下其中一个不是。这是我第一次尝试在 python 中创建向量类。我的意图是将我的简单鼠标图像移动到我在屏幕上单击的位置，方法是将速度*矢量的增量添加到它的位置，直到它达到目标距离*

```
import math

class Vector(object):

#defaults are set at 0.0 for x and y
def __init__(self, x=0.0, y=0.0):
    self.x = x
    self.y = y

#allows us to return a string for print
def __str__(self):
    return "(%s, %s)"%(self.x, self.y)

# from_points generates a vector between 2 pairs of (x,y) coordinates
@classmethod
def from_points(cls, P1, P2):
    return cls(P2[0] - P1[0], P2[1] - P1[1])

#calculate magnitude(distance of the line from points a to points b
def get_magnitude(self):
    return math.sqrt(self.x**2+self.y**2)

#normalizes the vector (divides it by a magnitude and finds the direction)
def normalize(self):
    magnitude = self.get_magnitude()
    self.x/= magnitude
    self.y/= magnitude

#adds two vectors and returns the results(a new line from start of line ab to end of line bc)
def __add__(self, rhs):
    return Vector(self.x +rhs.x, self.y+rhs.y)

#subtracts two vectors
def __sub__(self, rhs):
    return Vector(self.x - rhs.x, self.y-rhs.y)

#negates or returns a vector back in the opposite direction
def __neg__(self):
    return Vector(-self.x, -self.y)

#multiply the vector (scales its size) multiplying by negative reverses the direction
def __mul__(self, scalar):
    return Vector(self.x*scalar, self.y*scalar)

#divides the vector (scales its size down)
def __div__(self, scalar):
    return Vector(self.x/scalar, self.y/scalar)

def points(self):
    return (self.x, self.y)

#imports
import pygame, sys, Vector
from pygame.locals import *
from Vector import *

#game init
pygame.init()

#screen
screen = pygame.display.set_mode((800,600),0,32)

#images
mouse_file = 'mouse.png'
MOUSE = pygame.image.load(mouse_file).convert_alpha()

#variables
bgcolor = (255,255,255)
position = (100.0, 100.0)
heading = Vector(0, 0)

#clock and speed
clock = pygame.time.Clock()
speed = 250.0

#main game function
while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()

        if event.type == MOUSEBUTTONDOWN:
            destination = pygame.mouse.get_pos()
            heading = Vector.from_points(position, destination)
            heading.normalize()

    screen.fill(bgcolor)
    screen.blit(MOUSE, position)

    time_passed = clock.tick(30.)
    time_passed_seconds = time_passed/1000.0

    distance_moved = time_passed_seconds*speed
    position += heading*distance_moved
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:28:02.823

这里有一个问题：

```
position = (100.0, 100.0) 
```

您需`position = Vector(100.0, 100.0)`要这样做`position += heading * distance_moved`，否则您将调用元组`+=`。

（有些人不喜欢在课堂上存储“积分” ，所以如果你有这种倾向`Vector`，你可能想要第二堂课。）`Point`

# php - PHP更新用户帐户详细信息未显示错误但未更新帐户详细信息

> ID：15149395
> 
> 赞同：0
> 
> 时间：2013-03-01T02:21:35.453
> 
> 标签：php, mysql, sql

概述：我正在创建一个用于学习目的的虚拟网站，因此它的功能主义者是基本的和安全的，不在议程 atm 上。

实际问题：

好的，所以我的应用程序登录的用户可以根据需要选择编辑他/她的帐户。所以我继续创建了 PHP 脚本来处理这个问题，但它没有。当我单击编辑帐户按钮时，没有弹出错误，但同时当我检查 MySQL 数据库时，没有发生任何更改。

EditAccountForm.php 文件：

```
<?php

    include('connect_mysql.php');

if(isset($_POST['editAccount'])){

    $Newusername = $_GET['username'];
    $Newpassword = $_POST['password'];
    $Newfirstname = $_POST['first_name'];
    $Newlastname = $_POST['last_name'];
    $Newemail = $_POST['email'];

    if($Newusername != $username)
    {
        $q1 = ("UPDATE users SET username=$Newusername WHERE username=$username");
    }
    else if(!mysql_query($q1)){

        echo "MySQL ERROR: " . mysql_error() . "" . $sql;
    }
    ///////////////////////////////////////////////////////////////

    if($Newpassword != $password)
    {
        $q2 = ("UPDATE users SET password=$Newpassword WHERE password=$password");
    }
    else if(!mysql_query($q2)){

        echo "MySQL ERROR: " . mysql_error() . "" . $sq2;
    }
    ///////////////////////////////////////////////////////////

    if($Newfirstname != $firstname)
    {
        $q3 = ("UPDATE users SET first_name=$Newfirstname WHERE first_name=$firstname");
    }
    else if(!mysql_query($q3)){

        echo "MySQL ERROR: " . mysql_error() . "" . $sq3;
    }
    ///////////////////////////////////////////////////////////////

    if($Newlastname != $lastname)
    {
        $q4 = ("UPDATE users SET last_name=$Newlastname WHERE last_name=$lastname");
    }
    else if(!mysql_query($q4)){

        echo "MySQL ERROR: " . mysql_error() . "" . $sq4;
    }
    ///////////////////////////////////////////////////////////////

    if($Newemail != $email)
    {
        $q5 = ("UPDATE users SET username=$Newemail WHERE email=$email");
    }
    else if(!mysql_query($q5)){

        echo "MySQL ERROR: " . mysql_error() . "" . $sq5;
    }

}   

?> 
```

userEditAccount.php：

```
<html>
<head>

<title>Edit Account</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <div id="wrapper">
        <header><h1>E-Shop</h1></header>

        <article>
        <h1>Welcome</h1>

            <h1>Edit Account</h1>

        <div id="login">

                <ul id="login">

                <form method="post" name="editAccount" action="userEditAccount.php"  >
                    <fieldset>  
                        <legend>Fill in the form</legend>

                        <label>Select Username : <input type="text" name="username" /></label>
                        <label>Password : <input type="password" name="password" /></label>
                        <label>Enter First Name : <input type="text" name="first_name" /></label>
                        <label>Enter Last Name : <input type="text" name="last_name" /></label>
                        <label>Enter E-mail Address: <input type="text" name="email" /></label>
                    </fieldset>
                        <br />

                        <input name="Editsubmited" type="submit" submit="submit" value="Edit Account" class="button">

                </form>

                <?

                    echo $newrecord;
                ?>

                </div>
            <form action="userhome.php" method="post">
            <div id="login">
                <ul id="login">
                    <li>
                        <input type="submit" value="back" onclick="index.php" class="button">   
                    </li>
                </ul>
            </div>      

        </article>
<aside>
</aside>

<div id="footer">This is my site i Made coppyrights 2013 Tomazi</div>
</div>

</body>
</html> 
```

此外：

我试图摆弄在网上看到的代码，但运气不好，我为这个脚本编写的代码在我眼中是最好的解决方案，也是对我有意义的解决方案。

所以我别无选择，只能转向这个网站寻找答案，任何人都可以看到这整个事情哪里出了问题......？

编辑帐户页面的图像： ![在此处输入图像描述](../Images/95db96b600ae878009eb5442dfac7708.png)

正如所问的 Conect_mysql.php ：

```
<?php 

    $db_hoast = "127.0.0.1";
    $db_username = "root";
    $db_password = "";
    $db_name = "eshop";

    $con = mysql_connect("$db_hoast","$db_username","$db_password");
        if(!$con)
        {
            die("Could not connect to DATABASE");
        }
    $db = mysql_select_db("$db_name");
        if(!$db)
        {
            die("No database");
        }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:23:30.033

您的`UPDATE`陈述的问题是值没有用单引号括起来。它们是字符串文字，应该被包装。

```
$q1 = "UPDATE users SET username='$Newusername' WHERE username='$username'"; 
```

为了显示错误，

```
if($Newfirstname != $firstname)
{
    $q1 = "UPDATE users SET username='$Newusername' WHERE username='$username'";
    $result = mysql_query($q1);
    if (!$result) 
    {
        die('Invalid query: ' . mysql_error());
    }
} 
```

你的逻辑`UPDATES`也是错误的。这会导致您更新与条件匹配的记录。

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# c# - 为什么像 Controller.Request 和 Controller.Session 这样的属性不是虚拟的？

> ID：15149408
> 
> 赞同：0
> 
> 时间：2013-03-01T02:22:23.607
> 
> 标签：c#, asp.net-mvc-4, dependency-injection

为什么像[Controller.Request](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.request%28v=vs.108%29.aspx)和[Controller.Session](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.session%28v=vs.108%29.aspx)这样的属性不是虚拟的？

我敢打赌它正盯着我的脸，如果是这样的话，我会道歉。

这就是我所拥有的，我正在努力改进。我`ControllerBase`允许我注入 mock/stubs/fakes（无论如何），我知道这是一个弱设计，可能会导致细微的错误（没有任何东西强制使用访问器来获取依赖项）。

```
public class ControllerBase : Controller
{
    private readonly ModelStateDictionary modelStateDictionary;
    private readonly HttpRequestBase request;
    private readonly HttpSessionStateBase session;

    public ControllerBase()
    {
        session = null;
        request = null;
        modelStateDictionary = null;
    }

    public ControllerBase(HttpSessionStateBase ssb, HttpRequestBase rq, ModelStateDictionary msd)
    {
        session = ssb;
        request = rq;
        modelStateDictionary = msd;
    }

    protected HttpSessionStateBase GetSession()
    {
        return session ?? Session;
    }

    protected HttpRequestBase GetRequest()
    {
        return request ?? Request;
    }

    protected ModelStateDictionary GetModelState()
    {
        return modelStateDictionary ?? ModelState;
    }
} 
```

# c# - Winform应用程序最小化时不更新

> ID：15149411
> 
> 赞同：0
> 
> 时间：2013-03-01T02:22:43.897
> 
> 标签：c#, winforms

我有一个 Windows 窗体应用程序，它在最小化时似乎会暂停绘图功能。我需要知道这是否只是一些绘图功能的怪癖，或者它是否扩展到所有正在运行的代码。无论哪种情况，是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:29:47.733

如果将其最小化，则没有任何可见的可绘制内容，因此无需`WM_PAINT`发送或处理消息。除非您在代码中做错了什么，否则不会影响其他任何事情。

有关某些相关信息，另请参阅[最小化时的 C# Windows 窗体应用程序更新。](https://stackoverflow.com/q/1809820/62576)

# firefox - Twitter Bootstrap Tooltip with Ajax Injected Elements in Firefox

> ID：15149413
> 
> 赞同：0
> 
> 时间：2013-03-01T02:23:02.567
> 
> 标签：firefox, twitter-bootstrap, tooltip

I'm using AJAX to inject elements into the DOM:

```
$.ajax({
    url: 'foo.html',
    type: 'post',
    data: { foo: "bar"},
    success: function (html) {

        $("#foo").html(html);
        $('[data-toggle="tooltip"]').tooltip();
    }
}); 
```

The tooltip does not seem to apply for DOM elements surrounded by `button` in Firefox (tested on V19.0)

Js fiddle : [http://jsfiddle.net/cyberjar09/4nUMu/1/](http://jsfiddle.net/cyberjar09/4nUMu/1/)

I noticed when I remove the icon element outside the button element, firefox is working again.

I am able to query the elements from the Firebug console (they exist in the DOM)

```
$('[data-toggle="tooltip"]') 
```

What's wrong?

I usually see a `<div class="tooltip" ...>` element appear in the DOM as a sibling for the element on which I want to execute tooltip but this does no happen for the Dynamic elements Im testing with in Firefox

IE 9 and Chrome 25 seem to work just fine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T01:11:26.737

It was recognised as a legitimate issue on GitHub by Bootstrap team. It has been closed now: [https://github.com/twitter/bootstrap/issues/7129](https://github.com/twitter/bootstrap/issues/7129)

# java - 如何根据 Word 文档大小 Apache-POI 自动调整表格并将表格对齐到中心？

> ID：15149422
> 
> 赞同：8
> 
> 时间：2013-03-01T02:23:43.467
> 
> 标签：java, apache-poi, xwpf

如何使该表自动适应文档页面宽度，当列大小增加时，使用 apache-poi 并将该表对齐到中心。

此代码生成一个 word 文档，将 Java 中的数据提取到位于 c 驱动器中的 word 文件中。我手动设置了宽度，但现在可以正常工作了。如果提供适当的指导，对我来说是否有价值

```
public Word2Doc() throws Exception {

    System.out.println("This is Word To Document Class");

    File file = null; 
           FileOutputStream fos = null; 
           XWPFDocument document = null; 
           XWPFParagraph para = null; 
           XWPFRun run = null; 
           try { 
               // Create the first paragraph and set it's text. 
               document = new XWPFDocument(); 
               para = document.createParagraph(); 

               para.setAlignment(ParagraphAlignment.CENTER); 

               para.setSpacingAfter(100); 

               para.setSpacingAfterLines(10);
               run = para.createRun(); 
               for(int i=1; i<=5; i++)
               run.setText("Test Name \009\009\009 Value \t\t\t\t Normal Ranges\013\013"); 
               run.addBreak();    // similar to new line
               run.addBreak();

               XWPFTable table = document.createTable(4, 3);

               table.setRowBandSize(1);
               table.setWidth(1);
               table.setColBandSize(1);
               table.setCellMargins(1, 1, 100, 30);

               table.setStyleID("finest");

               table.getRow(1).getCell(1).setText("EXAMPLE OF TABLE");
               table.getRow(2).getCell(1).setText("fine");
               XWPFParagraph p1 = table.getRow(0).getCell(0).getParagraphs().get(0);
               p1.setAlignment(ParagraphAlignment.CENTER);
                       XWPFRun r1 = p1.createRun();
                       r1.setBold(true);
                       r1.setText("Test Name");
                       r1.setItalic(true);
                       r1.setFontFamily("Courier");
                       r1.setUnderline(UnderlinePatterns.DOT_DOT_DASH);
                       r1.setTextPosition(100);

              //Locating the cell values
                        table.getRow(0).getCell(1).setText("Value"); 
                        table.getRow(0).getCell(2).setText("Normal Ranges"); 

                       table.getRow(2).getCell(2).setText("numeric values");

                        table.setWidth(120);

               file = new File("c:\\nwhpe.docx"); 
               if(file.exists())
                   file.delete();

               FileOutputStream out = new FileOutputStream(file);
               document.write(out);
               out.close();
           } 

       } 
public static void main(String ar[]) throws Exception{
    new Word2Doc();
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-11T17:25:34.003

将表格设置为 auto fit ，基本上它只是将宽度扩展到特定大小。例子

```
CTTbl table        = poiTable.getCTTbl();
CTTblPr pr         = table.getTblPr();
CTTblWidth  tblW = pr.getTblW();
tblW.setW(BigInteger.valueOf(5000));
tblW.setType(STTblWidth.PCT);
pr.setTblW(tblW);
table.setTblPr(pr); 
```

至于将表格与中心对齐

```
CTJc jc = pr.addNewJc();        
jc.setVal(STJc.RIGHT);
pr.setJc(jc); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-21T06:19:01.807

只需使用“100%”：

```
package io.github.baijifeilong.excel;

import lombok.SneakyThrows;
import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.poi.xwpf.usermodel.XWPFTable;

import java.io.FileOutputStream;

/**
 * Created by BaiJiFeiLong@gmail.com at 2019-08-21 13:49
 */
public class WordDemo {

    @SneakyThrows
    public static void main(String[] args) {
        XWPFDocument document = new XWPFDocument();
        XWPFTable table = document.createTable(3, 4);
        table.setWidth("100%");
        for (int i = 0; i < 3; ++i) {
            for (int j = 0; j < 4; ++j) {
                table.getRow(i).getCell(j).setText(String.format("%d:%d", i + i, j + 1));
            }
        }
        document.write(new FileOutputStream("hello.docx"));
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-02T05:44:01.143

要设置表格的宽度：

```
 XWPFTable table = doc.createTable(nRows, nCols);
  table.getCTTbl().addNewTblPr().addNewTblW().setW(BigInteger.valueOf(10000)); 
```

要设置列宽：

```
cell.getCTTc().addNewTcPr().addNewTcW().setW(BigInteger.valueOf(2000)); 
```

如果单元格中的数据增加，它会影响列的宽度，即列宽也会增加，因此为了避免此类问题，我们需要检查单元格中字符串值的长度，我们需要通过这样做在字符串中添加 \n （新行）我们可以设置列的宽度。

在我的项目中，我一直在努力设置列宽，我通过控制单元格中的数据解决了这个问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-09T09:52:48.580

您可以按实际页面大小的百分比设置表格的宽度。首先，获取页面的宽度：

```
CTSectPr sectPr = document.getDocument().getBody().getSectPr();
CTPageSz pageSize = sectPr.getPgSz();
double pageWidth = pageSize.getW().doubleValue(); 
```

第二步，获取页面边距，计算有效页面大小：

```
CTPageMar pageMargin = sectPr.getPgMar();
double pageMarginLeft = pageMargin.getLeft().doubleValue();
double pageMarginRight = pageMargin.getRight().doubleValue();
double effectivePageWidth = pageWidth - pageMarginLeft - pageMarginRight; 
```

现在，假设您希望表格的宽度为有效页面大小的 60%。然后你计算你的桌子的大小。（如果您希望表格适合实际页面大小，只需使用 1.0）：

```
double widthInPercent = 0.6;
int size = (int) (effectivePageWidth * widthInPercent); 
```

最后，将此大小设置为您的表：

```
CTTblWidth width = table.getCTTbl().addNewTblPr().addNewTblW();
width.setType(STTblWidth.DXA);
width.setW(new BigInteger(size + "")); 
```

希望这可以帮助！

最好的，霍尔格

# asp.net-mvc - 将 MVC 单页应用程序模板放入创建新对象？为什么？

> ID：15149430
> 
> 赞同：-1
> 
> 时间：2013-03-01T02:23:57.713
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在从 VS 模板（从这里[http://www.asp.net/single-page-application](http://www.asp.net/single-page-application)）查看 MVC4 的单页 Web 应用程序，看起来 ToDoLists 的 PUT 操作正在创建一个新的 ToDoList -为什么是这样？DTO 类定义中的代码：

```
public TodoList ToEntity()
        {
            TodoList todo = new TodoList
            {
                Title = Title,
                TodoListId = TodoListId,
                UserId = UserId,
                Todos = new List<TodoItem>()
            };
            foreach (TodoItemDto item in Todos)
            {
                todo.Todos.Add(item.ToEntity());
            }

            return todo;
        } 
```

从控制器：

```
public HttpResponseMessage PutTodoList(int id, TodoListDto todoListDto)
{           
    TodoList todoList = todoListDto.ToEntity();
    db.Entry(todoList).State = EntityState.Modified;
    db.SaveChanges();
    return Request.CreateResponse(HttpStatusCode.OK);
} 
```

所以要更新记录，我们创建一个新记录？我对这是如何工作的有点困惑——任何澄清都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:03:34.457

在此示例中，控制器将`TodoListDto`对象转换为`TodoList`对象，即数据库对象类型。由于 DTO 对象是从网页返回的，因此必须将其更改为适当的类型，以便 Entity Framework 可以将其附加到 DbSet 并保存更改。

`ToEntity` doesn't actually create a new record in the database, it creates a new `TodoList` instance which then gets attached, as modified to the database.

# objective-c - CABasicAnimation - 在视网膜设备上无限滚动图像出现乱码

> ID：15149436
> 
> 赞同：0
> 
> 时间：2013-03-01T02:24:32.020
> 
> 标签：objective-c, xcode, cabasicanimation

在类似的帖子中，我找到了一个无限动画滚动图像的解决方案：

[在无缝循环中动画无限滚动图像](https://stackoverflow.com/questions/8790079/animate-infinite-scrolling-of-an-image-in-a-seamless-loop)

尽管此解决方案运行良好，但在视网膜设备上运行时似乎存在问题。特别是，我只在 iPad 上运行这个项目。非视网膜 iPad 2 滚动图像没有任何问题。但是在视网膜 iPad 3 或 4 上运行图像是一团糟！这很难描述，但我能说的最好的就是它是乱码。像素被拉伸到各个方向。它类似于杰克逊·波拉克的画作。

截屏：

[http://imgur.com/Q7n08kv](https://imgur.com/Q7n08kv)

我使用非视网膜图像（非 2x）和视网膜版本（@2x）对此进行了测试。图像很大 - 全屏（横向），宽 4 个面板 (4096 x 768)。我玩过较小的图像，但结果相同。

**CABasicAnimation 的滚动功能是否存在会影响视网膜设备的限制？** 这是我正在使用的代码（由 rob mayoff 提供）：

```
UIImage *crawlImage = [UIImage imageNamed:@"CrawlBackground.png"];
UIColor *crawlPattern = [UIColor colorWithPatternImage:crawlImage];
self.crawlLayer = [CALayer layer];
self.crawlLayer.backgroundColor = crawlPattern.CGColor;

self.crawlLayer.transform = CATransform3DMakeScale(1, -1, 1);
self.crawlLayer.anchorPoint = CGPointMake(0, 1);

self.crawlLayer.frame = CGRectMake(0, 0, crawlImage.size.width + 1024, crawlImage.size.height);

[self.backgroundCrawl.layer addSublayer:self.crawlLayer];
self.backgroundCrawl.layer.zPosition = 0;

CGPoint startPoint = CGPointZero;
CGPoint endPoint = CGPointMake(-crawlImage.size.width, 0);

self.crawlLayerAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
self.crawlLayerAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
self.crawlLayerAnimation.fromValue = [NSValue valueWithCGPoint:startPoint];
self.crawlLayerAnimation.toValue = [NSValue valueWithCGPoint:endPoint];
self.crawlLayerAnimation.repeatCount = HUGE_VALF;
self.crawlLayerAnimation.duration = 30;   // nn seconds to complete the cycle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:41:58.603

`self.crawlLayer.contents = (id)crawlImage.CGImage;`

或者：

```
self.crawlLayer.contents = (__bridge id)([crawlImage CGImage]); 
```

这应该解决它。允许大图像正确滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:01:30.367

```
self.crawlLayer = [CALayer layer]; 
```

一旦你制作了一个图层，你应该设置它`contentsScale`：

```
self.crawlLayer.contentsScale = [[UIScreen mainScreen] scale]; 
```

否则它可能无法在双分辨率屏幕上正确显示。

# java - 更改输入中的字符

> ID：15149437
> 
> 赞同：0
> 
> 时间：2013-03-01T02:24:37.377
> 
> 标签：java, for-loop

```
for (int i= 0; i<inputAxiom.length(); i++)
{
  char c=inputAxiom.charAt(i);

  if (c == 'f' || c == 'h' || c == 'g')
  {
    if (rules[0].equals("f") || rules[0].equals("h")); 
    {
      inputAxiom = rules[1];
    } 
```

您好，我想要做的是从 inputAxiom 获取用户输入，并且对于每个 f 或 h 我希望输入的那部分改变

例如：如果 inputAxiom = fff 且规则为 f=fh（将 f 置于 rules[0] 并将 fh 置于 rules[1]）

然后它将更改为 f-hf-hf-h（将每个 f 更改为 fh）

目前，一旦它发现 f 只是将整个事物更改为 fh 而不是每个 f 的 fh

我认为这与

```
inputAxiom = rules[1]; 
```

但我不知道如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:28:48.727

字符串是不可变的。您不能更改现有 String 实例的一部分。您可以做的是用原始字符串的修改副本替换它。

例如，要将 all 替换`f`为`f-h`，您可以：

```
outputAxiom = inputAxiom.replaceAll("f", "h-f"); 
```

操作字符串的另一种可能性是`StringBuilder`API（不要将其误认为`StringBuffer`，不再推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:29:24.450

您当前正在更改整个字符串：

```
inputAxiom = rules[1]; 
```

为了更改特定字符，请像这样循环遍历您的数组：

```
var chars = inputAxiom.toCharArray();
for (int i= 0; i<inputAxiom.length(); i++)
{
  char c=inputAxiom.charAt(i);

  if (c == 'f' || c == 'h' || c == 'g')
  {
    if (rules[0].equals("f") || rules[0].equals("h")); 
    {
      chars[i] = rules[1];
    }
  }
} 
```

如果要插入那么多字符，这将起作用::

```
inputAxiom = inputAxiom.replaceAll(rules[0], rules[2]).replaceAll(rules[1], rules[2]); 
```

# android - 在Android中将日期字符串转换为long

> ID：15149438
> 
> 赞同：2
> 
> 时间：2013-03-01T02:25:08.450
> 
> 标签：android, datetime

我有一个日期字符串：`02/28/2013 06:20:00 PM`

我有一个日期格式化程序：`SimpleDateFormat dateFmt = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss a");`

```
java.util.Date tempDate; 
```

当我用格式化程序解析字符串并提取日期时

```
tempDate = dateFmt.parse(xpp.getText()); 
```

我得到了一个推迟 12 小时的日期： `Thu, Feb 28, 2013 6:20 AM`

我在俯瞰什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:30:17.787

[javadocs for`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) say that is for the `HH`hour in 24-hour format (0-23). 对于 AM/PM 格式 (1-12)，您应该使用`hh`.

# c# - 调用变量

> ID：15149445
> 
> 赞同：-3
> 
> 时间：2013-03-01T02:25:54.943
> 
> 标签：c#

我正在制作一个使用 WebRequest 方法的 C# 程序，我想知道这些变量是否被正确调用：

```
var user = args[0];
var pass = args[1];
string site = args[2];
string prxy = args[3];
WebRequest webReq;
Uri targetUri = new Uri(site);
Credentials = user, pass; 
```

这将使用变量和字符串代替 (site) 和 (user, pass)，还是按字面意思使用字符串？如果是这种情况，我是否需要调用类似于批处理的变量？即 %site% 或 %user%, %pass%? 或者这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:30:05.697

Well`Credentials = user, pass;`不是有效的语法，但所有其他语法都是有效的。它不会按字面意思使用字符串 - C# 中的文字字符串是通过用引号括起来形成的：

```
string prxy = "MyProxyServer"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:31:04.233

它将使用传入的值作为 args[] 中的参数

例如：

```
args[0] = "john";
args[1] = "$ecret";
user=args[0];
pass=args[1];

req.Credentials = new NetworkCredentials(user, pass); // john, $secret 
```

这就是你要问的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:39:26.007

```
NetworkCredential myCred = new NetworkCredential(args[0],args[1]);

CredentialCache myCache = new CredentialCache();

myCache.Add(new Uri(args[2]), "Basic", myCred);

WebRequest request = WebRequest.Create(args[2]);
request.Credentials = myCache;
WebResponse response = request.GetResponse(); 
```

# java - 以有效的方式循环遍历 ResultSet 并将列值添加到 List

> ID：15149446
> 
> 赞同：2
> 
> 时间：2013-03-01T02:26:02.013
> 
> 标签：java, multithreading, thread-safety, resultset

我正在开发一个多线程项目，其中每个线程都`randomly find columns for that table`将使用这些列`SELECT sql query`，然后我将执行该 SELECT sql 查询。执行该查询后，我将遍历结果集并将每列的数据添加到`List<String>`.

这里`columnsList`将包含`columns`由`comma`. 例如-

`col1, col2, col3`

下面是我的代码。

```
class ReadTask implements Runnable {

public ReadTask() {

}

@Override
public run() {
  ...

  while ( < 60 minutes) {

    .....

    final int id = generateRandomId(random);
    final String columnsList = getColumns(table.getColumns());
    final String selectSql = "SELECT " + columnsList + "  from " + table.getTableName() + " where id = ?";
    resultSet = preparedStatement.executeQuery();

    List<String> colData = new ArrayList<String>(columnsList.split(",").length);
    boolean foundData = false;

    if (id >= startValidRange && id <= endValidRange) {

        if (resultSet.next()) {
            foundData = true;
            for (String column : columnsList.split(",")) {
                colData.add(resultSet.getString(column.trim()));
            }
            resultSet.next();//do I need this here?
        }
    } else if (resultSet.next()) {
        addException("Data Present for Non Valid ID's", Read.flagTerminate);
    }

    ....
      }
   }

    private static void addException(String cause, boolean flagTerminate) {
        AtomicInteger count = exceptionMap.get(cause);
        if (count == null) {
            count = new AtomicInteger();
            AtomicInteger curCount = exceptionMap.putIfAbsent(cause, count);
            if (curCount != null) {
                count = curCount;
            }
        }
        count.incrementAndGet();

        if(flagTerminate) {
            System.exit(1);
        }
    }
} 
```

**问题陈述：-**

执行`SELECT`sql查询后。以下是我的两种情况-

1.  我需要查看 id 是否在有效范围之间。如果它在有效范围之间，则检查是否`resultSet`有任何数据。`resultSet`如果它有数据，则使用`columns`from循环`columnsList`并开始将其添加`coldData`到字符串列表中。
2.  否则，如果 id 不在有效范围内，那么我需要检查我没有从`resultSet`. 但不知何故，如果我取回数据并且标志为真以停止程序，然后退出程序。否则，如果我要取回数据但标志为假以停止程序，则计算其中发生了多少。所以为此，我创建了`addException`方法。

谁能帮我看看我在这里为上述两个做的方式是否`scenarios`正确？看起来，`if/else loop`对于上述两种情况，我可以进一步改进代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:17:03.437

您可能可以做一些事情来使代码更快一点：

关于查询部分，如果表从未更改，则可以将`columnsList`初始化移到 while 循环之外，如果所有线程都使用相同的查询，甚至可以将其设为静态。同样，您正在为每个查询结果重新计算此变量的拆分和修剪列列表。这可以在循环之外为所有的人完成一次。

关于测试本身，确实可以反转嵌套。您目前正在执行以下操作：

```
if (B) {
   if (A) ok;
}
else if (A) error; 
```

什么时候可以更简单地写：

```
if (A){
   if (B) ok;
   else error;
} 
```

您的代码可以更好地表述如下：

```
if (resultSet.next()) {
    if (id >= startValidRange && id <= endValidRange) {
        foundData = true;
        for (String column : columnsList.split(",")) {
            colData.add(resultSet.getString(column.trim()));
        }
    }
    else
        addException("Data Present for Non Valid ID's", Read.flagTerminate);
} 
```

关于异常日志部分，您应该避免直接在映射中处理存储的静态方法，这是一个失败的强争用源，并且会阻止您的线程专注于执行其真正的工作，即启动和处理查询。通常，访问地图具有时间复杂度`O(log n)`，并且查看您的代码，您将进行两次访问，并进行各种检查以确保记帐正确。相比之下，将值推送到队列中是一个常数时间的操作，同步由队列本身处理。

因此，我在这里的建议是将映射的处理委托给一个专用线程，并为您的查询线程添加一个同步队列以使其异常。这样您就不需要处理对地图的并发访问（这可能很混乱）。同样，从查询线程的角度来看，日志记录过程将是一个简单的“触发并忘记”操作，并且日志记录线程只需从队列中提取新消息并将它们添加到映射中。

如果您还不知道如何构建这样的设置，[请参阅 Oracle 教程](http://www.java2s.com/Tutorial/Java/0160__Thread/SynchronizedQueuewithProducerandConsumer.htm)。关于该主题（生产者-消费者）还有几个 SO 问题和答案。

更新：如果您想减少争用，您可以为每个查询线程创建一个队列，并让映射线程依次检查所有队列。并发访问的风险降低到同时两个线程：一个查询线程和一个映射线程。它会在映射线程中引入更多工作，但同时会避免许多线程重新调度（每次线程被锁阻塞时都会发生这种情况）。重新调度的次数越少，花在线程管理上的时间就越少，用于实际工作的时间就越多。

请注意，无论如何，您应该注意不要在队列中堆积太多项目。如果这种情况很可能发生（我对此表示怀疑，但我不确定您的数据的详细信息），您可能想要使用 BlockingQueues （查找类描述和有关该主题的 SO 问题以获取更多详细信息）。

# java - SpringRoo - webapp 中的默认 ID 太冗长，toString 被忽略了吗？

> ID：15149447
> 
> 赞同：1
> 
> 时间：2013-03-01T02:26:10.870
> 
> 标签：java, spring, spring-roo, jspx

我开始使用 Spring Roo。到目前为止一切都很好，对于基于 CRUD 的应用程序来说，这似乎是一个不错的 Java 选项。

我使用 SpringRoo 在线教程之一作为基础创建了一个基本的 Web 应用程序。

我已经建立了基本的脚手架，并且看起来具有一对多关系的对象在应用程序中被列出如下：

```
List all Exam Modules

Difficulty   Category   Exam Id         
Easy         Software   Design  2013-02-28 15:01:29.0 2013-02-28 15:01:29.0 Test Software Exam 
```

考试 ID 是对考试实体的引用，如下所示：

```
import org.springframework.roo.addon.dbre.RooDbManaged;
import org.springframework.roo.addon.javabean.RooJavaBean;
import org.springframework.roo.addon.jpa.activerecord.RooJpaActiveRecord;
import org.springframework.roo.addon.tostring.RooToString;

@RooJavaBean
@RooJpaActiveRecord(versionField = "", table = "exam")
@RooDbManaged(automaticallyDelete = true)
public class Exam {

    @Override
    public String toString() {
        return id + ": " + desc;
    }
} 
```

之前，toString 是使用 @RooToString 配置的

这尚未反映在 Web 应用程序中，因此可能在那里显示的字符串不会调用 toString 方法。

我在jspx中的代码如下：

```
 <table:column id="c_com_mypackage_examino_domain_ExamModule_examId" property="examId" z="iz7M0ohWIJEbf7nEYqPLkvKKtcE="/> 
```

关于如何让这个考试实体打印出一个漂亮的、适合家庭使用的字符串的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:34:23.683

查看 ApplicationConversionServiceFactoryBean.java（或 .aj）。会有一种方法

```
public Converter<Exam, String> getExamToStringConverter() 
```

或者

```
public Converter<ExamPK, String> getExamToStringConverter() 
```

更改它，使其仅包含您想要查看的字段。

或者，您可以在 Exam.java 中添加一个 bean 样式方法，该方法返回您想要的字符串并将其作为属性调用。这假设您创建了一个名为 getMyExamId() 的方法，该方法返回所需的字符串。请注意，您需要将 z 更改为“用户管理”

```
 <table:column id="c_com_mypackage_examino_domain_ExamModule_examId" property="myExamId" z="user-managed="/> 
```

# ios - 在 iPad 3 上渲染手绘上下文的最佳实践

> ID：15149451
> 
> 赞同：1
> 
> 时间：2013-03-01T02:26:52.327
> 
> 标签：ios, objective-c, cocoa-touch, ios6

我目前有一个免费的手绘 iPad 应用程序，它通过 touches 方法中的四边形曲线将线条添加到可变路径，然后在新区域上调用 setNeedsDisplayInRect。

问题是当绘图（路径）变得相当大时，重绘需要更长的时间，并开始陷入困境。以及每当用户更改画笔大小或颜色时，它都会在重绘时将其应用于先前绘制的路径的重叠部分。

为了解决这个问题，我在 touchesEnded 的后台线程中调用 renderInContext，并将它与绘图视图后面的 imageview 中的另一个 UIImage 合并。然后清除绘图视图。

这也有帮助，因此当用户点击保存时，绘图通常已经在单个 UIImage 中呈现 - 准备就绪。

这在其他设备上运行良好，但在 iPad 3 视网膜显示屏上，性能非常糟糕，并且当用户在快速绘图时多次抬起手指时往往会崩溃。

我正在寻求有关处理此类情况的最佳实践的任何类型的建议？除了添加额外的视图以在后台渲染以防止主线程和后台线程一次访问相同的视图 - 这听起来相当 hack-ish - 我觉得我正在打败一匹死马？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:16:12.577

在我当前的应用程序中，我制作了一个在 iPad 2 和 3 上都能正常工作的实现，无论路径长度或路径数量如何。似乎显卡更擅长绘制大量小路径而不是几条大路径，并且任何一个都比将图像渲染到上下文中更快。所以，我所做的是即使用户不断地绘制，我也会将路径分成许多较小的路径并将它们添加到数组中。这种方法给了我一个优点和一个缺点。

优点：能够清晰地缩放和重绘图像
缺点：不能进行像素完美擦除

至于多种颜色，我创建了一个`UIBezierPath`包含颜色属性的子类。由于颜色现在可以通过 序列化`NSCoding`，因此它们很容易保存。此外，我有一个“笔划”对象，它包含用户在一个连续笔划中创建的所有路径。这样我就可以正确处理撤消/重做。

希望这些信息有所帮助。

# .net - 在 Firefox 中 Web 部署 .NET 客户端程序集？

> ID：15149456
> 
> 赞同：1
> 
> 时间：2013-03-01T02:27:33.913
> 
> 标签：.net, firefox, client-side, gecko

我有一个**非常大**的客户端应用程序，在 .NET （实际上是程序集的集合）的过程中编写了几年，我们正试图使其可在 Web 上部署。这是 Internet Explorer 中的一项中等任务，需要将库包装在 COM 中并通过 Javascript 与之交互。这工作正常。

下一个挑战是让它在 Firefox 和可能的其他基于 Gecko 的浏览器（尽管仅限 Windows）中运行。我一直在研究[Gecko 插件功能](https://developer.mozilla.org/en-US/docs/Plugins)，但据我所知，它不支持 .NET 代码。

有谁知道我是否/如何让它与 .NET 程序集一起使用？或者，还有其他方法可以让 .NET 客户端代码在 Firefox 中运行吗？

# delphi - 将签名的 XML 发送到安全的 WebService 会返回 BadSignature

> ID：15149460
> 
> 赞同：0
> 
> 时间：2013-03-01T02:27:55.480
> 
> 标签：delphi, soap, delphi-7

我正在使用 Delphi 7 的`HTTPReqResp`组件将数字签名的 SOAP XML 文档发送到 HTTPS Web 服务。我使用 Eldos XML BlackBox 并已将所有`transformAlgorithms`、`CanonicalizationMethod`、`signaturemethod`等设置为 Web 服务所需的，并已与技术支持人员确认了这一点。

我已经使用 XML BlackBox 和这个[XML Verifier website](http://www.aleksey.com/xmlsec/xmldsig-verifier.html)验证了签名。

两种方式都确认签名是正确的。但是，当我通过 发送 XML 文档时`HTTPReqResp.execute`，我得到的响应是`BadSignature (The signature value is invalid)`.

最初，由于 XML 错误（格式错误等），我收到了不同的错误消息。看来该服务将首先进行所有标准格式检查，然后尝试验证签名。因为我得到了`BadSignature`响应，所以 XML 的其余部分必须是正确的。

我想我在这里有两个问题。

1.  HTTPReqResp 组件是否更改 XML。

2.  网络服务是否可能会更改 XML。

该站点正在使用 Access Manager WebSEAL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:40:21.963

接收方很可能以某种方式获得了修改后的文档。一些小的修改不应影响签名（至少是这样），因此您可能需要检查以下内容：

1.  接收伙伴使用的“推荐”编码。一些接收合作伙伴非常讨厌的做法是偏爱一种编码形式而完全忽略其他形式。应该使用 XML 签名，`utf-8`但我见过只接受的服务器`iso-8859-1`

2.  确保您不会在签名后意外更改编码。

3.  验证接收伙伴是否正在使用合理的规范化方法。

4.  与您的接收合作伙伴确认您的文档中没有添加任何无关的元素。

另外，您是否尝试过使用 SecureBlackBox 组件发布此内容？他们还有一个可以执行 SSL 的 HTTP 客户端，也可以用来验证通过线路发送的字节。

# c++ - 如果给定一个指向数组中间的指针，delete[] 会做什么？

> ID：15149462
> 
> 赞同：-2
> 
> 时间：2013-03-01T02:27:59.427
> 
> 标签：c++

下面的代码会发生什么？

```
 int *p1 = new int[100];
    int *p2 = &p1[50];
    delete [] p2; 
```

我听说新的一些实现将数组的大小存储在第（-1）个数组索引中，但是上面的事情不会出现可怕的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:29:35.903

事情肯定会出错！

**delete []**运算符被定义为仅适用于*正确的*数组指针。正确地说，我的意思是它必须接收一个先前初始化的指针，以指向内存中使用**new**运算符创建数组的位置。

你也不应该混合和匹配 new/delete 和 malloc/free。作为一项规则，始终*删除*已分配的内存`new`，并*释放*已分配的内存`malloc`（和派生类）

# iphone - 处理 UIViews 之间滑动的正确方法

> ID：15149464
> 
> 赞同：0
> 
> 时间：2013-03-01T02:28:26.060
> 
> 标签：iphone, ios, objective-c, uiscrollview, uigesturerecognizer

我想在我的应用程序的主屏幕上使用分页控件显示两个视图。如果用户在 UI 上滑动，它应该显示第二个视图，即 UITableView。第一个视图也是 UITableview。

我想知道处理这种滑动的正确方法，并添加两个指示所选页面的圆形图像。我是否应该进行滚动视图分页或使用手势识别器。

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:32:26.253

如果我理解正确，您应该使用 UIPageViewController。

[类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

**编辑**

如果你想向你的 UIPageViewController 添加某种 UIPageControl，你需要使用这 2 个方法（来自 UIPageViewControllerDataSource）：

```
- (NSInteger)presentationCountForPageViewController:(UIPageViewController *)pageViewController
- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController 
```

这是有关使用 UIPageViewController 的完整教程（带有页面控件，如您所愿）。 [http://mobile.tutsplus.com/tutorials/iphone/using-scrollstyle-with-uipageviewcontroller/](http://mobile.tutsplus.com/tutorials/iphone/using-scrollstyle-with-uipageviewcontroller/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:33:06.400

我会将两个 UITableViews 放入带有分页的 UIScrollView 中。

UIScrollView 已经为您处理了滑动，并且它还具有分页的反弹动画。

如果您要手动处理滑动手势，您可能必须实现自己的**弹跳动画**，并且还需要**滑动中断**，以防用户在视图转换时以其他方式向后滑动。

# c# - 为什么 AppDomain.CurrentDomain.IsHomogenous 为假

> ID：15149467
> 
> 赞同：1
> 
> 时间：2013-03-01T02:28:36.800
> 
> 标签：c#, .net, .net-4.0

看来，要使用 Dynamic 关键字，我的 winform .net 4.0 应用程序必须具有一组同类的安全权限。

如果没有，我会收到此错误 -

Message=动态操作只能在同构 AppDomain 中进行。

我的应用程序有 40 多个项目，我们没有故意设置任何非默认安全设置。关于寻找什么以及导致 IsHomogenous 为 false 的任何指针？

发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:25:59.440

能够追踪到我们设定的事实

legacyCasPolicy enabled="true"

在 app.config 文件中。

# ios - 如何将 MKOverlay 对象存储到文件中以便稍后检索

> ID：15149484
> 
> 赞同：2
> 
> 时间：2013-03-01T02:30:47.293
> 
> 标签：ios, nsarray, nsdata, mkoverlay, writetofile

我正在编写一个 iOS 应用程序来记录您的旅行路径，然后将其存储起来以便以后检索。大多数绘制路径的代码都是基于示例代码[Breadcrumb](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)。

现在我正在添加功能来保存绘制的叠加层。最好的方法是什么？我可以使用`CoreData`，但我不想对绘制的叠加层做太多事情，而不是稍后再检索它。我目前尝试了一个简单的`NSArray`. 我将 CrumbPath 对象转换为`NSData`并将其存储在数组中。后来我检索它并将其转换回 CrumbPath。但是，我似乎做错了什么。

```
@interface CrumbPath : NSObject <MKOverlay>
{
    MKMapPoint *points;
    NSUInteger pointCount;
    NSUInteger pointSpace;

    MKMapRect boundingMapRect;

    pthread_rwlock_t rwLock;
}

- (id)initWithCenterCoordinate:(CLLocationCoordinate2D)coord;
- (MKMapRect)addCoordinate:(CLLocationCoordinate2D)coord;

@property (readonly) MKMapPoint *points;
@property (readonly) NSUInteger pointCount;

@end 
```

我像这样保存 CrumbPath 对象“crumbs”：

```
NSData *pointData = [NSData dataWithBytes:crumbs.points length:crumbs.pointCount * sizeof(MKMapPoint)];
[patternArray addObject:pointData];
[timeArray addObject:date];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
// Create the full file path by appending the desired file name
NSString *patternFile = [documentsDirectory stringByAppendingPathComponent:@"patterns.dat"];
NSString *timeFile = [documentsDirectory stringByAppendingPathComponent:@"times.dat"];

//Save the array
[patternArray writeToFile:patternFile atomically:YES];
[timeArray writeToFile:timeFile atomically:YES]; 
```

稍后像这样检索它以显示在表格中：

```
NSData *pointData = [appDelegate.patternArray objectAtIndex:indexPath.row];
MKMapPoint *points = malloc(pointData.length);
(void)memcpy([pointData bytes], points, sizeof(pointData)); 
```

并再次构建路径：

```
crumbs = [[CrumbPath alloc] initWithCenterCoordinate:MKCoordinateForMapPoint(points[0])];
for (int i = 1; i <= pointCount; i++) {
    [crumbs addCoordinate:MKCoordinateForMapPoint(points[i])];
}    
[map addOverlay:crumbs]; 
```

但是，我收到一个错误：`'NSInvalidArgumentException', reason: '-[NSConcreteData isEqualToString:]: unrecognized selector sent to instance`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:36:13.000

就个人而言，我倾向于这样做：

1.  首先，我倾向于保存`CLLocationCoordinate2D`传递给`MKPolygon`实例方法的 C 坐标数组`polygonWithCoordinates`（而不是`MKMapPoint`C 数组）。如果您更愿意使用`MKMapPoints`，您可以修改此代码，但我更喜欢一种我可以从外部检查并理解的格式（即 的纬度和经度值`CLLocationCoordinate2D`）。因此，让我们假设您`MKPolygon`使用如下代码行：

    ```
    MKPolygon* poly = [MKPolygon polygonWithCoordinates:coordinates count:count]; 
    ```

    因此，您可以像这样保存坐标：

    ```
    [self writeCoordinates:coordinates count:count file:filename]; 
    ```

    其中`writeCoordinates:count:filename:`定义如下：

    ```
    - (void)writeCoordinates:(CLLocationCoordinate2D *)coordinates count:(NSUInteger)count file:(NSString *)filename
    {
        NSData *data = [NSData dataWithBytes:coordinates length:count * sizeof(CLLocationCoordinate2D)];
        [data writeToFile:filename atomically:NO];
    } 
    ```

    然后，您可以使用`MKPolygon`以下文件制作：

    ```
    MKPolygon* poly = [self polygonWithContentsOfFile:filename]; 
    ```

    其中`polygonWithContentsOfFile`定义为：

    ```
    - (MKPolygon *)polygonWithContentsOfFile:(NSString *)filename
    {
        NSData *data = [NSData dataWithContentsOfFile:filename];
        NSUInteger count = data.length / sizeof(CLLocationCoordinate2D);
        CLLocationCoordinate2D *coordinates = (CLLocationCoordinate2D *)data.bytes;

        return [MKPolygon polygonWithCoordinates:coordinates count:count];
    } 
    ```

2.  或者，您可以`CLLocationCoordinate2D`通过将上述两种方法替换为：

    ```
    const NSString *kLatitudeKey = @"latitude";
    const NSString *kLongitudeKey = @"longitude";

    - (void)writeCoordinates:(CLLocationCoordinate2D *)coordinates count:(NSUInteger)count file:(NSString *)filename
    {
        NSMutableArray *array = [NSMutableArray arrayWithCapacity:count];

        for (NSUInteger i = 0; i < count; i++)
        {
            CLLocationCoordinate2D coordinate = coordinates[i];
            [array addObject:@{kLatitudeKey:@(coordinate.latitude), kLongitudeKey:@(coordinate.longitude)}];
        }

        [array writeToFile:filename atomically:NO];
    }

    - (MKPolygon *)polygonWithContentsOfFile:(NSString *)filename
    {        
        NSArray *array = [NSArray arrayWithContentsOfFile:filename];
        NSUInteger count = [array count];
        CLLocationCoordinate2D coordinates[count];

        for (NSUInteger i = 0; i < count; i++)
        {
            NSDictionary *dictionary = array[i];
            coordinates[i].latitude = [dictionary[kLatitudeKey] doubleValue];
            coordinates[i].longitude = [dictionary[kLongitudeKey] doubleValue];
        }

        return [MKPolygon polygonWithCoordinates:coordinates count:count];
    } 
    ```

显然，您希望添加错误检查代码以确保 the`writeToFile`和`dataWithContentsOfFile`(or `arrayWithContentsOfFile`) 成功，但希望这能给您带来想法。

# graph - Neo4j Cypher：获得共同的朋友网络

> ID：15149490
> 
> 赞同：0
> 
> 时间：2013-03-01T02:31:41.813
> 
> 标签：graph, neo4j, cypher, gremlin

我相信我所拥有的应该是一个非常简单的，但由于某种原因我没有前进。我有经典的社交网络设置，用户可以在其中成为朋友。我知道想用 D3.js 可视化用户的网络

为此，很明显如何获得朋友

```
user -[:friend]- friend 
```

现在，我还想显示用户朋友之间的联系，以便它很好地聚集在一个力导向图中。然而，这是我当前的问题，因为我想知道“朋友”集是如何相互连接的。我首先想到

```
with friend
match friend -[connection:friend]- friend 
```

会工作，但显然没有。我似乎忽略了一件非常明显的事情，但我不确定是什么。

编辑： Gremlin 也很受欢迎，如果它更具遍历性/显式性，可能会更高效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:29:19.087

也许这会激发您使用 Gremlin 的解决方案。我将您的问题调整为标准 TinkerPop 玩具图。我开始弄清楚以下几点：

对于一个特定的顶点，找出它所连接的所有顶点，然后找到该总集合中的每个顶点是如何相互关联的。鉴于您的描述，这听起来像您正在寻找的东西。

所以我开始：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()              
==>tinkergraph[vertices:6 edges:6]
gremlin> g.v(1).outE.as('x').inV.loop(2){it.loops<3}{true}.select
==>[x:e[7][1-knows->2]]
==>[x:e[8][1-knows->4]]
==>[x:e[9][1-created->3]]
==>[x:e[10][4-created->5]]
==>[x:e[11][4-created->3]] 
```

对于 id 为 1 的顶点，获取所有出边，然后再次循环以获取朋友边，最后选择“x”步骤的值。这让您至少知道 gv(1) 周围的子图是什么，但是当我阅读您的问题时，您想更进一步将子图限制为仅连接到 gv(1) 的那些顶点。从结果来看，确实不应该包含 e[10]，因为 gv(1) 和 gv(5) 之间没有边。

我进一步细化了查询以从子图中消除这种关系：

```
gremlin> x=[g.v(1)];g.v(1).out.aggregate(x).back(2).outE.filter{x.contains(it.inV.next())}.as('e').inV.loop(3){it.loops<3}{true}.select 
==>[e:e[7][1-knows->2]]
==>[e:e[8][1-knows->4]]
==>[e:e[9][1-created->3]]
==>[e:e[11][4-created->3]] 
```

所以上面基本上说，

*   初始化一个列表 x ，它将包含应该在子图中保存的所有顶点。
*   gv(1).out.aggregate(x) 基本上将所有顶点放在子图中我想要的“x”中，除了我用它初始化的那个
*   回溯到遍历的起点并找出包含 x 中顶点的边，然后像以前一样循环它并选择“e”步骤的值，即边列表。

现在您可以看到 e[10] 不再出现在结果中。从这里您可以很容易地构建可视化输出。

# c# - 如何在访问数据库中的datagridview中显示数据

> ID：15149491
> 
> 赞同：6
> 
> 时间：2013-03-01T02:31:47.490
> 
> 标签：c#, .net, datagridview, ms-access-2007

我在下面的代码中显示来自访问数据库的 datagridview 中的数据。我有不同的行，但只显示数据库中的最后一行数据。我不知道我的代码有什么问题。

```
 dataGridView1.Columns.Add("UserID", "UserID");
    dataGridView1.Columns.Add("FirstName", "FirstName");
    dataGridView1.Columns.Add("MI", "MI");
    dataGridView1.Columns.Add("LastName", "LastName");
    dataGridView1.Columns.Add("Birthdate", "Birthdate");
    dataGridView1.Columns.Add("Address", "Address");
    dataGridView1.Columns.Add("UserName", "UserName");
    dataGridView1.Columns.Add("UserPassword", "UserPassword");
    dataGridView1.Columns.Add("Rights", "Rights");

    OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\\SISC-STRONGHOLD\MIS!\wilbert.beltran\SEEDBucksDbase.accdb");
    conn.Open();
    OleDbCommand cmd = new OleDbCommand();
    cmd.Connection = conn;
    cmd.CommandText = "SELECT * From TableAcct";
    OleDbDataReader reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        dataGridView1.Rows.Add();

        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["UserID"].Value = reader[0].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["FirstName"].Value = reader[1].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["MI"].Value = reader[2].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["LastName"].Value = reader[3].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Birthdate"].Value = reader[4].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Address"].Value = reader[5].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["UserName"].Value = reader[7].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["UserPassword"].Value = reader[8].ToString();
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Rights"].Value = reader[9].ToString();
    }
    conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T02:42:52.760

可以直接`dataGridView1`使用绑定`OleDbDataAdapter`。确保 datagridview 中列的名称与查询返回的字段名称匹配，以便它将包含空白列并为每个字段创建另一列。

```
string connStr = @"Provider=Microsoft.ACE.OLEDB.12.0;
        Data Source=\\SISC-STRONGHOLD\MIS!\wilbert.beltran\SEEDBucksDbase.accdb";
string query = "SELECT * From TableAcct";
using(OleDbConnection conn = new OleDbConnection(connStr))
{
    using(OleDbDataAdapter adapter = new OleDbDataAdapter(query, conn))
    {
        DataSet ds = new DataSet();
        adapter.Fill(ds);
        DataGridView1.DataSource= ds.Tables[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-13T09:18:01.887

```
public partial class WebForm1 : System.Web.UI.Page
{
    public String name,type,rvw;

    public void Page_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\Uz!\Documents\Data_Ware.mdf;Integrated Security=True;Connect Timeout=30");
        SqlDataAdapter sda = new SqlDataAdapter("Select * From CoffeeDB  ", con);
        DataTable dt = new DataTable();
        sda.Fill(dt);

        GridView.DataSource = dt;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T11:30:13.153

请使用此代码在 c#.net 中将您的数据显示到 datagridview

```
 OleDBConnection con=new      OleDBConnection("Copy your database database path and paste it");
    con.open();
    Dataset ds=new Dataset();
         OleDBDataAdapter sdr=new      OleDBDataAdapter("select * from table_name",con);
    sdr.Fill(ds);
    datagridview1.Datasource=ds.tables[0];
    con.close(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-23T03:06:50.623

```
string con= "SERVER=localhost; user id=root; password=; database=dbname";

MySqlConnection connect = new MySqlConnection(con);
connect.Open();
try
{
string sqlQuery = "SELECT * FROM DATA WHERE date(date) = date(now())";
MySqlDataAdapter da = new MySqlDataAdapter(sqlQuery, connect);
DataTable ds = new DataTable();
da.Fill(ds);
Datagrid.DataSource = ds;
}
catch(Exception ex)
{
Console.WriteLine(ex.ToString());
} 
```

# matlab - 优化 MATLAB 中大矩阵的循环

> ID：15149492
> 
> 赞同：0
> 
> 时间：2013-03-01T02:31:48.870
> 
> 标签：matlab, optimization, for-loop

我有一个非常大的矩阵（750000 x 6），其中有一列股票价格的时间。时间间隔不统一，因此我插入了新的时间。由于我只想包括工作日工作时间内的时间，因此我有一个 for 循环来检查插值时间是否在其中，并将这些条目复制到一个新矩阵中。但是，我的程序需要永远运行（> 10 分钟）。这是我的原始代码：

```
A = IBM;
times = A(:,1);
incr = t;
uniqday = datevec(times);
uniqday = unique(uniqday(:,1:3), 'rows'); % unique days for data

% Computes interpolated prices at sampling interval
interptimes = (times(1):incr:times(end)).';      

% Fractional hours into the day
frac_hours = 24*(interptimes - floor(interptimes));    
% Exclude interpolated times outside of trading hours
newtimes = interptimes((frac_hours > 0) & (frac_hours < 19.1)); 

% Exclude weekends & holidays
newtimesvec = datevec(newtimes);
newtimesvec2 = zeros(length(newtimesvec),6);
for j = 1:length(uniqday)
    for i = 1:length(newtimesvec)
        if newtimesvec(i,1:3) == uniqday(j,:)
              newtimesvec2(i,:) = newtimesvec(i,:);
        else       %Program always get stuck at this line
        end
    end
end 
```

所以我想也许删除插值时间数组中的条目会更快，而不是复制到新矩阵，但是当一个条目被删除时，插值时间数组会改变大小，所以这个 for 循环会导致它访问矩阵之外。我不确定如何解决这个问题。

```
for i = 1:length(interptimes)
    for j = 1:length(uniqday)
        if interptimes(j,1:3) == uniqday(j,:)
        else
            interptimes(j,:) = [];
        end 
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:44:16.883

您可以使用`ismember`来查找日期`uniqday`：

```
newtimesvec2 = newtimesvec(ismember(newtimesvec(:,1:3),uniqday,'rows'),:); 
```

# java - 从 JDBC 检索值并使用 JSTL 标签调用方法

> ID：15149497
> 
> 赞同：3
> 
> 时间：2013-03-01T02:32:14.737
> 
> 标签：java, jsp, model-view-controller, jdbc, jstl

下面是我为从数据库中检索值而编写的代码（我添加了整个代码，以便您更容易理解我在这里要说的内容）：

```
package ipscheme;

import java.sql.*;

public class AddRecords {

Connection con = new DBConnection().getConnection();
ResultSet  resultSet = null;  

public String [] populateSelect() throws SQLException {

    Statement statement = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);

    resultSet = statement.executeQuery("SELECT * FROM ipsections");

    resultSet.last();
    int size = resultSet.getRow();
    resultSet.beforeFirst();

    String [] sectionName = new String[size];

    int j = 0;
    while (resultSet.next()){
        sectionName[j] = resultSet.getString("section_name");
        j = j + 1;
    }

    resultSet.close();
    statement.close();
    con.close();

    return sectionName;

}

} 
```

下面是我用来将数据库中的值填充到选择框的 JSP 代码。

```
<select name="sltSection">
 <% 
    AddRecords added = new AddRecords();
    String sectionNm  [] = added.populateSelect();
        for(int i=0; i<sectionNm.length; i++){ %>   
    <option>
        <% out.print(sectionNm[i]); %>
    </option>
 <% } %>
</select> 
```

上面的代码工作正常，没有任何编译错误。如您所见，我在 .jsp 页面中使用了 Java 代码来完成任务，这是错误的做法。

我需要根据 MVC 实现此代码，因此我应该使用 JSTL 标签将代码实现为 .jsp？如果是这样，我该怎么做？我如何从类中实例化 Object`AddRecords`并调用它的方法？有人可以帮帮我吗。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:45:01.687

由于看起来您是 Java Web 编程的新手，因此您可以使用 JSP（视图）、Servlet（控制器）和实体、DAO 和服务层（模型）来实现完整的 MVC 场景。这就是你所拥有的：

模型：

*   `DBConnection`作为数据库访问类（数据访问层）
*   `AddRecords`作为您的 DAO 类（数据访问层）
*   没有类作为服务类（业务逻辑层）。对于这个例子，让我们为此创建一个`RecordService`类：

    ```
    public class RecordService {
        public RecordService() {
        }
        //since it has no real business logic, it will serve as facade
        public String[] getRecords() {
            AddRecords addRecords = new AddRecords();
            return addRecords.populateSelect();
        }
    } 
    ```

控制器：

*   还没有Controller类。由于我假设您使用的是纯 Java EE，因此您将使用 Servlet（基于[Servlets StackOverflow wiki](https://stackoverflow.com/tags/servlets/info)的实现）：

    ```
    @WebServlet("/RecordServlet")
    public class RecordsServlet extends HttpServlet {
        @Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            //it will fire on a GET request (like accessing directly to the URL
            //from the browser)
            //here you should load the data for the View (JSP)
            loadData(request);
            //forward to show the view
            request.getRequestDispatcher("hello.jsp").forward(request, response);
        }

        @Override
        protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            //it will fire on a POST request (like submitting the form using POST method)
            String selectedRecord = request.getParameter("selectedRecord");
            System.out.println(selectedRecord);
            request.setAttribute("selectedRecord", selectedRecord);
            loadData(request);
            //forward to show the view
            request.getRequestDispatcher("hello.jsp").forward(request, response);
        }

        //method to load the data available to select
        private void loadData(HttpServletRequest request) {
            RecordService recordService = new RecordService();
            String[] records = recordService.getRecords();
            //set the data as attribute on the request to be available on the View
            request.setAttribute("records", records);
        }
    } 
    ```

看法：

*   您已经有一个 JSP 文件。既然你还没有公布名字，我们就叫它吧`hello.jsp`。[我将使用JSTL](https://stackoverflow.com/tags/jstl/info)调整您的实际 JSP 代码：

    ```
    <!-- at the beginning of the JSP, call the JSTL library -->
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

    <form action="RecordServlet" method="POST">
        Please select an element:
        <select id="selectedRecord" name="selectedRecord">
            <c:forEach items="${records}" var="record">
            <option value="${record}">${record}</option>
            </c:forEach>
        </select>
        <br />
        <input type="submit" value="Show selected record" />
        <c:if test="${not empty selectedRecord}">
            <br />
            You've selected ${selectedRecord}!
        </c:if>
    </form> 
    ```

现在，要运行示例，构建项目并使用`http://localhost:8080/YourWebProjectName/RecordServlet`. 此外，您可以在`web.xml`文件中设置：

```
<welcome-file-list>
    <welcome-file>RecordServlet</welcome-file>
</welcome-file-list> 
```

只需运行 Web 项目。

一些注意事项：

*   使用类/方法的相关名称，`RecordXXX`因为你有这个`AddRecord`类（它应该是`RecordDAO`或者对代码阅读器更有用的东西，比如`UserDAO`or `YourEntityDAO`）。
*   通过不同的包分发你的类。每个包都应该只包含与其范围相关`edu.home.dao`的类，即 DAO 类、`edu.home.service`服务/业务逻辑类等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:50:19.120

使用类中的列表作为返回值，

```
 List<String> sectionName = new ArrayList<String>();

while (resultSet.next())
   sectionName.add(resultSet.getString("section_name")); 
```

然后做

```
 <select name='name'>
 <c:forEach var="parameter" items="${sectionName }"> 
  <option value="${parameter}">${parameter}</option> 
  </c:forEach> 
</select> 
```

这里的参数是访问列表变量值的中介变量你也可以使用字符串数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:48:33.150

首先，如果你想用 MVC 做一些事情，你应该解耦你的代码。JSP 文件只访问请求，根本没有 java 代码。

所以你的控制器需要做这样的事情。

```
 request.setAttribute("ipsections",added.populateSelect()); 
```

然后，在你的 jsp 文件中

```
<select name='anything'>
     <c:forEach items="${ipsections}" var="ipsection">
          <option value="${ipsection}">${ipsection}</option>
    </c:forEach>
</select> 
```

# ubuntu - 如何在 OpenGL/C++/Ubuntu 中禁用窗口的“x”按钮？

> ID：15149502
> 
> 赞同：1
> 
> 时间：2013-03-01T02:32:41.137
> 
> 标签：ubuntu, glut

我需要确保使用我的工具的人遵循非常严格的流程，因此仅在某些条件下才允许关闭程序。我想禁用窗口的关闭按钮。

# ios - iOS：获取捆绑包中的所有类或加载的应用程序

> ID：15149505
> 
> 赞同：3
> 
> 时间：2013-03-01T02:33:06.803
> 
> 标签：ios, objective-c

我正在尝试在运行时获取应用程序中加载的类列表。我不关心所有的类，只关心那些加载的。我知道如何获取所有类的列表，但是遍历它们以检查它们是否在加载的捆绑包中会导致随机崩溃，这似乎是一种矫枉过正的方法。

我已经看到对 NSLoadedClasses 的引用，但我真的找不到任何关于它的东西，而且我不确定它是否适用于 iOS（与 Mac 相比）。得到这个的正确方法是什么？同样，我在运行时需要它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:35:58.940

看来我想通了。如果您需要这样做，请按以下步骤操作：

```
#import <objc/runtime.h>
#import <dlfcn.h>
#import <mach-o/ldsyms.h>

unsigned int count;
const char **classes;
Dl_info info;

dladdr(&_mh_execute_header, &info);
classes = objc_copyClassNamesForImage(info.dli_fname, &count);

for (int i = 0; i < count; i++) {
  NSLog(@"Class name: %s", classes[i]);
  Class class = NSClassFromString ([NSString stringWithCString:classes[i] encoding:NSUTF8StringEncoding]);
  // Do something with class

} 
```

# php - Zend Mail 不发送任何电子邮件

> ID：15149508
> 
> 赞同：-8
> 
> 时间：2013-03-01T02:33:30.157
> 
> 标签：php, email, zend-framework, zend-mail

所以 Zend_Mail 应该很简单吧？！这是我的代码：

```
 Zend_Mail::setDefaultTransport(new Zend_Mail_Transport_Postmark('e8eeb5e5-bdbf-47cb-bd66-8b7f20d2c08e'));
    $mail = new Zend_Mail();
    $mail->setFrom($email);
    $mail->addTo($to);
    $mail->addBcc($bcc);
    $mail->setSubject($subject);
    $mail->setBodyHtml($message);
    $mail->send(); 
```

那为什么它不工作（我的意思是没有发送电子邮件。没有任何反应。我检查了我的电子邮件，但没有发送任何内容）

我应该说，我已经设置了我的服务器以使用 Google Apps。这会导致任何问题吗？？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:45:48.523

你怎么知道谷歌没有退回电子邮件？- 如果可以的话，以某种方式检查。

此外，当您仍在配置 PHP 时，电子邮件进入垃圾邮件是很常见的，因此请检查那里（与 SPF 记录和您的发件人地址有关）。

最后，验证 、`$email`、`$to`和`$bcc`都实际设置了一个值。`$subject``$message`

# iphone - iOS 中 Storyboard 创建的属性

> ID：15149509
> 
> 赞同：-1
> 
> 时间：2013-03-01T02:33:40.420
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiwebview

我在情节提要中有一个 UIViewController，我让它创建代码：

```
@property (weak, nonatomic) IBOutlet UIWebView *webView2; 
```

但是，在我的`viewDidLoad`方法之后，我打印出来`self.webView2`，它是`(null)`. 为什么它是空的？我需要向 webView 添加一个 URL，但此时它为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:36:56.297

有没有把 UIWebView 拖到 storyboard 中的 outlet 上（属性前面的圆圈是不是填的）？这将自动实例化控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:37:04.317

在代码中创建属性不会创建出口。你必须有*两*件事：代码中的属性和情节提要中的出口。确保您实际上有一个从情节提要中的 UIViewController 到其视图中的 UIWebView 的出口。

它可能会帮助您阅读我书中有关网点的部分：

[http://www.aeth.com/iOSBook/ch07.html#_outlet_connections](http://www.apeth.com/iOSBook/ch07.html#_outlet_connections)

本书的这一部分讨论“笔尖”，但同样适用于“故事板”。

# sql-server-2008-r2 - 无法在配置管理器中启动 SQL Server Reporting Services

> ID：15149510
> 
> 赞同：0
> 
> 时间：2013-03-01T02:33:41.997
> 
> 标签：sql-server-2008-r2

当我在配置管理器中启动 SQL Server Reporting Services 时，我收到以下错误消息：

> “请求失败或服务未及时响应。有关详细信息，请参阅事件日志或其他适用的错误日志”

我尝试谷歌它，我发现最好的解决方案是在注册表中创建一个 ServicePipeTimeout；但是，在我完成之后，问题仍然存在......我该如何解决这个问题？

# unit-testing - Microsoft.Activities.UnitTesting 不满足具有 DefinitionIdentity 的工作流服务

> ID：15149514
> 
> 赞同：1
> 
> 时间：2013-03-01T02:34:30.330
> 
> 标签：unit-testing, workflow-foundation-4, workflow-foundation, workflowservice

我正在使用 WF4.5 和 Microsoft.Activities.UnitTesting。我为我的工作流服务定义了 DefinitionIdentity。调用 WorkflowServiceTestHost.Open 时，会出现以下异常：

> System.NotSupportedException：InstanceStore 的持久性提供程序实现不支持名为 {urn:schemas-microsoft-com:System.Activities.Persistence/command}CreateWorkflowOwnerWithIdentity 的命令。要么选择不同的提供者，要么确保不尝试此持久性命令。

似乎是因为 Microsoft.Activities.UnitTesting.Persistence.MemoryStore 没有满足 CreateWorkflowOwnerWithIdentityCommand 的要求。有人实施了吗？谢谢。

# c# - 多对一映射不允许属性

> ID：15149515
> 
> 赞同：0
> 
> 时间：2013-03-01T02:34:45.453
> 
> 标签：c#, orm, nhibernate-mapping

这一定是我无法掌握的简单事物。

假设一家企业提供多种服务。一方面，ServiceOffers 作为查找表，BusinessServiceOffers 用于关联。当我添加如下所示的多对一映射时，sqlite 提供程序（在单元测试时）抛出了一个参数超出范围异常，这是可以理解的，这是由于 Property 和 ManyToOne 中的重复引用。

```
Property(x => x.ServiceOfferingId);
ManyToOne
        (
            x => x.ServiceOffering,
            x =>
            {
                x.Fetch(FetchKind.Select);
                x.Lazy(LazyRelation.Proxy);
                x.Column("ServiceOfferingId");
                 x.ForeignKey("FK_BusinessServiceOffering_ServiceOfferingId");
            }
        ); 
```

删除属性修复了异常问题，但测试一直失败。查看插入的 sql，我看到为 ServiceOfferingId 插入了“null”，而不是分配的 int 值，例如：

```
INSERT 
INTO
    BusinessServiceOffering
    (BusinessId, IsEnabled, CreatedDate, CreatedByLoginId, ModifiedDate, ModifiedByLoginId, ServiceOfferingId, BusinessServiceOfferingId) 
VALUES
    (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
@p0 = 200 [Type: Int32 (0)], @p1 = True [Type: Boolean (0)], 
@p2 = 2/28/2013 6:11:25 PM [Type: DateTime (0)], 
@p3 = 20 [Type: Int32 (0)], @p4 = 2/28/2013 6:11:25 PM [Type: DateTime (0)], 
@p5 = 30 [Type: Int32 (0)], @p6 = **NULL** [Type: Int32 (0)], --->
@p7 = 5 [Type: Int32 (0)] 
```

我尝试在“一个”侧添加一个袋子，但似乎没有任何区别。

我错过了什么？请注意，我有与 sql server 的集成测试，无论有没有该属性都可以正常运行。但是，使用 sql server 进行的简单读取测试无法为删除了属性的那些字段返回任何数据。

好像我需要正确映射或者它是一个 sqlite 特质。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:01:02.390

行。如果他们遇到同样的问题，我自己想出了这个并为其他人发布答案。

1.  作为 null 插入的字段最初不应该在 POCO 中。如果需要，可以通过子/嵌套对象以及正确映射关系来访问它们。
2.  将数据插入 sqlite 遵循对象引用规则。例如，在一个父子关系中，child 持有对 parent 的 key 引用，并且 parent 有一个子列表，首先创建并保存 parent，然后是 child。在这种情况下，映射是父项中的一个包/一组子项。还有其他情况我稍后会更新。

# arrays - MATLAB 动态删除数组中的行

> ID：15149516
> 
> 赞同：0
> 
> 时间：2013-03-01T02:34:52.987
> 
> 标签：arrays, matlab, matrix

> 我有一个随机点有 0 的数组，我想创建这个没有任何 0 的数组，例如：

```
1
2
3
0
3
4
0
3
should be reduced to:
1
2
3
3
4
3 
```

> 有没有在 MATLAB 中删除这些行的好方法？我能做的最多就是将这些值在数组中向上移动，但我想知道是否有“取消链接”之类的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:37:48.747

如果向量的名字是v；

然后就

```
v = v(v~=0) 
```

会做。

# android - keytool 不适用于签署 android 应用程序

> ID：15149522
> 
> 赞同：1
> 
> 时间：2013-03-01T02:35:30.590
> 
> 标签：android, google-play, signing, keytool

好的，我正在尝试按照谷歌网站上关于如何准备应用程序投放市场的步骤进行操作。我的问题是当我尝试使用 keytool 时......这真是令人沮丧......

这正是我正在做的。

右键->在此处打开cmd (Java/jdk1.70_09/bin)

然后我输入cmd：

```
keytool -genkey -v -keystore my-release-key.keystore
-alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

这是谷歌网站上的例子。我输入“密码”作为我的密码并输入它询问我的信息。然后它给了我这个我尝试搜索但没有运气的错误：

```
[Storing my-release-key.keystore]
keytool error: java.io.FileNotFoundException: my-release-key.keystore (Access is
 denied)
java.io.FileNotFoundException: my-release-key.keystore (Access is denied)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
        at sun.security.tools.KeyTool.doCommands(KeyTool.java:1152)
        at sun.security.tools.KeyTool.run(KeyTool.java:340)
        at sun.security.tools.KeyTool.main(KeyTool.java:333) 
```

我需要以前做过这件事的人的帮助！我确定我正在做一些简单的事情，这是最令人沮丧的部分......

如果重要的话，我正在使用 Eclipse 4.2.1 和 Windows 7 64bit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T04:23:57.660

嗨，你可以用 eclipse 来做，请按照以下步骤操作：

1) 转到文件菜单 --> 单击导出 2) 下一步选择以选择导出目标 --> Android --> 导出 Android 应用程序 3) 单击下一步浏览您的项目 --> 单击下一步 4) 选择**密钥库**--。您有两个选项 (i) 使用现有的密钥库 (ii) 创建新的密钥库 5) 选择 (ii) 选项以创建新的密钥库

现在浏览您要存储密钥库文件和密码的位置 6) 单击下一步并按照提到的字段输入您的详细信息，然后单击下一步 7) 现在保存已签名的目标 .APK 文件。8) 现在点击完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:43:23.930

看起来 keytool 正在尝试创建文件`my-release-key.keystore`，但由于您没有对工作目录的写入权限（我认为它是`Java/jdk1.70_09/bin`），所以无法创建文件。尝试在您有写入权限的地方指定密钥库文件的完整路径，例如在您的主目录 ( `Users\<your account>`) 中。

# google-app-engine - Google Apps 引擎、Google Apps 脚本和 Javascript

> ID：15149525
> 
> 赞同：1
> 
> 时间：2013-03-01T02:35:54.893
> 
> 标签：google-app-engine, google-apps-script, google-apps

我需要开发一个企业应用程序，它将集成和扩展将在 Amazon Elastic Server 上的 ERP 应用程序。

我应该选择什么标准语言？Google Drive 使我能够使用 javascript，Google 协作平台也是如此。

但是当我检查一个叫做“谷歌应用引擎”的东西时，它给了我 Java、Python 和 Go 的选项（从来没有听说过这个）。

但没有Javascript。是否存在一致性问题？我不能一直使用javascript吗？代码将在哪里运行，在云中？我必须上传代码，编译与否？是否有类似 Javascript 的在线 IDE，或者我应该使用 Eclipse 或类似的东西。

是否有任何理由不使用 javscript 进行后端处理？为 Google Drive、站点、通过 Web 服务访问 ERP 等保持相同的语言会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:43:31.453

Javascript 主要用于前端开发，这就是为什么有一个用于 Javascript 的 Google Drive 和 Sites API。如果您要在 Google App Engine 服务器上开发某些东西，您将使用 Java、Go 或 Python。在服务器端使用 javascript 的唯一方法是在服务器中使用 node.js 或任何其他 javascript 实现，但据我所知，Google App Engine 不支持。

# c# - CellFormatting DataGridView 事件的格式问题

> ID：15149526
> 
> 赞同：0
> 
> 时间：2013-03-01T02:35:57.663
> 
> 标签：c#, datagridview, cell-formatting

这是我遇到的问题：我有一个`DataGridView`（我们称之为 A），其中列出了许多来自`SqlDataReader`. 这是在*另一个*网格的事件中`DataGridView`填充的。如果网格 A 中第四列的日期**大于**今天（较新），我需要将行绘制为**红色**，否则将行绘制为**blue**。`SelectionChanged`

 *******这是我在`CellFormatting`事件中实现的代码：

```
if (Convert.ToDateTime(dgvCREListaParcelas.CurrentRow.Cells[3].Value) > DateTime.Now)
        {
            e.CellStyle.BackColor = Color.Red;
        }
        else
        {
            e.CellStyle.BackColor = Color.LightBlue;
        } 
```

我不知道为什么，但是每当我单击网格中的任何一行，或者向下和向上滚动时，线条的颜色都会改变。不幸的是，我无法发布图片，因为我没有足够的积分！

有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:48:55.180

通过更改 CellFormating 事件中的以下行，我设法解决了这个问题： if (Convert.ToDateTime(dgvCREListaParcelas.CurrentRow.Cells[3].Value) < DateTime.Now)

至：

if (Convert.ToDateTime(dgvCREListaParcelas.Rows[e.RowIndex].Cells[3].Value) < DateTime.Now)

感谢关注！*******

# python - Python：切换按钮（添加更多按钮）

> ID：15149530
> 
> 赞同：0
> 
> 时间：2013-03-01T02:36:38.827
> 
> 标签：python, tkinter

这只是按钮数组的初始代码，它们相互影响。我无法理解为什么我不断收到这个定义错误！

```
from tkinter import *
import tkinter.messagebox
from tkinter import ttk

def changeImage(Num):
    global buttonOn
    global buttonOff
    if Num == 1:
        if button1(image) == buttonOn:
            button1.config(image=buttonOff)
        else:
            button1.config(image=buttonOn)

root = Tk()

root.geometry('155x190')
root.title("Tile Turner")

buttonOn = PhotoImage(file="buttonPic.gif")
buttonOff = PhotoImage(file="buttonPic2.gif")

button1 = Button(image=buttonOn, width=20, height=20, command=changeImage(1))
buttonQuit = Button(text="Quit", width=10, height=0, command=root.destroy)

app.grid(column=0, row=0)
button1.grid(column=2, row = 3)
buttonQuit.grid(column=3, row = 10, columnspan = 4)

root.mainloop() 
```

我的定义错误在 button1 中：

```
Traceback (most recent call last):
  File "C:/Users/Jimmy/Desktop/COS 2013/Game1/small", line 23, in <module>
    button1 = Button(image=buttonOn, width=20, height=20, command=changeImage(1))
  File "C:/Users/Jimmy/Desktop/COS 2013/Game1/small", line 10, in changeImage
    if button1(image) == buttonOn:
NameError: global name 'button1' is not defined 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:48:40.683

在这一行中，

```
button1 = Button(image=buttonOn, width=20, height=20, command=changeImage(1)) 
```

您调用作为参数`changeImage`传入`1`的函数。然后对该函数进行评估，并将*结果*（`None`在本例中）传递给构造函数的`command=...`默认参数`Button`。当然，这会导致您得到 ，`NameError`因为您`changeImage`在实际将其传递给 Button 构造函数之前调用了它——即`button1`还不存在，因为它正在等待`changeImage`函数完成，然后才能继续构造`Button`实例。

你想要这样的东西：

```
button1 = Button(...,command=lambda:changeImage(1)) 
```

这将创建一个新函数，调用该函数时只需`changeImage`使用正确的参数调用。

为了进一步详细说明 lambda，上面的语句或多或少是

```
def temp_function():
    return changeImage(1)

button1 = Button(...,command=temp_function) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:39:12.097

尝试`button1`在您的`def changeImage(Num)`. Python 是自上而下读取的，因此即使没有调用该函数，您也应该在到达该点之前声明所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:56:25.450

您需要保留对图像的引用，以便可以在事件处理程序中切换它：

```
def changeImage(num):
    global buttonOn, buttonOff, button1
    if num == 1:
        newimage = buttonOff if button1.image == buttonOn else buttonOn
        button1.image = newimage
        button1.config(image=newimage)

# ...
button1 = Button(image=buttonOn, width=20, height=20, command=lambda:changeImage(1))
button1.image = buttonOn 
```

# java - EDT 与听众

> ID：15149531
> 
> 赞同：0
> 
> 时间：2013-03-01T02:36:41.950
> 
> 标签：java, swing, event-dispatch-thread

好的，我知道我刚刚问了一个类似的问题，但我试图简化它，所以我使用了一个看起来很糟糕的例子，一个我没想到的问题，因此得到了没有解决我的问题的答案问题。

我有这样的设置：

我在 EDT 中有一个方法。它在一堆 JTextAreas 中循环，并删除空的。

那么有什么问题呢？

每次移除 JTextArea 时，都会触发一个侦听器，然后在视觉上更新 GUI（将 JTextArea 下方的所有视觉对象拉起）。

那么会发生什么？好吧，当循环正在执行时，JTextAreas 并没有被视觉删除，它们被添加到 EDT que 中（我猜），然后在循环完成后立即将它们全部删除。然后发生的事情是所有的侦听器都立即启动并弄乱了整个 GUI。

由于一切都在 EDT 上运行，我希望代码如下所示：

*   开始循环
*   找到一个空的 JTextArea
*   完全移除一个空的 JTextArea -> 触发监听器
    *   在监听器中执行代码
*   继续循环
*   查找下一个空的 JTextArea
*   冲洗并重复直到循环结束

我怎样才能强制我的程序这样做呢？

我应该创建一个搜索空白 JTextAreas 的新线程，并在 invokeLater(new Runnable()) 中完成删除吗？进行搜索的实际代码实际上并不是 CPU 密集型的，它只通过 JTextAreas 的 arrayList 并检查 getText().equals("")，所以我真的不认为这是必要的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:51:51.913

删除单个文本区域。确定是否还有更多要删除的内容，如果是，则将一个任务排队，使用`SwingUtilities.invokeLater()`该任务回调到当前代码中。重复直到所有文本区域都被删除。

# ruby-on-rails - 对我不想提交的 ActiveRecord 实例进行更改

> ID：15149542
> 
> 赞同：0
> 
> 时间：2013-03-01T02:37:38.337
> 
> 标签：ruby-on-rails, ruby, activerecord, rails-activerecord

我正在开发一个带有几个扩展 ActiveRecord::Base 的模型类的 Rails 应用程序。我已经在其中一些模型类上实现了多种方法，这些方法可以用来更新数据库内容，并且这些方法都可以按照我希望的方式工作。例如，我有一个`TeamStats`将各种统计值存储到数据库的类，并且我定义了允许我通过应用游戏结果来更新这些属性的方法：

```
class TeamStats < ActiveRecord::Base

  belongs_to :team

  def << game_result
     # Lots of stuff here to update persisted attributes for 
     # wins, losses, total points scored, etc
  end

end

class Team < ActiveRecord::Base
    has_one :stats, :class_name => TeamStats, :dependent => destroy
end 
```

现在我发现自己想要重用该逻辑，但使用一些我不想提交到数据库的临时数据。例如，我想使用游戏的子集而不是所有游戏重新计算团队的统计数据。所以我有这样的代码：

```
# relevant_game_results is an array containing game results I want considered
teams.each do |team|
    new_stats = TeamStats.new(:team => team)
    relevent_game_results.each do |results|
        new_stats << results
    end
end

# Do stuff to choose a team based on these un-persisted stats that have been 
# assigned to the team

# After I'm done, through all the team_stats I created and make sure all of the
# related team model objects still reference their original team stats values 
```

我最初的计划是修改我的模型实例，然后`reload`在我完成后调用这些实例。例如：

```
teams.each do |team|
    team.reload
end 
```

我认为这会起作用，但我必须为很多对象做这件事，如果可以的话，我宁愿在一次操作中做到这一点。

似乎我真正需要的是一个总是回滚而不是提交的事务。执行此操作的最合适的“rails 方式”是什么？我应该在一个`transaction`区块内执行此操作，然后`ActiveRecord::Rollback`在我的区块末尾提出一个吗？换句话说，像这样的东西？

```
Team.transaction do

  teams.each do |team|
      new_stats = TeamStats.new(:team => team)
      relevent_game_results.each do |results|
          new_stats << results
      end
  end

  # Do stuff to choose a team based on these un-persisted stats that have been 
  # assigned to the team

  raise ActiveRecord::Rollback
end 
```

这对我来说似乎有点“肮脏”，但这只是我的 Java 背景；）是否有更符合 Rails 方式的更清洁的方法？

更新：事实证明，将其包装在事务中并回滚不仅丑陋，而且似乎很难使其正常工作。因为执行此代码的方法本身可以在另一个事务中，并且由于 ActiveRecord 关系对象的某些更改的某些趋势是自动保存的，所以我不得不跳过许多环节才能使其正常工作。

根据接受的答案中的建议，我已经采用了完全创建新 TeamStats 对象的方法，只是从不保存它。似乎对我来说工作得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:52:00.790

您应该查看 ActiveAttr ( [https://github.com/cgriego/active_attr](https://github.com/cgriego/active_attr) ) 或 Virtus [https://github.com/solnic/virtus](https://github.com/solnic/virtus)之类的内容。您将创建完全在内存中的对象。这也有一个很好的 railscast：[http ://railscasts.com/episodes/326-activeattr](http://railscasts.com/episodes/326-activeattr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:57:07.230

与其回滚，不如先复制一份，然后再不保存？例如：

```
# in TeamStats

def hypothetically_add(games)
  copy = dup
  games.each {|game| copy << game }
  copy
end 
```

如果您基于查询所有游戏的匹配来生成统计信息，那么一次将游戏添加到 Stats 对象可能不是正确的方法。对游戏集合进行操作可能会更好。

```
# in Team

def stats_from_games_where(*conditions)
  games.where(*conditions).reduce( Hash.new(0) ) do |stats, game|
    stats[:wins] += 1 if # we won
    ... 
  end
end 
```

# xcode - 错误：'.section' 指令 .section .text 中出现意外标记

> ID：15149545
> 
> 赞同：4
> 
> 时间：2013-03-01T02:37:57.823
> 
> 标签：xcode, assembly, arm

当我在 xcode 中编译程序集 'xx.s' 并且 xx.s 中出现一些错误“错误：'.section' 指令 .section .text 中的意外标记”时，代码如下：

```
.section .text

.global PreMDCT

PreMDCT:

stmdb     sp!, {r4 - r11, lr}

add         r9, r0, r1, lsl #2

sub         r3, r9, #32

movs        r1, r1, asr #2

beq         PreMDCT_END

.end 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T08:14:09.270

虽然这是有效的 gcc / as code，但它可能不是有效的 xcode 语法。

[xcode devoloper 手册](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/Assembler/040-Assembler_Directives/asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF101)建议 .text 是它自己的指令，它是第一个隐式指令。因此它可以简单地与

```
.text
.global asdf
asdf:
        nop
        ret
.end 
```

甚至没有第一个指令。

# java - 如何在 Eclipse Juno 中使用 JavaFX？

> ID：15149547
> 
> 赞同：21
> 
> 时间：2013-03-01T02:38:31.077
> 
> 标签：java, eclipse, windows-installer, javafx-2

我已经安装了`jdk1.7.0_15`。

[JavaFX 的下载页面](http://www.oracle.com/technetwork/java/javafx/downloads/index.html?ssSourceSiteId=ocomen)说明如下：

> JavaFX 2.2.7 包含最新的安全修复程序，并与适用于 Windows、Mac 和 Linux 的最新 JDK 7 捆绑在一起。
> 下载带有 JavaFX 2.2.7 的 Java SE 7

就像一个好的菜鸟一样，我按照说明安装了 JDK。现在，当我寻找`jfxrt.jar`可以作为用户库导入 Eclipse 的文件时，我找不到它。JDK 的文件夹中还有一些其他`JavaFX`相关的库，`lib`但我不明白接下来要导入什么。

Google 上的大多数教程，包括 Java 的教程，都非常古老。
请帮助我开始使用 JavaFX

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T04:16:46.810

我建议使用[e(fx)clipse](http://www.eclipse.org/efxclipse/index.html)。

e(fx)clipse 是一个帮助在 Eclipse 中进行 JavaFX 开发的插件，它将解决您的类路径问题并为您提供许多其他有用的功能以及分步文档和代码完成帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-01T02:50:13.787

好问题。我记得我刚开始的时候也遇到了同样的问题。这是一步一步的指南。

1) 创建一个新的 JavaFx 项目（这实际上与 Java 项目相同，只是带有一个更合适的骨架）
2) 如果您遇到“找不到 javafx.application”之类的错误，请添加 jfxrt.jar通过右键单击库并选择“添加文件夹/Jar”您将不得不浏览到您的 jdk 文件夹并找到 jfxrt.jar。这是它在我的 jdk 中的位置：
`/jdk1.7.0_15/jre/lib/jfxrt.jar`
3) 对于第三步，我建议查看[这个示例。](https://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html "JavaFX 示例")这个例子附带了示例代码，我用它来复制和粘贴，直到我对 javafx 有一点熟悉。

# floating-point - VHDL 代码无法与测试平台正确连接

> ID：15149550
> 
> 赞同：0
> 
> 时间：2013-03-01T02:38:44.390
> 
> 标签：floating-point, vhdl

*我正在尝试用组合*逻辑制作一个 32 位浮点乘法器。据我所知，我已经这样做了，除非我尝试在其中模拟我的测试台。如果我用我的代码进行模拟，我会在所有值中得到 U。如果我取出我的代码并进行模拟，我会得到我的输入向量。我知道我还没有完全标准化我的尾数。我完全不明白为什么。一切都完美编译。我遇到的唯一问题是在模拟测试台时获取值......一切都在正确调用一切。任何帮助将非常感激。

**请注意测试台确实可以工作，我已经用其他确实返回正确值的 VHDL 对其进行了模拟**

这是我的乘数代码：

```
library IEEE                   ;
use IEeE.std_logic_1164.all    ;
use ieee.std_logic_arith.all   ;
use ieee.numeric_std.all       ;
Use Ieee.std_logic_unsigned.all; 

entity FP_MULTIPLIER is
    port( A_VAL, B_VAL : in std_logic_vector (31 downto 0);
            F_VAL : out std_logic_vector (31 downto 0));
end FP_MULTIPLIER;--

architecture Behavioral of FP_MULTIPLIER is
signal exponant : std_logic_vector (8 downto 0);
signal holder : std_logic_vector (47 downto 0);
signal PPA1 : std_logic_vector (47 downto 0);
signal PPA2 : std_logic_vector (47 downto 0);
signal PPA3 : std_logic_vector (47 downto 0);
signal PPA4 : std_logic_vector (47 downto 0);
signal PPA5 : std_logic_vector (47 downto 0);
signal PPA6 : std_logic_vector (47 downto 0);
signal PPA7 : std_logic_vector (47 downto 0);
signal PPA8 : std_logic_vector (47 downto 0);
signal PPA9 : std_logic_vector (47 downto 0);
signal AD1  : std_logic_vector (47 downto 0);
signal AD2  : std_logic_vector (47 downto 0);
signal AD3  : std_logic_vector (47 downto 0);
signal almost:std_logic_vector (23 downto 0);
signal F0:std_logic_vector (47 downto 0);
signal F1:std_logic_vector (47 downto 0);
constant ZERO : std_logic_vector := "000000000000000000000000000000000000000000000000";     --zero vektir for imputs

type temp_MP is array (6 downto 1) of std_logic_vector (47 downto 0);
signal MP :temp_MP;
type temp_PPA is array (23 downto 0) of std_logic_vector (47 downto 0);                         --creates 24 vectir array of 49 length
signal temp :temp_PPA := (others => (others => '0'));
begin

exponant(8) <= A_VAL(31) xor B_VAL(31);                                                         --gets sign bit
exponant (7 downto 0) <= ((A_VAL (30 downto 23) + B_VAL (30 downto 23)) - 127 );                --gets exponant

partial : for I in 0 to 23 generate
    temp(I) (23+I downto I) <= '1'& A_VAL(22 downto 0) WHEN B_VAL(I)='1' ELSE                   --fills vector array and shifts it properly
                                    (others => '0');
end generate partial;

RRU1 : entity work.RRU7_3 port map (temp(0),temp(1),temp(2),temp(3),temp(4),temp(5),temp(6),PPA1,PPA2,PPA3);
RRU2 : entity work.RRU7_3 port map (temp(7),temp(8),temp(9),temp(10),temp(11),temp(12),temp(13),PPA4,PPA5,PPA6);
RRU3 : entity work.RRU7_3 port map (temp(14),temp(15),temp(16),temp(17),temp(18),temp(19),temp(20),PPA7,PPA8,PPA9);
RRU4 : entity work.RRU7_3 port map (temp(21),temp(22),temp(23),ZERO,PPA7,PPA8,PPA9,MP(1),MP(2),MP(3));
RRU5 : entity work.RRU7_3 port map (PPA1,PPA2,PPA3,PPA4,PPA5,PPA6,ZERO,MP(4),MP(5),MP(6));
RRU6 : entity work.RRU7_3 port map (MP(1),MP(2),MP(3),MP(4),MP(5),MP(6),ZERO,AD1,AD2,AD3);
RRU32: entity work.RRU3_2 port map (AD1,AD2,AD3,F1,F0);

holder <= F1+ F0;    --implement with CSA?

almost <=   holder(46 downto 22) WHEN holder(47)='1' ELSE  --fix for rounding and radix point
                holder(45 downto 21);

F_VAL <= exponant & almost;

end Behavioral; 
```

这是我的测试台的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;
use STD.TEXTIO.all;
use IEEE.STD_LOGIC_TEXTIO.all;

entity ATB_FPM is
end entity ATB_FPM;

architecture ATB_FPM of ATB_FPM is

component FP_MULTIPLIER is
  port (
    A_VAL : in  STD_LOGIC_VECTOR ( 31 downto 0 );
    B_VAL : in  STD_LOGIC_VECTOR ( 31 downto 0 );
    F_VAL : out STD_LOGIC_VECTOR ( 31 downto 0 )
  );
end component FP_MULTIPLIER;

type F_VALS_ARRAY is array ( 0 to 15 ) of STD_LOGIC_VECTOR ( 31 downto 0 );
constant A_VALS : F_VALS_ARRAY := (
  X"3F800000", X"3F800000", X"3FA33333", X"38D1B717",
  X"41160000", X"41020831", X"43000000", X"40300000",
  X"47129320", X"41B80A3D", X"42C80000", X"46EC8E00",
  X"49791900", X"45800000", X"46733D52", X"390164EF"
);
constant B_VALS : F_VALS_ARRAY := (
  X"40000000", X"449F6000", X"42C80000", X"3951B717",
  X"460CAF00", X"42F61EB8", X"43800000", X"46210100",
  X"47000600", X"3B8B4396", X"43480000", X"4641BC00",
  X"3C4A42AF", X"46000000", X"44FC8666", X"3959945B"
);

signal X_A_VAL : STD_LOGIC_VECTOR ( 31 downto 0 );
signal X_B_VAL : STD_LOGIC_VECTOR ( 31 downto 0 );
signal X_F_VAL : STD_LOGIC_VECTOR ( 31 downto 0 );

begin
UUT: FP_MULTIPLIER
  port map (
    A_VAL => X_A_VAL,
    B_VAL => X_B_VAL,
    F_VAL => X_F_VAL
  );

process
variable DLAY : TIME;
constant T50N : TIME := 50 ns;
file OUT_FILE : TEXT open WRITE_MODE is "results.txt";
variable BUF  : LINE;
constant SP2  : STRING( 1 to 2 ) := "  ";
constant SP4  : STRING( 1 to 4 ) := "    ";
constant HDR  : STRING( 1 to 38 ) := "  A_VAL     B_VAL       F_VAL     TIME";
variable LNO  : INTEGER := 1;
begin
   for I in 0 to 15 loop
     if LNO = 1 then
       LNO := LNO + 1;
       write ( BUF, HDR );
       writeline ( OUT_FILE, BUF );
     elsif LNO = 25 then
       LNO := 1;
     else
       LNO := LNO + 1;
     end if;
     X_A_VAL <= A_VALS(I) ;    X_B_VAL <= B_VALS(I);
     wait for 50 ns;
     DLAY := T50N - X_F_VAL'LAST_EVENT; 
   hwrite ( BUF, X_A_VAL );  write ( BUF, SP2 );
   hwrite ( BUF, X_B_VAL );  write ( BUF, SP4 );
   hwrite ( BUF, X_F_VAL );  write ( BUF, SP4 );
   write  ( BUF, DLAY    );
   writeline ( OUT_FILE, BUF );
   end loop;
end process;

end architecture ATB_FPM; 
```

应大众需求，这是我的 RRU7to3；

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity RRU7_3 is
  port (
    A_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    B_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    C_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    D_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    E_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    F_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    G_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    F2_VEC : out STD_LOGIC_VECTOR ( 47 downto 0 );
    F1_VEC : out STD_LOGIC_VECTOR ( 47 downto 0 );
    F0_VEC : out STD_LOGIC_VECTOR ( 47 downto 0 )
  );
end entity RRU7_3;

architecture WASTEFUL of RRU7_3 is

component WTA7_3 is
  port (
    A  : in  STD_LOGIC;
    B  : in  STD_LOGIC;
    C  : in  STD_LOGIC;
    D  : in  STD_LOGIC;
    E  : in  STD_LOGIC;
    F  : in  STD_LOGIC;
    G  : in  STD_LOGIC;
    F0 : out STD_LOGIC;
    F1 : out STD_LOGIC;
    F2 : out STD_LOGIC
  );
end component WTA7_3;

signal ROW2 : STD_LOGIC_VECTOR ( 65 downto 0 );
signal ROW1 : STD_LOGIC_VECTOR ( 65 downto 0 );
signal ROW0 : STD_LOGIC_VECTOR ( 65 downto 0 );

begin

GEN_LABEL: for I in 0 to 47 generate
  WTAUNIT: WTA7_3
    port map (
      A  => A_VEC(I),
      B  => B_VEC(I),
      C  => C_VEC(I),
      D  => D_VEC(I),
      E  => E_VEC(I),
      F  => F_VEC(I),
      G  => G_VEC(I),
      F0 => ROW0(I),
      F1 => ROW1(I+1),
      F2 => ROW2(I+2)
  );
end generate;

  F0_VEC <= ROW0( 47 downto 0 );
  F1_VEC <= ROW1( 47 downto 1 ) & '0';
  F2_VEC <= ROW2( 47 downto 2 ) & "00";

end architecture WASTEFUL; 
```

现在这里是 RRU3to2

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity RRU3_2 is
  port (
    A_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    B_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    C_VEC  : in  STD_LOGIC_VECTOR ( 47 downto 0 );
    F1_VEC : out STD_LOGIC_VECTOR ( 47 downto 0 );
    F0_VEC : out STD_LOGIC_VECTOR ( 47 downto 0 )
  );
end entity RRU3_2;

architecture WASTEFUL of RRU3_2 is

component CSADDER is
  generic (
    G_DELAY : TIME := 1 ns
  );
  port (
    A : in  STD_LOGIC;
    B : in  STD_LOGIC;
    C : in  STD_LOGIC;
    F0: out STD_LOGIC;
    F1: out STD_LOGIC
  );
end component CSADDER;

signal ROW1 : STD_LOGIC_VECTOR ( 48 downto 0 );
signal ROW0 : STD_LOGIC_VECTOR ( 48 downto 0 );

begin

GEN_LABEL: for I in 0 to 47 generate
  WTAUNIT: CSADDER
    port map (
      A  => A_VEC(I),
      B  => B_VEC(I),
      C  => C_VEC(I),
      F0 => ROW0(I),
      F1 => ROW1(I+1)
  );
end generate;

  F0_VEC <= ROW0( 47 downto 0 );
  F1_VEC <= ROW1( 47 downto 1 ) & '0';

end architecture WASTEFUL; 
```

我还编辑了我上面的 FP_Multiplier 以反映为便于阅读而建议的更改（测试和编译仍然很好，根本没有值。）

这是模拟的图像：

![模拟只生产 U 并且拒绝运行](../Images/6ac7e9e1ce9a1336c36d056943376c3c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:57:58.300

这个实现不是为了容易理解而写的，并且有很多可能的改进。

但我怀疑最重要的一点是：据我所知，您只分配了名为“temp”的数组中每个部分产品的一部分，而将每个部分产品的其余部分分配为“UUUU”。我们只能保证 RRU 单元“工作”，并且无法判断它们是否将这些“UUU”输入值解析为输出上的“UUU”；他们似乎很可能是。建议您将定义的值分配给每个“temp”值的所有值。这可能足以解决困难，但只有你才能知道，除非你用缺失的信息更新问题。

进一步的改进：

1.  为什么不将部分产品数组称为`partial_products`而不是`temp`？
2.  为什么不调用符号位`sign`而不是`temp_man(8)`？同上指数，而`a_mantissa` 不是`'1'& A_VAL(22 downto 0)`
3.  正如 vermaete 所说，使用标准库`numeric_std`而不是 std_logic_arith 和 std_logic_unsigned （这可能相互矛盾）。然后将您的未签名数量（如部分产品）声明为“未签名”而不是 slv。
4.  除非您打算修改`ZERO`(!) 的值，否则将其声明为常量而不是信号（并且该`(others => '0')`表单可以节省所有这些数字的计数！）。
5.  请注意，`holder`您分配给的两个切片的`almost`大小不同。如果，如您所说，在这种状态下“一切都完美编译”，请针对您正在使用的工具提交错误报告，并在此处发布其名称和版本，以便我们避免使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:40:21.453

您的测试平台应该至少驱动 FB_MULTIPIER 组件（又名[DUT](http://en.wikipedia.org/wiki/Device_under_test)）的输入。在更好的情况下，它还将读取 DUT 的输出并检查它们是否符合预期。

在您的测试台中，我找不到您为 X_A_VAL 和 X_B_VAL 赋值的地方。如果您不驱动 std_logic，它将处于未初始化状态 ('U')。

作为旁注：

```
use ieee.std_logic_arith.all   ;
use ieee.numeric_std.all       ;
Use Ieee.std_logic_unsigned.all; 
```

是旧式和新式库的混合体。[您可以在VHDL FAQ](http://www.vhdl.org/comp.lang.vhdl/FAQ1.html#4.11)中找到有关它的更多信息。但我建议你不要这样做，只使用`use ieee.numeric_std.all`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:41:53.357

向量数组与他们正在处理的函数不匹配存在一个稍微复杂的问题。解决这个问题，并取出向量被“填充”为零的位置；代码现在可以工作了。**请注意，它尚未对数字进行标准化，** 尽管它确实为某个点提供了一个有点准确的数字。

**对于那些好奇的人，这里有一些工作描述**

```
library IEEE                   ;
use IEeE.std_logic_1164.all    ;
use ieee.std_logic_arith.all   ;
use ieee.numeric_std.all       ;
Use Ieee.std_logic_unsigned.all; 

entity FP_MULTIPLIER is
    port( A_VAL, B_VAL : in std_logic_vector (31 downto 0);
            F_VAL : out std_logic_vector (31 downto 0));
end FP_MULTIPLIER;--

architecture Behavioral of FP_MULTIPLIER is
signal exponant : std_logic_vector (8 downto 0);
signal holder : std_logic_vector (47 downto 0);
signal PPA1 : std_logic_vector (47 downto 0);
signal PPA2 : std_logic_vector (47 downto 0);
signal PPA3 : std_logic_vector (47 downto 0);
signal PPA4 : std_logic_vector (47 downto 0);
signal PPA5 : std_logic_vector (47 downto 0);
signal PPA6 : std_logic_vector (47 downto 0);
signal PPA7 : std_logic_vector (47 downto 0);
signal PPA8 : std_logic_vector (47 downto 0);
signal PPA9 : std_logic_vector (47 downto 0);
signal AD1  : std_logic_vector (47 downto 0);
signal AD2  : std_logic_vector (47 downto 0);
signal AD3  : std_logic_vector (47 downto 0);
signal almost:std_logic_vector (23 downto 0);
signal there: std_logic_vector (23 downto 0);
signal F0:std_logic_vector (47 downto 0);
signal F1:std_logic_vector (47 downto 0);
constant ZERO : std_logic_vector := "000000000000000000000000000000000000000000000000";     --zero vektir for imputs

type temp_MP is array (6 downto 1) of std_logic_vector (47 downto 0);
signal MP :temp_MP;
type temp_PPA is array (23 downto 0) of std_logic_vector (47 downto 0);                         --creates 24 vectir array of 49 length
signal temp :temp_PPA := (others => (others => '0'));
begin

exponant(8) <= A_VAL(31) xor B_VAL(31);                                                         --gets sign bit
exponant (7 downto 0) <= ((A_VAL (30 downto 23) + B_VAL (30 downto 23)) - 127 );                --gets exponant

partial : for I in 0 to 23 generate
    temp(I) (23+I downto I) <= '1'& A_VAL(22 downto 0) WHEN B_VAL(I)='1' ELSE                   --fills vector array and shifts it properly
                                    (others => '0');
end generate partial;

RRU1 : entity work.RRU7_3 port map (temp(0),temp(1),temp(2),temp(3),temp(4),temp(5),temp(6),PPA1,PPA2,PPA3);
RRU2 : entity work.RRU7_3 port map (temp(7),temp(8),temp(9),temp(10),temp(11),temp(12),temp(13),PPA4,PPA5,PPA6);
RRU3 : entity work.RRU7_3 port map (temp(14),temp(15),temp(16),temp(17),temp(18),temp(19),temp(20),PPA7,PPA8,PPA9);
RRU4 : entity work.RRU7_3 port map (temp(21),temp(22),temp(23),ZERO,PPA7,PPA8,PPA9,MP(1),MP(2),MP(3));
RRU5 : entity work.RRU7_3 port map (PPA1,PPA2,PPA3,PPA4,PPA5,PPA6,ZERO,MP(4),MP(5),MP(6));
RRU6 : entity work.RRU7_3 port map (MP(1),MP(2),MP(3),MP(4),MP(5),MP(6),ZERO,AD1,AD2,AD3);
RRU32: entity work.RRU3_2 port map (AD1,AD2,AD3,F1,F0);

holder <= F1+ F0;

almost <=   holder(46 downto 23) WHEN holder(47)='1' ELSE
                holder(47 downto 24);

F_VAL <= exponant & almost (22 downto 0);

end Behavioral; 
```

# python - 如何使用基于类的视图为 Django 指定自定义 404 视图？

> ID：15149555
> 
> 赞同：13
> 
> 时间：2013-03-01T02:39:19.183
> 
> 标签：python, django, http-status-code-404

使用 Django，您可以通过在根目录中执行以下操作来覆盖默认的 404 页面`urls.py`：

```
handler404 = 'path.to.views.custom404' 
```

使用基于类的视图时如何做到这一点？我无法弄清楚，文档似乎什么也没说。

我试过了：

```
handler404 = 'path.to.view.Custom404.as_view' 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-01T02:49:16.080

没关系，我忘了试试这个：

```
from path.to.view import Custom404
handler404 = Custom404.as_view() 
```

现在看起来很简单，它可能不值得在 StackOverflow 上提问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-25T06:22:45.313

通过在我的自定义 404 CBV 中使用以下代码来管理它（在其他 StackOverflow 帖子中找到它：[Django handler500 as a Class Based View](https://stackoverflow.com/questions/13633508/django-handler500-as-a-class-based-view)）

```
from django.views.generic import TemplateView

class NotFoundView(TemplateView):
    template_name = "errors/404.html"

    @classmethod
    def get_rendered_view(cls):
        as_view_fn = cls.as_view()

        def view_fn(request):
            response = as_view_fn(request)
            # this is what was missing before
            response.render()
            return response

        return view_fn 
```

在我的根 URLConf 文件中，我有以下内容：

```
from apps.errors.views.notfound import NotFoundView

handler404 = NotFoundView.get_rendered_view() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-01T12:55:41.687

在您的 main`urls.py`中，您只需添加`from app_name.views import Custom404` 然后设置`handler404 = Custom404.as_view()`. 它应该工作

# android - Android：将谷歌地图居中于某个地区或位置

> ID：15149558
> 
> 赞同：-2
> 
> 时间：2013-03-01T02:39:32.023
> 
> 标签：android, maps

我正在使用谷歌地图开发一个应用程序，我想将地图集中在某个国家，比如突尼斯，该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:14:17.643

假设您使用的是 Google Maps V2（您应该是），Google Maps 有许多相机更新方法，用于移动相机（以及用户看到的内容）。

在这种情况下，您需要确定目标位置的纬度和经度，然后使用[CameraUpdateFactory.newLatLng](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#newLatLng%28com.google.android.gms.maps.model.LatLng%29)。

然后，您将使用：

```
GoogleMap map = ...;
map.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(lat,lng)); 
```

其中 lat 和 lng 以度为单位（根据[LatLng 文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/LatLng)）。

# javascript - 在淡出背景的同时保持完全不透明的文本

> ID：15149561
> 
> 赞同：0
> 
> 时间：2013-03-01T02:40:04.737
> 
> 标签：javascript, html, css, background, fade

如何让文本保持完全不透明度，同时淡出背景？

我需要获得可读的文本，但在 mouse 期间背景会褪色`onrollover`。我找到了像“box”或“text-box”这样的解决方案，但它没有用。

Javascript：

```
$(document).ready(function () {
    // valore iniziale del fade sull'immagine a riposo 
    $(".fade").fadeTo(0, 0.6);

    $(".fade").hover(function () {
        // valore del fade sull'immagine con mouse hover 
        $(this).fadeTo("fast", 0.8);
    },
    function () {
        // ritorno al valore iniziale del fade con mouse out 
        $(this).fadeTo("fast", 0.6);
    });
}); 
```

CSS：

```
#content {
    position: relative;
    width: 100%;
}

#content > ul > li {
    position: absolute;
    width: 100%;
}

#content > ul > li > div {
    overflow: hidden;
    background: url(../images/pages_bg2.png);
    height: 100%;
} 
```

HTML：

```
<article id="content"> Text Area </article> 
```

# jquery - 用于循环的 jQuery

> ID：15149563
> 
> 赞同：0
> 
> 时间：2013-03-01T02:40:12.063
> 
> 标签：jquery

我正在学习 jQuery，需要一些帮助来循环和添加 1 到一个类。

到目前为止我有这个。

```
var $$ = jQuery;
$$(document).ready(function() {
var i = 1;
for (i < .dropdown_2columns ul li.drop) {
$$(".dropdown_2columns ul li.drop").addClass("dropfirst-" + i);
$$(".dropdown_2columns ul li .dropdown_2columns").addClass("tier3");
$$(".dropdown_2columns ul li .tier3").removeClass("dropdown_2columns");
$$(".dropdown_2columns .col_2 ul").addClass("firstsub");
$$(".dropdown_2columns .col_2:last-child").addClass("hide"); 
i++;
})
}); 
```

HTML

```
<div class="dropdown_2columns">
<div class="col_2">
<ul class="firstsub">
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
<li class="drop dropfirst"></li>
</ul>
</div> 
```

我想增加`dropfirst class`for each的计数`li.dropfirst element`。知道我做错了什么吗？PS我在整个网站上寻找帮助，但找不到我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:42:46.117

这不是一个有效的陈述：

```
for (i < .dropdown_2columns ul li.drop) 
```

它应该是这样的：

```
for (var i=1; i < $('.dropdown_2columns ul li.drop').length; i++) 
```

此外，使用此语法，`i`将为您递增，因此没有理由`i++`在循环内进行，并且您已`i`在创建循环的过程中定义。

没有这样的事情，`$$`除非您已经创建了该函数或在一些您没有发布的代码中为其添加了别名。

现在说了这么多，并不是 100% 清楚你想从你的代码中做什么。我怀疑您想要做的类似于 Jonathan 和 ComputerArts 发布的解决方案，但我不确定，所以我将把它们留给实现示例，并停止指出明显的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:46:04.313

改为使用每个

```
$('.dropdown_2columns ul li.drop').each(function(i,v){
  $(".dropdown_2columns ul li.drop").addClass("dropfirst-" + i);
  $(".dropdown_2columns ul li .dropdown_2columns").addClass("tier3");
  $(".dropdown_2columns ul li .tier3").removeClass("dropdown_2columns");
  $(".dropdown_2columns .col_2 ul").addClass("firstsub");
  $(".dropdown_2columns .col_2:last-child").addClass("hide"); 
}); 
```

[演示](http://jsbin.com/onizax/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:46:57.123

这应该这样做。[小提琴](http://jsfiddle.net/vvSF6/1/)

```
$(document).ready(function () {
    $('.dropdown_2columns').each(function (i) {
        $(this).find('ul li.drop').addClass('dropfirst-' + i);
        $(this).find('ul li .dropdown_2columns').addClass('tier3').removeClass('dropdown_2columns'); //there are no elements like this in your HTML
        $(this).find('.col_2 ul').addClass('firstsub');
        $(this).find('.col_2:last-child').addClass('hide');
    })
}); 
```

using`.each()`创建一个循环。您可以将参数传递给函数......在这种情况下，'i' 是一个计数器。

`$(this)`引用`.dropdown_2colums`元素，然后找到要操作的子元素。

**还有**你的子弹是嵌套的......我想你忘了关闭它们`<li></li>`

# java - JTree如何显示文件名？

> ID：15149565
> 
> 赞同：3
> 
> 时间：2013-03-01T02:40:38.440
> 
> 标签：java, swing, jtree

在我的项目中，我正在尝试添加一个文件资源管理器，以便用户可以从给定目录中选择文件。我想将此视图限制为项目的根文件夹（由用户确定）。这很像 Eclipses Package Explorer，因为“工作区”是由用户决定的。

当前文件不显示我想要的完整路径（来自 C:），但所有文件夹都显示完整路径（我不想要，我只想要文件夹名称）。

那么 JTree 是如何显示这些名称的呢？

我已经看到 JTree 使用 File.tostring() 方法，但是当我实现自己的文件并覆盖 toString 方法时，没有任何改变。

这是我的代码：

```
import java.awt.BorderLayout;
import java.io.File;

import javax.swing.JFileChooser;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.util.Collections;
import java.util.Vector;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;

public class pnl_fileView extends JPanel {
    /**
     * Display a file system in a JTree view
     * 
     * @version $Id: FileTree.java,v 1.9 2004/02/23 03:39:22 ian Exp $
     * @author Ian Darwin
     */
    /** Construct a FileTree */

    //  public pnl_fileView(){
    private myFile projectFile;
    public pnl_fileView(myFile dir) {
        //Create file explorer
        //Need to add setup for root folder change.
        //Config.getProject(); //This gets the current file from the config file.
        //Begin choose File
        if(projectFile == null){
            JFileChooser chooser;
            String choosertitle = "Please Choose a Root Folder";
            chooser = new JFileChooser(); 
            chooser.setCurrentDirectory(new java.io.File("."));
            chooser.setDialogTitle(choosertitle);
            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            //
            // disable the "All files" option.
            //
            chooser.setAcceptAllFileFilterUsed(false);
            //    
            if (chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) { 
                System.out.println("getCurrentDirectory(): " + chooser.getCurrentDirectory());
                System.out.println("getSelectedFile() : " + chooser.getSelectedFile());
                projectFile = new myFile(chooser.getSelectedFile().getAbsolutePath());
                //projectFile = chooser.getSelectedFile();
            }
            else {
                System.out.println("No Selection ");
            }
        }
        else {
            // Figure out where in the filesystem to start displaying
        }

        //End choose file
        setLayout(new BorderLayout());

        // Make a tree list with all the nodes, and make it a JTree
        JTree tree = new JTree(addNodes(null, projectFile));

        // Add a listener
        tree.addTreeSelectionListener(new TreeSelectionListener() {
            public void valueChanged(TreeSelectionEvent e) {
                DefaultMutableTreeNode node = (DefaultMutableTreeNode) e
                        .getPath().getLastPathComponent();
                System.out.println("You selected " + node);
            }
        });

        // Lastly, put the JTree into a JScrollPane.
        JScrollPane scrollpane = new JScrollPane();
        scrollpane.getViewport().add(tree);
        add(BorderLayout.CENTER, scrollpane);
    }

    /** Add nodes from under "dir" into curTop. Highly recursive. */
    DefaultMutableTreeNode addNodes(DefaultMutableTreeNode curTop, myFile dir) {
        String curPath = dir.getPath();
        System.out.println(curPath);
        DefaultMutableTreeNode curDir = new DefaultMutableTreeNode(curPath);
        if (curTop != null) { // should only be null at root
            curTop.add(curDir);
        }
        Vector<String> ol = new Vector<String>();
        String[] tmp = dir.list();
        for (int i = 0; i < tmp.length; i++)
            ol.addElement(tmp[i]);
        Collections.sort(ol, String.CASE_INSENSITIVE_ORDER);
        myFile f;
        Vector<String> files = new Vector<String>();
        // Make two passes, one for Dirs and one for Files. This is #1.
        for (int i = 0; i < ol.size(); i++) {
            String thisObject = (String) ol.elementAt(i);
            String newPath;
            if (curPath.equals("."))
                newPath = thisObject;
            else
                newPath = curPath + myFile.separator + thisObject;
            System.out.println("this is the path: " + newPath);
            if ((f = new myFile(newPath)).isDirectory())
                addNodes(curDir, f);
            else
                files.addElement(thisObject);
        }
        // Pass two: for files.
        for (int fnum = 0; fnum < files.size(); fnum++)
            curDir.add(new DefaultMutableTreeNode(files.elementAt(fnum)));
        return curDir;
    }

    public Dimension getMinimumSize() {
        return new Dimension(200, 400);
    }

    public Dimension getPreferredSize() {
        return new Dimension(200, 400);
    }

    /** Main: make a Frame, add a FileTree */
    public static void main(String[] av) {

        JFrame frame = new JFrame("FileTree");
        frame.setForeground(Color.black);
        frame.setBackground(Color.lightGray);
        Container cp = frame.getContentPane();

        if (av.length == 0) {
            cp.add(new pnl_fileView(new myFile(".")));
        } else {
            cp.setLayout(new BoxLayout(cp, BoxLayout.X_AXIS));
            for (int i = 0; i < av.length; i++)
                cp.add(new pnl_fileView(new myFile(av[i])));
        }

        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}
class myFile extends File{
    public myFile(String pathname) {
        super(pathname);

    }
    public String toString() {
        return "Hello World!";
    }
    public String getAbsolutePath(){
        return "hi";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T04:54:36.820

除了 之外[`JFileChooser`](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)，自定义 Java 文件资源管理器的其他示例包括：

*   [`FileBrowserGUI`](https://codereview.stackexchange.com/q/4446/6692).

![图片](../Images/23cdb3ac31746680c2928b202bef1f23.png)

*   [`org.netbeans.swing.outline.Outline`](https://codereview.stackexchange.com/a/4447/6692)与`FileTreeModel`.

![图片](../Images/7c1220f9da6f43a6289eb3845f86da6a.png)

*   `JTree`，[这里](https://stackoverflow.com/a/14837208/230513)`FileTreeModel`描述。

![图片](../Images/1f3cb1d12ce51946b19f7fcad746a75e.png)

*   [`PanelBrowser`](https://stackoverflow.com/a/15104660/230513).

![图片](../Images/da7055ba9e49032c0a59673d3dab0d5a.png)

*   [*Java 文件管理器*](http://sourceforge.net/projects/jfm/?source=navbar)。

![图片](../Images/6b05b49224cd4e26241d66bb5133b890.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T03:20:37.237

就个人而言，我不会尝试通过使用其他对象来设置节点显示值，我会将其留给`TreeCellRenderer`决定。造成这种情况的主要原因是程序的其他部分可能需要节点包含的数据。

![在此处输入图像描述](../Images/cf65c7bfbac73e2b42a2423511a3d1cf.png)

```
import java.io.File;
import javax.swing.JFileChooser;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Vector;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.filechooser.FileSystemView;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;

public class TestFileTree extends JPanel {

    private File projectFile;

    public TestFileTree(File dir) {
        //Create file explorer
        //Need to add setup for root folder change.
        //Config.getProject(); //This gets the current file from the config file.
        //Begin choose File
        if (projectFile == null) {
            JFileChooser chooser;
            String choosertitle = "Please Choose a Root Folder";
            chooser = new JFileChooser();
            chooser.setCurrentDirectory(new java.io.File("."));
            chooser.setDialogTitle(choosertitle);
            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            //
            // disable the "All files" option.
            //
            chooser.setAcceptAllFileFilterUsed(false);
            //    
            if (chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
                System.out.println("getCurrentDirectory(): " + chooser.getCurrentDirectory());
                System.out.println("getSelectedFile() : " + chooser.getSelectedFile());
                projectFile = new File(chooser.getSelectedFile().getAbsolutePath());
                //projectFile = chooser.getSelectedFile();
            } else {
                System.out.println("No Selection ");
            }
        } else {
            // Figure out where in the filesystem to start displaying
        }

        //End choose file
        setLayout(new BorderLayout());

        // Make a tree list with all the nodes, and make it a JTree
        JTree tree = new JTree(addNodes(null, projectFile));
        tree.setCellRenderer(new MyTreeCellRenderer());

        // Add a listener
        tree.addTreeSelectionListener(new TreeSelectionListener() {
            public void valueChanged(TreeSelectionEvent e) {
                DefaultMutableTreeNode node = (DefaultMutableTreeNode) e
                        .getPath().getLastPathComponent();
                System.out.println("You selected " + node);
            }
        });

        // Lastly, put the JTree into a JScrollPane.
        JScrollPane scrollpane = new JScrollPane();
        scrollpane.getViewport().add(tree);
        add(BorderLayout.CENTER, scrollpane);
    }

    /**
     * Add nodes from under "dir" into curTop. Highly recursive.
     */
    DefaultMutableTreeNode addNodes(DefaultMutableTreeNode curTop, File dir) {
        DefaultMutableTreeNode curDir = new DefaultMutableTreeNode(dir);
        if (curTop != null) { // should only be null at root
            curTop.add(curDir);
        }
        File[] tmp = dir.listFiles();
        Vector<File> ol = new Vector<File>();
        ol.addAll(Arrays.asList(tmp));
        Collections.sort(ol, new Comparator<File>() {
            @Override
            public int compare(File o1, File o2) {

                int result = o1.getName().compareTo(o2.getName());

                if (o1.isDirectory() && o2.isFile()) {
                    result = -1;
                } else if (o2.isDirectory() && o1.isFile()) {
                    result = 1;
                }

                return result;
            }
        });
        // Pass two: for files.
        for (int fnum = 0; fnum < ol.size(); fnum++) {
            File file = ol.elementAt(fnum);
            DefaultMutableTreeNode node = new DefaultMutableTreeNode(file);
            if (file.isDirectory()) {
                addNodes(node, file);
            }
            curDir.add(node);
        }
        return curDir;
    }

    public Dimension getMinimumSize() {
        return new Dimension(200, 400);
    }

    public Dimension getPreferredSize() {
        return new Dimension(200, 400);
    }

    public static void main(String[] av) {

        JFrame frame = new JFrame("FileTree");
        frame.setForeground(Color.black);
        frame.setBackground(Color.lightGray);
        Container cp = frame.getContentPane();

        if (av.length == 0) {
            cp.add(new TestFileTree(new File(".")));
        } else {
            cp.setLayout(new BoxLayout(cp, BoxLayout.X_AXIS));
            for (int i = 0; i < av.length; i++) {
                cp.add(new TestFileTree(new File(av[i])));
            }
        }

        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public class MyTreeCellRenderer extends DefaultTreeCellRenderer {

        private FileSystemView fsv = FileSystemView.getFileSystemView();

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {
            System.out.println(value);
            super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
            if (value instanceof DefaultMutableTreeNode) {
                value = ((DefaultMutableTreeNode)value).getUserObject();
                if (value instanceof File) {
                    File file = (File) value;
                    if (file.isFile()) {
                        setIcon(fsv.getSystemIcon(file));
                        setText(file.getPath());
                    } else {
                        setIcon(fsv.getSystemIcon(file));
                        setText(file.getName());
                    }
                }
            }
            return this;
        }
    }
} 
```

您的代码中有一些“有趣”的部分。

虽然`Vector`不是一个糟糕的选择，`List`（或者在这种情况下，特别`ArrayList`是 ）更快，因为它不同步。

而不是使用循环将元素添加到列表中，使用`Arrays.asList(...)`将数组转换为列表并使用`List#addAll`方法（它`Vector`也在）

我不确定您使用的是什么版本的 Java，但您现在可以使用`for-each`Java 6（我认为），这意味着`for (int i = 0; i < ol.size(); i++)`您可以使用`for (String thisObject : ol)`.

因为您在列表中使用泛型，所以不需要转换对象；）

# c - 在C中的链表内将元素添加到链表

> ID：15149568
> 
> 赞同：0
> 
> 时间：2013-03-01T02:41:13.080
> 
> 标签：c, struct, linked-list

我正在尝试为主列表中的每个元素创建一个小列表。我的主列表工作正常，但我不知道如何访问小列表并将元素添加到小列表中。

```
struct smallList
{
    char data;
    struct smallList *next;
};

struct bigList
{
    char data;
    struct bigList *next;
    struct smallList *head;
} *root; 
```

当我将东西添加到主列表时，我为每个新节点声明：

```
newNode->head = NULL; 
```

我使用这个函数来获取指向主列表中元素的当前指针：

```
struct bigList *pointer = getPointer(root, value); 
```

然后，向它的`smallList| using that pointer. I pass along`指针->head 中添加东西到这个函数。它不工作。

```
insert(pointer->head, value) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:01:41.810

正如 WhozCraig 所建议的，您可以使用指向指针的指针来解决您的问题。像这样的东西：

```
void insert(struct smallList **head, char value)
{
    *head = newSmallList(value, *head);
} 
```

`newSmallList`会是这样的：

```
struct smallList *newSmallList(char value, struct smallList *rest)
{
    struct smallList *result = malloc(sizeof(struct smallList));
    result->next = rest;
    result->data = value;
    return result;
 } 
```

当前设置的问题是，当您想要更改存储在该字段中的内容时，您将指针->head 字段（恰好为空）的*值传递给函数。*这是一个使用整数的程序，它说明了一个类似的错误：

```
void setFive(int i)
{
    i = 5;
}

int main(void)
{
    int myInt = 7;
    setFive(myInt);
    printf("%d\n", myInt); /* still 7! */
    return 0;
} 
```

# c# - .NET WCF 命名管道与 COM 对象性能

> ID：15149572
> 
> 赞同：2
> 
> 时间：2013-03-01T02:41:50.030
> 
> 标签：c#, .net, wcf, com, named-pipes

我有一个将结构加载到内存中的 .NET \ C# 类。在同一台机器上有一个 C++ 应用程序需要能够查询内存结构。

我的问题是关于性能的。我可以将功能公开为 C++ 可以通过 COM 调用的 COM 对象……或者我可以将其实现为 WCF 服务，我相信 C++ 应用程序将能够通过命名管道进行查询……

有没有人有任何性能方面的经验？我喜欢比较 WCF Named Pipes Vs. 的一些很棒的统计数据。TCP 与 HTTP，但我对 COM 的了解还不够，无法对它的执行方式做出有根据的决定。任何想法将不胜感激。

谢谢沃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:52:01.123

MS SQL 通过命名管道工作（一般来说，基于 tcp 通道），所以我认为它的性能足够好。

看看[在 .NET 中选择通信选项](http://msdn.microsoft.com/en-us/library/8119f66k%28VS.85%29.aspx)

今天 AFAIK WCF 的命名管道/tcp 对话是通过网络（LAN 或全局）进行交互处理的推荐方式。WCF 是 Remoting 的继承者，并取代了托管代码的 COM/DCOM。但远程处理尚未弃用/遗留，可用于跨应用程序域二进制通信。

# javascript - 使用jQuery查找两个DIV之间的距离？

> ID：15149573
> 
> 赞同：29
> 
> 时间：2013-03-01T02:41:53.297
> 
> 标签：javascript, jquery, html

我有两个 DIV，我需要知道它们的计算浏览器距离（高度）。我已经阅读了有关偏移功能的信息，但这些示例并不是针对我尝试执行此操作的方式编写的。

示例用法：

```
<div class="foo"></div>
<div class="bar"></div> 
```

我想知道这两者之间的距离。

请帮助我使用 jQuery 动态查找距离。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-01T02:44:13.860

像这样的东西应该工作：

```
$('.foo').offset().top - $('.bar').offset().top 
```

只要每个类在页面上只有一个元素。
如果它们不是唯一的，则给这两个元素一个 ID 和引用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T02:45:01.537

使用[`.offset()`](http://api.jquery.com/offset/)：

```
$('.foo').offset().top - $('.bar').offset().top 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T01:08:46.453

此函数查找两个元素中心之间的像素距离，没有 jquery：

```
function distanceBetweenElems(elem1, elem2) {
    var e1Rect = elem1.getBoundingClientRect();
    var e2Rect = elem2.getBoundingClientRect();
    var dx = (e1Rect.left+(e1Rect.right-e1Rect.left)/2) - (e2Rect.left+(e2Rect.right-e2Rect.left)/2);
    var dy = (e1Rect.top+(e1Rect.bottom-e1Rect.top)/2) - (e2Rect.top+(e2Rect.bottom-e2Rect.top)/2);
    var dist = Math.sqrt(dx * dx + dy * dy);
    return dist;
} 
```

我这样使用它：

```
var target1 = document.querySelector('#foo');
var target2 = document.querySelector('#bar');
if (distanceBetweenElems(target1,target2)<100){
     target1.classList.add('active');
} 
```

# git - Git 新提交作为项目的旧版本

> ID：15149575
> 
> 赞同：1
> 
> 时间：2013-03-01T02:42:01.547
> 
> 标签：git

在 Git 中，是否有可能做这样的事情？

```
master B - C - D 
```

到这个？

```
master A - B - C - D 
```

我有一个使用 Git 的现有项目，一切都很顺利。但是我找到了该项目的旧版本，我希望将其提交到同一个 repo，但将其作为 A 并使其看起来像是该项目的最早版本。可以在 Git 中做到这一点吗？还是有其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:40:52.277

是的，这很容易做到，但我将从标准警告开始，以了解它将`B-C-D`变为`B'-C'-D'`，也就是说，它们将具有新的提交哈希，并且将与存储库的任何现有克隆发生冲突。假设你没问题...

我们首先了解 git 是由一系列提交组织的，每个提交都有一个指向其父级的指针。以这种方式创建了提交树。

```
tree 1:  B - C - D 
```

由于您想要做的是在第一次提交之前添加一些东西——并且在第一次提交之前没有什么要解决的——我们必须创建一个新树来执行此操作。

要创建一个新树，我们将从一个空提交开始。将空提交作为存储库的第一次提交使这样的事情变得更容易。这是通过以下命令完成的（添加数字以供以后参考）

```
git checkout --orphan new-branch            (1)
git rm -r --force --cached .                (2)
git clean -fd                               (3)
git clean -fd                               (3a)
git commit --allow-empty -m 'Initialize'    (4) 
```

这将创建一个未连接到任何其他分支 (1) 的新分支。这将缓存工作目录中的所有文件并准备好提交。我们不想提交这些文件，因此 (2) 从缓存中删除它们；while (3) 将它们从目录中删除。有时需要清理两次，因为忽略的文件不会被清理，但 .gitignore 文件会——留下需要再次清理的文件。

最后，(4) 创建一个空提交作为该分支中的第一个提交。这个`--allow-empty`论点使这成为可能——任何消息都可以。

现在，添加项目早期版本中的所有文件`A`，然后提交。

```
git add .
git commit -m 'A'

------------------
tree 1:  B - C - D
tree 2:  A 
```

我们准备好继续前进`B-C-D`了`A`。仍然打开时`new-branch`，此命令将移动它们。

```
git rebase -i --onto new-branch --root D 
```

这将结帐`D`，将树（倒带）返回到根`B`并按顺序将每个提交移动到`A`- 每一步都进行新的提交，直到它回到`D`. **注意：这里很有可能会出现合并冲突，请准备好处理它们。**

完成后，树看起来像这样

```
tree 1: <empty>             <-- this will be garbage collected in time
tree 2: A - B' - C' - D' 
```

此时推送回您可能拥有的任何远程存储库 - 您需要强制推送

```
git push --force <remote> <local-branch>:<remote-branch> 
```

这将覆盖远程分支——**确保这是您想要**的。

这里的所有都是它的。请记住不要在您唯一的存储库副本上工作，以便您可以重新克隆并在它被打结时重试。除此之外，我建议您继续阅读，`git rebase ...`以便您熟悉正在发生的事情 - 以及您可能遇到的怪癖，具体取决于`B-C-D`您实际存储库中的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:48:39.307

您是否可以将 A 添加为新提交，然后将交互式重新设置为 B ( `rebase -i B~1`) 之前的提交，以按照您想要的方式重新排序提交？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:22:11.240

是的，有一个警告。假设您从以下内容开始：

```
B - C - D

```

结果将是

```
A B C D'

```

请注意“主要”标记——B' 将具有与 B 相同的*树*（内容），但由于其父级不同，它将具有不同的 SHA-1 哈希。

最简单的方法是使用移植物。创建一个同时包含 A 和 B 的存储库：

```
一种

B - C - D

```

请注意它们如何不相互连接。[您通过“嫁接”（ Wiki 页面](https://git.wiki.kernel.org/index.php/GraftPoint)）将它们彼此连接起来，这使 A 成为 B 的父...

```
一种
 \
  ...
     \
      B - C - D

```

我用了一条虚线，因为移植是暂时的。嫁接是通过编辑`.git/info/grafts`和写作创建的：

```
<B 的哈希值> <A 的哈希值>

```

使用以下命令使移植物永久化：

```
git filter-branch --tag-name-filter cat -- --all

```

这会将图表更改为：

```
A B C D'

```

使其永久化后，删除移植文件。

通常的警告适用——您正在重写历史记录，因此任何拉取您的存储库的人都必须使用`git reset`，只要他们没有本地更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T03:06:31.957

简而言之，没有。

Git 中的每个提交都由一个哈希表示，“父”提交是哈希生成的元素之一。

因此，如果更改 B 的父级，则 B 将不再是 B（即哈希将不再相同）

您仍然可以通过使用 rebase 来做到这一点，即首先创建 A，然后在 A 上 rebase B、C、D...。但是，正如我之前所说，哈希将不再相同。如果这对你来说很好，那就继续吧:)

# javascript - Javascript 复选框 onClick 添加

> ID：15149581
> 
> 赞同：0
> 
> 时间：2013-03-01T02:42:44.337
> 
> 标签：javascript, html, onclick

我有一个带有两个复选框的表格。

复选框 A = 1500 美元 复选框 B = 1500 美元

我想要做的是，当复选框 A 被“选中”时，我想显示 1500 美元并添加到隐藏值中。未选中时，减去 1500 美元。

当两个复选框都选中时，我希望彼此执行加法，这意味着我希望总共有“$ 3000”的值，当删除一个时，相应地减去。

目前使用我的代码，我可以使它仅适用于一个复选框，这意味着，当复选框被选中时，它将是 1500 美元，当它被删除时，它会被减去。我不知道如何组合复选框 A 和复选框 B。

请查看我的代码并帮助我。

**HTML**

```
<label>
    <input type="checkbox" name="Meeting" onClick="if (this.checked) { onCheck3() } else { onUncheck3() }" value="Pre-Meeting 1" id="Meeting" />
     Pre-Meeting 1
</label>
<label>
    <input type="checkbox" name="Meeting" onClick="if (this.checked) { onCheck4() } else { onUncheck4() }" value="Pre-Meeting 2" id="Meeting" />
     Pre-Meeting 2
</label>

<input type="text" name="PreMeetingAmount" readonly id="PreMeetingAmount" /><input type="hidden" name="PreMeetingAmounthidden" readonly id="PreMeetingAmounthidden" /> 
```

**Javascript**

```
function onCheck3(){  
    t = document.form1.PreMeetingAmount.value;
    t2 = 0;

    if (t == 0) {
        document.form1.PreMeetingAmount.value = 1500;
    }
}
function onCheck4(){  
    t = document.form1.PreMeetingAmount.value;
    t2 = 0;

    if (t == 0) {
        document.form1.PreMeetingAmount.value = 1500;
    }
}

function onUncheck3(){  
    t = document.form1.PreMeetingAmount.value;
    t = t - 1500;

        if (t == 0)
            document.form1.PreMeetingAmount.value = document.form1.PreMeetingAmounthidden.value;
        else 
            document.form1.PreMeetingAmount.value = t;
}    

function onUncheck4(){  
    t = document.form1.PreMeetingAmount.value;
    t = t - 1500;

        if (t == 0)
            document.form1.PreMeetingAmount.value = document.form1.PreMeetingAmounthidden.value;
        else 
            document.form1.PreMeetingAmount.value = t;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:48:22.040

您始终将值设置为 1500。您需要添加 1500 而不是将其设置为 1500。尝试更改 onCheck3 和 onCheck4，如下所示：

```
function onCheck3() {
    t = Number( document.form1.PreMeeting.value );
    document.form1.PreMeeting.value = t + 1500;
} 
```

# java - Android Surface 类 Surface.ROTATION_ 无法解析或不是字段

> ID：15149587
> 
> 赞同：1
> 
> 时间：2013-03-01T02:43:37.663
> 
> 标签：java, android, rotation, android-camera, surfaceholder

我正在尝试修复我的相机应用程序。当我在横向模式下握住相机时，它会在屏幕上横向预览。我在堆栈上找到了这个修复：[Android - Camera preview is sideways](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways)

在我的`CameraSurfaceView`类构造函数中，我得到了这样的表面`this.Surface = getHolder();`。在该`surfaceChanged`方法中，我根据 Surface.ROTATION_<#> 检查显示旋转 0、90、180 和 270 度（方法如下）。但是，每个`ROTATION`Surface 常量都带有以下错误下划线`ROTATION_<#> cannot be resolved or is not a field`。我不确定我做错了什么。我`CameraSurfaceView`的活动与我的活动是分开的，所以我想知道显示是否与它有关？希望这被正确解释，如果您需要更多代码或任何内容，请告诉我。我提前感谢这一点！

```
import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.WindowManager;
import android.widget.ZoomControls;

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    int orientation = 0;

    Camera.Parameters params = Cam.getParameters();

    WindowManager window = (WindowManager) getSystemService(Context.WINDOW_SERVICE); 
    android.view.Display display = window.getDefaultDisplay();

        if(display.getRotation() == Surface.ROTATION_0)
        {
            params.setPreviewSize(height, width);                           
            Cam.setDisplayOrientation(90);
        }

        if(display.getRotation() == Surface.ROTATION_90)
        {
            params.setPreviewSize(height, width);                           
        }

        if(display.getRotation() == Surface.ROTATION_180)
        {
            params.setPreviewSize(height, width);               
        }

        if(display.getRotation() == Surface.ROTATION_270)
        {
            params.setPreviewSize(height, width);
            Cam.setDisplayOrientation(180);
        }

    List<Camera.Size> previewSizes = params.getSupportedPreviewSizes();
    Camera.Size previewSize = getBestPreviewSize(width, height);
    params.setPreviewSize(previewSize.width, previewSize.height); 

     int zoom = 0;
     params.setZoom(zoom);

    zoomControls.setOnZoomInClickListener(new View.OnClickListener(){
            public void onClick(View v){
                Camera.Parameters params = Cam.getParameters();
                maxZoomLevel = params.getMaxZoom();
                    if(currentZoomLevel < maxZoomLevel){
                        currentZoomLevel++;
                        Cam.startSmoothZoom(currentZoomLevel);
                    }
            }
        });

    zoomControls.setOnZoomOutClickListener(new View.OnClickListener(){
            public void onClick(View v){
                Camera.Parameters params = Cam.getParameters();
                maxZoomLevel = params.getMaxZoom();
                    if(currentZoomLevel > 0){
                        currentZoomLevel--;
                        Cam.startSmoothZoom(currentZoomLevel);
                    }
            }
        });    

    Cam.setParameters(params);

    try {
        Cam.setPreviewDisplay(Surface);
    } catch (IOException e) {
        e.printStackTrace();
    }

    Cam.startPreview();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:47:15.037

由于您有一个名为 的字段`Surface`，因此您无法`Surface`从类中访问该类。

相反，你将不得不写

```
android.view.Surface.ROTATION_0 
```

或重命名您的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:47:48.060

您已经命名了 field `Surface`，这也是您尝试从中引用常量的类型的名称。重命名该字段，使其与类型的名称不同，然后导入`android.view.Surface`，您应该可以毫无问题地引用`Surface.ROTATION_0`等。

请注意，Java 风格通常要求变量名以小写开头，类型以大写开头，这样可以避免这种类型的冲突。

# android - 奇怪的android性能问题

> ID：15149588
> 
> 赞同：1
> 
> 时间：2013-03-01T02:43:40.673
> 
> 标签：android, performance

我正在制作的 Android 游戏有一个奇怪的问题。这是一款 2D 动作益智游戏；精灵和背景是简单的不透明图像，但需要快速流畅地移动。然而，我一直遇到一般的帧速率问题，但这个特殊问题让我很困惑。

问题是我可以启动我的游戏（在硬件上，Nexus 7）并让它以至少 60fps 的帧速率运行，然后关闭它并重新启动它，它将以 30-45 的速度运行。重复此过程，游戏通常以较慢的帧速率运行，但每 4 次（左右）尝试运行时非常流畅。

我是 Android 和一般编程的新手，所以我想知道是否有人猜测是什么可能导致重复运行时出现这种性能差异？如果有帮助，我可以编辑以包含一些代码，但这似乎更具理论性，我不确定与发布相关的内容。

谢谢。

编辑：

这是我的 onCreate 代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.view.Window;
import android.view.WindowManager;

import com.jag.framework.Audio;
import com.jag.framework.FileIO;
import com.jag.framework.Game;
import com.jag.framework.Graphics;
import com.jag.framework.Input;
import com.jag.framework.Screen;

public abstract class AndroidGame extends Activity implements Game {
    AndroidFastRenderView renderView;
    Graphics graphics;
    Audio audio;
    Input input;
    FileIO fileIO;
    Screen screen;
    WakeLock wakeLock;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        boolean isPortrait = getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT;
        int frameBufferWidth = isPortrait ? 800: 1200;
        int frameBufferHeight = isPortrait ? 1200: 800;
        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        float scaleX = (float) frameBufferWidth
                / getWindowManager().getDefaultDisplay().getWidth();
        float scaleY = (float) frameBufferHeight
                / getWindowManager().getDefaultDisplay().getHeight();

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);
        fileIO = new AndroidFileIO(this);
        audio = new AndroidAudio(this);
        input = new AndroidInput(this, renderView, scaleX, scaleY);
        screen = getInitScreen();
        setContentView(renderView);

        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "MyGame");
    }

    @Override
    public void onResume() {
        super.onResume();
        wakeLock.acquire();
        screen.resume();
        renderView.resume();
    }

    @Override
    public void onPause() {
        super.onPause();
        wakeLock.release();
        renderView.pause();
        screen.pause();

        if (isFinishing())
            screen.dispose();
    }

    @Override
    public Input getInput() {
        return input;
    }

    @Override
    public FileIO getFileIO() {
        return fileIO;
    }

    @Override
    public Graphics getGraphics() {
        return graphics;
    }

    @Override
    public Audio getAudio() {
        return audio;
    }

    @Override
    public void setScreen(Screen screen) {
        if (screen == null)
            throw new IllegalArgumentException("Screen must not be null");

        this.screen.pause();
        this.screen.dispose();
        screen.resume();
        screen.update(0);
        this.screen = screen;
    }

    public Screen getCurrentScreen() {

        return screen;
    }
} 
```

这是我的主要代码：

```
import java.io.InputStream;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Random;

import android.content.res.AssetManager;
import android.graphics.Bitmap;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Rect;

import com.jag.framework.Game;
import com.jag.framework.Graphics;
import com.jag.framework.Image;

import com.jag.framework.Input.TouchEvent;
import com.jag.framework.Screen;

public class GameScreen extends Screen {
    enum GameState {
        Ready, Running, Paused, GameOver    
    }

    GameState state = GameState.Ready;

    // Variable Setup
    private static Scene scene;
    public static int screenheight;

    private ArrayList<Pieces> pieces;

    //lanes:
    int lane;

    Paint paint, paint2;
    Rect rect;
    Image fore, rings1, rings2, base1, base2;
    boolean recent, freeze, touch, pospressed, negpressed, wrongbutton;
    int timepassed, difficulty, recentinterval, score;
    Bitmap bitmap;
    Canvas canvas2;
    Rect foreg;
    InputStream in;
    AssetManager assets;

    public GameScreen(Game game) {
        super(game);

        // Initialize game objects here
        scene = new Scene(600);
        screenheight = game.getGraphics().getHeight();
        pieces = new ArrayList<Pieces>();

        lane = 100;
        recent = true;
        Pieces p3 = new Pieces(lane, 940, true);    
        pieces.add(p3);

        paint = new Paint();
        paint.setTextSize(30);
        paint.setTextAlign(Paint.Align.CENTER);
        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);        
        paint2 = new Paint();
        paint2.setColor(Color.WHITE);
        paint2.setStyle(Style.FILL);
        difficulty = 50;
        recentinterval = 30;
        timepassed = 0;
        freeze = false;
        fore = Assets.block;
        rings1 = Assets.ringswhite;
        rings2 = Assets.ringsblack;
        base1 = Assets.basewhite;
        base2 = Assets.baseblack;
        wrongbutton = false;
        score = 0;

    }

    @Override
    public void update(float deltaTime) {
        List<TouchEvent> touchEvents = game.getInput().getTouchEvents();

        // We have four separate update methods in this example.
        // Depending on the state of the game, we call different update methods.
        // Refer to Unit 3's code. We did a similar thing without separating the
        // update methods.

        if (state == GameState.Ready)
            updateReady(touchEvents);
        if (state == GameState.Running)
            updateRunning(touchEvents, deltaTime);
        if (state == GameState.Paused)
            updatePaused(touchEvents);
        if (state == GameState.GameOver)
            updateGameOver(touchEvents);
    }

    private void updateReady(List<TouchEvent> touchEvents) {

        // This example starts with a "Ready" screen.
        // When the user touches the screen, the game begins. 
        // state now becomes GameState.Running.
        // Now the updateRunning() method will be called!

        if (touchEvents.size() > 0) {

            game.getGraphics().clearScreen(Color.BLACK);            
            state = GameState.Running;
            Assets.theme.stop();
        }

    }

    private void updateRunning(List<TouchEvent> touchEvents, float deltaTime) {
        // 1\. All touch input is handled here:
        int len = touchEvents.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);
            if ((event.type == TouchEvent.TOUCH_DRAGGED || event.type == TouchEvent.TOUCH_DOWN) && event.y <= 1000) {
                touch = true;
                scene.setLine(event.x);
            }   

            //POSITIVE BUTTON
            if (event.type == TouchEvent.TOUCH_DOWN && ((0 < event.x) && (event.x < 250)) && event.y > 1000) {
                pospressed = true;
            }

            //NEGATIVE BUTTON
            if (event.type == TouchEvent.TOUCH_DOWN && ((550 < event.x) && (event.x < 800)) && event.y > 1000) {
                negpressed = true;
            }

            //ACTIVATES ALERT (reduce score)
            if (event.type == TouchEvent.TOUCH_UP) {
                touch = false;
                pospressed = false;
                negpressed = false;
            }   
        }

        // 2\. Check miscellaneous events like death:
        //        if (livesLeft == 0) {
        //            state = GameState.GameOver;
        //        }
        // 3\. Call individual update() methods here.
        // This is where all the game updates happen.
        // For example, robot.update();

        if (!freeze){
            timepassed += 1;
            if ((timepassed % recentinterval) == 0){
                recent = false;
            }
        }

        Random randomGenerator = new Random();
        int randomInt = randomGenerator.nextInt(difficulty);
        int randomInt2 = randomGenerator.nextInt(7);
        boolean randomBool = randomGenerator.nextBoolean();
        int chanceOfNewPiece = 8; 

        if ((randomInt < chanceOfNewPiece)&&!recent) {
            Pieces p = new Pieces((randomInt2+1)*lane, 940, randomBool);
            pieces.add(p);
            recent = true;
        }

        Iterator<Pieces> it = pieces.iterator();
        while (it.hasNext()) {
            Pieces p = it.next();
            if (p.isVisible()&&!p.wayback&&!freeze)
                p.update();
            else if (p.isVisible()&&!p.wayback&&freeze){
                p.still();
            }
            else if (p.wayback && pospressed){
                if (score > 10){
                    score -= 10;
                }
                if (score <= 10){
                    score = 0;
                }
                if (p.type){
                    it.remove();
                    freeze = false;
                    pospressed = false;
                    Assets.click.play(100);
                }
                if (!p.type){
                    freeze = false;
                    pospressed = false;
                    wrongbutton = true;
                }
            }
            else if (p.wayback && negpressed){
                if (score > 10){
                    score -= 10;
                }
                if (score <= 10){
                    score = 0;
                }
                if (p.type){
                    freeze = false;
                    negpressed = false;
                    wrongbutton = true;
                }
                if (!p.type){
                    it.remove();
                    freeze = false;
                    negpressed = false;
                    Assets.click.play(100);
                }

            }
            else if (p.isVisible() && p.wayback && wrongbutton){
                p.updateback();
            }           
            else if (p.isVisible()&&p.wayback){
                p.updateback();
                freeze = true;
            }

            else if (p.y < 10){
                score += 1;
                it.remove();
                freeze = false;
                wrongbutton = false;
            }

            else {
                //              if (p.y > screenheight-281){
                //                  game.getGraphics().clearScreen(Color.BLACK);
                //                  state = GameState.GameOver;
                //              }
                score = 0;
                it.remove();
                freeze = false;
                wrongbutton = false;
            }
        }

        //      if (pieces.size() == 0) {
        //
        //          game.getGraphics().clearScreen(Color.BLACK);
        //          state = GameState.GameOver;
        //      }

    }

    private void updatePaused(List<TouchEvent> touchEvents) {
        int len = touchEvents.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);
            if (event.type == TouchEvent.TOUCH_UP) {
                state = GameState.Running;
                Assets.theme.stop();
            }
        }
    }

    private void updateGameOver(List<TouchEvent> touchEvents) {
        int len = touchEvents.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);
            if (event.type == TouchEvent.TOUCH_UP) {

                nullify();
                game.setScreen(new MainMenuScreen(game));
                return;
            }
        }
    }

    @Override
    public void paint(float deltaTime) {

        //Debug.startMethodTracing();
        Graphics g = game.getGraphics();

        // draw the game elements
        if (state == GameState.Running){

            int fingerx = scene.getLine();
            g.drawRect(fingerx, 0, g.getWidth(), 1200, Color.BLACK);

            g.drawRect(0, 0, fingerx, 1200, Color.WHITE);

            if (touch == false){
                g.drawRect(250, 1000, 302, 205, Color.RED);
            }
            g.drawScaledImage(base1, fingerx, 955, g.getWidth()-fingerx, 
                    base2.getHeight(), fingerx, 0, g.getWidth()-fingerx, base2.getHeight());

            g.drawScaledImage(base2, 0, 955, fingerx, base2.getHeight(), 0, 0, fingerx, base2.getHeight());

            g.drawString(String.valueOf(score),
                    350, 1075, paint);  

            ////g.drawImage(back, 0, 0);
            //          g.drawScaledImage(Assets.fore, fingerx, 0, g.getWidth()-fingerx, 
            //                  Assets.fore.getHeight(), fingerx, 0, g.getWidth()-fingerx, Assets.fore.getHeight());        
            ////g.drawImage(Assets.topwhite, 0, 0);
            //g.saveCanvas();
            //g.drawTransRect(0, 0, fingerx, g.getHeight());
            ////g.drawImage(fore, 0, 0);            
            //g.drawImage(base2, 0, 955);           
            //          g.drawScaledImage(Assets.back, 0, 0, fingerx, Assets.back.getHeight(), 0, 0, fingerx, base2.getHeight());               
            //          g.drawScaledImage(base2, fingerx, 955, g.getWidth()-fingerx, base2.getHeight(), 
            //          fingerx, 0, g.getWidth()-fingerx, base2.getHeight());
            //g.drawCropped(base2);
            ////g.drawImage(rings2, 0, 950);            
            //g.restoreCanvas();    

            for (Pieces p : pieces){

                if (p.type == true)
                    g.drawImage(Assets.pos, (p.x - 40), p.y);

                if (p.type == false){
                    g.drawImage(Assets.neg, (p.x - 40), p.y);
                }
            }
        }

        // draw the UI
        if (state == GameState.Ready)
            drawReadyUI();
        if (state == GameState.Running)
            drawRunningUI();
        if (state == GameState.Paused)
            drawPausedUI();
        if (state == GameState.GameOver)
            drawGameOverUI();

        //Debug.stopMethodTracing();
    }
    private void nullify() {

        // Set all variables to null. You will be recreating them in the
        // constructor.
        paint = null;
        scene = null;
        pieces = null;  
        scene = null;
        pieces = null;      
        paint2 = null;
        Assets.theme = null;
        Assets.click = null;
        // Call garbage collector to clean up memory.
        System.gc();
    }

    private void drawReadyUI() {
        Graphics g = game.getGraphics();

        g.drawARGB(155, 0, 0, 0);
        g.drawString("TOUCH THE SCREEN YA DUMMY",
                400, 300, paint);       
    }

    private void drawRunningUI() {
        //Graphics g = game.getGraphics();
    }

    private void drawPausedUI() {
        Graphics g = game.getGraphics();
        // Darken the entire screen so you can display the Paused screen.
        g.drawRect(0, 0, 801, 1281, Color.BLACK);
        g.drawString("HEY GUY IT'S PAUSED", 640, 300, paint);
    }

    private void drawGameOverUI() {
        Graphics g = game.getGraphics();
        g.drawRect(0, 0, 1281, 801, Color.BLACK);
        g.drawString("GAME OVER BRO", 640, 300, paint);
    }

    @Override
    public void pause() {
        if (state == GameState.Running)
            System.gc();
        state = GameState.Paused;

    }

    @Override
    public void resume() {

    }

    @Override
    public void dispose() {

    }

    @Override
    public void backButton() {
        pause();
    }

    public static Scene getScene(){
        return scene;
    }

    public void setScore(int i){
        score += i;
    }

} 
```

我意识到这有点乱。这是我编码的第一件事。该框架来自kilobolt.com。让我知道我是否应该包括其他类/方法。

# opengl - glDrawElements 是否在后台缓冲区同步？

> ID：15149589
> 
> 赞同：2
> 
> 时间：2013-03-01T02:43:50.470
> 
> 标签：opengl

如果我调用`glDrawElements`绘制目标作为后台缓冲区，然后调用`glReadPixels`，是否保证我会读取绘制的内容？

换句话说，是`glDrawElements`阻塞调用吗？

注意：我在这里观察到一个奇怪的问题，可能是由于`glDrawElements`没有被阻塞引起的......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T04:23:42.387

> 换句话说， glDrawElements 是阻塞调用吗？

这不是 OpenGL 的工作方式。

[OpenGL 内存模型](http://www.opengl.org/wiki/Memory_Model)建立在“好像”规则之上。除了某些例外，[OpenGL 中的所有内容都会***像***您发出的所有命令都已完成](http://www.opengl.org/wiki/Synchronization)一样运行。实际上，一切都会像每个命令在完成之前都被阻塞一样工作。

但是，这并不意味着 OpenGL 实现实际上是这样工作的。它只需要尽一切努力使其*看起来*以这种方式工作。

因此，`glDrawElements`一般不是阻塞调用；但是，`glReadPixels`（当读取客户端内存时）*是*一个阻塞调用。因为直接传输到客户端内存的像素传输结果必须在返回时可用`glReadPixels`，所以实现必须检查是否有任何未完成的渲染命令进入正在读取的帧缓冲区。如果有，那么它必须阻塞，直到那些渲染命令完成。然后它可以执行读取并将数据存储在您的客户端内存中。

如果您正在[读取缓冲区对象](http://www.opengl.org/wiki/Pixel_Buffer_Object)，则无需`glReadPixels`阻塞。该函数不会修改客户端可访问的内存，因为您正在读取缓冲区对象。因此驱动程序可以异步发出回读。但是，如果您发出一些依赖于此缓冲区内容的命令（例如映射它以供读取或使用`glGetBufferSubData`），则 OpenGL 实现必须停止直到读取操作完成。

简而言之，OpenGL 尝试尽可能长时间地延迟阻塞。为了确保性能，你的工作是*帮助*OpenGL 做到这一点，除非绝对必要，否则不要[强制进行隐式同步。](http://www.opengl.org/wiki/Synchronization#Implicit_synchronization)[同步对象](http://www.opengl.org/wiki/Sync_Object)可以帮助解决这个问题。

# java - Activity.saveInstanceState 和 Guava ImmutableList 序列化

> ID：15149594
> 
> 赞同：0
> 
> 时间：2013-03-01T02:44:46.563
> 
> 标签：java, android, guava

我的活动有一个`private List<MyType> test`初始化为`ImmutableList.of()`. 此变量的唯一其他分配是`ImmutableList.copyOf()`复制`SingletonImmutableList`带有单个元素的 a `MyType`。

这是在我的 android 活动上运行的，我想保留这个列表的值。

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (!test.isEmpty())
    {
        outState.putSerializable(SAVE_TEST_KEY, (Serializable) test);
    }
} 
```

`putSerializable(...)`我已经将调试器连接起来并与`SingletonImmutableList`.

```
@Override
protected void onCreate(Bundle savedInstanceState) {
   ...

    if (savedInstanceState != null)
    {
        if (savedInstanceState.containsKey(SAVE_TEST_KEY))
        {
            Object tTest = savedInstanceState.get(SAVE_TEST_KEY);
        }
    }

  ...
  } 
```

在这条线上`savedInstanceState.get(...)`，我可以看到 get 的结果是`ArrayList`. 尝试将其强制转换为 ImmutableList 会导致 ClassCastException。

有人可以解释为什么类型会从序列化变为反序列化吗？

# c - 我在这里做错了什么？程序循环不停

> ID：15149600
> 
> 赞同：1
> 
> 时间：2013-03-01T02:45:06.487
> 
> 标签：c, clock, fibonacci

这是一个具有迭代斐波那契的 C 程序，使用 clock() 来计算获得第 n 个斐波那契数所需要的时间。程序不停地循环。我知道方程式是正确的，因为我能够在没有时钟功能的情况下正确运行程序。任何帮助表示赞赏！

```
#include<time.h>
#include<sys/file.h>
#include<stdio.h>

int main ( )
{
  int j=1, fib, n, i=1, k=0;
  int choice;
  float x,y,z;

  x = clock(); //start clock

  printf("input the fib number you want: ");
  scanf("$d", &n);

  while (k <=n)
  {
    fib = i + j;
    i = j;
    j = fib;
    ++k;

    printf( "The fib number is %d\n ", fib);
  }

  y =clock(); // end clock
  z = (y - x) / CLOCKS_PER_SEC;

  printf("\n\nThe execution time was: %.15f", z);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:47:05.250

`scanf("$d", &n);`需要`scanf("%d", &n);`。很有可能，程序启动时获得的任何随机值`n`都会使循环条件失败。

正如@dasblinkenlight 在评论中提到的那样，如果您想要一个有用的测量值，您应该在用户输入**后开始计时。**

此外，虽然大多数书籍似乎没有涵盖它，但检查返回值`scanf()`是一个好主意，因为它可以捕获像您上面这样的拼写错误（感谢@WilliamPursell）。像下面这样的东西会起作用：

```
if( scanf( "whatever random and incorrect format string", &n ) != 1 ) {
  /* exit with error message */
} 
```

来自[cplusplus.com](http://www.cplusplus.com/reference/cstdio/scanf/#return)：

> 成功时，该函数返回参数列表中成功填充的项目数。由于匹配失败、读取错误或到达*文件末尾*，此计数可以与预期的项目数匹配或更少（甚至为零） 。
> 
> 如果发生读取错误或读取时到达*文件结尾*，则设置正确的指示符（**feof**或**ferror**）。并且，如果在任何数据可以成功读取之前发生任何一种情况，`EOF`则返回。
> 
> 如果在解释宽字符时发生编码错误，该函数将**errno 设置**为`EILSEQ`。

# jquery-mobile - jQuery 移动弹出动态 URL

> ID：15149601
> 
> 赞同：1
> 
> 时间：2013-03-01T02:45:25.423
> 
> 标签：jquery-mobile, dynamic, popup, hyperlink

我在弹出窗口中有动态 URL 的问题。这是我的代码：

```
<!-- content -->
<ul data-role="listview">
    <li data-role="list-divider">Group 1</li>
        <li data-icon="false"><a href="person.php?id=1#popup-menu" data-rel="popup" data-transition="slideup">List 1a</a></li>
        <li data-icon="false"><a href="person.php?id=2#popup-menu" data-rel="popup" data-transition="slideup">List 1b</a></li>

    <li data-role="list-divider">Group 2</li>
        <li data-icon="false"><a href="person.php?id=3#popup-menu" data-rel="popup" data-transition="slideup">List 2a</a></li>
</ul><!-- /content -->

<!-- popup-menu -->
<div data-role="popup" id="popup-menu">
    <ul data-role="listview" style="min-width:210px;">
        <li data-role="divider">Choose an action</li>
            <li><a href="#">View details</a></li>
            <li><a href="#">Share</a></li>
    </ul>
</div><!-- /popup-menu --> 
```

基本上，当我单击弹出窗口上的链接时，我将转到**被调用者 url**所在的页面。

因此，如果我单击弹出窗口显示的**列表 1a**，然后单击**查看详细信息**页面将我定向到 URL **person.php?id=1**

我怎样才能做到这一点？

我可以根据列表的数量多次创建弹出 div，但我认为这是浪费 DOM 对象（如果我没有找到任何优雅的解决方案，我最后的手段）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:34:12.640

由于您实际上只需要将一个人的 id 传递给您的弹出窗口，您可以通过以下方式实现您的目标：

**首先**简化您的列表视图标记并存储列表视图项的锚点的`id`in属性`data-id`

```
<ul data-role="listview" id="list">
    <li data-role="list-divider">Group 1</li>
        <li data-icon="false"><a href="#" data-id="1">List 1a</a></li>
        <li data-icon="false"><a href="#" data-id="2">List 1b</a></li>

    <li data-role="list-divider">Group 2</li>
        <li data-icon="false"><a href="#" data-id="3">List 2a</a></li>
</ul> 
```

并将`id`标签添加到弹出窗口中的“查看详细信息”锚点，以便稍后访问

```
<li><a id="details" href="#">View details</a></li> 
```

**第二个**事件`click()`将当前 id 存储到全局可用变量（我们称之为`currentId`）并以编程方式打开弹出窗口。

```
var currentId = 0;
...
$('#page').on('pageinit', function(){
    $('#list li a').click(function(e){
        e.preventDefault();
        currentId = $(this).attr("data-id");
        $("#popup-menu").popup("open", {transition:"slideup"} );
    });
}); 
```

**第三个**事件`popupbeforeposition`构建您的网址并将其分配给适当的锚。

```
var baseURL = "person.php?id=";
...
$('#popup-menu').on('popupbeforeposition', function(){
    $("#details").attr("href", baseURL + currentId);
}); 
```

最后，这里是为您工作的**[jsFiddle](http://jsfiddle.net/pmatseykanets/5YKkM/)**。

# android - 我应该在我的 Android 文件夹中的哪里放置一个可绘制的形状？

> ID：15149604
> 
> 赞同：14
> 
> 时间：2013-03-01T02:45:39.043
> 
> 标签：android

我有一个`.xml`代表一个形状的文件和 5 个`drawable-***`文件夹（用于 hdpi、ldp、mdpi、xhdpi、xxhdpi）。

由于这是一个形状，我假设我只需要一个副本？我应该创建一个名为 drawable 的文件夹并将其放置在其中吗？或者我是否需要每个分辨率特定文件夹中的形状副本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T02:49:51.023

是的，你可以有一个`res/drawable`文件夹，即没有后缀。它将用于所有分辨率。您也可以使用`-nodpi`后缀，请参阅[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)了解详细信息。

# c++ - MSVC 友元函数声明错误

> ID：15149607
> 
> 赞同：2
> 
> 时间：2013-03-01T02:45:50.840
> 
> 标签：c++, templates, visual-c++

考虑以下代码：

```
#include <cstddef>

template<size_t value> class dummy { };

class my_class
{
    int m_member;

    // Overload 1
    template<size_t value>
    friend void friend_func(dummy<value>*);

    // Overload 2
    template<size_t value>
    friend void friend_func(int(*)[value]);
};

// Overload 1
template<size_t value>
void friend_func(dummy<value>*)
{
    my_class instance;
    instance.m_member = value;
}

// Overload 2
template<size_t value>
void friend_func(int(*)[value])
{
    my_class instance;
    instance.m_member = value;
}

int main(int argc, char* argv[])
{
    dummy<5> d;
    friend_func(&d);    // call Overload 1
    int arr[5];
    friend_func(&arr);  // call Overload 2 - error in MSVC!
    return 0;
} 
```

如您所见，这两个函数之间的唯一区别是第二个函数使用指向`value` `int`s 而不是`dummy<value>`. 此代码在 GCC（$ gcc-4.7.2 test.cpp）和 Clang（感谢[WhozCraig](https://stackoverflow.com/users/1322972/whozcraig)）中编译得很好，但在 MSVC 中抛出以下错误（我在 2012 年测试过）：

```
1>d:\path\to.cpp(32): error C2248: 'my_class::m_member' : cannot access private member declared in class 'my_class'
1>          d:\path\to.cpp(8) : see declaration of 'my_class::m_member'
1>          d:\path\to.cpp(7) : see declaration of 'my_class'
1>          d:\path\to.cpp(40) : see reference to function template instantiation 'void friend_func<5>(int (*)[5])' being compiled 
```

对我来说，这看起来像一个错误。但是，有没有人遇到过这样的行为？这真的是一个错误，还是错误有特定原因？有什么快速的解决方法吗？

* * *

**编辑：**我已经找到了合适的解决方法，请参阅[下面的答案](https://stackoverflow.com/questions/15149607/msvc-friend-function-declaration-bug#15151021)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:10:21.540

这绝对是一个错误：[根据数组大小参数化的模板函数不能声明为类的朋友](http://connect.microsoft.com/VisualStudio/feedback/details/717749/a-template-function-parametrized-on-the-size-of-an-array-cannot-be-declared-as-a-friend-of-a-class)。它在`value`被推断为您的朋友模板函数的数组大小时发生。这是您的代码的缩短版本，可以很好地编译。此示例与您的示例完全相同，只是我指定了数组的大小。

```
class my_class
{
    int m_member;

    template<size_t value>
    friend void friend_func(int(*)[5]);
};

template<size_t value>
void friend_func(int(*)[5])
{
    my_class instance;
    instance.m_member = value;
}

int main()
{
    int arr[5];
    friend_func<5>(&arr);
} 
```

一种解决方法是将其`value`作为第二个函数参数传递：

```
template <typename T>
void friend_func(T, int value)
{
    my_class instance;
    instance.m_member = value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:17:55.993

我想出了一种解决方法，既可以保留功能，又可以防止错误消息。这个想法是使用代理函数和代理类来携带指向数组的指针及其大小。这是解决方案：

```
#include <cstddef>

// Workaround class for a bug in MSVC.
// https://connect.microsoft.com/VisualStudio/feedback/details/717749
// http://stackoverflow.com/questions/15149607
template<class element_type, size_t count>
class friend_declaration_bug_workaround
{
public:
    typedef element_type(*ptr_type)[count];

private:
    ptr_type m_arr;

public:
    explicit friend_declaration_bug_workaround(ptr_type arr)
        : m_arr(arr)
    {
    }

    ptr_type value() const
    {
        return m_arr;
    }
};

class my_class
{
    int m_member;

    friend void friend_func(int*);

    template<size_t value>
    friend void friend_func_workaround(friend_declaration_bug_workaround<int, value>);
};

template<size_t value>
void friend_func_workaround(friend_declaration_bug_workaround<int, value> workaround)
{
    my_class instance;
    instance.m_member = (*workaround.value())[0];
}

void friend_func(int* arr)
{
    my_class instance;
    instance.m_member = *arr;
}

template<size_t value>
void friend_func(int(*arr)[value])
{
    friend_declaration_bug_workaround<int, value> workaround(arr);
    return friend_func_workaround(workaround);
}

int main(int argc, char* argv[])
{
    int value;
    friend_func(&value);    // call non-templated function
    int arr[5];
    friend_func(&arr);      // call workarounded function
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:23:28.407

很确定这是 MSVS 的一个已知问题。您的具体问题在[boost.org 上的 Portability Hints: Micrsoft Visual C++ 中列出](http://www.boost.org/doc/libs/1_31_0/more/microsoft_vcpp.html)。

寻找模板作为朋友。我不知道周围的工作。但是，我认为您可以让班级成为朋友。您也许可以将其用作解决方法。

# c# - Linux相当于Direct draw

> ID：15149614
> 
> 赞同：0
> 
> 时间：2013-03-01T02:46:50.313
> 
> 标签：c#, linux, mono, directdraw

作为 ac# 程序员，我习惯了 Microsoft，但是，我真的很喜欢 linux 方面的东西，Mono 更好地为我打开了这个世界（imo）。

我有一个应用程序可能需要一些直接绘制支持才能显示活动视频，我很好奇 linux 中的等价物（甚至更好的是，Mono 提供什么支持）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:12:29.280

OpenGL 相当于 Linux/BSD 和 Mac（以及 Windows 中）中的 DirectDraw。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:33:08.127

简短的回答是否定的，没有为 Mono 框架或一般 Linux 计划的 DirectX 支持/仿真。目前最接近的方法是使用 Wine 或 Cedega 之类的仿真层在 Linux 中运行 Windows 应用程序……在许多情况下，这不一定是完美的解决方案。

另一种方法是使用跨平台库，该库在多个平台上功能相同。[C# SDL](http://cs-sdl.sourceforge.net/)项目显然将在 Mono 上运行，这应该为您提供一致的图形操作界面。它基于相当成熟的[libsdl](http://www.libsdl.org/)，并且有很多示例。

# java - 检查数组是否具有特定字符，为什么我的代码不起作用？

> ID：15149624
> 
> 赞同：4
> 
> 时间：2013-03-01T02:47:36.920
> 
> 标签：java, arrays, search, contains

您好，这里有一些用于检查有效字符的代码，尽管该代码不起作用。即使 'operand' 是一个有效字符，它也永远不会打印 yes，并返回 false。无论如何，即使该字符是有效的，它也只是无法识别它并且总是转到 else 语句。请帮忙！

```
public static boolean checkValidOperands(char operand) {

    char[] validOperators = {'+', '-', '*', '/', 'q'};
    List<char[]> validOp = Arrays.asList(validOperators);
    if (validOp.contains(operand))  {
        System.out.println("Yes");
        return false;
    }  else {
        System.out.println("Please enter valid operand");
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T02:50:50.643

你可以使用：

```
List<Character> validOp = Arrays.asList('+', '-', '*', '/', 'q'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T02:52:13.160

您创建字符列表的方式是错误的。

在您当前的代码中，您创建的列表实际上是一个字符数组列表，而不是字符。

```
import java.util.Arrays;
import java.util.List;

public class Test{
    public static void main(String[] args){
    char ch = '+';
    System.out.println(checkValidOperands(ch));

    }

    public static boolean checkValidOperands(char operand) {

        Character[] validOperators = {'+', '-', '*', '/', 'q'};
        List<Character> validOp = Arrays.asList(validOperators);
        if (validOp.contains(operand))  {
            System.out.println("Yes");
            return false;
        }  else {
            System.out.println("Please enter valid operand");
            return true;
        }
    }
} 
```

PS：同样对于未来，不要使用`List<char>`，`List<int>`等等。因为你不能在 Java 中使用原始类型作为泛型。请改用其对应的对象计数器部件。有关更多信息，请参阅此问题[为什么 Java 集合不能直接存储 Primitives 类型？](https://stackoverflow.com/questions/2504959/why-can-java-collections-not-directly-store-primitives-types)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T17:00:43.993

对于一组字符来说，字符串是一种更好的数据结构。例如，

```
String validOperators = "+-*/q";

if (validOperators.indexOf(operand) != -1)  {
    System.out.println("Yes");
    return false;
} 
```

# api - iTunes 搜索 API - HTTPS artUrl？

> ID：15149633
> 
> 赞同：3
> 
> 时间：2013-03-01T02:48:37.810
> 
> 标签：api, itunes

当我通过 SSL 对 iTunes Search API 运行查询时，返回的大部分 URL 都是通过 HTTPS 提供的：

[https://itunes.apple.com/search?term=rihanna](https://itunes.apple.com/search?term=rihanna)

但是，artifactUrl 结果是通过 HTTP 提供的，手动更新它们会引发错误，因为 SSL 证书与它们使用的域不匹配。

有没有办法通过 HTTPS 而不是 HTTP 来获取这些图像？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-09T12:20:09.700

您必须替换子域：

```
http://is<n> with https://is<n>-ssl 
```

例子：

[http://is5.mzstatic.com/image/thumb/Music117/v4/dd/48/4a/dd484afb-2313-0a1a-ccf1-ff28a02ae2ca/source/100x100bb.jpg](http://is5.mzstatic.com/image/thumb/Music117/v4/dd/48/4a/dd484afb-2313-0a1a-ccf1-ff28a02ae2ca/source/100x100bb.jpg)

至

[https://is5-ssl.mzstatic.com/image/thumb/Music117/v4/dd/48/4a/dd484afb-2313-0a1a-ccf1-ff28a02ae2ca/source/100x100bb.jpg](https://is5-ssl.mzstatic.com/image/thumb/Music117/v4/dd/48/4a/dd484afb-2313-0a1a-ccf1-ff28a02ae2ca/source/100x100bb.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T07:31:37.430

iTunes 不支持通过 HTTPS 进行专辑封面或歌曲预览（目前）。

工具和 HTTPS 链接的更改是最近（仅四个月前）： http: [//www.apple.com/itunes/affiliates/resources/blog/secure-links-to-itunes---content-and -tools.html](http://www.apple.com/itunes/affiliates/resources/blog/secure-links-to-itunes---content-and-tools.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T19:27:07.747

SO 和 Swift 的新手 - 在找到这个 Q 和上面的答案之前偶然发现了这个问题。以下对我有用：

```
func withHTTPS() -> URL? {
  var components = URLComponents(url: self, resolvingAgainstBaseURL: true)
  components?.scheme = "https"
  let host = (components?.host)!
  components?.host = host.replacingOccurrences(of: ".", with: "-ssl.", options: .caseInsensitive, range: host.range(of: "."))
  return components?.url
} 
```

调用使用：

```
guard let url = item.artworkURL.withHTTPS() else { return } 
```

# nuget - 如何删除旧的 NuGet 包

> ID：15149636
> 
> 赞同：5
> 
> 时间：2013-03-01T02:48:47.557
> 
> 标签：nuget

我正在使用公共 NuGet 服务器，当我单击解决方案和管理 Nuget 包时，我可以看到许多包是旧版本的包也已安装。当我单击“管理”时，我可以看到我的解决方案中的任何项目都没有安装旧包，但我没有选择删除它。同时，最新的软件包安装在许多项目上，并且被引用和使用得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T05:09:49.637

NuGet.org 网站不提供删除已发布包的方法。原因是我们不想意外破坏任何可能使用旧版本的现有项目，或者强制现有用户升级他们的包。

不过，我们确实理解有特殊情况和理由对这条规则作出例外处理。如果您需要移除旧包，您可以使用网站上的“报告滥用”表格给我们留言，说明您需要移除包的原因，网站管理员将对其进行审核。

# tfs-workitem - TFS 2010 流程模板工作项自定义

> ID：15149638
> 
> 赞同：0
> 
> 时间：2013-03-01T02:48:55.660
> 
> 标签：tfs-workitem

我创建了一个名为“My Agile V2”的新默认流程模板，并将其成功上传到我们的 TFS 存储库中。

我还有一些导出的工作项定义文件，即 Bug.xml 和 UserStory.xml，它们对它们进行了一些定制，即添加了一些额外的字段等。我们已经在我们现有的一些项目中成功地使用了这些定制的工作项。

但是我现在想将这些定制的工作项作为新的“My Agile V2”流程模板的一部分包含在内，这样每次我们创建一个新项目时，我们就不必导入这些相同的 bug.xml 和 userstory。 xml 文件每次。

我设法导出“下载”现有流程模板，覆盖“WorkItem Tracking > TypeDefinitions”文件夹中的 bug.xml 和 userstory.xml 文件，然后重新上传。上传工作，但是工作项自定义没有通过任何方式。即它们仍然具有默认行为，并且没有我的自定义字段...

我哪里错了？？？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:09:37.373

我认为仅仅导入 WIT 是不够的。查看[将工作项实例添加到流程模板的页面](http://msdn.microsoft.com/en-us/library/ms243867%28v=vs.100%29.aspx)

# html - 我是否需要在or 标记等末尾添加“/” ？

> ID：15149641
> 
> 赞同：56
> 
> 时间：2013-03-01T02:49:08.700
> 
> 标签：html

你需要在标签`/`的末尾有一个吗？`img`我在 W3schools.com 上看到[了一个](http://www.w3schools.com/tags/tag_img.asp)`/`没有:

```
<img src="smiley.gif" alt="Smiley face" height="42" width="42"> 
```

我知道没有必要自行关闭标签，至少在我的浏览器中是这样，但我应该这样做吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-01T02:50:37.660

**只有`/`XHTML 和 XML 才需要。**

如果您使用的是 HTML5 文档类型，则**无需以**这种方式终止自闭合标签。

这适用于`<img src="img.png" />`,`<br />`等`<hr />`。

即只需使用`<img src="img.png">`,`<br>`和`<hr>`。

如果您需要一个空元素（例如 a `div`），**请不要使用`<div />`**，而是使用`<div></div>`. 这很重要，因为在 HTML5 中，[斜杠被忽略](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)并被`<div />`解释为`<div>`没有结束标记。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-01T02:53:38.650

如其他答案所述，仅 XHTML 标准需要它。然而，它还有另一个用途。

Notepad++ 等一些代码编辑器允许您展开/折叠标签以加快查看速度。但是，如果您只是放`<img>`，它应该如何知道不需要结束标记的标记与使用相同标记名称但需要（即在 XML 中）的标记之间的区别？如果您使用自定义标签，则尤其如此。

因此，使用`/>`明确告诉编辑器它是自动关闭的，允许它继续正常工作，而不是让它警告你标签不匹配。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T07:36:16.153

除了有效性问题，这仅取决于您验证的文档类型，斜杠仅在您的页面使用 XML 内容类型提供时才真正重要，例如`application/xhtml+xml`（很少使用，因为旧版本的 IE 阻塞它） .

如果你这样做，那么格式正确的错误处理是严酷的：任何错误（例如没有匹配的结束标签的开始标签，在使用`<img ... />`语法时可能是开始标签本身）都会阻止页面显示，而是显示一条错误消息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T02:54:13.413

我认为关闭 img 标签会更好。在我的脑海中，我能想到两个原因：

1.  如果您关心这类事情，它不会在 xhtml 下验证。

2.  任何试图以编程方式使用它的人/任何人都可能会感到困惑/遇到有关未关闭标签的问题。谁知道呢，这将来可能包括你。:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T02:54:36.857

该代码在不使用的情况下在 html 中是可以接受的，`/`但在 XHTML 中是必需的。我更喜欢穿上 `/`这样从 HTML 迁移到 XHTML 没有问题

# pointers - Clojure 有变量引用吗？

> ID：15149643
> 
> 赞同：3
> 
> 时间：2013-03-01T02:49:27.033
> 
> 标签：pointers, clojure

我正在尝试实现一个神经网络，每个神经元都需要对其他神经元的引用。我一直在尝试通过原子来实现这个引用。

考虑代码

```
(def neuron1 {:connections [(atom 0)])
(def neuron2 {:connections [(atom neuron1)]})

(update-in neuron1 [:connections 0] #(reset! % neuron2)) 
```

最后一个会炸毁堆栈。

因此，原子似乎*包含*其内容，而不仅仅是*引用*它们。

如果我想传递一个指针的等价物，我该怎么办？我是否必须使用函数，如

```
(def neuron1 {:connections [(fn [] neuron2)]}) 
```

并调用它，而不是使用原子并取消引用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T04:07:10.643

你的代码很好。破坏堆栈的原因是您在 REPL 上运行 update-in 命令，*这会导致它打印结果*。由于每个神经元都嵌套在另一个神经元中，因此 print 语句会遇到堆栈溢出。尝试将 update-in 命令包含在另一个语句中，例如 (type)，或者在另一个函数中运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T04:33:57.527

WolfeFan 已经回答了“为什么使用stackoverflow”的部分问题。就指针/引用类型的功能而言，您可以将 var（绑定到神经元）存储在原子中，而不是神经元对象本身。另外，我建议将连接作为向量的原子，而不是将单个连接作为原子，因为您很可能会从多个线程修改连接对象。

例子：

```
(def neuron1 {:connections (atom [])})
(def neuron2 {:connections (atom [#'neuron1])})

(update-in neuron1 [:connections] #(swap! % conj #'neuron2)) 
```

当您需要获取连接的神经元时，您需要使用`var-get`：

```
(-> neuron1 :connections deref (get 0) var-get) 
```

Vars 本身是线程安全的，要更改您需要使用的 var 的根绑定，`alter-var-root`这是一个原子操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T04:39:25.837

如果您想使用简单的 Clojure 数据结构，最好忘记细粒度地使用原子。相反，制作一张巨大的地图来代表整个网络，可能像：

```
(def ann {1 {:connections [1 2 3] :weights [0.1 -0.3 0.5] :state 0.3} 2 {:connections [1 2 3] :weights [0.1 -0.3 0.5] :state 0.13} 3 {:connections [2 3] :weights [0.5 0.2] :state 0.31}}) 
```

然后减少它，使用 update-in 等来更新节点。使您的所有更新函数采用不可变的数据结构，因为这将使测试更容易。

现在肯定有比这更好的方法。您可能最好看看@mikera 对矩阵所做的事情。

或者，如果您想要异步，您可以使用 Lamina 或新的 Plumbing/Graph 库。

# objective-c - 如何在 Mac OS X 10.8 中以编程方式在共享下启用远程管理

> ID：15149644
> 
> 赞同：1
> 
> 时间：2013-03-01T02:49:36.150
> 
> 标签：objective-c, macos, applescript, core-services, remote-management

我正在开发一个需要在我的系统上运行 VNC 服务器的项目（Mac OS X v10.8）。

VNS 服务器安装在我的 Mac 系统中，现在我需要运行 VNC 服务器，但要运行服务器，需要以编程方式或使用 Apple 脚本提供足够的权限（系统偏好设置 -> 共享 -> 远程管理 -> 启用复选框） .

如何通过目标 c 程序或苹果脚本启用远程管理？或者 Apple 是否提供任何 API 来管理共享选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:59:37.587

`kickstart`您可以使用该命令启用和配置远程管理服务。它不在通常的 PATH 中，因此您需要指定其完整路径：

```
/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart 
```

它的选项格式有点神秘，但是通过一些实验你应该能够得到你想要的效果（参见[Apple 的 KB #HT2370](http://support.apple.com/kb/HT2370)和[SS64.com 的“手册页”](http://ss64.com/osx/kickstart.html)）。

此外，它必须以 root 身份运行，因此从 AppleScript 中使用`do shell script with administrator privileges`. 我认为你需要一些接近这个的东西：

```
do shell script "/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -on -restart -agent -privs -all" with administrator privileges 
```

# cocos2d-iphone - 如何在 CocosBuilder 中使用 TexturePacker 生成的纹理？

> ID：15149645
> 
> 赞同：1
> 
> 时间：2013-03-01T02:49:37.877
> 
> 标签：cocos2d-iphone, cocos2d-x, cocosbuilder

我知道在 CocosBuilder 3.0 中可以通过 Smart Sprite 功能创建纹理。但是现在很不稳定。所以我决定使用 TexturePacker 来生成纹理。我的 .plist 和 .png 文件在我的 CocosBuilder 项目文件夹中针对不同的分辨率生成到不同的文件夹中，如下所示：

![在此处输入图像描述](../Images/381bd6a68e4c661e283fb3560b23dfef.png)

问题只是 CocosBuilder 中显示的 .png 文件（我找不到 .plist 文件）：

![在此处输入图像描述](../Images/463d8689d7bbbc102ac417f5729cfc64.png)

当然，如果我将 .png 和 .plist 文件移动到 Resources 文件夹中。两者都将在 CocosBuilder 中显示。但是我再也无法为不同的分辨率选择正确的图像了。我不知道它有什么问题。任何想法？

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:41:05.510

我解决了这个问题。实际上是因为文件夹结构。CocosBuilder 无法识别 resources-iphone 文件夹。所以我像这样重新排列了文件夹结构。然后一切都很好。

![在此处输入图像描述](../Images/5fb422c77a349944d45904eeadeed82c.png)

# jquery - 画中画

> ID：15149648
> 
> 赞同：1
> 
> 时间：2013-03-01T02:50:02.413
> 
> 标签：jquery, kineticjs

我正在尝试构建一个应用程序，该应用程序将允许在其中绘制绘图、绘图内部、绘图等...到目前为止我所拥有的是 jsfiddle [http://jsfiddle.net/viciouskinid/MYYRa/](http://jsfiddle.net/viciouskinid/MYYRa/)

```
$(function () {

ABC.Container = function () {
    var base = this;

}

/////////////////////////////////////////////////////////////////////////////

ABC.Canvas = function (containerID) {
    var base = this;

    var $container = $("#" + containerID);
    base.stage = new Kinetic.Stage({
        container: containerID,
        width: $container.width(),
        height: $container.height(),
        //draggable: true,
    });
    //$container.css('height','');

    base.ui = {
        stage: base.stage,
        scale: 1,
        zoomFactor: 1.1,
        origin: {
            x: 0,
            y: 0
        }
    };
    base.selectedElement=null;

    base.init = function () { 
        $(window).resize(base.resize);
        $(base.stage.content).on('mousewheel', base.zoom);

        base.childgroup = new Kinetic.Group(); 
        base.layer = new Kinetic.Layer();
        base.layer.add(base.childgroup);
        base.stage.add(base.layer);
    }

    base.resize = function(event) {
        base.stage.width = $container.width();
        base.stage.height = $container.height();
    }
    base.zoom = function(event) {
        event.preventDefault();
        var evt = event.originalEvent,
            mx = evt.clientX /* - canvas.offsetLeft */
            ,
            my = evt.clientY /* - canvas.offsetTop */
            ,
            wheel = evt.wheelDelta / 120; //n or -n
        var zoom = (base.ui.zoomFactor - (evt.wheelDelta < 0 ? 0.2 : 0));
        var newscale = base.ui.scale * zoom;
        base.ui.origin.x = mx / base.ui.scale + base.ui.origin.x - mx / newscale;
        base.ui.origin.y = my / base.ui.scale + base.ui.origin.y - my / newscale;

        base.ui.stage.setOffset(base.ui.origin.x, base.ui.origin.y);
        base.ui.stage.setScale(newscale);
        base.ui.stage.draw();

        base.ui.scale *= zoom;
    } 
    base.setSelectedElement = function(element) {
        if(base.selectedElement)
        {
            base.selectedElement.shape.setStroke('black'); 
        }
        base.selectedElement=element;
        base.selectedElement.shape.setStroke('red'); 
    }
    base.init();
}
ABC.Canvas.prototype = new ABC.Container();

/////////////////////////////////////////////////////////////////////////////

ABC.Element = function (x,y) {
    var base = this;         

    base.init = function () { 

        base.elements=[];
        base.shape = new Kinetic.Rect({
            x: 0,
            y: 0,
            width: 50,
            height: 50,
            //fill: 'green',
            stroke: 'black',
            strokeWidth: 1, 
        }); 
        base.shape.on('mouseover', base.shape_mouseover );
        base.shape.on('mouseout', base.shape_mouseout );

        base.childgroup = new Kinetic.Group(); 
        base.group = new Kinetic.Group({
            x: x,
            y: y,
            width: 50,
            height: 50,
            draggable: true, 
            layer: true,
        }); 
        //prevent even bubbling so downstream group is selected on drag not upstream group.
        base.group.on('mousedown', base.shape_mousedown );
        base.group.on('dragstart', base.group_dragstart );
        base.group.on('dragend', base.group_dragend );
        //element2.moveToTop();
        base.group.add(base.shape);
        base.group.add(base.childgroup);

        base.group.on('dblclick', base.newElement);
    } 

    ///////////////////////////////////////////////////

    base.shape_mouseover = function (e) { 
        e.cancelBubble = true; 
        //this.setStroke('blue'); 
        base.group.draw();
    }
    base.shape_mouseout = function (e) {
        e.cancelBubble = true;  
        //this.setStroke('black'); 
        base.group.draw();
    }
    base.shape_mousedown =  function(e) {
        canvas.setSelectedElement(base);
        e.cancelBubble = true; 
    }
    base.group_dragstart =  function(e) {
        //e.cancelBubble = true; 
    }
    base.group_dragend =  function(e) {
        //cannot select after drag
        ////
        //base.shape.moveDown();
    }
    base.dragBoundFunc =  function(p,e) { 

        var scale = base.getAbsoluteScale(base.group);

        //hold shif to allign with grid.
        if(e.shiftKey)
        { 
            var gridW=10;
            p.x = Math.round(p.x/gridW / scale.x)*gridW * scale.x;
            p.y = Math.round(p.y/gridW / scale.y)*gridW * scale.y;
        } 

        return base.fitToBound(p,scale,base.parent.shape);
    }
    base.newElement = function (e) { 
        e.cancelBubble = true; 

        // var pos=base.group.getAbsolutePosition();
        // var x=(e.x-pos.x)/canvas.ui.scale;
        // var y=(e.y-pos.y)/canvas.ui.scale;

        // var scale = base.getAbsoluteScale(base.group); 
        // var p = base.fitToBound({x:x,y:y},scale,base.shape);//not working for some reason.
        //writeMessage(messageLayer, 'x: ' + x + ', y: ' + y);
        var element = new ABC.Element(0,0);  

        base.addElement(element); 
                }
    base.addElement = function (element) { 
        base.elements.push(element);
        element.parent=base;

        element.group.setDragBoundFunc(element.dragBoundFunc);
        element.group.setScale(0.5);

            //fit to bounds
        element.fitElementToBound();/////////////////change to use dragboundsfunc
        base.childgroup.add(element.group); 
        canvas.setSelectedElement(element);
    } 
    base.fitToBound =  function(p,scale,shape) { 

        //Fit to bounds of parent shape.
        var boundpos=shape.getAbsolutePosition();  
        var boundsize=shape.getSize();  

        var x1=boundpos.x+boundsize.width*scale.x;
        var y1=boundpos.y+boundsize.height*scale.y;
        return {
            x: p.x<boundpos.x?boundpos.x:(p.x > x1 ? x1 :p.x),
            y: p.y<boundpos.y?boundpos.y:(p.y > y1 ? y1 :p.y)
        }
    }
    base.fitElementToBound =  function() { 

        var p1=base.group.getPosition();
        var scale = base.getAbsoluteScale(base.group);
        var p = base.fitToBound(p1,scale,base.parent.shape);
        base.group.setPosition( p.x, p.y);
    }
    base.getAbsoluteScale =  function(t) {  
        var scale = t.getScale();  
        if(t.parent)
        {
            var scale1 = base.getAbsoluteScale(t.parent);
            return {x:scale.x*scale1.x,y:scale.y*scale1.y};
        }
        return scale;
    }

    base.init();
}
ABC.Element.prototype  = new ABC.Container();

/////////////////////////////////////////////////////////////////////////////

  var messageLayer = new Kinetic.Layer();
  function writeMessage(messageLayer, message) {
    var context = messageLayer.getContext();
    messageLayer.clear();
    context.font = '18pt Calibri';
    context.fillStyle = 'black';
    context.fillText(message, 10, 25);
  } 

var canvas = new ABC.Canvas('container');

var element01 = new ABC.Element(0,0);  
canvas.childgroup.add(element01.group);

var element0 = new ABC.Element(10,20);

element01.addElement(element0);

var element1 = new ABC.Element(20,30);  
element0.addElement(element1);

var element2 = new ABC.Element(40,50);  
element1.addElement(element2);

canvas.stage.draw();

  canvas.stage.add(messageLayer);

}); 
```

我首先遇到两个问题，如果您双击一个框，它将在该框内创建另一个较小的框。唯一的问题是，当它被创建时，我无法让它在盒子中正确定位。如果您在创建后找到该框（鼠标滚轮缩小）并尝试拖动它，那么它将重新回到父框。如果它会在创建新框之前检查新框是否在父框中，如果没有则移动它，那就太好了。

第二个问题是当您创建一个新的子框（双击一个框）并在父框中创建两个子框时。如果您拖动新的子框然后选择另一个子框，您将无法再次选择新的子框（它只会选择父框）。这种情况总是会发生，但如果你玩弄它，它应该会发生在你身上。我该如何防止这种情况。

谢谢。

* * *

越来越近，第一个问题几乎解决了。在启动时添加新框之前和双击时会移动一个新框。唯一的问题是如果您移动主块然后双击它不在正确的位置。

在第二个问题上仍然没有运气。

[http://jsfiddle.net/viciouskinid/MYYRa/6/](http://jsfiddle.net/viciouskinid/MYYRa/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:02:37.960

好的解决了。

[http://jsfiddle.net/viciouskinid/MYYRa/9/](http://jsfiddle.net/viciouskinid/MYYRa/9/)

```
 var ABC = {};

    /////////////////////////////////////////////////////////////////////////////

    $(function () {

        ABC.Container = function () {
            var base = this;

        }

        /////////////////////////////////////////////////////////////////////////////

        ABC.Canvas = function (containerID) {
            var base = this;

            var $container = $("#" + containerID);
            base.stage = new Kinetic.Stage({
                container: containerID,
                width: $container.width(),
                height: $container.height(),
                //draggable: true,
            });
            //$container.css('height','');

            base.ui = {
                stage: base.stage,
                scale: 1,
                zoomFactor: 1.1,
                origin: {
                    x: 0,
                    y: 0
                }
            };
            base.selectedElement = null;

            base.init = function () {
                $(window).resize(base.resize);
                $(base.stage.content).on('mousewheel', base.zoom);

                base.childgroup = new Kinetic.Group();
                base.layer = new Kinetic.Layer();
                base.layer.add(base.childgroup);
                base.stage.add(base.layer);
            }

            base.resize = function (event) {
                base.stage.width = $container.width();
                base.stage.height = $container.height();
            }
            base.zoom = function (event) {
                event.preventDefault();
                var evt = event.originalEvent,
                    mx = evt.clientX /* - canvas.offsetLeft */
                    ,
                    my = evt.clientY /* - canvas.offsetTop */
                    ,
                    wheel = evt.wheelDelta / 120; //n or -n
                var zoom = (base.ui.zoomFactor - (evt.wheelDelta < 0 ? 0.2 : 0));
                var newscale = base.ui.scale * zoom;
                base.ui.origin.x = mx / base.ui.scale + base.ui.origin.x - mx / newscale;
                base.ui.origin.y = my / base.ui.scale + base.ui.origin.y - my / newscale;

                base.ui.stage.setOffset(base.ui.origin.x, base.ui.origin.y);
                base.ui.stage.setScale(newscale);
                base.ui.stage.draw();

                base.ui.scale *= zoom;
            }
            base.setSelectedElement = function (element) {
                if (base.selectedElement) {
                    base.selectedElement.shape.setStroke('black');
                }
                base.selectedElement = element;
                base.selectedElement.shape.setStroke('red');
            }
            base.init();
        }
        ABC.Canvas.prototype = new ABC.Container();

        /////////////////////////////////////////////////////////////////////////////

        ABC.Element = function (x, y) {
            var base = this;

            base.init = function () {

                base.elements = [];
                base.shape = new Kinetic.Rect({
                    x: 0,
                    y: 0,
                    width: 50,
                    height: 50,
                    //fill: 'green',
                    stroke: 'black',
                    strokeWidth: 1,
                });
                base.shape.on('mouseover', base.shape_mouseover);
                base.shape.on('mouseout', base.shape_mouseout);

                base.childgroup = new Kinetic.Group();
                base.group = new Kinetic.Group({
                    x: x,
                    y: y,
                    width: 50,
                    height: 50,
                    draggable: true,
                    layer: true,
                });
                //prevent even bubbling so downstream group is selected on drag not upstream group.
                base.group.on('mousedown', base.shape_mousedown);
                base.group.on('dragstart', base.group_dragstart);
                base.group.on('dragend', base.group_dragend);
                //element2.moveToTop();
                base.group.add(base.shape);
                base.group.add(base.childgroup);

                base.group.on('dblclick', base.newElement);
            }

            ///////////////////////////////////////////////////

            base.shape_mouseover = function (e) {
                e.cancelBubble = true;
                //this.setStroke('blue'); 
                base.group.draw();
            }
            base.shape_mouseout = function (e) {
                e.cancelBubble = true;
                //this.setStroke('black'); 
                base.group.draw();
            }
            base.shape_mousedown = function (e) {
                canvas.setSelectedElement(base);
                e.cancelBubble = true;
            }
            base.group_dragstart = function (e) {
                //e.cancelBubble = true; 
            }
            base.group_dragend = function (e) {
                //cannot select after drag
                ////
                //base.shape.moveDown();
            }
            base.dragBoundFunc = function (p, e) {

                var scale = base.getAbsoluteScale(base.group);

                //hold shif to allign with grid.
                if (e.shiftKey) {
                    var gridW = 10;
                    p.x = Math.round(p.x / gridW / scale.x) * gridW * scale.x;
                    p.y = Math.round(p.y / gridW / scale.y) * gridW * scale.y;
                }

                return base.fitToBound(p, scale, base.parent.shape);
            }
            base.newElement = function (e) {
                e.cancelBubble = true;

                var pos = base.group.getAbsolutePosition();
                var x = (e.x - pos.x) / canvas.ui.scale;
                var y = (e.y - pos.y) / canvas.ui.scale;
                // var scale = base.getAbsoluteScale(base.group); 
                // var p = base.fitToBound({x:x,y:y},scale,base.shape);//not working for some reason.
                //writeMessage(messageLayer, 'x: ' + x + ', y: ' + y);
                var element = new ABC.Element(x, y);

                base.addElement(element);
            }
            base.addElement = function (element) {
                base.elements.push(element);
                element.parent = base;

                element.group.setDragBoundFunc(element.dragBoundFunc);
                element.group.setScale(0.5);

                //fit to bounds
                element.fitElementToBound(); /////////////////change to use dragboundsfunc
                base.childgroup.add(element.group);
                canvas.setSelectedElement(element);
            }
            base.fitToBound = function (p, scale, shape) {

                //Fit to bounds of parent shape.
                var boundpos = shape.getAbsolutePosition();
                var boundsize = shape.getSize();

                var x1 = boundpos.x + boundsize.width * scale.x;
                var y1 = boundpos.y + boundsize.height * scale.y;
                return {
                    x: p.x < boundpos.x ? boundpos.x : (p.x > x1 ? x1 : p.x),
                    y: p.y < boundpos.y ? boundpos.y : (p.y > y1 ? y1 : p.y)
                }
            }
            base.fitToBound2 = function (p, shape) {

                var scale = base.getAbsoluteScale(base.group);
                var scale1 = base.getAbsoluteScale(shape);
                var p = base.group.getPosition();
                var size = base.group.getSize();

                //Fit to bounds of parent shape.
                var boundpos = shape.getAbsolutePosition();
                var boundsize = shape.getSize();

                var x1 = boundpos.x + (boundsize.width) * scale1.x - size.width * scale.x;
                var y1 = boundpos.y + (boundsize.height) * scale1.y - size.height * scale.y;

                //alert((boundsize.width )*scale1.x +" "+ size.width*scale.x);
                //alert(scale.x +" "+ scale1.x);
                //alert(boundsize.height +" "+ size.height);
                return {
                    x: p.x < boundpos.x ? boundpos.x : (p.x > x1 ? x1 : p.x),
                    y: p.y < boundpos.y ? boundpos.y : (p.y > y1 ? y1 : p.y)
                }
            }
            base.fitElementToBound = function () {

                var p1 = base.fitToBound2(p1, base.parent.shape);

                base.group.setPosition(p1.x, p1.y);
            }
            base.getAbsoluteScale = function (t) {
                var scale = t.getScale();
                if (t.parent) {
                    var scale1 = base.getAbsoluteScale(t.parent);
                    return {
                        x: scale.x * scale1.x,
                        y: scale.y * scale1.y
                    };
                }
                return scale;
            }

            base.init();
        }
        ABC.Element.prototype = new ABC.Container();

        /////////////////////////////////////////////////////////////////////////////

        var messageLayer = new Kinetic.Layer();

        function writeMessage(messageLayer, message) {
            var context = messageLayer.getContext();
            messageLayer.clear();
            context.font = '18pt Calibri';
            context.fillStyle = 'black';
            context.fillText(message, 10, 25);
        }

        var canvas = new ABC.Canvas('container');

        var element01 = new ABC.Element(0, 0);
        canvas.childgroup.add(element01.group);

        var element0 = new ABC.Element(100, 200);

        element01.addElement(element0);

        var element1 = new ABC.Element(200, 300);
        element0.addElement(element1);

        var element2 = new ABC.Element(400, 800);
        element1.addElement(element2);

        canvas.stage.draw();

        canvas.stage.add(messageLayer);

    }); 
```

# android - 在片段和下一个活动之间传递数据

> ID：15149656
> 
> 赞同：-3
> 
> 时间：2013-03-01T02:50:32.377
> 
> 标签：android

首先，这是我在这里的第一个问题，感谢您的回复:) 我有一个片段扩展了 SherlockListFragment，它有一个保存在数据库中的（事件）列表，当我单击列表中的任何项目时，我想要获取所有事件数据并填写另一个具有editText（s）的活动......这是frgment.java代码

```
public class EventsFragment extends SherlockListFragment  {

EditText _eventName_;
EditText next_activty_text;
List<String> presidents = new ArrayList<String>();
public DBAdapter db;

String buf = "";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_events, container, false);

    _eventName_ = (EditText) v.findViewById(R.id.editText11);
    next_activty_text = (EditText) v.findViewById(R.id.editText12);

    // The most Important part in action bar menus :)
    setHasOptionsMenu(true);

    /*
    //This is how to link a button in fragment by its .xml file :Ds
    Button create_btn = (Button) v.findViewById(R.id.button1);

    create_btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //startActivity(new Intent("com.nazmy.CreateEventActivity"));

        }
    });*/

    return v;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    db = new DBAdapter(getActivity());
    db.open();

    int i = 1;
    while(db.getEvent(i).isLast()){
        Cursor c = db.getEvent(i);
        presidents.add(c.getString(1));
        i++;
    }

    db.close();
    setListAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, presidents));

    setListAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, presidents));

}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.fragment_events_menu, menu);
 }

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()) {
        case R.id.add:
            startActivity(new Intent("com.nazmy.CreateEventActivity"));
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    //startActivity(new Intent("com.nazmy.CreateEventActivity"));

    db = new DBAdapter(getActivity());
    db.open();

    Cursor c = db.getEvent(id+1);

    //populate(c.getString(1));
    _eventName_.setText(c.getString(1));
    db.close();
}
 } 
```

` 这是活动代码

```
public class CreateEventActivity extends FragmentActivity {

EditText mEdit;
EditText mEdit2;

EditText mEditFromTime;
EditText mEditToTime;

int whichDateBtn;
int whichTimeBtn;

DBAdapter db = new DBAdapter(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create_event);

    db.open();
    Cursor c = db.getAllEvents();
    if (c.moveToFirst())
    {
    do {
    DisplayEvent(c);
    } while (c.moveToNext());
    }
    db.close();

    Button cancel_btn = (Button) findViewById(R.id.button4);
    Button save_btn = (Button) findViewById(R.id.button1);  //if clicked -> save in data-base

    save_btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            db.open();
            EditText event_name = (EditText)findViewById(R.id.editText12);
            EditText event_place = (EditText)findViewById(R.id.editText13);
            EditText from_date = (EditText)findViewById(R.id.editText14);
            EditText from_time = (EditText)findViewById(R.id.editText15);
            EditText to_date = (EditText)findViewById(R.id.EditText16);
            EditText to_time = (EditText)findViewById(R.id.EditText17);
            CheckBox share = (CheckBox)findViewById(R.id.checkBox1);
            CheckBox alarm = (CheckBox)findViewById(R.id.checkBox2);

            long id2 = db.insertEvent(event_name.getText().toString(), event_place.getText().toString(), 
                    from_date.getText().toString(), to_date.getText().toString(),
                    from_time.getText().toString(),
                    to_time.getText().toString(),
                    share.isChecked(),alarm.isChecked());

            db.close();
            event_name.setText("");
            event_place.setText("");
            from_date.setText("");
            to_date.setText("");
            from_time.setText("");
            to_time.setText("");
            if (share.isChecked()) {
                share.setChecked(false);
             }
            if (alarm.isChecked()) {
                alarm.setChecked(false);
             }

            startActivity(new Intent("com.nazmy.HomeActivity"));

        }
    });

    cancel_btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.nazmy.HomeActivity"));

        }
    });
}

//This method shows the dialog when Button is clicked
public void selectFromtDate(View view) {
    DialogFragment mDialog = new SelectDateFragment();
    mDialog.show(getFragmentManager(), "DatePicker");
    whichDateBtn = 0;
}

public void selectToDate(View view) {
    DialogFragment mDialog2 = new SelectDateFragment();
    mDialog2.show(getFragmentManager(), "DatePicker");
    whichDateBtn = 1;
}

//This method will update the EditText field with the following code.
public void populateSetDate(int year, int month, int day) {
    mEdit = (EditText)findViewById(R.id.editText14);    //brbt el editText (mEdit) be el text ely hayzhar fel text Field
    mEdit2 = (EditText)findViewById(R.id.EditText16);

    if(whichDateBtn==0) {
        mEdit.setText(month+"/"+day+"/"+year);
    }
    else if (whichDateBtn == 1) {
        mEdit2.setText(month+"/"+day+"/"+year);
    }   
}

//This subclass includes method to display the datepicker fragment to the user. 
//It also has the method to handle the event on setting the date.

 public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

     //The onCreateDialog() method creates a calendar object.
     //Using this object the current day, month and year that will be retrieved.
     //This current instance will return to the activity to display the date picker with the current date by default.
     //onDateSet() method calls the populateSetDate() with the selected date parameters.

     @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            final Calendar calendar = Calendar.getInstance();
            int yy = calendar.get(Calendar.YEAR);
            int mm = calendar.get(Calendar.MONTH);
            int dd = calendar.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, yy, mm, dd);
        }

        public void onDateSet(DatePicker view, int yy, int mm, int dd) {
            populateSetDate(yy, mm+1, dd);
        }
    }

 ////////////////////////////////////////////////////////////////////////////////////////////////////////
 //      Time Pickers
 ////////////////////////////////////////////////////////////////////////////////////////////////////////
 public void selectFromTime(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getFragmentManager(), "TimePicker");
        whichTimeBtn = 0;
    }
 public void selectToTime(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getFragmentManager(), "TimePicker");
        whichTimeBtn = 1;
    }

 public void populateSetTime(int hour, int min) {
        mEditFromTime = (EditText)findViewById(R.id.editText15);    //brbt el editText (mEdit) be el text ely hayzhar fel text Field
        mEditToTime = (EditText)findViewById(R.id.EditText17);

        if(whichTimeBtn==0) {
            mEditFromTime.setText(hour+":"+min);
        }
        else if (whichTimeBtn == 1) {
            mEditToTime.setText(hour+":"+min);
        }   
    }

 public class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            // Use the current time as the default values for the picker
            final Calendar c = Calendar.getInstance();
            int hour = c.get(Calendar.HOUR_OF_DAY);
            int minute = c.get(Calendar.MINUTE);

            // Create a new instance of TimePickerDialog and return it
            return new TimePickerDialog(getActivity(), this, hour, minute,DateFormat.is24HourFormat(getActivity()));
        }

        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // Do something with the time chosen by the user
            populateSetTime(hourOfDay, minute);
        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_create_event, menu);
    return true;
}

public void DisplayEvent(Cursor c)
{
    Toast.makeText(this,
    "id : " + c.getString(0) + "\n" +
    "Event Name: " + c.getString(1) + "\n" +
    "Place : " + c.getString(2) + "\n" +
    "From Date : " + c.getString(3)+ "\n" +
    "From Time : " + c.getString(5)+ "\n" +
    "To Date : " + c.getString(4)+ "\n" +   
    "To Time : " + c.getString(6),
    Toast.LENGTH_LONG).show();
}
} 
```

`提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:27:59.917

你有两个选择。从您的数据库中获取数据，然后将该数据作为附加`EventsFragment.onListItemClick()`信息传递给您的第二个。或者您可以传递单击项目的 id，并在您的第二个中执行数据库操作。无论哪种方式，您都必须[使用 Intents 传递数据](http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/)`Activity``Intent``Activity`

```
public class EventsFragment extends SherlockListFragment {
.
.
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Intent intent = new Intent(this, CreateEventActivity.class);

        // OPTION 1: Fetch data here, and pass it with the intent
        db = new DBAdapter(getActivity());
        db.open();

        Cursor c = db.getEvent(id+1);

        intent.putExtra("id", c.getString(1));
        intent.putExtra("event_name", c.getString(2));
        // Do this for all your values.

        db.close();
        startActivity(intent);

        // OPTION 2: Pass the id of the selected item, and fetch the data in second activity
        intent.putExtra("selected_id", id+1);
        startActivity(intent);

    }

} 
```

然后，`CreateEventActivity`您必须获得您选择通过`Intent`.

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    .
    .
    Intent intent = getIntent();

    // If you chose option 1, you have to get all the extras you attached to the Intent.
    long id = intent.getLongExtra("id", -1)
    String eventName = intent.getStringExtra("event_name", "defValue");
    // Fetch all the values here..

    // If you chose option 2, you fetch the id and do the database operations to retrive
    // the data
    long id = intent.getLongExtra("selected_id", -1);

    // DB stuff here..

} 
```

# java - 关于从源列表中选择三个元素并在第一个元素本身中添加到目标列表

> ID：15149658
> 
> 赞同：0
> 
> 时间：2013-03-01T02:50:43.447
> 
> 标签：java, collections

我在面试时问了一个问题，假设有一个名为 A 的 4 个元素的数组列表，其值为 67,34,56,78 所以创建另一个名为 B 的数组列表，它由 2 个元素组成，以这样的方式开发程序，以便首先应将先前数组列表 A 的三个元素插入到数组列表 B 中，如下所示。

```
Arraylist A  ---> 67,34,56,78 (having size of 4)
Arraylist B   ----> 67,34,56(shoud be stored in very first element of array list itself) and 56 in next element (so total size is of arraylist B is 2) 
```

并且采访者还补充说，这一次被告知arraylist A在开始时最初将有4个元素，但是制作另一个通用类型的程序意味着它永远不会被告知最初列表中有多少元素，但是你必须始终创建另一个列表，并且始终从源列表中选择前三个元素，然后将另一个列表放入第一个元素本身的内部，并将源列表的剩余一个元素作为第二个列表中的下一个元素。

请告知如何实现这一点以及如何选择这对 3 个元素并将其添加到目标列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:11:39.883

这可能更简单

```
public class SO {

    public static void main(String[] args) throws IOException,
            InterruptedException {
        ArrayList<Integer> a = Lists.newArrayList(67, 34, 56, 78);
        ArrayList<Integer> b = Lists.newArrayList();
        b.addAll(a.subList(0, 3));
        System.out.println(b);

    }
} 
```

给予

```
[67, 34, 56] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:47:17.863

在这里它以最简单的方式..你可以让它更高效：

```
 final List<String> first = new ArrayList<String>() {
        {
            add("67");
            add("34");
            add("56");
            add("78");
        }
    };

    final List<Object> second = new ArrayList<Object>();

    // add first 3 elements to the second
    final List<String> temp = new ArrayList<String>();
    for(int i=0; i<3; i++) {
        temp.add(first.get(i));
    }

    second.add(temp);
    second.add(first.get(3)); 
```

# html - 我如何使这个容器居中？

> ID：15149659
> 
> 赞同：1
> 
> 时间：2013-03-01T02:50:43.767
> 
> 标签：html, css, containers

如何使这个容器居中，使其从顶部、左侧和右侧居中？我已经尝试了下面的内容，但它不起作用。不知道我错过了什么：

```
 HTML: 

<div class="box"> 
     <p>This is a sentence.</p>
</div>

 CSS:

 .box {
 background-color: #444444;
 color: #888888;
 margin: 0 auto; 
 position: absolute;
 width: 1000px;
 height: 20px;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:52:04.747

删除`position: absolute;`它会居中..

这是因为绝对定位的元素被从文档流中取出......并且因为没有其他元素正在使用`position`您的 div 相对于根`<html>`元素的属性......因此它为什么停留在视口的左上角。

# c# - 非阻塞互斥的副作用？

> ID：15149665
> 
> 赞同：0
> 
> 时间：2013-03-01T02:51:11.373
> 
> 标签：c#, multithreading, mutex

我的代码背后的想法是我想遍历这个列表，我只想一次处理 4 个循环。没问题，我可以复制/粘贴我之前写的代码。糟糕，我需要一个资源 (wc)，但无法共享。所以我有4个，每个线程一个！

它没有像我预期的那样进行。没有 trylock 所以我使用了 WaitOne(0) ，它不应该像[文档所说的](http://msdn.microsoft.com/en-us/library/cc189907.aspx)那样阻塞。但是我能够得到我的异常，它显示了 index==-1，这在 imo 中不应该发生。

为什么会发生

```
var s = new Semaphore(0, 4);
s.Release(4);

var wcs = new MyObject();
var mutexs= new Mutex[4];
for (int i = 0; i < wcs.Count(); ++i)
{
    wcs[i] = new MyObject();
    mutexs[i] = new Mutex();
}

int counter = 0;
Parallel.ForEach(ls, v =>
{
    s.WaitOne();
    int index = -1;
    try
    {
        ++counter;
        Console.WriteLine("Counter = " + counter.ToString());
        MyObject wc = null;
        for (int i = 0; i < mutexs.Count(); ++i)
        {
            if(mutexs[i].WaitOne(0))
            {
                index = i;
                wc = wcs[i];
            }
        }
        if (index == -1)
            throw new Exception("this triggers");
        //...
    }
    finally
    {
        --counter;
        mutexs[index].ReleaseMutex();
        s.Release();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:20:27.360

您的第一个线程占用了所有互斥锁，您需要“休息”；在你的“if(mutexs[i].WaitOne(0))”语句中

```
var s = new Semaphore(0, 4);
s.Release(4);

var wcs = new MyObject();
var mutexs= new Mutex[4];
for (int i = 0; i < wcs.Count(); ++i)
{
    wcs[i] = new MyObject();
    mutexs[i] = new Mutex();
}

int counter = 0;
Parallel.ForEach(ls, v =>
{
    s.WaitOne();
    int index = -1;
    try
    {
        ++counter;
        Console.WriteLine("Counter = " + counter.ToString());
        MyObject wc = null;
        for (int i = 0; i < mutexs.Count(); ++i)
        {
            if(mutexs[i].WaitOne(0))
            {
                index = i;
                wc = wcs[i];
                break; //Use only one Mutex per thread
            }
        }
        if (index == -1)
            throw new Exception("this triggers");
        //...
    }
    finally
    {
        --counter;
        mutexs[index].ReleaseMutex();
        s.Release();
    }
}); 
```

# java - java中如何分割字符串

> ID：15149666
> 
> 赞同：4
> 
> 时间：2013-03-01T02:51:31.483
> 
> 标签：java, android, date, calendar, alarmmanager

我在android中有项目，我需要拆分字符串，这实际上是日期，这是我要拆分的字符串：

```
String datetime = "01/03/2013 09:00"; 
```

这就是我所说的：

```
int year = splitDateTime(dateTime)[0]; 
```

```
public int[] splitDateTime(String datetime){
        String date_time = datetime;
        String delimiter = "//:";

        String[] sParts;
        int[] intParts;

        sParts = date_time.split(delimiter);
        intParts = new int[sParts.length];

        for(int i =0; i < sParts.length ; i++)
            intParts[i] = Integer.parseInt(sParts[i]);

        return intParts;
    } 
```

但它一直给我一个错误，所以如果你能帮助我，我会很高兴。干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:56:03.267

我打赌你的意思是这样的：

```
String datetime = "01/03/2013 09:00";

String[] sParts = datetime.split("[/:\\s+]");
int[] iParts = new int[sParts.length];

for(int i = 0; i < sParts.length; i++)
    iParts[i] = Integer.parseInt(sParts[i]);

System.out.println(Arrays.toString(iParts)); 
```

**输出：**

```
[1, 3, 2013, 9, 0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T02:56:39.387

I think you should use [Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

```
String dateTime = "01/03/2013 09:00";
SimpleDateFormat f = new SimpleDateFormat("dd/MM/yyyy HH:mm");
Date d = f.parse(dateTime);

Calendar c = Calendar.getInstance();
c.setTime(d);
int year = c.get(Calendar.YEAR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:58:53.543

You may make use of regex, using something like `^(\d+)/(\d+)/(\d+) (\d+):(\d)` and you can get each captured group.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T04:27:43.933

我认为基于 StringTokenizer 的解决方案将是最快的

```
public static int[] splitDateTime(String dateTime) {
    int[] intParts = new int[5];
    StringTokenizer t = new StringTokenizer(dateTime, "/ :");
    for (int i = 0; t.hasMoreTokens(); i++) {
        intParts[i] = Integer.parseInt(t.nextToken());
    }
    return intParts;
}

public static void main(final String[] args) throws IOException {
    System.out.println(Arrays.toString(splitDateTime("01/03/2013 09:00")));
} 
```

输出

```
[1, 3, 2013, 9, 0] 
```

# python - python中的函数和if - else。多重条件。代码学院

> ID：15149667
> 
> 赞同：6
> 
> 时间：2013-03-01T02:51:33.647
> 
> 标签：python, function

编写一个函数，`shut_down`，它接受一个参数（你可以使用任何你喜欢的东西；在这种情况下，我们将使用`s`字符串）。

shutdown_down 函数应`"Shutting down..."`在获得`"Yes"`、`"yes"`或`"YES"`作为参数时以及`"Shutdown aborted!"`获得`"No"`、`"no"`或时返回`"NO"`。如果它得到的不是这些输入，函数应该返回`"Sorry, I didn't understand you."`

到目前为止我写的代码如下。它会出错，例如`"No"`作为参数给出，它不会`"Shutdown aborted!"`按预期返回。

```
def shut_down(s):
    if s == "Yes" or "yes" or "YES":
        return "Shutting down..."
    elif s == "No" or "no" or "NO":
        return "Shutdown aborted!"
    else:
        return "Sorry, I didn't understand you." 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T02:53:32.347

这：

```
s == "Yes" or "yes" or "YES" 
```

相当于：

```
(s == "Yes") or ("yes") or ("YES") 
```

它将始终返回`True`，因为非空字符串是`True`。

相反，您想分别`s`与每个字符串进行比较，如下所示：

```
(s == "Yes") or (s == "yes") or (s == "YES")  # brackets just for clarification 
```

它最终应该是这样的：

```
def shut_down(s):
    if s == "Yes" or s == "yes" or s == "YES":
        return "Shutting down..."
    elif s == "No" or s == "no" or s == "NO":
        return "Shutdown aborted!"
    else:
        return "Sorry, I didn't understand you." 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T02:55:01.693

您可以通过以下几种方式做到这一点：

```
if s == 'Yes' or s == 'yes' or s == 'YES':
    return "Shutting down..." 
```

或者：

```
if s in ['Yes', 'yes', 'YES']:
    return "Shutting down..." 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T02:57:12.790

欢迎来到 SO。我将逐步完成答案。

```
s = raw_input ("Would you like to shut down?") 
```

这会询问用户是否要关闭。

```
def shut_down(s):
    if s.lower() == "yes":
        print "Shutting down..."
    elif s.lower() == "no":
        print "Shutdown aborted!"
    else:
        print "Sorry, I didn't understand you." 
```

这对你来说可能是新的。如果您有一个字符串，然后`.lower()`它将所有输入从小`s`写更改。这比列出所有可能性要简单。

```
shut_down(s) 
```

这调用了函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T02:58:12.887

```
def shut_down(s):
    return ("Shutting down..." if s in("Yes","yes","YES")
            else "Shutdown aborted!" if s in ("No","no","NO")
            else "Sorry, I didn't understand you.") 
```

GordonsBeard 的想法很好。可能“yEs”和“yES”等是可接受的标准；
然后我在这种情况下建议：

```
def shut_down(s,d = {'yes':"Shutting down...",'no':"Shutdown aborted!"}):
    return d.get(s.lower(),"Sorry, I didn't understand you.") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T02:58:36.587

我知道这并不完全符合规范，但这是另一个常见的选项，可以捕捉更多的排列：

```
def shut_down(s):
    s = s.upper()
    if s == "YES":
        return "Shutting down..."
    elif s == "NO":
        return "Shutdown aborted!"
    else:
        return "Sorry, I didn't understand you." 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-15T12:35:24.243

```
def shut_down(phrase):
    word = phrase
    return word

take_action = input(shut_down('do you want to shutdown the program?: '.title()))
if take_action.lower() == 'yes':
    print('Shutting down...')
elif take_action.lower() == 'no':
    print('Shutdown aborted!')
else:
    print('Sorry, I didn\'t understand you.') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-19T00:14:03.970

我是一名 Python 程序员，并且已经完成了 Codecademy。我看到你有问题，让我给你我的答案。它运行完美

```
def shut_down(s):
    if s == "yes":
        return "Shutting down"
    elif s == "no":
        return "Shutdown aborted"
    else:
        return "Sorry" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-15T15:11:27.437

你可以试试这段代码：

```
def shut_down(s):

if s =="yes":
    return "Shutting Down"

elif s =="no":
    return "Shutdown aborted"
else:
    return "Sorry"
print shut_down("yes") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-15T16:35:24.983

此处发布的用户“grc”的代码几乎对我有用。我不得不调整返回消息以使其正确。如果消息（意味着所有返回的字符串）与 Codecademy 中描述的不完全相同，则工作区将不会验证您的响应。

```
def shut_down(s):
if s == "Yes" or s == "yes" or s == "YES":
    return "Shutting down"
elif s == "No" or s == "no" or s == "NO":
    return "Shutdown aborted"
else:
    return "Sorry" 
```

# iphone - 如果单击孩子，则滚动失败

> ID：15149668
> 
> 赞同：0
> 
> 时间：2013-03-01T02:51:36.943
> 
> 标签：iphone, ios, objective-c, cocoa

我有一个`UIScrollView`有一堆`UIButtons`作为孩子的。

如果我在这些按钮之外单击，我可以滚动`UIScrollView`. 但是，如果我尝试通过单击其中一个按钮来滚动，则滚动视图不起作用。

每个按钮都注册为收听`UIControlEventTouchUpInside`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:25:49.417

如果您正在触摸按钮并希望滚动，那么您应该链接到 UIControlEventTouchDownInside 事件，而不是外部！

此外，您必须将触摸事件传递给底层 UIScrollView 以使滚动发生。该应用程序实际上是通过让您单击按钮而不是滚动表格来帮您一个忙。

祝你好运

# java - 无法在 Multiple 动作类中获取值

> ID：15149676
> 
> 赞同：-1
> 
> 时间：2013-03-01T02:52:33.093
> 
> 标签：java, struts2, struts

我正在使用 multiple `<s:select>`with multiple="true" 并且代码是

```
<tr>
    <td>
       <s:select name="drAccountCode0" label=" Dr. A/c Code" labelposition="top" labelSeparator=" " list="account_name_list.{accountCode}" size="20" multiple="true" onclick="onTypeChange()" theme="simple"></s:select>
    </td>
</tr>
<tr>
    <td>
       <s:select name="drAccountCode1" label=" Dr. A/c Code" labelposition="top" labelSeparator=" " list="account_name_list.{accountCode}" size="20" multiple="true" onclick="onTypeChange()" theme="simple"></s:select>
    </td>
</tr> 
```

如何在动作类中获取值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:09:50.617

在你的行动课上写下：

```
 private List<Integer> yourMultiSelectName; 
```

（在你的情况下，`drAccountCode0`和`drAccountCode1`。）

为每个提供公共 getter 和 setter。

# django - 在创建模型时获取 _wrapped_view() 至少需要 1 个参数（给定 0）

> ID：15149678
> 
> 赞同：3
> 
> 时间：2013-03-01T02:52:51.143
> 
> 标签：django, django-models, django-views

我有一个注册表单，提交后我收到以下错误。

**_wrapped_view() 至少需要 1 个参数（给定 0）**

它发生在我在**view.py中实例化一个新的***UserProfile*对象时，即**AppUserRegistration**函数。

 ****我正在把头撞在墙上。那里的错误信息根本没有多大帮助。

**模型.py**

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField(null=True, blank=True)
    profession = models.CharField(max_length=100, null=True, blank=True)
    created = models.DateTimeField()
    modified = models.DateTimeField() 
```

**视图.py**

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.contrib.auth.decorators import login_required
from django.shortcuts import render_to_response
from django.template import RequestContext
from AutoDIY.forms import RegistrationForm, LoginForm, UserProfileAboutForm
from AutoDIY.models import UserProfile
from django.contrib.auth import authenticate, login, logout 

def AppUserRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/')
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            first_name = form.cleaned_data.get('first_name')
            last_name = form.cleaned_data.get('last_name')
            username = form.cleaned_data.get('username')
            email = form.cleaned_data.get('email')
            password = form.cleaned_data.get('password')
            user = User.objects.create_user(username=username,
                                            email=email,
                                            password=password)
            user.first_name = first_name
            user.last_name = last_name
            user.save()
            user_profile = UserProfile(user=user) # fails right here
            ... 
```

**注册.html**

```
<form class="form-login form-wrapper form-medium" method="POST">
    {% csrf_token %}
    <h3 class="title-divider"><span>Sign Up</span>
         <small>Already signed up? <a href="{% url login %}">Login here</a>.</small>
    </h3>

    {% if form.errors %}

        <div class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Please correct the following fields:</strong>
            <ul>
                {% if form.first_name.errors %}<li>First name</li>{% endif %}
                {% if form.last_name.errors %}<li>Last name</li>{% endif %}
                {% if form.username.errors %}<li>Username</li>{% endif %}
                {% if form.email.errors %}<li>Email address</li>{% endif %}
                {% if form.password.errors %}<li>Password</li>{% endif %}
                {% if form.password1.errors %}<li>Password Verification</li>{% endif %}
            </ul>
        </div>

    {% endif %}

    <h5>Account Information</h5>
    {{ form.first_name }}
    {{ form.last_name }}
    {{ form.username }}
    {{ form.email }}
    {{ form.password }}
    {{ form.password1 }}
    <label class="checkbox">
        <input type="checkbox" value="term">
        I agree with the Terms and Conditions.
    </label>
    <button class="btn btn-primary" type="submit">Sign up</button>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:46:44.703

从您发布的错误来看，实际上 UserProfile 不是一个模型类，而是一些函数（可能是装饰的）。检查您的代码库并确保您没有定义名为 UserProfile 的函数。也许您在 views.py 的下面某处有名为 UserProfile 的视图函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:57:44.913

```
if form.is_valid():
    first_name = form.cleaned_data['first_name']
    last_name = form.cleaned_data['last_name']
    username = form.cleaned_data['username']
    email = form.cleaned_data['email']
    password = form.cleaned_data['password']

    reg = User.objects.create_user(
        username=username,
        password=password, 
        email=email
        ) 

    reg.is_active = True
    reg.first_name = first_name
    reg.last_name = last_name
    new_user = reg.save()

    // This will give the system seconds (time) to generate new id 
    // before giving to userprofile
    messages.info(request, "User successfully registered. Creating profile...")

    UserProfile.objects.create(user_id=new_user.id, other_field='')

    ............ 
```****

# php - Foreach 循环只取最后一个值

> ID：15149679
> 
> 赞同：-4
> 
> 时间：2013-03-01T02:53:12.103
> 
> 标签：php

我是 PHP 新手，我有一点问题。我有这样的代码：

```
$file = $_FILES['sel_file']['name'];

$chk_ext = explode(".",$file);

if(strtolower($chk_ext[1]) == "txt")
{

    $filename = $_FILES['sel_file']['tmp_name'];
    $handle = fopen($filename, "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
    {
        $array = array( $data[0]);
        foreach( $array as $value )
        {
            $number=$value;
        }

        $obj=new Sender("$number");
    }

    header("location:bulk.php?msg=send");
}
else
{
    header("location:bulk.php?invalid=file");
    exit();

}
$obj->Submit (); 
```

问题是只有最后一个值来自文本文件`$obj=new Sender("$number");`，请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:33:11.440

fgetcsv() 已经返回了一个数组，所以：`$array = array( $data[0]);`只是意味着您只检索字段数组的第一个元素，即 $data。在 foreach 循环中，您只需将 $array 变量替换为 $data。循环将如下所示：

```
foreach( $data as $value )
    {
        $number=$value;
    }

    $obj=new Sender("$number"); 
```

意味着对于 $data 中的每个元素，将其保存在 $number 中，再次循环并再次将其放入 $number 覆盖它。在 foreach 循环之后，$number 的值将是该行的最后一个字段。

您应该只将行`$obj=new Sender("$number");`放在循环中，以便将每一行的每个元素都放入 Sender。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:55:21.677

没有惊喜。你遍历所有的值，不断地`$number`用最近检索的值覆盖。当循环退出时，你只会得到最后一个。

可能您想要更多类似的东西：

```
foreach($array as $value) {
   $obj = new Sender($value);
} 
```

您的代码也没有什么意义。您获取一个上传的文件，大概是 CSV，从中读取一行，从该行中提取 FIRSt 值。强制将该值放入一个数组，然后读回数组中的那个 ONE 值（数组中的**唯一**值），并对其进行处理。

即使您的 foreach 没有覆盖该值，您仍然只有一个值可以循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:56:33.957

You are overwriting the contents of number each iteration. You can instead make number an array which stores each value at incrementing elements.

```
foreach( $array as $value )
 {
   $number[]=$value;
 }

$obj=new Sender($number); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T02:56:18.650

那是因为您`$number`在每次迭代中都分配了一个新值。您需要附加到该变量 ( `$number .= $value`)，或者需要将其添加到数组 ( `$number[] = $value`)。

# matlab - 在 MATLAB 中更改矩阵中的行顺序

> ID：15149680
> 
> 赞同：1
> 
> 时间：2013-03-01T02:53:23.873
> 
> 标签：matlab, matrix

我需要转换一个矩阵：

```
X = [1 2; 3 4; 5 6; 7 8]
X = 1 2
    3 4
    5 6
    7 8 
```

至

```
X = [1 2; 5 6; 3 4; 7 8]
X = 1 2
    5 6
    3 4
    7 8 
```

并对具有任意行数的矩阵执行此操作。这样在一个有 200 行的矩阵中，第 101 行将成为第 2 行，第 102 行将成为第 4 行，依此类推。如何在 MATLAB 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:08:44.103

对于偶数行的数组，请执行以下操作：

```
nRows = size(X,1);

idx = [1:nRows/2;nRows/2+1:nRows];

X_rearranged = X(idx(:),:); 
```

对于奇数行的数组，您将 1 添加到`nRows`, 并使用`idx(1:end-1)`而不是`idx(:)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-25T07:34:29.957

您可以使用：

```
X = [1 2; 3 4; 5 6; 7 8]
Y = [a(1,:); a(3,:); a(2,:); a(4,:)] 
```

# ios - iOS：如何减小启动画面的图像大小

> ID：15149681
> 
> 赞同：4
> 
> 时间：2013-03-01T02:53:27.367
> 
> 标签：ios, splash-screen

对于一个支持 iphone 和 ipad 的通用应用程序，有几种分辨率，视网膜或非视网膜屏幕，纵向和横向，因此会有很多 *.png，这将极大地增加应用程序包大小的最终大小。

对于减小图像尺寸有什么好的建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T03:00:52.430

您可以尝试[Imageoptim](http://imageoptim.com/)，它也可以优化 png 和 jpeg 图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T06:25:52.797

此外，您可以使用 .jpg 作为启动画面。

请记住更改**info.plist**文件`UILaunchImageFile = "splash.jpg"`中的设置。

 **我在我最新的应用程序中使用它。700K png 仅是 180k jpg。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:58:42.753

The best way is to use `pngcrush`. You can use it to try all possible encoding methods and get the smallest files possible.**

# python - 在python中生成列表的条件乘积（组合）

> ID：15149685
> 
> 赞同：2
> 
> 时间：2013-03-01T02:54:09.977
> 
> 标签：python, tree, combinatorics, itertools

我希望能够生成有条件的产品。与此答案非常相似： [列表列表的所有组合](https://stackoverflow.com/questions/798854/all-combinations-of-a-list-of-lists)

我想用`itertools.product(*listOfLists)`. 但是，我的问题是，从一个列表中包含一个元素意味着必须为该产品咨询其他列表。

例子：

```
colors = ['red', 'blue', 'green']
fruits = ['apple', 'orange', 'banana']
locations = ['indoors', 'outdoors']

indoor_choices = ['bathroom', 'bedroom', 'kitchen']
green_choices = ['forest', 'light', 'dark'] 
```

在这里，我们要始终考虑颜色、服装和位置的所有可能选择。然而，在'indoor'的情况下，我们也想考虑indoor_choices，而在'green'是一个可能的选择的情况下，我们也想选择更具体的绿色。这是一种可能性树，其中一些分支继续分支，而其他分支则没有。

所以在上面这个愚蠢的例子中，你可以像这样做一个 for 循环：

```
for c in colors:
    for f in fruits:
        for l in locations:
            # etc 
```

但是随后我们遇到了一个问题，即当两个不同的类别可能基于此选择进行分支时会发生什么。

一个简单（hacky）的解决方案就是手动编码条件并在其中放置 for 循环：

```
for c in colors:
    for f in fruits:
        for l in locations:

            if c == 'green' and l == 'indoor':
                for gc in green_choices:
                     for ic in indoor_choices:
                         # output

            elif c == 'green':
                for gc in green_choices:
                    # output

            elif l == 'indoor':
                for gc in green_choices:
                    # output

            else:
                # output 
```

但是想象一下当有 N 个列表，其中 M 个有额外的分支时的恐怖。或者更糟糕的是，还有*嵌套*的附加分支......基本上这个黑客无法扩展。

有任何想法吗？事实证明，这个问题本身就具有欺骗性的难度！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T04:12:00.153

这就是我的做法，使用递归生成器。

```
def prod(terms, expansions):
    if not terms: # base case
        yield ()
        return

    t = terms[0] # take the first term

    for v in expansions[t]: # expand the term, to get values
        if v not in expansions: # can the value can be expanded?
            gen = prod(terms[1:], expansions) # if not, we do a basic recursion
        else:
            gen = prod(terms[1:] + [v], expansions) # if so, we add it to terms

        for p in gen: # now we get iterate over the results of the recursive call
            yield (v,) + p # and add our value to the start 
```

以下是您如何调用它来生成示例中所需的产品：

```
expansions = {
        'colors':['red', 'blue', 'green'],
        'fruits':['apple', 'orange', 'banana'],
        'locations':['indoors', 'outdoors'],
        'indoors':['bathroom', 'bedroom', 'kitchen'],
        'green':['forest', 'light', 'dark']
    }

terms = ["colors", "locations"] # fruits omitted, to reduce the number of lines

for p in prod(terms, expansions):
    print(p) 
```

输出：

```
('red', 'indoors', 'bathroom')
('red', 'indoors', 'bedroom')
('red', 'indoors', 'kitchen')
('red', 'outdoors')
('blue', 'indoors', 'bathroom')
('blue', 'indoors', 'bedroom')
('blue', 'indoors', 'kitchen')
('blue', 'outdoors')
('green', 'indoors', 'forest', 'bathroom')
('green', 'indoors', 'forest', 'bedroom')
('green', 'indoors', 'forest', 'kitchen')
('green', 'indoors', 'light', 'bathroom')
('green', 'indoors', 'light', 'bedroom')
('green', 'indoors', 'light', 'kitchen')
('green', 'indoors', 'dark', 'bathroom')
('green', 'indoors', 'dark', 'bedroom')
('green', 'indoors', 'dark', 'kitchen')
('green', 'outdoors', 'forest')
('green', 'outdoors', 'light')
('green', 'outdoors', 'dark') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:40:50.220

我们可以在事后添加“额外”选项（Python 3 语法）：

```
def choice_product(choices, *iterables):
    for v in itertools.product(*iterables):
        ks = set(v) & choices.keys()
        if ks:
            choice_iters = [choices[k] for k in ks]
            for p in choice_product(choices, *choice_iters):
                yield v + p
        else:
            yield v 
```

这`itertools.product`用于效率。

定义`choices`为

```
choices = {'indoors' : ['bathroom', 'bedroom', 'kitchen'],
           'green': ['forest', 'light', 'dark']} 
```

这递归：

```
>>> for i in choice_product({'c': 'de', 'e': 'fg'}, 'ab', 'cd'):
...     print(i)
... 
('a', 'c', 'd')
('a', 'c', 'e', 'f')
('a', 'c', 'e', 'g')
('a', 'd')
('b', 'c', 'd')
('b', 'c', 'e', 'f')
('b', 'c', 'e', 'g')
('b', 'd') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T04:27:39.407

这是一个使用`yield`. 我认为它不像@Blckknght 的解决方案那么简洁，但它可能会有所帮助。

```
colors = ["red","blue","green"]
fruits = ["apple","orange", "banana"]
locations = ["indoors","outdoors"]

green_subtypes = ["forest", "light", "dark"]
indoor_locations = ["bathroom","bedroom","kitchen"]

def gen(state):
  if len(state)==0:
    for c in colors:
       s = [c]
       for y in gen(s):
         yield y
  elif len(state)==1:
    for x in fruits:
      s = state + [x]
      for y in gen(s):
        yield y
  elif len(state)==2:
    for x in locations:
      s = state + [x]
      for y in gen(s):
        yield y
  else:
    # If we're green and we haven't looped through the green options already 
    # (the check is a bit dodgy and could do with being moved into a flag inside state)
    if state[0]=='green' and len(set(state).intersection(set(green_subtypes)))==0:
      for x in green_subtypes:
        s = state + [x]
        for y in gen(s):
          yield y
    # If we're indoors and we haven't looped through the indoor options already 
    # (the check is a bit dodgy and could do with being moved into a flag inside state)
    elif state[2]=='indoors' and len(set(state).intersection(set(indoor_locations)))==0:
      for x in indoor_locations:
        s = state + [x]
        for y in gen(s):
          yield y
    else:
      yield state

for x in gen([]):
  print(x) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T03:23:01.150

如果你真正的问题真的和你的例子一样，那么你可以将组合分析成四个产品：

```
is_green = ['green']
not_green = ['red', 'blue']
is_indoors = ['indoors']
not_indoors = ['outdoors']

p1 = itertools.product([not_green, fruits, not_indoors])
...
p2 = itertools.product([is_green, fruits, not_indoors, green_choices])
...
p3 = itertools.product([not_green, fruits, is_indoors, indoor_choices])
...
p4 = itertools.product([is_green, fruits, is_indoors, green_choices, indoor_choices]) 
```

就这样！

现在，如果我们想要概括，因此我们不必做出四种“特殊”情况，我们可以捕捉某些值与它们打开的额外选择之间的关系，正如@DavidRobinson 所建议的那样。

```
import itertools

colors = ['red', 'blue', 'green']
fruits = ['apple', 'orange', 'banana']
locations = ['indoors', 'outdoors']

indoor_choices = ('bathroom', 'bedroom', 'kitchen')
green_choices = ('forest', 'light', 'dark')

choices = [colors, fruits, locations]
more_choices = { 'indoors': indoor_choices, 'green': green_choices }
for p in itertools.product(*choices):
    m = [more_choices[k] for k in p if k in more_choices]
    for r in itertools.product([p],*m):
        print list(r[0]) + list(r[1:]) 
```

请注意，当choices 和more_choices 很大时，难免会遇到困难。

# c# - DLL 无法识别

> ID：15149687
> 
> 赞同：-1
> 
> 时间：2013-03-01T02:54:17.247
> 
> 标签：c#

我正在尝试为我的学校项目创建和使用 dll 文件。我按照[http://www.dreamincode.net/forums/topic/54433-creating-a-dll-to-store-common-methods-in-c%23/](http://www.dreamincode.net/forums/topic/54433-creating-a-dll-to-store-common-methods-in-c%23/)中的步骤操作， 但我的项目找不到 dll。这是我的代码：

```
namespace DBSql
{
    class DBSql
    {
       //some static methods
     }
} 
```

然后我构建类库，在发布文件夹中，有一个 DbSql.dll 文件。我将它添加为我的 wndows 项目的参考。但是当我尝试键入 DBSql 时，该项目甚至没有找到它。我错过了一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:58:51.720

2 Things to try:

1) Make your class public

```
namespace DBSql
{
    public class DBSql
    {
       //some static methods
     }
} 
```

2) When you are trying to reference the class, add a using statement at the top of your file:

```
using DBSql; 
```

**But**, I think you may have an issue with conflicting Namespace and Class. So maybe change one of them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:04:25.927

因为当您键入时`DBSql`会调用命名空间。您必须键入另一个`DBSql`，`DBSql.DBSql.SomeStaticFunction()`因为您的命名空间的名称与您的类相同。还要公开您的课程。

# c# - 如何从计算机生成唯一密钥以授权我的应用程序？

> ID：15149688
> 
> 赞同：4
> 
> 时间：2013-03-01T02:54:20.990
> 
> 标签：c#, asp.net, winforms

我想为我的 Windows 应用程序提供许可。因为，我在网上搜索，我可以使用 MAC 地址。但同时，它可以被欺骗。每个 KEY 都存在问题，例如：

1.  处理器编号
2.  主板编号
3.  硬盘序列号

解决方案是什么？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:55:56.610

如果您进行这种类型的许可，您必须预料到跟踪您的客户的许可将成为一项持续的管理工作。一旦你有几百个客户，你会惊讶于你接到电话要求更改密钥的频率，否则客户可能会更换他们的整台机器，并且需要更新的许可证才能在新机器上运行你的软件。在我工作的公司，我们几乎每天都会接到这些电话。

如果您给他们一个新密钥，您还需要相信客户停止在旧计算机（或网络适配器）上使用您的软件。如果你一开始就不能相信他们会遵守许可证，你怎么能相信他们会扔掉旧钥匙呢？

如果您不计划如何支持此管理活动，请不要以这种方式许可您的产品。你只会给那些本来会合作的好客户带来不便。

尝试参考通过 USB**加密狗获得许可的技术**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:07:35.560

你为什么要如此安全地将应用程序链接到计算机如果用户购买你的应用程序安装在他的机器上然后突然决定他不再喜欢这台机器并购买一个新的机器如果你的应用程序许可证只会与那台机器有关，这意味着他必须再次购买该应用程序....

相反，只需使用唯一的密钥生成器，有很多示例，如果您不想在同一台机器上安装多个版本的应用程序，您可以随时在注册表中记下。

这里有几个例子

[http://www.codeproject.com/Articles/11012/License-Key-Generation](http://www.codeproject.com/Articles/11012/License-Key-Generation)

[http://www.jagregory.com/writings/rhino-licensing/](http://www.jagregory.com/writings/rhino-licensing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:24:45.430

标准 PC 上没有可用于唯一标识它的信息。正如您所说，您最好的办法是使用组件的序列号。因为架构、Windows 驱动模型等。是开放的，这些可以被欺骗。您还必须考虑到，如果这些组件失败，您的用户可能会更换这些组件，这可能会导致您的许可证验证失败。

诸如手机之类的现代设备具有用于此类目的的唯一可识别信息（例如：Android 的设备 ID）。

我建议您最好的选择是识别用户，而不是机器。如果可能，请使用您从服务器端验证的用户名/密码组合。否则，您将不得不冒险使用序列号。

您可以使用第三方解决方案，例如 AppStore/Market，它本质上是在每次应用程序启动时在服务器端进行验证。一个例子是随 Windows Vista 引入的[Microsoft Digital Locker](http://social.technet.microsoft.com/Forums/en-US/itprovistaactivation/thread/711b70e7-d961-47b1-b8fd-8dadb065cdf0/)，但它不再可用。

# c# - WPF VS 集合编辑器教程？

> ID：15149689
> 
> 赞同：3
> 
> 时间：2013-03-01T02:54:27.697
> 
> 标签：c#, wpf, visual-studio, user-controls

我有一个带有 Collection 属性的用户控件。我想要实现的是能够通过 VS 设计器（属性窗口/集合编辑器）添加/修改/删除该集合的某些数据类型的项目。

我有一个简单的课程：

```
public class Quantity
{
    public string Name { get; set; }
    public Type DataType { get; set; }
} 
```

在我的用户控件中，我有：

```
private ObservableCollection<Quantity> _quantities = new ObservableCollection<Quantity>();
public ObservableCollection<Quantity> Quantities
{
    get { return _quantities; }
} 
```

问题是我可以通过 VS Collection 编辑器更改 Name 属性，但我无法以这种方式更改 DataType 属性。

![通过 VS 集合编辑器修改集合](../Images/4cff25261af7ee79aea99eaf436f0c27.png)

那么我该怎么做才能让它工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:46:57.057

我不相信这可以通过属性编辑器来实现。但是，您可以在 XAML 中生成结果。这是使用您的示例的样子：

```
<my:UserControl1>
    <my:UserControl1.Quantites>
        <my:Quantity Name="Hello World" DataType="{x:Type sys:Boolean}"/>
        <my:Quantity Name="This is a double" DataType="{x:Type sys:Double}"/>
    </my:UserControl1.Quantites>
</my:UserControl1> 
```

如果您需要访问系统类型（就像我在示例中使用的那样），您可以包含以下 xmlns：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

希望能帮助到你 ：）

# c++ - 为什么在执行这个程序的过程中，y 从不显示为 1？

> ID：15149693
> 
> 赞同：2
> 
> 时间：2013-03-01T02:54:42.300
> 
> 标签：c++, loops, increment, operator-precedence

参加 c++ 入门课程，今天的教授正在谈论循环、增量和减量。所以我们正在检查一个简单的do-while循环会运行多少次，我注意到在以下代码的输出过程中，`int y`首先显示为a `2`，但是首先使用增量的后缀符号，并且根据我的教授，也有优先权（如`x`显示的变量）。那么为什么不在输出窗口中`y`首先显示为：“ **1 3 ”？**

可能是一个很简单的答案，但他并不立即知道，并要求我们看看我们是否可以找到。我们使用的是 dev c++ 的最新版本。

```
#include <iostream>
using namespace std;

int main()
{
    int x=1;
    int y=1;

    do
    {
        cout << "x: " << " " << ++x << " " << x++ << endl;
        cout << "y: " << " " << y++ << " " << ++y << endl;
    }while(x<=10);

    return 0;
} 
```

如果你运行它，显示将如下所示：

```
x:  3 1
y:  2 3
x:  5 3
y:  4 5
x:  7 5
y:  6 7
x:  9 7
y:  8 9
x:  11 9
y:  10 11 
```

由于我的理解有限，我想出了这个：由于在同一语句中使用了多个增量操作，它们都在 cout 语句将信息显示到控制台之前执行。
但寻找可能更准确的答案/解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:27:33.953

++y 在将 int y 的引用传递给之前递增并分配 y 的新值，`operator<<(std::ostream&, const int&)`并且 y++ 在`operator<<(std::ostream&,const int&)`返回后递增并分配 y

因此，您第一次打印 2，因为 y=1 被传递给 operator<< y++ 被调用以打印 2，并且在调用 operator<< y 之后被分配 2。

在 y 上对 operator<< 的第二次调用将 y 设置为 2，在将引用传递给 operator<< 之前调用 ++y 并且 y 为 3。

# objective-c - 在 UINavBar 中按下 UIBarButtonItem 会将无法识别的选择器发送到实例

> ID：15149695
> 
> 赞同：0
> 
> 时间：2013-03-01T02:54:48.823
> 
> 标签：objective-c, uibarbuttonitem, unrecognized-selector

我有一个实现 splitView 控制器的视图。

我必须向导航控制器添加两个按钮。我在 UIBuilder 中添加了第一个，但它不允许我添加第二个，所以我在代码中做了......

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview: _splitViewController.view];
    _splitViewController.delegate = _rightViewController;
    _leftViewController.delegate = _rightViewController;
    _rightViewController.leftView = _leftViewController;
   bbi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone   target:self action:@selector(done)];
    _navItem.leftBarButtonItem = bbi;
} 
```

其中 bbi 在标题中声明为

```
@property (nonatomic, retain)     UIBarButtonItem * bbi; 
```

与上面的匹配定义和综合。

我已将 done 方法声明为 - (void)done:(UIBarButtonItem *)sender;

但是当我点击完成按钮时，我得到了错误

```
-[ConfigurationViewController done]: unrecognized selector sent to instance 
```

我已经尝试了很多事情，在本地而不是在 h 文件中声明 bbi，在 h 文件中没有声明 done ，让 done 方法期望一个 id ，但没有运气。

我显然在做一些愚蠢的事情。知道什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:00:24.980

如果是这样的方法，我认为 done 后面应该有一个冒号：

```
bbi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone   target:self action:@selector(done:)]; 
```

# python - 是否有 ELF 的 PEFile

> ID：15149697
> 
> 赞同：4
> 
> 时间：2013-03-01T02:55:00.590
> 
> 标签：python, executable, file-format, elf

我喜欢使用 Python 的 PeFile 库来解析 PE 文件。是否有用于解析 ELF 的类似库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:57:36.110

You should take a look at [pyelftools](https://pypi.python.org/pypi/pyelftools)

It supports `ELF` and `DWARF` binary formats. It is a project which is in active development too.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-27T06:48:22.557

这很老了，但是当我搜索时它仍然出现在谷歌的顶部......

一个好的图书馆是 lief - [https://lief.quarkslab.com](https://lief.quarkslab.com)

它支持elf、pe和macho

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T08:34:11.260

还有pylibelf：[https ://github.com/crackinglandia/pylibelf](https://github.com/crackinglandia/pylibelf)

它只支持 ELF 格式，而且是只读的。但它正在积极开发中，预计在我写这篇文章时，写部分很快就会完成。

# symfony - Symfony2 ManyToMany 多字段表单集合

> ID：15149709
> 
> 赞同：2
> 
> 时间：2013-03-01T02:56:24.473
> 
> 标签：symfony, doctrine-orm, symfony-2.1

有没有办法以“多个”并且是集合的一部分的形式正确保存在关系 ManyToMany 字段实体中？我到处找，但找不到一点例子让我明白该怎么做！

我找不到解决方案！

```
class Anagrafica
{
/**
 * @ORM\ManyToMany(targetEntity="SubCategories", inversedBy="anagrafiche", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="AnCat")
 **/
 private $subCategories;

 //..
 public function __construct()
 {
 $this->subCategories = new \Doctrine\Common\Collections\ArrayCollection();
//..
}

/**
 * Add subCategories
 *
 * @param \My\BusinessBundle\Entity\SubCategories $subCategories
 * @return Anagrafica
 */
public function addSubCategory(\My\BusinessBundle\Entity\SubCategories $subCategories)
{
    foreach ($subCategories as $subCategory) {
        $subCategory->addAnagrafiche($this);
    }

    $this->subCategories = $subCategories;
}

*******
class SubCategories
{
/**
 * @ORM\ManyToMany(targetEntity="Anagrafica", mappedBy="subCategories")
 */
private $anagrafiche;

public function __construct()
{
$this->anagrafiche = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Add anagrafiche
 *
 * @param \My\BusinessBundle\Entity\Anagrafica $anagrafiche
 * @return SubCategories
 */
public function addAnagrafiche(\My\BusinessBundle\Entity\Anagrafica $anagrafiche)
{
if (!$this->anagrafiche->contains($anagrafiche)) {
    $this->anagrafiche->add($anagrafiche);
}
}

******

AnagraficaType:

//..
->add('subCategories', 'collection', array('type' => new SubCategoriesType(),
            'allow_add' => true,
            'allow_delete' => true,
            'prototype' => true,
            'prototype_name' => '__categ__',
            'by_reference' => false
        ))

*******
SubCategoriesType:

->add('subCategory', 'entity', array(
        'class' => 'CoffeeBusinessBundle:SubCategories',
        'property' => 'subCategory',
        'label' => 'Sotto Categorie',
        'multiple' => true
    )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:50:26.883

## 部分解决

如果我直接输入字段集合并进行以下更改：

```
AnagraficaType:
->add('subCategories', 'collection', array(
                'type' => 'entity',
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'prototype_name' => '__categ__',
                'by_reference' => false,
                'options' => array(
                    'label' => 'Sotto Categorie',
                    'multiple' => true,
                    'class' => 'MyBusinessBundle:SubCategories',
                    'property' => 'subCategory'
                    )
            )) 
```

Anagrafica 实体：

```
public function addSubCategory(ArrayCollection $subCategories)
{
    foreach ($subCategories as $subCategory) {
        $subCategory->addAnagrafiche($this);
        //var_dump($subCategory);
    }
    $this->subCategories = $subCategories;
} 
```

部分获得所需的结果，但如果我在表单子类别（按集合）中添加一个字段，则仅保存最后输入的字段。我收到了一个 var_dump ArrayCollection 对象，实际上里面只有最后一个输入字段的数据。

任何的想法？

# python - Converting UNIX time to datetime object in Jinja templates

> ID：15149712
> 
> 赞同：7
> 
> 时间：2013-03-01T02:56:38.033
> 
> 标签：python, google-app-engine, timestamp, python-datetime

I want to convert my timestamp to datetime in jinja2..

here's my sample code:

```
import time

date = time.time()
self.tv['date'] = date 
```

sample html:

```
<p>{{ date }}</p> 
```

I want to convert it to datetime using jinja2 in python..

thanks..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-23T11:57:43.977

制作一个自定义过滤器，例如

```
@app.template_filter('ctime')
def timectime(s):
    return time.ctime(s) # datetime.datetime.fromtimestamp(s) 
```

并使用您的模板过滤器

```
{{ date | ctime }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T02:58:09.157

You convert it before passing it to a template, eg:

```
>>> import time
>>> date = time.time()
>>> from datetime import datetime
>>> datetime.fromtimestamp(date)
datetime.datetime(2013, 3, 1, 2, 57, 29, 472572) 
```

And optionally use formatting:

```
>>> format(datetime.fromtimestamp(date), '%Y%m%d')
'20130301' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T16:12:20.743

在模板中使用它：

```
{{ time | from_timestamp('%Y.%m.%d. %H:%M:%S UTC') }} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-09-18T02:21:40.477

使用以下，数据

```
{
    "timestamp": "1424197820"
} 
```

模板

```
{{ timestamp|timestamp_to_time|datetimeformat('%a, %B %d') }} 
```

渲染

> 2 月 17 日，星期二

[资源](https://support.sendwithus.com/jinja/jinja_time/#using-timestamp_to_time)

# java - Not able to implement doPost() method

> ID：15149717
> 
> 赞同：0
> 
> 时间：2013-03-01T02:57:07.020
> 
> 标签：java, servlets

I am learning Java Servlets. Trying to implement the doPost() method, however I get an error that "HTTP Status 405 - HTTP method POST is not supported by this URL".

Code

```
<html>
<body>
<center>
<form name="Form1" action="http://localhost:8080/examples/servlet/ColorGetServlet" method="post">
<B>Color:</B>
<select name="color" size="1">
<option value="Red">Red</option>
<option value="Green">Green</option>
<option value="Blue">Blue</option>
</select>

<br><br>
<input type=submit value="Submit">
</form>
</body>
</html> 
```

Servlet

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ColorGetServlet extends HttpServlet{

public void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException{

    String color = request.getParameter("color");
    response.setContentType("text/html");
    PrintWriter pw = response.getWriter();

    pw.println("<B>The Selected Color is: ");
    pw.println(color);
    pw.close();
    } 
} 
```

Will appreciate if anyone can tell me what am I doing wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T05:06:00.367

这是一种变通方法，而不是调用 servlet 的正确过程。将以下行添加到 jsp 页面的顶部。

```
<%@page import="your-package-name.examples.servlet.ColorGetServlet"%> 
```

例如，

```
<%@page import="com.yourcompany.examples.servlet.ColorGetServlet"%> 
```

这不是一个好方法，因为您直接绕过了 web.xml，而是将 servlet 导入到您的 jsp 页面中。并在您的页面更改`<input type=submit value="Submit">` 为

```
<input type="submit" value="Submit"> 
```

尝试上述方法，如果失败，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-02T10:21:19.897

您好，问题出在action，请改成

```
<html>
<body>

<form name="Form1" action="<%=request.getContextPath() %>/ColorGetServlet" method="post">
<B>Color:</B>
<select name="color" size="1">
<option value="Red">Red</option>
<option value="Green">Green</option>
<option value="Blue">Blue</option>
</select>

<br><br>
<input type=submit value="Submit">
</form>

</body>
</html> 
```

web.xml 应该如下所示：

```
 <servlet>
    <description></description>
    <display-name>ColorGetServlet</display-name>
    <servlet-name>ColorGetServlet</servlet-name>
    <servlet-class>ColorGetServlet.ColorGetServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ColorGetServlet</servlet-name>
    <url-pattern>/ColorGetServlet</url-pattern>
  </servlet-mapping> 
```

我希望我有帮助

# javascript - 选择两个单词之间的文本

> ID：15149726
> 
> 赞同：4
> 
> 时间：2013-03-01T02:58:18.240
> 
> 标签：javascript, string, parsing

我正在从维基词典 API 中检索一些数据。他们的 API 解析没有 html 属性或 xml 属性的整个文本块。

文本示例：

```
===Etymology===
{{-er|develop}}

===Pronunciation===
* {{a|UK}} {{IPA|/dɪˈvɛləpə(ɹ)/}}
* {{a|US}} {{IPA|/dɪˈvɛləpɚ/}}

===Noun===
{{en-noun}}

# A person or entity engaged in the [[creation]] or [[improvement]] of certain classes of products.
# A [[real estate]] developer; a person or company who prepares a parcel of land for sale, or creates structures on that land.
# A [[film]] developer; a person who uses [[chemical]]s to create [[photograph]]s from photograph negatives.
# A [[liquid]] used in the chemical processing of traditional photos.
# A [[software]] developer; a person or company who creates or modifies [[computer]] software.

====Synonyms====
* {{sense|person or company who writes computer software}} [[programmer]]

====Related terms====
* [[develop]]
* [[development]]
* [[developmental]] 
```

是否可以**选择 ===Noun=== 和 ====Synonyms==== 之间的文本？** 例如，我想以这个结束：

*   从事某些类别产品的创造或改进的个人或实体。*   房地产开发商；准备出售一块土地或在该土地上建造建筑物的个人或公司。*   胶片显影剂；使用 [[化学]] 从照片底片创建 [[照片]] 的人。*   一种用于对传统照片进行化学处理的液体。

=======================

整个文本块可以在此处找到：[http](http://pastebin.com/raw.php?i=5ETx4ivB) ://pastebin.com/raw.php?i=5ETx4ivB ，API 的结果可以在此处以 XML 形式找到：[http ://en.wiktionary.org/ w/api.php?action=query&prop=revisions&rvprop=content&format=xml&titles=developer](http://en.wiktionary.org/w/api.php?action=query&prop=revisions&rvprop=content&format=xml&titles=developer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:07:30.667

你能试一下吗

```
var start  = str.indexOf('===Noun==='), end = str.indexOf('====Synonyms====');
var text = str.substring(start + 11, end) // +11 since `indexof` gives the start index and you need to exclude `===Noun===` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:02:58.970

使用 indexOf() 查找子字符串的位置，然后使用 substr() 获取您找到的两个位置之间的字符串。

# java - Java Web 服务：在简单的应用程序中使用生成的客户端代码获取 HTTP 400

> ID：15149728
> 
> 赞同：0
> 
> 时间：2013-03-01T02:58:26.570
> 
> 标签：java, web-services, swing

**设想**

我在 .NET (WCF) 中创建了 Web 服务，并且我必须将 Java Swing 用于客户端应用程序。

**环境**

网豆 7.2

**JAVA代码：**

```
BookingService service;
    List<Booking> bookings;

    /**
     * Creates new form Home
     */
    public Home() {
        initComponents();
        service = new BookingService();
        refresh();
    }

    private void refresh() {
        DefaultTableModel model = (DefaultTableModel)grid.getModel();
        model.setRowCount(0);

        bookings = getAll().getBooking(); // breaks at this line
        if (bookings != null && !bookings.isEmpty()) {
            grid.getColumnModel().getColumn(0).setMinWidth(50);
            grid.getColumnModel().getColumn(0).setMaxWidth(50);
            grid.getColumnModel().getColumn(1).setMinWidth(150);
            grid.getColumnModel().getColumn(1).setMaxWidth(150);
            for (int i = 0; i < bookings.size(); i++) {
                Booking item = bookings.get(i);
                Object[] rowData = new Object[] {
                    item.getId(),
                    item.getCustomerId(),
                    item.getActivityId(),
                    item.getBookingDate(),
                    item.getStartTime(),
                    item.getEndTime()
                };
                model.addRow(rowData);
            }
        }
    }

//etc

private static ArrayOfBooking getAll() {
        racquetandhealthclient.services.bookings.BookingService service = new racquetandhealthclient.services.bookings.BookingService();
        racquetandhealthclient.services.bookings.IBookingService port = service.getWSHttpBindingIBookingService();
        return port.getAll();
    } 
```

**输出：**

```
ant -f C:\\Users\\Matt\\Documents\\NetBeansProjects\\RacquetAndHealthClient -Ddebug.class=racquetandhealthclient.Program debug
init:
Deleting: C:\Users\Matt\Documents\NetBeansProjects\RacquetAndHealthClient\build\built-jar.properties
deps-jar:
Updating property file: C:\Users\Matt\Documents\NetBeansProjects\RacquetAndHealthClient\build\built-jar.properties
wsimport-init:
wsimport-client-activities:
files are up to date
wsimport-client-bookings:
files are up to date
wsimport-client-charge-accounts:
files are up to date
wsimport-client-countries:
files are up to date
wsimport-client-customers:
files are up to date
wsimport-client-invoices:
files are up to date
wsimport-client-generate:
compile:
Mar 01, 2013 9:42:56 AM [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector]  selectAlternatives
WARNING: WSP0075: Policy assertion "{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}SymmetricBinding" was evaluated as "UNKNOWN".
Mar 01, 2013 9:42:56 AM [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector]  selectAlternatives
WARNING: WSP0075: Policy assertion "{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}Trust10" was evaluated as "UNKNOWN".
Mar 01, 2013 9:42:56 AM [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector]  selectAlternatives
WARNING: WSP0075: Policy assertion "{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}Wss11" was evaluated as "UNKNOWN".
Mar 01, 2013 9:42:56 AM [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector]  selectAlternatives
WARNING: WSP0075: Policy assertion "{http://www.w3.org/2006/05/addressing/wsdl}UsingAddressing" was evaluated as "UNKNOWN".

//ETC.... same as above lines about 30 times... then:

Exception in thread "AWT-EventQueue-0" com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 400: Bad Request
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:278)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:245)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:203)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)
    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:123)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)
    at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)
    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
    at $Proxy31.getAll(Unknown Source)
    at racquetandhealthclient.views.bookings.Home.getAll(Home.java:94)
    at racquetandhealthclient.views.bookings.Home.refresh(Home.java:35)
    at racquetandhealthclient.views.bookings.Home.<init>(Home.java:28)
    at racquetandhealthclient.Program$1.run(Program.java:38)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
debug:
BUILD SUCCESSFUL (total time: 1 minute 26 seconds) 
```

请帮忙！我不是 java 专业人士，所以请让我了解问题所在以及如何解决问题。我已经“用谷歌搜索”了，但在这方面没有找到太多。有任何想法吗？

**编辑：** 用 Soap UI 得到这个。不确定解决方案是什么，因为我没有为它设置任何类型的身份验证：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
   <s:Header>
      <a:Action s:mustUnderstand="1">http://www.w3.org/2005/08/addressing/soap/fault</a:Action>
   </s:Header>
   <s:Body>
      <s:Fault>
         <s:Code>
            <s:Value>s:Sender</s:Value>
            <s:Subcode>
               <s:Value xmlns:a="http://schemas.xmlsoap.org/ws/2005/02/sc">a:BadContextToken</s:Value>
            </s:Subcode>
         </s:Code>
         <s:Reason>
            <s:Text xml:lang="en-US">The message could not be processed. This is most likely because the action 'http://tempuri.org/IBookingService/GetAll' is incorrect or because the message contains an invalid or expired security context token or because there is a mismatch between bindings. The security context token would be invalid if the service aborted the channel due to inactivity. To prevent the service from aborting idle sessions prematurely increase the Receive timeout on the service endpoint's binding.</s:Text>
         </s:Reason>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

**编辑2：**

好的，伙计们..我明白了..基本上解决方法是我必须将 WCF 服务从 using 更改`wsHttpBinding`为`basicHttpBinding`. 似乎他们使用不同版本的 SOAP 规范。希望这对其他人有帮助。我稍后会将其添加为答案，但 StackOverflow 不会让我再过 8 小时回答我自己的问题，因为我的声望不到 10。如果有人可以对此帖子进行投票，那么我将立即添加答案。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:39:48.847

我明白了.. 基本上解决方法是我必须将 WCF 服务从使用 wsHttpBinding 更改为 basicHttpBinding。似乎他们使用不同版本的 SOAP 规范。希望这对其他人有帮助。

# c# - FxCop rule around ensuring a certain method accepting a lambda is called first in a test

> ID：15149729
> 
> 赞同：2
> 
> 时间：2013-03-01T02:58:28.830
> 
> 标签：c#, visual-studio-2010, analysis, fxcop, il

Using a custom FXCop rule, I want to ensure that a method is called at the top of each unit test and that all unit test code is part of an Action passed into that method. Essentially I want this:

```
 [TestMethod]
    public void SomeTest()
    {
        Run(() => {
            // ALL unit test code has to be inside a Run call
        });
    } 
```

It's not hard to ensure that Run is indeed called:

```
public override void VisitMethod(Method member)
    {
        var method = member as Method;
        if (method == null || method.Attributes == null)
            return;

        if (method.Attributes.Any(attr => attr.Type.Name.Name == "TestMethodAttribute") &&
            method.Instructions != null)
        {
             if (!method.Instructions.Any(i => i.OpCode == OpCode.Call || i.Value.ToString() == "MyNamespace.Run"))
            {
                this.Problems.Add(new Problem(this.GetResolution(), method.GetUnmangledNameWithoutTypeParameters()));
            }

        base.VisitMethod(method);
    } 
```

**The trick is to ensure there isn't something at the top of the test that is called BEFORE the Run statement.** I've spent the past few hours hacking at the Instructions collection for patterns and trying to understand how to use the Body.Statements collection in code effectively.

* * *

**This could also be posed as a simple IL question.** I want to know a specific pattern I can validate that will accept this:

```
public void SomeTest()
{
    Run(() => {
        // Potentially lots of code
    });
} 
```

But will reject either of these:

```
public void SomeTest()
{
    String blah = “no code allowed before Run”;
    Run(() => {
        // Potentially lots of code
    });
}

public void SomeTest()
{
    Run(() => {
        // Potentially lots of code
    });
    String blah = “no code allowed after Run”;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-23T03:40:01.420

尽管您可以使用类似结构的表达式树来访问，但`Method.Body`我可能还是会检查指令，因为我发现它会被过去的常见情况（例如内联数组初始化）弄糊涂。

C# 如何生成 lambda 表达式取决于 lambda 表达式访问的内容：

*   如果 lambda 表达式访问任何局部变量/参数，它将创建一个对象来保存可以从 lambda 表达式访问它们的值，然后为对象上的实例方法创建一个委托。
*   如果 lambda 表达式通过 访问任何实例成员`this`，那么它将简单地创建对实例方法的委托`this`。
*   否则，如果 lambda 表达式不访问本地变量或字段：
    *   在 VS2015 附带的 Roslyn 编译器之前，它会创建一个静态方法的委托并将其缓存在静态字段中。
    *   从 Roslyn 编译器开始，它会在嵌套类上创建实例方法，并将委托缓存在静态方法中。（此更改是出于性能原因，将委托调用到实例方法比将委托调用到静态方法更快，因为它不必重新调整参数。）

您可能可以创建自己的评估堆栈并通过该方法跟踪值（过去我不得不这样做，这不是微不足道的并且有相当多的代码但不是特别困难），但我怀疑您可以实现“足够好” " 只需执行以下规则：

*   该方法的所有局部变量都必须是编译器生成的。
*   只有编译器生成的静态字段才能被访问。
*   只能`System.Action`创建编译器生成的类型。
*   只能`Run`调用，而且必须只调用一次。
*   调用后`Run`必须跟一个指令（忽略它们之间可能出现`ret`的任意数量的指令）。`nop`
*   在调用`Run`.
*   禁止除以下以外的所有指令：
    *   分支指令（有条件和无条件）
    *   参数、本地和字段访问器指令。
    *   `newobj`, `call`, `callvirt`, `ldftn`, `nop`, `ret`,`ldnull`
    *   `_Locals`（这只是 FxCop 为局部变量插入的伪指令。）

FxCop 提供`RuleUtilities.IsCompilerGenerated`了确定本地是否是编译器生成的，但它对字段没有帮助，如果 FxCop 可以找到 pdb 文件，我怀疑只有本地人。您可能会更容易说“本地/字段/类型是编译器生成的，如果它的类型名称不是 C# 中的有效标识符”。

* * *

说了这么多，坚持所有测试完全通过该`Run`方法运行似乎有点武断。如果目标是`Run`提供通用设置/拆卸逻辑的方法，则可以通过 nunit 提供更好的方法。强制人们应用您的[操作属性](http://www.nunit.org/index.php?p=actionAttributes&r=2.6.2)比强制他们以特定方式编写测试要容易得多。

或者，您可以编写一个 Roslyn 分析器；分析器可以访问描述代码编写方式的语法树，而无需从 IL 和元数据中对结构进行逆向工程。

# python - Merge lists without ordering and not eliminating duplicates

> ID：15149733
> 
> 赞同：0
> 
> 时间：2013-03-01T02:58:42.463
> 
> 标签：python

(Python) I have 2 lists and want to merge them as follows.

```
a = [2,5,1]
b = [4,2,2] 
```

Combine lists and the expected output should be: [2,5,1,4,2,2]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:00:16.710

使用`+`：

```
a + b 
```

这将创建一个新列表，它是两个输入列表的串联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:24:27.207

还有*扩展*功能，这只是`a`扩展`b`：

```
a = [2,5,1]
b = [4,2,2]
a.extend(b) 
```

要创建一个新列表，例如：`c`即使 nneonneo 答案更简单，也可以执行以下操作：

```
def extendList(a, b):
    a.extend(b)
    return a

a = [2,5,1]
b = [4,2,2]
c = extendList(a, b) 
```

# scala - 将 Haskell monad 直接翻译成 Scala

> ID：15149738
> 
> 赞同：4
> 
> 时间：2013-03-01T02:59:02.873
> 
> 标签：scala, haskell, monads

尝试学习如何在 Scala 中编写 monad，遇到了一些麻烦

鉴于快速代码示例

```
import Control.Monad

newtype LJ a = LJ { session :: a }

instance Monad LJ where
  return s = LJ s
  (>>=) m f = f ( session m )

instance Functor LJ where
  fmap f m = LJ . f $ session m

type SimpleLJ = LJ String

auth :: String -> String -> SimpleLJ
auth = undefined

readFeed :: String -> SimpleLJ
readFeed = undefined

closeFeed :: String -> SimpleLJ
closeFeed = undefined

proceed = auth "123" "456" >>= readFeed >>= closeFeed 
```

我如何在 Scala（不是 scalaz）中写*同样的东西？*据我所知，在 scala 中实现 map/flatMap 方法就足够了，但是这里的 return 是什么？以及如何在**for**语句中没有自由变量的情况下进行绑定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T06:58:55.997

这是一个几乎直接的翻译，我相信它应该回答你的问题。它不是完全直接的，因为它不使用在 Scala 中以模式形式存在的类型类，因为在当前情况下，它只会在没有真正原因的情况下过于复杂。

```
case class LJ[A]( session : A ) {
  // See it as Haskell's "fmap"
  def map[B]( f : A => B ) : LJ[B] = 
    LJ( f( session ) )
  // See it as Haskell's ">>="
  def flatMap[B]( f : A => LJ[B] ) : LJ[B] =
    f( session )
}

type SimpleLJ = LJ[String]

def auth( a : String, b : String ) : SimpleLJ = ???

def readFeed( a : String ) : SimpleLJ = ???

def closeFeed( a : String ) : SimpleLJ = ???

def proceed : SimpleLJ = 
  auth("123", "456").flatMap(readFeed).flatMap(closeFeed)

// Same as above but using a for-comprehension, which is 
// used as a replacement for Haskell's "do"-block
def proceed2 : SimpleLJ = 
  for {
    a <- auth("123", "456")
    b <- readFeed(a)
    c <- closeFeed(b)
  } 
  yield c 
```

该解决方案演示了一种经典的面向对象方法。使用这种方法，您不能将`return`函数封装在`LJ`类型中，因为您最终会在另一个级别上工作 - 不是像类型类那样在类型上工作，而是在类型的实例上工作。所以`LJ`case 类的构造函数就变成了`return`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T14:47:20.510

我会认为 Nikita 的答案是*惯用*的翻译（在现实世界的情况下应该首选，例如因为理解支持），但它绝对不是最“直接”的翻译。

```
class LJ[A](val session : A)

trait Functor[F[_]] {
   def fmap[A,B](fa:F[A])(f:A => B) : F[B]
}

trait Monad[M[_]] {
   def pure[A](a:A):M[A]
   def bind[A,B](ma:M[A])(f:A => M[B]):M[B]
}

object LJFunctor extends Functor[LJ] {
  def fmap[A,B](lj:LJ[A])(f:A => B) = new LJ(f(lj.session))
}

object LJMonad extends Monad[LJ] {
   def pure[A](a:A) = new LJ(a)
   def bind[A,B](lj:LJ[A])(f:A => LJ[B]) = f(lj.session)
}

object MonadTest {

  type SimpleLJ = LJ[String]

  def auth(s:String, t:String):SimpleLJ = null

  def readFeed(s:String):SimpleLJ = null

  def closeFeed(s:String):SimpleLJ = null

  val proceed = LJMonad.bind(LJMonad.bind(auth("123","456"))(readFeed _))(closeFeed _)
} 
```

请注意，您可以在顶部添加一些语法糖以获得良好的`(>>=)`运算符。

# android - Android: using predefined dimens parameters in programmatic layout

> ID：15149739
> 
> 赞同：3
> 
> 时间：2013-03-01T02:59:07.487
> 
> 标签：android, xml, android-relativelayout

I want to use some predefined dimensions from my dimens.xml file in my programmatic layout.

So for instance, in my dimens.xml file I have:

```
<dimen name="margin1">40dip</dimen>
<dimen name="margin2">40dip</dimen> 
```

And then in my programmatic textview I have:

```
RelativeLayout.LayoutParams lpMargin = new RelativeLayout.LayoutParams( R.dimen.margin1, R.dimen.margin2); 
```

Applying the layout parameter to my textview results in an enormous view.

I already found the problem. If I print out:

```
Log.e("Metrics", "margin width = " +  String.valueOf(R.dimen.margin1)); 
```

...it gives an enormous value: `margin width = 2131034112`. The thing that's messing it up is the units, "dip".

So my question is: what's the correct way to specify dimensions without units for calling programmatically? If that's not possible, can I alter R.dimen.margin1 so I can use it as a programmatic layout parameter?

EDIT: It wasn't the units messing it up -- it's returning the internal ID! (As *ianhanniballake* says below, I needed to call with `getResources().getDimension(R.dimen.margin1)`).

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T03:02:07.507

利用

```
getResources().getDimension(R.dimen.margin1) 
```

或者

```
getResources().getDimensionPixelSize(R.dimen.margin1) 
```

您的代码返回分配给“R.dimen.margin1”的内部 ID，而不是您在 XML 文件中分配的值。

# ruby - Ruby：数组的类 attr_reader 能够授予对数组值的写访问权限吗？

> ID：15149747
> 
> 赞同：2
> 
> 时间：2013-03-01T02:59:48.657
> 
> 标签：ruby, arrays, setter, getter

这是**attr_reader**应该使用**数组**的方式吗？

```
class User
  def initialize
    @interests = []
  end
  attr_reader :interests
end

u = User.new

=> #User:0x1d2cb60

u.interests << "music"

=> ["music"]

u.interests[1] = "travelling"

=> ["travelling"]

u.interests = nil

NoMethodError: undefined method `interests=' for u:User 
```

我只是检查我自己的解释是否正确，如果不正确，请纠正我：

attr_reader 是否没有阻止我分配“@interests”值，因为您没有直接修改实例变量本身（它仍然保存对数组对象的引用），但您只是在对该数组对象引用的值进行操作？

如果这是正确的，是否有一种快速而好的方法来避免 attr_reader 给我对数组值的写访问权限，但让我读取它们？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:09:09.350

关于“不直接修改实例变量”，您所描述的内容是正确的。@interests 没有改变，但是由于它是一个可变对象，调用者可以偷偷溜到你身后。

如果你想禁止编辑 :interests 字段，就`freeze`这样吧。时机很棘手，因为您想在将对象交还给用户之前阻止写入，因此您可能需要在对象创建时执行此操作：

```
def initialize(whatever)
   @foo = bar
   @interests = %w(a b c).freeze
end 
```

如果您的对象想要对@interests 进行更改，请小心。您需要完全重建数组，因为您无法解冻对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T03:19:26.277

编写自己的 getter 代码，并使用 dup 提供原始数组的副本：

```
def interests
  @interests.dup
end 
```

完整代码：

```
class User
  def initialize
    @interests = []
  end

  def interests
    @interests.dup #
  end
end

# Without dup:
u.interests # => []
u.interests << "music"
u.interests # => ["music"]

# With dup:
u.interests # => []
u.interests << "music"
u.interests # => [] 
```

（当然，对于多维数组和类似的分层数据结构，您需要更高级的解决方案）

# php - cannot execute program without using sudo

> ID：15149750
> 
> 赞同：0
> 
> 时间：2013-03-01T02:59:53.097
> 
> 标签：php, c, linux, raspberry-pi

I am having trouble getting a file to execute without typing `sudo` before it. I think the problem is the libraries I used require you to be a superuser.

I am working on a program for the `Raspberry Pi` and so far everything has worked great. The program takes a command line argument and outputs it to a separate 2x16 LCD. So if I type the following command as root or place `sudo` in front of it the program functions as intended:`./serialTest Hello World`.

What I am working on now is getting the value of a text box on a `PHP` webpage and submitting it to the program as a command line argument using the `exec()` function in `PHP` The problem is that I am unable to execute it because unless I am `root` I have tried `exec("sudo ./serialTest" . $textBox);` but it still tells me `Permission Denied`

After further reading into the libraries I am using I cam across instructions on how to execute the `serialOpen` function without using `sudo` or being `root` I have added the user `pi` and `www-data` to the `dialout` group I have verified this with `id pi` `id www-data`. The program still says `Permission denied`. Is there something I could look at further or am I doing something wrong? I have included the excerpt from the page that states how to run it without using `sudo` or being `root`

```
You can use it without sudo if you add yourself into the dialout group. either edit /etc/group, or use the usermod command. (and logout/login again)
-Gordon 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:12:20.370

这取决于服务器服务提供者提供的服务器权限。如果您是服务证明者，则编辑 Shell 访问权限以在 PHP 配置文件中执行 Exec 命令。默认情况下，默认情况下不提供 exec 这就是消息来的原因

如果您不是服务提供商，请联系他们做事..

# javascript - AJAX 搜索在开发/生产中的功能不同

> ID：15149751
> 
> 赞同：0
> 
> 时间：2013-03-01T03:00:13.217
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, heroku

我在我的应用程序中添加了即时搜索功能。

它完全按照我在本地服务器上的要求工作：

*   缩小按键列表
*   不分大小写
*   允许重置（因此，如果我键入内容然后将其删除，则搜索会重置，并且不会变窄）。它也允许回溯，所以如果我输入错误并删除了错误输入的字母，搜索会相应地修复。

在生产中，这种行为是完全奇怪的。虽然它也进行按键搜索，但它有许多奇怪的问题。

*   它区分大小写（与开发不同）——这不是我想要的。
*   关于重置，它的行为很奇怪。如果我输入“instatn”之类的内容然后更正错误，它不会重做搜索。如果我删除整个条目，它也不会重做搜索。然而，奇怪的是，
*   如果我删除搜索词然后键入一个字母，它会重置搜索。
*   它似乎没有正确搜索，期间。如果我输入“z”，尽管我正在搜索的所有项目都不包含“z”，但它们都不会消失。另一方面，如果我输入“Blogging”，列表实际上会缩小到名称中包含该词的两个项目。

知道这里发生了什么吗？为什么两者不同？我该如何解决？让我知道什么样的代码可能有助于解释。

我的代码：

**存档.html.erb**

```
<%= form_tag @post, :method => 'get', :id => "posts_search", class: "search_form squeeze form-inline" do %>
  <p>
    <%= text_field_tag :search, params[:search], 
    placeholder: "Search titles:", id: "search_field" %>
    <%= submit_tag "Search", name: nil, class: "btn squeeze search" %>
  </p>
  <div id="list"><%= render 'search' %></div>
<% end %> 
```

**_search.html.erb**

```
<ul class="blog_links">
<% @posts.first(@link_num).each do |p| %>
    <li class="total_hover">
        <%= p.name %>
    </li>
<% end %>
</ul> 
```

**归档.js.erb**

```
$("#list").html("<%= escape_javascript(render("search")) %>"); 
```

**post_controller.rb**

```
 def archive
    @posts = Post.search(params[:search]).reverse

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
      format.js
    end
  end

 def search
    @posts = Post.search(params[:search]).reverse
    render json: { results: @posts }
 end 
```

**post.rb**

```
 def self.search(search)
    if search
      where('name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end 
```

**javascripts/posts.js.coffee**

```
@search = ->
  $.get $('#posts_search').attr("action"), $("#posts_search").serialize(), null, "script"

$ ->
  $('#posts_search input').keypress -> search()

  $('#posts_search').submit (e) ->
    e.preventDefault()
    search() 
```

**路线.rb**

```
match '/search', to: 'posts#search'
match '/archive', to: 'posts#archive' 
```

**编辑**为了提供一些线索，我在两种环境中执行相同的用户行为并发布博客。我要做的是：

1.  加载包含搜索的页面。
2.  输入“Blgo”
3.  删除“go”并将其替换为“og”
4.  删除所有内容并搜索“Insta”

**开发日志**

```
Started GET "/archive" for 127.0.0.1 at 2013-02-28 23:20:52 -0800
Processing by PostsController#archive as HTML
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" 
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (55.7ms)
  Rendered posts/archive.html.erb within layouts/application (57.0ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.7ms)
Completed 200 OK in 74ms (Views: 72.2ms | ActiveRecord: 0.3ms)

# Cut out bootstrap loading etc for brevity

Started GET "/archive?utf8=%E2%9C%93&search=&_=1362122453454" for 127.0.0.1 at 2013-02-28 23:20:54 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"", "_"=>"1362122453454"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (13.2ms)
  Rendered posts/archive.js.erb (14.7ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 0.3ms)

Started GET "/archive?utf8=%E2%9C%93&search=b&_=1362122453455" for 127.0.0.1 at 2013-02-28 23:20:54 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"b", "_"=>"1362122453455"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%b%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.4ms)
  Rendered posts/archive.js.erb (3.7ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=b&_=1362122453456" for 127.0.0.1 at 2013-02-28 23:20:54 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"b", "_"=>"1362122453456"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%b%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.2ms)
  Rendered posts/archive.js.erb (3.4ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.3ms)

Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122453457" for 127.0.0.1 at 2013-02-28 23:20:54 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122453457"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%bl%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.0ms)
  Rendered posts/archive.js.erb (3.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122453458" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122453458"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%bl%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (1.9ms)
  Rendered posts/archive.js.erb (3.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=blg&_=1362122453459" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blg", "_"=>"1362122453459"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blg%')
  Rendered posts/_search.html.erb (0.0ms)
  Rendered posts/archive.js.erb (1.3ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=blg&_=1362122453460" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blg", "_"=>"1362122453460"}
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE (name LIKE '%blg%')[0m
  Rendered posts/_search.html.erb (0.0ms)
  Rendered posts/archive.js.erb (1.2ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=blgo&_=1362122453461" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blgo", "_"=>"1362122453461"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blgo%')
  Rendered posts/_search.html.erb (0.0ms)
  Rendered posts/archive.js.erb (1.3ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=blg&_=1362122453462" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blg", "_"=>"1362122453462"}
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE (name LIKE '%blg%')[0m
  Rendered posts/_search.html.erb (0.0ms)
  Rendered posts/archive.js.erb (1.2ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122453463" for 127.0.0.1 at 2013-02-28 23:20:55 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122453463"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%bl%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.0ms)
  Rendered posts/archive.js.erb (3.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122453464" for 127.0.0.1 at 2013-02-28 23:20:56 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122453464"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%bl%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.1ms)
  Rendered posts/archive.js.erb (3.4ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=blo&_=1362122453465" for 127.0.0.1 at 2013-02-28 23:20:56 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blo", "_"=>"1362122453465"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blo%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.8ms)
  Rendered posts/archive.js.erb (5.0ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.3ms)

Started GET "/archive?utf8=%E2%9C%93&search=blog&_=1362122453466" for 127.0.0.1 at 2013-02-28 23:20:56 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blog", "_"=>"1362122453466"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blog%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.8ms)
  Rendered posts/archive.js.erb (4.1ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=blog&_=1362122453467" for 127.0.0.1 at 2013-02-28 23:20:56 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blog", "_"=>"1362122453467"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blog%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.0ms)
  Rendered posts/archive.js.erb (3.2ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=blo&_=1362122453468" for 127.0.0.1 at 2013-02-28 23:20:57 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"blo", "_"=>"1362122453468"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%blo%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.1ms)
  Rendered posts/archive.js.erb (3.3ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122453469" for 127.0.0.1 at 2013-02-28 23:20:57 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122453469"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%bl%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (1.9ms)
  Rendered posts/archive.js.erb (3.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=b&_=1362122453470" for 127.0.0.1 at 2013-02-28 23:20:57 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"b", "_"=>"1362122453470"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%b%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.0ms)
  Rendered posts/archive.js.erb (3.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=&_=1362122453471" for 127.0.0.1 at 2013-02-28 23:20:58 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"", "_"=>"1362122453471"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%%')
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (17.9ms)
  Rendered posts/archive.js.erb (19.4ms)
Completed 200 OK in 23ms (Views: 21.2ms | ActiveRecord: 0.4ms)

Started GET "/archive?utf8=%E2%9C%93&search=&_=1362122453472" for 127.0.0.1 at 2013-02-28 23:20:58 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"", "_"=>"1362122453472"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (12.2ms)
  Rendered posts/archive.js.erb (13.7ms)
Completed 200 OK in 17ms (Views: 15.6ms | ActiveRecord: 0.3ms)

Started GET "/archive?utf8=%E2%9C%93&search=I&_=1362122453473" for 127.0.0.1 at 2013-02-28 23:20:58 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"I", "_"=>"1362122453473"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%I%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (4.6ms)
  Rendered posts/archive.js.erb (5.8ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.2ms)

#... You get the picture. I went over character count. (!)

Started GET "/archive?utf8=%E2%9C%93&search=Insta&_=1362122453481" for 127.0.0.1 at 2013-02-28 23:20:59 -0800
Processing by PostsController#archive as JS
  Parameters: {"utf8"=>"✓", "search"=>"Insta", "_"=>"1362122453481"}
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" WHERE (name LIKE '%Insta%')
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered posts/_search.html.erb (2.2ms)
  Rendered posts/archive.js.erb (3.5ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.3ms) 
```

**heroku 日志**

```
013-03-01T07:23:21+00:00 app[web.1]: Started GET "/archive" for 69.181.104.85 at 2013-03-01 07:23:21 +0000
2013-03-01T07:23:21+00:00 heroku[router]: at=info method=GET path=/archive host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=1ms service=43ms status=200 bytes=3343
2013-03-01T07:23:21+00:00 app[web.1]: Processing by PostsController#archive as HTML
2013-03-01T07:23:21+00:00 app[web.1]: Completed 200 OK in 20ms (Views: 5.2ms | ActiveRecord: 13.2ms)
2013-03-01T07:23:21+00:00 app[web.1]:   Rendered posts/_search.html.erb (2.2ms)
2013-03-01T07:23:21+00:00 app[web.1]:   Rendered layouts/_header.html.erb (0.5ms)
2013-03-01T07:23:21+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-03-01T07:23:21+00:00 app[web.1]:   Rendered posts/archive.html.erb within layouts/application (2.8ms)

2013-03-01T07:23:24+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=&_=1362122601827" for 69.181.104.85 at 2013-03-01 07:23:24 +0000
2013-03-01T07:23:24+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/_search.html.erb (2.5ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"", "_"=>"1362122601827"}
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/archive.js.erb (3.0ms)
2013-03-01T07:23:24+00:00 app[web.1]: Completed 200 OK in 12ms (Views: 3.6ms | ActiveRecord: 7.1ms)

2013-03-01T07:23:24+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=b&_=1362122601828" for 69.181.104.85 at 2013-03-01 07:23:24 +0000
2013-03-01T07:23:24+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:24+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"b", "_"=>"1362122601828"}
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/archive.js.erb (0.4ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.0ms)
2013-03-01T07:23:24+00:00 app[web.1]: Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 3.7ms)
2013-03-01T07:23:24+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=b&_=1362122601828 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=53ms status=200 bytes=53
2013-03-01T07:23:24+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=&_=1362122601827 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=198ms status=200 bytes=703

2013-03-01T07:23:24+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122601829" for 69.181.104.85 at 2013-03-01 07:23:24 +0000
2013-03-01T07:23:24+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.0ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122601829"}
2013-03-01T07:23:24+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 2.9ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/archive.js.erb (0.4ms)
2013-03-01T07:23:24+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=bl&_=1362122601829 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=1ms service=89ms status=200 bytes=53
2013-03-01T07:23:24+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=blg&_=1362122601830 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=20ms status=200 bytes=53
2013-03-01T07:23:24+00:00 app[web.1]: Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 2.6ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"blg", "_"=>"1362122601830"}
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/archive.js.erb (0.4ms)
2013-03-01T07:23:24+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.0ms)
2013-03-01T07:23:24+00:00 app[web.1]: Processing by PostsController#archive as JS

2013-03-01T07:23:24+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=blg&_=1362122601830" for 69.181.104.85 at 2013-03-01 07:23:24 +0000

2013-03-01T07:23:27+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=bl&_=1362122601831" for 69.181.104.85 at 2013-03-01 07:23:27 +0000
2013-03-01T07:23:28+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=bl&_=1362122601831 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=26ms status=200 bytes=53
2013-03-01T07:23:28+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"bl", "_"=>"1362122601831"}
2013-03-01T07:23:28+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:28+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.0ms)
2013-03-01T07:23:28+00:00 app[web.1]:   Rendered posts/archive.js.erb (0.3ms)
2013-03-01T07:23:28+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 2.6ms)

2013-03-01T07:23:28+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=blo&_=1362122601832" for 69.181.104.85 at 2013-03-01 07:23:28 +0000
2013-03-01T07:23:28+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:28+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"blo", "_"=>"1362122601832"}
2013-03-01T07:23:28+00:00 app[web.1]: Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 2.6ms)
2013-03-01T07:23:28+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.0ms)
2013-03-01T07:23:28+00:00 app[web.1]:   Rendered posts/archive.js.erb (0.3ms)
2013-03-01T07:23:28+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=blo&_=1362122601832 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=61ms status=200 bytes=53

2013-03-01T07:23:30+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=&_=1362122601833" for 69.181.104.85 at 2013-03-01 07:23:30 +0000
2013-03-01T07:23:30+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:30+00:00 app[web.1]:   Rendered posts/archive.js.erb (2.5ms)
2013-03-01T07:23:30+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"", "_"=>"1362122601833"}
2013-03-01T07:23:30+00:00 app[web.1]: Completed 200 OK in 7ms (Views: 3.0ms | ActiveRecord: 3.3ms)
2013-03-01T07:23:30+00:00 app[web.1]:   Rendered posts/_search.html.erb (2.1ms)
2013-03-01T07:23:30+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=&_=1362122601833 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=1ms service=19ms status=200 bytes=703

2013-03-01T07:23:32+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=I&_=1362122601834" for 69.181.104.85 at 2013-03-01 07:23:32 +0000
2013-03-01T07:23:32+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=I&_=1362122601834 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=20ms status=200 bytes=218
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/archive.js.erb (1.0ms)
2013-03-01T07:23:32+00:00 app[web.1]: Completed 200 OK in 6ms (Views: 2.2ms | ActiveRecord: 2.6ms)
2013-03-01T07:23:32+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"I", "_"=>"1362122601834"}
2013-03-01T07:23:32+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.7ms)

2013-03-01T07:23:32+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=In&_=1362122601835" for 69.181.104.85 at 2013-03-01 07:23:32 +0000
2013-03-01T07:23:32+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"In", "_"=>"1362122601835"}
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.7ms)
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/archive.js.erb (1.1ms)
2013-03-01T07:23:32+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 2.8ms)
2013-03-01T07:23:32+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:32+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=In&_=1362122601835 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=27ms status=200 bytes=218

2013-03-01T07:23:32+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=Ins&_=1362122601836" for 69.181.104.85 at 2013-03-01 07:23:32 +0000
2013-03-01T07:23:32+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:32+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.8ms)
2013-03-01T07:23:32+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"Ins", "_"=>"1362122601836"}
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.7ms)
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/archive.js.erb (1.0ms)

2013-03-01T07:23:32+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=Inst&_=1362122601837" for 69.181.104.85 at 2013-03-01 07:23:32 +0000
2013-03-01T07:23:32+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:32+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"Inst", "_"=>"1362122601837"}
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.8ms)
2013-03-01T07:23:32+00:00 app[web.1]: Completed 200 OK in 6ms (Views: 1.6ms | ActiveRecord: 3.4ms)
2013-03-01T07:23:32+00:00 app[web.1]:   Rendered posts/archive.js.erb (1.1ms)
2013-03-01T07:23:32+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=Inst&_=1362122601837 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=18ms status=200 bytes=218

2013-03-01T07:23:33+00:00 app[web.1]: Started GET "/archive?utf8=%E2%9C%93&search=Insta&_=1362122601838" for 69.181.104.85 at 2013-03-01 07:23:33 +0000
2013-03-01T07:23:33+00:00 app[web.1]: Processing by PostsController#archive as JS
2013-03-01T07:23:33+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "search"=>"Insta", "_"=>"1362122601838"}
2013-03-01T07:23:33+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 2.9ms)
2013-03-01T07:23:33+00:00 app[web.1]:   Rendered posts/archive.js.erb (1.0ms)
2013-03-01T07:23:33+00:00 app[web.1]:   Rendered posts/_search.html.erb (0.7ms)
2013-03-01T07:23:33+00:00 heroku[router]: at=info method=GET path=/archive?utf8=%E2%9C%93&search=Insta&_=1362122601838 host=<my_site>.com fwd="69.181.104.85" dyno=web.1 queue=0 wait=0ms connect=2ms service=15ms status=200 bytes=218 
```

同样，虽然开发搜索工作得很好，而且我认为通常可以预期，但在生产中，上面发生的情况是：列表缩小，直到我在“blg”中输入 g，此时没有更多列表项目。当我删除“go”并输入“og”时，列表没有重新扩展以合并标题中带有“blog”的项目。当我删除搜索框中的所有字母时，它也没有包含所有内容。

搜索仅在我输入“I”时重置，并且因为 Instant 实际上是列表中的一个术语，所以它缩小到名称包含“Insta”的一个项目。

太奇怪了。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:48:04.483

这（析取）最终只是一个数据库问题。

我正在运行 sqlite 开发和 postgresql 生产，两者对我的搜索方法的反应不同。当我将开发切换到 pg 时，搜索在两种环境中都同样失败，因此我决定使用 Thinking Sphinx 而不是自制解决方案。

# c# - Visual Studio 2010 对 .NET 4.5 的支持

> ID：15149752
> 
> 赞同：2
> 
> 时间：2013-03-01T03:00:16.120
> 
> 标签：c#, .net, visual-studio-2010

阅读了网上和 Stack Overflow 上关于此的大量帖子后，我仍然不确定 VS 2010 是否支持 .NET 4.5。MS 在[http://www.microsoft.com/en-in/download/details.aspx?id=30653](http://www.microsoft.com/en-in/download/details.aspx?id=30653)上声明它是就地升级 .NET 4。

这是否意味着一旦在安装了 VS2010 的机器上安装了 .NET 4.5，我仍然可以将目标保留为 .NET 4，但它实际上会使用 4.5？由于各种原因，我无法升级到 VS 2012。

非常感谢所有指针。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T03:04:15.640

您不能使用 VS2010 定位 .NET 4.5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T03:08:55.027

.NET 4.5 不会与 .NET 4.0 并排安装，而是取而代之。但它仍然允许您在安装它的情况下定位 .NET 4.0，因此它不应该破坏安装 AFAIK。但是您不能使用任何 .NET 4.5 功能，因为您无法在 Visual Studio 2010 中定位高于 .NET 4.0 的任何内容。

如果您需要使用这些功能，则必须安装 Visual Studio 2012。

# javascript - 如何使用 for 循环在类中创建对象？

> ID：15149754
> 
> 赞同：0
> 
> 时间：2013-03-01T03:00:18.693
> 
> 标签：javascript

我正在尝试基于数组参数在类中创建属性。你怎么能做到这一点？

请参阅以下内容，以便您了解我正在尝试做的事情：

```
function Person(colors) {  
    this.color = (function () {
        this.color = new Object();
        for (q=0; q<colors.length; ++q) {
            var r;
            switch (q) {
                case 0: r = "favorite"; break;
                case 1: r = "likes"; break;
                case 2: r = "hates"; break;
                default: r = q; break;
            }            
            this.color.r = colors[q];
        }
    }).call(this);
}

var people = {
    george: new Person(["blue", "yellow", "green"]),
    bob: new Person(["green", "purple", "white"])
};

console.log(people.george.color.favorite); 
```

基本上我正在尝试做：

```
this.color = {
    favorite: colors[0],
    likes: colors[1],
    hates: colors[2]
}; 
```

使用 for 循环。有任何想法吗？

顺便说一句，我不确定是否说“this.color = new Object();” this.color 内部实际上是有效的，这只是我尝试过的。你还能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:06:40.927

我不确定您为什么要这样做，这似乎不是一个好主意。

您的代码有什么问题是您没有使用括号表示法。

改变这个：

```
this.color.r = colors[q]; 
```

对此：

```
this.color[r] = colors[q]; 
```

括号表示法的意思是“访问其命名放置在变量 r 中的属性”而不是“访问名为 r 的属性”。

[这是一个工作示例](http://jsfiddle.net/pMeSt/)

我建议您考虑改用 JavaScript 文字对象表示法。您的整个代码可以重构为：

```
var people = {
    george:{
        color:{favorite:"blue",likes:"yellow",hates:"green"}
    },
    bob:{
        color:{favorite:"green",likes:"purple",hates:"white"}
    }
}; 
```

# three.js - Three.js 像素完美在 z=0 平面

> ID：15149755
> 
> 赞同：1
> 
> 时间：2013-03-01T03:00:21.637
> 
> 标签：three.js

有什么方法可以在 Three.js 中配置相机，以便在 z=0 处渲染 2d 对象（线、平面、图像）时，它不会（从透视角度）渗入其他像素。

前任：

```
var plane = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), material);
plane.position.x = 4;
plane.position.y = 3;
scene.add(plane);
...
// Get canvas pixel information
context.readPixels(....); 
```

如果您以 readPixels 中的数据为例，我总是发现像素正在渲染到其周围的像素中（例如：3,3,0 可能包含一些颜色信息），但如果绘制的元素是在 z=0 平面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:11:48.700

渲染哪些像素取决于您的相机所在的位置。例如，如果您的相机 tz=1，则会渲染很多像素。如果您将相机移动到 z=1000，那么您会看到，由于透视，您的几何体可能只会渲染 1 个像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:47:26.410

您可能想使用`THREE.OrthographicCamera`2d 的东西而不是`THREE.PerspectiveCamera`. 这样它们就不会受到透视投影的影响。

# freeradius - 自由半径上的访问拒绝

> ID：15149758
> 
> 赞同：1
> 
> 时间：2013-03-01T03:00:56.320
> 
> 标签：freeradius

我刚刚从 tarbal 安装了 freeradius 1.1.7。实际上我在编译和安装过程中没有任何错误。首先，当我尝试在调试模式下运行时，一切看起来都运行良好

```
stantiated acct_unique (acct_unique) 
Module: Loaded detail 
 detail: detailfile = "/usr/local/var/log/radius/radacct/%{Client-IP-Address}/detail-%Y%m%d"
 detail: detailperm = 384
 detail: dirperm = 493
 detail: locking = no
Module: Instantiated detail (detail) 
Module: Loaded radutmp 
 radutmp: filename = "/usr/local/var/log/radius/radutmp"
 radutmp: username = "%{User-Name}"
 radutmp: case_sensitive = yes
 radutmp: check_with_nas = yes
 radutmp: perm = 384
 radutmp: callerid = yes
Module: Instantiated radutmp (radutmp) 
Listening on authentication *:1812
Listening on accounting *:1813
Ready to process requests. 
```

然后我尝试使用以下命令测试用户，但我收到了来自 freeradius 的拒绝数据包

```
radtest user 1111 127.0.0.1 1812 testing123
Sending Access-Request of id 19 to 127.0.0.1 port 1812
    User-Name = "user"
    User-Password = "1111"
    NAS-IP-Address = 255.255.255.255
    NAS-Port = 1812
rad_recv: Access-Reject packet from host 127.0.0.1:1812, id=19, length=20 
```

在调试模式下，我收到如下消息：

```
rad_recv: Access-Request packet from host 127.0.0.1:50886, id=90, length=56
    User-Name = "user"
    User-Password = "1111"
    NAS-IP-Address = 255.255.255.255
    NAS-Port = 1812
  Processing the authorize section of radiusd.conf
modcall: entering group authorize for request 0
  modcall[authorize]: module "preprocess" returns ok for request 0
  modcall[authorize]: module "chap" returns noop for request 0
  modcall[authorize]: module "mschap" returns noop for request 0
    rlm_realm: No '@' in User-Name = "user", looking up realm NULL
    rlm_realm: No such realm "NULL"
  modcall[authorize]: module "suffix" returns noop for request 0
  rlm_eap: No EAP-Message, not doing EAP
  modcall[authorize]: module "eap" returns noop for request 0
    users: Matched entry DEFAULT at line 153
  modcall[authorize]: module "files" returns ok for request 0
radius_xlat:  'user'
rlm_sql (sql): sql_set_user escaped user --> 'user'
radius_xlat:  'SELECT id, UserName, Attribute, Value, op           FROM radcheck           WHERE Username = 'user'           ORDER BY id'
rlm_sql (sql): Reserving sql socket id: 4
radius_xlat:  'SELECT radgroupcheck.id,radgroupcheck.GroupName,radgroupcheck.Attribute,radgroupcheck.Value,radgroupcheck.op  FROM radgroupcheck,usergroup WHERE usergroup.Username = 'user' AND usergroup.GroupName = radgroupcheck.GroupName ORDER BY radgroupcheck.id'
rlm_sql_mysql: MYSQL check_error: 1146 received
rlm_sql_getvpdata: database query error
radius_xlat:  'SELECT id, UserName, Attribute, Value, op           FROM radreply           WHERE Username = 'user'           ORDER BY id'
radius_xlat:  'SELECT radgroupreply.id,radgroupreply.GroupName,radgroupreply.Attribute,radgroupreply.Value,radgroupreply.op  FROM radgroupreply,usergroup WHERE usergroup.Username = 'user' AND usergroup.GroupName = radgroupreply.GroupName ORDER BY radgroupreply.id'
rlm_sql_mysql: MYSQL check_error: 1146 received
rlm_sql_getvpdata: database query error
rlm_sql (sql): Released sql socket id: 4
  modcall[authorize]: module "sql" returns ok for request 0
rlm_pap: Found existing Auth-Type, not changing it.
  modcall[authorize]: module "pap" returns noop for request 0
modcall: leaving group authorize (returns ok) for request 0
  rad_check_password:  Found Auth-Type System
auth: type "System"
  Processing the authenticate section of radiusd.conf
modcall: entering group authenticate for request 0
  modcall[authenticate]: module "unix" returns notfound for request 0
modcall: leaving group authenticate (returns notfound) for request 0
auth: Failed to validate the user.
Delaying request 0 for 1 seconds
Finished request 0
Going to the next request
--- Walking the entire request list ---
Waking up in 1 seconds...
--- Walking the entire request list ---
Waking up in 1 seconds...
--- Walking the entire request list ---
Sending Access-Reject of id 90 to 127.0.0.1 port 50886
Waking up in 4 seconds...
--- Walking the entire request list ---
Cleaning up request 0 ID 90 with timestamp 5130196a
Nothing to do.  Sleeping until we see a request. 
```

我应该怎么做才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T11:58:52.600

也许你应该检查你的**clients.conf**文件。

我认为您没有在**客户端 localhost{}中提到****127.0.0.1**作为**ipaddr**。

# facebook - 使用graph api查询特定学校的校友

> ID：15149773
> 
> 赞同：3
> 
> 时间：2013-03-01T03:02:37.520
> 
> 标签：facebook, facebook-graph-api

我正在通过以下方式查询作为特定学校（前 sgsits）校友的 facebook 用户列表-

```
https://graph.facebook.com/search?q=sgsits &type=user&access_token=abcd.. 
```

这成功了。

但是我如何修改这个查询来找出在任何特定年份昏倒的人的名单......比如说 1986 年？

我尝试使用

```
 https://graph.facebook.com/search?q=sgsits 1986&type=user&access_token=abcd.. 
```

但这不起作用。

# java - 如何使用数组确定 5 位数字是否是回文？

> ID：15149774
> 
> 赞同：-5
> 
> 时间：2013-03-01T03:02:53.393
> 
> 标签：java

我正在上一门Java课程，并且在这个课程中遇到了困难。我的教授给了我们这个伪代码——创建字符串 sInput

```
//
//    prompt for input
//
//    create char array (cArray) and assign sInput.toCharArray()
//
//    loop to check for palindrome (set i = 0, j = sInput.length()-1, check to see if i != j; increment i, decrement j)
//        check to see if current array values are !=
//            print not a palindrome
//            return
//        end of loop 
```

我无计可施。感谢您的任何建议！

我有

```
public static void main(String[] args) {
while (true) {
display(check(retrieveInput()));
}
}

public static String retrieveInput() {
Scanner scan = new Scanner(System.in);
return scan.next();
}

public static boolean check(String input) {
boolean check = false;
try {
Integer.parseInt(input);
if (input.charAt(0)==input.charAt(4) && input.charAt(1)==input.charAt(3))
check = true;

} catch(Exception e) {
check = false;
}

return check;
}

public static void display(boolean check) {
if(check) System.out.println("Is a five-digit palindrome.");
else System.out.println("Is not a five-digit palindrome."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:29:59.587

希望这可以帮助：

公共静态无效主要（字符串[]参数）{

```
 boolean notPalindrome = false;
    String number = "25852";
    char[] array = number.toCharArray();
    for(int i=0, j=array.length-1; i<j; i++, j--) {
        if(array[i] != array[j]) {
            notPalindrome = true;
            break;
        }
    }
    System.out.println(number + " is palindrome? " + !notPalindrome);
} 
```

# sql - 如何在同一查询中添加两个选择命令的结果

> ID：15149775
> 
> 赞同：41
> 
> 时间：2013-03-01T03:02:53.910
> 
> 标签：sql, sqlite, select

我目前有两个选择命令，如下所示。我想做的是将结果一起添加到 SQL 查询中，而不是代码中的变量。

```
select sum(hours) from resource;
select sum(hours) from projects-time; 
```

是否可以在同一个 SQL 中同时输出两个结果的总和？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-01T03:04:45.223

是的。有可能的`:D`

```
SELECT  SUM(totalHours) totalHours
FROM
        ( 
            select sum(hours) totalHours from resource
            UNION ALL
            select sum(hours) totalHours from projects-time
        ) s 
```

作为旁注，`projects-time`必须对表名进行分隔以避免语法错误。分隔符符号因您使用的 RDBMS 而异。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-01T03:10:05.040

可以使用`select`子句中的子查询来完成类似这样的简单操作：

```
select ((select sum(hours) from resource) +
        (select sum(hours) from projects-time)
       ) as totalHours 
```

对于这样一个简单的查询，这样的子选择是合理的。

在某些数据库中，您可能必须添加`from dual`才能编译查询。

如果要单独输出每个：

```
select (select sum(hours) from resource) as ResourceHours,
       (select sum(hours) from projects-time) as ProjectHours 
```

如果你想要两者*和*总和，子查询很方便：

```
select ResourceHours, ProjectHours, (ResourceHours+ProjecctHours) as TotalHours
from (select (select sum(hours) from resource) as ResourceHours,
             (select sum(hours) from projects-time) as ProjectHours
     ) t 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-01T03:12:37.473

`UNION ALL`一次，聚合一次：

```
SELECT sum(hours) AS total_hours
FROM   (
   SELECT hours FROM resource
   UNION ALL
   SELECT hours FROM "projects-time" -- illegal name without quotes in most RDBMS
   ) x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-18T17:44:12.667

重复多个聚合，例如：

```
SELECT sum(AMOUNT) AS TOTAL_AMOUNT FROM ( 
    SELECT AMOUNT FROM table_1
    UNION ALL 
    SELECT AMOUNT FROM table_2 
    UNION ALL 
    SELECT ASSURED_SUM FROM table_3
) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-25T10:11:49.310

如果要进行多次操作，请使用

```
select (sel1.s1+sel2+s2)

(select sum(hours) s1 from resource) sel1
join 
(select sum(hours) s2 from projects-time)sel2
on sel1.s1=sel2.s2 
```

# joomla - 基于 HelloWorld 的第一个组件创建失败

> ID：15149776
> 
> 赞同：1
> 
> 时间：2013-03-01T03:02:56.600
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla-component

我正在尝试为 Joomla 2.5 创建我的第一个组件，但是在尝试执行时出现此错误：

> 错误：500 您可能无法访问此页面，因为：

*   过时的书签/收藏夹
*   具有此站点过时列表的搜索引擎
*   输入错误的地址
*   您无权访问此页面
*   未找到请求的资源。
*   处理您的请求时发生错误。

> 未找到视图 [名称、类型、前缀]：transportation、html、transportationView

我现在开发的非常基础，这是 site/components/com_transportation/controllers/controller.php 下的控制器

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla controller library
jimport('joomla.application.component.controller');

class TransportationController extends JController {
} 
```

在 site/components/com_transportation/views/view.html.php 下：

```
<?php

// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla view library
jimport('joomla.application.component.view');

class TransportationViewTransportation extends JView {

// Overwriting JView display method
function display($tpl = null) {
    // Assign data to the view
    $this->msg = 'Hello World';

    // Display the view
    parent::display($tpl);
}

} 
```

我错过了什么？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:46:00.303

您的文件夹结构不正确。您的视图文件必须在`site/components/com_transportation/views/transportation/view.html.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:39:20.900

试试这个 ，

当您开始开发新组件时，请深入阅读教程，然后开始修改示例。

按照[这个](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)url 它会帮助你。它适用于 1.5，但对于 2.5 来说是一样的。只有你必须在 xml 中提及版本

```
<install type="component" version="1.5.0"> 
```

此外，您将从[这里](http://joomlacode.org/gf/download/frsrelease/8108/29433/com_hello1_01.zip)下载一个示例组件。

下载它并与您的组件进行比较，然后找到问题。

希望这可能会有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T05:00:45.257

未找到视图 [名称、类型、前缀]：transportation、html、transportationView

意味着没有找到类名为 transporationViewtransporation 和类型为 view.html.php 的视图。view.html.php 文件中的类的名称是什么？第二次运输真的是这样的小写吗？tmpl 文件夹中的布局和 xml 文件的名称是什么？

# python - 对列表值进行排序以获取其索引的新顺序，Python 方式

> ID：15149791
> 
> 赞同：3
> 
> 时间：2013-03-01T03:04:30.713
> 
> 标签：python, sorting

对不起，我的问题标题含糊不清。
我的问题是，我有一个`a = [6, 9, 8, 10, 7, 5, 2, 3, 1, 4]`
需要获取新订单的列表`b = [4, 2, 3, 5, 1, 6, 10, 8, 7, 9]`，其中的第一个元素`b`是，`4`因为 的第四个元素`a` `10`是 a 中的最大数字。同理，中的第二个元素`b`是`2`因为a中的第二个大数是它的第二个数`9`

所以，希望你能得到我的问题：对列表进行排序`a`并获得新的订单`b`。

目前，我通过使用`list.sort`一些准备来完成它。

```
tmp = zip(range(1,11), a)
tmp.sort(key=lambda x:(-x[1],x[0]))
b = [x[0] for x in tmp] 
```

我想知道是否有更好的python方式来实现我的目标？
谢谢大家的建议~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T03:10:31.240

我只会使用参数通过使用's 值`key`进行排序。`range(1, len(a) + 1)``a`

```
sorted(range(1, len(a) + 1), key=lambda i: a[i-1], reverse=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:09:42.113

基本上就是这样，但你可以这样做：

```
import operator
tmp = sorted(enumerate(a,1),key=itemgetter(1,0),reverse=True)
b = [x[0] for x in tmp]

#In python2.x, the following are equivalent to the list comprehension.
#b = zip(*tmp)[0]
#b = map(itemgetter(0),tmp) 
```

我认为这`enumerate`比`zip`with更干净`range`，`itemgetter`比`lambda`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:11:08.980

你可以使用`sorted`and `enumerate`：

```
print [el[0] for el in sorted(enumerate(a, start=1), key=lambda L: L[1], reverse=True)]
# [4, 2, 3, 5, 1, 6, 10, 8, 7, 9] 
```

为了完整起见，使用替代方法`numpy`（如果您在不久的将来碰巧使用它）：

```
np.argsort(a)[::-1] + 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T06:39:57.610

```
a = [6, 9, 8, 10, 7, 5, 2, 3, 1, 4]
b = [6, 9, 8, 10, 7, 5, 2, 3, 1, 4] 

a.sort(reverse = True)
print(a)
print(b)
c = [b.index(y)+1 for y in a ]
print(c) 
```

我刚刚得到这个愚蠢的答案......

# oracle - 在 1 个表中选取不同的值

> ID：15149794
> 
> 赞同：0
> 
> 时间：2013-03-01T03:04:46.050
> 
> 标签：oracle, coldfusion

这是我的数据库表的示例：

id——笔颜色——笔类型——笔价格——购买日期

1 -- 红色 -- A 型 -- 10.00 -- 10/02/2013

1 -- 白色 -- B 型 -- 21.00 -- 13/02/2013

2 -- 蓝色 -- A 型 -- 12.00 -- 09/02/2013

1 -- 黄色 -- C 型 -- 14.00 -- 23/02/2013

我想要的输出是：

如果我希望它按相同的 ID 分组呢？

id -- 价格 A -- 价格 A + B -- 价格 B -- 价格 C

1 -- 10.00 -- 31.00 -- 21.00 -- 14.00

2 -- 12.00 -- 0 -- 0 -- 0

我在执行此操作时遇到严重问题。我认为这可能很简单，但我只是没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:09:26.113

假设每个日期只有一个 id 和类型，这应该有效：

```
<cfquery name='b'>
SELECT ID
    , AVG( DECODE( Pen_Type, 'Type A', Pen_Price, 0 ) ) AS Price_A
    , AVG( DECODE( Pen_Type, 'Type B', Pen_Price, 0 ) ) AS Price_B
    , AVG( DECODE( Pen_Type, 'Type C', Pen_Price, 0 ) ) AS Price_C
FROM Pen_Table
WHERE Date_Purchase = #Date#
GROUP BY ID
</cfquery> 
```

请注意，AVG 的聚合函数可以是任何聚合函数，其唯一目的是使其每个 id 排在第一行。这再次仅在假设您每个日期每个 id 只有一种笔类型的情况下才有效。如果您有更多行，那么这将不起作用。鉴于您提供的信息，我相信这会奏效。与尝试在查询中计算相比，您可以在输出中轻松计算 A+B。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:42:01.080

虽然您的确切需求仍不清楚，但 cfoutput 的 group 属性可能会让您走上正确的道路。在你的情况下，尝试这样的事情。

```
 <cfquery name="yourquery">
 select blah, blah
 order by id
 </cfquery> 
```

id 的顺序很重要。它导致

```
<cfoutput query="yourquery" group ="id">
#grouped data#
<cfoutput>
#ungrouped data#
</cfoutput>
#more grouped data if you want#
</cfoutput> 
```

这是一般的想法。您应该能够使其适应您的特定要求。

# jquery-mobile - Jquery Mobile 弹出窗口自行触发

> ID：15149795
> 
> 赞同：0
> 
> 时间：2013-03-01T03:04:59.787
> 
> 标签：jquery-mobile

我在 index.html 上设置了一个弹出窗口，如下所示：

```
<!-- Choice Popup -->
<div class="ui-popup-screen ui-overlay-a ui-screen-hidden" id="popupDialog-screen"></div>
<div data-role="popup" class="ui-popup-container ui-overlay-a" data-transition="pop" id="choicePopup">
    <div data-role="popup" id="choicePopup" data-overlay-theme="b" data-theme="c" data-dismissible="false" class="ui-corner-all ui-popup ui-body-c ui-overlay-shadow" aria-disabled="false" data-disabled="false" data-shadow="true" data-corners="true" data-transition="slidedown" data-position-to="window" data-arrow="true" data-arrow-sides="t,b,l,r">
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content ui-body-d" role="main">
             <h1 class="ui-title" role="heading" aria-level="1">Your decision has been made:</h1>

             <h2 align="center" id="choice-p"></h2>
               <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-btn-inline">
                    <span class="ui-btn-inner">
                        <span class="ui-btn-text">Thanks</span>
                    </span>
               </a>
               <a href="#" onclick="eatsome('Food'); return false;" data-role="button" data-inline="true" data-transition="flow" data-theme="b" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-btn-up-b ui-shadow ui-btn-corner-all ui-btn-inline">
                    <span class="ui-btn-inner">
                        <span class="ui-btn-text">Again!</span>
                    </span>
               </a>
        </div>
    </div> 
```

问题是，我不知道为什么它在加载时启动，某些属性会触发它，任何人都可以找到问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:18:00.783

您的标记和代码存在几个问题：

**首先，**弹出窗口的标记看起来已经经过 jQM 增强，就像从浏览器的开发人员视图中复制一样。因此，首先使其正常。它可能看起来像

```
<div data-role="popup" id="choicePopup" data-overlay-theme="b" data-theme="c" data-dismissible="false" class="ui-corner-all">
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1></h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
        <h3 class="ui-title">Your decision has been made:</h3>
        <a id="btnThanks" href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Thanks</a>
        <a id="btnAgain" href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Again!</a>
    </div>
</div> 
```

**其次**，弹出标记应与打开它**[的链接位于同一页面内。](http://view.jquerymobile.com/1.3.0/docs/widgets/popup/)**

```
<div data-role="page" id="main">
    ...
    <div data-role="popup" id="choicePopup">
        ...
    </div>
</div> 
```

**第三**，使用适当的[jQM 事件](http://api.jquerymobile.com/pageinit/)来放置操作内容的代码。

**Forth** Stop using和jQM 的`onclick`其他事件属性。`on*`再次使用正确的 jQM 或 jQuery 事件。所以而不是

```
<a href="#" onclick="eatsome('Food'); return false;" ... >Again!</a> 
```

采用

```
<a id="#btnAgain" href="#" ... >Again!</a> 
```

```
$("#btnAgain").click(function(){
    eatsome('Food'); 
    return false;
}); 
```

**第五**注入 html 后，您需要调用`trigger('create')`父元素以让 jQM 增强和设置您注入的标记的样式。

```
var content = '<form>;
...
content += '</form>;
$("div.settings-content").html(content).trigger("create"); 
```

**这是**基于您的标记的工作**[jsFiddle 。](http://jsfiddle.net/pmatseykanets/TyHGk/)**如您所见，弹出窗口不会自行弹出。有两个按钮显示如何以声明方式和编程方式打开弹出窗口。并且设置页面的内容被正确注入和样式化。

# javascript - 如何在 Yii 页面上使用带有 CHtml button() 的 JavaScript

> ID：15149796
> 
> 赞同：0
> 
> 时间：2013-03-01T03:05:12.400
> 
> 标签：javascript, php, forms, yii, renderpartial

我正在尝试在我的页面中使用 JavaScript。我的 JavaScript 代码是：

```
function edit(){
  alert("test"); 
  return document.getElementById("confirm").value="";
} 
```

按`onclick`功能调用它

```
<?php echo CHtml::button("Edit",array('title'=>"Edit",'onclick'=>'js:edit();')); ?> 
```

在同一页面和confirmation.php中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:33:54.477

```
Yii::app()->clientScript->registerScript('register_script_name', "
    $('#editButton').click(function(){
       alert('edit');
       return false;
    });
", CClientScript::POS_READY);

<?php echo CHtml::button("Edit",array('title'=>"Edit",'id'=>"editButton")); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:17:07.600

为您的按钮设置 ID：

```
<?php echo CHtml::button("Edit",array('title'=>"Edit",'id'=>'myButton')); ?> 
```

JS：

```
window.onload = function() {
    document.getElementById("myButton").onclick = function() {
        alert("test");
        document.getElementById("confirm").value = "";
        return false;
    }
} 
```

或者您可以`js:`从代码中删除该部分：

```
<?php echo CHtml::button("Edit",array('title'=>"Edit",'onclick'=>'edit()')); ?> 
```

# ruby-on-rails - If 语句和/或破坏服务器

> ID：15149797
> 
> 赞同：0
> 
> 时间：2013-03-01T03:05:43.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个使用模型创建嵌套属性的 after_create 语句。我正在过滤一周中的布尔字段，但 if 语句正在冻结服务器（没有错误）。

我在下面包含了相关代码。为了澄清，星期日到星期六是数据库中的布尔字段。如果我删除过滤布尔字段的所有“和”子句，表单完成，但我需要过滤掉未选择工作日的日期。

```
def new_visit  
  day = 0
  dates = (visit_date_start .. visit_date_end).count + 1
  while day <= dates
    date = visit_date_start + day
    day_of_week = date.strftime("%A").downcase
    if (day_of_week == 'sunday' and sunday == true) or (day_of_week == 'monday' and monday == true) or (day_of_week == 'tuesday' and tuesday == true) or (day_of_week == 'wednesday' and wednesday == true) or (day_of_week == 'thursday' and thursday == true) or (day_of_week == 'friday' and friday == true) or (day_of_week == 'saturday' and saturday == true)
      visits.create(:visit_price => visit_price, :visit_type => visit_type, :client_id => client_id, :visit_date => date)
      day += 1
    end
  end
end 
```

**更新**

我查看了日志，偶尔，服务器会抛出如下错误。我相信这是一个 sqlite 锁定错误。对此还有更多见解吗？

```
BusyException: cannot rollback transaction - SQL statements in progress: rollback transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:17:23.803

解决方案是我需要添加一个“else”子句，否则该方法会等待下一步做什么。结果方法是：

```
def new_visit  
  day = 0
  dates = (visit_date_start .. visit_date_end).count + 1
  while day <= dates
    date = visit_date_start + day
    day_of_week = date.strftime("%A").downcase
    if sunday == true
    #if (day_of_week == 'sunday') or (day_of_week == 'monday') or (day_of_week == 'tuesday') or (day_of_week == 'wednesday') or (day_of_week == 'thursday') or (day_of_week == 'friday') or (day_of_week == 'saturday')
    #if ((day_of_week == 'sunday') and (sunday == true)) or ((day_of_week == 'monday') and (monday == true)) or ((day_of_week == 'tuesday') and (tuesday == true)) or ((day_of_week == 'wednesday') and (wednesday == true)) or ((day_of_week == 'thursday') and (thursday == true)) or ((day_of_week == 'friday') and (friday == true)) or ((day_of_week == 'saturday') and (saturday == true))
      visits.create(:visit_price => visit_price, :visit_type => visit_type, :client_id => client_id, :visit_date => date)
      day += 1
    else
      day += 1
    end
  end
end 
```

# android - 将两个 apk 捆绑到一个 apk 中？

> ID：15149805
> 
> 赞同：5
> 
> 时间：2013-03-01T03:06:43.057
> 
> 标签：android, apk

我有两个已完成的项目，一个用于显示书籍列表，另一个是用于阅读书籍的查看器应用程序。但由于用户必须下载书单应用程序，下载后他必须下载查看器应用程序，我想让它在开始时下载并安装。当我尝试在书单应用程序中包含查看器应用程序时，两者都安装了，但是当我制作 apk 然后使用 apk 时，只安装了书单应用程序。谁能告诉我是什么问题？有没有办法将两个 apk 捆绑在一起？或者我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T04:01:43.970

您可以将它们组合成一个项目。

创建一个具有基本包名称的包名称的项目。例如，如果您当前的应用程序是`com.package.booklist`并`com.package.bookreader`使用 package 创建一个项目`com.package`。现在将书籍列表中的所有代码复制到`com.package.booklist`子包中，并将书籍阅读器中的所有代码复制到`com.package.bookreader`.

现在您需要结合 AndroidManifests。您可以将所有等元素复制`<activity>`到新项目的清单中。现在，您需要为阅读器中的所有类添加前缀`.bookreader`，在书单中添加前缀`.booklist`。因此，您将拥有一个类似于以下内容的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.package"
    android:versionCode="1"
    android:versionName="1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity android:name=".booklist.BookListActivity" >
            <intent-filter>
                <category android:name="android.intent.category.LAUNCHER" >
                </category>

                <action android:name="android.intent.action.MAIN" >
                </action>
            </intent-filter>
        </activity>

        <activity android:name=".bookreader.BookReaderActivity" >
            <intent-filter>
                <category android:name="android.intent.category.LAUNCHER" >
                </category>

                <action android:name="android.intent.action.MAIN" >
                </action>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

去除：

```
 <intent-filter>
                <category android:name="android.intent.category.LAUNCHER" >
                </category>

                <action android:name="android.intent.action.MAIN" >
                </action>
            </intent-filter> 
```

来自您不希望在启动器中的 Activity 的意图过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:00:34.190

一个 APK 中不能有两个 APK。

但是，您可以在清单中拥有两个处理意图 android.intent.category.LAUNCHER 的活动。然后它们都将出现在启动器中。

有关更多详细信息，请参阅此[帖子](https://stackoverflow.com/questions/8927315/two-launcher-activities)。

# c - C - 如何搜索文件并覆盖其中的一部分

> ID：15149806
> 
> 赞同：2
> 
> 时间：2013-03-01T03:06:50.510
> 
> 标签：c, fopen

我正在开发一个程序，该程序在文件中搜索文件中写入文件时结构中的特定字符串。如果我在该文件中找到匹配项，我需要覆盖该结构的一部分。搜索匹配的文件非常容易，但我正在努力覆盖该结构。下面是我搜索文件并*尝试*覆盖该数据的代码。

```
dfp = fopen(archName, "ab");
    if(dfp == NULL) {
        printf("An error has occurred... %s could not be opened.\n", archName);
        return 0;
    } /* End if */

    /* Read first header file */
    fread(&getHeader, sizeof(getHeader), 1, dfp);

/* Check for match */
    if(strcmp(fName[0], getHeader.file_name) == 0) {
        getHeader.deleted = (char)49;
        fwrite(&getHeader, sizeof(getHeader), 1, dfp); 
```

请注意，getHeader 是一个结构。有多个结构可以存储在我的文件中的任何位置。我需要在每个标题中搜索特定的字符串（简单）。找到匹配项时，必须覆盖该结构。

为了完成这样的任务，会推荐什么样的流程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T03:11:39.163

您可以编写一个循环将记录读入一个记录结构，一次一个。每次读取后，您可以将刚刚读取的记录与所需记录进行比较，如果不是您需要的记录，则读取下一条记录。

您刚刚找到了您想要的记录，但您也只是阅读了记录之外的内容；您必须返回以覆盖记录。您还必须每次都在读取和写入之间寻找，反之亦然，因为 C 标准说如果您不这样做，行为是未定义的。这意味着在写入之前进行一次查找，然后在返回下一条记录之前进行一次查找。

由于您已在`"ab"`模式下打开文件，因此任何搜索都无关紧要，因为所有写入都将附加在末尾。您可能希望`"r+b"`作为`fopen()`.

为最近对相同一般问题的讨论编写值时，请参阅[`fseek()`文件末尾。](https://stackoverflow.com/questions/15095212/fseek-go-back-to-the-end-of-file-when-writing-a-value/15095272#15095272)

# android - 如何仅通过部分号码搜索联系人

> ID：15149807
> 
> 赞同：0
> 
> 时间：2013-03-01T03:06:52.420
> 
> 标签：android, phone-number

我正在开发一个android应用程序，一个问题让我很困惑，我想实现一个功能，比如通过部分号码搜索联系人，比如联系人A的号码为1234567，我希望用户只需输入123或345等然后相关联系人会列出来；但是当我研究android的数据库结构时，似乎很难实现，唯一的相关数据只是表数据中的DATA1和DATA4，DATA1就是用户输入的时候他添加了联系人；但它会有一些格式，例如 123-456 (123)456 或 123 456 等。DATA4 是标准化数字，但有时会包含国家代码部分，例如 +1 等。有时是正序，有时是反序，比如+1123456或者6543211+，所以我觉得很难实现，谁能帮帮我！先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:42:46.470

**第一种方法**——

将用户输入值（例如 345）传递给函数

```
public String getPreparedInput(String input) {

    if(input==null || input.trim().length()==0) return "";

    StringBuilder sb = new StringBuilder("%");
    char[] chars = input.trim().toCharArray();
    for(char ch : chars) {
        sb.append(ch);
        sb.append("%");
    }
    return sb.toString();
} 
```

接下来，在内容解析器的 where 子句中使用函数的输出（即 %3%4%5%）

`String where = "phone_number like '" + getPreparedInput(input) + "'";`

**第二种方法**-

在 where 子句中对字符串使用 SQLite replace() 函数

`String where = "replace(replace(replace(replace(replace(phone_number,'+',''),'-',''),'(',''),')',''),' ','') like '%" + input + " %'";`

# c1-cms - Composite C1 无法使用新闻模块本地化新闻文章

> ID：15149810
> 
> 赞同：2
> 
> 时间：2013-03-01T03:07:02.247
> 
> 标签：c1-cms

我是 Composite C1 的新手，刚刚开始研究这个基于 ASP.NET 的强大 CMS。

如何在 Composite C1 中创建本地化新闻模块？在 C1 控制面板中添加新语言允许我本地化所有页面，但奇怪的是，我似乎没有选择本地化新闻文章（来自 Composite A/S 的 Composite.News 模块）本身。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:46:15.717

标准的新闻模块非常基础。要扩展它，请转到后端的*数据*透视图并查找**NewsItem**数据类型。您应该在“页面数据文件夹”下找到它。

您可以在此处为新闻添加其他属性或更改数据类型的设置。

您正在寻找的是**启用**NewsItem 数据类型的本地化。在这篇简短的文章中阅读如何做到这一点：

[本地化数据类型](http://docs.composite.net/Data/Customizing-Datatypes/Localizing-Data-Types#_Localizing_Datatypes_1)

您想要的部分名为“本地化现有数据类型”。

启用本地化后，您可以像普通页面一样翻译新闻项目。

# c# - 如何等待异步方法完成？

> ID：15149811
> 
> 赞同：166
> 
> 时间：2013-03-01T03:07:07.153
> 
> 标签：c#, asynchronous, async-await

我正在编写一个将数据传输到 USB HID 类设备的 WinForms 应用程序。我的应用程序使用优秀的 Generic HID 库 v6.0，可以在[此处](http://janaxelson.com/hidpage.htm#MyExampleCode)找到。简而言之，当我需要向设备写入数据时，这是被调用的代码：

```
private async void RequestToSendOutputReport(List<byte[]> byteArrays)
{
    foreach (byte[] b in byteArrays)
    {
        while (condition)
        {
            // we'll typically execute this code many times until the condition is no longer met
            Task t = SendOutputReportViaInterruptTransfer();
            await t;
        }

        // read some data from device; we need to wait for this to return
        RequestToGetInputReport();
    }
} 
```

当我的代码退出 while 循环时，我需要从设备中读取一些数据。但是，设备无法立即响应，因此我需要等待此呼叫返回，然后才能继续。由于它当前存在，RequestToGetInputReport() 声明如下：

```
private async void RequestToGetInputReport()
{
    // lots of code prior to this
    int bytesRead = await GetInputReportViaInterruptTransfer();
} 
```

对于它的价值，GetInputReportViaInterruptTransfer() 的声明如下所示：

```
internal async Task<int> GetInputReportViaInterruptTransfer() 
```

不幸的是，我对 .NET 4.5 中新的 async/await 技术的工作原理不是很熟悉。我之前读过一些关于 await 关键字的文章，这给我的印象是在 RequestToGetInputReport() 中调用 GetInputReportViaInterruptTransfer() 会等待（也许确实如此？），但它看起来不像对 RequestToGetInputReport() 的调用本身正在等待，因为我似乎几乎立即重新进入 while 循环？

谁能澄清我看到的行为？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-03-01T05:53:52.967

*最重要的是*要了解`async`并且`await`不等待相关调用完成。如果*操作已经完成*，则立即同步地返回操作结果，或者如果尚未完成，则安排继续执行该方法的其余部分，然后将控制权返回给调用者。异步操作完成后，将执行计划的完成。`await` *`await`*`async`**

 **问题标题中特定问题的答案是通过调用适当的方法来阻止`async`方法的返回值（应该是`Task`or类型） ：`Task<T>``Wait`

```
public static async Task<Foo> GetFooAsync()
{
    // Start asynchronous operation(s) and return associated task.
    ...
}

public static Foo CallGetFooAsyncAndWaitOnResult()
{
    var task = GetFooAsync();
    task.Wait(); // Blocks current thread until GetFooAsync task completes
                 // For pedagogical use only: in general, don't do this!
    var result = task.Result;
    return result;
} 
```

在此代码片段中，`CallGetFooAsyncAndWaitOnResult`是异步方法的*同步*包装器`GetFooAsync`。但是，这种模式在很大程度上要避免，因为它会在异步操作期间阻塞整个线程池线程。这是对 API 所公开的各种异步机制的低效使用，这些机制需要付出很大的努力来提供它们。

“等待”的答案[不等待呼叫完成](https://stackoverflow.com/questions/12235967/await-doesnt-wait-for-the-completion-of-call)对这些关键字有几个更详细的解释。

同时，@Stephen Cleary 对`async void`持有的指导。其他很好的解释为什么可以在[http://www.toncodes.net/blog/why-you-should-almost-never-write-void-asynchronous-methods/](http://www.tonicodes.net/blog/why-you-should-almost-never-write-void-asynchronous-methods/)和[https://jaylee.org/archive/ 2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html](https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html)

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-03-01T03:10:27.980

避免`async void`。让您的方法返回[`Task`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.110).aspx)而不是`void`. 然后你可以[`await`](https://msdn.microsoft.com/en-GB/library/hh156528.aspx)他们。

像这样：

```
private async Task RequestToSendOutputReport(List<byte[]> byteArrays)
{
    foreach (byte[] b in byteArrays)
    {
        while (condition)
        {
            // we'll typically execute this code many times until the condition is no longer met
            Task t = SendOutputReportViaInterruptTransfer();
            await t;
        }

        // read some data from device; we need to wait for this to return
        await RequestToGetInputReport();
    }
}

private async Task RequestToGetInputReport()
{
    // lots of code prior to this
    int bytesRead = await GetInputReportViaInterruptTransfer();
} 
```

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2017-06-16T00:14:29.770

等待 AsynMethod 直到完成任务的最佳解决方案是

```
var result = Task.Run(async() => await yourAsyncMethod()).Result; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-14T08:07:31.660

只需放置 Wait() 等待任务完成

`GetInputReportViaInterruptTransfer().Wait();`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-02-01T00:51:44.120

以上所有答案都是正确的，您永远不应该同步等待任务......除非您必须这样做！有时您想在您无法控制的接口实现中调用异步方法，并且没有办法“一直异步”。

这是一个至少包含损坏的小类：

```
public class RunSynchronous
{
    public static void Do(Func<Task> func) => Task.Run(func).GetAwaiter().GetResult();
    public static T Do<T>(Func<Task<T>> func) => Task.Run(func).GetAwaiter().GetResult();
    public static void Do(Func<ValueTask> func) => Do(() => func().AsTask());
    public static T Do<T>(Func<ValueTask<T>> func) => Do(() => func().AsTask());
} 
```

此类使用 .GetAwaiter.GetResult 模式将异步实际转换为同步。但是，如果您在 WPF 或绑定到特定线程的另一个 SynchronizationContext 中自行执行此操作，则会出现死锁。此代码通过将异步操作转移到未与特定线程同步的线程池来避免死锁。只要您不发疯并阻止所有线程池线程，您就应该没问题。

用法是这样的

```
 return RunSynchronous.Do(()=>AsyncOperation(a,b,c)); 
```

将在线程池上启动 AsynchronousOperation(a,b,c) 并​​等待它返回。只要您没有明确地同步回原始线程，您就应该没问题。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2016-03-08T21:45:50.607

以下代码段显示了一种确保等待的方法在返回给调用者之前完成的方法。但是，我不会说这是一个好习惯。如果您不这么认为，请用解释编辑我的答案。

```
public async Task AnAsyncMethodThatCompletes()
{
    await SomeAsyncMethod();
    DoSomeMoreStuff();
    await Task.Factory.StartNew(() => { }); // <-- This line here, at the end
}

await AnAsyncMethodThatCompletes();
Console.WriteLine("AnAsyncMethodThatCompletes() completed.") 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2019-02-10T21:14:15.100

实际上，我发现这对返回 IAsyncAction 的函数更有帮助。

```
 var task = asyncFunction();
            while (task.Status == AsyncStatus.Completed) ; 
```**

# python - 如何始终使用日志记录模块跟踪某些特定事件？（Python）

> ID：15149813
> 
> 赞同：1
> 
> 时间：2013-03-01T03:07:09.663
> 
> 标签：python, logging

这个[（howto）](http://docs.python.org/2/howto/logging.html) 页面显示了事件函数的级别或严重性，用于跟踪日志模块。现在我想总是跟踪一些事件。是的，我可以将级别设置为关键，但它不是那样使用的。严重错误时使用，表示程序本身可能无法继续运行。一个例子会让你更容易理解我想要什么：

将级别设置为 INFO

```
self.logger = logging.getLogger(logName)
self.logger.setLevel(logging.INFO)
.... 
```

输出：

```
INFO: Instance 3 (I want this line always on display)
INFO: parameter a is in range
INFO: parameter b is in range
INFO: parameter c is in range
WARNING: VALUE ERROR 
```

我只想跟踪警告事件，所以我将级别设置为警告：

```
self.logger = logging.getLogger(logName)
self.logger.setLevel(logging.WARNING) 
```

输出：

```
WARNING: VALUE ERROR 
```

我确实跟踪了错误事件，但我错过了 Instance 事件。因此，我不知道错误发生在哪个实例下。

我不想将 Instance 事件的级别设置为 CRITICAL，尽管它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:02:20.880

您需要创建另一个记录器对象来记录所需的事件，并将其级别设置为 INFO。所以你最终得到了 self.logger 和 self.special_event_logger。

# asp.net - 将sql语句转换为linq；

> ID：15149817
> 
> 赞同：-3
> 
> 时间：2013-03-01T03:07:30.407
> 
> 标签：asp.net, asp.net-mvc-3, linq

我正在编写一个 ASP.NET MVC 3 应用程序。我用实体框架和 linq 编写，但我对 linq 语句有疑问

1.  如果你有：

    ```
    select a, (select d from tabled where id = '12 ') as c from tableA inner join TableB on tablea.id = tableb.id 
    ```

    然后切换到linq how（使用控制器并分配ViewBag.str = ...）（视图如何，可以显示a和c）

2.  如果他的陈述是，例如：`Product product = db.Product.Find (id)` 那么你如何确定产品是否为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:52:22.997

var a= from p in tableA join q in tableB on p.id 等于 q.id select new {pa, from r in tabled where r.id == 12 select rd}.ToList();

这是该语句的 LINQ 查询。还

您可以使用

```
Product product = db.Product.Find (id);
if (product == null) return "Emplty"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:12:24.497

您必须遵循以下步骤；1）在模型中创建返回值类：

```
public class ClassResult
{
    public int a1 { get; set; }
    public int b1 { get; set; }
} 
```

然后在控制器上

编写查询如下：

```
 public ActionResult Index()
    {
        List<TableAClass> ListA = new List<TableAClass>();
        List<TableBClass> ListB = new List<TableBClass>();
        List<TableCClass> ListC = new List<TableCClass>();

        List<ClassResult> res = new List<ClassResult>();

        res = (from p1 in ListA join p2 in ListB on p1.a1 equals p2.b1 select new ClassResult { a1=p1.a1 ,b1=p2.b1 }).ToList();

        return View(res);
    } 
```

3) 在视图上，

```
 <%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<MvcApplication1.Models.ClassResult>" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Index1</title>
</head>
<body>
    <fieldset>
        <legend>Fields</legend>

        <div class="display-label">a1</div>
        <div class="display-field"><%: Model.a1 %></div>

        <div class="display-label">b1</div>
        <div class="display-field"><%: Model.b1 %></div>

    </fieldset>

</body>
</html> 
```

# java - 构造函数 ... 不适用（实际参数列表和形式参数列表的长度不同） - 但它确实匹配

> ID：15149822
> 
> 赞同：2
> 
> 时间：2013-03-01T03:08:28.087
> 
> 标签：java, constructor, arguments, argument-passing

所以我正在用java为学校做作业......这是一种类层次结构的作业，我们应该制作一个“Triangle.java”类，它扩展了一个“ClosedShape.java”类，它扩展了一个“Shape.java” ” .... ClosedShape 和 Shape 都是给我们的，所以很可能它们没有问题（无论如何我都会发布它们），但我的 Triangle 类如下：

```
 public abstract class Triangle extends ClosedShape{

        public Triangle(int[] a, int[] b, int base, int height){
            super(true, 3, a, b);
            setWidth(base);
            setHeight(height);
            setXYCoords(a, b);
        }

         public Triangle(int x, int y, int base, int height){
            int[] a = new int[3];
            int[] b = new int[3];

            a[0] = x;
            a[1] = (x+base)/2;
            a[2] = (x+base);

            b[0] = y;
            b[1] = (y+height)/2;
            b[2] = (y+height);
         }

} 
```

我有两个构造函数的原因是因为我需要创建这两个数组来保存绘制形状的点......然后我需要将它们传递给 ClosedShape(boolean, int, int[], int[])超级类...如果我在同一个构造函数中创建数组，则需要在调用 super() 之前定义它们，以便可以传入它们，但这是不允许的，因为必须首先调用 super()。 .so 目前，当我尝试编译 Triangle.java 时出现错误：

```
Triangle.java.14: error: no suitable constructor found for ClosedShape()
  { //little arrow pointing under the '{'

constructor ClosedShape.ClosedShape(boolean, int, int[], int[]) is not applicable
    (actual and formal argument lists differ in length)      
    constructor ClosedShape.ClosedShape(boolean, int) is not applicable
    (actual and formal argument lists differ in length)
1 error 
```

它还在分配中指定三角形的签名**必须**是 Traingle(int x, int y, int base, int height)...所以....我很困惑，因为如果我没记错的话（哪个 java相信我......）我用所有正确的值进行了超级调用，并且有*一个*构造函数“ClosedShape（boolean，int，int []，int []）”......继承了ClosedShape类：

```
 import java.awt.Graphics;

public abstract class ClosedShape extends Shape {
    boolean polygon;
    int numPoints;
    int[] xVertices;
    int[] yVertices;
    int x,y,width, height;

    public ClosedShape(boolean isPolygon, int numPoints) {
        super(0,0);
        this.polygon = isPolygon;
        this.numPoints = numPoints;
    }

    public ClosedShape(boolean isPolygon, int numPoints, int[] x, int[] y) {
        super(x[0],y[0]);
        this.polygon = isPolygon;
        if (isPolygon) {
            this.numPoints = numPoints;
            xVertices = new int[numPoints]; // error check?  if x.length == numPoints
            //for (int i = 0; i < x.length; i++) { // make copy of array: why?
            //  xVertices[i] = x[i];
            //}
            yVertices = new int[numPoints]; // error check?  if y.length == numPoints
            for (int i = 0; i < y.length; i++) { // make copy of array
                    yVertices[i] = y[i];
            }
        }
        else { // its an oval - define bounding box
            this.numPoints = 4;
            this.x = x[0];
            this.y = y[0];
            width = x[1];
            height = y[1];
        }
    }

    public void setXYCoords(int[] x, int[] y){
        this.xVertices = x;
        this.yVertices = y;
    }

    // Gives access to the width attribute
    public void setWidth(int width){
        this.width = width;
    }

    // Gives access to the height attribute
    public void setHeight(int height) {
        this.height = height;
    }

    public void draw(Graphics g) {
        if (polygon) {
            g.drawPolygon(xVertices, yVertices, numPoints);
        }
        else {
            g.drawOval(x, y, width, height);
        }

    }

    public abstract double Area();
    public abstract double Perimeter();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:13:08.540

问题是没有默认的、无参数的构造函数`ClosedShape`。

看看这个ctor：

```
 public Triangle(int x, int y, int base, int height){ 
```

没有显式调用`super()`构造函数，因此编译器假定它需要调用无参数构造函数。但是没有一个...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:15:03.300

我终于弄明白了。我正在调用一个我什至不需要使用的构造函数！我只需要调用第一个构造函数，然后使用`setXYCoords()`方法来做我需要对数组做的事情......这是我的最终代码：

（ClosedShape.java 保持不变）

```
import java.awt.Graphics;

public class Triangle extends ClosedShape{

    public Triangle(int x, int y, int base, int height){
        super(true, 3);

        setWidth(base);
        setHeight(height);

        int [] arrayX = new int[3];
        arrayX[0] = x;
        arrayX[1] = (x+(width/2));
        arrayX[2] = (x+width);

        int [] arrayY = new int[3];
        arrayY[0] = y;
        arrayY[1] = (y-height);
        arrayY[2] = y;

        setXYCoords(arrayX, arrayY);

    }

    public double Area(){
                return 0;
    }

    public double Perimeter(){
        return 0;
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T03:18:38.293

正如@duffymo 所说，如果您没有显式调用`super()`，编译器将插入对无参数构造函数的调用。

我认为您正在寻找的解决方案是工厂方法。例如，您可以创建一个静态方法`createTriangle(int x, int y, int base, int height)`。在该方法中构建您的数组，调用适当的构造函数，然后返回构造的对象。

# excel - 以编程方式自动填充一列

> ID：15149824
> 
> 赞同：1
> 
> 时间：2013-03-01T03:08:43.857
> 
> 标签：excel, vba

我的目标应该很容易。只需将一列自动填充到特定行：

```
Range("A3:C3").Select
Selection.AutoFill Destination:=Range("A3:C" & RowCount) 
```

该代码块完美运行。但我想要的是分别自动填充三列，因为`RowCount`每列都有不同的 s。我试过了：

```
Range("A3").Select
Selection.AutoFill Destination:=Range("A3:A" & RowCount) 
```

但我明白了`Run-time error '1004': Method 'Range' of object '_Global' failed`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:22:21.667

下面的代码对我来说没有问题。我能够让它失败并显示您遇到的错误消息的唯一方法是将 rowcount 设置为产生无效地址的值（如“A3：A0”）。

```
 Sub FillIt()
      Dim RowCount As Long
      RowCount = 10
      Range("A3:A4").AutoFill Destination:=Range("A3:A" & RowCount)
  End Sub 
```

.Autofill 方法将如何填充系列有几个选项。

上面的代码假定所需范围的前两个单元格包含该系列的前两个值。例如，如果 A3 = 1 且 A3 = 2，则 Excel 假定您需要一系列连续的整数 1、2、3.... 如果值为 1 和空白，则结果系列将为 1、空白、 1、空白等

可以使用可选的“类型”参数指定如何填充系列。代码中的填充方法相当于设置`Type:=xlFillDefault`。还有其他几种可用的填充类型，例如 xlFillSeries、xlFillCopy 和 xlFillLinearTrend。有关这些的完整列表，请参阅 Microsoft 的[参考页面](http://msdn.microsoft.com/en-us/library/office/aa221841%28v=office.11%29.aspx)。

# javascript - jQuery 验证插件检查下拉、科学和具有相似名称的元素

> ID：15149830
> 
> 赞同：1
> 
> 时间：2013-03-01T03:09:11.827
> 
> 标签：javascript, jquery, jquery-validate

这篇文章是基于我之前的[问题](https://stackoverflow.com/questions/15126638/jquery-button-validate-part-of-a-form-at-a-time)。我有一个包含三个部分的表单，并使用`back`和`next`按钮一次仅向用户隐藏和显示一个表格部分。此外，该`next`按钮还用作验证触发器。

我的问题是：

1.  我的验证方法未能检查下拉字段。
2.  有没有一种快速的方法`jQuery validation plugin`可以验证具有相似名称的字段？例如，我有带有 name `mm1`、`mm2`和的字段`mm3`。可以`mm*`在验证规则中使用一些快捷方式吗？
3.  我发现内置方法`number`无法验证科学输入。是否有其他内置方法来处理它？我必须为此添加自己的方法吗？

感谢您的任何投入！这是一个[演示](http://jsfiddle.net/godhong/GcyNn/)。

### HTML

```
<form method="post" id="form1" action=index.html>
    <table>
         <H4 align="center" id="id_tab">
            |<a href="#" class="Chemical"> Chemical </a>|
             <a href="#" class="Application"> Application </a>|
             <a href="#" class="Physical"> Physical </a>|
            </H4>
    </table><br>
    <table class="tab tab_Chemical" border="0">
        <tr><th><label for="id_wat_hl">Water Column Half life (days):</label></th>
            <td><input type="text" name="wat_hl" id="id_wat_hl" value="1e-08" /></td></tr>
    </table>
    <table class="tab tab_Application" border="0" style="display:none">
        <tr><th scope="col"><label for="id_noa">Number of Applications:</label></th>
             <td scope="col"><select name="noa" id="id_noa">
                 <option value="">Make a selection</option>
                 <option value="1">1</option>
                 <option value="2">2</option>
                 <option value="3">3</option></select>
             </td>
         </tr>    
    </table>    
    <table class="tab tab_Physical" border="0" style="display:none">
        <tr><th><label for="id_mas_tras_cof">Mass Transfer Coefficient (m/s):</label></th>
            <td><input type="text" name="mas_tras_cof" id="id_mas_tras_cof" /></td></tr>
    </table>
    <table align="center">
        <tr><td><input class="back" type="button" value="Back" /></td>
            <td><input class="next" type="button" value="Next" /></td>
            <td><input class="submit" type="submit" value="Submit" /></td></tr>
    </table></form> 
```

### JS

```
$(document).ready(function () {
    var tab_pool = ["tab_Chemical", "tab_Application", "tab_Physical"];
    var visible = $(".tab:visible").attr('class').split(" ")[1];
    var curr_ind = $.inArray(visible, tab_pool);
    $(".submit").hide();
    $(".back").hide();

    var validator = $('form').validate({
        ignore: 'input[type="button"],input[type="submit"]',
        rules: {
            wat_hl: {
                required: true,
                number: true
            },
            noa: {
                required: true
            },
            mm1: {
                required: true
            },            
            mm2: {
                required: true
            },              
            mm3: {
                required: true
            },              
            dd1: {
                required: true
            },            
            dd2: {
                required: true
            },              
            dd3: {
                required: true
            },               
            mas_tras_cof: {
                required: true
            }
        }
    });

    $('.next').click(function () {
        var tab = $(".tab:visible");

        var valid = true;
        $('input', tab).each(function (i, v) {
            valid = validator.element(v) && valid;
        });

        if (!valid) {
            return;
        }

        if (curr_ind < 2) {
            $(".tab:visible").hide();
            curr_ind = curr_ind + 1;
            $("." + tab_pool[curr_ind]).show();
            $(".submit").hide();
            $(".back").show();
        }
        if (curr_ind == 2) {
            $(".submit").show();
            $(".next").hide();
        }
    });

    $('.back').click(function () {
        if (curr_ind > 0) {
            $(".tab:visible").hide();
            curr_ind = curr_ind - 1;
            $("." + tab_pool[curr_ind]).show();
            $(".submit").hide();
            $(".next").show();
        }
        if (curr_ind == 0) {
            $(".back").hide();
        }
    });

    var i = 1
    $('.tab_Application').append('<tr id="noa_header" style="display:none"><th width="18%">App#</th><th width="18%">Month</th><th width="18%">Day</th>');

    $('#id_noa').change(function () {
        var total = $(this).val()
        $('tr[id*="noa_header"]').show()

        while (i <= total) {
            $('.tab_Application').append('<tr class="tab_noa1"><td><input type="text" size="5" value="' + i + '"  disabled/></td><td><input type="text" size="5" name="mm' + i + '" id="id_mm' + i + '""/></td><td><input type="text" size="5" name="dd' + i + '" id="id_dd' + i + '""/></td>');
            i = i + 1;
        }
        while (i - 1 > total) {
            $(".tab_Application tr:last").remove();
            i = i - 1
        }
        $('</table>').appendTo('.tab_Application');
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:28:05.077

问题1：您的代码包含：

```
$('input', tab).each(function (i, v) {
        valid = validator.element(v) && valid;
    });` 
```

但 a`select`不是`input`。将其更改为`$('input,select', tab)`.

问题 2：有关如何按班级应用规则，请参阅[此问题。](https://stackoverflow.com/a/15116062/594235)此外，如果输入具有作为验证方法名称的类，则将应用该方法，因此您可以`class="required number"`在输入上使用。并且该插件还可以识别 HTML5 验证标签，因此您可以说它`<input type="number" required/>`会执行适当的验证。

问题 3：您可以使用正则表达式。看到[这个问题](https://stackoverflow.com/questions/638565/parsing-scientific-notation-sensibly)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:43:32.883

引用操作：

> 2) jQuery 验证插件中是否有一种快捷方式可以验证具有相似名称的字段？例如，我有带有 `name` `mm1`、`mm2`和的字段`mm3`。可以`mm*`在验证规则中使用一些快捷方式吗？

是的。

```
$('[name*="mm"]').each(function() {
    $(this).rules('add', {
        required: true,
        digits: true,
        messages: {
            required: "custom message required",
            digits: "custom message digits"
        }
    });
}); 
```

**请参阅文档**： [http ://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

**演示**：http: [//jsfiddle.net/g7XES/](http://jsfiddle.net/g7XES/)

* * *

回应OP的评论：

[`additional-methods.js`文件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)内部有一个名为`integer`.

```
jQuery.validator.addMethod("integer", function(value, element) {
    return this.optional(element) || /^-?\d+$/.test(value);
}, "A positive or negative non-decimal number please"); 
```

**演示**：http: [//jsfiddle.net/v82sZ/](http://jsfiddle.net/v82sZ/)

# jquery - jQuery UI 拖放效果和盒子大小

> ID：15149832
> 
> 赞同：0
> 
> 时间：2013-03-01T03:09:37.740
> 
> 标签：jquery, jquery-ui, css

我正在尝试使用 jQuery UI 的`drop`效果为框的切换设置动画。此框已`box-sizing: border-box`应用于它，这似乎导致效果出现一些问题。

当盒子动画时，它的宽度和高度会减小，就像它失去了包含的填充一样。

HTML

```
<button>Toggle</button>
<div id="box">
    <p>Some content</p>
</div> 
```

CSS

```
#box{
    width: 100%;
    height: 200px;
    padding: 20px;
    position: absolute;
    top: 50%;
    right: 0;
    left: 0;
    margin-top: -100px;
    background: #ccc;
    -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
     box-sizing: border-box;
} 
```

JS

```
$("button").click(function(){
    $("#box").toggle("drop", {direction: "up"}, 400); 
}); 
```

这是一个[小提琴](http://jsfiddle.net/MgGvd/)。

如果我删除 box-sizing，它的动画效果就很好。

有谁知道这可能是什么问题以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:24:51.867

改用动画。我不确定为什么`toggle`不起作用，但确实如此。

```
$("button").click(function(){
   $("#box").animate({
    opacity: 0.25,
    right: '+=50',
    height: 'toggle'
  }, 400);
}); 
```

好吧...您可能需要稍微修改一下，但是您提出的错误已修复。

编辑：忘记为示例添加小提琴[http://jsfiddle.net/4PJ5Z/](http://jsfiddle.net/4PJ5Z/)

# python - 解析 .txt 结果中的 json 数据 ValueError

> ID：15149835
> 
> 赞同：0
> 
> 时间：2013-03-01T03:09:47.823
> 
> 标签：python, json, python-2.7

在`json.txt`我有这个数据：

```
"""{"iPod": "apple"}""" 
```

这段代码就是解析`json.txt`：

```
f = open("json.txt", "r")
json_data = f.read()
f.close

print json.loads(json_data) 
```

结果是：

> ValueError：额外数据：line1 column2 - line2 column1(char2-24)

我想`json.txt`保持现在的状态。

如何更改此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:26:26.660

unbuntu 的答案不起作用的原因是因为当您读取文件时，它包含`\n`字符。

```
'"""{"iPod": "apple"}"""\n' 
```

你也必须删除它。

```
import json
with open("json.txt", "r") as f:
    json_data = f.read().strip('"\n')   

print json.loads(json_data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:13:02.213

看起来您`json_data`包含三重引号。在将 JSON 传递给之前，您需要将它们剥离`json.loads`：

```
with open("json.txt", "r") as f:
    json_data = f.read().strip('"')   

print json.loads(json_data) 
```

# html - 如何将图像添加到 动态标记

> ID：15149841
> 
> 赞同：1
> 
> 时间：2013-03-01T03:10:29.600
> 
> 标签：html, css, html-lists, background-image

我想添加一个放置在每个 li 菜单项下方的图像，例如菜单分隔符。我如何在 CSS 中执行此操作。当我向 ul 添加另一个 li 标签时，我希望图像能够动态呈现。

HTML 代码：

```
<ul class="menu">
    <li>Bookmarks</li>
    <li>Something</li>
    <li>BUMPER STICKERS</li>
    <li>CARBONLESS FORMS</li>
    <li>CD JACKETS</li>
    <li>DIE CUT/CUSTOM STICKERS</li>
    <li>DOOR HANGERS</li>
    <li>ENVELOPES</li>
    <li>FOLDERS</li>
    <li>LETTERHEADS</li>
    <li>RECTANGULAR STICKERS</li>
    <li>ROUND STICKERS</li>
    <li>STATIC CLING</li>
    <li>TABLE TENTS</li>
    <li>VINYL BANNERS</li>
    <li>WINDOW STICKERS</li>
</ul> 
```

CSS：

```
.seperator li {
    background-image: url(../Images/Template%20Images/Seperator.png);
    padding: 1px;
    width: 200px;
    height: 25px;
    position: absolute;
    right: 0px;
    bottom: 890px;
    background-repeat: no-repeat;
    display: run-in;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:13:33.197

使 li 有一个背景图像，该图像的位置距离顶部足够远，文本不会与它重叠。这是定位背景图像的方法：

[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

只需调整元素高度以包括文本行的 x 像素加上背景图像的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:16:07.393

像这样的东西应该工作。当然，您必须根据自己的需要和要求对其进行调整。

```
.menu li{
    background: url(line.jpg) bottom left no-repeat;
    padding-bottom: 5px;
}

<ul class="menu">
    <li>Bookmarks</li>
    <li>Something</li>
    <li>BUMPER STICKERS</li>
    <li>CARBONLESS FORMS</li>
    <li>CD JACKETS</li>
    <li>DIE CUT/CUSTOM STICKERS</li>
    <li>DOOR HANGERS</li>
    <li>ENVELOPES</li>
    <li>FOLDERS</li>
    <li>LETTERHEADS</li>
    <li>RECTANGULAR STICKERS</li>
    <li>ROUND STICKERS</li>
    <li>STATIC CLING</li>
    <li>TABLE TENTS</li>
    <li>VINYL BANNERS</li>
    <li>WINDOW STICKERS</li>
</ul> 
```

# java - 如何将 FXML 转换为 JAVA

> ID：15149843
> 
> 赞同：5
> 
> 时间：2013-03-01T03:10:40.177
> 
> 标签：java, javafx, fxml

我在 NetBeans 中使用 javafx 场景构建器创建了一个 .fxml 文件。

如何将 NetBeans 中的 .fxml 文件转换为 .java？那有什么程序可以转换它吗？

我在 fxml 方面不是很好，所以我想使用 .java 文件来编写我的 javafx 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:14:47.630

对这种事情没有任何支持。这个想法是您使用 FXML 可视化地布局您的 UI，然后使用控制器类将其连接到 java。

旁注：由于嵌入式设备的性能原因，我们在 e(fx)clipse 启动了一个构建插件，允许您将 FXML 文件转换为 Java 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-29T18:52:30.690

> 那有什么程序可以转换它吗？

是的。*通过 Archive.org 2021.03.04 捕获*的Netbeans [FXML 2 JAVA 转换器](https://web.archive.org/web/20210304040347/http://plugins.netbeans.org/plugin/68619/fxml-2-java-converter) 。

# c# - LINQ to Entities 不支持指定的类型成员“Locale_Section”。

> ID：15149851
> 
> 赞同：1
> 
> 时间：2013-03-01T03:12:02.027
> 
> 标签：c#, webforms, entity-framework-5, asp.net-4.5

我在stackoverflow上遇到了一些与我的here类似的问题，但它们看起来并没有深入到连接表中，而且我看不到任何适用于我的代码的东西，所以我希望有人可以查看我的代码位并告诉我为什么我得到

> LINQ to Entities 不支持指定的类型成员“Locale_Section”。仅支持初始化程序、实体成员和实体导航属性。

```
 private object SetNavItems(string Category, byte CultureID)
    {
        using (var db = new Compleate())
        {
            return (from n in db.Navigation
                    where n.Category == Category && n.Section.Locale_Section.CultureID == CultureID
                    orderby n.Position
                    select new
                    {
                        n.Section.Locale_Section.Title,
                        n.Section.LinkAddress
                    }).ToList();
        }
    } 
```

导航.cs

```
 [Table("Navigation")]
public class Navigation
{
    [Key, Required, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int NavigationID { get; set; }

    [Required, MaxLength(16), Column(TypeName = "varchar")]
    public string Category { get; set; }

    [Required]
    public Int16 SectionID { get; set; }

    [ForeignKey("SectionID")]
    public virtual Section Section { get; set; }

    [Required]
    public byte Position { get; set; }
} 
```

截面.cs

```
 [Table("Section")]
public class Section
{
    [Key, Required, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Int16 SectionID { get; set; }

    public Int64 LogoFileID { get; set; }

    [ForeignKey("LogoFileID")]
    public virtual File File { get; set; }

    [Required, MaxLength(15), Column(TypeName = "varchar")]
    public string RouteName { get; set; }

    [Required, MaxLength(15), Column(TypeName = "varchar")]
    public string Type { get; set; }

    [NotMapped]
    public string LinkAddress
    {
        get
        {
            return Type + "/" + RouteName;
        }
    }

    [NotMapped]
    public virtual Locale_Section Locale_Section { get; set; }
} 
```

Locale_Section.cs

```
 [Table("Locale_Section")]
public class Locale_Section
{
    [Key, Required, Column(Order = 0)]
    public Int16 SectionID { get; set; }

    [ForeignKey("SectionID")]
    public virtual Section Section { get; set; }

    [Key, Required, Column(Order = 1)]
    public byte CultureID { get; set; }

    [ForeignKey("CultureID")]
    public virtual Culture Culture { get; set; }

    [Required, MaxLength(250)]
    public string Title { get; set; }

    public string Synopsis { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:25:22.103

您已将实体中的`Section_Locale`属性标记为。这意味着该属性对于您的映射是未知的，并且无法在 Linq-to-Entities 查询中转换为 SQL。如果不映射它或通过调用例如或首先将所有实例加载到您的应用程序，您就不能使用该属性（这很可能是非常糟糕的解决方案）。`Section``NotMapped``Navigation``ToList``AsEnumerable`

# sqlite - 如何使用sql选择特定列中没有任何重复的所有列

> ID：15149855
> 
> 赞同：1
> 
> 时间：2013-03-01T03:12:22.980
> 
> 标签：sqlite

我需要选择在特定列中具有不同值的任何记录的所有列，所以如果我有

```
Firts|Last|State|
Jacck|Redy|NJ
Jacck|Redy|NJ
Jacck|Redy|NY
Jacck|Redy|NY
Jacck|Redy|OH
Jacck|Redy|OH 
```

我想得到

```
 Jacck|Redy|NJ
 Jacck|Redy|NY
 Jacck|Redy|OH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:19:56.960

```
 select first, last, state from table1 GROUP BY first, last, state 
```

或者

```
 select distinct first, last,state from table1 
```

# java - 番石榴中的间隔树

> ID：15149857
> 
> 赞同：3
> 
> 时间：2013-03-01T03:12:37.027
> 
> 标签：java, algorithm, guava, intervals, interval-tree

我正在使用 Guava 的 Range 类来处理间隔。我想知道是否可以通过使用一些番石榴的收集容器找到从一组间隔到给定点/间隔的最近间隔？

我尝试在 Java 中搜索区间树，这就是我找到的。如果可能的话，我宁愿通过使用 Guava 类之一来做到这一点。

[http://picard.sourceforge.net/javadoc/net/sf/picard/util/IntervalTree.html](http://picard.sourceforge.net/javadoc/net/sf/picard/util/IntervalTree.html) [http://tribble.googlecode.com/svn/trunk/src/org/broad/tribble/index/interval/IntervalTree .java](http://tribble.googlecode.com/svn/trunk/src/org/broad/tribble/index/interval/IntervalTree.java)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T05:13:08.710

Guava 不提供此功能，尽管您可以通过[`RangeSet`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/RangeSet.html)在给定点之前和之后找到第一个范围来在 a 之上构建这样的东西。

但一般来说，Guava对距离、度量或除了类型的比较排序之外的任何东西*一无所知*`Range`。他们不知道那更接近于。*`10``11``15`*

# python - Python（numpy）：按索引删除列

> ID：15149868
> 
> 赞同：6
> 
> 时间：2013-03-01T03:14:06.830
> 
> 标签：python, numpy

我有一个 numpy 数组，想根据索引删除一些列。是否有内置功能或这种操作的优雅方式？

就像是：

```
arr = [234, 235, 23, 6, 3, 6, 23]
elim = [3, 5, 6]

arr = arr.drop[elim]

output: [234, 235, 23, 3] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T03:19:23.507

使用`numpy.delete`，它将返回一个新数组：

```
import numpy as np
arr = np.array([234, 235, 23, 6, 3, 6, 23])
elim = [3, 5, 6]
np.delete(arr, elim) 
```

# php - 让脚本一次性向每一行发送电子邮件的更好方法？

> ID：15149871
> 
> 赞同：0
> 
> 时间：2013-03-01T03:14:40.643
> 
> 标签：php, arrays, email, foreach

我目前正在编写一个脚本，当受让人的通行证在 3 个月后到期时，它会向管理员发送电子邮件。但是，我现在处于瓶颈状态，因为电子邮件仅发送一封电子邮件，而不是每个受让人的预期多封电子邮件。它还应该发送今天 + 3 个月的那些（即 2013-06-02 到期的将在今天发送，并且只发送一次）。值在 db 中存储为 DATE (yyyy-mm-dd)。

我想它运行一次我应该有一个检查器与我的 sql where sendemail(db table for assignee) = 0？

我当前的数据存储在数组中吗？如果是这样，我需要 foreach() 将电子邮件发送到满足条件的每个条目？

我的数据库中有近 1000 个条目，希望上面的代码或修改后的代码不会阻塞服务器，它会在办公时间之后运行脚本。

任何专家都可以协助完善脚本或指出正确的方向吗？任何帮助都是很大的帮助！！！

谢谢

（PS.-credit to peterm in pointing me the correct direction for the email to work in the first place & Pardon me if mysql_* is deprecated.我现在不知道如何使用pdo。一旦一切正常，我可能会再次编辑它们以采用 pdo 以供将来校对）

这就是我现在所拥有的：

```
/execute the SQL query and return records
$result = mysql_query("SELECT * FROM tbl_lead WHERE pass_expiry = DATE(NOW() + INTERVAL      
3 MONTH)");

if (!$result) {
//handle your error
die('The query failed.');
}

//fetch tha data from the database 
while ($row = mysql_fetch_array($result))
{
$subject = $row['company_name']."'s"." work pass is expiry soon";
$emailBody = "Company: ".$row['company_name']." \n"."Comment: ".$row['comment']."   
\n"."Contact: ".$row['contact']." \n";
}

if(mail($to, $subject, $emailBody, $headers)) {
echo $emailBody;
echo 'Email sent successfully!';
} else {
echo $emailBody;
die('Failure: Email was not sent!');

}   
//close the connection
mysql_close($dbhandle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:29:18.213

首先...你不应该使用 select *，而应该只选择你需要的列，除了你的主键，以利用索引：

```
//execute the SQL query and return records
$result = mysql_query("SELECT comment,company_name,contact FROM tbl_lead WHERE pass_expiry = DATE(NOW() + INTERVAL 3 MONTH)"); 
```

您也没有`$to`在 while 循环中进行设置，这可能可以解释为什么您只发送一封电子邮件。

# php - PHP 致命错误：在第 29 行的 /var/www/html/cake/bootstrap.php 中调用未定义函数 dl()

> ID：15149872
> 
> 赞同：0
> 
> 时间：2013-03-01T03:15:07.067
> 
> 标签：php, apache, cakephp

升级 PHP 版本后，我开始在任何请求提供 PHP 文件时看到此错误

```
PHP Fatal error:  Call to undefined function dl() in /var/www/html/cake/bootstrap.php on line 29

These are the PHP Version details 
Name       : php
Arch       : x86_64
Version    : 5.3.22
Release    : 15.el5.art
Size       : 7.5 M
Repo       : installed
Summary    : The PHP HTML-embedded scripting language. (PHP: Hypertext Preprocessor)
URL        : http://www.php.net/
License    : PHP 
```

这是 uname -a 命令的输出

```
Linux ip-72-167-55-181.ip.secureserver.net 2.6.18-308.1.1.el5.centos.plus #1 SMP Wed Mar 7 
```

Apache 版本信息

```
Server version: Apache/2.2.3
Server built:   Feb 23 2012 21:16:56 
```

蛋糕PHP版

```
'1.3.13' 
```

谷歌搜索似乎没有为我提供任何相关结果。希望有人可以为我提供有关该问题的一些见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:20:12.020

根据文档： http: [//php.net/dl](http://php.net/dl)

`dl()`自 PHP 5.3.0 起已从某些 SAPI（服务器 api，例如 apache、iis 等）中删除

# java - 传递字节数组；通过junit测试，但不能定期调用方法？

> ID：15149875
> 
> 赞同：1
> 
> 时间：2013-03-01T03:15:18.983
> 
> 标签：java, encryption, for-loop, error-handling, bytearray

在 java 中使用 des 进行一些加密。我有一堆方法以及一些 junit 测试用例。我遇到问题的方法接收一个字节数组和一个 int，并在该位置（int）翻转该位。因此，就像使用总共 64 位的 8 字节字节数组一样，它接收十六进制字节数组 [ ad 12 45 67 c3 65 3a 66 ] 将其转换为 64 位长的二进制字符串并翻转任何位置。此方法通过了 junit 中的测试用例（已提供给我），但现在我尝试对程序执行其他操作，但它通常不会让我调用翻转。

这是我得到的代码和错误。在翻转的第一个 for 循环中，人们建议我将 <= 更改为仅 < ，但这样做会导致我的 junit 测试失败。

我的目标是一次一点地浏览给定的明文并翻转它以观察给定密文的变化。这就是 diff 方法的用途（计算 2 字节数组之间的差异）。这一切都是在 main 的那个小的 for 循环中完成的。

```
public static void main(String[] args){

        //take original plain text and get the ct to compare all other ct's to
        String plaintxt = "Coolbro!";
        byte [] ptAr = getBytes(asciiToHex(plaintxt));
        byte [] ctFinal = encrypt(ptAr);
        byte [] ptCopy;
        byte [] newCt;
        int differences =0;

        for ( int j = 63; j >= 0; j--){

            ptCopy = flip(ptAr, 2);
            newCt = encrypt(ptCopy);
            differences = diff(ctFinal,newCt);
            System.out.println(differences);

        }

    }

    public static int diff( byte [] a, byte [] b){
    int diff = 0;
    String byteAr1;
    String byteAr2;
    char A1 [];
    char A2 [];

    byteAr1 = hexToBin(a);
    byteAr2 = hexToBin(b);

    A1 = byteAr1.toCharArray();
    A2 = byteAr2.toCharArray();

    for( int i = 0; i < A1.length; i++){
        if(A1[i] != A2[i]){
            diff++;
        }
    }
    return diff;
}

    public static byte [] flip(byte [] a, int position){

        byte[] copy = a;
        String temp = "";
        String tempf = "";
        for(int i = 0; i <= a.length; i++){
            temp = temp + String.format("%8s", Integer.toBinaryString(a[i])).replace(' ', '0');
        }
        if(temp.charAt(position) == '1'){
            for(int i = 0; i < temp.length(); i++){
                if (i == position){
                    tempf += "0";
                }
                else{
                    tempf += temp.charAt(i);
                }
            }
        }
        else{
            for(int i = 0; i < temp.length(); i++){
                if (i == position){
                    tempf += "1";
                }
                else{
                    tempf += temp.charAt(i);
                }
            }
        }
        temp = Integer.toHexString(Integer.parseInt(tempf, 2));
        byte [] fin = temp.getBytes();

        return fin; 
```

以下是这对我产生的错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 8
at AvalancheUtilities.flip(AvalancheUtilities.java:55)
at AvalancheUtilities.main(AvalancheUtilities.java:18) 
```

就像我上面所说的，如果我将 <= 更改为只是一个 < 那么我会得到这些错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "0110001101101111011011110110110001100010011100100110111100100001"
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at AvalancheUtilities.flip(AvalancheUtilities.java:77)
at AvalancheUtilities.main(AvalancheUtilities.java:18) 
```

我真的不知道如何处理这两种情况。最好我想坚持 <= 因为它通过了测试用例。

感谢您的帮助，我知道这很多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:39:58.840

您的“人”是正确的，您想将 <= 更改为 <。查看您的异常，您的数组中只有 8 个项目，这意味着您只能从 0 到 7 进行索引。最后一个索引将始终比数组的长度小 1。

对于另一个例外，问题是您的数字太大。请参阅[Integer.MAX_VALUE](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)。

将其切换为：

```
temp = Long.toHexString(Long.parseLong(tempf, 2)); 
```

# ruby-on-rails - ruby on rails 中的布尔值

> ID：15149877
> 
> 赞同：2
> 
> 时间：2013-03-01T03:15:28.053
> 
> 标签：ruby-on-rails, boolean, haml

我已经在我的`model/user.rb`

```
class User < ActiveRecord::Base
attr_accessible :name, :has_car

def  init(age)
 if age > 18
   has_car = true
 else
   has_car = false
 end
   has_car
end
... 
```

然后在我看来（`.html.haml`文件），我试图只打印该字段：

```
...
%li
 - if this_user.has_car
   = "This person has a car"
 - else
   = "This person does NOT have a car"
... 
```

出于某种原因，`this_user.has_car`总是评估为`false`。谁能告诉我我在这里做错了什么？（我对 Ruby/Rails 很陌生）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T04:02:08.030

`has_car?`您可以定义在用户模型中调用的方法

```
# user.rb
def has_car?
  age > 18
end 
```

然后`this_user.has_car?`在您的视图中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:36:59.950

```
# app/models/user.rb
class User < ActiveRecord::Base
  attr_accessible :name, :age, :has_car

  def initialize
    # Everyone does not have a car
    self.has_car = false
  end

  def has_car?
    self.has_car || self.age >= 18
  end

  def purchase_car
    self.has_car = true
  end

  def sell_car
    self.has_car = false
  end
end 
```

`user = User.new`调用或时使用初始化方法`user = User.create`。此方法只是`has_car`将该实例设置为 false。

然后，您可以询问`user.has_car?`如果用户有一辆车（他们已经购买了一辆）或者他们是 18 岁或以上，哪个会返回 true。

因为 16 岁的人（在某些州）可以购买汽车，所以您可以打电话`user.purchase_car`说明他们现在拥有汽车。该`has_car?`方法在检查`has_car`数据库列之前检查它们的`age`.

该`sell_car`方法执行类似的操作，但它设置`user.has_car`为 false。

希望这对您有所帮助，祝您工作顺利`Learn Ruby on Rails`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:22:19.387

该方法不应该这样读吗？

```
def init(age)
  if age > 18
    has_car = true
  else
    has_car = false
  end
  return has_car
end 
```

# wcf-data-services - 从 WCF 数据服务请求中获取实体名称

> ID：15149879
> 
> 赞同：1
> 
> 时间：2013-03-01T03:15:34.903
> 
> 标签：wcf-data-services

在 OnStartProcessingRequest() 方法中拦截传入的 OData 获取请求时如何获取实体（表）名称？例如：我想从以下 oData URI 获取 MusicCollection 和 Genre 作为实体名称

[http://dataserver.com/service.svc/MusicCollection[SomeSong]/Genre](http://dataserver.com/service.svc/MusicCollection%5BSomeSong%5D/Genre)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:23:48.523

这是 OdataUriParser 的完美使用！正如我们所说，它处于积极的、增量的、开发中，过滤器和 orderby 解析器目前可用，随着我们完成开发，还会有更多。我们尚未发布将处理您的特定场景的解析器部分（它仍在积极开发中），但有一个实验版本（正式版本基于此），您可以同时使用。在此处查看 OData contrib 库：http: [//nuget.org/packages/Microsoft.Data.OData.Contrib](http://nuget.org/packages/Microsoft.Data.OData.Contrib)。具体来说，是这样的：

```
 Uri requestUri  = new Uri("http://dataserver.com/service.svc/MusicCollection(SomeSong)/Genre");
  Uri baseUri = new Uri("http://dataserver.com/service.svc/")
  SyntacticTree parsedUri = SyntacticTree.ParseUri(requestUri, baseUri); 
```

生成的 SyntacticTree 会将您的 uri 分解为 QueryToken，只需遍历树即可找到您正在寻找的路径！

# android - 活动转换期间动画缓慢

> ID：15149880
> 
> 赞同：3
> 
> 时间：2013-03-01T03:15:46.243
> 
> 标签：android, performance, android-activity, android-animation

到目前为止，我的应用程序中有 3 个主要活动，启动屏幕、菜单、游戏。

所有 3 都有动画（启动画面是非常简单的动画）。当我从一个活动过渡到下一个活动（并返回到上一个活动）时，就会出现问题。

例如，用户处于活动`B`菜单中。他们按下`Start`并被带到比赛中。然而，就在菜单活动淡出之前（并且在淡出时），动画变得非常不稳定。同样，当游戏第一次开始时，第一秒左右的动画非常不稳定。

我在`Surfaceview`每个活动的类构造函数中加载/创建位图（和其他实体）。我正在`initialise()`同一类中的方法中创建缩放位图并初始化填充数组等所需的其他变量。`onCreate()`（我在相应的活动类中调用此方法）。

所以我猜这与我加载位图的方式/时间/位置有关。

我在 DDMS 中使用了分配跟踪器，但我看不到那里有任何问题（没有创建不需要的东西）。

当我退出并进入活动时，GC 正在运行，这可能是问题所在。

我不知道如何解决这个问题。

在应用程序开始时加载所有必需的位图等是否是标准做法，而不是在每个活动开始时按要求加载位图？（请注意，我的游戏循环中根本没有创建任何内容，问题通常仅在进入和退出活动时出现）。如果是这样，当我在我的初始（比如启动屏幕）活动中创建这些时，我如何才能从我的所有其他活动中引用它们？

我已经研究了很长时间（在这个网站上，通常在网上）并试图自己弄清楚，但我找不到明确的答案。

我所有的活动都遵循以下结构......

```
public class OptionsActvity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        displayOptionsScreen = new OptionsScreen(this);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(displayOptionsScreen);
        WindowManager w = getWindowManager();   
        Display d = w.getDefaultDisplay();
        int width = d.getWidth();
        int height = d.getHeight();
        myApp MyAppSettings = (MyApp) getApplicationContext();   
        displayOptionsScreen.initialise(width, height);
    }
}

public class OptionScreen extends SurfaceView implements
        SurfaceHolder.Callback {    

    // set up / declare variables here
}

public OptionsScreen(Context context){
    // Create bitmaps etc here
}

public void initialise(int w, int h) {
    // Create scaled bitmaps here
    // Initialise other values
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:48:15.147

不要在主线程上创建您的位图。将它们推到后台或在其他所有操作完成后执行。

# java - 如何单独设置文本字母的颜色？

> ID：15149881
> 
> 赞同：0
> 
> 时间：2013-03-01T03:15:48.690
> 
> 标签：java, android, andengine

我将如何制作文本以使每个字母在andengine GLES 2中都是随机颜色？对于随机颜色，我可以去

```
int red = (int) (Math.random() * 254) + 1;
int green = (int) (Math.random() * 254) + 1;
int blue = (int) (Math.random() * 254) + 1;
Color pColor = new Color(red, green, blue); 
```

但我怎样才能将它单独设置为每个字母？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:58:50.050

每个字母都必须是它自己的`Text`并随机设置每个字母的颜色 - 就这样做

当你创建时，在创建时`Text`将颜色设置为白色，然后将其更改为你的随机颜色

顺便说一句，（我知道）没有办法一次性完成`Text`

# asp.net - 侧边栏与内容和页脚重叠

> ID：15149883
> 
> 赞同：3
> 
> 时间：2013-03-01T03:16:04.843
> 
> 标签：asp.net, css, asp.net-mvc-3, razor

我在这里有一个插图来最好地描述我的问题 ![在此处输入图像描述](../Images/d158b0661545fd36656e7bc51021e4de.png)
只要内容只有小项目，侧边栏就会重叠我的内容和页脚。

在我的**_layout**我这样称呼我的侧边栏

```
<body>
<div class="page">
    <div id="header">          
        <div id="menucontainer">
             <ul id="nav">
               MENUTABS
             </ul>
        </div>
    </div>
    <div id="main">   
    <div id = "sidebar">
    @if (IsSectionDefined("SideBar"))
    {
        @RenderSection("SideBar", required: false)

    }
    else { 
       <p>Currently Unavailable, Sorry for the inconvinience</p>
    }
        </div>

        @RenderBody()
    </div>
    <div id="footer">
    <div id="copyright">FOOTER</div>
    </div>
</div>
</body> 
```

然后在我看来**我**这样称呼它

```
 @section SideBar
   {
    @{Html.RenderAction("Index", "Post");}
   } 
```

这是我的 CSS

```
.page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

#main 
{
    clear: both;
    padding: 10px 10px 10px 10px;
    background-color: #fff;
}

#sidebar
{
    float:left;
    margin:200px 10px -30px 10px;
    padding:10px -10px -10px 10px;
    width:235px;
    height:auto;
    border: solid 2px black;
    background-color:#9acbba;    
}

footer, 
#footer {
    background-color: #fff;
    color: #999;
    padding: 10px 0;
    text-align: center;
    line-height: normal;
    margin: 0 0 30px 0;
    font-size: .9em;
    -webkit-border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
} 
```

请帮助我弄清楚这个问题的原因是什么。谢谢T_T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:14:32.077

好吧，这真的很简单……几乎所有你的标记都是错误的，但在这里你有一个网站的工作框架，请参阅**[THIS FIDDLE](http://jsfiddle.net/YymEd/2/)**

**HTML**

```
<body>
<div class="page">
    <div id="main">   
        <div id="header">          
            <div id="menucontainer">
                 <ul id="nav">
                   MENUTABS
                 </ul>
            </div>
        </div>
        <div id="sidebar">
             @if (IsSectionDefined("SideBar")) {
                   @RenderSection("SideBar", required: false)

             } else { 
                   <p>Currently Unavailable, Sorry for the inconvinience</p>
             }
        </div>
        <div id="content">
        </div>
        <div id="footer">
            <div id="copyright">FOOTER</div>
        </div>
    </div>
</div>
</body> 
```

**CSS**

```
.page {
    width: 90%;
    margin: 0 auto;
}

#main 
{
    float:left;
    padding: 10px 10px 10px 10px;
    background-color: gray;
    width:940px;
}
#header {
    width:900px;
    padding:10px;
    margin:10px;
    background: yellow;
}
#content {
    width: 641px;
    background: blue;
    height: 20px;
    float: left;
    margin:10px;
    padding:10px;
}
#sidebar
{
    float:left;
    margin:10px;
    padding:10px;
    width:215px;
    height:auto;
    border: solid 2px black;
    background-color:red;    
} 
#footer {
    background-color: white;
    color: #999;
    padding: 10px;
    text-align: center;
    line-height: normal;
    margin: 0 0 30px 0;
    font-size: .9em;
    -webkit-border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
    clear: both;
    margin: 10px;
    width: 900px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:22:40.497

你也应该是我来宾`float`的`div`包装`#sidebar``#main`

```
#main 
{
   float:left;
    clear: both;
    padding: 10px 10px 10px 10px;
    background-color: #fff;

} 
```

请...看演示

[**演示**](http://jsfiddle.net/jhunlio/YpwMh/1/)

# c++ - 奇怪的重复模板模式 (CRTP)、AutoLists 和 C++

> ID：15149884
> 
> 赞同：3
> 
> 时间：2013-03-01T03:16:07.427
> 
> 标签：c++, crtp

我有点困惑为什么奇怪重复模板模式（CRTP）设计模式有这么多“仇恨”，例如我正在阅读“Game Programming Gems 3”，并且那里有一个名为 autoLists 的设计。这使用 CRTP 创建每种类型对象的数组。

我的问题：

为什么这是一件坏事？专门针对 AutoLists 的想法，但一般来说，关于 CRTP 的答案就足够了。

我的目的是在实体组件系统中使用它，以便我可以轻松地分离每种类型的组件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T06:40:04.097

C++ 中的继承有两个不同的目的：

1.  Mixins（向类添加*新*的、插入式行为，无需重复代码）。
    在这种情况下，基类本身没有什么意义——它的目的是支持新的行为，而***不是***用作所有子类之间的公共基类。

2.  多态性（扩展基类中已经*声明*的行为）。
    在这个场景中，基类为所有子类提供了一个通用接口，yada yada。

CRTP 一般用于第一个目的，`virtual`用于第二个目的。
认识到两者之间的区别并不容易，需要一些练习。

有时，您可以使用两者来实现相同的目标——不同之处仅在于“多态性”是静态的（在编译时）还是动态的（在运行时）。
如果您不需要运行时多态性，那么您通常会使用 CRTP，因为它通常更快，因为编译器可以在编译时看到正在发生的事情。

也就是说，CRTP 被广泛使用，以至于我不敢说它上面有“太多的仇恨”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T01:02:54.143

我在 C++、Java 和 C# 中都广泛使用了 CRTP 及其一些变体，从“同事反馈”中我可以告诉你一件事：很多人根本不理解它，并自动对“如此过于复杂”产生敌意废话”。

在有人使用它几次之前，人们真的很难看到它的好处——就像他们看到的任何其他“复杂”“新”机制一样。

的确，有时它会被用在错误的地方，并且必须在使用时特别注意细节——但这就是任何重要工具的生命。就像多重继承一样——很多人讨厌它。但是你怎么能讨厌锤子呢？没有什么可恨的，只要在真正有益的地方正确使用它，而不仅仅是因为你可以。

首先，重新考虑是否真的需要使用它。模板基类真的需要知道确切的派生类型吗？虚拟会员还不够吗？没有它你能逃脱吗？你的情况有什么好处？它会使“更高级别的代码”更短、更易读、更明显或更可扩展或更不容易出错吗？

在很多情况下，你会发现基类不需要知道确切的派生类型，你可以用更多的几个虚方法来代替它。但这可能会使整体代码对更多用户来说更加复杂。另一方面，使用 CRTP，最终机制更 .. '自动'，这有时实际上是无益的。

对于实体类，通常 CRTP 的某些变体实际上是有原因的：如果您的基础公开了一些返回“相似”对象的实用方法，您通常希望这些方法返回精炼的“MyObject*”而不是“ObjectBase*”，那就是没有它很难实现。但是，真正的问题是：这些方法真的应该在实体的基类中，而不是在“工厂”、“经理”或“存储上下文”中吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T00:22:27.817

CRTP 对CRTP 类的使用引入了编译器无法检查的限制，即它可能不是类型安全的。以下面为例。

```
#include <iostream>
using namespace std;

class Base {
public:
    virtual ~Base() {}
    virtual Base *copy() = 0;
    virtual void SayHello() = 0;
};

template <typename Derived>
class BaseCopy: public Base {
public:
    virtual Base *copy()
    {
        return new Derived(static_cast<Derived const&>(*this));
    }
}; 
```

如果 Base 类的用户不知道限制使用并声明

```
class Bar: public BaseCopy<Bar> { public: void SayHello(void) { cout << "Hello, I am Bar\n";} };
class Foo: public BaseCopy<Bar> { public: void SayHello(void) { cout << "Hello, I am Foo\n";} };

int main(void)
{
    Foo *foo = new Foo;
    Base *foo2 = foo->copy(); // What is foo2?
    foo->SayHello();
    foo2->SayHello();
    delete foo2;
    delete foo;

    return 0;
} 
```

用例如编译这个。克++

```
g++ -Wall -g main.cpp -o CRTP-test.exe 
```

将毫无问题地编译，但调用`foo->copy();`将调用未定义的行为，因为结果将是从 Foo 构造的 Bar。

//jk

# css - firefox是怎么做css渲染的

> ID：15149886
> 
> 赞同：4
> 
> 时间：2013-03-01T03:16:12.603
> 
> 标签：css, firefox, rendering, gecko

可能有点学术。我正在尝试找出有关浏览器中 css 渲染的详细信息。我知道 Gecko 和 Webkit 都使用哈希映射、样式共享来加速 css 选择器匹配。

在下面的文章中，它还说firefox使用规则树和样式上下文树进行css渲染，而Webkit没有。我想知道这两棵树的作用/意义是什么。他们是否加快了选择器匹配、节省内存或其他什么？（Webkit 在没有规则树的情况下运行良好。那么，这两个核心在 css 渲染中有什么区别？）

浏览器如何工作：[http ://taligarsiel.com/Projects/howbrowserswork1.htm](http://taligarsiel.com/Projects/howbrowserswork1.htm)

这是我可以找到的另一篇关于 firefox css 渲染的文章，它可能会有所帮助。

Mozilla 风格系统文档：[http ://www-archive.mozilla.org/newlayout/doc/style-system.html](http://www-archive.mozilla.org/newlayout/doc/style-system.html)

# javascript - 如何使用 cache.manifest 让 ChillBox（LightBox 克隆）在离线 web 应用程序上工作？

> ID：15149887
> 
> 赞同：2
> 
> 时间：2013-03-01T03:16:17.877
> 
> 标签：javascript, jquery, ipad, lightbox2, cache-manifest

我正在为 iPad 构建一个网络应用程序（旨在让我的老板可以在会议上显示信息）。到目前为止，我一切正常，除了一件事——我正在使用应用程序缓存来允许应用程序离线工作（cache.manifest），并且由于某种原因，当我离线时，我无法获得任何类型的灯箱类型脚本工作。
当我连接到互联网时，一切都按需要运行，但是一旦我断开连接，图像就会在 Safari 的新页面上打开，而不是在灯箱中显示。
目前我正在使用 ChillBox（[http://www.chillwebdesigns.co.uk/chillbox](http://www.chillwebdesigns.co.uk/chillbox)），但我也使用过 SlimBox，它也有同样的问题。（我尝试了 LightBox 2，但由于其他原因失败了。）

我的清单中有所有图像，以及所有 .js 文件。链接的格式都是这样的：

```
<a href="path/to/image.gif" rel="ChillBox" title="A title" class="lb">
    <img src="path/to/image.gif" alt="" />
</a> 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:46:05.557

问题似乎解决了。我在它应用到的一组链接之后加载了 chillbox.js 内联。这在线工作，但离线失败。将 js 的链接放在父文件的头部似乎已经解决了这个问题！

# css - css3 媒体查询响应式设计

> ID：15149892
> 
> 赞同：1
> 
> 时间：2013-03-01T03:17:34.707
> 
> 标签：css, responsive-design

我目前正在使用 css3 媒体查询来构建布局。我有所有的媒体查询工作，但设计中有一个小“怪癖”。我将提供以下代码：

```
@media (min-width: 1200px) {
    #LeftNav, #RightNav {display:block;}
    #MidCol {background:#ff0000;}
}

@media (min-width: 980px) and (max-width: 1199px) {
    #LeftNav, #RightNav {display:block;}
    #Midcol {background:#ff0000;}
}

@media (min-width: 768px) and (max-width: 979px) {
    #MidCol {background:#00ff00;}
} 
```

我的问题与这些媒体查询有关。我正在使用非常简单的样式从一种布局过渡到另一种布局。首先，红色背景显示正确。一旦我开始调整屏幕大小，我应该会从红色变为绿色，但这不是我得到的。我变红了，然后根本没有颜色，然后是绿色。

有人可以向我解释我的媒体查询做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:20:32.713

错字：

```
#Midcol {background:#ff0000;} 
```

你需要`#MidCol`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:21:09.247

如果您的代码与发布的*完全相同*，那是因为您`#Midcol`在 980-1199 媒体查询中输入错误。

# javascript - 将有关选定元素的信息收集到对象数组

> ID：15149893
> 
> 赞同：-1
> 
> 时间：2013-03-01T03:17:39.423
> 
> 标签：javascript, jquery

我有这种标记：

```
<span class="makearray">click me</span>
<div id="container">
    <ul>
        <li class="noindex"><span class="txt">blahblah</span></li>
        <li class="noindex"><span class="txt">blahblah</span></li>
        <li class="index"><span class="txt">text1</span>
            <ul>
                <li class="index"><span class="txt">text2</span>
                    <ul>
                        <li class="noindex"><span class="txt">blahblah</span></li>
                        <li class="index"><span class="txt">text3</span></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

当我单击`.makearray`元素时，我想收集关于我的所有`.txt`元素的信息，这些元素是列表项的第一个子元素（可能使用 Jquery**方法**？）并制作这个数组： `.index``.index()`

```
var info = [{
    "index": "1",
    "txtcontent": "text1"
}, {
    "index": "2",
    "txtcontent": "text2"
}, {
    "index": "3",
    "txtcontent": "text3"
}] 
```

其中`index`property是一个整数，表示`.index > .txt:first-child`元素在`.container`元素中的位置，并且是应用于该元素`txtcontent`的Jquery方法的结果。 注意：元素可能有属性，我什至可以动态插入新元素，所以每次点击 时，都必须将现有数组替换为新数组（即从头开始重建）。 `text()`
`txt``contenteditable``li.index``ul``.makearray`

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:21:34.880

您可以使用[子组合`>`](http://www.w3.org/TR/css3-selectors/#child-combinators)器来定位跨度，并使用 jQuery[`.map`](http://api.jquery.com/jQuery.map/)来构建数组：

```
var arr = $('.index > .txt').map(function(i,el){
    return {
        index : i,
        txtcontent : el.textContent
    };
});
console.log(arr); 
```

[http://jsfiddle.net/39VyA/1/](http://jsfiddle.net/39VyA/1/)

# ruby-on-rails - Rails 如何在 collection_select 中引用 has_one

> ID：15149898
> 
> 赞同：1
> 
> 时间：2013-03-01T03:18:22.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

首先，这是我的模型：

```
class User < ActiveRecord::Base
        has_one :event
    has_one :user_details, :dependent => :destroy
        accepts_nested_attributes_for :user_details, :event
end

class UserDetails < ActiveRecord::Base
    belongs_to :user

    def full_name
        [self.first_name, self.last_name].compact.join(' ')
    end
end

class Event < ActiveRecord::Base
    belongs_to :user
end 
```

我的观点之一是这条线

```
<%= collection_select(:event, :user_id, User.all, :id, :email) %> 
```

它工作得很好，并在下拉列表中显示所有用户的电子邮件。但我要显示的是下拉列表中的用户全名，它是 user_details 模型的一部分。

我怎样才能做到这一点？

```
# basically i need to change :email to something like :user_details.full_name, but i'm not sure how.
<%= collection_select(:event, :user_id, User.all, :id, :email)  %> 
```

**编辑**

我试过了：

```
# undefined method `full_name' for :user_details:Symbol
<%= collection_select(:event, :user_id, User.all, :id, :user_details.full_name)  %>

# This shows the dropdown with a bunch of UserDetails objects aka #<UserDetails:asfjoisdfa>
<%= collection_select(:event, :user_id, User.all, :id, :user_details)  %>

# undefined method `full_name' for #<User:0x007ff18bf0c470>
<%= collection_select(:event, :user_id, User.all, :id, :full_name)  %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:59:44.897

使用以下

```
<%= collection_select(:event, :user_id, User.all, :id, :full_name)  %> 
```

但是您必须`full_name`在用户模型上声明该方法。

```
# user.rb
def full_name
  user_details.full_name
end 
```

或者你可以使用委托

```
delegate :full_name, to: :user_details 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T03:24:10.523

尝试：

```
<%= link_to "#{user.user_details.full_name}", "mailto:#{email}" %> 
```

在你看来，让我知道你是怎么过的……

**编辑** 在您的 user.rb 文件中定义一个返回 user_details.full_name 的辅助方法并使用它：

`<%= collection_select(:event, :user_id, User.all, :id, :*method_returning_user_details.full_name* %>`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T03:36:34.340

试试看：
这在你看来

**更新：**

```
 <% @fullname = User_details.fullname %> 
```

在你的 collection_select

```
 <%= collection_select(:event, :user_id, User.all, :id, @fullname) %> 
```

并告诉我进展如何。

# c - 两个程序之间的信号

> ID：15149899
> 
> 赞同：4
> 
> 时间：2013-03-01T03:18:22.337
> 
> 标签：c, signals

如果一个程序向第二个程序发送信号，那么第二个程序能否仅通过它发送的信号找出第一个程序的pid是什么？

第一个程序：（代码不完整，信号是重点）

```
#include<stdio.h>
#include<stdlib.h>
#include<signal.h>
#include<unistd.h>
#include<time.h>

void my_handler(int);

int main(int argc, char *argv[]){

    FILE *fp;
    fp=fopen(argv[1], "w");

    kill(atol(argv[2]),SIGUSR1);
} 
```

第二个程序：

```
#include<stdio.h>
#include<stdlib.h>
#include<signal.h>
#include<unistd.h>
#include<time.h>

void my_handler(int signum){
            if (signum == SIGUSR1)
            {
                    printf("Received SIGUSR1!\n");
            }
}

int main(int argc, char *argv[]){
    int pid;
    pid=getpid();
    printf("PID: %d\n", pid);

    signal(SIGUSR1, my_handler);

    pause();
} 
```

有办法吗？或者我应该以`SIGUSR1`某种方式将第一个程序的 pid 放入第二个程序可以找出 pid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:13:22.890

假设您在一个与 POSIX 充分兼容的系统上，那么如果您使用 设置信号处理[`sigaction()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigaction.html)，如果您指定一个采用`siginfo_t`指针的信号处理程序，并且您将 SA_SIGINFO 指定为标志之一，那么您可以获得信息：

```
#include <errno.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

static siginfo_t sig_info;
static volatile sig_atomic_t sig_num;
static void *sig_ctxt;

static void catcher(int signum, siginfo_t *info, void *vp)
{
    sig_num = signum;
    sig_info = *info;
    sig_ctxt = vp;
}

static void set_handler(int signum)
{
    struct sigaction sa;
    sa.sa_flags = SA_SIGINFO;
    sa.sa_sigaction = catcher;
    sigemptyset(&sa.sa_mask);

    if (sigaction(signum, &sa, 0) != 0)
    {
        int errnum = errno;
        fprintf(stderr, "Failed to set signal handler (%d: %s)\n", errnum, strerror(errnum));
        exit(1);
    }
}

static void prt_interrupt(FILE *fp)
{
    if (sig_num != 0)
    {
        fprintf(fp, "Signal %d from PID %d\n", sig_info.si_signo, (int)sig_info.si_pid);
        sig_num = 0;
    }
}

int main(void)
{
    set_handler(SIGINT);
    pause();
    prt_interrupt(stdout);
    return(0);
} 
```

编译为“catch”并运行：

```
$ ./catch &
[1] 31165
$ kill -2 31165
Signal 2 from PID 26983
$ echo $$
26983
[1]+  Done                    ./catch
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:24:14.427

假设您的意思是 POSIX 信号，那么是的。`si_pid`您可以通过 的成员访问发件人的 PID [`siginfo_t`](http://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html)，但您需要使用`sigaction`和`SA_SIGINFO`标志来定义您的处理程序。

非 POSIX 系统（例如 Windows）甚至可能没有信号的概念（至少在 POSIX 意义上没有），因此这些都不适用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T04:02:36.933

您可以在两个进程之间创建共享内存。从第一个进程开始，使用 getpid() 获取 pid，并将其保存到共享内存区域。

```
ShmID   = shmget(PidKey, sizeof(pid_t), IPC_CREAT | 0666);
ShmPTR  = (pid_t *) shmat(ShmID, NULL, 0); 
```

在第二个进程中，在您的处理程序中，只需将您的 c 程序附加到共享内存区域。

```
void my_handler(int signum)
{
 if (signum == SIGUSR1)
 {

  ShmID   = shmget(PidKey, sizeof(pid_t), 0666);
  ShmPTR  = (pid_t *) shmat(ShmID, NULL, 0);
  pid     = *ShmPTR
 }
} 
```

在程序结束时，清理共享内存。

```
shmdt(ShmPTR);
shmctl(ShmID, IPC_RMID, NULL); 
```

注意 - 上面的代码远未完成，没有使用信号量，也没有针对多处理器环境中的竞争条件采取其他措施。

# design-patterns - 哪种设计模式与汇编器模式相反？

> ID：15149900
> 
> 赞同：1
> 
> 时间：2013-03-01T03:18:36.037
> 
> 标签：design-patterns, domain-object

据我了解，Assembler 是一种用于将域对象转换为 DTO 的设计模式。

您将把用于将 DTO 转换为域对象的设计模式称为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T03:30:42.613

*数据传输对象*是（EAA 的 P）设计模式。汇编器只是其组件之一的名称。

我认为你可以在任何一个方向上使用术语 Assembler （另一个常用术语是*Mapper*）。或者你可以说 Assembler for domain object -> DTO 和**Disassember** for DTO -> domain object。

# c++ - Visual Studio 2010 是否支持在 Visual Studio 2005 中创建的 dll？

> ID：15149904
> 
> 赞同：0
> 
> 时间：2013-03-01T03:19:07.397
> 
> 标签：c++, visual-studio-2010, visual-studio

我将 Visual Studio 2010 用于 C++ 项目。我需要使用在 Visual Studio 2005 中创建的 dll 和 .lib 文件。可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:38:52.310

从不同版本的 Visual Studio 链接到库通常没问题。要记住几件事：

1) VS2005 库将针对 VS2005 C++ 运行时，因此需要在终端系统上安装 VS2005 和 VS2010 可再发行包。

2) 每个运行时管理自己的堆，因此一个运行时分配的内存不能被不同的运行时安全地释放。（不允许可执行文件释放库分配的内存。）

# java - Java JProgressBar 使用 Image

> ID：15149905
> 
> 赞同：3
> 
> 时间：2013-03-01T03:19:15.183
> 
> 标签：java, image, swing, jprogressbar, game-development

我正在用 Java 制作游戏，并且正在使用`JProgressBar`健康栏。我想为 . 使用图像（而不是颜色）`JProgressBar`，但我无法做到。我尝试过使用paint方法，`paintComponent`方法，创建一个新类，但它不起作用。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T03:38:22.863

无需创建自己的`ProgressBarUI`实现，您可以简单地创建自己的......

这个例子本质上是用一个单一的药水图像制作一个“药水条”，然后根据当前进度渲染一个子图像。

让它只显示整个药水并不需要太多......

![在此处输入图像描述](../Images/d381fdc5cc8201d7bd83d8b04bffb753.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.text.NumberFormat;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ProgressPane {

    public static void main(String[] args) {
        new ProgressPane();
    }

    public ProgressPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private float progress = 1f;
        private BufferedImage potion;
        private BufferedImage potionBar;

        public TestPane() {
            try {
                potion = ImageIO.read(getClass().getResource("/Potion.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            setOpaque(false);

            setForeground(Color.BLUE);
            setBackground(Color.GRAY);

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress -= 0.01;
                    if (progress <= 0.001) {
                        ((Timer) e.getSource()).stop();
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public void invalidate() {
            super.invalidate();
            potionBar = null;
        }

        @Override
        public Dimension getPreferredSize() {
            FontMetrics fm = getFontMetrics(getFont());
            return new Dimension(200, Math.max(50, fm.getHeight() + 4));
        }

        protected void createPotionBar() {

            if (potionBar == null) {
                if (getWidth() > 0 && getHeight() > 0) {
                    FontMetrics fm = getFontMetrics(getFont());
                    int height = Math.max(50, fm.getHeight() + 4);
                    potionBar = new BufferedImage(getWidth() - 4, height, BufferedImage.TYPE_INT_ARGB);
                    Graphics2D g2d = potionBar.createGraphics();
                    int x = 0;
                    int y = (height - potion.getHeight()) / 2;
                    while (x < getWidth() - 4) {
                        g2d.drawImage(potion, x, y, this);
                        x += potion.getWidth();
                    }
                    g2d.dispose();
                }
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            createPotionBar();
            super.paintComponent(g);

            int width = getWidth() - 4;
            int height = getHeight() - 4;
            int x = 2;
            int y = 2;

            g.setColor(getBackground());
            g.fillRect(x, y, width, height);
            g.setColor(Color.BLACK);
            g.drawRect(x, y, width, height);

            int progressWidth = (int) (width * progress);
            BufferedImage progressImage = potionBar.getSubimage(0, 0, progressWidth, potionBar.getHeight());
            g.drawImage(progressImage, x, y, this);

            FontMetrics fm = g.getFontMetrics();
            String value = NumberFormat.getPercentInstance().format(progress);
            x = x + ((width - fm.stringWidth(value)) / 2);
            y = y + ((height - fm.getHeight()) / 2);

            g.setColor(Color.WHITE);
            g.drawString(value, x, y + fm.getAscent());

        }
    }
} 
```

# google-apps-script - 如何在电子表格窗口左侧加载 UI

> ID：15149906
> 
> 赞同：0
> 
> 时间：2013-03-01T03:19:19.060
> 
> 标签：google-apps-script

如何设置电子表格 UI 窗口出现在电子表格的左侧，如“命名和保护范围...”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T04:10:45.380

您所描述的元素称为侧边栏，它出现在从右到左阅读的语言中的左侧，而在其他语言中显示在右侧。

您还不能在表格中显示边栏元素。有关您可以执行的操作的详细信息，请参阅[扩展 Google 表格。](https://developers.google.com/apps-script/guides/sheets)

不过，您现在可以在 Documents 中执行此操作。请参阅[扩展 Google 文档中的自定义菜单和用户界面](https://developers.google.com/apps-script/guides/docs?hl=en#custom_menus_and_user_interfaces)，尤其是[`showSidebar()`](https://developers.google.com/apps-script/reference/base/ui#showSidebar%28Object%29)了解更多信息。

# jquery - 按钮在第二次单击 jQuery 时不起作用

> ID：15149908
> 
> 赞同：1
> 
> 时间：2013-03-01T03:19:26.900
> 
> 标签：jquery, button, webforms

我有一个按钮，可以在触发时切换弹出 iframe。代码是在 ASP.NET Webforms 和 jQuery 上编写的

但是，当我第二次尝试单击它时，它不再触发。我想知道这是什么原因。

这是jQuery代码。

```
<script type="text/javascript">
        $(function () {  
            var dStart = $("#MainContent_tbStart").val();
            var dEnd = $("#MainContent_tbEnd").val();
            var date = ("/Management/Site-Visit.aspx?StartDate=" + dStart + "&EndDate=" + dEnd);
            if (dStart != "") {
                $("#bSiteVisit").show();
                var SiteVisit = $("#iframeSiteVisit").html('<iframe id="iVisit" width="100%" height="100%" scrolling="yes"></iframe>');
                $("#iVisit").attr("src", date);
                SiteVisit.dialog({
                    autoOpen: false,
                    bgiframe: true,
                    height: 600,
                    width: 1200,
                    modal: true,
                    close: function (event, ui) {
                        $(this).dialog("destroy");
                        $("#iChart").remove();
                    }
                });
                $("#bSiteVisit").click(function (e) {
                    SiteVisit.dialog("open");
                    e.preventDefault();
                });
            } else {
                $("#bSiteVisit").hide();
            }
        });
    </script> 
```

这是 ASP.NET 代码。

```
<form id="form1" runat="server">
    <button id="bSiteVisit" type="submit">View Site Visit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:01:55.923

我想`e.preventDefault()`不会让你触发按钮的另一个点击事件。所以单击不会对提交按钮执行任何操作 - 不会提交表单。请修改它以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T05:51:43.993

## 当按钮在第二次单击事件中未唤醒时。

```
$(文档).ready(函数(e){

e.preventDefault();

});

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T01:06:11.777

该按钮也可以被禁用并且具有不那么明显的CSS。

# c++ - 尝试使用 /MT 而不是 /MD 重新编译第三方库时出错

> ID：15149910
> 
> 赞同：1
> 
> 时间：2013-03-01T03:19:41.847
> 
> 标签：c++, visual-studio, linker, static-libraries

我有一个项目，它有各种第三方库依赖项，其中一些是用 /MD 构建的，有些是用 /MT 构建的（因此不能混合使用）。为了解决这个问题，我正在尝试使用 /MT 重新编译其中一个库 (FLTK)。但是，在 FLTK 中的一些项目中，我遇到了如下链接错误：

```
1>fltkd.lib(fl_call_main.obj) : error LNK2001: unresolved external symbol ___argc
1>fltkd.lib(fl_call_main.obj) : error LNK2001: unresolved external symbol ___argv
1>fltkd.lib(fl_call_main.obj) : error LNK2001: unresolved external symbol ___wargv 
```

对此我能做些什么，或者这是否意味着库的代码是以静态运行时链接不可能的方式编写的？

编辑：

上例中目标文件的代码为：

```
#if defined(WIN32) && !defined(FL_DLL) && !defined (__GNUC__)

#  include <windows.h>
#  include <stdio.h>
#  include <stdlib.h>
#  include <FL/fl_utf8.h>

extern int main(int, char *[]);

#  ifdef BORLAND5
#    define __argc _argc
#    define __argv _argv
#  endif /* BORLAND5 */

static int mbcs2utf(const char *s, int l, char *dst)
{
  static xchar *mbwbuf;
  unsigned dstlen = 0;
  if (!s) return 0;
  dstlen = (l * 6) + 6;
  mbwbuf = (xchar*)malloc(dstlen * sizeof(xchar));
  l = (int) mbstowcs(mbwbuf, s, l);
  l = fl_utf8fromwc(dst, dstlen, mbwbuf, l);
  dst[l] = 0;
  free(mbwbuf);
  return l;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
                             LPSTR lpCmdLine, int nCmdShow) {
  int rc, i;
  char **ar;

#  ifdef _DEBUG

  AllocConsole();
  freopen("conin$", "r", stdin);
  freopen("conout$", "w", stdout);
  freopen("conout$", "w", stderr);
#  endif

  ar = (char**) malloc(sizeof(char*) * (__argc + 1));
  i = 0;
  while (i < __argc) {
    int l;
    unsigned dstlen;
    if (__wargv ) {
      for (l = 0; __wargv[i] && __wargv[i][l]; l++) {}; /* is this just wstrlen??? */
      dstlen = (l * 5) + 1;
      ar[i] = (char*) malloc(dstlen);
/*    ar[i][fl_unicode2utf(__wargv[i], l, ar[i])] = 0; */
      dstlen = fl_utf8fromwc(ar[i], dstlen, __wargv[i], l);
      ar[i][dstlen] = 0;
    } else {
      for (l = 0; __argv[i] && __argv[i][l]; l++) {};
      dstlen = (l * 5) + 1;
      ar[i] = (char*) malloc(dstlen);
/*      ar[i][mbcs2utf(__argv[i], l, ar[i], dstlen)] = 0; */
      ar[i][mbcs2utf(__argv[i], l, ar[i])] = 0;
    }
    i++;
  }
  ar[__argc] = 0;
  /* Run the standard main entry point function... */
  rc = main(__argc, ar);

#  ifdef _DEBUG
  fclose(stdin);
  fclose(stdout);
  fclose(stderr);
#  endif /* _DEBUG */

  return rc;
}

#elif defined(__hpux)
/* This code to prevent "empty translation unit" or similar warnings... */
static void dummy(void) {}
#endif /* WIN32 && !FL_DLL && !__GNUC__ */ 
```

# html - 图像有一个大的左边距没有设置

> ID：15149912
> 
> 赞同：3
> 
> 时间：2013-03-01T03:19:57.107
> 
> 标签：html, css, image, html-lists, margin

我正在尝试创建一个包含图像的列表，并排，每个都有其链接和悬停效果。一切正常，除了图像在某处创建了 142px 的左边距。

边距为 0（多次声明为`margin: 0`），并且使用 Firebug（Firefox 调试工具）表示图像的左边距为 142px。

代码如下（当然缩短了）：

```
<div id="">
    <ul>
        <li><a href=""><img src="" /><img class="bloom" src="" /></a></li>
        <li><a href=""><img src="" /><img class="bloom" src="" /></a></li>
        <li><a href=""><img src="" /><img class="bloom" src="" /></a></li>
    </ul>
</div> 
```

和CSS：

```
# {
    height: 185px;
    padding: 16px 0px;
    position: relative;
    width: 100%;
}

# ul {
    list-style: none;
    width: 951px;
}

# li {
    background: black; /*just to verify if the margin was on the LI or IMG*/
    float: left;
    height: 185px;
    margin: 0 16px;
    width: 285px;
}

# img {
    position: absolute;
}

# img.bloom {
    display: none;
    z-index: 1;
} 
```

“绽放”图像是悬停效果的一部分。如您所见， NOWHERE 设置了“剩余边距”，既不在此处也不在 css 中的任何地方。您可以在链接中看到它：[http](http://ranierialthoff.com.br/elite/) : //ranierialthoff.com.br/elite/ 页脚之前的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:25:45.093

这不是左边距，而是图像的位置。您的问题是您绝对定位图像而没有告诉浏览器将它们放在*哪里*。您需要添加`top: 0; left: 0;`或类似于您的`#unidades img`样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T03:30:29.497

我`text-align:center`在你的`#unidades li`元素中看到了。它将成为`img`中心。

您可以将其更改为`left`以解决您的问题。

如果你想集中他们。只需移入`position:absolute`并`#unidades img`保持`text-align:center`静止。

# linux - 管理超出所有可用 RAM 的数据结构

> ID：15149917
> 
> 赞同：2
> 
> 时间：2013-03-01T03:20:17.660
> 
> 标签：linux, memory-management, data-structures, inverted-index

从我之前的问题：[Data structure for storage large number of indices, each pointing to a set](https://stackoverflow.com/questions/14939480/data-structure-for-storing-huge-number-of-indices-each-pointing-to-a-set)中，我得到了关于反转索引实现的合适数据结构的答案。但是，问题是，我们的 Linux 服务器可能很快就会达到 128 GB RAM 的限制，所以我想做好准备，以防我们再次用完它的内存。

现在，我们在 invert 索引中的索引总数高达 39 亿，这需要大约 50 GB 的 RAM。请注意，虽然有些人可能会建议使用数据库系统等，**但这是用于实验研究，我们希望管理自己的数据，我们不会使用任何类型的数据库系统。**

我也被指出[什么时候应该使用 mmap 进行文件访问？](https://stackoverflow.com/questions/258091/when-should-i-use-mmap-for-file-access)虽然这看起来很有希望，但我四处搜索，发现我需要先为 mmap 分配一个固定空间，然后开始放入数据。然而，我的第一个问题 (1) 是因为我们有更大的数据，我知道我的反转索引会更大，但在我构建它之前我不知道确切的数字。（在将这些数据推送到反向索引之前需要先处理一些数据）我可以为它分配很多内存，但是嘿，我们已经获得了 50 GB 的 RAM 和当前的反向索引。这导致了第二个问题（2），我们的服务器有很多人在使用，并且有 50 GB 或更多的空间，我们的数据将在硬盘中四处分散。

或者，如果我使用文件 I/O 来管理它并制作一个像分层目录一样的 B 树呢？事情可能会变得丑陋...

所以这一次，我想征求一些建议，就像我之前的问题一样，但这一次，我需要在 RAM 和硬盘之间交换一些数据，我们的 128 GB RAM 可能无法容纳这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:31:39.547

如果可能的话，我会为系统添加更多交换空间并让内核负责交换。

如果不可能，我会考虑通过索引键将数据聚集在块中，而不是在访问时压缩/解压缩内存中的块，或者将它们交换到磁盘。

# javascript - 点击img后如何获取索引值

> ID：15149926
> 
> 赞同：2
> 
> 时间：2013-03-01T03:21:02.283
> 
> 标签：javascript, jquery, twitter

用实际代码解释我的问题可能更容易。

```
<script type='text/javascript' src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<script type='text/javascript'>
    var username_array = [];
    var text_array = [];
    var virtual_name;

    $(document).ready(function(){
    document.body.style.backgroundColor= "rgb(0, 188, 237)";
    var name = prompt("Please enter your name.");
    if(name!=null){
    x = "Hello " + name + "!";
    a = document.createElement("p");
    a.innerHTML=x;
    document.body.appendChild(a);
    b = document.createElement("p");
    b.addEventListener('click',question,false);
    b.style.cursor='pointer';
    b.style.textDecoration="underline";
    b.innerHTML="Check out what you look like on Twitter."
    document.body.appendChild(b);
    }

    function question () {
        $.ajax({
            url: 'http://search.twitter.com/search.json?q='+name+'&callback=?&rpp=5',
            type: 'GET',
            dataType: 'json',
            success: function (data){
                    for(i=0;i<data.results.length;i++) {
                        pic = data.results[i].profile_image_url;
                        var img = document.createElement("img");
                        img.setAttribute("id", "profile"+i);
                        img.src=pic;
                        img.width=50;
                        img.height=50;
                        img.addEventListener('click', realname, false);
                        img.style.cursor='pointer';
                        document.body.appendChild(img);
                        username = data.results[i].from_user_name;
                        username_array.push(username);
                        text = data.results[i].text;
                        text_array.push(text);
                        sequence = i;
                    }
                check_array();
            }
        })
        c = document.createElement("p");
        c.innerHTML="Which one is you?"
        document.body.appendChild(c);
    }
    });

    function check_array() {
    }

    var sequence;

    function realname() {
        i=Math.floor(Math.random()*5);
        d = document.createElement("p");
        d.innerHTML="Here is your virtual name: " + username_array[i];
        document.body.appendChild(d);

        e = document.createElement("p");
        e.innerHTML= username_array[i] +" actually has something to say to you:";
        e.style.textDecoration="underline";
        e.addEventListener('click',say,false);
        e.style.cursor="pointer";
        document.body.appendChild(e);

        sequence = i;
    }
</script> 
```

我遇到的问题是这一行：

```
function realname() {
        i=Math.floor(Math.random()*5);
 ...} 
```

和

```
img.addEventListener('click', realname, false); 
```

理想情况下，我希望用户单击 img，我可以获取它的索引值并将其传递给 realname 函数，这样我就可以从 data.result 中获取与配置文件图像匹配的正确用户名。现在，我在函数 realname 中生成的随机“i”只是为了让某些东西出现而伪造的。

我不确定我是否解释得足够清楚。谢谢任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:47:14.977

这是您打算做的一个工作示例：http: [//jsfiddle.net/whizkid747/f77Ym/](http://jsfiddle.net/whizkid747/f77Ym/)

我改变了将点击事件附加到动态生成的图像的方式：

```
$("img").click(function(event){
    //alert(event.target.id);
    realname(event.target.id.replace("profile",""));

    }); 
```

此代码将在 DOM 中的所有图像上附加点击事件。您可能需要更改它，以便单击仅附加到特定 div 中的图像。现在从图像的 id 中删除字符串配置文件，以便您获得索引号。

尽管这个示例有效，但您正试图以一种非常复杂的方式来完成此操作，如果您以 jQuery 方式思考，则可以用更少的复杂性和代码编写此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:55:34.517

试试这个，我对 dom 操作进行了一些更改，以将它们转换为使用 jQuery

```
var username_array = [];
var text_array = [];
var virtual_name;

$(function() {
            $('body').css('background-color', rgb(0, 188, 237));

            var name = prompt("Please enter your name.");
            if (name != null) {
                x = "Hello " + name + "!";

                $('<div>' + x + '</div>').appendTo('body');

                $('<p>' + "Check out what you look like on Twitter." + '</p>')
                        .appendTo('body').css({
                                    cursor : 'pointer',
                                    textDecoration : "underline"
                                }).click(question);
            }

            function question() {
                $.ajax({
                            url : 'http://search.twitter.com/search.json?q='
                                    + name + '&callback=?&rpp=5',
                            type : 'GET',
                            dataType : 'json',
                            success : function(data) {
                                for (i = 0; i < data.results.length; i++) {
                                    pic = data.results[i].profile_image_url;

                                    $('<img class="proile-pic" id="' + "profile" + i + '"></img>')
                                            .appendTo('body').attr('src', pic)
                                            .attr('width', 50).height('width',
                                                    50)
                                            .css('cursor', 'pointer').click(
                                                    function() {
                                                        var index = $('.proile-pic').index(this);
                                                        realname(index);
                                                    });

                                    username = data.results[i].from_user_name;
                                    username_array.push(username);
                                    text = data.results[i].text;
                                    text_array.push(text);
                                    sequence = i;
                                }
                                check_array();
                            }
                        })
                c = document.createElement("p");
                c.innerHTML = "Which one is you?"
                document.body.appendChild(c);
            }
        });

function check_array() {
}

var sequence;

function realname(i) {
    d = document.createElement("p");
    d.innerHTML = "Here is your virtual name: " + username_array[i];
    document.body.appendChild(d);

    e = document.createElement("p");
    e.innerHTML = username_array[i] + " actually has something to say to you:";
    e.style.textDecoration = "underline";
    e.addEventListener('click', say, false);
    e.style.cursor = "pointer";
    document.body.appendChild(e);

    sequence = i;
} 
```

# css - （Firefox、Cometbird、Explorer）当元素由 javascript/jquery 制作时，悬停不起作用

> ID：15149927
> 
> 赞同：2
> 
> 时间：2013-03-01T03:21:07.710
> 
> 标签：css, hover

悬停不工作。我在 Firefox 19.0、Cometbird 11.0、Explorer 9 上对此进行了测试。

我测试过的唯一可以工作的浏览器是 Chrome 25。

这段代码是做什么的？

首先，当鼠标悬停在元素#wrap_req 上时，它会调用一个函数，告诉在#wrap_req 中添加html 内容。

```
<span id='cancelReq' ></span> 
```

然后当鼠标悬停到元素#cancelReq 时，该元素的背景必须改变。

```
<script language="JavaScript">
    function mOver(x)
    {   
        var txt = 'cond1';      //let's say it this way to satisfies the IF

        if(txt == 'cond1')          
        {
            var txt2 = "<span id='cancelReq' ></span>";
            $('#wrap_req').html(txt2);
            $('#cancelReq').css('display', x);  

        }   
    }   
</script> 
```

CSS

```
<style>
    #wrap_req{width:193px; margin:0 auto; border:1px solid red;}
    #cancelReq{display:none; background-image:url(../images/cancel.png); }  
    #cancelReq:hover{background-image:url(../images/cancel2.png);}  
</style> 
```

HTML

```
<div id='wrap_req' onmouseover=\"mOver('block')\" onmouseout=\"mOver('none')\" >

</div> 
```

我尝试将下面的代码添加到函数 mOver() 的 IF 语句中。

如果，我添加警报（），它工作正常。背景图像发生变化。

但我不需要使用那个 alert();

```
$('#cancelReq').hover(                          
    function
    {           
        //alert('entered Friends');
        $('#cancelReq').css('background', '#eeeeee');
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:59:31.983

首先，我建议您使用[addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)方法或 jQuery 的[on](http://api.jquery.com/on/)或[live](http://api.jquery.com/live/)绑定您的事件。它比编写内联 JavaScript 更容易、更简洁。

我认为您的问题在于它`#cancelReq`是一个动态创建的 DOM 元素，并且您在创建*之前绑定了*[.hover](http://api.jquery.com/hover/)事件。您可以使用 jQuery 的[.live()](http://api.jquery.com/live/)方法或在创建 DOM 元素时绑定事件。

 *我了解到您想切换`span`元素背景的可见性和颜色？如果是这种情况，您可以通过*专门*使用 CSS 来管理它，这样对代码的性能和可维护性会更好。*

# pthreads - 一个很好的 C 库，用于在嵌入式 linux 中使用 GSM 模块加速 AT 命令？

> ID：15149929
> 
> 赞同：3
> 
> 时间：2013-03-01T03:21:14.433
> 
> 标签：pthreads, embedded-linux, gsm, at-command, gprs

我曾经使用 Telit 的 GM862-QUAD-PY 模块（链接在这里：[http](http://www.telit.com/en/products.php?p_ac=show&p=4) ://www.telit.com/en/products.php?p_ac=show&p=4 ）。这个模块有一个内置的 Python 解释器。长期以来，我将其作为单模块 GSM/GPRS 解决方案使用。我基本上编写 Python 脚本，向模块本身的 GSM 部分发送和接收 AT 命令。使用 Python，我还可以访问它的 GPIO 引脚、UART、bitbanging SPI 和 I2C 总线。

但是，这个 python 解释器有很大的局限性。它只适用于小型项目。不支持线程或任何类型的中断或信号。所以写的python程序必须有一个大的超级循环。在我的应用程序中，GM862 模块从 UART 读取传入数据并对其进行处理并将它们上传到 GPRS 服务器。同时，它还读取从 SMS 或 GPRS 服务器发送的命令。随着越来越多的用户使用我的系统（这意味着 UART 上的更多数据和系统的 SMS 命令更多），超级循环变得越来越慢。优化 python 程序并没有多大帮助，甚至会混淆我的代码。

最后，我决定切换到嵌入式 linux 平台。Telit 有 GE863-PRO，它是一个嵌入式 linux 版本的 GSM/GPRS 模块，但它的开发套件很难获得。现在我在看 Beaglebone。我将使用普通的 AT 命令方式使用 GM862-QUAD-PY。但是，AT 命令处理起来很慢。某些命令可能需要 15 秒才能完成。在原始 Python 代码中，我只是等到有 AT 响应。之后，我会做一些不涉及 AT 命令的事情。

由于我现在在 linux 中并且可以使用 Pthreads，因此我想充分利用 GS​​M 模块并增加其吞吐量。这是我最初的想法。我创建了一个 AT 命令挂起队列。队列中的每个元素都由 AT 命令本身和一个回调函数组成。我创建了一个线程，该线程从该队列中获取 AT 命令并通过 UART 发送出去，然后线程轮询响应。当有响应时，线程会调用回调函数。

因为我是嵌入式 linux 和 Pthreads 的新手，所以我想知道这是否是实现 GSM/GPRS 模块的高利用率的最佳方式，以及是否有任何我可以利用的好的现有库。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T22:36:26.353

您的解决方案肯定会奏效。如果您从未使用过 linux 和 pthreads，那么这是一个学习如何使用它们的好项目。

我不能说它会很快，因为一些 AT 命令可能需要几秒钟才能运行。我将首先使用串行终端来调整您的 AT 命令，看看是否值得更改实现您的挂起队列。

如果您通过 GPRS 连接到服务器，您应该查看 ppp。

# android-layout - 如何更改选项卡指示器图像的背景？

> ID：15149933
> 
> 赞同：1
> 
> 时间：2013-03-01T03:21:35.303
> 
> 标签：android-layout, android-widget, android-tabhost, android-button, android-icons

![StyleMe 的图片是 style_link](../Images/6cdaf3acb8b472df32b36030b433a512.png)

这是一张图片。我想要这样的 tabview 图像背景。当它未被选中时，它显示白色图像，当它被选中时，它显示绿色图像。

这是代码：

```
Resources resources = getResources();
TabHost tabhost = getTabHost();
Intent one = new Intent().setClass(this, StyleMe.class);
TabSpec tb1=tabhost.newTabSpec("One").setIndicator("",resources.getDrawable
(R.drawable.style_link)).setContent(one); 
tabhost.addTab(tb1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:53:36.693

更好的解决方案是使用带有选择器的背景，因此您不必检查 onTabChanged 并进行手动更新。：

```
private void initTabsAppearance(TabWidget tabWidget) {
    // Change background
    for(int i=0; i < tabWidget.getChildCount(); i++)
        tabWidget.getChildAt(i).setBackgroundResource(R.drawable.tab_bg);
} 
```

其中 tab_bg 是带有选择器的 xml 可绘制对象：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:state_selected="true" android:drawable="@drawable/tab_bg_selected" />
    <item android:drawable="@drawable/tab_bg_normal" />
</selector> 
```

希望这会有所帮助。

# random - 想要生成随机数。模拟掷骰子

> ID：15149934
> 
> 赞同：0
> 
> 时间：2013-03-01T03:21:35.380
> 
> 标签：random, numbers, generator, dice

我正在尝试加载两个数组。代表掷骰子的可能结果（1-6）。第一个数组加载了第一个骰子结果和第二个数组......我正在努力将两个数组保持在一个循环中，以管理骰子滚动的次数，而不是生成重复的结果。相信我需要在每卷之间重新播种，任何帮助将不胜感激。

电流输出： 骰子一：5 骰子二：5 骰子一：3 骰子二：3 骰子一：1 骰子二：1 骰子一：6 骰子二：6 骰子一：6 骰子二：6 骰子一：2 骰子二： 2 骰子一：5 骰子二：5 骰子一：2 骰子二：2 骰子一：1 骰子二：1 骰子一：1 骰子二：1 第二个骰子总是匹配第一个

我写如下：

```
int min = 1;
    int max = 6;
    for (int i = 0; i < 10; i++)
    {
        Random rand;
        rand = new Random();

        int randomNumber = rand.nextInt(max) + min;
        diceOne[i] = randomNumber;
        System.out.print("Dice one: ");
        System.out.print(diceOne[i] + " ");

        int randomNumber2 = rand.nextInt(max) + min;

        diceTwo[i] = randomNumber2;
        System.out.print("Dice two: ");
        System.out.print(diceOne[i]);
        System.out.println(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:43:45.127

diceTwo 从不使用。试试下面的代码

```
 int randomNumber = rand.nextInt(max) + min;
            diceOne[i] = randomNumber;
            System.out.print("Dice one: ");
            System.out.print(diceOne[i] + " ");

            int randomNumber2 = rand.nextInt(max) + min;

            diceTwo[i] = randomNumber2;
            System.out.print("Dice two: ");
            System.out.print(diceTwo[i]); //System.out.print(diceOne[i]);
            System.out.println(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:27:39.713

好吧，看起来你两次都打印出来`diceOne[i]`了。

# ios - 对 initWithCoder 和自定义 UIViews 感到困惑

> ID：15149935
> 
> 赞同：9
> 
> 时间：2013-03-01T03:21:35.703
> 
> 标签：ios, ios6

我正在尝试创建一个自定义`UIView`，从 nib 文件中引入它的视图。

在我的控制器中，我有类似的东西：

```
self.arcView=[[JtView alloc] initWithCoder:self];
self.arcView.backgroundColor=[UIColor redColor];
self.arcView.frame=CGRectMake(30.0f,200.0f, 100.0f, 100.0f);
[self.view addSubview:self.arcView]; 
```

我的第一个问题是应该讨论什么`initWithCoder (NSCoder *)`？我尝试了 self 但得到了不兼容的指针类型，但这似乎有效。但是关于问题#2：

其次，论点是您在将自定义视图放入框架时`initWithCoder`使用`nibs`和。`initWithFrame`好吧，我想`nib`在我的自定义视图中加载一个，然后将它放入一个框架中。我可以像上面那样添加一个框架就可以了（看起来它可以工作）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T03:25:59.650

`initWithCoder`被调用了很多之前`init`和`viewDidLoad`方法。而你永远不会调用它。当您从`mainBundle`.

但是，它`NSCoder`作为参数接收。检查它是如何在类中调用的：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        [self baseClassInit];
    }
    return self;
}

- (void)baseClassInit {

    //initialize all ivars and properties    
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T03:26:07.433

您正在以相反的方式进行操作：应该调用的不是您`initWithCoder:`，而是执行此操作的`loadNibNamed:owner:`方法的实现。

您需要在代码中做的是调用

```
UIView *view = [[[NSBundle mainBundle] loadNibNamed:@"theNIB" 
                                              owner:self 
                                            options:nil] objectAtIndex:0]; 
```

这将解开NIB，并调用您的`initWithCoder:`初始化程序，并为您提供所有已连接插座的视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:45:41.540

```
self.arcView = [[[NSBundle mainBundle] loadNibNamed:@"JtView" owner:self options:nil] objectAtIndex:0];
self.arcView.frame = CGRectMake(30.0f,200.0f, 100.0f, 100.0f);
self.arcView.backgroundColor = [UIColor redColor];
[self.view addSubview:self.arcView]; 
```

这将起作用并且不要调用`initWithCoder:`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-08T16:44:55.717

永远不要显式调用 initWithCoder，它会在取消归档归档对象并初始化对象 ivars 和属性时隐式调用 - 归档对象可以是保存在持久性存储中的自定义模型类或从 xib 文件加载的自定义视图。

在您的课程中，您似乎正在尝试创建自定义视图，因此请从 xib 文件中加载它，以供参考 @dasblinkenlight 代码是一个完美的解决方案。

# wolfram-mathematica - Mathematica，嵌套优化

> ID：15149937
> 
> 赞同：6
> 
> 时间：2013-03-01T03:21:37.133
> 
> 标签：wolfram-mathematica

我想在另一个函数中使用定义为函数的最大化解决方案。这是一个例子：

```
f1[y_] := x /. Last[Maximize[{Sin[x y], Abs[x] <= y}, x]]  (* or any other function *) 
```

这个定义很好，例如如果我给`f1[4]`，我得到答案`-((3 \[Pi])/8)`。

问题是当我想在另一个函数中使用它时出现错误。例如：

`FindRoot[f1[y] == Pi/4, {y, 1}]`

给我以下错误：

> ReplaceAll::reps: {x} 既不是替换规则列表也不是有效的调度表，因此不能用于替换。>>
> 
> FindRoot::nlnum：函数值 {-0.785398+(x/.x)} 不是在 {y} = {1.} 处具有维度 {1} 的数字列表。>>

我已经为此苦苦挣扎了好几天了！任何评论、想法、帮助……都非常感谢！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:46:17.457

当`y`不是数字时，您`Maximize`无法解析，在这种情况下，`Last`它的元素是`x`，这就是您收到奇怪错误消息的原因。您可以通过清除错误定义`f1`并创建一个新定义来确保仅评估数字参数来解决此问题：

```
ClearAll[f1]
f1[y_?NumericQ] := x /. Last[Maximize[{Sin[x y], Abs[x] <= y}, x]]

FindRoot[f1[y] == \[Pi]/4, {y, 1}]
(* {y -> 0.785398} *) 
```

# ip - 使用脚本将动态网络 IP 地址保存到文件？

> ID：15149938
> 
> 赞同：3
> 
> 时间：2013-03-01T03:21:46.140
> 
> 标签：ip, applescript, ip-address, appleevents

有没有办法可以使用 AppleScript 来**检查我的网络 IP 地址**？还是替代编码选项？如果 IP 地址已更改，我需要将其保存到文件中，然后使用日期和时间戳将其上传到我的 ftp 服务器。我已经知道这部分只是检查地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:29:03.657

ifconfig.me 只返回一个纯文本公共 IP：

```
do shell script "curl ifconfig.me > ip.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:59:19.847

尝试：

```
set filePath to POSIX path of ((path to desktop as text) & "myIp.txt")
set myIp to do shell script "curl checkip.dyndns.org | grep -Eo [0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+ > " & quoted form of filePath 
```

# ruby-on-rails - 无法使用 gmail smtp 服务器发送邮件（讨论中）

> ID：15149942
> 
> 赞同：4
> 
> 时间：2013-03-01T03:22:14.027
> 
> 标签：ruby-on-rails, smtp, gmail, discourse

我正在尝试设置[discourse](http://www.discourse.org)，这是一个 rails3 webapp，但是在使用 gmail smtp 服务器配置 smtp 时遇到了一些问题。

我昨天注册了一个新的gmail帐户，我可以登录浏览器和电子邮件客户端软件。

然后我在文件中配置话语`config/environments/production.rb`：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address   => "smtp.gmail.com",
  :port      => "587",
  :user_name => "smtp4shuzu@gmail.com",
  :password  => "12345678",
  :authentication => :plain,
  :domain => "shuzhu.org",
  :enable_starttls_auto => true
} 
```

启动`sidekiq`用于在后台发送邮件：

```
nohup bundle exec sidekiq > log/sidekiq.log 2>&1 & 
```

然后在生产模式下开始话语：

```
rails server -e production -d 
```

但它不起作用。我可以看到一些错误`sidekiq.log`：

> 2013-03-01T03:06:02Z 30687 TID-qib28 WARN: {"retry"=>true, "queue"=>"default", "class"=>"Jobs::UserEmail", "args"=>[ {"type"=>"signup", "user_id"=>42, "email_token"=>"b40a21ece2b14586e346abfd96685975", "current_site_id"=>"default"}], "jid"=>"558bb6bd5aa36cfc8d3d1e91", "error_message"= >“连接被拒绝 - connect(2)”、“error_class”=>“Errno::ECONNREFUSED”、“failed_at”=>2013-03-01 03:06:02 UTC、“retry_count”=>0} 2013-03 -01T03:06:02Z 30687 TID-qib28 警告：连接被拒绝 - connect(2) 2013-03-01T03:06:02Z 30687 TID-qib28 警告：/home/discourse/.rvm/rubies/ruby-1.9.3- p385/lib/ruby/1.9.1/net/smtp。rb:540:in `initialize' /home/discourse/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/net/smtp.rb:540:in`open' /home/discourse/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/net/smtp.rb:540:in `tcp_socket'

我已经尝试了各种 smtp 设置，但都不起作用。

* * *

**更新**：

根据@Basil的回答，我刚试过：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address   => "smtp.gmail.com",
  :port      => 587,
  :user_name => "smtp4shuzu",
  :password  => "12345678",
  :authentication => "plain",
  :enable_starttls_auto => true
} 
```

但它有同样的错误。域`shuzu.org`是我网站的域，我想我应该将它传递给 smtp。现在我删除了它，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:35:06.913

At last, I found the (stupid) reason.

I should start `sidekiq` in production mode:

```
nohup bundle exec sidekiq -e production > log/sidekiq.log 2>&1 & 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T05:42:45.330

尝试删除端口周围的引号

```
 :port      => 587, 
```

另外，我不明白为什么您的电子邮件地址是@gmail，但您的域是@shuhzu... smtp 设置应该显示您的电子邮件帐户的域。如果您有自定义 gmail，即 me@custom.com，则域将是 custom.com。如果您有自定义电子邮件地址，以下是您的域的 smtp 设置的示例：

```
{
    :address => "smtp.gmail.com",
    :port => 587 ,
    :domain => "custom.com",
    :user_name => "some_email@custom.com",
    :password => "some_password",
    :authentication => "plain",
    :enable_starttls_auto => true
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-15T14:07:40.643

有时取消注释以下行很有用`/var/discourse/containers/app.yml`：

```
 ## If you want to set the 'From' email address for your first registration, uncomment and change:
 ## After getting the first signup email, re-comment the line. It only needs to run once.
  - exec: rails r "SiteSetting.notification_email='noreply@YOURDOMAIN.com'" 
```

您应该在此处输入所有 Discourse 的电子邮件所代表的地址。默认情况下，Discourse 会尝试使用**您论坛的域名**，但您的 SMTP 可能不允许使用它。例如，您的论坛位于`forum.example.com`，而您的 Gmail SMTP 仅允许来自 的电子邮件`example.com`。

对于没有身份验证的 SMTP，只需留下如下 auth 字段：

```
 DISCOURSE_SMTP_USER_NAME:
  DISCOURSE_SMTP_PASSWORD: 
```

一切都保存后：

```
./launcher rebuild app 
```

电子邮件正常工作后，**您可以重新评论此行**（使用`SiteSetting`）。

你甚至可以`SiteSetting`通过控制台设置它，但这比取消注释/重新注释一行并重新构建容器更困难，所以我不会详细说明这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T16:28:50.460

在我的安装中，这是那些预制的图像东西（Bitnami）之一，我只需要运行这个：

```
/opt/discourse-0.9.5-0/ctlscript.sh start discourse_sidekiq 
```

任何人都知道我可以如何自动化它以便它在启动时发生？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-12T23:46:01.177

我刚刚在我自己的 ubuntu 物理站点服务器上的 docker 容器中设置了一个新的话语实例，并编辑了 app.yml 以包含：

```
DISCOURSE_SMTP_ADDRESS: 'smtp.gmail.com'
DISCOURSE_SMTP_AUTHENTICATION: 'plain'
DISCOURSE_SMTP_PORT: 587
DISCOURSE_SMTP_USER_NAME: 'my.name@gmail.com'
DISCOURSE_SMTP_PASSWORD: 'myPa$$word'
DISCOURSE_SMTP_ENABLE_START_TLS: true 
```

它奏效了。一半的战斗是知道在哪里放置单引号 (') 以及在哪里不放置。

我也可以使用另一种方法 - 我的 ISP 为其静态 IP 客户提供中继 smtp，因此我在 app.yam 中使用了它：

```
DISCOURSE_SMTP_ADDRESS: mail.myisp.tld
DISCOURSE_SMTP_AUTHENTICATION: none
DISCOURSE_SMTP_PORT: 25 
```

它也适用于我。

# java - 如何通过套接字将 C char 数组发送到 Java 客户端

> ID：15149952
> 
> 赞同：0
> 
> 时间：2013-03-01T03:24:33.770
> 
> 标签：java, c, arrays, sockets, char

我正在用c编写一个服务器程序，客户端在使用java语言的android平台上。现在我无法将char数组从服务器发送到客户端，这意味着客户端可以获取数据但无法解码它。我想可能是因为数据类型或编码差异的问题。谁能给我一些想法，非常感谢！

这是我的服务器端代码：

```
char buf[MAXSIZE];
memset(buf, 0, MAXSIZE);
int n_write;

strcpy(buf, "0008200050005001");

n_write = Write(confd, buf, strlen(buf));

if (n_write <= 0)
{
    fputs("Write error in send_matrix_and_position\n", stderr);
    close(confd);
    return -1;
} 
```

这是Java代码：

```
mSocket = new Socket(HOST, PORT);
mIn = mSocket.getInputStream();
mOut = mSocket.getOutputStream();
byte[] lengthByte = new byte[4];
mIn.read(lengthByte);
for(byte b : lengthByte)
{
System.out.println(b + "");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T12:50:46.093

您发送了 16 个字符，但您只读取了 4 个字符。你没有得到数据 48 48 48 56 吗？这些是发送的前四个字符的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:36:29.563

尝试检查读取 char 数组时在客户端获得的值，您可能正在执行 br.readline(); 看看这是否打印字符？您需要调试和检查，然后您可能会想出一些方法。

# git - 发生冲突时，GitHub for Windows 将我置于“变基”状态，如何从那里开始？

> ID：15149953
> 
> 赞同：12
> 
> 时间：2013-03-01T03:24:36.857
> 
> 标签：git, git-rebase, github-for-windows

我最近开始使用[GitHub for Windows](http://windows.github.com)。

我只是有冲突。在命令行上我会知道如何处理这个问题，但是 GitHub for Windows 选择让我处于我不熟悉的状态：

```
C:\Users\w\Documents\GitHub\CmisSync [(6026d18...)|REBASE +0 ~1 -0 !1 | +0 ~0 -0 !1]> git status
# Not currently on any branch.
# You are currently rebasing.
#   (fix conflicts and then run "git rebase --continue")
#   (use "git rebase --skip" to skip this patch)
#   (use "git rebase --abort" to check out the original branch)
#
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
... 
```

我修复了冲突，提交了文件，但是当我运行时，`git push`我被告知：

```
fatal: You are not currently on a branch.
To push the history leading to the current (detached HEAD) state now, use

    git push origin HEAD:<name-of-remote-branch> 
```

将我的合并提交到远程主机的推荐方法是什么？
我怀疑`git push origin HEAD:master`会实现这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T05:19:28.137

正如我们和[Simon Boudrias](https://stackoverflow.com/a/15150662/641451)所说的那样，如果你真的不知道你在 rebase 期间做了什么，最好的开始是使用`git rebase --abort`. 正如动词所说，它会中止当前的 rebase，并让您的存储库和工作副本处于 rebase 开始之前的相同状态。

在那之后，你应该做任何你已经做过的启动 rebase 过程的事情（我不认为你说它是什么，但也不认为它真的很重要）。变基肯定会再次开始，这就是您最初的问题开始得到回答的地方。

正如状态输出所说，您似乎有冲突。你应该解决它们（我通常使用`git status --short`plus`git mergetool`来解决它们`meld`），然后`git add`是文件。当状态正常时（例如，每个必须提交的文件都被添加，没有冲突），你应该`git rebase --continue`代替`git commit`.

这个想法是`git rebase`在给定的提交之上应用一组提交。我真的不知道在什么之上应用了哪些提交，但记住这一点很重要。请记住，可能会出现多个冲突，因为提交会一一应用。用于`git log`查看上次应用的提交，我认为您的`.git/`目录中必须有一个文件，其中包含当前正在应用的提交的提交消息。

这是一个常见的新手错误（我们都去过那里:)）在冲突解决期间尝试在文件中包含更改而不知道（或忘记）它们将被后一次提交应用。

因此，希望在解决一些冲突、添加文件并`git rebase --continue`ing 之后，您应该会到达一个快乐的功能存储库，并且您将能够`git push`从那里开始。

最后但并非最不重要的一点：在所有变基的东西之后，`git log`用来检查你没有修改任何公共提交。假设您的新分支包含远程的 HEAD 提交。变基功能强大且非常危险。你不想改变公开提交的基础——这可能是你唯一不想面对的 git 痛苦:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:46:22.870

解决冲突后，您首先需要`rebase`通过调用来结束模式。`git rebase --continue`这应该让你回到你正在拉的分支（在你的案例中是主人）。当命令行（posh-git 插件）将指示`master`而不是`REBASE`

然后你可以使用`git push origin master`. 额外的参数可能会由 Git 自动填充，但这取决于您的设置。

# javascript - 2D横向滚动HTML5游戏

> ID：15149955
> 
> 赞同：0
> 
> 时间：2013-03-01T03:24:49.113
> 
> 标签：javascript, html, html5-canvas, side-scroller

我正在尝试用 html5 制作横向滚动游戏。我想知道我怎么能说一个 500 像素 x 500 像素的视图，但背景大约是 500 像素高 2000 像素宽。当查看区域滚动时，会出现更多背景，但角色停留在中间，类似于口袋妖怪游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:40:42.540

这个`context.drawImage`函数有一大堆你可以给它的参数。您想使用源（图像）`x, y, width, height`和目标（屏幕）进行播放`x, y, width, height`。这是 的参数列表`drawImage`。

```
drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh) 
```

所以下面将`400px`从左到左绘制图像`900px`。

```
var w = 500;
var h = 500;
var scrollPos = 400;
drawImage(image, scrollPos, 0, w, h, 0, 0, w, h); 
```

**进一步阅读**

*   [WebPlatform drawImage](http://docs.webplatform.org/wiki/apis/canvas/CanvasRenderingContext2D/drawImage)

# c - 需要帮助在 C 中编译

> ID：15149957
> 
> 赞同：-1
> 
> 时间：2013-03-01T03:25:12.707
> 
> 标签：c, compilation

有人可以帮忙吗？我正在尝试用c编译，但它给了我这个错误：

“错误：需要左值作为赋值的左操作数”

这是代码的一部分

```
 if(anoc%4==0 && anoc%100!=0||anoc%400=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:27:41.443

你用 a`=`而不是 a`==`

```
if(anoc%4==0 && anoc%100!=0 || anoc%400==0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:28:02.520

在检查的最后一部分，您将值 0 分配给 anon%400。这是不可能的。

```
anoc%400=0 
```

你需要做：

```
anoc%400==0 
```

编辑 - 将来，请对您使用的变量类型进行更多说明。作为一种良好的编码习惯，请使用正确的变量名称。祝你好运。

# android - 布局不显示

> ID：15149958
> 
> 赞同：1
> 
> 时间：2013-03-01T03:25:13.887
> 
> 标签：android, android-layout

请看我的代码拳头，我想制作如下图所示的布局，但是两个 listViews 不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="7"
        android:baselineAligned="false">
        <LinerLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"><!-- here is the problem-->

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusableInTouchMode="false"
                android:text="@string/Subdistrict"/>

            <ListView
                android:id="@+id/Subdistrict"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >     
            </ListView>   

        </LinerLayout>

        <LinerLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusableInTouchMode="false"
                android:text="@string/Building"
                android:textColor="#ffffff"/>
           <ListView
                android:id="@+id/Building"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
           </ListView>
        </LinerLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <Button 
            android:id="@+id/BuildingSelectOk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/OK"/>
        <Button 
            android:id="@+id/BuildingSelectCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Cancel"/>
    </LinearLayout>
</LinearLayout> 
```

我想实现如下图所示的布局：

![在此处输入图像描述](../Images/30d3fcf341912ca0591241ad79521391.png)

但是两个 listView 根本没有显示，我错过了什么？请有人帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:53:32.230

```
"height" to "0dp" though your list will calculate itself. and "weight" to 7? Is it needed? 
```

是的，看看这些问题：
[Android：试图理解 android:layout_weight](https://stackoverflow.com/questions/3629331/android-trying-to-understand-androidlayout-weight)
[在理解 layout_weight="1" 方面需要帮助](https://stackoverflow.com/questions/9947055/need-help-in-understand-layout-weight-1)

所以这是我的建议：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="80"
        android:baselineAligned="false">
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:background="#2fff0000"
            android:layout_weight="50">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusableInTouchMode="false"
                android:text="Subdistrict"/>

            <ListView
                android:id="@+id/Subdistrict"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >     
            </ListView>   

        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:background="#2f00ff00"
            android:layout_weight="50">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusableInTouchMode="false"
                android:text="Building"
                android:textColor="#ffffff"/>
           <ListView
                android:id="@+id/Building"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
           </ListView>
        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="20"
        android:gravity="center" >

        <Button 
            android:id="@+id/BuildingSelectOk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="OK"/>
        <Button 
            android:id="@+id/BuildingSelectCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel"/>
    </LinearLayout>
</LinearLayout> 
```

当您运行应用程序时，您会看到`LinearLayout`wrap 2`ListView`具有不同的背景颜色，因此`ListView`显示，所以我认为问题是您忘记为它们设置 Adapter。试一试，请告诉我结果。

# matlab - OpenCV中的roipoly matlab函数等效

> ID：15149961
> 
> 赞同：1
> 
> 时间：2013-03-01T03:25:17.497
> 
> 标签：matlab, opencv, image-processing, computer-vision, roi

我正在使用 OpenCV 库将 matlab 代码转换为 C++。

**谁能告诉我OpenCV 中等效的[roipoly](http://www.mathworks.in/help/images/ref/roipoly.html) matlab 函数？**

**或者如何使用 OpenCV 获得相同的功能？**

```
BW = roipoly(I, c, r) 
```

BW = roipoly(I, c, r) 返回由向量 c 和 r 描述的多边形指定的 ROI，它们分别指定每个顶点的列索引和行索引。c 和 r 大小相同。

就我而言，我想从图像中提取**三角形 roi**，因此 c 和 r 的大小为 3x1。

谁能告诉我如何使用 OpenCV 在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T05:33:00.933

OpenCV 中没有像 roipoly 这样的相应内置函数。

相反，OpenCV 提供了 cv2.polyline() 和 cv2.drawContours() 等函数。如果你有顶点的坐标，（如 matlab 所示）你可以用它们创建一个 numpy 数组。然后在黑色图像上绘制这个多边形，它会为您提供 roipoly 返回的蒙版图像。下面演示了一个示例：

```
import cv2
import numpy as np

img = cv2.imread('eight.png')
mask = np.zeros(img.shape[:2],dtype = 'uint8')

c = [194, 253, 293, 245]
r = [72, 14, 76, 125]

rc = np.array((c,r)).T

cv2.drawContours(mask,[rc],0,255,-1)
cv2.drawContours(img,[rc],0,255,2)
mask = cv2.cvtColor(mask,cv2.COLOR_GRAY2BGR)

res = np.hstack((img,mask)) 
```

下面是我得到的结果：

![在此处输入图像描述](../Images/5b2be2271f967309c8911c42400c4f7d.png)

# javascript - jquery nth-child 作为函数中的参数。

> ID：15149965
> 
> 赞同：0
> 
> 时间：2013-03-01T03:25:34.783
> 
> 标签：javascript, jquery, css-selectors

我有四个段落元素。单击奇数元素后，我想切换下一个偶数元素。

这是安排。

```
<p>First</p>

<p>Second</p>

<p>Third</p>

<p>Fourth</p> 
```

所以，如果我点击 First，我希望 Second 被切换；如果我点击第三个，我想切换第四个元素。我希望这是有道理的。

这是我到目前为止所能想到的。

```
$("p:odd").click(function(){
    $("p:even").toggle("slow");
        }); 
```

现在，这段代码切换了所有偶数元素。每当我单击一个奇数段落时，我只想切换 n+1。是否有意义？有没有办法让该函数接受一个参数，以便在单击一个奇数段落后，切换下一个 (n+1) ？我不确定如何传递论点或最好的方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:29:00.290

你试试怎么样`.next()`？ [http://api.jquery.com/next/](http://api.jquery.com/next/)

```
$("p:odd").click(function(){
    $(this).next().toggle('slow'); 
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:29:17.497

您可以缓存对象和使用`eq`方法：

```
var $p    = $('p'), 
    $odd  = $p.filter(':odd'), 
    $even = $p.filter(':even');

$odd.click(function(){
    $even.eq( $odd.index(this) ).toggle('slow');
}); 
```

[http://jsfiddle.net/TLucC/](http://jsfiddle.net/TLucC/) | [http://jsfiddle.net/uNu9y/](http://jsfiddle.net/uNu9y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:30:53.880

在所有 Javascript 和 jQuery 方法中，触发事件的项会自动传递给函数，格式为`this`. 但是，由于变量范围没有包含在 Javascript 中，`this`可能会根据内部调用的其他函数而改变。最佳做法是`this`立即设置为另一个变量。

因此，您可以像这样调整方法：

```
$("p:odd").click(function(){
    var self = this;

    // I'm doing .next('p') to make your code safer in case there's something between the <p> elements.
    $(self).next('p').toggle('slow');
}); 
```

# c# - 从字符串之间提取数字

> ID：15149966
> 
> 赞同：1
> 
> 时间：2013-03-01T03:25:40.773
> 
> 标签：c#, regex

从这个字符串中提取数字部分的最佳方法是什么？我查看了正则表达式，但它们把我搞糊涂了。子字符串可以吗？

```
/store/457987680928164?id=2 
```

我需要的只是数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:32:45.020

RegEx 是解决此问题的好方法，但如果您打算使用 SubString...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string test = "/store/457987680928164?id=2";
            int start = test.IndexOfAny("0123456789".ToCharArray());
            int end = test.IndexOf("?");

            Console.WriteLine(test.Substring(start, end - start));

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:39:33.430

我想出了这些扩展方法来简化常见的字符串解析任务：

```
private static string Substring(string str, string value, bool isLastValue, bool isAfterValue, StringComparison comparisonType, string defaultValue)
{
    int pos = isLastValue ? str.LastIndexOf(value, comparisonType) : str.IndexOf(value, comparisonType);
    if (pos == -1) return defaultValue;
    return isAfterValue ? str.Substring(pos + value.Length) : str.Substring(0, pos);
}

public static string SubstringBeforeFirst(this string str, string value, StringComparison comparisonType = StringComparison.CurrentCulture, string defaultValue = "")
{
    return Substring(str, value, false, false, comparisonType, defaultValue);
}

public static string SubstringBeforeLast(this string str, string value, StringComparison comparisonType = StringComparison.CurrentCulture, string defaultValue = "")
{
    return Substring(str, value, true, false, comparisonType, defaultValue);
}

public static string SubstringAfterFirst(this string str, string value, StringComparison comparisonType = StringComparison.CurrentCulture, string defaultValue = "")
{
    return Substring(str, value, false, true, comparisonType, defaultValue);
}

public static string SubstringAfterLast(this string str, string value, StringComparison comparisonType = StringComparison.CurrentCulture, string defaultValue = "")
{
    return Substring(str, value, true, true, comparisonType, defaultValue);
} 
```

至于从您的示例中获取数字：

```
string s = "/store/457987680928164?id=2";
string number = s.SubstringAfterLast("/").SubstringBeforeFirst("?"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:39:51.397

YARS（又一个正则表达式解决方案）

以下：

```
var str = "/store/457987680928164?id=2";

var regex = new Regex(@"\d+");
foreach (Match match in regex.Matches(str))
{
    Console.WriteLine(match.Value);
} 
```

输出这个：

```
457987680928164
2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T03:34:34.637

我更喜欢正则表达式，这不是在我的示例中使用子字符串的运行速度比它快

```
static long GrabFirstLongFromString(string input)
{
    string intAsString = String.Empty;
    bool startedInt = false;
    foreach(char c in input)
    {
        if (Char.IsDigit(c))
        {
            startedInt = true; //really only care about the first digit
            intAsString += c;
        }
        else if (startedInt)
            return long.Parse(intAsString);
    }
    return -1; //define a default, since this only does a 0 or positive I picked a negative
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T03:36:50.687

这是用正则表达式完成的

```
private static Regex digitsOnly = new Regex(@"[^\d]");

        public static string RemoveNonNumbers(string input)
        {
            return digitsOnly.Replace(input, "");
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T03:37:27.780

或者只是简单的正则表达式：

```
Regex r = new Regex(@"\d+");
MatchCollection m = r.Matches("/store/457987680928164?id=2");

if (m.Count > 0)
{
    Console.WriteLine(string.Format("Big number: {0} - Little number: {1}", m[0], m[1]));
} 
```

以上打印：

```
Big number: 457987680928164 - Little number: 2 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T03:28:53.503

您应该获得 RadExpression Designer 并使用备忘单自学 RegEx。

如果 RegEx 让您感到害怕，只需在循环中执行它通常会更快：

```
string s = "/store/457987680928164?id=2";
string numericInput = string.Empty;
foreach(char c in s)
{
   if (char.IsDigit(c))
       numericInput  += c;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T03:32:49.710

我肯定会推荐为此使用 RegEx。字符串模式匹配和提取确实是正则表达式的理想场景。

这是一个正则表达式，它将匹配您提供的字符串示例，并为字符串的数字部分捕获括号：

```
^/store/(\d+)\?id=(\d+) 
```

[**您可以在Regex Tester**](http://regexpal.com/)中验证它。我使用您的示例字符串和我上面写的正则表达式对其进行了测试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-01T03:50:31.323

```
 string str = "/store/457987680928164?id=2";
 string num = new string(str.Remove(str.IndexOf("?")).Where(a => char.IsDigit(a)).ToArray()); 
```

# html - 粘性页脚包装没有扩展到正确的高度

> ID：15149968
> 
> 赞同：1
> 
> 时间：2013-03-01T03:25:46.683
> 
> 标签：html, css, sticky-footer

我在将粘性页脚“粘”到页面底部时遇到问题。我正在使用[这里](http://ryanfait.com/sticky-footer/)给出的方法我正在使用包装器并按照方法所说的那样推送，但我的包装器 div 似乎没有正确的高度。

[您可以在michael-nolan.com](http://michael-nolan.com)上看到显示的问题

感谢您提供的所有帮助，如果您需要更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:36:42.467

```
html, body {
    height: 100%;
} 
```

将此添加到您的 CSS 样式表

# html - 如何创建一个正方形的控件，它里面包含 4 个正方形？

> ID：15149972
> 
> 赞同：-1
> 
> 时间：2013-03-01T03:26:15.967
> 
> 标签：html, postback

我需要创建一个正方形的控件，里面包含 4 个正方形。如果用户点击一个子方块，它的背景颜色将会改变（它的背景颜色有两种状态——白色和蓝色）并且这个状态会立即更新到数据库中。此控件将在 GridView 中使用。

我不知道如何创建此控件，因此我需要您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:43:49.590

你必须做一些类似立方体的事情，但如果你只有蓝色和白色作为 chpoice，你不能让第四面可见..要么你必须为边使用不同的颜色，要么玩边的透明度，要么制作立方体旋转可能。

如果你使用不同的颜色，你可以放置 adj 形状 lije 这个 [http://www.anopticalillusion.com/2012/03/necker-cube/](http://www.anopticalillusion.com/2012/03/necker-cube/)

[http://en.wikipedia.org/wiki/File:Face_colored_cube.png](http://en.wikipedia.org/wiki/File:Face_colored_cube.png)外观坚固，用户可以转动它。

创建用户控件。

希望这可以帮助。

# neo4j - 返回具有名称属性和重复次数的集合

> ID：15149977
> 
> 赞同：0
> 
> 时间：2013-03-01T03:26:50.963
> 
> 标签：neo4j, cypher

```
start n=node(22), p=node(1) match n<-[r1:FOLLOWS]-m-[r2:HAS]->k<-[r3:CONTAIN]-p return distinct [k.name] 
```

我试图在这里返回 k 值的名称和重复时间，到目前为止，我无法做到。有没有一种使用密码查询的快速方法？

考虑这个例子：

```
["Acting","Acting","Acting","Acting","Mongodb","Mongodb","Neo4j","Neo4j","Nursing"] 
```

我试图有类似的东西：

```
[["Acting",4], ["Mongodb",2], ["Neo4j",2], ["Nursing",1]] 
```

注意：相同的名称（属性）表示相同的节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:51:19.373

找到了！:)

```
start n=node(22), p=node(1) match n<-[r1:FOLLOWS]-m-[r2:HAS]->k<-[r3:CONTAIN]-p return distinct [k.name] as skill, count(k) as count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:12:37.433

如果您想进一步过滤计数（假设您只想要计数大于 5 的结果，您也可以将其包装在 WITH 语句中。又好又整洁。

```
 START n=node(22), p=node(1) 
    MATCH n<-[r1:FOLLOWS]-m-[r2:HAS]->k<-[r3:CONTAIN]-p 
    WITH distinct [k.name] as skill, count(k) as count
    WHERE count > 5
    RETURN skill, count 
```

# html - 动态图像大小

> ID：15149978
> 
> 赞同：1
> 
> 时间：2013-03-01T03:26:51.863
> 
> 标签：html, css

我正在创建一组跨越我网站页面宽度的图像。但是，通常这会很好，因为我允许页面动态调整大小，我的图像会拉伸（或压缩）并有点失真。

有谁知道一种方法，基本上只是为调整大小的图像创建窗口，而图像静态位于下方？

如果你想要我的问题的一个例子，你可以去[这里](http://www.aprohlimage.com)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:46:32.163

试试这个。很难说你想要发生什么......我的意思是，在小屏幕上它不会很酷。我建议涉及一些媒体查询，但这应该向您展示您的方法的第一步。[http://jsfiddle.net/sheriffderek/NvFwe/](http://jsfiddle.net/sheriffderek/NvFwe/) 我希望它有所帮助。

HTML

```
<div class="wrapper">
    <img alt="image description" src="http://placehold.it/350x300">
    <img alt="image description" src="http://placehold.it/350x300">
    <img alt="image description" src="http://placehold.it/350x300">
    <img alt="image description" src="http://placehold.it/350x300">
    <img alt="image description" src="http://placehold.it/350x300">
</div> 
```

CSS

```
.wrapper {
    width: 100%;
    float: left;
    background-color: #f06;
}

.wrapper img {
    display: block;
    float: left;
    width: 15%;
    height: auto;
    margin-right: 3%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:30:07.077

我只会使用批量调整大小程序调整您的图像大小。任何动态调整大小都会降低速度或图像质量。如果您下载、调整一次大小、上传，您将永远不必担心这一点。

# javascript - 可能的？记录嵌入式 YouTube 视频的播放次数

> ID：15149988
> 
> 赞同：2
> 
> 时间：2013-03-01T03:28:10.710
> 
> 标签：javascript, ruby-on-rails, youtube, youtube-api, soundcloud

我有一个允许用户发布视频的网络应用程序。我想知道是否可以记录播放次数，以便每次有人单击播放按钮时，计数器都会增加 +1。

我目前正在使用 auto_html 进行嵌入：

```
 <% if micropost.url.include? 'youtu' %>
      <%= auto_html(micropost.url) {youtube(:width => 550, :height => 190)}   %>
   <% end %>

   <% if micropost.url.include? 'soundcloud' %>
     <%= auto_html(micropost.url) {soundcloud}  %>
   <% end %> 
```

对于 Youtube，当我单击嵌入视频的任意位置时，它必须进行录制，而对于 Soundcloud，它必须在单击播放按钮后播放。怎么可能做到这一点？非常感谢输入。

我不希望视频的 youtube 观看次数，我想知道有人在我的网站上观看了多少次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:03:15.247

. . [YouTube API（“视频条目”）](https://developers.google.com/youtube/2.0/developers_guide_protocol#Retrieve_video_entry)以更可靠的方式为您提供此信息，因此您无需自己存储。只需获取“entry->yt:statistics->viewCount”信息。

. . 值得注意的是，当您*开始*播放视频时，“viewCount”不会增加，而是会在一段时间后增加。我不记得具体有多少，但我认为是当你观看大约 75% 的视频或其他内容时。

. . **编辑**只是把它放在这里，这样任何通过谷歌的人都会得到它。

. . 如果您出于某种原因需要将其保存在您的服务器上，您可以使用[Youtube JavaScript API](https://developers.google.com/youtube/js_api_reference#Events)在视频开始播放时触发一个事件（检查“onStateChange”事件的值为“1”——当视频开始实际播放）。SoundCloud 也有一个[Widget API 事件： "onMediaStart"](https://github.com/soundcloud/Widget-JS-API/wiki#wiki-widget-events)。

. . 然后，您可以进行一些 Ajax 调用以将信息保存在您的服务器上。

```
var MEDIA_ID = 1; //your internal's media ID;
function checkPlayerState(newState) { if (newState === 1) { incrementCount(); } }
function incrementCount() { $.post('inc.php', {mediaid: MEDIA_ID}); }

soundcloud.addEventListener('onMediaStart', incrementCount);
ytplayer.addEventListener('onStateChange', checkPlayerState); 
```

# ios - 关于自定义 TabBarViewController

> ID：15149989
> 
> 赞同：0
> 
> 时间：2013-03-01T03:28:23.187
> 
> 标签：ios, viewcontroller

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:40:16.367

UITabBarController 是 Apple 的预制容器控制器之一，UINavigationController 也是如此。您可以使用 UIViewController 类参考的“管理自定义容器中的子视图控制器”部分中的方法制作自己的自定义容器控制器。在 WWDC 2011 会议中有一个名为“实现 UIViewController Containment”的视频——这是了解该主题的好地方。

# jquery - 在 jquery 中检索数组

> ID：15149991
> 
> 赞同：0
> 
> 时间：2013-03-01T03:28:36.607
> 
> 标签：jquery, model-view-controller

在我的控制器的操作方法中，我将数据存储在视图数据中，如下所示：

```
int[] numbers =  new  int[] {10, 20, 30, 40};
ViewData["Numbers"] =numbers; 
```

现在在我看来，从 jQuery 试图将数据放入数组。我试过如下：

```
<script type="text/javascript">
   var tempArray = ['@ViewData["Numbers"]'];  
</script> 
```

但是当我循环抛出 tempArray 时，它会打印如下值：

```
Index  Value 
0      int[] 
```

对于值而不是打印 10，打印一些数组。我的问题是如何从 jQuery 中的视图数据中检索数组？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:34:27.133

将该数组存储为字符串：

```
string numbers =  "10, 20, 30, 40";
ViewData["Numbers"] = numbers; 
```

或将该数组转换为字符串：

```
int[] numbers =  new int[] {10, 20, 30, 40};
ViewData["Numbers"] = numbers.toString(); 
```

JS：

```
var tempArray = [@ViewData["Numbers"]]; 
```

现在`tempArray`是一个包含四个整数的数组。

# android - Android：如何对 ListView 的数据进行排序？

> ID：15149994
> 
> 赞同：1
> 
> 时间：2013-03-01T03:28:58.037
> 
> 标签：android

我有一些从服务器中提取的 JSON 数据。此数据中的字段之一是距离值。我需要在 ListView 中按从最低到最高的距离对数据进行排序。我不知道该怎么做？

任何帮助表示赞赏。

这是我获取数据的代码，不知道如何正确排序？

```
// Hashmap for ListView
ArrayList<HashMap<String, String>> bathroomList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
    setContentView(R.layout.activity_search);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        bathrooms = json.getJSONArray(TAG_BATHROOMS);

        // looping through All Contacts
        for(int i = 0; i < bathrooms.length(); i++){
            JSONObject c = bathrooms.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String access = c.getString(TAG_ACCESS);
            String city = c.getString(TAG_CITY);
            String comment = c.getString(TAG_COMMENT);
            String directions = c.getString(TAG_DIRECTIONS);
            String name = c.getString(TAG_NAME);
            String street = c.getString(TAG_STREET);
            String bathroomtype = c.getString(TAG_BATHROOMTYPE);                
            String distance = c.getString(TAG_DISTANCE);
            String distanceTrimmed = distance.substring(0,4) + " " + "miles away";
            String avail = c.getString(TAG_AVAIL);
            String country = c.getString(TAG_COUNTRY);
            String state = c.getString(TAG_STATE);
            String postal = c.getString(TAG_POSTAL);

            //System.out.println(name);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_ACCESS, access);
            map.put(TAG_CITY, city);
            map.put(TAG_COMMENT, comment);
            map.put(TAG_DIRECTIONS, directions);
            map.put(TAG_NAME, name);
            map.put(TAG_STREET, street);
            map.put(TAG_BATHROOMTYPE, bathroomtype);
            map.put(TAG_DISTANCE, distanceTrimmed);
            map.put(TAG_AVAIL, avail);
            map.put(TAG_COUNTRY, country);
            map.put(TAG_STATE, state);
            map.put(TAG_POSTAL, postal);

            // adding HashList to ArrayList
            bathroomList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */

    ListAdapter adapter = new SimpleAdapter(this, bathroomList,
            R.layout.list_item,
            new String[] { TAG_ID, TAG_NAME, TAG_STREET, TAG_CITY, TAG_STATE, TAG_POSTAL,TAG_COUNTRY, TAG_DISTANCE, TAG_DIRECTIONS, TAG_COMMENT, TAG_AVAIL, TAG_BATHROOMTYPE, TAG_ACCESS}, new int[] {
                     R.id.key,R.id.name, R.id.street, R.id.city, R.id.state, R.id.postal,R.id.country, R.id.distance, R.id.directions, R.id.comments, R.id.availability, R.id.bathroomtype, R.id.access });

    setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:38:12.493

[使用自定义比较器](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)对列表进行排序。[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

```
Collections.sort(bathroomList, new Comparator<HashMap<String, String>>()
{
    @Override
    public int compare(HashMap<String, String> a, HashMap<String, String> b)
    {
        return a.get(TAG_DISTANCE).compareTo(b.get(TAG_DISTANCE));
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T16:53:05.367

我的也有同样的问题，但我现在已经解决了，感谢@rusmus。看看[ListView 上的双精度数据（距离）排序](https://stackoverflow.com/questions/21681616/sorting-double-data-distance-on-listview/21681722#21681722)

试试这个代码：

```
Collections.sort(bathroomList, new Comparator<HashMap<String, String>>() {

                    @Override
                    public int compare(HashMap<String, String> o1,
                            HashMap<String, String> o2) {                           
                        return Double.compare(Double.parseDouble(o1.get(TAG_DISTANCE)), Double.parseDouble(o2.get(TAG_DISTANCE))); // error
                    }                   
                }); 
```

# java - 如何添加我的文本区域

> ID：15149996
> 
> 赞同：1
> 
> 时间：2013-03-01T03:29:07.280
> 
> 标签：java, swing, double, converter, jtextarea

所以，我正在制作一个计算集水量的程序。而且我有 2 个文本区域（JFrame），我需要将它们转换为双精度，所以，基本上我想这样做！

```
double a = textarea1;
double b = textarea2;  // textarea1 and textarea2 are JTextArea's
double c = a * b * 0.0632 
```

如何转换`JTextArea`为双精度*或*如何制作与用户输入的值相同的双精度`JTextArea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:35:06.103

我认为你需要这个：-

```
double a = Double.parseDouble(textarea1.getText()); 
```

# javascript - 读取和base64编码二进制文件

> ID：15149997
> 
> 赞同：9
> 
> 时间：2013-03-01T03:29:14.580
> 
> 标签：javascript, jquery, html, file-upload, filereader

我正在尝试从文件系统中读取二进制文件，然后用 JavaScript 对其进行 base64 编码。我正在使用[FileReader API](http://dev.w3.org/2006/webapi/FileAPI/#dfn-readAsArrayBuffer)来读取数据和在[此处](http://www.webtoolkit.info/javascript-base64.html)找到的 base64 编码器。

我的代码似乎接近工作，问题是生成的base64数据是错误的。这是我到目前为止所得到的：

```
function saveResource() {
    var file = $(".resourceFile")[0].files[0];

    var reader = new FileReader();
    reader.onload = function(evt) {
        var fileData = evt.target.result;
        var bytes = new Uint8Array(fileData);
        var binaryText = '';

        for (var index = 0; index < bytes.byteLength; index++) {
            binaryText += String.fromCharCode( bytes[index] );
        }

        console.log(Base64.encode(binaryText));

    };
    reader.readAsArrayBuffer(file);
}; 
```

这是我正在测试的文件（它是一个 100x100 的蓝色方块）：

![在此处输入图像描述](../Images/6938e9f5c702d9ea1078aab0185f7d1e.png)

根据[在线 base64 解码器/编码器](http://www.opinionatedgeek.com/dotnet/tools/Base64Encode/Default.aspx)，此文件应编码为：

> /9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCABkAGQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDxyiiiv3E8wKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooAKKACiiiACKKAKKACiiigAooAKKACiii

...但相反，我从 JavaScript 中得到的是：

> w7/DmMO/w6AAEEpGSUYAAQIAAAEAAQAAw7/DmwBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDLDv8ObAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMsO/w4AAEQgAZABkAwEiAAIRAQMRAcO/w4QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLw7/DhADCtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDLCgcKRwqEII0LCscOBFVLDkcOwJDNicsKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5esKDwoTChcKGwofCiMKJworCksKTwpTClcKWwpfCmMKZwprCosKjwqTCpcKmwqfCqMKpwqrCssKzwrTCtcK2wrfCuMK5wrrDgsODw4TDhcOGw4fDiMOJw4rDksOTw5TDlcOWw5fDmMOZw5rDocOiw6PDpMOlw6bDp8Oow6nDqsOxw7LDs8O0w7XDtsO3w7jDucO6w7/DhAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgvDv8OEAMK1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIywoEIFELCkcKhwrHDgQkjM1LDsBVicsORChYkNMOhJcOxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXrCgsKDwoTChcKGwofCiMKJworCksKTwpTClcKWwpfCmMKZwprCosKjwqTCpcKmwqfCqMKpwqrCssKzwrTCtcK2wrfCuMK5wrrDgsODw4TDhcOGw4fDiMOJw4rDksOTw5TDlcOWw5fDmMOZw5rDosOjw6TDpcOmw6fDqMOpw6rDssOzw7TDtcO2w7fDuMO5w7rDv8OaAAwDAQACEQMRAD8Aw7HDiijCosK/cTzDgMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooA8O/w5k=woooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooA8O/w5k=woooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooAMKiwoooA8O/w5k=

如果我不得不冒险猜测，我会说这个问题与二进制数据中的不可打印字符有关（如果我对纯文本文档进行编码，那可以正常工作）。但是解决这个问题的最佳方法是什么？

**编辑**

看起来这可能是 base64 库本身的问题~~（或者如果不是，那么如何将`Uint8Array`其解包为库调用的字符串）~~。如果我改用浏览器的`btoa()`功能，并直接传递它，那就行了。太糟糕了，该功能并非在所有浏览器中都存在。~~`Uint8Array`~~ `binaryText`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T04:17:10.050

和谷歌来救援。我找到了以下代码，它将输入数据作为“字节”的普通数组（0到255之间的数字，包括在内；如果`Uint8Array`直接传递给它也可以正常工作），并将其添加到我正在使用的库中：

```
//note:  it is assumed that the Base64 object has already been defined
//License:  Apache 2.0
Base64.byteToCharMap_ = null;
Base64.charToByteMap_ = null;
Base64.byteToCharMapWebSafe_ = null;
Base64.charToByteMapWebSafe_ = null;
Base64.ENCODED_VALS_BASE =
    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' +
    'abcdefghijklmnopqrstuvwxyz' +
    '0123456789';

/**
 * Our default alphabet. Value 64 (=) is special; it means "nothing."
 * @type {string}
 */
Base64.ENCODED_VALS = Base64.ENCODED_VALS_BASE + '+/=';
Base64.ENCODED_VALS_WEBSAFE = Base64.ENCODED_VALS_BASE + '-_.';

/**
 * Base64-encode an array of bytes.
 *
 * @param {Array.<number>|Uint8Array} input An array of bytes (numbers with
 *     value in [0, 255]) to encode.
 * @param {boolean=} opt_webSafe Boolean indicating we should use the
 *     alternative alphabet.
 * @return {string} The base64 encoded string.
 */
Base64.encodeByteArray = function(input, opt_webSafe) {
  Base64.init_();

  var byteToCharMap = opt_webSafe ?
                      Base64.byteToCharMapWebSafe_ :
                      Base64.byteToCharMap_;

  var output = [];

  for (var i = 0; i < input.length; i += 3) {
    var byte1 = input[i];
    var haveByte2 = i + 1 < input.length;
    var byte2 = haveByte2 ? input[i + 1] : 0;
    var haveByte3 = i + 2 < input.length;
    var byte3 = haveByte3 ? input[i + 2] : 0;

    var outByte1 = byte1 >> 2;
    var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);
    var outByte3 = ((byte2 & 0x0F) << 2) | (byte3 >> 6);
    var outByte4 = byte3 & 0x3F;

    if (!haveByte3) {
      outByte4 = 64;

      if (!haveByte2) {
        outByte3 = 64;
      }
    }

    output.push(byteToCharMap[outByte1],
                byteToCharMap[outByte2],
                byteToCharMap[outByte3],
                byteToCharMap[outByte4]);
  }

  return output.join('');
};

/**
 * Lazy static initialization function. Called before
 * accessing any of the static map variables.
 * @private
 */
Base64.init_ = function() {
  if (!Base64.byteToCharMap_) {
    Base64.byteToCharMap_ = {};
    Base64.charToByteMap_ = {};
    Base64.byteToCharMapWebSafe_ = {};
    Base64.charToByteMapWebSafe_ = {};

    // We want quick mappings back and forth, so we precompute two maps.
    for (var i = 0; i < Base64.ENCODED_VALS.length; i++) {
      Base64.byteToCharMap_[i] =
          Base64.ENCODED_VALS.charAt(i);
      Base64.charToByteMap_[Base64.byteToCharMap_[i]] = i;
      Base64.byteToCharMapWebSafe_[i] =
          Base64.ENCODED_VALS_WEBSAFE.charAt(i);
      Base64.charToByteMapWebSafe_[
          Base64.byteToCharMapWebSafe_[i]] = i;
    }
  }
}; 
```

包含上述函数的库的完整代码[可在此处获得](http://closure-library.googlecode.com/svn/docs/closure_goog_crypt_base64.js.html)，但未经修改的形式似乎依赖于许多其他库。上面稍微修改过的版本应该适用于只需要快速修复此问题的任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T21:54:26.690

将二进制文件视为数组缓冲区，这与任何字符编码无关。您的蓝色方块 (.jpg) 有 361 个本机字节，表示 0..255（十进制）的八位字节，它们不是字符！

这意味着：使用 ArrayBuffer 使用众所周知的 base64 算法将其编码为 Base64。

随着 Perl 回到原点，如上图所示：

```
my $fh = IO::File->new;
$fh->open("d:/tmp/x.jpg", O_BINARY|O_CREAT|O_RDWR|O_TRUNC) or die $!;

$fh->print(decode_base64("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBD
AQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCABkAGQDASIAAhEBAxEB/8QAFQABAQAA
AAAAAAAAAAAAAAAAAAf/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAUH/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMR
AD8AjgDcUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==
"));

$fh->close; 
```