# StackOverflow 问答 15875000-15875999

# php - 通过 php 中的 ftp_put 上传后文件损坏

> ID：15875007
> 
> 赞同：1
> 
> 时间：2013-04-08T08:55:12.210
> 
> 标签：php, file-upload

在我通过服务器上的 php 中的 ftp_put 上传任何文件后，文件被上传，但文件在服务器上被损坏。

以下代码用于上传文件。

```
<html>
<body>

    <form action="upload.php" method="post"
          enctype="multipart/form-data">
        <label for="file">Filename:</label>
        <input type="file" name="file" id="file"><br>
        <input type="submit" name="submit" value="Submit">
    </form>

</body>
</html>

<?php
if (isset($_REQUEST['submit'])) {
    $local_file = $_FILES["file"]["tmp_name"];
    $ftp_path = 'path/newfolder';
    $filename = $_FILES["file"]["name"];
    $usr = 'userid';
    $pwd = 'password';
    $host = 'server_ip';
    $conn_id = ftp_connect($host, 21) or die("Cannot connect to host");
    ftp_login($conn_id, $usr, $pwd) or die("Cannot login");
    $upload = ftp_put($conn_id, $ftp_path . '/' . $filename, $local_file, FTP_BINARY);
    print (!$upload) ? 'Cannot upload' : 'Upload complete';
}
}
?> 
```

我尝试了 jpeg、xls 等...但上传后我无法打开这些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:53:08.613

不确定是什么可能导致该问题，但假设您需要尝试上传文件后[`move_uploaded_file`](http://php.net/manual/en/function.move-uploaded-file.php)：

```
$filename = $_FILES["file"]["name"];    
$local_file = "some/tmp/storage/path/$filename";
if(move_uploaded_file($_FILES["file"]["tmp_name"], $local_file)) {
   $ftp_path = 'path/newfolder';
   $usr = 'userid';
   $pwd = 'password';
   $host = 'server_ip';
   $conn_id = ftp_connect($host, 21) or die("Cannot connect to host");
   ftp_login($conn_id, $usr, $pwd) or die("Cannot login");
   $upload = ftp_put($conn_id, $ftp_path . '/' . $filename, $local_file, FTP_BINARY);
   print (!$upload) ? 'Cannot upload' : 'Upload complete';
   ulink($local_file); //remove temporary local file
} else {
   echo 'File upload error';
} 
```

此外，通过检查确保文件真正上传`$_FILES["file"]["error"]`。它应该等于`UPLOAD_ERR_OK`（其他错误[代码](http://php.net/manual/en/features.file-upload.errors.php)）

# jquery - CodeIgniter Jquery 成功给我所有页面 html

> ID：15875008
> 
> 赞同：0
> 
> 时间：2013-04-08T08:55:13.427
> 
> 标签：jquery, codeigniter

当我尝试通过 ajax jquery 成功发送数据时，我得到了整个页面 html 。其他功能在这里工作是我的代码。

```
 <form id ="" action ="" method ="POST">
                                    <?php
                                        $counter = 0 ;
                                        foreach ($all_users as $user) {
                                    ?>
                                    <tr class="">
                                        <td><?php echo $user->user_name; ?></td>
                                        <td><?php echo $user->level ;?></td>
                                        <td>asd</td>
                                        <td><a class="edit" href="javascript:;">Edit</a></td>
                                        <td><a class="delete" onclick ="delete_user($(this),<?php echo $user->id;?>)">Delete</a></td>
    </tr>
    <?php
    $counter ++;
    }
        ?>
</form> 
```

javascript

```
 function delete_user(row_id,user_id)
    {
        if (confirm('Do you really want to delete')) {

            row_id.closest('tr').remove();

            $.ajax({
                type: "POST",
                url: "delete_user/",
                data: { "user_id":user_id },

                success: function(msg) {

                        //alert("Name = " + msg);
                }
            });
        } 
        else {
        // Do nothing!
        }
    } 
```

在 CI

```
function delete_user()
{
    $user_id = $this->input->post('user_id');
    $this->load->model("m_user");
    $this->m_user->delete_user($user_id);
    echo $result;
    echo $user_id;
} 
```

我可以看到它发送了帖子并且也发送了数据，但是我没有得到回复，我得到了整个 html 页面代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:06:02.697

我在项目中遇到的同样情况，问题的简单解决方案是，当您**`delete_user()`**在此函数`codeigniter`调用其他函数之后发送请求时，您需要在执行后停止执行，`delete_user()`例如使用`die()`call

```
function delete_user()
{
$user_id = $this->input->post('user_id');
$this->load->model("m_user");
$this->m_user->delete_user($user_id);
echo $result;
echo $user_id;
die();
} 
```

同样在您的`JS`代码中，您没有提供删除功能的控制器名称

```
 function delete_user(row_id,user_id)
{
    if (confirm('Do you really want to delete')) {

        row_id.closest('tr').remove();

        $.ajax({
            type: "POST",
            url: "<?php echo base_url();?>/controller_name_required/delete_user/",
            data: { "user_id":user_id },

            success: function(msg) {

                    //alert("Name = " + msg);
            }
        });
    } 
    else {
    // Do nothing!
    }
} 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:01:12.010

采用

```
 $this->m_user->delete($user_id); 
```

反而

```
 $this->m_user->delete_user($user_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:12:01.273

我发现一件事是

我的网址是这个

```
http://localhost/xxx/CI/user/all/ 
```

在这里，用户是一个控制器，一切都是功能。

当我尝试将数据发送到函数名称 delete_user 可能是 CI 考虑它这样

```
http://localhost/xxx/CI/user/all/delete_user/ 
```

我像这样对网址进行硬编码

```
http://localhost/xxx/CI/user/delete_user/ 
```

它告诉我，现在谁能告诉我如何解决那个 url 问题？抱歉，我是 CI 新手。

# sql - sql server 选择具有相同id的每条记录的总和

> ID：15875009
> 
> 赞同：0
> 
> 时间：2013-04-08T08:55:17.237
> 
> 标签：sql, sql-server-2008, select, cursor, sum

我有如下表..

```
r_Id     Marks
1         25
1         25   
1         25
2         30
2         30 
```

现在我想要一个查询，其中应该计算每个 r_id 的标记总和，结果应该是

```
r_Id     Sum
 1       75   
 2       60 
```

在 sql server 2008 中不使用游标或循环。请帮我做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:56:10.253

请试试：

```
SELECT 
    r_Id, 
    SUM(Marks) AS [Sum] 
FROM 
    YourTable 
GROUP BY r_Id 
```

或者

```
SELECT DISTINCT
    r_Id, 
    SUM(Marks) OVER(PARTITION BY r_Id) AS [Sum] 
FROM 
    YourTable 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T08:57:04.740

这应该这样做

```
SELECT r_Id, SUM(Marks) AS [Sum] 
FROM SomeTable 
GROUP BY r_Id;
GO 
```

我希望这有帮助。

# aem - cq: 递归删除 cq:LiveRelationship mixin

> ID：15875010
> 
> 赞同：0
> 
> 时间：2013-04-08T08:55:20.610
> 
> 标签：aem, day-cq

我在 CQ 中复制了一个完整的网站。现在我在每个站点上都有 mixin cq:LIveRelationship。我尝试使用 MultiSiteManager 将其分离，但它没有为我带来此站点的分离选项。删除此状态的唯一方法是为每个站点分离 mixin。是否有可能删除完整的“文件夹”递归的mixin？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:34:43.860

您可以尝试使用批量编辑器从页面中删除 mixin。您当然可以搜索类型/混合。您也可以删除 mixin 属性。

请参阅 [批量编辑器 - 搜索和编辑内容]( [http://dev.day.com/docs/en/cq/current/administering/bulk_editor.html#Searching](http://dev.day.com/docs/en/cq/current/administering/bulk_editor.html#Searching) and Editing Content)。

如果您要更新的页面最多只有一个 mixin，您也许可以删除 jcr:mixinTypes 属性。如果还有其他混入，您可能需要遍历树并删除节点上的混入。

# java - 使用正则表达式从字符串中提取 IP 地址

> ID：15875013
> 
> 赞同：19
> 
> 时间：2013-04-08T08:55:26.710
> 
> 标签：java, regex, ip

在应用程序中，我得到包含 IP 地址的字符串，但这些字符串没有精确的格式。我们所知道的是，这些字符串可能包含一个 IP 地址。

这是字符串的外观示例：

*   “XPS端口”
*   “IP_10.29.167.187”
*   “10.29.166.193”

我想获得一个Java代码，如果有一个字符串，则提取字符串的IP地址，或者如果字符串不包含IP地址，则返回“”。

我试过这段代码，但它不起作用：

```
String IPADDRESS_PATTERN = 
        "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
        "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
        "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
        "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$";

Pattern pattern = Pattern.compile(IPADDRESS_PATTERN);
Matcher matcher = pattern.matcher(ipString);
        if (matcher.find()) {
            return matcher.group();
        }
        else{
            return "0.0.0.0";
        } 
```

我很确定使用 RegExp 是实现这一目标的最佳方法，但我对这些不太擅长，所以有人可以帮我找到好的 RegExp 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-08T09:19:10.673

理查德的链接帮助我找到了答案。这是工作代码：

```
String IPADDRESS_PATTERN = 
        "(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";

Pattern pattern = Pattern.compile(IPADDRESS_PATTERN);
Matcher matcher = pattern.matcher(ipString);
if (matcher.find()) {
    return matcher.group();
} else{
    return "0.0.0.0";
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-08T08:59:54.923

`IPV4_PATTERN = "^(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}$"`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-26T11:08:05.350

检查此解决方案以验证**IPV4 和 IPV6 地址**。

```
/**
 * This class provides a variety of basic utility methods that are not
 * dependent on any other classes within the org.jamwiki package structure.
 */
public class Utilities {
  private static Pattern VALID_IPV4_PATTERN = null;
  private static Pattern VALID_IPV6_PATTERN = null;
  private static final String ipv4Pattern = "(([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.){3}([01]?\\d\\d?|2[0-4]\\d|25[0-5])";
  private static final String ipv6Pattern = "([0-9a-f]{1,4}:){7}([0-9a-f]){1,4}";

  static {
    try {
      VALID_IPV4_PATTERN = Pattern.compile(ipv4Pattern, Pattern.CASE_INSENSITIVE);
      VALID_IPV6_PATTERN = Pattern.compile(ipv6Pattern, Pattern.CASE_INSENSITIVE);
    } catch (PatternSyntaxException e) {
      //logger.severe("Unable to compile pattern", e);
    }
  }

  /**
   * Determine if the given string is a valid IPv4 or IPv6 address.  This method
   * uses pattern matching to see if the given string could be a valid IP address.
   *
   * @param ipAddress A string that is to be examined to verify whether or not
   *  it could be a valid IP address.
   * @return <code>true</code> if the string is a value that is a valid IP address,
   *  <code>false</code> otherwise.
   */
  public static boolean isIpAddress(String ipAddress) {

    Matcher m1 = Utilities.VALID_IPV4_PATTERN.matcher(ipAddress);
    if (m1.matches()) {
      return true;
    }
    Matcher m2 = Utilities.VALID_IPV6_PATTERN.matcher(ipAddress);
    return m2.matches();
  }
} 
```

source：[确定给定的字符串是有效的 IPv4 还是 IPv6 地址。](http://www.java2s.com/Code/Java/Network-Protocol/DetermineifthegivenstringisavalidIPv4orIPv6address.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T17:33:11.877

IP 地址正则表达式模式：

```
^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.
([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])$ 
```

有关示例的参考，请单击[此处](https://www.mkyong.com/regular-expressions/how-to-validate-ip-address-with-regular-expression/)

# linux - 在生成 ssh 之后或之前指定 match_max 有什么区别？

> ID：15875017
> 
> 赞同：0
> 
> 时间：2013-04-08T08:55:43.170
> 
> 标签：linux, buffer, expect

```
# match_max 1000000000
  set timeout 60
  spawn ssh -o "StrictHostKeyChecking no" "$username@$hostname"
  match_max 1000000000 
```

如果在我使用 ssh 之前给出了 match_max 选项，我不会得到完整的输出，`expect_out(buffer)`但是如果我在 SSH 之后给出相同的东西，我会得到正确的结果。

另外，如果我在第一种情况下使用 -d 选项，我会得到完整的输出。为什么？

另外，如何检查为我的 Linux 系统设置了多少缓冲区？我寻找`limit`命令但找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:03:08.163

关于`match_max`命令的期望手册页如下

```
match_max [-d] [-i spawn_id] [size]
defines the size of the buffer (in bytes) used internally by expect. With no size argument, the current size is returned. With the -d flag, the default size is set. (The initial default is 2000.) With the -i flag, the size is set for the named spawn id, otherwise it is set for the current process. 
```

这正是您所观察到的（因为`-i`未指定）。

# php - PHP 会话 ID - SID 的有效期是多久？

> ID：15875018
> 
> 赞同：3
> 
> 时间：2013-04-08T08:55:51.047
> 
> 标签：php, session, cookies, timeout, lifetime

从理论上讲，如果 PHP 会话 ID 存储在 cookie 中，其生命周期为 365 天，会话 ID 会在第 365 天恢复正确的会话数据，还是会由于会话生命周期设置而超时/删除相关会话数据？

我可以/应该存储和使用会话 ID 多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:59:40.807

从理论上讲，您可以随意存储它，但是您将不必要地消耗资源。默认为 20 分钟，可`php.ini`通过设置`session.gc_maxlifetime`参数进行调整。如果您需要将数据保留更长的时间，则将其放入数据库而不是会话中是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:02:23.447

> 从理论上讲，如果 PHP Session ID 存储在 Cookie 中，其生命周期为 365 天，那么 Session ID 会在第 365 天恢复正确的会话，还是相关 Session 会由于 Session 生命周期设置而超时？

cookie 仅存储将标识会话的会话 ID。

如果存在对应于该 id 的会话文件，则会话将被恢复——否则，将创建一个具有该 id 的新空会话。

该`session.gc_maxlifetime`选项的名称相当错误——实际上它是一个*最小的*生命周期。如果在最后一次访问会话文件之后已经过了这个时间跨度，则*允许*会话垃圾收集器从磁盘上擦除该文件——但不能*保证*这会立即发生，因为垃圾收集器是随机调用的（每次调用的概率是多少）也可以配置请求）。

> 我可以/应该存储和使用会话 ID 多长时间？

只要你需要它……？

这取决于您要做什么，如何配置会话等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:59:42.923

会话 ID 的最后一个与`session.gc_maxlifetime`. 检查`php.ini`或`phpinfo()`查看您的设置，默认为 1440 秒（24 分钟）。尽管如果您关闭浏览器并且不通过 cookie 或其他方式恢复会话 ID，则会话仍将关闭。

# jquery - 在 jquery 中找到 next().next() 的替代方法是什么

> ID：15875019
> 
> 赞同：10
> 
> 时间：2013-04-08T08:55:56.963
> 
> 标签：jquery

我想更改选择器旁边的元素的 css 属性。

我用过这个语法

```
$('#hide').next().next().css('display', 'block'); 
```

但我认为可以使用另一种更好的方法，例如`find()`或`eq()`

```
<li class="expandable">
    <div class="hitarea collapsable-hitarea"></div>
    <div id="hide" class="hide"></div>
    <a href="#" class=""> <strong>Stitched</strong> </a>

    <ul style="display: none;" id="hi">
        <li> <a href="#"> Hand Block Print </a> 
        </li>
        <li> <a href="#"> Designer </a> 
        </li>
        <li class="last"> <a href="#"> Screen Printed </a> 
        </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T08:58:36.247

你可以试试

```
 $('#hide').nextAll().eq(1).css('display', 'block'); 
```

[`nextAll()`](http://api.jquery.com/nextAll/)返回*所有*下一个元素，[`eq(1)`](http://api.jquery.com/eq/)返回其中的第二个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T08:59:59.933

尝试使用`.siblings`选择器：

```
$('#hide').siblings("ul").css('display', 'block'); 
```

或按索引：

```
$('#hide').siblings("ul").eq(0).css('display', 'block'); 
```

[示例 jsFiddle](http://jsfiddle.net/DUBFU/)

# sql-server - 返回最后交易日期的 SQL 视图

> ID：15875029
> 
> 赞同：0
> 
> 时间：2013-04-08T08:56:34.750
> 
> 标签：sql-server, indexing

请在这篇文章的底部找到所有必要的脚本来创建我在这里描述的场景。

设想：

我有一个“交易”表，我将所有交易存储在股票市场管理应用程序中。所有交易都包含相关信息，例如 TransactionType、TransactionAmount 等。

接下来的两个表非常简单且不言自明，即人员和公司。

然后，我有一个名为 TransactionsForCompanies 的表，其中存储了企业客户创建的所有交易。在这个表中，我只有两列： TransactionId -- 来自 Transactions 表 -- CompanyId -- 来自 Companies 表。

名为 TransactionsForPeople 的下一个表与上一个表几乎相同，但它用于识别个人创建的交易。

请查看数据库结构，我认为这很容易理解。

这是我正在尝试做的事情以及我需要帮助的地方。

我想创建一个视图，为人们提供“最后交易日期”。因此，如果一个人在上个月进行了多次交易，则此视图应该为我提供可能仅在 2 小时前进行交易的那个人的最后交易日期。当然，视图将返回所有“个人客户”的最后交易日期。

为此，我使用了 MAX 函数，并且视图运行良好。但是，因为我使用的是 MAX 函数，所以我无法为视图创建索引。结果，我遇到了性能问题，因为我的“事务”表有数百万条记录。

当然，这个想法是在另一个 SELECT 语句中使用视图，这样我就可以生成关于最活跃和最不活跃客户端的漂亮报告。此 SELECT 语句运行非常缓慢，当我查看执行计划时，瓶颈是我将我的 JOIN 加入到使用 MAX 函数的视图中。

问题：我如何以一种给我良好表现的方式为那些进行过交易的人捕获最后一个 TransactionDate？

谢谢...

```
USE [TestDb]
GO
/****** Object:  Table [dbo].[Companies]    Script Date: 4/7/2013 1:48:18 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Companies](
    [CompanyId] [int] IDENTITY(1,1) NOT NULL,
    [CompanyName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Companies] PRIMARY KEY CLUSTERED 
(
    [CompanyId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Object:  Table [dbo].[People]    Script Date: 4/7/2013 1:48:18 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[People](
    [PersonId] [int] IDENTITY(1,1) NOT NULL,
    [FirstName] [nvarchar](20) NOT NULL,
    [MiddleName] [nvarchar](20) NULL,
    [LastName] [nvarchar](20) NOT NULL,
 CONSTRAINT [PK_People] PRIMARY KEY CLUSTERED 
(
    [PersonId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Object:  Table [dbo].[Transactions]    Script Date: 4/7/2013 1:48:18 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Transactions](
    [TransactionId] [int] IDENTITY(1,1) NOT NULL,
    [TransactionType] [nvarchar](50) NOT NULL,
    [TransactionTimeStamp] [datetime] NOT NULL,
    [TransactionAmount] [money] NOT NULL,
    [Comments] [nvarchar](50) NULL,
 CONSTRAINT [PK_Transactions] PRIMARY KEY CLUSTERED 
(
    [TransactionId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Object:  Table [dbo].[TransactionsForCompanies]    Script Date: 4/7/2013 1:48:18 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TransactionsForCompanies](
    [TransactionId] [int] NOT NULL,
    [CompanyId] [int] NOT NULL,
 CONSTRAINT [PK_TransactionsForCompanies] PRIMARY KEY CLUSTERED 
(
    [TransactionId] ASC,
    [CompanyId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Object:  Table [dbo].[TransactionsForPeople]    Script Date: 4/7/2013 1:48:18 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TransactionsForPeople](
    [TransactionId] [int] NOT NULL,
    [PersonId] [int] NOT NULL,
 CONSTRAINT [PK_TransactionsForPeople] PRIMARY KEY CLUSTERED 
(
    [TransactionId] ASC,
    [PersonId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET IDENTITY_INSERT [dbo].[Companies] ON 

GO
INSERT [dbo].[Companies] ([CompanyId], [CompanyName]) VALUES (1, N'Company A')
GO
INSERT [dbo].[Companies] ([CompanyId], [CompanyName]) VALUES (2, N'Company B')
GO
INSERT [dbo].[Companies] ([CompanyId], [CompanyName]) VALUES (3, N'Company C')
GO
SET IDENTITY_INSERT [dbo].[Companies] OFF
GO
SET IDENTITY_INSERT [dbo].[People] ON 

GO
INSERT [dbo].[People] ([PersonId], [FirstName], [MiddleName], [LastName]) VALUES (1, N'John', NULL, N'Doe')
GO
INSERT [dbo].[People] ([PersonId], [FirstName], [MiddleName], [LastName]) VALUES (2, N'Jane', NULL, N'Smith')
GO
INSERT [dbo].[People] ([PersonId], [FirstName], [MiddleName], [LastName]) VALUES (3, N'Betsy', NULL, N'Green')
GO
SET IDENTITY_INSERT [dbo].[People] OFF
GO
SET IDENTITY_INSERT [dbo].[Transactions] ON 

GO
INSERT [dbo].[Transactions] ([TransactionId], [TransactionType], [TransactionTimeStamp], [TransactionAmount], [Comments]) VALUES (1, N'BUY', CAST(0x0000A1990122F5C4 AS DateTime), 300.0000, N'Got it!')
GO
INSERT [dbo].[Transactions] ([TransactionId], [TransactionType], [TransactionTimeStamp], [TransactionAmount], [Comments]) VALUES (2, N'BID', CAST(0x0000A19901236069 AS DateTime), 1753.5000, N'My best offer...')
GO
INSERT [dbo].[Transactions] ([TransactionId], [TransactionType], [TransactionTimeStamp], [TransactionAmount], [Comments]) VALUES (3, N'SELL', CAST(0x0000A19901236AF5 AS DateTime), 1753.5000, N'Will take it!')
GO
INSERT [dbo].[Transactions] ([TransactionId], [TransactionType], [TransactionTimeStamp], [TransactionAmount], [Comments]) VALUES (4, N'BUY', CAST(0x0000A19901236C21 AS DateTime), 1753.5000, N'Finalize purchase.')
GO
SET IDENTITY_INSERT [dbo].[Transactions] OFF
GO
INSERT [dbo].[TransactionsForCompanies] ([TransactionId], [CompanyId]) VALUES (3, 1)
GO
INSERT [dbo].[TransactionsForPeople] ([TransactionId], [PersonId]) VALUES (1, 2)
GO
INSERT [dbo].[TransactionsForPeople] ([TransactionId], [PersonId]) VALUES (2, 3)
GO
INSERT [dbo].[TransactionsForPeople] ([TransactionId], [PersonId]) VALUES (4, 3)
GO
ALTER TABLE [dbo].[Transactions] ADD  CONSTRAINT [DF_Transactions_TransactionTimeStamp]  DEFAULT (getutcdate()) FOR [TransactionTimeStamp]
GO
ALTER TABLE [dbo].[TransactionsForCompanies]  WITH CHECK ADD  CONSTRAINT [FK_TransactionsForCompanies_Companies] FOREIGN KEY([CompanyId])
REFERENCES [dbo].[Companies] ([CompanyId])
GO
ALTER TABLE [dbo].[TransactionsForCompanies] CHECK CONSTRAINT [FK_TransactionsForCompanies_Companies]
GO
ALTER TABLE [dbo].[TransactionsForCompanies]  WITH CHECK ADD  CONSTRAINT [FK_TransactionsForCompanies_Transactions] FOREIGN KEY([TransactionId])
REFERENCES [dbo].[Transactions] ([TransactionId])
GO
ALTER TABLE [dbo].[TransactionsForCompanies] CHECK CONSTRAINT [FK_TransactionsForCompanies_Transactions]
GO
ALTER TABLE [dbo].[TransactionsForPeople]  WITH CHECK ADD  CONSTRAINT [FK_TransactionsForPeople_People] FOREIGN KEY([PersonId])
REFERENCES [dbo].[People] ([PersonId])
GO
ALTER TABLE [dbo].[TransactionsForPeople] CHECK CONSTRAINT [FK_TransactionsForPeople_People]
GO
ALTER TABLE [dbo].[TransactionsForPeople]  WITH CHECK ADD  CONSTRAINT [FK_TransactionsForPeople_Transactions] FOREIGN KEY([TransactionId])
REFERENCES [dbo].[Transactions] ([TransactionId])
GO
ALTER TABLE [dbo].[TransactionsForPeople] CHECK CONSTRAINT [FK_TransactionsForPeople_Transactions]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:09:11.627

`max()`如您所说，如果您想使用，您将无法创建索引视图。

怎么样：

(i) 将主键更改为非聚集，然后`TransactionTimestamp`为`Transactions`表添加聚集索引？

`TransactionId, TransactionTimestamp`(ii)在`Transactions`表上添加索引。

# java - Tomcat进程突然崩溃

> ID：15875030
> 
> 赞同：4
> 
> 时间：2013-04-08T08:56:37.590
> 
> 标签：java, linux, jvm, tomcat6

尝试在 64 位 linux 机器上诊断一些奇怪的 Tomcat 6 和/或 JVM 错误：

> 操作系统版本：RED HAT ENTERPRISE LINUX 服务器版本 6.3 (SANTIAGO)
> 服务器型号：VMWARE 虚拟平台 ()

我正在虚拟机上运行一些应用程序测试并面临一个奇怪的问题。问题发生在某些虚拟机上，其中正好有 2 个进程正在运行：Tomcat 应用程序服务器进程（java 进程）和一个监控进程，在一个随机点，在随机执行几个小时后，可以在 catalina.out 上找到以下消息（服务器日志）失败的VM（问题并不总是发生在同一台机器上）：

```
org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-50100
INFO: Stopping service Catalina
org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8080 
```

此后，Tomcat 进程关闭，执行失败。在内存或 CPU 使用方面看不到任何选择。在 /var/logs 下看不到系统消息。

1.  在第一阶段，我们怀疑外部信号正在杀死我们的 Tomcat 进程，我们尝试将该`-Xrs`标志用于进程的 JVM 参数，但问题仍然存在。

    java 标志 ( `-xrs`) 应该防止 Java 运行时环境处理此类异常信号`SIGSEGV`，`SIGABRT`但无济于事

    在添加`xrs`标志之前，我们看到`INFO: Pausing Coyote HTTP/1.1 on http-50100`了由于结果信号而发生的错误

    添加 `xrs 标志后，kettle/tomcat 的行为方式相同，并且在日志文件中没有任何错误的情况下崩溃。

2.  在相关进程上运行 starce 命令会给我们以下输出：

    附加进程 12917 - 中断退出 futex（0x7f6b9e8ab9d0，FUTEX_WAIT，12918，NULLPANIC：附加 pid 12917 以 143 退出

    我们不能运行`starce -f`以包含所有线程，因为它会导致我们的应用程序卡住。但是，使用命令杀死子进程的`kill`行为类似——我们看到父 JVM 退出并出现错误代码 143，我们还看到发送到子进程的信号。

3.  我们还使用 java `-XX:+HeapDumpOnOutOfMemoryError`optind 运行，为由于内存不足错误而导致的 jvm 崩溃创建堆转储，但由于崩溃，没有创建核心转储或堆转储。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:24:42.047

有没有可能，在崩溃之前，有某种内存耗尽，所以 java 进程可能会被 OOM 杀死。另外，我发现一个链接[http://bugs.centos.org/view.php?id=4059](http://bugs.centos.org/view.php?id=4059)描述了一个类似的问题。

# c - 如何在不收到此警告的情况下打印以下信息？

> ID：15875033
> 
> 赞同：1
> 
> 时间：2013-04-08T08:56:40.173
> 
> 标签：c, printf

我有以下代码：

```
#define HELLO
"this is a command to ........." //this macros is very long, and it is greater than length 509 
```

然后我用`printf(HELLO);`它打印出来，但我收到以下警告：

警告：字符串长度'526'大于长度'509' ISO C90编译器需要支持，我知道字符串太长，大于509，但是如何消除这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:07:44.257

如果可能，您可以使用符合 C99 的编译器，C99 中的限制是 4,095 个字符。

如果做不到这一点，请在运行时（一次）将字符串构建到全局字符数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:11:11.243

1) 将其分成 2 个字符串 #define a "abc" #define b "def" #define c (ab) 现在两者都`printf(a b)`可以`printf(c)`工作

2）只是抑制警告，（代码正在工作，不是吗？？:)）（[http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)）

3）哦，刚刚看到第三个选项，使用不同的标准

第一个没用，解决不了问题

# java - PostgreSQL 之间的子句

> ID：15875034
> 
> 赞同：1
> 
> 时间：2013-04-08T08:56:41.997
> 
> 标签：java, postgresql, stored-procedures

我在这里有这个示例语句：

```
WHERE e.modified_date::DATE between '2013-04-02'::DATE
AND '2013-04-02'::DATE 
```

注意：
这些日期实际上是变量。

在 pgAdmin 中，运行这将导致这个示例表：

```
username  modified_date
Sample     2013-04-02
Sample1    2013-04-02 
```

这是我想要的结果。

但是，从 Java 调用 proc 将一无所获。更改第二个日期将返回之前的示例表。如果日期小于第二个变量，PostgreSQL 似乎正在评估日期。我错过了什么吗？

注：`modified_date`是`timestamp`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:02:15.310

栏目详情

`modified_date`：：`TIMESTAMP`

`modified_date`这是在字段中插入的实际值

没有时区的modified_date
时间戳

2013-04-02 14:05:45.8611
2013-04-02 14:09:14.5422

简要说明为什么带有`WHERE`条款的测试程序

```
WHERE e.modified_date >= '2013-04-02'::TIMESTAMP 
AND e.modified_date <='2013-04-02'::TIMESTAMP 
```

什么都不返回：

- 将`String`值`'2013-04-02'`转换为`TIMESTAMP`数据类型将导致`'2013-04-02 00:00:00'`
- 首先，该`WHERE`子句验证字段`modified_date`（参考值）是否大于或等于`'2013-04-02 00:00:00'`; 另一方面，它将返回`false`
- 其次，该`WHERE`子句验证字段`modified_date`（参考值）小于或等于`'2013-04-02 00:00:00'`; 这将返回为`false`

这种解释仅表明，`SELECT`当`WHERE`且仅当`modified_date`恰好`'2013-04-02 00:00:00'`

至于这个`WHERE`条款：

```
WHERE e.modified_date::DATE BETWEEN '2013-04-02'::DATE
AND '2013-04-02'::DATE 
```

将两者`modified_date`和`String`值转换为`DATE`数据类型将导致以下值：
`modified_date`as `TIMESTAMP`= `'2013-04-02 14:05:45.8611'`
`modified_date`as `DATE`= `'2013-04-02'`

`modified_date`as `TIMESTAMP`= `'2013-04-02 14:09:14.5422'`
`modified_date`as `DATE`= `'2013-04-02'`

`String value`as `STRING`= `'2013-04-02'`
`String value`as `DATE`=`'2013-04-02'`

注意：
这也可以在不将`String`值转换为`DATE`数据类型的情况下完成。铸造`String`我的一部分是为了我的验证目的。

要回答我的问题，请使用以下`WHERE`条款：

```
WHERE e.modified_date::DATE between '2013-04-02'::DATE
AND '2013-04-02'::DATE 
```

不返回任何东西只是我调用了使用错误`WHERE`子句的测试存储过程。

# python - 在列表中使用一组元组在内部搜索

> ID：15875036
> 
> 赞同：0
> 
> 时间：2013-04-08T08:56:44.053
> 
> 标签：python

我需要使用 Python 编写的特定函数的帮助：

我有一个列表，其中包含一组元组，每个元组包含 4 组有意义的信息，此函数旨在在其中一个元组中找到一个字符串，然后返回元组的其余部分（或在测试的情况下为真）或如果在元组中找不到字符串，它只会返回 False。

有问题的字符串意味着在开始时输入，以及列表（或分配给该列表的变量）我试图迭代列表但它似乎每次都返回 True 或 False 取决于如何我写迭代。似乎也无法使用：

如果列表中的字符串：返回true

有人对此有任何解决方案吗？它真的让我难以置信。

编辑：对不起，我将添加到目前为止的代码；这真的没什么，因为我没有做太多

```
def search_info(string, list1):
list1 = [('Donut', '320', '4.00'), ('Apple Pie', '200', '3.20')]
    for c in ennumerate(list1):
        if name in c:
            return True
        else:
            return False 
```

我知道这近在咫尺，但我不断陷入死胡同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:19:19.347

如果在循环中找不到字符串，也许你可以只返回 False ？

```
list1 = [('Donut', '320', '4.00'), ('Apple Pie', '200', '3.20')]

def search_info(name, list1):
    for c in list1:
        if name in c:
            return True
    return False 
```

此外，`enumerate`如果您不需要索引，则不必使用。

# python - PyDev 使用模块共享夹具运行 pytest 单元测试失败

> ID：15875038
> 
> 赞同：13
> 
> 时间：2013-04-08T08:56:45.537
> 
> 标签：python, unit-testing, pydev, pytest

我在使用 pyDev 运行 pytest 单元测试时遇到问题。我尝试使用模块共享夹具和终结器运行单元测试，该终结器应在最后一次测试后执行。但是在 pyDev 中运行单元测试时，它不会使用相同的实例，而是创建两个不同的实例。该示例在控制台中或从 pydev 中的脚本启动时运行良好。

我在 Win7 上使用平台 Python 2.7.3、pytest-2.3.4、pyDev 2.7.3.2013031601、Eclipse 4.2。

我尝试了[http://pytest.org/latest/fixture.html中的示例](http://pytest.org/latest/fixture.html)

pydev 的输出是：

```
============================= test session starts ==============================
platform win32 -- Python 2.7.3 -- pytest-2.3.4
__________________________________ test_ehlo ___________________________________
smtp = <smtplib.SMTP instance at 0x027F9080>
__________________________________ test_noop ___________________________________
smtp = <smtplib.SMTP instance at 0x027FF3C8> 
```

控制台输出为：

```
============================= test session starts ==============================
platform win32 -- Python 2.7.3 -- pytest-2.3.4
__________________________________ test_ehlo ___________________________________
smtp = <smtplib.SMTP instance at 0x01E51288>
__________________________________ test_noop ___________________________________
smtp = <smtplib.SMTP instance at 0x01E51288> 
```

这是预期的行为。我究竟做错了什么？？

使用的代码是conftest.py：

```
import pytest
import smtplib

@pytest.fixture(scope="module")
def smtp():
return smtplib.SMTP("merlinux.eu") 
```

test_smtplib.py 中的测试代码：

```
# content of test_module.py
def test_ehlo(smtp):
    response = smtp.ehlo()
    assert response[0] == 250
    assert "merlinux" in response[1]
    assert 0  # for demo purposes

def test_noop(smtp):
    response = smtp.noop()
    assert response[0] == 250
    assert 0  # for demo purposes 
```

从脚本运行测试：

```
import pytest,os
os.chdir("[path_to_tests]/tests") #your file location
pytest.main(['-s', 'test_smtplib.py']) 
```

任何建议，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T07:18:31.417

似乎这是 pydev 方面长期存在的错误。我刚刚修复它并向 Pydev 提交了拉取请求，请参阅[https://github.com/fabioz/Pydev/pull/120](https://github.com/fabioz/Pydev/pull/120)。同时，您可能会取出一点点更改并应用到您安装的 pydev 版本，从而启用正确的 pydev/pytest 运行范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T17:49:26.440

我没有 Eclipse，但我一直在查看 Pydev 和 pytest 的源代码。pytest 默认情况下不使用多处理，但如果您安装了 xdist，它将使用。也许你有它？或者也许 Eclipse 已经安装了它？

如果您仍然有可用的系统，您可以尝试在您的 pytest 参数中设置以下选项吗？[它只是告诉 pytest 在使用此处记录的](http://pytest.org/latest/xdist.html#speed-up-test-runs-by-sending-tests-to-multiple-cpus)xdist 时使用一个进程。

`-n=1`或者它会更喜欢`-n 1`

如果这不起作用，那么这也不应该起作用，但你能试试吗？***像以前一样在pytest***选项中使用下面的选项（而不是在 pydev 测试运行器选项中）来启用模块级测试。这是一个 pydev 测试运行器选项，所以我猜它会导致错误，但也许其他一些关闭该选项的代码会使用它。

`--split_jobs=module`或者也许再次`--split_jobs module`

# c# - 遇到某个值时如何更改 DataGrid 行颜色？

> ID：15875040
> 
> 赞同：2
> 
> 时间：2013-04-08T08:56:53.030
> 
> 标签：c#, wpf, datagrid

我有以下数据网格：

```
<DataGrid AutoGenerateColumns="False" Name="dgPanelLogs">
    <DataGrid.Columns>
        <DataGridTextColumn Header="ID" SortMemberPath="ID"
            x:Name="columnID" 
            Binding="{Binding Path=ID}"
            IsReadOnly="True"
            Width="50*"
            SortDirection="Descending" >
        </DataGridTextColumn>

        <DataGridTextColumn Header="Time" SortMemberPath="Time" 
            x:Name="columnTime" 
            Binding="{Binding Path= Time, StringFormat='{}{0:dd/MM/yyyy HH:mm:ss}'}"
            IsReadOnly="True"
            Width="140*"
            SortDirection="Descending">
        </DataGridTextColumn>

        <DataGridTextColumn Header="Event" SortMemberPath="Event"
            x:Name="columnMessage" 
            Binding="{Binding Path=Message}"
            IsReadOnly="True"
            Width="350*"
            SortDirection="Descending" >
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我的新要求是在遇到某个值时将行更改为红色。具体来说，我必须用每一行的数据检索一个新的布尔值，如果它是真的，我需要将该行的文本设置为红色。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:05:15.463

我认为以下帖子会对您有所帮助。

> [link1](https://stackoverflow.com/q/6260571/873979) : StackOverflow 问题及答案
> 
> [链接2](http://msdn.microsoft.com/en-us/library/ms745683.aspx)：样式和模板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:17:16.557

最好的方法是使用样式。

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridRow}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Alarm}" Value="True">
                <Setter Property="Foreground" Value="Red" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.Resources> 
```

我现在无法测试它。我认为你必须在 Binding 上设置一个 RelativeSource。

# java - 在应用引擎上第一次调用球衣服务时出现异常

> ID：15875041
> 
> 赞同：4
> 
> 时间：2013-04-08T08:56:59.943
> 
> 标签：java, json, google-app-engine

我在 app-engine 上使用 jersey 开发了一些休息服务。当我第一次调用此服务时，我遇到了一个例外。

```
Error for /rest/project/deleteoldfiles
java.lang.NoClassDefFoundError: com/google/appengine/repackaged/org/codehaus/jackson/xc/JaxbAnnotationIntrospector
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospector(MapperConfigurator.java:171)
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospectors(MapperConfigurator.java:146)
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.MapperConfigurator._setAnnotations(MapperConfigurator.java:133)
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.MapperConfigurator.getDefaultMapper(MapperConfigurator.java:70)
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:648)
    at com.google.appengine.repackaged.org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:500)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1479)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

此异常仅在第一次调用时发生。

这个问题在这里被唤起： [Appengine java - Jersey/Jackson JaxbAnnotationIntrospector NoClassDefFoundError](https://stackoverflow.com/questions/10860142/appengine-java-jersey-jackson-jaxbannotationintrospector-noclassdeffounderror)

我尝试应用建议的解决方案并将 jackson-xc 库添加到我的项目中。但我仍然有例外。

我已经使用 maven 添加了库：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-xc</artifactId>
    <version>1.9.12</version>
</dependency> 
```

任何人都知道如何实施该解决方案或有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:04:45.380

好的，我想通了，[http](http://wiki.fasterxml.com/JacksonDownload) ://wiki.fasterxml.com/JacksonDownload 并下载 jackson-all-1.8.10.jar。然后将其添加到您的项目中

# android - android共享偏好一键多值

> ID：15875043
> 
> 赞同：2
> 
> 时间：2013-04-08T08:57:00.617
> 
> 标签：android, sharedpreferences

我的查询很简单，在谷歌上找不到答案：

例如：

存储库 1 -> 用户名 1 -> 密码 1

存储库 2 -> 用户名 2 -> 密码 2

存储库 3 -> 用户名 3 -> 密码 3

如上所述，我有一个包含三个存储库的对话框。当用户自动选择存储库时，会弹出另一个对话框以输入用户名和密码。

因此，我想要实现的是使用单个密钥将存储库名称、用户名和密码保存在共享首选项中。

我知道如何使用单个键和值创建共享首选项对象。我正在寻找的是具有单个键和 3 个值的共享首选项 obj。

真的有可能吗？如果是的话，你可以告诉我一些方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:02:44.440

您不能在同一个[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)文件中使用单个键存储*三个值*，至少不能在对象的抽象级别上。`SharedPreferences`

您*可以*做的是存储 n 个 3 元组的 JSON 表示（我认为这就是您所需要的）。换句话说，存储一个由[JSONObject的](http://developer.android.com/reference/org/json/JSONObject.html)[JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)组成的字符串。这样，您就不必关心分隔符、转义和其他此类烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:02:47.067

```
SharedPreferences prefs = getSharedPreferences(getPathForUser(username, password) + PREF_RESOURCES_NAME, MODE_PRIVATE);

public static String getPathForUser(String username, String password) {
        String sUsername = null;
        String sPassword = null;

        // sUsername
        if (username != null && username.trim().length() > 0) {
            sUsername = username.trim();
        } else {
            sUsername = "defaultUsername";
        }

        // sPassword
        if (password != null && password.trim().length() > 0) {
            sPassword = password.trim();
        } else {
            sPassword = "defaultPassword";
        }

        try {
            return URLEncoder.encode(sUsername, "UTF-8") + "__" + URLEncoder.encode(sPassword, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return "";
        }
    } 
```

# jquery - 单击按钮时如何获取先前选择的下拉值？

> ID：15875047
> 
> 赞同：2
> 
> 时间：2013-04-08T08:57:10.803
> 
> 标签：jquery, asp.net

单击按钮时如何获取先前选择的下拉值。我参考下面的编码

```
 $(".addToButton").live('click', function (e) {
          var sel = $(this).prevAll(".addToList:first"),
          val = sel.val(),
          text = sel.find(':selected').text();    
    }); 
```

但它不起作用。单击按钮时，我应该如何获得先前选择的下拉值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:58:25.740

您不能向控件询问以前的属性值。如果您需要记住它，则需要将其显式存储在某个变量中。

您可以做的是创建一个堆栈，然后在每次更改时推送下拉框的新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:02:32.137

**尝试以下代码：**

```
 (function () {
            var prevVal;

            $("select").focus(function () {
                // For storing current value on focus and on change
                prevVal = this.value;
            }).change(function() {

                // Get new value in previous varible storage
                prevVal= this.value;
            });
          $("btnGet").click(function(){
 alert("This is previous value: "+prevVal);
});

        })(); 
```

希望它有帮助。

# reporting-services - 发布报告后列中的空单元格值

> ID：15875051
> 
> 赞同：0
> 
> 时间：2013-04-08T08:57:15.507
> 
> 标签：reporting-services, ssrs-2008, bids

我在 SSRS (BIDS) 中有一份报告，其中显示了七个不同的列。第一个显示名称。另一个以数字/货币格式显示一些数据。所有数据都来自同一个数据集。在预览中查看时会显示所有数据。然后我发布并尝试显示它，所有列都显示数据，除了第一个，带有名称的列......显示的列与名称完全相同，所以没有问题，就像名称是不可见的一样。有谁之前经历过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:31:58.697

我不得不更改数据集从中获取数据的字段。我将我的名字改为只有“维度路径”+“.[MEMBER_UNIQUE_NAME]。然后我添加了一个新的查询字段，字段源以“.[MEMBER_CAPTION]”结尾，见图。然后我使用“member_caption”字段显示在列中。

现在它在 BIDS 和外部环境中都有效。

![数据集属性](https://i.stack.imgur.com/9BOuY.png)

# log4j - 对 drl 文件中的所有规则使用单个记录器实例

> ID：15875052
> 
> 赞同：0
> 
> 时间：2013-04-08T08:57:16.787
> 
> 标签：log4j, drools

我正在使用 log4j 从 drl 文件执行日志记录。我为 drl 文件中的每个规则创建一个单独的记录器实例。有没有办法创建一个单一的记录器实例，可以在 drl 文件中定义的所有规则中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:37:35.037

通过在您的 *.drl 中创建一个全局变量：

```
global Logger logger; 
```

在 *.java 中做：

```
kSession.setGlobal("logger", myLogger); 
```

# java - useBean 类 Student 的值无效

> ID：15875055
> 
> 赞同：2
> 
> 时间：2013-04-08T08:57:34.127
> 
> 标签：java, netbeans, javabeans

**我发现了很多与我的标题相同的问题，但没有一个有用。**

我正在尝试运行应加载类的 JSP 页面，但出现此错误：

![在此处输入图像描述](https://i.stack.imgur.com/TXUWJ.png)

我看到很多问题都回答为“类应该进入 WEB-INF 目录”，但问题是 Netbeans 不允许创建打包到该文件夹​​中。包在“源包”目录中，所以我把它放在那里。我创建了一个名为“Package”的包，里面有一个“Student”类：

```
package Package;

import java.beans.*;
import java.io.Serializable;

/**
 *
 * @author ramy
 */
public class Student implements Serializable {

    public static final String PROP_SAMPLE_PROPERTY = "sampleProperty";
    private String sampleProperty;
    private PropertyChangeSupport propertySupport;

    public Student() {
        propertySupport = new PropertyChangeSupport(this);
    }

    public String getSampleProperty() {
        return sampleProperty;
    }

    public void setSampleProperty(String value) {
        String oldValue = sampleProperty;
        sampleProperty = value;
        propertySupport.firePropertyChange(PROP_SAMPLE_PROPERTY, oldValue, sampleProperty);
    }

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        propertySupport.addPropertyChangeListener(listener);
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        propertySupport.removePropertyChangeListener(listener);
    }
} 
```

这是 JSP：

```
<%@page import="Package.Student" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <jsp:useBean id="student" class="Student" />
    </body>
</html> 
```

我也尝试了很多其他的方式，比如写作*并删除导入指令，或在 WEB-INF 目录中创建一个名为“classes”的文件夹，其中包含一个名为“Package”的文件夹（不是包），但无事可做。这样做的正确方法是什么？*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:17:54.293

首先，您应该修改 usebean 标记以使用完整的类名作为类属性值。因此，您应该使用 Package.Student 作为您的班级价值。顺便说一句，约定是以小写字符开头的包名称，因此您应该将其更改为 package.Student..

然后，使用 ANT 甚至更好的 Maven 为您创建一个 WAR 文件。默认情况下，它会将您的所有课程放在适当的位置，例如 WEB-INF/classes/Package/Student.class ... 如果您没有那么多时间，只需使用层次结构 {WARROOT}/WEB-INF 创建 WAR 文件/classes/Package/Student.class .. 当你的 WAR 部署在 web 服务器上时说 tomcat，你不应该得到这个异常......

希望能帮助到你*

# python - xmpppy 创建用户帐户

> ID：15875057
> 
> 赞同：0
> 
> 时间：2013-04-08T08:57:43.753
> 
> 标签：python, xmpp

我搜索了如何在 Python 中创建 Openfire 帐户并找到以下[答案](https://stackoverflow.com/questions/5131982/is-there-any-python-xmpp-library-that-supports-adding-removing-users)。

我尝试`Joe Hildebrand`在运行 Openfire 3.8.1 的机器上运行代码

```
python register.py foo@localhost bar 
```

创建一个帐户。

但是，我得到“错误！” 信息。

有什么我错过的吗？

**编辑**
删除并重`, debug[]` 试后，我收到以下消息：

```
Invalid debugflag given: always  
Invalid debugflag given: nodebuilder  
DEBUG:  
DEBUG: Debug created for /usr/local/lib/python2.7/dist-packages/xmpppy-0.5.0rc1-py2.7.egg/xmpp/client.py  
DEBUG:  flags defined: always,nodebuilder  
DEBUG: socket       start Plugging <xmpp.transports.TCPsocket instance at 0x19991b8> into <xmpp.client.Client instance at 0x1988fc8>  
DEBUG: socket       warn  An error occurred while looking up _xmpp-client._tcp.localhost  
DEBUG: socket       start Successfully connected to remote host ('localhost', 5222)  
DEBUG: dispatcher   start Plugging <xmpp.dispatcher.Dispatcher instance at 0x199b2d8> into <xmpp.client.Client instance at 0x1988fc8>  
DEBUG: dispatcher   info  Registering namespace "unknown"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(unknown)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(unknown)  
DEBUG: dispatcher   info  Registering namespace "http://etherx.jabber.org/streams"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   info  Registering namespace "jabber:client"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "iq" as <class 'xmpp.protocol.Iq'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "presence" as <class 'xmpp.protocol.Presence'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "message" as <class 'xmpp.protocol.Message'>(jabber:client)  
DEBUG: dispatcher   info  Registering handler <bound method Dispatcher.streamErrorHandler of <xmpp.dispatcher.Dispatcher instance at 0x199b2d8>> for "error" type-> ns->(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   warn  Registering protocol "error" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: socket       sent  <?xml version='1.0'?>  
  <stream:stream xmlns="jabber:client" to="localhost" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" >  
DEBUG: socket       got   <?xml version='1.0' encoding='UTF-8'?>  
  <stream:stream xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client" from="mymachine" id="1724a327" xml:lang="en" version="1.0">  
DEBUG: socket       got   <stream:features>  
  <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls">  
  </starttls>  
  <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">  
  <mechanism>DIGEST-MD5</mechanism>  
  <mechanism>PLAIN</mechanism>  
  <mechanism>ANONYMOUS</mechanism>  
  <mechanism>CRAM-MD5</mechanism>  
  </mechanisms>  
  <compression xmlns="http://jabber.org/features/compress">  
  <method>zlib</method>  
  </compression>  
  <auth xmlns="http://jabber.org/features/iq-auth"/>  
  <register xmlns="http://jabber.org/features/iq-register"/>  
  </stream:features>  
DEBUG: dispatcher   warn  Unknown stanza: features  
DEBUG: dispatcher   ok    Dispatching unknown stanza with type-> props->[u'urn:ietf:params:xml:ns:xmpp-tls', u'urn:ietf:params:xml:ns:xmpp-sasl', u'http://jabber.org/features/compress', u'http://jabber.org/features/iq-auth', u'http://jabber.org/features/iq-register'] id->None  
DEBUG: tls          start Plugging <xmpp.transports.TLS instance at 0x199b908> into <xmpp.client.Client instance at 0x1988fc8>  
DEBUG: tls          ok    TLS supported by remote server. Requesting TLS start.  
DEBUG: dispatcher   info  Registering handler <bound method TLS.StartTLSHandler of <xmpp.transports.TLS instance at 0x199b908>> for "proceed" type-> ns->(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: dispatcher   warn  Registering namespace "urn:ietf:params:xml:ns:xmpp-tls"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: dispatcher   warn  Registering protocol "proceed" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: dispatcher   info  Registering handler <bound method TLS.StartTLSHandler of <xmpp.transports.TLS instance at 0x199b908>> for "failure" type-> ns->(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: dispatcher   warn  Registering protocol "failure" as <class 'xmpp.protocol.Protocol'>(urn:ietf:params:xml:ns:xmpp-tls)  
DEBUG: socket       sent  <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>  
DEBUG: socket       got   <proceed xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>  
DEBUG: dispatcher   ok    Got urn:ietf:params:xml:ns:xmpp-tls/proceed stanza  
DEBUG: dispatcher   ok    Dispatching proceed stanza with type-> props->[] id->None  
DEBUG: tls          ok    Got starttls proceed response. Switching to TLS/SSL...  
DEBUG: dispatcher   stop  Plugging <xmpp.dispatcher.Dispatcher instance at 0x199b2d8> out of <xmpp.client.Client instance at 0x1988fc8>.  
DEBUG: dispatcher   start Plugging <xmpp.dispatcher.Dispatcher instance at 0x19a4560> into <xmpp.client.Client instance at 0x1988fc8>  
DEBUG: dispatcher   info  Registering namespace "unknown"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(unknown)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(unknown)  
DEBUG: dispatcher   info  Registering namespace "http://etherx.jabber.org/streams"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   info  Registering namespace "jabber:client"  
DEBUG: dispatcher   info  Registering protocol "unknown" as <class 'xmpp.protocol.Protocol'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "default" as <class 'xmpp.protocol.Protocol'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "iq" as <class 'xmpp.protocol.Iq'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "presence" as <class 'xmpp.protocol.Presence'>(jabber:client)  
DEBUG: dispatcher   info  Registering protocol "message" as <class 'xmpp.protocol.Message'>(jabber:client)  
DEBUG: dispatcher   info  Registering handler <bound method Dispatcher.streamErrorHandler of <xmpp.dispatcher.Dispatcher instance at 0x19a4560>> for "error" type-> ns->(http://etherx.jabber.org/streams)  
DEBUG: dispatcher   warn  Registering protocol "error" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)  
DEBUG: socket       sent  <?xml version='1.0'?>  
  <stream:stream xmlns="jabber:client" to="localhost" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" >  
DEBUG: socket       sent  <iq to="localhost" type="get" id="1">  
  <query xmlns="jabber:iq:register" />  
  </iq>  
DEBUG: dispatcher   wait  Waiting for ID:1 with timeout 25...  
DEBUG: socket       got   <?xml version='1.0' encoding='UTF-8'?>  
  <stream:stream xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client" from="mymachine" id="1724a327" xml:lang="en" version="1.0">  
  <stream:features>  
  <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">  
  <mechanism>DIGEST-MD5</mechanism>  
  <mechanism>PLAIN</mechanism>  
  <mechanism>ANONYMOUS</mechanism>  
  <mechanism>CRAM-MD5</mechanism>  
  </mechanisms>  
  <compression xmlns="http://jabber.org/features/compress">  
  <method>zlib</method>  
  </compression>  
  <auth xmlns="http://jabber.org/features/iq-auth"/>  
  <register xmlns="http://jabber.org/features/iq-register"/>  
  </stream:features>  
DEBUG: dispatcher   warn  Unknown stanza: features  
DEBUG: dispatcher   ok    Dispatching unknown stanza with type-> props->[u'urn:ietf:params:xml:ns:xmpp-sasl', u'http://jabber.org/features/compress', u'http://jabber.org/features/iq-auth', u'http://jabber.org/features/iq-register'] id->None  
DEBUG: socket       got   <iq type="error" id="1" from="localhost" to="mymachine/1724a327">  
  <query xmlns="jabber:iq:register"/>  
  <error code="400" type="modify">  
  <bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>  
  </error>  
  </iq>  
DEBUG: dispatcher   ok    Got jabber:client/iq stanza  
DEBUG: dispatcher   ok    Dispatching iq stanza with type->error props->[u'jabber:iq:register', u'jabber:client'] id->1  
DEBUG: dispatcher   ok    Expected stanza arrived!  
DEBUG: socket       sent  <iq to="localhost" type="set" id="2">  
  <query xmlns="jabber:iq:register">  
  <username>foo</username>  
  <password>bar</password>  
  </query>  
  </iq>
DEBUG: dispatcher   wait  Waiting for ID:2 with timeout 25...  
DEBUG: socket       got   <iq type="error" id="2" from="localhost" to="mymachine/1724a327">  
  <query xmlns="jabber:iq:register">  
  <username>foo</username>  
  <password>bar</password>  
  </query>  
  <error code="400" type="modify">  
  <bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>  
  </error>  
  </iq>  
DEBUG: dispatcher   ok    Got jabber:client/iq stanza  
DEBUG: dispatcher   ok    Dispatching iq stanza with type->error props->[u'jabber:iq:register', u'jabber:client'] id->2  
DEBUG: dispatcher   ok    Expected stanza arrived!  
Error! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:44:19.037

假设您正在连接，最常见的错误是用户已经存在，或者服务器不支持注册。

但是，您上面的错误跟踪显示您收到错误`400`，而不是 a`403`或`409`。 `403`意味着注册被关闭，并且`409`意味着用户已经存在。

我能够通过发送到无效的 JID 来复制 OpenFire 3.8.1 的问题。当您配置 OpenFire 时，您指定了一个域。该域必须位于您在 Python 脚本的命令行中指定的 JID 中。比如我`localhost`在配置的时候指定了“”。当我使用“ `foo@mymachine`”而不是“ `foo@localhost`”时，出现 400 错误。如果您需要域与机器名称不同（很常见），则使用 DNS SRV 记录（请参阅[RFC 6120，第 3.2 节](https://www.rfc-editor.org/rfc/rfc6120#section-3.2)），或更改 Python 代码，以便此行：

```
cli=xmpp.Client(jid.getDomain()) 
```

看起来像这样：

```
cli=xmpp.Client("hostname") 
```

后者是一个快速破解，但应该让你启动并运行。

# opengl - OpenGL上的三角形渐变

> ID：15875076
> 
> 赞同：5
> 
> 时间：2013-04-08T08:58:29.880
> 
> 标签：opengl, gradient, vertex-array

我正在尝试制作如下图右侧的三角形：

![三角形](https://i.imgur.com/yOrs1NR.jpg)

问题是我想要实现的是来自 C 的顶点 1 和 2 的颜色渐变。

据我所知，这是不可能的，因为顶点 C 必须有自己的颜色，它也会混合成 1 和 2 的颜色，就像图片的左三角形一样。如果我将 C 设置为中间点颜色，则会产生不希望的结果，因为三角形越高，其他顶点的颜色就越不明显。

C1 线应为黑色，C2 线应为白色。

有没有办法在OpenGL中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:12:10.540

有两种方法，但我不知道哪种方法对您的应用程序最有意义。在非常高的水平上：

1.  将纹理映射到三角形。由于渐变非常平滑，它不需要非常高的分辨率，您可以让线性过滤为您完成工作。

2.  使用着色器。设置更多工作，但也更灵活，并在任何比例/分辨率下为您提供“完美”的结果。

* * *

更新：如果你要使用着色器，想法如下。

将 a`varying vec2 coords`从顶点着色器传递到片段着色器。将点 1 的值设置为`0,0`，将点 2的值设置为 ，`1,0`将点 C 的值设置为`0,1`。要将这些值放入顶点着色器，请使用`attribute`. 不同的值将在三角形上插值，就像纹理坐标和颜色一样。所以`coords`变量被映射到你的三角形，如下所示：

```
y
1 +-----+
  |\    |
  |#\   |
  |##\  |
  |###\ |
  |####\|
0 +-----+ x
  0     1 
```

片段着色器`coords`在散列区域内的某处接收一个值。要弄清楚每种颜色需要混合多少，请计算通过`coords`和的线`0,1`，并找到它与`x`轴的交点。由于 的坐标系`coords`，这是一个简单的操作：只需`coords.x`除以`coords.y`。打电话给这个`f`。（请注意，这将在点 C 处除以零，但这是预期的，因为您从未在那里定义颜色。如果需要，您可以在着色器中显式检查。）

`coords`用字符表示和表示行，最终`c`介于0 和 1 之间：`.``f`

```
y
1 +-----+
  |\    |
  |.\   |
  |#c\  |
  |#.#\ |
  |##.#\|
0 +--f--+ x
  0     1 
```

现在假设您有`uniform vec4 colour1`和`uniform vec4 colour2`分别定义点 1 和 2 的颜色。然后将这些混合起来很简单：取`f`分数`colour2`和`1-f`分数`colour1`并将它们加在一起。GLSL`mix`函数正是这样做的。

# linux - 使用 iptables 保护 mongodb 端口

> ID：15875079
> 
> 赞同：3
> 
> 时间：2013-04-08T08:58:42.070
> 
> 标签：linux, mongodb, ubuntu, iptables

这是我的 iptables 配置：

```
sudo iptables -L -v
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     all  --  lo     any     anywhere             anywhere            
  859  103K ACCEPT     all  --  any    any     anywhere             anywhere             ctstate RELATED,ESTABLISHED
    5   260 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:ssh
    3   230 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:27017
    4   208 ACCEPT     tcp  --  any    any     anywhere             anywhere             tcp dpt:28017
    0     0 ACCEPT     all  --  any    any     localhost            anywhere            
    0     0 ACCEPT     all  --  any    any     111.111.111.111      anywhere            
    0     0 ACCEPT     all  --  any    any     222.222.222.222      anywhere            
   64  3844 DROP       all  --  any    any     anywhere             anywhere            

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 764 packets, 227K bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     all  --  any    any     localhost            anywhere            
    0     0 ACCEPT     all  --  any    any     111.111.111.111      anywhere            
    0     0 ACCEPT     all  --  any    any     222.222.222.222      anywhere 
```

如果我在浏览器中写入 ip，如果我的 mongodb 服务器使用端口 28017，我可以看到提示输入用户名和密码：

```
#ip mongodb server
000.000.000.000:28017 
```

我想对除了这两个 ip 之外的任何人关闭 mongodb 端口：

```
111.111.111.111
222.222.222.222 
```

**我该怎么做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:41:36.943

你能试试下面的iptables规则吗

```
-A INPUT -m state --state NEW -p tcp --destination-port 27017 -s 111.111.111.111 -j ACCEPT
-A INPUT -m state --state NEW -p tcp --destination-port 27017 -s 222.222.222.222 -j ACCEPT 
```

看起来您忘记输入源 IP 标志了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:41:06.737

我已经删除了我的 iptables 这两行：

```
-A INPUT -p tcp -m tcp --dport 27017 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 28017 -j ACCEPT 
```

现在无法从任何 ip 访问 mongdb 端口。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T18:14:02.913

我用来限制对 mongo 的外部访问的规则是：

```
$ sudo iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     tcp  --  localhost            anywhere             tcp dpt:27017
ACCEPT     tcp  --  localhost            anywhere             tcp dpt:28017
ACCEPT     tcp  --  111.111.111.111      anywhere             tcp dpt:27017
ACCEPT     tcp  --  222.222.222.222      anywhere             tcp dpt:27017
ACCEPT     tcp  --  111.111.111.111      anywhere             tcp dpt:28017
ACCEPT     tcp  --  222.222.222.222      anywhere             tcp dpt:28017
DROP       tcp  --  anywhere             anywhere             tcp dpt:27017
DROP       tcp  --  anywhere             anywhere             tcp dpt:28017 
```

您可以添加它们

```
sudo iptables -A INPUT -p tcp -m tcp --dport 27017 -s 127.0.0.1 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 28017 -s 127.0.0.1 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 27017 -s 111.111.111.111 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 27017 -s 222.222.222.222 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 28017 -s 111.111.111.111 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 28017 -s 222.222.222.222 -j ACCEPT
sudo iptables -A INPUT -p tcp -m tcp --dport 27017 -j DROP
sudo iptables -A INPUT -p tcp -m tcp --dport 28017 -j DROP 
```

# wpf - 固定包装面板 wpf

> ID：15875081
> 
> 赞同：13
> 
> 时间：2013-04-08T08:58:47.827
> 
> 标签：wpf, wrappanel

我正在处理 wpf 窗口，该窗口显示相邻的项目列表并带有包装，我尝试以`WrapPanel`这种方式使用：

```
<Grid>
    <ItemsControl>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.Items>
            <Button Content="01" Height="30" Width="70"/>
            <Button Content="02" Height="35" Width="72"/>
            <Button Content="03" Height="20" Width="74"/>
            <Button Content="04" Height="25" Width="76"/>
            <Button Content="05" Height="18" Width="78"/>
            <Button Content="06" Height="50" Width="70"/>
            <Button Content="07" Height="40" Width="72"/>
            <Button Content="08" Height="55" Width="74"/>
            <Button Content="09" Height="45" Width="76"/>
            <Button Content="10" Height="25" Width="78"/>
            <Button Content="11" Height="20" Width="80"/>
            <Button Content="12" Height="30" Width="70"/>
            <Button Content="13" Height="45" Width="72"/>
            <Button Content="14" Height="30" Width="74"/>
            <Button Content="15" Height="20" Width="76"/>
            <Button Content="16" Height="25" Width="78"/>
            <Button Content="17" Height="35" Width="80"/>
            <Button Content="18" Height="50" Width="70"/>
            <Button Content="19" Height="55" Width="72"/>
            <Button Content="20" Height="45" Width="74"/>
            <Button Content="21" Height="20" Width="76"/>
            <Button Content="22" Height="60" Width="78"/>
            <Button Content="23" Height="20" Width="80"/>
            <Button Content="24" Height="25" Width="70"/>
            <Button Content="25" Height="30" Width="72"/>
        </ItemsControl.Items>
    </ItemsControl>
</Grid> 
```

这是结果：

![在此处输入图像描述](https://i.stack.imgur.com/rLOSa.png)

实际上这个结果对我来说并不令人满意，因为如果你想象`WrapPanel`网格（行和列）你会发现没有列，但是有固定大小的行。我也需要在`WarpPanel`没有列的情况下进行其他控制，看看这个想象的图像：

![在此处输入图像描述](https://i.stack.imgur.com/vjZSK.png)

请注意，没有行也没有列。这就是我想做的。

有人有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T09:47:55.710

您可以编写自己的自定义 Panel 类。网上有一些教程，只需谷歌“wpf自定义面板”。

它归结为重写[MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride.aspx)和[ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride.aspx)方法。

```
public class CustomPanel : Panel
{
    protected override Size MeasureOverride(Size availableSize)
    {
        Size panelDesiredSize = new Size();

        foreach (UIElement child in InternalChildren)
        {
            child.Measure(availableSize);

            // Use child.DesiredSize, availableSize.Width and the positions
            // and sizes of the previous children to calculate the position of
            // the current child. Then determine the resulting Panel height.
            panelDesiredSize = ...
        }

        return panelDesiredSize;
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        foreach (UIElement child in InternalChildren)
        {
            // Arrange each child according to the position calculations
            // done in MeasureOverride
            Point position = ...
            child.Arrange(new Rect(position, child.DesiredSize));
        }

        return finalSize;
    }
} 
```

* * *

**更新**：以下简单的自定义面板可能或多或少可以满足您的需求。

```
public class PackPanel : Panel
{
    protected override Size MeasureOverride(Size availableSize)
    {
        foreach (UIElement child in InternalChildren)
        {
            child.Measure(availableSize);
        }

        var positions = new Point[InternalChildren.Count];
        var desiredHeight = ArrangeChildren(positions, availableSize.Width);

        return new Size(availableSize.Width, desiredHeight);
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        var positions = new Point[InternalChildren.Count];
        ArrangeChildren(positions, finalSize.Width);

        for (int i = 0; i < InternalChildren.Count; i++)
        {
            var child = InternalChildren[i];
            child.Arrange(new Rect(positions[i], child.DesiredSize));
        }

        return finalSize;
    }

    private double ArrangeChildren(Point[] positions, double availableWidth)
    {
        var lastRowStartIndex = -1;
        var lastRowEndIndex = 0;
        var currentWidth = 0d;
        var desiredHeight = 0d;

        for (int childIndex = 0; childIndex < InternalChildren.Count; childIndex++)
        {
            var child = InternalChildren[childIndex];
            var x = 0d;
            var y = 0d;

            if (currentWidth == 0d || currentWidth + child.DesiredSize.Width <= availableWidth)
            {
                x = currentWidth;
                currentWidth += child.DesiredSize.Width;
            }
            else
            {
                currentWidth = child.DesiredSize.Width;
                lastRowStartIndex = lastRowEndIndex;
                lastRowEndIndex = childIndex;
            }

            if (lastRowStartIndex >= 0)
            {
                int i = lastRowStartIndex;

                while (i < lastRowEndIndex - 1 && positions[i + 1].X < x)
                {
                    i++;
                }

                while (i < lastRowEndIndex && positions[i].X < x + child.DesiredSize.Width)
                {
                    y = Math.Max(y, positions[i].Y + InternalChildren[i].DesiredSize.Height);
                    i++;
                }
            }

            positions[childIndex] = new Point(x, y);
            desiredHeight = Math.Max(desiredHeight, y + child.DesiredSize.Height);
        }

        return desiredHeight;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T10:17:10.773

您可以使用画布：

或者使用 Grid 并根据要求设置每个 Buttons 的 Margin

```
 <Canvas >
        <Button Content="s" Width="50" Canvas.Left="17" Canvas.Top="20" />
        <Button Canvas.Left="73" Canvas.Top="32" Content="s" Width="60" Height="42" />
        <Button Canvas.Left="139" Canvas.Top="10" Content="s" Height="42" Width="60" />
     </Canvas>

      <Grid >
            <Button Content="01" Height="30" Width="70" Margin="20,12,414,268" />
            <Button Content="02" Height="35" Width="72" Margin="426,148,6,128" />
            <Button Content="03" Height="20" Width="74" Margin="190,122,240,170" />
            <Button Content="04" Height="25" Width="76" Margin="386,26,40,260" />
            <Button Content="05" Height="18" Width="78" Margin="376,202,48,92" />
            <Button Content="06" Height="50" Width="70" Margin="385,64,48,196" />
            <Button Content="07" Height="40" Width="72" Margin="162,202,269,68" />
            <Button Content="08" Height="55" Width="74" Margin="20,154,408,102" />
            <Button Content="09" Height="45" Width="76" Margin="21,95,406,171" />
            <Button Content="10" Height="25" Width="78" Margin="44,47,382,239" />
            <Button Content="11" Height="20" Width="80" Margin="386,120,38,170" />
            <Button Content="12" Height="30" Width="70" Margin="95,13,338,268" />
            <Button Content="13" Height="45" Width="72" Margin="290,6,140,260" />
            <Button Content="14" Height="30" Width="74" Margin="210,38,220,244" />
            <Button Content="15" Height="20" Width="76" Margin="128,48,299,242" />
            <Button Content="16" Height="25" Width="78" Margin="265,189,160,97" />
            <Button Content="17" Height="35" Width="80" Margin="176,154,246,122" />
            <Button Content="18" Height="50" Width="70" Margin="100,146,333,116" />
            <Button Content="19" Height="55" Width="72" Margin="270,121,160,135" />
            <Button Content="20" Height="45" Width="74" Margin="348,148,81,118" />
            <Button Content="21" Height="20" Width="76" Margin="94,78,332,212" />
            <Button Content="22" Height="60" Width="78" Margin="270,60,155,192" />
            <Button Content="23" Height="20" Width="80" Margin="176,74,247,216" />
            <Button Content="24" Height="25" Width="70" Margin="194,95,238,191" />
            <Button Content="25" Height="30" Width="72" Margin="117,104,314,177" />

    </Grid> 
```

# javascript - javascript数组值的总和

> ID：15875084
> 
> 赞同：2
> 
> 时间：2013-04-08T08:58:54.187
> 
> 标签：javascript, arrays, function, sum

尝试创建表单以将单位数组中的值相加。无法使函数 Calc_totals 工作。

```
<script language="JavaScript" type="text/javascript">
function Calc(form) {

    var drink = new Array()
    drink [0] = form.drink0.value;
    drink [1] = form.drink1.value;
    drink [2] = form.drink2.value;

    var units = new Array()
    units [0] = 25;
    units [1] = 50;
    units [2] = 75;

    var number_units = new Array()
    form.units0.value = form.drink0.value * units[0];
    form.units1.value = form.drink1.value * units[1];
    form.units2.value = form.drink2.value * units[2]; 
    } 

function Calc_totals() {
    var answerValue = 0; 
    for(i=0; i < units.length; i++) 
    { 
    answerValue += Number(units[i]);
    } 
    form.total_units.value = answerValue;
}
</script> 
```

我想要函数 Calc_totals 到单位总数并输出到 form.total_units.value。

HTML：

```
<form name="calc_form" id="form" method="post">
   <table width="370" border="0" bgcolor="#EAEAEA">
<tr>
<th width="141"><h2>Drink Type</h2></th><th width="55"><h2>Number drank</h2></th>
<th width="84"><h2>Units</h2></th>
<th width="84"><h2>Calories</h2></th>
</tr>
   <tr class="table-text">
     <td class="right"><p class="table-text">Cider (4.5%)</p>
       <p class="table-text">1 x 568ml pint</p>
       <p class="table-text">e.g. Magners, Strongbow</p></td>
    <td width="55" valign="top">
      <p class="table-text">
     <input name="drink0" type="text" id="drink0" size="3" maxlength="2" onchange="Calc(form);" />
      </p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="units0" type="text" id="units0" size="4" maxlength="3" />
    </p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="calories0" type="text" id="calories0" size="4" maxlength="3" />
    </p></td>
    </tr>
<tr>
    <td class="right"><p class="table-text">Cider (7.5%)</p>
      <p class="table-text">1 x 500ml can</p></td>
    <td width="55" valign="top" class="table-text"><p class="table-text">
      <input name="drink1" type="text" id="drink1" size="3" maxlength="2" onchange="Calc(form);" />
    </p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="units1" type="text" id="units1" size="4" maxlength="3" />
      </span></p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="calories1" type="text" id="calories1" size="4" maxlength="3" />
      </span></p></td>
    </tr>
<tr>
    <td class="right"><p class="table-text">Beer (5%)</p>
      <p class="table-text">1 x 330ml bottle </p>
      <p class="table-text">e.g. Grolsch, Budweiser</p></td>
    <td width="55" valign="top" class="table-text"><p class="table-text">
      <input name="drink2" type="text" id="drink2" size="3" maxlength="2" onchange="Calc(form);" />
    </p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="units2" type="text" id="units2" size="4" maxlength="3" />
    </p></td>
    <td width="84" valign="top"><p class="table-text">
      <input name="calories2" type="text" id="calories2" size="4" maxlength="3" />
    </p></td>
    </tr>

<tr>
  <td><p class="table-text">&nbsp;</p></td>
  <td width="55" valign="top"><p class="table-text"></p></td>
  <td width="84" valign="top">&nbsp;</td>
  <td width="84" valign="top"><p class="table-text"></p></td>
</tr>

<tr>
  <td><p class="table-text"><strong>Totals per week= </strong></p></td>
  <td width="55" valign="top"><p class="table-text">&nbsp;</p></td>
  <td width="84" valign="top"><p class="table-text">
    <input name="total_units" type="text" id="total_units" size="4" maxlength="3" /> 
    units  </p></td>
  <td width="84" valign="top"><p class="table-text">
    <input name="total_calories" type="text" id="total" size="4" maxlength="3" />
  kcals</p></td>
</tr> 

<tr>  
<td colspan="2"><INPUT name="reset" value="Reset" TYPE="reset"> </td>
<td colspan="3"><input name="Calculate Total" type="button" id="Calculate Total" value="Calculate Total" onclick="Calc_totals();" /></td>
</tr>
</table>
</form> 
```

我想要单位总数。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-08T09:03:49.160

这段代码的问题是`units`在 Calc_totals 中不可见。你有几个选择：

*   使其全球化（不好的选择）
*   将其作为参数传递

`reduce`或者，您可以使用（ECMAScript 5 功能 - 在旧浏览器中不起作用）计算总和

```
var sum = units.reduce(function(a, b) { return a + b }); 
```

和 ES6 版本

```
var sum = units.reduce((a, b) => a + b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:07:16.473

在 Calc() 之外定义“单位”。

```
<script language="JavaScript" type="text/javascript">
var units = new Array();
function Calc() {...} 
```

=-=-=-=-=-=-=-=-=已编辑（添加更多代码=-=-=-=-=-=-=-=-=-=-=-=

```
<html>
<head>
<script language="JavaScript" type="text/javascript">
var units = new Array();
function Calc() {
    units [0] = 25;
    units [1] = 50;
    units [2] = 75;
}

function Calc_totals() {
    var answerValue = 0; 

    for(i=0; i < units.length; i++) 
    { 
        answerValue += Number(units[i]);
    } 
    alert(answerValue);
}

function foo()
{
    Calc();
    Calc_totals();
}
</script>
</head>
<body>
<a href="#" onclick="return foo();">Test</a>
 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T10:33:43.080

**推入加法数组（总和）后尝试此操作**

```
 var globalQtyItemsArray = [];

        var totalQtysAddition = 0;

        globalQtyItemsArray.push(getTrNoQty);

        for (var i = 0; i < globalQtyItemsArray.length; i++) {

          totalQtysAddition += globalQtyItemsArray[i] << 0;  // Addition of Array

        } 
```

# events - 异步运行 Plone 订阅者事件

> ID：15875088
> 
> 赞同：5
> 
> 时间：2013-04-08T08:59:02.070
> 
> 标签：events, plone, zope

在使用 Plone 4 时，我成功创建了一个订阅者事件，以便在保存自定义内容类型时进行额外处理。这是我通过使用`Products.Archetypes.interfaces.IObjectInitializedEvent`界面完成的。

配置.zcml

```
<subscriber 
        for="mycustom.product.interfaces.IRepositoryItem
             Products.Archetypes.interfaces.IObjectInitializedEvent"
        handler=".subscribers.notifyCreatedRepositoryItem"
   /> 
```

订阅者.py

```
def notifyCreatedRepositoryItem(repositoryitem, event):
    """
    This gets called on IObjectInitializedEvent - which occurs when a new object is created.
    """ 
    my custom processing goes here. Should be asynchronous 
```

但是，额外的处理有时可能需要很长时间，我想知道是否有办法在后台运行它，即异步。

是否可以异步运行订阅者事件，例如在保存对象时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:27:04.620

不是开箱即用。您需要为您的环境添加异步支持。

看看[`plone.app.async`](https://pypi.python.org/pypi/plone.app.async)；你需要一个 ZEO 环境和至少一个额外的实例。后者将运行您从站点推送到队列中的异步作业。

然后，您可以定义要异步执行的方法并将任务推送到队列中以异步执行此类方法。

示例代码，将任务推入队列：

```
from plone.app.async.interfaces import IAsyncService

async = getUtility(IAsyncService)
async.queueJob(an_async_task, someobject, arg1_value, arg2_value) 
```

和任务本身：

```
def an_async_task(someobject, arg1, arg2):
    # do something with someobject 
```

`someobject`ZODB 中的持久对象在哪里。*至少*`IAsyncService.queueJob`需要一个函数和一个上下文对象，但您可以根据需要添加任意数量的参数来执行任务。参数必须是可腌制的。

 *然后，如果可以，该任务将由异步工作者实例在当前请求的上下文之外执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T13:00:27.013

只是为了提供更多选择，您可以尝试使用[collective.taskqueue](https://pypi.python.org/pypi/collective.taskqueue)，它非常简单且非常强大（并避免了plone.app.async 的一些缺点）。

PyPI 上的描述已经足以让您快速上手，您可以使用 redis 进行队列管理，这是一个很大的优势。*

# java - 从现有 MySQL 数据库生成简单的 JAVA CRUD 类

> ID：15875095
> 
> 赞同：1
> 
> 时间：2013-04-08T08:59:28.737
> 
> 标签：java, mysql, database, crud

我现在拥有的是 MySQL 中的一个简单的关系数据库，其中包含 3 个表。我想要的是一种使用基本 CRUD 函数生成简单 JAVA 类的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:05:44.980

对象关系映射的事实标准是[Hibernate](http://www.hibernate.org/)。

最流行的 IDE（NetBeans、Eclipse）具有插件，这些插件将根据您现有的表生成配置和类。

# sql - 如何在 Zend Framework 2 中组合 where 语句

> ID：15875098
> 
> 赞同：1
> 
> 时间：2013-04-08T08:59:34.817
> 
> 标签：sql, zend-framework2

这可能是一个愚蠢的问题，但我找不到任何答案。

我有一个简单的查询，例如“SELECT * FROM table WHERE (x=a AND y=b) OR z=c”，我只是不知道如何在 ZF2 中实现它。

我找到了很多关于 Predicates 和 Where 对象的信息，但我不知道如何将这些信息组合成一个由 AND 和 OR 组成的查询。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:48:39.917

如果你想使用 AND 来添加它们，你可以简单地使用数组将它们传递给 select 对象，例如：

```
$select->where(array(
    'type'         => 'test,
    'some_field'   => '1'
)); 
```

如果您想要更复杂的 Where 查询，则可以使用 Where 对象来构建查询：

```
$where = new \Zend\Db\Sql\Where();
$where->addPredicate(
        new \Zend\Db\Sql\Predicate\Like('some_field', '%'.$value.'%')
)
->OR->->equalTo('my_field', 'bob')
->AND->equalTo('my_field', 'hello');

$select->where($where); 
```

# excel - 使用 VB6 ADO 将数据附加到 Excel 列

> ID：15875102
> 
> 赞同：1
> 
> 时间：2013-04-08T08:59:40.690
> 
> 标签：excel, vb6, adodb

我正在测试一个将文本从 TextBox 插入 Excel 的示例 VB6 应用程序。我想在列中找到最后使用的行，并`txt1`在用户单击按钮时将 TextBox 中的文本附加到下一行。范围是从`C10`到`C49`。填完最后一行后，我会提示用户打开新的 Excel 文件。

我无法做附加部分。下面是我试过的代码：

```
Private Sub cmdUpdate_Click()
  Dim objConn As New ADODB.Connection
  Dim szConnect As String

  szConnect = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
        "Data Source=C:\Excel\Format.xls;" & _
        "Extended Properties='Excel 8.0;HDR=NO';"

  objConn.Open szConnect

  Dim xrow As Integer
  Dim lastRow As Integer
  lastRow = 10
  xrow = 49
  Do while lastRow <= xrow
    objConn.Execute "UPDATE [Sheet1$C" & lastRow & ":C" & lastRow & "] SET F1 =" &      txt1.Text & ";"
    lastRow = lastRow + 1
  Loop 
End Sub 
```

该代码在每次更新时填充整个范围。我知道我的错误在哪里，但无法找出正确的方法。如何使它只插入一次直到行`49`？

使用 Excel 对象模型不是一个选项，因为我希望能够在 Excel 中打开工作簿时进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:28:48.250

实现这一点的简单方法是将您声明`lastRow`为更可见（例如，作为表单类的私有成员），删除循环，并且`lastRow`每次更新仅增加一次：

```
Private lastRow As Integer
'...
objConn.Execute _
    "UPDATE [Sheet1$C" & lastRow & ":C" & lastRow _
    & "] SET F1 =" & txt1.Text & ";"
lastRow = lastRow + 1 
```

如果您假设没有完全控制目标 Excel 范围（例如，范围中的数据可能会在您的更新之间被修改，并且您不希望覆盖这些更改），那么您可以在每次更新之前搜索第一个空单元格。用于`IsNull()`测试空单元格。

```
Private Const RANGE_IS_FULL     As Long = -1

' Returns first vacant position in sRange Excel range (zero-based)
' Returns RANGE_IS_FULL if no vacant position was found
' sConnectionString: connection string to Excel workbook
' sRange: Excel range of a form [Sheet1$C10:C49]
Private Function GetNextAppendPosition(sConnectionString As String _
    , sRange As String) As Long
    Dim lRow As Long
    Dim oRS As ADODB.Recordset

    Set oRS = New ADODB.Recordset
    oRS.CursorLocation = ADODB.adUseClient

    oRS.Open "SELECT F1 FROM " & sRange _
        , sConnectionString

    oRS.MoveFirst
    GetNextAppendPosition = RANGE_IS_FULL
    lRow = -1
    While Not oRS.EOF
        lRow = lRow + 1
        If IsNull(oRS.Fields(0).Value) Then
            GetNextAppendPosition = lRow
            GoTo hExit
        End If
        oRS.MoveNext
    Wend

hExit:
    oRS.Close
End Function 
```

考虑到这一点，您的更新例程可以这样编码：

```
Public Sub ExportTextToExcelRow(sText As String)
    Const CONNECTION_STRING As String = _
        "Provider=Microsoft.Jet.OLEDB.4.0;" & _
        "Data Source=C:\src\Excel ADO\Book1.xls;" & _
        "Extended Properties='Excel 8.0;HDR=NO';    "
    Const MAX_TARGET_ROW    As Long = 49
    Const MIN_TARGET_ROW    As Long = 10
    Const TARGET_COL        As String = "C"
    Const TARGET_SHEET      As String = "Sheet1"

    Dim lRow As Long
    Dim oConn As New ADODB.Connection
    Dim sTargetRange As String

    sTargetRange = "[" & TARGET_SHEET & "$" & TARGET_COL & MIN_TARGET_ROW _
        & ":" & TARGET_COL & MAX_TARGET_ROW & "]"
    lRow = GetNextAppendPosition(CONNECTION_STRING, sTargetRange)
    If lRow = RANGE_IS_FULL Then
        MsgBox "Oops, range is full."
        Exit Sub
    End If
    lRow = lRow + MIN_TARGET_ROW

    sTargetRange = "[" & TARGET_SHEET & "$" & TARGET_COL & lRow _
        & ":" & TARGET_COL & lRow & "]"

    oConn.Open CONNECTION_STRING
    oConn.Execute "UPDATE " & sTargetRange & " SET F1 = """ & sText & """;"
    oConn.Close
End Sub 
```

以这种方式从您的事件处理程序中调用它：

```
Private Sub cmdUpdate_Click()
    ExportTextToExcelRow txt1.Text
End Sub 
```

# angularjs - $watch在init之后直接触发，为什么？

> ID：15875105
> 
> 赞同：32
> 
> 时间：2013-04-08T08:59:42.913
> 
> 标签：angularjs

为什么[$watch](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)在页面加载后直接触发，我该如何防止这种情况？

[http://jsfiddle.net/dcSRu/2/](http://jsfiddle.net/dcSRu/2/)

```
function MyCtrl($scope) {
    // Init scope vars
    $scope.data_copy = {};

    // If data_copy changes...
    $scope.$watch("data_copy", function(newValue, oldValue) {

        alert("$watch triggered!");

    }, true);
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-08T09:14:14.027

在第一次运行时，两个值 (`newValue`和`oldValue`) 是相等的，因此您可以通过检查是否相等来轻松地将其转义：

```
$scope.$watch("data_copy", function(newValue, oldValue) {
  if(newValue === oldValue){
    return;
  }
  alert("$watch triggered!");
}); 
```

`[**PLUNKER**](http://plnkr.co/edit/oUDLJzempHkAsAOeXuWQ?p=preview)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-16T13:37:57.543

将 $watch 函数包装成角度就绪函数。

```
angular.element(document).ready(function() 
{ 
  $scope.$watch("data_copy", function(newValue, oldValue) {
    alert("$watch triggered!");
  }, true);
}) 
```

当角度加载页面时。它更改值并触发 $watch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T10:35:28.340

这里已经有一个很好的讨论：

[在 AngularJS 中观看模型更改时如何忽略初始负载？](https://stackoverflow.com/questions/16947771/how-do-i-ignore-the-initial-load-when-watching-model-changes-in-angularjs)

> $scope.$watch('fieldcontainer', function (new_fieldcontainer, old_fieldcontainer) {
> 
> if (typeof old_fieldcontainer === 'undefined') 返回；
> 
> // 此处用于处理更改对象的其他代码。
> 
> });

# java - 如何在不同的 Java 项目中使用相同的方法

> ID：15875109
> 
> 赞同：0
> 
> 时间：2013-04-08T08:59:45.977
> 
> 标签：java

我在几个不同的 Java 项目中使用方法 A。有没有办法只编写一次方法，然后根据需要从不同的 Java 项目中调用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:00:25.067

使用该方法创建一个类。为这个类创建一个 jar。在所有项目中使用这个 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:01:24.823

是的。定义`public`类并至少定义`public`或`protected`方法。然后将该类导入新项目的类中并使用它。即使默认类的
`default`方法`public`是. 所以使用公共类和公共或受保护的方法，最后用这个文件创建一个 jar 并将这个 jar 文件添加到你的项目中使用。`protected``public/protected`

# sql - 使用串联操作更新 LINQ 中临时表的查询

> ID：15875115
> 
> 赞同：0
> 
> 时间：2013-04-08T08:59:56.183
> 
> 标签：sql, sql-server, linq, stored-procedures

我正在尝试使用 linqpad 将存储的过程转换为 LINQ。我有以下要转换为 LINQ 的 sql 查询

```
 UPDATE @tempTable
 SET fullname = (p.LastName + ', ' + ISNULL(p.FirstName, ''))
 FROM @tempTable t, Table1 i, table2 p
  WHERE r.ID = i.ID
  AND i.ID = p.ID 
```

如何在 LINQ 中完成？我只是在不使用实体框架的情况下将 SP 转换为 LINQ。真的有必要使用实体框架吗？

# java - 已停止，窗口泄漏，zygoteInit

> ID：15875116
> 
> 赞同：0
> 
> 时间：2013-04-08T08:59:56.503
> 
> 标签：java, android, listview, android-asynctask, oncreate

我正在使用 android 创建一个列表来添加任务，当我运行它并启动模拟器时有很多错误。我努力解决它们，但我不能，我认为一个类中的问题是它应该显示所有任务的主要问题

这是原木猫

```
04-08 08:53:43.334: E/Trace(637): error opening trace file: No such file or directory (2)
04-08 08:53:45.043: I/Choreographer(637): Skipped 54 frames!  The application may be doing too much work on its main thread.
04-08 08:53:45.144: D/gralloc_goldfish(637): Emulator without GPU emulation detected.
04-08 08:53:45.479: I/Choreographer(637): Skipped 35 frames!  The application may be doing too much work on its main thread.
04-08 08:53:46.067: I/Choreographer(637): Skipped 56 frames!  The application may be doing too much work on its main thread.
04-08 08:53:46.713: D/dalvikvm(637): GC_CONCURRENT freed 132K, 2% free 9089K/9268K, paused 9ms+3ms, total 102ms
04-08 08:53:46.803: E/JSON Parser(637): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
04-08 08:53:46.843: W/dalvikvm(637): threadid=11: thread exiting with uncaught exception (group=0x2bd39930)
04-08 08:53:46.903: E/AndroidRuntime(637): FATAL EXCEPTION: AsyncTask #1
04-08 08:53:46.903: E/AndroidRuntime(637): java.lang.RuntimeException: An error occured while executing doInBackground()
04-08 08:53:46.903: E/AndroidRuntime(637):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.lang.Thread.run(Thread.java:856)
04-08 08:53:46.903: E/AndroidRuntime(637): Caused by: java.lang.NullPointerException
04-08 08:53:46.903: E/AndroidRuntime(637):  at com.example.checklist.MainTask$LoadAllTasks.doInBackground(MainTask.java:172)
04-08 08:53:46.903: E/AndroidRuntime(637):  at com.example.checklist.MainTask$LoadAllTasks.doInBackground(MainTask.java:1)
04-08 08:53:46.903: E/AndroidRuntime(637):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-08 08:53:46.903: E/AndroidRuntime(637):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-08 08:53:46.903: E/AndroidRuntime(637):  ... 3 more
04-08 08:53:51.744: E/WindowManager(637): Activity com.example.checklist.MainTask has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{2c607c90 V.E..... R.....ID 0,0-684,192} that was originally added here
04-08 08:53:51.744: E/WindowManager(637): android.view.WindowLeaked: Activity com.example.checklist.MainTask has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{2c607c90 V.E..... R.....ID 0,0-684,192} that was originally added here
04-08 08:53:51.744: E/WindowManager(637):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-08 08:53:51.744: E/WindowManager(637):   at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
04-08 08:53:51.744: E/WindowManager(637):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.Dialog.show(Dialog.java:281)
04-08 08:53:51.744: E/WindowManager(637):   at com.example.checklist.MainTask$LoadAllTasks.onPreExecute(MainTask.java:155)
04-08 08:53:51.744: E/WindowManager(637):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-08 08:53:51.744: E/WindowManager(637):   at android.os.AsyncTask.execute(AsyncTask.java:534)
04-08 08:53:51.744: E/WindowManager(637):   at com.example.checklist.MainTask.onCreate(MainTask.java:79)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.Activity.performCreate(Activity.java:5104)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-08 08:53:51.744: E/WindowManager(637):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 08:53:51.744: E/WindowManager(637):   at android.os.Looper.loop(Looper.java:137)
04-08 08:53:51.744: E/WindowManager(637):   at android.app.ActivityThread.main(ActivityThread.java:5039)
04-08 08:53:51.744: E/WindowManager(637):   at java.lang.reflect.Method.invokeNative(Native Method)
04-08 08:53:51.744: E/WindowManager(637):   at java.lang.reflect.Method.invoke(Method.java:511)
04-08 08:53:51.744: E/WindowManager(637):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-08 08:53:51.744: E/WindowManager(637):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-08 08:53:51.744: E/WindowManager(637):   at dalvik.system.NativeStart.main(Native Method)
04-08 08:53:51.744: I/Choreographer(637): Skipped 49 frames!  The application may be doing too much work on its main thread.
04-08 08:53:57.493: I/Process(637): Sending signal. PID: 637 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:22:51.150

考虑到您的日志显示 json 解析错误，然后是 NPE，我的猜测是问题发生在这里：

```
// getting JSON string from URL 
JSONObject json = jParser.makeHttpRequest(url_all_tasks, "GET", params); 

// Check your log cat for JSON reponse 
Log.d("All Tasks: ", json.toString()); 
```

看起来解析器失败并且只返回`null`for `json`，然后调用`json.toString()`失败并出现 NPE。

`AsyncTask`此外，您应该根据 Sunil Havnur 给出的评论更改您的代码。

# php - PHP - 以表格形式导入设置（wordpress）

> ID：15875118
> 
> 赞同：1
> 
> 时间：2013-04-08T09:00:01.037
> 
> 标签：php, wordpress, import, export

我正在尝试使用设置 API 为脚本（wordpress 插件）做一些导入/导出选项。

代码的相关部分是：

```
function o99_brsa_options_page() {

    global $o99_brsa_options; // declare as global so we can access everywhere

$o99_brsa_options2 = get_option( 'o99_brsa_settings' );
$currentsettings = "";
    if ( isset( $_POST['import'] ) && trim($_POST['brsa_keep_settings_imp']) != "" ) {
    $currentsettings = base64_encode($_POST['brsa_keep_settings_imp']);
    } elseif ( isset( $o99_brsa_options2 ) && ( $o99_brsa_options2 != "" ) ) {
    $currentsettings = base64_encode( serialize( $o99_brsa_options2 ) );
    }
// continue a lot of settings ...

                    <!-- / IMPORT o99_brsa_settings[brsa_keep_settings_exp] -->
                    <p>
                    <form method="post" action="#">
                    <textarea cols="50" rows="5"  id="brsa_keep_settings_imp"  name="brsa_keep_settings_imp" /><?php

                    ?></textarea>
                        <label class="description" for="brsa_keep_settings_imp">
                        </br><?php _e('Import Data', 'k99-brsa-domain'); ?>
                        </label>

                        <input type="submit" value="Import" id="import" name="import" class="button-primary" onClick="return confirm('Are you sure you want to import these settings?')" />
                    </form></p>

    } 
```

完整代码在这里： http: [//pastebin.com/uBHHxJYJ](http://pastebin.com/uBHHxJYJ)

我只是找不到我做错了什么，为什么它不起作用，我显然在这里遗漏了一些东西......

# c# - 从客户端消息检查器访问 ClientCredential 属性

> ID：15875119
> 
> 赞同：1
> 
> 时间：2013-04-08T09:00:02.850
> 
> 标签：c#, wcf

我可以从客户端消息检查器中引用代理客户端实例吗？

原因，我想访问以下属性的值：

```
ClientCredentials.UserName.UserName  
ClientCredentials.UserName.Password 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:47:56.867

通过从我的自定义 EndpointBehavior 传递对“ClientCredentials”的引用，我设法从检查器中检索凭据：

自定义行为：

```
public class CustomEndpointBehaviour:IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {

        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
        {
           ClientCredentials credentials =  endpoint.Behaviors.Find<ClientCredentials>();

           clientRuntime.MessageInspectors.Add(new CustomMessageInspector(credentials));
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
        {

        }

        public void Validate(ServiceEndpoint endpoint)
        {

        }
    } 
```

和检查员：

```
 public class CustomMessageInspector : IClientMessageInspector
    {
        ClientCredentials crendentials = null;
        public CustomMessageInspector(ClientCredentials credentials)
        {
            this.crendentials = credentials;
        }

        public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {

        }

        public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {
            string userName = "";
            string passWord = "";

            if (!(crendentials == null))
            {
                userName = crendentials.UserName.UserName;
                passWord = crendentials.UserName.Password;
            }

            return null;
        }
    } 
```

# ios - 如何去除圆形矩形贝塞尔路径的角落

> ID：15875126
> 
> 赞同：0
> 
> 时间：2013-04-08T09:00:16.693
> 
> 标签：ios, uitableview, rounded-corners, stroke

我是第一次使用 Core Graphics 进行编程，所以不太清楚我该如何解决这个问题。

我正在绘制圆角矩形贝塞尔路径以及渐变和笔触作为 UITableviewCells 的背景视图。一切都很好，除了如图所示的额外黑角。

![数字](https://i.stack.imgur.com/a2ept.png) 我不知道他们为什么要展示以及它们到底是什么。请问有人可以帮我吗？谢谢..

**创建单元格的代码**

```
#import "CustomCellBackground.h"
.
.
.

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView 
                             dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.backgroundView = [[CustomCellBackground alloc] init];
        cell.selectedBackgroundView = [[CustomCellBackground alloc]init];
    }

    // Configure the cell.

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    cell.textLabel.textColor = [UIColor whiteColor];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    return cell;

} 
```

**在 CustomCellBackground.m 中**

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGPathRef path = [[UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:10.0] CGPath];
    CGContextAddPath(context, path);
    CGContextClip(context);
    //CGContextSetLineJoin(context, kCGLineJoinRound);

    drawLinearGradientWithFourColors(context, self.bounds);

    CGContextSaveGState(context);

    CGContextSetStrokeColorWithColor(context,[UIColor whiteColor].CGColor);
    CGContextSetLineWidth(context, 1.0);
    CGContextAddPath(context, path);
    CGContextStrokePath(context);
    CGContextRestoreGState(context);

   }

void drawLinearGradientWithFourColors(CGContextRef context, CGRect rect)
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat locations[] = {0.0, 0.2, 0.5, 1.0};

    CGFloat colors[16] = {
        85/255.0, 85/255.0, 85/255.0, 1.0,
        45/255.0, 45/255.0, 45/255.0, 1.0,
        22/255.0, 22/255.0, 22/255.0, 1.0,
        0, 0, 0, 1.0
    };

    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, colors, locations, 4);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextSaveGState(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGContextRestoreGState(context);
    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:05:33.167

当您初始化视图时，为视图和视图的图层设置Opaque 参数。

 **```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setOpaque:NO];
        [self.layer setOpaque:NO];
    }
    return self;
} 
```*  ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:12:38.390

我用谷歌搜索并粘贴了下面的代码。有关更多信息，请参阅[链接](https://stackoverflow.com/questions/400965/how-to-customize-the-background-border-colors-of-a-grouped-table-view)：

使用以下代码：

```
typedef enum  {
    CustomCellBackgroundViewPositionTop, 
    CustomCellBackgroundViewPositionMiddle, 
    CustomCellBackgroundViewPositionBottom,
    CustomCellBackgroundViewPositionSingle
} CustomCellBackgroundViewPosition;

@interface CustomCellBackgroundView : UIView {
    UIColor *borderColor;
    UIColor *fillColor;
    CustomCellBackgroundViewPosition position;
}

    @property(nonatomic, retain) UIColor *borderColor, *fillColor;
    @property(nonatomic) CustomCellBackgroundViewPosition position;
@end

- (void)drawRect:(CGRect)rect {
    // Drawing code
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(c, [fillColor CGColor]);
    CGContextSetStrokeColorWithColor(c, [borderColor CGColor]);

    if (position == CustomCellBackgroundViewPositionTop) {
        CGContextFillRect(c, CGRectMake(0.0f, rect.size.height - 10.0f, rect.size.width, 10.0f));
        CGContextBeginPath(c);
        CGContextMoveToPoint(c, 0.0f, rect.size.height - 10.0f);
        CGContextAddLineToPoint(c, 0.0f, rect.size.height);
        CGContextAddLineToPoint(c, rect.size.width, rect.size.height);
        CGContextAddLineToPoint(c, rect.size.width, rect.size.height - 10.0f);
        CGContextStrokePath(c);
        CGContextClipToRect(c, CGRectMake(0.0f, 0.0f, rect.size.width, rect.size.height - 10.0f));
    } else if (position == CustomCellBackgroundViewPositionBottom) {
        CGContextFillRect(c, CGRectMake(0.0f, 0.0f, rect.size.width, 10.0f));
        CGContextBeginPath(c);
        CGContextMoveToPoint(c, 0.0f, 10.0f);
        CGContextAddLineToPoint(c, 0.0f, 0.0f);
        CGContextStrokePath(c);
        CGContextBeginPath(c);
        CGContextMoveToPoint(c, rect.size.width, 0.0f);
        CGContextAddLineToPoint(c, rect.size.width, 10.0f);
        CGContextStrokePath(c);
        CGContextClipToRect(c, CGRectMake(0.0f, 10.0f, rect.size.width, rect.size.height));
    } else if (position == CustomCellBackgroundViewPositionMiddle) {
        CGContextFillRect(c, rect);
        CGContextBeginPath(c);
        CGContextMoveToPoint(c, 0.0f, 0.0f);
        CGContextAddLineToPoint(c, 0.0f, rect.size.height);
        CGContextAddLineToPoint(c, rect.size.width, rect.size.height);
        CGContextAddLineToPoint(c, rect.size.width, 0.0f);
        CGContextStrokePath(c);
        return; // no need to bother drawing rounded corners, so we return
    }

    // At this point the clip rect is set to only draw the appropriate
    // corners, so we fill and stroke a rounded rect taking the entire rect

    CGContextBeginPath(c);
    addRoundedRectToPath(c, rect, 10.0f, 10.0f);
    CGContextFillPath(c);  

    CGContextSetLineWidth(c, 1);  
    CGContextBeginPath(c);
    addRoundedRectToPath(c, rect, 10.0f, 10.0f);  
    CGContextStrokePath(c); 
}

static void addRoundedRectToPath(CGContextRef context, CGRect rect,
                                float ovalWidth,float ovalHeight)

{
    float fw, fh;

    if (ovalWidth == 0 || ovalHeight == 0) {// 1
        CGContextAddRect(context, rect);
        return;
    }

    CGContextSaveGState(context);// 2

    CGContextTranslateCTM (context, CGRectGetMinX(rect),// 3
                           CGRectGetMinY(rect));
    CGContextScaleCTM (context, ovalWidth, ovalHeight);// 4
    fw = CGRectGetWidth (rect) / ovalWidth;// 5
    fh = CGRectGetHeight (rect) / ovalHeight;// 6

    CGContextMoveToPoint(context, fw, fh/2); // 7
    CGContextAddArcToPoint(context, fw, fh, fw/2, fh, 1);// 8
    CGContextAddArcToPoint(context, 0, fh, 0, fh/2, 1);// 9
    CGContextAddArcToPoint(context, 0, 0, fw/2, 0, 1);// 10
    CGContextAddArcToPoint(context, fw, 0, fw, fh/2, 1); // 11
    CGContextClosePath(context);// 12

    CGContextRestoreGState(context);// 13
} 
```**

# javascript - 是否有“元素渲染”事件？

> ID：15875128
> 
> 赞同：79
> 
> 时间：2013-04-08T09:00:24.330
> 
> 标签：javascript, dom

我需要在我的网络应用程序中准确测量文本的尺寸，我通过创建一个元素（使用相关的 CSS 类）、设置它`innerHTML`然后使用`appendChild`.

完成此操作后，在元素被渲染之前有一个等待，并且`offsetWidth`可以读取它以了解文本的宽度。

目前，我一直`setTimeout(processText, 100)`在等待渲染完成。

有没有我可以听的回调，或者更可靠的方式来告诉我创建的元素何时被渲染？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2018-01-30T06:04:52.057

接受的答案来自 2014 年，现已过时。A`setTimeout`可能有效，但它不是最干净的，也不一定保证元素已添加到 DOM。

**截至 2018 年，您应该使用[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)来检测元素何时添加到 DOM。**现在，所有现代浏览器（Chrome 26+、Firefox 14+、IE11、Edge、Opera 15+ 等）都广泛支持 MutationObservers。

将元素添加到 DOM 后，您将能够检索其实际尺寸。

这是一个简单的示例，说明如何使用 a`MutationObserver`来侦听何时将元素添加到 DOM。

为简洁起见，我使用 jQuery 语法来构建节点并将其插入 DOM。

```
var myElement = $("<div>hello world</div>")[0];

var observer = new MutationObserver(function(mutations) {
   if (document.contains(myElement)) {
        console.log("It's in the DOM!");
        observer.disconnect();
    }
});

observer.observe(document, {attributes: false, childList: true, characterData: false, subtree:true});

$("body").append(myElement); // console.log: It's in the DOM! 
```

`observer`每当从`document`. 在处理程序内部，我们然后执行`contains`检查以确定`myElement`现在是否在`document`.

您不需要遍历存储的每个 MutationRecord，`mutations`因为您可以`document.contains`直接在`myElement`.

要提高性能，请替换`document`为将包含`myElement`在 DOM 中的特定元素。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-01-10T11:21:10.823

当前没有 DOM 事件指示元素已完全呈现（例如，附加的 CSS 应用和绘制）。这会使一些 DOM 操作代码返回错误或随机的结果（例如获取元素的高度）。

使用 setTimeout 给浏览器一些渲染开销是最简单的方法。使用

```
setTimeout(function(){}, 0) 
```

可能是最实际准确的，因为它将您的代码放在活动浏览器事件队列的末尾而没有任何延迟 - 换句话说，您的代码在渲染操作（以及当时发生的所有其他操作）之后立即排队。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-06-25T13:33:15.983

Swizec Teller[的这篇博](http://swizec.com/blog/how-to-properly-wait-for-dom-elements-to-show-up-in-modern-browsers/swizec/6663)`requestAnimationFrame`文建议使用, 并检查`size`元素的 。

```
function try_do_some_stuff() {
    if (!$("#element").size()) {
        window.requestAnimationFrame(try_do_some_stuff);
    } else {
        $("#element").do_some_stuff();
    }
}; 
```

> 在实践中，它只重试一次。因为无论如何，到下一个渲染帧，无论是 60 秒还是一分钟，元素都将被渲染。

您实际上需要稍等片刻才能获得渲染后的时间。requestAnimationFrame在下一次绘制**之前触发。**`requestAnimationFrame(()=>setTimeout(onrender, 0))` **在元素被**渲染之后也是如此。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-04-05T02:55:47.253

MutationObserver 可能是最好的方法，但这里有一个可能有效的简单替代方法

我有一些 javascript 为大表构建 HTML，并将 div 的 innerHTML 设置为生成的 HTML。如果我`Date()`在设置 innerHTML 后立即获取，我发现时间戳是在表格完全呈现之前的一段时间。我想知道渲染需要多长时间（这意味着我需要`Date()`在渲染完成后检查）。我发现我可以通过设置 div 的 innerHTML 然后（在同一个脚本中）调用页面上某个按钮的 click 方法来做到这一点。只有在 HTML 完全呈现后才会执行单击处理程序，而不仅仅是在设置 div 的 innerHTML 属性之后。我通过将点击处理程序生成的 Date() 值与设置 div 的 innerHTML 属性的脚本检索到的 Date() 值进行比较来验证这一点。

希望有人觉得这很有用

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-12T12:37:34.913

在我的情况下，解决方案就像`setTimeout`或`MutationObserver`不完全可行。相反，我使用了**ResizeObserver**。根据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)：

> 如果实现遵循规范，则应在绘制之前和布局之后调用调整大小事件。

所以基本上观察者总是在布局后触发，因此我们应该能够获得被观察元素的正确尺寸。作为奖励，观察者已经返回了元素的尺寸。因此我们甚至不需要调用类似的东西`offsetWidth`（即使它也应该工作）

```
const myElement = document.createElement("div");
myElement.textContent = "test string";

const resizeObserver = new ResizeObserver(entries => {
  const lastEntry = entries.pop();

  // alternatively use contentBoxSize here
  // Note: older versions of Firefox (<= 91) provided a single size object instead of an array of sizes
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1689645
  const width = lastEntry.borderBoxSize?.inlineSize ?? lastEntry.borderBoxSize[0].inlineSize;
  const height = lastEntry.borderBoxSize?.blockSize ?? lastEntry.borderBoxSize[0].blockSize;

  resizeObserver.disconnect();

  console.log("width:", width, "height:", height);
});

resizeObserver.observe(myElement);

document.body.append(myElement);
```

我们也可以将其包裹在一个方便的异步函数中，如下所示：

```
function appendAwaitLayout(parent, element) {
  return new Promise((resolve, reject) => {
    const resizeObserver = new ResizeObserver((entries) => {
      resizeObserver.disconnect();
      resolve(entries);
    });

    resizeObserver.observe(element);

    parent.append(element);
  });
}

// call it like this
appendAwaitLayout(document.body, document.createElement("div")).then((entries) => {
  console.log(entries)
  // do stuff here ...
});
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-27T23:02:16.187

假设你的元素有 classname class="test" 下面的函数继续测试如果发生了变化，如果发生了变化，运行函数

```
 function addResizeListener(elem, fun) {
            let id;
            let style = getComputedStyle(elem);
            let wid = style.width;
            let hei = style.height;
            id = requestAnimationFrame(test)
            function test() {
                let newStyle = getComputedStyle(elem);
                if (wid !== newStyle.width ||
                    hei !== newStyle.height) {
                    fun();
                    wid = newStyle.width;
                    hei = newStyle.height;
                }
                id = requestAnimationFrame(test);
            }
        }
        let test = document.querySelector('.test');
        addResizeListener(test,function () {
            console.log("I changed!!")
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-28T13:54:43.243

例如，当您制作时

```
var clonedForm = $('#empty_form_to_clone').clone(true)[0];

var newForm = $(clonedForm).html().replace(/__prefix__/g, next_index_id_form);

// next_index_id_form is just a integer 
```

我在这是要干嘛？
我克隆了一个已经渲染的元素并更改了要渲染的 html。

接下来，我将该文本附加到容器中。

```
$('#container_id').append(newForm); 
```

当我想将事件处理程序添加到 newForm, **WELL**内的按钮时，问题就来了，只需使用**准备好的**事件。

```
$(clonedForm).ready(function(event){
   addEventHandlerToFormButton();
}) 
```

我希望这对你有帮助。

PS：对不起我的英语。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-26T02:35:19.417

根据@Elliot B. 的回答，我制定了一个适合我的计划。

```
const callback = () => {
  const el = document.querySelector('#a');
  if (el) {
    observer.disconnect();
    el.addEventListener('click', () => {});
  }
};

const observer = new MutationObserver(callback);
observer.observe(document.body, { subtree: true, childList: true }); 
```

# hibernate - 使用嵌套集合查询实体的正确方法？

> ID：15875142
> 
> 赞同：1
> 
> 时间：2013-04-08T09:01:04.930
> 
> 标签：hibernate, jpa, spring-data-jpa

当集合元素有自己的集合时，基本查询似乎不起作用。

想象一个银行的数据模型，客户有投资组合，有投资。获取客户的正确方法是什么？

我试过这个：

```
@Query("SELECT DISTINCT c FROM Customer c LEFT JOIN FETCH c.portfolios") 
```

但它因“无法延迟初始化角色集合”而失败。

投资定义为：

```
@ManyToMany(cascade = CascadeType.ALL) 
```

如果我更改 fecthType，查询将起作用：

```
@ManyToMany(cascade = CascadeType.ALL, fetch=FetchType.EAGER) 
```

但是有没有办法让它在不改变 fetchtype 的情况下工作？

编辑：

我应该提到我使用 Spring 的 JpaRepository 来定义上述查询。所有实体都有各自的存储库，但看起来获取客户不会触及投资组合存储库中的任何方法（这将 LEFT JOIN 投资），因此永远不会获取投资。

此外，我可以使用类似的查询来获取投资组合，并且它工作正常，因为投资没有任何集合。但是获取链客户 -> 投资组合 -> 投资失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:43:09.363

您的查询选择客户并获取他们的投资组合，使用`left join fetch`. 如果你还想获取投资组合的投资，你需要一个额外的连接获取，就像在 SQL 中一样：

```
select distinct c FROM Customer c 
left join fetch c.portfolios portfolio
left join fetch portfolio.investments 
```

# php - 如何从 php 调用 grails 应用程序中定义的 web 服务

> ID：15875143
> 
> 赞同：0
> 
> 时间：2013-04-08T09:01:09.430
> 
> 标签：php, web-services, rest, grails

我是网络服务的新手

我的应用程序中有一个域类，如下所示。

```
class Training{

  string name
  Date date

} 
```

我想在 php 页面中显示培训列表

**我必须在 grails 和 php 脚本中进行哪些更改才能做到这一点。我想要 JSON 格式的数据。**

我想遵循 RESTful 架构。

基本上我想从我的网站（用 php 编写）与 grails 应用程序进行交互。将来我想将数据从我的网站保存到 grails 应用程序数据库和许多调用中。

在 web 服务中提供请求之前，我是否需要进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:12:32.477

如果您想遵循架构模式，请参阅以下链接： http: [//grails.org/doc/latest/guide/webServices.html#REST](http://grails.org/doc/latest/guide/webServices.html#REST)

首先创建 TrainingController 控制器，它执行请求的操作并返回 json 数据。例如

```
class TrainingController {
   def show = {
      render Training.get(params.long('id')) as json
   }
} 
```

如果你不使用特殊的 url 映射来匹配 restful 模式，你可以简单地调用 training/1 并返回 json 结构。有关更多渲染选项，请参阅文档。

# asp.net - 瞥见配置 - 模棱两可的资源

> ID：15875146
> 
> 赞同：1
> 
> 时间：2013-04-08T09:01:17.567
> 
> 标签：asp.net, asp.net-mvc-4, web-config, glimpse

我尝试在我的 MVC4 网站上运行 Glimpse，但出现错误：

```
Ambiguous resource with name 'glimpse_config' found. 
```

当我运行 /Glimpse.axd 时。

我按照文档中的说明进行了配置。我也尝试删除并重新安装它但没有成功。我打开登录，它说：

```
2013-04-08 10:42:08.5762 | WARN | Multiple Resources with name of 'glimpse_ajax'. Resources should have unique names. | 
2013-04-08 10:42:08.5762 | WARN | Multiple Resources with name of 'glimpse_client'. Resources should have unique names. | 
2013-04-08 10:42:08.5762 | WARN | Multiple Resources with name of 'glimpse_config'. Resources should have unique names. | 
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:11:03.497

升级到 glimpse 1.3 后我遇到了同样的问题，对我有用的解决方案是清除临时 ASP.NET 文件，这些文件很可能在这里：

> %TEMP%\临时 ASP.NET 文件

或在这里：

> %USERPROFILE%\AppData\Local\Temp\Temporary ASP.NET 文件

看起来你也通过一瞥问题提出了这个问题，我也发布了[我的答案](https://github.com/Glimpse/Glimpse/issues/297#issuecomment-16844553)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:32:33.353

听起来您的 bin 目录中有多个 DLL 副本。（不知何故？）

清理您的构建并重试。

# c++ - 将数组拆分为两组？

> ID：15875147
> 
> 赞同：2
> 
> 时间：2013-04-08T09:01:20.180
> 
> 标签：c++, arrays, algorithm, stl

`W`我有一个数组`0..N-1`

我需要将它们分成两组：说`K`和`N-K`元素。

但条件是：`sum(N-K)`-`sum(K)`应该是最大值。

**我该如何处理？**

我试过这样做：对数组进行排序 - `std::sort(W,W+N)`，然后：

```
for(int i=0; i<K; ++i) less+=W[i];
for(int i=K; i<N; ++i) more+=W[i]; 
```

进而`more-less`

但我认为这不是最佳方式，或者在某些情况下甚至可能是错误的。

谢谢。

**更新**：

我们必须从中选择`K`元素，`W`使得`sum(k elements)` 和之间的差异`sum(remaining elements)`最大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:04:47.683

*编辑：请注意，在您发布的问题中，您似乎期望排序从高到低排序。两者都`std::sort`将`std::nth_element`低元素放在首位。我已在下面的答案中替换`K`为`(N-K)`更正此问题。*

*更新后编辑*：执行以下两次，一次 for`K`和一次 for `(N-K)`。选择最佳答案。

`std::sort`比[`std::nth_element`](http://en.cppreference.com/w/cpp/algorithm/nth_element)您的目的更优化。

```
std::nth_element( W, W+(N-K), W+N ); 
```

您的使用`std::sort`将使用 O(n log n) 复杂性来对您不需要的两个集合中的所有元素进行排序。

`std::nth_element`将使用 O(n) 复杂度进行*分区*而不完全排序。

*注意：您的 for 循环也可以替换为[`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)*

```
less = std::accumulate( W, W+(N-K), 0 );
more = std::accumulate( W+(N-K), W+N, 0 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:07:13.750

您要将元素集拆分为两个不同的不重叠子集 A 和 B。您希望 sum(A)-sum(B) 尽可能高。

因此，您希望 sum(A) 尽可能高，而 sum(B) 尽可能低。

因此，集合“A”应包含尽可能高的元素，
而集合“B”应包含尽可能低的元素

通过按元素的值对输入集进行排序，并将“最低元素”分配给 B，将“最高元素”分配给 A，可以保证 sum(A)-sum(B) 将是最大可能的。

我没有看到您的方法是错误的任何情况。

至于“最优”的东西，我根本没有分析。德鲁的笔记似乎很有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:12:25.427

可以使用`max heap`. `O(n + n log k)`时间

制作一个 size 的最大堆`k`。我们找到`k`了数组的最低元素。堆的元素将`root`是堆中的最高元素。`Make a heap of first k elements`.

现在遍历数组。将数组元素与`root`最大堆的元素进行比较。如果它小于 root 则替换它并再次堆化堆。这将花费 O(n log k) 时间。求堆元素的总和。

现在您可以找到数组其余元素的总和并获得差异。( `O(n)`) 时间

总时间`O(n + n log k)`

编辑：也许您可以在遍历堆时找到数组所有元素的总和。这将节省`O(n)`时间，并且可以解决`O(n log k)`

# javascript - 客户端图像映射示例 - 不起作用

> ID：15875149
> 
> 赞同：2
> 
> 时间：2013-04-08T09:01:20.523
> 
> 标签：javascript

我尝试做客户端图像映射的简单示例。但这并没有成功。
仅在浏览器上输出： `Clicked Item:` 代码看起来不错。但还是不行。为什么？

**代码：**

```
<html>
    <head>
        <title>Client-Side Image Map Example</title>
            <script>
                function update(t) {
                    document.form1.text1.value = t;
                }
            </script>
    </head> 
        <body>
            <map name="map1">
                <area shape=rect coords="14,15,151,87" onClick="javascript:update('Servis');"
                    onMouseOver="window.status='Servise department'; return true;">
                <area shape=rect coords="162, 16, 283, 85" onClick="javascript:update('Shop');"
                    onMouseOver="window.status='Sales department'; return true;">
                <area shape=rect coords="294, 15, 388, 87" onClick="javascript:update('About as');"
                    onMouseOver="window.status='About as'; return true;">
                <area shape=rect coords="13, 98, 79, 178" onClick="javascript:update('Email');"
                    onMouseOver="window.status='Write to as'; return true;">
                <area shape=rect coords="92, 97, 223, 117" onClick="javascript:update('Goods');"
                    onMouseOver="window.status='Goods & service'; return true;">
                <area shape=rect coords="235, 98, 388, 177" onClick="javascript:update('History');"
                    onMouseOver="window.status='History'; return true;">
                <area shape=default onClick="javascript:update('No item selected.');"
                    onMouseOver="window.status='Please select an item.>
            </map>
            <h1>Client-Side Image Map Example</h1>
            <hr>
                The image map below uses JavaScript functions in each of its areas. Moving over
                an area will display information about it in the status line. Clicking on an area
                places the name of the area in the text field below the image map.
            <hr>
                <image src="imagemap.qif" usemap="#map1">
            <hr>
                <form name="form1">
                    <b>Clicked Item:</b>
                    <hr>
                    <input type="text" name="text1" value="Please select an item.">
                </form>
            <hr>
        </body>    
</html> 
```

**问：**

*   如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T09:49:58.620

我修复了你的代码。有一些问题： - 缺少一个区域的返回语句 - 缺少脚本标签的语言注释 - 通用格式

这是一个固定的代码：

```
<html>
    <head>
        <title>Image Map Example</title>
            <script LANGUAGE="JavaScript">
                function update(t) {
                   document.form1.text1.value = t;
                }
            </script>
    </head>
    <body>
        <map NAME="map1">
            <area SHAPE=RECT COORDS="14,15,151,87" onClick="update('service');"
            onMouseOver="window.status='Service Department'; return true;">
            <area SHAPE=RECT COORDS="162,16,283,85" onClick="update('sales');"
            onMouseOver="window.status='Sales Department'; return true;">
            <area SHAPE=RECT COORDS="294,15,388,87" onClick="update('info');"
            onMouseOver="window.status='Information'; return true;">
            <area SHAPE=RECT COORDS="13,98,79,178" onClick="update('email');"
            onMouseOver="window.status='Email Us'; return true;">
            <area SHAPE=RECT COORDS="92,97,223,177" onClick="update('products');"
            onMouseOver="window.status='Products'; return true;">
            <area SHAPE=RECT COORDS="235,98,388,177" onClick="update('our staff');"
            onMouseOver="window.status='Our Staff'; return true;">
            <area SHAPE=default onClick="update('No item selected.');"
            onMouseOver="window.status='Please select an item.'; return true;">
        </map>
        <h1>Client-Side Image Map Example</h1>
        <hr>
            The image map below uses JavaScript functions in each of its areas. Moving over
            an area will display information about it in the status line. Clicking on an area
            places the name of the area in the text field below the image map.
        <hr>
            img SRC="imagemap.gif" USEMAP="#map1">
        <hr>
            <FORM NAME="form1">
                <b>Clicked Item:</b>
                <input TYPE="text" NAME="text1" VALUE="Please select an item.">
            </form>
        <hr>
    </body>
</html> 
```

# php - SEO 友好链接重写 - 管理员子文件夹的重写尝试不成功 - PHP Apache

> ID：15875155
> 
> 赞同：1
> 
> 时间：2013-04-08T09:01:27.683
> 
> 标签：php, apache, url-rewriting, subdirectory

## 我的目标

**如果输入的url分别如下：**

1.  somedomain.p.ht/admin/articles
2.  somedomain.p.ht/admin/comments

**预期的重写网址分别如下：**

3.  somedomain.p.ht/admin/index.php?adminpage=articles
4.  somedomain.p.ht/admin/index.php?adminpage=comments

## public_html 文件夹中的 .htaccess 代码

```
RewriteEngine On
RewriteBase /

#always use www - redirect non-www to www permanently
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTPS}s on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# hotlink protection
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?domain.p.ht [NC]
RewriteRule \.(jpg|jpeg|png|gif|css|js)$ - [NC,F,L]

# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# File caching is another famous approach in optimizing website loading time
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf)$">
Header set Cache-Control "max-age=2592000"
</FilesMatch>

# disable directory browsing
Options All -Indexes

# secure htaccess file
<Files .htaccess>
 order allow,deny
 deny from all
</Files>

# secure password file
<Files .htpasswd>
 order allow,deny
 deny from all
</Files>

# secure spesific files
<Files a_secret_file.php>
 order allow,deny
 deny from all
</Files>

#SEO friendly linking
RewriteEngine On
RewriteBase /
RewriteRule ^articles/(.+)/(.+)$ index.php?page=articles&subject=$1&object=$2 [L]
RewriteRule ^articles/(.+)$ index.php?page=articles&subject=$1 [L]
RewriteRule ^labels/(.+)$ index.php?page=labels&subject=$1 [L]
RewriteRule ^(contact|labels|articles)$ index.php?page=$1 [L] 
```

## 管理文件夹中的 .htaccess 代码

```
AuthUserFile /path/to/public_html/.htpasswd
AuthName "Log In"
AuthType Basic
Require valid-user

RewriteEngine On
RewriteBase /
# SEO friendly linking in physical admin folder
RewriteRule ^admin/(articles|comments|questions)$ admin/index.php?adminpage=$1 [L] 
```

## 我在管理文件夹中的 .htaccess 中尝试过的代码

笔记：

1.  Admin 是一个物理文件夹
2.  除了 /admin/... url，每个 seo 友好的 url 都在域级别工作。
3.  `http://www.domain.p.ht/admin/index.php?adminpage=articles`作品
4.  `http://www.domain.p.ht/admin/index.php?adminpage=comments`作品
5.  我`.htaccess`在物理管理文件夹下面的所有代码都不成功，*导致 404 not found 错误*

    `RewriteRule ^admin/comments$ /admin/index.php?adminpage=$1`

    `RewriteRule ^admin/(articles|comments|questions)$ admin/index.php?adminpage=$1 [L]`

    `RewriteRule ^/admin/(articles|comments|questions)$ /admin/index.php?adminpage=$1 [L]`

    你能纠正我吗？我无法解决我的问题。我还搜索了 stackoverflow 的类似标题问题。

    BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:26:08.053

### 在 admin 文件夹中尝试这个 htaccess 代码

```
AuthUserFile /path/to/public_html/.htpasswd
AuthName "Log In"
AuthType Basic
Require valid-user

RewriteEngine On
RewriteBase /admin/

# SEO friendly linking in physical admin folder
RewriteRule ^(articles|comments|questions)/?$ index.php?adminpage=$1 [L,QSA,NC] 
```

# regex - 单个文本框中的名字和姓氏姓氏

> ID：15875156
> 
> 赞同：0
> 
> 时间：2013-04-08T09:01:35.773
> 
> 标签：regex

我有一个文本框，我可以在其中获取用户的姓氏。如何在正则表达式中只允许一个连字符（-），一个空格（），一个撇号（'），名字至少两个字符，一个空格然后姓氏。名字和姓氏单个文本框中的姓氏。我现在正在使用这个正则表达式。^(?!. *-.* -. *)(?!.* '. *'.* )(?!. *\s.* \s.*)[az AZ]{1,24}[az AZ- ']+$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:04:44.123

你可以使用这个网站来构建你所有的正则表达式

访问[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:17:16.837

一个连字符：`(?![^-]*-[^-]*-)`
一个空格：`(?![^ ]* [^ ]* )`
一个撇号：`(?![^']*'[^']*')`
至少 2 个字符：`[\w-' ]{2,} [\w-' ]{2,}`

所以，总结一下：

```
/(?![^-]*-[^-]*-)(?![^ ]* [^ ]* )(?![^']*'[^']*')([\w-']{2,}) ([\w-']{2,})/ 
```

这也将捕获第一个和第二个捕获组中的名字和姓氏。

# javascript - 如何使用 sinonjs 和 jquery 监视窗口调整大小事件？

> ID：15875157
> 
> 赞同：2
> 
> 时间：2013-04-08T09:01:44.107
> 
> 标签：javascript, jquery, unit-testing, jasmine, sinon

我使用backbonejs、requirejs 来制作我的javascript 应用程序。

我也使用 jasmine、sinonjs 和 jasmine-sinon 插件来测试我的应用程序，但使用 spy 时出现问题。

间谍方法调用得很好（我敢肯定），但茉莉花测试结果表明该方法**没有**被调用！

* * *

我有一个主干视图，它具有浏览器窗口调整大小事件的回调。

我想要做的是测试在触发窗口调整大小事件时是否应该调用“windowResizeCallback”函数。

这是我的主干视图代码。

```
define([
    'jquery',
    'use!underscore',
    'use!backbone',
    // other dependencies..
], function (
    $,
    _,
    Backbone,
    // other dependencies..
) {

    var MyView = Backbone.View.extend({

        initialize: function () {
            // do initialization
            var self = this;
            $(window).resize($.proxy(self.windowResizeCallback, self));
        },

        windowResizeCallback: function () {
            // do my business..
            this.otherFunction();
        },

        otherFunction: function () {
            // function called by window resize callback
        }

        // other properties, functions, ..

    });

    return MyView;
}); 
```

这是我的测试代码。

```
<script type="text/javascript" src="path/to/jasmine.js"></script>
<script type="text/javascript" src="path/to/sinon.js"></script>
<script type="text/javascript" src="path/to/jasmine-sinon.js"></script>
<!-- other scripts.. -->
<script type="text/javascript>
define([
    'view/myView'
], function (
    MyView
) {

    describe('view.MyView', function () {

        beforeEach(function () {
            this.view = new MyView();
            sinon.spy(this.view, 'windowResizeCallback');
        });

        afterEach(function () {
            this.view.windowResizeCallback.restore();
        });

        describe('MyView.windowResizeCallback', function () {

            beforeEach(function () {
                this.view.windowResizeCallback.reset();
            });

            it('callback should be called when window resize event fired', function () {
                $(window).trigger('resize');
                expect(this.view.windowResizeCallback).toHaveBeenCalled();
                // above test fails !!!!
            });

        });
    });

});
</script> 
```

我认为应该通过测试代码，但它失败并出现错误

```
Expected Function to have been called. 
```

当我在“windowResizeCallback”方法中插入警报代码时，警报显示得很好，所以我相信当浏览器窗口调整大小事件被触发时回调会被很好地调用。

我不明白为什么。我的代码有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:39:53.843

问题是事件侦听器使用原始函数。首先初始化视图，事件侦听器绑定到原始函数，然后替换`windowResizeCallback`视图中的函数，但绑定到事件侦听器的函数仍然是原始函数。

监视/子/模拟您要测试的对象的功能也不是一个好主意。更好地测试`windowResizeCallback`函数的结果。

# codeigniter - CodeIgniter 子查询的问题

> ID：15875162
> 
> 赞同：2
> 
> 时间：2013-04-08T09:01:57.360
> 
> 标签：codeigniter

```
$query=$this->db->query('SELECT g.gallery_id, g.gallery_title, (
                           SELECT i.gallery_image_path
                           FROM nepal_gallery_image AS i
                           WHERE i.gallery_id = g.gallery_id
                           AND i.gallery_image_status =  "Enabled"
                           LIMIT 0 , 1) AS gallery_image_path
                         FROM nepal_gallery AS g
                         WHERE g.gallery_status =  "Enabled"'); 
```

上面的查询给出了正确的输出。

但是，当我使用 CI 子查询库时：

```
$this->load->library('Subquery');
$this->db->select('g.gallery_id,g.gallery_title');
$sub = $this->subquery->start_subquery('select');
$sub ->select('i.gallery_image_path')
     ->from('nepal_gallery_image AS i')                 
     ->where(array('i.gallery_image_status'=>"Enabled",  
                   'i.gallery_id'=>"g.gallery_id")) 
     ->limit(0,1);
$this->subquery->end_subquery('gallery_image_path'); 
$this->db->from('nepal_gallery AS g');
$this->db->where('g.gallery_stats',"Enabled");
$query=$this->db->get(); 
```

结果查询是：

```
SELECT `g`.`gallery_id` , `g`.`gallery_title` , (
  SELECT `i`.`gallery_image_path`
  FROM (`nepal_gallery_image` AS i)
  WHERE `i`.`gallery_image_status` = 'Enabled'
  AND `i`.`gallery_id` = 'g.gallery_id'
  LIMIT 0 , 1 ) AS gallery_image_path
FROM (`nepal_gallery` AS g)
WHERE `g`.`gallery_status` = 'Enabled' 
```

并且输出不如预期。

第一个查询的输出是

```
 <table>
     <tr>
         <th> gallery_id</th>
         <th> gallery_title</th>
         <th> gallery_image_path </th>
     </tr>
     <tr>
        <td>1</td>
        <td>Gallery 1</td>
        <td>images/image1.jpg</td>
     </tr>
     <tr>
        <td>2</td>
        <td>Gallery 2</td>
        <td>images/image2.jpg</td>
     </tr>
     </table> 
```

但是，在以后的查询中，输出是

```
 <table>
     <tr>
         <th> gallery_id</th>
         <th> gallery_title</th>
         <th> gallery_image_path </th>
     </tr>
     <tr>
        <td>1</td>
        <td>Gallery 1</td>
        <td>NULL</td>
     </tr>
     <tr>
        <td>2</td>
        <td>Gallery 2</td>
        <td>NULL</td>
     </tr>
     </table> 
```

似乎问题出在子查询上。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:07:54.793

问题是条件将您的表别名`g`作为字符串的子查询`'g.gallery_id'`避免CI的保护字段的一种方法是将第三个参数作为false在where条件中传递，因此CI不会尝试使用反引号保护您的字段或表名称。

试试这个

```
 $sub ->select('i.gallery_image_path')
 ->from('nepal_gallery_image AS i')                 
 ->where(array('i.gallery_image_status'=>"Enabled",  
               'i.gallery_id'=>"g.gallery_id"), NULL, FALSE);
                                           //--^^^^^^^^^^^^^^--here 
 ->limit(0,1); 
```

**或简单地手动编写您的条款**

```
 $where = "i.gallery_id = g.gallery_id AND i.gallery_image_status =  'Enabled'";
  $sub ->select('i.gallery_image_path')
 ->from('nepal_gallery_image AS i')                 
 ->where($where,NULL,FALSE); 
 ->limit(0,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:00:47.557

```
 ->where(array('i.gallery_image_status'=>"Enabled",  
               'i.gallery_id'=>"g.gallery_id")) 
```

问题在于 'i.gallery_id'=>"g.gallery_id" - CI 正在使用 "g.gallery_id" 作为文字字符串构建查询......当它应该是表列引用时。如果您手动替换 - "g.gallery_id" 为 'g'.'gallery_id' 它应该用作演示。

如果您不知道如何补救，请发表评论。（这可能只是使用单引号的问题）。

# perl - 为什么两个字符串在下面的脚本中都不匹配？

> ID：15875163
> 
> 赞同：0
> 
> 时间：2013-04-08T09:01:57.933
> 
> 标签：perl

我给 $second 变量为： `E:\oracle\V44\EBSapps\appl\admin\adalldefaults.txt<br/>`

两个字符串都相同，但通过该运算符，它们不匹配。为什么？

```
my $first="E:\\oracle\\V44\\EBSapps\\appl\\admin\\adalldefaults.txt";
chomp(my $second=<STDIN>);

print "$first\n";
print "$second\n";
print length($first);print "\n";
print length($second);print "\n";

if ($first !~ /$second/i)
{
    print "string didn't matched\n";
}
else
{
    print "string matched\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:23:00.293

利用

```
$first !~ /\Q$second\E/i 
```

将`\Q`应用`quotemeta`引用所有特殊字符的函数，直到`\E`.

# powershell - 在 Azure WorkerRole 上运行 PowerShell 命令时出错

> ID：15875165
> 
> 赞同：5
> 
> 时间：2013-04-08T09:02:08.067
> 
> 标签：powershell, azure

我正在尝试在 Windows Azure 角色上运行启动任务 cmd-script。

这是命令文件脚本的两行：

```
powershell $command = "set-executionpolicy Unrestricted"    
powershell $command = ".\setupAgent.ps1" -NonInteractive >; out.txt 
```

现在的问题是，我从命令 shell 收到一条错误消息，上面写着：

```
D:\Users\UserAccount>∩╗┐powershell $command = "set-executionpolicy Unrestricted"
'∩╗┐powershell' is not recognized as an internal or external command,
operable program or batch file. 
```

看起来使用了某种不同的代码页或链接，因为这些特殊字符不在我的 cmd 文件中。cmd 文件是通过 VS 2012 Ultimate 在 Windows 8 上创建的。

你有什么想法，我怎么能在命令的开头解除特殊字符？如果我通过远程桌面将命令从 cmd 文件复制到控制台，它工作正常！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:50:23.100

`whatever.cmd`使用 VS 2012 Ultimate打开文件。单击`File`-> `Save whatever.cmd as`-> 在对话框上，按钮旁边有一个小箭头`[save]`。它将显示一个菜单，其中包含以下选项`Save with Encoding`：

![使用编码保存](https://i.stack.imgur.com/8kgMn.png)

选择它。现在从可用编码列表中选择“US-ASCII Codepage 20127”。

# mysql - 多个小查询与单个长查询。哪个效率更高？

> ID：15875167
> 
> 赞同：5
> 
> 时间：2013-04-08T09:02:12.150
> 
> 标签：mysql

以下哪种方法更有效：

1.  单个更长的查询：

    ```
    "SELECT COUNT( * ) AS num
    FROM (

        SELECT users.UID, cnumber
        FROM users
        JOIN identity ON users.UID = identity.UID
        WHERE  'abc'
        IN (google, facebook, twitter, linkedin)

    ) AS userfound
    JOIN jobs ON userfound.cnumber = jobs.cnumber
    WHERE JID = 24";

    if(resultfromquery == 1)
        //Some code here
    else
        //Some code here 
    ```

2.  将较长的查询分解为多个单表查询：

    ```
    uid = "SELECT UID FROM identity WHERE 'abc' IN (google, facebook, twitter, linkedin)";
    cnumber_from_usertable = "SELECT cnumber FROM users WHERE UID = 'uid'";
    cnumber_from_jobtable = "SELECT cnumber FROM jobs WHERE JID = 24";

    if(cnumber_from_usertable == cnumber_from_jobtable)
        //Some code here
    else
        //Some code here 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:04:20.273

测量微时差 ;-) 不过，我会使用单个查询，更少的连接，更少的等待时间，它旨在处理这些事情。

[http://www.phpjabbers.com/measuring-php-page-load-time-php17.html](http://www.phpjabbers.com/measuring-php-page-load-time-php17.html)

```
<?php
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$start = $time;
?>
"SELECT COUNT( * ) AS
FROM (

    SELECT users.UID, cnumber
    FROM users
    JOIN identity ON users.UID = identity.UID
    WHERE  'abc'
    IN (google, facebook, twitter, linkedin)

) AS userfound
JOIN jobs ON userfound.cnumber = jobs.cnumber
WHERE JID = 24";

if(resultfromquery == 1)
    //Some code here
else
    //Some code here

<?php
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$finish = $time;
$total_time = round(($finish - $start), 4);
echo 'Page generated in '.$total_time.' seconds.';
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T09:57:07.737

其实我对此有些不同的看法。MYSQL 支持子查询，其中一个原因是将较大的查询分解为较小的查询。如果您正在使用 INNODB 引擎并且正确使用参数，例如 tmp 表、堆表、缓冲池或查询缓存，那么您可能会获得比较小查询更好的结果。MYSQL 旨在执行大量小查询，因此最好有更多的小查询而不是更大的查询。

如果更大的查询是更好的选择，那么我们不需要创建像 Infinidb 和 INfobright 这样使用基于列的结构来运行大型查询的工具，而 MYSQL 是基于行的。

所以想一想，小查询的结果会比一个大的单个查询更好，而且开销不是查询，而是连接，而且 MYSQL 的连接非常便宜，所以也不用担心它们。但是，如果您的 MYSQL 正在创建线程，那么您无需担心。

简而言之，小型查询与大型大型查询将是我的选择。

# perl - 如何存储一个' | '使用 perl 在哈希中分隔假脱机文件

> ID：15875171
> 
> 赞同：0
> 
> 时间：2013-04-08T09:02:28.527
> 
> 标签：perl, hash

以下是我的文本文件的格式

```
3PTTN8KS4DE6CT67NJC0|8269076305|22-FEB-13|-79|352
3PTTN8KS4DE6CT67NJC0|8269076305|22-FEB-13|90.83|387
3PY9MEMG0187YWJMBYA1|1114216131|15-FEB-13|-79|352
3PY9MEMG0187YWJMBYA1|1114216131|15-FEB-13|82.95|387
3Q335ZZGMDHZH9GV7TC1|1884476900|20-FEB-13|-79|352
3Q335ZZGMDHZH9GV7TC1|1884476900|20-FEB-13|89.27|387
3QA1Y5QTETP9N984P6W0|685532706|19-FEB-13|-79|352
3QA1Y5QTETP9N984P6W0|685532706|19-FEB-13|90.83|387
3QB8WFBAM94R4WG1Z5R1|1250545621|15-FEB-13|-79|352
3QB8WFBAM94R4WG1Z5R1|1250545621|15-FEB-13|89.27|387 
```

现在我想将所有这些值读入 perl 哈希。而且这个文件是一个巨大的文件，必须与另一个巨大的文件进行比较。为此，我想将其存储在 perl 哈希中并进行比较。

只需要有关如何使用 perl 哈希保存此数据的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:22:05.540

我不清楚您是否需要拆分任何内容，并写下您的问题。只需将该行直接放入哈希中：

```
#!/usr/bin/env perl

# 
# Usage:  
#
# $ compareFiles.pl foo.txt bar.txt
#

use strict;
use warnings;

my $dataRef;

my $sourceFn = $ARGV[0];
open my $sourceFh, "< $sourceFn";
while (<$sourceFh>) {
    chomp;
    my $sourceKey = $_;
    $dataRef->{$sourceKey} = 1;
}
close $sourceFh;
... 
```

现在您可以通过打开第二个文件流并检查密钥是否存在来比较它：

```
...
my $compareFn = $ARGV[1];
open my $compareFh, "< $compareFn";
while (<$compareFh>) {
    chomp;
    my $comparisonKey = $_;
    if (defined $dataRef->{$comparisonKey}) {
        print STDOUT "We found [ $comparisonKey ] in both files!\n";
    }
}
close $compareFh; 
```

如果您需要调整键，以便比较某些值的子集，则使用`split("|", $_)`将`$sourceKey`和拆分`$comparisonKey`为标记的索引列表，您可以从中构造自定义键，*例如*：

```
my $sourceFn = $ARGV[0];
open my $sourceFh, "< $sourceFn";
while (<$sourceFh>) {
    chomp;
    my @sourceElements = split("|", $_);
    my $sourceKey = join("_", ($sourceElements[1], $sourceElements[3], $sourceElements[4]));
    $dataRef->{$sourceKey} = 1;
}
close $sourceFh;
... 
```

等等。

请务必使用与构建所有源键相同的过程来构建比较键。

此外，您希望将您的密钥设计为足够独特，以作为两个或多个输入之间的可靠比较标记。

您基本上需要问自己需要在输入之间进行比较的是什么。您的问题并不清楚，因为那里有很多冗余信息，这使得使用哈希表有点棘手。

# perl - 以逗号分隔，但仅在不使用双引号时

> ID：15875174
> 
> 赞同：0
> 
> 时间：2013-04-08T09:02:36.280
> 
> 标签：perl, split

如何将以下字符串拆分为数组？我尝试了 split() 但它也拆分了带引号的字符串....但是我不想拆分带引号的字符串。

```
Apple,"String1,String2",Abcd,EFGH,XYZ 
```

输出应该是这样的：

```
Apple
"String,String2"
Abcd
EFGH
XYZ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:36:55.613

使用[文本::CSV](https://metacpan.org/module/Text%3a%3aCSV)：

```
#!/usr/bin/env perl
use strict;
use warnings;
use 5.010;

use Text::CSV;

my $parser = Text::CSV->new;
$parser->parse(qq(Apple,"String1,String2",Abcd,EFGH,XYZ));
say join "---", $parser->fields; 
```

输出：

```
Apple---String1,String2---Abcd---EFGH---XYZ 
```

# extjs - Sencha 视图之间的导航

> ID：15875182
> 
> 赞同：0
> 
> 时间：2013-04-08T09:03:14.173
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在开发 sencha touch 应用程序，它有很多视图并且视图之间有很多导航，我使用以下代码做到了这一点

```
Ext.Viewport.add({
    xtype : 'view2'
});
Ext.Viewport.animateActiveItem(this.getView2(), {
    type : 'slide',
    direction : 'right'
}); 
```

但是，假设当用户从 view1 导航到 view2 和 view2 到 view3 时，从 view3 中，当用户返回按钮时，我编写了上面的代码来从 view3 导航到 view2。

上面的代码可以正常工作，但是 view1 首先像闪电一样出现，然后移动到 view2。

在视图之间导航时，有时也会出现白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:48:15.590

在 sencha touch 中提供了一个完全用于此目的的组件（用于处理多视图推送/弹出），它是[NavigationView](http://docs.sencha.com/touch/2-1/#!/api/Ext.navigation.View)。如果您参考文档，您会看到提供了许多配置选项，可以帮助您设计和维护视图。导航视图最棒的地方在于，`back button`每当你推送一个新视图时，你都会得到一个。

基本上，这个想法是，将父视图作为导航视图，并将所有其他视图作为子视图添加到该父视图。因此，每当您添加一个新孩子时，它都会被推入堆栈。和堆栈一样，我们可以将视图推送或弹出该导航视图或从该导航视图中弹出视图。

导航视图还有一个很酷的地方是，你不必再担心 DOM 的大小了。通过正确的配置设置，sencha touch 将在弹出时立即删除未使用或不必要的视图。这将帮助您提高应用程序的性能。

我在几乎所有深度视图级别高达 6-7 的项目中都使用了导航视图。如果处理得当，它永远不会成为问题。

您正在遵循的当前策略可能存在其他问题，但您可以改用导航视图并查看差异，我*强烈*建议您这样做。

# backbone.js - 使用从其他属性分配的默认属性初始化模型

> ID：15875183
> 
> 赞同：0
> 
> 时间：2013-04-08T09:03:15.217
> 
> 标签：backbone.js, coffeescript

Time 模型有两个默认属性持续时间和剩余时间，我需要剩余时间值取决于持续时间。

```
class Time extends Backbone.Model
    defaults:
      duration: 0
      remainingTime: @duration  //This don't work 
```

如何访问持续时间值以将其分配给剩余时间？

PD：此外我还测试了`Time.duration, Time.defaults.duration, this.duration`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:10:19.127

您不能那样访问它，因为当默认对象将被评估时，您的上下文将不是您的对象（而是全局对象）。因此*剩余*时间肯定是未定义的。
不过，您可以在*初始化*方法中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:32:14.553

我使用这样的方法：创建一个保留全局变量的 js（或咖啡）。因此，以下是：

```
root = @
#and
$ ->
  root.duration # or your other global variables 
```

之后，您可以在任何地方调用该变量。

# python - 范围的奇怪论点

> ID：15875188
> 
> 赞同：16
> 
> 时间：2013-04-08T09:03:36.273
> 
> 标签：python, python-3.x, arguments, range

python3 中的 range 函数接受三个参数。其中两个是可选的。所以参数列表看起来像：

[开始]，停止，[步骤]

这意味着（如果我错了，请纠正我）在非可选参数之前有一个可选参数。但是，如果我尝试定义这样的函数，我会得到：

```
>>> def foo(a = 1, b, c = 2):
    print(a, b, c)
SyntaxError: non-default argument follows default argument 
```

这是我作为“普通”python用户无法做到的事情，还是我可以以某种方式定义这样的函数？当然我可以做类似的事情

```
def foo(a, b = None, c = 2):
    if not b:
        b = a
        a = 1 
```

但例如帮助功能会显示奇怪的信息。所以我真的很想知道是否可以定义一个类似内置的函数`range`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T09:05:26.043

`range()`接受 1 个位置参数和两个可选参数，并根据传入的参数数量对这些参数进行不同的*解释。*

如果只传入*一个*参数，则假定它是`stop`参数，否则将第一个参数解释为开始。

实际上，`range()`用[C 编码的](https://github.com/python/cpython/blob/44467e8ea4cea390b0718702291b4cfe8ddd67ed/Objects/rangeobject.c#L71-L122)，接受可变数量的参数。你可以这样模拟：

```
def foo(*params):
    if 3 < len(params) < 1:
        raise ValueError('foo takes 1 - 3 arguments')
    elif len(params) == 1
        b = params[0]
    elif:
        a, b = params[:2]
    c = params[2] if len(params) > 2 else 1 
```

但你也可以交换参数：

```
def range(start, stop=None, step=1):
    if stop is None:
        start, stop = 0, start 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T09:07:40.047

`range`不接受关键字参数：

```
range(start=0,stop=10)
TypeError: range() takes no keyword arguments 
```

它需要 1、2 或 3 个位置参数，它们根据它们的数量进行评估：

```
range(stop)              # 1 argument
range(start, stop)       # 2 arguments
range(start, stop, step) # 3 arguments 
```

即不可能创建一个具有定义`stop`和`step`默认值的范围`start`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:06:29.580

```
def foo(first, second=None, third=1):
     if second is None:
         start, stop, step = 0, first, 1
     else:
         start, stop, step = first, second, third 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T18:51:22.033

正如您现在所知道的那样，真正的答案是这`range`是一个 C 函数，由于某种原因它没有与 python 相同的规则（很高兴知道为什么）。

People might hate me for suggesting this but I've being doing this for range since I have a terrible memory of what the order of things are. Imo this shouldn't be a problem so I'm fixing it:

```
range(*{'start':0,'stop':10,'step':2}.values()) 
```

the reason I made it a one liner is because I don't want to have to define a range function that needs to be defined everywhere or imported everywhere. This is pure python.

# iphone - 如何将新设备添加到临时配置文件？

> ID：15875198
> 
> 赞同：0
> 
> 时间：2013-04-08T09:03:59.070
> 
> 标签：iphone, provisioning-profile

我正在寻找可以将新设备添加到现有临时配置文件的位置，但我找不到它。供应网站上有一些更新。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:36:44.333

1.  将新的设备 UUID 添加到网站的设备部分。
2.  然后转到配置部分。转到需要新设备的 Adhoc 配置。
3.  选择您在步骤 1 中添加的新设备。它应该在那里。
4.  现在您必须再次生成并下载配置文件并将其分发给所有将要对您的应用进行 beta 测试的人。

# java - JasperReports fillReport 太慢且消耗资源

> ID：15875199
> 
> 赞同：18
> 
> 时间：2013-04-08T09:04:01.033
> 
> 标签：java, xml, performance, jasper-reports

我发现从 Java 应用程序填写报告时，JasperReports 真的很**慢。**程序挂在这一行：

```
print = JasperFillManager.fillReport(report, parameters, xmlDataSource); 
```

它通常会在那里停留**3 分钟，最多消耗 300Mb 的 RAM 和 50% 的 CPU**。

*   `report`是使用 3 个子报表的编译 (.jasper) 报表。
*   数据源是一个相当大的 XML 文件（大约 100k 行，1.5Mb）
*   该机器是具有 4Gb RAM 的 3Ghz 双核

那么，如何提高报表填充性能呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T09:04:01.033

### 问题

似乎问题出在 XPath 引擎上。即解析 XML 文件以查找数据的库。

iReport Designer 使用**Jaxen**，JasperReport 使用**Xalan**。与 Jaxen 相比，Xalan 真的很慢（真的很慢）。

这就是为什么仅在从 Java 应用程序而不是从 iReports 填充报告时才会出现问题的原因。

### 解决方案

好吧，解决方案很简单，~~只需在您的 Java 应用程序中添加以下行以选择 Jaxen 库而不是默认的 Xalan 库（它已被弃用，但它可以工作）：~~

 ~~```
JRProperties.setProperty("net.sf.jasperreports.xpath.executer.factory",
    "net.sf.jasperreports.engine.util.xml.JaxenXPathExecuterFactory"); 
```~~  ~~**编辑**：该行已被弃用，我找到了设置属性的正确方法：

```
DefaultJasperReportsContext context = DefaultJasperReportsContext.getInstance();
JRPropertiesUtil.getInstance(context).setProperty("net.sf.jasperreports.xpath.executer.factory",
    "net.sf.jasperreports.engine.util.xml.JaxenXPathExecuterFactory"); 
```

您还需要将 Jaxen .jar 添加到您的构建路径中。这是一个链接：[https ://mvnrepository.com/artifact/jaxen/jaxen](https://mvnrepository.com/artifact/jaxen/jaxen)

* * *

*使用 Xalan 填写报告需要 3-5 分钟，而现在使用 Jaxen 只需几秒钟即可完成。*

答案在这里找到：http: [//community.jaspersoft.com/questions/536842/jasperreports-too-slow](http://community.jaspersoft.com/questions/536842/jasperreports-too-slow)
也在这里：http: [//community.jaspersoft.com/wiki/xml-data-source-very-slow -解析](http://community.jaspersoft.com/wiki/xml-data-source-very-slow-parse)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-22T19:17:32.030

我在导出 pdf 时也遇到了这个问题，但在我的情况下，它似乎是一个无限循环，因为当我尝试生成 JasperReport 时 CPU 达到 100%。

经过大量研究，我找到了这个链接：

[http://community.jaspersoft.com/questions/527078/infinite-loop-subreport-fill](http://community.jaspersoft.com/questions/527078/infinite-loop-subreport-fill)

设置我的子报告解决了我的问题`isPrintWhenDetailOverflows="false"`。~~

# php - $.ajax POST 在 IE8 上打开一个新窗口

> ID：15875202
> 
> 赞同：1
> 
> 时间：2013-04-08T09:04:02.447
> 
> 标签：php, javascript, ajax, post, internet-explorer-8

通过 ajax POST 提交客户信息时，我收到了来自 IE8（仅 IE8）的奇怪响应。

操作正确执行，客户在 CRM 上创建并执行所有后续操作，但窗口也重新打开，即弹出顶部 URL 的新窗口...

我无法确定为什么会这样。我剥离了代码以仅包含 post 调用而没有成功。

工作代码如下，出于安全原因，我只是拿了公司 ID。

有任何想法吗？

*   Javascript

    ```
    $(document).ready(function () {
        $('button').click(function () {
            postNsData();
        });
    });

    function postNsData() {
        var nsurl = 'https://forms.netsuite.com/app/site/crm/externalleadpage.nl';
        var datamin = {
            compid: xxxxxx, //Company ID -- it's a number.
            formid: 503,
            h: '1e705f3aa4570f197aef',
            leadsource: 8020,
            subsidiary: 2,
            email: 'email@gmail.com',
            firstname: 'John',
            lastname: 'Doe',
            phone: '1800902011',
        };

        $.ajax({
            type: 'POST',
            url: 'repost.php',
            data: 'url=' + nsurl + '&' + data,
            success: function (text, textStatus, jqXHR) {
                if (textStatus == 'success') {}
            }
        });
    } 
    ```

*   PHP 代码——repost.php

    ```
    <? php
    //set POST variables
    $url = $_POST['url'];
    unset($_POST['url']);
    $fields_string = "";
    //url-ify the data for the POST
    foreach($_POST as $key = > $value) {
        $fields_string. = $key.'='.$value.'&';
    }

    $fields_string = rtrim($fields_string, '&');
    //open connection    
    $ch = curl_init();
    //set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, count($_POST));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
    //execute post

    $result = curl_exec($ch);

    //close connection

    curl_close($ch);

    ?> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:26:29.190

我认为你应该更新你的javascript看起来像这样

```
$(document).ready(function () {
    $('button').click(function (event) {
        event.preventDefault();
        postNsData();
    });
}); 
```

可能发生的情况是 IE 正确地假定您要执行链接并执行 javascript。

# php - FPDF 电子邮件附件和前景

> ID：15875203
> 
> 赞同：0
> 
> 时间：2013-04-08T09:04:03.777
> 
> 标签：php, pdf-generation, attachment, email-attachments, fpdf

我正在尝试使用 FPDF 并将生成的文件附加到电子邮件中。我已经看到这篇文章[使用 FPDF 使用 PHP 发送电子邮件 PDF 附件，](https://stackoverflow.com/questions/4353271/email-pdf-attachment-with-php-using-fpdf)并且在向我自己发送电子邮件并在 Thunderbird 中查看时给出的答案有效。这是给出的示例代码：

```
 <?php
 require('lib/fpdf/fpdf.php');

$pdf = new FPDF('P', 'pt', array(500,233));
$pdf->AddFont('Georgiai','','georgiai.php');
$pdf->AddPage();
$pdf->Image('lib/fpdf/image.jpg',0,0,500);
$pdf->SetFont('georgiai','',16);
$pdf->Cell(40,10,'Hello World!');

// email stuff (change data below)
$to = "myemail@example.com"; 
$from = "me@example.com"; 
$subject = "send email with pdf attachment"; 
$message = "<p>Please see the attachment.</p>";

// a random hash will be necessary to send mixed content
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;

// attachment name
$filename = "test.pdf";

// encode data (puts attachment in proper format)
$pdfdoc = $pdf->Output("", "S");
$attachment = chunk_split(base64_encode($pdfdoc));

// main header
$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

// no more headers after this, we start the body! //

$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$body .= "This is a MIME encoded message.".$eol;

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= $message.$eol;

// attachment
$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

// send message
mail($to, $subject, $body, $headers);

?> 
```

但是，当在 Outlook (2007) 中发送和查看时，它也会将消息创建为附件，这与代码或 Outlook/

任何帮助表示赞赏。

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:18:01.283

IMO 没有意义*这是一个 MIME 编码的消息。*作为一部分的内容；通常这样的句子在第一个 mime 分隔符之前，以告知没有 MIME 功能的邮件阅读器的任何用户以下行代表什么。本质上，您的邮件包含两个文本部分，一个是纯文本（*这是一个 MIME 编码的消息。*）和一个 html（*请参阅附件。*）在一个**多部分/混合**容器中。如果它是**多部分/替代**的，邮件阅读器会选择其中一个来显示，但这样读者可能会怀疑要显示什么。

因此，我建议缩短

```
$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$body .= "This is a MIME encoded message.".$eol; 
```

至

```
$body = "This is a MIME encoded message.".$eol.$eol; 
```

# c# - 如何声明结构的默认属性

> ID：15875206
> 
> 赞同：3
> 
> 时间：2013-04-08T09:04:16.320
> 
> 标签：c#, .net, vb.net

我想`Integer`用`struct`.

这是一个简单的例子，`Integer`它的返回值被强制在 0 到 255 之间。

*这些是伪代码，C# 不会编译它。*

```
struct MyInt{
    private int p;
    default property theInt{  
        set{
            p = value;
        }
        get{
            if(p > 255) return 255; else if( p < 0) return 0;
            return p;
        }
    }
} 
```

**我的主要目标是使用以下代码：**

```
MyInt aaa = 300;            //Grater than 255
if(aaa == 255) aaa = -300;  //Less than 255
if(aaa == 0) a = 50; 
```

这可能与任何 .NET 语言有关吗？当然我更喜欢 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:12:38.040

正如我在评论中所说，您可以在结构和之间使用隐式转换`int`：

```
internal struct MyInt
{
    private int p;

    public int BoundedInt
    {
        // As CodesInChaos points out, the setter is not required here.
        // You could even make the whole property private and jsut use
        // the conversions.
        get
        {
            if (p > 255) return 255;
            if (p < 0) return 0;
            return p;
        }
    }

    public static implicit operator int(MyInt myInt)
    {
        return myInt.BoundedInt;
    }

    public static implicit operator MyInt(int i)
    {
        return new MyInt { p = i };
    }
} 
```

分配值时需要转换`int`，比较值时需要转换。`struct``struct``int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:08:05.473

您在代码中为*结构*分配一个值。我不知道你在这里使用什么语言语义，但在 C# 中，你不能这样做（在 VB.NET 中，我知道的也不多）。

你*可以*做什么你实际上已经在你的代码中定义了，所以定义一个属性和它里面的逻辑`get`和`set`方法。

是的，正如 Rawling 建议的那样，有一个选项可以覆盖您的结构和整数之间的强制转换运算符，但请不要这样做，这*非常令人*困惑，并且从代码中不清楚那里发生了什么。

所以坚持简单的属性逻辑。

```
public struct MyInt{
    private int p = default(int);
    public int theInt{  
        set{
            var v = value; 
            if(v > 255) 
               v  =255; 
            else if(v < 0)
               v = 0;
            p = v;
        }
        get{              
            return p;
        }
    }

} 
```

另请注意，在我的示例中，我颠倒了逻辑，将其放入 中`set`，就好像您以您提出的方式开发一样，在某些时候您的`p`, 将没有属性的值`theInt`，我强烈建议您这样做避免。如果有一个字段包含一个属性值，它必须**始终**等于调用者将从属性本身获得的值。如果不是，它会造成混乱，从长远来看：一团糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:11:45.610

您应该使用*隐式转换运算符*，如下所示：

```
public static implicit operator MyInt(int value)
{
    return new MyInt(value);
} 
```

这样，您可以使用`MyInt a = 10;`并在将值作为参数的 a 的构造函数中分配 10 的值。

然后，您应该通过重载其他运算符来继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:12:55.473

.NET 不提供“默认属性” ¹之类的东西。

作为[@Rawling](https://stackoverflow.com/users/215380/rawling)注释，您可以使用隐式转换运算符来允许赋值。

但最终，您永远无法完全模拟编译器和 .NET CLI 中的内置类型，例如，基本操作`System.Int32`是单个 CLI 操作码，而文字是本地保存的。

* * *

¹除了在 COM 互操作中，但 VB（V6 及更早版本）中的 COM 显示了为什么默认属性是一个坏主意：必须有两个关键字 (`let`和`set`) 用于分配以控制何时分配引用或默认属性。

# ruby - 运行简单的 watir 脚本时出错：未初始化的常量 Watir::IE (NameError)

> ID：15875215
> 
> 赞同：4
> 
> 时间：2013-04-08T09:04:36.880
> 
> 标签：ruby, windows-7, 64-bit, watir, watir-webdriver

我已经安装了 Ruby 2、devkit 和 Watir。

*   环境：操作系统win7（64位）</li>
*   安装文件：

    *   rubyinstaller-2.0.0-p0-x64.exe
    *   DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe
*   宝石列表结果的一部分：

    *   常见的 4.0.0
    *   等待 4.0.0
    *   win32 进程 0.6.6

当我运行一个简单的脚本时：

```
require 'rubygems'
require 'watir'
require 'watir-webdriver' 
ie = Watir::IE.new
ie.goto("http://www.google.com") 
```

我收到以下错误：

```
uninitialized constant Watir::IE (NameError) 
```

然后我尝试`ie = Watir::Browser.new`而不是`ie = Watir::IE.new` 仍然收到错误：

```
cannot load such file watir-classic (loaderror) 
```

然后我尝试安装 watir-classic，再次出现错误：

```
extconf.rb
libxml2 is missing 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:04:25.203

您没有安装 watir-webdriver（或至少在您的 gem 列表结果中列出）。

```
gem install watir-webdriver 
```

剧本：

```
require 'watir-webdriver'
ie = Watir::Browser.new :ie
ie.goto("http://www.google.com") 
```

来源：[http ://watirwebdriver.com](http://watirwebdriver.com)

如果您更喜欢 watir-classic，可以在此处找到安装和快速入门信息：[https ://github.com/watir/watir-classic](https://github.com/watir/watir-classic)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T03:41:28.950

根据错误，我的猜测是 watir-classic 无法安装 nokogiri gem。Nokogiri 目前不支持 Windows 上的 Ruby x64 - 请参阅[https://github.com/sparklemotion/nokogiri/issues/864](https://github.com/sparklemotion/nokogiri/issues/864)。

您可以尝试两件事：

1.  使用 32 位 Ruby（如 Nokogiri 问题中所建议的）

2.  使用 IE 以外的浏览器。默认情况下，`Browser.new`将使用 watir-classic 启动 IE。使用其他浏览器之一将使用 watir-webdriver，我认为它不依赖于 nokogiri。

例子：

```
require 'watir'
browser = Watir::Browser.new :chrome
browser.goto("http://www.google.com") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T05:35:35.733

在您的代码中删除 require 'watir-webdriver' 并添加 require 'watir-classic' 。因此，您的代码应如下所示：

```
require 'rubygems'
require 'watir'
require 'watir-classic'
ie = Watir::IE.new
ie.goto("http://www.google.com") 
```

警告通知：Watir::IE 常量已弃用，请改用 Watir::Browser 在这种情况下，不需要“watir-classic”。以下代码应该可以工作：

```
require 'rubygems'
require 'watir'
#require 'watir-classic'
#ie = Watir::IE.new
ie = Watir::Browser.new
ie.goto("http://www.google.com") 
```

# javascript - 在 chrome 跨域中存储值

> ID：15875220
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:05:02.413
> 
> 标签：javascript, google-chrome, greasemonkey

我制作了一个 user.js 脚本，它可以在多个页面上运行并做一些事情。但是我需要一种方法来存储一些值，这样用户就不必在每个页面上一遍又一遍地填写它们。

在 Firefox 的greasemonkey 中，我使用了setvalue 函数，它非常棒，并且完全符合我的要求。在 chrome 中，替代方法是 localstorage，但不幸的是，以这种方式存储的值只能在存储它们的同一个域上访问。

我需要能够访问插入我的 user.js 脚本的任何页面上的存储值（在 chrome 中）。

这样的事情可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:45:01.673

安装[Tampermonkey 扩展](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)，然后您的 Greasemonkey 脚本将照原样在 Chrome 上运行。

`GM_setvalue()`将工作并将跨域存储值，就像它在 Firefox 上一样。

# algorithm - 从数据构建 HMM

> ID：15875221
> 
> 赞同：1
> 
> 时间：2013-04-08T09:05:04.553
> 
> 标签：algorithm, uigesturerecognizer, kinect, gesture, hidden-markov-models

我有一个问题`Hidden Markov Models`。我正在编写一个用于手势识别的应用程序`C#`（`Kinect`简单的手势，如滑动、波浪、圆圈等）。我编写了一个手势记录系统，之后我创建了一个计算点之间速度的特征提取器，我还计算了方向（点对之间的角度）——我认为这是一种简单的矢量量化方法，因为我创建了一个带有码字的码本1-18。代码字是每 20 度的角度间隔（例如角度 12dg 是代码字 1、45dg = 代码字 3 等）。

现在我想我需要创建一个`HMM`并使用一些`Forward-Backward`算法进行学习。然后一些`Bayes`分类方法和完成。

我的问题：

1.  我的步骤错了吗？
2.  如何创建 HMM？谁能以编程方式描述它的外观？
3.  如何为测试执行实时手势匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:30:03.943

**免责声明：**我是我将要列出的一些教程/软件的作者。

1.  你的步骤似乎很好。例如，它们与[Lee 和 Kim](http://herin.kaist.ac.kr/Publication/PS/hklee_PAMI_i09611.pdf)使用的方法非常相似（减去阈值模型部分）。

2.  也许您可以按照[C# 中的 HMM 指南进行操作](http://www.codeproject.com/Articles/541428/Sequence-Classifiers-in-Csharp-Part-I-Hidden-Marko)。它是我写的，并有一些关于如何执行手势识别的示例。但是，该指南创建的是连续密度 HMM，而不是离散 HMM。您的矢量量化使您的特征离散，所以我想您会对使用离散密度 HMM 更感兴趣。要使其适用于离散模型，您必须做的唯一更改是删除模型创建/学习中的通用参数。

3.  要执行实时手势，您可以使用某种特定的标记来表示手势的开始和结束，也可以使用类似于 Lee 和 Kim 的阈值模型的技术。上述指南中描述的框架支持这些。

我曾使用相同的技术从事过一个类似的项目，我可以说 HMM 可以很好地完成这项任务。

# c++ - wchar/char 变量

> ID：15875226
> 
> 赞同：0
> 
> 时间：2013-04-08T09:05:17.233
> 
> 标签：c++, windows, char, wchar

我正在使用两个不同版本的 c++ `(builder 2009 and XE1)`。在这两个中，我需要使用相同的文件`f.cpp`，其中包含函数`LoadLibrary("path")`。 `Builder 2009`需要类型路径`char`和`XE1`- `wchar`，因此这会引发错误。

有没有办法同时使用“LoadLibrary()”和 char&wchar？

坦克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:09:21.223

根据宏使用类型 TCHAR，即 wchar 或 char `_UNICODE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:08:27.473

您可以为此使用预处理器，使用`#if defined`功能来决定使用哪个：

```
#if defined(__SOME_SPECIAL_DEFINE_FOR_ONE_COMPILER__)
LoadLibrary("path");
#elif defined(__SOME_OTHER_SPECIAL_DEFINE_FOR_OTHER_COMPILER__)
LoadLibrary(L"path");
#else
# error unknown compiler
#endif 
```

# asp.net-mvc - 无法查看 resx 文件设计器 Visual Studio

> ID：15875241
> 
> 赞同：1
> 
> 时间：2013-04-08T09:06:04.980
> 
> 标签：asp.net-mvc, asp.net-mvc-3, resx

我的 ASP.NET MVC 3 应用程序中有一个 .resx 文件，其中的代码使用 ResXResourceReader 类动态生成资源。一切正常，但是有一个错误，它在键中创建了一些带有空格的资源，这显然是 Visual Studio 不喜欢的。我现在已将它们删除并修复了错误，但现在我根本无法在设计器中打开 resx 文件。我得到的只是一个红十字和“名字”这个词。

我尝试使用 Notepad++ 的 XML 工具解析 resx 并没有引发错误，我使用我们的资源服务类来遍历所有键并且它们都没有任何空格并且所有数据标签都正确关闭。

我找不到任何类似的问题，我对我的 resx 文件可能有什么问题感到困惑。我不确定它是否仍然以某种方式无效，或者它刚刚被损坏或其他什么。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:28:22.020

我最近有一个类似的问题。您是否确保资源文件中没有任何空键的属性？

```
<data name="" xml:space="preserve">
   <value></value>
</data> 
```

# python - 组合算法挑战

> ID：15875243
> 
> 赞同：0
> 
> 时间：2013-04-08T09:06:10.360
> 
> 标签：python, algorithm, combinations

我试图解决这个问题一个多月了。我有一个数字列表和这些变量：

```
list_num = [1, 1, 2, 3, 5, 6, 1, 1, 3, 4, 4]

#x is number of numbers in combination eg. if x = 5 combiantions will look like this [n,n,n,n,n], where n is possible member of list _num
x = 5
#y is a sum of numbers inside combination
y = 10 
```

我需要以组合数字**`x`**的数量和组合数字**`y`**的总和的方式生成这些数字的所有可能组合，还**`list_num`**必须考虑内部重复的数量。

我可以通过生成所有可能的组合并消除不是由我的规则确定的组合来做到这一点，但这种方法很混乱，我不能将它与大量数据一起使用。在我的原始程序**`list_num`**中可以有数百个数字和变量**`x`**，并且**`y`**可以有很大的值。

此示例的几个组合：

```
comb1 = [1,1,2,3,3], x = 5, y = 10
comb2 = [1,1,1,2,5], x = 5, y = 10
comb3 = [1,1,1,1,6], x = 5, y = 10

... 
```

我会很感激一些新的想法，我没有任何剩余:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:18:50.750

这是一个想法：

1) 对列表进行排序

2) 使用 x 元素的数组 A - 这些将是索引

3) 将 A 初始化为 [0,1,2,...,x-1]

4) 现在开始按字典顺序增加索引，例如首先增加最后一个，直到总和>y。然后增加倒数第二个，使最后一个为1+倒数第二个

等等

前几次迭代：

排序数组：[1, 1, 1, 1, 2, 3, 3, 4, 4, 5, 6]

答：[0,1,2,3,4]

答：[0,1,2,3,5]

答：[0,1,2,3,6]

答：[0,1,2,3,7]

答：[0,1,2,3,8]

答：[0,1,2,3,9]

答：[0,1,2,3,10] - 解决方案

答：[0,1,2,4,5]

答：[0,1,2,4,6]

答：[0,1,2,4,7]

答：[0,1,2,4,8]

答：[0,1,2,4,9] - 解决方案

答：[0,1,2,4,10] - >y

答：[0,1,2,5,6]

答：[0,1,2,5,7] - 解决方案

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:48:38.127

这是 NP 完全问题，请在以下位置找到最佳解决方案：

[http://en.wikipedia.org/wiki/Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:14:24.230

对于以 10 为底的输出数字，您可以只计算一个变量，如果符号和为 10，则进行符号和并输出组合。

代码：

```
def SignSum(X):
    Sum = 0

    String = str(X)

    for Sign in String:
       Sum += int(Sign)

    return Sum

Counter = 0

while Counter < 10000:
   if SignSum(Counter) == 10:
      print Counter

   Counter += 1 
```

这当然也适用于具有修改后的 SignSum() 函数的其他基础

# qt - QLibrary 如何获取库的绝对路径

> ID：15875250
> 
> 赞同：0
> 
> 时间：2013-04-08T09:06:39.637
> 
> 标签：qt, qt4, qt5

我是 QT 开发的新手。

我已经像这样动态加载了库：

```
1) QLibrary  lobj ("myLib"); 
```

并且，要解析库中的函数，

```
2) lobj.resolve ("Fun1");  -> Store the function pointer. i have not writting here. ;). 
```

我可以成功调用函数Fun1。

**问题：**

我想获取加载的库“myLib”的绝对路径。

我尝试使用**filename()**方法，但它只返回库名称，除非我们在加载库时明确指定绝对路径。

请提供建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:32:09.333

没有便携的方法。检查源代码，在 Unix 上有一个[循环](https://qt.gitorious.org/qt/qt/blobs/4.8/src/corelib/plugin/qlibrary_unix.cpp#line226)尝试多个前缀和后缀，但没有记住所选文件名的逻辑。我怀疑其他平台上的情况也可能类似。

知道为什么首先需要知道库名称可能会很有趣。您也可以自己复制前缀和后缀解析的逻辑并记住选择的文件名，但这将是很多（不可移植的）工作。

# c++ - C++编码标准相关的过早优化和过早悲观化

> ID：15875252
> 
> 赞同：10
> 
> 时间：2013-04-08T09:06:46.593
> 
> 标签：c++, coding-style

Herb Sutter 的*C++ 编码标准*说要避免`Premature optimization`和`Premature pessimization`. 但我觉得两者都在做同样的事情。因此，期待一些帮助来澄清这两个概念以及它们之间的区别。如果你想出一些例子，对其他人会更有好处。 [这](http://c2.com/cgi/wiki?PrematureOptimization)是一个很好的解释`Premature optimization`。但我找不到任何`Premature pessimization`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T09:25:39.947

我认为，他所说的过早悲观化与过早优化正好相反：根本无视使用哪种数据结构和算法。

过早的优化通常涉及算法的微小细节，这些细节可以稍后进行调整，并且不需要在开始时关注。

相比之下，过早的悲观化涉及代码架构的高级设计：例如，您的库的一个根本上低效的接口不能在以后通过优化来修复，因为公共接口几乎是一成不变的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-28T11:06:59.197

Herb 的意思是当你面对两个同样可读的选项时，总是选择最有效的一个。

使用`std::vector::reserve()`或最好的标准容器或算法并不是过早的优化。然而，不使用它们将是*过早的悲观*。

*过早的优化*是指您为了某些甚至可能不值得的“优化”而牺牲可读性。为此使用探查器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:04:32.550

编程时有小规模和大规模的选择。

悲观化是指以“阻止编译器做好工作”的方式编写代码。一个典型的例子是，当函数非常小且简单（例如 {s,g}etter）时，不要将函数放置在允许它们内联的位置。这可以使函数花费它应该花费的时间的 10 倍，并且“正确”是一件如此简单的事情。

我在这个网站上发现几次的悲观情绪是使用“a /= 2;” 当 "a >>= 1" 同样合适时。如果我们知道这`a`不是负数，那么左移和除法具有相同的效果，但即使编译器优化除法，它几乎总是会产生更多代码来应对“它可能是负数”的情况 - 额外的代码可以在某些情况下会成为真正的性能打击。

过早的优化是当您展开循环或以其他方式使代码更复杂时，仅仅是因为您不相信编译器会做好 - 通常没有证据表明它不会做好。

另一个示例是“不使用`std::vector`”，而是您自己的`expandable array`，因为“向量太慢”，甚至没有使用`std::vector`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:48:33.937

我倾向于认为过早悲观化只是对导致过早优化的性能要求的误解。即您错误地认为您的代码执行速度不够快或使用太多资源（悲观主义），因此您在不需要的地方进行优化。

随着越来越多的大型数据集的出现，我倾向于看到更频繁的反转，即缺乏足够的悲观情绪导致选择无法扩展以满足用户需求的算法。这通常与编译器优化可以替代糟糕的算法选择的信念相结合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-24T11:17:49.257

> 在传递引用合适时定义传递值参数

是避免*过早悲观*的最简单的例子之一。它没有任何成本，只是成为第二天性，并且可以为您节省一些性能缺陷。

假设您指的是这本书 - *C++ Coding Standards: 101 Rules, Guidelines, and Best Practices。2004 年 10 月 ISBN：0321113586* - 项目 9 和 25 给出了几个例子：

* * *

9.  不要过早地悲观

* * *

25.  通过值、（智能）指针或引用适当地获取参数

* * *

# git - git log 只返回对主分支的提交？

> ID：15875253
> 
> 赞同：43
> 
> 时间：2013-04-08T09:06:48.350
> 
> 标签：git

我做了一些搜索，发现：

```
git log myBranchName 
```

作为一种可能的解决方案。但是当我的分支是主分支时会发生什么？当我运行时：

```
git log master 
```

它似乎将所有提交给任何分支的东西都返回了。根据我所阅读的内容，它列出了与主分支相关的所有提交。知道了，我怎么才能只调用主分支的提交历史？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-08T11:51:33.160

我想这就是你想要的

```
git log --first-parent master 
```

引用手册

> 在看到合并提交时，仅关注第一个父提交。在查看特定主题分支的演变时，此选项可以提供更好的概览，因为合并到主题分支往往只是不时调整到更新的上游，并且此选项允许您忽略引入的单个提交通过这样的合并你的历史。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-08T12:04:25.910

# php - php脚本中自定义字体中不需要的空间

> ID：15875256
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:03.150
> 
> 标签：php

您好，我创建了一种自定义字体。现在我想在我的 php 脚本中使用它，一切都很好，直到我想使用`s`带有急性的字母，因为我得到的不仅仅是一个字母，而是字母+空格。这是我的`font.php`：

```
<?php
$type='TrueType';
$name='TimesNewRomanPSMT';
$desc=array('Ascent'=>891,'Descent'=>-216,'CapHeight'=>7,'Flags'=>32,'FontBBox'=>'[-77 -226 936 886]','ItalicAngle'=>0,'StemV'=>70,'MissingWidth'=>778);
$up=-109;
$ut=49;
$cw=array(
0=>778,1=>778,2=>778,3=>778,4=>778,5=>778,6=>778,7=>778,8=>778,9=>778,
10=>778,11=>778,12=>778,13=>778,14=>778,15=>778,16=>778,17=>778,18=>778,19=>778,
20=>778,21=>778,22=>778,23=>778,24=>778,25=>778,26=>778,27=>778,28=>778,29=>778,
30=>778,31=>778,32=>250,33=>333,34=>408,35=>500,36=>500,37=>833,38=>778,39=>180,
40=>333,41=>333,42=>500,43=>564,44=>250,45=>333,46=>250,47=>278,48=>500,49=>500,
50=>500,51=>500,52=>500,53=>500,54=>500,55=>500,56=>500,57=>500,58=>278,59=>278,
60=>564,61=>564,62=>564,63=>444,64=>921,65=>722,66=>667,67=>667,68=>722,69=>611,
70=>556,71=>722,72=>722,73=>333,74=>389,75=>722,76=>611,77=>889,78=>722,79=>722,
80=>556,81=>722,82=>667,83=>556,84=>611,85=>722,86=>722,87=>944,88=>722,89=>722,
90=>611,91=>333,92=>278,93=>333,94=>469,95=>500,96=>333,97=>444,98=>500,99=>444,
100=>500,101=>444,102=>333,103=>500,104=>500,105=>278,106=>278,107=>500,108=>278,109=>778,
110=>500,111=>500,112=>500,113=>500,114=>333,115=>389,116=>278,117=>500,118=>500,119=>722,
120=>500,121=>500,122=>444,123=>480,124=>200,125=>480,126=>541,127=>778,128=>778,129=>778,
130=>778,131=>778,132=>778,133=>778,134=>778,135=>778,136=>778,137=>778,138=>778,139=>778,
140=>778,141=>778,142=>778,143=>778,144=>778,145=>778,146=>778,147=>778,148=>778,149=>778,
150=>778,151=>778,152=>778,153=>778,154=>778,155=>778,156=>778,157=>778,158=>778,159=>778,
160=>250,161=>722,162=>333,163=>611,164=>500,165=>611,166=>556,167=>500,168=>333,169=>556,
170=>556,171=>611,172=>611,173=>333,174=>611,175=>611,176=>400,177=>444,178=>333,179=>278,
180=>333,181=>406,182=>389,183=>333,184=>333,185=>389,186=>389,187=>427,188=>444,189=>333,
190=>444,191=>444,192=>667,193=>722,194=>722,195=>722,196=>722,197=>611,198=>667,199=>667,
200=>667,201=>611,202=>611,203=>611,204=>611,205=>333,206=>333,207=>722,208=>722,209=>722,
210=>722,211=>722,212=>722,213=>722,214=>722,215=>564,216=>667,217=>722,218=>722,219=>722,
220=>722,221=>722,222=>611,223=>500,224=>333,225=>444,226=>444,227=>444,228=>444,229=>278,
230=>444,231=>444,232=>444,233=>444,234=>444,235=>444,236=>444,237=>278,238=>278,239=>646,
240=>500,241=>500,242=>500,243=>500,244=>500,245=>500,246=>500,247=>549,248=>333,249=>500,
250=>500,251=>500,252=>500,253=>500,254=>278,255=>333);

$enc='iso-8859-2';
$diff='131 /.notdef 136 /.notdef 140 /Sacute /Tcaron 143 /Zacute 152 /.notdef 156 /sacute /tcaron 159 /zacute 161 /caron /breve /Lslash 165 /Aogonek 170 /Scedilla 175 /Zdot 178 /ogonek /lslash 185 /aogonek /scedilla 188 /Lcaron /hungarumlaut /lcaron /zdot /Racute 195 /Abreve 197 /Lacute /Cacute 200 /Ccaron 202 /Eogonek 204 /Ecaron 207 /Dcaron /Dslash /Nacute /Ncaron 213 /Odblacute 216 /Rcaron /Uring 219 /Udblacute 222 /Tcedilla 224 /racute 227 /abreve 229 /lacute /cacute 232 /ccaron 234 /eogonek 236 /ecaron 239 /dcaron /dmacron /nacute /ncaron 245 /odblacute 248 /rcaron /uring 251 /udblacute 254 /tcedilla /dotaccent';
$file='times.z';
$originalsize=409280;
// --- EOF --- 
```

我应该做什么来`Ś`代替`Ś with space`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:51:49.660

假设 Array`$cw`包含每个字符的字符宽度：

*   字符`0x53 (83)`(S in `ASCII`) 的宽度为`556`
*   字符`0x73 (115)`(s in `ASCII`) 的宽度为`389`
*   字符`0x8C (140)`(Ś in `cp1250`) 的宽度为`778`
*   字符`0x9C (156)`(ś in `cp1250`) 的宽度为`778`
*   字符`0xA6 (166)`(Ś in `iso-8859-2`) 的宽度为`556`
*   字符`0xB6 (182)`(ś in `iso-8859-2`) 的宽度为`389`

现在我不知道这些宽度的真正来源，但可能是因为你 -- 输出？-- 使用代码页的字体`cp1250`（你在评论中写了这个），但是在你的源代码中将编码设置为`iso-8859-2`. [您可以在Wikipedia Windows-1250](http://en.wikipedia.org/wiki/Windows-1250)中查找两个代码页之间的差异

因此，您可以使用`iso-8859-2`代码页再次导出，更改脚本中的代码页，或手动更改宽度。请记住，这两个代码页中还有其他不同的字符，因此您可能也想更改它们。

# javascript - __EVENTTARGET 未定义

> ID：15875257
> 
> 赞同：1
> 
> 时间：2013-04-08T09:07:13.143
> 
> 标签：javascript, asp.net, web-services, jquery

我有一个网页（.aspx），我正在通过 jQuery ajax 加载一些用户控件。像这样的东西：

```
$.ajax({
            type: "POST",
            url: "WebService.asmx/GetGrid",
            data: data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(result){
                 $('#divAjaxGridViewContainer').html(result.d);
            },
            error: function(error) {
                alert("Error");
            }
        }); 
```

在 WebService.asmx.cs Web 服务中，我有一个 GetGrid WebMethod，它生成并返回包含网格视图的用户控件的 html。这是代码：

```
[WebMethod]
public string GetPage(object[] criteria)
{
    Page page = new Page {ViewStateMode = ViewStateMode.Disabled};

    AjaxGridView grid = (AjaxGridView)page.LoadControl("~/Controls/AjaxGridView.ascx");
    grid.ViewStateMode = ViewStateMode.Disabled;

    grid.BindData(criteria);

    HtmlForm form = new HtmlForm {ViewStateMode = ViewStateMode.Disabled};

    form.Controls.Add(grid);

    page.Controls.Add(form);

    string result = String.Empty;

    using (StringWriter output = new StringWriter())
    {
        page.Server.Execute(page, output, false);
        result = output.ToString();
    }
    return result;
} 
```

AjaxGridView 是一个用户控件，它包含一个 GridView，并使用 BindData(criteria) 公共方法根据某些条件将其绑定到某些数据。

所有这些代码都可以正常工作。我已经多次使用这种技术并且它曾经工作得很好。

这一次，在将服务中的html加载到页面后，点击应该自动回发的控件（如asp:Button、asp:DropDownList、asp:CheckBoxList），抛出以下js esception： **__EVENTTARGET is undefined**

在这部分代码上：

```
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

有任何想法吗？

**编辑：** 我想出了一些东西。theForm 的设置如下：

```
var theForm = document.forms['ctl00'];
if (!theForm) {
    theForm = document.ctl00;
} 
```

由于我在动态生成的 html 中有表单，因此 theForm 指的是没有 __EVENTTARGET 的表单。我决定从服务中生成的 html 中删除表单标签：

```
if (!String.IsNullOrEmpty(result))
{
    Regex frmOpenFinder = new Regex("(<form)[^>]*>");

    Match frmOpen = frmOpenFinder.Match(result);
    string frm = frmOpen.Value;
    result = result.Replace(frm, "").Replace("</form>", "");
} 
```

但在这种情况下，theForm 又是

```
var theForm = document.forms['ctl00'];
    if (!theForm) {
        theForm = document.ctl00;
    } 
```

但是没有任何具有这种 id 的表格，现在我得到：

```
theForm is undefined 
```

例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T20:55:27.663

它仍然是未定义的。我也对此进行了测试，但有一些问题（至少在使用 ajax 时），按钮控件的 clientID 在回发时没有返回。相反，我也有一个输入字段和一个下拉菜单也会导致页面上的回发，这两个回发实际上返回了正确的 ID 字符串。它是特定于按钮控制的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T11:36:06.367

听起来可能很奇怪，但 ASP.NET 可能会错误检测 IE 10 和 11。这将导致它呈现带有 __doPostBack JavaScript 错误的页面。

一个简单的解决方法是在您的服务器上安装 .NET 4.5。如果这是不可能的（例如，如果它是 Window Server 2003），那么可以安装一些修补程序来纠正这个问题。请参考本站：

[http://www.hanselman.com/blog/IE10AndIE11AndWindows81AndDoPostBack.aspx](http://www.hanselman.com/blog/IE10AndIE11AndWindows81AndDoPostBack.aspx)

# javascript - 当 display 设置为 none 时显示 div

> ID：15875260
> 
> 赞同：1
> 
> 时间：2013-04-08T09:07:23.960
> 
> 标签：javascript, html, css

我正在玩弄 jQuery 和拖放功能。我有一个在 CSS`div`中设置的。`hidden`激活拖动元素时，`droppable`应通过设置`display`为`inline`（这是默认值）来显示元素。

但是，`display: inline;`并不推翻`display: none;`. 如何做到这一点（通过 jQuery 或 CSS）？

我当前的代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Droppable - Visual feedback</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <style>
    #draggable2 { width: 90px; height: 90px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
    #droppable2 { width: 120px; height: 120px; padding: 0.5em; float: left; margin: 10px; }
    #droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; display: none; }
    .droppable-highlight { display: inline; }
  h3 { clear: left; }
  </style>
  <script>
  $(function() {
    $( "#draggable2" ).draggable();
    $( "#droppable" ).droppable({
      accept: "#draggable2",
      activeClass: "droppable-highlight",
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script>
</head>
<body>

<h3>Feedback on activating draggable:</h3>

<div id="draggable2" class="ui-widget-content">
  <p>Drag me to my target</p>
</div>

<div id="droppable" >
  <p>Drop here</p>
</div>

</body>
</html> 
```

Tinker.io 链接：[http ://tinker.io/bf197](http://tinker.io/bf197)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:25:06.717

问题是当 droppable 被隐藏（有`display: none`）时，jQuery UI 代码没有将类添加到 droppable 中。如果它*是*可见的，它*会添加它。*

 *这是一个没有更新的修补程序：http `display: none`: [//tinker.io/bf197/1](http://tinker.io/bf197/1)

```
#droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; }
#droppable.droppable-highlight { border-color: red; display: block; } 
```

如果您在 Chrome 的开发工具或类似工具中观看，您会看到该类被添加（并且边框变为红色）。

但是再看看这个：http `display: none`: [//tinker.io/bf197/2](http://tinker.io/bf197/2)

```
#droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; display: none; }
#droppable.droppable-highlight { border-color: red; display: block; } 
```

如果您在开发工具中观看，则永远不会添加该类。显然，如果它是不可见的，jQuery UI 会忽略 droppable。

您可能需要向 jQuery UI 团队提出这个问题，因为代码似乎明确地检查了这种情况。

我确实找到了部分解决方法：使用`visibility`而不是`display`：[http ://tinker.io/bf197/3](http://tinker.io/bf197/3)

```
#droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; visibility: hidden; }
#droppable.droppable-highlight { visibility: visible; } 
```

这行得通，但当然存在元素`visibility: hidden`仍然占用其布局空间的问题。

您可以从布局中删除元素而不制作它`display: none`并获得您想要的效果：http: [//tinker.io/bf197/5](http://tinker.io/bf197/5)

```
#droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 40px; position: absolute; left: -10000px; }
#droppable.droppable-highlight { border-color: red; position: static; } 
```

这通过在正常情况下将元素定位在页面外来工作，但是当它具有类时覆盖该定位。除了破解 jQuery UI 代码之外，我认为这`display: none`与您将要获得的行为一样接近。

* * *

其他注意事项：

*   我根据上面的规则更新了选择器，因此它足够具体，因为否则 ID 选择器的特异性超过了类选择器的特异性。

*   的默认`display`值`div`是`block`，不是`inline`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:25:19.173

这是因为[CSS 偏好规则](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

考虑这段代码：

```
#droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; display: none; }
.droppable-highlight { display: inline; } 
```

第一个是 id-selector，它比第二个（类选择器）更具体。改变`.droppable-highlight`to`#droppable.droppable-highlight`就可以了:)

你也需要做同样的事情，`#droppable.ui-state-highlight`因为`droppable-highlight`当你放手时这个类被删除了。

其次，当一个元素是 时`display:none`，它不占用屏幕上的空间，你不能“拖放”到它上面。相反，使用`visibility`

所以，最终的代码是：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Droppable - Visual feedback</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <style>
    #draggable2 { width: 90px; height: 90px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
    #droppable2 { width: 120px; height: 120px; padding: 0.5em; float: left; margin: 10px; }
    #droppable { border-width: 3px; border-style: solid; border-color: #585FCC; height: 20px; visibility:hidden; }
    #droppable.droppable-highlight { border-color: red; visibility:visible; }
    #droppable.ui-state-highlight { border-color: red; visibility:visible; }
  h3 { clear: left; }
  </style>
  <script>
  $(function() {
    $( "#draggable2" ).draggable();
    $( "#droppable" ).droppable({
      accept: "#draggable2",
      activeClass: "droppable-highlight",
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script>
</head>
<body>

<h3>Feedback on activating draggable:</h3>

<div id="draggable2" class="ui-widget-content">
  <p>Drag me to my target</p>
</div>

<div id="droppable" >
  <p>Drop here</p>
</div>

</body>
</html> 
```

[http://tinker.io/bf197/4](http://tinker.io/bf197/4)*

# visual-studio-2010 - VC++ SDI 应用程序中函数之间的字符串传递

> ID：15875262
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:29.410
> 
> 标签：visual-studio-2010, listview, mfc, sdi

我在 SDI 做一个项目。我在不同的类中有两个函数名称 sendtext(CString str) 和 displaytext(CString inr)。我有一个指针名称 pView 来将字符串 str 发送到函数“displaytext”。问题是经过一些操作后，我在 str 中得到了一个文本，然后我发送该文本以在输出屏幕中显示文本，我得到了文本，当第二个文本来到“displaytext”时，前一个文本消失了，只出现了最新的字符串。请帮我看看如何在 ClistCtrl 类的输出窗口中显示这两个文本。

```
Void sendtext()
{
 CTreeCtrl&  trCtrl = GetTreeCtrl(); 
 HTREEITEM hItem,hsc; 
 CExerciseDoc *pDoc = GetDocument();

 CString pathname,strLine; 
 CString filename;
 CFileDialog dlg(TRUE);
 dlg.DoModal();
 if(dlg.DoModal() == IDOK)
 {
     pathname=dlg.GetPathName(); // return full path and filename
 }

CStdioFile File;

if(File.Open(pathname, CFile::modeRead)) // Open file to be read 
{ 
   while(File.ReadString(strLine)) // Read file 
   { 
     int Position = 0; 
     CString Token; 

     CAtlString str(strLine);
     CAtlString resToken,resToken1;

     resToken = str.Tokenize(_T("-:, "), Position); 
     pDoc->pSendview->displaytext(resToken);
     if(resToken != (_T(""))) // Empty File Check

     hItem = trCtrl.InsertItem(resToken , 0, 2 );

     while(resToken!="") 
     { 
        resToken = str.Tokenize(_T("-:@, "), Position);
     }
    }
   }
  }
}
void CRightView::displaytext(CAtlString league)
{
   CListCtrl &ctlRightView = this->GetListCtrl();
   ResetLeagues();
   CAtlString resToken;
   ctlRightView.InsertColumn(1,  _T("First "),   LVCFMT_LEFT,   80);
   ctlRightView.InsertColumn(1,  _T("Second "),   LVCFMT_LEFT,   80);

   int nItem;
  nItem = ctlRightView.InsertItem(0,  league);
  ctlRightView.SetItemText(nItem, 1,  league);
} 
```

文本文件包含以下内容

**男人女人**

**兄弟姐妹**

让我给你解释一下。在 sendtext() 中，我打开一个文本文件，然后将其标记化，标记化的输出是 resToken ，它通过以下方式发送到 displaytext()

```
pDoc->pLeftView->displaytext(resToken); 
```

当我在客户端窗口中运行时，当我运行应用程序时，我得到文本“man”，它用于空文件检查，在 while 循环被破坏后，它来到相同的标记区域并开始标记新行文本文件说兄弟姐妹和标记化的输出通过上面提到的同一段代码发送到 displaytext。

在客户端窗口上，我得到的东西是“兄弟”，我看不到“男人”..我希望“男人和兄弟”都显示为

第一个（列名）

兄弟

男人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:50:01.900

在 List 控件的情况下，您也在调用

> nItem = ctlRightView.InsertItem(0, 联赛);

这里 nItem 每次调用时都会是相同的值。所以你正在通过调用覆盖以前的内容

> ctlRightView.SetItemText(nItem, 1, 联赛);

相反，每次您必须插入到列表的下一个位置。所以使用一个变量作为当前位置并调用：

> int nItem = 0;
> 
> nItem = ctlRightView.InsertItem(Position++, 联赛);
> 
> ctlRightView.SetItemText(nItem, 1, 联赛);

您可以将位置声明为全局变量

# redirect - 奇怪的重定向行为

> ID：15875263
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:29.750
> 
> 标签：redirect, asp.net-mvc-4, url-routing

我想知道如何**`UrlRedirect`**在***ASP.NET MVC-4***中保存 a ：

**例如我有这个：**

```
/admin/category/add/81/142 
```

**但是在我使用这个之后：**

```
return RedirectToAction("Add", "Category", new RouteValueDictionary
{
   {"id", siteid.Value},
   {"cid", pid.HasValue ? pid.Value : cid.Value }
}); 
```

**我明白了：**

```
/admin/category/add?id=81&cid=142 
```

但我想要原版***`/admin/category/add/81/142`***

这是我的路由配置：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRouteLowercase(
            "Admin_LogOn",
            "Admin/{controller}/{action}/",
            defaults: new { controller = "Account", action = "LogOn" },
            constraints: null
        );

        context.MapRouteLowercase(
            "Admin_Category_List_Add",
            "Admin/{controller}/{action}/{id}/{cid}/{pid}",
            defaults:
                new
                {
                    controller = "Category",
                    action = "Create",
                    id = UrlParameter.Optional,
                    cid = UrlParameter.Optional,
                    pid = UrlParameter.Optional
                },
            constraints: null
        );

        context.MapRouteLowercase(
          "Admin_TwoParameters",
          "Admin/{controller}/{action}/{id}/{cid}",
          defaults: new { controller = "Manager", action = "Index", id = UrlParameter.Optional, cid = UrlParameter.Optional },
          constraints: null
      );

        context.MapRouteLowercase(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            defaults: new { controller = "Manager", action = "Index", id = UrlParameter.Optional },
            constraints: null
        );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:18:55.217

```
But i want the original one /admin/category/add/81/142 
```

要保留该格式，您可以执行以下操作：

```
return Redirect(Url.Action("Add", "Category") + "/" + siteid.Value + "/" + (pid.HasValue ? pid.Value : cid.Value)); 
```

或者如果您更喜欢连接字符串（我更喜欢第一个）：

```
return Redirect(new[] { Url.Action("Add", "Category"), "/", siteid.Value, "/", (pid.HasValue ? pid.Value : cid.Value).ToString()}); 
```

# windows-installer - 如何在静默安装 msi 期间抑制文件丢失的消息框？

> ID：15875271
> 
> 赞同：-2
> 
> 时间：2013-04-08T09:07:46.700
> 
> 标签：windows-installer

我需要取消显示在静默安装 msi 期间文件丢失的警告消息的消息框。这是一个对话框，上面写着：

```
Source file not found.
Path\to\file.
Verify that the file exists and you can access it. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:06:52.137

*如果您将文件标记为非 Vital，则如果文件丢失并且*用户选择忽略出现的警告，则安装将能够完成。在 WiX 工具集中，您需要将`File`元素`Vital`属性设置为`'no'`.

不幸的是，默认按钮`Cancel`在警告对话框上，这意味着当文件丢失时，安装总是会失败。

您必须编写一个外部 UI 处理程序（或使用诸如 Burn 之类的东西）来处理该消息并发送`Ignore`.

# symfony - symfony 2 中不存在类，但似乎都是正确的

> ID：15875272
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:50.210
> 
> 标签：symfony, doctrine-orm

我有一个奇怪的问题。我有这样的错误

> 类 Backend\GruposAlumnosBundle\Entity\GruposAlumnos 在第 233 行的 F:\wamp\www\getbritSys\vendor\doctrine\orm\lib\Doctrine\ORM\Proxy\ProxyFactory.php 中不存在

```
 }
   // We need to pick the type hint class too
   if (($paramClass = $param->getClass()) !== null) {
       $parameterString .= '\\' . $paramClass->getName() . ' ';
   } else if ($param->isArray()) {
       $parameterString .= 'array ';* 
```

当我在控制器中执行此操作时会发生此错误

```
$em = $this->getDoctrine()->getManager();
$grupoalumno = $em->getRepository('BackendGruposBundle:GruposAlumnos')->find($item); 
```

我的实体类`GruposAlumnos`存在于`BackendGruposBundle`.

一些想法？我没有发现问题，而且很少见

（`BackendGruposBundle`已加载`AppKernel`。已检查。此捆绑包具有更多带有其控制器的实体并且可以正常工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:06:21.957

我已经解决了这个错误。这个错误来自方法`addEntity`和`removeEntity`关系。我定义了错误的参数。我认为这个错误会更明确。

# iphone - 使用 UITapGestureRecognizer 时不会调用 textFieldShouldEndEditing

> ID：15875273
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:52.910
> 
> 标签：iphone, ios, objective-c

在我的 ViewController 中，我得到了`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`，但这永远不会被调用。我搜索了为什么没有调用它，我发现我使用了这个：

```
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    [self.view addGestureRecognizer:tap]; 
```

点击背景时关闭键盘。知道如何解决这个问题，dismisskeyboard 点击背景和`didSelectRowAtIndexPath`工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:25:39.563

如果您点击此视图。您必须覆盖您的委托方法`shouldReceiveTouch`才能返回`NO`。如果触摸发生在`tableView`

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    // Disallow recognition of tap gestures in the segmented control.
    if ([touch.view isDescendantOfView:self.tblView]) {
        return NO;
    }
    return YES;
} 
```

现在两个委托方法将触发.. `Note:`self.tblView 是一个 tableView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:26:47.910

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
return TRUE; 
```

好的，看看你如何处理那个......然后如果它有效，请阅读文档以获得全面的解释，以便您有一个清晰的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:15:49.437

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                               initWithTarget:self
                               action:@selector(dismissKeyboard:)];

[tbl addGestureRecognizer:tap];

-(void)dismissKeyboard:(UITapGestureRecognizer *)gestureRecognizer
{
    CGPoint p = [gestureRecognizer locationInView:tbl];

    NSIndexPath *indexPath = [tbl indexPathForRowAtPoint:p];
    if (indexPath == nil)
        NSLog(@"Resign");
    else
        NSLog(@"Did select Row, %i",indexPath.row);// Do your stuff as you are doing in didSelectRow
} 
```

**实现这个**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:10:31.640

`didSelectRowAtIndexPath`永远不会被调用，因为您可能没有实现`UITableViewDelegate`.

您应该将其与您的控件一起使用以从响应者中辞职

```
 [yourTextField resignFirstResponder]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:14:13.240

像这样尝试它会帮助你，

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    if(![[touch view] isKindOfClass:[UITextField class]]){

//resign your textfield here
    }

} 
```

# ios - 调用 CLLocationManager stopUpdatingLocation 后内部 GPS 天线是否立即停止工作

> ID：15875274
> 
> 赞同：0
> 
> 时间：2013-04-08T09:07:55.397
> 
> 标签：ios, core-location, cllocationmanager, cllocation

这是我的场景。在我的应用程序中，不需要持续监控用户位置，但我需要位置尽可能准确。因此，我只需调用 CLLocationManager startUpdatingLocation 并将 kCLLocationAccuracyBestForNavigation 设置为desiredAccuracy，并在获得所需精度的位置后（通过将 newLocation.horizo​​ntalAccuracy 与预定义值进行比较），我想停止位置更新并在几秒钟后再次撤销更新。但是当我调用 stopUpdatingLocation 时，状态栏中的位置图标会在大约 10 秒后消失，这是否意味着苹果已经考虑过这种情况，当用户调用 stopUpdatingLocation 时它不会在一段时间内关闭天线，可能是因为将它们转回来on 在能源方面有点贵，所以他们只是等待一段时间，然后才关闭天线。或者可能只是位置图标没有消失，但天线已关闭。那么有人能解释一下当有人调用 stopUpdatingLocation 时究竟发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:26:59.260

GPS 无线电在最后一次使用后 10 秒关闭。这在 WWDC 的性能优化会议之一中进行了讨论。

# jenkins - SWTBot 詹金斯问题

> ID：15875279
> 
> 赞同：1
> 
> 时间：2013-04-08T09:08:09.067
> 
> 标签：jenkins, swtbot

我有一段 SWTBot 代码在我的机器上启动时运行良好，但在由 Jenkins 运行时失败：

```
...
SWTBotTreeItemExtension readSchemaProperty = 
  new SWTBotTreeItemExtension(readProperties.getTreeItem("Schema").widget, readProperties.widget);
readSchemaProperty.click(1);
readSchemaProperty.click(1);
readSchemaProperty.pressShortcut(Keystrokes.DOWN);
... 
```

（SWTBotTreeItemExtension 是一个自定义类，用于单击表格小部件，例如在 Properties 视图中使用的小部件；参见[http://www.eclipse.org/forums/index.php/t/153600/](http://www.eclipse.org/forums/index.php/t/153600/)）

测试由第谷执行。Jenkins启动时没有错误，但点击和击键没有任何效果。当我在命令行上手动启动它时，一切正常。

我在某处读到，在将 SWTBot 与 Jenkins 一起使用时存在“焦点问题”，并且 Jenkins 作为服务安装在 Windows 上，但我不明白这会如何导致这种问题，同时让我的其余测试安然无恙。感谢所有建设性意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T08:44:33.287

如果 Jenkins 作为 Windows 服务运行，它不能与 Bot 交互。 [http://habibbabbles.blogspot.com/2013/06/running-ui-tests-from-jenkins.html](http://habibbabbles.blogspot.com/2013/06/running-ui-tests-from-jenkins.html)

# html - 为什么我不能通过 CSS 设置引导导航栏元素？

> ID：15875280
> 
> 赞同：1
> 
> 时间：2013-04-08T09:08:21.443
> 
> 标签：html, css, twitter-bootstrap

html是：

```
 <div class="navbar navbar-fixed-top">
       <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="index.html">my brand</a>
            <ul class="nav">
              <li class="active"><a href="index.html">Home</a></li>
              <li><a href="try.html" id="emphasize">Emphasize it</a></li>
            </ul>
          </div>
        </div>
      </div> 
```

说，我想添加背景颜色。这是我在 CSS 文件中输入的内容：

```
 #emphasize{
        background: #99f;
    } 
```

但是对导航栏没有影响。但是如果我尝试通过 HTML 样式标签或 Javascript 来设置它的样式，那就奇怪了：

```
 <li><a href="tryit.html" id="emphasize" style="background: #99f">Emphasize it</a></li> 
```

或者

```
 document.getElementById('emphasize').style.background = '#99f'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:49:21.683

我认为背景颜色被前面的颜色覆盖。所以你可以尝试使用这个 CSS。

```
#emphasize{
    background: #99f !important;
} 
```

这将强制渲染使用这种颜色来代替..

让我知道它是否有效。

# perl - Perl - 如何使用椭圆曲线数学将比特币私钥转换为地址

> ID：15875281
> 
> 赞同：3
> 
> 时间：2013-04-08T09:08:22.297
> 
> 标签：perl, elliptic-curve, bitcoin

我的比特币钱包中有大量私钥转储（约 25K），但我没有映射到每个私钥的关联地址。我需要地址才能重新创建钱包，因为我需要跳过一些地址而不是将它们添加到新钱包中。

我被指向一个包含转换方法的 python 工具：[pywallet](https://github.com/joric/pywallet/blob/master/pywallet.py)，但我宁愿在 Perl 中执行此操作，这样我可以更轻松地编写它。我还发现了这两个 JavaScript 站点：[bitaddress.org](http://bitaddress.org)和[brainwallet.org](http://brainwallet.org)。

我在 CPAN 上找到了以下库，听起来它们可能有助于执行此操作，但我不知道如何将这些部分组合在一起：[Math::EllipticCurve::Prime](http://metacpan.org/module/Math%3a%3aEllipticCurve%3a%3aPrime)、[Crypt::OpenSSL::EC](http://metacpan.org/module/Crypt%3a%3aOpenSSL%3a%3aEC)。前者的文档说它真的很慢，后者可能更快，因为它使用 C 库，但文档令人困惑。我还在[Rosetta Code](http://rosettacode.org/wiki/Bitcoin/Elliptic_curve_arithmetic#Perl)上找到了一些椭圆曲线代码。CPAN 上曾经有一个 Crypt::ECDSA，但在某个时候被删除了。

那么使用 Perl 从私钥获取比特币地址的最佳且快速的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:33:31.473

你应该先检查一下：[https](https://github.com/grondilu/libbitcoin-perl) ://github.com/grondilu/libbitcoin-perl - 也许会给你一些想法。

# pcap - pcap 中的 ntohs() 到底是做什么的？

> ID：15875282
> 
> 赞同：12
> 
> 时间：2013-04-08T09:08:26.650
> 
> 标签：pcap, endianness

我从一个答案中阅读了文档：

ntohs 函数采用 TCP/IP 网络字节顺序（AF_INET 或 AF_INET6 地址族）的 16 位数字，并以主机字节顺序返回一个 16 位数字。

请举例说明，什么是网络字节序，什么是主机字节序。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-08T20:28:24.990

数字 1000 在二进制中是 1111101000。

如果是 16 位二进制数，则为 0000001111101000。

如果它被分成两个 8 位字节，那就是两个字节，其值为 00000011 和 11101000。

这两个字节可以有两种不同的顺序：

*   在“big-endian”字节顺序中，包含高 8 位的字节在前，包含低 8 位的字节在后，因此第一个字节为 00000011，第二个字节为 11101000。
*   在“little-endian”字节顺序中，包含*低*8 位的字节在前，包含*高*8 位的字节在后，因此第一个字节为 11101000，第二个字节为 00000011。

在字节可寻址的机器中，硬件可以是“big-endian”或“little-endian”，这取决于哪个字节存储在内存中的较低地址。大多数个人电脑都是小端的。大型计算机有 big-endian 和 little-endian 两种风格，许多大型计算机（例如 IBM 大型机和中端计算机以及 SPARC 服务器）是 big-endian。

大多数网络都是位串行的，因此位是一个接一个地传输的。字节的位可能会先传输最高有效位或最低有效位，但网络硬件将对处理器隐藏这些细节。但是，它们会按照它们在主机内存中的顺序传输*字节*，因此，如果小端机器正在向大端机器传输数据，那么小端机器传输的数字在主机上看起来会有所不同。接收大端机；这些差异并*没有*被网络硬件隐藏。

因此，为了让 big-endian 和 little-endian 机器进行通信，在每个协议层，要么：

*   需要选择“标准”字节顺序，使用不同字节顺序的机器需要移动多字节数字的字节，使它们不在机器的标准字节顺序中，在传输数据之前，移动它们, 使它们*在*接收数据后以机器的标准字节顺序排列；
*   两台机器需要为会话协商特定的字节顺序（例如，对于 X11 网络窗口协议，从客户端到服务器的初始消息指定要使用的字节顺序）；
*   协议消息需要指定正在使用的字节顺序（例如，DCE RPC 就是这样做的；这是用于“Microsoft RPC”的协议）；
*   接收机器需要以某种方式正确猜测字节顺序（我不知道任何当前使用的协议，但旧的 BSD“谈话”协议没有使用上面使用的任何技术，并且实现Sun386i 必须使用它来处理大端的摩托罗拉 68K 机器和小端的 Intel x86 机器）。

各种互联网协议使用第一种策略，指定大端为字节序；它在各种 RFC 中被称为“网络字节顺序”。（微软的 SMB 文件访问协议也使用第一种策略，但指定了 little-endian。）

所以“网络字节序”是大端的。“主机字节顺序”是您正在使用的机器的字节顺序；它可能是 big-endian，在这种情况下`ntohs()`只返回您给它的值，或者它可能是 little-endian，在这种情况下`ntohs()`交换您给它的值的两个字节并返回该值。例如，在大端机器上，`ntohs(1000)`将返回 1000，而在小端机器上，`ntohs(1000)`将交换高位和低位字节，给出二进制 1110100000000011 或十进制 59395。

# entity-framework - 为什么使用 DbContext 而不是 ObjectContext

> ID：15875286
> 
> 赞同：17
> 
> 时间：2013-04-08T09:08:30.230
> 
> 标签：entity-framework, entity-framework-4

我正在使用 EF 4.1 并使用 DB 优先方法。我也创建了我的 .edmx 文件。现在我想创建我的 POCO 类。

为此，我安装了来自 NuGet 的 EF 4.x DbContext Generator 以及 EF 4.x POCO Entity Generator。

我完全知道建议将 DbContext 用于 EF 4.1+，因为它派生自 ObjectContext。但是，我仍然首先使用 EF 4.x POCO 实体生成器生成了我的 POCO 类，然后还使用了 EF 4.x DbContext 生成器。

**编辑：**找到这个[ADO.NET DbContext Generator vs. ADO.NET Poco Entity Generator (ObjectContext)](https://stackoverflow.com/questions/5340990/ado-net-dbcontext-generator-vs-ado-net-poco-entity-generator-objectcontext)

在任何一种情况下，它都会生成 .Context.tt 和 Model.tt 文件。那么这两种工具生成的文件的确切区别是什么？为什么建议对 EF 4.1+ 使用 DbContext？

**我也想知道 ObjectContext 的限制。**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T09:18:44.403

DbContext 是较新的 API，它应该在使用大多数常见任务时改善开发人员的体验 - 只是 API 设计得更好，但如果您想使用一些更复杂的功能，您仍然必须`ObjectContext`从旧 API 获取并使用。`DbContext`如果您计划将来将 EF 升级到 5.x 或 6.x，使用 DbContext 可能会更容易，因为这是 ADO.NET 团队所推荐的。

就生成器而言，EF 4.x POCO 生成器创建了更复杂的类，这些类在内部使用关系修复。当与延迟加载一起使用时，此功能证明其效率非常低，因此较新的 EF DbContext 生成器不使用它。

旁注：完全支持从一个 API 到另一个 API 的代码转换：

*   您可以使用`DbContext`构造函数接受`ObjectContext`从 ObjectContext API 移动到 DbContext API
*   您可以使用`IObjectContext`适配器从 DbContext API 移动到 ObjectContext API

# php - FIre beforeSave on updateAll

> ID：15875287
> 
> 赞同：0
> 
> 时间：2013-04-08T09:08:34.227
> 
> 标签：php, callback, cakephp-2.0

我需要在 updateAll() 上触发 beforeSave() 和 afterSave() 回调。我使用 updateAll() 因为我需要更新 ID 字段..（我知道关于可编辑 ID 的事情有点“错误”，但我使用的这个数据库已经像那样混乱了）。

我需要做的是，触发 updateAll() 触发 beforeSave() 和 afterSave()，就像 save() 一样。

这是 CakePHP 1.3 中的 updateAll()

```
function updateAll($fields, $conditions = true) {
    $args = func_get_args();
    $output = call_user_func_array(array('parent', 'updateAll'), $args);
    if ($output) {
        $created = false;
        $options = array();
        $this->Behaviors->trigger($this, 'afterSave', array(
           $created,
           $options,
       ));

       $this->afterSave($created);
       $this->_clearCache();
       return true;
    }
    return false;
} 
```

然后这是我在 CakePHP 2.3 中调整的代码

```
function updateAll($fields, $conditions = true) {
    $args = func_get_args();
    $output = call_user_func_array(array('parent', 'updateAll'), $args);
    if ($output) {
       $created = false;
       $options = array();
       $event = new CakeEvent('Model.afterSave', $this, array($created, $options));
       $this->getEventManager()->dispatch($event);

       $this->afterSave($created);
       $this->_clearCache();
       return true;
    }
    return false;
} 
```

问题是，如果我想在 updateAll 中调用 beforeSave() 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:47:15.000

我有一个多么愚蠢的问题。

这是代码：

```
function updateAll($fields, $conditions = true) {

    $options = array();
    $event = new CakeEvent('Model.beforeSave', $this, array($options) );
    list($event->break, $event->breakOn) = array(true, array(false, null));
    $this->getEventManager()->dispatch($event);

    $args = func_get_args();
    $output = call_user_func_array(array('parent', 'updateAll'), $args);
    if ($output) {
      $created = false;
      $options = array();
      $event = new CakeEvent('Model.afterSave', $this, array($created, $options));
      $this->getEventManager()->dispatch($event);

      $this->afterSave($created);
      $this->_clearCache();
      return true;
   }
   return false;
} 
```

# android - ADB 显示未知设备

> ID：15875291
> 
> 赞同：1
> 
> 时间：2013-04-08T09:08:39.617
> 
> 标签：android, adb

从现在开始，我一直在开发几款 Android 设备，但这一款让我完全困惑。Windows 中的 ADB 可以很好地检测到该设备，但我无法让 ADB 在 Linux（Ubuntu 12.04）中识别该设备。

```
$ adb devices
List of devices attached 
????????????    device 
```

1.  设备处于 USB 调试模式。
2.  `lsusb`显示为`Bus 003 Device 005: ID 18d1:0003 Google Inc.`
3.  `/etc/udev/rules.d/51-android.rules`文件有以下行：`SUBSYSTEM=="usb", ATTRS{idVendor}=="18d1", MODE="0666"`
4.  `~/.android/adb_usb.ini`自己`0x18d1`排成一行

到目前为止我所做的尝试：

1.  重新启动 ADB 服务器 - 不走运
2.  以 root 身份启动 ADB 服务器 - 不走运
3.  将此行添加`SUBSYSTEM=="usb", ATTRS{idVendor}=="18d1", ATTR{idProduct}=="0003", MODE="0666", GROUP="adbusers"`到组中`51-android.rules`并将我自己添加到`adbusers`组中。重启`udev`和亚行 - 不走运

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T14:24:30.517

USB 端口有缺陷。它在另一个 USB 端口上运行良好。

# jakarta-ee - 在不部署整个项目的情况下将包添加到 Web 应用程序

> ID：15875292
> 
> 赞同：0
> 
> 时间：2013-04-08T09:08:45.383
> 
> 标签：jakarta-ee, model-view-controller, deployment, module

如何在不实际部署整个项目的情况下向现有 Web 应用程序添加和部署新包，

我们有一个产品叫做 click to call。这个产品有几个不同的 API，比如 1\. SMS to call 2\. Miss-call-for-callback 3\. Tweet to call 等。

现在所有项目都使用单独的 Web 应用程序运行，并使用 Http Post 和 get 方法相互通信。我需要将所有这些单独的应用程序合并到一个多轮胎应用程序中，所以有可能通过任何方式或框架，每次我进行任何更改时，我只需要部署那个特定的包而不是整个项目

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:09:08.863

我不确定我是否理解正确，但出于开发目的，您可以使用 JRebel。我不知道生产环境是否有任何解决方案，尽管以这种方式在生产环境中重新部署某些东西仍然不是一个好主意。恕我直言。

# node.js - 执行后清除 Mongojs 集合

> ID：15875294
> 
> 赞同：0
> 
> 时间：2013-04-08T09:08:48.310
> 
> 标签：node.js, mongodb, mongojs

我有 2 个使用 mongojs 连接的函数。两者都将使用具有不同架构但具有相同名称“用户”的 2 个不同集合。这是代码：

```
var findAll = function(req, res) {
var users = db.collection('users'); //this initializes db collection
db.users.find({},function(err,users){
   if(err){
       res.json(err);
   } else{
       res.json(users);
        users = null;
   }
});
};
var getbyUserName = function(req,res) {
var username = req.params.username;    
db.users.find({'username':username},function(err,result){
    if(err){
        res.send(err);
    }else{
        res.json(result);
    }
});

}; 
```

我没有在函数 getbyUsername 中初始化“用户”集合，而是使用在第一个函数中初始化的“用户”集合。功能 1 成功执行后，有什么方法可以清除集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:44:34.897

maybe `db.collection('users').drop();` ? See if you can find something in [http://mongodb.github.io/node-mongodb-native/markdown-docs/collections.html](http://mongodb.github.io/node-mongodb-native/markdown-docs/collections.html) that helps

# java - 使用 Java 在资源管理器中打开文件夹

> ID：15875295
> 
> 赞同：44
> 
> 时间：2013-04-08T09:08:51.053
> 
> 标签：java

从 Java 代码中，我如何在平台的文件资源管理器（例如 Windows 资源管理器）中打开特定文件夹（例如 C:\Folder）？这些示例适用于 Windows，但我需要一个跨平台解决方案。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-08T09:11:18.557

很简单：

```
Desktop.getDesktop().open(new File("C:\\folder")); 
```

注意：`java.awt.Desktop`在 JDK 6 中引入。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T09:11:25.670

是的，您可以使用 JDK 6 使用以下代码：

```
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

public class OpenFolder {
    public static void main(String[] args) throws IOException {
        Desktop desktop = Desktop.getDesktop();
        File dirToOpen = null;
        try {
            dirToOpen = new File("c:\\folder");
            desktop.open(dirToOpen);
        } catch (IllegalArgumentException iae) {
            System.out.println("File Not Found");
        }
    }
} 
```

笔记：

```
Desktop desktop = Desktop.getDesktop(); 
```

JDK 5 不支持

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-08T09:12:24.307

尝试

```
 Runtime.getRuntime().exec("explorer C:\bin"); 
```

# javascript - 如何将 Spring 表单设置为只读？

> ID：15875301
> 
> 赞同：2
> 
> 时间：2013-04-08T09:09:10.633
> 
> 标签：javascript, jquery, spring, jsp

在我的应用程序中，我使用的是 Spring Supplied 标签...

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

    <fieldset id="user1">
       <form:form action="frm1" modelAttribute="SUPER" >
         ------
         ------
       </form:form>
    </fieldset> 
```

而我的要求基本上是表单是只读的，当我们单击表单的编辑按钮时，只有表单会更改可编辑模式。

我正在尝试`readonly`属性但不起作用..我认为这个属性适用于 html。

请给我建议如何在任何与 java 相关的技术中做到这一点。像 javascript 和 JQuery。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-05T14:50:25.657

属性的类型`readonly`是布尔值，所以它应该是`readonly="true"`：

```
<form:input path="firstName" class="form-control"
            placeholder="First Name"  type="text" readonly="true"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:31:29.310

您可以使用**c 标签库**将值分配给模型中的输入，同时使用 readonly="readonly" 属性。

```
<form:form id="simpleDomainForm" modelAttribute="simpleDomain">
<input name="modelId" value='<c:out value="${simpleDomain.modelId}"></c:out>' readonly="readonly" class="required">
<input name="modelName" value='<c:out value="${simpleDomain.modelName}"></c:out>' readonly="readonly" class="required">
<input type="button" value="Toggle" onclick="toggleForm();">
</form:form> 
```

**而 jQuery 你可以在编辑**按钮的点击事件中启用这些输入框。以下是使用 jQuery 切换输入的只读状态的简单脚本示例。

[*注意：这只是一个简单的例子，您需要根据您的要求自定义它*]

```
<script>
function toggleForm(){
    if($("#simpleDomainForm").children(".required").attr("readonly") == "readonly")
        $("#simpleDomainForm").children(".required").removeAttr("readonly");
    else
        $("#simpleDomainForm").children(".required").attr("readonly", "readonly");
}
</script> 
```

# php - phonegap 和 php 之间的身份验证

> ID：15875302
> 
> 赞同：0
> 
> 时间：2013-04-08T09:09:10.940
> 
> 标签：php, cordova, forms-authentication

我需要一个phonegap 和php 之间的身份验证系统。我通过 ajax 向用户发送请求并通过。如果正确，Php 会使用这些数据查询 mysql，它会返回 PHPSESSID 并使用 javascript 保存在 LocalStorage 中。当此用户将操作作为评论时，上传照片.. 检查 LocalStore 中是否存在 PHPSESSID，并在 php.ini 中检查此 PHPSESSID。

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:09:33.633

最好使用 RESTful 原则，这意味着服务器是无状态的。尝试深入了解如何使用 rest 制作 web 服务。应该有大量示例可供您尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:11:45.830

OAuth 浮现在脑海中。将令牌存储在 localStorage 中，而不是存储会话 ID。这样，您可以快速轻松地调用它。

您还可以调整您的 OAuth 提供程序以自动刷新使用的令牌，因此令牌永远不会真正过期。

# javascript - 更新一个 JavaScript 对象会全部更新

> ID：15875304
> 
> 赞同：1
> 
> 时间：2013-04-08T09:09:11.977
> 
> 标签：javascript, html, canvas

我有一个脚本可以在画布上生成 x 数量的蝴蝶，我正在使用一些适度原始的函数构造函数，以便可以修改每只蝴蝶而不影响其他任何蝴蝶，但是在更新其中一个序列时它会更新所有这些并且我看不到为什么。

由于代码量很大（超过 350 行），我创建了一个[JS fiddle](http://jsfiddle.net/dmackintosh88/y2QUL/17/)供查看（可能不赞成）

您可以[在此处](http://jsfiddle.net/dmackintosh88/y2QUL/17/)完整查看所有内容。

但由于我不能只发布 JSFiddle 的链接，这里是序列函数本身的代码。

```
function Sequence (s, f) {
    // Check we have arguments
    if (!s || !f) {
        throw new TypeError('No sequences to load');
    }

    // Instance for the onload event
    var _sq  = this;

    // Some public properties
    this.w  = 0;
    this.r  = false;
    this.st = 0;
    this.ns = 22;

    // This is the step in the sequence we're at
    this.s  = 20;

    // The step width
    this.sw = 0;

    // Create the image
    this._s = new Image;
    this._f = new Image;

    // Load listener 
    this._s.onload = function () {
        // Set our publics
        _sq.w = this.width;
        _sq.sw = _sq.w / fps;
    };

    this._s.src = s;
    this._f.src = f;

    // Return
    return this;
}; 
```

*[编辑]* 我已经更新了序列类，基本上不关心负载，它无论如何都是使用预取的

```
<link rel="prefetch" href="image.png" /> 
```

我还更新了 JSFiddle，因此您可以看到它正在工作（还有其他几个更新），但是代码有点笨拙，因此我不会深入讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:20:48.797

正如评论中已经提到的，代码很难阅读。

但是您的问题很可能在这里：

```
 for ( ; i < no_of_butterflies; i++) {
        // Create the sequence
        var s = new Sequence('http://ok5.com/blue-walking.png', 'http://ok5.com/blue-flying-2.png');

        // Listen to the load
        s.loaded = function() {
            bs.push(new Butterfly(s));
        };

        // Load the beast up
        s.load();
    } 
```

加载图像时`s.loaded`调用回调。所以对于你们所有的蝴蝶来说，你拥有相同`Sequence`的状态和图像。我无法告诉您为什么其余代码似乎可以工作，我真的没有时间调试您的代码。我的建议是阅读有关范围和闭包的信息并进行干净的重写，因为我认为还有更多这样的问题。

**编辑** 一个修复可能是将序列作为参数传递：

```
// If we have a loaded listener, fire it
if (_sq.loaded) {
    _sq.loaded(_sq);
} 
```

并将回调更改为此：

```
// Listen to the load
s.loaded = function(s) {
    bs.push(new Butterfly(s));
}; 
```

但是你必须检查它是否工作正常。

# iphone - MKMap 引脚颜色

> ID：15875305
> 
> 赞同：1
> 
> 时间：2013-04-08T09:09:12.017
> 
> 标签：iphone, xcode, annotations, mkmapview

我是 Xcode 的新手，基本上我有一个`MKMapView`并且想为我的每个引脚添加单独的颜色。我目前已经用注释标记了别针。

位置注释.h：

```
@interface LocationAnnotation : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@end 
```

LocationAnnotation.m:

```
#import "LocationAnnotation.h"

@implementation LocationAnnotation
@synthesize coordinate, title, subtitle;

@end 
```

我的每个坐标在 MainMapViewController.h 中都是这样的：

```
#define TheKingBill_LATITUDE 50.431379
#define TheKingBill_LONGITUDE -3.685495

 //Annotation

NSMutableArray * locations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
LocationAnnotation * myAnn;

//The King Bill Annotation
myAnn = [[LocationAnnotation alloc] init];
location.latitude = TheKingBill_LATITUDE;
location.longitude = TheKingBill_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"The King Bill";
myAnn.subtitle = @"Another Pub In Town";
[locations addObject:myAnn];

 //The Seven Stars Annotations
myAnn = [[LocationAnnotation alloc] init];
location.latitude = TheSevenStars_LATITUDE;
location.longitude = TheSevenStars_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"The Royal Seven Stars Hotel";
myAnn.subtitle = @"Hotel In Town";
[locations addObject:myAnn];

 [self.MainMapView addAnnotations:locations]; 
```

关于我需要添加什么以使每个图钉颜色不同的任何想法？

谢谢！

* * *

好的，现在我的其他地图有问题，该地图链接到此 LocationAnnotation 文件。我还想为此添加颜色图钉。如果新代码与我以前的 mapviewcontroller 相同，那将是理想的。这是代码...

LocationAnnotation.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface LocationAnnotation : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property int idNumber;

- (id)initWithTitle:(NSString *)ttl andSubtitle:(NSString *)subttl andCoordinate:(CLLocationCoordinate2D)c2d andID:(int)idN;

@end 
```

LocationAnnotation.m

```
 #import "LocationAnnotation.h"

    @implementation LocationAnnotation

    @synthesize coordinate, title, subtitle, idNumber;

    - (id)initWithTitle:(NSString *)ttl andSubtitle:(NSString *)subttl andCoordinate:(CLLocationCoordinate2D)c2d andID:(int)idN
    {
        self = [super init];

        if (self)
        {
            self.title = ttl;
            self.coordinate = c2d;
            self.subtitle = subttl;
            self.idNumber = idN;
        }

        return self;
    }

    @end 
```

MapViewController.h

```
 #import <UIKit/UIKit.h>
    #import <MapKit/MapKit.h>

    @interface MapViewController : UIViewController

    @property (weak, nonatomic) IBOutlet MKMapView *ClientMapView;

    @end 
```

MapViewController.m

```
#import "MapViewController.h"
#import "LocationAnnotation.h"

@interface MapViewController ()

@end

//The Dartmouth Inn Coordinates
#define DARTMOUTH_INN_LATITUDE 50.430036;
#define DARTMOUTH_INN_LONGITUDE -3.683873;

//Span
#define THE_SPAN 0.004f;

@implementation MapViewController
@synthesize ClientMapView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Create the region
    MKCoordinateRegion myRegion;

    //Centre
    CLLocationCoordinate2D centre;
    centre.latitude = DARTMOUTH_INN_LATITUDE;
    centre.longitude = DARTMOUTH_INN_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = centre;
    myRegion.span = span;

    //Set The Map View
    [ClientMapView setRegion:myRegion animated:YES];

    //Annotation

    //1\. Create A Coordinate for use with annotation

    CLLocationCoordinate2D dartLocation;
    dartLocation.latitude = DARTMOUTH_INN_LATITUDE;
    dartLocation.longitude = DARTMOUTH_INN_LONGITUDE;

    LocationAnnotation * myAnnotation = [LocationAnnotation alloc];
    myAnnotation.coordinate = dartLocation;
    myAnnotation.title = @"The Dartmouth Inn";

    [self.ClientMapView addAnnotation:myAnnotation];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:57:07.877

好的，我们来了，您的代码经过修改：

LocationAnnotation.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface LocationAnnotation : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property int idNumber;

- (id)initWithTitle:(NSString *)ttl andSubtitle:(NSString *)subttl andCoordinate:(CLLocationCoordinate2D)c2d andID:(int)idN;

@end 
```

LocationAnnotation.m

```
#import "LocationAnnotation.h"

@implementation LocationAnnotation

@synthesize coordinate, title, subtitle, idNumber;

- (id)initWithTitle:(NSString *)ttl andSubtitle:(NSString *)subttl andCoordinate:(CLLocationCoordinate2D)c2d andID:(int)idN
{
    self = [super init];

    if (self)
    {
        self.title = ttl;
        self.coordinate = c2d;
        self.subtitle = subttl;
        self.idNumber = idN;
    }

    return self;
}

@end 
```

MainMapViewController.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MainMapViewController : UIViewController <MKMapViewDelegate>

@property (weak, nonatomic) IBOutlet MKMapView *mainMapView;

@end 
```

MainMapViewController.m

```
#import "MainMapViewController.h"
#import "LocationAnnotation.h"

@interface MainMapViewController ()

@end

//Totnes Main Centre Coordinates
#define Totnes_LATITUDE 50.433741
#define Totnes_LONGITUDE -3.685797

//The Dartmouth Inn Coordinates
#define DARTMOUTH_INN_LATITUDE 50.430036;
#define DARTMOUTH_INN_LONGITUDE -3.683873;

//Pub Offers Co-Ordinates

#define TheKingBill_LATITUDE 50.431379
#define TheKingBill_LONGITUDE -3.685495

#define TheSevenStars_LATITUDE 50.431045
#define TheSevenStars_LONGITUDE -3.682945

#define TheLordNelson_LATITUDE 50.430931
#define TheLordNelson_LONGITUDE -3.683644

//Span
#define THE_SPAN 0.01f;

@implementation MainMapViewController

@synthesize mainMapView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Set Delegate
    mainMapView.delegate = self;

    //Create the region
    MKCoordinateRegion myRegion;

    //Centre
    CLLocationCoordinate2D centre;
    centre.latitude = Totnes_LATITUDE;
    centre.longitude = Totnes_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = centre;
    myRegion.span = span;

    //Set The Map View
    [mainMapView setRegion:myRegion animated:YES];

    //Annotation

    NSMutableArray * locations = [[NSMutableArray alloc] init];
    LocationAnnotation * myAnn;

    //The King Bill Annotation
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The King Bill"
                                          andSubtitle:@"Another Pub In Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheKingBill_LATITUDE, TheKingBill_LONGITUDE)
                                                andID:1];
    [locations addObject:myAnn];

    //The Seven Stars Annotations
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The Royal Seven Stars Hotel"
                                          andSubtitle:@"Hotel In Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheSevenStars_LATITUDE, TheSevenStars_LONGITUDE)
                                                andID:2];
    [locations addObject:myAnn];

    //The Lord Nelson Annotations
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The Lord Nelson"
                                          andSubtitle:@"Great Pub In Centre of Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheLordNelson_LATITUDE, TheLordNelson_LONGITUDE)
                                                andID:3];
    [locations addObject:myAnn];

    [self.mainMapView addAnnotations:locations];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - MKMapViewDelegate

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation {
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pin"];

    int annId = ((LocationAnnotation *)annotation).idNumber;
    annView.pinColor = (annId == 1) ? MKPinAnnotationColorPurple
                                    : (annId == 2) ? MKPinAnnotationColorGreen
                                                   : MKPinAnnotationColorRed;
    annView.canShowCallout = YES;
    return annView;
} 
```

# jquery - 根据滑块中选择的数组字符串显示不同的html？

> ID：15875308
> 
> 赞同：0
> 
> 时间：2013-04-08T09:09:16.430
> 
> 标签：jquery, html, jquery-ui

我一直在研究一个 jQuery UI 单滑块，我打算根据选择的数组中的哪个字符串来显示项目的详细信息。到目前为止，它显示了商品的价格，但我需要它做的主要事情是显示不同的 html 内容（它可能最终会成为一个表格），具体取决于手柄在滑块中的哪个步骤。到目前为止，我已经得到了这段代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />

  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var valMap = [
"1.5",
"2.5",
"5.5",
"10.5"
];
    $("#slider").slider({
        min: 0,
        max: valMap.length - 1,
        value: 0,
        animate: false,
        change: function(event, ui) {                        
            $("#amount").val('$' + valMap[ui.value] + '0');
        }       
    });
                $("#amount").val('$' + valMap[$("#slider").slider("value")] + '0');
});
</script>
</head>
<body>
<br /><br />
<center>
<div id="slider"></div>

<div id="planlabel"><p>
  <label for="amount">Plan:</label>
  <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" readonly />
</p></div>

</center> 
```

我试图设置一个“if”语句来检查“金额”输入区域的值，但效果并不好（无论如何都没用，哈哈）。任何帮助将不胜感激！

以下是上述代码的示例：http: [//jsfiddle.net/SDDJ/zHMYc/1/](http://jsfiddle.net/SDDJ/zHMYc/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:26:54.877

您可以使用滑块的值来确定要显示的内容。可能类似于以下内容：-

```
<div class="content" id="content0"> ... </div>
<div class="content" id="content1"> ... </div>
<div class="content" id="content2"> ... </div>
<div class="content" id="content3"> ... </div> 
```

然后只显示与`div`匹配的`ui.value`，并隐藏其他的：

```
change: function(event, ui) {                        
  $("#amount").val('$' + valMap[ui.value] + '0');
  $('#content' + ui.value).show().siblings('div.content').hide();
} 
```

### [这是一个小提琴](http://jsfiddle.net/zHMYc/5/)

# php - 如何将选择框选项值分配给 php 变量？

> ID：15875309
> 
> 赞同：1
> 
> 时间：2013-04-08T09:09:17.213
> 
> 标签：php, javascript, html

我有两个选择框，例如，

```
<select name="template" id="template">
        <option value="" selected>--Select--</option>
            <option value="HOME">Home</option>
            <option value="HELP">How We Help</option>
            <option value="CONTACT">Contact Us</option>
            <option value="ABOUT">About Us</option>
</select> 
```

和

```
<select name="location" id="location"">
    <option value="" selected>--Select--</option>
            <option value="header">Header</option>
            <option value="center">Center</option>
            <option value="footer">Footer</option>
    </select> 
```

问题是，在第二个选择框中，只有联系我们模板需要中心位置。如何隐藏所有其他模板的中心选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:16:12.020

在不知道其余代码的情况下，假设它只是简单的 PHP（无框架）

```
<select name="location" id="location"">
<option value="" selected>--Select--</option>
        <option value="header">Header</option>
        <?php if ($template == 'contact_us'):?>
        <option value="center">Center</option>
        <?php endif;?>
        <option value="footer">Footer</option>
</select> 
```

将 center 选项包装在一个测试当前模板类型的简单 if 块中，将允许您根据加载的页面显示或隐藏值。

如果你在一个框架中，可能有更好的方法来做到这一点，但如果你只是使用普通的 PHP，我的建议会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:10:12.823

只需将您的静态值替换`<option>`为所需的变量

```
value="<?php echo $variable;?>" 
```

在隐藏它时，您必须为联系页面设置一个条件示例，您设置一个变量`$page='Contact_Us'`意味着该页面是contact_us。然后在您的选项中创建一个条件，这将使选项中心仅在唯一时`$page='Contact_Us'`显示

```
//Define variable `$page` in contact_us page
$page='Contact_Us';

<select name="location" id="location"">
    <option value="" selected>--Select--</option>
            <option value="header">Header</option>
            <?php if($page == 'Contact_US'){?>
            <option value="center">Center</option> 
            <?php }?>
            <option value="footer">Footer</option>
    </select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:18:47.927

1）隐藏一个中心选项：[jsfiddle here](http://jsfiddle.net/thinkfast2008/E8nPX/)

2）在php中设置选项值：

*   替换`<option value="header"></option>`为`<option value="<?php include('myScript.php') ?>"></option>`
*   然后在*myScript.php*中，`echo "newValue";`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T09:30:36.587

试试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script>
    $(document).ready(function(){
        $('#template').change(function(){
            var template = $(this).val()
                ,option = $('#container > select > option');
            if(template=="CONTACT")
                $('#location > option[value="header"]').after(option.clone());
            else
                $('#location > option[value="center"]').remove();
        }).change();
    });
</script>
<select name="template" id="template">
    <option value="" selected>--Select--</option>
    <option value="HOME">Home</option>
    <option value="HELP">How We Help</option>
    <option value="CONTACT">Contact Us</option>
    <option value="ABOUT">About Us</option>
</select>
<select name="location" id="location">
    <option value="" selected>--Select--</option>
    <option value="header">Header</option>
    <option value="footer">Footer</option>
</select>
<div id="container" style="display: none">
    <select>
        <option value="center">Center</option>
    </select>
</div> 
```

# java - 无法将隐藏项目映射到 javabean struts2

> ID：15875313
> 
> 赞同：0
> 
> 时间：2013-04-08T09:09:32.543
> 
> 标签：java, struts2

1.  我有一个动态表格供用户输入他们的教育信息。一个用户可以拥有多个教育信息。我使用隐藏字段来存储用户的 eduID。但看起来隐藏字段无法映射到 javabean 项目。当我提交带有现有项目的表单时，该项目`ID`在服务器端总是 0 而不是它的实际`ID`
2.  我想为用户提供删除和取消删除项目的能力。当用户删除一个项目时，我设置所有元素`display: none`并将隐藏字段值设置为`true`（此隐藏字段旨在让我知道在迭代列表时删除了哪个项目）。但是当我提交表单时，javabean 列表中已删除的项目取空值。

那么如何将隐藏元素映射到 javabean 对象或者有另一种方法来实现我的概念？

这是我的代码：

jsp：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib uri="/struts-tags" prefix="s" %>
<%@ taglib uri="/struts-dojo-tags" prefix="sx"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<html>
<head>
<script language="javascript" src="js/jquery-1.9.1.min.js"></script>
<script language="javascript" src="js/common.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Education List</title>
</head>
<body>
<s:form action="/save" method="POST">   
    <div class="educationForm">
        <c:if test="${ (not empty educations) }"> 
            <c:if test="${ fn:length(educations) ge 1 }">
                <c:forEach items="${educations}" var="edu" varStatus="status">
                    <div class="educations">    
                        <input type="hidden" name="education[${ status.index }].eduID" value="${ educations[status.index].index }" />               
                        <label>Position</label><input type="text" name="educations[${ status.index }].index" value="${ educations[status.index].index }" /> <a href="" class="delete">Delete</a><br/>
                        <label>School</label><input type="text" name="educations[${ status.index }].school" value="${ educations[status.index ].school }" /><br/>
                        <label>Degree</label><input type="text" name="educations[${ status.index }].degree" value="${ educations[status.index ].degree }" /><br/>
                        <label>GPA</label><input type="text" name="educations[${ status.index }].scored" value="${ educations[status.index ].scored }" /><br/>
                        <label>Start Date</label><input type="text" name="educations[${ status.index }].startDate" value="${ educations[status.index].startDate }" /><br/>
                        <label>End Date</label><input type="text" name="educations[${ status.index }].endDate" value="${ educations[status.index].endDate }" /><br/>
                        <input type="hidden" name="educations[${ status.index }].deleted" value="${ educations[status.index].deleted }" />
                    </div>
                </c:forEach>        
            </c:if>         
        </c:if>
        <div class="educations">
            <label>Position</label><input type="text" name="educations[${fn:length(educations)}].index" value="${fn:length(educations) + 1}" /><a href="" class="delete">Delete</a><br/>
            <label>School</label><input type="text" name="educations[${fn:length(educations)}].school" /><br/>
            <label>Degree</label><input type="text" name="educations[${fn:length(educations)}].degree" /><br/>
            <label>GPA</label><input type="text" name="educations[${fn:length(educations)}].scored" /><br/>
            <label>Start Date</label><input type="text" name="educations[${fn:length(educations)}].startDate" /><br/>
            <label>End Date</label><input type="text" name="educations[${fn:length(educations)}].endDate" /><br/>
            <input type="hidden" name="educations[${fn:length(educations)}].deleted" value="false" />
        </div>
    </div>  
    <a href="" id="addButton">Add new Edu</a>
    <input type="submit" value="Save" />        
</s:form>

<div class="template_educations" style="display:none">
    <div class="educations">
        <label>Position</label><input type="text" name="educations[_X_].index" value="_Y_" /><a href="" class="delete">Delete</a><br/>
        <label>School</label><input type="text" name="educations[_X_].school" /><br/>
        <label>Degree</label><input type="text" name="educations[_X_].degree" /><br/>
        <label>GPA</label><input type="text" name="educations[_X_].scored" /><br/>
        <label>Start Date</label><input type="text" name="educations[_X_].startDate" /><br/>
        <label>End Date</label><input type="text" name="educations[_X_].endDate" /><br/>
        <input type="hidden" name="ducations[_X_].deleted" value="false" />
    </div>
</div>
</body>
</html> 
```

jQuery：

```
$(document).ready(function(){

    //handle add new education
    $("#addButton").click(function(event){
        event.preventDefault();

        //append html inside template_educations div into educationForm div
        $(".educationForm").append($(".template_educations").html());

        //loop through input tag inside educations div
        $(".educationForm").children(".educations").last().children("input").each(function(){           
            var count = $(".educationForm").children(".educations").length;

            //replace value of position textfield with current position
            var value = $(this).attr("value");
            if(typeof value !== 'undefined' && value !== false)
            {
                value = value.replace("_Y_", count);
                $(this).attr("value", value);
            }

            //replace educations list index in textfield
            var name = $(this).attr("name");
            name = name.replace("_X_", count);
            $(this).attr("name", name);

        });         
    });

    //handle delete education
    $("body").on("click", ".delete", function(event){
        event.preventDefault();

        //hide all tag in education and set deleted to true
        var parent = $(this).parents(".educations");
        var hidden = parent.find("input[type=hidden]");
        hidden.val("true");
        parent.children().each(function(){
            if($(this) !== hidden)
            {
                $(this).hide();
            }           
        });

        //display undelete button
        parent.append("<a class='undelete' href=''>undelete</a>");
    });

    //handle undelete education
    $("body").on("click", ".undelete", function(event){
        event.preventDefault();

        //unhide all tag in parent and set deleted to false
        var parent = $(this).parents(".educations");
        var hidden = parent.find("input[type=hidden]");
        hidden.val("false");
        parent.children().each(function(){
            if($(this) !== hidden)
            {
                $(this).show();
            }           
        });

        //delete undelete button
        $(this).remove();
    });
}); 
```

行动：

```
package com.education.actions;

import java.util.List;

import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Result;
import org.apache.struts2.convention.annotation.Results;

import com.education.bean.Education;
import com.education.dao.DataConnectDao;
import com.opensymphony.xwork2.ActionSupport;

public class SaveEdu extends ActionSupport 
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private List<Education> educations;

    public List<Education> getEducations() {
        return educations;
    }

    public void setEducations(List<Education> educations) {
        this.educations = educations;
    }   

    @Action(value="/save", results={
            @Result(name="success", type="redirect", location="/list.action"),
            @Result(name="input", type="redirect", location="/list.action")
            })

    public String execute()
    {
        DataConnectDao connect = new DataConnectDao();

        connect.insertDetailDao(this.educations);

        return SUCCESS;
    }
} 
```

JavaBean：

```
package com.education.bean;

import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

public class Education {
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int eduID;
    private String school;
    private String degree;
    private float scored;
    private String startDate;
    private String endDate;
    private int index;
    private boolean deleted;

    public Education()
    {
        deleted = false;
    }

    public int getEduID() {
        return eduID;
    }
    public void setEduID(int eduID) {
        this.eduID = eduID;
    }
    public String getSchool() {
        return school;
    }
    public void setSchool(String school) {
        this.school = school;
    }
    public String getDegree() {
        return degree;
    }
    public void setDegree(String degree) {
        this.degree = degree;
    }
    public float getScored() {
        return scored;
    }
    public void setScored(float scored) {
        this.scored = scored;
    }
    public String getStartDate() {
        return startDate;
    }
    public void setStartDate(String startDate) {
        this.startDate = startDate;
    }
    public String getEndDate() {
        return endDate;
    }
    public void setEndDate(String endDate) {
        this.endDate = endDate;
    }
    public int getIndex() {
        return index;
    }
    public void setIndex(int index) {
        this.index = index;
    }

    public boolean isDeleted() {
        return deleted;
    }

    public void setDeleted(boolean deleted) {
        this.deleted = deleted;
    }
} 
```

插入数据：

```
package com.education.serivces;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.apache.log4j.Logger;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.education.bean.Education;
import com.education.utils.HibernateUltils;

public class DataConnect {
    Session sess;
    Transaction transaction;
    List<Education> educations;

    private Logger logger = Logger.getLogger(this.getClass());

    public void inserEducation(List<Education> edu)
    {
        try 
        {
            sess = HibernateUltils.getSession();

            transaction = sess.beginTransaction();

            for(Iterator<Education> educations = edu.iterator(); educations.hasNext();)
            {
                Education education = educations.next();

                sess.saveOrUpdate(education);
            }

            transaction.commit();   

        }
        catch (Exception e) 
        {
            transaction.rollback();
            logger.error(e);            
        }
        finally
        {
            sess.close();
        }
    }

    @SuppressWarnings({ "unchecked", "finally" })
    public List<Education> getEducation()
    {               
        try
        {
            sess = HibernateUltils.getSession();

            sess.beginTransaction();

            Query query = sess.createQuery("from Education");       

            this.educations = (List<Education>) query.list();

        }
        catch(Exception e)
        {
            logger.error(e);    
        }
        finally
        {
            sess.close();
            return educations;          
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:35:44.413

我建议您在服务器端只保留一个名为 indexToRemove 的单独字符串变量，并将其映射到 jsp 中的一个隐藏值。它会将已删除的 EduId 的值用某个分隔符分隔。

例如：2-5-8 意味着 EduID 2、5 和 8 必须从列表中删除。现在每次用户删除/取消删除时，您都可以使用 JS 代码修改它的值。

使用此字符串值，您可以根据需要在提交或某些服务器端操作时处理您的列表。

关于第一部分：我不知道隐藏值无法映射到 java bean 属性的任何限制。我猜的问题是你有：

```
<input type="hidden" name="education[${ status.index }].eduID" value="${ educations[status.index].index }" /> 
```

为什么这不是：`value="${ educations[status.index].eduID }"`？

# javascript - 从对象中获取价值

> ID：15875315
> 
> 赞同：1
> 
> 时间：2013-04-08T09:09:46.817
> 
> 标签：javascript

我将一个字符串传递给一个函数，该函数将使用该字符串创建一个会话存储元素，如下所示：

```
fun("key","value");

function fun(string, data){
  var to_session = {string:data};
  sessionStorage.setItem(string, JSON.stringify(to_session));
} 
```

但是在会话存储中，而不是将`{"key":"value"}`其存储为存储为`{"string":"value"}`

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:13:00.023

你可以这样做：

```
function fun(string, data){
  var to_session = {};
  to_session[string] = data;
  sessionStorage.setItem(string, JSON.stringify(to_session));
} 
```

# php - 在 jQuery 中设置背景颜色？

> ID：15875318
> 
> 赞同：-3
> 
> 时间：2013-04-08T09:10:15.163
> 
> 标签：php, jquery, css

我正在尝试制作一个 jQuery，如果值为 130，则为背景颜色。

到目前为止，这是我的代码：

```
function Compute(p, m, f, studno) {
  var average;
  average = parseFloat(p * 0.3) + parseFloat(m * 0.3) + parseFloat(f * 0.4);
  $("#average_" + studno).val(average.toFixed());                           
  if($(this).text()=="130"){
    color:red           
  }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:14:00.343

改用这个 - `$(this).css('backgroundColor', 'red');`：

```
function Compute(p, m, f, studno) {
     var average;
     average = parseFloat(p * 0.3) + parseFloat(m * 0.3) + parseFloat(f * 0.4);
     $("#average_" + studno).val(average.toFixed());                            
     if($(this).text()=="130"){
       $(this).css('backgroundColor', 'red');           
     }        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:30:25.960

我认为，对函数 Compute 的调用不是基于对象，例如：您可能没有在任何 ID 或类 $('#someID/Class').Compute(....); 上调用 Compute 函数，因此，您不会在函数内获得 $(this) 关键字的值。因此，无论哪种方式，您都必须使用 jquery 插件方法，或者因为您在问题中说过，当值为 130 时更改颜色，考虑元素是否为 ，然后使用 $(this).val() 而不是 $( this).text()，如果元素是，则使用 $(this).html() 而不是 $(this).text()。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T09:14:34.900

要更改 jQuery 中的背景颜色，您必须通过以下方式更改代码中的“color:red”行：

```
jQuery(this).css('background-color', 'red'); 
```

# networking - 端口在 OSI 模型中的位置

> ID：15875321
> 
> 赞同：1
> 
> 时间：2013-04-08T09:10:23.310
> 
> 标签：networking, port, osi

我知道端口是传输层的一部分。但是当我要求应用程序打开端口时，它如何打开端口以及端口在其他层中的部分是什么，以及数据何时传输到另一端通信它如何找到在另一点打开的另一个端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:46:02.817

正如您自己所指出的，端口位于传输层中。你问题的其余部分没有多大意义。有一个包含端口号的*协议*和一个使用它们的*实现。*很难看出其中的奥秘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:52:35.747

有一些端口是公共的。例如，客户端 A 想与服务器通信。现在服务器有一些公共端口，比如端口 80。客户端 A 在服务器的端口 80 上发送流量，但如果客户端 A 继续在服务器的端口 80 上发送流量，那么另一个客户端无法与服务器通信。因此，在客户端 A 与服务器在端口 80 上进行初始交互后，服务器告诉客户端 A 我们应该在此端口上进行进一步的通信，例如端口 6892。

# android - 我们可以将库项目用作 jar 文件吗？

> ID：15875322
> 
> 赞同：3
> 
> 时间：2013-04-08T09:10:25.563
> 
> 标签：android, jar, project

我为 android 创建了一个库项目“ABC”（包含一些布局和 java 文件）。现在在我的另一个应用程序“XYZ”中使用这个库项目。目前我这样做：选择“ABC”项目将其创建为库项目，遵循以下步骤：项目（ABC）->属性-> Android->选定选项（库项目）。在我的“XYZ”项目中添加了这个项目作为库项目。现在我担心的是我想从外部世界隐藏这个库项目，以便没有人可以修改这个库项目（就像我们使用 jar 文件一样）。我们怎么可能达到。任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:16:20.800

**您不能将库项目导出到 JAR 文件**。为了保护您的项目代码，您可以使用**ProGuard**。

**要在您的项目中启用 ProGuard，请编辑 project.properties 文件**

您可以配置您**的 project.properties**文件

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt

# Project target.
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt //configuring proguard
target=Google Inc.:Google APIs:16 //target api in my case api 16
android.library.reference.1=../actionbarsherlock //indicating you are refering library 
```

详情可在以下链接中找到

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

使您的项目成为库项目，您可以在另一个 android 项目中引用它。

图书馆项目

这些项目包含可共享的 Android**源代码**和**资源，您可以在 Android 项目中引用它们**。当您有想要重用的公共代码时，这很有用。**库项目不能安装到设备上，但是，它们会在构建时被拉入 .apk 文件。**

有关更多信息，请查看主题**库项目下的链接。**

[http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

您的库项目将勾选一个复选框，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/YcVXM.png)

您可以将库项目添加到您的 android 项目中。右键单击您的项目。转到属性。在左侧面板上选择 Android。单击添加，然后浏览并将库项目添加到您的 android 项目中。您可以在下方看到一个绿色勾号，表示已添加库项目。

![在此处输入图像描述](https://i.stack.imgur.com/gk3Kj.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:14:17.403

您可以将其制成 apklib 以使用[Android Maven 插件](https://code.google.com/p/maven-android-plugin/)进行集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:16:41.317

**[您不能将库项目导出到 JAR 文件。](http://developer.android.com/tools/projects/index.html#considerations)**

您需要为您的项目[配置 proguard](https://stackoverflow.com/questions/10982344/is-proguard-cfg-needed-for-library-projects)以保护您的代码。为您的项目配置 proguard 将保护您的代码以及在构建时拉入 apk 文件的库项目

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-27T10:42:25.083

在java中创建一个单独的应用程序，将您的秘密逻辑放在您想要隐藏的地方，将此jar添加到您的库项目中，然后添加对您的库项目的引用。

# r - 为什么 R 中的这个简单循环这么慢？

> ID：15875323
> 
> 赞同：1
> 
> 时间：2013-04-08T09:10:26.147
> 
> 标签：r, for-loop

我是 R 的初学者，我写了这个简单的循环：

```
for(i in 1:12000){
    if(v$piano.tariff[i] == 2) {v$piano.tariff[i] = 0}
    else {v$piano.tariff[i] = 1}
} 
```

其中 v 是一个数据框，piano.tariff 是它的列之一。循环所做的只是将piano.tariff 列的每个值从它们的初始值2 和5 更改为1 或0。

现在，代码可以工作了，但问题是它慢得离谱。最多需要**4-5分钟** 才能完成！在 C++ 或 C# 中，这样的循环几乎不需要几秒钟。

为什么这么慢？有没有更快的方法来实现这一点？或者仅仅是 R 很慢，仅此而已？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:16:59.793

您可能想改用`ifelse`矢量化 R 函数，它会更快

```
ifelse(v$piano.tariff==2, 0, 1) 
```

由于您没有提供可[重现的示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，因此我无法对性能进行基准测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T09:17:00.280

我认为您可以在这里尝试矢量化方法。

*编辑* 感谢 Henrik，以前的版本有点偏离。我认为新方法还可以。

```
twos <- v$piano.tariff == 2
notwos <- v$piano.tariff != 2
v[twos, "piano.tariff"] <- 0
v[notwos, "piano.tariff"] <- 1 
```

对你来说够快吗？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:20:50.227

通常，您需要小心 R 中的循环，但更特别是循环内的分配，例如`v$piano.tariff[i] = v$piano.tariff[i]+1`导致整个向量被重新分配。

有关此类问题的更多详细信息，请参阅有关此类问题的 Patrick Burns 在线书籍[The R Inferno 。](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)

# blackberry - 在 BlackBerry 上显示印度地图

> ID：15875326
> 
> 赞同：0
> 
> 时间：2013-04-08T09:10:28.653
> 
> 标签：blackberry, map, java-me

我正在研究 BlackBerry 中的地图应用程序。我正在运行可以正常运行的 BlcakBerryMapDemo 应用程序，但是当我们输入印度的纬度和经度并运行未在 Blackberry 上显示地图的应用程序时。请建议如何在 BlackBerry 中显示具有多个针点的地图。

我正在使用这段代码：

```
StringBuffer stringBuffer = new StringBuffer("<lbs clear='ALL'>");

long number1=758839;
long number2=227277;
stringBuffer.append("<location lon='"+number1+"' lat='"+number2+"' label='Kitchener, ON' description='palasia,indore' />");            
stringBuffer.append("</lbs>");                                 
Invoke.invokeApplication(Invoke.APP_TYPE_MAPS, 
                         new MapsArguments(MapsArguments.ARG_LOCATION_DOCUMENT,
                                           stringBuffer.toString())); 
```

`

# ruby-on-rails - 从使用 Heroku 的 github 克隆的 rails 应用程序的访问问题

> ID：15875327
> 
> 赞同：0
> 
> 时间：2013-04-08T09:10:31.313
> 
> 标签：ruby-on-rails, heroku, github

我从 GitHub 克隆了一个项目，现在无法在本地运行。

我在浏览器中收到此错误：

```
Moped::Errors::ConnectionFailure at /
Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

在终端中，当我输入任何 Heroku 命令时出现此错误：

```
$ heroku info
 !    You do not have access to the app disrupt. 
```

我是 Rails 的新手，所以简单的说明/建议会很棒。

这就是我的 mongoid.yml 文件中的内容

```
development:
  # Configure available database sessions. (required)
  sessions:
# Defines the default session. (required)
default:
  # Defines the name of the default database that Mongoid can connect to.
  # (required).
  database: disrupt_development
  # Provides the hosts the default session can connect to. Must be an array
  # of host:port pairs. (required)
  hosts:
    - localhost:27017
  options:
    # Change whether the session persists in safe mode by default.
    # (default: false)
    # safe: false

    # Change the default consistency model to :eventual or :strong.
    # :eventual will send reads to secondaries, :strong sends everything
    # to master. (default: :eventual)
    # consistency: :eventual

    # How many times Moped should attempt to retry an operation after
    # failure. (default: 30)
    # max_retries: 30

    # The time in seconds that Moped should wait before retrying an
    # operation on failure. (default: 1)
    # retry_interval: 1
  # Configure Mongoid specific options. (optional)
  options:
# Configuration for whether or not to allow access to fields that do
# not have a field definition on the model. (default: true)
# allow_dynamic_fields: true

# Enable the identity map, needed for eager loading. (default: false)
# identity_map_enabled: false

# Includes the root model name in json serialization. (default: false)
# include_root_in_json: false

# Include the _type field in serializaion. (default: false)
# include_type_for_serialization: false

# Preload all models in development, needed when models use
# inheritance. (default: false)
# preload_models: false

# Protect id and type from mass assignment. (default: true)
# protect_sensitive_fields: true

# Raise an error when performing a #find and the document is not found.
# (default: true)
# raise_not_found_error: true

# Raise an error when defining a scope with the same name as an
# existing method. (default: false)
# scope_overwrite_exception: false

# Skip the database version check, used when connecting to a db without
# admin access. (default: false)
# skip_version_check: false

# User Active Support's time zone in conversions. (default: true)
# use_activesupport_time_zone: true

# Ensure all times are UTC in the app side. (default: false)
# use_utc: false
test:
  sessions:
default:
  database: disrupt_test
  hosts:
    - localhost:27017
  options:
    consistency: :strong
    # In the test environment we lower the retries and retry interval to
    # low amounts for fast failures.
    max_retries: 1
    retry_interval: 0

production:
  sessions:
default:
  uri: <%= ENV['MONGOHQ_URL'] %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:43:18.350

您没有正确设置`uri`环境`production`（或其他）。

`yml`文件格式不知道您的顶级键之间的区别（它将默认：和生产：作为单独的键，因为它们没有嵌套）。

假设您在 Heroku 上使用 MongoHQ 3.x，请尝试更改...

```
production:
  sessions:
default:
  uri: <%= ENV['MONGOHQ_URL'] %> 
```

...至...

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %> 
```

[Heroku MongoHQ 文档](https://devcenter.heroku.com/articles/mongohq)应该有更多信息

# ajax - Windows 中 Safari 中进度事件的一个非常奇怪的案例

> ID：15875336
> 
> 赞同：2
> 
> 时间：2013-04-08T09:11:07.660
> 
> 标签：ajax, windows, events, upload, safari

野生动物园大师。我在 Windows 的 Safari 中遇到了一个非常奇怪的进度事件案例。

我提出了一个跨源请求，将文件上传到 S3，除了 Windows 中 Safari 中的进度事件之外，所有的工作都成功。

它在 Mac OS 中的正常工作方式：Safari、Chrome、Firefox 和 Windows Chrome、Firefox：

```
1\. Start upload
2\. The sequence of the progress events
3\. The end - readyState == 4 
```

它在 Windows(Vista) Safari 5.1.7 (7534.57.2) 中的工作原理

```
1\. Start upload
2\. All progress events firing in 1-2 seconds interval
3\. No events until the end of the upload (60 seconds)
4\. The end - readyState == 4 
```

文件上传成功。问题仅存在于事件中。

代码非常简单：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = Handler;
xhr.onabort = Handler;
xhr.onerror = Handler;
xhr.ontimeout = Handler;
xhr.upload.onprogress = Handler;
xhr.open('put', S3Url, true);
xhr.setRequestHeader(...Header...);
xhr.setRequestHeader(...Header...);
xhr.send(FileObject); 
```

怎么了 ？

# java - 如果在 java 类中找不到字段，则 jaxb 捕获异常

> ID：15875338
> 
> 赞同：1
> 
> 时间：2013-04-08T09:11:11.307
> 
> 标签：java, xml, xsd, jaxb

如果在 xml 文件中找到的字段及其属性未在 java 类中定义，我需要在 xml 解组到 java 类时捕获异常。我无法完全构建 xsd，其中不同的 xml 文件动态放大 xsd，其中有不同的标签。这就是为什么需要捕获指定的 exc，

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:21:02.130

默认情况下，如果遇到未映射的元素/属性，则[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会引发异常，除非默认值`ValidationEventHandler`已被覆盖或`Schema`已在`Unmarshaller`.

**Java 模型（根）**

```
package forum15875338;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Root {

    private String foo;

    public String getFoo() {
        return foo;
    }

    public void setFoo(String foo) {
        this.foo = foo;
    }

} 
```

**演示**

```
package forum15875338;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    private static final String XML = "<root><foo>Hello</foo><bar>World</bar></root>";

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        // Unmarshal #1 = Default Unmarshal
        System.out.println("Unmarshal #1");
        Root root = (Root) unmarshaller.unmarshal(new StringReader(XML));
        marshaller.marshal(root, System.out);

        // Unmarshal #2 - Override Default ValidationEventHandler
        System.out.println("Unmarshal #2");
        unmarshaller.setEventHandler(new ValidationEventHandler() {
            @Override
            public boolean handleEvent(ValidationEvent event) {
                System.out.println(event.getMessage());
                return false;
            }
        });
        unmarshaller.unmarshal(new StringReader(XML));
    }

} 
```

**输出**

```
Unmarshal #1
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <foo>Hello</foo>
</root>
Unmarshal #2
unexpected element (uri:"", local:"bar"). Expected elements are <{}foo>
Exception in thread "main" javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"bar"). Expected elements are <{}foo>
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:642)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:254)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:249)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:116)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.childElement(Loader.java:101)
    at com.sun.xml.bind.v2.runtime.unmarshaller.StructureLoader.childElement(StructureLoader.java:243)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:478)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:459)
    at com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:148)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:211)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:184)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:214)
    at forum15875338.Demo.main(Demo.java:31) 
```

# c# - Linq to EF 系统不支持异常 System.NotSupportedException

> ID：15875339
> 
> 赞同：2
> 
> 时间：2013-04-08T09:11:12.143
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

在这个 Linq 查询上摸不着头脑。它是实体框架。查询将转换为不同的模型对象。如果我注释或删除我指出导致错误的代码区域，则 linq 查询将起作用。但在我看来，我应该能够编写这样的查询而不会出现此错误：

**无法创建类型为“DomainModel.Model.CustomerAddress”的空常量值。此上下文仅支持实体类型、枚举类型或原始类型。**

谁能告诉我为什么我不能或更重要的是我需要改变什么才能让它工作？

谢谢

```
var orders = from o in _db.Orders
                          .Include("User")
                          .Include("OrderItems.Inventories.Product")
                          .Include("Transactions")
                          .Include("CustomerAddressBilling.Address")
                          .Include("CustomerAddressBilling.Customer")
                          .Include("CustomerAddressBilling.Contact")
                          .Include("CustomerAddressShipping.Address")
                          .Include("CustomerAddressShipping.Customer")
                          .Include("CustomerAddressShipping.Contact")
                          .Include("ShippingMethod")
                     // this works ok
                         let items = (o.OrderItems.Select(i => new Model.OrderItem
                         {
                             OrderItemId = i.OrderItemId,
                             OrderId = i.OrderId,
                             DateAdded = i.CreateDate,
                             LineItemPrice = i.Inventories.Sum(ii => ii.Product.Price),
                             Product = i.Inventories.FirstOrDefault().Product,
                             Quantity = i.Inventories.Count()
                         }))
                     // this works ok
                     let transactions = (o.Transactions.Select(t => new Model.Transaction
                         {
                             Id = t.TransactionId,
                             OrderId = t.OrderId,
                             Amount = t.Amount,
                             AuthorizationCode = t.AuthorizationCode,
                             DateExecuted = t.TransactionDate,
                             Notes = t.Notes,
                             Processor = (Model.TransactionProcessor)t.ProcessorId
                         }))
                     // this causes the error
                     let cab = o.CustAddBillingId.HasValue ? (new Model.CustomerAddress
                         {
                             Id = o.CustomerAddressBilling.CustAddId,
                             UserName = o.User.UserName,
                             FirstName = o.CustomerAddressBilling.Customer.FirstName,
                             LastName = o.CustomerAddressBilling.Customer.LastName,
                             MiddleInitial = o.CustomerAddressBilling.Customer.MiddleName,
                             Salutation = o.CustomerAddressBilling.Customer.Salutation,
                             Suffix = o.CustomerAddressBilling.Customer.Suffix,
                             Street1 = o.CustomerAddressBilling.Address.Line1,
                             Street2 = o.CustomerAddressBilling.Address.Line2,
                             Street3 = o.CustomerAddressBilling.Address.Line3,
                             City = o.CustomerAddressBilling.Address.City,
                             StateOrProvince = o.CustomerAddressBilling.Address.State,
                             Zip = o.CustomerAddressBilling.Address.PostalCode,
                             Country = o.CustomerAddressBilling.Address.Country,
                             Latitude = o.CustomerAddressBilling.Address.Lat,
                             Longitude = o.CustomerAddressBilling.Address.Long,
                             Email = o.CustomerAddressBilling.Contact.ContactInfo,
                             IsDefault = o.CustomerAddressBilling.IsPrimary
                         }) : default(Model.CustomerAddress)
                     // this causes the error
                     let cas = o.CustAddShippingId.HasValue ? (new Model.CustomerAddress
                         {
                             Id = o.CustomerAddressShipping.CustAddId,
                             UserName = o.User.UserName,
                             FirstName = o.CustomerAddressShipping.Customer.FirstName,
                             LastName = o.CustomerAddressShipping.Customer.LastName,
                             MiddleInitial = o.CustomerAddressShipping.Customer.MiddleName,
                             Salutation = o.CustomerAddressShipping.Customer.Salutation,
                             Suffix = o.CustomerAddressShipping.Customer.Suffix,
                             Street1 = o.CustomerAddressShipping.Address.Line1,
                             Street2 = o.CustomerAddressShipping.Address.Line2,
                             Street3 = o.CustomerAddressShipping.Address.Line3,
                             City = o.CustomerAddressShipping.Address.City,
                             StateOrProvince = o.CustomerAddressShipping.Address.State,
                             Zip = o.CustomerAddressShipping.Address.PostalCode,
                             Country = o.CustomerAddressShipping.Address.Country,
                             Latitude = o.CustomerAddressShipping.Address.Lat,
                             Longitude = o.CustomerAddressShipping.Address.Long,
                             Email = o.CustomerAddressShipping.Contact.ContactInfo,
                             IsDefault = o.CustomerAddressShipping.IsPrimary
                         }) : default(Model.CustomerAddress)
                     // this causes the error
                     let sm = o.ShippingMethodId.HasValue ? (new ShippingMethod
                             {
                                 Id = o.ShippingMethod.ShippingMethodId,
                                 Carrier = o.ShippingMethod.Carrier,
                                 ServiceName = o.ShippingMethod.ServiceName,
                                 BaseRate = o.ShippingMethod.BaseRate,
                                 RatePerPound = o.ShippingMethod.RatePerPound,
                                 DaysToDeliver = o.ShippingMethod.DaysToDeliver,
                                 EstimatedDelivery = o.ShippingMethod.EstimatedDelivery
                             }) : default(ShippingMethod)
                     select new Model.Order
                         {
                             Id = o.OrderId,
                             UserName = o.User.UserName,
                             DateCreated = o.CreateDate,
                             Items = items.AsQueryable(),
                             Transactions = transactions.AsQueryable(),
                             ShippingAddressId = o.CustAddShippingId,
                             BillingAddressId = o.CustAddBillingId,
                             // have to comment these next 3 lines as well
                             ShippingAddress = cas,
                             BillingAddress = cab,
                             ShippingMethod = sm,
                             // to here
                             UserLanguageCode = "en",
                             DateShipped = o.ShippedDate,
                             EstimatedDelivery = o.EstimatedDelivery,
                             TrackingNumber = o.TrackingNumber,
                             TaxAmount = o.TaxAmount,
                             DiscountReason = o.DiscountReason,
                             DiscountAmount = o.DiscountAmount
                         }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:31:27.090

好的，我已经想通了。问题是数据库允许对这些相关实体使用 null forien 键，我更改了数据库，因此 forien 键不可为空，并从数据库中更新了模型。我创建了代表非ShippingMethods 电子和面对面的新数据实体，并且还拥有面对面的CustomerAddress，因此我可以拥有指向数据的链接，这些数据不仅代表我没有数据，而且代表我没有的原因数据。

```
 public IQueryable<Model.Order> GetOrders()
    {
        var orders = from o in _db.Orders
                                  .Include("User")
                                  .Include("OrderItems.Inventories.Product")
                                  .Include("Transactions")
                                  .Include("CustomerAddressBilling.Address")
                                  .Include("CustomerAddressBilling.Customer")
                                  .Include("CustomerAddressBilling.Contact")
                                  .Include("CustomerAddressShipping.Address")
                                  .Include("CustomerAddressShipping.Customer")
                                  .Include("CustomerAddressShipping.Contact")
                                  .Include("ShippingMethod")
                     let items = (o.OrderItems.Select(i => new Model.OrderItem
                         {
                             OrderItemId = i.OrderItemId,
                             OrderId = i.OrderId,
                             DateAdded = i.CreateDate,
                             LineItemPrice = i.Inventories.Sum(ii => ii.Product.Price),
                             Product = i.Inventories.FirstOrDefault().Product,
                             Quantity = i.Inventories.Count()
                         }))
                     let transactions = (o.Transactions.Select(t => new Model.Transaction
                         {
                             Id = t.TransactionId,
                             OrderId = t.OrderId,
                             Amount = t.Amount,
                             AuthorizationCode = t.AuthorizationCode,
                             DateExecuted = t.TransactionDate,
                             Notes = t.Notes,
                             Processor = (Model.TransactionProcessor)t.ProcessorId
                         }))
                     let cab = new Model.CustomerAddress
                         {
                             Id = o.CustomerAddressBilling.CustAddId,
                             UserName = o.User.UserName,
                             FirstName = o.CustomerAddressBilling.Customer.FirstName,
                             LastName = o.CustomerAddressBilling.Customer.LastName,
                             MiddleInitial = o.CustomerAddressBilling.Customer.MiddleName,
                             Salutation = o.CustomerAddressBilling.Customer.Salutation,
                             Suffix = o.CustomerAddressBilling.Customer.Suffix,
                             Street1 = o.CustomerAddressBilling.Address.Line1,
                             Street2 = o.CustomerAddressBilling.Address.Line2,
                             Street3 = o.CustomerAddressBilling.Address.Line3,
                             City = o.CustomerAddressBilling.Address.City,
                             StateOrProvince = o.CustomerAddressBilling.Address.State,
                             Zip = o.CustomerAddressBilling.Address.PostalCode,
                             Country = o.CustomerAddressBilling.Address.Country,
                             Latitude = o.CustomerAddressBilling.Address.Lat,
                             Longitude = o.CustomerAddressBilling.Address.Long,
                             Email = o.CustomerAddressBilling.Contact.ContactInfo,
                             IsDefault = o.CustomerAddressBilling.IsPrimary
                         }
                     let cas = new Model.CustomerAddress
                         {
                             Id = o.CustomerAddressShipping.CustAddId,
                             UserName = o.User.UserName,
                             FirstName = o.CustomerAddressShipping.Customer.FirstName,
                             LastName = o.CustomerAddressShipping.Customer.LastName,
                             MiddleInitial = o.CustomerAddressShipping.Customer.MiddleName,
                             Salutation = o.CustomerAddressShipping.Customer.Salutation,
                             Suffix = o.CustomerAddressShipping.Customer.Suffix,
                             Street1 = o.CustomerAddressShipping.Address.Line1,
                             Street2 = o.CustomerAddressShipping.Address.Line2,
                             Street3 = o.CustomerAddressShipping.Address.Line3,
                             City = o.CustomerAddressShipping.Address.City,
                             StateOrProvince = o.CustomerAddressShipping.Address.State,
                             Zip = o.CustomerAddressShipping.Address.PostalCode,
                             Country = o.CustomerAddressShipping.Address.Country,
                             Latitude = o.CustomerAddressShipping.Address.Lat,
                             Longitude = o.CustomerAddressShipping.Address.Long,
                             Email = o.CustomerAddressShipping.Contact.ContactInfo,
                             IsDefault = o.CustomerAddressShipping.IsPrimary
                         }
                     let sm = new ShippingMethod
                        {
                            Id = o.ShippingMethod.ShippingMethodId,
                            Carrier = o.ShippingMethod.Carrier,
                            ServiceName = o.ShippingMethod.ServiceName,
                            BaseRate = o.ShippingMethod.BaseRate,
                            RatePerPound = o.ShippingMethod.RatePerPound,
                            DaysToDeliver = o.ShippingMethod.DaysToDeliver,
                            EstimatedDelivery = o.ShippingMethod.EstimatedDelivery
                        }
                     select new Model.Order
                         {
                             Id = o.OrderId,
                             UserName = o.User.UserName,
                             DateCreated = o.CreateDate,
                             Items = items.AsQueryable(),
                             Transactions = transactions.AsQueryable(),
                             ShippingAddressId = o.CustAddShippingId,
                             BillingAddressId = o.CustAddBillingId,
                             ShippingAddress = cas,
                             BillingAddress = cab,
                             ShippingMethod = sm,
                             UserLanguageCode = "en",
                             DateShipped = o.ShippedDate,
                             EstimatedDelivery = o.EstimatedDelivery,
                             TrackingNumber = o.TrackingNumber,
                             TaxAmount = o.TaxAmount,
                             DiscountReason = o.DiscountReason,
                             DiscountAmount = o.DiscountAmount
                         };
        return orders;
    } 
```

而且没有错误！

# jsf-2 - 如何使用 ui:repeat 遍历子列表？

> ID：15875342
> 
> 赞同：1
> 
> 时间：2013-04-08T09:11:20.200
> 
> 标签：jsf-2

我正在迁移一段如下所示的遗留代码：

```
<c:forEach items="#{sel}" var="crit" end="12">
  <tr>
    <td class="criteriaName">
      <c:set var="tip" value="#{Factory.makeTooltip(crit.string)}" />

      <c:if test="#{0 != fn:length(tip)}">
        <a:outputPanel layout="block">
          <h:outputText value="#{crit.kriterium}" styleClass="tooltipAvailable"/>
            <rich:tooltip layout="block">
              <h:outputText escape="false" value="#{tip}" />
            </rich:tooltip>
         </a:outputPanel>
       </c:if>

       <c:if test="#{0 == fn:length(tip)}">
         <h:outputText value="#{crit.kriterium}" />
       </c:if>
     </td>
  </tr>
</c:forEach> 
```

现在我正在寻找替换`<c:if>`并`<c:forEach>`与他们`<ui:fragment>`和`<ui:repeat>`同行。问题是，我需要迭代`sel`两次：一次从 0 到 12，然后从 13 到结束。

我还没有找到一种方法来拆分列表迭代，就像`end`foreach 标记的属性那样。我真的很想避免在后端拆分列表，因为这是一个纯粹的视图问题，应该在那里处理。

所以问题是：我可以按照我指定的方式替换上面的片段吗？有哪些替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:32:08.843

如果您使用的是 EL 2.2，则可以调用普通的 java 方法。

假设这`sel`是一个`List`here，你可以使用

```
<ui:repeat var="crit" value="#{sel.subList(0,12)}"> 
```

并非如此，`ui:repeat`并且`c:forEach`并不总是可互换的，因此请确保您的用例有效。

# asp.net-mvc - 在 Kendo UI 网格中显示外来数据

> ID：15875344
> 
> 赞同：2
> 
> 时间：2013-04-08T09:11:27.840
> 
> 标签：asp.net-mvc, entity-framework, kendo-ui, kendo-grid

使用 Kendo UI 获得了 MVC4，Entity Framework 数据库的第一个项目。

我在网格中显示的模型如下所示：

```
public partial class RuleEntry
{
    public RuleEntry()
    {
        this.RuleEntriesCases = new HashSet<RuleEntriesCas>();
    }
    [Key]
    public int ID { get; set; }
    public string Country { get; set; }
    public Nullable<int> Family { get; set; }
    public Nullable<int> IP { get; set; }
    public string RuleKey { get; set; }
    public Nullable<int> Status { get; set; }
    public string Title { get; set; }

    public virtual Country Country1 { get; set; }
    public virtual Family Family1 { get; set; }
    public virtual IP IP1 { get; set; }
    public virtual RuleStatus RuleStatus { get; set; }
    public virtual ICollection<RuleEntriesCas> RuleEntriesCases { get; set; }
} 
```

属性 Country 可以是“SE”并且是包含名称“Sweden”的表“Country”的外键。Country 模型如下所示：

```
public partial class Country
{
    public Country()
    {
        this.RuleEntries = new HashSet<RuleEntry>();
    }
    [Key]
    public string Code { get; set; }
    public string Name { get; set; }

    public virtual ICollection<RuleEntry> RuleEntries { get; set; }

} 
```

我想要一个包含所有 RuleEntry 数据但具有相应外键名称的网格，目前只有键显示。我的网格代码如下：

```
@(Html.Kendo().Grid(Model)    
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.Country);
    columns.Bound(p => p.Family);
    columns.Bound(p => p.IP);
    columns.Bound(p => p.RuleKey);
    columns.Bound(p => p.Status);
    columns.Bound(p => p.Title);

})
.Groupable()
.Sortable()
.Scrollable(s => s.Height("auto"))
.Filterable()
.ColumnMenu()) 
```

我该怎么做？在模型、控制器或视图中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:51:18.270

在 RuleEntry 类中，为 Country1 添加 ForeignKey 属性，如下所示：

```
[ForeignKey("Country")]
public virtual Country Country1 { get; set; } 
```

在您的网格中，使用`columns.Bound(p => p.Country1.Name);`

# asp.net-mvc-3 - 将电子表格嵌入 ASP.NET MVC 3 页面

> ID：15875346
> 
> 赞同：2
> 
> 时间：2013-04-08T09:11:30.333
> 
> 标签：asp.net-mvc-3, excel, graph

我有一个项目即将推出，但我不确定要使用什么技术。我正在向一个 Web 应用程序添加功能，该应用程序显示我们公司网站的用户统计信息。例如日志记录和页面访问次数。

我想做的是以某种方式将电子表格嵌入到页面中，并选择连接到数据的图表。我的理由是页面上的电子表格是动态的，他们可以过滤数据并显示几个图表之一。

如果用户可以将数据导出到excel，那将是一件好事。这并不难，因为我可以在他们发布到服务器时构建它。

总而言之，我试图

*   在 MVC 3 中创建一个电子表格控件。这与一个图表有关，当电子表格被过滤时它会改变。
*   它可以是 JS 库或 C#
*   应该能够将数据导出到excel

任何人都有这样做的好方法的建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:23:18.293

你在做什么：[Excel 交互式视图](http://www.excelmashup.com/)。这很好，因为您只在您的网站上创建简单的表格。其余由微软完成 :) 我在两个项目中都使用了这个，用户很高兴，因为他们像使用 excel 一样使用它，他们可以轻松下载修改后的 excel。

# grid - 网格的基础设施活动行中的空引用

> ID：15875347
> 
> 赞同：0
> 
> 时间：2013-04-08T09:11:33.307
> 
> 标签：grid, infragistics

我正在使用 Infragistics 网格控件。为什么下面的代码会抛出空引用异常。

```
foreach (UltraGridRow row in grdDemo.Rows)
{
DemoList objDemoList = row.ListObject as DemoList; 
} 
```

在 google 中找到以下行，但我不知道何时以及为什么会出现此异常。 **从控件绑定到的 IList 返回与该行对应的对象。如果这是 UltraGridGroupByRow，则返回 Null。**

# expand - 扩展请求参数不适用于事件 API 调用

> ID：15875348
> 
> 赞同：1
> 
> 时间：2013-04-08T09:11:36.250
> 
> 标签：expand, stripe-payments

我一直在为 Charges API 调用使用 Expand 参数，它工作正常。

但是当我将 Expand 参数与事件调用一起使用时，它给出了错误。我想扩展`Invoice`ID 对象。

以下是网址：

```
https://api.stripe.com/v1/events?type=charge.*&count=100&expand[]=data.invoice' 
```

以下是错误消息：

```
[type] => invalid_request_error
[message] => This property cannot be expanded (data.invoice). 
```

我也试图改变价值`invoice`，`data.data.invoice`但没有成功。

我怎样才能让它工作？我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:44:54.863

Event objects can't be expanded, so you'll need to retrieve those invoices individually.

# asp.net-mvc - MVC 路由：创建子文件夹

> ID：15875350
> 
> 赞同：1
> 
> 时间：2013-04-08T09:11:43.500
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

在我目前的项目中，我有很多客户的事情正在进行，所以我想相应地组织它。

我希望我的控制器如下所示：

```
/Controllers/Customer/CustomerController.cs
/Controllers/Customer/CustomerResourceController.cs
/Controllers/Customer/CustomerDataFieldController.cs 
```

我的观点看起来像这样：

```
/Views/Customer/Customer/Index.cshtml
/Views/Customer/CustomerResource/Index.cshtml
/Views/Customer/CustomerDataField/Index.cshtml 
```

我不确定要映射这个，我在这行中尝试了一些东西：

```
 routes.MapRoute(
            "customer_routing",
            "Customer/{controller}",
            new { controller = "Customer", action = "Index" } // Parameter defaults
        ); 
```

哪个让我的控制器正确（我认为），但我如何正确映射我的视图？

谢谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:51:38.867

我认为对您来说一个好方法是使用区域， http: [//msdn.microsoft.com/en-us/library/ee671793 (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.98%29.aspx)

# linq - 如何在silverlight中使用LINQ编写like子句

> ID：15875355
> 
> 赞同：0
> 
> 时间：2013-04-08T09:11:57.620
> 
> 标签：linq, silverlight-5.0, sql-like

在我的项目中，我想对单元列表执行搜索操作。我有`ObservableCollection<Unit> UnitList`其中包含使用 WCF 服务从 SQL Server 2008 获取的数据。我可以在 SQL Server 中使用 SQL Like 进行搜索，但为此我必须再次调用服务，这会妨碍性能。

为了解决这个问题，我现在尝试使用 LINQ 根据已获取的 ObservableCollection 上的搜索参数过滤数据。我写了以下查询：

```
 var result = from u in UnitList
                         where u.UnitNo.Contains(this.UnitNo)
                         && u.ParcelName.Contains(this.ParcelName)
                         && u.TransformationType.Contains(this.TransformationType)
                         && u.TenantName.Contains(this.TenantName)
                         && u.UnitType.Contains(this.UnitType)
                         && u.ClientContact.Contains(this.ClientContact)
                         select u; 
```

但它只有在所有参数都匹配时才返回值。在 SQL Server 中，我使用 like '%%' 来解决
这个问题。如何在 LINQ 中编写它。

编辑：我`SQLMethods.Like`在 SO 的一个解决方案中找到了方法，但我无法在我的项目中使用这种方法。我需要为此添加任何参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:59:31.773

也许你是安装了不区分大小写参数的 sql server。“包含”区分大小写。只需在您的字符串上使用 ToUpper 或 ToLower 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:48:22.613

你可以使用：

```
List<Units> listUnits = UnitList.Where(d => d.UnitNo == this.UnitNo 
  && d.ParcelName == this.ParcelName 
  && d.TransformationType == this.TransformationType 
  && d.TenantName == this.TenantName 
  && d.UnitType == this.UnitType 
  && d.ClientContact == this.ClientContact ).Tolist(); 
```

这样，您将在 listUnits 中放入 UnitList 中具有您的参数的所有单位。

有关 Linq 的更多信息，请查看：

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# c++ - asio::io_service::strand 的正确用法？

> ID：15875359
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:03.230
> 
> 标签：c++, boost-asio

这是我的代码：

```
void client_connection::serve()
{
    asio::async_read(this->socket_, asio::buffer(&buffer_, buffer_.size()),

        // predicate/condition (do I wrap this?)
        std::bind(&client_connection::handle_read_predicate, this->shared_from_this(), std::placeholders::_1, std::placeholders::_2),

        // handler
        this->strand_.wrap(std::bind(&client_connection::handle_read, this->shared_from_this(), std::placeholders::_1, std::placeholders::_2)));
}

std::size_t client_connection::handle_read_predicate(const asio::error_code& error, std::size_t bytes_)
{
    // useless flawed function, for now

    // std::cout << "test: reached predicate, " << bytes_ << std::endl;

    return 0;
}

void client_connection::handle_read(const asio::error_code& error_, std::size_t bytes_)
{
    // useless flawed function, for now

    if (error_) return;

    this->serve();
} 
```

我的问题是是否正确使用 asio::io_service::strand 来用相同的 strand_ 对象包装谓词/条件处理程序；如果是，为什么，如果不是，请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:11:37.813

无需将其包裹在绳索中。

根据记录的[链](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/strands.html)，对于组合操作（例如`async_read`自由函数），所有中间处理程序都在处理程序的链中调用。这样做的副作用是所有的中间调用`CompletionCondition`也是从链中调用的。

但是，请确保`client_connection::serve()`在启动异步循环时在一个链中调度初始调用，因为初始`CompletionCondition`和异步读取套接字操作发生在调用者的上下文中。例如，在下图中，所有对 、 和 的调用都`socket.async_read()`将`client_connection::handle_read_predicate()`发生`client_connection::handle_read()`在链中：

```
void client_connection::start()
{
  strand_.dispatch(std::bind(&client_connection::serve,
                             shared_from_this())) --------.
}                                                         |
    .-----------------------------------------------------'
    |  .--------------------------------------------------.
    V  V                                                  |
void client_connection::serve()                           |
{                                                         |
  async_read(socket_, buffer,                             |
    std::bind(&client_connection::handle_read_predicate,  |
              this),                                      |
    strand_.wrap(                                         |
      std::bind(&client_connection::handle_read,          |
                shared_from_this())); --.                 |
}                                       |                 |
    .-----------------------------------'                 |
    V                                                     |
void client_connection::handle_read(...)                  |
{                                                         |
  if (error) return;                                      |
  serve();  ----------------------------------------------'
} 
```

# r - R重塑到可比长

> ID：15875363
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:17.943
> 
> 标签：r, casting, reshape, reshape2

我有一个矩阵 x

```
 A  B  C  D
1 11 12 13 14
2 21 22 23 24
3 31 32 33 34
4 41 42 43 44
5 51 52 53 54 
```

和两个投票者

```
 [,1] [,2]
[1,] "A"  "B" 
[2,] "A"  "C" 
[3,] "A"  "D" 
[4,] "B"  "C" 
[5,] "B"  "D" 
[6,] "C"  "D" 
```

我想要得到的是以下

```
Asset1 Asset2 Time Value1 Value2
A   B   1   11  12
A   B   2   21  22
A   B   3   31  32
A   B   4   41  42
A   B   5   51  52
A   C   1   11  13
A   C   2   21  23
A   C   3   31  33
A   C   4   41  43
A   C   5   51  53
A   D   1   11  14
A   D   2   21  24
A   D   3   31  34
A   D   4   41  44
A   D   5   51  54
… 
```

这是一个情节，我想要两种资产的每一种组合。不幸的是，我无法更改此表单的任何内容。

我试图用 reshape 包得到这个结果，但我无法解决这个问题。

这里还有一段获取初始矩阵的代码：

```
x <- matrix(c(11,12,13,14, 21,22,23,24 ,31,32,33,34, 41,42,43,44, 51,52,53,54), ncol=4, nrow=5, byrow=T)
colnames(x) <- c("A", "B", "C", "D")
rownames(x) <- 1:5
c <- matrix(c("A","B", "A","C", "A","D", "B", "C", "B", "D", "C", "D"), ncol=2, byrow=T) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:58:18.683

也许使用矩阵索引的东西会更直观。

```
# set up output matrix
out <- as.data.frame(t(combn(colnames(x), 2)), stringsAsFactors=FALSE)
names(out) <- paste0("Asset", 1:2)
out <- cbind(out[rep(1:nrow(x), each=nrow(out)),], Time=rep(1:nrow(x), nrow(out)))
rownames(out) <- NULL

# now fill it in with matrix indexing
out$Value1 <- x[cbind(out$Time, out$Asset1)]
out$Value2 <- x[cbind(out$Time, out$Asset2)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:30:19.023

如果我是正确的，你可以只用 1 个命令来做到这一点：

```
merge(x,c) 
```

这会产生以下结果：

```
 A  B  C  D V1 V2
1  11 12 13 14  A  B
2  21 22 23 24  A  B
3  31 32 33 34  A  B
4  41 42 43 44  A  B
5  51 52 53 54  A  B
6  11 12 13 14  A  C
7  21 22 23 24  A  C
8  31 32 33 34  A  C
9  41 42 43 44  A  C
10 51 52 53 54  A  C
11 11 12 13 14  A  D
12 21 22 23 24  A  D
13 31 32 33 34  A  D
14 41 42 43 44  A  D
15 51 52 53 54  A  D
16 11 12 13 14  B  C
17 21 22 23 24  B  C
18 31 32 33 34  B  C
19 41 42 43 44  B  C
20 51 52 53 54  B  C
21 11 12 13 14  B  D
22 21 22 23 24  B  D
23 31 32 33 34  B  D
24 41 42 43 44  B  D
25 51 52 53 54  B  D
26 11 12 13 14  C  D
27 21 22 23 24  C  D
28 31 32 33 34  C  D
29 41 42 43 44  C  D
30 51 52 53 54  C  D 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:38:00.453

我假设您的第一个数据是`data.frame`. 而且我不需要第二个矩阵/数据。这是我现在能想到的：

```
m <- as.data.frame(m) # convert named matrix to data.frame
do.call(rbind, lapply(as.data.frame(combn(names(m), 2)), 
               function(x) cbind(id1=rep(x[1], 5), 
               id2=rep(x[2], 5), time=1:5, setNames(m[,as.character(x)], 
               c("value1", "value2")))))

#      id1 id2 time value1 value2
# V1.1   A   B    1     11     12
# V1.2   A   B    2     21     22
# V1.3   A   B    3     31     32
# V1.4   A   B    4     41     42
# V1.5   A   B    5     51     52
# V2.1   A   C    1     11     13
# V2.2   A   C    2     21     23
# V2.3   A   C    3     31     33
# V2.4   A   C    4     41     43
# V2.5   A   C    5     51     53
# V3.1   A   D    1     11     14
# V3.2   A   D    2     21     24
# V3.3   A   D    3     31     34
# V3.4   A   D    4     41     44
# V3.5   A   D    5     51     54
# V4.1   B   C    1     12     13
# V4.2   B   C    2     22     23
# V4.3   B   C    3     32     33
# V4.4   B   C    4     42     43
# V4.5   B   C    5     52     53
# V5.1   B   D    1     12     14
# V5.2   B   D    2     22     24
# V5.3   B   D    3     32     34
# V5.4   B   D    4     42     44
# V5.5   B   D    5     52     54
# V6.1   C   D    1     13     14
# V6.2   C   D    2     23     24
# V6.3   C   D    3     33     34
# V6.4   C   D    4     43     44
# V6.5   C   D    5     53     54 
```

# sitecore - Sitecore - 标题作为项目名称

> ID：15875364
> 
> 赞同：1
> 
> 时间：2013-04-08T09:12:19.497
> 
> 标签：sitecore, sitecore6

我们使用自定义用户界面通过 Sitecore API 以编程方式存储 Sitecore 项目。

由于 Sitecore 不允许有重复的名称，并且 Sitecore 不允许某些字符包含在项目名称中，我们决定将时钟滴答作为项目名称存储。但这对内容编辑器来说不是用户友好的。这些 URL 也不是搜索引擎优化的（因为它不是人类可读的）。

解决此问题的推荐方法是什么？如果我们要将项目的“标题”存储为项目名称，我们如何处理重复名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:16:10.783

您应该`DisplayName`用于将其标题和经过清理的版本存储为`Name`

```
string title = "Name with $tr@nge characters!";

// remove incorrect characters and add postfix if necessary to make it unique
string itemName = Sitecore.Data.Items.ItemUtil.GetUniqueName(parentItem, 
    Sitecore.Data.Items.ItemUtil.ProposeValidItemName(title));

Item item = parentItem.Add(itemName, template);

using (new EditContext(item))
{
    item.Fields[FieldIDs.DisplayName].Value = title;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/B1sd1.jpg)

# php - 每个的 SOAP 请求 StdClass

> ID：15875365
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:20.697
> 
> 标签：php, soap

我正在处理一个肥皂请求结果，但我被困在这个结果上，因为它返回的结果超过 1 个。

该请求基本上返回我的邮政编码半径为 20 英里的车库列表。

谁能帮我吗？

这是我回来的结果：

```
stdClass Object
(
[SupplierDirectorySearchResult] => stdClass Object
    (
        [Status] => stdClass Object
            (
                [Code] => 0
                [Desc] => 
            )

        [SupplierCount] => 5
        [PageInfo] => stdClass Object
            (
                [PageNo] => 1
                [RowsPerPage] => 5
                [MaxPages] => 1
                [MaxRows] => 0
                [TotalRows] => 5
            )

        [Supplier] => Array
            (
                [0] => stdClass Object
                    (
                        [SiteRef] => AAAAA
                        [AccountRef] => 
                        [Name] => AAAAA AAAAA
                        [Address] => AAAAA AAAAA AAAAA
                                    AAAAA AAAAA
                                    AAAAA AAAAA AAAAA
                                    AAAAA
                                    AAAAA
                                    AAAAA
                                    AAAAA AAAAA
                        [Postcode] => AAAAA AAAAA
                        [Telephone] => AAAAA
                        [Fax] => AAAAA
                        [Email] => 
                        [InclusiveServices] => 
                        [ApprovedServices] => stdClass Object
                            (
                                [ServiceRepair] => Y
                                [MOT] => Y
                                [Tyres] => Y
                                [CollectionDelivery] => Y
                                [CourtesyCar] => Y
                                [WhileUWait] => 
                                [Callout24Hour] => Y
                                [BreakdownCover] => Y
                                [CollectionDeliveryNotes] => 
                                [CourtesyCarNotes] => 
                                [Inspections] => Y
                            )

                        [NextAvailableDate] => 2013-04-15T00:00:00
                        [AutomaticAcceptDate] => 2013-04-15T10:02:25.9664528+01:00
                        [NextAvailableDateStd] => 2013-04-15T00:00:00
                        [NextAvailableDateCandD] => 2013-04-15T00:00:00
                        [NextAvailableDateCCar] => 2013-04-15T00:00:00
                        [DistanceFromPostcode] => 3
                        [GridN] => 43327
                        [GridE] => 37842
                        [OpeningTime] => Array
                            (
                                [0] => stdClass Object
                                    (
                                        [Day] => 1
                                        [TimeFrom] => 10:00
                                        [TimeTo] => 16:00
                                    )

                                [1] => stdClass Object
                                    (
                                        [Day] => 2
                                        [TimeFrom] => 08:00
                                        [TimeTo] => 18:00
                                    )

                                [2] => stdClass Object
                                    (
                                        [Day] => 3
                                        [TimeFrom] => 08:00
                                        [TimeTo] => 18:00
                                    )

                                [3] => stdClass Object
                                    (
                                        [Day] => 4
                                        [TimeFrom] => 08:00
                                        [TimeTo] => 18:00
                                    )

                                [4] => stdClass Object
                                    (
                                        [Day] => 5
                                        [TimeFrom] => 08:00
                                        [TimeTo] => 18:00
                                    )

                                [5] => stdClass Object
                                    (
                                        [Day] => 6
                                        [TimeFrom] => 08:00
                                        [TimeTo] => 18:00
                                    )

                                [6] => stdClass Object
                                    (
                                        [Day] => 7
                                        [TimeFrom] => 10:00
                                        [TimeTo] => 16:00
                                    )

                            )

                        [FranchiseHeld] => stdClass Object
                            (
                                [Name] => Non-Franchised
                                [LabourRate] => 0
                                [PartsDiscount] => 0
                                [Preference] => P
                            )

                        [CSIPercentageRating] => 0
                        [Longitude] => -AAAAA9
                        [Latitude] => AAAAA
                        [StreetName] => AAAAA AAAAA
                        [LocalityName] => AAAAA
                        [TownName] => AAAAA
                        [CountyName] => AAAAA
                        [edeWebLinkURL] => 
                        [edeStrapLine] => 
                        [DropOffNotes] => 
                    )

                    )

            )

        [ClassVersion] => 1.0
    ) 
```

)

这是我用来尝试访问每个 SiteRef 的脚本：

```
foreach ($res->SupplierDirectorySearchResult->Supplier[0]->SiteRef as $SiteRef) {
  echo $SiteRef;
} 
```

但这是我收到的错误消息：

**类 stdClass 的对象无法转换为字符串**

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:30:48.193

通过尝试循环`Supplier[0]->SiteRef`，您实际上是在尝试对字符串执行 foreach。您需要在每次迭代时循环`Supplier`并访问，因为可以循环的数组是：`SiteRef``Supplier`

```
foreach ($res->SupplierDirectorySearchResult->Supplier as $supplier) {
  echo $supplier->SiteRef;
} 
```

# linux - 从 CLI 和浏览器运行 PHP 代码给出不同的结果

> ID：15875369
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:25.727
> 
> 标签：linux, flickr, php

我陷入了一个奇怪的境地，我有一个从 flickr 获取专辑的代码。`test.php`

> `http://example.com/cron/test.php?uid=613`

```
 $f->setToken($user_token);
    $all_album_list =   $f->photosets_getList($user_flickr_id);
    print_r("Total Albums".sizeof($all_album_list['photoset'])); 
```

当我在浏览器中点击它时，它显示我有 43 张专辑，第一张专辑名称是`66 / part 3`

并在 s3 上创建对象，名称为`66 / part 3`

但是当我在shell上运行时

```
#php -q /var/www/web1/test.php 
```

当我点击此代码运行良好时，它显示我有 39 张专辑，第一张专辑的名称是 66，而我没有名称为 66 的专辑，CLI 和浏览器的结果有所不同，

运行`php -q`结果是不同的，但是当我在 CLI 上运行时`Wget` ，结果是准确的并且与浏览器相同。

这个问题的原因可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:42:34.853

检查您的脚本权限问题，它是否与 Web 浏览器相同，并使用 PHP -v 从命令行检查您的 PHP 版本，也使用 phpinfo() 方法从浏览器检查您的 PHP 版本，如果您有不同的版本，这可能是原因。

# java - 圈复杂度指标

> ID：15875370
> 
> 赞同：-2
> 
> 时间：2013-04-08T09:12:26.400
> 
> 标签：java

我想知道使用 LOC 和圈复杂度指标是否可以得出任何关于以下两个代码的相对复杂性的结论？有点让我头疼。

代码 A

```
 int i = 1;
    while(i < = 5){

    playACard(i);

    if (playerHasWon(i))
    break;
    i++
    } 
```

代码 B

```
int j = 0;

int i = 2;

j = i;
j = j + i;

j++;
System.out.println (j);

System.out.println 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:23:09.070

Using advanced LOC tools (i.e. my eyes and fingers :-) ) I calculate the LOC counts for the two pieces of code are the same ... ignoring blank lines.

For a cyclometric complexity count, you need parseable source code ... in some programming language ... for tools to work. I defer to @d'alar'cop 's answer for a hand calculation and the explanation of how he arrived at it.

* * *

But to be honest, LOC and Cyclometric Complexity measures for code like this is not helpful. The two samples do completely different things, so it really makes little difference which is more "complex".

To my mind, CC is only really useful for identifying excessively complex code in a first-pass review of a codebase. Once you've identified the problem *areas*, an experienced programmer is a better judge of real complexity (i.e. the kind of stuff that makes the code hard to understand) ... and whether that complexity is necessary / inherent in the problem at hand.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:22:05.347

代码 B 的圈复杂度为 1。代码中*只有*1 条可能的路径。

圈复杂度衡量可能的执行路径的数量（这在软件系统的测试和大小估计中很有用。） - 但大多数人会说它对后者不准确或有用。

代码 A 的圈复杂度为 4。因为代码可以进入或不进入循环（与离开循环相同）（2 条可能的路径），并且有一个“if 语句”再次将可能性乘以 2。

干杯。

还需要什么解释吗？

# java - OpenFaces inputTextFilter 无法正常工作

> ID：15875371
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:27.157
> 
> 标签：java, ajax, jsf, datatable, openfaces

嗨，我`datatable`使用 OpenFaces 3.0 创建了这个库，它很棒，但我有一个问题。

我有一栏

```
 <o:column header="Symbol" id="symbolCol1"
            sortingExpression="#{p.product.symbol}">
            <f:facet name="subHeader">
                <o:inputTextFilter autoFilterDelay="1000" autocomplete="true"/>
            </f:facet>
            <h:inputText value="#{p.product.symbol}" rendered="#{p.editable}"
                style="border: 1px solid #CC3333; font-size: 11px;" />
            <h:outputText value="#{p.product.symbol}"
                rendered="#{not p.editable}" />
        </o:column> 
```

问题是输入错误的表达式后其他有效表达式不返回任何数据，只有当页面刷新时一切恢复正常。`<o:tabbedPane>`该表按标签添加到页面中。带有表数据的 Bean`@ViewScoped`和包含此页面的母版页`<ui:include>`也有 @ViewScoped 范围标记。

吸豆器：

```
public Set<OrderLine> getProdukty() {
if (produkty == null) {
    produkty = produktyP.getProduktyDB();
}
return produkty;
} 
```

# angularjs - AngularJS - 设置在范围内定义的类名

> ID：15875372
> 
> 赞同：0
> 
> 时间：2013-04-08T09:12:27.723
> 
> 标签：angularjs

我正在使用 AngularJS 1.05

我想要这样的东西：

在我的控制器中：

```
$scope.location = $location.path().split('/')[2]
$scope.lang = $routeParams.lang
$scope.bodyClassName = ((if $scope.location isnt "login" then "sub" else "")) 
```

我想在文档对象中报告这些变量以获取例如：

```
<div class="home en sub"></div> 
```

我试过了

`<div class="{{location}} {{lang}} {{bodyClassName}}"></div>`

它在第一次加载时有效，但在视图刷新时无效。

正如文档所说，**ng-class**用于**评估**表达式，但我需要**打印**一个变量。

有什么好方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:50:07.373

您需要观察`$location.path()`以获取路线更改并相应地更新范围变量：

```
$scope.$watch(function() {
  return $location.path();
}, function(newPath) {
  $scope.location = $location.path().split('/')[2]
  $scope.lang = $routeParams.lang
  $scope.bodyClassName = ((if $scope.location isnt "login" then "sub" else ""))
}); 
```

然后，在您的标记中，正如您所尝试的那样：

```
<div class="{{location}} {{lang}} {{bodyClassName}}"></div> 
```

上述的另一个变体是仅在路由更改成功事件而不是在每个手表中更新范围变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:45:14.133

You could do:

```
<div class="location + ' ' + lang"></div> 
```

or,

```
<div class="[ location, lang ].join(' ')"></div> 
```

# windows - Windows 8 手机应用程序的联系人选择器命名空间

> ID：15875383
> 
> 赞同：-2
> 
> 时间：2013-04-08T09:12:54.933
> 
> 标签：windows, windows-phone-8

我无法在我的 Windows 8 手机应用程序中使用联系人选择器。

windows.applicationmodel 命名空间没有联系人。

我正在使用 Visual Studio Express Edition 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T23:19:56.507

Windows Phone 8 没有[`ContactPicker`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contactpicker.aspx)该类 - 您正在考虑 Windows 8。有关访问联系信息的特定于 Windows Phone 的方式，请阅读[这篇官方文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286414%28v=vs.105%29.aspx)。

# jakarta-ee - EclipseLink 和 GlassFish：预部署失败：NullPointerException

> ID：15875386
> 
> 赞同：2
> 
> 时间：2013-04-08T09:12:58.693
> 
> 标签：jakarta-ee, glassfish, ejb, eclipselink

当我尝试将我的 EJB 应用程序部署到 glassfish (3.1.2) 时，我随机收到“预部署错误”。有时有效，有时无效，有 50% 的机会。

我在互联网上搜索了这个问题，但似乎我是唯一一个遇到这个问题的人。我也无法通过分析堆栈跟踪来找出问题所在。

有人知道这里有什么问题吗？这真是要了我的命。

```
SCHWERWIEGEND：调用类 org.glassfish.persistence.jpa.JPADeployer 准备方法时出现异常
SCHWERWIEGEND：调用类 org.glassfish.javaee.full.deployment.EarDeployer 准备方法时出现异常
SCHWERWIEGEND：准备应用程序时出现异常
SCHWERWIEGEND: 异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
org.glassfish.deployment.common.DeploymentException: 异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
    在 org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:166)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    在 org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.access $1200(CommandRunnerImpl.java:95)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    在 com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    在 com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    在 com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    在 com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    在 com.sun.grizzly.http.DefaultProtocolFilter.execute（DefaultProtocolFilter.java:228）
    在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:104）
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:90）
    在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    在 com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    在 java.lang.Thread.run(Thread.java:662)
引起：javax.persistence.PersistenceException: 异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
    在 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1402)
    在 org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:208)
    在 org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:206)
    在 org.glassfish.persistence.jpa.PersistenceUnitLoader.(PersistenceUnitLoader.java:120)
    在 org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    在 org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    在 org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    在 org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    在 org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    在 org.glassfish.javaee.full.deployment.EarDeployer.access $200(EarDeployer.java:86)
    在 org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    在 org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    在 org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    ... 30 更多
原因：异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
    在 org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:221)
    ... 47 更多
引起：java.lang.NullPointerException
    在 org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.OneToOneAccessor.process(OneToOneAccessor.java:116)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processNonOwningRelationshipAccessors(MetadataProject.java:1436)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage3(MetadataProject.java:1707)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata（MetadataProcessor.java:535）
    在 org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata（PersistenceUnitProcessor.java:526）
    在 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1337)
    ... 46 更多

SCHWERWIEGEND：准备应用程序时出现异常：异常 [EclipseLink-28018]（Eclipse Persistence Services - 2.3.2.v20111125-r10461）：org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
javax.persistence.PersistenceException: 异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
    在 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1402)
    在 org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:208)
    在 org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:206)
    在 org.glassfish.persistence.jpa.PersistenceUnitLoader.(PersistenceUnitLoader.java:120)
    在 org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    在 org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    在 org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    在 org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    在 org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    在 org.glassfish.javaee.full.deployment.EarDeployer.access $200(EarDeployer.java:86)
    在 org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    在 org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    在 org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    在 org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    在 org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl.access $1200(CommandRunnerImpl.java:95)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    在 com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    在 com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    在 com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    在 com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    在 com.sun.grizzly.http.DefaultProtocolFilter.execute（DefaultProtocolFilter.java:228）
    在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:104）
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:90）
    在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    在 com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    在 java.lang.Thread.run(Thread.java:662)
原因：异常 [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
异常描述：PersistenceUnit [SeatingPlannerEJB] 的预部署失败。
内部异常：java.lang.NullPointerException
    在 org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:221)
    ... 47 更多
引起：java.lang.NullPointerException
    在 org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.OneToOneAccessor.process(OneToOneAccessor.java:116)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processNonOwningRelationshipAccessors(MetadataProject.java:1436)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage3(MetadataProject.java:1707)
    在 org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata（MetadataProcessor.java:535）
    在 org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata（PersistenceUnitProcessor.java:526）
    在 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1337)
    ... 46 更多
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:12:33.697

该错误发生在 OneToOneAccessor 中，因此与您的 @OneToOne 关系之一有关。我的猜测是它使用了 mappedBy，但目标关系名称不正确。

尝试确定导致问题的映射并包含它的代码。

还可以尝试最新的 EclipseLink 版本，从源代码来看，至少在缺少 mappedBy 的情况下，它似乎会引发适当的异常。

# c# - 获取在运行时创建的文本框的文本

> ID：15875390
> 
> 赞同：0
> 
> 时间：2013-04-08T09:13:02.333
> 
> 标签：c#, wpf

在我的应用程序中，我在运行时创建了一个文本框，这是代码

```
TextBox bt = new TextBox();
bt.Name = "population_textbox";
bt.Height = 20;
bt.SetValue(Grid.ColumnProperty, 1);
bt.SetValue(Grid.RowProperty, 0);
temp_grid.Children.Add(bt); 
```

那么，如何在用户输入内容并输入后获取此文本框的文本。不知道怎么弄，我试试

```
var tb = (FrameworkElement)this.FindName("population_textbox") as TextBox;
Console.Write(tb.Text); 
```

这是错误警报：

```
Exception has been thrown by the target of an invocation. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:19:10.157

我为你写一个简单的例子：

```
 TextBox bt = new TextBox();
            bt.Name = "population_textbox";
            bt.Text = "some";
            bt.Height = 20;
            main_Grid.Children.Add(bt);
            foreach (TextBox txt in main_Grid.Children)
            {
                if (txt is TextBox)
                {
                    if ((txt as TextBox).Name == "population_textbox")
                    {
                        MessageBox.Show((txt as TextBox).Text);
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:19:35.850

**使用以下代码：**

```
 this.RegisterName("bt", textBox); 
```

也试试：

```
var tb = (FrameworkElement)this.FindName("population_textbox"); 
```

**或直接写：**

```
TextBox bt = new TextBox();
bt.Name = "population_textbox";
bt.Height = 20;
bt.SetValue(Grid.ColumnProperty, 1);
bt.SetValue(Grid.RowProperty, 0);
temp_grid.Children.Add(bt);
Console.Write(bt.Text); 
```

[没有在 tb var 中使用它]。

这用于从其值被分配运行时的文本框中获取文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:53:46.037

您应该声明您的控件，然后调用使控件可访问的 RegisterName 方法，然后您可以从窗口范围内的任何位置引用控件名称：

```
 TextBox bt = new TextBox();
        bt.Name = "population_textbox";
        bt.Height = 20;
        bt.SetValue(Grid.ColumnProperty, 1);
        bt.SetValue(Grid.RowProperty, 0);
        temp_grid.Children.Add(bt);
        this.RegisterName(bt.Name, bt);

        var tb = this.FindName("population_textbox") as TextBox;
        Console.Write(tb.Text); 
```

# json - Worklight HTTP 适配器 - 将其与 HTTP POST 和 JSON 有效负载一起使用

> ID：15875394
> 
> 赞同：0
> 
> 时间：2013-04-08T09:13:20.607
> 
> 标签：json, http, http-post, adapter, ibm-mobilefirst

我尝试使用 HTTP 适配器通过 Post 将 JSON 对象发送到作为 REST API 实现的后端服务。

有几件事要么不起作用，要么我做错了。查询参数不会传输到 REST 服务提供者。无论我是将它们添加到路径还是调用中的参数对象。

HTTP 适配器始终使用此 REST 接口不接受的传输编码分块。有没有办法影响 HTTP 适配器的行为？

我的电话看起来像这样：

```
function doSomething(data1, data2, payload) {
    var input = {
        'method' : 'post',
        'path' : '/myRESTAPI/SalesOrder',
        'returnedContentType' : 'json',

        'headers' : {
            'Accept-Encoding': 'gzip,deflate',
            'Content-Type': 'application/json'
        },

        'parameters' : {
            'data1' : data1,
            'data2' : data2
        },

        'body': { 
                    'contentType' : 'application/json',         
                    'content' : payload
                }

    };  
        return WL.Server.invokeHttp(input);
} 
```

你看到我在那里做的任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:17:57.507

您可以在这里找到答案：[工作灯适配器](https://stackoverflow.com/questions/15340721/worklight-adapter/15346877#15346877)

> 在 5.0.5.x 中，invokeHttp 将获取路径上为 put 和 post 提供的任何参数，并将它们放在 http 正文中，而不是让它们作为查询参数保留在路径上（正如开发人员可能想要的那样）。此行为将在即将发布的版本中更新，但目前无法强制这些保留为查询参数。

# java - 如何创建特定对象变量的子列表？

> ID：15875397
> 
> 赞同：0
> 
> 时间：2013-04-08T09:13:39.460
> 
> 标签：java, gwt, guava

如何使用 Guava轻松创建`List<String>`所有属性的子列表？`name`

```
class Person {
  String name;
}

List<Person> persons;

//how can I replace the following using guava `com.google.common`?
List<String> results = new ArrayList<String>();
for (Person p : persons) {
   results.add(p.getName());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:21:30.693

您**可以**使用番石榴的[功能性习语](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)。**但**你不应该。如链接文档中所述：

> 过度使用 Guava 的函数式编程习惯会导致冗长、混乱、不可读和低效的代码。到目前为止，这些是 Guava 中最容易（也是最常见）被滥用的部分，当你不遗余力地让你的代码“单行”时，Guava 团队会哭泣。

那里的示例与您的用例非常匹配，并且很好地表明“功能”代码的可读性要低得多。由于它也很可能效率较低，因此在这种情况下它真的没有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:42:56.047

以下将为您完成。

```
 List<String> names = Lists.transform(persons, new NameFunction()); 
```

其中NameFunction如下

```
class NameFunction implements Function<Person, String> {

    @Override
    @Nullable
    public String apply(@Nullable Person person) {
            return person.getName();
    }
 } 
```

**编辑1：**

结合@mmounirou 答案。

将您的转换函数定义为您的 Person 类中的枚举 如果您以后需要基于另一个属性（例如年龄）进行转换，这将非常有用

```
class Person {
    String name;
    String age;

    Person(String name) {
        this.name = name;
    }

    public String getAge() {
        return age;
    }

    public void setAge(String age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    enum TransformerFunctions implements Function<Person, String> {

        NAME_FUNCTION {
            @Override
            @Nullable
            public String apply(@Nullable Person person) {
                return person.getName();
            }
        },
        AGE_FUNCTION {
            @Override
            @Nullable
            public String apply(@Nullable Person person) {
                return person.getAge();
            }
        };
    } 
```

并使用函数

```
 List<String> names = Lists.transform(people,Person.TransformerFunctions.NAME_FUNCTION); 
```

但正如@ogregoire 的评论指出的那样，非番石榴方式更短且可读性足够。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T13:49:30.617

我更喜欢这个版本的@artfullyContrived 解决方案。

```
List<String> names = Lists.transform(persons, Person.Functs.getName()); 
```

该解决方案将与您的类相关的所有访问器方法分组在同一个位置，并帮助您编写更多类似功能的代码，而不会陷入冗长、混乱和不可读的问题。

# sql - （PostgreSQL）错误：无法打开关系

> ID：15875400
> 
> 赞同：4
> 
> 时间：2013-04-08T09:13:48.517
> 
> 标签：sql, postgresql

我收到这个奇怪的错误

```
Caused by: org.postgresql.util.PSQLException: ERROR: could not open
relation base/17369/1684: No such file or directory 
```

我如何从中恢复？有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-07T09:01:02.267

您丢失了与表 1684 和数据库 17369 相关的文件。检查目录 base/17369 中名称为 1684 的存在文件。

您可以确定它是哪个表：

1）获取数据库名称：`select * from pg_database where oid=17369`

2）获取表名（连接到受影响的数据库）：`select * from pg_class where oid=1684`

可能你能做的不多了。只能从备份中恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T01:10:01.390

这可能有多种原因。如果合理，最好的选择是在通过诊断运行硬件后从备份中恢复。

如果不希望从备份中恢复，那么您需要停止 Postmaster，复制您的数据库，并尽快获得专业帮助。数据可能会或可能不会恢复，您需要知道这一点。此外，我建议在克雷格指向您的链接之外，在这种情况下（文件可能被删除），最好从副本中恢复整个文件系统的块级副本，在另一个系统上。

FWIW 我已经看到 PostgreSQL 在严重滥用的硬件上运行，并且当硬件超出限制时看到了许多索引损坏问题（例如，在热、不通风的壁橱中高于门级别的数据库服务器），但这看起来不像一个（索引损坏相对容易修复，但通常错误消息有点不同）。

现在，另外，*可以*使用当前数据库*和*备份来恢复数据。显然，在有人尝试之前我们也不会知道这一点。

# windows - 在 WebDAV 响应中显示错误描述

> ID：15875412
> 
> 赞同：3
> 
> 时间：2013-04-08T09:14:18.933
> 
> 标签：windows, http, webdav, web-folders

我已经构建了一个符合 WebDAV 的服务器端应用程序，它连接到 Windows Web 文件夹。当我在做一些手动测试以确认代码完成了它应该做的事情时，我想知道是否有任何方法可以更详细地描述服务器遇到的错误。

> 示例：我试图在包含名为“其他”的集合的集合中对名为“其他”的文件执行 PUT。该方法由于明显的原因而失败，但响应中没有包含可以帮助用户识别问题所在的信息。

提前致谢。

PS：我想我可以将描述放在 HTTP 正文中，我认为这对于像 cadaver 这样的客户端会很好，但是这种方法不适用于 Windows WebFolders。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:09:15.527

似乎我找到了答案。我正在寻找的内容实际上在[WebDAV 协议](http://www.webdav.org/specs/rfc4918.html#precondition.postcondition.xml.elements)中有详细记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:24:59.310

所有 OS Webdav 客户端，尤其是 Windows，都**不会**向用户提供有关错误原因的良好反馈。

对于已知当前用户的电子邮件地址的业务应用程序，一种常见的解决方案是让服务器简单地将完整的错误消息通过电子邮件发送给用户。这对于可能因违反业务规则而导致错误的情况特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:46:41.087

由于 webdav 收集请求是一个简单的 HTTP 请求，方法为 'MKCOL'，您将收到错误代码作为来自服务器的响应。在您的情况下，您将收到 403（禁止）错误代码。您可以在本地检查您的文件夹内容，如果有重复的条目，您将给用户自定义错误消息。

# c# - 如何比较两个字符串与 unicode 有一些不同？

> ID：15875413
> 
> 赞同：0
> 
> 时间：2013-04-08T09:14:19.227
> 
> 标签：c#

事情发生得如此混乱。我用这些

```
(cert.SubjectName.Name.ToLower()) == (subjectName.ToLower() 
```

比较两个字符串。虽然我总是得到错误，即使我可以看到这些字符串具有相同的值。然后我发现，如果我在文本可视化工具中打开该值，选择显示 Unicode 控制字符，我发现第二个值的开头有 |*。 ![在此处输入图像描述](https://i.stack.imgur.com/YDfOJ.jpg)

为什么会发生这些？我应该如何让这两个字符串对我返回 true？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:24:20.563

可能您的 app.config 包含奇怪的字符，您可能无法在常规编辑器中看到：

```
<appSettings>
    <add key="SigningCertificateName" value="<WEIRD-CHAR>CN=STSTestCert" />
</appSettings> 
```

尝试删除整个值 ( `"CN=STSTestCert"`)，然后重新输入。

# xml - 最佳实践 - 由两个名称标识的资源的 REST URI 设计

> ID：15875414
> 
> 赞同：2
> 
> 时间：2013-04-08T09:14:21.543
> 
> 标签：xml, rest, resources, uri

REST 资源应由两个名称标识。对此的最佳做法是什么？

我的想法：

```
 .../{id1}-{id2}
 .../{id1}/{id2} 
```

id 可以由数字、字母和特殊字符组成。

第一个解决方案：

如果其中一个 id 包含字符 ，则会出现问题`-`。在这种情况下，分隔字符不是唯一的。

第二种解决方案：

只是`.../{id1}`没有资源，这是 RESTful 吗？

**编辑：**

REST 资源代表凭据。凭据由提供者名称和用户名标识。

```
 .../Credentials/<ProviderName>;<UserName> 
```

我不想显示`.../Credentials/<ProviderName>`提供者的所有凭据（它不适合我的 XML 结构）。

**编辑2：**

`.../Credentials`所有凭据都将以 XML 格式显示。凭证在那里表示为 XML 根元素的子元素。我想创建一个与 XML 结构相同的 REST 资源结构。因此，子资源`.../Credentials`应该直接是某个凭据（而不是像所有提供者那样的一组凭据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:48:57.820

您的第二个解决方案对我来说说您在and`.../{id1}/{id2}`之间有层次关系，这似乎不能很好地解决您的资源设计，因为正如您所说，两个标识符都引用相同的资源。另一方面，对于您的第一个解决方案，您可以使用它来避免暗示不存在的层次结构，如[Restful Web 服务](https://rads.stackoverflow.com/amzn/click/com/0596529260)中所引用的那样，因此我将采用以下方法：`id1``id2``.../{id1}-{id2}``;``-`

```
.../{id1};{id2}/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:55:13.763

REST API 必须是超文本驱动的，所以不要在 URL 模式上浪费时间，因为它们不是 RESTful。URL 模式意味着客户端和服务器之间的紧密耦合；简单地说，客户端必须知道 URL 的样子并有能力构造它们。

另见这篇文章：

[http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)

关于凭据的说明；似乎您在客户端和服务器之间保持一种状态，这也违反了 REST 原则：无状态。

# c# - 在表中使用没有主/唯一键列的 Fluent nHibernate

> ID：15875417
> 
> 赞同：0
> 
> 时间：2013-04-08T09:14:25.480
> 
> 标签：c#, vb.net, oracle, nhibernate, fluent-nhibernate

在我的数据库表中，我没有任何主键或唯一键。我正在使用 Oracle 数据库表。

1.我可以在没有主键或唯一键的情况下使用 Fluent nHibernate 吗？

2.如果我可以使用它，我该如何做映射？因为当`Id`未映射时，它会引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:13:23.363

[没有主键](https://stackoverflow.com/questions/822966/fluent-nhibernate-table-mapping-with-no-primary-key?rq=1)的 Fluent-NHibernate 表映射可能重复。

AFAIK 所有的 ORM 都需要一个主键。我看到的主要原因是管理会话中的脏跟踪和缓存机制。

此外，您没有理由不在表中拥有主键。即使你认为你不需要一个，坚持一个自动递增的 int 列作为键，你应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T10:15:59.750

如果您使用的是 oracle，请尝试使用“ROWID”。但在我看来，如果您没有任何主键或唯一键，那么最好使用您自己的 ORM 来满足您的要求。

# hadoop - Hive 开始失败

> ID：15875421
> 
> 赞同：0
> 
> 时间：2013-04-08T09:14:41.713
> 
> 标签：hadoop, mapreduce, hive, hdfs

我在我的本地主机上运行了一个 hadoop。我试图在我的本地主机上设置配置单元并安装配置单元。当我在终端上给 hive 时，出现以下错误

> > / ade:[ashsshar_bda_latest_2] [ashsshar@slc01nwj tmp2]$ hive
> 
> /usr/lib/hive/bin/hive：第 179 行：需要条件二元运算符
> 
> /usr/lib/hive/bin/hive：第 179 行：意外标记 `=~' 附近的语法错误
> 
> /usr/lib/hive/bin/hive: 第 179 行: `if [[ "$HADOOP_VERSION" =~ $hadoop_version_re ]]; 然后'

要知道 hive 版本，我给出了 hive-version 并得到了关注。

> ade:[ashsshar_bda_latest_2] [ashsshar@slc01nwj hive]$ hive -version
> 
> /usr/lib/hive/bin/hive：第 179 行：需要条件二元运算符
> 
> /usr/lib/hive/bin/hive：第 179 行：意外标记附近的语法错误
> 
> `=~' /usr/lib/hive/bin/hive: line 179:` 如果 [[ "$HADOOP_VERSION" =~
> 
> $hadoop_version_re ]]; 然后'

我的 hadoop 工作正常并显示适当的目录 hadoop fs -ls / 找到 2 项

> drwxrwxrwt - hdfs 超级组 0 2013-04-05 11:57 /tmp
> 
> drwxrwxr-x - hdfs hadoop 0 2013-04-04 10:49 /用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:43:00.363

好像您将配置单元代码从 Windows 复制到 Unix，反之亦然，事情就搞砸了。

您能否从 Hive tar 下载新代码，然后将其解压缩到您尝试安装的同一系统中。

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T18:46:34.457

我对 bash 版本 2.05.8 也有同样的问题。我发现使用更新版本的 bash (3.2.25) 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T09:47:34.147

试试这个把蜂巢放在主目录上。

不要为 hive 做 bashrc 的事情，只需 cd 到 hive 文件夹并使用命令 bash/hive。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T12:33:17.933

进入位于 hadoop 文件夹中的 hive 文件夹的 bin 文件夹

```
cd /usr/lib/hive/bin   hive 
```

希望它会工作...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-29T09:46:35.640

确保 /user/hive 中有 hive/warehouse 目录

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-08T10:12:33.693

我用这个解决了：

```
export HIVE_HOME=<where did you installed hive> [1] 
export PATH=$HIVE_HOME/bin:$PATH 
```

[1] 例如：/opt/apache-hive-2.1.0-bin

# sql - 索引上的 SQL Server 面试查询？

> ID：15875427
> 
> 赞同：3
> 
> 时间：2013-04-08T09:15:08.863
> 
> 标签：sql, sql-server, sql-server-2008

我从 NET 收到了一个面试问题，但没有找到合适的解决方案，谁能告诉我这个查询有什么问题？

给定这个表结构和索引，后续查询有什么问题呢？

```
CREATE TABLE dbo.IndexQ (
ID int IDENTITY(1, 1) NOT NULL,
TestBit bit NOT NULL
)
GO

CREATE NONCLUSTERED INEX IX_IndexQ_TestBit ON dbo.IndexQ (TestBit)
GO

* Insert some rows where some bits are 0 and some are 1...

SELECT *
FROM dbo.IndexQ
WHERE TestBit = 1
* What's the problem with this query? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:21:33.930

我想你的 NONCLUSTERED 位字段索引中的问题。如果你有一个大表，你不应该在位字段上建立索引，因为它有更多的记录，它们的索引效率会降低，但是你会在上面使用更多的日期。

请参阅[https://dba.stackexchange.com/questions/12888/should-i-index-a-bit-field-in-sql-server](https://dba.stackexchange.com/questions/12888/should-i-index-a-bit-field-in-sql-server)

# c# - SQL REGEX WHERE COLUMN = 'VALUES' 解析器

> ID：15875428
> 
> 赞同：1
> 
> 时间：2013-04-08T09:15:12.720
> 
> 标签：c#, java, .net, sql, regex

我正在制作一个正则表达式来匹配列 = **'value'**中的所有值，主要是在 sql 的 where 子句中，值可以是从字母数字到特殊字符、空格、'、= 等。这是我到目前为止所拥有的。

SQL：

> select count(*) from t_cusUser where AccountID = ' `!@#$%^&()+{}?|.'_' and column = '3' and column = '`~!@#$%^&-_+{}|'./?Polite'

正则表达式：

> (?<=\=)\s?N?\'([\w\'-\s\&{}#\$\^()\@\~\%\|/.`*\~!+ \?"]+)\'

结果：

1.  '`!@#$%^&()+{}?|.'_'
2.  '3'
3.  '`~!@#$%^&-_+{}|'./?礼貌'

它工作正常，但如果我放一个**=**字符，就会出现问题。

正则表达式：（添加 = 字符）

> (?<=\=)\s?N?\'([\w\'-\s\&{}#\$\^()\@\~\%\|/.`*\~!+ \?" **=** ]+)\'

结果：

1.  ' `!@#$%^&*()+{}?|.'_' and column = '3' and column = '`~!@#$%^&*-_+{}|'./?礼貌'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:17:00.953

尝试这个。

((?<=\=)\s*N?[a-zA-Z0-9.!?#$=@&%'^+|_~-/()*{}`]+)'

# php - 有条件地计算数组 PHP 中的值

> ID：15875430
> 
> 赞同：0
> 
> 时间：2013-04-08T09:15:17.817
> 
> 标签：php, arrays

我有一个这样的数组数组：

```
array('0'=> 
            array(
           'fromDate' =>2007,
           'toDate' => 2008,
           'value' => 7)
      '1'=>
            array(
            'fromDate' =>2010,
            'toDate' => ,
            'value' => 3)
      '2'=>
            array(
            'fromDate' => 2007,
            'toDate' => ,  
            'value' => 4)) 
```

我想计算“价值”，将它们按“fromDate”分组，如下所示：

```
array('0' =>
             array(
             'fromDate' => 2007,
             'sum' => 2)
      '1' =>
            array(
            'fromDate' => 2010,
            'sum' => 1)) 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:39:18.333

```
$myData = array('0'=>
            array(
           'fromDate' =>2007,
           'toDate' => 2008,
           'value' => 7),
      '1'=>
            array(
            'fromDate' =>2010,
            'toDate' => NULL,
            'value' => 3),
      '2'=>
            array(
            'fromDate' => 2007,
            'toDate' => NULL,
            'value' => 4)
);

$counts = array_reduce(
    $myData,
    function ($counter, $entry) {
        if (!isset($counter[$entry['fromDate']])) {
            $counter[$entry['fromDate']] = array(
                'fromDate' => $entry['fromDate'],
                'sum' => 1
            );
        } else {
            $counter[$entry['fromDate']]['sum']++;
        }
        return $counter;
    },
    array()
);

var_dump($counts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:42:16.227

如果你想用“fromDate”计算有多少个数组，例如 2007，你有：

```
function countByFromDate($array) {
  $result = array();
  foreach($array as $item) {
    $fromDate = $item['fromDate'];
    if (!isset($result[$fromDate])) {
      $result[$fromDate] = array('fromDate' => $fromDate, 'sum' => 0);  
    }
    $result[$fromDate]['sum']++;
  }

  return $result; 
} 
```

# html - 为什么这里有溢出？

> ID：15875433
> 
> 赞同：1
> 
> 时间：2013-04-08T09:15:34.330
> 
> 标签：html, css

我有一个简单的页面，上面有一个顶部菜单、一个右侧菜单和一个中间的板。

见[http://jsfiddle.net/pXXNv/](http://jsfiddle.net/pXXNv/)

但我一直没有明显的原因溢出。

如果我删除

```
height:100%; 
```

从 body html 问题解决了，但为什么 div 大于 100% 我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:24:09.933

在这种情况下（因为只有固定位置）只有 html 需要`height:100%`，而不是 body

```
html { 
    height:100%;
}
body { 
    margin:0px; 
    font-family:Open Sans,helvetica, arial, san-serif; 
    /*background-image:url('achtergrond.png');*/
    background-repeat:repeat-x;
    background-color:#ffffff;    
    padding:0px; 
} 
```

**[演示](http://jsfiddle.net/pXXNv/2/)**

# symfony - Symfony2 事件中对 Translator 的引用

> ID：15875437
> 
> 赞同：0
> 
> 时间：2013-04-08T09:15:48.243
> 
> 标签：symfony

我知道我可以在控制器中使用它：

```
$this->get('translator')->trans('key_name') 
```

...但是如何在 Symfony2 GetResponseEvent 或 FilterResponseEvent 事件中获得对翻译器的引用？

我知道我可以使用 ->getRequest() 但我也看不到如何从 Request 对象中获取它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:26:11.493

在`services.yml`您只需要添加`@translator`服务参考

`**services.yml**`

```
services:
    mylistener:
        class: Your\Bundle\Listener\RequestListener
        arguments: [ @translator ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

`**Your/Bundle/Listener/RequestListener.php**`

```
namespace Your\Bundle\Listener;

use Symfony\Component\Translation\TranslatorInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class RequestListener
{
    protected $translator;

    public function __construct(TranslatorInterface $translator)
    {
        $this->translator = $translator;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        $this->translator->trans('key_name');
    }
} 
```

# hudson - Hudson 和 CCRC 集成

> ID：15875439
> 
> 赞同：2
> 
> 时间：2013-04-08T09:15:53.267
> 
> 标签：hudson, hudson-plugins, clearcase-remote-client

我正在尝试使用 Hudson 构建配置 Clearcase 远程客户端。我下载了 clearcase.hpi 文件。

有 2 个选项 Base Clearcase 和 UCM clearcase，我不知道该使用哪个（不太了解 CC）。所以从 BaseClearcase 开始。给定 Hudson 明确案例输入表格中要求的所有输入。

问题是抛出异常

> java.io.IOException：无法运行程序“cleartool”

Hudson 正在询问 cleartool 可执行文件，它是什么？它与 Clearcase 远程客户端安装有什么不同？在哪里配置它哈德森？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:29:49.913

这是意料之中的：cleartool 来自完整的 ClearCase 安装，而您没有。

CCRC 是一个轻量级的 ClearCase 安装，客户端仅通过 Web 请求与 CCRC 服务器通信。

您可以尝试使用**[`rcleartool`](http://www-01.ibm.com/support/docview.wss?uid=swg21594728)**，但我不知道这是否与 Hudson ClearCase 插件兼容：如果该插件尝试创建快照或动态视图，它将无法工作，因为 CCRC 仅使用[Web 视图](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/topic/com.ibm.rational.clearcase.ccrc.help.doc/topics/c_ccview.htm)（如快照视图，但在创建时参数略有不同）。

对 CCRC 的支持仍在等待中 ( [JENKINS-5192](https://issues.jenkins-ci.org/browse/JENKINS-5192) )。

# extjs - 在最大化的窗口上使用展开/折叠只能工作一次

> ID：15875440
> 
> 赞同：4
> 
> 时间：2013-04-08T09:15:57.643
> 
> 标签：extjs, extjs4, extjs4.1

我有一个窗口，在它显示后我会最大化。现在我的客户需要最小化/最大化它，所以我添加了像这样的最小化/最大化工具

```
tools:[{
    type: 'minimize',
    handler: function(event, target, owner, tool){
        owner.up('window').collapse();
    }
},{
    type: 'maximize',
    handler: function(event, target, owner, tool){
        owner.up('window').expand();

    }
}] 
```

这一次可以正常工作。之后，最小化按钮什么也不做，窗口保持最大化。当我关闭并重新打开窗口时，它会再次工作一次，所以这似乎是一个参考问题。控制台打印没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:34:50.607

这似乎是一个错误。您展开 Window ExtJS 不会重置`isCollapsingOrExpanding`导致所有其他展开/折叠操作中止的属性。您可以尝试自己重置

```
handler: function(event, target, owner, tool){
    owner.up('window').expand();
    owner.up('window').isCollapsingOrExpanding = 0;
} 
```

这是未经测试的，但它应该适合你。如果问题在框架中得到修复，您应该标记此行并检查每个 ExtJS 更新。

# c# - 使用星期几获取日期

> ID：15875443
> 
> 赞同：5
> 
> 时间：2013-04-08T09:16:10.173
> 
> 标签：c#, .net, datetime, datetime-format

我在使用星期几查找日期时遇到问题。

例如：我有过去的日期可以说，

```
Date date= Convert.TodateTime("01/08/2013"); 
```

2013 年 1 月 8 日 一周中的一天是星期二。

现在我想要本周的星期二日期。我怎么能做到。

注意：过去的日期是动态的。它会在每个循环中改变。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T09:25:19.853

您可以使用枚举[DayOfWeek](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)

> DayOfWeek 枚举表示每周有 7 天的日历中的星期几。此枚举中常量的值范围从 DayOfWeek.Sunday 到 DayOfWeek.Saturday。如果转换为整数，则其值范围从零（表示 DayOfWeek.Sunday）到六（表示 DayOfWeek.Saturday）。

我们可以使用转换为整数来计算与同一工作日的当前日期的差异

```
DateTime dtOld = new DateTime(2013,1,8);
int num = (int)dtOld.DayOfWeek;
int num2 = (int)DateTime.Today.DayOfWeek;
DateTime result = DateTime.Today.AddDays(num - num2); 
```

这似乎也适合创建扩展方法

```
public static class DateTimeExtensions
{
    public static DateTime EquivalentWeekDay(this DateTime dtOld)
    {
        int num = (int)dtOld.DayOfWeek;
        int num2 = (int)DateTime.Today.DayOfWeek;
        return DateTime.Today.AddDays(num - num2);
    }
} 
```

现在你可以用

```
DateTime weekDay = Convert.ToDateTime("01/08/2013").EquivalentWeekDay(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:46:52.807

我参加聚会可能有点晚了，但我的解决方案非常相似：

```
DateTime.Today.AddDays(-(int)(DateTime.Today.DayOfWeek - DayOfWeek.Tuesday)); 
```

这将得到本周的星期二，其中找到星期二是主要目标（我可能误解了这个问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T04:05:26.510

你可以用这个......

```
public static void Main()
{ 
    //current date  
    DateTime dt = DateTime.UtcNow.AddHours(6);

    //you can use it custom date  
    var cmYear = new DateTime(dt.Year, dt.Month, dt.Day);

    //here 2 is the day value of the week in a date
    var customDateWeek = cmYear.AddDays(-2); 
    Console.WriteLine(dt);
    Console.WriteLine(cmYear);
    Console.WriteLine("Date: " + customDateWeek);
    Console.WriteLine();  
    Console.ReadKey();
} 
```

# delphi - 静默安装拆分 MSI 设置

> ID：15875452
> 
> 赞同：0
> 
> 时间：2013-04-08T09:16:31.847
> 
> 标签：delphi, windows-installer

我必须静默设置我的应用程序。我已经使用 Advanced Installer 和 Installshield 创建了一个**MSI**设置，但我的问题是当我的应用程序大小大于一个磁盘 (DVD) 并且我将其拆分为 2 个或更多时。

我正在使用 Delphi 包装 MSI 并从中获取返回代码，但是在第一个磁盘结束后的静默模式下，MSI 返回**1602**代码！

我怎样才能从 MSI 获得**1302**代码，这意味着`Please insert the disk: [2]`？

这是我运行 MSI 的代码：

```
Result := FileExecute(handle, PChar(GetcurrentDir + '\' + setupFile),
    PChar(Format('/qn INSTALLDIR="%s" APPDIR="%s"  /l*v c:\temp\msi.log', [path, path])), '',
    SW_SHOWNORMAL, True);
  ShowMessage(IntToStr(Result)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:27:44.937

创建 .msi 的两个版本。您在多张 DVD 上提供的一个版本。您不可能静默安装它，因为您无法静默更改物理介质。第二个版本作为一个单独的、未拆分的包提供。该版本在静默安装时没有问题，因为无需人工干预即可更改媒体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:57:19.007

您可以将所有 DVD 中的所有文件复制到系统上的单个文件夹中，然后运行您的命令。它不会提示输入另一张光盘，而是会找到驾驶室并继续前进。

# php - 比较二维数组的元素

> ID：15875454
> 
> 赞同：0
> 
> 时间：2013-04-08T09:16:37.283
> 
> 标签：php

我有所有几个文件，其中包含我将这些数据收集为二维数组的数据现在我必须验证文件中是否有数据（file1）以及它们是否在其他文件中重复：意思是（我已将我的文件转换为数组）例如 tab [0] [j] 与另一个 tab [ i] [j] 除了与他的交集 self (i! = 0) tab[0][0]="a"; 选项卡[0][1]="b"; 选项卡[0][2]="ac"; 选项卡[0][3]="n"; 标签[1][0]="g"; 选项卡[1][1]="a"; 选项卡[1][2]="h"; 选项卡[1][3]="b"; 选项卡[2][0]="gdd"; 选项卡[2][1]="a"; 标签[2][2]="高清"; 选项卡[2][3]="b"; 我的程序必须允许我始终将 tab[0][] 与其他人进行比较我希望这次我清楚并感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:34:55.757

```
$withDuplicates = array(
    array(1,2,3,4),
    array(1,3,2,4),
    array(1,2,3,5),
    array(1,3,2,4),
    array(1,2,3,4),
);

$duplicatesEliminated = array_map(
    'unserialize',
    array_reduce(
        $withDuplicates,
        function ($returnArray, $entry) {
            $serialized = serialize($entry);
            if (!in_array($serialized, $returnArray))
                $returnArray[] = $serialized;
            return $returnArray;
        },
        array()
    )
);

var_dump($duplicatesEliminated); 
```

# prolog - 如何在序言中随机搜索n-queen？

> ID：15875460
> 
> 赞同：0
> 
> 时间：2013-04-08T09:16:51.233
> 
> 标签：prolog, artificial-intelligence, n-queens

我在序言中实现随机搜索。

代码是

```
queens_rand([],Qs,Qs) :- !.
queens_rand(UnplacedQs,SafeQs,Qs) :-
random_sort(UnplacedQs, UnplacedQs1),
select(UnplacedQs,UnplacedQs1,Q),
not_attack(SafeQs,Q,1),
queens_rand(UnplacedQs1,[Q|SafeQs],Qs),
!.
queen_solve_rand(N) :-
alloc(1,N,Ns),
queens_rand(Ns,[], Q),
write(Q), nl.
random_sort([],_) :- !.
random_sort(_,[]) :- !.
random_sort(Xs, Ys) :-
   length(Ys, L),
   rnd_select(Xs,L, Ys),
   write('Ys : '),write(Ys),nl.

remove_at(X,[X|Xs],1,Xs).
remove_at(X,[Y|Xs],K,[Y|Ys]) :- K > 1, 
K1 is K - 1, remove_at(X,Xs,K1,Ys).

rnd_select(_,0,[]).
rnd_select(Xs,N,[X|Zs]) :- N > 0,
length(Xs,L),
I is random(L) + 1,
remove_at(X,Xs,I,Ys),
N1 is N - 1,
rnd_select(Ys,N1,Zs).

not_attack([],_,_) :- !.
not_attack([Y|Ys],X,N) :-
X =\= Y+N, X =\= Y-N,
N1 is N+1,
not_attack(Ys,X,N1).

select([X|Xs],Xs,X).
select([Y|Ys],[Y|Zs],X) :- select(Ys,Zs,X). 
```

但它返回错误。我不能很好地理解序言，但我必须实现它。我找不到哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:06:22.653

你应该删除这条规则：**random_sort(_,[]) :- !。**. 这意味着无论第一个 arg 是什么，结果都是 []。

# algorithm - 如何扩大最小化算法的好变量

> ID：15875461
> 
> 赞同：0
> 
> 时间：2013-04-08T09:16:53.897
> 
> 标签：algorithm, optimization, minimization

我正在使用准牛顿算法（数值配方）进行最小化，我必须在其中分配变量。我选择了一些变量，但我不知道这些是很好的放大变量。有谁知道如何扩大好变量。我有一个带有 function(f(x)) 及其梯度的 c 代码以及准牛顿算法代码。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:28:40.357

我认为在大多数情况下，您不需要缩放。但是，如果您遇到参数相差几个数量级的情况，那么缩放可能是值得的。在这种情况下，我会通过第一次猜测来缩放参数。例如，如果您可以指定起点并且它与预期的真实值相差不远，它还应该提供合理的缩放。

# java - 在 ArgoUml 序列图中显示接口

> ID：15875463
> 
> 赞同：0
> 
> 时间：2013-04-08T09:16:58.560
> 
> 标签：java, uml, argouml

我正在使用 ArgoUml 绘制序列图。但是如何使用 ArgoUML 显示接口类以及实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:28:50.550

A`ClassifierRole`可以有 an`Interface`或 a`Class`与之关联，因为它们都是`Classifier`. 只需将要使用的类或接口拖到序列图上，然后开始在它们之间绘制动作。

# php - 从网页中获取特定文本

> ID：15875464
> 
> 赞同：1
> 
> 时间：2013-04-08T09:16:59.660
> 
> 标签：php

我在其他页面[测试中有此页面](http://inviatapenet.gethost.ro/sop/test.php)[测试1](http://inviatapenet.gethost.ro/sop/test1.php)

我运行这个 PHP 代码以从 test1 获取一些代码。

```
<?php
libxml_use_internal_errors(true);
$doc = new DOMDocument();
$doc->loadHTMLFile("http://inviatapenet.gethost.ro/sop/test1.php");

$xpath = new DOMXpath($doc);

$elements = $xpath->query("//*[@type='button']/@onclick");

if (!is_null($elements)) {
    foreach ($elements as $element) {
        $nodes = $element->childNodes;
        foreach ($nodes as $node) {
            echo $node->nodeValue. "\n";
        }
    }
}
?> 
```

结果是这样的

```
OnPlay('sop://broker.sopcast.com:3912/120704 cod ', ' eu - Nr.1 in tv ! ')
OnPlay('sop://broker.sopcast.com:3912/140601 cod ', ' eu - Nr.1 in tv ! ')     
OnPlay('sop://broker.sopcast.com:3912/124589 cod ', ' eu - Nr.1 tv') 
OnPlay('sop://broker.sopcast.com:3912/589994 cod ', ' eu - tv ') 
OnPlay('sop://broker.sopcast.com:3912/ cod ', ' eu - tv ') 
```

但我只需要所有这些数据：`sop://broker.sopcast.com:3912/140601

他们都是。

如何摆脱多余的文本或如何获取 (sop://broker.sopcast.com:3912/140601,sop://broker.sopcast.com:3912/120704)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:35:47.890

我认为您可能需要对生成的 OnClick 事件处理程序文本进行一些字符串操作。

```
<?php
libxml_use_internal_errors(true);
$doc = new DOMDocument();
$doc->loadHTMLFile("http://inviatapenet.gethost.ro/sop/test1.php");

$xpath = new DOMXpath($doc);

$elements = $xpath->query("//*[@type='button']/@onclick");
$value_text = array();
$index = 0;
if (!is_null($elements)) {
    foreach ($elements as $element) {
        $nodes = $element->childNodes;
        foreach ($nodes as $node) {
            value_text[$index++] = getReuiredValue($node->nodeValue);
        }
    }
    //value_text will contain all required values as array
    print_r($value_text);
}

    function getReuiredValue($on_play)
    {
   $pos = strpos($on_play, 'cod ');
   //following call will parse the OnPlay string and get the required value out of string
   $updated_on_play = substr($on_play, 8, (strlen($on_play) - (strlen($on_play) - $pos) - 8));
   $updated_on_play = trim($updated_on_play);
   return  $updated_on_play;
   }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:37:11.190

如果字符串总是这样格式化，你可以简单地使用[explode](http://php.net/manual/en/function.explode.php)来获取`sop://`URL。

```
<?php

header('Content-Type: text/plain; charset=UTF-8');

libxml_use_internal_errors(true);
$doc = new DOMDocument();
$doc->loadHTMLFile("http://inviatapenet.gethost.ro/sop/test1.php");

$xpath = new DOMXpath($doc);

$elements = $xpath->query("//*[@type='button']/@onclick");

if (!is_null($elements)) {
    foreach ($elements as $element) {
        $nodes = $element->childNodes;
        foreach ($nodes as $node) {
            echo $node->nodeValue. "\n";
            $content = $node->nodeValue;
            $content = explode("'", $content, 3);
            $content = explode(" ", $content[1], 2);
            $sop = $content[0];
            unset($content);
            var_dump($sop);
        }
    }
}
?> 
```

# android - 滑动菜单切换选项

> ID：15875467
> 
> 赞同：1
> 
> 时间：2013-04-08T09:17:13.773
> 
> 标签：android, menu, slidingmenu

我想使用 android 上的菜单按钮使滑动菜单从左到右切换。我面临的问题是，由于我在 create 方法的主要活动中使用了滑动菜单功能，因此我不知道如何在 onPrepareOptionMenu 方法中使用相同的变量。

```
SlidingMenu menu;
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    menu.setShadowWidth(10);
    menu.setBehindOffset(60);
    menu.setFadeDegree(0.25f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);
    menu.setBehindWidth(400);
    menu.setMenu(R.layout.menu_frame); 
```

这是我用来调用滑动菜单的代码，但是，我想在滑动手势旁边调用菜单按钮时启用切换按钮。

```
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    //try to enable the toggle here so that the sliding menu can appear/disappear
    return true;
} 
```

问题是，与大多数情况不同，我没有使用 Sherlock 活动扩展我的主类，因为我的主类已经在扩展一些其他活动。因此我以构造函数的形式使用滑动菜单（看我的例子）。我不确定如何集成切换功能。感谢所有的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:12:06.320

如果您需要覆盖 OptionsMenu 方法并且希望此方法公开您的 Activity，那么您首先将 Activity 创建到 Options 菜单，并且在您的 Activity 中需要扩展 CustomOptionMenuActivity。示例： 1\. 创建CustomOptionMenuActivity：

```
public class CustomOptionMenuActivity extends Activity {
    private Menu SlidingMenu;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        this.SlidingMenu = menu;
        return true;
    }

    public boolean onPrepareOptionsMenu(Menu menu) {
       MenuInflater inflater = getMenuInflater();
       inflater.inflate(R.menu.activity_main, menu);
       //try to enable the toggle here so that the sliding menu can appear/disappear
       return true;
    }
} 
```

然后您可以在任何活动中使用菜单，但您需要扩展此活动。例子：

```
public class MainActivity extends CustomOptionMenuActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
       // TODO Auto-generated method stub
    }
} 
```

祝你好运！

# android - iqengines 演示应用程序崩溃

> ID：15875470
> 
> 赞同：4
> 
> 时间：2013-04-08T09:17:18.680
> 
> 标签：android, android-ndk, image-recognition

我正在尝试将 iqengines sdk 集成到我的应用程序中（[https://github.com/iqengines/iqe-android-sdk](https://github.com/iqengines/iqe-android-sdk)）。我从他们无法正常运行的演示应用开始。安装了 Android NDK 和 Cygwin 1.7。我还在 Eclipse 子字符串下添加了 ANDROID_NDK_ROOT 并修改了 API 密钥（[https://github.com/iqengines/iqe-android-sdk#building-the-demo-app-](https://github.com/iqengines/iqe-android-sdk#building-the-demo-app-)）。应用程序仍然崩溃。这是堆栈跟踪。

```
04-08 14:32:25.181: E/AndroidRuntime(7610): FATAL EXCEPTION: main
04-08 14:32:25.181: E/AndroidRuntime(7610): java.lang.ExceptionInInitializerError
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.iqengines.sdk.IQE.initIqSdk(IQE.java:249)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.iqengines.sdk.IQE.(IQE.java:224)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.iqengines.demo.DemoActivity.initIqSdk(DemoActivity.java:161)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.iqengines.demo.DemoActivity.onCreate(DemoActivity.java:133)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.Activity.performCreate(Activity.java:5206)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.ActivityThread.access$700(ActivityThread.java:140)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.os.Looper.loop(Looper.java:137)
04-08 14:32:25.181: E/AndroidRuntime(7610): at android.app.ActivityThread.main(ActivityThread.java:4935)
04-08 14:32:25.181: E/AndroidRuntime(7610): at java.lang.reflect.Method.invokeNative(Native Method)
04-08 14:32:25.181: E/AndroidRuntime(7610): at java.lang.reflect.Method.invoke(Method.java:511)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-08 14:32:25.181: E/AndroidRuntime(7610): at dalvik.system.NativeStart.main(Native Method)
04-08 14:32:25.181: E/AndroidRuntime(7610): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load iqindex: findLibrary returned null
04-08 14:32:25.181: E/AndroidRuntime(7610): at java.lang.Runtime.loadLibrary(Runtime.java:365)
04-08 14:32:25.181: E/AndroidRuntime(7610): at java.lang.System.loadLibrary(System.java:535)
04-08 14:32:25.181: E/AndroidRuntime(7610): at com.iqengines.sdk.IQLocal.(IQLocal.java:34)
04-08 14:32:25.181: E/AndroidRuntime(7610): ... 18 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:06:39.567

我认为这是因为与 NDK 和 Windows 8 相关的问题。我切换到 Ubuntu，它工作正常。

# yii - 收集所有 Yii 模型验证错误的最佳方法

> ID：15875471
> 
> 赞同：2
> 
> 时间：2013-04-08T09:17:22.930
> 
> 标签：yii, helper

是否有任何内联方法来收集所有验证错误？现在我正在这样做：

```
$errors = '';
foreach($model->attributeNames() as $attr)
{
    $errors .= $model->hasErrors($attr) ? $model->getErrors($attr) : '';
} 
```

我认为这是多余的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:25:16.267

您可以简单地使用[`getErrors`](http://www.yiiframework.com/doc/api/1.1/CModel#getErrors-detail)不带参数，它将返回所有属性的错误。

您也可以使用[`Chtml::errorSummary`](http://www.yiiframework.com/doc/api/1.1/CHtml#errorSummary-detail)，它将显示一个或多个模型的验证错误摘要。

# django - 向 Django 添加错误代码

> ID：15875477
> 
> 赞同：1
> 
> 时间：2013-04-08T09:17:50.213
> 
> 标签：django, response, django-rest-framework

目前，当我的 Django 应用程序中发生错误时，这是​​作为错误返回的内容：

```
{
    "name": [
        "This field is required."
    ]
} 
```

我看到我可以像这样指定自定义错误消息

```
Field(error_messages = { 'required': '12' }) 
```

我想知道是否可以告诉 Django 在纯文本错误中返回错误代码？而不是用error_messages替换它。如果可能，最好的方法是什么？

像这样的东西会很好：

```
{
    "name": [
        "This field is required."
    ],
    "error_code": 12
 } 
```

这样我就可以在我的客户端而不是在服务器上用不同的语言翻译各种错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T02:23:51.270

这个问题被标记为 django-rest-framework。如果您确实在使用 DRF，则可以使用[自定义异常处理程序](http://www.django-rest-framework.org/api-guide/exceptions#custom-exception-handling)来执行此操作。

# java - SQLServerExeption 试图在列中插入 NULL 值

> ID：15875480
> 
> 赞同：2
> 
> 时间：2013-04-08T09:17:56.660
> 
> 标签：java, sql-server

我无法在允许空值的浮点型列中插入空值。我得到了这个例外：

```
SQLServerException: Operand type clash: varbinary is incompatible with float
    at (...) 
```

我`PreparedStatement`用来查询数据库。我用来设置这个特定值的代码是：

```
Float floatValue;

(...)

if((this.floatValue != null)&&(this.floatValue != 0)) ps.setFloat(col_pos,this.floatValue);
else ps.setNull(col_pos,java.sql.Types.NULL);

(...) int result = ps.executeUpdate(); //Here is when i get the error, when it tries to insert/update the table). 
```

我究竟做错了什么？这段代码（在我的代码的其他部分）适用于`nvarchar`或`int`列，这是我第一次收到此错误。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:20:39.460

`varbinary`将隐式转换为`nvarchar`and`int`但不是`float`。

请参阅此处的图表：http: [//msdn.microsoft.com/en-gb/library/ms187928.aspx](http://msdn.microsoft.com/en-gb/library/ms187928.aspx)

我怀疑您**没有**`nvarchar`在and`int`列中存储真正的数据库空值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T10:39:59.623

感谢**gbn**的回答，我意识到`ps.setNull(col_name, java.sql.Types.NULL)`在我的代码中使用时真正发生了什么。我错了，我需要指定要插入 NULL 值的列的类型。所以解决方案是：

```
ps.setNull(col_name, java.sql.Types.FLOAT); 
```

当我需要在我第一次使用的列中设置空值时`ps.setInt(col_name,null)`，它会返回异常，因为 setter 方法使用标准基本类型（int、float、...）而不是对象。我搜索了一个解决方案，但我（错误地）了解到我需要使用`ps.setNull(col_name, java.sql.Types.NULL)`. 这

为什么`java.sql.Types.NULL`？我不知道，我以为这是在列中添加null的方法。

然后gbn的说：

> varbinary 将隐式转换为 nvarchar 和 int 但不是 float (...) *我怀疑您**没有**在 nvarchar 和 int 列中存储真正的数据库 null*

So I considered that possibility that, internally, my connection was creating a *varbinary NULL* and the exception appeared when trying to convert it to a Float type, not supported according to the graph referred by gbn. Then I tried to specify a `java.sql.Types.FLOAT` type and it worked.

I hope this explanation would help other users with similar issues. Thank you **gbn** for providing me the hints.

# c# - 使用 abcpdf 更改特定页面的插图

> ID：15875481
> 
> 赞同：0
> 
> 时间：2013-04-08T09:17:57.277
> 
> 标签：c#, asp.net, .net, abcpdf

我使用 abcpdf 从 html 字符串创建 pdf。以下代码段显示了我的操作方式：

```
var pdfDocument = new Doc();
pdfDocument.Page = pdfDocument.AddPage();

pdfDocument.Font = pdfDocument.AddFont("Times-Roman");
pdfDocument.FontSize = 12;

var documentId = pdfDocument.AddImageHtml(innerHtml);
var counter = 0;

while (true)
{
    counter++;
    if (!pdfDocument.Chainable(documentId))
    {
        break;
    }

    pdfDocument.Page = pdfDocument.AddPage();

    // how to add a inset of 20, 0 on every page after the second? The following 2lines don't affect the pdf pages
    if (counter >= 3)
        pdfDocument.Rect.Inset(20, 0);                

    documentId = pdfDocument.AddImageToChain(documentId);
} 
```

在 AddPage 之后，我想为 pagenumber > 2 的每个页面添加一个新的插图

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:16:27.490

我可以向您保证，您的插入电话将产生影响。尝试在每个页面上调用 FrameRect，您应该能够看到这一点。

那么，为什么您没有看到您期望的效果呢？

好吧，您的 HTML 在您调用 AddImageUrl/HTML 时具有固定宽度。对 AddImageToChain 的每个后续调用都使用此固定宽度。

如果在“插入”页面中降低页面区域的高度，则页面的下一部分将被截断到该高度。

If in your 'inset' pages you reduce the width of the area then things become more difficult. The width is fixed so it can't be changed. Instead ABCpdf will scale the page down so that it does fit.

So if you reduce the width from say 600 points to 580 points then the scale factor for this content would be 580/600 = 97%.

Most likely this is what is happening but because the scale factor is small you are not noticing it.

I work on ABCpdf and my replies may contain concepts based around ABCpdf. It's what I know. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T10:41:38.447

Comment #1 from SwissCoder was right. `AddImageHtml` already adds the first page. After also contacting the WebSuperGoo support, they recommend me to use `PageCount`of class `Doc`.

```
while (true)
{
    if (!pdfDocument.Chainable(documentId))
    {
        break;
    }

    pdfDocument.Page = pdfDocument.AddPage();

    if (pdfDocument.PageCount >= 3)
        pdfDocument.Rect.Inset(0, 20);
    documentId = pdfDocument.AddImageToChain(documentId);
} 
```

The other solution would be to adjust the index to count unto `required pagenumber - 1` as `ÀddImageHtml` already adds the first page to the document.

# c# - 在子页面中单击超链接时设置父页面中树视图的选定值

> ID：15875482
> 
> 赞同：0
> 
> 时间：2013-04-08T09:17:59.233
> 
> 标签：c#, javascript, treeview

我在父页面中有一个 TreeView onclick 子页面中的超链接我想更改树视图的选定节点有人可以告诉我如何做到这一点吗？我对此有点陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:28:53.327

您可以为此目的使用 Jquery。

请参阅以下可能会指导您的 lnik。

[从父页面调用函数时出现 JQuery onclick 问题](https://stackoverflow.com/questions/6646068/jquery-onclick-issue-when-calling-a-function-from-the-parent-page)

# c# - ExecuteCommand 抛出“方法或操作未实现”异常

> ID：15875485
> 
> 赞同：1
> 
> 时间：2013-04-08T09:18:23.153
> 
> 标签：c#, wia

在 WIA 中，ExecuteCommand 出现异常：

```
The method or operation is not implemented 
```

代码：

```
WIA.CommonDialog dialog = new WIA.CommonDialog();
WIA.Device camera = dialog.ShowSelectDevice(WIA.WiaDeviceType.CameraDeviceType, false, true);
WIA.Item takenItem = camera.ExecuteCommand("{AF933CAC-ACAD-11D2-A093-00C04F72DC3C}"); 
```

有什么帮助……？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-07T15:28:29.273

如果您遇到错误，您可能有不合适的相机。微软多年前取消了 WIA 库，最新的数码相机不支持 WIA 协议。以下是适用相机的简短列表：

数字 IXUS 430 数字 IXUS 500 数字 IXUS IIs PowerShot A310 PowerShot A400 PowerShot A75 PowerShot A85 PowerShot A95 PowerShot Pro1 PowerShot S1 IS PowerShot S60

还有（也许）：

```
Agfa ePhoto 307
Agfa ePhoto 780
Agfa ePhoto 1280
Agfa ePhoto 1680
Canon PowerShot A5
Canon PowerShot A5 Zoom
Canon PowerShot Pro70
Casio QV 10
Casio QV 10A
Casio QV 11
Casio QV 30
Casio QV 70
Casio QV 100
Casio QV 120
Casio QV 200
Casio QV 300
Casio QV 700
Casio QV 770
Casio QV 5000SX
Casio QV-770 (IrTran-P)
Casio QV-5000SX (IrTran-P)
Casio QV-7000SX (IrTran-P)
Epson PhotoPC / CP-100
Epson PhotoPC 500 / CP-200
Epson PhotoPC 600 / CP-500
Epson PhotoPC 700 / CP-600
Epson PhotoPC 750Z / CP-700Z
FujiFilm DX-5/DS-10
FujiFilm DX-7/DS-20
FujiFilm DX-9/DS-30
FujiFilm MX-700
FujiFilm DS-300
HP PhotoSmart C20
HP PhotoSmart C30
HP PhotoSmart C200
JVC GCS1 (IrTran-P)
Kodak DC200
Kodak DC210
Kodak DC215
Kodak DC220 (USB only)
Kodak DC260 (USB only)
Kodak DC265 (USB only)
Kodak DC290 (USB only)
Kodak DC240 (USB only)
Kodak DC280 (USB only)
Konica Q-M100
Konica Q-M100V
Minolta Dimage V
Nikon CoolPix 900
Nikon CoolPix 950
Nikon CoolPix 700
Olympus D-200L
Olympus D-220L
Olympus D-300L
Olympus D-320L
Olympus D-340L
Olympus D-340R
Olympus D-500L
Olympus D-600L
Olympus D-400Z
Sanyo DSC-V1/VPC-G200
Sanyo DSC-X1/VPC-X300
Sharp VE-LC2 (IrTran-P)
Sony DSC-F3 (IrTran-P)
UMAX AstraCam (USB)
UMAX AstraCam 1000 (USB) 
```

佳能 IXUS 162,170,180 等最新数码相机不支持 WIA 协议。如果您正在寻找旧的“拍照”WIA 1.x/2.x 命令的替代品：{AF933CAC-ACAD-11D2-A093-00C04F72DC3C}，合适的方法是佳能 EOS 系列和佳能SDK 库。

杰瑞

# c - 如何通过 openssl 检索 ssl 证书的颁发者替代名称

> ID：15875494
> 
> 赞同：7
> 
> 时间：2013-04-08T09:18:51.050
> 
> 标签：c, ssl, openssl

我可以获得主题替代名称，例如

```
 X509_NAME_get_text_by_NID(X509_get_subject_name(x), NID_subject_alt_name, hc->https_domain_name, 256) 
```

通过将 2\. 参数更改为**NID_issuer_alt_name**使用相同的方法，我期望获得颁发者名称，例如；

```
X509_NAME_get_text_by_NID(X509_get_subject_name(x), NID_issuer_alt_name, hc->https_ca_name, 256); 
```

但相反，我得到一个空字符串。如何正确检索发行人替代名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:55:23.493

[您可以按照https://github.com/iSECPartners/ssl-conservatory](https://github.com/iSECPartners/ssl-conservatory)中的建议尝试以下解决方案：

```
static HostnameValidationResult matches_subject_alternative_name (const char *hostname, const X509 *server_cert) {
    HostnameValidationResult result = MatchNotFound;
    int i;
    int san_names_nb = -1;
    STACK_OF(GENERAL_NAME) *san_names = NULL;

    // Try to extract the names within the SAN extension from the certificate
    san_names = X509_get_ext_d2i((X509 *) server_cert, NID_subject_alt_name, NULL, NULL);
    if (san_names == NULL) {
        return NoSANPresent;
    }
    san_names_nb = sk_GENERAL_NAME_num(san_names);

    // Check each name within the extension
    for (i=0; i<san_names_nb; i++) {
        const GENERAL_NAME *current_name = sk_GENERAL_NAME_value(san_names, i);

        if (current_name->type == GEN_DNS) {
            // Current name is a DNS name, let's check it
            char *dns_name = (char *) ASN1_STRING_data(current_name->d.dNSName);

            // Make sure there isn't an embedded NUL character in the DNS name
            if (ASN1_STRING_length(current_name->d.dNSName) != strlen(dns_name)) {
                result = MalformedCertificate;
                break;
            }
            else { // Compare expected hostname with the DNS name
                if (strcasecmp(hostname, dns_name) == 0) {
                    result = MatchFound;
                    break;
                }
            }
        }
    }
    sk_GENERAL_NAME_pop_free(san_names, GENERAL_NAME_free);

    return result;
} 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T21:29:20.933

在您使用 NID_issuer_alt_name 常量调用 X509_NAME_get_text_by_NID 时，我会将 X509_get_subject_name(x) 替换为 X509_get_issuer_name(x)。我认为这应该可以解决您的问题。

# javascript - 文本区域中的示例文本

> ID：15875502
> 
> 赞同：0
> 
> 时间：2013-04-08T09:19:13.487
> 
> 标签：javascript

我正在尝试创建一个文本区域，其中包含一些示例文本，这些文本在用户开始输入时会消失。我有下面哪种代码有效。但...

默认文本仅在我聚焦和取消聚焦 textarea 时出现，我尝试添加一个 onload 选项来显示此文本，但它不想为我工作。

当我在不触摸示例文本的情况下保存页面时，文本将变为保存的文本颜色，而不是保持默认的灰色。

我不认为我离这里太远了，但是大部分时间都在兜圈子，感谢所有帮助

```
 <textarea STYLE='background:white; height:80; width:100%;' name="notes"
     onfocus="if (this.value == 'Example of what you need to do here') {
       this.value = '';
       this.style.color = '#D10034';
     }"
     onblur="if (this.value == '') {
       this.value = 'Example of what you need to do here'
       this.style.color = '#919191';
     }"
     style="color:#D10034"; >$notes</textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:22:50.207

该[`placeholder`属性](http://www.w3.org/TR/html5/forms.html#attr-textarea-placeholder)是为提示和示例文本提供的。

```
<textarea name="nodes" placeholder="Example of what you need to do here"></textarea> 
```

无需涉及 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:29:37.433

为输入提供命中的更好方法是您可以使用**占位符**属性，也可以自定义**tooltip**。您可以尝试以下代码：

```
<textarea placeholder="text to be display as example" name="nameoftextarea"></textarea> 
```

# highstock - 如何克服 Highstock-Stockchart 中的缺失值？

> ID：15875506
> 
> 赞同：1
> 
> 时间：2013-04-08T09:19:20.767
> 
> 标签：highstock

也许我正在查看它，但我不认为这是图表中的设置（否则我会提前找借口）。

关于打印服务器的工作量，我对 3 年多的时间有一些看法。在某些日子里，我有 24 个值（每小时一个），而在其他日子里，我没有值（在数据库中，因为值为 0，创建值为 0 的记录会有点过分）。

可见图表似乎没有考虑这些缺失值，尽管每个值都由 Unix 时间戳标识，并且图表可以将缺失值填充为 0。

这可以通过图表中的选项实现，还是我必须自己重建数据并填写缺失值？

您可以在这张图片上清楚地看到这一点（没有足够的积分来上传图片）。 [http://driezel.be/Values.png](http://driezel.be/Values.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:50:02.790

不幸的是 highstock 不支持解析您的数据，但您可以在 highstock 初始化之前尝试设置 tickInterval ( [http://api.highcharts.com/highstock#xAxis.tickInterval](http://api.highcharts.com/highstock#xAxis.tickInterval) ) 或准备具有正确值的数据。

# sql - 如何更新查询

> ID：15875511
> 
> 赞同：-3
> 
> 时间：2013-04-08T09:19:25.467
> 
> 标签：sql

如何更新选择的某些字段？（类似于以下内容）

```
update (select *
        from Students s
        join Father f on s.fId=f.Id
        where s.Id=12)
set f.FirstName='John' 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:20:58.163

尝试：

```
Update Students
set FirstName='John'
where Id=12 
```

在这种情况下不需要选择。检查链接[SQL UPDATE 语句](http://www.w3schools.com/sql/sql_update.asp)以获取更多详细信息。

在您的情况下，您可以[在更新时使用 SQL Server - 内部联接](https://stackoverflow.com/questions/9588423/sql-server-inner-join-when-updating)

```
UPDATE f
SET FirstName='John'
FROM Students s JOIN Father f 
    ON s.fId=f.Id 
WHERE s.Id=12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:40:48.443

对于这种情况，您可以使用加入更新。例如，如果您需要为儿子设置父亲的姓氏，您可以使用这样的查询。

```
UPDATE SonsDetails SET Surname = Father.Surname
FROM [dbo].[SonDetails] AS SonsDetails INNER JOIN [dbo].[FatherDetails] Father 
ON [SonsDetails].[FatherId] = Father.Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:21:07.083

```
UPDATE Students
SET FirstName='John'
WHERE ID = 12 
```

那应该对你有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:21:28.807

要使用特定更新`FirstName`a ，请执行以下操作：`Student``Id`

```
update Students 
set FirstName='John'
where Id=12 
```

# authentication - twitter4j getHomeTimeline 错误的身份验证数据

> ID：15875515
> 
> 赞同：1
> 
> 时间：2013-04-08T09:19:30.373
> 
> 标签：authentication, twitter-oauth, twitter4j

我正在尝试使用 twitter4j 获取我的 getHomeTimeline。我的 twitter 帐户已经验证了应用程序的读/写访问权限，并且我已经存储了 access-token 和 access-token-secret。但是当我尝试访问我的帐户时，我得到以下错误。知道可能是什么问题吗？谢谢 请注意，我的 Twitter 帐户不是创建/拥有 twitter 应用程序的帐户

```
400:The request was invalid. An accompanying error message will explain why. This is the status code will be returned during version 1.0 rate limiting(https://dev.twitter.com/pages/rate-limiting). In API v1.1, a request without authentication is considered invalid and you will get this response.
message - Bad Authentication data
code - 215 
```

但是当我使用创建 twitter 应用程序的帐户的 access-token 和 access-token-secret 时，一切正常。

我正在使用 jsOAuth.js 库对用户进行身份验证并获取访问令牌，并使用 twitter4j 查询 twitter

代码：

```
ConfigurationBuilder configurationBuilder = new ConfigurationBuilder();
configurationBuilder.setDebugEnabled(true);
configurationBuilder.setOAuthConsumerKey(prop.getTwitterConsumerKey());
configurationBuilder.setOAuthConsumerSecret(prop.getTwitterConsumerSecret());
configurationBuilder.setOAuthAccessToken(accessToken);
configurationBuilder.setOAuthAccessTokenSecret(accessTokenSecret);
configurationBuilder.setUseSSL(true);
Configuration configuration = configurationBuilder.build();
Twitter twitter = new TwitterFactory(configuration).getInstance();
try {
    twitter.getHomeTimeline();
 } catch (Exception e) {                
    e.printStackTrace();
} 
```

堆栈跟踪：

```
Relevant discussions can be found on the Internet at:
    http://www.google.co.jp/search?q=e5488403 or
    http://www.google.co.jp/search?q=09b41b0f
TwitterException{exceptionCode=[e5488403-09b41b0f], statusCode=400, message=Bad Authentication data, code=215, retryAfter=-1, rateLimitStatus=null, version=3.0.3}
    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:177)
    at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:61)
    at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:81)
    at twitter4j.TwitterImpl.get(TwitterImpl.java:1835)
    at twitter4j.TwitterImpl.getHomeTimeline(TwitterImpl.java:117)
    at com.alcrea.stc.st.server.service.mobile.MobileService.addTwitterUser(MobileService.java:346)
    at com.alcrea.stc.st.server.service.servlet.mobile.MobileServlet.doPost(MobileServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1097)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:50:49.287

fixed, i removed jsOAuth.js library and used only twitter4j and it worked great. it looks like each library is uses different OAuth signature...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T19:55:49.610

Removed twitter4f 3.0.3 and loaded 3.0.5 and the issue was resolved.

sbt:

```
libraryDependencies ++= Seq(
  "org.twitter4j" % "twitter4j-core" % "3.0.5",
  "org.twitter4j" % "twitter4j-stream" % "3.0.5" 
```

# neo4j - 匹配所有路径的密码查询

> ID：15875518
> 
> 赞同：1
> 
> 时间：2013-04-08T09:19:35.253
> 
> 标签：neo4j, cypher

我有一个带有“项目”、“员工”和“技术”等节点的图表。项目与技术、员工与技术之间存在关系。

我想找到了解项目使用的所有技术的员工。我的 cyper 查询如下所示：

```
start project=node:project(name = "Project1") 
match technology <-[:USED]- project , employee -[:KNOWS]-> technology 
return employee 
```

运行此查询时，我让所有员工了解项目使用的一种技术，并希望员工了解项目使用的所有技术。这在密码中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:17:09.453

您可以尝试以下方法：

```
start project=node:project(name = "Project1") 
match employee -[:KNOWS]-> technology <-[:USED]- project 
with count(technology) as knownTech, employee, project
where length(()<-[:USED]-project)=knownTech
return employee 
```

请参阅[查找具有所有公共中介的节点](https://stackoverflow.com/questions/14657265/finding-nodes-that-have-all-common-intermediaries/14662744#14662744)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:44:17.167

我可能会使用它来避免计算每个员工项目使用的技术数量：

```
start project=node:project(name = "Project1") 
match technology <-[:USED]- project 
with count(technology) as projectTech, project
match employee -[:KNOWS]-> technology <-[:USED]- project 
with count(technology) as knownTech, projectTech, employee
where projectTech=knownTech
return employee 
```

# hibernate - 使用 spring data jpa 来更新实体（无需一一复制字段）

> ID：15875520
> 
> 赞同：1
> 
> 时间：2013-04-08T09:19:35.957
> 
> 标签：hibernate, jpa, spring-data-jpa

我有一个**新的/非托管**实例`Address`和一个**托管**实例`Member`作为参数传入以下方法：

```
@Override
public void modifyAddress(Member member, Address address){
    long addressId = member.getAddress().getId();//retrieving id of managed address instance
    address.setId(addressId);//setting id on unmanaged instance
    updateAddress(address);//updating unmanaged instance
} 
```

方法的实现`updateAddress`：

```
 public Address PreferencesServiceImpl.updateAddress(Address address) {
        return addressRepository.save(address);
 } 
```

如您所见，我正在尝试更新地址和 JPA，但有以下例外：

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.Address#5]
    org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:303)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:903)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:887)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)
    org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:366)
    com.sun.proxy.$Proxy122.merge(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:241)
    com.sun.proxy.$Proxy121.merge(Unknown Source)
    org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:353)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:333)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:96)
    org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:260)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:92)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    com.sun.proxy.$Proxy137.save(Unknown Source)
    com.bignibou.service.PreferencesServiceImpl_Roo_Service.ajc$interMethod$com_bignibou_service_PreferencesServiceImpl_Roo_Service$com_bignibou_service_PreferencesServiceImpl$updateAddress(PreferencesServiceImpl_Roo_Service.aj:81)
    com.bignibou.service.PreferencesServiceImpl.updateAddress(PreferencesServiceImpl.java:1) 
```

**除了繁琐地将字段从非托管实例（`address`参数）复制到托管实例（`member.getAddress()`）并更新**托管实例之外，我不确定如何做到这一点。

有人可以请教吗？

**编辑1**：

我已经设置了一个重现该问题的示例应用程序。任何希望使用示例 github 应用程序重现问题的人都需要：

*   马文
*   吉特
*   JDK 6
*   MySQL

他们可以按照以下步骤重现问题：

*   `git clone git@github.com:balteo/StaleObjectStateException.git`
*   在 mysql 中创建一个名为 sose 的数据库模式`create database sose;`
*   `mvn test`
*   瞧：`BOOM`！

谁能向我解释为什么在我的情况下会发生此异常以及如何更新地址实例而不会出现此异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:37:33.883

> *long addressId = member.getAddress().getId();*

有一个**Member实例已经保存在数据库中 - 它与已经保存在数据库中的****Address**实例具有外键关系。FK 关系通过**member.getAddress()**在对象模型中导航。Address 实例的主键是**member.getAddress().getId()**。

> *address.setId(addressId)*

您在对象模型中创建了 Address 的*另一个*新实例，并手动将主键设置为与数据库中保存的预先存在的实例*相同的主键，然后尝试保存新实体。*

This is illegal. If you wish to update a pre-existing entity you must load it, start a transaction, modify the attributes and commit the transaction. If you wish to add a new entity, you must start a transaction, create a new instance, populate its attributes (including a NEW unique primary key), save it and commit the transaction.

You can automatically populate new unique PK values by using the JPA @Id annotation plus the @GeneratedValue annotation on the PK attribute (plus optionally one of @SequenceGenerator/@TableGenerator annotation somewhere else in your code - usually on a class). Here are two tutorials: [http://www.oracle.com/technetwork/middleware/ias/id-generation-083058.html](http://www.oracle.com/technetwork/middleware/ias/id-generation-083058.html) [http://www.objectdb.com/java/jpa/entity/generated](http://www.objectdb.com/java/jpa/entity/generated)

Hope this helps! :^)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-15T18:13:38.437

What Glen Best said is the correct behaviour of JPA data. So there is not much you can do about it.

However, there is a clear way of doing which was recommended by Jonas Geiregat -> [https://stackoverflow.com/a/25155104/2951619](https://stackoverflow.com/a/25155104/2951619). Instead of checking which fields has been modified one by one and therefore updating those fields manually. Handling those tedious null pointer checking is just ugly.

Making your entity class to implemented Persistable< T > and override isNew() accordingly.

```
public class MyClass implements Persistable<Integer> {
  @JsonIgnore
  @Override
  public boolean isNew() {
    return this.id  == null;
  }
} 
```

After that, instead of checking each updated field, making the front-end to send back the whole object including fields have not been modified even just one field modification. In your service, you can then just get the existing myClass.getId() and set that id in the object that front-end send back.

```
 public MyClass updateClass(Integer id, MyClass modifiedClass) {
    MyClass existingClass = repository.findById(id);

    // you can also prevent id parameter does not exist in the database
    // get the existing object incase you have nested objects
    modifiedClass.getNestedObject().setId(
     existingClass.getNestedObject().getId());
    modifiedClass.setId(existingClass.getId());

    return repository.save(modifiedClass);
  } 
```

# javascript - Div 填充剩余的垂直空间

> ID：15875521
> 
> 赞同：0
> 
> 时间：2013-04-08T09:19:37.413
> 
> 标签：javascript, css, html

我有一个复杂的 HTML 应用程序，所以很遗憾不能真正提供代码示例。我们试图让 div（以红色突出显示）来填充剩余的垂直空间（见图）。

![应用](https://i.stack.imgur.com/m8kGG.png)

该应用程序包含一个标题（黑色），左侧的侧边栏可以关闭或调整大小（注意：水平组件调整大小正确）。侧边栏的右侧是另一个 div (mainDiv)。mainDiv 在顶部包含一个用于控件的 div，在其下方包含一个用于数据表的 div（以红色突出显示）。

此表可能包含大量数据，因此如果数据不适合屏幕，它需要自己的滚动条。

我们只想让表格填满所有可用的水平和垂直空间。我们似乎无法让它发挥作用。

我们创建了一个 jsfiddle 示例来尽可能地展示我们的布局。这可以在[这里](http://jsfiddle.net/8pPPm/)看到。我们只希望这个 div（在 jsfiddle 中 div 称为“tablewrap”）占用所有剩余空间。

代码（来自 jsfiddle）如下：

**html**

```
<div class="header">Header</div>
<div class="sidebar">This is the sidebar</div>
<div class="tablewrapper">
    <div class="tableheader-controls-etc"></div>
    <div class="tablewrap">table</div>
 </div> 
```

**css**

```
.header { height: 50px; background:black; color:white; }
.sidebar { height:100%; position:fixed; width 200px; background:gray; color:white; }
.tablewrapper{ float:right; width:75%; border:1px solid; margin-top:30px; margin-right:30px;}
.tableheader-controls-etc { height:150px; background:blue; color:white; }
.tablewrap { height: 200px; border: 2px solid red; width:100%; overflow:auto;} 
```

如果有人能提供一个很棒的解决方案。我们更喜欢 CSS，但可以处理 Javascript。

谢谢，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:37:25.723

诀窍是设置`position: absolute`，然后根据需要调整顶部、底部、左侧和右侧属性。见[小提琴](http://jsfiddle.net/8pPPm/6)和[解释](https://stackoverflow.com/questions/485827/css-100-height-with-padding-margin)。

```
.tablewrap {
  position: absolute;
  top: 240px;
  bottom: 0;
  left: 150px;
  right: 40px;
  height: auto;
  width: auto;
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:26:14.130

你可以试试这个：

```
.tablewrap { height: 200px; border: 2px solid red; width:100%; overflow:auto; min-height:300px} 
```

（根据需要设置最小高度）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:53:25.510

好吧，是时候说出你可能不想听到的话了，呵呵：你不能用 CSS 做到这一点。

您必须使用 javascript 才能找出两件事：

1.  视口高度
2.  控制 div 高度

知道这两个高度后，您可以将桌子高度设置为：

```
finalHeight = viewport - (controls+header+footer) 
```

如果页眉和页脚也有动态高度，请使用 javascript 计算它们。

您还需要在调整窗口大小时重新计算此高度。当然，如果禁用了 javascript，您的布局将无法正常工作。

# c# - ListViewItem 图像未显示在虚拟 ListView 上

> ID：15875525
> 
> 赞同：0
> 
> 时间：2013-04-08T09:19:57.023
> 
> 标签：c#, .net, winforms, listview

我有一个 System.Windows.Forms.ListView。在正常（非虚拟）操作下，ListViewItems 的图像正确显示。但是，当我尝试将 ListView 转换为虚拟模式时，项目不再显示其图像。其他所有内容（文本、索引等）都按预期显示。

ListView 处于详细信息模式。SmallImageList 设置正确。每个 ListViewItem 都正确设置了其 ImageKey。ImageList 已正确填充。

为什么图像没有显示在虚拟 ListView 上？我可以做些什么来确保图像按预期显示？

编辑：请参阅以下代码作为演示我遇到的问题的示例。

```
static class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new VirtualListViewExample());
    }
}

class VirtualListViewExample : Form
{
    public VirtualListViewExample()
    {
        Image image = new Bitmap(16, 16);
        using (Graphics g = Graphics.FromImage(image))
        {
            g.FillRectangle(Brushes.Black, 0, 0, 16, 16);
        }

        ImageList imageList = new ImageList();
        imageList.ColorDepth = ColorDepth.Depth32Bit;
        imageList.ImageSize = new Size(16, 16);
        imageList.Images.Add("key", image);

        ListView normalList = new ListView();
        normalList.Columns.Add("Column");
        normalList.Dock = DockStyle.Fill;
        normalList.View = View.Details;
        normalList.VirtualMode = false;
        normalList.SmallImageList = imageList;
        for (int i = 0; i < 100; i++)
        {
            ListViewItem item = new ListViewItem();
            item.Text = "Item " + i.ToString();
            item.ImageKey = "key";
            normalList.Items.Add(item);
        }

        ListView virtualList = new ListView();
        virtualList.Columns.Add("Column");
        virtualList.Dock = DockStyle.Fill;
        virtualList.View = View.Details;
        virtualList.VirtualMode = true;
        virtualList.SmallImageList = imageList;
        virtualList.RetrieveVirtualItem += (s, e) =>
        {
            e.Item = new ListViewItem();
            e.Item.Text = "Item " + e.ItemIndex.ToString();
            e.Item.ImageKey = "key";
        };
        virtualList.VirtualListSize = 100;

        SplitContainer split = new SplitContainer();
        split.Dock = DockStyle.Fill;
        split.Panel1.Controls.Add(normalList);
        split.Panel2.Controls.Add(virtualList);
        this.Controls.Add(split);

        split.SplitterDistance = split.Width / 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-15T16:29:56.067

I know this an old question, but for sake of someone looking for this:

In Virtual mode, item.ImageKey will not work. Use item.ImageIndex instead. ImageList.ImageCollection has a IndexOfKey() method to convert the key into index.

```
 virtualList.RetrieveVirtualItem += (s, e) =>
    {
        e.Item = new ListViewItem();
        e.Item.Text = "Item " + e.ItemIndex.ToString();
        e.Item.ImageIndex = imagelist.Images.IndexOfKey("key");
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:58:00.117

How can this work at all with ListView controls and ImageList being local variables of the c'tor? Does it work any better if they are member of the VirtualListViewExample class ?

UPDATE: My suggestion above is plain wrong. See [duplicate question](https://stackoverflow.com/questions/5712164/how-to-show-icon-on-all-listview-items-in-virtual-mode-c) for a workaround to this issue.

# file-upload - Fine Uploader：在上传之前调整大文件的大小？

> ID：15875529
> 
> 赞同：3
> 
> 时间：2013-04-08T09:20:05.467
> 
> 标签：file-upload, fine-uploader

我正在评估[Fine Uploader](http://fineuploader.com/)与其他各种选项相比，特别是[JQuery File Upload](http://blueimp.github.io/jQuery-File-Upload/)。

与依赖于 Bootstrap 和 JQuery UI 的 JQuery File Uploader 相比，我通常更喜欢 Fine Uploader 方法，因为它更轻量级。

然而，能够调整图像大小很重要：例如，**用户可能会从他们的相机中选择一个大文件，这可能非常大 - 上传全分辨率照片可能需要很长时间**。JQuery 文件上传就是这样做的。

此外，我们对非常高分辨率的文件没有太多用处。

如果可能（我知道某些浏览器可能不支持此功能），我希望能够调整图像客户端大小。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:55:11.850

Fine Uploader 目前没有对图像处理的任何原生支持。这是我们积压中的一个功能，但我们没有很多用户告诉我们他们对此感兴趣。这是尚未在本地实现此类功能的原因之一。有一个案例[#707](https://github.com/Widen/fine-uploader/issues/707)标志着 Fine Uploader 开始支持原生图像编辑。*暂定*为4.0。

但是，您当然可以使用`FileReader`并`Canvas`调整图像大小。然后，您可以通过API 方法将此调整大小的图像作为文件提交`Blob`给 Fine Uploader 。`addFiles`此时，文件已提交，Fine Uploader 已准备好上传项目。

本质上，在 Fine Uploader 原生支持图像处理之前，您将按照以下步骤处理此特定场景：

1.  提供您自己的文件输入元素或利用 Fine Uploader 的文件/文件夹拖放支持来处理用户选择的某些文件。
2.  用于`FileReader`读取图像的内容。
3.  `FileReader`将为您提供图像的 URL，将其分配给元素的`src`属性。`img`
4.  将 绘制`img`到`canvas`元素上。这是调整大小的地方。
5.  `canvas`从元素 ( `canvas.toDataURL(...)`)中获取调整大小图像的 URL 。
6.  将 URL 转换为`Blob`.
7.  传递`Blob`给`addFiles`Fine Uploader 的 API 方法。

The intent is to take care of most if not all of this for integrators such as yourself in the future by adding native image manipulation support to Fine Uploader.

Hope this helps.

# javascript - 通过使用 lodash 或下划线的路径在 JSON 中设置值

> ID：15875531
> 
> 赞同：6
> 
> 时间：2013-04-08T09:20:07.800
> 
> 标签：javascript, json, underscore.js, lodash

我想使用这样的路径字符串`"a.0.b"`为 JSON 设置 JSON 中的值，如下所示：

```
{
  a: [
    {
      b: 'c'
    }
  ]
} 
```

我想出了这个解决方案，但我想知道是否有更简单的方法来写这个：

```
function setValue(path, value, json) {
  var keys = path.split('.');
  _.reduce(keys, function(obj, key, i) {
    if (i === keys.length - 1) {
      obj[key] = value;
    } else {
      return obj[key];
    }
  }, json);
} 
```

所以调用`setValue('a.0.b', 'd', {a:[{b:'c'}]})`会将json更改为`{a:[{b:'d'}]}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T16:43:07.503

这是一个解决方案。我对这两种可能的解决方案进行了基准测试，似乎循环对象和路径比使用 reduce 函数更快。在此处查看 JSPerf 测试：http: [//jsperf.com/set-value-in-json-by-a-path-using-lodash-or-underscore](http://jsperf.com/set-value-in-json-by-a-path-using-lodash-or-underscore)

```
function setValue(path, val, obj) {
  var fields = path.split('.');
  var result = obj;
  for (var i = 0, n = fields.length; i < n && result !== undefined; i++) {
    var field = fields[i];
    if (i === n - 1) {
      result[field] = val;
    } else {
      if (typeof result[field] === 'undefined' || !_.isObject(result[field])) {
        result[field] = {};
      }
      result = result[field];
    }
  }
} 
```

# python - 使用 python-ctypes 将 fortran 与 python 接口

> ID：15875533
> 
> 赞同：10
> 
> 时间：2013-04-08T09:20:15.943
> 
> 标签：python, fortran, ctypes, fortran90, gfortran

经验：
fortran 约 3 个月
python - 中级：在此之前从未在 python 中使用过 ctypes 模块

我正在寻找一种将 fortran 代码用于我在 python 中的博士工作的方法 - 随后使用计算进行动态可视化，以使用 matplotlib 进行可视化。

[这篇文章](https://scicomp.stackexchange.com/a/2287/3732)有帮助（这表明可以使用 ctypes 模块在 python 中使用/调用 fortran 代码 - 并且鉴于 fortran 函数具有绑定到它们的备用名称 - 这在逻辑上对我来说很有意义，尽管我不知道这是如何工作的细节。但我们确实**明智**地选择了我们的战斗！）。
然后[这个 SO 帖子](https://stackoverflow.com/questions/9866412/call-fortran-function-from-with-ctypes)也处理从 python 调用 fortran 函数。

下一个合乎逻辑的步骤是查找[python 模块 ctypes 的文档](http://docs.python.org/2/library/ctypes.html)。这讨论了如何在 API 级别使用 python 访问共享库。

我有所有的东西来制作一个最小的工作示例，[另一个答案已经完成了](https://stackoverflow.com/a/5812245/1472196)。但我想看看输出机制和涉及真实浮点数的数学运算。这是我制作的测试用例。

## 测试.f90

```
function prnt(s)
    character(80):: s
    logical :: prnt
    print*, s
    prnt = .true.
end function prnt

function sin_2(r)
    real:: r,sin_2
    sin_2 = sin(r)**2
end function sin_2 
```

## 制作共享对象

```
$gfortran -shared  -g -o test.so test.f90 
```

编辑：出于某种原因，我的工作计算机需要 -fPIC 选项来编译

为了确保我的两个功能`prnt`都`sin_2`在某个地方，我检查了`nm`：

```
$ nm test.so | tail -3  
0000067f T prnt_
0000065c T sin_2_
         U sinf@@GLIBC_2.0 
```

到现在为止还挺好。我的函数`prnt`和`sin_2`已映射到库中`prnt_`和`sin_2_`库中。

## 从 python 解释器调用 fortran 函数

这就是所有这些都变得有点湿透的地方。使用[python-ctypes 文档中的表格](http://docs.python.org/2/library/ctypes.html#fundamental-data-types)，我输入了以下内容 -

```
>>> from ctypes import byref, cdll, c_float,c_char_p
>>> t = cdll.LoadLibrary('./test.so')
>>> c = c_char_p("Mary had a little lamb")
>>> t.prnt_('Mary had a little lamb')
 Mary had a little lambe
1
>>> t.prnt_("Mary had a little lamb")
 Mary had a little lambe
1
>>> t.prnt_(c)
 Mary had a little lambe[�  .prnt_(c)

1 
```

我想在每个输出末尾打印的 1 是 python 让我知道布尔输出的方式`t.prnt_`是`.true.`.
我有点担心`t.prnt_`当我切换到正确的字符串数据类型时情况会变得更糟。文字打印没问题，只有`e`最后有 a 。那是EOL字符吗？

然后是`t.sin_2_`功能。我决定用它来计算 sin(4.56)**2。这是怎么回事 -

```
>>> f = c_float(4.56)
>>> t.sin_2_(4.56)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
 ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: Don't know how to convert parameter 1
>>> t.sin_2_(f)
Segmentation fault (core dumped) 
```

我在这里哪里出错了？我试图解释我是如何解决这个问题的，这样如果我在某处犯了明显的错误就会很明显。
指向其他 SO 帖子的大量链接是为了帮助其他提出与我现在一样的问题的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T13:58:33.990

在 Fortran 中，参数是通过引用传递的。Fortran 字符数组不是以 null 结尾的；`long int`长度作为隐式参数按值传递。此外，Python 的`float`类型是 a `double`，因此您可能希望使用 Fortran`real(8)`以保持一致性。

测试.f90：

```
function prnt(s)          ! byref(s), byval(length) [long int, implicit]
    character(len=*):: s  ! variable length input
    logical :: prnt
    write(*, "(A)") s     ! formatted, to remove initial space
    prnt = .true.
end function prnt

function sin_2(r)         ! byref(r)
    real:: r, sin_2       ! float; use real(8) for double
    sin_2 = sin(r)**2
end function sin_2 
```

请记住在适当的情况下`argtypes`为函数设置 ctypes 。`restype`在这种情况下`sin_2`，接受一个浮点指针并返回一个浮点数。

ctypes 示例：

```
>>> from ctypes import *
>>> test = CDLL('./test.so')

>>> test.prnt_.argtypes = [c_char_p, c_long]
>>> test.sin_2_.argtypes = [POINTER(c_float)]
>>> test.sin_2_.restype = c_float

>>> s = 'Mary had a little lamb'
>>> test.prnt_(s, len(s))
Mary had a little lamb
1

>>> x = c_float(4.56)
>>> test.sin_2_(byref(x))
0.9769567847251892 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T18:37:09.917

I use [f2py](http://cens.ioc.ee/projects/f2py2e/usersguide/) pretty frequently, its quite simple. If your code complies to Fortran 90 declarations (e.g. `double precision, intent(in) :: myvar`), f2py will wrap your code automatically to C and is compiled into a shared object that is directly callable through Python. You can import your f2py created module as you would any other python module. The C wrapper is transparent and handles the type interfacing between Python and Fortran, you don't have to mess with c_types at all. I would definitely recommend this route.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-29T14:58:52.157

I would just like to point out that one should always use the `iso_c_binding` module and the `bind` attribute when interfacing Python and Fortran using `ctypes`. That way you can be sure that your variable types match. And the compiler is free to mangle names however it likes when building the shared library so you might get undefined references when switching compiler vendor or even just using a different version of your compiler and trying to call `t.sin_2_` as per the example. See also [here.](https://stackoverflow.com/questions/19524714/why-iso-c-binding)

So you should do something like:

```
module test
  use iso_c_binding
  implicit none

contains

  function sin_2(r) bind(c, name='c_sin_2')
    real(c_float) :: sin_2
    real(c_float), intent(in), value :: r

    sin_2 = sin(r)**2
  end function sin_2
end module test 
```

And then

```
from ctypes import *

test = CDLL('./test.so')

test.c_sin_2.restype = c_float

print(test.c_sin_2(c_float(3))) 
```

I'm not quite sure, though, why I still have to set the `restype`, maybe someone with more experience can tell us that.

[Here](http://www.fortran90.org/src/best-practices.html#interfacing-with-python) you can find some additional info.

# jquery - 使用 JQuery 在 Site.Master 内的面板中加载内容

> ID：15875535
> 
> 赞同：0
> 
> 时间：2013-04-08T09:20:30.193
> 
> 标签：jquery

我有一个页面，其中包含左侧的菜单和右侧的内容，除了页眉和页脚。

我的想法是，当用户点击链接时，我会在右侧面板中加载内容，这样我就可以避免页面刷新。这也是因为到内容页面的链接是动态加载的。

主菜单的更新面板称为 UPMainMenu，主要内容的更新面板称为 UPContent。

目前我有以下，这是行不通的： -

```
 $.ajax({
            type: "POST",
            url: "Default.aspx/OpenURL",
            data: JSON.stringify(args),
            contentType: "application/json;charset=utf-8;",
            success: function (data) {
                $('div#UPContent').load('Default.aspx');
                //__doPostBack('UPContent', data.d);
            },
            error: function () {
                alert("Fail");
            }
        }); 
```

是否可以只加载 UPContent 中的内容？例如default.aspx 或webpage.aspx 之类的？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:12.303

我设法做到了！

```
 $.ajax({
            type: "POST",
            url: "Dashboard.aspx/OpenURL",
            data: JSON.stringify(args),
            contentType: "application/json;charset=utf-8;",
            success: function (data) {
                $('div#UPContent').empty().load(data.d);
            },
            error: function () {
                alert("Fail");
            }
        }); 
```

# iphone - 在演示或关闭过程中尝试从视图控制器中关闭

> ID：15875538
> 
> 赞同：16
> 
> 时间：2013-04-08T09:20:37.100
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

我有两个`UIViewController`课程，其中`FirstClass`我有一个`UIButton`for **Login**，当用户点击按钮时，我将显示`SecondClass`......为此我已经完成了，

```
SecondClass *index = [[SecondClass alloc] init];
[self presentModalViewController:index animated:YES]; 
```

在 SecondClass 我有一个**注销**按钮，它将重定向到**FirstClass**，因为我已经完成了，

```
[self dismissModalViewControllerAnimated:YES]; 
```

当我在 SecondClass 中按下注销按钮时，我收到警告消息

```
**Attempt to dismiss from view controller <FirstClass: 0e39w88e160> while a presentation or dismiss is in progress!** 
```

这里有什么问题..

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-27T17:44:30.883

添加了 iOS 6 和 pre-iOS 6 的答案：

**iOS 5.0 及更高版本**

当您注销时，请在关闭之前添加此检查：

```
if (![self.presentedViewController isBeingDismissed])
{
    [self dismissModalViewControllerAnimated:YES completion:nil];
} 
```

**iOS 4.X 及更低版本**

在解雇之前添加此检查：

```
if (![[self modalViewController] isBeingDismissed])
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:47:50.893

在您注销的地方调用这些行，然后检查：

```
if (![[self modalViewController] isBeingDismissed])
{
   [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:06:43.433

有很多事情可能会导致这种情况，这里有一些选项：

1.  您忘记在 ViewController 方法之一（例如 viewWillAppear、viewWillAppear 等）上调用 super。请参阅 UIViewController 文档以了解何时必须调用 super。
2.  多次调用dismissModalViewControllerAnimated: 方法，如果您多次将目标添加到UIButton，就会发生这种情况。

为了更好地理解问题，请完整粘贴两个视图控制器的代码。

# java - 如何在 index.jsp 检查某人是否登录？

> ID：15875543
> 
> 赞同：0
> 
> 时间：2013-04-08T09:20:48.037
> 
> 标签：java

我有一个关于 Java 的问题。我有一个“index.jsp”，现在每当它运行时，我都想检查是否有人登录。如果没有人登录，则仅显示登录按钮，否则显示用户名代替登录。为了解决这个问题，我使用 -

```
session.getsession(false);
if(session==null)
    response.sendRedirect("login.jsp");
else
//rest of HTML Code. 
```

但它不起作用，它总是去其他部分。
注意：*“index.jsp”不会从“logout.jsp”或任何调用“session.invalidate()”的地方转发。这是项目第一次运行。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:24:57.280

试试这个代码来获取会话

```
 HttpSession session = request.getSession(false); 
```

代替

```
session.getsession(false); 
```

一旦你掌握了一个会话：

```
if(session == null)
{
    //session does not exists
    //redirect to login page
}
else
{
    //session is not ended
} 
```

**编辑 ：**

查看您的评论，我了解到您正在使用 JSP。在 JSP 中，如果您没有明确指定不这样做，则容器会创建一个默认会话。

You can ask not to create a default session by adding the following line

```
<%@page session="false" %> 
```

at the top of the page

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:27:27.887

You can use attributes to store login status (Ex: Username).

```
(String)session.getAttribute("Username") 
```

If the value of the above string is null then user is not logged in. Make sure you set the value of this attribute after successful user login :)

# python - 请帮我理解这个python代码

> ID：15875546
> 
> 赞同：0
> 
> 时间：2013-04-08T09:20:52.410
> 
> 标签：python, python-2.7

```
a=10    
b=20    
res = (_("result is : %(first) , %(second)") %{'first' : a,'second' : b})    
print res 
```

谁能解释上述代码的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:28:41.253

`_`通常是对`gettext`模块的重新定义，这是一组帮助将文本翻译成多种语言的工具：如下图所示：

```
import gettext
gettext.bindtextdomain('myapplication', '/path/to/my/language/directory')
gettext.textdomain('myapplication')
_ = gettext.gettext
# ...
print _('This is a translatable string.') 
```

[http://docs.python.org/2/library/gettext.html](http://docs.python.org/2/library/gettext.html)

Otherwise, when you use `%(name)s` in a string, it's for string formatting. It means: "format my string with this dictionary". The dictionary in this case is: `{'first' : a,'second' : b}`

The syntax of your string is wrong though - it's missing the `s` after the brackets.

Your code basically prints: result is : 10 , 20 If you fix the missing `s`

For further information, you can read this: [Python string formatting: % vs. .format](https://stackoverflow.com/questions/5082452/python-string-formatting-vs-format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:28:24.840

此代码不起作用：

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> a = 10
>>> b = 20
>>> res = (_("result is : %(first) , %(second)") %{'first' : a,'second' : b})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '_' is not defined 
```

但除此之外，这似乎是一种简单的文本格式，使用带有地图的旧样式格式。

您首先使用语法编写一个包含参数的字符串`%argument`，然后使用以下语法给它一个包含此参数值的映射：

`"This is an argument : %argument " % {'argument' : "Argument's value" }`

尽量避免使用它，`format`而是使用它，因为它更容易理解、更紧凑、更健壮：

`"This is an argument : {} and this one is another argument : {} ".format(arg1, arg2)`

# php - 使用php在url中查找参数

> ID：15875547
> 
> 赞同：1
> 
> 时间：2013-04-08T09:20:53.600
> 
> 标签：php, dom, query-string, domdocument

我正在寻找一种方法来查找包含参数以提取动态值的 url

例如，我网站上的任何地方都有一个带有包含字符的链接的按钮

example.com/register/register-company.html?tx_powermail_pi1[regUid]=78

我需要来自 regUid 的 id 来处理查询，78 不是静态的。

谢谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:28:40.467

```
$str = "http://example.com/somepage?tx_powermail_pi1[regUid]=78";
$uri = parse_url($str);
if($uri["query"]){
   #if there is query string only....
   parse_str($uri["query"], $test);
   var_dump($test);
} 
```

这适用于任何网址。如果你想捕捉你当前的 url 获取参数，你可以使用

> $_GET['tx_powermail_pi1']['regUid']

# android - arrayAdapter 只返回一个位置，Android

> ID：15875552
> 
> 赞同：18
> 
> 时间：2013-04-08T09:21:05.183
> 
> 标签：android, android-arrayadapter

我将arrayList 设置为12 项，但是arrayAdapter 只在屏幕上返回一项，这是为什么呢？它应该在列表中显示 12 个项目。

```
 public class MainActivity extends Activity {

ArrayList<CheckBoxInfo> cfo = new ArrayList<CheckBoxInfo>();
CheckBoxInfo cbr;
private ListAdapter MyAdapter;
ListView listview;
MyAdapter myAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cbr = new CheckBoxInfo();
    cbr.checkBoxName = "dfdjklfjdkljf";
    cbr.checkBoxState = true;

      for(int i = 0; i <12; i++){
            cfo.add(cbr);
      }

      Toast.makeText(MainActivity.this, "size: " + cfo.size(), Toast.LENGTH_SHORT).show();

    listview = (ListView) findViewById(R.id.listView);
    myAdapter = new MyAdapter(cfo, this);
    listview.setAdapter(myAdapter);
}

public class MyAdapter extends ArrayAdapter<CheckBoxInfo> {

    private List<CheckBoxInfo> checkBoxList;
    private Context context;

    public MyAdapter(List<CheckBoxInfo> infoList, Context context) {
        super(context, R.layout.row_layout, infoList);
        this.checkBoxList = infoList;
        this.context = context;

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        // First let's verify the convertView is not null
        if (convertView == null) {
            // This a new view we inflate the new layout
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_layout, parent, false);
        }
            // Now we can fill the layout with the right values
            TextView tv = (TextView) convertView.findViewById(R.id.textView1);
            CheckBox cb = (CheckBox) convertView.findViewById(R.id.checkBox1);
            CheckBoxInfo cbi = checkBoxList.get(position);

              Toast.makeText(MainActivity.this, "position: " + position, Toast.LENGTH_SHORT).show();

            tv.setText(cbi.checkBoxName);

        return convertView;
    }

}  // end MyAdapter
  } 
```

row_layout.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/LinearLayout1"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="horizontal" >

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=" " />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-09T06:01:14.213

发现问题是 ListView 在 xml 布局中的 ScrollView 内，一旦我删除了外部 ScrollView，ListView 的所有项目都会显示出来。

出于某种原因，如果您封装嵌套在多个层中的 ListView，如果 ListView 在 ScrollView 内，它将仅显示一个位置项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:22:43.807

覆盖`getCount`你的`MyAdapter`

```
public int getCount() {
   return infoList == null ? 0 : infoList.size();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:25:34.093

请显示代码`row_layout`，我认为您的错误是`for`循环：

尝试创建 2 个复选框并添加手册进行测试：

```
cbr1 = new CheckBoxInfo();
cbr1.checkBoxName = "checkbox1";
cbr1.checkBoxState = true;
cfo.add(cbr1);

cbr2 = new CheckBoxInfo();
cbr2.checkBoxName = "checkbox2";
cbr2.checkBoxState = true;
cfo.add(cbr2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-22T16:58:35.457

I had this problem because my `notifyDataSetChanged()` was inside a loop and wasn't being called in certain circumstances (if there were no data items).

Make sure `notifyDataSetChanged()` is getting called when it should be!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T22:45:30.643

android:fillViewport="true" on ScrollView will solve the problem.

# view - Ember js：没有触发parentViewDidChange

> ID：15875557
> 
> 赞同：0
> 
> 时间：2013-04-08T09:21:24.583
> 
> 标签：view, ember.js

如果有一个小游戏，必须将图像拖到较大图像的右侧热点上。

小图像在 containerView 内，热点也是 ContainerViews。当我将图像放在热点上时，我在拖放混合中使用以下代码在 dom 中移动图像：

```
Player.Droppable = Ember.Mixin.create({
    drop: function(event) {
        //get the view that was dragged
        var viewId = event.originalEvent.dataTransfer.getData('Text');
        var view = Ember.View.views[viewId];

        //log the parent-view: App.AnswerListView
        console.log(view.get('parentView').constructor);

        //detach the view from the original containerView
        var parentView = view.get('parentView');
        parentView.removeObject(view);

        //attach it to the hot-spot-containerview
        this.addObject(view);

        //logging this gives a different result: App.HotspotView
        console.log(view.get('parentView').constructor);

        event.preventDefault();
        return false;
    }
}); 
```

我拖动的视图是 App.AnswerView。我对文档的期望是 AnswerView 上的函数 parentViewDidChange 被触发，但这不会发生：

```
App.AnswerView = Ember.View.extend(App.Draggable, {
    templateName: "answer",
    classNameBindings: [':answer', 'this.content.isSelected:selected'],
    click: function(evt){
        this.get('controller').send('answerClicked', this.content);
    },
    parentViewDidChange: function(){
        this.get('controller').send('answerMoved', this.content);
    },
}); 
```

文档说：当 parentView 属性更改时调用。就我而言，它已更改。这是一个错误，还是我在这里遗漏了什么？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T13:34:26.087

This issue was a bug and got resolved in the 1.0.0 final [https://github.com/emberjs/ember.js/issues/2423](https://github.com/emberjs/ember.js/issues/2423)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:49:10.103

pushObject and removeObject are methods, inherited from the Ember.MutableArray Mixin, that the Ember.ContainerView extends. If you look at Ember's source code for ContainerView ([https://github.com/emberjs/ember.js/blob/v1.0.0-rc.2/packages/ember-views/lib/views/container_view.js#L15](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.2/packages/ember-views/lib/views/container_view.js#L15)), you will see that ContainerView does not override those methods, thus they only manipulate its childViews array, not the view's parent view. You should find methods that manipulate the '_parentView' property here instead: ([https://github.com/emberjs/ember.js/blob/v1.0.0-rc.2/packages/ember-views/lib/views/view.js#L2018](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.2/packages/ember-views/lib/views/view.js#L2018)) - in the Ember.View's implementation. So in short, use:

*   removeChild instead of removeObject, to delete a child view from your ContainerView
*   createChildView + pushObject instead of 'addObject', if you want to add a new child view to a ContainerView.

Example Code:

```
Player.Droppable = Ember.Mixin.create({
    drop: function(event) {
        //get the view that was dragged
        var viewId = event.originalEvent.dataTransfer.getData('Text');
        var view = Ember.View.views[viewId];

        //log the parent-view: App.AnswerListView
        console.log(view.get('parentView').constructor);

        //detach the view from the original containerView
        var parentView = view.get('parentView');
        parentView.removeChild(view);

        //attach it to the hot-spot-containerview
        this.createChildView(view);
        this.pushObject(view);

        //logging this gives a different result: App.HotspotView
        console.log(view.get('parentView').constructor);

        event.preventDefault();
        return false;
    }
}); 
```

# nsis - NSIS 中的多条路径。代码没有被执行

> ID：15875562
> 
> 赞同：0
> 
> 时间：2013-04-08T09:21:36.947
> 
> 标签：nsis

我需要在安装前询问用户几个路径，但我无法在 NSIS 中完成。好像我的代码没有在 MUI 中被引用：

```
!define MUI_ABORTWARNING
!define MUI_ICON "${NSISDIR}\Contrib\Graphics\Icons\modern-install.ico""
!define MUI_UNICON "${NSISDIR}\Contrib\Graphics\Icons\modern-uninstall.ico"
!define MUI_CUSTOMPAGECOMMANDS
!define MUI_DIRECTORYPAGE
!define MUI_CUSTOMFUNCTION_COMPONENTS_LEAVE ComponentPost
!define MUI_CUSTOMFUNCTION_DIRECTORY_SHOW DirectoryShow
!define MUI_CUSTOMFUNCTION_DIRECTORY_LEAVE DirectoryLeave 
```

在编译时我得到

```
 install function "ComponentPost" not referenced - zeroing code (0-2) out

  install function "DirectoryShow" not referenced - zeroing code (2-49) out

  install function "DirectoryLeave" not referenced - zeroing code (49-61) out 
```

显然，这三个函数的代码没有被执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:48:36.130

我第一次看到**!define MUI_CUSTOMPAGECOMMANDS**和其他一些。NSIS 或手册中没有对它们的参考。它们是什么？

如果要将页面目录添加到安装程序中，请使用名为**MUI_PAGE_DIRECTORY**的宏（而不是 MUI_DIRECTORYPAGE）

要为此页面添加 PRE/SHOW/LEAVE 功能，请使用

```
MUI_PAGE_CUSTOMFUNCTION_PRE function
MUI_PAGE_CUSTOMFUNCTION_SHOW function
MUI_PAGE_CUSTOMFUNCTION_LEAVE function 
```

这些定义应该在插入页面宏之前设置。

我认为对您来说最简单的方法是修改现有示例（可以在 NSIS\Examples 目录中找到），您的脚本根本没有意义。

# video.js - 奇怪的错误 - 视频 js 错误第 21 行或第 449 行 - mp4 未加载/只是旋转

> ID：15875563
> 
> 赞同：2
> 
> 时间：2013-04-08T09:21:37.637
> 
> 标签：video.js

刚刚遇到奇怪的错误。

在某些装有最新版 Chrome (26.0.1410.43m) 和 video-js 的计算机上，视频无法加载，并且微调器继续旋转。请注意，它可以在具有相同版本 Chrome 的不同计算机上运行。

那是：

1.  计算机 1 - Chrome 26.0.1410.43m - 无法加载
2.  计算机 1 - Internet Explorer 9 - 加载
3.  计算机 2 - Chrome 26.0.1410.43m - 加载
4.  计算机 2 - 所有其他浏览器 - 确实加载

Chrome 中给出的它不起作用的错误如下。

**解决计算机 1 错误的方法是将文件转换为 .webm 格式。**

```
 Event, type: "error", isDefaultPrevented: function, timeStamp: 1365411449401, vdata1365411437555: true…}
altKey: undefined
attrChange: undefined
attrName: undefined
bubbles: false
button: undefined
cancelable: true
charCode: undefined
clientX: undefined
clientY: undefined
ctrlKey: undefined
currentTarget: video#example_video_1_html5_api.vjs-tech
accessKey: ""
attributes: NamedNodeMap
autoplay: false
baseURI: "http://kurssajten.balansekonomi.se/start.php?module=ks_part07&action=start"
buffered: TimeRanges
childElementCount: 0
childNodes: NodeList[2]
children: HTMLCollection[0]
classList: DOMTokenList
className: "vjs-tech"
clientHeight: 309
clientLeft: 0
clientTop: 0
clientWidth: 550
contentEditable: "inherit"
controller: null
controls: false
currentSrc: "https://s3-eu-west-1.amazonaws.com/kurssajten-cdn/uploads/media/ks_part07-start-introduction.mp4"
currentTime: 0
dataset: DOMStringMap
defaultMuted: false
defaultPlaybackRate: 1
dir: ""
draggable: false
duration: 80.17066955566406
ended: false
error: MediaError
firstChild: text
firstElementChild: null
height: 0
hidden: false
id: "example_video_1_html5_api"
initialTime: 0
innerHTML: "↵                    ↵                "
innerText: ""
isContentEditable: false
lang: ""
lastChild: text
lastElementChild: null
localName: "video"
loop: false
mediaGroup: ""
muted: false
namespaceURI: "http://www.w3.org/1999/xhtml"
networkState: 0
nextElementSibling: img.vjs-poster
nextSibling: img.vjs-poster
nodeName: "VIDEO"
nodeType: 1
nodeValue: null
offsetHeight: 309
offsetLeft: 0
offsetParent: div#example_video_1.video-js vjs-default-skin vjs-playing
offsetTop: 0
offsetWidth: 550
onabort: null
onbeforecopy: null
onbeforecut: null
onbeforepaste: null
onblur: null
onchange: null
onclick: null
oncontextmenu: null
oncopy: null
oncut: null
ondblclick: null
ondrag: null
ondragend: null
ondragenter: null
ondragleave: null
ondragover: null
ondragstart: null
ondrop: null
onerror: null
onfocus: null
oninput: null
oninvalid: null
onkeydown: null
onkeypress: null
onkeyup: null
onload: null
onmousedown: null
onmousemove: null
onmouseout: null
onmouseover: null
onmouseup: null
onmousewheel: null
onpaste: null
onreset: null
onscroll: null
onsearch: null
onselect: null
onselectstart: null
onsubmit: null
onwebkitfullscreenchange: null
onwebkitfullscreenerror: null
onwebkitkeyadded: null
onwebkitkeyerror: null
onwebkitkeymessage: null
onwebkitneedkey: null
outerHTML: "<video id="example_video_1_html5_api" class="vjs-tech" preload="none" data-setup="{}">↵                    ↵                </video>"
outerText: ""
ownerDocument: document
parentElement: div#example_video_1.video-js vjs-default-skin vjs-playing
parentNode: div#example_video_1.video-js vjs-default-skin vjs-playing
paused: false
playbackRate: 1
played: TimeRanges
player: Class
poster: ""
prefix: null
preload: "none"
previousElementSibling: null
previousSibling: null
readyState: 1
scrollHeight: 309
scrollLeft: 0
scrollTop: 0
scrollWidth: 550
seekable: TimeRanges
seeking: false
spellcheck: true
src: ""
startTime: 0
style: CSSStyleDeclaration
tabIndex: -1
tagName: "VIDEO"
textContent: "↵                    ↵                "
textTracks: TextTrackList
title: ""
translate: true
vdata1365411437555: 10
videoHeight: 308
videoWidth: 550
volume: 1
webkitAudioDecodedByteCount: 6771
webkitClosedCaptionsVisible: false
webkitDecodedFrameCount: 0
webkitDisplayingFullscreen: false
webkitDroppedFrameCount: 0
webkitHasClosedCaptions: false
webkitPreservesPitch: true
webkitPseudo: ""
webkitShadowRoot: null
webkitSupportsFullscreen: true
webkitVideoDecodedByteCount: 332046
webkitdropzone: ""
width: 0
__proto__: HTMLVideoElement
data: undefined
detail: undefined
eventPhase: 2
fromElement: undefined
handler: undefined
isDefaultPrevented: function returnFalse(){return false}
isPropagationStopped: function returnTrue(){return true}
keyCode: undefined
metaKey: undefined
newValue: undefined
offsetX: undefined
offsetY: undefined
originalEvent: Event
pageX: undefined
pageY: undefined
prevValue: undefined
relatedNode: undefined
relatedTarget: undefined
result: undefined
screenX: undefined
screenY: undefined
shiftKey: undefined
srcElement: video#example_video_1_html5_api.vjs-tech
target: div#example_video_1.video-js vjs-default-skin vjs-playing
timeStamp: 1365411449401
toElement: undefined
type: "error"
vdata1365411437555: true
view: undefined
wheelDelta: undefined
which: undefined
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:07:35.277

我几乎可以肯定这是我昨天遇到的确切问题，特别是 Chrome。Chrome 无法播放 .mp4 并且它挂在视频源的第一行中的 .mp4 上。很可能您将它们列出如下：

```
<source src="/video/TVC-Intro.mp4" type='video/mp4'>
<source src="/video/TVC-Intro.webm" type='video/webm'>
<source src="/video/TVC-Intro.ogv" type='video/ogg'> 
```

将 webm 标签移到 mp4 上方，我敢打赌它可以工作。那是我找到的简单解决方案。

# javascript - 在多个框架集中切换框架

> ID：15875566
> 
> 赞同：0
> 
> 时间：2013-04-08T09:21:50.640
> 
> 标签：javascript, html, frame, frameset

以下情况：

```
<frameset>
    <frame id="top"></frame>
     <frameset id="innerframe">
        <frame id="nav"></frame>
        <frame id="main">
            <frameset id="homeFrame">
                 <frame id="content"></frame>
                 <frame id="box"></frame>
            </frameset>
        </frame>
     </frameset>
</frameset> 
```

（我不太擅长在 SO 中格式化，请耐心等待）

我想通过使用链接来切换（使可见/隐藏）框架**“框”**，该链接位于框架**“nav”**的某处。我尝试通过`parent.frames['box']`访问我的框架，但没有成功。

怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:46:46.247

我不确定（我不经常使用框架），但似乎你必须以不同的方式定位你的盒子框架。

```
function toggleFrame(elem) {
    //elem = <a> clicked on
    var fframe = parent.frames['homeFrame'].frames['box'];
    if(fframe.style.visibility == 'visible') {
        fframe.style.visibility = 'hidden';
        elem.value = 'show';
    }
    else {
        fframe.style.visibility = 'visible';
        elem.value = 'hide';   
    } 
```

如果这不起作用，可能是因为嵌套的框架集，您可能应该将其切换`var`为类似`var fframe = document.getElementById('box');`或`var fframe = parent.getElementById('box');`

# c - 在 C 中返回错误的 MD5 哈希

> ID：15875569
> 
> 赞同：6
> 
> 时间：2013-04-08T09:22:00.500
> 
> 标签：c, string, hash, md5

我正在尝试使用来自[http://www.arp.harvard.edu](http://www.arp.harvard.edu)的原始/未触及 md5.h 和[md5c.c为字符串](http://www.arp.harvard.edu/eng/das/manuals/QNX6libs/md5c_8c_source.html)*“Hello World”*生成 MD5 哈希。但我的结果与我测试过的所有 md5 在线工具不同。这段代码有什么问题？谢谢你。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "md5.h"

void MD5hash(unsigned char *data, unsigned int dataLen, unsigned char *digest) {
    MD5_CTX c;
    MD5Init(&c);
    MD5Update(&c, data, dataLen);
    MD5Final(digest, &c);
}

int main(int argc, const char * argv[]) {
    unsigned char digest[16];
    const char *s = "Hello World";
    unsigned int l = (unsigned int)strlen(s);

    MD5hash((unsigned char *)s, l, digest);
    for(int i = 0; i < 16; ++i)
         printf("%02x", digest[i]);
    return 0;
}

// My result: f2877a72c40494318c4b050bb436c582
// But online tools output: b10a8db164e0754105b7a99be72e3fe5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:43:37.000

As @vipw mentioned there is an issue with padding. This MD5 implementation does not correctly manage padding for message sizes that are not a multiple of a MD5 block size (512-bit / 64 bytes).

To fix it on your side, replace:

```
const char *s = "Hello World"; 
```

by

```
const char s[64] = "Hello World"; 
```

**EDIT**:

There was a second issue related to portability in this MD5 implementation. In `md5.h` there is this type alias:

```
typedef unsigned long int UINT4; 
```

On a Linux x86_64 system (which you are using), this must be changed to this:

```
typedef unsigned int UINT4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:36:19.727

您有填充问题。MD5 哈希算法适用于 512 位块。当您的最终块小于 512 位时，需要对其进行填充。在您的示例中，第一个块也是最后一个块，因为它小于 512 位。

填充格式称为[Merkle-Damgård 构造](http://en.wikipedia.org/wiki/Merkle%E2%80%93Damg%C3%A5rd_construction)。

[您可以在此处](http://en.wikipedia.org/wiki/MD5#Pseudocode)找到一些包含填充的伪代码。

# android - 如何识别Activity是从后台启动的

> ID：15875572
> 
> 赞同：1
> 
> 时间：2013-04-08T09:22:10.023
> 
> 标签：android

当应用程序从后台进入前台时，即如果用户按下主页按钮，当应用程序进入前台时，应用程序将进入后台再次我想显示一个警告框。请有人告诉我如何执行此检查应用程序是否已进入前台或提供一些链接。我不明白要搜索什么。一些网站提到我要覆盖`OnResume()`。但是，每次我的活动从一个活动启动到另一个活动时都会调用此方法，即使我回到此活动也是如此。只有当用户从后台转到前台时，我才需要调用此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:00:37.903

这是一个简单的解决方案。

```
@Override
    protected void onPause() 
    {
        super.onPause();

        PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);
        isScreenOn = powerManager.isScreenOn();
        OnPause  = true;

    }

    @Override
    protected void onResume() 
    {
        super.onResume();
         OnResume = true;      
        if (!isScreenOn) 
            {
                // your code;
            }
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();

        if(OnPause == true && OnResume == true && !isScreenOn)
        {
            YourActivity.this.finish();
        }
        isScreenOn = false;
        OnPause = false;
        OnResume = false;
    } 
```

Here isScreenOn, OnPause, OnResume are boolean values. When your mobiles screen gets lock, then the application goes in onPause() where it check for "isScreenON" and then goes in "onStop()" where isScreenOn is set to false.

When your activity comes in foreground "onResume" is called. It checks for the isScreenON and it works absolutely perfect.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:38:02.347

解决方案很简单

考虑四种方法 onCreate()、onResume、onPause()、onSaveInstanceState(Bundle outState)。

您需要为此活动创建一个长全局变量

现在，如果您为 null，则在 onCreate() 中将当前时间分配给此变量，否则`Bundle savedInstanceState`从 savedInstanceState 恢复值

在 onResume 检查当前时间（以毫秒为单位）`System.currentTimeMillis();`与此全局变量之间的差异，如果大于 1 秒（可以根据您的需要更高）显示一个询问密码的警告框

在 onPause() 中保存`System.currentTimeMillis();`到全局变量。

在`onSaveInstanceState(Bundle outState)`存储全局变量的值以在 onCreate() 中捆绑恢复。

示例代码

```
 import android.os.Bundle;
        import android.widget.Toast;
        import android.app.Activity;

        public class MainActivity extends Activity {

        long timeLastPause=0;

            @Override

            public void onCreate(Bundle savedInstanceState) 
            {
                super.onCreate(savedInstanceState);   
                setContentView(R.layout.activity_main);

                if(savedInstanceState==null)
                {
                    timeLastPause=System.currentTimeMillis();
//Toast.makeText(this, "App created just now", Toast.LENGTH_LONG).show();
                }
                else
                {
                    timeLastPause=  savedInstanceState.getLong("timeLastPause");

                }

            }

            @Override
                protected void onResume() {
                    // TODO Auto-generated method stub
                    super.onResume();
                    if((System.currentTimeMillis()-timeLastPause)>1000)
                    {
                        Toast.makeText(this, "the app becomes active that is comes to foreground from background", Toast.LENGTH_LONG).show();
                    }
                }

            @Override
                protected void onPause() {
                    // TODO Auto-generated method stub
                    super.onPause();
                    timeLastPause=System.currentTimeMillis();

                }

            @Override
            protected void onSaveInstanceState(Bundle outState) {
                // TODO Auto-generated method stub
                super.onSaveInstanceState(outState);
                outState.putLong("timeLastPause", timeLastPause);
            }

            } 
```

***[编辑]***

现在可以进行任何数量的活动 [:-0 这很棘手，希望它会起作用。我在一些项目中实现了这一点并且工作正常]

在清单中

```
 <application
        android:name=".TrickyApplication"
         ...
          > 
```

现在创建`TrickyApplication.java`

```
public class TrickyApplication extends Application {
    public long lastPause;

    @Override
    public void onCreate() {
        super.onCreate();
        lastPause = 0;
    }
} 
```

现在在每一个活动中`onResume()`

```
TrickyApplication app = ((TrickyApplication) this.getApplication());

if (System.currentTimeMillis() - app.lastPause > 1000) {
   Toast.makeText(this, "Show Password Dlg Now", Toast.LENGTH_LONG).show();
            } 
```

并且在每一个活动中`onPause()`

```
((TrickyApplication) this.getApplication()).lastPause = System
                .currentTimeMillis(); 
```

请注意，密码对话框也将首次显示，您可以使用一些共享首选项进行管理，并且在您的用户未设置密码之前不要设置它，然后在显示对话框之前检查该首选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:29:02.280

我建议对密码使用超时。这样当用户使用该应用程序时，密码将在 x 分钟内保持“正常”。

想象一下，如果有人在早上启动应用程序，然后返回主菜单，然后在晚上再次启动它，您仍然希望用户登录吗？

超时日期可以很容易地存储在 SharedPreferences 中。（另外请不要将密码作为纯文本存储在 SharedPreferences 中，而是存储它的哈希值。

# mobile - 使用移动浏览器捕获 UDID

> ID：15875576
> 
> 赞同：1
> 
> 时间：2013-04-08T09:22:19.373
> 
> 标签：mobile, udid, imei

有没有一种方法可以使用移动浏览器捕获 UDID。我一直在开发一个应用程序，当我在手机上使用该应用程序时需要捕获手机的 UDID/IMEI 信息，这需要捕获 IMEI。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:38:00.580

不可以。在移动浏览器上无法获得唯一标识符，例如 UDID 或 IMEI。

如果您想“识别”您的用户，您将不得不使用 cookie（但这些可以被您的用户删除）。另一种有趣的方法可以在[http://panopticlick.eff.org/](http://panopticlick.eff.org/)上找到- 他们通过其功能“识别”浏览器。

# ios - UIWebView 内的自定义按钮（适用于 iPad）

> ID：15875577
> 
> 赞同：1
> 
> 时间：2013-04-08T09:22:19.737
> 
> 标签：ios, ipad, uiwebview

基本上我想在 UIWeebView 上放置自定义按钮。

我有一个获取 PDF 文件的 URL。在那个 PDF 中有一列“myButton”，我需要将按钮放在上面，以便随文件滚动。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:42:34.557

您可以将视图添加到 webview 的滚动视图

```
[webView.scrollView addSubview:youSubView]; 
```

根据您的要求设置子视图的坐标。滚动视图只能访问 > iOS5。请参阅[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

# jquery - jQuery中的DatePicker，在文本框触发事件上键入文本

> ID：15875578
> 
> 赞同：0
> 
> 时间：2013-04-08T09:22:20.590
> 
> 标签：jquery, jquery-ui

我有一个与 Jquery UI 中的 datepicker 相关的问题

假设我有一个这样的输入标签

```
visible`<input type="text" id="datetxt"/>` 
```

Datepicker 绑定到此文本框

现在我将 Onselect 事件触发到 datapicker，这是正确的。现在我想要的是

假设现在我在文本框中输入日期而不是从日期选择器中选择任何日期，当时显示我想触发事件以验证用户输入的日期，那么我可以触发的任何事件（如 OnTextChange 或 Onchange）也是如此，如果是，那么请给我一些演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:29:02.373

HTML5 添加了[`input`event](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input)，它会立即对`<input type="text">`元素上下文的变化做出反应（不像`onchange`在元素失去焦点之前不会触发）。用法：

```
$('#datetxt').on('input', function(e) {
    // call your validation function
}); 
```

或者，还有`keydown`、`keypress`和`keyup`事件，它们对按下的键的各个阶段作出反应。用法与上面类似，只需替换`'input'`为您要使用的事件的名称（可能`keyup`）。

# ruby-on-rails - 不区分大小写的omniauth-identity电子邮件登录

> ID：15875579
> 
> 赞同：1
> 
> 时间：2013-04-08T09:22:31.070
> 
> 标签：ruby-on-rails, omniauth

默认情况下，intridea / omniauth-identity rails gem 使用电子邮件登录，并且它们区分大小写。如何使登录电子邮件*不区分大小写*？如下所示，向模型添加 ":case_sensitive => false" 不起作用。

```
#models/identity.rb
class Identity < OmniAuth::Identity::Models::ActiveRecord
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :name
  validates_uniqueness_of :email, :case_sensitive => false
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
end 
```

例如，即使使用上述模型，如果您使用“bob@aol.com”注册，然后尝试使用“BOB@aol.com”登录，登录也会产生无效凭据的 OMNIAUTH::ERROR。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:45:42.717

Ok, so I thought user ForgetTheNorm had the solution, but it turns out modifying the locate_conditions breaks sign up. The solution is actually much simpler than I originally thought. Downcase the auth-key BEFORE it is submitted with the form. This is true of everywhere you use the key. For instance, to login or sign up.

```
 #login-form
  <%= form_tag('/auth/identity/callback', :method => 'post', :id => 'actual-login-form') do %>
    <div class="field">
      <%= label_tag :auth_key, 'Email' %>
      <br />
      <%= text_field_tag :auth_key, nil, :class => 'user-auth-field user-auth-key' %>
    </div>
    <div class="field">
      <%= label_tag :password %>
      <br />
      <%= password_field_tag :password, nil, :class => 'user-auth-field' %>
    </div>
    <div class="actions">
      <%= submit_tag 'Sign in', :class => 'btn-default', :id => 'modal-sign-in' %>
    </div>
  <% end %>

 #signup-form
  <%= form_tag('/auth/identity/register', :method => 'post', :id => 'actual-signup-form') do %>
    <%= label_tag(nil, 'Choose your username') %>
    <%= text_field_tag 'name', nil, :class => 'signup-form-input', :tabindex => '1' %>

    <%= label_tag(:email, 'Your current email address') %>
    <%= text_field_tag 'email', nil, :class => 'signup-form-input user-auth-key', :tabindex => '2' %>

    <%= label_tag(:password, 'Create a password') %>
    <input type="password" name="password" id="password" class="signup-form-input" tabindex="3" />

    <%= label_tag(:password2, 'Confirm your password') %>
    <input type="password" name="password_confirmation" id="password_confirmation" class="signup-form-input" tabindex="4" />

    <%= submit_tag('Sign Up for Pholder', :id => 'signup-submit', :tabindex => '5') %>
  <% end %> 
```

Relevant jQuery/JS:

```
 $('#actual-login-form, #actual-signup-form').on('submit', function(){

   //lower case auth key (email addresses) for all user validation
 $(this).find('.user-auth-key').val( $(this).find('.user-auth-key').val().toLowerCase()  )

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:25:42.930

您可以在中找到解决方案

[https://github.com/intridea/omniauth-identity/issues/22](https://github.com/intridea/omniauth-identity/issues/22)

> 为清楚起见...
> 
> ```
> #config/initializers/omniauth.rb
> provider :identity, locate_conditions: lambda { |req| 
>    { model.auth_key => req['auth_key'].downcase }
> } 
> ```
> 
> 正如 ujeezy 上面提到的，Rubygems 上的 omniauth-identity gem 不支持此功能，这仍然是正确的。确保您的 gemfile 如他所述：
> 
> ```
> #Gemfile
> gem 'omniauth-identity', git: 'https://github.com/intridea/omniauth-identity.git' 
> ```

# linux - 如何在 Linux 中启用类似 RTS_CONTROL_TOGGLE 的功能

> ID：15875580
> 
> 赞同：0
> 
> 时间：2013-04-08T09:22:40.323
> 
> 标签：linux, linux-kernel, serial-port

我正在开发一个 Windows 应用程序，用于通过串行调制解调器与仪表设备进行通信。一些设备使用半双工通信。出于这个原因，我将 Windows RtsControl 参数设置为 RTS_CONTROL_TOGGLE，这将启用 RTS 线路状态的自动切换。

现在我想将此应用程序移植到 Linux。是否有一个功能可以在 Linux 操作系统上启用与 RTS_CONTROL_TOGGLE 参数等效的功能？

如果没有这样的功能，是否存在启用类似行为的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:26:36.463

我假设您在用户空间中-因此您最终可能会使用[IOCTL](http://man7.org/linux/man-pages/man2/ioctl.2.html)。如果您要从 Windows 迁移到 Linux 以进行串行控制，我建议您阅读[POSIX 串行编程指南](http://www.easysw.com/~mike/serial/serial.html#listing6)。我给出的链接是使用 IOCTL 设置串行值的示例，您需要将其更改为使用 TIOCM_RTS、TIOCM_CTS，但它给出了正确的想法。

# java - 从 JAVA 中的多维 JSON 映射中检索数据

> ID：15875583
> 
> 赞同：0
> 
> 时间：2013-04-08T09:22:44.697
> 
> 标签：java, json, hashmap

我正在使用 Spring MVC 和 JSP 开发应用程序，我想做的是从 URL 获取一些数据，URL 的数据是 JSON 编码的多维映射。

**例如：**

```
{"RT":"32",
 "HED":{
     "COMPINF":{
          "CP":"ISIN_CODE|SECTOR|LANGUAGE_CODE"}}} 
```

我想以与我相同的方式解析这段代码，我试图使用多维哈希图，但无法真正找到方法。

解析这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:25:48.227

您需要使用 JSON 解析器，例如 Google Gson ( [https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/) )

编辑：这是一个类似的问题：[Converting JSON to Java](https://stackoverflow.com/questions/1688099/converting-json-to-java/1688182#1688182)

# c# - 在 WPF 中垂直对齐文本块的顶部

> ID：15875587
> 
> 赞同：5
> 
> 时间：2013-04-08T09:23:03.767
> 
> 标签：c#, wpf, fonts, typography

我试图直观地看到`align`2 个（或更多）块的内容的顶部`Text`。用户可以修改每个块的内容和`Font`（`Size`, `Family`, ）。`Weight`

我尝试使用`GetCellAscent`,`GetCellDescent`和`GetLineSpacing`函数，但结果仅取决于字体而不是实际内容。无论如何，我找不到块的顶部和底部之间的差异是如何分布`LineSpacing`的`Ascent+ Descent`。

例如我想产生这种输出：

![在此处输入图像描述](https://i.stack.imgur.com/ovE6Z.jpg)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:36:30.720

尝试这个.....

```
 <Grid Width="171" Height="100" Background="Black" Margin="257,78,75,133">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />

        </Grid.RowDefinitions>

        <TextBlock Name="aaa" Text="12" FontSize="40" HorizontalAlignment="Center"  VerticalAlignment="Stretch" Grid.Row="1"   FontWeight="Bold"   Foreground="White" />
        <TextBlock Text="$" HorizontalAlignment="Left" FontSize="20" Grid.Column="1" FontFamily="Euphemia" FontWeight="Bold" Foreground="White" Margin="8,0,72,0" />
        <TextBlock Text="00 le Kg" FontSize="15" Grid.Column="1" Grid.Row="3" HorizontalAlignment="Left" Grid.IsSharedSizeScope="True" FontFamily="Euphemia" FontWeight="Bold" Foreground="White"/>

    </Grid> 
```

# azure - 如何在 Azure Store 优惠升级期间调试问题？

> ID：15875589
> 
> 赞同：3
> 
> 时间：2013-04-08T09:23:05.533
> 
> 标签：azure, azure-store

我在 Azure Store 中调试我的优惠“升级”时遇到问题。我已经“购买”了该产品，然后单击“升级”，选择更昂贵的计划并单击“继续”箭头，我看到以下错误消息：

> 我们目前无法提供账单估算。请稍后再试。如果此错误仍然存​​在，请联系支持人员并提供以下信息。（找不到提供的订阅 ID 的订阅（DM - ActivityId={GuidHere}

在我的服务端，我看到我的服务`GET`返回`/storebase/subscriptions/sub-id-here/cloudservices/service-name-here`一个 XML 回复以及`HTTP 200`.

这就是我拥有的所有数据。

如何找到升级过程失败的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T10:45:45.390

答案是没有办法实际调试某些东西，因为无法访问 Azure Store 日志，也无法找到当用户从一个 Azure Store 购买步骤转到另一个步骤时幕后发生的事情。开发人员所能做的就是联系支持人员。

# javascript - 将 asp 复选框转换为 iphone 样式的开关滑块

> ID：15875595
> 
> 赞同：1
> 
> 时间：2013-04-08T09:23:26.547
> 
> 标签：javascript, asp.net, checkbox

我的 asp.net 页面中有一个复选框，我必须将其转换为 iphonestyle 开关滑块。它使用javascript如下：

```
 <script type="text/javascript" charset="utf-8">
    document.observe("dom:loaded", function() {
      new iPhoneStyle('.on_off input[type=checkbox]');
      new iPhoneStyle('.css_sized_container input[type=checkbox]', { resizeContainer: false, resizeHandle: false });
      new iPhoneStyle('.long_tiny input[type=checkbox]', { checkedLabel: 'Very Long Text', uncheckedLabel: 'Tiny' });

      var onchange_checkbox = $$('.onchange input[type=checkbox]').first();
      new iPhoneStyle(onchange_checkbox);
      setInterval(function toggleCheckbox() {
        onchange_checkbox.writeAttribute('checked', !onchange_checkbox.checked);
        onchange_checkbox.change();
        $('status').update(onchange_checkbox.checked);
      }, 2500);
    });
  </script> 
```

切换按钮时如何获取按钮上显示的文本？我找不到检查此脚本中发生的情况的方法。而且，我想知道要触发哪个事件。帮助！

# log4j - getAppender 从 xml 返回 null

> ID：15875600
> 
> 赞同：3
> 
> 时间：2013-04-08T09:23:39.033
> 
> 标签：log4j, appender

当我尝试从 XML 读取附加程序时，我得到 return null，

这是我的文件。xml

```
<appender name="FileInfoStatistics"   class="utils.monitorstatistics.CustonAppenderRollFile"> 
<param name="file" value="Statistics.log"/> 
<param name="MaxFileSize" value="100KB"/>
<layout class="utils.monitorstatistics.CustomAppenderStatistics"> 
    <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/> 
</layout> 
</appender>

<logger name="utils.monitorstatistics" additivity="false">
<level value="INFO"/>

<appender-ref ref="FileInfoStatistics"/>
</logger> 
```

这是我尝试阅读附加程序的java部分：

```
Logger mylogger = Logger.getLogger("utils.monitorstatistics");
Appender app = mylogger.getAppender("FileInfoStatistics"); 
```

getAppender 返回 null

# domain-driven-design - DDD - 是否允许工厂访问存储库？

> ID：15875603
> 
> 赞同：4
> 
> 时间：2013-04-08T09:23:51.110
> 
> 标签：domain-driven-design, java-ee-6

我有一个名为 Person 的聚合根。该人也有一个地址。这些类之间的关系是ManyToOne（许多人共享同一个地址）。

这意味着当我使用工厂创建具有特定地址的新人员时，我必须检查数据库中是否已经存在相同的地址并为用户使用现有地址。

这要求我的工厂可以访问地址存储库（或直接访问数据库）。这是允许的吗？如果没有，有什么更好的方法来做到这一点？

//编辑我的解决方案现在如下：

我有一个 PersonService 类，它包含注册一个人的逻辑。该方法`register()`已经采用了由 AddressFactory 创建的地址对象。Addressfactory 可以访问 AddressRepository 来检查输入的地址是否已经存在。这是代码：

```
public class PersonService{

  @Inject private PersonRepository pRepo;

  public Person register(Name name,..., Address address){
      //check if same person exists,
      //create person, persist person
      return person;
  }
}

public class AddressFactory{
   @Inject AddressRepository aRepo;

   public Address create(String street, int number, ...){
      //check if address with attribues exists in repo,
      //if not create new address
      return address;
   }
} 
```

在某些 bean 中，这个方法是这样调用的：

```
personService.register(new Name("test"),..., addressFactory.create("Some street", 1,...)) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:28:50.370

> This means that when I'm creating a new Person with a specific address using a factory, I'd have to check if a same address already exists in the database and use an exisiting address for the user.

If you follow the Single Responsibility Principle to the letter, you shouldn't do that. `PersonFactory` isn't supposed to create `Addresses` but `Persons`.

Even less so when `Address` creation includes complex logic such as retrieving an `Address` in the database that resembles more or less the address that was filled in by the user (if that's really what you want). You should delegate that to another object.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:41:18.180

是的，就 Person 的存储库（而不是 Person 本身）使用工厂而言，这是一个有效的解决方案。

但是，您应该考虑，在您的域模型中，Person 是否真的需要他们的地址来确保业务不变量。如果不是，请从人员中删除地址并使用专门为此类投影范围定义的[PersonDTO 。](https://stackoverflow.com/questions/15823411/should-be-localization-part-of-domain-in-ddd/15829035#15829035)

# database - 数据库结构需要帮助

> ID：15875604
> 
> 赞同：2
> 
> 时间：2013-04-08T09:23:52.220
> 
> 标签：database

在我的应用程序中，用户可以发布问题和评论。每个问题都有很多评论，评论属于一个问题。此应用程序可能有数百万用户。我们必须从问题和评论中提取标签。

现在我们计划有这样的数据库结构。

1.  问题表（id，问题）

2.  评论表（id，评论）

3.  标签表（id，tag_name）

4.  tags_questions_comments (id,tag_id,question_id,comment_id)

现在我对这是否正确感到困惑？

```
id  tag_id     question_id comment_id   
--------------------------------------
1   1          1           NULL         -> tag from question  
2   2          1           NULL
3   3          1           1            -> tag from comment 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:30:02.523

我会制作两张桌子，而不是：

`tags_questions_comments (id,tag_id,question_id,comment_id)`

一个包括一组：

```
tags_questions (tag_id,question_id) 
```

另一个用于评论：

```
questions_comments (question_id,comment_id) 
```

除非您`questionId`在评论表中添加一列，这可能是根据您的需要更好的方法。

# .htaccess - 使用 htaccess 从 URL 中删除部分

> ID：15875608
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:24:08.967
> 
> 标签：.htaccess, mod-rewrite

我查看了 stackoverflow 中的许多示例，但找不到适合我的解决方案。

我在子目录中设置了一个 wordpress 博客。

该博客位于 www.domain.co.uk/wordpress/

为了让我的永久链接正常工作，我做了一个 htaccess 重写规则，就是这样

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?domain.co.uk$
RewriteRule ^(/)?$ http://domain.co.uk/wordpress [L] 
```

有没有办法取出`/wordpress`网址上的部分？我需要它指向那里，但我希望将`/wordpress`其删除。有任何想法吗？

我现在已经设法按照本指南解决了这个问题：[http ://www.optiniche.com/blog/145/wordpress-tutorial-install-wordpress-in-a-different-directory/](http://www.optiniche.com/blog/145/wordpress-tutorial-install-wordpress-in-a-different-directory/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:36:15.383

从您的规则中的重定向中删除 wordpress（这`http://domain.co.uk/`意味着存在隐式重定向）并添加一个特定的规则以在内部重写：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.domain.co.uk$ [NC]
RewriteRule ^ http://domain.co.uk/ [L,R=301]

# now silently rewrite to wordpress
RewriteCond %{REQUEST_URI} !^/wordpress
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /wordpress/$1 [L] 
```

# regex - Postgresql中的Posix正则表达式从引用的文本中提取？

> ID：15875613
> 
> 赞同：0
> 
> 时间：2013-04-08T09:24:21.777
> 
> 标签：regex, postgresql, posix

我正在尝试从 PostgreSQL 中的列值中提取一些字符串。

所以基本上我在表格的列中有文本，看起来像：

```
blah blah blah.... <something="AValueIWant">....dfdf.gd d.fg d.fd... <something="AnotherValueIWant">. 
```

我希望能够以如下形式运行查询以提取“AValueIWant”和“AnotherValueIWant”（不带引号）：

```
regex_matches
-------------
AValueIWant
AnotherValueIWant 
```

让我们称列“body”和表“tablebody”。

到目前为止，我有类似的东西：

```
select regexp_matches(body, <some kind of pattern that doesn't work>, 'g') from tablebody 
```

我觉得张贴我尝试过的东西没有任何价值，因为它们都不起作用！我查看了 docos 并尝试了诸如 'something(.+)\"' 之类的东西，但它返回了整个正文。我在网上找到的其他模式，如 '/"([^"]*/"' 什么都不返回有没有其他人对知道答案的正则表达式有更好的理解，或者其他方法可以做到这一点:)？我是个新手。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:50:22.017

```
select a[1]
from (
    select regexp_matches(body, '="(.+?)"', 'g') a
    from tablebody
) s 
```

但我宁愿使用专门的 HTML 解析器，除非它是你想要的非常快速和肮脏的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:34:55.783

你可以试试这个：

```
<something="([^"]+)"> 
```

或更通用：

```
<[A-Za-z]+="([^"]+)"> 
```

或者更通用，如果您不关心属性的名称：

```
="([^"]+)" 
```

或者......好吧，你明白了。

# java - 使用 lucene 4.0 在索引时进行排序

> ID：15875615
> 
> 赞同：0
> 
> 时间：2013-04-08T09:24:28.647
> 
> 标签：java, lucene

是否可以仅使用 lucene 4.0 在索引时对文档进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:08:58.493

您可以在索引中搜索时对 Lucene 索引进行排序。

此链接可能对您有所[帮助](https://stackoverflow.com/questions/6993275/store-documents-based-on-sort-order-in-lucene-index)

[当您从 Lucene 3 更改为 4](http://www.gossamer-threads.com/lists/lucene/java-user/171163)时，您可能会看到此链接，
而旧版本的 [this]。[3](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/Sort.html)

# php - 如何保存 $s1array = file_get_contents("T-Splitsing.txt");, $s1array

> ID：15875616
> 
> 赞同：0
> 
> 时间：2013-04-08T09:24:31.023
> 
> 标签：php, html

我目前正在尝试将其保存在文件中。但它不会工作。

有谁知道我做错了什么？当我按下`verturen`按钮时我的目标是保存值， `r`或`o`在`g`文本文件中，然后将其保存在`$s1array`. 之后，如果我按下载，他会将其加载`$s1array`到文本文件中。我想`$s1array`在剩下的时间里保持新的价值。

（这是我的代码）

```
 <form method="post">
    <input type="submit" name="submit1" value="Versturen">
    <select name="state1sl1">
      <option name="groen" value="g">groen</option>}
      <option name="oranje" value="o">oranje</option>
      <option name="rood" value="r">rood</option>}
    </select>

    <select name="state1sl2">
      <option name="groen" value="g">groen</option>}
      <option name="oranje" value="o">oranje</option>
      <option name="rood" value="r">rood</option>}
    </select>

    <select name="state1sl3">
      <option name="groen" value="g">groen</option>}
      <option name="oranje" value="o">oranje</option>
      <option name="rood" value="r">rood</option>}
    </select>
    </form>

<form method="post">
<input type="submit" name="download" value="download">
</form>

    <?php
    if(isset($_POST['submit1'])){
    $_name1 = $_POST['state1sl1'];
    $_name2 = $_POST['state1sl2'];
    $_name3 = $_POST['state1sl3'];
    $my_File = 'T-Splitsing.txt';
    $fh = fopen($my_File, 'w') or die("can't open file");
    fwrite($fh, $_name1);
    fwrite($fh, $_name2);
    fwrite($fh, $_name3);
    fclose($fh);
    $s1array = file_get_contents("T-Splitsing.txt");
    }

  if(isset($_POST['download'])){

   $file = 'T-Splitsing.txt';

     if (file_exists($file)) {
     $my_File = 'T-Splitsing.txt';
     $fh = fopen($my_File, 'w') or die("can't open file");
     fwrite($fh, $s1array);
     fclose($fh);

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:45:58.513

You can't do that, since PHP does not remember state. Each time you submit a form, this is a new HTTP request. Nevertheless, what you could do (as I see that you are saving the data into "T-Splitsing.txt") is to simply load the data from the file and send it to the user. The "download" part of the code would become:

```
 if(isset($_POST["download"])){
   $file = "T-Splitsing.txt";
   header("Content-Type: text/plain");
   header("Content-disposition: attachment; filename=\"".$file."\""); 
   readfile($file);
 } 
```

# clojure - Clojure Korma：如何在函数中使用 where 宏？

> ID：15875617
> 
> 赞同：1
> 
> 时间：2013-04-08T09:24:31.970
> 
> 标签：clojure, korma

我正在尝试在函数中使用 where 宏：

```
(defentity student
  (pk :id)
  (table :student)
  (entity-fields :id :name :age :class)
  (database prod))

(defn query-student [cond]
  (select student
    (where cond))) 
```

我测试它：

```
(select student
  (where {:age [> 13]}))

(query-student '{:age [> 13]}) 
```

看起来不错，但这

```
(select student
  (where (or {:age [> 13]} {:class [in ["1" "2" "3"]]})))

(query-student '(or {:age [> 13]} {:class [in ["1" "2" "3"]]})) 
```

不工作！

```
Failure to execute query with SQL:
SELECT "student".* FROM "student" WHERE (or {:age [> 13]} {:class [in ["1" "2" "3"]]})  ::      []
PSQLException:
 Message: ERROR: syntax error at or near "or"
  Location：42
 SQLState: 42601
 Error Code: 0
PSQLException ERROR: syntax error at or near "or"
  Location：42  org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse  (QueryExecutorImpl.java:2101) 
```

我想知道为什么？有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:15:54.323

在 Korma 中，`where`是一个宏，因此您的第二个示例将一个列表文字传递给它，而不是让宏有机会评估表单。

尝试将您的`query-student`函数更改为宏，沿着这些行

```
(defmacro query-student [cond]
  `(select student
    (where ~cond))) 
```

作为额外的好处，您在使用宏时不需要引用表单：

`(query-student (or {:age [> 13]} {:class [in ["1" "2" "3"]]}))`

希望这可以帮助。

# text-to-speech - 从 Google TTS API 获取 wav 文件

> ID：15875618
> 
> 赞同：2
> 
> 时间：2013-04-08T09:24:35.630
> 
> 标签：text-to-speech, wav

一个关于使用 PHP 的 Google Text-to-Speech (TTS) 的问题。

借助此脚本[http://stuffthatspins.com/stuff/php-TTS/](http://stuffthatspins.com/stuff/php-TTS/)

```
@$this->mp3data = file_get_contents("http://translate.google.com/translate_tts?ie=utf-8&tl=".$lang."&q={$text}"); 
```

我已经能够访问 Google TTS API 并将 mp3 文件下载到我的服务器。不幸的是，我的服务器上没有安装 mp32ogg 程序，所以我想问一下是否有人知道是否可以选择直接从 Google 下载 .wav 文件？将生成的文件保存为 .wav 不起作用，因为 Firefox 会抛出“无法解码此 .wav 文件”

我需要它来支持 HTML5 音频的 Firefox。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:45:03.713

我不知道您的最终目标是什么，但是您是否尝试过使用“嵌入”标签而不是“音频”？

我使用 Firefox 并替换：

```
<audio controls="controls" autoplay="autoplay">
<source src="<?=$mp3?>" type="audio/mp3" />
<source src="<?=$ogg?>" type="audio/ogg" />
Your browser does not support the audio tag.
</audio> 
```

和：

```
<embed src="<?=$mp3?>" type="audio/mp3"> 
```

让它工作。

让我知道它是否对您有帮助，我想看看完成的项目。

# ssl - PEM 和 DER 格式之间的 SSL 证书转换

> ID：15875627
> 
> 赞同：1
> 
> 时间：2013-04-08T09:25:16.657
> 
> 标签：ssl, openssl, certificate, ssl-certificate

我正在尝试使用我自己的 CA 创建一个自签名证书。所有证书和密钥当前都是 PEM 格式。为了让我的 Android 手机接受证书，我需要创建一个`CA.crt`二进制 DER 格式的文件。

我确实使用 openssl 创建了这个文件

```
openssl x509 -in CA-cert.pem -inform PEM -outform DER > CA.crt 
```

但是，`CA.crt`在我的 Android 上安装后，一个网站的证书 ( `www.example.com-cert.pem`)`CA-cert.pem`在 Chrome for Android 中仍然显示为无效。证书（至少据我了解）是正确创建的，并且在转换回来时没有任何区别：

```
diff -u CA-cert.pem <(openssl x509 -in CA.crt -inform DER -outform PEM) 
```

我在这里想念什么？我是否需要以`www.example.com.crt`DER 格式创建另一个版本的网站证书（例如 ）？

*编辑：*不知道这是否应该首先工作，但尝试验证证书`CA.crt`失败并出现错误：

```
$ openssl verify -CAfile CA.crt www.example.com-cert.pem
Error loading file CA.crt 
```

同样适用于 PEM 版本：

```
$ openssl verify -CAfile CA-cert.pem www.example.com-cert.pem
www.example.com-cert.pem: OK 
```

# linux - ARM 交叉编译 SQLite 测试夹具时出错

> ID：15875630
> 
> 赞同：0
> 
> 时间：2013-04-08T09:25:22.133
> 
> 标签：linux, sqlite, arm, cross-compiling

我正在尝试从 Linux pc 为 ARM`testfixture`的**SQLite创建一个。**但是，由于提示错误，我无法编译。

我收到以下错误，

```
 Make: *** No rule to make target `armv7l-timesys-linux-gnueabi-gcc', \
         needed by `testfixture'.  Stop. 
```

下面是`make`我正在使用的文件。

```
#!/usr/make
#
# Makefile for SQLITE
#
# Source code to the test files.
#
# set up compiler and options

TOP = .
INCLUDES = -I"/home/bkrishnan/Downloads/sqlite-amalgamation/testfixture"

CC = armv7l-timesys-linux-gnueabi-gcc 

CFLAGS = -g $(INCLUDES) -DSQLITE_PRIVATE="" -DSQLITE_TEST=1 -DTCLSH=1 -D_FILE_OFFSET_BITS=64 -DSQLITE_CORE

# library files.
LIB = libtcl8.5.so

#-----File Dependencies----------------------

# Source files.
SRC = \
        $(TOP)/tclsqlite.c \
        $(TOP)/sqlite3.c \
        $(TOP)/shell.c
# Source OBJ files.
SRCOBJ = \
        tclsqlite.o \
        sqlite3.o \
        shell.o
# Test source files.
TESTSRC = \
        $(TOP)/test_async.c \
        $(TOP)/test_autoext.c \
        $(TOP)/test_backup.c \
        $(TOP)/test_btree.c \
        $(TOP)/test_config.c \
        $(TOP)/test_demovfs.c \
        $(TOP)/test_devsym.c \
        $(TOP)/test_func.c \
        $(TOP)/test_hexio.c \
        $(TOP)/test_init.c \
        $(TOP)/test_intarray.c \
        $(TOP)/test_journal.c \
        $(TOP)/test_malloc.c \
        $(TOP)/test_mutex.c \
        $(TOP)/test_onefile.c \
        $(TOP)/test_osinst.c \
        $(TOP)/test_pcache.c \
        $(TOP)/test_schema.c \
        $(TOP)/test_server.c \
        $(TOP)/test_stat.c \
        $(TOP)/test_tclvar.c \
        $(TOP)/test_thread.c \
        $(TOP)/test_vfs.c \
        $(TOP)/test_wsd.c \
        $(TOP)/test1.c \
        $(TOP)/test2.c \
        $(TOP)/test3.c \
        $(TOP)/test4.c \
        $(TOP)/test5.c \
        $(TOP)/test6.c \
        $(TOP)/test7.c \
        $(TOP)/test8.c \
        $(TOP)/test9.c \
        $(TOP)/test_fuzzer.c \
        $(TOP)/test_multiplex.c \
        $(TOP)/test_quota.c \
        $(TOP)/test_rtree.c \
        $(TOP)/test_superlock.c \
        $(TOP)/test_syscall.c \
        $(TOP)/test_wholenumber.c \
        $(TOP)/test_loadext.c \
        $(TOP)/test_spellfix.c \
        $(TOP)/test_vfstrace.c \
        $(TOP)/fts3_term.c \
        $(TOP)/fts3_test.c

# Test OBJ files
TESTOBJ = \
        test_async.o \
        test_autoext.o \
        test_backup.o \
        test_btree.o \
        test_config.o \
        test_demovfs.o \
        test_devsym.o \
        test_func.o \
        test_hexio.o \
        test_init.o \
        test_intarray.o \
        test_journal.o \
        test_malloc.o \
        test_mutex.o \
        test_onefile.o \
        test_osinst.o \
        test_pcache.o \
        test_schema.o \
        test_server.o \
        test_stat.o \
        test_tclvar.o \
        test_thread.o \
        test_vfs.o \
        test_wsd.o \
        test1.o \
        test2.o \
        test3.o \
        test4.o \
        test5.o \
        test6.o \
        test7.o \
        test8.o \
        test9.o \
        test_fuzzer.o \
        test_multiplex.o \
        test_quota.o \
        test_rtree.o \
        test_superlock.o \
        test_syscall.o \
        test_wholenumber.o \
        test_loadext.o \
        test_spellfix.o \
        test_vfstrace.o \
        fts3_term.o \
        fts3_test.o 

# Header files used by all library source files.
HDR = \
        $(TOP)/sqlite3.h \
        $(TOP)/btree.h \
        $(TOP)/hash.h \
        $(TOP)/hwtime.h \
        $(TOP)/mutex.h \
        $(TOP)/os.h \
        $(TOP)/os_common.h \
        $(TOP)/pager.h \
        $(TOP)/pcache.h \
        $(TOP)/sqlite3ext.h \
        $(TOP)/sqliteLimit.h \
        $(TOP)/sqliteInt.h \
        $(TOP)/test_intarray.h \
        $(TOP)/test_multiplex.h \
        $(TOP)/test_quota.h \
        $(TOP)/wal.h \
        $(TOP)/vdbe.h \
        $(TOP)/tcl.h \
        $(TOP)/tclDecls.h \
        $(TOP)/tclPlatDecls.h \
        $(TOP)/tclTomMathDecls.h \
        $(TOP)/tclTomMath.h \
        $(TOP)/fts3Int.h        

testfixture$(TEXE): $(CC) $(CFLAGS) -o $(SRCOBJ) $(TESTOBJ) $(HDR) -lm $(LIB) 

#depend:
#   makedepend -Y $(HDR)

clean:
    rm -f $(TESTOBJ) $(SRCOBJ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:34:01.440

你应该改变

```
testfixture$(TEXE): $(CC) $(CFLAGS) -o $(SRCOBJ) $(TESTOBJ) $(HDR) -lm $(LIB) 
```

至

```
testfixture$(TEXE): $(TESTOBJ)
    $(CC) $(CFLAGS) -o $(SRCOBJ) $(TESTOBJ) $(HDR) -lm $(LIB) 
```

因为 $(CC) 是要运行的命令，而不是目标依赖项。

# javascript - 如何将输入文本插入图像？

> ID：15875638
> 
> 赞同：9
> 
> 时间：2013-04-08T09:25:48.150
> 
> 标签：javascript, jquery, canvas

我想为 magento 开发扩展，这有助于创建自定义 T 恤，但我不知道该怎么做。我想提供像这个网站这样的功能~~[http://www.inkpixi.com/item/ATV+Repair/ A252/329/item.html](http://www.inkpixi.com/item/ATV+Repair/A252/329/item.html)~~^(*死链接*)

在这里您输入名称，然后名称自动插入到图像中。我想准确地提供这个但没有得到正确的问题

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T09:41:05.643

[你可以用画布](/questions/tagged/canvas "显示标记为“画布”的问题")简单地做到这一点

```
var canvas = document.createElement('canvas'),
	  ctx = canvas.getContext('2d');

canvas.width  = 200;
canvas.height = 200;
document.body.appendChild(canvas);

function sendToCanvas( ob ){
  var img = new Image();
  img.addEventListener('load', function(){
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    ctx.font = ob.fontWeight+' '+ob.fontSize+' '+ob.fontFamily;
    ctx.textAlign = 'center';
    ctx.fillStyle = ob.color;
    ctx.fillText(ob.text, canvas.width/2, canvas.height/2.5);
  });
  img.src = ob.image;
}

// Defaults
var cvsObj = {
    text       : "stackoverflow",
    image      : "http://i.imgur.com/hqayV16.jpg",
    fontFamily : "Arial",
    fontWeight : "bold",
    fontSize   : "90%",
    color      : "rgba(244, 128, 36, 0.7)"
};

sendToCanvas( cvsObj ); // Send default data on init

document.getElementById("text").addEventListener("input", function(){
  cvsObj.text = this.value; // Modify cvsObj text
  sendToCanvas( cvsObj );   // Send custom data on input
}); 
```

```
Text: <input id="text" type="text"><br>
```

^(*右键**另存* 为`:)`！)

# c# - 使用 facebook c# sdk V. 6.x 如何获取用户管理的所有页面的列表？

> ID：15875643
> 
> 赞同：1
> 
> 时间：2013-04-08T09:26:05.863
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我想获取用户是管理员的所有页面 ID，我有此代码，但它似乎不起作用

> ```
>  internal static IEnumerable<string> GetAllPages()
>     {
>         try
>         {
>             var fb = new FacebookClient(Settings.Default.AccessToken) { AppId =     CurrentValues.appId, AppSecret = CurrentValues.appSecret };
>             List<string> pagesIds = new List<string>();
>             dynamic results = fb.Get("/me/pages");
>             var _sb = new StringBuilder();
>             foreach (var result in results.data)
>             {
>                 pagesIds.Add(result.id);
>                 _sb.Append(result.id);
>                 _sb.Append(Environment.NewLine);
>             }
>             MessageBox.Show(_sb.ToString());
>             return pagesIds;
>         }
>         catch 
>         {
>             MessageBox.Show("can't get all pages");
>             return null;
>         }
>     } 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:35:37.677

我知道错误在哪里，我们应该使用 fb.Get("/me/accounts"); 而不是 fb.Get("/me/pages");

这么愚蠢的错误

这是工作代码

> ```
> internal static IEnumerable<string> GetAllPages()
> {
>     try
>     {
>         var fb = new FacebookClient(Settings.Default.AccessToken) { AppId =     CurrentValues.appId, AppSecret = CurrentValues.appSecret };
>         List<string> pagesIds = new List<string>();
>         dynamic results = fb.Get("/me/accounts");           
>         foreach (var result in results.data)
>         {
>             pagesIds.Add(result.id);               
>         }          
>         return pagesIds;
>     }
>     catch 
>     {
>         MessageBox.Show("can't get all pages");
>         return null;
>     }
> } 
> ```

# javascript - 通过更改构造函数属性动态替换原型

> ID：15875644
> 
> 赞同：3
> 
> 时间：2013-04-08T09:26:07.850
> 
> 标签：javascript

我正在尝试制作一些好的代码示例来体验 JavaScript 的“无类”。到目前为止，这是我想出的：

```
function One() {}
function Two() {}

One.prototype.a = 5;
Two.prototype.b = 4;

var obj = new One();
print("1) ctor =", obj.constructor, "a =", obj.a, " b =", obj.b);
obj.constructor = Two;
print("1) ctor =", obj.constructor, "a =", obj.a, " b =", obj.b);

var objTwo = new obj.constructor();
print("2) ctor =", objTwo.constructor, "a =", objTwo.a, " b =", objTwo.b); 
```

这些是相应的打印：

```
1) ctor = function One() {
} a = 5  b = undefined
1) ctor = function Two() {
} a = 5  b = undefined
2) ctor = function Two() {
} a = undefined  b = 4 
```

我的问题是为什么原型链在这里不起作用？我使用 JavaScript (spidermonkey) (spidermonkey-1.7) 在 ideone 中运行我的示例。看起来在现实生活中原型是通过其他方式访问的`constructor.prototype`？

PS 进一步的实验表明，分配给`obj.constructor`添加了新属性，这会影响原始属性。为什么？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:28:46.410

是的，有`Object.__proto__`和直接`Object.prototype`。如果您打印 One.prototype，您应该会看到所需的结果。如果你这样做`console.dir(someInstance);`，你会得到直接在下面列出的实例变量`someInstance`。

之后，您可以展开`prototype`并且您将看到您为该原型定义的方法。（例如`One.prototype.doSomething = function(a){}`）；

[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)阅读有关`Object.__proto__`它的更多信息，并在[此处](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/proto)阅读有关`Object.prototype`（标准）的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:13:32.357

Initially, your `var obj` doesn't have a property named `constructor`. When you print it, it's resolved via its prototype (`One.prototype`) -- all prototypes have a constructor. When you assign `obj.constructor = Two` you create an own property in `obj` which shadows the prototype property. This new prop means nothing to the engine and doesn't affect inheritance in any way.

In general, "constructor" appears to be a pure informative property and doesn't serve any particular purpose. It's just a backlink from a function's prototype back to the parent function. See [Creating functions](http://es5.github.io/#x13.2) and [Construct](http://es5.github.io/#x13.2.2) for further reference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:38:26.697

这里的问题是你进入了机械系统，然后开始拉线。书中没有真正发生在这里，因为你通过注入这个指针破坏了自然序列

```
obj.constructor = Two; 
```

这不是进行继承的正确方法。这是：

```
function One() {}
function Two() {}

One.prototype.a = 5;
Two.prototype = new One();
Two.prototype.b = 4; 
```

Now any object instantiated with `new Two()` will show the `is-a` relationship (inheritance) properly in the constructor. Here is a **[jsFiddle Demo](http://jsfiddle.net/VEdYA/)** showing the difference.

# mysql - 将 varchar 转换为 datetime 类型

> ID：15875652
> 
> 赞同：0
> 
> 时间：2013-04-08T09:26:33.260
> 
> 标签：mysql

我需要帮助将`varchar`类型列转换为具有日期时间值的`DATETIME`类型，并且我只需要其中的时间部分。即我有一列的值如下：

```
Verified_date
04/04/2013 03:17:08 PM
05/04/2013 10:10:13 AM
04/04/2013 03:45:15 PM 
```

我只需要时间部分，即

```
Time
03:17:08 PM
10:10:13 AM
03:45:15 PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:44:54.993

试试这个查询，只需添加结束格式 -

```
SELECT TIME(STR_TO_DATE('04/04/2013 03:17:08 PM', '%d/%c/%Y %h:%i:%s %p'));
+----------+
| 15:17:08 |
+----------+ 
```

一种更简单的解决方案 -

```
SELECT SUBSTRING_INDEX('04/04/2013 03:17:08 PM', ' ', -2);
+-------------+
| 03:17:08 PM |
+-------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:47:51.720

您可以使用[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function%5Fdate-format)使用此查询：

```
Select DATE_FORMAT(STR_TO_DATE(('04/04/2013 03:17:08 PM'), '%d/%m/%Y %r '), '%r') 
```

此语句将为您提供所需的格式化日期，如`03:17:08 PM`.

您可以查看[SQL Fiddle](http://www.sqlfiddle.com/#!2/a2976/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:49:35.033

试试这个

```
select DATE_FORMAT(STR_TO_DATE(start, '%d/%m/%Y %r'), '%r') from your_table; 
```

参考[日期和时间函数](http://dev.mysql.com/doc/refman/5.1/de/date-and-time-functions.html)

# perl - 我的 File::Find::Rule->grep 调用有什么问题？

> ID：15875656
> 
> 赞同：0
> 
> 时间：2013-04-08T09:26:38.523
> 
> 标签：perl, grep

我正在尝试获取其中使用了“MyClass”类的 .cpp 文件列表。

这是片段：

```
use File::Find::Rule;
my @match_files = File::Find::Rule->file()->name('*.cpp')->in('.')->grep("MyClass"); 
```

但是，这给出了以下错误：

```
Can't call method "grep" without a package or object reference at ./script.pl line 20. 
```

有人可以帮我理解这个电话有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:09:03.877

该错误告诉您最后一个`->`运算符的 LHS*不是*对象。这是因为该`in`方法评估规则并返回匹配文件的列表。

所以你可能应该交换`grep`和`in`：

```
my @files = File::Find::Rule->file->name('*.cpp')->grep(qr/MyClass/)->in('.'); 
```

[您可以在MetaCPAN](https://metacpan.org/module/File%3a%3aFind%3a%3aRule)重新阅读文档。

# c# - 如何使用 C# 中的线程在同一端口杀死和创建新图像

> ID：15875661
> 
> 赞同：1
> 
> 时间：2013-04-08T09:26:56.770
> 
> 标签：c#, multithreading, port

此代码使用后台工作线程并行从套接字读取图像。我想再次为我的新图像重用相同的套接字，但出现以下错误。

****错误：该进程无法访问文件“D:\image 1.png，因为它正被另一个进程使用****

**即我的想法是杀死前一个进程并在同一个套接字中启动一个新进程。**

```
enter code here 
```

命名空间 ScreenCapture { 公共部分类 Form1 : Form { String ipaddress; 公共 Form1() { InitializeComponent(); backgroundWorker1.WorkerReportsProgress = true; }

```
 private void button1_Click(object sender, EventArgs e)
    {

        ipaddress=textBox1.Text;
        try
        {
            TcpClient client = new TcpClient(ipaddress, 5000);                                  // create the client socket and connect to port number 5000
            Stream s = client.GetStream();                                                      // create the object of stream and assign client socket stream
            StreamWriter sw = new StreamWriter(s);
            StreamReader sr = new StreamReader(s);
            sw.AutoFlush = true;                                                                // auto flush the stream writer
            sw.WriteLine("Send");
            client.Close();
            s.Close();
            Thread.Sleep(15000);
            backgroundWorker1.RunWorkerAsync();
        }
        catch (Exception ee)
        {
            MessageBox.Show(ee.ToString());
        }

    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {

        for (int i = 1; i < 10; i++)
        {
            try
            {
                TcpClient client = new TcpClient(ipaddress, 5001);                                  // create the client socket and connect to port number 5000
                Stream s = client.GetStream();                                                      // create the object of stream and assign client socket stream
                StreamWriter sw = new StreamWriter(s);
                sw.AutoFlush = true;
                sw.WriteLine(i.ToString());
                client.Close();
                s.Close();

                Thread proces = new Thread(delegate()
                {
                    int portno = 5001 + i;
                    int j = i;
                //    MessageBox.Show(portno.ToString());
                    TcpClient clientt = new TcpClient(ipaddress,portno);                                // create client socket and connect to prot number 5000   
                    using (var stream = clientt.GetStream())                                            // create the stream variable
                    using (var output = File.Create("D:\\img"+j+".png"))           // create variable output
                    {
                        var buffer = new byte[1024];                                                    // crfeate variable buffer of length 1024
                        int bytesRead;
                        while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)                 // get the number of bytes from stream and greater then
                        {
                            output.Write(buffer, 0, bytesRead);
                        }
                    }
                    backgroundWorker1.ReportProgress(j);
                    clientt.Close();
                    return;
                });
                proces.Start();
                Thread.Sleep(5200);

            }
            catch (Exception ee)
            {
                MessageBox.Show(ee.ToString());
            }

            if (i == 9)
                i = 0;
        }
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {

        this.SuspendLayout();
        pictureBox1.Image = new Bitmap(@"D:\\img" +e.ProgressPercentage + ".png");
       if (File.Exists(@"D:\\img" + (e.ProgressPercentage - 1).ToString() + ".png"))
        {
           File.Delete(@"D:\\img" + (e.ProgressPercentage - 1).ToString() + ".png");
        }
        this.ResumeLayout();

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

} 
```

}

# c# - Word 2003 和 Word 2007 的 Word C# 插件

> ID：15875662
> 
> 赞同：0
> 
> 时间：2013-04-08T09:27:02.200
> 
> 标签：c#, ms-word, ms-office

是否可以在 2003 年和 2007 年使用 C# 编写 Word (Office) 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:39:05.293

请参考：

[http://netoffice.codeplex.com/](http://netoffice.codeplex.com/)

这使您能够为所有受支持的 MS Office 版本创建插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:30:33.870

我不确定您的意思是不是该插件必须同时在两个版本中工作，但可以在 C# 中分别为两个版本编写插件。

例如，Visual Studio 2010 甚至为 Office 2010 和 2007 加载项提供了模板。

# php - 在 MySQL 和 PHP 中按 ID 显示特定列

> ID：15875665
> 
> 赞同：1
> 
> 时间：2013-04-08T09:27:06.027
> 
> 标签：php, mysql, show, records

我有 PHP 和 MySQL 的问题（我认为对你来说很容易解决）。我有数据库，称为“tekst”。有3列：

1.  id（自动增量），
2.  日期（时间戳），
3.  特雷斯克（文本）

和网站：index.html。我想将这样的代码粘贴`<?php echo "$id1"; ?>`到 index.html 中以显示分配给某个“id”的列“treść”。

现在我确实喜欢这样：

`$w = mysql_fetch_array(mysql_query("SELECT * FROM tekst WHERE id=5"));`

`echo $w['tresc'];`

但是当我有很多记录时，它会很麻烦。

如何创建 MySQL 查询以显示我想要的内容？在一页中，我将有许多 ID。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:29:13.497

尝试使用`mysql_fetch_row`.

**例子**

```
mysql_fetch_row(mysql_query("SELECT * FROM tekst WHERE id=1")); 
```

### [`Official Document`](http://php.net/manual/en/function.mysql-fetch-row.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:29:52.893

你可以这样做

```
$result = mysql_query("SELECT * FROM tekst");

while ($r = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo $r['tresc'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:31:27.967

首先，您应该使用 PDO 或 MySQLi，因为这些 mysql_ 函数已被弃用。

然后，要列出所有 id，请使用不同的查询：`SELECT * FROM tekst`

这将返回一个您应该迭代的数组。

# oracle - ORACLE 将数字转换为字符串

> ID：15875666
> 
> 赞同：8
> 
> 时间：2013-04-08T09:27:06.167
> 
> 标签：oracle, to-char

在转换数字时需要一些帮助：

```
select to_char(a, '99D99')
       , to_char(a, '90D99')
from
(
select 50 a from dual
union
select 50.57 from dual
union
select 5.57 from dual
union
select 0.35 from dual
union
select 0.4 from dual 
```

将导致：

```
1      ,35    0,35
2      ,40    0,40
3     5,57    5,57
4    50,00   50,00
5    50,57   50,57 
```

但是如何使我的输出如下：

1.  0,35
2.  0,4
3.  5,57
4.  50
5.  50,57

我需要`0`逗号之前，但不是之后。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T10:59:51.103

使用[`FM`格式模型修饰符](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements004.htm#sthref456)来接近，因为你不会得到小数分隔符后的尾随零；但你仍然会得到分隔符本身，例如`50.`. 你可以用`rtrim`它来摆脱它：

```
select to_char(a, '99D90'),
    to_char(a, '90D90'),
    to_char(a, 'FM90D99'),
    rtrim(to_char(a, 'FM90D99'), to_char(0, 'D'))
from (
    select 50 a from dual
    union all select 50.57 from dual
    union all select 5.57 from dual
    union all select 0.35 from dual
    union all select 0.4 from dual
)
order by a;

TO_CHA TO_CHA TO_CHA RTRIM(
------ ------ ------ ------
   .35   0.35 0.35   0.35
   .40   0.40 0.4    0.4
  5.57   5.57 5.57   5.57
 50.00  50.00 50\.    50
 50.57  50.57 50.57  50.57 
```

请注意，我`to_char(0, 'D')`用于生成要修剪的字符，以匹配小数点分隔符 - 因此它会查找相同的字符，`,`或者`.`，作为第一个`to_char`添加的字符。

The slight downside is that you lose the alignment. If this is being used elsewhere it might not matter, but it does then you can also wrap it in an `lpad`, which starts to make it look a bit complicated:

```
...
lpad(rtrim(to_char(a, 'FM90D99'), to_char(0, 'D')), 6)
...

TO_CHA TO_CHA TO_CHA RTRIM( LPAD(RTRIM(TO_CHAR(A,'FM
------ ------ ------ ------ ------------------------
   .35   0.35 0.35   0.35     0.35
   .40   0.40 0.4    0.4       0.4
  5.57   5.57 5.57   5.57     5.57
 50.00  50.00 50\.    50         50
 50.57  50.57 50.57  50.57   50.57 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:34:57.527

这应该可以解决您的问题：

```
select replace(to_char(a, '90D90'),'.00','')
from
(
select 50 a from dual
union
select 50.57 from dual
union
select 5.57 from dual
union
select 0.35 from dual
union
select 0.4 from dual
); 
```

也可以看看这个[SQL Fiddle](http://sqlfiddle.com/#!4/d41d8/9562)进行测试。

# matlab - 向量化 matlab 列归一化

> ID：15875670
> 
> 赞同：3
> 
> 时间：2013-04-08T09:27:36.470
> 
> 标签：matlab, normalization, vectorization

我想规范化每列的矩阵。我现在有这个工作正常的代码：

```
A = randn(10,3)

maxA = max(A,[],1)
minA = min(A,[],1)

for i=1:size(A,2)
    A(:,i) = (A(:,i) - minA(i) ./ (maxA(i) - minA(i))
end 
```

但是，由于我的矩阵要大得多，大约 10k x 60k 循环将永远持续下去。如何矢量化我的代码？我曾想过使用 Matlab `normc`，但这与我的代码不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:36:55.083

您可以使用`bsxfun`

```
A = randn(10,3)

maxA = max(A,[],1)
minA = min(A,[],1)

bsxfun(@minus, A, minA ./ abs(maxA - minA)) 
```

但是，我不太了解您的规范化。宁愿使用

```
(A(:,i) - minA(i)) ./ (maxA(i) - minA(i)) 
```

正常化？如果是这样，该`bsxfun`声明应为：

```
bsxfun(@times, bsxfun(@minus, A, minA), 1./abs(maxA - minA)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:41:01.070

一般来说，它可能是：

```
A = (A - ones(size(A)) * diag(minA)) / diag(maxA - minA); 
```

或者

```
A = (A - ones(size(A)) * diag(minA)) * diag(1 ./ (maxA - minA)); 
```

但考虑到尺寸：

```
m = repmat(minA, size(A, 1), 1);
n = repmat(maxA - minA, size(A, 1), 1);
A = (A - m) ./ n; 
```

# java - 使用 apache poi 在 doc 文件中设置颜色文本

> ID：15875672
> 
> 赞同：0
> 
> 时间：2013-04-08T09:28:00.260
> 
> 标签：java, ms-word, apache-poi, hwpf

我使用此代码片段在 MS Word 文件中设置颜色文本

```
CharacterRun r = paragraph.getCharacterRun(2).insertBefore("x");
r = r.insertBefore("y");
r.setColor(6);
r.insertBefore("z); 
```

我想将颜色设置为仅“y”字符，但我得到的结果是所有“x”、“y”、“z”都设置为红色。我在哪里错了？如何将颜色设置为仅“y”字符 - 第二个 CharacterRun。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-24T10:27:47.247

我想迟到总比没有好：您可能正在为整个包含运行设置颜色。你需要做的是：

*   从当前运行中删除溢出的文本
*   在相邻运行中添加溢出的文本
*   为当前运行着色

这是一个例子

```
private void highlightSubsentence(String currentRunText, String sentence, CharacterRun currentRun, int runIndex, Paragraph p, HighlighterColor color) {
        int sentenceBeginIndex = currentRunText.indexOf(sentence, 0);
        int sentenceLength = sentence.length();
        String leftSentence = currentRunText.substring(0, sentenceBeginIndex);
        String rightSentence = currentRunText.substring(sentenceBeginIndex + sentenceLength);
        boolean leftOverflow = sentenceBeginIndex > 0;
        boolean rightOverflow = sentenceBeginIndex + sentenceLength < currentRunText.length();
        boolean isInTable = p.isInTable();
        if (rightOverflow && !isInTable && runIndex + 1 < p.numCharacterRuns()) {
            currentRun.replaceText(sentence + rightSentence, sentence);
            p.getCharacterRun(runIndex + 1).insertBefore(rightSentence);
        }
        if (leftOverflow && !isInTable && runIndex > 0) {
            currentRun.replaceText(leftSentence + sentence, sentence);
            p.getCharacterRun(runIndex - 1).insertAfter(leftSentence);
        }
        currentRun.setColor(6);
    } 
```

# reporting-services - SSRS2008 未部署

> ID：15875674
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:28:13.373
> 
> 标签：reporting-services, ssrs-2008

我正在使用 SSRS2008 并希望将其部署在 Report Server 上，所有配置数据都在我的本地系统上。当我尝试部署报告时，它要求“服务报告登录”并且无法传递任何凭据。侧面明智我正在通过浏览器中的 URL（本地主机/报告）访问报告服务器，然后它显示空白页。

任何想法。提前致谢。

曼吉特·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:37:54.100

运行 SSRS 和部署时的三件事：

1.  确保您可以访问 http:// (servername)/Reports。您应该设置一个名为“Reporting Services 配置管理器”的工具。它位于所有程序>Microsoft SQL Server 2008>配置工具下。它将在左侧窗格中设置“Web 服务 URL”和“报告管理器 URL”的路径。通常我以远程（服务器名称）机器的默认管理员身份登录并确保它已设置。

2.  您需要确保您正在部署的机器的用户（或域组）可以访问这些位置。如果它们根本没有出现，那么您会遇到比部署更低级别的问题。通常，默认管理员可以添加新用户作为第一个设置例程。进入网页 /Reports，在主页面点击“文件夹设置”，然后在“安全”下将您的用户或组广告为“内容管理器”，这是最高级别。

3.  您部署到 Web 服务而不是网页。http://（服务器名称）/ReportServer 不是 /Reports。一种是执行请求的实际服务，另一种只是供观众查看内容和维护安全的外壳。使用 url 在您的项目属性下设置它。

其他想法：

如果你设置了特殊的防火墙，你需要确保你可以在远程机器上访问你的 SSRS 服务器的位置，而不仅仅是在本地。您应该能够从客户端机器部署到服务器，而不仅仅是本地。确保您的 SQL Server 版本不早于您尝试部署到的版本。SQL 2005 不适用于 2008 服务器直接，据我所知，您需要先更新 RDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:52:03.193

首先要检查的是您可以从安装它的机器访问报告服务 URL。您将需要以物理方式或通过 RDP 登录到运行 SSRS 的计算机。在机器上安装 SSRS 时，默认配置为访问 SSRS 的唯一帐户是用于安装 SSRS 的帐户。

转到已设置的报告服务 URL（[请参阅本文](http://beyondrelational.com/modules/12/tutorials/26/tutorials/4600/getting-started-with-ssrs-part-4-configuring-sql-server-reporting-services-in-windows-server-2008.aspx)）一旦您可以通过该 url 访问 SSRS，这将允许您设置一个具有适当权限的帐户来访问 SSRS URL。

# python - 子列表到字典

> ID：15875678
> 
> 赞同：3
> 
> 时间：2013-04-08T09:28:25.240
> 
> 标签：python, list, dictionary, sublist

所以我有：

```
a = [["Hello", "Bye"], ["Morning", "Night"], ["Cat", "Dog"]] 
```

我想把它转换成字典。

我尝试使用：

```
i = iter(a)  
b = dict(zip(a[0::2], a[1::2])) 
```

但它给了我一个错误：`TypeError: unhashable type: 'list'`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:29:25.477

简单地：

```
>>> a = [["Hello", "Bye"], ["Morning", "Night"], ["Cat", "Dog"]]
>>> dict(a)
{'Cat': 'Dog', 'Hello': 'Bye', 'Morning': 'Night'} 
```

我喜欢python的简单

您可以[在此处](http://docs.python.org/2/library/stdtypes.html#dict)查看构建字典的所有方法：

> 为了说明，以下示例都返回一个等于 的字典`{"one": 1, "two": 2, "three": 3}`：

```
>>> a = dict(one=1, two=2, three=3)
>>> b = {'one': 1, 'two': 2, 'three': 3}
>>> c = dict(zip(['one', 'two', 'three'], [1, 2, 3]))
>>> d = dict([('two', 2), ('one', 1), ('three', 3)]) #<-Your case(Key/value pairs)
>>> e = dict({'three': 3, 'one': 1, 'two': 2})
>>> a == b == c == d == e
True 
```

# sql - 左连接查询问题

> ID：15875680
> 
> 赞同：0
> 
> 时间：2013-04-08T09:28:25.577
> 
> 标签：sql, ms-access

你能让我知道我在这个查询中遇到语法错误的地方吗？查询包含三个表，所有表都使用左连接连接在一起。请提供解决方案...

```
select a.ACNo as CLIENTACCOUNTNO,
b.CLIentSHoRTCoDE as CLIENTCODE,
a.Client as CLIENTNAME,
a.SECURITY_TYPE as  SECURITYTYPE,
c.SECMSECNO as  SCRIPCODE,
a.EXCE as  EXCH,
a.SEC_IDENT as  SECIDENT,
a.SECURITY_NAME as  SECURITYNAME,
a.INST_TYPE as  INSTTYPE,
a.SECURITY_CCY as  SECURITYCC,
a.SECURITY_PRICE as  SECURITYPRICE,
a.PRICE_DATE as  PRICEDATE,
a.LOCATION as  LOCATION,
a.LOCATION_STATUS as  LOCATIONSTATUS,
a.HOLDINGS as  HOLDINGS,
a.UNITS as  UNITS,
a.SALEABLE_STOCK as  SALEABLESTOCK,
a.FACE_VALUE as  FACEVALUE,
a.CCY_PORTFOLIO_VALUE as  CCYPORTFOLIOVALUE,
a.PORTFOLIO_VALUE_ININR as  PORTFOLIOVALUE,
a.MATURITY_DATE as  MATURITYDATE,
a.PREV_COUPON_DATE as  PREVCOUPONDATE,
a.NEXT_COUPON_DATE as  NEXTCOUPONDATE,
a.OPTION_DATE as OPTIONDATE,
a.DEADLINE_DATE as  DEADLINEDATE,
a.EVENT_TYPE as  EVENTTYPE
from CRS_BCP_Holding as a left join
AccountMaster as b on Cint(a.acno) =b.CashAcNo left join InstrumentMaster as c on
a.SEC_IDENT=c.ISIN and c.status<>'c' and c.bse_Code='b'
where ((a.OPTION_DATE between 8/04/2013 and 8/04/2013 ) and (a.LOCATION_STATUS='Surrendered for CA' OR a.EVENT_TYPE='PART'))
order by b.CLIentSHoRTCoDE,c.SECMSECNO,a.LOCATION,a.LOCATION_STATUS 
```

![截屏](https://i.stack.imgur.com/2B6QM.png)

此查询用于 access 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:32:42.187

~~摆脱：（`as a``from CRS_BCP_Holding as a left join`~~对不起，我误读了查询。~~很好~~`AS a`，下面将进一步描述警告。）

```
(...)
FROM CRS_BCP_Holding AS a
     LEFT JOIN AccountMaster AS b
            ON CInt(a.acno) = b.CashAcNo
     LEFT JOIN InstrumentMaster as c
            ON (...) 
```

此外，如果您真的需要使用缩写，我会使用更有意义的缩写（例如 'cbh' 代表 'CRS_BCP_Holding'，'am' 代表 'AccountMaster' 等）使用 'a', ' b', 'c' 对于任何表，都很难阅读列所指的内容。

此外，就像 Santosh 在他的评论中所说，VBA 使用哈希来指定日期文字：

```
 WHERE ((a.OPTION_DATE BETWEEN #2013-04-08# and #2013-04-08#) ...) 
```

（我还使用 ISO 标准日期格式格式化了日期，以确保正确解释日期，无论系统的区域设置如何。在我的（荷兰语）机器上，8/04/2013 被解释为“2013 年 4 月 8 日” ; 而在我们的美国服务器上，它将被解释为“2013 年 8 月 4 日”。另一方面，2013-04-08 是明确的。

将所有内容放在一起，以下是否有效？

```
 SELECT a.acno AS clientaccountno
  ,      b.clientshortcode AS clientcode
  ,      a.client AS clientname
  ,      a.security_type AS securitytype
  ,      c.secmsecno AS scripcode
  ,      a.exce AS exch
  ,      a.sec_ident AS secident
  ,      a.security_name AS securityname
  ,      a.inst_type AS insttype
  ,      a.security_ccy AS securitycc
  ,      a.security_price AS securityprice
  ,      a.price_date AS pricedate
  ,      a.location AS location
  ,      a.location_status AS locationstatus
  ,      a.holdings AS holdings
  ,      a.units AS units
  ,      a.saleable_stock AS saleablestock
  ,      a.face_value AS facevalue
  ,      a.ccy_portfolio_value AS ccyportfoliovalue
  ,      a.portfolio_value_ininr AS portfoliovalue
  ,      a.maturity_date AS maturitydate
  ,      a.prev_coupon_date AS prevcoupondate
  ,      a.next_coupon_date AS nextcoupondate
  ,      a.option_date AS optiondate
  ,      a.deadline_date AS deadlinedate
  ,      a.event_type AS eventtype
    FROM crs_bcp_holding AS a 
         LEFT JOIN AccountMaster AS b 
                ON CInt(a.acno) = b.cashacno
         LEFT JOIN InstrumentMaster AS c
                ON a.sec_ident = c.isin
               AND c.status <> 'c'
               AND c.bse_Code = 'b'
   WHERE (a.option_date BETWEEN #2013-04-08# AND #2013-04-08#) 
     AND  (a.location_status = 'Surrendered for CA' OR a.event_type = 'PART')
ORDER BY b.clientshortcode
,        c.secmsecno
,        a.location
,        a.location_status 
```

# c# - C# 和 VB.Net 中数组的起始索引

> ID：15875681
> 
> 赞同：7
> 
> 时间：2013-04-08T09:28:35.037
> 
> 标签：c#, arrays, vb.net

看看下面的代码，

**C＃**

```
 string[] testString = new string[jobs.Count]; 
```

**等效 VB.Net**

```
Dim testString() As String = New String(jobs.Count - 1) {} 
```

为什么在创建新数组时在 vb.net 中使用 'jobs.Count - 1' 而不是 'jobs.Count'？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T09:32:31.007

在 VB.NET 中，数组声明中的数字表示“最大索引”，但在 C# 中表示“元素数”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T09:34:49.683

在 C# 中，数组具有您提供的元素数量：

```
string[] array = new string[2]; // will have two element [0] and [1] 
```

在 VB.NET 中，数组具有您提供的元素数量加一（您指定最大索引值）：

```
Dim array(2) As String // will have three elements (0), (1) and (2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T09:38:11.290

因为使用您的`C#`代码示例，

```
string testString = new string[jobs.Count]; 
```

这是创建字符串数组的构造函数。

在使用 VB.Net 示例时，

```
Dim testString As String = New String(jobs.Count - 1) {} 
```

您指的是一个新`String`对象，其括号中声明的字符串长度。

如果你想`String`在 VB.Net 中创建一个数组，它必须是这样的：

```
Dim testString (jobs.Count) As String 
```

see supporting links below: [VB.Net](http://www.dotnetperls.com/string-array-vbnet) [C#](http://www.dotnetperls.com/string-array)

# python - 在 Python 中使用 grep 导出多个输出文件

> ID：15875687
> 
> 赞同：0
> 
> 时间：2013-04-08T09:28:51.467
> 
> 标签：python, grep

我在 python 中创建一个必须使用 grep 的代码，我在通过 grep 运行它时遇到问题。我从“Infile”开始，然后对该文件进行剪切和排序以创建“Infile.ids”。“Infile.ids”包含“Infile”中的唯一 ID。然后，我必须通过“Infile”逐行运行“Infile.ids”中的 id，并将所有带有 id 的行提取到新的单独文件中。问题是当我在 grep 中运行它时，它一次运行所有行，并且基本上给了我一堆与原始“Infile”相同的文件，而不是单独的唯一文件。

这些是我试图获取的示例“Infile”和输出文件。

```
Infile              Infile.ids    Infile.Hello     Infile.World      Infile.Adios
Hello 1 3 5 7       Hello         Hello 1 3 5 7    World 2 4 6 8     Adios 1 2 3 4
World 2 4 6 8       World         Hello a b c d    World e f g h     Adios i j k l
Adios 1 2 3 4       Adios
Hello a b c d
World e f g h
Adios i j k l 
```

这是我到目前为止的代码：

```
#!/usr/bin/python

import sys
import os

Infile = sys.argv[1]

os.system("cut -d \" \" -f1 %s | sort -u > %s.ids" % (Infile, Infile))
Infile2 = "%s.ids" % Infile

handle = open("%s.ids" % Infile, "r")
line = handle.readline()

for line in handle:
    os.system("grep \"%s\" %s > %s.%s" % (line, Infile, Infile, line))
    line = handle.readline()

handle.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:49:06.730

When you iterate over `handle`, every `line` will have a newline at the end, which the lines in the `Infile` obviously don't (they have the "1 3 5 7" stuff first). So that is why your grep is failing.

Try doing

```
for line in handle.readlines():
    line = line.strip()
    os.system("grep \"%s\" %s > %s.%s" % (line, Infile, Infile, line)) 
```

And remove both the `line = handle.readline()` statements - if you are doing a `for` loop, it will iterate over the read lines itself. If you want to use the explicit reading call, then a `while` loop would be more appropriate (though I doubt recommended in this case).

Cheers

# objective-c - 自定义类既没有出现在界面生成器的建议框中，也没有分配给视图控制器

> ID：15875689
> 
> 赞同：1
> 
> 时间：2013-04-08T09:28:56.343
> 
> 标签：objective-c, interface-builder

我是 iOS 开发的新手，我想在界面生成器中为视图控制器分配一个自定义类，但是自定义类没有出现在 IB 的身份检查器中，尽管当我在其他一些类中导入自定义类时，它确实被导入了。我几乎尝试了我在搜索中找到的所有内容，例如删除派生数据、创建具有不同名称的类和重新启动 Xcode。但没有任何工作。有没有人有其他的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:01:45.327

您的自定义视图控制器类必须是`UIViewController`.

# angularjs - 角度资源中的错误回调，例如

> ID：15875690
> 
> 赞同：1
> 
> 时间：2013-04-08T09:28:57.287
> 
> 标签：angularjs, http-error, angular-resource

我在 django 中使用 ng-resource 时遇到了麻烦，因为它总是删除尾部斜杠。因此，我通过创建自己的资源来遵循[https://stackoverflow.com/users/192810/misko-hevery](https://stackoverflow.com/users/192810/misko-hevery)指南[https://stackoverflow.com/a/11850027 。](https://stackoverflow.com/a/11850027)我想问一下我的代码是否是实现错误回调函数的正确方法？IE：我的服务器响应如下 {err : "that book already exists!"}

```
angular.module('myApp').factory('Book', function($http) {
  var Book = function(data) {
    angular.extend(this, data);
  }

  Book.get = function(id) {
    return $http.get('/Book/' + id).then(function(response) {
      return new Book(response.data);
    });
  };

  Book.prototype.create = function() {
    var book = this;
    return $http.post('/Book/', book).then(function(response) {
      book.id = response.data.id;
      return book;
    });
  }

  return Book;
}); 
```

像这样修改create方法可以吗？

```
Book.prototype.create = function() {
    var book = this;
    return $http.post('/Book/', book).then(function(response) {
      book.id = response.data.id;
      return book;
    }, function(response){
      book.err = response.err
      return book;
    });
  } 
```

我这样修改控制器

```
var AppController = function($scope, Book) {
  $scope.err = ""
  // to create a Book
  var book = new Book();
  book.name = 'AngularJS in nutshell';
  book.create().then(function(){
    //check error, if exists pass the error message to scope
    if(typeof book.err !== "undefined"){
      $scope.err = book.err
    }
  );

}; 
```

# linux - 如何在 Linux 服务器上从命令行运行 PHP 代码

> ID：15875692
> 
> 赞同：2
> 
> 时间：2013-04-08T09:28:59.587
> 
> 标签：linux

如何在 Linux 服务器上从命令行运行 PHP 代码。

我有一个 PHP 代码，我需要在 linux 上将它作为 cronjob 运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:41:25.860

**在 Linux 上从命令行运行 PHP 代码：**

```
$php code.php 
```

**添加 PHP 文件以作为 cron 作业运行：**

```
$crontab -e 
```

将计划添加到 cron。

前任：

```
1 0 * * *  /usr/bin/php /var/www/code.php > /dev/null 2>&1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:31:13.847

您可以使用[PHP CLI](http://php.net/manual/en/features.commandline.php)运行您的代码。

像

$php -q /var/www/code.php

并使用 crontab -l 和 crontab -e 命令，您可以设置 cronjobs。

# java - 允许在 PropertyPlaceholderConfigurer 管理的属性文件中使用 $ 字符

> ID：15875695
> 
> 赞同：0
> 
> 时间：2013-04-08T09:29:07.997
> 
> 标签：java, spring, properties

我有一个名为 的属性文件，`setting.properties`内容如下：

```
authentication.provider=${Home_Url}/idm/names.lst 
```

我正在通过框架内使用此文件`PropertyPlaceholderConfigurer`，`Spring`如下所示：

```
<bean id="acl.authentication.provider" class="java.lang.String">
    <constructor-arg index="0" value="${authentication.provider}"/>
</bean> 
```

但是当我初始化上述上下文时，我收到以下错误：

> 线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常：
> 类路径资源 [context.xml] 中定义的名称为“acl.authentication.provider#0”的无效 bean 定义：无法解析占位符“Home_Url”

`$`我的问题是：当属性文件中的值要使用 PropertyPlaceholderConfigurer 进行处理时，有没有一种方法可以包含一个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:50:39.350

最简单的解决方法是将`PropertyPlaceholderConfigurer`其`ignoreUnresolvablePlaceholders`属性设置为配置`true`，这将导致它忽略它无法解决的 plcaeholder，而不是失败并出现异常。或者，将 更改`placeholderPrefix`为其他内容，例如`@{`，然后使用

```
<constructor-arg index="0" value="@{authentication.provider}"/> 
```

# crystal-reports - 抑制空白子报表产生空白

> ID：15875698
> 
> 赞同：1
> 
> 时间：2013-04-08T09:29:15.900
> 
> 标签：crystal-reports, crystal-reports-2008

我有一份包含 4 个 grops 的主要报告（CR 2008）。页眉内容在每一页上重复。我将子报表放在组页脚 1 中。如果组页脚 2 的内容一直流到边距末尾，并且子报表会产生一个空白区域。即使我已将子报告格式设置为禁止空白报告，如果为空白，我什至禁止该部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:33:25.253

*   首先尝试将子报表的内容放在绑定到您的数据的列表中，即使它只有一条记录。如果没有数据，列表将不会被渲染并且不会使用任何空间。

*   其次检查子报表是否扩展了父报表的**水平**扩展（通过减小子报表的宽度）。如果是这样，无论您为子报表支持什么数据，主报表中都会有一个空白区域。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:48:34.080

使用这个公式当你抑制时：

"IsNull({Necessary.DetailField}) 或 ({Necessary.DetailField}="")"

# scala - 给定一个 Future[T]，我可以编写带有返回 T 的 onComplete 回调的函数吗？

> ID：15875699
> 
> 赞同：3
> 
> 时间：2013-04-08T09:29:17.450
> 
> 标签：scala

我有这个方法：

```
def findById(id: String): Customer = {
     (new CustomerDaoEs).retrieve(Id[Customer](id)) onComplete {
      case Success(customer) => customer
      case Failure(t) => {
        throw new InvalidIdException(id.toString, "customer")
      }
    }
  } 
```

当然，问题在于它返回的是 Unit 而不是 Customer ......所以基本上 onComplete 的行为并不像模式匹配。

有什么方法可以继续返回客户（或 Option[Customer]）并使这项工作变得更好（我的意思是保持这个 onComplete 干净的结构）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:55:39.383

你可以改变`exception`使用`recover`方法：

```
def findById(id: String): Future[Customer] = {
  (new CustomerDaoEs).retrieve(Id[Customer](id)).recover{ case _ => throw new InvalidIdException(id.toString, "customer") }
} 
```

然后你可以像这样使用你的方法：

```
val customer = Await.result(findById("cust_id"), 5.seconds) 
```

或者，您可以将异常替换为`None`：

```
def findById(id: String): Future[Option[Customer]] = {
  (new CustomerDaoEs).
    retrieve(Id[Customer](id)).
    map{ Some(_) }.
    recover{ case _ => None }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T09:56:29.327

主要问题是 onComplete 是非阻塞的。因此，您将不得不使用 Await 并返回结果。

```
def findById(id: String): Customer = 
  Await.result(
    awaitable = (new CustomerDaoEs).retrieve(Id[Customer](id))),
    atMost = 10.seconds
  ) 
```

但是我宁愿建议保持代码非阻塞并使 findById return `Future[Customer]`。

# visual-studio-2010 - 如何使用多线程、单次迭代加载测试

> ID：15875710
> 
> 赞同：0
> 
> 时间：2013-04-08T09:29:42.660
> 
> 标签：visual-studio-2010, visual-studio-2012, load-testing

我为在我的 web 应用程序中执行不同操作的不同用户创建了多个 webtests。我想要做的是创建一个负载测试，它同时启动所有 webtests，每个测试只运行一次。似乎 VS 中没有负载测试模型适合我的情况。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T20:26:38.837

你应该能够做到这一点。一种方法是

使用户数量等于您拥有的测试数量在运行设置中使用恒定负载模式，在运行设置中设置“使用测试迭代为真”，将测试迭代设置为您拥有的测试数量。

但是，同时启动所有用户通常没有*意义*，因为它会使被测服务器超载。所以我想说，不要使用恒定的加载模式，而是为您的用户使用 1 秒的加速。

我相信还有其他方法可以做到这一点。

# activemq - ActiveMQ - 挂起发送方法

> ID：15875713
> 
> 赞同：0
> 
> 时间：2013-04-08T09:29:50.090
> 
> 标签：activemq, send, freeze

我正在使用 AcitveMQ 5.3。我不知道为什么我的客户挂在 send(of MessageProducer) 方法中。

这是我的情况，我有一个服务器（带有 MQ 代理），我将服务器从 1.0 升级到 2.0（MQ 代理也从 5.3 升级到 5.6）。同时，由于 MQ 代理重新启动，客户端收到“中断”通知和“恢复”通知。在“简历”中，我将客户端状态发送到服务器并且它挂起。

我有10个客户，其中两个有上述情况。我在向代理发送消息时尝试重新启动 MQ 代理。（与上述类似的场景。）但是，很难重现。

有没有人有过这样的经历？挂在 MessageProducer 方法的发送中？

谢谢。

* * *

更新：这里是步骤，

1.  经纪人和客户版本是 5.3

2.  卸载代理并安装 5.6 代理。

    ==> 如您所说，经纪人和客户之间的版本不匹配。版本不匹配会导致问题吗？但它应该具有向后兼容性，对吧？

3.  我将得到 TransportListener 的 Interrupted 和 Resume 方法

4.  我做了一些连接恢复任务，还在 Resume 调用中向代理发送了一条消息

    ==> 正如您所提到的，在 Resume 呼叫中发送消息是危险的。但是，我们一直这样做，以前从未遇到过此类问题。

5.  我的程序将挂在 MessageProducer 发送中。

这更清楚吗？代码到处都是分开的，不容易贴出来。

谢谢。

* * *

更新第 2 部分，

I move MessageProducer send to another thread, but I wait in Resume callback of TransportListener until sending done. In this scenario, it always hangs on sending a message. However, "sending a message in Resume callback directly" hangs occasionally. These two scenario is quite similar. Why are they so different? I dug in the source code(ActiveMQ-Cpp 3.4.5), but i didn't find any special things. or I dug in wrong files? I really want to know it's mechanism.

BTW, before "update part2", i'm using java version MQ. But the result seems no difference between java and cpp. So, at "update part2", i'm using ActiveMQ-CPP 3.4.5 as my library.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:11:16.227

Its a bit unclear what your setup is, are the clients and broker versions matched or not? If not then the problem is most likely related to that.

Some code would be helpful here. But I think what you are saying is that you send a message to the broker during the TransportListener method resumed() call. This can be dangerous as you are looping back into the Transport layer from the same thread which generally lead to issues as these events aren't really meant to be places where you send messages etc but more for an update point which can allow you to kick off a new thread or activity to deal with connection recovery.

Hanging in MessageProducer send can be triggered in the case of Producer flow control kicking in as well but I'm not convinced this is happening in your case but without further clarification of you question its hard to say for sure.

# javascript - 使用核心 Javascript 向左和向右填充

> ID：15875721
> 
> 赞同：3
> 
> 时间：2013-04-08T09:30:21.670
> 
> 标签：javascript, jquery

我正在尝试使用此代码使用javascript设置左右填充，但它不起作用

```
document.getElementsByClassName('className').style.paddingLeft = paddingOfUl.toString()+"px" ; 
```

收到此错误

*未捕获的类型错误：无法设置未定义的属性“paddingLeft”*

请帮助建议我在这里做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:31:07.150

`getElementsByClassName`返回一个元素*列表*，而不是一个元素。您需要对列表进行索引以修改其中的元素。

只是第一个：

```
document.getElementsByClassName('className')[0].style.paddingLeft = paddingOfUl.toString()+"px" ;
// Change here -----------------------------^^^ 
```

他们都是：

```
var list = document.getElementsByClassName('className');
var i;
var padding = paddingOfUl.toString()+"px";
for (i = 0; i < list.length; ++i) {
    list[i].style.paddingLeft = padding;
} 
```

另外：无需显式调用`toString`on `paddingOfUl`，如果您尝试将字符串附加到数字，它将自动完成。所以：

```
...paddingLeft = paddingOfUl + "px"; 
```

……没事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:32:07.997

您需要遍历元素：

```
var elements = document.getElementsByClassName('className');
for (var i = 0; i < elements.length; i++) {
    elements[i].style.paddingLeft = paddingOfUl.toString()+"px";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:32:38.763

`document.getElementsByClassName('className')`将返回一个元素数组。由于数组没有样式属性，您会收到错误。

The code should iterate over the elements returned by the array.

```
var elements = document.getElementsByClassName('className');

for(var i = 0; i < elements.length; i++){
   elements[i].style.paddingLeft = paddingOfUl.toString() + "px";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T09:32:55.987

```
var elements = document.getElementsByClassName('className');
// the above returns an Array-Like structure with a length property.

for (var i = 0, len = elements.length; i < len; i++) {
    elements[i].style.paddingLeft = "10px";
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T09:34:52.333

You can change style of any element using javascript as follow:

```
document.getElementById("nameofelement").style.paddingLeft="10px"; 
```

instead of **paddingLeft** you can also use **background="color"** or **color="grren"** etc..

# ios - Game Center 成就中的收藏

> ID：15875722
> 
> 赞同：0
> 
> 时间：2013-04-08T09:30:22.053
> 
> 标签：ios, game-center, achievements

是否可以在 Game Center 成就中实现“收藏”类的成就？

假设您设计了一款游戏，其中包含玩家拾取的大量宝石。宝石有十种不同的类型，有些宝石比其他宝石更稀有。只有当您拾取所有十种宝石中的至少一种时，“收藏家”成就才会 100% 完成/解锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:41:48.353

是的，这是可能的。您可以使用对象的[percentComplete](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKAchievement_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKAchievement/percentComplete)属性`GKAchievement`。将您的用户收集的项目存储在某处（即`NSUserDefaults`）并相应地报告百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:13:28.230

Game Center 成就没有这样的功能（在这一点上，谁知道未来）。

# java - Java 小程序在本地测试服务器上加载，但不在生产环境中

> ID：15875730
> 
> 赞同：0
> 
> 时间：2013-04-08T09:30:42.947
> 
> 标签：java, html, applet, jnlp

我有一个使用 httpd 在我的 Linux PC 上运行的 Java 小程序，它运行良好，但是当我将小程序移动到我们公司的服务器时，在我允许浏览器运行 Java 后没有任何反应。

索引.html：

```
<html>
    <head>
        <title>KIRK Handset Software Updater</title>
    </head>
    <body>
        <img alt="KIRK Handset Software Updater" src="KIRKHandsetSoftwareUpdater_banner.png">
        <br />
        <script src="http://www.java.com/js/deployJava.js"></script>

        <script> 
            var attributes = {
                codebase: 'http://xxxx.com/software/dect/JavaLoader',
                code: 'FlashLoader.class', archive: 'FlashLoader.jar',
                width: 500, height: 500, id: 'KIRK Handset Software Updater' }; 
            var parameters = { jnlp_href: 'jsflashloader-applet.jnlp' }; 
            deployJava.runApplet(attributes, parameters, '1.5'); 
        </script>

        <br />
    </body>
</html> 
```

在 Linux PC 上运行时的 Java 控制台输出：

```
Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.5+, heap=-1--1, args=null, href=null, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_17
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files (x86)\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.7 found at C:\Program Files (x86)\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: http://172.29.140.8/javaflashloader/jsflashloader-applet.jnlp
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.17 == 1.7.0.17
     Match: Running JVM args match: have:<>  satisfy want:<>
os: Windows 7, arch: x86
WARNING:  RXTX Version mismatch
    Jar version = RXTX-2.2pre1
    native lib Version = RXTX-2.2pre2
Worker thread started... 
```

Java 控制台在公司网站上运行时完全为空。

编辑：由于 jnlp 没有加载我没有包括它，但这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" 
      href="jsflashloader-applet.jnlp">
    <information>
        <title>KIRK Handset Software Updater</title>
        <homepage href="index.html"/>
        <description>Software Updater for KIRK 50-,60-,70- and Butterfly-Handset Series</description>
        <shortcut>
            <desktop/>
            <menu submenu="VARS"/>
        </shortcut>
    </information>
    <!-- update check="background" --> 
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se version="1.5+" />
        <jar href="FlashLoader.jar" main="true" />
        <jar href="RXTXcomm.jar" />
    </resources>
    <resources os="Mac OS X">
        <nativelib href="rxtx-native-macosx.jar" />
    </resources>
    <resources os="Linux">
        <nativelib href="rxtx-native-linux.jar"/>
    </resources>
    <resources os="Windows" arch="x86_64">
        <nativelib href="rxtx-native-windows64.jar"/>
    </resources>
    <resources os="Windows" arch="x86">
        <nativelib href="rxtx-native-windows32.jar"/>
    </resources>
    <resources os="Windows" arch="amd64">
        <nativelib href="rxtx-native-windows64.jar"/>
    </resources>
    <applet-desc name="KIRK Handset Software Updater Applet" main-class="FlashLoader" width="500" height="500"></applet-desc>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:38:27.257

jnlp 文件在 Web 服务器上没有探测器 MIME 类型...

# c++ - 用于 pthread 的 Makefile

> ID：15875742
> 
> 赞同：4
> 
> 时间：2013-04-08T09:31:33.083
> 
> 标签：c++, c, linux, makefile, pthreads

我正在尝试编译一个 pthread 示例，但出现以下错误：

```
make: *** No rule to make target `example.cpp', needed by `example.o'.  Stop. 
```

这是我的生成文件：

```
CC = g++
CCFLAGS = -Wall

example: example.o
        $(CC) $(CCFLAGS) -o example example.o -pthread

example.o: example.cpp
        $(CC) $(CCFLAGS) -c example.cpp -pthread

clean:
        - rm *.o
        - rm example 
```

我包括了 -pthread 标志，我不确定它还需要什么才能编译。有人有想法么？非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:06:33.373

正如它所说，当前目录中没有example.cpp。

在当前目录中执行 ls 并在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:37:24.200

检查[http://www.cse.iitd.ernet.in/~dheerajb/P](http://www.cse.iitd.ernet.in/~dheerajb/Pthreads/Document/Pthreads_Information.html) ​​threads/Document/ Pthreads_Information.html 它有一个 pthread makefile 的示例[http://www.cse.iitd.ernet.in/~dheerajb/P ​​threads /codes/C/Makefile.pthread](http://www.cse.iitd.ernet.in/~dheerajb/Pthreads/codes/C/Makefile.pthread)，你需要使用`-lpthread`

# objective-c - Robbiehanson 在 xmpp 框架中的内存泄漏

> ID：15875743
> 
> 赞同：5
> 
> 时间：2013-04-08T09:31:36.040
> 
> 标签：objective-c, c, xmppframework

我一直在为 mac 使用 Robbiehanson 的 xmpp 框架。在检查 mac 中的工具工具时，我观察到 XMPPParser.m 类中的泄漏（大约 64 个字节）随着时间的推移逐渐增加。泄漏的代码如下所示。

attrNs = xmlNewNs(NULL, NULL, nodePrefix); CHECK_FOR_NULL(attrNs);

请提供此问题的解决方案...

包含此代码的方法粘贴在下面以供参考：

```
static void xmpp_xmlStartElement(void *ctx, const xmlChar *nodeName,
const xmlChar *nodePrefix,
const xmlChar *nodeUri,
int nb_namespaces,
const xmlChar **namespaces,
int nb_attributes,
int nb_defaulted,
const xmlChar **attributes)
{

NSLog(@"IN xmppStartElement");
int i, j;
xmlNsPtr lastAddedNs = NULL;

xmlParserCtxt *ctxt = (xmlParserCtxt *)ctx;

// We store the parent node in the context's node pointer.
// We keep this updated by "pushing" the node in the startElement method,
// and "popping" the node in the endElement method.
xmlNodePtr parent = ctxt->node;

// Create the node
xmlNodePtr newNode = xmlNewDocNode(ctxt->myDoc, NULL, nodeName, NULL);
CHECK_FOR_NULL(newNode);

// Add the node to the tree
if(parent == NULL)
{
    // Root node
    xmlAddChild((xmlNodePtr)ctxt->myDoc, newNode);
}
else
{
    xmlAddChild(parent, newNode);
}

// Process the namespaces
for (i = 0, j = 0; j < nb_namespaces; j++)
{
    // Extract namespace prefix and uri
    const xmlChar *nsPrefix = namespaces[i++];
    const xmlChar *nsUri    = namespaces[i++];

    // Create the namespace
    xmlNsPtr newNs = xmlNewNs(NULL, nsUri, nsPrefix);
    CHECK_FOR_NULL(newNs);

    // Add namespace to node.
    // Each node has a linked list of nodes (in the nsDef variable).
    // The linked list is forward only.
    // In other words, each ns has a next, but not a prev pointer.

    if (newNode->nsDef == NULL)
    {
        newNode->nsDef = lastAddedNs = newNs;
    }
    else
    {
        lastAddedNs->next = newNs;
        lastAddedNs = newNs;
    }

    // Is this the namespace for the node?

    if (nodeUri && (nodePrefix == nsPrefix))
    {
        // Ex 1: node == <stream:stream xmlns:stream="url"> && newNs == stream:url
        // Ex 2: node == <starttls xmlns="url">             && newNs == null:url

        newNode->ns = newNs;
    }
}

// Search for the node's namespace if it wasn't already found
if ((nodeUri) && (newNode->ns == NULL))
{
    newNode->ns = xmpp_xmlSearchNs(ctxt->myDoc, newNode, nodePrefix);

    if (newNode->ns == NULL)
    {
        // We use href==NULL in the case of an element creation where the namespace was not defined.
        //
        // We do NOT use xmlNewNs(newNode, nodeUri, nodePrefix) because that method doesn't properly add
        // the namespace to BOTH nsDef and ns.

        xmlNsPtr newNs = xmlNewNs(NULL, nodeUri, nodePrefix);
        CHECK_FOR_NULL(newNs);

        if (newNode->nsDef == NULL)
        {
            newNode->nsDef = lastAddedNs = newNs;
        }
        else
        {
            lastAddedNs->next = newNs;
            lastAddedNs = newNs;
        }

        newNode->ns = newNs;
    }
}

// Process all the attributes
for (i = 0, j = 0; j < nb_attributes; j++)
{
    const xmlChar *attrName   = attributes[i++];
    const xmlChar *attrPrefix = attributes[i++];
    const xmlChar *attrUri    = attributes[i++];
    const xmlChar *valueBegin = attributes[i++];
    const xmlChar *valueEnd   = attributes[i++];

    // The attribute value might contain character references which need to be decoded.
    //
    // "Franks &#38; Beans" -> "Franks & Beans"

    xmlChar *value = xmlStringLenDecodeEntities(ctxt,                    // the parser context
                                                valueBegin,              // the input string
                                          (int)(valueEnd - valueBegin),  // the input string length
                                               (XML_SUBSTITUTE_REF),     // what to substitue
                                                0, 0, 0);                // end markers, 0 if none
    CHECK_FOR_NULL(value);

    if ((attrPrefix == NULL) && (attrUri == NULL))
    {
        // Normal attribute - no associated namespace
        xmlAttrPtr newAttr = xmlNewProp(newNode, attrName, value);
        CHECK_FOR_NULL(newAttr);
    }
    else
    {
        // Find the namespace for the attribute
        xmlNsPtr attrNs = xmpp_xmlSearchNs(ctxt->myDoc, newNode, attrPrefix);

        if (attrNs != NULL)
        {
            xmlAttrPtr newAttr = xmlNewNsProp(newNode, attrNs, attrName, value);
            CHECK_FOR_NULL(newAttr);
        }
        else
        {
            **attrNs = xmlNewNs(NULL, NULL, nodePrefix);
            CHECK_FOR_NULL(attrNs);**

            xmlAttrPtr newAttr = xmlNewNsProp(newNode, attrNs, attrName, value);
            CHECK_FOR_NULL(newAttr);

        }
    }

    xmlFree(value);

}

// Update our parent node pointer
ctxt->node = newNode;

// Invoke delegate methods if needed
xmpp_postStartElement(ctxt);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:17:55.933

尝试`xmlFreeNs(attrNs);` 在最后一个`CHECK_FOR_NULL(newAttr);`.

# php - 用 PHPExcel 计算总和

> ID：15875744
> 
> 赞同：7
> 
> 时间：2013-04-08T09:31:42.863
> 
> 标签：php, sum, phpexcel

我是 PHPExcel 新手，需要您的帮助 - 在计算总和时，我遇到了 PHPExcel 中的 setCellValue 问题。它总是给我0。

这是我的代码：

```
$objPHPExcel = PHPExcel_IOFactory::load("test.xls");

$row = 5; 
$S = $objPHPExcel->getActiveSheet();
while($row_data = mysql_fetch_array($result)){

$S->setCellValueExplicit('B'.$row, $row_data['cn']);
$S->setCellValueExplicit('C'.$row, $row_data['ld']);
$S->setCellValueExplicit('D'.$row, $row_data['cust_notify']);
$S->setCellValueExplicit('E'.$row, $row_data['code']);
$S->setCellValueExplicit('F'.$row, $row_data['company_name']);
$S->setCellValueExplicit('G'.$row, $row_data['rs']);
$S->setCellValueExplicit('H'.$row, $row_data['status']);
$S->setCellValueExplicit('I'.$row, $row_data['sueend']);
$S->setCellValueExplicit('J'.$row, $row_data['vclaimed']);
$S->setCellValueExplicit('K'.$row, $row_data['ref']);
$S->setCellValueExplicit('M'.$row, $row_data['out']);

$row++;

$S->setCellValue("I$row", "Total");
$S->setCellValue("J$row", "=SUM(J5:J".($row-1).")");

} 
```

我得到的结果总是“0”。打印屏幕下方 ![结果超越](https://i.stack.imgur.com/taTeL.png)

如果有人可以帮助我解决这个问题，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-14T15:40:32.123

尝试这个

```
$writer = PHPExcel_IOFactory::createWriter($excel, 'Excel2007');
$writer->setPreCalculateFormulas(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:41:23.597

Oups 我想我在代码中发现了我的错误。我已经改变了 `$S->setCellValueExplicit('J'.$row, $row_data['vclaimed']);`

至 `$S->setCellValue('J'.$row, $row_data['vclaimed']);`

现在它可以工作了。

# android - 在 ListView 中的 imageView 中的 onClick

> ID：15875745
> 
> 赞同：0
> 
> 时间：2013-04-08T09:31:47.153
> 
> 标签：android, events

我需要`onClick()`在`ListView`. 此箭头移动到另一个屏幕（另一个活动）。

我已阅读有关 的信息`setOnItemClickListener()`，但我不能使用它，因为我需要`onClick()`箭头中的事件`ImageView`，而不是一般项目中的事件。

我也读过在我的自定义中定义一个`OnClickListener`，`ImageView`但`BaseAdapter`问题是我使用的功能`Activity`，我不能在中使用`BaseAdapter`（因为不存在，显然）

```
right.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(ByLocationList.this, Summary.class);
            startActivity(i);               

        }
    }); 
```

我有错误，因为课堂上没有`startActivity()`。`BaseAdapter`如何启动摘要活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:38:24.067

> 我收到错误，因为 BaseAdapter 类中没有 startActivity()。如何启动摘要活动？

=>将当前活动的**上下文**作为参数传递给 BaseAdapter 类的构造函数。

例如：

```
private Context context;
public MyBaseAdapter(Context context, ArrayList<JSONObject> data) {
        super(context, R.layout.row_listView, data);

        this.context = context;
        ........
        ........
    } 
```

然后使用以下命令开始活动：

```
Intent i = new Intent(context, Summary.class);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:39:05.683

```
Intent i = new Intent(ActivityClassName.this, Summary.class); // not the name of your adapter
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:41:46.133

public void sum (View v) { Intent intent = new Intent(getApplicationContext(), Summary.class); 开始活动（意图）；}

把 android:onClick="sum" 放在你的图片上

# c++ - 从arm程序集中调用c函数时堆的地址发生了偏移？

> ID：15875747
> 
> 赞同：1
> 
> 时间：2013-04-08T09:31:52.857
> 
> 标签：c++, assembly, arm

这是我的代码：

```
test.cpp

class Message
{
public:
    long long msgid;
    char* msgStr;
};

int foo(Message* msg)
{
    // TODO
    // print: msg->msgid, msg->msgStr
}

int main()
{
     char buf[20] = "Hello";
     Message msg = new Message;
     msg->msgid = 0x10;
     msg->msgStr = buf;

     foo(msg);

     call_from_arm((void*)&foo, (void*)msg);

     foo(msg);

     return 0;
}

test.S

call_from_arm:
@r0 = ptrFunc
@r1 = obj
STMFD   r13!, {r4-r11,r14}

MOV r8, r0              @r8 = ptrFunc
MOV r0, r1              @r0 = r1
BLX r8              @call ptrFunc

LDMFD   r13!, {r4-r11,pc} 
```

应用运行时，发现call_from_arm传给foo的参数是正确的（msg的地址），但是Message实例包含错误的值，好像堆上的内容有偏移。

此应用程序的输出如下所示：

```
msgid : 10, msgStr : Hello
msgid : (wrong value), msgStr : (wrong value, app may crash here)
msgid : 10, msgStr : Hello 
```

这个问题困扰了我好几天。请帮我。谢谢

如果我将类 Message 更改为

```
class Message
{
    char* msgStr;
} 
```

我可以打印字符串“Hello”的正确值，所以我认为问题可能是字节对齐。`long long`是关键点。但我仍然不知道为什么。

* * *

```
I have solved this problem. AAPCS requires 8 bytes-align. 
My old version code store r4-r11 & lr into stack, whitch is not 8 bytes-aligned. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:23:02.950

请更改您`call_from_arm`的如下，

```
 call_from_arm:
 @r0 = ptrFunc
 @r1 = obj

 MOV r2, r0              @r2 = ptrFunc
 MOV r0, r1              @r0 = r1
 BX  r2                  @call ptrFunc 
```

我怀疑你搞砸了`stack`。该函数`int foo(Message* msg)`应保存所有非易失性寄存器。`r4-r11`因此，如果我们不使用它们，则无需保存。此外，`lr`已经设置了返回，因此您可以直接使用尾*函数*优化。`jump``ptrFunc`

另请注意，您可以通过使用[函数指针](http://www.cprogramming.com/tutorial/function-pointers.html)`C++`来改进接口。`call_from_arm`

```
 extern int call_from_arm(int (*ptrFunc)(Message* msg), Message* msg);
 /* ... */
 call_from_arm(foo, msg); /* no casting is better! */ 
```

正如其他人所说，更多信息将有助于诊断问题。根据目前的信息，我们只能猜测，就像我所做的那样。

# sql - UDF 异常行为

> ID：15875749
> 
> 赞同：1
> 
> 时间：2013-04-08T09:31:53.903
> 
> 标签：sql, ado.net, toad

我正在通过代码和 toad 访问 UDF。它总是通过 toad 抛出错误，但在代码中显示随机行为（有时它工作有时它不工作）。

```
SELECT ADD_DEFAULT_MEASURES(:pModule, :pSummarySourceTypeId) FROM DUAL 
```

步骤（在代码中）：

1.  模块 = 'aut' 和摘要源 = 244 - 抛出错误（ORA-06519：检测到主动自主事务并回滚）
2.  将汇总源更改为 56。
3.  模块 = 'aut' 和摘要源 = 56 - 有效
4.  将摘要源更改回 244。
5.  模块 = 'aut' 和摘要源 = 244 - 有效

通过蟾蜍

1.module = 'aut' 和摘要源 = 56 - 有效

2.module = 'aut' 和摘要源 = 244 - 抛出错误（ORA-06519：检测到主动自主事务并回滚）

为什么通过代码执行时显示随机行为？

# android - AsyncTask 无法从外部站点下载文件

> ID：15875752
> 
> 赞同：0
> 
> 时间：2013-04-08T09:32:06.423
> 
> 标签：android, android-asynctask

我正在开发我的第一个 Android 应用程序，但我似乎无法使其正常工作。此应用程序应在单击时从站点（在本例中为我的个人站点）下载文件（具体而言是 pdf）并将其保存在 SDCard 上。我环顾四周，发现我应该为此使用 AsyncTask ，这是我想出的代码：

```
package it.uniroma3.tirocinioandroid;

import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {

    private Button dlbutton;
    private ProgressDialog mProgressDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        dlbutton = (Button) findViewById(R.id.dlbutton);
        dlbutton.setOnClickListener(this);
        mProgressDialog = new ProgressDialog(MainActivity.this);
        mProgressDialog.setMessage("Currently downloading...");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        Log.i("Main", "finito onCreate");

    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //TODO sistemare il menù
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        switch (v.getId())
        {
        case R.id.dlbutton:
            DownloadFile downloadFile = new DownloadFile();
            downloadFile.execute("http://dragon-nest.net/catalogo.pdf");
            Log.i("Main", "finito onClik");
            break;
        }

    }

    private class DownloadFile extends AsyncTask<String, Integer, String> {
        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                Log.i("Main", "connected");
                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                Log.i("Main", "input set");
                OutputStream output = new FileOutputStream(Environment.getDataDirectory().getAbsolutePath().concat("download/catalogo.pdf"));
                Log.i("Main", "output set");

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            }catch(Exception e){
                    Log.e("ERROR_TAG", e.getMessage());
                    return "fine";
                }
            String s ="fine";
            Log.i("Main", "end download");
            return s;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mProgressDialog.show();
            Log.i("Main", "end preExecute");
        }

        @Override
        protected void onPostExecute(String s) {
            super.onPostExecute(s);
            mProgressDialog.dismiss();
            Log.i("Main", "end postExecute");
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
            super.onProgressUpdate(progress);
            mProgressDialog.setProgress(progress[0]);
            Log.i("Main", "update...");
        }

    }
} 
```

但是，它似乎无法连接到该站点以开始下载。从 Logcat 可以看出，当它尝试连接时会生成一个异常，该异常被捕获并在下载真正开始之前阻止所有内容。

这也是应用程序的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.uniroma3.tirocinioandroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <user-permission android:name="android.permission.INTERNET" />
    <user-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="it.uniroma3.tirocinioandroid.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="it.uniroma3.tirocinioandroid.FileDownloader"
            android:label="@string/title_activity_file_downloader" >
        </activity>
    </application>

</manifest> 
```

顺便说一句，我试着看看是不是我的网站表现得很时髦，但我可以从浏览器下载文件就好了。我也尝试过使用另一个站点的另一个文件，但我遇到了同样的问题。这发生在我的 AVD 和我的平板电脑上，所以我认为这不是与 AVD 相关的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:48:39.113

试试..这个

而不是 catch 语句

```
catch(Exception e){
                Log.e("ERROR_TAG", e.getMessage());
                return "fine";
            } 
```

捕获特定异常，例如 IOEXCEPTION 或任何其他异常，因为

```
catch(Exception e) 
```

声明异步任务捕获所有已发生的异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:37:25.087

您的清单中有错误。没有这样的标签`<user-permission>`，将其更改为`<uses-permission>`。

如果这无助于更改您`connection`的声明`HttpURLConnection`并像这样使用它：

```
HttpURLConnection connection = (HttpURLConnection) url.openConnection(); 
```

我不认为它真的很重要，但是我以这种方式使用它并且它每次都有效（根据声明的协议方案，可能需要转换为 HttpsURLConnection）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:37:42.780

这段代码对我有用！

```
 protected class myClass extends AsyncTask{
  @Override
protected Object doInBackground(Object... arg0) {
    // TODO Auto-generated method stub  
    try{

        File cacheDir = new  File(android.os.Environment.getExternalStorageDirectory(),"FolderName");
        if(!cacheDir.exists())
           cacheDir.mkdirs();
        File f=new File(cacheDir,"q.mp3");
         text1.setText("file");
        URL url = new URL("your link"); 
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(f);

                    byte data[] = new byte[1024];
                    long total = 0;
                    int count=0;
                                while ((count = input.read()) != -1) {
                        total++;
                       Log.e("while","A"+total);

                        output.write(data, 0, count);
                    }

                    output.flush();
                    output.close();
                    input.close();

        }

    catch (Exception e) { 
                  e.printStackTrace();}

    return null;
} 
```

}

# llvm - llvm 中没有生成基本块终止符

> ID：15875759
> 
> 赞同：6
> 
> 时间：2013-04-08T09:32:14.640
> 
> 标签：llvm, llvm-ir

我对 llvm 很陌生，只在这里做了在线教程：http: [//llvm.org/docs/tutorial/LangImpl1.html](http://llvm.org/docs/tutorial/LangImpl1.html) 现在我想做我自己的小语言并遇到了一个小问题。我想解析这个：

```
(def i 1) 
```

它应该做两件事：

1.  定义一个返回 1 的新函数
2.  返回一个值，以便它可以用作表达式

该函数已正确创建，但我在将其用作表达式时遇到了问题。AST 看起来像这样：

```
FunctionAST // the whole statement
  - Prototype // is an nameless statement
  - Body // contains the definition expression
    - DefExprAST
      - Body // contains the Function definition
        - FunctionAST
          - Prototype // named i
          - Body // the value 1 
```

该函数的代码创建代码如下所示：

```
Function *FunctionAST::Codegen() {
  NamedValues.clear();

  Function *TheFunction = Proto->Codegen();
  if ( TheFunction == 0 ) return 0;

  BasicBlock *BB = BasicBlock::Create( getGlobalContext(), "entry", TheFunction );
  Builder.SetInsertPoint( BB );

  if ( Value *RetVal = Body->Codegen() ) {
    Builder.CreateRet( RetVal );

    verifyFunction( *TheFunction );

    return TheFunction;
  }
  return 0;
} 
```

DefExprAST 像这样：

```
Value *DefExprAST::Codegen() {
  if ( Body->Codegen() == 0 ) return 0;

  return ConstantFP::get( getGlobalContext(), APFloat( 0.0 ) );
} 
```

给出以下`verifyFunction`错误：

```
Basic Block in function '' does not have terminator!
label %entry
LLVM ERROR: Broken module, no Basic Block terminator! 
```

事实上，生成的函数没有 ret 条目。它是空的：

```
define double @0() {
entry:
} 
```

But `RetVal` is correctly filled with an double and `Builder.CreateRet( RetVal )` gives back the ret statement but it doesn't get inserted into the entry.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T10:38:51.257

Sometimes formulating an question and taking a little break helps to solve problems very well. I changed the `DefExprAST::Codegen` to remember the Parent block and set it as the insertion point for the return value.

```
Value *DefExprAST::Codegen() {
  BasicBlock *Parent = Builder.GetInsertBlock();
  if ( Body->Codegen() == 0 ) return 0;

  Builder.SetInsertPoint( Parent );

  return ConstantFP::get( getGlobalContext(), APFloat( 0.0 ) );
} 
```

# android - 如何在其布局 .xml 类中使用 .java 类中的方法？

> ID：15875760
> 
> 赞同：1
> 
> 时间：2013-04-08T09:32:19.253
> 
> 标签：android

尝试放置多个导致模拟器崩溃的图像时遇到问题。一种解决方案是您将图像放在 Assets 文件夹而不是 Drawable 文件夹中，但我不知道如何获得此方法的返回并将其作为 ImageView 的 src 图像

```
public static Drawable getAssetImage(Context context, String filename) throws IOException {
AssetManager assets = context.getResources().getAssets();
InputStream buffer = new BufferedInputStream((assets.open("drawable/" + filename + ".png")));
Bitmap bitmap = BitmapFactory.decodeStream(buffer);
return new BitmapDrawable(bitmap);
} 
```

# html - 我如何在两个 div 之间创建正确的渐变

> ID：15875769
> 
> 赞同：1
> 
> 时间：2013-04-08T09:32:50.530
> 
> 标签：html, css

我有两个块 [http://imageshack.us/a/img203/9351/555el.png](http://imageshack.us/a/img203/9351/555el.png)

我如何像这样在这些块之间创建梯度 [http://imageshack.us/a/img521/1866/8585.png](http://imageshack.us/a/img521/1866/8585.png)

这是我的 css 和 html 代码

```
<style type="text/css">
  div.fx6p1 {
  width: 580px;
  height: 721px;
  background: #EDEDED;
  margin: 40px 0 0 40px; 
  padding: 9px;
  }
div.fx6Ra {
    width: 200px;
    background: #333333;
    height: 560px;
    margin: 170px 0 0 589px;
}
</style>
<div class="fx6p1">
  <div class="fx6Ra">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:41:57.640

您可以使用 CSS 阴影。

看[这里](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:42:03.583

只需使用[box-shadow](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)：

```
div.fx6Ra {
    width: 200px;
    background: #333333;
    height: 560px;
    margin: 170px 0 0 589px;
    box-shadow: -8px 0px 8px 1px #888;
} 
```

`box-shadow`具有以下值：

```
box-shadow: x y blur spread color; 
```

`**[Working Demo](http://jsfiddle.net/3shPF/)**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:44:59.913

CSS3 "box-shadow" 样式属性将有助于满足您的要求。box-shadow 属性的语法是

```
box-shadow: h-shadow v-shadow blur spread color inset; 
```

请检查[教程](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)。[并使用box-shadow 样式生成器](http://css3gen.com/box-shadow/)尝试在线样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:50:33.703

请尝试此代码。它在 Firefox 和 Chrome 中运行，我检查了它。

```
<style type="text/css">
  div.fx6p1 {
  width: 580px;
  height: 721px;
  background: #EDEDED;
  margin: 40px 0 0 40px; 
  padding: 9px;
  }
div.fx6Ra {
    width: 200px;
    background: #333333;
    height: 560px;
    margin: 170px 0 0 589px;
    box-shadow: -10px 0 4px 0 #888888;
}
</style>
<div class="fx6p1">
  <div class="fx6Ra">
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:54:47.583

根据您在示例中提到的亮点（[http://imageshack.us/a/img521/1866/8585.png](http://imageshack.us/a/img521/1866/8585.png)），我假设您实际上是在谈论投影。

**要实现看起来与图像上完全相同的阴影，它只出现在 box 的左侧**，一种方法是包含一个额外的 div。

**HTML：**

```
<div class="fx6p1">
    <div class="fx6Ra">
        <div class="dropshadow-leftonly"></div>
    </div>
</div> 
```

**CSS：**

```
div.fx6p1 {
    width: 580px;
    height: 721px;
    background: #EDEDED;
    margin: 40px 0 0 40px;
    padding: 9px;
}
div.fx6Ra {
    position: relative;
    margin: 170px 0 0 579px;
    overflow: hidden;
    display: block;
    width: 210px;
    height: 560px;
}
.dropshadow-leftonly {
    display: block;
    width: 200px;
    height: 560px;
    background: #333333;
    box-shadow: 0px 0px 5px 5px #ababab;
    float: right;
} 
```

**这是一个工作示例：http:** [//jsfiddle.net/shodaburp/A4c4p/](http://jsfiddle.net/shodaburp/A4c4p/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T09:55:53.073

简单但不完美的方法：[`box-shadow`](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)

[http://jsfiddle.net/yA3CX/](http://jsfiddle.net/yA3CX/)

```
div.fx6Ra {
    box-shadow:-10px 0px 25px #404040;
} 
```

艰难的方式：[`::before`](https://developer.mozilla.org/en-US/docs/CSS/%3a%3abefore)和[`line-gradient`](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

~~[http://jsfiddle.net/yA3CX/2/](http://jsfiddle.net/yA3CX/2/)~~

 ~~```
div.fx6Ra:before,
div.fx6Ra::before {
    content:' ';
    display:inline-block;
    position:absolute;
    top:219px;
    left:633px;
    height:560px;
    width:15px;
    background-image:-webkit-linear-gradient(right,black,transparent);
    background-image:-moz-linear-gradient(to left,black,transparent);
    background-image:-ms-linear-gradient(to left,black,transparent);
    background-image:-o-linear-gradient(to left,black,transparent);
    background-image:linear-gradient(to left,black,transparent);
} 
```~~ 

~~或者~~

[http://jsfiddle.net/yA3CX/3/](http://jsfiddle.net/yA3CX/3/)

```
div.fx6Ra:before,
div.fx6Ra::before {
    content:' ';
    display:inline-block;
    position:relative;
    top:0px;
    left:-15px;
    height:560px;
    width:15px;
    background-image:-webkit-linear-gradient(right,black,transparent);
    background-image:-moz-linear-gradient(to left,black,transparent);
    background-image:-ms-linear-gradient(to left,black,transparent);
    background-image:-o-linear-gradient(to left,black,transparent);
    background-image:linear-gradient(to left,black,transparent);
} 
```

# wcf - 解决出站消息和 API 更新之间的 Salesforce 循环依赖性

> ID：15875771
> 
> 赞同：1
> 
> 时间：2013-04-08T09:32:56.577
> 
> 标签：wcf, soap, salesforce, soap-client

我已经设置了一个 Salesforce 开发帐户，每次创建或更新记录（机会）时都会向 WCF 服务发送出站消息。

此 WCF 服务是出站消息的端点 URL，处理通知，然后还回调 Salesforce 帐户以使用标准 Salesforce API 进行更新（我为此使用 SOQL）

在 WCF 服务接收和处理出站消息之前，这一切都运行良好，但随后问题就开始了。

当我从 WCF 服务中回调 Salesforce API 以更新记录时，出站消息再次被触发，开始另一个出站消息。

我的要求是仅在手动执行对 Salesforce 中记录的插入/更新而不是通过 API 执行时发送出站消息。

是否有 Salesforce 提供的现成解决方案，或者我需要自己处理。

我相信必须有更好，更优雅的方式来做到这一点？

有什么建议么？

谢谢，-苏米特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:21:07.313

您可以为进行 API 调用的用户帐户创建自定义配置文件，在此配置文件上，您可以取消选中“管理权限”部分中的“发送出站消息”权限。这将停止您看到的通知循环。

# android - 如何以编程方式将 RelativeLayout.ALIGN_RIGHT 设置为 FALSE？

> ID：15875772
> 
> 赞同：2
> 
> 时间：2013-04-08T09:32:56.847
> 
> 标签：android, android-layout

如何以务实的方式将布局属性更改`android:layout_alignParentRight="true"`为`android:layout_alignParentRight="false"`. 我知道如何`true`从代码中做到这一点，使用这个：

```
LayoutParams params = (RelativeLayout.LayoutParams)btn.getLayoutParams();
params.addRule(RelativeLayout.ALIGN_RIGHT, RelativeLayout.TRUE);
btn.setLayoutParams(params); 
```

我怎样才能`false`在某些条件下从java代码中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-11T07:55:42.383

试试这个。

`params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT,0)`

这会将 false 设置为属性 alignParrentRight = false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:41:41.320

像这样加就行了 不用加 False 或 true 就这样试试

```
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); 
```

# java - 如何在文本中找到复合词的出现

> ID：15875773
> 
> 赞同：1
> 
> 时间：2013-04-08T09:33:01.957
> 
> 标签：java, string

我正在尝试查找文本中特定单词或复合词的出现。

例如，文本是“祝你生日快乐”，而我必须匹配的短语是“生日快乐”。

我有一个需要与输入文本匹配的单词/短语字典。这本词典由大约3000个单词/复合词组成。需要分析的文本数量可能会有所不同。现在我正在使用正则表达式。*\b+短语+\b。*. 这给了我正确的答案，但速度很慢。

此外，可能在文本中找到的单词前面或后面有特殊字符，如!,:,。等等

尽管 text.contains() 很快，但我不能使用它，因为即使对于单词的子集它也会返回 true。有什么办法可以让我更快地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:16:58.860

您可以将字符串拆分为单词数组并使用[Knuth-Morris-Pratt 算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)，但不是比较字符串中的字符，而是比较数组中的单词。

例如，字符串：

```
i bought a hat in manhattan 
```

将其拆分为数组：

```
S = {"i","bought","a","hat","in","manhattan"} 
```

如果您正在查找单个单词，只需将您正在查找的单词与此数组中的每个单词进行比较。

如果您正在寻找一系列单词，例如：

```
W = {"a","hat","in"} 
```

使用 KMP。明确地，参考维基百科定义的算法，如上所述设置 S 和 W，当算法状态为 时`if W[i] = S[m + i]`，您可以通过以下方式在 java 中实现：

```
if(W[i].equals(S[m+i])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:07:02.223

试试这个： (" " + test + " ").contains(" " + 短语 + " ");

这应该包括三个条件——

当测试字符串以短语开头或以短语结尾时，我们的包含仍然会找到该字符串。当短语在中间时，它会找到短语。当短语包含空格时，我们仍然可以...

想不出其他情况了...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:10:40.923

我使用了很多`indexOf()`和的`substring()`方法`java.lang.String`，这可能会降低代码的*性能*，但下面的代码可以作为迈向这种方法的第一步。

```
public class MultiWordCompare {

    private static boolean containsWord(String word, String search) {
        if(word.indexOf(search) >= 0) { // Try if the word first exists at all
            try {
                String w = word.substring(word.indexOf(search), word.indexOf(search)+search.length()+1); //+1 to capture possible space
                if(w.lastIndexOf(" ") == w.length()-1) { //if the last char is space, then we captured the whole word
                    w = w.substring(0, w.length()-1); //remove space
                    return w.equals(search); //do string compare
                }
            }
            catch(Exception e) {
                //catching IndexOutofBoundException
            }
        }
        return false;
    }

    public static void main(String [] args) {
        System.out.println(containsWord("New York is great!", "New York"));
        System.out.println(containsWord("Many many happy Returns for the day", "happy Returns"));
        System.out.println(containsWord("New Authority", "New Author"));
        System.out.println(containsWord("New York City is great!", "N Y C"));
    }

} 
```

这是输出

```
true
true
false
false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T06:32:26.543

```
 String text    =
                "This is the text to be searched " +
                 "for occurrences of the http:// pattern.";

     String patternString = "This is the";

     Pattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE);
     Matcher matcher = pattern.matcher(text);

     System.out.println("lookingAt = " + matcher.lookingAt());
     System.out.println("matches   = " + matcher.matches()); 
```

来自以下网址。有关更多详细信息，请检查以下网址一次。

[匹配器](http://tutorials.jenkov.com/java-regex/matcher.html)

# c++ - 为什么默认不包含更常见的#include 指令？

> ID：15875782
> 
> 赞同：1
> 
> 时间：2013-04-08T09:33:31.190
> 
> 标签：c++, include

我特别想`<iostream>`这里。既然它是大多数 C++ 程序都使用的通用库，为什么不默认包含它？其他示例是`<string>`和。`<fstream>``<cstdlib>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:40:29.450

常见的 C++ 习语：

> 您只需为使用的内容付费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:44:16.890

那是因为没有“很多时候”使用的通用标题。

例如`<iostream>`，仅在通过流/控制台执行大量 I/O 的应用程序中使用，并且仅当这些应用程序不使用其他库来完成任务时（想到 ncurses 用于控制台）。在这些应用程序中，它仅用于实际*执行*I/O 的模块，而不用于其他模块，例如执行逻辑、计算、数据库持久性等。

相同的推理模式适用于任何其他“经常使用”的标题。但是，如果在您的项目中有很多地方使用的头文件，您可能想要查找预编译的头文件。但是您可能还希望使您的应用程序模块化，而*不是*在每个地方都使用 API 标头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T09:48:43.210

具有讽刺意味的是，您选择`<iostream>`了一个例子：

C++ 标准库第二版，第 752 页

> `<iostream>`仅当要使用标准流对象时才应包含标头。对于某些实现，一些代码在启动时为包括此标头的每个翻译单元执行。正在执行的代码并不昂贵，但它需要加载可执行文件的相应页面，这可能很昂贵。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T09:46:40.743

由于性能/可执行文件大小，这些东西不包括在内。通过为您提供您可能需要的最低限度的东西，您的可执行文件将具有可能的最小大小，并且您将不会链接到您根本不使用的库。

在某些情况下，包含您不使用的库可能会增加程序的加载时间。（这在很大程度上取决于您的系统加载策略！）。就程序加载后的性能而言，应该不会有太大差异（如果有的话！）。

# python - Python代码在提示中工作，而不是在脚本中工作

> ID：15875785
> 
> 赞同：1
> 
> 时间：2013-04-08T09:33:32.767
> 
> 标签：python, command-line, pyqt

在使用 python 几年之后，这是第一次在 python 提示符下逐行尝试一些代码，与在脚本文件中运行它的结果不同。

代码很简单：

```
import os, sys
from PyQt4 import QtGui, QtCore, uic

app = QtGui.QApplication(sys.argv)
splash=QtGui.QSplashScreen(QtGui.QPixmap("/home/pippo/splashscreen.jpg"))
splash.show()
print "hello!"

time.sleep(10) 
```

如果我在splash.show（）行之后的python提示符（版本2.7.3）中逐行输入行，我可以看到屏幕上显示的图像，如果我改为在脚本中运行它，则图像不会显示，而我可以看到飞溅后的打印正确地在终端上。

谁能帮我理解这两种不同行为的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:52:30.717

从[文档](http://pyqt.sourceforge.net/Docs/PyQt4/python_shell.html)中：

> PyQt4 安装了一个输入钩子（使用 PyOS_InputHook），它在交互式解释器等待用户输入时处理事件。这意味着您可以，例如，从 Python shell 提示符创建小部件，与它们交互，并且仍然能够输入其他 Python 命令。

至于您的脚本，您必须调用 app.exec_() 才能启动 Qt 事件循环（并显示启动画面）。在 C++ Qt 程序中也会发生同样的情况，如果没有事件循环，您将无法获得任何 GUI。

# r - 使用闪亮动态地将绘图添加到网页

> ID：15875786
> 
> 赞同：32
> 
> 时间：2013-04-08T09:33:40.600
> 
> 标签：r, rstudio, shiny

我想创建一个使用闪亮的应用程序，它可以动态地将绘图添加到页面。可能是 10 个地块，也可能只有一个地块。我在闪亮的主页中使用[本教程](http://rstudio.github.io/shiny/tutorial/#dynamic-ui)来获取动态 UI。

这是一个简化的例子。该函数`showme`正在绘制图形

# 服务器.r

```
shinyServer(function(input, output) {
  # Create an environment for storing data
  symbol_env <- new.env()
  # Make a chart for a symbol, with the settings from the inputs
  make_chart <- function(symbol) {
    showme(symbol)
  }

  display <- c("1083484" , "1101732")

  output$MyList <- renderUi({ 
    for (i in i:nrow(display))
       renderPlot({make_chart(display[i])})
    })
}) 
```

# 用户界面

```
shinyUI(pageWithSidebar(
  headerPanel("My Plots !"),
  sidebarPanel(
    wellPanel(
      p(strong("Scan1"))))
 ,mainPanel(
      uiOutput("MyList")
))) 
```

我收到以下错误

```
Listening on port 8100
Error in .subset2(x, "impl")$defineOutput(name, value, deparse(substitute(value))) : 
  Unexpected character output for display 
```

如果这不是方式 - 我将不胜感激任何指导。谢谢。

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: i386-w64-mingw32/i386 (32-bit) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-25T03:49:06.000

也许这个来自 Winston Chang 的例子是有帮助的：

[具有动态绘图数量的闪亮示例应用程序](https://gist.github.com/wch/5436415/)

以下是链接旋转的完整示例：

**服务器.R**

```
max_plots <- 5

shinyServer(function(input, output) {

# Insert the right number of plot output objects into the web page
output$plots <- renderUI({
  plot_output_list <- lapply(1:input$n, function(i) {
     plotname <- paste("plot", i, sep="")
     plotOutput(plotname, height = 280, width = 250)
   })

   # Convert the list to a tagList - this is necessary for the list of items
   # to display properly.
   do.call(tagList, plot_output_list)
})

# Call renderPlot for each one. Plots are only actually generated when they
# are visible on the web page.
for (i in 1:max_plots) {
    # Need local so that each item gets its own number. Without it, the value
    # of i in the renderPlot() will be the same across all instances, because
    # of when the expression is evaluated.
    local({
        my_i <- i
        plotname <- paste("plot", my_i, sep="")

        output[[plotname]] <- renderPlot({
        plot(1:my_i, 1:my_i, xlim = c(1, max_plots), ylim = c(1, max_plots), main = paste("1:", my_i, ".  n is ", input$n, sep = ""))
        })
    })
}
}) 
```

**用户界面**

```
shinyUI(pageWithSidebar(

  headerPanel("Dynamic number of plots"),

    sidebarPanel(
      sliderInput("n", "Number of plots", value=1, min=1, max=5)
    ),

    mainPanel(
      uiOutput("plots") # This is the dynamic UI for the plots
    )
)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-31T18:15:41.240

要回答上面评论中关于如何动态返回对象列表（例如，绘图、表格和文本）的问题，您可以在 renderUI 中生成包含在 div 标签中的适当输出列表，然后与 for 循环中的适当渲染函数匹配。例如：

```
max_plots <- 5

shinyServer(function(input, output) {

# Insert the right number of plot output objects into the web page
output$plots <- renderUI({
  plot_output_list <- lapply(1:input$n, function(i) {
     plotname <- paste("plot", i, sep="")
     plottitle <- paste("plottitle", i, sep="")
     tablename <- paste("tablename", i, sep="")
     tags$div(class = "group-output",
       textOutput(plottitle, container = h3),
       plotOutput(plotname, height = 280, width = 250),
       tableOutput(tablename)
     )
   })

   # Convert the list to a tagList - this is necessary for the list of items
   # to display properly.
   do.call(tagList, plot_output_list)
})

# Call renderPlot for each one. Plots are only actually generated when they
# are visible on the web page.
for (i in 1:max_plots) {
    # Need local so that each item gets its own number. Without it, the value
    # of i in the renderPlot() will be the same across all instances, because
    # of when the expression is evaluated.
    local({
        my_i <- i
        plotname <- paste("plot", my_i, sep="")
        plottitle <- paste("plottitle", my_i, sep="")
        tablename <- paste("tablename", my_i, sep="")

        output[[plotname]] <- renderPlot({
        plot(1:my_i, 1:my_i, xlim = c(1, max_plots), ylim = c(1, max_plots), main = paste("1:", my_i, ".  n is ", input$n, sep = ""))
        })
        output[[plottitle]] <- renderText({paste("1:", my_i, ".  n is ", input$n, sep = "")
        })
        output[[tablename]] <- renderTable({table(x = 1:my_i, y = 1:my_i)
        })
    })
}
}) 
```

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-22T17:00:21.920

**使用闪亮动态添加 N 个图：**

```
runApp(
list(
ui = fluidPage(
  headerPanel('Tittle'),

  sidebarPanel(
    fileInput('file1', 'Choose File:'),
    textInput("target", label="Target", value="Choose target"),
    actionButton("addButton", "Go!"),
    p('The button start the code server'),
    p("This is UI")

  ),

  mainPanel(

    uiOutput("plots")
  )),
#SERVER
server = function(input, output) {     
  dataset <- eventReactive(input$addButton, {

    #Obtain the file and textinput
    inFile <- input$file1
    df <- read.csv(inFile$datapath)
    df$target <- input$target
    return(df)

  })

  output$plots <- renderUI({

    df <- dataset()
    n <- df$target[1]

    plot_output_list <- lapply(1:n, function(i) {

      plotname <- paste("plot", i, sep="")
      plotOutput(plotname, height = 580, width = 550)

    })

    do.call(tagList, plot_output_list)

  })
  observe({             

    for (i in 1:length()) {
      local({ 

        plotname <- paste("plot", i, sep="")

        output[[plotname]] <- renderPlot({

          #function_plot is the function generate plot
          function_plot()

        })
      })#endlocal
    }

  })
}
  )
) 
```

[https://github.com/ericbellet/recomendacion-modelos/blob/master/shiny/generate_rocSHINY.R](https://github.com/ericbellet/recomendacion-modelos/blob/master/shiny/generate_rocSHINY.R)

# jquery-mobile - jQuery可折叠块脚本与悬停脚本冲突

> ID：15875787
> 
> 赞同：0
> 
> 时间：2013-04-08T09:33:41.317
> 
> 标签：jquery-mobile

在我的 .asp 网站上，我的页面上有一个移动版本，因此例如这里的索引页面[http://www.paycoservices.co.uk](http://www.paycoservices.co.uk)在查看手机时会加载一个移动版本，我在“上”有一个悬停脚本完整网站'如下：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> 
```

我正在尝试添加一个调用外部 .js 文件的 jQuery 可折叠块脚本，代码如下：

```
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

一旦我添加了 jQuery 代码，可折叠块页面就可以使用，但同时不会加载其他移动页面。同样，一旦我删除 jQuery 脚本，所有页面都加载正常（即使是可折叠块页面，但没有可折叠效果）

显然存在冲突，但我已经尝试从那里一个一个地删除所有其他脚本并且没有运气。任何人都可以建议吗？jQuery mobile 论坛上的某个人建议将 jQuery Mobile 与其他脚本混合是一个坏主意，这是可以理解的，但就像可折叠块一样 :)

我是 stackoverflow 的新手，并试图将所有代码粘贴到这篇文章中，以便您可以看到它，但它不会全部接受。该页面在这里[http://www.paycoservices.co.uk/tech-benefits.asp#.UWKOg78SyS0](http://www.paycoservices.co.uk/tech-benefits.asp#.UWKOg78SyS0)在手机上查看它并加载移动版本。

# java - java中一个很好的PKCS11免费库

> ID：15875788
> 
> 赞同：3
> 
> 时间：2013-04-08T09:33:42.723
> 
> 标签：java, cryptography, token, pkcs#11

我想使用令牌来达到目的：

1.  使用 AES 加密
2.  使用 AES 解密
3.  使用 RSA 公钥创建和加密
4.  使用 RSA 私钥创建和签名
5.  创建证书
6.  获取 RSA 凯斯

我想找到一个好的 API 来执行此操作。我找到了[iaik](http://jce.iaik.tugraz.at/sic/Products/Core-Crypto-Toolkits/PKCS_11_Wrapper)包装器，但用于创建证书和签名的 JCE 库似乎不是免费的。有人可以介绍一个好的免费图书馆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:18:10.117

Java 1.5+ 内置了对 PKCS#11 的支持。[http://docs.oracle.com/javase/6/docs/technotes/guides/security/p11guide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/p11guide.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:03:02.167

对于 Java，参考是：BouncyCastle 加密库 JCE 和 BCmail

我已经用它来做你正在寻找的东西

布鲁诺

# c# - 必须声明一个主体，因为它没有标记为抽象、外部或部分 c#

> ID：15875789
> 
> 赞同：2
> 
> 时间：2013-04-08T09:33:44.753
> 
> 标签：c#, declare

关于我为什么会收到此错误的任何想法？我知道这可能是一个简单的修复，但我对 C# 完全陌生，我无法找到任何修复。

'SimpleMath.UI.Add_operation.btnCalculate_Click(object, System.EventArgs)' 必须声明一个主体，因为它没有标记为抽象、外部或部分

```
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System;

namespace SimpleMath.UI
{
    class Add_operation
    {
        public string Calculate(decimal i, decimal j)
        {
            return (i + j).ToString();
        }
        private void btnCalculate_Click(object sender, EventArgs e);

    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:35:35.367

您需要在方法中声明一个**主体**`btnCalculate_Click`：

```
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System;

namespace SimpleMath.UI
{
    class Add_operation
    {
        public string Calculate(decimal i, decimal j)
        {
            return (i + j).ToString();
        }

        private void btnCalculate_Click(object sender, EventArgs e)
        {
           // do some stuff here
           // or remove the method if it's empty
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:35:03.227

错误非常清楚。您的方法 btnCalculate_Click 没有正文！

# php - 没有在表单帖子上获得 textarea'a 值

> ID：15875790
> 
> 赞同：0
> 
> 时间：2013-04-08T09:33:46.587
> 
> 标签：php, textarea

这是一个代码

```
<?php
if (isset($_POST['flag'])) {
    echo "in";
$val=htmlspecialchars($_POST['area']);
echo $val;
if($val == "")
{
    $abstractErrorMsg="Please enter the abstract of your article";
    echo $abstractErrorMsg;
} 
}
?>
<html>
    <form method="post" action="">
        <input type="hidden" name="flag" value="hidden">
        Abstract*
        <textarea name="area" style="width: 300px; height: 100px;">

        </textarea>
        <input type="submit" name="btn">
    </form>
</html> 
```

当我在不填写 textarea 的情况下提交表单时，它也不会显示错误消息。

谁能弄清楚是什么导致了这种奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:39:08.290

要检查 textarea 是否为空，请使用以下命令：

```
if (!strlen(trim($_POST['textarea']))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:35:56.053

textarea 的默认值由多个空格和换行符组成。这不等于`""`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:37:52.383

如果您将 textarea 更改为：

```
<textarea name="area" style="width: 300px; height: 100px;"></textarea> 
```

那么它将是空的。目前那里有一些空格和换行符。

# linux - Linux Kernel 3.0+ 中的调度机制

> ID：15875792
> 
> 赞同：1
> 
> 时间：2013-04-08T09:33:53.723
> 
> 标签：linux, linux-kernel, scheduling, scheduler

默认情况下Linux内核（3.0+）使用哪种调度机制，我猜是抢占式调度？
我们可以在构建时（从菜单配置）选择其他一些机制，如截止日期优先或循环吗？
而在循环机制中，时间片是如何在内核中分配和使用的？（我的意思是时间片是在运行时计算的吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:15:08.540

Linux 目前使用的是 CFS（完全公平调度器）调度器。[您可以在内核文档](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/tree/Documentation/scheduler/sched-design-CFS.txt)中了解它。它还包含一个默认禁用的实时调度程序。

作为一个非常简短的总结，CFS 维护一个按时间排序的红黑树，其中所有可运行的任务都按 CPU 已经执行的工作量进行排序（考虑回绕）。CFS 选择完成工作量最少的任务并“坚持下去”。文档中提供了更多详细信息。

# eclipse - 在 Eclipse 中刷新声纳违规

> ID：15875793
> 
> 赞同：2
> 
> 时间：2013-04-08T09:33:53.897
> 
> 标签：eclipse, continuous-integration, sonarqube

我有一个使用 Eclipse 编写的多模块 maven 项目，并安装了 Sonar 插件。当我进行提交时，Jenkins 会启动一个调用 Sonar 的构建。Sonar 服务器是最新的。但是，Eclipse 中的违规行为不是最新的。我知道本地分析，但是对于每个模块来说这很麻烦，加上服务器已经运行了更新，我只需要找到一种方法让 Eclipse 从服务器刷新违规。这些模块与声纳和服务器相关联就好了。这是否可以刷新违规行为，或者我应该做一些不同的事情（解决这个问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:41:56.057

您可以点击“Violations”视图的“Refresh”图标强制更新： [http ://docs.codehaus.org/display/SONAR/Browsing+SonarQube+in+Eclipse+-+Prior+to+version+3.2 #BrowsingSonarQubeinEclipse-Priortoversion32-ViolationsView 显示本地或远程信息，具体取决于所选模式](http://docs.codehaus.org/display/SONAR/Browsing+SonarQube+in+Eclipse+-+Prior+to+version+3.2#BrowsingSonarQubeinEclipse-Priortoversion32-ViolationsViewdisplayslocalorremoteinformationdependingontheselectedmode)

# llvm - 为什么 libclang 不返回有意义的完成结果？

> ID：15875800
> 
> 赞同：9
> 
> 时间：2013-04-08T09:34:10.377
> 
> 标签：llvm, clang, llvm-clang, libclang

我正在尝试了解如何使用 libclang 完成代码。我看过“Thinking beyond the compiler”，也看过 c-index-test，我在[这里找到了一个简单的示例程序](https://gist.github.com/Rip-Rip/758615)

我编译了该程序并在这个示例文件上运行它，我将它制作成类似于视频中的那个：

```
struct List {
    int Data;
    struct List *Next;
};

int sumListNode(struct List *Node) {
    int result = 0;
    for (; Node; Node = Node->Next)
        result = result + Node->
}

void test() {
    sumLi
} 
```

如果我将程序指向 Node-> 之后的第一个不完整空间，它会吐出一些 C 关键字，但不会像视频所说的那样吐出 Next 或 Data。

如果我将它指向 sumLi 之后的空格，它会打印出相同的 C 关键字。如果我将 sumListNode 指向 sumLi 中具有“s”的列，我可以让它打印出 sumListNode，但即便如此，它也会将其分配为与其他关键字相同的优先级值，所以它实际上只是打印出我的所有内容可以放在那里而不是阅读光标下的内容并尝试做出明智的猜测。我只是抓住稻草，希望将光标放在片段的开头而不是结尾会有所帮助。

我已经学到了很多关于 libclang 可以给我的数据类型以及如何从 doxygen 以及在 c-index-test 中进行操作的知识，但我只是还没有学会如何让它给我相关数据，以便我可以处理一些事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T12:15:42.887

首先，您应该尝试打印`CXDiagnostic`翻译单元的任何输出，因为任何错误都可能导致 clang 在您的代码中丢失（这在您提到的非常简单的情况下不太可能）。

其次，请注意，libclang 定义行号和列号的方式可能与您习惯的方式不同（即，如果您从文本编辑器获取行/列信息，则可能必须在列号上加 1 才能进入与 clang 的定义同步）。

第三，您可以使用 clang 编译器本身来测试编译选项和行/列信息的有效性。通过这种方式，您可以消除基于 libclang 的代码产生的不确定性。例如，您可以使用以下命令行：

```
clang++ -cc1 -fsyntax-only -code-completion-at FILENAME:LINE:COL CLANG_ARGS 
```

* * *

另请注意，[clang_codeCompleteAt](http://clang.llvm.org/doxygen/group__CINDEX__CODE__COMPLET.html#ga50fedfa85d8d1517363952f2e10aa3bf)仅在令牌开头调用并生成所有可能令牌的列表，客户端负责使用已在文本编辑器中输入的潜在部分令牌过滤结果。

从文档中（重点是我的）：

> 在翻译单元中的给定位置执行代码完成。
> 
> 此函数在源代码中的特定文件、行和列执行代码补全，提供基于补全上下文建议潜在代码片段的结果。代码完成的基本模型是 Clang 将解析一个完整的源文件，执行语法检查，直到请求代码完成的位置。此时，一个特殊的代码完成标记被传递给解析器，解析器识别这个标记并根据 C/Objective-C/C++ 语法中的当前位置和语义分析的状态确定要提供什么完成。这些完成通过新的 CXCodeCompleteResults 结构返回。
> 
> **代码完成本身意味着当用户键入标点字符或空格时由客户端触发**，此时代码完成位置将与光标重合。例如，如果 p 是一个指针，则代码完成可能会在 p-> 中的“-”之后和“>”之后触发。当代码完成位置在“>”之后时，完成结果将提供例如“p”指向的结构的成员。**客户端负责将光标放在当前正在键入的token的开头，然后根据token的内容过滤结果**. 例如，当对表达式 p->get 进行代码完成时，客户端应在“>”之后（例如，指向“g”）提供此代码完成挂钩的位置。然后，客户端可以根据当前的令牌文本（“get”）过滤结果，只显示那些以“get”开头的结果。**该接口的目的是将代码完成结果的相对高延迟获取与基于每个字符的结果过滤分开，后者必须具有较低的延迟。**

以您修改后的第二个示例为例：

```
int main (int argc, char **argv) {
  int i = sumLi
  //      ^
} 
```

代码完成应该在标记的位置（即令牌的开头）调用。然后，Clang 可以给出一长串结果，例如：

*   `argc`
*   `sumListNode(<# struct List *Node #>)`

然后由您根据部分输入的`sumLi`令牌过滤此列表并保留唯一相关的完成：`sumListNode`。

如果你了解 elisp，clang 的源代码包含一个用于 Emacs 的自动完成库，这是这个两级实现的一个很好的例子：

[`trunk/utils/clang-completion-mode.el`](http://llvm.org/svn/llvm-project/cfe/trunk/utils/clang-completion-mode.el)

# php - 使用 PHP 移动 MySQL 行

> ID：15875801
> 
> 赞同：1
> 
> 时间：2013-04-08T09:34:11.030
> 
> 标签：php, mysql, sql

我有一个 MySQL 数据库。

加载活跃的成员。

这些表有点像这样：

```
Table Name: recipients

Columns:    recipient_id
            member_id 
```

然后我有一个名为`recipients_banned` The columns are the same as in 的表`recipients`。

我想要做的是在表单（PHP）中有一个是/否字段，当单击该字段时，将所有`member_id`在`recipients`表中的人移动到`recipients_banned`表中。

对此的一些初始代码的任何帮助将不胜感激。如果不删除所有数据，这是否可能？请注意，`recipients`移动后应删除其中的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:04:47.327

```
recipients                     recipients_banned

recipient_id | member_id       recipient_id | member_id
------------------------       ------------------------
11           | 21              31           | 32
21           | 22              41           | 42 
```

实际上，您没有详细解释您的问题。所以，我试图猜测你的问题并给你一些提示。例如，我们有一个名为*form.php*的 PHP 文件：

```
<form action="form.php?q=yes" method="get">
  Recipient ID: <input type="text" name="recipient_id">
  Member ID: <input type="text" name="member_id">
  <input type="submit" value="Move">
</form>

<?php
$con = mysqli_connect("$host", "$user", "$password", "$database");

$r = mysql_real_escape_string($_GET["recipient_id"];
$m = mysql_real_escape_string($_GET["member_id"];
$q = $_GET["q"];

if ($q = yes) {
    $i = "INSERT INTO `recipients_banned` ( `recipient_id` , `member_id` )
    VALUES (
      '$r' , '$m'
    );";

    $d = "DELETE FROM `recipients` WHERE `recipient_id` = $r AND `member_id` = '$m' LIMIT 1;";

    mysqli_query($con, "$i
    $d");
}

mysqli_close($con);
?> 
```

如果我们尝试在**Recipient ID**字段中输入*“21”* ，在**Member ID字段中输入“** *22”*，然后单击**Move**按钮，数据库表的内容将如下所示：

 *******```
recipients                     recipients_banned

recipient_id | member_id       recipient_id | member_id
------------------------       ------------------------
11           | 21              21           | 22
                               31           | 32
                               41           | 42 
```

如果有问题，请随时修改此答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:37:36.520

您的问题不清楚。例如，我们表格的数据是：

```
recipients               | recipients_banned
recipient_id | member_id | recipient_id | member_id
------------------------ | ------------------------
1            | 21        |
2            | 22        | 
```

如果您只想在表单上有*“是”*和*“否”*单选按钮，当您选择*“是”*按钮然后提交时，**收件人**表中的所有数据都将移动到**收件人**禁止表中，那么您应该最好试试这段代码。例如，我们有一个名为*form.php*的 PHP 文件：

```
<form action="form.php" method="get">
  <input type="radio" name="q" value="1">Yes<br />
  <input type="radio" name="q" value="0">No
  <input type="submit" value="Submit">
</form>

<?php
$con = mysqli_connect("$host", "$user", "$password", "$database");
$q = $_GET["q"];

if ($q == 1) {
    $i = "INSERT INTO `recipients_banned` ( `recipient_id` , `member_id` )
    SELECT recipient_id , member_id
    FROM `recipients`;";
    $d = "DELETE FROM `recipients`;";

    mysqli_query($con, "$i
    $d");

    echo '"recipients" data is moved to "recipients_banned"!';
} else if ($q == 0) {
    echo "Nothing is moved!";
}

mysqli_close($con);
?> 
```

如果选择*“No”*然后提交，输出将是*“Nothing ismoved！”* . 但是，如果您在提交之前选择*“是”*，则看不见的数据库表结果将变为下表，并输出*“收件人”数据已移动到“收件人禁止”！*：

```
recipients               | recipients_banned
recipient_id | member_id | recipient_id | member_id
------------------------ | ------------------------
                         | 1            | 21
                         | 2            | 22 
```*******

# asp.net - CKeditor 内联编辑

> ID：15875802
> 
> 赞同：-2
> 
> 时间：2013-04-08T09:34:25.317
> 
> 标签：asp.net, ckeditor, autosave, inline-editing

我有以下来源：

```
<div id="editable" runat="server" contenteditable="true" >Sample Text</div> 
```

我的问题是我是否可以仅使用 asp.net 保存编辑后的文本？

如果有，来源应该是什么？如果没有，还有其他简单的方法可以将编辑后的数据保存到数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:25:01.653

Asp.net 是一个框架，而不是一种语言。“仅限 Asp.net”实际上可以包含任何内容，因为它至少可以包含 Visual Basic、C#、HTML 或 JavaScript。“Asp.net”也可能意味着带有 Razer 或 Asp.net Webforms 的 Asp.net MVC 3（我认为您基于`runat="server"`.

老实说，我想说让 SO 社区为您编写整个功能的代码太过分了，但我的建议是像[http://ckeditor.com/forums/Support/Inline-editing中建议的那样使用内联 JavaScript工具栏没有保存图标](http://ckeditor.com/forums/Support/Inline-editing-toolbar-has-no-save-icon)

在我看来，JavaScript 与其他技术一样是 asp.net 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:07:46.417

这是可能的，但您可以在上面使用一些 jquery ajax。您将通过使用 $(#divid).html() 或 $(#divid).text() 获取值，然后将其传递给 ajax，然后将其发布到 Web 服务。

# iphone - 如何保持 UIImage 大小不变，但改变它的文件大小

> ID：15875804
> 
> 赞同：1
> 
> 时间：2013-04-08T09:34:45.167
> 
> 标签：iphone, ios, uiimage

我想保持 UIImage 的宽度和高度不变，但改变我使用的 UIImage 文件大小：

```
NSData *uploadpic = UIImageJPEGRepresentation(photoData, 0.5);

   int compressionQuality=0.5;

   while (uploadpic.length>500000) {

       compressionQuality=compressionQuality+0.1;
       if(compressionQuality>=1){
           compressionQuality=1;
       }

       UIImage *tempImg=[UIImage imageWithData:uploadpic];
       uploadpic = UIImageJPEGRepresentation(tempImg, 0.5);
       NSLog(@"uploadpic = %d", uploadpic.length);
   } 
```

但是上传图片的所有方式都是630297没有改变，怎么办

编辑：我修改

```
NSData *uploadpic = UIImageJPEGRepresentation(tempImg, 0.5); 
```

作为

```
UIImageJPEGRepresentation(tempImg, compressionQuality) 
```

一切正常。

但我有一个问题：为什么设置一个固定值 0.5 ，它没有改变。每次改变0.5为什么不正确？

# css - 有没有人注意到 chrome 上的链接存在问题，该问题阻止指针在检查器激活时悬停时显示？

> ID：15875809
> 
> 赞同：3
> 
> 时间：2013-04-08T09:34:52.243
> 
> 标签：css, google-chrome, google-chrome-devtools, web-inspector

在 Chrome 版本 26.0.1410.43 m 上，我想知道是否有人注意到以下问题...

激活 chrome-devtools 检查器时，光标不再出现在链接悬停...

此外，还有一个应用于链接的用户代理样式表

```
a:-webkit-any-link {
  color: -webkit-link;
  text-decoration: underline;
  cursor: auto;
} 
```

这是否与以下内容的重复，因为它也仅在更新版本的 Chrome 上观察到？[鼠标悬停在锚标记上不显示指针光标。在 Chrome 上观察到的行为在 IE 9 上可以正常工作吗？](https://stackoverflow.com/questions/15730025/mouse-hover-on-anchor-tag-does-not-display-pointer-cursor-behavior-observed-on)

这也很有趣，但没有显示光标变化...[如何使用 chrome web inspector 查看悬停代码](https://stackoverflow.com/questions/5789739/how-to-use-chrome-web-inspector-to-view-hover-code)

是否有任何设置可以防止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T04:32:46.253

这是由于在 Web Inspector 设置中选择了[模拟触摸事件造成的。](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation)只需取消勾选即可。

* * *

![模拟触摸事件示例屏幕抓取](https://i.stack.imgur.com/6OoVo.png)

# mysql - 创建 MySQL 函数时出现语法错误

> ID：15875814
> 
> 赞同：0
> 
> 时间：2013-04-08T09:35:08.903
> 
> 标签：mysql, sql, function

```
CREATE FUNCTION count(name varchar(20))
        RETURNS integer
        BEGIN
        DECLARE d_count integer;
                select count(*) into d_count
                from ins
                where ins.name = name
        RETURN d_count;
        END 
```

上面的 SQL 代码显示存在语法错误。

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURN (d_count); END' at line 8 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:37:19.543

`;`语法错误，您在 SELECT 语句之后错过-

```
CREATE FUNCTION count (name varchar(20))
RETURNS integer
BEGIN
  DECLARE d_count integer;
  SELECT COUNT(*) INTO d_count FROM ins WHERE ins.name = NAME;
  RETURN d_count;
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:39:10.140

试试这个

```
CREATE FUNCTION count(@name varchar(20))
        RETURNS integer
        BEGIN

        RETURN( select count(*) 
                from ins
                where ins.name = @name);

        END 
```

# git - 使用 github 部署，未设置 git_discovery_across_filesystem

> ID：15875825
> 
> 赞同：2
> 
> 时间：2013-04-08T09:35:52.723
> 
> 标签：git, deployment

我看过很多关于我的问题的线程和博客文章，但没有一个能解决我的问题，所以我会在这里询问是否有人遇到过同样的问题。

我正在尝试通过 github 部署我的网站。我在服务器上创建了一个裸 hub.git 存储库，我将本地 git 存储库推送到它，检查它是否与 git log 一起使用，一切都很好。

然后我在服务器上的一个名为 dev 的 repo 中克隆了这个 repo，并为它创建了一个虚拟主机，一切正常。

我曾经从本地推送到集线器，然后从开发中拉集线器，它工作正常。我想自动化这个，我希望能够从本地推送到集线器并自动从开发中提取集线器。因此，我在 hub.git/hooks 中创建了一个更新后文件并将其放入其中：

```
 #!/bin/bash
echo
echo "***** updating on dev *****"
echo 
cd /../dev || exit
unset GIT_DIR
git pull origin master 
```

然后我确保我的更新后可以使用

```
 chmod +x hooks/post-update 
```

回到我的本地仓库，更改了一个文件

```
 git add .
   git commit -m "testing"
   git push origin 
```

出现此消息

```
 remote : 
   remote : ***** updating on dev *****
   remote : 
   remote : fatal: Not a git repository (or any parent up to mount point /dev)
   remote : Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set). 
```

我检查了一下，我的 dev 目录中有一个 .git 并且 HEAD 没有被重命名或任何东西。但是我确实有一个 HEAD、一个 FETCH_HEAD 和一个 ORIGIN_HEAD（不知道这是否会改变任何东西）。

我不确定这里有什么问题。服务器是 gentoo x86（如果这可能有帮助的话）。抱歉，如果我只是遗漏了一些明显的东西，或者这不是发布此内容的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:41:40.790

替换`cd /../dev` 为`cd ../dev`应该有帮助。

如果没有，请尝试`echo $(pwd)`查看您在输出中的位置

# winforms - DevComponents - Dotnetbar2 按运行时添加样式

> ID：15875826
> 
> 赞同：0
> 
> 时间：2013-04-08T09:35:53.170
> 
> 标签：winforms, styles, dotnetbar

我想在运行时向 Combobox 添加样式，如下所示：

```
Dim cbo as DevComponents.DotNetBar.Controls.ComboBoxEx
cbo = new DevComponents.DotNetBar.Controls.ComboBoxEx

With cbo

    .Style=eDotNetBarStyle.Windows7
    .width=200px

End With

ctl.Add(cbo) 
```

但它不起作用。样式是正常的 Windows 控件样式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T21:28:22.893

根据 DevComponent(DotNetBar) 的版本，我的当前版本是 11.03，您只需在项目中添加一个 StyleManager，您选择具有此样式的表单上的所有控件都将拥有它，而无需编写任何代码。StyleManager 的属性之一是您刚刚设置的主题（Office2007、Office2010、VS2012、Windows 7、Metro 等），DevComponents 中的所有控件都将更改以适应此设置。

# oracle - 将查询语句 [ insert , update ] 作为参数传递并执行

> ID：15875827
> 
> 赞同：0
> 
> 时间：2013-04-08T09:35:56.030
> 
> 标签：oracle, oracle10g, oracle11g

如果我想将插入语句作为参数传递给该函数并在函数中执行并返回值，我该怎么办

```
create or replace function new_record (p_name your_table.first_name%type)
    return your_table.id%type
is
    return_value your_table.id%type;
begin
    begin
        insert into your_table (id, first_name)
            values (your_seq.nextval, p_first_name)
        returning id into return_value;
    exception
        when dup_val_on_index then
             return_value := 0;
    end;
    return return_value;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:06:02.050

使用“[立即执行](http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/dynamic.htm)”语句：

这是一个简单的例子，只要执行这个 sql，你就会看到它是如何工作的：

```
declare
  p_param   number := 123;
  l_res varchar2(10);
  l_sqltext varchar(100);
begin
  l_sqltext := 'begin select t.dummy into :1 from dual t where 123 = :2; end;';
  execute immediate l_sqltext using out l_res, in p_param;
  dbms_output.put_line(l_res);
end; 
```

# android - 如何在不使用 ScrollView 的情况下使 TextView 可滚动？

> ID：15875830
> 
> 赞同：5
> 
> 时间：2013-04-08T09:36:00.743
> 
> 标签：android, scroll, textview, scrollview, pinchzoom

我需要实现一个自定义 View 对象，它扩展了 TextView 并支持缩放文本的缩放和滚动。Android 文档说 TextView 类可以在不需要 ScrollView 容器的情况下处理自己的滚动，但我未能实现这种行为。我的自定义 TextView 将有一个固定的框架，通常显示在其中的文本将垂直大于框架。如果我们捏缩放到文本，文本也会横向变大。我发现的大多数示例都是在 ScrollView 中使用 TextView，但如果可能的话，我特别希望仅使用我的 TextView 扩展类来执行此操作。

提前致谢

# url - Angurlarjs 获取外部服务

> ID：15875833
> 
> 赞同：0
> 
> 时间：2013-04-08T09:36:03.067
> 
> 标签：url, service, controller, angularjs, external

我在使用 angularjs 从我的服务中获取一些 json 信息时遇到问题。

我已经从谷歌下载了这个例子并修改了它以从数据库中获取我想要的信息。但它似乎没有工作，我不知道它在哪里坏了。这是我的 service.js 代码：

```
angular.module('productServices', ['ngResource']).
    factory('Product', function ($resource) {
        return $resource('http://dev.integrator.blondgorilla.com/integratorservice/getproducts?min=0&max=15', {}, {
            query: { method: 'GET', params: { ProductID: 'products' }, isArray: true }
        });
    }); 
```

和控制器看起来像这样

```
function ProductListCtrl($scope, Product) {
    $scope.products = Product;
} 
```

product-list.html 页面如下：

```
<div class="span10">
    <!--Body content-->

    <ul class="products">
        <li ng-repeat="product in products" class="thumbnail">
            <p>{{product.ProductID}}</p>
        </li>
    </ul>
</div> 
```

主要的 js 文件是 AngularSpike.js

```
'use strict';
angular.module('ProsPhere', ['productFilters', 'productServices']).
  config(['$routeProvider', function ($routeProvider) {
      $routeProvider.
          when('/products', { templateUrl: 'partials/product-list.html', controller: ProductListCtrl }).
          when('/products/:productId', { templateUrl: 'partials/product-details.html', controller: ProductDetailCtrl }).
          otherwise({ redirectTo: '/products' });
  }]); 
```

我使用和修改的代码可以从

[https://github.com/angular/angular-phonecat.git](https://github.com/angular/angular-phonecat.git)

谢谢，

基亚努什

* * *

到目前为止我发现了两个问题：

1- 正如 Marek 所说 .query() 2- 我正在调用不同的域，我应该使用 JSONP

```
angular.module('productServices', ['ngResource']).
    factory('Product', function ($resource) {
        var test = $resource('http://dev.integrator.blondgorilla.com/integratorservice/getproducts', {}, {
            query: { method: 'JSONP', params: { minid: '0', maxid: '70' }, isArray: true }
        });

        return test;
    }); 
```

但我仍然看不到产品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:46:00.123

Here's the first issue:

```
function ProductListCtrl($scope, Product) {
   $scope.products = Product;
} 
```

and that is that you are assigning $resource to scope instead of some results which can be retrieved by that $resource class.

Try this:

```
function ProductListCtrl($scope, Product) {
   $scope.products = Product.query();
} 
```

If there's still something wrong then I can help you if you create running plnkr or something like that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T14:00:42.220

$resource 对象方法立即返回一个空引用（对象或数组取决于 isArray）。一旦数据从服务器返回，现有的引用就会填充实际的数据。所以在这里`ProductListCtrl`我们需要回调函数来处理这个问题。您可以使用以下代码替换控制器：

```
function ProductListCtrl($scope,Product){
    Product.query(function(data) {
        $scope.products=data;
    });
} 
```

或者你可以使用这个：

```
 function ProductListCtrl($scope, Product) {
       Product.query()
         .$promise.then(function(data) {
           $scope.products=data;
         });
    } 
```

# asp.net - SignalR 和 Visual Studio 2008

> ID：15875834
> 
> 赞同：1
> 
> 时间：2013-04-08T09:36:04.043
> 
> 标签：asp.net, visual-studio-2008, signalr

有什么方法可以在 Visual Studio 2008 上使用 signalR。我没有 Visual Studio 2012。所以想试试我的 2008 版 Visual Studio。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:14:52.513

不，SignalR 需要 .NET 4.0 及更高版本，这需要 vs >= 2010

# c# - 当放置多个显示错误的 sql 命令时：已经有一个打开的 DataReader 与此命令关联，必须先关闭

> ID：15875837
> 
> 赞同：7
> 
> 时间：2013-04-08T09:36:12.697
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc

朋友们，当我在 asp.net 中编写这些代码时，我收到如下错误：

> 已经有一个打开的 DataReader 与此命令关联，必须先关闭

请帮帮我

```
SqlConnection con = obj.getcon();
con.Open();

       SqlCommand cmd = new SqlCommand("select student_id from student_details", con);
       SqlDataReader dr = cmd.ExecuteReader();
       while (dr.Read())
       {
           String ss=dr[0].ToString();
           if (val == ss)
           {

               SqlCommand cmd1 = new SqlCommand("insert student_vs_testsession_details(student_id,testsession_id,testsession_status) values('" + val + "','" + Test + "','')", con);
               int val1 = cmd1.ExecuteNonQuery();

           }
           else
           {

               string message = "<script language=JavaScript> alert('StudentID does not exists!'); </script>";
               if (!Page.IsStartupScriptRegistered("clientScript"))
               {
                   Page.RegisterStartupScript("clientScript", message);
               }
           }

       } 
     dr.Close();
      // con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T09:45:16.930

您需要更改连接字符串并添加此选项

```
 "MultipleActiveResultSets=True;" 
```

从 SQL Server 2005 开始，有 MARS 选项。
使用 MARS，一个**打开**的连接一次可以服务多个命令。因此，例如，您的连接字符串应该是这样的

```
"Server=myServerAddress;" + 
"Database=myDataBase;" + 
"Trusted_Connection=True;" +
"MultipleActiveResultSets=true;" 
```

[请参阅 MARS 上的文档](http://msdn.microsoft.com/en-us/library/ms131686.aspx)

在*“正常”*配置中，当[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)打开时，SqlConnection 正忙于为阅读器提供服务，无法接受其他命令。
（参见 SqlDataReader 链接上的注释）。

当您尝试使用同一连接发出命令时，上面的代码会打开一个阅读器。
有一些解决方法，比如填充一个 DataSet 然后循环它（但对于大型集，这会影响性能），所以微软的 SQL 团队引入了 MARS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T12:28:50.933

建议不要使用嵌套sql，会降低应用程序性能，而是使用sql海量插入。因此，您可以将代码更改为：

```
SqlConnection con = obj.getcon();

con.Open();
SqlCommand cmd1 = new SqlCommand("insert into student_vs_testsession_details(student_id,testsession_id,testsession_status) select student_id, " + "'Test','' from student_details where student_id = '" + val + "'", con);
int val1 = cmd1.ExecuteNonQuery();

       SqlCommand cmd = new SqlCommand("select student_id from student_details where student_id != " + val , con);

       SqlDataReader dr = cmd.ExecuteReader();
       while (dr.Read())
       {
           String ss=dr[0].ToString();

               string message = "<script language=JavaScript> alert('StudentID does not exists!'); </script>";
               if (!Page.IsStartupScriptRegistered("clientScript"))
               {
                   Page.RegisterStartupScript("clientScript", message);
               }

       } 

dr.Close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T09:46:06.027

当数据读取器打开时，您不能为同一连接执行多个命令语句...改用 SqlDataAdapter.. 使用 dataadapter 和 DataSet 将使您的工作更轻松..

# python - 将 curl 转换为 Python httplib

> ID：15875842
> 
> 赞同：0
> 
> 时间：2013-04-08T09:36:23.250
> 
> 标签：python, curl, hadoop, hdfs, httplib

Hadoop 使用 curl 提供了一个 REST API。出于某种原因，我需要使用 httplib 而不是 pycurl。

你能把这个请求翻译成httplib吗？`test.txt`本地文件应该由 传输，`HTTPConnection.send(data)`因为我需要按块传输文件。

```
curl -i -X PUT -T test.txt "http://www.SomeDomain.com/webhdfs/v1/levi/test.txt?op=CREATE" 
```

# imap - Mozilla Thunderbird 如何使用 IMAP 主机和端口的 RDF 数据库

> ID：15875844
> 
> 赞同：2
> 
> 时间：2013-04-08T09:36:36.530
> 
> 标签：imap, rdf, thunderbird

我试图弄清楚如何从电子邮件中猜测 IMAP 主机和端口。这是在 Thunderbird 中完成的，并且在这里发布了一个类似的问题： [从电子邮件地址获取邮件服务器详细信息？](https://stackoverflow.com/questions/7669897/getting-mail-server-details-from-an-email-address)

我查看了 Thunderbird 的源代码，找到了带有 IMAP 的 RDF 文件以及 Gmail 和 AOL 的主机和端口数据。见： http: [//mxr.mozilla.org/comm-central/source/mailnews/base/ispdata/](http://mxr.mozilla.org/comm-central/source/mailnews/base/ispdata/)

我的问题是 Mozilla 是如何实际使用这些数据的。它为每个域保留用户提供的 IMAP 主机和端口的 RDF 数据库？或者这两个是他们拥有数据的唯一域？

我似乎找不到与这些数据交互的代码。我最接近的是函数 getIspDefaultsForUri(domainURI)： [http](http://mxr.mozilla.org/comm-central/source/mailnews/base/prefs/content/ispUtils.js#105) ://mxr.mozilla.org/comm-central/source/mailnews/base/prefs/content/ispUtils.js#105 我不熟悉Mozilla 雷鸟代码库，所以现在搜索它有点辛苦。

另一方面，如果有人知道包含电子邮件域到 IMAP 设置的映射的不同数据库或 Web 服务，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:08:36.100

我不相信他们会使用从最终用户那里获得的 Thunderbird 配置数据并将其放入他们的数据库——从隐私的角度来看，这将是一件非常侵入性的事情。[TB 关于自动配置的文档](https://developer.mozilla.org/en-US/docs/Thunderbird/Autoconfiguration)描述了他们如何获取配置数据。

对于您问题的另一部分，请查看[RFC 6186](https://www.rfc-editor.org/rfc/rfc6186)，它使用 DNS`SRV`记录来指定要使用的 IMAP 服务器（对于 TB，它是[bug 342242](https://bugzilla.mozilla.org/show_bug.cgi?id=342242)。

# struts2 - 一个接一个地执行多个动作

> ID：15875846
> 
> 赞同：5
> 
> 时间：2013-04-08T09:36:50.550
> 
> 标签：struts2, struts

我需要一种通过一个请求执行多个 struts 操作的方法。目标是尽量减少对服务器的请求需求。所以我需要的是类似“MultiAction”的东西，它获取一个动作列表作为它应该执行的参数，然后返回这个动作的“组合”结果。

例如：

*   客户端分为很多模块
*   一个模块需要从服务器获取信息
*   客户端有一个代理处理这个请求
*   这个代理现在会说“嘿​​，其他模块，我要向服务器发出请求，你需要什么吗？”
*   其他模块现在可以选择在代理处提交请求
*   然后将实际的“组合”请求发送到服务器，结果再次被拆分并提供给请求它的模块

所以我的问题是：

1.  **Struts2 中是否有标准的方法来做这样的事情？**
2.  **是否有一种标准的“公共”方式来手动调用另一个动作并从值堆栈中获取其结果？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-17T10:08:45.770

这可以通过在结果类型中使用“redirectAction”来实现。以下代码是相同的示例。您必须根据使用嵌套动作的要求在 struts XML 中配置动作标记。

```
 <action name="userHomeAction" class="com.etp.connect.struts.action.UserHomeAction">
        <result type="redirectAction" name="SUCCESS_EDIT">
            <param name="actionName">getUserEditData</param>
            <param name="selectedUser">${selectedUser}</param>        
        </result>
        <result name="error">/jsp/userMgmt/Users_Home.jsp</result>
        <result name="login">/jsp/loginMgmt/Login.jsp</result>
    </action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T08:24:53.037

Request > Action 1 > Action 2 > Response 在 Struts 2 中，这可以通过 Chain Result 来实现。链结果是一种结果类型，它使用自己的拦截器堆栈和结果调用动作。这个拦截器允许一个动作将请求转发到一个目标动作，同时传播源动作的状态。以下是如何定义此序列的示例。

```
 <package name="public" extends="struts-default">
            <action name="createUserAccount"
                class="net.onlineSolution.CreateAccountAction">
                <result name="success" type="chain">login</result>
            </action>
            <action name="login"
                class="net.onlineSolution.LoginAction">
                <result name="success" type="chain">showDashboard</result>
            </action>
            <action name="showDashboard"
                class="net.onlineSolution.DashboardAction">
                <result name="success">/WEB-INF/jsp/dashboard.jsp</result>
            </action>
    </package> 
```

在上面的代码中，我们定义了三个动作：createUserAccount、login 和 showDashboard。注意每个动作是如何使用标签链接到下一个动作的。因此，当用户第一次登录系统时，将使用 createAccount 操作。创建帐户后，用户将被转发到登录操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T06:04:41.460

出色地。使用简单的 struts 结果类型是非常有可能的。要在单个操作中处理多个操作，您可以**`<result name="success" type="redirectAction"></result>`**在结果属性中使用。通过这些多个操作，您还可以使用**struts.xml****`<param>`**的属性传递 n 个参数。以下示例代码供您参考：-

 **```
<result name="success" type="redirectAction">
     <param name="actionName">[.. you can write another action here ..]</param>
     <param name="[.. parameter name ..]">${.. parameter name ..}</param>
</result> 
```**

# android - 如何从字符串数组中随机获取文本？

> ID：15875847
> 
> 赞同：2
> 
> 时间：2013-04-08T09:36:51.390
> 
> 标签：android, arrays, loops, android-arrayadapter

我想使用文本字段（AutoCompleteTextView）从单击事件的字符串数组中随机获取文本值。

这里的java文件：

```
String[] questionsOpt = { "I just ejaculated blood", "I just eat", "I just emptied my 401k", "I just exist", 
        "tattooed my face", "threw up yellow stuff", "threw up in my mouth", "took a huge dump"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start_game);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, questionsOpt);

    AutoCompleteTextView actvDev = (AutoCompleteTextView) findViewById(R.id.actvDev);
    actvDev.setThreshold(1);
    actvDev.setAdapter(adapter);
} 
```

如何在此处添加循环以在按钮单击事件中从字符串数组中随机查找字符串值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T09:39:54.470

您可以使用[`Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)：

```
Random random = new Random(); // or create a static random field...
String randString = questionsOpt[random.nextInt(questionsOpt.length)]; 
```

# windows - 如何在命令行上从 SVN 签出已删除的项目

> ID：15875856
> 
> 赞同：4
> 
> 时间：2013-04-08T09:37:19.650
> 
> 标签：windows, svn, command-line, svn-checkout

我正在尝试签出一个在 401 修订版中从我的 SVN 中删除的项目。该项目现在已失效，并已完全被重写代码所取代，但我想做一个签出，以便我可以参考在进行重写时对旧代码的小片段进行处理。

据我所知，这应该就像检查旧路径和最后一个好的修订版（400）一样简单。但是当我尝试这个时，我得到一个错误，因为它试图使用最新的版本：

```
C:\Users\couling\workspace>svn checkout --revision=400 https://svn.domain.com/repos/trunk/OldProject
Error validating server certificate for 'https://svn.domain.com:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: svn.domain.com
 - Valid: from Tue, 11 Dec 2012 15:03:33 GMT until Wed, 11 Dec 2013 15:03:33 GMT
 - Issuer: Personal Certificate, Foomy Whatsit, Blah, Blah, GB
 - Fingerprint: 01:02:03:04:05:06:07:08:09:10:11:12:13:14:15:16:17:18:19:20
(R)eject, accept (t)emporarily or accept (p)ermanently? t
svn: '/repos/!svn/bc/1418/trunk/OldProject' path not found

C:\Users\couling\workspace> 
```

我可以通过网络浏览器轻松浏览到修订版 400 的文件夹，因此在最坏的情况下我仍然可以查看代码，但我更愿意为我的 IDE 提供所有源文件的副本。

作为参考，我正在使用此版本的客户端：

```
C:\Users\couling\workspace>svn --version
svn, version 1.6.16 (r1073529)
   compiled Mar  8 2011, 11:47:41

Copyright (C) 2000-2009 CollabNet.
Subversion is open source software, see http://subversion.apache.org/
This product includes software developed by CollabNet (http://www.Collab.Net/). 
```

如何签出现在已删除的文件夹？

**编辑**

为了消除疑问.... 上面的 checkout 命令使用语法`--revision=400`，因为这恰好是我在发布之前编写命令的最后一种方式。这是有效的语法，因为 svn 命令使用与 GNU getopt_long 兼容的库。我使用的版本确实和以下都是同义词`-r 400` `-r400` `--revision 400` `--revision=400`。getopt 库将不同的变体都简化为一个结果。

碰巧，我在发布之前使用的最后一个命令的原因是我检查了所有变体以确认它与此问题无关。他们都有相同的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:32:45.527

`svn co --depth=infinity https://svn.domain.com/repos/trunk/OldProject@400`

请参阅[**“SVNBook | Peg 和操作修订”**](https://www.visualsvn.com/support/svnbook/advanced/pegrevs/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T10:38:55.120

1.  当你使用 Operative Revision 时，你**必须****用空格**来写：`-r 400`
2.  您*可以*使用 PEG-revision un URL 而不是 OR：`https://svn.domain.com/repos/trunk/OldProject@400`
3.  为了在没有用户干预的情况下执行操作（对于证书），您可以添加到命令

`... --non-interactive --trust-server-cert`

**样品**

因为OP坚持坚持正确而不是RTFM并尝试

前提条件：[http](http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings) ://mayorat.ursinecorner.ru: 8088/svn/Hello/branches/Greetings 在当前 HEAD 中不存在，但在 r16 中

```
svn co -r 16 http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings
svn: E160013: '/svn/Hello/!svn/rvr/37/branches/Greetings' path not found 
```

* * *

```
svn co http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings@16
A    Greetings\Hello.txt
 U   Greetings
Checked out revision 16. 
```

* * *

```
svn co -r=16 http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/
svn: E205000: Syntax error in revision argument '=16' 
```

*   根据最后的评论，我必须得到 / 分支的 HEAD，但是

`>dir /b`

`Greetings`

# clojure - 在与 Clojure 中运行代码相同的目录中打开文件

> ID：15875859
> 
> 赞同：11
> 
> 时间：2013-04-08T09:37:37.157
> 
> 标签：clojure

我正在尝试用 Clojure 编写一些测试。其中一项测试涉及在与正在运行的测试文件相同的目录中打开一个 html 文件，以将内容用作测试输入（Python 中广泛使用的习惯用法）。我认为`*file*`var 可以完成这项工作，但事实并非如此，因为它是相对的。

假设我的项目使用默认的 leiningen 布局，名为`demoproj`. 然后我的测试在`~/projects/demoproj/test`. 这个目录再次复制了项目命名空间，我不是很喜欢，但无论如何。所以测试`core.clj`在`~/projects/demoproj/test/demoproj/test/core.clj`. `small_page.html`我在同一目录中也有一个文件。如果我将以下内容放入`test/core.clj`：

```
(println (-> (java.io.File. *file*)
             .getPath)) 
```

这是我得到的：

```
demoproj/test/readibility.clj 
```

这是相对于`test`项目库的目录的。我尝试仅使用此相对路径读取示例 html 页面，如下所示：

```
(slurp (-> (java.io.File. *file*)
            .getParent
            (java.io.File. "small_page.html")
            .getPath)) 
```

这会导致 IO 错误，因为无法在该位置读取文件。我的下一个想法是获取当前工作目录并将其与相对路径连接。这是我获取工作目录的方式：

```
(println (-> (java.io.File. ".")
             .getCanonicalPath)) 
```

它返回了一个绝对路径：

```
/Path-to-home/projects/demoproj 
```

不好的是，这两个没有加入到文件的正确路径；中间缺少一个`test`组件。因此，连接这两个路径会导致不正确的目录路径。

所以，我的问题是，有没有一种可靠的方法来获取当前执行的代码文件的绝对路径？如果这是不可能的，那么这个习语的替代方法是什么，即我如何解析位于相对于测试文件的位置的文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T16:23:58.430

因为 clojure 代码和相关资源可能会在 jar 中结束，并且您希望代码运行，即使您正在访问的文件可能最终作为 jar 的一部分而不是真正的文件系统，这样做的可靠方法是使用 io/resource，并确保相关文件位于资源路径中。

例如，我在当前项目中将以下内容作为我的目录结构的一部分：

```
|-- project.clj
|-- resources
|   |-- caribou.properties
|   |-- config
|   |   |-- boot.clj
|   |   |-- development.clj
|   |   |-- local-dumped.clj
|   |   |-- local.clj
|   |   |-- production.clj
|   |   |-- staging.clj
|   |   `-- test.clj
|   `-- logging.properties 
```

我的 project.clj 中有以下内容：

```
 :resource-paths ["shared" "resources"] 
```

然后我可以在我的 repl 中执行以下操作：

```
user> (do (require '[clojure.java.io :as io]) (io/resource "config/boot.clj"))
#<URL file:/Users/me/this-project/resources/config/boot.clj>
user> (slurp *1)
"(use '[caribou.config :only (read-config configure environment)])\n(require '[clojure.java.io :as io])\n..." 
```

如您所见，io/resource 返回一个 URL，然后我可以将其传递给我要求的文件（在配置的资源路径中查找路径片段）。如果将整个应用程序打包到一个 uberjar 中进行部署，则此代码仍然有效，而在这种情况下，创建 io/file 并调用 getParent 会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:33:24.900

在谷歌搜索多一点后，我想出了如何做到这一点，并实际阅读了 Stackoverflow 上的所有答案。user83510 实际上在这里回答了这个问题：[https](https://stackoverflow.com/a/11498784/1285782) ://stackoverflow.com/a/11498784/1285782 ，但答案没有被接受或正确投票。诀窍如下：

```
(-> (ClassLoader/getSystemResource *file*) clojure.java.io/file .getParent) 
```

这为您提供了目录的绝对路径。不漂亮，但有效。

# c++ - 从网络摄像头以原始分辨率捕获图像

> ID：15875862
> 
> 赞同：1
> 
> 时间：2013-04-08T09:37:51.803
> 
> 标签：c++, windows, winapi, directshow, image-capture

当询问 Google 时，我得到了很多信息，而且 - 这就是我的问题 - 使用 Windows 从网络摄像头捕获图像的许多不同方式。似乎提供这种可能性的编程接口经常发生变化。

所以我的问题是：当我以现代 Windows（XP、Vista、7）为目标时——我应该使用哪种方式来捕获图像？是否有可用的 C/C++ 示例来描述*当前*的执行方式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:34:05.353

一个很好的库类似于opencv，它是用c++编写的。

[http://opencv.org/](http://opencv.org/)

如果您想对捕获的图像进行一些处理，这是一个不错的选择。这方面的 c++ 方面的文档也很棒，所以这也是一个优点。

# javascript - 用于 location.replace() 的 Polyfill

> ID：15875868
> 
> 赞同：2
> 
> 时间：2013-04-08T09:38:04.070
> 
> 标签：javascript, dom, browser-history

在单页应用程序中，我有一个要求，我必须从浏览器历史记录中删除当前页面。我使用的解决方案：

> location.replace(url)**描述表单 MDN 文档：**
> 
> 将当前文档替换为提供的 URL 中的文档。与 assign() 方法的不同之处在于，在使用 replace() 之后，当前页面将不会保存在会话历史记录中，这意味着用户将无法使用后退按钮导航到该页面。

该解决方案适用于大多数浏览器，但在 Blackberry 6.0 的 Webkit 版本上中断。我的问题是我可以编写任何 polyfill 或解决方法来模仿这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:43:06.840

围绕它进行了一些研究，并根据 MDN 中的文档：

> 出于安全原因，History 对象不允许非特权代码访问会话历史记录中其他页面的 URL，但它确实允许它浏览会话历史记录。

鉴于您无法真正从非特权代码访问历史对象，我认为在为不支持 location.replace() 的浏览器创建 polyfill 方面您无能为力。

# c++ - 为什么`CClientDC dc (this);`不能用`CClientDC dc = CClientDC(this);`代替

> ID：15875874
> 
> 赞同：1
> 
> 时间：2013-04-08T09:38:31.377
> 
> 标签：c++, visual-c++, mfc

我是 MFC 编程的新手。这些天我正在使用 Jeff Prosise 的书来学习 MFC 编程。我遇到过：`CClientDC dc (this);`并且我从 CClientDC 类的定义中找到了一个构造函数：`CClientDC(CWnd* pWnd);`但是如果我替换`CClientDC dc (this);`为`CClientDC dc = CClientDC(this);`. 编译器告诉我这是一个错误。我无法理解。我认为`CClientDC dc (this);`是一样的东西`CClientDC dc = CClientDC(this);`。或者换句话说，前者是一种简单的形式。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:41:41.243

```
CClientDC dc = CClientDC(this); 
```

相当于

```
CClientDC dc(CClientDC(this)); 
```

为此，`CClientDC`必须有一个复制或移动构造函数，因为您基本上`dc`是通过从临时对象复制来构造的。

> 如果初始化是 [...] 复制初始化，其中源类型的 cv 非限定版本与 [...] 目标类型相同，则考虑构造函数。[...]调用如此选择的构造函数来初始化对象，初始化表达式或表达式列表作为其参数。如果没有构造函数适用，或者重载决议不明确，则初始化格式错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:55:03.797

CObject（CClientDC 和 CDC 的基类）的复制构造函数和重载赋值运算符显式标记为 private afx.h

```
private:
    CObject(const CObject& objectSrc);              // no implementation
    void operator=(const CObject& objectSrc);       // no implementation 
```

这是显式完成的，因为 DC 对象（和其他基于 CObject 的类）中的许多成员（例如 HDC 成员）需要显式处理才能被多次引用。否则，一个实例的析构函数可能会“关闭”底层句柄。从而使另一个实例处于不确定（坏）状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:57:23.707

为了成功执行 CClientDC dc = CClientDC(this)，需要有一个 CClientDC 的重载构造函数，它以 cwind* 作为参数并返回 CClientDC 。但它不存在。所以编译器给出错误。

# php - 使用 php 更新或编辑 json 文件的麻烦

> ID：15875875
> 
> 赞同：0
> 
> 时间：2013-04-08T09:38:39.103
> 
> 标签：php, javascript, json, jsonp, jquery-callback

**索引.json**

`myjsoncallback([{"ProductID":1,"ProductName":"Chai","UnitPrice":18,"UnitsInStock":39,"Discontinued":false}])`

**php代码：**

```
$string = file_get_contents("../index.json");

$string = utf8_encode($string);

$json_data = json_decode($string, true);

echo $json_data;

$i=count($json_data);

$json_data[$i] = array('ProductID'=>$fileName,'ProductName'=>$name,'ptext'=>$message,'Discontinued'=>false);

$fp = fopen('../index.json', 'a');

fwrite($fp, json_encode($json_data));

fclose($fp); 
```

我想用 jsonpcallback 在 jsone 文件中写入数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:43:06.700

`json_decode()`如果您的文件包含 JSONP 数据，则不能使用。如果你想用 PHP 处理 JSON 数据，你必须删除 JSONP 的回调表单，只对 JSON 对象进行编码/解码。

# paypal - 无法创建帐户 - 无效的电子邮件

> ID：15875876
> 
> 赞同：1
> 
> 时间：2013-04-08T09:38:45.370
> 
> 标签：paypal, paypal-sandbox

我在使用新的 PayPal 开发人员 Beta 中心时遇到问题 - 我之前通过沙盒站点使用经典 API。我已经使用我的用户名和密码登录了开发者中心，但是我无法创建任何沙盒帐户，也无法导入我现有的沙盒帐户。

在这两种情况下，当输入电子邮件地址时，我都会收到一条错误消息，指出该电子邮件地址无效，即使它是一个完全有效的电子邮件地址。

有没有其他人在创建帐户时遇到过问题？

API 文档指出，电子邮件地址甚至不需要是真实的电子邮件地址，因为没有电子邮件在测试环境之外发送，但即使输入我的真实地址也会被拒绝为无效的电子邮件地址！地址是否需要采用特定格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:59:18.713

您的电子邮件地址中有破折号吗？当电子邮件中包含破折号时，电子邮件地址存在一些问题？如果是这样，请尝试使用不带破折号的其他电子邮件。还可以在尝试之前尝试清除 cookie 和缓存。此外，如果您使用 Internet Explorer，您可以尝试使用 Firefox 或 Chrome。使用新的 developer.paypal.com 网站时，这些浏览器的问题较少。

# windows - 批处理脚本未完全运行

> ID：15875880
> 
> 赞同：0
> 
> 时间：2013-04-08T09:38:54.963
> 
> 标签：windows, batch-file, automation

这是我第一次处理批处理文件。我有一个带有 ant 的 java 项目。我已将项目分为两个子项目。我尝试使用批处理文件按顺序构建项目。这是我的 .bat 文件的内容：

```
start cmd
cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java2
ant run

cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java3
ant run 
```

前三行运行正常，但之后没有任何反应。最后两行不起作用。我是否遗漏了什么，或者是否有其他方法可以按顺序运行这些子项目？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:44:17.407

is `ant` a batch file?

If so, try (or try anyway)

```
CALL ant run 
```

OR

```
START "windowname" ant run 
```

where you can add `/wait` to the `START` command to have the batch wait for the first `ant` to finish before proceeding.

see

```
`start /?` 
```

from the prompt for docco.

* * *

(following comment)

Here is your original code:

```
start cmd
cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java2
ant run

cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java3
ant run 
```

What this should have done is:

1.  Start a brand-new CMD window
2.  change to the specified sirectory
3.  Start the executable `ant` with the parameter `run`

Now - I've just downloaded `ANT` and I find that it includes `ANT.BAT` and `ANT.CMD` but NOT `ANT.EXE`.

In your environment, you would have a variable called `PATHEXT` whis is a semicolon-separated list of the valid executable extensions, in order of selection. In all probability, unless you've taken specific action to change it, this will be `PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC`

What this means is that the ANT that will be executed is `ANT.BAT` if you've added its directory to your path (which, I believe, is in the instructions)

So executing the `ANT.BAT` will TRANSFER execution to `ANT.BAT`.

SO:

I see no reason why you are producing a new `CMD` window.

```
cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java2
CALL ant run

cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java3
CALL ant run 
```

should work.

```
cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java2
START /wait "First ANT" ant run

cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java3
START /wait "Second ANT" ant run 
```

should also work.

Note the position of the `/wait` If it follows the `start` then cmd knows it's a `start` parameter. If it follows `ant` then cmd will assume it's an `ant` parameter.

The /wait simply tells CMD to WAIT until the executable is finished before continuing.

This:

```
cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java2
START "First ANT" ant run

cd /d C:\Users\MeUser\Downloads\selenium-grid-1.0.8\examples\java3
START "Second ANT" ant run 
```

should also work, but this time the second ANT instance will be started in parallel with the first (well, milliseconds later)

Note also the `"quoted string"` before the `ant`. The syntax of the START statement is to allow a `"quoted string"` as a window title. The quoted string may be empty `""` if you wish. You can even omit the quoted string altogether EXCEPT if the executable is quoted, in which case the window title is `required`.

# jquery - 识别被点击的动态生成的锚标签并打开显示div内容的对话框

> ID：15875889
> 
> 赞同：1
> 
> 时间：2013-04-08T09:39:22.840
> 
> 标签：jquery, dialog, anchor

我需要显示一个行表，每行都有一个锚点，单击该锚点会根据单击的锚点标签打开一个对话框（div 内容）。由于这些锚点是动态生成的，我需要找到一种方法来识别被单击的锚点标签并打开相应的对话框。

## XHTML 代码如下：

```
<ui:repeat var="vDetailTO" value="#{vAdmBean.displayVDetailTOList}" varStatus="vCounter"> 
 <tr>
   <td align="left">
     <h:outputText value="#{vDetailTO.userId}" />
   </td>
  <td align="left">
  <a id="dialogLink-#{vCounter.index}" href="#" owNumber="#vendorCounter.index}">+</a>
  <div id="aNodeSearch-popupLink-#{vCounter.index}"  title="Node"        
      style="display:none;">
      The content is actually big. So, just typing this text here.
      Note that this is the div tag that needs to open based on the anchor tag clicked
      as the content varies for each anchor tag 
   </div>
   </tr>
  </ui:repeat> 
```

## JS代码

```
 $("#aNodeSearch-popupLink-"+$("#frmNode\\:hdnRecordIndex").val()).click(function() {
       var rowNumber = $(this).attr('rowNumber');
       $("#frmNode\\:hdnRecordIndex").attr("value", rowNumber);
           $("#aNodeSearch-popup-"+rowNumber).dialog("open");
       });

    $("#aNodeSearch-popup-"+$("#frmNode\\:hdnRecordIndex").val()).dialog(
    {
    autoOpen : false,
    modal : false,
    resizable : false,
    height : 500,
    width : 750,
    buttons : {
    "Submit" : function() {
       var selNodes = "";
    var rowNumber = $("#frmNode\\:hdnRecordIndex").val();
    var availNodes = "aNodeAvailListId-" + rowNumber;  

        $('#' + availNodes + ' input:checkbox:checked').each(
                function() {
                    selNodes += $(this).val() + ",";
                });

        $("#frmNode\\:hdnArticleNodeIds").attr("value",
                selNodes);

        frmNode["frmNode:btnRefresh"]
                .click();

        $(this).dialog("close");
    }
    }
       }); 
```

单击第一行中的锚点时，对话框可以正常打开并且能够执行必要的操作。但是，当我单击后续行时，没有任何反应，甚至 Firefox Web 控制台也没有显示问题。但是如果我用 js 硬编码代码

```
 aNodeSearch-popupLink-1.click and 
  aNodeSearch-popupLink-2.click and so on as shown below.. 
```

能够根据需要查看对话框。

```
 $("#aNodeSearch-popupLink-1").click(function() {

$("#aNodeSearch-popup-1").dialog("open");
   });

  $("#aNodeSearch-popup-1").dialog(
  {
     ........   
   }); 
```

关于如何处理识别单击的锚标记并打开其相应对话框的这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:48:09.197

您应该使用[事件委托](https://stackoverflow.com/questions/8110934/)，并在处理程序中识别您的链接：

```
//you should add a common class to your a nodes, if you want to distinguish
//them from other links
$('#myTable').on('click', 'a.specialLink', function(){
    // you can check the anchor's id here :
    var id = this.id;

    // and do whatever you see fit with it
}); 
```

`<a class="specialLink">`使用此模式，您添加到表中的任何新节点都将被自动处理。

# iis - 通过 IIS 6 部署经典的 asp 网站？

> ID：15875891
> 
> 赞同：0
> 
> 时间：2013-04-08T09:39:24.490
> 
> 标签：iis, asp-classic

我有一个经典的 ASP 网站，我必须通过 IIS 6 对其进行配置。操作系统是 Windows Server 2003 Standard Edition SP2。我已将网站内容复制到“C:\Inetpub\WWWRoot”文件夹，并将其设置为 IIS 中的虚拟目录。但是，当我尝试使用以下方式访问该网站时 -

```
http://localhost/mysite/home.asp 
```

它给出了“找不到页面”的错误。但是该页面已经存在。

我可能需要为任何文件夹授予任何特殊权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:00:51.280

好的，最后我整理出来了。

[单击此处查看解决方案/修复](http://dotnetnsqlcorner.blogspot.in/2013/04/fix-page-cannot-be-found-on-classic-asp.html)

# java - Java - 比较字符串

> ID：15875895
> 
> 赞同：0
> 
> 时间：2013-04-08T09:39:45.823
> 
> 标签：java, string, testing, bufferedreader, string-comparison

我正在尝试从缓冲阅读器中检查字符串值是否与浏览器中的用户输入匹配。如果用户输入 localhost:9999/getMusic 数据输出正常，但是我试图确保只有 /getMusic 或 /getMusic= 被传递，而不是给出我制作的 404 错误页面。现在，如果我输入 /getSomething，我只能得到 404。

如果我输入例如 /getMusicc （最后有两个 c），我希望它也给我一个 404，但它不会给我。我意识到它是因为 .contains 方法，但我不知道还能使用什么。基本上我需要与我指定的内容匹配的确切字符串值。我尝试使用 .contentsEqual 没有运气。

```
String line = reader.readLine();
        if(line !=null){
        System.out.println("[CLIENT] " + soc.getInetAddress().getHostName() 
                + " - " + soc.getInetAddress().getHostAddress() + " requesting: " + line);

        //the first line should be: GET /path HTTP/1.1
        if (line.startsWith("GET ")&& (line.endsWith("HTTP/1.0")||line.endsWith("HTTP/1.1"))){
            String path = line;//check this

            OutputStream output = soc.getOutputStream();
//here is my problem below...
            if(path.contains("/getMusic") || path.contains("/getMusic=")){
                String type = "";

                if (path.contains("/getMusic=rap")){
                    type = "Rap";
                } 
```

我应该补充一点，字符串只有几个单词，我要测试的值在所有这些单词的中间。IE GET /getMusic HTTP1.1。只有 /getMusic 应该被测试。

在第一级上运行良好，但是如果我想测试 /getMusic=rap 它不起作用。

```
 if(path.matches(".*/getMusic=?(\\s+.*)?")){
                String type = "";

                if(path.matches(".*/getMusic=rap")){
                    type = "Rap";
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:44:07.203

One easy solution is to use regex to test the end of your string. Something like:

```
If(str.matches(".*/getMusic=?$")) {} 
```

This will test that anything can appear before the phrase '/getMusic', but nothing can appear after!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:43:43.380

代替：

```
if(path.contains("/getMusic") || path.contains("/getMusic=")) 
```

你应该使用：

```
if(path.matches("^.*?/getMusic=?.*$")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:02:53.237

您可以使用

`if(path.matches(".*/getMusic=?(\\s+.*)?"))`

基本上是

.* - 要测试的字符串之前的任何内容
/getMusic - 你知道这是什么
=？- 检查“=”是否可选存在
（\s+.*）？- 如果它可选地包含一个或多个空格 + 空格后面的任何内容

# iphone - 单行的 UIDatePicker

> ID：15875897
> 
> 赞同：-3
> 
> 时间：2013-04-08T09:39:47.173
> 
> 标签：iphone, ios, objective-c, uidatepicker

在我的应用程序中，我需要将 UIDatePicker 视图与单行集成（只需要显示一行，这是一个选择行。UIDatePicker 选择功能与上下滚动日期相同。我不想改变它。）。像这样

![在此处输入图像描述](https://i.stack.imgur.com/OsPJG.png)

可以在 Native UIDatePicker 中使用吗？如果是的话给我一些想法。如果不建议任何自定义日期选择器（在移动到应用商店时应该不会出现任何问题）。指导我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:43:31.390

您可以通过简单地连接到您的设计器来获取一些图像来做到这一点，例如

```
1\. Background
2\. Separator 
```

您所要做的就是创建这样的界面设计，并使用 NSDateFormatter 以所需格式解析当前日期并根据需要放置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:47:10.503

**Don't Do That.**

`UIDatePicker` displays a `UIPickerView` and Unfortunately, size of `UIPickerView` cannot be changed.

**My answer :** Even If you found any Hack ,pleas don't use that code, As It will go against **Human Interface Guidelines** (by making Touch Targets too small).

# sql - 返回包括 NULL 在内的所有值

> ID：15875900
> 
> 赞同：12
> 
> 时间：2013-04-08T09:39:54.943
> 
> 标签：sql, sql-server, database, sql-server-2008

我在 SQL Server 2008 中有两个表，通过执行`JOIN`我想获取所有值，但是即使我需要具有 NULL 记录的字段，我也只能获取记录存在的值。

这是有关`tableA`外观的示例

```
|IPAddress  |DNSRecord|
|192.168.1.1|Test     |
|192.168.0.1|Test1    | 
```

`tableB`存储以下记录

```
|NetworkAddress|SerialNo |
|192.168.1.1   |1Z5A789DS|
|192.168.0.1   |NULL     | 
```

我返回所需字段的查询如下

```
SELECT 
    t1.IPAddress,
    t1.DNSRecord,
    t2.SerialNo,
    t2.IPAddress
FROM tableA t1
JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
WHERE
   IPAddress LIKE '%' +@IPAddress + '%'
   AND SerialNo LIKE '%' +@SerialNo +'%' 
```

这个查询的问题是我得到以下结果

```
|IPAddress  |DNSRecord|SerialNo |
|192.168.1.1|Test     |1Z5A789DS| 
```

我想改为返回以下结果

```
|IPAddress  |DNSRecord|SerialNo |
|192.168.1.1|Test     |1Z5A789DS|
|192.168.0.1|Test1    |NULL     | 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T09:43:01.797

只需为 SerialNo 为 NULL 的情况添加一个条件。以您的实际情况，本案不予选择

```
SELECT t1.IPAddress,
t1.DNSRecord,
t2.SerialNo,
t2.IPAddress
FROM tableA t1
JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
WHERE
IPAddress LIKE '%' +@IPAddress + '%'
AND ( SerialNo LIKE '%' +@SerialNo +'%' OR SerialNo is NULL) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T09:50:33.490

一种选择：

```
SELECT t1.IPAddress,
t1.DNSRecord,
t2.SerialNo,
t2.IPAddress
FROM tableA t1
JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
WHERE
IPAddress LIKE '%' +@IPAddress + '%'
AND coalesce(SerialNo, @SerialNo) LIKE '%' +@SerialNo +'%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:42:27.730

尝试改用这个：

```
SELECT t1.IPAddress,
t1.DNSRecord,
t2.SerialNo,
t2.IPAddress
FROM tableA t1
FULL OUTER JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
WHERE
IPAddress LIKE '%' +@IPAddress + '%'
AND SerialNo LIKE '%' +@SerialNo +'%' 
```

请参阅：[外连接](http://msdn.microsoft.com/en-au/library/ms187518%28v=sql.105%29.aspx)

干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T09:44:09.850

试试这个

```
SELECT t1.IPAddress,
t1.DNSRecord,
t2.SerialNo,
t2.IPAddress
FROM tableA t1
JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
WHERE
IPAddress LIKE '%' +@IPAddress + '%' 
AND (SerialNo LIKE '%' +@SerialNo +'%' OR SerialNo IS NULL) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-12T14:45:51.033

你可以试试这个`INCLUDE_NULL_VALUES`，当我需要空值时，我总是在我的查询或过程中使用它

```
 SELECT 
        t1.IPAddress,
        t1.DNSRecord,
        t2.SerialNo,
        t2.IPAddress
    FROM tableA t1
    JOIN tableB t2 ON t1.IPAddress = t2.NetworkAddress
    WHERE
       IPAddress LIKE '%' +@IPAddress + '%'
       AND SerialNo LIKE '%' +@SerialNo +'%'
    INCLUDE_NULL_VALUES 
```

# cakephp - cakephp 和 XE 货币转换器？

> ID：15875902
> 
> 赞同：0
> 
> 时间：2013-04-08T09:40:00.143
> 
> 标签：cakephp, iframe, converter, currency

我想在我的网站中集成 XE 货币转换器，但希望在我的网站相同页面上输出而不被重定向到 XE 网站，如何实现？与 iframe？请问你能给我举个例子吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T09:14:27.917

您实际上可以向 xe.com 提交查询并使用 curl 解析其中的数据

```
 <?php

    $url = "http://www.xe.com/currencyconverter/convert/?Amount=1&From=USD&To=PHP";

    $ch = curl_init(); // Initialize a CURL session.
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // Return Page contents.
    curl_setopt($ch, CURLOPT_URL, $url); // Pass URL as parameter.

    $data = curl_exec($ch); // grab URL and pass it to the variable.
    curl_close($ch); // close curl resource, and free up system resources.

    $dom = new DOMDocument();
    @$dom->loadHTML($data);

    $xpath = new DOMXPath($dom);

    $tableRows = $xpath->query('//table//tr');

    $details = array();

    foreach ($tableRows as $row) {
            // fetch all 'tds' inside this 'tr'
            $td = $xpath->query('td', $row);

            if ($td->length == 3  ):

                foreach($td as $key => $val){

                    if($key==0 Or $key ==2) {

                        $details[] = preg_replace('/[^a-zA-Z0-9, \'\.:]*/i', '',$val->nodeValue);

                    }

                }

            endif;
    }

     print "<pre>";
     print_r($details);
     print "</pre>";

    ?> 
```

访问： http: [//myphptroubles.blogspot.com/2013/09/convert-currency-using-xecom-via-curl.html](http://myphptroubles.blogspot.com/2013/09/convert-currency-using-xecom-via-curl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:02:23.807

您可以从他们的页面订购数据提要，如下所示： [http ://www.xe.com/datafeed/](http://www.xe.com/datafeed/)

有了它，您可以通过 PHP/curl 等检索货币并像普通数据一样使用它。

# iphone - NSString 转 HTML

> ID：15875903
> 
> 赞同：5
> 
> 时间：2013-04-08T09:40:05.383
> 
> 标签：iphone, html, ios, objective-c, uiwebview

我在 UIWebview 中显示 NSString 以显示带有自定义笑脸（图像）的文本，但我遇到了麻烦，因为 UIWebview 无法检测到特殊字符，如 \n、\r、\t、空格、&、<、> 和更多的字符串。如何将 NSString 转换为 HTML 字符串以加载到 UIWebView 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:43:35.523

没有内置的解决方案。您必须对 HTML 实体进行编码。[有一个名为NSString-HTML](https://github.com/Koolistov/NSString-HTML#readme)的开源项目可能适合您的需求。

[这里](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.h)还有一个很好的 NSString 类别，它是基于[Google 的 Toolbox 的](http://code.google.com/p/google-toolbox-for-mac/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T23:40:06.237

实际上有一个内置的解决方案......在 NSAttributedString 中。这是 NSString 的一个类别，它使它变得容易：

```
@interface NSString (HTMLString)
- (NSString *)HTMLString;
@end

@implementation NSString (HTMLString)
- (NSString *)HTMLString {
    NSDictionary * const exportParams = @{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType};
    NSAttributedString *attributed = [[NSAttributedString alloc] initWithString:self];
    NSData *htmlData = [attributed dataFromRange:NSMakeRange(0, attributed.length) documentAttributes:exportParams error:nil];
    return [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:09:46.673

您正在寻找 ICU 转型。此功能包含在 CFString API 函数 CFStringTransform() 中 使用转换选项 Any-Hex 您可能希望通过创建仅包含需要转义的字形的 NSCharacterSet 来进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:16:15.260

您是否尝试过将 HTML 字符串转换为 UTF8 格式，然后将其加载到 Web 视图中？

```
[webView loadData:[html dataUsingEncoding:NSUTF8StringEncoding]
                     MIMEType:@\"text/html\"
             textEncodingName:@\"UTF-8\"
                      baseURL:nil]; 
```

# netbeans - NB 7.3 中的调试器无法正常工作

> ID：15875904
> 
> 赞同：0
> 
> 时间：2013-04-08T09:40:07.660
> 
> 标签：netbeans, netbeans-7

我从 NB 7.2.1 更改为 7.3，我的调试器停止工作。当我尝试运行调试器时，它说：

```
Attaching to localhost:8787
Connection refused. 
```

已尝试在防火墙中为该端口添加例外。没有改变任何东西。

有人知道这可能是什么原因吗？

# c# - 接口声明为 IEnumerable 但不可用

> ID：15875905
> 
> 赞同：3
> 
> 时间：2013-04-08T09:40:17.463
> 
> 标签：c#, casting, ienumerable

我有一个 IEnumerable 接口：

```
public interface IBrands: IEnumerable<Ibrand> 
```

及其实例：

```
public class Brands: IBrands
{
    public Brands()
    {
        _brandsDic= new Dictionary<int, IBrand>();
    }
} 
```

当我使用 Linq 在另一个类中检索一些数据时，我必须返回一些 IEnumerable：

```
public IEnumerable<IBrand> GetCarsBrands()
{
    return _carsDic.SelectMany(r => r.Value.Brands).ToList();
} 
```

...但想直接返回一个 IBrands。你知道怎么做吗？如果我尝试这样做，它会抱怨 Ibrands 在 IEnumerable 中的铸造。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:46:59.250

The IBrands is an `IEnumerable<IBrand>`, but not the other way around. So you can't return an `IEnumerable<IBrand>` as IBrands.

Depending of what Brands actually represents, you could create another instance of Brands.

```
return new Brands(_carsDic.Values); 
```

# javascript - 当我播放 20 次或更多次后，我在 phonegap 中的 javascript 上播放连续媒体声音时，声音停止

> ID：15875908
> 
> 赞同：0
> 
> 时间：2013-04-08T09:40:30.450
> 
> 标签：javascript, html, cordova

在播放音频媒体时，phonegap 或 javascript 是否有任何限制？感谢您的提前答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:46:28.857

活动媒体对象的数量是有限制的，所以不要忘记在创建另一个对象之前释放该对象。

# msp430 - 最小化 Contiki-OS 中的代码

> ID：15875909
> 
> 赞同：2
> 
> 时间：2013-04-08T09:40:34.327
> 
> 标签：msp430, contiki

从 Contiki 端口[Thingsquare Mist](http://thingsquare.com/mist/)为[EXP430 板上](http://processors.wiki.ti.com/index.php/MSP-EXP430F5438_Experimenter_Board)的 MSP430 编译示例代码时，我得到

```
/usr/lib/gcc/msp430/4.5.3/../../../../msp430/bin/ld: hello-world.exp5438 section `.text' will not fit in region `rom' 
/usr/lib/gcc/msp430/4.5.3/../../../../msp430/bin/ld: section .vectors loaded at [0000ff80,0000ffff] overlaps section .text loaded at [00005c00,000106df] 
/usr/lib/gcc/msp430/4.5.3/../../../../msp430/bin/ld: region `rom' overflowed by 2090 bytes collect2: ld returned 1 exit status 
rm hello-world.co obj_exp5438/contiki-exp5438-main.o Process returned error code 2 make: *** [hello-world.exp5438] Error 1 
```

这个例子也发生了这种情况`blink`，甚至更多的字节溢出。如何设置优化或删除未使用的组件，以便我可以开始使用基本示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:31:13.627

通常，平台的配置在以下位置完成：

```
contiki/platform/econotag/contiki-conf.h 
```

（将 econotag 替换为您的目标）

您可以启用或禁用许多设置。

至于让你的例子工作的具体配置......我不知道，因为我对那个平台没有任何经验。（或对 Mist 有很多经验）。

# java - 在登录表单中使用带有 Spring 安全性的 MySql 数据库

> ID：15875912
> 
> 赞同：0
> 
> 时间：2013-04-08T09:40:55.067
> 
> 标签：java, mysql, spring-mvc, spring-security

我正在使用 Spring MVC 开发登录表单。我使用 Spring 安全登录，登录名和密码与“ROLE_USER”一起存储在 MySql 数据库中。我导入了所有必要的库（spring security、spring JDBC、mysql connector java ......）但是当我在服务器上运行应用程序时会引发许多异常。

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0' defined in ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [org.springframework.security.provisioning.JdbcUserDetailsManager] for bean with name 'org.springframework.security.provisioning.JdbcUserDetailsManager#0' defined in null: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/dao/support/DaoSupport
Related cause: org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [org.springframework.security.provisioning.JdbcUserDetailsManager] for bean with name 'org.springframework.security.provisioning.JdbcUserDetailsManager#0' defined in null: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/dao/support/DaoSupport
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [org.springframework.security.provisioning.JdbcUserDetailsManager] for bean with name 'org.springframework.security.provisioning.JdbcUserDetailsManager#0' defined in null: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/dao/support/DaoSupport
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1269)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:581)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1335)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:356)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:335)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:322)
    at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1174)
    at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:75)
    at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:399)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    ... 21 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/dao/support/DaoSupport
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:260)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:416)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1258)
    ... 37 more 
```

这是我的文件：

弹簧数据库.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">

        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/mydb" />
        <property name="username" value="root" />
        <property name="password" value="" />
    </bean>

</beans> 
```

Spring-security.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.1.xsd

http://www.springframework.org/schema/security

http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
        <intercept-url pattern="/basics*" access="ROLE_USER" />
        <form-login login-page="/login" default-target-url="/basics"
            authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
    </http>
 <authentication-manager> 
        <authentication-provider> 
            <jdbc-user-service data-source-ref="dataSource"

                users-by-username-query="
                    select username,password, enabled 
                    from users where USERNAME=?" 

                authorities-by-username-query="
                    select u.username, ur.authority from users u, user_roles ur 
                    where u.user_id = ur.user_id and u.username =?  " 

            />
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

我的问题的解决方案是什么？谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:52:46.247

添加`spring-tx-XXX.jar`到您的类路径。

# php - 使用php导入excel文件而不更改为csv格式

> ID：15875920
> 
> 赞同：0
> 
> 时间：2013-04-08T09:41:19.257
> 
> 标签：php, mysql, excel, phpmyadmin

我想将 excel 数据导入 phpmyadmin 而不将其更改为 csv 格式。是否有任何 php 代码可以执行此操作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:25:03.837

这些是一些 PHP 库，您可以使用它们读取 Excel 文件并将其插入 MySQL：

*   [`Php-Excel`](https://code.google.com/p/php-excel/)
*   [`PhpExcel`](http://phpexcel.codeplex.com/)
*   [`Php-Excel-Reader`](https://code.google.com/p/php-excel-reader/)

文档适用于所有这些。

# javascript - 如何检测外部javascript是否已加载？

> ID：15875921
> 
> 赞同：1
> 
> 时间：2013-04-08T09:41:19.550
> 
> 标签：javascript

我们如何通过我的应用程序知道用户是否阻止了任何未在我的服务器上分配的外部 javascript，即在我的网站上 jquery 正在从 jquery.org 加载，如果用户阻止了该网站，那么我如何向该用户显示消息允许来自 jquery.org 的脚本。

当我阻止 stackoverflow 向我展示时，我发现这些东西在 stackoverflow.com 的网站上

> “堆栈溢出需要来自另一个域的外部 JavaScript，它被阻止或无法加载。”

消息，所以我的问题是如何才能知道是否成功加载了外部脚本？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:56:59.843

除了答案，`<script>`元素有`onload`和`onerror`事件，还有许多其他元素。[这是](http://www.quirksmode.org/dom/events/error.html) 有关浏览器兼容性的信息，以及有关如何使其在旧 IE 中工作[的问题。](https://stackoverflow.com/questions/6761708/what-browsers-fully-support-script-tag-onerror-and-when-is-it-fired)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:45:54.200

Simplest solution: Put some code *after* the external script which tests whether the symbol it introduces (e.g. `jQuery`) exists.

```
<script src="url-to-jquery"></script>
<script>
    if (!window.jQuery) {
        alert('jQuery could not be loaded');
    }
</script> 
```

But that could become tedious if you have many external references. In that case, you might want to build upon a resource loader, such as [https://github.com/cujojs/curl](https://github.com/cujojs/curl).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:48:53.163

您可以检查`typeof`外部资源中定义的任何函数或变量。

如果站点需要`jQuery`并且它是从外部资源加载的，只需运行以下检查：

```
if (typeof jQuery === "undefined"){
  console.log("jQuery is not defined");
} 
```

在第一次使用 jQuery 之前进行检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-15T08:19:31.867

示例代码：

```
<script id="webfont-garamond-fallback" src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js" defer></script>
<script>
var webfont = document.querySelector('#webfont-garamond-fallback');
if (webfont !== null) {
  webfont.addEventListener('load', function () {
    WebFont.load({
      google: {
        families: ['EB Garamond:400,400italic']
      }
    });
  });
}
</script> 
```

应该适用于所有现代浏览器并且 >= IE8

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T09:46:04.317

Perform something with your external js. For example let your scripts add a specific class to the body:

```
<body class="js-file-1-loaded js-file-2-loaded ..."> 
```

With that you can always check weather something has been loaded or not.

# php - PostgreSql PHP 查询 #1：SQLSTATE[42601]：语法错误：

> ID：15875928
> 
> 赞同：0
> 
> 时间：2013-04-08T09:41:38.790
> 
> 标签：php, postgresql, search

我尝试从我设置艺术家的专辑中实现搜索。我从表单中获取变量并进行查询。成功地我从表格中得到了变量。

```
$words = $_REQUEST['SQLfield'];
$tempquery =  "SELECT * FROM album WHERE to_tsvector(artist) @@ to_tsquery('$words')";
do_sql($tempquery); 
```

当我搜索例如 Jimi Hendrix 时，结果是：

```
query #1: SQLSTATE[42601]: Syntax error: 7 ERROR: syntax error in tsquery: "Jimi Hendrix " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:58:02.803

我没有在 PostgreSQL 中使用全文搜索，但在快速扫描[文档](http://www.postgresql.org/docs/9.1/static/functions-textsearch.html)后，我认为您应该使用`plainto_tsquery`function 而不是`to_tsquery`，因为`to_tsquery`预计`'jimi & hendrix'`何时`plainto_tsquery`会接受诸如`'Jimi Hendrix'`.

# c# - 在静态类中为所有视图或在具体类中保存上下文？

> ID：15875932
> 
> 赞同：1
> 
> 时间：2013-04-08T09:41:46.407
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我正在使用实体框架开发一个 asp.net MVC4 应用程序。

我应该将我的实体的上下文保存在一个静态类中，以便只有一个点来创建我的上下文，还是应该在每个控制器中创建上下文？

我必须自己调用 Dispose() 还是从 GC 安全地完成（就像这里的第二个答案中所说的那样：[是否应该将实体框架上下文放入 Using 语句？](https://stackoverflow.com/questions/824330/should-entity-framework-context-be-put-into-using-statement)）。

如果我决定使用静态类，是否有一个安全点来处理上下文变量（“应用程序的结尾”）？

我的静态类的示例：

```
public static class ApplicationHelper
{
    static ApplicationHelper()
    {
        Db = new ApplicationEntities();
    }

    internal static readonly ApplicationEntities Db;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:45:55.060

上下文不被认为是线程安全的，因此将它放在静态变量中可能是个坏主意。此外，GC 会在您的上下文中调用 dispose，当它想要时，在您可能所有连接都用完之后的某个遥远的地方。换句话说，显式调用 Dispose。这通常使用`using()`语句来完成。

总而言之，您应该使用 DI 容器来注入您的上下文并以这种方式管理连接的生命周期，实现一个工作单元模式，该模式将通过存储库模式管理上下文生命周期，或者显式打开和关闭您的连接在控制器的操作方法中。

```
public ActionResult SomeAction()
{
 using( var db = new ApplicationEntities() )
 {
  //todo: use db
 }
 return View();
} 
```

# php - 加载文字，而不是字母 [WordPress/PHP]

> ID：15875933
> 
> 赞同：1
> 
> 时间：2013-04-08T09:41:53.277
> 
> 标签：php, string, wordpress, function, content-management-system

我希望有人可以帮助我。

我正在一个安装了 Wordpress 的网站上工作。在首页我有一个小 div，我想用 pageID 从另一个页面输出前 10 个单词。目前它几乎可以工作，但不是加载 10 个单词，而是加载 10 个字母。

**示例：**
*而不是：*你好，我的名字是 Erwin，这是一个测试
*它加载：*你好我的名字

我究竟做错了什么？

**我在functions.php中使用以下php：**

```
if(!function_exists('getPageContent'))
{
    function getPageContent($pageId,$num_words)
    {
        if(!is_numeric($pageId))
        {
            return;
        }
        global $wpdb;
        $nsquery = 'SELECT DISTINCT * FROM ' . $wpdb->posts .
        ' WHERE ' . $wpdb->posts . '.ID=' . $pageId;
        $post_data = $wpdb->get_results($nsquery);
        if(!empty($post_data))
        {
            foreach($post_data as $post)
            {
                $text_out=nl2br($post->post_content);
                $text_out=str_replace(']]>', ']]&gt;', $text_out);
                $text_out = strip_tags($text_out);
                return substr($text_out,0,$num_words);

            }
        }
    }} 
```

**我使用以下字符串加载内容：（**
*其中 89 是我的页面 ID）*

```
echo getPageContent(89,10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:47:53.067

这将提取字符串的前 10 个单词

```
$text_out = "Hello my name is Erwin and this is a test and this is another test";
$num_words = 10;
echo implode(' ', array_slice(explode(' ', $text_out), 0, $num_words)); 
```

**输出**

```
Hello my name is Erwin and this is a test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:51:23.193

wordpress有一个功能：

```
the_excerpt(); 
```

正是这样做的。它显示...文章或页面的摘录以及末尾的链接。您可以使用`the_excerpt($length)`稍微修改函数的参数来自定义长度。

资料来源：[http ://codex.wordpress.org/Function_Reference/the_excerpt](http://codex.wordpress.org/Function_Reference/the_excerpt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:22:02.803

[如何选择句子的前 10 个单词？](https://stackoverflow.com/questions/5956610/how-to-select-first-10-words-of-a-sentence)- 同样的问题。只需使用`implode(' ', array_slice(explode(' ', $text_out), 0, $num_words));`而不是`substr($text_out,0,$num_words);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:44:20.863

这里`$num_words = 10`

这意味着`substr`从字符中断开字符串`0 to 10`

如果你想要整个字符串，那么你必须回显

```
echo getPageContent(89,32); 
```

# java - 将一种格式的字符串日期转换为另一种格式的日期对象

> ID：15875934
> 
> 赞同：0
> 
> 时间：2013-04-08T09:41:56.950
> 
> 标签：java, string, date

我有一个输入日期作为字符串，格式为**dd/MM/yyyy**

现在我想将其转换为格式为**yyyy-MM-dd 的Date 对象**

目前我正在做

```
SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat formatter2 = new SimpleDateFormat("yyyy-MM-dd");
Date dateObject = null;
  try {
    String date2 = formatter2.format(formatter.parse(date));
    dateObject = formatter2.parse(date2);
  } 
```

输入是：“04/02/2013”

但是我的日期对象是 --> Mon Feb 04 00:00:00 IST 2013

期望的输出是：2013-02-04（不是字符串，而是日期对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:43:59.017

日期没有特定的输出格式。当您解析第一个日期时，这就是日期。只需存储它，当您需要将其输出为所需格式时，请使用第二个`SimpleDateFormat`.

**编辑**：

通过“存储它”，我的意思是保留对它的引用，直到您需要它以所需的字符串格式表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:43:59.140

您已经在`date2`. 您无需再次解析。

```
String date2 = formatter2.format(formatter.parse(date));
//dateObject = formatter2.parse(date2); // Not needed

System.out.println(date2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:49:03.533

我认为你在这里提出了错误的问题。如评论中所述，您需要此字符串格式来查询数据库，因此，由于 JDBC 与 java.sql.Date 对象一起使用，因此请严格遵守并将您的 java.util.Date 对象转换为 JDBC 托管类型并直接使用它（不用担心格式）。

尝试这样的事情：

```
String stmt = "select field from table where dateColumn = ?";
PreparedStatement st = connection.prepareStatement(stmt);
st.setDate(1, new java.sql.Date (yourJavaUtilDateObj);
ResultSet rs = st.executeQuery(); 
```

应该适用于那里的每个 JDBC 驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:54:10.520

Your [Date](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html) object is correct. Date contains information about the date.

You already have the string with the date with your desired mask:

```
String date2 = formatter2.format(formatter.parse(date)); 
```

try:

```
System.out.println(date2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T03:10:33.257

这对我有用：

```
public Timestamp convertStringToTimeStamp(String dateinString){
        final String OLD_FORMAT = "dd/mm/yyyy";
        final String NEW_FORMAT = "yyyy-mm-dd";

        String newDateString;

        SimpleDateFormat sdf = new SimpleDateFormat(OLD_FORMAT);
        Date d = null;
        try {
            d = sdf.parse(dateinString);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        sdf.applyPattern(NEW_FORMAT);
        newDateString = sdf.format(d);

        return Timestamp.valueOf(newDateString+ " 00:00:00.00");
    } 
```

# c# - 不使用 AJAX AutoCompleteExtender 和 Web 服务的 ASP.Net 中的自动完成文本框

> ID：15875937
> 
> 赞同：3
> 
> 时间：2013-04-08T09:41:57.897
> 
> 标签：c#, jquery, asp.net, .net, ajax

任何关于`AutoComplete TextBox`在 ASP.Net 中实现从数据库获取数据的示例，并且不使用`AutoCompleteExtender`Ajax 工具包，也不使用 Web/Wcf 服务来请求数据。

例如，使用`jQuery`and `PHP`，我可以只使用 $.ajax 函数，传递一个 url，PHP 只返回一个`JSON`对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:02:09.447

如果您知道如何在 PHP 中执行此操作，则可以在 asp.net 中使用相同的方法。
您不需要使用网络服务。只需一个 PageMethod 就足够了。

参考：[使用jQuery直接调用ASP.NET AJAX页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

既然你提到了jQuery，这个函数可以根据需要返回数据jquery-autocompelete。

但是，一旦您收到自动完成的建议列表，您也可以自己编写 javascript 来展示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:47:52.083

不使用任何`extender`或非常困难`jquery-autocompelete`
此外，您将需要创建一些服务器端方法，该方法将`json`在查询数据库后从服务器端方法返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:10:08.797

您可以使用 jQuery-autocomplete 并从服务器获取数据，您可以使用通用处理程序 (.ashx) 从服务器获取 JSON 数据。在源中给出 .ashx 页面的路径，并在处理程序中将 JSON 数据写入响应流。

[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

[http://johnnycoder.com/blog/2008/12/16/httphandler-json-data/](http://johnnycoder.com/blog/2008/12/16/httphandler-json-data/)

# ruby - 在没有框架的情况下使用 Ruby 创建 Web 应用程序

> ID：15875941
> 
> 赞同：11
> 
> 时间：2013-04-08T09:42:22.877
> 
> 标签：ruby, web-applications

我想用 Ruby 构建一个 Web 应用程序，但我不知道是否可以在不使用框架的情况下这样做。我不知道为什么大多数 Ruby 开发人员使用像 Rails 或 Sinatra 这样的框架。

如何设置不基于现有框架的 Ruby Web 应用程序？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-08T13:15:40.217

> 是否可以在不使用框架的情况下用 ruby​​ 制作 Web 应用程序？

**太长; 没读**

是的，这绝对是可能的。大多数 Ruby 框架都是在其他中间件库（例如 Web 服务器接口）之上使用纯 Ruby 构建的。

**红宝石和网络**

Ruby 是一种通用语言；因此它不是*专门*为 Web 开发而设计的。例如，PHP 是一种用于创建 Web 应用程序的语言。在 Ruby 中，您将*需要*一些库来正确处理 HTTP 标头和 Web 特定元素。

例如，在 Python（另一种通用编程语言）中，我们有一个标准的 Web 服务器接口规范，称为[WSGI](http://wsgi.readthedocs.org/en/latest/)（Web 服务器网关接口）。每个实现 WSGI 规范的服务器都称为*WSGI-compatible*。并且任何 WSGI 兼容的服务器都可以以相同的方式运行相同的 WSGI Python 脚本。

为什么我在谈到 Ruby 时要告诉你这个？*因为 Ruby 与 WSGI 有一个非常相似的概念，但*可能的例外是它还不是一个标准。它的名字是[Rack](http://rack.github.io)，它提供了一个接口来处理你不想自己处理的常见的低级 HTTP/Server 东西，这样我们就可以*像使用 PHP 一样*使用 Ruby 。

**Ruby、Rack 和 Apache**

让我们举一个现实生活中的例子：Apache。Apache 是最常见的 Web 服务器之一。PHP 如何与 Apache 一起工作？与`mod_php`. Python WSGI 兼容的应用程序如何与 Apache 一起工作？与`mod_wsgi`. Ruby Rack 兼容的应用程序如何与 Apache 一起工作？与`mod_rack`. 你能看到这里的模式吗？Web 服务器需要知道如何正确地将您的应用程序链接到请求/响应 Web 上下文。

**机架示例**

在这个抽象的演讲中不做进一步讨论，让我们专注于一个例子：

```
class HelloWorld
    def call(env)
        [200, {"Content-Type" => "text/plain"}, ["Hello world!"]]
    end
end 
```

此示例由 Rack 网站提供，它解释了 Rack 兼容脚本如何运行：

*   您安装`rack`在您的网络服务器上（您会在 Google 上找到大量针对您的网络服务器的教程）
*   `config.ru`您在根文件夹中创建一个文件（`.ru`主要*是*Ruby）
*   你粘贴那个脚本
*   你用`run`方法运行它

*等等*，我们有一个 Web 服务器界面。哈希包含来自当前请求的`env`环境变量，您返回的数组包含 3 个组件：

1.  **响应状态**。200 代表“一切正常”。404 代表“未找到”。等等。
2.  **HTTP 标头**。这些描述了响应主体。它的长度。它的内容。等等。
3.  **响应体**。这包含应用程序的实际输出。HTML、JSON、XML、HXML、简单文本……随便什么。

例如，在 PHP 中，所有这些都是自动完成的。当您执行`echo "Hello";`此操作时，PHP 解释器会为您生成响应状态和标头。

**关于替代品的说明**

您可以随心所欲地挖掘这个领域，但下面列出的大多数技术要么已被弃用，要么社区强烈反对使用它们。

在网络的最初几年，有一个*通用*接口用于在服务器端运行 Perl、Python、Ruby、C 脚本：[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)或通用网关接口。这是一个几乎可以被任何编程语言使用的接口，但它通常被认为很慢。

一些人认为通过使其更快来恢复这个界面。从那，你猜怎么着，出现了[FCGI](http://en.wikipedia.org/wiki/FastCGI)或 FastCGI。这项技术的使用频率超出了您的想象。一些 PHP 脚本有时会转换为 FCGI 脚本，以使它们运行得更快。我不想进一步讨论这个话题，因为那里还有很多其他参考资料。

最后，您可以创建自己的 Web 服务器。实际上，您不必为了使用 Ruby 而使用 Ruby 创建 Web 服务器。从理论上讲，Web 服务器很简单：

1.  监听一个端口（大部分时间是 80）直到有请求进来
2.  处理请求
3.  输出响应
4.  转到 1

在现实生活环境中，您不希望自己为生产网站实现 Web 服务器。所以我绝对不鼓励这样做。

> 如果是，为什么大多数 ruby​​ Web 开发人员都选择框架？

**专业人士**

框架的目的是使您的开发快速。如果你有最后期限，你不想处理低级的东西，你会喜欢一个`framework build -blog`命令，它可以为你管理尽可能多的无聊的事情，让你专注于真正的应用程序设计。

框架通常是开源的，并且拥有庞大的社区，这有助于使框架更快地变得更好。您可以很容易地理解，10.000 对眼睛看到的代码中的错误比您自己编写的代码要快 10.000 倍。

**缺点**

有些框架可能对您的需求来说太大了，而另一些框架可能太小了。在 Ruby 上下文中，有巨大的 Rails 和它的小兄弟 Sinatra。一个很大，另一个很小，真的不碍事。有时你想要介于两者之间的东西。

框架通常非常通用。这意味着您必须配置对您的上下文来说似乎很明显的东西。

框架包含的代码比您需要的多。这是一个你可以自己推断的事实。这通常意味着*更多的复杂性*和*更多的错误*（尽管这被他们周围的庞大社区所弥补）。

# python - Python：“导入”输入参数

> ID：15875946
> 
> 赞同：1
> 
> 时间：2013-04-08T09:42:36.040
> 
> 标签：python, input, arguments, argparse

我有两个 python 脚本`A`和`B`，都有一个 main 和不同的输入参数（我使用`argparse`）。我通常使用以下方式启动它们：

```
$ python A.py --paramA1 valA1 --paramA2 valA2
$ python B.py --paramB1 valB1 --paramB2 valB2 
```

我希望能够`B`从内部调用`A`并在启动时指定`B`'s 参数`A`。简而言之，我想`A`用`A`'s 参数和`B`'s 参数调用。从外面看它应该是这样的：

```
$ python A.py --paramA1 valA1 --paramA2 valA2 --paramB1 valB1 --paramB2 valB2 
```

有没有比将代码复制粘贴到然后调用它们更优雅`B`的方法呢？`argparse``A``B`

**编辑**：为了简化事情，这里有一些示例代码：

一个.py：

```
import argparse
def main():
    parser = argparse.ArgumentParser(description="Args for A.py")
    parser.add_argument("--param1A", type=int)
    parser.add_argument("--param2A", type=int)
    args = parser.parse_args()
    valA1 = args.param1A
    valA2 = args.param2A
    ...
    return 0 
```

B.py：

```
import argparse
def main():
    parser = argparse.ArgumentParser(description="Args for B.py")
    parser.add_argument("--param1B", type=int)
    parser.add_argument("--param2B", type=int)
    args = parser.parse_args()
    valA1 = args.param1B
    valA2 = args.param2B
    ...
    return 0 
```

建议的 究竟是什么`C.py`，包括两者的论点`A.py`和`B.py`外观？`A.py`那时会是什么样`B.py`子？

***编辑2：***我忘了提到`B.py`必须在 中创建`A.py`，因此执行顺序是`A`然后`B`，并且`A`必须能够将参数传递给`B`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:47:20.630

您可以创建一个`C.py`包含通用`argparse`逻辑并由 A 和 B 导入的模块。

从 A 调用 B 时，您还可以将已解析的参数传递给 B。我的意思是，A 和 B 都应该有一个类似`main`函数的东西，它接受已经解析的参数，因此不必进行两次解析。

py

```
import argparse

def create_parser():
    parser = argparse.ArgumentParser(description="Args for B.py")
    parser.add_argument("--param1B", type=int)
    parser.add_argument("--param2B", type=int)
    return parser 
```

py

```
import argparse
import sys
import C

def main(args):
    valB1 = args.param1B
    valB2 = args.param2B
    # do stuff
    return 0

if __name__ == '__main__':
    parser = C.create_parser()
    args = parser.parse_args()
    sys.exit(main(args)) 
```

py

```
import argparse
import sys
import C
import B

def main(args):
    valA1 = args.param1A
    valA2 = args.param2A
    # do stuff
    return 0

if __name__ == '__main__':
    parser = C.create_parser()
    parser.add_argument("--param1A", type=int)
    parser.add_argument("--param2A", type=int)
    args = parser.parse_args()
    B.main(args)
    sys.exit(main(args)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:43:56.017

我认为@Ioan Alexandru Cucu 描述的内容类似于以下内容：

```
import argparse

class A():
    __init__(self, param1A, param2A, param1B=None, param2B=None):
        if(param1B and param2B):
            myB = B(param1B, param2B)
        #Do processing here ...
        return 0

class B():
    __init__(self, param1B, param2B):
        #Do processing here ...
        return 0

if(__name__ == '__main__'):
    parser = argparse.ArgumentParser(description="Args for A and/or B")

    parser.add_argument("--param1A", type=int)
    parser.add_argument("--param2A", type=int)

    parser.add_argument("--param1B", type=int)
    parser.add_argument("--param2B", type=int)

    args = parser.parse_args()

    if(args.param1A and args.param2A and args.param1B and args.param2B):
        A(args.param1A, args.param2A, args.param1B, args.param2B)
    if(args.param1A and args.param2A):
        A(args.param1A, args.param2A)
    elif(args.param1B and args.param2B):
        B(args.param1B, args.param2B) 
```

您可以在多个模块中包含不同的类，而不是在一个模块中包含多个类。

# php - php批量视频上传到ftp脚本

> ID：15875948
> 
> 赞同：-1
> 
> 时间：2013-04-08T09:42:43.433
> 
> 标签：php

在我的应用程序中，我每天必须将 100 多个视频上传到 ftp 文件夹，现在我正在从 filezilla ftp 客户端手动执行此操作。 **请建议我使用 php 来执行此操作的任何自动化脚本。**

欢迎您提出建议。

最好的问候， 巴库尔·达莫达里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:47:19.297

如果您使用虚拟主机的c面板（控制面板）会更好。

在服务器上上传视频是一种高效快捷的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:02:25.250

您需要在您的计算机上安装 php（如果您想使用 php 脚本）

您可以使用或您喜欢的目录迭代器扫描`glob()`目录，过滤要上传到数组中的文件，并使用 php 的 curl 函数上传它：

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

如果您希望它完全自动化，您可以设置任务调度程序（如果您在 Windows 上，或者如果您在另一个操作系统上，则使用类似工具）以从 php 的命令行运行脚本。

# php - Web 应用程序不时返回空响应

> ID：15875949
> 
> 赞同：0
> 
> 时间：2013-04-08T09:42:44.433
> 
> 标签：php, apache, http

我的 Web 应用程序有时会返回一个空响应。细节：

*   这是一个经过良好测试的 Web 应用程序，所以我确信这是环境级别的问题，而不是代码级别的问题。似乎应用程序中的任何脚本都可以产生这个结果，并且没有明显的规则。同一个请求可以返回一次数据，一秒钟后返回一个空响应。

*   日志：Apache 访问日志显示：

    127.0.0.1 - - [21/Apr/2013:14:40:59 +0300] "GET /path/to/app.php?modeofform=update HTTP/1.1" 200 - 我从中了解到 apache 知道它没有返回数据

Apache 错误日志显示没有问题，与 php 错误日志相同

*   **当我使用调试器运行请求时，我可以看到代码正确执行，并执行 echo 语句（但正如我所说，浏览器甚至 apache 都没有任何内容）**

*   2 个不同浏览器的结果相同，所以不是浏览器故障

*   软件：Php 5.3、apache 2.2.22、PhpStorm 6.01 IDE、Xdebug、Windows7

*   当我在新计算机上重新安装环境时问题开始了+更改了php5.2 => php5.3，zenddebuger => xdebug，旧版本的apache => apache 2.2.22（一般升级）

# javascript - 在 javascript 中处理高级别的分块响应

> ID：15875950
> 
> 赞同：0
> 
> 时间：2013-04-08T09:42:45.270
> 
> 标签：javascript, jquery, playframework-2.0

在服务器端操作缓慢的情况下，服务器可以返回分块响应是个好主意，这样用户体验会更好，例如在旅游网站的情况下（查看 Liligo.com）

玩！2.0 为编写返回分块响应的动作提供了极好的支持，但是在客户端处理它们并不简单。来自问题：[如何在客户端编写javascript以及时接收和解析“分块”响应？](https://stackoverflow.com/questions/6789703/how-to-write-javascript-in-client-side-to-receive-and-parse-chunked-response-i), jquery 不支持使用分块响应，并且直接使用低级 API 可能出于可移植性的原因是危险的

是否有任何支持处理分块/流式响应的高级 JavaScript 库？

# symfony-2.1 - 在 Symfony 2.1 的奏鸣曲管理包中首次加载时不显示列表

> ID：15875951
> 
> 赞同：0
> 
> 时间：2013-04-08T09:42:50.343
> 
> 标签：symfony-2.1, sonata-admin

我正在使用`Symfony 2.1`和`Sonata Admin bundle`管理功能。现在我有很多数据要显示在列表视图中，默认情况下我不喜欢这样做。我想第一次只显示过滤器，然后基于过滤字段只显示相关数据。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:00:15.923

在您的管理类中，您可以覆盖 createQuery：

```
 /**
     * Set a standard filter for the list view
     * @param  string $context [description]
     * @return [type]          [description]
     */
    public function createQuery($context = 'list') 
    { 

            $query = $this->getModelManager()->createQuery('Company\MyBundle\Entity\Client', 'c');
                    $query->where("c.state = 'todo'");

            return $query;
    } 
```

默认情况下不显示任何内容是不可能的，但是再次添加一个查询，这样它就永远不会返回结果？像“状态 = testing_my_awesome_app”

# javascript - Css - 如何根据活动选项卡更改水印？

> ID：15875952
> 
> 赞同：4
> 
> 时间：2013-04-08T09:42:52.650
> 
> 标签：javascript

我有以下链接：

```
<ul id='menu' class='menuAP'>
  <li id='navAppPop' class='active'>
    <a>
        <img src='assets/images/applicant.png' class='navImg'  />
        Applicant
    </a>
  </li>
  <li id='navProvPop' class='provRight'>
    <a> 
        <img src='assets/images/Providers.png' class='navImg'  />
        Providers
    </a>
  </li>
</ul> 
```

然后我有：

```
<div id='watermark'></div> 
```

其中包含我的水印。

选择某个选项卡时，如何动态更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:45:45.253

你可以尝试这样的事情：

```
$('#menu li').click(function() 
{
    $(this).siblings('li').removeClass('active');
    $(this).addClass('active');

    if ($('#navAppPop').hasClass('active')) 
    {
        $("#watermark").css('background-image', 'url(assets/images/appWatermark.png)');
    }
}); 
```

只需在 click 函数中添加其他选项卡的代码即可。

这样做是为了更改哪个链接是活动的，并根据哪个链接具有活动类来设置背景。

# mysql - 查找并将行插入另一个表mysql触发器

> ID：15875953
> 
> 赞同：2
> 
> 时间：2013-04-08T09:42:54.577
> 
> 标签：mysql, triggers, insert, find

我在名为“My_Company”的mysql数据库中有以下三个表

```
mysql> desc employee;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| Id       | int(11)     | NO   | PRI | 0       |       |
| Emp_Name | varchar(20) | YES  |     | NULL    |       |
| Division | varchar(20) | YES  |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> desc tools;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| Division  | varchar(20) | NO   | PRI |         |       |
| Tool_No   | int(11)     | NO   | PRI | 0       |       |
| Tool_Name | varchar(20) | YES  |     | NULL    |       |
+-----------+-------------+------+-----+---------+-------+
3 rows in set (0.01 sec)

mysql> desc employee_tools;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| Id      | int(11)     | YES  |     | NULL    |       |
| Tool    | varchar(20) | YES  |     | NULL    |       |
| Status  | varchar(20) | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
2 rows in set (0.02 sec)

------------------------------------------------------------------------------------- 
```

在表employee上插入新行时，我需要将表工具中的行插入表employee_tools。

例如，如果我在员工值中插入一个新行（'1'，'Michel'，'Network'），那么触发器应该从表工具中找到划分的 tool_names 并将行添加到employee_tools

```
mysql> insert into employee values('1','Michel','Network');
Query OK, 1 row affected (0.05 sec)

mysql> select * from employee;
+----+----------+----------+
| Id | Emp_Name | Division |
+----+----------+----------+
|  1 | Michel   | Network  |
+----+----------+----------+
1 row in set (0.00 sec)

mysql> select * from tools;
+----------+---------+--------------+
| Division | Tool_No | Tool_Name    |
+----------+---------+--------------+
| Network  |       1 | Crimper      |
| Network  |       2 | LAN Tester   |
| Network  |       3 | Sleaver      |
| Hardware |       1 | Screw drv    |
| Hardware |       2 | Power Tester |
| Hardware |       3 | Plyer        |
+----------+---------+--------------+
3 rows in set (0.00 sec)

mysql> select * from employee_tools;
+------+------------+------------+
| Id   | Tool       |Status      |
+------+------------+------------+
|    1 | Crimper    |Working     |
|    1 | LAN Tester |working     |
|    1 | Sleaver    |working     |
+------+------------+------------+
3 rows in set (0.00 sec) 
```

状态将手动更新，如下所示...

```
+------+------------+------------+
| Id   | Tool       |Status      |
+------+------------+------------+
|    1 | Crimper    |Working     |
|    1 | LAN Tester |Not working |
|    1 | Sleaver    |Broken      |
+------+------------+------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:10:55.337

就那么简单：

```
DROP TRIGGER IF EXISTS trg_emp_tools;
CREATE TRIGGER trg_emp_tools AFTER INSERT ON employee
FOR EACH ROW 
BEGIN
INSERT INTO employee_tools (Id, Tool, Status)
SELECT NEW.Id, tools.Tool_Name, 'Working'
FROM
tools
WHERE Division = NEW.Division;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T10:14:14.163

这些人使用 phpmyadmin，您需要在触发器中添加分隔符：

```
delimiter $$
DROP TRIGGER IF EXISTS copy_trig;
CREATE TRIGGER copy_trig AFTER INSERT ON test
FOR EACH ROW 
BEGIN
 insert into test_archive
 select * from test where id = New.id;
END$$
delimiter ; 
```

# iphone - 使用 CTTelephonyCenterAddObserver 的网络 iOS 事件/通知

> ID：15875955
> 
> 赞同：1
> 
> 时间：2013-04-08T09:42:57.790
> 
> 标签：iphone, notifications, jailbreak

我想检测网络数据（Wifi、3G）何时打开/关闭。我用“kCTRegistrationStatusChangedNotification”检测到网络通知

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:19:48.057

您可以使用APPLE 本身提供的[可达性](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)代码来检查 WiFi 的互联网连接可用性以及任何其他选项，如无线广域网 (WWAN) 接口，如 EDGE 或 3G。

尝试将该代码集成到您的应用程序中并检查。如果在集成代码时遇到任何问题，请告诉我，我们将共同努力解决您的问题。

希望这可以帮助。

# c# - 如何在 Windows 应用程序的 CSV 文件中获取所需的标题文本？

> ID：15875957
> 
> 赞同：0
> 
> 时间：2013-04-08T09:43:02.703
> 
> 标签：c#, windows, winforms, export-to-csv

我正在使用以下代码生成 CSV 文件：

```
private void button1_Click(object sender, EventArgs e)
    {

        Stopwatch swra = new Stopwatch();
        swra.Start();
        string NewconnectionString = connectionString;
        StreamWriter CsvfileWriter = new StreamWriter(@"D:\testfile.csv");
        string sqlselectQuery = "select * from tblProperty";
        SqlCommand sqlcmd = new SqlCommand();

        SqlConnection spContentConn = new SqlConnection(NewconnectionString);
        sqlcmd.Connection = spContentConn;
        sqlcmd.CommandTimeout = 0;
        sqlcmd.CommandType = CommandType.Text;
        sqlcmd.CommandText = sqlselectQuery;
        spContentConn.Open();
        using (spContentConn)
        {
            using (SqlDataReader sdr = sqlcmd.ExecuteReader())
            using (CsvfileWriter)
            {
                string columnNames = Enumerable.Range(0, sdr.FieldCount).Select(i => sdr.GetName(i)).ToString();

                CsvfileWriter.WriteLine(string.Join(",", columnNames));
                while (sdr.Read())
                    //based on your Table columns you can increase and decrese columns
                    CsvfileWriter.WriteLine(sdr[0].ToString() + "," + sdr[1].ToString() + "," + sdr[2].ToString() + "," + sdr[3].ToString() + "," + sdr[4].ToString() + "," + sdr[5].ToString() + "," + sdr[6].ToString() + "," + sdr[7].ToString() + "," + sdr[8].ToString() + "," + sdr[9].ToString() + ",");

            }
        }
        swra.Stop();
        Console.WriteLine(swra.ElapsedMilliseconds);
    } 
```

在输出中，我得到如下屏幕截图的数据， ![这](https://i.stack.imgur.com/4FZjB.png) 请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:46:39.610

```
 IEnumerable<string> columnNames = Enumerable.Range(0, sdr.FieldCount)
                                             .Select(i => sdr.GetName(i));

 CsvfileWriter.WriteLine(string.Join(",", columnNames.ToArray())); 
```

# refresh - 使用 SignalR 1.0 保持 connectionId

> ID：15875959
> 
> 赞同：1
> 
> 时间：2013-04-08T09:43:08.603
> 
> 标签：refresh, signalr

`ConnectionId`页面刷新时如何保留？`IConnectionIdPrefixGenerator`没有找到。`ConnectionId`我在客户端保存了一个 cookie（其中包含）。我应该把它放在哪里？

我有方法：

```
public void Connect(string username, string password, string xmppDomain)
{
    XmppClient xmppClient = XmppClients[Context.ConnectionId];

    xmppClient.Username = username;
    xmppClient.Password = password;
    xmppClient.XmppDomain = xmppDomain;
    xmppClient.Status = "Online";
    xmppClient.Open();
} 
```

我可以使用此代码将保存的 connectionid 放入`Context.ConnectionId`吗？

```
HttpCookie myCookie = HttpContext.Current.Request.Cookies["ConnectionId"];
Context.ConnectionId = myCookie.ToString(); 
```

我也有 jQuery 代码，它调用每个页面的刷新：

```
$.connection.hub.start().done(function () {
    matrixHub.server.connect(xmpp_user, xmpp_password, xmpp_host);
}); 
```

如何修改此代码并使用持久化`ConnectionId`？我使用 Matrix XMPP SDK、ASP.NET MVC C# 和 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:53:24.767

**当您刷新页面时，现有连接将断开，并使用新的连接 id**建立一个新连接。此行为无法更改。将连接 ID 保存在 cookie 中将无济于事，因为一旦断开连接，服务器就会忘记连接。您应该使用 ASP.NET MVC 中的会话管理机制或您的自定义 cookie 将您的用户与连接 ID 相关联。

# playframework-2.0 - 播放框架 2 为空时保存输入字段

> ID：15875960
> 
> 赞同：0
> 
> 时间：2013-04-08T09:43:09.210
> 
> 标签：playframework-2.0

我使用的控制器中有一个更新功能：

```
public static Result updateCustomer(Long id) {
    Form<CustomerData> customerDataForm = form(CustomerData.class)
            .bindFromRequest();

    if (customerDataForm.hasErrors()) {
        return badRequest(views.html.admin.customerFormEdit
                .render(customerDataForm));
    }
    customerDataForm.get().update(id);
    flash("success", "Customer " + customerDataForm.get().customerName
            + " has been updated");
    return CLIENT_HOME;
} 
```

但它不会保存空的输入文本值，甚至不会保存未选中的复选框。

当我勾选一个复选框或向任何字段输入任何值时，它会在更新时保存，但如果我想保存空输入或未选中的复选框，它不会在更新时删除先前保存的值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:02:18.047

以下示例显示我们可以保存/更新输入的空值或勾选/未勾选复选框：

### 控制器：

```
public static Result editCustomer() {
    // find CustomerData, Note: this use hard coded ID
    CustomerData customerData = CustomerData.find.byId(1L); 
    Form<CustomerData> customerDataForm = Form.form(CustomerData.class)
        .fill(customerData);

    return ok(views.html.editCustomer.render(customerDataForm));
}

public static Result updateCustomer() {
    Form<CustomerData> customerDataForm = Form.form(CustomerData.class)
        .bindFromRequest();

    if (customerDataForm.hasErrors()) {
        return badRequest(editCustomer.render(customerDataForm));
    }
    CustomerData customerData = customerDataForm.get();

    // update data, Note: this use hard coded ID
    customerData.update(1L);
    flash("success", "Customer ID " + customerData.id + " has been updated");

    return redirect(routes.Application.editCustomer());
} 
```

### 该模型：

```
@Entity
public class CustomerData extends Model {
    @Id
    public Long id;
    public String name;
    public boolean isMember;

    public static Finder<Long, CustomerData> find = new Finder<>(
        Long.class, CustomerData.class
    );
} 
```

### 观点：

```
@(customerDataForm: Form[models.CustomerData])
@import views.html.helper._

@main(title = "Edit Customer Data") {
    @form(routes.Application.updateCustomer()) {
        @*** Note: this use hard coded ID ***@
        <input type="hidden" name="id" value="1">
        @inputText(customerDataForm("name"), 'label -> "Customer Name")
        @checkbox(customerDataForm("isMember"))

        <input type="submit" value="Submit">
    }
} 
```

希望这会有所帮助。:)

# php - Replace all Uppercase Chars to Lowercase except urlencoded strings

> ID：15875972
> 
> 赞同：0
> 
> 时间：2013-04-08T09:44:08.783
> 
> 标签：php, redirect, preg-replace, preg-match

I have a very simple redirect in PHP that redirects to lowercase, I cannot do this in .htaccess because of my shared server limitations.

```
 if (preg_match('/[A-Z]+/', $url)){
        header("HTTP/1.1 301 Moved Permanently"); 
        header("Location: ".strtolower($url));
        exit;       
    } 
```

However there are certain cases where the .htaccess may have already redirected a url. All these cases have urlencoded chars ie. %7E.

So I need to check for any uppercase characters that aren't in the form of a urlencoded char and replace them with lowercase characters.

Worst (or perhaps best) case I don't want to attempt an already redirected header can I check to see if it's already been redirected in PHP.

Any ideas on how I could go about this please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:43:57.087

您只需解码 url 以删除 urlencoded 字符，然后使用 strtolower()，然后将其编码回来：

```
header("Location: ". urlencode(strtolower(urldecode($url)))); 
```

# dynamics-crm-2011 - CRM 2011：SDK 安装错误

> ID：15875974
> 
> 赞同：0
> 
> 时间：2013-04-08T09:44:11.597
> 
> 标签：dynamics-crm-2011, wif

我在尝试安装适用于 Visual Studio 2012 的 SDK 时遇到此问题。
我尝试安装 Windows Identity Foundation，但我收到一条消息，提示“不需要此升级”。它默认安装在 Windows 7 上不是吗？在此期间，我正忙于安装 Visual Studio 2010 以供使用。
关于这个还能做什么？

![在此处输入图像描述](https://i.stack.imgur.com/8eQJN.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:08:25.083

Windows 7 默认未安装 Windows Identity Foundation，您需要从该站点下载并安装：

[http://www.microsoft.com/en-us/download/details.aspx?id=17331](http://www.microsoft.com/en-us/download/details.aspx?id=17331)

从站点：对于 Windows 7 和 Windows Server 2008 R2，选择名称以 Windows6.1 开头的 msu 文件（x64 用于 64 位，x86 用于 32 位）

# java - SAML VerificationException in WAS7 in java

> ID：15875978
> 
> 赞同：0
> 
> 时间：2013-04-08T09:44:31.597
> 
> 标签：java, saml

Could you please help us for the SAML Verification issue.

We have the application for SAML Single Sing on, it is working for all the environments,Now we are moving to **WAS7**, when we install the same application we are getting the **VerificationException** while verifying the SamlResponse with publickey.

*samlResponse.verify(idpPublicKey);*

while executing above statement, we are getting the following exception.

**org.eclipse.higgins.saml2idp.saml2.XMLElement$VerificationException: Invalid signature value. at org.eclipse.higgins.saml2idp.saml2.XMLElement.verify(XMLElement.java:283)**

We used the higgings jar file for SAML Validation.

Please kindly provide the reason/solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T09:41:00.693

您可能还会遇到引用问题 - XML 签名验证使用对 XML 文档中已签名数据的引用。在 JDK 1.6.21+ 中，引用检查比以前严格得多，这经常导致错误。完整的讨论在这里：

[http://ipsec.pl/node/1119](http://ipsec.pl/node/1119)

# iphone - Iterate through the incoming data

> ID：15875989
> 
> 赞同：-2
> 
> 时间：2013-04-08T09:44:55.080
> 
> 标签：iphone, ios, objective-c

I have Receiving NSData like 210502113c4d from the server . I am getting this data into NSString format . I want to retrieve the 3 byte from this incoming data i.e. 2105 **02** 113c4d. I have tried following :

```
NSData *demoData=[string dataUsingEncoding:NSASCIIStringEncoding];
NSLog(@"demo data :%@",demoData);
const char *bytes=[data bytes];
NSMutableString *result = [NSMutableString string];
for (int i = 0; i < [demoData length]; i++)
{
    [result appendFormat:@"%02hhx", (unsigned char)bytes[i]];
} 
```

But its not working . Please suggest me some solution to achieve this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:18:38.067

代码获取字符串第三个字节的值，假设字符串包含十六进制字节，hh格式：

```
NSString* string = @"210502113c4d";
NSString* thirdByte = [string substringWithRange:NSRangeFromString(@"4,2")];
NSScanner* scanner = [NSScanner scannerWithString:thirdByte];
NSUInteger value;
[scanner scanHexInt:&value];
NSLog(@"%u", value); // 2 
```

# iphone - 多个服务器上的单个 SSL 证书以将推送通知发送到同一应用程序

> ID：15875992
> 
> 赞同：4
> 
> 时间：2013-04-08T09:45:07.477
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

是否可以在多个服务器上使用单个 SSL 证书向同一个应用程序发送推送通知。我们有客户端和服务器，客户端将从应用商店下载，服务器将由个人客户在自己的网络上安装。对于所有客户的客户端应用程序都是相同的，我们不能为每个客户提交单独的应用程序。那么，苹果在这种情况下是否有任何限制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:56:45.860

APPLE 没有这种限制。**APPLE关心的是推送通知是通过正确的连接和证书发送的。**

到目前为止，还没有任何可用的记录限制，所以不应该是这样，[请检查此](https://stackoverflow.com/questions/5374135/any-limitation-push-notification-via-apns-or-c2dm)以进一步确认此保证，因为该用户在一个月内向不同的服务器发送了 700 万条推送通知，正如他所声称的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:39:59.447

您还可以使用多个 SSL 证书将推送通知从多个服务器发送到同一个应用程序。苹果公司最近才使这成为可能。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/9365302/is-it-possible-to-create-multiple-ssl-certificates-for-providers-that-send-apns/15902579#15902579)。

# c++ - 向量上的 memset

> ID：15875994
> 
> 赞同：5
> 
> 时间：2013-04-08T09:45:12.507
> 
> 标签：c++, vector, stl, memset

根据[Mark Ransoms](https://stackoverflow.com/a/1665038/409263)关于使用 memset 的回答，我在 a 上使用 memset`vector<int>`为所有元素分配值。

```
memset(&match_begin[0], 0xff , sizeof(match_begin[0]) * match_begin.size()); 
```

它确实有显着的性能改进`std::fill`并且运行良好（g++ 4.3.2, 64bit linux）。这段代码是否安全，如中所示，std::vector 实现是否总是保证数据的内存分配是连续的？是否有可能在 stl 库的未来（或不同）实现中，这可能会在以后更改并破坏我的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:47:32.033

> std::vector 实现是否总是保证数据的内存分配是连续的

是的。[23.3.6.1/1](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)。在 C++03 标准中，23.2.4/1 处有相等的字符串

> **向量的元素是连续存储的**，这意味着如果 v 是一个向量，其中 T 是 bool 以外的某种类型，那么对于所有 0 <= n < v，它都遵循恒等式 &v[n] == &v[0] + n 。尺寸（）

> 是否有可能在 stl 库的未来（或不同）实现中，这可能会在以后更改并破坏我的代码？

不，向量应该始终是连续的。

但是，在 gcc 4.6.3 中，只有一种填充优化，使用 memset。此优化适用于 char 类型

```
 // Specialization: for char types we can use memset.
  template<typename _Tp>
    inline typename
    __gnu_cxx::__enable_if<__is_byte<_Tp>::__value, void>::__type
    __fill_a(_Tp* __first, _Tp* __last, const _Tp& __c)
    {
      const _Tp __tmp = __c;
      __builtin_memset(__first, static_cast<unsigned char>(__tmp),
               __last - __first);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:50:49.740

从内存的角度来看，这应该是安全的。

请记住，如果您的向量的内容不是纯数据类型，您不应该做这种事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:57:56.597

memset 使用 bool 类型的向量失败，请尝试下面的示例，尽管正如其他人提到的，它适用于其他纯数据类型。我分享它只是为了使其明确它不适用于所有纯数据类型。

```
#include <vector>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    vector<bool>vec;
    vec.push_back(0);
    vec.push_back(1);
    memset(&vec[0], 0, sizeof(vec[0]) * vec.size());
    return 0;
} 
```