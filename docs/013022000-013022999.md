# StackOverflow 问答 13022000-13022999

# complexity-theory - 证明这个双循环的时间复杂度是 O(n)

> ID：13022000
> 
> 赞同：0
> 
> 时间：2012-10-23T00:32:12.230
> 
> 标签：complexity-theory, time-complexity

你如何证明整个循环序列是 O(n)？还是 O(n)？乍一看，只看双循环可能会认为它是 O(n^2) 但我不认为它是......

```
int i = 0;
int arr[N];
int idx = 0;
for (i = 0; i < 2; i++)
{
    for (j = 0; j < N/2; j++)
    {
      idx = (i * N/2) + j;
      foo(arr[idx]);
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:40:05.950

The outer loop is constant, so the loop is the same as doing:

```
for (j = 0; j < N/2; j++)
{
  idx = (0 * N/2) + j;
  foo(arr[idx]);
  idx = (1 * N/2) + j;
  foo(arr[idx]);
} 
```

Which actually makes the intent of the code a lot clearer also, but as you can see, the amount of operations scales linearly with N, so it's O(N) complexity rather than exponential growth. I can't explain it any better as it's 8.30am and I haven't slept, but I imagine you get my gist.

# sql - 无法完全理解 GROUP BY

> ID：13022001
> 
> 赞同：7
> 
> 时间：2012-10-23T00:32:16.227
> 
> 标签：sql, oracle

我正在为即将到来的考试复习一些练习题，但我在完全理解 group by 时遇到了问题。我看到**GROUP BY**如下：将结果集按一列或多列分组。

**我有以下数据库架构**

![在此处输入图像描述](../Images/64c1d977893ec55a6e1b3f83ff8e2186.png)

![在此处输入图像描述](../Images/fe20122c95b5433fcdda5f5125d0cc5f.png)

**我的查询**

```
SELECT orders.customer_numb, sum(order_lines.cost_line), customers.customer_first_name, customers.customer_last_name
FROM orders
INNER JOIN customers ON customers.customer_numb = orders.customer_numb
INNER JOIN order_lines ON order_lines.order_numb = orders.order_numb
GROUP BY orders.customer_numb, order_lines.cost_line, customers.customer_first_name,     customers.customer_last_name
ORDER BY order_lines.cost_line DESC 
```

**我很难理解**
为什么我不能简单地使用 just`GROUP BY orders.cost_line`并按 cost_line 对数据进行分组？

**我想要达到**
的目标 我想获得花费最多钱的客户的名字。我只是不完全了解如何实现这一目标。我了解联接是如何工作的，但我似乎无法理解为什么我不能简单地 GROUP BY customer_numb 和 cost_line （使用 sum() 来计算花费的金额）。我似乎总是得到“不是 GROUP BY 表达式”，如果有人可以解释我做错了什么（不仅仅是给我答案），那就太好了 - 我真的很感激，当然还有任何资源您必须正确使用 GROUP by。

很抱歉这篇长文，如果我错过了任何东西，我深表歉意。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T04:47:18.177

> 我似乎无法理解为什么我不能简单地 GROUP BY customer_numb 和 cost_line （使用 sum() 来计算花费的金额）。

当您说`group by customer_numb`您知道 customer_numb 唯一标识客户表中的一行时（假设 customer_numb 是主键或备用键），因此任何给定的and`customers.customer_numb`都只有一个值。但是在解析时，Oracle 不知道，或者至少表现得好像它不知道。它说，有点恐慌，“如果一个单曲有多个值，我该怎么办？”`customers.customer_first_name``customers.customer_last_name``customer_numb``customer_first_name`

大致规则是，子句中的`select`表达式可以使用子句中的表达式`group by`和/或使用聚合函数。（以及不依赖于基表的常量和系统变量等）而“使用”我的意思是成为表达式或表达式的一部分。因此，一旦您按名字和姓氏分组，`customer_first_name || customer_last_name`这也是一个有效的表达方式。

当您有一个表，例如`customers`并按主键分组时，或具有唯一键且非空约束的列时，您可以安全地将它们包含在`group by`子句中。在这种特殊情况下，`group by customer.customer_numb, customer.customer_first_name, customer.customer_last_name.`

另请注意，`order by`第一个查询中的 将失败，因为`order_lines.cost_line`该组没有单个值。您可以在子句中排序`sum(order_lines.cost_line)`或使用列别名并对其排序`select``alias`

```
SELECT orders.customer_numb, 
    sum(order_lines.cost_line), 
    customers.customer_first_name, 
    customers.customer_last_name
FROM orders
INNER JOIN customers ON customers.customer_numb = orders.customer_numb
INNER JOIN order_lines ON order_lines.order_numb = orders.order_numb
GROUP BY orders.customer_numb, 
    customers.customer_first_name, 
    customers.customer_last_name
ORDER BY sum(order_lines.cost_line) 
```

或者

```
SELECT orders.customer_numb, 
    sum(order_lines.cost_line) as sum_cost_line, 
. . .
ORDER BY sum_cost_line 
```

注意：我听说一些 RDBMS 将暗示分组的附加表达式，而没有明确说明它们。Oracle 不是这些 RDBMS 之一。

至于按两者分组`customer_numb`，`cost_line`考虑一个有两个客户的数据库，1 和 2 有两个订单，每个订单：

```
Customer Number | Cost Line
              1 |     20.00
              1 |     20.00
              2 |     35.00
              2 |     30.00

 select customer_number, cost_line, sum(cost_line)
 FROM ...
 group by customer_number, cost_line
 order by sum(cost_line) desc

Customer Number | Cost Line | sum(cost_line)
              1 |     20.00 |          40.00
              2 |     35.00 |          35.00
              2 |     30.00 |          30.00 
```

最高的第一行`sum(cost_line)`不是花费最多的客户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T02:46:04.200

> 我了解联接是如何工作的，但我似乎无法理解为什么我不能简单地 GROUP BY customer_numb 和 cost_line （使用 sum() 来计算花费的金额）。

这应该给你每个客户的总和。

```
SELECT orders.customer_numb, sum(order_lines.cost_line)
FROM orders
INNER JOIN order_lines ON order_lines.order_numb = orders.order_numb
GROUP BY orders.customer_numb 
```

请注意，SELECT 子句中*不是*聚合函数参数的每一列也是 GROUP BY 子句中的一列。

现在，您可以将其与其他表连接起来以获取更多详细信息。这是使用公用表表达式的一种方法。（还有其他方式来表达你想要的。）

```
with customer_sums as (
    -- We give the columns useful aliases here.
    SELECT orders.customer_numb as customer_numb, 
           sum(order_lines.cost_line) as total_orders
    FROM orders
    INNER JOIN order_lines ON order_lines.order_numb = orders.order_numb
    GROUP BY orders.customer_numb
)
select c.customer_numb, c.customer_first_name, c.customer_last_name, cs.total_orders
from customers c
inner join customer_sums cs
on cs.customer_numb = c.customer_numb
order by cs.total_orders desc 
```

> 为什么我不能简单地使用 GROUP BY orders.cost_line 并按 cost_line 对数据进行分组？

将 GROUP BY 应用于 order_lines.cost_line 将为 order_lines.cost_line 中的每个不同值提供一行。（列orders.cost_line 不存在。）这就是数据的样子。

```
OL.ORDER_NUMB OL.COST_LINE O.CUSTOMER_NUMB C.CUSTOMER_FIRST_NAME C.CUSTOMER_LAST_NAME
--
1             1.45         2014            Julio                 Savell
1             2.33         2014            Julio                 Savell
1             1.45         2014            Julio                 Savell
2             1.45         2014            Julio                 Savell
2             1.45         2014            Julio                 Savell
3             13.00        2014            Julio                 Savell 
```

您*可以*按 order_lines.cost_line 进行分组，但它不会为您提供任何有用的信息。这个查询

```
select order_lines.cost_line, orders.customer_numb
from order_lines
inner join orders on orders.customer_numb = order_lines.customer_numb
group by order_lines.cost_line; 
```

应该返回这样的东西。

```
OL.COST_LINE O.CUSTOMER_NUMB 
--
1.45         2014
2.33         2014
13.00        2014 
```

不是非常有用。

如果您对订单行项目的总和感兴趣，您需要决定按哪些列或哪些列进行分组（汇总）。如果您按订单号分组（汇总），您将获得三行。如果您按客户编号分组（汇总），您将得到一行。

# python - 为什么我的牛顿法函数返回无？

> ID：13022004
> 
> 赞同：1
> 
> 时间：2012-10-23T00:32:34.613
> 
> 标签：python

```
def evaluatePoly(poly, x):
    '''
    Computes the value of a polynomial function at given value x. Returns that
    value as a float.

    poly: list of numbers, length > 0
    x: number
    returns: float
    '''
    for n in range(len(poly)):
        poly[n] = (poly[n]) * (x**n)

    return float(sum(poly[:]))

def computeDeriv(poly):
    '''
    Computes and returns the derivative of a polynomial function as a list of
    floats. If the derivative is 0, returns [0.0].

    poly: list of numbers, length &gt; 0
    returns: list of numbers (floats)

    >>> print computeDeriv([-13.39, 0.0, 17.5, 3.0, 1.0])
    [0.0, 35.0, 9.0, 4.0]
    >>> print computeDeriv([6, 1, 3, 0])
    [1.0, 6.0, 0.0]
    >>> print computeDeriv([20])
    [0.0]

    '''
    if len(poly) == 1:
        poly = [0.0]
        return poly
    for m in range(len(poly)):
        poly[m] = float(m) * poly[m]
    return poly[1:]

def computeRoot(poly, x_0, epsilon):
    '''
    Uses Newton's method to find and return a root of a polynomial function.
    Returns a list containing the root and the number of iterations required
    to get to the root.

    poly: list of numbers, length > 1.
         Represents a polynomial function containing at least one real root.
         The derivative of this polynomial function at x_0 is not 0.
    x_0: float
    epsilon: float > 0
    returns: list [float, int]

    >>> print computeRoot([-13.39, 0.0, 17.5, 3.0, 1.0], 0.1,  .0001)
    [0.806790753796352, 7]
    >>> print computeRoot([1, 9, 8], -3, .01)
    [-1.0000079170005467, 5]
    >>> print computeRoot([1, -1, 1, -1], 2, .001)
    [1.0002210630197605, 4]
    '''
    x = x_0
    iter = 0
    list = []
    polyStart = poly[:]
    while abs(evaluatePoly(poly, x)) >= epsilon:
        poly = polyStart[:]
        l = evaluatePoly(poly,x)
        if abs(l) < epsilon:
            list.append(x)
            list.append(iter)
            return list
        else:
            poly = polyStart[:]
            d = computeDeriv(poly)
            dn = evaluatePoly(d, x)
            x = (x - (l/dn))
            iter = iter + 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:54:23.430

我假设你的意思是这个函数正在返回`None`一些特定的输入：

```
def computeRoot(poly, x_0, epsilon):
    x = x_0
    iter = 0
    list = []
    polyStart = poly[:]
    while abs(evaluatePoly(poly, x)) >= epsilon:
        poly = polyStart[:]
        l = evaluatePoly(poly,x)
        if abs(l) < epsilon:
            list.append(x)
            list.append(iter)
            return list
        else:
            poly = polyStart[:]
            d = computeDeriv(poly)
            dn = evaluatePoly(d, x)
            x = (x - (l/dn))
            iter = iter + 1 
```

我怎么知道？因为只有一个`return`，而且它不在函数的末尾。如果`abs(evaluatePoly(poly, x)) >= epsilon`是`False`，则`while`循环将结束，之后没有任何内容，因此函数`None`默认结束并返回（任何未显式`return`返回的函数`None`）。

所以，你需要弄清楚在那种情况下正确的返回值是什么，并添加一个`return`语句和函数的结尾。

# c++ - FMOD Ex 内存分配问题

> ID：13022011
> 
> 赞同：3
> 
> 时间：2012-10-23T00:33:18.523
> 
> 标签：c++, memory, stream, allocation, fmod

我在使用 FmodEx 时遇到了一些问题。我已经在网上彻底搜索，看看是否有人遇到了同样的问题，但我没有找到任何相关的东西。我创建了一个类来加载和播放我的声音，在这种情况下是流。这是我的代码：

```
Audio::Audio()
{
//Create system object//
m_Result = FMOD::System_Create(&m_pSystem);
ErrorCheck(m_Result);

//Check FMOD version//
m_Result = m_pSystem->getVersion(&m_FmodVersion);
if(m_FmodVersion < FMOD_VERSION)
    MessageBox(NULL, FMOD_ErrorString(m_Result), "FMOD Version Error", MB_OK);

//Check if hardware acceleration is disabled//
m_pSystem->getDriverCaps(0, &m_Caps, 0, &m_SpeakerMode);
if (m_Caps & FMOD_CAPS_HARDWARE_EMULATED)
    MessageBox(NULL, FMOD_ErrorString(m_Result), "FMOD Acceleration Error", MB_OK);

//Initialize system object//
m_Result = m_pSystem->init(2, FMOD_INIT_NORMAL, 0);
ErrorCheck(m_Result);

m_pChannel = 0;
m_IsLoaded = false;
}

void Audio::LoadMusic(char *filename)
{
m_Result = m_pSystem->createStream(filename, FMOD_CREATESTREAM, 0, &m_pSound);
ErrorCheck(m_Result);
}

void Audio::Play()
{
SetPause(false);
m_Result = m_pSystem->playSound(FMOD_CHANNEL_FREE, m_pSound, false, &m_pChannel);
ErrorCheck(m_Result);
SetPause(true);
} 
```

在此之后，我只是这样做：

```
pAudio->LoadMusic("test.mp3");
pAudio->Play(); 
```

声音播放没有问题。加载流时会出现问题。使用的内存一直在增加，并且不会停止。我猜这是因为它用来读取 mp3 流的小缓冲区没有被释放，因此，它在 RAM 中寻找下一个可用的空闲内存，因此程序的内存使用不会停止增加。我认为也许在每次播放后使用“释放”方法会起作用，但后来我注意到释放释放了声音实例中的所有内存。

谁能给我一些关于我在这里做错了什么的指示？我该如何防止这种情况？我不确定我是否说得足够清楚。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:04:50.343

每次调用 pAudio->LoadMusic 时，您都会分配（泄漏）更多内存，因为您正在创建一个新的 FMOD::Sound 实例（正如您所指出的那样，它有自己的流缓冲区）。如果您只是想再次播放声音，只需调用 pAudio->Play 即可重新启动流。

如果您担心 FMOD 内存使用情况，您可以调用 Memory_GetStats 来监控它，以防万一我错过了您的使用情况以及其他原因导致泄漏。

# c# - double 的范围是否比 long 更大？

> ID：13022016
> 
> 赞同：25
> 
> 时间：2012-10-23T00:33:46.410
> 
> 标签：c#, types, size

在 MSDN 上的一篇文章中，它指出`double`数据类型的范围为“-1.79769313486232e308 .. 1.79769313486232e308”。而`long`数据类型只有“-9,223,372,036,854,775,808 .. 9,223,372,036,854,775,807”的范围。如果它们都是 64 位大小， a怎么能`double`比 a 保存更多的数据？`long`

[http://msdn.microsoft.com/en-us/library/cs7y5x0x(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cs7y5x0x%28v=vs.90%29.aspx)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T00:39:31.217

可能的双打数量和可能的多头数量相同，只是分布不同*。

多头是均匀分布的，而浮动则不是。[你可以在这里](http://en.wikipedia.org/wiki/Floating-point)阅读更多。

我会写更多，但由于某种原因，光标在我手机上到处乱跳。

编辑：这实际上可能更有帮助：[http ://en.wikipedia.org/wiki/Double-precision_floating-point_format#section_1](http://en.wikipedia.org/wiki/Double-precision_floating-point_format#section_1)

Edit2：这更好：http: [//blogs.msdn.com/b/dwayneneed/archive/2010/05/07/fun-with-floating-point.aspx](http://blogs.msdn.com/b/dwayneneed/archive/2010/05/07/fun-with-floating-point.aspx)

**根据那个链接，看起来实际上有更多的多头，因为由于 NaN 和其他特殊数字的表示方式，一些双精度数丢失了。*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T00:37:27.190

`long`是有符号的 64 位整数值并且`double`是 64 位浮点值。查看他们的 FCL 类型可能更有意义。`long`映射到`System.Int64`和`double`映射到`System.Double`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-10-07T06:03:58.810

一个简单的答案是，`double`它只精确到 15-16 个总数字，而不是`long`（作为整数类型）在*明确的数字限制*内具有*绝对精度*，在这种情况下为 19 位。（请记住，*数字*和*值*在语义上是不同的。）

 ***`double`: -/+ 0.000,000,000,000,01 到 +/- 99,999,999,999,999.9（精度为 100%，精度从第 16 位开始下降，如“-1.79769313486232e308 .. 1.79769313486232e308”所示。）

`long`: -9,223,372,036,854,775,808 至 +9,223,372,036,854,775,807

`ulong`: 0 到 18,446,744,073,709,551,615（比 long 多 1 个数字，但值范围相同（因为它仅被转移以排除负回报）。

一般来说，int 型**实数**优于浮点**十进制值**，除非您明确需要十进制表示（无论出于何种目的）。

* * *

此外，您可能知道**signed**优于**unsigned**，因为前者更不容易出错（考虑语句`uint i;`，然后考虑`i - x;`where `x > i`）。***

# ruby-on-rails - Ruby on Rails：在嵌套模型上正确使用 image_tag 和carrierwave

> ID：13022017
> 
> 赞同：0
> 
> 时间：2012-10-23T00:33:53.587
> 
> 标签：ruby-on-rails, carrierwave, nested-attributes

我有部分命名为 _userbox，它显示从用户模型中获取的数据。我还有一个单独的图像模型，它存储有关图像的信息。

```
class User
  ...
  has_many :images, :dependent => :destroy  
  accepts_nested_attributes_for :images, allow_destroy: true    
  ...
end

class Image
  ...
  attr_accessible :image_priority, :image_title, :image_location
  belongs_to :user
  mount_uploader :image_location, ProfilePictureUploader
  ...
end

_userbox.html.erb
    <% @users.each do |user| %>     
      <tr>
        <td><%= image_tag user.images.image_location.url.to_s %></td>
        <td valign="top">
          <p><%= link_to user.first_name, user_path(user) %></p>
          <p><%= age(user.date_of_birth) %> / <%= user.gender %> / <%= user.orientation %></p>
          <p>from <%= user.location %></p>
          <p>Question? Answer answer answer answer answer answer answer</p>
        </td>
      </tr>
    <% end %> 
```

它工作正常，除了 image_tag。我正在使用carrierwave gem 上传图像文件。文件已上传，但我不知道在我看来访问它们的正确方法是什么。我收到如下错误消息： []:ActiveRecord::Relation 的未定义方法 `image_location'

使用该 image_tag 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:22:44.473

你有`has_many :images`，所以`user.images`是一个关系，而不是一个`Image`实例。要在您的部分中显示某些内容，请显示第一张图像，或循环它们：

```
<% @users.each do |user| %>     
  <tr>
    <td><%= image_tag user.images.first.image_location.url.to_s %></td>
    <td valign="top">... 
    </td>
  </tr>
<% end %> 
```

或循环它们：

```
<% @users.each do |user| %>     
  <tr>
    <td>
      <% user.images.each do |img| %>
        <%= image_tag img.image_location.url.to_s %>
      <% end %>
    </td>
    <td valign="top">... 
    </td>
  </tr>
<% end %> 
```

# html - 在嵌入式 Jetty 上使用 DefaultServlet 提供静态 html 文件

> ID：13022024
> 
> 赞同：3
> 
> 时间：2012-10-23T00:34:52.517
> 
> 标签：html, static, embedded, jetty

我正在开发一个需要自包含的项目，因此我决定将 Jetty 嵌入我的应用程序中。我将提供静态 HTML 页面、一些 JSP 页面，并且还将使用一些自定义 servlet。我找到了一个如何设置嵌入式 Jetty 来完成所有这些的完美示例（http://thinking.awirtz.com/2011/11/03/embedded-jetty-servlets-and-jsp/），但是，因为这是我第一次使用 Jetty 并使用 JSP 页面或 servlet，所以我有一些基本问题。

这是代码（如上面的链接中所示）：

```
class RunServer {
  public static void main(String args[]) {

    System.out.println("Initializing server...");
    final ServletContextHandler context =
      new ServletContextHandler(ServletContextHandler.SESSIONS);
    context.setContextPath("/");
    context.setResourceBase("webapp");

    context.setClassLoader(
        Thread.currentThread().getContextClassLoader()
    );

    context.addServlet(DefaultServlet.class, "/");

    final ServletHolder jsp =
      context.addServlet(JspServlet.class, "*.jsp");
    jsp.setInitParameter("classpath", context.getClassPath());

    // add your own additional servlets like this:
    // context.addServlet(JSONServlet.class, "/json");

    final Server server = new Server(8080);
    server.setHandler(context);

    System.out.println("Starting server...");
    try {
        server.start();
    } catch(Exception e) {
        System.out.println("Failed to start server!");
        return;
    }

    System.out.println("Server running...");
    while(true) {
        try {
            server.join();
        } catch(InterruptedException e) {
            System.out.println("Server interrupted!");
        }
    }
  }
} 
```

我添加了一个额外的自定义 servlet，并且效果很好，但是，我遇到了静态内容（即：HTML 文件）的问题。尝试访问它们时，我不断收到“找不到文件”错误。我很确定那是因为我不能 100% 确定应该将 HTML 文件放在哪里。我假设说“context.setResourceBase("webapp");”的行 是告诉各种 servlet 在哪里查找文件（即：资源）的行，但是，我不确定“webapp”实际上指向什么。它是文件夹、类名还是实际文件？

我非常感谢任何有关“webapp”实际上是（或指向）的帮助，以及将我的静态文件放在我的项目中的位置。

谢谢，哈利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:21:40.150

webapp 是您应该创建并放置静态文件的目录。:) 如果您有一个 maven 项目，它将是项目根目录中的“src/main/webapp”。

希望有帮助。

干杯，托马斯

# html - 在 HTML 中的按钮上使用 clip:rect

> ID：13022027
> 
> 赞同：1
> 
> 时间：2012-10-23T00:35:10.873
> 
> 标签：html, css

我正在尝试使用 CSS 将图像加载到按钮。

我似乎能够使按钮大小起作用等，但我似乎无法正确显示图像。

我的icons.png 有8 个图标，我只想在按钮上显示其中一个。我正在尝试使用 clip:rect 来选择其中一个，但它似乎不起作用。

它似乎显示了按钮上的所有图标，我认为使用 clip:rect 可以让我只选择图像中的一个图标。

有谁知道我哪里出错了？（注意：我不能为此使用 jQuery）

这是我正在使用的 CSS 和 HTML。

```
<style type="text/css">
.button1
{
    position:absolute;
    left: 20px;
    width:100px; 
    height:100px;
    top:20px;
    clip:rect(0px,100px,100px,0px); /* rect(top, right, bottom, left) */ 
    cursor: pointer; /* hand-shaped cursor */ 
    cursor: hand; /* for IE 5.x */ 
}

</style>

<body bgcolor="#DFDFDF">

    <button class="button1"><img src="icons.png"/></button>

</body> 
```

这就是它正在做的事情。。

![在此处输入图像描述](../Images/3e9cf95e03441ae7c787ac0949b87037.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:11:54.167

将按钮图像移动到样式。您已经使用宽度和高度定义了按钮的大小。如果按钮大于“精灵”图像（预期的按钮背景），您将看到下一个按钮图像。位置和按钮大小都需要正确调整大小。从您的示例图像中，按钮的大小必须更小，大约 70 像素左右。

```
 .button1
    {
        width:100px; 
        height:100px;   
        background-image: url(icons.png);
        background-position: -70px -10px; /* hor vert from top left*/

    }

    <button class="button1"></button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:17:55.060

我最终为我的图像添加了一个类

```
<style type="text/css">
.button1
{
    position:absolute;
    left: 20px;
    width:100px; 
    height:100px;
    top:20px;
    cursor: pointer; /* hand-shaped cursor */ 
    cursor: hand; /* for IE 5.x */ 
}

  img.button_logo
    {
        position:absolute;
        left: 20px;
        top:20px;
        clip:rect(0px,100px,100px,0px); /* rect(top, right, bottom, left) */ 
        cursor: pointer; /* hand-shaped cursor */ 
        cursor: hand; /* for IE 5.x */ 
    }

</style>

<body bgcolor="#DFDFDF">

    <button class="button1"><img class="button_logo" src="icons.png"/></button>

</body> 
```

现在它的显示就像它本来的样子。

# python - 在 App Engine 上使用 jinja2 的首选方法是什么？

> ID：13022030
> 
> 赞同：10
> 
> 时间：2012-10-23T00:35:51.183
> 
> 标签：python, google-app-engine, jinja2

我最初使用 App Engine 站点上显示的示例在 App Engine 上实现了 Jinja2：[https](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates) ://developers.google.com/appengine/docs/python/gettingstartedpython27/templates其中 jinja2 是直接导入的：

```
import jinja2
import os

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):
        greetings = 'somestring'
        template_values = {
            'greetings': greetings,
        }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

但我目前正在使用 Simpleauth（[https://github.com/crhym3/simpleauth](https://github.com/crhym3/simpleauth)），它遵循尼克约翰逊在此处描述的实现：http: [//blog.notdot.net/2011/11/Migrating-to-Python -2-7-part-2-Webapp-and-templates](http://blog.notdot.net/2011/11/Migrating-to-Python-2-7-part-2-Webapp-and-templates)其中 jinja2 是从 webapp2_extras 导入的：

```
import os
import webapp2
from webapp2_extras import jinja2

class BaseHandler(webapp2.RequestHandler):
  @webapp2.cached_property
  def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

  def render_template(self, filename, **template_args):
        self.response.write(self.jinja2.render_template(filename, **template_args))

class IndexHandler(BaseHandler):
  def get(self):
    self.render_template('index.html', name=self.request.get('name')) 
```

**以下哪个是使用 jinja2 的首选方法？**（他们似乎不能很好地一起玩，并且更愿意标准化最佳选择。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:19:40.890

我有同样的问题，但这里的答案并不能让我满意。

我认为这是关于封装与性能。对于小型应用程序，您可以拥有全局，没问题。所以第一个解决方案很好。它让您以一种简单的方式解决一个简单的问题，而无需学习框架细节的开销。

对于更大的应用程序，您可能喜欢封装对象并将其引入对象。基本上，您创建了一个框架，一个可扩展性的基础设施。但这就是 webapp2 应该给你的。

其背后的基本问题：如果您决定将单例类型的对象作为逻辑的一部分实例化和释放的类（如官方示例中的 webapp2.RequestHandler 类），那么引用的对象（jinja2）将是当最后一个类实例消失时释放......你可能会得到很多释放和重新分配。因此，最好在某个地方（webapp2.registry）有一个对象的链接，以防止即使没有在其他任何地方引用也能被删除。它就像全局，但不会污染全局命名空间，并且可以通过 webapp2.get_app().registry 从任何地方访问它。它也是缓存。然后，使用 cached_property 你只做另一层缓存。

简而言之：如果你想封装你最好为你的应用程序添加缓存以保持效率

在这种情况下，您可以使用 webapp2_extra jinja2，并且在每个模块中，您都可以使用以下命令访问相同的 jinja 环境：

```
jinja2.get_jinja2().environment 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:11:17.303

我想他们几乎是一样的。webapp2_extras.jinja2 还做的是缓存 jinja2.Environment() 初始化（请求持续时间）。另外，您可以利用 webapp2 的配置/注册表系统。

查看[get_jinja2() 源代码](http://webapp-improved.appspot.com/_modules/webapp2_extras/jinja2.html#get_jinja2)，您会发现它只是 jinja2.Environment() 的一个方便的包装器，带有一些默认环境参数和启用的扩展（例如 i18n）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T01:32:39.053

第一种方法是一个非常基本的例子。

第二种（使用 BaseHandler）是首选方法。在这里，您放置了 webapp2 共享方法。这些方法可以被派生类使用，在这里你可以放置你想要重写的 webapp2 方法，比如 dispatch。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-16T11:28:49.853

TL;DR：使用选项 #2

如果你不使用 i18n，那也没关系。但在现实世界中，人们说的语言与英语不同，而且 GAE 上的 jinja2 i18n 存在一个棘手的问题：线程（即`threadsafe: true`在 app.yaml 中）默认开启并且对性能很重要，但是您可以找到的大多数 jinja2 i18n 文档在网络上不是线程安全的。由于您不想将语言环境显式传递给每个 jinja2 宏，因此需要将其保存在线程局部变量中。这是`webapp2_extras.jinja2`正确的做法。

# mysql - 在查询时将变量设置为 true 或 false mysql

> ID：13022031
> 
> 赞同：0
> 
> 时间：2012-10-23T00:36:15.593
> 
> 标签：mysql, select

我在这里有点进退两难，希望能提出意见

我有以下架构

```
User{id,name}
Class{id}
textbook{id,name,public}
class_textbook{id,class_id,textbook_id}
class_membership{id,user_id,class_id} 
```

教科书.public 是一个布尔字段标记，如果教科书可供每个学生下载，或者只有参与分配该书的班级的学生可以下载

我想选择用户可用的每本教科书（公共的或分配在用户参与的课程中），但我必须知道哪本书是公开的，哪本书不是公开的，以及哪个课程是用公共教科书教授的。

解决这个问题的一种方法是运行两个查询，一个是让用户可以使用每本教科书，一个是找到公共的教科书

或者我可以定义一个 mysql 函数来为我执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:44:26.633

```
SELECT 
    * 
FROM textbook 
WHERE id in (SELECT textbook_id FROM class_textbook WHERE class_id IN (SELECT class_id FROM class_membership WHERE user_id = :user_id)) 
   OR public = true 
```

where `:user_id` is the id number associated with the user in question.

# c - 创建一个幸运数字猜谜游戏（将数组传递给函数/调用函数）

> ID：13022035
> 
> 赞同：0
> 
> 时间：2012-10-23T00:37:06.543
> 
> 标签：c

我在使用随机整数填充数组，然后让用户尝试猜测数组中的数字的猜谜游戏时遇到了一些麻烦。我相信我的大部分内容都是正确的，但程序不会超出“正在初始化幸运数字...”打印命令，让我检查我的功能是否正常工作。我相信问题在于我如何将数组传递给函数，或者我如何调用函数（也许在它们的原型中？）任何帮助将不胜感激。这是我的第一篇文章，所以如果我无法正确包含代码，我深表歉意。谢谢！

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <time.h>

/*
This program is a lucky number guessing game. A series of unique, random numbers 
will be generated and stored in an array. Users will have up to three chances to
guess a number stored in the array.*/

//Function Prototypes
int fillArray (int,int []);
int searchArray (int, int []);
int printArray (int, int []);

int main(){
 const int MAX = 25;
 int iArray[MAX]={0};
 int count;

 printf("Initializing lucky numbers...");
 //printf("%d", iArray[0]);
 //for(count=0;count<MAX;count++){
   //printf("%d ",iArray[count]);
 //}//end for loop
 fillArray(MAX,iArray);
 //ONLY TO CHECK ARRAY CONTENTS
 //printf("%d",iArray[0]);
 //for(count=0;count<MAX;count++){
 //  printf("%d ",iArray[count]);
 //}//end for loop
 //CARRY ON WITH PROGRAM
 searchArray(MAX,iArray);

 getch();
 return 0;   
}

//Function Definitions

//Fill Array Function
int fillArray(int max,int Array[]){
    int i;
    int j;
    int uniqueFlag;
    int random;
    srand(time(NULL));

    for(i = 0; i < max; i++) {
     /* Assume things are unique... we'll reset this flag if not. */
     uniqueFlag = 1;
     do {
        random = (rand() % 101);
        /* This loop checks for uniqueness */
        for (j = 0; j < i && uniqueFlag == 1; j++) {
           if (Array[j] == random) {
              uniqueFlag = 0;
           }//end if statement
        }//end for loop
     } while (uniqueFlag != 1);
     Array[i] = random;
}//end while
//ONLY TO CHECK ARRAY CONTENTS
printf("%d",Array[0]);
printf("\n%d\n",Array[1]);
for(i=0;i<max;i++){
  printf("%d ",Array[i]);
}//end for
}//end function

//Search Array Function
int searchArray(int max, int Array[]){
    int i;
    int guessCounter=0;
    int iGuess;
    do{
       printf("Please guess a number between 0 and 100: ");
       scanf("%d",&iGuess); 
       for(i=0;i<max&&guessCounter<3;i++){
          if(Array[i] == iGuess){
              printf("Correct");
              guessCounter = 3;
              }//end if
          else{
               printf("%d is not one of the lucky numbers.\n",iGuess);
               guessCounter++;
               }//end else
               }//end for
    }while(guessCounter < 3); //end do-while loop
    if(guessCounter==3){
        printf("Sorry! You lose!\n");
        printArray(max, Array);
        }//end if
}//end function   

//Print Array Function
int printArray(int max, int Array[]){
    int i;
    printf("Array contents: ");
    for(i=0;i<max;i++){
       printf("%d ",Array[i]);
    }//end for
}//end function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:41:25.133

`uniqueFlag` needs to be reset whenever you pick a random number, not just at the start of the outer loop in `fillArray`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:30:12.803

感谢大家！对于任何检查或遇到类似问题的人，我已经包含了我的更正。我能够在一个名为 checkArray 的单独函数中检查唯一数字，并通过从 fillArray 函数返回一个指针以及其他一些（包含的）调整来解决我的 fillArray 问题。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <time.h>

//Function Prototypes
int fillArray (int, int []);
int checkArray (int, int, int []);
int searchArray (int, int []);
int printArray (int, int []);

int main(){
 const int MAX = 25;
 int iArray[MAX]={0};
 int count;

 printf("Initializing lucky numbers...\n");
 fillArray(MAX,iArray);
 searchArray(MAX,iArray);

 getch();
 return 0;   
}

//Function Definitions

//Fill Array Function
int fillArray(int max, int Array[]){
int number;
int i=0;
int uniqueFlag;
srand(time(NULL));

while(i<max){
     number = (rand() % 101);
     if(checkArray(max, number, Array)==0){ //passes to another function to check for uniqueness
          Array[i]=number;
          ++i;
     }//end if
}//end while
return *Array;
}//end function

//Check Array Function
int checkArray(int max, int number, int Array[]){
int i;
int uniqueFlag;
for(i=0;i<=max;i++){
     if(Array[i]==number){  //determines if random number has already been used in array
          uniqueFlag = 1;
          return uniqueFlag;
     }//end if
     else{
          uniqueFlag = 0;
     }//end else
}//end for
     return uniqueFlag;
}//end function

//Search Array Function
int searchArray(int max, int Array[]){
int i;
int x=0;
int guessCounter=0;
int iGuess;

while(x !=1 && guessCounter<3){
       printf("Please guess a number between 0 and 100: ");
       scanf("%d",&iGuess);
       for(i=0;i<max;i++){
            if(iGuess==Array[i]){
                 x = 1;
                 }//end if
       }//end for
       switch(x){
          case 1:
               printf("%d is one of the lucky numbers. Congratulations! You win!", iGuess);
               printArray(max, Array);
               getch();
               return 0;
          default:
               printf("%d is not one of the lucky numbers.\n",iGuess);
               ++guessCounter;
          }//end switch statement
          }//end while condition
if(guessCounter==3){   //condition limits to 3 guesses per run
          printf("Sorry! You lose!");
          printArray(max, Array);
          }//end if   
}//end function

//Print Array Function
int printArray(int max, int Array[]){
int i;
printf("\nArray contents: ");
for(i=0;i<max;i++){
   printf("%d ",Array[i]);
}//end for
//getch();
//return 0;
}//end function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:48:43.287

第一眼看不`searchArray`出来有没有问题，应该简化一下。我建议将整个`uniqueFlag`部分移出它自己的功能，`doesArrayContain`也许？

# ruby - 'case' 语句如何与常量一起工作？

> ID：13022040
> 
> 赞同：10
> 
> 时间：2012-10-23T00:37:31.873
> 
> 标签：ruby, class, constants, switch-statement

我正在使用 Ruby 1.9.2 和 Ruby on Rails 3.2.2。我有以下方法：

```
# Note: The 'class_name' parameter is a constant; that is, it is a model class name.
def my_method(class_name)
  case class_name
  when Article then make_a_thing
  when Comment then make_another_thing
  when ...     then ...     
  else raise("Wrong #{class_name}!")
  end  
end 
```

我想了解为什么在`case`上面的语句中，`else`当我执行方法调用时，它总是运行“部分” `my_method(Article)`，`my_method(Comment)`等等。

我该如何解决这个问题？有人建议如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:46:00.737

将对象引用传递给该方法，因为在后台它使用 === 运算符，因此这些将失败。例如

```
obj = 'hello'
case obj.class
when String
  print('It is a string')
when Fixnum
  print('It is a number')
else
  print('It is not a string')
end 
```

另一方面，这工作正常：

```
obj = 'hello'
case obj  # was case obj.class
when String
  print('It is a string')
when Fixnum
  print('It is a number')
else
  print('It is not a string')
end 
```

请参阅“如何在 Ruby 中编写 switch 语句”的相关答案[https://stackoverflow.com/a/5694333/1092644](https://stackoverflow.com/a/5694333/1092644)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T00:51:24.810

这是因为`case`calls`===`和[`===`on Class](http://ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D)（或者特别是 Module，Class 的后代）是这样实现的：

> ### `mod === obj`→`true`或`false`
> 
> 大小写相等 -`true`如果`obj`是 的一个实例`mod`或其中一个`mod`后代，则返回。对模块的使用有限，但可用于 case 语句按类对对象进行分类。

这意味着对于除`Class`& `Module`（例如`Foo`）之外的任何常量，`Foo === Foo`总是返回`false`。结果，您总是在语句中得到`else`条件。`case`

相反，只需调用`case`对象本身，而不是其类，或使用`if`语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T17:30:12.183

`to_s`如果您只想比较名称的相等性，可以添加到类常量。

```
def my_method(class_name)
  case class_name.to_s
  when 'Article'
    make_a_thing
  when 'Comment'
    make_another_thing

  ... ...

  end  
end 
```

# vbscript - 如何在 HTA 中显示数组列表中的数据

> ID：13022045
> 
> 赞同：0
> 
> 时间：2012-10-23T00:38:10.173
> 
> 标签：vbscript, hta

我有一个[VBScript](http://en.wikipedia.org/wiki/VBScript)脚本，我用它来检查计算机中是否安装了一组软件，如果它们已安装，我只想在[HTA](http://en.wikipedia.org/wiki/HTML_Application)中显示。

但我在 HTA 中显示该信息时遇到问题。我如何解决它？

这是代码：

```
<html>
    <head>
        <title>Uninstall</title>
        <HTA:APPLICATION
            APPLICATIONNAME="Script Command Center"
            ID="oInstall"
            VERSION="1.0"
            SCROLL = "yes"
            Icon=""
            SINGLEINSTANCE="no"
            WINDOWSTATE="fixed"
        />
    </head>

    <SCRIPT Language = "VBScript">
        Const adVarChar = 200
        Const MaxCharacters = 255
        Set DataList = CreateObject("ADOR.Recordset")

        Sub Subroutine1
            DataArea.InnerHTML = "Searching ...... please wait"
            document.body.style.cursor = "wait"
            idTimer = window.setTimeout("Subroutine2", 2000, "VBScript")
        End Sub

        Sub Subroutine2
            window.clearTimeout(idTimer)
            On Error Resume Next
            Dim strAnswere
            Const HKEY_LOCAL_MACHINE = &H80000002
            Set WshShell = CreateObject("WScript.shell")
            AppList = Array("Torrent","Toshiba", "Java")
            For Each AppName in AppList
                'WSCript.Echo "Searching for keyword: " & AppName
                'First, find the GUID
                strComputer = "."
                Set objReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")
                strKeyPath = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall"
                objReg.EnumKey HKEY_LOCAL_MACHINE, strKeyPath, arrSubKeys,strName

                For Each subkey In arrSubKeys
                    InstalledAppName = ""
                    InstalledAppName = WshShell.RegRead("HKLM\" & strKeyPath & "\" & subkey & "\DisplayName")
                    InstalledAppVersion = WshShell.RegRead("HKLM\" & strKeyPath & "\" & subkey & "\DisplayVersion")
                    'Wscript.Echo InstalledAppName
                    If InStr(1,InstalledAppName,AppName,1) > 0 Then
                        strName = InstalledAppName
                        DataList("SoftwareName") = strName

                        RawGUID = ""
                        GUID = ""
                        RawGUID = WshShell.RegRead("HKLM\" & strKeyPath & "\" & subkey & "\UninstallString")
                        GUID = Mid(RawGUID, instr(RawGUID, "{"), 38)
                        'WSCript.Echo GUID
                        If GUID<>"" Then
                            strAnswere = MsgBox("Do you want to Uninstall " & AppName & " Version " & InstalledAppVersion &" ? ", vbYesNoCancel, "Uninstaller")
                            If strAnswere = vbYes Then
                                WshShell.Run "msiexec /x " & GUID & " /q"
                            ElseIf strAnswere = vbCancel Then
                                Wscript.Echo "Cancel was clicked... Quitting."
                                Wscript.Quit
                            ElseIf strAnswere = vbNo Then
                                WScript.Echo "The App still install"
                                DataArea.InnerHTML = strHTML
                                DataList("SoftwareName") = strName
                                DataList.Fields.Append "SoftwareName", adVarChar, MaxCharacters
                                DataList.Fields.Append "Vendor", adVarChar, MaxCharacters
                                DataList.Fields.Append "Version", adVarChar, MaxCharacters
                                DataList.Fields.Append "UninstallString", adVarChar, MaxCharacters
                                DataList.Open

                                strHTML = "<form name=""softwareform"" method=""post"">" & _
                                          "<table class=""softwaretable"">" & _
                                          "<tr>" & _
                                              "<th style=""width:30%;text-align:left;cursor:hand;"" " & _
                                                  "title=""Sort by Software Title"" onClick=SortSoftwareItems(1)>" & _
                                                  "Software Title&nbsp;&nbsp;&nbsp;^</th>" & _
                                              "<th style=""width:24%;text-align:left;cursor:hand;"" " & _
                                                  "title=""Sort by Vendor"" onClick=SortSoftwareItems(2)>Vendor</th>" & _
                                              "<th style=""width:15%;text-align:left;cursor:hand;"" " & _
                                                  "title=""Sort by Version"" onClick=SortSoftwareItems(3)>Version</th>" & _
                                              "<th style=""width:8%;"">&nbsp;</th>" & _
                                              "<th style=""width:8%;"">&nbsp;</th>" & _
                                          "</tr>"
                            End If
                            Exit For
                        End If
                    End If
                Next
                If subkey = "" Then
                    WScript.Echo "no"
                End If
            Next
        End Sub
    </SCRIPT>

    <body>
        <h1 style="text-align:center">uninstall</h1>
        <input type="button" value="Count Events" onClick="Subroutine1"><p>

        <span id=SoftwareNameArea></span>
        <span id=SoftwareVersionArea></span>
        <br /><br />

        <div id="DataArea"></div>
    </body>
</html> 
```

# c# - 在主 (UI) 线程之外的另一个线程中更改控制属性

> ID：13022049
> 
> 赞同：0
> 
> 时间：2012-10-23T00:38:55.710
> 
> 标签：c#, multithreading

我现在正在使用 namedpipe 和 C# 实现网络程序。在服务器程序的 main 方法中，我启动了一个名为“ReadingMessage”的线程，用于读取来自客户端程序的消息。在这个线程中，它需要根据客户端返回的消息来改变控件的属性（文本框的文本、标签的位置等）。因此，它在此过程中出现了跨线程错误（“ReadingMesssage between UI thread”）。我发现有两种方法可以解决这个问题

1.  使用 Delegate 调用控件
2.  Form.CheckForIllegalCrossThreadCalls = false;

我测试了他们两个，但有一个问题。当窗体第一次启动时，控件的属性被更改而没有任何错误。当窗体关闭并第二次重新启动时，控件的属性不会更改，并且不会显示任何错误消息。我捕捉到指示控件属性更改的代码的断点。代码运行顺利，但问题仍然存在。

我不知道那是什么问题。因此，如果有人知道这个问题，请建议我...

**更新：（在我的第一个问题中发布代码并更正一些错误）**

该线程**不在**服务器程序的 main 方法中。我错了，因为我想简短地描述我的问题。现在，我将更详细地描述我的问题。在服务端程序的主窗体中有一个按钮点击事件。

```
//Main Form
public partial class MainForm : Form
{
    private void btnButton_Click(object sender, EventArgs e)
    {
       AnotherForm aform = new AnotherForm(); //This is the form where threading run
       aform.show();    
    }
}

//AnotherForm
public partial class AnotherForm : Form
{
    private void CargoLoading_Load(object sender, EventArgs e)
    {
        (new System.Threading.Thread(readingMessage)).Start(myPipe);    
    }
}

private void readingMessage(Object myPipeObject) //Read the messages send from the client machine
{
     while (true)
     {
         //Code of serverstream
         SetTextofTextBox1("AnyText"); //Code where the properties of control are instructed to change
     }
}

private void SetTextofTextBox1(string text)
{
     if (this.txtTextBox1.InvokeRequired) //the debugger return false at second time of this form is opened
     {
         SetTextCallback d = new SetTextCallback(SetTextofTextBox1);
         this.Invoke(d, new object[] { text });
     }
     else
     {
          this.txtTextBox1.Text = text;
          this.txtTextBox1.Update();
     }
} 
```

这就是出现问题的所有代码。当“AnotherForm”第一次打开时，没关系。但是第二次再次打开时，控件的属性（TextBox1的文本）不受影响也不改变。在那里，我注意到调试器`Control.InvokeRequired`在第二次返回 false 。真的很抱歉所有长时间的问题，因为我是程序员的新手。

仍然期待您的建议...

**更新 2：**

最后，我尝试了所有方法，但没有找到最好的解决方案。因此，我想建议大家避免这种情况，当你遇到像我这样的情况时，用另一个概念重写你的一些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:48:04.007

在您的后台线程中，您应该使用`Control.InvokeRequired`and`Control.Invoke`以使 UI 线程执行更新 UI 的代码。

仅允许 UI 线程“触摸”控件属性，因此您的后台线程无法更新它们。

更具体地说，如果您对更多细节感兴趣：在 Windows 中，每个窗体和控件通常有 1 个或多个 HWND 与之关联。HWND 是表示 Windows 窗口的 Windows 操作系统对象的句柄。

每个 HWND 始终与特定线程相关联，即创建它的线程。发送到该 HWND 的任何 Windows 消息都将到达该线程的消息队列，并且必须由该线程的消息循环处理。

当您对 Controls 方法进行看似无辜的调用时，这些方法的实现有时可能会在后台破坏并创建 HWND（例如，为 Menu 控件创建子菜单或向 Toolbar 控件添加按钮）。现在，如果您要从不同的线程进行此类调用，您最终会得到属于不同线程的 HWND，并且您的控件消息的处理将被破坏。

出于这个原因，除了创建控件的 HWND 的线程（例如调用 `Control.CreateControl() 的线程）之外，任何线程都禁止对控件方法的所有访问。

归根结底，对于大多数简单的应用程序，主线程是唯一创建窗口的线程，因此您应该只从主线程中接触窗体和控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:00:19.967

请张贴代码。特别是您用来打开和关闭窗口的代码。

根据您的描述，我猜您正在`Application.Run()`表单上运行一个循环，同时运行后台线程。

然后，也许您正在关闭表单并打开一个新表单，而不运行消息循环。所以`Control.Invoke`返回，但回调不会被 UI 线程调用（不是泵送消息）。

这只是一个猜测，没有看到代码。

# c# - 如何 SWIG std::string& 到 C# 引用字符串

> ID：13022051
> 
> 赞同：10
> 
> 时间：2012-10-23T00:39:29.227
> 
> 标签：c#, c++, string, swig

我正在尝试`std::string`参考 C# 转换 C++ 函数。

我的 API 如下所示：

```
void GetStringDemo(std::string& str); 
```

理想情况下，我希望从 C# 中看到类似的东西

```
void GetStringDemoWrap(ref string); 
```

我知道我需要为此创建一个类型映射，并且我通过使用 std_string.i 文件尝试了一些事情，但我认为我没有得到任何结果。有没有人有任何例子。我对 Swig 和 C# 都是新手，所以我无法提出任何真正的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:01:27.403

以防万一有人在未来寻找这个，我为 C# 创建了 std_string.i 这样的。似乎对我有用。请注意，我将 ref 更改为 out 因为它更适合我的情况，但 ref 也应该可以工作。

我从 .i 文件中调用了 %include "std_string.i"

```
/* -----------------------------------------------------------------------------
 * std_string_ref.i
 *
 * Typemaps for std::string& and const std::string&
 * These are mapped to a C# String and are passed around by reference
 *
 * ----------------------------------------------------------------------------- */

%{
#include <string>
%}

namespace std {

%naturalvar string;

class string;

// string &

%typemap(ctype) std::string & "char**"
%typemap(imtype) std::string & "/*imtype*/ out string"
%typemap(cstype) std::string & "/*cstype*/ out string"

//C++
%typemap(in, canthrow=1) std::string &
%{  //typemap in
    std::string temp;
    $1 = &temp; 
 %}

//C++
%typemap(argout) std::string & 
%{ 
    //Typemap argout in c++ file.
    //This will convert c++ string to c# string
    *$input = SWIG_csharp_string_callback($1->c_str());
%}

%typemap(argout) const std::string & 
%{ 
    //argout typemap for const std::string&
%}

%typemap(csin) std::string & "out $csinput"

%typemap(throws, canthrow=1) string &
%{ SWIG_CSharpSetPendingException(SWIG_CSharpApplicationException, $1.c_str());
   return $null; %}

} 
```

我需要为 const std::string& 定义 argout 的原因是因为 SWIG 会混淆并使用类型映射覆盖 const std::string&。所以我明确告诉它不要在我的情况下覆盖（你可能有不同的用例）

对于 Python，我创建了这样的东西：

```
%typemap(argout)std::string&
{
    //typemap argout std::string&
    PyObject* obj = PyUnicode_FromStringAndSize((*$1).c_str(),(*$1).length());

    $result=SWIG_Python_AppendOutput($result, obj);
}

%typemap(argout) const std::string & 
%{ 
    //argout typemap for const std::string&
%} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-26T02:16:54.883

```
%typemap(in, canthrow=1) std::string & (std::string temp)
%{  
    //typemap in
    $1 = &temp; 
%} 
```

在亚历克斯的答案`std::string temp`中应该是最重要的，所以如果你有多个输出，swig 会自动重命名变量。

# java - What kind of class/object uses information about several objects to represent a larger system?

> ID：13022052
> 
> 赞同：2
> 
> 时间：2012-10-23T00:39:30.350
> 
> 标签：java, design-patterns

Let's say I have a class Tree that "has" zero or more Branches, and each Branch "has" zero or more Fruit, etc.

Let's say I want to create one object that allows you to treat all of that data as a single object, so a user of my interface wouldn't say "Tree, iterate through all of your branches. For each branch, add how many fruit there are to a total." but instead would just say "Tree, how many fruit do you have?" or "How many Apples do you have?"

What kind of object is this? What design pattern is applicable?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T00:55:41.923

对我来说听起来像是访客模式 - 请参阅[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。

在维基百科文章中，他们给出了一个由 Car 元素组成的 Car 的示例。有一个基类 CarElementVisitor。元素和基本访问者类协作以允许通过树进行迭代。

在您的情况下，您可能有一个基类 TreeElementVisitor，它知道如何在树、水果等中导航。

```
"Tree, how many fruit do you have?" 
```

为了解决这个问题，您创建了一个名为 FruitCountingVisitor 的 TreeElementVisitor 子类，它将运行计数作为成员变量。所有`visitFruit`方法都会增加计数器。其他方法，如等`visitTree`，`visitBranch`什么都不做。

```
Tree tree = // create a tree
FruitCountingVisitor visitor = // create the visitor
tree.accept(visitor);
System.out.println(visitor.getCount()); 
```

然后，您可以创建一个 AppleCountingVisitor - 或者泛化 FruitCountingVisitor 以根据构造函数参数过滤特定的水果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:57:02.720

这正是[复合](http://en.wikipedia.org/wiki/Composite_pattern)模式：

> 将对象组合成树结构以表示部分整体的层次结构。Composite 让客户可以统一处理单个对象和对象的组合。

顺便说一句，复合模式的使用确实允许您轻松地使用访问者对树的节点进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T01:05:56.813

您可能也对非 Java 特定的解决方案感到好奇，在这种情况下，我认为您可以使用*fold*。Wikipedia 描述了一种非常通用的方法来迭代树状结构并从该迭代中生成某种类型的结果：

[http://en.wikipedia.org/wiki/Catamorphism#Example](http://en.wikipedia.org/wiki/Catamorphism#Example)

另见：

[http://en.wikipedia.org/wiki/Fold_(higher-order_function](http://en.wikipedia.org/wiki/Fold_(higher-order_function) )

# c# - Reading lines of text from file with Using and Yield Return

> ID：13022054
> 
> 赞同：3
> 
> 时间：2012-10-23T00:39:32.043
> 
> 标签：c#, .net, using, yield-return

I have the method below which uses Yield Return to read large ( >1m ) lines of text from a file.

```
 private static IEnumerable<string> ReadLineFromFile(TextReader fileReader)
    {
        using (fileReader)
        {
            string currentLine;
            while ((currentLine = fileReader.ReadLine()) != null)
            {
                yield return currentLine;
            }
        }
    } 
```

I need to be able to write every 10 lines returned from this method to different files.

How do I consume this method without enumerating all the lines?

Any answer is very much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:24:08.653

我想我终于让它工作了:-)

```
 var listOfBufferedLines = ReadLineFromFile(ReadFilePath);

        var listOfLinesInBatch = new List<string>();
        foreach (var line in listOfBufferedLines)
        {
            listOfLinesInBatch.Add(line);

            if (listOfLinesInBatch.Count % 1000 == 0)
            {
                Console.WriteLine("Writing Batch.");
                WriteLinesToFile(listOfLinesInBatch, LoadFilePath);
                listOfLinesInBatch.Clear();
            }
        }

        // writing the remaining lines
        WriteLinesToFile(listOfLinesInBatch, LoadFilePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:25:19.003

如果你运行下面的代码，你可以看到你需要做的就是在 foreach 循环中调用你的方法，它会一次迭代一个，你只需要将它缓冲到你选择的批量大小。

```
static void Main (string [] args)
{
    int batch_size = 5;
    string buffer = "";
    foreach (var c in EnumerateString("THISISALONGSTRING")) 
    {               
        // Check if it's time to split the batch
        if (buffer.Length >= batch_size) 
        {
            // Process the batch
            buffer = ProcessBuffer(buffer);
        }

        // Add to the buffer
        buffer += c;
    }

    // Process the remaining items
    ProcessBuffer(buffer);

    Console.ReadLine();
}

public static string ProcessBuffer(string buffer)
{
    Console.WriteLine(buffer);  
    return "";
}

public static IEnumerable<char> EnumerateString(string huh)
{
    for (int i = 0; i < huh.Length; i++) {
        Console.WriteLine("yielded: " + huh[i]);
        yield return huh[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:25:38.597

绝对不是解决这个问题的优雅方法，但它会起作用

```
static void Main(string[] args)
        {

            try
            {
                System.IO.TextReader readFile = new StreamReader(@"C:\Temp\test.txt");
                int count = 0;
                List<string> lines= new List<string>();
                foreach (string line in ReadLineFromFile(readFile))
                {
                    if (count == 10)
                    {
                        count = 0;
                        ProcessChunk(lines);
                        lines.Add(line);
                    }
                    else
                    {
                        lines.Add(line);
                        count++;
                    }

                }
                //PROCESS the LINES
                ProcessChunk(lines);

                Console.ReadKey();
            }
            catch (IOException ex)
            {
                Console.WriteLine(ex.ToString());
            }
        }

        private static void ProcessChunk(List<string> lines)
        {
            Console.WriteLine("----------------");
            lines.ForEach(l => Console.WriteLine(l));
            lines.clear();
        }

        private static IEnumerable<string> ReadLineFromFile(TextReader fileReader)
        {
            using (fileReader)
            {
                string currentLine;
                while ((currentLine = fileReader.ReadLine()) != null)
                {
                    yield return currentLine;
                }
            }
        } 
```

# perl - 在 Perl 中解析具有重复部分的文件

> ID：13022055
> 
> 赞同：2
> 
> 时间：2012-10-23T00:39:54.697
> 
> 标签：perl, parsing, hash

我正在尝试使用 Perl 解析具有重复部分的文件，如下所示：

```
系统：server1.domain.com
开始时间：20121021T01:00:56
停止时间：20121021T01:00:56
返回码：0

输出
------
用户1
用户2
用户3

##############################

系统：server2.domain.com
开始时间：20121021T01:00:56
停止时间：20121021T01:00:56
返回码：0

输出
------
用户1
用户4
用户5
用户6

```

我可以将输入记录分隔符设置为 "##############################" 这将给我每个块作为单独的记录。

但我需要能够使用用户名作为每个服务器的键填充散列。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:05:28.110

尝试这样做：

```
use strict; use warnings;
use Data::Dumper;          # one of the top 5 modules you should know

my $hash_of_hashes = {};   # a reference to a void HASH

my $current;

while (<>) {
    chomp;
    if (/^System:\s+(.+)/) {
        $current = $1;
    }
    elsif (/^([^:]+):(.+)/) {
        $hash_of_hashes->{$current}->{$1} = $2;
    }
}

print Dumper $hash_of_hashes; # Dumper is a function of Data::Dumper module
# it prints all the data structure in a human readable way 
```

要使用它：

```
perl script.pl input_file.txt 
```

**笔记**

我假设`System:`line 始终与当前主机的第一行匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:53:53.447

您应该查看[Perl 参考资料](http://perldoc.perl.org/perlreftut.html)。

在 Perl 5.0 之前的版本中，您拥有三种类型的数据结构，并且您只能在其中存储标量数据。例如，我可以有一个散列，但散列的每个值都可以是字符串或数字。

Perl 5.0 引入了引用。引用是*指向*另一个数据结构的一段数据。例如，您可以有一个代表服务器的散列​​。散列的每个成员都*指向*另一个包含用户的散列（或用户列表，如果您愿意）。

例如，您有一个如下所示的哈希：

```
$system{server1.domain.com}  --->  $anon_array[0] = "user1"
                                   $anon_array[1] = "user2"
                                   $anon_array[2] = "user3"

$system{server2.domain.com}  ----> $another_anon_array[0] = "user1"
                                   $another_anon_array[1] = "user2"
                                   $another_anon_array[2] = "user3"
                                   $another_anon_array[3] = "user4" 
```

您可以在上面看到，您的`%system`哈希键实际上指向内存中包含用户列表的某个数组。这些数组没有名称，例如`@foo`or `@bar`。您可以访问它们的唯一方法是通过您的`%system`哈希。因此，它们被称为匿名数组。

要创建引用，请在变量前面放置一个反斜杠：

```
$my_reference = \%my_hash 
```

现在，`$my_reference`指向hash的*成员*`%my_hash`。如果我想再次将引用变成哈希，我在它前面加上哈希符号（the `%`）：

```
%bar = %{$my_reference}; 
```

您可以使用`->`语法来显示某些内容指向引用：

```
$foo->[0];   Points to the first member of an anonymous array.

$bar = [];    #Sets $bar to be a reference to an anonymous array
$foo = {};    #Sets $foo to be a reference to an anonymous hash. 
```

现在，真正的乐趣可以开始了！您现在可以存储整个数据结构，而不是存储单个值。

想象一下这样的事情：

```
my %system;   #Normal hash keyed by domain name

$system{server1} = {};  # This points to an anonymous hash!
$system{server1}->{START}  = "20121021T01:00:56";
$system{server1}->{STOP}   = "20121021T01:00:56";
$system{server1}->{RETURN} = 0;
$system{server1}->{USERS} = [];  #This hash entry points to an anonymous array
$system{server1}->{USERS}->[0] = "user1";
$system{server1}->{USERS}->[1] = "user2";
$system{server1}->{USERS}->[2] = "user3"; 
```

依此类推`server2`。`%system`您有一个以域名为关键字的哈希值。`%system`哈希中的每个域都有一个`START`时间`STOP`、一个`RETURN`值、一个`USERS`该系统上的列表。什么是开始时间`server1`？是`$system{server1}->{START}`。用户列表是什么`system2`？它是`@{ $system{server2}->{USERS} }`（对存储在 中的数组的取消引用`$system{server2}->{USERS}`）。

习惯这种新的思维方式需要一些时间，但您可以看到它有助于将您的数据作为一个单一的结构保持在一起。

当然，复杂的数据结构也带来了保持直截了当的问题。例如：

```
use strict;
use warnings;

my %server;
$servre{domain1} = "10.10.1.20"; 
```

将失败，因为我从未宣布`$servre`. 然而：

```
use strict;
use warnings;
my $hash = {};
$hash->{SERVRE}->{domain1} = "10.10.1.20"; 
```

会工作得很好。在这种情况下，`SERVRE`是哈希引用的键而不是变量。在这种情况下，`use strict;`编译指示不会检测到我的拼写错误。这将引导您进入下一步：面向对象的 Perl。但是，首先要了解这些新的复杂数据结构以及它们是如何工作的。在您在程序中使用它们变得更加舒适之后，您可以开始研究*面向对象编程*将如何帮助驯服它们造成的混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:00:07.280

一个有趣的问题，让我想使用[段落模式](http://perldoc.perl.org/perlvar.html#%24/)。使用`####...`作为输入记录分隔符当然是一个想法，但它有点不稳定并且不那么灵活。例如，`$/`must be *literal*，这意味着您必须拥有确切的字符数。

*如果*您可以依赖输入中显示的双换行符，段落模式将分两部分读取每个“集合”，然后将`####...`分隔符作为容易丢弃的第三部分，以及开始新数据集的信号。此外，通过这种方式，我们可以更轻松地访问“用户”部分，这可能有点随机，唯一决定性的特征是它前面有标题“输出\n------”。

```
use strict;
use warnings;
use Data::Dumper;

$/ = "";                             # use paragraph mode
my @data = [];                       # first element must be array ref
while (<DATA>) {
    unless (/^#+\s*$/) {             # if not delimiter
        push @{ $data[-1] }, $_;     # save data in the arrays last element
    } else {
        push @data, [];              # start new array (which becomes the last)
    }
}
my %hash;
for (@data) {
    my ($sys, $out) = @$_;                  # $_ is an array ref w two elements
    my ($server) = $sys =~ /System:\s*(\S+)/;   # extract server name
    my @users = split /\n+/, $out;          # easy extraction of users
    splice @users, 0, 2;                    # remove header
    $hash{$server}{$_} = undef for @users;  # add key w undef value
}

print Dumper \%hash;
__DATA__
System:      server1.domain.com
Start Time:  20121021T01:00:56
Stop Time:   20121021T01:00:56
Return Code: 0

Output
------
user1
user2
user3

##############################

System:      server2.domain.com
Start Time:  20121021T01:00:56
Stop Time:   20121021T01:00:56
Return Code: 0

Output
------
user1
user4
user5
user6 
```

**输出：**

```
$VAR1 = {
          'server1.domain.com' => {
                                    'user1' => undef,
                                    'user3' => undef,
                                    'user2' => undef
                                  },
          'server2.domain.com' => {
                                    'user5' => undef,
                                    'user1' => undef,
                                    'user4' => undef,
                                    'user6' => undef
                                  }
        }; 
```

关于细节的一些注释：

*   `$data[-1]`是一样的`$data[$#data]`，我只是觉得它看起来更具可读性。
*   将一个空数组 ref 推入`@data`意味着我们开始收集一个新集合。这与上面的注释结合使用。
*   将数据保存在二维数组中可以省去我们将“不可预测”的用户名与其他数据区分开来的麻烦。
*   在多个换行符上拆分输出块会去除我们的数据中任何麻烦的尾随换行符，这很方便，因为`chomp`在段落模式下只会去除双换行符（除非我们`$/`再次更改）。
*   作为值添加`undef`到用户名键只是您可能希望放在那里的任何其他值的占位符。
*   更改`<DATA>`为`<>`并替换 Dumper 输出将允许您在脚本中使用文件名 args 或 stdin。这些功能仅用于演示。用法是：

* * *

```
some_command | perl script.pl > output.txt
perl script.pl input.txt > output.txt 
```

# web-services - How can I get cookies from a request to a webservice using Play Framework 2.0?

> ID：13022058
> 
> 赞同：0
> 
> 时间：2012-10-23T00:40:14.790
> 
> 标签：web-services, authentication, cookies, playframework, playframework-2.0

How can I get cookies from a authentication request to a webservice that uses session? I can not change the webservice implementation.

```
public static Result authenticate(){
    Form<Login> f = form(Login.class).bind(request().body().asJson());

    Promise<WS.Response> result = WS.url("http://site/login")
        .post("{\"login\":\"login\", \"password\":\"password\"}");

    return async(result.map(
            new Function<WS.Response, Result>() {
                public Result apply(WS.Response response) throws Throwable {
                    if(response.getStatus() == OK){
                        JsonNode jn = response.asJson();
                        session("username", jn.get("login").toString());

                        // how can I get cookies from webservice?

                        return ok(jn);
                    }else{
                        return internalServerError();
                    }
                }
            }
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:57:54.317

[我在这里](https://stackoverflow.com/questions/9684103/how-can-i-put-a-cookie-in-jersey-restful-webservice#answer-9706362)找到了答案。第一个 Web 服务响应具有 Set-Cookie 标头。

```
response.getHeader("Set-Cookie"); 
```

# c# - 组合相似的 LINQ 查询

> ID：13022064
> 
> 赞同：0
> 
> 时间：2012-10-23T00:41:22.173
> 
> 标签：c#, linq, linq-to-objects

我有一个格式为 csv 的文件

左选择，右选择，左 || 对

其中 LeftChoice 和 RightChoice 是非唯一文本字符串，而 Left || 右边是被选中的字符串。

我想要做的是获得一个包含每个元素的列表：字符串、选择的计数、非选择的计数。

目前我有以下内容：

```
 var result = from line in file
                     let values = line.Split(',')
                     select new { Choice1 = values[0], Choice2 = values[1],  Result =  values[2].Equals("left")};

        var leftTrue = from dataSet in result
                 where dataSet.Result
                 group dataSet.Choice1 by dataSet.Choice1 into C1
                 select new { Value = C1.Key, Count = C1.Count() };

        var leftFalse = from dataSet in result
                       where !dataSet.Result
                       group dataSet.Choice1 by dataSet.Choice1 into C1
                       select new { Value = C1.Key, Count = C1.Count() };

        var rightTrue = from dataSet in result
                       where !dataSet.Result
                       group dataSet.Choice2 by dataSet.Choice2 into C2
                       select new { Value = C2.Key, Count = C2.Count() };

        var rightFalse = from dataSet in result
                        where dataSet.Result
                        group dataSet.Choice2 by dataSet.Choice2 into C2
                        select new { Value = C2.Key, Count = C2.Count() }; 
```

示例输入

```
 Fred,Cole,left
 Jill,Dave,right
 Pat,Fred,right
 Pat,Pat,left 
```

示例输出：会给

```
Name Chosen NotChosen
Fred   2        0
Cole   0        1
Jill   0        1
Dave   1        0
Pat    1        2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:12:29.243

我认为最简单的方法是按名称分组，然后计算名称被选择和未选择的次数。

```
var result = from line in file
             let values = line.Split(',')
             let left = values[0]
             let right = values[1]
             let leftChosen = values[2].Equals("left")
             let pair = new [] 
                        { 
                            new { Name = left, IsChosen = leftChosen }, 
                            new { Name = right, IsChosen = !leftChosen } 
                        }
             from item in pair
             group item by item.Name into nameGroup
             select new 
                    {
                        Name = nameGroup.Key, 
                        ChosenCount = nameGroup.Count(x => x.IsChosen),
                        NonChosenCount = nameGroup.Count(x => !x.IsChosen)
                    }; 
```

# c# - 在 Silverlight 中进行多次回调以从数据库中获取数据是一种好习惯吗？

> ID：13022068
> 
> 赞同：1
> 
> 时间：2012-10-23T00:41:47.423
> 
> 标签：c#, silverlight, entity-framework-4, silverlight-4.0, callback

我正在使用 SL 5.0 和 EntityFramework。我需要从两个实体获取数据，但我不喜欢我正在做的方式......通过回调。

```
var context = ...
context.Load(context.GetTestTemplatesSummaryQuery("OPA-3DKCL2")).Completed += (s, e) =>
    {
        var result = context.GetTestTemplatesSummary_Results;
        var result2 = ...

        context.Load(context.GetTestTemplatesSummaryQuery(result)).Completed += (s2, e2) =>
        {
             ... 
        };
    }; 
```

我正在寻找一种优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:21:40.167

您所做的对于.Net 1.0 到 4.0 版本是完全正确的。这就是 .Net 世界中异步编程的工作方式。

.Net 4.5 有一个用于异步编程的新 async/await 机制，如下所示：

```
public async Data GetData()
{
    return await _myService.GetDataAsync();
} 
```

当您编译代码时，它会分解为一系列异步方法，但开发人员编写的代码会大大简化。

如上所述，如果您有 VS 2012 (VS 11)，那么您可以下载一个包，该包允许您将 await async 与 Silverlight 5 一起使用。如果您不使用 VS 2012，那么您目前正在做的事情是完全正确的。

# php - php string search and replace text before

> ID：13022069
> 
> 赞同：-3
> 
> 时间：2012-10-23T00:41:52.417
> 
> 标签：php, string

> **Possible Duplicate:**
> [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)
> [How to parse and process HTML with PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)
> [Simple: How to replace “all between” with php?](https://stackoverflow.com/questions/6875913/simple-how-to-replace-all-between-with-php)

I am looking for a way to change all the text in an anchor tag that contains certain text in php

ie:

```
<a href="stackoverflow.com"><strong>This is text</strong></a> 
```

I want to seach for 'This is text' and then replace the anchor tags that the text is in with with something else.

Is it easiest to do with regular expressions?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:54:51.667

Html 可以像 xml 一样对待。您应该使用 php xml 函数来执行此操作。见[http://php.net/manual/en/book.xml.php](http://php.net/manual/en/book.xml.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:08:24.550

您可以通过以下方式轻松做到这一点`DOMXpath`：

```
$s =<<<EOM
<a href="stackoverflow.com"><strong>This is text</strong></a>
EOM;

$d = new DOMDocument;
$d->loadHTML($s);
$x = new DOMXPath($d);

foreach ($x->query("//a[contains(strong, 'This is text')]") as $node) {
        $new = $d->createTextNode('Hello world');
        $node->parentNode->replaceChild($new, $node);
}

echo $d->saveHTML(); 
```

# uiactivityviewcontroller - UIActivityViewController with customized Mail Application

> ID：13022070
> 
> 赞同：4
> 
> 时间：2012-10-23T00:41:54.980
> 
> 标签：uiactivityviewcontroller

I am creating a UIActivityViewController where I am passing images & texts to Facebook,mail,twitter.

```
-(void)Activityshowmethod{
NSLog(@"The Selected Photo Count %i",[self.selectedPhotos count]);
//UIActivityViewController *activityViewController2 =[[UIActivityViewController alloc]init];
NSMutableArray *newArray=[[NSMutableArray alloc]init];
NSMutableArray *newArraytext=[[NSMutableArray alloc]init];
logactivity *shopactivity=[[logactivity alloc]init];

[shopactivity setSelectedthings:self.selectedPhotos];
for (log * ChosenPhot in self.selectedPhotos) {

    NSString *initalTextString = [NSString
                                  stringWithFormat:@"I am Sending from my log : %@",
                                  ChosenPhot.categoryname];
    //[newArraytext arrayByAddingObject:initalTextString];
    [newArraytext addObject:initalTextString];
    CreateShoplogTagImage *createimagetag=[[CreateShoplogTagImage alloc]init];
    UIImage *newimage=[createimagetag Imagetag:ChosenPhot];

    [newArray addObject:newimage];

}
//NSMutableArray *addArray=[[NSMutableArray alloc]initWithObjects:newArray,newArraytext, nil];
NSMutableArray *addArray=[[NSMutableArray alloc]initWithArray:newArray];
[addArray addObjectsFromArray:newArraytext];
UIActivityViewController *activityViewController2 =[[UIActivityViewController alloc]initWithActivityItems:addArray applicationActivities:@[shopactivity]];

[self presentViewController:activityViewController2 animated:YES completion:^{}]; 
```

}

Although I would like to share files in the same UIActivityViewController , so I created my own UIActivity, I created the File inside it in

```
 - (void)performActivity
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"slog.log"];
    NSLog(@"The String of the Path is :%@",filePath);
    NSData *savedData = [NSKeyedArchiver archivedDataWithRootObject:self.Selectedthings];
    [savedData writeToFile:filePath atomically:YES];
    //[self.Selectedthings writeToFile:filePath atomically:YES];
    TestViewController *test=[[TestViewController alloc]init];
    NSLog(@"I have Pushed the Shoplog Button");
    [test showmailcomposer:savedData];
} 
```

Then I tried to show the mail composer from my rootviewcontroller ( Testviewcontroller) With the Following Code :

```
 -(void)showmailcomposer:(NSData*)datafile{

    if ([MFMailComposeViewController canSendMail]) {
       MFMailComposeViewController *mailer =[[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;
        [mailer setSubject:@"Check out these Shoplog Photos"];
        NSMutableString *emailBody = [NSMutableString string];
        [mailer addAttachmentData:datafile mimeType:@"log" fileName:@"Slog"];

        [emailBody appendFormat:@"Sent from my log " ];
        [mailer setMessageBody:emailBody isHTML:NO];
        [self presentViewController:mailer animated:YES completion:^{}];
    }
} 
```

The error that I am getting is the following :

> timeout messaging Mail to determine CanSendMail state

# java - 将对象添加到按字母顺序排列的数组列表中

> ID：13022073
> 
> 赞同：2
> 
> 时间：2012-10-23T00:42:27.003
> 
> 标签：java

此代码要求用户输入具有名称、型号年份、上市价格和折扣百分比的车辆对象。这里发生的问题是，当用户输入上述所有信息时，汽车对象被添加到数组列表的底部，而不是按字母顺序。请注意，该列表之前是按字母顺序排列的。

```
while (!valid) {
    String str = scan.nextLine();
    try {
        boolean found = false;
        System.out.println("Enter car name: ");
        name = scan.nextLine();
        System.out.println("Enter car model year: ");
        modelYear = scan.nextLine();
        System.out.println("Enter car list price: ");
        listPrice = scan.nextDouble();
        System.out.println("Enter car percent discount: ");
        percentDiscount = scan.nextDouble();

        int i = 0;
        loc = 0;
        while (!found && i < carList.size()) {
            String nameRetrievedFromCarList = carList.get(i).getName();
            String nameToAdd = "";
            if (nameToAdd.compareToIgnoreCase(nameRetrievedFromCarList) < 0) {
                loc++;
                found = true;

            }
            i++;

        }// end while

        Proj1CarData newCar = new Proj1CarData(name, modelYear, listPrice, percentDiscount,
                discountAmount, netPrice);
        carList.add(loc, newCar);

        valid = true;

    }// end try

    catch (NumberFormatException nfe) {
        System.out.println("Wrong entry:  Try again");
    }// end catch

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:02:28.780

虽然稍微偏离主题，但您可以使用[`Collections.binarySearch`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)来确定应该在哪里插入新值......

来自 Java 文档

> 返回： 搜索键的索引，如果它包含在列表中；否则，（-（插入点）- 1）。**插入点定义为将键插入列表的点**：第一个元素的索引大于键，如果列表中的所有元素都小于指定的键，则为 list.size()。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

```
Proj1CarData newCar = new Proj1CarData(name, modelYear, listPrice, percentDiscount, discountAmount, netPrice);

int index = Collections.binarySearch(carList, newCar);
if (index < 0) {
    index = (index * -1) - 1;
}

carList.add(index, newCar); 
```

这假设`Proj1CarData`是`Comparable`，否则您将需要提供自己的`Comparator`

```
Proj1CarData newCar = new Proj1CarData(name, modelYear, listPrice, percentDiscount, discountAmount, netPrice);

int index = Collections.binarySearch(carList, newCar, 
    new Comparator<Proj1CarData>() {
        public int compare(Proj1CarData car1, Proj1CarData car2) {
            return car1.getName().compareToIgnoreCase(car2.getName());
        }
    });

if (index < 0) {
    index = (index * -1) - 1;
}

carList.add(index, newCar); 
```

**更新**

```
List<String> names = new ArrayList<String>(25);
names.add("Hurzdiirn");
names.add("Alydriira Talabdiira");
names.add("Urlidil Sineth");
names.add("Quavyraen Belarral");
names.add("Belarayne'bryn Agh'Quarbryn");
names.add("Alakgos");
names.add("Sszoj'hrae Laelraema");
names.add("Szornet");
names.add("Filojafay");
names.add("Lltril'net Chaszhrae");

Collections.sort(names);

for (int index = 0; index < names.size(); index++) {
    String name = names.get(index);
    System.out.println("[" + index + "] " + name);
}

int insertAt = Collections.binarySearch(names, "Luke");
if (insertAt < 0) {
    insertAt = (insertAt * -1) - 1;
}

names.add(insertAt, "Luke");

for (int index = 0; index < names.size(); index++) {
    String name = names.get(index);
    System.out.println("[" + index + "] " + name);
}

Collections.sort(names);
for (int index = 0; index < names.size(); index++) {
    String name = names.get(index);
    System.out.println("[" + index + "] " + name);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T00:45:42.400

变量`found`在初始化后永远不会改变，所以`while`循环总是到列表的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:17:53.707

我无法清楚地抓住你的问题。我猜你得到“字母顺序”的算法有一些逻辑错误。

```
while (!found && i < carList.size()) {
            String nameRetrievedFromCarList = carList.get(i).getName();
            String nameToAdd = "";
            if (nameToAdd.compareToIgnoreCase(nameRetrievedFromCarList) < 0) {
                loc++;
            }
            i++;

        } 
```

在这个循环之后， loc 的值将由 carList.size 添加，因为 if() 中的条件始终为真。这意味着您将始终将 newCar 添加到 arrayList 的末尾，但不是按照您想要的正确顺序。

实现 Comparator 接口可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:24:54.280

得到它的工作。我用对象遍历了数组列表。从键盘输入的名称在“if”语句中用作 compareToIgnoreCase() 方法的条件。它将该对象添加到按字母顺序排列的数组列表的适当位置。

```
 while(!valid)
      {
       try
          {

           System.out.println("Enter car name: ");
           name = scan.nextLine();
           System.out.println("Enter car model year: ");
           modelYear = scan.nextLine();
           System.out.println("Enter car list price: ");
           listPrice = scan.nextDouble();
           System.out.println("Enter car percent discount: ");
           percentDiscount = scan.nextDouble();

           for (int i = 0; i < carList.size(); i++) {
              String nameRetrievedFromCarList = carList.get(i).getName( );

              if (name.compareToIgnoreCase(nameRetrievedFromCarList) < 0) {
                 break;
              }
              loc++;
           }

           discountAmount = listPrice * percentDiscount/100.0;
           netPrice = listPrice - discountAmount;

           Proj1CarData newCar = new Proj1CarData(name, modelYear, listPrice, percentDiscount, discountAmount, netPrice);

           carList.add(loc, newCar);

           valid = true;

        }//end try

           catch(NumberFormatException nfe)
           {
              System.out.println("Wrong entry: it is not an Integer! Try again");
           }//end catch

     }//end while 
```

# android - 适用于极宽画布的 Android 选项

> ID：13022076
> 
> 赞同：3
> 
> 时间：2012-10-23T00:42:53.697
> 
> 标签：android

几天来，我一直试图让一个非常大的画布工作。

将所有内容添加到画布后，画布的宽度有时为 30,000，但如果将此代码添加到 ondraw 方法，水平滚动会变得非常慢。

然后我尝试将所有内容添加到位图中，然后在 onDraw 方法中绘制位图。虽然这适用于较小的位图，但对于 30,000 宽的位图，我遇到了内存不足错误。

任何人都可以提出解决方案，我不确定现在要尝试什么。

谢谢

编辑我也尝试将位图更改为 Config.RGB_565，但仍然出现内存错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T01:40:02.247

处理大型 Canvas 将不断遇到 OutOfMemoryExceptions。画布写入位图，像 30,000 x X 位图之类的东西会占用大量内存。我认为您最好的选择是跟踪可见屏幕相对于您要显示的位置的位置，并且只将需要的内容写入画布。

例如，如果用户向下和向左滚动 100 像素，那么对于 1024 x 768 的显示，在画布上绘制将在 30,000 x 30,000 的虚拟画布中显示在 1124 和 868 处的内容（您不会全部绘制） ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:46:43.800

您的 ArrayList 中有多少条目，它似乎很大。

据我了解，在 onDraw() 中绘制所有内容没有 OoM 问题，但它真的很慢吗？如果是这种情况，最可能的原因是您正在调用大量的*drawText*，这*非常*慢，基本上如果您有 10000 个字符串要绘制，系统将不得不测量它们中的每一个，以便仅确定给定的字符串在你的大画布上是否可见，然后实际的绘图部分也很慢。

您可以测试绘制所有文本所花费的时间，看看是否是这种情况。

如果确实如此，那么最简单的方法是将每个字符/数字映射到位图，您可以让艺术家创建 PNG 文件，或者在*onCreate(Bundle)*或其他一些名为-once-per-Activity-creation 方法，将位图放在 String-to-Bitmap HashMap 中，而不是调用

```
canvas.drawText(bellNumber, xPad, mOriginY, paint); 
```

你打电话给类似的东西

```
canvas.drawBitmap(hash.get(bellNumber), src, dst, paint); //remember to reuse src & dst 
```

这将完全绕过与字符串相关的绘图开销，并且应该使您的 onDraw 操作更快一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T05:08:29.487

位图的大小取决于设备，但通常取决于特定设备的大小。此外，位图是为基于 sdk 的应用程序创建内存泄漏的主要方式之一。你最好的选择是将你的画布分成更小的部分，或者考虑其他选项，例如在 openGL 中渲染画布（这也有大小限制，但通常会渲染得更快）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:16:54.130

Flynn81 总体上给出了一个很好的答案。查看您的行逻辑，我会做一些数学运算并尝试预测需要绘制哪些行。由于您正在处理文本，因此您可以获得字体度量（测量文本）。由于您似乎在处理数字，因此您可以尝试测量字符串的高度，例如“0123456789”。

您可能想要对此进行分析，但您可能能够缓存线条图。

如果你真的很勇敢，你可以尝试使用 ListView 和自定义可绘制类型

# sql-server - Can Clustered index change dynamic SQL statement behavior and return different results?

> ID：13022079
> 
> 赞同：3
> 
> 时间：2012-10-23T00:43:19.363
> 
> 标签：sql-server, clustered-index, non-clustered-index

> **Possible Duplicate:**
> [ORDER BY suddenly conflicting with VARCHAR concatenation in TSQL](https://stackoverflow.com/questions/12902281/order-by-suddenly-conflicting-with-varchar-concatenation-in-tsql)

recently, I found create clustered index in one table and this clustered index changed the results of a dynamic SQL statement. When the table have clustered index, the statement only returned the last filed result. drop the clustered index from the table or delete the 'ORDER BY fieldnumber', will return the full result (15 fields). The change in behavior was caused by the clustered index in conjunction with the replace calls, as well as the order by, and the declaration of k being 1000 vs max in the sample statement.

Can the Clustered index change dynamic SQL statement behavior and return different results or something else I don't know? Any comments are welcome!

--Create the test table

```
USE [test] 

GO 

SET ANSI_NULLS ON 

GO 

SET QUOTED_IDENTIFIER ON 

GO 

CREATE TABLE [dbo].[test]( 
[companyid] [int] NOT NULL, 
[fieldName] [nvarchar](50) NOT NULL, 
[fieldnumber] [tinyint] NOT NULL, 
[Tagname] [nvarchar](15) NULL 
) ON [PRIMARY] 

GO 
```

-- insert test data

```
INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Employee Status', 1, N'<CHARACTER_1>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Admin Grouping', 2, N'<CHARACTER_2>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Department Code', 3, N'<CHARACTER_3>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Job Code', 4, N'<CHARACTER_4>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'FLSA - Exempt', 5, N'<CHARACTER_5>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Action Field 06', 6, N'<CHARACTER_6>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Action Field 07', 7, N'<CHARACTER_7>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Action Field 08', 8, N'<CHARACTER_8>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Action Field 09', 9, N'<CHARACTER_9>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Action Field 10', 10, N'<CHARACTER_10>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'ProcessLevel', 11, N'<CHARACTER_11>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Department Name', 12, N'<CHARACTER_12>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Job Title', 13, N'<CHARACTER_13>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Information Field 04', 14, N'<CHARACTER_14>') 

INSERT [dbo].[test] ([companyid], [fieldName], [fieldnumber], [Tagname]) VALUES (1, N'Information Field 05', 15, N'<CHARACTER_15>') 

go 
```

-- test script

```
declare @k nvarchar(1000) --–-or max 

set @k = '' 

SELECT @k = @k + REPLACE(REPLACE(TagName,'<',''),'>','') + ',' FROM test WITH (NOLOCK) 
WHERE CompanyID = 1 ORDER BY fieldnumber 

select @k as test_result_without_index 

go 
```

-- create one clustered index to test the above script

```
CREATE CLUSTERED INDEX [ix-test] ON [dbo].[test] 
( 
[CompanyID] ASC 
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 

GO 
```

-- test script which with nvarchar(1000)to test the behavior change with clustered index

```
declare @k nvarchar(1000) --–-or max 

set @k = '' 

SELECT @k = @k + REPLACE(REPLACE(TagName,'<',''),'>','') + ',' FROM test WITH (NOLOCK) 
WHERE CompanyID = 1 ORDER BY fieldnumber 

select @k as test_result_with_clustered_index_varchar1000_combine 

go 
```

-- test script which with nvarchar(max)to test the behavior no change under nvarchar (max) combine with clustered index

```
declare @k nvarchar(Max) --–-or max 

set @k = '' 

SELECT @k = @k + REPLACE(REPLACE(TagName,'<',''),'>','') + ',' FROM test WITH (NOLOCK) 
WHERE CompanyID = 1 ORDER BY fieldnumber 

select @k as test_result_with_clustered_index_and_varcharMax__combine 

go 
```

--drop the clustered index

```
IF EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[test]') AND name = N'ix-test') 

DROP INDEX [ix-test] ON [dbo].[test] WITH ( ONLINE = OFF ) 

GO 
```

-- then create nonclustered index

```
USE [test] 

GO 

CREATE NONCLUSTERED INDEX [ix_test] ON [dbo].[test] 

( 
[companyid] ASC 
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 

GO 
```

-- test script which with nvarchar(100)to test the behavior no change under nvarchar (100) combine with NONclustered index

```
declare @k nvarchar(1000) --–-or max 

set @k = '' 

SELECT @k = @k + REPLACE(REPLACE(TagName,'<',''),'>','') + ',' FROM test WITH (NOLOCK) 
WHERE CompanyID = 1 ORDER BY fieldnumber 

select @k as test_result_with_nonClustered_index_and_varchar1000_combine 

go 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:29:56.500

此查询从未保证有效。下面展示了创建聚集索引后的查询计划。

![在此处输入图像描述](../Images/364b6471f8a1af68b8969f96a32d2eca.png)

使用 FOR XML（变通方法和正确方法）保证顺序，因为**始终**在查询正确完成后处理。但是，使用@var concat 查询，SQL Server 可以根据需要自由优化查询。

在这里您可以看到 SELECT 语句的连接是在排序之前完成的，因此可以按任何顺序连接行，返回的不一定是最长的（最终的）。

我更喜欢显示表达式的文本计划，所以这里是：

```
StmtText
---------------------------------------------------------------------------------------------------------------------------------------------
  |--Sort(ORDER BY:([test].[dbo].[test].[fieldnumber] ASC))
       |--Compute Scalar(DEFINE:([Expr1005]=CONVERT_IMPLICIT(nvarchar(1000),([@k]+[Expr1006])+N',',0)))
            |--Compute Scalar(DEFINE:([Expr1006]=replace(replace([test].[dbo].[test].[Tagname],N'<',N''),N'>',N'')))
                 |--Clustered Index Seek(OBJECT:([test].[dbo].[test].[ix-test]), SEEK:([test].[dbo].[test].[companyid]=(1)) ORDERED FORWARD) 
```

REPLACE x2 和 CONCAT 操作被放在一起，表面上是为了提高性能。
但是，如果您将查询更改为

```
declare @k nvarchar(1000) --–-or max 
set @k = '' 
SELECT @k = @k + REPLACE(REPLACE(TagName,'<',''),'>','') + ','
FROM (
    select TOP(100) TagName, fieldnumber
    from test WITH (NOLOCK)
    WHERE CompanyID = 1
    order by fieldnumber
    ) X
order by fieldnumber
select @k as test_result_with_clustered_index_varchar1000_combine 
```

可以看到 SQL Server 在执行 CONCAT 之前被强制在子查询中进行 SORT。 **注意：** `TOP 100 PERCENT`当它被优化掉时不起作用，但是 TOP(N) ，其中 N 大于表中的记录数。然而，正确的解决方案是使用 FOR XML。

```
StmtText
---------------------------------------------------------------------------------------------------------------------------------------------
  |--Compute Scalar(DEFINE:([Expr1005]=CONVERT_IMPLICIT(nvarchar(1000),([@k]+[Expr1006])+N',',0)))
       |--Sort(TOP 100, ORDER BY:([test].[dbo].[test].[fieldnumber] ASC))
            |--Compute Scalar(DEFINE:([Expr1006]=replace(replace([test].[dbo].[test].[Tagname],N'<',N''),N'>',N'')))
                 |--Clustered Index Seek(OBJECT:([test].[dbo].[test].[ix-test]), SEEK:([test].[dbo].[test].[companyid]=(1)) ORDERED FORWARD) 
```

# jquery - d3.js Treemap - 有没有办法指定显示偏好（排序）？

> ID：13022080
> 
> 赞同：3
> 
> 时间：2012-10-23T00:43:37.703
> 
> 标签：jquery, d3.js, treemap

我正在研究基于 d3.js 的 Treemap，[http](http://mbostock.github.com/d3/ex/treemap.html) ://mbostock.github.com/d3/ex/treemap.html ，我是 D3 的新手。基本上，我有一个 JSON 文件中的值列表，并且正在创建一个基本的单父树形图，它在框中显示键，大小取决于键的值。

我遇到的我想解决的问题是我的数据倾向于将高端吸引到右边，所以所有的大盒子都在那里，所有的小盒子都在左边。在我的想法（以及设计师的想法）中，由于我们从左到右阅读，因此将较大的框放在左侧，将较小的框放在右侧会更有意义。显然，我们的尺寸不需要改变，只需改变它们的放置顺序。请参阅[http://chrislcoray.com/browsertest/treemap_issue.jpg](http://chrislcoray.com/browsertest/treemap_issue.jpg)了解数据当前的显示方式。

例如，假设我的键是博客页面中的标签。我的 JSON（不要问我为什么在博客中使用 JSON，这是一个示例）可能看起来像这样：

```
{
    "name": "tags",
    "children": [
        {"name":"cooking", "size": 35},
        {"name":"video games", "size": 31},
        {"name":"book club", "size": 26},
        {"name":"knitting", "size": 23},
        {"name":"hunting", "size": 22},
        {"name":"farming", "size": 19},
        {"name":"athletics", "size": 6},
        {"name":"toys", "size": 3},
        {"name":"sanitizer", "size": 3},
        {"name":"pigs", "size": 2},
        {"name":"ducks", "size": 2},
        {"name":"wildlife", "size": 2},
        {"name":"automobiles", "size": 1},
        {"name":"waterbottles", "size": 1},
        {"name":"telephone cords", "size": 1},
        {"name":"lampshade hats", "size": 1}
    ]
} 
```

我的 D3 看起来像这样：

```
var jsonFeed = '/JSON/tags.json';

var width = jQuery('#container').width(),
    height = jQuery('#container').height();

var treemap = d3.layout.treemap()
    .size([width, height])
    .sticky(true)
    //.sort(0)
    .value(function(d) { return d.size; });

var div = d3.select('#container');

d3.json(jsonFeed, function(json) {
    div.data([json]).selectAll('div')
        .data(treemap.nodes)
    .enter().append("div")
        .attr("class", "cell")
        .call(cell)
        .text(function(d) { return d.children ? null : d.name; });
}); 
```

根据这些数据，我预计“烹饪”会在左侧占据很大的空间，但由于某种原因，它却在右侧。正如您在代码中看到的那样，我一直在玩“排序”（已注释掉），但我仍然没有弄清楚如何让它正常工作。

任何建议/建议/等。非常感谢。:)

编辑：保持通用的代码一致性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T01:32:58.563

[您可以在http://jsfiddle.net/WYqRj/2/](http://jsfiddle.net/WYqRj/2/)看到一个工作示例。

你很接近，你只需要为`sort`. 我实现了一个简单的降序排序。

```
var treemap = d3.layout.treemap()
    .size([width, height])
    .sticky(true)
    .sort(function(a,b) { return a.size - b.size; })
    .round(true)
    .value(function(d) { return d.size; }); 
```

# ios - Xcode what's the difference between "Other Linker Flags" vs "Other_LDFLAGS"

> ID：13022084
> 
> 赞同：18
> 
> 时间：2012-10-23T00:43:52.527
> 
> 标签：ios, xcode, ios6

I have an app that crashes on build.

I'm told to set the "Other Linker Flags" to -ObjC. Fine.. but

in Xcode's Build settings, I don't see "Other Linker Flags", I see "Other_LDFLAGS".

So, what is the difference, and how do I change from one to the other if necessary?

A picture is worth.... so.. what I'm told I need:

![enter image description here](../Images/bb4cde74618f842160280a1192db4ddf.png)

and what I have:

![enter image description here](../Images/c027635998a5e51d7614385121e9f6e8.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-23T05:09:40.720

这些是同一回事。一个是另一个的同义词。如果您在 Xcode 4.5 的检查器中单击快速帮助，当您选择了“其他链接器标志”时，它会告诉您它设置了“OTHER_LDFLAGS”设置。“其他链接器标志”是人类可读的版本，`OTHER_LDFLAGS`是链接器使用的实际变量名称。

# r - Arules Sequence Mining in R

> ID：13022102
> 
> 赞同：9
> 
> 时间：2012-10-23T00:47:51.277
> 
> 标签：r, arules

I am looking to use the `arulesSequences` package in R. However, I have no idea as to how to coerce my data frame into an object that can leverage this package.

Here is a toy dataset that replicates my data structure:

```
ids <- c(rep("X", 5), rep("Y", 5), rep("Z", 5))
seq <- rep(1:5,3)
val <- sample(LETTERS, 15, replace=T)
df <- data.frame(ids, seq, val)
df

   ids seq val
1    X   1   T
2    X   2   H
3    X   3   V
4    X   4   A
5    X   5   X
6    Y   1   D
7    Y   2   B
8    Y   3   A
9    Y   4   D
10   Y   5   P
11   Z   1   Q
12   Z   2   R
13   Z   3   W
14   Z   4   W
15   Z   5   P 
```

Any help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T09:25:23.440

通过使用 read_baskets：

```
 read_baskets(con  = filePath.txt,
      sep = " ",
      info = c("sequenceID","eventID","SIZE")) 
```

这实际上意味着将创建的数据导出到文本文件并通过 read_baskets 重新导入。info 参数定义包含 sequenceID、eventID 和可选事件大小列的第一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:03:36.647

因子数据框：

```
df_fact = data.frame(lapply(df,as.factor)) 
```

构建“交易”数据：

```
df_trans = as(df_fact, 'transactions') 
```

测试它：

```
itemFrequencyPlot(df_trans, support = 0.1, cex.names=0.8) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T12:23:25.357

它为我添加了一个本质上“订单”列，列出了订单排名而不是时间价值。您只需要在命名约定中非常具体。尝试命名“group”或“ordered basket #”变量sequenceID，并调用ranking 或ordering eventID。

帮助我的另一件事（让我挠了很长时间）是 read_baskets() 似乎需要我指定

```
read_baskets(con  = filePath.txt, sep = " ", info = c("sequenceID","eventID","SIZE")) 
```

尽管帮助函数使 c() 细节看起来像一个可选的标题，但它不是。我似乎需要从我的文件中删除标题并在 read_baskets() 命令中指定它，否则我会遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-21T13:40:43.937

您必须首先将您的项目更改为交易，所以只需强制项目列
`trans = as(df[,'val'], "transactions")`

然后您可以将信息添加到您的交易对象

`trans@itemsetInfo$transactionID = NULL trans@itemsetInfo$sequenceID = df$ids trans@itemsetInfo$eventID = df$seq`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T17:53:17.187

对我来说，最好的方法不是使用数据框，而是将数据拆分为单个数据，而不是转换为事务。

```
 eh$cost<-split(eh$cost$val ,eh$cost$id)
 eh$cost1<- as(eh$cost,"transactions") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-12T12:48:02.440

```
df <- df %>% arrange(id,seq) %>% summarise(size=n(), items=list(val)) 
```

然后写入txt（[本教程](https://blog.revolutionanalytics.com/2019/02/sequential-pattern-mining-in-r.html)还建议在数据争吵后写入然后用`read_basket`函数读取）

```
df$items <- as.character(df$items)
write.table(df, file = "trans.txt", sep = " ", row.names = FALSE, col.names = FALSE) 
```

读取文件并检查

```
x <- read_baskets("trans.txt", sep = " ", info = c("sequenceID","eventID","SIZE"))
as(x, "data.frame") 
```

# scala - scala not on path after installing typesafe-stack on Ubuntu

> ID：13022104
> 
> 赞同：2
> 
> 时间：2012-10-23T00:47:57.543
> 
> 标签：scala, typesafe-stack

On Ubuntu 12.04, I have installed typesafe-stack following the instructions [here](http://typesafe.com/stack/download).

After doing so, I do not have `scala` or `scalac` on my PATH. I do have `sbt`, and I can run `console` from there, but I do not have any native Scala executables installed.

Where is `scalac` supposed to be installed? Why has it not been so? How do I fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:14:54.420

基于 Debian 的系统的 Typesafe 堆栈本身不附带 Scala，因此您必须手动安装它：

```
sudo aptitude install scala -y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:29:21.460

Scala 被编译成 Java 字节码（或 .NET CLR，如果你愿意的话），所以从技术上讲，不需要安装二进制文件。Sbt 会在第一次运行时下载并安装 Scala 编译器`sbt`，这就是为什么.`sbt console``Play 2`

要获得解释器，使用`apt-get`如上所述，版本与 Typesafe Stack 使用的版本不同（2.9.2 与 2.9.1），但到目前为止我没有遇到任何麻烦。似乎 sbt 正在使用为项目定义的正确版本，甚至依赖项都单独存储（只需检查`~/.ivy/cache`一下我的意思）

# javascript - Backbone Collection 不是独一无二的吗？

> ID：13022105
> 
> 赞同：0
> 
> 时间：2012-10-23T00:48:01.870
> 
> 标签：javascript, backbone.js

我在 Backbone.js 中为应用程序的开始做了一个简单的设置
。代码在[这个 gist](https://gist.github.com/3935931)中。
这很简单。一个`Coin`模型和集合，一个`Player`模型和集合。每个玩家都有一组硬币。我手动添加玩家应该获得的硬币类型。

在 结束时`initialize`，每个 Players`Coins`集合中有 32 个项目，并且`Coins.player_id`在所有 4 个 Players 中设置为 4。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:31:07.547

我猜你的问题是你`defaults`的`Player`：

```
var Player = Backbone.Model.extend({
    defaults: {
        id: 0,
        name: '',
        coins: new Coins()
    },
    //...
}); 
```

这`defaults`将被浅复制到 new `Player`s，因此它们最终都会共享完全相同的 s `coins: new Coins()`。`defaults`只要包含任何可变数据（即数组、对象字面量……），就会发生类似的事情。所以所有这些：

```
this.Taylor.get("coins")
this.Sugar.get("coins")
this.Darlene.get("coins")
this.Cody.get("coins") 
```

最终将成为完全相同的对象。[精美](http://backbonejs.org/#Model-defaults)的手册是这样说的：

> **默认值** `model.defaults or model.defaults()`
> 
> **默认值**哈希（或函数）可用于指定模型的默认属性。创建模型实例时，任何未指定的属性都将设置为其默认值。
> [...]
> *请记住，在 JavaScript 中，对象是通过引用传递的，因此如果您包含一个对象作为默认值，它将在所有实例之间共享。*

请注意最后的一点警告。如果您将函数用于`defaults`：

```
var Player = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            name: '',
            coins: new Coins()
        };
    },
    //...
}); 
```

那么你应该`'coins'`对每个`Player`. `'coins'`或者，您可以手动设置`initialize`：

```
var Player = Backbone.Model.extend({
    //...
    initialize: function() {
        this.set('coins', new Coins);
        // Or only set it if it isn't there if that makes sense...
    },
    //...
}); 
```

# php - PHP CheckStyle：无法配置缩进

> ID：13022107
> 
> 赞同：0
> 
> 时间：2012-10-23T00:48:10.253
> 
> 标签：php, checkstyle

我正在尝试使用[phpcheckstyle](http://code.google.com/p/phpcheckstyle/)。我不知道如何为新行上的功能括号配置它（使用 4 个空格进行缩进）：

```
1\. class MyClass
2\. {
3\.     public function __construct()
4\.     {
5\.         // do something
6\.     }
7\. } 
```

它总是给出错误“缩进级别必须为 8 但为 4”。对于第 4 行和第 6 行。它只允许以下之一：

```
1\. class MyClass
2\. {
3\.     public function __construct() {
4\.         // do something
5\.     }
6\. } 
```

或者

```
1\. class MyClass
2\. {
3\.     public function __construct()
4\.         {
5\.         // do something
6\.         }
7\. } 
```

如果有办法绕过这个或其他 PHP 样式检查器而不是能理解这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:03:20.843

抱歉，这是一个错误。

应该用最新版本更正。

我个人只使用制表符进行缩进，我还没有进行足够的测试。请随时在项目页面上报告任何问题。

# coldfusion - 无法让 if 语句在 vxml 中运行

> ID：13022111
> 
> 赞同：0
> 
> 时间：2012-10-23T00:48:42.407
> 
> 标签：coldfusion, vxml

我正在尝试为 noinput 和 nomatch 动态调用包含文件，但我无法得到下面的 if 语句将不会运行，有什么想法吗？

这是在每个页面顶部的 cfmodule 标记中，因此我可以捕获错误、noinputs、nomatch 和 hangups。

```
<cfif thistag.executionmode is "start">

        <!--- header content goes here --->
        <cfheader name="Content-Type" value="text/xml">
        <cfheader name="Cache-Control" value= "no-cache">
        <cfheader name="Expires" value="#Now()#"><?xml version="1.0" encoding="UTF-8"?>
        <vxml version="2.1" xmlns:voxeo="http://community.voxeo.com/xmlns/vxml">

        <meta name="maintainer" content="#application.maintainer#"/>

        <var name="calledid" expr="session.calledid"/>
        <var name="callerid" expr="session.callerid"/>
        <var name="ivrsessionid" expr="session.sessionid"/>
        <var name="action"/>
        <var name="notes"/>
        <var name="flag"/>
        <var name="recording"/>
        <var name="subdialogid"/>
        <var name="MyEvent"/>
        <var name="currentField"/>

        <property name="universals" value="help"/>

        <cfoutput>
            <property name="sensitivity" value="#session.sensitivity#"/>
            <property name="confidencelevel" value="#session.confidenceLevel#"/>
        </cfoutput>

        <!---This prefetches the audio to optimize performance--->
        <property name="audiofetchhint" value="prefetch"/>

        <!---This logs if the caller hangs up.--->
        <cfoutput>
            <catch event="noinput nomatch error connection.disconnect.hangup">

                <assign name="myPage" expr="'#cgi.PATH_INFO#'" />
                <assign name="MyEvent" expr="_event"/>
                <assign name="action" expr="_event"/>
                <assign name="notes" expr="'Page: #cgi.PATH_INFO# - Field: ' + currentField"/>
                <data name="MyDataName" src="#attributes.historyPath#" namelist="calledid callerid ivrsessionid action notes MyEvent currentField" method="post"/>

            </catch>

            <!---I cannot get the if statement to run--->
            <if cond="'1 == 1'">
                <cfinclude template="../inc/cctypequestionnoinput.inc" />
            <elseif cond="MyEvent == 'nomatch'"/>
                <cfinclude template="../inc/cctypequestionnomatch.inc" />
            <else/>
            </if>
        </cfoutput>

    <cfelse>

         <!--- footer content goes here --->
        </vxml>

    </cfif> 
```

# c# - WPF DataGrid 未绑定到自定义类型属性

> ID：13022113
> 
> 赞同：0
> 
> 时间：2012-10-23T00:48:50.083
> 
> 标签：c#, wpf, xaml, data-binding, mvvm

我有一个看起来像这样的类型：

```
public struct LogData
{
    public DateTime Time;
    public string Area;
    public string Message;
} 
```

在我的数据上下文（MVVM）中，我有一个`ObservableCollection<LogData>`公开的`Log`.

由于某种原因，我无法显示任何字段数据（时间、区域、消息）。这些行在记录时正确显示，但数据网格中的值为空白。

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Log}" SelectionMode="Single" CanUserSortColumns="True">
  <DataGrid.Columns>
    <DataGridTextColumn Header="Time" Binding="{Binding Time}" IsReadOnly="True" />
    <DataGridTextColumn Header="Area" Binding="{Binding Area}" IsReadOnly="True" />
    <DataGridTextColumn Header="Message" Binding="{Binding Message}" IsReadOnly="True" />
  </DataGrid.Columns>
</DataGrid> 
```

知道为什么这些字段显示为空白吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:21:06.873

您只能绑定到公共属性（请参阅[绑定源概述](http://msdn.microsoft.com/en-us/library/ms743643.aspx#classes)中的**其他特征**部分），例如

```
public DateTime Time { get; set; } 
```

# matlab - matlab中的摊销表

> ID：13022116
> 
> 赞同：0
> 
> 时间：2012-10-23T00:49:50.520
> 
> 标签：matlab, printf

如何使用 fprintf 在 Matlab 中构建摊销表？现在，要获得一张桌子，我正在使用：

```
tab=[[0:Nm]',Balance',Interest',Principal',];
disp(['          ','Month','      ','Balance','        ','Interest','     ','Principal'])
disp (tab) 
```

该表看起来还不错，但我被告知我需要使用 fprintf 命令来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:25:49.423

并不是说您无法从[文档](http://www.mathworks.nl/help/matlab/ref/fprintf.html)中找到它，但这里是：

```
clc

fprintf('%12s %12s %12s %12s\n', ...
    'Month', 'Balance', 'Interest', 'Principal')

format bank
for ii = 1:numel(Balance)
    fprintf('%12d %12.2f %12.2f %12.2f\n', ...
        ii, Balance(ii), Interest(ii), Principal(ii));

end 
```

# haskell - 使用 Repa 和 Stencils 重新采样

> ID：13022117
> 
> 赞同：4
> 
> 时间：2012-10-23T00:49:56.980
> 
> 标签：haskell, image-processing, resampling, repa, stencils

我用 repa 编写了一个简单的图像双线性重采样算法，因为我需要使用分区数组来使其正确，所以我想我会全力以赴并使用模板，并希望获得更快的循环。

从我对 mapStencil 工作方式的天真理解来看，我认为这不足以完成我的任务。我需要像 transformStencil 这样的东西。我想我需要一个不同的模板，所以我可以拥有旧索引和新索引。

有没有一种简单的方法可以在 Repa 中执行模板图像重采样？如果不是，将 mapStencil 破解成 transformStencil 或类似的东西会有多难。

# php - 删除 wp_get_attachment_image 图像大小

> ID：13022120
> 
> 赞同：3
> 
> 时间：2012-10-23T00:50:32.303
> 
> 标签：php, wordpress, wordpress-theming

有什么办法可以去掉 wp_get_attachment 函数的图片大小？

我正在尝试以下代码，但没有成功，试图获得 100% 或什么都没有。

```
echo wp_get_attachment_image($variable, array(100 . '&#37;', 100 . '&#37;')); 
```

*编辑*

多亏了draw010，这就是我最终得到的完美作品。

```
echo '<img src="'.wp_get_attachment_url($variable).'" alt="'.get_the_title().'" />'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:05:26.283

@Jrod 有正确的答案 IMO，但你也可以打电话

```
wp_get_attachment_url($variable); 
```

它为您提供了完整图像的 URL。然后，您可以简单地构建自己的 HTML 标记来显示图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:00:39.087

如果您想要完整尺寸的图像，您应该使用以下内容：

`echo wp_get_attachment_image($variable, 'full');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:00:42.177

你不能这样使用它：`alt="'.get_the_title().'"`

您必须使用`esc_attr($attachment->post_title)`或`the_title_attribute()`。

如果标题有一些 html 标签，则您的 alt 属性可能会使您的 html 大纲崩溃。相信我，一年前，我在某个主题中搜索了超过 1 小时的这个错误。

# scala - 如何在方法中表达类型参数范围？

> ID：13022122
> 
> 赞同：1
> 
> 时间：2012-10-23T00:50:52.853
> 
> 标签：scala

在 Scala 中，我需要执行满足以下要求的代码：

将 a传递给`java.lang.Class`工厂方法。传递给此方法的类必须扩展抽象类`Project`。我将实例化这个类，执行各种操作，然后返回它。

这就是我所拥有的...

```
object ProjectFactory {

    def create (clazz: java.lang.Class[T <: Project]): Project = {
        val newProject = clazz.newInstance
        /* snip */
        newProject
    }

}

abstract class Project 
```

...这是我得到的错误：

```
identifier expected but <: found 
```

我知道这只是一个语法问题——我该如何表达这个逻辑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T00:55:26.613

需要在方法名后面声明类型参数，而不是在使用现场：

```
object ProjectFactory {

    def create[T <: Project](clazz: java.lang.Class[T]): Project = {
        val newProject = clazz.newInstance
        /* snip */
        newProject
    }

}

abstract class Project 
```

我不是 Scala 反射库的专家，但我认为这可能更干净：

```
object ProjectFactory {

    def create[T <: Project: Manifest]: Project = {
        val newProject = classManifest[T].erasure.newInstance.asInstanceOf[Project]
        /* snip */
        newProject
    }

}

abstract class Project 
```

这样你就不必显式地传入一个类对象——你只需用你想要的类型参数化方法。同样，我敢打赌有更好的方法来做到这一点，所以我很感谢那些在这方面有更多经验的人的反馈。

另外，我认为 Scala 2.10 已经放弃了 Manifests 以支持 ClassTags 或类似的东西......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T00:55:27.237

你很接近：

```
object ProjectFactory {
    def create[T <: Project](clazz: java.lang.Class[T]): Project = {
        val newProject = clazz.newInstance
        /* snip */
        newProject
    }
}

abstract class Project 
```

# javascript - 将焦点放在字段上并使用 HTML 锚点

> ID：13022123
> 
> 赞同：1
> 
> 时间：2012-10-23T00:51:16.720
> 
> 标签：javascript, html, focus, anchor

我正在制作一个 HTML 表单，当点击页面上的链接时，我想关注第一个输入字段。此外，我想将页面滚动到该位置。我写了一个 JS 函数来聚焦框：

```
function selectCommentBox() {
    document.getElementById("commentbox").focus();
} 
```

这是我的链接的代码：

```
<a href='#commentbox' onclick='selectCommentBox();'>Reply</a> 
```

我的困境是我只能得到一种行为或另一种行为。如果我按原样使用此链接，则锚点可以正常工作并且页面滚动到该字段的位置，但该字段未突出显示。如果我添加“return false;” 到onclick，该字段被突出显示，但不执行锚点跳转。我怎样才能让这两种行为都适用？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T01:12:04.440

当一个锚链接被跟踪时，你实际上是把焦点给了那个锚（#commentbox），所以你需要编写一个函数来做滚动/链接和聚焦：

```
function selectCommentBox() {
    window.location = '#commentbox';
    document.getElementById("commentbox").focus();
} 
```

为了与旧浏览器兼容，请添加`return false;`语句并保留`href`属性。

# android - 当我使用android 4.1默认图标时，它提示“错误：找不到资源”，为什么会这样？

> ID：13022128
> 
> 赞同：1
> 
> 时间：2012-10-23T00:52:23.693
> 
> 标签：android, icons, default

**我想使用 android 默认首选项图标**

```
<item android:id="@+id/settings"
      android:icon="@drawable/ic_menu_preferences"
      android:showAsAction="ifRoom" /> 
```

**并提示此错误...**

```
Error: No resource found that matches the given name (at 'icon' with value '@drawable/ic_menu_preferences 
```

我怎么能使用默认图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:58:21.767

对于 android 默认偏好图标使用

```
<item android:id="@+id/settings"
      android:icon="@android:drawable/ic_menu_preferences"
      android:showAsAction="ifRoom" /> 
```

代替

```
<item android:id="@+id/settings"
      android:icon="@drawable/ic_menu_preferences"
      android:showAsAction="ifRoom" /> 
```

# jquery - 如何使用可拖动功能设置检测？

> ID：13022129
> 
> 赞同：0
> 
> 时间：2012-10-23T00:52:24.403
> 
> 标签：jquery

How to set detect with draggable function, When check the box the draggable function still not work.

[http://jsfiddle.net/KPnRc/](http://jsfiddle.net/KPnRc/)

HTML

```
<div class="drag" style="width:100px; height:100px; background:blue;"></div>
Lock:<input name="lock" id="lock" type="checkbox" value="0" /> 
```

JS

```
if($('#lock').is(':checked') == true){

    $(".drag").draggable();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:57:44.063

您需要在 onchange 事件中绑定您的 javascript 这是一个小提琴示例[http://jsfiddle.net/KPnRc/6/](http://jsfiddle.net/KPnRc/6/)

```
$(document).ready(function () {                 // When the document is ready
    $('.drag').draggable();                     // Initialize the .drag element with draggable
    $('#lock').on('change', function (evt) {    //Bind a function to the checkbox
        if($(this).is(':checked') == true) { //if checked then disable draggable
            $('.drag').draggable('disable');
        }
        else {                                  //else enable draggable.
            $('.drag').draggable('enable');
        }
    });
}); 
```

# objective-c - char* 大小与 malloc 后的预期不同

> ID：13022135
> 
> 赞同：-1
> 
> 时间：2012-10-23T00:52:58.980
> 
> 标签：objective-c, c, arrays, memory, char

我创建了下一个代码来获取**char***，但在执行此代码后，finalResult 的大小比预期的要大，并带有一些垃圾字符。为什么？？我该如何解决？

```
//returns void
void processChar(){
            //.... more stuff here
            // init is a previous char*
            char* end = strstr(init,"</div>");
            if(end != NULL){
                    long length = strlen(init) - strlen(end);
                    if (length > 0){
                            char* finalResult = malloc(length);
                            strncat(finalResult, init,length);
                            //these lengths are different,being strlen(finalResult) > length
                            NSLog(@"%d %d",strlen(finalResult),length);
                            //... more stuff here  
                    }
            }
            return;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T00:56:58.500

这段代码：

```
char* finalResult = malloc(length);
strncat(finalResult, init,length); 
```

会给你一个未定义的结果。您尝试与 连接`finalResult`，`init`即使您从未初始化`finalResult`。也许您打算使用`strncpy()`而不是`strncat()`？

还有，`finalResult`不够大；它还需要包含终止`\0`字符，因此您应该将其分配给：

```
char* finalResult = malloc(length + 1); 
```

此外，正如 Keith Thomson 所指出的，当你使用它时要当心[危险。`strncpy()`](http://the-flat-trantor-society.blogspot.gr/2012/03/no-strncpy-is-not-safer-strcpy.html)

在这种特殊情况下，您可以`strncpy()`通过在分配后简单地初始化`finalResult`为空字符串来避免使用，然后`strncat()`像以前一样使用：

```
char* finalResult = malloc(length + 1);
finalResult[0] = '\0';
strncat(finalResult, init, length); 
```

当然，您还应该检查`malloc()`内存不足错误的返回值，但这超出了您的问题范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:20:40.650

来自男人 strlen：

```
The strlen() function calculates the length of the string s, not including the terminating '\0' character. 
```

显然，您的 malloc 将需要为终止 '\0' 字符分配空间。所以修复很简单。在 malloc 中分配长度+1 个字节。

您的代码中存在第二个严重错误。Malloc 将返回未初始化的内存，但 strncat 将追加到现有字符串。因此，它将首先在未初始化的内存中搜索第一个'\0'，这不是您想要的。所以 strncat 有效地依赖于 malloc 返回的第一个字节是 '\0'。您想改用 strncpy 。

修复了错误的代码：

```
char * end = strstr(init, "</div>");
if (end != NULL) {
    long length = strlen(init) - strlen(end);
    if (length > 0) {
        char * finalResult = malloc(length+1);
        strncpy(finalResult, init, length);
        printf("strlen(finalResult) = %ld, length = %ld\n", strlen(finalResult), length);
        free(finalResult);
    }
} 
```

# android - 在适合它们的屏幕上展示 300x250 广告

> ID：13022138
> 
> 赞同：0
> 
> 时间：2012-10-23T00:54:05.483
> 
> 标签：android, xml, layout

我的 Android 应用在底部显示一个广告。我想为适合广告的大屏幕展示 300x250 广告，并为小屏幕展示常规的 320x50 横幅。

是在 values-large、values-xlarge 还是 values-hdpi、values-xhdpi 中设置广告高度？

我将在这些文件夹中放置一个dimens.xml 文件并将高度设置为250dp 或50dp。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:29:11.710

我使用 values-large、values-xlarge 为更大的屏幕设置更大的广告高度。

# image - 缩放图像以抵消相机移动

> ID：13022143
> 
> 赞同：1
> 
> 时间：2012-10-23T00:54:52.160
> 
> 标签：image, image-processing

随着相机向前移动，我快速连续拍摄了两张图像。为了更好地比较两张图像，我想“放大”其中一张图像，这样看起来这些图像是从同一位置拍摄的。假设我在拍摄两张照片时都知道相机的位置，所以我知道我需要补偿多少。

问题是，我知道简单的缩放不太正确。我想要的是类似于经典 Windows 屏幕保护程序的东西，它看起来像星星在屏幕上移动。即图像的边缘比中心扭曲更多。我觉得必须有一个算法来做到这一点，但我不知道这种类型的效果叫什么。有人可以告诉我这个操作的正确名称是什么以及算法是否可以执行它？

更新：我会尝试通过一个例子来更清楚地说明这一点。假设我在汽车行驶时将摄像头放在汽车的引擎盖上，每 10 毫秒拍一张照片。我不能直接比较两个连续的图像，因为在第二张图像中，一切都会有点大（因为你开车离它更近了），当你经过它们时，有些东西会从左侧或右侧消失。您需要进行哪些转换才能使这两个图像看起来是从同一位置拍摄的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:47:10.397

它被称为`Homography`或`Projective Transformation`。它使直线保持笔直，但平行线可能会聚。

# jquery - JQuery ValidationEngine 对 vb.net Web 服务进行 AJAX 调用

> ID：13022145
> 
> 赞同：1
> 
> 时间：2012-10-23T00:55:09.077
> 
> 标签：jquery, asp.net, web-services, jquery-validation-engine

我查看了插件主页上给出的文档示例，但 AJAX 示例似乎不起作用。

此外，我看到的所有示例都是针对 PHP/JAVA/ETC 的。

我真正想要的是一个使用 JQuery 插件 ValdiationEngine 的简单示例，该示例使用 AJax 类型验证器检查 VB.NET Web 服务。哪些文件需要修改？或者这一切都可以在带有验证器的页面内完成。Web服务是否需要返回任何特定格式等。

这是有问题的插件：http: [//posabsolute.github.com/jQuery-Validation-Engine/](http://posabsolute.github.com/jQuery-Validation-Engine/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T18:29:31.993

我们将其用于调用 ASP.Net Web 服务的 ajax 验证规则。您所要做的就是在您的语言文件中编写规则。

这是我们的：

```
"ajaxEmailCheck": {
    "url": "/json_api/AjaxEmailCheck/",
    "extraDataDynamic": ['#EmailAddress'],
    "alertText": "* An Account with this email has already been created.",
    "alertTextLoad": "* Validating, please wait..."
}, 
```

这个调用 url /json_api/AjaxEmailCheck 并传递电子邮件地址。然后我们的字段定义如下：

```
<input type="email" 
       name="email_address" 
       title="Email Address" 
       id="email_address" 
       class="validate[required,custom[onlyLetNumSpec],ajax[ajaxEmailCheck]] 
/> 
```

此外，这是上面使用的 onlyLetNumSpc 规则：

```
"onlyLetNumSpec": {
    // Good for database fields
    "regex": /^[^\\]+$/,
    "alertText": "* Any Character is allowed with the exception of backslash(\)."
} 
```

从 Web 服务返回的数据如下所示：

```
"{"EmailAddress":true}" 
```

如果传递的电子邮件已经存在：

```
"{"EmailAddress":false,"Error":"* An Account with this email has already been created."}" 
```

# php - 如何在php中的magic setter和getter之后覆盖参数

> ID：13022149
> 
> 赞同：1
> 
> 时间：2012-10-23T00:55:30.090
> 
> 标签：php, getter-setter, magic-methods, mapper

现在我有一个对 DB 执行 ORM 的 BaseObject。我依靠私有 $data 和魔术 setter 和 getter 来创建具有一堆列作为私有对象成员的对象（动态）。在子类中，如果我想更改行为以设置单个对象成员，我必须覆盖父 setter 并查找密钥。我的问题是是否有更好的方法来做到这一点，我可以覆盖单个对象成员而不是通过 __setter

映射到数据库并动态创建一堆私有参数的基本对象映射器

```
class Base
 {
    private $data = array();

    public function __construct(){
        //get columns info from db and do set
    }
    public function __set($key, $value){
        $this->data[$key] = $value;        
    }

   public function __get($key){
       return isset($this->data[$key])? $this->data[$key] : null;       
   }
} 
```

和儿童班。现在要覆盖参数设置我必须这样做

```
 class Child extends Base
 {
     public function __set($name, $value){
        if($name == 'dog' && $value == 'chihuahua')
          $this->dog = 'dog bark wolf wolf';
        else if($name == 'cat' && $value == 'sand')
          $this->cat = 'cat say meow meow';
       ...
     }
 } 
```

我的问题是有优雅的方法来做到这一点，也许是在儿童班上这样的？

```
public function __set_dog($value)
    $this->dog = 'dog bark wolf wolf';

public function __set_cat($value)
   $this->cat = 'cat say meow meow'; 
```

目标是做

```
$animal1 = new Animal();
$anmial1->dog = 'pit bull';
$anmial1->cat= 'sand';

$animal2 = new Animal();
$anmial1->dog = 'chihuahua';
$anmial1->cat= 'house cat'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:36:55.290

您可以动态检查是否存在常规命名的 getter/setter 方法并调用它而不是返回 $data 成员。这是一个例子：

```
class Base {
    public function __get($key) {
        if (method_exists($this, $method = 'get' . ucfirst($key))) {
           return $this->$method($key);
        } else {
           return isset($this->data[$key])? $this->data[$key] : null;
        }
    }

    public function __set($key, $value) {
        if (method_exists($this, $method = 'set' . ucfirst($key))) {
           $this->$method($key, $value);
        } else {
           $this->data[$key] = $value;
        }
    }
}

class Animal extends Base {
    protected $data = array('fish' => 'blublublub', 'dog' => 'woof', 'cat' => 'meow');

    public function getDog() {
        return 'dog bark wolf wolf';
    }

    public function getCat() {
        return 'cat say meow meow';
    }
}

$animal = new Animal();
echo $animal->fish; // "blublublub"
echo $animal->dog; // "dog bark wolf wolf"
echo $animal->cat; // "cat say meow meow" 
```

# c# - 在wpf c#中使用单选按钮

> ID：13022150
> 
> 赞同：0
> 
> 时间：2012-10-23T00:55:34.913
> 
> 标签：c#, wpf

嗨，伙计们，如果未选中相应的单选按钮，我如何将我的文本框只读设置为 true，反之亦然。当相应的按钮也未选中时，与 datepicker、combobox 可聚焦和 ishittestvisible 相同，反之亦然...谢谢

我发现在 wpf c#.. 单选按钮没有 checkchange 属性。仅在winform中...这就是我要做的

```
 private void rdbtn1_Checked(object sender, RoutedEventArgs e) // <----This must CheckChange
    {
        if (rdbtndatecreated.IsChecked == true)
        {
            textBox1.IsReadOnly = false;
            DatePicker1.Focusable = true;
            DatePicker1.IsHitVisible = true;
        }
        else
        {
            textBox1.IsReadOnly = true;
            DatePicker1.Focusable = false;
            DatePicker1.IsHitVisible = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:28:16.860

您可以分别处理[Checked](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.checked.aspx)和[Unchecked](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.unchecked.aspx)事件。

```
void rdbtn1_Checked(object sender, RoutedEventArgs e)
{
     textBox1.IsReadOnly = false;
     DatePicker1.Focusable = true;
     DatePicker1.IsHitVisible = true;
}

void rdbtn1_Unchecked(object sender, RoutedEventArgs e)
{    
     textBox1.IsReadOnly = true;
     DatePicker1.Focusable = false;
     DatePicker1.IsHitVisible = false;    
} 
```

# android - findPreference 在合法的首选项名称上返回 NULL

> ID：13022153
> 
> 赞同：4
> 
> 时间：2012-10-23T00:56:09.213
> 
> 标签：android, sharedpreferences

这太令人沮丧了。为什么在下面的代码中我的 PreferenceActivity 类中的首选项检索为空？

```
private void setupSpecialPrefClickListener(SettingsSystem settingsSystem) {
    Map<String,?> keys =    PreferenceManager.getDefaultSharedPreferences(this).getAll();
    for(Map.Entry<String,?> entry : keys.entrySet()){
        String key = entry.getKey();
        if( key.startsWith("d_")) {
            Preference p = findPreference((CharSequence)key);
            //p == NULL!!!!!
                            p.setOnPreferenceClickListener(this);
        }
    }

} 
```

找到并传递的首选项名称是现有首选项的完全合法名称（“d_lightSensorLimit” - 与地图中第一个匹配并导致异常的确切名称）。之前构造函数中的纯文本字符串提取得非常好。这个方法也是从构造函数调用的（用这个方法的调用替换了巨大的条目列表）：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings_system);  
    getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

    setupSpecialPrefClickListener(this);
} 
```

根据人们的要求，这里是 settings_system.xml 的相关摘录：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<Preference
    android:defaultValue="0"
    android:dialogTitle="Night mode on lux (0-disable)"
    android:inputType="phone"
    android:key="d_lightSensorLimit"
    android:layout="@layout/pref"
    android:title="Automatic nightmode" />
</PreferenceScreen> 
```

我的目标是 2.1，因此不推荐使用的方法也是如此。它以前工作得很好。

# php - PHP - 使用 DOM 更新 XML 时保留字符数据

> ID：13022155
> 
> 赞同：1
> 
> 时间：2012-10-23T00:56:35.317
> 
> 标签：php, xml, dom, cdata, preserve

我正在将 XML 文档读入 DOM 树，然后更新节点，最后将树写入另一个 XML 文件。源 XML 文件具有以下标记（我没有在 DOM 中触摸此标记），例如

当使用 DOM->Save 或 SaveXML 函数时，它会将其转换为下面

我想保留原始格式，因为我在更新过程中没有触及这个节点。我已经尝试了一些事情并一直在寻找解决方案。如果您能帮助弄清楚在将 DOM 树转储到文件时如何保留源 XML 的格式，那就太好了。

提前致谢！

# c# - C# - 未捕获任务异常

> ID：13022162
> 
> 赞同：2
> 
> 时间：2012-10-23T00:57:23.983
> 
> 标签：c#

我确定我做错了什么，但是当我尝试这个新线程任务异常处理的示例时，我不断收到用户代码未处理的异常。代码的重点是展示如何捕获任务中的错误的示例。

链接：[任务异常示例](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

```
static void Main(string[] args)
        {
            var task1 = Task.Factory.StartNew(() =>
            {
                throw new MyCustomException("I'm bad, but not too bad!");
            });

            try
            {
                task1.Wait();
            }
            catch (AggregateException ae)
            {
                // Assume we know what's going on with this particular exception. 
                // Rethrow anything else. AggregateException.Handle provides 
                // another way to express this. See later example. 
                foreach (var e in ae.InnerExceptions)
                {
                    if (e is MyCustomException)
                    {
                        Console.WriteLine(e.Message);
                    }
                    else
                    {
                        throw;
                    }
                }

            }
        } 
```

最有可能的用户错误只是不确定是什么（使用 Visual Studio 2012）；

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T01:04:08.233

从您引用的页面：

> **笔记**
> 
> 启用“仅我的代码”后，Visual Studio 在某些情况下会在引发异常的行中断并显示一条错误消息，指出“用户代码未处理异常”。这个错误是良性的。您可以按 F5 继续并查看这些示例中演示的异常处理行为。为防止 Visual Studio 因第一个错误而中断，只需取消选中**Tools、Options、Debugging、General**下的“Just My Code”复选框。

# php - 将多个隐藏表单字段传递到单个 UPDATE mysql 查询中

> ID：13022164
> 
> 赞同：0
> 
> 时间：2012-10-23T00:57:36.177
> 
> 标签：php, mysql

为了使代码更高效，我如何编写代码来用一行更新 mysql 列？可能吗？

当前代码的示例。

```
if (isset($_POST['editsongname'])) {
$id = $_POST['songid'];
    $newtitle = mysql_real_escape_string($_POST['songname']);
    $doSongNameEdit = "UPDATE `$database_main`.`lyrics` SET `lyrics`.`title` = '$newtitle' WHERE `lyrics`.`id` = '$id' LIMIT 1" or die(mysql_error());

    $retval = mysql_query( $doSongNameEdit, $main );
    if(! $retval )
    {
        die('Could not update data: ' . mysql_error());
    }
    header("Location: song.php");
    //echo "<b>Updated Successfully</b> - <a href=\"song.php\">Return to edit lyrics page</a>\n ";
    } 
```

（表格代码）

```
> <form action="<?php echo $_SERVER['PHP_SELF']; ?>" name="<?php echo
> $sid; ?>"  method="POST"> <input type="hidden" name="songid"
> value="<?php echo $sid; ?>"> 
```

（一个 sid 的例子） 228106 它直接将编辑连接到数据库中的正确位置

那么隐藏表单字段如何将动态信息传递给此代码，以便我只能简化代码，或者甚至有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:01:40.730

问题在于使用 GET 方法。这意味着表格中的每个变量都显示在地址栏中。您需要更改表单以使用 POST 方法

```
<form name="name" action="url.php" method="POST" target="_blank">
...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:03:53.507

这取决于您使用的表单方法（$_GET 或 $_POST）。

```
<input type="hidden" name="songid" value="<?php echo $sid; ?>"> 

$id = $_GET['songid']; 
-- OR --
$id = $_POST['songid']; 

$doTextEdit = "UPDATE texts 
               SET texts.text = '$newtext' 
               WHERE 
               texts.id = '$id'"; 
```

您的数据库查询中也不需要 a `LIMIT`。

# apache-flex - 在运行时从 spark 创建 mx dataGrid itemRenderer

> ID：13022168
> 
> 赞同：2
> 
> 时间：2012-10-23T00:58:07.917
> 
> 标签：apache-flex, flex-spark

如何在运行时通过复制 sparkColumn.itemRenderer 来设置 mxColumn.itemRenderer？

我有一个使用 mx:DataGrid、mx:AdvancedDataGrid 和 s:DataGrid 的应用程序。

我们正在使用 mx:PrintDataGrid 和 mx:PrintAdvancedDataGrid 实现“打印”功能。

我们将可打印的 dataGrid 的列设置为我们要打印的 dataGrid 的列，如下所示：
printDataGrid.columns = targetDataGrid.columns; //或
printAdvancedDataGrid.columns = targetDataGrid.columns;

这样做，打印保留 itemRenderers 的格式。

当dataGrid-to-print为spark时，迭代列，并制作新的spark列

`for (var i:uint; i < sparkColumns.length; i++)
{` 

 ````
 sparkColumn = sparkColumns.getItemAt(i) as GridColumn;<br/>
    mxColumn = new DataGridColumn();<br/>
    mxColumn.headerText = sparkColumn.headerText;<br/>
    mxColumn.dataField = sparkColumn.dataField;<br/>
    //mxColumn.itemRenderer =  sparkColumn.itemRenderer;<br/>
    mxColumns.push(mxColumn); 
```` 

`}`

dataField 和 headerText 属性很容易从 mx 转换为 spark 列，但 itemRenderers 更棘手。

如何将 mxColumn.itemRenderer 设置为 sparkColumn.itemRenderer？

有谁知道如何在 spark itemRenderer 中挖出组件/功能/属性？如何将其“类型转换”到 mx itemRenderer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T23:10:04.957

> 有谁知道如何在 spark itemRenderer 中挖出组件/功能/属性？如何将其“类型转换”到 mx itemRenderer？

即使通过反思可以实现，我认为这将是一项非常艰巨的任务。

如果我有这样的要求，我会考虑两种选择。

首先是通过扩展和实现接口为每个列创建 itemRenderers，以便`UIComponent`可以使用它们。然后您将能够取消标记已标记的行。`Spark Grid``Mx Grid`

二是扩展 spark 列并添加字段“ `type`”，例如：“Label”、“Date”、“CustomType”、“usdType”等。

然后创建描述符，它将包含列的类型、mx 渲染器的类和 spark 渲染器的类。

例如，

```
var columnsDescripor:Object = {};
columnsDescripor["label"] = {mx: mx.controls.Label, s: spark.components.Label};
columnsDescripor["usd"] = {mx: MXusdRenderer, s: SusdRenderer}; 
```

然后，

```
sparkColumn = ExtendedGridColumn(sparkColumns.getItemAt(i));
mxColumn.itemRenderer = new (columnsDescripor[sparkColumn.type].mx); 
```

# facebook - 从具有 facebook ID 的 URL 获取“喜欢”数据

> ID：13022173
> 
> 赞同：0
> 
> 时间：2012-10-23T00:58:29.647
> 
> 标签：facebook, api, facebook-graph-api

我无法从此网址检索喜欢或分享的内容：

[http://marceloduende.com/facebook_test/](http://marceloduende.com/facebook_test/)

我已经通过以下方式进行了尝试：

[https://graph.facebook.com/?ids=http://marceloduende.com/facebook_test](https://graph.facebook.com/?ids=http://marceloduende.com/facebook_test)

和

[http://graph.facebook.com/fql?q=select%20url%2C%20id%2C%20type%2C%20site%20from%20object_url%20where%20url%20%3D%20%22http%3A%2F% 2Fmarceloduende.com/facebook_test%2F%22](http://graph.facebook.com/fql?q=select%20url%2C%20id%2C%20type%2C%20site%20from%20object_url%20where%20url%20%3D%20%22http%3A%2F%2Fmarceloduende.com/facebook_test%2F%22)

他们两个对我来说都是空的，除了我的 ID 没有任何数据。

我不知道我的 facebook 应用程序上是否有任何我应该检查的技巧，或者我可能错过的 HTML 源代码上的某些东西（在标题或其他东西上）。我将不胜感激这方面的任何帮助。

*****编辑：我可以获取数据，但由于某种原因，它只返回分享，而不是喜欢，即使我的页面上有喜欢按钮。关于为什么我得到这个有限的数据有什么建议吗？****

 **谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:06:01.837

如果您填充`og:url`元数据，Facebook 会将其视为规范 URL。因此，您的数据应该可以在`http://marceloduende.com/facebook_test/index.html`.

检查[您的页面的调试器](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmarceloduende.com%2Ffacebook_test%2F)。它告诉你大部分你需要知道的数据。您还需要将`og:type`标签修复[为有效标签](http://ogp.me/#types)**

# gpu - Geforce 480 和 Tesla C2070 上共轭梯度算法的显着性能差异

> ID：13022176
> 
> 赞同：1
> 
> 时间：2012-10-23T00:59:38.623
> 
> 标签：gpu

我正在运行一个共轭梯度算法来求解一个大小为 96 x 96 的线性系统。使用相同的代码、相同的迭代次数和相同的精度（双精度），Geforce 480 的耗时约为 33.6 毫秒，而在 Tesla C2070 上大约是 132.1 毫秒，几乎是 Geforce 480 的 4 倍！

你觉得这很正常吗？有没有人遇到类似的结果，或者我做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T19:25:50.633

Stumbling on this post when looking for conjugate gradient.

For this matrix size (96x96), the conjugate gradient is just overkill: you may use Cholesky decomposition, which should be much faster. Similarly, using a GPU doesn't seem useful, except if you solve a bunch of them in parallel.

For the performance difference, there may be various explanations, but I would suggest that the iterative part of the CG algorithm is probably limiting - due to the system's size, once again: the Geforce may be better at latency and to communicate with the CPU.

# json - 未捕获的语法错误意外令牌 U JSON

> ID：13022178
> 
> 赞同：325
> 
> 时间：2012-10-23T01:00:11.257
> 
> 标签：json

当我在 chrome 中运行我的页面时，我收到此错误“未捕获的语法错误意外令牌 U”。在 Firefox 中，我得到“JSON.parse：意外字符”。我正在从 php 文件返回 json 数据，并且返回的 json 字符串是有效的。我用[http://jsonlint.com/](http://jsonlint.com/)检查了它。任何帮助将不胜感激......谢谢。

这是返回的 JSON 字符串

```
[
    ["1","Pan Africa Market","\"1521 1st Ave, Seattle, WA\"","47.608941","-122.340145","restaurant"],
    ["2","The Melting Pot","14 Mercer St, Seattle, WA","47.624562","-122.356442","restaurant"],
    ["3","Ipanema Grill","1225 1st Ave, Seattle, WA","47.606366","-122.337656","restaurant"],
    ["4","Sake House","230 1st Ave, Seattle, WA","47.612825","-122.34567","bar"],
    ["5","Crab Pot","1301 Alaskan Way, Seattle, WA","47.605961","-122.34036","restaurant"],
    ["6","Mexican Kitchen","2234 2nd Ave, Seattle,WA","47.613975","-122.345467","bar"],
    ["7","Wingdome","1416 E Olive Way, Seattle, WA","47.617215","-122.326584","bar"],
    ["8","Piroshky Piroshky","1908 Pike pl, Seattle, WA","47.610127","-122.342838","restaurant"]
] 
```

* * *

## 回答 #1

> 赞同：701
> 
> 时间：2012-10-23T02:00:58.463

`JSON.parse`当给定的值实际为 时，通常会看到该错误`undefined`。所以，我会检查试图解析这个的代码——很可能你没有解析这里显示的实际字符串。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-13T13:51:40.673

我在验证时收到此消息（在 MVC 项目中）。对我来说，添加**ValidationMessageFor**元素解决了这个问题。

准确地说，jquery.validate.unobtrusive.js 中的第 43 行导致了这个问题：

```
 replace = $.parseJSON(container.attr("data-valmsg-replace")) !== false; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-01-24T13:50:36.647

JSON.parse 的参数可能什么都不返回（即 JSON.parse 的值是`undefined`）！

当我从 xyz.sol 文件解析 Compiled solidity 代码时，它发生在我身上。

```
import web3 from './web3';
import xyz from './build/xyz.json';

const i = new web3.eth.Contract(
  JSON.parse(xyz.interface),
  '0x99Fd6eFd4257645a34093E657f69150FEFf7CdF5'
);

export default i; 
```

拼写错误为

```
JSON.parse(xyz.intereface) 
```

什么都没有返回！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-04T15:37:23.493

发生此错误的最常见情况是使用生成控件的模板，然后更改方式`id`和/或`name`通过“覆盖”默认模板生成控件，例如

```
@Html.TextBoxFor(m => m, new {Name = ViewData["Name"], id = ViewData["UniqueId"]} ) 
```

然后忘记更改`ValidationMessageFor`为

```
@Html.ValidationMessageFor(m => m, null, new { data_valmsg_for = ViewData["Name"] }) 
```

希望这可以节省您一些时间。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-23T10:05:03.387

解决该错误非常简单。

**原因**。Javascript 给出了该错误，因为您正在解析空字符串、对象或数组。

**为了解决** 这个问题，只需检查您要解析的字符串是否为空/null 或者不是。如果不为空/null，您可以解析该字符串。

```
let ParsedString;

if(yourString != null){
   ParsedString = JSON.parse(yourString);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-12T07:46:42.133

当我在 for 循环中对 JSONArray 运行查找条件时遇到此错误。我面临的问题是 for 循环中的值之一返回 null 的结果。因此，当我尝试访问它失败的属性时。

因此，如果您在 JSONArrays 中做任何不确定数据源及其完整性的事情，我认为在这种情况下处理 null 和未定义的异常是一个好习惯。

我通过检查 JSONArray 上 find 的返回值是否为 null 并适当地处理异常来修复它。

认为这可能会有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-19T08:27:53.970

以防你不明白

例如，可以说我有一个 JSON 字符串 ..还不是 JSON 对象或数组。

所以如果在javascript中你将字符串解析为

```
var body={
  "id": 1,
  "deleted_at": null,
  "open_order": {
    "id": 16,
    "status": "open"}

var jsonBody = JSON.parse(body.open_order); //HERE THE ERROR NOW APPEARS BECAUSE THE STRING IS NOT A JSON OBJECT YET!!!! 
//TODO SO
var jsonBody=JSON.parse(body)//PASS THE BODY FIRST THEN LATER USE THE jsonBody to get the open_order

var OpenOrder=jsonBody.open_order; 
```

上面的好答案

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-30T21:22:54.943

在我的例子中，它试图在 XHRResponse 返回之前在 AJAX 变量上调用 JSON.parse()。例如：

```
var response = $.get(URL that returns a valid JSON string);
var data = JSON.parse(response.responseText); 
```

[我用$.get 的 jQuery 站点中](https://api.jquery.com/jquery.get/)的示例替换了它：

```
<script type="text/javascript"> 
    var jqxhr = $.get( "https://jira.atlassian.com/rest/api/2/project", function() {
          alert( "success" );
        })
          .done(function() {
//insert code to assign the projects from Jira to a div.
                jqxhr = jqxhr.responseJSON;
                console.log(jqxhr);
                var div = document.getElementById("products");
                for (i = 0; i < jqxhr.length; i++) {
                    console.log(jqxhr[i].name);
                    div.innerHTML += "<b>Product: " + jqxhr[i].name + "</b><BR/>Key: " + jqxhr[i].key + "<BR/>";
                }
                console.log(div);
            alert( "second success" );
          })
          .fail(function() {
            alert( "error" );
          })
          .always(function() {
            alert( "finished" );
          });

        // Perform other work here ...

        // Set another completion function for the request above
        jqxhr.always(function() {
          alert( "second finished" );
        });
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-20T16:38:22.827

这个答案可能是许多人的可能解决方案。**此答案适用于在使用文件上传**时遇到此错误的人。

我们使用中间件进行基于令牌的加密 - 解密，我们遇到了同样的错误。

以下是我们在路由文件中的代码：

```
 router.route("/uploadVideoMessage")
  .post(
    middleware.checkToken,
    upload.single("video_file"),
    videoMessageController.uploadVideoMessage
  ); 
```

在这里，我们在上传功能之前调用了中间件，这导致了错误。因此，当我们将其更改为此时，它起作用了。

```
router.route("/uploadVideoMessage")
  .post(
    upload.single("video_file"),
    middleware.checkToken,
    videoMessageController.uploadVideoMessage
  ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-11T12:23:33.363

好吧，对于那些实际上无法在代码中的任何地方找到错误的人，既不是“本地存储中所说的未定义也不是 null”......只需注释掉您的代码并编写另一个实际删除本地存储中的项目的代码。 . 之后，您可以注释或删除当前代码，并通过简单地取消注释来重新重置前一个代码（如果您 dint delet t ...如果您这样做了，您可以再次编写它:)）

```
LocalStorage.setItem('Previous' , "removeprevious");  

LocalStorage.removeItem('Previous');   
 Console.log(LocalStorage.getItem('Previous')); 
```

控制台将显示 null 并且如果 t 不起作用，它会再次重置您的代码，伙计！你有错误。

**对不起我的英语不好！**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-28T10:29:16.907

这不是一项艰巨的任务。这个问题也出现在我的网站上，你应该把你的 js 文件排在最前面。因为在你使用 JSON Parsing 的地方，这一次你的 JS 文件没有加载。例子 ＃

```
<script type="text/javaScript">
...........SOME CODE.............
</script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script> 
```

改成

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script type="text/javaScript">
...........SOME CODE.............
</script> 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-11-11T08:31:18.517

当我对 json 字符串和解析的 json 使用相同的变量时，我收到了这个错误：

```
var json = '{"1":{"url":"somesite1","poster":"1.png","title":"site title"},"2":{"url":"somesite2","poster":"2.jpg","title":"site 2 title"}}'

function usingjson(){
    var json = JSON.parse(json);
} 
```

我将功能更改为：

```
function usingjson(){
    var j = JSON.parse(json);
} 
```

现在这个错误消失了。

# c - 标头命名约定

> ID：13022182
> 
> 赞同：6
> 
> 时间：2012-10-23T01:01:03.060
> 
> 标签：c, header-files

从

[如何在一个文件中定义 C 函数，然后从另一个文件中调用它？](https://stackoverflow.com/q/4271717)

> 假设我在文件中定义了一个函数`func1.c`，并且我想从文件中调用它`call.c`，我将如何做到这一点？

和答案

> 您将在文件中声明该函数，`func1.h`然后添加 `#include "func1.h"`。`call.c`然后你将编译或链接`func1.c` 在一起`call.c`（细节取决于哪个 C 系统）。

我的问题是头文件的名称**是否必须是** `func1.h`，如`<name-of-c-file>.h`，或者这只是一个最佳实践？如果可能，请提供链接以供参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T01:06:37.223

在`c`中，您根本不需要调用您的文件。因此，您可以调用 header `mylongheadername.h`，同时调用源文件`a.c`并在其中有一个名为`justArandomFunctionName`.

但是，您应该知道您的源文件需要包含您的头文件。通常头文件和源文件之间有很强的联系，所以这就是总是以这种方式完成的原因。但是，以下内容是完全有效的：

```
a.c : func1 implementation
      func2 implementation

b.c : func3 implementation
      func4 implementation

c.h : func1 declaration
      func3 declaration

d.h : func2 declaration
      func4 declaration 
```

但是，在使用这样设置的文件时，这种方法可能会出现一些问题（这意味着您必须在正确构建这些文件时投入额外的工作），而且这是一种糟糕的做法。但是，使用头文件的方式只是约定，几乎没有任何一种是由语言强制执行的。

* * *

然后是一个问题，如果头文件不知道函数的定义位置，这将如何工作。这个想法是它不需要知道。

基本上，你的头文件所做的只是告诉你的编译器你在某个地方定义了一个适合特定配置文件的函数（什么名称，什么参数，什么返回类型）。当您的编译器读取此内容时，基本上它所做的只是将所有这些信息混合成一个花哨的名称，然后它将插入到正在调用的文件中，这意味着它仍然不做任何事情。您需要采取的下一步是使用链接器将每个文件的编译版本转换为单个可执行文件。这做了很多事情，但最重要的事情之一是它解析了编译器编造的所有那些花哨的名字。但是，链接器执行此操作的方式是它只读取文件的所有编译版本，并将函数的定义与它们在其他代码中的实际位置相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T01:04:08.703

不，头文件不需要匹配任何相应的 C 源文件。正如你所说，只是约定。

# entity-framework-4 - 实体框架 4 SaveChanges 方法不保存到数据库

> ID：13022183
> 
> 赞同：3
> 
> 时间：2012-10-23T01:01:10.277
> 
> 标签：entity-framework-4, savechanges

我正在尝试将 Entity Framework 4 用于我正在编写的小型数据库应用程序，以记录下载的文件。运行应用程序时，我在 tableName.Add() 方法之后、.SaveChanges() 方法之前设置了一个断点，我可以看到保存到实体中的数据；然后我在调用 .SaveChanges() 方法后有另一个断点，并查看数据库发现没有保存记录。我发现了很多类似的问题，但我还没有找到解决我的特定问题的方法。这是代码：

```
 public void StartNewDownload(string FileID)
    {
        DateTime startTime = DateTime.Now;

        FilesDBEntities db = new FilesDBEntities();
        int startedID = (from dr in db.tblDownloadResults
                         where dr.Value.Equals("Started")
                         select dr.ResultID).First();
        tblDownloads myDownload = new tblDownloads { FileID = FileID, StartDateTime = startTime, ResultID = startedID };
        db.tblDownloads.Add(myDownload);
        db.SaveChanges();
    } 
```

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T23:04:55.507

帕维尔，你引导我朝着正确的方向前进。该实体有数据，但我正在查看的数据库没有。但是在阅读了您的评论后，我从 Visual Studio 运行了该程序并使用 Process Monitor 来监视对 *.sdf 文件的任何操作。这有助于发现在构建解决方案时，它会在 bin\Debug 文件夹中创建另一个数据库文件。我忘记了数据库构建操作属性设置为“内容”。

谢谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:48:20.523

您可以使用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms187929%28v=sql.105%29.aspx)来查看实体框架是否真的调用了数据库。

（该工具不包含在 SQL Server Express 中）

# eclipse - 将 BitBucket 存储库中的项目导入 Eclipse

> ID：13022191
> 
> 赞同：2
> 
> 时间：2012-10-23T01:03:18.303
> 
> 标签：eclipse, git, version-control, import, bitbucket

我有一个包含 Eclipse 项目目录的 BitBucket 存储库，我无法将这些项目导入 Eclipse。

存储库中包含的文件来自 Subversion 存储库。它们以通常的方式转换为 Git 存储库，使用“git clone”与 BitBucket 存储库关联，并使用“git push -u origin master”填充 BitBucket 存储库。我的 BitBucket 帐户中存储库的 Source 选项卡显示了原始 Subversion 存储库中包含的所有文件。为了验证 BitBucket 存储库是否设置正确，它对不同的本地目录执行了“git clone”，并验证新目录与将文件推送到 BitBucket 存储库的目录具有相同的文件。

在这个存储库中有一个包含多个 Eclipse 项目的目录，我需要将它们导入 Eclipse。为此，我将 EGit 插件安装到 Eclipse 中，切换到 Eclipse 的 Git 存储库视图，单击“克隆 Git 存储库”，输入我的 BitBucket 存储库的 url，指定我的工作区目录，然后选中标有“导入所有现有项目”的框克隆完成后”。克隆和导入完成后，所有 Eclipse 项目都显示在 Eclipse 的 Package Explorer 面板中。

一些项目正确显示了它们的所有内容，其中一个项目文件夹包含一个 src 文件夹，其中包含一个包含 Java 源文件的嵌套包文件夹。

问题出在其他项目上，它们在文件夹图标和项目名称之间显示一个带有大于号 ('>') 的项目文件夹，在文件夹图标和字符串“src”之间显示一个带有大于号的 src 文件夹”。此文件夹不包含包文件夹和 Java 源文件。Eclipse 文档和论坛说，当文件自上次与存储库同步后发生更改时，会显示这些“>”标志（尽管他们大多谈论这些“>”标志是针对单个文件而不是文件夹显示的）。我尝试使用 Eclipse 命令“Team -> Synchronize Workspace”来确保文件夹已同步，但它没有改变任何东西。

谢谢，

麦克风

# .net - 反序列化时如何从json中删除k__BackingField

> ID：13022198
> 
> 赞同：112
> 
> 时间：2012-10-23T01:04:27.610
> 
> 标签：.net, json, serialization, deserialization

在将 xml 文件序列化为 .net c# 对象后，我在返回的 json 中获取了 k_BackingField。

我已将 DataContract 和 DataMember 属性添加到 .net c# 对象，但随后我在客户端的 json 上一无所获。

```
[XmlRoot("person")]
[Serializable]
public class LinkedIn
{
    [XmlElement("id")]
    public string ID { get; set; }

    [XmlElement("industry")]
    public string Industry { get; set; }

    [XmlElement("first-name")]
    public string FirstName { get; set; }

    [XmlElement("last-name")]
    public string LastName { get; set; }
    [XmlElement("headline")]
} 
```

返回的 json 示例：

```
home: Object
<FirstName>k__BackingField: "Storefront"
<LastName>k__BackingField: "Doors" 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2015-01-06T10:09:54.087

`[Serializable]`从您的班级中删除

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-02-26T19:11:10.703

默认的 WebApi 序列化程序会将“__BackingField:”语法添加到 c# 自动属性中。将此添加到 App_Start 中的 WebConfig 以获得您可能正在寻找的更清晰的 json。

```
using Newtonsoft.Json;
...

config.Formatters.JsonFormatter.SerializerSettings = new JsonSerializerSettings(); 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-10-23T01:27:52.117

如果类可以在序列化中使用，则实际上不建议使用 Automatic Property 语法。原因是支持字段是由编译器生成的，每次编译代码时可能会有所不同。即使没有对类进行任何更改（只是重新编译代码），这也可能导致不兼容问题。

我认为应用 DataMember 属性将解决这种情况下的问题。但如果需要在序列化中使用该类，我建议使用完整的属性语法。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2016-04-28T09:24:39.553

我们有一些对象被标记为`[Serializable]`可以使用传统方法进行序列化，但我们需要在 JSON 中干净地序列化这些对象才能与 Web API 一起使用。设置`IgnoreSerializableAttribute`为`true`将阻止 Newtonsoft.Json 的行为类似于 Microsoft 的序列化程序，而只会序列化公共属性。

TLDR：将此添加到 WebApiConfig.cs：

```
((Newtonsoft.Json.Serialization.DefaultContractResolver)config.Formatters.JsonFormatter.SerializerSettings.ContractResolver).IgnoreSerializableAttribute = true; 
```

主持人：对于已经被问过多次的问题，与其删除一个非常好的答案，不如删除重复的问题。这是对有效问题的有效答案。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-02-08T09:26:14.663

**简单而体面的数据公开方式** 我们需要将对象中的数据公开为易于阅读和一致的格式

首先删除*[Serializable]*

```
 [Serializable] 
```

现在在类中添加**[DataContract]并为属性添加****[DataMember]**，如下例所示

```
[DataContract]
public class UserDiscretion : UserReport
{
    [DataMember]
    public String DiscretionCode { get; set; }
    public String DiscretionDescription { get; set; }
} 
```

希望这个帮助
谢谢。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-05-01T15:51:07.260

几个选项：

1.  `[Serializable]`从模型中移除

2.  `[DataContract]`将和添加`[DataMember]`到您的模型中 `[Serializable]`

3.  将下面的行添加到`App_Start/WebApiConfig.cs`

```
config.Formatters.JsonFormatter.SerializerSettings = new JsonSerializerSettings(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-27T16:50:02.287

在 JSON.NET 的情况下可能会有所帮助的另一种解决方案。使用 [Newtonsoft.Json.JsonObject] 属性标记类可能就足够了。

我正在使用从 xsd 构建的 cs 类，并正在使用部分类添加一些属性。在 json 序列化之后，这些属性被标记为 k_BackingField。其他答案中提到的 JsonFormatter 设置也有帮助，但更简单的是用 [JsonObject] 属性标记部分类。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-12-11T00:07:51.717

我正在使用`DataContractJsonSerializer`来自另一个具有该`Serializable`属性的程序集的类。输出包含“k__BackingField”。删除`Serializable`属性（在另一个程序集中）解决了这个问题。不知道为什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-12T18:26:58.113

假设您在 MVC 项目中看到此问题，我发现替换 @Html.JsonData 的使用非常简单。这是过去对我有用的代码片段：

```
<input type="hidden" id="Model" value="@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model))" /> 
```

没有那么优雅，但在紧要关头很简单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-19T19:21:36.333

当我的类中有自引用属性时，我遇到了这个问题，例如；

```
class Person {
 List<Person> Friends { get; set;}
} 
```

结果，这个人和自己成了朋友。我只是确保我的结果集中没有自引用对象。希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-24T07:15:21.010

我必须使用 [Serializable] 属性，所以删除它不是一个选项。

[XmlSerializer 忽略 WebApi 中的 [XmlAttribute]](https://stackoverflow.com/questions/35846873/xmlserializer-ignores-xmlattribute-in-webapi)

上述决议为我解决了这个问题。

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-21T20:38:53.080

在我的情况下，这个错误是针对 Newtonsoft.Json 版本的，服务器寻找 6.0.0 版本，我有 11.0，所以我必须安装 6.0.0 版本

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-02-11T12:18:24.657

朋友，不要这样声明属性：

```
public String DiscretionCode { get; set; }
public String DiscretionDescription { get; set; } 
```

但是，创建辅助变量，如旧......

```
private String discretionCode;

public String DiscretionCode 
{ 
    get { return discretionCode;}
    set { discretionCode = value; }
} 
```

# objective-c - 如何使 UIImageView 围绕其中心旋转

> ID：13022205
> 
> 赞同：1
> 
> 时间：2012-10-23T01:06:08.340
> 
> 标签：objective-c, ios, uiimageview

我在 xcode 4 中制作了一个 ios 应用程序，我需要一个方形 UIImageView 围绕它的中心旋转到我给它的度数。

有谁知道如何做到这一点？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:26:38.033

如果您想实时执行此操作，您应该将其绘制到您创建自己的 CALayer 中，然后将视图添加到您的视图根 CALayer，然后使用方法 [CALayer setAffineTransform:] 旋转它。然后，您需要设置图层边界，以便点 (0,0) 位于您要旋转的点，即您的 min-x 和 miny-y 边界应等于 -(max-x) 和 -( max-y) 边界围绕精确的中心旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:40:26.753

```
UIImageView *yourImageView = [[UIImageView alloc] initWithImage:'anyimageyouhave'];

[yourImageView setTransform:CGAffineTransformMakeRotation('anyangleyouwish')]; 
```

这对我有用。我希望它也适合你。

# c# - 没有 Web 服务器的 OSM 的 WPF 控件

> ID：13022210
> 
> 赞同：0
> 
> 时间：2012-10-23T01:06:50.377
> 
> 标签：c#, wpf, openstreetmap

我打算使用该控件从具有 lat 和 long 的平面 .txt 文件中读取，同时保持以当前显示的坐标为中心，绘制一条轨迹并将地图平移到下一个传入坐标的中心。我还应该能够控制平移速率。所以在运行结束时，我将有一条从头到尾的线。我也想使用板载数据，因为很难通过互联网访问（来自[http://www.geofabrik.de/data/download.html](http://www.geofabrik.de/data/download.html)的形状文件听起来差不多）

这看起来很简单，但我遇到了我应该使用什么控件的麻烦。大多数控件要么是 WinForms，要么需要 Web 服务器，和/或只需要某种用于坐标的数据库。我错过了控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:44:48.047

我可以推荐[这个控件](http://xamlmapcontrol.codeplex.com/)。它显示各种平铺地图内容，如 OpenStreetMap 并允许在离线环境中操作。这是通过将地图图块缓存到本地数据库或作为图像文件缓存到本地文件系统来实现的。但是，目前还没有机制可以创建预填充缓存，并且根据您打算覆盖的区域和缩放级别，缓存可能会变得很大。

# qt - QHeaderView::mousePressEvent （需要弄清楚列/索引）

> ID：13022211
> 
> 赞同：1
> 
> 时间：2012-10-23T01:07:01.183
> 
> 标签：qt, qheaderview

一般来说，当我重新实现 QTableView::mousePressEvent( QMouseEvent* ) 时，我可以让它正常工作。但是，在 QHeaderView 上执行此操作对我不起作用。代码很简单。

```
void my_header_t::mousePressEvent( QMouseEvent* event )
{
    if ( !event ) {
    return;
}

if ( event->button() == Qt::RightButton ) {

    QPoint point( event->x(), event->y() );
    QModelIndex index   = indexAt( point );

    printf( "%s data %s %d,%d %s (point: %d,%d )\n",
        ts().c_str(), index.data().toString().toStdString().c_str(),
        index.row(), index.column(), index.isValid() ? "True" : "False",
        event->x(), event->y() );

    handle_right_click( index.data().toString() );

} else {
    QHeaderView::mousePressEvent( event );
} 
```

QMouseEvent 中的 x() 和 y() 很好。但是，它会创建一个无效索引，其中 row() 为 -1，column() 为 -1。显然，我将一个空字符串传递给 handle_right_click() 以启动菜单。该菜单不会知道是哪一列调用了它，混乱将进一步接踵而至。

我知道 clicked( const QModelIndex& ) 只会告诉我正确的索引和文本。但是，我需要区分按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:21:45.787

`QHeaderView`提供了一个替代函数，`logicalIndexAt`用于确定您感兴趣的标题项的索引。使用上面的代码：

```
void my_header_t::mousePressEvent( QMouseEvent* event )
{
   if ( !event ) {
      return;
   }

   if ( event->button() == Qt::RightButton ) {
      int index = logicalIndexAt( event->pos() );

      handle_right_click(model()->headerData(index, Qt::Horizontal).toString());

   } else {
      QHeaderView::mousePressEvent( event );
   }
} 
```

请注意，标头的方向必须传递给`headerData`方法（在这种情况下，我只是假设它是`Qt::Horizontal`，但在您的情况下它可能会有所不同）。

# php - 隐藏提交地址

> ID：13022214
> 
> 赞同：0
> 
> 时间：2012-10-23T01:07:18.607
> 
> 标签：php, html, forms

```
<form name='myform' method='POST' action='wrapper.php' onsubmit='return valid()'> 
```

提交后，它将转到`wrapper.php`. 但我想`wrapper.php`从地址栏中隐藏地址。我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:10:09.667

完成后，您可以将 wrapper.php 转发到另一个页面，这会将其从 url 栏中隐藏，用户始终可以查看源代码或检查并查看表单的操作。您可以混淆它并让用户**更难**通过 javascript 找到它，但您不能绝对隐藏表单从用户发布到的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:13:45.617

在此表单中，为您的提交按钮指定一个唯一名称，例如“myformsubmit”

从表单中删除操作

`<form name='myform' method='POST' action='<?php echo $_SERVER['PHP_SELF']; ?>' onsubmit='return valid()'>`

在您拥有此表单的页面顶部，添加此表单。

```
<?php

if(isset($_POST['myformsubmit'])
{
    require_once 'wrapper.php';
}

?> 
```

# python - 如何编写在网页上同时显示文本和图像的 Python WSGI 应用程序

> ID：13022215
> 
> 赞同：1
> 
> 时间：2012-10-23T01:07:20.640
> 
> 标签：python, wsgi

我见过简单的 wsgi 应用程序`Hello World`在网页上显示一个或一个 PNG 图像（但不是两者）。

第一页使用`'Content-type', 'text/html; charset=utf-8'`，第二页使用`'content-type', 'image/png'`。

我如何编写一个简单的应用程序（使用 say `wsgiref.simple_server.make_server`）发送两个`text/html`和`image/png`在同一个网页上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:11:38.303

基本上，如果我理解正确，你不能。您的 HTML 代码需要在其中包含一个`<img src="path/url/to/image.png">`，并且该路径需要作为静态图像提供，或者是对同一 WSGI 服务器的第二个请求，它将为您提供一个带有适当`Content-type`.

所以，让我详细说明。

假设您有一个[http://server.com/mypage](http://server.com/mypage)的请求路径，它将返回一个 HTML 并`Content-type`设置`text/html`为该 HTML，您将拥有：

```
<img src="http://server.com/myimage"> 
```

然后，在您的 WSGI 应用程序中，您实现了两条路由：

1.  `/mypage`给你一个 HTML 返回
2.  `/myimage`这会给你一个PNG图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T04:50:33.893

```
from wsgiref.util import setup_testing_defaults
from wsgiref.simple_server import make_server

def simple_app(environ, start_response):
  setup_testing_defaults(environ)
  path    = str( environ['PATH_INFO']
  headers = [('Server', 'Apache'),('Content-type', 'text/html')]
  rsp     = 'oops'

  if '.html' in path:
  rsp  = some_html

  if '.png' in path:
     headers = [('Server', 'Apache'),('Content-type', 'image/png')]
     rsp = some_png

  start_response(status, headers)
  return rsp

httpd = make_server('', 8008, simple_app)
print "Serving on port 8000..." 
```

httpd.serve_forever()

# c++ - 在类中使用向量的正确语法

> ID：13022216
> 
> 赞同：1
> 
> 时间：2012-10-23T01:07:45.297
> 
> 标签：c++

```
class Code
{
public:
  Code();
  //string decode(vector< string> message);
private:
  //vector<string> codewords;
  //vector<char> alpha;
  char vector<char>  alphacode();
  string vector<string>  morsecode();
  //char decode(string c);

};

Code::Code()
{

}

string Code::vector<string> morsecode()
{
 vector<string> temp(28);
 temp[0] =".-";
 temp[1] ="-...";
 temp[2] ="-.-.";
 temp[3] ="-..";
 temp[4] =".";
 temp[5] ="..-.";
 temp[6] ="--.";
 temp[7] ="....";
 temp[8] ="..";
 temp[9] =".---";
 temp[10] ="-.-";
 temp[11] =".-..";
 temp[12] ="--";
 temp[13] ="-.";
 temp[14] ="---";
 temp[15] =".--.";
 temp[16] ="--.--";
 temp[17] =".-.";
 temp[18] ="...";
 temp[19] ="-";
 temp[20] ="..-";
 temp[21] ="...-";
 temp[22] =".--";
 temp[23] ="-..-";
 temp[24] ="-.--";
 temp[25] ="--..";
 temp[26] =".......";
 temp[27] ="x";
 return temp;
}

char Code::vector<char> alphacode()
{
 vector<char> temp;
 for (char c='A'; c<='Z'; c++)
      temp.push_back(c);
 temp.push_back(' ');
 temp.push_back('.');
 return temp;
}

int main()
{

return 0;
} 
```

这是我到目前为止的代码，但我不知道我的向量类的语法是否正确。另外，我将如何访问代码的 int main() 部分中的向量。抱歉，C++ 的第一季度对这一切还是很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:15:27.880

首先，您需要返回一个向量类型

```
vector<char>  Code::alphacode()
{
    //
}

vector<string>  Code::morsecode()
{
    //
} 
```

其次，访问向量，迭代器是一个不错的选择：

```
int main()
{
    Code c;
    vector<string> strVector = c.morsecode();
    vector<string>::iterator it = strVector.begin();
    for (; it != strVector.end(); ++it) {
        // accessing every single string inside this vector by dereference *it eg.
        cout << *it << endl;
    }
} 
```

运行代码，检查结果，你会得到它：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:21:07.673

```
char vector<char>  alphacode();
string vector<string>  morsecode(); 
```

成员函数的返回类型错误。`char`,`vector<char>`是两种不同的类型，不能同时使用。从代码来看，您似乎需要`vector<char>`, `vector<string>`。

```
vector<string> Code::morsecode()
{
    // ...
}

vector<char> Code::alphacode()
{
    // ...
} 
```

# java - NoClassDefError com.sun.jersey.api.client.Client

> ID：13022217
> 
> 赞同：0
> 
> 时间：2012-10-23T01:08:04.757
> 
> 标签：java, android, jersey

我正在编写一个 API 来从我的网络服务中获取数据。我正在使用 jersey 客户端 api 来使用我的 Web 服务。问题是当我运行应用程序时出现此错误：

```
 10-22 19:44:44.959: E/AndroidRuntime(13171): FATAL EXCEPTION: main
 10-22 19:44:44.959: E/AndroidRuntime(13171): java.lang.NoClassDefFoundError:com.sun.jersey.api.client.Client
 10-22 19:44:44.959: E/AndroidRuntime(13171):   at com.ppsjamaica.data.DataManager.getAllUser(DataManager.java:54)
 10-22 19:44:44.959: E/AndroidRuntime(13171):   at com.ppsjamaica.MainActivity.onCreate(MainActivity.java:18)
 10-22 19:44:44.959: E/AndroidRuntime(13171):   at android.app.Activity.performCreate(Activity.java:4465) 
```

我不知道问题是什么。这是调用 Client 类的类：

```
public class DataManager {
public Client client;

public DataManager ()
{
    client = Client.create();
}

public List <User> getAllUser ()
{
    WebResource webResource = client.resource(URL.URL_USERS_ALL);
    ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);

    if (response.getStatus () == 200)
    {
        return response.getEntity (new GenericType<List <User>> (){});
    }
    else
        return null;
}//end getAllUser method 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:08:31.857

这是一个内部 Sun/Oracle API，在 Android 中不可用。Jersey 或您正在使用的任何库一开始就不应该使用它。向他们提交错误或查找另一个库。

# jquery - jquery多选代码重置其他表单字段

> ID：13022220
> 
> 赞同：1
> 
> 时间：2012-10-23T01:08:11.287
> 
> 标签：jquery, html

我有一个分配/撤销角色页面，它提供了一个选择字段来选择角色和两个多选字段来包含那些当前未分配或分配的用户。两个按钮允许您在“分配”和“撤销”多选字段之间移动用户。最后，两个提交按钮允许您保存或取消您的更改。

一切正常，除了当您按下一个添加/删除按钮时，它会触发一些 jquery 在多选之间移动突出显示的条目，它最终会将角色选择字段重置为默认（第一个）条目。

该页面看起来像：

```
<form action="" method="post" name="userroles" id="userroles">
  <table>
    <tr><td colspan="3" align="center"><h2>Assign/Revoke Roles</h2><br />
    Choose Role: 
    <select id="role" name="role">
      <option value="1" selected>Blah</option>
          .
          .
          .
    </select> <input type="submit" name="action" value="Select Role"><br /><br /></td>
    <tr><td colspan="3" align="center">
        Assigning Role:  <strong>Blah</strong></td></tr>
    <tr>
      <th>Unassigned</th>
      <th></th>
      <th>Assigned</th>
    </tr>
    <tr>
      <td><select multiple id="unassigned" name="unassigned" class="multiselect">
      <option value="11111">some</option>
      <option value="22222">people</option>
      <option value="33333">here</option>
      </select></td>
      <td>
    <input type="button" id="add" value="&gt;&gt"><br /><br /><br />
    <input type="button" id="remove" value="&lt;&lt">
      </td>
      <td><select multiple id="assigned" name="assigned" class="multiselect">
      <option value="44444">other</option>
      <option value="55555">people</option>
      <option value="66666">here</option>
      </select></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td align="right">
        <input type="submit" name="action" value="Cancel">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="action" value="Save">
      </td>
    </tr>
  </table>
</form> 
```

jquery 看起来像这样：

```
<script type="text/javascript">  
  $().ready(function() {  
    $('#add').click(function() {  
      !$('#unassigned option:selected').remove().appendTo('#assigned');
      return $("option:selected").removeAttr("selected");  
    });  
    $('#remove').click(function() {  
      !$('#assigned option:selected').remove().appendTo('#unassigned');
      return $("option:selected").removeAttr("selected");  
    });
    $('form').submit(function() {
      $('#unassigned option').each(function(i) {
        $(this).attr("selected", "selected");
      });
      $('#assigned option').each(function(i) {  
        $(this).attr("selected", "selected");  
      });  
    }); 
  });
</script> 
```

jquery 有两个函数在多选之间移动选定的条目，第三个函数突出显示两个多选上的所有条目，以便可以通过 POST 将来自两个多选的所有数据发送回。

无论如何让jquery没有重置或保留当前选择的角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:26:13.473

添加/删除按钮处理程序调用

```
$("option:selected").removeAttr("selected"); 
```

从*所有*选项中删除选定的选项，包括顶部的选项。

试试这个

```
$('#add').click(function() {  
  !$('#unassigned option:selected').remove().appendTo('#assigned');
  return $("#assigned option:selected").removeAttr("selected");  
});  

$('#remove').click(function() {  
  !$('#assigned option:selected').remove().appendTo('#unassigned');
  return $("#unassigned option:selected").removeAttr("selected");  
}); 
```

# asp.net - 在 ASP.NET MVC 中强制区分大小写路由

> ID：13022221
> 
> 赞同：3
> 
> 时间：2012-10-23T01:08:12.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-routing

[以前](https://stackoverflow.com/questions/878578/how-can-i-have-lowercase-routes-in-asp-net-mvc)在[Stack Overflow](https://stackoverflow.com/questions/170900/how-can-i-avoid-duplicate-content-in-asp-net-mvc-due-to-case-insensitive-urls-an)和[其他地方](http://blog.kurtschindler.net/post/lowercase-urls-with-aspnet-mvc)以类似但不相同的方式提出了这个问题（并且没有让我满意）。

来自 linux 世界，我想使用 ASP.NET MVC，但要避免相同但大小写不同的路由解析到同一页面。我*不想*强制所有路线都是 100% 小写。

例如，我想`/Home/Something`成为一条有效路线，`/Home/somethingElse`也想成为一条有效路线，但不是`/Home/something`or `/home/somethingelse`，给定两个名为`Something`and`somethingElse`的函数`HomeController`。

我在函数中找不到任何方法`RegisterRoutes`，但也许我遗漏了一些明显的东西？我可以通过向每个 Controller 函数添加代码来轻松回答这个问题，但我显然试图避免这样做。

理想情况下，该解决方案将涉及捕获特定路由的*所有*排列，然后 301 重定向任何与控制器功能的情况不完全匹配的排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:51:17.840

经过广泛的搜索，我无法找到*任何方法。*基本上，区分大小写和 IIS/ASP.NET 显然不能一起使用。

我们现在正在使用一些kludge来解决这个问题。该代码已在 github 上开源（MIT 许可）：[NeoSmart Web Toolkit](https://github.com/NeoSmart/web)，特别是[包含 SEO 重定向代码的此文件](https://github.com/NeoSmart/web/blob/master/Web%20Toolkit/Seo.cs)。

使用它很简单：控制器类中的每个 GET 方法只需要在开头添加这一行：

```
Seo.SeoRedirect(this); 
```

SEO 重写类自动使用 C# 5.0 的 Caller Info 属性来完成繁重的工作，使上面的代码严格地复制和粘贴。

理想情况下，我很想找到一种方法将那行代码变成一个属性。例如，在控制器方法前面加上前缀`[CaseSensitive]`将自动与在该行中写入具有相同的效果，但是唉，我（还）不知道如何做到这一点。

我也找不到任何用`Routing`类/结构来解决这个问题的方法。那是一些不透明的代码！

# debugging - 为什么 matlab 会在执行此代码时关闭，我如何追踪问题所在？

> ID：13022224
> 
> 赞同：1
> 
> 时间：2012-10-23T01:08:47.017
> 
> 标签：debugging, matlab

我正在从这个[工具箱 DR toolbox](http://homepage.tudelft.nl/19j49/Matlab_Toolbox_for_Dimensionality_Reduction.html)执行降维算法。我正在这个数据集[Gisette](http://archive.ics.uci.edu/ml/datasets/Gisette)上执行线性判别分析代码。在 train_data 和 train_labels 上执行。当我执行代码运行但一段时间后matlab自行关闭。无法弄清楚为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:29:14.793

追踪 MATLAB 崩溃是出了名的困难（我曾经在那里工作，正是为客户做这件事）。

即使有 JAVA 转储或 seg-fault 列表，您也无法在不使用 MATLAB 调试器逐行检查的情况下确定这是在哪一行。如果问题是随机的或基于内存的，您可能永远无法找到它。

这就是坏消息。好消息是 95% 的崩溃是由于 3rd 方 MEX 文件和相关的内存泄漏造成的。我猜在调暗工具箱中是一个 MEX 文件，这就是崩溃的原因。它是确定性的。如果是这种情况，您可以对代码进行 dbstop 和 dbstep 以确定 MATLAB 在哪一行消失，然后将其报告给工具箱开发人员。或者开始编辑 MEX 文件的 C 代码。

如果您还不知道，以下是有关调试的信息：

[http://www.mathworks.com/help/matlab/ref/dbstop.html;jsessionid=b3d5f42e047aacb596868b7a5961](http://www.mathworks.com/help/matlab/ref/dbstop.html;jsessionid=b3d5f42e047aacb596868b7a5961)

如果这不起作用，请尝试另一个工具箱。

我和我的朋友写了一个免费的：http: [//www.mathworks.com/matlabcentral/linkexchange/links/2947-pattern-recognition-toolbox](http://www.mathworks.com/matlabcentral/linkexchange/links/2947-pattern-recognition-toolbox)

# magento - 慢 Magento 企业版

> ID：13022225
> 
> 赞同：0
> 
> 时间：2012-10-23T01:09:11.333
> 
> 标签：magento

我们在 Nginx 和 FPC 上使用 Magento 企业版。具有充足内存和 CPU 的专用服务器。60-70 名访客一切正常。然而，在超过 200 名活跃访问者等高流量期间，我们开始遇到问题。在高峰流量期间，我们的 CPU 仍然低于 10%，并且有 40% 的可用内存。我们有一个专用的应用程序和数据库服务器。

有什么问题？这可能是网络问题吗？考虑到 CPU 低于 10% 且内存充足的事实，App 服务器出现问题或代码库未优化的可能性有多大。

史蒂夫

编辑：

我正在运行具有 64GB RAM 的 32 核应用服务器。拥有带有 PHP-FPM 和 FASTCGI 的 Nginx。检查日志后，我发现 PHP-FPM 在高峰时段出现以下错误：

[警告] [池 www] 子 26196，脚本“/var/www/magento/index.php”执行超时（600.011284 秒），终止

我有 32 个 Workers 进程以及 worker_connections 1024；

CDN 已设置，网络设置为使用 1G 连接。

# android - 为 listview 的特定子项应用 android Selector 并在同一列表项中的其他子项上禁用选择器

> ID：13022230
> 
> 赞同：4
> 
> 时间：2012-10-23T01:10:04.260
> 
> 标签：android, listview, selector

我有一个列表视图，其中每个项目都有 2 个视图（这`ListView`看起来像一个`GridView`有 2 列的项目）。我需要页眉和页脚，但它们在 中不可用`GridView`，所以我转向使用列表视图。

我想要一个用于每个列表项的单个子视图的选择器，列表选择器不起作用，它将选择器应用于两个子视图。

到目前为止我已经尝试过什么？？？？

我制作每个单个元素的根视图 a`FrameLayout`并使用该`android:foreground="@drawable/some_selector"`属性，以便模拟该`drawSelectorOnTop`属性。

我的问题 ：

如何将选择器仅应用于**列表视图项中的按下子项**。

列表视图布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/episode_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:divider="@android:color/black"
        android:dividerHeight="5dp"
        android:listSelector="@null"
        android:descendantFocusability="afterDescendants" />

</RelativeLayout> 
```

剧集项目

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    android:foreground="@drawable/all_show_cell_background_selector" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/llEpisode"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#282828"
        android:paddingBottom="5dp" >

        <ImageView
            android:id="@+id/episodeImage"
            android:layout_width="160dp"
            android:layout_height="90dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_gravity="center_vertical|center_horizontal"
            android:adjustViewBounds="true"
            android:contentDescription="@string/app_name"
            android:scaleType="centerCrop"
            android:src="@drawable/video_blank" />

        <TextView
            android:id="@+id/episodeDuration"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@id/episodeImage"
            android:layout_alignLeft="@id/episodeImage"
            android:background="@android:color/black"
            android:gravity="right"
            android:padding="2dp"
            android:textColor="#FFFFFF"
            android:textSize="11sp" />
        <!-- android:textColor="#b5b4b4" -->

        <TextView
            android:layout_marginTop="2dp"
            android:id="@+id/episodeTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/episodeImage"
            android:gravity="right"
            android:paddingRight="5dp"
            android:singleLine="true"
            android:text="hdgsagafasfsdafsdfsdfasddfsad"
            android:textColor="#ffffff"
            android:textSize="14sp" >

        </TextView>

        <TextView
            android:id="@+id/showName"
            android:layout_marginTop="2dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/episodeTitle"
            android:clickable="true"
            android:gravity="right"
            android:paddingRight="5dp"
            android:text="hdgsagafasfsdafsdfsdfasddfsad"
            android:textColor="#A8A8A8"
            android:textSize="13sp" >

        </TextView>

        <TextView
            android:layout_marginTop="2dp"
            android:id="@+id/noOfViewsText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/showName"
            android:layout_alignParentBottom="true"
            android:gravity="right"
            android:paddingRight="5dp"
            android:text="@string/number_of_views_text"
            android:textColor="#A8A8A8"
            android:textSize="11sp" />

        <TextView
            android:id="@+id/episodeNumberOfViews"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/noOfViewsText"
            android:layout_toLeftOf="@+id/noOfViewsText"
            android:layout_toRightOf="@+id/fav_img"
            android:ellipsize="none"
            android:gravity="right"
            android:paddingRight="5dp"
            android:singleLine="true"
            android:text="fsdafasdfsad"
            android:textColor="#A8A8A8"
            android:textSize="11sp" />

        <ImageView
            android:id="@+id/fav_img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/episodeNumberOfViews"
            android:layout_alignParentLeft="true"
           android:layout_marginLeft="4dp"
            android:contentDescription="@string/favourite_title_show"
            android:src="@drawable/fav_episode" />
    </RelativeLayout>

</FrameLayout> 
```

单个列表项包含 2 个剧集项

这是包含 2 个剧集项目的容器

```
 <?xml version="1.0" encoding="utf-8"?>
    <!-- This container to help emulate a GridView in each ListView item -->
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:descendantFocusability="afterDescendants"
        android:orientation="horizontal" >

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:07:07.747

我不太确定前景，但我实际上做的是使用列表视图。然后在适配器中，我为列表中的每一行设置两个相对布局，这是我的列表属性：

```
<ListView
android:id="@+id/seccion_list"
android:layout_height="wrap_content"
android:layout_width="fill_parent" 
android:divider="@null"
android:dividerHeight="0dp"/> 
```

在我的适配器中，我将布局设置为为每一行加载，这是该行中第一帧的第一个相对布局：

```
 <RelativeLayout
        android:id="@+id/primerContenedor"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/seccion_3_imagen_height"
        android:layout_marginLeft="3dip"
        android:layout_marginRight="3dip"
        android:layout_marginTop="5dip"
        android:layout_weight="1"
        android:clickable="true"
        android:focusable="true" 
        android:background="@drawable/layout_selector"> 
```

所以基本上我所做的是将相对布局可点击和可聚焦属性设置为true并定义一个选择器：

```
 <?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">   
    <item android:state_focused="true" android:drawable="@color/blue"/> 
    <item android:state_pressed="true"  android:drawable="@color/blue"/>
    <item android:drawable="@color/grey" /> 
</selector> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:50:03.697

为您的列表视图设置`@android:listSelector="@null"`。然后为列表项的各个子视图设置选择器。

还设置`android:descendantFocusability="afterDescendants"`在列表项和`android:duplicateParentState="false"`集项上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T12:25:37.087

我以前遇到过这个问题，并有一个很好的解决方案[在这里](https://stackoverflow.com/questions/10723015/draw-selector-on-top-for-a-basic-linear-layout/13135973#13135973)查看示例代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:27:09.730

我假设您正在使用 ListView 适配器，您可以在其中膨胀一个自定义布局，其中包含两个具有不同 id 的左右布局的 FrameLayout。如果不是 - 这是一种解决方案。

在 ListView Adapter 内部，添加一个全局 int selectedRowId = -1 和 short leftRight = -1（0 表示左，1 表示右）。在您的 getView 方法中，在构造 convertView 时，检查 postition==selectedRowId。如果是 - 检查 left 是 0 还是 1，这将为您提供您选择的项目，您可以对其进行操作。然后为每个 FrameLayout 添加一个 onClickListener ，其中根据选择存储 selectedRowId = position, leftRight = 0 或 1 并调用 notifyDataSetChanged()。

# arrays - 如何将文本框中的项目添加到数组中？C＃

> ID：13022233
> 
> 赞同：0
> 
> 时间：2012-10-23T01:10:22.693
> 
> 标签：arrays, textbox

我想将 13 个文本框中的项目添加到数组的 13 个元素中。一次使用一个按钮。我该怎么做呢？

```
 List<double> scoreArray = new List<double>();
        TextBox[] textBoxes = { week1Box, week2Box, week3Box, week4Box, week5Box, week6Box, week7Box, week8Box, week9Box, week10Box, week11Box, week12Box, week13Box };
            for (int i = 0; i < textBoxes.Length; i++)
        {
         scoreArray.Add(Convert.ToDouble(textBoxes[i].Text));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:37:01.373

在按钮的 Click 事件上放置一个事件处理程序。

在处理程序中，提取文本框值并将它们设置为数组的值。

十分简单！

# r - 在 as.numeric() 中避免 NA

> ID：13022234
> 
> 赞同：15
> 
> 时间：2012-10-23T01:10:32.873
> 
> 标签：r, na

如果我这样做，我会得到正确的结果：

```
a <- c("10","28","3")
which(as.numeric(a) == min(as.numeric(a)))
[1] 3 
```

但是如果向量中有NA，那就有问题了

```
a <- c("10","28","3","NA")
which(as.numeric(a) == min(as.numeric(a)))
integer(0)
Warning messages:
1: In which(as.numeric(a) == min(as.numeric(a))) :
  NAs introduced by coercion
2: In which(as.numeric(a) == min(as.numeric(a))) :
  NAs introduced by coercion 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T01:15:13.303

两件事情。

首先，缺失值的字符串`"NA"`和 R 数据表示之间存在差异，`NA`. 删除示例中 NA 周围的引号以查看：

```
a <- c("10","28","3",NA) 
```

其次，当您使用`min`实际*缺失*值（即不是字符串`"NA"`）时，您将要使用`na.rm = TRUE`：

```
which(as.numeric(a) == min(as.numeric(a),na.rm = TRUE)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T01:15:20.797

您的主要问题不是`na.rm = TRUE`在调用中指定`min`

```
numeric_a <- as.numeric(a)

which(numeric_a == min(numeric_a, na.rm = TRUE))
## [1] 3 
```

或者您可以使用`which.min`which 不需要您指定应删除 NA 值。这只会给你第一场比赛，而不是所有比赛（感谢@Dason提醒我澄清这一点）

```
which.min(numeric_a) 
```

# xcode - 当图像中有很多层时，如何将图像保存到相册？

> ID：13022235
> 
> 赞同：1
> 
> 时间：2012-10-23T01:10:33.153
> 
> 标签：xcode, xcode4.3

保存时我的图像有问题，我的图像上方有不同的图层，如绘图视图和我的文本字段，但我不希望我的图层添加到子视图，因为如果我将它添加到我的子视图我的绘图视图，文本字段不能再次编辑，因为它已经附加在图像上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:05:37.087

```
 CGSize sizePic = CGSizeMake(320, 440);
    UIGraphicsBeginImageContext(sizePic);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *imagePic = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(imagePic, nil, nil, nil); 
```

我能够自己想办法。:)

# jquery - 使用jQuery更改div单击时最接近的textarea值

> ID：13022236
> 
> 赞同：2
> 
> 时间：2012-10-23T01:10:34.207
> 
> 标签：jquery, jquery-selectors

**我在做什么**

*   目前我有一个包含多个输入和一个文本区域的表单。
*   就在文本区域上方，我有一个`div`叫做表情符号
*   此 div 包含可点击的表情符号

**HTML**

```
<form>
    <input name="example-1" type="hidden" value="spongebob" />
    <input name="example-2" type="hidden" value="gary"  />

    <div id="smilies">
        <div id="smilies-box">
            <img src="http://example.com/smilies/smile.gif" title=":)" />
        </div>
    </div>

    <textarea name="example-3"></textarea>

    <button>Post</button>
</form> 
```

**我想做的事**

我的目标是，当单击任何图像时`#smilies-box`，将该图像的标题插入到`textarea`正下方。

目前我正在尝试以下 jQuery 但它没有找到`textarea`？

**jQuery**

```
$(document).on("click", "#smilies-box img", function(){
    $(this).closest("textarea").val($(this).attr("title"));
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:15:26.807

`closest()`用于**向上**DOM 层次结构，而不是跨越或绕过。您可能会寻找的内容[`nextUntil()`](http://api.jquery.com/nextUntil/)与`.parent()`

如果你想变得非常花哨，你可能会得到这样的东西为你工作：

```
$(document).on("click", "#smilies-box img", function(){
    $(this).closest(":has(textarea)").children().has(this).nextUntil('textarea').val($(this).attr("title"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:17:38.670

.closest [()](http://api.jquery.com/closest/)将为您提供与选择器匹配的最接近的父级。而是寻找具有茶区的表格。像这样：

```
$(document).on("click", "#smiles-box img", function() {
   $this = $(this);
   $("textarea[name='example-3']", $this.closest("form"))
      .val($this.attr("title"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:17:09.193

我设法通过以下方式获得目标文本区域：

```
var targettextarea = $(this).parent().parent().parent().children('textarea'); 
```

# python - Dreamhost 上的 Django 静态文件

> ID：13022238
> 
> 赞同：4
> 
> 时间：2012-10-23T01:10:51.013
> 
> 标签：python, django, dreamhost

我有一个 Dreamhost 共享服务器托管乘客 Python/Django。目前我有一个收集非 python 文件的全局文件夹（/public/static、/public/media）。当我“收集静态”时，我的所有应用程序的 */static 文件都会被复制到全局 /public/static 文件夹中。目前很好。

**1）**我厌倦了使用**collectstatic**。我想删除我的应用程序的 */static 文件夹并将它们的文件放在全局 /public/static 中。这适用于 Dreamhost，因为Passenger Python 将Apache 的文档根指向/public，它将正确检索/public/static 和/public/media。但是在开发方面我没有这样的功能（在 python manage.py 下）。

**2)** Dreamhost/共享主机下的静态/缓存文件有什么优化吗？

以下是我的设置：

网站设置：

```
STATICFILES_DIRS = (
    ABS_PATH + '/???/???/static/', #My App's static dir
)

STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#'django.contrib.staticfiles.finders.DefaultStorageFinder'
)

TEMPLATE_DIRS = (
#ABS_PATH + '/hdrtoronto/hdrtoronto/templates/'
ABS_PATH + '/templates/'
) 
```

网址.py：

```
if os.environ.get("django_dev", None):
urlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)
urlpatterns += static(settings.STATIC_URL, document_root = settings.STATIC_ROOT) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:21:08.607

`STATIC_ROOT`并且`MEDIA_ROOT`需要位于您的 Django 项目之外。因此，`collecstatic`管理命令将所有静态资源配置在外部位置，这就是它的本意。

我建议您重新考虑如何管理静态文件。您即将做一些非常错误的事情，恐怕您完全错过了重点并违反了正确的框架行为。

# c - 如何在c中扫描一行的其余部分

> ID：13022242
> 
> 赞同：4
> 
> 时间：2012-10-23T01:11:12.117
> 
> 标签：c

我在一个文件中有几行整数，例如

```
100 20 300 20 9 45 -1
101 80 80 2 80 2 50 3 70 -1 
```

我想读取前 2 个字符并将它们存储在整数变量中，然后将其余字符存储在一个字符串中，以便稍后进行迭代。

```
do {
    fscanf(file, "%d %d", &var1,&var2);
    }while(!feof(file)); 
```

现在我想扫描该行的其余部分，移动到下一行并重复。但我不确定如何将该行的其余部分扫描为 var3 字符串

..有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T01:21:21.087

这是你要做的第一件事。`scanf("%s")`除非您*完全*控制输入数据，否则请放弃任何使用的想法。否则，你会为缓冲区溢出敞开心扉。

[这个答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)显示了一种`fgets`用于用户输入的安全方法，提供缓冲区溢出检测/避免和行清除，可以很容易地适应任何输入流。

一旦将行（和*整*行）作为字符串，并且因此知道它可能的最大大小，您可以简单地使用：

```
char strBuff[1000]. str1[1000]; // Ensure both big enough.
:
// Use /getLine/fgets to get the line into strBuff.
:
int numScanned = sscanf (strBuff, "%d %d %[^\n]", &int1, &int2, str1); 
```

格式说明符的`%[^\n]`作用是将任意数量的非换行符扫描成一个字符串：`[]`表示一个字符类，`^`意思是“匹配*除了*后面的字符之外的所有字符，用于（非）匹配的字符是换行符`\n`。

标准引文在此答案^((a))的底部。

* * *

例如，使用该功能：

```
#include <stdio.h>
#include <string.h>

#define OK       0
#define NO_INPUT 1
#define TOO_LONG 2
static int getLine (char *prmpt, char *buff, size_t sz) {
    int ch, extra;

    // Get line with buffer overrun protection.
    if (prmpt != NULL) {
        printf ("%s", prmpt);
        fflush (stdout);
    }
    if (fgets (buff, sz, stdin) == NULL)
        return NO_INPUT;

    // If it was too long, there'll be no newline. In that case, we flush
    // to end of line so that excess doesn't affect the next call.
    if (buff[strlen(buff)-1] != '\n') {
        extra = 0;
        while (((ch = getchar()) != '\n') && (ch != EOF))
            extra = 1;
        return (extra == 1) ? TOO_LONG : OK;
    }

    // Otherwise remove newline and give string back to caller.
    buff[strlen(buff)-1] = '\0';
    return OK;
} 
```

使用以下程序：

```
int main (void) {
    int rc, numScanned, int1, int2;;
    char strBuff[100], str1[100];

    rc = getLine ("Yes> ", strBuff, sizeof(strBuff));
    if (rc == NO_INPUT) {
        // Extra NL since my system doesn't output that on EOF.
        printf ("\nNo input\n");
        return 1;
    }

    if (rc == TOO_LONG) {
        printf ("Input too long [%s]\n", strBuff);
        return 1;
    }

    printf ("OK [%s]\n", strBuff);

    numScanned = sscanf (strBuff, "%d %d %[^\n]", &int1, &int2, str1);
    printf ("numScanned = %d\n", numScanned);
    printf ("int1       = %d\n", int1);
    printf ("int2       = %d\n", int2);
    printf ("str1       = [%s]\n", str1);

    return 0;
} 
```

给出以下输出：

```
Yes> 100 20 300 20 9 45 -1 blah blah blah
OK [100 20 300 20 9 45 -1 blah blah blah]
numScanned = 3
int1       = 100
int2       = 20
str1       = [300 20 9 45 -1 blah blah blah] 
```

* * *

**^((a))**`7.20.6.2 The fscanf function`的部分`C11`（尽管从 中没有改变`C99`）说明了有关`[`格式说明符的内容，稍作解释以删除不相关的多字节内容：

> `[`格式说明符匹配来自一组预期字符（扫描集）的非空字符序列。
> 
> 相应的参数应该是一个指向字符数组的初始元素的指针，该元素数组的大小足以接受序列和一个终止的空字符，它将自动添加。
> 
> 转换说明符包括格式字符串中的所有后续字符，直到并包括匹配的右括号 ( `]`)。
> 
> 括号之间的字符（扫描列表）组成扫描集，除非左括号之后的字符是一个抑扬符 (^)，在这种情况下，扫描集包含所有未出现在抑扬符和右括号之间的扫描列表中的字符。如果转换说明符以`[]`or开头`[^]`，则右括号字符在扫描列表中，并且下一个右括号字符是结束说明的匹配右括号；否则后面的第一个右括号字符是结束规范的字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:08:01.670

`scanf`不，只要您知道缓冲区的大小，就可以使用。您可以避免缓冲区溢出**并**测试它何时发生。恢复逻辑把事情搞砸了，但它仍然是可能的。我建议使缓冲区足够大，以至于溢出确实是一种放弃和死亡的错误。

首先假设一个 256-bye 缓冲区，以及一些需要声明的其他变量。您可以存储的最长字符串为 255 个字节。您可能想要扫描内部空白，但不希望`\n`末尾的换行符成为字符串的一部分。（在这种情况下，这是 的主要问题`fgets`。）魔术序列是：

```
char var[256], endchar = '\n';
int n;

n = scanf("%255[^\n]%c", var, &endchar);
if ((n < 1) || (endchar!='\n') || ferror(stdin))
{
    if (n==2) { /*it's a buffer overflow*/ }
    else if (n==0 && !ferror(stdin)) { /*must be EOF on 1st byte*/ }
    else { /*an I/O error occurred*/ }
} else { /* OK */ } 
```

这几乎是防弹的，所有的循环都发生在库中。`scanf`格式分解为：

1.  `%255[^\n]`: 最多 255 个字符串，除了换行符。
2.  `%c`: 存储下一个字符的单个字符，如果有的话。

返回值是成功存储的字段数。那，结束值`endchar`和`ferror()`结果告诉你在几个 if 语句中你需要知道的一切。单`if`检测正常情况。

这允许`EOF`在最后一行没有换行符。在这种情况下，`feof(stdin)`外部循环将检测到。

PS：反对`scanf %s`（和相关`%[]`）的论点是有根据的，但是如果您可以确保该值与缓冲区大小一致，那么它们是完全安全`%nnns`的。遗憾的是，无法为格式提供计算缓冲区大小。我所知道的最佳选择是使用.`%nnn[]``"nnn"``scanf()``sprintf()`

# android - 我的地图中有 2 个标记（openstreetmap）

> ID：13022243
> 
> 赞同：1
> 
> 时间：2012-10-23T01:11:30.523
> 
> 标签：android, osmdroid

出色地。我有一个恼人的问题，我不知道如何解决它！

当我得到 lat 和 lng 形式的 GPS 时。地图显示 2 个标记（默认一个图标和我自定义的另一个图标）。我需要地图上出现定制的图标！！

pd：我已经更改了 DRAW() 方法的路径

这是我的代码。

```
myOpenMapView = (MapView)findViewById(R.id.openmapview);
    myOpenMapView.setBuiltInZoomControls(true);
    myMapController = myOpenMapView.getController();
    myMapController.setZoom(12);

    myOpenMapView.setMultiTouchControls(true);

    ArrayList<OverlayItem> anotherOverlayItemArray;
    anotherOverlayItemArray = new ArrayList<OverlayItem>();

    GeoPoint geoPoint = new GeoPoint(Double.valueOf(lat),
                                     (Double.valueOf(lng)));

    anotherOverlayItemArray.add(new OverlayItem("US", "US", geoPoint));
    myMapController.setCenter(geoPoint);
    myMapController.animateTo(geoPoint);

    DefaultResourceProxyImpl defaultResourceProxyImpl = new DefaultResourceProxyImpl(this);
    MyItemizedIconOverlay myItemizedIconOverlay = new MyItemizedIconOverlay(anotherOverlayItemArray, null, defaultResourceProxyImpl);

    myOpenMapView.getOverlays().add(myItemizedIconOverlay); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T10:57:02.840

我遇到了同样的问题，我修复了它删除我自己的 ItemizedIconOverlay 类的绘制覆盖函数的 super.draw(...) 调用。

希望能帮助到你！

**重要编辑：**上面解释的解决方案似乎会导致标记点击操作出现问题（我们必须调用 super.draw 方法）。

为了解决这个问题，我留下了我的 CustomItemizedOverlay 类，并在每个元素上使用 OverlayItem 的 setMarker(Drawable d) 方法更改了图标，虽然粗鲁但可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:54:48.307

```
Drawable newMarker = this.getResources().getDrawable(R.drawable.ic_launcher);    

mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(anotherOverlayItemArray,
            newMarker, "listener", new DefaultResourceProxyImpl(getActivity()));

    mapView.getOverlays().add(mMyLocationOverlay); 
```

或者`myLocationOverlay.enableMyLocation(); is enabled`这意味着它将在地图上显示位置的默认标记

# zookeeper - ZooKeeper 可靠性 - 三个与五个节点

> ID：13022244
> 
> 赞同：30
> 
> 时间：2012-10-23T01:11:30.837
> 
> 标签：zookeeper, apache-zookeeper

来自[ZooKeeper 常见问题解答](http://wiki.apache.org/hadoop/ZooKeeper/FAQ)：

```
Reliability:

A single ZooKeeper server (standalone) is essentially a coordinator with
no reliability (a single serving node failure brings down the ZK service).

A 3 server ensemble (you need to jump to 3 and not 2 because ZK works
based on simple majority voting) allows for a single server to fail and
the service will still be available.

So if you want reliability go with at least 3\. We typically recommend
having 5 servers in "online" production serving environments. This allows
you to take 1 server out of service (say planned maintenance) and still
be able to sustain an unexpected outage of one of the remaining servers
w/o interruption of the service. 
```

对于 3 台服务器的集合，如果一台服务器停止轮换并且一台服务器发生意外中断，那么还有一台剩余的服务器应确保服务不会中断。那么为什么需要5台服务器呢？或者它不仅仅是正在考虑的服务中断？

*更新：*

感谢@sbridges 指出它与维持法定人数有关。ZK 定义法定人数的方式是集合中的*原始*`ceil(N/2)`数字在哪里（而不仅仅是当前可用的集合）。`N`

 *现在，谷歌搜索 ZK quorum 在[关于 ZK 的 HBase 书籍章节](http://hbase.apache.org/book/zookeeper.html)中找到了这个：

> 在 ZooKeeper 中，支持偶数个对等点，但通常不使用它，因为偶数大小的 ensemble 按比例需要比奇数大小的 ensemble 需要更多的对等点来形成仲裁。例如，一个有 4 个对等点的 ensemble 需要 3 个来形成一个 quorum，而一个有 5 个 peer 的 ensemble 也需要 3 个来形成一个 quorum。因此，一个 5 的 ensemble 允许 2 个 peer 失败并仍然保持仲裁，因此比 4 的 ensemble 更容错，后者只允许 1 个 down peer。

在 Edward J. Yoon 的[博客](http://blog.udanax.org/2010/11/quorum-algorithm-of-zookeeper.html)中对 Wikipedia 的解释是：

> 通常，这是预计出席会议的大多数人，尽管许多团体的法定人数可能较低或较高。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-23T03:41:15.600

Zookeeper 要求您有一个法定人数的服务器，其中法定人数是`ceil(N/2)`. 对于 3 个服务器的 ensemble，这意味着 2 个服务器必须随时启动，对于 5 个服务器的 ensemble，3 个服务器需要随时启动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-12T11:01:55.307

基本上，与失败的 Zookeeper 相比，只要 Active Zookeeper 占多数，Zookeeper 就可以正常工作。此外，在偶数仲裁大小的情况下，即 2、4、6 等。失败 = 活动，因此不推荐。

3 和 4 都只能处理 1 个故障，那么为什么我们要使用 4 个 Zookeepers 而不是 3 个。

[![在此处输入图像描述](../Images/2effb1df92b15c1e5eb83884eae60d9f.png)](https://i.stack.imgur.com/5EBVk.png)*

# macos - @rpath 用于嵌入在框架中的动态库

> ID：13022247
> 
> 赞同：14
> 
> 时间：2012-10-23T01:11:37.763
> 
> 标签：macos, dynamic-linking, rpath

我有一个应用程序，调用它`Animal.app`。在它的`Contents/Frameworks`文件夹里面是一个框架，比如说`Mammal.framework`. 在框架的`Versions/A/Frameworks`文件夹中，我有`dog.dylib`. 的安装名称`dog.dylib`是@rpath/dog.dylib。对于`"Runpath Search Paths"`框架的设置，我已经指定了`@loader_path/../Frameworks`. （我对最后一个设置的推理是 dylib 的“加载器”将是框架的二进制文件，位于路径`Mammal.framework/Versions/A/Mammal`。）

我在运行时收到一条错误消息：

```
Dyld Error Message:
  Library not loaded: @rpath/dog.dylib
  Referenced from: /Volumes/VOLUME/*/Animal.app/Contents/MacOS/../Frameworks/Mammal.framework/Versions/A/Mammal
  Reason: image not found 
```

我已经阅读了 Apple 的“Run-Path Dependent Libraries”文档和 Mike Ash 在 上的博客文章`@rpath`，但我仍然看不出我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:47:14.760

事实证明，正确的运行路径搜索路径是`@loader_path/Frameworks`. 我缺少的是 @loader_path 代表的不是加载器的完整路径，而是该路径减去其最后一个组件。 [Mike Ash 的博客文章](http://www.mikeash.com/pyblog/friday-qa-2009-11-06-linking-and-install-names.html)确实这么说，但我不知何故错过了它。因此，在框架的情况下，@loader_path 以 A 结尾。

# python-3.x - 在python 3.2中从列中提取日期、数据并从文本文件中填充空数据

> ID：13022254
> 
> 赞同：2
> 
> 时间：2012-10-23T01:12:57.817
> 
> 标签：python-3.x

如果有人可以帮助我，我将不胜感激。我是 python 新手，问题是我有很多 .txt 文件，我必须从这些文件中提取列中的数据并将它们全部放在包括日期在内的一行中......文件的每一列代表一个月年份和每一行对应的日期的值（如下图所示）

```
 DIA       ENERO *  FEBRE *  MARZO *  ABRIL *  MAYO  *  JUNIO *  JULIO *  AGOST *  SEPTI *  OCTUB *  NOVIE *  DICIE *

       01                                                       .0       .0       .0       .0      5.0       .0
       02                                                     53.0      2.0       .0       .0       .0     10.0
       03                                                       .0     30.0       .0       .0       .0       .0
       04                                                       .0       .0       .0       .0     30.0       .0
       05                                                       .0       .0       .0       .0       .0       .0
       06                                                     24.0       .0       .0       .0       .0       .0
       07                                                       .0       .0       .0       .0       .0     17.0
       08                                                       .0       .0       .0       .0       .0       .0
       09                                                       .0     11.0       .0       .0       .0       .0
       10                                                       .0       .0       .0       .0       .0       .0
       11                                                      3.0       .0       .0     13.0       .0       .0
       12                                                       .0       .0       .0       .0       .0       .0
       13                                                       .0       .0       .0       .0     17.0       .0
       14                                              .0       .0       .0     18.0       .0      4.0     16.0
       15                                             6.0       .0       .0      3.0       .0       .0       .0
       16                                              .0       .0     32.0     10.0       .0       .0       .0
       17                                              .0       .0     17.0      8.0       .0       .0       .0
       18                                              .0       .0       .0       .0       .0       .0     52.0
       19                                             9.0       .0       .0      9.0     35.0       .0      2.0
       20                                             3.0       .0       .0       .0      5.0       .0       .0
       21                                              .0      5.0      2.0       .0       .0       .0       .0
       22                                              .0      9.0       .0       .0     10.0       .0    100.0
       23                                             1.0       .0       .0      1.6       .0       .0      6.0
       24                                             7.0       .0       .0       .0     27.0       .0       .0
       25                                            31.0       .0       .0       .0       .0       .0       .0
       26                                            52.0       .0       .0       .0       .0       .0       .0
       27                                              .0       .0       .0       .0       .0     14.0       .0
       28                                             2.0      3.0       .0       .0       .0       .0       .0
       29                                             2.0      9.0       .0       .0       .0     26.0       .0
       30                                              .0       .0       .0       .0     25.0       .0       .0
       31                                             3.0                .0     30.0                .0 
```

如您所见，一些数据丢失了，所以我应该每天为每个丢失的数据添加 -99。最后，我的文件应该是这样的：

```
DATE            VALUE
01/01/1989      -99
01/02/1989      -99
01/03/1989      -99
.
.
.
05/14/1989      0.0
05/15/1989      6.0
.
.
12/31/1989      -99 
```

我试图通过 '\t' 和 ' ' 来拆分文件的每一行，并转换列表中的每一行，以便稍后在没有可行结果的情况下附加列......

```
with open (file) as f:
for line in f:
   line = line.split(' ') 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:24:48.957

这似乎是一种经过深思熟虑的保存记录的格式。然而，考虑到这种格式，您最好的选择是在字典中记录在您达到该类别之前有多少个字符（即 {Enero: 15, etc}）。然后为每一行确定数字（数字之间总是至少有一个空格）以及在它们之前出现了多少个字符。然后通过反复试验，您可以查看字符数是否与某个类别的值完全对应，或者如果不是，您可以说它是否在该类别的 2 以内，那么我们会将其视为属于该类别. 这应该具有将数字分类到正确类别的相当高的准确性，这似乎是这项任务中最困难的元素。

# c# - 如何在网格单元内绘制圆/椭圆？

> ID：13022255
> 
> 赞同：0
> 
> 时间：2012-10-23T01:13:30.510
> 
> 标签：c#, wpf, gridview, ellipse

我有一个来自数据库的数据的gridview加载。对于价格行，如果价格低于 5，我想圈出数字。我在 WPF 中构建它。

它会是这样的：

![在此处输入图像描述](../Images/027620d052a900dd62a331835a84b96c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:04:23.690

如果您使用数据模板来显示价格，您可以在标签顶部画一个椭圆。

```
<DataTemplate>
    <TextBlock Text={Binding Path=Price, StringFormat='{}{0} $'}/>
</DataTemplate> 
```

至

```
<DataTemplate>
    <Grid>
         <TextBlock Text={Binding Price, StringFormat='{}{0} $'}/>
         <Ellipse Stroke="Orange" 
                  StrokeThickness="2" 
                  Width="50"
                  Height="40"
                  Visibility="{Binding Path=Price, Converter={StaticResource lowPriceToVisiblity}}"/>
    </Grid>
</DataTemplate> 
```

有这样的效果。

LowPriceToVisibilty 转换器只是一个简单的 IValueConverter，它将价格作为参数并返回适当的 Visibility 值。或者，您可以将 Low Price Visibility 属性添加到绑定到该行的对象并绑定到该属性。

# .htaccess - htaccess https www（仅）到 https 非 www（仅）

> ID：13022260
> 
> 赞同：1
> 
> 时间：2012-10-23T01:14:12.617
> 
> 标签：.htaccess, redirect

如何在没有“www”的情况下使用“https”和“www”将所有流量重写为“https”。我不希望对非 SSL 流量进行任何重写（除了下面的现有代码）。同时，我也已经对干净的 url 进行了重写。SSL 证书是在非 www URL 上购买的，这就是我问如何做到这一点的原因。

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

谢谢你的时间。

[编辑]

最终得到这个工作：

```
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www.mysite.com$ [NC]
RewriteRule ^(.*)$ https://mysite.com/$1 [L,R=301] 
```

# css - 使用 css 中的 display 属性的表格网页布局

> ID：13022261
> 
> 赞同：2
> 
> 时间：2012-10-23T01:14:18.757
> 
> 标签：css, css-tables

所以我一直在使用 CSS 表格显示属性在我的网站上获取表格布局。现在，在您使用“浮动”属性或使用 HTML 表格标记之前，我更喜欢 CSS 表格布局，并且发现它更好，我已经下定决心。这是HTML代码：

```
<div class="page_wrap">
    <div class="header">
        <div class="banner">
            <h1>Heading 1</h1>
            <h2>Heading 2</h2>
        </div>
        <div class="nav">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Topics</a></li>
                <li><a href="#">"Closet"</a></li>
                <li><a href="#">Music</a></li>
                <li><a href="#">Resources</a></li>
                <li><a href="#">About</a></li>
            </ul>
        </div>
        <div class="directory"></div>
    </div>
    <div class="content">
        <div class="main_col">
            <div class="blog">
                <div class="blog_head">
                    <h3>What To Wear Today</h3>
                </div>
                <div class="blog_body">
                    <p></p>
                </div>
                <div class="blog_recent"></div>
            </div>
            <div class="news">
                <div class="news_recent"></div>
            </div>
        </div>
        <div class="sub_col">
            <div class="daily_verse">
                <h3>"What Word To Wear Today"</h3>
                <p></p>
            </div>
            <div class="bible_topic"></div>
        </div>
    </div>
    <div class="footer">
        <div class="container"></div>
    </div>
</div> 
```

这是CSS：

```
.content
{
    display: table-column-group;
    margin-top: 25px;
}

.main_col
{
    display: table-column;
    background: red;
    width: 550px;
    padding: 20px 15px;
}

.sub_col
{
    display: table-cell;
    background: green;
    width: 350px;
    padding: 20px 15px;
}

.blog
{
    display: table-cell;
    background: black;
}

.blog h3
{
    padding: 20px 0px;
    width: 250px;
}

.news
{
    display: table-cell;
    background: gray;
}

.daily_verse
{
    display: table-cell;
}

.bible_topic
{
    display: table-cell;
}
</style> 
```

问题是当我在 CSS 中使用 table-column 属性时，main_col div 下的 HTML 标记中的所有内容都会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:07:02.937

将此[示例](http://xahlee.info/js/css_table.html)用作您的结构并从那里开始。您的表格非常混乱，我认为您实际上并不想要表格列。或者也许您希望它的外观说明会有所帮助，我们可以提供代码示例？(http://xahlee.info/js/css_table.html)

# django - 在现有菜单中插入新的子菜单项

> ID：13022262
> 
> 赞同：3
> 
> 时间：2012-10-23T01:14:45.473
> 
> 标签：django, django-cms

我正在做一个项目，我需要能够以编程方式将许多基于应用程序模型的项目注入现有的基于 CMS 的菜单中。我已经开始使用这里找到的代码来修改菜单：[http](http://docs.django-cms.org/en/2.3.3/extending_cms/app_integration.html) ://docs.django-cms.org/en/2.3.3/extending_cms/app_integration.html 。

编辑：更多细节

我的客户希望我将应用程序模型对象附加到 CMS 菜单，以便它们是菜单中现有 CMS 页面的子级。我目前有一个彻底的黑客攻击，这需要我在 CMS 中制作作为所需菜单项的子项的假页面，与应用程序模型对象具有相同的名称，然后，我安装了一个修改器，如下所示：

```
class SportsMenuModifier(Modifier):
  def modify(self, request, nodes, namespace, root_id, post_cut, breadcrumb):
    if post_cut:
      return nodes

    for node in nodes:
      if node.title == "Baseball":
        node.url = "/sports/baseball"
      elif node.title == "Football":
        node.url = "/sports/Football"
      elif node.title == "Bowling":
        node.url = "/sports/bowling"
      elif node.title == "Golf":
        node.url = "/sports/golf"

    return nodes

menu_pool.register_modifier(SportsMenuModifier) 
```

这有很多错误，我不知道从哪里开始，但我将使用这个非详尽的列表来突出一些最基本的问题：

*   需要存在“假”CMS 页面
*   可笑地依赖于应用程序运动对象和假页面的命名
*   不会检测客户何时创建新的运动对象
*   让所有相关人员感到非常困惑

我希望我能做的是这样的事情（不会工作）：

在模型.py

```
from django.db import models
from cms.models.pagemodel import Page

class Sport(models.Model):
  name = models.CharField(...)
  parent = modes.ForeignKey(Page, ...)
  ... 
```

在菜单.py

```
class SportsMenu(Menu):
  def get_nodes(self, request):
    nodes = []

    for sport in Sports.objects.filter(...).order_by('order'):
      node = NavigationNode(
        _(sport.name),
        sport.get_absolute_url(),
        sport.pk,
        sport.parent.pk
      )
      nodes.append(node)

    return nodes

menu_pool.register_menu(SportsMenu) 
```

我不确定我是否可以继续使用这种方法，因为：

1.  我不知道如何获取给定页面的 menu.namespace

2.  即使我将命名空间硬编码为“CMSMenu”（我在某处读到这就是它的样子），这仍然没有做任何我能看到的事情。

那么，我们如何将基于应用程序模型的对象作为子对象附加到**现有**的基于 CMS 页面的菜单项上呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:19:25.210

对此的答案是我应该一直在使用（和 AM 使用）附加菜单，不幸的是，这里的记录非常差：[https ://django-cms.readthedocs.org/en/latest/extending_cms/app_integration.html#附加菜单](https://django-cms.readthedocs.org/en/latest/extending_cms/app_integration.html#attach-menus)。

此外，当我按照这些说明进行操作时，我不小心从 menus.base 而不是从 cms.menu_bases 导入了 CMSAttachMenu，这不会导致任何错误，但也不会做任何事情，因此调试起来相当困难 =/

这是一些工作代码，以防将来对任何人有所帮助：

在模型.py

```
from django.db import models

class Sport(models.Model):
  name = models.CharField(max_length=64, blank=True)
  slug = models.SlugField(blank=True)

  def __unicode__(self):
    return self.name

  def get_absolute_url(self):
    return "/sports/" + self.slug 
```

在菜单.py

```
from cms.menu_bases import CMSAttachMenu
from django.utils.translation import ugettext_lazy as _
from menus.base import NavigationNode
from menus.menu_pool import menu_pool

from apps.theproject.models import Sport

class SportSubMenu(CMSAttachMenu):

  name = _("Sports Sub-Menu")

  def get_nodes(self, request):

    nodes = []
    for sport in Sport.objects.order_by('order'):
      node = NavigationNode(
        sport.name,
        sport.get_absolute_url(),
        sport.pk
      )
      nodes.append(node)

    return nodes

menu_pool.register_menu(SportSubMenu) 
```

一旦这两个文件就位，重新启动服务。在 Django-CMS 中，导航到您想让各种 Sports 对象在菜单中显示为子菜单项的菜单项的页面。

在“高级设置”部分（通常是折叠的）中，您会看到一个新选项“附加菜单”，选择新项目“运动子菜单”，您就可以开始营业了。

# php - 在远程页面中搜索字符串

> ID：13022265
> 
> 赞同：0
> 
> 时间：2012-10-23T01:14:57.413
> 
> 标签：php, linux, url, wget

是否可以使用给定 URL 搜索给定字符串的远程页面，并指出它是否存在，如果存在，则表明它是在哪里找到的？

例如，“发布您的问题”包含在此站点[https://stackoverflow.com/questions/ask](https://stackoverflow.com/questions/ask)上。

除了只搜索 URL 给出的页面之外，我还想搜索任何 JS 或 CSS 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:25:41.943

您可以使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)来遍历 html 文件的内容。

做这样的事情：

```
$html = file_get_html('http://stackoverflow.com/questions/ask');
$htmlstring = $html->plaintext;
if(strstr($htmlstring, 'Post Your Question') === true)
  // do your stuff here 
```

然后获取到 css 或 js 的 url：

```
foreach($html->find('link') as $css) {
  $cssHref = $css->href;
  //load the css, parse or whatever
}
foreach($html->find('script') as $script) {
  $jsSrc = $script->src;
  //load js, parse or whatever
} 
```

从那里你可以获取 css 或 js 源 URL 并用它做你想做的事。

# objective-c - iCarousel 和 UITextView -- 空白文本视图

> ID：13022270
> 
> 赞同：0
> 
> 时间：2012-10-23T01:15:21.773
> 
> 标签：objective-c, uitextview, icarousel

我正在使用 iCarousel 来显示可编辑的问题卡。这些卡片包含一个用于输入问题的 UITextView（或者在您刷过填充的卡片时已经包含文本）。但是，当轮播显示并滚动时，有时文本视图会显示为空。

这是由于 UITextView 优化了不在屏幕外绘制文本。但是 UITableView 中的文本视图不会受此影响。

**众所周知，由于优化，使用 setNeedsDisplay 将不起作用，因此它不会重绘文本。**

我目前通过添加然后删除 1px 来更改文本视图的框架。这会强制重绘。但是，我只能在项目更改时执行此操作。iCarousel 没有 willDisplayCell 委托方法。（*尼克，你能轻松添加一个吗？代码让我感到困惑*）

因为 iCarousel 为平滑度预加载了许多视图（**这是必要的，设置 iCarouselOptionVisibleItems 并不能解决任何问题**），我似乎无能为力，但知道视图何时将出现在屏幕上。建议？

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    MIQuestionView *questionView = (MIQuestionView *)view;

    if (questionView == nil)
    {
        MIQuestionType type = [self.testSection.questionType integerValue];
        questionView = [[MIQuestionView alloc] initWithFrame:CGRectNull questionType:type];
        questionView.delegate = self;
    }

    questionView.question = [self.testSection.questions objectAtIndex:index];

    return questionView;
} 
```

文本视图嵌入在 MIQuestionView 中。文本在问题设置器中设置。我无法知道它何时出现在屏幕上。需要明确的是，我不想调整大小。文本不会在屏幕外绘制，出现在屏幕上时会显示为空白。

抱歉，我没有在上面寻找模棱两可的代码：

```
- (id)initWithFrame:(CGRect)frame questionType:(MIQuestionType)type
{
    if (CGRectEqualToRect(frame, CGRectNull))
        frame = CGRectMake(0, 0, 650, 244);

    self = [super initWithFrame:frame];
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:16:35.060

这是一个奇怪的错误。我不确定这是否是 iCarousel 的问题，或者只是在从视图层次结构中动态添加和删除 UITextViews 时需要处理的 iOS 的一个怪癖。

我有一个可能比您找到的解决方案更清洁的解决方案；只需将其添加到您的 MICardView：

```
- (void)didMoveToSuperview
{
    if (self.superview)
    {
        _textView.frame = self.bounds;
    }
} 
```

这基本上会强制 textView 在每次 cardView 被回收时重新布局，并且它避免了您必须在视图控制器中执行任何特殊操作来解决该问题。

# image - 旋转仅具有 ImageLocation 的图片框的图像

> ID：13022272
> 
> 赞同：0
> 
> 时间：2012-10-23T01:15:26.970
> 
> 标签：image, rotation, picturebox

我有一个纸牌游戏程序，当一张牌被丢弃并被发现是某种类型的牌时，它会进入我的 DefeatedChars 堆，它只是一个名为 DefeatedChars 的 PictureBox。目前，我所有的图像都是在运行时使用 ImageLocation 加载的，ImageLocation 是一些存储所有卡片图像的网站的字符串。我想知道如何将此字符串加载到 PictureBox 的 Image 属性，以便我可以旋转它，因为尝试旋转会给我一个空指针异常，因为 Image 什么都不是，至少我认为这就是原因。我通过调试知道当 DefeatedChars.Image 什么都不是。我的问题是，有没有办法在 ImageLocation 加载后旋转它，或者有没有办法将在 ImageLocation 找到的图像移动到图像属性中。最终，当我完成游戏时，我希望在图像位置找到的图像存储在本地某个地方，这样如果网站发生变化，卡片将保留其图像和属性，但这是以后的问题。这是我坚持的代码，它给了我一个空指针异常。我在 Visual Studio 中编码。

DefeatedChars.ImageLocation = tempCard.ImageLocation DefeatedChars.Image.RotateFlip(RotateFlipType.Rotate270FlipNone)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:54:01.787

我试过这个...... DefeatedChars.Image = Image.FromFile(tempCard.ImageLocation) 但我遇到了“不支持URI格式错误”。然后我在网上找到了这个小宝石，它替换了上面的第一行代码。

DefeatedChars.Image = Image.FromStream(System.Net.HttpWebRequest.Create(tempCard.ImageLocation).GetResponse().GetResponseStream())

它将 URL 转换为流，因此它可以被 Image 属性使用，它就像一个魅力。

# ruby - 枚举器 `Array#each` 的 {block} 不能总是改变数组值？

> ID：13022273
> 
> 赞同：6
> 
> 时间：2012-10-23T01:15:32.873
> 
> 标签：ruby, arrays, block, each, enumerator

好的，也许这很简单，但是......鉴于此：

```
arr = ("a".."z").to_a

arr

=> ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"] 
```

..而且我正在尝试将所有“arr”值更改为“bad”

为什么这*不起作用*？

```
arr.each { |v| v = "bad" }

arr

=> ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"] 
```

答案表明“v”是块的局部变量（数组值的“副本”），我完全理解（以前从未让我感到困惑）但后来

..如果数组元素是对象，为什么它会起作用？

```
class Person
  def initialize
    @age = 0
  end
  attr_accessor :age
end

kid = Person.new
man = Person.new
arr = [kid, man]

arr.each { |p| p.age = 50 }

arr[0]
=> #<Person:0xf98298 @age=50> 
```

**这里的“p”不是这里块的本地吗？但是它确实影响了对象，怎么会？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T01:50:14.830

我将扩展@pst 的评论：

> 为什么这不起作用？

```
arr.each { |v| v = "bad" } 
```

因为`each`遍历数组并将每个项目放入您作为*局部*变量给出的块中`v`，`v`而不是对数组的引用`arr`。

```
new_arr = arr.each { |v| v = "bad" } 
```

`each`不返回数组，因为您会使用它`map`（请参阅@benjaminbenben 的答案）。因此分配它不会“工作”。

```
arr.each { |v| arr[arr.index v] = "bad" } 
```

在这里，您将每个项目`arr`放入局部变量`v`中，但您*还在*块中引用了数组本身，因此您可以分配给数组并使用局部变量`v`来查找与`v`(但是您可能会发现，当项目并非都是唯一的时，这不会像您期望的那样工作）。

```
arr.each { |p| p.age = 50 }

kid.age #-> 50 
```

在这里，您再次`p`用 in 中的每个项目/对象填充了局部变量`arr`，但随后您通过方法访问了每个项目，因此您可以更改该项目 -**您没有更改数组**。这是不同的，因为引用是对局部变量的内容，您将其与对数组的引用混为一谈。它们是分开的东西。

* * *

回应以下评论：

```
arr[0]
# => #<Person:0xf98298 @age=50> 
```

这完全取决于谁在何时指代谁。

尝试这个：

```
v = Person.new
# => #<Person:0x000001008de248 @age=0>
w = Person.new
# => #<Person:0x000001008d8050 @age=0>
x = v
# => #<Person:0x000001008de248 @age=0>
v = Person.new
# => #<Person:0x00000100877e80 @age=0>
arr = [v,w,x]
# => [#<Person:0x00000100877e80 @age=0>, #<Person:0x000001008d8050 @age=0>, #<Person:0x000001008de248 @age=0>] 
```

`v`在那里提到了2个不同的对象。`v`不是一个固定的东西，它是一个名字。一开始是指`#<Person:0x000001008de248 @age=0>`，后来是指`#<Person:0x00000100877e80 @age=0>`。

现在试试这个：

```
arr.each { |v| v = "bad" }
# => [#<Person:0x00000100877e80 @age=0>, #<Person:0x000001008d8050 @age=0>, #<Person:0x000001008de248 @age=0>] 
```

它们都是对象，但没有任何更新或“工作”。为什么？因为当第一次进入块时，`v`指的是数组中产生（给定）的项目。所以第一次迭代`v`是`#<Person:0x00000100877e80 @age=0>`.

但是，我们然后分配`"bad"`给`v`。我们没有分配`"bad"`给数组的第一个索引，*因为我们根本没有引用数组*。`arr`是对数组的引用。放入`arr`块内，您可以更改它：

```
arr.each { |v| 
  arr[0] = "bad" # yes, a bad idea!
} 
```

那么为什么要`arr.each { |p| p.age = 50 }`更新数组中的项目呢？因为`p`指的是也恰好在数组中的对象。在第一次迭代`p`时指的是对象也称为`kid`, 并且`kid`有一个`age=`方法并且你坚持`50`它。`kid`也是数组中的第一项，但您说的`kid`不是数组。你可以这样做：

```
arr.each { |p| p = "bad"; p.age }
NoMethodError: undefined method `age' for "bad":String 
```

起初，`p`引用也恰好在数组中的对象（这是它产生的地方），但后来`p`被引用为`"bad"`.

`each`遍历数组并在每次迭代时产生一个值。你只得到值*而不是*数组。如果你想更新一个数组，你可以这样做：

```
new_arr = arr.map{|v| v = "bad" }
new_arr = arr.map{|v| "bad" } # same thing 
```

或者

```
arr.map!{|v| v = "bad"}
arr.map!{|v| "bad"}  # same thing 
```

as返回一个*填充了块返回值的*`map`数组。*将使用填充了 block 的返回值的*数组更新您调用它的引用。通常，无论如何在迭代对象时更新对象是个坏主意。我发现将其视为创建一个新数组总是更好，然后您可以将这些方法用作快捷方式。*`map!`*`!`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T03:01:13.927

在示例中

```
arr.each { |v| v = "bad" } 
```

"v" 只是对字符串的引用，当你这样做时`v = "bad"`，你重新分配局部变量。为了让一切变得糟糕，你可以这样做：

```
arr.each { |v| v.replace "bad" } 
```

下次可以一起玩`Object#object_id`

```
puts arr[0].object_id #will be save as object_id in first iteration bellow
arr.each { |v| puts v.object_id } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T01:28:00.977

您可能正在寻找 .map - 它返回一个新数组，其中包含每个元素的块的返回值。

```
arr.map { "bad" }

=> ["bad", "bad", "bad", "bad", …] 
```

using`.map!`将更改原始数组的内容，而不是返回一个新数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:34:46.343

这个怎么样

```
arry = Array.new(arry.length,"bad") 
```

这会将“坏”的默认值设置为**arry.length****

# php - flexigrid中的多次删除

> ID：13022276
> 
> 赞同：2
> 
> 时间：2012-10-23T01:16:37.847
> 
> 标签：php, jquery, flexigrid

当我自己尝试某些操作并且单次删除正在工作但多次删除不起作用时，我无法进行多次删除需要帮助！

```
 // Flexigrid 
    if (com=='Delete')
            {

               if($('.trSelected').length>0){ 
                            if(confirm('Delete ' + $('.trSelected').length + ' rows?')){ 
                                var items = parseInt($('.trSelected').text(),10); 
                                    var itemlist =items; 
                                    for(i=0;i<items.length;i++){ 
                                          itemlist+= items[i].id.substr(3)+" "; //its contains no value for multiple delete
                                    }       
                                    $.ajax({
                   type: "POST",
                   dataType: "json",
                   url: "delete.php",
                   data: "items="+itemlist,
                   success: function(data){
                 alert("Query: "+data.query+" - Total affected rows: "+data.total);
                   $("#flex1").flexReload();
                   }
                 });
                }
                } else {
                    return false;
                } 
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:53:34.630

这就是问题：

```
var items = parseInt($('.trSelected').text(),10); 
var itemlist =items; 
for(i=0;i<items.length;i++){ 
    itemlist+= items[i].id.substr(3)+" "; //its contains no value for multiple delete
} 
```

只要有多个项目，就不能调用`parseInt()`jQuery 集合，因为它不知道如何处理它。相反，您可以将选择映射到解析`.text()`值列表中，例如

```
$('.trSelected').map(function(index, item) {
    return parseInt($(item).text(), 10);
} 
```

这会将一组元素变成一个数字数组。但是你不能在下一个 for 循环的项目列表中使用它。因此，您需要简化逻辑，而不是返回已解析的 int 列表，只需返回需要处理的 id 即可。例如

```
$('.trSelected').map(function(index, item) {
    return item.id.substr(3);
} 
```

请注意地图，如果您想将项目视为常规 DOM 元素，请使用项目，但如果您需要 .css() 之类的 jQuery 内容，则需要将项目包装在 $ 中。即`$(item)`。或者，您可以使用`$(this)`来引用当前项目，这可能会更快。

祝你好运！

# cordova - GWT-平台调度+phonegap

> ID：13022277
> 
> 赞同：1
> 
> 时间：2012-10-23T01:16:50.230
> 
> 标签：cordova, rpc, gwtp, mgwt

我正在使用 GWT 平台 + mgwt + phonegap。我正在尝试使用 GWTP 操作对我的服务器进行调用，但该调用未在 iOS 模拟器中通过。该呼叫可在移动浏览器上运行。我能够通过使用 - PhonegapUtil.prepareService((ServiceDefTarget) chartService,"www.text.com/a/", "b/cname" ) 让 RPC 工作；

我启用了一些日志记录，并且 asynccallback 处理程序返回到 onFailure(..) 方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:30:03.693

为了使 GWT RPC 调用正常工作，您需要从 gwt-phonegap 调用 PhonegapUtil.prepareService 方法。

如果您使用的是 gwt-platform，则需要在他们的异步服务接口实例上执行相同的操作。

# javascript - javascript google map api v3未在android上显示

> ID：13022279
> 
> 赞同：0
> 
> 时间：2012-10-23T01:17:36.070
> 
> 标签：javascript, android, html, google-maps

我有这个小功能可以调用谷歌地图 v3

```
function showMap(con, lat, lon, name) {
    con = $(con); if (con.length<1) return;
    var ua = navigator.userAgent;
    if (ua.indexOf('iPhone') != -1 || ua.indexOf('Android') != -1 ) con.css('height','100%');
    else con.css('height','400px');

    var latlng = new google.maps.LatLng(lat,lon);
    var opt = {
        zoom:14, center:latlng,
        mapTypeControl:false, navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(con.get(0), opt);
    var marker = new google.maps.Marker({ position:latlng, map:map, title:name });
    con.show();
} 
```

我的问题是地图出现在 chrome、firefox（桌面）中，但不在 android 中。有什么建议吗？

编辑：它现在工作。显然我的 div 容器最初是隐藏的，所以我在创建地图之前将 .show() 移到顶部。

# php - 如何同时搜索两个 MySQL 表/行并返回两个单独的结果？

> ID：13022281
> 
> 赞同：1
> 
> 时间：2012-10-23T01:17:39.230
> 
> 标签：php, mysql

**脚本功能**：允许用户搜索艺术家姓名或歌曲名称

**对其他用户的好处**：可以轻松修改脚本，以供其他 stackoverflow 用户工作和搜索他们的网站 - 只需将查询更改为您的数据库结构。

```
$query_Recordset1 = sprintf("SELECT * FROM lyrics WHERE title LIKE '%%%s%%' ORDER BY title ASC", $colname_Recordset1); 
```

**ISSUE with script**：它适用于歌曲标题，但我不明白如何在不使用更改搜索的下拉菜单的情况下同时搜索艺术家姓名和歌曲标题。没有结果时也会返回错误

艺术家示例 (Rihanna - id : 16689) (title : Unfaithful - id : 228106) [http://www.thelyricsfinder.com/song.php?sid=228106&aid=16689](http://www.thelyricsfinder.com/song.php?sid=228106&aid=16689)

[Search.php 的实时/工作示例](http://thelyricsfinder.com/search.php)

*   没有结果时收到错误输出（下）

..

> 错误：
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

```
$maxRows_Recordset1 = 100;
$pageNum_Recordset1 = 0;
if (isset($_GET['pageNum_Recordset1'])) {
  $pageNum_Recordset1 = $_GET['pageNum_Recordset1'];
}
$startRow_Recordset1 = $pageNum_Recordset1 * $maxRows_Recordset1;

$colname_Recordset1 = "-1";
if (isset($_POST['term'])) {
  $colname_Recordset1 = (get_magic_quotes_gpc()) ? $_POST['term'] : addslashes($_POST['term']);
}
mysql_select_db($database_main, $main);
$query_Recordset1 = sprintf("SELECT * FROM lyrics WHERE title LIKE '%%%s%%' ORDER BY title ASC", $colname_Recordset1);
$query_limit_Recordset1 = sprintf("%s LIMIT %d, %d", $query_Recordset1, $startRow_Recordset1, $maxRows_Recordset1);
$Recordset1 = mysql_query($query_limit_Recordset1, $main) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);

if (isset($_GET['totalRows_Recordset1'])) {
  $totalRows_Recordset1 = $_GET['totalRows_Recordset1'];
} else {
  $all_Recordset1 = mysql_query($query_Recordset1);
  $totalRows_Recordset1 = mysql_num_rows($all_Recordset1);
}
$totalPages_Recordset1 = ceil($totalRows_Recordset1/$maxRows_Recordset1)-1; 
```

**目标**：为了使脚本从传递给 $_POST['term'] 的单个搜索中搜索两个表/行，但 KICKER 将结果返回到两个单独的变量中以单独显示。

1.  艺术家/艺术家
2.  歌词/标题

感谢您帮助我找到如何做到这一点。回到书本上，试图得到答案。

2012 年 11 月 2 日添加（我知道我可以通过在下面添加未找到的处理结果来帮助解决部分问题，感谢以下人员的帮助，现在我需要学习如何同时进行这两个查询）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:54:09.877

我认为你必须有一个单独的过程来进行空结果查询。由于问题不是“超过两个词”，而是搜索结果为空时。尝试这样的事情

```
$Recordset1 = mysql_query($query_limit_Recordset1, $main) or die(mysql_error());
$num_rows = mysql_num_rows($Recordset1 );
if($num_rows == 0){
   //error message
}
else{
   //process here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:58:57.243

我刚刚搜索`Fool on the hill`了两个以上的单词，并且有效。然后`Fill on the bill`给出了你所说的错误。

`ERROR : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1`

这只是意味着当搜索词与数据库中没有记录匹配时，您需要处理返回的空行情况。

# node.js - 如何使用 express.js 上传 jquery 文件？

> ID：13022282
> 
> 赞同：3
> 
> 时间：2012-10-23T01:17:41.463
> 
> 标签：node.js, upload, express, progress-bar

由于无法在所有使用纯js的浏览器中完成上传文件，

我想试试jquery文件上传，但是文档真的不好，

所以任何人都可以帮助我，或者你有什么好的教程吗？

# javascript - 我有一种方法可以垂直对齐 slickgrid 标题中的文本

> ID：13022286
> 
> 赞同：1
> 
> 时间：2012-10-23T01:19:46.210
> 
> 标签：javascript, jquery, html, css, slickgrid

我使用这个将一些标题包装成两行。

```
.slick-column-name { white-space: normal; }

.slick-header-column.ui-state-default{ height:30px; vertical-align:middle;} 
```

但是单行标题保留在单元格的顶部。有没有办法将这些“单行”标题垂直对齐到中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:32:44.860

你有没有这样介意：

```
.slick-column-name { white-space: normal; display: table-cell; vertical-align:middle; height: 100px; background: red;  }

.slick-header-column.ui-state-default{ height:30px; line-height:30px; } 
```

这里的演示：http: [//jsfiddle.net/xJUMv/](http://jsfiddle.net/xJUMv/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-13T18:35:14.627

这将强制垂直对齐中间

```
.slick-cell:after {
    height: 100%; content: ""; vertical-align: middle; display: inline-block; width: 0;
} 
```

# vb.net - 跨多个表单使用处理程序？

> ID：13022287
> 
> 赞同：0
> 
> 时间：2012-10-23T01:20:00.680
> 
> 标签：vb.net, event-handling

我有代码突出显示当前文本框，以便为用户提供视觉提示。我的问题是，如果我有 10 个带有文本框的表单，并且我想为它们都提供相同的代码。我必须复制它还是可以使用全局方法？如果是这样，一个例子将非常有帮助。谢谢。

代码如下。

```
Private Sub FocusChanged(ByVal sender As Object, ByVal e As EventArgs)
    Dim txt As TextBox = sender
    If txt.Focused Then
        txt.Tag = txt.BackColor
        txt.BackColor = Color.AliceBlue
    Else
        txt.BackColor = txt.Tag
    End If
End Sub
Private Sub CreateAccount_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For Each ctrl As TextBox In Me.Controls.OfType(Of TextBox)()
        AddHandler ctrl.GotFocus, AddressOf FocusChanged
        AddHandler ctrl.LostFocus, AddressOf FocusChanged
        ctrl.Tag = ctrl.BackColor
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:27:51.197

如果要将此行为添加到所有 TextBox 控件，最好从 TextBox 类派生自己的类，并重写`OnGotFocus`和`OnLostFocus`方法以相应地设置属性。

就是这样：

```
Public Class MyTextBox
    Inherits TextBox

    Protected Overrides Sub OnGotFocus(e As System.EventArgs)
        MyBase.OnGotFocus(e)
        Me.Tag = Me.BackColor
        Me.BackColor = Color.Aqua
    End Sub

    Protected Overrides Sub OnLostFocus(e As System.EventArgs)
        MyBase.OnLostFocus(e)
        Me.BackColor = Me.Tag
    End Sub
End Class 
```

编辑：忘了提到在将该类添加到您的项目后，重新构建解决方案，如果它编译没有错误，那么您的新 TextBox 类将显示在 VS ToolBox 中。然后，您可以像任何控件一样简单地拖放到您的表单上。

干杯

# mysql - 从 SQL 中删除 \r

> ID：13022298
> 
> 赞同：0
> 
> 时间：2012-10-23T01:22:14.630
> 
> 标签：mysql, phpmyadmin

我有个问题...

```
UPDATE `RtR`
SET
    rulings = REPLACE(rulings, '\r', '<br />'); 
```

当我运行它时，我修改了 0 行。但如果我查询

```
SELECT * 
FROM  `RtR` 
    WHERE  `rulings` LIKE  '%\\r%'; 
```

我得到 29 个结果...所以我知道那些混蛋在里面。有任何想法吗？这感觉很简单，但我已经看到几个小时的零结果了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:32:03.057

我可以知道你为什么需要额外`\`的 in`'%\\r%'`吗？

```
SELECT * 
FROM  `RtR` 
    WHERE  `rulings` LIKE  '%\r%'; 
```

# r - 在 read.table/read.csv 中为 colClasses 参数指定自定义日期格式

> ID：13022299
> 
> 赞同：108
> 
> 时间：2012-10-23T01:22:20.340
> 
> 标签：r, date, read.table, read.csv

## 问题：

**在 read.table/read.csv 中使用 colClasses 参数时，有没有办法指定日期格式？**

（我意识到我可以在导入后转换，但是有很多这样的日期列，在导入步骤中会更容易）

* * *

## 例子：

我有一个 .csv 格式的日期列`%d/%m/%Y`。

```
dataImport <- read.csv("data.csv", colClasses = c("factor","factor","Date")) 
```

这会导致转换错误。例如，`15/07/2008`变成`0015-07-20`。

* * *

## 可重现的代码：

```
data <- 
structure(list(func_loc = structure(c(1L, 2L, 3L, 3L, 3L, 3L, 
3L, 4L, 4L, 5L), .Label = c("3076WAG0003", "3076WAG0004", "3076WAG0007", 
"3076WAG0009", "3076WAG0010"), class = "factor"), order_type = structure(c(3L, 
3L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 1L), .Label = c("PM01", "PM02", 
"PM03"), class = "factor"), actual_finish = structure(c(4L, 6L, 
1L, 2L, 3L, 7L, 1L, 8L, 1L, 5L), .Label = c("", "11/03/2008", 
"14/08/2008", "15/07/2008", "17/03/2008", "19/01/2009", "22/09/2008", 
"6/09/2007"), class = "factor")), .Names = c("func_loc", "order_type", 
"actual_finish"), row.names = c(NA, 10L), class = "data.frame")

write.csv(data,"data.csv", row.names = F)                                                        

dataImport <- read.csv("data.csv")
str(dataImport)
dataImport

dataImport <- read.csv("data.csv", colClasses = c("factor","factor","Date"))
str(dataImport)
dataImport 
```

这是输出的样子：

![代码输出](../Images/adf6a50268958a63ed132bc7ed7dcdd2.png)

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-10-23T01:41:41.117

您可以编写自己的函数来接受字符串并使用所需格式将其转换为日期，然后使用 将`setAs`其设置为`as`方法。然后你可以使用你的函数作为 colClasses 的一部分。

尝试：

```
setAs("character","myDate", function(from) as.Date(from, format="%d/%m/%Y") )

tmp <- c("1, 15/08/2008", "2, 23/05/2010")
con <- textConnection(tmp)

tmp2 <- read.csv(con, colClasses=c('numeric','myDate'), header=FALSE)
str(tmp2) 
```

然后根据需要进行修改以适用于您的数据。

编辑 - -

您可能想先运行`setClass('myDate')`以避免警告（您可以忽略警告，但如果您经常这样做会很烦人，这是一个摆脱它的简单调用）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-23T01:45:59.797

如果您只想更改 1 种日期格式，您可以使用`Defaults`包更改默认格式`as.Date.character`

```
library(Defaults)
setDefaults('as.Date.character', format = '%d/%M/%Y')
dataImport <- read.csv("data.csv", colClasses = c("factor","factor","Date"))
str(dataImport)
## 'data.frame':    10 obs. of  3 variables:
##  $ func_loc     : Factor w/ 5 levels "3076WAG0003",..: 1 2 3 3 3 3 3 4 4 5
##  $ order_type   : Factor w/ 3 levels "PM01","PM02",..: 3 3 1 1 1 1 2 2 3 1
##  $ actual_finish: Date, format: "2008-10-15" "2009-10-19" NA "2008-10-11" ... 
```

我认为@Greg Snow 的答案要好得多，因为它不会改变常用函数的默认行为。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-11T17:54:42.743

如果您还需要时间：

```
setClass('yyyymmdd-hhmmss')
setAs("character","yyyymmdd-hhmmss", function(from) as.POSIXct(from, format="%Y%m%d-%H%M%S"))
d <- read.table(colClasses="yyyymmdd-hhmmss", text="20150711-130153")
str(d)
## 'data.frame':    1 obs. of  1 variable:
## $ V1: POSIXct, format: "2015-07-11 13:01:53" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-27T15:23:20.640

很久以前，与此同时，Hadley Wickham 已经解决了这个问题。所以现在解决方案被简化为单线：

```
library(readr)
data <- read_csv("data.csv", 
                  col_types = cols(actual_finish = col_datetime(format = "%d/%m/%Y"))) 
```

也许我们甚至想摆脱不必要的东西：

```
data <- as.data.frame(data) 
```

# php - 当 allday 为 false 时，FullCalendar 不显示来自 JSON 事件的时间

> ID：13022300
> 
> 赞同：4
> 
> 时间：2012-10-23T01:22:28.933
> 
> 标签：php, json, fullcalendar

我正在使用 FullCalendar 并通过 ajax 调用填充日历。

但是如果 allday 设置为 false，我无法显示时间

我正在查看[FullCalendar 没有显示来自 JSON 事件的时间，](https://stackoverflow.com/questions/2860532/fullcalendar-not-displaying-time-from-json-events)但似乎没有帮助。

这是我发回的 JSON：

> ][{"id":"18","title":"r2222","start":"2012-10-02 08:00:00","end":"2012-10-02 11:00: 00","textColor":"#000000","allday":false,"color":"#ffffff"},
> 
> {"id":"1","title":"Test 123","start":"2012-10-16","end":null,"textColor":"#000000","allday":false "颜色":"#ffffff"},
> 
> {"id":"16","title":"happy gallown","start":"2012-10-31","end":"2012-10-31","textColor":"#fffcfc" ,"allday":true,"color":"#d92727"},
> 
> {"id":"17","title":"recur","start":"2012-10-03 19:00:00","end":"2012-10-03 21:00:00" ,"textColor":"#000000","allday":false,"color":"#ff56ff"}]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T03:06:04.150

`allDay`区分大小写；把它改成`allday`——`allDay`我自己只花了 25 分钟来寻找这个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-19T09:28:47.313

你可以按照这个`allday`来`allDay`和 Time should be start:`2010-01-09T12:30:00`需要`T`在 date 和 time 之间添加。

```
events: [
    {
        title  : 'event1',
        start  : '2010-01-01'
    },
    {
        title  : 'event2',
        start  : '2010-01-05',
        end    : '2010-01-07'
    },
    {
        title  : 'event3',
        start  : '2010-01-09T12:30:00',
        allDay : false // will make the time show
    }
] 
```

# html - 将 HTML5 编译为 .exe/.dmg

> ID：13022301
> 
> 赞同：1
> 
> 时间：2012-10-23T01:22:43.897
> 
> 标签：html, compiler-construction, exe, dmg

我目前正在开始一个项目，我们想要构建一个交互式白板（教育活动）并通过 CD-ROM 进行部署。我想在 HTML5 中构建项目以获得交互性，然后以某种方式将其编译为两个 .exe。和 .dmg，因此当插入 CD-ROM 时，它会自动播放“游戏”。

这怎么可能？任何帮助/建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T18:13:13.353

我已经在 github 上使用纯 C ( **WinAPI** ) 制作了一个项目，它可以使用资源将**HTML**文件打包成**单个 EXE 。**

[http://github.com/dns/WinAPI-Embed-Browser/releases](http://github.com/dns/WinAPI-Embed-Browser/releases)

使用：`res://programname.exe/test.html`作为从您的 EXE 文件访问 html 文件的路径。

从这里您还可以隐藏窗口边框并仅显示 HTML 应用程序的内容，甚至可以全屏运行。如果您想制作**交互式 CD-ROM** ，这非常有用。

在 Mac 上，您可以使用 Delphi/Lazarus TWebBrowser 控件来加载 html 文件。但是我不知道mac程序是否可以从资源中访问文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:45:17.923

您可能不需要任何 .exe 包装。这是一种方法。

> 重要提示：您的自动运行通常会被禁用，[不是这样]悄悄地。提供一些手动运行应用程序的说明。

所以：

*   Google 用于从 CD 运行便携式版本的 Firefox 或 Chrome。准备好浏览器。将它放在代表您的 CD 的 [子] 目录中。

*   把你的内容放在那里。

*   创建一个 .cmd 文件以使用如下命令调用浏览器，

    FirefoxPortable.exe index.html

*   创建 autorun.inf (details googlable) 来调用上面的批处理文件。

*   从该目录制作 CD 映像。有很多 CD 刻录应用程序可以做到这一点。

*   测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:36:58.857

HTML 5 是一种浏览器技术，所以我认为只要您安装的电脑具有最新的浏览器，安装您的应用程序就可以正常工作。你能告诉我们为什么你想要它作为基于 CD-ROM 的安装，你可以轻松地在线托管它吗？

# c++ - 我的 mandelbrot 集输出有线图像

> ID：13022305
> 
> 赞同：0
> 
> 时间：2012-10-23T01:23:17.903
> 
> 标签：c++, c, algorithm, opengl

我正在尝试使用 c++/opengl 创建一个 mandelbrot 图像。以下是我到目前为止提出的简单代码和出现的图像：

![在此处输入图像描述](../Images/b9ed846814b2b5f29079661bc1dd6609.png)

```
 #include<GL/gl.h>
 #include <GL/glu.h>
 #include <GL/glut.h>
 #include <math.h>
 #include <stdio.h>
 #include <stdlib.h>

 double dividecubesby  = 300;
 const double left = -2.0;
 const double right = 2.0;
 const double bottom = -2.0;
 const double top = 2.0;
 int maxiteration = 90;

 int mandtest(double Cr, double Ci){

   double Zr = 0.0;
   double Zi = 0.0;
   int times = 0;

   Zr = Zr+Cr;
   Zi = Zi+Ci;

      while ((((Zr*Zr)+(Zi*Zi))<4) && (times < maxiteration)){

        Zr = (Zr*Zr)-(Zi*Zi);
        Zi = 2*Zr*Zi;
        Zr = Zr+Cr;
        Zi = Zi+Ci;                
        times = times+1;  

      }
 return times;

void display(void)
{
        glClear(GL_COLOR_BUFFER_BIT);
        glColor3f(1.0f,1.0f,1.0f);
        double real = left;//this is the real part of  the order-pair in the cube
        double image = top;// this is the image part of the order-pair in the cube
        double deltax = ((right - left)/(dividecubesby));//this means 4/300
        double deltay = ((top- bottom)/(dividecubesby));// this means 4/300

glBegin(GL_POINTS);

    for(double x= left;x<=right;x += deltax ){

        for(double y= bottom; y<=top;y +=  deltay ){

            if((mandtest(x,y))==maxiteration){

                glColor3f(1.0f,1.0f,1.0f); 
                            glVertex2f(x,y);

            }

            else {
                glColor3f(0.0f,0.0f,(float)mandtest(x,y)/maxiteration);
                                    glVertex2f(x,y);
            }

        }
    }
    glEnd();

glFlush();

}

void init(void)
{
//select clearing (background) color
    glClearColor(0.0, 0.0, 0.0, 0.0);

        //initialize viewing values 
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
//glortho(left,right,bottom,top,near,far)
    gluOrtho2D(-2.0, 2.0, -2.0, 2.0);
}

int main(int argc, char ** argv)
{   
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
glutInitWindowSize(dividecubesby,dividecubesby);
glutCreateWindow("A Simple OpenGL Windows Application with GLUT");
init();
glutDisplayFunc(display);
glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:26:50.910

在

```
 Zr = (Zr*Zr)-(Zi*Zi);
    Zi = 2*Zr*Zi;
    Zr = Zr+Cr;
    Zi = Zi+Ci; 
```

您使用 new`Zr`来计算`Zi`，产生错误的结果，让它

```
 double temp = (Zr*Zr)-(Zi*Zi);
    Zi = 2*Zr*Zi;
    Zr = temp+Cr;
    Zi = Zi+Ci; 
```

以获得更好的结果：

![在此处输入图像描述](../Images/f42080ff47d4e55dcc8f61e6590e2649.png)

# python - 为什么我的找到双字母的程序不会执行？Python

> ID：13022307
> 
> 赞同：0
> 
> 时间：2012-10-23T01:23:47.467
> 
> 标签：python, list, search

我的意图是让程序列出文本文件中包含 3 组双字母的所有字符串。如果找到 3 个或更多双字母集，以下是应该返回 True 的函数：

```
def three_double(s):
doubnum = 0
i=0
while i < len(s)-1:
    if s[i] == s[i+1]:
        doubnum += 1
    elif doubnum >= 3:
        return True
    else:
        i += 1
return False 
```

我不确定为什么它不打印任何东西。这是程序的其余部分。

```
# Function to read and apply the three_double test to each string in
# an input file.  It counts the number of results.
def find_three_double(fin):
    count = 0
    for w in fin:
        w = w.strip()
        if three_double(w):
            print w
            count = count + 1
    if count == 0:
        print '<None found>'
    else:
        print count, 'found'

# Bring in a package to access files over the web
import urllib

# Access the file containing the valid letters
words_url = "http://thinkpython.com/code/words.txt"
words_file = urllib.urlopen(words_url)

# Apply the actual test
find_three_double(words_file) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:26:29.337

起初我没有仔细阅读您的代码，结果发现它与您在函数中迭代无关`read()`或无关。`readlines()``find_three_doubles()`

* * *

在您的`three_double()`功能中：

```
while i < len(s)-1:
    if s[i] == s[i+1]:
        doubnum += 1
    elif doubnum >= 3:
        return True
    else:
        i += 1
return False 
```

有两个问题：

*   您需要增加`i`1，否则如果有“双”，while 循环将永远不会停止。
*   您还需要更改`elif`为`if`此处，否则将无法选择某些合格的单词。

* * *

固定代码：

```
def three_double(s):
    doubnum = 0
    i=0
    while i < len(s)-1:
        if s[i] == s[i+1]:
            doubnum += 1
        if doubnum >= 3:
            return True
        i += 1
    return False

# Function to read and apply the three_double test to each string in
# an input file.  It counts the number of results.
def find_three_double(fin):
    count = 0
    for w in fin:
        w = w.strip()
        if three_double(w):
            print w
            count = count + 1
    if count == 0:
        print '<None found>'
    else:
        print count, 'found'

# Bring in a package to access files over the web
import urllib

# Access the file containing the valid letters
words_url = "http://thinkpython.com/code/words.txt"
words_file = urllib.urlopen(words_url)

# Apply the actual test
find_three_double(words_file) 
```

结果：

```
aggressiveness
aggressivenesses
allottee
allottees
appellee
appellees
barrenness
barrennesses
bookkeeper
bookkeepers
bookkeeping
bookkeepings
cheerlessness
cheerlessnesses
committee
committees
greenness
greennesses
heedlessness
heedlessnesses
heelless
hyperaggressiveness
hyperaggressivenesses
keelless
keenness
keennesses
masslessness
masslessnesses
possessiveness
possessivenesses
rottenness
rottennesses
sleeplessness
stubbornness
stubbornnesses
successfully
suddenness
suddennesses
sullenness
sullennesses
toolless
wheelless
whippoorwill
whippoorwills
woodenness
woodennesses
46 found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:31:49.313

[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)可以大大简化您的程序（= 更少的错误）

```
from itertools import groupby
import urllib

def find_three_double(words_file):
    for word in words_file:
        word = word.strip()
        if sum(sum(1 for i in g) == 2 for k,g in groupby(word)) == 3:
            print word

# Access the file containing the valid letters
words_url = "http://thinkpython.com/code/words.txt"
words_file = urllib.urlopen(words_url)

# Apply the actual test
find_three_double(words_file) 
```

* * *

解释：

在我们看到的生成器表达式中`groupby(word)`。这会扫描单词并将双字母聚集在一起。

`sum(1 for i in g)`应用于每个组。相当于求组的长度。如果长度为 2，则这是一个双字母，因此`sum(1 for i in g) == 2`计算为`True`

外层`sum()`将所有`True`和`False`值相加，`True`加为`1`和`False`加为`0`。如果恰好有 3 个`True`值，则打印该单词

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:48:08.340

```
while i < len(s)-1:
    if s[i] == s[i+1]:
        doubnum += 1
    elif doubnum >= 3:
        return True
    else:
        i += 1 
```

如果您的第一个检查 ( `s[i] == s[i+1]`) 是`True`，那么您将永远不会增加`i`，因此循环将永远继续。

# php - 如何从 foreach 循环中获取值并解析它们

> ID：13022309
> 
> 赞同：0
> 
> 时间：2012-10-23T01:23:57.670
> 
> 标签：php

我正在尝试循环一个数组并将其值用于我的 html 代码...

我有

```
array as...

title1
http://link...
1024 //window width
700  //window height

title2
http://link2...
1024 //window width
700  //window height

more... 
```

我的 foreach 循环。

```
 foreach ($line as $field){

       echo "<a href='http://link...'>title1</a>";
       echo "<h1>1024</h1>"; //window width
       echo "<h2>700</h2>";  //window height
   } 
```

如何区分这些值并在页面中显示它们？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:36:26.187

根据您的评论，您的数据采用逗号分隔格式，所有 4 个字段都在一行中：

```
title1,http://url1...,1024,720
title2,http://url2...,1024,720 
```

简单地说，逐行读取文件，然后使用`explode`将行拆分为数组（使用逗号`,`作为分隔符）。

```
foreach ($line in $all_file_lines){   // for each line in the file
   $fields = explode(',', $line);     // split the line into the 4 fields
   echo "<a href='$fields[1]'>$fields[0]</a>";
   echo "<h1>$fields[2]</h1>"; //window width
   echo "<h2>$fields[3]</h2>";  //window height 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:29:47.563

如果您的数据已经在 PHP 数组中并命名为`$line`：

```
foreach ($line as $field){

   echo "<a href='".$field['link']."'>".$field['title']."</a>";
   echo "<h1>".$field['width']."</h1>";
   echo "<h1>".$field['height']."</h1>";
} 
```

但是，您的数组必须正确设置键命名（链接、标题、宽度、高度）。

希望这可以帮助。

# php - 当从 php 上传器上传文件时，WinSCP 无法修改它

> ID：13022310
> 
> 赞同：0
> 
> 时间：2012-10-23T01:23:58.623
> 
> 标签：php, file-upload, phpbb, phpbb3, winscp

如果文件是由 php 文件以任何方式上传或创建的，我无法修改它，但我可以删除它。这真的很烦人。

PS：所有创建或上传的文件都是用phpBB 3.0.11完成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:41:53.210

最有可能的是，PHP 在 Web 服务器用户（httpd、www、www-data 或类似用户）下运行。上传文件时，它们归该用户所有。

您不能修改文件，因为您不是所有者。但是，您可以删除它们，因为您很可能拥有上传目录。

一些解决方案是：

*   检查您的 phpBB FTP 设置
*   通过[suEXEC](http://httpd.apache.org/docs/2.2/suexec.html)或[mpm-itk](http://mpm-itk.sesse.net/)运行 PHP ，这将允许您定义运行 PHP 的用户
*   如果您确实必须在 PHP 之外编辑它们，请将文件权限设置为组或全局可写（参见[http://php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)）

# java - 格式化时间正则表达式以要求 AM/PM

> ID：13022316
> 
> 赞同：0
> 
> 时间：2012-10-23T01:24:35.157
> 
> 标签：java, regex

我的正则表达式匹配以下类型的格式化时间字符串：

```
12:30
12:30 AM
12:30 pm
1:30
1:30 AM 
```

((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5 ][0-9])(?::[0-5][0-9])?(?:\s?(?:am|AM|pm|PM))?)

我想知道如何修改表达式以*要求*am/pm？任何人都可以伸出援助之手吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:32:43.773

删除最后一个“？”：

((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5 ][0-9])(?::[0-5][0-9])?(?:\s?(?:am|AM|pm|PM)))

# c - 从指针分配结构的成员值

> ID：13022317
> 
> 赞同：0
> 
> 时间：2012-10-23T01:24:39.587
> 
> 标签：c, pointers, struct, assign

我有一个结构和一个函数，它返回一个指向它读取的结构的指针：

```
typedef struct cal_t {
    float xm; 
    float ym; 
    float xn; 
    float yn; 
} cal_t;

struct cal_t *lld_tpReadCalibration(void); 
```

在其他地方，我确实有该结构的一个实例：

```
struct cal_t cal; 
```

现在我需要将该结构实例的值分配给我得到返回指针的结构的值。所以我想要的是 cal.xm 与 lld_tpReadCalibration() 中的 cal->xm 的值相同。象征性地：

```
struct cal_t cal;

cal = lld_tpReadCalibration(); 
```

但这当然行不通：

```
error: incompatible types when assigning to type 'volatile struct cal_t' from type 'struct cal_t *' 
```

我怎样才能按照我想要的方式进行这项工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:30:23.550

您需要以某种方式取消引用指针。您正在从函数中取回一个指针，因此您正在寻找一个`*`运算符 or `->`，这当然是 a `*`with 的同义词。

您定义`cal`为`struct cal_t`，函数返回指向 的指针`cal_t`。所以你需要取消引用指针。

```
cal = *lld_tpReadCalibration(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:31:14.580

函数返回值为struct cal_t *，为指针类型。

因此，您应该将返回值分配给类型为 struct cal_t * 的变量。

例如，

```
struct cal_t *cal_ptr;

cal_ptr = lld_tpReadCalibration(); 
```

# jquery - 如何使轮播在此 Shopify 主题中自动滚动？

> ID：13022318
> 
> 赞同：2
> 
> 时间：2012-10-23T01:24:43.373
> 
> 标签：jquery, carousel, shopify

我在这个 Shopify 主题中有一个轮播，我正在尝试对其进行编辑以使其每 5 秒自动滚动到下一张幻灯片（而不必单击到下一张幻灯片）。

这是我用于轮播的内容：

```
//Carousel interaction
(function() {
    if (document.getElementById('carousel-nav')) {
        var slides = document.getElementById('carousel-images'),
            slidesItems = slides.getElementsByTagName('li'),
            nav = document.getElementById('carousel-nav'),
            navItems = nav.getElementsByTagName('li'),
            current = 0;

        function showSlide(i) {
            if (i != current && slidesItems[i]) {
                slide = slidesItems[i];
                slide.className += ' show';
                setTimeout (function() {
                    slide.className = slide.className.replace('show', 'appear');                    
                }, 1);
                setTimeout(function() {
                    slidesItems[current].className = slidesItems[current].className.replace('current', '');
                    slide.className = slide.className.replace('appear', 'current');
                    current = i;
                }, 300);
                navItems[i+1].className += ' current';
                navItems[current+1].className = navItems[current+1].className.replace('current', '');
                if (i == 0) {
                    if (navItems[0].className.indexOf('disabled') == -1) {
                        navItems[0].className += ' disabled';
                    }
                } else {
                    navItems[0].className = navItems[0].className.replace(' disabled', '');
                }
                var l = navItems.length - 1;
                if (i == slidesItems.length - 1) {
                    if (navItems[l].className.indexOf('disabled') == -1) {
                        navItems[l].className += ' disabled';
                    }
                } else {
                    navItems[l].className = navItems[l].className.replace(' disabled', '');
                }
            }
        }   

        nav.onclick = function(e) {
            e = e || window.event; e = e.target || e.srcElement;
            e = getParentByTagName(e, 'A');
            if (e) {
                var action = e.getAttribute('data-action');
                if (action == 'prev') {
                    showSlide(current - 1);
                } else if (action == 'next') {
                    showSlide(current + 1);
                } else {
                    showSlide(parseInt(action));
                }
            }
            return false;
        }
    }
})(); 
```

有任何想法吗？我有点难过。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:25:42.750

让我跟进最后一个答案，因为这个想法是正确的。你想要做的是创建一个自我延续的循环。一种方法是在您拥有的 if 语句的末尾再次调用 slide 函数。为此，我们将使用 setInterval()，有两个参数，第一个是函数（当我们加 1 时），第二次，以毫秒为单位（在本例中，我们将其设置为 10秒（10000 毫秒）。

您的代码应该类似于以下内容：

```
//Carousel interaction
(function() {
if (document.getElementById('carousel-nav')) {
    var slides = document.getElementById('carousel-images'),
        slidesItems = slides.getElementsByTagName('li'),
        nav = document.getElementById('carousel-nav'),
        navItems = nav.getElementsByTagName('li'),
        current = 0;

    function showSlide(i) {
        if (i != current && slidesItems[i]) {
            slide = slidesItems[i];
            slide.className += ' show';
            setTimeout (function() {
                slide.className = slide.className.replace('show', 'appear');                    
            }, 1);
            setTimeout(function() {
                slidesItems[current].className = slidesItems[current].className.replace('current', '');
                slide.className = slide.className.replace('appear', 'current');
                current = i;
            }, 300);
            navItems[i+1].className += ' current';
            navItems[current+1].className = navItems[current+1].className.replace('current', '');
            if (i == 0) {
                if (navItems[0].className.indexOf('disabled') == -1) {
                    navItems[0].className += ' disabled';
                }
            } else {
                navItems[0].className = navItems[0].className.replace(' disabled', '');
            }
            var l = navItems.length - 1;
            if (i == slidesItems.length - 1) {
                if (navItems[l].className.indexOf('disabled') == -1) {
                    navItems[l].className += ' disabled';
                }
            } else {
                navItems[l].className = navItems[l].className.replace(' disabled', '');
            }
        }
    }   

    nav.onclick = function(e) {
        e = e || window.event; e = e.target || e.srcElement;
        e = getParentByTagName(e, 'A');
        if (e) {
            var action = e.getAttribute('data-action');
            if (action == 'prev') {
                showSlide(current - 1);
            } else if (action == 'next') {
                showSlide(current + 1);
            } else {
                showSlide(parseInt(action));
            }
        }
        return false;
    }

    setInterval(current+1, 10000);
}
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:47:54.967

语法有点不对劲。这将做到：

```
setInterval(function() { showSlide(current + 1) }, 5000); 
```

它应该放在代码的更下方，所以它不在 nav.onclick 块之外，但仍然在原始函数中。请参见下面的示例。

```
nav.onclick = function(e) {
            e = e || window.event; e = e.target || e.srcElement;
            e = getParentByTagName(e, 'A');
            if (e) {
                var action = e.getAttribute('data-action');
                if (action == 'prev') {
                    showSlide(current - 1);
                } else if (action == 'next') {
                    showSlide(current + 1);
                } else {
                    showSlide(parseInt(action));
                }
            }
            return false;
        }

    }
        setInterval(function() { showSlide(current + 1) }, 5000);
    })(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:42:20.340

这只是`showSlide()`每五秒触发一次方法的问题，使用类似`setTimeout()`.

为了让它前进到下一张幻灯片，你会开火`showSlide(current + 1)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T23:59:14.440

如果您想在单击按钮后停止滚动，请务必将该 setInterval 添加到变量中，然后在单击时使用 clearInterval 停止它。请参阅下面的代码。

```
var rotation = setInterval(function() { showSlide(current + 1) }, 7000);

        nav.onclick = function(e) {
            e = e || window.event; e = e.target || e.srcElement;
            e = getParentByTagName(e, 'A');
            if (e) {
                var action = e.getAttribute('data-action');
                if (action == 'prev') {
                    showSlide(current - 1);
                } else if (action == 'next') {
                    showSlide(current + 1);
                } else {
                    showSlide(parseInt(action));
                }
            }
            clearInterval(rotation);
            return false;
        } 
```

# javascript - 我在我的 javascript 中做错了什么？

> ID：13022320
> 
> 赞同：0
> 
> 时间：2012-10-23T01:24:55.330
> 
> 标签：javascript

我不知道这里出了什么问题。当我在网站上运行此代码时，它不会出错。

它旨在从浏览器中的书签运行以将脚本注入网站，但我没有显示提示。

```
var s = document.createElement('script');
s.type='text/javascript';
document.body.appendChild(s);
if confirm('Press OK to enter a url to the script/nPress Cancel to enter code directly')
{
    s.src=prompt('Enter the url to the script file (javascript only):');
} else {
    s.innerhtml=prompt('Enter code to inject (javascript only):');
}
void(0); 
```

这是将从书签运行的代码版本。

```
javascript:var s = document.createElement('script');s.type='text/javascript';document.body.appendChild(s);s.innerhtml=prompt('Enter code to inject (javascript only):'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:28:53.460

您需要将`if`条件括在括号中，例如

```
if (confirm('Press OK to enter a url to the script/nPress Cancel to enter code directly')) 
```

我用你的原始代码得到的错误是

> SyntaxError：意外的标识符

# facebook - 将文本添加到 facebook 共享弹出窗口（javascript 不是硬编码的 html 字符串）

> ID：13022335
> 
> 赞同：0
> 
> 时间：2012-10-23T01:27:03.987
> 
> 标签：facebook, facebook-graph-api, facebook-sharer

我正在尝试在弹出后将文本添加到 Facebook 共享链接。我浏览了 facebook 开发网站并在线搜索，唯一看起来可能远程工作的东西是为 Graph API 添加元标记。但我无法让他们工作或展示任何东西。

下面是按钮的代码

```
<script>
    function fbs_click() {
      u=location.href;
      t='Where is your kind of crowd? Ask StreetPotato';
      window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');

      return false;
    }
</script>

<a rel="nofollow" href="#" 
      class="fb_share_button social" onclick="return fbs_click()"
      target="_blank" 
      style="text-decoration:none;"
      title='Follow us on Facebook'>
      <%=image_tag "social/facebook.png", alt:"Follow us on Facebook"%>
</a> 
```

如果有人对如何添加默认文本有任何见解或想法，例如在共享文本框中添加井号标签，那就太棒了。谢谢阅读。

-艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:21:57.100

通常，您不应预先填充任何将代表用户发布的 Facebook 社交对话。

[请参阅平台政策文档](https://developers.facebook.com/policy/)的 IV.2 ：

“您不得预先填写与以下产品相关的任何字段，除非用户在工作流程的早期手动生成内容：流故事（Facebook.streamPublish 和 FB.Connect.streamPublish 的 user_message 参数，以及流的消息参数.publish)、照片（标题）、视频（描述）、注释（标题和内容）、链接（评论）和 Jabber/XMPP"

# c++ - C++程序中的分段错误

> ID：13022346
> 
> 赞同：0
> 
> 时间：2012-10-23T01:28:34.947
> 
> 标签：c++, stl, segmentation-fault

我正在为我的链表实现使用 STL 列表，但是当我在循环中使用擦除函数时，它会给出分段错误。有人能告诉我为什么会这样吗？

```
void remove(list<int> &myList,int N){
    int k = 1;
    list<int>::iterator it;
    for(it = myList.begin(); it != myList.end();it++){
        if(k == N){
            myList.erase(it);
            k = 1;
        }
        else
            k++;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T01:31:45.860

当您在迭代器上调用擦除时，它会使该迭代器无效。但是你继续使用它。您需要捕获擦除的返回值，并将其分配回您的迭代器，如下所示：

```
it = myList.erase(it); 
```

但这将需要对您的循环进行轻微更改。如果你擦除，那么你不想增加，因为你会跳过一个元素。如果您最终擦除了最后一个元素，这尤其糟糕，因为那样您将越过 end 迭代器。*所以，如果*你不擦除，你应该只增加：

```
for(it = myList.begin(); it != myList.end(); ){
    if(k == N){
        it = myList.erase(it);
        k = 1;
    }
    else
    {
        k++;
        ++it;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T01:31:54.837

如果你擦除一个元素，它的迭代器就会失效。换句话说，当您进行下一次迭代时，您所做`it++`的将不再有意义，因为`it`不再指向列表的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T01:37:21.490

像这样做，

```
void remove(list<int> &myList,int N){
    int k = 1;
    list<int>::iterator it;
    for(it = myList.begin(); it != myList.end();){
        if(k == N){
            myList.erase(it++);
            k = 1;
        } else{
            ++it;
            k++;
        }
    }
} 
```

执行代码 myList.erase(it++) 时，迭代器“it”表示的对象无效。因此，未定义执行“it++”

# linux - Grep .html 语法

> ID：13022349
> 
> 赞同：0
> 
> 时间：2012-10-23T01:28:53.440
> 
> 标签：linux, bash, grep

我对 bash 很陌生，所以如果这是一个愚蠢的问题，我深表歉意。

我正在尝试编写一个脚本，该脚本需要一个文件并测试它是否以 html 结尾。这是我的代码：

```
echo tester.html | grep -E '[^ ]*[.html]' 
```

然而它会回应我给它的每一个输入，我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:30:08.437

```
echo tester.html | grep -q '\.html$' && echo "MATCH" || echo >&2 "NO MATCH" 
```

或在[bash](/questions/tagged/bash "显示标记为“bash”的问题")

```
x=tester.html
[[ $x == *html ]] && echo "MATCH" || echo >&2 "NO MATCH" 
```

`&&`&`||`布尔语法是 的快捷方式`if condition; then something; else something_else; fi`，请参阅[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)

**注意** -`[]`在[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)中使用意味着*字符类*（一组字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:43:56.597

我在 sputnick 的帮助下解决了这个问题。

这里是：

```
echo tester.html | grep -E *html 
```

这有效，

谢谢大家。

# vb.net - For 循环和数组

> ID：13022350
> 
> 赞同：1
> 
> 时间：2012-10-23T01:28:53.733
> 
> 标签：vb.net

我需要一点帮助。除了一件小事之外，我的代码 99% 都可以正常工作。

我正在制作所谓的“自助餐厅调查”，它记录来自用户自己输入的组合框的响应。

这里的问题是它计算（放置 *）数字 1 比我在 ComboBox 中选择的数字少。

如果我在它的末尾添加 + 1，`SelectedIndex` 则将 * 放置在正确的数字上，但对于 #10 响应（ratingComboBox.SelectedIndex）+= 1 它不会这样做

任何帮助都会很棒。提前致谢。

这是我的代码：

```
Public Class CafeteriaSurveyForm

Dim choices As Integer() = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
Dim responses(0 To 11) As Integer
Dim responseCounter As Integer = 0

' displays histogram
Sub DisplayHistogram()

    outputTextBox.Text = ("Rating" & vbTab & "Frequency")

    For i As Integer = 0 To choices.GetUpperBound(0)
        For ii As Integer = 1 To responses(i)
            outputTextBox.Text &= ("*")
        Next
        outputTextBox.Text &= (vbNewLine & choices(i) & vbTab)
    Next

End Sub ' DisplayHistogram

Private Sub CafeteriaSurveyForm_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    ratingComboBox.DataSource = choices
End Sub

Private Sub submitButton_Click(sender As System.Object, e As System.EventArgs) Handles submitButton.Click
    responseCounter += 1

    responses(ratingComboBox.SelectedIndex) += 1

    DisplayHistogram()

End Sub

End Class ' CafeteriaSurveyForm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:52:27.330

你的显示功能有点落后。这是你现在拥有的：

```
For i As Integer = 0 To choices.GetUpperBound(0)
    For ii As Integer = 1 To responses(i)
        outputTextBox.Text &= ("*")
    Next
    outputTextBox.Text &= (vbNewLine & choices(i) & vbTab)
Next 
```

对于每个循环，它都将星号写入前一行（因为新行是在之后完成的）。如果您增加选定的索引，它会将它们写入正确的位置，但永远不必为#10 写入星号，因为它在有机会之前就退出了 for 循环。

这应该是：

```
For i As Integer = 0 To choices.GetUpperBound(0)
    outputTextBox.Text &= (vbNewLine & choices(i) & vbTab)
    For ii As Integer = 1 To responses(i)
        outputTextBox.Text &= ("*")
    Next
Next 
```

甚至

```
For i As Integer = 0 To choices.GetUpperBound(0)
    outputTextBox.Text &= vbNewLine & choices(i) & vbTab & New String("*", responses(i))

Next 
```

现在选择和响应数组使用相同的索引同步，并在相同的循环迭代期间访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:18:14.493

试试这个，看看它是否能给你预期的输出。

1.  删除`responseCounter`变量。它没有做任何重要的事情（无论如何我都没有看到）。

2.  `responses`将声明更改为`Dim responses(9) As Integer`.
    VB.NET 使用零 (0) 作为数组（以及几乎所有其他类型的集合）的下限，因此该语句将创建一个包含十 (10) 个元素的整数数组。

3.  `For ii As Integer = 1 to responses(i)`将循环块更改为`outputTextBox.Text &= New String('*', responses(i))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:36:19.883

也许错误在于 Responses(i) 被定义为 1 到 11 范围内的整数。如果该范围不包括在内，那么当您为响应 10 将 Responses(i) 增加 1 时，您将超出该范围。

# twitter-bootstrap - 如何提交 twitter bootstrap javascript 按钮？

> ID：13022353
> 
> 赞同：1
> 
> 时间：2012-10-23T01:29:33.167
> 
> 标签：twitter-bootstrap, validation

我说的是这里的 Twitter Boostrap 单选按钮：http: [//twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

我在我的视图文件中使用了它们，如下所示：

```
<div class="btn-group" data-toggle="buttons-radio">
     <input type="button" name="type" class="btn" value="Car">
     <input type="button" name="type" class="btn" value="Bicycle">
</div> 
```

但是当我提交表单并尝试验证它们时，我无法获得它们的值......

`echo $_POST['type'];`是空的......那么我应该如何访问和验证上述“单选”按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:08:34.867

该插件仅适用于外观：它不设置任何内容（类除外）。你必须使用你自己的 JS 来设置一些真正的单选按钮，或者一个独特的隐藏输入。

```
$('[data-toggle="buttons-radio"] > .btn').on('click',function() {
    $('#someHiddenInput').val($(this).val());
}); 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/c3jsU/)

似乎`type="button"`无论如何都没有提交（在我的 Firefox 上）。

* * *

这是一种方法，另一种方法是检查提交哪个具有`.active`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:56:01.517

一个优雅的解决方案源自 Sherbrow 的回答。它使您可以拥有多个 Bootstrap 风格的单选按钮，并通过一行代码使它们与隐藏的输入保持同步。您需要做的就是始终在 .btn 组内放置一个隐藏的输入。

HTML：

```
 <!-- Vehicle
        ================================================== -->
        <div class="control-group">
            <label class="control-label" for="selectRecipients">Vehicle</label>
            <div class="controls">
                <div class="btn-group" data-toggle="buttons-radio">
                    <button type="button" class="btn" value="car">Car</button>
                    <button type="button" class="btn" value="bicyle">Bicycle</button>
                    <input type="hidden" name="vehicle" value=""></input>
                </div>
            </div>
        </div>

        <!-- Food
        ================================================== -->
        <div class="control-group">
            <label class="control-label" for="selectRecipients">Vehicle</label>
            <div class="controls">
                <div class="btn-group" data-toggle="buttons-radio">
                    <button type="button" class="btn" value="apples">Apples</button>
                    <button type="button" class="btn" value="oranges">Oranges</button>
                    <input type="hidden" name="food" value=""></input>
                </div>
            </div>
        </div> 
```

查询：

```
 /** Associate UI-only radio buttons with hidden fields **/
    $('[data-toggle="buttons-radio"] > button').on('click', function() {
        $(this).parent().find('input[type=hidden]').val( $(this).val() );
        alert( $(this).parent().find('input[type=hidden]').val() );
    }); 
```

演示：http: [//jsfiddle.net/KyHMp/1/](http://jsfiddle.net/KyHMp/1/)

在实时设置中，您希望将其中一个按钮设置为默认活动按钮 (.active)，并为隐藏字段提供默认值。

我希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T01:31:31.637

这实际上甚至与 Twitter Bootstrap 无关。您应该考虑为“名称”属性设置唯一名称。

# iphone - 从 iPhone 测试的演示应用程序

> ID：13022358
> 
> 赞同：1
> 
> 时间：2012-10-23T01:29:58.263
> 
> 标签：iphone, ad-hoc-distribution

我们打算在完成后发送给 Apple 的应用程序。

但欧盟的客户想要一个演示应用程序在他们的 iphone 上测试下载，以便在批准该应用程序发送给 Apple 之前进行测试。欧盟的客户需要有一个可下载的应用程序工作版本，无论是在他们的手机上还是在他们的利益相关者的手机上，包括美国和英国。在此有大委员会来批准该应用程序。我不知道委员会中有多少人。

我认为 Apple 不接受演示或测试应用程序版本。这是一个直接的拒绝。欧盟的客户如何在不安装噩梦般的 xcode 和 cordova 框架等的情况下测试实际应用程序，因为大多数人使用 PC。

必须有更简单的解决方案将测试应用程序下载给我从未见过的人......欧盟的大型利益相关者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:37:29.680

这是关于导出应用程序然后通过 iTunes 将其添加到设备的两个非常好的教程。

[http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/) http://www.innerfence.com/howto/install-iphone-application-ad-临时分布

虽然上述教程可能能够满足您的需求，但我建议通过 TestFlightApp 提供一种更简单的方法。我将它们用于我所有的 beta 测试需求，到目前为止它们都很棒。[在https://testflightapp.com](https://testflightapp.com)上查看它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:55:47.160

使用 TestFlight - 我写了一篇关于[让您的客户构建移动应用程序的](http://trigger.io/cross-platform-application-development-blog/2013/04/02/getting-mobile-app-builds-to-your-customers/)博客，其中包括一个关于 TestFlight 的简短教程和屏幕截图

# c# - 如何查询 Windows 8 的人脉应用？

> ID：13022362
> 
> 赞同：1
> 
> 时间：2012-10-23T01:30:27.183
> 
> 标签：c#, windows-8, microsoft-metro, flyout

我需要从用户的“人脉”应用程序中提取姓名和电子邮件地址，以便我有一个他们所有联系人的列表，以便在弹出/弹出窗口中显示给他们。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:39:14.070

出于安全原因，您不能直接查询它们。您可以使用联系人选择器来允许用户选择单个或多个联系人。

您可以实例化选择器，然后允许用户选择一个或多个联系人。例如：

```
ContactPicker cp = new ContactPicker();
var contacts =  await cp.PickMultipleContactsAsync();
if (contacts != null && contacts.Count > 0)
{
    MessageDialog md = new MessageDialog(contacts[0].Name);
    md.ShowAsync();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:41:43.867

这是多个联系人的联系人选择器示例，您可以从[此处获取示例应用程序](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)

```
var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
contactPicker.CommitButtonText = "Select";
contacts = await contactPicker.PickMultipleContactsAsync(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:18:59.320

var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker(); contactPicker.CommitButtonText = "选择";

```
 contactPicker.SelectionMode = Windows.ApplicationModel.Contacts.ContactSelectionMode.Fields;
        contactPicker.DesiredFields.Add(Windows.ApplicationModel.Contacts.KnownContactField.Email);
        ContactInformation contact = await contactPicker.PickSingleContactAsync();
        if (contact != null)
        {
            contactName.Visibility = Visibility.Visible;
            contactName.Text = contact.Name;
            EmailValue.Visibility = Visibility.Visible;
            EmailValue.Text = contact.Emails[0].Value.ToString();
        } 
```

# web-services - 将 1000 个 LatLong 条目转换为地图

> ID：13022363
> 
> 赞同：0
> 
> 时间：2012-10-23T01:30:29.703
> 
> 标签：web-services, api

将 1000 个 LatLong 坐标列表可视化到 Web 可访问地图上的选项有哪些？

有哪些免费和/或付费 API 选项？

（如果这个问题在这里不合适，请礼貌地将我指向相关论坛。谢谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:35:09.070

我认为这就是您正在寻找的：

[http://www.google.com/fusiontables/Home/](http://www.google.com/fusiontables/Home/)

# php - PHP 安全性：如何滥用编码？

> ID：13022369
> 
> 赞同：18
> 
> 时间：2012-10-23T01:31:33.527
> 
> 标签：php, security, encoding, utf-8, mbstring

从这个优秀的“ [UTF-8 all way through](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through) ”问题中，我读到了这个：

> 不幸的是，在尝试存储或在任何地方使用它之前，您应该验证每个提交的字符串都是有效的 UTF-8。PHP 的 mb_check_encoding() 可以解决问题，但您必须虔诚地使用它。确实没有办法解决这个问题，**因为恶意客户端** **可以以他们想要的任何编码提交数据**，而且我还没有找到让 PHP 可靠地为您执行此操作的技巧。

现在，我仍在学习编码的怪癖，我想确切地知道恶意客户端可以做什么来滥用编码。一个人能实现什么？有人可以举个例子吗？假设我将用户输入保存到 MySQL 数据库中，或者我通过电子邮件发送，如果我不使用该`mb_check_encoding`功能，用户怎么会造成伤害？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T16:00:57.153

> 如果我不使用 mb_check_encoding 功能，用户如何造成伤害？

这是关于[过长的编码](http://en.wikipedia.org/wiki/UTF-8#Overlong_encodings)。

由于 UTF-8 设计的一个不幸的怪癖，如果使用简单的位打包解码器解析，可能会生成与更短的字节序列相同的字符 - 包括单个 ASCII 字符。

例如，字符`<`通常表示为字节 0x3C，但也可以使用超长的 UTF-8 序列 0xC0 0xBC（或者甚至更多冗余的 3 或 4 字节序列）来表示。

如果您采用此输入并在基于 Unicode 的基于字节的工具中处理它，则可能会避开该工具中使用的任何字符处理步骤。典型的例子是将 0x80 0xBC 提交给 PHP，它具有本机字节字符串。`htmlspecialchars`对字符进行 HTML 编码的典型用法在`<`这里会失败，因为预期的字节序列 0x3C 不存在。因此，脚本的输出仍将包含超长编码`<`，并且任何读取该输出的浏览器都可能读取序列 0x80 0xBC 0x73 0x63 0x72 0x69 0x70 0x74 `<script`，嘿 presto！跨站脚本。

Overlongs 从很久以前就被禁止，现代浏览器不再允许它们。但长期以来，这对 IE 和 Opera 来说都是一个真正的问题，并且不能保证未来每个浏览器都能解决这个问题。当然，这只是一个例子——任何面向字节的工具处理 Unicode 字符串的地方都可能遇到类似的问题。因此，最好的方法是在最早的输入阶段删除所有超长。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:46:21.280

看起来这是一个复杂的攻击。检查文档以`mb_check_encoding`说明“无效编码攻击”。谷歌搜索“无效编码攻击”带来了一些有趣的结果，我将尝试解释。

当这种数据被发送到服务器时，它会执行一些解码来解释发送过来的字符。现在，服务器将进行一些安全检查，以查找某些可能有害的特殊字符的编码版本。

当无效编码被发送到服务器时，服务器仍然运行它的解码算法，它会评估无效编码。这就是问题发生的地方，因为安全检查可能不会寻找在通过解码算法运行时仍会产生有害字符的无效变体。

在 unix 系统上请求完整目录列表的攻击示例：

`http://host/cgi-bin/bad.cgi?foo=..%c0%9v../bin/ls%20-al|`

如果您想对算法中发生的事情进行更详细的技术解释，这里有一些链接：

[http://www.cgisecurity.com/owasp/html/ch11s03.html#id2862815](http://www.cgisecurity.com/owasp/html/ch11s03.html#id2862815)

[http://www.cgisecurity.com/fingerprinting-port-80-attacks-a-look-into-web-server-and-web-application-attack-signatures.html](http://www.cgisecurity.com/fingerprinting-port-80-attacks-a-look-into-web-server-and-web-application-attack-signatures.html)

# security - 如何为使用 SAML 登录的用户最好地加密静态数据？

> ID：13022374
> 
> 赞同：0
> 
> 时间：2012-10-23T01:31:57.607
> 
> 标签：security, web-applications, public-key-encryption, saml-2.0

我有一个 Web 应用程序，它允许用户使用自己的身份提供者进行 SAML 身份验证。我的应用程序中的数据库中有字段，我想确保只有授权用户才能解密（并且系统的开发人员/管理员没有被隐式授权）。对于使用密码登录的用户来说，这很容易 - 制作一个 RSA 密钥对，其中私钥用他们的登录密码加密，并在密码更改时更新钥匙串。但是在没有登录密码的情况下如何做到这一点，因为用户已经通过 SAML 进行了身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:28:03.057

我不想告诉你这个，但我也不认为你的安全选项（派生密钥）那么安全。

现实情况是，管理员可以在这里做非常糟糕的事情......包括：

*   在 f/e 上注入代码并在飞行中窃取密码
*   窃取数据，直接对db做字典攻击，猜测很多可能的key来解锁数据（要知道密码集比较小）

IMO 仅从密码中获取密钥是不够的。如果您想将其视为“最佳实践”，则需要大幅提高标准。理想情况下，您可以使用一种解决方案来解决这两个问题，但如果您使用密码作为来源（或派生密码哈希），那么这可能是不可能的。

# c - 无法在 Windows 中包含 pthread.h

> ID：13022381
> 
> 赞同：0
> 
> 时间：2012-10-23T01:33:08.293
> 
> 标签：c, eclipse, multithreading, posix

> **可能重复：**
> [我可以让 C 的 pthread.h 在 Windows 中编译吗？](https://stackoverflow.com/questions/2150938/can-i-get-cs-pthread-h-to-compile-in-windows)

我在 Windows 7 上使用 Eclipse。我正在 C 中尝试多线程编程。但我无法包含 pthread.h。它说没有这样的文件或目录。它在另一台 Windows 7 机器上工作但似乎无法工作这个。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:36:44.267

pthreads，也称为 POSIX 线程，是符合 POSIX 的操作系统（通常是类 Unix 系统，如 Linux 和 Mac OS X）的工具。Windows 没有它。您将需要安装 Windows 端口的 pthreads。你可以在这里得到它：http: [//sources.redhat.com/pthreads-win32](http://sources.redhat.com/pthreads-win32)

# actionscript-3 - 有没有办法用 Actionscript 在 Flash 中独立循环层？

> ID：13022382
> 
> 赞同：0
> 
> 时间：2012-10-23T01:33:09.977
> 
> 标签：actionscript-3, flash

我是 Actionscript 的新手。可能有更好的方法来做到这一点，如果有的话，我会全神贯注。

我想要做的是让背景层运行，比如循环运行 150 秒。然后有另一个层（我们称之为第 1 层），上面有一个对象，循环 50 秒。有没有办法在背景层循环的 150 秒内让第 1 层循环 3 次？

这就是我希望第 1 层更短的原因：当输入某个组合（例如 A1）时，一个项目会从第 1 层的对象前面弹出。

我还没有为它编写任何代码，但我希望的计划是让背景层连续运行，然后在第 1 层上为从第 1 层上的对象出来的每个项目设置不同的场景部分。这样当 A1 是输入后，Layer1 可以 goToAndPlay(51) 而不弄乱背景层。

如果它可以帮助您完全理解它，那么它就是一个自动售货机项目。我小组的自动售货机是 TARDIS。当你从自动售货机中输入你想要的东西时，TARDIS 正在太空中飞行，而东西却从里面弹出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:51:33.360

如果我理解正确，背景是一个在自己的时间轴内循环的影片剪辑。当 Flash 通过时间线播放时，时间取决于计算机的性能和动画的复杂程度。您可以将音轨设置为“流式传输”以锁定时间，如果 CPU 过载，则会丢帧。我使用静音设置无限循环并播放模式“流媒体”在没有音频可用时执行此操作。

我建议不要使用时间线动画，而是使用 TweenMax [http://www.greensock.com/tweenmax/](http://www.greensock.com/tweenmax/)，因为它允许补间链接，即创建一系列顺序和并行补间。当您使用补间时，您可以以秒为单位定义时间，并且可以使用 1.25 秒等值。它将准确到您定义的时间。您还可以在完成时运行方法，使用缓动和各种好东西。如果您习惯使用它，您将能够在您的 Flash 项目中创建更复杂的交互，并且还能够比弄乱时间线更容易地更改动画和时间。

事实上，在招聘 Flash 开发人员时，我们总是通过询问他们是否喜欢在时间轴上或以编程方式制作动画来筛选候选人。尽管 Flash 即将退出市场，但仍然值得学习，因为这些想法将适用于 javascript 和任何出现的新技术。

# machine-learning - 从哪里可以找到针对非技术人员的所有 AI 算法的简要介绍

> ID：13022384
> 
> 赞同：0
> 
> 时间：2012-10-23T01:33:45.500
> 
> 标签：machine-learning, artificial-intelligence, genetic-algorithm, heuristics

我知道人工智能是一个广阔的领域，并且存在许多算法。我曾尝试从维基百科学习，但我不明白的数学内容太多了。

有没有什么地方可以找到每种算法的 7-8 行简要介绍，并且可以告诉我对于哪种类型的问题我们可以使用哪种算法。

例如，如果我们需要找到一些到某个目的地的最短路线，那么我们可以使用最短路径算法。目前有很多领域，如贝叶斯方法、meakov 链模型、优化算法，我无法得到它们可以解决哪些类型的问题。

我只是想知道他们能做什么，而不是那些总是在我脑海中浮现的硬核数学东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:12:56.863

aaai.org 有一些很好的介绍性文章。 [http://aitopics.net/AIOverview](http://aitopics.net/AIOverview)

机器学习 101：[https ://stackoverflow.com/questions/598726/overwhelmed-by-machine-learning-is-there-an-ml101-book/598772#598772](https://stackoverflow.com/questions/598726/overwhelmed-by-machine-learning-is-there-an-ml101-book/598772#598772)

# python - 如何正确退出python中的程序

> ID：13022385
> 
> 赞同：9
> 
> 时间：2012-10-23T01:33:45.740
> 
> 标签：python, string, python-3.x, quit

我是一名中学生，我开始学习 python 编码。我一直在看视频教程，但如果你输入 q，我似乎无法弄清楚如何让游戏退出。这里我有什么..

```
print('How old do you thing Fred the Chicken is?')
number = 17

Quit = q
run = 17
while run:

guess = int(input('Enter What You Think His Age Is....'))

print('How old do you thing Fred the Chicken is?')
number = 17

Quit = 'q'
run = 17
while run:

guess = int(input('Enter What You Think His Age Is....'))

if guess == number:
    print('Yes :D That is his age...')
    run = False
elif guess < number:
    print('No, Guess a little higher...')
elif guess > number:
    print('No, Guess a little lower....')

print('Game Over')
print('Press Q to Quit')

if run == False:
choice = input('Press Q to Quit')
if choice == 'q'
import sys
exit(0) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T01:39:33.047

## 作为`Q`输入

```
Quit = int(input('Press Q to Quit') 
```

您要求`Q`作为输入，但只接受`int`. 所以取下`int`部分：

```
Quit = input('Press Q to Quit') 
```

现在`Quit`将是用户输入的任何内容，所以让我们检查“Q”而不是`True`：

```
if Quit == "Q": 
```

而不是`sys.exit(0)`，您可能只是结束您的 while 查找，[`break`](http://docs.python.org/reference/simple_stmts.html#the-break-statement)或者仅`return`当您在一个函数中时。

此外，我不建议将只存储用户输入的变量命名为“Quit”，因为它最终会令人困惑。

请记住，缩进在 Python 中很重要，所以它必须是：

```
if run == False:
    choice = input('Press Q to Quit')
    if choice == "Q":
        # break or return or..
        import sys
        sys.exit(0) 
```

不过，这可能只是一个复制/粘贴错误。

## 缩进和语法

我修复了缩进并删除了一些无关的代码（因为您复制了外部循环和一些打印语句）并得到了这个：

```
print('How old do you thing Fred the Chicken is?')
number = 17

run = True
while run:

    guess = int(input('Enter What You Think His Age Is....t'))

    if guess == number:
        print('Yes :D That is his age...')
        run = False
    elif guess < number:
        print('No, Guess a little higher...')
    elif guess > number:
        print('No, Guess a little lower....')

    if run == False:
        print('Game Over')
        choice = input('Press Q to Quit')
        if choice == 'q'
            break 
```

这给了我一个语法错误：

> blong@ubuntu:~$ python3 chicken.py
> File "chicken.py", line 23
> if choice == 'q'
> ^
> SyntaxError: invalid syntax

所以 Python 在`if`声明之后说有问题。如果您查看其他`if`语句，您会注意到`:`最后缺少该语句，因此将其更改为：

```
if choice == 'q': 
```

因此，通过该更改，程序将运行，并且似乎可以执行您想要的操作。

## 一些建议

*   您的指示说“按 Q 退出”，但实际上您只接受“q”退出。您可能想同时接受两者。Python 有一个[称为 的运算符`or`](http://docs.python.org/library/stdtypes.html#boolean-operations-and-or-not)，它接受两个真值 ( `True`or `False`) 并`True`在其中任何一个为时返回`True`（它实际上对除`True`and之外的值所做的更多`False`，如果您有兴趣，请参阅文档）。

    例子：

    ```
    >> True or True
    True
    >>> True or False
    True
    >>> False or True
    True
    >>> False or False
    False 
    ```

    所以我们可以用 求 Q 或 q `if choice == "Q" or choice == "q":`。

    另一种选择是将字符串转换为小写，并且只检查`q`, 使用`if choice.lower() == "q":`. 如果`choice`是 Q，它将首先将其转换为 q（带有`.lower()`），然后进行比较。

*   你的数字总是 17。Python 有一个名为[random.randint()](http://docs.python.org/library/random.html#random.randint)的函数，它会给你一个随机数，这可能会使游戏更有趣。例如，这将使鸡的年龄在 5 到 20 岁（含）之间：

    ```
    number = random.randint(5, 20) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:16:15.507

您可以使用该[`break`](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)语句跳出`while`循环：

```
while True:
    guess = int(input("...")

    # ...rest of your game's logic...

    # Allow breaking out of the loop
    choice = input("Enter Q to quit, or press return to continue")
    if choice.lower() == "q":
        break 
```

这意味着解释器退出`while`循环，继续寻找要运行的更多命令，但到达文件末尾！然后 Python 将自动退出 - 无需调用`sys.exit`

（顺便说一句，您应该很少使用`sys.exit`，它实际上只是用于设置非零[exit-status](http://en.wikipedia.org/wiki/Exit_status)，*而不是*用于控制程序的工作方式，例如从`while`循环中转义）

最后，您发布的代码的主要问题是缩进 - 您需要在每行的开头放置适当数量的空格 - 您有以下内容：

```
if run == False:
choice = input('Press Q to Quit') 
```

它*必须*是这样的：

```
if run == False:
    choice = input('Press Q to Quit') 
```

与 ,`while`等`for`类似`if`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:13:58.417

有很多方法可以退出某些事情。对于循环，它正在使用`break`，而对于您可以使用的函数`return`。但是，对于程序，如果您希望在解释完成（脚本结束）之前退出程序，则有两种不同类型的`exit()`函数。有`sys.exit()`哪个是`sys`模块的一部分，有`exit()`哪个`quit()`是内置的。但是，`sys.exit()`它适用于不在 IDLE 中的程序（python 交互），而内置`exit()`和`quit()`函数适用于 IDLE。

# python - Python：从内存位置提取数据

> ID：13022386
> 
> 赞同：1
> 
> 时间：2012-10-23T01:33:54.103
> 
> 标签：python, memory, memory-address

我最近偶然发现了这个 kickass python 扩展包，[Brian Hears](http://www.briansimulator.org/docs/reference-hears.html#brian.hears.CombinedFilterbank)，它将解决我所有的编码问题。问题是，一些函数返回内存地址而不是预期的结果。例如：

> `>>> Parameterize(source, 256, 128)`
> 
> > `Out[1]: <Parameterize.Parameterize at 0xda445f8>`

我以前从未见过这个（也不知道它的正确名称）；但是，互联网告诉我，它代表了存储结果的内存地址。

我真的只是对*结果*本身感兴趣。人们通常如何从python中的地址中提取实际数据，或者更确切地说是函数应该（或者至少我认为它应该）返回的numpy数组？

提前致谢。

编辑：添加了包的名称和链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:37:26.483

它正在返回一个对象。你应该做

```
 p = Parameterize(source, 256, 128)
 res = p.usefull_attribute 
```

然后从对象属性/属性中获取结果。您可以使用 python 的自文档（`dir(p)`, `help(p)`（如其他答案+评论中指出的那样））让 python 告诉您您的对象具有哪些属性/方法。

它打印出来的是你的对象的默认字符串表示，这是它的类型和位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T02:05:36.700

尽管有可能使用 ctypes 编写的非常薄的 Python 包装器对某些库确实返回了内存指针，但事实并非如此。就像你所拥有的`<Parameterize.Parameterize at 0xda445f8>`那样，表示是 Python 对象的标准字符串表示。

尽管它实际上意味着一个内存地址，但该数字在 Python 中没有用，但可以用作对象的 id。（您可以通过 " " 掌握它`id(object)`）。

要了解如何使用您正在使用的模块，因为您处于交互式提示符下，请使用`help`和`dir`introspection 内置函数来找出`Parameterize`对象上可用的属性和方法：

```
>>> p =Parameterize(source, 256, 128)
>>> p
Out[1]: <Parameterize.Parameterize at 0xda445f8>
>>> dir(p)
>>> help(p) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T01:50:00.693

如果您使用的库是用 C（或 C++）编写的，并且如果函数返回“流行”（int、str 等）类型，您可能会对[ctypes](http://docs.python.org/library/ctypes.html)模块（boost.python、swing）感兴趣，以使用 python 类型包装 C 调用. 然后你可以使用这个库作为 python 的库。当然，您必须使用 ctypes 进行转换（您必须定义类型）。对于复杂的结构，您可能必须像 tcaswell 所说的那样自己完成。

# android - 如何定位视图以使单击在动画后起作用

> ID：13022387
> 
> 赞同：1
> 
> 时间：2012-10-23T01:33:57.430
> 
> 标签：android, android-animation, onclicklistener

我目前正在使用九个旧 Android 来为 RelativeLayout 设置动画，例如滑块菜单，它从顶部向下滑动。我尝试了很多方法，有人可以提出建议吗？

这是动画代码：

```
 private OnClickListener slideClick = new OnClickListener(){
    @Override
    public void onClick(View v) {
        slideGroups.bringToFront();

        if(!mPulledDown) {
            ObjectAnimator oa = ObjectAnimator.ofFloat(slideGroups, "translationY", slideGroups.getHeight()-80);
            oa.addListener(new AnimatorListener() {
                @Override
                public void onAnimationStart(Animator arg0) {}

                @Override
                public void onAnimationRepeat(Animator arg0) {}

                @Override
                public void onAnimationEnd(Animator arg0) {
                    arrow.setImageResource(R.drawable.arrowup);
                    if(Application.getAndroidAPILevel() < 11) {
                        // only if pre 3.0 (api level 11)
                        Toast.makeText(FriendsActivity.this, String.format("api level %s", 
                                Application.getAndroidAPILevel()), Toast.LENGTH_SHORT).show();
                        //RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) slideGroups.getLayoutParams();

                        // clear animation to prevent flicker
                        slideGroups.clearAnimation();

                        // set new "real" position of wrapper
                        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, slideGroups.getWidth());
                        //lp.addRule(RelativeLayout.BELOW, R.id.branchFinderIncludeHeader);
                        slideGroups.setLayoutParams(lp);

                    }
                }

                @Override
                public void onAnimationCancel(Animator arg0) {}
            });
            oa.start();
        }
        else 
        {
            ObjectAnimator oa = ObjectAnimator.ofFloat(slideGroups, "translationY", 0);
            oa.addListener(new AnimatorListener() {
                @Override
                public void onAnimationStart(Animator arg0) {}

                @Override
                public void onAnimationRepeat(Animator arg0) {}

                @Override
                public void onAnimationEnd(Animator arg0) {
                    arrow.setImageResource(R.drawable.arrowdown);
                    if(Application.getAndroidAPILevel() < 11) {
                        // only if pre 3.0 (api level 11)
                        Toast.makeText(FriendsActivity.this, String.format("api level %s", 
                                Application.getAndroidAPILevel()), Toast.LENGTH_SHORT).show();
                    }
                }

                @Override
                public void onAnimationCancel(Animator arg0) {}
            });
            oa.start();
        }

        mPulledDown = !mPulledDown;         
    }
}; 
```

我只需要一些可以与 sdk 4 级及更高版本一起工作的东西。目前，触摸/点击会在展开时将该事件传递到滑块下方的列表。如果需要任何其他信息，请告诉我。slideGroups 是相对布局。箭头是一个图像视图。groupsButton 是一个带有文本和图像按钮的 LinearLayout。groupsButton 应该是可点击的；这就是扩展并且应该折叠它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:53:41.687

一些人通过用解决方案编辑我的问题做出了贡献。我想对他们表示赞赏，但不能对编辑进行投票。对于后代，这是适合我的解决方案。

```
int originalMarginLeft = 0;
int originalMarginTop = 0;
int originalMarginRight = 0;
int originalMarginBottom = 0;
int originalLeft = 0;
int originalTop = 0;
int originalRight = 0;
int originalBottom = 0;
int originalX = 0;
int originalY = 0;
int originalHeight = 0;

private OnClickListener slideClick = new OnClickListener(){
    @Override
    public void onClick(View v) {
        slideGroups.bringToFront();

        if(originalMarginLeft == 0) {
            RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) slideGroups.getLayoutParams();
            originalMarginLeft = params.leftMargin;
            originalMarginTop = params.topMargin;
            originalMarginRight = params.rightMargin;
            originalMarginBottom = params.bottomMargin;
            originalLeft = slideGroups.getLeft();
            originalTop = slideGroups.getTop();
            originalRight = slideGroups.getRight();
            originalBottom = slideGroups.getBottom();
            originalHeight = params.height;
        }

        if(!mPulledDown) {
            ObjectAnimator oa = ObjectAnimator.ofFloat(slideGroups, "translationY", originalHeight);
            oa.addListener(new AnimatorListener() {
                @Override
                public void onAnimationStart(Animator arg0) {}

                @Override
                public void onAnimationRepeat(Animator arg0) {}

                @Override
                public void onAnimationEnd(Animator arg0) {
                    arrow.setImageResource(R.drawable.arrowup);
                    if(Application.getAndroidAPILevel() < 11) {

                        slideGroups.clearAnimation();
                        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(slideGroups.getWidth(), slideGroups.getHeight());
                        lp.leftMargin = originalMarginLeft;
                        lp.rightMargin = originalMarginRight;
                        slideGroups.setLayoutParams(lp);

                    }
                }

                @Override
                public void onAnimationCancel(Animator arg0) {}
            });
            oa.start();
        }
        else 
        {
            ObjectAnimator oa = ObjectAnimator.ofFloat(slideGroups, "translationY", -originalHeight+60);
            oa.addListener(new AnimatorListener() {
                @Override
                public void onAnimationStart(Animator arg0) {}

                @Override
                public void onAnimationRepeat(Animator arg0) {}

                @Override
                public void onAnimationEnd(Animator arg0) {
                    arrow.setImageResource(R.drawable.arrowdown);
                    if(Application.getAndroidAPILevel() < 11) {

                        slideGroups.clearAnimation();
                        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(slideGroups.getWidth(), slideGroups.getHeight());
                        lp.leftMargin = originalMarginLeft;
                        lp.rightMargin = originalMarginRight;
                        lp.topMargin = originalMarginTop;
                        lp.bottomMargin = originalMarginBottom;
                        slideGroups.setLayoutParams(lp);
                    }
                }

                @Override
                public void onAnimationCancel(Animator arg0) {}
            });
            oa.start();
        }

        mPulledDown = !mPulledDown;         
    }
}; 
```

# c# - 为通过 C# 呈现的报告服务报告设置语言/文化

> ID：13022388
> 
> 赞同：2
> 
> 时间：2012-10-23T01:34:04.840
> 
> 标签：c#, reporting-services

我用 C# 编写了一个报告渲染器，它运行并将报告附加到电子邮件中。这一切都很好，除了在报告标题中列出的参数的日期格式不正确。所有报告的语言都设置为`=User!Language`，并且使用 FormatDateTime 函数输出参数，以根据用户的区域设置进行格式化。

我基本上使用的是[MSDN 上描述](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)的渲染方法。

当报告通过浏览器运行时，这一切都很好。但是，当我从 C# 呈现报告时，它使用`en-US`日期格式。

报表服务器的区域设置已正确设置为正确的区域，运行 C# 程序的计算机的区域设置也是如此。

我需要在我的 C# 程序中设置什么属性才能使用我的适当语言/文化呈现报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:49:57.240

[这是一个类似的问题](https://stackoverflow.com/questions/8309464/british-date-format-on-reporting-server-turns-to-us-format-on-client-side-via-ms)

但是，在这种情况下，您要做的是覆盖 ReportExecutionService 上的 GetWebRequest 方法，而不是像该答案中那样的 ReportingService：

```
public partial class ReportExecution : ReportExecutionService
{
    protected override WebRequest GetWebRequest(Uri uri) 
    { 
        WebRequest request = base.GetWebRequest(uri); 
        request.Headers.Add(HttpRequestHeader.AcceptLanguage, CultureInfo.CurrentCulture.Name); 
        return request; 
    }  
} 
```

# mysql - 使用条件请求连接 2 或 3 个 MySQL 表

> ID：13022391
> 
> 赞同：1
> 
> 时间：2012-10-23T01:34:27.733
> 
> 标签：mysql

我有 3 张桌子：

追踪：

```
id, title, artist_id, album_id, description, cover 
```

艺术家：

```
id, name, bio 
```

专辑：

```
id, title, description, artist_id, cover 
```

我实际上有这个要求：

```
SELECT * FROM `track`
LEFT JOIN album ON track.album_id=album.id
LEFT JOIN artist ON album.artist_id=artist.id 
```

但是，如果曲目没有专辑，我怎么能`track.album_id = 0`加入那个条件来获得艺术家信息？`LEFT JOIN artist ON track.artist_id=artist.id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:49:16.170

如果我理解正确，如果曲目没有专辑，您希望显示艺术家信息。您可以`CASE`在您的`SELECT`报表中使用 a 来填写信息或`SELECT`其他一些信息。

```
SELECT col1, col2, ..., CASE
    WHEN track.album_id IS NULL # or = 0
        THEN 'Artist Info'
    ELSE track.album_id
    AS coln
FROM track
... 
```

此外，始终使用列列表

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T01:49:08.323

我可能会尝试

```
SELECT * FROM
(SELECT * FROM `track`
LEFT JOIN album ON track.album_id=album.id
LEFT JOIN artist ON album.artist_id=artist.id) WHERE album.id IS NULL 
```

但是，我不明白您为什么使用 0 in`track.album_id`表示没有专辑。这告诉我你没有使用外键约束，因为如果你使用了，约束将在`track.album_id`= 0 处失败。我建议运行这个：

```
UPDATE track SET album_id = NULL where album_id = 0;
ALTER TABLE track ADD FOREIGN KEY album_id REFERENCES album (id); 
```

# python - 使用自定义函数而不是减法计算 numpy 数组的差异

> ID：13022392
> 
> 赞同：1
> 
> 时间：2012-10-23T01:34:30.193
> 
> 标签：python, numpy, multidimensional-array, pandas, vectorization

我正在使用从描述 GPS 轨迹的地理坐标列表创建的数组。数据是这样的：

```
[[-51.203018 -29.996149]
 [-51.203018 -29.99625 ]
 [-51.20266  -29.996229]
 ..., 
 [-51.64315  -29.717896]
 [-51.643112 -29.717737]
 [-51.642937 -29.717709]] 
```

我想计算行之间的地理距离（在起点处第一个元素始终为零的特殊条件）。这会给我一个距离列表`len(distances) == coord_array.shape[1]`，或者可能是同一数组中的第三列。

需要注意的是，我已经有一个函数可以返回两点之间的距离（两个坐标对），但我不知道如何将它应用于单个数组操作，而不是循环遍历行对。

目前我正在执行以下操作来计算一个新列中的段距离，以及另一个新列中的累积距离（`latlonarray`上面已经显示并且`distance(p1, p2)`已经定义）：

```
 dists = [0.0]
    for n in xrange(len(lonlat)-1):
        dists.append(distance(lonlat[n+1], lonlat[n]))

    lonlatarray = numpy.array(lonlat).reshape((-1,2))
    distsarray = numpy.array(dists).reshape((-1,1))
    cumdistsarray = numpy.cumsum(distsarray).reshape((-1,1))

    print numpy.hstack((lonlatarray, distsarray, cumdistsarray))

[[   -51.203018      -29.996149        0\.              0\.        ]
 [   -51.203018      -29.99625         7.04461338      7.04461338]
 [   -51.20266       -29.996229       39.87928578     46.92389917]
 ..., 
 [   -51.64315       -29.717896       11.11669769  92529.72742791]
 [   -51.643112      -29.717737       11.77016407  92541.49759198]
 [   -51.642937      -29.717709       19.57670066  92561.07429263]] 
```

我的主要问题是：“我怎样才能像数组操作而不是循环一样执行距离函数（它以一对行作为参数）？” （也就是说，我怎样才能正确地对其进行矢量化）

其他主题性问题是：

*   如果我决定使用 Pandas，是否有一些巧妙的技巧可以做到这一点？
*   有没有办法`scipy.spatial.distance`使用地理距离（haversine，大圆距离）“为我工作”？

另外，如果我做任何不必要的复杂事情，我会很感激一些提示。

非常感谢大家的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:47:22.617

听起来您需要将原始数据`lonlat`表示为一对 numpy 数组，然后将这些数组传递给`distance`接受数组的函数版本。

例如，查找[hasrsine distance](http://en.wikipedia.org/wiki/Haversine_formula)的定义，您可以很容易地将其转换为矢量化公式，如下所示：

```
def haversine_pairwise(phi, lam):

    dphi = phi[1:]-phi[:-1]
    dlam = lam[1:]-lam[:-1]

    # r is assumed to be a known constant
    return r*(0.5*(1-cos(dphi)) + cos(phi[1:])*cos(phi[:-1])*0.5*(1-cos(dlam))) 
```

我自己并不熟悉这些公式，但希望这能告诉你如何为你想要的任何公式做到这一点。然后你会`cumsum`像你已经做的那样使用。我使用的数组切片语法记录[在这里](http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c)，以防不清楚。

# php - Symfony2 - 删除 AcmeBundle 演示会导致安全提供程序错误

> ID：13022393
> 
> 赞同：11
> 
> 时间：2012-10-23T01:34:39.853
> 
> 标签：php, symfony

我已经下载并安装了 Symfony2 标准版。我已经完成了[github 自述](https://github.com/symfony/symfony-standard/blob/master/README.md)文件中详述的所有步骤，以删除用作框架演示的 AcmeBundle。尝试访问控制台以仔细检查我的路线时：

```
$ php app/console router:debug 
```

我收到以下错误：

```
[Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]  
The child node "providers" at path "security" must be configured. 
```

当我在我的`security.yml`文件中取消删除 security.providers 时，我只剩下：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    user: { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

我得到一个不同但类似的错误：

```
[InvalidArgumentException]                          
You must at least add one authentication provider. 
```

我不知道该怎么做才能修复它。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T02:33:41.537

你需要提供，像这样的配置：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            security: false

        secured_area:
            anonymous: ~

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-26T18:04:52.320

对我来说，我可以获得的最小文件无一例外是：

```
security:
    firewalls:
        anonymous:
            anonymous: ~

    providers:
        in_memory:
            memory: 
```

[Symfony 2.3.3。]

# .net - % RT 检查时间

> ID：13022394
> 
> 赞同：7
> 
> 时间：2012-10-23T01:35:04.703
> 
> 标签：.net, clr, performancecounter

在 .NET Web 应用程序的负载测试期间监视性能计数器时，一个称为“RT 检查中的百分比时间”的计数器不断超过默认的临界阈值 10。

为什么花费大量时间进行运行时检查是不好的？
这对我们的应用程序有什么影响？这应该如何改进？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T12:16:48.180

此阈值不一定表示性能不佳（取决于您还在做什么，10% 的处理时间可能不会太多！）。

还有另一个相关的计数器“总运行时检查”。此计数器显示运行时检查的实际计数（[在此处](http://msdn.microsoft.com/en-us/library/adcbwb64(v=vs.110).aspx)记录）。如果该计数器中的值较低，则可能是您没有问题。如果它很高（或在您的应用程序中的某些点迅速增加），那么您可能有一个值得调查的问题。

这些“运行时检查”是当您的代码向运行时请求特定 CAS 权限时进行的代码访问安全检查。如果您的代码很复杂或在有限的信任下运行，您可能会发现您正在发出许多请求，并且您可能会重组您的代码以优化这些请求。但是，在深入研究之前，我一定会确定这是一个问题，因为它并不总是一个简单的优化。

# c# - 启用应用程序栏时键盘和文本框之间的奇怪间隙

> ID：13022400
> 
> 赞同：4
> 
> 时间：2012-10-23T01:36:32.787
> 
> 标签：c#, silverlight, windows-phone-7

我有一个底部带有文本框的页面，点击它并显示键盘。一切都很好，直到我将应用程序栏添加到页面：键盘和文本框之间的恼人间隙突然出现。有人能告诉我如何摆脱它吗？非常感谢。

![截图对比](../Images/791d29d4258305122ff02c578ecfa8d0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:52:31.040

当文本框获得焦点时，尝试设置 rootframe 变换。

```
var rootFrame = Application.Current.RootVisual as PhoneApplicationFrame;
rootFrame.RenderTransform = new CompositeTransform() { TranslateY = -409}; 
```

并在文本框失去焦点时重置 renderTransform。

TranslateY 的值是键盘的高度。

好像是系统bug。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T19:59:34.010

或者，您也可以设置 appBar.IsVisible = false; 在这样的情况下...

# vbscript - 仅在前一个命令完成时启动命令

> ID：13022404
> 
> 赞同：0
> 
> 时间：2012-10-23T01:36:58.387
> 
> 标签：vbscript

我正在尝试将两个（第 3 方）脚本放在一起，因为我必须更改某些媒体文件的扩展名，但我想在继续重命名**之前**终止播放器的（最终）进程（以防某些文件在利用）。

我注意到执行下面的脚本会产生“权限被拒绝”错误，并且某些文件没有被重命名。

我需要一些帮助来更正 oder 中的脚本，以使重命名命令**仅**在进程实际终止后才启动。

在此示例中，我试图在（无扩展名）和 flv 之间切换所有扩展名。

```
Const strComputer = "." 
  Dim objWMIService, colProcessList
  Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colProcessList = objWMIService.ExecQuery("SELECT * FROM Win32_Process WHERE Name = 'KM Player.exe'")
  For Each objProcess in colProcessList 
    objProcess.Terminate() 
  Next
myFolder = "C:\Some Path\My Media Folder"

Set fso = CreateObject("Scripting.FileSystemObject")

For Each f In fso.GetFolder(myFolder).Files
  If LCase(fso.GetExtensionName(f.Name)) = "" Then
    f.Name = fso.GetBaseName(f.Name) & ".flv"
  ElseIf LCase(fso.GetExtensionName(f.Name)) = "flv" Then
f.Name = fso.GetBaseName(f.Name) & "."
  End If
Next 
```

# java - String.split 未按预期运行

> ID：13022410
> 
> 赞同：1
> 
> 时间：2012-10-23T01:37:17.400
> 
> 标签：java, string, split, token

所以我试图分割一个字符串

```
String[] tokens = coded_string.split("\\)|\\(|\\,|\\s+"); 
```

所以如果编码字符串是`students = load(classlist.csv)` 所有标记都很好

```
token[0] = "students"
token[1] = "="
token[2] = "load"
token[3] = "classlist.csv" 
```

但是当`students = load ( classlist.csv )`括号之间的字符串空格我得到空标记时，为什么会这样，我该如何解决？

```
token[0] = "students"
token[1] = "="
token[2] = "load"
token[3] = "" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:47:55.850

因为您连续有两个分隔符，一个空格后跟一个开放的括号，所以它将它们之间的“无”作为空字符串返回一个匹配项。您可以使用字符类而不是交替来匹配整个潜在分隔符块。您还没有说明您的实际要求，因此很难知道这是否对所有输入都严格正确。

```
String[] tokens = coded_string.split("[)(,\\s]+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:50:59.150

`coded_string.split("(\\)|\\(|\\s+)+")`会正常工作

# asp.net-mvc-3 - SignalR .Net 客户端无法连接（更新：如何设置 auth.cookie？）

> ID：13022415
> 
> 赞同：1
> 
> 时间：2012-10-23T01:37:29.643
> 
> 标签：asp.net-mvc-3, .net-4.0, signalr, signalr-hub, signalr.client

这件事让我抓狂。

我有一个 .net 4.0 控制台应用程序和一个 MVC Web 应用程序。

javascript 客户端可以连接并与服务器对话 - 这里没有问题...

但我的 .net 客户端抛出 System.AggregateException with InnerException = "解析值时遇到意外字符：<.Path...

所以我创建了一个空的 MVC3 应用程序，添加了 SignalR 库，.net 客户端令人惊讶地连接到它。但由于某种原因，它对另一个没有。我已经检查了所有内容，两个 MVC3 应用程序，都使用相同的 SignalR 库，相同的 NewtonsoftJson ......我认为它一定与路由有关，我猜不是 - js 客户端工作。

```
var connection = new HubConnection("http://localhost:58746");
var hubProxy = connection.CreateProxy("myProxy");
connection.Start().Wait() // it fails here on Wait 
```

会是什么呢？

**UPD：我想...这是因为服务器上的 FormsAuthentication。现在有什么方法可以将 .ASPXAUTH cookie 提供给 SignalR，以便它可以连接到服务器？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:48:07.660

好的...愚蠢的我... SignalR 无法连接，因为它无法破坏服务器的表单身份验证。所以需要做的是获取身份验证cookie并将其粘贴到`HubConnection.CookieContainer`...

所以我写了这个方法方法来使用用户名登录并获取cookie：

```
private Cookie GetAuthCookie(string user, string pass)
{
    var http = WebRequest.Create(_baseUrl+"Users/Login") as HttpWebRequest;
    http.AllowAutoRedirect = false;
    http.Method = "POST";
    http.ContentType = "application/x-www-form-urlencoded";
    http.CookieContainer = new CookieContainer();
    var postData = "UserName=" + user + "&Password=" + pass + "&RememberMe=true&RememberMe=false&ReturnUrl=www.google.com";
    byte[] dataBytes = System.Text.Encoding.UTF8.GetBytes(postData);
    http.ContentLength = dataBytes.Length;
    using (var postStream = http.GetRequestStream())
    {
        postStream.Write(dataBytes, 0, dataBytes.Length);
    }
    var httpResponse = http.GetResponse() as HttpWebResponse;
    var cookie = httpResponse.Cookies[FormsAuthentication.FormsCookieName];
    httpResponse.Close();
    return cookie;
} 
```

并像这样使用它：

```
var connection = new HubConnection(_baseUrl)
                {
                    CookieContainer = new CookieContainer()
                };
                connection.CookieContainer.Add(GetAuthCookie(_user, _pass)); 
```

完美运行！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:49:54.123

Agzam 的解决方案非常有用，但如果其他人使用发布的代码，则在退出 GetAuthCookie 之前关闭 HttpWebResponse 至关重要。如果您不这样做，您会发现每当您使用 SignalR 调用服务器上的方法时，请求（在大多数情况下）将在客户端无限期地排队，既不会成功也不会失败。

Note. The original code worked in the test environment when everything was on my PC, but failed consistently when the website was hosted on a remote server.

here is the modified code I ended up using

```
private Cookie GetAuthCookie(string user, string pass)
{
    var http = WebRequest.Create(_baseUrl+"Users/Login") as HttpWebRequest;
    http.AllowAutoRedirect = false;
    http.Method = "POST";
    http.ContentType = "application/x-www-form-urlencoded";
    http.CookieContainer = new CookieContainer();
    var postData = "UserName=" + user + "&Password=" + pass + "&RememberMe=true&RememberMe=false&ReturnUrl=www.google.com";
    byte[] dataBytes = System.Text.Encoding.UTF8.GetBytes(postData);
    http.ContentLength = dataBytes.Length;
    using (var postStream = http.GetRequestStream())
    {
        postStream.Write(dataBytes, 0, dataBytes.Length);
    }
    var httpResponse = http.GetResponse() as HttpWebResponse;
    var cookie = httpResponse.Cookies[FormsAuthentication.FormsCookieName];
    httpResponse.Close();
    return cookie;
} 
```

its a very minor change , but it will save you a lot of debugging time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T08:08:37.203

Just use this for reading cookies:

```
var cookie = response.Cookies[".AspNet.ApplicationCookie"]; 
```

# perl - 优化重复检测

> ID：13022416
> 
> 赞同：0
> 
> 时间：2012-10-23T01:37:35.853
> 
> 标签：perl, bash, optimization, big-o, code-duplication

# 背景

这是一个优化问题。Oracle Forms XML 文件具有以下元素：

```
<Trigger TriggerName="name" TriggerText="SELECT * FROM DUAL" ... /> 
```

其中`TriggerText`是任意 SQL 代码。每个 SQL 语句都被提取到唯一命名的文件中，例如：

```
sql/module=DIAL_ACCESS+trigger=KEY-LISTVAL+filename=d_access.fmb.sql     
sql/module=REP_PAT_SEEN+trigger=KEY-LISTVAL+filename=rep_pat_seen.fmb.sql 
```

我编写了一个脚本来使用蛮力方法生成一个完全重复的列表。

# 问题

有 37,497 个文件可供相互比较；将一个文件与所有其他文件进行比较需要 8 分钟。从逻辑上讲，如果`A = B`和`A = C`，则不需要检查 if `B = C`。所以问题是：如何消除冗余比较？

该脚本将在大约 208 天内完成。

# 脚本源代码

比较脚本如下：

```
#!/bin/bash

echo Loading directory ...

for i in $(find sql/ -type f -name \*.sql); do
        echo Comparing $i ...

        for j in $(find sql/ -type f -name \*.sql); do
                if [ "$i" = "$j" ]; then
                        continue;
                fi

                # Case insensitive compare, ignore spaces
                diff -IEbwBaq $i $j > /dev/null

                # 0 = no difference (i.e., duplicate code)
                if [ $? = 0 ]; then
                        echo $i :: $j >> clones.txt
                fi
        done
done 
```

# 问题

您将如何优化脚本以便检查克隆代码的速度提高几个数量级？

## 想法#1

将匹配的文件删除到另一个目录中，这样就不需要检查两次。

# 系统约束

使用带有 SSD 的四核 CPU；尽可能避免使用云服务。该系统是安装了 Cygwin 的基于 Windows 的机器——欢迎使用其他语言的算法或解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:17:45.110

您的解决方案和 sputnick 的解决方案都需要 O(n^2) 时间。这可以通过对文件进行排序并使用列表合并在 O(nlog n) 时间内完成。它可以通过比较文件的 MD5（或任何其他加密强的哈希函数）而不是文件本身来进一步加快速度。

假设您在`sql`目录中：

```
md5sum * | sort > ../md5sums
perl -lane 'print if $F[0] eq $lastMd5; $last = $_; $lastMd5 = $F[0]' < ../md5sums 
```

使用上面的代码将只报告精确的逐字节重复。如果您想考虑两个不相同的文件在此比较中是等效的（例如，如果您不关心大小写），请首先创建每个文件的规范化副本（例如，通过将每个字符转换为小写`tr A-Z a-z < infile > outfile`） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:22:33.067

最好的方法是散列每个文件，比如 SHA-1，然后使用一个集合。我不确定 bash 可以做到这一点，但 python 可以。虽然如果你想要最好的性能 C++ 是要走的路。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T01:47:44.700

要优化文件比较：

```
#!/bin/bash

for i; do
    for j; do
        [[ "$i" != "$j" ]] &&
            if diff -IEbwBaq "$i" "$j" > /dev/null; then
                echo "$i & $j are the same"
            else
                echo "$i & $j are different"
            fi
    done
done 
```

**用法**

```
./script /dir/* 
```

# git - 我应该在 node_modules 中克隆一个节点库来修改它吗？

> ID：13022417
> 
> 赞同：3
> 
> 时间：2012-10-23T01:37:36.593
> 
> 标签：git, node.js, clone, require, npm

我正在使用[Poet](https://github.com/jsantell/poet)作为博客/静态站点生成器引擎，它很棒。

它目前是我的 packages.json 中列出的一个依赖项，所以我在我的 express 应用程序中简单地`npm install`使用它。`require`

但是，我想更改库中的一个行为（特别是构建“post.preview”的方式，现在只需获取第一行，我希望也许能够配置多行每个帖子）。

为此，我正在考虑克隆 repo 并进行更改。

但我想知道我是否应该：

*   将它直接克隆到我的 blog/node_modules/poet 并`require`像往常一样，或者，
*   将其克隆到不同的文件夹并`require`从不同的路径。

请记住，我想尽快发布到 Heroku 或 Nodejitsu。

你对此有何看法？

**更新**：在我的 git repo 下，我有一个带有克隆库的 git repo 的问题。它以某种方式将整个文件夹添加为文件。我立即从 lib 文件夹中删除了“.git”，一切都恢复了正常......我不知道这种行为的原因！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:59:15.687

我不知道这方面是否有任何指导方针，但我个人会派生出诗人并进行更改，并将其作为应用程序的外部存储库添加到与 node_modules 不同的目录中。我只是想让 node_modules 由 npm 管理。

我的目标是能够使用 git pull + npm install 进行部署，同时能够轻松地继续合并来自诗人主线的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:03:52.830

恕我直言，一个好的做法是克隆这个存储库并将其保存到文件夹`/lib`中。一旦你觉得你已经完成了你的更改，将它们推送到你的版本中，并在`package.json`文件中正确引用你的副本。

现在，如果您认为您的更改可以引入到模块中，请提出拉取请求。

我的两分钱。

# c# - 如何使用 c# 在 asp.net 中进行文本框单击事件

> ID：13022421
> 
> 赞同：0
> 
> 时间：2012-10-23T01:38:29.283
> 
> 标签：c#, javascript, asp.net, .net

```
 if (Request["__EVENTARGUMENT"] != null && Request["__EVENTARGUMENT"] == "txt2OnClick")
        {
            txt2_Click();
        }  

 txt2.Attributes.Add("onclick", this.Page.ClientScript.GetPostBackEventReference(txt2, "txt2OnClick")); //within page load 

private void txt2_Click()
    {
        ImageMap1.ImageUrl = "guide/2.jpg";
    } 
```

这是一段完美的代码，可以在文本框上使用 asp.net (C#) 进行单击事件。但唯一的问题是，当我们将此代码应用于文本框时，我们无法输入。所以我所做的是设置焦点`txt2.Focus();`然后我可以输入，但是文本框**没有得到验证**（我添加了一个正则表达式验证器）。**有什么帮助吗？**甚至有比这更好的文本框 onClick 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:21:38.343

我认为文本框的单击事件没有任何意义。如果不需要，请删除您的“完美代码”和txt2。如果您添加`regular expression validator`正确，它将负责验证..

**编辑：**
要更改某些文本或显示某些图像，您无需回发到服务器..

您可以使用 javascript Focus 事件或 jquery 来做到这一点..

在您提供的链接中，所有这些照片和文本都放在`div`s 上并且已经加载到浏览器上，当文本框获得焦点时，这些 div 样式只是在`none`和`block`..

像这样的东西（[jsFiddle](http://jsfiddle.net/saNBV/)）..

# objective-c - 为什么我无法访问自动合成的 ivar？

> ID：13022422
> 
> 赞同：0
> 
> 时间：2012-10-23T01:38:46.390
> 
> 标签：objective-c, instance-variables, synthesize, declared-property

我一直在阅读最新版本的 Xcode，你甚至不需要使用 synthesize 来生成 ivar、getter 和 setter，Xcode 本身会为你处理这个并为你创建类似 _youIvarName 的东西，但是在尝试了这个之后我无法完成这项工作。

即使我声明了我的属性，当我尝试访问这些 _yourVarName Xcode 时也会说这样的变量不存在。

例子

头文件：

```
@interface ComplexNumber : NSObject
@property  double realPart;
@property  double imaginaryPart; 
```

执行：

```
#import "ComplexNumber.h"

@implementation ComplexNumber

-(double)modulus
{
    return sqrt(_realPart*_realPart + _imaginaryPart*_imaginaryPart);
}

-(void)setRadius:(double)aRadius phase:(double)aPhase
{
    [self setRealPart] = aRadius * cos(aPhase);
    self.imaginaryPart = aRadius * sin(aPhase);
}

-(void)print
{
    NSLog(@"%g + %gi", realPart, imaginaryPart);
} 
```

这些尝试访问那些 _yourIvar 都没有工作......关于我在这里没有掌握的任何线索？

编辑：

我的主要问题是，如果我声明一个`@property`Xcode 是否会自动生成 getter、setter 和实例变量（带有前导下划线，_myVar）而无需使用`@synthesize`？这是我在 stackoverflow 上读到的，我不确定它是否真的有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:06:22.237

几乎所有东西看起来都应该工作。无效的目标-C 的一行是

```
[self setRealPart] = aRadius * cos(aPhase); 
```

而应该是

```
[self setRealPart:aRadius * cos(aPhase)]; 
```

那可能是您看到的错误吗？

# c# - 将空格附加到 stringbuilder 左对齐

> ID：13022425
> 
> 赞同：1
> 
> 时间：2012-10-23T01:39:30.547
> 
> 标签：c#, .net, stringbuilder

我正在使用以下内容附加 WhiteSpaces：

```
sb.AppendFormat("{0,15}", "TEST"); 
```

但这是正确的。

如何使这个左对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:50:53.400

你可以使用：

```
sb.AppendFormat("{0,-15}", "TEST"); 
```

请参阅：[StringBuilder.AppendFormat](http://msdn.microsoft.com/en-us/library/cazfhf32%28v=vs.80%29.aspx)

# google-maps - 将 GPS 坐标映射到图像

> ID：13022432
> 
> 赞同：1
> 
> 时间：2012-10-23T01:40:49.140
> 
> 标签：google-maps, gps

我试图将一些 GPS 坐标（经度/纬度对）映射到它们对应的世界区域的图像上。数学并不复杂，只是简单地抵消然后用乘数转换数字。然而，这对澳大利亚的积分很有效，但对于新西兰的积分却不行。

结果是这些点似乎在图像中间附近向南漂移，然后在底部之前慢慢纠正。

在地图上绘制点是否需要考虑一些额外的数学？

笔记：

在我的诊断练习中，我将地图放在谷歌地图上，并注意到我的澳大利亚版本与谷歌地图不同，但新西兰与谷歌地图相同。但对澳大利亚的策划行之有效，但对新西兰却行不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:13:05.857

经度/纬度是球坐标系，只有在你有一个地球来显示你的地图时才有效。在您的情况下，您有一张平面地图，需要将坐标投影到平面上。Google 使用的地图是使用类似[墨卡托](http://en.wikipedia.org/wiki/Mercator_projection)的投影创建的。

您要使用哪种投影取决于您的地图包含多大的区域。大多数国家都有自己的最适合其目的的预测。

如果您不是数学家，那么手动计算这些转换非常棘手，但是有很好的转换库，例如[Dotspatial](https://github.com/DotSpatial/DotSpatial)和[GDal](http://www.gdal.org/)。

# mysql - NLog mySQL 数据库作为目标配置

> ID：13022435
> 
> 赞同：2
> 
> 时间：2012-10-23T01:41:03.847
> 
> 标签：mysql, nlog

我使用 Nlog 和 MYsql 作为目标数据库。

我的配置如下：

```
 <target name="databaselog" type="Database" keepConnection="true" 
       useTransactions="false"
       dbProvider="MySql.Data.MySqlClient"
       connectionString="Server=localhost;Database=****;User ID=****;Password=****;Connect Timeout=5;"
       commandText=" insert into logs(time_stamp,logger,message,log_level) Values(@TIME_STAMP,@LOGGER,@MESSAGE,@LOGLEVEL)">
  <parameter name="@TIME_STAMP" layout="${longdate}"/>
  <parameter name="@LOGGER" layout="${logger}"/>
  <parameter name="@MESSAGE" layout="${message}"/>
  <parameter name="@LOGLEVEL" layout="${level:uppercase=true}"/>
</target> 
```

.

仍然无法在 MYSql DB 中插入信息或任何级别的消息。

谁能帮帮我？

再见，我也尝试了命令文本

```
insert into logs(time_stamp,logger,message,log_level) Values(?,?,?,?) 
```

但无法在 mysql db 中插入数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:25:57.297

来自 NLog[文档](https://github.com/nlog/nlog/wiki/Configuration-file "配置文件·NLog/NLog Wiki")：

> NLog 旨在吞下日志记录可能导致的运行时异常。以下设置可以更改此行为和/或重定向这些消息。
> 
> *   <nlog throwExceptions="true" /> - 在配置文件中添加 throwExceptions 属性会导致 NLog 停止屏蔽异常并将它们传递给调用应用程序。此属性在部署时非常有用，可以快速定位任何问题。建议在应用程序正确配置为运行后立即将 throwExceptions 设置为“false”，这样任何意外的日志记录问题都不会导致应用程序崩溃。
> *   <nlog internalLogFile="file.txt" /> - 添加 internalLogFile 会导致 NLog 将其内部调试消息写入指定文件。这包括在记录期间可能引发的任何异常。
> *   <nlog internalLogLevel="Trace|Debug|Info|Warn|Error|Fatal" /> – 确定内部日志级别。级别越高，内部日志输出的详细程度越低。
> *   <nlog internalLogToConsole="false|true" /> – 确定是否将内部日志消息发送到控制台。
> *   <nlog internalLogToConsoleError="false|true" /> – 确定是否将内部日志消息发送到控制台错误输出 (stderr)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T11:48:53.537

右键单击 NLog 配置文件。将属性“复制到输出目录”的值设置为“始终复制”

# php - 如何通过 AWS SDK for PHP 修改运输订单状态？

> ID：13022436
> 
> 赞同：0
> 
> 时间：2012-10-23T01:41:11.367
> 
> 标签：php, amazon-web-services, amazon, shipping, amazon-marketplace

我正在尝试学习 Amazon Web Service 平台，但我无法通过适用于 PHP 的 AWS 开发工具包修改运输订单状态。任何人都可以给我点修改它们吗？通常我会制作一个平面文件，将它们上传到亚马逊，然后让它们得到亚马逊的批准。将来我想自动化这种方法，当我点击一个链接时，它会自动创建包含所有需要信息的提要（如果我没记错的话，是关于发货日期、承运人代码、跟踪号和发货方式...如果我错了，请纠正我。我以前从未使用过 AWS）并让亚马逊将通知发送给买家...

有人可以指出正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:38:56.560

“AWS”或“Amazon Web Services”是指亚马逊的云计算基础设施服务。这是适用于 PHP 的 AWS 开发工具包所支持的。

与通过 Amazon.com 购买产品或销售产品相关的服务分别属于“Amazon Associates”和“Amazon Marketplace”的一部分。由于这些都与云基础设施（即 AWS）无关，因此适用于 PHP 的 AWS 开发工具包不适用于它们。

# javascript - 压缩成字符串的Javascript压缩算法？

> ID：13022437
> 
> 赞同：1
> 
> 时间：2012-10-23T01:41:14.533
> 
> 标签：javascript, compression

您好，我是一名初学编码的高中生，我正在从事一个科学展览项目。对于我的项目，我需要使用压缩算法，由于我缺乏知识，我仅限于 javascript。我在 jslzjb 中找到了一种压缩算法，但是当我需要字符串中的消息时，该算法会将消息压缩为字节数组。

有没有办法使用javascript将消息压缩成字符串，顺便说一下我需要压缩算法是无损的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:14:59.343

以下压缩算法由 Curto 用 Ja​​vascript 编写，直接在流上工作： [https ://github.com/pierrec/node-lz4](https://github.com/pierrec/node-lz4)

# javascript - 新的 DIV 出现在另一个 Div 的悬停/鼠标悬停上

> ID：13022438
> 
> 赞同：0
> 
> 时间：2012-10-23T01:41:26.273
> 
> 标签：javascript, jquery, html, css, mouseevent

我有许多 DIV 目前以椭圆形布置。每个 div 代表一个“服务”并相应地进行 ID，所有设置都设置了绝对位置。

我想要做的是鼠标悬停在一个 div 上，我想让一个带有相关信息的新 DIV 出现在中间。这应该发生在每个“服务”上，因此每个“描述性”div 将被隐藏，直到鼠标悬停，但都出现在同一个空间中。

该网站是 www.faa.net.au 的主页。

如何让这个新的描述性 DIV 在鼠标悬停时出现并在鼠标悬停时隐藏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:54:17.013

您可以做的是使用 CSS 将所有这些 div 放置在中间的那个位置。它们可以堆叠，z-index 并不重要，因为你一次只能看到一个。然后在你的 CSS 中用“display:none”隐藏它们。

然后使用 jQuery 的 .hover() 方法在鼠标悬停时显示适当的 div

```
$("#idOftheDivYouHoverOn").hover(function (e) {
     //This funciton defines what happens on mouse-in or hover.

     $("#idOfTheDefaultCenterDiv").hide();
     $("#idOfTheDivYouWantedToShow").show();

}, function (e) {
    //This function defines what happens on mouse-out or when the hover is over.
    $("#idOfTheDefaultCenterDiv").show();
     $("#idOfTheDivYouWantedToShow").hide();

}); 
```

您必须为每个悬停在上面的人执行此操作。有一种“更聪明”的方式，但要解释它将是一个很长的答案。

也就是说，如果您想使用 JavaScript/jQuery 而不是仅使用**类似于您在其他答案中看到的纯 CSS**来执行此操作。使用此方法，您可以添加淡入淡出效果 - 看看 jQuery 的悬停 - [http://api.jquery.com/hover/](http://api.jquery.com/hover/)

编辑：这是一个工作示例：http: [//jsfiddle.net/6dMDS/](http://jsfiddle.net/6dMDS/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:10:50.050

另一个论坛的朋友刚刚发布了另一种方法。请注意，它只是 CSS3，因此某些浏览器（肯定是较旧的 IE）将不支持它。

```
<div class="container">

<img class="one" src="http://placehold.it/100x100" />
<img class="two" src="http://placehold.it/100x100" /><br>
<img class="three" src="http://placehold.it/100x100" />
<img class="four" src="http://placehold.it/100x100" /><br>
<img class="five" src="http://placehold.it/100x100" />
<img class="six" src="http://placehold.it/100x100" />

<div class="hidden-one">hidden-one</div>
<div class="hidden-two">hidden-two</div>
<div class="hidden-three">hidden-three</div>
<div class="hidden-four">hidden-four</div>
<div class="hidden-five">hidden-five</div>
<div class="hidden-six">hidden-six</div>

</div>

* {margin: 0; padding: 0;}

.container {width: 400px;}

.one:hover ~ .hidden-one,
.two:hover ~ .hidden-two,
.three:hover ~ .hidden-three,
.four:hover ~ .hidden-four,
.five:hover ~ .hidden-five,
.six:hover ~ .hidden-six
{display: block;}

.hidden-one,
.hidden-two,
.hidden-three,
.hidden-four,
.hidden-five,
.hidden-six
{
width: 200px;
height: 300px;
border: 1px solid red;
display:none;
float: right;
position: relative;
top:-305px;
left: 10px;
} 
```

[http://codepen.io/anon/pen/LbfCl](http://codepen.io/anon/pen/LbfCl)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T01:54:12.897

所以如果我做对了，你就会得到一个“服务”DIV 和一个“描述性”DIV。尝试一些 CSS 来实现它。

HTML：

```
<div id="service"></div>
<div id="descriptive"></div> 
```

和 CSS：

```
#descriptive
{
visibility:hidden;
}

#service:hover #descriptive
{
visibility:visible;
} 
```

基本上，这将使 DIV在悬停`id="descriptive"`时显示。`id="service"`

# php - 从电子邮件地址查找大学名称

> ID：13022442
> 
> 赞同：1
> 
> 时间：2012-10-23T01:41:41.513
> 
> 标签：php, mysql

这可能超出了stackoverflow的范围，但我有一个问题。我正在尝试自动插入我的每个注册人参加的学院/大学的名称。他们只能使用 .edu 电子邮件进行注册，我想知道是否有办法查看电子邮件所属的学院或大学？

前任：

morris@uakron.edu

将返回：

阿克伦大学

或者有人知道我在哪里可以找到这样的目录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:47:03.760

您可以使用所有大学名称及其电子邮件域填充 MySQL 表。[这](https://stackoverflow.com/questions/13022442/evaluating-a-string-in-php)是一个示例目录，您或许可以从它开始。

完成此操作后，您可以解析域的用户电子邮件。[这](https://stackoverflow.com/a/6917269/924643)是关于如何从电子邮件地址获取域名的非常相似的答案。

从用户的电子邮件中获取域后，从 MySQL 数据库中检索大学/学院的名称。（如果它不存在，则值得记录，因为它可能是一个尚未在您的数据库中的新域名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:55:44.337

[**Swot**](https://github.com/leereilly/swot)是一个可以做到这一点的项目（用 Ruby 编写）。它检查给定的电子邮件是否属于教育机构（使用填充了映射到机构名称的域名的数据库）。

> Swot 允许您识别特定电子邮件地址或域是否与在世界任何国家/地区提供高等教育、四年级或高等教育的学术机构相关联。

您可能可以在代码中使用它的某些部分（Swot 的数据库本身就是一个巨大的财富）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:52:13.980

在表格中查找它的另一种方法是在电子邮件来自的域上进行 who-is 搜索，以查找它的注册人。

您可以使用[WhoisAPI](http://whoisxmlapi.com/)之类的服务进行 API 调用，然后解析注册人姓名的输出。不过，可能并不总是准确地给出你想要的。

# php - 如何使 Magento 不需要美国状态？

> ID：13022449
> 
> 赞同：0
> 
> 时间：2012-10-23T01:42:53.430
> 
> 标签：php, javascript, magento

当我在magento的通讯录中更改国家时，如果不是美国，则不需要州。

我如何更改它以便在我选择美国时将其标记为不需要或不再需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:49:26.683

我找到了答案。

转到系统 > 配置 > 属 > 状态选项

将不需要显示设置为否。

# ruby-on-rails-3 - Rails：访问使用 column_names 选择的列的值

> ID：13022452
> 
> 赞同：1
> 
> 时间：2012-10-23T01:43:40.530
> 
> 标签：ruby-on-rails-3, hash

有什么想法可以让它发挥作用吗？我这辈子都想不通。

```
def get_prices(c)
  @print_prices = {}
  Billing.where(:name => c).column_names.each do |d|
    if d.match(/^print_/)
      @print_prices[d] = d.value
    end
  end
  return @print_prices
end 
```

我不知道用什么代替`d.value`。

为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:58:51.987

以下代码将执行查询，以关系的形式返回，并拒绝属性键值哈希中与给定正则表达式不匹配的所有项目，在本例中为`/^print_/`.

```
def get_prices(c)
  Billing.where(:name => c).first.attributes.reject{ |i| !i.match(/^print_/) }
end 
```

或者，它也可以写成：

```
def get_prices(c)
  Billing.where(:name => c).first.attributes.select{ |i| i.match(/^print_/) }
end 
```

# c++ - 将无符号字符数组重铸为无符号长数组

> ID：13022459
> 
> 赞同：0
> 
> 时间：2012-10-23T01:44:15.173
> 
> 标签：c++, casting, sha1, mersenne-twister

好的，我正在使用原始 SHA1 散列来播种 Mersenne Twister 伪随机数生成器，生成器让我可以选择使用 unsigned long 或 unsigned long 数组播种

我正在使用的 SHA1 类将哈希作为 20 字节的无符号字符数组提供给我

我想我可以将这个 chars 数组重铸为 longs 数组以获得工作种子，但我怎么知道得到的 longs 数组有多长？

示例代码：

```
CSHA1 sha1;
sha1.Update((unsigned char*)key, size_key);
sha1.Final();
unsigned char* hash;
sha1.GetHash(hash);

// Seed the random with the key
MTRand mt((unsigned long*)hash, <size of array of longs>); 
```

我希望没有数据丢失（因为没有字节被丢弃），因为我需要它来保持加密安全

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:47:54.437

您可以使用`len_of_chars * sizeof(char) / sizeof(long)`，其中`len_of_chars`大概是 20。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:00:34.423

你可以说

```
sizeof(unsigned long) / sizeof(unsigned char) 
```

得到一个长字节的数量。

然而，简单的铸造有两个潜在的问题。

首先，字符数组可能没有正确对齐。在某些处理器上，这可能会导致陷阱。在其他人身上，它只会减慢执行速度。

其次，如果程序必须在不同的体系结构上以相同的方式工作，那么您正在询问字节顺序问题。

您可以通过将字节显式复制到 long 数组中来解决这两个问题。未经测试的代码：

```
const int bytes_per_long = sizeof(unsigned long) / sizeof(unsigned char);
unsigned long hash_copy[key_length_in_bytes / bytes_per_long];
int i_hash = 0;
for (int i_copy = 0; i_copy < sizeof hash_copy / sizeof hash_copy[0]; i_copy++) {
  unsigned long b = 0;
  for (int i_byte = 0; i_byte < bytes_per_long; i_byte++)
    b = (b << 8) | hash[i_hash++];
  hash_copy[i_copy] = b;
}
// Now use hash_copy. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:33:55.623

[您的库](http://www.bedaux.net/mtrand/)似乎假定 32-bit `unsigned long`s，因此您这样做没有 [更多] 危害。事实上，我会尽可能假设 8 位`unsigned char`s 甚至可能是未填充的小端表示。因此，您可以使用简单的演员表（尽管我会使用 a `reinterpret_cast`），或者可能使用@Gene 的`memcpy`样本进行对齐。

然而，可移植代码* 应该使用`<cstdint>`,`uint#_t`其中的类型和分段的按值复制进行转换：

```
uint32_t littleEndianInt8sToInt32(uint8_t bytes[4]) {
    return bytes[0] | (bytes[1] << 8) | (bytes[2] << 16) | (bytes[3] << 24);
} 
```

...和更好的名字。抱歉，来晚了：）

*：当然，`stdint` *它本身*不是很便携（>= C++11），并且不能保证精确宽度类型在其中。讽刺。

# android - Android防止键盘关闭

> ID：13022460
> 
> 赞同：5
> 
> 时间：2012-10-23T01:44:22.473
> 
> 标签：android, android-layout, keyboard, user-input

是否可以防止用户关闭软键盘。换句话说，当我的活动可见时，屏幕上的键盘（始终）可用。这可能吗？如果是这样，你将如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-14T12:32:39.797

无论焦点如何，这都应该强制键盘显示：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(yourViewObject.getWindowToken(), 0);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T01:57:26.873

您需要覆盖`onKeyUp()`和`onKeyDown()`方法，如下所示，

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK)     
    {
        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput
                (InputMethodManager.SHOW_FORCED,InputMethodManager.HIDE_IMPLICIT_ONLY);
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK)     
    {
        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput
                (InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
    }
    return super.onKeyDown(keyCode, event);
} 
```

您也可以尝试任何一种方式，通过使用`OnEditorActionListener`，看看下面的代码，

```
EditText txtMyEdit = (EditText) findViewById(R.id.txtEdit);
txtMyEdit.setOnEditorActionListener(new OnEditorActionListener() 
{
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) 
    {
        if (actionId == EditorInfo.IME_ACTION_DONE) 
        {
            // your additional processing... 
            return true;
        } 
        else 
        {
            return false;
        }
    }
}); 
```

# css - 为编译的 sass/scss 添加时间戳

> ID：13022461
> 
> 赞同：10
> 
> 时间：2012-10-23T01:44:59.750
> 
> 标签：css, compass-sass, sass

是否可以使用 SASS 在编译的 CSS 文件上自动添加时间戳？例如

```
/* CSS Compiled on: {date+time} */
...compiled css goes here... 
```

我检查了 SASS 和 Compass 文档，但没有提到这样的功能。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T13:02:38.520

我不知道任何内置的 SASS 或 Compass 功能，但添加自定义 Ruby 函数来实现它并不难。（请参阅[此处](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html)SASS 参考中标题为“[添加自定义函数](http://sass-lang.com/documentation/Sass/Script/Functions.html#adding_custom_functions)”的部分。）

您的带有 Ruby 函数的文件将如下所示（我们称之为“timestamp.rb”）：

```
module Sass::Script::Functions
    def timestamp()
        return Sass::Script::String.new(Time.now.to_s)
    end
end 
```

你会在你的 SASS 文件中引用新的时间戳函数，如下所示：

```
/*!
 * CSS Compiled on: #{timestamp()}
 */ 
```

您只需要确保在编译 SASS 时加载“timestamp.rb”文件，方法是从 Compass 配置文件中要求它，或者通过`--require`在 SASS 命令行中使用参数。当一切都说完了，你应该得到如下输出：

```
/*
 * CSS Compiled on: 2012-10-23 08:53:03 -0400
 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T11:55:52.810

如果您使用的是命令行版本的 SCSS，您可以执行以下操作：

1.  安装[sass 时间戳](https://github.com/madastro/sass-timestamp)

    `gem install sass-timestamp`

2.  在您的代码中使用它（有关更多信息，请参阅[文档）](https://github.com/madastro/sass-timestamp)

    `/* Compiled on #{timestamp()} */`

3.  在命令行上需要它

    `scss -r sass-timestamp ...`

4.  输出将是

    `/* Compiled on 2015-02-02 13:01:40 +0800 */`

注意：`#{unix_timestamp()}`用于 unix 时间戳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T09:22:07.730

*我不知道是否每个人都需要它（因为这个问题很久以前就已经回答了），但一个简单的解决方案是将时间戳/日期作为 SASS 变量写入单个 sass/scss 文件，将它们导入到时间戳应该是，然后让 sass 中的评论将它们写出来。*

无需安装、编译或其他任何东西 - 只需使用脚本和 sass：

**1.）将时间戳写入单独的 sass 文件：（这里是 dos 脚本，但您也可以使用任何其他脚本/语言来生成简单文件）：**

```
echo $BuildTimeStamp : "%date% %time%"> _timestamp.scss 
```

**2.) 使用时间戳导入生成的文件：**

```
@import '_timestamp.scss'; 
```

**3.）将标题写为注释：**

```
/*! Automatic build at: #{$BuildTimeStamp} */ 
```

在调用原始 sass 命令之前写下时间戳，它也可以在不需要安装、构建或执行任何其他操作的情况下工作。

# r - 如何在 R 中清理/重建因子

> ID：13022470
> 
> 赞同：2
> 
> 时间：2012-10-23T01:46:10.210
> 
> 标签：r

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我有一个包含因子列的数据框，然后我想使用子集仅提取其部分数据。但是提取的数据框的因子列仍然具有相同的级别，即使某些级别没有价值。这会影响我的后续操作（例如使用 ggplot 进行可视化）。

以下是示例代码。

```
d<-data.frame(c1=factor(c(1,1,2,3)),c2=c("a","b","c","d"))
d<-subset(d,c1 %in% c(1,2))
d$c1 
```

列 c1 仍然有 3 个级别 (1,2,3)，但实际上我希望它是 (1,2)，因为这些对于级别 3 没有价值。然后在可视化中，我不会绘制任何图表对于第 3 级。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:47:17.650

使用droplevels：

`d <- droplevels(d)`

# cryptography - 使用 OpenSSL BIGNUMs 的数学：如何计算乘法逆？

> ID：13022471
> 
> 赞同：1
> 
> 时间：2012-10-23T01:46:18.573
> 
> 标签：cryptography, openssl, bignum

我在使用 OpenSSL BIGNUM 时遇到了一些问题。我正在尝试实现一个基本的 ElGamal 协议。我遇到的问题是其中一些计算没有返回我期望的值！当我尝试计算乘法逆时，这一点最为明显。

例如：

```
static void roughExample() {
BIGNUM *u1 = BN_new();
BIGNUM *u2 = BN_new();

BIGNUM *one = BN_new();
BN_one(one);
BIGNUM *negOne = BN_new();
BN_zero(negOne);
BN_sub(negOne, negOne, one); // So negOne should = -1 and it does

BN_print_fp(stdout, negOne);  //shows -1 here

BN_rand_range(u1, q); // q = large prime, point being that u1 = random large num
BN_print_fp(stdout, u1);

BN_exp(u2, u1, negOne, ctx);
BN_print_fp(stdout, u2); // in the output, u1 = u2.
} 
```

上面的输出结果为：-1，[大素数]，[完全相同的大素数]。

很明显 BN_exp 没有做我期望的事情。在这种情况下，我想我可以只使用 BN_div 来做 1/x，但我想知道我是否缺少更大的图片。我正在使用这样的大量计算，但我并不总是能够直观地验证该值是否像我预期的那样发生了变化。

任何人都可以帮忙吗？提前致谢！

编辑：我尝试使用 1/x，它产生的值为 0...：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:13:15.630

你需要一个`BN_mod_inverse`函数。其他函数不提供这样的算法。

如果 q 是素数，您还可以对 (q-2) 模 q 求幂。由于费马小定理，你将得到逆场成员。

# objective-c - 有什么方法可以读取 Settings.app 中的设置值吗？

> ID：13022476
> 
> 赞同：2
> 
> 时间：2012-10-23T01:47:38.873
> 
> 标签：objective-c, ios

我想知道“自动大写”、“自动更正”、“检查拼写”等的系统配置，无论它们是从 Settings.app（设置/常规/键盘/）打开还是关闭。

我不知道我是否有权访问这些信息？如果是，我可以使用哪个 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:17:46.080

我搜索了这个，发现你**无权**访问这些信息，你也不能覆盖系统的设置：[为什么 UITextSpellCheckingTypeYes 不覆盖设置/常规/键盘/检查拼写？](https://stackoverflow.com/questions/8272646/why-doesnt-uitextspellcheckingtypeyes-override-settings-general-keyboard-check)

# ios - 在 iOS 6 上保存联系人时出现 Phonegap ContactError

> ID：13022482
> 
> 赞同：0
> 
> 时间：2012-10-23T01:48:09.993
> 
> 标签：ios, cordova, contacts

我[在 PhoneGap 谷歌群组上发布了](https://groups.google.com/forum/?fromgroups=#!searchin/phonegap/io_error/phonegap/Fgc0P44TEpA/8ejz7oyZDfAJ)这篇文章，并在 Stack Overflow 上交叉发布了它。

无论如何，PhoneGap 的[Contact API](http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts)最近让我头疼。简而言之：

**环境**

*   iOS 6
*   PhoneGap 2.0.0

我有这个应用程序可以扫描嵌入了 VCard 的 QR 码，一旦用户同意将其保存下来，它就会将其保存到用户的联系人中。On `Android 4.1.2`，这段代码完美无瑕地运行，没有任何错误，并且联系人也被保存了。但是，我`iOS 6`无法让它工作。我一直收到的是`error #4`，也就是[`ContactError.IO_ERROR`](http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#ContactError)。

代码如下：

```
navigator.notification.confirm('Found a contact: "'+(vcard['N'] || '')+'". Add it into your contact list?', function(btn) {
    if (btn == 1) {
        var contact = navigator.contacts.create();

        contact.displayName = vcard['N'] || '';
        contact.emails = [new ContactField('email', vcard['EMAIL'] || '')];

        var org = new ContactOrganization();
        org.name = vcard['ORG'] || '';

        contact.organizations = [org];

        contact.save(function() {
            navigator.notification.alert('Contact Saved');
        }, function(err) {
            navigator.notification.alert('Error on saving contact: '+err.code);
        });
    }
}, 'QR Code Scanner', 'OK,Cancel'); 
```

*以下是我在点击“确定”后在 XCode上*看到的唯一日志：（第一个回调是针对`notification.confirm`）

```
2012-10-22 21:19:24.619 [11897:907] PluginResult:toJSONString - {"status":1,"message":1,"keepCallback":false}
2012-10-22 21:19:24.621 [11897:907] PluginResult toSuccessCallbackString: cordova.callbackSuccess('Notification12',{"status":1,"message":1,"keepCallback":false});
2012-10-22 21:19:24.738 [11897:907] PluginResult:toJSONString - {"status":9,"message":4,"keepCallback":false}
2012-10-22 21:19:24.739 [11897:907] PluginResult toErrorCallbackString: cordova.callbackError('Contacts13',{"status":9,"message":4,"keepCallback":false}); 
```

然后我会看到警报：

```
Error on saving contact: 4 
```

**笔记**

*   *vcard 是 vcard obj 的键值对*。请暂时忽略这一点。这并不重要。
*   这段代码在 android 上运行良好。

这是建立联系的正确方式吗？如何使用 PhoneGap 在 iOS 6 上保存联系人？

## 编辑

我做了所有必要的迁移并升级到 v2.1.0，但错误代码仍然出现。为什么是这样？

## 编辑

显然，这与 Mark 提到的 iOS 6 上的新地址簿权限请求有关，但没有人回答我如何正确执行此操作。花了一些时间研究我得出一个结论，如果我们可以等待 Phonegap 完成 v2.2 是最好的，因为我看到[在 v2.2 rc2 提交 61857860 的 CDVContacts.m 中添加了权限请求......](https://github.com/phonegap/phonegap/blob/618578606e43ee3e819e573116182e05e9ea572a/lib/ios/CordovaLib/Classes/CDVContacts.m#L572)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:38:11.650

[https://issues.apache.org/jira/browse/CB-902](https://issues.apache.org/jira/browse/CB-902)

如果用户在 iOS 6 上没有 AddressBook 权限，当前会崩溃。用户将看到一个类似于 Geolocation 权限对话框的弹出对话框。在创建通讯录时，我们应该处理应用没有权限，返回的通讯录为NULL的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:21:49.390

我有同样的问题。事实证明，我使用的是 phonegap 1.9 版，它不支持 iOS 6，因此添加联系人总是给我错误 4 消息。为了解决这个问题，我升级到 phonegap 2.1 版。此版本支持 iOS 6 以及 armv6 和 armv7 架构。错误消息是因为 iOS 6 需要权限才能访问地址簿，就像在 iOS 上使用 GPS 需要权限一样。这应该可以解决您的问题，它对我有用:)

# google-app-engine - GAE 数据存储中查询的大小/成本

> ID：13022483
> 
> 赞同：2
> 
> 时间：2012-10-23T01:48:25.577
> 
> 标签：google-app-engine, google-cloud-datastore

如果我有一个结构如下的查询：

```
q = Questions.all()
q.order('-votes')
results = q.run(limit=25) 
```

投票只是数据库模型`IntegerProperty`中的一个`Questions`，查询的大小/成本（基本上计入我的配额）是否取决于实体的数量？

基本上，如果我想订购 1000 `Questions`，它是否比只订购 10 贵`Questions`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:56:26.803

简短的回答：不。

有读成本和写成本。

写入实体时会产生写入成本，影响最大的是每个实体的索引属性数量。

读取成本基于查询中返回的实体数量。

如果您对选票进行排序，则需要确保对 votes 属性进行索引。这是每个写入的实体 1-2 次额外写入。

读取成本因返回的实体数量而异。过滤器和排序顺序不会影响读取成本。

# sugarcrm - SugarCRM 对自定义字段的限制

> ID：13022491
> 
> 赞同：3
> 
> 时间：2012-10-23T01:49:47.550
> 
> 标签：sugarcrm

我对 SugarCRM 模块开发完全陌生，但是我对 PHP、ajax 和数据库编程有很好的了解。

这是我的任务：我被要求从客户端模块创建对自定义字段的限制。有一个称为标识号的自定义字段，我需要做的是避免基于该字段将新客户端保存到数据库中，换句话说，客户端必须是唯一的。它必须显示一个弹出窗口，上面写着“那个客户端已经存在”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:55:10.753

将`editviewdefs.php`帐户复制到`custom`文件夹并将自定义字段定义更改`id_number`为此

```
array(
  'name' => 'id_number',
  'displayParams' => 
  array (
    'field' =>   
    array (  
      'onChange' => 'check_is_duplicate(this);',  
    ), 
  ),
), 
```

创建一个javascript函数`check_is_duplicate`

```
function check_is_duplicate(obj) {
  // Call a script via Ajax. Pass values for id and id_number with the request.
  if (o.responseText > 0) {
    alert('duplicate');
    document.getElementById('SAVE').disabled = true;
  } else {
    document.getElementById('SAVE').disabled = false;
  }
} 
```

您必须创建将通过 ajax 请求调用的脚本。
在该脚本中，您必须运行如下查询 -

```
SELECT COUNT(*) AS count FROM accounts 
WHERE deleted = 0 AND id != {$record} AND id_number = {$id_number} 
```

执行查询并返回计数。

`beforeSave`之后使用逻辑挂钩从服务器端保存检查重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T08:00:54.423

您可以通过以下代码创建自定义重复检查：

```
$dictionary['Account']['duplicate_check']['FilterDuplicateCheck']['filter_template'] = array(
    array(
        '$and' => array(
            array('identification_number' => array('$equals' => '$identification_number')),

        ),
    ),
); 
```

在文件中添加此代码：/custom/Extension/modules/Accounts/Ext/Vardefs/duplicate_check.php。然后，执行快速修复/重建。

工作原理：当您输入识别号并按保存时，SugarCRM 将执行重复检查。如果发现重复项，SugarCRM 将列出重复项，您可以选择使用重复项或忽略。

# java - VM 设置为最大 1024m 时出现 Java OutOfMemoryError

> ID：13022495
> 
> 赞同：0
> 
> 时间：2012-10-23T01:50:36.367
> 
> 标签：java, out-of-memory

1 亿个 int 的 int 数组应该是 400 MB，对吧？1 个整数 = 4 个字节

因此，如果我使用 -Xmx1024m 将 VM 的最大堆设置为 1024m，为什么此代码会失败：

```
public static void main(String[] args) {

    int[] b = new int[100000000]; //100 mil = 400mb
    System.out.println("ok");
    int[] c = new int[100000000];

} 
```

这是输出：

```
ok
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at Main.main(Main.java:9) 
```

**解决方案**- 打破它！

```
public static void main(String[] args) {

    int[] a = new int[50000000]; //50 mil = 200mb
    System.out.println("ok 1");
    int[] b = new int[50000000];
    System.out.println("ok 2");
    int[] c = new int[50000000];
    System.out.println("ok 3");
    int[] d = new int[50000000];
    System.out.println("ok 4");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:00:04.500

问题在于，当您创建这个 int[] 时，它需要 400mb 的连续内存。基本上这意味着，您需要一块 400mb 的内存块才能使用。由于堆的碎片化，它无法找到一个可靠的 400mb 内存块来使用。这就是为什么在这种情况下会出现内存不足错误的原因。

# ruby-on-rails - 在 rails 辅助方法中缓存评估结果

> ID：13022499
> 
> 赞同：7
> 
> 时间：2012-10-23T01:51:48.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在实现一些辅助方法时，有时，我想将一些计算结果存储在辅助方法可访问的某个地方作为缓存。

如果我将它存储到实例变量中，它会污染实例，所以这样做看起来不明智。

有什么好地方可以存储这样的价值吗？或者在助手中进行如此繁重的计算是一个坏主意？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T03:47:29.927

有时我使用 Rails 缓存来存储这种值。代码是这样的，

```
def helper_method
  Rails.cache.fetch('helper_value') do
    # calculate the value if it does not exist
    ...
  end
end 
```

# facebook - 从具有 Facebook ID 的页面获取有限数据

> ID：13022500
> 
> 赞同：0
> 
> 时间：2012-10-23T01:51:50.693
> 
> 标签：facebook, api, facebook-graph-api

我之前（[在这里](https://stackoverflow.com/questions/13022173/getting-like-data-from-an-url-which-has-a-facebook-id)）刚刚发布了一个问题，它现在正在工作。但回答完这个问题后，又出现了另一个问题。

下面这个网址我只有我的分享

[https://graph.facebook.com/?ids=http://marceloduende.com/facebook_test/index.html](https://graph.facebook.com/?ids=http://marceloduende.com/facebook_test/index.html)

在这个 URL 上，我有所有这些数据......

[https://graph.facebook.com/?ids=http://www.imdb.com/title/tt2380247/#lb-vi2114495513](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt2380247/#lb-vi2114495513)

有人对我如何获取所有这些数据有任何建议吗？这是我唯一想不通的技巧。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:29:00.717

问题解决了。

IMDB 使用它自己的 javascript 来执行 fql，然后吐出 json。证明如下。所以默认情况下，facebook 提供的是我已经拥有的。谢谢你们。

掺假的脸书脚本：

(function(d,s,id){var js,stags=d.getElementsByTagName(s)[0]; if(d.getElementById(id)){return;}js=d.createElement(s);js.id =id; js.src="http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.min.js"; stags.parentNode.insertBefore(js ,stags);})(文档,'脚本','imdb-rating-api');

未缩小的脚本版本：

[http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.js](http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.js)

# java - 第一个焦点上的 EditText 明文 - Android

> ID：13022501
> 
> 赞同：8
> 
> 时间：2012-10-23T01:51:51.310
> 
> 标签：java, android, android-edittext

我有几个带有文本的 EditText 对象。我希望 EditText 第一次获得焦点以删除其中的文本，但仅限于第一次。

我该怎么做？

这是一个示例：我有一个名为 SomeThing 的 EditText，其中包含文本“someText”。当用户第一次触摸 SomeThing 时，我希望删除“someText”。所以假设文本被删除，现在用户输入了他自己的文本，这次是“someOtherText”，而 EditText 失去了对其他一些 EditText 的关注。这次当用户点击 SomeThing 时，“someOtherText”不会被删除，因为这是它第二次获得焦点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T02:22:12.703

Matan，我不确定这是否是您正在查看的内容，但我认为您想为您的编辑文本显示[“提示”](http://developer.android.com/reference/android/widget/TextView.html#attr_android:hint)

例子

```
<EditText
.
.
 android:hint="Please enter your name here"> 
```

例如，检查这个[http://www.giantflyingsaucer.com/blog/wp-content/uploads/2010/08/android-edittext-example-3a.jpg](http://www.giantflyingsaucer.com/blog/wp-content/uploads/2010/08/android-edittext-example-3a.jpg)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T02:44:44.397

如果您正在寻找为 . 添加占位符的方法`EditText`，只需添加`android:hint = 'some text'`到相应的 XML 文件或`setHint('some text')`调用`EditText`.

否则，您可以使用`OnFocusChangeListener()`来响应获取焦点事件。要检查是否是第一次`EditText`获得焦点，请使用另一个`Boolean`变量（例如，`isFirstTimeGetFocused`）并将其初始化为`true`in`onCreate()`方法。`EditText`获得焦点后，设置`isFirstTimeGetFocused`为`false`;

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(hasFocus && isFirstTimeGetFocused){
        editText.setText("");
        isFirstTimeGetFocused = false;
    }
}); 
```

# r - 有选择地修改指数

> ID：13022503
> 
> 赞同：7
> 
> 时间：2012-10-23T01:51:57.223
> 
> 标签：r

有没有更短的方法来选择元素并修改它们？例如，在

```
y[y < 1] <- y[y < 1]*2 
```

对象*y*在一行中被引用 4 次。是否可以减少这种重复？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T02:05:04.617

这是一个将引用数量减少`y`1 的构造：

```
y <- -2:2
y[i] <- y[i <- y < 1] * 10

y
# [1] -20 -10   0   1   2 
```

但在实践中，我更有可能这样做，这可能不那么“聪明”，但肯定更容易解析（对于人类）：

```
i <- y < 2
y[i] <- y[i] * 10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T02:08:41.627

试试这个

```
y <- y*{{y<1} + 1} 
```

一般来说，你可以引入一个函数 f

```
f <- function(bool) ifelse(bool, 2, 1)
y <- y * f(y < 1) 
```

这种方法似乎比 Josh 的解决方案快一点

```
n <- 10000
y <- sample(c(1,-1), n, replace = TRUE)
f1 <- function(y){y[i] <- y[i <- y < 1] * 10; y}
f2 <- function(y){y <- y*{{y<1} + 1}; y} 
benchmark(f1(y), f2(y), replications = 50000) 
```

> ```
>  test replications elapsed relative user.self sys.self user.child sys.child
> 1 f1(y)        50000   30.29    2.398    27.427    3.146          0         0
> 2 f2(y)        50000   12.63    1.000     9.859    2.918          0         0 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T02:02:28.310

这不会减少对 的引用次数`y`，但会停止`y>1`计算两次

```
y <- ifelse(y<1, y, y *2) 
```

或者你可以预定义 y <1

```
replacing <- y < 1 
```

然后该行仅包含两个显式引用`y`

```
y[replacing] <- y[replacing] *2 
```

您可以将 y 放入 a 中`data.table`，然后您可以（几乎）将`y`重复次数减少 1

```
 library(data.table)
 Y <- data.table(y = y)

 Y[y <1, y := y*2] 
```

我说差不多，因为如果你想访问 atomic vector `y`，你需要输入`Y[,y]`

# c - C - 使用指针查找最大值

> ID：13022505
> 
> 赞同：0
> 
> 时间：2012-10-23T01:52:00.973
> 
> 标签：c, pointers, struct, max

我是 C 的新手。说如果

```
struct test{
   int val;
   struct test *next
}; 
```

如果使用这个结构创建了一个列表，你如何通过指针找到最大值？

假设列表中充满了上述结构的对象，我尝试过

```
struct test *t1 = malloc(sizeof (struct test));
struct test *t2 = malloc(sizeof (struct test));
While (list !=NULL){
  int max=0;
  struct test *t1, *t2;
  if(t1->val < t2->val){
     max = t2->val;             
  }
 list = list->next;
} 
```

但我想我不明白它背后的逻辑。我只需要一个关于如何使用指针查找结构列表的最大值的解释或示例。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:00:06.923

这可以帮助你理解（我猜）

片段：

```
max = t1->val; /* take first value */
/* this is one way of traveling through the simple (?) list */
for(pointer = t1->next; pointer; pointer = pointer->next)
     max = pointer->val > max ? pointer->val : max;

printf("max: %d\n", max); 
```

编辑：假设 t1 指的是填充列表。

# mysql - 如何选择和忽略空格或空白字符串？

> ID：13022510
> 
> 赞同：0
> 
> 时间：2012-10-23T01:52:31.963
> 
> 标签：mysql, sql

我想`SELECT DISTINCT`在一张桌子上返回一个字符串。

如果字符串为空，我不想知道该行。

更糟糕的是，一些用户一直在输入空格，我也想忽略这些行。

（我怎样才能做到这一点？谢谢（MySql）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:58:09.837

```
SELECT DISTINCT col_name 
FROM table_name
WHERE TRIM(col_name) != '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:55:10.977

您可以[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)在 MySQL 中使用来获取第一个非`NULL`列。

此外，您还可以使用[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/case.html)语句来检查任一列是`NULL`空字符串还是空字符串，并基于此进行条件查询。

# asp.net - 区域中的 Web API 和控制构造函数引用的反转

> ID：13022511
> 
> 赞同：0
> 
> 时间：2012-10-23T01:52:34.617
> 
> 标签：asp.net, inversion-of-control, asp.net-web-api

我已经在 MVC 网站的某个区域设置了 Web API。我关注[了这篇文章](http://netmvc.blogspot.be/2012/06/aspnet-mvc-4-webapi-support-areas-in.html)，它设置了一个自定义 DefaultHttpControllerSelector 实例来提供相关类型。但是，我有一个问题，即在该区域中找到的控制器需要动态构建。我为 MVC 站点创建的自定义控制器激活器似乎没有用于 Web API。我可以使用什么对象来设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:24:21.980

您可以通过`IHttpControllerActivator`

```
public interface IHttpControllerActivator
{
    IHttpController Create(
        HttpRequestMessage request,
        HttpControllerDescriptor controllerDescriptor,
        Type controllerType);
} 
```

Mark Seemann 有几篇关于使用此接口在 Web API 中进行 DI 的精彩文章：

[http://blog.ploeh.dk/2012/09/28/DependencyInjectionAndLifetimeManagementWithASPNETWebAPI.aspx](http://blog.ploeh.dk/2012/09/28/DependencyInjectionAndLifetimeManagementWithASPNETWebAPI.aspx) [http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)

# facebook - Facebook API：是否需要调用之间的时间间隔？

> ID：13022512
> 
> 赞同：0
> 
> 时间：2012-10-23T01:52:38.000
> 
> 标签：facebook, facebook-graph-api

我需要我的应用程序不断调用 Facebook API。我应该在每次调用之间设置一个间隔，还是只是确保它不会发出比开发人员声明的单个应用程序可以做的更多的调用并捕获关于太多调用的警告？

如果是这样，一个好的间隔量是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:28:03.797

我认为我们不需要在连续调用之间设置任何间隔`Facebook API`，我一次连续调用很多次，这不会造成任何问题。如果您要拨打太多电话，那么您只需要牢记油门限制。

# wpf - 通过代码隐藏更改 WPF 矩形填充的最佳方法

> ID：13022513
> 
> 赞同：1
> 
> 时间：2012-10-23T01:52:48.437
> 
> 标签：wpf, canvas, resourcedictionary

建议：代码工作正常，这个问题是关于这样做的最佳实践。

在我的项目中，矩形的填充是一个代表视频状态的画布，例如，如果用户在播放中点击，画布需要更改为类似`playing`，如果视频结束，画布需要更改到类似的东西`stopped`。我在一个资源字典中拥有代表这种状态的所有画布。

我的要求是：我有一个包含很多资源的 ResourceDictionary，资源看起来像这样

```
<Canvas Width="48" Height="48" Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0" x:Key="appbar_add">
    <Path Width="24" Height="24" Canvas.Left="12" Canvas.Top="12" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 22,12L 26,12L 26,22L 36,22L 36,26L 26,26L 26,36L 22,36L 22,26L 12,26L 12,22L 22,22L 22,12 Z " />
</Canvas>
<Canvas Width="48" Height="48" Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0" x:Key="appbar_alert">
    <Path Width="22.1402" Height="20.75" Canvas.Left="12.9299" Canvas.Top="14" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 24,14C 26,14 36,33 35,34C 34,35 14,35 13,34C 12,33 22,14 24,14 Z M 24,29C 23.1716,29 22.5,29.6716 22.5,30.5C 22.5,31.3284 23.1716,32 24,32C 24.8284,32 25.5,31.3284 25.5,30.5C 25.5,29.6716 24.8284,29 24,29 Z M 22.5,20L 23,28L 25,28L 25.5,20L 22.5,20 Z " />
</Canvas>
<Canvas Width="48.0067" Height="48.0067" Clip="F1 M 0,0L 48.0067,0L 48.0067,48.0067L 0,48.0067L 0,0" x:Key="appbar_alien">
    <Path Width="22.005" Height="16.0048" Canvas.Left="12.9999" Canvas.Top="16.9998" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 16.9999,16.9998L 19.0002,16.9998L 19.0026,19.0027L 21.0002,18.9998L 21.0029,21.0029L 27.0038,21.0029L 26.9999,18.9998L 28.9999,18.9998L 28.9999,16.9998L 31.0002,16.9998L 31.0002,19.0001L 29.0002,19.0001L 29.0041,21.0029L 31.0043,21.0029L 31.0043,23.0032L 33.0046,23.0032L 33.0046,25.0035L 31.0043,25.0035L 31.0001,31.0001L 29.0001,31.0001L 29.0001,33.0001L 25.0035,33.0046L 25.0035,31.0043L 28.9999,30.9999L 29.004,28.0039L 19.0026,28.0039L 19.0026,31.0043L 17.0024,31.0043L 16.9999,25.0001L 15.0002,25.0001L 15.0002,29.0001L 12.9999,29.0001L 12.9999,24.9998L 14.9999,24.9998L 14.9999,22.9998L 16.9999,22.9998L 17.0024,21.0029L 19.0026,21.0029L 18.9999,19.0001L 16.9999,19.0001L 16.9999,16.9998 Z M 33.0046,25.0035L 35.0049,25.0035L 35.0049,29.0041L 33.0046,29.0041L 33.0046,25.0035 Z M 19.0026,31.0043L 23.0032,31.0043L 23.0032,33.0046L 19.0026,33.0046L 19.0026,31.0043 Z M 19.0026,23.0032L 19.0026,25.0035L 21.0029,25.0035L 21.0029,23.0032L 19.0026,23.0032 Z M 27.0038,23.0032L 27.0038,25.0035L 29.004,25.0035L 29.004,23.0032L 27.0038,23.0032 Z " />
</Canvas>
... 
```

我想打开这个资源，按名称找到一个资源，然后将此资源应用于矩形的填充。实际上我正在做以下事情：

```
 private void ChangeFill()
    {
        Collection<ResourceDictionary> appResources = Application.Current.Resources.MergedDictionaries;

        if (Application.Current.Resources.MergedDictionaries.Count > 1)
        {
            ResourceDictionary recIcones = appResources.Where(r => r.Source.OriginalString == "Resources/Icons.xaml").FirstOrDefault(); // get the properly resource dictionary

            if (recIcones != null)
            {
                Canvas x = (Canvas)recIcones["appbar_add"]; // find a espicified resource by name
                VisualBrush vBrush = new VisualBrush(x);
                rctParado.Fill = vBrush; // apply it to the rectangle
            }
        }
    } 
```

这很好用，问题是： **这是更好的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:24:28.043

只需调用`FindResource`视觉树中的某些内容即可。这将自动搜索资源，并根据需要递归可视化树，直到找到它（包括查看您的应用级资源）。如果您只想在应用程序的资源中搜索，请使用对象`FindResource`上的方法`Application`。

至于动态分配资源，您可能可以通过数据绑定更干净、更优雅地实现相同的目标。也就是说，将`Canvas`'`Style`属性绑定到引发样式更改的任何内容，并使用转换器进行资源查找。如果没有场景的完整细节，很难更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:26:35.887

如果 Fill 基于状态，我建议使用转换器。

```
public class BrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
        CultureInfo culture)
    {
       return ChangeFill();
    }

}

Fill={Binding ., Converter={StaticResource BrushConverter} 
```

您需要更改您的更改填充以返回画笔或更改您的代码:)

圣。

# ios - 使用 UIWebview 向 Node.js 函数发送消息

> ID：13022516
> 
> 赞同：1
> 
> 时间：2012-10-23T01:53:29.707
> 
> 标签：ios, node.js, uiwebview

有一个 Node.js 函数作为`getdate(data1, date2)`. 我想`getdate("hi","hello")`从 UIWebview 发送消息。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:20:27.500

[dnode](https://github.com/substack/dnode)可能会提供帮助。本质上，它允许您通过 RPC 在客户端调用服务器端 JavaScript 函数。换句话说，它可能对你有用。

# visual-studio - Microsoft Visual Studio 2012 已停止工作

> ID：13022518
> 
> 赞同：5
> 
> 时间：2012-10-23T01:53:47.370
> 
> 标签：visual-studio, visual-studio-2012, windows-server-2008-r2

我一直在 Winodws Server 2008 R2 sp1 上使用 Visual Studio 2012，虽然除了性能有点慢之外，它似乎工作正常。但是每当我关闭应用程序时，我都会收到以下错误-

```
 Microsoft Visual Studio 2012 has stopped working 
```

并提示重启或调试程序。

[我在这里](http://social.msdn.microsoft.com/Forums/et-EE/vssetup/thread/3b4d3051-c47f-4b84-8df5-a1f4feaf8916)读到删除以下注册表项将解决 64 位机器上的问题。

```
[HKEY_CURRENT_USER\Software\Wow6432Node\Microsoft\WindowsNT\CurrentVersion\AppCompatFlags\Layers] 
```

问题是，我无法在我的机器上找到此路径之外的注册表项。 `HKEY_CURRENT_USER\Software\Wow6432Node\Microsoft`

您之前是否遇到过这种情况，解决方法是什么。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:11:11.250

我注意到其他社区成员也有与您相同的错误消息，他们通过删除注册表中的以下键来解决问题：

32位机：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]
 "C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\devenv.exe"="" 
```

64位机器：

```
[HKEY_CURRENT_USER\Software\Wow6432Node\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers] 
```

有关详细信息，请参阅此案例： http: [//social.msdn.microsoft.com/Forums/en-US/vssetup/thread/d848776a-b00f-4311-ab09-3a8777462968](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/d848776a-b00f-4311-ab09-3a8777462968) 谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T01:02:19.970

如果我没记错的话，正确的路径是这样的：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers] 
```

# java - 如何计算数组中元素的总和，直到Java中的某个索引

> ID：13022519
> 
> 赞同：-2
> 
> 时间：2012-10-23T01:53:54.890
> 
> 标签：java, for-loop, average

我试图弄清楚如何编写一个循环来计算数组中元素的总和，直到当前索引。这是用于计算前缀平均值的解决方案的一部分。到目前为止，我已经包含了我的方法（包括我正在尝试编写的伪代码）。我将不胜感激提供的任何帮助！

```
// getAverages method populates the b array with the prefix averages
public void getAverages()                      
{
    // A prefix average is calculated by averaging all the numbers up to your current index.
    // b[i] is the average of a[0]…a[i], for 0 <= i <= n

    for (int i = 0; i < a.length; i++)
    {
        b[i] = the sum of all a indexes up to i divided by (i + 1)
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:56:42.603

```
double sum = 0;
for (int i = 0; i < a.length; i++) {
    sum+=a[i];
    b[i] =sum/ (i + 1);
} 
```

`sum`将所有总和存储到当前索引。我希望它能解决你的问题。

# android - SharedPreference - 空指针异常

> ID：13022520
> 
> 赞同：1
> 
> 时间：2012-10-23T01:54:00.637
> 
> 标签：android, sharedpreferences

我正在尝试使用以下代码将某些内容保存到 SharedPreferences：

```
public class SignupActivity extends Activity {

    String str;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.signup);

        str = PreferenceManager.getDefaultSharedPreferences(this).getString(
                "signedUp", null);

        SharedPreferences app_preferences = PreferenceManager
                .getDefaultSharedPreferences(this);

        String text = app_preferences.getString("signedUp", null);

        if(str.equals("YES")){
            startActivity(new Intent("com.mobi.job.scout.MyTabActivity"));
        }

        markAsSignedUp();

    }

    public void markAsSignedUp() {
        SharedPreferences.Editor localEditor = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext()).edit();
        localEditor.putString("signedUp", "YES");
        localEditor.commit();
        Log.d("Signed Up!", ":)");
    }

} 
```

我已阅读并遵循互联网上的一些教程，但出现以下错误。这是日志：

```
10-23 01:47:27.061: E/AndroidRuntime(408): FATAL EXCEPTION: main
10-23 01:47:27.061: E/AndroidRuntime(408): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mobi.job.scout/com.mobi.job.scout.SignupActivity}: java.lang.NullPointerException
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.os.Looper.loop(Looper.java:123)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-23 01:47:27.061: E/AndroidRuntime(408):  at java.lang.reflect.Method.invokeNative(Native Method)
10-23 01:47:27.061: E/AndroidRuntime(408):  at java.lang.reflect.Method.invoke(Method.java:521)
10-23 01:47:27.061: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-23 01:47:27.061: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-23 01:47:27.061: E/AndroidRuntime(408):  at dalvik.system.NativeStart.main(Native Method)
10-23 01:47:27.061: E/AndroidRuntime(408): Caused by: java.lang.NullPointerException
10-23 01:47:27.061: E/AndroidRuntime(408):  at com.mobi.job.scout.SignupActivity.onCreate(SignupActivity.java:28)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-23 01:47:27.061: E/AndroidRuntime(408):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-23 01:47:27.061: E/AndroidRuntime(408):  ... 11 more 
```

请让我知道我正在使用的代码有什么问题，我总是最终被强制关闭。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T01:58:22.253

```
str = PreferenceManager.getDefaultSharedPreferences(this).getString(
                "signedUp", null); 
```

您的变量 str 为空，因为“signedUp”的值之前没有设置过值。在 if 语句中检查 null 。

```
if(str != null && str.equals("YES")){ 
```

`str != null`如果它是真的，它就不会继续过去。

# actionscript-3 - TextFormat 在原始 AS3 中工作，但在 Flex 中不工作

> ID：13022521
> 
> 赞同：2
> 
> 时间：2012-10-23T01:54:02.727
> 
> 标签：actionscript-3, flash, apache-flex

这个问题让我发疯，因为它看起来很简单。我正在尝试将文本格式应用于使用代码创建的文本字段，并在文本更改时将格式保持应用于文本字段。以下代码在原始 AS3 中按预期工作。我已将这些示例分解为尽可能简单。

```
package
{
    import flash.display.Sprite;
    import flash.text.TextField;
    import flash.text.TextFormat;

    public class Testing extends Sprite
    {
        public function Testing()
        {
            var tf:TextField = new TextField();
            addChild(tf);
            tf.border = true;

            var tfor:TextFormat = new TextFormat();
            tfor.align = 'right';
            tfor.size = 30;

            tf.defaultTextFormat = tfor;

            tf.text = 'Testing';

        }
    }
} 
```

但是，Flex 中的类似代码的行为方式不同。以下代码导致文本格式不正确。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
           creationComplete="_create(event)">
    <fx:Script>
        <![CDATA[
            import mx.core.UITextField;
            import mx.events.FlexEvent;

            protected function _create(event:FlexEvent):void
            {
                var tf:UITextField = new UITextField();
                ui.addChild(tf);
                tf.border = true;

                var tfor:TextFormat = new TextFormat();
                tfor.align = 'right';
                tfor.size = 30;

                tf.defaultTextFormat = tfor;

                tf.text = 'Testing';            
            }

        ]]>
    </fx:Script>

    <mx:UIComponent id="ui" width="100%" height="100%" />

</s:Application> 
```

我意识到我可以只使用 Flex 组件作为文本字段并在其上粘贴格式，但是此代码需要与以前编写的代码很好地配合使用。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:37:18.660

下面的代码可能会对您有所帮助： - 而不是将其添加到 UIComponent 将其添加到 SpriteVisualElement 它将起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="_create(event)">
    <fx:Script>
        <![CDATA[
            import mx.core.UITextField;
            import mx.events.FlexEvent;

            protected function _create(event:FlexEvent):void
            {
                var tf:UITextField = new UITextField();
                ui.addChild(tf);
                tf.border = true;

                var tfor:TextFormat = new TextFormat();
                tfor.align = 'right';
                tfor.size = 30;

                tf.defaultTextFormat = tfor;

                tf.text = 'Testing';            
            }

        ]]>
    </fx:Script>
    <s:SpriteVisualElement id="ui" width="100%" height="100%" />

</s:Application> 
```

# php - Javascript 时间到 PHP 时间

> ID：13022524
> 
> 赞同：5
> 
> 时间：2012-10-23T01:54:17.203
> 
> 标签：php, javascript, date, time

我在 javascript 中有一个时间值，例如 11:30:00。

```
 Date {Mon Oct 22 2012 11:30:00 GMT+0800 (Taipei Standard Time)} 
```

我传递给一个 php 文件并通过以下方式转换它：

```
 $newTime = date('H:i:s', $theTime); 
```

但是，它返回 05:36:00。什么是协调时间的正确方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T02:21:19.373

改为使用`myDate.getTime()`，然后将其除以 1000，因为 PHP 处理秒，而 JavaScript 处理毫秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:03:16.273

如果您希望使用 PHP 来解析日期/日期时间，那么您应该使用`strtotime()`. 就像是：

```
$time = "Mon Oct 22 2012 11:30:00 GMT+0800";
echo date('Y-m-d h:i:s', strtotime($time)); 
```

这将输出：

> 2012-10-22 04:30:00

此输出为 GMT，您可以根据需要进行更改。

**编辑：**

如果您期待 11:30:00，请尝试以下操作：

```
date_default_timezone_set('UTC');
$time = "Mon Oct 22 2012 11:30:00 GMT+0800";
echo date('Y-m-d h:i:s', strtotime($time)); 
```

# c# - 如何从用 C++ 编写的外部 dll 获取 const char * 到 C#

> ID：13022527
> 
> 赞同：2
> 
> 时间：2012-10-23T01:55:00.570
> 
> 标签：c#, c++, dll, sphinx, unity3d

我通过在 Visual Studio 2010 中将我自己的 C++ 项目编译为 DLL 将 CMU 的 PocketSphinx 与 Unity 集成，我从 Unity Pro 中的 C# 脚本调用它。我知道 dll 可以工作，因为我已经使用相同的代码将另一个项目作为 exe 进行了编译，并且它可以作为独立程序完美运行。我正在使用 pocketsphinx_continuous 项目示例，它获取麦克风输入并将文本输出到控制台。我已自定义此代码以从 Unity 内部调用，它应该作为字符串而不是控制台输出回我的 C# 代码。我觉得我几乎可以正常工作，但是 const char * 只是没有将其作为字符串返回。如果我使用这个声明，我最终会遇到访问冲突错误：

私有静态外部字符串识别来自麦克风（）；

所以，我尝试使用这个：

私有静态外部 IntPtr identify_from_microphone();

然后，我使用这行代码尝试打印该函数的输出：

print("你刚才说" + Marshal.PtrToStringAnsi(recognize_from_microphone()));

但是，然后我得到的只是“你刚才说的”作为回报。如果我这样做，我可以设法取回内存地址： print("you just said " + identify_from_microphone()); 所以，我知道有些东西正在被退回。

这是我的 C++ 代码（其中大部分最初是用 C 编写的，作为来自 pocketsphinx 的示例代码）：

```
char* MakeStringCopy (const char* str) 
{
  if (str == NULL) return NULL;
  char* res = (char*)malloc(strlen(str) + 1);
  strcpy(res, str);
  return res;
}

extern __declspec(dllexport) const char * recognize_from_microphone()
{
//this is a near complete duplication of the code from main()
char const *cfg;
config = cmd_ln_init(NULL, ps_args(), TRUE,
"-hmm", MODELDIR "\\hmm\\en_US\\hub4wsj_sc_8k",
"-lm", MODELDIR "\\lm\\en\\turtle.DMP",
"-dict", MODELDIR "\\lm\\en\\turtle.dic",
NULL);

if (config == NULL)
{
   return "config is null";
}

ps = ps_init(config);
if (ps == NULL)
{
   return "ps is null";
}

ad_rec_t *ad;
int16 adbuf[4096];
int32 k, ts, rem;
char const *hyp;
char const *uttid;
cont_ad_t *cont;
char word[256];
char words[1024] = "";
//char temp[] = "hypothesis";
//hyp = temp;

if ((ad = ad_open_dev(cmd_ln_str_r(config, "-adcdev"),
                      (int)cmd_ln_float32_r(config, "-samprate"))) == NULL)
    E_FATAL("Failed to open audio device\n");

/* Initialize continuous listening module */
if ((cont = cont_ad_init(ad, ad_read)) == NULL)
    E_FATAL("Failed to initialize voice activity detection\n");
if (ad_start_rec(ad) < 0)
    E_FATAL("Failed to start recording\n");
if (cont_ad_calib(cont) < 0)
    E_FATAL("Failed to calibrate voice activity detection\n");

for (;;) {
    /* Indicate listening for next utterance */
    //printf("READY....\n");
    fflush(stdout);
    fflush(stderr);

    /* Wait data for next utterance */
    while ((k = cont_ad_read(cont, adbuf, 4096)) == 0)
        sleep_msec(100);

    if (k < 0)
        E_FATAL("Failed to read audio\n");

    /*
     * Non-zero amount of data received; start recognition of new utterance.
     * NULL argument to uttproc_begin_utt => automatic generation of utterance-id.
     */
    if (ps_start_utt(ps, NULL) < 0)
        E_FATAL("Failed to start utterance\n");

    ps_process_raw(ps, adbuf, k, FALSE, FALSE);
    //printf("Listening...\n");
    fflush(stdout);

    /* Note timestamp for this first block of data */
    ts = cont->read_ts;

    /* Decode utterance until end (marked by a "long" silence, >1sec) */
    for (;;) {

        /* Read non-silence audio data, if any, from continuous listening module */
        if ((k = cont_ad_read(cont, adbuf, 4096)) < 0)
            E_FATAL("Failed to read audio\n");
        if (k == 0) {
            /*
             * No speech data available; check current timestamp with most recent
             * speech to see if more than 1 sec elapsed.  If so, end of utterance.
             */
            if ((cont->read_ts - ts) > DEFAULT_SAMPLES_PER_SEC)
                break;
        }
        else {
            /* New speech data received; note current timestamp */
            ts = cont->read_ts;
        }

        /*
         * Decode whatever data was read above.
         */
        rem = ps_process_raw(ps, adbuf, k, FALSE, FALSE);

        /* If no work to be done, sleep a bit */
        if ((rem == 0) && (k == 0))
            sleep_msec(20);
    }

    /*
     * Utterance ended; flush any accumulated, unprocessed A/D data and stop
     * listening until current utterance completely decoded
     */
    ad_stop_rec(ad);
    while (ad_read(ad, adbuf, 4096) >= 0);
    cont_ad_reset(cont);
    fflush(stdout);
    /* Finish decoding, obtain and print result */
    ps_end_utt(ps);

    hyp = ps_get_hyp(ps, NULL, &uttid);
    fflush(stdout);

    /* Exit if the first word spoken was GOODBYE */
   //actually, for unity, exit if any word was spoken at all! this will avoid an infinite loop of doom!
    if (hyp) {
        /*sscanf(hyp, "%s", words);
        if (strcmp(word, "goodbye") == 0)*/
            break;
    }
   else
     return "nothing returned";
    /* Resume A/D recording for next utterance */
    if (ad_start_rec(ad) < 0)
        E_FATAL("Failed to start recording\n");
}
cont_ad_close(cont);
ad_close(ad);
ps_free(ps);
const char *temp = new char[1024];
temp = MakeStringCopy(hyp);
return temp;} 
```

如果更改返回温度；返回“这里的一些字符串”；然后我看到文本出现在 Unity 中。不过，这并没有什么帮助，因为我不需要硬编码文本，我需要语音识别代码的输出，它最终存储在 hyp 变量中。

谁能帮我弄清楚我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:57:53.203

问题是你不应该在 C++ 中分配原始内存并以这种方式在 C# 中使用它，谁会摆脱你在函数内部分配的内存`MakeStringCopy`？

尝试这样的事情：

```
[DllImport("MyLibrary.dll")]
[return: MarshalAs(UnmanagedType.LPStr)] 
public static extern string GetStringValue(); 
```

这样，您就可以告诉封送处理程序 CLR 拥有调用该函数所产生的内存，并且它将负责解除分配。

此外，[.Net 字符串包含 unicode 字符](http://msdn.microsoft.com/en-us/library/362314fe.aspx)，这就是为什么您在尝试为其分配 ANSI 字符时遇到访问冲突错误的原因。使用该属性`UnmanagedType.LPStr`还可以告诉编组器它应该期望的字符类型，以便它可以为您进行转换。

最后，对于 C++ 端的内存分配，根据[MSDN 中的这个示例，](http://msdn.microsoft.com/en-us/library/e765dyyy.aspx#Y1329)您应该使用函数`CoTaskMemAlloc`而不是`malloc`函数内部`MakeStringCopy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:10:25.420

终于搞定了！我最终不得不将一个 stringbuilder 对象传递给 C++ 函数并从 C# 中的该对象中获取字符串，就像我在这篇文章中发现的那样： [http ://www.pcreview.co.uk/forums/passing-and-retrieving-字符串调用-c-function-c-t1367069.html](http://www.pcreview.co.uk/forums/passing-and-retrieving-string-calling-c-function-c-t1367069.html)

该代码比我想要的要慢，但至少现在可以使用。这是我的最终代码：

C＃：

```
[DllImport ("pocketsphinx_unity",CallingConvention=CallingConvention.Cdecl,CharSet = CharSet.Ansi)]
private static extern void recognize_from_microphone(StringBuilder str);StringBuilder mytext= new StringBuilder(1000);
recognize_from_microphone(mytext);
print("you just said " + mytext.ToString()); 
```

C++：

```
extern __declspec(dllexport) void recognize_from_microphone(char * fromUnity){
static ps_decoder_t *ps;
static cmd_ln_t *config;

config = cmd_ln_init(NULL, ps_args(), TRUE,
"-hmm", MODELDIR "\\hmm\\en_US\\hub4wsj_sc_8k",
"-lm", MODELDIR "\\lm\\en\\turtle.DMP",
"-dict", MODELDIR "\\lm\\en\\turtle.dic",
NULL);

if (config == NULL)
{
    //return "config is null";
}

ps = ps_init(config);
if (ps == NULL)
{
    //return "ps is null";
}

ad_rec_t *ad;
int16 adbuf[4096];
int32 k, ts, rem;
char const *hyp;
char const *uttid;
cont_ad_t *cont;
//char word[256];
char * temp;

if ((ad = ad_open_dev(cmd_ln_str_r(config, "-adcdev"),
                      (int)cmd_ln_float32_r(config, "-samprate"))) == NULL)
    printf("Failed to open audio device\n");

/* Initialize continuous listening module */
if ((cont = cont_ad_init(ad, ad_read)) == NULL)
    printf("Failed to initialize voice activity detection\n");
if (ad_start_rec(ad) < 0)
    printf("Failed to start recording\n");
if (cont_ad_calib(cont) < 0)
    printf("Failed to calibrate voice activity detection\n");

for (;;) {
    /* Indicate listening for next utterance */
    //printf("READY....\n");
    fflush(stdout);
    fflush(stderr);

    /* Wait data for next utterance */
    while ((k = cont_ad_read(cont, adbuf, 4096)) == 0)
        sleep_msec(100);

    if (k < 0)
        printf("Failed to read audio\n");

    /*
     * Non-zero amount of data received; start recognition of new utterance.
     * NULL argument to uttproc_begin_utt => automatic generation of utterance-id.
     */
    if (ps_start_utt(ps, NULL) < 0)
        printf("Failed to start utterance\n");

    ps_process_raw(ps, adbuf, k, FALSE, FALSE);
    //printf("Listening...\n");
    fflush(stdout);

    /* Note timestamp for this first block of data */
    ts = cont->read_ts;

    /* Decode utterance until end (marked by a "long" silence, >1sec) */
    for (;;) {

        /* Read non-silence audio data, if any, from continuous listening module */
        if ((k = cont_ad_read(cont, adbuf, 4096)) < 0)
            printf("Failed to read audio 2nd\n");
        if (k == 0) {
            /*
             * No speech data available; check current timestamp with most recent
             * speech to see if more than 1 sec elapsed.  If so, end of utterance.
             */
            if ((cont->read_ts - ts) > DEFAULT_SAMPLES_PER_SEC)
                break;
        }
        else {
            /* New speech data received; note current timestamp */
            ts = cont->read_ts;
        }

        /*
         * Decode whatever data was read above.
         */
        rem = ps_process_raw(ps, adbuf, k, FALSE, FALSE);

        /* If no work to be done, sleep a bit */
        if ((rem == 0) && (k == 0))
            sleep_msec(20);
    }

    /*
     * Utterance ended; flush any accumulated, unprocessed A/D data and stop
     * listening until current utterance completely decoded
     */
    ad_stop_rec(ad);
    while (ad_read(ad, adbuf, 4096) >= 0);
    cont_ad_reset(cont);
    fflush(stdout);
    /* Finish decoding, obtain and print result */
    ps_end_utt(ps);

    hyp = ps_get_hyp(ps, NULL, &uttid);
    fflush(stdout);

    /* Exit if the first word spoken was GOODBYE */
    //actually, for unity, exit if any word was spoken at all! this will avoid an infinite loop of doom!
    if (hyp) {
        strcpy(fromUnity,hyp);
        break;               
    }
    else
        //return "nothing returned";
    /* Resume A/D recording for next utterance */
    if (ad_start_rec(ad) < 0)
        printf("Failed to start recording\n");
}

cont_ad_close(cont);
ad_close(ad);
ps_free(ps);
} 
```

# java - 画一个正方形？谁能解释一下

> ID：13022532
> 
> 赞同：-3
> 
> 时间：2012-10-23T01:55:49.603
> 
> 标签：java

我将如何使用三种方法来产生这样的输出？

```
Please enter the fill character: "z"
Please enter the size of the box (0 to 80): "3"
+---+
|zzz|
|zzz|
|zzz|
+---+ 
```

我的代码能够生成一个框，但是我在理解使用其他方法在它周围创建边框时遇到了问题。

```
 import java.util.Scanner;
public class SolidBoxes
{
    public static void main(String[] args)
    {
        int start = 0;
        Scanner scan = new Scanner(System.in);

        System.out.print("Please enter the fill character: ");
        String character = scan.next();

        System.out.print("Please enter the size of the box (0 to 80): ");
        int size = scan.nextInt();

        if ( size > 80 || size < 0)
        {
            System.out.println("Please enter the size of the box (0 to 80): ");
            size = scan.nextInt();
        }

        for ( int i = 0; i < size; i++)
        {

            System.out.println();

            for ( int j = 0; j < size; j++)
            {   
            System.out.print(character);
            }

        }   
    }
} 
```

这给了我输出：

```
Please enter the fill character: z
Please enter the size of the box (0 to 80): 3

zzz
zzz
zzz 
```

如何为“+---+”和另一种方法“|”添加另外两种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:29:03.773

方法提供了一种将部分代码划分为您想要执行的各种任务的方法。通常，方法将执行特定任务所需的所有操作。当调用代码想要执行您在方法中实现的特定任务时，从其他代码调用方法。例如，如果您想在 main 中绘制一个形状，您可能有一个看起来像这样的方法：

```
 public void drawShape(...){
       ...
       //Put specific code to draw the shape here
       ...
    } 
```

然后在你的 main 中，只要你想绘制那个形状，你就可以像这样调用方法：

```
 drawShape(...); 
```

在上面的方法`public`中，访问修饰符告诉我们这个方法对任何可以“看到”它的代码都是公开的。该`void`部分是返回类型，在这种情况下它不返回任何内容。是`drawShape`方法名称。

在您的情况下，您似乎需要提供三种单独的方法。首先，您应该定义一种方法来输出第一行，然后获取填充字符并将其返回给主行。然后提供第二种方法来输出第二行并将框的大小返回给main。最后提供第三种方法来根据您收到的前两个输入输出框。当你写完这三个方法后，然后从 main 中以正确的顺序调用它们来运行完整的程序。

# c# - 具有 Interop.ComUtilitiesLib.dll 问题的 C# 项目

> ID：13022535
> 
> 赞同：0
> 
> 时间：2012-10-23T01:56:13.347
> 
> 标签：c#, dll, compiler-construction, open-source, runtime-error

我下载了一个用 C# 编写的开源项目，我可以构建该项目。但是，我在运行时遇到了这样的错误：

> 无法加载文件或程序集“Interop.ComUtilitiesLib，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

这意味着它无法加载 Interop.ComUtilitiesLib.dll 文件，我检查了项目根目录以及 Window/System32，仍然找不到 Interop.ComUtilitiesLib.dll 文件。

任何建议我来解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:13:48.817

项目是否包含`ComUtilities.dll`文件？如果是这样，它可能是一个需要通过命令行注册的 COM 对象：

```
regsvr32 ComUtilities.dll 
```

# iis-7 - 反向代理 (ARR) 和 ScriptResource.axd 问题

> ID：13022537
> 
> 赞同：3
> 
> 时间：2012-10-23T01:56:18.637
> 
> 标签：iis-7, reverse-proxy, sitefinity, scriptresource.axd

当我在反向代理层上运行我的网站时遇到问题。它将显示以下 javascript 错误。

```
=> Message: 'Sys.WebForms.PageRequestManager' is null or not an object

=> Message: Sys.ArgumentTypeException: Object of type 'Sys._Application' cannot be converted to type 'Sys._Application'.
Parameter name: instance

=> Message: 'Telerik' is undefined 
```

它们都指向“ScriptResource.axd”文件和默认文件（前端和后端）。

当我在应用层运行网站时（不使用代理直接访问），没有如上所示的错误。

是否需要任何配置才能启用反向代理服务器（ARR）？

使用 Sitefinity 3.6 和 IIS7

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:37:00.523

在服务器场中的缓存下，在查询字符串支持下拉列表中选择“包含查询字符串”。

# cloud-foundry - cloudfoundry 和 geronimo 应用程序

> ID：13022546
> 
> 赞同：0
> 
> 时间：2012-10-23T01:57:44.357
> 
> 标签：cloud-foundry, geronimo

我计划在 CloudFoundry 上部署基于 geronimo 的 java 应用程序。我阅读了 CloudFoundry 为每个应用程序分配一个端口的文档。Geronimo 应用程序具有用于应用程序、管理员和 jmx 监控的端口号。

有什么方法可以要求 cloudfoundry 为每个应用程序分配多个端口，并且我们可以在代码库的不同配置中使用这些端口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:00:52.837

首先仅供参考，如果您将应用程序部署为 Java Web 应用程序，后端中的 CloudFoundry 仅使用 Tomcat 作为应用程序服务器。因此，对于您的情况，您需要将其部署为带有您自己的 Geronimo 运行时的独立应用程序。[http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/](http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/)

CF 应用程序各有一个 IP 和一个端口，可通过环境变量 VCAP_APP_HOST 和 VCAP_APP_PORT 访问。没有办法明确分配。应用程序侦听的端口（分配的端口除外）将无法通过 CF 路由器访问。

如果您有兴趣，我的建议是为您想要收听的每个端口（Geronimo 功能）部署多个应用程序。这将为您提供基于 URL 的应用程序、管理员或 jmx 监控。

# linux - cmake中'ldd'命令的任何等价物？

> ID：13022552
> 
> 赞同：2
> 
> 时间：2012-10-23T01:58:09.837
> 
> 标签：linux, cmake

无论如何，cmake 中是否有类似“ldd”的操作，即，给定一个目标，获取其链接库，并将它们存储在一个列表中？

如果没有，有没有办法执行命令行“ldd”（我知道使用命令）并将输出存储到 cmake 变量？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:53:23.887

好吧，我几乎明白了

```
include(GetPrerequsites) 
```

并使用函数 GET_PREREQUISITES

看到这个：[http ://www.cmake.org/pipermail/cmake/2009-June/029975.html](http://www.cmake.org/pipermail/cmake/2009-June/029975.html)

# java - Firefox 的 Firebug 在 jQuery Ajax 响应中使用 JSON 给出“格式不正确”的错误；使用带有 JavaCryption 实现的 jCryption 插件

> ID：13022562
> 
> 赞同：0
> 
> 时间：2012-10-23T02:00:17.857
> 
> 标签：java, ajax, json, firefox, jcryption

我正在使用[jCryption](http://www.jcryption.org/)和[JavaCryption](http://jcryptionforjava.wordpress.com/)，这是 jCryption JavaScript 插件的服务器端实现。

Java 实现似乎存在问题，因为 FireFox 的萤火虫报告了从服务器返回给客户端的 JSON 的“格式不正确”错误。[因此，与使用 XMLHttpRequest 加载 JSON 文件时 Firefox 中](https://stackoverflow.com/questions/677902/not-well-formed-error-in-firefox-when-loading-json-file-with-xmlhttprequest)的线程“格式不正确”错误不同，这是来自响应对象，而不是请求对象。

我尝试将 .JSON、application/json 作为 MIMEtype 添加到我的 Web 服务器 IIS 7.5，但这没有帮助。然后我尝试了 .JSON、text/plain，但也没有帮助。

当它发送回客户端时，我是否必须编辑 Java 代码以强制应用程序/json？或者，我能做些什么来解决这个问题？

感谢您的任何帮助。

这是第一个导致“格式不正确”错误的原始输出：

```
HTTP/1.1 200 OK
Content-Length: 294
Server: Microsoft-IIS/7.5
X-Powered-By: Nothing
Date: Tue, 23 Oct 2012 02:10:24 GMT

{"e":"10001","n":"b3fbbe3d2e3599e840a117be08f72726d8ee643dada3805ab24b9a9150d123a7a0902ae45f2f2e194e5462c4f5c3b91cca91b48d1f07c6cd7fab629a331148f66516df05dfa0bd95cc9f477069e60fa54eab8a5586d08436717758d9706b90c884eded7260af1ce5ff70f507b9c5ddb019b6e1313a77f4eab3b2d04a09934d8d","maxdigits":"131"} 
```

这是第二个：

```
HTTP/1.1 200 OK
Content-Length: 200
Server: Microsoft-IIS/7.5
X-Powered-By: Nothing
Date: Tue, 23 Oct 2012 02:10:24 GMT

{"challenge":"zf6iI5D8hVDCmMVuHIFy71ikKxcqVzkLplMDKP6Hgz7EPv2STfYjcBlf6ep1wu5OMCCsPKf4dRECpVvr7yIK8kCm0I5c4xTXCkmnyyzBXeHgbvkzGWVmaLzxj5RYajdWLFkvN1waV41FhR+PtK1tOmGe8k57wSZ/yyZUAsvh7NaJf6THc9P9rQ=="} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:09:12.747

您需要查看实际响应中的内容。您需要查看响应内容类型标头当前所说的内容，以及响应正文包含的内容。Firebug 可以向您展示这两者。

响应正文很可能根本不是 JSON……而是关于请求的某些问题的 HTML 错误报告（如服务器所见）。

无论哪种方式，在找出导致问题的原因之前，您都无法正确解决问题。简单地假设它是内容类型问题不是一个合理的策略。

* * *

根据您发布的回复，问题很可能是由于没有`Content-Type`标题。如果此响应来自 Java，那么您可能确实需要修改 Java（或 JSP）以在响应中设置缺少的标头。

*   [在 jsp 文件中将 Content-Type 设置为 application/json](https://stackoverflow.com/questions/10595775/set-content-type-to-application-json-in-jsp-file)
*   [在 servlet 中设置 Content-type 标头](https://stackoverflow.com/a/5216230/139985)。

（如果无法更改 servlet 或 JSP 代码，还有其他方法可以做到这一点。）

# perl - 比较两个目录的常规文件差异

> ID：13022563
> 
> 赞同：2
> 
> 时间：2012-10-23T02:00:30.083
> 
> 标签：perl, file, directory, compare

需要比较两个目录，并检查两个目录中的每个文件是否有同名文件，如果出现同名，则检查文件是否具有相同的内容，如果是则打印>文件<。如果文件同名但内容不同 <file> 如果有一个文件不在目录2但在目录1 <<< file1，同样>>> file2对于目录2但不在目录1的文件.我一直遇到麻烦，当我测试文件是否名称相同时，我的代码甚至没有进行比较。

```
#!/usr/bin/perl -w 
use File::Basename;

@files1 = `/usr/bin/find $ARGV[0] -print`;
chop @files1;
@files2 = `/usr/bin/find $ARGV[1] -print`;
chop @files2;

here: 
for ($i=1; @files1 >= $i; $i++) {

    for ($x=1; @files2 >= $x; $x++) {

        $file1 = basename($files1[$i]); 
        $file2 = basename($files2[$x]); 

        if ($file1 eq $file2) {

            shift @files1;
            shift @files2;

            $result = `/usr/bin/diff -q $files1[$i] $files2[$x]`;
            chop $result;

            if ($result eq "Files $files1[$i] and $files2[$x] differ") { 

                print "< $file1 >\n";
                next here;
            } 
            else { 

                print "> $file1 <\n";
            }
        }
        else  { 

            if ( !-e "$files1[$i]/$file2") { print ">>> $file2\n";}
            unless ( -e "$files2[$x]/$file1") { print "<<< $file1\n";}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:26:52.940

尝试使用这个：

```
diff -aqr /dir1 /dir2 
```

或者 ：

```
#!/bin/bash

for f;
    for g; do
        [[ "$f" != "$g" ]] &&
            cmp &>/dev/null "$f" "$g" || echo "$f is different of $g"
    done
done 
```

**用这个**

```
./script dir1/* dir2/* 
```

# javascript - Javascript打开带有外部URL的新窗口（Django）

> ID：13022567
> 
> 赞同：0
> 
> 时间：2012-10-23T02:00:57.783
> 
> 标签：javascript, django, external-url

我有一些简单的代码行：

```
that.click(function(){
    window.open($('.linkBox input').val());       
}); 
```

假设我重定向到 google.com，每当打开一个新窗口时，URL 都是：“my/project/url/http://www.google.com”

基本上，无论输入什么 URL，它都会附加到我的项目 URL 的末尾。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:20:09.293

我认为问题可能出`http://`在 URL 中，试试这个代码

```
that.click(function(){        
        var url = $('.linkBox input').val();
        if (!/^https?:\/\//i.test(url)) {
            url = 'http://' + url;
        }
        window.open(url);
}); 
```

工作演示：http: [//jsfiddle.net/muthkum/BPBev/1/](http://jsfiddle.net/muthkum/BPBev/1/)

# python - Jython/Python - 水平翻转图片

> ID：13022569
> 
> 赞同：3
> 
> 时间：2012-10-23T02:01:23.187
> 
> 标签：python, jython, flip, jes

我正在尝试将图片“切成两半”并水平翻转两侧。请参阅下面的链接。

[http://imgur.com/a/FAksh](http://imgur.com/a/FAksh)

原图：

![在此处输入图像描述](../Images/88f8e7d571aafe3e9599d2ba37a5d4e1.png)

输出需要是什么：

![在此处输入图像描述](../Images/0f1fa2b78420b16324fb54c3f9087fdd.png)

我得到了什么

![在此处输入图像描述](../Images/6583f691ec4c840aac1b0d8ca9802358.png)

这就是我所拥有的，但它所做的只是水平翻转图片

```
def mirrorHorizontal(picture):
  mirrorPoint = getHeight(picture)/2
  height = getHeight(picture)
  for x in range(0, getWidth(picture)):
    for y in range(0, mirrorPoint):
      topPixel = getPixel(picture, x, y)
      bottomPixel = getPixel(picture, x, height - y - 1)
      color = getColor(topPixel)
      setColor(bottomPixel, color) 
```

那么如何水平翻转每一面，使其看起来像第二张照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:19:57.767

一种方法是定义一个水平翻转图像的一部分的函数：

```
def mirrorRowsHorizontal(picture, y_start, y_end):
    ''' Flip the rows from y_start to y_end in place. '''
    # WRITE ME!

def mirrorHorizontal(picture):
    h = getHeight(picture)
    mirrorRowsHorizontal(picture, 0, h/2)
    mirrorRowsHorizontal(picture, h/2, h) 
```

希望这能给你一个开始。

*提示*：您可能需要*交换*两个像素；为此，您需要使用临时变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T06:43:35.903

一年后，我想我们可以给出答案：

```
def mirrorRowsHorizontal(picture, y_start, y_end):
    width = getWidth(picture)

    for y in range(y_start/2, y_end/2):
        for x in range(0, width):
            sourcePixel = getPixel(picture, x, y_start/2 + y)
            targetPixel = getPixel(picture, x, y_start/2 + y_end - y - 1)
            color = getColor(sourcePixel)
            setColor(sourcePixel, getColor(targetPixel))
            setColor(targetPixel, color)

def mirrorHorizontal(picture):
    h = getHeight(picture)
    mirrorRowsHorizontal(picture, 0, h/2)
    mirrorRowsHorizontal(picture, h/2, h) 
```

取自[这里](https://stackoverflow.com/a/17129249/1715716)的垂直翻转。

带有 3 个条纹的示例：

```
mirrorRowsHorizontal(picture, 0, h/3)
mirrorRowsHorizontal(picture, h/3, 2*h/3)
mirrorRowsHorizontal(picture, 2*h/3, h) 
```

前 ：

![在此处输入图像描述](../Images/12c6ac5612757ac478574e09b5fa88e1.png)

后 ：

![在此处输入图像描述](../Images/f6f6176b420cfee76e2c70f58e26a849.png)

# apache-flex - Flex 移动项目不支持 mx:Canvas？

> ID：13022577
> 
> 赞同：1
> 
> 时间：2012-10-23T02:03:30.053
> 
> 标签：apache-flex, halo, flex-mx, flex-spark

在 Flash Builder 中，如果我新建了一个 Flex 移动项目，并粘贴以下代码：

```
<?xml version="1.0"?>
<!-- Simple example to demonstrate the Halo Canvas layout container. -->
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:Group/>
    <mx:Canvas/>
</s:Application> 
```

“Canvas”行无法编译。但是在 Flex 项目中是可以的。我的问题是，有没有办法在不修改 Flex Mobile Project 中的旧代码的情况下使用 Canvas 或其他光环控件？或者，有什么方法可以在 Flex Project 中使用 Native Extension？如果两者都不是，那将是一场噩梦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:37:40.787

> 我的问题是，有没有办法在不修改 Flex Mobile Project 中的旧代码的情况下使用 Canvas 或其他光环控件？

是的，您必须将 mx.swc 添加到移动项目的库路径中。它应该位于类似这样的地方：

```
[FrameworkRoot]\frameworks\libs\mx\mx.swc 
```

我不确定我会推荐它。因为 MX 组件未针对移动使用进行优化。我不清楚 Canvas 会为您提供哪些您无法从群组中获得的东西。

> 有什么方法可以在 Flex Project 中使用 Native Extension？

不; 本机扩展是一项 AIR 功能；您将无法在基于浏览器的项目中使用它们。

# php - PHP Cookie 用户系统 If 语句

> ID：13022579
> 
> 赞同：0
> 
> 时间：2012-10-23T02:03:37.883
> 
> 标签：php, mysql, cookies, session-cookies

我正在尝试让 php 根据此人是否使用 cookie 登录到我的网站来选择应该显示的链接。我尝试自己编写代码，但它不起作用。那么我将如何以正确的方式进行此操作这是我的代码：

```
<?php
if(isset($_COOKIE['maxgee_me_user'])) {
$username = $_COOKIE['maxgee_me_user']; 
$password = $_COOKIE['maxgee_me_password']; 
$check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());
while($info = mysql_fetch_array( $check ))   

    { 

//if the cookie has the wrong password, echo's login 

    if ($password != $_COOKIE['maxgee_me_password']) 

        {           ?> <a href="logout.php"><?php echo "Logout"; ?></a> &nbsp;&nbsp 
         <?php
    else {
    ?> <a href="loginpage.php"><?php echo "User Login";} ?></a> &nbsp;&nbsp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:08:10.630

您从未从查询中读取密码。你在顶部有这个：

```
$password = $_COOKIE['maxgee_me_password']; 
```

你正在将它与更远的地方进行比较：

```
if ($password != $_COOKIE['maxgee_me_password']) 
```

您可以通过将比较替换为以下内容来修复它：

```
if ($password != $info['password']) 
```

您还缺少一些花括号。`else`如果这不是脚本的结尾，您需要在代码的末尾和之前添加一个。通过格式化和上述修复：

```
<?php
if(isset($_COOKIE['maxgee_me_user'])) {
    $username = $_COOKIE['maxgee_me_user']; 
    $password = $_COOKIE['maxgee_me_password']; 
    $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());
    $info = mysql_fetch_array( $check );
    //if the cookie has the wrong password, echo's login 
    if ($password != $info['password']){ ?>
        <a href="logout.php">Logout</a> &nbsp;&nbsp;
    <?php }else{ ?>
        <a href="loginpage.php">User Login</a>&nbsp;&nbsp;
    <?php
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:25:20.890

```
<?php
    if(isset($_COOKIE["maxgee_user"])) {
        $username = $_COOKIE["maxgee_user"];
        $password = $_COOKIE["maxgee_password"];
        $q = mysql_query("SELECT password FROM users WHERE username = '".$username."' AND password = '".$password."'");
        if(mysql_count_rows($q) > 0){
          print("<a href='/logoutpage.php'>Logout</a>");
        }else{
          print("<a href='/loginpage.php'>Login</a>");
        }
     }else{
          print("<a href='/loginpage.php'>Login</a>");
     }
 ?> 
```

又快又脏。自从我做任何开发以来已经有好几年了。在 PHP 中，但我想我仍然记得要点。切记永远不要相信输入，包括保存在 cookie 中的输入，否则您将容易受到攻击。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:27:33.130

你的代码有很多错误。首先，在检查是否存在有效用户时，需要同时使用用户名和密码。假设您的表中也保存了密码。

```
 $check = mysql_query("SELECT * FROM users WHERE username = '$username' AND password='$password'") or die(mysql_error()); 
```

并使用 mysql_num_rows($check)>0 查看是否找到了有效用户。以下是一个完整的代码，但请注意这是你说你正在处理的不好的编码实践。

```
<?php
if(isset($_COOKIE['maxgee_me_user']))
{
    $username = $_COOKIE['maxgee_me_user']; 
    $password = $_COOKIE['maxgee_me_password']; 
    $check = mysql_query("SELECT * FROM users WHERE username = '$username' AND password='$password'") or die(mysql_error());
    if (mysql_num_rows($check)>0) 
    {

        ?>
        <a href="logout.php">Logout</a> &nbsp;&nbsp 
        <?php
    }
    else
    {
        ?>
        <a href="loginpage.php"><?php echo "User Login"; ?></a> &nbsp;&nbsp;
        <?php
    }
}
else
{
    ?>
    <a href="loginpage.php"><?php echo "User Login"; ?></a> &nbsp;&nbsp;
    <?php
}
?> 
```

# python - 使用 python 在网络上流式传输连续数据

> ID：13022580
> 
> 赞同：2
> 
> 时间：2012-10-23T02:03:50.663
> 
> 标签：python, streaming

我有一个不断输出数据的设备，我想将该数据发送到与生成数据相同的网络上的客户端，但我没有找到一个好的解决方案。这是我正在尝试的。

服务器：

```
import SocketServer
from subprocess import Popen,PIPE

class Handler(SocketServer.BaseRequestHandler):
    def handle(self):
        if not hasattr(self, 'Proc'):
            self.Proc = Popen('r.sh', stdout=PIPE)
        socket = self.request[1]
        socket.sendto(self.Proc.stdout.readline(),self.client_address)

if __name__ == "__main__":                         
    HOST, PORT = "192.168.1.1", 6001

    server = SocketServer.UDPServer((HOST, PORT), Handler)
    server.serve_forever() 
```

客户：

```
import socket
data = " ".join(sys.argv[1:])
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(data + "\n", ("192.168.1.1", 6001))
try:
    received = sock.recv(1024)
while True:
    print "Sent:     {}".format(data)
    print "Received: {}".format(received)
    sock.sendto('more' + "\n", ("192.168.1.1", 6001))
    received = sock.recv(1024)
except:
    print "No more messages" 
```

用于客户端的 arg[1] 是一个程序，它输出几分钟的数据行，我需要在创建数据时对其进行处理。问题似乎是每次客户端发送另一个请求时，都会创建一个新的Handler对象，所以我松了Proc。如何流式传输 Proc.stdout？

编辑：该设备是 Korebot2，因此由于空间原因，我对其他 python 库的访问权限有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:18:31.820

使用 UDP，您每次发送数据报时都会获得一个新的“连接”，这就是您注意到每次发送数据时都会创建一个新对象实例的原因。您可能在这里使用了错误的协议类型...... UDP 主要用于发送不同的“数据报”，或者当不需要更长的连接时。TCP 也称为“流”协议，通常用于没有固定端的数据。

还要记住，UDP 不是一个可靠的协议，如果在网络上使用它几乎可以保证你会丢失数据包。

# email - Nagios 不在电子邮件中发送图表

> ID：13022583
> 
> 赞同：2
> 
> 时间：2012-10-23T02:04:11.710
> 
> 标签：email, nagios, graphite

所以，我一直在尝试让 Nagios 与 Graphite 一起发送警报电子邮件，但这并不正常。我使用以下 URL 来设置所有内容：

[http://www.protocolostomy.com/2012/02/24/sending-alerts-with-graphite-graphs-from-nagios/](http://www.protocolostomy.com/2012/02/24/sending-alerts-with-graphite-graphs-from-nagios/)

sendgraph.py 单独使用正确的参数发送正确的电子邮件，并正确显示图表。但是，如果我使用 nagios 发送图表，它会发送正确的消息，但图表不会显示。我只得到一个文件名，当我试图打开它时会给我这样的消息：“它可能已损坏或使用了预览无法识别的文件格式。” 我不知道为什么。发送图表的所有工作都是由 sendgraph.py 完成的，它肯定有所有正确的参数，因为 URL 提供了来自 Graphite 的正确值，然后我收到了电子邮件（所以电子邮件是正确的），我得到了图表的描述和状态正确。

任何人都可以建议我摆脱这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T17:40:28.847

在 Nagios 的[宏](http://nagios.sourceforge.net/docs/nagioscore/3/en/macros.html)文档中，它指出：

“此外，为了安全起见，任何包含自定义变量的宏都会被剥离。”

在您的 nagios.cfg 文件中，尝试从该行中删除“&”：

```
illegal_macro_output_chars=`~$^&"|'<> 
```

# android - 字体大小更改后，Android TextView 未调整大小

> ID：13022584
> 
> 赞同：2
> 
> 时间：2012-10-23T02:04:22.817
> 
> 标签：android, textview, android-edittext

嗨，我正在尝试使用 TextView，它具有以下约束：

1.  它最多可以走 2 行，如果超过 2 行，它会在最后显示 '...'
2.  从字体大小 30 开始，我们首先尝试通过将字体大小从 30 减小到 12 来将所有内容放在一行中。这意味着如果我们可以在第一行中放置所有字体大小为 20 的内容，我们坚持使用字体大小 20
3.  如果我们不能用 12 号字体容纳所有内容，我们将保持 12 号，然后换行到下一行，所有内容都将保持 12 号

所以现在我有一个 EditText，它允许用户输入文本，并且用户输入的每个字符，TextView 将反映用户输入的内容，并根据上述规则更改字体大小。

```
 userEditView.addTextChangedListener(
       new TextWatcher() {
                 @Override public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    float fontSize = 30;
    userTextView.setTextSize(fontSize);
    int userTextViewWidth = userTextView.getWidth();
    int userTextViewContainerWidth = parentRelatievLayOutView.getWidth();//parentRelativeLayout is a RelativeLayout in xml

    // logic here => i want to know when to wrap a line, i should wrap when the textView width is same or greater than the parent container, in such case, we reduce the font size, and then get the new textView width, see if it can be fit in one line or not

      while (userTextViewWidth >= userTextViewContainerWidth) {
        fontSize -= 1;
        if (fontSize <= 12) {
          fontSize = 12;
          break;
        }
        userTextView.setTextSize(fontSize);

        //userTextView.append("\uFEFF"); // does not work
        //userTextView.invalidate(); // does not work
        userTextViewWidth = userTextView.getWidth();// *** this line never gets updated
      }

  }
  @Override public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    userTextView.setText(charSequence);
  }
  @Override public void afterTextChanged(Editable editable) {
  }
}); 
```

所以我的问题是`userTextViewWidth = userTextView.getWidth()`永远不会更新，即字体大小变小，宽度仍然相同......我想改变Android存在一个问题，其中TextView大小没有改变[Android：TextView高度在收缩后没有改变字体大小](https://stackoverflow.com/questions/9541196/androidtextview-height-doesnt-change-after-shrinking-the-font-size)，但我试过了，它提供的任何技术都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:53:28.177

您需要做的是测量您的 textView。

代替

```
userTextViewWidth = userTextView.getWidth(); 
```

利用

```
// find out how wide it 'wants' to be    
userTextView.measure(MeasureSpec.UNSPECIFIED, userTextView.getHeight()); 
userTextViewWidth = userTextView.getMeasuredWidth(); 
```

更多信息位于[http://developer.android.com/reference/android/view/View.html#Layout](http://developer.android.com/reference/android/view/View.html#Layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:12:03.077

设置`android:layoutWidth="wrap_content"`，文本视图将根据其中的文本长度缩放宽度大小。AFAIK，无法根据 textsize 自动调整 textview 的大小。

# math - 我应该如何开始学习人工智能所需的数学

> ID：13022587
> 
> 赞同：7
> 
> 时间：2012-10-23T02:04:35.780
> 
> 标签：math, artificial-intelligence, data-mining

我学过数学，但那是很久以前的事了。我已经做了 8 年的程序员，但是当我开始研究 AI 和数据挖掘的概念时，我发现很难理解这些理论。

现在我已经浪费了 2-3 年，我什么也没得到。我需要先了解学习 AI 和数据挖掘所需的数学概念。

我不知道从哪里开始。我应该从 AI 的角度开始推荐哪些书籍和教程。

我应该如何获得使用 AI 和数据挖掘概念的基本要求。

编辑：我从网上得到了这份清单

**矩阵代数：**大多数机器学习模型都表示为矩阵和向量。特征向量和奇异值分解等概念无处不在。

**贝叶斯统计：**概率、贝叶斯规则、常见分布（例如，beta、Dirichlet、Gaussian）等。

**多变量微积分**：大多数学习技术在其核心使用梯度和 Hessians 来拟合参数。（如果您想变得更高级，请研究数值优化。）

**信息论**：熵、KL 散度等。这里只是基础知识。

在有限的情况下，更高层次的数学是有用的。例如，要了解流形学习，您需要了解几何和拓扑的一些基本概念。偶尔会使用抽象代数（例如，参见“期望半环”以学习超图）。我会根据需要学习这些，但是如果您有机会尽早学习它们，那也无妨。

谁能推荐一些这方面的书

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:17:43.017

我学习数学的资源：[http ://www.khanacademy.org/](http://www.khanacademy.org/)

您将能够在所有数学领域找到很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T02:25:15.420

我同意@Lostdreamer 的观点，KhanAcademy.org 有很好的学习各种数学概念的材料。

对于机器学习的优秀在线入门课程，我强烈推荐 Coursera.org 上提供的机器学习课程。它由斯坦福大学教授 Andrew Ng 教授，您可以根据需要多次观看视频以了解这些概念。

练习和编程作业有助于将概念带回家。

我建议您在下次提供时注册它。这是课程注册页面的[链接。](http://www.coursera.org/course/ml)

这是课程中材料预览的[链接。](https://class.coursera.org/ml/lecture/preview/index)

该课程包含线性代数的基本回顾，包括帮助我回顾这些材料的基本矩阵概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:30:20.623

我强烈推荐@HeatfanJohn 的课程，我已经做了，没有任何AI知识，结果还不错，老师很棒，课程非常清晰，试试吧！

此外，我与其他课程同时制作了其他 AI 课程。这个更笼统，你会学到一点关于人工智能的知识，而且你应该没有任何以前的知识。如果你不习惯做数学，这个比 ML 更容易（在 ML 中你需要在 matlab 中做练习，这有时会有点棘手），但我发现它对于一般概述更有趣。我强烈建议你同时做 [https://www.ai-class.com/](http://www.ai-class.com/)

一个你会沉迷于人工智能的人（如果你参加这两门课程，你肯定会的！）我推荐 [Udacity](http://www.udacity.com/)，这是一所令人惊叹的免费计算机科学在线“大学”。世界上最好的老师免费教你很棒的东西。如果这还不够棒，我会告诉你 AI 班的老师制作了这个网页。一个是谷歌的研究主管（Peter Norvig），另一个是制造第一辆自动驾驶汽车的人（Sebastian Thrun）。优秀的人

# objective-c - 读入存储在核心数据中的 .h 文件的内容

> ID：13022591
> 
> 赞同：1
> 
> 时间：2012-10-23T02:04:52.517
> 
> 标签：objective-c, ios, core-data, header-files

前段时间我开发了一个基于 Vuforia 平台的增强现实应用。我现在正在修改和扩展它，通过使用与 Web 服务器同步的核心数据数据库来包含更多模型。

目前，该应用程序使用存储在应用程序包中的 .h 文件（拖入 xcode）来存储模型数据（存储在应用程序包中的头文件（例如 Rug.h）的屏幕截图如下所示）。.h 文件定义了应用程序使用的 float 和 unsigned int 数组。我在代码中使用`#import "Rug.h"`语句来访问文件中的数据，然后可以使用数组来设置模型对象（例如`3DObject.vertices = rugVerts;`.

![存储在应用程序包中的头文件的屏幕截图。](../Images/ac61e6eccf8a50ce5fdf6f7ed8a8e890.png)

而不是这样做，我需要将 .h 文件存储在核心数据中（现在会有很多 .h 文件）。从核心数据中读取文件并获取信息的最佳方式是什么？我是否必须将整个文件作为字符串读取，取出我想要的数字范围，然后转换为数字以在我的应用程序中使用？听起来很痛苦。

提前致谢！

# sql - MSSQL/SQL 查询条件错误

> ID：13022595
> 
> 赞同：0
> 
> 时间：2012-10-23T02:05:38.877
> 
> 标签：sql, grails-2.0, grails-controller

我的 grails 控制器上有以下 2 个 SQL 查询：

```
def query1 = sql.rows("select abc from table_one where cond = 1") 
```

query1 的返回结果给了我`[{abc=5}]`

```
def query2 = sql.rows("select req from table_two where abc = " +query1) 
```

我在尝试运行 query2 时出错，我不知道为什么。

列名`abc`同时存在于`table_one`和`table_two`中，我试图从中获取值`abc`，`table_one`借此`cond = 1`，并将其分配给变量 query1。

对于 query2，我试图获取`req`from`table_two`的值，其中`abc`in`table_two`的值等于 query1 的值。

有什么帮助吗？

来自查询 2 的错误消息：

```
Message:Unclosed quotation mark after the character string '[abc:5]'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:08:13.580

为什么不使用以下查询：

```
select  table_two.req
  from  table_one,
        table_two
 where  table_one.cond = 1
   and  table_one.abc  = table_two.abc 
```

像这样连接表允许您在一个查询中完成，这通常更有效且更正确（即，数据库表不会在两个查询之间更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:11:50.037

你加入表格使用`INNER JOIN`

```
select  b.req
from    table_one a
        INNER JOIN table_two b
            ON a.abc = b.abc
where   a.cond = 1 
```

以下语法是`ANSI SQL-92`.

# android - 所有异步任务完成后如何做某事？

> ID：13022597
> 
> 赞同：2
> 
> 时间：2012-10-23T02:06:18.037
> 
> 标签：android, asynchronous

我`AsyncTask`用来下载一些文件，并想在所有任务完成后做一些事情。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:21:42.533

跟踪您正在运行的异步任务数量，并在总数为 0 时执行某些操作。

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    public int numOfTasks = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void addTask(){
        numOfTasks++;
    }

    public void removeTask(){
        numOfTasks--;
    }

    public void allTasksComplete(){

        if(numOfTasks ==0){
            //do what you want to do if all tasks are finished
        }

    }

    class RequestTask extends AsyncTask<String, String, String>{

        @Override
        protected String doInBackground(String... uri) {

            String responseString = "";
            return responseString;
        }

         @Override
            protected void onPreExecute() 
            {
                    addTask(); // adds one to task count.
                    super.onPreExecute();

            }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            removeTask(); // subtracts one from task count.
            allTasksComplete(); // checks to see if all tasks are done...  task count is 0
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:09:20.540

AsyncTask 有一个回调方法名`onPostExecute`。后台任务完成后执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:21:42.077

当 Asyn 任务完成后台处理时，您可以使用 onPostExecute() 回调，在典型的场景中，您会通知 UI（列表适配器或 UI 活动）文件下载完成并且 UI 可以刷新或填充数据。

onPreExecute()，在任务执行后立即在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

**请看一下这个 Android Ref 示例：**

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

**示例 2：**

[https://github.com/ashutoshchauhan13/TwitterFeedApp/blob/master/TwitterFeedApp/src/com/sixthsense/twitterfeed/ui/TwitterFeedActivity.java](https://github.com/ashutoshchauhan13/TwitterFeedApp/blob/master/TwitterFeedApp/src/com/sixthsense/twitterfeed/ui/TwitterFeedActivity.java)

# objective-c - 适用于 iOS 的国家和国家/地区拨号代码列表

> ID：13022601
> 
> 赞同：13
> 
> 时间：2012-10-23T02:06:46.970
> 
> 标签：objective-c, ios

我正在寻找可能在 plist 文件或 Objective-C 字典中可用的国家列表及其拨号代码。

我知道 PHP 中有一些这样的列表： [https](https://gist.github.com/260468) ://gist.github.com/260468 如果涉及到它，我会手动移植它，但这很容易出错。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T03:06:11.327

[很简单](http://pastebin.com/adNADRzU)。在vim中打开PHP版本，输入一条命令，清理标签和分隔符。

```
:%s/.*= \='\(.*\) (\(+\=.*\))';.*/@"\1" : @"\2", 
```

这就是为什么每个人都应该学习vim。

（新的对象文字语法 - 需要 XCode 4.5/clang 4.1）。

* * *

转换后的列表，以防止链接腐烂：

```
// Country code
NSDictionary *codes = @{
@"Canada"                                       : @"+1",
@"China"                                        : @"+86",
@"France"                                       : @"+33",
@"Germany"                                      : @"+49",
@"India"                                        : @"+91",
@"Japan"                                        : @"+81",
@"Pakistan"                                     : @"+92",
@"United Kingdom"                               : @"+44",
@"United States"                                : @"+1",
@"Abkhazia"                                     : @"+7 840",
@"Abkhazia"                                     : @"+7 940",
@"Afghanistan"                                  : @"+93",
@"Albania"                                      : @"+355",
@"Algeria"                                      : @"+213",
@"American Samoa"                               : @"+1 684",
@"Andorra"                                      : @"+376",
@"Angola"                                       : @"+244",
@"Anguilla"                                     : @"+1 264",
@"Antigua and Barbuda"                          : @"+1 268",
@"Argentina"                                    : @"+54",
@"Armenia"                                      : @"+374",
@"Aruba"                                        : @"+297",
@"Ascension"                                    : @"+247",
@"Australia"                                    : @"+61",
@"Australian External Territories"              : @"+672",
@"Austria"                                      : @"+43",
@"Azerbaijan"                                   : @"+994",
@"Bahamas"                                      : @"+1 242",
@"Bahrain"                                      : @"+973",
@"Bangladesh"                                   : @"+880",
@"Barbados"                                     : @"+1 246",
@"Barbuda"                                      : @"+1 268",
@"Belarus"                                      : @"+375",
@"Belgium"                                      : @"+32",
@"Belize"                                       : @"+501",
@"Benin"                                        : @"+229",
@"Bermuda"                                      : @"+1 441",
@"Bhutan"                                       : @"+975",
@"Bolivia"                                      : @"+591",
@"Bosnia and Herzegovina"                       : @"+387",
@"Botswana"                                     : @"+267",
@"Brazil"                                       : @"+55",
@"British Indian Ocean Territory"               : @"+246",
@"British Virgin Islands"                       : @"+1 284",
@"Brunei"                                       : @"+673",
@"Bulgaria"                                     : @"+359",
@"Burkina Faso"                                 : @"+226",
@"Burundi"                                      : @"+257",
@"Cambodia"                                     : @"+855",
@"Cameroon"                                     : @"+237",
@"Canada"                                       : @"+1",
@"Cape Verde"                                   : @"+238",
@"Cayman Islands"                               : @"+ 345",
@"Central African Republic"                     : @"+236",
@"Chad"                                         : @"+235",
@"Chile"                                        : @"+56",
@"China"                                        : @"+86",
@"Christmas Island"                             : @"+61",
@"Cocos-Keeling Islands"                        : @"+61",
@"Colombia"                                     : @"+57",
@"Comoros"                                      : @"+269",
@"Congo"                                        : @"+242",
@"Congo, Dem. Rep. of (Zaire)"                  : @"+243",
@"Cook Islands"                                 : @"+682",
@"Costa Rica"                                   : @"+506",
@"Ivory Coast"                                  : @"+225",
@"Croatia"                                      : @"+385",
@"Cuba"                                         : @"+53",
@"Curacao"                                      : @"+599",
@"Cyprus"                                       : @"+537",
@"Czech Republic"                               : @"+420",
@"Denmark"                                      : @"+45",
@"Diego Garcia"                                 : @"+246",
@"Djibouti"                                     : @"+253",
@"Dominica"                                     : @"+1 767",
@"Dominican Republic"                           : @"+1 809",
@"Dominican Republic"                           : @"+1 829",
@"Dominican Republic"                           : @"+1 849",
@"East Timor"                                   : @"+670",
@"Easter Island"                                : @"+56",
@"Ecuador"                                      : @"+593",
@"Egypt"                                        : @"+20",
@"El Salvador"                                  : @"+503",
@"Equatorial Guinea"                            : @"+240",
@"Eritrea"                                      : @"+291",
@"Estonia"                                      : @"+372",
@"Ethiopia"                                     : @"+251",
@"Falkland Islands"                             : @"+500",
@"Faroe Islands"                                : @"+298",
@"Fiji"                                         : @"+679",
@"Finland"                                      : @"+358",
@"France"                                       : @"+33",
@"French Antilles"                              : @"+596",
@"French Guiana"                                : @"+594",
@"French Polynesia"                             : @"+689",
@"Gabon"                                        : @"+241",
@"Gambia"                                       : @"+220",
@"Georgia"                                      : @"+995",
@"Germany"                                      : @"+49",
@"Ghana"                                        : @"+233",
@"Gibraltar"                                    : @"+350",
@"Greece"                                       : @"+30",
@"Greenland"                                    : @"+299",
@"Grenada"                                      : @"+1 473",
@"Guadeloupe"                                   : @"+590",
@"Guam"                                         : @"+1 671",
@"Guatemala"                                    : @"+502",
@"Guinea"                                       : @"+224",
@"Guinea-Bissau"                                : @"+245",
@"Guyana"                                       : @"+595",
@"Haiti"                                        : @"+509",
@"Honduras"                                     : @"+504",
@"Hong Kong SAR China"                          : @"+852",
@"Hungary"                                      : @"+36",
@"Iceland"                                      : @"+354",
@"India"                                        : @"+91",
@"Indonesia"                                    : @"+62",
@"Iran"                                         : @"+98",
@"Iraq"                                         : @"+964",
@"Ireland"                                      : @"+353",
@"Israel"                                       : @"+972",
@"Italy"                                        : @"+39",
@"Jamaica"                                      : @"+1 876",
@"Japan"                                        : @"+81",
@"Jordan"                                       : @"+962",
@"Kazakhstan"                                   : @"+7 7",
@"Kenya"                                        : @"+254",
@"Kiribati"                                     : @"+686",
@"North Korea"                                  : @"+850",
@"South Korea"                                  : @"+82",
@"Kuwait"                                       : @"+965",
@"Kyrgyzstan"                                   : @"+996",
@"Laos"                                         : @"+856",
@"Latvia"                                       : @"+371",
@"Lebanon"                                      : @"+961",
@"Lesotho"                                      : @"+266",
@"Liberia"                                      : @"+231",
@"Libya"                                        : @"+218",
@"Liechtenstein"                                : @"+423",
@"Lithuania"                                    : @"+370",
@"Luxembourg"                                   : @"+352",
@"Macau SAR China"                              : @"+853",
@"Macedonia"                                    : @"+389",
@"Madagascar"                                   : @"+261",
@"Malawi"                                       : @"+265",
@"Malaysia"                                     : @"+60",
@"Maldives"                                     : @"+960",
@"Mali"                                         : @"+223",
@"Malta"                                        : @"+356",
@"Marshall Islands"                             : @"+692",
@"Martinique"                                   : @"+596",
@"Mauritania"                                   : @"+222",
@"Mauritius"                                    : @"+230",
@"Mayotte"                                      : @"+262",
@"Mexico"                                       : @"+52",
@"Micronesia"                                   : @"+691",
@"Midway Island"                                : @"+1 808",
@"Micronesia"                                   : @"+691",
@"Moldova"                                      : @"+373",
@"Monaco"                                       : @"+377",
@"Mongolia"                                     : @"+976",
@"Montenegro"                                   : @"+382",
@"Montserrat"                                   : @"+1664",
@"Morocco"                                      : @"+212",
@"Myanmar"                                      : @"+95",
@"Namibia"                                      : @"+264",
@"Nauru"                                        : @"+674",
@"Nepal"                                        : @"+977",
@"Netherlands"                                  : @"+31",
@"Netherlands Antilles"                         : @"+599",
@"Nevis"                                        : @"+1 869",
@"New Caledonia"                                : @"+687",
@"New Zealand"                                  : @"+64",
@"Nicaragua"                                    : @"+505",
@"Niger"                                        : @"+227",
@"Nigeria"                                      : @"+234",
@"Niue"                                         : @"+683",
@"Norfolk Island"                               : @"+672",
@"Northern Mariana Islands"                     : @"+1 670",
@"Norway"                                       : @"+47",
@"Oman"                                         : @"+968",
@"Pakistan"                                     : @"+92",
@"Palau"                                        : @"+680",
@"Palestinian Territory"                        : @"+970",
@"Panama"                                       : @"+507",
@"Papua New Guinea"                             : @"+675",
@"Paraguay"                                     : @"+595",
@"Peru"                                         : @"+51",
@"Philippines"                                  : @"+63",
@"Poland"                                       : @"+48",
@"Portugal"                                     : @"+351",
@"Puerto Rico"                                  : @"+1 787",
@"Puerto Rico"                                  : @"+1 939",
@"Qatar"                                        : @"+974",
@"Reunion"                                      : @"+262",
@"Romania"                                      : @"+40",
@"Russia"                                       : @"+7",
@"Rwanda"                                       : @"+250",
@"Samoa"                                        : @"+685",
@"San Marino"                                   : @"+378",
@"Saudi Arabia"                                 : @"+966",
@"Senegal"                                      : @"+221",
@"Serbia"                                       : @"+381",
@"Seychelles"                                   : @"+248",
@"Sierra Leone"                                 : @"+232",
@"Singapore"                                    : @"+65",
@"Slovakia"                                     : @"+421",
@"Slovenia"                                     : @"+386",
@"Solomon Islands"                              : @"+677",
@"South Africa"                                 : @"+27",
@"South Georgia and the South Sandwich Islands" : @"+500",
@"Spain"                                        : @"+34",
@"Sri Lanka"                                    : @"+94",
@"Sudan"                                        : @"+249",
@"Suriname"                                     : @"+597",
@"Swaziland"                                    : @"+268",
@"Sweden"                                       : @"+46",
@"Switzerland"                                  : @"+41",
@"Syria"                                        : @"+963",
@"Taiwan"                                       : @"+886",
@"Tajikistan"                                   : @"+992",
@"Tanzania"                                     : @"+255",
@"Thailand"                                     : @"+66",
@"Timor Leste"                                  : @"+670",
@"Togo"                                         : @"+228",
@"Tokelau"                                      : @"+690",
@"Tonga"                                        : @"+676",
@"Trinidad and Tobago"                          : @"+1 868",
@"Tunisia"                                      : @"+216",
@"Turkey"                                       : @"+90",
@"Turkmenistan"                                 : @"+993",
@"Turks and Caicos Islands"                     : @"+1 649",
@"Tuvalu"                                       : @"+688",
@"Uganda"                                       : @"+256",
@"Ukraine"                                      : @"+380",
@"United Arab Emirates"                         : @"+971",
@"United Kingdom"                               : @"+44",
@"United States"                                : @"+1",
@"Uruguay"                                      : @"+598",
@"U.S. Virgin Islands"                          : @"+1 340",
@"Uzbekistan"                                   : @"+998",
@"Vanuatu"                                      : @"+678",
@"Venezuela"                                    : @"+58",
@"Vietnam"                                      : @"+84",
@"Wake Island"                                  : @"+1 808",
@"Wallis and Futuna"                            : @"+681",
@"Yemen"                                        : @"+967",
@"Zambia"                                       : @"+260",
@"Zanzibar"                                     : @"+255",
@"Zimbabwe"                                     : @"+263"
}; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-23T19:08:27.593

```
NSDictionary *dictCodes = [NSDictionary dictionaryWithObjectsAndKeys:
@"93",@"AF",@"355",@"AL",@"213",@"DZ",@"1",@"AS",
@"376",@"AD",@"244",@"AO",@"1",@"AI",@"1",@"AG",
@"54",@"AR",@"374",@"AM",@"297",@"AW",@"61",@"AU",
@"43",@"AT",@"994",@"AZ",@"1",@"BS",@"973",@"BH",
@"880",@"BD",@"1",@"BB",@"375",@"BY",@"32",@"BE",
@"501",@"BZ",@"229",@"BJ",@"1",@"BM",@"975",@"BT",
@"387",@"BA",@"267",@"BW",@"55",@"BR",@"246",@"IO",
@"359",@"BG",@"226",@"BF",@"257",@"BI",@"855",@"KH",
@"237",@"CM",@"1",@"CA",@"238",@"CV",@"345",@"KY",
@"236",@"CF",@"235",@"TD",@"56",@"CL",@"86",@"CN",
@"61",@"CX",@"57",@"CO",@"269",@"KM",@"242",@"CG",
@"682",@"CK",@"506",@"CR",@"385",@"HR",@"53",@"CU",
@"537",@"CY",@"420",@"CZ",@"45",@"DK",@"253",@"DJ",
@"1",@"DM",@"1",@"DO",@"593",@"EC",@"20",@"EG",
@"503",@"SV",@"240",@"GQ",@"291",@"ER",@"372",@"EE",
@"251",@"ET",@"298",@"FO",@"679",@"FJ",@"358",@"FI",
@"33",@"FR",@"594",@"GF",@"689",@"PF",@"241",@"GA",
@"220",@"GM",@"995",@"GE",@"49",@"DE",@"233",@"GH",
@"350",@"GI",@"30",@"GR",@"299",@"GL",@"1",@"GD",
@"590",@"GP",@"1",@"GU",@"502",@"GT",@"224",@"GN",
@"245",@"GW",@"595",@"GY",@"509",@"HT",@"504",@"HN",
@"36",@"HU",@"354",@"IS",@"91",@"IN",@"62",@"ID",
@"964",@"IQ",@"353",@"IE",@"972",@"IL",@"39",@"IT",
@"1",@"JM",@"81",@"JP",@"962",@"JO",@"77",@"KZ",
@"254",@"KE",@"686",@"KI",@"965",@"KW",@"996",@"KG",
@"371",@"LV",@"961",@"LB",@"266",@"LS",@"231",@"LR",
@"423",@"LI",@"370",@"LT",@"352",@"LU",@"261",@"MG",
@"265",@"MW",@"60",@"MY",@"960",@"MV",@"223",@"ML",
@"356",@"MT",@"692",@"MH",@"596",@"MQ",@"222",@"MR",
@"230",@"MU",@"262",@"YT",@"52",@"MX",@"377",@"MC",
@"976",@"MN",@"382",@"ME",@"1",@"MS",@"212",@"MA",
@"95",@"MM",@"264",@"NA",@"674",@"NR",@"977",@"NP",
@"31",@"NL",@"599",@"AN",@"687",@"NC",@"64",@"NZ",
@"505",@"NI",@"227",@"NE",@"234",@"NG",@"683",@"NU",
@"672",@"NF",@"1",@"MP",@"47",@"NO",@"968",@"OM",
@"92",@"PK",@"680",@"PW",@"507",@"PA",@"675",@"PG",
@"595",@"PY",@"51",@"PE",@"63",@"PH",@"48",@"PL",
@"351",@"PT",@"1",@"PR",@"974",@"QA",@"40",@"RO",
@"250",@"RW",@"685",@"WS",@"378",@"SM",@"966",@"SA",
@"221",@"SN",@"381",@"RS",@"248",@"SC",@"232",@"SL",
@"65",@"SG",@"421",@"SK",@"386",@"SI",@"677",@"SB",
@"27",@"ZA",@"500",@"GS",@"34",@"ES",@"94",@"LK",
@"249",@"SD",@"597",@"SR",@"268",@"SZ",@"46",@"SE",
@"41",@"CH",@"992",@"TJ",@"66",@"TH",@"228",@"TG",
@"690",@"TK",@"676",@"TO",@"1",@"TT",@"216",@"TN",
@"90",@"TR",@"993",@"TM",@"1",@"TC",@"688",@"TV",
@"256",@"UG",@"380",@"UA",@"971",@"AE",@"44",@"GB",
@"1",@"US",@"598",@"UY",@"998",@"UZ",@"678",@"VU",
@"681",@"WF",@"967",@"YE",@"260",@"ZM",@"263",@"ZW",
@"591",@"BO",@"673",@"BN",@"61",@"CC",@"243",@"CD",
@"225",@"CI",@"500",@"FK",@"44",@"GG",@"379",@"VA",
@"852",@"HK",@"98",@"IR",@"44",@"IM",@"44",@"JE",
@"850",@"KP",@"82",@"KR",@"856",@"LA",@"218",@"LY",
@"853",@"MO",@"389",@"MK",@"691",@"FM",@"373",@"MD",
@"258",@"MZ",@"970",@"PS",@"872",@"PN",@"262",@"RE",
@"7",@"RU",@"590",@"BL",@"290",@"SH",@"1",@"KN",
@"1",@"LC",@"590",@"MF",@"508",@"PM",@"1",@"VC",
@"239",@"ST",@"252",@"SO",@"47",@"SJ",@"963",@"SY",
@"886",@"TW",@"255",@"TZ",@"670",@"TL",@"58",@"VE",
@"84",@"VN",@"1",@"VG",@"1",@"VI",@"672",@"AQ",
@"358",@"AX",@"47",@"BV",@"599",@"BQ",@"599",@"CW",
@"689",@"TF",@"1",@"SX",@"211",@"SS"​,@"212",@"EH",
@"972",@"IL", nil]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-27T21:42:46.733

感谢 AlBeebe，我用它来交换它，将国家代码转换为 Swift Dictionary 声明中的拨号前缀。

```
let prefixCodes = ["AF": "93", "AE": "971", "AL": "355", "AN": "599", "AS":"1", "AD": "376", "AO": "244", "AI": "1", "AG":"1", "AR": "54","AM": "374", "AW": "297", "AU":"61", "AT": "43","AZ": "994", "BS": "1", "BH":"973", "BF": "226","BI": "257", "BD": "880", "BB": "1", "BY": "375", "BE":"32","BZ": "501", "BJ": "229", "BM": "1", "BT":"975", "BA": "387", "BW": "267", "BR": "55", "BG": "359", "BO": "591", "BL": "590", "BN": "673", "CC": "61", "CD":"243","CI": "225", "KH":"855", "CM": "237", "CA": "1", "CV": "238", "KY":"345", "CF":"236", "CH": "41", "CL": "56", "CN":"86","CX": "61", "CO": "57", "KM": "269", "CG":"242", "CK": "682", "CR": "506", "CU":"53", "CY":"537","CZ": "420", "DE": "49", "DK": "45", "DJ":"253", "DM": "1", "DO": "1", "DZ": "213", "EC": "593", "EG":"20", "ER": "291", "EE":"372","ES": "34", "ET": "251", "FM": "691", "FK": "500", "FO": "298", "FJ": "679", "FI":"358", "FR": "33", "GB":"44", "GF": "594", "GA":"241", "GS": "500", "GM":"220", "GE":"995","GH":"233", "GI": "350", "GQ": "240", "GR": "30", "GG": "44", "GL": "299", "GD":"1", "GP": "590", "GU": "1", "GT": "502", "GN":"224","GW": "245", "GY": "595", "HT": "509", "HR": "385", "HN":"504", "HU": "36", "HK": "852", "IR": "98", "IM": "44", "IL": "972", "IO":"246", "IS": "354", "IN": "91", "ID":"62", "IQ":"964", "IE": "353","IT":"39", "JM":"1", "JP": "81", "JO": "962", "JE":"44", "KP": "850", "KR": "82","KZ":"77", "KE": "254", "KI": "686", "KW": "965", "KG":"996","KN":"1", "LC": "1", "LV": "371", "LB": "961", "LK":"94", "LS": "266", "LR":"231", "LI": "423", "LT": "370", "LU": "352", "LA": "856", "LY":"218", "MO": "853", "MK": "389", "MG":"261", "MW": "265", "MY": "60","MV": "960", "ML":"223", "MT": "356", "MH": "692", "MQ": "596", "MR":"222", "MU": "230", "MX": "52","MC": "377", "MN": "976", "ME": "382", "MP": "1", "MS": "1", "MA":"212", "MM": "95", "MF": "590", "MD":"373", "MZ": "258", "NA":"264", "NR":"674", "NP":"977", "NL": "31","NC": "687", "NZ":"64", "NI": "505", "NE": "227", "NG": "234", "NU":"683", "NF": "672", "NO": "47","OM": "968", "PK": "92", "PM": "508", "PW": "680", "PF": "689", "PA": "507", "PG":"675", "PY": "595", "PE": "51", "PH": "63", "PL":"48", "PN": "872","PT": "351", "PR": "1","PS": "970", "QA": "974", "RO":"40", "RE":"262", "RS": "381", "RU": "7", "RW": "250", "SM": "378", "SA":"966", "SN": "221", "SC": "248", "SL":"232","SG": "65", "SK": "421", "SI": "386", "SB":"677", "SH": "290", "SD": "249", "SR": "597","SZ": "268", "SE":"46", "SV": "503", "ST": "239","SO": "252", "SJ": "47", "SY":"963", "TW": "886", "TZ": "255", "TL": "670", "TD": "235", "TJ": "992", "TH": "66", "TG":"228", "TK": "690", "TO": "676", "TT": "1", "TN":"216","TR": "90", "TM": "993", "TC": "1", "TV":"688", "UG": "256", "UA": "380", "US": "1", "UY": "598","UZ": "998", "VA":"379", "VE":"58", "VN": "84", "VG": "1", "VI": "1","VC":"1", "VU":"678", "WS": "685", "WF": "681", "YE": "967", "YT": "262","ZA": "27" , "ZM": "260", "ZW":"263"] 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-29T22:44:46.377

我为此列表生成了 json 文件：

```
{
  "countries": [
    {
      "code": "+7 840",
      "name": "Abkhazia"
    },
    {
      "code": "+93",
      "name": "Afghanistan"
    },
    {
      "code": "+355",
      "name": "Albania"
    },
    {
      "code": "+213",
      "name": "Algeria"
    },
    {
      "code": "+1 684",
      "name": "American Samoa"
    },
    {
      "code": "+376",
      "name": "Andorra"
    },
    {
      "code": "+244",
      "name": "Angola"
    },
    {
      "code": "+1 264",
      "name": "Anguilla"
    },
    {
      "code": "+1 268",
      "name": "Antigua and Barbuda"
    },
    {
      "code": "+54",
      "name": "Argentina"
    },
    {
      "code": "+374",
      "name": "Armenia"
    },
    {
      "code": "+297",
      "name": "Aruba"
    },
    {
      "code": "+247",
      "name": "Ascension"
    },
    {
      "code": "+61",
      "name": "Australia"
    },
    {
      "code": "+672",
      "name": "Australian External Territories"
    },
    {
      "code": "+43",
      "name": "Austria"
    },
    {
      "code": "+994",
      "name": "Azerbaijan"
    },
    {
      "code": "+1 242",
      "name": "Bahamas"
    },
    {
      "code": "+973",
      "name": "Bahrain"
    },
    {
      "code": "+880",
      "name": "Bangladesh"
    },
    {
      "code": "+1 246",
      "name": "Barbados"
    },
    {
      "code": "+1 268",
      "name": "Barbuda"
    },
    {
      "code": "+375",
      "name": "Belarus"
    },
    {
      "code": "+32",
      "name": "Belgium"
    },
    {
      "code": "+501",
      "name": "Belize"
    },
    {
      "code": "+229",
      "name": "Benin"
    },
    {
      "code": "+1 441",
      "name": "Bermuda"
    },
    {
      "code": "+975",
      "name": "Bhutan"
    },
    {
      "code": "+591",
      "name": "Bolivia"
    },
    {
      "code": "+387",
      "name": "Bosnia and Herzegovina"
    },
    {
      "code": "+267",
      "name": "Botswana"
    },
    {
      "code": "+55",
      "name": "Brazil"
    },
    {
      "code": "+246",
      "name": "British Indian Ocean Territory"
    },
    {
      "code": "+1 284",
      "name": "British Virgin Islands"
    },
    {
      "code": "+673",
      "name": "Brunei"
    },
    {
      "code": "+359",
      "name": "Bulgaria"
    },
    {
      "code": "+226",
      "name": "Burkina Faso"
    },
    {
      "code": "+257",
      "name": "Burundi"
    },
    {
      "code": "+855",
      "name": "Cambodia"
    },
    {
      "code": "+237",
      "name": "Cameroon"
    },
    {
      "code": "+1",
      "name": "Canada"
    },
    {
      "code": "+238",
      "name": "Cape Verde"
    },
    {
      "code": "+ 345",
      "name": "Cayman Islands"
    },
    {
      "code": "+236",
      "name": "Central African Republic"
    },
    {
      "code": "+235",
      "name": "Chad"
    },
    {
      "code": "+56",
      "name": "Chile"
    },
    {
      "code": "+86",
      "name": "China"
    },
    {
      "code": "+61",
      "name": "Christmas Island"
    },
    {
      "code": "+61",
      "name": "Cocos-Keeling Islands"
    },
    {
      "code": "+57",
      "name": "Colombia"
    },
    {
      "code": "+269",
      "name": "Comoros"
    },
    {
      "code": "+242",
      "name": "Congo"
    },
    {
      "code": "+243",
      "name": "Congo, Dem. Rep. of (Zaire)"
    },
    {
      "code": "+682",
      "name": "Cook Islands"
    },
    {
      "code": "+506",
      "name": "Costa Rica"
    },
    {
      "code": "+385",
      "name": "Croatia"
    },
    {
      "code": "+53",
      "name": "Cuba"
    },
    {
      "code": "+599",
      "name": "Curacao"
    },
    {
      "code": "+537",
      "name": "Cyprus"
    },
    {
      "code": "+420",
      "name": "Czech Republic"
    },
    {
      "code": "+45",
      "name": "Denmark"
    },
    {
      "code": "+246",
      "name": "Diego Garcia"
    },
    {
      "code": "+253",
      "name": "Djibouti"
    },
    {
      "code": "+1 767",
      "name": "Dominica"
    },
    {
      "code": "+1 809",
      "name": "Dominican Republic"
    },
    {
      "code": "+670",
      "name": "East Timor"
    },
    {
      "code": "+56",
      "name": "Easter Island"
    },
    {
      "code": "+593",
      "name": "Ecuador"
    },
    {
      "code": "+20",
      "name": "Egypt"
    },
    {
      "code": "+503",
      "name": "El Salvador"
    },
    {
      "code": "+240",
      "name": "Equatorial Guinea"
    },
    {
      "code": "+291",
      "name": "Eritrea"
    },
    {
      "code": "+372",
      "name": "Estonia"
    },
    {
      "code": "+251",
      "name": "Ethiopia"
    },
    {
      "code": "+500",
      "name": "Falkland Islands"
    },
    {
      "code": "+298",
      "name": "Faroe Islands"
    },
    {
      "code": "+679",
      "name": "Fiji"
    },
    {
      "code": "+358",
      "name": "Finland"
    },
    {
      "code": "+33",
      "name": "France"
    },
    {
      "code": "+596",
      "name": "French Antilles"
    },
    {
      "code": "+594",
      "name": "French Guiana"
    },
    {
      "code": "+689",
      "name": "French Polynesia"
    },
    {
      "code": "+241",
      "name": "Gabon"
    },
    {
      "code": "+220",
      "name": "Gambia"
    },
    {
      "code": "+995",
      "name": "Georgia"
    },
    {
      "code": "+49",
      "name": "Germany"
    },
    {
      "code": "+233",
      "name": "Ghana"
    },
    {
      "code": "+350",
      "name": "Gibraltar"
    },
    {
      "code": "+30",
      "name": "Greece"
    },
    {
      "code": "+299",
      "name": "Greenland"
    },
    {
      "code": "+1 473",
      "name": "Grenada"
    },
    {
      "code": "+590",
      "name": "Guadeloupe"
    },
    {
      "code": "+1 671",
      "name": "Guam"
    },
    {
      "code": "+502",
      "name": "Guatemala"
    },
    {
      "code": "+224",
      "name": "Guinea"
    },
    {
      "code": "+245",
      "name": "Guinea-Bissau"
    },
    {
      "code": "+595",
      "name": "Guyana"
    },
    {
      "code": "+509",
      "name": "Haiti"
    },
    {
      "code": "+504",
      "name": "Honduras"
    },
    {
      "code": "+852",
      "name": "Hong Kong SAR China"
    },
    {
      "code": "+36",
      "name": "Hungary"
    },
    {
      "code": "+354",
      "name": "Iceland"
    },
    {
      "code": "+91",
      "name": "India"
    },
    {
      "code": "+62",
      "name": "Indonesia"
    },
    {
      "code": "+98",
      "name": "Iran"
    },
    {
      "code": "+964",
      "name": "Iraq"
    },
    {
      "code": "+353",
      "name": "Ireland"
    },
    {
      "code": "+972",
      "name": "Israel"
    },
    {
      "code": "+39",
      "name": "Italy"
    },
    {
      "code": "+225",
      "name": "Ivory Coast"
    },
    {
      "code": "+1 876",
      "name": "Jamaica"
    },
    {
      "code": "+81",
      "name": "Japan"
    },
    {
      "code": "+962",
      "name": "Jordan"
    },
    {
      "code": "+7 7",
      "name": "Kazakhstan"
    },
    {
      "code": "+254",
      "name": "Kenya"
    },
    {
      "code": "+686",
      "name": "Kiribati"
    },
    {
      "code": "+965",
      "name": "Kuwait"
    },
    {
      "code": "+996",
      "name": "Kyrgyzstan"
    },
    {
      "code": "+856",
      "name": "Laos"
    },
    {
      "code": "+371",
      "name": "Latvia"
    },
    {
      "code": "+961",
      "name": "Lebanon"
    },
    {
      "code": "+266",
      "name": "Lesotho"
    },
    {
      "code": "+231",
      "name": "Liberia"
    },
    {
      "code": "+218",
      "name": "Libya"
    },
    {
      "code": "+423",
      "name": "Liechtenstein"
    },
    {
      "code": "+370",
      "name": "Lithuania"
    },
    {
      "code": "+352",
      "name": "Luxembourg"
    },
    {
      "code": "+853",
      "name": "Macau SAR China"
    },
    {
      "code": "+389",
      "name": "Macedonia"
    },
    {
      "code": "+261",
      "name": "Madagascar"
    },
    {
      "code": "+265",
      "name": "Malawi"
    },
    {
      "code": "+60",
      "name": "Malaysia"
    },
    {
      "code": "+960",
      "name": "Maldives"
    },
    {
      "code": "+223",
      "name": "Mali"
    },
    {
      "code": "+356",
      "name": "Malta"
    },
    {
      "code": "+692",
      "name": "Marshall Islands"
    },
    {
      "code": "+596",
      "name": "Martinique"
    },
    {
      "code": "+222",
      "name": "Mauritania"
    },
    {
      "code": "+230",
      "name": "Mauritius"
    },
    {
      "code": "+262",
      "name": "Mayotte"
    },
    {
      "code": "+52",
      "name": "Mexico"
    },
    {
      "code": "+691",
      "name": "Micronesia"
    },
    {
      "code": "+1 808",
      "name": "Midway Island"
    },
    {
      "code": "+373",
      "name": "Moldova"
    },
    {
      "code": "+377",
      "name": "Monaco"
    },
    {
      "code": "+976",
      "name": "Mongolia"
    },
    {
      "code": "+382",
      "name": "Montenegro"
    },
    {
      "code": "+1664",
      "name": "Montserrat"
    },
    {
      "code": "+212",
      "name": "Morocco"
    },
    {
      "code": "+95",
      "name": "Myanmar"
    },
    {
      "code": "+264",
      "name": "Namibia"
    },
    {
      "code": "+674",
      "name": "Nauru"
    },
    {
      "code": "+977",
      "name": "Nepal"
    },
    {
      "code": "+31",
      "name": "Netherlands"
    },
    {
      "code": "+599",
      "name": "Netherlands Antilles"
    },
    {
      "code": "+1 869",
      "name": "Nevis"
    },
    {
      "code": "+687",
      "name": "New Caledonia"
    },
    {
      "code": "+64",
      "name": "New Zealand"
    },
    {
      "code": "+505",
      "name": "Nicaragua"
    },
    {
      "code": "+227",
      "name": "Niger"
    },
    {
      "code": "+234",
      "name": "Nigeria"
    },
    {
      "code": "+683",
      "name": "Niue"
    },
    {
      "code": "+672",
      "name": "Norfolk Island"
    },
    {
      "code": "+850",
      "name": "North Korea"
    },
    {
      "code": "+1 670",
      "name": "Northern Mariana Islands"
    },
    {
      "code": "+47",
      "name": "Norway"
    },
    {
      "code": "+968",
      "name": "Oman"
    },
    {
      "code": "+92",
      "name": "Pakistan"
    },
    {
      "code": "+680",
      "name": "Palau"
    },
    {
      "code": "+970",
      "name": "Palestinian Territory"
    },
    {
      "code": "+507",
      "name": "Panama"
    },
    {
      "code": "+675",
      "name": "Papua New Guinea"
    },
    {
      "code": "+595",
      "name": "Paraguay"
    },
    {
      "code": "+51",
      "name": "Peru"
    },
    {
      "code": "+63",
      "name": "Philippines"
    },
    {
      "code": "+48",
      "name": "Poland"
    },
    {
      "code": "+351",
      "name": "Portugal"
    },
    {
      "code": "+1 787",
      "name": "Puerto Rico"
    },
    {
      "code": "+974",
      "name": "Qatar"
    },
    {
      "code": "+262",
      "name": "Reunion"
    },
    {
      "code": "+40",
      "name": "Romania"
    },
    {
      "code": "+7",
      "name": "Russia"
    },
    {
      "code": "+250",
      "name": "Rwanda"
    },
    {
      "code": "+685",
      "name": "Samoa"
    },
    {
      "code": "+378",
      "name": "San Marino"
    },
    {
      "code": "+966",
      "name": "Saudi Arabia"
    },
    {
      "code": "+221",
      "name": "Senegal"
    },
    {
      "code": "+381",
      "name": "Serbia"
    },
    {
      "code": "+248",
      "name": "Seychelles"
    },
    {
      "code": "+232",
      "name": "Sierra Leone"
    },
    {
      "code": "+65",
      "name": "Singapore"
    },
    {
      "code": "+421",
      "name": "Slovakia"
    },
    {
      "code": "+386",
      "name": "Slovenia"
    },
    {
      "code": "+677",
      "name": "Solomon Islands"
    },
    {
      "code": "+27",
      "name": "South Africa"
    },
    {
      "code": "+500",
      "name": "South Georgia and the South Sandwich Islands"
    },
    {
      "code": "+82",
      "name": "South Korea"
    },
    {
      "code": "+34",
      "name": "Spain"
    },
    {
      "code": "+94",
      "name": "Sri Lanka"
    },
    {
      "code": "+249",
      "name": "Sudan"
    },
    {
      "code": "+597",
      "name": "Suriname"
    },
    {
      "code": "+268",
      "name": "Swaziland"
    },
    {
      "code": "+46",
      "name": "Sweden"
    },
    {
      "code": "+41",
      "name": "Switzerland"
    },
    {
      "code": "+963",
      "name": "Syria"
    },
    {
      "code": "+886",
      "name": "Taiwan"
    },
    {
      "code": "+992",
      "name": "Tajikistan"
    },
    {
      "code": "+255",
      "name": "Tanzania"
    },
    {
      "code": "+66",
      "name": "Thailand"
    },
    {
      "code": "+670",
      "name": "Timor Leste"
    },
    {
      "code": "+228",
      "name": "Togo"
    },
    {
      "code": "+690",
      "name": "Tokelau"
    },
    {
      "code": "+676",
      "name": "Tonga"
    },
    {
      "code": "+1 868",
      "name": "Trinidad and Tobago"
    },
    {
      "code": "+216",
      "name": "Tunisia"
    },
    {
      "code": "+90",
      "name": "Turkey"
    },
    {
      "code": "+993",
      "name": "Turkmenistan"
    },
    {
      "code": "+1 649",
      "name": "Turks and Caicos Islands"
    },
    {
      "code": "+688",
      "name": "Tuvalu"
    },
    {
      "code": "+1 340",
      "name": "U.S. Virgin Islands"
    },
    {
      "code": "+256",
      "name": "Uganda"
    },
    {
      "code": "+380",
      "name": "Ukraine"
    },
    {
      "code": "+971",
      "name": "United Arab Emirates"
    },
    {
      "code": "+44",
      "name": "United Kingdom"
    },
    {
      "code": "+1",
      "name": "United States"
    },
    {
      "code": "+598",
      "name": "Uruguay"
    },
    {
      "code": "+998",
      "name": "Uzbekistan"
    },
    {
      "code": "+678",
      "name": "Vanuatu"
    },
    {
      "code": "+58",
      "name": "Venezuela"
    },
    {
      "code": "+84",
      "name": "Vietnam"
    },
    {
      "code": "+1 808",
      "name": "Wake Island"
    },
    {
      "code": "+681",
      "name": "Wallis and Futuna"
    },
    {
      "code": "+967",
      "name": "Yemen"
    },
    {
      "code": "+260",
      "name": "Zambia"
    },
    {
      "code": "+255",
      "name": "Zanzibar"
    },
    {
      "code": "+263",
      "name": "Zimbabwe"
    }
  ]
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-05-10T13:27:45.737

以下是国家/地区拨号代码的快速版本以及国家/地区名称：

```
func getCountryCallingCode(countryRegionCode:String) -> [String] {
    let prefix =  ["AF": ["Afghanistan","93"],
                   "AX": ["Aland Islands","358"],
                   "AL": ["Albania","355"],
                   "DZ": ["Algeria","213"],
                   "AS": ["American Samoa","1"],
                   "AD": ["Andorra","376"],
                   "AO": ["Angola","244"],
                   "AI": ["Anguilla","1"],
                   "AQ": ["Antarctica","672"],
                   "AG": ["Antigua and Barbuda","1"],
                   "AR": ["Argentina","54"],
                   "AM": ["Armenia","374"],
                   "AW": ["Aruba","297"],
                   "AU": ["Australia","61"],
                   "AT": ["Austria","43"],
                   "AZ": ["Azerbaijan","994"],
                   "BS": ["Bahamas","1"],
                   "BH": ["Bahrain","973"],
                   "BD": ["Bangladesh","880"],
                   "BB": ["Barbados","1"],
                   "BY": ["Belarus","375"],
                   "BE": ["Belgium","32"],
                   "BZ": ["Belize","501"],
                   "BJ": ["Benin","229"],
                   "BM": ["Bermuda","1"],
                   "BT": ["Bhutan","975"],
                   "BO": ["Bolivia","591"],
                   "BA": ["Bosnia and Herzegovina","387"],
                   "BW": ["Botswana","267"],
                   "BV": ["Bouvet Island","47"],
                   "BQ": ["BQ","599"],
                   "BR": ["Brazil","55"],
                   "IO": ["British Indian Ocean Territory","246"],
                   "VG": ["British Virgin Islands","1"],
                   "BN": ["Brunei Darussalam","673"],
                   "BG": ["Bulgaria","359"],
                   "BF": ["Burkina Faso","226"],
                   "BI": ["Burundi","257"],
                   "KH": ["Cambodia","855"],
                   "CM": ["Cameroon","237"],
                   "CA": ["Canada","1"],
                   "CV": ["Cape Verde","238"],
                   "KY": ["Cayman Islands","345"],
                   "CF": ["Central African Republic","236"],
                   "TD": ["Chad","235"],
                   "CL": ["Chile","56"],
                   "CN": ["China","86"],
                   "CX": ["Christmas Island","61"],
                   "CC": ["Cocos (Keeling) Islands","61"],
                   "CO": ["Colombia","57"],
                   "KM": ["Comoros","269"],
                   "CG": ["Congo (Brazzaville)","242"],
                   "CD": ["Congo, Democratic Republic of the","243"],
                   "CK": ["Cook Islands","682"],
                   "CR": ["Costa Rica","506"],
                   "CI": ["Côte d'Ivoire","225"],
                   "HR": ["Croatia","385"],
                   "CU": ["Cuba","53"],
                   "CW": ["Curacao","599"],
                   "CY": ["Cyprus","537"],
                   "CZ": ["Czech Republic","420"],
                   "DK": ["Denmark","45"],
                   "DJ": ["Djibouti","253"],
                   "DM": ["Dominica","1"],
                   "DO": ["Dominican Republic","1"],
                   "EC": ["Ecuador","593"],
                   "EG": ["Egypt","20"],
                   "SV": ["El Salvador","503"],
                   "GQ": ["Equatorial Guinea","240"],
                   "ER": ["Eritrea","291"],
                   "EE": ["Estonia","372"],
                   "ET": ["Ethiopia","251"],
                   "FK": ["Falkland Islands (Malvinas)","500"],
                   "FO": ["Faroe Islands","298"],
                   "FJ": ["Fiji","679"],
                   "FI": ["Finland","358"],
                   "FR": ["France","33"],
                   "GF": ["French Guiana","594"],
                   "PF": ["French Polynesia","689"],
                   "TF": ["French Southern Territories","689"],
                   "GA": ["Gabon","241"],
                   "GM": ["Gambia","220"],
                   "GE": ["Georgia","995"],
                   "DE": ["Germany","49"],
                   "GH": ["Ghana","233"],
                   "GI": ["Gibraltar","350"],
                   "GR": ["Greece","30"],
                   "GL": ["Greenland","299"],
                   "GD": ["Grenada","1"],
                   "GP": ["Guadeloupe","590"],
                   "GU": ["Guam","1"],
                   "GT": ["Guatemala","502"],
                   "GG": ["Guernsey","44"],
                   "GN": ["Guinea","224"],
                   "GW": ["Guinea-Bissau","245"],
                   "GY": ["Guyana","595"],
                   "HT": ["Haiti","509"],
                   "VA": ["Holy See (Vatican City State)","379"],
                   "HN": ["Honduras","504"],
                   "HK": ["Hong Kong, Special Administrative Region of China","852"],
                   "HU": ["Hungary","36"],
                   "IS": ["Iceland","354"],
                   "IN": ["India","91"],
                   "ID": ["Indonesia","62"],
                   "IR": ["Iran, Islamic Republic of","98"],
                   "IQ": ["Iraq","964"],
                   "IE": ["Ireland","353"],
                   "IM": ["Isle of Man","44"],
                   "IL": ["Israel","972"],
                   "IT": ["Italy","39"],
                   "JM": ["Jamaica","1"],
                   "JP": ["Japan","81"],
                   "JE": ["Jersey","44"],
                   "JO": ["Jordan","962"],
                   "KZ": ["Kazakhstan","77"],
                   "KE": ["Kenya","254"],
                   "KI": ["Kiribati","686"],
                   "KP": ["Korea, Democratic People's Republic of","850"],
                   "KR": ["Korea, Republic of","82"],
                   "KW": ["Kuwait","965"],
                   "KG": ["Kyrgyzstan","996"],
                   "LA": ["Lao PDR","856"],
                   "LV": ["Latvia","371"],
                   "LB": ["Lebanon","961"],
                   "LS": ["Lesotho","266"],
                   "LR": ["Liberia","231"],
                   "LY": ["Libya","218"],
                   "LI": ["Liechtenstein","423"],
                   "LT": ["Lithuania","370"],
                   "LU": ["Luxembourg","352"],
                   "MO": ["Macao, Special Administrative Region of China","853"],
                   "MK": ["Macedonia, Republic of","389"],
                   "MG": ["Madagascar","261"],
                   "MW": ["Malawi","265"],
                   "MY": ["Malaysia","60"],
                   "MV": ["Maldives","960"],
                   "ML": ["Mali","223"],
                   "MT": ["Malta","356"],
                   "MH": ["Marshall Islands","692"],
                   "MQ": ["Martinique","596"],
                   "MR": ["Mauritania","222"],
                   "MU": ["Mauritius","230"],
                   "YT": ["Mayotte","262"],
                   "MX": ["Mexico","52"],
                   "FM": ["Micronesia, Federated States of","691"],
                   "MD": ["Moldova","373"],
                   "MC": ["Monaco","377"],
                   "MN": ["Mongolia","976"],
                   "ME": ["Montenegro","382"],
                   "MS": ["Montserrat","1"],
                   "MA": ["Morocco","212"],
                   "MZ": ["Mozambique","258"],
                   "MM": ["Myanmar","95"],
                   "NA": ["Namibia","264"],
                   "NR": ["Nauru","674"],
                   "NP": ["Nepal","977"],
                   "NL": ["Netherlands","31"],
                   "AN": ["Netherlands Antilles","599"],
                   "NC": ["New Caledonia","687"],
                   "NZ": ["New Zealand","64"],
                   "NI": ["Nicaragua","505"],
                   "NE": ["Niger","227"],
                   "NG": ["Nigeria","234"],
                   "NU": ["Niue","683"],
                   "NF": ["Norfolk Island","672"],
                   "MP": ["Northern Mariana Islands","1"],
                   "NO": ["Norway","47"],
                   "OM": ["Oman","968"],
                   "PK": ["Pakistan","92"],
                   "PW": ["Palau","680"],
                   "PS": ["Palestinian Territory, Occupied","970"],
                   "PA": ["Panama","507"],
                   "PG": ["Papua New Guinea","675"],
                   "PY": ["Paraguay","595"],
                   "PE": ["Peru","51"],
                   "PH": ["Philippines","63"],
                   "PN": ["Pitcairn","872"],
                   "PL": ["Poland","48"],
                   "PT": ["Portugal","351"],
                   "PR": ["Puerto Rico","1"],
                   "QA": ["Qatar","974"],
                   "RE": ["Réunion","262"],
                   "RO": ["Romania","40"],
                   "RU": ["Russian Federation","7"],
                   "RW": ["Rwanda","250"],
                   "SH": ["Saint Helena","290"],
                   "KN": ["Saint Kitts and Nevis","1"],
                   "LC": ["Saint Lucia","1"],
                   "PM": ["Saint Pierre and Miquelon","508"],
                   "VC": ["Saint Vincent and Grenadines","1"],
                   "BL": ["Saint-Barthélemy","590"],
                   "MF": ["Saint-Martin (French part)","590"],
                   "WS": ["Samoa","685"],
                   "SM": ["San Marino","378"],
                   "ST": ["Sao Tome and Principe","239"],
                   "SA": ["Saudi Arabia","966"],
                   "SN": ["Senegal","221"],
                   "RS": ["Serbia","381"],
                   "SC": ["Seychelles","248"],
                   "SL": ["Sierra Leone","232"],
                   "SG": ["Singapore","65"],
                   "SX": ["Sint Maarten","1"],
                   "SK": ["Slovakia","421"],
                   "SI": ["Slovenia","386"],
                   "SB": ["Solomon Islands","677"],
                   "SO": ["Somalia","252"],
                   "ZA": ["South Africa","27"],
                   "GS": ["South Georgia and the South Sandwich Islands","500"],
                   "SS​": ["South Sudan","211"],
                   "ES": ["Spain","34"],
                   "LK": ["Sri Lanka","94"],
                   "SD": ["Sudan","249"],
                   "SR": ["Suriname","597"],
                   "SJ": ["Svalbard and Jan Mayen Islands","47"],
                   "SZ": ["Swaziland","268"],
                   "SE": ["Sweden","46"],
                   "CH": ["Switzerland","41"],
                   "SY": ["Syrian Arab Republic (Syria)","963"],
                   "TW": ["Taiwan, Republic of China","886"],
                   "TJ": ["Tajikistan","992"],
                   "TZ": ["Tanzania, United Republic of","255"],
                   "TH": ["Thailand","66"],
                   "TL": ["Timor-Leste","670"],
                   "TG": ["Togo","228"],
                   "TK": ["Tokelau","690"],
                   "TO": ["Tonga","676"],
                   "TT": ["Trinidad and Tobago","1"],
                   "TN": ["Tunisia","216"],
                   "TR": ["Turkey","90"],
                   "TM": ["Turkmenistan","993"],
                   "TC": ["Turks and Caicos Islands","1"],
                   "TV": ["Tuvalu","688"],
                   "UG": ["Uganda","256"],
                   "UA": ["Ukraine","380"],
                   "AE": ["United Arab Emirates","971"],
                   "GB": ["United Kingdom","44"],
                   "US": ["United States of America","1"],
                   "UY": ["Uruguay","598"],
                   "UZ": ["Uzbekistan","998"],
                   "VU": ["Vanuatu","678"],
                   "VE": ["Venezuela (Bolivarian Republic of)","58"],
                   "VN": ["Viet Nam","84"],
                   "VI": ["Virgin Islands, US","1"],
                   "WF": ["Wallis and Futuna Islands","681"],
                   "EH": ["Western Sahara","212"],
                   "YE": ["Yemen","967"],
                   "ZM": ["Zambia","260"],
                   "ZW": ["Zimbabwe","263"]]

    let countryDialingCode = prefix[countryRegionCode]
    return countryDialingCode!
} 
```

然后调用上述函数以使用拨号代码和相应的国家名称显示在 UI 中。

```
let currentLocale = NSLocale.currentLocale()
let countryCode = currentLocale.objectForKey(NSLocaleCountryCode) as! String
print("Country code according to Locale \(countryCode)")
let countryArray = getCountryCallingCode(countryCode)

print("Country Array according to the Locale \(countryArray)")
print("Country Name \(countryArray[0])")
print("Dialing code \(countryArray[1])") 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-07T11:00:40.753

多合一解决方案：带有代码和标志的国家名称。通过此代码，您还可以按名称创建部分。如果这真的对你有帮助，请支持

```
self.aryCountryName= [[NSMutableArray alloc]initWithObjects:@"Afghanistan",@"Albania",@"Algeria",@"Andorra",@"Angola",@"Antigua and Barbuda",@"Argentina",@"Armenia",@"Australia",@"Austria",@"Azerbaijan",@"Bahamas",@"Bahrain",@"Bangladesh",@"Barbados",@"Belarus",@"Belgium",@"Belize",@"Benin",@"Bhutan",@"Bolivia",@"Bosnia and Herzegovina",@"Botswana",@"Brazil",@"Brunei Darussalam",@"Bulgaria",@"Burkina Faso",@"Burundi",@"Cabo Verde",@"Cambodia",@"Cameroon",@"Canada",@"Central African Republic",@"Chad",@"Chile",@"China",@"Colombia",@"Comoros",@"Congo",@"Costa Rica",@"Côte d'Ivoire",@"Croatia",@"Cuba",@"Cyprus",@"Czech Republic",@"Democratic People's Republic of Korea (North Korea)",@"Democratic Republic of the Cong",@"Denmark",@"Djibouti",@"Dominica",@"Dominican Republic",@"Ecuador",@"Egypt",@"El Salvador",@"Equatorial Guinea",@"Eritrea",@"Estonia",@"Ethiopia",@"Fiji",@"Finland",@"France",@"Gabon",@"Gambia",@"Georgia",@"Germany",@"Ghana",@"Greece",@"Grenada",@"Guatemala",@"Guinea",@"Guinea-Bissau",@"Guyana",@"Haiti",@"Honduras",@"Hungary",@"Iceland",@"India",@"Indonesia",@"Iran",@"Iraq",@"Ireland",@"Israel",@"Italy",@"Jamaica",@"Japan",@"Jordan",@"Kazakhstan",@"Kenya",@"Kiribati",@"Kuwait",@"Kyrgyzstan",@"Lao People's Democratic Republic (Laos)",@"Latvia",@"Lebanona",@"Lesotho",@"Liberia",@"Libya",@"Liechtenstein",@"Lithuania",@"Luxembourg",@"Macedonia",@"Madagascar",@"Malawi",@"Malaysia",@"Maldives",@"Mali",@"Malta",@"Marshall Islands",@"Mauritania",@"Mauritius",@"Mexico",@"Micronesia (Federated States of)",@"Monaco",@"Mongolia",@"Montenegro",@"Morocco",@"Mozambique",@"Myanmar",@"Namibia",@"Nauru",@"Nepal",@"Netherlands",@"New Zealand",@"Nicaragua",@"Niger",@"Nigeria",@"Norway",@"Oman",@"pakistan",@"palau",@"panama",@"papua New Guinew",@"Paraguay",@"Peru",@"philippines",@"Poland",@"Portugal",@"Qatar",@"Republic of Korea (South Korea)",@"Republic of Moldova",@"Romania",@"Russian Federation",@"Rwanda",@"Saint Kitts and Nevis",@"Saint Lucia",@"Saint Vincent and the Grenadines",@"Samoa",@"San Marino",@"Sao Tome and Principe",@"Saudi Arabia",@"Senegal",@"Serbia",@"Seychelles",@"Sierra Leone",@"Singapore",@"Slovakia",@"Slovenia",@"Solomon Islands",@"Somalia",@"South Africa",@"South Sudan",@"Spain",@"Sri lanka",@"Sudan",@"Suriname",@"Swaziland",@"Sweden",@"Swazerland",@"Syrian Arab Republic",@"Tajikistan",@"Thailand",@"Timor-Leste",@"Togo",@"Tonga",@"Trinidad and Tobago",@"Tunisia",@"Turkey" ,@" Turkmenistan",@"Tuvalu",@"Uganda",@"Ukraine",@"United Arab Emirates",@"United Kingdom of Great Britain and Northern Ireland",@"United Republic of Tanzania",@"United States of America",@"Uruguay",@"Uzbekistan",@"Vanuatu",@"Venezuela",@"Vietnam",@"Yemen",@"Zambia",@"Zimbabwe",nil] ;

// Country Code Array
self.aryCountryCode= [[NSMutableArray alloc]initWithObjects:@"93",@"355",@"213",@"376",@"244",@"1268",@"54",@"374",@"61",@"43",@"994",@"1242",@"973",@"880",@"1246",@"375",@"32",@"501",@"229",@"975",@"591",@"387",@"267",@"55",@"673",@"359",@"226",@"257",@"238",@"855",@"237",@"1",@"236",@"235",@"56",@"86",@"57",@"269",@"242",@"506",@"225",@"385",@"53",@"357",@"420",@"850",@"243",@"45",@"253",@"1767",@"1809",@"593",@"20",@"503",@"240",@"291",@"372",@"251",@"679",@"358",@"33",@"241",@"220",@"995",@"49",@"233",@"30",@"1473",@"502",@"224",@"245",@"592",@"509",@"504",@"36",@"354",@"91",@"62",@"98",@"964",@"353",@"972",@"39",@"1876",@"81",@"962",@"76",@"254",@"686",@"965",@"996",@"856",@"371",@"961",@"266",@"231",@"218",@"423",@"370",@"352",@"389",@"261",@"265",@"60",@"960",@"223",@"356",@"692",@"222",@"230",@"52",@"691",@"377",@"976",@"382",@"212",@"258",@"95",@"264",@"674",@"977",@"31",@"64",@"505",@"227",@"234",@"47",@"968",@"92",@"680",@"507",@"675",@"595",@"51",@"63",@"48",@"351",@"974",@"82",@"373",@"40",@"7",@"250",@"1869",@"1758",@"1784",@"685",@"378",@"239",@"966",@"221",@"381",@"248",@"232",@"65",@"421",@"386",@"677",@"252",@"27",@"211",@"34",@"94",@"249",@"597",@"268",@"46",@"41",@"963",@"992",@"66",@"670",@"228",@"676",@"1868",@"216",@"90",@"993",@"688",@"256",@"380",@"971",@"44",@"255",@"1",@"598",@"998",@"678",@"58",@"84",@"967",@"260",@"263",nil];

// Country Flag Array
self.aryCountryFlag =[[ NSMutableArray alloc]initWithObjects:@"af_32.png",@"al_32.png",@"dz_32.png",@"ad_32.png",@"ao_32.png",@"ag_32.png",@"ar_32.png",@"am_32.png",@"au_32.png",@"at_32.png",@"az_32.png",@"bs_32.png",@"bh_32.png",@"bd_32.png",@"bb_32.png",@"by_32.png",@"be_32.png",@"bz_32.png",@"bj_32.png",@"bt_32.png",@"bo_32.png",@"ba_32.png",@"bw_32.png",@"br_32.png",@"bn_32.png",@"bg_32.png",@"bf_32.png",@"bi_32.png",@"cv_32.png",@"kh_32.png",@"cm_32.png",@"ca_32.png",@"cf_32.png",@"td_32.png",@"cl_32.png",@"cn_32.png",@"co_32.png",@"km_32.png",@"cg_32.png",@"cr_32.png",@"ci_32.png",@"hr_32.png",@"cu_32.png",@"cy_32.png",@"cz_32.png",@"kp_32.png",@"cd_32.png",@"dk_32.png",@"dj_32.png",@"dm_32.png",@"do_32.png",@"ec_32.png",@"eg_32.png",@"sv_32.png",@"gq_32.png",@"er_32.png",@"ee_32.png",@"et_32.png",@"fj_32.png",@"fi_32.png",@"fr_32.png",@"ga_32.png",@"gm_32.png",@"ge_32.png",@"de_32.png",@"gh_32.png",@"gr_32.png",@"gd_32.png",@"gt_32.png",@"gn_32.png",@"gw_32.png",@"gy_32.png",@"ht_32.png",@"hn_32.png",@"hu_32.png",@"is_32.png",@"in_32.png",@"id_32.png",@"ir_32.png",@"iq_32.png",@"ie_32.png",@"il_32.png",@"it_32.png",@"jm_32.png",@"jp_32.png",@"jo_32.png",@"kz_32.png",@"ke_32.png",@"ki_32.png",@"kw_32.png",@"kg_32.png",@"la_32.png",@"lv_32.png",@"lb_32.png",@"ls_32.png",@"lr_32.png",@"ly_32.png",@"li_32.png",@"lt_32.png",@"lu_32.png",@"mk_32.png",@"mg_32.png",@"mw_32.png",@"my_32.png",@"mv_32.png",@"ml_32.png",@"mt_32.png",@"mh_32.png",                                  @"mr_32.png",@"mu_32.png",@"mx_32.png",@"fm_32.png",@"mc_32.png",@"mn_32.png",@"me_32.png",@"ma_32.png",@"mz_32.png",@"mm_32.png",@"na_32.png",@"nr_32.png",@"np_32.png",@"nl_32.png",@"nz_32.png",@"ni_32.png",@"ne_32.png",@"ng_32.png",@"no_32.png",@"om_32.png",@"pk_32.png",@"pw_32.png",@"pa_32.png",@"pg_32.png",@"py_32.png",@"pe_32.png",@"ph_32.png",@"pl_32.png",@"pt_32.png",@"qa_32.png",@"kr_32.png",@"md_32.png",@"ro_32.png",@"ru_32.png",@"rw_32.png",@"kn_32.png",@"lc_32.png",@"vc_32.png",@"ws_32.png",@"sm_32.png",@"st_32.png",@"sa_32.png",@"sn_32.png",@"rs_32.png",@"sc_32.png",@"sl_32.png",@"sg_32.png",@"sk_32.png",@"si_32.png",@"sb_32.png",@"so_32.png",@"za_32.png",@"ss_32.png",@"es_32.png",@"lk_32.png",@"sd_32.png",@"sr_32.png",@"sz_32.png",@"se_32.png",@"ch_32.png",@"sy_32.png",@"tj_32.png",@"th_32.png",@"tl_32.png",@"tg_32.png",@"to_32.png",@"tt_32.png",@"tn_32.png",@"tr_32.png",@"tm_32.png",@"tv_32.png",@"ug_32.png",@"ua_32.png",@"ae_32.png",@"gb_32.png",@"tz_32.png",@"us_32.png",@"uy_32.png",@"uz_32.png",@"vu_32.png",@"ve_32.png",@"vn_32.png",@"ye_32.png",@"zm_32.png",@"zw_32.png",nil];

// Counrty Name Dic
self.dicCountryName= @{@"A" : @[@"Afghanistan",@"Albania",@"Algeria",@"Andorra",@"Angola",@"Antigua and Barbuda",@"Argentina",@"Armenia",@"Australia",@"Austria",@"Azerbaijan"],
                       @"B" : @[@"Bahamas",@"Bahrain",@"Bangladesh",@"Barbados",@"Belarus",@"Belgium",@"Belize",@"Benin",@"Bhutan",@"Bolivia",@"Bosnia and Herzegovina",@"Botswana",@"Brazil",@"Brunei Darussalam",@"Bulgaria",@"Burkina Faso",@"Burundi"],
                       @"C" : @[@"Cabo Verde",@"Cambodia",@"Cameroon",@"Canada",@"Central African Republic",@"Chad",@"Chile",@"China",@"Colombia",@"Comoros",@"Congo",@"Costa Rica",@"Côte d'Ivoire",@"Croatia",@"Cuba",@"Cyprus",@"Czech Republic"],
                       @"D" : @[@"Democratic People's Republic of Korea (North Korea)",@"Democratic Republic of the Cong",@"Denmark",@"Djibouti",@"Dominica",@"Dominican Republic"],
                       @"E" : @[@"Ecuador",@"Egypt",@"El Salvador",@"Equatorial Guinea",@"Eritrea",@"Estonia",@"Ethiopia"],
                       @"F" : @[@"Fiji",@"Finland",@"France"],
                       @"G" : @[@"Gabon",@"Gambia",@"Georgia",@"Germany",@"Ghana",@"Greece",@"Grenada",@"Guatemala",@"Guinea",@"Guinea-Bissau",@"Guyana"],
                       @"H" : @[@"Haiti",@"Honduras",@"Hungary"],
                       @"I" : @[@"Iceland",@"India",@"Indonesia",@"Iran",@"Iraq",@"Ireland",@"Israel",@"Italy"],
                       @"J" : @[@"Jamaica",@"Japan",@"Jordan"],
                       @"K" : @[@"Kazakhstan",@"Kenya",@"Kiribati",@"Kuwait",@"Kyrgyzstan"],
                       @"L" : @[@"Lao People's Democratic Republic (Laos)",@"Latvia",@"Lebanona",@"Lesotho",@"Liberia",@"Libya",@"Liechtenstein",@"Lithuania",@"Luxembourg"],
                       @"M" : @[@"Macedonia",@"Madagascar",@"Malawi",@"Malaysia",@"Maldives",@"Mali",@"Malta",@"Marshall Islands",@"Mauritania",@"Mauritius",@"Mexico",@"Micronesia (Federated States of)",@"Monaco",@"Mongolia",@"Montenegro",@"Morocco",@"Mozambique",@"Myanmar"],
                       @"N" : @[@"Namibia",@"Nauru",@"Nepal",@"Netherlands",@"New Zealand",@"Nicaragua",@"Niger",@"Nigeria",@"Norway"],
                       @"O" : @[@"Oman"],
                       @"P" : @[@"pakistan",@"palau",@"panama",@"papua New Guinew",@"Paraguay",@"Peru",@"philippines",@"Poland",@"Portugal"],
                       @"Q" : @[@"Qatar"],
                       @"R" : @[@"Republic of Korea (South Korea)",@"Republic of Moldova",@"Romania",@"Russian Federation",@"Rwanda"],
                       @"S" : @[@"Saint Kitts and Nevis",@"Saint Lucia",@"Saint Vincent and the Grenadines",@"Samoa",@"San Marino",@"Sao Tome and Principe",@"Saudi Arabia",@"Senegal",@"Serbia",@"Seychelles",@"Sierra Leone",@"Singapore",@"Slovakia",@"Slovenia",@"Solomon Islands",@"Somalia",@"South Africa",@"South Sudan",@"Spain",@"Sri lanka",@"Sudan",@"Suriname",@"Swaziland",@"Sweden",@"Swazerland",@"Syrian Arab Republic"],
                       @"T" : @[@"Tajikistan",@"Thailand",@"Timor-Leste",@"Togo",@"Tonga",@"Trinidad and Tobago",@"Tunisia",@"Turkey" ,@" Turkmenistan",@"Tuvalu"],
                       @"U" : @[@"Uganda",@"Ukraine",@"United Arab Emirates",@"United Kingdom of Great Britain and Northern Ireland",@"United Republic of Tanzania",@"United States of America",@"Uruguay",@"Uzbekistan"],
                       @"V" : @[@"Vanuatu",@"Venezuela",@"Vietnam"],
                       @"Y" : @[@"Yemen"],
                       @"Z" : @[@"Zambia",@"Zimbabwe"]};

 // Country Code Dic
self.dicCountryCode = @{@"A" : @[@"93",@"355",@"213",@"376",@"244",@"1268",@"54",@"374",@"61",@"43",@"994"],
                        @"B" : @[@"1242",@"973",@"880",@"1246",@"375",@"32",@"501",@"229",@"975",@"591",@"387",@"267",@"55",@"673",@"359",@"226",@"257"],
                        @"C" : @[@"238",@"855",@"237",@"1",@"236",@"235",@"56",@"86",@"57",@"269",@"242",@"506",@"225",@"385",@"53",@"357",@"420"],
                        @"D" : @[@"850",@"243",@"45",@"253",@"1767",@"1809"],
                        @"E" : @[@"593",@"20",@"503",@"240",@"291",@"372",@"251"],
                        @"F" : @[@"679",@"358",@"33"],
                        @"G" : @[@"241",@"220",@"995",@"49",@"233",@"30",@"1473",@"502",@"224",@"245",@"592"],
                        @"H" : @[@"509",@"504",@"36"],
                        @"I" : @[@"354",@"91",@"62",@"98",@"964",@"353",@"972",@"39"],
                        @"J" : @[@"1876",@"81",@"962"],
                        @"K" : @[@"76",@"254",@"686",@"965",@"996"],
                        @"L" : @[@"856",@"371",@"961",@"266",@"231",@"218",@"423",@"370",@"352"],
                        @"M" :@[@"389",@"261",@"265",@"60",@"960",@"223",@"356",@"692",@"222",@"230",@"52",@"691",@"377",@"976",@"382",@"212",@"258",@"95"],
                        @"N" : @[@"264",@"674",@"977",@"31",@"64",@"505",@"227",@"234",@"47"],
                        @"O" : @[@"968"],
                        @"P" : @[@"92",@"680",@"507",@"675",@"595",@"51",@"63",@"48",@"351"],
                        @"Q" : @[@"974"],
                        @"R" : @[@"82",@"373",@"40",@"7",@"250"],
                        @"S" : @[@"1869",@"1758",@"1784",@"685",@"378",@"239",@"966",@"221",@"381",@"248",@"232",@"65",@"421",@"386",@"677",@"252",@"27",@"211",@"34",@"94",@"249",@"597",@"268",@"46",@"41",@"963"],
                        @"T" : @[@"992",@"66",@"670",@"228",@"676",@"1868",@"216",@"90",@"993",@"688"],
                        @"U" : @[@"256",@"380",@"971",@"44",@"255",@"1",@"598",@"998"],
                        @"V" : @[@"678",@"58",@"84"],
                        @"Y" : @[@"967"],
                        @"Z" : @[@"260",@"263"]};

// Country Flag Dic is below
self.dicCountryFlag = @{@"A" : @[@"af_32.png",@"al_32.png",@"dz_32.png",@"ad_32.png",@"ao_32.png",@"ag_32.png",@"ar_32.png",@"am_32.png",@"au_32.png",@"at_32.png",@"az_32.png"],
                        @"B" : @[@"bs_32.png",@"bh_32.png",@"bd_32.png",@"bb_32.png",@"by_32.png",@"be_32.png",@"bz_32.png",@"bj_32.png",@"bt_32.png",@"bo_32.png",@"ba_32.png",@"bw_32.png",@"br_32.png",@"bn_32.png",@"bg_32.png",@"bf_32.png",@"bi_32.png"],
                        @"C" : @[@"cv_32.png",@"kh_32.png",@"cm_32.png",@"ca_32.png",@"cf_32.png",@"td_32.png",@"cl_32.png",@"cn_32.png",@"co_32.png",@"km_32.png",@"cg_32.png",@"cr_32.png",@"ci_32.png",@"hr_32.png",@"cu_32.png",@"cy_32.png",@"cz_32.png"],
                        @"D" : @[@"kp_32.png",@"cd_32.png",@"dk_32.png",@"dj_32.png",@"dm_32.png",@"do_32.png"],
                        @"E" : @[@"ec_32.png",@"eg_32.png",@"sv_32.png",@"gq_32.png",@"er_32.png",@"ee_32.png",@"et_32.png"],
                        @"F" : @[@"fj_32.png",@"fi_32.png",@"fr_32.png"],
                        @"G" : @[@"ga_32.png",@"gm_32.png",@"ge_32.png",@"de_32.png",@"gh_32.png",@"gr_32.png",@"gd_32.png",@"gt_32.png",@"gn_32.png",@"gw_32.png",@"gy_32.png"],
                        @"H" : @[@"ht_32.png",@"hn_32.png",@"hu_32.png"],
                        @"I" : @[@"is_32.png",@"in_32.png",@"id_32.png",@"ir_32.png",@"iq_32.png",@"ie_32.png",@"il_32.png",@"it_32.png"],
                        @"J" : @[@"jm_32.png",@"jp_32.png",@"jo_32.png"],
                        @"K" : @[@"kz_32.png",@"ke_32.png",@"ki_32.png",@"kw_32.png",@"kg_32.png"],
                        @"L" : @[@"la_32.png",@"lv_32.png",@"lb_32.png",@"ls_32.png",@"lr_32.png",@"ly_32.png",@"li_32.png",@"lt_32.png",@"lu_32.png"],
                        @"M" :@[@"mk_32.png",@"mg_32.png",@"mw_32.png",@"my_32.png",@"mv_32.png",@"ml_32.png",@"mt_32.png",@"mh_32.png",                                  @"mr_32.png",@"mu_32.png",@"mx_32.png",@"fm_32.png",@"mc_32.png",@"mn_32.png",@"me_32.png",@"ma_32.png",@"mz_32.png",@"mm_32.png"],
                        @"N" : @[@"na_32.png",@"nr_32.png",@"np_32.png",@"nl_32.png",@"nz_32.png",@"ni_32.png",@"ne_32.png",@"ng_32.png",@"no_32.png"],
                        @"O" : @[@"om_32.png"],
                        @"P" : @[@"pk_32.png",@"pw_32.png",@"pa_32.png",@"pg_32.png",@"py_32.png",@"pe_32.png",@"ph_32.png",@"pl_32.png",@"pt_32.png"],
                        @"Q" : @[@"qa_32.png"],
                        @"R" : @[@"kr_32.png",@"md_32.png",@"ro_32.png",@"ru_32.png",@"rw_32.png"],
                        @"S" : @[@"kn_32.png",@"lc_32.png",@"vc_32.png",@"ws_32.png",@"sm_32.png",@"st_32.png",@"sa_32.png",@"sn_32.png",@"rs_32.png",@"sc_32.png",@"sl_32.png",@"sg_32.png",@"sk_32.png",@"si_32.png",@"sb_32.png",@"so_32.png",@"za_32.png",@"ss_32.png",@"es_32.png",@"lk_32.png",@"sd_32.png",@"sr_32.png",@"sz_32.png",@"se_32.png",@"ch_32.png",@"sy_32.png"],
                        @"T" : @[@"tj_32.png",@"th_32.png",@"tl_32.png",@"tg_32.png",@"to_32.png",@"tt_32.png",@"tn_32.png",@"tr_32.png",@"tm_32.png",@"tv_32.png"],
                        @"U" : @[@"ug_32.png",@"ua_32.png",@"ae_32.png",@"gb_32.png",@"tz_32.png",@"us_32.png",@"uy_32.png",@"uz_32.png"],
                        @"V" : @[@"vu_32.png",@"ve_32.png",@"vn_32.png"],
                        @"Y" : @[@"ye_32.png"],
                        @"Z" : @[@"zm_32.png",@"zw_32.png"]};

self.countryIndexTitles = @[@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z"];

} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-08-02T15:20:42.307

带有完整的国家名称：

```
[NSDictionary dictionaryWithObjectsAndKeys:
                         @[@"Afghanistan",@"93"],@"AF",
                         @[@"Aland Islands",@"358"],@"AX",
                         @[@"Albania",@"355"],@"AL",
                         @[@"Algeria",@"213"],@"DZ",
                         @[@"American Samoa",@"1"],@"AS",
                         @[@"Andorra",@"376"],@"AD",
                         @[@"Angola",@"244"],@"AO",
                         @[@"Anguilla",@"1"],@"AI",
                         @[@"Antarctica",@"672"],@"AQ",
                         @[@"Antigua and Barbuda",@"1"],@"AG",
                         @[@"Argentina",@"54"],@"AR",
                         @[@"Armenia",@"374"],@"AM",
                         @[@"Aruba",@"297"],@"AW",
                         @[@"Australia",@"61"],@"AU",
                         @[@"Austria",@"43"],@"AT",
                         @[@"Azerbaijan",@"994"],@"AZ",
                         @[@"Bahamas",@"1"],@"BS",
                         @[@"Bahrain",@"973"],@"BH",
                         @[@"Bangladesh",@"880"],@"BD",
                         @[@"Barbados",@"1"],@"BB",
                         @[@"Belarus",@"375"],@"BY",
                         @[@"Belgium",@"32"],@"BE",
                         @[@"Belize",@"501"],@"BZ",
                         @[@"Benin",@"229"],@"BJ",
                         @[@"Bermuda",@"1"],@"BM",
                         @[@"Bhutan",@"975"],@"BT",
                         @[@"Bolivia",@"591"],@"BO",
                         @[@"Bosnia and Herzegovina",@"387"],@"BA",
                         @[@"Botswana",@"267"],@"BW",
                         @[@"Bouvet Island",@"47"],@"BV",
                         @[@"BQ",@"599"],@"BQ",
                         @[@"Brazil",@"55"],@"BR",
                         @[@"British Indian Ocean Territory",@"246"],@"IO",
                         @[@"British Virgin Islands",@"1"],@"VG",
                         @[@"Brunei Darussalam",@"673"],@"BN",
                         @[@"Bulgaria",@"359"],@"BG",
                         @[@"Burkina Faso",@"226"],@"BF",
                         @[@"Burundi",@"257"],@"BI",
                         @[@"Cambodia",@"855"],@"KH",
                         @[@"Cameroon",@"237"],@"CM",
                         @[@"Canada",@"1"],@"CA",
                         @[@"Cape Verde",@"238"],@"CV",
                         @[@"Cayman Islands",@"345"],@"KY",
                         @[@"Central African Republic",@"236"],@"CF",
                         @[@"Chad",@"235"],@"TD",
                         @[@"Chile",@"56"],@"CL",
                         @[@"China",@"86"],@"CN",
                         @[@"Christmas Island",@"61"],@"CX",
                         @[@"Cocos (Keeling) Islands",@"61"],@"CC",
                         @[@"Colombia",@"57"],@"CO",
                         @[@"Comoros",@"269"],@"KM",
                         @[@"Congo (Brazzaville)",@"242"],@"CG",
                         @[@"Congo, Democratic Republic of the",@"243"],@"CD",
                         @[@"Cook Islands",@"682"],@"CK",
                         @[@"Costa Rica",@"506"],@"CR",
                         @[@"Côte d'Ivoire",@"225"],@"CI",
                         @[@"Croatia",@"385"],@"HR",
                         @[@"Cuba",@"53"],@"CU",
                         @[@"Curacao",@"599"],@"CW",
                         @[@"Cyprus",@"537"],@"CY",
                         @[@"Czech Republic",@"420"],@"CZ",
                         @[@"Denmark",@"45"],@"DK",
                         @[@"Djibouti",@"253"],@"DJ",
                         @[@"Dominica",@"1"],@"DM",
                         @[@"Dominican Republic",@"1"],@"DO",
                         @[@"Ecuador",@"593"],@"EC",
                         @[@"Egypt",@"20"],@"EG",
                         @[@"El Salvador",@"503"],@"SV",
                         @[@"Equatorial Guinea",@"240"],@"GQ",
                         @[@"Eritrea",@"291"],@"ER",
                         @[@"Estonia",@"372"],@"EE",
                         @[@"Ethiopia",@"251"],@"ET",
                         @[@"Falkland Islands (Malvinas)",@"500"],@"FK",
                         @[@"Faroe Islands",@"298"],@"FO",
                         @[@"Fiji",@"679"],@"FJ",
                         @[@"Finland",@"358"],@"FI",
                         @[@"France",@"33"],@"FR",
                         @[@"French Guiana",@"594"],@"GF",
                         @[@"French Polynesia",@"689"],@"PF",
                         @[@"French Southern Territories",@"689"],@"TF",
                         @[@"Gabon",@"241"],@"GA",
                         @[@"Gambia",@"220"],@"GM",
                         @[@"Georgia",@"995"],@"GE",
                         @[@"Germany",@"49"],@"DE",
                         @[@"Ghana",@"233"],@"GH",
                         @[@"Gibraltar",@"350"],@"GI",
                         @[@"Greece",@"30"],@"GR",
                         @[@"Greenland",@"299"],@"GL",
                         @[@"Grenada",@"1"],@"GD",
                         @[@"Guadeloupe",@"590"],@"GP",
                         @[@"Guam",@"1"],@"GU",
                         @[@"Guatemala",@"502"],@"GT",
                         @[@"Guernsey",@"44"],@"GG",
                         @[@"Guinea",@"224"],@"GN",
                         @[@"Guinea-Bissau",@"245"],@"GW",
                         @[@"Guyana",@"595"],@"GY",
                         @[@"Haiti",@"509"],@"HT",
                         @[@"Holy See (Vatican City State)",@"379"],@"VA",
                         @[@"Honduras",@"504"],@"HN",
                         @[@"Hong Kong, Special Administrative Region of China",@"852"],@"HK",
                         @[@"Hungary",@"36"],@"HU",
                         @[@"Iceland",@"354"],@"IS",
                         @[@"India",@"91"],@"IN",
                         @[@"Indonesia",@"62"],@"ID",
                         @[@"Iran, Islamic Republic of",@"98"],@"IR",
                         @[@"Iraq",@"964"],@"IQ",
                         @[@"Ireland",@"353"],@"IE",
                         @[@"Isle of Man",@"44"],@"IM",
                         @[@"Israel",@"972"],@"IL",
                         @[@"Italy",@"39"],@"IT",
                         @[@"Jamaica",@"1"],@"JM",
                         @[@"Japan",@"81"],@"JP",
                         @[@"Jersey",@"44"],@"JE",
                         @[@"Jordan",@"962"],@"JO",
                         @[@"Kazakhstan",@"77"],@"KZ",
                         @[@"Kenya",@"254"],@"KE",
                         @[@"Kiribati",@"686"],@"KI",
                         @[@"Korea, Democratic People's Republic of",@"850"],@"KP",
                         @[@"Korea, Republic of",@"82"],@"KR",
                         @[@"Kuwait",@"965"],@"KW",
                         @[@"Kyrgyzstan",@"996"],@"KG",
                         @[@"Lao PDR",@"856"],@"LA",
                         @[@"Latvia",@"371"],@"LV",
                         @[@"Lebanon",@"961"],@"LB",
                         @[@"Lesotho",@"266"],@"LS",
                         @[@"Liberia",@"231"],@"LR",
                         @[@"Libya",@"218"],@"LY",
                         @[@"Liechtenstein",@"423"],@"LI",
                         @[@"Lithuania",@"370"],@"LT",
                         @[@"Luxembourg",@"352"],@"LU",
                         @[@"Macao, Special Administrative Region of China",@"853"],@"MO",
                         @[@"Macedonia, Republic of",@"389"],@"MK",
                         @[@"Madagascar",@"261"],@"MG",
                         @[@"Malawi",@"265"],@"MW",
                         @[@"Malaysia",@"60"],@"MY",
                         @[@"Maldives",@"960"],@"MV",
                         @[@"Mali",@"223"],@"ML",
                         @[@"Malta",@"356"],@"MT",
                         @[@"Marshall Islands",@"692"],@"MH",
                         @[@"Martinique",@"596"],@"MQ",
                         @[@"Mauritania",@"222"],@"MR",
                         @[@"Mauritius",@"230"],@"MU",
                         @[@"Mayotte",@"262"],@"YT",
                         @[@"Mexico",@"52"],@"MX",
                         @[@"Micronesia, Federated States of",@"691"],@"FM",
                         @[@"Moldova",@"373"],@"MD",
                         @[@"Monaco",@"377"],@"MC",
                         @[@"Mongolia",@"976"],@"MN",
                         @[@"Montenegro",@"382"],@"ME",
                         @[@"Montserrat",@"1"],@"MS",
                         @[@"Morocco",@"212"],@"MA",
                         @[@"Mozambique",@"258"],@"MZ",
                         @[@"Myanmar",@"95"],@"MM",
                         @[@"Namibia",@"264"],@"NA",
                         @[@"Nauru",@"674"],@"NR",
                         @[@"Nepal",@"977"],@"NP",
                         @[@"Netherlands",@"31"],@"NL",
                         @[@"Netherlands Antilles",@"599"],@"AN",
                         @[@"New Caledonia",@"687"],@"NC",
                         @[@"New Zealand",@"64"],@"NZ",
                         @[@"Nicaragua",@"505"],@"NI",
                         @[@"Niger",@"227"],@"NE",
                         @[@"Nigeria",@"234"],@"NG",
                         @[@"Niue",@"683"],@"NU",
                         @[@"Norfolk Island",@"672"],@"NF",
                         @[@"Northern Mariana Islands",@"1"],@"MP",
                         @[@"Norway",@"47"],@"NO",
                         @[@"Oman",@"968"],@"OM",
                         @[@"Pakistan",@"92"],@"PK",
                         @[@"Palau",@"680"],@"PW",
                         @[@"Palestinian Territory, Occupied",@"970"],@"PS",
                         @[@"Panama",@"507"],@"PA",
                         @[@"Papua New Guinea",@"675"],@"PG",
                         @[@"Paraguay",@"595"],@"PY",
                         @[@"Peru",@"51"],@"PE",
                         @[@"Philippines",@"63"],@"PH",
                         @[@"Pitcairn",@"872"],@"PN",
                         @[@"Poland",@"48"],@"PL",
                         @[@"Portugal",@"351"],@"PT",
                         @[@"Puerto Rico",@"1"],@"PR",
                         @[@"Qatar",@"974"],@"QA",
                         @[@"Réunion",@"262"],@"RE",
                         @[@"Romania",@"40"],@"RO",
                         @[@"Russian Federation",@"7"],@"RU",
                         @[@"Rwanda",@"250"],@"RW",
                         @[@"Saint Helena",@"290"],@"SH",
                         @[@"Saint Kitts and Nevis",@"1"],@"KN",
                         @[@"Saint Lucia",@"1"],@"LC",
                         @[@"Saint Pierre and Miquelon",@"508"],@"PM",
                         @[@"Saint Vincent and Grenadines",@"1"],@"VC",
                         @[@"Saint-Barthélemy",@"590"],@"BL",
                         @[@"Saint-Martin (French part)",@"590"],@"MF",
                         @[@"Samoa",@"685"],@"WS",
                         @[@"San Marino",@"378"],@"SM",
                         @[@"Sao Tome and Principe",@"239"],@"ST",
                         @[@"Saudi Arabia",@"966"],@"SA",
                         @[@"Senegal",@"221"],@"SN",
                         @[@"Serbia",@"381"],@"RS",
                         @[@"Seychelles",@"248"],@"SC",
                         @[@"Sierra Leone",@"232"],@"SL",
                         @[@"Singapore",@"65"],@"SG",
                         @[@"Sint Maarten",@"1"],@"SX",
                         @[@"Slovakia",@"421"],@"SK",
                         @[@"Slovenia",@"386"],@"SI",
                         @[@"Solomon Islands",@"677"],@"SB",
                         @[@"Somalia",@"252"],@"SO",
                         @[@"South Africa",@"27"],@"ZA",
                         @[@"South Georgia and the South Sandwich Islands",@"500"],@"GS",
                         @[@"South Sudan",@"211"],@"SS​",
                         @[@"Spain",@"34"],@"ES",
                         @[@"Sri Lanka",@"94"],@"LK",
                         @[@"Sudan",@"249"],@"SD",
                         @[@"Suriname",@"597"],@"SR",
                         @[@"Svalbard and Jan Mayen Islands",@"47"],@"SJ",
                         @[@"Swaziland",@"268"],@"SZ",
                         @[@"Sweden",@"46"],@"SE",
                         @[@"Switzerland",@"41"],@"CH",
                         @[@"Syrian Arab Republic (Syria)",@"963"],@"SY",
                         @[@"Taiwan, Republic of China",@"886"],@"TW",
                         @[@"Tajikistan",@"992"],@"TJ",
                         @[@"Tanzania, United Republic of",@"255"],@"TZ",
                         @[@"Thailand",@"66"],@"TH",
                         @[@"Timor-Leste",@"670"],@"TL",
                         @[@"Togo",@"228"],@"TG",
                         @[@"Tokelau",@"690"],@"TK",
                         @[@"Tonga",@"676"],@"TO",
                         @[@"Trinidad and Tobago",@"1"],@"TT",
                         @[@"Tunisia",@"216"],@"TN",
                         @[@"Turkey",@"90"],@"TR",
                         @[@"Turkmenistan",@"993"],@"TM",
                         @[@"Turks and Caicos Islands",@"1"],@"TC",
                         @[@"Tuvalu",@"688"],@"TV",
                         @[@"Uganda",@"256"],@"UG",
                         @[@"Ukraine",@"380"],@"UA",
                         @[@"United Arab Emirates",@"971"],@"AE",
                         @[@"United Kingdom",@"44"],@"GB",
                         @[@"United States of America",@"1"],@"US",
                         @[@"Uruguay",@"598"],@"UY",
                         @[@"Uzbekistan",@"998"],@"UZ",
                         @[@"Vanuatu",@"678"],@"VU",
                         @[@"Venezuela (Bolivarian Republic of)",@"58"],@"VE",
                         @[@"Viet Nam",@"84"],@"VN",
                         @[@"Virgin Islands, US",@"1"],@"VI",
                         @[@"Wallis and Futuna Islands",@"681"],@"WF",
                         @[@"Western Sahara",@"212"],@"EH",
                         @[@"Yemen",@"967"],@"YE",
                         @[@"Zambia",@"260"],@"ZM",
                         @[@"Zimbabwe",@"263"],@"ZW", nil]; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-24T00:45:47.613

您可以使用[此处](http://country.io/data/)的信息。

你可以`code:name`从[这里](http://country.io/names.json)取 并与`code:phoneCode` [这里结合](http://country.io/phone.json)

那里的信息始终是最新的，您可以随时在应用程序中下载。因此，您可以确保始终掌握有关电话代码的最新信息

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-26T14:10:29.087

使用`NSLocale`：

```
let countries = NSLocale.ISOCountryCodes().flatMap({
    (code) -> [String:String]? in
    let id = NSLocale.localeIdentifierFromComponents([NSLocaleCountryCode: code])
    if let name = NSLocale(localeIdentifier: NSLocale.currentLocale().localeIdentifier).displayNameForKey(NSLocaleIdentifier, value: id) {
        return ["name" : name, "code" : code]
    }

    return nil
}) 
```

# asp.net - 自动化功能 Web GUI 测试框架 (asp.net)

> ID：13022602
> 
> 赞同：2
> 
> 时间：2012-10-23T02:07:04.843
> 
> 标签：asp.net, asp.net-mvc, testing, web-applications, user-interface

我们混合了 ASP.NET 网络表单和即将推出的 MVC 项目；我追求可靠且可维护的 Web GUI 测试工具/框架；目前我们进行了一些 Watin 测试，看到 Watin 超过 15 个月没有得到积极的工作，我有点不愿意在这方面进行更多投资，或者我应该这样做吗？

有哪些选择，什么是最好的选择。

**Selenium** - 虽然有限的 Visual Studio 集成似乎是一个不错的选择。

**Watin** - 似乎已经过时并且似乎不能很好地应对现代 JQuery 网站。

**Telerik Test Studio** - 看起来很有前途，有人试过吗？这值得么？

对于 ASP.NET 和可能的 Visual Studio 集成，还有其他可行的选择吗？

[我知道关于 ASP.NET Web 应用程序的 Web 测试框架](https://stackoverflow.com/questions/1239625/web-testing-frameworks-for-asp-net-web-application)存在一个现有问题，但它并没有真正回答任何问题。

对于绿色领域项目，人们使用什么进行自动化功能 UI 测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:12:43.063

我们还在研究测试我们的网络应用程序前端的方法。

目前我们有一些使用无头浏览器 phantomJS 的测试。测试是用 JavaScript 编写的，如下所示：

```
(function () {

   // require is part of phantom API
   var userName,
       page = require('webpage').create();

    page.open("http://<url of page to test>", function (status) {

        if (status !== 'success') {
            phantom.exit(1);
        } else {
            // get the text of the DOM element that displays the user name
            userName = page.evaluate(function() {
                return document.getElementById('userName').innerText;
            });

            if (userName !=== 'Guest') {
                phantom.exit(1);
            }
            phantom.exit();  // Success!
        }
    });

})(); 
```

我们使用这样的命令从 Jenkins 调用它（其中**assert_Username_EqualsGuest.js**包含上面的 JavaScript）：

```
phantomJS.exe assert_Username_EqualsGuest.js 
```

我们也有类似的用 powerscript 编写的测试，它使用 System.Net.WebClient 类从 Web 服务器下载动态资源，断言返回的内容，并记录响应时间以跟踪服务器性能随时间的变化。也被詹金斯解雇了。

所以这个答案只是为了让你知道我们目前在做什么，但我们也在研究更好的方法。我很想听听其他人在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T22:46:48.327

您使用的是什么版本的 Visual Studio？可能是你有一个高端的，这意味着你可以在 CodedUI 中编写测试脚本，这相对不错，并且可以使用你习惯的类似语言/工具集进行测试。[http://msdn.microsoft.com/en-us/magazine/hh875174.aspx](http://msdn.microsoft.com/en-us/magazine/hh875174.aspx)

如果不是，我会用 .net 绑定投票给 selenium，它确实是功能最齐全的 Web 自动化工具，您可能最容易获得帮助。以下网页告诉您如何让 selenium 在 Visual Studio 中工作[http://www.joecolantonio.com/2012/07/31/getting-started-using-selenium-2-0-webdriver-for-ie-in -视觉工作室-c/](http://www.joecolantonio.com/2012/07/31/getting-started-using-selenium-2-0-webdriver-for-ie-in-visual-studio-c/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T01:16:34.657

这并不能真正直接回答您的问题，但您应该查看 Martin Fowler 的[测试金字塔文章](http://martinfowler.com/bliki/TestPyramid.html)：

> 测试金字塔是 Mike Cohn 提出的一个概念，在他的《Succeeding with Agile》一书中进行了描述。它的要点是，您应该拥有比通过 GUI 运行的高级端到端测试更多的低级单元测试。

在我从事的项目中，我们使用各种测试实用程序（NUnit、MBUnit、xUnit 等）实现了单元测试，使用[FitNesse](http://butunclebob.com/FitNesse.UserGuide)进行服务（集成）测试，并将 GUI 测试留作手动任务（尽管如果需要，FitNesse 可以非常接近表示层）。这对我们来说效果很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T06:53:13.983

如果您只想在 IE 中进行测试，您可以尝试[IBM Rational Functional Tester](http://www-01.ibm.com/software/awdtools/tester/functional/)。它不支持最新的 Firefox 版本（仅最高 10.6）

您可以从该网站下载 30 天免费试用版。我在这里发布了它[https://sqa.stackexchange.com/questions/4995/reviews-feedback-on-rft](https://sqa.stackexchange.com/questions/4995/reviews-feedback-on-rft)

另一个软件是[QA Wizard](http://www.qawizard.com/)，但我没有直接的经验。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-23T13:20:54.550

如果您愿意付费，Telerik Test Studio 是一款非常不错的产品。这是一个很棒的工具，适用于不同的浏览器。它有一个非常易于使用的记录功能，允许您在页面内指向和单击并选择要测试的元素。另一个工具（付费）是[Test Complete](http://smartbear.com/products/qa-tools/automated-testing-tools)，它的工作原理非常相似。查看这两种产品的视频，文档非常好。

这些工具的特点是它们无需手动编码，但如果 UI 无法满足您的需求，您也可以编写测试代码。

# c++ - 矢量模板 - “呼叫不匹配”错误

> ID：13022603
> 
> 赞同：0
> 
> 时间：2012-10-23T02:07:19.190
> 
> 标签：c++, templates, vector

我正在尝试通过以下方式在我的代码中使用模板和向量：

在我的头文件中：

```
template <typename V>
void changeConfig(char option, vector <V> & arg_in){
        // ....
  } 
```

在源文件中：

```
vector <int> p = {4};
changeConfig('w' ,p); 
```

这是我得到的错误：

/include/config.h：在成员函数 'void Cfconfig::changeConfig(char, std::vector<_RealType>&) [with V = int]'中：

src/config_test.cpp:10:38: 从这里实例化

/include/config.h:68:25: 错误：不匹配调用 '(int_vector {aka std::vector}) (std::vector&)'</p>

make: *** [featureconfig_test.o_dbg] 错误 1

我尝试了有关此线程的建议，但它们似乎都不起作用。

[C++ 模板错误：没有匹配的调用函数](https://stackoverflow.com/questions/11052644/c-templates-error-no-matching-function-for-call)

任何帮助，将不胜感激。谢谢。

好的，我做了一小段代码，给出了同样的错误：

```
#include <iostream>
#include <stdio.h>
#include <stdarg.h>
#include <cstdio>
#include <opencv2/opencv.hpp>
#include <string.h>
#include <math.h>
#include <complex.h>
#include <dirent.h>
#include <fstream>
#include <typeinfo> 
#include <unistd.h>
#include <stdlib.h>
#include <algorithm>
#include <array>
#include <initializer_list>
#include <vector>
#include <algorithm>

using namespace std;

template <typename V>
void changeConfig(char option, vector <V> & arg_in){

     vector<int> window = {5};
     vector<double> scale = {3};

            switch(option){
                    case 'w':                                        
                            window(arg_in);
                            break;
                    case 's':
                            scale(arg_in);
                            break;
            } 

    }

int main(){

    vector <int> p = {3};
    changeConfig<int>('w', p);

    return 0;

} 
```

* * *

我编译使用： g++ -std=c++0x test_template.cpp -o test

这给了我这个错误：

test_template.cpp：在函数 'void changeConfig(char, std::vector<_RealType>&) [with V = int]'中：

test_template.cpp:45:33: 从这里实例化

test_template.cpp:32:33：错误：不匹配调用 '(std::vector) (std::vector&)'</p>

test_template.cpp:35:33: 错误：不匹配调用 '(std::vector) (std::vector&)'</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:09:25.327

问题在于`window(arg_in);`和`scale(arg_in);`。`std::vector`您正试图以另一个`std::vector`作为参数来调用类似的函数。我认为您正在尝试将一个向量分配给另一个向量，因此只需使用 assignment 或`swap`.

```
 vector<int> window = {5};
 vector<int> scale = {3}; // Note I changed this from double to int

        switch(option){
                case 'w':                                        
                        window = arg_in; // Perhaps you meant arg_in = window
                        break;
                case 's':
                        scale = arg_in;  // Perhaps you meant arg_in = scale
                        break;
        } 

} 
```

如果您想使用`vector<double> scale`，请`scale.assign(arg_in.begin(), arg_in.end());`改用或反之`arg_in.assign(scale.begin(), scale.end());`。

# c - C：如何从文件中读取可变数量的信息并将其存储在数组中

> ID：13022605
> 
> 赞同：1
> 
> 时间：2012-10-23T02:07:40.880
> 
> 标签：c

我不习惯用c编程，所以我想知道如何拥有一个数组，然后在一个文件中读取可变数量的变量，以及数组中的这些文件。

```
//how do I declare an array whose sizes varies
do {
     char buffer[1000];
     fscanf(file, %[^\n]\n", buffer);
     //how do i add buffer to array
}while(!feof(file)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:52:33.887

```
int nlines = 0
char **lines = NULL; /* Array of resulting lines */
int curline = 0;
char buffer[BUFSIZ]; /* Just alloocate this once, not each time through the loop */
do {
     if (fgets(buffer, sizeof buffer, file)) { /* fgets() is the easy way to read a line */
       if (curline >= nlines) { /* Have we filled up the result array? */
         nlines += 1000; /* Increase size by 1,000 */
         lines = realloc(lines, nlines*sizeof(*lines); /* And grow the array */
       }
       lines[curline] = strdup(buffer); /* Make a copy of the input line and add it to the array */
       curline++;
     }
}while(!feof(file)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:24:18.060

数组在 C 中总是固定大小的。你不能改变它们的大小。您可以做的是预先估计您需要多少空间并动态分配该空间（使用`malloc()`）。如果你碰巧用完了空间，你重新分配。请参阅相关文档`realloc()`。基本上，你这样做：

```
buffer = realloc(size); 
```

新大小可以比以前更大或更小（这意味着您可以“扩大”或“缩小”数组。）因此，如果一开始您想要 5000 个字符的空间，您可以：

```
char* buffer = malloc(5000); 
```

如果稍后您用完了空间并想要额外的 2000 个字符（因此新大小将是 7000），您可以这样做：

```
buffer = realloc(7000); 
```

已经存在的内容`buffer`被保留。请注意，`realloc()`可能无法真正增长内存块，因此它可能首先分配一个全新的块，然后将旧内存的内容复制到新块，然后释放旧内存。这意味着如果您将`buffer`指针的副本存储在其他地方，它将指向不再存在的旧内存块。例如：

```
char* ptr = buffer;
buffer = realloc(7000); 
```

那时，`ptr`仅当 时有效`ptr == buffer`，但*不能*保证是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:25:06.240

字符串数据位于数组条目中的数组通常不是最佳选择。如果完整的数据集可以舒适地放入内存并且条目数量有合理的上限，那么指针数组是一种选择。

但首先，避免没有明确长度的 scanf %s 和 %[] 格式。使用您的示例缓冲区大小 1000，您可以读取的最大字符串长度为 999，因此：

```
/* Some needed data */
int n;
struct ptrarray_t
{
    char **strings;
    int  nalloc; /* number of string pointers allocated */
    int  nused;  /* number of string pointers used */
} pa_hdr; /* presume this was initialized previously */
...
n = fscanf(file, "%999[\n]", buffer);
if (n!=1 || getc(file)!='\n')
{
    there's a problem
}
/* Now add a string to the array */
if (pa_hdr.nused < pa_hdr.nalloc)
{
    int len = strlen(buffer);
    char *cp = malloc(len+1);
    strcpy(cp, buffer);
    pa_hdr.strings[pa_hdr.nused++] = cp;
} 
```

此后对任何字符串的引用都只是 pa_hdr.strings[i]，一个体面的设计将使用函数调用或宏来管理标头，而标头又将位于头文件中而不是内联。完成数组后，您将需要一个删除函数来释放所有这些 malloc()ed 指针。

如果有大量的小字符串， malloc() 在时间和空间开销上都可能很昂贵。您可以在较大的块中管理字符串池，这些块将很好地适应主机操作系统的内存分配和分页。使用一组函数有效地从这个字符串数组中创建一个对象将有助于您的开发。如上所述，您可以选择一个简单的策略，然后再优化实施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T02:12:43.303

您似乎正在尝试阅读，直到您阅读换行符。

最简单的方法是通过[getline](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)。

```
char *buffer = NULL;
int buffer_len;
int ret = getline(&buffer, &buffer_len, file); 
```

...这将从文件中读取一行文本`file`（除非`ret`is `-1`，其中有错误或者您位于文件末尾）。

# java - 使用面向对象获取覆盖方法中的值

> ID：13022606
> 
> 赞同：1
> 
> 时间：2012-10-23T02:07:48.983
> 
> 标签：java, oop

这是扩展 CountDownTimer 的类。

```
public class timer extends CountDownTimer{

private final long startTime = 50000;
private final long interval = 1000;
int timeElapsed;

public timer(long starttime, long interval){
    super(starttime, interval);     
}

@Override
public void onFinish() {        

}

@Override
public void onTick(long millisUntilFinished) {
    timeElapsed = (int)(startTime - millisUntilFinished);       
} 
```

}

这是主要课程。

```
long millisUntilFinished = 0;
        timer myTime = new timer(5000, 1000);
        myTime.onTick(millisUntilFinished);

        if(myTime.onTick(millisUntilFinished) == 2000){
            //do the next process
        } 
```

这段代码告诉

> 运算符 == 对于您的类型未定义 void, int

我想如何获取覆盖方法中的 timeElapsed 值，并且该值可以在主类中用于下一个进程。

请帮我解决这个问题。感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:20:03.587

返回类型意味着该`void`方法不返回任何值，因此当您尝试将 void 值与 进行比较时会发生编译器错误`2000`。

这里最好的解决方案是简单地创建一个 getter 方法来访问`timeElapsed`，然后在相等比较中使用该方法。

```
public class timer extends CountdownTimer {
    ...
    public int getTimeElapsed() {
        return timeElapsed;
    }
    ...
} 
```

然后，在您的 main 方法中，您可以使用该 getter 方法。

```
...
if (myTime.getTimeElapsed() == 2000) {
    // do the next process
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:20:46.440

您的方法调用`myTime.onTick(millisUntilFinished)`不会返回任何内容，因此会出现错误。

我认为您正在尝试比较`timeElapsed`您可以按照以下方式进行的操作。

`getTimeElapsed()`在`timer`类中添加一个方法：

```
 public int getTimeElapsed(){
      return timeElapsed;
   } 
```

然后在你的主要方法中，你可以这样做：

```
 long millisUntilFinished = 0;
    timer myTime = new timer(5000, 1000);
    myTime.onTick(millisUntilFinished);

    if(myTime.getTimeElapsed() == 2000){
        //do the next process
    } 
```

# emacs - 具有抗锯齿和提示的 Emacs 字体

> ID：13022608
> 
> 赞同：9
> 
> 时间：2012-10-23T02:08:01.583
> 
> 标签：emacs, fonts, antialiasing

我正在使用 Fedora 17 和 Emacs 24 并想在 Emacs 上尝试解放字体。我试过这个`HOME/.Xresources`：

```
Xft.antialias:  1
Xft.dpi:    96
Xft.hinting:    1
Xft.hintstyle:  hintslight
Xft.lcdfilter:  lcddefault
Xft.rgba:   rgb
Emacs.font: Liberation Mono-12 
```

`ORG-MODE`这只会更改普通文本，但不会更改标题等其他文本。我也不知道抗锯齿是否有效。

我也试过：

```
(set-fontset-font
nil '(#x0250 . #x02af) (font-spec :family "Liberation Mono")) 
```

但它仍然是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T21:30:38.463

我将以下代码放入其中`.emacs.d`以更改默认字体：

```
(set-face-attribute 'default nil :family "Ubuntu Mono" :height 120 :weight 'normal) 
```

字体是否被消除锯齿和提示取决于绘制 emacs 窗口的程序。因此，如果您在 Gnome 或 KDE 中运行 Emacs 的 X Windows 版本，那么 Gnome/KDE 将按照提示和消除锯齿绘制字体。如果您在终端内运行 emacs，那么您需要研究如何在终端内使用抗锯齿和提示字体（如果您在窗口管理器内使用终端仿真器，这仍然与窗口管理器本身）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:19:19.833

检查以确保`org-mode`面设置为从`default`面正确继承。

# android - Android、Google Cloud Messaging - 推送到手机，但不会在设备上创建推送通知

> ID：13022614
> 
> 赞同：1
> 
> 时间：2012-10-23T02:08:13.093
> 
> 标签：android, google-cloud-messaging

我一直在尝试让 Google Cloud Messaging 创建推送通知。我能够注册设备，将注册 ID 存储在服务器上，然后将推送消息发送回设备。

我能够做到所有这些，并且 catLog 显示推送消息已到达设备。但是在设备上没有出现推送通知消息。

这可能是什么原因？

以防万一，这是我注册设备的方式：

```
 GCMRegistrar.checkDevice(this); 
        GCMRegistrar.checkManifest(this);

        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) 
        {
            // Automatically registers application on startup. 
            GCMRegistrar.register(getApplicationContext(), SENDER_ID); 
        } 
        else 
        {        
            // Device is already registered on GCM, check server. 
            if (GCMRegistrar.isRegisteredOnServer(getApplicationContext())) 
            { 
                // Not sure what to do here :)
            } 
            else 
            {
                if ( user_id != null )
                {
                    GCMRegistrar.register(this, SENDER_ID); // google register         
                    setRegistrationId ( user_id , regId ); // saves id on server
                }
            }
        } 
```

结束 onPostExecute 我做 GCMRegistrar.setRegisteredOnServer(getApplicationContext(), true);

这是我的 GCMIntentService 中的 onMessage() 方法

```
 @Override
  protected void onMessage(Context ctxt, Intent message) {
    Bundle extras=message.getExtras();

    for (String key : extras.keySet()) {
      Log.d(getClass().getSimpleName(),
            String.format("onMessage: %s=%s", key,
                          extras.getString(key)));
    }
  } 
```

这可能是问题吗？实际上应该如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:50:14.560

> 这可能是什么原因？

以下是一些可能性：

1.  您的应用程序中没有`GCMIntentService`子类。

2.  你这样做了，但它没有在清单中注册。

3.  你这样做了，但你没有覆盖`onMessage()`

4.  你做到了，但你`onMessage()`没有正确记录事件或以其他方式让你知道事件发生了。

# selenium - selenium rc storeEval 不能跨测试工作

> ID：13022616
> 
> 赞同：0
> 
> 时间：2012-10-23T02:08:19.450
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

使用 selenium IDE（firefox 插件）时，该`storeEval`命令适用于套件内的测试用例，但使用 selenium RC（jar）时，同一套件不起作用

变量未存储

例子

测试1

*   点击
*   storeEval "asd" foo

测试2

*   类型 element_id ${foo}
*   “asd”出现在 selenium IDE 中。但是，“foo”出现在 selenium RC 中

有什么建议么？

谢谢

PS：请注意这是一个在 selenium IDE 和 selenium RC 中运行的 htmlsuite

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:02:29.437

我通过编辑其中一个 jar 文件找到了解决方案：http: [//mumblblog.wordpress.com/2011/10/19/make-store-command-work-with-selenium-rc-to-pass-values-between-test -案例/](http://mumblblog.wordpress.com/2011/10/19/make-store-command-work-with-selenium-rc-to-pass-values-between-test-cases/)

关于编辑 jar 内的文件： [如何编辑 .jar 文件？](https://stackoverflow.com/questions/4837500/how-can-i-edit-a-jar-file/4837522#4837522)

它对我有帮助。

# ms-access - 时间表数据库和文档数据库之间的构建链接

> ID：13022617
> 
> 赞同：0
> 
> 时间：2012-10-23T02:08:19.477
> 
> 标签：ms-access, database-design, ms-access-2010

我目前有一个文档数据库和一个时间表数据库。

用户通过封装多个文档的通用“工作包”进行预订。当前系统将预订的小时数分配到文档数据库的“烧毁小时数”字段。

该算法将时间汇总到“工作包”中，并将其分配到“工作包”中的文档中。这意味着有关时间来源、谁和何时丢失的数据。

文档数据库是一个表，每个文档都有一行，每个文档都有一个唯一的 ID。每个文档都有“完成百分比”和“烧毁时间”

时间表数据库按用户和“工作包”记录小时数，然后必须将其分发到文档中。虽然小时数目前均匀分布在“工作包”中的文档中，但我想调整算法以将小时数仅发送到在一段时间内获得“完成百分比”的文档。

您将如何调整它，以便我可以看到谁的时间已经通过它的存在进入了文档？文档可以通过它的存在移动“工作包”。

我需要将其分解为每个文档的表格吗？我有大约 7000 个文档和 100 多个用户。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:51:38.593

您应该可以使用[连接表来执行此操作](http://en.wikipedia.org/wiki/Junction_table)

它可以驻留在任一数据库中，但最好放在分配小时数的数据库中。我会建议：

```
DocumentID )
UserID     ) Primary key
Timestamp  )
BurntHours 
```

不要为每个文档创建一个表格。

# android - 为什么在旋转android平板电脑时在Activity上调用onCreate？

> ID：13022619
> 
> 赞同：4
> 
> 时间：2012-10-23T02:08:26.183
> 
> 标签：android, android-activity

每当屏幕旋转时，每次在 Activity 上调用 onCreate 方法。是再次调用 onCreate 还是重新创建整个活动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T02:16:51.443

它不仅仅是 onCreate()。当屏幕旋转时，Activity 会暂停、停止和重新启动。有关更多信息，请参阅此问题： [活动生命周期 - onCreate 在每次重新定向时调用](https://stackoverflow.com/questions/7618703/activity-lifecycle-oncreate-called-on-every-re-orientation)

如果问题是“为什么会发生这种情况？” 答案与 Android 活动和窗口中的功能有关。更具体地说，当方向改变时，android 目前没有办法移动、调整大小和重新布局每个视图。为了使处理这种情况成为可能，实现了仅拆除活动并将其以不同方向恢复的更简单的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:39:47.357

当方向改变时，onDistroy 方法将调用，这表明 Activity 已关闭，并再次创建具有新高度和宽度的新 Activity。

当方向改变时，Activity 类中的所有对象都将销毁，当 Activity 重新启动时，它们将再次创建，如果有大量数据，则需要更多时间再次加载所有数据.. 所以最好将所有数据分开并存储Non-Activity 类中的数据并通过为 NonActivity 类创建对象在 Activity 类中使​​用。

当方向改变时 onSaveInstanceState 方法也被调用并且
通过使用 onSaveInstanceState 数据将在活动销毁和重新创建时设置或存储一些值

```
 protected void onSaveInstanceState(Bundle icicle) {
      super.onSaveInstanceState(icicle);
      icicle.putLong("param", value);

    } 
```

当活动重新启动 on create 方法调用时，这一次 Bundle 返回您在 onSaveInstanceState 中保存的值

```
public void onCreate(Bundle icicle) {
  if (icicle != null){
    value = icicle.getLong("param");
  }
} 
```

# android - Android：从 JSON 获得的数据在 textview 中不完整

> ID：13022624
> 
> 赞同：0
> 
> 时间：2012-10-23T02:09:10.867
> 
> 标签：android, json, textview

在我的应用程序中，我从 JSON 获取文本内容，并将该内容显示到文本视图中。但是，问题是文本看起来不完整，也没有格式化。[我使用http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)检查了我的 JSON，它显示 JSON 是有效的。我已经在日志上打印了我收到的内容，它是完整的。甚至，在将其设置为 textview 并再次从中恢复后，我得到了完整的数据。但是，它没有显示完整的文本。

![这是它在应用程序中的显示方式：](../Images/f871ec4fb627a0962ae3f2c5dff90e05.png)

我没有找到问题所在。文本视图在滚动视图内。

下面是我的代码： **基本活动**

```
public class TIEBaseActivity extends MapActivity
{
//private ProgressDialog dialog;
public AlertDialog _alertDialog;
protected HeaderBar _headerBar;
protected FooterBar _footerBar;
protected LinearLayout _manager;
protected LinearLayout form;
protected TIEBaseActivity _self;

public void createDefaultView(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.basescreen);
    this._self=this;
    initView();
}   

public void loadFormFromResource(int resourceID)
{
    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(resourceID, null);
    _manager.addView(view);

}

public void loadDefaultForm()
{
    form=new LinearLayout(this);
    form.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    form.setOrientation(LinearLayout.VERTICAL);
    form.setGravity(Gravity.CENTER);
    _manager.addView(form);
}

public void initView() 
{

    _headerBar = (HeaderBar) findViewById(R.id.baseHeaderBar);  
    _manager = (LinearLayout) findViewById(R.id.baseScrollContent);
    //_footerBar = (FooterBar) findViewById(R.id.baseFooterBar);

    _headerBar.view.setVisibility(View.GONE);
    //_footerBar.view.setVisibility(View.GONE);
}

protected void showScreen(Intent intent) {
    startActivity(intent);
}

public void setHeaderTitle(String title) {

    if (_headerBar!=null) {
        _headerBar.setTitle(title);
    }

}

public Handler progressCloseHandler = new Handler() {
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        if (_alertDialog != null)
            _alertDialog.cancel();
    }

};

private Handler alertViewHandler = new Handler() {

    public void handleMessage(Message msg) {
        String message=(String)msg.obj;
        AlertDialog.Builder _alert = new AlertDialog.Builder(TIEBaseActivity.this);
        _alert.setMessage(message)
        .setCancelable(false)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
            }
        });
        _alert.create().show();
    }
};

public void DisplayAlert(String message) {

    Message msg=Message.obtain(alertViewHandler);
    msg.obj=message;
    alertViewHandler.sendMessage(msg);

}

public void DisplayAlert(String message, int id) {  

    Message msg=Message.obtain(alertViewHandler);
    msg.obj=message;
    msg.what=id;
    alertViewHandler.sendMessage(msg);
}

private Handler closeViewHandler=new Handler() {
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        _self.finish();
    }
};

public void closeScreen() {

    closeViewHandler.sendMessage(Message.obtain(closeViewHandler));

}

public void openRating()
{
    Intent marketIntent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.dzo.tie"));
    startActivity(marketIntent);    
}

@Override
public void onConfigurationChanged(Configuration newConfig) {

    super.onConfigurationChanged(newConfig);
}

public void openShare()
{

    String mMailSubject = "OIE App. - Get the All Indian Events happening in Overseas"; 
    String mMailMessage = null;     
    mMailMessage = "Hi,\n I found this great Application. This application customize for Overseas Indian Events.";
    mMailMessage += "\n";
    mMailMessage += "Go to: https://market.android.com/details?id=com.dzo.oie";
    mMailMessage += ",\n Please visit: http://www.dotzoo.net to see more about Dotzoo Inc.";

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("text/*");              
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, ""+mMailSubject);
    emailIntent.putExtra(Intent.EXTRA_TEXT, mMailMessage);
    startActivity(Intent.createChooser(emailIntent, "Share via..."));   

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

BaseActivity 的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:background="@color/white"
android:layout_height="fill_parent"
android:orientation="vertical"
android:id="@+id/baseLayout">

<com.dzo.tie.ui.HeaderBar
    android:id="@+id/baseHeaderBar" 
    android:layout_width="fill_parent"
    android:layout_height="50dp"/> 

<ScrollView 
    android:scrollbars="vertical"
    android:fillViewport="true"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">  

    <LinearLayout 
        android:id="@+id/baseScrollContent" 
        android:layout_height="wrap_content" 
        android:orientation="vertical" 
        android:gravity="center"
        android:layout_gravity="center" 
        android:layout_width="fill_parent">

    </LinearLayout> 
</ScrollView> 
```

我在我的活动类中扩展了这个基本活动：

**我的活动**

```
public class TIEInfo extends TIEBaseActivity 
{
TextView txtTieInfo;
String contents;

private String infoUrl = "http://www.tradeineu.com/tie_app/aboutTie.php";
protected void onCreate(Bundle savedInstanceState) 
{
    super.createDefaultView(savedInstanceState);
    _headerBar.view.setVisibility(View.VISIBLE);
    super.setHeaderTitle("Info");
    init();
    new TIEInfoAsyncTask(getParent(), infoUrl, txtTieInfo).execute();
}//onCreate

public void init()
{
    loadFormFromResource(R.layout.tieinfo);
    txtTieInfo = (TextView)findViewById(R.id.txtTieInfo);
}//init
}//TIEInfo 
```

**我的活动布局**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/txtTieInfo"
android:textSize="12sp"
android:textColor="@color/copper_gold"
android:lineSpacingExtra="5dp"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:20:42.270

您需要滚动才能查看其余文本。将你的 textview 放在一个 scrollView 里面就可以了。

# razor - 在 Umbraco 上编辑 cshtml 文件是否安全？

> ID：13022628
> 
> 赞同：2
> 
> 时间：2012-10-23T02:09:26.123
> 
> 标签：razor, umbraco

我必须对使用 Umbraco 构建的网站进行一些小的修改，我想知道手动编辑 cshtml 文件是否安全？我只需要编辑 html 代码和一些变量的内容。

如果出现问题，将以前版本的 cshtml 文件放回服务器上是否足够或是否需要其他操作？

我是 php 开发人员，我完全不熟悉 .net。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T03:33:37.020

答案是肯定的，您可以使用您选择的文本编辑器直接和在 Umbraco 后端之外编辑 cshtml 文件。事实上，这是*我的*首选方法。我通常在 Visual Studio 中编辑 cshtml 文件，因此我可以获得语法突出显示和一些自动完成功能的好处。

# c++ - 在 C++ IDE 中自定义编译器命令

> ID：13022629
> 
> 赞同：0
> 
> 时间：2012-10-23T02:10:02.223
> 
> 标签：c++, gcc, compiler-construction, directory, glut

是否可以自定义或指定用于在代码块或任何其他 IDE（如 NetBeans 和 Eclipse C++）中编译的命令？

我问这个是因为我尝试了所有这些 IDE，但没有人能找到这些库，即使它在代码帮助列表（NetBeans 7.2）中列出。但是，当我在 Ubuntu 12.04 LTS 的 shell 中编译它时，找到了库并且可以编译程序。

我使用以下命令之一：

```
gcc -lGL -lglut filetoCompile.cpp -o compiled.sh
g++ -lGL -lglut filetoCompile.cpp -o compiled.sh 
```

编译。我正在尝试将 glut 用于开放 GL 的东西，这是它找不到的库。我认为它可能与我将来可能添加的其他第三方库相同，这就是为什么我真的需要修复这个问题，这就是为什么我的计划是让 IDE 使用该命令，因为它可能会起作用。

奇怪的是我的 /usr/local/lib 目录只包含 2 个文件夹：python 2.7 和 python 3.2。我不确定这是否有效果，但这正常吗？不应该在这里找到库并且标题位于/usr/local/include 中吗？

头文件位于`/usr/include`. 这是正确的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:33:40.303

一般来说，是的，这是可能的。

在 Eclipse CDT 中，您可以在此窗口中设置头文件所在的目录：

右键单击项目名称；特性; C/C++ 通用；路径和符号；包括；

在窗口中，您必须添加所有包含您想要自动完成的函数/类的头文件的目录。比如我的配置是：

```
/usr/include/c++/4.4.5
/usr/local/include
/usr/lib/gcc/i486-linux-gnu/4.4.5/include 
```

要找到哪个文件夹包含头文件，您可以使用`find`or`locate`命令，并正确设置 IDE。

# objective-c - 在此算法中填充 NSArray 的最佳方法

> ID：13022638
> 
> 赞同：0
> 
> 时间：2012-10-23T02:11:53.267
> 
> 标签：objective-c, ios, arrays, nsarray

我打算制作一个执行以下操作的程序：

```
Create an NSArray populated with numbers from 1 to 100,000.
Loop over some code that deletes certain elements of the NSArray when certain conditions are met.
Store the resultant NSArray. 
```

然而，上述步骤也会循环多次，所以我需要一种快速的方法来制作这个具有 100,000 个数字元素的 NSArray。

那么最快的方法是什么？

是否有替代使用 for 循环迭代填充数组的方法？例如可以为我快速完成此操作的 NSArray 方法？

或者也许我可以第一次以任何方式制作具有 100,000 个数字的 NSArray。然后使用方法 arraywithArray 创建每个新的 NSArray（用于步骤 1）？（这样做更快吗？）

或者，也许您的想法完全不同，可以实现我想要的。

编辑：在上面的帖子中用 NSMutableArray 替换 NSArray

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:34:41.143

很难提前判断哪种方法最快。我喜欢基于块的功能，例如

```
NSMutableArray *array = ...; // your mutable array

NSIndexSet *toBeRemoved = [array indexesOfObjectsPassingTest:^BOOL(NSNumber *num, NSUInteger idx, BOOL *stop) {
    // Block is called for each number "num" in the array.
    // return YES if the element should be removed and NO otherwise;
}];
[array removeObjectsAtIndexes:toBeRemoved]; 
```

您可能应该从正确工作的算法开始，然后使用 Instruments 进行分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T02:27:38.880

我很确定使用 ac 数组创建数组会是最快的，然后`NSArray`从中创建一个（基准即将推出）。根据您要删除数字的方式，在初始循环中执行此操作可能是最快的：

```
const int max_num = 100000;
...
id *nums = malloc(max_num * sizeof(*nums));
int c = 0;
for(int i = 1; i <= max_num; i++) {
    if(!should_skip(i)) nums[c++] = @(i);
}
NSArray *nsa = [NSArray arrayWithObjects:nums count:c]; 
```

* * *

第一个基准测试有点令人惊讶。对于 100M 个对象：

```
NSArray alloc init:             8.6s
NSArray alloc initWithCapacity: 8.6s
id *nums:                       6.4s 
```

所以数组更快，但没有我预期的那么多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T02:45:21.047

你可能想看看`NSMutableIndexSet`。它旨在有效地存储数字范围。

您可以像这样初始化它：

```
NSMutableIndexSet *set = [[NSMutableIndexSet alloc]
    initWithIndexesInRange:NSMakeRange(1, 100000)]; 
```

然后，您可以像这样从中删除例如 123：

```
[set removeIndex:123]; 
```

或者您可以像这样删除 400 到 409：

```
[set removeIndexesInRange:NSMakeRange(400, 10)]; 
```

您可以像这样遍历集合中的所有剩余索引：

```
[set enumerateIndexesUsingBlock:^(NSUInteger i, BOOL *stop) {
    NSLog(@"set still includes %lu", (unsigned long)i);
}]; 
```

或者，更有效的是，像这样：

```
[set enumerateRangesUsingBlock:^(NSRange range, BOOL *stop) {
    NSLog(@"set still includes %lu indexes starting at %lu",
        (unsigned long)range.length, (unsigned long)range.location);
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T02:22:16.037

您可以使用快速枚举来搜索数组。

```
for(NSNumber item in myArrayOfNumbers)
{
   If(some condition)
   {
        NSLog(@"Found an Item: %@",item);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T02:41:41.533

你可能想重新考虑你在这里做什么。问问自己为什么想要这样一个数组。如果您的目标是操作任意大的整数集合，您可能更喜欢使用`NSIndexSet`（及其可变对应物）。

如果您真的想以`NSArray`最有效的方式操作 a，您将需要实现一个专门为此类工作优化的专用子类。

# ios - 如果在设备上部署了新版本的应用程序，是否可以保留旧版本的数据？

> ID：13022645
> 
> 赞同：1
> 
> 时间：2012-10-23T02:13:08.427
> 
> 标签：ios, xcode

我是 iOS 开发的新手，所以我的问题可能是 n00bish。我正在开发一款适用于 iPad 的应用程序，该应用程序下载 PDF 并存储在 Documents 目录中的设备（iPad）上，因此如果用户没有连接到，他仍然可以阅读它们无线上网。我的问题是：如果有更新版本的应用程序可用并且用户安装了它，它会从设备中删除所有数据（在这种情况下是文档）吗？如果是，如何防止旧数据被删除？我在这个应用程序中使用 CoreData（如果这有帮助）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T02:50:36.223

当用户安装任何应用程序的更新版本时，应用程序的沙盒将保持不变。仅替换应用程序及其资源包。因此，基本上，您存储在**Documents**或**Library**中的任何内容都将在更新过程后保持不变。不能保证**Library/Caches**或**tmp**中的文件会被保留，但无论如何这些文件应该只有临时文件。

# php - 提交中断时停止进程

> ID：13022646
> 
> 赞同：0
> 
> 时间：2012-10-23T02:13:20.707
> 
> 标签：php, html

我提出一个申请，当我（写）一个表单并提交时，查询将进入许多漫长的过程。但是有可能我写了一个错误的密钥，所以我必须通过再次写一个密钥并提交来中断这个过程。但是，前一个进程仍在运行，所以我需要等待前一个进程（使用错误的键）直到完成或关闭网络浏览器，然后再次重复。当我中断新提交时，我可以停止我的应用程序中的所有这些过程吗？谢谢你 ：）

# javascript - 为什么单独依赖作用域链并避免在 Javascript 中显式引用 head 对象是有益的？

> ID：13022647
> 
> 赞同：4
> 
> 时间：2012-10-23T02:13:30.937
> 
> 标签：javascript, scope, global

我一直在阅读 Cody Lindley 的这本书“Javascript Enlightenment”。在第 82 页上，他指出：“显式（例如 window.alert() 与 alert()）在性能方面会花费更多。如果您仅依赖作用域链并避免显式引用 head 对象，则速度会更快，即使你知道你想要的属性包含在全局范围内。”

我有点好奇这是为什么。我认为情况正好相反，因为 Javascript 解释器可以跳过检查范围并直接找到它。我只是不明白不指定某物的确切地址有什么好处。

我的意思是，我知道每次我想使用包含在全局范围内的东西时，我都不想输入 window.whatever() ，而且我认为不指定会更快，这很好。只是不知道为什么。

只是那些“想知道”的事情之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T02:27:39.163

解释器总是必须使用作用域链。当你编写`window.alert()`它时，它必须沿着作用域链向上查找`window`- 你可能有一个名为的局部变量`window`，它会遮蔽头部的那个，所以它不能假设这是全局对象。

如果 JavaScript 有明确表示顶级上下文的语法，那会更快。但事实并非如此。

# asp.net-mvc - MVC 4 在登录屏幕的 returnUrl 上返回 404

> ID：13022650
> 
> 赞同：0
> 
> 时间：2012-10-23T02:14:42.440
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor, http-status-code-404

我有一个简单的 MVC 应用程序 - 员工列表、删除员工的按钮和登录屏幕

当用户按下按钮删除员工时，他们被要求登录

这会将它们从 EmployeeController 带到处理登录的 AccountController。returnUrl 也传递给它。用户成功通过身份验证，Account 控制器转到 Redirect 到 ReturnUrl，这就是它抛出 404 的地方。

returnUrl = /Employees/Delete/127 - 员工的 ID。据我所见，这是在控制器和 RouteConfig 中正确配置的。

当我删除 [Authorise] 属性时，它工作得很好。所以我怀疑它必须与重定向有关，但我不明白为什么？

**编辑**：我还在视图中使用 FormMethod.Post 尝试了 HttpPost，但它没有任何区别，但是在离开登录后我不知道它是 os post 还是 get - 或者重定向到返回 url 是否会生成一个 Get 和不是帖子？

**再次编辑**：考虑到这一点，它可能不是一个好的设计。我要求用户在按下删除按钮后进行授权。除非它们已经被授权，否则我可能不应该公开删除按钮，但无论如何都可以这样做吗？

![404错误](../Images/87c73f84467c48be0c5e7abf2f49875c.png)

![具有重定向的帐户控制器](../Images/d276a2b46352ddf215a6c9ef4e5834dc.png)

![查看生成删除按钮](../Images/2d2e551b092f89c6a3e737548d16ffe5.png)

![具有删除操作的员工控制器](../Images/b6bbfe13b93ee6ebf1c7c9c13593206c.png)

![生成的html](../Images/29d61551d3577d3e799e3290c99a5b3e.png)

![路由配置](../Images/a3b9382a8fc6cc4be72021387a527ee2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:03:19.730

我认为这可能是因为 Delete 操作是**HttpPost**并且在重定向时您正在向*Employee/Delete*发出**GET**

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T20:40:32.313

将 [HttpPost] 属性更改为 [HttpGet]。重定向将调用 Get 方法*

# c# - 如何从 `Object?` 中取出一个可以为空的对象？

> ID：13022652
> 
> 赞同：0
> 
> 时间：2012-10-23T02:15:42.393
> 
> 标签：c#, nullable

我正在尝试使用可选参数`SpriteFont = myFont`工作的方法。因为 spritefont 不是编译时间常数，所以我不能使用它，所以我决定尝试一下`SpriteFont? = null`：

```
void MyMethod(int x, SpriteFont? font = null)
{
    SpriteFont f;
    if (font == null) f = defaultFont; else f = font; // Cannot convert type 'Microsoft.Xna.Framework.Graphics.SpriteFont?' to 'Microsoft.Xna.Framework.Graphics.SpriteFont'
} 
```

我如何取出我`SpriteFont`的`SpriteFont?`？

**UPD：**这*可能*是默认情况下无法从可空类型转换为基本类型的类型的问题。`(SpriteFont)font`仍然导致“无法转换”。

**UPD2：**默认情况下可以`SpriteFont`为空。不过，我现在知道如何使用`nonNullable?`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T02:18:31.503

您还可以使用`??`运算符：

```
f = font ?? defaultFont; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:18:01.153

使用`.Value`：

```
f = font.HasValue ? font.Value : defaultFont; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T02:18:46.890

可以通过以下方式将 Nullable 转换为不可为空的类型：

*   `(Type)variable`;
*   `variable.Value`

# ajax - 视图中的 MVC3 Ajax Ajax.ActionLink Shared _Layout.cshtml

> ID：13022656
> 
> 赞同：0
> 
> 时间：2012-10-23T02:17:01.113
> 
> 标签：ajax, asp.net-mvc-3

我有一个 mvc3 Web 应用程序我在 Views Shared_Layout.cshtml 下使用了一个共享视图

_Layout.cshtml 包含的标记就像我们的应用程序的母版页一样

```
@using .............
@using ......

<!DOCTYPE html>
<html style="overflow: hidden">
    <head>
        <title>@ViewBag.Title</title>

        <link href="@Url.Content("~/Content/Site.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/themes/metro-light/jquery-ui-1.8.16.custom.css")" rel="stylesheet" type="text/css" />
        @RenderSection("CSS", false)
        <script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript"> </script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"> </script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"> </script>
        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.16.custom.min.js")" type="text/javascript"> </script>
        <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"> </script>
        ...... (some other scripts here)
        ......

    </head>
    <body style="height: 100%">
        <!-- page -->
        <div class="page">
            <div id="header">
                <div id="title">
                    <img alt="" src="@Url.Content("~/Content/images/Logo.png")"/>@ViewBag.ApplicationName
                </div>
                <div id="logindisplay">
                    Welcome <strong>@User.Identity.Name</strong>
                </div>
                <ul id="menu">              
                    <li>@Ajax.ActionLink("Dashboard", "Index","Dashboard", new {@class = "Map View".Equals(ViewBag.Title) ? "selected" : null},new AjaxOptions { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" })</li>
                    <li>@Ajax.ActionLink("Map View", "Index", "Map", new { @class = "Map View".Equals(ViewBag.Title) ? "selected" : null },new AjaxOptions { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" })</li>
                    <li>@Ajax.ActionLink("Settings", "Index", "Settings", new { @class = "Settings".Equals(ViewBag.Title) ? "selected" : null }, new AjaxOptions { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" })</li>
                    <li>@Ajax.ActionLink("About", "Index", "AppInfo", new { @class = "About".Equals(ViewBag.Title) ? "selected" : null }, new AjaxOptions { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" })</li>
                </ul>
            </div>
            <div id="main">
                @RenderBody()
            </div>
        </div>
        <!-- footer -->
        <div id="footer">

        </div>
        <form id="__ajaxAntiForgeryForm" action="#" method="post">@Html.AntiForgeryToken()</form>
    </body> 

</html> 
```

基本上，从上面的代码中，我用控制器返回的任何内容替换我的“主”div

```
new AjaxOptions { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" } 
```

这是我的控制器（没什么特别的）

*仪表板控制器*

```
[UiException]
public ActionResult Index()
{
    return View();
} 
```

*地图控制器*

```
[UiExceptionAttribute]
public ActionResult Index()
{
return View();
} 
```

当我加载页面并单击链接“仪表板”或“地图视图”时，整个页面会闪烁并刷新。应该是@Ajax.ActionLink 不会刷新整个页面，而只是“主” div。有没有办法让类似 ajax 的行为只刷新内容部分？有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:57:23.070

这是因为您要从包含整个母版页（即您的布局）的控制器代码返回整个视图。

您只需要呈现仪表板或地图的部分视图。喜欢：

仪表板控制器

```
[UiException]
public ActionResult Index()
{
return  PartialView("yourviewname",model)
}

protected string RenderPartialViewToString(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
            viewName = ControllerContext.RouteData.GetRequiredString("action");

        ViewData.Model = model;

        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);
            return sw.GetStringBuilder().ToString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:02:27.017

如上所述，我发现这也很有用.. 没有将视图放在 _Shared 文件夹上。

```
/// <summary>
/// Dynamically Render a View using the passed-in context
/// </summary>
/// <param name="controllerContext"></param>
/// <param name="viewName"></param>
/// <param name="model"></param>
/// <returns></returns>
public static string RenderView(ControllerContext controllerContext, string viewName, object model)
{
    controllerContext.Controller.ViewData.Model = model;
    using (var sw = new StringWriter())
    {
        var viewResult = ViewEngines.Engines.FindPartialView(controllerContext, viewName);
        var viewContext = new ViewContext(controllerContext, viewResult.View, controllerContext.Controller.ViewData, controllerContext.Controller.TempData, sw);
        viewResult.View.Render(viewContext, sw);
        viewResult.ViewEngine.ReleaseView(controllerContext, viewResult.View);
        return sw.GetStringBuilder().ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:23:01.580

您的不显眼的 Javascript 包含丢失，因此操作链接实际上不是“真正的”ajax 链接，因为没有附加事件处理程序（unobtrusive-ajax 脚本基本上查找具有属性 data-ajax=true 的所有链接并将方法附加到它做ajax的东西）。

所以也包括该`jquery.unobtrusive-ajax.min.js`文件，它应该可以按预期工作。

# socket.io - 如何使用铁路创建 socket.io 示例

> ID：13022658
> 
> 赞同：2
> 
> 时间：2012-10-23T02:17:21.047
> 
> 标签：socket.io

我正在关注socket.io的示例程序nodejs-drawing-game（http://tutorialzine.com/2012/08/nodejs-drawing-game/），使用railwayjs框架创建一个新副本（http:// /railwayjs.com/)。顺便说一下，我的开发环境是win7的node.js版。

我可以在本地电脑上运行 nodejs-drawing-game 本身，但是当我将它作为 wailwayjs 的模块运行时，我没有运气。我是 node.js 的新手，railwayjs ......任何人都可以帮助我克服这个卡住？任何帮助表示赞赏。

■ 项目目录：

```
+ yeahjs
+++ app / controllers
----- draw_controller.js
+++ app / views / draw
----- index.ejs   // see code as below
+++ node_modules
----- socket.io
----- socket.io-client    
+++ public
+++++ images
+++++ javascripts
----- script.js // the same as you can see on http://tutorialzine.com/2012/08/nodejs-drawing-game/
+++++ stylesheets 
```

■ draw_controller.js

```
load('application');
action(function index() {   
    draw_app.init(); 
    render({
        title: "draw#index"
    });
});

var draw_app = {
    init: function(){
        // Including libraries
        var io = require('socket.io').listen(app);

        // Delete this row if you want to see debug messages
        io.set('log level', 3);

        // Listen for incoming connections from clients
        io.sockets.on('connection', function (socket) {

            // Start listening for mouse move events
            socket.on('mousemove', function (data) {

                // This line sends the event (broadcasts it)
                // to everyone except the originating client.
                socket.broadcast.emit('moving', data);
            });
        });
    }
} 
```

■ 索引.ejs

```
<!-- The stylesheets -->
<link rel="stylesheet" href="stylesheets/styles.css" />

<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<div id="cursors">
    <!-- The mouse pointers will be created here -->
</div>

<canvas id="paper" width="1000" height="600" style="border:2px solid;">
    Your browser needs to support canvas for this to work!
</canvas>

<hgroup id="instructions">      
    <h1>Draw anywhere!</h1>
    <h2>You will see everyone else who's doing the same.</h2>
    <h3>Tip: if the stage gets dirty, simply reload the page</h3>
</hgroup>

<!-- JavaScript includes. Notice that socket.io.js is served by node.js -->
<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script src="javascripts/script.js"></script> 
```

■ NODE- 控制台：

```
debug: broadcasting packet
debug: xhr-polling received data packet 5:::{"name":"mousemove","args":[{"x":181,"y":139,"drawing":false,"id":599253111261}]}
debug: broadcasting packet
debug: setting request GET /socket.io/1/websocket/IuToQtNbcjsODD1VQjSa
debug: set heartbeat interval for client IuToQtNbcjsODD1VQjSa
debug: websocket writing 7:::1+0
warn: client not handshaken client should reconnect
info: transport end (error)
debug: set close timeout for client IuToQtNbcjsODD1VQjSa
debug: cleared close timeout for client IuToQtNbcjsODD1VQjSa
debug: cleared heartbeat interval for client IuToQtNbcjsODD1VQjSa
debug: discarding transport
debug: clearing poll timeout
debug: discarding transport
debug: setting request GET /socket.io/1/websocket/IuToQtNbcjsODD1VQjSa
debug: set heartbeat interval for client IuToQtNbcjsODD1VQjSa
debug: set close timeout for client IuToQtNbcjsODD1VQjSa
info: socket error Error: write Unknown system errno 10058
　　　　at errnoException (net.js:769:11)
　　　　at Socket._write (net.js:551:19)
　　　　at Socket.write (net.js:510:15)
　　　　at WebSocket.onSocketConnect (C:\public_html\yeahjs\node_modules\socket.io\lib\transports\websocket\hybi-16.js:132:17)
　　　　at WebSocket.Transport.handleRequest (C:\public_html\yeahjs\node_modules\socket.io\lib\transport.js:71:10)
　　　　at WebSocket.Transport (C:\public_html\yeahjs\node_modules\socket.io\lib\transport.js:31:8)
　　　　at new WebSocket (C:\public_html\yeahjs\node_modules\socket.io\lib\transports\websocket\hybi-16.js:59:13)
　　　　at new WebSocket (C:\public_html\yeahjs\node_modules\socket.io\lib\transports\websocket.js:31:17)
　　　　at Manager.handleClient (C:\public_html\yeahjs\node_modules\socket.io\lib\manager.js:660:19)
　　　　at Manager.handleUpgrade (C:\public_html\yeahjs\node_modules\socket.io\lib\manager.js:617:8)
debug: xhr-polling received data packet 5:::{"name":"mousemove","args":[{"x":200,"y":108,"drawing":true,"id":599253111261}]}
debug: broadcasting packet
debug: xhr-polling received data packet 0::
debug: got disconnection packet
info: transport end by forced client disconnection
info: transport end (booted) 
```

# php - 为什么我不能使用 foreach 循环更新数组中的数据？

> ID：13022660
> 
> 赞同：12
> 
> 时间：2012-10-23T02:17:35.787
> 
> 标签：php, for-loop, foreach

我正在尝试对数组中的数据运行清理作业，特别是将纪元时间转换为 YYYY-MM-DD。

我最初尝试了这个功能：

```
foreach ($data as $row) {
    $row['eventdate'] = date('Y-m-d', $row['eventdate']);
}

echo '<pre>';
print_r($data);
echo '</pre>'; 
```

但是，当我输出它时，foreach 循环没有更新数据。

以下 for 循环确实有效：

```
for ($i=0; $i<count($data); $i++) {
    $data[$i]['eventdate'] = date('Y-m-d', $data[$i]['eventdate']);
} 
```

为什么第一个循环失败而第二个循环工作？他们不一样吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-23T02:20:27.423

当您`foreach`以当前方式使用循环时，`foreach ($data as $row) {`,`$row`正在“按值”使用，而不是“按引用”。

`&`尝试通过添加来更新到参考`$row`：

```
foreach ($data as &$row) {
    $row['eventdate'] = date('Y-m-d', $row['eventdate']); 
```

或者，您可以使用键/值方法：

```
foreach ($data as $index => $row) {
    $data[$index]['eventdate'] = date('Y-m-d', $row['eventdate']); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T02:20:17.743

初始示例仅按值而不是按引用传递行。

从文档

> 为了能够直接修改循环内的数组元素，在 $value 之前加上 &。在这种情况下，该值将通过引用分配

因此要么通过引用传递

```
foreach ($data as &$row) {
   $row['eventdate'] = date('Y-m-d', $row['eventdate']);
} 
```

或使用更明确的语法

```
foreach ($data as $key => $value) {
    $data[$key]['eventdate'] = date('Y-m-d', $value['eventdate']);
} 
```

同样重要的是文档中的这个警告

> 即使在 foreach 循环之后，对 $value 和最后一个数组元素的引用仍然存在。建议通过 unset() 销毁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T02:21:43.377

因为在foreach语句中，需要通过引用传递第二个参数。

检查文档：[http ://www.php.net/manual/en/control-structures.foreach.php](http://www.php.net/manual/en/control-structures.foreach.php)

# jquery - 地理位置和 jquery 帖子

> ID：13022669
> 
> 赞同：2
> 
> 时间：2012-10-23T02:18:45.077
> 
> 标签：jquery, html, post, geolocation

我有一个问题，我已经尝试了 4 个小时，但没有运气。收到职位后，我需要在数据库中进行搜索并获得结果，然后将其显示在屏幕上。

对数据库的查询已完成，但成功功能永远不会收到数据，有什么想法吗？

```
 function initiate_geolocation() {  
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_errors, {enableHighAccuracy:true});  
    } else {
       yqlgeo.get('visitor', normalize_yql_response);
       /*jQuery("#current-location").html("No geolocation support."); */
    }

    return false;
}

function handle_geolocation_query(position){  
    jQuery.post("/index.php?r=location/current", { "latitude": position.coords.latitude, "longitude": position.coords.longitude },
                                        function(data){
                                            jQuery("#zipcode").val(data);
                                        }, "json");    
}  

function handle_errors(error) {
           /*Not important*/
} 

function normalize_yql_response(response)  
    {  
        /*Not important*/
    } 
```

# wordpress - MathJax 渲染问题

> ID：13022672
> 
> 赞同：1
> 
> 时间：2012-10-23T02:19:07.687
> 
> 标签：wordpress, mathjax

我在我的 wordpress 博客中使用 MathJax，但我得到了一些奇怪的东西：

![例子](../Images/3fca0bac57aefb6cdeac1da6ce115ca7.png)

我使用的代码是`$0.\overline{9} = 1$`. 是我做错了什么还是仅仅是 MathJax 的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:02:33.633

我正在使用连字符，有时它会尝试在 tex 代码被 MathJax 呈现之前对其进行连字符。在 mathjax 配置中包含以下代码可以解决问题。

```
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  MathJax.InputJax.TeX.prefilterHooks.Add(function (data) {
    data.math = data.math.replace(/\u00AD/g,"");
  });
}); 
```

该代码告诉 mathjax 忽略连字符。

# java - 我的vps有足够的内存，但是vm无法运行

> ID：13022674
> 
> 赞同：1
> 
> 时间：2012-10-23T02:19:33.000
> 
> 标签：java, tomcat, jvm

它发生在我的vps中。

```
[root@kunphen ~]# free -m
             total       used       free     shared    buffers     cached
Mem:         12067         87      11980          0          0          0
-/+ buffers/cache:         87      11980
Swap:            0          0          0
[root@kunphen ~]# java -version
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

当我将其更改为“java -Xms16m -Xmx16m -version”时，它可以工作。我尝试了很多次。它的最大大小是 22m，但我的内存也有很多空闲区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:31:12.943

像这样运行它：

```
_JAVA_OPTIONS="-Xmx384m" play <your commands> 
```

或者`play "start 60000" -Xms64m -Xmx128m -server`

# android - 当方向改变android时保存活动状态

> ID：13022677
> 
> 赞同：21
> 
> 时间：2012-10-23T02:20:00.390
> 
> 标签：android

我有一个 aacplayer 应用程序，当方向从纵向变为横向时，我想保存我的活动状态。TextViews 似乎不是空的，我尝试使用以下方法冻结我的 textview：

```
android:freezesText="true" 
```

我的清单：

```
android:configChanges="orientation" 
```

我也试过这个：

```
@Override
    public void onConfigurationChanged(Configuration newConfig){
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.main2); 
```

因此，当方向更改为横向时，我可以看到我的 layout-land main2.xml，它可以工作，但我的 textview 会消失并显示为空。流媒体音乐效果很好。我可以在方向改变时收听它，但是每次我改变设备的方向时，textviews 中的文本都会消失。

我应该怎么做才能解决这个问题，以便我可以保存状态？

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
....
.... 
```

非常感谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-23T03:24:17.500

当您的方向改变时，您不必手动更改为横向布局文件。Android 会自动为您执行此操作。当方向改变时，Android 会破坏您当前的活动并再次创建一个新活动，这就是您丢失文本的原因。

假设您想要纵向和横向的单独布局，您需要做 2 个部分。

1.  假设您有 2 个纵向和横向 XML 布局文件，请将 main.xml 布局文件放在以下文件夹中：

    res/layout/main.xml <-- 这将是您的纵向布局
    res/layout-land/main.xml <-- 这将是您的横向布局

    这就是您需要做的所有事情，您不必触摸清单文件来修改`android:configChanges="orientation"`或覆盖`onConfigurationChanged()`. 实际上，建议您不要为要达到的目标而触摸它。

2.  现在从文本视图中保存文本 =) 假设您的文本视图在布局 xml 文件中被命名为 MyTextView。您的活动将需要以下内容：

    ```
    private TextView mTextView;
    private static final String KEY_TEXT_VALUE = "textValue";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       mTextView = (TextView) findViewById(R.id.main);
       if (savedInstanceState != null) {
          CharSequence savedText = savedInstanceState.getCharSequence(KEY_TEXT_VALUE);
          mTextView.setText(savedText);
       }
    }

    @Override
    protected void onSaveInstanceState (Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putCharSequence(KEY_TEXT_VALUE, mTextView.getText());
    } 
    ```

基本上，每当 Android 销毁并重新创建您的 Activity 以更改方向时，它都会`onSaveInstanceState()`在销毁之前调用并`onCreate()`在重新创建之后调用。`onCreate()`无论您在 onSaveInstanceState 中的包中保存什么，都可以从参数 中取回。

因此，您希望将文本视图的值保存在 中`onSaveInstanceState()`，然后读取它并在 onCreate() 中填充您的文本视图。如果是第一次创建活动（不是由于轮换更改），则 savedInstanceState 在`onCreate()`. 你也可能不需要`android:freezesText="true"`

如果需要，您还可以尝试保存其他变量，因为当活动被销毁和重新创建时，您将丢失存储的所有变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-27T13:17:49.367

有两种方法可以做到这一点，第一种是在`AndroidManifest.xml`文件中。您可以将此添加到您的活动标签中

```
android:configChanges="keyboardHidden|orientation|screenSize|screenLayout" 
```

或者，您可以覆盖两个可以解决此问题的方法。这种方法需要更多的努力，但可以说要好得多。`onSaveInstanceState`保存活动被杀死之前的状态，并在[参考官方文档](https://developer.android.com/guide/components/activities/activity-lifecycle)`onRestoreInstanceState`后恢复该信息以获得更深入的了解。`onStart()`

在下面的示例代码中，我保存了 2 个`int`值，即来自微调器的当前选择以及一个单选按钮。

```
 @Override
    public void onSaveInstanceState(@NonNull Bundle savedInstanceState) {
        spinPosition = options.getSelectedItemPosition();
        savedInstanceState.putInt(Constants.KEY, spinPosition);
        savedInstanceState.putInt(Constants.KEY_RADIO, radioPosition);
        super.onSaveInstanceState(savedInstanceState);

    }

    // And I am restoring those values with `getInt`, then I can pass those stored values into the spinner and radio button group to select the same values that we saved earlier. 

    @Override
    public void onRestoreInstanceState(@NotNull Bundle savedInstanceState) {
        spinPosition = savedInstanceState.getInt(Constants.KEY);
        radioPosition = savedInstanceState.getInt(Constants.KEY_RADIO);
        options.setSelection(spinPosition, true);
        type.check(radioPosition);
        super.onRestoreInstanceState(savedInstanceState);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-16T11:24:35.377

```
static CharSequence savedText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if(savedText != null) {
        TextView mTextView = (TextView) findViewById(R.id.main);
        mTextView.setText(savedText);
    }
}

// Another function in activity, when you change text
public void actionButton(View view) {
    // Change and save text in textView
    savedText = "Change text";
    mTextView.setText(savedText);
} 
```

**它为我工作。但我认为它对于 android 来说不是很好的代码风格和架构。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T21:52:52.343

我在**KOTLIN**静态 var / val 中使用：

```
class MyFragment : Fragment()
{
     //all my code
     //access to static vars -> MyStaticClass.hello
}

class MyStaticClass 
{
    companion object {
        var hello: String = "Static text"
        var number_static: Int = 0
    }
} 
```

# html - 如果元素位置更改 onmousedown，则单击未注册

> ID：13022682
> 
> 赞同：0
> 
> 时间：2012-10-23T02:20:18.540
> 
> 标签：html, css, onclick

`<a>`我刚刚在一个元素上发现了这个奇怪的问题。我想制作一个带有“下推”动画的纯 CSS 按钮。

或多或少是这样的：

```
.button:active {
position: relative;
top: 10px;
} 
```

问题是，如果您在文本下方执行 mousedown 并在文本移动到指针下方时释放链接似乎不起作用（动画运行正确但 onclick 或 href 不起作用）。你可以在这个小提琴中看到“错误”或任何东西：

[http://jsfiddle.net/H9RgD/](http://jsfiddle.net/H9RgD/)

我已经尝试过不同的东西，比如使用填充来创建动画，但它仍然不起作用。我可以确认它不在 Chrome 22（截至今天的最新版本）中。为什么会这样？我怎样才能解决这个问题来为一个 CSS 按钮设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:21:30.783

无法回答“为什么”（我认为这可能是一个错误）。好像我记得以前在 Chrome 上遇到过类似的问题，并想出了一个与我在这里提供的类似的解决方法。不知何故，添加伪元素的“覆盖”会导致整体变得“可点击”。在你的情况下，我注意到如果我点击顶部`div`，它也没有注册，但是当我将`top`调整添加到`:before`状态`:active`时，这似乎也解决了。

[这个小提琴](http://jsfiddle.net/6bEq8/9/)似乎有一个可行的解决方案。HTML 与您的小提琴相同（除了我将内容添加到警报中）：

**HTML**

```
<div class="tabs-container">
<div onclick="alert('here')">Click below the text</div>
</div>​ 
```

**CSS**

```
.tabs-container div{
    display: inline-block;
    background: whitesmoke;    
    padding-bottom: 5px;
    font-size: 25px;
    border-bottom: 5px solid grey;
    position: relative;
}

.tabs-container div:active{
    top: 10px;
    border-bottom: 0;
}

.tabs-container div:before {
    position: absolute;
    content: '';
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.tabs-container div:active:before {
    top: -10px;
} 
```

​</p>

# c++ - 有人可以解释如何在 C++ 函数调用中使用 c 字符串吗？

> ID：13022697
> 
> 赞同：-1
> 
> 时间：2012-10-23T02:22:13.253
> 
> 标签：c++, pointers

如果我有一个包含参数 char *a 或 char *a[] 的函数，我可以在函数中对它们执行哪些操作？char 指针与常规指针的工作方式有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:31:33.897

指针就是指针，无论它引用什么数据类型。

当您从指针索引值时，它指针指向的内存被视为指针所代表的任何数据类型的数组。

字符串只是一个以空（零）字符结尾的字符数组*。*

您可以使用 C 字符串库对 C 字符串（`strlen`、`strcpy`、`strcat`等）进行*操作*，并且可以通过将`char*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:25:09.287

```
char* 
```

只是一个指向字符的指针，因此您可以对指针执行的任何操作都可以对字符指针执行。与 char* 和 int* 的唯一区别是指针的类型。

# java - Spring getter 和 setter 依赖？

> ID：13022702
> 
> 赞同：2
> 
> 时间：2012-10-23T02:23:51.033
> 
> 标签：java, spring, inversion-of-control, setter, getter

我想确定我是否理解正确。Spring需要一个setter来注入一个字段引用？它不能通过将其检测为公共领域来做到这一点吗？

有没有替代方案。据我了解，Java EE 的 @Inject 注释可以毫无问题地做到这一点。但我一直更倾向于春天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:17:46.960

这取决于您如何创建 bean。Spring 不需要设置器。还有许多其他方法：

*   通过字段级别的注释自动装配（带或不带限定符）
*   构造函数注入（通过xml或代码中的注释）

公共领域（如您所建议的）可能会起作用，尽管我从未尝试过，并且即使这样做也会建议不要这样做。

不幸的是，XML 方法不考虑私有字段（我知道）。您要么需要添加一个设置器，使用构造函数，要么设置某种自动装配。

请记住，自动装配可以与 XML 结合使用。即使您通过 xml 创建 bean（与 @Component 和组件扫描之类的东西相反），Spring 也会注意您的接线注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:03:29.687

没有必要让 Setter 来注入引用，您可以在类的公共变量或 setter 方法上使用 Autowire，您也可以使用 constructor-arg 注入 bean，这是注入依赖项的好方法，自动装配可以是也在构造函数上完成。@inject 也具有与@autowired 相同的功能，但是@Autowired 有一个额外的行为，它在内部也使用@required 属性，以查看bean 是否具有引用并正确注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:55:13.047

除了 setter 注入之外，Spring 还为 DI 提供了几种替代方案。例如，您可以使用[构造函数注入](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-constructor-injection)。或者，您可以将 Spring 的[@Autowired](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-autowired-annotation)注释用于构造函数、字段或 setter 注入。既然你提到了它，我想你也会有兴趣知道 Spring 支持[@Inject](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-inject-named)注释。

# android - 在 Eclipse 中使用自定义 InstrumentationTestRunner 会导致错误

> ID：13022706
> 
> 赞同：6
> 
> 时间：2012-10-23T02:24:27.557
> 
> 标签：android, unit-testing

我在 Eclipse 中有一个单独的测试项目，它已经在命令行和 Eclipse 中成功运行了一段时间。在使用 Jenkins 运行我的测试时，我遇到了标准 InstrumentationTestRunner 不以 Jenkins 支持的 xml 格式输出的问题。我在互联网上阅读过使用自定义 InstrumentationTestRunner。这在使用 ADB 的命令行中有效，但在作为 Android 测试用例运行时在 Eclipse 中失败。

我已经下载了一个自定义仪器测试运行程序（com.neenbedankt.android.test）并将其添加到 AndroidManifest 中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testedapplication.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <instrumentation
        android:name="com.neenbedankt.android.test.InstrumentationTestRunner"
        android:targetPackage="com.testedapplication" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>    
</manifest> 
```

这是我在 Eclipse 中遇到的错误：

[测试项目] 未正确配置以运行测试：在其 AndroidManifest.xml 中找不到检测 android.test.InstrumentationTestRunner 的 targetPackage 属性！

你可以看到我已经在那里设置了 targetPackage，所以我不确定我还能做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T03:09:46.390

在您的 AndroidManifest.xml 中添加这两种工具。

```
<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="com.example.myapp" />

<instrumentation
    android:name=".MyRunner"
    android:targetPackage="com.example.myapp" /> 
```

然后转到 Package explorer --> $(Your Test Prject$) --> Run As --> Run configurations --> Android JUnit Test --> $(Your Test Project) --> Instrumentation Runner 并在那里选择你的跑步者.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T21:43:19.373

要让 Eclipse 在运行为/android junit 时默认选择自定义运行器 - 只需在清单文件中切换顺序即可。确保您的优先

```
<instrumentation
android:name="*.Custom.TestRunner"
android:targetPackage="com.*" />

<instrumentation
android:name="*.InstrumentationTestRunner"
android:targetPackage="com.*" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:07:16.863

由于我看不到您的整个项目设置，因此我会尝试以下几个清单。

1.  您在 Eclipse 中有单独的测试项目吗？上面的检测块是在源项目的清单文件中还是在测试项目的清单文件中？

2.  您是否包含 <uses-library android:name="android.test.runner" /> 块？

3.  您是否将测试项目的检测块放在 <application> 块之外，将 <uses-library> 块放在测试项目的应用程序块内？

4.  您是否尝试通过“新建项目-> Android 测试项目”在 Eclipse 中创建一个测试项目，并在添加源代码后更改检测类？如果您不更改仪器类，它会起作用吗？

5.  您是否通过执行“运行方式-> Android JUnit 测试”在 Eclipse 中运行测试？

如果您已经完成了所有这些，我认为粘贴整个 AndroidManifest 文件将有助于澄清一点，以及您是否有 2 个单独的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:56:22.867

啊，到目前为止，我已经能够通过清单文件中描述的 android.test.InstrumentationRunner 运行器和客户测试运行器来使其工作。我似乎从 Eclipse 运行将使用 android.test.InstrumentationRunner 并且从命令行运行将使用自定义测试运行器，如果它在 ant 脚本中设置。

# java - 无需下载证书的 Java 和 HTTPS url 连接

> ID：13022717
> 
> 赞同：54
> 
> 时间：2012-10-23T02:26:42.870
> 
> 标签：java, ssl, https

此代码连接到 HTTPS 站点，我假设我没有验证证书。但是为什么我不必为该站点在本地安装证书呢？我不应该在本地安装证书并为该程序加载它还是在幕后下载？客户端到远程站点之间的流量在传输中是否仍然加密？

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;
import java.security.cert.X509Certificate;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class TestSSL {

    public static void main(String[] args) throws Exception {
        // Create a trust manager that does not validate certificate chains
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }
            public void checkClientTrusted(X509Certificate[] certs, String authType) {
            }
            public void checkServerTrusted(X509Certificate[] certs, String authType) {
            }
        } };
        // Install the all-trusting trust manager
        final SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        // Create all-trusting host name verifier
        HostnameVerifier allHostsValid = new HostnameVerifier() {
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }
        };

        // Install the all-trusting host verifier
        HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);

        URL url = new URL("https://www.google.com");
        URLConnection con = url.openConnection();
        final Reader reader = new InputStreamReader(con.getInputStream());
        final BufferedReader br = new BufferedReader(reader);        
        String line = "";
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }        
        br.close();
    } // End of main 
} // End of the class // 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-23T02:31:53.403

您不必在本地加载证书的原因是您已明确选择不使用信任所有证书的信任管理器验证证书。

流量仍将被加密，但您正在打开与中间人攻击的连接：您正在与某人秘密通信，您只是不确定它是您期望的服务器还是可能的攻击者。

如果您的服务器证书来自知名 CA，是与 JRE 捆绑的默认 CA 证书捆绑包的一部分（通常是`cacerts`文件，请参阅 JSSE 参考指南），您可以只使用默认信任管理器，您不必设置这里有任何东西。

如果您有一个特定的证书（自签名或来自您自己的 CA），您可以使用默认的信任管理器，或者使用特定的信任库初始化一个，但是您必须在您的信任库中显式导入证书（独立后验证），如[本答案](https://stackoverflow.com/a/859271/372643)中所述。您可能也对[这个答案](https://stackoverflow.com/a/11145349/372643)感兴趣。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-23T02:34:52.327

> 但是为什么我不必为该站点在本地安装证书呢？

那么您正在使用的代码被明确设计为接受证书而不做任何检查。这不是好的做法......但如果这是您想要做的，那么（显然）不需要安装您的代码明确忽略的证书。

> 我不应该在本地安装证书并为该程序加载它还是在幕后下载？

不，也不。往上看。

> 客户端到远程站点之间的流量在传输中是否仍然加密？

是的。但是，问题在于，由于您已告诉它信任服务器的证书而不进行任何检查，因此您不知道您是在与真实服务器交谈，还是与其他*伪装*成真实服务器的站点交谈。这是否是一个问题取决于具体情况。

* * *

> 如果我们以浏览器为例，通常浏览器不会要求用户为访问的每个 ssl 站点显式安装证书。

浏览器预装了一组受信任的根证书。大多数情况下，当您访问“https”站点时，浏览器可以验证该站点的证书（最终通过证书链）是否受到这些受信任证书之一的保护。如果浏览器无法将链开头的证书识别为受信任的证书（或者如果证书已过期或其他无效/不适当），则会显示警告。

Java 的工作方式相同。JVM 的密钥库有一组受信任的证书，并且使用相同的过程来检查证书是否受到受信任的证书的保护。

> java https客户端api是否支持某种机制来自动下载证书信息？

否。允许应用程序从随机位置下载证书，并将它们（作为受信任的）安装在系统密钥库中将是一个安全漏洞。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-04T11:32:10.437

使用最新的 X509ExtendedTrustManager 而不是 X509Certificate，如下所示：[java.security.cert.CertificateException：证书不符合算法约束](https://stackoverflow.com/questions/14149545/java-security-cert-certificateexception-certificates-does-not-conform-to-algori)

```
 package javaapplication8;

    import java.io.InputStream;
    import java.net.Socket;
    import java.net.URL;
    import java.net.URLConnection;
    import java.security.cert.CertificateException;
    import java.security.cert.X509Certificate;
    import javax.net.ssl.HostnameVerifier;
    import javax.net.ssl.HttpsURLConnection;
    import javax.net.ssl.SSLContext;
    import javax.net.ssl.SSLEngine;
    import javax.net.ssl.SSLSession;
    import javax.net.ssl.TrustManager;
    import javax.net.ssl.X509ExtendedTrustManager;

    /**
     *
     * @author hoshantm
     */
    public class JavaApplication8 {

        /**
         * @param args the command line arguments
         * @throws java.lang.Exception
         */
        public static void main(String[] args) throws Exception {
            /*
             *  fix for
             *    Exception in thread "main" javax.net.ssl.SSLHandshakeException:
             *       sun.security.validator.ValidatorException:
             *           PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:
             *               unable to find valid certification path to requested target
             */
            TrustManager[] trustAllCerts = new TrustManager[]{
                new X509ExtendedTrustManager() {
                    @Override
                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                        return null;
                    }

                    @Override
                    public void checkClientTrusted(X509Certificate[] certs, String authType) {
                    }

                    @Override
                    public void checkServerTrusted(X509Certificate[] certs, String authType) {
                    }

                    @Override
                    public void checkClientTrusted(X509Certificate[] xcs, String string, Socket socket) throws CertificateException {

                    }

                    @Override
                    public void checkServerTrusted(X509Certificate[] xcs, String string, Socket socket) throws CertificateException {

                    }

                    @Override
                    public void checkClientTrusted(X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {

                    }

                    @Override
                    public void checkServerTrusted(X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {

                    }

                }
            };

            SSLContext sc = SSLContext.getInstance("SSL");
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

            // Create all-trusting host name verifier
            HostnameVerifier allHostsValid = new HostnameVerifier() {
                @Override
                public boolean verify(String hostname, SSLSession session) {
                    return true;
                }
            };
            // Install the all-trusting host verifier
            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);
            /*
             * end of the fix
             */

            URL url = new URL("https://10.52.182.224/cgi-bin/dynamic/config/panel.bmp");
            URLConnection con = url.openConnection();
            //Reader reader = new ImageStreamReader(con.getInputStream());

            InputStream is = new URL(url.toString()).openStream();

            // Whatever you may want to do next

        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T08:15:30.513

> 无需下载证书的 Java 和 HTTPS url 连接

如果您真的想避免下载服务器的证书，请使用匿名协议，例如 Anonymous Diffie-Hellman (ADH)。服务器的证书不与 ADH 和朋友一起发送。

您使用 选择匿名协议`setEnabledCipherSuites`。您可以查看可用的密码套件列表`getEnabledCipherSuites`。

相关：这就是你必须调用`SSL_get_peer_certificate`OpenSSL 的原因。您将获得一个`X509_V_OK`带有匿名协议的证书，这就是您检查证书是否在交换中使用的方式。

但正如 Bruno 和 Stephed C 所说，避免检查或使用匿名协议是个坏主意。

* * *

另一种选择是使用 TLS-PSK 或 TLS-SRP。他们也不需要服务器证书。（但我认为你不能使用它们）。

问题是，您需要在系统中预先配置，因为 TLS-PSK 是*Pres-shared Secret*而 TLS-SRP 是*Secure Remote Password*。身份验证是相互的，而不仅仅是服务器。

在这种情况下，相互认证由双方都知道共享秘密并达到相同的预主秘密的属性提供；或其中一个（或两者）没有，并且通道设置失败。每一方都证明知道秘密是“相互”的部分。

最后，TLS-PSK 或 TLS-SRP 不会做愚蠢的事情，例如在使用 HTTP（或通过 HTTPS）的 Web 应用程序中咳出用户密码。这就是为什么我说*每一方都证明知道这个秘密......*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-11T19:52:17.843

一个简单但不是纯 java 的解决方案是`curl`从 java 中脱壳，这使您可以完全控制请求的完成方式。如果您只是为了简单的事情而这样做，则可以使用此方法有时忽略证书错误。此示例显示如何使用有效或无效证书向安全服务器发出请求，传入 cookie，并使用`curl`from java.util.get 获取输出。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

public class MyTestClass
{
  public static void main(String[] args) 
  {
    String url = "https://www.google.com";
    String sessionId = "faf419e0-45a5-47b3-96d1-8c62b2a3b558";

    // Curl options are:
    // -k: ignore certificate errors
    // -L: follow redirects
    // -s: non verbose
    // -H: add a http header

    String[] command = { "curl", "-k", "-L", "-s", "-H", "Cookie: MYSESSIONCOOKIENAME=" + sessionId + ";", "-H", "Accept:*/*", url };
    String output = executeShellCmd(command, "/tmp", true, true);
    System.out.println(output);
  }

  public String executeShellCmd(String[] command, String workingFolder, boolean wantsOutput, boolean wantsErrors)
  {
    try
    {
      ProcessBuilder pb = new ProcessBuilder(command);
      File wf = new File(workingFolder);
      pb.directory(wf);

      Process proc = pb.start();
      BufferedReader stdInput = new BufferedReader(new InputStreamReader(proc.getInputStream()));
      BufferedReader stdError = new BufferedReader(new InputStreamReader(proc.getErrorStream()));

      StringBuffer sb = new StringBuffer();
      String newLine = System.getProperty("line.separator");
      String s;

      // read stdout from the command
      if (wantsOutput)
      {
        while ((s = stdInput.readLine()) != null)
        {
          sb.append(s);
          sb.append(newLine);
        }
      }

      // read any errors from the attempted command
      if (wantsErrors)
      {
        while ((s = stdError.readLine()) != null)
        {
          sb.append(s);
          sb.append(newLine);
        }
      }

      String result = sb.toString();

      return result;
    }
    catch (IOException e)
    {
      throw new RuntimeException("Problem occurred:", e);
    }
  }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-13T11:46:14.427

如果您使用任何支付网关点击任何 url 只是为了发送消息，那么我使用 webview 并遵循它： [How can load https url without using ssl in android webview](https://stackoverflow.com/questions/35569047/how-can-load-https-url-without-use-of-ssl-in-android-webview)

并在可见性消失的情况下在您的活动中创建网络视图。您需要做的：只需加载该 webview .. 像这样：

```
 webViewForSms.setWebViewClient(new SSLTolerentWebViewClient());
                webViewForSms.loadUrl(" https://bulksms.com/" +
                        "?username=test&password=test@123&messageType=text&mobile="+
                        mobileEditText.getText().toString()+"&senderId=ATZEHC&message=Your%20OTP%20for%20A2Z%20registration%20is%20124"); 
```

简单的。

你会得到这个： SSLTolerentWebViewClient 来自这个链接： [How can load https url without using ssl in android webview](https://stackoverflow.com/questions/35569047/how-can-load-https-url-without-use-of-ssl-in-android-webview)

# sql - 根据月数将列作为行返回

> ID：13022718
> 
> 赞同：4
> 
> 时间：2012-10-23T02:26:43.687
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

这似乎是一件很容易完成的事情，但我不确定我是否正确地考虑它以获得预期的结果。我正在使用一个支点，但我认为我需要一些与之配对的东西。

我有一个发票表，其中包含每个客户的月度发票。一个客户每年最多有 12 张发票，每月 1 张。

```
+----------+-------+-------+--------------+--------------+--------------+
| ClientID | Month | Year  | ColumnValue1 | ColumnValue2 | ColumnValue3 |
+----------+-------+-------+--------------+--------------+--------------+
|        1 |     1 |  2012 |           20 |           30 |           50 |
|        1 |     2 |  2012 |           25 |           35 |           40 |
|        2 |     1 |  2012 |           28 |           38 |           48 |
+----------+-------+-------+--------------+--------------+--------------+ 
```

现在，我想根据每个客户创建一个如下所示的列表。每个月都会有一个专栏。所以客户端 1 看起来像：

```
+--------------+----+----+---+---+---+---+---+---+---+----+----+----+-------+
|  ColumnName  | 1  | 2  | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | Total |
+--------------+----+----+---+---+---+---+---+---+---+----+----+----+-------+
| ColumnValue1 | 20 | 25 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |   45  |
| ColumnValue2 | 30 | 35 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |   65  |
| ColumnValue3 | 50 | 40 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |  0 |  0 |  0 |   90  |
+--------------+----+----+---+---+---+---+---+---+---+----+----+----+-------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:08:00.130

这可以使用SQL Server 中的`UNPIVOT`和函数来完成。`PIVOT`如果您有已知数量的列，则可以使用静态版本：

```
select clientid,
  col, year,
  isnull([1], 0) [1], 
  isnull([2], 0) [2], 
  isnull([3], 0) [3], 
  isnull([4], 0) [4], 
  isnull([5], 0) [5], 
  isnull([6], 0) [6], 
  isnull([7], 0) [7], 
  isnull([8], 0) [8], 
  isnull([9], 0) [9], 
  isnull([10], 0) [10], 
  isnull([11], 0) [11], 
  isnull([12], 0) [12],
  (isnull([1], 0) + isnull([2], 0) + isnull([3], 0) 
   + isnull([4], 0) + isnull([5], 0) + isnull([6], 0) 
   + isnull([7], 0) + isnull([8], 0) + isnull([9], 0) 
   + isnull([10], 0) + isnull([11], 0) + isnull([12], 0) ) Total
from
(
  select clientid, col, month, year, value
  from yourtable
  unpivot
  (
    value for col in (ColumnValue1, ColumnValue2, ColumnValue3)
  ) u
) x
pivot
(
  sum(value)
  for month in ([1], [2], [3], [4], [5], [6], [7], 
                [8], [9], [10], [11], [12])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4649c/6)

但是使用动态 sql 来执行此操作可能会容易得多，然后编写的代码更少，这将根据您在数据样本中的内容调整月数：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX),
    @colsTotal as  NVARCHAR(MAX),
    @colsNull as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+ quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name like 'ColumnValue%'
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT distinct ', '  + quotename(Month)
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT distinct ', IsNull(' 
                           + quotename(Month) + ', 0) as '+quotename(Month)
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsTotal = STUFF((SELECT distinct '+ IsNull(' 
                           + quotename(Month) + ', 0)'
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select clientid,
          year,
          '+@colsNull+', '+@colsTotal+' as Total
      from
      (
        select clientid, col, month, year, value
        from yourtable
        unpivot
        (
          value for col in ('+@colsUnpivot+')
        ) u
      ) x
      pivot
      (
        sum(value)
        for month in('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8bbd3/11)

两者都将产生相同的结果，不同之处在于第二个将根据表中的数据进行调整：

```
| CLIENTID | YEAR |  1 |  2 | TOTAL |
-------------------------------------
|        1 | 2012 | 20 | 25 |    45 |
|        1 | 2012 | 30 | 35 |    65 |
|        1 | 2012 | 50 | 40 |    90 |
|        2 | 2012 | 28 |  0 |    28 |
|        2 | 2012 | 38 |  0 |    38 |
|        2 | 2012 | 48 |  0 |    48 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:16:32.963

试试这个

```
Declare @t Table(ClientId Int,[Month] Int,[Year] Int,ColumnValue1 Int,ColumnValue2 Int, ColumnValue3 Int)
Insert Into @t Values(1,1,2012,20,30,50),(1,2,3012,25,35,40),(2,1,2012,28,38,48)

;With Cte As
(
    Select ClientId,[Month],ColumnName,ColumnNameValues
    From @t 
    UnPivot(ColumnNameValues For ColumnName In (ColumnValue1,ColumnValue2,ColumnValue3)) As unpvt
)

Select ClientId,
        ColumnName 
        ,[1] = Coalesce([1],0)
        ,[2] = Coalesce([2],0)
        ,[3] = Coalesce([3],0)
        ,[4] = Coalesce([4],0)
        ,[5] = Coalesce([5],0)
        ,[6] = Coalesce([6],0)
        ,[7] = Coalesce([7],0)
        ,[8] = Coalesce([8],0)
        ,[9] = Coalesce([9],0)
        ,[10]= Coalesce([10],0)
        ,[11]= Coalesce([11],0)
        ,[12] = Coalesce([12],0)
        ,Total = Coalesce([1],0) + Coalesce([2],0) + Coalesce([3],0) + Coalesce([4],0) + 
                 Coalesce([5],0) + Coalesce([6],0) + Coalesce([7],0) + Coalesce([8],0) + 
                 Coalesce([9],0) + Coalesce([10],0) + Coalesce([11],0) + Coalesce([12],0) 
From  Cte 
PIVOT 
(   
    MAX(ColumnNameValues) For [Month] In ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12] )   
) As pvt 
--Where ClientId =1 -- uncomment for specific client report
Order By 1 
```

**结果**

![在此处输入图像描述](../Images/9528c0d0bc9d5b85d44e964bb24cb5c8.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T05:00:08.773

```
Create table sequence (seqid bigint)
go

--Create a table which has sequence from 1 to 12 for monthId
Insert into sequence
Select Top 12 ROW_NUMBER() over(order by name)
from sys.objects
go

USE tempdb 
GO

CREATE TABLE TestReport
(
        ClientId int 
        ,MonthId int 
        ,YearId int 
        ,val1 int 
        ,val2 int 
        ,val3 int 
)
go

insert into TestReport
Select 1, 1,2012, 20,30,50
union 
Select 1,2,2012,25, 35, 40
union 
Select 2, 1, 2012, 28,38,48

Select *
from testReport

--Cross join with the Sequence table to get rows for each month

Select clientId
        , seqid as monthId
        , YearId 
        , case when MonthId = seqid then val1 else 0 end val1
        , case when MonthId = seqid then val2 else 0 end val2
        , case when MonthId = seqid then val3 else 0 end val3
into #Temp
from sequence seq
cross join  testReport rpt
where seq.seqid <=12

    --Select *      from #Temp

SELECT 'ColumnValue1' AS [columnName],   [1], [2], [3], [4],[5],[6],[7],[8],[9],[10],[11],[12]
,[1]+  [2]+  [3]+  [4]+ [5]+ [6]+ [7]+ [8]+ [9]+ [10]+ [11]+ [12] as Total
 FROM
(SELECT monthId, val1 
    FROM #Temp
    where ClientId =1 

    ) AS SourceTable
PIVOT
(
max(val1) FOR MonthId IN ( [1], [2], [3], [4],[5],[6],[7],[8],[9],[10],[11],[12])
) 
AS PivotTable

go

Drop table #Temp
Drop table sequence 
drop table TestReport
go 
```

# haskell - 有没有比列表推导更好的方法将函数应用于列表中的一对元素？

> ID：13022720
> 
> 赞同：11
> 
> 时间：2012-10-23T02:27:32.650
> 
> 标签：haskell

我经常使用这个：

```
a' = [ (f x, f y) | (x, y) <- a ] 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T02:38:07.820

您可以使用[`(***)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html#v%3a-42--42--42-)运算符[`Control.Arrow`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html)

```
> map (f *** f) a 
```

或定义自己的辅助函数

```
> let both f (x, y) = (f x, f y)
> map (both f) a 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T06:30:52.820

**替代解决方案：**

```
import Data.Bifunctor

bimap f f pair 
```

`Bifunctor.bimap`与 基本相同`Arrow.(***)`，但也适用于其他双函子（如`Either a b`）。

**题外话：**

没有为您的情况预定义的原因是您不能编写`Functor`,`Applicative`等的实例以`(,)`两次具有相同的元素类型。使用自己的“类矢量”类型就不会出现这个问题：

```
data Pair a = Pair a a deriving Show

instance Functor Pair where
  fmap f (Pair x y) = Pair (f x) (f y) 
```

现在您可以编写类似`map (fmap (+1)) [Pair 12 14, Pair 17 18]`. 或者，如果您想在 上使用不同的操作`Pair`，您可以更进一步：

```
instance Applicative Pair where 
  pure x = Pair x x
  (Pair f g) <*> (Pair x y) = Pair (f x) (g y) 
```

`(,)`如果您经常使用相同元素类型对，那么切换到这种类型可能会很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T06:21:48.383

如果使用[`lens`](http://hackage.haskell.org/package/lens)，则可以使用`over both f`， 或`both %~ f`。这具有更易于组合的优点——例如，如果您有一对列表，您可以使用类似`both.mapped +~ toUpper`( `:: ([Char],[Char]) -> ([Char],[Char])`) 的东西。

# javascript - 如何在这里选择 TR？

> ID：13022724
> 
> 赞同：0
> 
> 时间：2012-10-23T02:28:10.963
> 
> 标签：javascript, jquery, html-table, parent

这是我的代码，setWord 是 1985：

```
$("td:contains(" + setWord + ")").css("textDecoration", "underline"); 
```

我认为这可以解决问题：

```
$("td").not(":contains(" + setWord + ")").parent().css("backgroundColor", "red"); 
```

但显然不是。我只是想选择那个 TD 的父 TR

```
<tr>
            <td>John</td>
            <td>03/09/1985</td>
            <td>Red</td>
            <td>Australia</td>
            <td>$ Dollars</td>
        </tr>
        <tr>
            <td>Dave</td>
            <td>01/01/1987</td>
            <td>Blue</td>
            <td>London</td>
            <td>&pound; Pounds</td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:33:18.093

如果想法是更改不包含`setWord`“1985”的所有行的背景，请尝试以下操作：

```
$("tr").not(":contains(" + setWord + ")").css("backgroundColor", "red"); 
```

演示：http: [//jsfiddle.net/kwH6L/](http://jsfiddle.net/kwH6L/)

如果想法是改变包含的行的背景，*那么*`setWord`试试这个：

```
$("td:contains(" + setWord + ")").parent().css("backgroundColor", "red"); 
```

演示：http: [//jsfiddle.net/kwH6L/1/](http://jsfiddle.net/kwH6L/1/)

您显示的代码的问题：

```
$("td").not(":contains(" + setWord + ")").parent().css("backgroundColor", "red"); 
```

...是您首先选择*所有*TD 元素，然后删除包含 的那些`setWord`，但仍然在每一行中选择至少一些 TD 元素。因此，当您获得`.parent()`选定的 TD 时，您将获得每个 TR 元素......

# video - 从我们的服务器添加视频但在 IE9 中不起作用

> ID：13022725
> 
> 赞同：1
> 
> 时间：2012-10-23T02:28:12.547
> 
> 标签：video, internet-explorer-9

我从服务器添加了一个视频，但该视频在除 IE9 之外的任何地方都可以使用

有人能帮我吗。这是代码

```
<video width="420" height="240" controls="" tabindex="0">

           <source type="video/ogg" src="/images/towable_shelters.ogv"></source>
            <source type="video/mp4" src="/images/towable-shelters.mp4"></source>
            <source type="video/wmv" src="/images/towable_shelters.wmv"></source>
                 <object width="420" height="240" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="FlashID">
              <param value="/images/towable_shelters.swf" name="movie">
              <param value="high" name="quality">
              <param value="opaque" name="wmode">
              <param value="11.0.0.0" name="swfversion">
              <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
              <param value="/images/expressInstall.swf" name="expressinstall">
              <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
              <!--[if !IE]>-->
              <object width="422" height="240" data="/images/towable_shelters.swf" type="application/x-shockwave-flash">
                <!--<![endif]-->
                <param value="high" name="quality">
                <param value="opaque" name="wmode">
                <param value="11.0.0.0" name="swfversion">
                <param value="/images/expressInstall.swf" name="expressinstall">
                <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
                <div>
                  <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
                  <p><a href="http://www.adobe.com/go/getflashplayer"><img width="112" height="33" alt="Get Adobe Flash player" src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"></a></p>
                </div>
                <!--[if !IE]>-->
              </object>
              <!--<![endif]-->
          </object>
        </video> 
```

这在所有浏览器中都能完美运行。甚至 IE6 和 IE7 因为它需要 swf 才能工作。但我不知道为什么它不能在 IE9 中工作

# ruby-on-rails - Railstutorial (Michael Hartl)：练习 4.6

> ID：13022726
> 
> 赞同：4
> 
> 时间：2012-10-23T02:28:27.847
> 
> 标签：ruby-on-rails, ruby, syntax, methods, split

我没有从 Hartl 的 Rails 教程中得到以下练习的答案：

> 通过用适当的方法替换代码清单 4.10 中的问号，结合 split、shuffle 和 join 来编写一个函数，将给定字符串中的字母打乱。

清单 4.10：

```
>> def string_shuffle(s)
>>   s.split('').?.?
>> end
=> nil
>> string_shuffle("foobar") 
```

有人可以帮帮我吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T02:34:19.567

我认为像你说的那样添加 shuffle 和 join 应该可以工作：

```
def string_shuffle(s)
  s.split('').shuffle.join('')
end 
```

这些方法从左到右起作用。split('') 将单词 (s) 拆分为一组单独的字母。然后随机播放它们。并且 join('') 将拆分反转，并将其放回一个单词中。

编辑澄清： ('') 是两个单引号，而不是一个双引号。如果您执行了 split("") 和 join("")，它也应该可以工作，因为您只是尝试在每个字符上进行拆分和连接。

# c# - WPF 中的浮动项目

> ID：13022728
> 
> 赞同：5
> 
> 时间：2012-10-23T02:28:52.497
> 
> 标签：c#, wpf, wpf-controls, floating

如何创建一个控件容器，其中每个项目（控件）的行为都像一个浮动 DIV（在 HTML 中），就像这个[视频](http://www.youtube.com/watch?v=Ur_EDX8bMGo&feature=youtu.be)（考虑到每个文件夹都是一个控件）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:18:21.163

看一下 WrapPanel 类。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)

它具有您正在寻找的功能。

> 将子元素按从左到右的顺序定位，将内容分到包含框边缘的下一行。随后的排序从上到下或从右到左依次发生，具体取决于 Orientation 属性的值。

# qtp - 在 HP QC 中将一个测试用例的输出参数传递给另一个测试用例的输入参数

> ID：13022729
> 
> 赞同：1
> 
> 时间：2012-10-23T02:28:57.920
> 
> 标签：qtp, hp-quality-center

有没有办法在HP QC 10中将一个测试用例的输出参数作为另一个测试用例的输入参数（测试用例是QTP中生成的自动化测试脚本），以便在测试用例一起运行时（按顺序）在一个测试集中生成的一个测试用例中的信息（参数）可以用于其他测试用例的执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:58:15.923

您是否尝试过在 QTP 脚本中使用 parameter() 语法。您可以使用以下代码将参数发送到您的操作。

```
RunAction <Action name>, oneiteration, input parameter1, input parameter2, output parameter1, output parameter 2 .. and so on... 
```

# c# - C# 代码读取 Visual Studio 项目并查找附加参考

> ID：13022732
> 
> 赞同：0
> 
> 时间：2012-10-23T02:30:32.223
> 
> 标签：c#, visual-studio-2010, reflection, reference

我可以编写 C# 代码来遍历 Visual Studio 项目（vs 2010）并找出所有缺少库引用的项目。

例如，如果我附加了第三方库并忘记签入库，那么我希望我的工具能够找到所有缺少参考的项目。

我需要使用反射吗？有没有办法遍历 VS 2010 项目（API 或类似的东西）并读取它的属性并获取我需要的东西？

谢谢你

# twitter-bootstrap - 我可以在引导程序中使用 ScrollSpy 创建指向另一个页面的链接，同时还保留默认功能吗？

> ID：13022733
> 
> 赞同：0
> 
> 时间：2012-10-23T02:31:05.990
> 
> 标签：twitter-bootstrap

我有一个使用 bootstrap 和 ScrollSpy nav 滚动到页面部分的站点。这一切都很完美，但是，我想在我的导航中添加一个链接到我网站上的另一个页面。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:21:43.913

您需要在其他页面上包含锚点，然后添加数据目标。例如：

```
<a href="sample.html#foo" data-target="#foo">Sample</a> 
```

# java - 反向读写锁

> ID：13022734
> 
> 赞同：2
> 
> 时间：2012-10-23T02:31:11.000
> 
> 标签：java, multithreading, synchronization

通常我们在读取时使用带有读锁的ReadWriteLocks，在写入时使用写锁。但是我认为反向使用的奇特案例会有所帮助。但希望你们能告诉我一个更好的方法。

这就是我想要的。将有很多写入，但读取量很少。示例是请求延迟的平均计算器，例如。

几乎将其视为伪代码。

```
metric.addValue(latency); // Called a lot.

metric.getAverage(); // Called sparingly. 
```

我们可以做到以下几点：

```
addValue(value) {
  atomicCount.increment();
  atomicSum.increment(value);
}

getAverage() {
  return atomicCount.get() != 0 ? atomicSum.get() / atomicCount.get() : 0.0;
} 
```

问题出在 getAverage() 中，我们“可能”计算了一些额外的计数。但大多数情况下可能是正确的值，有时还有一个额外的计数。但我只是想让它更精确。

这是诀窍：

```
ReadWriteLock rw = /* write preference, or a fair lock. */;
Lock read = rw.readLock();
Lock write = rw.writeLock();

addValue(value) {
  read.lock(); // Using read lock when mutating. 
  try { 
    atomicCount.increment();
    atomicSum.increment(value);
  } finally {
    read.unlock();
  }
}

getAverage() {
  write.lock(); // Using write lock when reading.
  try {
    return atomicCount.get() != 0 ? atomicSum.get() / atomicCount.get() : 0.0;
  } finally {
    write.unlock();
  }
} 
```

我的问题是，我能做得更好吗？

Salt：我知道 (cast) 问题，并且可以避免多次调用 count.get() 等以获得更好的性能，但不想让代码过于混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:06:48.857

并发原子增量确实没有意义。无论如何，它们不能同时发生。

最简单的解决方案——一个简单的锁，普通的计数/求和变量——会执行得更好

```
lock
    count++;
    sum += value;
unlock 
```

为了更加并行，我们需要“分片”——每个线程都维护自己的统计信息；读者查询他们所有的全貌。（每个线程的统计信息需要是可变的；读者使用 Michael Burr 的方法来检索每个线程统计信息的稳定版本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:58:25.910

您可能想看看像下面这样的技术是否表现更好。基本上，它通过添加另一个跟踪第一个但仅在所有其他值完成更新后才更新的计数器来确保计数和总和是“稳定的”，因此不涉及锁：

```
addValue(value) {

  while (atomicFlag.get() != 0) {
      // spin
  }
  atomicCount.increment();
  atomicSum.increment(value);
  atomicCount2.increment();
}

getAverage() {
    int count;
    int sum;
    int count2;

    atomicFlag.increment();
    do {
        count = atomicCount.get();
        sum = atomicSum.get();
        count2 = atomicCount2.get();
    } while (count != count2);
    atomicFlag.decrement();

    return count != 0 ? (sum * 1.0) / count : 0.0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:53:41.423

（从此处复制 G+ 的讨论）。

一种优化思路是使用 AtomicLong 将 value 和 count 都存储在 Long 的不同位置，从而解决了在计算平均值时确保 count 和 value 匹配的问题。

另一个（更大的）优化是使用线程特定的度量（如前面所建议的那样）。它具有以下优点。

*   它避免了写入时的任何类型的争用。因此，写入时的 CAS 会很快，因为没有其他线程正在写入相同的指标。
*   读取不需要任何锁。
*   最重要的是，它将更好地利用 L1 缓存。

**最后一点的解释：**

当有多个线程从单个共享内存进行大量写入和读取时，在多核 CPU 中，运行在不同内核中的线程只会使其他内核 L1 缓存无效。因此，必须使用缓存一致性协议从其他核心获取最新值。所有这些都大大减慢了速度。拥有特定于线程的指标可以避免这个问题。

参考： [http ://www.cs.washington.edu/education/courses/cse378/07au/lectures/L25-Atomic-Operations.pdf](http://www.cs.washington.edu/education/courses/cse378/07au/lectures/L25-Atomic-Operations.pdf)

考虑到这一点，这样的代码会表现良好。

```
private final AtomicLongMap<Long> metric = AtomicLongMap.create();

public void addValue(long value) {
    long threadId = Thread.currentThread().getId();
    metric.addAndGet(threadId, (value << 32) + 1);
}

public synchronized double getAverage() {
    long value = metric.sum();
    int count = (int)value;
    return (count == 0) ? 0 : ((double)(value >> 32))/count;
} 
```

事实上，测试表明它表现最好 - 比上面的无锁解决方案更好！而且也是数量级。

```
No thread safety: 3435ms, Average: 1.3532233016178474
(irreputable) Just synchronized {}  4665ms, Average: 4.0
(atuls) reverse read-write lock:    19703ms, Average: 4.0
(michael burr)  17150ms, Average: 4.0
(therealsachin) 1106ms, Average: 4.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:04:32.867

我为每个解决方案（包括我自己的）运行了一个基准测试。

仅来自 100 个线程的 addValue，每个线程循环 100 个任务，循环，每个任务中有 10000 次更新，值为 0 到 9999。结果是：

```
(irreputable) Just synchronized {}: 7756 ms  Average: 4999.5
(atuls) My reverse read-write lock: 16523 ms Average: 4999.5
(michael burr) Double counter trick: 10698 Average: 4999.5
No thread safety: 4115 ms Average: 4685.0
(atuls) Not thread safe v1\. 11189 ms Average: 4999.5 
```

看起来声名狼藉是正确的:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T02:52:44.277

就正确性而言，我认为您的计划是一个非常狡猾的计划。您已经进行了设置，以便多个更新线程独立地增加计数和总数，因此可以安全地允许通过读锁。

您的平均计算是在写锁定下进行的，因此可以保证没有更新的“阅读器”可以处于活动状态，从而使计数和总数暂时失步。

对我来说最大的问题是你的方案是否真的比简单的同步行为提供更好的性能？尽管您已经通过避免代码中的同步部分消除了读者之间的表面争论点，但在幕后，阅读器/编写器代码可能会在同步块中做一些聪明的事情。请参[阅读写锁文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。这还警告说，根据实现的细节，您的作者可能会遭受饥饿。

只有仔细测量才能告诉我们答案。

# .htaccess - .htaccess 点子域到文件

> ID：13022738
> 
> 赞同：1
> 
> 时间：2012-10-23T02:31:42.753
> 
> 标签：.htaccess

我想要做的是能够指出类似`username.domain.com`的东西`index.php?url=username`。我一直在浏览 Google/StackOveflow，但找不到任何对我有益的东西。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:08:59.923

将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(www\.)?domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.domain.com$ [NC]
RewriteCond %{REQUEST_URI} !index.php
RewriteRule ^ /index.php?url=%1 [L] 
```

第一个条件确保请求的主机不是**www.domain.com**或**domain.com**，下一行匹配子域名并将其分组，并且规则本身`/index.php`使用查询字符串 url 和子域重写所有内容（使用**%反向引用1** )。

# javascript - javascript的计算器代码

> ID：13022739
> 
> 赞同：-4
> 
> 时间：2012-10-23T02:31:49.787
> 
> 标签：javascript, javascript-events

我一直试图弄清楚我的代码有什么问题，我需要添加产品（香蕉、苏打水、薯片、糖果），然后将其乘以 10% 的税收。我错过了这些产品的变量吗？我知道有些东西不见了，但我不知道该怎么办！

```
<html>
  <head>
    <title>Total Calculator</title>
  </head>
  <body>
    <p>
      Bananas: <input type="text" id="bananasBox" value="" /> at $ 0.50 a piece<br/>
      Sodas: <input type="text" id="sodasBox" value="" /> at $ 0.75 per can<br/>
      Chips: <input type="text" id="chipsBox" value="" /> at $1.25 per bag<br/>
      Candy: <input type="text" id="candyBox" value="" /> at $1.00 per pack<br/>
      TAX is 10 %
    </p>

    <button id="Calculate" onclick= "Calculate()" value="Calculate">Calculate</button>

    <script>
      function Calculate(){
        var total = 0;
        var cost = document.getElementById("cost").value;
        var tax = document.getElementById("tax").value;

        total = cost * tax;
        document.getElementById("total").value = total;

        document.getElementById("outputDiv").innerHTML= "Your TOTAL is: " + total;
      }
    </script>
    <hr/>
    <div id="outputDiv"> 
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:41:49.893

我不认为你真的付出了任何努力，但这是一个正确的答案：

```
<html>
<head>
<title> Total Calculator </title>
</head>
<body>
<p>
Bananas:   <input type="text" id="bananasBox" value=""> at $ 0.50 a piece<br>
Sodas  :   <input type="text" id="sodasBox"   value=""> at $ 0.75 per can<br>
Chips  :   <input type="text" id="chipsBox"   value=""> at $1.25 per bag<br>
Candy  :   <input type="text" id="candyBox"   value=""> at $1.00 per pack<br>
TAX is 10 %
</p>
<input type="button" value="Calculate" id='Calculate' onclick= "Calculate()">
<script type="text/javascript">

function Calculate() {
    var total = 0;
    var bananas = Number(document.getElementById("bananasBox").value) * .5;
    var sodas = Number(document.getElementById("sodasBox").value) * .75;
    var chips = Number(document.getElementById("chipsBox").value) * 1.25;
    var candy = Number(document.getElementById("candyBox").value) * 1;
    var tax = 0.10;

    total = (bananas+sodas+chips+candy)*(1+tax);
document.getElementById('outputDiv').innerHTML= 'Your TOTAL is: $' + Number(total).toFixed(2);
}
</script>
<hr>
<div id="outputDiv"> 
</div>
</body>
</html> 
```

如果您要我解释，我会的，但是如果您真的没有学习的意图：那不值得浪费我的时间。

# c++ - c++中输入验证的逻辑错误

> ID：13022741
> 
> 赞同：2
> 
> 时间：2012-10-23T02:31:57.507
> 
> 标签：c++, validation

每次我运行以下代码并输入 1 或 0 时，以下代码都包含一个逻辑错误，while 循环中的代码仍会执行。有人能告诉我为什么吗？

```
bool getmove()
{
    bool move;
    cout << "Would you like to make the first move?(1 for yes 0 for no)\n";
    cin >> move;
    while(move != 1 || move != 0 || !cin.good())
    {
        if(!cin.good())
        {
            cout << "ERROR please try again\n";
            cin.clear();
            cin.ignore(80,'\n');
            cin >> move;
        }
        else
        {
            cout << "Invalid input please try again\n";
            cin >> move;
        }
    }
    return move;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:41:51.157

看看这一行：

```
while(move != 1 || move != 0 || !cin.good()) 
```

情况*总是*如此`move != 1 || move != 0`（因为不能两者兼而有之）。

此外，您可以通过读取字符串之类的内容并对其进行测试来避免一些麻烦，而不是依赖于强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:02:04.863

如果您尝试编写一个可以验证布尔值输入的函数，您的代码可以简化为：

```
bool getmove()
{
    bool move;
    cout << "Would you like to make the first move?(1 for yes 0 for no)\n";
    while (!(cin >> move))
    {
        cout << "Invalid input please try again\n";
        cin.clear();
        cin.ignore(80, '\n');
    }
    return move;
} 
```

重要的是要意识到这`while (!(cin >> move))`将重复循环，直到可以从控制台读取有效的布尔值并将其写入`move`.

# c++ - 如何确定两个字符串是否足够接近？

> ID：13022742
> 
> 赞同：0
> 
> 时间：2012-10-23T02:32:00.297
> 
> 标签：c++, string, algorithm

如果它们“足够接近”，我们说我们可以从单词 w1 “跳跃”到单词 w2。如果满足以下条件之一，我们将 w2 定义为足够接近 w1：

1.  w2 是从 w1 中删除一个字母得到的。

2.  w2 是通过将 w1 中的一个字母替换为 w1 中出现在其右侧并且按字母顺序也在其右侧的某个字母来从 w1 获得的。

我不知道如何检查 2\. 是否满足。要检查 1\. 是否可能，这是我的功能：

```
bool check1(string w1, string w2){    
    if(w2.length - w1.length != 1){
        return false;
    }
    for(int i = 0,int j = 0;i < w2.length;i++;j++){
        if(w2[i] == w1[j]){//do  nothing
        }
        else if(i == j){
            j++;
        }
        else{
            return false;
        }
    }
    return true;
} 
```

给定两个单词 w1 和 w2，我们如何检查我们是否可以从 w1 跳到 w2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:46:19.380

您的案例（1）算法对我来说看起来不错。

要检查案例 (2)，您可以首先检查 w2 是否与 w1 具有相同的长度并且仅相差一个字符。如果是，请检查 w2 的字符是否按字母顺序大于 w1 的字符，以及 w2 的字符是否也出现在 w1 中（或等效地，在 w2 中）的该位置之后。

您可能还想添加 case (0)：w1 和 w2 相同。

# powershell - Powershell中的webget

> ID：13022744
> 
> 赞同：1
> 
> 时间：2012-10-23T02:32:39.160
> 
> 标签：powershell

是否有任何等效`webget`于 WindOS 的 PowerShell 的命令？

我正在尝试创建一个脚本来从网站下载所有公开可用的文件。我正在制作自定义脚本，因为我需要将文件存储在特定的目录结构中（取决于名称、类型和大小）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:16:25.127

在 PowerShell v2 中，使用 WebClient：

```
(New-Object System.Net.WebClient).DownloadFile($url, $localFileName) 
```

在 v3 中，`Invoke-WebResquest`cmdlet：

```
Invoke-WebRequest -Uri $url -OutFile $localFileName 
```

另一种选择是使用`Start-BitsTransfer`cmdlet：

```
Start-BitsTransfer -Source $source -Destination $destination 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:03:33.817

在 PowerShell V3 中，您可以使用新的 cmdlet`Invoke-WebRequest`向网站/服务发送 http 或 https 请求，例如：

```
$r = Invoke-WebRequest -URI http://www.bing.com?q=how+many+feet+in+a+mile 
```

但是，要专门下载文件，使用 .NET API WebClient.DownloadFile() 可能是最简单的，例如：

```
$remoteUri = "http://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png"
$fileName = "$pwd\logo.png"
$webClient = new-object System.Net.WebClient
$webClient.DownloadFile($remoteUri, $fileName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:43:49.220

如果您更喜欢在 PowerShell V2 或 V3 中工作的“本机”PowerShell cmdlet，我建议您`Get-HttpResource`从 PowerShell Community Extensions ( [PSCX](http://pscx.codeplex.com/) ) 获得。虽然 PSCX 令人惊讶地没有在线可用的 API（您必须安装扩展，然后才能使用普通的 PowerShell 帮助来探索每个命令），但我设法在[此处](http://www.powershellmanual.com/get-httpresource)找到了 Get-HttpResource 的 API 。使用 cmdlet 可以像这样简单：

```
 $myPage = Get-HttpResource http://blogs.msdn.com/powershell 
```

但是，cmdlet 有多种参数可让您指定媒体类型、凭据、编码、代理、用户代理等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T04:58:55.540

您可以使用 .NET 类`WebClient`下载文件。

```
PS > $source = "http://www.unsite.fr/untruc.zip"
PS > $destination = "c:\temp\untruc.zip" 
PS >
PS >$wc = New-Object System.Net.WebClient
PS >$wc.DownloadFile($source, $destination) 
```

# cakephp - CakePHP：无法使用 AJAX 获取返回的数据

> ID：13022749
> 
> 赞同：1
> 
> 时间：2012-10-23T02:32:55.823
> 
> 标签：cakephp, jquery

我想使用 AJAX 请求从我的 Controller 类中获取单个变量的值。但它仍然无法获取返回的变量。这是我使用的代码：

```
$(document).ready(function(){   
            $("#mybutton").click(function(){                        
                var userdata = {username : $("#UserUsername").val()};
                    $.ajax({
                        type:'POST',
                        url: 'http://localhost/mycakephp/tests/',
                        data: userdata,             
                        success: function(data){
                            alert(data.str);
                        }
                    });         
                });
         }); 
```

控制器类：

```
<?php
class TestsController extends AppController {

    public $name = 'Tests';     

    function index(){
        $this->autoRender=false;
        $str = "valid";
        return $str;
    }

}
?> 
```

我想得到 '$str' 变量，但为什么 alert() 结果仍然是“未定义”，应该是“有效”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:36:08.057

那是因为这不是 AJAX 请求的工作方式。他们无法捕获任何 PHP 返回值，因为它根本不是服务器端请求，也不是 PHP。它所能做的就是捕获它获得的实际 HTTP 响应，例如 HTML 或 JSON。你可以简单地在你的函数中回显结果，它应该这样做：

```
function index(){
    $this->autoRender = false;
    $str = "valid";
    echo $str; // echo rather than return here
} 
```

`$str`然后在 AJAX 请求的响应中设置这种方式`data`（所以不是`data.str`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T11:07:04.907

您需要在函数名称后更新 jquery 添加索引

```
 $(document).ready(function(){   
        $("#mybutton").click(function(){                        
            var userdata = {username : $("#UserUsername").val()};
                $.ajax({
                    type:'POST',
                    url: 'http://localhost/mycakephp/tests/index',
                    data: userdata,             
                    success: function(data){
                        alert(data.str);
                    }
                });         
            });
     }); 
```

# javascript - ExtJS 4：如何重新渲染 Ext.Component iframe？

> ID：13022751
> 
> 赞同：2
> 
> 时间：2012-10-23T02:33:06.713
> 
> 标签：javascript, iframe, extjs, extjs4

选择组合框选项后，如何重新渲染此 Ext.Component？

```
var searchForm = Ext.create('Ext.form.Panel', {
    width: 320,
    style: 'margin: 20px',
    renderTo: 'SearchPanel',
    style: {
        position: 'fixed',
        top: '0px',
        left: '865px'
    },
    items: [{
        xtype: 'combo',
        width: 300,
        labelAlign: 'right',
        fieldLabel: 'Subject Area',
        store: subjectAreaStore,
        valueField: 'id',
        displayField: 'value',
        typeAhead: true,
        mode: 'local',
        triggerAction: 'all',
        selectOnFocus: true,
        value: 'Account',

        listeners: {
            select: function (combo) {
                cmp.autoEl.src = '/' + combo.getValue() + '/2nd Iteration.htm';
                alert(cmp.autoEl.src);

                cmp.render();  // this does not work!
            }
        }  // listeners
    }]

});               

// create the cmp
var cmp = Ext.create('Ext.Component', {

    title: 'Data Models',
    style: {
        width: '100%',
        height: '750px'
    },

    autoEl : {
        tag : 'iframe',
        src : '/Account/2nd Iteration.htm'
    },

    renderTo: 'models'
}); 
```

**更新：2012 年 10 月 23 日：**

***这还不行：***

```
 listeners: {
                select: function (combo) {
                    cmp.autoEl.src = '/' + combo.getValue() + '/2nd Iteration.htm';
                    var the_iframe = cmp.getEl().dom;
                    the_iframe.contentWindow.location.reload();
                }
            }  // listeners 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:39:41.257

我会建议一种不同的方法来创建 iframe。只需使用组件的 html 属性并自己编写 html 而不是使用 autoel 功能（从来没有对组件这样做过，只有一个容器，但它应该工作相同）......

```
var cmp = Ext.create('Ext.Component', {
    title: 'Data Models',
    style: {
        width: '100%',
        height: '750px'
    },
    renderTo: 'models',
    html: '<iframe src="/Account/2nd Iteration.htm"></iframe>'
}); 
```

然后在侦听器中执行此操作以更新它...

```
listeners: {
    select: function (combo) {
        cmp.update('<iframe src="/' + combo.getValue() + '/2nd Iteration.htm"></iframe>');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:54:31.513

该`render()`方法仅处理由 ExtJS 创建（呈现）的 HTML。你自己创建了那个 iframe，所以你必须自己控制它。您应该能够像这样从组件中获取 DOM 元素：

```
var the_iframe = cmp.getEl().dom;
the_iframe.contentWindow.location.reload(); 
```

# c# - 什么是可空的 ?`?

> ID：13022752
> 
> 赞同：7
> 
> 时间：2012-10-23T02:33:10.830
> 
> 标签：c#, nullable

我打错了，Visual Studio 没有将其标记为错误：

`void Method(Nullable<SpriteFont>? font = null) { }`

`font`显示为`SpriteFont??`输出。我刚刚做了什么？

**UPD：**对不起，大家，我没有尝试共同编译它，只是在我这样做之前它没有显示为错误。`Type??`尽管如此，它在输出中看起来还是很奇怪。

此外`SpriteFont`已经可以为空，所以无论如何我都会得到一个错误:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:44:40.983

我已经在这里尝试过，刚才......我无法重现你所说的。

以下所有语句都无法编译：

*   `Nullable<int>? a = 1;`
*   `Nullable<Nullable<int>> b = 1;`
*   `Nullable<int?> a = 1;`
*   `void A(Nullable<Nullable<int>> a)`
*   `void A(Nullable<int>? a)`
*   `void A(Nullable<int?> a)`

我认为使用 Visual Studio 2012、C# 4 或 5，.Net framework 4.5。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T03:02:29.807

编辑器的语法检查器未能将其标记为带有红色曲线的错误。不是编译器。

两个不同的代码块。它们必须是，在您输入代码时语法检查代码，本质上总是被破坏，需要一种非常不同的方法。

# java - Java弹跳球

> ID：13022754
> 
> 赞同：14
> 
> 时间：2012-10-23T02:33:13.517
> 
> 标签：java, swing, jframe

我正在尝试编写一个 Java 应用程序，它在屏幕上绘制多个从框架边缘反弹的球。我可以成功抽出一个球。但是，当我添加第二个球时，它会覆盖我绘制的初始球。代码是：

```
import java.awt.*;
import javax.swing.*;
import java.util.ArrayList;
import java.util.List;

public class Ball extends JPanel implements Runnable {

    List<Ball> balls = new ArrayList<Ball>();   
Color color;
int diameter;
long delay;
private int x;
private int y;
private int vx;
private int vy;

public Ball(String ballcolor, int xvelocity, int yvelocity) {
    if(ballcolor == "red") {
        color = Color.red;
    }
    else if(ballcolor == "blue") {
        color = Color.blue;
    }
    else if(ballcolor == "black") {
        color = Color.black;
    }
    else if(ballcolor == "cyan") {
        color = Color.cyan;
    }
    else if(ballcolor == "darkGray") {
        color = Color.darkGray;
    }
    else if(ballcolor == "gray") {
        color = Color.gray;
    }
    else if(ballcolor == "green") {
        color = Color.green;
    }
    else if(ballcolor == "yellow") {
        color = Color.yellow;
    }
    else if(ballcolor == "lightGray") {
        color = Color.lightGray;
    }
    else if(ballcolor == "magenta") {
        color = Color.magenta;
    }
    else if(ballcolor == "orange") {
        color = Color.orange;
    }
    else if(ballcolor == "pink") {
        color = Color.pink;
    }
    else if(ballcolor == "white") {     
        color = Color.white;
    }
    diameter = 30;
    delay = 40;
    x = 1;
    y = 1;
    vx = xvelocity;
    vy = yvelocity;
}

protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D)g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g.setColor(color);
    g.fillOval(x,y,30,30); //adds color to circle
    g.setColor(Color.black);
    g2.drawOval(x,y,30,30); //draws circle
}

public void run() {
    while(isVisible()) {
        try {
            Thread.sleep(delay);
        } catch(InterruptedException e) {
            System.out.println("interrupted");
        }
        move();
        repaint();
    }
}

public void move() {
    if(x + vx < 0 || x + diameter + vx > getWidth()) {
        vx *= -1;
    }
    if(y + vy < 0 || y + diameter + vy > getHeight()) {
        vy *= -1;
    }
    x += vx;
    y += vy;
}

private void start() {
    while(!isVisible()) {
        try {
            Thread.sleep(25);
        } catch(InterruptedException e) {
            System.exit(1);
        }
    }
    Thread thread = new Thread(this);
    thread.setPriority(Thread.NORM_PRIORITY);
    thread.start();
}

public static void main(String[] args) {
    Ball ball1 = new Ball("red",3,2);
    Ball ball2 = new Ball("blue",6,2);
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(ball1);
    f.getContentPane().add(ball2);
    f.setSize(400,400);
    f.setLocation(200,200);
    f.setVisible(true);
    new Thread(ball1).start();
    new Thread(ball2).start();
}
} 
```

我想创建一个球列表，然后循环绘制每个球，但我仍然无法将两个球都添加到内容窗格。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T02:40:41.377

## 以您目前的方法...

*   我能看到的主要问题是你将两个不透明的组件放在一起......实际上你可能会发现你正在为另一个绕过其中一个......
*   您应该使用`null`布局管理器，否则它将接管并按照您认为合适的方式布局您的球。
*   您需要确保控制球板的大小和位置。这意味着您已经接管了布局经理的角色......
*   您需要随机化球的速度和位置，以减少它们从同一位置开始并在同一位置移动的机会......
*   仅`Ball`在 EDT 的上下文中更新。
*   您实际上并不需要 X/Y 值，您可以使用面板。

.

```
public class AnimatedBalls {

    public static void main(String[] args) {
        new AnimatedBalls();
    }

    public AnimatedBalls() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new Balls());
                frame.setSize(400, 400);
                frame.setVisible(true);
            }
        });
    }

    public class Balls extends JPanel {

        public Balls() {
            setLayout(null);
            // Randomize the speed and direction...
            add(new Ball("red", 10 - (int) Math.round((Math.random() * 20)), 10 - (int) Math.round((Math.random() * 20))));
            add(new Ball("blue", 10 - (int) Math.round((Math.random() * 20)), 10 - (int) Math.round((Math.random() * 20))));
        }
    }

    public class Ball extends JPanel implements Runnable {

        Color color;
        int diameter;
        long delay;
        private int vx;
        private int vy;

        public Ball(String ballcolor, int xvelocity, int yvelocity) {
            if (ballcolor == "red") {
                color = Color.red;
            } else if (ballcolor == "blue") {
                color = Color.blue;
            } else if (ballcolor == "black") {
                color = Color.black;
            } else if (ballcolor == "cyan") {
                color = Color.cyan;
            } else if (ballcolor == "darkGray") {
                color = Color.darkGray;
            } else if (ballcolor == "gray") {
                color = Color.gray;
            } else if (ballcolor == "green") {
                color = Color.green;
            } else if (ballcolor == "yellow") {
                color = Color.yellow;
            } else if (ballcolor == "lightGray") {
                color = Color.lightGray;
            } else if (ballcolor == "magenta") {
                color = Color.magenta;
            } else if (ballcolor == "orange") {
                color = Color.orange;
            } else if (ballcolor == "pink") {
                color = Color.pink;
            } else if (ballcolor == "white") {
                color = Color.white;
            }
            diameter = 30;
            delay = 100;

            vx = xvelocity;
            vy = yvelocity;

            new Thread(this).start();

        }

        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;

            int x = getX();
            int y = getY();

            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g.setColor(color);
            g.fillOval(0, 0, 30, 30); //adds color to circle
            g.setColor(Color.black);
            g2.drawOval(0, 0, 30, 30); //draws circle
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(30, 30);
        }

        public void run() {

            try {
                // Randamize the location...
                SwingUtilities.invokeAndWait(new Runnable() {
                    @Override
                    public void run() {
                        int x = (int) (Math.round(Math.random() * getParent().getWidth()));
                        int y = (int) (Math.round(Math.random() * getParent().getHeight()));

                        setLocation(x, y);
                    }
                });
            } catch (InterruptedException exp) {
                exp.printStackTrace();
            } catch (InvocationTargetException exp) {
                exp.printStackTrace();
            }

            while (isVisible()) {
                try {
                    Thread.sleep(delay);
                } catch (InterruptedException e) {
                    System.out.println("interrupted");
                }

                try {
                    SwingUtilities.invokeAndWait(new Runnable() {
                        @Override
                        public void run() {
                            move();
                            repaint();
                        }
                    });
                } catch (InterruptedException exp) {
                    exp.printStackTrace();
                } catch (InvocationTargetException exp) {
                    exp.printStackTrace();
                }
            }
        }

        public void move() {

            int x = getX();
            int y = getY();

            if (x + vx < 0 || x + diameter + vx > getParent().getWidth()) {
                vx *= -1;
            }
            if (y + vy < 0 || y + diameter + vy > getParent().getHeight()) {
                vy *= -1;
            }
            x += vx;
            y += vy;

            // Update the size and location...
            setSize(getPreferredSize());
            setLocation(x, y);

        }
    }
} 
```

这种方法的“主要”问题是每个`Ball`都有自己的`Thread`. 当您增加球的数量时，这将很快消耗您的系统资源......

## 不同的方法

正如 Hovercraft 开始的那样，您最好为球创建一个容器，其中球不是组件，而是球的“虚拟”概念，包含足够的信息以使它们能够从墙上反弹。 ..

![在此处输入图像描述](../Images/244d11e3a0582cacda618c43700a6668.png)

```
public class SimpleBalls {

    public static void main(String[] args) {
        new SimpleBalls();
    }

    public SimpleBalls() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Spot");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                Balls balls = new Balls();
                frame.add(balls);
                frame.setSize(400, 400);
                frame.setVisible(true);

                new Thread(new BounceEngine(balls)).start();

            }
        });
    }

    public static int random(int maxRange) {
        return (int) Math.round((Math.random() * maxRange));
    }

    public class Balls extends JPanel {

        private List<Ball> ballsUp;

        public Balls() {
            ballsUp = new ArrayList<Ball>(25);

            for (int index = 0; index < 10 + random(90); index++) {
                ballsUp.add(new Ball(new Color(random(255), random(255), random(255))));
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            for (Ball ball : ballsUp) {
                ball.paint(g2d);
            }
            g2d.dispose();
        }

        public List<Ball> getBalls() {
            return ballsUp;
        }
    }

    public class BounceEngine implements Runnable {

        private Balls parent;

        public BounceEngine(Balls parent) {
            this.parent = parent;
        }

        @Override
        public void run() {

            int width = getParent().getWidth();
            int height = getParent().getHeight();

            // Randomize the starting position...
            for (Ball ball : getParent().getBalls()) {
                int x = random(width);
                int y = random(height);

                Dimension size = ball.getSize();

                if (x + size.width > width) {
                    x = width - size.width;
                }
                if (y + size.height > height) {
                    y = height - size.height;
                }

                ball.setLocation(new Point(x, y));

            }

            while (getParent().isVisible()) {

                // Repaint the balls pen...
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        getParent().repaint();
                    }
                });

                // This is a little dangrous, as it's possible
                // for a repaint to occur while we're updating...
                for (Ball ball : getParent().getBalls()) {
                    move(ball);
                }

                // Some small delay...
                try {
                    Thread.sleep(100);
                } catch (InterruptedException ex) {
                }

            }

        }

        public Balls getParent() {
            return parent;
        }

        public void move(Ball ball) {

            Point p = ball.getLocation();
            Point speed = ball.getSpeed();
            Dimension size = ball.getSize();

            int vx = speed.x;
            int vy = speed.y;

            int x = p.x;
            int y = p.y;

            if (x + vx < 0 || x + size.width + vx > getParent().getWidth()) {
                vx *= -1;
            }
            if (y + vy < 0 || y + size.height + vy > getParent().getHeight()) {
                vy *= -1;
            }
            x += vx;
            y += vy;

            ball.setSpeed(new Point(vx, vy));
            ball.setLocation(new Point(x, y));

        }
    }

    public class Ball {

        private Color color;
        private Point location;
        private Dimension size;
        private Point speed;

        public Ball(Color color) {

            setColor(color);

            speed = new Point(10 - random(20), 10 - random(20));
            size = new Dimension(30, 30);

        }

        public Dimension getSize() {
            return size;
        }

        public void setColor(Color color) {
            this.color = color;
        }

        public void setLocation(Point location) {
            this.location = location;
        }

        public Color getColor() {
            return color;
        }

        public Point getLocation() {
            return location;
        }

        public Point getSpeed() {
            return speed;
        }

        public void setSpeed(Point speed) {
            this.speed = speed;
        }

        protected void paint(Graphics2D g2d) {

            Point p = getLocation();
            if (p != null) {
                g2d.setColor(getColor());
                Dimension size = getSize();
                g2d.fillOval(p.x, p.y, size.width, size.height);
            }

        }
    }
} 
```

因为这是由单个线程驱动的，所以它更具可扩展性。

您还可以检查[图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)，这是一个类似的问题；）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T02:39:32.297

您需要在这里使用两个完全不同的类 - 一个用于 BallContainer，它扩展了 JPanel 并且是绘制球的组件，另一个用于不扩展任何东西而是保存球的坐标和颜色的 Ball。BallContainer 应该`List<Ball>`在移动它们和绘制它们时迭代它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T02:41:20.130

你需要做的是增加你的`paintComponent`方法。

而不是只画一个球，你需要遍历它们，然后画出每一个。

例子：

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D)g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    for (Ball b: balls) {
        g.setColor(color);
        g.fillOval(x,y,30,30); //adds color to circle
        g.setColor(Color.black);
        g2.drawOval(x,y,30,30); //draws circle
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-30T19:57:59.250

```
package BouncingBallApp.src.copy;
import java.awt.*;

public class Ball {
    private Point location;
    private int radius;
    private Color color;
    private int dx, dy;
    //private Color[] ballArr;

    public Ball(Point l, int r, Color c){
        location = l;
        radius = r;
        color = c;
    }

    public Ball(Point l, int r){
        location = l;
        radius = r;
        color = Color.RED;

    }

    public Point getLocation() {
        return location;
    }

    public void setLocation(Point location) {
        this.location = location;
    }

    public int getRadius() {
        return radius;
    }

    public void setRadius(int radius) {
        this.radius = radius;
    }

    public Color getColor() {
        return color;
    }

    public void setColor(Color color) {
        this.color = color;

    }

    public void setMotion(int dx, int dy){
        this.dx = dx;
        this.dy = dy;
    }

    public void move(){
        location.translate(dx, dy);
    }

    public void moveTo(int x, int y){
        location.move(x, y);
    }

    public void paint (Graphics g) {
        g.setColor (color);
        g.fillOval (location.x-radius, location.y-radius, 2*radius, 2*radius);
    }

    public void reclectHoriz() {
        dy = -dy;       
    }   

    public void reclectVert() {
        dx = -dx;       
    }
}

package BouncingBallApp.src.copy;

public class MyApp {

    public static void main(String[] args) {
        MyFrame frm = new MyFrame(10);
        frm.setVisible(true);           

        for (int i=0; i<1000; i++){
            frm.stepTheBall();
        }
    }
}

package BouncingBallApp.src.copy;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.util.Random;

import javax.swing.JFrame;

public class MyFrame extends JFrame {
    public final int FRAMEWIDTH = 600;
    public final int FRAMEHEIGHT = 400;

    private Ball[] ballArr;

    private Random random =new Random ();
    private Color[] colors={Color.RED,Color.blue,Color.yellow}; 
    private int ballCnt;

    public MyFrame(int ballCnt){
        super();
        setSize(FRAMEWIDTH, FRAMEHEIGHT);
        setTitle("My Bouncing Ball Application");

        ballArr = new Ball[ballCnt];
        this.ballCnt = ballCnt;
         int c;

        for (int i=0; i < ballCnt; i++){
            int bcn =random.nextInt(colors.length);
            Color ballcolor=colors[bcn];
            ballArr[i] = new Ball(new Point(50,50),c=(int) (Math.random()*10+3)%8,ballcolor);

            int ddx = (int) (Math.random()*10+2)%8;
            int ddy = (int) (Math.random()*10+2)%8;         
            ballArr[i].setMotion(ddx, ddy); 
            //c++;
        }
    }

    public void paint(Graphics g){
        super.paint(g);
        for (int i=0; i < ballCnt; i++){
            ballArr[i].paint(g);    
        }
    }

    public void stepTheBall(){
        for (int i=0; i < ballCnt; i++){        
            ballArr[i].move();

            Point loc = ballArr[i].getLocation();

            if (loc.x < ballArr[i].getRadius() ||
                loc.x > FRAMEWIDTH-ballArr[i].getRadius()){
                ballArr[i].reclectVert();
            }

            if (loc.y < ballArr[i].getRadius() ||
                    loc.y > FRAMEHEIGHT-ballArr[i].getRadius()){
                ballArr[i].reclectHoriz();
            }
        }   
        repaint();
        try {
            Thread.sleep(20);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

} 
```

# android - Android中Total Private Dirty、Total Pss、Total Shared Dirty的区别

> ID：13022759
> 
> 赞同：6
> 
> 时间：2012-10-23T02:33:44.440
> 
> 标签：android

我只是想知道 Total Private Dirty、Total Pss、Total Shared Dirty 有什么区别。虽然解释在[网站上](http://developer.android.com/reference/android/os/Debug.MemoryInfo.html)，但对我来说并没有任何意义。

getTotalPrivateDirty() 返回以 kB 为单位的私有脏内存使用总量。

getTotalPss() 返回以 kB 为单位的总 PSS 内存使用量。

getTotalSharedDirty() 返回以 kB 为单位的总共享脏内存使用量。

我想了解这些的盗版应用是什么。我确实了解 PSS，因为我已经阅读了很多关于它的内容。但不是其他两个

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-10-23T06:21:42.057

公共 int getTotalSharedDirty ()

返回以 kB 为单位的总共享脏内存使用量。

公共 int getTotalPrivateDirty ()

返回以 kB 为单位的总私有脏内存使用量。

public int getTotalPss () PSS (Proportional Set Size)

返回以 kB 为单位的总 PSS 内存使用量。

# python - python解析xml字符串

> ID：13022763
> 
> 赞同：2
> 
> 时间：2012-10-23T02:34:18.627
> 
> 标签：python, xml, parsing, elementtree

我正在尝试从网站解析数据，但无法打印数据。

```
import xml.etree.ElementTree as ET
from urllib import urlopen

link = urlopen('http://weather.aero/dataserver_current/httpparam?dataSource=metars&requestType=retrieve&format=xml&stationString=KSFO&hoursBeforeNow=1')

tree = ET.parse(link)
root = tree.getroot()

data = root.findall('data/metar')
for metar in data:
    print metar.find('temp_c').text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:38:13.937

它区分大小写：

```
data = root.findall('data/METAR') 
```

# c# - C# 尝试检索 yahoo oauth 请求令牌导致 401

> ID：13022765
> 
> 赞同：1
> 
> 时间：2012-10-23T02:34:20.347
> 
> 标签：c#, oauth, request, token, yahoo

我看不出我做错了什么，但这可能是因为这是我第一次使用 oauth 探戈，而且我确信我在某个地方对其进行了新的尝试。我目前正在使用由谷歌代码托管并链接到 oauth 网站 (http://oauth.googlecode.com/svn/code/csharp/) 的 oauth 库

对于以下代码，变量“YQL”是一个“OAuthBase”对象，它在我的类范围内声明为受保护，如下所示：

```
private OAuthBase YQL; 
```

并像这样初始化：

```
public AverageEverydayConstructor()
{
     ...
     YQL = new OAuthBase();
     ...
} 
```

这是所有实际非功能发生的地方（字符串“key”是我的消费者密钥，“secret”是我的消费者秘密）

```
 private string yahooRetrieveToken(string key, string secret)
    {
        string tokenRequestUrl = @"https://api.login.yahoo.com/oauth/v2/get_request_token";
        string parameters = "";

        string timestamp = YQL.GenerateTimeStamp();
        string nonce = YQL.GenerateNonce();

        parameters += "?oauth_nonce=" + nonce;
        parameters += "&oauth_timestamp=" + timestamp;
        parameters += "&oauth_consumer_key=" + key;
        parameters += "&oauth_signature_method=HMAC-SHA1";
        parameters += "&oauth_signature=" + secret;
        parameters += "&oauth_version=1.0";
        parameters += "&xoauth_lang_pref=en-us";
        parameters += "&oauth_callback=\"oob\"";

        string fullUrl = tokenRequestUrl + parameters;
        Clipboard.SetText(fullUrl);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(fullUrl);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse(); //this is the line that actually err's with 401.
        Stream result = response.GetResponseStream();

        //And yes, I'm aware I'm not using very good practice and haven't properly closed the stream. I'm just trying to get it to work first, but don't worry I haven't forgotten.

        string unparsedResult = result.ToString();
        return unparsedResult;
    } 
```

我已经尝试了我能想到的所有东西，并浏览了这个页面（http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html）几十次。为了确保我覆盖了所有基础，我还尝试来回更改下面的两行，看看是否有任何变化。

```
 parameters += "&oauth_signature_method=PLAINTEXT";
        parameters += "&oauth_signature=" + secret + "%26"; 
```

谢谢任何人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:18:46.873

所以我不确定为什么会这样。我的问题正是（据我所知）YQL 的文档规范。我没有发出 POST 请求，而是发出了一个 GET 请求，只是做了请求标头中的所有操作。它基于：[401 Unauthorized using Yahoo OAuth](https://stackoverflow.com/questions/3668793/401-unauthorized-using-yahoo-oauth)

我不知道为什么他所做的对他不起作用，而是对我起作用；无论哪种方式，这都是有效的结果代码。我实际上并没有从中获得令牌，但我能够发出 YQL 请求：

```
/// <summary>
/// Make a YQL query and return an unformated xml string
/// </summary>
/// <param name="key">Application Consumer Key</param>
/// <param name="secret">Application Consumer Secret</param>
/// <param name="query">The YQL query you want to run</param>
/// <returns>Returns formatted xml in the form of a string from YQL</returns>
protected string yqlQuery(string key, string secret, string query)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(@"http://query.yahooapis.com/v1/yql?q=" + query);
    OAuthBase YQL = new OAuthBase();
    string nonce = YQL.GenerateNonce();
    string timestamp = YQL.GenerateTimeStamp();
    request.Headers.Add(
        "Authorization: OAuth " +
        "realm=\"yahooapis.com\"," +
        "oauth_consumer_key=\"" + key + "\"," +
        "oauth_nonce=\"" + nonce + "\"," +
        "oauth_signature_method=\"PLAINTEXT\"," +
        "oauth_timestamp=\"" + timestamp + "\"," +
        "oauth_version=\"1.0\"," +
        "oauth_signature=\"" + secret + "%26\""
    );
    string resultString = "";
    using (StreamReader read = new StreamReader(request.GetResponse().GetResponseStream(), true))
    {
        resultString = read.ReadToEnd();
    }
    return resultString;
} 
```

# ios - 我可以在 iOS 中测量蓝牙信号强度吗？

> ID：13022769
> 
> 赞同：7
> 
> 时间：2012-10-23T02:35:21.703
> 
> 标签：ios, objective-c, iphone, bluetooth

我可以测量iPhone 范围内蓝牙设备**的信号强度吗？**

基本上我想做的是扫描范围内的设备列表，然后查看哪个设备的信号强度最高。

在iOS中是否有可能，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:57:48.897

是的，有一种方法可以测量低功耗蓝牙 (4.0) 的信号强度，它是 RSSI 编号。当您扫描外围设备时，您会将标志 CBCentralManagerScanOptionAllowDuplicatesKey 设置为 YES，如下所示：

```
NSDictionary * dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@YES, CBCentralManagerScanOptionAllowDuplicatesKey, nil];

// Start scanning for peripherals
[cmanager scanForPeripheralsWithServices:nil options:dictionary]; 
```

如果您想在不编写任何代码的情况下查看 RSSI 编号，您应该查看 iTunes 中的应用程序[LightBlue](https://itunes.apple.com/us/app/lightblue/id557428110?mt=8)。当您连接到外围设备时，它会在连接时每秒向您显示更新的 RSSI 编号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T07:35:34.457

查看[CoreBluetooth 文档](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CBCentralManagerDelegate_Protocol/index.html#//apple_ref/occ/intfm/CBCentralManagerDelegate/centralManager:didDiscoverPeripheral:advertisementData:RSSI:)：

```
- (void)centralManager:(CBCentralManager *)central 
 didDiscoverPeripheral:(CBPeripheral *)peripheral 
     advertisementData:(NSDictionary *)advertisementData 
                  RSSI:(NSNumber *)RSSI
{ ... } 
```

[RSSI](https://de.wikipedia.org/wiki/Received_Signal_Strength_Indication)是您正在寻找的。免责声明：核心蓝牙仅适用于蓝牙 4 LE。

如果确切的范围无关紧要，但您对扫描一般可用的设备感兴趣，您可以查看 github 项目[BeeTee](https://github.com/michaeldorner/BeeTee)，它允许您扫描您周围的所有蓝牙设备（不仅仅是蓝牙 LE）。再次免责声明：我是 BeeTee 的作者。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T01:34:56.213

当您使用 CBCentralManager 编写“中央”代码时，您最终将连接到您正在寻找的 CBPeripheral。连接到外围设备后，请保留对它的引用，将您的对象设置为外围设备的委托并在外围设备上调用“ [readRSSI](https://developer.apple.com/reference/corebluetooth/cbperipheral/1519111-readrssi?language=objc) ”。您将获得一个委托回调[外围设备：didReadRSSI: 错误：](https://developer.apple.com/reference/corebluetooth/cbperipheraldelegate/1620304-peripheral?language=objc)如果您编写了一个调用“readRSSI”的方法，您可以使用[performSelector: withObject: afterDelay:](https://developer.apple.com/reference/objectivec/nsobject/1416176-performselector)来调用它。

这个问题的另一个建议答案是在扫描时提供“允许重复”键。字典键[CBCentralManagerScanOptionAllowDuplicatesKey](https://developer.apple.com/reference/corebluetooth/cbcentralmanagerscanoptionallowduplicateskey)的文档在传递给[scanForPeripheralsWithServices:options:](https://developer.apple.com/reference/corebluetooth/cbcentralmanager/1518986-scanforperipheralswithservices)时表示“禁用此过滤可能会对电池寿命产生不利影响，只有在必要时才应使用”。

如果您选择编写延迟调用，则可以调整调用频率以帮助您管理对用户电池的影响。

# jmeter - 如何创建负载拆分场景？在 JMeter 中

> ID：13022770
> 
> 赞同：2
> 
> 时间：2012-10-23T02:36:31.880
> 
> 标签：jmeter, beanshell

目前我正在研究 jmeter 中的负载拆分方案。
我的测试计划结构如下所示：

```
 **TestPlan**
**BeanShell Preprocessor** (here I have below code)

    Integer totalLoad = 0;
    Integer searchUsers = 0;
    Integer createUseres = 0; 

    totalLoad = Integer.parseInt (vars.get("TOTALUSERS")); 
    searchUsers = ((totalLoad / 100) * 40);  createUseres =((totalLoad / 100) * 10);  guestUsers = ((totalLoad / 100) * 50);

    vars.put("searchUsers", searchUsers.toString());
    vars.put("createUseres", createUseres.toString());
    vars.put("guestUsers", guestUsers.toString()); 

**Thread group**: Search (I am using ${searchUsers} in the number of Threads(users) field) 
**Thread group**: Create (I am using ${createUseres} in the number of Threads(users) field) 
**Thread group**: Guest (I am using ${guestUsers} in the number of Threads(users) field) 
```

这对我不起作用。
你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:32:42.497

JMeter 变量是每个线程的本地变量。因此，如果您将在预处理器中创建这些变量，则此级别的其他线程将无法访问它们。

您应该使用属性来放置/获取`searchUsers`, `createUseres`，`guestUsers`例如：

`props.put("guestUsers", guestUsers.toString());`在 BeanShell 预处理器中使用。用作`${__P(searchUsers)}`线程组中的线程数。

# iphone - 如何控制 iCloud 何时同步我的核心数据？

> ID：13022787
> 
> 赞同：1
> 
> 时间：2012-10-23T02:40:28.317
> 
> 标签：iphone, objective-c, ios, core-data, icloud

我有以下代码可以将我的核心数据与 iCloud 同步。但是，我只希望它在我说的时候同步。例如，仅在使用 wifi 时同步。我能做到吗？这是我的代码：

```
- (NSManagedObjectContext *)managedObjectContext {

    if (managedObjectContext != nil) {
        return managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [moc performBlockAndWait:^{
            [moc setPersistentStoreCoordinator: coordinator];
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(mergeChangesFrom_iCloud:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:coordinator];
        }];
        managedObjectContext = moc;

        managedObjectContext.mergePolicy = [[NSMergePolicy alloc]
                                            initWithMergeType:NSMergeByPropertyObjectTrumpMergePolicyType];
    }

    return managedObjectContext;
}

- (void)mergeChangesFrom_iCloud:(NSNotification *)notification {

    NSLog(@"Merging in changes from iCloud...");

    NSManagedObjectContext* moc = [self managedObjectContext];

    [moc performBlock:^{

        [moc mergeChangesFromContextDidSaveNotification:notification];

        NSNotification* refreshNotification = [NSNotification notificationWithName:@"SomethingChanged"
                                                                            object:self
                                                                          userInfo:[notification userInfo]];

        [[NSNotificationCenter defaultCenter] postNotification:refreshNotification];
    }];
}
- (NSManagedObjectModel *)managedObjectModel {

    if (managedObjectModel != nil) {
        return managedObjectModel;
    }
    NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"EntryDatabase" ofType:@"momd"];
    NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
    managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if((persistentStoreCoordinator != nil)) {
        return persistentStoreCoordinator;
    }

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"iCloud ID is here, i removed it from stack overflow";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"CoreDataStore.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];

        NSString *storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:dataFileName];

        NSURL *localStore = [NSURL fileURLWithPath:storePath];

        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:[NSURL fileURLWithPath:iCloudData]
                                    options:options
                                      error:nil];

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:localStore
                                    options:options
                                      error:nil];
            [psc unlock];

        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    return persistentStoreCoordinator;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:42:25.030

据我所知，这不可能发生。无论如何都不是以任何简单有效的方式。

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html)

问题是 iCloud 的操作不透明。因此，iOS 决定何时进行同步以及多久进行一次同步。在上面的文档中，Apple 说“最佳实践”是专门使用沙盒或专门使用 iCloud，但不要在它们之间复制您的数据。

也就是说，Apple 提到了在 iCloud 不可用时进行操作。这似乎符合您建议的情况。从根本上说，您需要正常设置它，确保您拥有所需的数据，然后停用 iCloud 并将您的数据移动到沙箱以进行处理。当您想要同步时，您只需将数据复制回来。

> 要处理 iCloud 可用性的变化，请实现一个在接收到 NSUbiquityIdentityDidChangeNotification 通知时调用的方法。您的方法需要执行以下工作：
> 
> 调用 ubiquityIdentityToken 方法并存储其返回值。将新值与之前的值进行比较，以了解用户是退出其帐户还是登录到其他帐户。如果以前使用的帐户现在不可用，请根据需要在本地保存当前状态，清空与 iCloud 相关的数据缓存，并刷新所有与 iCloud 相关的用户界面元素。如果您希望允许用户在 iCloud 不可用的情况下继续创建内容，请将这些内容存储在您应用的沙盒容器中。当帐户再次可用时，将新内容移至 iCloud。通常最好在不通知用户或要求用户进行任何交互的情况下执行此操作。

这似乎符合您的要求。但是，我自己也只是到了这个阶段，所以我不能进一步评论。

# xcode - Xcode：如果文件名不是Localizable.strings，如何使本地化的字符串文件工作，如何本地化静态lib项目？

> ID：13022789
> 
> 赞同：1
> 
> 时间：2012-10-23T02:41:07.760
> 
> 标签：xcode, localization

问题 1：我正在关注[http://pinkstone.co.uk/how-to-localize-your-project-in-xcode-4-4/](http://pinkstone.co.uk/how-to-localize-your-project-in-xcode-4-4/)为我的 hello world 项目创建本地化字符串。本地化无法工作，直到我将文件名从 Localized.strings 更改为 Localizable.strings。似乎只有文件“Localizable.strings”被识别？在我的实际项目中，我想要几个不同模块的字符串文件，那我该怎么办？

问题2：现在我正在尝试本地化一个静态库项目。我按照上面的确切步骤并使用 Localizable.strings 作为文件名。这些文件被添加到库项目中。但是，结果是根本没有本地化的字符串。为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:29:28.137

对于问题1，您可以使用函数： NSLocalizedStringFromTable(@"aString", @"fileName", nil)

它返回一个本地化的 NSString，其中 fileName 是一个包含要本地化的字符串的文件。

此外，fileName 的扩展名应为 .strings

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:16:34.030

正如您所指出的，`NSLocalizedString`正在寻找 Localizable.strings。正如 Jim 所说，您可以使用`NSLocalizedStringFromTable`指定另一个字符串文件。

对于问题 2，这很可能与您的第一个问题有关。如果您将库包含在本身具有 Localizable.strings 文件的项目中，那么将会发生冲突（不幸的是 XCode 不会警告您）并且只有两个 Localizable.strings 文件中的一个会在您的应用程序包。如果是这种情况，解决方案是根据问题 1 的答案使用不同的名称。

# parsing - 使用 SED 解析包含可能行更改的日志文件

> ID：13022792
> 
> 赞同：1
> 
> 时间：2012-10-23T02:41:21.580
> 
> 标签：parsing, logging, sed

我正在用 PHP 打印一个日志文件，不幸的是，它包含

```
0000000001 foo.php:123 This is a message\n
0000000002 foo.php:124 This is a message, line 1\n
line 2\n
line 3\n 
```

使用 sed，

```
s/^\([0-9]{10}\) \(^[\s]*\) \(.*\)$/ 
```

我可以得到上面的第 1 行和第 2 行，但不能得到第 3 行和第 4 行，因为它们与模式不匹配；我想有条件地删除换行符，例如在上面的日志中，合并第 2..4 行。

我可以让最后一个 (.*) 匹配 "直到我以 ^[0-9]{10} 开头的新行吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:45:14.690

这可能对您有用（GNU sed）：

```
sed ':a;$!N;/\n[0-9]\{10\}/!s/\n//;ta;P;D' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:03:09.127

使用 awk，您可以像这样格式化文件，合并所有不以数字开头的行。您可以将您的 sed 应用于此：

```
$ awk '/^[0-9]/{if (x)print x;x="";}{x=x $0;}END{print x}' file
0000000001 foo.php:123 This is a message\n
0000000002 foo.php:124 This is a message, line 1\nline 2\nline 3\n 
```

# linux - 如何开始在 *nix 上开发

> ID：13022793
> 
> 赞同：2
> 
> 时间：2012-10-23T02:41:26.850
> 
> 标签：linux

是否有关于开始使用 g++ 和 gdb 的良好“操作方法”或“入门”指南？

一些背景。体面的程序员，但到目前为止，我已经在 Visual Studio 的 Windows 上完成了所有工作。

我有一点使用终端编译文件的经验（除了 .h 和 1 或 2 .cpp 之外没有太多）。但除此之外没有什么。

任何人都知道如何开始在 Linux 上编码的好入门？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:20:49.647

阅读一些好书，尤其是[Advanced Linux Programming](http://advancedlinuxprogramming.com/)和[Advanced Unix Programming](http://basepath.com/aup/)。另请阅读[Linux 文档项目中的](http://www.tldp.org/)[高级 bash 脚本编写指南](http://www.tldp.org/LDP/abs/html/)和其他文档

显然，在您的笔记本电脑上安装一些 Linux 发行版（不是在某些 VM 中，而是在真实的磁盘分区上）。如果您有类似 debian 的发行版，请在其上运行`aptitude build-dep gcc-4.6 gedit`以获得许多有趣的开发人员包。

学习一些命令行技巧。学会使用`man`命令；安装`manpages`和`manpages-dev`打包后，键入`man man`（使用空格键“滚动文本”，`q`键退出）。另请阅读[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)手册页。当您忘记如何使用`cp`try之类的命令时`cp --help`。

使用[git 之](http://scm-git.com/)类的版本控制系统，即使是一个人的小型项目。

备份您的文件。

[阅读有关Linux](http://en.wikipedia.org/wiki/Linux)、[内核](http://en.wikipedia.org/wiki/Kernel_%28computing%29)、[系统调用](http://en.wikipedia.org/wiki/Syscall)、[自由软件](http://en.wikipedia.org/wiki/Free_software)、[X11](http://en.wikipedia.org/wiki/X_Window_System)、[Posix](http://en.wikipedia.org/wiki/Posix)、[Unix](http://en.wikipedia.org/wiki/Unix)的几个相关维基百科页面

努力使用命令行。例如，尝试在命令行上做任何事情一周或更长时间。避免使用您的桌面，可能还有您的鼠标。学会使用`emacs`。

阅读[GNU make等构建器程序](http://www.gnu.org/software/make/)

从他们的源代码（例如从[sourceforge](http://sourceforge.net/)或[freecode](http://freecode.com/)或[github](http://github.com/)）中检索几个免费软件并练习构建和编译它们。研究他们的源代码

在命令行（在终端中）启动的基本提示（如果找不到命令，则需要安装提供它的软件包）。

*   运行`emacs`；有一个教程菜单；练习半个小时。

*   编辑`helloworld.c`程序（`main`调用某个`hello`函数）

*   `gcc -g -Wall helloworld.c -o helloworld`用;编译它 改进您的代码，直到没有给出警告。总是传递`-Wall`给`gcc`或`g++`得到几乎所有的警告。

*   运行它`./helloworld`

*   调试它`gdb ./helloworld`，然后

    1.  使用`help`命令
    2.  使用该`b main`命令添加断点`main`，同样为您的`hello`函数添加断点。
    3.  `gdb`在使用下运行它`r`
    4.  用于`bt`获取回溯
    5.  用于`p`打印一些变量
    6.  用于`c`继续执行被调试的程序。
*   编写一个小程序`Makefile`，以便能够`helloworld`使用`make`

*   学习如何在 Emacs中调用`make`(with `M-x compile`) 和`gdb`(with )`M-x gdb`

了解有关[valgrind](http://valgrind.org/)的更多信息（用于检测大多数内存泄漏）。也许考虑在您的某些应用程序中使用[Boehm 的 GC 。](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:05:58.360

你有很多东西要学。我不会给你细节，但是作为一个从事 unix 和 c/c++ 开发几十年的人，我会试着给你一些开始的话题。

我的主要建议是开始尝试。用 C 或 C++ 编写最简单的程序（打印“Hello there, world!”是传统的）并弄清楚如何从命令行编译和运行它。然后，一旦你有了一个编译的版本，在调试器下启动它并玩弄断点、打印表达式等。一旦你启动并运行了这个最简单的程序，你就会明白调试器是什么告诉你，添加一个类、函数、结构或其他任何感觉像是一小步的东西，然后再次完成循环。与您从一个非常大的程序开始相比，您将通过这种方式进行得更快。

仍然处于非常高的水平，这里有一些你至少需要弄清楚的主题。请注意，“从小处着手”方法适用于以下任何主题。

*   Running `g++`：它有相当不错的命令行语法在线文档，虽然一开始你一定会觉得它很吓人，但请尝试寻找最简单的起点。
*   查找要使用的文本编辑器。 `Vim`并且`emacs`是传统的（并且非常非常强大），但两者都有相对陡峭的学习曲线。如果你身边有人帮助你，那就更好了。还有其他选择，但作为`emacs`用户自己，恐怕我对它们不太熟悉。
*   熟悉`gdb`. 它是一个非常强大的工具，可以帮助您理解您的程序。再次，它有大量的在线文档，将回报仔细阅读。
*   熟悉一些标准的 unix 命令会很有用：`ls`、`cd`和移动 unix 目录导航的基础知识；`grep`用于快速搜索源文件。
*   您必须习惯*命令行*方法与*ide 方法*。前者是传统的 unix 开发人员模型，您可以将所需的操作从其他工具的集合中组合在一起，而不是让 ide 对您隐藏大部分这些知识。

如果您的项目是多文件的，特别是如果它是一个完整学期的项目，您还可以考虑学习以下主题。

*   `Make`是一个描述如何编译和链接多文件项目的工具，这样你就不必每次都记住如何手动完成。 `Make`不幸的是，它因难以使用而享有当之无愧的声誉，但这在跨越多个目录的非常大的项目中大多是正确的，并且在线可能有很好的简单示例。
*   即使对于一些相对较小的项目，我也会强烈考虑使用源代码控制系统，例如`git`or 。`hg`拥有您所做工作的存档版本会更加安全，这样您就可以快速备份。两者对于一个小型的一次性项目来说都是多余的，但它们值得自己学习`git`。`hg`我今天理解的传统观点是，它们在理念和核心功能上非常相似，但`hg`在命令行级别肯定更一致，因此更容易开始。

我怀疑这是相当吓人的，特别是如果您之前实际上没有接触过 unix 命令环境。我再次强调我上面的第一条建议：从简单和实验开始学习。这可以最大限度地减少您在任何给定时间点必须绕开的新东西的数量。

# batch-file - 修改 For 循环变量 cmd

> ID：13022798
> 
> 赞同：1
> 
> 时间：2012-10-23T02:41:51.750
> 
> 标签：batch-file, cmd

我想做的是从包含各种视频文件名的文本文件中过滤掉特定的视频文件扩展名，例如 filename.txt 内容是

```
Red.mp4
Yellow.mp4
Blue.mp4
Orange.wmv
Purple.wmv 
```

现在我将只为 .mp4 解析这个文件并利用“for parameter”来制作**几个**.txt 文件，每个文件都包含特定文件的特定代码。换句话说，将创建与 filename.txt 中的 .mp4 视频数量相同的文件数量 我的代码

```
::==
@echo off
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in ('type filename.txt ^|findstr ".mp4"') do (
set /a n+=1
echo >myfile!n!.txt
set v!n!=x264 --crf 23  --level 3.1 --tune film --o "%%a" "%%a.mkv"
)
set v
pause
::== 
```

我有**两个**问题：

1.  如何**修改**%%a 以删除其 .mp4 字符串，因为当我应用“%%a.mkv”时，文件将被命名为 *.mp4.mkv，我不希望这样，并且可以手动键入 .mp4 --o "%%a.mp4" "%%a.mkv"
2.  如果已经创建了所需的 txt 文件，我如何将变量 v1、v2、v3... 传递给我尝试使用的相应文本文件

    echo %v!n!% > >myfile!n!.txt **在**循环中，但它不起作用，所以请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:55:44.957

我认为不需要使用一个循环创建一组变量，然后在第二个循环中将内容添加到文件中。只需在一个循环中完成所有操作。

此外，没有必要创建一个空文件，并且您这样做的尝试是不正确的 - 它会将行添加`ECHO is off.`到每个文件中。要回显空白行，您应该使用`>filename ECHO(`. 要创建一个空文件，请使用`copy nul filename`.

这不太可能成为问题，但文件名可能包含`!`. `!`如果启用延迟扩展，包含 FOR 变量的扩展将被破坏。该问题可以通过在循环中打开和关闭延迟扩展来解决，但还有另一种解决方案：使用另一个 FINDSTR 命令在每行前面加上行号，然后使用 FOR 循环解析行号和文件名。这消除了增加计数器的需要并消除了延迟扩展的需要。

`~n`FOR 变量修饰符用于获取不带扩展名的名称。

```
@echo off
for /f "tokens=1* delims=:" %%A in (
  'findstr /lie ".mp4" filename.txt^|findstr /n "^"'
) do (
  >"myfile%%A.txt" echo x264 --crf 23 --level 3.1 --tune film --o "%%B" "%%~nB.mkv"
) 
```

# javascript - 通过 JavaScript 从另一个页面获取 JSON 数据

> ID：13022800
> 
> 赞同：0
> 
> 时间：2012-10-23T02:41:59.580
> 
> 标签：javascript, json

我有一个页面，当我单击第一个控件时，我想在其中添加几个控件，我希望我的 javascript 打开特定的 JSONpage，对内容进行语法化，然后以特定的格式输出内容`<DIV id="one">`。然后，当我选择 div id="one" 中的一些元素时，我希望 JavaScript 连接到另一个 JSON 页面并从那里获取另一个数据数组。

我的问题 - 我该如何做 JSON 部分？换句话说，我如何获得 JavaScript 版本：

```
$dataSet = json_decode(file_get_contents($url), true); 
```

我是 JavaScript 新手，这件事需要很多时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:14:46.597

得到这个工作

```
function getDates() {
    jQuery(function($) {                   
        $.ajax( {   
            url : "jsonPage.php",
            type : "GET",
            success : function(data) {
                // get the data string and convert it to a JSON object.
                var jsonData = JSON.parse(data);
                var date = new Array();                                
                var i = -1;                               
                $.each(jsonData, function(Idx, Value) {
                    $.each(Value, function(x, y) {
                        if(x == 'date')
                        {
                            i = i + 1;
                            date[i] = y;
                        }                                                
                    });
                });
                //output my dates; [0] in this case         
                $("#testArea").html(date[0]);
            }
        });
    });
} 
```

# codeigniter - CodeIgniter URI 路由未按预期工作

> ID：13022804
> 
> 赞同：0
> 
> 时间：2012-10-23T02:42:25.540
> 
> 标签：codeigniter, codeigniter-2

用户指南中有这样的内容

```
(:num) will match a segment containing only numbers. 
```

所以我这样做

```
//using wildcard
$route['tool/reply/(\d+)'] = "tool/reply/$1";
//or using regx like this
//$route['tool/reply/(:num)'] = "tool/reply/$1"; 
```

但它不仅匹配数字，还匹配字符串。发生了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:59:11.087

尝试将您的功能`tool/reply`设置为`tool/reply_numeric`. 它可能会感到困惑，只是路由到您的控制器并跳过您的路由。

# jquery - 没有 jQuery 插件，没有 jQuery UI，...只有 jQuery API

> ID：13022807
> 
> 赞同：-7
> 
> 时间：2012-10-23T02:42:55.350
> 
> 标签：jquery

我正在建立一个网站，并且在我的注册表单中我正在努力进行 jQuery 验证。我需要验证名称，所以它只包含字母。没有 jQuery 插件 .. 没有 jQuery UI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:47:21.170

您可以为此使用正则表达式：

```
/^[a-zA-Z]+$/.test('sfjd') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:47:45.860

> *“没有 jQuery 插件”*

但是 jQuery 核心不包括验证，因此您需要一个或另一个验证插件（可能是您自己编写的）。

> *“我需要验证名称，所以它只包含字母。”*

那么你不需要jQuery。只需使用一个简单的正则表达式：

```
var name = // some string that you set somehow from what the user entered
if (/[^A-Z]/i.test(name)) {
    // validation failed: some non-letter found
} 
```

正则表达式模式`[^A-Z]`将匹配*不在*AZ 范围内的任何字符，并且该`i`标志使其不区分大小写。因此，只需`name`使用或不使用 jQuery 设置变量，您就可以开始了……

# android - 我如何使用外部罐子？

> ID：13022809
> 
> 赞同：-2
> 
> 时间：2012-10-23T02:43:11.797
> 
> 标签：android, jar, external, libraries

> **可能重复：**
> [如何使用 .jar 文件中的类？](https://stackoverflow.com/questions/460364/how-to-use-classes-from-jar-files)

我正在尝试从[这里使用这个外部 jar](https://github.com/nostra13/Android-Universal-Image-Loader)

我已将 jar 文件添加到我的“引用库”中，但如何使用它？

![在此处输入图像描述](../Images/e450ae49e6d6bc9e20069f5ea81c4ac4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:58:37.420

从 Eclipse 菜单（在 Eclipse 顶部看到）>>单击**项目**>>**属性**>>

将打开一个对话框。查看左侧并选择：Java Build Path

从那里：在选项卡中选择：库选项卡

单击右侧的添加 JAR 按钮。

找到文件的路径。

单击 .jar 文件（您要添加的 jar 文件）单击确定。

完毕！:)

# java - 使用java的返回方法打印放大的字符

> ID：13022813
> 
> 赞同：0
> 
> 时间：2012-10-23T02:43:46.760
> 
> 标签：java, methods, parameters, char, block

我迷失了可怕。整个问题是......编写一个名为 printChar 的方法，该方法将采用 char 类型的参数并将其打印在块打印中。例如，`printChar('c')`将显示：

```
 x x
  x   x
 x     x
x
x
x
x
 x     x
  x   x
   x x 
```

由于某种原因，我似乎无法做到这一点。我必须将它返回给 main 方法。如果您能为我做到这一点，那么一个非常基本的答案将是最好的。谢谢你们

# matlab - 求元素间二阶差分绝对值的均值

> ID：13022814
> 
> 赞同：4
> 
> 时间：2012-10-23T02:43:52.983
> 
> 标签：matlab, matlab-guide

我有一个像这样的行向量：`[1 5 6 -4 3]`。我想找到元素之间第二个差异的绝对值的平均值。本例中的第二个差异是`(6-1)=5 ,-4-5=-9 & 3-6=-3`，平均绝对平均值是`(5+9+3)/3=17/3`。

有没有办法使用 MATLAB 的高效矩阵/数组操作来很好地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:54:50.160

对于第二个区别，您可以执行以下操作（v 是您的向量）：

```
v(3:end)-v(1:end-2) 
```

从那里计算**绝对值的****平均值**，这确实是一个简单的步骤。

# spring - 使用gradle构建spring时出现编译错误

> ID：13022820
> 
> 赞同：2
> 
> 时间：2012-10-23T02:45:01.283
> 
> 标签：spring, build, gradle

我正在通过使用 git 下载 spring 源来学习使用 Spring 和 gradle。我已经使用 git clone git://github.com/SpringSource/spring-framework.git 下载了它而且我在本地设置了 gradle。

当我试图执行时

梯度构建

我收到如下编译错误：

```
C:\Users\mahendran\spring-framework>gradle build
:spring-core:asmRepackJar
:spring-core:cglibRepackJar
:spring-core:compileJava
C:\Users\mahendran\spring-framework\spring-core\src\main\java\org\springframework\util\xml\StaxUtils.java:318: 
cannot find symbol symbol : method newFactory()
location: class javax.xml.stream.XMLEventFactory
            return new XMLEventStreamWriter(eventWriter, XMLEventFactory.newFactory());
                                                                        ^
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error
:spring-core:compileJava FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':spring-core:compileJava'.
Compilation failed; see the compiler error output for details.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 1 mins 5.58 secs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:34:58.570

这看起来像版本偏差 - 我认为您需要更新 JDK。AFAICT，newFactory() 是在 JDK6 版本 1.6.0.18 中添加的。

# joomla - 如何在 K2 中为类别创建和使用模板？

> ID：13022823
> 
> 赞同：4
> 
> 时间：2012-10-23T02:45:20.987
> 
> 标签：joomla, joomla1.5, joomla-k2

我正在使用 Joomla 1.5 和 K2 2.5，我不知道如何为类别赋予特定样式，我仍然不明白“覆盖”的东西。

我一直在关注本教程：

[http://getk2.org/documentation/tutorials/item/174-templates-with-k2-and-the-concepts-of-sub-templates](http://getk2.org/documentation/tutorials/item/174-templating-with-k2-and-the-concepts-of-sub-templates)

我的类别仍然具有相同的样式，我在那里缺少什么？

到目前为止，我一直在小心地（我认为是这样）放置所有文件，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:12:29.707

请检查：

*   在后端选择正确的模板（K2 -> 类别 -> 编辑类别 -> 类别项目布局（右侧的选项卡）-> 选择模板）。

*   如果您在那里看不到自定义模板的名称，请仔细检查模板的路径。

*   为了有一个与 K2 不同的 css 文件（如果需要，每个类别模板一个），安装这个插件：

[http://www.jiliko.net/extensions/css4k2.html](http://www.jiliko.net/extensions/css4k2.html)

# objective-c - 将新文件/类添加到 ios 项目时出现链接错误

> ID：13022824
> 
> 赞同：0
> 
> 时间：2012-10-23T02:45:55.913
> 
> 标签：objective-c, ios, ios5

添加新的 .h 和 .m 文件数据解析后，我的链接构建失败，我不太明白为什么。不过，我对objective-c 比较陌生。如果我删除包含（然后我必须从需要数据解析类的文件中删除对对象的引用），那么它不会失败。只是删除对象不会剪切它，当我尝试包含文件时它仍然失败。在链接下的错误部分中，它显示架构 i386 的一个重复符号

数据解析.h 是：

```
//
//  dataParsing.h
//  TelnetToICC
//
//  Created by **** on 10/8/12.
//
//

#import <UIKit/UIKit.h>

@interface dataParsing : UIView
{

}
- (void)getData:NSString:id;
-(void) parseLine:id;
-(void) parseDatagram:id;
-(void) reset;

@end

char icc_data[10000];
int data_top=-1; 
```

这个想法只是编写一些简单的函数来处理字符串，所以我不想在这里做任何真正特别的事情，但我对 Objective-c 比较陌生。ViewController.m 中用于数据解析的包含是：

```
#import "dataParsing.h"
#import "ViewController.h"
#import <CoreFoundation/CFSocket.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>

@implementation ViewController 
```

似乎我为链接器做了两次事情，但我的实验还没有找到它。我注意到我的两个 .h 文件都有

```
#import <UIKit/UIKit.h> 
```

但我删除了一个，它不起作用。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:58:49.043

重复的符号是`_data_top`。我猜也是`_icc_data`。问题是您在**dataparsing.h**文件中声明了一个全局变量。因此，对于包含此 .h 文件的每个文件，都会创建一个具有相同名称的新全局变量，从而导致重复符号链接器错误。

您需要做的是更改行：

```
char icc_data[10000];
int data_top=-1; 
```

到：

```
extern char icc_data[10000];
extern int data_top; 
```

然后在**dataparser.m**文件中执行以下操作：

```
char icc_data[10000];
int data_top = -1; 
```

.h 文件中的 extern 让编译器和链接器知道将在某处定义变量的一份副本。.m 文件中的行就是一个定义。

# php - .htaccess 在 url 中使用 mysql 内容重定向

> ID：13022825
> 
> 赞同：1
> 
> 时间：2012-10-23T02:46:00.260
> 
> 标签：php, mysql, .htaccess

我有这样的网址

mysite.com/view.php?id=123

我已使用 .htaccess 将 URL 更改为如下所示

mysite.com/123/page-title.html

现在，由于“页面标题”部分不是原始 URL 的一部分，而是来自对应于 id“123”的 mysql 表的信息，我如何 301 将旧 URL 重定向到新 URL？

当然肯定有一些PHP涉及，但我不知道如何在.htaccess中写...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:17:27.987

> 现在，由于“页面标题”部分不是原始 URL 的一部分，而是来自对应于 id“123”的 mysql 表的信息，我如何 301 将旧 URL 重定向到新 URL？

您需要的唯一重写规则是使看起来更好看的 URL 路由到`view.php`，听起来您已经拥有了。可能看起来像这样：

```
RewriteCond %{REQUEST_FILENANE} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/([^/]+)\.html /view.php?id=$1 [L] 
```

当该请求到达时，`view.php`您可以检查`$_SERVER['REQUEST_URI']`变量，它看起来像`'/123/page-title.html'`. 当您看到这一点时，您就知道只是提供内容并完成它。

但是，当`view.php`看起来`$_SERVER['REQUEST_URI']`像`'/view.php?id=123'`时，您就知道有人请求了该页面`http://mysite.com/view.php?id=123`，而不是看起来更好看的 URL。发生这种情况时，`view.php`需要使用 的净化值从数据库中查找页面标题`$_GET['id']`，然后创建重定向（所有这些都需要在任何内容打印到浏览器之前发生）：

就像是：

```
 header('HTTP/1.1 301 Moved Permanently');
    header('Location: /' . $id . '/' . urlencode($page-title) . '.html');
    exit(); 
```

这会将浏览器重定向到页面`http://mysite.com/view.php?id=123`。您不需要 htaccess 中的任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:50:08.447

看看这个[教程。](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)它应该很容易解释这一切。

# selenium - Selenium Webdriver 使用外部 URL 流处理程序？

> ID：13022826
> 
> 赞同：1
> 
> 时间：2012-10-23T02:46:00.517
> 
> 标签：selenium, selenium-webdriver

尊敬的 Webdriver 专家，

我想知道 Selenium Webdriver（例如 Firefox）是否可以使用不同的 URL 流处理程序来使用，而不是使用它自己的本机生成的处理程序？

我能够生成一个用 Java 编写的较低级别的 HTTP 隧道程序，它允许后续的 URL 连接通过隧道和访问私有 LAN 中的资源。

提前致谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T14:45:17.777

您可以使用[Browsermob-proxy](http://bmp.lightbody.net/)，它使您能够使用 URL（和其他东西）做各种事情。

# ruby-on-rails - bootstrap-sass 删除媒体 大显示

> ID：13022833
> 
> 赞同：0
> 
> 时间：2012-10-23T02:46:40.063
> 
> 标签：ruby-on-rails, twitter-bootstrap

我使用带有 bootstrap-sass gem 的导轨。

如何防止响应式设计显示大屏幕？

@media (min-width: 1200px) { ... } 默认包含在内，我无法将其注释掉，因为它不是我工作目录的一部分。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:03:29.120

消除

```
@import "bootstrap-responsive"; 
```

添加

```
@import "bootstrap/variables";
@import "bootstrap/mixins";
@import "bootstrap/responsive-utilities";
@import "bootstrap/responsive-768px-979px";
@import "bootstrap/responsive-767px-max";
@import "bootstrap/responsive-navbar"; 
```

# javascript - 停止预定的 JavaScript 执行

> ID：13022834
> 
> 赞同：3
> 
> 时间：2012-10-23T02:46:42.043
> 
> 标签：javascript

我有一个函数，我在其中定义了很多 setTimeout() 函数。当用户按下按钮时，它开始执行。

我怎样才能取消它？

有没有办法取消所有超时（假设我有多个没有名字）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:47:59.853

```
// start timer
var timer = setTimeout(...);

// cancel timer
clearTimeout(timer); 
```

请参阅[https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:48:06.803

将返回的计时器 ID 传递[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)给[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:49:15.940

使用清除超时：

```
var timer = setTimeout(function(){ alert("hello!"); }, 3000);   

...

clearTimeout(timer); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T02:52:39.550

函数 setTimeout() 返回一个可用于清除超时的 ID。您必须跟踪超时，并手动清除它们：

```
var timeoutID = setTimeout( scheduledFunction, time );

// do stuff...

//clear the timeout:
clearTimeout( timeoutID  ); 
```

# ruby - 使用 rakefile 从源代码生成文档

> ID：13022837
> 
> 赞同：6
> 
> 时间：2012-10-23T02:46:48.217
> 
> 标签：ruby, rake, yard

我下载了 ruby​​ Twitter gem 源代码，并尝试使用 yard 生成文档，我通过`gem install yard`. 在 rakefile 中，我发现了以下内容，我假设它用于生成 Twitter gem 的文档：

```
require 'yard'
YARD::Rake::YardocTask.new 
```

我试图`require yard`在 irb 中然后运行`YARD::Rake::YardocTask.new`，但什么也没发生。

你能帮我走上正轨吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T03:12:13.790

来自[YARD 文档](https://github.com/lsegal/yard#usage)：

> 第二个最明显的是通过 Rake 任务生成文档。您可以通过将以下内容添加到您的来做到这一点`Rakefile`：
> 
> ```
> YARD::Rake::YardocTask.new do |t|
>   t.files   = ['lib/**/*.rb', OTHER_PATHS]   # optional
>   t.options = ['--any', '--extra', '--opts'] # optional
> end 
> ```
> 
> 和设置都是可选的`files`。将默认为并且将表示您可能要添加的任何选项。同样，通过键入shell可以获得完整的选项列表。您还可以使用 OPTS 环境变量覆盖 Rake 命令行中的选项：`options``files``lib/**/*.rb``options``yardoc --help`
> 
> ```
> $ rake yard OPTS='--any --extra --opts' 
> ```

总结一下：添加`YARD::Rake::YardocTask.new`到你的之后`Rakefile`，运行`rake yard`.

# python - Python 字符串操作问题

> ID：13022838
> 
> 赞同：1
> 
> 时间：2012-10-23T02:47:09.517
> 
> 标签：python, string

在这里学习 Python：我只是想在字符串中切换字符。示例：“A”到“C”。字符串没有做任何事情。这是我到目前为止所拥有的：

```
import string
dummy = "beans"
for i in xrange(len(dummy)):
    chr(ord(dummy[i])+5)
print(dummy) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:50:29.313

请记住，字符串是不可变的，因此您需要重新分配原始字符串。您可以尝试以下方法：

```
dummy = "beans"
newdummy = ""
for i in xrange(len(dummy)):
    newdummy += chr(ord(dummy[i])+5)
dummy = newdummy
print(dummy) 
```

* * *

这将是一种更*Pythonic*的方法：

```
dummy = ''.join(chr(ord(c) + 5) for c in dummy)
print(dummy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:55:32.640

string.maketrans 在这里应该更优雅：

```
import string

src = string.ascii_letters
dst = string.ascii_letters[5:] + string.ascii_letters[:5]
trans = string.maketrans(src, dst)
new_dummy = dummy.translate(trans) 
```

详情请参考 string.maketrans 的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:51:20.563

python中的字符串是不可变的。这意味着您无法更改它们，因此您必须将变量重新分配给新字符串。

这是一个例子：

```
import string
dummy = "beans"
for i in xrange(len(dummy)):
    dummy = dummy[:i] + chr(ord(dummy[i])+5) + dummy[i+1:]
print(dummy) 
```

或者更短的方式：

```
dummy = "beans"
dummy = "".join([chr(ord(c)+5) for c in dummy]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:08:59.000

你可以这样做：

```
mystring="hello"
newstring=""
for x in range(len(mystring)):
    newstring+=chr(ord(mystring[x])+5) 
```

但是，请注意，如果您这样做，并且 ASCII 值最多为 251，添加 5 将引发错误，因此您应该使用 if 语句检查您使用的任何值，例如：

```
if ord(character)+value<255:
    ##your ok
else:
    ##uh oh... 
```

# cocos2d-iphone - CCMenu 子项单独转换

> ID：13022841
> 
> 赞同：0
> 
> 时间：2012-10-23T02:47:36.113
> 
> 标签：cocos2d-iphone, ccmenuitem

我在循环中添加 CCMenuItems，然后使用 EaseIn 在屏幕上移动 CCMenu。有没有办法单独移动每个 CCMenuItem？

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CCMenu *chapterMenu = [CCMenu menuWithItems: nil];
 for(int i =1; i<=5; i++){
    CCMenuItem *chapter = [CCMenuItemSprite itemFromNormalSprite:[CCSprite spriteWithFile:@"sprite.png" rect:CGRectMake(0, 0, 150, 210) selectedSprite:nil disabledSprite:nil target:self selector:@selector(OnPlay:)];
    chapter.tag = i;
    [chapterMenu addChild:chapter];
 }
 [chapterMenu alignItemsHorizontallyWithPadding:40];
 chapterMenu.position = ccp(chapterMenu.position.x, chapterMenu.position.y + winSize.height);
 id action = [CCMoveBy actionWithDuration:0.5f position:ccp(0, -winSize.height)];
 id ease = [CCEaseIn actionWithAction:action rate:1.5f];
 [chapterMenu runAction:ease];
 [self addChild:chapterMenu]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:06:55.753

您可以在单个菜单项上运行操作，它们只是 CCNode 的子类。

请记住，它们的位置将与 CCMenu 相关，而不是与您的场景相关。

# c - 在 C 中捕获当前桌面视图

> ID：13022846
> 
> 赞同：-1
> 
> 时间：2012-10-23T02:48:07.443
> 
> 标签：c, screenshot

是否有 C 库使其能够截取屏幕截图并保存为 .bmp 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:09:23.127

C中没有标准方式。C甚至没有屏幕的概念，更不用说截屏了。

您在 Python 中使用的库可能具有 C 绑定或至少 C 源代码。您可以查看那些，或诸如 GTK+ 之类的可移植 GUI 库。或者您可以使用您平台的 API，但这通常不值得沮丧。

有关简单的 GTK+ 示例，请参阅[使用 C\GTK 截取屏幕截图。](https://stackoverflow.com/questions/3124229/taking-a-screenshot-with-c-gtk)

# php - 将javascript变量放置到php

> ID：13022847
> 
> 赞同：-2
> 
> 时间：2012-10-23T02:48:17.177
> 
> 标签：php, javascript

只是想问一个问题这是否可能？

```
$('element').each(function(){
    var name  = $(this).attr('name');
    var n     = name.replace(/-/g, '_');

    var ep  = '<?php echo $user_quest1["'+n+'"]; ?>';
    alert(ep);
}); 
```

我什么都没有..有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:51:13.043

PHP 在服务器上运行。JavaScript 在浏览器中运行。您需要在页面加载后使用 ajax 在两者之间进行通信，或者在最初将页面发送到浏览器时将 PHP 映射转换为 JavaScript 可访问的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:54:21.807

必须记住，PHP 在服务器端执行，而 javascript 在客户端执行。这意味着，当客户端请求一个网页时，服务器将处理该请求（PHP 将在此过程中执行）。此过程完成后，它将被发送到客户端浏览器，然后执行 javacript 代码。

# mysql - 从两个表中选择单个值，同时从第三个表中获取条件

> ID：13022851
> 
> 赞同：2
> 
> 时间：2012-10-23T02:48:52.933
> 
> 标签：mysql, join, conditional-statements

我有一个令我困惑的 MySQL 查询。我试图从两个不同的表（blurbs 和 users）中获取特定的信息，同时将其限制为仅关注的人。

我有以下查询：

```
SELECT DISTINCT blurbs.text, blurbs.timestamp, users.name, 
     users.username, users.profilepic, users.id 
FROM blurbs,users 
LEFT OUTER JOIN follows 
ON blurbs.uid = follows.following AND follows.follower = ? 
WHERE (blurbs.uid = $user_id OR follows.following IS NOT NULL) 
     AND (LOWER(blurbs.text) LIKE '%$query%' OR LOWER(users.name) LIKE '%$query%') 
     AND blurbs.is_private=0 AND blurbs.uid=users.id 
LIMIT 0,30 
```

它工作不正常，但由于连接，我变得过于困惑。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:58:48.763

尝试仅通过 where 子句使用所有连接条件，例如

```
 select a.*, b.*     //<-- Selectign data from first two tables
      from table1 a, table2 b, table1 c
       where a.id = b.id         //<-- joining condition for first two tables
       and a.xxx= c.yyyyy        //some relation with third table
       and c.aaa =....           //filter conditions using third table
       and c.bbb =...            //filter conditions using third table 
```

尝试将您的查询改写如下：

```
 SELECT DISTINCT blurbs.text, blurbs.timestamp, users.name, 
       users.username, users.profilepic, users.id 
   FROM blurbs,users, follows
   WHERE blurbs.uid=users.id
     AND blurbs.uid = follows.following 
     AND follows.follower = ?
     AND (blurbs.uid = $user_id OR follows.following IS NOT NULL) 
     AND (LOWER(blurbs.text) LIKE '%$query%' OR LOWER(users.name) LIKE '%$query%') 
     AND blurbs.is_private=0
   LIMIT 0,30 
```

完成此操作后，我希望您可以更好地控制/管理所需的过滤条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:59:42.480

虽然我不完全确定这是否正是您要寻找的，但让我根据对您问题的理解来解释我所做的事情。首先，假设会有一个用户用于一个简介，而不是你的交叉连接，而是你的交叉连接，因为你说你只想将它限制为那些关注的人，我认为你可以替换 LEFT OUTER 带有 INNER JOIN 以帮助过滤掉非关注者。

```
SELECT DISTINCT 
     blurbs.text, 
     blurbs.timestamp, 
     users.name, 
     users.username, 
     users.profilepic, 
     users.id 
FROM blurbs 
INNER JOIN users 
     ON blurbs.uid = users.id 
INNER JOIN follows 
     ON blurbs.uid = follows.following 
     AND follows.follower = users.id 
WHERE blurbs.uid = $user_id 
     AND (LOWER(blurbs.text) LIKE '%$query%' OR LOWER(users.name) LIKE '%$query%') 
     AND blurbs.is_private=0 
LIMIT 0,30 
```

# php - 在 Squl 中获取单元格的值

> ID：13022852
> 
> 赞同：1
> 
> 时间：2012-10-23T02:48:59.437
> 
> 标签：php, sql

> **可能重复：**
> [当我将 print_r() 应用于 PHP 中的数组时，为什么会得到“Resource id #4”？](https://stackoverflow.com/questions/1777801/why-do-i-get-resource-id-4-when-i-apply-print-r-to-an-array-in-php)

请原谅这个简单的问题，但是我是 SQL 和 PHP 的新手。很简单，我试图获取一个单元格的值，我知道它所在的列以及它所在的行，因此我可以在一个简单的减法问题中使用该值。这是我所拥有的：

```
$outtime = mysql_query("SELECT `Event1CheckOut1`
    FROM attendance
    WHERE ID = '1234'");

$intime = mysql_query("SELECT `Event1CheckIn1`
    FROM attendance
    WHERE ID = '1234'");

$dur = $outtime - $intime; 
```

使用 echo 它将第一个结果返回为“资源 id #4”。做一些研究，我认为这可能是因为它返回给我一个结果表，而不仅仅是一个值。值得注意的是，我试图获取的值是 24 小时格式的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:20:11.047

您需要遍历结果集

```
$outtimeR = mysql_query("SELECT `Event1CheckOut1`
    FROM attendance
    WHERE ID = '1234'");
while($row = mysql_fetch_assoc($outtimeR )){
  $outtime = $row['Event1CheckOut1']; 
}

$intimeR = mysql_query("SELECT `Event1CheckIn1`
    FROM attendance
    WHERE ID = '1234'");

while($row = mysql_fetch_assoc($intimeR )){
  $intime = $row['Event1CheckIn1']; 
}

$dur = $outtime - $intime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:50:46.443

使用反引号而不是单引号来转义列/表名称：

```
SELECT `Event1CheckIn1` FROM `attendance` WHERE ID='1234' 
```

另外，请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

# java - 处理 Java GUI/Canvas 项目

> ID：13022853
> 
> 赞同：0
> 
> 时间：2012-10-23T02:49:03.060
> 
> 标签：java, swing, user-interface, canvas

嗨，我是 Java 中的 GUI 和 Canvas 的新手。我正在做一个项目，我需要一个我猜有三个框架的 GUI/Canvas（仍然对差异感到困惑）。基本上它是一个电梯项目，在画布的两侧都有一个矩形电梯对象，中间是用于表示楼层的按钮（彼此堆叠）（因此，如果您单击按钮，电梯移动到与按钮相同的行）。我被困在你将如何为此设计画布上。我对 gridLayout 和 broderLayouts 有一些想法，但现在都是一团糟。

谢谢

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class UI extends JFrame implements ActionListener 
{
ArrayList<JButton> buttonList = new ArrayList(); 
MyCanvas mainCanvas;

public UI()
{
  super("Example Frame");
    setSize(800,600);
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  setVisible(true);

  mainCanvas = new MyCanvas();

  JPanel mainPanel = new JPanel();

  mainPanel.setLayout(new GridLayout(1,3));

  JPanel buttonPanel = new JPanel();
  buttonPanel.setLayout(new GridLayout(12,1));

  //while(true)
  //{
   //   myCanvas.repaint();
    //}
  for(int i=1; i<13; i++)
  {   String s = Integer.toString(i);
      buttonPanel.add(new JButton(s));
  }
  add(mainPanel);
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  mainPanel.add(buttonPanel, BorderLayout.CENTER);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:42:09.447

这是一个加载的问题。

如果它纯粹是关于布局，那么我会使用一系列具有自己布局的复合组件来实现您需要的结果......

如果是关于方法，那么它会变得更加复杂......

基本上，您希望划分职责范围。

从问题来看，有两种不同的模型，电梯模型和建筑模型。

电梯模型控制单个竖井的电梯所在的位置，因为建筑模型控制诸如楼层数、单个电梯模型、确定电梯如何被呼叫到楼层的算法……

以下是一个想法的基本示例。它缺少（除其他外）将电梯呼叫到楼层所需的逻辑或有关电梯的状态信息（移动、等待、打开......）

![在此处输入图像描述](../Images/28285832479de88ea6ffd5bffda663d5.png)

```
public class Elevator {

public static void main(String[] args) {
        new Elevator();
    }

    public Elevator() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BuildingPane());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public enum ElevatorShaft {
        Left,
        Right
    }

    public interface ElevatorModel {
        public int getFloor();
        public void setFloor(int floor);

        public void addPropertyChangeListener(PropertyChangeListener listener);
        public void removePropertyChangeListener(PropertyChangeListener listener);
    }

    public class DefaultElevatorModel implements ElevatorModel {

        private int floor;
        private PropertyChangeSupport propertyChangeSupport;

        public DefaultElevatorModel(int floor) {
            this.floor = floor;
            propertyChangeSupport = new PropertyChangeSupport(this);
        }

        @Override
        public void addPropertyChangeListener(PropertyChangeListener listener) {
            propertyChangeSupport.addPropertyChangeListener(listener);
        }

        @Override
        public void removePropertyChangeListener(PropertyChangeListener listener) {
            propertyChangeSupport.removePropertyChangeListener(listener);
        }

        @Override
        public int getFloor() {
            return floor;
        }

        @Override
        public void setFloor(int value) {
            if (value != floor) {
                int old = floor;
                floor = value;
                propertyChangeSupport.firePropertyChange("floor", old, floor);
            }
        }

    }

    public interface BuildingModel {

        public int getFloorCount();
        public int getFloor(ElevatorShaft shaft);
        public ElevatorModel getElevatorModel(ElevatorShaft shaft);
        public void call(int floor);

    }

    public class DefaultBuildingModel implements BuildingModel {

        private int floorCount;

        private Map<ElevatorShaft, ElevatorModel> shaftManager;

        public DefaultBuildingModel(int floorCount) {
            this.floorCount = floorCount;
            shaftManager = new HashMap<ElevatorShaft, ElevatorModel>(2);
            shaftManager.put(ElevatorShaft.Left, new DefaultElevatorModel((int)Math.round(Math.random() * (floorCount - 1))));
            shaftManager.put(ElevatorShaft.Right, new DefaultElevatorModel((int)Math.round(Math.random() * (floorCount - 1))));
        }

        @Override
        public ElevatorModel getElevatorModel(ElevatorShaft shaft) {
            return shaftManager.get(shaft);
        }

        @Override
        public int getFloorCount() {
            return floorCount;
        }

        @Override
        public int getFloor(ElevatorShaft shaft) {
            return shaftManager.get(shaft).getFloor();
        }

        @Override
        public void call(int floor) {
            // This will need to determine which elevator should be called
            // and call that elevators model "setFloor" method...
        }

    }

    public class BuildingPane extends JPanel {

        public BuildingPane() {

            setLayout(new GridBagLayout());

            BuildingModel model = new DefaultBuildingModel(3);

            Shaft leftShaft = new Shaft(model, ElevatorShaft.Left);
            Shaft rightShaft = new Shaft(model, ElevatorShaft.Right);
            ButtonsPane buttonsPane = new ButtonsPane(model);

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.VERTICAL;

            add(leftShaft, gbc);
            gbc.gridx++;
            add(buttonsPane, gbc);
            gbc.gridx++;
            add(rightShaft, gbc);

        }

    }

    public class ButtonsPane extends JPanel {

        private BuildingModel model;

        public ButtonsPane(BuildingModel model) {

            this.model = model;

            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weighty = 1;
            gbc.anchor = GridBagConstraints.CENTER;

            int floorCount = model.getFloorCount();
            ActionHandler handler = new ActionHandler();

            for (int floor = floorCount; floor > 0; floor--) {

                JButton button = new JButton("Floor " + floor);
                button.setActionCommand(Integer.toString(floor));
                button.addActionListener(handler);
                add(button, gbc);

                gbc.gridy++;

            }

        }

        public BuildingModel getModel() {
            return model;
        }

        public class ActionHandler implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                String cmd = e.getActionCommand();
                try {
                    int floor = Integer.parseInt(cmd);
                    getModel().call(floor);
                } catch (NumberFormatException exp) {
                    exp.printStackTrace();
                }
            }

        }

    }

    public class Shaft extends JPanel {

        private BufferedImage elevator;
        private BuildingModel buildingModel;
        private ElevatorShaft shaft;

        public Shaft(BuildingModel model, ElevatorShaft shaft) {

            this.buildingModel = model;
            this.shaft = shaft;

            buildingModel.getElevatorModel(shaft).addPropertyChangeListener(new PropertyChangeListener() {

                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    if (evt.getPropertyName().equalsIgnoreCase("floor")) {
                        // Need to update our position, this could
                        // be done via animation or directly call something
                        // like repaint..
                    }
                }
            });

            setBorder(new LineBorder(Color.DARK_GRAY));
            setBackground(Color.GRAY);

            try {
                elevator = ImageIO.read(new File("elevator.png"));
            } catch (IOException ex) {
                Logger.getLogger(Elevator.class.getName()).log(Level.SEVERE, null, ex);
            }

        }

        public BuildingModel getBuildingModel() {
            return buildingModel;
        }

        public ElevatorShaft getShaft() {
            return shaft;
        }

        public int getFloorCount() {
            return getBuildingModel().getFloorCount();
        }

        public int getFloor() {
            return getBuildingModel().getFloor(getShaft());
        }

        @Override
        public Dimension getPreferredSize() {

            Dimension size = new Dimension(elevator.getWidth(), elevator.getHeight() * getFloorCount());
            Insets insets = getInsets();

            size.width += (insets.left + insets.right);
            size.height += (insets.top + insets.bottom);

            return size;

        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Insets insets = getInsets();
            int x = insets.left;
            int y = insets.top;
            int height = getHeight() - (insets.top + insets.bottom);

            int floor = getFloor();
            y = height - (elevator.getHeight() * (floor + 1));
            g.drawImage(elevator, x, y, this);

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T03:20:10.077

我将如何改变你的类是这样的（注意这是你需要实际实现一个动作监听器来处理按钮按下的伪代码） -

```
public class UI extends JFrame implements ActionListener 
{
ArrayList<JButton> buttonList = new ArrayList(); 

int x = 0;
int y = 0;
int width = 50;
int height = 50;

public UI()
{
  super("Example Frame");
  setSize(800,600);
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  setVisible(true);    

  JPanel mainPanel = new JPanel();

  mainPanel.setLayout(new GridLayout(1,3));

  JPanel buttonPanel = new JPanel();
  buttonPanel.setLayout(new GridLayout(12,1));

  for(int i=1; i<13; i++)
  {   String s = Integer.toString(i);
      buttonPanel.add(new JButton(s));
  }

  add(mainPanel);
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  mainPanel.add(buttonPanel, BorderLayout.CENTER);
}

public void paint(Graphics g){
    super.paint(g);
    g.drawRect(x,y,width,height);
}

onButtonPress(int buttonNumber){
    y = buttonNumber * 10;
    repaint();
} 
```

# php - HighCharts - 使用 MySQL 和 PHP 制作饼图

> ID：13022854
> 
> 赞同：1
> 
> 时间：2012-10-23T02:49:11.833
> 
> 标签：php, javascript, highcharts

我正在尝试将 HighCharts 和 MySQL/PHP 的使用扩展到饼图，

但我不确定如何添加系列数据。

我的 SQL 查询生成如下表：

```
group     value
south     34532
east      23411
west      23422
north     23421 
```

然后我写了 fetch_array （也许我的值是一个字符串，应该是 int？）

```
while($row = mysql_fetch_array($result))
  {
extract($row);
        $data[] = "[$group, $value]";
        }
        mysql_close($connId);
    ?> 
```

然后尝试将系列放入HighCharts js中：

```
series: [{
            type: 'pie',
            name: 'Test Data',
            data: [<?php echo '[' .join($data, ','). ']' ?>]
        }] 
```

它不会产生饼图，没有错误，只是空白 DIV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:08:30.197

我是这样解决的：

```
while($row = mysql_fetch_array($result))
{
extract($row);

    $datapie[] = array($group, intval($val));
        }
        mysql_close($connId);
        $data = json_encode($datapie);
    ?> 
```

系列JS数据如下：

```
series: [{
            type: 'pie',
            name: 'Test Data',
            data: <?php echo $data; ?>
        }] 
```

# mongodb - mongodb丢失副本集的主要主机

> ID：13022856
> 
> 赞同：1
> 
> 时间：2012-10-23T02:49:15.713
> 
> 标签：mongodb, replication

我有一个相当复杂的问题，我认为可以归结为以下几点。今天早上，我有一个由主机 A、B 和 C 组成的副本集，其中 A 是主要的。然后我完全失去了 A，而 B 可能会下降一段时间（我不知道）。它是一个 ec2 实例，因此当它返回时它具有不同的主机名（尽管它具有完全相同的 ebs 卷，因此具有相同的文件结构）。

所以此时，就主机名 A 而言，我有 B、C 和 D。D 的内容与 A 的内容相同，但外部世界将它们视为两个不同的主机（它们是）。为 B 和 C 登录 mongo 显示它们是次要的（优先级 0），它仍然列出旧主机 A，没有注明优先级：

```
SECONDARY> rs.conf() //this is from C
{
"_id" : "rs_0",
"version" : 1,
"members" : [
    {
        "_id" : 0,
        "host" : "A:27018"  //this is the dead guy ....
    },
    {
        "_id" : 1,
        "host" : "C:27019",
        "priority" : 0
    },
    {
        "_id" : 2,
        "host" : "B:27020",
        "priority" : 0
    }
]
} 
```

我从 B 或 C 发出的任何命令都会返回一条消息，告诉我我不是主服务器，因此我无法更改此副本集的 conf 记录中的任何主机。

最糟糕的情况是我可以使用`mongoexport`所有内容并将其转储到 json 中，这是 (a) 很痛苦， (b) 非常难看， (c) 当我在生产时并不实用。

所以基本上，它归结为这一点。当我有一个副本集并且我失去对主节点的控制/访问并想要添加另一个主机来接管该功能时，我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:34:55.167

当您必须在没有主节点的情况下重新配置时，您可以将命令发送到辅助节点，但您必须包含一个额外的选项：{force:true}。这表示您知道您没有与主服务器通话，但无论如何您都想强制重新配置。

不过，在您继续之前，我想指出，每个辅助节点上的优先级 0 会破坏在主节点发生故障时为自动故障转移设置副本集这一点。优先级 0 意味着节点*永远不会*成为主节点。由于唯一的非 0 节点失败，您的副本集没有主节点。

我建议至少有一个优先级分数高于 0 的中学（1 是默认值）。我还建议为您的主机使用外部/可解析的 DNS 名称，而不是 AWS 名称，这样如果您再次发现自己处于这种情况，您可以将用于指向现在已死主机的名称重新分配给取代它的新主机。在这种情况下，您根本不需要重新配置副本集。

为了进一步阅读，我推荐：[http ://docs.mongodb.org/manual/tutorial/reconfigure-replica-set-with-unavailable-members/](http://docs.mongodb.org/manual/tutorial/reconfigure-replica-set-with-unavailable-members/)

# javascript - 一定时间后交换div

> ID：13022857
> 
> 赞同：-2
> 
> 时间：2012-10-23T02:49:32.803
> 
> 标签：javascript, jquery

使用 Javascript 或 JQuery，我想在页面加载 20 秒后替换一个 div。简而言之，首先显示 div A，并在 20 秒后被 div B 替换。

需要明确的是，这并不是一个旋转动画。交换只发生一次，在页面加载后的设定时间间隔内，最终用户没有任何进一步的交互。再次发生交换的唯一方法是重新加载页面。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:12:53.317

在您的文档就绪处理程序中是这样的：

```
$("#divA").delay(20000).fadeOut(function() {
     $("#divB").fadeIn();
     $(this).remove();
}); 
```

最初使用一些 CSS 来隐藏第二个 div：

```
#divB { display : none; } 
```

演示：http: [//jsfiddle.net/N3tdd/](http://jsfiddle.net/N3tdd/)

显然使用适合您的标记的任何选择器，如果您不能或不想使用 CSS 规则隐藏 div B，您可以`$("#divB").hide();`在上述代码之前添加。

# python - python - 这个def中的n + = 2是什么？

> ID：13022859
> 
> 赞同：-2
> 
> 时间：2012-10-23T02:49:45.427
> 
> 标签：python

> **可能重复：**
> [+= 在 Python 中是什么意思？](https://stackoverflow.com/questions/823561/what-does-mean-in-python)

我有一个 def 函数，如下所示：

```
def s(xs, n, m):
    t = []
    while n < m:
        t.append(xs[n])
        n += 2
    return t 
```

我通过 t.append(xs[n]) 理解了上面的代码，但不知道 n += 2 在这里是什么意思。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:51:10.517

它将 2 添加到 n。我需要 30 个字符才能得到答案。

# python - cannot extract links with beautifulsoup4 on dirrectmirror web page

> ID：13022860
> 
> 赞同：0
> 
> 时间：2012-10-23T02:49:58.473
> 
> 标签：python, web-scraping, beautifulsoup

I am trying to extract links from specific web page like: [http://www.directmirror.com/files/0GR7ZPCY](http://www.directmirror.com/files/0GR7ZPCY)

but it doesn't work as the example in bs4's document. Can anyone point out the reason for me? My code is as following:

```
import urllib2
from bs4 import BeautifulSoup
response = urllib2.urlopen('http://www.directmirror.com/files/0GR7ZPCY')
html = response.read()
sp = BeautifulSoup(html)
ll = sp.find_all('a') 
```

The 'll' variable I got is empty.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:06:21.670

**EDIT:** The problem appeared to be with Ubuntu's installation of BS4 - uninstalling and reinstalling with pip solved the problem

* * *

This actually works for me using both cases (`find_all` for BS4 and and the older `findAll`). Have you verified that you have content in your `sp` variable?

```
In [1]: import urllib2

In [2]: from bs4 import BeautifulSoup

In [3]: response = urllib2.urlopen('http://www.directmirror.com/files/0GR7ZPCY')

In [4]: html = response.read()

In [5]: sp = BeautifulSoup(html)

In [6]: ll = sp.find_all('a')

In [7]: ll
Out[7]:
[<a class="twitter-share-button" data-count="vertical" data-via="DirectMirror" href="http://twitter.com/share">Tweet</a>,
 <a href="/"><img alt="logo" border="0" src="/images/logo2.png"/></a>,
 <a href="/register.php" style="color:#ffffff">Register</a>,
 <a href="/login.php" style="color:#ffffff">Login</a>,
 # Continues... 
```

# eclipse - Eclipse 构建工作空间是什么意思？

> ID：13022862
> 
> 赞同：3
> 
> 时间：2012-10-23T02:50:07.037
> 
> 标签：eclipse, aptana

我重命名了我的一个项目，其中包含相当多的文件，Eclipse 将开始重建工作区。这使我无法做任何事情，因为我无法保存。

如果您跳过该过程，会有任何缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:52:46.130

这意味着 Eclipse 正在重建命名空间中的每个相关项目。请参阅[在 Eclipse 中禁用构建工作区过程](https://stackoverflow.com/questions/2505229/disable-building-workspace-process-in-eclipse)和[如何停止 Eclipse 重建工作区？](https://stackoverflow.com/questions/8878541/how-to-stop-eclipse-rebuild-workspace)

# ios - 测试自动续订订阅

> ID：13022869
> 
> 赞同：1
> 
> 时间：2012-10-23T02:50:43.620
> 
> 标签：ios, in-app-purchase, auto-renewing

我正在尝试将我在网上找到的关于自动续订订阅的不同信息拼凑起来。我的问题是：

1.  购买时，我是否应该记录日期，并且仅在根据我的计算，过期日期已过时才检查订阅是否仍然有效？
2.  当这种情况发生时，我想我只需要重新验证我之前存储的收据？为什么将收据保存在设备上并将秘密硬编码到应用程序中是个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:33:31.873

1.  第一次购买时，您应该在那时验证收据以确保它是合法的。然后是的，当您的记录显示它应该过期时，您可以再次验证您已经存储的收据。iTunes 会告诉您是否有与该订阅相关的新收据。我认为没有必要在两者之间再检查一次。
2.  在应用程序中保密意味着它存在于每台装有您的应用程序的设备上。它更容易通过黑客攻击等方式被发现。您可以随时更改您的秘密，但那时有人可能已经给您带来了一些问题。然后你必须更新应用程序中的秘密，并希望每个人都更新。
    将其保留在您的服务器上的另一个好处是：您不会受到2012 年 7 月[在俄罗斯披露的应用内购买黑客攻击的影响。](http://www.zdnet.com/apple-ios-in-app-purchases-hacked-everything-is-free-video-7000000877/)在苹果关闭漏洞之前，一名黑客找到了一种创建虚假 IAP 交易的方法。但是从自己的服务器验证收据的开发人员并不容易受到攻击。

# javascript - 即使我不重新加载，如何自动检测网页更改

> ID：13022873
> 
> 赞同：1
> 
> 时间：2012-10-23T02:51:11.820
> 
> 标签：javascript, automation, alert, webpage

> **可能重复：**
> [Stack Overflow 如何在不重新加载页面的情况下通知服务器端事件？我在 Firebug 中没有看到任何请求](https://stackoverflow.com/questions/12425304/how-does-stack-overflow-notify-of-server-side-events-without-a-page-reload-i-se)

有什么方法可以提醒用户，以便他们可以在页面发生更改时执行重新加载？

```
<script type="text/javascript">
     var page = 'data/apps/<? echo $_SESSION['name']; ?><? echo $_SESSION['last'];>App.html', lM;

function checkModified() {
   $.get(page, function(a, b, x) {
      var mod = (x.getResponseHeader('Last-Modified')) ? x.getResponseHeader('Last-Modified') : x.getResponseHeader('Content-Length');
      if (lM != mod) {
         lM = mod;
         console.log('Fetched');
         alert 
("Changes on "+<? echo $_SESSION['name']; ?><? echo $_SESSION['last']; ?>+"App.html has been made");
      }
   });
}

setInterval(checkModified, 5000); // every 5 seconds
</script> 
```

两个页面都位于一个域内。

# c++ - 指向垃圾节点的指针

> ID：13022879
> 
> 赞同：0
> 
> 时间：2012-10-23T02:51:58.707
> 
> 标签：c++, pointers

我正在生成一个大型游戏树，它描述了两个节点（称为 type1 和 type2）之间的拍卖场景。在我达到第四级节点之前，树的生成非常好。

```
 #include <iostream>
    #include <vector>
    #include <queue>

    #define LEVEL 8

    using namespace std;

    class payoff_node{
        int agent_1;
        int agent_2;
    };

    class node{
        public:
            /* constructor to set payoff_ptr to NULL */
            node() { 
                payoff_ptr = NULL;
                parent = NULL; 
            }

            /* print the information about the node */
            void printNode(){
                cout << "type: " << type << "\t" << "level: " << level << "\t" << "purse: $" << purse << "\t" << "parent_bid: " << parent_bid << "\t" << "parent:" << parent->getType() << "\t" << endl;
                /*for (int i = 0; i < actions.size() ; i++){
                    cout << actions[i] << endl;
                }*/
            }

            void setType(int t){    type = t;   }

            void setLevel(int l){   level = l;  }

            void setPurse(int p){ 
                purse = p; 

                /* Depending on the purse value the action space is decided */
                for(int i = 0; i <= purse ; i++){
                    actions.push_back(new node);
                }
            }

            void setParentBid(int bid){ parent_bid = bid; }

            void setParent(node &parent_node){  parent = &parent_node;  }

            int getLevel(){ return level; }

            int getParentBid(){ return parent_bid;  }

            int getPurse(){ return purse; }

            node** getParent(){ return &parent; }

            int getType(){ return type; }

            vector<node*> actions;

        private:
            int type;
            int level;
            int purse;

            int parent_bid;
            node* parent;

            payoff_node* payoff_ptr;
    };

    int main(int argc, char* argv[]){
        bool D = false;
        /* Make the root node and set its properties */
        node root_node;
        root_node.setType(1);
        root_node.setLevel(1);
        root_node.setPurse(4);
        root_node.setParentBid(0);

    //  root_node.printNode();  
        queue<node> myQ;
        myQ.push(root_node);

        /* BFS like creation of perfect information tree */
        while(true){
            node &ext = myQ.front();
            if(D)
                cout << "h1" << endl;

            if(ext.getLevel() == LEVEL){
                break;
            }

            if(D)
                cout << "h2" << endl;

            int type = ext.getType();

            if(D)
            cout << "h3" << endl;
            for(int i = 0; i < ext.actions.size() ; i++){
                node &child = *(ext.actions[i]);
            if(D)
            cout << "h4" << endl;
                //process(child);

                /* set parent */
                child.setParent(ext);
            if(D)
            cout << "h5" << endl;

                /* set type  & items won so far */
                if((ext.getLevel()) % 2 == 0){    // i.e. even numbered level, then current round has ended 
                    if(i > ext.getParentBid()){
                        child.setType(type);    
                    }
                    else{
                        int type_val = ( *(*(ext.getParent()))).getType() ;
                        child.setType( type_val );
                    }
                }
                else{
                    if(type == 1){
                        child.setType(2);

                    }
                    else{
                        child.setType(1);

                    }
                }

            if(D)
            cout << "h6" << endl;
                /* set level */
                child.setLevel(ext.getLevel() + 1);
            if(D)
            cout << "h7" << endl;
                /* set purse */
                if(child.getType() == ext.getType()){
                    int val = ext.getPurse() - i;
                    if(val < 0){
                        child.setPurse(0);
                    }
                    else{
                        child.setPurse(val);
                    }
                }
                else{

                    if( *(ext.getParent()) != NULL  ){
                        int val = ( *(ext.getParent()))->getPurse()  - ext.getParentBid();
                        if(val < 0){
                            child.setPurse(0);
                        }
                        else{
                            child.setPurse( val );
                        }
                    }
                    else{
                        child.setPurse(3);
                    }
                }
            if(D)
            cout << "h8" << endl;

                /* set parent bid */
                child.setParentBid(i);

            if(D)
            cout << "h9" << endl;
                /* when the child is ready with all its attributes, add it to the queue */
                myQ.push(child);
                child.printNode();
            }

            cout << endl << endl << "----Next Set of Children----" << endl;
            myQ.pop();

        }

    return 0;

    } 
```

程序挂在这一行`child.setPurse( val );`我相信下一行计算的值

```
 int val = ( *(ext.getParent()))->getPurse()  - ext.getParentBid(); 
```

是错的。`*(ext.getParent())`指向一些垃圾节点的地方。任何帮助将不胜感激，因为我现在已经超过 24 小时无法解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:22:28.233

队列存储类型为 的对象`node`。您正在使用指向队列的指针。你不应该那样做！当您从队列中弹出时，您在每次通过主循环结束时执行此操作，您会破坏您的对象。

看：

```
node &ext = myQ.front();

// etc...

for(int i = 0; i < ext.actions.size() ; i++){
    node &child = *(ext.actions[i]);
    child.setParent(ext);

    // etc...

    myQ.push(child);
}

myQ.pop();  // <-- POOF!!  Every pointer to 'ext' is now invalid. 
```

每次添加到队列中时，都会创建对象的副本。当您引用该副本时，您使用的是队列的内部副本。最终该副本将不存在。当将该指针设置为每个孩子的父母时，您会遇到严重的麻烦。

这不会很快爆发的唯一原因是因为您没有在`node`（清理`actions`）中提供适当的析构函数而泄漏内存。如果您确实实现了一个，您还必须实现一个复制构造函数（或通过创建一个私有的空复制构造函数来防止复制）。

您真正需要做的是更改队列以使用指针：

```
queue<node*> myQ;
myQ.push(&root_node);
// etc... 
```

# java - 从 java applet 调用 php 脚本？

> ID：13022882
> 
> 赞同：-1
> 
> 时间：2012-10-23T02:52:06.713
> 
> 标签：java, php, applet, invoke

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;

public class RegisterUser extends Applet{

TextField panel1 = new TextField(10);
TextField panel2 = new TextField(10);
TextField panel3 = new TextField(10);
Button    save   = new Button("Save");

public void init(){

    add(panel1);
    add(new Label("Name:"));
    addNewLine();
    add(panel2);
    add(new Label("Last:"));
    addNewLine();
    add(save);
    addNewLine();

save.addActionListener(new SaveListener());
}

class SaveListener implements ActionListener{

    public void actionPerformed(ActionEvent event){

    URL myURL = new URL("http://myplace/2272/save.php");
        URLConnection myURLConnection = myURL.openConnection();
myURLConnection.connect();

}
}

private void addHorizontalLine(Color c)
{
  Canvas line = new Canvas( );
  line.setSize(10000,1);
  line.setBackground(c);
  add(line);
}

private void addNewLine( )
{
  addHorizontalLine(getBackground( ));
}

 } 
```

上面的代码是一个 java 小程序。那是名字姓氏电子邮件输入的GUI。它有一个按钮。我想在单击按钮时调用 php 脚本 -save.php-。我在我的 actionPerformed 方法中尝试了它，但它不起作用。

我该怎么做。

这是我下面的 php 脚本

```
<?php
session_start();

$fp = fopen('users.txt', 'a+');
fwrite($fp, "\nname: " . $_GET["name"] . "\n");
fwrite($fp, "last name: " . $_GET["last_name"] . "\n");
fwrite($fp, "email: " . $_GET["email"] . "\n");

fclose($fp);
$_SESSION['registered']=1;
header( 'Location: http://myplace2272/save.php' ) ;
?> 
```

我不确定脚本是否也正确？

小程序无需 php 脚本调用即可正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:57:09.543

当您调用 save.php 时，您需要传递参数：

```
URL myURL = new URL("http://myplace/2272/save.php?name="+panel1.getText()+"&last_name="+panel2.getText()+"&email="+panel3.getText()); 
```

# localization - IOS6：故事板本地化不适用于搜索栏的占位符

> ID：13022888
> 
> 赞同：7
> 
> 时间：2012-10-23T02:52:44.523
> 
> 标签：localization, storyboard, ios6, xcode4.5

我正在使用 iOS6 新的本地化工作流程，可以为多个语言环境共享单个基本 .storyboard 文件。

问题是 UISearchBar 的占位符字段没有本地化。

下面是两个用于本地化的字符串文件。

*   对于占位符的英文字符串文件

    > /* 类 = "IBUISearchBar"; placeholder = "搜索"; ObjectID = "ZCN-Up-u9q"; */ "ZCN-Up-u9q.placeholder" = "搜索";

*   占位符的其他语言字符串文件

    > /* 类 = "IBUISearchBar"; placeholder = "搜索"; ObjectID = "ZCN-Up-u9q"; */ "ZCN-Up-u9q.placeholder" = "搜索";

有没有人有同样的问题？

# ember.js - createRecord 不填充关联

> ID：13022890
> 
> 赞同：0
> 
> 时间：2012-10-23T02:53:10.570
> 
> 标签：ember.js

我正在使用 Ember Data 定义两个模型以及两者之间的关联，然后使用 createRecord 方法插入一些数据。不涉及关联的属性存在于模型和 gettable 中（它们返回正确的值），但对关联内容的调用会返回一个空数组。我究竟做错了什么？

**编辑**：所以使用`load`而不是`createRecord`现在给出[3,3]的数组，我仍然无法访问属性。我能得到的最接近的是: `b.get("messages").get("firstObject").id`，它返回字符串 "[object Object]"

```
// Store

App.store = DS.Store.create({
    revision: 6,
    adapter: App.adapter
});

// Models

App.Message = DS.Model.extend({
    msg: DS.attr('string'),
    time: DS.attr('string'),
    chat: DS.belongsTo('App.Chat')
});

App.Chat = DS.Model.extend({
    name: DS.attr('string'),
    avatar: DS.attr('string'),
    messages: DS.hasMany('App.Message', { embedded: true }),
    preview: function() {
        this.get('messages').firstObject;
    }.property('messages')
});

var a = App.store.createRecord(App.Chat, {  "id": 1,
                                            "name": 'Foo Bar',
                                            "avatar": 'test',
                                            "messages": [{
                                                "id": 1,
                                                "msg": 'This is a test post one two three',
                                                "time": '1:10pm'
                                            },{
                                                "id": 2,
                                                "msg": ' This is another test post three two one',
                                                "time": '1:15pm'
                                            }]
                                         });

var b = App.store.find(App.Chat, 1);
console.log(b.get("name")) // Foo Bar
console.log(b.get("messages").get("content")) // []  (an empty array) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:13:36.500

看起来支持 `{embedded: true}`不久前被删除，这就是为什么这不起作用的原因。有一个当前待处理的拉取请求（有效）将恢复此功能。

[https://github.com/emberjs/data/pull/428](https://github.com/emberjs/data/pull/428)

# javascript - 如何清除弹出窗口的内容？

> ID：13022891
> 
> 赞同：0
> 
> 时间：2012-10-23T02:53:15.710
> 
> 标签：javascript, asp.net-mvc, json

我有一个弹出窗口，当您单击日历上的事件时会显示该窗口。在上述弹出窗口中，我有一些文本框和部分视图内的项目列表。现在，我的问题是，每当我选择一个在列表中有项目的事件然后关闭它并在日历上打开其他事件时，相同的项目仍然显示在其他事件中，并且它不应该出现，因为该事件具有不同的 id .

每当我关闭弹出窗口而不刷新页面时，如何清除项目列表，以便其他事件仅显示所选事件的项目？

这是我的代码中调用列表的部分

```
var scheduleData = { scheduleId: calEvent.id };
$.ajax({ 
   type: 'POST',
   traditional: true, 
   url: '/Schedule/JsonGetItemsBySchedule/',
   datatype: 'json',
   data: scheduleData,
   success: function (result) {
      var itemlist = result.items; loopItems(itemlist); 
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T15:10:55.540

我也遇到了清除弹出窗口内容的问题。

如果您知道 ID / 已在带有标签的弹出窗口中设置了 DOM (IE: )

您可以像往常一样引用 DOM / 标签并使用 .innerHTML 操作内容。

例如：如果你想清除 Body：

```
popup.document.getElementsByTagName('body')[0].innerHTML = ''; 
```

如果您想清除标签：

```
popup.document.getElementsByID('myContent').innerHTML = ''; 
```

在哪里

```
 popup = window.open();
    popup.document.write('<body> Content you will not want later <body>');
/
    popup.document.write('<div id = "myContent">Content you will not want later</div>'); 
```

分别

我在我的项目中测试过这两种方法，两种方法都有效。

参考： [http ://forums.phpfreaks.com/topic/139601-solved-clear-popup-windows-content/](http://forums.phpfreaks.com/topic/139601-solved-clear-popup-windows-content/)

# jquery - Struts 2 Date 和 JQuery UI Datepicker 格式

> ID：13022893
> 
> 赞同：1
> 
> 时间：2012-10-23T02:53:45.633
> 
> 标签：jquery, jquery-ui, struts2, datepicker

我使用 Struts2 和 JQuery UI。实体具有`java.util.Date`属性。它的值来自 JQuery UI Datepicker。它适用于我的`m/d/yy`格式。

我关心的是以下几点

*   Struts2中日期字段的格式需要明确定义吗？
*   如果我有其他国家的用户，格式会自动更改吗？
*   我将 JQuery UI Datepicker 的格式设置为`m/d/yy`. 可以吗，否则某些用户会遇到日期格式问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:28:03.073

您必须为此使用本地化功能。

```
<s:date name="date" format="%{getText('struts.date.format')}"/> 
```

另请阅读有关日期标签 [http://struts.apache.org/2.x/docs/date.html](http://struts.apache.org/2.x/docs/date.html)

对于 Struts2 JQuery 日期选择器标签：

```
<sj:datepicker displayFormat="%{getText('jquery.date.format')}"/> 
```

# c# - 在 Silverlight 中使用 LibTiff.Net 重新打包 TIFF

> ID：13022894
> 
> 赞同：0
> 
> 时间：2012-10-23T02:53:45.883
> 
> 标签：c#, silverlight, tiff, libtiff.net

我只需要获取 TIFF 文件，打开它并在使用 G4 压缩时复制到新文件。

因此，我采用了 LibTiff.Net 和 TiffCP 实用程序。我尽力从 TIFFCP 转换代码，这是我拥有的功能：

```
public static byte[] ConvertToG4Tiff(byte[] input)
{
    var c = new Copier();

    // Set compression to g4
    if (!c.ProcessCompressOptions("g4")) return null;

    // Open output tiff
    var memoryStream = new MemoryStream();
    var tiffStream = new TiffStream();
    using (var outImage = Tiff.ClientOpen(string.Empty, "w", memoryStream, tiffStream))
    {
        using (var inImage = Tiff.ClientOpen(string.Empty, "read", new MemoryStream(input), new TiffStream()))
        {
            if (inImage == null) return null;

            int totalPages = inImage.NumberOfDirectories();
            for (var i = 0; i < totalPages;)
            {
                c.m_config = PlanarConfig.UNKNOWN;
                c.m_compression = c.m_defcompression;
                c.m_predictor = c.m_defpredictor;
                c.m_fillorder = 0;
                c.m_rowsperstrip = 0;
                c.m_tilewidth = -1;
                c.m_tilelength = -1;
                c.m_g3opts = c.m_defg3opts;

                if (!inImage.SetDirectory((short)i)) return null;
                if (!c.Copy(inImage, outImage) || !outImage.WriteDirectory()) return null;

                i++;
            }
        }

        var retVal = new byte[tiffStream.Size(memoryStream)];
        tiffStream.Read(memoryStream, retVal, 0, retVal.Length);
        return retVal;
    }
} 
```

我认为最后 3 行是我搞砸的地方。我确实得到了有效的字节数组（有数据，大约是原始未压缩 TIFF 的 10%）

当我尝试再次使用代码打开它时 - 它不会打开。通过这个相同的函数传递这个新数组是行不通的。打开的对象为 NULL。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:09:16.250

您应该用于`memoryStream`检索压缩数据。不要`tiffStream`在这样的代码中使用任何东西。

所以

```
var retVal = new byte[tiffStream.Size(memoryStream)];
tiffStream.Read(memoryStream, retVal, 0, retVal.Length);
return retVal; 
```

可能应该改为

```
var retVal = memoryStream.ToArray();
return retVal; 
```

另请注意，您的代码不会*转换*数据，因此如果输入字节不是 1bpp 光栅，则代码将失败。

目前尚不清楚为什么要将压缩数据传递给相同的代码。

# java - 如何从 JPanel 加载/保存图像

> ID：13022897
> 
> 赞同：4
> 
> 时间：2012-10-23T02:54:15.023
> 
> 标签：java, image, swing, jpanel, javax.imageio

我缺少导出文件代码，但我不知道需要添加什么。我在 JPanel -> 面板中有一个绘制的图像，并希望将该图像保存到我的桌面中。我需要添加什么？

```
JFileChooser chooser = new JFileChooser();
chooser.showOpenDialog(panel); 
```

我已将以下代码添加到我的 paintComponent 方法中：

```
bi = new BufferedImage(panel.getSize().width,panel.getSize().height,
          BufferedImage.TYPE_INT_ARGB);
g = bi.createGraphics(); 
```

然后保存按钮执行此操作...我还缺少什么？或者做得不正确。

```
JFileChooser chooser = new JFileChooser();
chooser.showSaveDialog(panel);

try{ImageIO.write(bi,"png",new File("test.png"));}catch (Exception ex) {} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T02:55:46.223

您的问题是缺少一些重要信息：您如何在 JPanel 上绘图？在我看来，聪明的方法是绘制一个 BufferedImage，然后简单地将 BufferedImage 保存到文件中`ImageIO.write(...)`

**编辑**
你状态：

> 我只是在扩展 JPanel 的类上绘制多边形。我通过paintComponent 方法创建它们。

同样，我建议您将它们绘制到 BufferedImage，方法是获取其 Graphics 上下文，使用此 Graphics 对象绘制到图像，然后释放 Graphics 对象。您可以`paintComponent(...)`通过调用在 JPanel 的方法中显示 BufferedImage `g.drawImage(...)`。然后，如果您想保存绘图，只需保存 BufferedImage。

# java - 从primefaces数据表中选择项目不起作用

> ID：13022900
> 
> 赞同：0
> 
> 时间：2012-10-23T02:54:21.980
> 
> 标签：java, jsf, jsf-2, primefaces

我正在使用 primefaces 数据表来显示数据列表。我希望我的用户能够选择多行，之后将对所选行表示的数据执行操作。一切正常，直到我发现无法解决选择的操作执行为止。

下面是我的 xhtml 页面

```
<h:form enctype="multipart/form-data" id="upload">
<primefaces-p:panel closable="false" collapsed="false" header="Excel Contact Uploader" id="pnlupload" rendered="true" toggleable="false" visible="true" widgetVar="pnlupload">

<primefaces-p:growl id="msg"  showDetail="true" life="3000" showSummary="true">

</primefaces-p:growl>
        <primefaces-p:fileUpload auto="true" 
        allowTypes="/(\.|\/)(xls)$/" 
        sizeLimit="1024000" 
        mode="advanced" 
        multiple="true" invalidFileMessage="Invalid file type" invalidSizeMessage="File too large" dragDropSupport="true" fileUploadListener="#{excelFileController.handleFileUpload}" showButtons="true" update="msg, tblcontacts
        " required="false"/>

      <br />
<br />

        <primefaces-p:scrollPanel rendered="true" style="height:200px;">
            <primefaces-p:dataTable  emptyMessage="No Contacts Uploaded" id="tblcontacts" rendered="true"  rows="8" 
            value="#{excelFileController.contacts}" var="contact" style="width:50pc;">
        <primefaces-p:column style="width:18px" headerText="Select"> 
       <h:selectBooleanCheckbox value="#{contact.selected}" />

        </primefaces-p:column>

        <primefaces-p:column headerText="File Name">  
        #{contact.groupName}  
        </primefaces-p:column>  
        <primefaces-p:column headerText="Number of Contacts">  
        #{contact.numberofentries}  
    </primefaces-p:column> 
    <primefaces-p:column>
    <h:button  outcome="blkedit?faces-redirect=true" rendered="true" value="Edit">
         <f:param name="contact" value="#{contact.contactId}"/>
        </h:button>
    </primefaces-p:column>
    </primefaces-p:dataTable>
   </primefaces-p:scrollPanel>

<br />
</primefaces-p:panel>
<h:commandButton value="Delete" id="btndelete" action="#{excelFileController.removeContact}"  immediate="true" disabled="false" rendered="true"/>
<h:message for="btndelete" />
</h:form> 
```

下面是我的支持豆

```
@Named
@ViewAccessScoped
public class ExcelFileController implements Serializable, IFileController {

/**
 * 
 */
private static final long serialVersionUID = -8117258104485487921L;

@Inject
PhoneNumberFormatter formatter;

@Inject
@Authenticated
UserProfile profile;

public PhoneNumberFormatter getFormatter() {
    return formatter;
}

public void setFormatter(PhoneNumberFormatter formatter) {
    this.formatter = formatter;
}

@EJB
BulkContactDeleter deleter;

@Inject
Logger logger;

@Inject
@CurrentContext
FacesContext context;

@Inject
BulkSMSContactListProducer listProducer;

@Inject
ConfigurationListProducer producer;

private BulkSMSContacts[] contactsSelected;

private List<BulkSMSContacts> contacts;

public BulkSMSContacts[] getContactsSelected() {
    return contactsSelected;
}

public void setContactsSelected(BulkSMSContacts[] contactsSelected) {
    this.contactsSelected = contactsSelected;
}

/*
 * public BulkContactDataModel getContactDataModel() { return
 * contactDataModel; }
 */

@PostConstruct
public void init() {
    logger.log(Level.INFO, "Entering excel file controller");
    /*
     * contactDataModel = new BulkContactDataModel(
     * listProducer.getBulkSMSContacts());
     */
    this.contacts = listProducer.getBulkSMSContacts();

}

@Override
public String removeContact() {
    int contactsdeleted = 0;

    if (this.contacts != null) {
        /*
         * for (BulkSMSContacts contacts : contactsSelected) { if (contacts
         * != null) { deleter.deleteContact(contacts); contactsdeleted += 1;
         * }
         */
        for (BulkSMSContacts c : contacts) {
            if (c.isSelected()) {

                deleter.deleteContact(c);
                contactsdeleted += 1;
            }

        }
        contacts = listProducer.getBulkSMSContacts();

        logger.log(Level.INFO, "Deleted " + contactsdeleted + " Contacts");
        context.addMessage(null, new FacesMessage(
                FacesMessage.SEVERITY_INFO, "Success", contactsdeleted
                        + " entries where deleted successfully"));
    } else {
        context.addMessage(null, new FacesMessage(
                FacesMessage.SEVERITY_ERROR, "Error",
                "No contact file was selected!"));
    }
    return null;
}

public List<BulkSMSContacts> getContacts() {
    return contacts;
}

public void setContacts(List<BulkSMSContacts> contacts) {
    this.contacts = contacts;
} 
```

}

下面是我的模型定义

```
@Entity
public class BulkSMSContacts implements Serializable {

private static final long serialVersionUID = -6444763251149211384L;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@XmlAttribute
private long contactId;

@XmlElement
@NotNull(message = "message.validator.notnull")
@Size(min = 9, max = Integer.MAX_VALUE, message = "message.validator.size")
@Column(nullable = false, length = Integer.MAX_VALUE, unique = false)
@Basic(fetch = FetchType.EAGER)
private String contacts;

@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "Id", nullable = false)
@XmlElement(type = SMSAccount.class)
private SMSAccount account;

@NotNull(message = "message.validator.notnull")
@Size(min = 2, max = 100, message = "message.validator.size")
@Column(length = 100, nullable = false, unique = false)
@XmlElement
private String groupName;

@Column(nullable = true)
private int numberofentries = 0;

@javax.persistence.Transient
private boolean selected;

//getters and setters 
```

问题是，当单击删除按钮时（尽管调用了 removeContact() 方法。所有行的评估结果都没有被选中。

我也尝试过使用 primefaces 展示方法，但仍然是示例问题。

请问我是不是做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:24:10.653

我不明白为什么要在实体类中设置选择属性。尝试这样做

1.  设置数据模型：

    ```
    public class BulkSMSContactsDataModel extends ListDataModel<BulkSMSContacts> implements SelectableDataModel<BulkSMSContacts> {    

    public BulkSMSContactsDataModel() {  
    }  

    public BulkSMSContactsDataModel(List<BulkSMSContacts> data) {  
        super(data);  
    }  

    @Override  
    public BulkSMSContacts getRowData(String rowKey) {         
       List<BulkSMSContacts> contacts = (List<BulkSMSContacts>) new yourDao.getListOfBulkSMSContacts(); //yourDAO :BulkSMSContactsSelector i guess
        for(BulkSMSContacts c : contacts) {  
            if(String.valueOf(c.getContactId()).equals(rowKey))  
                return c;  
        }  

        return null;  
    }  

    @Override  
    public Object getRowKey(BulkSMSContacts obj) {  
        return String.valueOf(obj.getContactId());  
    } 
    ```

    }

2.  配置你的 bean：

    ```
    public class ExcelFileController implements Serializable, IFileController {
        private BulkSMSContacts[] contactsSelected;
        private List<BulkSMSContacts> contacts;
        private BulkSMSContacts[] selectedcontacts;
        private BulkSMSContactsDataModel contactsList;
            public ExcelFileController() {
            contactsList = new BulkSMSContactsDataModel(contacts);
        }
        // getters and setters
        // the rest of your code 
    ```

    }

3.  配置你的 xhtml

    ```
    <p:dataTable  emptyMessage="No Contacts Uploaded" id="tblcontacts" rendered="true"  rows="8" value="#{excelFileController.contactsList}" var="contact" style="width:50pc;" selection="#{excelFileController.selectedcontacts}">
          <p:column selectionMode="multiple" style="width:20px" />
          <p:column headerText="File Name">  
            #{contact.groupName}  
          </p:column>  
          <p:column headerText="Number of Contacts">  
            #{contact.numberofentries}  
          </p:column>
           <!-- the rest --> 
    ```

4.  更新你的用户界面。

5.  使用**p**而不是**primefaces-p**它将更容易阅读您的代码。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:07:22.263

为了知道选中`contacts`的 ，dataTable 和 UI Command 组件即`<h:commandButton>`、`<p:commandButton>`等必须是相同的形式。这意味着，您的联系人数据表和您的删除按钮必须在同一个`<h:form>`

```
 <h:form>
        <!-- based in your code (pretty odd by the way)... -->
        <primefaces-p:dataTable  emptyMessage="No Contacts Uploaded" id="tblcontacts"
            rendered="true" rows="8" value="#{excelFileController.contacts}"
            var="contact" style="width:50pc;">
            <!-- your columns... -->
        </primefaces-p:dataTable>
        <primefaces-p:commandButton value="Delete contacts"
            action="#{excelFileController.removeContact}" />
    </h:form> 
```

此外，请检查您的页面中是否没有嵌套表单。

更多信息：

*   [h:commandLink / h:commandButton 没有被调用](https://stackoverflow.com/q/2118656/1065197)

* * *

问题似乎出在 CDI 注释中。为了让你`ExcelFileController`活着，是在某处初始化对话（在你的代码中任何地方都没有显示）。另一种解决方案是使用 JSF 注释：

```
//@Named
//@ViewAccessScoped
@ManagedBean
@ViewScoped
public class ExcelFileController implements Serializable, IFileController {
    //rest of your code...
} 
```

# html - 如何用图像重置表单

> ID：13022906
> 
> 赞同：0
> 
> 时间：2012-10-23T02:55:12.590
> 
> 标签：html, forms, button, login

如何用图像重置表单？

我在谷歌上找到了这个

```
<button type="reset"><img src="<?php echo base_url(); ?>img/hapus.png"</button> 
```

它显示像

![图片](../Images/993495edfa2a36d881e9df714f7b1d26.png)

在这里，我想让重置按钮像登录按钮一样。

这是我的登录按钮的代码

```
<input type="image" src="<?php echo base_url();?>img/login.png"> 
```

这是我带有代码点火器的完整代码

```
<table>
            <?php echo form_open('c_menu/index'); ?>
            <tr>
                <td>Username</td>
                <td><?php $inusername=array('name' => 'username', 'class' => 'GUI'); echo form_input($inusername); ?></td>
                <td><?php echo form_error(); ?></td>
            </tr>

            <tr>
                <td>Password</td>
                <td><?php $inpassword=array('name' => 'password', 'class' => 'GUI', 'type' =>'password'); echo form_input($inpassword); ?></td>
                <td><?php echo form_error(); ?></td>
            </tr>

            <tr>
                <td>Jabatan</td>
                <td><?php $injabatan=array('keuangan' => 'keuangan', 'hd' => 'head divisi', 'direktur' => 'direktur'); echo form_dropdown('jabatan',$injabatan,'keuangan','class = "gui"'); ?></td>
                <td><?php echo form_error(); ?></td>
            </tr>

            <tr>
                <td></td>
                <td><input type="image" src="<?php echo base_url();?>img/login.png"><input type="image" src="<?php echo base_url(); ?>img/hapus.png" onclick="document.urfrom.reset()"/> </td>
                <td><?php echo form_error(); ?></td>
            </tr>
           <?php echo form_close(); ?>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:00:58.393

如果是这种情况，您将不得不编写如下代码：

```
<input type="img" src="login.jpg" onclick="yourfunction()"/>

and 

for reset

<input type="img" src="hapus.jpg" onclick="document.urfrom.reset()"/> 
```

您还需要创建 2 个图像 logjn.jpg 和 hapus.jpg。

# javascript - 在 jQuery 中选择单独按钮的最有效方法是什么？

> ID：13022908
> 
> 赞同：1
> 
> 时间：2012-10-23T02:55:33.293
> 
> 标签：javascript, jquery, css-selectors

我正在尝试在同一行的三个段落上创建下拉效果，并且我想出了一个可行的解决方案，但是我觉得我必须在这里打破编程的“干”规则。有没有更快、更有效的方法来做到这一点？

```
$(function(){

        var btn1 = $('.span4 .btn:eq(0)');
        var btn2 = $('.span4 .btn:eq(1)');
        var btn3 = $('.span4 .btn:eq(2)');
        var p1 = $('.span4 p:eq(0)');
        var p2 = $('.span4 p:eq(1)');
        var p3 = $('.span4 p:eq(2)');

        btn1.click(function(){

            p1.slideToggle('slow');

        });

        btn2.click(function(){

            p2.slideToggle('slow');

        });

        btn3.click(function(){

            p3.slideToggle('slow');

        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:03:00.577

```
$(function(){
    var buttons = $('.span4 .btn');
    var paragraphs = $('.span4 p');

    $('.span4').on('click', '.btn', function () {
        paragraphs.eq(buttons.index(this)).slideToggle();
    });
}); 
```

[http://api.jquery.com/index](http://api.jquery.com/index)
[http://api.jquery.com/eq](http://api.jquery.com/eq)

* * *

或者采用与我在此答案后面部分中描述的方法类似的方法：[https](https://stackoverflow.com/a/12803518/139010) ://stackoverflow.com/a/12803518/139010 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:02:02.970

更好的方法是不使用`eq`选择器，假设`p`按钮旁边，那么你可以这样做：

```
$(function() {
  $('.span4 .btn').click(funciton() {
    $(this).next('p').slideToggle('slow');
  });
}); 
```

# jsf - JSF 数据表 var 属性字段上的空 EL 表达式始终为 false

> ID：13022909
> 
> 赞同：4
> 
> 时间：2012-10-23T02:55:42.653
> 
> 标签：jsf, el

我有以下 EL 表达式，它引用了 var 属性的属性：

`empty _item.addressLine1`

`addressLine1`是 Address bean 上的 String 属性，可通过`personBean.person.addresses`返回`Set<Address>`.

这是上下文中的 EL 表达式：

```
<h:dataTable id="personBeanPersonAddresses" styleClass="data-table" value="#{forgeview:asList(personBean.person.addresses)}" var="_item">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Address Line 1"/>
        </f:facet>
        <h:link outcome="/address/view">
            <f:param name="id" value="#{_item.id}"/>

            <h:panelGroup rendered="#{!empty _item.addressLine1}">
                <h:outputText id="itemAddressLine1" value="#{_item.addressLine1}"/><br/>
            </h:panelGroup>
        </h:link>
    </h:column>
    .... 
```

问题是表达式总是返回 false，无论 addressLine1 是否为空字符串。好像要确认这一点，Eclipse 中的 facelet Validator 会产生以下警告：

> 这个空表达式总是计算为假。对于空运算符，只有字符串、映射、数组和集合具有有意义的值

但我不确定如何解决这个问题。我正在使用 jboss-el-api_2.2_spec-1.0.0.Final 运行 JBoss AS 7.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:55:40.583

到目前为止，代码看起来还不错。此警告无效。如果它困扰您，请关闭 Eclipse 中的 EL 验证。

至于具体的问题，很可能它`#{_item.addressLine1}`本身**真的是**空的。您需要确保这不是空的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T11:06:16.860

您也可以只忽略此特定警告：Web -> JavaServer Faces Tools -> Validator

*   常量折叠和未使用的代码（部分）。空运算符始终解析为 false 类型（忽略）。

# ruby - 无法在 Mountain Lion 上通过 Xcode 4.5.1 安装 ruby 1.9.3

> ID：13022911
> 
> 赞同：1
> 
> 时间：2012-10-23T02:55:53.060
> 
> 标签：ruby, xcode, osx-mountain-lion, xcode4.5, ruby-1.9.3

我正在运行 Mac OS 10.8.2 和 Xcode 4.5.1。我通过 Xcode 安装了命令行工具，从我读到的应该安装 ruby​​ 1.9.3。但是，当我`ruby -v`在终端中运行时，它仍然显示为 1.9.2。我在这里缺少什么吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:16:47.583

安装 ruby​​-1.9.3 最简洁的方法是使用 rvm 或 rbenv。此外，在 OS X 中，我会推荐自制程序包的自定义包。

您可以按照[http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/上的说明进行操作](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

# tsql - 通过链接服务器的嵌套视图提供选择权限被拒绝

> ID：13022914
> 
> 赞同：1
> 
> 时间：2012-10-23T02:56:35.447
> 
> 标签：tsql, sql-server-2008-r2, linked-server

我遇到了一个有趣的嵌套视图权限问题，我认为这不是由所有权链接引起的。提到的所有服务器都是 SQL Server 2008 R2。

我有一个链接服务器，它被配置为使用特定的登录名，比如 Bill。在我的远程服务器上，我有一个视图，我们称之为它`ViewA`，它又从另一个视图中选择，我们称之为它`ViewB`。

我可以通过链接服务器进行选择，效果很好：

```
SELECT * FROM [LINKEDSERVER].[DATABASE].[SCHEMA].[VIEWA] 
```

这会返回一个满意的结果集，没问题。

现在，我有一个尝试从同一个视图查询的存储过程。它使用同一个链接服务器，记住，它使用同一个登录名，比尔。

当我`EXECUTE`通过管理工作室存储过程时，它又`ViewA`通过链接服务器查询，我得到：

> *ViewB 上的 SELECT 权限被拒绝。*

链接服务器正在使用的登录名 Bill 是具有显式访问权限的角色的一部分`View A`。两个视图都是同一个模式的一部分，所有对象都归 dbo 所有。

请注意，它不是在抱怨`ViewA`Bill 拥有明确的权利，而是抱怨`ViewB`由于所有权链接，Bill 应该拥有的权利。

我不明白为什么我可以直接通过Bill Linked Server查询，但是存储过程却失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-23T14:30:35.863

该角色具有从中选择的权限`[ViewA]`，但您目前尚未确认存储过程的权限。您很可能需要运行类似于以下内容的内容：

```
GRANT EXECUTE ON [InsertProcedureNameHere] TO [InsertRoleNameHere]; 
```

可以在此处找到有关 GRANT 语句的更多信息： [GRANT object](https://msdn.microsoft.com/en-us/library/ms188371.aspx)

# entity-framework - 如何在 EF5 中取消 DbSet.Add

> ID：13022918
> 
> 赞同：0
> 
> 时间：2012-10-23T02:57:28.160
> 
> 标签：entity-framework

全部，假设您有一些如下代码。我想知道如果它没有运行`db.savechanges()`，是否需要编写一些代码来取消`db.DeployPackages.Add(package)`？

```
HotDeployDbContext db = null;

    using (db = new HotDeployDbContext())
    {
        DeployPackage package = new DeployPackage();
        db.DeployPackages.Add(package);

        //determine if save package to db based on some condition.
        if (.....)
        {
            db.SaveChanges();
        }
        else
        {
            //how to cancel the db.DeployPackages.Add(package);
        }
    } 
```

**已编辑**

有时我们会同时做很多事情`Dbcontext`，比如将数据添加到多个表中。删除一些数据或更新数据。但是如果我们确实需要在运行之前`SaveChanges`根据某些业务条件取消这些呢？我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:01:38.347

不会。
只要您不调用`SaveChanges()`，您的所有更改都只会影响该`DbContext`实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:25:18.763

当代码退出 using 块时，所有数据都将被丢弃而不保存。

微软的官方立场是，如果你想撤销更改，你就扔掉 DbContext。没有很好的方法来删除对象。

# c# - 如何取消 WPF 表单最小化事件

> ID：13022921
> 
> 赞同：5
> 
> 时间：2012-10-23T02:58:01.713
> 
> 标签：c#, wpf, winforms

我想取消自然最小化行为并改为更改 WPF 表单大小。

我有一个 Window_StateChanged 的​​解决方案，但它看起来不太好 - 窗口首先最小化然后跳回来并进行大小更改。有没有办法做到这一点？我用谷歌搜索了 Window_StateChanging 但无法弄清楚，某种我不想使用的外部库。

这就是我所拥有的：

```
private void Window_StateChanged(object sender, EventArgs e)
{
    switch (this.WindowState)
    {
        case WindowState.Minimized:
            {
                WindowState = System.Windows.WindowState.Normal;
                this.Width = 500;
                this.Height = 800;
                break;
            }
    }
} 
```

谢谢，

EP

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T04:29:54.517

您需要在表单触发之前拦截最小化命令`Window_StateChanged`，以避免您看到的最小化/恢复舞蹈。我相信最简单的方法是让你的表单监听 Windows 消息，当收到最小化命令时，取消它并调整你的表单大小。

在表单构造函数中注册`SourceInitialized`事件：

```
this.SourceInitialized += new EventHandler(OnSourceInitialized); 
```

将这两个处理程序添加到您的表单中：

```
private void OnSourceInitialized(object sender, EventArgs e) {
    HwndSource source = (HwndSource)PresentationSource.FromVisual(this);
    source.AddHook(new HwndSourceHook(HandleMessages));
} 

private IntPtr HandleMessages(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled) {
    // 0x0112 == WM_SYSCOMMAND, 'Window' command message.
    // 0xF020 == SC_MINIMIZE, command to minimize the window.
    if (msg == 0x0112 && ((int)wParam & 0xFFF0) == 0xF020) {
        // Cancel the minimize.
        handled = true;

        // Resize the form.
        this.Width = 500;
        this.Height = 500;
    }

    return IntPtr.Zero;
} 
```

我怀疑这是您希望避免的方法，但归结为我展示的代码，实现起来并不难。

基于[这个 SO question](https://stackoverflow.com/questions/10591171/missing-wm-messages-on-wpf)的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:41:10.587

试试这个简单的解决方案：

```
public partial class MainWindow : Window
{
    private int SC_MINIMIZE = 0xf020;
    private int SYSCOMMAND = 0x0112;

    public MainWindow()
    {
        InitializeComponent();
        SourceInitialized += (sender, e) =>
                                 {
                                     HwndSource source = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);
                                     source.AddHook(WndProc);
                                 };
    }

    private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        // process minimize button
        if (msg == SYSCOMMAND && SC_MINIMIZE == wParam.ToInt32())
        {
            //Minimize clicked
            handled = true;
        }
        return IntPtr.Zero;
    }
} 
```

# heroku - 如果 Heroku 在队列中等待的时间过长，请求会超时吗？

> ID：13022922
> 
> 赞同：2
> 
> 时间：2012-10-23T02:58:07.817
> 
> 标签：heroku, timeout, queue

我有一个在 Heroku 上运行的 Rails 应用程序。我预计明天的流量会大幅飙升。我知道如果需要支持流量，我可以暂时扩大测功机。

如果流量激增并且请求在队列中的等待时间过长，会发生什么情况？队列是否有最大大小和/或请求是否超时？如果队列中的请求超时，会显示哪个页面以及如何自定义该页面？（或者那会是 ERROR_PAGE_URL 吗？）

# javascript - 使用闭包编译器自动编译 javascript 源代码

> ID：13022935
> 
> 赞同：1
> 
> 时间：2012-10-23T02:59:52.293
> 
> 标签：javascript, google-closure-compiler

我正在使用closure-compiler.jar 来压缩我的源代码。

而且我们使用`ADVANCED_OPTIMIZATION`模型，所以我们在编写代码时必须小心。

例如，我们必须使用

`obj["prop"]`而不是`obj.prop`导出属性“prop”。

因此，为了确保压缩后的代码能够正常工作，我们将在修改代码后对其进行压缩。

但是，我们的项目正在开发中，所以修改频繁。

一旦我们更新代码（甚至添加一个字符），我们必须运行

```
java -jar xx.jar ...... 
```

所以我想知道是否有任何工具可以监控源代码的变化，然后压缩它们并使它们在windows中格式化（比如winLess for less）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:16:55.837

[http://plovr.com/](http://plovr.com/)似乎是我与之交谈的人的最爱。

# c++ - C ++如何创建一个接受字符串并返回函数的映射

> ID：13022938
> 
> 赞同：4
> 
> 时间：2012-10-23T03:00:56.927
> 
> 标签：c++, function, map, func

我想知道是否有一种方法可以使地图（在 C++ 中）返回一个函数。这是我现在的代码，它不起作用，我得到一个编译器错误。

```
#include <map>
#include <iostream>
#include <string>
using namespace std;

map<string, void()> commands;

void method()
{
    cout << "IT WORKED!";
}

void Program::Run()
{
    commands["a"]();
}

Program::Program()
{
    commands["a"] = method;
    Run();
} 
```

任何一点建议都会很棒！先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:07:56.447

您不能将函数存储在映射中——只能存储指向函数的指针。清理完其他一些小细节后，您会得到如下内容：

```
#include <map>
#include <iostream>
#include <string>

std::map<std::string, void(*)()> commands;

void method() {
    std::cout << "IT WORKED!";
}

void Run() {
    commands["a"]();
}

int main(){ 
    commands["a"] = method;
    Run();
} 
```

至少在 g++ 4.7.1 中，这会打印`IT WORKED!`，正如您显然想要/期望的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:10:31.473

又`typedef`是你的朋友。

```
typedef void (*func)();
map<string, func> commands; 
```

# r - 向 ggplot2 散点图添加文本标签

> ID：13022940
> 
> 赞同：20
> 
> 时间：2012-10-23T03:00:58.690
> 
> 标签：r, ggplot2, labels, scatter-plot

有没有一种简单的方法可以将文本标签添加到图表上的圆圈？我无法使用 directlabels 包执行此操作，因为我收到错误：

direct.label.ggplot(p, "first.qp") 中的错误：需要颜色美学来推断默认的直接标签。”

这是图表： ![我现在拥有的](../Images/6b65c12151c6fe4cf5c2440fbffe0ab0.png)

这是我一直在使用的代码：

```
library(ggplot2)
library(directlabels)
#my data set:
oc <- read.csv("http://www.columbia.edu/~mad2200/oc.csv")
oc$percent_women <- oc$W_employment/(oc$M_employment+oc$W_employment)
oc$size <- oc$W_employment+oc$M_employment
p <- ggplot(oc, aes(M_w_earnings, W_w_earnings, label = as.character(Occupational.Group)))
p + geom_point(aes(size = size, colour=percent_women)) + scale_size_continuous(range=c(0,30)) + #scale_area()+
#geom_point(aes(colour = oc$percent_women)) + 
coord_equal() +
scale_colour_gradient(high = "red")+
ylim(700, 1700) +
xlim(700, 1700) +
geom_abline(slope=1) +
labs(title = "Income Disparity by Occupation and Gender") +
ylab("Women's Weekly Earnings in $") +
xlab("Men's Weekly Earnings in $") 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-23T03:14:44.193

添加`geom_text(aes(label=Occupational.Group), size=3)`到情节。不过，您需要使用尺寸。

![在此处输入图像描述](../Images/35ffe6113e617df9cc1ae8e699ba73e5.png)

# ruby-on-rails - 用户 has_many 测试，测试 has_many 成绩。如何计算成绩？

> ID：13022941
> 
> 赞同：3
> 
> 时间：2012-10-23T03:01:06.373
> 
> 标签：ruby-on-rails, ruby

我正在努力弄清楚如何实现这个计数。模型是用户、测试、等级

用户 has_many 测试，测试 has_many 成绩。

每个等级都有一个计算分数（strong_pass、pass、fail、strong_fail）。

我怎样才能得到每个年级类别的计数？

为清楚起见，用户可能会参加 4 次数学测试，直到他们通过为止。他们可能会获得分数（通过、失败等）

但我想知道，在为用户 X 进行的所有测试中，有多少次通过，多少​​次失败？

`user.tests.grades.passed.count` 是我希望的工作。但没有
（我确实在等级模型中为“通过”、“失败”等命名了范围）

```
Class Grade

  def self.passed
    where(:grade => "passed")
  end

  def self.failed
    where(:grade => "failed")
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:35:08.053

你应该能够做到这一点：

```
class User < ActiveRecord::Base
  has_many :tests
  has_many :grades, through: :tests
end

user = User.first

user.grades.passed.count
user.grades.failed.count 
```

# android - Android 应用上的支付安全性

> ID：13022944
> 
> 赞同：1
> 
> 时间：2012-10-23T03:01:40.623
> 
> 标签：android, asp.net, ios, security, payment

我正在开发一个帮助用户浏览和购买书籍的应用程序。客户端可以是安卓、iOS、Mac。服务器是 Asp.net Web API。

我知道有很多付款服务。其中之一是 Authorize.net，我想我会使用它。当用户为一本书付费时，他/她将获得一个从服务器下载数据的唯一链接。我想阻止其他拥有该链接的用户（通过一些黑客攻击）下载数据。还没有，我想保证用户支付信息的安全。

我没有安全方面的经验。所以，请给一些建议来实现这一点。谢谢。

# java - 让 break 语句工作，但无法找出 java 的条件

> ID：13022945
> 
> 赞同：1
> 
> 时间：2012-10-23T03:01:48.190
> 
> 标签：java, if-statement, for-loop

我试图弄清楚如何做从 1 到 101 的素数。到目前为止我已经得到了这个：

```
public class BreakShow{
  public static void main(String[] args){
  int i;
  int prime;

  System.out.println("Prime numbers from 1 to 101 : ");
    for (i = 1;i < 102;i++ ){
        for (prime = 2;prime < i;prime++ ){
            if(i % prime == 0) {
                break;
            }
        }
        if(i == prime) {
            System.out.print("  " + i);
        }
    }
  }
} 
```

我无法让它打印 1。我尝试更改 i 和 prime 的值，但它不起作用。似乎与打印链接，它只是没有继续。我想我不太了解 for 语句的条件以及它是如何运作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:19:36.303

如果你想用 prime 做嘶嘶声，那么你应该只需要一个循环和 2 的 mod。你可以做这样的事情。

```
for(int i = 1; i <= 101; i++){
   if( (i%2) != 0) // use the smallest even number to check against.
      println("prime");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:11:00.063

Java 知道 1 不是素数并且不会打印它。

'is 1 a prime number' 的前两个谷歌结果证明了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:28:19.973

由于第二个`for`循环以 2 开头，因此由于`i==prime`打印前的条件而跳过 1。如果您真的想打印 1，请更新您的条件如下：

```
 public static void main(String[] args) {
          int prime;
          System.out.println("Prime numbers from 1 to 101 : ");
            for (int i = 1;i < 102;i++ ){
                for (prime= i-2;prime > 1;prime-- ){
                    if(prime< 0 || i % prime == 0) {
                        break;
                    }
                }
                if(prime < 0 || prime==1) {
                    System.out.print("  " + i);
                }
           }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:09:29.107

发生的事情是当 i = 1 时（当你测试 1 的情况时），这个循环：

```
for (prime = 2;prime < i;prime++ ){
    if(i % prime == 0) {
        break;
    }
} 
```

从不运行，因为素数实际上永远不会小于 i，因为素数从 2 开始。这意味着它会检查 i == 素数，它永远不会是，因为素数 = 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T03:09:45.933

素数变量用值 2 初始化，但您正在检查 1==2。

你可以在 if 条件之前测试值 i 和 prime

```
System.out.println("i:: "+ i+ "  prime:: "+prime);
    if(i == prime) 
        {
            System.out.print("  " + i);
        }

so if clause  does not meet the condition 
```

# png - 如何使用 ExifTool 旋转 PNG 图像？

> ID：13022946
> 
> 赞同：0
> 
> 时间：2012-10-23T03:01:53.380
> 
> 标签：png, orientation, exiftool

我正在尝试使用以下命令行使用[exiftool旋转 PNG 图像：](https://ExifTool.org/)

```
exiftool -Orientation=3 -n ImageName 
```

命令行在终端中成功运行，我可以通过命令行获取方向信息：`exiftool -Orientation -n ImageName`，`3`在这种情况下说。但是PNG图像本身根本不旋转。此命令行适用于 JPG 和 TIFF 图像。那么如何使用 exiftool 旋转 PNG 图像呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:13:14.907

我不熟悉该工具，但请记住：

1）您并没有真正旋转图像，您（充其量）设置了一个元数据属性，该属性（可能）向图像阅读器建议与默认方向不同的方向。

2) 图像阅读器（包括网络浏览器）在显示图像时如何解释元数据可能非常不可预测。

3) PNG 很少或[没有 EXIF](https://stackoverflow.com/questions/9542359/does-png-contain-exif-data-like-jpg/9576717)元数据支持。

当您告诉它更改“方向”时，我不知道该程序将哪些元数据（PNG 词汇中的“块”）写入 PNG 图像，但如果只有该程序可以读取它，我不会感到惊讶。您可以使用此[tweakpng](http://entropymine.com/jason/tweakpng/)查看PNG 块的内部。

你为什么不做一个“真实的”图像旋转？

# javascript - 使用javascript设置随机图像

> ID：13022953
> 
> 赞同：1
> 
> 时间：2012-10-23T03:02:30.087
> 
> 标签：javascript, html, css, image

我对 javascript 比较陌生，因此，当我的页面加载不起作用时，我的代码会显示随机图像。我查看了一些示例来尝试解决问题，但经过几个小时的搜索后，我准备按下帮助按钮。我已经为我的页面包含了 HTML 和脚本。此外，我还评论了我试图操纵的 IMG 标签。

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Welcome in.</title>
<link href="home.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="slides.js"></script>
<script>
//This is where I am attempting to set an random image to load.
function()
{   
    //Array of quotes
    var randomImages= new Array ("Images/quote1.png", "Images/quote2.png","Images/quote3.png", "Images/quote4.png", "Images/quote5.png","Images/quote6.png","Images/quote7.png","Images/quote8.png");

    //Random number to select an image. Use 8, not 7, since javascript arrays are 0 based
    //Math.floor will take us from a floating point number to an integer base
    var randomNumber = Math.floor(7*Math.random());

    //Display that image
    document.getElementById('quoter').setAttribute('src',randomImages[randomNumber]);
}
</script>
</head>
<body onLoad="function()">
<a href="aboutme.html" id="aboutMe"><img src="Images/aboutme.png" alt="aboutme"/></a>
<a href="aboutme.html" id="contact"><img src="Images/contact.png" alt="aboutme"/></a>
<a href="aboutme.html" id="blog"><img src="Images/blog.png" alt="aboutme"/></a>
<a href="aboutme.html" id="wife"><img src="Images/mywife.png" alt="aboutme"/></a>
<div id="mid">
</div>
<div id="slideshow">
   <div>
     <img src="Images/dummypic.png" alt="me">
   </div>
   <div>
     <img src="Images/dummypic2.png" alt="me">
   </div>
   <div>
     <img src="Images/dummypic3.png" alt="me">
   </div>
</div>
<div>
<img id="quoter" src="" alt="quotes"> <!--This is what I am trying to make random when the page loads-->
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:12:28.540

您已经在加载 jQuery，所以使用它。从正文中删除 onload 并将脚本更改为：

```
$(document).ready(function() {
//Array of quotes
var randomImages= ["Images/quote1.png", "Images/quote2.png","Images/quote3.png", "Images/quote4.png", "Images/quote5.png","Images/quote6.png","Images/quote7.png","Images/quote8.png"];

//Random number to select an image. Use 8, not 7, since javascript arrays are 0 based
//Math.floor will take us from a floating point number to an integer base
var randomNumber = Math.floor(7*Math.random());

//Display that image
$('#quoter').attr('src',randomImages[randomNumber]);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:09:43.463

为您的函数提供一个名称。

不可能`function()`，应该是这样 `function function_name()`，然后在body onLoad上使用就好了`<body onLoad="function_name()">`

正如你所包含`jquery-1.7.1.min.js`的，你可以试试这个代码，你应该删除 body onload 属性。

```
$(function(){
    //Array of quotes
    var randomImages= new Array ("Images/quote1.png", "Images/quote2.png","Images/quote3.png", "Images/quote4.png", "Images/quote5.png","Images/quote6.png","Images/quote7.png","Images/quote8.png");

    //Random number to select an image. Use 8, not 7, since javascript arrays are 0 based
    //Math.floor will take us from a floating point number to an integer base
    var randomNumber = Math.floor((randomImages.length-1)*Math.random());

    //Display that image
    $('#quoter').prop('src',randomImages[randomNumber]);
}); 
```

# php - Validate.Custom 返回 false 并使用 livevalidation 返回 true

> ID：13022955
> 
> 赞同：0
> 
> 时间：2012-10-23T03:02:50.430
> 
> 标签：php, jquery, livevalidation

我正在使用 LiveValidation 来验证我的表单，我正在尝试使用 livevalidation 来验证带有 ajax 调用的用户名。如果返回为真或假，我在获取返回值时遇到问题，以便我可以显示用户名是否可用，但在这种情况下，它总是返回用户名不可用。

HTML：

```
 <input type="text" id="username" name="username" /> 
```

JS：

```
 var username = new LiveValidation('username');
   username.add( Validate.Presence );
   username.add( Validate.Length, { minimum: 4, maximum: 10 } );
   username.add( Validate.Custom, { against: function() { return    check_username_availability() }, args:'Username Available' , failureMessage: 'Username is    Not Available' } ); 

  $.post(base_url+'cms-profile/profile_ajax/valid_username/',{username : $("#username").val()},function(data){

    if( data.success == 'no' )
     {
       return false;
     }

     if( data.success == 'yes' )
     {
        return true;
     }
    }); 
```

PHP：

```
 $check_username = 'some query here';

   if($check_username == true){
        $output = '{ "success": "no" }';
   }else{
       $output = '{ "success": "yes" }';
   }

   $output = str_replace("\r", "", $output);
   $output = str_replace("\n", "", $output);

   echo $output; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:16:33.713

我不明白你为什么要把这样的事情复杂化。我会使用 JSON，这就是它的用途：

PHP：

```
echo json_encode( $check_username ); 
// I would rename this variable $is_valid_username 
// so it's more obvious what you're doing 
```

JavaScript：

```
$.post( base_url+'cms-profile/profile_ajax/valid_username/',
  { username : $("#username").val() }, 
  function( data ) {
    return $.parseJSON( data );
  }
}); 
```

# compass-sass - 找不到或无法读取要导入的文件：susy

> ID：13022956
> 
> 赞同：6
> 
> 时间：2012-10-23T03:02:58.987
> 
> 标签：compass-sass, susy-compass

我只是无法弄清楚我的 Susy 设置有什么问题。我在 OS X 10.7.4

我一直跟着这里：[http ://susy.oddbird.net/guides/getting-started/](http://susy.oddbird.net/guides/getting-started/)

错误

```
Syntax error: File to import not found or unreadable: susy.
Load paths:
Users/simon/Websites/wpsvntree/trunk/sass
/Users/simon/.gem/ruby/1.8/gems/compass-0.11.7/frameworks/blueprint/stylesheets
/Users/simon/.gem/ruby/1.8/gems/compass-0.11.7/frameworks/compass/stylesheets
            Compass::SpriteImporter
on line 2 of /Users/simon/Websites/wpsvntree/trunk/sass/_base.sass
from line 2 of /Users/simon/Websites/wpsvntree/trunk/sass/screen.sass 
```

我安装的宝石：

```
*** LOCAL GEMS ***

chunky_png (1.2.6, 1.2.5)
compass (0.12.2, 0.11.7)
compass-boilerplate-plugin (0.1.0)
compass-h5bp (0.0.5, 0.0.2)
compass-rails (1.0.3)
fssm (0.2.9, 0.2.8.1)
html5-boilerplate (2.1.0)
sass (3.2.1, 3.1.15)
susy (1.0.3) 
```

我的 config.rb 文件位于项目的根目录中

```
require 'susy' 
# Require any additional compass plugins here.

# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts"

# You can select your preferred output style here (can be overridden via the command line):
# output_style = :expanded or :nested or :compact or :compressed

# To enable relative paths to assets via compass helper functions. Uncomment:
relative_assets = true 
```

_base.scss

```
// ---------------------------------------------------------------------------
// Imports
@import "susy";

/* GRID SETUP
----------------------------------------------------------------------------------*/

$total-columns  : 12;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;
$show-grid-backgrounds  : true;
/* SECTION
----------------------------------------------------------------------------------*/ 
```

屏幕.scss

```
 @import "base";
 .container {
  @include container;
  @include susy-grid-background;
 } 
```

我从目录 wpsvntree: `compass create trunk -r susy -u susy` **with success**运行了这个命令。

然后`compass watch trunk/`

查看我的项目，我看到了上面的第一个错误。

我看不出我哪里出错了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:54:51.437

按照这里的解决方案。固定的。 [https://github.com/ericam/susy/issues/21](https://github.com/ericam/susy/issues/21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T16:15:42.917

我遇到了这个问题，发现我的 config.rb 文件中的语法错误。正确的行是`require "susy"`，但我在 require 和 susy 之间有一个等号，这是错误的。

我希望这可以帮助像我这样的其他菜鸟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T15:44:55.273

尝试

```
gem install compass --pre 
```

这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T08:54:51.907

虽然它可能不是“正确答案”，但我遇到了同样的错误，并意识到我正在尝试使用 SASS 构建，而不是使用 Compass 构建系统。

我知道有点傻，但希望如果有人犯同样的错误，它可能会有所帮助：D/

# javascript - d3 排序仅适用于选择行

> ID：13022958
> 
> 赞同：1
> 
> 时间：2012-10-23T03:03:00.063
> 
> 标签：javascript, html, d3.js, html-table

我正在尝试使用 sort 函数按升序对表中的行进行排序。

```
var forsort = d3.keys(csv[0]).filter(function(key) {
    return key != "name";
});

var tr = d3.selectAll("tbody tr");      
d3.selectAll("thead th").data(forsort).on("click", function(k) {
    tr.sort(d3.ascending);
}); 
```

由于某种原因，18 行中只有 3 行被交换（准确地说是第 2、3、11 行），第 2 行是第一个可排序的行。

有人可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:30:00.830

From the d3 documentation, `d3.ascending` looks like this

```
function(a, b) {
  return a < b ? -1 : a > b ? 1 : 0;
} 
```

What are `a` and `b` in your case? You can check by, instead, sorting like this:

`tr.sort(function(a,b){ console.log('compare', a, b); });`

I'm guessing that `a` and `b` are objects, in which case sorting them with greater/less -than would be meaningless.

**Edit:**

To sort by the key of the column that was clicked, you need to use the `k` attribute you're getting from the click handler (I have no way of verifying this, but I'm pretty sure that's what `k` is – a string corresponding to the column/attribute name).

So, ditch the use of d3.ascending and do the sorting like this:

```
tr.sort(function(a, b) {
  return a[k] < b[k] ? -1 : a[k] > b[k] ? 1 : 0;
}) 
```

Alternatively, you can still use d3.ascending like this:

```
tr.sort(function(a, b) {
  return d3.ascending(a[k], b[k]);
}) 
```

It's not much of a difference in principle. But, one benefit of the latter is that it makes it easier to implement something that'll give users control over sort direction (ascending vs descending). Something like this:

```
var sortFunction = d3.ascending;
// Instead of the line above, you could write some logic
// to decide whether sortFunction is d3.ascending or d3.descending

// Then you can write:
tr.sort(function(a, b) {
  return sortFunction(a[k], b[k]);
}) 
```

# java - 如何从索引处的数组中删除项目？

> ID：13022959
> 
> 赞同：0
> 
> 时间：2012-10-23T03:03:03.507
> 
> 标签：java, arrays, class, methods

生病试图澄清。

我有：

```
public static void main(String[] args) {
    int a[] = {5, 6 ,7 ,8 ,9 ,10};
    removeArray takeOff = new removeArray();
    takeOff.remove(3);

    for (int i = 0 ; i < a.length ; i++){
        System.out.print(" "+a[i]);
    }
} 
```

那应该打印出来：

`5, 6, 7, 9, 10.`

问题是删除方法，我应该怎么写。我有：

公共类removeArray {

```
public void remove(int index) {       

    if (index > 0) {
        System.arraycopy(testThatArray.a, 0, testThatArray.a, 0, index);
    }

    if (index < testThatArray.a.length - 1) {
        System.arraycopy(testThatArray.a, index + 1, testThatArray.a, index, testThatArray.a.length - index - 1);
    }

} 
```

}

仍然没有？

更新：我得到了打印`5 6 7 9 10 10`，我怎样才能删除最后一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:04:02.633

您不能删除数组的索引或元素，因为它已经在内存中调整了大小，因此您不能使用 delete 但您可以放置​​两个值 { null 或 0 } 或另一个您想要显示您已经得到的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:08:31.450

数组无法调整大小。如果您想要一个可调整大小的集合，请使用 a [`List<Integer>`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)（例如 a ）。[`ArrayList<Integer>`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

否则，您必须自己实现这一点，方法是制作比原始数组小一个元素的数组副本。然后将除指定索引处的值之外的所有值从旧数组复制到新数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:13:31.137

创建一个新数组或将其大小调整为实际数组的大小减去 1，然后循环遍历数组中的所有值以填充新数组，但跳过 .remove 方法中指定的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:40:11.347

[ArrayUtils#removeElement](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/ArrayUtils.html#removeElement%28java.lang.Object%5B%5D,%20java.lang.Object%29)可能会做你想做的事。但是，请考虑改用 List。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T03:09:36.070

数组是固定长度的集合。你不能删除一个值。如果您不想添加和删除内容，请使用 List 或 ArrayList

# c# - 在 C# 中重新着色图像区域

> ID：13022961
> 
> 赞同：1
> 
> 时间：2012-10-23T03:03:18.300
> 
> 标签：c#, wpf, winforms, image

我正在为我的汽车构建一个诊断阅读器。我可以解析来自 OBD 端口的消息，但我想创建一个比文本读数更好的显示。我想要一个我的汽车的图形显示，它将突出显示诊断的受影响区域。因此，如果轮胎压力低，我希望汽车图片上的轮胎变红。我想用 C# 开发它，因为这是我最熟悉的。关于什么可能是最好的方法的任何建议？如果该方法可以通过调整窗口大小进行缩放，那也很好。

```
<Image x:Name ="Bubble" Height="445" HorizontalAlignment="Left" Margin="42,12,0,0" Stretch="Fill" VerticalAlignment="Top" Width="654" Source="/WpfApplication1;component/Images/bubble.png" Panel.ZIndex="0" Opacity="1"/>
<Image x:Name="Smiley" Height="445" HorizontalAlignment="Left" Margin="42,12,0,0" Stretch="Fill" VerticalAlignment="Top" Width="654" Source="/WpfApplication1;component/Images/bubble.png" Panel.ZIndex="1" Opacity="0"/>
<Button Content="Button" Height="35" HorizontalAlignment="Left" Margin="10,46,0,0" Name="button1" VerticalAlignment="Top" Width="24" Click="button1_Click" />
<Button Content="Button" Height="50" HorizontalAlignment="Left" Margin="14,118,0,0" Name="button2" VerticalAlignment="Top" Width="22" Click="button2_Click" /> 
```

然后改变不透明度。

```
Bubble.Opacity = 0.0;
Smiley.Opacity = 1.0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:31:22.000

这样做的一种方法是拥有多个图像，并淡化不透明度。您只需要确保图像格式支持透明度（png-s 很好）。假设您有一张汽车图像，并且前后轮有单独的叠加层。保持所有图像大小相同，以便于对齐。

你会得到类似的东西

```
<Image x:Name="car" Source="car.png" Panel.ZIndex="0"/>
<Image x:Name="frontwheel" Source="frontwheel.png" Panel.ZIndex="1" Opacity="0"/>
<Image x:Name="rearwheel" Source="readwheel.png" Panel.ZIndex="2" Opacity="0"/> 
```

然后在代码中

```
frontwheel.Opacity=1.0; 
```

编辑：这是我的一些代码的片段。我在代码隐藏中将图形添加到画布

```
 <Grid Margin="20">
            <Image Name="image1" Width="640" Height="640"  
                   Opacity="{Binding Path=Value, ElementName=OpSlider}"
                   HorizontalAlignment="Center" 
                   />
            <Canvas Name="MarkerLayer" 
                   Opacity="{Binding Path=Value, ElementName=DotOverlaySlider}"
                   />
            <Canvas x:Name="Squares"
                    Opacity="{Binding Path=Value, ElementName=OverlayOpSlider}"
                    />
        </Grid> 
```

这里的不透明度绑定到滑块

```
 <Slider x:Name="OpSlider"  Width="150" SmallChange="0.05" Maximum="1" Value="0.5" />
            <Slider x:Name="OverlayOpSlider" Width="150" SmallChange="0.05" Maximum="1" Value="1" />
            <Slider x:Name="DotOverlaySlider" Width="150" SmallChange="0.05" Maximum="1" Value="0.8" /> 
```

# php - MySQL：如何通过某些数据限制 SUM 查询？

> ID：13022963
> 
> 赞同：0
> 
> 时间：2012-10-23T03:03:19.457
> 
> 标签：php, mysql, sum

我有这样的查询：

```
SELECT DATE(Inspection_datetime) AS Date,Line,TRIM(Model) AS Model, Lot_no,
    COUNT(Serial_number) AS Qty
FROM inspection_report 
WHERE Line LIKE 'FA 06' AND MONTH(Inspection_datetime) = MONTH(CURRENT_DATE)
GROUP BY DATE(Inspection_datetime), TRIM(Model),Line,Lot_no 
```

结果：

```
 Date     Line    Model      Lot_no  Qty                 
2012-10-19  FA 06   KD-X30EED   012A    1
2012-10-21  FA 06   KD-R446UD   024A    20
2012-10-21  FA 06   KD-R446UD   026A    25
2012-10-22  FA 06   KD-R430JD   052A    20
2012-10-22  FA 06   KD-R446UD   026A    15
2012-10-22  FA 06   KD-R540JD   025A    30
2012-10-23  FA 06   KD-R540JD   025A    10
2012-10-23  FA 06   KD-R540JD   027A    2 
```

如果我想要`SUM`这个数据之前的数量怎么办：

```
2012-10-22  FA 06   KD-R446UD   026A    15 
```

我试过这个：

```
SELECT SUM(X.Qty) AS QTY
FROM (
    SELECT DATE(Inspection_datetime) AS Date,Line,TRIM(Model) AS Model, Lot_no,     COUNT(Serial_number) AS Qty
    FROM inspection_report 
    WHERE Line LIKE 'FA 06' AND MONTH(Inspection_datetime) = MONTH(CURRENT_DATE)
    GROUP BY DATE(Inspection_datetime), TRIM(Model),Line,Lot_no) AS X
WHERE ?????????? 
```

我想要这样的结果：

```
|Qty |
+----+       
|81  | 
```

* * *

编辑

如果我选择数据停止计数，`2012-10-21 FA 06 KD-R446UD 026A 25` 我会得到`Qty =46` 如果这个问题不可能用 MySQL Query 做，PHP 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:28:28.577

您可以使用运行总变量，如下所示：

```
SET @total = 0;
SELECT
    (@total := @total + X.qty) AS qty,
    X.Model
FROM (
    SELECT
        DATE(Inspection_datetime) AS Date,
        Line,
        TRIM(Model) AS Model,
        Lot_no,
        COUNT(Serial_number) AS Qty
    FROM inspection_report
    WHERE Line LIKE 'FA 06'
      AND MONTH(Inspection_datetime) = MONTH(CURRENT_DATE)
    GROUP BY 1, 3, 2, 4
) AS X
WHERE @total <= 81 
```

# php - 如何保护保留表单错误值的PHP表单？

> ID：13022965
> 
> 赞同：2
> 
> 时间：2012-10-23T03:03:37.290
> 
> 标签：php, html, forms

我需要一个在错误时保留其值的表单，但要确保输入数据是干净的安全明智的。

```
<form action="" method="POST">
    <div>
         <label for="first_name">First Name</label>
         <input type="text" name="first_name" value="$_POST['first_name']"/>
    </div>
</form> 
```

我应该如何处理 $_POST['first_name'] 以使其安全且不易受到攻击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T03:08:36.327

用于[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)消除有害 XSS 攻击的任何可能性：

```
echo '<input type="text" name="first_name" value="'.htmlspecialchars($_POST['first_name']).'"/>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:09:44.450

不受什么影响？SQL注入？

您想要创建一个变量来清理数据（如果有的话），但在您第一次加载页面时不会抛出错误（并且没有发布数据）

所以：

```
$fname = !empty($_POST['first_name']) ? cleanstuff($_POST['first_name']) : ''

<form>
...
<input...value="<?php echo $fname; ?>"/>
</form> 
```

其中“cleanstuff”是清理数据所需的任何函数，mysql_real_escape_string() 如果清理 mysql 数据库或 htmlentities() 或其他什么。最好是一个用户定义的函数，它可以完成业务逻辑所需的所有清理工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:08:51.713

数据在上下文中很容易受到攻击。例如，用户提交的 HTML 标记可以很好地存储在数据库中。如果您将它们回显到浏览器，那么您就有问题了。出于这个原因，使某些东西“不易受攻击”有点宽泛。

为了使用户数据可以安全地回显到表单输入中，请查看[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)和[http://php.net/manual/en/function。剥离标签.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:11:28.283

```
<form action="" method="POST">
    <div>
         <label for="first_name">First Name</label>
         <input type="text" name="first_name" value="<?php echo htmlentities $_POST['first_name']);"/>
    </div>
</form> 
```

在 webform 上使用 htmlentities 并使用 *_real_escape_srting 来处理服务器 php 代码上的 sql 注入

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T03:06:41.440

htmlspecialchars($_POST['first_name'])

这将转义字符串中的任何 HTML。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-23T03:09:44.527

清理数据不是一站式服务，正确验证所有输入非常重要，以下是所需的步骤：

```
$first_name = trim($_POST['first_name']); //remove spaces
$first_name = htmlspecialchars($first_name); //convert special chars to html entities (for XSS)
$first_name = mysql_real_escape_string($first_name); //escape quotes for MySQL

//Now it is important to validate the data (confirm that the name is a name, only contains characters which can be in a name 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-10-23T03:08:43.423

您可以使用许多不同的功能来清理输入的值。我建议

```
<?php
//You have many options. You can use htmlspecialchars() to sanitize for XSS (Cross Site Scripting) and mysql_real_escape_string() to prevent SQL Injection. If you are using a MySQL database, I'd recommend both.
$name = mysql_real_escape_string(htmlspecialchars($_POST['first_name']));
?>
<form action="" method="POST">
<div>
     <label for="first_name">First Name</label>
     <input type="text" name="first_name" value="<? echo $name; ?>"/>
</div> 
```

# web-services - 如何在 JBoss AS 7 中禁用扫描 @WebService 注释？

> ID：13022968
> 
> 赞同：2
> 
> 时间：2012-10-23T03:04:38.630
> 
> 标签：web-services, spring, cxf, jboss7.x

我有使用 Spring+ApacheCXF 开发的 Web 服务，我需要在 JBoss AS7 上部署它们。它们正在由 CXFServlet 正确部署。

但是 JBoss AS7 也通过扫描 @WebService 注释来部署它们（正如预期的那样，没有 Spring 注入）。

如何在 JBoss AS 7 中禁用扫描 @WebService 注释？

PS：我正在部署为 .war 文件。

PS PS：我当前的 cxf 网络服务正在正确部署。但是 JBoss AS7 也尝试扫描 @WebService 类并部署它们（没有注入依赖项）。我正在寻找一种方法来关闭 JBossAS7 对 @WebService 类的扫描。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-19T06:26:40.293

这也适用于 Jboss 6。我在我的 Jboss 6.2.2 上试过了。在standalone.xml 中注释以下内容

`<!-- <extension module="org.jboss.as.webservices"/> -->`

然后在同一个standalone.xml 中注释下面的代码片段。请注意，如果您使用不同的配置文件名称或在域模式下，您将不得不在类似的地方执行此操作。

```
<!-- 
    <subsystem xmlns="urn:jboss:domain:webservices:1.2">
        <modify-wsdl-address>true</modify-wsdl-address>
        <wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>
        <endpoint-config name="Standard-Endpoint-Config"/>
        <endpoint-config name="Recording-Endpoint-Config">
            <pre-handler-chain name="recording-handlers" protocol-bindings="##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM">
                <handler name="RecordingHandler" class="org.jboss.ws.common.invocation.RecordingServerHandler"/>
            </pre-handler-chain>
        </endpoint-config>
        <client-config name="Standard-Client-Config"/>
    </subsystem>
     --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:26:09.920

我相信你会想从你的standalone.xml中删除它

```
<extension module="org.jboss.as.webservices"/> 
```

和

```
<subsystem xmlns="urn:jboss:domain:webservices:1.1">
    <modify-wsdl-address>true</modify-wsdl-address>
    <wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>
    <endpoint-config name="Standard-Endpoint-Config"/>
    <endpoint-config name="Recording-Endpoint-Config">
        <pre-handler-chain name="recording-handlers" protocol-bindings="##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM">
        <handler name="RecordingHandler" class="org.jboss.ws.common.invocation.RecordingServerHandler"/>
        </pre-handler-chain>
    </endpoint-config>
</subsystem> 
```

这就是我删除 jboss webservices 所做的，所以我可以使用其他东西。我仍在对此进行测试，但它不再部署服务。我假设我将能够使用 spring 进行部署。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:06:15.673

我在我的应用程序上下文 XML 文件中使用 exclude-filter 从 Spring 组件扫描中排除 Web 服务组件。

```
<context:component-scan base-package="your.application.base.package">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller" />
    <context:exclude-filter type="annotation" expression="javax.jws.WebService" />
</context:component-scan> 
```

同时，我将它们包含在 CXF 上下文 XML 的组件扫描中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T10:21:40.467

我正在使用 JBoss EAP 6.1，我解决了同样的问题，不包括子系统 jaxrs 和 webservices。

jboss-部署-结构.xml

```
 <?xml version="1.0"?>

<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">
        <deployment>
            <exclude-subsystems>
                <subsystem name="jaxrs" />
                <subsystem name="webservices" />
            </exclude-subsystems>
            <exclusions>
                <module name="javaee.api" />
                <module name="org.apache.log4j" />
            </exclusions>
            <dependencies>
                <module meta-inf="export" name="com.liferay.portal">
                    <imports>
                            <include path="META-INF" />
                    </imports>
                </module>
                <module name="javax.mail.api" />
                <module name="org.jboss.modules" />
            </dependencies>
        </deployment>
</jboss-deployment-structure> 
```

# objective-c - 是否可以将 runMode:beforeDate: 与 [NSDate dateWithTimeIntervalSinceNow:0] 一起使用？

> ID：13022969
> 
> 赞同：0
> 
> 时间：2012-10-23T03:04:41.423
> 
> 标签：objective-c, asynchronous, semaphore, nsrunloop

我正在尝试使用以下中描述的模式：[Grand Central Dispatch and unit testing](https://stackoverflow.com/questions/10733978/gcd-unit-testing)，[用于单元测试异步队列的模式，该模式在完成时调用主队列](https://stackoverflow.com/questions/7817605/pattern-for-unit-testing-async-queue-that-calls-main-queue-on-completion)，主要在：[https ://github.com/AFNetworking/AFNetworking/issues/466#问题评论 7917445](https://github.com/AFNetworking/AFNetworking/issues/466#issuecomment-7917445)。

在我的单元测试中，我需要“理顺”我拥有的一些方法的异步流程（fx AFNetworking 请求操作）：

这是我在测试中使用的“强制同步操作”：

```
@property (nonatomic, assign) dispatch_semaphore_t semaphore;
// ...
- (void)runTestWithBlock:(void (^)(void))block {
    self.semaphore = dispatch_semaphore_create(0);

    block();

    while (dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_NOW))
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate dateWithTimeIntervalSinceNow:2]];

    dispatch_release(self.semaphore);
}

- (void)blockTestCompletedWithBlock:(void (^)(void))block {
    dispatch_semaphore_signal(self.semaphore);

    if (block) {
        block();
    }
} 
```

如果使用 fx *dateWithTimeIntervalSinceNow:10*即值大于零（如引用的 SO 主题和 Github 评论状态），我会在我的测试中得到等效的多余有害延迟。如果我设置*...SinceNow:0...*我所有的测试都没有任何延迟，我看不出这个*0*值有任何问题。

苹果文档说：

```
Runs the loop once, blocking for input in the specified mode until a given date.
If no input sources or timers are attached to the run loop, this method exits immediately and returns NO; otherwise, it returns after either the first input source is processed *or* limitDate is reached. 
```

这个“或”让我猜测我是否可以使用 0 秒而不会以任何不好的方式影响我的代码。

我也将感谢使用*runMode...*方法的这种变体或完全不同的解决方案来解决引用链接中描述的问题的任何替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:24:57.257

请注意，我仍然不知道原始问题的答案。

这个问题的中间解决方案（受 GHUnit 用于测试异步方法的代码的启发）是使用像*[runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeItervalSinceNow:0.05]*这样的小时间间隔。

目前我使用以下循环：

```
while (dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_NOW))
    CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.05, YES); 
```

延误已经过去。

# c++ - 将 Python HTTP 服务器作为 RPC 服务器嵌入到 C 程序中？

> ID：13022970
> 
> 赞同：2
> 
> 时间：2012-10-23T03:04:56.623
> 
> 标签：c++, python, c, http, embedded

我有一个用 C++ 编写的程序，带有一个用于 RPC 的 Web 界面。我可以调用`http://localhost/ListVariables`或`http://localhost/RunFunction?var=1`让 C 代码执行 ListVariables 或 RunFunction。它可以工作，但是当有这么多优秀的 Python Web 服务器时，我宁愿不必在 C/C++ 中管理 Web 服务器。

我想象的是让 C 程序调用 Python 以在另一个线程（即 Tornado）上启动 Web 服务器，返回到 C，然后继续进行计算。然后，当 Python 服务器收到 on 请求时`http://localhost/ListVariables`，它会*回调*C 并在已经运行的进程上执行 ListVariables。

```
C -----> processing -----------> processing ------------> RPC: FuncA -------->
 |                                                        ^        |
  \---> Python Web Server ---------- Request for: FuncA --/   ...   \-------->
                                     ^
  browser: http://localhost/FuncA ---/ 
```

该项目有一个不幸的警告，即程序必须从 C 开始。在做了一些研究之后，这似乎有点边界情况，因为 Python-->C 和 C-->Python 可以用 Cython 完成。但是，我在 C-->Python-->C 上找不到很多资源，因为我发现的大多数示例都描述了链接到库而不是链接到已经运行的进程。是否可以让 Python 回调到正在运行的 C 程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:13:12.917

绝对地。在注入的 C 程序中[创建一个“假”模块](http://docs.python.org/extending/extending.html)`sys.modules`，Python 代码可以像任何其他模块一样导入和访问该模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:24:48.643

我个人非常喜欢 boost::python 库，用于将 python 嵌入到 c++ 中并处理两者之间的数据绑定和回调。[http://www.boost.org/doc/libs/1_51_0/libs/python/doc/](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/)

话虽这么说，你的提议听起来有点像 PITA。我个人在使用[http://libevent.org/](http://libevent.org/)来满足我的嵌入式网络服务器需求方面取得了很大的成功。它为你处理所有的http服务器的东西，你需要做的就是给它你想要处理的url和一个回调，把它`event_base_loop`放在你的主循环中（或者如果你愿意的话，放在它自己的线程中），然后你走吧。在我看来，这似乎比嵌入 python 和处理两者之间传递的数据和数据结构要容易得多。

# python - python中列表的副本跟不上变化

> ID：13022973
> 
> 赞同：-2
> 
> 时间：2012-10-23T03:05:38.453
> 
> 标签：python, python-3.x

我有一个在程序运行时添加项目的列表，并且我创建了该列表的副本，因此我可以更改/修改/检查副本而不更改原始副本。

这是我到目前为止所得到的：

```
import copy
originallist.append(stuff)

combined=''.join(originallist)

copyoriginal=copy.deepcopy(originallist) 
##this didnt work as copyoriginal stayed empty [] while originallist would change.
#i also tried 
copyoriginal=list(originallist) 
#AND 
copyoriginal=originallist[:] 
#and with both cases copyoriginal remained at [] while originallist would change!! 
```

为什么不改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:07:59.563

列表的副本不会跟随对原始列表所做的更改；一旦制作了副本，python 的列表就会完全分开。

如果没有自定义类，您尝试做的事情是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:21:13.510

如果您想“跟上更改”到另一个列表，您可能需要考虑使用简单的引用而不是副本：

```
a = [1, 2, 3]
b = a # b refers to a

a[0] = 3
print b # prints [3, 2, 3] 
```

当您决定要停止跟踪更改时，您可以随时制作副本：

```
b = b[:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:22:11.390

如果你想命名引用同一个对象，你可以这样做：

```
a = b = []
a.append(1)
b.append(2)
print(b)
# returns [1,2] 
```

这不会让你改变其中一个而不影响另一个，但它会让你看到其中任何一个的变化。

# c# - 在 C# 中将应用程序转换为应用程序

> ID：13022976
> 
> 赞同：0
> 
> 时间：2012-10-23T03:06:14.447
> 
> 标签：c#, casting

我是一名程序员新手，我正在认真阅读 Charles Petzold 的教科书“Programming Windows Phone 7”。但是，在 Silverlight 页面之间共享数据的示例中，我无法将 Application 类转换为 App。如果你有免费的教科书，那就是第 113 页。

错误是“找不到类型或命名空间名称‘App’（您是否缺少 using 指令或程序集引用？）”

有人可以建议如何解决这个问题吗？如果它是一个 using 指令，那么有什么方法可以让我自己解决这些问题而不必拥有超级内存？

非常感谢你！

```
if (ContentPanel.Background is SolidColorBrush) {
            (Application.Current as App).SharedColor = (ContentPanel.Background as SolidColorBrush).Color;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:10:19.573

正如注释中提到的，当我从前面的示例中复制代码时，我不小心使用了不正确的命名空间。只是清理，对stackoverflow来说很新，喜欢让事情保持整洁:)

# c# - 替换单个字符左右两侧的字符

> ID：13022978
> 
> 赞同：1
> 
> 时间：2012-10-23T03:06:23.593
> 
> 标签：c#, regex, string, replace

假设我有这个字符串：

```
3+5+6+2^5+9+1+2+32^2+10^10 
```

我想替换 ^ 左侧和右侧出现的所有数字，包括 ^ 但不包括数字结束的位置，例如 + 符号，以此为例：

*   2^5 现在应该变成 Pow(2,5)
*   32^2 现在应该变成 Pow(32,2)
*   10^10 现在应该变成 Pow(10,10)

我正在寻找某种正则表达式或字符串替换，它只会替换 ^ 符号左侧和右侧的数字（可以是小数）并且是较大字符串的一部分。试图使这项工作完全正确，我的大脑正在受伤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:10:11.683

刚刚测试，并在这里工作：

```
 var str = Regex.Replace("3+5+6+2^5+9+1+2+32^2+10^10",
        @"(\d+)\^(\d+)", "Pow($1,$2)"); 
```

如果您需要对更换进行更多控制：

```
var str = Regex.Replace("3+5+6+2^5+9+1+2+32^2+10^10",
    @"(\d+)\^(\d+)",
    m => string.Format("Pow({0},{1})", m.Groups[1].Value, m.Groups[2].Value )); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:09:09.320

您可以使用组来替换

```
Regex.Replace("yourString",@"(\d+)\^(\d+)","Pow($1,$2)"); 
```

`(\d+)`并被`(\d+)`分为两组，即`Group1`和`Group 2`（不是第 0 组，因为它包含整个匹配项）

`$1`当你替换它时，你可以在替换字符串中使用和引用这些组`$2`

# javascript - 如何将 CSV 文件导入 webapp 的 javascript，以便我可以在谷歌地图画布上放置地址标记？

> ID：13022987
> 
> 赞同：2
> 
> 时间：2012-10-23T03:07:22.013
> 
> 标签：javascript, html, csv, maps

所以我对javascript和谷歌地图API有点陌生。目前，我可以在给定一个名为 codeAddress 的硬编码地址变量的情况下放置一个标记。

```
codeAddress("99362");

function codeAddress(address) {
    geocoder.geocode({
        'address': address
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
} 
```

问题是我需要能够根据位置放置多个标记，并且需要能够解析来自 CSV 文件或 sql 数据库的地址数据。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:11:27.317

我使用[jquery-csv 插件](http://code.google.com/p/jquery-csv/)来处理 csv 文件。

如果您可以详细说明此 csv 文件的来源以及加载方式，我可以提供有关如何将其转换为 javascript 数组的信息。该文件是否已经在服务器上？如果是这样，那么做一些服务器端处理来读取文件会更有意义。

下面显示了如何修改代码以使用包含多个地址的数组：

```
var addresses = ["99362", "01010", "12345"];

jQuery.each(addresses, function(index, address) { 
    geocoder.geocode({
        'address': address
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            // we only need to center the map the first time
            if (index == 0)
                map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}) 
```

# c# - 在远程计算机 WMI C# 上搜索文件

> ID：13022988
> 
> 赞同：3
> 
> 时间：2012-10-23T03:07:31.233
> 
> 标签：c#, wmi, wmi-query

我想在远程机器上搜索文件。我不知道确切的文件路径，但我知道它在 C:\Windows\System 下

我的查询在 WMI 中是这样的

```
string querystr = "SELECT * FROM CIM_DataFile Where Path='C:\\Windows\\System'";
ObjectQuery query = new ObjectQuery(querystr );
ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, query); 
```

我收到无效的查询错误。

查询有效吗？有什么方法可以指定 Path Under 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T03:36:40.390

您的代码中有两个问题

1.  您必须对`\`字符进行双重转义，因为这是 WMI 中的保留符号
2.  path 属性不得包含驱动器。

试试这个样本

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                string Drive = "c:";
                //look how the \ char is escaped. 
                string Path = "\\\\Windows\\\\System32\\\\";
                ObjectQuery Query = new ObjectQuery(string.Format("SELECT * FROM CIM_DataFile Where Drive='{0}' AND Path='{1}' ", Drive, Path));

                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0}",(string)WmiObject["Name"]);// String
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

# testing - 如何从命令行使用 junit 运行多个测试类？

> ID：13022990
> 
> 赞同：4
> 
> 时间：2012-10-23T03:07:54.233
> 
> 标签：testing, command-line, junit

我知道要从命令行运行 junit，您可以这样做：

java org.junit.runner.JUnitCore TestClass1 [...其他测试类...]

但是，我想一起运行许多测试并手动输入“TestClass1 TestClass2 TestClass3 ...”效率低下。

当前，我将所有测试类组织在一个目录中（该目录具有指示包的子目录）。有什么方法可以让我从命令行运行 junit 并让它一次执行这些测试类？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T01:38:57.953

基本上有两种方法可以做到这一点：要么使用 shell 脚本来收集名称，要么使用`ClassPathSuite`在 java 类路径中搜索与给定模式匹配的所有类。

类路径套件方法对于 Java 来说更自然。[这个 SO 答案](https://stackoverflow.com/a/3289797/1426891)描述了如何最好地使用 ClassPathSuite。

shell 脚本方法有点笨拙且特定于平台，根据测试的数量可能会遇到麻烦，但如果您出于任何原因试图避免使用 ClassPathSuite，它会解决问题。这个简单的假设每个测试文件都以“Test.java”结尾。

```
#!/bin/bash
cd your_test_directory_here
find . -name "\*Test.java" \
    | sed -e "s/\.java//" -e "s/\//./g" \
    | xargs java org.junit.runner.JUnitCore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:16:47.317

我发现我可以编写一个 Ant 构建文件来实现这一点。这是示例 build.xml：

```
<target name="test" description="Execute unit tests">
    <junit printsummary="true" failureproperty="junit.failure">
        <classpath refid="test.classpath"/>
        <!-- If test.entry is defined, run a single test, otherwise run all valid tests -->
        <test name="${test.entry}" todir="${test.reports}" if="test.entry"/>
        <batchtest todir="tmp/rawtestoutput" unless="test.entry">
            <fileset dir="${test.home}">
                <include name="**/*Test.java"/>
                <exclude name="**/*AbstractTest.java"/>
            </fileset>
            <formatter type="xml"/>
        </batchtest>
    <fail if="junit.failure" message="There were test failures."/>
</target> 
```

使用此构建文件，如果要执行单个测试，请运行：

```
ant -Dtest.entry=YourTestName 
```

如果要批量执行多个测试，请`<batchtest>...</batchtest>` 在上面的示例中指定相应的测试。

# python - 导入的过程与在其本机模块中运行时的执行方式不同

> ID：13022995
> 
> 赞同：1
> 
> 时间：2012-10-23T03:08:08.737
> 
> 标签：python, callback, python-2.7, tkinter

我有这个代码：

```
def Annabeth():
    Annabeth= Tk()
    Annabeth.geometry('450x450')
    says = Label(Annabeth,text ='I was just making a general statement!')
    says.pack(side=BOTTOM)
     img = ImageTk.PhotoImage(Image.open('C:/Users/Geekman2/Pictures/Pictures/Annabeth.jpg'))
    image1 = Label(Annabeth,image=img)
    image1.pack()
    Annabeth.mainloop() 
```

它位于模块中

```
rox 
```

当我调用

```
Annabeth() 
```

我的窗口出现，它显示图像，一切正常。当我从另一个模块使用代码时

```
from rox import*
Annabeth() 
```

它工作得很好但是当我使用这段代码时

```
def callback():
     Annabeth()

game = Tk()
game.geometry('50x50+700+100')
Button1 = Button(game,text = '1',command =callback )
Button1.pack(side=LEFT)

game.mainloop() 
```

窗口显示，但图片不显示，我得到错误

```
File "C:\Python27\lib\lib-tk\Tkinter.py", line 1974, in __init__
(widgetName, self._w) + extra + self._options(cnf))
TclError: image "pyimage1" doesn't exist 
```

对于我的一生，我无法弄清楚是什么原因造成的，显然我不应该在 GUI 程序中有多个主循环，但是我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:24:35.043

你不应该`Tk()`在你的程序中多次实例化。`Toplevel`如果您想要多个窗口，您可以考虑使用。

顺便说一句，它将解决您的几个主循环问题，因为`Toplevel`实例将在与`game`.

确切发生的是在已`ImageTk.PhotoImage`创建的第一个 Tcl/Tk 解释器中创建图像。因此，在第二个 Tcl/Tk 实例中运行的标签`image1`无法到达图片。