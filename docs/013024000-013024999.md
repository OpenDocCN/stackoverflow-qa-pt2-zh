# StackOverflow 问答 13024000-13024999

# apache-flex - Tomcat 在 7.0.27 版本之后不做 blazeds 流式传输？

> ID：13024000
> 
> 赞同：3
> 
> 时间：2012-10-23T05:18:06.827
> 
> 标签：apache-flex, jakarta-ee, tomcat, tomcat7, blazeds

我发现我的 flex 应用程序在 tomcat 版本 $subject 之后不再工作。请帮助我度过难关。我尝试了很多事情都没有成功。

这是我的配置。

Blaze - 4.x Tomcat - 最新 - 7.0.32 Java 7

应用程序只是挂起，没有任何错误或任何东西。它从 7.0.32 再次运行。我检查了 tomcat 发行说明（[http://tomcat.apache.org/tomcat-7.0-doc/changelog.html](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)）并将问题隔离到 Coyote jar 文件。

当我将 Coyote.jar 从版本 7.0.27 替换为 7.0.32 时，它可以正常工作。

以下是 Coyote 的更改（[http://tomcat.apache.org/tomcat-7.0-doc/changelog.html](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)）

```
52858: Correct fix for high CPU load (fhanik)
53138: Broken Sendfile on SSL introduced in 7.0.27 (fhanik)
52055: Additional fix required to ensure that InputFilters are recycled between requests. (markt)
53061: Fix a problem in the NIO connector whereby if the poller was under low but consistent load (>1 request/per second and always less than 1 second between requests) timeouts never took place. (markt)
53063: When using an Executor with BIO, use the executor's maxThreads as the default for maxConnections. (markt)
53119: Prevent buffer overflow errors being reported when a client disconnects before the response has been fully written from an AJP connection using the APR/native connector. (markt)
53169: Allow developers to avoid chunked encoding for a response of unknown length by setting the Connection: close header. Based on a patch suggested by Philippe Marschall. (markt)
53173: Properly count down maxConnections (fhanik)
 Update default value of pollerThreadCount for the NIO connector. The new default value will never go above 2 regardless of available processors. (fhanik)
 Allow to retrieve the current connectionCount via getter from the endpoint and as JMX attribute of the ThreadPool mbean. (rjung)
 Correct an edge case where Comet END events were not send to connected clients when the Tomcat connector was stopped. (markt)
53406: Fix possible stack overflow on connection close when using Comet. (fhanik)
 Improve InternalNioInputBuffer.parseHeaders(). (kkolinko)
 Implement maxHeaderCount attribute on Connector. It is equivalent of LimitRequestFields directive of Apache HTTPD. Default value is 100\. (kkolinko) 
```

任何猜测/想法都会有所帮助。提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T04:26:27.817

我认为这可能是问题的原因：

```
53169：允许开发人员通过设置 Connection:close 标头来避免对未知长度的响应进行分块编码。基于 Philippe Marschall 建议的补丁。（市场）

```

并来自 BaseStreamingHTTPEndPoint.java 中的 BlazeDS (4.0.0.14931) 代码：

```
718: res.setHeader("Connection", "close"); 
```

所以，我写了一个简单的过滤器：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    chain.doFilter(request, new HttpServletResponseWrapper(
            (HttpServletResponse) response) {
        public void setHeader(String name, String value) {
            if (!("Connection".equalsIgnoreCase(name) && "Close"
                    .equalsIgnoreCase(value))) {
                super.setHeader(name, value);
            }
        }
    });
} 
```

使用 web.xml 中的配置：

```
<filter>
    <filter-name>MessageBrokerHack</filter-name>
    <filter-class>
        com.vivimice.testing.MessageBrokerHack
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>MessageBrokerHack</filter-name>
    <url-pattern>/messagebroker/*</url-pattern>
</filter-mapping> 
```

然后问题就解决了。

在 AIR 客户端 (Flex 4.5.1) 和 Tomcat 6.0.36 & 7.0.35 上测试

注意：尚未在常规 RemoteObject 调用上进行测试。

# sql-server-2008 - 标量值函数不返回预期结果

> ID：13024006
> 
> 赞同：1
> 
> 时间：2012-10-23T05:18:58.423
> 
> 标签：sql-server-2008, tsql

我在 Microsoft SSMS 中创建了一个标量值函数，如下所示：

```
CREATE FUNCTION [dbo].[fGetCurrentBalFromName] 
(
    @Name NVarchar,
    @CliFl Bit
)
RETURNS Money
AS
BEGIN
    DECLARE @CurrentBal Money

    select @CurrentBal=SUM(tt.Debt) from  
     (select case t.Clientfl when 1 then dbo.fGetClientNameFromId(t.AgentID) 
                    else dbo.fGetSupplierNameFromId(t.AgentID) 
             end as Cli,
             t.Clientfl,
         case t.Clientfl when 1 then 
            case t.Incomfl 
                when 1 then t.Amount 
                       else (-1)*t.Amount 
            end
         else
            case t.Incomfl
                when 1 then (-1)*t.Amount
                        else t.Amount
            end
         end as Debt              
      from [Store].[dbo].[Money] t) tt where tt.Cli=@Name and tt.Clientfl=@CliFl
      group by tt.Cli

    RETURN @CurrentBal

END 
```

当我执行

```
Select dbo.fGetCurrentBalFromName('Вали',1) 
```

我得到 no(NULL) 结果。

但是当我尝试不带参数单独执行查询时

```
select SUM(tt.Debt) from  
         (select case t.Clientfl when 1 then dbo.fGetClientNameFromId(t.AgentID) 
                        else dbo.fGetSupplierNameFromId(t.AgentID) 
                 end as Cli,
                 t.Clientfl,
             case t.Clientfl when 1 then 
                case t.Incomfl 
                    when 1 then t.Amount 
                           else (-1)*t.Amount 
                end
             else
                case t.Incomfl
                    when 1 then (-1)*t.Amount
                            else t.Amount
                end
             end as Debt              
          from [Store].[dbo].[Money] t) tt where tt.Cli='Вали' and tt.Clientfl=1
          group by tt.Cli 
```

我得到了我想要的。那么我在创建标量值函数时犯了什么错误。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:50:08.887

您需要指定参数的大小`@Name`。

```
@Name NVarchar 
```

没有大小，它默认为 1 个字符。

尝试这样的事情。

```
@Name NVarchar(100) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/03af7/1/0)

# perl - 返回一个返回标量值的匿名函数

> ID：13024011
> 
> 赞同：1
> 
> 时间：2012-10-23T05:19:38.560
> 
> 标签：perl

我试图弄清楚在这个简单的语句中到底在处理什么：

```
sub testReturn {
    return sub {
        my $val = shift;
        return $val;
    }
} 
```

什么时候

```
my $num = testReturn(1);
print $num; 
```

被调用，它输出：

```
CODE(0x9c63b34) 
```

当我试图让它简单地返回 1 的值。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:30:08.643

您的函数返回另一个函数作为匿名代码块。您可以调用该代码为您做一些事情，如下所示：

```
my $anonsub = testReturn(); # $anonsub is CODE object
my $num = &$anonsub(1);      # here this code is called
print $num; 
```

# java - 每个请求的休眠会话与每个应用程序的休眠会话？

> ID：13024018
> 
> 赞同：-1
> 
> 时间：2012-10-23T05:20:13.837
> 
> 标签：java, hibernate

我想知道哪个对使用以下 Web 应用程序更好：- Spring3.1 Hibernate4

**每个请求的**休眠会话或**每个应用程序**的休眠会话？

请建议

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:26:48.617

对于任何 Web 应用程序来说，使用**每个请求的会话**模式通常是一个安全的选择。它可能是所有基于 Servlet 的应用程序中最常见的模式。

在进行数据操作时，我们将在整个请求期间使用相同的会话，并在请求结束时确保会话和事务正确完成。如果实施得当，每个请求的会话模式可以保证 Hibernate 会话的数量受到控制，会话正确关闭并且会话定期刷新。多用户 Web 应用程序的良好特性组合。

你会在谷歌上找到很多关于每个请求模式的休眠会话的好处的好文章。

# assembly - 将 ARM 程序集转换为 gnu 程序集

> ID：13024023
> 
> 赞同：4
> 
> 时间：2012-10-23T05:20:34.843
> 
> 标签：assembly, arm, gnu

我有一组来自 ARM 的 .s 文件，它们在 ARM 工具链上运行，但我们使用的是 gnu 工具链。

是否有将程序集从一种格式转换为另一种格式的转换脚本/工具/方法？用手做这件事似乎……很危险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:11:59.970

我不相信脚本/工具会比手动操作更危险。

转换代码的工作量在很大程度上取决于代码中使用了多少非基本功能（宏、命名寄存器……）。

指令的语法通常没有区别（尽管在一种格式中可能允许某些立即修饰符，但在另一种格式中则不允许）。注释语法不同，但 ';' -> '@' 应该是一个相当安全的搜索和替换。

大多数代码的不同之处在于标签（标签名称后需要'：'，armasm没有），但更重要的是汇编程序指令。

# sql-server - 表之间没有关系的休眠连接

> ID：13024025
> 
> 赞同：0
> 
> 时间：2012-10-23T05:20:54.007
> 
> 标签：sql-server, nhibernate

```
tableA
------
Aprimarykey,
Afield1,
Afield2,
AfieldtoMatch  

tableB
------
Bprimarykey,
Bfield1,
Bfield2,
BfieldtoMatch 
```

表之间没有关系。如果我想要以下结果，类和 hbm 文件会是什么样子？

```
select distinct tableA.Afield1, tableA.Afield2,tableA.AfieldMatch tableB.Bfield1,tableB.Bfield1    
from tableA innerjoin tableB on tableA.AfieldtoMatch=tableB.Bmatchfield 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:34:45.860

既然你想加入，显然有某种关系，虽然抽象。

将 SQL 查询声明为预期结果会使问题仍有待解释。您可能应该将每个表映射到单独的实体，然后在查询时可以使用 HQL 或 LINQ 连接任意列。

您可能还想查看参考中的 <join> 元素：http: [//nhibernate.info/doc/nh/en/index.html#mapping-declaration-join](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-join)。

# ffmpeg - 使用 ffmpeg 命令解码 aac 音频文件？

> ID：13024027
> 
> 赞同：0
> 
> 时间：2012-10-23T05:20:57.467
> 
> 标签：ffmpeg, aac

如何使用 ffmpeg 命令将 AAC 格式的音频文件（即 1.aac）解码为 pcm 或 wav 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:05:39.620

适合 superuser.com 的问题。

这是你的答案 ffmpeg -i input.aac out.wav

# c# - 在 MVC4 中验证 @Html.Textbox

> ID：13024030
> 
> 赞同：9
> 
> 时间：2012-10-23T05:21:03.040
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我使用更新操作根据来自@Html.Textbox 的输入进行更新。

```
@using (Html.BeginForm("Update", "Shopping", new { UserID = Request.QueryString["UserID"] }, FormMethod.Post, new { id = "myForm" }))
   {               
   @Html.ValidationSummary()                
   @Html.Hidden("id", @Request.QueryString["UserID"] as string)
   @Html.Hidden("productid", item.ProductID as string)
   @Html.TextBox("Quantity", item.Quantity)   
   @Html.ValidationMessage("Quantity", "*") 
   @Html.Hidden("unitrate", item.Rate)               
   <input type="submit" value="Update" />
   } 
```

在我的模型课上

```
 [Required(ErrorMessage = "Quantity is required.")]
        [Display(Name = "Quantity")]
        [Range(2, 100, ErrorMessage = "There is not enough inventory for the product to fulfill your order.")]
        public int? Quantity { get; set; } 
```

问题是当文本框为空时我没有收到验证消息。但是当我使用@Html.TextBoxFor

```
 @Html.TextBoxFor(modelItem => item.Quantity)
   @Html.ValidationMessageFor(modelitem => item.Quantity) 
```

我收到验证消息。我的更新操作不起作用。
在这里，我有两个选择。
1\. 如何在@Html.TextboxFor 中传递文本框名称“数量”？？(或)
2\. 如何使用@Html.ValidationMessage() 获取@Html.Textbox() 中的验证消息

有什么建议么 ..

编辑：我的更新操作

```
[HttpPost]
   public ActionResult Update(string id, string productid, int Quantity, decimal unitrate)
        {
        if (ModelState.IsValid)
         {
                   int _records = UpdatePrice(id, productid, Quantity, unitrate);
                    if (_records > 0)
                    {
                        return RedirectToAction("Index1", "Shopping", new { UserID = Request.QueryString["UserID"] });
                    }
                    else
                    {
                        ModelState.AddModelError("","Can Not Update");
                    }
                }
                return View("Index1");
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:39:46.640

当您使用时，您的问题中有答案

```
@Html.TextBoxFor(modelItem => item.Quantity)
@Html.ValidationMessageFor(modelitem => item.Quantity) 
```

您会收到错误消息，因为 MVC 模型验证适用于`name`属性，正如@Mystere Man 在评论中所说，您违反了所有约定和约定是 MVC 的全部内容，要么更改模型中的属性名称，要么将其用作它如果您想利用 MVC 的模型验证，则在视图中。

* * *

[不完全相关，但很好读。](http://haacked.com/archive/2011/07/14/model-metadata-and-validation-localization-using-conventions.aspx)

# objective-c - 如何在 iPhone sdk 中开始动画时设置 CABasicAnimation 的帧速率

> ID：13024039
> 
> 赞同：0
> 
> 时间：2012-10-23T05:21:59.923
> 
> 标签：objective-c, ios5.1, cabasicanimation

我有多个 Imageview，我正在划分 360 度/no.of.Imageviews 以获得旋转每个 Imageview 的角度。

```
#define angle ((2*M_PI)/13.0)

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    mainView.backgroundColor = [UIColor blackColor];

    for(currentIndex = 0; currentIndex < 13; currentIndex++)
    {

        UIImageView *imageView = [self getCardsWithAngle:(currentIndex*angle)];

        [mainView addSubview:imageView];
    }
}

-(UIImageView *)getCardsWithAngle:(float)aAngle 
{

    CGRect frame = CGRectMake(mainView.center.x+50, mainView.center.y-100, 250,200);
    CGPoint anchorPoint = CGPointMake(0.5,1.5);

    imgView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"card_1.png"]];
    imgView.frame = frame;
    imgView.backgroundColor = [UIColor clearColor];
    if(aAngle == 0.0)
    {
        imgView.layer.anchorPoint = anchorPoint;
        return imgView;
    }

    imgView.layer.anchorPoint = anchorPoint;

    CABasicAnimation* rotationAnimation;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.toValue = [NSNumber numberWithFloat:aAngle];
    rotationAnimation.duration = 3.0;

    rotationAnimation.removedOnCompletion = NO;
    rotationAnimation.fillMode = kCAFillModeForwards;
    rotationAnimation.delegate = self;
    [rotationAnimation setValue:[NSNumber numberWithFloat:aAngle] forKey:@"finalAngle"];

    [imgView.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];

    return imgView;
} 
```

在这里我的问题是所有的图像视图一次开始动画。我想将图像视图一个接一个地旋转到一个角度。

任何想法将不胜感激，谢谢大家

# drupal - 如何在 drupal 7 的首页打开视频弹出窗口？

> ID：13024041
> 
> 赞同：2
> 
> 时间：2012-10-23T05:22:12.920
> 
> 标签：drupal, drupal-7

我们有一个 drupal 7 网站。在网站的首页上，我们想要一个视频弹出窗口来播放一个 mp4 文件作为介绍。视频将托管在我们的服务器上。欢迎所有建议。非常感谢！我们喜欢 Drupal。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:32:25.943

[Colorbox](http://drupal.org/project/colorbox)是一个更好的选择。您可以简单地向您的链接添加一个类，它可以方便地在模式弹出窗口中调用您的链接。

```
Ex. <a href="wwww.site.com" class="colorbox"> My Site. </ a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:56:31.003

[popup 模块](http://drupal.org/project/popup)允许弹出节点、视图和 php 生成的内容。所以首先创建一个带有 video 的节点，然后使用这个弹出窗口来显示它

# html - 用于 html 的 Perl 正则表达式

> ID：13024048
> 
> 赞同：1
> 
> 时间：2012-10-23T05:23:35.773
> 
> 标签：html, regex, perl

我需要为变量 URL 指定的电影提取 IMDB id（例如：对于电影 300，它是 tt0416449）。我查看了此[页面](http://www.imdb.com/find?q=300&s=all)的页面源并提出了以下正则表达式

```
use LWP::Simple;
$url = "http://www.imdb.com/search/title?title=$FORM{'title'}";

if (is_success( $content = LWP::Simple::get($url) ) ) {
    print "$url is alive!\n";
} else {
    print "No movies found";
}

$code = "";

if ($content=~/<td class="number">1\.</td><td class="image"><a href="\/title\/tt[\d]{1,7}"/s) {
    $code = $1;
} 
```

我在这一行收到内部服务器错误

```
$content=~/<td class="number">1\.</td><td class="image"><a href="\/title\/tt[\d]{1,7}"/s 
```

我对 perl 很陌生，如果有人能指出我的错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T05:26:29.793

使用[HTML 解析器](http://search.cpan.org/dist/HTML-Parser/Parser.pm)。[正则表达式无法解析 HTML。](https://stackoverflow.com/a/1732454/470535)

无论如何，错误的原因可能是您忘记在正则表达式中转义正斜杠。它应该如下所示：

```
/<td class="number">1\.<\/td><td class="image"><a href="\/title\/tt[\d]{1,7}"/s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:18:02.740

[**Mojolicious**](http://mojolicio.us)发行版的一些工具为此类工作提供了一个非常好的界面。

# 长版

它的[UserAgent](http://mojolicio.us/perldoc/Mojo/UserAgent)、[DOM](http://mojolicio.us/perldoc/Mojo/DOM)和[URL](http://mojolicio.us/perldoc/Mojo/URL)类的组合可以以非常健壮的方式工作：

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use Mojo::UserAgent;
use Mojo::URL;

# preparations
my $ua  = Mojo::UserAgent->new;
my $url = "http://www.imdb.com/search/title?title=Casino%20Royale";

# try to load the page
my $tx = $ua->get($url);

# error handling
die join ', ' => $tx->error unless $tx->success;

# extract the url
my $movie_link  = $tx->res->dom('a[href^=/title]')->first;
my $movie_url   = Mojo::URL->new($movie_link->attrs('href'));
say $movie_url->path->parts->[-1]; 
```

输出：

```
tt0381061 
```

# 简洁版本

有趣的 one liner helper 模块[ojo](http://mojolicio.us/perldoc/ojo)有助于构建一个非常短的版本：

```
$ perl -Mojo -E 'say g("imdb.com/search/title?title=Casino%20Royale")->dom("a[href^=/title]")->first->attrs("href") =~ m|([^/]+)/?$|' 
```

输出：

```
tt0381061 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:27:30.647

我同意 XML 是反行编辑，因此是反 unix，但是有 AWK。

如果 awk 能做到，perl 肯定能做到。我可以生成一个列表：

```
curl -s 'http://www.imdb.com/find?q=300&s=all' | awk -vRS='<a|</a>' -vFS='>|"' -vID=$1 '

$NF ~ ID && /title/ { printf "%s\t", $NF; match($2, "/tt[0-9]+/"); print substr($2, RSTART+1, RLENGTH-2)}
' | uniq 
```

将搜索字符串传递给“ID”。基本上这都是关于如何在 awk 中选择标记器，我使用`<a>`标签。在 perl 中应该更容易。

# sql - 编写查询 Display Dept Name , Job Name , "count of employees in job for each dept" & "Count of employees in dept"

> ID：13024058
> 
> 赞同：-1
> 
> 时间：2012-10-23T05:24:30.673
> 
> 标签：sql, database, oracle

我需要显示每个部门的工作员工人数并计算部门的员工人数。我想要的输出是这样的：

```
DNAME                JOB                    Count(*)    Count(*)
-----                ---                    --------    --------
SALES                Manager                       3           5
ACCOUNTING           SALESMAN                      4           2 
```

我怎样才能做到这一点？我可以使用子查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:34:35.047

您可以使用“Group by Cube”语法获得所需的内容。

```
SELECT d.DNAME, e.JOB, COUNT(*)
  FROM
EMP e JOIN DEPT d ON d.DEPTID = e.DEPTID
GROUP BY CUBE(d.DNAME,e.JOB); 
```

# xml - Powershell using Regex finding a string within a string in XML

> ID：13024060
> 
> 赞同：1
> 
> 时间：2012-10-23T05:24:34.863
> 
> 标签：xml, regex, powershell, substring

I have an xml file and I need to read only a particular substring from the main string. The xml file looks like below:

```
<?xml version="1.0" encoding="utf-8"?>
<Report Version="10.0">
<Entities>
<Entity Name="\\sharing\Data\SB\**appname**\wcf\Utilitysvc\bin\svcUtility.Host.dll">
<Mods>
<Mod Name="svcUtility.Host.dll" AssemblyVersion="1.0.2000.001">
<Fields>
<Field Name="TIndex" Value="100" />            
<Field Name="Vindex" Value="200" />
</Fields>
</Mod>
</Mods>
</Entity>
</Entities>
</Report> 
```

The main string in this xml is -

```
<Entity Name="\\sharing\Data\SB\**appname**\wcf\Utilitysvc\bin\svcUtility.Host.dll"> 
```

And I need to print only the "appname" from it.

What condition logic can I use to print this using regex in powershell? And it need not be \wcf after the appname always.. it can be anything based on the dll path. For Eg, it can be like:

```
<Entity Name="\\sharing\Data\*SB*\**appname**\**Web**\Utilitysvc\bin\svcUtility.Host.dll"> 
```

or

```
<Entity Name="\\sharing\Data\*SB*\*DEVCS*\**appname**\**junk**\Utilitysvc\bin\svcUtility.Host.dll"> 
```

Can I have a generic select -string way? need to test this as well..

Thanks,
Ashish

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:14:27.727

这是一种方式：

```
$xml = [xml](get-content .\my.xlm )

 ($xml.Report.Entities.Entity.name | 
% { [regex]::matches($_, 'SB\\(.*)\\wcf') } |
 select -expand groups)[1].value 
```

没有 [regex] .net 方法：

```
($xml.Report.Entities.Entity.name |
select-string 'SB\\(.*)\\wcf' -AllMatches | select -ExpandProperty matches |
select -ExpandProperty groups)[1].value 
```

编辑：

根据您的最后评论尝试此模式：

```
 ($xml.Report.Entities.Entity.name |
    select-string '(?<=\\Data\\.*\\)[^\\]*' -AllMatches |
    select -ExpandProperty matches |
    select -ExpandProperty groups)[0].value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:12:20.310

您可以在没有正则表达式的复杂性的情况下做到这一点，拆分路径并获取第 5 个元素（听起来像电影名称）：

```
[xml]$xml = @"
<?xml version="1.0" encoding="utf-8"?>
<Report Version="10.0">
<Entities>
<Entity Name="\\sharing\Data\SB\**appname**\wcf\Utilitysvc\bin\svcUtility.Host.dll">
<Mods>
<Mod Name="svcUtility.Host.dll" AssemblyVersion="1.0.2000.001">
<Fields>
<Field Name="TIndex" Value="100" />            
<Field Name="Vindex" Value="200" />
</Fields>
</Mod>
</Mods>
</Entity>
</Entities>
</Report>
"@

$xml.Report.Entities.Entity.Name.split('\')[5]

**appname** 
```

# java - Mac OS Java 7 小程序+智能卡问题

> ID：13024062
> 
> 赞同：2
> 
> 时间：2012-10-23T05:24:42.393
> 
> 标签：java, macos, applet, smartcard-reader

我们有使用智能卡签名的小程序。一切都很好，直到 Mac OS 上的新 java 更新。我会解释的。当 macos 有 java 6 和特殊插件时，一切正常。但是现在他们删除了他们的插件，用户必须从 Oracle 网站下载适用于 java 7 的浏览器插件。

Applet 仍然可以看到读卡器，但在其中看不到智能卡。我们使用 reader.isCardPresent() 方法，它返回“false”，没有异常等，一切正常，读卡器中没有卡。我们恢复操作系统的备份，当有6个java和MacOS自己的插件时，一切正常。但是我们有很多客户刚买了新的 iMac 或 MacBook，他们不能使用 6 java 和苹果的插件。

一切都在 Windows 上运行。我们不使用任何已弃用的方法。似乎是 Oracle 的 Mac OS 插件的问题。

任何人都有类似的问题，或者您可能有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:32:07.740

我只是做了一些测试：从[示例中](http://code.google.com/p/java-sample-programs/source/browse/trunk/JavaSamples/src/src/com/moodykettle/pcsc/PCSC.java?r=9)获取代码并稍微修改它。在 macosx 10.8.2 中的 jdk1.7.0_09 上运行示例。PCSC 框架 1.4.0。

**terminal.isCardPresent() 返回 false，但可以访问卡片。**当 java 同时运行 32 位和 64 位模式时存在错误。Pcscd 仅在 32 位模式下运行，因为通用 pcsc 驱动程序仍然仅是 32 位。

在 pcscd 调试日志中，我在 SHMMessageReceive 中看到一些解析错误，因此错误可能在 java 或 pcsc 框架中（`winscard_msg.cpp`）。

# ruby-on-rails-3.1 - 将变量传递给 scss 'mixin' 在 rails 3.0 中有效，但在 3.2 中无效

> ID：13024063
> 
> 赞同：1
> 
> 时间：2012-10-23T05:24:42.767
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2, sass

我正在将应用程序从 rails 3.0 升级到 3.2，我的一些 scss 代码存在问题。stylin.css 包含：

```
/*
= require_self
= require_tree .
*/ 
```

stylin.css.scss 包含：

```
@import "palette";
@import "round";
@import "html_elements";
@import "graph";
@import "menu";
@import "button";
@import "pop_up";
@import "basic_abrev"; 
```

当 style.css 更新时，“调色板”被导入，但没有其他任何东西被导入。因此，在加载第一页时出现以下错误：

```
Undefined mixin 'round_corners' 
```

我认为这是因为'round.css.scss'的顶部包括以下内容：

```
@mixin round_corners($radius: 8px) {
  border-radius: $radius;
  -moz-border-radius: $radius;
  -webkit-border-radius: $radius;
} 
```

如果没有传递变量，则默认值为 8px。在以下情况下，“20px”被传递给 mixin。

```
@include round_corners(20px); 
```

这在 3.0 中有效。这不再可能了吗？如果没有，我将不得不创建大量 mixin 或停止使用混合/包含功能来圆角。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:44:00.057

我在[这里](http://edgeguides.rubyonrails.org/asset_pipeline.html)找到了这个：

如果你想使用多个 Sass 文件，你通常应该使用 Sass @import 规则而不是这些 Sprockets 指令。使用 Sprockets 指令，所有 Sass 文件都存在于它们自己的范围内，使变量或 mixin 仅在定义它们的文档中可用。

我在[这里](https://github.com/petebrowne/sprockets-sass)找到了这个：

将 Sprockets 2.x 与 Sass 一起使用时，您最终会遇到一个相当大的问题。//= require 指令不允许在文件之间共享 Sass mixins、变量等。

[在这里](https://github.com/rails/sass-rails)找到这个：

Sprockets 提供了一些指令，这些指令放置在名为 require、require_tree 和 require_self 的注释中。不要在你的 SASS/SCSS 文件中使用它们。它们非常原始，不能很好地处理 Sass 文件。取而代之的是，使用 sass-rails 定制的 Sass 的原生 @import 指令以与您的 rails 项目的约定集成。

当我从 stylin.css.scss 文件中删除这个（链轮命令）时，一切正常。

```
/*
= require_self
= require_tree .
*/ 
```

# c# - 异步回发不起作用

> ID：13024064
> 
> 赞同：0
> 
> 时间：2012-10-23T05:24:49.643
> 
> 标签：c#, javascript, jquery, asp.net

我在我的内容占位符中使用了这个量规。

[http://www.dariancabot.com/projects/jgauge_wip/](http://www.dariancabot.com/projects/jgauge_wip/)

MyControl.ascx：

```
<link rel="stylesheet" href="Scripts/jgauge.css" type="text/css" />
<script type="text/javascript" src="Scripts/jquery-1.8.0.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/jgauge-0.3.0.a3.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/jQueryRotate.2.2.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/excanvas.min.js"></script>

<div id="<%=this.ClientID%>_ctl" class="jgauge" ></div>

<script type="text/javascript">
    $(document).ready(function () {
    var isPostBack = <%= Page.IsPostBack ? "true" : "false" %>;
        if(isPostBack == "true")
        {
            Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
            prm.add_endRequest(onEndRequest);
        }
        else{
                var <%=this.ClientID%>_ctl;

                <%=this.ClientID%>_ctl = new jGauge(); 
                <%=this.ClientID%>_ctl.id = '<%=this.ClientID%>_ctl';
                <%=this.ClientID%>_ctl.init(); 
 }
    });

    function EndRequestHandler(sender, args){  
        var <%=this.ClientID%>_ctl;
        <%=this.ClientID%>_ctl = new jGauge(); 
        <%=this.ClientID%>_ctl.id = '<%=this.ClientID%>_ctl';
        <%=this.ClientID%>_ctl.init();
}
</script> 
```

在 MyPage.aspx 中：（包含动态创建的具有多个此类控件的表。将生成的表放在占位符上）

```
<asp:UpdatePanel ID="up1" runat="server">
    <ContentTemplate>
        <asp:PlaceHolder id="phMain" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="myBtn" />
    </Triggers>
</asp:UpdatePanel>
<asp:Button ID="myBtn" runat="server" Text="Refresh" /> 
```

我在母版页上有脚本管理器：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true"></asp:ScriptManager> 
```

但是在异步回发（点击'myBtn'）之后，仪表消失了。请帮忙。试图解决它，因为这几天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:37:51.850

我能够通过以下方式解决这个问题：

```
$(document).ready(function () { 
    Sys.WebForms.PageRequestManager.getInstance()
        .add_endRequest(<%=this.ClientID%>_ctlEndRequestHandler); 
    var <%=this.ClientID%>_ctl; 

    <%=this.ClientID%>_ctl = new jGauge();  
    <%=this.ClientID%>_ctl.id = '<%=this.ClientID%>_ctl'; 
    <%=this.ClientID%>_ctl.init();
});

function <%=this.ClientID%>_ctlEndRequestHandler(sender, args){
    var <%=this.ClientID%>_ctl; 
    <%=this.ClientID%>_ctl = new jGauge();  
    <%=this.ClientID%>_ctl.id = '<%=this.ClientID%>_ctl'; 
    <%=this.ClientID%>_ctl.init(); 
} 
```

唯一真正的区别是不再进行回发检查。您的根本问题是`$(document).ready`不会在部分回发时触发，这意味着它`isPostBack`实际上从未设置为 true。因此，`Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);`从未执行过，这意味着您`EndRequestHandler`从未运行过。

**编辑**

`EndRequestHandler`另一个问题是，如果您同时拥有多个控件，那么命名该方法肯定会导致问题。为了解决这个问题，我附加`<%=this.ClientID%>_ctl`了名称`EndRequestHandler`以确保它是唯一的。

更多信息：

[如何同时使用 jQuery $(document).ready 和 ASP.NET UpdatePanel？](https://stackoverflow.com/questions/1750368/how-do-i-use-a-jquery-document-ready-and-an-asp-net-updatepanel-together?rq=1)

[http://encosia.com/document-ready-and-pageload-are-not-the-same/](http://encosia.com/document-ready-and-pageload-are-not-the-same/)

# php - 5 个字符后自动换行

> ID：13024065
> 
> 赞同：2
> 
> 时间：2012-10-23T05:24:54.200
> 
> 标签：php

伙计们，我只想问是否有可能：例如`$currenttext = "someexamplepls";` ，如果您想显示或打印它，只需使用`print "$currenttext";`，那么准备好的输出看起来像这样`someexamplepls`。我的问题是我是否想这样打印：

```
somee
xampl
epls 
```

在每 5 个字符中有一个自动换行符我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T05:26:06.603

使用[`wordwrap()`](http://php.net/wordwrap)：

```
echo wordwrap($str, 5, "\n", true); 
```

如果您希望 HTML 换行符使用`<br>`而不是`\n`.

# c# - Regex: C# extract text within double quotes

> ID：13024073
> 
> 赞同：47
> 
> 时间：2012-10-23T05:25:34.257
> 
> 标签：c#, regex

I want to extract only those words within double quotes. So, if the content is:

> Would "you" like to have responses to your "questions" sent to you via email?

The answer must be

1.  you
2.  questions

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-23T05:28:40.400

Try this `regex`:

```
\"[^\"]*\" 
```

or

```
\".*?\" 
```

explain :

> ***`[^ character_group ]`***
> 
> Negation: Matches any single character that is not in character_group.
> 
> ***`*?`***
> 
> Matches the previous element zero or more times, but as few times as possible.

and a sample code:

```
foreach(Match match in Regex.Matches(inputString, "\"([^\"]*)\""))
    Console.WriteLine(match.ToString());

//or in LINQ
var result = from Match match in Regex.Matches(line, "\"([^\"]*)\"") 
             select match.ToString(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-23T05:40:58.713

基于@Ria 的回答：

```
static void Main(string[] args)
{
    string str = "Would \"you\" like to have responses to your \"questions\" sent to you via email?";
    var reg = new Regex("\".*?\"");
    var matches = reg.Matches(str);
    foreach (var item in matches)
    {
        Console.WriteLine(item.ToString());
    }
} 
```

输出是：

```
"you"
"questions" 
```

如果不需要，可以使用 string.TrimStart() 和 string.TrimEnd() 删除双引号。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-23T05:47:46.397

我喜欢正则表达式解决方案。你也可以想到这样的事情

```
string str = "Would \"you\" like to have responses to your \"questions\" sent to you via email?";
var stringArray = str.Split('"'); 
```

然后`odd`从数组中取出元素。如果你使用 linq，你可以这样做：

```
var stringArray = str.Split('"').Where((item, index) => index % 2 != 0); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-27T03:37:10.727

这也会从@Ria 窃取正则表达式，但允许您将它们放入一个数组中，然后在其中删除引号：

```
strText = "Would \"you\" like to have responses to your \"questions\" sent to you via email?";
MatchCollection mc = Regex.Matches(strText, "\"([^\"]*)\"");
for (int z=0; z < mc.Count; z++)
{
    Response.Write(mc[z].ToString().Replace("\"", ""));
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-04T03:33:07.453

我结合了正则表达式和修剪：

```
const string searchString = "This is a \"search text\" and \"another text\" and not \"this text";
var collection = Regex.Matches(searchString, "\\\"(.*?)\\\"");
foreach (var item in collection)
{
    Console.WriteLine(item.ToString().Trim('"'));
} 
```

结果：

```
search text
another text 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T05:27:16.053

Try this `(\"\w+\")+`

I suggest you to download `Expresso`

[http://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-15T01:55:31.320

@ria 的回答略有改进，

```
\"[^\" ][^\"]*\" 
```

仅当后面没有空格以允许尾随英寸说明符时，才会识别起始双引号。

[![在此处输入图像描述](../Images/e3c87d7ff8610500311e77ecd8ce59f3.png)](https://i.stack.imgur.com/MZ5Nr.png)

副作用：它不会将 "" 识别为引用值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-29T00:56:57.853

我需要在 C# 中执行此操作来解析 CSV，但这些都不适合我，所以我想出了这个：

```
\s*(?:(?:(['"])(?<value>(?:\\\1|[^\1])*?)\1)|(?<value>[^'",]+?))\s*(?:,|$) 
```

这将解析带或不带引号的字段，并将从值中排除引号，同时保留嵌入的引号和逗号。`<value>`包含解析的字段值。在不使用命名组的情况下，组 2 或组 3 包含该值。

有更好、更有效的方法来进行 CSV 解析，但这种方法在识别错误​​输入方面无效。但是，如果您可以确定您的输入格式和性能不是问题，那么这可能对您有用。

# c# - 在浏览器之外交付 WPF 浏览器应用程序？

> ID：13024076
> 
> 赞同：0
> 
> 时间：2012-10-23T05:25:51.003
> 
> 标签：c#, wpf, out-of-browser

是否可以将 WPF 应用程序交付给最终用户，但在到达时将其显示在浏览器之外？

我尝试设置一个选项以允许应用程序脱机运行，但 Visual Studio 已为我取消了该选项...

![在此处输入图像描述](../Images/e2e4579e109cc2083fb4a4207f73291d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:49:15.390

通过[ClickOnce](http://wpfandclickonce.codeplex.com/)支持 WPF 。Silverlight 可以由浏览器托管，然后存储以供离线使用或[完全用完浏览器](http://www.silverlight.net/learn/overview/out-of-browser-applications/out-of-browser-applications-%28silverlight-quickstart%29)。

# php - 如何在 Zend Framework 2 中设置 BjyAuthorize？

> ID：13024081
> 
> 赞同：1
> 
> 时间：2012-10-23T05:26:39.780
> 
> 标签：php, acl, zend-framework2

我正在尝试在[ZF2](https://github.com/bjyoungblood/BjyAuthorize)的示例应用程序中使用 BjyAuthorize，但我在设置它时遇到了一些问题。

我有一个`Admin`模块，我想授予用户访问它的权限。我也有这个`ZfcUser`模块，这个模块似乎可以很好地使用这个 acl。

我设置数据库的方式就像他的：

```
user_role
role_id     default     parent
------------------------------
user        1           admin
admin       2           NULL

user_role_linker
user_id     role_id
-------------------
1           user 
```

我不确定这是否设置正确，我也不确定为什么`role_id`是 varchar ??!!

无论如何，通过这种设置，ZfcUser 工作得很好。

问题是当我尝试使用不同的模块时，我在其中添加：

```
array('controller' => 'Admin\Controller\Index', 'roles' => array('guest','user')) 
```

我明白了

> 403 Forbidden 您无权访问 Admin\Controller\Admin ::indexAction() 。

在自述文件中提到我可以`$this->isAllowed($resource[, $privilege])`在我的控制器或视图中使用，但该代码是错误的，我不确定什么是`$resource`或`$privilege`

所以我想我的问题是如何使用这个模块？有人让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:40:19.570

根据 403 错误文本，您的规则很可能应该更改为

```
array('controller' => 'Admin\Controller\Admin', 'action' => 'index', 'roles' => array('guest', 'user')) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T23:13:15.207

我找到了一个解决方案，可以让我使用 ZfcUser 和 BjyAuthorize，称为[ZfcUser-BjyAuthorize-Bridge](https://github.com/darkmatus/roleuserbridge)

还设法使模块与角色一起工作，只是一次又一次地放松 BjyAuthorisation 文档。

[我在这里](https://github.com/patrioticcow/Zend-Project)在 github 上建立了一个测试环境，它几乎可以作为所有这些模块的起点。

注意：这个模块将会改变，因为它对我来说更像是一个游乐场

# linux - 什么是内存映射页和匿名页？

> ID：13024087
> 
> 赞同：36
> 
> 时间：2012-10-23T05:27:31.167
> 
> 标签：linux, memory-management, linux-kernel

我无法理解 linux 中的内存映射页面和匿名页面。有人可以用一个例子来解释吗？与它们相关的内核数据结构是什么？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-04-01T23:07:50.773

正确的术语是内存映射*文件*和匿名映射。当提到内存映射时，通常是指 mmap(2)。使用 mmap 有 2 个类别。一类是 SHARED 与 PRIVATE 映射。另一类是 FILE 与 ANONYMOUS 映射。混合在一起，您将获得以下 4 种组合：

1.  私人文件映射
2.  共享文件映射
3.  私人匿名映射
4.  共享匿名映射

文件映射指定磁盘上的一个文件，该文件将有 N 个字节映射到内存中。函数 mmap(2) 将要映射到内存的文件的文件描述符作为其第四个参数。第 5 个参数是要读入的字节数，作为偏移量。使用 mmap 创建内存映射文件的典型过程如下

1.  open(2) 文件以获取文件描述符。
2.  fstat(2) 从文件描述符数据结构中获取文件大小。
3.  mmap(2) 使用从 open(2) 返回的文件描述符的文件。
4.  close(2) 文件描述符。
5.  对内存映射文件做任何事情。

当文件被映射为 PRIVATE 时，所做的更改不会提交到基础文件。它是文件的私有内存副本。当文件被映射为 SHARED 时，所做的更改将由内核自动提交到底层文件。映射为共享的文件可用于所谓的内存映射 I/O 和 IPC。如果您需要文件的持久性，您可以为 IPC 使用内存映射文件而不是共享内存段

如果您使用 strace(1) 观察进程初始化，您会注意到文件的不同部分使用 mmap(2) 作为私有文件映射进行映射。系统库也是如此。

strace(1) 的输出示例，其中 mmap(2) 用于将库映射到进程。

```
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=42238, ...}) = 0
mmap(NULL, 42238, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7ff7ca71e000
close(3)                                = 0
open("/lib64/libc.so.6", O_RDONLY)      = 3
read(3, "\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0p\356\341n8\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1926760, ...}) = 0
mmap(0x386ee00000, 3750152, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x386ee00000 
```

匿名映射不受文件支持。具体来说，当 MAP_ANONYMOUS 标志用作 mmap(2) 的第三个参数时，甚至不使用 mmap(2) 的第四个（文件描述符）和第五个（偏移）参数。使用 MAP_ANONYMOUS 标志的替代方法是使用 /dev/zero 作为文件。

对我来说，“匿名”这个词是一个糟糕的选择，因为它听起来好像文件是匿名映射的。相反，它是匿名的文件，即。没有指定文件。

私有匿名映射在用户空间编程中的使用很少。您可以使用共享匿名映射，以便应用程序可以共享内存区域，但我不知道您为什么不使用 SYSV 或 POSIX 共享内存的原因。

由于使用匿名映射映射的内存保证为零填充，因此对于一些期望/需要零填充内存区域以这种方式使用 mmap(2) 而不是 malloc(2) + memset(2) 的应用程序可能很有用) 组合。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-22T08:49:25.023

据我了解，匿名页面之所以如此命名，是因为它们没有命名的文件系统源，而映射页面是具体文件的映射。例如，您可以在任何用户空间进程中使用简单的 malloc 操作来获取匿名页面...

关于内核结构：显然它是**struct page**，但在匿名页面的情况下，您将有**struct anon_vma**位于 page->mapping 中，而在映射页面的情况下 - **struct address_space**，它与具体的 inode 连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-23T06:53:50.910

我不确定内存映射页面是什么意思？所以我不打算谈论它。

关于匿名页面，通常在内核进行页框回收时提到。匿名页面的实例包括进程的堆栈、堆、共享内存和任何修改后的共享库。在 Linux 中，所有动态共享库都通过系统调用映射到进程的虚拟内存地址空间，如下所示：

```
firo@linux-6qg8:~> strace -e mmap,openat ls 2>&1 |grep -A1 libc.so
openat(AT_FDCWD, "/lib64/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
mmap(NULL, 3906144, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) 
```

属于 MAP_PRIVATEed 文件/库的页面上的任何写入都将触发从文件后端页面到匿名页面的更改。

根据定义，匿名页面，也称为匿名内存，是一种在内核进行页框回收时没有后端设备可以交换的页面。这就是Linux支持交换区的原因。

有两种与匿名页面相关的内核数据结构。

1.  为了回收匿名页面，内核必须知道所有使用匿名页面来更改其 PTE（页表条目）的进程。我们将其称为反向映射或 rmap。

    struct address_space 被共享内存用来维护反向映射。

    struct anon_vma 被其余匿名页面用来维护反向映射。

2.  内核使用 LRU 算法来回收页框。对于内核 5.0+，请检查 struct pglist_data 中的 struct lruvec

# activemq - ActiveMQ monitor

> ID：13024088
> 
> 赞同：1
> 
> 时间：2012-10-23T05:27:47.820
> 
> 标签：activemq, monitor

When using ActiveMQ, some problems troubles me:

1\. When broker crashed or stopped, messages from sender will be lost(I set timeout, because the sender have others to do).
2\. Consumer receives all messages from broker, but how i know the consumer received all messages(zero lost).
3\. If message is lost, i want to know it immediately.

In production, I want to monitor the activemq, and know which message is lost. Can anyone give me a favor?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:09:56.453

您可以实现一个侦听器，一旦您的生产者/消费者与代理失去联系，该侦听器就会被调用。

[http://activemq.apache.org/maven/5.5.0/activemq-core/apidocs/org/apache/activemq/transport/TransportListener.html](http://activemq.apache.org/maven/5.5.0/activemq-core/apidocs/org/apache/activemq/transport/TransportListener.html)

如果消费者崩溃使用显式确认：activemq.apache.org/should-i-use-transactions.html

如果代理崩溃，您可以使用持久消息来避免丢失消息：activemq.apache.org/what-is-the-difference-between-persistent-and-non-persistent-delivery.html

# java - casting object to sql TIMESTAMP throwing java.sql.SQLDataException: ORA-01858

> ID：13024089
> 
> 赞同：0
> 
> 时间：2012-10-23T05:27:52.947
> 
> 标签：java, timestamp, prepared-statement

I have a list of Objects which are set to prepared statement. I have a timestamp value in the list and hence checking the `instanceOf` condition and `preparedStatement.setTimestamp` to set the value, but it is throwing `java.sql.SQLDataException: ORA-01858 a non-numeric character was found where a numeric was expected`. Is the explicit casting a problem ?

My code

```
int count = 1;
for (int j = 0; j < list.size(); j++) {
    logger.info("column: "+count+ " value: "+list.get(j));
    if(list.get(j) instanceof Timestamp) {
          ps.setTimestamp(count,  (Timestamp) list.get(j));     
    } else {
         ps.setObject(count, list.get(j));
    }
    count++; 
```

}

Prepared Statement

```
insert  into OPRS_ZONES(ZONE_ID,ZONE_CODE,ZONE_NAME,PLACE_ID,CORP_ID,CREATED_BY,CREATED_DATE,MODIFIED_BY,MODIFIED_DATE) values(?,?,?,?,?,?,?,?,?) 
```

Values

```
column: 1 value: 03.0
column: 2 value: 'HYDERABAD'
column: 3 value: 'HYDERABAD'
column: 4 value: 05231.0
column: 5 value: 01.0
column: 6 value: 01.0
column: 7 value: 2012-10-19 13:06:39.0
column: 8 value: 00.0
column: 9 value: NULL 
```

Tabel structure to which i need to insert the values

```
CREATE TABLE OPRS_ZONES (
    ZONE_ID             NUMERIC(20,0)
    , ZONE_CODE         VARCHAR2(16)
    , ZONE_NAME         VARCHAR2(255)
    , PLACE_ID          NUMERIC(20,0)
    , CORP_ID           NUMERIC(20,0)
    , CREATED_BY        NUMERIC(20,0)
    , CREATED_DATE      DATE
    , MODIFIED_BY       NUMERIC(20,0)
    , MODIFIED_DATE     DATE
  ); 
```

Any inputs are appreciated

Thanks

# ruby-on-rails - AngularJS没有听我所有的领域

> ID：13024090
> 
> 赞同：0
> 
> 时间：2012-10-23T05:27:55.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, angularjs

我正在使用带有 Rails 的 AngularJS 并创建未在 AngularJS 范围内注册的动态嵌套表单项。他们被分配了“ng-dirty”类。

我有一个投资者，他有三间房子，在我的 Angular 控制器中，我只分配前 2 间，因为我真的想通过 Rails 设置它们。

```
$ (event) ->
  app = angular.module "investor", []

  app.controller("InvestorCtrl", ["$scope", ($scope) ->
    $scope.houses = [
      { cost: "295000", value: "450000" },
      { cost: "600000", value: "620000"  }    
    ]
    $scope.calc_totals = ->
      # Initialise variables
      cost = 0
      value = 0

      # Go through each house and calculate the total cost
      for h in $scope.houses
        cost = parseInt(cost) + parseInt(h.cost)
        value = parseInt(value) + parseInt(h.value)

      # Set the total
      $scope.total_cost = cost
      $scope.total_value = value  

    # Run the calculation at the start  
    # $scope.calc_totals()
  ])

  angular.bootstrap document, ['investor'] 
```

这是我的表格

```
%div{"ng-controller" => "InvestorCtrl"}
    = form_for(@investor) do |f|
        - if @investor.errors.any?
            #error_explanation
                %h2
                    = pluralize(@investor.errors.count, "error")
                    prohibited this investor from being saved:
                %ul
                    - @investor.errors.full_messages.each do |msg|
                        %li= msg
        .field
            = f.label :name
            = f.text_field :name, "ng-model" => "name"

        - i = 0
        = f.fields_for :houses do |builder|
            .field
                = render :partial => "house", :locals => {:f => builder, :i => i}
                - i = i + 1

        .field
            = f.label :total_cost
            = f.number_field :total_cost, "ng-model" => "total_cost"
        .field
            = f.label :total_value
            = f.number_field :total_value, "ng-model" => "total_value"
        .actions
            = f.submit 
```

如果我输入第一个或第二个房子的“成本”或“价值”，那么它会更新总成本，但如果我更新第三个房子，它不会更新总成本。

有没有办法动态地告诉 angularjs 监听这些元素而不在控制器中分配它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:42:04.227

IMO，您实际上对此有点错误。由于 Angular 可以（并且将会）为您处理重复 HTML 的呈现，因此您不一定*需要*在服务器上进行 HTML 呈现。您从服务器中需要的只是一些 JSON。如果您希望立即渲染它，您只需确保在初始化控制器时正确设置初始值。

将 $http 或定制服务注入您的控制器，并以 JSON 格式直接从服务器中提取您想要的数据，然后将其插入您的范围。如果您的 HTML 和指令设置正确，它只会呈现。从那里所有其他逻辑将是相同的。

网络正在向前发展。向前，我的意思是你过去在服务器上做的所有 HTML 渲染工作实际上开始越来越多地在客户端上完成。您过去用来在 Web 服务器上获取数据的那个服务层呢？那么它现在*是*你的网络服务器。

我知道这不是您问题的直接答案，但它将大大简化您尝试做的事情。否则你有一个平衡的行为要执行，这会很快让人抓狂。

# ruby - 类方法中的Ruby实例引用？

> ID：13024091
> 
> 赞同：3
> 
> 时间：2012-10-23T05:27:59.777
> 
> 标签：ruby

我正在尝试从文件中为类实例填充类变量，而我设法弄清楚如何做到这一点的唯一方法是

```
a=Thing.new
File.read("filename.ext").each_line do |arguments| #this will => things like @variable=str\n
eval( "a.instance_eval {" + arguments.chop + "}")   #hence the awkward eval eval chop
end 
```

我发现的唯一问题是，在尝试在类方法中实现这一点（一次为多个实例执行此操作）时，我不知道如何实现这一点：

```
class Thing
attr_accessor :variable

 def self.method
  File.read("filename.ext").each_line do |arguments|
   eval("instance.instance_eval{" + arguments.chop + "}")   #this line
  end
 end
end 
```

即对调用该方法的实例的引用。在这种情况下，self 只是 Thing，那么有什么办法可以做到这一点吗？更相关可能是解决这个问题的更好方法。我昨晚才学了 ruby​​，所以我还没有机会看到一些更巧妙的技巧，因此我的语言成熟度有点新鲜。

就上下文而言，Thing 是游戏中的角色，从保存文件中加载其基本值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:43:25.877

好吧，首先，看看[Marshal](http://www.ruby-doc.org/core-1.9.3/Marshal.html)。它专门用于将数据结构转储为序列化格式并重新加载它们。

说，如果你想坚持你的方向，然后尝试这样的事情：

```
class Thing
  attr_accessor :variable

  def self.method
    File.read("filename.ext").each_line do |arguments|
      ivar, val = arguments.strip.split("=", 2)
      instance.instance_variable_set(ivar, val)
    end
  end
end 
```

[#instance_variable_set](http://apidock.com/ruby/v1_9_3_125/Object/instance_variable_set)允许您...嗯，按名称在对象上设置实例变量。不需要丑陋的评估！

通过演示：

```
class Foo
  attr_accessor :bar
end

foo = Foo.new
foo.instance_variable_set("@bar", "whatzits")
puts foo.bar # => whatzits 
```

# java - 将变量分配给数组无法正常工作（Java）

> ID：13024092
> 
> 赞同：2
> 
> 时间：2012-10-23T05:28:11.017
> 
> 标签：java, arrays

出于某种原因，只有数组中的最终值被赋值......这是为什么呢？

```
public void openFrameScores() {
    int x = 0;
    int y = 0;
    int total = 0;

    for(int i = 0; i < framesToBowl; i++) {
        scores = new int[2][framesToBowl];
        x = (int)(Math.random() * 9);
        if(x == 0) y = (int)(Math.random() * 9);
        else y = (int)(Math.random() * (9 - x));
        scores[0][i] = x;
        scores[1][i] = y;
    }

    for(int i = 0; i < framesToBowl; i++) {
        total = total + scores[0][i] + scores[1][i];
        System.out.println("Frame: " + i + ", ball 1 = " + scores[0][i] +
        ", ball 2 = " + scores[1][i] + ", total score = " + total);
    }

}

------------------------------------------------

Frame: 0, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 1, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 2, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 3, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 4, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 5, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 6, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 7, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 8, ball 1 = 0, ball 2 = 0, total score = 0  
Frame: 9, ball 1 = 6, ball 2 = 1, total score = 7 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:30:49.903

因为在每次迭代中，您都在重新声明数组。

```
for(int i = 0; i < framesToBowl; i++) {
        scores = new int[2][framesToBowl];   // Here!!! 
```

在每次迭代中，您都说 score 收到一个新的、完全归零的向量。这就是为什么你只能看到最后一次迭代的值。

您可以通过在循环之外对分数进行初始化来解决此问题。

```
scores = new int[2][framesToBowl];
for(int i = 0; i < framesToBowl; i++) {
    x = (int)(Math.random() * 9);
    if(x == 0) y = (int)(Math.random() * 9);
    else y = (int)(Math.random() * (9 - x));
    scores[0][i] = x;
    scores[1][i] = y;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:32:03.007

从 for 循环中取出数组初始化。

```
public void openFrameScores() {
    int x = 0;
    int y = 0;
    int total = 0;
scores = new int[2][framesToBowl];
    for(int i = 0; i < framesToBowl; i++) {

        x = (int)(Math.random() * 9);
        if(x == 0) y = (int)(Math.random() * 9);
        else y = (int)(Math.random() * (9 - x));
        scores[0][i] = x;
        scores[1][i] = y;
    }

    for(int i = 0; i < framesToBowl; i++) {
        total = total + scores[0][i] + scores[1][i];
        System.out.println("Frame: " + i + ", ball 1 = " + scores[0][i] +
        ", ball 2 = " + scores[1][i] + ", total score = " + total);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:33:17.717

您在循环开始时重置数组。

分数 = 新 int[2][framesToBowl];

这会不断重置分数数组。因此，当您在底部阅读它时，只会调用它的最后一个实例。

只需在 for 循环之外声明它就可以解决您的问题。

# eclipse - 升级到 Eclipse Juno 后面临性能问题

> ID：13024095
> 
> 赞同：0
> 
> 时间：2012-10-23T05:28:48.500
> 
> 标签：eclipse

在我升级到 Eclipse Juno 之后

```
Eclipse Java EE IDE for Web Developers.
Version: Juno Release
Build id: 20120614-1722 
```

我面临以下问题：

1.  打开 Eclipse 大约需要 5 分钟。
2.  如果我尝试清理一个项目，大约需要 10 分钟。

以下是我设置的参数

```
-vmargs -Xms256m -Xmx1024M -XX:MaxPermSize=512m 
```

我安装了 8GB RAM，并且使用的是 Windows 7。

关于这个问题我能做些什么吗？在此期间，我的系统卡住了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:36:49.670

这是一个[已知问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)。他们最近发布了一个[小更新（4.2.1）](http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)，但许多主要的性能问题尚未解决。如果您通读该票证，您会发现有几件事可以帮助您立即加快速度。

1.  切换到经典主题。*Window > Preferences > General > Appearance > Theme*切换到经典
2.  在同一首选项页面上禁用动画。

我会将您的名字添加到 CC 列表中，您可以随时了解性能的改进。似乎许多性能问题（尤其是 XML 编辑器）要到 4.2.2 才能修复。

# neo4j - 使用带有空列表的 head 函数时如何获取空值

> ID：13024098
> 
> 赞同：2
> 
> 时间：2012-10-23T05:29:03.667
> 
> 标签：neo4j, cypher

我有一个像这样的密码查询。

```
START dep=node:cities(city_code = "JGS"), 
arr=node:cities(city_code = "XMN") 

MATCH dep-[way:BRANCH2BRANCH_AIRWAY*0..1]->()-->arr

RETURN length(way), transfer.city_code,
extract(w in way: w.min_consume_time) AS consumeTime 
```

名为“way”的关系是可选的，因此当关系“way”不存在时，名为“consumeTime”的属性将是一个空列表。

查询结果为：

| 0 | “JGS” | [] |
| 1 | 《深圳》 | [3600] |

当我想使用属性“consumeTime”的头函数时，它返回错误“无效查询：空列表头”。

我怎样才能得到这样的结果？

| 0 | “JGS” | 空 |
| 1 | 《深圳》 | 3600 |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:39:22.193

这对于条件表达式来说是微不足道的，我认为添加到 Cypher 很重要：[https ://github.com/neo4j/community/issues/899](https://github.com/neo4j/community/issues/899)

`reduce`这是一个需要 1.9-SNAPSHOT 的用于您的有点 hacky 的查询：

```
START dep=node:cities(city_code = "JGS"), 
      arr=node:cities(city_code = "XMN") 
MATCH dep-[way:BRANCH2BRANCH_AIRWAY*0..1]->()-->arr
WITH  length(way) as wayLength, 
      transfer.city_code as transferCityCode,
      extract(w in way: w.min_consume_time) AS consumeTime
WITH  wayLength,
      transferCityCode,
      consumeTime,
      // reverse the consumeTime list, so that we can get the head from the end
      reduce(acc=[], x in consumeTime: x + acc) reverseConsumeTime
RETURN wayLength,
       transferCityCode,
       consumeTime,
       // return null if empty, else the end of the list
       reduce(acc=null, x in reverseConsumeTime: x) as headOrNull; 
```

`reverse(coll)`可以使用以下语法来反转集合：或条件表达式以检查空列表，可以相当多地改进此查询 。

# xml - 在 JSP 中运行时创建表单元素

> ID：13024101
> 
> 赞同：1
> 
> 时间：2012-10-23T05:29:28.980
> 
> 标签：xml, forms, jsp, struts2, tiles

您好我正在创建一个应用程序，其中显示的每个用户表单元素可能不同（元素类型、元素数量、表单元素标签、出现顺序：所有这些都可能因用户而异）。

我正在从数据库中获取这些用户偏好。

我希望实现一些技术/工具/方法，以便我可以创建 JSP，以便在运行时从集中式框架向用户显示（我想重用相同的组件来为用户创建 JSP）。

我正在考虑使用 XSLT 进行一些 XML 转换，但不知道该怎么做或者这是否是最好的方法。

有什么建议么？

PS：我正在使用 Struts + Spring 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:51:00.993

如果您想在服务器端执行此操作，那么也许您可以使用`Apache Tiles` [http://tiles.apache.org/](http://tiles.apache.org/)做一些事情。还有一个运行时组合 API [http://tiles.apache.org/2.2/framework/tutorial/advanced/runtime.html](http://tiles.apache.org/2.2/framework/tutorial/advanced/runtime.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:20:24.120

经过足够的研发后，我想出了以下方法。获取 Java 对象中的用户首选项（列表/地图格式）。此对象应包含标签名称、顺序、输入类型、默认值等。然后将此 Java 对象转换为 JSON 对象（使用 GSON、Jackson 等任何库）。

接下来使用 javascript/jquery 在 javascript 中解析这个 JSON 对象，然后解析由此形成的 JSON 对象以创建表单字段（通过迭代 JSON 对象）

# php - 在关联数组中定义索引+元素

> ID：13024103
> 
> 赞同：1
> 
> 时间：2012-10-23T05:29:33.020
> 
> 标签：php, arrays, indexing, associative

为什么下面的代码：

```
if (isset($_GET['trainType']) && isset($_GET['onTime']) && isset($_GET['gotSeat'])) {
    $train[0]['trainType'] = $_GET['trainType'];
    $train[0]['trainType']['onTime'] = $_GET['onTime'];
    $train[0]['trainType']['gotSeat'] = $_GET['gotSeat'];   
    echo '<pre>';
    print_r($train);
    echo '</pre>';
} 
```

返回以下数组：

```
Array
(
    [0] => Array
        (
            [trainType] => tLine
        )

) 
```

我最初认为它会返回更类似于此的内容：

```
Array
(
    [0] => Array
        (
            [trainType] => 'passenger'
            Array =>
                (
                    [onTime] => true
                    [gotSeat] => true
                )

        )

) 
```

关于我应该做什么来实现我想要做的任何指导？我希望我的代码使我想要做的事情变得明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:39:45.363

此行将设置`trainType`为字符串值：

```
$train[0]['trainType'] = 'hello'; 
```

然后这些行实际上将用于字符替换，稍微有点扭曲：

```
$train[0]['trainType']['onTime'] = 'foo';
$train[0]['trainType']['gotSeat'] = 'bar'; 
```

两者都`onTime`将`gotSeat`导致`0`（因为您正在使用字符串）并将第一个字符替换为`f`then `b`。

因此`print_r($train)`返回：

```
(
    [0] => Array
        (
            [trainType] => bello
        )

) 
```

这是我将如何格式化这些数据：

```
// define our list of trains
$train = array();

// create a new train
$new = new stdClass;
$new->type = 'a';
$new->onTime = 'b';
$new->gotSeat = 'c';

// add the new train to our list
$train[] = $new; 
```

结果`print_r($trains)`：

```
Array
(
    [0] => stdClass Object
        (
            [type] => a
            [onTime] => b
            [gotSeat] => c
        )

) 
```

访问这些数据：

```
echo $trains[0]->type; // returns 'a'
echo $trains[0]->onTime; // returns 'b'
echo $trains[0]->gotSeat; // returns 'c' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:07:07.657

您正在隐式设置（或需要）一个 key = 0 for

```
array (
  "onTime" => true,
  "gotSeat" => true
) 
```

所以你必须改为这样做：

```
if (isset($_GET['trainType']) && isset($_GET['onTime']) && isset($_GET['gotSeat'])) {
    $train[0]['trainType'] = $_GET['trainType'];
    $train[0][0]['onTime'] = $_GET['onTime'];
    $train[0][0]['gotSeat'] = $_GET['gotSeat'];
    echo '<pre>';
    print_r($train);
    echo '</pre>';
} 
```

请注意，我所做的只是在您的代码中更改不正确`$train[0]['trainType']['onTime']`的 to `$train[0][0]['trainType']`，对于`gotSeat`.

或者你可以定义一个新的键，可能是这样的：`$train[0]['booking']['onTime'] = ...`

# android - Calling Fragment Activity from a fragment

> ID：13024107
> 
> 赞同：1
> 
> 时间：2012-10-23T05:29:57.567
> 
> 标签：android, android-fragments, android-activity, android-listfragment

I'm initializing three fragments in my `FragmentActivity` that are actually tabs (`TabHost` and `ViewPager`), among those one is a list fragment.

Next I have another fragment activity with three tabs(fragments), Now what I want is on click of the list item of the list fragment, to call another fragment of 2nd fragment activity (which means that now the tabs that should come up are from another fragment activity ), also I want to pass some value from the selected list item to that next fragment. How can I achieve this?

# c++ - 代码块中的 -fpermissive 选项。我在哪里放置“-fpermissive”选项？

> ID：13024111
> 
> 赞同：1
> 
> 时间：2012-10-23T05:30:24.330
> 
> 标签：c++, codeblocks

```
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <math.h> 
```

我需要有关此代码的帮助。我的编译器一直要求我使用 -fpermissive 选项，但我不知道在哪里输入它。我已经粘贴了下面的代码和显示的错误。

```
using namespace std;

int cx = 0, cy = 0;

double x =0, y=0,  r = 5;

int main(){

ofstream myfile;

myfile.open("dingo.txt");

for(int g =0 ; g <= 360; g++)

//find x and y

//Get points of a circle.

x = cx + r * cos(g);

y = cy + r * sin(g);

//This is what pops up below:

//In function int main()':

//Error: name lookup of 'g' changed for ISO 'for' scoping [-fpermissive]

//note: (if you use '-fpermissive' G++ will accept your code)

//where should I enter the required option?

myfile << "X: " << x << "; Y: " << y <<endl;

myfile.close();

return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:37:11.123

`"Other Options"`您可以在`"Settings"`>下添加更多编译器标志`"Compiler"`

![在此处输入图像描述](../Images/58065b7d4bac2832b7b038427f37c518.png)

虽然我认为你应该先修复你的代码。例如，`std::sin`接受`std::cos`弧度，而不是度数。您还需要在`for`语句周围使用大括号。

```
for(int g =0 ; g <= 360; g++) {
    //code here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:41:31.613

*不要*使用`-fpermissive`.

它的意思是“我真的，真的知道我在这里做什么，所以请闭嘴”，从来都不是初学者的好选择。

在这种情况下，“g++ 将接受您的代码”意味着“g++ 不会抱怨您的代码，但错误仍然存​​在，并且您将浪费很多时间来寻找它们，因为编译的代码没有任何警告” .

正确缩进代码会暴露问题：

```
int main(){
    int cx = 0, cy = 0;
    double x = 0, y = 0, r = 5;
    ofstream myfile;
    myfile.open("dingo.txt");
    for(int g = 0 ; g <= 360; g++)
        x = cx + r * cos(g);
    y = cy + r * sin(g);  // <--- Here it is.
    myfile << "X: " << x << "; Y: " << y <<endl;
    myfile.close();
    return 0;
} 
```

很明显，指示的行使用`g`，这是循环变量。
在过去，在 -loop 中声明的变量`for`的范围实际上是封闭循环的范围（`main`在您的情况下是函数）。
这后来被更改，因此循环变量的范围仅限于循环*内部*，但由于有很多遗留代码依赖于旧规则，编译器提供了一种启用过时行为的方法。

你的意图可能是这样的：

```
for(int g = 0; g <= 360; g++)
{
    x = cx + r * cos(g);
    y = cy + r * sin(g);
    myfile << "X: " << x << "; Y: " << y <<endl;
} 
```

（这*也是*错误的，因为使用弧度，`sin`而`cos`不是度数 - 但我将把这个问题留作练习。）

# php - 我如何在 html 页面中使用像这样的小型文本编辑器

> ID：13024117
> 
> 赞同：-5
> 
> 时间：2012-10-23T05:31:27.733
> 
> 标签：php, html, text-editor

我正在寻找像这样的简单漂亮的文本编辑器

![在此处输入图像描述](../Images/07cd19832da1f76b60719831ccbcbf12.png)

在此页面[http://www.quora.com/How-can-you-use-Python-with-Mahout-as-you-can-with-Hadoop-Streaming](http://www.quora.com/How-can-you-use-Python-with-Mahout-as-you-can-with-Hadoop-Streaming)在底部。哪个编辑器是那个。

我不喜欢 tinymce 和它的外观

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:36:15.420

您需要自定义编辑器选项...转到以下链接..希望它对您有所帮助...:)

1.  [http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/)
2.  [http://ckeditor.com/demo](http://ckeditor.com/demo)（点击自定义工具栏）
3.  [http://nicedit.com/demos.php?demo=2](http://nicedit.com/demos.php?demo=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:03:36.437

我个人会推荐这个 YouTube 视频教程（第 1 部分，自己搜索第 2 部分）：[http](http://www.youtube.com/watch?v=SSAQK4Nwkm4) ://www.youtube.com/watch?v=SSAQK4Nwkm4 。它教你如何制作一个所见即所得（所见即所得）的富文本区域。这可能会有所帮助。

只需自己调整样式和东西，就可以得到与上面完全相同的东西。

# javascript - 正则表达式验证多个条件

> ID：13024122
> 
> 赞同：3
> 
> 时间：2012-10-23T05:32:35.930
> 
> 标签：javascript, regex, validation

我需要使用具有多个条件的 javascript 验证字符串。我不确定如何使用正则表达式来做到这一点。

我需要检查字符串是否不包含以下任何条件

**条件 1**：以 18XX 或 1-8XX 或 8XX 开头的任意长度的字符串，其中 X 为 0 到 9 之间的任意数字（包括 0 和 9）。***例如：1800abc、812abc-def、1-805-999-9999***

**条件 2**：以 NXX 或 1NXX 或 1-NXX 开头的字符串后跟不包括连字符的正好七个数字，其中 N 为 2 到 9 之间的任意数字（包括 2 和 9），X 为 0 到 9 之间的任意数字（ 0 和 9 都包含在内）。***例如：12-999-9999、19009998888、1-212---1-2-3-4-5-6-7--***

**条件 3**：以 XXXXX 开头的字符串，其中 X 为 0 到 9 之间的任意数字（包括 0 和 9）。***例如：20176、90210-梅尔罗斯***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:45:44.520

~~你不能有一个单一的正则表达式匹配这一切，~~ *呃也许你可以！见下文*

尝试对每个条件使用这三个，检查所有三个并仅通过那些**不**匹配的。

条件一：`^1?-?8\d{2}.*$`

条件2：**先删除所有连字符**，然后匹配`^1?[2-9]\d{7}$`

条件3：`^\d{5}.*$`

希望这可以帮助

**编辑**

您可能有一个可以匹配此的正则表达式。因为似乎是一个可选字符，让我们先删除它们，但正如*@nnnnn*在评论`-`中指出的那样，让我们​​首先检查字符串是否真的以 a**开头**，如果它确实如此，那么字符串通过验证而无需进一步检查。然后你可以将这三个串在一起形成一个你可以检查的正则表达式***`-``|`***

 ***`^1?8\d{2}.*|1?[2-9]\d{7}|\d{5}.*`

我`-?`从第一部分中删除了，因为我们已经删除了所有的连字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:45:37.797

您可能正在寻找替代方案： [http ://www.regular-expressions.info/alternation.html](http://www.regular-expressions.info/alternation.html)

要匹配数字，您可以使用 digits 类`\d`或仅使用 plain `[0-9]`。

例如，对于条件 1，您可以尝试将其与：

```
 /^18\d\d|1-8\d\d|8\d\d$/.test("1800")  == true
 /^18\d\d|1-8\d\d|8\d\d$/.test("1-800") == true
 /^18\d\d|1-8\d\d|8\d\d$/.test("812")   == true 
```

当然，您可以使用[可选项目](http://www.regular-expressions.info/optional.html)和[组](http://www.regular-expressions.info/atomic.html)来变得聪明，以提出以下内容：

```
 /^(1-?)?8\d\d$/.test("1-800") == true 
```

您可以使用[RegexPal 之](http://regexpal.com/)类的工具来试验正则表达式。我通常只是在 Chrome 开发者工具控制台中使用它。

试着自己弄清楚其余的。:)***

# java - 如何在 Java / MySQL 中实现 Approximate_string_matching（模糊字符串搜索）？

> ID：13024123
> 
> 赞同：1
> 
> 时间：2012-10-23T05:32:39.283
> 
> 标签：java, mysql, search

我正在使用 REST 框架在 Java 中开发 Web 服务。

我使用 MySQL 5.1 数据库作为后端。

我正在我的一张桌子上执行搜索操作，说***停止***使用***类似***模式。

但现在我想为上述搜索执行**“Approximate_string_matching（模糊字符串搜索）”**。考虑例如 23 ST 站，用户可以提供搜索字符串 23rd station, 23rd, 23 station, 23rd ST 等。

对于这个**Approximate_string_matching**算法，我找到了链接**http://en.wikipedia.org/wiki/Approximate_string_matching**

但我不知道如何实现它。

请大家帮我在**Java / MySQL**中实现**Approximate_string_matching 算法**？

 **先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:46:13.690

您可能想要研究的一件事是[Levenshtein 距离算法](http://en.wikipedia.org/wiki/Levenshtein_distance)：

> Levenshtein 距离是用于测量两个序列之间差异的字符串度量。

Apache Commons Lang 有一个现成的实现。您可以使用 [getLevenshteinDistance(CharSequence s, CharSequence t, int threshold)](http://commons.apache.org/lang/api-3.1/index.html)来获取大约等于给定字符串的字符串。阈值会派上用场，这样您就可以丢弃与源单词有*一定*距离的单词，从而避免不必要的计算。

更好的方法是使用MySQL 自身提供的[Levenshtein 函数。](http://www.artfulsoftware.com/infotree/queries.php#552)可以在[此处查看](https://stackoverflow.com/questions/4671378/levenshtein-mysql-php)如何执行的简单示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:24:29.660

根据您的解释，似乎每当任何用户提供搜索字符串为第 23 站、第 23、第 23 站或第 23 ST 时，过滤后的输出应该是“23 ST 站”，对吧？

所以我假设您所有的站点名称都将类似于 XX YY 站点，其中 XX 是一个数值，而 YY 是 ST、VT、MT 等站点的缩写

如果这是正确的，那么您可以实现此目的的一种方法是执行多个过滤器，以便将第一个过滤器的输出输入到下一个过滤器。但在此之前，您需要弄清楚“要过滤什么”？

因此，在这种特殊情况下，“23”似乎是查询字符串开头必须存在的子字符串，因此您需要从查询字符串中提取数字部分（您可以使用 Java 正则表达式）将结果应用为第一个过滤器，所以在这种情况下，它将是：

```
 where stops like '23%' 
```

然后在此结果的输出中，您可以应用下一个过滤器，在这种情况下，下一个过滤器可能是下一个单词的前两个字母（如果存在）并应用其小写以保持一致性，因此在这种情况下它将是 'st '：

```
 where LOWER(stops) like '%st%' 
```

现在，您可以通过在同一查询中应用两个过滤器（尝试使用子查询）在查询部分本身实现这一点，或者您可以引入第一个过滤器的结果集并使用 Java 正则表达式在该结果集上应用剩余的过滤器。**

# java - 我们可以在android中使元素全局化吗

> ID：13024126
> 
> 赞同：0
> 
> 时间：2012-10-23T05:33:04.540
> 
> 标签：java, android, timer

我在用

```
<Chronometer android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/chrono"
        android:visibility="gone" /> 
```

现在在我的一项活动中，我的问题是我能否将其设为全球所有活动，以便我可以向我的 android 应用程序中的每个活动展示它的价值？

如果是，那么如何做到这一点，请举例说明，因为我是 android 新手？

这是我的计时器代码

```
Chronometer stopWatch;

        stopWatch.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener(){
            @Override
            public void onChronometerTick(Chronometer arg0) {
                countUp = (SystemClock.elapsedRealtime() - arg0.getBase()) / 1000;
                long min = countUp / 60;
                long sec = countUp % 60;
                String minStr = "";
                String secStr="";

                if(min < 10)
                {
                    minStr = "0"+min;
                }
                else
                {
                    minStr = ""+min;
                }
                if(sec<10)
                {
                    secStr = "0"+sec;
                }
                else
                {
                    secStr = ""+sec;
                }

                // String asText = (countUp / 60) + ":" + (countUp % 60);
                String asText = minStr + ":" + secStr;
                textGoesHere.setText(asText);
            }
        });
        stopWatch.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:49:11.430

这是一个想法。在所有需要 Chronometer 的布局中为您`Chronometer`和它创建一个单独的布局。`<include />`

现在您可以使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式或存储计时器的**开始时间**、**当前状态**（暂停、运行、停止、重置）等`SharedPreferences`属性。每当您开始一项新活动时，都会获取计时器的状态并将其显示在您的计时器上。

 ****例如，如果当前状态正在运行，那么您可能必须启动一个线程来更新计时器，或者如果计时器停止，只需从您或您的班级获取**开始时间**和**停止时间**并将其显示在计时器上。`SharedPreference``Singleton`

例如，考虑以下场景。为简单起见，让我们有 2 个活动，**ActivityA**和**ActivityB**。

现在这里是您的计时器的一些状态，您的可能会有所不同。

1.  就绪（00:00 - 您的计时器已准备好运行）
2.  正在运行（定时器正在运行）
3.  暂停（定时器已暂停并可恢复）
4.  已停止（您已停止计时器，它会显示经过的时间，下一个可能的状态是 1，即准备就绪。）

您将需要几个其他参数，例如，

1.  计时器开始时间（`System.currentTimeInMillis()`减去这个时间让你过去）
2.  定时器停止时间（用于计算定时器暂停和停止时间）

让我们考虑一下这个案例。您正在从**ActivityA**启动计时器并希望保留**ActivityB**上的状态。以下是您可能想要做的一系列事情。

当您通过任何事件启动计时器时（例如单击按钮），您必须将**开始时间**保存在`SharedPreference`.

现在您要导航到 ActivityB，然后您必须将**计时器状态**保存到您`SharedPreference`的**ActivityA**`onStop()`方法中。

 **现在开始后`ActivityB`，在`onResume()`方法中从 获取开始**时间**`SharedPreference`，`System.currentTimeInMillis()`减去**开始时间**将为您提供经过的时间。**接下来**，您必须从`SharedPreference`.

如果状态是*running*，那么您必须启动一个线程来更新计时器。如果计时器已*停止*，那么在计时器上显示经过的时间就足够了。

这是解决方案的概要。`SharedPreferences`你可以从[这里](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)了解一下。

此外，您需要熟悉 Activity 生命周期，您可以从[这里](http://developer.android.com/training/basics/activity-lifecycle/index.html)学习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:38:08.640

不，你不能。

活动在 Android 中有一个生命周期：它们被创建、启动、显示和执行操作、停止和销毁。并且里面的所有视图都服从这个生命周期。不要与它抗争，Android就是这样，它很棒，学习[这个生命周期](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)。

活动的视图不存在于它之外。这没有任何意义。您应该阅读[如何将信息从一项活动传递到另一项活动](https://stackoverflow.com/questions/3510649/how-to-pass-a-value-from-one-activity-to-another-in-android)。

另外，也许您的问题是：我的所有活动如何在其布局中具有相同的视图，每个活动都有自己的视图实例。在这种情况下，请使用[include xml 关键字](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T05:56:42.933

是的，你可以做到这一点，但不能让它全球化。这有点棘手。

您要做的是： - 在每个活动中使用标记制作 choronometer xml 声明。- 在基类中访问此计时器。

就像一个例子：我在每个活动中都需要标题，但我只想在一个地方进行编码。所以我要做的是：

```
/**
 * Method to init Header components sets header bar title and header bar
 * buttons. This method sets onClickListener to
 */
private void initHeader() throws InvalidHeaderTitleException {
    try {
        View headerView = findViewById(R.id.header_layout);
        if (headerView != null) {
            headerTextView = (TextView) headerView
                    .findViewById(R.id.layout_header_textview_header);
            nextHeaderButton = (Button) headerView
                    .findViewById(R.id.layout_header_button_next);
            prevHeaderButton = (Button) headerView
                    .findViewById(R.id.layout_header_button_previous);
            if (headerTextView != null) {
                String title = getHeaderText();
                if (isValidString(title)) {
                    if (title.length() > IDryIceUIConstants.LENGTH_HEADER_TEXT)
                        title = title.substring(0,
                                IDryIceUIConstants.LENGTH_HEADER_TEXT)
                                + IDryIceUIConstants.SUFFIX_HEADER_TEXT;
                    headerTextView.setText(title);
                } else {
                    throw new InvalidHeaderTitleException(title);
                }
            }

            if (nextHeaderButton != null) {
                nextHeaderButton.setVisibility(getVisibility());
                nextHeaderButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        headerNextButtonClicked();
                    }
                });
            }

            if (prevHeaderButton != null) {
                prevHeaderButton.setVisibility(getVisibility());
                prevHeaderButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        headerPrevButtonClicked();
                    }
                });
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

每个活动 xml 中的 xml 声明是

```
<include
        android:id="@+id/header_layout"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        layout="@layout/layout_header" /> 
```******

# mercurial - Mercurial：仅结合修订版 1 和 4

> ID：13024139
> 
> 赞同：0
> 
> 时间：2012-10-23T05:34:43.240
> 
> 标签：mercurial, merge, collapse

假设我有一个本地克隆`test`，我正在研究它。test 有 5 个变更集，如下所示（4 个是最新的变更集）：

```
Test:
0 -- 1 -- 2 -- 3 -- 4 
```

Q1。我如何将变更集 4 与变更集 1 合并/折叠/组合（我不希望包含 2 和 3 的差异）所以它看起来像这样（3 是合并的 1 和 4）

```
Test:
0 -- 1 -- 2 -- 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:25:10.400

1.  没有 MQ：[Histedit](http://mercurial.selenic.com/wiki/HisteditExtension)扩展
2.  使用 MQ 扩展：[编辑历史](http://mercurial.selenic.com/wiki/EditingHistory)

附加阅读：[连接变更集](http://mercurial.selenic.com/wiki/ConcatenatingChangesets)，[折叠扩展](http://mercurial.selenic.com/wiki/CollapseExtension)

PS：我更喜欢使用纯 MQ 方式

# image-processing - 人脸认证

> ID：13024141
> 
> 赞同：0
> 
> 时间：2012-10-23T05:34:46.213
> 
> 标签：image-processing, machine-learning, artificial-intelligence, computer-vision, face-recognition

**我的项目是人脸认证。**

***系统描述：***我的输入只有一张图像（这是用户第一次登录时拍摄的），并且只要用户登录到应用程序，使用该图像系统就应该进行身份验证。认证图像可能与第一个输入图像不同——不同的照明条件、与相机的不同距离以及 -10 到 10 度的姿势变化。所有情况下使用的相机都是相同的（例如：ipad）。

> 1) 每次用户登录时都会存储认证图像。**如何利用这些图像来提高系统的准确性？**
> 
> 2）当有新图像出现时，我需要从图像存储库中选择最近的图像（而不是所有存储的图像）并用于身份验证以减少时间。**如何根据照度/距相机的距离自动标记图像？**
> 
> 3）我应该如何让我的系统在照明和与相机距离的变化方面表现得体面？

拜托，任何人都可以为我的上述问题建议我好的 alogirthm/papers/opensource-codes 吗？

虽然这听起来像是一个研究项目，但如果我能得到任何人的回应，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:58:34.017

对于这项任务，我认为您应该看看[OpenCV](http://opencv.org/)的[人脸识别 API](http://opencv.willowgarage.com/wiki/FaceRecognition)。API 基本上能够识别人脸的结构（当然在某些限制范围内），并为您提供人脸可用的图像坐标。

在我看来，只需要处理面部就可以减少处理不同背景颜色的需要，我认为这不是你真正需要的。

获得面部图像后，您可以将其放大/缩小以具有统一的大小，并将图像的颜色更改为灰度。最后，我会考虑将所有这些信息提供给[人工神经网络](http://en.wikipedia.org/wiki/Artificial_neural_network)，因为它们能够处理与输入的不一致。这将允许您在每次用户登录时增加您的知识库。

我很确定还有其他方法可以解决这个问题。我建议您查看[Google Scholar](http://scholar.google.com/)以尝试查找处理此问题的论文，以获取更多信息以及实现您所追求的其他可能的方法。另外，请记住，如果运气好的话，您可能还会发现一些已经完成了您所追求的大部分工作的开源项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:00:11.820

如果你真的有一个人脸照片数据库，你可能会用它来增强 OpenCV 人脸检测的功能。人脸识别的方法是通过将图片的主要成分与 OpenCV 数据库中人脸示例的主要成分进行比较。查看：

[如何创建与 OpenCV 一起使用的 Haar Cascade (xml)？](https://stackoverflow.com/questions/2000816/how-to-create-haar-cascade-xml-for-using-with-opencv)

看到这一点，您还可以尝试对识别出的人脸的每张图片进行自己的主成分分析（为此使用 OpenCV 人脸检测-> 将除人脸之外的所有内容涂黑，OpenCV 会为您提供人脸的位置和大小）。将 PCA 与数据库中的进行比较，并将其与最接近的相匹配。当然，这对于一个相当大的数据库来说效果最好，所以一开始可能会有错误的匹配。

我认为创建自己的 OpenCV haarcascade 将是最好的方法。

祝你好运！

# sql - 从另一个表中选择一个列插入现有列的 SQL 语法

> ID：13024143
> 
> 赞同：-4
> 
> 时间：2012-10-23T05:34:57.873
> 
> 标签：sql, select, insert

如何从sql中的另一个表中选择一个列插入到现有列中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:38:57.960

查询是mysql

```
insert into existing_table (column_name) select column_name from another_table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:36:49.233

你可以试试这个

```
insert into table1 (column) 
values (select column from table2 where condition) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:43:22.043

首先，两列的*架构*应该相同，即如果您尝试从中复制值的列包含 DateTime 值，则目标列也应该接受 DateTime 值。

那么答案就是：

```
insert into targetTable (targetColumn) values ( select sourceColumn from sourceTable where predicate ) 
```

# java - 从 AbstractTableModel 扩展时如何正确填充表中的数据

> ID：13024145
> 
> 赞同：0
> 
> 时间：2012-10-23T05:35:03.487
> 
> 标签：java, swing, jtable, tablemodel

我得到了一个类对象数组（名为：store）。我必须从存储数组中检索一些值，并希望用这些值填充我的 JTable（Object[][] 数据）。我已将此数组传递到一个类中，我计划在其中绘制我的用户界面，其中也包括表格。所以，我的代码看起来像

```
public class Dialog { // Here is where i plan to draw my UI (including the table)
....
    public Dialog(Store store) { // Store = an array of class object.
    .. }

    private class TableModel extends AbstractTableModel {

    private String[] columnNames = {"Selected ",
            "Customer Id ",
            "Customer Name "
    };
    private Object[][] data = {
            //  ???? 
    };
    }
} 
```

现在，我的问题是，如果我想确保我的设计是一个好的设计并遵循 OOP 的原则，那么我应该在哪里从 store 中提取值，以及我应该如何将它传递给 data[][]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:54:28.883

我会创建一个简单`Object`的表示`Store`（你甚至可以使用一个`Properties`对象或`Map`）。这将组成一个单独的行。

然后我会将每个“行”放入一个列表中......

```
protected class TableModel extends AbstractTableModel {

    private String[] columnNames = {"Selected",
            "Customer Id",
            "Customer Name"};

    private List<Map> rowData;

    public TableModel() {
        rowData = new ArrayList<Map>(25);
    }

    public void add(Map data) {
        rowData.add(data);
        fireTableRowsInserted(rowData.size() - 1, rowData.size() - 1);
    }

    public int getRowCount() {
        return rowData.size();
    }

    public int getColumnCount() {
        return columnNames.length;
    }

    public String getColumnName(int column) {
        return columnNames[column];
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        Map row = rowData.get(rowIndex);
        return row.get(getColumnName(columnIndex));
    }
 } 
```

现在，显然，这是一个非常简单的例子，但我希望你明白

# ruby-on-rails - 在 RSpec 中接收 PUT 错误，但不是 POST

> ID：13024146
> 
> 赞同：0
> 
> 时间：2012-10-23T05:35:30.047
> 
> 标签：ruby-on-rails, json, api, rspec

在我的规范中，当我运行下面的 POST 请求时，一切正常。

```
 before do
      request_payload = {
        player: {
          first_name: "Joe",
          last_name: "Carradine",
          team_id: "1"
        }
      }

      post :create, request_payload
    end 
```

但是当我运行 PUT 规范时：

```
 before do
      request_payload = {
        player: {
          first_name: "Buck",
          last_name: "Carradine",
          team_id: "1"
        }
      }

      put :update, id: 3, request_payload
    end 
```

我收到这样的错误：

```
[filename]_spec.rb:139: syntax error, unexpected '\n', expecting tASSOC (SyntaxError)

[filename]_spec.rb:198: syntax error, unexpected $end, expecting keyword_end 
```

有任何想法吗？我不知道 PUT 有不同的语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:47:09.167

要修复语法错误，请使用`put :update, { id: 3 }, request_payload`，而不是`put :update, id: 3, request_payload`。Ruby 仅支持“裸”（例如无花括号）哈希作为方法的最后一个参数，因此`id: 3`不能出现在参数列表的中间而不用花括号括起来。

# java - 将xml文件转换为jrxml文件

> ID：13024147
> 
> 赞同：4
> 
> 时间：2012-10-23T05:35:31.217
> 
> 标签：java, jasper-reports

有没有办法可以将*xml*文件转换为*jrxml*文件？

我正在做一个项目，我需要将*数据库*中的数据写入已经使用所需模板设计的*MS Word文件中。*我已将该文档文件转换为*xml*格式。

我正在使用*iReport*生成生成的 doc 文件。但它需要一个*jrxml*文件。它无法从*xml*文件中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:40:13.713

比吉尔，

JRXML 是一个模板，其中包含报告上显示的内容的格式。

据我了解，xml 包含输入数据。

jasper 报告的工作原理是，您通过编译 JRXML 文件来创建 JASPER 文件（这可以使用 iReport 或通过您的 java 代码完成）。在这个 JASPER 文件中，您将从您的 java 代码中附加一个对象，该对象包含用于填充 JASPER 的数据。

[请查看此链接了解详情](https://stackoverflow.com/questions/1936068/how-to-create-a-dynamic-report-thorough-jrxml)

**已编辑：** `iReport`是用于创建的设计器工具`jasper reports`，我不确定是否有任何工具可以转换`xml`为`jrxml`. `jrxml`将包含有关 jasper 报告的语法。

我们过去所做的是尝试创建一个类似的报告（通过比较外观和感觉），就像一个客户给出的那样使用`iReport`并获得最终的`jrxml`. `jrxml`使用生成的示例报告使用示例 word doc编译`iReport`检查外观

然后直接在应用程序中使用编译好的jasper文件。使用jasper有2个优点，

1.  您可以在报告中使用 Unicode 字符
2.  您可以减少每次在生成报告之前编译代码的开销。

坏处

1.  您需要单独跟踪 jrxml，以修复以前 jasper 文件上的任何缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T08:37:18.423

将您的 MS WORD 文件（模板）保存在**报告目录**中并使用**Apache POI**，对您的模板进行必要的编辑。然后将您的文件保存到您喜欢的任何地方。

Apache POI 教程
[链接 01：](http://www.tutorialspoint.com/apache_poi_word/apache_poi_word_overview.htm)

要打印将您编辑的文件保存在临时目录中并`Desktop.getDesktop().print(file)`使用桌面
[链接 02 调用：](http://www.programcreek.com/java-api-examples/index.php?api=java.awt.Desktop)

祝你好运。

# templates - Resharper 6.0 模板编辑器不再工作

> ID：13024160
> 
> 赞同：2
> 
> 时间：2012-10-23T05:37:35.783
> 
> 标签：templates, editor, resharper

每当我尝试添加新模板或编辑现有模板时，模板编辑器窗口都不会在 Visual Studio 中打开，也没有任何反应。

实时模板、文件模板和环绕模板都会发生这种情况。

导出/导入功能有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:04:42.617

这是一个已知问题：http: [//youtrack.jetbrains.com/issue/RSRP-329433](http://youtrack.jetbrains.com/issue/RSRP-329433)。造成这种情况的原因通常是安装在 VS 中的 TeamCity 插件。请尝试删除所有其他 JetrBrains 插件，然后在 ReSharper 上运行“修复”并检查它是否有帮助。

# r - 如何使“头”自动应用于输出？

> ID：13024167
> 
> 赞同：6
> 
> 时间：2012-10-23T05:38:57.243
> 
> 标签：r

我有一堆大数据框，所以每次我想显示它们时，我都必须使用`head`：

```
head( blahblah(somedata) ) 
```

在最初的几百次之后，打字头总是会变老，所以如果可能的话，我想要一个简单的方法来做到这一点。与 java 相比，R 的一个很酷的事情是，如果你知道秘密咒语，这样的事情通常很容易。

我在选项中搜索，发现`max.print`几乎可以工作，只是现在有时间延迟。

```
head( blahblah(somedata) ) 
```

....是瞬时的（在我的感知范围内）

```
options(max.print=100)
blahblah(somedata) 
```

.... 大约需要 3 秒，比打字要长`head`

`head`打印大型数据结构时 是否有某种方法可以自动应用？

重现此行为的一段代码：

```
long_dataset = data.frame(a = runif(10e5), 
                          b = runif(10e5), 
                          c = runif(10e5))
system.time(head(long_dataset))
options(max.print = 6)
system.time(print(long_dataset)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T11:01:33.057

将我的评论放入答案中，使用`data.table`包（而`data.table`不是`data.frame`对象）将仅自动打印前 5 行和最后 5 行（一旦 data.table 大于 100 行）

```
library(data.table)
DT <- data.table(long_data)
DT

      1: 0.19613138 0.88714284 0.25715067
      2: 0.25405787 0.76544909 0.75632468
      3: 0.24841384 0.22095875 0.52588596
      4: 0.72766161 0.79696771 0.88802759
      5: 0.02448372 0.77885568 0.38199993
     ---                                 
 999996: 0.28230967 0.09410921 0.84420162
 999997: 0.73598931 0.86043537 0.30147089
 999998: 0.86314546 0.90334347 0.08545391
 999999: 0.85507851 0.46621131 0.23892566
1000000: 0.33172155 0.43060483 0.44173400 
```

data.table [FAQ 2.11](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.pdf)明确地处理了这个问题。

* * *

## 编辑以处理`data.frame`您不想转换的现有对象。

如果您在将现有`data.frame`对象转换为`data.table`对象时犹豫不决，您可以简单地定义`print.data.frame`为`data.table:::print.data.table`

```
print.data.frame <- data.table:::print.data.table

long_dataset

      1: 0.19613138 0.88714284 0.25715067
      2: 0.25405787 0.76544909 0.75632468
      3: 0.24841384 0.22095875 0.52588596
      4: 0.72766161 0.79696771 0.88802759
      5: 0.02448372 0.77885568 0.38199993
     ---                                 
 999996: 0.28230967 0.09410921 0.84420162
 999997: 0.73598931 0.86043537 0.30147089
 999998: 0.86314546 0.90334347 0.08545391
 999999: 0.85507851 0.46621131 0.23892566
1000000: 0.33172155 0.43060483 0.44173400 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T00:47:50.767

我会同意@thelatemail 的建议，即重新定义`print.data.frame`：

```
print.data.frame <- function(df) {
   if (nrow(df) > 10) {
      base::print.data.frame(head(df, 5))
      cat("----\n")
      base::print.data.frame(tail(df, 5))
   } else {
      base::print.data.frame(df)
   }
}

data.frame(x=1:100, y=1:100)
#   x y
# 1 1 1
# 2 2 2
# 3 3 3
# 4 4 4
# 5 5 5
# ----
#       x   y
# 96   96  96
# 97   97  97
# 98   98  98
# 99   99  99
# 100 100 100 
```

更精细的版本可以将所有内容排列在一起并避免重复的标题，但你明白了。

您可以将这样的函数放在您的`.Rprofile`or`Rprofile.site`文件中（请参阅 参考资料`?Startup`），这样每次启动 R 会话时它都会出现。

# asp.net - 中继器中的 ASP ImageButton 未触发

> ID：13024170
> 
> 赞同：1
> 
> 时间：2012-10-23T05:39:39.080
> 
> 标签：asp.net, postback, repeater, imagebutton

我有一个包含转发器的用户控件。在这个中继器中有一个 ImageButton，当单击它时应该调用一个展开方法。但是，ImageButton 没有触发任何东西，甚至没有 PostBack。

用户控件上的 AutoEventWireUp 设置为 true。Repeater ItemDataBound 在标记中设置。但即便如此，ImageButton 仍然不会触发任何类型的操作。

根本没有发生射击的原因是什么？

下面是 HTML 标记：

```
<%@ Control Language="vb" AutoEventWireup="true" Codebehind="BiddersGroupList.ascx.vb"
    Inherits="FXWB.BidPackage.BiddersGroupList" TargetSchema="http://schemas.microsoft.com/intellisense/ie5" %>
<%@ Register TagPrefix="fxwb" TagName="GridLabel" Src="~/Secure/Controls/GridLabel.ascx" %>

<telerik:RadCodeBlock ID="rcbScripts" runat="server">
<script>
      function pb(ctrl,FolderId, B, BID, CID)
      {
//        debugger;
        var lblid = ctrl.parentElement.parentElement.cells[7].childNodes[0].id;
        SethdnUpdatedValues(lblid, (B=='WB') ? 'Yes' : 'No');
      NoRefreshRequestProcessor_SendRequest('changeBidStatus:'+B+':'+BID+':'+CID);
      }

      function ir(ctrl,FolderId, BID, CID)
      {
        debugger;
        if(ctrl.checked ==true)
            B = '1';
        else
            B = '0';        
        NoRefreshRequestProcessor_SendRequest('changeAdminIsRceived:'+B+':'+BID+':'+CID);
      }

      function pw(BPID, SUID, FID){
      var BID ='Owner';
      window.open('Bidpackage/ReplyToBid.aspx?BPID='+ BPID + '&SUID='+SUID+'&BID='+BID + '&FID='+ FID + '&a=edit','_blank','height=600,width=800,status=yes,toolbar=no,menubar=no,location=no, scrollbars=yes, resizable = yes');
      }

      function be(BID, BPID,CSI){
      window.open('Bidpackage/EditBidderInfo.aspx?BidderID='+BID+'&BidPackageID='+BPID+'&CSI='+CSI,'bidder_edit','height=550,width=950,status=yes,toolbar=no,menubar=no,location=no, scrollbars=yes, resizable = yes')
      }

      function one(sender,NID,CsiValue,lblid){
      //debugger;
        NoteLabelID=lblid;
      var url = 'Bidpackage/BidderNoteEdit.aspx?NoteID='+escape(NID)+'&CSI='+CsiValue;
      var Top = (screen.availHeight / 2) - 100; //getY(sender) - document.getElementById('FolderBody').scrollTop + 226;
      var Left = (screen.availWidth / 2) - 150; //getX(sender) + 280;
      var params = 'height=200, width=300, location=0, top='+Top+', left='+Left+', status=0, scrollbars=0, toolbar=0';
      var arr=NID.split(':');
      window.open(url,'BDR_NOTE_'+escape(arr[0]),params);
      //window.open(url,'BDR_NOTE_'+escape(NID.replace(':','_')),params);
      //window.open(url,params);
      }

      function SelectAll(chkMain)
      { 
      //debugger;
      var mainchk = chkMain.getAttribute("Division");
        var chk = document.documentElement.getElementsByTagName("input");
        var i;
        for(i=0;i<chk.length; i++)
         {
            if(chk[i].type=='checkbox')
            {
             csiChild = chk[i].getAttribute("Division");
              if (csiChild != null)
              {
               if(csiChild == mainchk)
                        {
                            if(chkMain.checked == true)
                               {
                                    chk[i].checked = true;
                                    SelectCodes(chk[i])
                               }
                                else
                                {
                                    chk[i].checked = false;
                                    SelectCodes(chk[i])
                                }
                        }
              }

            }
            }

      }
       function SelectCodes(chkMain)
      { 
     // debugger;
      var mainchk = chkMain.getAttribute("CSI");
        var chk = document.documentElement.getElementsByTagName("input");
        var i;
        for(i=0;i<chk.length; i++)
         {
            if(chk[i].type=='checkbox')
            {
             csiChild = chk[i].getAttribute("CSI");
              if (csiChild != null)
              {
               if(csiChild == mainchk)
                        {
                            if(chkMain.checked == true)
                               {
                                    chk[i].checked = true;
                               }
                                else
                                {
                                    chk[i].checked = false;
                                }
                        }
              }

            }
            }

      }

function CheckAllBidders(chkMain)
      {
     // debugger;
        var mainCSI = chkMain.getAttribute("CSI");
        var csi;
        var csiChild;
        var bidder;
        var chkChildID;

        var chk = document.documentElement.getElementsByTagName("input");
        var i;
        for(i=0;i<chk.length; i++)
         {
            if(chk[i].type=='checkbox')
            {

//                chkChildID = chk[i].id;
//                s = chkChildID.indexOf(":");
                    csiChild = chk[i].getAttribute("CSI");
                      bidder = chk[i].getAttribute("Bidder");
                    if (csiChild != null && bidder != null)
                    {

                        if(csiChild==mainCSI)
                        {
                       // debugger;
                               if(chkMain.checked == true)
                               {
                                    chk[i].checked = true;
                               }
                                else
                                {
                                    chk[i].checked = false;
                                }
                         }
                    }
            }

         }

      }

var btnReloadExpandedID = '<%=ButtonReloadExpanded.ClientID %>';
var hdnExpandBidderID = '<%=hdnExpandBidder.ClientID %>';

var btnBindBiddingStatus = '<%=ButtonBindBiddingStatus.ClientID %>';
var btnBindNotes = '<%=ButtonBindNotes.ClientID %>';
var hdnNoteCSI = '<%=hdnNoteCSI.ClientID %>';
var hdnCSIId1 = '<%=hdnCSIId1.ClientID %>';
var hdnExpandCSIs = '<%=hdnCSIIs.ClientID %>';
var NoteLabelID;
</script>

<script>
function BindNote(csivalue1,note)
{
//    var ButtonBindNotes1 = document.getElementById(btnBindNotes);
//    var HiddenNotesCSI1 = document.getElementById(hdnNoteCSI);
//    HiddenNotesCSI1.value = csivalue1;
//    ButtonBindNotes1.click();

    document.getElementById(NoteLabelID).innerHTML = note;
    SethdnUpdatedValues(NoteLabelID,note);
}

function SethdnUpdatedValues(id,value)
{
//debugger;
    if (id!=undefined)
    {
        var hdnUpdatedValues = document.getElementById('<%=hdnUpdatedValues.ClientID %>');
        if(hdnUpdatedValues.value!="")
            if(hdnUpdatedValues.value.indexOf(id) !=-1)
            {
                var st = hdnUpdatedValues.value.indexOf(id);
                var end = hdnUpdatedValues.value.indexOf("|~|",st);
                var valToReplace = hdnUpdatedValues.value.substring(st,end);
                var valReplaceBy = id + "=" + value;
                hdnUpdatedValues.value = hdnUpdatedValues.value.replace(valToReplace, valReplaceBy);
            }
            else
                hdnUpdatedValues.value = hdnUpdatedValues.value + id + '=' + value + '|~|';
         else
            hdnUpdatedValues.value = id + '=' + value + '|~|';
   }
}

function SetUpdatedValues()
{
//debugger;
    try
    {
        var hdnUpdatedValues = document.getElementById('<%=hdnUpdatedValues.ClientID %>');

        if (hdnUpdatedValues.value != "")
        {
            var values = hdnUpdatedValues.value.split('|~|');
            var ctrlValue;
            var i;
            for(i=0; i<values.length-1;i++)
            {
                ctrlValue = values[i].split('=');
                document.getElementById(ctrlValue[0]).innerHTML = ctrlValue[1];
            }
        }
    }
    catch(ex)
    {
    }
}

</script>
</telerik:RadCodeBlock>

<asp:UpdateProgress ID="UpdateProgress1" runat="server" DynamicLayout="true">
    <ProgressTemplate>
        <div style="background-color: White; position: absolute; z-index: 10; left: expression((this.offsetParent.clientWidth/2)-(this.clientWidth/2)+this.offsetParent.scrollLeft);
            top: expression((this.offsetParent.clientHeight/2)-(this.clientHeight/2)+this.offsetParent.scrollTop);">
            <img src="../Images/LoadingIcon.gif" height="80" width="150" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>
<asp:UpdatePanel ID="UpdatePannel1" runat="server">
    <ContentTemplate>
        <%--<script type="text/javascript" language=javascript>
    function ShowData()
{
        var trValues = document.getElementById('<%=trRptrDivision.ClientID %>');
        trValues.style.visibility="visible";
}
    </script>--%>
        <asp:HiddenField ID="hdnUpdatedValues" runat="server" />

        <script language="javascript">
            Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
            function EndRequestHandler(sender, args)
            {

                SetUpdatedValues();
            } 
        </script>

        <asp:Label ID="lblTestStatus" runat="server"></asp:Label>
        <input type="button" id="ButtonReloadExpanded" runat="server" style="display: none;"
            value="Reload Expanded" />
        <input type="button" id="ButtonBindBiddingStatus" runat="server" style="display: none;"
            value="Bind BiddingStatus" />
        <input type="button" id="ButtonBindNotes" runat="server" style="display: none;" value="Bind Notes" />
        <asp:HiddenField ID="hdnExpandBidder" runat="server" />
        <asp:HiddenField ID="hdnNoteCSI" runat="server" />
        <asp:HiddenField ID="hdnCSIId1" runat="server" />
        <asp:HiddenField ID="hdnCSIIs" runat="server" />
        <table border="1" cellpadding="0" cellspacing="0" style="background: skyblue; border-style: solid;
            border-width: 1px; border-color: black;" width="100%" id="tblBiddersList">
            <tr>
                <td colspan="3">
                    <asp:Label ID="lblError" runat="server" Font-Size="8pt" ForeColor="Red" Font-Bold="True"
                        EnableViewState="False" Font-Names="Arial"></asp:Label>
                </td>
            </tr>
            <asp:Repeater ID="rptdivision" runat="server" EnableViewState="true" OnItemDataBound="rptdivision_ItemDataBound">
                <HeaderTemplate>
                    <tr>
                        <td class="MasterHeader">
                            <asp:Button ID="ButtonExpandCollapse" UseSubmitBehavior="false" runat="server" Text="Expand All" CssClass="button"
                                CommandName="ExpandCollapse" />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Divisions
                        </td>
                        <td class="MasterHeader">
                            Divisions Description
                        </td>
                    </tr>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr style="background-color: #66cc99;">
                        <td>
                            <input type="checkbox" id="chkDivision" biddercount='<%#DataBinder.Eval(Container, "DataItem.countBidders")%>'
                                runat="server" onclick="javascript:SelectAll(this);" />
                            <%--  <asp:CheckBox ID="chkDivision" runat="server" onclick="javascript:SelectAll(this);" />--%>
                            <asp:ImageButton runat="server" ID="ImageButton1" CommandName="ExpandDivision" ImageUrl="~/Secure/Images/plus_big.gif" />
                            <asp:Label ID="lbDivisionName" runat="server" Text='<%#DataBinder.Eval(Container, "DataItem.classifier_name")%>'></asp:Label>
                            <%--                            <asp:HiddenField ID="hfcgroup" runat="server" Value='<%#DataBinder.Eval(Container, "DataItem.csigroup")%>' />--%>
                        </td>
                        <td>
                            <asp:Label ID="Label1" runat="server" Text='<%#DataBinder.Eval(Container, "DataItem.classifier_description")%>'></asp:Label>
                        </td>
                    </tr>
                    <tr class="trup" id="trRptrDivision" runat="server" style="background: white;">
                        <td>
                            <asp:Repeater ID="rptrBidPackage" runat="server" OnItemCommand="rptrBidPackage_ItemCommand">
                                <%--<HeaderTemplate>
                    <tr>
                        <td class="MasterHeader">
                            <asp:Button ID="ButtonExpandCollapse" runat="server" Text="Expand All" CssClass="button"
                                CommandName="ExpandCollapse" />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CSI Code
                        </td>
                        <td class="MasterHeader">
                            CSI Description
                        </td>
                    </tr>
                </HeaderTemplate>--%>
                                <ItemTemplate>
                                    <tr class="trup" style="margin: 0px 0px 0px 0px; height: 0%; display: none" id="trMaster"
                                        runat="server">
                                        <td class="tdupMaster">
                                            <asp:ImageButton runat="server" ID="ImageColapseExpand" CommandName="Expand" CommandArgument='<%#DataBinder.Eval(Container, "DataItem.CSIValue")%>'
                                                ImageUrl="~/Secure/Images/plus_big.gif" />
                                            <b>
                                                <input type="checkbox" id="chkCodes" biddercount='<%#DataBinder.Eval(Container, "DataItem.countBidders")%>'
                                                    runat="server" onclick="javascript:SelectCodes(this);" />
                                                <%--   <asp:CheckBox ID="chkCodes" runat="server" onclick="javascript:CheckCodes();" />&nbsp;--%>
                                                <asp:Label ID="LabelCSI" runat="server" Text='<%#DataBinder.Eval(Container, "DataItem.CSIValue")%>'></asp:Label>
                                            </b>
                                        </td>
                                        <td class="tdupMaster">
                                            <em>
                                                <%#DataBinder.Eval(Container, "DataItem.CSIDesc")%>
                                            </em>
                                        </td>
                                    </tr>
                                    <tr class="trup" id="trRptrBidders" runat="server" style="background: white; display: none">
                                        <td colspan="2">
                                            <table border="1" width="100%" cellpadding="1" cellspacing="1" style="background: #eeeeee;">
                                                <asp:Repeater ID="rptrBidders" runat="server" EnableViewState="true" OnItemDataBound="rptrBidders_ItemCreated">
                                                    <HeaderTemplate>
                                                        <tr style="background: #cccccc; color: #205f7d; font-weight: bold; font-size: x-small;"
                                                            class="DetailHeader">
                                                            <td class="DetailHeader" align="right">
                                                                <input type="checkbox" id="chkSelectAll" runat="server" onclick="javascript:CheckAllBidders(this);" />
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Action
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Company name
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Contact
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Phone
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Fax
                                                            </td>
                                                            <td class="DetailHeader">
                                                                Email</td>
                                                            <td class="DetailHeader">
                                                                Will Bid</td>
                                                        </tr>
                                                    </HeaderTemplate>
                                                    <ItemTemplate>
                                                        <tr class="trup" runat="server" id="trBidder">
                                                            <td rowspan="2" style="width: 50px;" id="tdCheckBox" align="right">
                                                                <asp:Label runat="server" ID="lblIsReceived" Text="+" Font-Bold="true" Visible="false"></asp:Label>
                                                                <input type="checkbox" id="chkBidder" runat="server" />
                                                                <input type="hidden" runat="server" id="hdnFaxStatus" value='<%#DataBinder.Eval(Container, "DataItem.FaxStatus")%>' />
                                                                <input type="hidden" runat="server" id="hdnIsReceived" value='<%#DataBinder.Eval(Container, "DataItem.IsReceived")%>' />
                                                            </td>
                                                            <td rowspan="2" style="width: 0%;">
                                                                <img style="margin: 0px;" onclick="pw('<%#DataBinder.Eval(Container, "DataItem.BidpackageID")%>','<%#DataBinder.Eval(Container, "DataItem.SiteUserID")%>','<%#DataBinder.Eval(Container, "DataItem.FolderID")%>');"
                                                                    src="Images/tool_preview.gif" alt="View"></img><img style="margin: 0px;" src="Images/BidPackage/tool_bidder_edit.gif"
                                                                        alt="Edit Bidder Info" onclick="be('<%#DataBinder.Eval(Container, "DataItem.BidderID")%>','<%#DataBinder.Eval(Container, "DataItem.BidpackageID")%>','<%#DataBinder.Eval(Container, "DataItem.CSIs!2!CSI")%>')"></img><img
                                                                            style="margin: 0px;" src="Images/BidPackage/tool_approve_f2.gif" alt="Will Bid"
                                                                            onclick="pb(this,'<%#DataBinder.Eval(Container, "DataItem.FolderID")%>','WB','<%#DataBinder.Eval(Container, "DataItem.BidderID")%>','<%#DataBinder.Eval(Container, "DataItem.CsiID")%>');"></img><img
                                                                                style="margin: 0px;" src="Images/BidPackage/tool_decline_f2.gif" alt="Will Not Bid"
                                                                                onclick="pb(this,'<%#DataBinder.Eval(Container, "DataItem.FolderID")%>','NB','<%#DataBinder.Eval(Container, "DataItem.BidderID")%>','<%#DataBinder.Eval(Container, "DataItem.CsiID")%>');"></img><asp:CheckBox
                                                                                    ID="chkIsReceived" ToolTip="Admin IsReceived" runat="server" FolderID='<%#DataBinder.Eval(Container, "DataItem.FolderID")%>'
                                                                                    Checked='<%#DataBinder.Eval(Container, "DataItem.AdminIsReceived")%>' />
                                                            </td>
                                                            <td class="fn">
                                                                <input type="hidden" runat="server" id="hdnBidder" value='<%#DataBinder.Eval(Container, "DataItem.BidderID")%>' />
                                                                <input type="hidden" runat="server" id="hdnCsiID" value='<%#DataBinder.Eval(Container, "DataItem.CsiID")%>' />
                                                                <%#DataBinder.Eval(Container, "DataItem.Organization")%>
                                                            </td>
                                                            <td class="fn">
                                                                <%#DataBinder.Eval(Container, "DataItem.FullName")%>
                                                            </td>
                                                            <td class="fn">
                                                                <nobr>
                                                <%#DataBinder.Eval(Container, "DataItem.Phone")%>
                                                </nobr>
                                                            </td>
                                                            <td class="fn">
                                                                <nobr>
                                                <%#DataBinder.Eval(Container, "DataItem.Fax")%>
                                                </nobr>
                                                            </td>
                                                            <td class="fn">
                                                                <nobr>
                                                <%#DataBinder.Eval(Container, "DataItem.EMail")%>
                                                </nobr>
                                                            </td>
                                                            <td class="fn">
                                                                <asp:Label ID="lblWillBid" runat="server">
                                                <%#DataBinder.Eval(Container, "DataItem.WillBid")%>
                                                                </asp:Label>
                                                            </td>
                                                        </tr>
                                                        <tr id="trBidderNote">
                                                            <td colspan="6" style="font-size: xx-small; background-color: #FEFEFE; padding: 0px;">
                                                                <span id="spanBidderNote" runat="server" class="Note">Note:</span>&#160;
                                                                <input type="hidden" runat="server" id="hdnBidderNoteID" value='<%#DataBinder.Eval(Container, "DataItem.BidderNoteID")%>' />
                                                                <div style="height: 100%; width: 210px; border: solid 0px gray; display: inline;"
                                                                    id="note">
                                                                    <asp:Label ID="lblBidderNote" runat="server">
                                                    <%#DataBinder.Eval(Container, "DataItem.BidderNote")%>
                                                                    </asp:Label>
                                                                </div>
                                                                &#160;&#160;&#160;
                                                                <%#DataBinder.Eval(Container, "DataItem.Qualifications")%>
                                                            </td>
                                                        </tr>
                                                    </ItemTemplate>
                                                </asp:Repeater>
                                                <%--                                <asp:GridView ID="GridViewBidders" runat="server" EnableViewState="true" Visible="false">
                                </asp:GridView>--%>
                                            </table>
                                        </td>
                                    </tr>
                                </ItemTemplate>
                            </asp:Repeater>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
        </table>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:46:49.000

您的中继器位于更新面板内，因此请使用异步类型的触发器，如下所示：

```
<Triggers>
        <asp:AsyncPostBackTrigger ControlID="imagebtn" EventName="CLICK" />
    </Triggers> 
```

并对中继器的代码进行一些更改...

```
<asp:ImageButton runat="server" ID="ImageColapseExpand" onclick="ImageColapseExpand_Click" CommandArgument='<%#DataBinder.Eval(Container, "DataItem.CSIValue")%>'
                                            ImageUrl="~/Secure/Images/plus_big.gif" />
                                        <b> 
```

在后面的代码中创建一个点击事件，如下所示：

```
protected void ImageColapseExpand_Click(object sender, ImageClickEventArgs e)
{

} 
```

希望这对你有用......

# java - 我无法使用 Spring AOP 调用建议的方法

> ID：13024177
> 
> 赞同：0
> 
> 时间：2012-10-23T05:40:08.637
> 
> 标签：java, spring, aop, spring-aop

如何从之前的建议中调用建议的方法？我正在使用 Spring 3.0.5 和 XML 配置。

我写了以下代码：

```
public interface Arithmatic {

    public int add(int a,int b);//Advised method
    public int sub(int a,int b);//Advised method
}

public class ArithmaticImpl implements Arithmatic {

   public int add(int a,int b){
       return (a+b); 
   }

   public int sub(int a,int b){
      return (a-b); 
   }
} 
```

我的 AOP 课程是

```
public class ValidateNumber{
   public validateNumber(int a,int b){

   if (a<0||b<0)  {
       // how can show validation message?
   } else {
       //how can i call Advised methods?
   }

 } 
```

}

配置文件是

```
<aop:config>
    <aop:aspect ref="validatenumber">
    <aop:before pointcut="execution(* com.arithematic.Arithmatic.add(int,int)) and args(a,b)" method="add" arg-names="a,b"/>
    </aop:aspect>
 </aop:config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:34:49.390

下面是我尝试测试 spring AOP 的示例。

**SpringConfig.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.0.xsd
                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
                           ">

<bean id="beanPostProcessor" class="springTest.SpringBeanPostProcessor" />
<bean id="contestPostProcessor" class="springTest.SpringPostProcessor" />

<bean id="emp" class="springTest.Employee">
    <property name="id" value="1"/>
    <property name="name" value="sunil"/>
</bean>

<bean id="loginCheckAspect" class="springTest.Aspect" init-method="initAspect"/>

<bean id="msg" class="springTest.LoadMessages" >
    <property name="id" value="1" />
</bean>

<aop:config>
    <aop:pointcut id="login" expression="execution(* *.showMsg*(..))"/>

<aop:aspect id="loginAspect" ref="loginCheckAspect" >
        <aop:before method="checkLogin" pointcut-ref="login" />
    </aop:aspect>

</aop:config>

</beans> 
```

**LoadMessages.class**

```
package springTest;

public class LoadMessages {
    int id; 
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public LoadMessages() {
    }

    public void showMsg(){
        System.out.println("#################################################");
        System.out.println("Welcome neel");
        System.out.println();
    }

    public void getInfo(){
        System.out.println("#################################################");
        System.out.println("Welcome neel");
        System.out.println();
    }

} 
```

**方面.java**

```
package springTest;
import java.io.DataInputStream;
import java.io.IOException;

public class Aspect {
    public void checkLogin() throws IOException{
        DataInputStream ds=new DataInputStream(System.in);
        //BufferedInputStream bf=new BufferedInputStream(System.in);
        System.out.println("\n\n** Credential Check Point using AOP login aspect ** ");
        System.out.print("Please login to view employee details");
        System.out.print("\nUser Name : ");
        String userName=ds.readLine();
        String pass;
        if(userName!=null && userName.equals("neel")){
            System.out.print("Password : ");
            pass=ds.readLine();
            if(pass!=null && pass.equals("77")){
                System.out.println();
            }else{
                throw new IOException("Invalid Password");
            }

        }else{
            throw new IOException("Invalid User Name");
        }
    }

    public void initAspect(){
        //System.out.println("@@@@@@  Init method of aspect  @@@@@");
    }

} 
```

**SpringBeanPostProcessor.java**

```
package springTest;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;

public class SpringBeanPostProcessor implements BeanPostProcessor {

    public Object postProcessAfterInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println("Initialization Completes "+arg1);
        return arg0;
    }

    public Object postProcessBeforeInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println("Initialization....");
        return arg0;
    }

} 
```

**SpringPostProcessor.java**

```
package springTest;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanFactoryPostProcessor;
import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;

public class SpringPostProcessor implements BeanFactoryPostProcessor {

    public void postProcessBeanFactory(ConfigurableListableBeanFactory arg0)
            throws BeansException {
        System.out.println("Initialization Context Succssefull.");
    }

} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:49:55.347

为什么不先尝试更简单的方法：

```
<aop:config>
    <aop:pointcut id="mypointcut" expression="execution(* com.arithematic.*.*(..))" />
    <aop:advisor advice-ref="validatenumber" pointcut-ref="mypointcut" />
</aop:config> 
```

完成这项工作，然后继续进行更高级的切入点并匹配 AspectJ 表达式。

（另外：您在类中将“算术”拼写为“算术”，在包名称中拼写为“算术” - 确保这些在 XML 和代码之间实际匹配，以排除导致方面无法工作的简单拼写错误:-)

干杯，

# java - 如何动态更改 TimePickerDialog 的时间格式？

> ID：13024179
> 
> 赞同：1
> 
> 时间：2012-10-23T05:40:26.690
> 
> 标签：java, android

我有一个按钮，单击 TimePickerDialog 的时间格式应从 12 小时更改为 24 小时，反之亦然。

我知道我必须使用 onPrepareDialog()，但是如何更改 onPrepareDialog 中的时间格式？任何帮助表示赞赏！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:15:28.270

终于做了一个工作来实现这一点！而不是使用 onPrepareDialog()，

我使用了一个变量来跟踪时间应该以 24 小时还是 12 小时格式显示。

```
 Boolean is24HoursSet; 
```

当用户选择 24 小时时将设置为 true，否则设置为 false。

我添加了 2 个常量

```
 TIME_IN_12_HOURS //and
    TIME_IN_24_HOURS 
```

12 小时和 24 小时格式。

在触摸监听器中，它调用 showDialog()。

```
 //checks the variable, and calls according showdialog.
    if(is24HoursSet)
    {
        showDialog(START_TIME_24);
    }
    else 
    {
        showDialog(START_TIME_12);
    } 
```

在 onCreateDialog() 的切换案例中通过为 TimePickerDialog 创建新对象来处理，将 true 或 false 作为构造函数的最后一个参数，它打开具有相应时间格式的 timpicker。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:06:47.870

是不是你要找的：

```
setIs24HourView(Boolean is24HourView); 
```

[文档](http://developer.android.com/reference/android/widget/TimePicker.html#setIs24HourView%28java.lang.Boolean%29)

# ruby-on-rails - Sinatra 作为 Rails 应用程序或 padrino 或任何混合解决方案的后端 (API)？

> ID：13024180
> 
> 赞同：0
> 
> 时间：2012-10-23T05:40:48.160
> 
> 标签：ruby-on-rails, ruby, sinatra, padrino

在 Sinatra for Rails 应用程序中构建后端 API 是个好主意吗？还是使用Padrino更好？我想让我的后端提供 API 作为服务，因此，如果我必须为任何客户端开发相同的应用程序，我可以随时使用该后端 API（Web 服务）。最好的方法是什么？我的目标是将后端公开为 Web 服务，甚至 Rails 也将其用于 webapp。不同方法的缺点或优点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:32:02.207

虽然我不会在这里展示任何代码，但以下是我想建议的几件事。

> 在 Sinatra for Rails 应用程序中构建后端 API 是个好主意吗？还是使用Padrino更好？

如果您的应用程序要与 DB 和其他类似方面对话，我建议使用 Padrino。帕德里诺将为您节省时间。使用 Sinatra，您最终将围绕它配置堆栈。Padrino 在生成器和助手方面提供了很大的灵活性，允许您挑选堆栈并开发您的应用程序。

> 我想让我的后端提供 API 作为服务，因此，如果我必须为任何客户端开发相同的应用程序，我可以随时使用该后端 API（Web 服务）。

我不能谈论 SOAP，因为我还没有研究过它。如今，REST 更受欢迎。[您可以考虑使用Grape](https://github.com/intridea/grape)之类的东西，而不是直接使用 Sinatra 或 Padrino 来绘制路线图。

引自 Grape Doc

***Grape 是 Ruby 的类似 REST 的 API 微框架。它旨在通过提供简单的 DSL 来轻松开发 RESTful API 来在 Rack 上运行或补充现有的 Web 应用程序框架，例如 Rails 和 Sinatra。它内置了对常见约定的支持，包括多种格式、子域/前缀限制、内容协商、版本控制等等。***

> 最好的方法是什么？

这是一个非常开放的问题。最好取决于很多因素。

> 我的目标是将后端公开为 Web 服务，甚至 Rails 也将其用于 webapp。不同方法的缺点或优点是什么？

当然，如果 API 将被除您的 Web 应用程序之外的其他应用程序使用，那么这具有显着的优势。例如移动应用程序。

我看到的缺点是网络延迟和网络健谈。

但是，如果有大量的卷，这应该会很好。如果您计划在多个实例上扩展应用程序，您可能需要在编写应用程序时考虑一些事情。例如会话管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:58:07.890

将后端作为服务是一种很好的方法，因为它可以更好地解耦代码。我认为，是使用 Sinatra 还是 Padrino，更多地取决于后端应该处理多少管理任务。

如果后端是 API-only，那么 Sinatra 和一些 API gem（例如[RABL](https://github.com/nesquena/rabl/wiki/Setup-for-Sinatra)）可能是最简单的。

但是，如果您希望后端使用它自己的管理任务界面（甚至对于不应该在前端可用的紧急工作），那么具有相同 gem 的 Padrino 可能是更好的方法，因为它处理更多复杂的网络应用程序。

**编辑：** RABL 与 Sinatra 纯 JSON 输出的示例：

让我们以 RABL README 中的简单示例为例。要获得如下输出：

```
[{  "post" :
  {
    "id" : 5, title: "...", subject: "...",
    "user" : { full_name : "..." },
    "read" : true
  }
}] 
```

你需要把它放在 Sinatra 中：

```
get '/' do
  posts = # find some posts somewhere
  user =  # detect current user
  json posts.map do |post|
    { post:
      {
        id: post.id,
        title: post.title,
        subject: post.subject,
        user: post.user.full_name
        read: post.read_by?(user)
      }
    }
  end
end 
```

但是 RABL 更具声明性，因此，您只需编写：

```
get '/' do
  @posts = # find some posts
  @user  = # detect current user
end

# app/views/posts/index.rabl
collection @posts
attributes :id, :title, :subject
child(:user) { attributes :full_name }
node(:read) { |post| post.read_by?(@user) } 
```

我倾向于认为纯 JSON 输出很快就会失控，但是使用 RABL，您可以使用部分和继承来分解 JSON，**并**使其**更**易于维护。

# php - 如何从 cgridview 获取复选框值？

> ID：13024184
> 
> 赞同：3
> 
> 时间：2012-10-23T05:41:16.163
> 
> 标签：php, checkbox, yii, cgridview

问：如何从 cgridview 中获取复选框值？

状态：我使用 CJuiDialog 在弹出框中创建 cgridview。但我无法从网格视图中获取复选框的值。我收到 500 错误。

这是我打开弹出框的视图

```
<div style="height:50px;">      
        <?php $imghtml=CHtml::image(Yii::app()->request->baseUrl.'/images/assets/approver.png','', array('style'=>'margin: 5px 0;')); ?>
            <?php echo CHtml::ajaxLink(
        Yii::t('accrecei',$imghtml),
        $this->createUrl('implementer/Approverlist', array('id'=>$model->id)),
        array(
                'onclick'=>'$("#accreceilist").dialog("open"); return false;',
                'update'=>'#reviewerlist'                   
                                        ),
        array(
                'id'=>'showaccreceilist',
                'class'=>'btn btn-info', 
                'title'=>'Add/Remove reviewer',
                'style'=>'width:25px; float:right; margin-button:20px;',)
                                        );?>
                <div id="reviewerlist"></div>
        </div> 
```

这是弹出框

```
<?php 
$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
                'id'=>'reviewerlist',
                'options'=>array(
                    'title'=>Yii::t('accrecei','Reviewer List'),
                    'autoOpen'=>true,
                    'modal'=>'true',
                    'width'=>'750',
                    'height'=>'500',

                ),

                ));
//echo $this->renderPartial('_listing', array('model'=>$model, 'acccategory'=>$acccategory,'job'=>$job)); ?>

<?php $this->renderPartial('_listing',array('model' => $model,'arr_reviewer' => $arr_reviewer, 'current_reviewers'=> $current_reviewers),false,true); ?>
<?php $this->endWidget('zii.widgets.jui.CJuiDialog');?> 
```

这是网格视图“_listing.php”

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'job-form',
    'enableAjaxValidation'=>true,
)); ?>

<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'acc-recei-grid',
    'dataProvider'=>$model->search_reviewerlist(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'class' => 'CCheckBoxColumn',
            'selectableRows' => 2,
            'checkBoxHtmlOptions' => array(
                'name' => 'userids[]',
            ),
            'value'=>'$data->id',
            //'checked'=>'(in_array($data->id, $current_reviewers) ? 1 : ""',
                'checked'=>function($data, $row) use ($current_reviewers){
                return in_array($data->id, $current_reviewers);
                }

         ),
        'username',
        array(
            'type'=>'raw',
            'value'=>'$data->id',
            //'filter'=>array('style'=>'visible:none'), 
            //'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'user-id'),  
            //'header'=>false,
            //'filter'=>false,
        ),

    ),
)); ?>

 <div align="center">
        <?php echo CHtml::ajaxSubmitButton(Yii::t('reviewer','Update'),Yii::app()->createUrl('implementer/updatereviewer',array('id'=>$model->id)),array('success'=>'js: function(data) {

                        $("#reviewerlist").dialog("close");
                    }'),array('id'=>'closeJobDialog')); ?>

    </div>

<?php $this->endWidget(); ?> 
```

这是我获取复选框值的控制器功能

```
public function actionUpdatereviewer()
    {
        var_dump($_POST['userids']);
        echo 'debug';
        echo $_GET['id'];
        die;    

    } 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:56:10.397

我自己弄的

这是我的看法

```
<div style="height:50px;">      
        <?php $imghtml=CHtml::image(Yii::app()->request->baseUrl.'/images/assets/approver.png','', array('style'=>'margin: 5px 0;')); ?>
            <?php echo CHtml::ajaxLink(
                    Yii::t('customer_id',$imghtml),
                    $this->createUrl('implementer/approverlist', array('id'=>$model->id)),
                    array(
                        'onclick'=>'$("#reviewerlist").dialog("open"); return false;',
                        'update'=>'#reviewerlist'
                        ),
                    array('id'=>'reviewer-link',
                          'class'=>'btn btn-info',
                          'title'=>'Add/Remove reviewer',
                          'style'=>'width:25px; float:right; margin-button:20px;',)
                    );?>
                <div id="reviewerlist"></div>
        </div> 
```

这是 _list.php （从弹出框呈现为我的问题）

```
 <?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'job-form',
    'enableAjaxValidation'=>true,
)); ?>

<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'acc-recei-grid',
    'dataProvider'=>$model->search_reviewerlist(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'class' => 'CCheckBoxColumn',
            'selectableRows' => 2,
            'checkBoxHtmlOptions' => array(
                'name' => 'userids[]',
            ),
            'value'=>'$data->id',           
            'checked'=>function($data, $row) use ($current_reviewers){
                return in_array($data->id, $current_reviewers);
            }               
         ),
        'username',

    ),
)); ?>

 <div align="center">
        <?php echo CHtml::ajaxSubmitButton(Yii::t('reviewer','Update'),Yii::app()->createUrl('implementer/updatereviewer',array('id'=>$model->id)),array('success'=>'js: function(data) {

                        $("#reviewerlist").dialog("close");
                    }'),array('id'=>'closeJobDialog')); ?>
    </div>
<?php $this->endWidget(); ?> 
```

这是我的控制器

```
public function actionApproverlist($id)
    {
        $users = new Users('reviewerlist');
        //$users->scenario = "reviewerlist";
        $users->unsetAttributes();  // clear any default values

        if(isset($_GET['Users']))
            $users->attributes=$_GET['Users'];

        $model                = $this->loadModel($id);
        $arr_reviewer         = Users::model()->get_reviewers();

        $current_reviewers    = explode( ',', $model->reviewers );
        $reviewer_lastcomment = Yii::app()->generals->last_comment($model, $current_reviewers);

        $this->renderPartial('listing',array('model' => $users, 'arr_reviewer' => $arr_reviewer, 'current_reviewers'=> $current_reviewers),false,true);

    }

    public function actionUpdatereviewer()
    {
        var_dump($_POST['userids']);

    } 
```

在你的 firebug->network 中检查 $_POST['userids']。您将看到 $_POST['userids'] 的值。

和 yii 一起跳舞吧。加油！！！

# hadoop - 从维基百科加载 30000 个文档

> ID：13024185
> 
> 赞同：1
> 
> 时间：2012-10-23T05:41:28.093
> 
> 标签：hadoop, wiki, hdfs, mediawiki-api

我有一个 wikipedia url，我想使用 wiki API 从该页面和其他引用的页面加载最多 30000 个文档的内容，我可以遍历 url 并这样做，但这不是一种有效的方式。有没有其他方法可以实现这一点。我需要这个来在 hadoop 中填充我的 HDFS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:00:35.493

有几种方法可以解决这个问题。[Toolserver](https://wiki.toolserver.org/view/Main_Page)用户可以直接访问所有元数据，但不能访问文本。如果这适合您，您也许可以[要求其中一个](https://jira.toolserver.org/browse/DBQ)通过[查询服务](https://wiki.toolserver.org/view/Query_service)运行查询。这是一种非常直接的方法，可以找出链接了哪些页面等，并构建页面 id 或修订版 id 的映射。

否则，请查看非常适合批量工作的[数据库转储，但最终需要进行一些处理。](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download#English-language_Wikipedia)

最后，维基百科习惯于大量的机器人和[API](http://en.wikipedia.org/w/api.php)抓取。这并不理想，但如果没有其他适合您的情况，则运行一个计时器，每秒启动一次新查询，您将在 8 小时内完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:57:14.967

您可以下载 wikimedia 软件和数据库图像，设置 wikipedia 并在本地访问它。这已经很好地描述了，并且应该比通过网络请求该数量的页面更有效。见：[http ://www.igeek.co.za/2009/10/16/how-to-mirror-wikipedia/](http://www.igeek.co.za/2009/10/16/how-to-mirror-wikipedia/)

还有许多其他来源和预处理页面。问题来了，您打算在下一步中对内容做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:02:43.687

正如 Jeff 和 NilsB 所说，你有一个错误的意图来爬取维基百科来填充你的 HDFS。正确的做法是将整个 wiki 下载为单个文件并将其加载到 HDFS。

但是，如果我们从您问题中的一些细节中抽象出来，它将转化为更笼统的：**如何使用 Hadoop 抓取一些由 url 指定的站点？**

所以答案是您应该将带有 url 的文件上传到 hdfs，编写一个映射器（接受 url，下载页面并将其生成为`key=url`and `value=page's body`）并配置一个作业以使用[NLineInputFormat](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/NLineInputFormat.html)来控制每个映射器的 url 计数过程。通过控制该参数，您将能够通过自身和映射槽计数来控制并行度。

# ios6 - 关于UIRefreshControl IOS6.0如何更改默认下拉箭头

> ID：13024186
> 
> 赞同：2
> 
> 时间：2012-10-23T05:41:29.360
> 
> 标签：ios6, uirefreshcontrol

```
self.refreshControl.tintColor = [UIColor blueColor];//this just only change it color 
```

我可以将下拉箭头更改为某些图片或其他形状吗？如何？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:12:33.933

没有。您只能更改箭头的颜色，但不能更改箭头本身。如果您希望能够这样做，请[提交增强请求](https://bugreport.apple.com)，我们会予以考虑。

当然，您也可以自己编写一个，或使用开源变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T21:19:04.280

隐藏的 API 版本（在我的实际代码中，maskImage 是 UIImage 上的一个类别）。不知道苹果会不会拒绝。

```
static UIImage *maskImage(UIImage *image, UIColor *color) {
    UIImage *retval;
    CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);
    UIGraphicsBeginImageContextWithOptions(image.size, NO, image.scale);
    [color set];
    CGContextFillRect(UIGraphicsGetCurrentContext(), rect);
    [image drawAtPoint:CGPointZero blendMode:kCGBlendModeDestinationIn alpha:1];//
    retval = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return retval;
}

@protocol UIRefreshHacking <NSObject>
-(UIImageView*)arrow;
@end

@interface UIRefreshControl (GetAtContentView)
-(UIView<UIRefreshHacking>*)_contentView;
@end

@implementation UIRefreshControl (ChangeArrowColor)
-(BOOL)setArrowColor:(UIColor *)arrowColor {
    if(![self respondsToSelector:@selector(_contentView)]) {
        return NO;
    }
    UIView<UIRefreshHacking> *cv = [self _contentView];
    if(![cv respondsToSelector:@selector(arrow)]) {
        return NO;
    }
    UIImageView *iv = [cv arrow];
    iv.image = maskImage(iv.image, arrowColor);
    return YES;
}
@end 
```

# android - 可扩展的列表视图片段

> ID：13024191
> 
> 赞同：2
> 
> 时间：2012-10-23T05:42:04.583
> 
> 标签：android, android-fragments, android-actionbar, expandablelistview, android-listfragment

我有两个使用 tabhost 的选项卡。一个具有活动的选项卡扩展了 ExpandableListActivity。它工作正常。现在我想使用操作栏来添加布局。但它因为tabhost而崩溃。所以我想到了将操作栏用于选项卡。我想将可扩展列表活动添加到操作栏的选项卡中。但它没有添加为选项卡。

所以我在这里有两个问题。

1.  我们不能在actinbar 的选项卡中使用活动吗？
2.  如果没有，那么片段中是否有任何可扩展列表视图的实现。
3.  或者我可以同时拥有 tabhost 和 actionbar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:44:31.920

我得到了这个问题的替代方案。问题2的解决方案。由于片段没有像ExpandableListFragment这样的实现，所以我们可以在布局文件中声明expandlistview，这样就不需要扩展ExpandableList类。我仍在寻找问题1的答案。

# cuda - CUDA 最佳内存访问布局：全局内存合并和共享内存库冲突

> ID：13024204
> 
> 赞同：2
> 
> 时间：2012-10-23T05:44:19.810
> 
> 标签：cuda

我对 CUDA 中最方便的全局和共享内存访问布局有一些疑问。

**全球记忆**

1) 以下内存地址`(0,0)`, `(0,1)`,`(1,0)`和`(1,1)`在 CPU 内存和 GPU 内存中是如何排列的？换句话说，它们的存储顺序是什么？

2) 哪个是行索引，哪个是列索引`(m, n)`？

3) 全局内存合并是通过以列主要顺序还是行主要顺序访问元素来实现的？

**共享内存**

1) 银行冲突如何产生或不产生？请使用示例/案例告诉我。

2) 配置共享内存和 L1 的命令是`64K`什么？该命令在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-14T21:35:08.457

上面的评论已经回答了您的大部分问题。我只想提供一些对您和一般来说对下一个用户有用的规则，这些规则涉及*合并的内存访问*、共享内存库冲突的一些示例以及*避免共享内存库冲突*的一些规则。

**合并的内存访问**

*一维数组 - 一维线程网格*

```
gmem[blockDim.x * blockIdx.x + threadIdx.x] 
```

*2D 数组 - 2D 线程网格*

```
int x = blockIdx.x * blockDim.x + threadIdx.x;
int y = blockIdx.y * blockDim.y + threadIdx.y;
int elementPitch = blockDim.x * gridDim.x;
gmem[y][x] or gmem[y * elementPitch + x] 
```

**共享内存库冲突**

为了实现高带宽，共享内存被分成*独立的bank*。通过这种方式，共享内存可以为线程同时访问提供服务。每个流式多处理器 (SM) 都在`32`内存库中组织了共享内存。每个存储体具有每两个时钟周期的位带宽，`32`并承载四个字节（`32`位）的字：连续`32`位字地址分配给连续的存储体。

当两个不同的线程访问同一个 bank 中的*不同*字时，就会发生*bank 冲突。*银行冲突会对性能产生不利影响，因为它们强制硬件对共享内存的访问进行序列化。请注意，如果不同的线程访问同一个字中的任何字节，则不会发生冲突。另请注意，属于不同 warp 的线程之间没有银行冲突。

 **快速访问*

*   如果一个warp的所有线程都访问不同的bank，则不存在bank冲突；
*   如果一个 warp 的所有线程都访问相同的地址以进行 fetch 操作，则不存在 bank 冲突（广播）。

*访问速度慢*

*   `32`线程访问`32`同一个bank中的不同单词，使得所有的访问都被序列化；
*   一般来说，访问共享内存的成本与同时访问单个bank的最大数量成正比。

*示例 1*

```
smem[4]:   accesses bank #4  (physically, the fifth one – first row)

smem[31]:  accesses bank #31 (physically, the last one  – first row)

smem[50]:  accesses bank #18 (physically, the 19th one  – second row)

smem[128]: accesses bank #0  (physically, the first one – fifth row)

smem[178]: accesses bank #18 (physically, the 19th one  – sixth row) 
```

如果 warp 访问中的第三个线程和 warp 访问`myShMem[50]`中的八个线程`myShMem[178]`，那么您将发生双向银行冲突，并且两个事务被序列化。

*示例 2*

考虑以下类型的访问

```
__shared__ float smem[256];
smem[b + s * threadIdx.x] 
```

要在同一个warp的两个线程之间发生bank冲突`t1`，`t2`必须满足以下条件

```
b + s * t2 = b + s * t1 + 32 * k, with k positive integer
0 <= t2 - t1 < 32 
```

上面的意思

```
32 * k = s * (t2 - t1)
0 <= t2 - t1 < 32 
```

这两个条件都不成立，即没有银行冲突，如果`s`是奇数。

*示例 3*

从*示例 2*中，以下访问

```
smem[b + threadIdx.x] 
```

`smem`如果是`32`-bits 数据类型，则不会导致冲突。但是也

```
extern __shared__ char smem[];
foo = smem[baseIndex + threadIdx.x]; 
```

和

```
extern __shared__ short smem[];
foo = smem[baseIndex + threadIdx.x]; 
```

不会导致银行冲突，因为访问了一个字节/线程，因此访问了同一个字的*不同*字节。*

# asp.net - 在 asp.net 中仅发布已编辑的页面

> ID：13024207
> 
> 赞同：1
> 
> 时间：2012-10-23T05:44:37.607
> 
> 标签：asp.net, upload, publish

每当我更新我网站的一小部分时，我都必须再次上传整个网站。如果我只上传编辑过的部分，它会抛出异常。

**我上传网站的方式：** 例如，如果我有 4 个页面（主页、注册、关于我、联系我），如果我更新 home.aspx，我将整个网站发布到本地地址，然后用`zip`格式和压缩它手动上传。

是否可以只发布更新的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:52:20.467

不可能只发布网站的一部分，但是您可以做的是选择**`Single-File Assembly`**构建选项，这样您就可以为您的页面获取单个程序集。因此，除了更新整个应用程序，您可以只更新您更改的页面 [阅读更多](http://msdn.microsoft.com/en-us/library/z38d5bzk.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:00:37.257

我在发布 ASP.Net Webform 项目时总是做的，我用两个步骤来完成它。也许这种方式适合你。

1.  当您通过选择 Build menu -> Publish 在 Visual Studio 上使用发布工具时，您可以选择“File System”作为“Publish Method”，键入您的“Target Location”，然后选择“Replace matching files with local copies”。这意味着该项目将仅发布修改后的文件。

2.  发布完成后，使用 Windows 浏览打开定义的“目标位置”并按“修改日期”排序，然后将每个目录的更新修改文件递归复制到您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:20:11.660

1.  如果您将网站页面构建成 dll。你不能只发布aspx。bin文件夹中还有很多其他的dll和编译文件，我们不知道哪个匹配哪个aspx。

2.  如果您只编辑了“视图”，我的意思是，<%%> 代码的 html 和标记部分，而 (.aspx.cs) 后面的代码没有更改，您只能发布这个 aspx。但请记住在发布对话框中将网站设置为可更新。

我建议你把aspx编译成一个dll。根据@Buzz 的回答。然后，您的 aspx 文件将只是一个空文件。您只需将一个 dll 上传到 bin 文件夹即可。

# ffmpeg - 打开输入流的解码器时出现FFMPEG错误

> ID：13024211
> 
> 赞同：1
> 
> 时间：2012-10-23T05:45:20.667
> 
> 标签：ffmpeg

虽然这个命令已经工作了几个月，但在通过我的 php 应用程序编码视频时，我突然开始遇到以下错误。在命令行上测试编码参数产生了相同的结果，而我本地机器上的 ffmpeg 版本读取输入没有问题

我使用的命令：

```
ffmpeg -i clip_20121022150813.mp4 -acodec libfaac -ab 44100 encoded.mp4 
```

和输出（最后一行的错误）：

```
ffmpeg version N-45871-g34ccb94 Copyright (c) 2000-2012 the FFmpeg developers
  built on Oct 22 2012 22:20:53 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-52)
  configuration: --enable-gpl --enable-libmp3lame --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libfaac --enable-nonfree
  libavutil      51\. 77.100 / 51\. 77.100
  libavcodec     54\. 68.100 / 54\. 68.100
  libavformat    54\. 34.100 / 54\. 34.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 20.104 /  3\. 20.104
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
  libpostproc    52\.  1.100 / 52\.  1.100
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'clip_20121022150813.mp4':
  Metadata:
    major_brand     : qt  
    minor_version   : 0
    compatible_brands: qt  
    creation_time   : 2012-10-22 22:08:02
  Duration: 00:00:03.80, start: 0.000000, bitrate: 3259 kb/s
    Stream #0:0(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 480x640, 2593 kb/s, 18.73 fps, 29.97 tbr, 600 tbn, 1200 tbc
    Metadata:
      creation_time   : 2012-10-22 22:08:02
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Audio: pcm_s16le (lpcm / 0x6D63706C), 44100 Hz, mono, s16, 705 kb/s
    Metadata:
      creation_time   : 2012-10-22 22:08:02
      handler_name    : Core Media Data Handler
File 'encoded.mp4' already exists. Overwrite ? [y/N] y
using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2
[libx264 @ 0x104fa4e0] profile High, level 3.0
[libx264 @ 0x104fa4e0] 264 - core 128 r2216 198a7ea - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=24 lookahead_threads=4 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'encoded.mp4':
  Metadata:
    major_brand     : qt  
    minor_version   : 0
    compatible_brands: qt  
    Stream #0:0(und): Video: h264, yuv420p, 480x640, q=-1--1, 90k tbn, 29.97 tbc
    Metadata:
      creation_time   : 2012-10-22 22:08:02
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Audio: aac, 44100 Hz, mono, s16, 44 kb/s
    Metadata:
      creation_time   : 2012-10-22 22:08:02
      handler_name    : Core Media Data Handler
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
  Stream #0:1 -> #0:1 (pcm_s16le -> libfaac)
Error while opening decoder for input stream #0:0 
```

我已经卸载了 ffmpeg，从源代码重新编译，还重新编译了 x264 和许多其他库，但是这个错误仍然存​​在。无论如何我可以找到更多关于究竟是什么失败？

# xml - xslt 显示总和的前 5

> ID：13024217
> 
> 赞同：2
> 
> 时间：2012-10-23T05:46:25.337
> 
> 标签：xml, xslt, xpath

长期读者，第一次在这里发布海报。我通常能够从网站上的其他帖子中获得相当多的信息，但我找不到这个特定问题的解决方案。使用 xslt，我目前能够显示每个客户发票的小计，然后通过将另一个变量添加`$grandtotal`到我下面的 xslt 模板并`$sum`在循环的每次迭代中添加到它来显示这些发票的总计。

我现在需要做的是找到前 5 名最高的总发票。

这是我的 XML 的缩短版本：

```
<bits>
    <client type="Commercial">
    <clientid>1</clientid>
            <inv>
            <invno>1</invno>
                <product>
                    <productid>321</productid>
                    <productprice>99.00</productprice>
                    <totalqty>2</totalqty>
                </product>
                <product>
                    <productid>333</productid>
                    <productprice>299.00</productprice>
                    <totalqty>1</totalqty>
            </product>
        </inv>
            <inv>
            <invno>2</invno>
                <product>
                    <productid>321</productid>
                    <productprice>99.00</productprice>
                    <totalqty>2</totalqty>
                </product>
                <product>
                    <productid>333</productid>
                    <productprice>299.00</productprice>
                    <totalqty>2</totalqty>
            </product>
        </inv>
    </client>
    <client type="Government">
        <clientid>2</clientid>
        <inv>
            <invno>3</invno>
            <product>
                <productid>399</productid>
                <productprice>1469.00</productprice>
                <totalqty>1</totalqty>
                </product>
            <product>
                <productid>354</productid>
                <productprice>15.00</productprice>
                <totalqty>1</totalqty>
            </product>
                <product>
                <productid>311</productid>
                <productprice>58.00</productprice>
                <totalqty>1</totalqty>
            </product>
                <product>
                    <productid>341</productid>
                    <productprice>199.00</productprice>
                    <totalqty>1</totalqty>
                </product>
        </inv>
    </client>
</bits> 
```

我已使用以下代码对每个客户的发票总额求和：

```
<xsl:for-each select="//client">
    <xsl:call-template name="sum">
        <xsl:with-param name="nodes" select="inv/product"/>
    </xsl:call-template>
</xsl:for-each>

<xsl:template name="sum">
<xsl:param name="nodes" />
<xsl:param name="sum" select="0" />
<xsl:variable name="current" select="$nodes[1]" />
<xsl:if test="$current">
  <xsl:call-template name="sum">
    <xsl:with-param name="nodes" select="$nodes[position() &gt; 1]" />
    <xsl:with-param name="sum" select="$sum + $current/totalqty * $current/productprice" />
  </xsl:call-template>
</xsl:if>
<xsl:if test="not($current)">
  <xsl:value-of select="$sum" />
</xsl:if> 
```

我想做的是重用这段代码来显示5个最高的总和发票及其对应的`<clientid>`，`type`例如：

前5：

1.  Clientid：2，发票编号：3，发票总额：1741 美元，类型：政府
2.  Clientid：1，发票编号：2，发票总额：796 美元，类型：商业
3.  Clientid：1，发票编号：1，发票总额：497 美元，类型：商业

过去我使用 for 循环`<xsl:for-each select=...>` `<xsl:sort select="Total" data-type="number" order="descending"/>` ...`<xsl:if test="position()&lt;6">` 显示前 5 名，但这是查看存储值。我将需要另一个解决方案。

在这一点上我需要一些提示，因为我对标记还是很陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:36:51.390

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="xsl exsl">
<xsl:output method="html" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="/*">
  <table>
    <th><td>Client id</td><td>Invoice no</td><td>Invoice total</td>
        <td>Type</td></th>
    <xsl:variable name="rows">
      <xsl:apply-templates select="client/inv" />
    </xsl:variable>
    <xsl:for-each select="exsl:node-set($rows)/tr">
      <xsl:sort select="td[4]" data-type="number" order="descending" />
      <xsl:variable name="rank" select="position()" />
      <xsl:copy-of select="self::node()[$rank &lt; 6]" />
    </xsl:for-each>
  </table>
</xsl:template>

<xsl:template match="inv">
  <tr>
    <td><xsl:value-of select="../clientid" /></td>
    <td><xsl:value-of select="invno" /></td>
    <xsl:variable name="gross-prices">
      <xsl:for-each select="product">
        <t><xsl:value-of select="productprice * totalqty" /></t> 
      </xsl:for-each>  
    </xsl:variable>  
    <td><xsl:value-of select="sum( exsl:node-set($gross-prices)/t)" /></td>
    <td><xsl:value-of select="../@type" /></td>
  </tr>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此输入时...**

```
<bits>
    <client type="Commercial">
    <clientid>1</clientid>
            <inv>
            <invno>1</invno>
                <product>
                    <productid>321</productid>
                    <productprice>99.00</productprice>
                    <totalqty>2</totalqty>
                </product>
                <product>
                    <productid>333</productid>
                    <productprice>299.00</productprice>
                    <totalqty>1</totalqty>
            </product>
        </inv>
            <inv>
            <invno>2</invno>
                <product>
                    <productid>321</productid>
                    <productprice>99.00</productprice>
                    <totalqty>2</totalqty>
                </product>
                <product>
                    <productid>333</productid>
                    <productprice>299.00</productprice>
                    <totalqty>2</totalqty>
            </product>
        </inv>
    </client>
    <client type="Government">
        <clientid>2</clientid>
        <inv>
            <invno>3</invno>
            <product>
                <productid>399</productid>
                <productprice>1469.00</productprice>
                <totalqty>1</totalqty>
                </product>
            <product>
                <productid>354</productid>
                <productprice>15.00</productprice>
                <totalqty>1</totalqty>
            </product>
                <product>
                <productid>311</productid>
                <productprice>58.00</productprice>
                <totalqty>1</totalqty>
            </product>
                <product>
                    <productid>341</productid>
                    <productprice>199.00</productprice>
                    <totalqty>1</totalqty>
                </product>
        </inv>
    </client>
</bits> 
```

**...产量...**

```
<table>
  <th>
    <td>Client id</td>
    <td>Invoice no</td>
    <td>Invoice total</td>
    <td>Type</td>
  </th>
  <tr>
    <td>2</td>
    <td>3</td>
    <td>1741</td>
    <td>Government</td>
  </tr>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>796</td>
    <td>Commercial</td>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>497</td>
    <td>Commercial</td>
  </tr>
</table> 
```

## 笔记

只要我们可以访问 node-set()，我们就不需要折叠或分治来计算总和。我们可以简单地使用本机 sum() 函数。

# java - 涉及 PHP 和 Base64 的 BouncyCastle 的“解密中的最后一个块不完整”问题

> ID：13024218
> 
> 赞同：2
> 
> 时间：2012-10-23T05:46:40.760
> 
> 标签：java, php, aes, bouncycastle

我目前正在用 Java 编写一个程序，它将接受来自 PHP 的字符串，并根据需要对它们进行加密或解密。加密机制是 AES-256，我使用 BouncyCastle API 来做。为了确保在来回传输数据时出现更少的问题，我使用 Base64 对字符串进行编码。我遇到的问题是随机的，我不能解密一个字符串——一些字符串可以解密，其他的不能。我在 stackoverflow 上找到了一篇很棒的文章，我认为[这里可以提供帮助。](https://stackoverflow.com/questions/4537099/problem-with-aes-256-between-java-and-php)

但我真的看不出它如何适合我的情况（我不是加密专家）。这是我当前的代码。谢谢你的帮助。

```
class AES {

private final BlockCipher AESCipher = new AESEngine();

private PaddedBufferedBlockCipher pbbc;
private KeyParameter key;

AES()
{
    init();
}

private void init()
{
    try
    {
        KeyGenerator kg = KeyGenerator.getInstance("AES");
        kg.init(256);
        SecretKey sk = kg.generateKey();
        key=new KeyParameter(sk.getEncoded());
        pbbc=new PaddedBufferedBlockCipher(AESCipher, new PKCS7Padding());
    }
    catch (Exception e)
    {
        //Take care of later
    }
}

private byte[] processing(byte[] input, boolean encrypt)
        throws DataLengthException, InvalidCipherTextException {

    pbbc.init(encrypt, key);

    byte[] output = new byte[pbbc.getOutputSize(input.length)];
    int bytesWrittenOut = pbbc.processBytes(
        input, 0, input.length, output, 0);

    pbbc.doFinal(output, bytesWrittenOut);

    return output;

}

private byte[] _encrypt(byte[] input)
        throws DataLengthException, InvalidCipherTextException {
    return processing(input, true);
}

private byte[] _decrypt(byte[] input)
        throws DataLengthException, InvalidCipherTextException {
    return processing(input, false);
}

public String Encrypt(String input)
{
    try
    {
        byte[] ba = input.getBytes("UTF-8");

        byte[] encr = _encrypt(ba);

        byte[] encryptedByteValue = new Base64().encode(encr);

        String encryptedValue = new String(encryptedByteValue);

        return encryptedValue;//+" and decrypted is "+Decrypt(encryptedValue);
    }
    catch (Exception e)
    {
        return "ENCRYPT_ERROR "+e.getMessage();
    }
}

public String Decrypt(String input)
{
    try
    {
        byte[] decodedValue = new Base64().decode(input.getBytes());

        byte[] retr = _decrypt(decodedValue);

        return new String(retr, "UTF-8").replaceAll("\\u0000", "");
    }
    catch (Exception e)
    {
        return "DECRYPT_ERROR "+e.getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:13:01.480

我弄清楚问题出在哪里，它是两个方面的。这就是我最终要做的事情：

1) 我使用 cURL 在 Java 和 PHP 之间传递字符串，并将加密文本编码为 Base64。由于加号在 Base64 中有效并且不由 cURL 处理（至少由旧版本），我会损坏字符串，从而导致错误。我切换到十六进制编码。

2) 我必须从进入 Java 层的字符串中删除回车 (\r\n) 字符。

希望这可以帮助某人。

# c - 增加指向char的指针的左值？

> ID：13024220
> 
> 赞同：1
> 
> 时间：2012-10-23T05:46:50.900
> 
> 标签：c, pointers, char

我的问题很简单：

假设你有这个：

```
char *chrptr = "junk"; 
```

想象当时，`*chrptr`会指向`j`。有没有办法将当前字符`j`增加到下一个字符，在这种情况下是`k`？我不想转到下一个字符，我想增加当前指向的字符。

我是 C 的新手，我尝试过的方法：`(*chrptr)++`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:49:20.943

根据您的编辑，您似乎想要修改字符串，您不能使用常量字符串来执行此操作，实际上您可以，但该行为是未定义的。因此，您需要将定义更改为非常量字符数组：

```
//This initializes a 5 element array including the null byte at the end
char chrptr[] = "junk";
//now you can modify that
chrptr[0]++;
//or equivalently 
chrptr[0] +=1;
chrptr[0] = chrptr[0]+1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:55:09.230

```
char *chrptr = "junk"; 
```

这段代码真的不是很好。像“垃圾”这样的字符串文字是指向只读内存的指针。你不应该修改它们。所以要么说：

```
const char* chrptr = "junk"; // pointer to a const; no modifications 
```

或（在您的情况下）：

```
char chrArray[] = "junk"; 
```

这会在堆栈上创建一个 5 元素的字符数组，用“垃圾”（加上空终止符）对其进行初始化。现在您可以随意修改它：

```
chrArray[0] ++;
(*chrArray) ++; 
```

* * *

*（一些剩余的评论）*

> 我是 c 新手，但 (*chrptr)++ 之类的东西不起作用。

它们*确实*有效，但不同。让我总结一下：

*   `chrptr`是指向字符的指针类型的值。
*   `*chrptr`是 char 类型的值，因为指针已被取消引用。

这两个恰好是“左值”（=实际对象），因此您可以修改它们：

*   `++ chrptr`将指针加一（= 将指针前移一个对象）
*   `++ *chrptr`将 char 加一（=`'a'`变为`'b'`）。

（以前，`++*chrptr`因为字符串位于内存的只读部分中，所以对您不起作用。如果您使用`const char*`not指向它`char*`，您会得到一个有用的编译错误，而不是意外的运行时行为。）

* * *

另请注意：

在简单语句的情况下，`++*chrptr;`等价于`(*chrptr)++;`。运算符顺序很重要（取消引用，然后递增）。

OTOH，`*chrptr++`由于[运算符优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)而先递增然后取消引用。如果不确定优先级，请添加括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:49:20.193

您无需使用取消引用运算符再次取消引用指针`*`。

您只需要`chrptr++`在内存中推进字符指针。

**更新**

您可以环绕一个`while`循环来搜索字符。

```
char *chrptr = "junk";
char search = 'k';

while (*chrptr) {
  if (*chrptr == search)
    printf("%c\n", *chrptr);
  chtptr++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T06:10:22.830

看到这个 (*chrptr)++; 工作正常，但这将增加 chrptr 指向的数组的第一个字符。在您的情况下，您正在使用如下语句

> char *chrptr = "垃圾";

这里 chrptr 指向一个 const char 数组，依此类推，使用 (*chrptr)++; 它会增加不反映字符串的变化。

但是，如果您以这种方式使用代码（http://codepad.org/FJMB1ryv）：-

```
#include<iostream>

using namespace std;

int main()
{
char a[]="yogendra";
char *y=a;//(char*)"junk";
(*y)++;
cout<<y<<endl;
return 0;
} 
```

你 (*y)++ 会工作。希望这会对你有所帮助。祝你好运：）

# wcf - WCF服务：如何将访问地址从本地主机更改为真实IP地址

> ID：13024227
> 
> 赞同：1
> 
> 时间：2012-10-23T05:47:15.640
> 
> 标签：wcf, iis, post, localhost

我在 IIS 上托管我的 WCF 服务。

我遵循*使用 POST 的 CREATE RESTful WCF 服务 API的介绍* [http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By](http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By)。

我可以使用 url 访问服务`http://localhost:16043/Service1.svc/PostSampleMethod/New`

但是如果我将 localhost 更改为我的本地 IP 地址，我将无法访问该服务。

如何配置让远程机器使用其 ip 访问我的 WCF 服务？

我在 Web.config 文件中找不到任何可以更改我的 WCF 服务的默认访问 IP 地址和端口的地方。

这是我的 Web.config 文件：

```
<?xml version="1.0"?>
<configuration> 
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WcfService1.Service1" behaviorConfiguration="ServiceBehaviour">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="WcfService1.IService1" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

# c# - 验证另一个字符串之间的字符串？

> ID：13024233
> 
> 赞同：3
> 
> 时间：2012-10-23T05:47:45.687
> 
> 标签：c#, regex, string

我正在开发一个 ASP.NET 应用程序，在执行 SQL 全文搜索查询后，我必须在其中显示文本文档的描述。我必须在该文档的描述中突出显示用户输入搜索字符串。现在的问题是：

如果用户输入**rang**作为输入搜索字符串，那么我必须检查该字符串是另一个单词的一部分还是作为单个单词出现。例如：

1 - **rang**可能单独出现，也可能是某个单词的一部分，即 W* *rang* *ling。

2 -**哭泣**可能单独出现，也可能是 * *weep* *ing 的一部分。

如何验证字符串的这种条件？有可能通过`Regex.Match()`吗？任何帮助都感激不尽。

**注意**：一个单词可能在一个段落中以多种方式出现多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:49:49.390

你可以在正则表达式中做到这一点

```
string word=Regex.Escape("rang");//your word..used regex.escape to escape regex characters if any

Regex rx = new Regex("\b(.*?)"+word+"(.*?)\b", RegexOptions.IgnoreCase);

foreach (Match m in rx.Matches(yourInputText))
{
    if(m.Groups[1]!="" || m.Groups[2]!="")
    {
        //the word is between some words
    }
    else
    {
        //the word occurs separately
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:50:20.297

`SELECT * FROM table WHERE Column LIKE "%rang%";`

在您的 sql 查询中，您可以使用 %rang% 匹配任何类似的内容。

类似上面的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:50:55.347

`LIKE` [可以通过使用运算符](http://www.techonthenet.com/sql/like.php)的 SQL 查询本身来做到这一点。

```
SELECT * FROM <table name> WHERE <column name> LIKE '%rang%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:58:20.600

要确定某个内容是否是字符串中的单词，只需检查它是否由非单词字符分隔。
例如，如果您将一个单词定义为只有字母，请执行以下操作

```
bool ContainsWord(string phrase, string word)
{
   int i = phrase.IndexOf(word); if (i<0) return false;
   return (i==0 || !char.IsLetter(phrase[i-1])) &&
      (i==phrase.Length-word.Length || !char.IsLetter(phrase[i+word.Length]));
} 
```

# mysql - SQL：用不同的where条件查询一个表两次？

> ID：13024237
> 
> 赞同：1
> 
> 时间：2012-10-23T05:48:30.017
> 
> 标签：mysql, sql, join

我现有的查询如下所示：

```
SELECT
       id,
       refid,
       action_id,
       action_type,
       co_user_id,
       cust_vend_id,
       Aes_decrypt(cust_vend_name, '".DBKEY."') AS cust_vend_name,
       Aes_decrypt(amount, '".DBKEY."')         AS amount,
       Aes_decrypt(action_date, '".DBKEY."')    AS action_date,
       Aes_decrypt(memo, '".DBKEY."')           AS memo,
       Aes_decrypt(trans_id, '".DBKEY."')       AS trans_id,
       part_id,
       polarity
FROM   generated_actions
INNER join
        generated_actions.action_id             AS action_id
    ON
        (generated_actions.action
WHERE  acc_type = 2
   AND acc_id = $ba_id
   AND reverse_id IS NULL
ORDER  BY action_id,
          Aes_decrypt(action_date, '".DBKEY."'),
          entry_datetime ; 
```

但是对于它选择的每条记录，我还需要它从一条记录中返回另一列，否则它会被排除在外（因为它的 acc_id 是“1”而不是“2”）。因此，我需要它来查找 acc_id AS 'account'，其中 action_id 与其当前选择的记录相同，part_id = '3'。

该查询将选择多条记录，但它不会为附加条件的每条记录找到匹配项。在这种情况下，它仍应返回主记录，但将 null 作为 'accounts' 的值。

我的替代方法是使用我提供的查询，然后对于每个结果，再次检查同一个表 SELECT acc_id WHERE action_id = $action_id AND part_id = '3'。我认为必须有一种方法可以在一个查询中执行此操作？

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:00:24.807

```
SELECT
  main.id,
  main.refid,
  main.action_id,
  main.action_type,
  main.co_user_id,
  main.cust_vend_id,
  Aes_decrypt(main.cust_vend_name, '".DBKEY."')   AS cust_vend_name,
  Aes_decrypt(main.amount,         '".DBKEY."')   AS amount,
  Aes_decrypt(main.action_date,    '".DBKEY."')   AS action_date,
  Aes_decrypt(main.memo,           '".DBKEY."')   AS memo,
  Aes_decrypt(main.trans_id,       '".DBKEY."')   AS trans_id,
  main.part_id,
  main.polarity,
  other.acc_id                                    AS other_acc_id
FROM
  generated_actions        AS main
LEFT JOIN
  generated_actions        AS other
    ON  other.action_id = main.action_id
    AND other.part_id   = 3
WHERE
      main.acc_type = 2
  AND main.acc_id   = $ba_id
  AND main.reverse_id IS NULL 
ORDER  BY
  main.action_id,
  Aes_decrypt(main.action_date, '".DBKEY."'),
  main.entry_datetime
; 
```

这将表连接到自身。这就像拥有两个单独的表格副本。

因为你有两个副本，每个副本都需要自己的名字。这就是它`AS main`的`AS other`作用，它只是给表的每个引用一个单独的名称。

这`LEFT JOIN`就像一个内部连接，除了它始终保留左侧表中的记录 - 即使它不连接到右侧表中的任何记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:58:19.833

这可以很容易地作为一个[过程](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)来完成，但您也可以只连续执行多个批次。考虑一下，如果您提前知道所需的 Part_ID，请使用[IN 子句](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)。

潜在地，在 IN 子句中填充的子查询中获取您需要的 Part_ID。例如：

```
SELECT /*actual columns*/ *
FROM table
WHERE predicate_column IN (
    SELECT predicate_column
    FROM table
    WHERE known_column = $known_value
) 
```

# perl - 从 CGI 迁移到 mod_perl。了解我的，我们的，本地的

> ID：13024239
> 
> 赞同：6
> 
> 时间：2012-10-23T05:48:35.797
> 
> 标签：perl, scope, mod-perl, mod-perl2

几年来我一直在使用 apache mod_cgi。现在我正在转向 mod_perl，我发现了一些问题，特别是子例程。直到现在我从来没有使用过`my`,`our`也没有`local`; 并且 CGI 脚本可以正常工作。`my`在阅读了文档甚至之前发布的一些问题之后，我或多或少地了解了它是如何工作`our`的`local`。我关心的是下一个请求之间将共享哪些信息（如果我理解正确，这是我在运行 mod_perl 而不是 mod_cgi 时必须关心的主要问题）。

*   `our`在标量中使用或仅在标量中使用而不声明任何特殊内容（例如 ）有什么区别`my`？不是都是全球性的吗？
*   如果我不将标量声明为私有，是否将在下一个请求中共享？即使在同一服务器中另一个不同 perl 脚本的请求中？
*   如何将子例程内的标量值共享到该子例程外部但不在同一文件或同一请求之外？
*   如果我在文件的同一级别或同一子例程`my`中的一个标量中使用 a，然后我在使用相同标量的地方创建另一个；两者或每个之间共享的标量是否意味着不同的块？和，它们是先前声明为标量的不同块还是仅适用于子例程和文件？`if``if``if``if``while``for``my`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T08:27:01.680

*mod_perl*的工作原理是将每个 Perl 脚本包装`handler`在一个基于脚本名称和路径的包内调用的子例程中。这个子例程不是启动一个新进程来运行每个脚本，而是`handler`由许多持久的 Perl 线程中的一个调用。

通常，这些知识将有助于理解*mod_cgi*中的环境变化，但是由于您从未添加`use strict`到程序中并且熟悉声明变量的工作原理，因此您还有很多工作要做！

*mod_perl*环境有可能导致不明显的安全漏洞，您现在应该开始处理`use strict`每个*脚本*并声明*每个*变量。`use Carp`还将帮助您了解错误日志。

声明的变量名`our`是同名包变量的词法范围同义词，可以在不完全限定名称的情况下通过包含包名来使用。例如，通常用 声明的变量`our $var`将提供对`$main::var`标量的访问（如果之前没有`package`声明）而无需指定`main::`. `undef`然而，这些以in *mod_cgi*值开始生命的变量现在将保留它们在任何给定*mod_perl*线程的先前执行中的值，并且为了保持一致性，始终在声明点初始化它们是最安全的。另请注意，默认包名称不再`main`是因为包装了*mod_perl*确实如此，因此您不能再使用`main::`前缀访问包变量，并且找到包的实际名称并明确使用它是不明智的，因为它将是一个*非常*长的名称，并且会在您移动或重命名脚本时发生变化。

`my`变量是独立于包符号表而存在的变量，通常它的生命周期是封闭文件（对于在文件范围内声明的变量）或子例程的运行时间。*如果在脚本的文件范围内或完全在一个子例程中声明和使用它们，它们在mod_perl*中是安全的，但如果您混合范围并`my $global`在文件范围内声明 a 然后尝试在子例程中使用它，您可能会被刺痛。原因并不简单，而是由于*mod_perl*将您的脚本包装在一个`handler`子例程中，因此您有嵌套的子例程声明。内部子例程将倾向于只采用第一个实例化`$global`并忽略由以后调用创建的任何其他`handler`. 如果您需要一个全局变量，您应该使用它声明它`our`并在该声明中初始化它，如上所述。

变量与`local`变量非常相似`our`，因为它是包变量的同义词。但是，它会临时保存该变量的当前值并提供一个新副本以供使用，直到文件或块范围结束。由于它在其范围内自动创建和删除，它可以成为*mod_perl*`my`脚本中变量的有用替代方案，特别是在您使用指向数据结构（例如类的实例）的指针的情况下。声明将正确创建对象，但由于*mod_perl 的*持久性，会将其留在内存中，直到线程的下一次执行将其删除以腾出空间给另一个对象。*`CGI``our $cgi = CGI->new`*

 **至于你的问题：

*   使用变量而不声明它会导致编译时错误，如果`use strict`它应该是适当的。否则，它是当前包命名空间中该变量的同义词。

*   变量要么是包变量，要么是词法变量；没有办法将变量声明为*私有*的。`my`每次执行脚本时都会创建和销毁词法变量*（*用不要做你想做的事。声明为 with 的变量`our`将在调用脚本时保留其值，而声明为 with的变量将`local`在脚本终止时销毁。`our`和变量都是`local`包变量，所有对同一个变量名的引用都指向同一个变量。

*   要声明一个在脚本的任何一次调用中随处可访问的变量，您可以使用`local`变量或初始化`our`变量。在文件范围内`local $global`很大程度上等同`our $global = undef`于*mod_perl*脚本。如果您使用`our`变量指向数据结构，请记住在脚本末尾使用`undef $global`.

*   `my`变量在声明它们的块中是唯一的，并且在其内可见，无论该块是`if`、`while`或内的块`for`，甚至只是一个裸`{ ... }`块范围。始终将`my`变量用于临时工作变量，这些变量仅在块内使用且无法从其他地方访问。

我希望这有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T08:26:18.277

**编辑：**这只是关于 Perl 变量作用域的一般信息。`mod_perl`有关具体问题，请参阅 Borodin 的帖子。

声明的变量[`my`](http://perldoc.perl.org/functions/my.html)是词法的。换句话说，它们只存在于当前范围内。您应该`my`默认声明所有变量；仅当您特别想要不同的功能时才做其他事情。

使用词法范围的变量是（几乎）任何语言中良好代码设计的基本部分。放入所有脚本将要求您遵循此良好实践`use strict;`。`use warnings;`

`our`是一种声明全局变量的方式；底层结果与使用未声明的全局变量非常相似。但是，它有两个不同之处：

1.  您明确声明您希望变量是全局的。这是一个很好的做法，因为使用全局变量应该是一个例外情况。因此，即使`use strict;`.
2.  声明的变量`our`将可以通过您在当前范围内的所有包中声明的名称访问。相比之下，未声明的变量只能通过当前包中的简单名称访问。除此之外，您只能将其称为`$package::variable`.

有关更多详细信息，请参阅[文档`our`](http://perldoc.perl.org/functions/our.html)。

[`local`](http://perldoc.perl.org/functions/local.html)不创建词法变量；相反，它是一种在当前范围内为全局变量赋予临时值的方法。它主要与 Perl 的特殊内置（标点符号）变量一起使用：

```
{
   local $/; #make the record separator undefined in this scope only.
   my $file = <FILE>; #read in an entire file at once.
} 
```

您可以简单地通过`my`始终使用您的变量并`local`仅用于上面所示的特殊情况来走得更远。**

# java - 在html中显示带有base64字符串的图像？

> ID：13024243
> 
> 赞同：2
> 
> 时间：2012-10-23T05:49:08.723
> 
> 标签：java, html, image, base64

这是我从图像构造base64字符串的java代码。然后放置base64 String html，查看构造好的图片，但是图片不是以某种方式构造出来的

```
public void getBase64String() throws FileNotFoundException {
    FileInputStream itStrm = new FileInputStream(
    "E:\\image\\56255254-flower.jpg");//image is lying at http://danny.oz.au/travel/mongolia/p/56255254-flower.jpg
    String str = itStrm.toString();
    byte[] b3 = str.getBytes();
    String base64String = new sun.misc.BASE64Encoder().encode(b3);
    //output of base64String is amF2YS5pby5GaWxlSW5wdXRTdHJlYW1AMTdlMDYwMA==
  } 
```

**现在在 html 页面中，我将 base64String 的输出放在 img 标记中以查看图像。但是图像没有显示（而是显示十字图像图标）。我没有从下面的 base64 字符串中显示图像？**

```
 <HTML>
      <BODY>
           <img    src="data:image/jpeg;base64,amF2YS5pby5GaWxlSW5wdXRTdHJlYW1AMTdlMDYwMA=="/>

     </BODY>
     </HTML> 
```

**编辑：-**谢谢大家，我使用了 byte[] bytes = IOUtils.toByteArray(is);。它对我有用！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T05:52:31.617

这：`String str = itStrm.toString()`不是图像，而是实例的`toString()`表示。`FileInputStream`

您必须从流中读取字节并将它们存储在字节数组中。并且，出于性能原因，缓冲流：

```
BufferedInputStream itStrm = new BufferedInputStream(FileInputStream(
    "E:\\image\\56255254-flower.jpg")); 
```

**进一步阅读（剧透：内部解决方案）**

*   [在 Java 中将 InputStream 转换为字节数组](https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:55:53.563

您需要使用实例的`read()`方法而不是获取图像的内容。然后您就可以对其进行编码，并且应该可以按预期工作。`FileInputStream``toString()`

就像是：

```
int c;
StringBuffer result = new StringBuffer("");
while((c = fileInputStream.read()) != -1)
{
    result .append((char)c);
} 
```

# sql-server-2008 - 从同一张表中选择男性和女性的名字

> ID：13024244
> 
> 赞同：-4
> 
> 时间：2012-10-23T05:49:09.557
> 
> 标签：sql-server-2008

这是我的“联系人”表。

```
| Names      |   Gender   |

| Mike       | Male       |
| Steve      | Male       |
| Kelly      | Female     |
| Jane       | Female     |
| Natasha    | Female     |
| Mathew     | Male       |
| Jack       | Male       | 
```

我想要这样的结果：

```
|  Male      |   Female   |   

| Mike       | Kelly      |
| Steve      | Jane       |
| Mathew     | Natasha    |
| Jack       |            | 
```

请给我解决方案以在 SQL Sever 中实现此结果...任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:03:11.163

```
with Male as
(
  select Names,
         row_number() over(order by Names) as rn
  from YourTable
  where Gender = 'Male'
),
Female as
(
  select Names,
         row_number() over(order by Names) as rn
  from YourTable
  where Gender = 'Female'
)
select Male.Names as Male,
       Female.Names as Female
from Male
  full outer join Female
    on Male.rn = Female.rn 
```

[SQL小提琴](http://sqlfiddle.com/#!3/1da92/2/0)

不是您想要的确切结果，但在没有另一列可供订购的情况下得到的结果一样好。

```
Male    Female
------- -------
Jack    Jane
Mathew  Kelly
Mike    Natasha
Steve   NULL 
```

# java - Struts2 addActionError，jsp中的错误重复

> ID：13024246
> 
> 赞同：0
> 
> 时间：2012-10-23T05:49:14.520
> 
> 标签：java, jsp, jakarta-ee, struts2, struts2-interceptors

我在使用 struts2 的 addActionError 方法时遇到了一个奇怪的错误。

我在 Action Class 中的代码是：

```
this.addActionError(e.getMessage()); 
forward = ERROR; 
```

STRUTS.xml：

```
 <action name="test" class="test">
    <result name="success">/struts/success.jsp</result>
    <result name="error">/struts/error.jsp</result>
    <interceptor-ref name="MyInterceptorStack" />
</action> 
```

其中 MyInterceptorStack 是：

```
<interceptor-stack name="MyInterceptorStack">
    <interceptor-ref name="alias" />
    <interceptor-ref name="servletConfig" />
    <interceptor-ref name="prepare" />
    <interceptor-ref name="i18n" />
    <interceptor-ref name="chain" />
    <interceptor-ref name="debugging" />
    <interceptor-ref name="profiling" />
    <interceptor-ref name="scopedModelDriven" />
    <interceptor-ref name="modelDriven" />
    <interceptor-ref name="fileUpload" />
    <interceptor-ref name="checkbox" />
    <interceptor-ref name="staticParams" />
    <interceptor-ref name="params">
            <param name="excludeParams">dojo\..*</param>
    </interceptor-ref>
    <interceptor-ref name="conversionError" />
    <interceptor-ref name="DeltaInterceptor" />
    <interceptor-ref name="validation">
            <param name="excludeMethods">
                    input,back,cancel,browse
            </param>
    </interceptor-ref>
    <interceptor-ref name="workflow">
            <param name="excludeMethods">
                    input,back,cancel,browse
            </param>
    </interceptor-ref>
</interceptor-stack> 
```

我的 JSP：

```
<div><s:actionerror/></div> 
```

消息应该是： ![在此处输入图像描述](../Images/b4a2baabb98e2f78d5f8260af4656048.png)

但结果重复如下：

![在此处输入图像描述](../Images/bea0370e7ca0ffa6193dfd6ed6974a5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:19:38.020

您是否已`struts.xwork.chaining.copyErrors = true`在*struts.properties*或*struts.xml*中设置？

它将覆盖正常行为，使链拦截器能够通过链保留操作错误消息......谁知道它会如何在没有链的情况下运行（假设您仅使用链式拦截器和链式结果，它可能复制它们相同，当此 var 设置为 true 时）...

试一试。

编辑：您可以在添加消息时从 java 中打印出一行吗？

```
this.addActionError(e.getMessage()); 
System.out.println("Setting action error");
forward = ERROR; 
```

只是为了检查该动作是否由于某种原因没有被调用两次......

# iphone - 更改 UITabBarController 的视图控制器

> ID：13024253
> 
> 赞同：3
> 
> 时间：2012-10-23T05:49:47.857
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller

在 a`UITabBarController`中，选择一个选项卡后，我希望该选项卡`UIViewController`更改（分配一个新的视图控制器）。我正在尝试这个-

```
NSMutableArray *tabBarViewControllers = [myUITabBarController.viewControllers mutableCopy];
[tabbarViewControllers replaceObjectAtIndex:0 withObject:[[myViewcontroller1 alloc] init]];
[myUITabBarController setViewControllers:tabbarViewControllers]; 
```

但它给出了错误。如何分配一个新的`UIViewController`并立即刷新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:13:43.433

这是基于 femina 的回答，但不需要您构建整个视图控制器数组，它只是让您用另一个替换现有的视图控制器。就我而言，我想为 iPhone 5 屏幕换一个不同的 xib 文件：

```
if ([[UIScreen mainScreen] bounds].size.height == 568) {
    NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
    Tracking *tracking568h = [[Tracking alloc] initWithNibName:@"Tracking-568h" bundle:nil];
    tracking568h.title = [[viewControllers objectAtIndex:0] title];
    tracking568h.tabBarItem = [[viewControllers objectAtIndex:0] tabBarItem];
    [viewControllers replaceObjectAtIndex:0 withObject:tracking568h];
    [tracking568h release];
    [self.tabBarController setViewControllers:viewControllers animated:FALSE];
} 
```

这会更改第一个选项卡的视图控制器，保持相同的选项卡图标和标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:54:14.080

请参阅此代码，它提供了 2 个带导航的标签栏。在`AppDelegate.h`请声明

```
 UINavigationController *nav1;
    UINavigationController *nav2;
    UITabBarController *tab; 
```

在`Appdelegate.m`，`didFinishLaunchingWithOptions`请添加：-

```
 tab = [[UITabBarController alloc]init];

    ViewController *view1 = [[ViewController alloc]init];

    nav1= [[UINavigationController alloc]initWithRootViewController:view1];    
    UITabBarItem *tab1 = [[UITabBarItem alloc]initWithTitle:@"Add" image:[UIImage imageNamed:@"Plus.png"] tag:1];
    view1.title = @"Add";
    [view1 setTabBarItem:tab1];

    SettingsViewController *view2 = [[SettingsViewController alloc]init];

    nav2= [[UINavigationController alloc]initWithRootViewController:view2];
    UITabBarItem *tab2 = [[UITabBarItem alloc]initWithTitle:@"Setting" image:[UIImage imageNamed:@"settings.png"] tag:2];
    view2.title = @"Setting";
    [view2 setTabBarItem:tab2];

    tab.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nil];

    self.window.backgroundColor = [UIColor whiteColor];
    self.window.rootViewController = tab; 
```

还要检查此链接以进一步实施...希望这会有所帮助:)

[UItabBar 改变视图控制器](https://stackoverflow.com/questions/8878623/uitabbar-changing-view-controllers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:17:44.770

在里面`AppDelegate.h`

```
UIViewController *vc1;
UIViewController *vc2;
UIViewController *vc3; 
```

在里面`Appdelegate.m`

在里面`didFinishLaunchingWithOptions`

```
NSMutableArray *listOfViewControllers = [[NSMutableArray alloc] init];

vc1 = [[UIViewController alloc] init];
vc1.title = @"A";
[listOfViewControllers addObject:vc1];

vc2 = [[UIViewController alloc] init];
vc2.title = @"B";
[listOfViewControllers addObject:vc2];

vc3 = [[UIViewController alloc] init];
vc3.title = @"C";
[listOfViewControllers addObject:vc3];

[self.tabBarController setViewControllers:listOfViewControllers
                                 animated:YES]; 
```

# html - Dojo mobile EdgeToEdgeList：隐藏在标题后面的第一个列表项

> ID：13024255
> 
> 赞同：1
> 
> 时间：2012-10-23T05:49:59.580
> 
> 标签：html, mobile, dojo, ibm-mobilefirst

我是 dojo / dojo mobile 的新手。我正在构建一个带有标题和下方项目列表的屏幕。在移动应用程序中非常经典。

```
<body id="content" style="display: none">
<div data-dojo-type="dojox.mobile.ScrollableView" id="mainView"
    data-dojo-props="selected:true,scrollDir:'v'">

    <h1 data-dojo-type="dojox.mobile.Heading"
        data-dojo-props="label:'Main',fixed:'top'"></h1>

    <div data-dojo-type="dojox.mobile.EdgeToEdgeList" style="margin-top: 0px;">
        <div data-dojo-type="dojox.mobile.ListItem"
             data-dojo-props="label:'Take Picture...',
                              icon:'images/plus-30.png',
                              url:'TakePicture.html',
                              transition:'slide'">
        </div>
    </div>
</div>
<script src="js/initOptions.js"></script>
<script src="js/PhoneGapDemo.js"></script>
<script src="js/messages.js"></script> 
```

问题：列表中的第一项隐藏在标题后面且不可见。（IBM Rich Page Editor、IBM Mobile App Simulator、Apple iOS Simulator 和 iPhone iOS6 中的渲染相同）

我刚开始这个项目，我没有花哨的 CSS 或其他......只是从头开始，添加了 ScrollableView、Header、EdgeToEdgeList 和 ListItems。

解决方法是在 EdgeToEdgeList 上应用一种样式，将其向下移动 40 像素。但它不干净并且破坏了跨平台兼容性（如果标题不总是 40px 高度怎么办？）

我正在使用 DoJo 1.8

谢谢

塞布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:42:22.183

嗨，即使我是这个 Worklight 的新手，我也不确定，但进入了属性（转到设计并右键单击边到边列表并选择属性），您可以看到标签、样式、布局、所有选项。转到样式并单击属性并更改位置/布局。它可能会有所帮助。如果你做对了，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T21:12:10.413

解决方案是双重的

1.  在元素中使用 style="visibility:hidden"，如下

    `<body id="content" style="visibility:hidden">`

2.  用一个元素显式加载“mobileDeviceTheme”，而不是让 Dojo 异步加载它（这个模块需要提前加载以允许正确的高度计算）

    `<script type="text/javascript" src="dojox/mobile/deviceTheme.js"></script>`

之前（dojo/dojo.js 的负载）

塞布

# c - 在c中读取和写入位图

> ID：13024259
> 
> 赞同：0
> 
> 时间：2012-10-23T05:50:13.740
> 
> 标签：c, bitmap, bmp

我正在尝试创建一个反转位图文件颜色的应用程序，但在实际收集数据和从位图中遇到一些问题。我正在使用结构来保留位图的数据及其标题。现在我有：

```
struct
{
    uint16_t type;
    uint32_t size;
    uint32_t offset;
    uint32_t header_size;
    int32_t  width;
    int32_t  height;
    uint16_t planes;
    uint16_t bits;
    uint32_t compression;
    uint32_t imagesize;
    int32_t  xresolution;
    int32_t  yresolution;
    uint32_t ncolours;
    uint32_t importantcolours;
} header_bmp

struct {
    header_bmp header;
    int data_size;
    int width;
    int height;
    int bytes_per_pixel;
    char *data;
} image_bmp; 
```

现在为了实际读取和写入位图，我有以下内容：

```
image_bmp* startImage(FILE* fp)
{
header_bmp* bmp_h = (struct header_bmp*)malloc(sizeof(struct header_bmp));
ReadHeader(fp, bmp_h, 54);
}

void ReadHeader(FILE* fp, char* header, int dataSize)
{
fread(header, dataSize, 1, fp);
} 
```

从这里如何将标题信息提取到我的标题结构中？

另外，如果有人在阅读和编写位图方面有任何好的资源，请告诉我。我已经搜索了几个小时，但找不到关于该主题的太多有用信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:54:04.283

您实际上应该已经将所有数据放在正确的位置。唯一可能出错的问题可能是*字节序*。例如，数字 256 以“short”表示为 0x01 0x00 或 0x00 0x01。

编辑：结构的语法有问题...

```
 struct name_of_definition { int a; int b; short c; short d; };
 struct name_of_def_2 { struct name_of_definition instance; int a; int b; }
    *ptr_to_instance; // or one can directly allocate the instance it self by
                      // by omitting the * mark.
 struct { int b; int c; } instance_of_anonymous_struct;

 ptr_to_instance = malloc(sizeof(struct name_of_def_2)); 
```

还：

```
 ReadHeader(fp, (char*)&ptr_to_instance->header, sizeof(struct definition));
           //    ^ don't forget to cast to the type accepted by ReadHeader 
```

通过这种方式，您可以直接将数据读入结构的中间，但可能的字节序问题仍然存在。

# javascript - JS在AJAX调用返回输出之前返回？

> ID：13024263
> 
> 赞同：4
> 
> 时间：2012-10-23T05:50:54.637
> 
> 标签：javascript, ajax, concurrency

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)

我正在调用一个 javascript 方法，该方法反过来发送 Ajax 请求并给出响应。我在回调方法中得到结果，如“成功”。
这里 Ajax 正在返回一些结果，即 javascript 方法返回结果（未定义的东西）。
但它应该只返回 ajax 结果。
我发现的问题是，Javascript 和 Ajax 都在同时执行。
如何停止它们并首先执行 Ajax，它的结果必须发送到返回结果的函数。
任何想法都受到高度赞赏.. :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T05:53:42.503

默认情况下，`$.ajax`（以及使用它的任何东西，例如`$.post`）都会发出异步请求。您可以通过指定使请求同步`async:false`（请参阅[文档](http://api.jquery.com/jQuery.ajax/)）。不过，我不建议您使用同步 AJAX 请求，因为它会降低性能并导致糟糕的用户体验。相反，请考虑使用在结果完成时在成功处理程序中调用的回调。

这是两个任意且简单的示例，其中我们有一个锚点，我们希望在单击时从 AJAX 调用的结果中替换文本。两者都做同样的事情，但第二个是首选，因为它使浏览器保持响应。

同步：

```
function invokeAjaxSync() {
   var text;

   $.ajax({url: '/path/to/resource', async:false, success: function(result) {
      text = result.toString();
   }}); // will wait until this call is complete

   return text;
}

$('a.example').click(function() {
    $(this).text(invokeAjaxSync()); // works, but the browser will be unresponsive while waiting for a response.
}); 
```

异步（更好）：

```
function invokeAjaxAsync(callback) { 
   $.ajax({url:'/path/to/resource', success: function(result) {
         callback(result);
   }});
}

$('a.example').click(function() {
     var $this = $(this);

     invokeAjaxAsync(function(result) {
        $this.text(result.toString());
     }); // browser will remain responsive, but still update text when the AJAX call completes.
}); 
```

# css - Opera 12.02 中的 CSS 填充/边距问题？

> ID：13024265
> 
> 赞同：0
> 
> 时间：2012-10-23T05:50:59.010
> 
> 标签：css, cross-browser, containers, opera

嗨 StackOverflow 用户，

我正在为自己开发一个新的个人网站，并且发现 Opera 12.02（我在 Mac 上）非常棘手。由于某种原因，几乎所有东西的定位都完全关闭，除了所有包装的容器。所以我猜这是一个填充/边距/行高问题。这是网站：[http](http://www.tommaxwell.me) ://www.tommaxwell.me 。有人可以帮我吗？

CSS：

```
 body {
padding: 0 auto;
margin: 0 auto;

}

@-moz-document url-prefix() {
* { font-weight: 100; }
h1, h2 
}

#sitecontent {
display: block;
width: 780px;
padding-top: 150px;
margin: 0 auto;
}

#sitecontent .leftsidebar {
float: left;
width: 150px;
}

#profilepic {
-moz-border-radius: 20px;
border-radius: 20px;
}
#sitecontent .leftsidebar ul {
position: relative;
top: -5px;
list-style-type: none;
font-family: 'Cantora One', sans-serif;

 }

#sitecontent a {
text-decoration: none;
color: #3f83ca;
}

#sitecontent .leftsidebar ul li{
margin-bottom: 2px;
}

#sitecontent a:hover {
opacity: 0.9;

}

#sitecontent .rightsidebar {
float: right;
width: 600px;

}

#sitecontent .rightsidebar > h1 {
font-size:60px;
color: #3f83ca;
line-height: 0;
font-family: 'Cantora One', sans-serif;

}

#sitecontent .rightsidebar > h2 {
line-height: 10px;
color: #38414f;
font-family: 'Cantora One', sans-serif;
}

#sitecontent .rightsidebar > p {
padding-top: 16px;
line-height: 20px;
font-family: 'Cantora One', sans-serif;

}

#secondparagraph {
opacity: 0.5;

}

#secondparagraph:hover {
color:#3f83ca;
opacity: 1.0;

}

#secondparagraph a {
text-decoration: none;
color: inherit;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T07:30:10.233

这行得通。

```
x:-o-prefocus, h1 {
padding-top: 22px;
}

x:-o-prefocus, h2 {
margin-top: -24px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T05:53:18.940

添加到`overflow:hidden`您`#sitecontent`的 css 中

像这样

```
#sitecontent{
overflow:hidden;
} 
```

# jsp - 尝试访问 Weblogic 10.3.5 中的应用程序时出现 JSP 编译错误

> ID：13024270
> 
> 赞同：1
> 
> 时间：2012-10-23T05:51:17.553
> 
> 标签：jsp, weblogic

我正在 Weblogic 10.3.5 上部署 Web 应用程序。应用程序已成功部署，但当我尝试访问应用程序时出现以下错误

```
Root cause of ServletException. org.apache.tiles.impl.CannotRenderException: JSPException including path '/WEB-INF/layout/menu.jsp'. at
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:680) at 
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:633) at 
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:322) at 
org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124) at 
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262) 
Truncated. see log file for complete stacktrace Caused By: 
org.apache.tiles.util.TilesIOException: JSPException including path '/WEB-INF/layout/menu.jsp'. at 
org.apache.tiles.servlet.context.ServletUtil.wrapServletException(ServletUtil.java:232) at 
org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:105) at 
org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96) at 
org.apache.tiles.renderer.impl.UntypedAttributeRenderer.write(UntypedAttributeRenderer.java:61) at 
org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:103) 
Truncated. see log file for complete stacktrace Caused By: 
weblogic.servlet.jsp.CompilationException: Failed to compile JSP /WEB-INF/layout/menu.jsp menu.jsp:16:38: Syntax error in expression. Encountered "(". Expected one of : "}", ".", "[", ">", "gt", "<", "lt", ">=", "ge", "<=", "le", "==", "eq", "!=", "ne", "&&", "and", "||", "or", "*", "+", "-", "?", "/", "div", "%", "mod", 
```

我也试着把`el-api 2.2`, `jasper-el-6.0.33.jar`, `el-imp 2.2`jar. 我也添加`context-param`了条目，`web.xml`但它仍然无法正常工作。

我正在尝试在 Linux 上运行的 Weblogic 10.3.5 上部署应用程序

# android - Android：支持所有设备的背景图像大小（以像素为单位）

> ID：13024272
> 
> 赞同：122
> 
> 时间：2012-10-23T05:51:23.993
> 
> 标签：android, graphics

我正在创建一个将在所有 Android 设备上运行的应用程序。我想为我的应用程序创建 xhdpi 图形。我的应用程序是全屏的。我对创建图形感到困惑。谁能告诉我我的背景图像的最佳尺寸（以像素为单位）。

例如：

*   xhdpi: 720x1280 像素
*   hdpi: 480x800 像素
*   mdpi：320x480 像素
*   ldpi：240x320 像素

建议我在所有设备上显示的最佳尺寸。因为我的图形是我的应用程序的核心。

我希望每台设备都能获得它想要的最佳图像。Android 不会参与图像的压缩或扩展。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-11-05T09:00:32.107

以下是应用在所有设备上运行的最佳尺寸。要了解多个支持屏幕，您必须阅读 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

```
xxxhdpi: 1280x1920 px
xxhdpi: 960x1600 px
xhdpi: 640x960 px
hdpi: 480x800 px
mdpi: 320x480 px
ldpi: 240x320 px 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2016-10-26T07:10:28.397

Android 设备矩阵

```
 ldpi     mdpi     hdpi    xhdpi    xxhdpi      xxxhdpi
Launcher And Home           36*36    48*48   72*72    96*96    144*144     192*192
Toolbar And Tab             24*24    32*32   48*48    64*64    96*96       128*128
Notification                18*18    24*24   36*36    48*48    72*72       96*96 
Background                 240*320  320*480 480*800  768*1280  1080 *1920  1440*2560 
```

（从背景屏幕的总高度减去工具栏大小的好方法，然后是屏幕的设计图形）

如需更多帮助（此链接还包括平板电脑）：

[https://design.google.com/devices/](https://design.google.com/devices/)

[Android Native Icons (Recommended) 您可以通过编程](https://stackoverflow.com/a/11376610/2489061)更改这些图标的颜色。 [https://design.google.com/icons/](https://design.google.com/icons/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-08-21T15:13:05.907

**检查这个。此图像将针对不同屏幕尺寸的所有图标尺寸显示**

[![尺寸](../Images/55e0b97c62c1d52557491c82430cb95c.png)](https://i.stack.imgur.com/JxzS6.jpg)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-01T02:19:23.923

我在互联网上查看了这些正方形图像密度的正确尺寸，但找不到任何可靠的东西。

如果有什么安慰的话，请参考[Veerababu Medisetti 的回答](https://stackoverflow.com/a/13228830/1967928)，我将这些尺寸用于**SQUARES** :)

```
xxxhdpi: 1280x1280 px
xxhdpi: 960x960 px
xhdpi: 640x640 px
hdpi: 480x480 px
mdpi: 320x320 px
ldpi: 240x240 px 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-01T13:41:02.147

我的理解是，如果您使用一个`View`对象（例如应该如此`android:windowBackground`），Android 会自动将您的图像缩放到正确的大小。问题是过多的缩放会导致伪影（在向上和向下缩放期间）和模糊。由于市场上的各种分辨率和宽高比，不可能为每个屏幕创建“完美”适配，但您可以尽最大努力确保只需进行一点点缩放，从而减轻不必要的副作用. 所以我要做的是：

*   保持六种广义密度（ldpi、mdpi、hdpi 等）之间的 3:4:6:8:12:16 缩放比例。
*   您不应该为您的 UI 元素包含 xxxhdpi 元素，此分辨率仅用于升级启动器图标（因此仅适用于 mipmap 文件夹）......[您不应将 xxxhdpi 限定符用于启动器图标以外的 UI 元素。](https://developer.android.com/guide/practices/screens_support.html)...**虽然**例如。在三星 edge 7 调用`getDisplayMetrics().density`返回 4 (xxxhdpi)，所以这个信息可能已经过时了。
*   然后看看市场上的新手机型号，找到有代表性的。假设新的 google 像素是 android 手机的良好代表：它具有 1080 x 1920 分辨率和 441 dpi，屏幕尺寸为[4.4 x 2.5 英寸](https://material.io/devices/)。然后从[android 开发者文档](https://developer.android.com/guide/practices/screens_support.html)：

    > *   ldpi（低）~120dpi
    > *   mdpi（中）~160dpi
    > *   hdpi（高）~240dpi
    > *   xhdpi（超高）~320dpi
    > *   xxhdpi（超超高）~480dpi
    > *   xxxhdpi (extra-extra-extra-high) ~640dpi

    这对应于`xxhdpi`屏幕。从这里我可以将这些 1080 x 1920 按上述 (3:4:6:8:12) 比例缩小。

*   我也可以承认，下采样通常是一种简单的缩放方法，因此我可能希望在我的 apk 中捆绑稍微超大的位图（注意：更高的内存消耗）。再次假设像素屏幕的宽度和高度具有代表性，我会将 1080x1920 放大 480/441 倍，使我的最大分辨率背景图像保持在大约。1200x2100，然后应按 3:4:6:8:12 缩放。
*   请记住，您只需为位图文件（.png、.jpg 或 .gif）和九补丁文件（.9.png）提供特定于密度的可绘制对象。如果您使用 XML 文件来定义可绘制资源（例如形状），只需将一份副本放在默认的可绘制目录中。
*   如果您必须适应非常大或奇数的纵横比，请为这些创建特定文件夹，为此使用标志，例如。`sw`, `long`,`large`等
*   并且不需要两次绘制背景。因此设置一个风格`<item name="android:windowBackground">@null</item>`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-31T17:18:09.187

[GIMP 工具](https://www.gimp.org/ "GIMP")正是您为不同像素分辨率设备创建图像所需的工具。

按着这些次序：

1.  在 GIMP 工具中打开现有图像。
2.  转到“图像”菜单，然后选择“缩放图像...”
3.  使用您需要的以下像素尺寸：

    xxxhdpi: 1280x1920 像素

    xxhdpi：960x1600 像素

    xhdpi: 640x960 像素

    hdpi: 480x800 像素

    mdpi：320x480 像素

    ldpi：240x320 像素

4.  然后从“文件”菜单中“导出”图像。

# .htaccess - HTTPS 到 HTTP 用于除少数页面和脚本之外的所有页面

> ID：13024273
> 
> 赞同：1
> 
> 时间：2012-10-23T05:51:35.763
> 
> 标签：.htaccess, http, redirect, ssl, https

我正在尝试帮助一位朋友，她的客户在一次黑客攻击后将她的整个网站都下意识地引入了 SSL。这对她的 SEO 造成了严重破坏，导致重复页面被编入索引，导致旧链接不再指向正确 URL 的 PageRank 流失，等等。

[无论如何，我在此处的另一篇](https://stackoverflow.com/questions/2079015/htaccess-301-redirect-for-all-https-to-http-except-one-page)似乎几乎符合要求的帖子之后对 .htaccess 进行了建模，但我想由这里的专家运行它以确保文件看起来正确。

基本上，除了少数 html 页面、一些 .php 页面和 .cgi 脚本之外，站点上的所有页面都需要从 HTTPS 重定向回 HTTP。你能告诉我是否有一个简单的规则将所有 php 页面设置为 HTTPS，然后在 HTTPS 和 .cgi 脚本后面设置一些额外的 HTML 页面？我真的很感激。这是我到目前为止所得到的：

```
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit GET POST>
order deny,allow
deny from all
</Limit>
AuthName thedomain.com
AuthUserFile /home/thesitename/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/thesitename/public_html/_vti_pvt/service.grp

RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} page1.html
RewriteCond %{REQUEST_URI} page2.html
RewriteCond %{REQUEST_URI} page3.html
RewriteCond %{REQUEST_URI} page4.html
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteCond %{SCRIPT_FILENAME} \/page\.php [NC]
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(auth|register|secure)
RewriteCond %{REQUEST_URI} !originalpage.php
RewriteCond %{REQUEST_URI} !cgi-script.cgi
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:15:20.420

> 你能告诉我是否有一个简单的规则将所有 php 页面设置为 HTTPS，然后在 HTTPS 和 .cgi 脚本后面设置一些额外的 HTML 页面？

*如果请求不是*HTTPS ，此规则会将所有 php 脚本、4 个 html 页面和一个 cgi 脚本重定向到HTTPS

```
RewriteCond %{HTTPS} off
RewriteCond ${REQUEST_URI} \.php$ [OR]
RewriteCond %{REQUEST_URI} /page1.html$ [OR]
RewriteCond %{REQUEST_URI} /page2.html$ [OR]
RewriteCond %{REQUEST_URI} /page3.html$ [OR]
RewriteCond %{REQUEST_URI} /page4.html$ [OR]
RewriteCond %{REQUEST_URI} /cgi-script.cgi$ 
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

此规则相反，将任何 HTTPS 而非 php 脚本、这 4 个 html 页面或 cgi 脚本重定向到 HTTP

```
RewriteCond %{HTTPS} on
RewriteCond ${REQUEST_URI} !\.php$
RewriteCond %{REQUEST_URI} !/page1.html$
RewriteCond %{REQUEST_URI} !/page2.html$
RewriteCond %{REQUEST_URI} !/page3.html$
RewriteCond %{REQUEST_URI} !/page4.html$
RewriteCond %{REQUEST_URI} !/cgi-script.cgi$ 
RewriteRule ^(.*)$ http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# javascript - 主干.js 示例

> ID：13024274
> 
> 赞同：2
> 
> 时间：2012-10-23T05:51:38.787
> 
> 标签：javascript, model-view-controller, user-interface, prototype

我刚刚开始使用 jquery 和 require.js 查看backbone.js/underscore。我很想听听其他人对这个堆栈的体验。

我想建立一个快速的前端原型设置，让我可以快速做一堆类似类型的应用程序前端。

欢迎对其他替代方案提出任何富有成效的评论。指向示例的指针将不胜感激。

我已经得到了关于 Ember.js 的好评，很快就会试一试。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:54:51.833

试试[Backbone.js Todo 应用程序](http://documentcloud.github.com/backbone/docs/todos.html)，它几乎是 JavaScript MVC 的“Hello world”。这是对 Backbone 的一个很好的介绍。在那之后，那里有很多 Backbone 的东西——你应该可以毫不费力地找到东西。使用谷歌。经常使用谷歌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:47:53.163

不要相信我的话，看看今天一些更令人印象深刻的网站。当遇到我喜欢的网站时，我会努力尝试确定所涉及的技术堆栈。我可以自信地说，我看到的大多数网站都是基于 Backbone 的客户端基础。我从未尝试过 Ember 或 Angular，但我相信 Modular Backbone 技术堆栈是构建 Web 应用程序时的可靠选择。Backbone 也有一个很棒的社区和优秀的文档。您应该能够很快找到问题的解决方案。以下是一些使用 Backbone 的网站。

[克莱斯勒](http://testofownership.com/)| [葫芦](http://www.hulu.com/)| [今日美国](http://beta.usatoday.com/)

# ios5 - 何时使用。参数以及何时使用 [ ] 调用 IOS 中的函数

> ID：13024276
> 
> 赞同：1
> 
> 时间：2012-10-23T05:51:50.290
> 
> 标签：ios5

在 iOS 中，调用函数时我有些困惑。

```
-(void) function:(NSString*) str
{
   selectedstring = str;
} 
```

调用函数时。

我什么时候应该打电话：

```
self.function = @"My name"; 
```

和

```
[self function:@"My name"] 
```

(.) 参数和 [ ] 有什么区别

在 iOS 函数调用中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:33:35.973

`myVar = self.property`相当于`myVar = [self property]`

`self.property = anotherVar`相当于`[self setProperty:anotherVar]`

你使用哪个是风格问题。

有些人会告诉你，点语法应该只用于实际定义为属性的事物（带有`@property`）。我不同意这一点。我的观点是，只要你调用获取或设置值的东西，就应该使用点语法，而其他副作用最小。无论您是自己编写方法还是合成一个属性来自动生成它都不重要：重要的是它是否与获取和设置值有关。

所以`myArray.count`很好，尽管它不在`@property`头文件中。但`myURLConnection.start`不是，因为它不返回值并且与执行操作有关。

人们确实不同意这一点。有些人根本不喜欢使用点语法，因为它可能与访问结构的成员（也使用`.`）混淆。其他人很乐意对`@property`s 使用点语法，但对其他方法则不然。

# javascript - 标题排序中的Jquery数据表下拉过滤器

> ID：13024277
> 
> 赞同：2
> 
> 时间：2012-10-23T05:52:09.057
> 
> 标签：javascript, jquery, drop-down-menu, datatables

我想在其标题上创建一个带有下拉列表框的数据表，该列表框根据框中的选定列过滤要显示的行。我修改了这里的示例[列过滤示例](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)以在标题中显示下拉列表框

```
 /* Add a select menu for each TH element in the table footer */
   //   $("tfoot th").each( function ( i ) {
      $("thead th").each( function ( i ) {
       ... 
```

它工作正常，但是当我单击下拉列表框时它会执行排序。是否可以在我对下拉列表执行操作时禁用排序，并在我单击单元格中不属于下拉列表的任何位置时触发排序。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:37:20.440

```
$("thead th").each( function ( i ) {
    this.innerHTML = fnCreateSelect( oTable.fnGetColumnData(i) );
    $('select', this).change( function () {
        oTable.fnFilter( $(this).val(), i );
    } );
    $('select', this).click( function (event) {
        event.stopPropagation();
    } );
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:59:15.827

不要处理 select 的 onChange 事件或删除 sort 调用。我相信你可以在单元格中绑定一个点击事件。如果没有，请格式化您的表格以在您可以处理点击事件的每个单元格中包含一个锚标记。

# asp.net - 字符串的 Asp.net 验证表达式

> ID：13024289
> 
> 赞同：0
> 
> 时间：2012-10-23T05:53:52.277
> 
> 标签：asp.net, regex

我想为子域创建一个正则表达式，例如：

在文本框中用户需要输入喜欢

```
abc1.test.com 
```

或者

```
abc1s.test.com 
```

注意：最后总是需要**.test.com 。**

可变部分可以包含任何字母、字母等

我对正则表达式一无所知，所以我问了这个愚蠢的问题。我用谷歌搜索了两个多小时，但没有找到任何好的例子。

请注意，这不是家庭作业。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:06:57.333

在线正则表达式有许多有用的资源，包括：

*   [http://regexpal.com/](http://regexpal.com/) - 测试你的正则表达式
*   [http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html) - 正则表达式参考
*   [http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/) - 有用的备忘单

我相信其他成员会有更好的资源，但这些在过去对我来说已经足够了。

以下正则表达式应该适合您：

```
^((.+)(.test.com){1})$ 
```

*   这 '。' 是除换行符以外的任何字符
*   '+' 是一次或多次
*   “{1}”恰好是一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:39:02.597

```
^[\d\w]+\.test\.com$ will work for your case. 
```

# numpy - 显示浮点数时的 genfromtxt() 工件

> ID：13024292
> 
> 赞同：1
> 
> 时间：2012-10-23T05:54:10.420
> 
> 标签：numpy, scipy

在 numpy 中，我正在读取一个 ASCII 文件（见下文）`np.genfromtxt()`

```
0.085 102175 0.00025
0.094 103325 0.00030

raw = genfromtxt(fn) 
```

检查时`raw`我得到以下信息：

```
>>> raw[0,0]
0.085000000000000006 
```

最后如何防止工件`6`以及它来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:15:05.233

这是正常行为，是由于浮点运算的基本不精确性造成的。换句话说，`0.085`不能用浮点位精确表示。出于这个原因，在任何数值计算中假设一些噪声通常是一个好主意。

# php - 如何向 mod_rewrite 规则添加例外（wordpress 网站）

> ID：13024294
> 
> 赞同：0
> 
> 时间：2012-10-23T05:54:17.027
> 
> 标签：php, wordpress, .htaccess

我有一个 WordPress 网站，我试图调用位于网站上的 php 脚本，URL 是这样的

[http://example.com/folder/process.php](http://example.com/folder/process.php)

问题是当我尝试这样做时，我总是被重定向到主题“未找到”页面。这是htaccess文件

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

如果我将 test.html 文件放在该目录中，它将起作用，并显示 .html 文件的内容。我认为这与它不喜欢的 .php 扩展名有关吗？

如果我调用 example.com/wp-config.php 它会找到该文件并且 deosnt 显示 404 页面..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:12:20.787

该规则说“如果请求以 index.php 开头，则不要重写并停止”。

```
RewriteRule ^index\.php$ - [L] 
```

在该行之前或之后，您可以立即添加类似

```
RewriteRule ^process\.php$ - [L] 
```

不重写对该特定文件的请求。

请注意，您必须将文件放在 Wordpress 的 index.php 旁边才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:40:42.573

将您的 .htaccess 更改为此：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/+folder/process\.php$ [NC]
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:48:23.007

好的，所以如果我使用 WordPress 安装附带的默认文件，在 cpanel 中复制它并重命名它会删除代码，然后将我的代码放入其中。

该文件已找到并且可以正常工作。所以我认为唯一剩下的可能是权限问题。我上传文件时为文件设置的权限是 777。我对文件权限一无所知。

我已经为此工作了 5 个小时，我试图找出问题所在。我对此很满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T07:32:38.657

尝试在您的目录中完全关闭 mod_rewrite，`/folder/`方法是在其中创建一个 htaccess 文件并简单地添加这一行：

```
RewriteEngine On 
```

它将使它不会应用父目录中的任何规则。如果 PHP 的怪异现象继续存在，您可能需要检查您的虚拟主机/服务器配置中是否没有任何规则，或者`Multiviews`是否关闭了类似的东西（通过`Options -Multiviews`）。

# zend-framework2 - 如何在 ZF2 中使用 BjyProfiler？

> ID：13024297
> 
> 赞同：1
> 
> 时间：2012-10-23T05:54:37.573
> 
> 标签：zend-framework2

在我的 ZF2 应用程序中，我想将我的数据库查询分析到浏览器控制台。我遇到了 BjyProfiler 这样做。我按照此处记录的方式进行了所有配置：[“BjyProfiler at github”](https://github.com/bjyoungblood/BjyProfiler)。一切都很好，但我仍然无法将数据库查询分析到浏览器控制台。不幸的是，我没有找到任何可以解释 BjyProfiler 用途的文档。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:11:16.223

BjyProfiler 不提供传输或存储查询配置文件数据的机制，因为这超出了当前模块的范围（至少截至 2012 年 10 月 23 日）。如果您希望存储（即：到数据库或文件）或传输（即：到浏览器控制台，例如 Chrome 开发者工具或 FireBug），您需要自己实现。

ZendDeveloperTools模块与[BjyProfiler](https://github.com/zendframework/ZendDeveloperTools)集成，但目前仅限于查询的计数和聚合时间。ZF2 Doctrine ORM 模块 ( [DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule) ) 为 ZendDeveloperTools 提供每个查询的分析数据，对于那些使用 Zend\Db 而不是 Doctrine 的人来说，这是应该复制的。

*   收集器：[https ://github.com/doctrine/DoctrineORMModule/blob/master/src/DoctrineORMModule/Collector/SQLLoggerCollector.php](https://github.com/doctrine/DoctrineORMModule/blob/master/src/DoctrineORMModule/Collector/SQLLoggerCollector.php)
*   工具栏视图：[https ://github.com/doctrine/DoctrineORMModule/blob/master/view/zend-developer-tools/toolbar/doctrine-orm.phtml](https://github.com/doctrine/DoctrineORMModule/blob/master/view/zend-developer-tools/toolbar/doctrine-orm.phtml)

# iphone - 从 iOS 6 的导航背景中删除自定义图像

> ID：13024298
> 
> 赞同：0
> 
> 时间：2012-10-23T05:54:39.960
> 
> 标签：iphone, ios6, uinavigationbar

我有一个正在展示的 MFMailComposeViewController，我想从导航栏中清除图像。

在 iOS 5 上，这很好用：

```
[self.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

但在 iOS 6 上，这没有效果。我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:14:33.070

你只是隐藏导航栏..

self.navigationController.navigationBarHidden = YES;

或者

[self.navigationController setNavigationBarHidden:YES 动画:动画];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:19:48.737

对不起，我必须回答我自己的问题。我犯了一个错误：我通过做设置了 UINavigationBar 应用程序范围

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"bar01.png"] forBarMetrics:UIBarMetricsDefault]; 
```

这会导致所有导航栏都有 bar01。删除这一行使得 MFMailComposer 导航栏成为默认颜色，无需消除图像。

# iphone - 登录注销视图控制器

> ID：13024299
> 
> 赞同：0
> 
> 时间：2012-10-23T05:54:45.220
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我有一个登录视图，用户在其中输入用户名和密码，可以正常调用下一个视图。现在，当用户单击注销时，我正在使用以下命令调用 Login viewController：

```
loginViewController *login = [[loginViewController alloc] initWithNibName:@"loginViewController" bundle:nil];
[self presentModalViewController:login animated:YES]; 
```

我不知道在注销按钮操作上再次分配视图是否是个好主意。我正在使用 ARC，但我不知道调用 loginViewController 会推送以前 viewController 的所有分配内存。

PS：

loginViewController 是根视图控制器——即——它在 appDelegate 之后被调用。

我尝试了 navigationController 的 popViewController 方法，但它不起作用。

任何其他建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:11:55.590

当您使用 ARC 时，对象由 iOS 管理，因此一旦您关闭 loginViewController，它将不再在内存中可用。因此，下次您需要再次分配和显示 loginView 时，您的代码很好，效果很好..

我有一个使用带有登录和注销转换的 tabBar 制作的[示例应用程序。](http://dl.dropbox.com/u/58723521/TabBar.zip)在这里，您可以根据需要更改 rootViewController。

# android - 如何从 sdcard 上的 url 下载和存储文件而无需在 android 中扫描 sdcard

> ID：13024301
> 
> 赞同：-1
> 
> 时间：2012-10-23T05:54:52.177
> 
> 标签：android, android-emulator, android-sdcard

我在android模拟器中遇到问题。

在我的应用程序中，我想从 url 下载图像并存储到 sd 卡中。

我可以下载图像并将其存储在 sdcard 上，但有一个问题？

当我下载图像并存储它们时，当我想在 sdcard 库中看到它时，我看不到它们。但是当我从 dev tools-->Media Provider--Scan sdcard 扫描 sdcard 时。我得到了图像。

但是不想每次都这样扫描sdcard？如何避免？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:17:46.877

使用[MediaScanner.scanFile()](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)将新文件通知系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:29:43.690

如果您发布您的代码片段，我们可能会提供一些建议

这取决于您如何提供**sdcard**路径来保存下载的图像

# java - 动态web项目包结构

> ID：13024302
> 
> 赞同：1
> 
> 时间：2012-10-23T05:54:58.267
> 
> 标签：java, web-applications

我已经下载了一个示例项目并看到了下面的包结构。

```
src/main/java
src/main/resources
JRE System Library
Referenced Libraries
src
  main
    webapp 
      css
      user
      WEB-INF
target 
```

这是创建包结构的最佳方法吗？通常当我们在 Eclipse 中创建一个动态项目时，它有一个 src 文件夹和项目根目录中的 WebContent 文件夹。WEB-INF 将位于 WebContent 下。但是在这里我们可以识别两个源文件夹，而不是 WebContent，我们在源文件夹下而不是根目录下找到 webapp。

不管它的包结构是否正确，我都尝试在 Eclipse 中创建相同的包结构。但我无法将 src 文件夹重命名为 src/main/java 之类的东西。它给了我一个错误

> 无法在源文件夹“src”内嵌套源文件夹“src/main/java”。

在eclipse中创建动态项目时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:00:19.227

这个结构是基于maven的web base项目，主要是maven base项目使用这个结构，至于新的约定，maven是最流行的部署工具，所以我个人推荐maven base架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:03:45.397

如果 maven 驱动这个组织存在一个[maven 插件](http://maven.apache.org/plugins/maven-eclipse-plugin/)，它的目标是生成 eclipse 项目。

存在第二个插件（[一个 eclipse 插件](http://eclipse.org/m2e/)）以促进与 eclipse 的集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:00:56.013

首先，它只有一个 src 文件夹。Eclipse 以这样一种方式显示它们，以便更容易访问项目的不同部分。Webapp 是包含所有好东西的主要 WebApplication 文件夹。另一个最重要的文件夹是 WEB-INF，这是从客户端读取保护的文件夹，因此，您有 Java 类文件和任何您想要在此文件夹中保护的内容不受客户端的影响。此文件夹还包含一个包含 JAR 文件的 lib 目录。这是目录结构的主要覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:05:32.337

该`src/main/java`文件夹是文件夹的自动更新副本`src`。（这些是您项目中配置的构建路径）

您应该编辑您的文件，`src`并且更改将由 eclipse 更新到它们的[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)。

# optimization - 伯克利数据库优化

> ID：13024303
> 
> 赞同：1
> 
> 时间：2012-10-23T05:55:08.033
> 
> 标签：optimization, berkeley-db

我正在使用berkeley DB解决消息队列，但我发现队列增加到一定大小后，读取速度迅速下降，我猜是因为它开始在硬盘上写入，有没有改善读取速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:50:33.570

我在 Berkeley DB 也有同样的经历。在搜索和试验一种策略后，我发现它相对有效且高效。您必须确保尽可能以全速构建数据库，记住它不应该像 100 万条记录一样大。现在，打开块上的光标并将记录按排序顺序插入到新数据库中。希望您能够以这种方式建立一个至高无上的数据库。

# android - 如何取消 PendingIntent

> ID：13024307
> 
> 赞同：2
> 
> 时间：2012-10-23T05:55:49.890
> 
> 标签：android

我有一个导航应用程序。我想获得可能暂时无法到达的位置信息，具体取决于`GPS`锁定需要多长时间 - 或者接收状况不佳。

我打算用它`LocationManager.requestLocationUpdates()`来请求位置信息在可用时发送到一个`BroadcastReciever`，并通过 `AlarmManager.set()`.

如果位置更新到达，我想取消超时。如果超时到达，我想取消位置更新。假设我的应用程序可以在任何一种情况发生之前被杀死，我就会失去`PendingIntent`我想要取消的东西。

有没有办法以`PendingIntent`某种方式保存，所以我可以稍后使用它们来取消超时和/或位置更新？还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:43:20.947

您不需要保存 PendingIntent 实例本身。AlarmManager.cancel(PendingIntent operation) 的文档说，

> 删除任何具有匹配 Intent 的警报。任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

如果您查看 Intent.filterEquals(Intent)，它会说，

> 出于意图解析（过滤）的目的，确定两个意图是否相同。也就是说，如果它们的动作、数据、类型、类和类别相同。这不会比较意图中包含的任何额外数据。

因此，您可以使用相同的操作创建一个 PendingIntent 并使用该新的待处理意图执行 am.cancel() ，它也会取消先前的待处理意图。

这是一个快速的代码示例：

```
private static final String ALARM_ACTION = "foo.bar.MY_ALARM_ACTION";

private PendingIntent getAlarmIntent() {
Intent alarmIntent = new Intent(ALARM_ACTION);
PendingIntent pi = PendingIntent.getBroadcast(this, 0, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT); // or whatever flag you need
return pi;
} 
```

现在您可以使用从上述函数返回的 PendingIntent 调用 am.set()，也可以使用从同一函数返回的 PendingIntent 调用 am.cancel()。PendingIntent 是否是同一个实例并不重要，它只需要匹配 Intent.filterEquals() 测试（所以基本上只有 Intent 操作必须匹配）。

因此，基本上只需使用相同的操作来创建设置/取消警报的意图，它就会起作用。

# android - 在 android 4 Ice Cream Sandwich 上设置默认 apn

> ID：13024309
> 
> 赞同：1
> 
> 时间：2012-10-23T05:55:53.520
> 
> 标签：android, android-4.0-ice-cream-sandwich, apn

有没有办法在android 4（冰淇淋三明治）上以编程方式设置**默认apn 。**这在 android 2.3 上是可能的，但在 4 上不再适用。现在总是有一个错误消息：

**java.lang.SecurityException：没有写入 APN 设置的权限：用户 10142 和当前进程都没有 android.permission.WRITE_APN_SETTINGS.，无法设置默认访问点！**

“WRITE_APN_SETTINGS”权限仍在清单中。

听说用 4 不能再创建新的 apn 了，但是设置默认的 apn 怎么样？

# html - Selenium WebDriver中使用的各种类型的xpath之间的区别

> ID：13024312
> 
> 赞同：0
> 
> 时间：2012-10-23T05:56:21.917
> 
> 标签：html, xpath, selenium-webdriver

我有以下 HTML 代码片段：

```
<div id="divTooltips_Section_Filter" style="float:right; padding-right: 30px; padding-bottom: 10px;">
<img src="/mkteditor/css/images/tooltip.png" width="25px" height="25px" alt="">
</div> 
```

我按以下方式编写了xpath：

```
1\. //*[@id='divTooltips_Section_Filter']/img
2\. //div[@id='divTooltips_Section_Filter']/img 
```

上面提到的两个 xpath 都运行良好。它们之间的基本/主要区别是什么？WebDriver 有性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:42:41.850

**您的第一个查询**会查找文档中的每个元素，并对`id`属性应用过滤器，然后查找`img`过滤后元素的所有子元素。

**您的第二个查询**查找文档中的每个`div`元素，并对`id`属性应用过滤器，然后查找`img`过滤元素的所有子`div`元素。

这两个查询可能返回不同的结果。

**如果**在您的情况下（给定您期望作为输入的文档），您知道两个查询将返回相同的结果，那么第二个查询应该执行得更好（如果您的 XPath 处理器没有很好地实现），因为对属性的测试将是对文档中元素的子集执行。

# android - 如何在 apache poi api for java 中使用带有 XWPFRun 的自定义字体

> ID：13024313
> 
> 赞同：1
> 
> 时间：2012-10-23T05:56:21.490
> 
> 标签：android, fonts, apache-poi, docx, xwpf

**`XWPFRun`如何在 apache `poi`api for java** [http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFRun.html中](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFRun.html)**使用自定义字体**

`setFontFamily`使用系统字体我在android上做项目时如何使用来自不同位置的`xwpfrun`字体在android中只有三种字体我想为文字处理应用程序使用更多字体。

# jakarta-ee - 消息驱动的 bean 适用于此要求吗？

> ID：13024315
> 
> 赞同：1
> 
> 时间：2012-10-23T05:56:24.117
> 
> 标签：jakarta-ee, ejb, ejb-3.0, message-driven-bean

基本上，我的 Web 应用程序中存在长时间运行任务的问题。当前，此任务由 EJB 执行，该 EJB 在执行任务时处于阻塞状态（任务是外部程序，EJB 只是等待结果）。

现在根据这篇[文章](https://stackoverflow.com/questions/1979277/solution-to-the-long-running-query-problem-in-a-web-application-asynchronous-re)，我想到了将消息驱动 Bean 与 JMS 队列一起使用。

我的问题：这种方法的优点是什么？如果我将 EJB 的调用方法注释为`@Asychnronous`我不会拥有与 MDB 相同的功能吗？JMS/MDB 方法的唯一优势是不会丢失待处理作业的特性吗？就资源管理而言，让 EJB 等待任务结果还是让 MDB 更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:43:45.580

我在这种模式中使用了很多 JMS，原因是在 EJB 3.1 之前，根本不可能对 Session Beans 进行异步调用。这就是为什么您可能经常在现有应用程序中找到此类代码的原因。

在 EJB 上使用异步调用的好处是更易于设置（使用 JMS 并不复杂，但您需要创建资源等）。如果您在可用性和可伸缩性是重要主题的环境中运行，使用 JMS 有几个好处：

*   如果您考虑到应用服务器崩溃，让 JMS 消息持久化有时会很有趣。
*   更重要的是，在我看来，使用 JMS 可以在 JMS 队列后面添加几个“处理”节点，如果您的处理时间较长且负载增加，则可以轻松添加容量（请注意，这也可以通过一些如果您使用远程会话 bean，应用程序服务器，但它不是那么简单）。

# android - 即使在恢复出厂设置后如何防止卸载

> ID：13024323
> 
> 赞同：2
> 
> 时间：2012-10-23T05:58:10.850
> 
> 标签：android

我制作了一个安全应用程序，我想让它更安全。有什么方法可以阻止从设备上卸载，即使是恢复出厂设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-12T04:26:55.597

我知道的最简单的方法是将您的应用程序转换为系统应用程序（就像那些从工厂出厂的手机一样）。尽管为此您需要在手机上进行root。使用您的手机，安装 Link2SD 应用程序并将您的应用程序转换为系统应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T06:02:31.043

这只能在定制的 Android 系统上实现。

# c# - C# linq 查询数据表取方法

> ID：13024326
> 
> 赞同：2
> 
> 时间：2012-10-23T05:58:24.953
> 
> 标签：c#, linq, datatable

我无法从下面的 linq 查询中调用 take 方法

```
var data = from tb in table.AsEnumerable()
           join ch in channelTable.AsEnumerable() on syskey equals (DateTime)ch["syskey"]
           orderby Convert.ToDouble(tb[(string.Format("Channel{0}_data",Convert.ToInt32(ch["Channel_No"])))]) descending                       
           select new
           {
               Channel_No = ch["Channel_No"],
               Channel_data = tb[string.Format("Channel{0}_data", Convert.ToInt32(ch["Channel_No"]))],
           }; 
```

如何从上面的 linq 查询中添加 Take(5)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:00:07.040

就像：

```
var top5 = data.Take(5); 
```

您*也可以*在同一个语句中执行此操作，但它有点难看：

```
var data = (from tb in table.AsEnumerable()
            join ch in channelTable.AsEnumerable() on syskey equals (DateTime)ch["syskey"]
            orderby Convert.ToDouble(tb[(string.Format("Channel{0}_data",Convert.ToInt32(ch["Channel_No"])))]) descending                       
            select new
            {
                Channel_No = ch["Channel_No"],
                Channel_data = tb[string.Format("Channel{0}_data", Convert.ToInt32(ch["Channel_No"]))],
            }).Take(5); 
```

请注意，此处按*字符串*排序可能不会满足您的要求，除非您的值都是个位数 - 您真的想要 channel3、channel2、channel10、channel1 吗？

这是一个非常奇怪的查询 - 特别是因为您的连接不使用第一个表中的任何内容......

# c - 在C中将矩阵和向量相乘

> ID：13024328
> 
> 赞同：2
> 
> 时间：2012-10-23T05:58:37.803
> 
> 标签：c, arrays, 2d, malloc

我想将矩阵和向量相乘，我已经编写了将矩阵和向量存储在 malloc 数组中的函数。对于这个函数，我需要先使用 malloc 创建另一个数组来存储我的答案。然后进行计算（http://www.facstaff.bucknell.edu/mastascu/elessonsHTML/Circuit/MatVecMultiply.htm）

```
#include <stdlib.h>
/* Multiply a matrix by a vector. */
double *matrix_vector_multiply(int rows, int cols,
               double **mat, double *vec){

 // creating an vecotr to hold the answer first

 double *ans= malloc(rows* sizeof(double));

 // do the multiplication:
 mulitply **mat and *vec (mat = the matrix and vec is the vector)

 for (rows=0; rows< ; rows++)
    for (cols=0; cols< ; cols++)
        ans[rows] = ans[rows] + vec[rows][cols] * mat[rows];    

 //not sure if it is right

 // then store the answer back to the ans array            

} 
```

主要功能：

```
double *matrix_vector_multiply(int rows, int cols,
               double **mat, double *vec);

int main(){
  double *answer = matrix_vector_multiply(rows, cols, matrix, vector);

  printf("Answer vector: \n");
  print_vector(rows, answer);
  return 0;
 } 
```

不知道如何用指针进行这种乘法然后将其存储回来..任何帮助将不胜感激！谢谢！

编辑：乘法功能：

```
#include <stdlib.h>
/* Multiply a matrix by a vector. */
double *matrix_vector_multiply(int rows, int cols,
               double **mat, double *vec){

double *ans = malloc(rows * sizeof (double));   
int i;  
for (i=0; i<rows; rows++)
    for (i=0; i<cols; cols++)
        ans[rows] = ans[rows] + vec[rows][cols] * mat[rows];    

return ans; 
```

}

但我在第 12 行遇到错误，下标值既不是数组也不是指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:36:31.127

您的功能有几个错误：

1.  在 for 循环中迭代矩阵的变量不应该是您传递给函数的参数。尝试这样的事情： `for(y=0;y<rows;y++)`

2.  你必须交换`vec`并`mat`在 for 循环中

3.  您必须将答案向量初始化为`0`（另一个 for 循环）

4.  `return ans;`您必须在乘法结束时返回答案 ( )

希望有帮助，扬

# c - 用于复制文件的 execvp 的替代方案，一旦复制完成，我希望它通知

> ID：13024330
> 
> 赞同：1
> 
> 时间：2012-10-23T05:58:39.213
> 
> 标签：c, execvp

我有使用**fork**和**execvp**函数的 c 代码，代码的目的是在复制完成后将 src_file 复制到 target_path，通知用户其状态（打印消息）

我知道 execvp 的使用会替换当前的进程映像。我想知道的是，是否有任何替代方案，以便在完成提供给 execvp 的 cmd 后，控制返回到我的程序并运行后续代码。

```
pid = fork();
if (pid == 0) {
  /* child path */
  printf("Hello, This is CHILD(%d).\n", getpid());
  execvp("cp", av);
  printf("Completed Copying\n");
}
else {
  /* Parent's path */
  printf("Hello, This is PARENT(%d).\n", getpid());
  wait(NULL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:36:35.107

execvp 将替换当前进程的映像，即调用它的进程（这是您使用 fork 创建的子进程）。那么，您为什么不直接在父母中等待（就像您已经做过的那样）让孩子完成并打印消息？

以下链接显示了如何测试状态和返回值。 [文件副本](https://stackoverflow.com/questions/2180079/how-can-i-copy-a-file-on-unix-using-c)

或者，为什么不对源文件和目标文件使用 fopen() 或 open() 并使用代码循环复制，即使用读写 api。这是最快的，您不再需要调用外部二进制 cp 来实现您的目标。

# jasper-reports - JasperReports：当我使用样式时不支持和签名

> ID：13024334
> 
> 赞同：3
> 
> 时间：2012-10-23T05:58:56.337
> 
> 标签：jasper-reports, stylesheet

在*JasperReports*中工作：

```
<style pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true" 
forecolor="red">Instruction and instruction</style> 
```

不在*JasperReports*中工作：

```
<style pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true"
forecolor="red">Instruction & instruction</style> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T10:43:18.830

我用过 &amp; 而不是“&”，它在碧玉报告中工作。

```
<style pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true"
forecolor="red">Instruction &amp;amp; instruction</style> 
```

//在文本文件中我使用了样式标签。

```
<textField isStretchWithOverflow="true" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                <reportElement
                    x="0"
                    y="0"
                    width="290"
                    height="15"
                    key="textField"
                    isRemoveLineWhenBlank="true"/>
                <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" rightPadding="5" bottomBorder="None" bottomBorderColor="#000000"/>
                <textElement textAlignment="Center" isStyledText="true">
                    <font size="9"/>
                </textElement>
            <textFieldExpression   class="java.lang.String"><![CDATA[<style pdfFontName="Helvetica-BoldOblique" isBold="true" isItalic="true"
forecolor="red">Instruction &amp;amp; instruction</style>]]></textFieldExpression>
            </textField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:34:04.913

尝试使用*`&amp;`*而不是使用*`&`*符号。

工作样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ... whenNoDataType="AllSectionsNoDetail">
    <style name="style1" forecolor="#FF0000" fontName="Serif" isBold="true" isItalic="true"/>
    <title>
        <band height="182" splitType="Stretch">
            <staticText>
                <reportElement style="style1" x="27" y="15" width="515" height="20"/>
                <textElement/>
                <text><![CDATA[Instruction and instruction]]></text>
            </staticText>
            <staticText>
                <reportElement style="style1" x="27" y="46" width="515" height="20"/>
                <textElement/>
                <text><![CDATA[Instruction & instruction]]></text>
            </staticText>
            <staticText>
                <reportElement x="27" y="78" width="515" height="20"/>
                <textElement markup="styled"/>
                <text><![CDATA[<style isBold='true'>Instruction and instruction</style>]]></text>
            </staticText>
            <staticText>
                <reportElement x="27" y="108" width="515" height="20"/>
                <textElement markup="styled"/>
                <text><![CDATA[<style isBold='true'>Instruction &amp; instruction</style>]]></text>
            </staticText>
        </band>
    </title>
</jasperReport> 
```

**注意：**此示例中使用了样式***标记*** *。*

结果将是：

![iReport 中的预览](../Images/057c9ff3aaa6435511f89c88ef5ba66a.png)

* * *

有关更多详细信息，您可以查看[使用标记语言创建样式化文本](http://jasperreports.sourceforge.net/sample.reference/markup/index.html#markup)帖子和我[在 JasperReports](https://stackoverflow.com/a/8135922/876298)问题中设置文本字段样式的答案。

# python - Qt/PyQt4 中基于对象的绘制/更新

> ID：13024340
> 
> 赞同：2
> 
> 时间：2012-10-23T05:59:28.833
> 
> 标签：python, qt, pyqt, pyqt4

我想通过使用 PyQt4 在 Python 中的图像上绘制多边形来标记项目。我能够使用 QGraphicsScene 实现图像查看器，但我不理解绘画/更新对象背后的概念。

我想做的是一个多边形类，它支持添加和编辑。让我感到困惑的是`QGraphicsScene.addItem`不同的绘制或更新方法。我想实现的是

1.  在不完整的情况下将多边形绘制为线
2.  完成后将其绘制为填充多边形

算法部分还可以，我不明白的是如何实现绘制或更新功能。

*这是我的困惑*

**在原始示例文件中**：`graphicsview/collidingmice`有一个特殊的函数`def paint(self, painter, option, widget):`是什么画。没有调用paint函数的函数，因此我认为它是QGraphicsView调用的特殊名称，但我不明白什么是painter以及paint函数应该实现什么。

**另一方面，在众多在线教程中**，我发现`def paintEvent(self, event):`函数与图形视图/绘制相比似乎遵循完全不同的概念。

也许更好地解释一下：对我来说**，OpenGL 进行场景更新的方式很清楚**，您总是清理所有内容并一一重新绘制元素。在那里，您只需处理要绘制的项目并绘制适当的项目。没有更新方法，因为您总是在绘制最新状态。这种 Qt GUI 方式对我来说是新的。**你能告诉我将一个项目添加到场景后会发生什么**吗？如何**编辑**已添加到场景**中的内容，始终更新的“循环”在**哪里？

这是我的最小可能形式的来源，它创建了第一个多边形并开始打印它的点。到目前为止，我已经调用了一次绘制方法（为什么只调用一次？）并且有这个错误`NotImplementedError: QGraphicsItem.boundingRect() is abstract and must be overridden`。（只需将任何 jpg 文件复制为 big.jpg）

```
from __future__ import division

import sys
from PyQt4 import QtCore, QtGui

class Polygon( QtGui.QGraphicsItem ):

    def __init__(self):
        super(Polygon, self).__init__()

        self.points = []
        self.closed = False

    def addpoint( self, point ):
        self.points.append( point )
        print self.points

    def paint(self, painter, option, widget):
        print "paint"

class MainWidget(QtGui.QWidget):

    poly_drawing = False

    def __init__(self):
        super(MainWidget, self).__init__()

        self.initUI()

    def initUI(self):

        self.scene = QtGui.QGraphicsScene()

        self.img = QtGui.QPixmap( 'big.jpg' )

            self.view = QtGui.QGraphicsView( self.scene )
        self.view.setRenderHint(QtGui.QPainter.Antialiasing)
        self.view.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
            self.view.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)

        self.pixmap_item = QtGui.QGraphicsPixmapItem( self.img, None, self.scene)
            self.pixmap_item.mousePressEvent = self.pixelSelect

            self.mypoly = Polygon()

                layout = QtGui.QVBoxLayout()
            layout.addWidget( self.view )
            self.setLayout( layout )
        self.resize( 900, 600 )
        self.show()

    def resizeEvent(self, event):
        w_scale = ( self.view.width() )  / self.img.width()
        h_scale = ( self.view.height() ) / self.img.height()
        self.scale = min( w_scale, h_scale)

        self.view.resetMatrix()
        self.view.scale( self.scale, self.scale )

    def pixelSelect(self, event):
        if not self.poly_drawing:
            self.poly_drawing = True
            self.mypoly = Polygon()
            self.scene.addItem( self.mypoly )

        point = event.pos()
        self.mypoly.addpoint( point )

def main():

    app = QtGui.QApplication(sys.argv)
    ex = MainWidget()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# git - 如何修复我的 git 配置？

> ID：13024341
> 
> 赞同：1
> 
> 时间：2012-10-23T05:59:52.297
> 
> 标签：git, version-control, configuration

我跑了`git config --global core.worktree`，它弄乱了我所有的 git repos。如何撤消此更改？core.worktree 的默认值是什么，我该如何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:02:32.420

您可以简单地删除该配置（`git config --global --unset core.worktree`）或：

> 将路径设置为工作树的根。
> 这可以被`GIT_WORK_TREE`环境变量和`--work-tree`命令行选项覆盖

默认的 work_tree 目录是其中的目录`.git`。

# c - 在 ARM Cortex M3 上实现非标准 SPI 变体

> ID：13024348
> 
> 赞同：3
> 
> 时间：2012-10-23T06:00:33.557
> 
> 标签：c, embedded, arm, cortex-m3

我需要为连接到 STM32 Cortex M3 MCU 的闪存芯片创建驱动程序。该芯片通过 SPI 总线进行控制。我打算使用 MCU 的集成 SPI 外设，但不幸的是它只支持 8 位或 16 位数据包，而闪存芯片命令为 14 位长。因此，我必须使用 GPIO 从头开始​​实现协议。我的问题是：确保信号正确时序的正确方法是什么？我目前考虑在禁用中断的情况下在断言和取消断言 GPIO 线之间插入[延迟，但这对我来说似乎相当不可靠。](https://stackoverflow.com/questions/6480939/lpc1768-arm-cortex-m3-microsecond-delay)有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T07:52:44.033

Jeb 的回答是首选方法，如果可能，您应该使用硬件 SPI，如果 DMA 也是一个不错的选项。

如果您由于某种原因发现您不能使用硬件 SPI，但您必须通过 GPIO 使用“bit-banging”来实现它，您应该检查 MCU 上的定时器/PWM 硬件中有哪些可用选项。您*不能也不*应该像您发布的链接中那样使用生硬的“爱好者烧毁延迟”，实时性能将是垃圾，您将占用 CPU 100%。

大多数 MCU 定时器都带有引脚输出功能，允许引脚在定时器结束时改变状态。伪代码将是：

*   确定要发送的下一位是 1 还是 0。
*   相应地设置 MCU 极性寄存器，使其将引脚切换为高电平或低电平。
*   当定时器结束时，您需要再次设置极性，可能通过中断。如何做到这一点非常依赖于硬件。
*   在对数据 (MOSI) 进行 bit-bang 的同时，还需要生成时钟和片选。时钟可以以与数据相同的方式生成，或者如果该选项可用，也可以通过 PWM 信号生成。芯片选择是最简单的部分，因为您只需在数据传输期间将引脚拉低即可。

最后，很可能有一些关于如何为您的特定 MCU 编写软件 SPI 的应用说明或官方示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:25:58.780

如果可能的话，我建议使用 SPI 和 DMA 中的构建！

您可以将数据重新映射为大小为 14 位倍数的字节数组。所以你必须每次发送7*4Bits=28bytes的倍数。
然后您可以使用 8Bit-size 的标准 SPI。

但这应该比使用 SPI/DMA 快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T21:50:39.000

一些使用模糊数据长度的设备被设计成在事务开始时它们将忽略在第一个“1”之前输入的所有“0”位，或者在第一个之前输入的所有“1”位“0”。如果您的设备碰巧以这种方式设计，您可以使用 8 位或 16 位 SPI 模式，方法是输出两个“垃圾”位以及感兴趣的位。

# c# - float.TryParse() 对 C# 中的值进行四舍五入

> ID：13024352
> 
> 赞同：1
> 
> 时间：2012-10-23T06:00:37.590
> 
> 标签：c#

在尝试使用以下参数解析变量浮动时 float.TryParse(value, NumberStyles.Float, CultureInfo.InvariantCulture, out fValue),

value=6666.77777 四舍五入为 6666.778。

谁能帮忙，我不希望我的价值四舍五入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:04:22.753

`float`只有大约 6 位有效数字。请注意，小数点*前的数字也很重要。*`double`在这方面具有更高的精度（大约 16）：

```
PS> [float]::Parse('6666,77777')
6666.778
PS> [double]::Parse('6666,77777')
6666.77777 
```

但正如其他人指出的那样，这只是一个近似值，因为它不能以基数 2 精确表示。如果您需要小数精度（例如货币值），请使用 a `decimal`。对于大多数其他事情，二进制浮点（即`float`和`double`）应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:03:47.900

这是因为值 666.77777 不能以浮点数使用的二进制形式表示 - 实际数字包含的二进制数比浮点数的空间多。结果数字是最接近的近似值。

> 当浮点运算（或转换为浮点格式）的确切结果需要比有效数字中的数字更多的数字时，使用舍入。IEEE 754 要求正确舍入：也就是说，舍入结果就像使用无限精确的算术来计算值然后进行舍入（尽管在实现中只需要三个额外的位来确保这一点）。有几种不同的舍入方案（或舍入模式）。从历史上看，截断是典型的方法。自 IEEE 754 引入以来，更常用的是默认方法（四舍五入，与偶数相等，有时称为银行家四舍五入法）。

`double`如果您需要更高的精度，或者需要更多的精度，您应该考虑使用`decimal`，尽管它们在某些时候也会遭受精度损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:08:54.850

为什么不使用[Double.TryParse](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)或[Decimal.TryParse](http://msdn.microsoft.com/en-us/library/ew0seb73.aspx)来支持更高的精度：

> **float** : 约 ±1.5 x 10-45 至 ±3.4 x 1038，7 位有效数字
> 
> **双倍**：约 ±5.0 x 10-324 至 ±1.7 x 10308，有效数字为 15 或 16
> 
> **十进制**：约 ±1.0 x 10-28 至 ±7.9 x 1028，有效数字为 28 或 29

试试这段代码片段：

```
double fValue;
double.TryParse("6666.77777", NumberStyles.Double, CultureInfo.InvariantCulture, out fValue); 
```

或者

```
decimal fValue;
decimal.TryParse("6666.77777", NumberStyles.Decimal, CultureInfo.InvariantCulture, out fValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:03:26.050

`decimal`如果您需要更高的精度，您应该使用。

# arrays - MIPS中的冒泡排序算法

> ID：13024353
> 
> 赞同：1
> 
> 时间：2012-10-23T06:00:38.807
> 
> 标签：arrays, loops, assembly, mips

我正在尝试在汇编中编写一个使用冒泡排序算法对数组进行排序的过程，但我遇到了一个问题：

在`line 22`中，当第一次迭代执行时没有任何问题，程序`array[i+1]`完美地加载到注册`$a1`器中，如果交换条件有效，程序交换没有任何问题。然而，在第二次迭代中，程序总是加载`0`到`$a1`元素的实际值中！我尝试调试它，但没有什么清楚的，我不知道这是什么原因。

```
1\.  # Procedure:    bubbleSort
2\.  # Objective:    sort an array of integer elements in nondecreasing order
3\.  # Input:        an address of an array of integers
4\.  # Output:       an array sorted in nondecreasing order
5\. 
6\.  bubbleSort:
7\. 
8\.  move    $t0, $a0     # move address of the array into $t0
9\.  li      $s0, 1      # boolean swap = false.  0 --> false, 1 --> true
10\. li      $t1, 0      # j = 0;
11\. li      $t2, 0      # i = 0;
12\. li      $s1, 9      # array length
13\. loop:
14\.     beqz    $s0, exit       # exit if swap = false
15\.     li      $s0, 0          # swap = false;
16\.     addiu   $t1, $t1, 1  # j++;
17\.     move    $t2, $0      # i = 0;
18\.     subu    $s2, $s1, $t1  # s2 = length - j
19\.     forLoop:
20\.         bge     $t2, $s2, exitForLoop   # if i>=s2, exit
21\.         lw      $a0, 0($t0)         # a0 = array[i]
22\.         lw      $a1, 4($t0)         # a1 = array[i+1]
23\.         ble     $a0, $a1, update        # if array[i]<=array[i+1] skip
24\.         sw      $a1, 0($t0)         # a[i+1] = a[i]
25\.         sw      $a0, 4($t0)         # a[i] = a[i+1]
26\.         li      $s0, 1                 # swap = true;
27\.         update:
28\.         addiu   $t2, $t2, 1         # i++
29\.         sll     $t3, $t2, 2         # t3 = i*4
30\.         addu    $t0, $t0, $t3        # point to next element -->
31\.         j       forLoop
32\.     exitForLoop:
33\.         j   loop
34\. exit:
35\.     jr      $ra 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T03:49:30.183

我刚刚完成了一项具有相同目标的任务；假设用户输入是一个由十个字母组成的字符串，对用户输入进行冒泡排序。我评论了它的废话，所以请随意用作参考。作业还没有评分，我只是希望他们不会因为他们在网上找到这个而认为我作弊。

```
####################################################################################################################################
#   Data
####################################################################################################################################
.data
prompt: .asciiz  "\n\nEnter up to 10 characters: "  # Prompt asking for user input
newLine: .asciiz "\n"                               # Newline character
theString: .asciiz "           "                    # A ten character string initially filled with whitespace

####################################################################################################################################
#   Text
####################################################################################################################################
.text 

################################################################################################################
#####   Procedure: Main
#####   Info:      Asks user for input, gets input, and then call 
#####              procedures to manipulate the input and output.
################################################################################################################
main:
    ############################################################
    #  Print Prompt
    ############################################################
    la $a0, prompt   # Load address of prompt from memory into $a0
    li $v0, 4        # Load Opcode: 4 (print string) 
    syscall          # Init syscall

    #############################################
    #  Read User Input into address of theString
    #############################################
    la $a0,theString  # Load address of theString into syscall argument a0
    li $a1,11         # Load sizeOfInput+1 into syscall argument a1
    li $v0,8          # Load Opcode: 8 (Read String)
    syscall

    ##############################
    #  Define total num of chars
    ##############################
    li $s7,10           # s7 upper index

    ##############################
    #  Call procedures 
    ##############################
    jal uppercase  
    jal sort
    jal print
    j exit
################################################################################################################
############################################# main END   #######################################################
################################################################################################################

################################################################################################################
#####   Procedure: uppercase
#####   Info:      Loops through the ten elements of chars gathered from 
#####              user input and if ascii is in range between 97  
#####              and 122, it will subtract 32 and store back
################################################################################################################
uppercase:

    la $s0, theString    # Load base address to theString into $t0
    add $t6,$zero,$zero  # Set index i = 0 ($t6)

    lupper:
        #####################################
        #  Check for sentinal val and if true
        #  branch to done to jump back to ra
        #####################################
        beq $t6,$s7,done 

        #####################################
        #  Load Array[i]
        #####################################
        add $s2,$s0,$t6 #
        lb  $t1,0($s2)

        #####################################
        #  if char is within lowercase 
        #  range.
        #####################################
        sgt  $t2,$t1,96
        slti $t3,$t1,123
        and $t3,$t2,$t3
        #####################################
        #  else, don't store byte
        #####################################
        beq $t3,$zero,isUpper
        addi $t1,$t1,-32
        sb   $t1, 0($s2)

        isUpper:
        #####################################
        #  increment and Jump back 
        #####################################
        addi $t6,$t6,1
        j lupper
################################################################################################################
############################################# uppercase END   ##################################################
################################################################################################################

################################################################################################################
#####   Procedure: sort
#####   Info:      Bubble sorts whatever is contained within 
#####              theString based on ascii values
################################################################################################################
sort:   
    ####################################
    #  Initialize incrementer for outer
    #  loop
    ####################################
    add $t0,$zero,$zero 

    ####################################
    #  Outer Loop
    #################################### 
    loop:
        #####################################
        #  Check for sentinal val and if true
        #  branch to done
        #####################################
        beq $t0,$s7,done

        ####################################
        #  Initialize upper bound of inner
        #  loop ( 10 - i - 1 ) 
        ####################################
        sub $t7,$s7,$t0
        addi $t7,$t7,-1

        ####################################
        #  Initialize incrementer for inner
        #  loop
        ####################################
        add $t1,$zero,$zero

        ####################################
        #  Inner Loop
        #################################### 
        jLoop:
            #####################################
            #  Check for sentinal val and if true
            #  branch to continue
            #####################################
            beq $t1,$t7,continue

            ####################################
            #  Load Array[i] and Array[i+1]
            ####################################
            add $t6,$s0,$t1
            lb  $s1,0($t6)
            lb  $s2,1($t6)

            #########################################
            #  If ascii(Array[i]) > ascii(Array[i+1])
            #  then swap and store
            #########################################
            sgt $t2, $s1,$s2
            #########################################
            #  Else,  don't swap and store
            #########################################
            beq $t2, $zero, good
            sb  $s2,0($t6)
            sb  $s1,1($t6)

            good:
            #########################################
            #  increment and Jump back 
            #########################################
            addi $t1,$t1,1
            j jLoop

        continue:
        #####################################
        #  increment and Jump back 
        #####################################
        addi $t0,$t0,1
        j loop
################################################################################################################
############################################# sort END   #######################################################
################################################################################################################

################################################################################################################
#####   Procedure: Print
#####   Info:      Prints whatever is stored inside theString
#####              
################################################################################################################
print:

    ####################################
    # Print a new line
    ####################################
    la $a0,newLine
    li $v0,4
    syscall 

    ####################################
    #  Initialize incrementer for loop
    ####################################
    add $t6,$zero,$zero # Set index i = 0 $t6

    lprint:
        #####################################
        #  Check for sentinal val and if true
        #  branch to done
        #####################################
        beq $t6,$s7,done  

        ####################################
        #  Load Array[i] into t1 and print
        ####################################
        add $t1,$s0,$t6 
        lb $a0, 0($t1)  # Load argument
        li $v0, 11      # Load opcode
        syscall         # Call syscall

        #########################################
        #  increment and Jump back 
        #########################################
        addi $t6,$t6,1  
        j lprint
################################################################################################################
############################################# print END   ######################################################
################################################################################################################

################################################################################################################    
#####  Procedure: done
#####       Info: Jumps to $ra. Only one procedure is needed to jump back to ra
################################################################################################################

done:
    jr $ra
exit: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T22:42:18.503

这是 MIPS 中冒泡排序的一段代码。输入 10 个未排序的数字，这将打印回排序后的数组。希望这可以帮助 ：）

```
.text
.globl main
main:
     la $t1,array
     li $s1,10

L1: beq $s1,$s2,L2
li $v0,5
syscall
sw $v0,0($t1)
addi $t1,$t1,4
addi $s2,$s2,1
j L1
li $s1,40
li $s2,0
li $s3,4

L2: beq $s1,$s2,printf
add $t1,$t1,$s2
lw $t0,0($t1)   #a[i]
L3: beq $s3,$s1,incc
add $t1,$t1,$s3
lw $t2,0($t1)   #a[j]
slt $t3,$t0,$t2
beq $t3,$0,swap
L4: addi $s3,$s3,4
j L3

swap:   
sw $t0,0($t1)
sub $t1,$t1,$s2
sw $t2,0($t1)
j L4

incc:
addi $s2,$s2,4
j L2

printf:
la $t1,array
li $t0,0
li $v0,4
la $a0,print
syscall
li $s2,0
li $s1,10
L5: beq $s1,$s2,out
li $v0,1
lw $t0,0($t1)
move $a0,$t0
syscall
li $v0,4
la $a0,space
syscall
addi $s2,$s2,1
addi $t1,$t1,4
j L5

out:
li $v0,10
syscall
.end

.data

array: .word 0,0,0,0,0,0,0,0,0,0
print: .asciiz "\nthe sorted array : "
space: .asciiz " " 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T06:29:10.003

第 30 行：您正在逐步移动数组并修改数组指针。

在第一个和所有后续 forloop 之后，您需要在再次执行 forloop 之前重新加载数组的地址，否则它指向错误的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-02T14:21:18.950

试试这个冒泡排序。所有行都有总结评论。在 qtspim 上效果很好。

```
 .data
arr: .word 10, 60, 40, 70, 20, 30, 90, 100, 0, 80, 50
  space: .asciiz " "
  .text
  .globl main

main:
  lui $s0, 0x1001                   #arr[0]
  li $t0, 0                         #i = 0
  li $t1, 0                         #j = 0
  li $s1, 11                        #n = 11
  li $s2, 11                        #n-i for inner loop
  add $t2, $zero, $s0               #for iterating addr by i
  add $t3, $zero, $s0               #for iterating addr by j

  addi $s1, $s1, -1

outer_loop:
  li  $t1, 0                        #j = 0
  addi $s2, $s2, -1                 #decreasing size for inner_loop
  add $t3, $zero, $s0               #resetting addr itr j

  inner_loop:
    lw $s3, 0($t3)                  #arr[j]
    addi $t3, $t3, 4                #addr itr j += 4
    lw $s4, 0($t3)                  #arr[j+1]
    addi $t1, $t1, 1                #j++

    slt $t4, $s3, $s4               #set $t4 = 1 if $s3 < $s4
    bne $t4, $zero, cond
    swap:
      sw $s3, 0($t3)
      sw $s4, -4($t3)
      lw $s4, 0($t3)

    cond:
      bne $t1, $s2, inner_loop      #j != n-i

    addi $t0, $t0, 1                  #i++
  bne $t0, $s1, outer_loop           #i != n

  li $t0, 0
  addi $s1, $s1, 1
print_loop:
  li $v0, 1
  lw $a0, 0($t2)
  syscall
  li $v0, 4
  la $a0, space
  syscall

  addi $t2, $t2, 4                  #addr itr i += 4
  addi $t0, $t0, 1                  #i++
  bne $t0, $s1, print_loop          #i != n

exit:
  li $v0, 10
  syscall 
```

# python - 将 Python / Numpy 代码转换为 Cython - 数组问题 - 缓冲区类型仅允许作为函数局部变量？

> ID：13024357
> 
> 赞同：1
> 
> 时间：2012-10-23T06:00:59.370
> 
> 标签：python, arrays, numpy, cython

我正在尝试将一些 Python / Numpy 代码转换为 Cython 以加快速度。这是我的代码：

```
cimport numpy as np
import numpy as np
from numpy import *
import pylab as pl
from pylab import * 
from scipy import integrate

def myc_rb_e2f(np.ndarray[double,ndim=1] y = np.zeros(7),double t, double k,double d):

    M = y[0]
    E = y[1]
    CD = y[2]
    CE = y[3]
    R = y[4]
    RP = y[5] 
    RE = y[6]

    cdef double S = 0.01
    if t > 300.0:
        S = 5.0
    #if t > 400
        #S = 0.01

    cdef double t1 = k[0]*S/(k[7]+S)
    cdef double t2 = k[1]*(M/(k[14]+M))*(E/(k[15]+E))
    cdef double t3 = k[5]*M/(k[14]+M)
    cdef double t4 = k[11]*CD*RE/(k[16]+RE)
    cdef double t5 = k[12]*CE*RE/(k[17]+RE)
    cdef double t6 = k[2]*M/(k[14]+M)
    cdef double t7 = k[3]*S/(k[7]+S)
    cdef double t8 = k[6]*E/(k[15]+E)
    cdef double t9 = k[13]*RP/(k[18]+RP)
    cdef double t10 = k[9]*CD*R/(k[16]+R)
    cdef double t11 = k[10]*CE*R/(k[17]+R)

    dM = t1-d[0]*M
    dE = t2+t3+t4+t5-k[8]*R*E-d[1]*E
    dCD = t6+t7-d[2]*CD
    dCE = t8-d[3]*CE
    dR = k[4]+t9-k[8]*R*E-t10-t11-d[4]*R
    dRP = t10+t11+t4+t5-t9-d[5]*RP
    dRE = k[8]*R*E-t4-t5-d[6]*RE

    dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

    return dy

cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
cdef np.ndarray[double,ndim=1] k = np.zeros([19])
cdef np.ndarray[double,ndim=1] d = np.zeros([7])
cdef int i

for i in range (0,5000):
    k[0] = 1.+0.1*randn(1)
    k[1] = 0.15+0.05*randn(1)
    k[2] = 0.2+0.05*randn(1)
    k[3] = 0.2+0.05*randn(1)
    k[4] = 0.35+0.05*randn(1)
    k[5] = 0.001+0.0001*randn(1)
    k[6] = 0.5+0.05*randn(1)
    k[7] = 0.3+0.05*randn(1)
    k[8] = 30.+5.*randn(1)
    k[9] = 18.+3.*randn(1)
    k[10] = 18.+3.*randn(1)
    k[11] = 18.+3.*randn(1)
    k[12] = 18.+3.*randn(1)
    k[13] = 3.6+0.5*randn(1)
    k[14] = 0.15+0.05*randn(1)
    k[15] = 0.15+0.05*randn(1)
    k[16] = 0.92+0.1*randn(1)
    k[17] = 0.92+0.1*randn(1)
    k[18] = 0.01+0.001*randn(1)
    d[0] = 0.7+0.05*randn(1)
    d[1] = 0.25+0.025*randn(1)
    d[2] = 1.5+0.05*randn(1)
    d[3] = 1.5+0.05*randn(1)
    d[4] = 0.06+0.01*randn(1)
    d[5] = 0.06+0.01*randn(1)
    d[6] = 0.03+0.005*randn(1)
    r = integrate.odeint(myc_rb_e2f,y0,t,args=(k,d))
    E_simulated[:,i] = r[:,1]

for i in range(0,10000):
    E_avg[i] = sum(E_simulated[i,:])/5000.

pl.plot(t,E_avg,'-ro')
pl.show() 
```

尝试编译时出现大量错误：

```
Error compiling Cython file:
------------------------------------------------------------
...

        dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

        return dy

cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:48:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...

cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:52:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:53:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:54:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:55:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
cdef np.ndarray[double,ndim=1] k = np.zeros([19])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:56:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
cdef np.ndarray[double,ndim=1] k = np.zeros([19])
cdef np.ndarray[double,ndim=1] d = np.zeros([7])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:57:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cimport numpy as np
^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:1:0: Buffer vars not allowed in module scope
An exception has occurred, use %tb to see the full traceback.

SystemExit: error: command 'gcc' failed with exit status 1

%run setup.py build_ext --inplace
running build_ext
cythoning myc_rb_e2f_pyx.pyx to myc_rb_e2f_pyx.c
building 'myc_rb_e2f_pyx' extension
C:\Python27\Scripts\gcc.exe -mno-cygwin -mdll -O -Wall -DMS_WIN64 -IC:\Python27\lib\site-packages\numpy\core\include -IC:\Python27\include -IC:\Python27\PC -c myc_rb_e2f_pyx.c -o build\temp.win-amd64-2.7\Release\myc_rb_e2f_pyx.o

Error compiling Cython file:
------------------------------------------------------------
...

        dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

        return dy

cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:48:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...

cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:52:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:53:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:54:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:55:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
# Initial concentrations of [M,E,CD,CE,R,RP,RE]
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
cdef np.ndarray[double,ndim=1] k = np.zeros([19])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:56:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=2] r = np.zeros([10000,5000])
cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
cdef np.ndarray[double,ndim=1] k = np.zeros([19])
cdef np.ndarray[double,ndim=1] d = np.zeros([7])
                              ^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:57:31: Buffer types only allowed as function local variables

Error compiling Cython file:
------------------------------------------------------------
...
cimport numpy as np
^
------------------------------------------------------------

myc_rb_e2f_pyx.pyx:1:0: Buffer vars not allowed in module scope
An exception has occurred, use %tb to see the full traceback.

SystemExit: error: command 'gcc' failed with exit status 1 
```

谁能帮我解决我在声明数组时出错的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:18:12.440

错误消息非常清楚：顶层不允许缓冲区类型的变量。将所有从 的声明 开始的代码`t`放在一个函数中，比如说`main`，然后调用它。

# android - 将二维数组传递给android中的新活动

> ID：13024360
> 
> 赞同：1
> 
> 时间：2012-10-23T06:01:54.450
> 
> 标签：android, multidimensional-array, android-activity

如何传递**`2d String array`**给**`new activity`**???

然后在新活动中，我怎样才能**`retrieve`**阵列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:10:59.163

你必须使用：

```
 String [][]str;
 Intent summaryIntent = new Intent(this, Second.class);
 Bundle b=new Bundle();
 b.putSerializable("Array", str);
 summaryIntent.putExtras(b);
 startActivity(summaryIntent); 
```

对于接收阵列使用：

```
Bundle b = getIntent().getExtras();
String[][] list_array = (String[][])b.getSerializable("Array"); 
```

谢谢

# python - Django-Nonrel(mongo-backend)：模型实例修改跟踪

> ID：13024361
> 
> 赞同：0
> 
> 时间：2012-10-23T06:01:59.183
> 
> 标签：python, django, mongodb, django-models, django-nonrel

我正在使用带有 mongodb 后端的 Django 非 rel 版本。我有兴趣跟踪模型实例上发生的更改，例如，如果有人创建/编辑或删除模型实例。后端数据库是 mongo，因此模型在各自的集合/数据库中具有关联的“_id”字段。

现在我想提取这个 modif 操作发生的“_id”字段。我们的想法是将此“_id”字段写入另一个数据库，以便有人可以从那里获取它并知道更新了什么对象。

我考虑过从Django **“models.Model”覆盖****save()**方法，因为我所有的模型都是从它派生的。然而，mongo“_id”字段显然不存在，因为 mongo-insert 尚未发生。

 **是否有可能在保存操作发生在 mongo 之后调用伪**post-save()方法？**django/django-toolbox/pymongo 可以提供这样的组合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:24:09.413

在深入研究了 Django 模型之后，我能够解决这个问题。**save()**方法又调用**save_base()**方法。此方法将返回的结果（在 mongo 的情况下为 ids）保存到**self.id**中。然后可以通过覆盖模型的**save()**方法来选择这个**_id字段****

# java - 二维数组和 JButton

> ID：13024362
> 
> 赞同：0
> 
> 时间：2012-10-23T06:02:06.983
> 
> 标签：java, jbutton, multidimensional-array

现在我需要编写一个 8 拼图游戏，看起来 [像这样]

![在此处输入图像描述](../Images/948ff4fb9dfa091fc508175b2a65cc81.png)

老师让我们写三个不同的类，分别是 Piece.java、EightPuzzle.java 和 EightPuzzlePanel.java。如您所见，Piece.java 代表这八个拼图板上的每个单独的块，如“1”、“2”；EightPuzzle.java 代表了包含这 9 个棋子/按钮的游戏板。EightPuzzlePanel.java 是 GUI 的东西。

所以我的问题是，既然我们需要创建一个 Piece[][]piece = new Piece[][]，一个 2D 数组，我们还需要将这些棋子排列在棋盘上。我想我可以创建 9 个 JButtons 并将 2D 数组与 9 个 JButtons 链接（或者有更好的方法来对 2D 数组进行排序），但我不知道该怎么做。

此外，按钮需要由鼠标和键盘控制。这对我来说是另一个挑战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:15:17.353

由于这是家庭作业，因此我不会详细介绍，但这就是我将如何去做：

1.  Make`Piece`扩展了`JButton`类。该`Piece`对象获取要显示的文本以及您希望它呈现的图像的位置。您应该能够在网上找到大量关于如何将图像添加到`JButton`.
2.  `EightPuzzle`扩展`JPanel`类，并使用[网格布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)将*碎片*整齐地呈现在网格中。这个类接受一个二维`Piece`对象数组，然后渲染。
3.  使`EightPuzzlePanel`也扩展`JPanel`类。此类接受另一个 JPanel ( `EightPuzzle`) 并附加您可能需要的任何其他按钮。
4.  最后创建一个扩展的 Main 类，`JFrame`然后我将其附加`EightPuzzlePanel`到它（它又应该包含另一个面板和其他按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:18:03.583

对于鼠标和键，您需要设置一些动作侦听器。

对于这个问题，您可以只使用一维数组。只要您将 9 块存储在数组中，您就可以使用您`layout manager`将它们放在正确的位置 - 然后遍历数组很简单。

# java - 迁移到 Microsoft JDBC 驱动程序 4.0

> ID：13024364
> 
> 赞同：-3
> 
> 时间：2012-10-23T06:02:23.557
> 
> 标签：java, sql-server, jdbc, driver

我的项目使用***Microsoft JDBC Driver 3.0*** for SQL server。从那时起，Microsoft 已经包含了***Microsoft JDBC Driver 4.0***版本，我的客户一直在寻找新版本相对于当前版本的优势。他们还想知道是否有任何兼容性问题需要解决。

我们当前的系统在 Windows Server 2008 上使用 Java 1.6、WAS 7.0、Hibernate 3.0 和 MS SQL Server 2000。

关于上述配置，尤其是**SQL Server 2000**，请告知迁移到***Microsoft JDBC Driver 4.0***版本的优势和问题。客户没有考虑从 SQL Server 2000 更改/升级数据库，因为它巨大且涉及很大的风险。

 **如果底层数据库仍然是 SQL Server 2000，那么从 3.0 到 4.0 版的驱动程序更改是否会有任何好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:02:53.977

请[点击此链接](http://msdn.microsoft.com/en-us/library/ms378749%28v=sql.105%29.aspx)。您可以看到所有新功能和对**版本 3.0 到 4.0**的更改。他们只是添加了对不同事物的新支持，例如某些数据类型 time、date、datetime2、datetimeoffset。一些字节级访问和**列行为更改**。AFAIK如果您迁移驱动程序，那么它不会给您带来问题，因为该驱动程序还包含以前的版本支持。**

# lisp - 在 Lisp 中计算参数

> ID：13024365
> 
> 赞同：1
> 
> 时间：2012-10-23T06:02:28.603
> 
> 标签：lisp

> **可能重复：**
> [在 Common Lisp 中确定函数参数列表](https://stackoverflow.com/questions/8353661/determining-function-argument-list-in-common-lisp)

Lisp 中有没有办法确定一个函数需要多少个参数？我正在寻找的是一个函数或宏，它接受一个函数并返回它需要的参数数量。

# gstreamer - hlsdemux 管道

> ID：13024370
> 
> 赞同：0
> 
> 时间：2012-10-23T06:03:05.837
> 
> 标签：gstreamer

我已经创建了一个 Web 服务器并托管了一个用于 HLS 流的 AAC 流，我可以在另一台机器上使用

```
gst-launch-0.10 souphttpsrc location=http://xx.xx.xx.xx/prog_index.m3u8 ! hlsdemux ! decodebin2 ! alsasink 
```

但是当我这样做时

```
souphttpsrc location=http://xx.xx.xx.xx/prog_index.m3u8 ! hlsdemux ! aacparse ! faad ! alsasink 
```

我在 hlsdemux 日志中收到此错误，并且没有音频输出，因为 aacparse 没有收到任何数据

```
0:00:00.066165787  8139 0xb07098f0 INFO                hlsdemux gsthlsdemux.c:734:gst_hls_demux_loop:<hlsdemux0> First fragments cached successfully
0:00:00.066190861  8139 0xb07098f0 DEBUG               hlsdemux gsthlsdemux.c:680:switch_pads: Switching pads (oldpad:(nil))
0:00:00.066450610  8139 0xb07098f0 DEBUG               hlsdemux gsthlsdemux.c:757:gst_hls_demux_loop:<hlsdemux0> Sending new-segment. segment start:0:00:00.000000000
0:00:00.066510536  8139 0xb07098f0 DEBUG               hlsdemux gsthlsdemux.c:796:gst_hls_demux_loop:<hlsdemux0> error, stopping task
Pipeline is PREROLLED ...
0:00:00.066541057  8139 0xb07098f0 DEBUG               hlsdemux gsthlsdemux.c:989:gst_hls_demux_stop_update:<hlsdemux0> Stopping updates thread 
```

我可以使用播放单个片段文件

```
gst-launch-0.10 filesrc location=fileSequence0.aac ! aacparse ! faad ! alsasink 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T06:48:34.280

尝试在 hlsdemux 和 aacparse 之间添加 mpegtsdemux ......因为 hlsdemux 获取 uri 直到它获得 .ts 流 nu 将需要 mpegtsdemux 来对其进行解复用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:00:01.880

尝试添加大写：`... ! hlsdemux ! audio/mpeg ! aacparse ! ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T13:53:21.843

这是 HLS 音频流的解决方案：

```
... m3u8 ! hlsdemux ! decodebin ! audioconvert ! autoaudiosink 
```

或者如果您需要再次将其作为 UDP 流式传输：

```
... m3u8 ! hlsdemux ! decodebin ! audioconvert  ! faac ! audio/mpeg, stream-format=raw ! aacparse ! mpegtsmux ! udpsink host=230.0.0.1 port=5000 
```

# c# - 我可以扩展一个 C# 枚举，以便我可以以不止一种方式格式化它的值吗？

> ID：13024372
> 
> 赞同：0
> 
> 时间：2012-10-23T06:03:11.543
> 
> 标签：c#, enums, extension-methods

我有以下枚举：

```
public enum ContentKey {
    Menu = 0,
    Article = 1,
    Topic = 2
}; 
```

当我使用 Enum 时，我一直在执行以下操作：

```
((int)ContentKey.Topic).ToString("D2") 
```

有什么方法可以创建枚举的扩展，这样我就不必编写上面的代码了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:06:05.140

您可以使用扩展方法：

```
public static class Ext
{
    public static string ToFormattedString(this ContentKey key, string format)
    {
        //do staff
    }
} 
```

用法：

```
ContentKey.Topic.ToFormattedString("D2") 
```

# java - 自定义 primefaces 日历以自定义样式显示假期

> ID：13024381
> 
> 赞同：0
> 
> 时间：2012-10-23T06:04:01.263
> 
> 标签：java, primefaces

我想以自定义样式显示假期和周末（*周五和周六*）。PrimeFaces 是否提供了任何属性来执行此操作，或者我应该怎么做才能从现有的`<p:calendar>`.

不使用 javascript 或 jquery。

提前致谢。

问候， 晴天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:36:41.600

我认为无需编写自定义核心自定义组件即可实现。

创建一个复合组件并使用 java 脚本突出显示您感兴趣的自定义日期。

onClick（在 P:cal 上调用以下函数）

```
function updatedaysHighlighter(){
    var rows = document.getElementById('ui-datepicker-div').getElementsByTagName("tr");
    if(days.length>1)  {
       alert(days[4].innerHTML);
    }
} 
```

您可以尝试使用 td 并根据需要更新每个 td 的类值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:34:18.507

它不被primeface支持...

有一个关于这个确切功能的*新功能请求，其中一个评论也要求假期*

你可以投票给它[第 1805 期：日历的新功能：接收日期列表以突出显示它们](http://code.google.com/p/primefaces/issues/detail?id=1805)

但与此同时，您最好自己使用 jquery （[在 datepicker jquery 中突出显示假期](https://www.google.com/search?q=hightlisgth%20holidays%20in%20calendat%20jquery&rlz=1C1CHEU_enIL465IL465&oq=hightlisgth%20holidays%20in%20calendat%20jquery&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=en&rlz=1C1CHEU_enIL465IL465&sclient=psy-ab&q=highlight%20holidays%20in%20datepicker%20%20jquery&oq=highlight%20holidays%20in%20datepicker%20%20jquery&gs_l=serp.3...11683.13312.0.13556.11.11.0.0.0.7.252.1995.0j7j4.11.0.les;..0.0...1c.1.aGPzdfKarNA&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=ee162bb380b5e428&bpcl=35466521&biw=1920&bih=955)）

# c# - 替代使用 PropertyPath 查找 DependencyProperty + 实例？

> ID：13024383
> 
> 赞同：1
> 
> 时间：2012-10-23T06:04:18.700
> 
> 标签：c#, xaml, reflection, binding, storyboard

我正在尝试编写一些增强故事板的通用代码。作为其中的一部分，我希望能够获得 TargetProperty 引用的 DependencyProperty。目的是以编程方式设置依赖属性的值。

.NET 有一个很棒的类可以做到这一点——PropertyPath 完成了看起来像的工作。但是，它几乎是完全私有的，所以你无法真正访问它而无需反射。

有没有人知道的替代方案？

（即给定“(UIElement.RenderTransform).(CompositeTransform.TranslateX)”的 TargetProperty 和给定对象，我想获得一个 DependencyProperty + 对象，该对象对应于位于 RenderTransform 属性上的 CompositeTransform 实例的 TranslateX 属性我提供的对象）

编辑：从 PropertyInfo 更改为 DependencyProperty

# perforce - 从 perforce 历史记录中删除提交的变更列表

> ID：13024386
> 
> 赞同：7
> 
> 时间：2012-10-23T06:04:41.903
> 
> 标签：perforce, changelist

我不小心向我的 perforce 服务器提交了错误的更改列表。然后，我使用“backout changelist”选项退出了该更改列表。但是，这两个更改出现在所有受影响文件的历史记录中，它们曾经被删除然后又重新添加回来。

我希望能够从这两个更改列表的 perforce 服务器中删除历史记录。是否可以。可以通过一些 Perforce 管理员命令来完成。

编辑：我已经看到`p4 change -d -f`可以删除更改列表，但这需要在更改列表中的文件上使用 p4 obliterate。这是否意味着我必须删除所有受更改列表影响的文件。这对我来说似乎不是一个可行的解决方案，因为我不想删除这些文件。由于两个提交的更改列表，我是否应该只删除文件的这两个特定修订？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:53:11.953

您的 perforce 管理员可以调用`p4 obliterate`以彻底清除文件、修订和历史记录。但我强烈建议不要这样做。回滚文件/更改并查看其历史记录是一件非常正常的事情。

如果您仍然决定使用`p4 obliterate`，请确保首先在没有“-y”选项的情况下调用它（预览版），然后（如果 perforce 所说的输出正常）使用“-y”选项调用相同的命令（实际执行抹杀）。

如果您`p4 obliterate`使用文件修订（例如`p4 obliterate //depot/dir/file#5`）调用，则只会删除该修订的更改和历史记录，而所有以前的修订和历史记录都将保持不变。您还可以删除修订范围。

# c# - C#将PDF文件转换为Word doc，反之亦然

> ID：13024387
> 
> 赞同：0
> 
> 时间：2012-10-23T06:04:52.580
> 
> 标签：c#, .net, pdf, converter, doc

我需要在我的 PDF 文件中突出显示一些随机文本。我的朋友建议我将 PDF 转换为 Word 文档并解析文档并在转换回 PDF 之前进行突出显示。

有什么办法可以突出显示文本吗？

任何可用于将 PDF 转换为 doc 的第三方库，反之亦然。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:28:59.520

您可以使用`Aspose`具有将 pdf 文件转换为 word 的选项的 dll ，反之亦然。

对于特定单词的突出显示，您可以使用`BytesCout.pdfextractor`dll 来查找搜索单词的位置。一旦找到单词的位置，您就可以轻松地突出显示它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:15:29.650

将 PDF 转换为 Word，特别是如果您希望生成的 Word 文档易于编辑，通常不是一件容易的事。我怀疑你会发现它是免费软件。

也许您应该寻找一个可以搜索 PDF 并突出显示其中文本的库。如果您创建一个等待您搜索的单词的自定义 RenderListener，则可以在 iTextSharp（AGPL 免费）中使用。当它找到这个词时，[像这样](https://stackoverflow.com/questions/8582706/highlighting-text-colors-of-existing-pdf-using-itextsharp-using-c-sharp)标记它（感谢 pmtamal，提供链接）。

当然还有许多其他 PDF 库也可以做到这一点，我只是主要使用 iText ......

# c++ - 用于折叠 C++ 代码的 Visual Studio 插件

> ID：13024391
> 
> 赞同：9
> 
> 时间：2012-10-23T06:05:16.680
> 
> 标签：c++, visual-studio

我想要一个 Visual Studio 插件来折叠视觉中的 C++ 代码。例如，我想折叠一个`if`块中的语句（如下所示）。我知道 Visual Studio 有“大纲”菜单，但它似乎对我不起作用，因为它有时会折叠宏定义和其他东西。

有谁知道可以帮助我的工具？ ![崩溃的例子](../Images/be0a38df5f52f6b3b29984da63568a15.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-23T06:13:14.267

您需要启用此功能：

工具 -> 选项 -> 文本编辑器 -> C/C++ -> 格式化 -> 检查“大纲”中的所有内容

然后，重新打开源文件以重新加载大纲。

（PS。这至少在 Visual Studio 2008 中有效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:15:36.440

我一直在为 Visual Studio 使用 Visual Assist X 插件并取得了巨大的成功。它可以做你正在寻找的，然后更多。

不幸的是，这不是免费软件，但这是可以大大提高您的生产力并且真正值得花钱的开发人员工具之一。

# magento - sales_quote_add_item - 保存报价时出错

> ID：13024394
> 
> 赞同：3
> 
> 时间：2012-10-23T06:05:32.007
> 
> 标签：magento

我在 config.xml 中有观察者 sales_quote_add_item，它在将商品添加到购物车时运行以下函数：

```
 public function updatePrice( $observer ){

        $event = $observer->getEvent();

        $quote_item = $event->getQuoteItem();

        $new_price = 200;
        $quote_item->setOriginalCustomPrice($new_price);
        $quote_item->setTotalPrice(350);

        $quote_item->save();
} 
```

如果用户已注册，则工作正常，但如果我们是访客，则此行

```
$quote_item->save(); 
```

在 var/exception.log 中给出错误

```
2012-10-23T05:12:28+00:00 DEBUG (7): Exception message: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`bluning_mage`.`sales_flat_quote_item`, CONSTRAINT `FK_SALES_QUOTE_ITEM_SALES_QUOTE` FOREIGN KEY (`quote_id`) REFERENCES `sales_flat_quote` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T08:12:25.710

您不应该在观察者中保存引用项目对象，因此只需删除此行`$quote_item->save();` 它会自动保存对象，因为它是通过引用传递的。

# java - 将随机数更改为密钥代码

> ID：13024396
> 
> 赞同：1
> 
> 时间：2012-10-23T06:05:38.730
> 
> 标签：java

l 好吧，所以我被这个难住了……

我想要实现的是生成一系列介于 0-9 之间的数字。在生成数字之后，我希望将它们输入到屏幕上的文本字段中。除了将随机数更改为密钥代码外，我已经完成了所有基本工作。目前，当我将其转换为键码时，它变成了 0。

这是我的代码：

```
public void random() {
    int rand = new Random().nextInt(10);
            System.out.println(""+rand);
    convert();
}

public void convert() {
    switch (rand) {
    case 0:
        rand = KeyEvent.VK_0;
                    System.out.println(""+0);
        break;
    case 1:
        rand = KeyEvent.VK_1;
                    System.out.println(""+1);
        break;
    case 2:
        rand = KeyEvent.VK_2;
                    System.out.println(""+2);
        break;
    case 3:
        rand = KeyEvent.VK_3;
                    System.out.println(""+3);
        break;
    case 4:
        rand = KeyEvent.VK_4;
                    System.out.println(""+4);
        break;
    case 5:
        rand = KeyEvent.VK_5;
                    System.out.println(""+5);
        break;
    case 6:
        rand = KeyEvent.VK_6;
                    System.out.println(""+6);
        break;
    case 7:
        rand = KeyEvent.VK_7;
                    System.out.println(""+7);
        break;
    case 8:
        rand = KeyEvent.VK_8;
                    System.out.println(""+8);
        break;
    case 9:
        rand = KeyEvent.VK_9;
                    System.out.println(""+9);
        break;
    }
} 
```

输出是这样的：

```
5
0 
```

它应该是什么：

```
5
53 
```

有什么建议/解决方案吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:11:58.843

我认为你有一个全局`rand`变量初始化为`0`.

进行以下更改，它应该可以正常工作：

1.  将签名更改`convert`为以下：

    ```
    public void convert(int rand) 
    ```

2.  从调用`convert`时`random`，调用为

    ```
    convert(rand); 
    ```

编辑：

根据您的评论，您已经`int rand`声明了上述`random()`方法。您无需`rand`再次声明。

更改以下行

```
int rand = new Random().nextInt(10); // a new rand variable is created local to method 
```

到

```
rand = new Random().nextInt(10); // already declared rand variable is used. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:10:46.580

你的所作所为看起来很奇怪。文本字段在您自己的应用程序中吗？无论如何，您获得 0 的方式是因为您必须`rand`在 convert 方法中使用实例变量 ( ) 并将随机数分配给局部变量（也称为`rand`但仍然是不同的变量）。将随机变量作为参数传递给 convert 方法，如下所示：

```
public void random() {
    int rand = new Random().nextInt(10);
    System.out.println(rand);
    convert(rand);
}

public void convert(int rand) {
    switch (rand) {
    ... 
```

然后将打印更改为`System.out.println(rand);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:16:02.737

你`rand`被声明为你的`random`方法的本地

```
int rand = new Random().nextInt(10); 
```

`convert`但是你在你的方法中引用它

```
switch (rand) { 
```

这表明它`rand`已经被声明为实例变量（否则它不会编译）并且您忽略它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:32:23.573

路易吉是对的。该代码无法编译。

无论如何，如果我猜到，这段代码可能对你有用：

```
public void random() {
    int rand = new java.util.Random().nextInt(10);
    convert(rand);
}

public void convert(int rand) {
    int vk = 0;
    switch (rand) {
    case 0:
        vk = java.awt.event.KeyEvent.VK_0;
        break;
    case 1:
        vk = java.awt.event.KeyEvent.VK_1;
        break;
    case 2:
        vk = java.awt.event.KeyEvent.VK_2;
        break;
    case 3:
        vk = java.awt.event.KeyEvent.VK_3;
        break;
    case 4:
        vk = java.awt.event.KeyEvent.VK_4;
        break;
    case 5:
        vk = java.awt.event.KeyEvent.VK_5;
        break;
    case 6:
        vk = java.awt.event.KeyEvent.VK_6;
        break;
    case 7:
        vk = java.awt.event.KeyEvent.VK_7;
        break;
    case 8:
        vk = java.awt.event.KeyEvent.VK_8;
        break;
    case 9:
        vk = java.awt.event.KeyEvent.VK_9;
        break;
    }
    System.out.println(rand+"->"+vk);
} 
```

请注意，由于`VK_0`through`VK_9`的值是 48 到 57，所以您不妨这样做：

```
public void randomAndConvert() {
    int rand = new java.util.Random().nextInt(10);
    int vk = rand+48;
    System.out.println(rand+"->"+vk);
} 
```

最后，关于原始代码的几件事：

*   printLn 应该是 println
*   rand 从未在 convert 中声明
*   rand 永远不会通过参数传递给转换
*   rand 永远不会在 convert 中打印出来

希望这会引导你走上正确的道路:)

# configuration - 没有斜杠的 nginx 目录

> ID：13024400
> 
> 赞同：3
> 
> 时间：2012-10-23T06:06:36.097
> 
> 标签：configuration, nginx, slash

我有这个 nginx + phpfpm + phpmyadmin 的配置：

```
root /var/www/utils;

location ~ ^/phpmyadmin/.*\.(jpg|jpeg|gif|png|css|js|ico)$ {
    root           /var/www/utils;
}

location = /phpmyadmin {
    index index.php;
}

location ~ ^/phpmyadmin.*(\.php|)$ {
    index          index.php;
    fastcgi_index  index.php;
    fastcgi_pass   unix:/var/run/php5-fpm.sock;
    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    include        fastcgi_params;
} 
```

一切都很好，但是如果我删除“location = /phpmyadmin”，我会在 _http://server/phpmyadmin 上收到 403 错误。

如何访问 _http://server/phpmyadmin/setup 等所有子目录？

我得到“对脚本'/var/www/utils/phpmyadmin/setup'的访问被拒绝 - 如果我没有为每个目录编写一个特殊的配置，那么每个目录最后都没有斜线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:21:00.007

如[nginx 文档](http://nginx.org/ru/docs/http/ngx_http_fastcgi_module.html#variables)中所述：

> > **$fastcgi_script_name**变量采用传入请求 URI 的值，*如果 URI 由斜杠完成*，则**$fastcgi_script_name**将附加由**fastcgi_index**指令定义的内容。

因此，如果您的请求是“/phpmyadmin/setup/”并且 fastcgi_index 设置为“index.php”，那么 $fastcgi_script_name 变量将是“/phpmyadmin/setup/index.php”。因此 $document_root 加上 $fastcgi_script_name 将是“/var/www/utils/phpmyadmin/setup/index.php”，应该可以正常工作。

但是如果你发出类似“/phpmyadmin/setup”的请求（末尾没有斜杠），那么fastcgi_index 将不会附加$fastcgi_script_name，即它只是“/phpmyadmin/setup”。$document_root 加上 $fastcgi_script_name 将是“/var/www/utils/phpmyadmin/setup”，因为没有这样的文件，所以它不起作用。

您应该使用带有斜杠的 URI，或者定义一个重写规则（在“服务器”配置块中），这将为不以某些扩展名结尾的 URI 添加斜杠（这样 URI 就像“/phpmyadmin/myscript. php" 不会转换为 "/phpmyadmin/myscript.php/"。它应该是这样的：

```
rewrite ^([^\.]*[^\/])$ $1/ break; 
```

不过，我自己没有测试过。

# iphone - >UITableview 崩溃（终止调用抛出异常（lldb））

> ID：13024406
> 
> 赞同：-2
> 
> 时间：2012-10-23T06:07:10.140
> 
> 标签：iphone, ios

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath
{
    UITableViewCell *cellName=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell1"];
    NSDictionary *contentdict=[innerarray objectAtIndex:indexPath.row];
    static NSString *cellidentify=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellidentify];

} 
```

这是我的代码，一切正常，但是当我滚动 tableview 时，即使我已经正确地给出了数组值并将委托和数据源作为 self，我也需要编写任何东西来更改 ????? 我正在使用 Xcode 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:15:06.433

试试这个……可能有帮助……

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"] autorelease];
    }

    NSDictionary *contentdict = [[NSDictionary alloc]init];
    if([innerarray count]>0)
    {
       contentdict =[innerarray objectAtIndex:indexPath.row];
    }

// Write your other cell stuff.... 

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:57:02.030

我认为它崩溃了，因为您没有从该`cellForRowAtIndexPath`方法返回任何单元格。更改`cellForRowAtIndexPath`如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"] autorelease];
    }

    //do something with the cell

   return cell;
} 
```

# java - 验证一个空的文本框？

> ID：13024407
> 
> 赞同：2
> 
> 时间：2012-10-23T06:07:10.703
> 
> 标签：java, eclipse, user-interface, textbox, verification

我目前正在编写一个 gui 并想验证用户是否在文本框中填写了一个字符串。我试过了：

```
String name = textBoxes.get(0).getText();
if(name.isEmpty()) {
    showError("Pls insert a name!"); 
} else{
    name = textBoxes.get(0).getText();
} 
```

但这真的行不通吗？好像有什么。“内部”文本框，即使我不填写某事。in.（我尝试了 sysout 并得到了：

```
'                            ' 
```

所以我的问题是，如何验证文本框是否为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:09:29.743

听起来您的 textBox 正在返回一个充满空格字符的字符串。在对它进行任何操作之前，请尝试使用`name.trim().isEmpty()`而不是仅使用 name.isEmpty() 来删除那些多余的空格。

`trim()`删除前导和尾随空格。请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:11:20.280

这实际上取决于您使用的文本框。如果您使用 javax.swing 中的 JTextField，您将希望使用它`x.getText()`来获取整个内容。

# vba - Excel VBA 事件处理程序

> ID：13024409
> 
> 赞同：0
> 
> 时间：2012-10-23T06:07:22.503
> 
> 标签：vba, excel

1）有人可以告诉我这段代码有什么问题吗？

2）我实际上需要这段代码在工作表更新上运行，但是@第一次加载工作簿，我正在使用`Workbook_Open`事件处理程序运行更新。这不会触发我的`Worksheet_Change`事件吗？有什么办法可以避免这种情况

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim ws As Worksheet
Dim rowCount As Integer

Set Worksheet = "datasheet"
Set rowCount = ws.Cells(Rows.Count, "A").End(xlUp)

If Not Intersect(Target, Range("M3:M" & CStr(rowCount))) Is Nothing Then
   MsgBox ("Hi")
End If
Else
If Not Intersect(Target, Range("T3:T" & CStr(rowCount))) Is Nothing Then
   MsgBox ("Hi")
End If
Else
If Not Intersect(Target, Range("X3:X" & CStr(rowCount))) Is Nothing Then
   MsgBox ("Hi")
End If
Else
If Not Intersect(Target, Range("AB3:AB" & CStr(rowCount))) Is Nothing Then
   MsgBox ("Hi")
End If
Else
If Not Intersect(Target, Range("AI3:AI" & CStr(rowCount))) Is Nothing Then
   MsgBox ("Hi")
End If

End Sub 
```

当我使用这个处理程序更改我的数据时，我收到一个编译器错误，说“需要对象”。另一方面，如果我给出值而不是行数，我不会遇到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:20:27.153

你有几个问题

1.  根据 Sid 的评论，您应该使用`rowCount = ws.Cells(ws.Rows.Count, "A").End(xlUp).Row`
2.  你应该不`Set ws = Sheets("datasheet")`使用`Set Worksheet = "datasheet"`
3.  您的`Else`陈述是孤立的，因此会导致错误。如果您想在第一个“嗨”时退出而不是继续测试，您应该尝试这样的事情

席德已经涵盖了你的另一点。`Boolean`您可以为此使用变量

**更新代码**

*`rowCount`这会在一行中测试第 3 行到行的 M、T、X、AB 和 AI 列的相交*

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim ws As Worksheet
Dim rowCount As Long

Set ws = Sheets("datasheet")
rowCount = ws.Cells(Rows.Count, "A").End(xlUp).Row

If Not Intersect(Target, Range("M3:M" & CStr(rowCount) & ",T3:T" & CStr(rowCount) & ",X3:X" & CStr(rowCount) & ",AB3:AB" & CStr(rowCount) & ",AI3:AI" & CStr(rowCount))) Is Nothing Then MsgBox ("Hi")

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:29:39.983

使用时我总是推荐这个`Worksheet_Change`

1.  您不需要工作表名称。据了解，除非您尝试使用另一个工作表行作为参考，否则代码将在当前工作表上运行，正如 brettdj 在下面的评论中正确提到的那样。

2.  每当您处理`Worksheet_Change`事件时。如果要将数据写入单元格，请始终关闭事件。这是必需的，以便代码不会进入可能的无限循环

3.  每当您关闭事件时，请使用错误处理，否则如果您遇到错误，代码将不会在下次运行。

这是一个例子

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    '
    '~~> Rest of the code
    '

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

因此，使用上面的代码，您的代码变为 (UNTESTED)

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim rowCount As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    With ActiveSheet
        rowCount = .Cells(.Rows.Count, "A").End(xlUp).Row
    End With

    If Not Intersect(Target, Range("M3:M" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("T3:T" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("X3:X" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("AB3:AB" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("AI3:AI" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**编辑**：

关于你的第二个问题。正如我在上面的评论中提到的，您可以使用公共变量来检查工作表更改事件是否是由工作簿打开引起的。

将此代码放在一个模块中。

```
Public WasWbOpened As Boolean 
```

将此代码放在工作簿代码区域中

```
Option Explicit

Private Sub Workbook_Open()
    WasWbOpened = True
    '
    '~~> Rest of the code
    '
    WasWbOpened = False
End Sub 
```

并将您的工作表更改事件更改为

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If WasWbOpened = True Then Exit Sub

    Dim rowCount As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    With ActiveSheet
        rowCount = .Cells(.Rows.Count, "A").End(xlUp).Row
    End With

    If Not Intersect(Target, Range("M3:M" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("T3:T" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("X3:X" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("AB3:AB" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    ElseIf Not Intersect(Target, Range("AI3:AI" & rowCount)) Is Nothing Then
       MsgBox ("Hi")
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# php - 通过 PHP cURL post 发送 HTML 时的编码问题

> ID：13024410
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:07:27.487
> 
> 标签：php, html, curl, libcurl

我正在尝试通过 PHP cURl 完成的帖子发送一个非常简单的 HTML 结构。 `<html><body><p>Hello World!</p></body></html>` 发布请求是一个 json 编码的数组，如下所示：

 `> `json_encode(array('pageId'=>'2'),'html'=>'<p>Hello World!</p>');`

`%3Chtml%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E`

PHP 文件保存为 UTF-8 .. 我还能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:19:32.590

它可能会输出一个 html 错误页面，因为您的关闭括号位于错误的位置。

```
json_encode(array('pageId'=>'2'),'html'=>'<p>Hello World!</p>'); 
```

应该

```
json_encode(array('pageId'=>'2','html'=>'<p>Hello World!</p>')); 
````

# symfony - Symfony2 覆盖异常

> ID：13024415
> 
> 赞同：0
> 
> 时间：2012-10-23T06:08:05.380
> 
> 标签：symfony

最近，我将`error.html.twig`, `error404.html.twig`,`exception.html.twig`模板放到`app/Resources/TwigBundle/views/Exception`项目目录中以覆盖 Symfony2 错误页面。在 prod 环境中它工作正常；在开发环境中，它还覆盖了默认的异常模板，因此调试起来非常困难。

如何让默认模板在开发环境中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:02:11.540

覆盖`exception.html.twig`是一个错误，因为它仅在 DEV 环境中可用，并且您不需要自定义异常模板。

摘自官方文档：

> **向开发人员**显示的调试友好的异常页面甚至可以通过创建模板来定制，例如为标准 HTML 异常页面创建 exception.html.twig 或为 JSON 异常页面创建 exception.json.twig。

# python - 为什么解包比通过索引访问更快？

> ID：13024416
> 
> 赞同：38
> 
> 时间：2012-10-23T06:08:10.493
> 
> 标签：python

我指的是这个问题，尤其是@David Robinson 和@mgilson 对第一个答案的评论： [Sum the second value of each tuple in a list](https://stackoverflow.com/q/12218112/341971)

最初的问题是对每个管的第二个值求和：

```
structure = [('a', 1), ('b', 3), ('c', 2)] 
```

第一个答案：

```
sum(n for _, n in structure) 
```

第二个答案：

```
sum(x[1] for x in structure) 
```

根据讨论，第一个答案要快 50%。

一旦我弄清楚第一个答案是做什么的（来自 Perl，我用谷歌搜索了 python 中的特殊 _ 变量意味着什么），我想知道为什么会出现一个纯子集任务（只获取每个元组的第二个元素而不是获取并将两个元素绑定到变量中）实际上更慢？是否错过了在 Python 中优化索引访问的机会？我错过了第二个答案需要时间的东西吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-23T06:19:28.010

如果你看一下 python 字节码，很快就会明白为什么解包速度更快：

```
>>> import dis
>>> def unpack_or_index(t=(0, 1)):
...     _, x = t
...     x = t[1]
... 
>>> dis.dis(unpack_or_index)
  2           0 LOAD_FAST                0 (t)
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               1 (_)
              9 STORE_FAST               2 (x)

  3          12 LOAD_FAST                0 (t)
             15 LOAD_CONST               1 (1)
             18 BINARY_SUBSCR       
             19 STORE_FAST               2 (x)
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

元组解包操作是一个简单的字节码 ( `UNPACK_SEQUENCE`)，而索引操作必须调用元组 ( `BINARY_SUBSCR`) 上的方法。解包操作可以在 python 评估循环中内联发生，而订阅调用需要在元组对象上查找函数以检索值，使用`PyObject_GetItem`.

[`UNPACK_SEQUENCE`操作码源代码](http://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l1966)特殊情况下，序列长度与参数长度完全匹配的 python 元组或列表解包：

```
 if (PyTuple_CheckExact(v) &&
            PyTuple_GET_SIZE(v) == oparg) {
            PyObject **items = \
                ((PyTupleObject *)v)->ob_item;
            while (oparg--) {
                w = items[oparg];
                Py_INCREF(w);
                PUSH(w);
            }
            Py_DECREF(v);
            continue;
        } // followed by an "else if" statement for a list with similar code 
```

上面的代码进入元组的原生结构并直接检索值；无需使用繁重的调用，例如`PyObject_GetItem`必须考虑到对象可能是自定义 python 类。

[`BINARY_SUBSCR`操作码](http://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l1373)仅针对 python*列表*进行了优化；任何不是本机 python 列表的东西都需要`PyObject_GetItem`调用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-23T06:11:52.103

索引通过`__getitem__`特殊方法进行，因此必须对每个项目进行函数查找和执行。这意味着对于`n`项目列表，您最终会进行`n`查找/调用。

使用本地列表/元组时，解包不必处理它；它只是通过`__iter__`单个调用，然后在 C 中解压缩结果序列。

# javascript - jstree在root前后拖放限制节点

> ID：13024417
> 
> 赞同：7
> 
> 时间：2012-10-23T06:08:18.730
> 
> 标签：javascript, jquery, tree, jstree, drag-and-drop

在我的 jstree 中，我有一个 Root 节点，它是所有节点的父节点。我用过 dnd 插件。我想允许拖放树中的任何位置，但只能在根内部，即不能在根之前或之后。

```
- [Root]
   - Node 1
      - Node 1.1
      - Node 1.2
   + Node 2
   - Node 3
      + Node 3.1 
```

在与论坛核实后，我发现该`drag_check`事件仅适用于外部节点，而不适用于树中的任何节点。要验证相同的树节点，我们需要使用`crrm -> check_move`事件。那就是我需要帮助的地方。如果节点在 之前或之后被删除，我想返回 false `[Root]`。

这是开始的小提琴 - [http://jsfiddle.net/juyMR/23/](http://jsfiddle.net/juyMR/23/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-16T09:35:34.137

在当前版本的 jstree (3.0.1) 中有一个更简单的解决方案，你必须使用的一切是

```
"types" : {     
       "#" : {
            "max_children" : 1
        }
    }, 
```

If you are using the type plugin there are two predefined types. One is the "#" used above. This is automatically used for the "real" root element of the tree, which means the one which is internally used. So if you are adding your own root as the first node without any extra config everything will work fine.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:26:00.523

你很接近，你只需要一个 else 语句来返回 true

[http://jsfiddle.net/blowsie/juyMR/59/](http://jsfiddle.net/blowsie/juyMR/59/)

```
 "crrm" : {
        "move" : {
            "check_move" : function (data) {
               // alert(data.r.attr("id"));
                if(data.r.attr("id") == "999") {
                    return false;
                }
                else {
                    return true;
                }
            }
        }
    }, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T11:38:58.520

这可以开箱即用，无需任何附加功能：

```
$("#tree").jstree({
    "types" : {     
        "valid_children" : [ "root" ], //<== THIS IS THE IMPORTANT ONE !
                    "types" : {
                              "default" : {
                                    "valid_children" : "none"
                              },
                              "root" : {
                                    "valid_children" : "default"
                              }
                              }
              }
}); 
```

您可以在每个节点类型中提及“valid_children”，但也可以提及更高级别（查看上面的代码，其中显示“这是最重要的一个”。

这将全局只允许您的节点类型 ROOT 有孩子，这意味着您不能将任何东西移出根，但可以在根树内的任何地方移动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T13:19:49.607

查看 data.o（源节点）和 data.np（节点父节点）并在 crrm check_move 中检查它们的 ID。查看小提琴示例，不允许 data.np.attr("id") 等于“jsTreeDiv”。

# ios - 使用自定义 uitableviewcells

> ID：13024419
> 
> 赞同：0
> 
> 时间：2012-10-23T06:08:28.580
> 
> 标签：ios, uitableview

我为我的表格创建了自定义单元格。基本上我的单元格上有 UIButton 。我正在重用这些细胞。

但是我对这些按钮有疑问，因为当重用单元格时，它的所有元素也会被重用，但我正在寻求这些按钮对于每个单元格都是唯一的。

也许有人可以为此功能提出解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:25:53.583

如果您`button`的自定义单元格上有一个属性，该怎么办？

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath    static NSString *CellIdentifier = @"My Cell Identifier";
        MyCustomCellClass *cell = (MyCustomCellClass *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[MyCustomCellClass alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
        // Configure the cell

        UIButton *myButtonForThisCell = [MyButtonArray objectAtIndex:indexPath.row];

        cell.button = myButtonForThisCell;
        return cell;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:26:00.993

使用两种方法创建一个 buttonView UIVIEW 文件

```
-(NSInteger) getGridIndex
{
    return gridIndex;
}

-(void) setGridIndex:(NSInteger)value
{ 
    gridIndex = value;
} 
```

现在在 cellforrowatindexpath 方法中

```
 if (cell == nil) {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
                cell.accessoryType = UITableViewCellAccessoryNone;

        ButtonView *buttonView=[[ButtonView alloc] initWithFrame:CGRectMake(110, 110, 160, 26)];
                buttonView.tag=18;
         UIButton *button=[[UIButton alloc]initWithFrame:CGRectMake(55, 0, 60, 26)];
[button addTarget:self action:@selector(ButtonAction:) forControlEvents:UIControlEventTouchUpInside];
         [buttonView addSubview:button];
          [cell addSubview:buttonView];
        }
     ButtonView *buttonView=(ButtonView*)[cell viewWithTag:18];
     NSArray *d=[buttonView subviews];
      UIButton *button=[d objectAtIndex:0];
    //here you can change the setting or title of button or whatever u want to do.
      [buttonView setGridIndex:indexPath.row];
    } 
```

现在在按钮操作中：

```
-(void)ButtonAction:(UIButton*)sender{
    ButtonView *view = (ButtonView *)[sender superview];
    NSInteger n=[view getGridIndex];
    //here n is the indexpath.row at which the button was tapped..you can write its action accordingly.
} 
```

# iphone - Facebook 墙贴错误：OAuthException

> ID：13024420
> 
> 赞同：2
> 
> 时间：2012-10-23T06:08:42.410
> 
> 标签：iphone, xcode, facebook, post, facebook-wall

我成功地在我的代码中集成了 facebook 登录。现在想在墙上张贴。

**以下是错误：**

```
FBRequest didFailWithError:The operation couldn’t be completed. (facebookErrDomain error 10000.) Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0xeaf9870 {error=<CFBasicHash 0xeaf9770 [0x20eb400]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0xead54f0 [0x20eb400]>{contents = "type"} = <CFString 0xead6470 [0x20eb400]>{contents = "OAuthException"}
    3 : <CFString 0xead4610 [0x20eb400]>{contents = "message"} = <CFString 0xead4660 [0x20eb400]>{contents = "(#200) This API call requires a valid app_id."}
    6 : <CFString 0xead4180 [0x20eb400]>{contents = "code"} = 200
}
} 
```

//代码

```
[_facebook requestWithGraphPath:[NSString stringWithFormat:@"/%@/feed",[defaults objectForKey:@"FBUDID"]] 
                          andParams:variables 
                      andHttpMethod:@"POST" 
                        andDelegate:self]; 
```

我已经检查了 AppID 和密钥。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:30:26.823

```
NSMutableDictionary *params = [[[NSMutableDictionary alloc] init] autorelease];
[params setObject:@"status" forKey:@"type"];
[params setObject:@"Write your message here to post" forKey:@"message"];
[_facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

可以使用上面的代码向自己（登录的用户）墙发布消息。如有任何疑问，请告诉我。

# java - 在java中使用poi通过循环将值放入单个单元格

> ID：13024425
> 
> 赞同：1
> 
> 时间：2012-10-23T06:09:13.073
> 
> 标签：java, newline, apache-poi

我有以下格式的字符串：

`abcd|1|2,pqr|2|3......`

我想在单个单元格中输出以下内容：

```
abcd|1|2
pqr|2|3 
```

我正在拆分字符上的字符串`,`。

字符串值来自另一个循环

```
for(ActivityDTO activity : activityList) {

    HSSFCell cell6 = dataRowAct.createCell(6);
    String str[] = string.split(",");

    for(int i = 0; i < str.length; i++) {
        cell6.setCellValue(new HSSFRichTextString(str[i]+"\n"));
    }
} 
```

但在 excel 中，我只得到最后一个值，因为旧值覆盖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:14:34.050

看起来您正在重复设置 cell6 的值。它最终将成为您最后设置的任何值，这与您遇到的问题相匹配。根据您最终想要的结果，您需要更改在 for 循环中设置的单元格。即，将 cell6 更改为其他内容，具体取决于我在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:14:12.273

您需要*构建*一个字符串（使用 StringBuilder），然后将最终结果打印到单元格。

```
StringBuilder sb = new StringBuilder();

for (int i = 0; i < str.length; i++) {
    sb.append(str[i] + "\n");
}

cell6.setCellValue(sb.toString()); 
```

作为备选...

如果你只是想`,`用换行符替换字符，你可以像这样使用[String.replace()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)：

```
String s = "abcd|1|2,pqr|2|3";
cell6.setCellValue(s.replace(",", "\n")); 
```

`,`这会用换行符替换每次出现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:20:03.733

因为您正在删除旧值。

```
 String s="";
   for(int i=0;i<str.length;i++) {
     s+=str[i]+"\n";
   }
   cell6.setCellValue(new HSSFRichTextString(s)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:17:19.747

我希望我是对的

```
abcd|1|2 
```

所以

```
 String str[] = string.split(",");
   int r=//row number
   Row row=sheet.createRow(r);
for(int i = 0; i < str.length; i++) {
    cell6.setCellValue(new HSSFRichTextString(str[i]+"\n"));
    cell6=sheet.createRow(++r).createCell(/*cellnumber*/);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:22:51.693

我不知道你这里的**cell6**是什么。无论如何，逻辑应该是这样的：

```
cell6.setCellValue(cell6.getCellValue()+str[i]+"\n")); 
```

# java - 子报表的详细信息带未显示

> ID：13024431
> 
> 赞同：7
> 
> 时间：2012-10-23T06:09:45.497
> 
> 标签：java, jasper-reports, ireport

我的主报告包含 5 个字段，其中 4 个是***java.lang.String***类型，最后一个是***java.util.List***类型。我使用后者作为*子报表*的数据源。我设置了*子报表的**数据源*。

 **子报表*属性：

*连接类型* ：***使用数据源表达式***
*数据源表达式*：***new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{Field5})***

数据传递工作正常（我猜），因为当我在*Java*应用程序中填写报告时。我可以查看传递给字段 1 到 4 的数据，但在字段 5 中，起初我无法验证，因为*子报表*不显示数据，只有在*Column Header*中定义的静态文本。

然后当我将*子报表*的字段放在*Page Footer*中时，我发现数据传递成功，问题是*Detail*带本身没有显示。

为什么不显示？

在*子报表*属性中，我有：

*无数据时*：***所有部分，无详细信息***

请任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T09:18:33.273

我有同样的问题超过 1 天。在我正在开发的应用程序中，有多个*JasperReports*可以工作。我在添加新的时遇到了这个问题。无论我尝试了什么，*细节*带中都没有显示任何内容。我尝试了从三重检查填充报告的控制器到升级到最新`jasperreports`jar 和最新`iReports`版本的所有方法。似乎没有任何效果。

问题是报告默认设置为：`When No Data: All Sections, No Detail`，这基本上意味着如果没有数据发送到报告，它将显示所有部分，除了*详细信息*之一。

`EXEC [myFunction] $P{parameterId}`尽管除了我用来测试报告的静态文本之外，我还直接从 Java 控制器传递参数，但直到我将一个添加到报告的*查询文本*属性中，它才起作用。该函数是一个简单直接的函数，它将`parameterId`从 Java 传递过来的作为参数并返回一些内容。（另外，确保*将数据集查询 sql*属性的语言设置为*SQL*）。

总而言之，由于某种原因，报告似乎没有将 Java 参数作为数据（因此它显示了除*Detail*之外的所有部分），因此当我显式调用返回一些参数并将它们放入我的 SQL 函数时详细页面，它的工作原理。

我希望这对您有所帮助，我花了 10 个小时才弄清楚这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:01:42.260

你可以试试这个样本。

*POJO* （豆）：

```
public class BeanWithList {

    private List<String> m_cities;
    private Integer m_id;

    public BeanWithList(List<String> cities, Integer id) {
        m_cities = cities;
        m_id = id;
    }

    public List<String> getCities() {
        return m_cities;
    }

    public Integer getId() {
        return m_id;
    }
} 
```

填写报告的代码：

```
public static void testBuildPdf() {
    try {

        Map<String, Object> params = new HashMap<String, Object>();

        params.put("BeanSubreport", JasperCompileManager.compileReport(subreportSource));

        JasperReport jasperReport = JasperCompileManager.compileReport(masterSource);
        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, getDataSource());

        JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private static JRDataSource getDataSource() {
    Collection<BeanWithList> coll = new ArrayList<BeanWithList>();

    BeanWithList bean = new BeanWithList(Arrays.asList("London", "Paris"), 1);

    coll.add(bean);

    bean = new BeanWithList(Arrays.asList("London", "Madrid", "Moscow"), 2);
    coll.add(bean);

    bean = new BeanWithList(Arrays.asList("Rome"), 3);
    coll.add(bean);

    return new JRBeanCollectionDataSource(coll);
} 
```

子报表*jrxml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport .. leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
    <field name="city" class="java.lang.String">
        <fieldDescription><![CDATA[_THIS]]></fieldDescription>
    </field>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement positionType="Float" x="0" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{city}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

主*jrxml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="BeanSubreport" class="net.sf.jasperreports.engine.JasperReport"/>
    <field name="id" class="java.lang.Integer"/>
    <field name="cities" class="java.util.Collection"/>
    <title>
        <band height="103" splitType="Stretch">
            <staticText>
                <reportElement x="138" y="28" width="258" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Bean with List sample]]></text>
            </staticText>
        </band>
    </title>
    <columnHeader>
        <band height="20">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true" isUnderline="false"/>
                </textElement>
                <text><![CDATA[Id]]></text>
            </staticText>
            <staticText>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true" isUnderline="false"/>
                </textElement>
                <text><![CDATA[City name]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <subreport>
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="100" y="0" width="100" height="20" isPrintWhenDetailOverflows="true"/>
                <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{cities})]]></dataSourceExpression>
                <subreportExpression><![CDATA[$P{BeanSubreport}]]></subreportExpression>
            </subreport>
        </band>
    </detail>
</jasperReport> 
```

结果将是：

![PDF格式的报告](../Images/dd7342ea01da8a7354c79c50407efbcb.png)

* * *

该示例的主要技巧是使用*`_THIS`*“变量”。

有关更多信息，您可以阅读[JavaBean 数据源](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#javabeandatasources)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T03:36:54.223

我通过在运行时设置 subreport 参数来解决它。

对于那些遇到同样问题的人，我只是将 JasperReport 对象（数据类型为`net.sf.jasperreports.engine.JasperReport`）存储在 java 变量中，然后将变量传递给报告内的参数。此参数设置为**Subreport Expression**的值。子报表参数的表达式类应该是`net.sf.jasperreports.engine.JasperReport`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T08:41:08.610

向 FillManager 传递参数时，不要使用 null，使用 JREmptyDataSource。

正确方法：JasperFillManager.fillReport(this.getReportTemplate(JASPER_REPORT_EXPIRY_LETTER),this.parameters,new JREmptyDataSource());

错误的方式：JasperFillManager.fillReport(this.getReportTemplate(JASPER_REPORT_EXPIRY_LETTER),this.parameters, null);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-18T06:45:15.060

```
import java.awt.Desktop;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperExportManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;
import net.sf.jasperreports.swing.JRViewer;
import net.sf.jasperreports.view.JasperViewer;

public class MyForm extends JFrame {

    public static JasperDesign jasperDesign;
    public static JasperPrint jasperPrint;
    public static JasperReport jasperReport;
    static JRBeanCollectionDataSource jrBeanCollectionDataSource;
    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                MyForm frame = new MyForm();
                frame.setVisible(true);
            }
        });
    }

    /**
     * Create the frame.
     */
    public MyForm() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 431, 286);
        setTitle("ThaiCreate.Com Java GUI Tutorial");
        getContentPane().setLayout(null);

        // Button Report
        JButton btnOpenReport = new JButton("Open Report");
        btnOpenReport.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                Connection connect = null;

                try {
                    Class.forName("com.mysql.jdbc.Driver");
                    connect =  DriverManager.getConnection("jdbc:mysql://localhost:3306/test" ,"root","");
                    System.out.println("Connected....");
                }
                catch (ClassNotFoundException e1) 
                {e1.printStackTrace();} 
                catch (SQLException e) 
                {e.printStackTrace();}

                // Application path
                FileInputStream report = null;
                try {
                     FileInputStream input = new FileInputStream(new File("C:\\Users\\admin\\Desktop\\report1.jrxml"));
                      try 
                     {

                        jasperDesign = JRXmlLoader.load(input);
                        jasperReport = JasperCompileManager.compileReport(jasperDesign);
                        jasperPrint = JasperFillManager.fillReport(jasperReport, null, connect);
                        JasperExportManager.exportReportToPdfFile(jasperPrint, "E:\\demo.pdf");

//                      Desktop.getDesktop().open(new File("D:/ReceiptReport.pdf"));

                    } catch (JRException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 

                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                JFrame frame = new JFrame();
                frame.setTitle("ThaiCreate.Com Customer Report");
                frame.setBounds(100, 100, 800,600);
                frame.getContentPane().add(new JRViewer(jasperPrint));
                frame.setVisible(true);

                try {
                    connect.close();
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

        btnOpenReport.setBounds(137, 98, 146, 23);
        getContentPane().add(btnOpenReport);
        setResizable (false);
    }
} 
```*

# c# - 处理异步日志写入的更好方法

> ID：13024433
> 
> 赞同：2
> 
> 时间：2012-10-23T06:09:47.093
> 
> 标签：c#, .net, multithreading, file-io

```
public static class LogWriter
{
    private static ReaderWriterLockSlim writeLock = new ReaderWriterLockSlim();
    public static void WriteExceptionLog(string content)
    {
        #if DEBUG
        MessageBox.Show(content);
        #endif
        WriteLog(content, Constant.EXCEPTION_LOG_PATH);
    }
    public static void WriteLog(string content, string path)
    {
        try
        {
            writeLock.EnterWriteLock();
            string directory = Path.GetDirectoryName(path);
            if (!Directory.Exists(Path.GetDirectoryName(directory)))
                Directory.CreateDirectory(directory);
            using (StreamWriter writeFile = new StreamWriter(path, true))
            {
                content = DateTime.Now + " : " + content;
                writeFile.WriteLine(content);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            writeLock.ExitWriteLock();
        }
    }
} 
```

我有一个写日志的类。因为我正在异步写入日志，所以我需要在写入完成时放置一个锁并释放它，但这似乎是一个笨拙的解决方案，甚至可能对性能不利。

有什么更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:21:03.210

出于性能原因以及避免登录和注销之间非常不同的行为，我建议每个线程运行一个缓冲日志文件。

*   每个线程一个以避免锁定：无争用
*   缓冲以避免磁盘延迟

对应的有：

*   需要基于时间（毫秒）的合并工具才能将应用程序活动视为一个整体（与线程活动相比）
*   在残酷终止的情况下，缓冲可能会隐藏最后的日志记录

为了更接近实时，你必须登录内存，并开发一个专门的接口来提取日志请求，但这种日志通常保留给硬实时嵌入式应用程序。

其他低 CPU 消耗的安全日志记录解决方案（低级 C 编程）：

*   将日志记录缓冲区放入共享内存
*   被观察的进程充当日志记录生产者
*   创建一个具有更高优先级的日志管理器进程，作为日志记录消费者
*   在触发器机制背后管理消费者和生产者之间的通信：临界区下的指针分配。

如果观察到的进程崩溃，则不会丢失任何日志记录，因为共享内存段附加到日志管理器进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:28:08.237

在每个日志请求上打开、写入然后关闭文件既多余又低效。

在您的日志类上，使用缓冲区，并将该缓冲区的内容写入文件，无论是每 X 次请求、关闭还是每 Y 分钟。

# android - 如何在android中设置文本方向

> ID：13024436
> 
> 赞同：3
> 
> 时间：2012-10-23T06:10:02.120
> 
> 标签：android

我有一个文本视图，我在其中设置了波斯语/阿拉伯语文本并将重力设置为正确，但它在平板电脑中显示左侧的文本。如果将重力设置为左侧，则将其显示为右侧。我会做什么，直到它正常工作？

```
<LinearLayout android:layout_width="fill_parent"
              android:layout_height="wrap_content"
            >
<TextView android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:id="@+id/manage_account_id_textview"
          android:text="فارسي"
          android:gravity="right"
          />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:12:37.910

这样做

```
<LinearLayout android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                >

    <RelativeLayout android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                >

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/manage_account_id_textview"
              android:text="فارسي"
              android:layout_alignParentRight="true"
              />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T00:41:43.637

尝试使用

```
 manage_account_id_textview.setTextDirection(View.TEXT_DIRECTION_RTL); 
```

或者

```
 manage_account_id_textview.setTextDirection(View.TEXT_DIRECTION_ANY_RTL); 
```

# c# - C# Selenium webdriver selectByText 包含来自列表框或下拉列表

> ID：13024439
> 
> 赞同：0
> 
> 时间：2012-10-23T06:10:31.527
> 
> 标签：c#, selenium, listbox, webdriver, selenium-webdriver

我使用通过可见文本从列表框中完美选择项目的代码。

```
 var selectElement = new SelectElement(TestFramework.FindWebElement(this));
 selectElement.SelectByText(text); 
```

问题是我已经动态更改了项目中的文本。它可能是这样的：

-- item1 -- 或 --- item1 ---

但我需要选择文本包含“item1”的项目。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:46:21.107

查看源代码，如果第一次搜索（直接匹配）没有返回任何内容，该`SelectByText`方法应该去搜索匹配项。如果它没有这样做，请向 Selenium 开发人员提出一个错误并同时编写您自己的扩展方法：`contains``Equals`

```
/// <summary>
/// Select an option by first searching for a case insensitive direct match then trying a case insenstive contains match.
/// </summary>
/// <param name="selectElement">The SelectElement to use.</param>
/// <param name="searchText">The text to find in the options.</param>
public static void SelectByText(this SelectElement selectElement, string searchText)
{
    var allOptionsThatHaveText =
        selectElement.Options.Where(se => se.Text.Equals(searchText, StringComparison.OrdinalIgnoreCase));

    if (allOptionsThatHaveText.Any())
    {
        foreach (var option in allOptionsThatHaveText)
        {
            option.Click();
        }
        return;
    }

    var optionWithText = selectElement.Options.Where(option => option.Text.IndexOf(searchText, StringComparison.OrdinalIgnoreCase) >= 0);
    if (optionWithText.Any())
    {
        foreach (var option in optionWithText)
        {
            option.Click();
        }
        return;
    }

    throw new NoSuchElementException(string.Format("Cannot find the text: {0} by either a case insenstive match or a case insensitive equals match.", searchText));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:15:07.637

您可以使用 XPath 代替 SelectByText 并在 XPath 中使用“[包含](http://seleniumhq.org/docs/appendix_locating_techniques.html)”。

这是一个例子：

```
var selectElement = new SelectElement(_driver.FindElement(By.XPath("//*[contains(text(), 'YOUTEXTHERE')]"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T18:14:58.533

尝试使用以下代码：-

```
var option = new SelectElement(browser.FindElement(By.CssSelector("#Menu_ParentMenuID"))).SelectBySubText("item1"); 
```

# android - 了解其他应用程序的启动

> ID：13024440
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:10:38.063
> 
> 标签：android

我想要的是：当有一个 App 启动时，我的 App 可以知道它并对此做一些事情。

我查找了android API，但无法解决。

有没有办法让它成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:15:05.770

并不真地。Android 的一般理念是，一个应用程序不应影响其他应用程序的行为，除非它是系统应用程序或设备管理员。并且没有供设备管理员使用的 API，因此您无能为力。当然，除非您修改平台。

你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:29:57.193

请解释一下“做某事”是什么意思

但是，在 RunningTaskInfo 类中定义了一个 topActivity 字段。您可以通过 ActivityManager 中的 getRunningTasks(int) 方法获取正在运行的任务列表，并且可以通过检查 topActivity 字段来遍历该列表以找到当前活动的任务。

# c# - 在 WPF 中动态生成具有不同内容的单选按钮集

> ID：13024441
> 
> 赞同：2
> 
> 时间：2012-10-23T06:10:39.583
> 
> 标签：c#, wpf, dynamic, radio-button

我是一名 C++ 开发人员，最近转向 C#。我正在开发一个 WPF 应用程序，我需要在其中动态生成 4 个单选按钮。我尝试做很多 RnD，但看起来这种情况很少见。

**XAML：**

```
<RadioButton Content="Base 0x" Height="16" Name="radioButton1" Width="80" /> 
```

现在是这样的场景：我应该生成这个单选按钮 4 次，`Content`如下所示：

```
<RadioButton Content = Base 0x0 />
<RadioButton Content = Base 0x40 />
<RadioButton Content = Base 0x80 />
<RadioButton Content = Base 0xc0 /> 
```

我在我的 C++ 应用程序中这样做了，如下所示：

```
#define MAX_FPGA_REGISTERS 0x40;

for(i = 0; i < 4; i++)
{
    m_registerBase[i] = new ToggleButton(String(T("Base 0x")) + String::toHexString(i * MAX_FPGA_REGISTERS));       
    addAndMakeVisible(m_registerBase[i]);
    m_registerBase[i]->addButtonListener(this);
}
m_registerBase[0]->setToggleState(true); 
```

如果您在上面注意到，每次 for 循环运行 Content name 变为`Base 0x0`, `Base 0x40`，`base 0x80`并将`base 0xc0`第一个单选按钮的切换状态设置为 true。因此，如果您注意到所有这 4 个按钮都会有一个按钮单击方法，并且每个按钮都会根据索引执行操作。

如何在我的 WPF 应用程序中实现这一点？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T06:41:24.687

我打算为您编写一组代码，但意识到您的问题可能已经在这里得到解答： [WPF/C# - example for programmatically create & use Radio Buttons](https://stackoverflow.com/questions/3623689/wpf-c-example-for-programmatically-create-use-radio-buttons)

当然，这可能是最干净的方式，具体取决于您的要求。如果你想要最简单的情况，这里是：

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid >
        <StackPanel x:Name="MyStackPanel" />

    </Grid>
</Window> 
```

C＃：

```
 public MainWindow()
    {
        InitializeComponent();

        for (int i = 0; i < 4; i++)
        {
            RadioButton rb = new RadioButton() { Content = "Radio button " + i, IsChecked = i == 0  };
            rb.Checked += (sender, args) => 
            {
                Console.WriteLine("Pressed " + ( sender as RadioButton ).Tag );
            };
            rb.Unchecked += (sender, args) => { /* Do stuff */ };
            rb.Tag = i;

            MyStackPanel.Children.Add( rb );
        }
    } 
```

只需为内容、标签等添加您需要的任何逻辑。

# c# - 静态 ArrayList 将值存储在内存中？

> ID：13024442
> 
> 赞同：1
> 
> 时间：2012-10-23T06:10:40.433
> 
> 标签：c#, asp.net

我是 C# 的新手，我想多学一点……现在，我在理解静态 ArrayList 时遇到了麻烦。

在 php 中我可以定义：

```
Class Singleton{
    private static $instance;
    private static $arrayDemo = array();

    private function __construct(){}

    public static function getInstance(){
        if(!isset(self::$instance))
            self::$instance = new Singleton();
        return self::$instance;
    }
    public static addItem($item){
       self::$arrayDemo[] = $item;
    }

    public static getItems(){
       return self::$arrayDemo[];
    }
}
Singleton::getInstance();

Singleton::addItem("first");
Singleton::addItem("second");
Singleton::getItems(); // returns {0=>first,1=>second} 
```

如果我重新加载页面，我会得到相同的结果（0=>first,1=>second）

我试图在 c# 中实现单例模式以获得相同的东西，但我得到了重复的值：

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();
    private static ArrayList ArrayDemo = new ArrayList();

    private Singleton() { }

    public static Singleton Instance
    {
        get
        {
            return instance;
        }
    }

    public static void AddItem(string item)
    {
        ArrayDemo.Add(item);
    }

    public static ArrayList GetItems()
    {
        return ArrayDemo;
    }
}

//in cshtml:
Singleton.AddItem("first");
Singleton.AddItem("second");
Singleton.GetItems(); 
```

如果我刷新网站一次，我得到与 php 相同的结果......但是，如果我刷新它 3 次返回......：

```
0=>first,1=>second,2=>first,3=>second,4=>first,5=>second 
```

为什么会发生这种情况？如果我使用静态方法，我可以清除 ArrayList 结果刷新吗？我只是想了解这其中的逻辑。

多谢你们！。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:13:41.427

> 为什么会发生这种情况？

它是一个静态变量。只要`AppDomain`它是生命的一部分，它就会一直存在 - 这几乎总是比单个请求长得多，这似乎是您假设的生命周期。在 ASP.NET 中，同样`AppDomain`服务于许多请求 - 您不会为每个请求获得单独的进程。

我建议：

*   您避免使用单例模式开始；这很少是一个好主意
*   您避免使用静态变量，而不是用于有效恒定的数据（甚至可能......）
*   您避免使用非泛型集合`ArrayList`，例如`List<T>`

此外，如果您是 C# 新手，我建议您放弃 Web 部件开始使用 - Web 和富客户端 GUI 框架都有自己的怪癖需要了解；如果您想尝试使用该*语言*和基本核心库（例如集合和 IO），我发现为此目的使用控制台应用程序会更有效率。

# iphone - Objective C 在 UIGestureRecognizerStateChanged 时启用 UIScrollView 滚动

> ID：13024445
> 
> 赞同：3
> 
> 时间：2012-10-23T06:10:47.503
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我添加了一个`-(void) detectTouch: (UIPanGestureRecognizer *) event`for`UIScrollView`并检测用户移动手指的角度。我的任务是`UIScrollView`仅当用户在 0 - 30 度之间移动手指时才水平滚动（只是为了确保他正在绘制水平直线），否则我必须禁用`UIScrollView`滚动。

我通过使用触摸起点和终点绘制三角形来检测角度。

**问题：**我在角度 < 30 度时启用了`UIScrollView`滚动，但第一次无法正常工作。尽管我启用了滚动，`scrollEnabled = YES`但它仅在用户停止触摸屏幕（将手指从屏幕上移开）时才起作用。

以下代码我曾经

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self PanGesture:self.view callBack:@selector(detectTouch:) delegate:self];
    incrementer = 0;    
}

-(void) detectTouch: (UIPanGestureRecognizer *) event{
    // Calculating point A on gesture starts
    if(event.state == UIGestureRecognizerStateBegan){
        pointA.x = fabs([event translationInView:event.view].x);
        pointA.y = fabs([event translationInView:event.view].y);

        NSLog(@"A: %f, %f", pointA.x, pointA.y);
    }

    incrementer += 1;

    // Start calculating Point B, Point C on calling this function 3 times
    if(incrementer >= 3){

        // Calculating point C
        pointC.x = fabs([event translationInView:event.view].x);
        pointC.y = fabs([event translationInView:event.view].y);

        NSLog(@"C: %f, %f", pointC.x, pointC.y);

        // calculate pointB using A, C
        pointB.x = fabs(pointC.x);
        pointB.y = fabs(pointA.y);

        NSLog(@"B: %f, %f", pointB.x, pointB.y);

        float X = pointB.x - pointA.x;
        float Y = pointC.y - pointB.y;
        float angle = (atan(fabs(Y) / fabs(X)) * 180 / M_PI);

        if(angle > 30){
            // This disable is not working on while user is moving the finger
            self.myScrollView.scrollEnabled = NO;
            NSLog(@"UIScroll Disabled");
        }else{
            // This enable is not working on while user is moving the finger
            self.myScrollView.scrollEnabled = YES;
            NSLog(@"UIScroll Enabled");
        }

        incrementer = 0;
    }
} 
```

如何`UIScrollView`在用户移动触摸时启用滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:05:05.923

由于在将 .scrollEnabled 设置为 YES 后 UIScrollView 似乎只接受新的触摸滚动，因此我将执行以下操作：

*   将 .scrollEnabled 设置为 NO
*   跟踪触摸（例如使用 touchesMoved::)
*   检查您是否满足 30 度条件
*   使用移动调整 UIScrollView.contentOffset

# android - Android wifi获取连接Wifi的频率

> ID：13024449
> 
> 赞同：6
> 
> 时间：2012-10-23T06:11:11.350
> 
> 标签：android, android-wifi

好吧，我有 ScanResults，从那里我可以有 SSID、BSSID、所有 wifi 的频率。

```
List<ScanResult> results = wifi.getScanResults(); 
```

我也有连接的wifi信息，所以从那里我也有连接的SSID和连接的wifi的BSSID。

```
WifiManager wifi;
WifiInfo info;
wifi = (WifiManager) getContext().getSystemService(Context.WIFI_SERVICE);
info = wifi.getConnectionInfo(); 
```

现在我只想知道连接的 wifi 的频率，但是当我检查 SSID 和 BSSID 时，它们对于 2 个网络可以是相同的。现在我怎样才能找到连接的 Wifi 的频率。

另外从那个wifi我想有相应的频道号。

我找到了一张桌子

通道号 下限频率(GHZ) 中心频率(GHZ) 上限频率(GHZ)

1 2401 2412 2423

2 2404 2417 2428

3 2411 2422 2433

4 2416 2427 2438

5 2421 2432 2443

6 2426 2437 2448

7 2431 2442 2453

8 2436 2447 2458

9 2441 2452 2463

10 2451 2457 2468

11 2451 2462 2473

12 2456 2467 2478

13 2461 2472 2483

14 2473 2484 2495

想知道 sdk 是否总是提供该表的中心频率以及其他频率（如 5Ghz 等）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-07T09:32:27.637

WifiInfo 的频率仅在 Lollipop (API 21) [http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getFrequency()之后可用](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getFrequency())

```
android.net.wifi.WifiInfo

public int getFrequency ()

Returns the current frequency in FREQUENCY_UNITS. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T05:19:54.940

**你可以试试。**

```
 WifiManager wifiMgr = (WifiManager) getContext().getSystemService(context.WIFI_SERVICE);
    WifiInfo wifiInfo = wifiMgr.getConnectionInfo();
     int frequency = wifiInfo.getFrequency(); 
```

**添加以下权限。**

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

# c - 使用 atoi 将字符的标记化字符串转换为整数

> ID：13024450
> 
> 赞同：2
> 
> 时间：2012-10-23T06:11:13.117
> 
> 标签：c, char, token, tokenize, atoi

我正在尝试获取用户输入：(1 345 44 23) 并将其转换为标记化的字符字符串，然后转换为整数。令人惊讶的是，对于我认为常见的任务，我找不到太多帮助。

任何想法如何使用标记将 char 字符串转换为 in 字符串？

我的程序在进行转换时崩溃（在标记化之后 [我意识到这不是一个词]）。

谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
#define StrSZE 81

void strInput (char str[], int maxChars);
void custatoi(char * tokenArray[], int * data, int numOfTok);

int main(int argc, char *argv[])
{
    char str[StrSZE];
    char* tokenArray;
    int maxChars=StrSZE-1, cont=1, numOfToken=0, i=0;
    int* data;

    strInput(str, maxChars);

    tokenArray = strtok(str, " \t");
    while (tokenArray)
    {
        printf("token: %s\n", tokenArray);
        tokenArray = strtok(NULL, " \t");
        numOfToken++;
    }

    data = (int *) malloc(numOfToken * sizeof(int));

    custatoi(tokenArray, data, numOfToken);

    system("PAUSE");
    return 0;
}

void strInput (char str[], int maxChars)
{
    char garbage;
    int k=0;

    str[0]='\0';

    printf("Please type a string of whole numbers (intigers).\n\n");

    while ((k<80) && ((str[k] = getchar()) != '\n'))
        k++;

    /* Clears the keyboard buffer.  */
    if (k==80)
        while((garbage = getchar()) != '\n')
            ;

    /* Place null at the end of the line read in from user */
    str[k]='\0';

    printf("str after input is: %s\n\n", str);
}

void custatoi(char * tokenArray[], int * data, int numOfTok)
{
    int i;

    for (i=0; i < numOfTok; i++)
        data[i] = atoi(tokenArray[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:15:16.137

在`strtok`循环结束时，`tokenArray`将设置为`NULL`. 然后你将它传递给`custatoi`，当它试图取消引用它时，它可能会崩溃。

请注意，这`tokenArray`不是字符串数组；它只是一个字符串指针（或指向字符数组的指针）。如果要将令牌累积到数组中，则必须为此创建一个单独的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:30:48.257

我纠正了你代码中的错误：有一些`mistakes in main(), tokenArray data type was not correct.`

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
#define StrSZE 81

void strInput (char str[], int maxChars);
void custatoi(char*  tokenArray[], int * data, int numOfTok);

int main(int argc, char *argv[])
{
    char str[StrSZE];

    int maxChars=StrSZE-1, cont=1, numOfToken=0, i=0;
    int* data;
    char* tokenArray[50];    // Declared correctly 

    strInput(str, maxChars);

    tokenArray[i] = strtok(str, " \t");   // Also made a change here!
    while (tokenArray[i])
    {
        printf("token: %s\n", tokenArray[i]);
        i++;
        tokenArray[i] = strtok(NULL, " \t");
        numOfToken++;
    }

    data = (int *) malloc(numOfToken * sizeof(int));

    custatoi(tokenArray, data, numOfToken);

    printf("data\n");
    for(i=0;i<numOfToken;i++){
        printf(" %d\n",data[i]);

    }

    system("PAUSE");
    return 0;
}

void strInput (char str[], int maxChars)
{
    char garbage;
    int k=0;

    str[0]='\0';

    printf("Please type a string of whole numbers (intigers).\n\n");

    while ((k<80) && ((str[k] = getchar()) != '\n'))
        k++;

    /* Clears the keyboard buffer.  */
    if (k==80)
        while((garbage = getchar()) != '\n')
            ;

    /* Place null at the end of the line read in from user */
    str[k]='\0';

    printf("str after input is: %s\n\n", str);
}

void custatoi(char*  tokenArray[], int * data, int numOfTok)
{
    int i;

    for (i=0; i < numOfTok; i++)
        data[i] = atoi(tokenArray[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:42:11.683

主要问题是`custatoi()`期望使用指向 的指针数组`char`，而`tokenArray`in`main()`仅仅是指向 的指针`char`。原始代码永远不会将输入字符串中指向标记的所有指针收集到`custatoi()`期望的数组中，原始代码中没有这样的数组。

请研究固定代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

#define StrSZE 81

void custatoi(char* tokenArray[], int* data, int numOfTok);

int main(void)
{
    char str[StrSZE];
    char** tokenArray;
    int numOfToken = 0, i;
    int* data;

    //strInput(str, maxChars);
    strcpy(str, "1 345 44 23");

    tokenArray = malloc(sizeof(char*));

    tokenArray[numOfToken] = strtok(str, " \t");
    while (tokenArray[numOfToken] != NULL)
    {
        printf("token: %s\n", tokenArray[numOfToken]);
        numOfToken++;
        tokenArray = realloc(tokenArray, sizeof(char*) * (numOfToken + 1));
        tokenArray[numOfToken] = strtok(NULL, " \t");
    }

    data = malloc(numOfToken * sizeof(int));

    custatoi(tokenArray, data, numOfToken);

    for (i = 0; i < numOfToken; i++)
      printf("data[%d]=%d\n", i, data[i]);

    return 0;
}

void custatoi(char* tokenArray[], int* data, int numOfTok)
{
    int i;

    for (i=0; i < numOfTok; i++)
        data[i] = atoi(tokenArray[i]);
} 
```

输出（[idone](http://ideone.com/XBI3bY)）：

```
token: 1
token: 345
token: 44
token: 23
data[0]=1
data[1]=345
data[2]=44
data[3]=23 
```

# cuda - CUDA cutil.h在哪里？

> ID：13024453
> 
> 赞同：5
> 
> 时间：2012-10-23T06:11:48.700
> 
> 标签：cuda

有谁知道包含 cutil.h 的 SDK/工具包在哪里以及在哪里？我尝试了 CUDA toolkits3.2 和 toolkits5.0（我知道这个版本它不支持 cutil.h）

我还注意到一些关于[如何在 linux 中包含 cutil.h 的内容](https://stackoverflow.com/questions/3765181/how-to-include-cutil-h-in-linux)

但是生成“NVIDIA_GPU_Computing/C/common/inc”的安装程序在哪里？我的工具包不生成此类文件。

CUDA3.0是否只包含这些cutil.h？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:05:31.790

对于 linux，CUDA SDK（不是工具包）安装程序版本 3.2 到 4.1（至少）应该安装 .../C/common/inc/cutil.h 文件。它在 CUDA 5.0 版本中已被消除，并且如您所发现的那样不在安装程序中。

# objective-c - 如何从应用程序中打开图库应用程序？

> ID：13024457
> 
> 赞同：1
> 
> 时间：2012-10-23T06:11:55.623
> 
> 标签：objective-c, ios

我有一个应用程序可以截取屏幕截图并将它们保存到 iOS 画廊应用程序中的相册中。我希望能够从我的应用程序中打开图库应用程序。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:34:43.213

查看相册的唯一方法是创建 a`UIImagePickerController`并将其源类型设置为`UIImagePickerControllerSourceTypePhotoLibrary`. 这将在应用程序内的相册视图中打开它。我不确定这是否完全满足您的要求。

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
```

或者，您也可以检查[资产库](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)和[示例代码](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010135)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:27:51.080

不，抱歉不可能。有些应用程序允许您使用 URL 方案从应用程序中打开它们，但内置的 iOS 照片应用程序不是其中之一。

# c# - DateTime 仅基于 Date 的天数差异

> ID：13024458
> 
> 赞同：25
> 
> 时间：2012-10-23T06:11:56.307
> 
> 标签：c#, .net, c#-4.0

我需要找出两个日期之间的天数差异。

例如：

输入：`**startDate** = 12-31-2012 23hr:59mn:00sec, **endDate** = 01-01-2013 00hr:15mn:00sec`

预期输出：`1`

我尝试了以下方法：

1.  `(dt1-dt2).TotalDays`并转换为整数，但没有给我适当的答案，因为必须将 double 转换为 int - 尝试过 Math.Ceiling、Convert.To...
2.  `dt1.day - dt2.day`不能跨月工作
3.  `dt.Substract()`具有与上述选项 1 相同的输出。

以上都不起作用，所以我最终编写了以下代码。代码运行良好，但我觉得必须有一个只有几行代码的解决方案。

```
public static int GetDifferenceInDaysX(this DateTime startDate, DateTime endDate)
    {
        //Initializing with 0 as default return value
        int difference = 0;

        //If either of the dates are not set then return 0 instead of throwing an exception
        if (startDate == default(DateTime) | endDate == default(DateTime))
            return difference;

        //If the dates are same then return 0
        if (startDate.ToShortDateString() == endDate.ToShortDateString())
            return difference;

        //startDate moving towards endDate either with increment or decrement
        while (startDate.AddDays(difference).ToShortDateString() != endDate.ToShortDateString())
        {
            difference = (startDate < endDate) ? ++difference : --difference;
        }

        return difference;
    } 
```

注意：我在 while 循环迭代中没有任何性能问题，因为最大差异不会超过 30 到 45 天。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-23T06:15:48.360

好吧，听起来您想要天数的差异，而忽略了时间部分。将`DateTime`时间分量重置为 00:00:00 的 A 是该[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性为您提供的：

```
(startDate.Date - endDate.Date).TotalDays 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T06:15:36.683

如果您使用该`DateTime.Date`属性，这将消除时间

```
date1.Date.Subtract(date2.Date).Days 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T06:15:31.207

使用[时间戳](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。只需减去两个日期（使用[DateTime.Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性），获取时间跨度的差异并返回[TotalDays](http://msdn.microsoft.com/en-us/library/system.timespan.totaldays.aspx)

```
TimeSpan ts = endDate.Date - startDate.Date;
double TotalDays = ts.TotalDays; 
```

所以你的扩展方法可以很简单：

```
public static int GetDifferenceInDaysX(this DateTime startDate, DateTime endDate)
    {
      return (int) (endDate.Date - startDate.Date).TotalDays;
      // to return just a int part of the Total days, you may round it according to your requirement
    } 
```

**编辑：**由于问题已被编辑，您可以查看以下示例。考虑以下两个日期。

```
DateTime startDate = new DateTime(2012, 12, 31, 23, 59, 00);
DateTime endDate = new DateTime(2013, 01, 01, 00, 15, 00); 
```

您可以将扩展方法编写为：

```
public static int GetDifferenceInDaysX(this DateTime startDate, DateTime endDate)
    {
        TimeSpan ts = endDate - startDate;
        int totalDays = (int) Math.Ceiling(ts.TotalDays);
        if (ts.TotalDays < 1 && ts.TotalDays > 0)
            totalDays = 1;
        else
            totalDays = (int) (ts.TotalDays);
        return totalDays;
    } 
```

对于上述日期，它将为您提供 1

# java - 如何让工厂 + AOP 在 Spring 中工作

> ID：13024464
> 
> 赞同：5
> 
> 时间：2012-10-23T06:12:23.337
> 
> 标签：java, spring, aop, factory

我有一个单例 Spring bean（它必须保持单例），每次执行某个方法时，它都需要另一个 bean 的新实例（我们称之为 X）。

到目前为止，我研究了以下方法：

*   只需使用 new 创建 X。这工作了一段时间，但现在我们需要 X 的 Spring AOP 特性，所以这不再工作了，因为生成的实例不是 Spring 管理的。

*   我将 FactoryBean 视为依赖项，但我只会从 FactoryBean 获得一个 X 实例，这不符合我的第一个实例。

*   目前的计划是在 Spring 上下文中手动查找 X，并在那里使用原型依赖项声明它。这应该可行，但我认为它真的很难看。

=>我如何在我的bean中注入一个工厂，以便我可以在我认为合适的任何时候调用它的工厂方法并从中获取一个spring托管实例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T08:30:46.327

此类场景的选择方法称为[查找方法注入](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-method-injection)。简而言之，这使用了调用 bean 方法的方法，从而创建了一个新的 bean 实例。您将首先创建一个具有抽象方法的类，该方法最终将提供依赖项实例：

```
abstract class MyClient implements Client {

  void businessMethod(…) {

    Dependency dependency = getDependencyInstance();
    …
  }

  abstract Dependency getDependencyInstance();
} 
```

您现在继续为依赖项配置原型 bean 定义：

```
<bean id="dependency" class="….DependencyImpl" scope="prototype" /> 
```

以及使用该`lookup-method`元素的客户端始终为每个方法调用获取依赖项的新实例：

```
<bean class="….MyClient">
  <lookup-method name="getDependencyInstance" bean="dependency" />
</bean> 
```

这将导致创建一个 CGLib 代理，并由 a 支持`MyClient`的方法声明与要查找的 bean 的引用和名称。在每次方法调用时，都会触发 bean 查找并返回原型配置 bean 的新实例。`getDependencyInstance(…)``TargetSource``BeanFactory`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T07:02:15.127

我没有看到工厂 bean 的问题，我会这样做：

```
import org.springframework.beans.factory.FactoryBean;
import org.springframework.stereotype.Component;

@Component
public class X {
    public static class XFactory implements FactoryBean<X> {

        @Override
        public X getObject() throws Exception {
            return new X();
        }

        @Override
        public Class<?> getObjectType() {
            return X.class;
        }

        @Override
        public boolean isSingleton() {
            return false;
        }       
    }
} 
```

并注入这个工厂bean。

否则，您可以使用

```
@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS, value=ConfigurableBeanFactory.SCOPE_PROTOTYPE) 
```

您必须使用非默认代理模式，以便 spring 创建一个代理，该代理始终向您的单例返回一个新实例。

如果您使用的是 XML 配置，那么请这样做：

```
<bean id="x" class="X" scope="prototype">
<aop:scoped-proxy>
</bean> 
```

玩得开心。

编辑：

当您通过 @Component 注释您的工厂时（我已在上面添加），在 #isSingleton 中返回 false 并确保您不返回您的 X 两次，您可以将带有 @Autowired 的工厂 bean 注入您的单例中。

否则我刚刚检查过

```
import org.springframework.context.annotation.Scope;
import org.springframework.context.annotation.ScopedProxyMode;
import org.springframework.stereotype.Component;

@Component
@Scope(value="prototype", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class X {
} 
```

它按预期工作。

编辑2：

如果您不想注入工厂 bean，而只想注入依赖项，则可以对工厂范围进行原型化 (@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS, value="prototype"))，但每次 X 都会创建一个新工厂涉及这可能不是你想要的。

如果您不想注入工厂本身，我会使用 Olivers 查找方法。

# extjs - 在extjs 4中从树拖放到编辑器网格的单元格

> ID：13024472
> 
> 赞同：1
> 
> 时间：2012-10-23T06:13:03.217
> 
> 标签：extjs, extjs4

我想从树中拖出一个叶子节点并将其放到编辑器网格单元格中，这样单元格就会将叶子的文本作为数据。

我正在使用编辑器网格，在其中动态添加行。

下面是我的代码

```
 Ext.define('Field_model', {<br>
            extend: 'Ext.data.Model',<br>
            fields: [<br>

                        {name: 'select_field'},
                        {name: 'select_function'},
                        {name: 'symbolic_name'}
                ]
        });<br>
        `var cellEditing_field = Ext.create('Ext.grid.plugin.CellEditing', {clicksToEdit: 1});`

        `var field_store = Ext.create('Ext.data.JsonStore', {
                    model: 'Field_model',
                    data:[
                                         {
                                           "select_field":"click toedit...",
                                           "select_function":"click to select...",
                                           "symbolic_name":"click to edit..."
                                         }
                                        ]
                    });`

        var Field_grid = Ext.create('ListGrid', {<br>
            store: field_store,<br>
            columns: [{<br>
                header: 'Add/Delete',<br>
                xtype: 'actioncolumn',<br>
                width:130,<br>
                sortable: false,<br>
                items: [{<br>
                        icon: 'add.png',<br>
                        tooltip: 'Add',<br>
                         handler : function(){<br>
                                                var r = Ext.create('Field_model', {<br>
                                                    select_field: 'click to edit...',<br>
                                                    select_function: 'click to select...',<br>
                                                    symbolic_name: 'click to edit...'<br>
                                                });<br>                             field_store.insert(0, r);<br>
                                                cellEditing_field.startEditByPosition({row: 0, column: 0});<br>
            }<br>
                        },{<br>
                        icon: 'delete.png',<br>
                        tooltip: 'Delete',<br>
                        handler: function(grid, rowIndex, colIndex) {<br>
                            if(grid.getStore().data.length==1)<br>
                            {<br>
                            alert('cannot delete this record');<br>
                            }
                            else<br>
                            {<br>
                            field_store.removeAt(rowIndex);<br>
                            }<br>
                            }<br>
                    }]<br>
            },{<br>
                header: 'Select Field',<br>
                dataIndex: 'select_field',<br>
                width:130,<br>
                editor: {<br>
                        xtype:'textfield'<br>

                    }
            }, {
                header: 'Function',
                dataIndex: 'select_function',
                width: 130,
                editor: {
                            xtype:'combobox',
                            triggerAction:'all',
                            mode:'local', 
                            store: ['Distinct','Sum','Count']
                          }
            }, {
                header: 'Symbolic Name',
                dataIndex: 'symbolic_name',
                width: 130,
                editor: {
                        xtype:'textfield'

                    }
            }],
            selModel: {
                selType: 'cellmodel'
            },
            plugins: [cellEditing_field]
        }); 
```

以上是我正在使用的网格

提前致谢

# java - 如何使用 Servlet 将文件上传到数据库？

> ID：13024473
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:13:03.663
> 
> 标签：java, tomcat, servlets, file-upload

我需要使用 servlet 处理文件上传，如下所示：

```
 package com.limrasoft.image.servlets;
    import java.io.*;
    import javax.servlet.*;
    import javax.servlet.http.*;
    import javax.servlet.annotation.*;
    import java.sql.*;

    @WebServlet(name="serv1",value="/s1")
    public class Account extends HttpServlet{
        public void doPost(HttpServletRequest req,HttpServletResponse res)throws 
        ServletException,IOException{
            try{
                Class.forName("oracle.jdbc.driver.OracleDriver");
                Connecection con=null;
                try{
                    con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","sajid");
                    PrintWriter pw=res.getWriter();
                    res.setContentType("text/html");
                    String s1=req.getParameter("un");
                    string s2=req.getParameter("pwd");
                    String s3=req.getParameter("g");
                    String s4=req.getParameter("uf");
                    PreparedStatement ps=con.prepareStatement("insert into account(?,?,?,?)");
                    ps.setString(1,s1);
                    ps.setString(2,s2);
                    ps.setString(3,s3);
                    File file=new File("+s4+");
                    FileInputStream fis=new FileInputStream(fis);
                    int len=(int)file.length();
                    ps.setBinaryStream(4,fis,len);
                    int c=ps.executeUpdate();
                    if(c==0){pw.println("<h1>Registratin fail");}
                    else{pw.println("<h1>Registration fail");}
                }
                finally{if(con!=null)con.close();}
            }
            catch(ClassNotFoundException ce){pw.println("<h1>Registration Fail");}
            catch(SQLException se){pw.println("<h1>Registration Fail");}
            pw.flush();
            pw.close();
        }
    } 
```

但它会导致错误页面：

> HTTP 状态 500 - Servlet3.java（系统找不到指定的文件）

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:09:29.437

您似乎*无处可*从 HTTP 请求中提取上传的文件**内容。**您只是收集文件**名**`new File()`并在相对于服务器当前工作目录的路径上围绕它构建一个。我不确定您在编写此代码时在想什么，但是当 webbrowser 在物理上与 web 服务器不同的机器上运行时，仅仅传递文件名永远不会起作用，因为它们不会共享相同的本地磁盘文件系统。

相反，您应该在请求中传递整个文件内容。您可以通过在 HTML 表单上使用`multipart/form-data`编码来实现此目的。

```
<form action="s1" method="post" enctype="multipart/form-data"> 
```

现在，用 注释 servlet[`@MultipartConfig`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html)以启用`multipart/form-data`支持。

```
@WebServlet("/s1")
@MultipartConfig
public class Account extends HttpServlet { 
```

然后，要提取上传的文件，只需使用[`HttpServletRequest#getPart()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29).

```
Part s4 = req.getPart("uf"); 
```

文件内容`InputStream`由[`Part#getInputStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html#getInputStream%28%29). 所以，总而言之，下面的代码

```
String s4=req.getParameter("uf");
// ...
File file=new File("+s4+");
FileInputStream fis=new FileInputStream(fis);
int len=(int)file.length();
ps.setBinaryStream(4,fis,len); 
```

应该替换为

```
Part s4 = req.getPart("uf");
// ...
ps.setBinaryStream(4, s4.getInputStream()); 
```

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# ngen - 如何在 WPF 应用程序中使用 Ngen.exe？

> ID：13024478
> 
> 赞同：2
> 
> 时间：2012-10-23T06:13:17.027
> 
> 标签：ngen

我想提高 WPF 页面的启动性能，因为它需要更多的时间来加载。Ngen.exe 是否提高了性能，我如何在 WPF 应用程序中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:18:11.300

您可以在其上运行 NGen，但它可能不会像您想象的那样帮助您。如果没有，您总是可以实现一个启动画面，使您的应用程序看起来比实际更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:23:59.007

您没有提到与创建 WPF 应用程序图像相关的任何问题。所以看起来只需要手动。请检查它 - [Ngen.exe（本机图像生成器）](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)。

此外，我认为您需要检查应用程序的架构。如果您使用服务器，则将一些操作移动到[延迟加载或在服务器上实现缓存。](http://en.wikipedia.org/wiki/Lazy_loading)

**如果您需要更详细的答案 - 在问题描述中添加更多详细信息。**

# php - mysql_query 的正确语法？

> ID：13024479
> 
> 赞同：0
> 
> 时间：2012-10-23T06:13:18.637
> 
> 标签：php, mysql, insert, syntax-error

我收到以下`PHP`语句的语法错误：

```
mysql_query("INSERT INTO table1 (to, from, msg, field, date)  
VALUES ('TEST_TO', 'TEST_FROM', 'TEST_MSG', 'TEST_FIELD', 'TEST_DATE')"); 
```

返回的错误是：

```
You have an error in your SQL syntax. 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:16:48.227

`to`并且`from`是[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。您需要引用它们（使用反引号，因为它们是字段名称）。（值得养成总是引用字段名称而不是试图记住保留哪些字段的习惯）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:16:40.573

您的列名中有保留字，例如 - from、to。使用反引号逃脱。

```
 mysql_query("INSERT INTO table1 (`to`, `from`, `msg`, `field`, `date`)  
  VALUES ('TEST_TO', 'TEST_FROM', 'TEST_MSG', 'TEST_FIELD', 'TEST_DATE')"); 
```

注意：不推荐使用 mysql_query。使用 mysqli_query 或 PDO 函数。

# python - Python：将函数与参数一起分配给变量

> ID：13024480
> 
> 赞同：0
> 
> 时间：2012-10-23T06:13:28.540
> 
> 标签：python

```
def test(name):
    print "name:", name

func = test
func("testing") # it works, as I know that the function test accepts one parameter. 
```

我的问题是，如果“测试”具有不同数量的参数，具体取决于场景以及“func”如何知道要传递多少个参数以及这些参数名称是什么。

对不起，如果我不清楚。这将提供更清晰的场景图。

我有一个函数调度程序。

```
testcase_obj  = testcase() # A object of a class    
if command.startswith("test1"):    
    output = exec_test1()    
elif command.startswith("do_test"):    
    output = exec_do_test(testcase_obj) 
```

现在，每当用户在执行脚本时发送选项时，我想包装一个函数。我将上面的代码更改为：

```
testcase_obj  = testcase() # A object of a class    
if command.startswith("test1"):    
    func = exec_test1() # Mistake, this should be func = exec_test1
elif command.startswith("do_test"):    
    func = exec_do_test(testcase_obj) # I don't know how assign exec_do_test along
                                      # with its parameter to 'func'. I don't want to
                                      # to call exec_to_test.

if option_given:    
    func = wrapper_func(func)    
    output = func() # At this point I don't how many parameters that "func" takes. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:19:32.253

说完`func = test`，`func`就变成*了别称`test`*。因此，您调用`func`的方式与 完全相同`test`，如果您提供`func`错误数量的参数，您将得到 a `TypeError`，就好像您调用`test`不正确一样。

有关其他语言中的变量和 Python 中的名称之间的区别的更多信息，请参阅[像 Pythonista 一样的代码](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:32:59.227

试试这个`inspect`模块

```
import inspect
inspect.getargspec(func).args 
```

会给：

```
['name'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:19:36.533

它会是一样的。

func 只是 test 的别名，而不是调用 test 的函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T07:02:13.233

> 如果“test”采用可变数量的参数并将其分配给“func”。我想知道“func”有多少个参数。Introspection(dir(func)) 不会显示“func”可以接受多少个参数。

`func`不是函数。它只是一个指向被调用函数的别名`test`。所以没有办法`func`可以接受不同数量的参数，`test`因为`func` *is 不是一个函数，只是一个指向一个的名称*。您可以验证这一点：

```
>>> def test(arg1):
...    print 'test was given ',arg1
...
>>> func = test
>>> test.func_name
'test'
>>> func.func_name
'test'
>>> id(func)
3075004876L
>>> id(test)
3075004876L
>>> inspect.getargspec(func).args
['arg1']
>>> inspect.getargspec(test).args
['arg1'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:39:20.160

是的，如果您为函数提供默认值，那么有一种方法。

```
def test(name="default",hi=0):
    print "name:", name,hi

func = test
func("testing")
func("testing",6) 
func(0) 
```

# android - 致命错误：openssl/evp.h 没有这样的文件或目录

> ID：13024481
> 
> 赞同：6
> 
> 时间：2012-10-23T06:13:28.797
> 
> 标签：android, android-ndk, openssl

我使用 android ndk build 成功编译了 openssl，并且成功构建了 .so 文件。

我正在尝试在 android 项目中“包含”构建的 .so 文件。

在下面的行中出现错误：

**#include "openssl/evp.h"**

致命错误：openssl/evp.h：没有此类文件或目录编译终止。制作：*** [obj/local/armeabi/objs/iedemo/anotherdemo.o] 错误 1

但是，我包含 stdio.h 和 string.h 文件。

我正在探索 /usr/include/openssl 目录，我可以在这里找到所有与 openssl 相关的 .h 文件。并且，stdio.h 和 string.h 文件存在于 /usr/include 目录中。

我也安装了**libssl-dev**包。命令（sudo apt-get install libssl-dev）

请帮我！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-05-21T15:59:50.170

在 Debian 或 Ubuntu 上遇到此问题时，可以使用以下命令解决：

`apt-get install libssl-dev`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-08T21:22:27.120

对于像我这样使用windows操作系统的人，他们**不小心**来到了这个页面，上面的解决方案并没有解决他们的问题，可以尝试以下解决方案：
我从官方[网站](http://slproweb.com/products/Win32OpenSSL.html)下载了OpenSSL可执行文件，并选择了描述为的文件包含以下行（**OpenSSL 的创建者推荐给软件开发人员**）。
在编写本解决方案时，文件版本为（Win64 OpenSSL v3.0.0），可直接从以下[链接](http://slproweb.com/download/Win64OpenSSL-3_0_0.exe)下载。

这是更多声明的图像：
[![在此处输入图像描述](../Images/24b3fae2a50386240e907d788ca7483a.png)](https://i.stack.imgur.com/4EI8G.png)

之后，我做了以下步骤：

1.  从 .exe 文件安装 OpenSSL。
2.  复制**bin**文件夹目录路径（在我的例子中是 C:\Program Files\OpenSSL-Win64\bin）并将其添加到系统环境变量中。
3.  复制**包含**文件夹的目录路径（在我的例子中是 C:\Program Files\OpenSSL-Win64\include）并将其添加到系统环境变量中。

然后编译使用 openssl 库和头文件的源代码，它们应该编译没有错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:47:55.573

您`Android.mk`应该指定 openssl 包含目录（不是`/usr/include/openssl`，而是与您使用 NDK 为 Android 构建的文件一起使用的目录。类似于

```
LOCAL_C_INCLUDES += /home/Charan/openssl/include 
```

但是您还需要指定`.so`已构建文件的路径，并确保它们与您的应用程序正确部署。事情可能会变得一团糟，但幸运的是有一个工作示例：[openSSL using Android's NDK questions](https://stackoverflow.com/questions/10285242/openssl-using-androids-ndk-problems#10295653)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T06:23:21.993

我在使用 PECL 构建 PHP 包时遇到了这个问题，并且能够将头文件安装为**openssl-devel的一部分**

在 CentOS/RHEL 上：`yum install openssl-devel`

在 Ubuntu/Debian 上：`apt-get install openssl-devel`

# street-address - 如何使用 schema.org/PostalAddress 处理复杂地址？

> ID：13024487
> 
> 赞同：7
> 
> 时间：2012-10-23T06:13:50.637
> 
> 标签：street-address, microdata, schema.org

假设我有一个包含父建筑物或其他附加地址信息的地址，例如：

```
Barnes & Noble
Union Square
33 E 17th St
New York, NY 10003 
```

或者

```
Koi Restaurant
Bryant Park Hotel
40 W 40th St
New York, NY 10018 
```

我应该如何使用 schema.org 标记地址的“联合广场”或“布莱恩特公园酒店”部分？这是否被视为街道地址的一部分？Yelp 似乎把它全部放在街道地址中，例如：

```
<span itemprop="streetAddress">Union Square<br>33 E 17th St</span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:04:53.977

该额外信息称为公司名称，有时在搜索特定地址或验证它时会产生更好的结果（相信我）。

但是，上述每个地址中似乎都有两行“公司名称”，这是无关紧要的，不会产生有用的结果。

就微数据而言，它们没有“公司名称”字段，但确实有“名称”字段。因此，Schema.org 示例如下：

```
<div itemscope itemtype="http://schema.org/PostalAddress">
 <span itemprop="name">Google Inc.</span>
 P.O. Box<span itemprop="postOfficeBoxNumber">1234</span>
 <span itemprop="addressLocality">Mountain View</span>,
 <span itemprop="addressRegion">CA</span>
 <span itemprop="postalCode">94043</span>
 <span itemprop="addressCountry">United States</span>
</div> 
```

请注意，Google Inc. 位于“名称”字段中。那是我放置额外信息的地方（如果你必须有两行公司名称，那么就在那里做......但要将其用于实际邮寄或验证，请取出额外名称。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:40:19.810

马特关于公司名称的说法是正确的。

在您的两个示例中，输入数据看起来是一致的，第一行比第二行更精确。如果您的数据总是如此，那么您就是黄金。坚持第一行作为收件人（或公司名称），第二行作为“额外数据”。从地址验证的角度来看，“额外数据”实际上无关紧要，因为无论“额外数据”如何，地址都会到达该位置。USPS 更多地依赖地址数据而不是“参考数据”（北极除外，我们都知道北极只有一个有效地址）。

我冒昧地提交了您的地址的一些变体，以根据 USPS 数据进行验证。我正在查看 USPS 是否在这两种情况下的地址上附加了公司名称。没有。

巴恩斯与贵族联合广场 33 e 17th st 10003

巴恩斯与贵族联合广场 33 e 17th st 10003

巴诺书店 33 e 17th st 10003

联合广场 barnes & noble 33 e 17th st 10003

锦鲤餐厅布莱恩特公园酒店 40 W 40th St 10018

布莱恩公园酒店锦鲤餐厅 40 W 40th St 10018

布莱恩公园酒店锦鲤餐厅 40 W 40th St 10018

在每种情况下，地址都被正确解析，而收件人和“额外数据”被忽略了。我希望这能让您对 USPS 地址验证过程的工作原理有所了解。

# sql - SSIS 拆分条件

> ID：13024488
> 
> 赞同：2
> 
> 时间：2012-10-23T06:13:51.500
> 
> 标签：sql, ssis

在更新我并最终将其添加到数据库之前，我需要实现`SCD`类型 2，这是我在拆分条件中的条件。`RecordEndDate`但是即使它不满足条件它仍然会继续将它添加到数据库中

```
((PlateNo == Stage_PlateNo)) && (([Car Name] != [Stage_Model]) || 
 ([Manufacturer] != [Stage_Manufacturer]) ||
  [Year Model] != Stage_Year || 
  [Car Body Type] != Stage_BodyType ||
  Transmission != Stage_Transmission ||
 [Daily Rate (in Peso)] != Stage_DailyRate
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:20:03.437

IMO your requirements are far too complex to attempt in an SSIS Expression. I recommend you recode this logic in a Script transformation. I would pre-create a new Column e.g. Include_Row and in the Script set it's value to yes or no.

This approach will give you much more code flexibility and better debugging possibilities.

# iphone - 转换字符串日期格式

> ID：13024491
> 
> 赞同：0
> 
> 时间：2012-10-23T06:14:20.197
> 
> 标签：iphone, objective-c, ios, nsdate

我在这个格式中的字符串中有日期**"Tue, 23 Oct 2012 01:05:00 +0000"**。现在我想将日期格式转换为“ **TUE OCT 23 2012 1:05AM** ”。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T06:30:02.703

使用此方法。将您的字符串传递给它并根据需要设置日期格式。您将得到您想要的日期作为回报。

```
- (NSDate *) getDateFromString:(NSString *) inputDate
{

    NSDateFormatter *dateForm = [[NSDateFormatter alloc] init];

    [dateForm setDateFormat:@"yyyy-MM-dd"];

    NSDate *dateSelected = [dateForm dateFromString:inputDate];

    [dateForm release];

    return dateSelected;
} 
```

希望对你有效。

==================================================== ==============

日期格式选项如下：

现在你想要 NSDateFormatter 可以使用的所有字符串格式。这里是

一个：上午/下午

A: 0~86399999 (毫秒)

c/cc: 1~7 (星期几)

ccc：周日/周一/周二/周三/周四/周五/周六

cccc：周日/周一/周二/周三/周四/周五/周六

d: 1~31 (0 填充的日期)

D：1~366（0 填充年中的一天）

e：1~7（0 填充星期几）

E~EEE：周日/周一/周二/周三/周四/周五/周六

EEEE：周日/周一/周二/周三/周四/周五/周六

F：1~5（0 填充月中的一周，一周的第一天 = 星期一）

g：儒略日数（自公元前 4713 年 1 月 1 日以来的天数）

G~GGG：BC/AD（时代代号缩写）

GGGG：在基督之前/安诺·多米尼

h: 1~12 (0 填充小时 (12hr))

H: 0~23 (0 填充小时 (24hr))

k: 1~24 (0 填充小时 (24hr)

K: 0~11 (0 填充小时 (12hr))

L/LL: 1~12 (0 填充月份)

LLL：一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

LLLL：一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

m: 0~59 (0 填充分钟)

月/月：1~12（0 填充月）

MMM：一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

MMMM：一月/二月/三月/四月/五月/六月/七月/八月/九月/十月/十一月/十二月

q/qq：1~4（0 填充季度）

QQ：Q1/Q2/Q3/Q4

qqqq：一季度/二季度/三季度/四季度

Q/QQ：1~4（0 填充季度）

QQQ：Q1/Q2/Q3/Q4

QQQQ：一季度/二季度/三季度/四季度

s: 0~59 (0 填充秒)

S：（四舍五入的亚秒）

u：（0 填充年份）

v~vvv：（通用 GMT 时区缩写）

vvvv：（通用 GMT 时区名称）

w：1~53（0 填充一周，一周的第一天 = 星期日，NB：一年的第一周从去年的最后一个星期日开始）

W：1~5（0 填充月份的星期，星期的第一天 = 星期日）

y/yyyy：（全年）

yy/yyy：（2 位数年份）

Y/YYYY：（全年，从一年中第一周的星期日开始）

YY/YYY：（2 位数年份，从一年中第一周的星期日开始）

z~zzz：（特定 GMT 时区缩写）

zzzz：（特定 GMT 时区名称）

Z：+0000（RFC 822 时区）

===========================================

随意设置格式..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:16:51.147

```
NSString *dateStr = @"Tue, 25 May 2010 12:53:58 +0000";

// Convert string to date object
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EE, d LLLL yyyy HH:mm:ss Z"];
NSDate *date = [dateFormat dateFromString:dateStr]; 
```

但首先

1.  创建一个`NSDateFormatter`将日期字符串转换为`NSDate` 对象。
2.  创建第二个`NSDateFormatter`（或更改第一个的格式字符串）以将其转换`NSDate`为字符串。

这会有点帮助吗？？？

**编辑**

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[dateFormatter setDateFormat:@"yyyy-MM-ddHH:mm:ss"];
NSDate *date = [dateFormatter dateFromString:@"2011-04-0600:28:27"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T06:30:39.930

使用此波纹管方法传递您的日期...

```
 -(NSString *)StringFromDate:(NSString *)DateLocal{
        DateLocal = [self trimString:DateLocal];
        NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];   
        [dateFormatter setDateFormat:@"EEE, dd LLL yyyy hh:mm:ss Z"];

        NSDate *date = [dateFormatter dateFromString: DateLocal];
        NSString *tt = [dateFormatter stringFromDate:date];
        NSDate *dateReturn = [dateFormatter dateFromString:tt];

        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"EEE LLL dd yyyy hh:mm a"];
        NSString *dateString = [dateFormat stringFromDate:dateReturn];  
        NSLog(@"Date is HERE  =====>> %@",dateString);
        [dateFormat release];
        return dateString;
    } 
```

# php - HTML 5 表单浏览器与 Internet Explorer 的兼容性问题

> ID：13024497
> 
> 赞同：2
> 
> 时间：2012-10-23T06:15:11.120
> 
> 标签：php, javascript, jquery, html

为什么 HTML5 表单在 IE 9 上不兼容？

我没有在 Internet Explorer 9 上看到经过验证的表单。它在 FF、Chrome 和 Safari 上运行良好，但在 Internet Explorer 上却不行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T06:16:48.313

Internet Explorer 缺少大多数 HTML5 功能，这就是您遇到问题的原因。

请参阅**[此](http://html5test.com/compare/browser/ie09.html)**站点，以了解 IE9 与什么兼容：

**形式**

```
input type=text             Partial         
input type=search           No      
input type=tel              No      
input type=url              No      
input type=email            No      
input type=datetime         No      
input type=date             No      
input type=month            No      
input type=week             No      
input type=time             No      
input type=datetime-local   No      
input type=number           No      
input type=range            No      
input type=color            No      
input type=checkbox         Yes         
input type=image            Yes         
input type=file             Partial         
textarea                    Partial         
select                      Partial         
fieldset                    Partial         
datalist                    No      
keygen                      No      
output                      No      
progress                    No      
meter                       No 
```

**字段**

```
Field validation                    No      
Association of controls and forms   No      
Other attributes                    No      
CSS selectors                       No      
Events                              Partial 
```

```
Form validation     No 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T06:21:23.063

由于 IE9（相对）较旧，Microsoft 对支持新标准持谨慎态度，而 HTML5 处于前沿。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T06:33:15.623

@Nida Hafeez，

看看这个： [http ://html5readiness.com](http://html5readiness.com)

你不应该使用 HTML5 验证，我不会推荐。

永远记住，用户可以克服客户端验证，基于不同的浏览器类型、版本和启用/禁用 javascript 或其他客户端功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T06:18:26.783

似乎直到 IE 10.0 才支持[表单验证](http://caniuse.com/form-validation)

应该有一个[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)可以让你实现你想要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T06:22:45.843

许多浏览器检查不支持 html 5 表单的许多功能

检查[**疯狂的形式**](http://diveintohtml5.info/forms.html)

和浏览器支持新的 HTML5 输入类型

![在此处输入图像描述](../Images/e53c61a91c0730fdcd60968b80746b21.png)

source[浏览器支持新的 HTML5 输入类型](http://wufoo.com/html5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T06:18:57.107

因为[IE9 不是现代浏览器](http://people.mozilla.com/~prouget/ie9/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T06:21:13.737

也许一个 html5 启用程序会为你工作检查这个[http://html5doctor.com/how-to-get-html5-working-in-ie-and-firefox-2/](http://html5doctor.com/how-to-get-html5-working-in-ie-and-firefox-2/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T06:26:29.193

在使用 html5 元素之前，您可以使用[Modernizr](http://modernizr.com/)检查浏览器的兼容性。

# android - 像无尽的列表视图一样将项目移动半圈

> ID：13024503
> 
> 赞同：7
> 
> 时间：2012-10-23T06:15:36.530
> 
> 标签：android, geometry, items, listings

大家好，我试着列一个这样的清单。但是什么也没找到。列表中显示的项目上下移动。主要问题是如何设置像圆圈这样的项目。这在 iphone 中是可能的，但在 android 中如何实现这一点。![在此处输入图像描述](../Images/ad10767b33a4ec4eb33a4af24896d10e.png)

# c# - 如何使用 Automapper 映射父/子集合模型？

> ID：13024506
> 
> 赞同：5
> 
> 时间：2012-10-23T06:15:55.543
> 
> 标签：c#, automapper

我写了一个简单的父子场景，但无法使用 Automapper 对其进行映射。在以下场景中，我期望 OrderItems 列表映射到 dtoOrderItems 列表，但它不会自动发生。我是否需要使用 for 循环或其他东西手动编写它？

```
public class Order
{
    public int OrderNumber {get; set;}
    public List<OrderItem> OrderItems { get; set; }

    public Order()
    {
        OrderItems = new List<OrderItem>();
        OrderItems.Add(new OrderItem() {Quantity= 10});
    }
}

public class OrderItem
{
    public int Quantity {get; set;}
}

public class DTOOrder
{
    public int DTOOrderNumber { get; set; }
    public List<DTOOrderItem> DTOOrderItems { get; set; }

    public DTOOrder()
    {
        DTOOrderItems = new List<DTOOrderItem>();           
    }
}

public class DTOOrderItem
{
    public int DTOQuantity { get; set; }
}

public DTOOrder TestConversion ()
{
    AutoMapper.Mapper.CreateMap<OrderItem, DTOOrderItem>();
    AutoMapper.Mapper.CreateMap<Order, DTOOrder>();

    Order order = new Order();                  
    var dtoOrder = AutoMapper.Mapper.Map<Order, DTOOrder>(order);           
    return dtoOrder;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:25:58.633

没有映射集合的原因是：一个集合名称是 OrderItems，另一个是 DTOOrderItems。Automapper 按名称映射属性（[区分大小写](https://github.com/AutoMapper/AutoMapper/pull/955)），无法解决此问题。
要解决此问题：
1) 将 DTOOrderItems（在您的 DTO 类中）重命名为 OrderItems
或
2) 使用 Automapper API 中的 ForMember 方法覆盖此属性的映射。像这样的东西：

```
AutoMapper.Mapper.CreateMap<Order, DTOOrder>()
    .ForMember(o => o.OrderItems, dto => dto.DTOOrderItems) 
```

您将遇到与 Quantity 和 OrderNumber 属性相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:40:08.820

您可以在您的扩展方法中编写这些，而不是在每一页中循环，而是保留在一个单独的页面中，您将能够重用它而无需重复代码。

```
public static List<testMOdel> ToModelList(this List<testEntity> objlist)
        {
            List<testMOdel> list = new List<testMOdel>();
            foreach (var item in objlist)
            {
                list.Add((Mapper.Map<testEntity, testMOdel>(item)));
            }
            return list;
        }
        public static List<testEntity> ToEntityList(this List<testMOdel> modellist)
        {
            List<testEntity> list = new List<testEntity>();
            foreach (var item in modellist)
            {
                list.Add((Mapper.Map<testMOdel, testEntity>(item)));
            }
            return list;
        } 
```

# sql - 如何返回请求的结果？

> ID：13024512
> 
> 赞同：0
> 
> 时间：2012-10-23T06:16:24.907
> 
> 标签：sql, tsql

对于每个地区，显示人口至少为 1000 万的地区和国家的数量。

该表称为 bbc 并具有以下字段：

*   名称（指国家名称）
*   地区（指世界地区）
*   面积（以英里为单位的面积）
*   人口（说国家有多少人）
*   国内生产总值（国内生产总值）

我在想我可以做类似的事情：

```
 SELECT region, COUNT(name) FROM bbc 
 GROUP BY region 
 HAVING population > 10000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:33:58.103

如果要显示*所有*区域，并在每个区域内计算人口超过 1000 万的数字，那么这可能是最简单的：

```
SELECT region, SUM(CASE WHEN population > 10000000 THEN 1 ELSE 0 END) as BigCountries
FROM bbc
GROUP BY region 
```

因此，如果您有一个地区，其中任何国家/地区的人口均不超过 10000000，那么您仍然会有一行包含该地区名称和 0。

* * *

从您对@Yograj Gupta 问题的评论 - 如果您想要*所有*国家/地区人口> 10000000 的地区，那么您可以修改上述内容：

```
SELECT region, COUNT(*) as Cnt,SUM(CASE WHEN population > 10000000 THEN 1 ELSE 0 END) as BigCountries
FROM bbc
GROUP BY region
HAVING COUNT(*) = SUM(CASE WHEN population > 10000000 THEN 1 ELSE 0 END) 
```

或者只是利用一个更简单的属性：

```
SELECT region, COUNT(*) as Cnt,MIN(population) as LowestPop
FROM bbc
GROUP BY region
HAVING MIN(population) > 10000000 
```

如果该地区任何国家的最小人口> 10000000，则所有国家的人口必须> 10000000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:31:06.730

你应该使用

```
-- For getting count of country name which has population > 10000000
SELECT region, COUNT(name) FROM bbc
WHERE population > 10000000
GROUP BY region 
```

或者

```
-- For getting region which has SUM(population) > 10000000
SELECT region, COUNT(name) FROM bbc 
GROUP BY region 
HAVING SUM(population) > 10000000 
```

# android - 如何使用菜单项在操作栏上实现搜索

> ID：13024514
> 
> 赞同：1
> 
> 时间：2012-10-23T06:16:34.180
> 
> 标签：android, search, android-actionbar, android-optionsmenu

我正在使用 Android`ICS`并使用`ActionBar`标签

我的`ActionBar`.

1.  主页标志
2.  微调器项目 1
3.  微调器项目 2
4.  搜索图标

代码如下：

**主布局**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/menu_spinner_1" 
        android:showAsAction="always"
        android:actionViewClass="android.widget.Spinner"/>

    <item android:id="@+id/menu_spinner_2" 
        android:showAsAction="always"
        android:actionViewClass="android.widget.Spinner" />

    <item android:id="@+id/menu_search"
        android:icon="@android:drawable/ic_menu_search"
        android:title="Search"
        android:showAsAction="always"
        android:actionViewClass="android.widget.SearchView" />
</menu> 
```

如果我不为 , 加上“总是” `spinner`，则只`spinner`显示一个。如果我总是把两者都放在`spinners`，而不是点击搜索图标..完整`ActionBar`的不用于输入搜索查询。保持`Spinners`原样，`SearchView`非常小，仅替换搜索图标。

如何实现完整的`ActionBar`搜索视图，当我单击关闭时，必须显示微调器。！?

# drools - 检查 Drools 规则文件中的语法错误

> ID：13024515
> 
> 赞同：1
> 
> 时间：2012-10-23T06:16:35.287
> 
> 标签：drools, drools-flow, drools-guvnor

我是 Drools Guvnor 的新手，并且已经使用它建立了一个基本的 rool 框架。我只想知道当前的 Drool 文件是否正确。

截至目前，除了端到端运行它之外，我别无他法。有什么可以立即检查编译问题吗？

编辑：

当我们有语法错误时，例如，'string.Contains' 而不是 'string.contains' 验证/验证成功通过，'Build Package' 选项也是如此。如果我遗漏了什么，请告诉我。

除此之外，我对 QA 部分不太了解（事实上，我们还没有在那里进行任何测试）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:24:27.443

在 Guvnor 你可以

*1）通过Source -> Validate*菜单验证单个规则，（可以在规则打开时看到）

2) 使用 QA 部分定义和运行测试场景。Guvnor[手册](http://docs.jboss.org/drools/release/5.4.0.Final/drools-guvnor-docs/html/ch04.html#d0e1919)有一个很好的部分描述了它的使用。

3) 使用包的*编辑*选项卡上的*验证配置*和*构建包*按钮。这将编译包中的所有规则。

 *我建议您在每次编辑规则时使用使用验证菜单，并编写覆盖 100% 规则的测试场景。*

# c# - 会话存储与类存储

> ID：13024516
> 
> 赞同：4
> 
> 时间：2012-10-23T06:16:40.143
> 
> 标签：c#, asp.net, class, session-variables

我总是将用户的数据（在他们登录后）存储在 Session 变量中，因此我可以在任何页面上使用该数据。
我发现另一种全局存储信息的方法是将其存储在一个类中，使用`{ get; set;}`，然后从任何页面调用它。

现在，我已经使用这两种方法作为测试，它们都工作得很好：

`Session["LoginId"] = rdr["uniqueIdentifier"].ToString();`

和

`Member.LoginId = rdr["uniqueIdentifier"].ToString();`

哪里（在**Member.cs 中**）

```
public class Member
{
    public static int Challenges { get; set; }
    public static int NicknameId { get; set; }
    public static string LoginId { get; set; }
    public static string FriendsListId { get; set; }

    public static void ClearVariables()
    {
        Challenges = 0;
        NicknameId = 0;
        LoginId = null;
        FriendsListId = null;
    }
} 
```

**全球.asax**

```
void Session_End(object sender, EventArgs e) 
    {
        Member.ClearVariables();
    } 
```

我的问题是，将用户数据存储在这样的类中是否足够安全，还是我应该坚持使用`Session`对象？

***更新完整性*** 这篇文章会做类似上面的事情，但是对于多个用户？ [如何从 ASP.NET 中的任何类访问会话变量？](https://stackoverflow.com/questions/621549/how-to-access-session-variables-from-any-class-in-asp-net?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T06:18:33.393

在您的情况下，它根本不安全，因为 asp.net 中的静态变量对所有用户都是通用的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T07:44:34.850

我发现这种方法是最容易使用且错误率最低的方法之一。我认为这被称为外观设计模式。

```
 public class SiteSession
{
    #region Attributes
    private static string _siteSession = "__SiteSession__";
    #endregion

    #region Constructor
    private SiteSession()
    {
    }
    #endregion

    #region CurrentSession
    public static SiteSession Current
    {
        get
        {
            SiteSession session = HttpContext.Current.Session[_siteSession ] as    SiteSession;
            if (session == null)
            {
                session = new SiteSession();
                HttpContext.Current.Session[_siteSession ] = session;
            }
            return session;
        }
    }
    #endregion

    #region SessionProperties
    public sherserve.CustomTypes.UserTypes UserType { get; set; }
    public int UserID { get; set; }
    public String StaffID { get; set; }
    public String Position { get; set; }
    public String StaffName { get; set; }
    public int TimeZone { get; set; }

    public String DealerId { get; set; }
    public String DealerPosition { get; set; }
    public String DealerName { get; set; }
    public int DealerFirmId { get; set; }

    public String ClientId { get; set; }
    public String ClientName { get; set; }
    public String ClientBusiness { get; set; }
    public String CountryCode { get; set; }
    public int ClientFirmId { get; set; }
    #endregion

} 
```

值可以像这样存储在 Session 中：

```
 SiteSession.Current.UserType = user.UserType; 
```

并且可以像这样获得：

```
int userId=    SiteSession.Current.UserID; 
```

它也是类型安全的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T06:19:38.590

使用静态变量并不安全。为一个用户设置的值会覆盖另一个用户的值。
静态变量意味着只有一个变量被创建并用于所有会话。静态变量的生命周期就是应用生命周期。
如果您的变量是用户特定的（看起来是），您将需要坚持使用 Session 变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T06:20:47.543

我确信它不适合你。仅在处理请求时才存在类的实例。处理请求后，您将无法再次获取该类的实例。在静态变量的情况下，它是应用程序范围的，不适合存储用户特定的信息。

Session 旨在通过回发处理应用程序的状态，它是会话的唯一目的，即维护应用程序的状态，它非常适合您的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:19:27.297

第二种方法的缺点是当应用程序重新启动时，变量将丢失它们的值。但是通过会话，您的数据将存储在浏览器 cookie 中。

**编辑：**

仅当您需要应用程序级别的公共（所有用户之间）共享变量时才使用静态变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T06:22:10.460

会话是按用户创建的，而生产中的类在应用程序的整个生命周期中都是活跃的。

尽管您可能不会在只有一个用户的开发中遇到问题，但在生产中，每个请求都会覆盖以前的数据，因此可能会带来安全风险。

坚持会议。

# log4net - log4net - 使用多种配置进行配置

> ID：13024523
> 
> 赞同：0
> 
> 时间：2012-10-23T06:16:54.807
> 
> 标签：log4net, log4net-configuration, log4net-appender

我使用 Log4Net 作为我的日志工具，当测试系统只有一个数据库时，一切都很好。

但是我的真实系统有不止一个数据库。不同的用户可能有不同的数据库。我想根据当前登录的用户将日志信息放入不同的数据库中。

但据我所知。Log4Net 似乎不支持这个主题。似乎 log4Net 在生命周期中只配置了“一次”。

我是否可以根据我的信息即时进行 log4net 选择数据库配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:48:14.587

我找到了答案：

[log4net - 使用多个配置文件进行配置](https://stackoverflow.com/questions/2775386/log4net-configure-using-multiple-configuration-files)

这： http: [//logging.apache.org/log4net/release/manual/repositories.html](http://logging.apache.org/log4net/release/manual/repositories.html)

我认为 Log4Net 只支持一种配置的原因是我没有挖掘。正如上面链接的内容所说：我们需要为每个配置创建自己的存储库。

现在一切都运行良好，日志信息现在根据给定的配置动态发送到不同的数据库，正如我所期望的那样。

# command-line - sqlite3 命令行 - 如何显示更少/更多的输出

> ID：13024525
> 
> 赞同：14
> 
> 时间：2012-10-23T06:16:59.643
> 
> 标签：command-line, sqlite

我在 Ubuntu 上使用 sqlite3 命令行程序。

我想在屏幕上看到它的输出分页。

例如，我会这样开始：

```
 # sqlite3
 SQLite version 3.6.22
 Enter ".help" for instructions
 Enter SQL statements terminated with a ";"
 sqlite> _ 
```

然后，在 sqlite 提示符下，如果我键入`.help`：

```
 sqlite> .help 
```

我看到一个长长的帮助信息“页面”，它在屏幕上显示最后几行。

我不是一个快速阅读者，因此无法在几毫秒内阅读所有这些信息。

那么，如何确保一次只能看到一个屏幕？

在正常的命令行用语中，这可以通过管道传输到`| less`，`| more`但是，这似乎在这个 sqlite 交互式 shell 中不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T06:43:54.830

它似乎没有内置的东西。但是，您可以使用`Cntrl`+`PgUp`和`Cntrl`+`PgDn`在终端中的不同页面上下移动（在 Ubuntu 中默认为 gnome-terminal，因此应该可以）。

此外，您可以从 shell 调用命令，例如：

```
$ echo .help | sqlite3 2>&1 | more 
```

sqlite3 打印输出`stderr`，因此重定向`2>&1`。对于 SQL 命令，您可以使用：

```
$ sqlite3 my.db "select * from my_table;" | more 
```

等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-09T00:19:03.520

从[dbcli](https://www.dbcli.com/)集合中，2018 年出现了与 sqlite 兼容的[litecli](https://litecli.com/)。它可以使用`$PAGER`环境变量或`~/.config/litecli/config`. 由于 util 提供颜色支持，我将其设置为`less -SniFXR`( [?](https://explainshell.com/explain?cmd=less+-SniFXR) )。

另一种方法是让`sqlite3`写入输出文件/管道并`less -f -S /tmp/sqlpipe`在第二个终端窗口或`tmux`窗格中使用来读取它。启用

```
.shell mkfifo /tmp/sqlpipe
.output /tmp/sqlpipe 
```

它看起来像[这样](https://asciinema.org/a/9eRmfRFCPTUxmwsEcLspwgMpR)。

由于不必重复输入命令，`~/.sqliterc`可以在启动时使用 a 进行设置。进一步的[格式化](https://dba.stackexchange.com/a/219988/136169)改进了输出，尽管最终`litecli`是一个更舒适的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-31T14:36:12.110

您可以改用 sqlitestudio，它将输出发送到带有滚动条的窗口。 [https://sqlitestudio.pl/index.rvt](https://sqlitestudio.pl/index.rvt)

# javascript - SVG animateTransform 没有启动

> ID：13024531
> 
> 赞同：0
> 
> 时间：2012-10-23T06:17:31.247
> 
> 标签：javascript, svg, webkit, svg-animate

我正在编写一段 SVG 代码并遇到以下问题：

如果 SVG 未通过窗口 onload 事件附加到文档，则 animateTransform 标记将不起作用（无法启动动画）。

示例： http: [//jsfiddle.net/r4WEh/](http://jsfiddle.net/r4WEh/) 与 [http://jsfiddle.net/r4WEh/1/](http://jsfiddle.net/r4WEh/1/)

唯一的区别是：

```
init(); 
```

对比

```
window.onclick = init; 
```

在第一个中，svg 通过窗口 onload 事件添加到 dom。在第二个中，svg 在 mouseclick 事件中添加到 dom 中。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:07:31.920

在 Firefox 上完美运行。如果您使用的是 Safari 或 Chrome，您可能会遇到[此错误](https://bugs.webkit.org/show_bug.cgi?id=74801)

# python - 在 Linux 中工作时在 Python 中模拟 Ctrl-C 键盘中断

> ID：13024532
> 
> 赞同：12
> 
> 时间：2012-10-23T06:17:45.217
> 
> 标签：python, linux, kill

我正在研究一些脚本（在我工作的公司中），这些脚本被加载/卸载到管理程序中，以便在事件发生时触发一段代码。实际卸载脚本的唯一方法是点击`Ctrl`- `C`。我正在用 Python 编写一个函数来自动化这个过程

一旦它`"done"`在程序的输出中看到字符串，它应该终止`vprobe`. 我`subprocess.Popen`用来执行命令：

```
lineList = buff.readlines()
cmd = "vprobe /vprobe/myhello.emt"
p = subprocess.Popen(args = cmd, shell=True,stdout = buff, universal_newlines = True,preexec_fn=os.setsid)
while not re.search("done",lineList[-1]):
        print "waiting"
os.kill(p.pid,signal.CTRL_C_EVENT) 
```

如您所见，我正在以`buff`读写模式打开的文件描述符中写入输出。我检查最后一行；如果有`'done'`，我杀了它。不幸的是，`CTRL_C_EVENT`它仅对 Windows 有效。我能为 Linux 做些什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T06:21:07.840

我认为您可以发送 Linux 等效项`signal.SIGINT`（中断信号）。

（编辑：我曾经在这里有一些东西不鼓励使用这种策略来控制子进程，但是仔细阅读后，听起来你已经决定在这种特定情况下需要 control-C ......所以，SIGINT 应该这样做.)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-24T18:03:14.303

在 Linux 中，可以使用 Popen.send_signal(signal.SIGINT) 函数以编程方式将 Ctrl-C 键盘中断发送到进程。例如

```
import subprocess
import signal

..
process = subprocess.Popen(..)
..
process.send_signal(signal.SIGINT)
.. 
```

不要使用 Popen.communicate() 来阻止命令..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T07:12:03.067

也许我误解了一些东西，但是你这样做的方式很难得到想要的结果。

不管`buff`是什么，你首先查询它，然后在上下文中使用它，`Popen()`然后你希望通过 maciv`lineList`填充自己。

你可能想要的是类似的东西

```
logfile = open("mylogfile", "a")
p = subprocess.Popen(['vprobe', '/vprobe/myhello.emt'], stdout=subprocess.PIPE,  buff, universal_newlines=True, preexec_fn=os.setsid)
for line in p.stdout:
    logfile.write(line)
    if re.search("done", line):
        break
    print "waiting"
os.kill(p.pid, signal.CTRL_C_EVENT) 
```

这为您提供了一个由`vprobe`脚本馈送的管道末端，您可以逐行读出并根据找到的输出采取适当的行动。

# c# - 如何在 winforms c# 中创建 Metro ui 切换开关控件？

> ID：13024537
> 
> 赞同：0
> 
> 时间：2012-10-23T06:18:20.917
> 
> 标签：c#, winforms, user-interface, microsoft-metro, custom-controls

我试图在winforms c#中实现一个切换开关控件我想将Windows 8 pc设置切换开关控件重新创建为metro ui（微软设计风格......无论如何！）

[http://cloud.addictivetips.com/wp-content/uploads/2012/03/Windows-8-PC-Settings-Sync.png](http://cloud.addictivetips.com/wp-content/uploads/2012/03/Windows-8-PC-Settings-Sync.png)

我需要帮助或指导如何开始创建控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:17:17.980

您可以在 github 上查看我的项目： [https ://github.com/viperneo/winforms-modernui](https://github.com/viperneo/winforms-modernui)

我在那里实现了一个拨动开关控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:21:50.097

使用这些类型的组件的最佳方法是使用已具有该功能并以最佳性能开发的组件 dll，请检查以下内容：

[http://www.devcomponents.com/](http://www.devcomponents.com/) http://www.devexpress.com/Subscriptions/DXperience/WhatsNew2012v1/winforms.xml

但是，您可以在 codeplex 和 codeproject 等源代码存储库中找到开源项目或如何开发此项目的示例，请参见：

[http://www.codeplex.com/site/search?query=metro%20components&ac=3](http://www.codeplex.com/site/search?query=metro%20components&ac=3)

只有一个细节......如上面的链接所示，您将在 WPF 中找到更多用于此类开发的资源。

# http - 如何将帖子 POST 发送到具有指定输入值的网站

> ID：13024538
> 
> 赞同：0
> 
> 时间：2012-10-23T06:18:20.993
> 
> 标签：http, post, html-parsing

我试图弄清楚 Purdue 如何显示他们的课程列表。我正在检查网页的源代码，我发现最接近的是：

```
 <!--  ** END OF twbkwbis.P_OpenDoc **  -->
<DIV class="infotextdiv"><TABLE  CLASS="infotexttable" SUMMARY="This layout table contains information that may be helpful in understanding the content and functionality of this page.  It could be a brief set of instructions, a description of error messages, or other special information."><TR><TD CLASS="indefault"><IMG SRC="/wtlgifs/web_info_cascade.png" ALT="Information" CLASS="headerImg" TITLE="Information"  NAME="web_info" HSPACE=0 VSPACE=0 BORDER=0 HEIGHT=12 WIDTH=14></TD><TD CLASS="indefault"><SPAN class="infotext"> Use any combination of selection options to narrow your search for courses.  You must choose at least one Subject.  When your selection is complete, choose Get Courses to perform the search.</SPAN></TD></TR></TABLE><P></DIV>
<BR>
<FORM ACTION="/prod/bwckctlg.p_display_courses" METHOD="POST">
<INPUT TYPE="hidden" NAME="term_in" VALUE="201320">
<INPUT TYPE="hidden" NAME="sel_subj" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_levl" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_schd" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_coll" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_divs" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_dept" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_attr" VALUE="dummy">
<TABLE  CLASS="dataentrytable" SUMMARY="This table is used for input criteria for catalog courses.">
<TR>
<TD CLASS="delabel" scope="row" ><LABEL for=subj_id><SPAN class="fieldlabeltext">Subject: </SPAN></LABEL></TD>
<TD CLASS="dedefault">
<SELECT NAME="sel_subj" SIZE="3" MULTIPLE ID="subj_id">
<OPTION VALUE="AAE">AAE-Aero & Astro Engineering
<OPTION VALUE="AAS">AAS-African American Studies
<OPTION VALUE="ABE">ABE-Agri & Biol Engineering
<OPTION VALUE="ACC">ACC-Accounting
<OPTION VALUE="ACE">ACE-Adult Continuing Education
<OPTION VALUE="ACS">ACS-Applied Computer Science
<OPTION VALUE="AD">AD-Art & Design
<OPTION VALUE="AERO">AERO-Aerospace Study - IU
<OPTION VALUE="AFRO">AFRO-Afro-American Studies
<OPTION VALUE="AFT">AFT-Aerospace Studies
<OPTION VALUE="AGEC">AGEC-Agricultural Economics
<OPTION VALUE="AGR">AGR-Agriculture
<OPTION VALUE="AGRY">AGRY-Agronomy
<OPTION VALUE="AHLT">AHLT-Allied Health Sciences-IU
<OPTION VALUE="AHS">AHS-Art: History
<OPTION VALUE="AMST">AMST-American Studies
<OPTION VALUE="ANAT">ANAT-Anatomy
<OPTION VALUE="ANSC">ANSC-Animal Sciences
<OPTION VALUE="ANTH">ANTH-Anthropology
<OPTION VALUE="ARAB">ARAB-Arabic
<OPTION VALUE="ARET">ARET-Architectural Engr Tech
<OPTION VALUE="ART">ART-Architectural Technology
<OPTION VALUE="AS">AS-Administrative Sciences
<OPTION VALUE="ASAM">ASAM-Asian American Studies
<OPTION VALUE="ASCS">ASCS-Arts &Sci Career Services
<OPTION VALUE="ASIA">ASIA-Asian Studies
<OPTION VALUE="ASL">ASL-American Sign Language
<OPTION VALUE="ASM">ASM-Agricultural Systems Mgmt
<OPTION VALUE="AST">AST-Astronomy - IU
<OPTION VALUE="ASTR">ASTR-Astronomy
<OPTION VALUE="AT">AT-Aviation Technology
<OPTION VALUE="BA">BA-Business Administration
<OPTION VALUE="BAND">BAND-Bands
<OPTION VALUE="BCHM">BCHM-Biochemistry
<OPTION VALUE="BCM">BCM-Bldg Construct Mgmt Tech
<OPTION VALUE="BGR">BGR-Boiler Gold Rush
<OPTION VALUE="BHS">BHS-Behavioral Sciences
<OPTION VALUE="BIOC">BIOC-Biochemistry-IU
<OPTION VALUE="BIOL">BIOL-Biological Sciences
<OPTION VALUE="BIOP">BIOP-Biophysics
<OPTION VALUE="BIOS">BIOS-Biostatistics
<OPTION VALUE="BITN">BITN-Biotechnology
<OPTION VALUE="BME">BME-Biomedical Engineering
<OPTION VALUE="BMET">BMET-Biomedical Elect Tech
<OPTION VALUE="BMS">BMS-Basic Medical Sciences
<OPTION VALUE="BSS">BSS-Behavioral & Social Sci
<OPTION VALUE="BTNY">BTNY-Botany & Plant Pathology
<OPTION VALUE="BUFW">BUFW-Business Fort Wayne - IU
<OPTION VALUE="BUKD">BUKD-Business Kelly Direct
<OPTION VALUE="BUPA">BUPA-Bus-Profess Accountancy
<OPTION VALUE="BUS">BUS-Business
<OPTION VALUE="CAND">CAND-Candidate
<OPTION VALUE="CDFS">CDFS-Child Dev &Family Studies
<OPTION VALUE="CE">CE-Civil Engineering
<OPTION VALUE="CEM">CEM-Construction Engr & Mgmt
<OPTION VALUE="CEMT">CEMT-Constr Engr Mgmt Tech
<OPTION VALUE="CET">CET-Civil Engineering Tech
<OPTION VALUE="CFS">CFS-Consumer & Family Sciences
<OPTION VALUE="CGT">CGT-Computer Graphics Tech
<OPTION VALUE="CHE">CHE-Chemical Engineering
<OPTION VALUE="CHEM">CHEM-Chemistry - IU
<OPTION VALUE="CHHS">CHHS-College of Hlth&Human Srv
<OPTION VALUE="CHM">CHM-Chemistry
<OPTION VALUE="CHNS">CHNS-Chinese
<OPTION VALUE="CIC">CIC Traveling Scholar
<OPTION VALUE="CIMT">CIMT-Computer Integr Mfg Tech
<OPTION VALUE="CIS">CIS-Computer Info Services
<OPTION VALUE="CIT">CIT-Computer & Info Tech-IU
<OPTION VALUE="CJUS">CJUS-Criminal Justice-IU
<OPTION VALUE="CLAS">CLAS-Classical Studies - IU
<OPTION VALUE="CLCS">CLCS-Classics
<OPTION VALUE="CLPH">CLPH-Clinical Pharmacy
<OPTION VALUE="CMCI">CMCI-CIC Common Market
<OPTION VALUE="CMCL">CMCL-Communications & Cultures
<OPTION VALUE="CMET">CMET-Constr Mgmt & Engr Tech
<OPTION VALUE="CMLT">CMLT-Comparative Literature-IU
<OPTION VALUE="CMPL">CMPL-Comparative Literature
<OPTION VALUE="CNET">CNET-Construction Engr Tech
<OPTION VALUE="CNIT">CNIT-Computer & Info Tech
<OPTION VALUE="CNT">CNT-Construction Technology
<OPTION VALUE="COAS">COAS-College Arts & Sciences
<OPTION VALUE="COGS">COGS-Cognitive Science
<OPTION VALUE="COLL">COLL-College of Arts & Science
<OPTION VALUE="COM">COM-Communication
<OPTION VALUE="COMM">COMM-Communication - IU
<OPTION VALUE="CPB">CPB-Comparative Pathobiology
<OPTION VALUE="CPET">CPET-Computer Engineering Tech
<OPTION VALUE="CPSY">CPSY-Counseling Psychology
<OPTION VALUE="CRJU">CRJU-Criminal Justice-IU
<OPTION VALUE="CS">CS-Computer Sciences
<OPTION VALUE="CSCI">CSCI-Computer Science - IU
<OPTION VALUE="CSD">CSD-Communic Sci & Disorders
<OPTION VALUE="CSR">CSR-Consumer ScI & Retailing
<OPTION VALUE="DANC">DANC-Dance
<OPTION VALUE="DAST">DAST-Dental Assisting
<OPTION VALUE="DHYG">DHYG-Dental Hygiene
<OPTION VALUE="DLTP">DLTP-Dental Lab Tech
<OPTION VALUE="DPIS">DPIS-Data Proc & Info
<OPTION VALUE="EALC">EALC-East Asian Lang & Cult
<OPTION VALUE="EAS">EAS-Earth & Atmospheric Sci
<OPTION VALUE="ECE">ECE-Electrical & Computer Engr
<OPTION VALUE="ECET">ECET-Electrical&Comp Engr Tech
<OPTION VALUE="ECON">ECON-Economics
<OPTION VALUE="EDCI">EDCI-Educ-Curric & Instruction
<OPTION VALUE="EDFA">EDFA-Foundations & Admin
<OPTION VALUE="EDHI">EDHI-Education Higher
<OPTION VALUE="EDPS">EDPS-Educ-Ed'l and Psy Studies
<OPTION VALUE="EDST">EDST-Ed Leadrship&Cultrl Fnd
<OPTION VALUE="EDUA">EDUA-Education Admin- IU
<OPTION VALUE="EDUC">EDUC-Education - IU
<OPTION VALUE="EEE">EEE-Environ & Ecological Engr
<OPTION VALUE="EEN">EEN - Energy Engineering
<OPTION VALUE="EMER">EMER-Emergency Medical Service
<OPTION VALUE="EN">EN-English - IU
<OPTION VALUE="ENE">ENE-Engineering Education
<OPTION VALUE="ENG">ENG-English - IU
<OPTION VALUE="ENGL">ENGL-English
<OPTION VALUE="ENGR">ENGR-First Year Engineering
<OPTION VALUE="ENTM">ENTM-Entomology
<OPTION VALUE="ENTR">ENTR-Entrepreneurship
<OPTION VALUE="EPCS">EPCS-Engr Proj Cmity Service
<OPTION VALUE="EQU">EQU-Equine Management
<OPTION VALUE="ESC">ESC-Engineering Sciences
<OPTION VALUE="ET">ET-Electrical Technology
<OPTION VALUE="ETCS">ETCS-Engr Tech & Computer Sci
<OPTION VALUE="ETHN">ETHN-Ethnic Studies
<OPTION VALUE="FCSM">FCSM-Fam Cons Sci:Merchandise
<OPTION VALUE="FILM">FILM-Film Studies
<OPTION VALUE="FINA">FINA-Fine Arts - IU
<OPTION VALUE="FIS">FIS-Forensic & Investig Sci
<OPTION VALUE="FLAC">FLAC-Foreign Lang & Cult-IU
<OPTION VALUE="FLL">FLL-Foreign Lang & Literatures
<OPTION VALUE="FLLC">FLLC-Foster Intl Liv/Learn Ctr
<OPTION VALUE="FM">FM-Fitness Management
<OPTION VALUE="FN">FN-Foods And Nutrition
<OPTION VALUE="FNR">FNR-Forestry&Natural Resources
<OPTION VALUE="FOLK">FOLK-Folklore
<OPTION VALUE="FR">FR-French
<OPTION VALUE="FREN">FREN-French - IU
<OPTION VALUE="FRST">FRST-Foreign Study
<OPTION VALUE="FS">FS-Food Science
<OPTION VALUE="FVS">FVS-Film And Video Studies
<OPTION VALUE="FWAI">FWAI-Ft Wayne Are Inst - IU
<OPTION VALUE="FWAS">FWAS - Arts And Sciences-FW
<OPTION VALUE="GBA">GBA-Business-Accounting
<OPTION VALUE="GBG">GBG-Business-General
<OPTION VALUE="GBH">GBH-General Business Health
<OPTION VALUE="GBI">GBI-Business-International
<OPTION VALUE="GBM">GBM-Business-Marketing
<OPTION VALUE="GEOG">GEOG-Geography
<OPTION VALUE="GEOL">GEOL-Geology
<OPTION VALUE="GEP">GEP-Global Engineering Program
<OPTION VALUE="GER">GER-German
<OPTION VALUE="GERN">GERN-Gerontology
<OPTION VALUE="GNC">GNC-Community College
<OPTION VALUE="GNS">GNS-Community College
<OPTION VALUE="GRAD">GRAD-Graduate Studies
<OPTION VALUE="GREK">GREK-Greek
<OPTION VALUE="GS">GS-General Studies
<OPTION VALUE="HDFS">HDFS-Human Dev &Family Studies
<OPTION VALUE="HEBR">HEBR-Hebrew
<OPTION VALUE="HER">HER-Herron Art
<OPTION VALUE="HHS">HHS-College Health & Human Sci
<OPTION VALUE="HIA">HIA-Health Info Administration
<OPTION VALUE="HIST">HIST-History
<OPTION VALUE="HK">HK-Health And Kinesiology
<OPTION VALUE="HON">HON-Honors - IU
<OPTION VALUE="HONR">HONR-Honors
<OPTION VALUE="HORT">HORT-Horticulture
<OPTION VALUE="HPER">HPER-Health Physical Ed &Recr
<OPTION VALUE="HPSC">HPSC-History & Phil Of Science
<OPTION VALUE="HSC">HSC-Health Sciences-IU
<OPTION VALUE="HSCI">HSCI-Health Sciences
<OPTION VALUE="HSRV">HSRV-Human Services
<OPTION VALUE="HTM">HTM-Hospitality & Tourism Mgmt
<OPTION VALUE="HUMA">HUMA-Humanities - General
<OPTION VALUE="IDE">IDE-Interdisciplinary Engr
<OPTION VALUE="IDIS">IDIS-Interdisciplinary Studies
<OPTION VALUE="IE">IE-Industrial Engineering
<OPTION VALUE="IET">IET-Industrial Engr Technology
<OPTION VALUE="IIM">IIM-Integrated Info Mgmt-IU
<OPTION VALUE="ILCS">ILCS-Intl Lang&Culture Studies
<OPTION VALUE="IM">IM-Informatics
<OPTION VALUE="INFO">INFO-Informatics -IU
<OPTION VALUE="INST">INST-India Studies-IU
<OPTION VALUE="INTG">INTG-Integrated Studies
<OPTION VALUE="INTL">INTL-International
<OPTION VALUE="INTR">INTR-Interior Design-IU
<OPTION VALUE="IPPH">IPPH-Industrial & Phys Pharm
<OPTION VALUE="IST">IST-Information Systems&Tech
<OPTION VALUE="IT">IT-Industrial Technology
<OPTION VALUE="ITAL">ITAL-Italian
<OPTION VALUE="ITC">ITC-Information Tech&Computers
<OPTION VALUE="ITCS">ITCS-Indust & Tech:Constr Tech
<OPTION VALUE="ITS">ITS-Information Tech Systems
<OPTION VALUE="JOUR">JOUR-Journalism
<OPTION VALUE="JPNS">JPNS-Japanese
<OPTION VALUE="JWST">JWST-Jewish Studies
<OPTION VALUE="KINS">KINS-Kinsey Institute
<OPTION VALUE="LA">LA-Landscape Architecture
<OPTION VALUE="LALS">LALS-Latina Am&Latino Studies
<OPTION VALUE="LAS">LAS-Latin American Studies
<OPTION VALUE="LATN">LATN-Latin
<OPTION VALUE="LAW">LAW-Law
<OPTION VALUE="LBST">LBST-Liberal Studies
<OPTION VALUE="LC">LC-Languages and Cultures
<OPTION VALUE="LCME">LCME-Lafayette Center Med Educ
<OPTION VALUE="LGBT">LGBT-Lesb,Gay, Bisex&Transgndr
<OPTION VALUE="LING">LING-Linguistics
<OPTION VALUE="LS">LS-Land Surveying
<OPTION VALUE="LSTU">LSTU-Labor Studies
<OPTION VALUE="LTHN">LTHN-Lithuanian
<OPTION VALUE="MA">MA-Mathematics
<OPTION VALUE="MARS">MARS-Medieval &Renaissance Std
<OPTION VALUE="MATH">MATH-Mathematics
<OPTION VALUE="MCMP">MCMP-Med Chem &Molecular Pharm
<OPTION VALUE="ME">ME-Mechanical Engineering
<OPTION VALUE="MED">MED-Medicine
<OPTION VALUE="MEST">MEST-Medieval Studies-IU
<OPTION VALUE="MET">MET-Mechanical Engr Tech
<OPTION VALUE="MFET">MFET-Manufacturing Engr Tech
<OPTION VALUE="MGEN">MGEN-Medical Genetics
<OPTION VALUE="MGMT">MGMT-Management
<OPTION VALUE="MHHS">MHHS-Med Humanities & Hlth Sci
<OPTION VALUE="MICR">MICR-Microbiology
<OPTION VALUE="MIL">MIL-Military - IU
<OPTION VALUE="MIS">MIS-Management Info Systems
<OPTION VALUE="MNEU">MNEU-Medical Neurobiology - IU
<OPTION VALUE="MSCI">MSCI-Medical Sciences
<OPTION VALUE="MSE">MSE-Materials Engineering
<OPTION VALUE="MSL">MSL-Military Science & Ldrshp
<OPTION VALUE="MSPT">MSPT - Motorsports Studies
<OPTION VALUE="MSTD">MSTD-Museum Studies
<OPTION VALUE="MT">MT-Mathematics-Butler
<OPTION VALUE="MUS">MUS-Music History & Theory
<OPTION VALUE="NELC">NELC-Near Eastern Lang
<OPTION VALUE="NEWM">NEWM-New Media
<OPTION VALUE="NMCM">NMCM-New Media Communication
<OPTION VALUE="NRES">NRES-Natural Res & Environ Sci
<OPTION VALUE="NS">NS-Naval Science
<OPTION VALUE="NUCL">NUCL-Nuclear Engineering
<OPTION VALUE="NUPH">NUPH-Nuclear Pharmacy
<OPTION VALUE="NUR">NUR-Nursing
<OPTION VALUE="NURS">NURS-Nursing - IU
<OPTION VALUE="NUTR">NUTR-Nutrition Science
<OPTION VALUE="OBHR">OBHR-Orgnztnl Bhvr &Hum Resrce
<OPTION VALUE="OLS">OLS-Organiz Ldrshp&Supervision
<OPTION VALUE="OVST">OVST-Overseas Studies
<OPTION VALUE="PACS">PACS-Peace & Conflict Studies
<OPTION VALUE="PATH">PATH-Pathology
<OPTION VALUE="PBHL">PBHL-Public Health
<OPTION VALUE="PCTX">PCTX-Pharmacology & Toxicology
<OPTION VALUE="PES">PES-Physical Education Skills
<OPTION VALUE="PHAD">PHAD-Pharmacy Administration
<OPTION VALUE="PHAR">PHAR-Pharmacology - IU
<OPTION VALUE="PHIL">PHIL-Philosophy
<OPTION VALUE="PHPR">PHPR-Pharmacy Practice
<OPTION VALUE="PHRM">PHRM-Pharmacy
<OPTION VALUE="PHSL">PHSL-Physiology
<OPTION VALUE="PHST">PHST-Philanthropic Studies
<OPTION VALUE="PHYS">PHYS-Physics
<OPTION VALUE="PLSC">PLSC-Plant Sciences
<OPTION VALUE="PLSH">PLSH-Polish
<OPTION VALUE="POL">POL-Political Science
<OPTION VALUE="POLS">POLS-Political Science - IU
<OPTION VALUE="PPE">PPE-Professional Practice-Engr
<OPTION VALUE="PPOL">PPOL-Public Policy
<OPTION VALUE="PPT">PPT-Professional Practice-Tech
<OPTION VALUE="PSY">PSY-Psychology
<OPTION VALUE="PSYI">PSYI-Psychology -IU
<OPTION VALUE="PTGS">PTGS-Portuguese
<OPTION VALUE="PULM">PULM-Pulmonary&Crit Care Med
<OPTION VALUE="RADI">RADI-Radiology
<OPTION VALUE="RADX">RADX-Radiologic Science
<OPTION VALUE="RECR">RECR-Recreation Leadership
<OPTION VALUE="REG">REG-Reg File Maintenance
<OPTION VALUE="REL">REL-Religious Studies
<OPTION VALUE="RUSS">RUSS-Russian
<OPTION VALUE="SA">SA-Study Abroad
<OPTION VALUE="SCI">SCI-General Science
<OPTION VALUE="SE">SE-Systems Engineering
<OPTION VALUE="SERV">SERV-Service Learning
<OPTION VALUE="SHRS">SHRS-Schl of Health&Rehab Sci
<OPTION VALUE="SLA">SLA-School of Liberal Arts
<OPTION VALUE="SLAV">SLAV-Slavic Lang & Lit
<OPTION VALUE="SLHS">SLHS-Speech, Lang&Hear Science
<OPTION VALUE="SLIS">SLIS-Lib & Info Science
<OPTION VALUE="SOC">SOC-Sociology
<OPTION VALUE="SPAN">SPAN-Spanish
<OPTION VALUE="SPCH">SPCH-Speech - IU
<OPTION VALUE="SPEA">SPEA-Public & Environ Affairs
<OPTION VALUE="SRCT">SRCT-Serbo-Croatian
<OPTION VALUE="STAR">STAR-Summer Trans Advis & Reg
<OPTION VALUE="STAT">STAT-Statistics
<OPTION VALUE="SUPV">SUPV-Supervision - IU
<OPTION VALUE="SWAH">SWAH-Swahili
<OPTION VALUE="SWK">SWK-Social Work-IU
<OPTION VALUE="SWRK">SWRK-Social Work
<OPTION VALUE="TCEM">TCEM-Tour Conventns&Event Mgmt
<OPTION VALUE="TCM">TCM-Technical Communications
<OPTION VALUE="TCOM">TCOM-Communications Gts - IU
<OPTION VALUE="TECH">TECH-Technology
<OPTION VALUE="TEL">TEL-Telecommunications - IU
<OPTION VALUE="THTR">THTR-Theatre
<OPTION VALUE="TLI">TLI-Technology Ldrshp Innovatn
<OPTION VALUE="UCOL">UCOL-University College -IU
<OPTION VALUE="URDU">URDU-Urdu
<OPTION VALUE="USP">USP-Undergrad Studies Prog
<OPTION VALUE="VCD">VCD-Visual Comm & Design
<OPTION VALUE="VCS">VCS-Veterinary Clinical Sci
<OPTION VALUE="VM">VM-Veterinary Medicine
<OPTION VALUE="WLAC">WLAC-World Languages&Culture
<OPTION VALUE="WOST">WOST-Women's Studies
<OPTION VALUE="YDAE">YDAE-Youth Develop & Ag Educ
<OPTION VALUE="ZOOL">ZOOL-Zoology
</SELECT>
</TD>
</TR>
<TR> 
```

我从上面删除了很多 html 代码以节省空间，因为它是多余的。要查看所有内容，您可以转到我在这篇文章底部提供的链接。我对 Web 开发语言不是很熟悉，但我正在尝试找到一种方法来复制此搜索，这样我就可以制作一个 iPhone 应用程序，该应用程序将向网站发送 POST 并填写指定的字段。例如：

```
<FORM ACTION="/prod/bwckctlg.p_display_courses" METHOD="POST">
<INPUT TYPE="hidden" NAME="term_in" VALUE="201320">
<INPUT TYPE="hidden" NAME="sel_subj" VALUE="CS"> 
```

这应该会向我展示 2013 年普渡大学的 CS 课程列表。如何将其发送到 Web 浏览器以执行？有没有办法可以从中构建一个链接并将其粘贴到我的网络浏览器中给我看？如果这是一个令人困惑的问题，我很抱歉，如果您不明白我的意思，请自己访问普渡网站并选择 Spring 2013，然后单击课程类型并点击搜索。URL 不会更改为任何有用的内容，但正确的数据（类）会显示在网页上。我想知道如何复制它，以便可以在我正在尝试制作的 iPhone 应用程序中使用它。为简单起见，我首先尝试在我的网络浏览器中复制它。

这是我所指的网站的链接： [Purdue](https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_disp_dyn_ctlg?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:26:21.880

只需制作一个文件，`index.html`然后将其保存到您的桌面或其他地方。在里面，只有：

```
<FORM ACTION="https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_display_courses"      METHOD="POST">
<INPUT TYPE="hidden" NAME="term_in" VALUE="201320">
<INPUT TYPE="hidden" NAME="sel_subj" VALUE="CS">
<INPUT TYPE="submit">
</FORM> 
```

然后在浏览器中打开它并单击提交。

顺便说一句，看起来他们可能已经保护了他们的网站，不允许在外部发布到此页面，所以你可能不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:25:09.773

由于表单使用 POST 方法，因此 URL 不包含任何有用的信息

它应该像这样简单：

```
<FORM ACTION="https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_display_courses" METHOD="POST">
<INPUT TYPE="hidden" NAME="term_in" VALUE="201320">
<INPUT TYPE="hidden" NAME="sel_subj" VALUE="CS"></FORM> 
```

# sql-server - 在 PostgreSQL 中替代 SQL Server 的 sysobjects

> ID：13024539
> 
> 赞同：1
> 
> 时间：2012-10-23T06:18:25.403
> 
> 标签：sql-server, postgresql

我正在将数据库从 SQL Server 移植到 PostgreSQL。`sysobjects`在 PostgreSQL 中有什么替代方法吗？如果是这样，那么它是什么以及如何使用它？

我的观点：

```
create view int_objects_v as 
  select
     io.*, soae."REQ_TYPE_NAME", soae."REQ_TABLE_NAME", 
     stc1."CODE_DESC" int_type_name, stc2."CODE_DESC" operation_type_name, 
     s."NAME" target_obj_name 
  from 
     int_objects io  
  left join 
     req_request_types_v soae on soae."ID" = io."SOURCE_OBJ_ID"  
  left join 
     std_type_codes_v stc1 on (stc1."CODE" = io."INT_TYPE" 
                               and stc1."TYPE" = 'intr_type') 
  left join
     std_type_codes_v stc2 on (stc2."CODE" = io."OPERATION_TYPE" 
                               and stc2."TYPE" = 'opr_type') 
  left join 
     sysobjects s on (s."ID" = io."TARGET_OBJ_ID") 
  where 
     io."ACTIVE_FLAG" = '1'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:27:49.543

PostgreSQL[支持 SQL 标准`information_schema`](http://www.postgresql.org/docs/current/static/information-schema.html)。

`sysobjects`MSSQL也是如此，但它也支持`information_schema`.

如果您找到了一种使用`information_schema`术语重写查询的方法，那么您就大功告成了。

也看这里[INFORMATION_SCHEMA vs sysobjects](https://stackoverflow.com/questions/4381765/information-schema-vs-sysobjects)

# php - PHP SQL 查询错误 22 仅在插入时找不到文件

> ID：13024545
> 
> 赞同：0
> 
> 时间：2012-10-23T06:19:14.533
> 
> 标签：php, sql, database, mysqli

我正在创建一个将数据插入数据库的网站。它可以毫无问题地将所有数据从数据库中提取出来，但是当我插入数据时它会出错。

这是获取值并进行查询和执行查询的部分：

```
 $facility_id = $_POST['facilityID'];
    $location_zone_area = $_POST['locationZoneArea'];
    $facility_type = $_POST['facilityType'];
    $structure_type = $_POST['structureType'];
    $material_type = $_POST['materialType'];
    $cause_of_defect = $_POST['causeOfDefect'];
    $defect_outcome = $_POST['defectOutcome'];
    $repair_strategy = $_POST['repairStrategy'];
    $defect_description = $_POST['defectDescription'];
    $defect_condition = $_POST['defectCondition'];
    $likelihood_of_failure = $_POST['likelihoodOfFailure'];
    $consequence_of_failure = $_POST['consequenceOfFailure'];
    $value = $_POST['value'];
    $risk = $_POST['risk'];
    $inspection_frequency = $_POST['inspectionFrequency'];
    $remarks = $_POST['remarks'];
    $structure_plan = $_POST['structurePlan'];
    $name_of_supervisor = $_POST['nameOfSupervisor'];
    $date = $_POST['date'];
    $email = $_POST['email'];

    $sQueryInsertData = "   INSERT INTO `
                            ".DB_PREFIX."main` 
                            (`facility_id`,`location_zone_area`,`structure_type`,`material_type`,`cause_of_defect`,`defect_outcome`,`repair_strategy`,`defect_description`,`defect_condition`,`likelihood_of_failure`,`consequence_of_failure`,`value`,`risk`,`inspection_frequency`,`remarks`,`structure_plan`,`name_of_supervisor`,`date`,`email`,`facility_type`) VALUES ('$facility_id','$location_zone_area','$structure_type','$material_type','$cause_of_defect','$defect_outcome','$repair_strategy','$defect_description','$defect_condition','$likelihood_of_failure','$consequence_of_failure','$value','$risk','$inspection_frequency','$remarks','$structure_plan','$name_of_supervisor','$date', '$email','$facility_type')";
    $insertSuccesfull = do_query($sQueryInsertData,'INSERT'); 
```

do_query：

```
function do_query($le_query_to_execute, $type_to_do) {
    global $link2;
    switch ($type_to_do) {
        case 'SELECT' :
            $return_value = mysqli_query($link2,$le_query_to_execute) or die(mysqlError($le_query_to_execute, mysqli_error($link2)));
            return $return_value;
            break;
        case 'UPDATE' :
            if (mysqli_query($link2,$le_query_to_execute) or die(mysqlError($le_query_to_execute, mysqli_error($link2)))) {
                return TRUE;
            }
            break;
        case 'DELETE' :
            if (mysqli_query($link2,$le_query_to_execute) or die(mysqlError($le_query_to_execute, mysqli_error($link2)))) {
                return TRUE;
            }
            break;
        case 'INSERT' :
            if (mysqli_query($link2,$le_query_to_execute) or die(mysqlError($le_query_to_execute, mysqli_error($link2)))) {
                return TRUE;
            }
            break;
        default :
            mysqlError($le_query_to_execute,'Er is geen keuze gemaakt wat voor soort type query het is.');
            return FALSE;
            break;
    }
    return FALSE;
} 
```

我得到的错误是：

```
There is an error in the query:

INSERT INTO ` facilitydb_main` (`facility_id`,`location_zone_area`,`structure_type`,`material_type`,`cause_of_defect`,`defect_outcome`,`repair_strategy`,`defect_description`,`defect_condition`,`likelihood_of_failure`,`consequence_of_failure`,`value`,`risk`,`inspection_frequency`,`remarks`,`structure_plan`,`name_of_supervisor`,`date`,`email`,`facility_type`) VALUES ('mcot','nederland / hiero / daar','Administration','Concrete','Low cement content and finely ground cement','Highly permeable concrete','Repair','Defect descri','Lighthouse.jpg','2','1','2','Very Low','Inspection/maintenance in a maximum of 5 yearsâ€™ time','kaput','Hydrangeas1.jpg','Marc MEesters','now', 'abcdingetje@gmail.com','building')

This is the error mysqli gave: 
Can't find file: '.\facilitydb2test\@000d@000a@0009@0009@0009@0009@0009@0009@0009facilitydb_main.frm' (errno: 22) 
```

表facility_main的数据：

```
CREATE TABLE `facilitydb_main` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `facility_id` text NOT NULL,
  `location_zone_area` text NOT NULL,
  `structure_type` text NOT NULL,
  `material_type` text NOT NULL,
  `cause_of_defect` text NOT NULL,
  `defect_outcome` text NOT NULL,
  `repair_strategy` text NOT NULL,
  `defect_description` text NOT NULL,
  `defect_condition` text NOT NULL,
  `likelihood_of_failure` int(11) NOT NULL,
  `consequence_of_failure` int(11) NOT NULL,
  `value` int(11) NOT NULL,
  `risk` text NOT NULL,
  `inspection_frequency` text NOT NULL,
  `remarks` text NOT NULL,
  `structure_plan` text NOT NULL,
  `name_of_supervisor` text NOT NULL,
  `date` text NOT NULL,
  `email` text NOT NULL,
  `facility_type` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:35:20.487

尝试

```
REPAIR TABLE facilitydb_main; 
```

编辑 INSERT INTO`facilitydb_main`应该是 INSERT INTO `facilitydb_main`（没有空格）

# java - 测试框架（如 JUnit 和 TestNG）中测试执行侦听器的典型用例是什么？

> ID：13024556
> 
> 赞同：1
> 
> 时间：2012-10-23T06:19:48.407
> 
> 标签：java, spring, testing, junit, testng

JUnit、TestNG 和 Spring 测试具有测试执行侦听器作为扩展机制。测试执行侦听器似乎是框架开发人员和工具开发人员感兴趣的低级功能。

测试执行侦听器有用的主要用例是什么？它们对应用程序开发人员有用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:46:23.480

在 testng 的情况下，listners 对我来说是最了不起的事情。testNg 列表器允许我简化测试方法的内容，并通过服务器启动、用户注册、填充测试所需的工件来管理每个测试。并且还为每个测试周期清理环境。

在每个侦听器级别，我都在执行以下操作，因此我不必在测试中打扰它们

**IExecutionListener**

```
 - onExecutionStart()
         Emma instrumentations
         Server start 
  - onExecutionFinish()
         Server Sutdown
         Emma report generation 
```

*   **ISuiteListener** 设置环境属性 ex- Key Store Paths

    ```
     Populate Users. 
    ```

*   **ITestListener**

    *   开始时

        ```
         Artifact Deployment 
        ```

    *   完成时

        ```
         Artifact Clean up 
        ```

*   **记者**

*   生成 TestNg 报告，生成可靠报告，为 Dashboard 导出数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T07:20:46.867

对于 JUnit，侦听器被设计为一种报告方法，并在内部像这样使用。因此，您可以显示执行的测试计数、成功、失败、错误等。这也可以在外部使用，例如在[maven-surefire](http://maven.apache.org/plugins/maven-surefire-plugin/)中。[以 JUnit4RunListener.java](https://github.com/apache/maven-surefire/blob/master/surefire-providers/common-junit4/src/main/java/org/apache/maven/surefire/common/junit4/JUnit4RunListener.java)为例。

另一种用途是以不同的格式输出，例如 XML。我认为其他框架的主要用例是相同的。

在 JUnit 中，侦听器类不打算以 Dharshana 在 testng 中使用他的测试侦听器的方式使用，即作为设置/拆卸。Listeners 中使用的对象（[Description](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/Description.html)、[Failure](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/notification/Failure.html)、[Result](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/Result.html)）是不可变的，不鼓励直接访问测试类本身。我不确定 TestNG，Cedric 会是一个更好的人问这个问题。

它们对应用程序开发人员有用吗？它们很可能是，这取决于您的测试是如何设置的。它们只会在测试的上下文中使用，所以如果他们可以改进它们，那么继续使用它们。一个用例是[使用 JavaDoc 丰富 JUnit 测试报告](https://stackoverflow.com/questions/8084773/junit-test-report-enrichment-with-javadoc)，请参阅[我的回答](https://stackoverflow.com/questions/8084773/junit-test-report-enrichment-with-javadoc/8165750#8165750)。回顾一下答案，如果开发人员为特定错误添加测试，那么他们可以向该测试添加注释，将其链接回错误。有一个自定义的 RunListener，它将注释中的所有信息收集在一起，并为最终客户生成报告。

# android - MonkeyRunner.waitForConnection() adb 拒绝 adb 端口转发命令：无法绑定套接字

> ID：13024562
> 
> 赞同：1
> 
> 时间：2012-10-23T06:20:27.497
> 
> 标签：android, sockets, monkeyrunner

我在使用monkeyrunner 时遇到了麻烦，只要模拟器启动，waitForConnection 就会死掉。我检查了 [为什么 MonkeyRunner.waitForConnection() 错误“Adb 拒绝 adb 端口转发命令：无法绑定套接字”](https://stackoverflow.com/questions/6950223/why-does-monkeyrunner-waitforconnection-error-adb-rejected-adb-port-forwardin)

我试过`adb kill-server` `adb start-server`或`sudo`。但他们没有帮助。

我正在使用 sdk 版本 20.0.1。Mac OSX 10.7.5

chengyang:~$adb devices 附加的设备列表 emulator-5554 设备

```
chengyang:~$monkeyrunner
Jython 2.5.0 (Release_2_5_0:6476, Jun 16 2009, 13:33:26) 
[Java HotSpot(TM) 64-Bit Server VM (Apple Inc.)] on java1.6.0_35
>>> from com.android.monkeyrunner import MonkeyRunner
>>> MonkeyRunner.waitForConnection()                 
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] Adb rejected adb port forwarding command: cannot bind socket
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice]com.android.ddmlib.AdbCommandRejectedException: cannot bind socket
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.ddmlib.AdbHelper.createForward(AdbHelper.java:545)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.ddmlib.Device.createForward(Device.java:481)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.chimpchat.adb.AdbChimpDevice.createManager(AdbChimpDevice.java:126)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.chimpchat.adb.AdbChimpDevice.<init>(AdbChimpDevice.java:72)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.chimpchat.adb.AdbBackend.waitForConnection(AdbBackend.java:107)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.chimpchat.ChimpChat.waitForConnection(ChimpChat.java:92)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyRunner.waitForConnection(MonkeyRunner.java:75)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.lang.reflect.Method.invoke(Method.java:597)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:175)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:190)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyObject.__call__(PyObject.java:381)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyObject.__call__(PyObject.java:385)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.pycode._pyx2.f$0(<stdin>:1)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.pycode._pyx2.call_function(<stdin>)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyTableCode.call(PyTableCode.java:165)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyCode.call(PyCode.java:18)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.Py.runCode(Py.java:1197)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.Py.exec(Py.java:1241)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.PythonInterpreter.exec(PythonInterpreter.java:147)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runcode(InteractiveInterpreter.java:89)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runsource(InteractiveInterpreter.java:70)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runsource(InteractiveInterpreter.java:46)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.push(InteractiveConsole.java:110)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.interact(InteractiveConsole.java:90)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.interact(InteractiveConsole.java:60)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.ScriptRunner.console(ScriptRunner.java:193)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:73)
121022 23:14:48.340:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:189)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:187)
    at com.android.chimpchat.adb.AdbChimpDevice.<init>(AdbChimpDevice.java:74)
    at com.android.chimpchat.adb.AdbBackend.waitForConnection(AdbBackend.java:107)
    at com.android.chimpchat.ChimpChat.waitForConnection(ChimpChat.java:92)
    at com.android.monkeyrunner.MonkeyRunner.waitForConnection(MonkeyRunner.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)

java.lang.NullPointerException: java.lang.NullPointerException
>>> 
```

# android - java和C之间的Android NDK共享变量

> ID：13024568
> 
> 赞同：0
> 
> 时间：2012-10-23T06:20:50.007
> 
> 标签：android, android-ndk

在 NDK 中，我知道如何将参数从 Java 传递给 C，然后将值从 C 传递给 Java。

但是我们能否拥有一些我可以同时从 Java 和 C 访问的数组。意味着我可以从 C 中添加该数组中的值，并且在添加一个值或 3-4 个值之后，我可以从 Java 访问这些值吗？

如果这不可行，我们可以使用其他东西来同时获得这些值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:24:47.330

将数组等放入 Java 代码中，并使用 JNI 从本机代码访问它（JNI 双向）。不用说，你需要小心。顺便说一句，您不能真正将值“添加”到 Java 中的数组中。如果您的真正意思是“添加”而不是“存储”，您可能需要一个列表或其他动态结构。

# java - 如何映射像 Map 这样的属性 与休眠？

> ID：13024569
> 
> 赞同：1
> 
> 时间：2012-10-23T06:20:54.507
> 
> 标签：java, hibernate, hibernate-mapping

Hibernate 是否有可能执行以下实体结构？

```
@Entity
public class Person {

    @OneToMany
    private Map<Class<? extends PersonRole>, PersonRole> personRoles;

    public <T extends PersonRole> T getRole(Class<T> roleClass) {
         return roleClass.cast(roles.get(roleClass));
    }

}

@Entity
public abstract class PersonRole {

    @ManyToOne
    private Person person;

} 
```

基本上 Hibernate 可以持久化这个映射的实体，但是不能再从数据库中加载它，但有以下例外：

```
Exception in thread "main" org.hibernate.HibernateException: null index column for      collection: de.his.cs.sys.hibernate.Person.roles
at org.hibernate.persister.collection.AbstractCollectionPersister.readIndex(AbstractCollectionPersister.java:822)
at org.hibernate.collection.internal.PersistentMap.readFrom(PersistentMap.java:277)
at org.hibernate.loader.Loader.readCollectionElement(Loader.java:1189)
at org.hibernate.loader.Loader.readCollectionElements(Loader.java:804)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:655)
at org.hibernate.loader.Loader.doQuery(Loader.java:854)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
at org.hibernate.loader.Loader.loadCollection(Loader.java:2094)
at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61) 
```

一种解决方法可能是使用“简单”集合并用拦截器填充地图，但我希望有可能在没有额外基础设施的情况下实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:37:06.627

有可能实现一个 Hibernate `UserType`，它将类映射到一个字符串并返回

```
@OneToMany
@MapKey(name = "className" type=@Type(type="namespace.classToNameUserType"))
private Map<Class<? extends PersonRole>, PersonRole> personRoles; 
```

[有关示例 UserType，请参见此处](http://java.dzone.com/articles/annotating-custom-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:48:38.473

在我看来，这个问题基本上是，休眠需要依赖于映射键的持久属性。因此，该解决方案向抽象类*RersonRole*添加了一个新属性：

```
private Class<?> className = this.getClass(); 
```

那么就可以在Person类的@MapKey注解中引用它：

```
@OneToMany
@MapKey(name = "className")
private Map<Class<? extends PersonRole>, PersonRole> personRoles; 
```

有了这个映射，hibernate 现在可以在没有进一步基础设施的情况下填充 Map。

从我的角度来看，大多数优雅的解决方案都有添加持久属性的缺点，这只是因为休眠需要（如果我得到问题的根本原因正确）。

# java - 如何使mysql在每次修改行操作时自动将列更新为当前时间戳？

> ID：13024583
> 
> 赞同：4
> 
> 时间：2012-10-23T06:22:21.863
> 
> 标签：java, mysql

我的 mysql 表中有 2 列：created_on 和 modified_on。我已将 created_on 列的默认值设置为 CURRENT_TIMESTAMP。因此，在表中的每个插入操作中，created_on 列正确地将值设置为当前时间戳。但是我希望当我更新同一行时，“modified_on”列在更新时将值更新为时间戳。如果我知道我使用任何功能/触发器来执行此操作，或者是否有任何内置的 mysql 功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:30:32.407

`ON UPDATE`尝试使用以下关键字更改您的表格：

```
ALTER TABLE `tableName` 
CHANGE `modified_on` `modified_on` TIMESTAMP 
ON UPDATE CURRENT_TIMESTAMP; 
```

或者您可以在插入时添加默认值，例如：

```
ALTER TABLE `tableName` 
CHANGE `modified_on` `modified_on` TIMESTAMP 
ON UPDATE CURRENT_TIMESTAMP
NOT NULL DEFAULT CURRENT_TIMESTAMP ; 
```

您还可以`ON UPDATE`在创建表时定义时间戳数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:25:15.283

为此编写一个触发器

# jakarta-ee - 如何在不使用 Maven 的情况下创建简单的 Jersey 应用程序

> ID：13024584
> 
> 赞同：1
> 
> 时间：2012-10-23T06:22:27.510
> 
> 标签：jakarta-ee, netbeans, jaxb, jax-rs

我想在 NetBeans 中不使用 Maven 制作一个简单的基于 Jersey 的 REST 应用程序。我按照以下步骤操作，现在我被卡住了：

1.  使用 NetBeans（或任何其他开发 IDE）创建了一个简单的 Web 应用程序。
2.  在我的项目中添加了 JAX-RS 库。
3.  我没有`web.xml`礼物，因为我正在使用`org.netbeans.rest.application.config`.

我现在被困住了。我想用`web.xml`. 有没有其他选择？

PS - 我试图在不使用 Maven 的情况下使用 JSON 作为输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:31:35.620

由于在第三步中您已经创建了配置类来公开您的 JAX-RS 资源类，因此您不需要`web.xml`. 您的应用程序应该准备好运行，至少在 Glassfish 或其他 Java 服务器上。

Java EE 6 的整个想法是摆脱 XML 配置文件，如`web.xml`. 新的注解`@javax.servlet.annotation.WebServlet`和`@javax.ws.rs.ApplicationPath`用于配置 Servlet 和 REST 应用程序。

但是如果你*想*拥有一个`web.xml`，你可以在目录中创建一个`web/WEB-INF`。一个最小的`web.xml`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0"
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
</web-app> 
```

# ios5 - iOS 5 推特使用情况

> ID：13024587
> 
> 赞同：0
> 
> 时间：2012-10-23T06:23:01.427
> 
> 标签：ios5

我已经为 iOS 5 及更高版本开发了一个成熟的 iPhone 应用程序。我使用第三方库进行 twitter 集成。但是由于某种原因，它总是会遇到问题。用 iOS 5 原生 twitter 功能替换所有 3rd 方的东西有多可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:57:36.800

为了实现 twitter 集成，您必须在项目中导入 Social 框架，并将其导入到您的 .h 文件中

```
#import <Social/Social.h> 
```

然后，您必须在要发布推文的方法上添加这些代码行。

```
SLComposeViewController *tweetVC = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
[tweetVC setInitialText:@"My tweet!"];
[self presentViewController:tweetVC animated:YES completion:nil]; 
```

# javascript - JS 表单验证

> ID：13024591
> 
> 赞同：0
> 
> 时间：2012-10-23T06:23:30.527
> 
> 标签：javascript

```
<html> 
<head> 
<title>Coupon test code</title> 
<style>
#error{
color: red;
font-weight: bold;
}
</style>
</head> 

<body> 
    <form name="couponField" action=""> 
        <span id="error"></span>
        Coupon code: 
        <input type="coupon" id="coupon" name="coupon"> 
        <input type="button" id="submit" value="Apply Coupon Code"> 
    </form> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
$('#submit').click(function(){
    if($('#coupon').val() == 'PROMO CODE'){
        $('#error').text('correct code!');
    }else{
        $('#error').text('wrong code!');
    }

});
</script>

</body> 
</html> 
```

上述代码执行以下操作： 1\. 验证输入的优惠券代码是否完全等于“PROMO CODE” 2\. 验证该字段是否为空。

我们正在尝试做的事情： 1\. 保持“促销代码”的验证不变。2\. 删除对空字段的验证。

这是订单的一部分，我们希望用户在其中输入促销代码。但由于所有用户可能没有促销代码，我们希望让用户可以选择将该字段留空。当前的验证使该字段成为“必填”字段。

任何建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:56:47.697

```
$('#submit').click(function(){
  var input = $('#coupon').val();
  if(input === 'PROMO CODE'){
    $('#error').text('correct code!');
  } else if (input !== ''){
    $('#error').text('wrong code!');
  }
}); 
```

确保您使用`===`而不是`==`在 JavaScript 中。

# c# - 如何验证 Parallel.Foreach 是否正常工作

> ID：13024594
> 
> 赞同：0
> 
> 时间：2012-10-23T06:23:41.770
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, parallel.foreach

在 Parallel Foreach 中，我正在调用一项服务，该服务为我提供有关一篇文章的所有信息，如果我尝试仅获取一篇文章的信息，则需要 6 秒。

我对此的疑问：

*   如果我要获取4篇文章的信息，需要多长时间？+- 6 秒??

*   实际上这样做需要 27 秒，有一种简单的方法可以检查它是否在并行工作？

*使用 C# MVC3*

代码：

```
 private void PopulateArticleDictionary()
    {
        List<Article> tmpArticleFirstLevel = new List<Article>();
        Parallel.ForEach<Article>(ArticlesFirstLevel,
            article =>
            {
                var articleInDepth = ArticleService.SearchByCode(article.Code, article.Code18, article.Quantity, "ES", "EUR");
                if (articleInDepth == null)
                {
                    tmpArticleFirstLevel.Add(article);
                }
                else
                {
                    tmpArticleFirstLevel.Add(articleInDepth);
                }                   

            }
            );            
        ArticlesFirstLevel = tmpArticleFirstLevel;
    } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:27:38.663

你有几个核心？如果您没有额外的处理器来利用它，并行库将不会启动额外的线程。还有一些开销，在 4 篇文章上并行可能并不值得，除非你有很多工作要做。

另外，您确定您的服务不是瓶颈吗？

试试这个，看看有没有改进

```
 System.Net.ServicePointManager.DefaultConnectionLimit = 1000; 
```

您可能会遇到连接到服务的瓶颈，因为开箱即用的 .NET 仅允许 2 个并发 HTTP 管道连接到同一主机。

# php - PHP和MySQL中日期时间的区别

> ID：13024596
> 
> 赞同：3
> 
> 时间：2012-10-23T06:23:55.060
> 
> 标签：php, mysql

我有 2 个来自 mysql 的日期时间格式的日期。

日期 1 是：

```
"2012/09/28 09:28:00" (column name is departure_date) 
```

日期 2 是：

```
"2012/09/29 10:48:00" (column name is return_date) 
```

那么如何得到这样的结果：`"25 hours 20 minutes"`

我不在乎秒数。

我使用 MySQL 和 PHP 作为编程语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:27:15.803

日期差功能已存在

```
SELECT DATEDIFF('2007-10-04 11:26:00','2007-10-04 11:50:00') 
```

你也可以试试 TimeDiff

```
SELECT TIMEDIFF('2007-10-05 12:10:18','2007-10-05 16:14:59') AS duration; 
```

因此，在您的情况下，您可以选择像这样使用这两个功能

```
SELECT TIMEDIFF(departure_date,return_date) AS duration;
SELECT DATEDIFF(departure_date,return_date) AS duration; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:31:02.103

您可以使用[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)类。

```
$date1 = new DateTime("2012/09/28 09:28:00");
$date2 = new DateTime("2012/09/29 10:48:00");

$diff = $date1->diff($date2);
echo $diff->format('%d days %h hours %i minutes'); 
```

检查[这里](http://www.php.net/manual/en/dateinterval.format.php)的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T06:32:52.707

你可以这样做：

```
$date1 = "2012/09/28 09:28:00";
$date2 = "2012/09/29 10:48:00";

$difference = abs(strtotime($date2)-strtotime($date1));

$hours = floor($difference / (60*60));
$minutes = floor(($difference - $hours * 60*60) / 60);

echo "{$hours} hours {$minutes} minutes"; 
```

它会为您提供您正在寻找的东西：

> 25 小时 20 分钟

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T06:39:49.737

尝试这个：

```
select concat(substr(mt,1,locate('.',mt)-1),' hours') hours,
       concat(ceil((substr(mt,locate('.',mt)+1) * .60)/100 ),' minutes') 
                                                                     as minutes
from (
select TIMESTAMPDIFF(MINUTE,
                      '2012/09/28 09:28:00','2012/09/29 10:48:00')/60 as mt)a 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/2997)

# java - 函数返回另一个类类型的变量

> ID：13024598
> 
> 赞同：-2
> 
> 时间：2012-10-23T06:23:59.863
> 
> 标签：java

我需要一个函数来获取名称并返回与该名称关联的记录的详细信息。我该怎么做？我有所有的信息。在我的结果集中，但我需要一种方法将其传递给一个变量并返回 java 中的值。我在 CentOS 下使用 eclipse-juno

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:34:22.717

如果您有一个`Person`带有 fields 的类`Name`，`Address`并且`Age`我假设您想查找`Person`给定 his/her的所有详细信息`Name`，您可以编写一个返回`Person`类对象的方法，如下所示：

```
//Assuming Person class is declared with all fields and/or appropriate setters-getters.
//create a method to get all the details of a particular person based on name.
public Person getPerson(String name){
   //get all the details from the database in a resultset rs
   //Create a new object Person class
   Person p = new Person();
   //set the details from the resultset to this newly created Person object
   p.setName(rs.getString("name");
   p.setAddress(rs.getString("address");
   p.setAge(rs.getInt("age");

   //now your Person object is ready with all the details that you need, you return it to callinh method

  return p;

} 
```

您可以通过 getter 使用此返回`Person`的对象来访问字段。

# ios - 在 iOS 6 中使用 Google Direction api

> ID：13024599
> 
> 赞同：2
> 
> 时间：2012-10-23T06:24:25.527
> 
> 标签：ios, google-maps, ios6, ios6-maps

我可以使用 Google 地图方向 API 在 iOS6 中的苹果地图（显然是在 mapView 上）上绘制折线吗？

如果是，那么它会得到苹果的批准吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:46:15.583

然后他们当然会批准。现在ios6苹果地图出现了一个问题。所以他们不会强迫任何开发者只使用苹果地图。

而且，如果您想支持旧版本的 ios 设备，那么您只需要集成 google Directions api。因此无需担心 google 路线 API 的审批。

# javascript - 评估变量名称是否等于字符串

> ID：13024606
> 
> 赞同：1
> 
> 时间：2012-10-23T06:24:50.180
> 
> 标签：javascript

我有

```
var myArrayVariable1 = new Array();
var myStringVariable1 = 'myArrayVariable1';
var myStringVariable2 = 'myArrayVariable2'; 
```

有什么方法可以确定其中一个字符串是否与变量名称匹配？在上述情况下，`myStringVariable1.Value = myArrayVariable1.VariablesName`

我的难题：我有大约 100 个对象，每个用户都是独一无二的。我需要每分钟更新每个对象

每个对象都被命名为数据库 id；javascript 必须找到对象，删除它，然后使用新值重新创建它（这些是通过 json 提取的）

所以我需要找到对象（使用我从 json 获得的字符串），然后我需要以某种方式调用该对象来删除它……有点卡在这里。

**抽象**地说，我正在寻找这样的东西：

```
foreach(object obj in allObjects){
  if (obj.ActualName==="something"){
   obj.Delete();
 }
} 
```

经过一番思考，没有回答我的问题，我正在考虑使用某种字典（等效的哈希图）来跟踪所有对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:30:34.263

如果变量是对象的一部分，则可以遍历它：

```
var obj {
    myVar: 'hello'
};
for (var varName in obj) {
    alert(varName + ' = ' + obj[varName]);
} 
```

# asterisk - Asterisk 系统在通过 PABX 电话呼叫时会忽略某些 DTMF 数字

> ID：13024608
> 
> 赞同：0
> 
> 时间：2012-10-23T06:24:59.653
> 
> 标签：asterisk, dtmf, agi

我在 CentOS 6.2 上使用 Asterisk E1 卡。

当我使用简单的 pstn 或手机呼叫我的星号系统时，呼叫完美运行。但是，当 PABX 电话呼叫相同的号码时，星号系统会忽略一些数字。

我正在使用星号 1.4 和 dahdi 2.4。

我也尝试过`dtmfmode = rfc2833`sip.conf 文件中的。请有人帮我解决这个问题。

eg：我们的系统实际上是做什么的，当有人调用我们的系统时，我们要求一个14位的注册ID，并对其进行一些操作，它工作正常。但是当有人从自己的 PBX 电话（或 PABX 或软电话）呼叫并输入注册 id 时，我们的系统会忽略一些数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:44:03.613

前段时间我也遇到过这个问题，这是一些 PBX。这对我有帮助：

relexdtmf=是

*我的 channel.conf 示例：*

```
; SPAN 1-4 = E1 (1-15,17-31,32-46,48-62,63-77,79-93,94-108,110-124)
; ------------------

switchtype = euroisdn
; Type of Number (TON) for called number
pridialplan = local
; Type of Number (TON) for calling number
prilocaldialplan = private
signalling = pri_cpe
context = incoming
group = 1
immediate = no
overlapdial = yes

channel => 1-15,17-31,32-46,48-62,63-77,79-93,94-108,110-124

; activate this option if there are problems with dtmf detection
relexdtmf=yes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:28:18.703

I suppose you meant 'call from PBX internal extension' from 'call from their own PBX phone'.

I have faced issue like this. In my case the issue was with the phone. some old or broken IP phone failed to generate proper DTMF signals. Have you tried different phones like soft phones.

# android - 我们如何使用两个 OnClick Listener

> ID：13024610
> 
> 赞同：1
> 
> 时间：2012-10-23T06:25:08.620
> 
> 标签：android, android-intent

在我的活动中我想使用`import android.content.DialogInterface.OnClickListener`，`import android.view.View.OnClickListener`因为在我的活动中我同时使用按钮和警报消息。任何人都告诉我如何同时使用两者。在尝试导入两者`OnClickListeners`时，它会出错。这个问题怎么解决？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:34:22.233

您需要为任一侦听器使用完整的包，例如

```
 android.content.DialogInterface.OnClickListener 
```

和其他一样

```
 OnClickListener 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:32:44.467

导入一个点击监听器，另一个你可以通过在定义中指定绝对路径来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:08:01.607

您可以使用如下代码：

```
button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(),
                                    "Button clicked", Toast.LENGTH_SHORT).show();
                }
            }); 
```

对于按钮 OnClick 方法，您需要以下导入，

```
import android.view.View.OnClickListener;

alert_dialog.setPositiveButton("Button Text", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), 
                        "Dialog clicked",Toast.LENGTH_SHORT).show();    
            }
        }); 
```

对于对话框 OnClick 方法，您需要以下导入，

```
import android.content.DialogInterface; 
```

希望对您有所帮助。

# html - 图像不占用 div 中的整个空间

> ID：13024614
> 
> 赞同：0
> 
> 时间：2012-10-23T06:25:19.227
> 
> 标签：html, css

如果我将标签放在一个 div 中，该 div 有 354x300 像素，粗略估计，并且该标签的 src 的像素为 1.6kx 1.2k，我该怎么办？问题是图像下方有一个空间，我没有占据整个空间，我不知道会发生什么图像已经足够大我认为它会重新调整自己的大小到 div 的大小img 标签所在的位置。

```
<div class="myClass">
     <img src="theVeryBigImage.jpg"/>
</div> 
```

以上是我在这部分产生的那部分的代码，见下图

![在此处输入图像描述](../Images/464227a23597a0dfa3db54b739a5d17f.png)

如您所见，该图像的大小为 1600x1200 像素，但它仍然没有占据整个空间，它在下面留下了一个空白（空白区域）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:30:00.397

尝试

```
.myClass  img{display:block ;height:100%;width:100%;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:30:36.150

一些默认的 css 可能会设置图像高度。

尝试

```
.myClass { height: /* some height */; }
.myClass img{ height:100% ; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:32:07.070

确保和之间没有填充和`div`边距`img`

```
.myClass { margin:0; padding: 0; width: auto; height: auto; }
.myClass img { margin:0; padding: 0; } 
```

# actionscript-3 - 如何让文本字段的宽度自动适应文本？

> ID：13024615
> 
> 赞同：1
> 
> 时间：2012-10-23T06:25:27.673
> 
> 标签：actionscript-3, flash

最近我正在考虑制作一个类似于 html 的 table 标签的组件。

html 表格可以根据其中的文本或内容自动调整单元格的宽度。特定列的宽度由该列上最宽的单元格决定。

```
<table>
    <tr>
        <td>this could be very long.</td>
    </tr>
    <tr>
        <td>short</td>
    </tr>
</table> 
```

但在 as3 中这是一个问题，除非我将其设置为文本字段，否则我不知道字符串的实际大小。我认为使用实际的文本字段实例尝试调整大小不是一个好策略，所以如果您有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:14:20.137

首先，您需要启用自动调整大小：

```
textField.autoSize = TextFieldAutoSize.LEFT; 
```

然后，如果您想阅读生成的文本大小，可以使用：

```
var width:Number = textField.textWidth;
var height:Number = textField.textHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:25:18.030

您还可以使用`String#length`属性来获取文本的长度。

```
var str:String = "some string data";
trace(str.length); 
```

# android - 附加的 apk 文件仍未更新

> ID：13024626
> 
> 赞同：1
> 
> 时间：2012-10-23T06:26:26.213
> 
> 标签：android, apk, email-attachments, android-build

我多次遇到这个问题，

我曾经通过邮件将apk文件发送给我的客户进行审查。

有时，他们告诉新附加的没有任何更新，它保持不变。

即使我在其中进行了更新，我也通过卸载旧应用程序并下载了附件来破解它，所以它在 myside 的更新中运行良好。

我要求他们也这样做。但对他们来说不是。

所以请给出一些想法，

1.  有没有更好的方法来共享 apk 文件？
2.  他们是否需要清理手机中的其他文件夹，例如 PC 中的“临时和缓存”？
3.  或者我错过了更新版本中的某个地方？

拜托，这对我来说总是很难面对。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:02:39.227

嗯.. 与其通过电子邮件将 .apk 文件发送给他们，不如将您的 .apk 文件上传到服务器或网站文件夹，让他们使用手机/设备从那里安装。在android中，您可以从互联网上安装apk文件：）

这样，您只需向他们发送应用程序更新版本的链接即可。

也许问题是您的apk发送到他们的计算机，要么没有真正保存/没有被覆盖。如果 .apk 文件具有相同的文件名。

您也可以尝试更改文件名

:)

# ios - 停止帧动画

> ID：13024628
> 
> 赞同：0
> 
> 时间：2012-10-23T06:26:47.107
> 
> 标签：ios, core-animation

我目前正在为从左到右的视图设置动画。但是，我需要在飞行中停止动画。为此，我使用：

```
CGRect frame = [movingView layer] presentationLayer] frame];
[movingView.layer removeAllAnimations];
movingView.frame = frame; 
```

不幸的是，执行此代码时，视图似乎略微向左跳跃。我怎样才能在它的确切位置停止动画？

# unix - 解密一个unix可执行文件

> ID：13024630
> 
> 赞同：1
> 
> 时间：2012-10-23T06:26:48.717
> 
> 标签：unix

有一个 unix 可执行文件，我想读取该文件的内容。它的格式不可读，需要破译。它没有任何扩展名，当我在终端上对其进行处理时，它的格式不可读。

是否有任何命令可以用来破译它或任何可以提供帮助的工具。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:34:55.590

如果它不可读，`cat`那么它可能是一种可执行格式，例如，`a.out`或者，更有可能是`ELF`（尽管它*可能*是不同的格式）。

如果您的可执行文件是`xyzzy`，您应该能够通过使用它来找出它是什么类型`file xyzzy`，例如：

```
pax> file /bin/ls
/bin/ls: ELF 32-bit LSB executable, Intel 80386,
         version 1 (SYSV), dynamically linked
         (uses shared libs), for GNU/Linux 2.6.18,
         stripped 
```

如果您在网络上搜索该文件格式（例如从此处开始），那么该文件格式已得到很好的记录（例如从[此处](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)开始），并且有诸如`gcb`、`nm`、`readelf`之类的工具`objdump`可以在不同程度上查看其中的内容，但它可能提供给您的只是原始汇编语言。回到易于理解的源代码将非常困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:38:53.580

你不需要破译它（除非它有一些二进制级别的混淆，因为它是一个 IOCCC 条目）。你可以使用`otool -tv`or来反汇编它，`objdump`然后阅读里面的程序做了什么。）

# algorithm - 丢失位的纠错码

> ID：13024633
> 
> 赞同：0
> 
> 时间：2012-10-23T06:27:00.917
> 
> 标签：algorithm, checksum, error-correction, error-detection

如果我们必须从发送方接收数据作为一大块位（比如 8 位）。

但是，传输不可靠，导致比特丢失。（不是位翻转）这意味着，**块中的任何位都可以不存在，并且接收器将仅接收 7 位。**

我研究了一些纠错编码，例如“汉明码”。但是，该代码旨在在这种情况下恢复翻转位而不是丢失位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:50:44.027

如果您对低熵代码感到满意并且可以检测到消息结束，则可以简单地将每个位发送两次。

**此代码可以从不同运行中发生的任意数量的删除中恢复：**

在接收时，找到所有奇数大小的运行并将它们扩展一位。如果最终得到的位数少于预期的位数，则无法从多次删除中恢复。

如果要确保可以恢复的固定错误率，请使用位填充。

例子：

```
0110

encoded as:
00 11 11 00

a double error occurs:
0x 11 x1 00

received:
011100

'0' and '111' are odd-sized runs. Fix:
00111100

we have 8 bits, and have recovered from a double error.
decode:
0110 
```

示例 2：

```
0101

encoded as
00110011

transmitted as
0xxx0011

received as
00011

corrected as
000011

decoded as
001

which is shorter than expected. A transmission error has occured. 
```

示例 3（运行 3 位后的位填充）：

```
0000 1111

stuffed as
00010 11101

sent as
0000001100 1111110011 
```

# java - SOAP 响应的不可读格式

> ID：13024636
> 
> 赞同：1
> 
> 时间：2012-10-23T06:27:22.267
> 
> 标签：java, wcf, soap

我在java中使用SOAP。从套接字读取时，我收到了不可读的字体/编码的响应。由于我是新用户，无法上传图片。

我无法理解内容的字体/编码，甚至无法理解这种字体/编码的原因。关于如何使用 java 将其转换为可读格式的任何想法？

谢谢

# imagemagick - 原因：库版本不兼容：识别需要14.0.0或更高版本，但libfreetype.6.dylib提供13.0.0版本 Trace/BPT陷阱

> ID：13024642
> 
> 赞同：4
> 
> 时间：2012-10-23T06:27:51.567
> 
> 标签：imagemagick, osx-snow-leopard, spree, dyld, identify

我正在运行 10.6.8 MacOSX Snow Leopard，并且我已经使用安装了 imagemagick `brew install imagemagick`，当我`identify`在终端中运行时出现以下错误，当我运行时也出现此错误`spree install`，因为 spree 也使用 imagemagick，而 imagemagick 需要一些 dyld 库版本14.0.0

# 错误

```
dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib
  Referenced from: /usr/local/bin/identify
  Reason: Incompatible library version: identify requires version 14.0.0 or later, but libfreetype.6.dylib provides version 13.0.0
Reason: Incompatible library version: identify requires version 14.0.0 or later, but libfreetype.6.dylib provides version 13.0.0
Trace/BPT trap 
```

我也运行了软件更新，但它没有更新 DYLD 库版本，我应该如何在雪豹中将库版本从 13.0.0 更新到 14.0.0 或更高版本？请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:04:40.250

我想通了，如果很简单，我只是将不同版本的 libfreetype.6.dyld 从我的 MAMP 安装复制到我的 /usr/X11/lib

```
sudo cp /Applications/MAMP/Library/lib/libfreetype.6.dylib /usr/X11/lib/ 
```

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T09:01:42.030

尝试使用以下命令安装 dlib 库

*conda install -c conda-forge dlib*

它将处理所有依赖项并最终解决。

# c++ - C++ 中的指针/C 字符串。如何过滤字符串？

> ID：13024645
> 
> 赞同：3
> 
> 时间：2012-10-23T06:28:03.920
> 
> 标签：c++, arrays, pointers, c-strings

我有一个要过滤的数组。

**例子：**

`str = "hellothere"`和`filter = "eo"`。当我需要过滤时该怎么办？

```
void filter_str(char* str, char* filter, char*result)
{
  while(*str)
  {
       if() //If the current character in str is one to be filter. 
        {
                 *str++;
        }
        else
        {
                *result++ = *str++;
        }

 } 
 *result = '\0';
} 
```

我只是不知道如何检查当前字符是否是需要过滤的字符。由于过滤器可以是多个字符，例如“eo”。如何检查每个循环的“e”和“o”，然后在开始时将过滤器重置回“e”。

我想创建一个指向过滤器开头的指针，然后在最后使用它返回过滤器的开头。但我不知道如何让它检查 *str 对所有要过滤的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:31:42.570

在这种情况下，已经编写了一个可以为您完成艰苦工作的函数

```
if (strchr(filter, *str)) 
```

一般来说，这是对任何处理过于复杂而无法处理的问题的答案。编写一个函数来解决“内部”问题，然后在“外部”问题中使用该函数。在这种情况下，内部问题是在字符串中查找字符，外部问题是您正在执行的过滤操作。你很幸运，内心的问题已经为你解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:36:28.590

如果您想知道一个字母是否在 中`filter`，“简单”的方法（不使用 STL 函数）将是遍历元素`filter`并检查它们中的每一个，看看您是否找到了您正在寻找的字符。

```
while(*str)
{
    bool found = false;
    // For each element in filter {
        // If *str == element {
            found = true;
            break; // This function gets you out of the 'for' loop
        }
    }

    if(found) //If the current character in str is one to be filter. 
    { 
```

您可以在评论中填写伪代码

# excel - 根据 3 个单独的值复制范围

> ID：13024646
> 
> 赞同：0
> 
> 时间：2012-10-23T06:28:06.013
> 
> 标签：excel, vba, header, range, row

我有 2 个工作簿。一个以 YYYYW**.xlsx 格式命名，其中 * 代表周数，另一个命名类似，但最后带有项目控制。第一个工作簿中有许多行包含许多值。它们的范围从 300--- 数字到 800--- 数字。这些也有一个交付日期以及项目是活跃的还是关闭的。

项目控制工作簿包含 3 张工作表，一张用于 2012 年项目，一张用于 2013 年项目，一张用于关闭。

我想问的是如何以编程方式获取数据范围并将它们传输到新工作簿中的相应工作表。

谢谢

```
Project|    Description             |   Delivery  |   Total Sales  |  
------------------------------------------------------------------------        
300661 |CCBS - HLP250               |   01/01/2012|  Active        |
------------------------------------------------------------------------      
300710 |STOCK - ITM250 ELECTRICS    |   01/01/2012|  Closed        |
------------------------------------------------------------------------      
300731 |Nirvana: 4th Piece packer   |   28/02/2012|  Closed        | 
------------------------------------------------------------------------     
300766 |STOCK - SATU                |   01/01/2012|  Active        | 
------------------------------------------------------------------------     
300767 |STOCK - HLP 250 CONVERSION  |   01/01/2012|  Active        | 
------------------------------------------------------------------------     
300768 |STOCK - PNEUMATIC, EMBOSSING|   01/01/2012|  Active        | 
------------------------------------------------------------------------     
412972 |I.T.M. BV                   |   23/05/2013|  Closed        |
------------------------------------------------------------------------      
412986 |I.T.M. BV                   |   17/07/2012|  Closed        | 
------------------------------------------------------------------------     
413001 |I.T.M. BV                   |   06/08/2012|  Closed        | 
------------------------------------------------------------------------     
510003 |Internal Project for issuing|   27/12/2013|  Active        | 
------------------------------------------------------------------------    
600161 |Tabak Invest  Kit & Conv    |   28/02/2012|  Closed        | 
------------------------------------------------------------------------     
600166 |UTC DUBAI                   |   10/01/2012|  Closed        | 
------------------------------------------------------------------------     
600168 |UTC HLP250 Conversion       |   20/02/2012|  Closed        | 
------------------------------------------------------------------------ 
```

上述信息需要按交货年份排序，无论是打开的还是关闭的，并且一旦放入正确的表格中，就需要将其复制成如图所示的数字顺序。

在上面的示例中，由于交付日期和活动状态，项目 510003 将进入工作簿 2013，而 300661、3006、300767 和 300768 将全部进入 2012 年，其余项目将进入已关闭工作表，因为项目已完成并已关闭地位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:57:19.350

这应该开始了。您必须进行一些调整以匹配您的实际数据和文件，但结构应该是可靠的。

```
Option Explicit

Sub MoveIt()

Dim wkbData As Workbook, wkbPaste As Workbook

Set wkbData = ThisWorkbook
Set wkbPaste = Workbooks("ProjectControl")

With wkbData

    Dim wks As Worksheet
    Set wks = Sheets(1) 'assumes data is in sheet1

    With wks

        ' -> note that use of .usedrange implies data is in a table with no other _
            data or formatting in the worksheet
        .UsedRange.AutoFilter 4, "Closed"

        Dim rng As Range
        Set rng = Intersect(.UsedRange, .UsedRange.Offset(1)).SpecialCells(xlCellTypeVisible)

        rng.Copy wkbPaste.Sheets("Closed")

        .UsedRange.AutoFilter 4, "Active"
        .UsedRange.AutoFilter 3, xlFilterThisYear

        Set rng = Intersect(.UsedRange, .UsedRange.Offset(1)).SpecialCells(xlCellTypeVisible)

        rng.Copy wkbPaste.Sheets("2012").Range("A1")

        .UsedRange.AutoFilter 4, "Active"
        .UsedRange.AutoFilter 3, xlFilterNextYear

        Set rng = Intersect(.UsedRange, .UsedRange.Offset(1)).SpecialCells(xlCellTypeVisible)

        rng.Copy wkbPaste.Sheets("2013").Range("A1")

    End With

End With

End Sub 
```

# html - 一行左右对齐的文本

> ID：13024648
> 
> 赞同：1
> 
> 时间：2012-10-23T06:28:10.910
> 
> 标签：html, css

我有一个关于左右对齐文本的问题，Phrogz 在这里雄辩地说明了这一点：

[如何将此跨度对齐到 div 的右侧？](https://stackoverflow.com/questions/5067279/how-to-align-this-span-to-the-right-of-the-div)

[http://jsfiddle.net/8JwhZ/3/](http://jsfiddle.net/8JwhZ/3/)

当窗口变得太小时的行为是，当两个`<div>`标签相互接触时，右对齐的文本被撞到下一行。

是否有另一种编码方式，以便它们保持在同一行？例如在上面的例子中，当第二个`<div>`标签被触摸时，我希望它停止移动并且窗口关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:02:01.607

正如@Mike 提到的，我们可以给

> 最小宽度：xxxpx；

要不然

尝试

> 位置：固定；

在每个跨度中都将解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:39:27.697

一种选择是将`min-width`属性附加到您的`.title`

```
.title
{
    min-width: 300px;
} 
```

[http://jsfiddle.net/8JwhZ/469/](http://jsfiddle.net/8JwhZ/469/)

这是否充分解决了您的问题，还是您有其他想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:42:03.173

不是真的，如果我理解你的问题。除非你使用绝对定位，否则你不能在屏幕太小后让它看起来很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T06:36:34.920

用这个：

.title {溢出：隐藏；}

hidden 的全部意义在于防止这种情况，而不是试图适应溢出，这个属性几乎忽略它并让它隐藏在屏幕上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T06:25:51.227

是的，您可以添加 min-width 和 min-height 属性来定位菜单的位置

> .heading { 最小宽度：200px; 最小高度：100px；}

# android - targetSdkVersion 在 android manifest 中与创建项目时选择的不相似

> ID：13024651
> 
> 赞同：4
> 
> 时间：2012-10-23T06:28:27.423
> 
> 标签：android

**我正在使用 Eclipse 在 android 中创建一个项目。**

现在我的问题是当我创建一个 android 应用程序项目时，我设置了`Build Sdk version to 4.1 (API 16)`. 但是当我在`manifest`文件中看到`android:targetSdkVersion="15"`. 谁能解释我为什么会这样？请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/f526d681c703337ab608cf5e674f6365.png)

![在此处输入图像描述](../Images/9ee30a01c22d94d2f1c1891e26c732de.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:19:49.220

**更新答案：**

就这样，

解决方案是，

*去：*

> 你的目录\android-sdk-windows\tools\templates\projects\NewAndroidApplication\root

*打开 ：*

> AndroidManifest.xml.ftl 文件

*改变 ：*

*默认 ：*

```
<uses-sdk android:minSdkVersion="${minApi}"
 android:targetSdkVersion="${targetApi}" /> 
```

*修改的 ：*

```
<uses-sdk android:minSdkVersion="${minApi}"
 android:targetSdkVersion="${buildApi}" /> 
```

所以问题就在这里：

在 ftl 文件`${targetApi}`中已设置属性名称，但我们`buildApi`在项目创建窗口中选择值。

`${targetApi}`或者`${buildApi}`默认值是更高版本，这意味着在您的 SDK 工具中它是 API 15。所以在 Manifest 中它始终是 15。

如果您尝试创建一个目标 API 少于 10 或多于 15 的新项目，则在清单中它将始终表示为 15。

尝试这个：

创建一个 API 目标为 8 的项目，然后查看，清单目标仅为 15。（在修改 ftl 文件之前）。但`project.properties`已正确更新。

因此，如果您更改`${targetApi}`为`${buildApi}`中的`Manifest.xml.ftl`，问题就解决了。

这可能是 SDK 工具修订版 20 中的错误，即使我更新了 SDK 工具，它在最近的修订版中也没有解决。

希望这对面临相同问题的人有所帮助。

**老答案：**

它也在向我展示。但就我而言，我选择了 API 14，它显示`android:targetSdkVersion="15"`在清单中。

我想应该有一些原因...... 4.0 或 4.2 ，它在清单中分配 4.1 ......或者可能是 Eclipse IDE 的错误。为什么不能更新较新版本的 Eclipse IDE 并尝试一下。这可能只是一个 IDE 问题。

您能看到右键单击-属性-Android，选中一个与您一开始选择的相同。

并且 project.properties 与您在开始时选择的版本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:49:23.347

好吧，您设置的项目目标已在 default.properties 文件中设置，如果您更改并保存它，附加的 sdk 将更改，您可以尝试一下。

在设备上编译后使用 menifiest 中的条目。不知道为什么它的值错误。但是在我的日食中它只需要 minsdkversion 并且它的值与我在开始时输入的值相同。**但是我的观点是没关系**

# c# - 如何将项目添加到我的 ListView

> ID：13024657
> 
> 赞同：0
> 
> 时间：2012-10-23T06:29:05.480
> 
> 标签：c#, winforms, listview, reference

我不断收到此错误，我知道为什么，但我需要帮助弄清楚如何解决它。我能够添加我的项目以制作新表格的唯一方法，但这似乎很愚蠢。

如果我将所有方法都设为静态，它将无法工作 =(

我不断得到，

> “非静态字段、方法或属性‘Handicap_Calculator.FormMain.listViewLog’\Form1.cs 74 13 Handicap Calculator 需要对象引用”

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Handicap_Calculator
{

public partial class FormMain : Form
{
    //FormAddScore FormAddNewScore = new FormAddScore();
    public static bool addScoreIsShown = false;
    public static FormAddScore _FormAddScore;
    public static ListViewItem Item;
    //public static List<string> ScoreInfo = new List<string>();

    public FormMain()
    {
        InitializeComponent();

    }

    public void button1_Click(object sender, EventArgs e)
    {
        try
        {
            if (_FormAddScore == null || _FormAddScore.IsDisposed)
            {
                _FormAddScore = new FormAddScore();
            }
            _FormAddScore.Show();
            if (_FormAddScore.WindowState == FormWindowState.Minimized)
            {
                _FormAddScore.WindowState = FormWindowState.Normal;
            }
            _FormAddScore.BringToFront();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    public static void AddScore()
    {
        int Round = 1;
        DateTime date = _FormAddScore.date;
        string course = _FormAddScore.course;
        int holes = _FormAddScore.holes;
        int score = _FormAddScore.score;
        float courseRating = _FormAddScore.courseRating;
        float slopeRating = _FormAddScore.slopeRating;

        string[] ScoreInfo = new string[7];
        ScoreInfo[0] = Round.ToString();
        ScoreInfo[1] = date.ToString();
        ScoreInfo[2] = course;
        ScoreInfo[3] = holes.ToString();
        ScoreInfo[4] = score.ToString();
        ScoreInfo[5] = courseRating.ToString();
        ScoreInfo[6] = slopeRating.ToString();
        AddToList(ScoreInfo);

    }

    public static void AddToList(string[] ScoreInfo)
    {
        Item = new ListViewItem(ScoreInfo);            
        //listViewLog.Items.Add(Item);      

    }

}
} 
```

编辑...

这是我调用它的类：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Handicap_Calculator
{

public partial class FormAddScore : Form
{
    public DateTime date;
    public string course;
    public int holes;
    public int score;
    public float courseRating;
    public float slopeRating;

    public FormAddScore()
    {
        InitializeComponent();

    }

    private void FormAddScore_FormClosing(object sender, FormClosingEventArgs e)
    {
        FormMain.addScoreIsShown = false;
    }

    public void  getscore()
    {
        try
        {
            date = dateTimePicker1.Value;
            course = textBoxCourse.Text;
            holes = Convert.ToInt16(textBoxHoles.Text);
            score = Convert.ToInt16(textBoxScore.Text);
            courseRating = Convert.ToSingle(textBoxCourseRating.Text);
            slopeRating = Convert.ToSingle(textBoxSlopeRating.Text);
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        getscore();            
        FormMain.AddScore();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:32:03.427

`AddScore`简单的解决方案是将您的方法定义`AddToList`为非静态的。

```
public void AddScore()
{
    //your code
}

public void AddToList(string[] ScoreInfo)
{
    // your code
} 
```

如果你想使用静态方法，你应该将你的 Form 实例传递给你想要在 ListView 上添加项目的方法。

```
public static void AddScore(FormMain mainForm)
{
    //your code
    AddToList(mainForm, ScoreInfo);
}

public static void AddToList(FormMain mainForm, string[] ScoreInfo)
{
    // your code
} 
```

**更新：**

根据您更新的代码，解决方案是在创建时将 FormMain 的实例传递给您的 FormAddScore。在 FormAddScore 中，您存储对 FormMain 实例的引用以调用方法。

```
public partial class FormAddScore : Form
{
  // your code

  private FormMain _mainForm;

  public FormAddScore(){
    InitializeComponent();

  }

  public FormAddScore(FormMain mainForm) : this(){
    _mainForm = mainForm;
  } 
```

在您的 FormMain 中，当您创建 FormAddScore 的实例时，您应该使用需要 FormMain 实例的构造函数

```
 _FormAddScore = new FormAddScore(this); 
```

通过此设置，您可以将方法更改为非静态方法，并且可以使用存储在变量 _mainForm 中的引用在 FormAddScore 中调用 FormMain 的方法。

```
 _mainForm.AddScore(); 
```

# branch - Perforce：判断代码行 A 是否从代码行 B 分支

> ID：13024660
> 
> 赞同：1
> 
> 时间：2012-10-23T06:29:39.207
> 
> 标签：branch, perforce

问题很直接：分别给定两条代码行 A 和 B，Perforce 如何判断 A 是否从 B 分支，反之亦然？

我认为应该跟踪这些信息，但不明确。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:49:48.700

调用`p4 filelog`树中的任何文件以查看文件的历史记录（包括它的分支位置）。对于间接祖先，您可以调用“修订历史”图（在 P4V Gui 中）。

# java - 添加异常处理程序工厂时在 faces-config.xml 中未捕获的 servlet 异常

> ID：13024662
> 
> 赞同：0
> 
> 时间：2012-10-23T06:29:41.173
> 
> 标签：java, jsf-2, exception-handling, websphere

当我对 JSF 异常处理进行一些实验时，我遇到了以下错误。基本上我真的不明白这个错误试图告诉什么？希望你们能帮助我解码消息。

```
[ERROR   ] Uncaught.init.exception.thrown.by.servlet
[ERROR   ] SRVE0315E: An execption occurred: com.ibm.ws.webcontainer.webapp.WebAppErrorReport: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:153)
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:194)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1078)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:4173)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:302)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.handleRequest(DynamicVirtualHost.java:296)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1006)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$1.run(DynamicVirtualHost.java:253)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:457)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:382)
    at com.ibm.ws.webcontainer.osgi.servlet.ServletWrapper.init(ServletWrapper.java:83)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:612)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:440)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.webapp.DefaultLoginPageGeneratingFilter.doFilterHttp(DefaultLoginPageGeneratingFilter.java:86)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:277)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.preauth.AbstractPreAuthenticatedProcessingFilter.doFilterHttp(AbstractPreAuthenticatedProcessingFilter.java:69)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at org.huahsin.security.PfmInitFilter.doFilter(PfmInitFilter.java:66)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:939)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1036)
    ... 9 more
Caused by: javax.faces.FacesException: java.lang.InstantiationException: org.huahsin.exception.JsfExceptionHandlerFactory
    at javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:281)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:203)
    at org.apache.myfaces.context.FacesContextFactoryImpl.<init>(FacesContextFactoryImpl.java:107)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:238)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:203)
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:320)
    ... 52 more
Caused by: java.lang.InstantiationException: org.huahsin.exception.JsfExceptionHandlerFactory
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:268)
    ... 64 more

[ERROR   ] Uncaught.init.exception.thrown.by.servlet
[ERROR   ] Uncaught.init.exception.thrown.by.servlet
[ERROR   ] Error Page Exception: 
```

这是我配置的`faces-config.xml`：

```
<factory>
  <exception-handler-factory>
    org.huahsin.exception.JsfExceptionHandlerFactory
  </exception-handler-factory>
</factory> 
```

这是`JsfExceptionHandlerFactory.java`：

```
public class JsfExceptionHandlerFactory extends ExceptionHandlerFactory {

    private ExceptionHandlerFactory factory;

    public JsfExceptionHandlerFactory(JsfExceptionHandlerFactory factory) {
        this.factory = factory;
    }

    /* (non-Javadoc)
     * @see javax.faces.context.ExceptionHandlerFactory#getExceptionHandler()
     */
    @Override
    public ExceptionHandler getExceptionHandler() {
        ExceptionHandler result = new JsfExceptionHandler(factory.getExceptionHandler());
        return result;
    }

} 
```

这是`JsfExceptionHandler.java`：

```
public class JsfExceptionHandler extends ExceptionHandlerWrapper {

    private ExceptionHandler handler;

    public JsfExceptionHandler(ExceptionHandler handler) {
        this.handler = handler;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return this.handler;
    }

    @Override
    public void handle() throws FacesException {

        System.out.println("handle");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:35:02.940

感谢@Ravi，我在`JsfExceptionHandlerFactory`课堂上通过将构造函数参数替换为`ExceptionHandlerFactory`. 以下是更新后的代码。

```
public class JsfExceptionHandlerFactory extends ExceptionHandlerFactory {

    private ExceptionHandlerFactory factory;

    public JsfExceptionHandlerFactory(ExceptionHandlerFactory factory) {
        this.factory = factory;
    }

    /* (non-Javadoc)
     * @see javax.faces.context.ExceptionHandlerFactory#getExceptionHandler()
     */
    @Override
    public ExceptionHandler getExceptionHandler() {
        ExceptionHandler result = new JsfExceptionHandler(factory.getExceptionHandler());
        return result;
    }

} 
```

# objective-c - NSMutableData 到 int 的转换在 iOS 6 中存在问题？

> ID：13024678
> 
> 赞同：0
> 
> 时间：2012-10-23T06:30:36.123
> 
> 标签：objective-c, ios, ios5, ios6, nsmutabledata

我有以下代码段。整数变量的输出在 iOS 5 中符合预期，但在 iOS 6 中出现了一些不规则的输出！谁能解释发生了什么？

```
int XmlMsgSubType;
[XmlMsgSubTypeData getBytes:&XmlMsgSubType length:1];
NSLog(@"XML subtype data: %@", XmlMsgSubTypeData);
NSLog(@"XML subtype: %d", XmlMsgSubType); 
```

iOS 5 中的输出

```
XML subtype data: <06>
XML subtype: 6 
```

iOS 6 中的输出

```
XML subtype data: <06>
XML subtype: 985605638 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:43:50.900

如果由于某种原因在 ios 6 上 XmlMsgSubTypeData 对象中没有数据，则 XmlMsgSubType 将未初始化，因此返回的值将未定义。我怀疑实际错误发生在您将数据读入 XmlMsgSubTypeData 的地方。尝试调用 [XmlMsgSubType length] 来检查它不为零。

# java - java程序的编译错误：编码UTF8的不可映射字符

> ID：13024680
> 
> 赞同：0
> 
> 时间：2012-10-23T06:30:47.090
> 
> 标签：java, utf-8, hadoop, compiler-errors, mapreduce

我编写了这个 Java hadoop 程序，它将执行文件的并行索引。该文件是在 eclipse 中创建的

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> { 
     private final static IntWritable zero = new IntWritable(0); 
     private Text word = new Text();
     public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
        String line = value.toString();
        int CountComputers;
        //DataInputStream ConfigFile = new DataInputStream( new FileInputStream("countcomputers.txt"));
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // путь к файлу
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String result = br.readLine(); // читаем как строку
        CountComputers = Integer.parseInt(result); // переводим строку в число
        //CountComputers=ConfigFile.readInt();
        in.close();
        fstream.close();
        ArrayList<String> paths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          paths.add(tokenizer.nextToken());
        }
        String[] ConcatPaths= new String[CountComputers];
        int NumberOfElementConcatPaths=0;
        if (paths.size()%CountComputers==0)
        {
            for (int i=0; i<CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*paths.size()/CountComputers+j);
                }
            }
        }
        else
        {
            NumberOfElementConcatPaths=0;
            for (int i=0; i<paths.size()%CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers+1;              
                for (int j=1; j<paths.size()/CountComputers+1; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*(paths.size()/CountComputers+1)+j);
                }           
            }
            for (int k=paths.size()%CountComputers; k<CountComputers; k++)
            {
                ConcatPaths[k]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;                
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[k]+="\n"+paths.get((k-paths.size()%CountComputers)*paths.size()/CountComputers+paths.size()%CountComputers*(paths.size()/CountComputers+1)+j);
                }                   
            }
        }
        //CountComputers=ConfigFile.readInt();
        for (int i=0; i<ConcatPaths.length; i++)
        {
            word.set(ConcatPaths[i]);
            output.collect(word, zero);
        }
     }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> { 
    public native long Traveser(String Path);
    public native void Configure(String Path);
    public void reduce(Text key, IntWritable value, OutputCollector<Text, LongWritable> output, Reporter reporter) throws IOException { 
        long count;
        String line = key.toString();
        ArrayList<String> ProcessedPaths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          ProcessedPaths.add(tokenizer.nextToken());
        }       
        Configure("/etc/nsindexer.conf");
        for (int i=0; i<ProcessedPaths.size(); i++)
        {
            count=Traveser(ProcessedPaths.get(i));
        }
        output.collect(key, new LongWritable(count));
      }
    static
    {
        System.loadLibrary("nativelib");
    } 
}

public static void main(String[] args) throws Exception { 
      JobConf conf = new JobConf(ParallelIndexation.class); 
      conf.setJobName("parallelindexation");
      conf.setOutputKeyClass(Text.class);
      conf.setOutputValueClass(LongWritable.class);
      conf.setMapperClass(Map.class);
      conf.setCombinerClass(Reduce.class);
      conf.setReducerClass(Reduce.class);
      conf.setInputFormat(TextInputFormat.class);
      conf.setOutputFormat(TextOutputFormat.class);
      FileInputFormat.setInputPaths(conf, new Path(args[0]));
      FileOutputFormat.setOutputPath(conf, new Path(args[1]));
      JobClient.runJob(conf);
  } 
} 
```

通过团队在 Nexenta Illumos 操作系统 (solaris) 中编译的结果

```
javac -classpath hadoop-examples-1.0.1.jar -d folder/classes folder/src/ParallelIndexation.java, 
```

收到以下错误

```
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                     ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                      ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                       ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                        ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                          ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                            ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                             ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                              ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                               ^
folder/src/ParallelIndexation.java:23: error: unmappable character for encoding UTF8
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // ���� � �����
                                                                                                ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                          ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                           ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                            ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                             ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                              ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                               ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                 ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                  ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                   ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                     ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                      ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                       ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                        ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                         ^
folder/src/ParallelIndexation.java:26: error: unmappable character for encoding UTF8
        String result = br.readLine(); // ������ ��� ������
                                                          ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                      ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                       ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                        ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                         ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                          ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                           ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                            ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                             ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                              ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                 ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                  ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                   ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                    ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                     ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                       ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                         ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                          ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                           ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                            ^
folder/src/ParallelIndexation.java:27: error: unmappable character for encoding UTF8
        CountComputers = Integer.parseInt(result); // ��������� ������ � �����
                                                                             ^
46 errors 
```

如何在eclipse中更改UTF8的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:01:39.703

在 Eclipse 中，您可以在三个地方设置文本文件编码：

*   在工作区级别：首选项/常规/工作区/文本文件编码
*   在项目级别：属性（在项目上）/资源/文本文件编码
*   在文件级别：属性（文件上）/资源/文本文件编码

我建议将其设置在工作区和项目级别，并且仅在必要时在文件级别进行设置。

设置文件编码并不能真正转换文件本身。您可能需要为此使用单独的工具（例如`iconv`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T00:57:33.167

Java 6 对不可映射的字符给出了“警告”。

Java 7 为不可映射的字符提供了一个“错误”，并且失败了。

检查文件编码

```
file -bi [filename] 
```

# java - 在Java中获取音频文件的波形

> ID：13024683
> 
> 赞同：6
> 
> 时间：2012-10-23T06:30:52.670
> 
> 标签：java, audio, fft, javasound

我想知道如何从音频文件中获取诸如振幅之类的音乐信息？

假设我们有一个原始音频文件，我想从文件中提取数据，它允许我生成一条曲线，例如[http://www1.icsi.berkeley.edu/Speech/mr/nearfar.html](http://www1.icsi.berkeley.edu/Speech/mr/nearfar.html)。获得这条曲线后，我将执行 FFT 等。

![在此处输入图像描述](../Images/d7d25110e7e2e68f633c1e745b58e831.png)

我一直在尝试在 Java Sound 中寻找解决方案，但目前我只知道我可以将数据倒入`byte[]`使用`AudioInputStream`. 但是我如何将其`byte[]`转换为`double[]`包含有关声音的实际信息的内容？在这种情况下， 中的值`double[]`表示**幅度。**

任何人都可以提供一个解决方案来解决Java中的这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:37:44.623

典型的 wav 文件是 16 位 little endian，因此您可以取每两个连续字节 b1 和 b2，得到幅度如下：

```
(double) (b2 << 8 | b1 & 0xFF) / 32767.0; 
```

如果输入是立体声，前两个字节是左声道，然后是右声道两个字节。

# c# - 调用需要在 VB.NET 或 C# 中作为基类类型的派生类实例的方法

> ID：13024688
> 
> 赞同：0
> 
> 时间：2012-10-23T06:31:17.760
> 
> 标签：c#, .net, vb.net, class, downcast

我有两个对象——从基础“Obj”派生的“宇宙飞船”和“行星”。我已经定义了几个类——圆形、三角形、矩形等，它们都继承自“形状”类。

出于碰撞检测的目的，我想给 Obj 一个“形状”：

```
Dim MyShape as Shape 
```

所以在“宇宙飞船”中我可以：

```
MyShape = new Triangle(blah,blah) 
```

在“星球”中，我可以：

```
MyShape = new Circle(blah,blah) 
```

我有一个方法（重载多次）检查不同形状之间的碰撞，例如：

```
public shared overloads function intersects(byval circle1 as circle, byval circle2 as circle) as boolean 
```

和

```
public shared overloads function intersects(byval circle as circle, byval Tri as triangle) as boolean 
```

当我使用派生类调用函数时，这很好用，例如：

```
dim A as new circle(blah, blah)
dim B as new triangle(blah, blah)
return intersects(A,B) 
```

但是当我使用 MyShape 调用它时，我收到一个错误，因为该方法正在传递一个“Shape”（而不是派生类型），该方法没有重载。

我可以通过执行以下操作来解决它：

```
Public Function Translate(byval MyShape1 as Shape, byval MyShape2 as Shape )as boolean
if shape1.gettype = gettype(circle) and shape2.gettype=gettype(circle) then ''//do circle-circle detection
if shape1.gettype = gettype(triangle) and shape2.gettype=gettype(circle) then ''//do triangle-circle detection
End Function 
```

但这似乎很混乱。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:37:47.633

一种解决方法是`MyActualFunction`作为类成员插入。

形状：

```
Public MustOverride Function MyActualFunction()
End Function 
```

在圆形和三角形中：

```
Public Overrides Function MyActualFunction()
End Function 
```

然后这样称呼它：

```
MyShape.MyActualFunction() 
```

这将知道要调用哪个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:54:02.577

Polymorphism can't help you with that therefore you'll have to create a common method with both parameters of type `Shape` and then distinguish them inside it:

```
Public Function DoCollide(ByRef shape1 As Shape, ByRef shape2 As Shape) As Boolean
    If TryCast(shape1, Circle) IsNot Nothing And TryCast(shape2, Circle) IsNot Nothing Then
        Return DoCollide(TryCast(shape1, Circle), TryCast(shape2, Circle))
    ElseIf TryCast(shape1, Circle) IsNot Nothing And TryCast(shape2, Triangle) IsNot Nothing Then
        Return DoCollide(TryCast(shape1, Circle), TryCast(shape2, Triangle))
    Else
        Return False
    End If
End Function 
```

I would put this function along with all the specialized implementations doing the actual collision detection in their own class `CollisionDetector`

```
Public Class CollisionDetector

    Public Function DoCollide(ByRef shape1 As Shape, ByRef shape2 As Shape) As Boolean
        If TryCast(shape1, Circle) IsNot Nothing And TryCast(shape2, Circle) IsNot Nothing Then
            Return DoCollide(TryCast(shape1, Circle), TryCast(shape2, Circle))
        ElseIf TryCast(shape1, Circle) IsNot Nothing And TryCast(shape2, Triangle) IsNot Nothing Then
            Return DoCollide(TryCast(shape1, Circle), TryCast(shape2, Triangle))
        Else
            Return False
        End If
    End Function

    Public Function DoCollide(ByRef circle1 As Circle, ByRef circle2 As Circle) As Boolean
        Return True
    End Function

    Public Function DoCollide(ByRef circle As Circle, ByRef triangle As Triangle) As Boolean
        Return True
    End Function

End Class 
```

# java - java正则表达式：固定组数

> ID：13024689
> 
> 赞同：2
> 
> 时间：2012-10-23T06:31:18.167
> 
> 标签：java, regex

我有一个这样的字符串：`obj[attr1=val1 attr2=val2 attr3=val3]`
我需要提取对象名称和属性。

早些时候，我已经决定使用下一个正则表达式在 javascript 中执行类似的任务：

```
/^(\w+)(?:\[(\w+=\w+)(?:\s(\w+=\w+))*\])?$/ 
```

现在我在java中决定时遇到了麻烦：

```
Pattern pathPattern = Pattern.compile("^(\\w+)(?:\\[(\\w+=\\w+)(?:\\s+(\\w+=\\w+))*\\])?$"); 
```

我得到的只是一个对象名称和第一个属性。似乎 Mather 类在不考虑符号“*”的情况下获得了与“()”计数相对应的组计数。

是否有可能使 java reg exp 像 js regexp 一样工作，或者我需要进行两步提取？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:44:36.643

`Matcher.groupCount()`只计算左括号的数量并将它们视为一个组。因此，您打开的括号数将是组数（前提是您没有使用任何非捕获组）。

您可以使用以下模式获取内部的值`[.*]`： -

```
Pattern pattern = Pattern.compile("(?:\\b)(\\w+?)=(\\w+?)(?:\\b)");
Matcher matcher = pattern.matcher(str);

while (matcher.find()) {
    System.out.println(matcher.group(1) + " : " + matcher.group(2));
} 
```

这将匹配and中`attr=val`的所有对。`[``]`

**输出**： -

```
attr1 : val1
attr2 : val2
attr3 : val3 
```

**更新**： -

由于您不必在上面的字符串中进行边界检查，因此上述模式甚至可以简化为： -

```
Pattern pattern = Pattern.compile("(\\w+?)=(\\w+)"); 
```

# objective-c - ViewPicker 中的 SelectRow

> ID：13024690
> 
> 赞同：0
> 
> 时间：2012-10-23T06:31:19.323
> 
> 标签：objective-c, ios

在 viewDidLoad 我有这个代码：

> // 这里总是显示正确的字符串 aCapital 值一、二、三、四

NSLog(@"大写 %@", self.aCapital);

```
if (!self.aCapital) {
  self.aCapital = @"One";
     } else {

if (self.aCapital = @"One") {
    [self.Select selectRow:0 inComponent:0 animated:NO];
    NSLog(@"One");
    return;
}

if (self.aCapital = @"Two") {
    [self.Select selectRow:1 inComponent:0 animated:NO];
    NSLog(@"Two");
    return;
}

if (self.aCapital = @"Three") {
    [self.Select selectRow:2 inComponent:0 animated:NO];
    NSLog(@"Three");
    return;
}

if (self.aCapital = @"Four") {
    [self.Select selectRow:3 inComponent:0 animated:NO];
    NSLog(@"Four");
    return;
}

     } 
```

但是 Select PickerView 没有显示正确的 selectRow。如果我删除所有代码并在 viewDidLoad 我只需插入

> [self.Select selectRow:2 inComponent:0 Animation:NO];

显示了正确的三行（对于一和二值相同）。取而代之的是 selectRow:3 不显示四，而是一！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:49:45.230

这一行使`if (self.aCapital = @"One")`您在`if`语句中分配值的问题。这个表达式`true`总是求值。

您需要使用比较值

```
if (self.aCapital == @"One") 
```

或者

```
if ([self.aCapital isEqualToString: @"One"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:44:56.693

您实际上分配了一个不比较的值。你应该输入：

```
if (self.aCapital == @"One") {
    [self.Select selectRow:0 inComponent:0 animated:NO];
    NSLog(@"One");
    return;
} 
```

# ios - 我可以得到 iOS 5.0.1 模拟器吗

> ID：13024691
> 
> 赞同：1
> 
> 时间：2012-10-23T06:31:19.987
> 
> 标签：ios, xcode, ios-simulator, data-storage

我正在为 iOS 5.0.1 及更高版本的应用程序实现 do-not-backup 属性。正如[Apple](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)建议的那样，为 iOS 5.1 及更高版本设置密钥有不同的方法。我可以使用可用的模拟器测试 iOS 5.1 及更高版本（没有崩溃），但要测试 5.0.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:13:20.340

不，我认为您无法获得 5.0.1 模拟器。最好的办法是在 iOS 5.0.1 设备上测试您的应用程序。

# visual-studio-2012 - 我可以使用 VS2012 快速启动从我的解决方案中打开文件吗？

> ID：13024696
> 
> 赞同：5
> 
> 时间：2012-10-23T06:31:34.343
> 
> 标签：visual-studio-2012

VS2012 在标题栏中增加了一个新的快速启动编辑框。是否有可用于从解决方案中打开任意文件的键序列？

我想要某个东西：

*   快速地

*   仅键盘

*   这并不关心文件在我的解决方案中的位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T05:57:10.713

我认为答案是“**不**”，但我找到了一种不同的方法来做同样的事情：`ctrl-;`. 这会“在解决方案资源管理器中搜索”。它以增量方式搜索文件**和**符号。

[![在此处输入图像描述](../Images/e2a749e4ec91df20e0e9811ac19cfc7a.png "点击查看完整尺寸")](https://i.stack.imgur.com/7qxTA.png)

# jquery - 将类添加到 td 除了每行的第一和第二列

> ID：13024700
> 
> 赞同：2
> 
> 时间：2012-10-23T06:31:44.343
> 
> 标签：jquery

```
$(".csstablelisttd").live('mousedown', function (e)
{    
    var rowIndex = $(this).closest("tr").index();
    var colIndex = $(e.target).closest('td').index();  
    $('#contentPlaceHolderMain_tableAppointment tr').eq(rowIndex).find('td').eq(colIndex).addClass('csstdhighlight');
}); 
```

我必须向 td 添加类，除了每行的第一和第二列

[工作演示](http://jsfiddle.net/65S7N/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:39:24.010

写成——

```
$('tr').find('td:gt(1)').addClass('csstdhighlight'); 
```

[**工作演示**](http://jsfiddle.net/dTCjH/2/)

这将为除前两个之外的每一行中的所有 TD 添加类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:55:50.207

```
if (colIndex == 0 || colIndex == 1)
return; 
```

做这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:36:52.440

使用[gt](http://api.jquery.com/gt-selector/)。这将选择大于列索引的 td

```
$('table tr').find('td:gt(1)').css('color','red');​ 
```

[演示](http://jsfiddle.net/JzG5D/)

# java - TomEE：每个 EAR 单个类加载器 + 父级最后一个

> ID：13024704
> 
> 赞同：1
> 
> 时间：2012-10-23T06:32:14.657
> 
> 标签：java, jakarta-ee, classloader, apache-tomee

有没有办法将 TomEE 配置为每个 EAR 使用单个类加载器并首先从应用程序加载类，最后从服务器加载类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:16:38.503

不确定我是否能很好地回答您的问题，因为如果您有一个类加载器，则不需要第一个/最后一个概念

顺便说一句，目前 TomEE 仅支持 lib 部分的类加载器，然后 webapp 的一个 tomcat webappclassloader 作为 lib 的子级。

# maven - 如何向开发人员发送有关构建状态的邮件

> ID：13024710
> 
> 赞同：1
> 
> 时间：2012-10-23T06:32:29.913
> 
> 标签：maven, jenkins, pom.xml

我想在 Maven 构建之后发送构建状态邮件。我在`pom.xml`.

```
<developers>
<developer>
<id>phani</id>
<name>phanikumar</>
<email>phanikumarraja@yahoo.com</email>
<url>http://phani.net</url>
<organization>codeauroara</organization>
<organizationurl>http:/mojocodeaurora.org</organizationurl>
<roles>
<role>Lead</role>
<role>developer</role>
</roles>
</developer>
</developers> 
```

目前，我正在使用 jenkins 进行自动构建，假设构建失败，它正在发送邮件。我想做詹金斯应该在`pom.xml`文件中读取那些在开发人员`pom.xml`文件列表中的人。对于那些成员仅通过 jenkins 发送有关构建状态的邮件。

请告诉我是否需要任何插件，或者我是否需要在`pom.xml`文件中配置任何邮件列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:09:45.093

也许您可以先查看 Jenkins 的[邮件服务器配置](http://my.safaribooksonline.com/book/software-engineering-and-development/ide/9781449311155/configuring-your-jenkins-server/sect-configuration-email)和作业配置中的[电子邮件通知](http://my.safaribooksonline.com/book/software-engineering-and-development/ide/9781449311155/notification/sect-notification-email)。

您还可以使用 Jenkins 插件：*[email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)*来执行更高级的任务。

另请参阅此 SO 答案：*[如何在 pom.xml 文件中添加开发人员列表。每当构建失败时，它都会发送通知](https://stackoverflow.com/a/13031975/1677594)*

# c++ - boost::asio 的扩展被中断后挂起

> ID：13024711
> 
> 赞同：9
> 
> 时间：2012-10-23T06:32:32.290
> 
> 标签：c++, boost, boost-asio

Boris 的[文章](http://en.highscore.de/cpp/boost/asio.html#asio_extensions)向我们展示了如何创建 boost::asio 的扩展。我尝试在注册信号上添加 signal_set 和 async_wait。然后程序挂起，直到触发第二个 SIGINT。不过，我只想在一个信号内正确完成它。

这是我的代码。我在 Ubuntu 上使用 gcc-4.6.3 和 boost-1.52.0 对其进行了测试。

编译 -

`gcc -I/boost_inc -L/boot_lib main.cpp -lpthread -lboost_system -lboost_thread`

```
#include <boost/asio.hpp> 
#include <iostream> 
#include <boost/thread.hpp> 
#include <boost/bind.hpp> 
#include <boost/scoped_ptr.hpp> 
#include <boost/shared_ptr.hpp> 
#include <boost/weak_ptr.hpp> 
#include <cstddef> 

template <typename Service> 
class basic_timer 
  : public boost::asio::basic_io_object<Service> 
{ 
  public: 
    explicit basic_timer(boost::asio::io_service &io_service) 
      : boost::asio::basic_io_object<Service>(io_service) 
    {} 

    void wait(std::size_t seconds) 
    { return this->service.wait(this->implementation, seconds); } 

    template <typename Handler> 
    void async_wait(std::size_t seconds, Handler handler) 
    { this->service.async_wait(this->implementation, seconds, handler); } 
}; 

class timer_impl;

template <typename TimerImplementation = timer_impl> 
class basic_timer_service 
  : public boost::asio::io_service::service 
{ 
  public: 
    static boost::asio::io_service::id id; 

    explicit basic_timer_service(boost::asio::io_service &io_service) 
      : boost::asio::io_service::service(io_service), 
      async_work_(new boost::asio::io_service::work(async_io_service_)), 
      async_thread_(
        boost::bind(&boost::asio::io_service::run, &async_io_service_)) 
    {} 

    ~basic_timer_service() 
    { 
      async_work_.reset(); 
      async_io_service_.stop(); 
      async_thread_.join();  // program is blocked here until the second 
                             // signal is triggerd
      async_io_service_.reset();
    } 

    typedef boost::shared_ptr<TimerImplementation> implementation_type; 

    void construct(implementation_type &impl) 
    { 
      impl.reset(new TimerImplementation()); 
    } 

    void destroy(implementation_type &impl) 
    { 
      impl->destroy(); 
      impl.reset(); 
    } 

    void wait(implementation_type &impl, std::size_t seconds) 
    { 
      boost::system::error_code ec; 
      impl->wait(seconds, ec); 
      boost::asio::detail::throw_error(ec); 
    } 

    template <typename Handler> 
    class wait_operation 
    { 
      public: 
        wait_operation(
          implementation_type &impl,
          boost::asio::io_service &io_service, 
          std::size_t seconds, Handler handler) 
          : impl_(impl), 
          io_service_(io_service), 
          work_(io_service), 
          seconds_(seconds), 
          handler_(handler) 
        {} 

        void operator()() const 
        { 
          implementation_type impl = impl_.lock(); 
          if (!io_service_.stopped() && impl) 
          { 
              boost::system::error_code ec; 
              impl->wait(seconds_, ec); 
              this->io_service_.post(
                boost::asio::detail::bind_handler(handler_, ec)); 
          } 
          else 
          { 
              this->io_service_.post(
                boost::asio::detail::bind_handler(
                  handler_, boost::asio::error::operation_aborted)); 
          } 
      } 

      private: 
        boost::weak_ptr<TimerImplementation> impl_; 
        boost::asio::io_service &io_service_; 
        boost::asio::io_service::work work_; 
        std::size_t seconds_; 
        Handler handler_; 
    }; 

    template <typename Handler> 
    void async_wait(
      implementation_type &impl, 
      std::size_t seconds, Handler handler) 
    { 
      this->async_io_service_.post(
        wait_operation<Handler>(
          impl, this->get_io_service(), seconds, handler)); 
    } 

  private: 
    void shutdown_service() 
    {} 

    boost::asio::io_service async_io_service_; 
    boost::scoped_ptr<boost::asio::io_service::work> async_work_; 
    boost::thread async_thread_; 
}; 

class timer_impl 
{ 
  public: 
    timer_impl() 
    {} 

    ~timer_impl() 
    {} 

    void destroy() 
    {} 

    void wait(std::size_t seconds, boost::system::error_code &ec) 
    { 
      sleep(seconds);
      ec = boost::system::error_code(); 
    } 
};

typedef basic_timer<basic_timer_service<> > timer; 

template <typename TimerImplementation> 
boost::asio::io_service::id basic_timer_service<TimerImplementation>::id; 
void wait_handler(const boost::system::error_code &ec) 
{ 
  std::cout << "5 s." << std::endl; 
} 

int main() 
{ 
  {
    boost::asio::io_service io_service; 
    boost::asio::signal_set signals(io_service);
    timer t(io_service);

    signals.add(SIGINT);
    signals.async_wait(
      boost::bind(&boost::asio::io_service::stop, &io_service));

    t.async_wait(2, wait_handler); 

    std:: cout << "async called\n" ;
    io_service.run(); 
  } 

  { // this block will not be executed
    boost::asio::io_service io_service; 
    timer t(io_service); 

    t.async_wait(2, wait_handler); 
    std:: cout << "async called\n" ;
    io_service.run(); 
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:51:53.363

在尝试了asio 作者提供的[示例](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/services/logger_service.hpp)后，我遇到了同样的行为。因此，我深入研究了库源代码，发现源代码使用**io_service_impl**的接口而不是 io_service 的接口。此外，发布到 io_service_impl 的**操作函子**与 io_service 调用的操作函子不同。总而言之，我决定根据asio的内部接口重写定时器的例子。

我在此介绍重写的计时器示例。

```
#include <boost/asio.hpp> 
#include <iostream> 
#include <boost/thread.hpp> 
#include <boost/bind.hpp> 
#include <boost/scoped_ptr.hpp> 
#include <boost/shared_ptr.hpp> 
#include <boost/weak_ptr.hpp> 
#include <cstddef> 

#define get_service_impl(X) \
  ba::use_service<bad::io_service_impl>(X)

namespace ba = boost::asio;
namespace bad = boost::asio::detail;

// Nothing changed
template <typename Service> 
class basic_timer 
  : public boost::asio::basic_io_object<Service> 
{ 
public: 
  explicit basic_timer(boost::asio::io_service &io_service) 
    : boost::asio::basic_io_object<Service>(io_service) 
  {} 

  void wait(std::size_t seconds) 
  { return this->service.wait(this->implementation, seconds); } 

  template <typename Handler> 
  void async_wait(std::size_t seconds, Handler handler) 
  { this->service.async_wait(this->implementation, seconds, handler); } 
}; 

// Nothing changed
class timer_impl 
{ 
public: 
  void wait(std::size_t seconds, boost::system::error_code &ec) 
  { 
    sleep(seconds);
    ec = boost::system::error_code(); 
  } 
};

// ----- Change a lot! --------
class basic_timer_service 
: public boost::asio::io_service::service 
{ 
public:
  typedef boost::asio::detail::socket_ops::shared_cancel_token_type 
    implementation_type;

  static boost::asio::io_service::id id; 

  explicit basic_timer_service(boost::asio::io_service &io_service) 
    : boost::asio::io_service::service(io_service), 
      io_service_impl_(get_service_impl(io_service)),
      work_io_service_( new boost::asio::io_service ),
      work_io_service_impl_(get_service_impl(*work_io_service_)),
      work_(new ba::io_service::work(*work_io_service_)),
      work_thread_() // do not create thread here
  {} 

  ~basic_timer_service() 
  {  shutdown_service(); } 

  void construct(implementation_type &impl) 
  { impl.reset(new timer_impl()); } 

  void cancel(implementation_type &impl)
  {
        impl.reset((void*)0, boost::asio::detail::socket_ops::noop_deleter());
  }

  void destroy(implementation_type &impl) 
  { impl.reset(); } 

  void shutdown_service() 
  {
    work_.reset();
    if(work_io_service_.get()){
      work_io_service_->stop();
      if (work_thread_.get()){
        work_thread_->join();
        work_thread_.reset();
      }
    }
    work_io_service_.reset();
  } 

  void wait(implementation_type &impl, std::size_t seconds) 
  { 
    boost::system::error_code ec; 
    // XXX I not sure this is safe
    timer_impl *impl_ptr = static_cast<timer_impl*>(impl.get());
    impl_ptr->wait(seconds, ec); 
    boost::asio::detail::throw_error(ec); 
  } 

  template <typename Handler> 
  class wait_operation
  : public boost::asio::detail::operation
  { 
  public: 
    BOOST_ASIO_DEFINE_HANDLER_PTR(wait_operation);

    // namespace ba = boost::asio
    // namespace bad = boost::asio::detail
    wait_operation(
      bad::socket_ops::weak_cancel_token_type cancel_token,
      std::size_t seconds, 
      bad::io_service_impl& ios,
      Handler handler) 
      : bad::operation(&wait_operation::do_complete), 
      cancel_token_(cancel_token),
      seconds_(seconds),
      io_service_impl_(ios),
      handler_(handler) 
    {} 

    static void do_complete(
      bad::io_service_impl *owner,
      bad::operation *base,
      boost::system::error_code const & /* ec */ ,
      std::size_t /* byte_transferred */ )
    { 
      wait_operation *o(static_cast<wait_operation*>(base));
      ptr p = { boost::addressof(o->handler_), o, o};

      // Distinguish between main io_service and private io_service
      if(owner && owner != &o->io_service_impl_)
      { // private io_service

        // Start blocking call
        bad::socket_ops::shared_cancel_token_type lock =
          o->cancel_token_.lock();

        if(!lock){
          o->ec_ = boost::system::error_code(
            ba::error::operation_aborted,
                            boost::system::system_category());
        }else{
          timer_impl *impl = static_cast<timer_impl*>(lock.get());
          impl->wait(o->seconds_, o->ec_);
        }
        // End of blocking call

        o->io_service_impl_.post_deferred_completion(o);
        p.v = p.p = 0;
      }else{ // main io_service
        bad::binder1<Handler, boost::system::error_code> 
          handler(o->handler_, o->ec_);
        p.h = boost::addressof(handler.handler_);
        p.reset();
        if(owner){
          bad::fenced_block b(bad::fenced_block::half);
          boost_asio_handler_invoke_helpers::invoke(
                        handler, handler.handler_);
        }
      } 
    } 

  private: 
    bad::socket_ops::weak_cancel_token_type cancel_token_; 
    std::size_t seconds_; 
    bad::io_service_impl &io_service_impl_; 
    Handler handler_; 
    boost::system::error_code ec_;
  }; 

  template <typename Handler> 
  void async_wait(
    implementation_type &impl, 
    std::size_t seconds, Handler handler) 
  { 
    typedef wait_operation<Handler> op;
    typename op::ptr p = {
      boost::addressof(handler),
      boost_asio_handler_alloc_helpers::allocate(
        sizeof(op), handler), 0};
    p.p = new (p.v) op(impl, seconds, io_service_impl_, handler);
    start_op(p.p);
    p.v = p.p = 0;
  }

protected:
  // Functor for runing background thread
  class work_io_service_runner
  {
  public:  
    work_io_service_runner(ba::io_service &io_service)
      : io_service_(io_service) {}

    void operator()(){ io_service_.run(); }
  private:
    ba::io_service &io_service_;
  };

  void start_op(bad::operation* op)
  {
    start_work_thread();
    io_service_impl_.work_started();
    work_io_service_impl_.post_immediate_completion(op);
  }

  void start_work_thread()
  {
    bad::mutex::scoped_lock lock(mutex_);
    if (!work_thread_.get())
    {
      work_thread_.reset(new bad::thread(
          work_io_service_runner(*work_io_service_)));
    }
  }

  bad::io_service_impl& io_service_impl_;

private: 
  bad::mutex mutex_;
  boost::scoped_ptr<ba::io_service> work_io_service_;
  bad::io_service_impl &work_io_service_impl_;
  boost::scoped_ptr<ba::io_service::work> work_;
  boost::scoped_ptr<bad::thread> work_thread_;
}; 

boost::asio::io_service::id basic_timer_service::id; 

typedef basic_timer<basic_timer_service> timer; 

void wait_handler(const boost::system::error_code &ec) 
{ 
  if(!ec)
    std::cout << "wait_handler is called\n" ;
  else
    std::cerr << "Error: " << ec.message() << "\n";
} 

int main() 
{ 
  {
    boost::asio::io_service io_service; 
    boost::asio::signal_set signals(io_service);
    timer t(io_service); 

    signals.add(SIGINT);
    signals.async_wait(
      boost::bind(&boost::asio::io_service::stop, &io_service));

    t.async_wait(2, wait_handler); 

    std:: cout << "async called\n" ;
    io_service.run(); 
    std:: cout << "exit loop\n";
  } 

  {
    boost::asio::io_service io_service; 
    timer t(io_service); 

    t.async_wait(2, wait_handler); 
    std:: cout << "async called\n" ;
    io_service.run(); 
  }
  return 0;
} 
```

编译

`gcc -I/boost_inc -L/boot_lib main.cpp -lpthread -lboost_system -lboost_thread`

新计时器工作正常。我仍然想知道如何编写 asio 的非侵入式扩展。

# java - 如何为 EJB 及其接口编写 Javadoc？

> ID：13024713
> 
> 赞同：2
> 
> 时间：2012-10-23T06:32:48.507
> 
> 标签：java, ejb, javadoc

考虑以下示例

```
@Remote
public interface RegistrationService {
    public String register();
    public void unregister(String id);
    public void heartbeat(String id);
}

@Stateless
@Remote(RegistrationService.class)
public class RegistrationServiceBean implements RegistrationService {
    /* ... */
} 
```

我有一个界面，可以说*RegistrationService*。有了这个，远程客户端能够将自己注册到应用程序上。通过定期调用*heartbeat()*，它表示它还活着。

**记录 EJB 及其接口的正确方法是什么？**

例如：

界面

1.  该接口的用户可以将自己注册到应用程序上。然后应用程序重新计算一些东西，以便在所有注册的客户端上平均分配。*（这将涉及其他类的知识，例如重新计算类）*
2.  接口的用户能够注册自己并在仍然连接时通知服务器。实现使用此信息根据注册客户端的数量向底层系统发出任务*（这不涉及有关其他类的知识，但是从应用程序的角度来看并不是那么精确）*

班级

1.  当客户端注册、注销或心跳过期时，RegistrationService 的此实现会在 RecalculationClass 中发出重新计算。这是必要的，因为数据必须在客户端之间均匀分布。

任何想法表示赞赏。谢谢。

斯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:34:54.967

接口 javadoc 应该没有关于实现的信息。接口是关于*什么*，而不是*如何*。

例如，实现完全忽略对接口方法的调用是有效的——即有一个空方法。

你的 javadoc 应该这样说：`Notifies that the specified application is still alive`. 实现选择*如何*处理这些信息取决于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:38:00.787

我想说这取决于哪些信息对客户很重要。如果重新计算对用户完全不可见，则可能不需要在界面中记录它。如果客户端可以通过其他方式看到重新计算的详细信息，则必须在此处指出，以便用户知道可能发生哪些交互。如果重新计算完全是内部的并且可以在没有客户注意的情况下更改，则不需要也不应该在接口描述中。

# iphone - 分析仪中的 tableview 单元格显示内存泄漏？

> ID：13024718
> 
> 赞同：2
> 
> 时间：2012-10-23T06:33:19.600
> 
> 标签：iphone, objective-c, ios, ipad

我有一个运行良好的应用程序。但我需要没有内存泄漏。所以我决定用分析器构建，然后我看到了很多小的内存管理问题。我整理了除了这个之外的几乎所有东西。这里我的单元格对象是显示为泄漏的对象，但实际上我不知道我在哪里走错了。这是我的`cellforRowatIndexpath`方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:EventCellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:EventCellIdentifier];

        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"cell_with_arrow.png"]];
        [cell setBackgroundView:img];
        [img release];    

        cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:13.0];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap; // Pre-iOS6 use UILineBreakModeWordWrap
        cell.textLabel.numberOfLines =0; 
        [cell.textLabel sizeToFit];

    }

     [[cell viewWithTag:12] removeFromSuperview];
    [[cell viewWithTag:13] removeFromSuperview];

    PTPusherEvent *event = [eventsReceived objectAtIndex:indexPath.row];

    //cell.textLabel.text = event.name;
    // cell.detailTextLabel.text = [event.data description];

    NSDictionary *payload =event.data;
    NSLog(@"%@",payload);
    NSString *tes=[payload objectForKey:@"from"];
    NSString *subtitle = [NSString stringWithString: @"From "];
    subtitle = [subtitle stringByAppendingFormat:@"%@",tes];

    cell.detailTextLabel.text = subtitle;
    cell.textLabel.text = [payload objectForKey:@"message"];

    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor]; 

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    // [dateFormat setDateFormat:@"dd-MMM-YYYY HH:mm:ss"];
    [dateFormat setDateFormat:@"dd-MMM-YYYY hh:mm a"];
    [dateFormat setTimeZone:[NSTimeZone defaultTimeZone]]; 
    NSDate *todaysdate=[NSDate date];
    NSString *todaysdateString = [dateFormat stringFromDate:todaysdate];
    [dateFormat release];

    CGSize boundingSize = CGSizeMake(320, CGFLOAT_MAX);
    CGSize requiredSize = [cell.textLabel.text sizeWithFont:cell.textLabel.font
                                          constrainedToSize:boundingSize
                                              lineBreakMode:UILineBreakModeWordWrap];
    CGFloat requiredHeight = requiredSize.height;  

    MarqueeLabel *rateLabelOne =  [[MarqueeLabel alloc] initWithFrame:CGRectMake(115, requiredHeight+15,155, 20) rate:50.0f andFadeLength:10.0f];    
    rateLabelOne.numberOfLines = 1;
    rateLabelOne.marqueeType = MLContinuous;
    rateLabelOne.opaque = NO;
    rateLabelOne.enabled = YES;
    rateLabelOne.shadowOffset = CGSizeMake(0.0, -1.0);
    rateLabelOne.textAlignment = UITextAlignmentRight;
    rateLabelOne.textColor = [UIColor redColor];
    rateLabelOne.backgroundColor = [UIColor clearColor];
    rateLabelOne.font = [UIFont fontWithName:@"Helvetica-Bold" size:12.000];
    rateLabelOne.text = @"OFFline!cannot communicate now.....";

    MarqueeLabel *rateLabelTwo = [[MarqueeLabel alloc] initWithFrame:CGRectMake(215, requiredHeight+15,100, 20) rate:50.0f andFadeLength:10.0f];
    rateLabelTwo.marqueeType = MLContinuous;
    rateLabelTwo.numberOfLines = 1;
    rateLabelTwo.opaque = NO;
    rateLabelTwo.enabled = YES;
    rateLabelTwo.shadowOffset = CGSizeMake(0.0, -1.0);
    rateLabelTwo.textAlignment = UITextAlignmentRight;
    rateLabelTwo.textColor = [UIColor blueColor];
    rateLabelTwo.backgroundColor = [UIColor clearColor];
    rateLabelTwo.font = [UIFont fontWithName:@"Helvetica" size:12.000];
    rateLabelTwo.text = todaysdateString;

    if([chatstatus isEqualToString:@"online"])
    {

        rateLabelTwo.tag=12;

        [cell addSubview:rateLabelTwo];
        [rateLabelTwo release];

    }
    else
    {
        rateLabelOne.tag=13;

        [cell addSubview:rateLabelOne];
        [rateLabelOne release];

    }

return cell;
} 
```

谁能帮我找出那个怪物在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:37:39.973

你需要把一个`autorelease`作为，

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:EventCellIdentifier] autorelease]; 
```

否则会被泄露。

**更新：**

正如 AppleDelegate 所说，

`[rateLabelTwo release];`并且`[rateLabelOne release];`还需要移出 if 条件，以便在两种情况下都会释放`if`它`else`。分析仪也会将此检测为泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:54:50.360

好的，这就是问题所在..

```
 if([chatstatus isEqualToString:@"online"])
    {

        rateLabelTwo.tag=12;

        [cell addSubview:rateLabelTwo];
        [rateLabelTwo release];

    }
    else
    {
        rateLabelOne.tag=13;

        [cell addSubview:rateLabelOne];
        [rateLabelOne release];

    } 
```

在您的代码中，`rateLabelOne`and`rateLabelTow`在循环中被释放。`if`静态分析器将其分析为泄漏，因为它假设可能存在代码不在循环内运行的情况`if`。实际上它不是泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:38:00.500

使用这一行：

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:EventCellIdentifier]autorelease]; 
```

这将消除您的内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:56:34.843

```
 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:EventCellIdentifier]autoRelease]; 
```

# c# - 获取用户所属的所有父 AD 组

> ID：13024721
> 
> 赞同：2
> 
> 时间：2012-10-23T06:33:24.463
> 
> 标签：c#, .net, active-directory, ldap, directoryservices

我想获取特定用户所属的所有 Active Directory 组。

我确实有脚本来获取用户的所有直接 AD 组（请参见下面的代码）。

但是，如何获取用户所属的每个直接 AD 组的所有父组？

例如，我直接属于名为`IT Team Managers`. 该组是名为`IT Team National`etc 的父组的成员。如何从我的代码中获取该父组？

提前非常感谢！

```
DirectorySearcher ouSearch = new DirectorySearcher(entry);
ouSearch.Filter = "(&(objectClass=User)(sAMAccountName=" + username + "))";

//ouSearch.PropertiesToLoad.Add("samAccountName");
ouSearch.PropertiesToLoad.Add("memberOf");
ouSearch.SearchScope = SearchScope.Subtree;

SearchResult allOUS = ouSearch.FindOne();

//foreach (string g in allOUS.Properties["memberOf"])
{
    equalsIndex = g.IndexOf("=", 1);
    commaIndex = g.IndexOf(",", 1);

    if (equalsIndex == -1)
    {
       return null;
    }

    groupNames.Append(g.Substring((equalsIndex + 1), (commaIndex - equalsIndex) - 1));
    groupNames.Append(",");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:57:35.947

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // get the "authorization groups" the user is a member of - recursively
   var authGroups = user.GetAuthorizationGroups();

   // iterate over groups
   foreach(Principal p in authGroups)
   {
      // do something with groups ....       
   }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# php - error_log('做代码');

> ID：13024725
> 
> 赞同：0
> 
> 时间：2012-10-23T06:33:38.023
> 
> 标签：php

php中错误日志的目的是什么？我正在运行 dredit 示例 php，并且“执行代码”继续显示。

这是代码：

```
 if (isset($_GET['code'])) {
    error_log('doing code');
    /**
     * Redeemed authorization codes are stored in the session to prevent
     * accidental multiple redemption of the same code causing an exception.
     * ie, if a user refreshes their browser when a code is in the URL.
     * We need to initialize the array of redeemed authorization codes.
     */
    if (!isset($_SESSION['redeemed_codes'])) {
      $_SESSION['redeemed_codes'] = array();
    } 
```

谁可以帮我这个事？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:42:06.650

根据[文档](http://php.net/manual/en/function.error-log.php)，error_log 是“在某处发送错误消息”。

```
bool error_log(string $message [, int $message_type = 0 [, string $destination [, string $extra_headers ]]]) 
```

如果`$destination`设置为 no，它只会记录到标准的 error.log，例如`/var/log/apache2/error.log`.

您的代码只是记录到`error_log`它`'doing code'`只是一个字符串的标准。它什么都不做，所以我假设你应该在 de if 块中编写自己的代码。

一般来说`error_log`，这是记录错误消息的好方法，但您也可以记录到自己的日志文件以进行调试。

# objective-c - UIScrollView 不会调整高度以适应子视图

> ID：13024728
> 
> 赞同：1
> 
> 时间：2012-10-23T06:33:43.177
> 
> 标签：objective-c, ios, uiscrollview, uilabel

我有一个`UITextView`，它从 RSS 提要动态设置其文本。textview 是 a 的子视图`UIScrollview`。最终，我正在创建一个移动报纸应用程序，因此用户应该能够滚动浏览文本（和其他子视图）。

在 IB 中创建视图后，我添加了

```
NSString *sourceCode = [NSString stringWithContentsOfURL:[NSURL URLWithString:self.URL] encoding:NSUTF8StringEncoding error:&error];
sourceCode = [self parseHTMLText:sourceCode];
CGSize maximumLabelSize = CGSizeMake(320,9999);
CGSize txtStringSize = [sourceCode sizeWithFont:self.body.font
                              constrainedToSize:maximumLabelSize];
CGRect newlblFrame = CGRectMake(0, 0, 320, txtStringSize.height);
self.body.frame = newlblFrame; //body is the textview
self.body.text = sourceCode;
self.scroll.contentSize=CGSizeMake(320, self.body.frame.size.height+300); //scroll is scrollview 
```

一个典型的`NSLog`将显示`body frame = {{0, 0}, {320, 2088}} scrollview frame = {{0, 0}, {320, 417}} scrollview content size = {320, 2388}`

但是，当我运行应用程序时，body 将其界面构建器高度保持在 196 左右，并且滚动视图不会滚动（当我移动它时，它只是弹回原来的位置）

附带说明一下，当我尝试使用 CGRectMake 手动更改 textview 的框架时，NSLog 显示正确的高度，但视图看起来并没有什么不同。我确保它在 IB 中正确连接，因为我可以调整其他属性，例如背景颜色。

**编辑：**

在我将 textview 的 cliptoBounds 属性设置为 NO 后，textview 现在会调整其高度并尝试显示整个文本。但是，它在屏幕末尾切断，我仍然无法滚动。

这是我目前看到的。为了方便起见，我将滚动视图的背景颜色设为灰色。我不确定为什么部分滚动视图部分为白色，部分为灰色。（标题）是一个单独的标签btw）

![在此处输入图像描述](../Images/4c02cd199dea8eef689dc7485b50f52d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:52:47.493

我通过将代码从移动`viewDidLoad`到`viewDidAppear`. 显然，这是一个 Xcode 4.5 特定问题，由 AutoLayout 功能覆盖`viewDidLoad`方法中的逻辑引起。可以在[这里](https://stackoverflow.com/questions/12747710/scrollview-xcode4-5-autolayout)找到更好的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:37:56.887

我希望这能帮到您

self.scrollview.contentSize=CGSizeMake(320, label.frame.size.height+30);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:39:21.113

尝试添加这个：

```
[_scrollView setClipsToBounds:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T07:17:09.123

试试这个：

```
CGSize maximumSize = CGSizeMake(200.0, 30.0); // Specify your size. It was for my screen. 
            UIFont *txtFont = <Ur Font size & Var>;
            //new
            //fontValue = txtFont;
            //new

            lblValue.font = txtFont; 
            lblValue.lineBreakMode = UILineBreakModeWordWrap;

            CGSize txtStringSize = [commentTxt sizeWithFont:txtFont 
                                          constrainedToSize:maximumSize 
                                              lineBreakMode:lblValue.lineBreakMode];

            CGRect newlblFrame = CGRectMake(105.0, y, 200.0, txtStringSize.height);

            lblValue.frame = newlblFrame;          
            lblValue.text = @"Your String"; 
```

在此设置滚动内容大小之后。希望它对你有用。它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T10:12:23.447

尝试通过以下方式解决。

```
// adjust the height of UITextView with content height
CGRect frame = self.body.frame;
frame.size.height = self.body.contentSize.height;
self.body.frame = frame;

// adjust UIScrollView's height with the height of UITextView
self.scroll.frame = frame; 
```

# php - 分页“之前”和“完成”选项无法正常工作

> ID：13024733
> 
> 赞同：2
> 
> 时间：2012-10-23T06:34:02.880
> 
> 标签：php, cakephp

当我单击列表记录的排序链接时，我想显示加载图像。之前，我使用`complete`了`Paginator`. 如果表有多个记录，这很有效。

我的代码如下：

```
<?php
$this->Paginator->options(array(
    'update' => '#ourCompany-part',
    'evalScripts' => true,
    'before' => $this->Js->get('#loading')->
                           effect('fadeIn', array('buffer' => false)),
    'complete' => $this->Js->get('#loading')->
                           effect('fadeOut', array('buffer' => false)),
    ));
?> 
```

当表格有一条记录时，我们点击分页器的排序链接，它不会显示加载图像。如果表没有记录，则不加载索引页。我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T14:28:05.903

就我个人而言，我不喜欢 JsHelper，我认为我编写了 jquery pugins 或小函数。因此，请检查 javascript 是否像您看到 1 条记录或没有记录的位置，似乎帮助程序没有呈现 javascitpt。

# c# - 在 C# 中使用隐藏窗口打开进程

> ID：13024734
> 
> 赞同：3
> 
> 时间：2012-10-23T06:34:12.067
> 
> 标签：c#

我有一个在本地机器上启动进程的功能：

```
public int StartProcess(string processName, string commandLineArgs = null)
{
    Process process = new Process();
    process.StartInfo.FileName = processName;
    process.StartInfo.Arguments = commandLineArgs;
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.CreateNoWindow = true;
    process.StartInfo.ErrorDialog = false;
    process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    process.Start();
    return process.Id;
} 
```

它应该在不打开新窗口的情况下启动该过程。事实上，当我用 timeout.exe 测试它时，没有打开控制台窗口。但是当我用 notepad.exe 或 calc.exe 测试它时，它们的窗口仍然打开。

我在网上看到这种方法适用于其他人。我在 Windows 7 x64 上使用 .NET 4.0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:49:10.893

CreateNoWindow 标志仅适用于控制台进程。

有关详细信息，请参见此处：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx)

其次，应用程序可以忽略 WindowStyle 参数 - 它在新应用程序第一次调用 ShowWindow 时生效，但后续调用在应用程序的控制之下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:38:54.917

以下程序将显示/隐藏窗口：

```
using System.Runtime.InteropServices;
class Program
{
    [DllImport("user32.dll")]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    [DllImport("user32.dll")]
    static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

    const int SW_HIDE = 0;
    const int SW_SHOW = 5;

    static void Main()
    {
        // The 2nd argument should be the title of window you want to hide.
        IntPtr hWnd = FindWindow(null, "Untitled - Notepad");
        if (hWnd != IntPtr.Zero)
        {
            //ShowWindow(hWnd, SW_SHOW);
            ShowWindow(hWnd, SW_HIDE); // Hide the window
        }
    }
} 
```

资料来源：[http ://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/1bc7dee4-bf1a-4c41-802e-b25941e50fd9](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/1bc7dee4-bf1a-4c41-802e-b25941e50fd9)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:54:23.773

您需要删除`process.StartInfo.UseShellExecute = false`

```
 public int StartProcess(string processName, string commandLineArgs = null)
    {
        Process process = new Process();
        process.StartInfo.FileName = processName;
        process.StartInfo.Arguments = commandLineArgs;
        process.StartInfo.CreateNoWindow = true;
        process.StartInfo.ErrorDialog = false;
        process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        process.Start();
        return process.Id;
    } 
```

# ios6 - 为什么 MPMoviePlayerController 在进入全屏模式时会调用 MPMoviePlayerPlaybackDidFinishNotification

> ID：13024741
> 
> 赞同：1
> 
> 时间：2012-10-23T06:34:32.327
> 
> 标签：ios6, mpmovieplayercontroller, xcode4.5

我想在全屏模式下显示**MPMoviePlayerViewController ，但是当按下movieplayercontroller 视图的全屏按钮时，首先调用****MPMoviePlayerWillEnterFullscreenNotification**，正如预期的那样，但**MPMoviePlayerPlaybackDidFinishNotification**也正在发送。作为它说**MPMovieFinishReasonPlaybackEnded**的原因，我不知道，我做错了什么。（此外，我使用*iOS 6.0*和*XCode 4.5.1*）

我的解释是，只有**MPMoviePlayerWillEnterFullscreenNotification**被调用。

下面代码的简短说明： MovieplayerViewController 的视图显示在我的内容视图的一个小子视图中。当点击全屏按钮时，它首先显示为全屏，然后调用退出按钮并停止播放（没有崩溃，没有别的）。

```
MPMoviePlayerViewController *playerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];

   [playerViewController.moviePlayer setControlStyle:MPMovieControlStyleEmbedded];

   [playerViewController.moviePlayer setScalingMode:MPMovieScalingModeFill];

   CGRect rect = videoView.frame;

   rect.origin = CGPointZero;

   [playerViewController.view setFrame:rect];

   [playerViewController.moviePlayer prepareToPlay];

        //movie this is my contents subview, where i add the viewcontroller's view as a subbview
    [self.videoView addSubview:playerViewController.view];

    [self.videoView setHidden:NO];

    playerViewController.moviePlayer.useApplicationAudioSession = NO;

    [playerViewController.moviePlayer play];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayerDidFinishNotification:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:playerViewController.moviePlayer];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayerWillEnterFullscreenNotification:)
                                                 name:MPMoviePlayerWillEnterFullscreenNotification
                                               object:playerViewController.moviePlayer];    
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayerWillExitFullscreenNotification:)
                                                 name:MPMoviePlayerWillExitFullscreenNotification
                                               object:playerViewController.moviePlayer];

        //i store the movieplayer in a property, so i can use it for further operations
    self.myPlayer = playerViewController;

    [playerViewController release]; 
```

就是这样！

当按下调整大小（或全屏）按钮时，也会调用 moviePlayerDidFinishNotification: 方法

```
- (void)moviePlayerDidFinishNotification:(NSNotification*) aNotification {

    int reason = [[[aNotification userInfo] valueForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] intValue];

    if (reason == MPMovieFinishReasonPlaybackEnded) {

        //movie finished playin

//in debug mode, it stops right at the NSLog

        NSLog(@"");
    }

    else if (reason == MPMovieFinishReasonUserExited) {

        //user hit the done button

    }

    else if (reason == MPMovieFinishReasonPlaybackError) {

        //error

    }

.. } 
```

是我做错了什么还是自 iOS 6.0 以来可能有变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:30:39.553

好的，似乎是 MPMoviePlayerViewController 中存在一些问题。有帮助的是我们只使用 MPMoviePlayerController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:32:15.940

为了将来参考，您的播放器显示在一个小窗口中的原因是因为您正在设置：

```
 [playerViewController.moviePlayer setControlStyle:MPMovieControlStyleEmbedded];

   [playerViewController.moviePlayer setScalingMode:MPMovieScalingModeFill];

   CGRect rect = videoView.frame;

   rect.origin = CGPointZero;

   [playerViewController.view setFrame:rect];

   [playerViewController.moviePlayer prepareToPlay];

        //movie this is my contents subview, where i add the viewcontroller's view as a subbview
    [self.videoView addSubview:playerViewController.view];

    [self.videoView setHidden:NO]; 
```

When you use an MPMoviePlayerViewController it creates it's own view controller. These calls are not necessary and will only create bizarre behavior. That's why the MPMoviePlayerController worked properly because it's designed to work inside another view controller.

# javascript - 输入值因闪光事件而改变

> ID：13024744
> 
> 赞同：0
> 
> 时间：2012-10-23T06:34:50.080
> 
> 标签：javascript, jquery, flash

我正在使用一个为 textarea 元素赋值的 flash 对象。如果文本区域的值被 Flash 对象更改，我需要知道将触发的 jquery 事件。

我需要做的是，如果 textarea 的值被改变（通过 flash 对象，没有按键或失去焦点），某个复选框将变为“已检查”状态。

我已经尝试过`.bind( 'input' )`，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:51:06.290

使用 jquery**`change`**事件

```
$('.txtarea').change(function() {

//call your handler   

}); 
```

您应该使用 jquery ON 方法将事件绑定到元素

```
$(".txtarea").on("change", function(event){
    //alert($(this).text());
}); 
```

# java - Gson 在序列化期间添加字段

> ID：13024749
> 
> 赞同：31
> 
> 时间：2012-10-23T06:35:12.543
> 
> 标签：java, serialization, gson

我找不到在 Gson 序列化期间添加自定义字段的简单方法，我希望其他人可以提供帮助。

这是一个示例类来显示我的问题：

```
public class A {
  String id;
  String name;
  ...
} 
```

当我序列化类时，AI 想返回如下内容：

```
{ "id":"123", "name":"John Doe", "url_to_user":"http://www.example.com/123" } 
```

其中 url_to_user 未存储在我的 A 类实例中，但可以使用 A 类实例中的数据生成。

有没有一种简单的方法可以做到这一点？我宁愿避免仅仅为了添加一个字段而编写整个序列化程序。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-23T07:11:02.920

用于`Gson.toJsonTree`获取`JsonElement`，您可以与之动态交互。

```
A a = getYourAInstanceHere();
Gson gson = new Gson();
JsonElement jsonElement = gson.toJsonTree(a);
jsonElement.getAsJsonObject().addProperty("url_to_user", url);
return gson.toJson(jsonElement); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T16:13:51.003

好吧，当你没有太多时间的时候，评价最高的答案是一个相当快的答案，而且基本上还*不错*，但问题是：没有适当[的关注点分离](https://en.wikipedia.org/wiki/Separation_of_concerns)

您正在编写业务逻辑的同一位置修改序列化 JSON。您应该在 a`TypeAdapter`或 a中进行所有序列化`JsonSerializer`。

**我们如何保持适当的关注点分离？**

答案包含一些额外的复杂性，但架构需要它。我们开始吧（取自我的[另一个答案](https://stackoverflow.com/questions/5800433/polymorphism-with-gson/)）：

首先，我们将为该类型使用自定义序列化程序。其次，我们必须在基类和包装子类中创建一个*复制构造函数*，如下所示：

*注意：自定义序列化器可能看起来有点矫枉过正，但相信我，从长远来看，它会为可维护性带来回报。* .

```
// Lets say the base class is named Cat
public class Cat {

    public String name;

    public Cat(String name) {
        super();
        this.name = name;
    }
    // COPY CONSTRUCTOR
    public Cat(Cat cat) {
        this.name = cat.name;
    }

    @Override
    public String sound() {
        return name + " : \"meaow\"";
    };
}

    // The wrapper subclass for serialization
public class CatWrapper extends Cat{

    public CatWrapper(String name) {
        super(name);
    }

    public CatWrapper(Cat cat) {
        super(cat);
    }
} 
```

以及类型的序列化程序`Cat`：

```
public class CatSerializer implements JsonSerializer<Cat> {

    @Override
    public JsonElement serialize(Cat src, Type typeOfSrc, JsonSerializationContext context) {

        // Essentially the same as the type Cat
        JsonElement catWrapped = context.serialize(new CatWrapper(src));

        // Here, we can customize the generated JSON from the wrapper as we want.
        // We can add a field, remove a field, etc.

        // The main logic from the top rated answer now here instead of *spilling* around(Kindly ignore the cat having a url for the sake of example)
        return catWrapped.getAsJsonObject().addProperty("url_to_user", url);
    }
} 
```

那么，为什么要使用复制构造函数？

好吧，一旦定义了复制构造函数，无论基类发生多少变化，您的包装器都将继续扮演相同的角色。其次，如果我们不定义复制构造函数而只是将基类子类化，那么我们将不得不根据扩展类来“讨论”，即`CatWrapper`. 您的组件很有可能是根据基类而不是包装器类型来讨论的。

# android - 如何在不显示 android 中的 Action chosser 的情况下附加带有短信的图像？

> ID：13024750
> 
> 赞同：0
> 
> 时间：2012-10-23T06:35:18.257
> 
> 标签：android, action, send

我必须在按钮上附加一个带有短信的图像文件单击我使用此代码

```
final Intent smsIntent = new Intent(android.content.Intent.ACTION_SEND);
smsIntent.putExtra("sms_body", "Hello World!"); 
smsIntent.putExtra("address", "0123456789");
smsIntent.putExtra(Intent.ACTION_ATTACH_DATA,screenshotUri);
smsIntent.setType("image/png");
startActivity(smsIntent); 
```

但这显示了一个选择器来选择 Facebook、电子邮件、消息等操作。但我不希望任何选择器视图它将直接显示带有附件的消息意图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:07:44.760

您正在寻找的内容无法使用`implicit`Intents 完成。因为这就是 Android 系统被设计用来处理隐式意图的方式。如果您希望您的意图由特定应用程序处理，那么您必须制作它们`explicit`，即指定一个必须处理该意图的组件。但是，当您使用`explicit`意图来处理任何情况时，当目标设备中不存在特定组件（即应用程序）时，您的应用程序很有可能会中断。Android 正被多家 OEM 采用，因此他们每个人都倾向于用自己的消息应用程序替换库存的消息应用程序。因此，似乎在一台设备上有效的东西可能在另一台设备上无效。

如果您想实现您想要的，那么您可能需要获取各种设备上的消息应用程序列表（您可以从模拟器本身找到库存的 Android 应用程序的组件名称）。并使用`PackageManager`来查找组件是否存在。如果是这样，`explicit`您将不会收到`IntentChooser`. 如果组件不存在，则发送`implicit`意图。

[您可以从此处](http://developer.android.com/reference/android/content/Intent.html)了解有关意图的更多信息。

[确定当前设备上是否存在 Activity？](https://stackoverflow.com/questions/2878694/determining-if-an-activity-exists-on-the-current-device/2879403#2879403)- 这篇文章将帮助您查找目标组件是否存在。

# c# - 加载没有注册表的 IFilter

> ID：13024751
> 
> 赞同：2
> 
> 时间：2012-10-23T06:35:20.083
> 
> 标签：c#, com, ifilter

所以我被告知我可能无法访问通常将其 IFilter 加载到系统上的注册表或程序，因此我必须在应用程序中包含 IFilter dll 并直接从那里加载它们。我目前正在使用 CodeProject 的 C# IFilter 类，但是当涉及到 filterPersistClass、persistentHandlerClass 和 COM 时，它们仍然是我头疼的一些事情，因此我对如何让它工作有点迷茫。

我已经完成了所有平凡的事情，例如获取 dll，使用“扩展，DLL 路径”设置资源文件等等，但似乎无法掌握现在如何加载 IFilter DLL。也许我应该从头开始，但我想我会先寻求帮助。

**编辑（部分解决方案）**

好吧，我想出了如何在 FilterReader.cs 的 FilterReader 构造函数中使用下面的代码来加载 query.dll，尽管我现在在加载 PDFFilter.dll 文件时遇到了问题并且收到以下错误：

*在 DLL 'C:\Program Files\Adobe\Adobe PDF iFilter 9 for 64-bit platforms\bin\PDFFilter.dll' 中找不到名为“LoadIFilter”的入口点*

我认为我现在遇到的问题是 PDFFilter.dll 使用 STA 而 C# 应用程序是 MTA。

```
[DllImport("query.dll", SetLastError = true, CharSet = CharSet.Unicode)]
static extern int LoadIFilter(string pwcsPath, [MarshalAs(UnmanagedType.IUnknown)] ref object pUnkOuter, ref IFilter ppIUnk);

// --------------------------- constructor ----------------------------------

var isFilter = false;
object iUnknown = null;

LoadIFilter(fileName, ref iUnknown, ref _filter);

var persistFile = (_filter as IPersistFile);
if (persistFile != null)
{
    persistFile.Load(fileName, 0);
    IFILTER_FLAGS flags;
    IFILTER_INIT iflags =
        IFILTER_INIT.CANON_HYPHENS |
        IFILTER_INIT.CANON_PARAGRAPHS |
        IFILTER_INIT.CANON_SPACES |
        IFILTER_INIT.APPLY_INDEX_ATTRIBUTES |
        IFILTER_INIT.HARD_LINE_BREAKS |
        IFILTER_INIT.FILTER_OWNED_VALUE_OK;

    if (_filter.Init(iflags, 0, IntPtr.Zero, out flags) == IFilterReturnCode.S_OK)
        isFilter = true;
}

if (_filter != null && isFilter) return;
if (_filter != null) Marshal.ReleaseComObject(_filter); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-15T16:30:19.650

`IFilter`物体没有什么神奇之处。它们位于标准**COM** dll 中。最后，您`clsid`只需要知道如何处理`pdf`文件的类。

`LoadIFilter`in 函数`query.dll`只是一个方便的辅助函数。它所做的一切你都可以自己做。

在注册表中有一种标准方法，其中文件扩展名（例如`.pdf`）被解析为`clsid`（例如`{E8978DA6-047F-4E3D-9C78-CDBE46041603}`）

> **注意**：您也可以直接跳到最后，并且知道 Adob​​e 的 IFilter 实现的 clsid 是 {E8978DA6-047F-4E3D-9C78-CDBE46041603}。但这并不能保证，因此您需要爬取注册表。

将 an 解析为实现的对象的`.ext`算法`clsid`是`IFilter`：

```
GetIFilterClassIDForFileExtension(String extension)   
    arguments:   
        extension (String) e.g. ".pdf"   
    returns:    
        clsid (Guid) e.g. 

    //Get the Persistent Handler for this extension
    //e.g. 
    //   HKLM\Software\Classes\.pdf\PersistentHandler\(Default)
    //returns
    //   "{F6594A6D-D57F-4EFD-B2C3-DCD9779E382E}"
    persistentHandlerGuid = HKLM\Software\Classes\.pdf\PersistentHandler\(Default)

    //Get the clsid associated with this persistent handler
    //e.g. 
    //   HKLM\Software\Classes\CLSID\{F6594A6D-D57F-4EFD-B2C3-DCD9779E382E}\PersistentAddinsRegistered\{89BCB740-6119-101A-BCB7-00DD010655AF}
    //where the final guid is the interface identifier (IID) of IFilter
    clsid = HKLM\persistentHandlerGuid\PersistentAddinsRegistered\{89BCB740-6119-101A-BCB7-00DD010655AF}

    //e.g. returns "{E8978DA6-047F-4E3D-9C78-CDBE46041603}", the clsid of Adobe's PDF IFilter
    return clsid 
```

一旦你拥有了`clsid`合适的对象，你可以使用以下方法创建它：

```
Guid clsid = GetIFilterClassForFileExtension(".pdf")
IFilter filter = CreateComObject(clsid); 
```

您现在拥有`LoadIFilter`来自以下功能的全部内容`query.dll`：

```
IFilter LoadIFilter(String filename)
{
   String extension = ExtractFileExt(filename); //e.g. "foo.pdf" --> ".pdf"
   Guid clsid = GetIFilterClassForFileExtension(extension);
   return CreateComObject(clsid) as IFilter;
} 
```

现在，所有这些仍然需要注册表，因为您仍然必须能够将**扩展名**解析为**`clsid`**. 如果您已经知道 classid，则不需要注册表：

```
IFilter adobeIFilterForPdfs = CreateComObject("{E8978DA6-047F-4E3D-9C78-CDBE46041603}") 
```

你可以走了。

重要的一点是，您尝试调用的函数`LoadIFilter`不在 Adob​​e 的 dll 中（或任何其他公司提供的任何其他 IFilter dll，以抓取任何其他文件类型）。该`LoadIFilter`函数由 导出`query.dll`，并且只是我描述的上述步骤的辅助函数。

所有`IFilter`dll 都是 COM dll。加载 COM dll 的记录方法是通过以下`CoCreateInstance`函数：

```
IUnknown CreateComObject(Guid ClassID)
{
   IUnknown unk;

   HRESULT hr = CoCreateInstance(ClassID, null, CLSCTX_INPROC_SERVER | CLSCTX_LOCAL_SERVER, IUnknown, ref unk);
   if (Failed(hr))
      throw new Exception("Could not create instance: "+hr);
   return unk;
} 
```

我将留给您找到从 C# 托管代码创建 COM 对象的正确方法。我忘了。

> **注意**：任何发布到公共领域的代码。无需归属。

# javascript - .Net1.1 中的页面方法

> ID：13024755
> 
> 赞同：1
> 
> 时间：2012-10-23T06:35:50.770
> 
> 标签：javascript, asp.net, ajax, jquery

我可以在 .net1.1 中使用 PageMethods 吗？我必须从客户端调用服务器端方法调用吗？

如何使用

PageMethods.MyMethod();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:43:52.033

.NET 1.1 中没有这样的构造。您可以尝试使用 XML Web 服务或使用您自己的 HTTP 处理程序为调用提供服务，但它不会像 2.0 中的 ASP.NET AJAX 那样工作（除非您努力重新创建它）。

有一个名为[AJAX Pro](http://ajaxpro.codeplex.com/)的工具会产生类似于页面方法的东西，但是，我怀疑它是否已经被维护了。

# javascript - 如何使用 JavaScript 从 URI 中读取值？

> ID：13024756
> 
> 赞同：1
> 
> 时间：2012-10-23T06:35:52.543
> 
> 标签：javascript

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)
> [使用 javascript 获取查询字符串](https://stackoverflow.com/questions/5349058/grab-query-string-using-javascript)

我有一个表单 URI，我需要读取一个特定的属性值。并将该值设置为相同的表单之一。

例子：-`"formFieldName=UXCopy%3Abody&FCKAssetId=Variables.ContentDetails%3Aid&fielddesc=Body&FCKName=homecopy&AssetType=UXPage&StartItem=1299862617913&FCKAssetType=UXCopy&cs_environment=addref&pagename=OpenMarket%2FXcelerate%2FActions%2FNewContentFront&embedtype=link&adidiii=ssssssss&childtypes=UXDocument%2CUXEmbed%2CUXGoogleMap%2CUXImage%2CUXSocialMediaLink%2CUXPage&IFCKEditor=true&title=New&cancelpage=OpenMarket%2FXcelerate%2FActions%2FAddRefFront&assetid=Variables.assetid"`

我想读取`adidiii`值并将此值设置为相同表单之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:44:08.660

```
var newURI = oldURI.replace(/&adidiii\=.+[&$]/, "&adidiii=" + encodeURIComponent(**WhateverThisSameFormFieldIs**) + "&") 
```

如果您只想从 uri 中获取参数，请执行以下操作：

```
function getURIParam(URI, param)
{
    var match = URI.match(new RegExp("[\?&]" + param + "=([^&]+)"));
    return match[1] ? decodeURIComponent(match[1]) : null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:20:37.077

使用以下方法处理 URL 并返回您期望的值。

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

如果要获取`adidiii`使用以下代码的值。

```
var field = getUrlVars()["adidiii"];

alert(field); 
```

希望这会帮助你。

# c++ - 在 C++ 中将文件读入二进制数组

> ID：13024758
> 
> 赞同：3
> 
> 时间：2012-10-23T06:36:06.403
> 
> 标签：c++, arrays, binary, char, unsigned

我有一个文件，其中包含多个 jpeg 的数据（以及一些垃圾），我需要从该文件中提取二进制文件，过滤掉垃圾并创建 jpeg。我知道 jpeg 的起始二进制序列。

```
char buffer[30];
ifstream fin;
fin.open ("FILENAME.raw", ios::in | ios::binary);
while (!fin.eof())
{
    fin.read(buffer,30);
    cout<<buffer[2]<<endl;
}
fin.close(); 
```

在这里，我尝试以二进制格式打印文件，但是当我运行此代码时，屏幕上会打印出外来字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:58:41.850

我认为这里的问题是“cout << buffer[2]”，它将您的二进制信息转换为字符。尝试 int cast before ，你也应该使用静态的“unsigned char array”，因为二进制数据可以是无符号的。这将起作用：

```
unsigned char buffer[ 30 ];
ifstream fin;
fin.open ("FILENAME.raw", ios::in | ios::binary);
while (!fin.eof())
{

    fin.read( (char*)( &buffer[0] ), 30 ) ;
    cout << (int)buffer[2] << " ";
}
fin.close();
return 0; 
```

此外，如果您想遍历二进制文件，为什么您只是打印缓冲区 [2]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:37:46.987

您应该仔细检查文件的二进制内容，因为您的代码看起来非常好。

# java - 电子邮件签名中的图像？

> ID：13024762
> 
> 赞同：0
> 
> 时间：2012-10-23T06:36:29.507
> 
> 标签：java, image, email, base64

我需要存储带有电子邮件签名的图像，可以将其发送到任何电子邮件服务器，如 gmail、yahoo 等。为此，我计划先将图像转换为base64string，然后从中制作图像标签并将其与图像签名主体一起存储在数据库中。现在，无论用户在哪里发送邮件，他的签名（签名正文 + 图像标签）都会随电子邮件一起发送。这样，大多数电子邮件客户端都可以显示带有签名的图像。

对我来说，这种方法看起来不错，但是要考虑一个因素，使用 base 64 字符串，图像主体将在数据库列中占用大量空间。想知道这是个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:39:08.910

如果图像小到可以通过电子邮件发送，那么它也小到可以作为文本/二进制数据存储在任何数据库中。大概（希望）您只打算添加一个大小最多为 5-10KB 的、经过合理优化的小型图像。

另请参阅：[https](https://stackoverflow.com/a/9110164/453277) ://stackoverflow.com/a/9110164/453277 ，了解包含基于图像的签名的替代方法。

# android - 缩放后在高图中获取 Y 轴值

> ID：13024770
> 
> 赞同：0
> 
> 时间：2012-10-23T06:36:59.623
> 
> 标签：android, highcharts

我在 android 中使用 highcharts，图表加载到 webview 中。我正在使用内置缩放控件的 Webview。我的问题是，当我缩放图表时，我希望始终查看 y 轴值。但是当我缩放某些部分时，它会缩放，并且 y 轴不再保留在屏幕上。因此，由于缩放，它被隐藏了。但即使在我们缩放它之后，我也想显示 Y 轴值。有没有办法做到这一点？

# php - 将动态生成的表单嵌入到另一个表单中

> ID：13024773
> 
> 赞同：3
> 
> 时间：2012-10-23T06:37:14.777
> 
> 标签：php, forms, symfony, symfony-forms, symfony-2.1

我使用 Symfony2.1 的 FormBuilder 在控制器中创建动态表单：

```
$form = $this->createFormBuilder($defaultData);
$form->add('field','text'); 
```

我想以相同的方式嵌入另一个表单并将其嵌入到主表单中。

```
$subForm = $this->createFormBuilder();
$subForm->add('subfield','text');

// Does not work
$form->add('subform', $subForm); 
```

不幸的是，此设置无法正常工作。我找不到任何方法如何将动态生成的子表单添加到动态生成的表单中，如上面的示例。

我缺少的函数调用是什么？

上面的示例代码抛出的异常是

> UnexpectedTypeException：给定类型为“string or Symfony\Component\Form\FormTypeInterface”、“Symfony\Component\Form\Form”的预期参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T22:43:41.050

我会在两个单独的字段中创建两个表单类：

```
<?php

namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class FirstFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('field', 'text')
            ->add('subform', new SecondFormType());
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\DemoBundle\Entity\FirstEntity'
        ));
    }

    public function getName()
    {
        return 'first';
    }
}

<?php

namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class SecondFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('subfield', 'text');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\DemoBundle\Entity\SecondEntity',
        ));
    }

    public function getName()
    {
        return 'second';
    }
} 
```

创建后，您可以从任何控制器创建表单，并使用此行创建表单：

```
$form = $this->createForm(new FirstFormType()); 
```

或对于版本形式：

```
$form = $this->createForm(new FirstFormType(), $first); 
```

在您的示例代码中，您试图将整个表单而不是表单类型分配给字段。

希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-15T16:47:09.420

推荐的 symfony 方式是创建单独的 FormType 类，如上所述。但是如果你真的想..

您可以通过调用将动态子表单添加到表单构建器中

```
$formBuilder->add($subform /* FormBuilder */); 
```

`"form"`如果使用 创建此子表单，则此子表单将具有名称`$this->createFormBuilder();`，这意味着您不能添加以这种方式创建的两个或多个子表单 - 较新的子表单将覆盖以前具有相同名称的子表单。

如果您需要添加多个子表单，则必须使用

```
$this->get('form.factory')->createNamedBuilder($uniqName) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-22T14:29:09.763

无需制作类...在控制器动作中：

```
$subFormBuilder = $this->createFormBuilder(
        null /* default data */, 
        ['label' => 'Sub Form'] /* options */
    )
    ->add('name');

$form = $this->createFormBuilder()
    ->add($subFormBuilder)
    ->add('number')
    ->getForm(); 
```

# java - 在数据库中填充文本框输入？

> ID：13024776
> 
> 赞同：0
> 
> 时间：2012-10-23T06:37:37.083
> 
> 标签：java, sql, database, eclipse, exception

我正在编写一个 CRUD 应用程序并想将我的文本框输入填充到数据库中，但我得到了一个例外：

这是我的方法：

```
public void create(Produkt p) {
    if(p==null) {
        log.error("Erstellen von null-Objekt in DB nicht möglich");
        throw new IllegalArgumentException("Erstellen von null-Objekten in der DB nicht möglich");
    }
    if(p.getName().length()>30) {
        log.error("Produktname zu lang!");          
    }
    PreparedStatement ps=null;

    try {
        ps = hsqlmanager.getConnection().prepareStatement("INSERT INTO Produkt(name, kategorie, geloescht, haltbar, preis, altersfreigabe, bild) VALUES(?, ?, ?, ?, ?, ?, ?);");
    } catch (SQLException e1) {
        log.error("Es konnte keine Verbindung hergestellt werden im DAOProdukt!");
        e1.printStackTrace();
    }
    try {
        //TODO
        ps.setString(1, p.getName());
        ps.setString(2, p.getKategorie());
        ps.setBoolean(3, p.isGeloescht());
        ps.setBoolean(4, p.isHaltbar());
        ps.setDouble(5, p.getPreis());
        ps.setBoolean(6, p.isAltersfreigabe());
        ps.setString(7, p.getBild());
        System.out.println(p.getName() + p.getKategorie() + p.getPreis() + p.getBild() + p.isGeloescht() + p.isGeloescht() + p.isHaltbar());
        ps.execute();//here I get the Exception
        ps.close();

        log.info("Produkt in DB erstellt.");
    }
    catch (SQLException e) {
        log.error("createtes Produkt konnte nicht gespeicher werden - SQLFehler: " + e.toString());
        e.printStackTrace();
    }
} 
```

这是我填写文本框的地方：

```
 String name=textBoxes.get(0).getText();
                if(name.trim().isEmpty()) {
                    name="NO NAME ADDED!";
                } else{
                    name = textBoxes.get(0).getText();
                } 
```

我想这与名称有关，因为异常说的是这样的：

> ```
> Java.sql.SQLDataException: data exception: string data, right truncation
>   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
>   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
>   at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source)
>   at org.hsqldb.jdbc.JDBCPreparedStatement.execute(Unknown Source)
>   at dao.DAOProdukt.create(DAOProdukt.java:50)
>   at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
>   at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
>   at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
>   at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
>   at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown 
> ```
> 
> 源) 在 java.awt.Component.processMouseEvent(Unknown Source) 在 javax.swing.JComponent.processMouseEvent(Unknown Source) 在 java.awt.Component.processEvent(Unknown Source) 在 java.awt.Container.processEvent(Unknown Source)在 java.awt.Component.dispatchEventImpl(Unknown Source) 在 java.awt.Container.dispatchEventImpl(Unknown Source) 在 java.awt.Component.dispatchEvent(Unknown Source) 在 java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) 在 java .awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt 。零件。dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$200(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.awt.EventQueue$3 .run(Unknown Source) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue 的 java.security.AccessController.doPrivileged(Native Method) $4.run(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt。 java.awt 中的 EventQueue.dispatchEvent(Unknown Source)。EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）

那是什么意思？异常指向`ps.execute();`但我使用的是正确的类型？为什么？

# c# - 使用 XDocument 和 Linq 读取 XML

> ID：13024781
> 
> 赞同：1
> 
> 时间：2012-10-23T06:37:49.473
> 
> 标签：c#, .net, linq-to-xml

我有一个这样的 xml 文件：

```
<root>
 <lv1 value="a" >
  <lv2 value="aa" >
   <lv3 name="aaa" value="1" />
   <lv3 name="aab" value="2" />
   <lv4 name="aac" value="4" />
  </lv2>
 <lv2 value="bb">
  <lv3 name="bba" value="2" />
  <lv3 name="bbb" value="5" />
  <lv3 name="bbc" value="4" />
 </lv2>
</lv1>

</root> 
```

我想找到 lv2.value="bb" 和 lv1.value="a" 的 lv3 的所有值和名称

我使用 linq

```
 var lv1s = from lv1 in XDocument.Load(yourPath)
                                 .Descendants("lv1")
                                 .Descendants("lv2")
                                 .Descendants("lv3")
             select new
             {
                 value = lv1.Attribute("value").Value,
                 name = lv1.Attribute("name").Value
             };

  foreach (var lv in lv1s)
  {
      holiday += lv.name +":" + lv.name     ;
  } 
```

如何设置它的位置？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:48:49.060

```
 var result = XDocument.Load(yourPath).Descendants("lv1")
            .Where(x => x.Attribute("value").Value == "a")
            .Descendants("lv2")
            .Where(x => x.Attribute("value").Value == "bb")
            .Descendants("lv3")
            .Select(x => new
                {
                    Name = x.Attribute("name").Value,
                    Value = x.Attribute("value").Value
                }); 
```

# java - 使用 ScheduledExecutorService 创建计时器

> ID：13024787
> 
> 赞同：7
> 
> 时间：2012-10-23T06:38:17.460
> 
> 标签：java, multithreading

所以我试图弄清楚如何创建一个计时器，我遇到了这个： [using ScheduledExecutorService to start and stop timer](https://stackoverflow.com/questions/3104088/using-scheduledexecutorservice-to-start-and-stop-timer)

他们的例子似乎工作得很好。我只是想知道我是否正确使用了这个：

```
 public class TimerTest 
{
  private ScheduledExecutorService  es = null;
  private  boolean timeIsUp = false;
  private ScheduledFuture futureHandler = null;
  private  TimeKeeper timeKeeper = null;
  private  String subject = "";
  private  int siteNo;
  private  long time; 
  private  boolean stop;

public  void endTimer()
{
    System.out.println("we should shutdown everything here");
    es.shutdownNow();
}

public  boolean stopTimer()
{

    if (timeKeeper != null)
    {
        timeKeeper.deactivate();
    }
    futureHandler.cancel(true);
 return true;

}
public  boolean isTimeup()
{
    return timeKeeper.isTimeUp();
}
public void startTimer(long mseconds, String subj, int sNo)
{
    subject = subj;
    siteNo = sNo;
    time = mseconds;
    timeKeeper = new TimeKeeper();
    callScheduler(mseconds);

}

public  boolean isTimerRunning()
{
    return (es.isShutdown() || es == null);

}
public void resetTimer(long t)
 {
    stopTimer();
    callScheduler(t);
 }

public  void resetTimer()
{

   resetTimer(time);  
}

private  void callScheduler(long mseconds)
{
    if (es == null)
        es = Executors.newScheduledThreadPool(3);
    timeKeeper = new TimeKeeper();
    futureHandler = es.schedule( timeKeeper, mseconds, TimeUnit.MILLISECONDS);

}

private class TimeKeeper implements Runnable  {
    //volatile for thread-safety

    private volatile boolean isActive = true;  
    private volatile boolean isTimeUp = false;
    public void run ()   {  
        if (isActive){
            callAlert();
            isTimeUp = true;
        }
    }  
    public void deactivate(){
        isActive = false;
    }

    public boolean isTimeUp()
    {
        return isTimeUp;
    }
    private void callAlert()
    {
        System.out.println("you are in the callAlert method");
    }
  }

 } 
```

这是测试：

```
 public static void main(String[] args) {
    // TODO Auto-generated method stub
     long pastTime = System.currentTimeMillis();
     TimerTest timer = new TimerTest();
    timer.startTimer(15000, "bh", 1);
    long time;
    int count =0;
    boolean stop = false;
    while(true)
    {

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        time = System.currentTimeMillis() - pastTime;

        if (time > 3000)
        {
            if (!stop){
                System.out.println("we are reseting the timer");
                timer.resetTimer(4000);

                timer.stopTimer();
                try {
                    Thread.sleep(3995);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                break;

            }
            stop = true;

        }
        if (timer.isTimeup())
        {
            System.out.println("our time is up");
            timer.endTimer();
            break;
        }
        if (!stop)
            System.out.println("hello");
        else
        {
            if (count == 0)
                System.out.println("we wait 10 seconds from now");
            count++;
        }

    }
    timer.resetTimer(1200);
    while (true)
    {
        if (timer.isTimeup())
        {
            timer.isTimeup();
            System.out.println("breaking after time is up");
            break;
        }
    }
    timer.endTimer();

} 
```

这似乎有效，我可能错过了我需要的东西，这是我第一次使用 ScheduledExecutorService 你们看到这段代码有什么问题吗？我不希望与线程冲突发生冲突。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T07:23:21.897

使用[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)，您会自动获得计时器功能。除非您有 ScheduleExecutorService 无法提供的东西，否则您不需要明确地使用它。例如，假设您想在初始延迟 10 秒后开始任务，然后每次延迟 5 秒。

```
public void init() {
    executor = new ScheduledThreadPoolExecutor(corePoolSize);
    executor.scheduleWithFixedDelay(new WorkerThread(), 10, 5, TimeUnit.SECONDS);
}

public void end() {
    executor.shutdown();
} 
```

# ruby-on-rails-3 - 如何在索引视图中实现复选框？

> ID：13024788
> 
> 赞同：0
> 
> 时间：2012-10-23T06:38:22.327
> 
> 标签：ruby-on-rails-3, devise, cancan

我正在构建一个应用程序，当用户以管理员身份登录时，它将具有注册用户列表并显示四个链接，编辑销毁和设置。我想要的是当管理员单击设置链接时，它将具有复选框视图，管理员在其中决定用户读取、编辑、创建和销毁应用程序中可用模型的权限。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:43:21.867

如果我理解正确，您正在寻找为一个用户设置设置的视图。

由于您没有提供有关模型的任何详细信息，因此我假设模型已被调用`User`，并且权限只是该模型上的布尔字段。

与此类似：

```
User
 - can_read
 - can_create
 - can_destroy
 - can_edit 
```

然后我会像这样实现视图：

```
<%= form_for @user do |f| %>
  <%= flabel :can_read %>
  <%= f.check_box :can_read %>

  <%= flabel :can_create %>
  <%= f.check_box :can_create %>

  ....

  <%= f.submit %>
<% end %> 
```

或更短：

```
<%= form_for @user do |f| %>
  <% [:can_read, :can_create, :can_edit, :can_delete].each do |permission| %>
    <%= flabel permission %>
    <%= f.check_box permission %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

控制器代码显然如下所示：

```
def edit
 @user = User.find(params[:id]
end

def update
  @user = User.find(params[:id]
  @user.update_attributes(params[:user])
end 
```

# java - 如何总结元素的具体部分？

> ID：13024791
> 
> 赞同：1
> 
> 时间：2012-10-23T06:38:28.503
> 
> 标签：java, arrays, for-loop, arraylist

我深陷其中。请帮忙。

样本数据

```
Year  Rate
2002  1.0
2002  1.0
2002  1.1
2003  1.5
2003  5.4
2003  6.5
2004  9.5 
2004  12.5
2004  11.3 
```

如何使用 Java 编程语言按年份总结元素？前任。将 2002 年的所有费率加起来。然后，将 2003 年的所有费率加起来...

我应该先将数组拆分为特定部分还是其他部分？

我不知道。请帮助（**不是答案，而是建议**）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:42:38.243

拆分数据（[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)），然后一次迭代两次，将结果放入[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#put%28K,%20V%29)。

```
// Do the split, initialize a Map.
for( int i=0; i < splitResult.length; i+=2) {
    // Use your map
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:50:04.340

（树）映射可能是您的任务的一个很好的数据结构：

```
Map<Integer, Integer> ratesPerYear = new TreeMap<Integer, Integer>();
for (/* each pair of values */) {
   Integer previousResult = ratesPerYear.get(/* year */);
   if (previousResult == null) {
      previousResult = 0;
   }
   ratesPerYear.put(/* year */, previousResult + /* rate */);
}

System.out.println("Total rates for 2003: " + ratesPerYear.get(2003)); 
```

该代码是无效的java，您将有一些注释要替换；）

# android - 在 android dev/msm_pcm_out 中打开音频设备，而不通过本机 c 代码锁定它

> ID：13024797
> 
> 赞同：0
> 
> 时间：2012-10-23T06:38:54.823
> 
> 标签：android

我正在尝试使用本机 c 代码打开 dev/msm_pcm_out 但媒体播放器没有发出声音，是否可以打开设备而不锁定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:39:07.147

您是否有权访问此设备？通常`msm_pcm_out`将由`system`进程拥有，并且对它的访问将仅限于所有者进程和所有者所属的组。

一个更重要的问题是您*为什么*要尝试访问此设备？该`msm_pcm_out`设备仅适用于较旧的 Qualcomm 平台。他们的平台从不通过 /dev/snd/ 中的 ALSA PCM 设备进行 PCM 输出/输入，而其他供应商的平台显然根本没有 msm_-devices，因为它们是 Qualcomm 的东西。

# php - Cakephp Twitch.Tv API 加载时间

> ID：13024798
> 
> 赞同：0
> 
> 时间：2012-10-23T06:39:00.927
> 
> 标签：php, json, cakephp

我正在使用以下代码：

```
public function getUser($name) {
        $return = array();
        $file = array();
        $httpSocket = new HttpSocket();
        $url = $this->baseUrl . $name . $this->apiKey;
        $temp = $httpSocket->get($url);
        $file = $temp->body;
        $file = explode(',', $file);
        $i = 0;

        foreach ($file as $info) {
            $info = str_replace("{", "", $info);
            $info = str_replace("}", "", $info);
            $info = str_replace('"', "", $info);
            $info = str_replace("[", "", $info);
            $info = str_replace("]", "", $info);
            $temp = explode(':', $info, 2);

            if ($temp[0] == 'stream') {
                $temp[1] = str_replace("game:", "", $temp[1]);
                if ($temp[1] == 'StarCraft II: Wings of Liberty') {
                    $temp[1] = 'starcraft-II';
                }
                $return[$i]['game'] = $temp[1];
            } elseif ($temp[0] == 'teams') {
                $temp[1] = str_replace("name:", "", $temp[1]);
                if ($temp[1] != '') {
                    $return[$i]['teams'] = $temp[1];
                } else {
                    $return[$i]['teams'] = null;
                }
            } else {
                if (isset($temp[1])) {
                    $return[$i][$temp[0]] = $temp[1];
                }
            }
        }

        return $return;
    } 
```

我想知道是否有什么办法可以减少这个脚本的加载时间。我正在从 TwitchTV 提取一个 json 文件以供记录。该功能仅在页面刷新/加载时效果很好，页面渲染有 2-3 秒的明显延迟。一如既往，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:28:48.227

你知道 API 的响应是 json 吗？为什么要手动解析响应而不是使用 json_decode()？使用 json_decode() 并看看它会生成什么。您可以删除 90% 的代码。

我还会根据您的需要缓存 API 响应几分钟到几个小时。阅读本书的缓存章节[http://book.cakephp.org/2.0/en/core-libraries/caching.html](http://book.cakephp.org/2.0/en/core-libraries/caching.html)该页面应该在刷新时立即加载，因为它不需要进行另一个 API 调用。

# php - 在 node.js 套接字服务器脚本中运行 php 代码

> ID：13024801
> 
> 赞同：3
> 
> 时间：2012-10-23T06:39:07.760
> 
> 标签：php, javascript, node.js

我在 javascript 中运行一个普通的 TCP 套接字并使用节点来执行。在将响应发送回客户端之前，我想使用一些 php (mysql) 代码验证数据。如何在此 javascript 文件中执行此代码？STACKOVERFLOW 中的所有类似问题都询问 HTML 中的此代码。（没关系，我理解那部分），但这是一个普通的 javascript 文件（在节点中执行）。javascript代码如下，我标记了验证函数调用。

```
var net = require('net');

var HOST = '192.168.0.6';
var PORT = 8765;

net.createServer(function(sock) {

    console.log('CONNECTED: ' + sock.remoteAddress +':'+ sock.remotePort);

    sock.on('data', function(data) {
        var output;
        var validScan;

        //This is the function call to a php file
        **validScan = validateScanTag(data);**

        console.log('DATA ' + sock.remoteAddress + ': ' + data);
        sock.write(validScan);

    });

    // Closing this instance of socket
    sock.on('close', function(data) {
        console.log('CLOSED: ' + sock.remoteAddress +' '+ sock.remotePort);
    });

}).listen(PORT, HOST);

console.log('Server listening on ' + HOST +':'+ PORT); 
```

validateScanTag 执行一行 lke ：

```
$.post('getperiod.php', {hours:hrs, minutes:mins, seconds:secs, ddd:day}, 
```

但这不起作用。如何从 javascript 文件中调用此“geteriod.php”文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:53:24.593

我很确定问题本身非常值得重新考虑（例如，将您的 mysql 代码从 php 移植到节点）但这是我的解决方案：

```
var net = require('net');
var PORT = 8765;
var Lazy=require('lazy');
var spawn = require('child_process').spawn;

// php code runs as a server in external process

var validator = spawn('php', ['validator.php']);

net.createServer(function(sock) {

    console.log('CONNECTED: ' + sock.remoteAddress +':'+ sock.remotePort);

    // on 'data' handler is not enough to read input line by line
    // you need to buffer data, use some kind of state machine or one of available stream parsers. I use lazy here: npm install lazy

    // write each line to php validation code
    new Lazy(sock).lines.forEach(function(line) {
        console.log('DATA ' + sock.remoteAddress + ': ' + line.toString());
        validator.stdin.write(line);
        validator.stdin.write('\n');
    });

    // read validation result line by line from validator process
    new Lazy(validator.stdout).lines.forEach(function(line) {
        console.log('Validation result:' + line.toString()) // line is Buffer object here, hence toString
    });

    validator.stdout.pipe(process.stdout);

    // Closing this instance of socket
    sock.on('close', function() {
        console.log('CLOSED');
    });

}).listen(PORT); 
```

validator.php 应该从标准输入读取并写入标准输出

```
<?

function validatescanTag($l) {
    // put your validation code here
    return $l . '!!!!';
}

$stdin = fopen('php://stdin', 'r');

do {
  $line = fgets($stdin);
  print validateScanTag($line);
} while(1);

?> 
```

另一种选择是使用[fastcgi 协议](https://github.com/billywhizz/node-fastcgi-parser)与 node <-> php 或[dnode rpc](https://github.com/substack/dnode)通信。或者只是使用 http 并从 nginx/apache （甚至[node-php](https://github.com/davidcoallier/node-php)）运行 php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:18:38.803

一种为澄清和“让你穿上靴子”给出更通用答案的方法：

据我了解，您正在尝试使用 node.js 服务器调用的 http post 请求运行您的 php 脚本。

您可能首先必须意识到，与在浏览器中运行 JS 相比，运行服务器端 JavaScript 通常具有不同的动机和可能性以及对架构的影响——至少在经典的“jQuery 意义上”。

如您的评论中所述，您希望 jQuery 在服务器端 node.js 中无缝工作。正如评论发布的那样，这不起作用`ReferenceError: $ is not defined`。您的 node.js 堆栈中没有开箱即用的服务器端 jQuery（使用 jQuery 服务器端的可能性应单独讨论，是另一个主题）。

尽管如此，您显然正在寻找一种方法来重用您的 PHP 脚本，该脚本已经处理了您的 mysql 数据连接并通过*利用它来处理服务器端*。*使用 http*执行此操作有可能出现[在此 stackoverflow 帖子](https://stackoverflow.com/questions/6158933/http-post-request-in-node-js)或[node.js 文档的 http.request 部分中](http://nodemanual.org/latest/nodejs_ref_guide/http.html#http.request)。如果您的 php 脚本与 node.js 运行在同一台服务器（或更好的运行时环境）上，您也可以通过使用 php 独立（命令行）实用程序将其作为子进程生成来*直接执行 php 脚本。*

最后但同样重要的是：是的，有一些方法（npm 模块、ORM 层）可以将 mysql 直接与您的 node.js 应用程序连接起来。但这是另一个复杂的主题，在其他地方进行了讨论。

我希望这有助于避免混淆不应该混淆的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T13:58:32.127

有一个 PHP 扩展在 PHP 中[嵌入了 Chrome 的 V8 引擎](http://www.php.net/manual/en/book.v8js.php)。

# php - Yii 的混合身份验证导致重定向循环

> ID：13024803
> 
> 赞同：3
> 
> 时间：2012-10-23T06:39:12.327
> 
> 标签：php, yii, hybridauth, hybridauthprovider

我正在尝试使用 hybridauth 在我的网站上实现 twitter 登录。我知道 Yii 有一个混合身份验证插件。我没有使用它，因为我上次使用时遇到了一些问题。我正在尝试实现混合身份验证的核心版本。

我打电话

```
$hybridauth = new Hybrid_Auth( Yii::app()->params['hybridauth'] );
$adapter = $hybridauth->authenticate( 'Twitter'); 
```

但由于某种原因，它重定向到`http://localhost/yiiauth/authtest/?hauth.start=Twitter&hauth.time=1350973441`，这会导致重定向循环。有没有办法解决这个问题？我的混合身份验证配置如下：

```
'params'=>array(

    'hybridauth'=>array(
        "base_url" => "http://localhost/yiiauth/authtest/", 

        "providers" => array ( 
            "Twitter" => array ( 
                "enabled" => true,
                "keys"    => array ( "key" => "mykey", "secret" => "mysecret" ) 
            ),
        ),

        "debug_mode" => false,

        "debug_file" => "",
    )
), 
```

我的 hybridauth 文件在里面`/protected/extensions/hybridauth`，我`Hybrid/Auth.php`在 index.php 文件的顶部包含了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:06:38.497

1.  twitter 和 facebook 的混合身份验证登录需要一个有效的域而不是 localhost。

2.  您在配置文件“hybridauth.php”中的**base_url**应设置为“/hauth/endpoint”，即它必须指向端点。如果您已通过 .htaccess 删除了 index.php，请使用“/index.php/hauth/endpoint”。

3.  将 Logs 文件夹中的 hybridauth.log 的权限设置为**可写**。

参考链接：[http ://hybridauth.sourceforge.net/userguide/Configuration.html](http://hybridauth.sourceforge.net/userguide/Configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:23:01.717

您注意到配置中的基本 url 了吗？它是在身份验证期间返回回调的地方，您必须使用实时 Web 域来测试它。

"base_url" => "http://localhost/yiiauth/authtest/",

twitter 也需要创建额外的令牌，我希望你已经这样做了。

我在我的测试网站上使用了 hybridauth：[www.bemployable.com](http://www.bemployable.com)

# iphone - AVAudioPlayer 在播放视频时无法识别设备静音按钮

> ID：13024806
> 
> 赞同：3
> 
> 时间：2012-10-23T06:39:26.527
> 
> 标签：iphone, ipad, avaudioplayer, avplayer

场景如下......

1.  使用 AVAudioPlayer 播放背景 mp3，
2.  在播放背景音乐时，使用 AVPlayer 播放视频（没有音频的视频），
3.  现在，如果尝试通过设备静音来静音背景音频不会静音，

奇怪的是，它适用于有音频的视频......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:00:50.710

```
- (void)mute { //it only work device,not work in simulator
    //check condition
    if(condition){
        //volume mute
        [[MPMusicPlayerController applicationMusicPlayer] setVolume:0];
    } else {
        //volume unmute
        [[MPMusicPlayerController applicationMusicPlayer] setVolume:your value];
    }
} 
```

# eclipse - 在eclipse中格式化XML文件

> ID：13024809
> 
> 赞同：1
> 
> 时间：2012-10-23T06:39:35.057
> 
> 标签：eclipse, hibernate, xml-parsing

当我尝试在 Eclipse 中格式化 xml 文件时，它会将每个字段放在一个新行上。相反，我希望每个属性都在一行上。例如，现在当我按下 CTRL+SHFT+F 时，eclipse 会像这样格式化它。

```
<hibernate-mapping package="com.server.entities">
<class
    name="Branch"
    table="Branch"
>
    <meta attribute="sync-DAO">false</meta>
    <id name="Id"
        type="java.lang.Long"
        column="id"
    >
        <generator class="native"/>
    </id>

    <property
        name="Created"
        column="created"
        type="timestamp"
        not-null="false"
        length="23"
    />
    <property
        name="LastUpdated"
        column="lastUpdated"
        type="timestamp"
        not-null="false"
        length="23"
    />
    <property
        name="CreatedBy"
        column="createdBy"
        type="java.lang.Long"
        not-null="false"
        length="19"
    /> 
```

但我想要的是

```
<hibernate-mapping package="com.kaizen.report.server.entities">
<class name="Branch" table="Branch">
    <meta attribute="sync-DAO">false</meta>
    <id name="Id" type="java.lang.Long" column="id">
        <generator class="native"/>
    </id>

<property name="Created" column="created" type="timestamp" not-null="false" length="23"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:00:59.720

如果您使用的是来自 eclipse.org 的 XML 编辑器，请转到 XML 编辑器首选项页面并更改选项以允许更长的行并且不将多个属性分别拆分为新行。

# apache - 使用 htaccess 重定向（再次） - 包括 SSL 和规范 url

> ID：13024810
> 
> 赞同：1
> 
> 时间：2012-10-23T06:39:36.327
> 
> 标签：apache, .htaccess, ssl, subdomain

我有一个主站点@sitename.com，我需要强制执行 SSL 并确保删除“www”（如果存在）。这适用于以下 .htaccess：

```
RewriteCond %{HTTP_HOST}//s%{HTTPS} ^www.(.*)//((s)on|s.*)$ [NC]
RewriteRule ^ http%3://%1%{REQUEST_URI} [R=301]

SSLOptions +StrictRequire
SSLRequireSSL
SSLRequire %{HTTP_HOST} eq "sitename.com"
ErrorDocument 403 https://sitename.com 
```

但是，这会破坏子域的重定向，即 subdomain.sitename.com 现在重定向到 sitename.com。

是否有一个简单的添加到 htaccess 将强制子域到非 ssl 和正确的位置而不破坏其他逻辑？

我试过了

```
RewriteCond %{HTTP_HOST} ^subdomain\.* [NC]
RewriteRule ^ http://subdomain.sitename.com [L] 
```

在 htaccess 的顶部，但这没有效果。

# css - 溢出：隐藏不隐藏边界半径下的元素

> ID：13024812
> 
> 赞同：2
> 
> 时间：2012-10-23T06:39:44.593
> 
> 标签：css

> **可能重复：**
> [舍入包含在一个小分区中的大图像的侧面在 Chrome 中不起作用](https://stackoverflow.com/questions/12858713/rounding-the-sides-of-a-big-image-contained-in-a-small-division-not-working-in-c)

我想做的是有一个“保险库”，当用户将鼠标悬停在内包装元素上时会打开。我遇到的问题是（至少在 Chrome 中）“门”没有隐藏在内包裹元素的边框半径区域下。是否有任何纯 CSS 的方法来纠正这个问题，或者我将不得不看一些更复杂的东西？

HTML：

```
<div class="vault-wrap-1">

    <div class="vault-wrap-2">

        <div class="vault-door-1"></div>

        <div class="vault-door-2"></div>

    </div>

</div> 
```

CSS：

```
div.vault-wrap-1 {
    height:600px;
    width:600px;
    border-radius:9999px;
    background:green;
    margin:auto;
    padding:30px;
}

div.vault-wrap-2 {
    height:600px;
    width:600px;
    border-radius:9999px;
    background:blue;
    overflow:hidden;
}

div.vault-door-1, div.vault-door-2 {
    height:600px;
    width:300px;
    background:red;
}

div.vault-door-1 {
    float:left;
}

div.vault-door-2 {
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:30:32.343

`positioned`在尝试对元素进行圆角处理时，这似乎仅在 Webkit 浏览器中是一个问题。

[如this answer](https://stackoverflow.com/a/10296258/681807)所示，解决方案是将 a 添加`-webkit-mask-image`到元素中`border-radius`：

```
div.vault-door-1, div.vault-door-2 {
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
} 
```

# sql - 内连接（选择。从）

> ID：13024814
> 
> 赞同：3
> 
> 时间：2012-10-23T06:39:49.547
> 
> 标签：sql

我需要获取用户发布的最后一条记录。如果我可以在 group by 之前进行 order by，下面的查询将获得我需要的信息

```
select a.client_id, a.client, b.title, b.type, b.created 
  from profile_users a, node b 
 where a.uid = b.uid 
   and b.type = 'event' 
   and a.status=1 
   and a.client_id in (select c.client_id 
                         from profile_users c, follows d 
                        where c.uid = d.followed_id 
                          and d.following_id =3) 
 group by a.client_id 
 order by a.client_id,
          b.created desc 
```

我尝试使用内部联接重写查询，但没有得到所需的结果。我需要编写此查询，以便在检查下表中的记录后获取 client_id。我需要一些帮助来修复此查询。

```
select b.client_id, b.client, a.title, a.created
  from node a 
 inner join profile_users b on a.uid=b.uid 
 inner join (select c.client_id
               from profile_users c 
              inner join follows d on c.uid=d.followed_id
              where c.status = 1
                and d.following_id = 3
              order by c.client_id
             ) as X1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:47:19.247

使用 sql "partition by" 它将允许您对记录进行排序而无需分组。

[http://learnsqlserver.in/2/Partition-By-Clause.aspx](http://learnsqlserver.in/2/Partition-By-Clause.aspx)

这最好在 group by 上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:14:09.403

您需要使用共同相关的子查询来确定最后一个帖子：

```
select a.client_id, a.client, b.title, b.type, b.created 
  from profile_users a
    join node b on a.uid = b.uid 
 where b.type = 'event' 
   and a.status=1 
   and a.client_id in (select c.client_id 
                         from profile_users c
                           join follows d on c.uid = d.followed_id
                        where d.following_id = 3) 
   and b.created = (select max(n2.created) 
                    from node n2
                    where n2.uid = a.uid)
 order by a.client_id,
          b.created desc 
```

我还使用“JOIN”关键字将 where 子句中的旧式隐式连接更改为显式连接。

# php - 页脚卡在页面中间

> ID：13024816
> 
> 赞同：0
> 
> 时间：2012-10-23T06:40:11.073
> 
> 标签：php, html, wordpress

我在这个网站上遇到了粘滞页脚问题：

[http://dev.epicwebdesign.ca/allshipsrise/events/](http://dev.epicwebdesign.ca/allshipsrise/events/)

出于某种原因，#page div 将自身限制在标题中。

我想不通。所有标签都已关闭，等等。W3C 一致性检查器只抱怨“首字母缩略词元素已过时。请改用 abbr 元素。”。那是wordpress的做法。

它类似于[页脚不在页面底部](https://stackoverflow.com/questions/9369688/footer-isnt-at-the-bottom-of-the-page)但是我已经明确设置：都在页脚上。

当页面太高时，页脚很好。即使不是，我也需要它在底部。

有几个潜在的问题，主要是为了弥补真正的问题。（未设置身高：100%）现在都整理好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T06:45:59.333

在您的正文中将高度设置为 100%，您的页脚将一直显示到页面末尾:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:07:06.133

删除`position:relative`可以解决问题。只需使用 firebug 删除此元素，您就会得到结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:48:49.927

你有几个问题。与`element.style`您一起使用绝对定位并将其提高 85 像素。将其更改为`position="relative"`并删除该`bottom`属性。

这：

```
element.style {
    bottom: 85px;
    position: absolute;
} 
```

变成：

```
element.style {
    bottom: 0px;
    position: relative;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:53:26.837

或者另一种解决方法是将其更改`margin-top:`为 100%

# javascript - 在更改下拉菜单时打开一个 url

> ID：13024817
> 
> 赞同：0
> 
> 时间：2012-10-23T06:40:15.013
> 
> 标签：javascript, jquery

“我需要导航到更改下拉列表的 url，这样它就可以通过单击链接来完成`<a href="www.abc.com" target="_blank">`

我的下拉菜单是

```
<select onchange="goTo(this);">
                        <option selected="selected" disabled="disabled">Back to..</option>
                        <option value="0">Manageassesment
                        </option> <option value="1">Job post
                        </option>
                    </select> 
```

goTo 函数是

```
function goTo(ctrl){
document.location.href = (ctrl.selectedIndex) ? "www.qwe.com":"www.asd.com"; 
```

}

现在的问题是这个 goTo 在同一个窗口中打开了 url，但我希望它应该像点击带有 target="_blank" 的锚点时那样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:41:40.623

使用**[window.open()](https://developer.mozilla.org/en-US/docs/DOM/window.open)**函数也可以传递一个目标。

```
function goTo(ctrl){
window.open((ctrl.selectedIndex) ? "www.qwe.com":"www.asd.com", "_blank");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:43:12.423

你必须像这样使用 window.open() ：

```
function goTo(ctrl){
  window.open((ctrl.selectedIndex) ? "www.qwe.com":"www.asd.com");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:44:51.023

你可以像这样使用它：

```
window.open(url, '_blank'); 
```

# jquery - jquery inarray 没有正确匹配

> ID：13024820
> 
> 赞同：0
> 
> 时间：2012-10-23T06:40:22.997
> 
> 标签：jquery

我有一个数组，我正在尝试使用 inArray() 检查一个项目是否不在数组中

```
var popUpArray = ['join','reset_password','photos','session_expired'];

if($.inArray(urlType, popUpArray) != 0) {
  process code...
} 
```

基本上，如果 urlType 变量与数组中的值之一不匹配，我想在 if 语句中处理代码。

它适用于第一个值“加入”，但不适用于其他值。我理解这是因为一旦它在一个项目上不匹配它就会进行。

我想知道如何重新编写它，以便只有在 var urlType 与数组中的任何项目都不匹配时才会进入 IF 语句。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:43:01.533

它适用于连接，因为它是零索引。试试这个：

```
if($.inArray(urlType, popUpArray) == -1) {

} 
```

根据文档：

> $.inArray() 方法类似于 JavaScript 的原生 .indexOf() 方法，因为它在找不到匹配项时返回 -1。如果数组中的第一个元素与值匹配，则 $.inArray() 返回 0。
> 
> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

# xna - XNA 滚动背景

> ID：13024823
> 
> 赞同：1
> 
> 时间：2012-10-23T06:40:48.783
> 
> 标签：xna

嗨，我正在开发 2D 游戏，并且正在研究滚动背景，但无论我尝试什么，它都不会滚动。

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    //The size of the Sprite
    public Rectangle Size;

    //Used to size the Sprite up or down from the original image
    public float Scale = 1.0f;

    // Create an instance of Texture2D that will
    // contain the background texture.
    Texture2D background;

    // Create a Rectangle that will definee
    // the limits for the main game screen.
    Rectangle mainFrame;
    private GamePadState gamePadState;
    private KeyboardState keyboardState;
    public class Camera
    {
        public Camera(Viewport viewport)
        {
            Origin = new Vector2(viewport.Width / 2.0f, viewport.Height / 2.0f);
            Zoom = 1.0f;
        }

        public Vector2 Position { get; set; }
        public Vector2 Origin { get; set; }
        public float Zoom { get; set; }
        public float Rotation { get; set; }

        public Matrix GetViewMatrix(Vector2 parallax)
        {
            // To add parallax, simply multiply it by the position
            return Matrix.CreateTranslation(new Vector3(-Position * parallax, 0.0f)) *
                // The next line has a catch. See note below.
                   Matrix.CreateTranslation(new Vector3(-Origin, 0.0f)) *
                   Matrix.CreateRotationZ(Rotation) *
                   Matrix.CreateScale(Zoom, Zoom, 1) *
                   Matrix.CreateTranslation(new Vector3(Origin, 0.0f));
        }
    }

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        IsMouseVisible = true;
        graphics.IsFullScreen = true;
    }

    protected override void Initialize()
    {
        gamePadState = GamePad.GetState(PlayerIndex.One);
        keyboardState = Keyboard.GetState();

        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);         

        // Load the background content.
        background = Content.Load<Texture2D>("Images\\muur");

        // Set the rectangle parameters.
        mainFrame = new Rectangle(0, 0, GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height);
    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);
        // Draw the background.

        // Start building the sprite.
        spriteBatch.Begin();

        // Draw the background.
        spriteBatch.Draw(background, mainFrame, Color.White);

        // End building the sprite.
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:42:53.150

我看不到您在哪里使用相机变换...

你应该有一个视差矢量并更新它......

```
 Vector2 parallax_position;
 float parallax_speed;

 public void Update (Gametime time)
 {
       parallax_position += parallax_speed * Vector2.UnitX * (float) time.elapsed.totalseconds;
 } 
```

然后在 Draw 方法中，你应该在你的 spritebatch 中使用它......

```
 public void Draw()
 {
      spriteBatch.begin(..,...,..,..,.., GetCameraTransform(Parallax));
      ...
 } 
```

# bash - 如果 grep 找到它要查找的内容，则执行 X 否则 Y

> ID：13024828
> 
> 赞同：26
> 
> 时间：2012-10-23T06:41:14.190
> 
> 标签：bash, grep

在此语句中，我尝试匹配路径 /app/$var1 （应用程序名称）中是否存在版本（$var2）

```
if 
find /app/$var1 -maxdepth 1 -type l -o -type d | grep $var2 #results in a nice list where i can manually get a true match.
# if match is found then execute command.
$realcmd "$@"
    rc=$?
    exit $rc
else
echo "no match, the version you are looking for does not exist"
fi 
```

当前代码：这包括我所有的代码（未清理）。我运行的命令：“./xmodule load firefox/3.6.12”这个版本确实退出

```
#!/bin/bash
# hook for some commands

#echo $@  #value of sting that is entered after "xmodule"

cmd=$(basename "$0")
#echo "called as $cmd"

if [[ $cmd = "xmodule" ]]
then
    realcmd='/app/modules/0/bin/modulecmd tcsh'

    # verify parameters
fi
# check if $@ contains value "/" to determine if a specific version is requested.
case "$@" in
*/*)
    echo "has slash"
var1=$(echo "$@" | grep -Eio '\s\w*') # Gets the aplication name and put it into var1
echo $var1   # is not printed should be "firefox"
var2=$(echo "$@" | grep -o '[^/]*$')  # Gets version name and put it into var2 
echo $var2 
# Checking if version number exist in /app/appname/
if find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then
    $realcmd "$@"
    exit $?
else
    echo "no match, the version you are looking for does not exist"
    # Should there be an exit here?
fi
    ;;

*)
    echo "doesn't have a slash"
    ;;
esac 
```

输出：mycomputer [9:55am] [user/Desktop/script] -> ./xmodule load firefox/3.6.12 '有斜线

3.6.12 不匹配，你要找的版本不存在

有空格的地方（3.6.1 以上）应该有应用程序名称。我现在意识到这一定是我的问题，因为它使用的路径可能只是 /app。但我不认为我在这部分代码中进行了任何更改。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T06:54:09.890

您可以使用整个 grep 管道作为`if`语句的条件。用于`grep -q`阻止它打印找到的匹配项（除非您想要打印）。`$?`我还简化了出口（如果您要立即使用它，则无需将其存储在变量中）。结果如下：

```
if find "/app/$var1" -maxdepth 1 -type l -o -type d | grep -q "$var2"; then
    $realcmd "$@"
    exit $?
else
    echo "no match, the version you are looking for does not exist"
    # Should there be an exit here?
fi 
```

顺便说一句，由于您将在 $realcmd 之后立即退出，您可以使用`exec $realcmd "$@"`$realcmd 替换 shell，而不是将 $realcmd 作为子进程运行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-23T06:45:05.497

从`grep`手册页：

> 如果找到选定的行，则退出状态为 0，如果未找到，则退出状态为 1。如果发生错误，则退出状态为 2。

换句话说，紧跟在您的 之后`blah blah | grep $var2`，只需检查返回值。

由于管道的退出代码是该管道中最后一个进程的退出代码，因此您可以使用以下代码：

```
find /app/$var1 -maxdepth 1 -type l -o -type d | grep $var2 ; greprc=$?
if [[ $greprc -eq 0 ]] ; then
    echo Found
else
    if [[ $greprc -eq 1 ]] ; then
        echo Not found
    else
        echo Some sort of error
    fi
fi 
```

# c# - 如何从本地副本中删除实体而不从 Linq DB 中删除

> ID：13024829
> 
> 赞同：0
> 
> 时间：2012-10-23T06:41:13.557
> 
> 标签：c#, sql, linq, linq-to-sql, linq-to-entities

我在 Linq 中遇到问题。当我查询时，我得到了表中的所有内容。但我不想加载某些标有特殊 key 的行`Y`。

因此，为此，我正在迭代并从我的本地副本中删除那些具有特殊 key 的内容`Y`。

稍后，当我提交更改时，我收到一个错误：

`"An attempt was made to remove a relationship between a priceTable and a dataTable. However, one of the relationship's foreign keys (P.Id) cannot be set to null."`

为什么会这样？如何在不触及某些行的情况下更改特定实体集的内容？

我希望标记为`Y`不从数据库返回的行。我不想在运行时在我的 c# 中使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:16:28.073

丹尼斯是正确的。如果您不需要标记为“Y”的那些记录，则使用 where 子句并排除这些记录。然后，您可以自由地修改记录并将其更新回数据库，而不会出现任何问题。

示例 where 子句如下所示

```
var data = from p in context.Persons
           where p.Required == "Y"
           select p; 
```

# sql - 如何遍历sql server中的每一行？

> ID：13024831
> 
> 赞同：2
> 
> 时间：2012-10-23T06:41:26.837
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的查询返回 26 个表名。

```
select name from sys.tables where name like '%JPro_VP_Service%' 
```

现在我正在尝试编写一个查询来检查从上述查询返回的每个表。

```
--consider this is my first table 
select * from JPro_VP_Service 
where row_id like '%1-101%' or row_id like '%1-102%'
-- likewise I want to search in 26 tables return from above query 
```

我想我需要写 for 或 cursor 来完成这个。

谁能帮助我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:46:08.590

最简单的方法是试试这个：

```
SELECT 'select * from ' + name 
       + ' where row_id         like ''%1-101%'' or row_id like ''%1-102%''' 
FROM   sys.tables 
WHERE  name LIKE '%JPro_VP_Service%' 
```

您将在相同条件下将所有表格放在一起。你可以一起执行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:44:06.137

是的，您必须为此使用[游标](http://msdn.microsoft.com/en-us/library/ms180169.aspx)，并且可能还需要[动态 sql](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)

另见

[在 SQL Server 中生成动态 SQL 语句](http://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306)

[动态 SQL 的优点和缺点](http://social.msdn.microsoft.com/Forums/da-DK/transactsql/thread/e697a3d6-8811-463d-8624-6c9ec370a8eb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:46:23.907

```
DECLARE @mn INT 
DECLARE @mx INT 
DECLARE @tblname VARCHAR(100); 

WITH cte 
     AS (SELECT Row_number() 
                  OVER ( 
                    ORDER BY (SELECT 0)) AS rn, 
                name 
         FROM   sys.tables 
         WHERE  name LIKE '%JPro_VP_Service%') 
SELECT @mn = Min(rn), 
       @mx = Max(rn) 
FROM   cte 

WHILE( @mn >= @mx ) 
  BEGIN 
      SELECT @tblname = name 
      FROM   cte 
      WHERE  rn = @mn 

      SELECT * 
      FROM   @tblname 
      WHERE  row_id LIKE '%1-101%' 
              OR row_id LIKE '%1-102%' 

      --Do something else 
      SET @mn=@mn + 1 
  END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T14:51:35.497

尽管您可能希望将结果保存到表中，但此路由可能有效：

```
DECLARE @tables TABLE(
ID INT IDENTITY(1,1),
Name VARCHAR(100)
)

INSERT INTO @tables (Name)
SELECT name 
FROM sys.tables 
WHERE name like '%JPro_VP_Service%'

DECLARE @b INT = 1, @m INT, @table VARCHAR(100), @cmd NVARCHAR(MAX)
SELECT @m = MAX(ID) FROM @tables

WHILE @b <= @m
BEGIN

SELECT @table = Name FROM @tables WHERE ID = @b

SET @cmd = 'select * from ' + @table + '
where row_id like ''%1-101%'' or row_id like ''%1-102%''
'

EXECUTE sp_executesql @cmd

SET @b = @b + 1
SET @cmd = ''

END 
```

# c++ - 如何使派生类函数作为线程的启动例程？

> ID：13024839
> 
> 赞同：0
> 
> 时间：2012-10-23T06:42:03.577
> 
> 标签：c++, oop, c++11, pthreads

嗨，我有以下 C++ 代码，

我在 thread.h 文件中有 MyThread 类

```
class MyThread
{ 
    public:
       void start();
       virtual void* task() = 0;
}; 
```

我在worker.h文件中有工人阶级

```
class Worker : public MyThread
{
    virtual ~Worker();
    virtual void* task();   // I have implementation in worker.cpp
}; 
```

已`pthread_create()`在`start()`in`thread.cpp`文件中用于创建线程，我想将`task()`w 中定义的例程`orker.cpp`作为启动例程。那么我该怎么做呢？我应该将什么作为参数传递给启动例程`pthread_create`？

我已经尝试过了，但它给出了一个错误：

```
pthread_create(&(this->threadId),&(this->attr),(void *)task,NULL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:55:14.947

您不能将成员函数用作线程函数。您只能使用自由函数或静态成员函数，*但*您可以将任意 void* 参数传递给该函数，并且可以将指针`this`作为该参数传递，这允许您在该函数内调用成员函数：

```
class MyThread
{ 
    public:
       void start();
       virtual void* task() = 0;

       static void * thread_routine(void* pthis)
       {
            MyThread* t = static_cast<MyThread*>(pthis);
            t->task();
            return 0;
       }
}; 
```

然后你像这样启动你的线程

```
void MyThread::start()
{
    pthread_create(&(this->threadId),&(this->attr),thread_routine, this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:53:55.807

您不能使用 task() 作为线程的启动例程，因为它是成员函数而不是自由函数，就像预期的签名 void *(*start_routine)(void*)。（另外，它没有指向 void 参数的指针）

我只想创建一个包装器并将其作为启动例程，如下所示：

```
void *wrapper(void *data)
{
    Worker worker;
    worker.task();

} 
```

# javascript - 获取选定的选项更改jquery

> ID：13024843
> 
> 赞同：0
> 
> 时间：2012-10-23T06:42:14.163
> 
> 标签：javascript, jquery, select

我有一个可以用发票计算器[编辑的表格。](http://jsfiddle.net/Manna/cpRa2/9/)我的选择可编辑中有一个小问题。如果您单击*IVA 21 %*您会注意到您可以选择选项*IVA none*，我需要在我的选择可编辑中选择选项*none*后，它不会自动计算我的 IVA。我不知道如何管理它，或者设置更改 jQuery 或提交，在这两种情况下我都无法做到！

计算器可以工作，如果您选择 no Iva，然后单击 + 克隆一行，则不会计算 IVA，但我希望在选择 NO IVA 选项后实现相同。

这是代码：

```
if ($('.editable_selectiva').text() === "NO IVA") {
            $('#total').html(0);
            $('#total1').html(total);
        }
        else {
            $('#total').html(total*0.21);
            $('#total1').html(total*1.21);
        }
    })
} 
```

希望解释清楚，您可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:47:50.917

将更改事件绑定到选择。添加此代码

```
$('p.editable_selectiva').change(function() {
    tally('p#subtotal');
    tally('p#total');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:53:27.767

试试这个

```
$('.editable_selectiva select').change(function(){
    tally('p#subtotal');
    tally('p#total');
}); 
```

# asp.net-mvc - 如何使用 MembershipUser.IsApproved 进行账户确认

> ID：13024844
> 
> 赞同：0
> 
> 时间：2012-10-23T06:42:15.073
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership

这是我想用 ASP.Net MVC 3 实现的目标：

在用户可以积极使用我的网站之前，我希望他们填写表格并提供一些详细信息。除非他们这样做，否则他们会被重定向到表单网站。

我认为通过注册将 IsApproved 标志设置为 false 的帐户是可行的，但实际上这些用户根本无法登录（`Membership.ValidateUser(model.UserName, model.Password)`总是返回 false）。

表单身份验证中是否有任何机制支持这种情况？还是我必须在自定义数据库表中跟踪它？

提前致谢！

编辑：感谢 MystereMan（先阅读他的回复）和其他一些关于 SO 的精彩帖子，这里是 ActionFilter（属性及其用法）：

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = true)]
public class RedirectUserInRoleAttribute : ActionFilterAttribute
{
    public string RoleName { get; set; }

    public string TargetControllerName { get; set; }

    public string TargetActionName { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        MembershipUser user = Membership.GetUser();
        if (user != null)
        {
            string[] roles = Roles.GetRolesForUser(user.UserName);

            if (roles.Any(x => x == RoleName))
            {
                RouteValueDictionary redirectTargetDictionary = new RouteValueDictionary();
                redirectTargetDictionary.Add("action", TargetActionName);
                redirectTargetDictionary.Add("controller", TargetControllerName);

                filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);
            }
        }
    }
}

[Authorize]
[RedirectUserInRole(RoleName = "Pending", TargetControllerName = "Home", TargetActionName = "Index")]
public ActionResult ChangePassword()
{
  //...
}

[Authorize]
[RedirectUserInRole(RoleName = "Member", TargetControllerName = "Home", TargetActionName = "Index")]
public ActionResult Confirm()
{
  // show confirm form here!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:01:01.447

我认为最简单的解决方案是创建一个“待定”成员角色。首次创建帐户时，将它们分配给“待定”角色。然后，您可以创建一个操作过滤器，将所有处于待处理角色的用户重定向到您的表单。

编辑：

需要注意的一些问题：

*   确保在他们完成表格后将他们重新分配给不同的角色
*   确保您没有将它们重定向到表单操作本身，或者它是发布操作（否则您将处于无限循环中）
*   您可能希望阻止其他角色的用户导航到表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:43:56.270

您必须自己跟踪该信息。您可以按照建议创建自己的表并将其链接到 aspnet_users 表或向 aspnet_users 表添加一列。

# cordova - jquery mobile & Phonegap 第一步

> ID：13024845
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:42:23.553
> 
> 标签：cordova, jquery-mobile

如何设置 Jquery Mobile 和 Phonegap？$(document).ready 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:42:23.553

当您将 Jquery Mobile 与 Phonegap 一起使用时，基本的 javascript 很难启动。下面你可以看到如何设置一个简单的 hello world。

代码：http: [//jsfiddle.net/zwTQ4/](http://jsfiddle.net/zwTQ4/)

```
<div data-role="header">
    <h1>My Title</h1>
</div><!-- /header -->

<div data-role="content">    
    <p>Hello world</p>        
</div><!-- /content -->

<script type="text/javascript">
    $("#indexPage").bind(
         'pageinit',function() {
               alert("Hello world");
             });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:58:39.237

我建议阅读 jquerymobile 的文档，[关于 events 的部分](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)。

那里的第一个通知之一是：

```
Important: Use $(document).bind('pageinit'), not $(document).ready() 
```

# sdl - SDL 应用程序显示黑色窗口

> ID：13024847
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:42:29.223
> 
> 标签：sdl, codeblocks

我正在使用 SDL 用 C 制作一个突破性游戏。我正在使用 Code::Blocks。当我从 IDE 中运行它时，我的应用程序确实运行正常。但是当我尝试从 bin/release 文件夹运行 release .exe 文件时它只显示一个黑色窗口。窗口中没有显示任何内容。我的编码当然没有任何问题，因为它确实从代码块中运行。所以我想我需要在构建选项中设置一些东西或其他东西让它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:08:21.607

如果您使用相对路径来访问外部资产，请确保您的[工作目录](http://en.wikipedia.org/wiki/Working_directory)是您在 Code::Blocks 之外运行时所期望的。

# c# - C# 中单个 AND 运算符的意义何在？

> ID：13024849
> 
> 赞同：2
> 
> 时间：2012-10-23T06:42:42.343
> 
> 标签：c#, operators

为什么&存在？我的书告诉我，即使第一个条件为假，& 也会检查两个条件是否为假，但无论如何检查第二个条件是否为假是毫无意义的，因为如果第一个条件为假，则它总是会使整个事情为假。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:04:59.023

[`&&`](http://msdn.microsoft.com/en-us/library/2a723cdk.aspx)是“布尔与”运算符。如果它的两个操作数都为真，则它的计算结果为真，否则为假。如果第一项为真，它只会评估第二项，因为这是一个有用的优化。

[`&`](http://msdn.microsoft.com/en-us/library/sbf85k1c.aspx)是“二元与”运算符。它评估对其操作数应用按位与运算的结果。此值的类型与操作数的类型相同，可以是任何整数类型或布尔值。它总是评估它的两个操作数。

`&`对于布尔操作数，和之间唯一真正实际的区别`&&`是第一个总是评估两个操作数，而另一个执行[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

当然，对于整数操作数，只能使用`&`运算符。整数的按位与示例：

```
17 & 13 == 1 
```

这是因为 17 是 10001，按位计算，13 是 1101。所以运算是：

```
 10001
 & 01001
--------
   00001 
```

这同样适用于二进制和布尔 OR 运算符（`|`和`||`）。

二元 & 运算符也可以用作一元运算符，它返回应用它的变量的地址，就像在 C 中一样。这只能在`unsafe`代码中使用。例子：

```
unsafe {
   int a = 3;
   int* addressOfA = &a;
} 
```

希望这能把事情弄清楚一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:45:25.503

它用于按位运算。参考：
[http ://www.dotnetperls.com/](http://www.dotnetperls.com/and)
[和 枚举上最常见的 C# 位运算](https://stackoverflow.com/questions/93744/most-common-c-sharp-bitwise-operations-on-enums)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:46:26.723

不，这并不总是毫无意义的。也许您的第二次检查是即使第一个条件为假也必须执行的操作。

从 MSDN 中查看：http: [//msdn.microsoft.com/de-de/library/sbf85k1c (v=vs.80).aspx](http://msdn.microsoft.com/de-de/library/sbf85k1c(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:46:42.250

```
if(NecessaryFunction() & SecondNecessaryFunction())
{
   // Do something
}

bool NecessaryFunction()
{
   // Do smth useful;
}
bool SecondNecessaryFunction()
{
   // Do smth required and return bool;
} 
```

在这种情况下，您要执行这两种方法，如果其中一种方法为假，请不要进入`if`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:48:32.797

> 但是检查第二个条件是否为假是没有意义的，因为如果第一个条件为假，则总是会使整个事情为假

短路运算符是这样的：`&&`

`&`: 是按位运算符。有两个区别：

1.  两个操作数都将被计算。

2.  操作数可能并不`bool`总是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T07:05:55.287

**& 运算符的行为方式如下**

当用作一元运算符时，返回地址。但需要不安全。

当在整数上用作二元运算符时，它执行逻辑按位与。[例子](https://stackoverflow.com/questions/4757447/understanding-the-behavior-of-a-single-ampersand-operator-on-integers.)

当在 Bools 上用作二元运算符时，其行为类似于普通的 &&，但有一个区别。即使第一个条件结果为假，它也会评估第二个条件。

```
num=0;
if(false && num++)       
num will be zero

num=0;    
if(false & num++)    
num will be one 
```

# firefox-addon - 我们可以在 pyxpcomext 中使用 python 2.7 吗？

> ID：13024850
> 
> 赞同：1
> 
> 时间：2012-10-23T06:42:53.870
> 
> 标签：firefox-addon, python-2.7, mozilla

我想使用 python 2.7 或更高版本开发 mozilla 扩展。而且我知道他们的扩展名中有 2.5.2（即 pyxpcomext）。我已经用谷歌搜索了这个问题，但找不到任何东西。

# php - javascript和php中的相同函数给出不同的输出

> ID：13024854
> 
> 赞同：2
> 
> 时间：2012-10-23T06:43:11.073
> 
> 标签：php, javascript

javascript中的函数：

```
function int64add(dst, x, y)
{
    var w0 = (x.l & 0xffff) + (y.l & 0xffff);
    var w1 = (x.l >>> 16) + (y.l >>> 16) + (w0 >>> 16);
    var w2 = (x.h & 0xffff) + (y.h & 0xffff) + (w1 >>> 16);
    var w3 = (x.h >>> 16) + (y.l >>> 16) + (w2 >>> 16);
    dst.l = (w0 & 0xffff) | (w1 << 16);
    dst.h = (w2 & 0xffff) | (w3 << 16);
} 
```

我将此 javascript 转换为 PHP 为： PHP 中的函数：

```
function int64add($dst, $x, $y)
{
    $w0 = ($x->l & 0xffff) + ($y->l & 0xffff);
    $w1 = ($x->l >> 16) + ($y->l >> 16) + ($w0 >> 16);
    $w2 = ($x->h & 0xffff) + ($y->h & 0xffff) + ($w1 >> 16);
    $w3 = ($x->h >> 16) + ($y->l >> 16) + ($w2 >> 16);
    $dst->l = ($w0 & 0xffff) | ($w1 << 16);
    $dst->h = ($w2 & 0xffff) | ($w3 << 16);
} 
```

这两个函数为相同的输入返回不同的输出。尝试通过互联网搜索，但找不到任何东西。请帮忙！

**在 JS 中：**

输入：

夏令时：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

X：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

是：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

返回：

```
int64{
    h=-736899889,
    l=-411463152
} 
```

**在 PHP 中：**

输入：

夏令时：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

X：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

是：

```
int64{
    h=1779033703,
    l=-205731576
} 
```

返回：

```
int64{
    h=-736899891,
    l=-411463152
} 
```

**php 中的 int64 类：**

```
class int64{
    var $h;
    var $l;
    function int64($h,$l){
        $this->h=$h;
        $this->l=$l;
    }
} 
```

**js中的函数int64：**

```
 function int64(h,l){
        this.h=h;
        this.l=l;
    } 
```

**我希望 PHP 以 Javascript 的形式提供输出。（Javascript是正确的）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:28:33.580

那是因为您没有`>>>`在 PHP 中正确处理运算符。您应该确保`& 0xffff`在右移操作后使用清除高位：

```
$w0 = ($x->l & 0xffff) + ($y->l & 0xffff);
$w1 = (($x->l >> 16) & 0xffff) + (($y->l >> 16) & 0xffff) + (($w0 >> 16) & 0xffff);
$w2 = ($x->h & 0xffff) + ($y->h & 0xffff) + ($w1 >> 16);
$w3 = (($x->h >> 16) & 0xffff) + (($y->l >> 16) & 0xffff) + (($w2 >> 16) & 0xffff); 
```

这样做给了我相同的价值观，但它们与你的不同；也许您的输入值并不完全相同（复制粘贴错误？）

```
object(int64)#1 (2) {
  ["h"]=>
  int(1573309647)
  ["l"]=>
  int(-411463152)
} 
```

正如其他人所提到的，我会认真考虑使用 GMP 或 BCMath。

# asp.net-mvc - 我想从 SEO 重定向 url。如何重写我的所有 URL？

> ID：13024857
> 
> 赞同：0
> 
> 时间：2012-10-23T06:43:13.080
> 
> 标签：asp.net-mvc, url, url-rewriting

如何将我的 SEO 结果 URL 更改为我的新 URL？我正在使用 IIS 7。是否有任何配置可以重写 URL？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:47:21.197

目前尚不清楚您的情况如何，但我最好的猜测是您想重写 URL 之类`http://example.com/article?id=123&title=foo`的东西。对 SEO 更友好`http://example.com/article/123/foo`，例如 HTTP 响应状态代码[301 Moved Permanently](http://en.wikipedia.org/wiki/HTTP_301)。

查看 IIS 的[URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)和此博客文章了解详细信息：

*   [使用 IIS URL 重写模块和正则表达式进行 URL 重写简介](http://www.domagojsalopek.com/Details/Introduction-to-URL-Rewriting-using-IIS-URL-Rewrite-Module-and-Regular-Expressions/26/CommentPage)

# .htaccess - 通过使用 htaccess 分析查询字符串来重定向特定的 URL

> ID：13024858
> 
> 赞同：0
> 
> 时间：2012-10-23T06:43:15.903
> 
> 标签：.htaccess, redirect, query-string

在我当前的网站上，我使用查询字符串中的参数来选择向用户显示的内容（例如 www.domain.tld/index.php?site=linklist&page=2）。我想切换到 wordpress 并将所有旧链接重定向到 wordpress 的新永久链接。

当有`site=linklist`查询字符串时，用户应该被重定向到 www.domain.tld/my-new-linklist 。如果查询字符串包含`site=about`用户应重定向到 www.domain.tld/about-me ，...

如何使用 htaccess 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:29:20.700

在文档根目录的 htaccess 文件中，尝试在任何 wordpress 规则上方添加这些：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (^|.*)site=linklist&?($|.*)
RewriteRule ^/?index.php$ /my-new-linklist?%1%2 [L,R=301]

RewriteCond %{QUERY_STRING} (^|.*)site=about&?($|.*)
RewriteRule ^/?index.php$ /about-me?%1%2 [L,R=301] 
```

等等

任何其他查询字符串都会被传递，但会`site=something`被删除。

# websphere - 避免在 Websphere Liberty Profile 的默认配置阶段创建 slf4j / logback 记录器

> ID：13024861
> 
> 赞同：3
> 
> 时间：2012-10-23T06:43:23.753
> 
> 标签：websphere, osgi, slf4j, websphere-liberty

在 Websphere Liberty Profile 8.5 上部署 Enterprise Bundle Archive - EBA（包含多个蓝图服务）时，我在启动时收到以下错误消息。

```
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: The following loggers will not work because they were created
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: during the default configuration phase of the underlying logging system.
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: See also http://www.slf4j.org/codes.html#substituteLogger
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: some.package.containing.blueprint.service.MyService1
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: some.package.containing.blueprint.service.MyService2
[23/10/12 8:07:32:725 CEST] 0000001d SystemErr R SLF4J: some.package.containing.blueprint.service.MyService3 
```

尽管 EBA 运行良好，但不会为 EBA 中包含的所有蓝图服务生成日志记录输出。（因为它们被无操作记录器取代）

EBA 在带有 OSGI Enterprise Pack 的 Websphere 8.0 上部署良好，并且日志记录工作正常。

就日志记录而言，EBA 包含 logback-core、logback-classic、slf4j-api 和 jcl-over-slf4j 包。

有没有办法从这些服务中获取日志，而不必求助于[http://www.slf4j.org/codes.html#substituteLogger](http://www.slf4j.org/codes.html#substituteLogger)中列出的解决方案？我想维护可以在 Websphere 8.0 和 Websphere Liberty Profile 8.5 上部署的相同 EBA 文件

# linux - 无法让 cronjob 获取服务的状态

> ID：13024864
> 
> 赞同：3
> 
> 时间：2012-10-23T06:43:38.637
> 
> 标签：linux, bash, cron, upstart

当系统重新启动时，我正在使用 Upstart 运行几个服务。这些服务应该始终运行。我注意到其中一些最终崩溃了，所以我正在尝试（没有成功）创建一个看门狗脚本。

此脚本将检查服务的状态。如果服务关闭，那么它应该启动服务并向我发送有关该问题的电子邮件。电子邮件脚本在 php 中，没问题。

看门狗 bash 脚本的问题在于，如果我手动启动脚本，我只能执行脚本并读取服务的状态。当使用 cronjob 执行脚本时，我得到“空状态”输出。

我将向您展示脚本：

```
#!/bin/bash
# Check the service
status=$(status SERVICE | awk '{print $2}')
echo "Status of the SERVICE: $status" 
```

当我手动执行它时，我得到：

```
Status of the SERVICE: stop/waiting 
```

如果使用 cronjob 执行它，我会得到：

```
Status of the SERVICE: 
```

如您所见，使用 cronjob 执行脚本时，我没有得到任何输出。简而言之，cronjob 正在运行，但没有向我提供服务的状态。

希望您的 X-vision 可以看到我无法看到的错误。

BR,

阿尔伯托夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:49:29.677

区别通常是环境变量。可能的路径。跑

```
which status 
```

显示它正在运行的可执行文件，然后将该完整路径放入 cron 调用中。

# c# - 如何摆脱流利的 ValidationResult 的 PropertyName 中的点

> ID：13024866
> 
> 赞同：2
> 
> 时间：2012-10-23T06:43:49.247
> 
> 标签：c#, fluentvalidation

我正在使用流利的验证，并且我已经将一些常见的电子邮件地址验证规则提取到自定义电子邮件验证器中，例如。

```
public class CustomeEmailValidator  : AbstractValidator<string>
{
    public CustomeEmailValidator (string fieldName)
    {
        RuleFor(m => m).NotEmpty().WithMessage(EmailEmptyMsg).WithName(fieldName);
        RuleFor(m => m).EmailAddress().When(x => !string.IsNullOrEmpty(x)).WithMessage(EmailInvalidMsg).WithName(fieldName);
        RuleFor(m => m).Must(x => x.Length <= 94).When(x => !string.IsNullOrEmpty(x)).WithMessage(EmailLengthMsg).WithName(fieldName);
    }
} 
```

然后在其他其他验证器中调用它

```
public class LoginModelValidator : AbstractValidator<LoginModel>
{
    public LoginModelValidator()
    {
        RuleFor(m => m.Password).NotEmpty().WithMessage(EmptyPasswordMsg);
        RuleFor(m => m.Email).SetValidator(new MediGapEmailValidator("Email"));
    }
} 
```

问题是返回错误有一个错误PropertyName of 'Email.Email' 或EmailAddress.Email 我需要它只是'Email' 或者只是一个不带点的属性名称。

我在调用 setValidator 时尝试过 OverridePropertyName

```
RuleFor(m => m.Email).SetValidator(new MediGapEmailValidator("Email")).OverridePropertyName("Email"); 
```

但这似乎不起作用。

有没有更好的方法来分解这个常见的验证码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:49:50.653

也许尝试另一种方法并使用扩展方法而不是自定义验证器。像这样：

```
public static class ValidationExtensions
{
    public static void ValidateEmail<TV>(this AbstractValidator<TV> validator, Expression<Func<TV, string>> property)
    {
        validator.RuleFor(property).NotEmpty().WithMessage(EmailEmptyMsg);
        // other rules go here...
    }
} 
```

然后，您可以从任何验证器中调用它：

```
public class UserValidator : AbstractValidator<User>
{
    public UserValidator()
    {
        this.ValidateEmail(x => x.PrimaryEmail);
        this.ValidateEmail(x => x.SecondaryEmail);
    }
} 
```

# android - 根据特定条件解析本地 xml 文件数据

> ID：13024870
> 
> 赞同：1
> 
> 时间：2012-10-23T06:43:52.580
> 
> 标签：android

如何使用本地解析`XML`根据特定条件显示标签值。`XML`

例如，我将此`XML`文件存储在资产文件夹中，

```
<language>
<languagename>English</languagename>
<contact>EContact</contact>
<update>EUpdate</update>
</language>

<language>
<languagename>Hebrew</languagename>
<contact>HContact</contact>
<update>HUpdate</update>
</language> 
```

我有两个按钮，当我点击 English 我想显示关于英语的数据，当我点击希伯来语时，我只想显示希伯来语。请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:34:37.067

这是 XML 解析器函数，它将 XML 作为字符串。

```
public class XMLParser {
    public static void parser(String s) {
        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            MyXMLhandler h = new MyXMLhandler();
            xr.setContentHandler(h);
        //  Log.e("string", s);
            xr.parse(new InputSource(new StringReader(s)));

        } catch (ParserConfigurationException e) {
            Log.e("ParserError", e.getMessage());
        } catch (SAXException e) {
            Log.e("SAXError", e.getMessage());
        } catch (IOException e) {
            Log.e("IOError", e.getMessage());
        }

    }
} 
```

使用这个处理程序类来提取你需要的信息：

```
public class MyXMLhandler extends DefaultHandler {
private boolean language = false;
private boolean languagename = false;
private boolean contact = false;
private boolean update = false;

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if (localName.equalsIgnoreCase("language")) {
        language = true;
    } else if (localName.equalsIgnoreCase("languagename")) {
        languagename = true;
    } else if (localName.equalsIgnoreCase("contact")) {
        contact = true;
    } else if (localName.equalsIgnoreCase("update")) {
        update = true;
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if (localName.equalsIgnoreCase("language")) {
        language = false;
    } else if (localName.equalsIgnoreCase("languagename")) {
        languagename = false;
    } else if (localName.equalsIgnoreCase("contact")) {
        contact = false;
    } else if (localName.equalsIgnoreCase("update")) {
        update = false;
    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (language == true) {
        String s = new String(ch, start, length);

        Log.w("Language", s);

    }
    if (languagename == true) {
        String s = new String(ch, start, length);

        Log.w("Languagename", s);

    }
    if (contact == true) {
        String s = new String(ch, start, length);

        Log.w("contact", s);

    }
    if (update == true) {
        String s = new String(ch, start, length);

        Log.w("update", s);

    }

} 
```

}

使用上面的这个函数并修改它来解决你的问题

# php - json 编码 php 用于从数据库中获取数据并将其显示到图

> ID：13024872
> 
> 赞同：0
> 
> 时间：2012-10-23T06:43:53.853
> 
> 标签：php, mysql, json

我编写了以下代码来从数据库中获取数据：

```
$result = mysql_query("select projid,projname,enddate,status from projects where kunnr='".$_SESSION["kunnr"]."'");
$model['dash']=array();
while($row = mysql_fetch_array($result)){
    array_push($model['dash'],
        array(
            "id"=>$row["projid"],
            "projname"=>$row["projname"],
            "enddate"=>$row["enddate"],
            "status"=>$row["status"],

        ));
}

and the following code for showing these data on the graph(chart)..
$(document).ready(function() {
      chart1 = new Highcharts.Chart({
         chart: {
            renderTo: 'container1',
            type: 'column'
         },
         title: {
            text: 'Service Calls-Days Over'
         },
         xAxis: {
            categories:[ <?php foreach($model["dashchart"] as &$obj){?>
                           '<?php echo $obj["name"];?>',
                           <?php }?>]
         },
         yAxis: {

         },
         series: [{
            name: 'Service Calls-Days Over',
            color:'#e48801',
            data: [<?php foreach($model["dashchart"] as &$obj){?>
                     <?php echo  $obj["days"];?>,
                           <?php }?>]
         }
         ]
      }); 
```

在这里我使用了php编码，但我想通过json编码来做......请建议我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:57:06.910

请尝试使用 jQuery.getJSON [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:53:02.890

使用 json_encode.. 例如：

```
categories: <?php echo json_encode($model["dashchart"]); ?> 
```

# android - 当管理员将请求从我的服务器发送到他的 Android 应用程序时，停止工作我的 Android 应用程序？

> ID：13024877
> 
> 赞同：0
> 
> 时间：2012-10-23T06:44:20.713
> 
> 标签：android

我有一个疑问，即当我将请求从我的服务器发送到我的 android 应用程序时如何停止我的应用程序。该应用程序在从服务器接收此类命令时不应在该 android 设备中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:07:40.127

1.  设置[GCM](http://developer.android.com/guide/google/gcm/index.html)
2.  具有作为停止信号的预定义 GCM 消息
3.  当您收到消息时，请停止该应用程序的工作。

替代方法（无 GCM）

1.  让您的应用在每次启动时访问远程服务器上的 Web 服务或文本文件或其他内容
2.  如果来自服务器的响应等于 1，那么继续工作。如果响应为 0，则停止应用程序工作。

# windows-phone-7 - 什么是 Windows Phone 7/8 设备驱动程序型号？

> ID：13024878
> 
> 赞同：0
> 
> 时间：2012-10-23T06:44:22.907
> 
> 标签：windows-phone-7

Windows Phone 7/8 的设备驱动程序型号是什么？有时我听说 Windows 使用与 iOS 相同的理念，其中应用程序可以在桌面和移动设备上运行，所以我的印象是 Windows 7（桌面）和 Windows Phone 7 都将有共同的设备驱动程序模型可能是 WDF（Windows 驱动程序基础） ?

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:11:23.957

你错过了什么。

有：

*   Windows Phone 7 应用程序。您只能在 WP7 和 WP8 设备（或台式电脑上的模拟器）上运行它们。
*   Windows Phone 8 应用程序。它们可以在 WP8 设备和模拟器中运行。
*   Windows 8（又名 WinRT，Windows 应用商店）应用程序。它们可以在 Windows 8 pro 下的台式电脑和 Windows 8 RT 下的便携式电脑上运行。

此外，WP8 和 WinRT 应用程序可以使用类似的 API，因此您可以共享 dll。但是对于这两个平台，您将有不同的构建。

# javascript - querySelectorAll 无效语法

> ID：13024879
> 
> 赞同：2
> 
> 时间：2012-10-23T06:44:33.197
> 
> 标签：javascript, firefox, css-selectors, selectors-api

尝试在错误控制台中执行这两个代码块：

第一。输出节点列表。

```
var selector = "*[data-type=day][data-day='23']";
var a = document.querySelectorAll( selector );
alert( a ); 
```

第二个。产生错误。

```
var selector = "*[data-type=day][data-day=23]";
var a = document.querySelectorAll( selector );
alert( a ); 
```

为什么`data-type=day`语法是好的而`data-day=23`不是？属性值是否应该始终包装为`data-type='day'`？

这是例外情况，在第二种情况下会引发：

> *[异常...“指定了无效或非法的字符串”代码：“12”nsresult：“0x8053000c（SyntaxError）”]*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T06:47:32.950

浏览器只是遵循[规范](http://www.w3.org/TR/selectors/#attribute-selectors)，上面写着：

> 属性值必须是 CSS 标识符或字符串。

和[标识符](http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)：

> 在 CSS 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 ( _); 他们**不能以数字开头**……</p>

因此`23`（以数字开头）必须表示为[字符串](http://www.w3.org/TR/CSS21/syndata.html#strings)：

> 字符串可以用双引号或单引号写入

# java - 如何从源文件中提取 JavaDoc 注释

> ID：13024881
> 
> 赞同：8
> 
> 时间：2012-10-23T06:44:35.493
> 
> 标签：java, javadoc

如何从 Java 源文件中提取 JavaDoc 注释？以及我想要的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:23:50.897

有关标准方法，请参见[Javadoc Tool Home Page的](http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html)**Doclets**部分。

> **Doclets**标准的 doclet 生成 HTML 并内置在 Javadoc 工具中。此处列出了 Java Software 开发的其他 doclet。..

特别参见[Example - Subclassing the Standard Doclet](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/doclet/overview.html#custom) & the [Doclet API](http://docs.oracle.com/javase/7/docs/jdk/api/javadoc/doclet/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:21:44.733

使用 javadoc *.java 生成它们，然后根据需要重写 stylesheet.css...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T02:16:31.827

作为替代方案，您可以考虑我编写的一个名为 的类[`FilteredLineIterator`](http://aliteralmind.com/docs/computer/programming/xbnjava/documentation/javadoc/com/github/xbn/linefilter/FilteredLineIterator.html)，它可用于从源文件中抓取所有 JavaDoc 行。

（这个答案类似于我在[这个问题](https://stackoverflow.com/questions/22255198/how-to-extract-body-of-asterisk-indented-javadoc-block-in-source-code)中写的那个。）

A`FilteredLineIterator`是一个字符串迭代器，它根据每行存在的“实体”（单行、块和“隐形”块）过滤（保留或抑制）另一个迭代器中的元素。可以选择修改保留的行。

*（`FilteredLineIterator`是[XBN-Java](http://xbnjava.aliteralmind.com)的一部分。可以在[这里](http://aliteralmind.com/docs/computer/programming/xbnjava/documentation/javadoc/overview-summary.html#install)下载 Jar 。）*

示例顶部和设置：

```
 import  com.github.xbn.linefilter.FilteredLineIterator;
   import  com.github.xbn.linefilter.KeepUnmatched;
   import  com.github.xbn.linefilter.Returns;
   import  com.github.xbn.linefilter.entity.BlockEntity;
   import  com.github.xbn.linefilter.entity.EntityRequired;
   import  com.github.xbn.linefilter.entity.KeepMatched;
   import  com.github.xbn.linefilter.entity.NewBlockEntityFor;
   import  com.github.xbn.linefilter.entity.NewStealthBlockEntityFor;
   import  com.github.xbn.linefilter.entity.StealthBlockEntity;
   import  com.github.xbn.testdev.GetFromCommandLineAtIndex;
   import  com.github.xbn.util.IncludeJavaDoc;
   import  java.util.Iterator;
/**
  <P>{@code java ExtractAllJavaDocBlockTextRaw examples\com\github\xbn\examples\linefilter\JavaClassWithOneCommentAndTwoJavaDocBlocks_input.txt}</P>
 **/
public class ExtractAllJavaDocBlockTextRaw  {
  public static final void main(String[] cmd_lineParams)  {
     //Example setup:
        Iterator<String> rawInputLineItr = GetFromCommandLineAtIndex.fileLineIterator(
           cmd_lineParams, 0,
           null);   //debugPath 
```

主要部分从下面开始。JavaDoc 块被定义为[块实体](http://aliteralmind.com/docs/computer/programming/xbnjava/documentation/javadoc/com/github/xbn/linefilter/entity/BlockEntity.html)，其中仅保留中间（不是开始或结束）行。为了防止不正确的“在块打开之前找到结束行”错误——因为 JavaDoc 和“正常”（非 JavaDoc）多行注释的结束行是——必须声明正常多行注释的`*/`隐蔽[块。](http://aliteralmind.com/docs/computer/programming/xbnjava/documentation/javadoc/com/github/xbn/linefilter/entity/StealthBlockEntity.html)

输入的原始线迭代器和两个实体都被馈送到过滤的线迭代器。

```
 StealthBlockEntity javaMlcBlock = NewStealthBlockEntityFor.javaComment(
        "comment", IncludeJavaDoc.NO,
        null,       //dbgStart (on=System.out, off=null)
        null,       //dbgEnd
        KeepMatched.NO, EntityRequired.YES, null,
        null);      //dbgLineNums

     BlockEntity javaDocBlock = NewBlockEntityFor.javaDocComment_Cfg(
        "doccomment",
        null,       //dbgStart
        null,       //dbgEnd
        EntityRequired.YES, null,
        null).      //dbgLineNums
        keepMidsOnly().build();

     FilteredLineIterator filteredItr = new FilteredLineIterator(
        rawInputLineItr, Returns.KEPT, KeepUnmatched.NO,
        null, null,    //dbgEveryLine and its line-range
        javaMlcBlock, javaDocBlock);

     while(filteredItr.hasNext())  {
        System.out.println(filteredItr.next());
     }
  }
} 
```

输出（输入文件在这个答案的底部）：

```
 <P>The main class JavaDoc block.</P>
      <P>Constructor JavaDoc block</P>
      * <P>Function JavaDoc block.</P>

      * <P>This function does some stuff.</P>

      * <P>Lots and lots of stuff.</P> 
```

要从每一行中去除可选的星号，包括任何前面的空格，请在 JavaDoc 块实体中添加一个“中间行更改器”：

```
TextLineAlterer asteriskStripper = NewTextLineAltererFor.replacement(
   Pattern.compile("[ \t]*(?:\\*[ \t]*)?(.*)"), "$1",
   ReplacedInEachInput.FIRST,
   null,       //debug
   null); 
```

`keepMidsOnly().build();`通过更改为将更改器添加到块实体

```
midAlter(asteriskStripper).keepMidsOnly().build(); 
```

输出：

```
<P>The main class JavaDoc block.</P>
<P>Constructor JavaDoc block</P>
<P>Function JavaDoc block.</P>

<P>This function does some stuff.</P>

<P>Lots and lots of stuff.</P> 
```

输入文件：

```
/*
   A Java comment block.
 */
package  fully.qualified.package.name;
/**
   <P>The main class JavaDoc block.</P>
 */
public class StayClassy  {
   /**
      <P>Constructor JavaDoc block</P>
    */
   public StayClassy()  {
      //Do stuff
   }
   /**
      * <P>Function JavaDoc block.</P>

      * <P>This function does some stuff.</P>

      * <P>Lots and lots of stuff.</P>
    */
   public void doStuff()  {
   }
} 
```

# php - php中的fileupload（）不能与会话一起使用

> ID：13024882
> 
> 赞同：1
> 
> 时间：2012-10-23T06:44:36.873
> 
> 标签：php, session, file-upload

我正在尝试使用`fileupload()`php 中的函数上传 pdf 文件。这在不使用会话但会话出错时非常有效。

这就是我定义会话的方式：

```
 session_start();
if(isset($_SESSION['name']))
{
$name=$_SESSION['name'];
$_SESSION['name']=$name; 
```

这是 fileupload() 函数：

```
function fileupload()
{
$corname = $_POST['corname'];
 define ("FILEREPOSITORY","./upload");

$filename = './upload/'.$corname.'.pdf';
//echo $filename;

   if (is_uploaded_file($_FILES['file']['tmp_name'])) 
   {

      if ($_FILES['file']['type'] != "application/pdf") 
      {
         echo "<p>Class notes must be uploaded in PDF format.</p>";
      } 

     else if(file_exists($filename))
        {
      echo "already exist";
       }

        else 
      {
         //$name = $_POST['corname'];
         $result = move_uploaded_file($_FILES['file']['tmp_name'], FILEREPOSITORY."/$corname.pdf");
         if ($result == 1) 
            {echo "<p>File successfully uploaded.</p>";
            $cata=$_POST['cata'];
$subcata=$_POST['subcata'];
$corname = $_POST['corname'];
$heading=$_POST['headng'];
$descrip=$_POST['descrip'];
$cno=$_POST['cno'];
$credit=$_POST['credit'];
$fee=$_POST['fee'];
            $qry="insert into course (catagory,subcatagory,courseno,coursename,heading,description,credit,fee,coursefilename) values ('$cata','$subcata','$cno','$corname','$heading','$descrip','$credit','$fee','$corname')";
$ins_qry=mysql_query($qry);
if($ins_qry)
{
echo "Successfully Inserted<br>";
}
else
{
echo mysql_error();
}}
         else {echo "<p>There was a problem uploading the file.</p>";}
       } #endIF
   } #endIF

}} 
```

这是我收到的错误消息：

> 致命错误：在第 66 行调用 C:\wamp\www...\course_submit_process.php 中未定义的函数 fileupload()

我已经检查了所有内容是否存在错误，但无法找到任何解决方案。如果我遗漏了什么，请告诉我。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:47:41.817

您没有包含包含该`fileupload()`方法的文件。

所以最重要的是`course_submit_process.php`：

```
include "file_containing_fileupload()"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:51:10.710

在发布的代码中，您不会以 } 结束第一个 IF 条件。如果 fileupload() 函数跟随，这可能会导致您的问题。

“未定义”函数与您是否启动 PHP 会话无关。因此，请查看错误消息。当函数在首次调用时未知时，会发生“未定义”错误。

# android - 如何通过单击照片浏览 android 的内部和外部存储 (sdcard)？

> ID：13024885
> 
> 赞同：0
> 
> 时间：2012-10-23T06:45:03.453
> 
> 标签：android, android-sdcard

我有这个场景

[http://www.cubixshade.com/images/test_photo.jpg](http://www.cubixshade.com/images/test_photo.jpg)

打开上面的url，我想要一个点击照片框浏览sdcard图片的界面？

android sdk 是否提供任何从 sd 卡浏览图像并显示在 android 应用程序中的组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:56:26.087

是的，有两种情况可以从 SD 卡图像中选择图像。

1.  打开本机图库并从中选择图像（检查[此](https://stackoverflow.com/a/5309217/379693)答案）
2.  通过为您的 ListView/GridView 定义自定义适配器来自定义图库，从中选择图像（查看此示例：[Android – 从图库中选择多张照片](http://www.technotalkative.com/android-select-multiple-photos-from-gallery/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:50:15.900

这是伪代码：

```
String pathToSdCard = Environment.getExternalStorageDirectory().getAbsolutePath();
new File(pathToSdCard ).list(); 
```

并检查[链接](https://stackoverflow.com/questions/2895640/file-explorer-in-android)

谢谢

# sockets - Symbian：如何正确取消长异步套接字操作

> ID：13024888
> 
> 赞同：0
> 
> 时间：2012-10-23T06:45:12.423
> 
> 标签：sockets, symbian

我有一个简单的问题就是关心我。这是关于 Symbian 中的 Sockets API。

我应该如何关闭当前的长异步操作？例如，如果我做类似`CSecureSocket::StartClientHandshake`GPRS 的操作，它的操作会很长。如果我想关闭我的应用程序，我应该称之为`Cancel()`同步操作。我正在等待大约 3 分钟，而`CSecureSocket::StartClientHandshake`将完成。

这不是我想要的。相反，我打电话给`CSecureSocket::Close()`. 它打破了我的握手过程，关闭了套接字。但是下次我收到`MyClass::Run`带有错误的回调时`Canceled`。如果我不关闭我的应用程序，这很正常。但是如果我删除我的`MyClass`.

如果我想删除`MyClass`，`~MyClass`应该调用，`Cancel()`但它会让我等待大约 3 分钟。

这是我的问题：我应该如何关闭长异步操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:26:34.043

AFAIK 调用 Close 应该在内部为所有正在运行的操作调用 Cancel。这就是您收到此已取消通知的原因。因此，当删除您的 MyClass 时，还要调用 Close，而不是 Cancel。

# android - Android Scroller：当前速度计算

> ID：13024902
> 
> 赞同：0
> 
> 时间：2012-10-23T06:46:26.240
> 
> 标签：android, scroller

前段时间我开始为我的目的编写某种列表视图，昨天我因为滚动行为发生了一些奇怪的事情而感到沮丧。我已经阅读了默认`android.widget.Scroller`类实现的源代码，并注意到事情比看起来更简单。有运动学定律就像石头一样。不幸的是，当我决定在投掷时在某个点增加减速时，我注意到当前速度并不总是正确计算。在查看了 Scroller 源代码后，我意识到当前速度的计算总是不正确的。有一种隐藏方法可以计算滚动条的当前速度：

```
/**
 * @hide
 * Returns the current velocity.
 *
 * @return The original velocity less the deceleration. Result may be
 * negative.
 */
public float getCurrVelocity() {
    return mVelocity - mDeceleration * timePassed() / 2000.0f;
} 
```

正如你所看到的`Vfinal = Vsource - a * t / 2`……但是除以 2 是为了什么？？？由于我已将其更改为物理上正确的方法

```
public float getCurrVelocity() {
    return mVelocity - mDeceleration * timePassed() / 1000.0f;
} 
```

我的弹簧效果很好。

所以问题是为什么要除以2？或者这只是一个错误，因为这个方法是隐藏的并且没有在 Scroller 类中本地调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:14:44.673

我认为 Scroller 类也有问题，但我没有像你那样仔细评估代码。

我建议改用新的 android.widget.OverScroller 类。它似乎可以更正确地处理各种速度。它是在 API 级别 9 中添加的，即姜饼。

# json - 如何在 windows8 搜索魅力栏中自动完成查看 JSON 数据？

> ID：13024904
> 
> 赞同：0
> 
> 时间：2012-10-23T06:46:32.030
> 
> 标签：json, windows-8, windows-runtime, winjs

嗨，我正在 VS 2012 中使用 HTML5 和 Javascript 开发一个 windows8 应用程序。

我需要提供搜索功能，就像用户在搜索栏中搜索任何内容时，数据应显示在搜索自动完成中。数据以 JSON 格式提供，点击此 URL“http://healthkartplus.com/webservices/search/both?name=crocin”并获得结果。如果有人知道，请帮助我。

以下是我在搜索栏中搜索 crocin 时的结果。我想要这个 JSON 的结果数据。

```
 {"status":0,"errors":null,"op":"searching","result":[{"id":26725,"mfId":55078,"label":"Crocin (1000 mg) 40 Tablet(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin (1000 mg)","type":"drugs","packSize":"40 Tablet","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":27050,"mfId":55078,"label":"Crocin (15 ml) 15 ml(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin (15 ml)","type":"drugs","packSize":"15 ml","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":26696,"mfId":55078,"label":"Crocin (500 mg) 15 Tablet(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin (500 mg)","type":"drugs","packSize":"15 Tablet","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":27014,"mfId":55078,"label":"Crocin (60 ml) 60 ml(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin (60 ml)","type":"drugs","packSize":"60 ml","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":26780,"mfId":55078,"label":"Crocin (650 mg) 10 Tablet(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin (650 mg)","type":"drugs","packSize":"10 Tablet","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":26933,"mfId":55078,"label":"Crocin DS (60 ml) 60 ml(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin DS (60 ml)","type":"drugs","packSize":"60 ml","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":27035,"mfId":55078,"label":"Crocin Paed (15 ml) 15 ml(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin Paed (15 ml)","type":"drugs","packSize":"15 ml","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":64010,"mfId":55078,"label":"Crocin Pain Relief Tab   10 x 1(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin Pain Relief Tab  ","type":"drugs","packSize":"10 x 1","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."},{"id":26733,"mfId":55078,"label":"Crocin Quik (500 mg) 10 Tablet(Glaxo Smithkline Pharmaceuticals Ltd.)","name":"Crocin Quik (500 mg)","type":"drugs","packSize":"10 Tablet","manufacturer":"Glaxo Smithkline Pharmaceuticals Ltd."}],"hasMore":false,"suggestions":[]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:02:43.613

搜索合同示例应用程序显示了如何执行此操作。

# android - 如何在同一页面中加载 WebView

> ID：13024905
> 
> 赞同：1
> 
> 时间：2012-10-23T06:46:38.957
> 
> 标签：android, webview

我在单一布局中创建了一个 edittext 和一个 go 按钮和一个 webview。当一个人输入一个 url 并点击 go 按钮时，webview 应该加载网站内容，而不是默认浏览器来加载网站我应该如何解决这个问题？

这是我的代码

xml文件

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="50dip" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
   >

    <EditText
        android:id="@+id/etenterurl"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:inputType="textUri" />

    <Button
        android:id="@+id/buttongo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="3.0"
        android:text="Go" />
 </LinearLayout>

 </FrameLayout> 
```

爪哇代码：

```
import java.util.ArrayList;

import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.EditText;
import android.annotation.SuppressLint;
import android.app.Activity;

public class MainActivity extends Activity {
EditText etenter;
Button bgo;
WebView webview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    etenter= (EditText)findViewById(R.id.etenterurl);
    bgo =(Button)findViewById(R.id.buttongo);
    webview = (WebView)findViewById(R.id.webview);
    bgo.setOnClickListener(new View.OnClickListener() {

        @SuppressLint("SetJavaScriptEnabled")
        @Override
        public void onClick(View v) {
            String url=etenter.getText().toString();
            if(url.trim().length()>0){
                webview.getSettings().setJavaScriptEnabled(true);
                webview.loadUrl("http://"+url);

            }

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:52:37.757

你必须使用`WebViewClient`

```
wbView.setWebViewClient(new MyWebViewClient());

  private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        Log.v("uuuurl",url);
        view.loadUrl(url);
        return true;
    }
} 
```

例如[见这里](http://www.technotalkative.com/android-webviewclient-example/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:50:22.623

你应该使用 WebViewClient

```
webview.setWebViewClient(new WebViewClient(){

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                Log.d("TAG", " ==> "+url);
                view.loadUrl(url);
                return true;                
            }   

        }); 
```

# sql-server - 在两个日期之间计数

> ID：13024909
> 
> 赞同：3
> 
> 时间：2012-10-23T06:46:58.917
> 
> 标签：sql-server, tsql, datetime, stored-procedures, date-range

我写了一个程序，它需要 3 个参数 StartDate、EndDate 和 TimeRange。根据 TimeRange，我的程序拆分日期并分别计算它们。这是我的程序：

```
PROCEDURE [dbo].[Procedure1] 

    @Start datetime, 
    @Finish datetime,
    @TimeRange time
AS
BEGIN

    SET NOCOUNT ON;

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, @Start + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime  < @Finish )
  select StartTime, EndTime, Count( Test.ScenarioID ) as TotalInboundArrivals
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime and Test.SessionCloseTime < TR.EndTime
    where Test.ScenarioID = 24  
    group by TR.StartTime, TR.EndTime   
END 
```

例如，

```
Start Time: 11:00
End Time: 12:00
TimeRange : 05:00

This procudure splits them like
     TimeRange    TotalCallPeaks
    11:00 11:05      12
    11:05 11:10      8
    11:10 11:15      15 
    etc.. 
```

这是我的问题：我需要同时发生的最大呼叫。换句话说，我需要通话高峰。任何建议或线索对我来说都会非常有用。

![在此处输入图像描述](../Images/385b53b2fa284302b9231bcafbe75006.png) 在这个时间范围内发生了 6 次调用，但其中 4 次是同时发生的，我想计算一下。最大点显示最大呼叫峰值。在此时间范围内发生了第 5 次和第 6 次调用，但对最大调用峰值没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:03:07.163

我为执行类似查询所做的是使用数字辅助表（例如，数字为 1 到 100 万的表）。

像拼图一样查看查询。首先，假设您有开始和结束时间。

中午 12:00 - 下午 2:00

交叉加入数字表，现在你有

```
1; 12:00pm; 2:00pm
2; 12:00pm; 2:00pm
3; 12:00pm; 2:00pm
4; 12:00pm; 2:00pm
etc... 
```

接下来，将辅助数字乘以您想要的间隔，例如 10

```
10; 12:00pm; 2:00pm
20; 12:00pm; 2:00pm
30; 12:00pm; 2:00pm
40; 12:00pm; 2:00pm
etc... 
```

接下来，将计算出的数字添加到开始时间（如果这是您的间隔单位，则以分钟为单位）使用 DATEADD 函数

```
10; 12:00pm; 2:00pm; 12:10
20; 12:00pm; 2:00pm; 12:20
30; 12:00pm; 2:00pm; 12:30
40; 12:00pm; 2:00pm; 12:40
etc... 
```

现在只获取开始时间和结束时间之间的计算时间间隔，无论是使用where子句还是您选择的范围内连接，交叉应用等......

然后，说“t1”现在是您从上述结果集中派生的表。对于每一行，选择在该时间点处于活动状态的呼叫数，如下所示：

select * FROM t1 cross apply (select sum(1) numcalls from yourtable t2 where t1.calculatedtimeinterval between t2.startdatetime 和 t2.enddatetime ) t3

赢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:25:30.767

这应该是一个 O(n log n) 算法：

1.  将所有记录转储到#temp 表中
2.  将时间范围一分为二，运行查询查看哪个时间范围的调用次数较多
    *   修剪落在另一半的记录
    *   如果两半的调用次数相同，则保留并处理两半。这可能会导致您的工作集从 2 增加到 4 等，但对于任何不能产生与其他人相同的计数的“一半”可能会再次下降
    *   如果两半都包含相同的记录：可以将此分支标记为已完成。该呼叫在整个时间范围内是同时进行的。您可以在此处停止（标记为已确定）以获取“一个答案”，也可以继续查找“所有答案”。

可以处理此问题的 SP 的草案结构：

**表：#WorkingSets**

*   分区（int）：最初是左/右，然后是 LLL/LLR/RLR 等
*   session_id ：这可以同时出现在多个分区中
*   session_start
*   session_end
*   curr_range_start
*   curr_range_end ：将开始/结束之间的范围减半
*   最终确定（位）

**变量**

*   @max_calls_per_partition ：一旦找到任何“最终”集，就被锁定

# asp.net-mvc-3 - 隐藏链接值

> ID：13024911
> 
> 赞同：0
> 
> 时间：2012-10-23T06:47:16.097
> 
> 标签：asp.net-mvc-3

这是我的 mvc3 项目代码的一部分。

```
@Html.ActionLink(item.PolicyNo, "MasterView", new { PolicyNo = item.PolicyNo }) 
```

它将“PolicyNo”传递给控制器​​，链接栏将显示此示例：“http://localhost:49237/Policy/Details1?PolicyNo=1001”

现在我的问题是如何隐藏值变成：“http://localhost:49237/Policy/Details1”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:32:30.243

我知道的唯一方法是进行发布请求而不是获取。在 post 请求中，取参数 1001 并将其添加到 session。

然后将用户重定向到操作 Details1。

将值从会话中拉出并立即显示，链接栏将仅显示 Details1。

高温高压

硅

# android - 复选框的动态多行文本在android中没有很好地对齐

> ID：13024917
> 
> 赞同：0
> 
> 时间：2012-10-23T06:47:41.373
> 
> 标签：android, android-widget

我正在尝试将动态复选框添加到布局中。只要复选框的文本是单行的，它就可以正确对齐。但是当我的文本变成多行时，它没有正确对齐，文本也没有完全显示。请按照图了解它的外观

![在此处输入图像描述](../Images/7c016c05b2eb4c1dc585a72d4655f9b2.png)

我正在写的代码是这样的

```
else if (answerType == Constants.ANSWER_CHECKBOX_TYPE) {

        final CheckBox[] rb = new CheckBox[noOfAnswers];
        for (int i = 0; i < noOfAnswers; i++) {

            LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT, 1f);
            SurveyAnswer answer = question.getAnswerList().get(i);
            rb[i] = new CheckBox(this);
            rb[i].setSingleLine(false);
            rb[i].setTextColor(Color.BLACK);
            rb[i].setText(answer.getAnsweText());
            rb[i].setTag(size);
            linear.addView(rb[i], params1);
            rb[i].setId(i + 1);
            rb[i].setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    // TODO Auto-generated method stub

                    if (isChecked == true) {

                        viewList.add(buttonView);
                    } else {

                        viewList.remove(buttonView);
                    }
                }
            });

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T06:22:01.590

而不是这个实现，我喜欢去 gridview 实现。通过使用 gridview 并在网格中添加复选框项目，我能够将其正确对齐到中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:09:51.970

在 html 中有样式选项，例如 style="float:left;" 这将直接对齐 dyna..生成的复选框。在这里尝试这样的事情。尝试为此复选框设置一些样式。

# php - 如何使用 PHP IMagick 将 CMYK/RGB TIFF 转换为 RGB JPEG

> ID：13024919
> 
> 赞同：4
> 
> 时间：2012-10-23T06:47:50.613
> 
> 标签：php, tiff, imagick, cmyk, image-conversion

我有一个 PHP 应用程序需要处理传入的 TIFF 文件。我对这个 TIFF 的色彩空间*既没有*控制也没有知识，应用程序应该将所有传入的图像存储为 RGB JPEG。

问题是，传入的 TIFF 文件是任何东西：CMYK、RGB、[某种包装在 sRGB 中的 YCbCr](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21361&p=87203&hilit=tiff#p87203)等等，我需要在保存之前以某种方式将它们转换为 RGB JPEG。

**我需要某种 PHP 中的转换函数，它使用 IMagick 扩展，它可以获取任何二进制 TIFF 数据并将其转换为正确的 RGB JPEG 二进制数据。**它需要正确处理 TIFF 图像中的不同色彩空间。任何输入文件的输出格式 (RGB JPEG) 保持不变。

以下明显的解决方案可以正确转换一些 CMYK TIFF，一些 CMYK TIFF 会反转颜色，而 YCbCr RGB TIFF 会被红色覆盖完全破坏：

```
$converter = new IMagick();
$converter->setResourceLimit(6, 1);
$converter->readImageBlob($data);

if ($converter->getImageColorspace() != IMagick::COLORSPACE_RGB
    && $converter->getImageColorspace() != IMagick::COLORSPACE_GRAY
) {
    $icc_rgb = file_get_contents('sRGB_v4_ICC_preference.icc');
    $converter->profileImage('icc', $icc_rgb);
    $converter->setImageColorspace(IMagick::COLORSPACE_RGB);
}

$converter->setImageFormat('jpeg');
$converter->setImageCompression(Imagick::COMPRESSION_JPEG);
$converter->setImageCompressionQuality(60);

$converter->resizeImage(1000, 1000, IMagick::FILTER_LANCZOS, 1, true);
$converter->stripImage();

$result = $converter->getImagesBlob(); 
```

该解决方案取自那里：[http](http://blog.rodneyrehm.de/archives/4-CMYK-Images-And-Browsers-And-ImageMagick.html) ://blog.rodneyrehm.de/archives/4-CMYK-Images-And-Browsers-And-ImageMagick.html显然，它不适用于所有色彩空间，因为它不可靠地检测它们。如您所见，它甚至使用从其主页下载的 sRGB_v4 ICC 颜色配置[文件](http://www.color.org/srgbprofiles.xalter#v4pref)。

谷歌为我找到了红色覆盖问题的一个特殊解决方案（只是转换错误之一），但它仅适用于控制台，并且当您*事先*知道您处理 YCbCr 图像时：

```
convert some.tif -set colorspace YCbCr -colorspace RGB some.jpg 
```

我可以忍受`passthru`-ing`convert`和 pass 来转换所有需要的神奇开关，但我想我需要事先检测源图像的色彩空间并在 PHP 应用程序中调用 a `identify | grep`before every`convert`是一种矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:40:59.590

我遇到过同样的问题。它也出现在[imagick 论坛](https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22148)中，并且更正被推送到 ImageMagick 6.8.0-4 中。

所以升级应该可以解决这个问题。我已经升级到 ImageMagick 6.8.1-9 并且从那以后就没有遇到过这种情况。

# ruby-on-rails - gmaps4rails 不显示给定坐标

> ID：13024920
> 
> 赞同：0
> 
> 时间：2012-10-23T06:47:52.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, google-maps, gmaps4rails

我已经让整个地图正确显示，没有任何问题。但是，地图总是在 的坐标处加载`0,0`。我知道我也正确地传递了经度和纬度。

这是该`gmaps4rails`方法接收的打印 json：

`[{"lat":40.7142,"lng":74.0064}]`

下面也是各个生产领域中使用的代码...

**看法**

```
<%= @maps %>
<%= gmaps4rails(@maps) %> 
```

**模型**

```
acts_as_gmappable :process_geocoding => false, :lat => :lat, :lng => :lng

def lat
  40.7142
end

def lng
  74.0064
end 
```

**控制器**

`@maps = Event.find(params[:id]).to_gmaps4rails`

正如您将在我的模型中看到的那样，我已决定明确传递纬度和经度。我确实使用列设置了我的数据库`latitude`，`longitude`但是，我目前正在处理测试数据，不能指望得到可靠的结果。在那之前，我将使用纽约市的坐标。

这是输出的Javascript：

```
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.auto_adjust = true;
Gmaps.map.initialize();
Gmaps.map.markers = [{"lat":40.7142,"lng":74.0064}];
Gmaps.map.markers_conf.do_clustering = true;
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
Gmaps.oldOnload = window.onload;
 window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); }; 
```

我确实得到了一个错误`Uncaught TypeError: Object #<Gmaps4RailsGoogle> has no method create_markers`。

此外，这是问题的图片（请注意地图上方的打印 json，如上面的视图代码中所做的那样）：

![一个可爱的小描述！](../Images/f21f115278b90569a6aeb66279e52a13.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:22:31.937

我通过使用 Coffeescript 解决了这个问题。在我手动复制 javascript 文件之前，因为我不想在我的应用程序上使用 Coffeescript。

我的安装错误，使用 Coffeescript。

# android - Android 的 ActionBarSherlock 导致 StackOverflowError

> ID：13024922
> 
> 赞同：4
> 
> 时间：2012-10-23T06:47:57.267
> 
> 标签：android, actionbarsherlock

我将 ActionBarSherlock 集成到我的 Android 应用程序中。它大部分运行良好，但有一个严重的例外......

当专门在 API 级别 10（对应于 Android 2.3.3）上运行时，并且仅在该版本上，当用户在两个特定活动之间导航时，会在某个时间点发生 StackOverflowError（如下所示）。调用堆栈显示此错误完全发生在 Android 框架内，与我的自定义代码无关。

我知道它与 ActionBarSherlock 相关的唯一原因是，如果我恢复对活动类的更改以便它们再次从标准 Activity 基类而不是 SherlockActivity 继承并恢复为非 Sherlock 主题，则不会发生错误.

```
FATAL EXCEPTION: main
java.lang.StackOverflowError
at com.android.internal.util.ArrayUtils.emptyArray(ArrayUtils.java:107)
at android.text.SpannableStringInternal.getSpans(SpannableStringInternal.java:269)
at android.text.SpannedString.getSpans(SpannedString.java:25)
at android.text.Styled.drawUniformRun(Styled.java:67)
at android.text.Styled.drawDirectionalRun(Styled.java:322)
at android.text.Styled.drawText(Styled.java:381)
at android.text.Layout.drawText(Layout.java:1703)
at android.text.Layout.draw(Layout.java:505)
at android.text.BoringLayout.draw(BoringLayout.java:365)
at android.widget.TextView.onDraw(TextView.java:4431)
at android.view.View.draw(View.java:6880)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.widget.FrameLayout.draw(FrameLayout.java:357)
at android.widget.ScrollView.draw(ScrollView.java:1703)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.buildDrawingCache(View.java:6640)
at android.view.View.getDrawingCache(View.java:6428)
at android.view.ViewGroup.drawChild(ViewGroup.java:1571)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.widget.FrameLayout.draw(FrameLayout.java:357)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6883)
at android.widget.FrameLayout.draw(FrameLayout.java:357)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1921)
at android.view.ViewRoot.draw(ViewRoot.java:1526)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1262)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1863) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T15:30:39.337

Android 2.x 上的 UI 线程堆栈大小小于 Android 4.x。这意味着旧版本更容易出现 StackOverflowErrors。这解释了为什么您只在旧版本上体验到这一点。

ABS 的问题在于它会自动将一些嵌套视图添加到您的布局（包含操作栏的主布局）。您可以使用**Hierarchy Viewer**查看这些额外的视图。

如果您已经有一个包含许多嵌套视图的深度布局，那么添加 ABS 可能会添加额外的视图来填满您的堆栈。

我建议您简化布局并删除一些额外的视图。在 Android 开发者博客（Romain Guy）中有一些关于如何优化布局的技巧。如果您保存大约 2-3 个视图，它应该补偿 ABS 添加的内容，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T02:55:17.267

`invalidateOptionsMenu()`当被连续调用两次（在 onResume 中，然后在 onPrepareOptionsMenu 中）时，我刚刚遇到了类似的错误。

一旦我`invalidateOptionsMenu()`从 onPrepareOptionsMenu 中删除了调用，问题就消失了。也许这不是您的情况，但只是认为我会提供它作为可能的解决方案。

# c# - NotifySourceUpdated & Binding.SourceUpdated 不工作

> ID：13024924
> 
> 赞同：3
> 
> 时间：2012-10-23T06:48:11.503
> 
> 标签：c#, wpf, xaml, data-binding

我在 ( `OnSourceUpdated`) 下面的事件没有得到处理。

**XAML：**

```
 <StackPanel x:Name="MyStackPanel" 
                Orientation="Horizontal" 
                DockPanel.Dock="Top">
        <TextBox Text="{Binding Side, Mode=TwoWay}" 
                 Width="100"/>
        <TextBlock Background="Yellow" 
                   Text="{Binding Side, Mode=OneWay, 
                                  NotifyOnSourceUpdated=True}"
                   Width="100" 
                   SourceUpdated="OnSourceUpdated"
                   Binding.SourceUpdated="OnSourceUpdated"/>
    </StackPanel> 
```

**C＃：**

```
....
MyStackPanel.DataContext = new MyItemClass() { Side = "Test" };
....

private void OnSourceUpdated(Object sender, DataTransferEventArgs args)
{
    var i = args.Property;
}

public class MyItemClass : INotifyPropertyChanged
{
    private string _side;
    public string Side
    {
        get { return _side; }

        set 
        {
            _side = value;
            OnPropertyChanged("Side");
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion
} 
```

我已经完成了所有相关设置，例如`NotifyOnSourceUpdated`& `SourceUpdated`&`Binding.SourceUpdated`等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T07:17:20.100

来自[msdn](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.sourceupdated.aspx)：**Binding.SourceUpdated**附加事件在值从绑定目标传输到绑定源时发生，但仅适用于 NotifyOnSourceUpdated 值设置为 true 的绑定

在 TextBlock 的 Binding 中，没有从绑定目标 ( `TextBlock.Text`) 到绑定源 ( `Side`) 的值传递。因此 SourceUpdated 不能被触发。

相反，可以在第一次绑定时触发 SourceUpdated。实际上，这里的目标绑定`TextBox.Text`可以更改绑定源 ( `Side`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:59:17.383

也许我遗漏了一些东西，但我认为你的更新方法有点奇怪。你有理由不只是一起去吗

```
<TextBlock Text="{Binding foo, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" ... /> 
```

如果您只对来自源的更新感兴趣，那通常是这样做的方式。打电话

```
OnPropertyChanged( "PropertyName" ) 
```

涵盖其余部分。

# c++ - coredump：读取文件内容到 std::string

> ID：13024925
> 
> 赞同：2
> 
> 时间：2012-10-23T06:48:14.790
> 
> 标签：c++, stl, coredump

将文件内容读取到 std::string 时遇到核心转储。代码如下：

```
bool readContentFromFile(const char* fileName, std::string& content)
{
    std::ifstream t(fileName);
    if(!t) {
        return false;
    }

    t.seekg(0, std::ios::end);   
    content.reserve(t.tellg());
    t.seekg(0, std::ios::beg);

    content.assign((std::istreambuf_iterator<char>(t)),
                std::istreambuf_iterator<char>());
    return true;
} 
```

但有时代码会导致 coredump 如下：

```
...
#4  <signal handler called>
#5  0x00007f347a0f3945 in raise () from /lib64/libc.so.6
#6  0x00007f347a0f4f21 in abort () from /lib64/libc.so.6
#7  0x00007f347a953504 in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6
#8  0x00007f347a951946 in ?? () from /usr/lib64/libstdc++.so.6
#9  0x00007f347a951973 in std::terminate() () from /usr/lib64/libstdc++.so.6
#10 0x00007f347a951a5a in __cxa_throw () from /usr/lib64/libstdc++.so.6
#11 0x00007f347a8ef2ba in std::__throw_ios_failure(char const*) () from /usr/lib64/libstdc++.so.6
#12 0x00007f347a901317 in std::basic_filebuf<char, std::char_traits<char> >::underflow() () from /usr/lib64/libstdc++.so.6
#13 0x00000000004c2751 in char* std::string::_S_construct<std::istreambuf_iterator<char, std::char_traits<char> > >(std::istreambuf_iterator<char, std::char_traits<char> >, std::istreambuf_iterator<char, std::char_traits<char> >, std::allocator<char> const&, std::input_iterator_tag) ()
#14 0x00000000004c281b in std::string& std::string::_M_replace_dispatch<std::istreambuf_iterator<char, std::char_traits<char> > >(__gnu_cxx::__normal_iterator<char*, std::string>, __gnu_cxx::__normal_iterator<char*, std::string>, std::istreambuf_iterator<char, std::char_traits<char> >, std::istreambuf_iterator<char, std::char_traits<char> >, std::__false_type) ()
#15 0x00000000004bf225 in readContentFromFile(char const*, std::string&) () 
```

从上面的代码片段中，`underflow`函数中抛出了异常。但我不知道为什么抛出异常。该文件可能在读取时被删除，但代码中的哪个语句可能导致抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:56:46.813

从堆栈跟踪中可以清楚地看出异常是从`content.assign`. 看起来`string::assign`是一个内联函数，它调用`std::string::_M_replace_dispatch`. 您可以通过查看头文件或使用调试器来检查这一点。这能回答问题吗？

# python - Python 模运算符给出了意想不到的结果

> ID：13024926
> 
> 赞同：1
> 
> 时间：2012-10-23T06:48:18.710
> 
> 标签：python, modulo

我是 Python 新手，对模数有疑问。

这是代码：

```
for i in range(ord('a'), ord('z')+1):
    print chr(((i+2) % 97) + 97 ) 
```

预期的结果是`cdef...a`。但是，一旦我们到达`z`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T06:51:34.707

因为 97 不是您想要换行的 - 您想要换行`ord('z')`= 122，然后添加`ord('a')`(97) 的值。

您真正需要做的全部数学运算是转换为偏移量，然后返回到集合。例如...

```
for i in range(ord('z') - ord('a') + 1): # equivalent to range(26); i.e. 0-25
    print chr(((i+2) % 26) + ord('a')) # results in 2+97 'c', 3+97 'd', etc. 
```

* * *

您现有代码不起作用的原因是因为您`i+2`将始终大于 97（因为您`i`从`ord('a')`97 开始，然后从那里上升），所以`% 97`实际上是 just `- 97`，因此您的打印行实际上是这样的：

```
print chr(((i+2) - 97) + 97 ) 
```

这减少到...

```
print chr((i+2) - 97 + 97) 
```

这显然只是`print chr(i+2)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:52:47.993

您应该以 26 为模（英文字母表中的字母数）。此代码将起作用：

```
for i in range(ord('a'), ord('z') + 1):
   j = i - ord('a')
   print chr(ord('a') + (j + 2) % 26) 
```

## 解释

考虑这个索引模板：

```
A + (j + B) % C 
```

它将不同的值映射`j`到 range `A … (A + C - 1)`。最初，您选择了`A = 97`and `C = 97`，因此您将映射到 range `97 … 193`。我选择了`A = ord('a') = 97`and `C = 26`，所以我映射到范围`97 … 122`，即`ord('a') … ord('z')`。

现在关于偏移量，`B`. 您想向左旋转两个位置，因此您正确选择了`B = 2`. 但是，为了使它起作用，`a`因为第一个字母必须`0`在旋转之前进行编码。因此`j = i - ord('a')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T07:37:39.910

其他人已经回答了您的代码有什么问题。我想提出一个根本不需要处理模数的解决方案。我认为这是一种更简洁的方法，因为您不必处理使用 and 来回转换的`ord`细节`chr`。

即使您正在处理字符代码不是全部按顺序排列的外国字母，它也可以工作。

```
>>> from string import ascii_lowercase
>>> from collections import deque
>>> chrs = deque(ascii_lowercase)
>>> chrs.rotate(-2)
>>> print "".join(chrs)
cdefghijklmnopqrstuvwxyzab 
```

如果您打算将其用于某种翻译或编码，只需构建一个 dict 即可：

```
>>> tr = dict(zip(ascii_lowercase, chrs))
>>> "".join(tr.get(x, x) for x in "abcd xyz")
'cdef zab' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T07:02:34.810

在处理 mod 时，从 1 以外的数字循环可能会令人困惑。这是您的代码重构为使用 1 作为起点。

```
for i in range(ord('a'), ord('z')+1):
    print chr( (i-97+2) % 26) + 97 ) #Subtract 97, do our modulo and shift, then add 97 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T07:00:32.117

您需要将值调整为 0-26 范围，修改它，应用 mod，然后移回正确的字符范围。这里有多个步骤

```
for i in range(ord('a'), ord('z')+1):
    idx = i - ord('a')
    mod_idx = ( idx + 2 ) % 26
    c = chr( mod_idx + ord('a') )
    print( chr(c) ) 
```

这在单行中也是一样的（IMO 太丑了）

```
for i in range(ord('a'), ord('z')+1):
    print( chr((( i - ord('a')) + 2 ) % 26 + ord('a')) ) 
```

# asp.net - 如何将我的应用程序设置为在实时服务器上以英语显示所有内容（尽管有实时服务器的设置）？

> ID：13024928
> 
> 赞同：0
> 
> 时间：2012-10-23T06:48:19.877
> 
> 标签：asp.net, sql-server

我的 ASP.Net 应用程序遇到了这个问题，我不知道如何解决它：为了使与日期相关的参数在整个应用程序中相同，我通过存储的 SQL Server 从 SQL Server 获取日期程序。

我的问题是，当我在本地服务器上进行测试时，一切正常（一切都以英文显示，应该是这样），但是当我在现场（在我公司的服务器上）发布它时，与日期相关的参数（例如.月份名称）以我所在国家/地区的语言（不是英语）显示。我认为这与实时服务器的设置有关。尽管有实时服务器的本地化、设置等，我是否有可能在我的应用程序中以某种方式设置语言应该是英语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:05:11.627

您可以在 web.config 中设置它

```
<globalization uiCulture="en" culture="en-US" /> 
```

看这里： http: [//msdn.microsoft.com/en-us/library/bz9tc508 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bz9tc508(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:12:27.937

您可以通过指定全球化元素在您的 Web.Config 中管理此设置。如需参考，请参阅以下网址：http: [//msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)

设置您感兴趣的属性是“文化”和“uiCulture”。

# java - 如何在构建步骤的 config.jelly 中使用 optionalBlock

> ID：13024929
> 
> 赞同：9
> 
> 时间：2012-10-23T06:48:26.493
> 
> 标签：java, jenkins, hudson, jelly

我在创建构造函数时遇到问题，Jenkins 可以调用一些源自 Jelly 形式的 JSON 数据。为了测试，我创建了一个最小的 Jenkins 插件，其中包含`mvn hpi:create`两个自定义文件：

**src/main/resources/foo/hyde/jenkins/plugins/OptionalBlockSampleBuilder/config.jelly**

```
<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form">
<f:block>
    <table>
        <f:optionalBlock name="enableText" title="Enable optional text" checked="${instance.enableText}">
            <f:entry title="Optional text" field="text">
                <f:textbox />
            </f:entry>
        </f:optionalBlock>
    </table>
</f:block> 
```

**src/main/java/foo/hyde/jenkins/plugins/OptionalBlockSampleBuilder.java**

```
package foo.hyde.jenkins.plugins;

public class OptionalBlockSampleBuilder extends hudson.tasks.Builder {

    public final String text;
    public final boolean enableText;

    @org.kohsuke.stapler.DataBoundConstructor
    public OptionalBlockSampleBuilder(String text, Boolean enableText) {
        this.text = text;
        this.enableText = (enableText != null) && enableText;
    }

    @Override
    public boolean perform(hudson.model.AbstractBuild build, hudson.Launcher launcher, hudson.model.BuildListener listener) {
        listener.getLogger().println("OptionalBlockSampleBuilder " + enableText + "/" + text);
        return true;
    }

    @hudson.Extension
    public static final class DescriptorImpl extends hudson.tasks.BuildStepDescriptor<hudson.tasks.Builder> {
        public boolean isApplicable(Class<? extends hudson.model.AbstractProject> aClass) {
            return true;
        }
        public String getDisplayName() {
            return "Optional Block Sample";
        }
    }
} 
```

我正在针对 pom.xml parent`<groupId>org.jenkins-ci.plugins</groupId><artifactId>plugin</artifactId><version>1.454</version>`进行构建，一切都在构建，Netbeans 6.9.1 启动 Debug Jenkins，我可以通过这个构建步骤创建一个作业。如果我不选中该复选框，一切都会正常工作，并且我期望`OptionalBlockSampleBuilder false/null`工作的控制台输出。

但是，如果我确实选中了复选框并添加了文本，那么当它尝试调用我的构造函数时，保存/应用作业配置会从 Jenkins 代码的深处给出这个异常：

```
java.lang.RuntimeException:
  Failed to instantiate class
    foo.hyde.jenkins.plugins.OptionalBlockSampleBuilder 
  from {
    "enableText":{"text":"xx"},
    "kind":"foo.hyde.jenkins.plugins.OptionalBlockSampleBuilder",
    "stapler-class":"foo.hyde.jenkins.plugins.OptionalBlockSampleBuilder"
    } 
```

必须有一个简单的修复。我尝试了许多不同的更改，也尝试查看其他插件如何使用它，最后创建了这个最小的测试插件。如何修复它以使 optionalBlock 工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T17:17:39.057

提示来自 JSON 数据：

```
{
"enableText":{"text":"xx"},
"kind":"foo.hyde.jenkins.plugins.OptionalBlockSampleBuilder",
"stapler-class":"foo.hyde.jenkins.plugins.OptionalBlockSampleBuilder"
} 
```

您可以在此处看到`enableText`包含子属性的`text`. 这意味着[`f:optionalBlock`](https://jenkins-ci.org/maven-site/jenkins-core/jelly-taglib-ref.html#form:optionalBlock)实际上期望*封装*块中包含的所有字段——检查块时，您将收到封装字段类的实例；未选中时，该字段将为`null`. 要`optionalBlock`正确使用，您需要`@DataBoundConstructor`接收一个封装整个`optionalBlock`. 例如：

```
private String text;

@DataBoundConstructor
public MyClass(EnableTextBlock enableText)
{
    if (enableText != null)
    {
        this.text = enableText.text;
    }
}

public static class EnableTextBlock
{
    private String text;

    @DataBoundConstructor
    public EnableTextBlock(String text)
    {
        this.text = text;
    }
} 
```

请注意，`enableText`本例中的字段实际上是`EnableTextBlock`类的一个实例，其中包含一个子属性`text`. 这将满足在表单中发送的 JSON 对象。

* * *

相反，如果您只需要一个带有复选框以启用该字段输入的单个字段，您可能需要考虑使用[`f:optionalProperty`](https://jenkins-ci.org/maven-site/jenkins-core/jelly-taglib-ref.html#form:optionalProperty)标签，它会为您处理该单字段封装。但是，在许多情况下，`optionalBlock`实际上需要配置多个字段，在这种情况下，封装类（如上例）通常是正确的方法。

封装类不必是静态内部类；它可以是你的包中的一个单独的类，但重要的部分是它`DataBoundConstructor`应该接受一个与从表单传递的 JSON 结构相匹配的参数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-31T22:04:03.947

或者您可以`inline`像这样向 optionalBlock 添加标签：

```
<f:optionalBlock inline="true"> 
```

如果`inline`存在，可折叠部分在提交时不会被分组到单独的 JSON 对象中。

# sharepoint - 将选定的多值数据转换为字符串

> ID：13024931
> 
> 赞同：1
> 
> 时间：2012-10-23T06:48:37.663
> 
> 标签：sharepoint, infopath

我在共享点列表中有一个字段，它是从另一个列表中查找的。它在信息路径表单上显示为多值复选框。我正在尝试找出一种可能将每个选定项目连接成一个字符串的方法。

例如; 多值复选框包含（！=选中，* =未选中）

```
! Example A
* Example B
! Example C 
```

我想要一个名为 MyString 的新字段等于“示例 A，示例 C”

我试图通过按下按钮来执行规则来查询外部列表的辅助数据源，并在多值复选框值上对其进行过滤。通过对过滤器进行求和（secondary.amount），这对于获得第二列（美元金额）非常有效 - 但是我仍然无法弄清楚如何加入选定的字符串。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:59:11.863

您可以在复选框更改时运行的每个复选框都有一个规则。每个规则都会查找其他复选框值，根据需要将它们连接起来，并将最终 MyString 文本框字段的值设置为该字符串。

# android - 如何在片段的onCreateView中调用活动类

> ID：13024940
> 
> 赞同：0
> 
> 时间：2012-10-23T06:49:23.060
> 
> 标签：android, android-fragments

我有这样的代码

```
public class fragment2 extends Fragment{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    return inflater.inflate(R.layout.content, container, false);
} 
```

}

我想调用活动类而不是布局。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T08:36:47.807

您可以在片段中创建一个接口，然后在活动中实现它。然后在片段的 onAttach() 方法中设置侦听器。这在 onCreateView() 之前调用。这种模式使您的代码可重用，并且这种技术可以应用于您使用的所有活动和片段。片段的示例代码：

```
public class YourFragment extends Fragment {

    private OnItemSelectedListener onClickListener;

    public interface OnItemSelectedListener {
      //implement and use this function in your calling activity
      public void yourItemSelected(String link);
    }

    @Override
    public void onAttach(Activity activity) {
      super.onAttach(activity);
      //check that the activity implements the interface
      if (activity instanceof OnItemSelectedListener) {
        //set the listener to the calling activity
        onClickListener = (OnItemSelectedListener) activity;
      } else {
        throw new ClassCastException(activity.toString()
        + " must implement YourFragment.OnItemSelectedListener");
      }
    }

} 
```

有关更多信息，请参阅 android 文档： http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)
[http://developer.android.com/guide/components/fragments.html#Lifecycle](http://developer.android.com/guide/components/fragments.html#Lifecycle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:01:13.797

以下链接讨论了两个片段之间通过活动进行的通信..

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

相同的示例可用于从片段通信回活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:09:32.343

例如，如果您有名为 MyActivity 和 MyFragment 的活动和片段，则可以在 MyActivity 中提供一些公共方法。在 MyFragment#onCreateView() 之后，您可以调用 `String layout = ((MyActivity)getActivity()).getMyLayoutLink()`

# r - hierarchial clustering for gene expression in r

> ID：13024941
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:49:24.900
> 
> 标签：r

I have a RMA normalized genes expression datset with 22810 rows and 9 columns( types of promoters) and a subset of the data is as follows:

```
ID_REF GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
244901 5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
244902 5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
244903 5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
244904 5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
244905 5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
244906 5.786557533 5.242403911 5.060605782 5.458148567 5.890061836 
```

I want to do a clustering of the above and tried the hierarchical clustering:

```
d <- dist(as.matrix(deg), method = "euclidean") 
```

where deg is the a matrix of the differentially expressed genes ( 4300 in number ).And I get the following warning:

```
 Warning message:
 In dist(as.matrix(deg), method = "euclidean") : NAs introduced by coercion 
```

Is it allright to proceed with the clustering inspite of the warning ?

```
hc <- hclust(d)
plot(hc, hang = -0.01, cex = 0.7) 
```

I get a dendrogram which is very dense and the labels are not clear: Also I do not know which of the 9 promoters are classified in the tree for the several genes: How would it be possible to label the tree with the promoters and also how to visualize the genes into a clearer dendrogram? Iam not sure how I have to add the dendrogram here else I would .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:06:10.233

Following your comment, I can't reproduce your error. I read in the data:

```
##Read in the data
deg = read.table(textConnection("ID_REF GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
244901 5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
244902 5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
244903 5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
244904 5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
244905 5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
244906 5.786557533 5.242403911 5.060605782 5.458148567 5.890061836"), header=TRUE) 
```

I can then calculate the distance matrix:

```
R> dist(as.matrix(deg), method = "euclidean")
      1     2     3     4     5
2 1.173                        
3 4.266 3.701                  
4 3.423 2.288 3.120            
5 4.011 3.038 4.312 1.814      
6 5.282 4.204 3.912 2.109 1.957 
```

# events - 如何在 sharepoint 2010 中获取当前项目的值

> ID：13024947
> 
> 赞同：1
> 
> 时间：2012-10-23T06:49:47.400
> 
> 标签：events, sharepoint-2010, event-handling, handlers

我有一个列表（注册），其中包含用户名、密码、姓名、年龄等字段。

当将新项目添加到自定义列表时，我想向管理员发送包含所有字段（用户名、密码、年龄等）的邮件。我尝试使用添加的事件，但我无法获取新添加的项目。

它正在进入 if 循环，但在下一行我得到一个错误`object reference not set to any instance`。

提前致谢

我是 SharePoint 新手

```
 public override void ItemAdded(SPItemEventProperties properties)
   {
       base.ItemAdded(properties);
       SPWeb oSPWeb = properties.OpenWeb();

       //GETTING THE LIST NAME
       String curListName = properties.ListTitle;         

       if (curListName == "registrtion")
       {
           //FETCH THE DATA OF THE NEW ADDED ITEM IN THE LIST
          string EMPLOYEENAME = properties.AfterProperties["EMPLOYEENAME"].ToString();
        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:07:46.677

改用这个：

字符串 EMPLOYEENAME = properties.ListItem["InternalFieldName"]

确保使用字段的内部名称，在此处查看如何获取该名称：

[http://sharepoint-works.blogspot.com.au/2012/06/internal-column-name-in-sharepoint-list.html](http://sharepoint-works.blogspot.com.au/2012/06/internal-column-name-in-sharepoint-list.html)

# c++ - C++ 可执行文件生成器

> ID：13024949
> 
> 赞同：-1
> 
> 时间：2012-10-23T06:49:52.547
> 
> 标签：c++, compiler-construction, builder

我正在寻找创建一个应用程序（最好是 C++），它可以让我编译一个对源代码进行少量修改的可执行文件（这些选项将在控制台窗口中呈现给用户），例如字符串数据修改。例如，我运行应用程序 A，它提示我输入字符串值，然后输入 Y，然后使用将修改为 Y 的字符串值创建应用程序 B。

这背后的原因是我需要通过构建器生成文件，这些文件无需配置文件等即可轻松分发。

我只是想知道，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:06:27.160

通常，您不需要这样的应用程序。使用配置文件、数据文件或其他任何东西来确保您的实际程序无需重新编译即可适应，但会更改其输入数据。

示例：应用程序 A 提示您输入字符串值，您输入 Y，它将 Y 保存到配置文件，然后启动应用程序 B，该应用程序 B 从配置文件中读取该 Y。

我能想象的唯一一种情况是，当你真正想做你所描述的事情时，用户会提供你需要执行的源代码/机器代码。但话又说回来，这就是我们嵌入脚本语言和插件概念的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:21:18.280

您可以创建一个“伪”配置文件：您创建将保存到配置文件中的所有数据，然后将该数据附加到您的可执行文件中。当创建的程序运行时，它可以从执行文件中读取数据。

# iphone - iPhone 推送通知信息

> ID：13024954
> 
> 赞同：4
> 
> 时间：2012-10-23T06:50:07.913
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

是否可以在旁边的推送通知中传输任何`"badge"` `"sound"`信息`"text"`？

例如，在应用程序中`"whatsapp"`，当出现并按下推送通知时，应用程序会打开但不会进入对话。我的猜测是它不知道要进行什么对话。但后来我在 facebook messenger 应用程序中看到它实际上进入了对话。信使应用程序如何知道要进行什么对话？

另外，如果可以传输信息，为什么像`whatsapp`这样的应用程序不使用它并且还询问您的姓名以便在推送中显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:58:20.567

确实是的。但是您的消息大小（以字节为单位）不得超过 Apple 规定的某个阈值。然后，您可以使用以下方式提取该信息`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`：

```
NSDictionary* dictionary = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey]; 
```

字典包含您的推送通知信息的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:43:31.500

有些应用程序有权在后台运行，而其他应用程序则没有。可能是 facebook messenger 应用程序拥有此权限，并且可以接收推送通知并执行所需的任何操作以转到正确的对话或用户。我不知道这是不是真的，但这可能是一个可能的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T07:24:45.073

在这种方法中，我们可以根据我们的应用程序显示推送通知警报及其操作

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo   
{

    NSLog(@"did receive remore notification %@",userInfo);
    if(isForground)
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T07:01:46.613

您应该查看此文档部分[JSON 有效负载示例](http://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW15)

在底部，您可以看到自定义有效负载示例，例如：

```
{
    "aps" : {
        "alert" : "You got your emails.",
        "badge" : 9,
        "sound" : "bingbong.aiff"
    },
    "acme1" : "bar",
    "acme2" : 42
} 
```

您可以将自定义数据传递给推送通知并在启动后将其放入您的应用程序`acme1`中。`acme2`

数据可通过 UIApplicationDelegate 回调获得，如此处所述[处理本地和远程通知](http://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T07:02:01.440

您可以在有效负载中添加更多参数。在我们的应用程序中，我们添加类似 groupID 或类型的内容。请参阅此堆栈溢出以添加更多有效负载参数

[APNS JSON PAYLOAD - 更多参数](https://stackoverflow.com/questions/5954882/apns-json-payload-more-arguments)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T07:03:25.447

确保消息大小不超过**256**字节。这是有效负载的阈值限制

# android - 在android中的谷歌地图上设置缩放级别

> ID：13024957
> 
> 赞同：1
> 
> 时间：2012-10-23T06:50:16.540
> 
> 标签：android, zooming, android-mapview

我需要在谷歌地图上以最大缩放级别显示我的当前位置和目标位置。这是我的代码，以最大缩放显示两个位置。但是它缩放到两个位置的中心和我的位置都看不见了。我希望我的两个位置都应该在视图范围内，并尽可能将缩放设置为最大。请帮我。提前致谢。

```
 mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapMarker = getResources().getDrawable(R.drawable.map_marker);  

    overlayList = mapView.getOverlays();
    myMap = new MyLocationOverlay(this, mapView);
    myMap.enableMyLocation();   

    mapController = mapView.getController(); 

    GeoPoint geoPoint = new GeoPoint((int) (targetLatitude * 1E6), (int) (targetLongitude * 1E6));

    mapController.animateTo(new GeoPoint(((int) (targetLatitude * 1E6) + (int) (currentLatitude * 1E6))/2, ((int) (targetLongitude * 1E6) + (int) (curLongitude * 1E6))/2 )); 
    mapController.zoomToSpan((int)(targetLatitude - currentLatitude), (int)(targetLongitude - curLongitude));

    mapController.setZoom(12);

    OverlayItem overlayItem = new OverlayItem(geoPoint,"xxx", "yyyy");

    CustomPinpoint customPinpoint = new CustomPinpoint(mapMarker, this);
    customPinpoint.insertPinpoint(overlayItem);

    overlayList.clear();
    overlayList.add(myMap);
    overlayList.add(customPinpoint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:08:32.017

```
 int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    for (GeoPoint point : points) {
        minLat = Math.min(point.getLatitudeE6(), minLat);
        minLong = Math.min(point.getLongitudeE6(), minLong);
        maxLat = Math.max(point.getLatitudeE6(), maxLat);
        maxLong = Math.max(point.getLongitudeE6(), maxLong);
    }

    MapController controller = view.getController();
    controller.zoomToSpan(
                       Math.abs(minLat - maxLat), Math.abs(minLong - maxLong));
    controller.animateTo(new GeoPoint((maxLat + minLat) / 2,
        (maxLong + minLong) / 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:34:02.483

降低缩放级别并动画到您希望固定标记的地理点。

# string - 批量计算文本字符串

> ID：13024968
> 
> 赞同：0
> 
> 时间：2012-10-23T06:51:14.487
> 
> 标签：string, text, batch-file, count

我一直在环顾四周，我能够找到在 txt 文件中计算行数的方法，但是有没有一种方法可以计算特定的文本字符串，然后将该值放入日志文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:47:35.783

带有 /C 选项的 FIND 命令计算并打印匹配的行数。打印到屏幕上的任何内容都可以重定向到日志文件。

```
find /c "your string" yourFile >yourLog 
```

以上包括输出中的文件名。如果您只想要计数，请使用重定向或管道

```
find /c "your string" <yourFile >yourLog

or

type yourFile | find /c "your string" >yourLog 
```

以上所有内容都计算了包含字符串的*行数。*如果字符串可以在同一行中出现多次，并且您想计算*字符串*在文件中出现的总次数，那么解决方案将复杂得多。

# caching - 如何有效地计算过滤器选项的总数

> ID：13024973
> 
> 赞同：7
> 
> 时间：2012-10-23T06:51:50.550
> 
> 标签：caching, filter

我正在开发一个网上商店类型的应用程序。我经常在其他网站上看到的一个功能是过滤选项的细分，然后是过滤选项总共有多少结果。您经常在计算机网站（例如 Newegg）或二手车网站上看到这一点。例子：

```
CPU:
  * AMD (315)
  * Intel (455)

Video card:
  * ATI (378)
  * Nvidia (402) 
```

我怎样才能有效地计算这些总数？我工作的网站将有许多不同的产品（10.000+），有许多不同的选项。更糟糕的是，产品在不断变化。

试图预先计算所有不同的过滤组合总数似乎是不可行的。如果我有 5 个不同的过滤器，每个过滤器有 4 个选项，则选项可能性的数量为`20 * 16 * 12 * 8 * 4 = 122880`. 这需要很长时间才能计算出来。

另一种选择是按需查询并缓存结果（例如在 Redis 中）。但是，如果产品不断被添加和删除，我如何有效地管理缓存呢？缓存通常是陈旧的。恐怕我不得不以某种方式对缓存失效进行微观管理，从而导致实现非常复杂和脆弱。另一种方法是使缓存的广泛部分无效。但是在失效后，我的数据库将被来自需要重新计算这些总数的活跃用户的数百个查询所冲刷。

有没有一种优雅而优雅的方式来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:49:20.193

我认为为您的案例显示实时数据没有问题。不要以任何方式阻止您，但 10K 产品并不是很多，性能明智。另一方面，数百万是。

您是否真的尝试以这种方式实现它并发现它运行缓慢，或者您只是过度关注它的理论性能？我建议您按原样对系统进行一些压力测试，看看是否值得改进。不过，这里有一些想法可以让它更快：

1.  **不要一次填充所有计数**，仅在展开/单击特定类别时。所以你总是会得到一个`SELECT cat_name, COUNT(*) GROUP BY cat_name`查询，这不应该占用太多时间。像这样每次用户点击的单一且相对较轻的查询对我来说听起来很合理。

2.  **让数据库引擎为您管理缓存**。如果您经常执行类似的查询，您的数据库引擎应该自动优化底层存储（即将整个表移动到内存或类似的）。您只需要确保实例有足够的内存。

3.  **如果需要，升级服务器硬件**。如果数据量增加，您*可能*没有足够的内存来存储所有内容。不要慌，你仍然可以在服务器中放入 SSD，或者在服务器中安装 12 核 Xeon 处理器，具体取决于瓶颈所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:21:16.067

以其他方式思考并将数字保存在数据库中怎么样？您可能会使用触发器自动增加/减少计数器，以防产品被添加到给定类别中/从给定类别中删除（如果没有，它仍然可以由允许商店经理添加/删除销售产品的对话框显式处理） .

这似乎是一个很好的解决方案，因为a）我认为类别的名称已经存储在数据库中，因此询问数字会产生很少的开销，并且b）即使产品不断变化，它们很可能会发生很大变化频率低于请求频率（即使用户自己可以添加/删除产品，该频率仍然有效）。最后 c) 没有复杂的缓存方案，计数器由代码的单个部分在一个地方管理。应该很容易保持它没有错误。

# navicat - 在 Navicat 查询编辑器中注释/取消注释行的快速方法是什么？

> ID：13024975
> 
> 赞同：4
> 
> 时间：2012-10-23T06:51:57.023
> 
> 标签：navicat

在 Navicat 中，我如何在评论中包含选择？

此操作是否有键盘快捷键？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T13:23:14.660

`Ctrl + /`- 注释代码块

`Ctrl + Shift + /`- 取消注释代码块

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-11T13:55:00.517

将 -- 放在行的前面。

或者，如果您想在块的开头注释块位置 /*，在块的末尾注释 */。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-01T06:39:02.660

Navicat For Mysql 快捷键：

`Ctrl`+ `Q`- 打开一个查询窗口。

`Ctrl`+ `/`- SQL 语句中的注释或注释。

`Ctrl`++ `Shift`-`/`发布说明或取消注释查询。

`Ctrl`+ `R`- 运行所有查询的 SQL 语句窗口。

`Ctrl`++ -`Shift`仅`R`运行 SQL 选定语句。

`Ctrl`+ `N`- 打开一个新的查询窗口。

`Ctrl`+ `W`- 关闭当前查询窗口。

# c - 缓冲区溢出的编译器艺术

> ID：13024977
> 
> 赞同：8
> 
> 时间：2012-10-23T06:52:06.853
> 
> 标签：c, ubuntu, stack-overflow, shellcode

现代编译器 GCC 非常强大，它甚至可以在编译阶段防止缓冲区溢出，从而使操作系统无法在堆栈空间上运行代码。

例如：

```
void function(char *str) 
{
   char buffer[16];

   strncpy(buffer, str, 256);
}

void main() 
{
  char large_string[256];
  int i;

  for( i = 0; i < 256; i++)
    large_string[i] = 'A';

  function(large_string);
} 
```

我能得到魔法 0x41414141 的唯一方法是设置 GCC 编译参数，例如：

```
gcc -fno-stack-protector -z execstack stackoverflow.c -o stackoverflow 
```

（我在 ubuntu 10.04 x86 lucid 32bits box 上测试过）

有什么办法可以绕过 GCC 堆栈粉碎保护？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T07:10:03.450

编译时应禁用堆栈保护：

```
gcc  -fno-stack-protector -z execstack stackoverflow.c -o stackoverflow 
```

您可能还想禁用地址空间随机化 (ASLR)：

```
sudo sh -c 'echo 0 > /proc/sys/kernel/randomize_va_space' 
```

现在你可以试试缓冲区溢出了，我推荐阅读[Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html)

**编辑：**

就像我在评论中所说的那样，可以安全地假设在您的分配中禁用堆栈保护是可以接受的，但是，如果您想*绕过*堆栈保护，您应该检查 SOF 中与*金丝雀*相关的问题，例如以下问题：

[有没有办法绕过 SSP（StackSmashing Protection）/Propolice？](https://stackoverflow.com/questions/855394/is-there-any-way-to-bypass-ssp-stacksmashing-protection-propolice)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:22:56.963

当然有一些方法可以绕过堆栈粉碎保护（称为*堆栈金丝雀*），尽管在您的示例中这并不容易。[有关堆栈金丝雀的](https://stackoverflow.com/a/10335098/248066)一些弱点，请参阅我的答案。

# c# - 从 AJAX 发布的字符串中删除 BOM 字符

> ID：13024978
> 
> 赞同：1
> 
> 时间：2012-10-23T06:52:18.273
> 
> 标签：c#, .net, byte-order-mark

我的内容包含多个 BOM (EF BB BF) 字符，我想删除它们。这些字符位于字符串的中间，我想简单地将它们全部删除。

数据来自我从 CKEditor 实例中获取的 JavaScript 源。然后我发布变量并将其作为字符串读取到我的后端，BOMS 就在那里。目前，它们按原样保留，但是当字符被解释并开始显示中间内容时，这会导致后处理错误。我怀疑它们来自复制粘贴到我的 CKEditor 中的东西。

我可以逐个字符地遍历字符串，但我不知道如何与 BOM 进行比较。是否可以比较字符串字节的十六进制值并比较三个字节序列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:50:27.583

utf-8 BOM 字节被翻译成`\ufeff`. Unicode 字符“零宽度不间断空格”，看不到，听不到。过滤掉它们：

```
 var good = bad.Replace("\ufeff", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:06:26.587

尝试以下操作：

```
CleanString = DirtyString.Replace("\u00EF\u00BB\u00BF", null); 
```

# algorithm - 项目分配

> ID：13024979
> 
> 赞同：1
> 
> 时间：2012-10-23T06:52:19.913
> 
> 标签：algorithm

您好，我正在根据标题“项目分配和监控”进行最后一年的项目。我被算法困住了。我需要想出一个算法来首先将项目分配给学生而不是偏好，如果有任何冲突，然后检查学生的 CPA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:53:37.850

您应该检查网络上的**稳定匹配**和**二分图**。

# wpf - WPF 用户控件单击

> ID：13024980
> 
> 赞同：2
> 
> 时间：2012-10-23T06:52:36.870
> 
> 标签：wpf, user-controls, click

这与[SO Question 3222456](https://stackoverflow.com/questions/3222456/click-event-in-usercontrol-wpf) ....

我正在创建自己的 UserControl，上面有一些图像和 TextBlock，仅此而已。我想在单击整个 UserControl 时触发一个事件。我的问题（或误解）是在 WPF 中似乎只有我可以挂钩的 MouseUp 事件，没有 MouseClick。

那么最佳实践是什么？我能找到的所有示例都好像 WPF 中的 mouseUp 等同于单击事件，但这是不对的。如果用户在屏幕的某个部分执行 mouseDown，按住鼠标直到它超出我的控制，然后松开鼠标会怎样。即使它触发了 MouseUp 事件，这也不是我的控件的单击。

那么如何为我的 UserControl 获得真正的 MouseClick 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:53:47.727

一种非常简单的方法是将您的整个内容放入一个带有几乎空模板的按钮中并响应`Button`'s`OnClick`事件。

这看起来像

老的：

```
<UserControl ...>
  <Grid> ... </Grid>
</UserControl> 
```

新的：

```
<UserControl ...>
   <Button OnClick="YourEventHandler">
      <Grid> ... </Grid>
      <Button.Template>
        <ControlTemplate x:Key="BlankButtonTemplate" TargetType="{x:Type ButtonBase}">
           <Border Background="#00000000">
             <ContentPresenter Margin="{TemplateBinding Padding}"
                               HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                               VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
           </Border>
        </ControlTemplate>
      </Button.Template>
   </Button>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:54:42.577

为什么不直接使用 MouseDown？

将事件放在用户控件中并简单地执行以下操作：

```
 private void MyControl_MouseDown(object sender, MouseButtonEventArgs e)
 {
     if (e.ChangedButton == MouseButton.Left)
     {
         MessageBox.Show("Clicked!");
     }
 } 
```

# html - 在 HTML5 中，我应该为标签使用什么标签？

> ID：13024985
> 
> 赞同：0
> 
> 时间：2012-10-23T06:53:02.300
> 
> 标签：html, standards

我正在为我的博客创建一个模板，并决定它应该是 HTML5 兼容的。我不知道我需要使用什么标签，嗯，我博客上的标签。（例如#personal、#technology、#cooking 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:51:15.457

您正在寻找的是[microformats](https://stackoverflow.com/questions/tagged/microformats)。微格式是编写 html 标签的一种特定方式，以便它们带有额外的语义含义。

好处包括

*   它们可以帮助搜索引擎从网页中提取出有意义的信息
*   他们使用现有的 html 标签
*   在某些情况下，它们会重用现有的 html 属性
*   在某些情况下，他们会添加额外的“非标准”html 属性

缺点包括

*   因为它们没有标准化，所以不能保证特定格式是合理的。
*   也可以有多种相互竞争的微格式
*   即使您创建了微格式，也不能保证任何人或任何事物都可以读取它
*   它们可能会导致网页验证失败

更多细节可以在[http://microformats.org找到](http://microformats.org)

当然还有[http://en.wikipedia.org/wiki/Microformat#Specific_microformats](http://en.wikipedia.org/wiki/Microformat#Specific_microformats)

# html - Delphi - 如何使用 Delphi 制作所见即所得的 HTML 编辑器？

> ID：13024987
> 
> 赞同：5
> 
> 时间：2012-10-23T06:53:07.273
> 
> 标签：html, delphi, editor, wysiwyg

如何使“易于”使用 WYSIWYG 界面来制作 HTML 文件？IE 一个 HTML 编辑器。专门用于创建格式化的电子邮件信息，包括图像、超链接、字体格式、项目符号、缩进等...

注意[jd]：这是一个自我回答的问题，旨在为他人提供指导。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T06:53:07.273

来自 bsalsa.com 的 EmbeddedWB Web Browser Components 仅提供了执行此操作的工具。

编辑：bsalsa.com 不再存在。新位置： [https ://bitbucket.org/wpostma/tembeddedwb](https://bitbucket.org/wpostma/tembeddedwb)

您放置一个 EmbeddedWB（Web 浏览器）控件（窗口）来显示 HTML，例如来自网站。然后将 EditDesigner 组件放在窗体上，并将其链接到 Object Inspector - Properties 中的 EmbeddedWB 控件。

使用 EditDesigner，您可以将 WebBrowser 设置为编辑模式并进行一些基本的编辑，例如插入或删除文本或设置一些字体属性。虽然不是一个完整的编辑器。

不要绝望，这个包是对 MSHTML 编辑器的完整包装。对 EditDesigner 单元稍加添加即可让您完全访问 MSHTML execCommand 界面。

原始代码：

```
 procedure ExecCommand(Command: Widestring; ShowUI: Boolean; Value: Integer);
      begin
         if Assigned(FEmbeddedWB) then
             GetHTMLDoc2FromWB.execCommand(Command, showUI, Value);
      end; 
```

您将看到 EditDesigner.pas 中的此过程仅接受并将 Value 作为 Integer 解析到 HTMLDoc.execCommand。这就是一些命令所需要的，通常只需要 0 作为值。但是许多命令需要值的字符串信息，例如更改字体名称。HTMLDoc.execCommand 实际上会接受 Variant 作为值，因此我向 EditDesigner.pas 添加了另一个过程，如下所示，如果您知道要发送的命令，则可以几乎完全访问 MSHTML 编辑器。

```
procedure TEditDesigner.ExecCommandEx(Command: Widestring; ShowUI: Boolean; Value: OleVariant);
   begin
      if Assigned(FEmbeddedWB) then
          GetHTMLDoc2FromWB.execCommand(Command, showUI, Value);
   end; 
```

当您需要向编辑器发送更高级的命令时，您可以访问此过程。这将改变字体颜色。

```
procedure TfrmComposer.actFontColourExecute(Sender: TObject);
  begin
    if dlgColorDialog.Execute then
       begin
          EditDesigner1.ExecCommandEx('foreColor',False,dlgColorDialog.Color);
       end;
    EditDesigner1.EmbeddedWB.SetFocus;
end; 
```

这将改变字体...

```
procedure TfrmComposer.JvFontComboBoxChange(Sender: TObject);
begin
   EDewbMessageBody.ExecCommandEx('fontname',False,JvFontComboBox.FontName);
   EDewbMessageBody.EmbeddedWB.SetFocus;
end; 
```

还有一个 EditDesigner1.InsertHTML 过程可以让你插入任何你想要的东西。

快乐的德尔菲' ;)

# javascript - 提交表格当我单击 <option>时，我正在寻找一种提交表单的方法。 <select>使用说明：单击复选框，然后使用下拉菜单选择将选择的文件夹移动到哪个文件夹。这是我的表单的样子：http://jsfiddle.net/Draven/yufwu/23/ 请记住，复选框有多种用途（删除、移动到文件夹）。下拉菜单 (</select>) 正在从文件夹表中检索文件夹。我很难解释这一点，所以如果您有任何问题，请提出。编辑：感谢 NullPointer，我得到了这</option>

> ID：13024990
> 
> 赞同：0
> 
> 时间：2012-10-23T06:53:12.080
> 
> 标签：javascript, jquery, onclick, onchange

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:54:31.813

尝试

```
$('option').click(function () //ill sugest to use the change  event 
{
    $(this).closest('form').submit(); //or $("form id or class or form[name="formname"]").submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:01:49.407

纯JS：

```
window.onload=function() {
  document.getElementsByName("folder")[0].onchange=function() {
    this.form.submit();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:34:09.893

```
$(document).ready(function(){    
    $('#select').change(function(){    
        var select_val = $(this).val();   
        // make ajax hit for select value   
    })   
}) 
```

只需提交表单，或者最好根据您的要求发送 ajax hit

# android - XML 文件中的错误。安卓编程

> ID：13024992
> 
> 赞同：1
> 
> 时间：2012-10-23T06:53:22.393
> 
> 标签：android

我是 android 编程新手，最近在我的 ubuntu 系统上安装了 Eclipse junos 和 ADT 插件，并下载了 android SDK。在此之后，我创建了一个 android 项目，默认情况下是 hello world 程序，当我运行这个程序时，我收到一个错误“XML 文件中的错误：正在中止构建。”。但我没有编辑任何代码。请帮我解决这个问题。下面是程序。我还收到一个错误，说 R 无法解析为变量。

```
package com.example.myandroid;

import android.os.Bundle;

import android.app.Activity;

import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent" >
    <TextView android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true" 
            android:layout_centerVertical="true" 
            android:text="@string/hello_world" 
            tools:context=".MainActivity" /> 
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:02:51.063

```
<RelativeLayout xmlns:android="schemas.android.com/apk/res/android"; xmlns:tools="schemas.android.com/tools"; 
```

上面的分号似乎是问题尝试删除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:00:33.640

尝试这个

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >
        <TextView android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true" 
                android:layout_centerVertical="true" 
                android:text="@string/hello_world" 
                tools:context=".MainActivity" /> 
    </RelativeLayout> 
```

您的 xml 文件中有额外的分号。

还要确保你的 xml 的第一行是

```
<?xml version="1.0" encoding="utf-8"?> 
```

所以你完整的 xml 应该看起来像

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
    <TextView android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" 
        android:layout_centerVertical="true" 
        android:text="@string/hello_world" 
        tools:context=".MainActivity" /> 
</RelativeLayout> 
```

# php - PHP中的正则表达式以匹配具有一些异常的单词

> ID：13024996
> 
> 赞同：0
> 
> 时间：2012-10-23T06:53:42.730
> 
> 标签：php, regex, regex-negation

```
$matchstring  = 'MS-DOS file';
$string1 = 'MS-DOS file';
$string2 = 'MS-DOS file, NE Windows';
$string3 = 'MS-DOS file, MZ OS-windows';
$string4 = 'MS-DOS file, Clear OS-windows'; 
```

我正在编写正则表达式以将上述字符串中的字符串“MS-DOS 文件”行进以仅匹配`$string1`和`$string4`. 该模式不应与后跟关键字“NE”或“MZ”的“MS-DOS 文件”匹配。对于其他它应该匹配，就像它应该匹配字符串 4 但不匹配字符串 2,3

有任何想法吗 ？

我用我可怜的正则表达式试过这个，但没有运气:(

```
if (preg_match("/MS-DOS file[\s]?[^MZ][^NE]/", $string1)){
    echo "True";
} else{
    echo "False";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:57:54.057

尝试这个：

```
"/MS-DOS file(?:,\s|$)(?!MZ|NE).*/" 
```

您忽略了逗号并滥用了字符集方括号。

编辑：另外，我相信你想检查'NE'，而不是'NI'。