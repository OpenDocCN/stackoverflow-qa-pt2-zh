# StackOverflow 问答 15166000-15166999

# javascript - 更改 img src 不显示图像

> ID：15166003
> 
> 赞同：0
> 
> 时间：2013-03-01T20:08:20.153
> 
> 标签：javascript, jquery

编辑：好的，代码很好。还有一些其他代码应该在其他地方设置其他属性，我成了“复制/粘贴忘记更改 ID 名称”疾病的牺牲品。感谢大家的意见。对不起，我是个白痴。

我有一种情况，当用户单击图像时，我使用 jquery 动态更改 img src 属性。基本上在注册和取消注册按钮之间来回切换。当我单击注册按钮时，它会正确切换到 UnRegister 图像。但是，如果我再次单击它，它将永远不会切换回注册图像。我的代码：

```
function unRegister() { 
        $('#reg').attr("src","/images/btnRegister.png");             
        $('#reg').attr("onClick","register()");
}
function register() {
        $('#reg').attr("src","/images/btnUnregister.png");              
        $('#reg').attr("onClick","unRegister()");          
} 
```

似乎很容易。我已经验证这两个图像都拼写正确并且位于 /images 目录中。我需要这两个例程，因为一旦解决了这个小问题，我将根据正在发生的操作做许多不同的事情。我已经验证（通过方便的 alert() 调用，例程被调用，只是没有图像切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:10:23.743

将您的代码更改为（缺少撇号）：

```
function register() {
    $('#reg').attr("src","/images/btnUnregister.png");              
    $('#reg').attr("onClick","unRegister()");          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:20:55.397

Ick，我讨厌内联 JavaScript：

```
$(document).on('click','#reg',function(e) {
//  e.preventDefault();
    if ($(this).attr("src")==="/images/btnRegister.png") {
        $(this).attr("src","/images/btnUnregister.png");   
    } else {
        $(this).attr("src","/images/btnRegister.png");   
    }
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# javascript - 在 JavaScript 中连接字符串的问题

> ID：15166011
> 
> 赞同：3
> 
> 时间：2013-03-01T20:08:46.223
> 
> 标签：javascript, html, concatenation

嘿，我正在尝试用 javascript 连接字符串，但我遇到了错误。这是我的代码：

```
function popForm(){
   var v = document.getElementById('a1').innerHTML;

   document.getElementById("a1_i").innerHTML =
      "<input type='text' name='a1_i' value="+v+" />";
} 
```

元素 a1_i 是我用上面显示的输入标签填充的跨度。

再往下，我编辑 ID 为 a1 的元素：

```
document.getElementById("a1").innerHTML="blah bloop"; 
```

但是，当我尝试查看结果时，我只能看到 blah，而不是 bloop。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:32:58.100

如果您查看生成的 HTML，您会注意到以下内容：

```
<input type='text' name='a1_i' value=blah bloop /> 
```

正如语法高亮显示的那样，`value`属性的值为`blah`，而 bloop 是另一个属性。您只需要添加引号：

```
function popForm(){
  var v = document.getElementById('a1').innerHTML; 
  document.getElementById("a1_i").innerHTML="<input type='text' name='a1_i' value='" + v   + "' />";
} 
```

但是如果`v`包含 symbol `'`，那么你又遇到了麻烦。因此，您要么应该将它们替换为[HTML 实体](http://www.w3schools.com/html/html_entities.asp)，要么遵循 jbabey 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:31:26.660

我同意 Jbabey，它将为您节省额外的文本/html 字符串编码（容易出错）。JavaScript 连接非常简单

```
*variable1 + "Text, note quotes around" + variablearray[1] + "etc...";* 
```

使用方法：document.createElement document.createTextNode appendChild

[https://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement) [https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

# jsf - Primefaces、数据导出器和水印

> ID：15166012
> 
> 赞同：2
> 
> 时间：2013-03-01T20:08:46.390
> 
> 标签：jsf, primefaces, client-side

我有一个带有过滤列的 dataTable 并使用 watermark 设置输入值并在标题中节省一些空间，但是当尝试使用 dataExport 时，pdf 文件会使用 waterMark 的某种引用呈现，例如：

> 列标题

* * *

> org.primefaces.component.watermark.Watermark@46339a4c
> 所需的列内容（...）

我的xhtml的结构基本上是：

```
 <h:form id="formID">

    <p:commandButton value="Export"ajax="false">
        <p:dataExporter type="pdf" fileName="file" preProcessor="#{my.stuff}" target="tableID" />
    </p:commandButton>

    <p:dataTable id="tableID" value="#{my.content}" var="myTable">
        <p:column id="columnID1" filterBy="#{myTable.Item}">
            <p:watermark value="Item" forElement="formID:tableID:columnID1" />
            <p:outputText value=#{myTable.Item}" />
        </p:column>
    </p:dataTable>

</h:form> 
```

在此先感谢，并为糟糕的英语感到抱歉。

# internet-explorer - 使用 safari 和 Internet Explorer 时 cakephp 丢失会话

> ID：15166015
> 
> 赞同：2
> 
> 时间：2013-03-01T20:08:49.877
> 
> 标签：internet-explorer, cakephp, safari, cakephp-2.1

我正在为 cakephp 项目使用 ajax 和会话，但是当我使用 safari 或 IE 时，会话似乎丢失了。我遵循了[IE 中的 Sessions 中的解决方案，而 cakephp 1.3 在通过 AJAX 保存时无法正常工作](https://stackoverflow.com/questions/8210655/sessions-in-ie-and-cakephp-1-3-not-working-properly-when-saving-via-ajax?rq=1) 我已将我的 core.php 文件设置为以下设置。

```
 Configure::write('Session.checkAgent', false);
  Configure::write('Security.level', 'low'); 
```

我已经将我的蛋糕版本升级到 2.3.0，但我仍然遇到同样的问题。请帮忙？谢谢你。

这是我的粘贴箱

jscript [http://pastebin.com/WDCaTkEH](http://pastebin.com/WDCaTkEH)

php - [http://pastebin.com/YL7qkLf0](http://pastebin.com/YL7qkLf0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T17:59:56.290

某处的蛋糕似乎有问题...添加 session_start(); 作为 webroot/index.php 的第一行，为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:09:54.697

I am using version 2.9. I add session_start(); in webroot/index.php -- It solved my problem There is something wrong in Cakephp.

# gcc - 想要一个带有 As、LD 和 AR 的新版本 GCC

> ID：15166026
> 
> 赞同：0
> 
> 时间：2013-03-01T20:09:26.163
> 
> 标签：gcc, gcc4.4

我正在尝试在本地机器上安装新的编译器。我没有 sudo 访问权限。当我创建编译器时，我没有我需要的 LD、AS 或 AR，因为我正在尝试编译 lib c 的本地版本。

所以我得到了这个版本的 GCC wget [http://gcc.petsads.us/releases/gcc-4.4.4/gcc-g++-4.4.4.tar.bz2](http://gcc.petsads.us/releases/gcc-4.4.4/gcc-g++-4.4.4.tar.bz2) 并使用这个文件：../gcc-4.4.4 /configure --prefix=/local/gcc-4.4.4 --enable-shared --enable-ld --with-gnu-as --with-gnu-ld

而且我没有看到任何 LD 或 As 或 AR 被创建......任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:19:49.043

这些工具来自`binutils`软件包，它们不是 GCC 的一部分。

该`--with-gnu-ld`选项告诉 GCC 你正在使用 GNU `ld`，它没有告诉它安装 GNU ld。

如果您可以构建 GCC，那么您已经有了`ld`，`as`并且`ar`，您需要新版本吗？GCC 将与旧版本一起使用。

# c - 功能一半时间失败

> ID：15166030
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:09:34.583
> 
> 标签：c, function

我为我的项目编写了一个随机路径生成器，当它工作时，它按预期工作。然而，它有时只起作用。

在我的 main 函数中，我有一个简单的 switch 语句来调用这个项目的三个任务。

```
while(Continue)
{

switch(Example_number)
    {
    default: printf("No such program exists.\n");
             break;
    case 1:  path();
             break;
    case 2:  Caesar_cipher();
             break;
    case 3:  anagram();
             break;
    }

    printf("Would you like to test another?(Y/N)\n");
    scanf("\n%c",&ch);
    if(ch == 'Y' || ch == 'y')
    {
        NULL;
    }
    else
    {
        Continue = false;
    }
} 
```

当你输入 1 时，它会调用这个函数，它会创建一个数组并调用其他两个函数。

```
void path(void)
{
    //Creates the array walk.
    char walk[10][10] = {{'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'},
                         {'.','.','.','.','.','.','.','.','.','.'}};

//Creates a randomly generated path to travel along walk.
generate_path(walk);
print_array(walk);
} 
```

生成路径的函数。

```
void generate_path(char walk[10][10])
{
int move_n = 0;
int row, column, i;
const char alph[] = {'B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'};
//Array that holds all previous data.
int move[3][25] = {0};
bool block = false;

//Allows for a random variable.
srand((unsigned) time(NULL));

row = rand() % 10;
column = rand() % 10;

while(!block)
{
    walk[row][column] = 'A';
    for(i = 0; i < 25; i++)
    {
        //goto comes here
        restart:
        move_n = rand() % move_dir;
        //If space is open continue the alph array one row below.
        if(move_n == 0 && walk[row+1][column] == '.' && row+1 < 10)
        {
            row += 1;
            move[0][i] = i;
            move[1][i] = row;
            move[2][i] = column;
            walk[row][column] = alph[i];
        }
        else if(move_n == 1 && walk[row][column+1] == '.' && column+1 < 10) //If space is open continue the alph array one column to the right. 
        {
            column += 1;
            move[0][i] = i;
            move[1][i] = row;
            move[2][i] = column;
            walk[row][column] = alph[i];
        }
        else if(move_n == 2 && walk[row-1][column] == '.' && row-1 >= 0) //If space is open continue the alph array one row above.
        {
            row -= 1;
            move[0][i] = i;
            move[1][i] = row;
            move[2][i] = column;
            walk[row][column] = alph[i];
        }
        else if(move_n == 3 && walk[row][column-1] == '.' && column-1 >= 0) //If space is open continue the alph array one column to the left.      
        {
            column -= 1;
            move[0][i] = i;
            move[1][i] = row;
            move[2][i] = column;
            walk[row][column] = alph[i];
        }
        else if((walk[row][column-1] == '.') || (walk[row-1][column] == '.') || (walk[row][column+1] == '.') || (walk[row+1][column] == '.')) 
        {
            if(i == 25)
                break;
            goto restart;
        }
        else
        {
            //Resets data to point such that the path can continue.
            row = move[1][i-1];
            column = move[2][i-1];
            i--;
            walk[row][column] = '.';
        }
    }
    block = true;
}
} 
```

以及打印数组功能。

```
void print_array(char walk[10][10])
{
int i = 0;
int k = 0;
for(i = 0; i < 10; i++)
{
    for(k = 0; k < 10; k++)
    {
        printf(" %c", walk[i][k]); 
    }
    printf("\n");
}
} 
```

但是由于某种原因，在 switch 语句中输入 1 时，它有时只能工作。每次调用任何其他函数都可以完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:19:56.693

您的问题很可能与`if`您在 generate_path() 中的语句有关。

您访问`walk[row+1][column]`等并生成`walk[row][column+1]`. 因此，值*可以是*或在某些时候，当访问索引等时，它将访问数组边界之外，这可能会导致各种问题。`row``column``rand()%10``row``column` *`0``9``row-1` `column+1`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:50:27.127

来自 30 年 C 编程老手的一些建议...

1.  不要使用关键字作为变量名。“继续”会使其他程序员感到困惑，因为“继续”是一个关键字。
2.  我建议首先在 path() 函数的 if 堆栈中进行边界检查。这样，如果边界检查失败，其他测试（包括越界内存访问）将不会发生。
3.  path() 中 if 堆栈的“重启”路径**没有**边界检查！

最后，我根据您的代码示例构建了一个项目，我发现它在 path() 中的 if 堆栈的 else 分支中“卡住”了。这似乎正在发生，因为外部循环计数器 (i) 递减，行和列更新，然后循环迭代。这会导致 i 递增，并且如果已选择的行/列也是无法继续的点，则循环将无限重复。

--修正--

我已经在[http://www.svalli.com/files/path.7z](http://www.svalli.com/files/path.7z)上发布了我根据您的代码示例构建的程序，以便您可以检查以确保我没有改变您的逻辑。这是我得到的输出（包括我添加的一些调试以显示循环挂起的位置/原因）：

```
 Path -----------------------
     . . . . . . . . . .
     . . . . . F E . A .
     . . . I H G D C B .
     . . . J K . . . . .
     P O N M L . . . . .
     Q R S . . . . . . .
     . . T U . . . . . .
     . . . V . . . . . .
     . . X W . . . . . .
     . Z Y . . . . . . .
    Would you like to test another?(Y/N)
    y

    row 2/col 6
    Path -----------------------
     . . . . P O N M L K
     . . . . Q T U H I J
     . . . . R S . G . .
     . . . . . D E F . .
     . . . A B C . . . .
     . . . . . . . . . .
     . . . . . . . . . .
     . . . . . . . . . .
     . . . . . . . . . .
     . . . . . . . . . .
    Would you like to test another?(Y/N) 
```

如果在检测到挂起时我的调试没有中断，那么第二次运行将永远挂起，试图找到离开单元 2,6 的方法。我希望这可以帮助您找出逻辑错误——我没有试图理解您的路径算法，只是为了找到它挂在哪里以及挂起条件是什么。除非我彻底改变了某些东西（我怀疑），否则这是你的问题。我希望它有所帮助。哦，如果你发现我无意中改变了你的逻辑，请告诉我如何/在哪里，好吗？我也很想知道。

- 更多的 -

对于任何感兴趣的人，我将路径生成器包装在一个 Win32 程序中，以便它每 1/2 秒执行一次迭代并在屏幕上更新路径。它用红色字符绘制“正常”路径。如果它卡住了，它会用黄色绘制它检查的最后一个字符，然后，如果它一直卡住，它会用黄色和绿色交替绘制一个加号，直到它解开。选择生成！从菜单中将始终启动一个新的、干净的路径序列并按停止！卡住时将停止它（生成！当然，退出程序。）您可以在此处获取可执行文件： [http ://www.svalli.com/files/maze.7z](http://www.svalli.com/files/maze.7z) 看着它工作很有趣，很容易看出它为什么/如何卡住。由此，我相信有人会弄清楚如何修复路径生成器，使其永远不会卡住。或者也许我为检测“卡住”情况而投入的调试代码就足够了？它只是生成了一条可能无法继续的短路径。*

# animation - 以编程方式动画精灵

> ID：15166032
> 
> 赞同：0
> 
> 时间：2013-03-01T20:09:59.907
> 
> 标签：animation, cocos2d-iphone

我正在尝试一种方法来“以编程方式”为游戏中的精灵设置动画。这样做的目的是避免为每个精灵创建约 20-50 帧（非常耗时），然后运行循环对帧进行排序，从而产生所需的动画。下面是我想要制作动画的精灵的一个示例。所需的动画应该给图像带来“波浪”，从中心开始向外扩展。这将使水彩看起来栩栩如生，或者就好像它仍然湿漉漉的，闪闪发光。我正在使用 Cocos2D，所以每个精灵都有这些可用的方法：移动、旋转、缩放。我最初的想法是使用 Cocos2D 的粒子系统来尝试创建这种效果，但我担心运行系统可能会运行 50 个左右的精灵的效率。有没有更好的办法？

!['玩游戏按钮'](../Images/31f0a8e20f6d8146532ae488ebb7fa4d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:31:33.993

您想要实现的目标可能最好使用自定义顶点/片段着色器来完成。不幸的是没有很多例子漂浮，所以你必须看看。但是为了让你开始，看看[这里](http://isdge.git.sourceforge.net/git/gitweb.cgi?p=isdge/isdge;a=tree;f=Media/Shaders;h=c1b0c4c39a01ccea3579d4224db7aeec5e51f116;hb=f17c2b59bf62ef07d26472156ccf496c3469e29a)，那里可能有一个接近你的愿望。请注意，着色器可能很棘手，并且几乎不是那种“从开源存储库中删除”到您的代码库类型的软件。需要进行一些调整，您的里程会有所不同。

对于 openGL 、着色器和其他东西的崩溃“介绍”，如果你愿意的话，[这个博客](http://db-in.com/blog/2011/08/all-about-shaders-part-13/)对我很有帮助。按照链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:35:19.537

如果您拥有大量粒子系统，那么粒子系统的性能可能会非常粗糙。

大多数人使用预先创建的动画水砖。因此，每个图块将有 4 帧动画或其他任何内容，并且在创建时，您可以将每个图块设置为重复通过这 4 帧进行动画处理。

您可能还想查看 CCRipple3D 操作。

# ios - UITableView UITableViewController Detail View 和 UISegmentedControl 怎么样？

> ID：15166033
> 
> 赞同：0
> 
> 时间：2013-03-01T20:10:04.303
> 
> 标签：ios, uinavigationcontroller, uitableview, uinavigationbar, uisegmentedcontrol

我目前正在详细视图的 viewDidLoad 中添加分段控件，这很好，但这意味着我需要回调 TableViewController 以对其进行操作。

实际上，浏览表视图中的项目是表视图导航器的责任吗？所以我认为当我将表单表视图切换到详细视图时，如果我在 prepareForSegue 中添加分段控件会更好？但是，当我尝试详细视图从导航栏中删除分段控件时，我怀疑这不是正确的方法，或者我做错了什么。

这样做的正确方法是什么？

是否可以获得类似于电子邮件客户端使用的下一个/上一个按钮的向上向下箭头的默认图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:36:59.530

不，您不能在 prepareForSegue 中添加控件，因为此时尚未加载目标控制器的视图。在 viewDidLoad 中这样做很好。我不知道您所说的“我需要回调 TableViewController 来处理它”是什么意思。分段控制的目的是什么？

# java - 确保我使用随机性获得一个条目

> ID：15166034
> 
> 赞同：0
> 
> 时间：2013-03-01T20:10:12.307
> 
> 标签：java, random, string-utils

我正在尝试使用以下方法生成随机列，在生成列之后，我在我的`SELECT sql`.

```
final String columnsList = getColumns(table.getColumns());
final String selectSql = "SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, " + columnsList + "  from " + table.getTableName() + " where id = ?";

/**
 * A simple method to get the column names in the order in which it was
 * inserted
 * 
 * @param columns
 * @return
 */
private String getColumns(final List<String> columns) {
    List<String> copy = new ArrayList<String>(columns);
    Collections.shuffle(copy);

    int rNumber = random.nextInt(columns.size());

    List<String> subList = copy.subList(0, rNumber);
    Collections.sort(subList, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return columns.indexOf(o1) < columns.indexOf(o2) ? -1 : 1;
        }
    });
    return StringUtils.join(subList, ",");
} 
```

**问题陈述：-**

有时我看到`columnsList`value 是空的，如果它是空的，那么将不起作用，因为之前`selectSql`会有额外的。我如何确保每次至少返回一个条目。`,``from keyword``getColumns`

我相信`nextInt`会在`0 (inclusively) and n (exclusively)`. 所以它有时可能会选择 0，任何生成随机数的方式`1(inclusively) and n (exclusively)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:15:15.717

一种方法是：

```
return subList.isEmpty() ? "1" : StringUtils.join(subList, ","); 
```

但我认为更好的是修改`selectSql`为

```
final String selectSql = "SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE " + columnsList + "  from " + table.getTableName() + " where id = ?"; 
```

进而

```
return subList.isEmpty() ? "" : ","+StringUtils.join(subList, ","); 
```

如果您希望至少有一个随机值，您也可以使用：

```
int rNumber = 1+random.nextInt(columns.size()-1); 
```

# zeromq - ZeroMQ 和本地 FIFO

> ID：15166039
> 
> 赞同：4
> 
> 时间：2013-03-01T20:10:24.003
> 
> 标签：zeromq

我有两个进程（“发送者”和“接收者”）需要通过瞬态单向 FIFO 通信管道在单台机器上本地进行通信。这是我想要发生的事情（使用更接近 Unix 域套接字的语言）：

*   发送者在已知地址“创建”管道，并立即向下发送消息
*   在某个时刻（在发送方“创建”管道之前或之后），接收方连接到管道
*   阅读器从管道中读取消息
*   发件人“关闭”管道
*   读者注意到所有消息都已被阅读（可能管道已关闭）

我的问题是：我如何用 ZeroMQ 实现这个？“PUB/SUB”，“推/拉”？在 ZMQ 套接字中检测“数据结束”的机制是什么？是否可以同时允许上述前两项的排序：即发送方或接收方是否首先尝试连接？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T02:10:12.827

关于 zeromq 的一些知识：

1.  绑定/连接顺序通常不重要
2.  当一个对等方应接收每条消息和/或不应丢弃消息时，使用 PUSH/PULL
3.  PUB/SUB 用于所有对等方都应接收消息和/或应丢弃在无人收听时发送的消息。
4.  ZeroMQ 故意从应用程序代码中隐藏连接/断开打开/关闭事件，因此您无法检测到实际的关闭事件。

你需要知道的一件事，你不应该知道：当一个套接字连接时，它会创建一个管道（对等点还不需要存在）。当一个套接字绑定时，它只在对等点连接时创建管道。这些管道控制套接字的 HWM 行为。这意味着没有对等点的连接套接字和没有对等点的绑定套接字的行为是不同的。如果您尝试使用它发送消息，则没有对等点的绑定套接字将阻塞，而连接套接字将愉快地在内存中排队消息，直到对等点到达并开始使用消息。

基于这些点，你想要做的是：

1.  使用推/拉
2.  *接收者*应该绑定
3.  发送一条特殊的“关闭”消息，指示队列已完成，而不是检测 tcp/ipc 级别的关闭事件。

这是 Python 中的一个工作示例，它使用 IPC 套接字（文件）进行通信，其中接收者在发送者之后的某个时间开始。

双方需要知道的共同信息：

```
import time

import zmq

# the file used for IPC communication
PIPE = '/tmp/fifo-pipe'

# command flags for our tiny message protocol
DONE = b'\x00'
MSG = b'\x01' 
```

接收者 (PULL) 绑定，并消耗直到 DONE

```
def receiver():
    ctx = zmq.Context()
    s = ctx.socket(zmq.PULL)
    s.bind("ipc://%s" % PIPE)
    while True:
        parts = s.recv_multipart()
        cmd = parts[0]
        if cmd == DONE:
            print "[R] received DONE"
            break
        msg = parts[1]
        # handle the message
        print "[R] %.1f consuming %s" % (time.time() - t0, msg)
    s.close()
    ctx.term()
    print "[R] done" 
```

发送方（PUSH）连接并发送，发送 DONE 表示完成

```
def sender():
    ctx = zmq.Context()
    s = ctx.socket(zmq.PUSH)
    s.connect("ipc://%s" % PIPE)

    for i in range(10):
        msg = b'msg %i' % i
        print "[S] %.1f sending %s" % (time.time() - t0, msg)
        s.send_multipart([MSG, msg])
        time.sleep(1)
    print "[S] sending DONE"
    s.send(DONE)
    s.close()
    ctx.term()
    print "[S] done" 
```

和一个演示脚本一起运行它们，发送者首先启动，接收者在发送者已经发送了几条消息之后启动：

```
from threading import Thread

# global t0, just for keeping times relative to start, rather than 1970
t0 = time.time()

# start the sender
s = Thread(target=sender)
s.start()

# start the receiver after a delay
time.sleep(5)
r = Thread(target=receiver)
r.start()

# wait for them both to finish
s.join()
r.join() 
```

可以看到[这里](https://gist.github.com/5069344)一起跑。

# sql - 来自 Visual Studio 的文件修改检测到消息

> ID：15166043
> 
> 赞同：0
> 
> 时间：2013-03-01T20:10:33.517
> 
> 标签：sql, visual-studio-2010, tsql, reporting-services, ssrs-2008

我想知道在我的 SSRS 解决方案打开时每天多次收到这些消息的原因是什么？

> 项目“myProject”已在环境之外进行了修改。
> 
> 按重新加载从磁盘加载更新的项目。
> 按忽略忽略外部更改。下次打开项目时将使用更改。

这里有更多信息：

> Microsoft Visual Studio 2010 版本 10.0.40219.1 SP1Rel Microsoft .NET Framework 版本 4.0.30319 SP1Rel
> 
> 安装版本：IDE标准
> 
> Microsoft Visual Basic 2010 01011-532-2002361-70813 Microsoft Visual Basic 2010
> 
> Microsoft Visual C# 2010 01011-532-2002361-70813 Microsoft Visual C# 2010
> 
> Microsoft Visual Studio 应用程序工具 3.0
> 01011-532-2002361-70813 Microsoft Visual Studio 应用程序工具 3.0
> 
> Microsoft Visual Web Developer 2010 01011-532-2002361-70813 Microsoft Visual Web Developer 2010
> 
> SQL Server 分析服务 Microsoft SQL Server 分析服务设计器版本 11.0.2100.60
> 
> SQL Server 集成服务 Microsoft SQL Server 集成服务设计器版本 11.0.2100.60
> 
> SQL Server Reporting Services Microsoft SQL Server Reporting Services Designers 版本 11.0.2100.60
> 
> Visual Studio 2010 Shell（集成）-ENU Service Pack 1 (KB983509) KB983509 此服务包适用于 Visual Studio 2010 Shell（集成）-ENU。如果您稍后安装更新的服务包，此服务包将自动卸载。有关详细信息，请访问[http://support.microsoft.com/kb/983509](http://support.microsoft.com/kb/983509)。

这条消息让我担心，因为它让我认为其他人正在修改解决方案，并且我们在数据源上更改设置时发生了奇怪的事情。

为什么我们会收到此消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T19:59:14.930

嗯..这正是你认为的意思。当项目打开时，项目文件已在其他进程中打开和修改（例如，您可以在记事本中打开它并添加一个空格。）因此，当您将注意力移开然后重新关注 Visual Studio 窗口时，它会提醒您更改并为您提供从磁盘重新加载项目以接受新更改的机会。

当您*通常*看到此消息时，这是因为源代码控制。场景是：

1.  您打开项目。
2.  当它打开时，其他人打开项目，以某种方式添加或修改项目，并签入他们的更改。
3.  您可以通过其他 GUI 在 TFS 或 Subversion 中“获取最新版本”。您获得的项目文件会覆盖您在磁盘中所做的更改。
4.  现在 Visual Studio 在它加载的项目文件和磁盘上的项目文件之间存在冲突。所以它给了你这个提示。
5.  如果你“重新加载”你会得到你从源代码管理中得到的版本。或者您可以忽略并保存您的更改。

现在您遇到了麻烦，您检查了您忽略的负载，现在其他人的更改被撤消并降级到更改历史记录！

项目文件对于源代码控制来说是一件棘手的事情，对吧？

# java - C++ 中的等效标识符

> ID：15166046
> 
> 赞同：0
> 
> 时间：2013-03-01T20:10:36.710
> 
> 标签：java, c++

我是编程新手，我有一个简单的疑问。

我想知道在 C++ 中是否有类似公共私有等的等效标识符，就像在 java 中一样。因为我知道

在 Java 中

```
*public String small(){
return "hello";
}* 
```

在 C++ 中

```
*string small(){
return "hello";
}* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:13:21.103

在 C++ 中，您不会像在 Java 中那样将访问说明符应用于单个声明。您将它们设置在一个类中的部分中，并且直到下一个访问说明符的所有成员都具有该访问级别。

```
class MyClass {
public:
    std::string small() const { return "hello"; }
    int also_public();
private:
    void another_func();
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T20:13:24.937

有，但仅限于类范围。当提到成员时，它们定义了整个部分，而不是单独应用于每个成员：

```
class Foo : public Bar // public inheritance. Can be private. Or even protected!
{
 public:.
  int a; // public
  double b; // still public
 private:
  double x; // private
 public:
  double y; // public again:
 protected:
  // some protected stuff
}; 
```

访问说明符不适用于类（C++ 中没有模块的概念）。如果一个类嵌套在另一个类中，它只能是私有的/受保护的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T20:13:59.770

在 C++ 中有公共/私有/受保护的“部分”：

```
class A
{
private:
    string a;
    void M1();

protected:
    string b;
    void M2();

public:
    string c;
    void M3();
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T20:13:58.890

C++ 具有可访问性修饰符，但与 Java 不同，您不必在每个成员上重复它们：

```
class C
{
    int a; // private, since class members are private by default
public:
    int b; // public, since it's in a block of public members
    int c; // also public
private:
    int d; // private again
protected:
    int e; // protected
};

struct S
{
    int a; // public, since struct implicitly gives a block of public members
public:
    int b; // public, since it's in a block of public members
    int c; // also public
private:
    int d; // private again
protected:
    int e; // protected
}; 
```

顺便说一句，可访问性标签创建的块不仅控制访问，还影响内存布局。

这个类是*标准布局*和*POD*：

```
struct S
{
    int a;
    int b;
    int c;
}; 
```

这是这样的：

```
struct S
{
private:
    int a;
    int b;
    int c;
}; 
```

但这不是：

```
struct S
{
    int a;
    int b;
private:
    int c;
}; 
```

这个是在 C++11 中，但不是在 C++03 中：

```
struct S
{
    int a;
    int b;
public:
    int c;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T20:13:14.677

在 C++ 中

```
const char *small() {
    return "hello";
} 
```

或者

```
std::string small() {
    return "hello";
} 
```

取决于你想要一个字符数组还是一个字符串对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T20:13:23.023

您可以在 c++ 类中使用 public、private 和 protected。

例如

```
Class A {
public:
 int x;
 int getX() { return x; }

private:
 int y;
}; 
```

这里 x 和 getX 函数是公开的。并且 y 是私有的。

# c# - EF Code First 应有的时候没有创建外键

> ID：15166048
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:10:38.717
> 
> 标签：c#, asp.net, entity-framework, ef-code-first, foreign-keys

目前我正在关注[Programming Entity Framework: Code First](https://rads.stackoverflow.com/amzn/click/com/1449312942)，作者在其中创建了这些模型类：

```
namespace Model
{
    public class Destination
    {
        public int DestinationID { get; set; }
        public string Name { get; set; }
        public string Country { get; set; }
        public string Description { get; set; }
        public byte[] Photo { get; set; }
        public List<Lodging> Lodgings { get; set; }
    }

    public class Lodging
    {
        public int LodgingID { get; set; }
        public string Name { get; set; }
        public string Owner { get; set; }
        public bool IsResort { get; set; }
        public Destination Destination { get; set; }
    }
} 
```

并显示自动生成的数据库在表内有一个**外键**调用。但问题是在我的情况下，它是作为普通**int**而不是外键创建的。`Destination_DestinationID``Lodgings`

 **我正在使用 EF5，我猜这本书使用的是 EF4.1，这是造成这种差异的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:57:37.470

我复制了代码，我使用的是 EF Code First 5，生成的 Destination_DestinationId 确实是一个外键。问题不在于代码，而是 Visual Studio Server 资源管理器没有向您显示，我更喜欢使用 SQL Server Management Studio 执行与数据库相关的任务，它会告诉您该列实际上是带有灰色键的外键图标。**

# r - 抓取 github repo 并在临时目录中解压缩

> ID：15166052
> 
> 赞同：0
> 
> 时间：2013-03-01T20:10:48.707
> 
> 标签：r, unzip

我希望能够获取一个 github 存储库并将其内容解压缩到一个临时目录。我知道 devtools 中有 install_github 的功能，但我不想安装，这对所有 github 存储库更通用。

这是我尝试过的：

```
url <- "https://github.com/trinker/reports/zipball/master"
tmp <- tempfile( fileext = ".zip" )
download.file(url, tmp)
unzip(tmp, exdir = tempdir()) 
```

这导致：

```
Warning message:
In unzip(tmp, exdir = tempdir()) : internal error in unz code 
```

同样，我不想安装，但可以访问临时目录中的内部文件，退出时我将删除这些文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:37:03.747

使用`downloader`简化下载界面的包。这是实现目标的功能。

```
#' Download and unzip Github repo to current directory
#'
#' @params repo name of github repository
#' @params user github user name
download_repo <- function(repo, user){
  require(downloader)
  url <- sprintf("https://github.com/%s/%s/archive/master.zip", user, repo)
  tmp <- tempfile(fileext = ".zip")
  download(url, tmp)
  unzip(tmp)  
}

# download_repo('reports', 'trinker') 
```

# xpath - 两个如何将两个 xpath 表达式合二为一？

> ID：15166058
> 
> 赞同：1
> 
> 时间：2013-03-01T20:11:27.887
> 
> 标签：xpath

还在战斗。让这两个 xpath 表达式都可以工作，需要将它们组合成一个：

```
(1) //scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]

(2) //d[@scid="hi"][@raw="10"]/@t 
```

这是 XML（片段）：

```
<scales>
    <scale id="1" gender="*" age="*">
        <d scid="hi" raw="10" t="76" />
        <d scid="pn" raw="12" t="80" />
    </scale>
    <scale id="2" gender="m" age="*">
        <d scid="hi" raw="8" t="79" />
        <d scid="pn" raw="2" t="50" />
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d scid="hi" raw="0" t="48" />
        <d scid="pn" raw="10" t="49" />
    </scale>
</scales> 
```

试过了

```
//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]/d[@scid="hi"][@raw="10"]@t 
```

--> 失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:32:40.283

您在组合查询中缺少一个`/`before `@t`，除此之外它看起来很好并返回`t="76"`给定的输入。

```
//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]/d[@scid="hi"][@raw="10"]/@t 
```

# android - Android logcat 无限消息

> ID：15166063
> 
> 赞同：0
> 
> 时间：2013-03-01T20:11:56.240
> 
> 标签：android, error-handling, android-camera, surfaceview, logcat

当我尝试执行我的应用程序时，我会收到无数不包含我的包名称的消息。我无法理解他们的意思以及问题所在。logcat 中的一些消息如下：

```
03-01 21:51:21.980: I/SecCameraCoreManager(1555): SecCameraCoreManager created: pid=1555, cameraId=0
03-01 21:51:21.980: D/SteExtIspCamera(1555): > android::SteExtIspCamera::SteExtIspCamera(int) 
03-01 21:51:21.980: D/SteExtIspCamera(1555): < android::SteExtIspCamera::SteExtIspCamera(int)  
03-01 21:51:21.980: D/SteExtIspCamera(1555): > OMX_ERRORTYPE android::SteExtIspCamera::init() 
03-01 21:51:21.980: I/SteExtIspCamera(1555): debug.libcamera.level = 255
03-01 21:51:21.980: D/SteExtIspCamera(1555): > OMX_ERRORTYPE   android::SteExtIspCamera::initPrimaryDefaultParameters() 
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Default preview Witdh: 640 Height: 480 framerate 30
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Default preview framerate: 30
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Default picture Width: 2560 Height: 1920 quality; 100 
03-01 21:51:21.980: D/SteExtIspCamera(1555): > virtual android::status_t android::SteExtIspCamera::setParameters(const android::CameraParameters&) 
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Preview Width: 640 Height: 480  Format : yuv420sp
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Record Width: 640 Height: 480
03-01 21:51:21.980: D/SteExtIspCamera(1555):    VPB0 Width: 640 Height: 480
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Picture Width: 2560 Height: 1920 Format : jpeg Quality: 100
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Thumbnail Width: 320 Height: 240 Quality: 70
03-01 21:51:21.980: D/SteExtIspCamera(1555):    Rotation: (null) WhiteBalance: auto Effect: none Antibanding: 50hz
03-01 21:51:21.980: D/SteExtIspCamera(1555):    SceneMode: auto Flash: off Focus: auto
03-01 21:51:21.980: D/SteExtIspCamera(1555): < virtual android::status_t android::SteExtIspCamera::setParameters(const android::CameraParameters&) 
03-01 21:51:21.980: D/SteExtIspCamera(1555): < OMX_ERRORTYPE android::SteExtIspCamera::initPrimaryDefaultParameters() 
03-01 21:51:21.980: I/ENSLoader(1555): CreateComponent OMX.ST.ExtHSMCamera
03-01 21:51:21.990: D/dalvikvm(17529): GC_EXTERNAL_ALLOC freed 22K, 45% free 3521K/6343K, external 0K/0K, paused 77ms
03-01 21:51:22.000: I/OSI-Trace(1555): =========== persist.debug.extcamera.level enabled with level 777 =======
03-01 21:51:22.000: D/OSI-Trace(1555): EXTCAMERA > Camera 
03-01 21:51:22.000: D/OSI-Trace(1555):   > setDefaultFormatInPortDefinition 
03-01 21:51:22.000: I/OSI-Trace(1555):   PortIndex = 0
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.xFramerate         = 10
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nFrameWidth        = 320
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nFrameHeight       = 240 
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.eCompressionFormat = 0
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.eColorFormat       = 27
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nStride            = 320
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nSliceHeight       = 1
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.nBufferSize                     = 153600
03-01 21:51:22.000: D/OSI-Trace(1555):   > setDefaultFormatInPortDefinition 
03-01 21:51:22.000: I/OSI-Trace(1555):   PortIndex = 2
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.xFramerate         = 10
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nFrameWidth        = 320
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.nFrameHeight       = 240 
03-01 21:51:22.000: I/OSI-Trace(1555):   mParamPortDefinition.format.video.eCompressionFormat = 0 
```

出了什么问题？
编辑：我唯一的想法是，在我的 centerLayout 中，它是一个 cameraPreview(SurfaceView)，我有很多覆盖 cameraPreview 的相对布局，也许这会一直计算每个布局的尺寸和距离

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:54:02.087

整个设备只有一个 Logcat-Log - 在您的设备上运行的每个线程都会将其日志语句放在那里。在 logcat 窗口（Eclipse DDMS 透视图）的左侧，您可以定义过滤器来过滤应用程序语句的输出。

# xcode - 在应用程序内附加 CSV 不起作用

> ID：15166065
> 
> 赞同：0
> 
> 时间：2013-03-01T20:12:09.093
> 
> 标签：xcode, email

我在 xcode 中编写了一个小脚本，它在我的应用程序中获取一个 CSV 文件并将其作为附件发送。当我单击电子邮件按钮时，一切正常（即主题、正文等）。它也显示 CSV 文件，但是当我检查我的电子邮件时，我看到了除 csv 文件之外的所有内容。我难住了。这是我使用的代码。我也试过 filename:@"isitlist.csv。csv 文件位于我的主文件夹中。

```
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:@"Guest List Form"];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"", nil];
    [mailer setToRecipients:toRecipients];

    [mailer addAttachmentData:[NSData dataWithContentsOfFile:@"isit_list.csv"]
                     mimeType:@"text/csv"
                     fileName:@"isit_list"];

    [self presentModalViewController:mailer animated:YES];

    NSString *emailBody = @"Please fill out the attached file and then email it back to us. Also, please attach some photos to use for the slideshow. We suggest no more than 10.";
    [mailer setMessageBody:emailBody isHTML:NO];

    // only for iPad
    // mailer.modalPresentationStyle = UIModalPresentationPageSheet;

    [self presentModalViewController:mailer animated:YES];

    [mailer release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:31:44.147

I`m facing the same problem as you right now. And while looking for a solution I discovered one peculiarity of iOS and Mac OS.

the reason why you can't send a file is very simple, it's because you are not allowed to create a file in to your app bundle or your iOS documents folder.

For exemple if you create a file and insert it on your app folder on XCODE, than use that as a attachment on mailComposeViewController, you will receive a mail with the file as expected. the stressful part here is that you can not even update the content of the file inside your app.

If you make a test using Xcode, and LOTS of NSLOGs to track your code, and the data flow, you will see that your code will probable work on Mac OS, but if you run the simulation on a device you will find a completely diferente scenario.

The SANDBOX of iOS forbids this kind of operation, mostly to protect user information. But there is hope!

One possible solution to share the data generated inside app is to pass this information as a NSString to MailComposerViewController, this way you cant send the data you want.

yeah yeah... i know, this is not elegant, but this is what we got so far.

if you discovered a way to do this without jailbrake your device share that with us.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:02:00.137

将此添加到您的 viewcontroller.m

# 导入 MessageUI/MFMailComposeViewController.h

# 导入 MessageUI/MessageUI.h

然后添加这个：

-（IBAction）发送：（id）发件人；{

```
if ([MFMailComposeViewController canSendMail])
{

    NSString *textFileContentsString = @"Last Name (i.e. Smith), First Name (i.e. Mr and Mrs. James), Table Number (i.e. 7)\nJones,Mr and Mrs Steve, 6\nJames,Mr and Mrs Albert,8\nJohnson, Mr and Mrs Fred, 7";
    NSData *textFileContentsData = [textFileContentsString dataUsingEncoding:NSASCIIStringEncoding];
    MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];
    mailComposeViewController.mailComposeDelegate = self;
     NSArray *toRecipients = [NSArray arrayWithObject:@""];
    [mailComposeViewController setSubject:@"My Sample Project"];
    [mailComposeViewController setMessageBody:@"Send this email to the email address that you use on the iPad. When you open it in your email you will first save the photos to your camera roll by pressing and holding on the image. Then you will press on the isit_list.csv file and click on 'Open in iSIT'. You will then see a message that the data has been imported. You will then create your event by pressing on 'Enter Seating Admin'. Enter in the Couple's Names, Event Date, Select Photos (these are photos for the slideshow), then click 'Save Event'. You will notice the event is saved. To start the event click on 'Load Event', select a Theme to use, then click 'Launch Event'. The sample data in the CSV file only contains a few names which all have a last name that start with'J'. So click on 'J' when you see the alphabet screen. " isHTML:NO];
    [mailComposeViewController addAttachmentData:textFileContentsData mimeType:@"text/plain" fileName:@"isit_list.csv"];

    [mailComposeViewController setToRecipients:toRecipients];
    [self presentModalViewController:mailComposeViewController animated:YES];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                    message:@"Your device doesn't support the composer sheet"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];

} 
```

}

# python - Django Tastypie 缓慢的 POST 响应

> ID：15166066
> 
> 赞同：6
> 
> 时间：2013-03-01T20:12:12.707
> 
> 标签：python, django, api, tastypie

我正在尝试实现一个 Tastypie 资源，它允许按照每个用户权限策略进行 GET 和 POST 操作，模型非常简单（类似于 Tastypie 文档中的 Note 模型），资源本身也非常简单，我只是有一个额外的 override_urls 方法来实现使用 Haystack 进行搜索。

我现在的主要问题是，虽然在本地运行项目似乎工作正常，但请求速度很快，而且一切正常。一旦我部署了项目（在 Linode 上，使用 Nginx、Gunicorn、Runit），我发现 POST 请求太慢了，大约需要 1.1 分钟才能返回 201 状态。另一方面，GET 请求运行良好且符合预期。

我对请求运行了 Python Hotshot 分析器，它显示整个 POST 请求占用了 0.127 CPU 秒。我不太确定这里发生了什么。

我应该提到我正在为我的 Tastypie 资源使用 ApiKeyAuthentication 和 DjangoAuthorization。

这是来自 Chrome Inspector 请求的屏幕截图：http: [//d.pr/i/CvCS](http://d.pr/i/CvCS)

如果有人能引导我找到正确的方向来寻找这个问题的答案，那就太好了。

谢谢！

编辑：

一些代码：

模型和资源：

```
class Note(models.Model):
    timestamp = models.DateTimeField('Timestamp')
    user = models.ForeignKey(User)
    page_title = models.CharField("Page Title", max_length=200)
    url = models.URLField('URL', verify_exists=False)
    summary = models.TextField("Summary")
    notes = models.TextField("Notes", null=True, blank=True)

    def __unicode__(self):
        return self.page_title

    def get_absolute_url(self):
        return self.url

class NoteResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')

    class Meta:
        queryset = Note.objects.all()
        resource_name = 'note'
        list_allowed_methods = ['get', 'post']
        detail_allowed_methods = ['get']
        always_return_data = True
        authentication = ApiKeyAuthentication()
        authorization = DjangoAuthorization()
        # authentication = Authentication() #allows all access
        # authorization = Authorization() #allows all access

        ordering = [
            '-timestamp'
        ]

    def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/search%s$" % (
                self._meta.resource_name, trailing_slash()),
                self.wrap_view('get_search'), name="api_get_search"),
        ]

    def obj_create(self, bundle, request=None, **kwargs):
        return super(NoteResource, self).obj_create(bundle,
                                                        request,
                                                        user=request.user)

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(user=request.user)

    def get_search(self, request, **kwargs):
        self.method_check(request, allowed=['get'])
        self.is_authenticated(request)

        sqs = SearchQuerySet().models(Note).filter(
                                        user=request.user
                                    ).auto_query(
                                        request.GET.get('q', '')
                                    )

        paginator = Paginator(sqs, 100)

        try:
            page = paginator.page(int(request.GET.get('page', 1)))
        except InvalidPage:
            raise Http404("Sorry, no results on that page.")

        objects = []

        for result in page.object_list:
            bundle = self.build_bundle(obj=result.object, request=request)
            bundle.data['score'] = result.score
            bundle = self.full_dehydrate(bundle)
            objects.append(bundle)

        object_list = {
            'objects': objects,
        }

        self.log_throttled_access(request)
        return self.create_response(request, object_list) 
```

独角兽会议：

```
bind = "0.0.0.0:1330"
workers = 1 
```

Nginx Conf（包含在主 nginx.conf 中）：

```
server {
        listen 80;
        server_name domain.com example.com;
        access_log  /path/to/home/then/project/access.log;
        error_log /path/to/home/then/project/error.log;

        location / {
                proxy_pass   http://127.0.0.1:1330;
        }

        location /static/ {
                autoindex on;
                root /path/to/home/then/project/;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:09:09.693

OP：想通了。在主要的 nginx.conf 文件 (/etc/nginx/nginx.conf) 中，原来我将 keepalive_timeout 设置为 65，这被认为太多了。我将其切换为 0，一切正常。

抱歉，我在这个问题上花了几分钟，然后意识到还有更多评论，然后意识到 OP 确实找到了解决方案 :( 并没有将其标记为已回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T16:19:42.423

虽然更改 keepalive_timeout 会起作用，但它不能修复导致它的 nginx 底层 Content-Length 标头错误。此错误已[在 nginx 的 0.8.32 版本中修复](http://nginx.org/en/CHANGES)，但如果您有旧版本，您可以：

1.  更改服务器上的 keepalive_timeout=0
2.  将服务器上的 nginx 升级到 >= 0.8.32 的版本
3.  [按照此处](http://jimneath.org/2011/03/22/fixing-nginx-201-content-length-header-bug.html)的说明修复服务器端代码中的问题

希望这可以帮助任何偶然发现这个问题的人。

# mercurial - “零”一个善变的存储库

> ID：15166069
> 
> 赞同：0
> 
> 时间：2013-03-01T20:12:23.703
> 
> 标签：mercurial

我有一个包含数千个变更集的 mercurial 存储库。有没有办法说当前变更集的状态是新的“零”、基线、初始提交？

```
Rev00000 ... Rev90000 ...

会成为：

RepoState@Rev90000 ...

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:20:51.830

评论者有你的答案，简短的回答是“不”。您可以轻松构建一个新存储库，其第一次提交是旧存储库的最新存档/快照，但它将是一个全新的存储库，任何从中拉取的人都会“不相关”，如果他们使用“--force”他们将拥有所有旧的和所有的新的。同样，如果他们用“--force”推动它，它只会再次填满旧的东西。

所以，除非你愿意让每个人都删除他们所有的克隆并重新克隆（基本上是用新的快照重新开始），否则你会被卡住。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:19:37.820

您可以使用`convert`扩展来重写历史。为此，我们假设本地修订版 950 是新存储库中的新本地修订版 0。

通过将以下内容添加到`mercurial.ini`文件来启用扩展：

```
[extensions]
convert = 
```

然后使用修订版 950 作为转换的开始运行转换：

```
hg convert --config convert.hg.startrev=950 c:\repo c:\repo.new 
```

然后所有用户都必须克隆新的存储库`repo.new`。

# python - python3构建的Sublime Text 2编码错误

> ID：15166076
> 
> 赞同：8
> 
> 时间：2013-03-01T20:13:06.403
> 
> 标签：python, character-encoding, sublimetext2

从 Sublime Text 2 运行我的 python3 脚本时，出现以下错误：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-2: ordinal not in range(128) 
```

此外，从终端运行相同的脚本时，不会出现问题。

Sublime 的构建系统设置如下：

```
{
"cmd": ["python3", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python",
"encoding": "utf8",
"path": "/Library/Frameworks/Python.framework/Versions/3.3/bin/"
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-02T12:57:54.937

经过一番调查研究，我弄清楚了问题所在：

子进程中缺少 LANG env 变量，由 Sublime Text 2 运行。我通过在构建设置中添加 LANG 变量来修复它，如下所示：

```
{
"cmd": ["python3", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python",
"env": {"LANG": "en_US.UTF-8"}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-10T22:31:32.353

马丁的解决方案效果很好！在 Windows/Python3.5 环境中，只需设置以下内容而不是“LANG”：

```
"env": {"PYTHONIOENCODING": "utf8"} 
```

# css - 简单 :hover 永远不会被触发

> ID：15166077
> 
> 赞同：0
> 
> 时间：2013-03-01T20:13:06.547
> 
> 标签：css

我有一些 :hover CSS:

```
.btnSimple {
    /*some css*/
}

<a href="" class="btnSimple">hover</a> 
```

但这些规则永远不会得到应用。关联：

jsFiddle：http: [//jsfiddle.net/UnFhQ/78/](http://jsfiddle.net/UnFhQ/78/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:20:36.677

您尚未在`.btnSmall`类本身上声明转换。您必须首先指定`transition-property`和`transition-duration`类的属性，然后应用您希望转换的那些属性`btnSmall:hover`

如果要为属性应用多个属性，`transition`可以包含`all`关键字，以便可以转换多个属性。

简单的例子：

```
.btnClass {
 transition: all 2s;
}

.btnClass:hover {
background: #fff;
border: 2px solid cornflowerblue;
} 
```

# mysql - mysql工作台加载数据本地infile找不到文件或目录

> ID：15166079
> 
> 赞同：4
> 
> 时间：2013-03-01T20:13:13.670
> 
> 标签：mysql, mysql-workbench

其他人在使用时遇到问题：

```
LOAD DATA LOCAL INFILE 'c:/PRODUCT_GROUP_UPLOAD.CSV' into TABLE ats_store.product_group
FIELDS TERMINATED BY ',' ENCLOSED BY '"' 
ESCAPED BY '"' LINES TERMINATED BY '\r\n' 
(product_group_id,name,price,description,image,start_time,end_time,start_date,end_date,product_code,delivery_format); 
```

Mysql Workbench 已经有几个星期的问题了，但我什至找不到文件。还有，我今天更新了！

我得到：

```
Error Code: 2\. File 'c:\PRODUCT_GROUP_UPLOAD.CSV' not found (Errcode: 2 - No such file or directory) 
```

我已经加载了其他文件，但似乎无法加载这个文件？它在我指定的文件夹中定义！

请记住，我已经玩过斜线，向前，向后，双前，双后等......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T20:16:40.553

> Windows 路径名使用正斜杠而不是反斜杠指定。如果确实使用了反斜杠，则必须将它们加倍。

见[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T13:52:30.710

我有同样的问题你的路径应该使用“”

```
"C:\\PRODUCT_GROUP_UPLOAD.CSV" if running from workbench 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:34:41.787

LOAD DATA LOCAL 要求文件位于客户端计算机上。这是你的情况吗？

既然你写了你已经加载了其他文件，我假设你的服务器和客户端在所有尝试中都是相同的，只有这个文件无法加载。我写这个是因为可以关闭本地支持（另请参见[http://dev.mysql.com/doc/refman/5.6/en/load-data-local.html](http://dev.mysql.com/doc/refman/5.6/en/load-data-local.html)）。

麦克风

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T22:20:55.147

尝试将数据文件移动到不在“文档和设置”或其子目录下的测试目录。Windows 可能会限制对该区域的访问。然后再次测试您的 LOAD INFILE 语句。

# javascript - 是否可以在 node.js 中为多个独立任务创建多个计时器？

> ID：15166080
> 
> 赞同：0
> 
> 时间：2013-03-01T20:13:13.627
> 
> 标签：javascript, node.js, timer-jobs

我有一个接受来自网页的请求的 node.js 服务器。在收到“开始”请求后，我希望能够生成一个计时器，该计时器每 n 秒无休止地在后台执行一项任务。这是可行的吗？什么是一个很好的例子？一个简单的伪代码如下：

```
app.get("myindependenttasks/starttask/:userid"){
   //start a simple timer to handle to userid
   //continue to run the timers endlessly while 
   //while this call returns a "Task running" status
   //to the user.
   //Other users should be able to run their own tasks.
} 
```

如果用户请求的数量约为 1000 个正在运行的任务，是否有任何缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:19:24.760

您可以`setInterval`为此使用（[http://nodejs.org/api/timers.html](http://nodejs.org/api/timers.html)），但我会犹豫是否要为其中的 1000 个这样做。

相反，您应该运行一个`setInterval`，并在此任务中为所有连接的用户运行任务。

因此，当用户点击“myindependenttasks/starttask/:userid”时，它会被添加到要处理的用户列表中，并且在您的定期任务中，您会一一浏览该列表。

# python - 使用python从fasta文件中删除句点

> ID：15166083
> 
> 赞同：2
> 
> 时间：2013-03-01T20:13:16.653
> 
> 标签：python, fasta

我是python新手（使用2.7），我正在尝试获取对齐序列的fasta文件并删除句点（。）和破折号（-）。我正在尝试编写一个循环，以便 python 遍历每一行并用任何内容替换句点和破折号。这是我得到的脚本（当我运行它时，它会删除句点和破折号，但会留下空格）：

```
InFileName = 'myfile.fasta'
InFile = open(InFileName, 'r')

OutFileName = 'myfile_nodots.fasta'
OutFile = open(OutFileName, 'w')

for Line in InFile:

     Line=Line.replace('.', "")

     Line=Line.replace('-', "")

     Outfile.write(Line) 

InFile.close()
OutFile.close() 
```

任何建议将不胜感激！仁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:20:08.230

您可以整理代码以`with`确保文件关闭，并在 2.7 中使用第二个参数`str.translate`来指定要删除的字符，因此您的代码可以是：

```
with open('myfile.fasta') as fin, open('myfile_nodots.fasta', 'w') as fout:
    for line in fin:
        fout.write(line.translate(None, '-.')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:17:28.320

您可以稍微简化一下代码：

```
import re
infilename = 'myfile.fasta'
outfilename = 'myfile_nodots.fasta'
regex = re.compile("[.-]+")    

with open(infilename, 'r') as infile, open(outfilename, 'w') as outfile:
    for line in infile:
        outfile.write(regex.sub("", line)) 
```

如果您还想删除点或破折号后面的空格，请使用不同的正则表达式：

```
regex = re.compile("[.-]+ *") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T21:36:53.587

Use `fileinput` and `translate` for quick in-place editing:

```
import fileinput

for line in fileinput.input("test.txt", inplace=1):
    sys.stdout.write(line.translate(None, '-.')) 
```

And before you ask: yes, it writes to the file, not to the console :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T11:52:49.910

Assuming that fasta headers may contain dashes or dots as well(i.e. isoforms), which is quite common,

```
with open('myfile.fasta') as fin:
    with open('myfile_nodots.fasta', 'w') as fout:
        for line in fin:
            if line.startswith('>'):
                fout.write(line)
            else:
                fout.write(line.translate(None, '-.')) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-01T20:15:29.333

你试过`Outfile.write(Line.strip())`吗？

# database - 仅使用旧数据库将 Joomla 从 1.5.17 升级到 2.5

> ID：15166088
> 
> 赞同：0
> 
> 时间：2013-03-01T20:13:30.397
> 
> 标签：database, joomla, upgrade

我有一个 Joomla 1.5.17 的旧数据库。我的网站被黑了，托管服务提供商坚持要我从服务器上删除所有文件并安装最新版本的 Joomla。现在我有了旧数据库，我想用 Joomla 2.5 恢复我的网站。有可能吗？如果是，那么如何？

**编辑：我不能在不创建新数据库而是使用旧数据库的情况下安装新的 Joomla。为什么 Joomla 不考虑这样的功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:27:30.640

安装 Joomla 1.5.26（最新版本）的新副本，然后导入数据库。然后下载 JUpgrade，它可以让您轻松迁移到 Joomla 2.5。请记住，这将更新默认的 Joomla 表格，例如内容、模块位置等。它不会更新您的第 3 方扩展，因此您需要安装它们的 Joomla 2.5 兼容版本。

希望这可以帮助

# java - Java - 执行流程

> ID：15166094
> 
> 赞同：1
> 
> 时间：2013-03-01T20:13:56.420
> 
> 标签：java, swing

我还是个新手，这更像是一个好奇/想学习的问题。

我创建了一个小型摇摆应用程序，它连接、检索数据和断开与数据库的连接。它工作正常，我没有问题。

从控制器中，我调用以下方法：

```
 1----> db.connectDB();

   2---->  db.doSomeAction();

   3----> db.disConnectDB(); 
```

现在，我的问题是，方法 3 是否会等到方法 2 从数据库中检索到整个结果集，比如 1,000,000 条记录，然后才执行断开与数据库的连接？

方法 1、2 和 3 不返回任何东西，除非它们会执行一个动作。当我仍在从数据库中检索记录时，如何确保它不会断开连接。

我正在使用 SwingUtilities.InvokeLater 方法来执行我的应用程序。这种情况还会发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:47:46.143

如果你从同一个线程中调用这三个方法，它们的调用将是顺序的，所以方法 3 将等待方法 2 的结尾开始。

# jquery - 如何选择行数多于或少于特定行数的表？

> ID：15166105
> 
> 赞同：1
> 
> 时间：2013-03-01T20:14:37.150
> 
> 标签：jquery, jquery-selectors

我想识别所有行数超过 6 行的表，以及所有行数不超过 6 行的表。

我能想到的最好的办法是遍历每个表的行并计算它们，但必须有一个更优雅的解决方案。除了循环和计数来查找这些表之外，我还能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:17:15.637

您可以[**`jQuery.filter`**](http://api.jquery.com/filter/)为此使用：

```
$("table").filter(function(){
    return $(this).find("tr").length > 6;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:19:05.367

我将使用该[`.filter()`](http://api.jquery.com/filter/)方法仅过滤掉与您的条件匹配的表。在您的情况下，您可以选择表中的所有行并检查长度。像这样的东西：

```
// Get tables with more than six rows
$("table").filter(function (){
   return $("tr", this).length > 6;
}); 
```

[**工作演示**](http://jsfiddle.net/9Z2Ue/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:18:14.860

您正在寻找 .filter()

```
$('table').filter(function(index) {
    return $('tr', this).length > 6;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:23:30.107

这是一种使用[`:gt`](http://api.jquery.com/gt)（大于）选择器为您计算行数的技术：

```
$bigtable = $('table').find('tr:gt(5)').closest('table'); // :gt is zero-indexed 
```

之后，您可以使用[`.not()`](http://api.jquery.not)来获取所有六行或更少行的表：

```
$smtable = $('table').not($bigtable); 
```

[http://jsfiddle.net/mblase75/44YEf/](http://jsfiddle.net/mblase75/44YEf/)

# ios - iOS - xcode 4.5 不执行 AppDelegate 应用程序方法的第一条指令

> ID：15166106
> 
> 赞同：0
> 
> 时间：2013-03-01T20:14:37.497
> 
> 标签：ios, xcode4.5

我需要调试应用程序的提示，它只显示黑屏，但不执行 AppDelegate 中应用程序方法的单个指令。

```
- (BOOL)application:(UIApplication *)application
    didFinishLaunchingWithOption:(NSDictionary *)launchOptions{
      // Override point for customization after application launch.

  NSLog(@"This log is not displayed!?");

  OMManager *manager=[[EMCore getInstance] manager];
  [manager managedObjectModel];
  if([manager applicationLogDirectory]==nil){
    NSLog(@"Application Log is nil");
    exit(1);
  }

  NSString * pass=[[NSUserDefaults standardUserDefaults] stringForKey:@"PASSWORD"];
  //UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad
  NSString *storyboardName=pass==nil?@"Login_iPhone":@"Main_iPhone";

  UIStoryboard *storyboard=[UIStoryboard storyboardWithName:storyboardName bundle:nil];
  UIViewController *controller=[storyboard instantiateInitialViewController];
  [self setWindow:[[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]];
  [[self window] setRootViewController:controller];
  [[self window] makeKeyAndVisible]; 
```

一切正常。我正在加载情节提要，然后是初始视图控制器，直到我尝试添加核心数据。我将它添加到我在代码的几个点中使用的单例中。但是当我运行代码时，它没有显示任何错误（它编译正确），它只是启动并显示黑屏。我删除了我尝试加载核心数据的行，它是相同的，它不是什么都没有。以防我添加了 CoreData 所需的库，我认为是正确的。我在单例中也有一个日志，它也没有被执行，所以问题一定出在其他地方。

我的问题是：在 AppDelegate:application 调用之前会发生什么？我可以在哪里添加日志或其他内容来启动调试并尝试了解这里发生了什么？

*PS：显然我打开了日志屏幕：P*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:21:27.440

我会覆盖 applicationDidEnterForeground 并且你在那里调试。

同样在您的 MainWindow.xib 中，您的应用程序委托对象可能未连接到文件的所有者 (UIApplication)。打开 MainWindow.xib 并单击您的 App Delegate 以查看它是否在 Reference Outlet 与 File's Owner 中有连接，如果没有设置。

# api - 无法通过 SalesForce REST API 访问查找/ID 字段

> ID：15166107
> 
> 赞同：0
> 
> 时间：2013-03-01T20:14:41.503
> 
> 标签：api, rest, salesforce, lookup

我有一个通过 REST API 访问几个 SalesForce 对象的应用程序，但是，我似乎无法检索或设置任何作为查找字段的字段。例如，我有一个 Form__c 对象，它有一个 Campaign 查找字段以及标准 RecordType 字段。如果我通过 REST 运行以下查询：

> *从表单*_c中选择 ID、Campaign_c

我收到一条错误消息，指出没有名为 Campaign__c 的列。

同样，如果我尝试创建一个新的 Form__c 对象并将 RecordTypeId 字段设置为特定的记录类型 ID，则该值实际上永远不会保存在 SalesForce 中。

这是 REST API 的限制吗？它无法使用查找字段吗？还是我做错了什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:52:20.333

在此查询中：

```
SELECT Id, Campaign_c FROM Form_c 
```

看起来 Campaign_c（和 Form_c）缺少下划线。两者都应该以`__c`（两个下划线和一个'c'）结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:52:53.793

检查通过 REST 集成的用户的个人资料？

1.  我怀疑“字段级安全性”会阻止您看到这些字段。
2.  另外 - 为了使用对营销活动的查找，您的用户必须至少具有对它们的读取访问权限（检查营销活动对象是否未选中“读取”或选项卡可见性设置为“隐藏”）。
3.  广告系列很特殊，我不确定您是否不需要在您的用户记录中检查“营销用户”。

至于 RecordType - 很奇怪。如果您的个人资料未设置为能够使用给定的rec，我希望它会抛出错误。类型（即使您是系统管理员）。您是否使用任何可能会吞下错误的库？

最后但并非最不重要 - 触发 REST 描述调用（来自您的应用程序或来自[Workbench](https://workbench.developerforce.com/login.php)）到`/services/data/v26.0/sobjects/Form__c/describe`？

# directory - 最新版本 ClickOnce 应用程序的目录路径

> ID：15166108
> 
> 赞同：1
> 
> 时间：2013-03-01T20:14:46.063
> 
> 标签：directory, clickonce, updates, multiple-versions, assemblyversions

我想知道有没有办法获取ClickOnce Application上一个版本（比当前版本老的最后一个版本）的目录？

像这样的东西？Assembly.GetExecutingAssembly().Location

以上将获取当前正在运行的任何版本的目录。我想获取比这更旧的版本的目录。

旧版本的目录中有一个文件，我在新版本中需要它。所以，我想知道是否有办法找出来。

**这可能有帮助？？** 当我们尝试从控制面板卸载 ClickOnce 应用程序时，它会询问您是要恢复到上一个​​版本还是完全删除该应用程序。既然它说它有能力恢复到上一个​​版本，那么在新版本的某个地方应该有上一个版本的目录，对吧？我想知道那个目录路径。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:46:54.287

没有办法检索该信息。

如果有某种信息需要下一个版本才能访问，处理它的最佳方法是将其存储在应用程序数据中，这样它不会受到 ClickOnce 更新的影响，如[本博客文章中所述](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)。

# devexpress - 如何在 DevExpress LookupEdit 上设置 Selected 值？

> ID：15166109
> 
> 赞同：6
> 
> 时间：2013-03-01T20:14:48.853
> 
> 标签：devexpress

我之前问过一个类似的问题，但代码要复杂得多。这个问题涉及一个类似的问题，但是代码被大大简化了。尽管如此，即使这个例子很简单，我也无法通过下拉菜单预先选择正确的值。

我有一个正确填充值的下拉列表。此外，当我将下拉列表更改为任何值，然后保存我的表单时，数据库记录将更新为正确的值。这很有效，但在表单加载时选择正确的值将不起作用。

我将这些行放在我的保存方法中，只是为了看看我正在使用什么。

```
var test1 = _myLookupEdit.EditValue;  //evaluates to 2
var test2 = _myLookupEdit.Properties.KeyValue;  //evaluates to 2 
```

但是，当我在表单加载期间设置其中任何一个时，什么都没有发生；下拉列表选择了一个空白条目（展开下拉列表时会看到其余值）。我已经尝试了这些方法中的每一个：

```
_myLookupEdit.EditValue = 2;
_myLookupEdit.Properties.KeyValue = 2; 
```

编辑 - 我在 platon 的回答下发表了评论，但我也会在这里发表。我最终使用存储过程而不是 Enum 来填充此下拉列表。从那时起，下拉列表加载了正确的选定值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T20:18:55.093

您需要根据编辑器的 Properties.ValueMember 字段类型的类型将编辑器的 EditValue 属性设置为一个值。我的意思是，如果这是一个字符串字段，EditValue 应该设置为“2”，而不是 2，依此类推。这应该会有所帮助。如果没有，请在设置编辑器的 DataSource 属性后尝试调用编辑器的 Properties.ForceInitialize() 方法。

# cocoa - NSTableView 的 documentView 大小观察

> ID：15166112
> 
> 赞同：3
> 
> 时间：2013-03-01T20:14:57.120
> 
> 标签：cocoa, nstableview, key-value-observing, nsscrollview

我在菜单栏弹出窗口中插入 NSTableView。

我想调整我的弹出面板的大小以使其内容适合 tableview。例如，如果没有行 - tableview 是隐藏的。通过添加新行，我正在根据当前 tableview 高度 + 新单元格的高度重新计算面板的高度。

我正在添加单元格

```
[self.tableView insertRowsAtIndexes:[NSIndexSet indexSetWithIndex:0] withAnimation:NSTableViewAnimationSlideDown]; 
```

并更新面板的高度：

```
[[self window] setFrame:panelRect display:YES animate:YES]; 
```

（都在同一个 addRow 方法中）

这工作正常，但看起来很难看 - 表格视图和窗口彼此分开动画。我想要的只是同步它们，在 tableview 增长和缩小的同时移动窗口的边框。

根据我的 iOS 开发经验，我有一个想法 - 观察 tableview 的 contentSize，但我在这种方法中失败了：

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    ...
    [self.scrollView.documentView addObserver:self forKeyPath:@"bounds.size" options:NSKeyValueObservingOptionNew context:NULL];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    NSLog(@"!");
} 
```

`self.scrollview`链接到 IB 中的 tableview 的容器滚动视图。该代码导致异常：

```
An instance 0x10053a1d0 of class NSConcreteValue was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
<NSKeyValueObservationInfo 0x10053c850> (
<NSKeyValueObservance 0x10053c7a0: Observer: 0x10053a160, Key path: size, Options: <New: YES, Old: NO, Prior: NO> Context: 0x0, Property: 0x10053c880>
) 
```

使用`frame.size`keypath 会导致同样的异常。使用只`frame`返回不回调。

将感谢任何导致我在 KVO 中出现错误或使用窗口调整大小功能实现 tableview 的其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:17:47.513

可能无法解决您的动画问题。但是你应该在对象被释放之前从对象中移除你的观察者。这将使异常消失。即在这种情况下你应该

~~`[self.scrollView.documentView removeObserver:self forKeyPath:@"bounds.size"]`;~~

```
[self.scrollView.documentView removeObserver:self forKeyPath:@"frame"] 
```

这应该在 self.scrollView.documentView 内存不足之前完成。考虑到这可能很棘手，您可以尝试像这样添加观察者：

~~`[self addObserver:self forKeyPath:@"self.scrollView.documentView.bounds.size" options:NSKeyValueObservingOptionNew context:Nil];`~~

```
[self addObserver:self forKeyPath:@"self.scrollView.documentView.frame" options:NSKeyValueObservingOptionNew context:Nil]; 
```

我记得在某处读到的另一件事是，观察框架或边界通常不被认为是一个好主意，但我不确定这一点。

编辑：考虑其他答案：“ `bounds.size`”不起作用，因为`size`没有直接使用任何setter方法设置。因此，改为观察框架并从中提取尺寸信息。（对于 UIView 只有框架是可观察的而不是边界。我想这同样适用于 NSView）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T08:01:08.157

1.  bounds 和 frame 是 C 类型的结构，而不是对象。
2.  尽管 Cocoa 会自动用 NSValue 包裹 bounds 和 frame，但 NSRect 不会包裹 NSSize。
3.  更改通知将由 setXXX 函数触发。尝试添加一个按钮，并编写如下操作：

    [self.scrollView.documentView setBounds:NSMakeRect(0, 0, 100, 100)];

# jquery - 将简单对象和集合传递给 MVC3 控制器 - 传统的正确用法是什么？

> ID：15166116
> 
> 赞同：0
> 
> 时间：2013-03-01T20:15:16.353
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc, asp.net-mvc-3

我正在尝试为这个 AJAX 请求获取正确的语法。我知道我需要为我的列表使用 'traditional: true' 参数，但它破坏了正在传递的其他参数：

```
$.ajax({
    type: 'GET',
    dataType: 'json',
    url: '../Workflow/GetTasks',
    contentType: "application/json",
    data: {
        queueID: filterData.queueID,
        workflowFilterID: filterData.workflowFilterID,
        genericFilters: filterData.genericFilters
    },
    traditional: true,
    success: function (data) {
    },
    error: function (error) {
        window.console && console.error(error);
    }
}); 
```

我的控制器的 GetTasks 方法：

```
public ActionResult GetTasks(TaskFilter taskFilter)

public class TaskFilter
{
    public int QueueID { get; set; }
    public int WorkflowFilterID { get; set; }
    public List<GenericFilter> GenericFilters { get; set; }
}

public class GenericFilter
{
    public int AttributeID { get; set; }
    public string FirstValue { get; set; }
    public string SecondValue { get; set; }
} 
```

我可以成功获取我的 queueID 和`workflowFilterID`. 根据我的设置，我要么得到 null ，要么得到`GenericFilters`一个空列表，要么得到一个包含 2 个项目的列表，但没有设置任何项目属性。

目前，传递`traditional: true`结果`queueID`并被`workflowFilterID`定义，但`genericFilters`它是一个包含 0 个项目的列表。如果我注释掉传统参数，我会收到一个包含 2 个空对象的列表。

有人可以帮我解决这个问题吗？我试过包裹`genericFilters`在`$.param(filterData.genericFilters, true)`. 我已经尝试`JSON.stringify()`过整个对象..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:30:35.300

我想知道一些事情，但最重要的是，应该发布像列表这样的复杂对象。

试试这个：

```
$.ajax({
    type: 'POST',
    dataType: 'json', 
```

# linux - 编写一个删除另一个文件中的变量的 bash 脚本

> ID：15166117
> 
> 赞同：0
> 
> 时间：2013-03-01T20:15:18.027
> 
> 标签：linux, bash

好的，所以我昨晚问了如何将变量添加到另一个文件的行尾的问题，并得到了很好的答案，顺便谢谢你！现在我想做相反的事情。
我正在编写一个 bash 脚本，它基本上撤消了我对第一个所做的操作。作为其中的一部分，我有相同的变量，现在我想从另一个文件中删除它，这次它可能在该文件中的任何位置，我只想删除它而不更改文件或破坏它所在的行。甚至没有确定从哪里开始，但是。说我有

```
echo -e "Enter inside IP address to be Removed: \c"
read inside_ip 
```

`$inside_ip`现在我需要一个从文件中删除的命令，该命令`list-of-ips`是单行 IP，例如

```
1.1.1.1 2.2.2.2 3.3.3.3 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:15:14.070

有点不清楚，但这应该让你开始：

```
$ cat input
1.1.1
2.2.2
3.3.3
4.4.4
5.5.5

$ ip='3.3.3'

$ sed "/$ip/d" input
1.1.1
2.2.2
4.4.4
5.5.5 
```

请注意`"`上面 sed 命令中的引号，`"`允许 shell 执行参数扩展，如果您改为使用单引号`'`，sed 会查找文字字符串`$ip`，而您不希望这样。

用于`sed -i`进行内联更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:01:26.393

正如弗雷德里克所提到的，使用 sed 会起作用，但我会使用以下内容，因为你的结果都在一行上......

假设文件**foo.txt**包含以下内容：

```
1.1.1.1 2.2.2.2 3.3.3.3 4.4.4.4 
```

您可以使用以下方法删除您的 ip：

```
ip="3.3.3.3"
sed -i 's/\b'$ip'\b//g' foo.txt 
```

结果将是：

```
1.1.1.1 2.2.2.2  4.4.4.4 
```

这将在行内全局删除匹配项（如果您有多个匹配项）。还要记住，IP 地址中的点表示正则表达式中的任何字符匹配，因此出现意外匹配的可能性很小。如果需要，您可以在 ip 变量中放置反斜杠以避免它。

# drupal - Drupal 7 - 节点编辑或节点添加的模板覆盖

> ID：15166121
> 
> 赞同：1
> 
> 时间：2013-03-01T20:15:26.650
> 
> 标签：drupal, drupal-7, drupal-theming, drupal-templates

我正在尝试为节点添加或编辑屏幕创建一个模板文件，我可以使用**node--contenttype.tpl.php**覆盖正常的节点负载，但有人知道如何进行编辑或添加吗？这是针对 Drupal 7 而不是 6。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:25:44.593

这实际上取决于您覆盖模板的目的，但我建议您使用 page--node--edit.tpl.php - 它将在您网站的每个节点编辑页面上调用（即不是内容-type specific) - 或者使用 arg() 函数在你的 node--contenttype.tpl.php 中添加一个条件：

```
if (arg(2) == 'edit') {

  // your overriding code here

} 
```

您还应该知道，这仅在您在节点编辑页面中使用自定义主题时才有效，这不是默认 drupal 安装中的默认行为。

# php - 从 PHP 中的函数返回多个值

> ID：15166127
> 
> 赞同：0
> 
> 时间：2013-03-01T20:15:37.543
> 
> 标签：php

我有这个函数在调用它时返回三个值。

```
function GetCashierDetail ($UserID){

    $GetCashierID = "SELECT cashiers_CashierID,cashiers_Total,cashiers_Last_Total
                     FROM `cashiers`
                     WHERE `cashiers_CashierCloseDate` is null and `cashiers_Status`='0'
                     and `cashiers_Delete` = '0' and `cashiers_User` = '".$UserID."'";

    $objQueryCashierID = mysql_query($GetCashierID) or die ("Error Query [".$strSQL."]");
    $GetCashierIDResult = mysql_fetch_array($objQueryCashierID);
    $BillsCashierID = $GetCashierIDResult['cashiers_CashierID'];
    $CashierTotal = $GetCashierIDResult['cashiers_Total'];
    $CashierLastTotal = $GetCashierIDResult['cashiers_Last_Total'];
    $num = mysql_affected_rows();

    // Return Data
    return $cashier_data = array('cashierId'        => $BillsCashierID ,
                                 'CashierTotal'     => $CashierTotal ,
                                 'CashierLastTotal' => $CashierLastTotal);
} 
```

现在调用这个函数时`GetCashierDetail (11)`，我需要`$cashier_data`像这样打印 on 变量：

```
$ID = $BillsCashierID 
```

以其他方式使用它。

我会尝试：

```
class Bills {

    // Get Cashier ID
    function GetCashierDetail ($ausers_ID){

        $GetCashierID = "SELECT cashiers_CashierID,cashiers_Total,cashiers_Last_Total
                         FROM `cashiers`
                         WHERE `cashiers_CashierCloseDate` is null and `cashiers_Status`='0'
                         and `cashiers_Delete` = '0' and `cashiers_User` = '".$UserID."'";
        $objQueryCashierID = mysql_query($GetCashierID) or die ("Error Query [".$strSQL."]");
        $GetCashierIDResult = mysql_fetch_array($objQueryCashierID);
        $BillsCashierID = $GetCashierIDResult['cashiers_CashierID'];
        $CashierTotal = $GetCashierIDResult['cashiers_Total'];
        $CashierLastTotal = $GetCashierIDResult['cashiers_Last_Total'];
        $num = mysql_affected_rows();
        // Return Data
        return $cashier_data = array('cashierId'        => $BillsCashierID ,
                                     'CashierTotal'     => $CashierTotal ,
                                     'CashierLastTotal' => $CashierLastTotal);
    }

}

$BillDraftSubmit = new Bills();
$data = $BillDraftSubmit->GetCashierDetail(71);
$cashierId = $data["cashierId"];
$CashierTotal = $data["CashierTotal"];
$CashierLastTotal = $data["CashierLastTotal"];
echo "cashierId" . $cashierId;
echo "<br>CashierTotal" . $CashierTotal;
echo "<br>CashierLastTotal" . $CashierLastTotal; 
```

但我无法得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:18:56.570

怎么样：

```
$arr = GetCashierDetail (11);
extract($arr);
print $cashierId." ".$CashierTotal." ".$CashierLastTotal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:18:10.143

```
$return = GetCashierDetail(11);
$id = $return['cashierId']; 
```

RTM： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:17:55.870

只需返回数组，无需将其分配给任何东西。IE

```
return array('cashierId'=>$BillsCashierID ,
                      'CashierTotal'=>$CashierTotal ,
                      'CashierLastTotal'=>$CashierLastTotal ); 
```

或者做

```
$cashier_data = array('cashierId'=>$BillsCashierID ,
                      'CashierTotal'=>$CashierTotal ,
                      'CashierLastTotal'=>$CashierLastTotal ); 
return $cashier_data; 
```

然后当您将其归还时，`$cd = GetCashierDetail(1);`您可以访问`$cd['CashierTotal']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:18:46.257

为什么不只返回一个数组？

```
 function GetCashierDetail ($UserID){
    $GetCashierID = "SELECT cashiers_CashierID,cashiers_Total,cashiers_Last_Total 
    FROM `cashiers` 
    WHERE `cashiers_CashierCloseDate` is null and `cashiers_Status`='0' 
    and `cashiers_Delete` = '0' and `cashiers_User` = '".$UserID."'";
    $objQueryCashierID = mysql_query($GetCashierID) or die ("Error Query [".$strSQL."]");
    $GetCashierIDResult = mysql_fetch_array($objQueryCashierID);
    $BillsCashierID = $GetCashierIDResult['cashiers_CashierID'];
    $CashierTotal=$GetCashierIDResult['cashiers_Total']; 
    $CashierLastTotal=$GetCashierIDResult['cashiers_Last_Total']; 
    $num=mysql_affected_rows();
    // Return Data
    return array('cashierId'=>$BillsCashierID ,
                      'CashierTotal'=>$CashierTotal ,
                      'CashierLastTotal'=>$CashierLastTotal );                      

}  

$user = GetCashierDetail($id);
$ID = $user['cashierId'];
echo $ID; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T20:18:52.407

```
//$UserID - your user's id
$result = GetCashierDetail ($UserID);
//now just using as normal array, for example
echo $result['cashierId']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T20:20:03.683

如果我正确理解了您的问题，您希望显示 Cashier ID 的值。

你可以这样做..

```
$cashierData = GetCashierDetail(11);

$ID = $cashierData['cashierId'];

echo 'cashier ID is: ' . $ID; 
```

同样，您也可以通过`$cashierData['CashierTotal']`等获得 CashierTotal

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T20:20:12.637

我不确定我是否对你正确...

```
list($id,,) = GetCashierDetail(11);

echo $id; 
```

# android - 使用 -march=armv6 选项时，Android 本机代码在模拟器上引发 SIGILL 错误

> ID：15166128
> 
> 赞同：0
> 
> 时间：2013-03-01T20:15:38.803
> 
> 标签：android, native-code, fault

我正在尝试 Android NDK 示例位图等离子。我已将这一行添加到 Android.mk

> LOCAL_CFLAGS := -march=armv6

但是在模拟器上运行它时出现 SIGILL 错误。否则，它会起作用。我正在使用最新的 NDK（使用 cygwin）和更新的 SDK。为什么这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:21:47.233

目前安卓模拟器似乎只支持（官方）armv5原生代码。

# hibernate - 使用jpa和hibernate持久化多个对象，失败时恢复

> ID：15166130
> 
> 赞同：1
> 
> 时间：2013-03-01T20:15:55.873
> 
> 标签：hibernate, jpa, transactions, iteration, persist

我知道 SO 有很多关于通过 jpa/Hibernate 持久化对象时验证数据的帖子。大多数答案都说应该在持久化之前执行数据读取，以便在实际持久化期间很少抛出异常。

这与依赖数据库约束相反，对性能有不良影响。此外，在持久化之前大量读取数据的原因似乎很重要，因为我们真的不知道休眠异常何时以及如何出现。但是根据这种推理，如果由于罕见的原因而出现异常，我们仍然无法以好的方式处理它。

所以，我的想法是使用一个 bean (beanA) 来迭代对象列表，并在每次迭代中调用另一个 bean(beanB)，该 bean(beanB) 具有一个名为 persistOneObject() 的方法。persistOneObject() 被注释为@requires_new。因此，只有在失败时才会回滚单个事务，然后我们继续处理新事务中的下一个对象。

这在理论上应该有效还是因为您不确定 Hibernate 何时真正提交等而难以达到这种行为？这是糟糕的设计吗？我现在不会提供任何代码示例，因为我想听听关于设计的一般想法，而不是关于实现的具体想法。有没有其他方法可以解决它？还是我应该在坚持之前先阅读？

谢谢！

# c# - 如何使用 DataGridView 显示此数组的内容？

> ID：15166132
> 
> 赞同：6
> 
> 时间：2013-03-01T20:16:11.440
> 
> 标签：c#, arrays, visual-studio-2010, datagridview

我创建了一个二维字符串数组并填充了它。我尝试将它绑定到 DataGrid 控件，如下所示：

```
string[][] Array = new string[100][];
dataGridView.DataSource = Array; 
```

我没有看到数组的内容，而是看到了以下列：Length、LongLenth、Rank、SyncRoot、IsReadOnly、IsFixedSize、IsSyncrhonized。

因此，它不是显示我的数组的内容，而是显示数组的属性。我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:30:54.773

当您允许网格控件自动生成列时，它将基本上枚举该对象的属性并为每个属性创建一个列。它无法知道您是否要将其显示为数组值的网格。

您需要使用要绑定为列的属性从数组中创建一个新对象（例如类的可枚举列表）。一种快速的方法是使用匿名类型，使用 LINQ 查询构建。就像是：

```
string[][] Array = new string[100][];
for(int i = 0; i < 100; i++) // Set some values to test
   Array[i] = new string[2] { "Value 1", "Value 2" };

dataGridView.DataSource = (from arr in Array select new { Col1 = arr[0], Col2 = arr[1] });
Page.DataBind(); 
```

在这里，我们遍历数组的所有 100 个元素。每个元素都是 2 个字符串的数组。我们正在用这两个字符串创建一个匿名类型。这种类型有两个属性：`Col1`和`Col2`。 `Col1`将设置为数组索引 0，并将`Col2`设置为数组索引 1。然后，我们将网格构建为匿名类型的枚举。这看起来像：

![在此处输入图像描述](../Images/c06e70dd7b2b308139ae74117fae3e85.png)

您当然可以通过设置为 False 来准确定义如何创建列`AutoGenerateColumns`，并填充`Columns`集合。这也可以在您的 ASPX 文件中以声明方式完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:33:22.097

您需要将数组转换为数据表

```
string[][] Array = new string[100][];
DataTable dt= new DataTable();

int l= Array.length;

for(int i=0;i<l;i++) {
     dt.LoadDataRow(Array[i], true); //Pass array object to LoadDataRow method
}

dataGridView.DataSource = dt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:33:38.133

你可以做这样的事情

```
string[][] Array = new string[100][];

ArrayList arrList = new ArrayList();
for(int i=0;i<100;i++)
{
    arrList.Add(new ListItem(Array[i, 0], Array[i, 1]));
}
Grid2D.DataSource = arrList;
Grid2D.DataBind(); 
```

请参阅此链接[**Binding Arrays to GridView in ASP.Net**](http://www.aspsnippets.com/articles/binding-arrays-to-gridview-in-asp.net.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T23:59:32.337

```
using Linq;

var Found = (from arr in myArray2D select 
new { row1 = arr[0], row2 = arr[1], row3 = arr[2] })
.Where(y => (y.row1.ToUpper() + y.row2.ToUpper())
.Contains(sText.ToUpper()))
.OrderByDescending(y => Convert.ToInt32(y.row3)).ToList();
dataGridViewFind.DataSource = Found;
dataGridViewFind.AutoResizeColumns(); 
```

# objective-c - 延迟文件关闭

> ID：15166135
> 
> 赞同：0
> 
> 时间：2013-03-01T20:16:26.773
> 
> 标签：objective-c, cocoa, document-based

我有一个`document based application`，当应用程序关闭时，我需要在网络浏览器中加载一个 url。它工作正常，除了`NSDocument`可以加载此页面之前关闭。

我需要它等待`200 ms`然后关闭文档。

我找到了，`NSTerminateLater`但它是指应用程序，而不是文档。我怎样才能做到这一点？

这就是我现在所拥有的：

```
- (id)init
{
self = [super init];
if (self) {
    _statssent = NO;

    // Observe NSApplication close notification
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(_sendstats)
                                                 name:NSApplicationWillTerminateNotification
                                               object:nil];
}
return self;
}

- (void)_sendstats
{
if (!_statssent)
{
    _statssent = YES;

    if (hasuploaded == 1)
    {
            [self updatestatsUploads:0 progloads:1];
    }

 }
}

 - (void)close
{
[self _sendstats];

[super close];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:34:49.630

就在关闭文档之前，您可以发出通知，您的应用程序委托可以注册为观察者。

当您的应用程序委托收到通知（可能会传达您需要打开的 URL）时，可以调用您的应用程序委托上的方法来为您打开 URL。

您可以通过使用`NSNotificationCenter`每个 Cocoa 应用程序附带的实例来做到这一点（更准确地说，它是一个单例）。您的文档会发出如下通知：

```
NSDictionary *myUserInfo = [NSDictionary dictionaryWithObjectsAndKeys:@"http://www.apple.com", @"MyURL", nil];
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyNotificationName" object:self userInfo:myUserInfo]; 
```

在您的应用程序委托中，可能在您的`-awakeFromNib`方法中，您将使用如下内容：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myURLOpenerMethod:) name:@"MyNotificationName" object:nil]; 
```

在您的应用程序委托的某处，您可以像这样定义 URL 打开器：

```
- (void)myURLOpenerMethod:(NSNotification *)notification
{
    NSString *urlString = [[notification userInfo] objectForKey:@"MyURL"];
    // use 'urlString' to open your URL here
} 
```

您*不想*尝试使用延迟来获得您想要的东西。我向你保证：那是疯狂所在。

# php - 服务器上有多少个类的实例？

> ID：15166140
> 
> 赞同：5
> 
> 时间：2013-03-01T20:16:45.200
> 
> 标签：php

**是否有可能知道整个服务器上**有多少个 PHP 类的实例对象（对于所有用户，而不仅仅是一个线程）。

这就是我想这样做的原因。我正在制作纸牌游戏，并且我想要拥有 Room 类（具有唯一的房间名称、玩家目前在房间内在线、已注册的 id ......）所以当一些用户加入服务器以获得新的活动房间列表时。当一个房间被取消（摧毁）时，我会向所有用户发送该信息（基本上是实时房间状态）。

* * *

好的，这就是我想要这样做的原因。我正在制作纸牌游戏项目，我想拥有 Room 类（具有唯一的房间名称，玩家目前在房间里在线，socked id ......）所以当一些用户加入服务器以获得新的活动房间列表时。当一个房间被取消（销毁）时，我会向所有用户发送该信息（基本上是实时房间状态）。我希望你明白我想做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:42:34.507

你想实现一个多用户游戏，所以你应该为它使用**客户端-服务器架构**：设置一个在你的机器上运行并跟踪游戏状态的单一的、持久的**服务器进程。**每个用户请求都由一个 PHP“客户端”脚本处理，该脚本与游戏服务器对话并询问所有必要的信息。

这样，所有`Room`对象和所有玩家状态都存在于一个进程中：服务器。网络服务器（不要与您的游戏服务器混淆）启动客户端线程，它们以您想要的任何方式与游戏服务器异步对话。

如果您的情况非常简单，您也许可以将服务器进程替换为存储游戏当前状态快照的集中式数据库（包括活动房间和相关玩家的完整列表）。每个用户请求从数据库加载游戏状态，并写出任何更改。但我认为长期运行的服务器是更简单的方法。

**编辑：**您的问题表明对 PHP 的工作方式有些困惑。服务器为处理用户请求而启动的 PHP 线程非常短暂。假设您有 5 名玩家已经玩了一个小时。每隔几分钟或几秒钟，玩家就会向您的网络服务器发送一个请求。服务器启动一个处理请求并退出的 PHP 线程。游戏可能会持续几个小时，但**大多数时候*没有*正在运行的线程，*也没有*类的实例可以计算。**在任何时候，你都会有一些没有活跃连接的玩家。所以你需要*某种*持久的实体来在请求之间保持他们的游戏状态，你不妨让它独一无二。

**编辑2：**由于您似乎有点过头了，也许您应该选择第二个选项：忘记进程间通信并将游戏状态保存在数据库中：

每个 php 请求都是一个玩家操作。当用户单击一个按钮或其他任何东西时，您的 php 脚本会从数据库中加载它为游戏当前状态建模所需的所有信息。它会进行任何必要的清理工作（停用所有很久以前停止玩游戏的用户），然后处理用户的操作，保存对数据库的任何更改，并为用户生成一个新页面。然后它退出。这一切只需要一小部分时间。然后下一个用户（或同一个用户）提交另一个动作，你重新开始。

**并发呢**？除非您设法获得大量用户*并且*您的脚本真的很慢，否则不会有任何用户：您一次只能运行一个脚本副本。如果要*禁止*并发执行，请使用数据库事务来确保一次处理一个用户操作。如果这还不够，请了解客户端-服务器架构、进程间通信以及客户端-服务器解决方案所需的所有其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:20:37.873

这绝对是一种粗略的方法，但您只需在类的构造函数中添加一些内容。这可能是记录一些东西、发送电子邮件、读取计数器和增量等......

显然，如果您想知道在任何给定时间点有多少实例，您还需要在析构函数中添加一些东西......

在阅读了您的答案（这应该是对您的原始问题的评论）之后，实现这一点的最佳方法是使用类方法和属性，这样任何实例都可以读取/更改共享计数。您仍然可以使用构造函数和析构函数来增加/减少活动表的计数等...，但该类将保持一个计数，所有实例都可以访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:20:20.300

最简洁的答案是不。非常冗长而令人费解的答案是肯定的，但它需要大量的黑客攻击，或者编辑 php 源代码或使用 gdb（或类似的东西）来检查正在运行的内存。据我所知，绝对没有开箱即用的支持。

更好的问题是你为什么需要这个？您很可能试图解决一个更容易以另一种方式解决的问题。

您可能能够仅在对象实例化和销毁上使用 APC 增量和减量而侥幸，但如果这些对象真的太多以至于您需要对它们进行计数，那么您肯定会导致很大的性能问题。

# python - 烧瓶可选 url 参数不起作用

> ID：15166142
> 
> 赞同：3
> 
> 时间：2013-03-01T20:16:57.680
> 
> 标签：python, url, flask

```
@mod.route('/participate/<survey_id>/', defaults = {'work_id':None}, methods = ['GET','POST'])
@mod.route('/pariicipate/<survey_id>/<work_id>', methods = ['GET', 'POST'])
def participate(survey_id, work_id):
   /* do_something .. */ 
```

我可以访问`http://localhost:5000/participate/512dc365fe8974149091be1f`，或者`http://localhost:5000/participate/512dc365fe8974149091be1f/` ，如果我启动调试器，我可以看到`work_id = None`.

如果我尝试`http://localhost:5000/participate/512dc365fe8974149091be1f/512dc365fe8974149091be1f`或者`http://localhost:5000/participate/512dc365fe8974149091be1f/512dc365fe8974149091be1f/`我得到 404。

为什么会这样？我在路由规则方面做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:38:30.173

您的第二条路线中有错字:)

```
@mod.route('/pariicipate/<survey_id>/<work_id>', methods = ['GET', 'POST']) 
```

应该

```
@mod.route('/participate/<survey_id>/<work_id>', methods = ['GET', 'POST']) 
```

# authentication - 任何用户的 socks5 身份验证状态

> ID：15166150
> 
> 赞同：0
> 
> 时间：2013-03-01T20:17:54.193
> 
> 标签：authentication, socks

在带有 RFC1929（用户/通过身份验证）的 socks5 服务器中，如何知道身份验证用户的请求并跟踪它？我的意思是在主 socks5 调用（客户端/服务器）之后，当经过身份验证的用户想要请求 socks5 服务器以获取 Web 上资源的数据时，必须再次通过用户/通行证，否则第一次调用是可以的，并且 socks5 服务器可以处于以下状态用户代表进行身份验证，并且一旦身份验证调用就可以了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:47:54.473

客户端每次连接仅向 socks 服务器验证一次。客户端连接到 socks 服务器并将请求的目标地址/主机、端口和 socks 身份验证凭据（如果有）传递给它。如果 socks 服务器接受请求，那么它会连接到目标服务器并将结果通知客户端。如果成功，则客户端发送到 socks 服务器的任何后续数据都按原样发送到目标服务器，反之亦然，目标服务器发送的任何数据都按原样传递给客户端，在连接的生命周期内来回传递. 如果客户端使用 http keep-alives，那么它可以使用单个连接请求多个 Web 资源。否则，它必须为它建立的每个新连接重新连接和重新授权。

# javascript - 我可以提取前任的创建日期吗？

> ID：15166152
> 
> 赞同：0
> 
> 时间：2013-03-01T20:17:58.100
> 
> 标签：javascript, rally

我想创建一个应用程序，列出用户故事及其前身以及他们创建（添加）到 Rally 的日期。

有什么我可以使用的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:11:33.257

这里有一个简单的例子来说明如何做到这一点。您可以通过创建一个格式化函数来将 Predecessor FormattedID 呈现为链接来使它变得更有趣，但这应该给您基本的想法：

```
 <!DOCTYPE html>
    <html>
    <head>
        <title>UserStoryWithPredecessors</title>

        <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p5/sdk.js"></script>

        <script type="text/javascript">
            Rally.onReady(function() {
                Ext.define('CustomApp', {
                    extend: 'Rally.app.App',
                    componentCls: 'app',

                    launch: function() {
                        Ext.create('Rally.data.WsapiDataStore', {
                            model: 'UserStory',
                            fetch: ['FormattedID','Name','Predecessors','FormattedID','CreationDate'],
                            autoLoad: true,
                            listeners: {
                                load: this._onDataLoaded,
                                scope: this
                            }
                        });
                    },                

                    _onDataLoaded: function(store, data) {
                        var records = [];
                        Ext.Array.each(data, function(record) {
                            //Perform custom actions with the data here
                            //Calculations, etc.

                            var myPredecessors = record.get('Predecessors');

                            var predecessorData = "";
                            var predecessorCreationDate = "";

                            // Loop through and process Predecessor data
                            for (var i=0; i<myPredecessors.length; i++) {
                                thisPredecessor = myPredecessors[i];
                                thisPredecessorFormattedID = thisPredecessor["FormattedID"];
                                thisPredecessorName = thisPredecessor["Name"];

                                // Re-format Date/time string
                                thisPredecessorCreationDateString = thisPredecessor["CreationDate"];
                                thisPredecessorCreationDate = new Date(thisPredecessorCreationDateString);
                                thisYear = thisPredecessorCreationDate.getFullYear();
                                thisMonth = thisPredecessorCreationDate.getMonth();
                                thisDay = thisPredecessorCreationDate.getDate();

                                thisPredecessorFormattedDate = thisMonth + "/" + thisDay + "/" + thisYear;

                                // Post-pend updated data to value for array
                                predecessorData += thisPredecessorFormattedID + ": " + thisPredecessorName + "<br>"                            
                                predecessorCreationDate += thisPredecessorFormattedDate + "<br>";                                    
                            }

                            records.push({
                                FormattedID: record.get('FormattedID'),
                                Name: record.get('Name'),
                                Predecessors: predecessorData,
                                PredecessorCreationDate: predecessorCreationDate
                            });
                        });

                        this.add({
                            xtype: 'rallygrid',
                            store: Ext.create('Rally.data.custom.Store', {
                                data: records,
                                pageSize: 20
                            }),
                            columnCfgs: [
                                {
                                    text: 'FormattedID', dataIndex: 'FormattedID', width: '60px'
                                },
                                {
                                    text: 'Name', dataIndex: 'Name', width: '400px'
                                },
                                {
                                    text: 'Predecessors', dataIndex: 'Predecessors', width: '200px'
                                },
                                {
                                    text: 'Predecessor Creation Date(s)', dataIndex: 'PredecessorCreationDate', width: '200px'
                                }
                            ]
                        });
                    }
                });
                Rally.launchApp('CustomApp', {
                    name: 'UserStoryWithPredecessors'
                });
            });
        </script>

        <style type="text/css">
            .app {
                 /* Add app styles here */
            }
        </style>
    </head>
    <body></body>
    </html> 
```

# php - 不可直接访问的登录表单是否有助于阻止机器人？

> ID：15166157
> 
> 赞同：3
> 
> 时间：2013-03-01T20:18:13.550
> 
> 标签：php, login

我阅读了一种可能的措施来过滤垃圾邮件并希望获得意见（建议）。

测量是这样的：

1) 登录表单不能直接访问。我的意思是如果有人进入 www.domain.com/login.php 他会被重定向到索引或类似的东西。

2) 在 index.php 上是按钮登录。当访问者点击登录时，会弹出登录表单。登录后，我检查 $_SERVER["HTTP_REFERRER"]。如果不是login.php，则报错（失败）

这样的措施有用吗？可能代替 $_SERVER["HTTP_REFERRER"] 可以使用其他东西？这种方法是否合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T20:10:41.177

我会说：**不是真的**。但有一个更好的解决方案，见下文。

问题是，优秀的机器人可以做人类可以做的所有事情。大多数机器人甚至比人类“更好”，因为他们知道登录系统是如何工作的等等！使用 JavaScript/Iframe/AJAX-constructs 来防止机器人将有助于对抗只搜索文本输入和密码输入表单的主流爬虫。即使您的网站使用了超棒的间接可访问登录表单，即使这样，也有人可能会为该用例构建一个机器人。

**一个很好的解决这个问题的方法：**

1.  使用延时登录拦截器！这里有一个关于如何延迟 - 最后甚至阻止 - 在大量失败登录后的登录尝试的教程：http: [//www.codedevelopr.com/articles/throttle-user-login-attempts-in-php/](http://www.codedevelopr.com/articles/throttle-user-login-attempts-in-php/)

2.  此外，在第一次登录失败后使用高端验证码。

3.  对于真正的坏人：如果您从一个特殊 IP 获得大量登录失败，则阻止该 IP。这是相当先进的，但一种常见的做法。

（请注意：本教程的作者仍然使用 mysql_query，它已经过时多年了。你应该用 mysqli 或 PDO 来做。）

# scala - 如何从一个元组中收集一个 Either 的左边？

> ID：15166159
> 
> 赞同：2
> 
> 时间：2013-03-01T20:18:13.707
> 
> 标签：scala, either

在对一堆类型为 Either[String, A] （其中 A 不止一种类型）的 Eithers 进行匹配之后，我想将左侧的任何字符串累积到一个列表中。

```
(a, b, c, d, e) match {
  case (Right(a), Right(b), Right(c), Right(d), Right(e)) => {
    "All good, use a, b, c, d, and e!"
  }
  case anythingElse => {
    val strings = accLefts(anythingElse)
    doSomethingWithStrings(strings)
  }
} 
```

如果我尝试`.productIterator.toList`使用元组，我最终会得到 List[Any]。如果我分别处理每个失败的案例（右和左的组合），我最终会得到成倍数量的案例陈述。

如何在最后获得 List[Either[String, Any]] 以传递给我的 accLefts 调用？或者我应该做一些除了比赛之外的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:14:39.657

这*正是*[Scalaz](https://github.com/scalaz/scalaz)（本质上是增强版`ValidationNEL`）旨在支持的那种东西。例如，假设我们使用 Scalaz 7 进行以下设置：`Either`

```
import scalaz._, Scalaz._

case class Person(first: String, last: String, initial: Char, age: Int)

val first = "John".successNel[String]

val last = "Doe".successNel[String]
val badLast = "Empty last name".failureNel[String]

val initial = 'H'.successNel[String]
val badInitial = "Non-alphabetic MI".failureNel[Char]

val age = 45.successNel[String]
val badAge = "Negative age provided".failureNel[Int] 
```

请注意，`Nel`此处代表*非空列表*，它 `"John".successNel[String]`或多或少等同于`Right("John"): Either[List[String], String]`等。

现在我们可以编写以下内容：

```
scala> println((first |@| last |@| initial |@| age)(Person.apply))
Success(Person(John,Doe,H,45)) 
```

或者：

```
scala> println((first |@| badLast |@| initial |@| badAge)(Person.apply))
Failure(NonEmptyList(Empty last name, Negative age provided)) 
```

或者：

```
scala> println((first |@| badLast |@| badInitial |@| badAge)(Person.apply))
Failure(NonEmptyList(Empty last name, Non-alphabetic MI, Negative age provided)) 
```

任何错误都会累积在`ValidationNEL`. [有关更多详细信息，请参见](https://stackoverflow.com/a/12309023/334519)例如我的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T20:22:08.863

也许使用嵌套模式匹配？

```
case anythingElse => {
    val strings = anythingElse
                    .productIterator
                    .collect { case Left(str: String) => str }
                    .toList
    doSomethingWithStrings(strings)
} 
```

请注意，`str: String`这里是为了指导类型推断，因此字符串的类型`List[String]`不是`List[Any]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:20:03.803

我可能会创建一组实用功能，例如

```
def fromTuple2[A, That](t: Tuple2[A,A])(implicit bf : CanBuildFrom[Nothing, A, That]): That =
  (bf.apply() += (t._1, t._2)).result(); 
```

对于您需要的所有*n元组。*虽然这是很多样板代码，但它只是一次性工作。然后您可以执行以下操作：

```
val e1: Either[String,Int] = Right(3);
val e2: Either[String,String] = Left("3");
val test: List[Either[String,Any]] = fromTuple2(e1, e2); 
```

也许更好，我们可以使用丰富的隐式方法，例如

```
implicit def fromTuple2Impl[A](t: Tuple2[A,A]) = new {
  def asCollection[That](implicit bf : CanBuildFrom[Nothing, A, That]): That =
    (bf.apply() += (t._1, t._2)).result();
} 
```

只写

```
val test: List[Either[String,Any]] = (e1, e2).asCollection; 
```

* * *

**编辑：**我们甚至可以将元组丰富为`Traversable`s，这为我们提供了所有方法，如`toList`、折叠等：

```
implicit def fromTuple2Impl3[A](t: Tuple2[A,A]) = new Traversable[A] {
  def asCollection[That](implicit bf : CanBuildFrom[Nothing, A, That]): That =
    (bf.apply() += (t._1, t._2)).result();
  override def foreach[U](f: (A) => U): Unit = {
    f(t._1); f(t._2);
  }
} 
```

通过更多的工作，我们可以进一步实施`IndexedSeq`。

# java - 提交 Grid Engine 作业时缺少 Java 库

> ID：15166169
> 
> 赞同：0
> 
> 时间：2013-03-01T20:18:55.217
> 
> 标签：java, qsub, sungridengine

当我 qsub 运行 java 程序的脚本时，我收到此错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：/usr/java/jdk1.6.0_16/jre/lib/amd64/xawt/libmawt.so：libXtst.so.6：无法打开共享对象文件：没有这样的文件或java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1778) 的 java.lang.ClassLoader$NativeLibrary.load(Native Method) 的 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1674) 的目录。 Runtime.load0(Runtime.java:770) 在 java.lang.System.load(System.java:1003) 在 java.lang.ClassLoader$NativeLibrary.load(Native Method) 在 java.lang.ClassLoader.loadLibrary0(ClassLoader. java:1778) 在 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1695) 在 java.lang.Runtime.loadLibrary0(Runtime.java:823) 在 java.lang.System.loadLibrary(System.java:1028) 在sun.security.action.LoadLibraryAction。在 java.awt.Toolkit.loadLibraries(Toolkit.java:1592) 在 java.awt.Toolkit.(Toolkit.java:1614) 在 java.security.AccessController.doPrivileged(Native Method) 在 run(LoadLibraryAction.java:50) 在java.awt.Font.(Font.java:210) 在 savant.settings.BrowserSettings.(BrowserSettings.java:37) 在 savant.util.NetworkUtils.getSeekableStreamForURI(NetworkUtils.java:185) 在 savant.data.sources.BAMDataSource .(BAMDataSource.java:62) 在 IReckon.WholeGenomeExecution.main(WholeGenomeExecution.java:208)NetworkUtils.getSeekableStreamForURI(NetworkUtils.java:185) at savant.data.sources.BAMDataSource.(BAMDataSource.java:62) at IReckon.WholeGenomeExecution.main(WholeGenomeExecution.java:208)NetworkUtils.getSeekableStreamForURI(NetworkUtils.java:185) at savant.data.sources.BAMDataSource.(BAMDataSource.java:62) at IReckon.WholeGenomeExecution.main(WholeGenomeExecution.java:208)

但是，当我 qrsh 进入一个节点并运行脚本时，我没有收到错误消息。

我正在像这样运行 qsub： qsub -cwd -V

也许我需要设置一些环境变量，但 -V 不会处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:38:34.003

`libXtst.so.6`该系统位于何处？

很可能，Grid Engine 使用的方式`LD_LIBRARY_PATH`与您手动登录时不同。看起来有点奇怪的安装。

对于 Grid Engine 的使用，我还建议避免使用 AWT。

# sql-server - 编译为 t-sql 的语言

> ID：15166170
> 
> 赞同：10
> 
> 时间：2013-03-01T20:18:55.937
> 
> 标签：sql-server, sql-server-2008, tsql, dsl

我在工作中编写了很多 t-sql，并且经常希望有某种类型的扩展可用（例如，TypeScript 之类的东西适用于 Javascript——你可以创建类和所有这些面向对象的东西，它只是编译成标准的 Javascript ）。

我想要的一个简单的例子（语义应该在课程之外进行改进）：

```
-- Input:
def $t sysname
$t = 'Table1'
select * from $t
-- Output:
select * from Table1

-- Input (issues: remove last comma, newline characters):
def $t sysname
set $t = 'Table1'
;with Units as (select distinct Unit from $t),
[repeat @i; i=1; i<4]S$i as (select Unit, count(*) C from $t where T = $i group by Unit),[endrepeat]
select distinct [repeat (@i; i=1; i<4)]isnull(S$i.C, 0) C$i,[endrepeat]
from Units u
    [repeat @i; i=1; i<4]left join S$i on (u.Unit = S$i.Unit)[endrepeat]
group by [repeat @i; i=1; i<4]S$i.C,[endrepeat]
order by [repeat $i; i=4; i>0]S$i.C desc,[endrepeat]
-- Output:
;with Units as (select distinct Unit from Table1),
S1 as (select Unit, count(*) C from Table1 where T = 1 group by Unit),
S2 as (select Unit, count(*) C from Table1 where T = 2 group by Unit),
S3 as (select Unit, count(*) C from Table1 where T = 3 group by Unit)
select distinct isnull(S1.C, 0) C1, isnull(S2.C, 0) C2, isnull(S3.C, 0) C3
from Units u
    left join S1 on (u.Unit = S1.Unit)
    left join S2 on (u.Unit = S2.Unit)
    left join S3 on (u.Unit = S3.Unit)
group by S1.C, S2.C, S3.C
order by S3.C desc, S2.C desc, S1.C desc

-- Input (sq = singlequotes):
declare @sql varchar(max), @year int
set @year = 2012
set @sql = [sq]
select JobId, InventoryItem
from openquery(MyLinkedServer, '
    select JobId, InventoryItem
    from Jobs
    where year(Created) = {@year}
        and Type <> {TypeA}
') x
[endsq]
exec @sql
-- Output:
declare @sql varchar(max)
declare @year int
set @year = 2012
set @sql = '
    select  JobID, InventoryItem
    from    openquery (MyLinkedServer, ''
            select  JobID, InventoryItem
            from    XXX.Jobs
            where   year(Created) = ' + convert(varchar, @year) + '
                    and Type <> ''''TypeA''''
            order by "Created" desc
    '') x
'
exec @sql 
```

看起来我需要编写自己的 DSL 来实现它，但以前从未使用过它，所以任何想法都更受欢迎。Visual Studio 可视化和建模 SDK (VMSDK) 是否是此类项目的正确选择？它会变得多复杂？:)

编辑 - 建议使用 ORM，但这将直接从 SSMS 运行，而不是从 c# 或 java 之类的语言运行......我的意思是，不会有对象和东西，只有查询。我删除了 c# 标签，因为它具有误导性。这个想法更倾向于 SSMS 插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-30T13:25:04.530

也许 BQL 规范符合要求？（有关规格，请参阅链接）

> JavaScript 有 CoffeeScript、Dart、Typescript 等。CSS 有 LESS 和 SCSS。
> 
> 为什么不适合 SQL 呢？
> 
> 所以我扮演了魔鬼的拥护者并说：“如果 SQL 是一个编译目标怎么办？”
> 
> 在这样做的过程中，我发现自己想要一种语言：
> 
> *   **SQL 的严格超集。**这很重要，因为它促进了干净的过渡。可以逐步迁移他们的 SQL 代码库，因为所有有效的 SQL 在这种语言中也是有效的。
> *   **促进良好和高效的 SQL 实践**
> *   **促进保持 SQL 代码干燥**
> *   **转译成易于阅读的 SQL**

[http://tech.pro/blog/1917/a-better-query-language-bql-language-specification](http://tech.pro/blog/1917/a-better-query-language-bql-language-specification)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T02:05:05.877

Have you looked at linqpad.you can write a `Linq` query and see the generated sql

Its not a SSMS plugin but an Application of its own just like SSMS.

[LinqPad](http://www.linqpad.net/)

![LinqPad](../Images/d1d2c57477380a87d56e57eff6f0a406.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T22:27:06.833

根据你所说的你想要标注或代码重用是 . 我可以为您提供一些我在 SQL 中经常使用的东西。

1.  老实说，如果你想用不同的预设来定义结果，我建议你只创建像视图、函数和过程这样的对象。

2.  但是，如果您说这只是日复一日的东西，您想要更改代码调用，您可以在 SQL：模板参数中执行这些操作。

.

然后您只需快速按（2005 年及以下）：CTRL + SHIFT + M /（2008 年及更高）Alt + Q，然后依次按 S。

我给你的例子是：

```
Select top 10 *
from <tablename, varchar(128), dbo.orders> 
```

3\. 这些问题是，当您有时应用它们时，您会更改整个代码，所以我喜欢名为 Redgate SQL Prompt 的第 3 方工具。我基本上为对我来说是对象的小东西即时创建片段，然后为它们设置关键组合。恕我直言，如果您日复一日地在 SSMS 中编码，那就太好了。您可以将鼠标悬停在对象上并获取它们包含的类型，您可以设置格式以突出显示代码块，然后根据您的格式创建自己的格式原则，仅这些片段就值得拥有，因为它们的工作速度比2012 年的原生版本，比获取 AutoHotKey 之类的黑客要好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T20:29:42.680

将关系模型 (SQL) 映射到面向对象的模型 (C#、C++、Java ... 等) 是使用称为 ORM (Object-Relational Mapping) 的东西完成的。您基本上使用 OO 模型，并且 ORM 将您正在做的事情转换为 SQL。那里有数百个，尽管[Linq to SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)、[nHibernate](http://nhforge.org/)和[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)是比较知名的。

# winapi - ATL::CImage 似乎在某些设备上歪曲了每像素 alpha 图像

> ID：15166176
> 
> 赞同：4
> 
> 时间：2013-03-01T20:19:01.093
> 
> 标签：winapi, graphics, mfc, gdi+, atl

我在将 alpha 图像打印到打印机设备上下文（真实或 XPS 文档编写器）时遇到问题。它们在屏幕上下文和打印预览中效果很好，但是当我打印到文件或打印机时，当它们位于另一个图像的顶部时，它们会显示为黑色方块。我之前使用过 CImage::Draw 并得到了与直接使用 GDI+ API 类似的结果（黑色或透明方块）：

```
 Gdiplus::Graphics g(hDestDC) ;
    ...
    // Edit: the image value here was one aquired from a ATL::CImage not 
    // a Gdiplus::Image (see solution)
    g.DrawImage(image,rect,0,0,GetWidth(),GetHeight(),Gdiplus::UnitPixel,0,0,0); 
```

设备上限似乎表明上下文支持通过混合

```
GetDeviceCaps(hDestDC, SB_PIXEL_ALPHA) 
```

图像的性质似乎也不重要，这是我使用的两种格式：

```
PNG image data, 256 x 256, 8-bit/color RGBA, non-interlaced
PNG image data, 192 x 64, 1-bit colormap, non-interlaced 
```

使用带有 CImage 数据的 GDI+ 接口，两者都产生相同的结果。让 alpha 图像在打印上下文中的行为方式与在屏幕上的行为方式相同的最佳方式是什么？设备功能是否会因为 alpha 使用 BitmapMatrix 并为整个图像使用混合而歪曲某些东西？

**编辑：2013 年 3 月 4 日**

我的新方法是在内存中进行所有 alpha 混合我的想法是，如果打印机不支持 alpha 混合，我将创建一个内存上下文进行混合，然后将混合结果复制到上下文中。代码的重要部分如下所示：

```
int width = rectDest.right - rectDest.left;
int height = rectDest.bottom - rectDest.top;

BLENDFUNCTION blendFunction;
blendFunction.BlendOp = AC_SRC_OVER;
blendFunction.BlendFlags =  0;
blendFunction.SourceConstantAlpha = 0xFF;
blendFunction.AlphaFormat = AC_SRC_ALPHA;

HDC memDC = CreateCompatibleDC(hDestDC);
HBITMAP bitmap = CreateCompatibleBitmap(hDestDC,width,height);

SelectBitmap(memDC,bitmap);
//sample the underying area and copy it to memDC
::BitBlt(memDC, 0,0, width, height, hDestDC, rectDest.left, rectDest.top, SRCCOPY);
//now blend the image in memory onto the area.
GdiAlphaBlend(memDC,0,0, width, height,GetDC(), 0, 0, GetWidth(), GetHeight(),blendFunction);
//now just BitBlt the blended data to the context
::BitBlt(hDestDC,rectDest.left, rectDest.top,width,height,memDC,0,0,SRCCOPY); 
```

...令我惊讶的是，我得到了几乎相同的结果。实际上，我在屏幕左侧对中间步骤进行了调整，以确保一切正常运行。它抓取的背景和 alpha 混合结果（我将其传送到打印机上下文）在屏幕上看起来都很棒。这可能是一个错误吗？我猜 BitBlt 会从先前的混合中完整保留 alpha 值，那么像素数据中的实际 alpha 值是否会引发打印机设备上下文？如果是这样，我如何在最终 BitBlt 之前删除 alpha？

**编辑：2013 年 3 月 5 日**
现在我尝试了以下方法：
1\. 使用与设备无关的位图创建 HBITMAP 参考。
2.使用CreateDiscardableBitmap创建HBITMAP（成功率最高）。
3.手动将每个像素的alpha通道设置为0xFF和0x00。

```
BITMAPINFO bitmapInfo;
ZeroMemory(&bitmapInfo, sizeof(BITMAPINFO));
bitmapInfo.bmiHeader.biBitCount = 32; 
bitmapInfo.bmiHeader.biCompression = BI_RGB;
bitmapInfo.bmiHeader.biPlanes = 1;
bitmapInfo.bmiHeader.biSize = sizeof(bitmapInfo.bmiHeader); 
bitmapInfo.bmiHeader.biWidth = width; 
bitmapInfo.bmiHeader.biHeight = height;
bitmapInfo.bmiHeader.biSizeImage = bitmapSizeBytes;

HDC memDC = CreateCompatibleDC(hDestDC);
//was HBITMAP bitmap = CreateCompatibleBitmap(hDestDC,width,height);
//also tried HBITMAP bitmap = CreateDiscardableBitmap(hDestDC,width, height);
HBITMAP bitmap = CreateDIBSection(memDC, &bitmapInfo,DIB_RGB_COLORS,&imageBits,NULL,0x00); 
```

使用一次性位图至少可以让图像渲染，但对于应该是 alpha 的区域使用黑色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:06:01.063

好的，我想我在这里找到了解决方案。好吧，它没有解释为什么上面讨论的方法不起作用，但它提供了前进的方向。我们的类都基于 ATL::CImage。看起来解决方案的真正关键是 ATL::CImage 在加载其中一些 alpha 图像时会以某种方式错误处理它们的图像数据。例如，对于报告相同格式的图像，它会反转一个的颜色而不是另一个或不显示其中一个......像这样的事情。作为测试，我将读取到 CImage::Load 中的相同数据存储到 Gdiplus::Image 实例中，并使用它来绘制图形实例（下面的代码）。这解决了所有问题，所以在这一点上似乎故事的寓意是用更新的东西替换基于 ATL 的代码，因为它对 alpha 图像没有做正确的事情。

这是最新的代码：

```
 int width = rectDest.right - rectDest.left;
   int height = rectDest.bottom - rectDest.top;

   Gdiplus::Graphics gfx(hDestDC);
   //These next two lines allow resizing and printing of JPG to a printer
   //without them GDI+ seems to have trouble resizing and repositioning
   //JPEG files to fit onto the printer context and renders them off screen
   //and distorted.
   gfx.SetInterpolationMode(Gdiplus::InterpolationModeHighQuality);
   gfx.SetPageUnit(Gdiplus::UnitPixel);
   Gdiplus::Rect destination(rectDest.left, rectDest.top,width, height);
   Gdiplus::ImageAttributes attributes;
   //The color matrix has to be set onto the attributes or otherwise 
   //alpha will not work even though it's the identity. Also you 
   //can tweak the position at [4,4] to adjust alpha for the whole image
   //and have per-pixel alpha as well.
   Gdiplus::ColorMatrix matrix = {1.0, 0.0, 0.0, 0.0, 0.0,
                                  0.0, 1.0, 0.0, 0.0, 0.0,
                                  0.0, 0.0, 1.0, 0.0, 0.0,
                                  0.0, 0.0, 0.0, 1.0, 0.0,
                                  0.0, 0.0, 0.0, 0.0, 1.0};
   attributes.SetColorMatrix(&matrix,Gdiplus::ColorMatrixFlagsDefault, Gdiplus::ColorAdjustTypeBitmap);
   gfx.DrawImage(gdiImage, destination, 0,0, GetWidth(),GetHeight(),Gdiplus::UnitPixel, &attributes, NULL, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:52:21.010

在 PCL 打印机上进行测试。我希望您会发现它是打印机，而不是您的代码。如果是这种情况，唯一的解决方案是将整个页面呈现为单个位图，然后将该位图 blit 到打印机。它在性能方面不是很理想，但它可以在所有打印机、Postscript 或其他打印机上可靠地工作。

如果您想更深入地了解 Postscript 和透明胶片的问题，维基百科[对这个问题有一个很好的总结](http://en.wikipedia.org/wiki/Transparency_%28graphic%29#Transparency_in_PostScript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:14:17.720

尝试先用白色填充目标区域，然后进行混合。

您可能认为它在屏幕上是正确的，因为您碰巧正在混合到一个已“擦除”而不透明的白色像素的窗口上。

打印机可能正在尝试混合到尚未明确初始化的像素。也许打印机驱动程序假定这些像素最初是黑色的。这是一个合理的（如果违反直觉的话）假设。打印纸是白色的这一事实导致人们假设打印“透明”像素会使该区域保持白色，但从技术上讲，这些像素是未初始化的。

# ios - 带有自定义表格单元格的 FB Friend Picker View Controller

> ID：15166179
> 
> 赞同：2
> 
> 时间：2013-03-01T20:19:09.023
> 
> 标签：ios, facebook-ios-sdk

我在 iOS 应用程序中有 Facebook 的 FBFriendPickerViewController 的子类。有没有办法自定义它的外观？我看到了可以为选择一个朋友等进行的自定义。我想替换标题和表格单元格。使用 FacebookSDK.framework 似乎不包括 FBGraphObjectTableCell 的标头和相关的数据源。我该如何定制这个？

如果这不是一个选项，我不反对自己做选择器，但是我如何使用图形 API 对朋友进行排序？在这种情况下，我宁愿对它们进行分页，并且我需要它们按名称排列。我已经尝试过使用 fql 进行此操作，但返回数据不像这些 FBGraphObjects 那样易于管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:31:06.073

我有同样的问题......在我的情况下，我选择拥有自己的选择器，在 FQL 中进行查询以获取所有朋友，通过比较器对它们进行排序，然后将它们分成两组（两个数组，具有应用程序的用户和没有应用程序的用户）并将这些值传递给控制器​​（这是一个 tableview 委托和 tabledatasource 委托）。

我面临的问题是图像加载。我已经尝试过 AFNetworking 和 SDWebImage 但视图似乎不时冻结并且速度很慢。一段时间后一切正常......但这不是最佳选择。

如果您找到实现目标的任何其他方法，请告诉我，我真的很想知道另一种方法！

# attributes - ng-hide / ng-show 中是否可以使用复杂的表达式？

> ID：15166184
> 
> 赞同：184
> 
> 时间：2013-03-01T20:19:23.183
> 
> 标签：attributes, angularjs, expression

我想这样做：

```
ng-hide="!globals.isAdmin && mapping.is_default" 
```

但表达式的计算结果始终为`false`。

我不想在`$scope`.

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-03-01T20:30:44.203

如果您需要运行任意 JavaScript 代码，请使用控制器方法，或者您可以定义一个返回 true 或 false 的过滤器。

我刚刚测试过（应该先做），并且像`ng-show="!a && b"`预期的那样工作。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2013-11-28T12:12:05.993

`ng-show`/`ng-hide`只接受`boolean`值。

对于复杂的表达式，最好使用控制器和范围来避免复杂化。

下面一个就可以了（不是很复杂的表达式）

```
ng-show="User=='admin' || User=='teacher'" 
```

当两个条件中的任何一个返回 true（OR 操作）时，此处的元素将显示在 UI 中。

像这样，您可以使用任何表达式。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-23T12:05:06.070

如果您没有太多表达式，这将起作用。

例子：`ng-show="form.type === 'Limited Company' || form.type === 'Limited Partnership'"`

对于比这更多的表达式，请使用控制器。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-20T14:00:40.013

我通常会尽量避免使用 ng-show 和 ng-hide 的表达式，因为它们被设计为布尔值，而不是条件。如果我需要条件逻辑和布尔逻辑，我更喜欢使用 ng-if 作为第一个检查来放入条件逻辑，然后使用 ng-show 和 ng-hide 添加对布尔逻辑的额外检查

但是，如果您想对 ng-show 或 ng-hide 使用条件，这里有一些示例的链接：[使用 ng-if、ng-show、ng-hide、ng-include、ng-switch 进行条件显示](http://realityonweb.com/angularjs-conditional-display-using-ng-show-ng-hide-ng-if-ng-include-ng-switch/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-09T22:21:42.957

上述一些答案对我不起作用，但确实如此。以防万一其他人有同样的问题。

```
ng-show="column != 'vendorid' && column !='billingMonth'" 
```

# python - python：修改matplotlib中的标签行为

> ID：15166186
> 
> 赞同：0
> 
> 时间：2013-03-01T20:19:32.563
> 
> 标签：python, matplotlib

```
plt.rc('axes', grid=True)
plt.rc('grid', color='0.75', linestyle='-', linewidth=0.5)

textsize = 9
left, width = 0.1, 0.8
rect1 = [left, 0.7, width, 0.2]

fig = plt.figure(facecolor='white')
axescolor  = '#f6f6f6'  # the axes background color

ax1 = fig.add_axes(rect1, axisbg=axescolor)  #left, bottom, width, height

### plot the relative strength indicator

rsi = RSI(GOOG,20) #rsi[0] is list of float, rsi[1] is list of datetime objects
rsiValues = rsi[0]
rsiDate = rsi[1]
ticker = 'GOOG'
fillcolor = 'darkgoldenrod'

ax1.plot(rsiDate, rsiValues, 'kx') #, fmt='bo', tz=None, xdate=True, ydate=False,color=fillcolor)
ax1.axhline(70, color=fillcolor)
ax1.axhline(30, color=fillcolor)
#ax1.fill_between(rsiDate, rsiValues, 70, where=(rsiValues>=70),facecolor=fillcolor,   edgecolor=fillcolor)
#ax1.fill_between(rsiDate, rsiValues, 30, where=(rsiValues<=30), facecolor=fillcolor, edgecolor=fillcolor)
ax1.text(0.6, 0.9, '>70 = overbought', va='top', transform=ax1.transAxes, fontsize=textsize)
ax1.text(0.6, 0.1, '<30 = oversold', transform=ax1.transAxes, fontsize=textsize)
ax1.set_ylim(0, 100)
ax1.set_yticks([30,70])
ax1.set_xticks(rsiDate,minor = True)

#just want day date
tickLabels = []
for items in rsiDate:
    tickLabels.append(items.day) 

ax1.set_xticklabels(tickLabels, rotation = 45,minor = True)
ax1.text(0.025, 0.95, 'RSI (20)', va='top', transform=ax1.transAxes, fontsize=textsize)
ax1.set_title('%s daily'%ticker)

plt.show() 
```

如果我注释掉“minor = True”

```
ax1.set_xticklabels(tickLabels, rotation = 45)#,minor = True) 
```

主要刻度标签的日期正确显示（仅显示日期），但如果我取消注释（原样）所有刻度标签显示，但在主要刻度上添加了“月-日-年”标签。我试图在没有任何“月-日-年”标签的情况下仅获取所有刻度（包括次要刻度）的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:07:43.647

```
ax1.tick_params(which='major', axis = 'x', labelbottom = 'off') 
```

添加这行代码有效。

# .net - .Net 服务在服务器上返回 404

> ID：15166188
> 
> 赞同：0
> 
> 时间：2013-03-01T20:19:34.573
> 
> 标签：.net, web-services

我有一个第三方 CMS 系统，这给我带来了一些问题。当内部控制在我的本地计算机上访问 Web 服务时，一切都按预期工作。当我将它部署到 DEV 服务器进行测试时，内部控制会访问 Web 服务并返回`404`：

> 加载资源失败：服务器响应状态为 404（未找到）

我可以看到 SVC 文件存在于服务器上，但由于其他原因它无法正常工作（但它在我的本地机器上工作，这让我认为这是一个权限问题）。

任何指针？

抱歉，更多细节可能会有所帮助：

*   IIS 7
*   不是虚拟目录
*   此 CMS 是一个 MVC 类型的应用程序，它可以正常加载以及其他文件类型（png、html）

# windows - 是否可以通过 bat 脚本确定具有焦点的窗口/应用程序？

> ID：15166207
> 
> 赞同：0
> 
> 时间：2013-03-01T20:20:52.030
> 
> 标签：windows, scripting, batch-file, rundll32

这样做的功能显然在 User32.dll 中。我一直在尝试修改 rundll32.exe，但是当我运行它时：

```
rundll32 User32.dll,GetActiveWindow 
```

它没有错误地退出，但什么也不做。退出代码当然只会说明运行 rundll32 是否有错误。

是否有一个 bat 脚本技巧来检索该值并将其填充到变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:26:08.473

Window API 函数的设计目的不是像 DOS 那样调用。您需要创建一个最小化运行的控制台应用程序。它可以调用该`GetActiveWindow()`函数并将应用程序标题写入STDOUT。然后您可以将该值分配给批处理文件中的环境变量，如下所示：

```
setlocal ENABLEDELAYEDEXPANSION
for /f "delims=" %%i in ('start /wait /min YourCustomApp.exe') do set somevar=%%i
echo The active program is "!somevar!".
endlocal 
```

在`/wait /min`尝试将 STDOUT 上的值分配给`somevar`. 我喜欢`ENABLEDELAYEDEXPANSION`在批处理文件中分配环境变量时使用，然后在同一个批处理文件中使用它。

# php - 使用 XPath 解析文档

> ID：15166210
> 
> 赞同：0
> 
> 时间：2013-03-01T20:21:13.277
> 
> 标签：php, parsing, markup

我需要解析具有我以前从未见过的结构的文档。它看起来像这样：

```
<cat:707>
<begad:00216057>
<zip:48650>
<addr:2100 N. HURON RD, PINCONNING, MI USA>
COUNTRY 10 Mi. N. of Midland, 3 bedroom, 2 baths, appliances furnished, 300x500 finished pole barn on 5 acres,  $750/mo. + utilities, 989-965-1118.
<endad>

<cat:710>
<begad:00216094>
<zip:48640>
<addr:1100 S HOMER RD, MIDLAND, MI USA>
IMMEDIATE Occupancy, extra clean, small 2 bedroom by nature center. Pet maybe/extra $400 deposit/references 839-4552
<endad> 
```

我将如何在 php 中解析类似的内容以获取冒号之后的信息（即：`707`第一个`cat`）和之前的文本`<endad>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:04:24.113

这看起来像是某人编造的，但您可能很容易就能弄清楚。

这是一些似乎可以工作的Python。如果需要，您可以从这里转换为 XML 并使用 XPath 进行解析。

```
import re

parse_re = (r"""
<(?P<key>\w+):(?P<value>[^>]+)>  # <key:value>
| (?<=>)\s*(?P<description>.*?)\s+<endad> #description
""", re.VERBOSE)

adparser = re.compile(*parse_re)

def getrecords(input):
    record = {}
    for match in adparser.finditer(input):
        if match.group('key'):
            record[match.group('key')] = match.group('value')
        elif match.group('description'):
            record['description'] = match.group('description')
            yield record
            record = {}

print list(getrecords(input)) 
```

我看到您更新了您的问题以指定您正在使用 PHP。相同的正则表达式似乎`pcre_*`也适用：

```
$parse_re = '/
<(?P<key>\w+):(?P<value>[^>]+)>  # <key:value>
| (?<=>)\s*(?P<description>.*?)\s+<endad> #description
/x';

preg_match_all($parse_re, $input, $matches, PREG_SET_ORDER);

var_export($matches); 
```

# python - 将类的实例添加到列表中会复制实例还是只是“引用”它？

> ID：15166212
> 
> 赞同：4
> 
> 时间：2013-03-01T20:21:18.440
> 
> 标签：python, instances

```
allInstancesOfFoo = []

class foo(object):
    def __init__(self)
        allInstancesOfFoo.append(self)

bar1=foo()
bar2=foo()
bar3=foo() 
```

这样做会创建第 1-3 条的副本并将它们放在该列表中，还是会在该列表中简单地为它们添加一个“参考”。而且，我知道 Python 中没有 C 风格的引用，但目前我想不出更好的词来形容它。

另外，对不起，如果这是一个荒谬的问题，我只是想确保这样做不会占用它不需要的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:22:37.060

在这种情况下，您的列表将包含对原始对象（ 和 ）的引用`bar1`——`bar2`不会`bar3`复制。

例如：

```
allInstancesOfFoo = []

class foo(object):
    def __init__(self):
        allInstancesOfFoo.append(self)

bar1=foo()
bar2=foo()
bar3=foo()
print bar1 is allInstancesOfFoo[0]  #True 
```

附带说明一下，如果您制作 的浅表副本`allInstancesOfFoo`，那也只会对现有对象进行新引用：

```
all_instances_of_foo = allInstancesOfFoo[:]
print all(x is y for x,y in zip(all_instances_of_foo,allInstancesOfFoo))  #True 
```

# sql-server-2012 - SQL 按日期对行进行分组并显示每个日期的计数

> ID：15166213
> 
> 赞同：2
> 
> 时间：2013-03-01T20:21:20.997
> 
> 标签：sql-server-2012

使用 SQL Server 2012，我有一个事务列表，每个事务都带有事务发生时间的时间戳。我想显示一列发生交易的日期，第二列显示每个日期发生的交易数。

我已经设法显示交易发生的日期列，但第二部分有问题。我的第一个代码是：

```
select distinct convert(varchar(10), Timestamp, 111) as 'TransactionDates'
from Transactions 
```

它返回交易发生的日期。

我假设对于 select 语句的第二部分，我要查找每天的事务数，我使用完全相同的语句的计数，如下所示：

```
select distinct convert( varchar(10), Timestamp, 111) as 'TransactionDates',
count(distinct convert( varchar(10), Timestamp, 111)) as 'NumTransactions'
from Transactions 
```

这应该会导致调用第二列`NumTransactions`，计算每个日期连续记录的次数。我可能误解了正确使用 Count 函数，或者也许有更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:23:55.303

我认为您正在寻找的是：

```
SELECT d = CONVERT(DATE, [Timestamp]), c = COUNT(*)
FROM dbo.Transactions
GROUP BY CONVERT(DATE, [Timestamp])
ORDER BY d; 
```

请不要将这种可怕的转换为字符串技巧来消除时间。为什么？

[http://www.sqlperformance.com/2012/09/t-sql-queries/what-is-the-most-efficient-way-to-trim-time-from-datetime](http://www.sqlperformance.com/2012/09/t-sql-queries/what-is-the-most-efficient-way-to-trim-time-from-datetime)

[http://www.sqlperformance.com/2012/10/t-sql-queries/trim-time](http://www.sqlperformance.com/2012/10/t-sql-queries/trim-time)

还要尽量避免使用保留字，如`timestamp`列名。`timestamp`什么，对于初学者？

# actionscript-3 - 为什么在 ActionScript 3 调整舞台大小时第二行文本消失？

> ID：15166218
> 
> 赞同：0
> 
> 时间：2013-03-01T20:21:40.127
> 
> 标签：actionscript-3, air, flash-builder

我有这个代码。它在舞台上创建了两行文本，但是当舞台重新调整大小时，第二行文本可能会在舞台缩放时消失。有谁知道为什么会这样？提前谢谢你的帮助！

```
var text:TextField=new TextField();
var textFormat:TextFormat = new TextFormat();
textFormat.color=0x000000;
textFormat.size=45;
textFormat.bold=true;
textFormat.font="Impact";
textFormat.italic=true;
text.x=8;
text.y=5;
text.width=200;
text.text = "Line One\nLine two";
text.setTextFormat(textFormat);
text.height=text.textHeight +4;
sprite.addChild(text); 
```

然后将精灵添加到舞台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:39:44.830

试试下面的代码：

```
var text:TextField=new TextField();
var textFormat:TextFormat = new TextFormat();
textFormat.color=0x000000;
textFormat.size=45;
textFormat.bold=true;
textFormat.font="Impact";
textFormat.italic=true;
text.x = 8;
text.border = true;
text.y=5;
text.width=200;
text.text = "Line One\nLine two";
text.setTextFormat(textFormat);
text.autoSize = TextFieldAutoSize.LEFT;
sprite.addChild(text); 
```

请注意添加自动大小，这似乎可以解决您的问题。

# apache-flex - 如何使用 Flex 下载动态创建的服务器端文件？

> ID：15166220
> 
> 赞同：0
> 
> 时间：2013-03-01T20:21:45.127
> 
> 标签：apache-flex

我想将数据库中的表导出到服务器上的 excel 文件，然后下载。以下是我为此目的开发的代码：

```
 import flash.net.FileReference;
 import flash.net.URLRequest;
 public function sqlDownloadExcel():void {
      var http:HTTPService = new HTTPService;
      var parm:Object = new Object;
      var sql:String;

      sql = "insert into OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 12.0;Database=C:\\inetpub\wwwroot\\myApp\\App_Data\\myExport.xls;', 'SELECT * FROM [Sheet1$]')  SELECT * FROM myTable";
      parm.sql = sql;
      parm.db = "myDatabase"; 
      http.url = "http://mywebsite.com/SQLconnector/sqlconnector.asp?irand="+Math.random();
      http.showBusyCursor = true;
      http.request = sql;
      http.addEventListener(ResultEvent.RESULT, function(e:ResultEvent):void {sqlDownloadExcelResult(e);});
      http.addEventListener(FaultEvent.FAULT, mssqlFault);
      http.method = "POST"; 
      sqlToken = http.send(parm);
 }
 public function sqlDownloadExcelResult(event:ResultEvent):void{
      var request:URLRequest = new URLRequest("http://mywebsite/myApp/App_Data/myExport.xls");
      var fileRef:FileReference = new FileReference();
      fileRef.download(request);                
 } 
```

该代码在服务器上正确创建 Excel 文件，但运行 fileRef.download(request) 函数会导致以下错误：

> 错误 #2176：某些操作（例如显示弹出窗口的操作）只能在用户交互时调用，例如通过鼠标单击或按钮按下。

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:27:18.277

你不能做你想做的事。安全限制可防止您的应用在没有用户输入的情况下尝试将任何内容下载到客户端机器。这就是您看到错误的原因。

我建议在服务器上创建 Excel 表，将其保存到服务器，然后将 URL 发送回您的 Flex 应用程序。使用 navigateToURL() 打开它；并且浏览器应该根据客户端的浏览器设置来处理它。它可以自动下载；或自动打开；或者它可能会提示用户它想要做什么。

如有必要，您可以创建一个服务器端脚本来定期清理生成的文件。

根据您提供的代码，看起来您已经完成了 90% 的工作。与其使用 FileReference 尝试下载文件，不如使用 navigateToURL() 打开该 URLRequest。

或者，您可以修改您的 UI 以显示“您的文件已准备好，单击此处获取它”或类似的内容。然后你有用户交互并且可以在用户点击按钮后打开下载窗口。

# list - java编程中的List和Map

> ID：15166222
> 
> 赞同：1
> 
> 时间：2013-03-01T20:21:49.157
> 
> 标签：list, map

我需要转换：

```
List<Map>([{1,2},{2,3}]) 
```

至：

```
List<List>([[1,2],[2,3]]) 
```

谁能帮我举个例子...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:11:48.293

您可以尝试以下代码：

```
import java.util.*;
class  ListOfMapToListOfList
{
    public static List<List> toList(List<Map<Integer,Integer>> lList)//method to convert List<Map> to List<List>
    {
        List<List> list = new ArrayList<List>();
        for (int i = 0 ; i < lList.size() ; i++)
        {
            Map<Integer,Integer> map = lList.get(i);
            List<Integer> aList = new ArrayList<Integer>();
            Set<Integer> keySet = map.keySet();
            for (Integer key : keySet)
            {
                aList.add(key);
                aList.add(map.get(key));
            }
            list.add(aList);
        }
        return list;
    }
    public static void main(String[] args) //main body
    {
        List<Map<Integer,Integer>> list1 = new ArrayList<Map<Integer,Integer>>();
        Map<Integer,Integer> map1 = new HashMap<Integer,Integer>();
        map1.put(1,2);
        Map<Integer,Integer> map2 = new HashMap<Integer,Integer>();
        map2.put(1,2);
        list1.add(map1);list1.add(map2);
        System.out.println(list1);
        System.out.println(toList(list1));//Conversion is done here..and out put is shown.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:38:49.690

我建议制作一个特定对象的列表，而不是一个`get(0)`返回键和`get(1)`值的原始列表，如下所示：

```
List<List<Pair>> convert(List<Map<Integer,Integer> mapList){  
   List<List<Pair>> listOfList = new ArrayList<List<Pair>>();  
   for(Map<Integer,Integer> map:mapList){  
      List<Pair> list = new ArrayList<Pair>();  
      for(Entry<Integer,Integer> e:map.entrySet()){  
          list.add(Pair(e.getKey(),e.getValue());  
      }  
      listOfList.add(list);  
   }  
   return listOfList;
}  

class Pair{  
   Integer first;  
   Integer second;  
   //constructor  
} 
```

# java - Java循环遍历数组

> ID：15166224
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:22:05.760
> 
> 标签：java, arrays, multidimensional-array

假设我有一个数组数组：

```
double[][] img = new double[row][col]; 
```

我想在一个 2x2 块中循环 img ......例如：

```
2,  4, 31, 31   
3,  3, 21, 41
1,  2, 10, 20
3,  2, 20, 30 
```

然后您首先查看第一个 2x2 子数组（从左上角开始）

```
2,  4
3,  3 
```

然后我们看下一个 2x2 块

```
31,  31
21,  41 
```

其他块将是 1,2,3,2 和 10,20,20,30...

如何制作一个循环，让它像这样通过？本质上，我这样做是为了找到块中值的平均值，并用该平均值替换数组中的每个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:26:59.823

You will need two nested `for` loops. But unlike normal `for` loops, instead of incrementing your looping variables, in both cases, add 2 to your index. Then, inside the inner for loop, assuming you have looping indexes `i` and `j`, refer to your 4 values with `img[i][j]`, `img[i + 1][j]`, `img[i][j + 1]`, and `img[i + 1][j + 1]`. But you'll have to be careful if `row` or `col` is odd.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:27:22.763

You could use a structure like this:

```
double[][] img = new double[row][col];
//This will break if row or col are odd, make sure you are always passing an even amount or check for this case.
for (int i = 0; i < row; i+=2) {
    for (int j = 0; j < col; j+=2) {
        //Do what you need with these values:
        img[i][j];     //Top left
        img[i+1][j];   //Top right
        img[i][j+1];   //Bottom left
        img[i+1][j+1]; //Bottom right
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T20:26:52.137

可能对您有帮助：

```
tile = 2;
for(i = 0; i < row; i = tile + i)
 for(j = 0; j < col; j= tile + j)
  for(r = 0; r < tile; r++)   
    for(c = 0; c < tile; c++) 
      System.out.print(" " + img[i+r][j+c]);
    System.out.print("\n"); 
```

如果您需要其他尺寸，请放置`tile`尺寸，然后 2*2：

**编辑**
现在我提供完整的代码。

```
class BreakWithLabelDemo {
    public static void main(String[] args) {

        int[][] img = { 
                    {55, 60, 65, 1},
                    {95, 90, 85, 5},
                    {5,  0,  8,  5},  
                    {53, 60, 89, -5}
        };

        int tile=2; 
        int row=4; 
        int col=4;
        int i, r;
        int j, c;

        tile = 2;
        for(i = 0; i < row; i= tile + i)
           for(j = 0; j < col; j= tile + j){
              for(r = 0; r < tile; r++){   
                 for(c = 0; c < tile; c++) 
                    System.out.print(" ", img[i+r][j+c]);
                 System.out.println("");
              }
              System.out.println("\n");
           }

        int img2[][] = { 
                  // 1   2   3   4  5  6  7  8  9 
                    {55, 60, 65, 1, 2, 4, 1, 4, 0},
                    {95, 90, 85, 5, 3, 6, 5, 0, 8},
                    {5,  0,  8,  5,-1, 2, 2, 5, 6},  
                    {95, 90, 85, 5, 3, 6, 5, 0, 8},
                    {55, 60, 65, 1, 2, 4, 1, 4, 0},
                    {5,  0,  8,  5,-1, 2, 2, 5, 6},  
                    {1,  2,  3,  4, 5, 6, 7, 8, 9}, 
                    {1,  2,  3,  4, 5, 6, 7, 8, 9}, 
                    {1,  2,  3,  4, 5, 6, 7, 8, 9}
                  };

         row = 9; 
         col = 9;
         tile = 3;

         for(i = 0; i < row; i= tile + i)
           for(j = 0; j < col; j= tile + j){
              for(r = 0; r < tile; r++){   
                 for(c = 0; c < tile; c++) 
                    System.out.print(" ", img[i+r][j+c]);
                 System.out.println("");
              }
              System.out.println("\n");
           }
    }
} 
```

这实际上是有效的：

正在运行的实例

```
 55  60 
 95  90 

 65   1 
 85   5 

  5   0 
 53  60 

  8   5 
 89  -5 

 55  60  65 
 95  90  85 
  5   0   8 

  1   2   4 
  5   3   6 
  5  -1   2 

  1   4   0 
  5   0   8 
  2   5   6 

 95  90  85 
 55  60  65 
  5   0   8 

  5   3   6 
  1   2   4 
  5  -1   2 

  5   0   8 
  1   4   0 
  2   5   6 

  1   2   3 
  1   2   3 
  1   2   3 

  4   5   6 
  4   5   6 
  4   5   6 

  7   8   9 
  7   8   9 
  7   8   9 
```

# apache-flex - 弹性警报气泡

> ID：15166229
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:22:26.350
> 
> 标签：apache-flex

我目前正在使用 MX 电话号码验证器：

```
<mx:PhoneNumberValidator id="phoneCheck" 
            source="{phoneInput}" 
            property="text" 
            allowedFormatChars=""
            required="true"
            trigger="{button}"
            triggerEvent="click"/> 
```

当验证器返回带有文本的错误（参见 screenshotA）![在此处输入图像描述](../Images/909785a3eccd463984f9c65b1ef896de.png)而不是漂亮的 Flash 气泡（screenshotB.jpg）时![在此处输入图像描述](../Images/ada9dfc4b91edfda94ae5de1bf5d1d33.png)。

如何获得气泡而不是文本？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:51:13.300

如果你想要气泡而不是文本，它只在 flex 3 Form 组件中 - 尝试使用

```
<mx:Form>... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:22:02.027

[链接http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/PhoneNumberValidator.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/PhoneNumberValidator.html)中显示的示例在MouseOver 上有气泡。看看它。

# javascript - Python 读取 Javascript 日期

> ID：15166234
> 
> 赞同：1
> 
> 时间：2013-03-01T20:22:38.533
> 
> 标签：javascript, python, date, screen-scraping

我正在使用 BeautifulSoup 从网页获取数据。该网页提供了一个日期，我在 Firefox 中打开该页面时会看到该日期。但是，当我查看页面源时，没有日期，只有一些生成日期的 javascript。我看到这里有一些相关的问题，我看到了对 ajax 和 json 的引用，但我只是一个业余程序员，在这里仍然感到困惑。这是一些 HTML 代码，其中包含我需要的日期的 javascript 代码。

```
<div class="match-details">
  <p class="floatleft">
    BARCLAYS PREMIER LEAGUE 

    <span>
      <script type="text/javascript">
        (function(){
        var d = new Date(1345489200000);

        var year = d.getFullYear();
        var month = d.getMonth() + 1;
        var day = d.getDate();
        var minutes = d.getMinutes();
        var hours = d.getHours();                                        

        if (minutes < 10) { minutes = '0' + minutes; }
        var dmy = [day, month, year];
        var hm = [hours, minutes];
        if (SITE_EDITION == 'us/en') {
            var dmy = [month, day, year];    
        }
        var matches_local = dmy.join('/') + " " + hm.join(':'); 
        matches_local += "<span class='live-red'>*</span>";

        document.write(matches_local);
        })();                                                       
      </script>
    </span>

  </p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:32:14.260

`BeautifulSoup`是一个 HTML 处理库。您需要一个 HTML + Javascript 处理库。

阅读这个问题：[Programmatic Python Browser with JavaScript](https://stackoverflow.com/questions/1916711/programmatic-python-browser-with-javascript)

正如 QA 所说......你基本上要么需要使用真正的浏览器——通过 Selenium——要么使用支持 javascript 的 python 浏览器——比如 Spynner。

# asp.net - 更新/编辑实体时多对多不保存

> ID：15166236
> 
> 赞同：0
> 
> 时间：2013-03-01T20:22:47.893
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, ef-code-first, many-to-many

我的控制器中的 [HttpPost] 编辑方法有问题，它没有保存对用户角色所做的更改，这很奇怪，因为 create 方法正在工作，它使用相同的辅助方法，这是我的代码：

视图模型：

```
public class UserViewModel
{
    public User User { get; set; }
    public virtual ICollection<AssignedUserRole> UserRoles { get; set; }
    public virtual List<Company> Companies { get; set; }
} 
```

控制器：

```
[HttpPost]
    public ActionResult Edit(UserViewModel userViewModel)
    {
        if (ModelState.IsValid)
        {
            var user = userViewModel.User;
            user.UserRoles.Clear();
            AddOrUpdateRoles(user, userViewModel.UserRoles);
            context.Entry(user).State = EntityState.Modified;
            context.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(userViewModel);
    } 
```

辅助方法

```
private void AddOrUpdateRoles(User user, ICollection<AssignedUserRole> assignedUserRoles)
    {
        foreach (var assignedRole in assignedUserRoles)
        {
            if (assignedRole.Assigned)
            {
                var userRole = new UserRole { Id = assignedRole.UserRoleId };
                context.UserRoles.Attach(userRole);
                user.UserRoles.Add(userRole);
            }
        }
    } 
```

用户对象中的所有内容都在更新，除了用户角色，我在调试和逐步执行时找不到问题，我可以看到用户分配了正确/更新的角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:49:58.517

我能够通过进行以下更改来解决此问题：

```
 private void AddOrUpdateRoles(User user, ICollection<AssignedUserRole> assignedUserRoles)
    {
        foreach (var assignedRole in assignedUserRoles)
        {
            if (assignedRole.Assigned)
            {
                var userRole = context.UserRoles.Find(assignedRole.UserRoleId);
                user.UserRoles.Add(userRole);
            }
        }
    }

 [HttpPost]
    public ActionResult Edit(UserViewModel userViewModel)
    {
        if (ModelState.IsValid)
        {
            var user = userViewModel.User;
            context.Entry(user).State = EntityState.Modified;
            context.Entry(user).Collection(u => u.UserRoles).Load();
            user.UserRoles.Clear();
            AddOrUpdateRoles(user, userViewModel.UserRoles);
            context.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(userViewModel);
    } 
```

我必须“加载”用户的用户角色，否则清算什么也不做。

# jquery - 单击链接时停止切换

> ID：15166238
> 
> 赞同：0
> 
> 时间：2013-03-01T20:22:55.913
> 
> 标签：jquery, html

我试图在一个网站上实现一个特定的部分，当我点击一个链接时，它会向下切换，如果页面上已经有一个切换，那么它将关闭它并打开这个选定的一个。

请参考这里：http: [//jsfiddle.net/r79Nu/3/](http://jsfiddle.net/r79Nu/3/)

问题是我想要它，所以当您单击特定链接时，它将停止一起切换并删除它。目前，每当您第二次单击该链接时，它都会显示一个 div。

这是代码：

```
 $('#nav a').click(function () {
    var headerItem = $(this).attr('data-header');
    if ($('#header_container').is(':visible')) {
        $('#header_container').slideUp(500, function() {
            $('.header_item').hide();
            $('#'+headerItem).show();
            $('#header_container').slideToggle(500);
        });
    }
    else {
        $('#'+headerItem).show();
        $('#header_container').slideToggle(500);
    }

}); 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:39:29.110

添加此代码，以便在已选择时不会切换。

```
$('#nav a').click(function () {
    var headerItem = $(this).attr('data-header');
    if ($('#header_container #'+headerItem).is(':visible')) {
        $('#header_container').slideUp(500);  // or whatever method to make it disappear
        return false;
    } 
    .... rest of your code ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:02:34.850

我会尝试一下我认为你想要的东西。同样，非常不清楚所需的功能是什么。这将与第一次单击展开正确的文本（标题 1 或 2）一起使用，然后在第二次单击到该初始单击点时，它会缩回封面。这隐藏了显示的数据，因此当您单击时，`1`您将获得`1`的数据，反之亦然`2`。这是正确的功能吗？

[http://jsfiddle.net/r79Nu/23/](http://jsfiddle.net/r79Nu/23/)

# css - 扩展 div 的背景以填充父 div 的高度

> ID：15166239
> 
> 赞同：0
> 
> 时间：2013-03-01T20:23:04.400
> 
> 标签：css, joomla, html

我尝试了十几种不同的解决方案，但似乎没有任何效果。

[http://betelec.ergonomiq.net/societe/offres-d-emploi](http://betelec.ergonomiq.net/societe/offres-d-emploi)

在上面的页面上，我希望左侧 sidenav 的青色背景延伸到它周围的白色容器的高度。

白色容器的高度由最大的子 div（在本例中为主体）的高度定义。

我尝试将sidenav的div高度设置为auto，但div保持固定高度。如果我将 div 设置为一个非常大的数字，例如 10000px 并且隐藏了溢出，则不会隐藏任何内容。

我完全不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:29:32.253

将父元素设置为`position: relative;`，然后将子元素设置为`position: absolute; height: 100%;`

活生生的例子。

[http://jsfiddle.net/pQdAr/](http://jsfiddle.net/pQdAr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:29:37.813

看起来您的左侧边栏位于`float:left`.

以下帖子可能对您有所帮助。[如何匹配浮动兄弟div的高度](https://stackoverflow.com/questions/8417840/how-to-match-height-of-floating-sibling-divs)

# php - 重复更新 - 不起作用

> ID：15166244
> 
> 赞同：0
> 
> 时间：2013-03-01T20:23:17.287
> 
> 标签：php, mysql

有我的代码：

```
$sql = "INSERT INTO item SET 
    player = '$player', 
    amount = '$amount', 
    item = '$item',
    allowed = '$allowed' ON DUPLICATE KEY UPDATE 
    amount = amount + $amount"; 
```

当我执行这个查询时，在数据库中创建新行，尽管它已经存在......

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:26:33.783

语法不正确，这个更正的版本：

```
$sql = "INSERT INTO item SET 
    player = '$player', 
    amount = '$amount', 
    item = '$item',
    allowed = '$allowed' 
    ON DUPLICATE KEY UPDATE 
    amount = `amount` + '$amount' "; 
```

其他因素取决于您的表结构和键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:28:19.780

我会这样做：

```
$sql = "INSERT INTO DBNAME.item (player, amount, item, allowed) 
        values('$player', '$amount', '$item', '$allowed') 
        ON DUPLICATE KEY UPDATE 
        amount = amount + values(amount);"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T20:36:10.083

在评论中，您说桌子上没有钥匙。那是个问题。你在问数据库`ON DUPLICATE KEY UPDATE`，但没有 a `UNIQUE KEY`，它不知道 a`DUPLICATE KEY`是什么。

您需要在不想被重复的字段上添加一个`UNIQUE KEY`（或一个）。`PRIMARY KEY`

# url-routing - 更改 module.config.php 的路由值后加载视图时出错 - Zend Framework

> ID：15166248
> 
> 赞同：0
> 
> 时间：2013-03-01T20:23:40.123
> 
> 标签：url-routing, zend-framework2

这个问题是关于 Zend Framework 应用程序版本：2.1.3。作为开发人员，我是 Zend Framework 的新手，非常重视您的帮助。

我正在为教堂的“捐助者管理系统”制作一个模块。我正在研究的模块称为“QueryBuilder”。以前的模块很好，效果很好。我将 Zend Helper 用于 Sublime Text，它为 module.config.php 生成了一些类似的东西

```
<?php
/**
 * 
 * @package QueryBuilder
 */
return array(
    'controllers' => array(
        'invokables' => array(
            'QueryBuilder\Controller\QueryBuilder' => 'QueryBuilder\Controller\QueryBuilderController',
        ),
    ),

    // The following section is new and should be added to your file
    'router' => array(
        'routes' => array(
            'querybuilder' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/querybuilder[/:action][/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'QueryBuilder\Controller\QueryBuilder',
                        'action'     => 'index',
                        //'action'     => 'search',
                        //'action'     => 'recent',
                    ),
                ),
            ),
        ),
    ),

    'view_manager' => array(
        'template_path_stack' => array(
            'querybuilder' => __DIR__ . '/../view',
        ),
    ),
);
?> 
```

在制作了一些成功的模块后，我决定有一点乐趣，我改变了`router`如下。

```
<?php
/**
 * 
 * @package QueryBuilder
 */
return array(
    'controllers' => array(
        'invokables' => array(
            'QueryBuilder\Controller\QueryBuilder' => 'QueryBuilder\Controller\QueryBuilderController',
        ),
    ),

    // The following section is new and should be added to your file
    'router' => array(
        'routes' => array(
            'querybuilder' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/query-builder[/:action][/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'QueryBuilder\Controller\QueryBuilder',
                        'action'     => 'index',
                        //'action'     => 'search',
                        //'action'     => 'recent',
                    ),
                ),
            ),
        ),
    ),

    'view_manager' => array(
        'template_path_stack' => array(
            'querybuilder' => __DIR__ . '/../view',
        ),
    ),
);
?> 
```

注意：只有`route`值从 更改`/querybuilder...`为`/query-builder...`。当我试图访问该路线时，`http://konnections/query-builder`我遇到了一些错误，但我没有通过它。

想知道为什么我不想成为英雄，我将值改回了默认值。并试图加载`http://konnections/querybuilder`，但它也给出了一个错误。

`Zend\View\Renderer\PhpRenderer::render: Unable to render template "query-builder/query-builder/index"; resolver could not resolve to a file`

在模块的代码中找不到单词`query-builder`. 所以常识说没有办法`query-builder/query-builder/index`需要访问。

认为它可能是一些缓存，我在整个应用程序文件夹中查找它。然后我重新启动了 Apache，计算机，删除并创建了一个具有相同名称的新模块，`QueryBuilder`但错误仍然存​​在。

**注意**：这是一个没有做任何事情的插件。我只是更改了`route`值，认为它会使 URL 看起来更整洁。

这是我最终得到的[图片]： ![我访问路线时出现的错误](../Images/21f605a9d6b090098602c56dbd0e2f17.png)

不，这不是 IE，因为我也在 Chrome 中尝试过（它没有访问`query-builder`url）。

整个 Zend 文件夹（网站的根目录）没有引用`query-builder`. 它来自哪里，我该如何改变它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:30:19.953

从 ZF1 系列（[http://framework.zend.com/manual/1.12/en/zend.controller.basics.html），ZF2](http://framework.zend.com/manual/1.12/en/zend.controller.basics.html)是一样的，但在手册上没有找到这个描述。

大小写命名约定 由于人类在键入链接时在保持区分大小写方面是出了名的不一致，Zend Framework 实际上将路径信息规范化为小写。当然，这会影响您命名控制器和操作的方式……或在链接中引用它们。如果您希望您的控制器类或操作方法名称有多个 MixedCasedWords 或 camelCasedWords，您需要在 url 上用“-”或“.”分隔这些词。（尽管您可以配置使用的字符）。例如，如果您要执行 FooBarController::bazBatAction() 中的操作，您会在 url 上将其称为 /foo-bar/baz-bat 或 /foo.bar/baz.bat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:24:18.480

我是紫烟，最先提出这个问题的人。

在谷歌没有找到解决方案后，我想制作另一个模块并最终陷入同样的​​困境。困惑我重新安装了 Zend Framework 并制作了一个同名的模块。

`Zend\View\Renderer\PhpRenderer::render: Unable to render template "query-builder/query-builder/index"; resolver could not resolve to a file`没有走开。

知道这不是重新配置之类的东西，我仔细看了看。

它似乎在每个单词之间加上了一个破折号。我觉得 Zend 疯了！但是不，它似乎将模块名称与每个大写字母分开，并使用“-”（破折号）将它们连接起来。

在我的情况下`QueryBuilder`，成为`query-builder`或名为的插件`HelloModules`将是`hello-modules`.

所以视图管理器似乎在寻找`../views/query-builder/query-builder/index`.

就我而言，ZF Helper for Sublime text 需要考虑这种情况。如果你能在 GitHub 上修复插件，那就太好了。我会试试我自己。

我找不到任何证据证明我的主张，也没有时间浏览源代码。如果有人提供一些链接会很高兴。

# perl - 使用 sprintf 在数组上使用 map

> ID：15166251
> 
> 赞同：2
> 
> 时间：2013-03-01T20:24:05.070
> 
> 标签：perl

我有以下代码：

```
my @some_range = (6..10);
my @some_range_new = map(sprintf("I%03d ", $_), \@some_range);

say join(' ', @some_range_new) 
```

我希望输出是：

```
I006 I007 I008 I009 I010 
```

但相反，我得到：

```
275738152 
```

为什么？

**注意：**我知道我可以做到`my @some_range_new = ("I006".."I010")`，但我正在尝试学习结合使用 map`sprintf`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T20:27:00.530

您在 map 语句中使用对的引用`@some_range`。我不确定你为什么认为这会起作用。

正确的方法是

```
map sprintf("I%03d", $_), @some_range; 
```

简而言之，只需删除反斜杠，您的代码就可以工作。

它失败的原因是`\@some_range`它将被解释为一个数字`%d`。当一个数组引用被解释为一个数字时，它会计算出被引用数组的地址。例如：

```
$ perl -lwe '@a=1..10; $x = \@a; print $x; printf "I%03d", $x'
ARRAY(0x468c18)
I4623384 
```

# c - strncat 看起来像是跨调用保留数据？

> ID：15166252
> 
> 赞同：0
> 
> 时间：2013-03-01T20:24:07.377
> 
> 标签：c, strcat

我`strncat`在标准库的函数中看到了一些奇怪的行为`string.h`，并且希望得到一些帮助来理解正在发生的事情。

* * *

我的问题的症结在于我创建的一个函数，该函数调用`readLine`的目的是将文件的行作为`char *`字符串返回，而没有尾随的换行符终止符。该函数如下所示：

```
char * readLine(FILE * fp) {
    char * chunk = NULL;
    char * line = NULL;
    int count = 0;

    // iterate through chunks of a line until we reach the end (or an error)
    while (fgets((chunk = malloc(sizeof(char) * BUFFER_SIZE)), BUFFER_SIZE, fp) != NULL) {

        // realloc on a null pointer works like malloc  
        line = realloc(line, ++count * BUFFER_SIZE * sizeof(char));    

        printf("chunk's contents: %s\n", chunk);

        // does chunk contain the end of a line?
        if(strchr(chunk, '\n') == NULL) {   
            // concatenate string parts and continue loop
            strncat(line, chunk, strlen(chunk) + 1);        
            free(chunk);

        } else {
            // we want to return a \0 terminated string without the \n
            // expected position of \n in chunk is ({length of chunk}-1)
            chunk[(strlen(chunk) - 1)] = '\0';

            // concatenate string parts
            strncat(line, chunk, strlen(chunk) + 1);
            printf("readLine line:    %s\n", line);
            free(chunk);

            break;        
        }        
    }
    return line;
} 
```

我在主循环中调用它，如下所示：

```
FILE * fp = NULL;

if ((fp = fopen(FILE_PATH, "r")) != NULL) {
    char * line = NULL;

    while ((line = readLine(fp)) != NULL) {
        printf("main line:        %s\n\n", line);
        free(line);
    }

    fclose(fp);
} 
```

* * *

现在奇怪的行为出现在我的定义中`#define BUFFER_SIZE 1000`。这样设置后，我得到以下输出（这不是我想要的）：

```
chunk's contents: I am on line 1
readLine line:    I am on line 1
main line:        I am on line 1

chunk's contents: Over here I am on line 2
readLine line:    I am on line 1Over here I am on line 2
main line:        I am on line 1Over here I am on line 2

chunk's contents: Line 3 here
readLine line:    I am on line 1Over here I am on line 2Line 3 here
main line:        I am on line 1Over here I am on line 2Line 3 here

chunk's contents: Look out for 4
readLine line:    I am on line 1Over here I am on line 2Line 3 hereLook out for 4
main line:        I am on line 1Over here I am on line 2Line 3 hereLook out for 4

chunk's contents: Johnny 5 alive!
readLine line:    I am on line 1Over here I am on line 2Line 3 hereLook out for 4Johnny 5 alive!
main line:        I am on line 1Over here I am on line 2Line 3 hereLook out for 4Johnny 5 alive! 
```

* * *

**但是**如果我将该定义更改为类似的`#define BUFFER_SIZE 20`，我会得到我正在寻找的输出：

```
chunk's contents: I am on line 1

readLine line:    I am on line 1
main line:        I am on line 1

chunk's contents: Over here I am on l
chunk's contents: ine 2

readLine line:    Over here I am on line 2
main line:        Over here I am on line 2

chunk's contents: Line 3 here

readLine line:    Line 3 here
main line:        Line 3 here

chunk's contents: Look out for 4

readLine line:    Look out for 4
main line:        Look out for 4

chunk's contents: Johnny 5 alive!

readLine line:    Johnny 5 alive!
main line:        Johnny 5 alive! 
```

* * *

我想我的问题已经缩小到这`strncat(line, chunk, strlen(chunk) + 1);`条线了。我不明白为什么`line`当 my`BUFFER_SIZE`足够高时会包含前面的 s 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:30:55.940

```
line = realloc(line, ++count * BUFFER_SIZE * sizeof(char)); 
```

不初始化分配的内存。因此，如果第一个`realloc`in`readLine`将您在上一次调用中获得的内存块归还给您 - 并非不可能，您可能仍然有旧的内容。

无论如何，对于未初始化的内存，第一个`strncat`可能会调用未定义的行为，因为分配的内存中不需要 0 字节。

`line`在进入循环之前分配一个缓冲区，并将 a 写入`0`第一个字节。

另外，不要使用

```
line = realloc(line, ++count * BUFFER_SIZE * sizeof(char)); 
```

如果`realloc`失败，则会泄漏内存。你应该检查的返回值`realloc`，

```
char *temp = realloc(line, ++count * BUFFER_SIZE * sizeof(char));
if (temp == NULL) {
  // Oops
} else {
    line = temp;
} 
```

并且不要`malloc`在通话中`chunk`，`fgets`

```
while (fgets((chunk = malloc(sizeof(char) * BUFFER_SIZE)), BUFFER_SIZE, fp) != NULL) 
```

如果`malloc`失败，那也会调用未定义的行为。`malloc`并在致电前检查`fgets`，

```
while ((chunk = malloc(sizeof(char) * BUFFER_SIZE)) && fgets(chunk, BUFFER_SIZE, fp) != NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:34:12.993

不过，您可以坚持使用`realloc`并将缓冲区设置为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T20:35:09.607

你的问题在这里：

```
 line = realloc(line, ++count * BUFFER_SIZE * sizeof(char)); 
```

根据手册页`realloc`：

```
"realloc(3) does not guarantee that the additional memory is also
 zero-filled." 
```

和

```
"If ptr is NULL, realloc() is identical to a call to malloc() for size bytes." 
```

因此，您获得的任何新内存都可能充满非零字节，这意味着第一次调用它时，第一个字节可能不会有 0，这意味着 strncat 将附加到任何垃圾字节在分配中。

# flash - 影片剪辑坐标

> ID：15166254
> 
> 赞同：0
> 
> 时间：2013-03-01T20:24:24.477
> 
> 标签：flash, actionscript, movieclip

我对 actionscript 比较陌生，但这是我目前遇到的困境。我目前有一个大型影片剪辑作为容器。在这个影片剪辑中，我有各种其他影片剪辑。我目前的代码根据鼠标的位置向右或向左移动横幅。我想做的是获取子动画剪辑的坐标，这样我就可以在它们到达屏幕上的特定点时操纵某些动画。但是，当我尝试通过执行以下操作访问 X 和 Y 变量时：

```
trace(movieClip_1.childMovieClip.x) 
```

这些值不会改变，因为它们会附着在父动画剪辑中的局部变量上。

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:31:47.917

试试这个！

```
var point:Point = new Point(childMovieClip.x, childMovieClip.y);
point = localToGlobal(point);
trace('Child coords: ' + point); 
```

并查看文档-> [localToGlobal](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)

# angularjs - 使用angularjs提交表单时如何获取选中的单选按钮的值？

> ID：15166270
> 
> 赞同：10
> 
> 时间：2013-03-01T20:25:48.983
> 
> 标签：angularjs

我有几个表格。每个表单都有几个可能的单选按钮和一个提交按钮。只能选中一个单选按钮（对每个单选使用相同的名称属性）。提交表单时，如何使用 angularjs 获取选中的单选按钮的值？@blesh 建议对每个输入使用相同的 ng-model，但请注意，问题是输入标签是使用 ng-repeat 生成的，这就是问题的开始。当然，我当然只需要一个按钮来输入一堆输入。在玩@blesh 的答案后，在以下 plunker 中对其进行了很好的描述：[http](http://plnkr.co/edit/5KTQRGdPv3dbP462vq1a?p=preview) ://plnkr.co/edit/5KTQRGdPv3dbP462vq1a?p=preview在其中，您可以看到警报显示的是初始值而不是当前值选定的输入。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T20:48:16.157

您的单选按钮的值将在您在输入元素上分配 ng-model="" 的任何范围属性上可用。尝试这样的事情：

JS

```
app.controller('MyCtrl', function($scope){ 
   $scope.submitForm = function (){
       alert($scope.radioValue):
   };

   $scope.radioValue = 1;
}); 
```

HTML

```
<form name="myForm" ng-controller="MyCtrl" ng-submit="submitForm()">
   <label><input type="radio" name="test" ng-model="radioValue" value="1"/> One</label>
   <label><input type="radio" name="test" ng-model="radioValue" value="2"/> Two</label>
   <label><input type="radio" name="test" ng-model="radioValue" value="3"/> Three</label>
   <div>currently selected: {{radioValue}}</div>
   <button type="submit">Submit</button>
</form> 
```

而且，所以你可以看到它的工作，[这是一个演示示例的 plunker](http://plnkr.co/edit/4lvJclZuh0lryF1nhmdt)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-14T05:46:12.597

只需添加`$parent`.`ng-model`

```
<form name="myForm" ng-submit="submitForm()">
       <label data-ng-repeat="i in [1,2,3]"><input type="radio" name="test" ng-model="$parent.radioValue" value="{{i}}"/>{{i}}</label>
       <div>currently selected: {{radioValue}}</div>
       <button type="submit">Submit</button>
    </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-26T13:03:44.110

我遇到了这个问题，并找到了一个非常简单和干净的解决方案。这是你应该做的。

在您的控制器中，使用任何名称（在本例中为“radioValue”）创建一个空对象。

在您的 HTML 文件中，为每个单选按钮/输入使用相同的“ng-model”，其名称与对象加入每个单选按钮的“名称”属性相同（每个按钮也应该相同），并用句点分隔（. ) 如代码片段所示。

**控制器**

```
var radioValue={};
...
...
console.log($scope.radiovalue) //use JSON.strinigify if naccessary 
```

**HTML 文件**

```
 <input type="radio" name="somename" ng-model="radioValue.somename" value="1"/>
    <input type="radio" name="somename" ng-model="radioValue.somename" value="2"/>
    <input type="radio" name="somename" ng-model="radioValue.somename" value="3"/>
//Don't forget to mention value attribute. ng-model does the work by identifying the radio-buttons/inputs by value attribute 
```

**您应该期待的输出**

```
{"somename":"1"} //if radio-button with value "1" is selected. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-28T08:57:12.030

结合ng-value

```
app.controller('MyCtrl', function($scope){ 
   $scope.submitForm = function() {
      *****
   };
   $scope.radioBtn = {
    name: 'radioButton'
   };

   $scope.radioValueOne = {"id": "1", "value": "whatever you want"};
   $scope.radioValueTwo = {"id": "2", "value": "whatever you want"};
   $scope.radioValueThree = {"id": "3", "value": "whatever you want"};
});

<form name="myForm" ng-controller="MyCtrl" ng-submit="submitForm()">
   <label><input type="radio" name="test" ng-model="radioBtn.name" ng-value="radioValueOne"/> One</label>
   <label><input type="radio" name="test" ng-model="radioBtn.name" ng-value="radioValueTwo"/> Two</label>
   <label><input type="radio" name="test" ng-model="radioBtn.name" ng-value="radioValueThree"/> Three</label>
   <div>currently selected: {{radioBtn.name}}</div>
   <button type="submit">Submit</button>
</form> 
```

# c++ - C++ 输入时，程序结束而不继续

> ID：15166273
> 
> 赞同：0
> 
> 时间：2013-03-01T20:25:53.820
> 
> 标签：c++

编辑：这是 If-Else。请看看发生了什么。如果答案错误，有人可以告诉我如何返回吗？比如，不正确的答案，重新输入？

使用命名空间标准；

```
int main()
{

cout<<"Welcome to the Grade Database. Please insert your domain: " ;
cout<<"\n";
int d, n;
cin>>d;
cout<<"Now enter your total grade(between 0-100): " ;
cin>>n;
if (n>0 && n<59){
    cout<<"See you next year then :(" ;
    cout<<"F-"<<n;}
else if (n<60 && n>=69){
    cout<<"Well...you pass ;D" ;
    cout<<"E-"<<n<<"  ~"<<d;}
else if (n>70 && n<=79){
    cout<<"Better than the average!";
        cout<<"D-"<<n<<"  ~"<<d ;}
else if (n>80 && n<=89){
    cout<<"Very well sir!";
    cout<<"C-"<<n<<"  ~"<<d;}
else if (n>90 && n<=99){
    cout<<"Wow, amazing! One of the best!";
    cout<<"B-"<<n<<"  ~"<<d;}
else if(n==100){
    cout<<"Well, hello there Mr. Stephen Hawking.";
    cout<<"A-"<<n<<"  ~"<<d;}
else{
    cout<<"Invalid Entry.";}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:30:04.233

`switch`在 C++ 中不支持范围或条件，只支持完全匹配。既然您有条件，请尝试使用`if`and `else`，如下所示：

```
cin>>n;
if (n>0 && n<59) {
    cout<<"See you next year then :(" ;
    cout<<"F-"<<n;
}
else if (n>=60 && n<=69) {
    cout<<"Well...you pass ;D" ;
    cout<<"E-"<<n<<"  ~"<<d;
}
else if (n>=70 && n<=79) {
    cout<<"Better than the average!";
    cout<<"D-"<<n<<"  ~"<<d ;
}
else if (n>=80 && n<=89) {
    cout<<"Very well sir!";
    cout<<"C-"<<n<<"  ~"<<d;
}
else if (n>=90 && n<=99) {
    cout<<"Wow, amazing! One of the best!";
    cout<<"B-"<<n<<"  ~"<<d;
}
else if (n==100) {
    cout<<"Well, hello there Mr. Stephen Hawking.";
    cout<<"A-"<<n<<"  ~"<<d;
}
else {
    cout<<"Invalid Entry.";
} 
```

您可能还需要一些换行符。简单地写`cout <<`第二次不会开始新的一行，看看`std::endl`.

# c# - 如何仅在特定列下向 DataTable 添加新行？

> ID：15166277
> 
> 赞同：1
> 
> 时间：2013-03-01T20:26:11.103
> 
> 标签：c#, datatable, datarow

我有一个 DataTable，dt2，我试图在其中添加新行（在下面代码的 else 块中）。我不能简单地在 foreach 循环中添加行（我尝试使用 line `dt2.Rows.Add(newRow);`），因为这会破坏循环计数器或其他东西并导致以下错误：**“集合已修改；枚举操作可能无法执行。”**

因此，我尝试将新行值存储在 List 中，然后将 List 添加到循环外的表中。这在它编译并且确实添加了一些东西的意义上是有效的；不幸的是，它没有采用正确的值或列位置，而是显示这个废话：**System.Collections.Generic.List`1[System.Object]**

![在此处输入图像描述](../Images/ff543b5e24a7d00980ab69352cec4287.png)

此外，信息*应*显示在 Target_Folder、Target_File 和 Target_Checksum 下的第 3、第 4 和第 5 个索引列中，而不是在 Baseline_Folder 下。

如何在正确的列下存储和显示正确的值？

```
foreach (DataRow drow in dt2.Rows)
{
    if (drow["BASELINE_FILE"].ToString() == filename)
    {
        // do stuff
    }
    else
    {
        newRow = dt2.NewRow(); // newRow is a DataRow I declared up above
        newRow[3] = directory;
        newRow[4] = filename;
        newRow[5] = checksumList[j];
        newRow[6] = "Missing";
        //dt2.Rows.Add(newRow); 
        // can't add here because that increases the number of rows and screws up the foreach loop
        // therefore need to find way to store these values and add outside of loop
        newFiles.Add(newRow); // newFiles is a List
    }
}
dt2.Rows.Add(newFiles); // this doesn't work properly, doesn't take correct values 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:53:49.927

如果您希望浏览现有网格中的每一行，这应该为您完成。这样 currentRows 在循环运行时不会被修改，因为它将是该列表的浅表副本。

```
var currentRows = from row in dataTable.Rows select row;
foreach (var row in currentRows)
{
    if(doStuffCondition){ doStuff();}
    else{
      DataRow newRow = dataTable.NewRow();
      newRow[1] = newValue;  //repeat until values are loaded
      employeesDataTable.Rows.Add(newRow);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:40:26.737

这不在我的脑海中，但是按照这些思路应该可以工作：

```
DataRow dr = dt2.NewRow();
foreach (ListItem item in newFiles.Items)
{
dr[3] = item[3].ToString();
dr[4] = item[4].ToString();
etc.
} 
```

如果您需要更多指导，请告诉我，我会更加努力地研究它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:45:24.590

我认为这是您真正想要做的：

```
DataRow[] drx = dt2.Select(string.Format("BASELINE_FILE = '{0}'" , filename));

if (drx.Length == 1)
 {
    // do stuff with drx[0]

 }
 else
 {
    newRow = dt2.NewRow(); // newRow is a DataRow I declared up above
    newRow[3] = directory;
    newRow[4] = filename;
    newRow[5] = checksumList[j];
    newRow[6] = "Missing";
    dt2.Rows.Add(newRow); 
 } 
```

这样您就不需要遍历行。

# php - PHP 获取超过 20000 封 imap 电子邮件

> ID：15166280
> 
> 赞同：7
> 
> 时间：2013-03-01T20:26:26.867
> 
> 标签：php, email, cron, imap

我正在尝试将多个邮箱导出到数据库。我当前的脚本将连接 IMAP 并循环所有消息。尽管对于较大的邮箱，这将不起作用，并且会减慢甚至停止。

这个想法是每天运行脚本以将所有尚未在数据库中的消息“复制”到数据库中。获取大量电子邮件的最佳方式是什么（20k 封邮件分布在大约 40 - 50 个文件夹中）。

最终，这将需要在单个服务器上每天扫描数百甚至数千个帐户（所以想象一下数据量）。它将邮件（uid 和主题）存储到数据库中，并创建一个将存储在数据服务器上的包（因此它还需要获取附件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T19:48:39.923

因此，您想通过 IMAP 执行电子邮件备份。有专业的软件工具可以做到这一点。

让我们从简单的事情开始：从收件箱文件夹中为特定用户下载一封电子邮件。这需要您 (a) 使用用户的凭据登录，(b) 选择收件箱文件夹，以及 (c) 下载消息（假设您已经知道它的 UID，即 55）。您在 IMAP 中按如下方式执行此操作（仅限请求 - 未显示响应）：

```
01 LOGIN username password
02 SELECT INBOX
03 UID FETCH 55 BODY[] 
```

特定文件夹中的每条消息都有一个[UID](https://www.rfc-editor.org/rfc/rfc3501#section-2.3.1.1)。*这是永远不会更改的邮件的唯一标识符 -该文件夹中*的任何其他邮件都不能使用它。新消息的 UID 必须高于以前的消息。这使它成为确定您之前是否已经下载过该消息的有用工具。

下一步：现在让我们看看在收件箱文件夹中下载所有新邮件。假设您是第一次下载消息，并且收件箱当前有 UID 为 54、55 和 57 的消息。您可以使用以下命令一次下载这些消息：

```
03 UID FETCH 54,55,57 BODY[] 
```

（如果有很多要下载的内容，您可能希望将其分批（例如一次 30 个）分解。）完成此操作后，您将存储迄今为止下载的最高 UID。下次，您可以检查是否有高于该值的 UID，如下所示：

```
04 UID FETCH 58:* UID 
```

这将检索 UID（仅）用于 UID 从 58 开始的消息。如果得到结果，则下载这些结果，然后再次存储 UID。等等。

有一个问题。只要文件夹的 UIDVALIDITY 属性（包括在对 SELECT 命令的响应中）不更改，消息的 UID 就有效。如果由于某种原因发生更改，该文件夹将失效，您需要重新下载该文件夹中的所有邮件。

最后，您希望将此扩展为适用于所有用户的所有文件夹。为了获取特定用户的所有文件夹，您可以使用 IMAP LIST 命令：

```
05 LIST "" "*" 
```

您需要事先知道用户的凭据并遍历它们。

这是您需要做的事情背后的 IMAP 理论。在 PHP 中实现它留作练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:31:16.990

你在用[`imap_ping`](http://www.php.net/manual/en/function.imap-ping.php)吗？

> imap_ping() ping 流以查看它是否仍然处于活动状态。它可能会发现新邮件；这是定期“新邮件检查”的首选方法，也是具有不活动超时的服务器的“保持活动状态”的首选方法。

其他要看的：[`imap_timeout`](http://www.php.net/manual/en/function.imap-timeout.php) [`imap_reopen`](http://www.php.net/manual/en/function.imap-reopen.php)

*事实上有一种方法叫做`reopen`建议不是这样的:)*

如果您似乎无法保持连接，另一个选择是导出数据以`mbox`格式化并在本地获取。对于大型邮箱可能会更快，并且可以消除超时/连接问题。

# javascript - 在javascript方法调用中更改“this”？

> ID：15166281
> 
> 赞同：3
> 
> 时间：2013-03-01T20:26:27.750
> 
> 标签：javascript, html, object

跟进这个问题，[从 html 调用 javascript 对象方法](https://stackoverflow.com/questions/15161862/call-javascript-object-method-from-html)。我在 Firebug 中调试这个。

```
function Fred() {
    this.a = 1;
    function foo() {
        if (a == 1) {
            a++;
        }
        var e = 0;
    }
    this.bar = function () {
        var a = 3;
        foo();
    };
} 
```

从 HTML 文件中，我创建了一个新实例`Fred`并调用`bar()`. 在 Firebug 中，在调用 时`bar()`，我可以在 Watch 视图中看到`this`我的`Fred`实例。`bar()`调用时`foo()`，`this`更改为 的实例`Window`。我本来希望`this`保持不变。

也许更多关于关闭的补救培训。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:36:13.713

在 JavaScript 中，如果你调用一个函数，`this`指向的事实取决于调用的上下文。

### 函数调用模式

如果将函数调用为函数，即：

```
foo(); 
```

then`this`将引用全局上下文，这在浏览器中表示`window`对象。

### 方法调用模式

相反，如果您调用类似方法的函数，即：

```
x.foo(); 
```

然后`this`将引用您调用该函数的对象，即`x`.

### 调用/应用调用模式

如果你想调用一个函数作为一个函数，并改变`this`所指的你可以使用`call`或`apply`函数，如

```
foo.call(x);
foo.apply(x); 
```

两者都做同样的事情：调用`foo`就好像它是作为`x`. 它们之间的区别在于您要移交参数时：`call`要求您将它们指定为逗号分隔的列表，而`apply`允许您移交数组：

```
foo.call(x, p1, p2, p3, ...);
foo.apply(x, [ p1, p2, p3, ... ]); 
```

### 构造函数调用模式

为了完整起见，甚至还有第四个选项`this`：如果您将函数作为构造函数调用，`this`则指向新创建的对象：

```
new foo(); 
```

为了让每个人都明白这一点，在 JavaScript 中，最好的做法是使用大写字母作为构造函数的函数名称开头，即：

```
new Foo(); 
```

尽管如此，效果保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:31:42.473

使用[`.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[`.apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

第一个参数说明将调用以下函数的上下文。

例如

```
this.bar = function () {
    var a = 3;
    foo.call(this);
}; 
```

# emacs - 将键盘宏应用于 Emacs 中的活动区域

> ID：15166285
> 
> 赞同：3
> 
> 时间：2013-03-01T20:26:57.977
> 
> 标签：emacs, macros

我正在尝试学习更多地使用键盘宏，但不知道如何解决这个问题。

我需要选择一个区域，然后在该区域上运行两个查询替换。每次地区都会不同，但查询替换将是相同的。

问题出现是因为第一个查询替换（或`replace-string`）删除了活动区域。如果我使用`C-u C-SPC`，则显示开始标记已保存，但该点未保存，因此活动区域不可用于第二次替换操作。

如何将删除活动区域作为副作用的两个操作应用于键盘宏中的同一区域？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T20:55:00.147

由于我不执行所描述的任务，因此我不确定我是否可以为您提供最快的解决方案，但这里至少有两种可行的方法。

## 选项1

此选项涉及在执行查询替换或您想要对该区域执行的任何操作之前使用*缩小*来减少活动区域的缓冲区。工作流程如下：

*   ...开始录制您的键盘宏并激活区域
*   `M-x`窄到区域
*   ...执行您想要执行的操作，通过 `M-<`(beginning-of-buffer) 等愉快地跳回到起点
*   `M-x`扩大
*   ...停止录制您的键盘宏

您应该能够愉快地将其应用于任何突出显示的区域。

顺便说一句：narrow-to-region 和 widen 具有 `C-x n n`(narrow-to-region) 和`C-x n w`(widen) 的默认绑定，因此您可以在未更改键绑定的情况下使用它们

## 选项 2

此选项涉及在“销毁”该区域之前使用*寄存器来存储该区域的位置。*实际的工作流程看起来像

*   ...开始录制您的键盘宏并激活区域
*   `C-x r SPC`1（指向注册）
*   `C-x C-x` （交换点和标记）
*   `C-x r SPC`2（指向注册）
*   ...执行“破坏”该区域的操作
*   `C-x r j`2（跳转注册）
*   `C-SPC`
*   `C-x r j`1（跳转注册）
*   ...现在您的区域应该又回来了，所以请愉快地应用任何其他不会“破坏”该区域的操作
*   ...停止录制您的键盘宏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:24:32.547

你缺少的是`exchange-point-and-mark` `C-x C-x`. 这具有重新激活标记的效果。

# c++ - 关于 MVC 视图界面的良好设计实践

> ID：15166293
> 
> 赞同：1
> 
> 时间：2013-03-01T20:27:22.090
> 
> 标签：c++, model-view-controller, user-interface

我不需要经常创建 GUI，但今天我这样做了，我希望能得到一些设计输入。

基本上我有一个后端，我也打算使用 MVC 模式添加一个 GUI。问题是我觉得封装主 GUI 窗口的任何类都会有很多状态（所有子元素）；最重要的是，它将有很多 setter，可能还有 getter、clear、color、size、position 和 refresh 功能。

*   一种选择是推进这个想法，并拥有一个非常大的公共界面来处理 GUI 使用的类型（`std::string`... `std::vector<std::string>`），我希望对 UI 的控制越多，我需要的公共成员函数就越多。

*   另一种选择是将程序状态传递给 GUI 并让它决定如何显示它，我担心这样做意味着它会给我更少的细节控制，并且会破坏关注点的分离，并意味着对程序状态的表示也需要在 GUI 中进行更改。

关于此事的任何意见都会有很大帮助。

如果有什么不同，这是一个使用 ncurses 抽象的 C++ gui。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:36:58.260

在我看来，您对 M 和 V 考虑了很多，但对 C 考虑不多。该模式应该真正称为 MCV，因为整个想法是控制器是模型（数据）和视图之间的桥梁（图形用户界面）。听起来您需要一个具有您提到的大部分功能的控制器。

简而言之，您的模型显然应该对显示一无所知，并且您的显示（视图）不应该知道如何访问模型。您需要一个控制器来读取数据（模型）并向显示器（视图）提供指令。如果您在视图中有用户交互，控制器可以解释它并根据需要修改模型。

这个想法是您永远不必更改所有 3，但是如果您更改模型或视图，您几乎总是必须更新控制器。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:54:06.993

巨型界面至少有一种替代方案。与其拥有一个处理每件事（大小、字体、颜色、要显示的内容等）的函数，不如拥有一个接受“角色”和代表角色的数据的单一函数。这需要某种可以包含多种数据类型的包装器。

[QT 的 QAbstractItemModel 类参考](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data)有一个很好的例子：

> QVariant QAbstractItemModel::data ( const QModelIndex & index, int role = Qt::DisplayRole ) const [纯虚拟]

该函数将返回 QVariant，该 QVariant 表示在提供的索引处指示的角色。

这种方法的缺点是您必须知道存在哪些角色以及它们的作用。 [QT 的默认角色如下所示。](http://qt-project.org/doc/qt-4.8/qt.html#ItemDataRole-enum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:53:25.560

我喜欢让模型的某些部分能够自我检测：

```
class Model {
private:
    int value;
public:
    void instrument(Instrumenter& instrumenter);
}; 
```

管理控件的`Instrumenter`创建。该模型将告诉它如何控制它并允许它访问数据。

```
void Model::instrument(Instrumenter& instrumenter) {
    instrumenter.addRangeController(0, 100, 5, value);
} 
```

然后针对不同的输入设备（例如键盘、触摸屏），您可以创建适当的控件：

```
class KeyboardInstrumenter : public Instrumenter {
public:
    void addRangeController(int min, int max, int increments, int& controlled) {
        // create 3 widgets, up arrow, down arrow, and value
    }
};

class TouchscreenInstrumenter : public Instrumenter {
public:
    void addRangeController(int min, int max, int increments, int& controlled) {
        // create slider with min, max and increments
    }
}; 
```

`int`我们可以将它包装在一个控制对象中，而不是直接传入，以帮助封装。

# r - ggplot2中ggfluctuation的颜色范围

> ID：15166297
> 
> 赞同：1
> 
> 时间：2013-03-01T20:27:45.673
> 
> 标签：r, ggplot2

我正在尝试使用两个带有`ggfluctuation`in 的热图`ggplot2`。热图的两个表具有不同的最大值（假设为 0.8 和 0.9）。为了使它们具有可比性，所以我想知道如何使它们的颜色都在 0 到 1 之间变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:13:46.150

不要使用`ggfluctuation`; 它已被弃用。你想要的效果可以使用`geom_tile()`如下来实现。如果您有多个绘图，请创建一个色标并将其依次应用于每个绘图：

```
library("ggplot2")

# creat variable to flag whether diamond size is below mean
diamonds$small <- diamonds$carat < mean(diamonds$carat)

# create table suitable for plotting, with facets by size
d2 <- data.frame(table(diamonds$cut, diamonds$color, diamonds$small))
names(d2) <- c("cut", "color", "size", "freq")

# create colour scale
c.scale <- scale_fill_gradient(low = "white", 
                               high = "steelblue",
                               limits=c(min(d2$freq),
                                        max(d2$freq)))

# apply the same scale to different plots
p1 <- ggplot(d2[which(d2$size == TRUE),], aes(cut, color)) + 
    geom_tile(aes(fill = freq), colour="white") 

p1 + c.scale

p2 <- ggplot(d2[which(d2$size == FALSE),], aes(cut, color)) + 
    geom_tile(aes(fill = freq), colour="white") 

p2 + c.scale 
```

## 结果：两个图

### 阴谋`p1`

![情节 p1](../Images/1c63cb8933157000794e1d685b21b08b.png)

### 阴谋`p2`

![情节 p2](../Images/af5a140b100e3fa67a6b8647d7eb001e.png)

# vb6 - 杀死 VB6 应用程序的先前实例

> ID：15166300
> 
> 赞同：0
> 
> 时间：2013-03-01T20:27:53.017
> 
> 标签：vb6

我四处寻找杀死VB6应用程序以前实例的正确方法，但无济于事。如果我们的主服务死了，我们需要终止正在运行的应用程序的前一个实例，然后，当服务恢复时，只应该加载新实例。我试图在以下函数中退出此代码：

```
Private Sub g_cServerInterface_FatalError(Error As enSvrReturns, ErrorString As String)

Dim sMsg As String
Dim result As VbMsgBoxResult

m_bFatalError = True

UnFreeze

If m_cLanguageText Is Nothing Then
    GoTo TheEnd    'Form not yet loaded - not yet logged on
End If

'    m_NumFatalErrors = m_NumFatalErrors + 1
'    If m_NumFatalErrors > 5 Then
'        Functions.DevInfo "Unable to restart Manitou.", g_cLangText_General
'        End
'    End If

If Error <> SVRERR_NOT_CONNECTED Or RunningInDebugger() Then
    sMsg = g_cLangText_General.GetText("A system error has occurred")

    If ErrorString <> "" Then
        sMsg = sMsg & ":" & vbCrLf & vbCrLf & ErrorString & vbCrLf & vbCrLf
    Else
        sMsg = sMsg & ".  "
    End If

    sMsg = sMsg & g_cLangText_General.GetText("Press OK to attempt to restart or Cancel to quit.")

    result = DevAskOkCancel(sMsg, Nothing)
Else
    ' Since we've been disconnected, attempt immediately to reconnect
    result = vbOK
End If

If (result = vbOK) Then
    On Local Error Resume Next
    If InStr(g_CommandLine, "-U") = 0 Then
        g_CommandLine = g_CommandLine & " -U" & g_cUser.id
    End If
    If InStr(g_CommandLine, "-P") = 0 Then
        g_CommandLine = g_CommandLine & " -P" & g_cUser.Password
    End If
    Shell App.Path & "\" & App.EXEName & " " & g_CommandLine & " -X", vbNormalFocus
    DoEvents
End If

TheEnd:
If (Not RunningInDebugger()) Then
    ' Running as compiled executable
    ' Specifies the exit code for the process, and for all threads that
    ' are terminated as a result of this call. Use the GetExitCodeProcess
    ' function to retrieve the process's exit value. Use the GetExitCodeThread
    ' function to retrieve a thread's exit value.

    CoUninitialize
    ExitProcess 0
Else
    ' Running from the IDE
    End
End If

End Sub 
```

请注意，我为此添加了 CoUninitialize 和 ExitProcess 0 API 调用。服务恢复时如何正确终止先前加载的实例？谢谢拉里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-28T09:28:46.727

Private Declare Function FindWindow Lib "user32" _ Alias "FindWindowA" (ByVal lpClassName As String, _ ByVal lpWindowName As String) 只要

私有声明函数 PostMessage Lib "user32" _ Alias "PostMessageA" (ByVal hwnd As Long, _ ByVal wMsg As Long, _ ByVal wParam As Long, _ lParam As Any) As Long

私有常量 WM_CLOSE = &H10

Private Sub Form_Load() Dim strCap As String Dim lngHwnd As Long Dim lngRet As Long strCap = Me.Caption Me.Caption = "*" & strCap

lngHwnd = FindWindow(ByVal vbNullString, ByVal strCap)

If lngHwnd <> 0 Then PostMessage lngHwnd, WM_CLOSE, 0&, 0& End If

Me.Caption = strCap

结束子

# html - html代码给你放个图片标题

> ID：15166301
> 
> 赞同：0
> 
> 时间：2013-03-01T20:28:02.733
> 
> 标签：html, favicon

如何使用 html 在网站标题中制作图片

```
 <html>  
    <head> 

    <title src="android.jpg"> Androids apps </title>

    </head> 
    </html> 
```

那没有用有人知道该怎么做吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:29:50.697

我认为您指的是[Favicon](http://en.wikipedia.org/wiki/Favicon)

您可以将 favicon.ico 文件放在网站的根目录中或在您的`head`

```
<link rel="shortcut icon" href="favicon.ico" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:29:49.310

我相信您正在寻找的是 favicon.ico

这是一个生成器[http://www.favicon.cc/](http://www.favicon.cc/)

# php - php mysql 选择和回显数组多维

> ID：15166302
> 
> 赞同：0
> 
> 时间：2013-03-01T20:28:03.207
> 
> 标签：php, html, mysql, arrays

我有一个大约 5 小时的问题...我可以在合并之前从一个数组中打印一个 mysql 选择到一个表...我的代码是：在 Cookies 中有这个数组 Array( [] => [1254] => 325 [2112] => 77 [354] => 2 ) 其中 [1254 是产品的鳕鱼] => 325 是定量的

```
<table width="100%" border="0" cellpadding="3" cellspacing="2">
            <tr><!--prepare row of head cols html static--> 
              <td> COD</td>
              <td> PROD</td>
              <td>CAT</td>
              <td>**CANT**</td>
          </tr>
     <?php  
          ////array in cookie to variable php $rr
          $rr = $_COOKIE['coo'];
          foreach ($rr as &$arr){////for each element of $rr generate one register
            $SQL="SELECT cod_pro,name,cod_cat,('$arr') AS quant FROM products 
               WHERE cod_pro=".$arr." 
               ORDER BY cod_cat asc";
          $result=mysql_query($SQL,$lnk) ;

if (mysql_num_rows($result)>0){  //if exist anyone 

while($registers=mysql_fetch_array($result,MYSQL_ASSOC)){
    ////print each row here all right
 echo "<tr><td>".$registers["cod_pro"]."</td>"."<td>".$registers["name"]."/td>"
 ."<td>".$registers["cod_cat"]."/td><td>".$registers["quant"]."</td></tr>";
       ////$registers["quant"] i want add one col with this value from cookie
  ?>
    <?php }?>
    <?php }     
    } ?>
  </table> 
```

问题是 $registers["cant"] 我如何执行 SELECT my sql，以提供此输出；[] => [1254] => 325 [2112] => 77 [354] => 2

```
 COD (pk)   NAME         COD_CAT       **quant** This i can´t show
      --------------------------------------------
      1254      Car (bd)         1 (bd)      **325**
      2112      Cicles(bd)       2 (bd)       **77** 
      354       toys (in bd)     3 (bd)        **2** 
```

任何想法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:41:49.487

进行选择后，获取结果，然后对结果执行 for each 循环

现在你走相反的路

此外，您的循环中有一个 tr 反对多个 tr 。

首先尝试制作流程图，然后编码。

建议您阅读数据结构书籍并尝试在那里编写代码和解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:43:21.747

我*想*我明白你在问什么。我清理了您的代码，并进行了我*认为*您想要的修复。没有理由尝试将数据传递到该 SQL 查询中，只是为了将其拉回。

只需直接在循环中引用数据即可。

我不知道这段代码实际上做了什么，所以我在下面写的可能不起作用......

但据我所知，这是我能做的最好的事情。

```
<table width="100%" border="0" cellpadding="3" cellspacing="2">
    <tr>
       <td> COD</td>
       <td> PROD</td>
       <td>CAT</td>
       <td>**CANT**</td>
    </tr>
 <?php  

    $rr = $_COOKIE['coo'];
    foreach ($rr as $name => &$arr)
    {
        $SQL = "SELECT cod_pro,name,cod_cat FROM products 
                WHERE cod_pro=".$arr." 
                ORDER BY cod_cat asc";

        $result=mysql_query($SQL,$lnk) ;

        if (mysql_num_rows($result)>0)
        {  

           while($registers=mysql_fetch_array($result,MYSQL_ASSOC))
           {

                echo "<tr><td>".$registers["cod_pro"]."</td>"."<td>".$registers["name"]."/td>"."<td>".$registers["cod_cat"]."/td><td>".$name."</td></tr>";

           } 
         }      
    } 
 ?>
</table> 
```

# iphone - 使用 NSData 更新 GKTurnBasedMatch 中的转弯

> ID：15166303
> 
> 赞同：0
> 
> 时间：2013-03-01T20:28:04.013
> 
> 标签：iphone, ios, xcode, gkturnbasedmatch

我正在尝试创建一个 2 人回合制比赛游戏。玩家目前可以轮流进行，但数据实际上并未填充到 NSData 中。我在如何存档和序列化方面找到了这种方法，但我觉得我只是在做错事。这是在玩家 1 完成他们的回合后执行的代码。目前，我真的只需要保存分数（我之所以这样说是因为我将 player1id 保存在数据字典中，而我真的不需要）。

```
 //changes whose turn it is and sends data.
    NSLog(@"player 1 just took their turn");
    NSUInteger myscore = [AppDelegate getGameState].gameDetail.player1Score;
    NSString *errorStr;
    NSDictionary *myMatchDataDict = @{@"Player1id" : [GKLocalPlayer localPlayer].playerID,
                                   @"Player1score" : myscore,
                                   @"Player2id" : nil,
                                   @"Player2score" : nil };
    NSData *data = [NSPropertyListSerialization dataFromPropertyList:myMatchDataDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&errorStr];
    GKTurnBasedParticipant *nextParticipant;
    nextParticipant = [currentMatch.participants objectAtIndex:1];
    NSLog(@"game data: %@,", data);
    [currentMatch endTurnWithNextParticipant:nextParticipant matchData:data completionHandler:^(NSError *error) {
        if (error) {
            NSLog(@"%@", error);
        }
    }];
    NSLog(@"Turn Sent"); 
```

轮到发送，myscore 里面确实有分数，但是 NSData *data 里面没有数据！（注意：目前我收到此错误：）

“'NSUInteger' 类型的集合元素（又名 'unsigned in'）不是 Objective-C 对象”

撕开我的代码，告诉我我做错了什么！

编辑：在输出中添加：

```
 NSLog(@"player 1 just took their turn");
    NSUInteger myscore = [AppDelegate getGameState].gameDetail.player1Score;
    NSLog(@"whats in this: %lu", (unsigned long)[AppDelegate getGameState].gameDetail.player1Score);
    NSLog(@"myscore is: %lu", (unsigned long)myscore);
    NSString *errorStr;
    NSDictionary *myMatchDataDict = @{@"Player1id" : [GKLocalPlayer localPlayer].playerID,
                                   @"Player1score" : @(myscore)};
    NSData *data = [NSPropertyListSerialization dataFromPropertyList:myMatchDataDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&errorStr];
    GKTurnBasedParticipant *nextParticipant;
    nextParticipant = [currentMatch.participants objectAtIndex:1];
    NSLog(@"myMatchDataDictionary player 1 score: %ld,", (long)[myMatchDataDict[@"Player1Score"] integerValue]); 
```

和输出：

2013-03-01 15:49:10.174 玩家 1 轮到他们了

2013-03-01 15:49:10.174 这是什么：3042

2013-03-01 15:49:10.175 我的分数是：3042

2013-03-01 15:49:10.175 myMatchDataDictionary 播放器 1 得分：0

2013-03-01 15:49:10.175 发送转

我开始认为这与 [AppDelegate getGameState].gameDetail.player1Score 有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:40:54.957

改变这个

```
@"Player1score" : myscore, 
```

进入

```
@"Player1score" : @(myscore), 
```

您只能将对象添加到字典中，而 NSUInteger 不是对象，当您传递 @(myScore) 时，您会将其变为 NSNumber 对象 - 所以在读回它时，您应该这样做：

```
[myMatchDataDictionary[@"Player1Score"] integerValue]; 
```

# javascript - RequireJS 和 Backbone ajax 问题

> ID：15166305
> 
> 赞同：1
> 
> 时间：2013-03-01T20:28:17.750
> 
> 标签：javascript, jquery, backbone.js, requirejs

我是 RequireJS 和 Backbone 的新手，我试图理解为什么 ajax (fetch) 代码不能正常工作。

## main.js

```
require.config({
shim: {
    'backbone': {
        deps:['underscore', 'jquery'],
        exports: 'Backbone'
    },
    'underscore': {
        exports: '_'
    }
},
paths: {
    'jquery': 'vendor/jquery/jquery',
    'underscore': 'vendor/underscore/underscore',
    'backbone': 'vendor/backbone/backbone'
}
});
require(['views/appViews'], function(AppView) {
 new AppView();
}); 
```

## AppView.js

```
define(['jquery', 'underscore','backbone', '../collections/appCollections'], function($, _, Backbone, AppCollections) {
    var App = Backbone.View.extend({
        initialize: function() {
            _.bindAll( this, "render" );

            this.collection = new AppCollections;

            var $this = this;

            this.collection.bind("all", this.render, this);
            var x = this.collection.fetch();
            /*
             * This was not working
            this.collection.fetch({
                success: function() {
                    $this.render();
                }
            });
            */
        },

        template: _.template( $('#tweetsTemplate').html() ),

        render: function() {
            console.log(this.collection.toJSON());
            //$(this.el).html(this.template({ tweets: this.collection.toJSON() }));
        }   
      });
      return App;
     }); 
```

## AppCollections.js

```
define(['jquery','underscore','backbone','../models/appModels'], function($, _, Backbone, AppModel) {
 var AppCollection = Backbone.Collection.extend({

model: AppModel,

url: 'http://search.twitter.com/search.json?q=dog',

parse: function ( response, xhr ) {
        return response.results;
},
// Overwrite the sync method to pass over the Same Origin Policy
sync: function (method, model) {
    var $this = this;
    var params = _.extend({
        type: 'GET',
        dataType: 'jsonp',
        url: $this.url,
        processData: false
    }   );

    return $.ajax(params);
}

 });
 return  AppCollection;
}); 
```

## 应用模型

```
define(['underscore', 'backbone'], function(_, Backbone) {
var AppModel = Backbone.Model.extend({});
return AppModel;
}); 
```

问题是：一旦获取集合，就不会调用渲染方法。开发人员工具也没有错误。所以不知道在哪里看。

![在此处输入图像描述](../Images/3fb912eee46dedacf61a44489d66df83.png)

任何指针都有帮助。

谢谢病毒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:43:25.243

当您覆盖主干中的同步方法时，它不会正确触发事件。尝试[以这种方式覆盖同步方法](https://stackoverflow.com/questions/5096549/how-to-override-backbone-sync)

或者，您可以简单地使您的成功函数看起来像骨干源：

```
success = function(resp) {
    if (success) success(model, resp, options);
    model.trigger('sync', model, resp, options);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:52:59.137

未调用成功回调，因为您的`sync`方法未将其传递给`ajax`.

第三个参数`sync`是options对象，里面有成功回调。

```
sync: function (method, model, options) {
    var $this = this;

    var success = options.success;
    options.success = function(resp) {
      if (success) success(model, resp, options);
      model.trigger('sync', model, resp, options);
    };
    var params = _.extend({
        type: 'GET',
        dataType: 'jsonp',
        url: $this.url,
        processData: false
    }, options);

    return $.ajax(params);
} 
```

这样，`ajax`将正确调用 Backbone Collection 中定义的成功回调`fetch`，然后调用您传递给 fetch 的成功回调。

然后获取：

```
 this.collection.fetch({
            success: function() {
                $this.render();
            }
        }); 
```

这是`fetch`来自[Backbone 源代码](http://backbonejs.org/backbone.js)。您可以看到它将`success`回调传递给`sync`.

```
fetch: function(options) {
  options = options ? _.clone(options) : {};
  if (options.parse === void 0) options.parse = true;
  var success = options.success;
  options.success = function(collection, resp, options) {
    var method = options.update ? 'update' : 'reset';
    collection[method](resp, options);
    if (success) success(collection, resp, options);
  };
  return this.sync('read', this, options);
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T23:36:46.977

保罗的反应很好，但只是想指出以下几点：

当尝试通过覆盖 fetch 的成功函数从您的 ajax 调用中检索数据时，我必须对您的代码进行以下修改：

```
sync: function (method, model, options) {
    var $this = this;

    var success = options.success;
    options.success = function(resp) {
      if (success) success(resp);
      model.trigger('sync', model, resp, options);
    };
    var params = _.extend({
        type: 'GET',
        dataType: 'jsonp',
        url: $this.url,
        processData: false
    }, options);

    return $.ajax(params);
} 
```

注意行中的区别：

```
if (success) success(resp); 
```

为了正确地将成功函数传递给响应，这是必需的，否则它会被模型覆盖。现在，在fetch的success函数中，可以输出数据了：

```
var $this = this;
this.collection.fetch({
    success: function(collection, response, options){
        $this.render(response);
    }
}); 
```

这会将 ajax 数据（响应）传递给渲染函数以执行您喜欢的操作。当然，您也可以事先以任何方式操作数据。

理想情况下，我希望能够将数据传递到 collection.models 对象中，就像 Backbone 默认情况下所做的那样。我相信这与数据的解析方式有关，但我还没有弄清楚。如果有人有解决方案，我很想听听 :)

**更新：**

我已经设法重写了解析函数并以这样一种方式处理来自我的 ajax 调用的 JSON 数据，以便忠实于 Backbone 构造其集合对象的方式。这是代码：

```
parse: function(resp){
    var _resp = {};
    _resp.results = [];
    _.each(resp, function(model) {
        _resp.results.push(model);
    });
    return _resp.results;
} 
```

*这将创建一个新对象，其中包含一个名为results*的模型数组，然后将其返回给您的 fetch 函数，允许您直接访问每个模型的属性。

# c++ - glut 和 glew 的突然问题包括和类型说明符

> ID：15166307
> 
> 赞同：1
> 
> 时间：2013-03-01T20:28:23.193
> 
> 标签：c++, opengl, glut, glew

我目前正在为游戏开发课程做一个最终的编程项目，并选择在程序的 3D 渲染端使用 C++ 和 OpenGL（尽管我对此几乎没有经验）。

到目前为止，我一直在使用它，完全没问题，没有出现严重错误，然后放了几天。但是当我返回时，我开始使用我使用的几个 GLfloat 变量得到各种“C4430 - 缺少类型说明符”错误。

这是我以前的定义，在我今天重新加载之前效果很好：

```
 #include <gl/glew.h>
    #include <gl/glut.h>

    ... Other variable and object definitions

    const GLfloat DEFAULT_X = -5.0f;  //C4430: missing type specifyer on all 3 lines and
    const Glfloat DEFAULT_Y = -4.0f;  //C2146: syntax error : missing ';' before identifier 'DEFAULT_Y' on this line only
    const GLfloat DEFAULT_Z = -20.0f;

    GLfloat viewX = DEFAULT_X; //This line is fine
    GLfloat viewY = DEFALUT_Y; //Resulting C2065: Undeclared identifyer
    GLfloat viewZ = DEFALUT_Z; //on both these lines 
```

为了解决这个问题，我开始改变#includes（也许是一种愚蠢的方法，但此时我很困惑）并发现添加Windows.h和gl/GL.h，正如一些人所建议的那样，除了问题之一。

```
 #include <Windows.h>
    #include <gl/GL.h>
    #include <gl/glew.h>
    #include <gl/glut.h> 
```

新问题是尝试在 gl/glew.h 之前使用 gl/GL.h 会引发错误“C1189：glew.h 之前包含 gl.h”，因为猜测，glew 包含 gl.h 本身。但是任何更改都会带回以前的类型指定器错误。

令我困惑的是，如果 glew 包含 GL.h，那么这些类型说明符是否也包含在内？我将继续在没有测试的情况下继续进行方法编码，但需要能够尽快测试我正在做的事情。任何人都可以提供帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:50:23.137

```
#include <Windows.h>
#include <gl/GL.h>
#include <gl/glut.h>
#include <gl/glew.h> 
```

这是包含这些标题的错误顺序。

GLEW（或您正在使用的任何 OpenGL 加载程序）*始终*排在第一位。您*永远不会*包含`gl.h`OpenGL 加载程序头文件；你只包括他们的（`glew.h`在这种情况下）。它位于 OpenGL 或 OpenGL 工具的所有其他标头之前。

接下来是 FreeGLUT 的标头。在那之后......你根本不应该包括在内`window.h`，除非你正在做一些特定于 Windows 的代码。如果你是，你把它包含在 FreeGLUT 的东西之后。

# java - 从文件中读取特定的行，每行代表 Java 中的不同数据类型和变量

> ID：15166311
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:28:27.980
> 
> 标签：java

我一直在网上研究如何解决这个问题以及什么类最适合用于文件解析等。

我已经在 java 中编程了一段时间，解析文件并写入文件一直是我最不明白的弱点之一。

具体来说，我有一个名为

```
jihoon.txt 
```

它的内容是这样的

```
username = ji
password = kim106
id = 0 
```

我想将 ji 存储到一个字符串变量中，将 kim106 存储到一个字符串变量中，将 id 存储到一个 int 变量中，同时忽略“username =”等。有人可以帮忙提前谢谢:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:34:56.290

一个好方法是将文件用作`Property`. 这样你就可以按照你想要的方式加载所有内容。

你会这样加载你的文件：

```
properties.load(new FileInputStream("path/jihoon.txt")); 
```

然后您可以这样访问您的数据：

```
String value = properties.getProperty(key); 
```

知道你的价值观的关键是什么，你可以有这样的东西（根据你在问题中的例子）：

```
int id = Integer.parseInt(properties.getProperty("id")).intValue();
String username = properties.getProperty("username");
String password = properties.getProperty("password"); 
```

那么这样你就不必担心文件的顺序了。

### 也可以看看

*   [如何使用 Java 属性文件？](https://stackoverflow.com/q/1318347/686036)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:34:56.713

为什么是变量？HashMap 怎么样？

```
HashMap<String, String> keyValueMap = new HashMap<>(); 
```

然后在`=`那里分开后喂食对。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T20:31:27.323

属性文件最适合这些类型的操作

[例子](http://www.mkyong.com/java/java-properties-file-examples/)

# export - 如何通过层功能 X++ 模拟 AOT 导出？

> ID：15166313
> 
> 赞同：2
> 
> 时间：2013-03-01T20:28:32.590
> 
> 标签：export, axapta, x++, dynamics-ax-2012, aot

我正在尝试以编程方式在 X++ 中复制以下步骤

1.  在 AOT 树中右键单击根节点，然后单击“导出”
2.  提供文件名
3.  单击“应用程序对象层”复选框
4.  指定“cus”作为应用程序对象层
5.  将 XPO 导出到文件

我已经能够导出整个 AOT 树，但我无法找到将其缩小到 cus 层的方法。这是我当前的代码示例...

```
TreeNode treeNode;
FileIoPermission perm;

#define.ExportFile(@"c:\XPO\AOTCusExport.xpo")
#define.ExportMode("w")
;

perm = new FileIoPermission(#ExportFile, #ExportMode);
if (perm == null)
{
return;
}

perm.assert();

treeNode = TreeNode::findNode(@"\");
if (treeNode != null)
{
    // BP deviation documented.
    treeNode.treeNodeExport(#ExportFile);
}

CodeAccessPermission::revertAssert(); 
```

我有一种感觉，解决方案在于“treeNodeExport”方法。有一个我没有使用的“int _flags”属性。我环顾四周，但不确定用什么值填充标志？有没有人尝试过这种过程重复？我走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:42:21.637

请看一下`AOTExport`宏。

然后[阅读](http://microsoft-dynamics-ax-erp.blogspot.dk/2012/01/exporting-aot-programmatically.html)：

```
#AOT
#AOTExport
TreeNode rootNode = infolog.rootNode();
;
rootNode.treeNodeExport(@'c:\fullaot.xpo', #expKeepIds | #expLables | #expLayer); 
```

我不确定如何指定图层，但很可能只是标志参数上的逻辑或。

如果有疑问，请查看`SysElementExport`表单和相关类。

**更新**：正如预期的那样，图层在位掩码中指定。

在`\Forms\SysExportDialog\Methods\getutilLayer`掩码中指定为：

```
return 1 << layer.selection(); 
```

因此，如果要导出 CUS 层，请执行以下操作：

```
rootNode.treeNodeExport(@'c:\fullaot.xpo', #export | #expLayer | (1 << (UtilEntryLevel::cus+1))); 
```

层有 15 位的空间，因为下一个标志是：

```
#define.expKeepIds(0x0100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:40:21.373

您有一个如何将标志传递给`SysTreeNode.toFile()`类方法中的方法的示例

```
#AOTExport
...
int flags;
...
flags = #expProjectOnly;
...

// This code runs on the client side only
//BP deviation documented
treenodeToExport.treeNodeExport(_filename, #export | #expKeepIds | #expLayer | flags);

... 
```

根据*宏*文档：

```
// System export flags
#define.noExport(0)                 // Do not export
#define.export(1)                   // Export
#define.expKeepIds(0x0100)          // Export with ID's
#define.expLables(0x0400)           // Export labels
#define.expProjectOnly(0x800)       // Export project only
#define.expLockOnExport(0x1000)     // Lock exported elements
#define.expDefaultValues(0x2000)    // Export default properties values
#define.expLayer(0x4000)            // Export current layer only 
```

你只能导出活动层......这很奇怪，因为表格让你从列表中选择一个层。当您进入表单代码时，会有点奇怪`SysExportDialog`，列表所在的位置并调用了导出类，并且您在任何地方都找不到图层的使用情况……所以，宏文档毕竟是正确的。

# android - 无法从 Android 中的位图生成纹理

> ID：15166317
> 
> 赞同：0
> 
> 时间：2013-03-01T20:28:54.380
> 
> 标签：android, bitmap

我目前正在开发一个 android 应用程序，直到现在我使用 eclipse android 模拟器来测试它。

今天我决定在我的手机（小米 mi2）上试一试，但是当我吃午饭时（通过 USB 调试）我遇到了 2 个问题：

1.  我有一张模拟器完美显示的背景图片，但它没有出现在我的手机上 - 显示的是黑色背景。

2.  也许这是上一个的问题，LogCat 显示一些错误：

`03-01 22:18:35.599: E/OpenGLRenderer(1109): Cannot generate texture from bitmap 03-01 22:18:35.629: E/SpannableStringBuilder(1109): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length`

活动代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="480dip"
android:layout_marginTop="10dip"
android:background="@drawable/bg">
<EditText
    android:id="@+id/eu_un"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPersonName"
    android:hint="@string/enter_user_name" >
</EditText>

<EditText
    android:id="@+id/eu_pw"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/eu_un"
    android:ems="10"
    android:hint="@string/enter_password"
    android:inputType="textPassword|textPersonName" />

<Button
    android:id="@+id/nu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="134dp"
    android:text="@string/signup" />

<Button
    android:id="@+id/eu_signin"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/eu_pw"
    android:layout_centerHorizontal="true"
    android:text="@string/login" />

<Button
    android:id="@+id/exit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/eu_signin"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="61dp"
    android:text="@string/exit" />

</RelativeLayout> 
```

Java代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    un = (EditText) findViewById(R.id.eu_un);
    pw = (EditText) findViewById(R.id.eu_pw);
    nu = (Button) findViewById(R.id.nu);
    eu = (Button) findViewById(R.id.eu_signin);
    exit = (Button) findViewById(R.id.exit);
    ma = this;

    nu.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            newUser();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:02:03.777

这是一个奇怪的错误。我做了一些搜索，发现一些类似的帖子似乎表明它与设备的键盘设置有关：

[Android - SPAN_EXCLUSIVE_EXCLUSIVE 跨度的长度不能为零](https://stackoverflow.com/questions/13670374/android-span-exclusive-exclusive-spans-cannot-have-a-zero-length)

[Nexus 7 错误“SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度”](https://stackoverflow.com/questions/13488695/nexus-7-error-span-exclusive-exclusive-spans-cannot-have-a-zero-length)

他们中的大多数人在问题中都有特定的电话。

[每当 editText 变空时，SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度错误](https://stackoverflow.com/questions/14698264/span-exclusive-exclusive-spans-cannot-have-a-zero-length-error-whenever-an-editt)

如果您搜索，还有更多

[http://www.google.com/search?client=safari&rls=en&q=SPAN_EXCLUSIVE_EXCLUSIVE+spans+cannot+have+a+zero+length&ie=UTF-8&oe=UTF-8](http://www.google.com/search?client=safari&rls=en&q=SPAN_EXCLUSIVE_EXCLUSIVE+spans+cannot+have+a+zero+length&ie=UTF-8&oe=UTF-8)

我知道这并不能提供你所希望的答案——但理想情况下它会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T21:45:40.593

我在 genymotion API 16+ 上的模拟设备上也遇到了这个错误。

我的问题的解决方案是用 png 图像替换 gif 图像。

感谢[http://www.pedrorainho.eu/eopenglrenderer2268-cannot-generate-texture-from-bitmap/](http://www.pedrorainho.eu/eopenglrenderer2268-cannot-generate-texture-from-bitmap/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-06T12:11:52.893

我在使用 Android L 版本的 nexus5 中遇到了同样的错误。就我而言，我评论了两行来修复它。( // opt.inPurgeable = true; // opt.inInputShareable = true; ) 希望对你有用。祝你好运！

下面是我的代码：

```
ImageView image = (ImageView) findViewById(R.id.imageView);
        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inPreferredConfig = Bitmap.Config.RGB_565;
//        opt.inPurgeable = true;
//        opt.inInputShareable = true;

        InputStream is = getResources().openRawResource(R.raw.error_nothing_app);
        Bitmap bitmap = BitmapFactory.decodeStream(is, null, opt);
        is.close();
        BitmapDrawable drawable = new BitmapDrawable(getResources(), bitmap);
        image.setImageDrawable(drawable);
```

# iphone - 如何使用 PageControl 和 UIScrollView 切换视图？

> ID：15166319
> 
> 赞同：0
> 
> 时间：2013-03-01T20:29:02.223
> 
> 标签：iphone, uiview, uiscrollview, xib, uipagecontrol

我是 Iphone 开发的新手（Xcode 中的第 3 天），我正在尝试实现 pageControl 和 scrollview，以便用户可以在各个页面之间滑动。我正在使用[本](http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/)教程，但我不知道如何从 nib 文件加载/切换视图，而不仅仅是更改视图的背景颜色。任何帮助是极大的赞赏。

我的代码

修改 PageControlExampleViewController.m 更名为 NewsClass2

```
// Creates the color list the first time this method is invoked. Returns one color object from the list.
+ (UIColor *)pageControlColorWithIndex:(NSUInteger)index {
if (__pageControlColorList == nil) {
    __pageControlColorList = [[NSArray alloc] initWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor magentaColor],
                              [UIColor blueColor], [UIColor orangeColor], [UIColor brownColor], [UIColor grayColor], nil];
}
// Mod the index by the list length to ensure access remains in bounds.
return [__pageControlColorList objectAtIndex:index % [__pageControlColorList count]];
}

//Changing views instead of colors, not working
+ (UIView *)pageControlViewWithIndex:(NSUInteger)index {
if (__pageControlViewrList == nil) {
    __pageControlViewrList = [[NSArray alloc] initWithObjects:[[UIView alloc] initWithNibName:@"PageView" bundle:nil], [[UIView alloc] initWithNibName:@"PageView" bundle:nil], [[UIView alloc] initWithNibName:@"PageView" bundle:nil],
                              [[UIView alloc] initWithNibName:@"PageView" bundle:nil], [[UIView alloc] initWithNibName:@"PageView" bundle:nil], [[UIView alloc] initWithNibName:@"PageView" bundle:nil], [[UIView alloc] initWithNibName:@"PageView" bundle:nil], nil];
}
// Mod the index by the list length to ensure access remains in bounds.
return [__pageControlViewList objectAtIndex:index % [__pageControlViewList count]];
}

// Set the label and background color when the view has finished loading.
- (void)viewDidLoad {
pageNumberLabel.text = [NSString stringWithFormat:@"Page %d", pageNumber + 1];
self.view.backgroundColor = [NewsClass2 pageControlColorWithIndex:pageNumber];
//Setting View Not Working
self.view = [NewsClass2 pageControlViewWithIndex:pageNumber];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:00:22.517

欢迎来到目标 C。

首先，您需要设置滚动视图的委托，例如

```
//in .h file write

@interface ViewController : UIViewController<UIScrollViewDelegate>

// in viewDidLoad

self.scrollView.delegate = self; 
```

然后写在 UIScrollView 的委托方法中写...

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
} 
```

然后为 pageControl 创建一个 valueChange 的 IBAction，例如.....

```
- (IBAction)changePage:(id)sender
{
    int page = self.pageControlHelp.currentPage;
    CGRect frame = self.scrollViewHelp.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    [self.scrollViewHelp scrollRectToVisible:frame animated:YES];
} 
```

而你已经做到了......

如果您对此有任何困惑，请随时询问......

# php - 如何在其他文件的网页标题中插入内容？

> ID：15166321
> 
> 赞同：0
> 
> 时间：2013-03-01T20:29:08.550
> 
> 标签：php

我对 phtml 文件中包含的标头有疑问。我有一个 MVC 项目，视图文件是这样构建的

```
<?php
  require_once'header.phtml';

  //SOME PHP COMMAND TO PRINT SOME STUFF

  reuire_once 'footer.phtml';
?> 
```

当我在 Google Chrome 中按 F12 时，页眉内容会出现在页面正文中，如下所示：

```
 <html>
<head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title></title>
           <style type="text/css"></style></head>
        <body>           
                    <title>UserList</title>
                    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
                    <link rel="stylesheet" type="text/css" href="../css/Mystyle.css">
                    <meta name="description" content="MVC MiniShop Project">
                    <meta name="keywords" content="MVC Online Store">
                    <meta name="author" content="Vasile Vetisan">
                    <meta charset="UTF-8">  
            <div class="menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
        <br style="clear:left">
    </div>USER LIST IS:<br> <table border="1"><tbody><tr><td>USER_ID</td><td>FIRST_NAME</td><td>LAST_NAME</td><td>USERNAME</td><td>EMAIL</td><td>PASSWORD</td></tr><tr><td>2</td><td>Test</td><td>Unu</td><td>test1</td><td>test1@gmail.com</td></td></tr></tbody></table>

</body></html> 
```

即使我像这样更改 ViewUser 页面的结构：

```
<html>
<header>
<?php
   require_once 'header.phtml'
?>
</header>
 <body>
     //SOME GENERATED STUFF WITH PHP
 </body>
</html> 
```

结果与以前的相同:(。所以作为我帖子的摘要，我需要一种方法来使用 php 或 phphtml 扩展从另一个页面的 phtml 页面的标题中插入内容。我已经尝试了很多东西，所以我需要一些新的想法或答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:46:51.537

我认为包含部件的非常好的、简单和有效的方法是使用 php，其中 part.html 是包含您的代码的文件。

```
 <?php
 include "part.html";
 ?> 
```

例子：

**部分.html**

```
<p> Hello world! </p> 
```

**索引.php**

```
<body>
<?php
include "part.html";
?>
</body> 
```

**输出应该是**

```
<body>
<p> Hello World! </p>
</body> 
```

# wordpress - wordpress多次上传图片http错误

> ID：15166323
> 
> 赞同：0
> 
> 时间：2013-03-01T20:29:12.927
> 
> 标签：wordpress

在我们将它移到生产服务器后，我去了 Wordpress 3.5，首先上传图片导致它上传了 2 次，下一次上传了 4 次，最后一次尝试上传了一次上传的图片 64 次......不知道在哪里检查和要寻找什么，有什么想法吗？

如果尝试从文章上传 - 插入图片，那么它甚至会显示一个红色的 http 错误，但仍然会多次上传图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:08:20.453

刚刚发现问题，我们的虚拟主机提供商在可能的选项范围内非常灵活，出于某种原因，我发现我们的测试服务器预设了 5.3 php，而新的生产网站默认为 5.2，在管理面板中将其更改为 5.3虚拟主机，神奇地一切都开始正常工作。

Sooo**问题解决**了，虽然对我来说仍然很有趣，**在 5.2 - 5.3 之间纯粹更改 php**可能会改变 wordpress 可用性方面的重大问题

# vba - 插入行并填充/复制值

> ID：15166325
> 
> 赞同：0
> 
> 时间：2013-03-01T20:29:20.530
> 
> 标签：vba, excel

所以......我已经搜索了很多关于如何做到这一点，虽然我可以让它的一部分工作，我似乎无法弄清楚如何让所有的部分工作

我的初始数据如下所示，并告诉我标题列中的每个值需要多少行（例如，Value1 将有 3 行，Value2 将有一行，等等）

```
Title   Audit Period    Target Count
Value1    2013-Q1                  3
Value2    2013-Q1                  1
Value3    2013-Q2                  3
Value4    2013-Q3                  4
Value5    2013-Q4                  2 
```

我想通过 VBA 获得一种单击按钮的方法，并按如下方式格式化/填充上述信息：

```
Title   Audit Period
Value1  2013-Q1
Value1  2013-Q1
Value1  2013-Q1
Value2  2013-Q1
Value3  2013-Q2
Value3  2013-Q2
Value3  2013-Q2
Value4  2013-Q3
Value4  2013-Q3
Value4  2013-Q3
Value4  2013-Q3
Value5  2013-Q4
Value5  2013-Q4 
```

我不在乎转换后的数据放在哪里......代码可以覆盖起始数据或将结果放在单独的选项卡中......或其他任何东西。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:36:01.813

这是执行此操作的 VBA 代码 - 您只需要修改工作表名称和起始范围：

```
Sub MultiplyRows()
    Dim rngSource As Range, rngTarget As Range

    Set rngSource = Sheets("Sheet1").Range("A2")
    Set rngTarget = Sheets("Sheet2").Range("A2")

    While rngSource <> ""
        rngSource.Resize(, 2).Copy rngTarget.Resize(rngSource.Offset(, 2), 2)
        Set rngTarget = rngTarget.Offset(rngSource.Offset(, 2))
        Set rngSource = rngSource.Offset(1)
    Wend
End Sub 
```

或者，您可以仅使用公式执行此操作：

![在此处输入图像描述](../Images/fe2c22d9514af8653ae9326e577d9e67.png)

这个想法是您使用一些帮助列来计算和检索数据。详细地说，我有 3 个辅助列，其逻辑如下：

*   “源行”，E 列：这是该目标行引用的源数据中的实际行。“列逻辑”是它与上面的行中的数字相同 - 除非在计数器上方的行中等于最大计数。因此，E5 中的公式为：`=IF(F4=G4,E4+1,E4)`。您还需要“初始化”列，即在我使用的 E4 中：`=ROW(A3)+1`
*   最大计数：当前源行所需的行数。F4：`=INDEX(C:C;E4)`
*   计数：这是计数器，当前源行已被填充的频率。逻辑是将上面的值简单地增加一 - 除非此列中的源行与最后一行不同。G4：`=IF(E4<>E3,1,G3+1)`

现在您只需要使用存储在 E 列中的数字作为 INDEX 函数的参数，即将此公式从 H4 向下复制到 I: 列`=INDEX(A:A,E4)`。

现在您只需将 5 列的公式复制到所需的行数。（请记住从第 5 行开始向下复制 E 列，但在第 4 行复制 F:I 列。

# php - 通知用户 akismet 已将他的评论置于审核之下

> ID：15166327
> 
> 赞同：1
> 
> 时间：2013-03-01T20:29:29.807
> 
> 标签：php, wordpress, spam-prevention, akismet

如果 akismet 将他提交的评论设置为“等待批准”，是否可以通知用户？我在 Wordpress 中通过 Ajax 提交评论，如果他的评论没有立即发布，我只想显示一条短信。

我不知道是否可以访问此信息。你们有没有人试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T22:54:13.710

我同意杰森。GASP 的存在是因为我的博客每天收到超过 1000 条评论，Akismet 没有阻止。Akismet 做得非常好的是将我的常规评论者评论与其他 1000 条评论一起放入垃圾邮件中。

在我安装 GASP（由同时创建 CommentLuv 的 Andy Bailey 创建）的那一天，它阻止了除 40 条评论之外的所有评论——这意味着 960 条是由机器人留下的，而不是被 Akismet 阻止的。

我拒绝在任何不使用 GASP 的网站上审核评论，并且在我接触的每个博客中删除 Akismet。一些博主确实运行两者都没有问题，但是他们必须从垃圾邮件中拯救他们的真实评论，所以我看不出有什么好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:34:58.747

我会**禁用 Akismet**；这太可怕了，不鼓励评论。在您的 WP-Admin 中，设置>>讨论...选中“在评论出现之前”>>“在评论出现之前管理员必须始终批准评论。” 然后用户将知道他/她的评论正在等待审核。

但是几乎每个用户都讨厌发现他们必须等待版主审核他们的评论才能发布。

**为什么禁用 Akismet？**

1.  Akismet 将大量从不发送垃圾邮件的博主和定期评论员标记为垃圾邮件发送者。
2.  任何被标记为垃圾邮件发送者的评论员都会被您的博客粗鲁对待。他们永远不会看到您的评论正在被审核的消息，因此他们无法知道他们的评论发生了什么。
3.  如果您在 Akismet 配置中选中了一个特定的框，那么在超过 30 天的帖子中被错误标记为评论员的真实人留下的评论会立即被删除，他们会看到一个空白的白页。了解如何关闭 Akismet 评论删除。
4.  阅读与 Akismet 问题相关的许多其他帖子和数百条评论。

**（推荐）**我会安装[GrowMap Anti-Spam](http://growmap.com/growmap-anti-spambot-plugin/) (GASP) 并使用它。它是免费的并且有效。它所做的只是要求用户单击一个复选框，但它非常有效。看看评论就知道了。您可以在那里阅读文档，并[从 .org 网站下载](http://wordpress.org/extend/plugins/growmap-anti-spambot-plugin/)。

**另一种方法是考虑使用**[SiteBrains WP 插件](http://wordpress.org/extend/plugins/sitebrains-1/)启用实时评论，以阻止垃圾邮件、亵渎、垃圾文本、机器人、不相关的嵌入式链接/垃圾邮件链接等。只需下载并按照说明安装。

# c - 计算哈希表中的字符串数

> ID：15166329
> 
> 赞同：1
> 
> 时间：2013-03-01T20:29:33.613
> 
> 标签：c, memory-management, hash, hashtable

所以，我试图计算我的哈希表中存在的字符串数。出于某种原因，这个函数总是返回 0。我尝试用稍微不同的方式重写它几次，以找到逻辑中的错误，但是，据我所知，这个函数应该输出条目数桌子。我真的很感激一些帮助，因为这变得非常令人沮丧！谢谢！

```
/* htbl_n_entries : htbl* -> unsigned int */
/* return the number of entries in all buckets */
unsigned int htbl_n_entries(htbl *t){
    int i;
    int nbucks = t->n_buckets;
    sll**bucks= t->buckets;
    unsigned int sum = 0;
    for (i = 0; i < nbucks; ++i)
    {
        while(bucks[i] != NULL){
        sum++;
        bucks[i] = bucks[i]->next;
    }
}
    return sum;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:42:18.403

`bucks[i].`每次尝试时，代码中的 while 将设置为 NULL ：

```
sll**bucks= t->buckets;
unsigned int sum = 0;
for (i = 0; i < nbucks; ++i)
{
        sll*bucks_= bucks[i];
    while(bucks_ != NULL){
    sum++;
    bucks_ = bucks_->next;
}
} 
```

这只是一个错误，但不要解释为什么返回 0。它第一次正确计数，但任何其他时间都会为 0。我的猜测是你在其他函数中有类似的错误，此时你的表已经坏了。

# c++ - LNK 错误 1561 与 BOOST

> ID：15166336
> 
> 赞同：0
> 
> 时间：2013-03-01T20:29:55.910
> 
> 标签：c++, boost, visual-studio-2012, linker-errors

我正在尝试创建一个 avl 树，然后使用 boost 检查我创建的内容是否有效。但是，在我所有的 boost 测试用例中，我都没有 main（我认为这是导致问题的问题）。这是我的 avl .hpp 我对 c++ 有点陌生。

```
template <typename T>
class avlTreeNode
{
public:
    // data in the node
    T nodeValue;
    // pointers to the left and right children of the node
    avlTreeNode<T> *left;
    avlTreeNode<T> *right;
    int balanceFactor;
    // CONSTRUCTOR
    avlTreeNode (const T& item, avlTreeNode<T> *lptr = NULL,
        avlTreeNode<T> *rptr = NULL, int bal = 0):
    nodeValue(item), left(lptr), right(rptr), balanceFactor(bal)
    {
    }
};

const int leftheavy = -1;
const int balanced = 0;
const int rightheavy = 1;

template <typename T>
class avlTree
{
public:
    // CONSTRUCTORS, DESTRUCTOR, ASSIGNMENT
    // constructor. initialize root to NULL and size to 0
    avlTree();
    ~avlTree();

    typedef T* iterator;
    typedef T const* const_iterator;
    // constructor. insert n elements from range of T* pointers4
    avlTree(T *first, T *last);
    // search for item. if found, return an iterator pointing
    // at it in the tree; otherwise, return end()
    iterator find(const T& item);
    // search for item. if found, return an iterator pointing
    // at it in the tree; otherwise, return end()
    const_iterator find(const T& item) const;
    // indicate whether the tree is empty
    int empty() const;
    // return the number of data items in the tree
    int size() const;
    // give a vertical display of the tree .
    void displayTree(int maxCharacters) const;
    // insert item into the tree
    //std::pair<iterator, bool> insert(const T& item);
    // insert a new node using the basic List operation and format
    //std::pair<iterator, bool> insert(const T& item);
    // delete all the nodes in the tree
    void clear();
    // constant versions
    iterator begin();
    iterator end();
    const_iterator begin() const;
    const_iterator end() const;

///////////////////////////////////////////////////////////
//when I created this it started giving me the lnk 1561 error 
    std::pair<iterator,bool> insert(const T& item)
    {
        avlTree<T>::iterator iter;
        // quietly return if item is already in the tree
        if ((iter = find(item)) != end() )
            return std::pair<iterator,bool>(iter,false);
        // declare AVL tree node pointers.
        avlTreeNode<T> *treeNode = root,*newNode;
        // flag used by AVLInsert to rebalance nodes
        bool reviseBalanceFactor = false;
        // get a new AVL tree node with empty pointer fields
        newNode = getavlTreeNode(item,NULL,NULL);
        // call recursive routine to actually insert the element
        avlInsert(treeNode, newNode, reviseBalanceFactor);
        // assign new values to data members root, size and current
        root = treeNode;
        treeSize++;
        return std::pair<iterator, bool> (iterator(newNode), true);
    }

private:
    // pointer to tree root
    avlTreeNode<T> *root;
    // number of elements in the tree
    int treeSize;
    // allocate a new tree node and return a pointer to it
    avlTreeNode<T> *getavlTreeNode(const T& item,
        avlTreeNode<T> *lptr,avlTreeNode<T> *rptr);
    // used by copy constructor and assignment operator
    avlTreeNode<T> *copyTree(avlTreeNode<T> *t);
    // delete the storage occupied by a tree node
    void freeavlTreeNode(avlTreeNode<T> *p);
    // used by destructor, assignment operator and clear()
    void deleteTree(avlTreeNode<T> *t);
    // locate a node item and its parent in tree. used by find()
    avlTreeNode<T> *findNode(const T& item, 
        avlTreeNode<T>* & parent) const;
    // member functions to insert and erase a node
    void singleRotateLeft (avlTreeNode<T>* &p);
    void singleRotateRight (avlTreeNode<T>* &p);
    void doubleRotateLeft (avlTreeNode<T>* &p);
    void doubleRotateRight (avlTreeNode<T>* &p);
    void updateLeftTree (avlTreeNode<T>* &tree,
        bool &reviseBalanceFactor);
    void updateRightTree (avlTreeNode<T>* &tree,
        bool &reviseBalanceFactor);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:04:33.300

在您的 cpp 文件顶部，定义`BOOST_TEST_MAIN`. 用于单元测试库自动生成main函数。

例如：

```
#define BOOST_TEST_MAIN
#include <boost/test/unit_test.hpp>
#include "avl.hpp"

BOOST_AUTO_TEST_CASE( test )
{
    // ...
} 
```

# asp.net-mvc - 如何重定向子文件夹中的所有文件访问请求？

> ID：15166339
> 
> 赞同：0
> 
> 时间：2013-03-01T20:30:07.843
> 
> 标签：asp.net-mvc, routing

目前我有这个

```
routes.MapRoute(
    name: "TestRedirect",
    url: "Test/{*pathInfo}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

我希望所有在 Test 下的访问请求都被重定向到 ~/Home/Index。但不幸的是，这不适用于文件访问，例如 /Test/index.html。不过，只有 aspx 文件（如 /Test/index.aspx）被正确重定向。

有人可以帮我修复我的路由吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:06:12.623

这样做的原因是因为静态文件直接由 IIS 处理，而不是传递给 ASP.NET 进行处理。该请求永远不会到达您的应用程序，因为 IIS 认为它是一个静态文件。如果您使用集成管道模式，只需注册以下处理程序以确保所有请求`/Test`都通过托管管道和您的路由规则：

```
<system.webServer>
    <handlers>
        <add 
            name="TestFolderHandler" 
            path="Test/*" 
            verb="GET" 
            type="System.Web.Handlers.TransferRequestHandler" 
            preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T02:03:24.643

只是添加答案以供参考。

您的代码很好，您只需要添加

```
routes.RouteExistingFiles = true; 
```

# javascript - 添加时JQuery选项卡无序

> ID：15166340
> 
> 赞同：1
> 
> 时间：2013-03-01T20:30:14.350
> 
> 标签：javascript, jquery, jquery-ui-tabs

运行代码跟随并单击第一行选项卡的最后一个选项卡。

[http://jsfiddle.net/pKcJp/](http://jsfiddle.net/pKcJp/)

```
<html>
</html>
<button id="addspan">Add tabs</button>
<div id="wrap">
    <ul></ul>
</div>

<script>
$(function () {
$('#wrap').tabs();
$('#addspan').click(function () {
    $('#wrap').tabs("add", "#page" + 1, 1);

    $('#wrap').tabs("add", "#page" + 2, 2);
    $('#wrap').tabs("add", "#page" + 3, 3);
    $('#wrap').tabs("add", "#page" + 4, 4);
    $('#wrap').tabs("add", "#page" + 5, 5);
    $('#wrap').tabs("add", "#page" + 6, 6);
    $('#wrap').tabs("add", "#page" + 7, 7);
    $('#wrap').tabs("add", "#page" + 8, 8);
    $('#wrap').tabs("add", "#page" + 9, 9);
    $('#wrap').tabs("add", "#page" + 10, 10);
    $('#wrap').tabs("add", "#page" + 11, 11);
    $('#wrap').tabs("add", "#page" + 12, 12);
            $('#wrap').tabs("add", "#page" + 13, 13);
            $('#wrap').tabs("add", "#page" + 14, 14);
            $('#wrap').tabs("add", "#page" + 15, 15);
            $('#wrap').tabs("add", "#page" + 16, 16);
            $('#wrap').tabs("add", "#page" + 17, 17);
            $('#wrap').tabs("add", "#page" + 18, 18);
            $('#wrap').tabs("add", "#page" + 18, 18);
            $('#wrap').tabs("add", "#page" + 18, 18);
});
});
</script> 
```

看到有一个无序的标签。

如果 Jquery 版本更改为 1.7.2 并且 jquery-ui 更改为 1.8.18（在菜单中更改），则不会出现此问题

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:36:04.413

这是因为 jQuery UI CSS 将它自己的类添加到活动选项卡并插入底部边距规则。添加您自己的以覆盖它。

```
.ui-tabs .ui-tabs-nav li.ui-tabs-active {
    margin-bottom:0;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pKcJp/1/)**

# java - UniversalConnectionPoolManagerMBean 在应用程序“重新”启动后已经存在

> ID：15166341
> 
> 赞同：7
> 
> 时间：2013-03-01T20:30:18.150
> 
> 标签：java, webserver, weblogic, connection-pooling

当我将一个`application.war`包含 servlet 的服务器部署到我的 weblogic 服务器时，它运行良好。servlet 使用 的实例`UniversalConnectionPoolManagerMBean`并且启动时没有任何问题。

在管理控制台中，我使用“工作完成时停止”命令，并在我的`destroy()`方法中调用：

```
UniversalConnectionPoolManagerImpl.getUniversalConnectionPoolManager()
                .startConnectionPool(mConnectionPoolName); 
```

然后，当我在管理控制台中单击“开始服务请求”命令时，出现此异常：

```
 java.sql.SQLException: Unable to start the Universal Connection Pool: java.sql.SQLException: Unable to start the Universal Connection Pool: oracle.ucp.UniversalConnectionPoolException: MBean exception occurred while registering or unregistering the MBean
at com.exzac.dal.jdbc.Database.getConnection(Database.java:134)
at com.exzac.dal.jdbc.Database.executeQuery(Database.java:161)
at com.exzac.profilesystem.ProfileSystemConfiguration.retrieveConfigurationTable(ProfileSystemConfiguration.java:214)
... 49 more
Caused by: java.sql.SQLException: Unable to start the Universal Connection Pool:     java.sql.SQLException: Unable to start the Universal Connection Pool: oracle.ucp.UniversalConnectionPoolException: MBean exception occurred while registering or unregistering the MBean
at oracle.ucp.util.UCPErrorHandler.newSQLException(UCPErrorHandler.java:541)
at oracle.ucp.jdbc.PoolDataSourceImpl.throwSQLException(PoolDataSourceImpl.java:587)
at oracle.ucp.jdbc.PoolDataSourceImpl.startPool(PoolDataSourceImpl.java:276)
at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:646)
at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:613)
at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:607)
at com.exzac.dal.jdbc.Database.getConnection(Database.java:132)
... 51 more
 Caused by: java.sql.SQLException: Unable to start the Universal Connection Pool: oracle.ucp.UniversalConnectionPoolException: MBean exception occurred while registering or unregistering the MBean
at oracle.ucp.util.UCPErrorHandler.newSQLException(UCPErrorHandler.java:541)
at oracle.ucp.jdbc.PoolDataSourceImpl.throwSQLException(PoolDataSourceImpl.java:587)
at oracle.ucp.jdbc.PoolDataSourceImpl.startPool(PoolDataSourceImpl.java:247)
... 55 more
 Caused by: oracle.ucp.UniversalConnectionPoolException: MBean exception occurred while registering or unregistering the MBean
at oracle.ucp.util.UCPErrorHandler.newUniversalConnectionPoolException(UCPErrorHandler.java:421)
at oracle.ucp.util.UCPErrorHandler.newUniversalConnectionPoolException(UCPErrorHandler.java:389)
at oracle.ucp.admin.UniversalConnectionPoolManagerMBeanImpl.getUniversalConnectionPoolManagerMBean(UniversalConnectionPoolManagerMBeanImpl.java:149)
at oracle.ucp.jdbc.PoolDataSourceImpl.startPool(PoolDataSourceImpl.java:242)
... 55 more
 Caused by: java.security.PrivilegedActionException: javax.management.InstanceAlreadyExistsException: oracle.ucp.admin:name=UniversalConnectionPoolManagerMBean
at java.security.AccessController.doPrivileged(Native Method)
at oracle.ucp.admin.UniversalConnectionPoolManagerMBeanImpl.getUniversalConnectionPoolManagerMBean(UniversalConnectionPoolManagerMBeanImpl.java:136)
... 56 more
 Caused by: javax.management.InstanceAlreadyExistsException: oracle.ucp.admin:name=UniversalConnectionPoolManagerMBean
at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:453)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1484)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:963)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312)
at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482)
at weblogic.management.jmx.mbeanserver.WLSMBeanServerInterceptorBase$27.run(WLSMBeanServerInterceptorBase.java:714)
at java.security.AccessController.doPrivileged(Native Method)
at weblogic.management.jmx.mbeanserver.WLSMBeanServerInterceptorBase.registerMBean(WLSMBeanServerInterceptorBase.java:709)
at weblogic.management.mbeanservers.internal.JMXContextInterceptor.registerMBean(JMXContextInterceptor.java:448)
at weblogic.management.jmx.mbeanserver.WLSMBeanServerInterceptorBase$27.run(WLSMBeanServerInterceptorBase.java:712)
at java.security.AccessController.doPrivileged(Native Method)
at weblogic.management.jmx.mbeanserver.WLSMBeanServerInterceptorBase.registerMBean(WLSMBeanServerInterceptorBase.java:709)
at weblogic.management.jmx.mbeanserver.WLSMBeanServer.registerMBean(WLSMBeanServer.java:462)
at oracle.ucp.admin.UniversalConnectionPoolManagerMBeanImpl$2.run(UniversalConnectionPoolManagerMBeanImpl.java:142)
... 58 more 
```

从那时起，我遇到了这个异常，即使我停止服务器并重新启动并尝试部署。只有清理所有已发布的资源似乎才能清除异常。我知道在destroy方法中没有正确清理发布的资源，我认为资源是`UniversalConnectionPoolManagerMBean`实例，但我认为它会被方法清理`destroyConnectionPool`： http: [//docs.oracle.com/cd/ B28359_01/java.111/e11990/oracle/ucp/admin/UniversalConnectionPoolManagerMBean.html#destroyConnectionPool_java_lang_String_](http://docs.oracle.com/cd/B28359_01/java.111/e11990/oracle/ucp/admin/UniversalConnectionPoolManagerMBean.html#destroyConnectionPool_java_lang_String_)

如何避免遇到此异常？

正如一个有趣（但不安全）的解决方法：由于某种原因，当我将其插入初始化时：

```
 try {
     UniversalConnectionPoolManagerImpl.getUniversalConnectionPoolManager().destroyConnectionPool(mConnectionPoolName);
     } catch (final Exception e1) {
     LOGGER.error(e1);

     } 
```

抛出异常并捕获它说找不到`connectionPool`具有此名称的要销毁的，但是原始问题消失了。`javax.management.InstanceAlreadyExistsException: oracle.ucp.admin:name=UniversalConnectionPoolManagerMBean`不被抛出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T08:46:55.000

此错误似乎已在版本 11.2.0.4 和 12.1.0.2 中修复。我找不到任何关于它的文档，但对我来说，上述版本的错误消失了。

JDBC/UCP 下载页面： [http ://www.oracle.com/technetwork/database/features/jdbc/index-091264.html](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T20:27:25.103

这是来自 Oracle 的 11.2.0.4 UCP.jar README.txt。

## 11.2.0.4 中的修复

16805157 UniversalConnectionPoolManagerMBean 的名称在每个类加载器中都是唯一的，因此即使在同一个 JVM 中，每个 UCP 实例也是唯一的

这修复了原始问题中描述的 javax.management.InstanceAlreadyExistsException 。创建的每个连接池都有一个唯一的名称，并且不会导致 InstanceAlreadyExistsException。但是，由于您正在重新启动，您应该考虑弄清楚如何干净地关闭连接池 MBean，这样您就不会遇到这个问题。

# backbone.js - 如何使用 JSDoc3 记录 AMD + Backbone 项目

> ID：15166343
> 
> 赞同：7
> 
> 时间：2013-03-01T20:30:42.720
> 
> 标签：backbone.js, requirejs, amd, jsdoc

我有一个基于[Backbone 样板](http://backboneboilerplate.com/)的项目，我想用最近[的 jdoc-toolkit记录它](http://code.google.com/p/jsdoc-toolkit/)

虽然除了空的 _global 类我不能让它生成任何东西

代码示例：

```
/**
 * This is a root model for DLClass
 * @module models/DLClass
 */
define([
    'underscore',
    'backbone'
], /** @lends DLClass */ function (_, Backbone) {        
    /**
     * This is a root model for DLClass
     * @class DLClass
     * @constructor
     * @return Session Object
     */
    var DLModel = Backbone.Model.extend({
        /** @lends DLClass.prototype */

    /**
     * Generic tap event
     * @param touchEvent
     */
    onTap: function (touchEvent) {

    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T18:28:43.623

尝试添加`@namespace`让 JSDoc 知道查看模块的内容。并使用 . 定义您的模块及其功能`@name`。

```
/** 
 * This is a root model for DLClass
 * @module models/DLClass
 * @namespace
 */
define([
    'underscore',
    'backbone'
], /** @lends DLClass */ function (_, Backbone) {        
    /**
     * This is a root model for DLClass
     * @class DLClass
     * @module models/DLClass
     * @name DLClass
     * @constructor
     * @return Session Object
     */
    var DLModel = Backbone.Model.extend({
        /** @lends DLClass.prototype */

        /**
         * Generic tap event
         * @name DLClass.onTap
         * @function
         * @param touchEvent
         */
        onTap: function (touchEvent) {

        }, 
```

# jquery - 如果在下拉列表中选择了特定值，jQuery 不显示字段

> ID：15166346
> 
> 赞同：0
> 
> 时间：2013-03-01T20:30:47.643
> 
> 标签：jquery, cakephp, hidden-field

如果选择了第一个下拉列表中的特定值，我正在使用 cakePHP 并尝试学习如何使用 jQuery 来显示输入字段。我的目标是显示两个隐藏字段：cpu 和 ram，如果在 type_id 下拉列表中选择了第二个选项，其值为 2。我还确保包含在页面头部。但是当我选择选项 2 或任何其他选项时，什么都没有发生，并且这些字段保持隐藏状态。谁能看到问题可能是什么？

```
<div class="products form">
 <script >
    $('#ProductTypeId').change(function(){
      if($(this).value == '2'){ // or this.value == '2'
        $('#ProductCpu').show();
        $('#ProductRam').show();
      }
    });
 </script>
 <?php echo $this->Form->create('Product');?>
    <fieldset>
        <legend><?php echo __('Add Device'); ?></legend>
    <?php
        echo $this->Form->input('type_id');
        echo $this->Form->input('category_id', array('label' => 'Vendor'));
        echo $this->Form->input('subcategory_id', array('label' => 'Model'));
        echo $this->Form->input('location', array('label' => 'Location'));
        //echo $this->Form->input('sku', array('label' => 'Asset Tag'));
        echo $this->Form->input('mac', array('label' => 'MAC/AssetTag'));
        echo $this->Form->input('description', array('label' => 'Notes'));
        //echo $this->Form->input('name', array( 'value' => data['type_id']  , 'type' => 'hidden'));
        echo $this->Form->input('cpu', array( 'type' => 'hidden'));
        echo $this->Form->input('ram', array( 'type' => 'hidden'));
        // echo $this->Form->input('Tag');
    ?>
    </fieldset>
 <?php echo $this->Form->submit(__('Submit'));?>
 <?php echo $this->Html->link(__('Cancel'), array('action' => 'index'));?>
 <?php echo $this->Form->end();?>
</div> 
```

呈现的 HTML

```
 <div class="products form">
         <script>
            $('#ProductTypeId').change(function(){
              if($(this).val() == '2'){ // or this.value == '2'
                $('#ProductCpu').show();
                $('#ProductRam').show();
              }
            });
         </script>
        <form accept-charset="utf-8" method="post" id="ProductAddForm" action="/products/add"><div style="display:none;"><input type="hidden" value="POST" name="_method"></div>    <fieldset>
                <legend>Add Device</legend>
            <div class="input select"><label for="ProductTypeId">Type</label><select id="ProductTypeId" name="data[Product][type_id]" style="min-width: 70px;">
        <option value="5">AP</option>
        <option value="4">Gateway</option>
        <option value="3">Modem</option>
        <option value="2">Laptop</option>
        <option value="1">Router</option>
        </select></div><div class="input select"><label for="ProductCategoryId">Vendor</label><select id="ProductCategoryId" name="data[Product][category_id]" style="min-width: 70px;">
        <option value="11">Apple</option>
        <option value="1">Arris</option>
        <option value="13">BelAir</option>
        <option value="3">Cisco</option>
        </select></div><div class="input select"><label for="ProductSubcategoryId">Model</label><select id="ProductSubcategoryId" name="data[Product][subcategory_id]" style="min-width: 70px;">
        <option value="30">BELAIR20E-11</option>
        <option value="20">CG3000D</option>
        <option value="28">CG3000DCR</option>
        <option value="1">CM820A</option>
        </select></div>
    <div class="input text"><label for="ProductLocation">Location</label><input type="text" id="ProductLocation" maxlength="100" name="data[Product][location]"></div>
    <div class="input text"><label for="ProductMac">MAC/AssetTag</label><input type="text" id="ProductMac" maxlength="100" name="data[Product][mac]"></div>
    <div class="input textarea"><label for="ProductDescription">Notes</label><textarea id="ProductDescription" rows="6" cols="30" name="data[Product][description]"></textarea></div>
<input type="hidden" id="ProductCpu" name="data[Product][cpu]">
<input type="hidden" id="ProductRam" name="data[Product][ram]"> </fieldset>
<div class="submit"><input type="submit" value="Submit"></div><a href="/products">Cancel</a></form></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:47:42.403

您必须使用 jQuery 选择选定的选项

```
$('#ProductTypeId').change(function () {
    var selectedItem = $(this).children('option:selected');
    if (selectedItem.val() == '2') { // or $(this).attr('value')
        $('#ProductCpu').show();
        $('#ProductRam').show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:34:50.223

使用 jQuery，您希望 $(this).val() 检索输入的值。

查看这个相关的帖子[jquery function val() is not equivalent to "$(this).value="?](https://stackoverflow.com/questions/4524702/jquery-function-val-is-not-equivalent-to-this-value)

# asp.net-mvc - 在 mvc 中使用敲除的可搜索网格

> ID：15166347
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:30:49.087
> 
> 标签：asp.net-mvc, mvvm, knockout.js

我需要紧急解决我的问题，我是 mvc 新手，请为我的问题提供示例代码。任何帮助将不胜感激。

假设我的视图模型中有一个可观察的数组，即

```
var viewmodel = {
  vendorproviders : ko.observablearray([])
} 
```

其中 vendorproviders 列表由多个属性组成，例如 id、name、country、address 等

我想在我的网格中填充该数组，其中每一行都有一个选择按钮，当单击该按钮时，它应该通过提交或通过 ajax 调用将 id 发布到我的控制器操作。

此外，如果有一个单独的文本框，网格应该是可搜索的，基于文本框的值，网格应该显示匹配的提供者，否则显示所有提供者。

当用户搜索特定的提供者网格时，应该从可观察数组中填充，而不是一次又一次地在服务器上调用以填充可观察数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:36:47.707

我建议从这里开始。 [http://learn.knockoutjs.com/#/?tutorial=intro](http://learn.knockoutjs.com/#/?tutorial=intro) 您所说的是您引用的工具的所有基本功能。

# linux - 无法通过 Thumb/ARM 转换进入 GDB，未设置 ARM 断点

> ID：15166351
> 
> 赞同：2
> 
> 时间：2013-03-01T20:31:20.303
> 
> 标签：linux, debugging, android-ndk, gdb, arm

我在 Android 1.6 模拟器上调试一个没有符号的程序。在加载 SO 库期间出现崩溃（信号），我正在尝试追踪它。崩溃发生在库启动代码的某个地方，我知道的很多。在控制从加载程序转到 SO 之前，我知道 SO 加载程序代码中的安全位置。我可以在那里设置一个断点，然后一直到 BLX 进入库。加载程序的代码是 Thumb。库启动代码是 ARM。

由于没有符号，我用它`set arm force-mode xxx`来让 GDB 知道。在启动导致加载程序停止的序列之前，我将模式设置为 Thumb。

但问题是，当我来到`BLX`指令并尝试单步执行 ( `si`) 时，调试器不会在下一条指令处停止 - 它一直到信号。即使我`set arm force-mode arm`在执行`si`BLX 之前做了一个，这似乎也没关系。

在库启动代码中设置断点也无济于事。我不确定 GDB 究竟是如何设置断点的，但看起来当前执行代码的模式与预期的断点目标模式之间的不匹配是一个障碍。

编辑：我什至尝试对正在运行的代码进行猴子修补，以便在正确的位置有一个 BKPT 命令 - GDB 仍然没有中断。

EDIT2：猴子修补代码部分似乎不起作用。不过，我可以将数据部分的一部分用作暂存区。尽管如此，BKPT 不会导致 GDB 崩溃......

* * *

EDIT3：对三行代码片段使用临时数据区域，我可以切换出 Thumb 并在信号中返回 GDB。但是，现在我处于 ARM 模式，GDB 由于某种原因无法设置断点。

BLX 进入库命令如下所示：`blx r2`. r2 的值为 0x80601b60 - 这是库启动例程。

当我在 BLX 上停下来时，这就是我所做的。我在数据部分有一个暂存区。我将以下 ARM 命令放在那里：

```
mov r12, 0 ; the value of r12 will be soon ruined by the code anyway
ldr r12, [r12] ; Provoke a SIGSEGV to stop GDB in ARM mode
mov pc, r2 ; To resume back into the library 
```

然后我将r2的值强行设置为我的暂存区，将GDB模式设置为ARM并继续。划痕区的一个 SIGSEGV 自然被抛出。

我在这里，处于 ARM 模式（CPU 和 GDB 的强制模式）。我在 0x80601b60 - 库入口点设置了一个断点。我将 r2 的值改回 0x80601b60 以便第三条命令跳转到那里。我将 r12 的值更改为有效读取地址，以便在重试时不会重新抛出信号。我发出一个`signal 0`命令，在没有信号的情况下继续。

我期望控制会转到 0x80601b60 并且会遇到断点。它不是。为什么不？`mov`偶然分配给 pc 时的语义是否不同（如`ldr rx, [pc]`is）？

在 上设置断点`mov pc, r2`也不起作用。在信号模式停止时在 GDB 中设置断点是否有问题？但即使我在信号之前设置断点（在 Thumb 模式下），它也不起作用。

更奇怪的是，我遇到了控制权超出的情况，就`mov pc, r2`好像它根本没有执行一样。但是，一旦我修复了 r12，*就会执行上一条指令。*

有单步模拟`signal 0`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T21:04:26.690

这是由 GDB 中的错误引起的。我现在正在准备修复。请参阅 [https://code.google.com/p/android/issues/detail?id=56962](https://code.google.com/p/android/issues/detail?id=56962)

[已编辑；最初，我链接到了错误的 URL，如我在下面的回复中所解释的。现在上面的 URL 是正确的。]

您可以挑选我提交的 gerrit，也可以等待 Google 发布更新的 NDK。或者，如果您在 x86 上使用 Linux 或 Windows，我可能会共享一个二进制文件。

Gerrit 提交的是：[https ://android-review.googlesource.com/#/c/61322/](https://android-review.googlesource.com/#/c/61322/)

# ruby - RSpec should_receive 没有达到类中的方法

> ID：15166354
> 
> 赞同：0
> 
> 时间：2013-03-01T20:31:26.417
> 
> 标签：ruby, testing, rspec2, ruby-1.9.3

ruby/rspec 新手并尝试测试方法是否引发异常。我可能完全不正确地解决这个问题。

```
#require 'rspec'

describe "TestClass" do
  it "should raise exception when my method is called" do
    test = Test.new
    test.should_receive(:my_method).and_raise
  end
end

class Test
  def my_method
    raise
  end
end  

rspec test.rb
F

Failures:

  1) TestClass should raise exception when my method is called
     Failure/Error: test.should_receive(:my_method).and_raise
       (#<Test:0x007fc61c82f7c8>).my_method(any args)
           expected: 1 time
           received: 0 times
     # ./test.rb:6:in `block (2 levels) in <top (required)>'

Finished in 0.00061 seconds
1 example, 1 failure

Failed examples:

rspec ./test.rb:4 # TestClass should raise exception when my method is called 
```

为什么消息收到零次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:42:51.257

你的测试是错误的。为了测试是否引发了异常，您需要执行以下操作：

```
it "should raise exception when my method is called" do
  test = Test.new
  test.should_receive(:my_method)

  expect {
    test.my_method
  }.to raise_error      
end 
```

在这种情况下，您可能不需要添加`should_receive`. 通过调用`my_method`您确保`test`正在接收该方法。基本上，当您不需要嘲笑时，您就是在嘲笑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:34:24.637

您必须做一些事情来调用该方法。如果是回调[，这里](https://makandracards.com/makandra/725-test-activerecord-callbacks-with-rspec)是如何测试它们的示例。

# mysql - mysql_result 返回文件名作为结果

> ID：15166359
> 
> 赞同：1
> 
> 时间：2013-03-01T20:31:34.617
> 
> 标签：mysql, sql

我对网络编程有点陌生。我只研究了一年左右。

我的问题如下。出于某种原因，当我使用此查询（在 phpadmin wampserver 中）时，最后 4 个字段结果是字段名称。

```
SELECT  `latin_name` ,  
    `group` ,  
    `name` ,  
    `continent` , 
    `country` ,  
    `position` ,  
    `hight_min` ,  
    `hight_max` ,  
    `light_min` ,  
    `light_max` ,  
    `temp_min` ,  
    `temp_max` ,  
    `nk_min` ,  
    `nk_max` ,  
    `gh_min` ,  
    `gh_max` ,  
    `ph_min` ,  
    `ph_max` ,  
    `growth_rate` ,  
    'growth_min',  
    'growth_max', 
    'gfactor',  
    'period' 
FROM  `plants` 
WHERE continent LIKE  'As' 
    AND growth_rate LIKE  'slow' 
LIMIT 0 , 30 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:34:14.480

您似乎有多种报价类型。前几个字段 use ```，但最后 4 个字段 use ，`'`将它们转换为字符串文字。

尝试：

```
SELECT  `latin_name` ,  
`group` ,  
`name` ,  
`continent` , 
`country` ,  
`position` ,  
`hight_min` ,  
`hight_max` ,  
`light_min` ,  
`light_max` ,  
`temp_min` ,  
`temp_max` ,  
`nk_min` ,  
`nk_max` ,  
`gh_min` ,  
`gh_max` ,  
`ph_min` ,  
`ph_max` ,  
`growth_rate` ,  
`growth_min`,  
`growth_max`, 
`gfactor`,  
`period` 
FROM  `plants` 
WHERE continent LIKE  'As' 
AND growth_rate LIKE  'slow' 
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:35:09.617

对于最后 4 个字段，您使用撇号 ( `'`) 而不是反引号 ( )。```

# c# - GetSerializableMembers (FormatterServices) 两次返回相同的字段！为什么？

> ID：15166360
> 
> 赞同：8
> 
> 时间：2013-03-01T20:31:38.337
> 
> 标签：c#, serialization, reflection

[FormatterServices.GetSerializableMembers](http://msdn.microsoft.com/en-us/library/2bb1dc1s.aspx)为派生类型返回受保护和内部字段两次。一次作为 的实例，`SerializationFieldInfo`一次作为`RtFieldInfo`.

我觉得这很混乱！谁能帮我理解为什么微软决定以这种方式实现它？

我编写了一个示例程序来重现我的问题：

```
class Program
{
    [Serializable]
    public class BaseA
    {
        private int privateField;
    }

    [Serializable]
    public class DerivedA : BaseA { }

    [Serializable]
    public class BaseB
    {
        protected int protectedField;
    }

    [Serializable]
    public class DerivedB : BaseB { }

    static void Main(string[] args)
    {
        Program.PrintMemberInfo(typeof(DerivedA));
        Program.PrintMemberInfo(typeof(DerivedB));
        Console.ReadKey();
    }

    static void PrintMemberInfo(Type t)
    {
        Console.WriteLine(t.Name);

        foreach (var mbr in FormatterServices.GetSerializableMembers(t))
        {
            Console.WriteLine("  {0} ({1})", mbr.Name, mbr.MetadataToken);
        }

        Console.WriteLine();
    }
} 
```

我会预料到这一点，`privateField`并且`protectedField`每次都被报告一次。然而，这是运行程序时的实际输出：

```
衍生A
  BaseA+privateField (67108865)

衍生B
  受保护字段 (67108866)
  BaseB+protectedField (67108866)

```

如您所见`protectedField`，出现两次，名称不同但元数据标记相同，因此它确实是同一个字段。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T00:20:12.070

这似乎与 FormatterServices 没有太大关系，而是与反射如何工作以及 FormatterServices 如何使用它有关。对于使用`Type.GetFields`时的方法`BindingFlags.NonPublic`（请参阅：http: [//msdn.microsoft.com/en-us/library/6ztex2dc.aspx](http://msdn.microsoft.com/en-us/library/6ztex2dc.aspx)）：“仅返回基类上的受保护和内部字段；不返回基类上的私有字段。”

完全去除任何检查，并根据您的示例量身定制，FormatterServices 获取字段的方法基本上是：

```
 static IEnumerable<FieldInfo> GetSerializableFields(Type type, Func<Type, IEnumerable<FieldInfo>> andNext)
    {
        return 
            (type.IsInterface || type == typeof(object))
            ? new FieldInfo[0]
            : type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance)
                  .Where(f => (f.Attributes & FieldAttributes.NotSerialized) != FieldAttributes.NotSerialized)
                  .Concat(andNext(type));
    }

    static void PrintMemberInfo(Type t)
    {
        Console.WriteLine(t.Name);

        Func<Type, IEnumerable<FieldInfo>> andNext = null;
        andNext = tp => GetSerializableFields(tp.BaseType, andNext);
        var fields = GetSerializableFields(t, tp => new FieldInfo[0]).ToArray();
        var base_fields = GetSerializableFields(t.BaseType, andNext).ToArray();

        var counter = 0;
        foreach (var f in fields.Concat(base_fields))
        {
            Console.WriteLine(
                "{0} Reflected: {1} - Declaring: {2} - Field: {3} ({4})", 
                (counter++) + 1, f.ReflectedType.Name, f.DeclaringType.Name, f.Name, f.MetadataToken);
        }
        Console.WriteLine();
    }
} 
```

这会为您的示例类生成以下输出：

```
DerivedA
1 Reflected: BaseA - Declaring: BaseA - Field: privateField (67108865)

DerivedB
1 Reflected: DerivedB - Declaring: BaseB - Field: protectedField (67108866)
2 Reflected: BaseB - Declaring: BaseB - Field: protectedField (67108866) 
```

并且 FormatterServices 根本不会通过检查它是否多次包含来自相同声明类型的相同字段来过滤其结果。鉴于 FormatterServices 的实现方式（对类型的可序列化基类型执行检查），它们可能应该执行类似 Filter by ReflectedType == DeclaringType 的操作：

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:54:07.760

从几个角度测试后，我决定改变我的答案。

GetSerializableMembers() 方法有缺陷，重复项不是底层内存的正确投影。（这真的很令人惊讶..）

我建议使用： t.GetType().GetMembers(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

并检查成员列表的传入结果。

祝你好运。

# javascript - Javascript，根据页面 URL 采取行动

> ID：15166366
> 
> 赞同：0
> 
> 时间：2013-03-01T20:31:51.460
> 
> 标签：javascript, regex

前段时间我在这里得到了帮助，编写了一个正则表达式来比较当前页面的位置和那个正则表达式，如果它是特定的就采取行动。该代码的一个示例是：

```
var re1 = new RegExp('^http://([^\.]+)\.domain\.com/subpage(.*)$');

if(window.location.href.match(re1))
{
  // Do more
} 
```

在这种情况下，我可以编写一些仅在该子页面上执行的代码。到目前为止，它工作得很好。但是我遇到了一个问题，我需要正则表达式的进一步帮助。

想象一个这样的网站：[http ://websitenamepreview.testserver.designcompanyname.com/subpage](http://websitenamepreview.testserver.designcompanyname.com/subpage)

如何调整此代码以处理此类 URL？只要从这个测试服务器运行，唯一可能会改变的就是子页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:46:19.853

使用您的原始代码，您可以将其更改为`^http://([^\.]+\.)+domain\.com/subpage(.*)$`

当然，对于这个特定的测试数据，它不会匹配，因为您的测试 URL 中没有“domain.com”作为域的结尾。

如果您可以向我们提供更多信息，了解哪些部分很重要，哪些部分可能会在您匹配的数据中发生变化等。我们可能会使其变得不那么复杂。

# javascript - 随机报价生成器

> ID：15166367
> 
> 赞同：0
> 
> 时间：2013-03-01T20:31:54.063
> 
> 标签：javascript

我刚刚创建了一个随机报价生成器，作为一种练习形式。一切正常，但我有一个问题困扰着我：

```
 var quotes = [(insert a bunch of quotes here) ];

 var length = quotes.length;
 var rand = Math.round(Math.random()*(length - 1));

function showQuote(){document.write(quotes[rand]);}
showQuote(); 
```

为什么它只在 document.write 调用是函数的一部分而不是它自己时才打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:37:20.830

将标签`write()`放在里面：`body`

```
<html>
<body>
<script type="text/javascript">
  var quotes = ['s', 'e', 's', 'e' ];

  var length = quotes.length;
  var rand = Math.round(Math.random()*(length - 1));

  document.write(quotes[rand]);
</script>

</body></html> 
```

# javascript - [body onload]在一段时间后淡入一个div？

> ID：15166372
> 
> 赞同：0
> 
> 时间：2013-03-01T20:32:16.433
> 
> 标签：javascript, jquery

我一直在寻找如何在使用 jQuery 一段时间后淡化 div。

我试过了

```
$(test).fadeIn("slow").delay(2000) 
```

但我认为我在代码上遗漏了一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:33:31.287

尝试这个：

```
setTimeout(function(){$('#test').fadeIn('slow');}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:33:39.567

```
setTimeout(myFunc, 2000);
function myFunc(){
$(test).fadeIn('slow');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:33:40.790

你需要先延迟，然后尝试淡入

```
$(test).delay(2000).fadeIn("slow"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:33:52.857

扭转局面：

```
<div id="test" style="display:none">Hello!</div>

<script type="text/javascript">
$(function(){

   $("#test").delay(2000).fadeIn("slow")
});
</script> 
```

# android - 使用 Android 库项目设置 ProGuard

> ID：15166380
> 
> 赞同：34
> 
> 时间：2013-03-01T20:32:34.420
> 
> 标签：android, proguard

我正在尝试为我的 Android 项目设置 proguard。我的应用程序项目中的代码很少，但引用了一个包含绝大多数代码和任何其他外部 jar 的库项目。话虽如此，我不确定如何设置 proguard 以考虑到这一点。现在我的 proguard 配置文件只是来自[ProGuard 站点](http://proguard.sourceforge.net/manual/examples.html#androidapplication)的 Android 示例。我一直在四处寻找，但没有找到很多或任何关于在库项目中使用 proguard 的文档，只是 jars。我是proguard的新手，所以任何朝着正确方向的推动都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T21:07:36.127

**编辑**

正如@BornToCode 指出的那样，一个不同的答案（最初发布[在这里）更好地解释了](https://stackoverflow.com/questions/10982344/is-proguard-cfg-needed-for-library-projects#10992604)*Proguard*如何处理库项目。此外，这个引用的问题比我原来的回答中链接的问题更有趣，整体声誉也更高。*报价单：*

> 库项目本身不运行 ProGuard，因此它们不使用任何配置。
> 
> 应用程序项目混淆了整个代码库，包括任何引用的库，因此它们需要对应用程序代码和库代码进行适当的配置。

* * *

**旧答案** *（没有错，只是可能不是最好的方法）*

库项目更像是一种在 Eclipse 中将项目链接到其 jar 的便捷方式。构建项目时，编译器唯一可见的库项目组件是 jar 文件。

如果您想混淆该 jar，请查看此帖子：

[如何在 Eclipse 中使用 Proguard 混淆 Android 库（.jar 文件）](https://stackoverflow.com/questions/8088958/how-to-obfuscate-an-android-library-jar-file-using-proguard-in-eclipse)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-06-07T14:59:34.510

*在 library project 中为*库指定 proguard 设置（例如不应混淆哪些库文件）对我来说很有意义。我发现我还需要在我的应用程序中包含来自我的库模块的 proguard 配置。为此，我将以下内容添加到`defaultConfig`我图书馆的部分`build.gradle`

```
apply plugin: 'com.android.library'

android {
    defaultConfig {
        consumerProguardFiles 'proguard-rules.pro'
    }
} 
```

然后在我的库模块中配置 proguard-rules.pro 文件以保留重要序列化类的名称。

另请参阅[`consumerProguardFiles`gradle 参考](https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.BuildType.html#com.android.build.gradle.internal.dsl.BuildType:consumerProguardFiles)

# c# - c# HttpWebRequest(间歇性)抛出的HTTP 400错误(Bad Request)

> ID：15166381
> 
> 赞同：1
> 
> 时间：2013-03-01T20:32:34.727
> 
> 标签：c#, httpwebrequest, request

我的 Web 服务有问题。从 Web 方法中，我调用此其他方法来发出 HTTP 请求。我需要做的是从 URL 获取 XML 响应并对其进行处理。这是我发出 HTTP 请求的代码：

```
 private XmlDocument makeHTTPrequest(string url, string parametersStr)
    {
        HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create(url);

        byte[] buffer = Encoding.ASCII.GetBytes(parametersStr);
        Stream sAnswer = null;
        XmlDocument xDoc = new XmlDocument();
        string proxyAddress = "";
        int proxyPort = 0;
        int requestTimeout = 0;

        try
        {
            proxyAddress = ConfigurationSettings.AppSettings["ProxyAddress"];
            proxyPort = Convert.ToInt32(ConfigurationSettings.AppSettings["ProxyPort"]);
            requestTimeout = Convert.ToInt32(ConfigurationSettings.AppSettings["RequestTimeout"]);

            WebReq.Method = "POST";
            WebReq.ContentType = "application/x-www-form-urlencoded";
            WebReq.ContentLength = buffer.Length;

            if (proxyAddress != "0" && proxyPort != 0)
            {
                WebProxy proxy = null;
                proxy = new WebProxy(proxyAddress, proxyPort);
                proxy.UseDefaultCredentials = true;
                WebReq.Proxy = proxy;
            }

            if (requestTimeout != 0)
            {
                WebReq.Timeout = requestTimeout;
            }

            Stream PostData = WebReq.GetRequestStream();
            PostData.Write(buffer, 0, buffer.Length);
            PostData.Close();

            HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();
            if (WebResp.StatusCode == HttpStatusCode.OK)
            {
                sAnswer = WebResp.GetResponseStream();
                xDoc.Load(sAnswer);
            }
            else
            {
                throw new Exception("No se obtuvo una respuesta satisfactoria del servidor\r\nHTTP Error Code:" + WebResp.StatusCode.ToString());
            }

            if (xDoc == null) throw new Exception("El XmlDocument obtenido de DineroMail es null");

            return xDoc;
        }
        catch (Exception ex)
        {
            string datosStr = "";
            foreach (DictionaryEntry entry in ex.Data)
            {
                datosStr = entry.Key.ToString() + ": " + entry.Value.ToString() + "\r\n";
            }
            this.WriteToEventLog("Metodo makeHTTPrequest(string url, string parametersStr)\r\nParametros: url=" + url + " parametersStr= " + parametersStr + "\r\nDatos Excepcion (Cantidad "+ex.Data.Count.ToString()+"):\r\n"+ datosStr +"Descripcion:\r\n" + ex.Message + "\r\nSource:\r\n" + ex.Source + "\r\nStackTrace:\r\n" + ex.StackTrace + "\r\n");
            throw ex;
        }
    } 
```

这在我的开发环境（我的 PC）上运行良好，但是当我移动到生产服务器环境（带有 IIS 的 Windows 2008）时，我在发出 WebRequest 时收到 HTTP 400 错误。为了使调试更加困难，这种情况会间歇性地发生。这意味着它在一段时间内可以正常工作，但一段时间后它会停止工作并引发 HTTP 400 错误。另一个额外信息：从 Web 服务的另一个 Web 方法我调用另一个 Web 服务，它有时也会间歇性地抛出相同的错误。另一个额外的信息：我通过公司代理访问 Internet 有人知道可能是什么问题吗？几天来我一直在尝试解决这个问题，但没有运气，所以欢迎任何想法:-)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:47:16.167

这里报告了一个类似的问题：[.Net HttpWebRequest.GetResponse() raises exception when http status code 400 (bad request) is returned](https://stackoverflow.com/q/692342/2125028)。

我还注意到您没有处理 Response 对象。之前的响应在垃圾收集器的最终队列中仍然存在是否会导致问题？

```
using( HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse() )
{
  if (WebResp.StatusCode == HttpStatusCode.OK)
            {
                sAnswer = WebResp.GetResponseStream();
                xDoc.Load(sAnswer);
            }
            else
            {
                throw new Exception("No se obtuvo una respuesta satisfactoria del servidor\r\nHTTP Error Code:" + WebResp.StatusCode.ToString());
            }
} 
```

# eclipse - Eclipse/apache-tomcat-7.0.34 服务器无法定义新服务器

> ID：15166384
> 
> 赞同：4
> 
> 时间：2013-03-01T20:33:01.203
> 
> 标签：eclipse, apache, tomcat7

尝试在 eclipse/tomcat 上运行 Servlet 时出现 404 错误消息，促使我按照以下步骤逐步教程： http: [//www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)

教程很棒，但是到了教程的某个步骤（服务器设置），我被要求在 Eclipse 向导中定义一个新服务器（右键单击服务器选项卡 => 新服务器等），但我已经今天用tomcat 7做了数百次（所以我知道它是如何工作的）。

这里的问题是我使用的是预定义的 tomcat 版本，该版本是由导师定制的（没有安装程序）。我成功地解压缩了它等等......但是当我点击向导服务器列表中的“Tomcat v7.0 Server”选项时，它看起来是空的，当然“Next>”按钮是灰色的。

有没有办法在向导中导入服务器？

它曾经在我下载版本时工作：32 位/64 位 Windows 服务安装程序。 ![在此处输入图像描述](../Images/f52a58382c1bb94c24e2993b04ab9b0d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:39:56.267

OOps 已解决。只是：Windows => 首选项 => 服务器 => 添加（按钮）

# jquery - JQuery 检查多个输入并选择值

> ID：15166386
> 
> 赞同：1
> 
> 时间：2013-03-01T20:33:19.797
> 
> 标签：jquery

寻找一些使用 JQuery 的指针。

我有三个表单元素：

选择 - id：旅馆
输入 [文本] - id：日期
选择 - id：持续时间

我需要做的是，如果其中任何一个发生更改或模糊，则使函数运行，而且还要让脚本检查每个函数是否有一个值并将所有这三个值传递给脚本。

所以我需要填充三个变量：

```
var LodgeChoice = $('#lodge').val();
                var DateParse = $('#dates').datepicker('getDate');
                var DateChosen = DateParse.getFullYear() + '-' + (DateParse.getMonth() + 1) + '-' + DateParse.getDate();
                var Duration = $('#durationNights').val(); 
```

但我不能确定有人会以什么顺序填充表单变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:35:26.997

```
$("#lodge, #dates, #durationNights").on("blur change", function() {
    //get/process values here
}); 
```

如果您需要知道由于某种原因更改了哪个元素，您可以`$(this)`从事件处理函数内部参考

**编辑：**

回应您的评论：如果您还需要在继续之前确保所有三个都有一个值，那么您不必只有一个大的 if 语句。相反，您可以执行以下操作：

```
var fields = $("#lodge, #dates, #durationNights");
fields.on("blur change", function() {
    var valuesSet = true;
    fields.each(function() {
        if (!$(this).val()) { //inside a jQuery "each", "this" refers to the current item in the loop
            valuesSet = false;
            return false; //break out of the "each" loop
        }
    });
    if (valuesSet) {
        //process values
    }
}); 
```

# r - 函数不返回向量的问题

> ID：15166390
> 
> 赞同：1
> 
> 时间：2013-03-01T20:33:27.880
> 
> 标签：r, vector, append, return

当谈到'R'时，我是一个新手，但我已经阅读了很多信息，但我仍然不明白为什么我不能打印我在函数 fn 中返回的向量 - 我只是得到值“NULL”。此函数的目标是从两个数组中获取值，将它们相加并将它们放入一个新数组中。我使用 print(test) 命令检查数组中的数字是否正确地添加在一起。也许我附加错误？我现在没有看到问题。

```
fn <- function(x,y) {
liste <- vector(mode = "numeric", length = 192)
k <- 0  
for (i in 1:(length(x))) {
    for (j in 1:(length(y))) {
        test<-x[i] + y[j]
        print(test)
        append(liste,test, after=k)
        k <- k +1
    }
}
return(liste)
}

event1 = c(0.0,5.0,10.0,12.0)
event2 = c(0.0,3.0,5.0,7.0)
event3 = c(6.0,8.0,10.0,10.0,12.0,13.0,13.0,14.0,16.0,17.0,17.0,20.0)

z <-fn(event2,event3)
names(z) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T20:36:14.910

首先，`z`是一个向量（完全是`0`s），它只是一个未命名的向量。这就是为什么`names(z)`返回`NULL`。

其次，在您的方法中，这一行：

```
append(liste,test, after=k) 
```

应该只是：

```
liste[k] = test 
```

这是因为`append`它不会*改变*它传递的向量，它只是返回一个新的。

*但是*，有一种*更*简单的方法来做你想做的事情，使用这个`expand.grid`函数：

```
fn <- function(x, y) {
    rowSums(expand.grid(x, y))
} 
```

# java - 将溢出菜单添加到自定义标题栏

> ID：15166400
> 
> 赞同：2
> 
> 时间：2013-03-01T20:33:52.980
> 
> 标签：java, android, drop-down-menu

我正在尝试在我的自定义标题栏上添加 android 提供的溢出菜单，但它似乎没有出现

这是我活动中的代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.overflow_menu, menu);
    return true;
} 
```

在我的 .xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <menu xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:id="@+id/settings" android:title="Settings" />
     <item android:id="@+id/help" android:title="Help" />
     </menu> 
```

自定义标题条码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"   
android:layout_height="44dp"   
android:orientation="horizontal"   
android:gravity="center_vertical"
android:background="#000000"   
>
<ImageView
    android:id="@+id/indicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"              
    android:src="@drawable/indicator"
    android:layout_marginRight="3dip"
     />

   <ImageView
    android:id="@+id/indicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"              
    android:src="@drawable/launcher_blue_tile"
    android:layout_marginRight="5dip"
     />

    <TextView              
    android:id="@+id/titleHeading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/app_name"
    style="@style/titleBarHeading"

    /> 
```

安卓清单

```
 <activity
        android:name=".ILaneMainMenuActivity"
        android:icon="@drawable/indicator"
        android:label="@string/app_name"
        android:theme="@style/appTheme">

    </activity> 
```

我查看了 Google 提供的文档以及在线的多种资源，但找不到解决方案。任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:56:00.177

如果您正在使用操作栏，溢出菜单由操作栏右侧的“...”提示触发，或通过带有屏幕外菜单按钮的设备的 MENU 按钮触发。

如果您不使用操作栏——这是我的猜测——那么您将需要创建自己的菜单系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:03:58.747

您的自定义标题栏应该如何适应 ActionBar/Menu 排列？MenuInflater#inflate 将根据添加到 /menu/overflow_menu.xml 文件中的项目创建一个 ActionBar（Honeycomb / API 11+ 后）或 Menu（API-11 前）。

**如果**您的项目过多，则会自动添加溢出菜单（同样，仅在 API 11+ 中） 。您只有 2 个项目 - 设置和帮助 - 所以除非它是一个小屏幕，否则这两个项目都可能适合，所以不需要溢出。

您最好探索 ActionBar 的样式可能性 - [http://developer.android.com/guide/topics/ui/actionbar.html#Style](http://developer.android.com/guide/topics/ui/actionbar.html#Style) - 其中包括允许自定义图标和标题，甚至添加自定义视图/纽扣。如果您想支持较早的 Android 版本，您可以拥有一种仅适用于 Honeycomb 之前的设备的样式，但您必须手动将该布局添加到您的活动中。

另一种选择是[ActionBarSherlock](http://actionbarsherlock.com/)，强烈推荐并广泛使用，但我没有个人经验。

# ruby-on-rails-3 - 将javascript直接放在视图中而不是Rails中的assets/javascript？

> ID：15166402
> 
> 赞同：0
> 
> 时间：2013-03-01T20:33:54.530
> 
> 标签：ruby-on-rails-3

当我们生成一个模型时，比如 Fruit，它会自动生成`assets/javascripts/fruits.js`

但是，假设我们只有一个段落元素的 javascript 回调`views/fruits/show.html`，是否应该直接将其放置在 中`show.html`？放进去是更传统还是更快`fruits.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:38:04.557

您可以使用[content_for](http://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for)来实现它。

```
<%# views/layouts/application.html.erb %>
<head>
  <title>My Website</title>
  <%= yield :script %>
</head>

<%# views/fruits/show.html %>
<% content_for :script do %>
  <%= javascript_include_tag :fruits %>
<% end %> 
```

# sql - 柱子 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中

> ID：15166404
> 
> 赞同：0
> 
> 时间：2013-03-01T20:33:56.920
> 
> 标签：sql

我对 SQL 相当陌生，并且对收到的错误消息有一个简单的问题（此问题的标题）。我试图找出库存中物品的总价值（itemQuantity * itemCost）、平均物品成本和潜在的收入损失（itemQuantity * itemMktValue）

```
SELECT
    (itemQuantity * itemCost) 'Total',
    AVG (itemCost) 'AvgerageItemCost',
    (itemQuantity * itemMktValue) 'LossedRevenue'
FROM
    Item; 
```

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:39:10.453

您的`select`语句中包含一个聚合函数 ( `AVG`)。因此，SQL 假定您有一个聚合查询。

没有`group by`子句，因此 SQL 期望聚合所有内容，如下所示：

```
select sum(itemQuantity), count(*)
from item 
```

但是，在您的查询中，您有几个变量不是聚合函数的参数——`itemQuantity`例如。大概，你想要这样的东西：

```
SELECT sum(itemQuantity * itemCost) 'Total',
       AVG (itemCost) 'AvgerageItemCost',
       sum(itemQuantity * itemMktValue) 'LossedRevenue'
FROM Item; 
```

您可能还需要基于每个项目的此信息，在这种情况下，您将使用`group by`：

```
SELECT itemid, sum(itemQuantity * itemCost) 'Total',
       AVG (itemCost) 'AvgerageItemCost',
       sum(itemQuantity * itemMktValue) 'LossedRevenue'
FROM Item
group by itemid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:37:08.227

尝试：

```
SELECT
    SUM(itemQuantity * itemCost) 'Total',
    AVG (itemCost) 'AvgerageItemCost',
    SUM(itemQuantity * itemMktValue) 'LossedRevenue'
FROM
    Item; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:39:31.280

如果我理解正确，你需要这样的东西：

```
SELECT
    SUM((itemQuantity * itemCost) 'Total',
    AVG (itemCost) 'AvgerageItemCost',
    SUM(itemQuantity * itemMktValue) 'LossedRevenue'
FROM
    Item; 
```

# mysql - Mysql查询有效地将列迁移到外键

> ID：15166405
> 
> 赞同：0
> 
> 时间：2013-03-01T20:34:00.180
> 
> 标签：mysql

我正在尝试将许多重复的文本字符串从一个表中分离到另一个表中，以便我转换为外键系统。

提取唯一文本并插入新表很容易，但我尝试了以下更新/子查询以使用新的外键值更新原始表。在 2200 万行中，花费的时间比我想要的要长。

有什么办法可以提高效率吗？我怀疑做一个子查询是一个很好的解决方案。原始表有一个`player`带有玩家姓名字符串的列。我已将所有唯一值转储到单独的表中，并希望使用新 ID 更新原始表。

```
UPDATE prism_actions SET player_id = (SELECT prism_players.id FROM prism_players WHERE prism_players.player = prism_actions.player);
Query OK, 22018608 rows affected (2 hours 21 min 58.97 sec) 
```

几年前我曾使用过一个例子来做到这一点，但对于我的生活，我搜索的任何东西都没有给我任何与我正在尝试做的事情相关的东西。谷歌无法理解我的意思，我想不出更多的方法来问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:39:08.560

一个简单的怎么样：

更新 prism_actions a, prism_players p SET a.player_id = p.player_id 其中 a.player=p.player;

我不知道要快多少，但它会消除子查询。

# c - printf("%d", astatbuff->st_size); 的 C 格式问题；

> ID：15166410
> 
> 赞同：6
> 
> 时间：2013-03-01T20:34:24.167
> 
> 标签：c, format

```
int lsdetails(struct stat *astatbuff) {
    printf("%d", astatbuff->st_size);
    printf("%d", astatbuff->st_atime);
    printf("%s\n", getpwuid(astatbuff->st_uid)->pw_name);

    return 0;
    } 
```

> 警告：格式“%d”需要“int”类型的参数，但参数 2 的类型为“__off_t”[-Wformat]

我收到了上述错误消息，但我不明白为什么。我的印象是我只为`st_size`和传递了一个论点`st_atime`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T20:57:44.600

与从 0 开始计数的 C（数组元素 :-) 不同，gcc 从 1 开始计数函数参数。因此，在 中`printf (fmt, value)`，“参数 1”指的是`fmt`，而“参数 2”指的是`value`。容易，不是吗？

至于 printf an 的正确整数类型`__off_t`，目前还没有 100% 保证和可移植的方式。您最好的选择是将其转换为您的实现支持的最广泛的无符号类型。请注意，an`unsigned long`可能只有 32 位宽，您会遇到文件 >= 4GB 的问题。如果你有一个 C99 实现，或者它支持`unsigned long long`，你应该没问题

```
printf("%llu", (unsigned long long)astatbuff->st_size); 
```

在当前的 POSIX 标准化小组中进行了讨论，以提供更多与其他 POSIX 类型（如 等）匹配的 printf() 格式说明符`off_t`。`pid_t`一旦完成（不要屏住呼吸），打印文件大小将更便携，并且优雅的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T20:40:54.710

> 我收到上述错误消息，但我不明白为什么。我的印象是我只为`st_size`和传递了一个论点`st_atime`。

但是您将两个参数传递给`printf`,

1.  格式字符串
2.  结构成员

第二个参数是 type `__off_t`，但格式是`int`参数。正确的格式`__off_t`是什么，我不知道，`%ld`或者`%zd`很有可能是正确的，但是为了安全起见，转换为`intmax_t`并使用`%jd`.

# python - 池生成无限多个工作进程

> ID：15166414
> 
> 赞同：2
> 
> 时间：2013-03-01T20:34:34.917
> 
> 标签：python, threadpool, python-multithreading

我正在使用`networkx`（网络分析库）进行一些缓慢的计算，并且我正在尝试使用池工作人员来使其更快一些。计算是独立的，因此并行化它们应该相对简单。

```
def computeInfoPooled(G,num_list):
    pool=Pool(processes=4)

    def f(k):
        curr_stat={}
        curr_stat[k]=slow_function(k,G)
        return curr_stat

    result = pool.map(f,num_list)

    return result 
```

现在，我在控制台中运行了以下命令：

```
computed_result=computeInfoPooled(G) 
```

我希望这段代码创建 4 个进程，并在不同的进程中使用 num_list 的每个项目（一个数字）调用 f 。如果 num_list 包含超过 4 个数字（在我的情况下约为 300），它只会同时运行 4 个并将其余的排队，直到其中一个池工人完成。

当我运行我的代码时发生的事情是产生了许多 python.exe（或分叉，不确定发生了什么），并且似乎它正在创建无限多的进程，所以我不得不拔掉我的机器。

任何想法我做错了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:42:50.840

在 Windows 上，您需要

```
if __name__ == '__main__':
    computed_result = computeInfoPooled(G) 
```

在不启动分叉炸弹的情况下使您的脚本可导入。[（阅读文档中](http://docs.python.org/2/library/multiprocessing.html#windows)标题为“安全导入主模块”的部分。

另请注意，在 Windows 上，您可能无法使用交互式解释器中的多处理模块。[请参阅文档顶部](http://docs.python.org/2/library/multiprocessing.html#introduction)附近的警告：

> 此包中的功能要求子模块可以导入**主模块。**这在编程指南中有介绍，但值得在这里指出。这意味着某些示例，例如**multiprocessing.Pool 示例将无法在交互式解释器中工作**。（我的重点。）

相反，将脚本保存到文件中，例如`script.py`并从命令行运行它：

```
python script.py 
```

* * *

此外，您需要参数是`pool.map`可腌制的。该函数`f`需要在模块级别定义（不是内部`computeInfoPooled`可picklable：

```
def f(k):
    curr_stat = slow_function(k, G)
    return k, curr_stat

def computeInfoPooled(G, num_list):
    pool = Pool(processes=4)
    result = pool.map(f, num_list)
    return dict(result)

if __name__ == '__main__':
    computed_result = computeInfoPooled(G) 
```

* * *

顺便说一句，如果`f`返回一个字典，那么`pool.map(f, ...)`将返回一个字典列表。我不确定这是你想要的，特别是因为每个 dict 只有一个键值对。

相反，如果您让`f`返回一个 (key, value) 元组，那么`pool.map(f, ...)`将返回一个元组列表，然后您可以将其转换为带有`dict(result)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:38:54.287

这在 Programming Guidelines for [Windows](http://docs.python.org/2/library/multiprocessing.html#windows)下的文档中进行了解释。

根据您的平台，每个进程可能必须启动一个全新的解释器和`import`您的模块才能`f`调用该函数。（在 Windows 上，它*总是*必须这样做。）当它`import`是你的模块时，所有顶级代码都会运行，其中包括行`computed_result=computeInfoPooled(G)`，它创建了一个全新的 4 个进程池等。

您可以像处理任何其他情况一样解决这个问题，您希望同一文件既可作为模块导入又可作为脚本运行：

```
def computeInfoPooled(G,num_list):
    pool=Pool(processes=4)

    def f(k):
        curr_stat={}
        curr_stat[k]=slow_function(k,G)
        return curr_stat

    result = pool.map(f,num_list)

    return result

if __name__ == '__main__':
    computed_result=computeInfoPooled(G) 
```

* * *

从您的编辑和评论来看，您似乎期望`computeInfoPooled(G)`从交互式解释器调用 to 将解决该问题。相同的链接文档部分详细解释了为什么它不起作用，[简介](http://docs.python.org/2/library/multiprocessing.html#introduction)顶部的一个重要说明直接说：

> 此包中的功能要求子模块可以导入**主模块。**这在编程指南中有介绍，但值得在这里指出。这意味着某些示例，例如 multiprocessing.Pool 示例将无法在交互式解释器中工作。

如果您想了解为什么这是真的，您需要阅读链接的文档（您还需要了解一点关于如何`import`工作`pickle`的知识`multiprocessing`）。

# c# - 指定排序

> ID：15166415
> 
> 赞同：1
> 
> 时间：2013-03-01T20:34:46.637
> 
> 标签：c#, entity-framework, sql-order-by

我有一组嵌套到各个级别的 POCO 模型，它们是通过使用实体框架 powertools 对现有数据库进行逆向工程生成的。在某一时刻，我有一个看起来像这样的模型：

```
public partial class Model
{
    public Model 
    {
        this.subModels = new List<subModel>();
    }
    public virtual ICollection<subModel> submodels { get; set; }
} 
```

和一个看起来像这样的子模型：

```
public partial class subModel
{
    public int subModelID { get; set; }
    public int foo1 { get; set; }
    public int foo2 { get; set; }
} 
```

我需要的是在那时而不是按主键对`subModels`in`Model`进行排序，但我想不出最好的方法来做到这一点。似乎没有一个地方可以告诉它已经按该顺序从数据库中检索数据，当我尝试使用该属性时，我似乎无法在其上使用任何 Linq。几乎我唯一能做的就是以数据库吐出它们的任何顺序使用和枚举它。`foo1``foo2``subModelID``subModels``Model``GetEnumerator()`

如果这有什么不同，我正在使用 MySQL。

更新：好的，我可以使用 Linq，我只是忘了添加`using`语句。这是漫长的一周！不过，我想知道是否可以告诉 EF 首先以正确的顺序查询数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:52:15.253

如果您想显式加载导航属性，可以执行以下操作：

```
Model model;

context.Entry(model)
   .Collection(k => k.submodels )
   .Query()
   .OrderBy(p => p.foo1 )
   .ThenBy(p=> p.foo2 )
   .Load(); 
```

这有点麻烦，但会起作用。不过，当您想使用它们时，似乎订购它们同样容易。

# delphi - delphi 目录存在网络映射单元的功能奇怪行为

> ID：15166420
> 
> 赞同：5
> 
> 时间：2013-03-01T20:34:56.497
> 
> 标签：delphi, function, directory, delphi-xe, exists

在 delphi XE 中，当我使用以下输入调用 SysUtils DirectoryExists 函数时

'Y:\blabla\'

其中 Y 是网络映射单元，它正确返回 false，因为 blabla 不存在。

但是当我使用以下输入调用时

'Y:\blabla\Y:\bla'

它返回真。

文档很差，我在互联网上的任何地方都没有找到有同样问题的人

也许这里有人已经遇到过这个问题，或者知道发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T21:10:43.780

这似乎是[DirectoryExists](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.DirectoryExists)函数实现中的一个错误。

这是这个函数的相关代码

```
function DirectoryExists(const Directory: string; FollowLink: Boolean = True): Boolean;
{$IFDEF MSWINDOWS}
var
  Code: Cardinal;
  Handle: THandle;
  LastError: Cardinal;
begin
  Result := False;
  Code := GetFileAttributes(PChar(Directory));

  if Code <> INVALID_FILE_ATTRIBUTES then
  begin
    ...
    //more code
    ...
  end
  else
  begin
    LastError := GetLastError;
    Result := (LastError <> ERROR_FILE_NOT_FOUND) and
      (LastError <> ERROR_PATH_NOT_FOUND) and
      (LastError <> ERROR_INVALID_NAME) and
      (LastError <> ERROR_BAD_NETPATH);
  end;
end;
{$ENDIF MSWINDOWS} 
```

如您所见，如果[`GetFileAttributes`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364944%28v=vs.85%29.aspx)函数调用失败，则将该[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)方法的结果与一组可能的值进行比较。但在您的情况下，传递无效路径将返回[`ERROR_BAD_PATHNAME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)(161) 代码，因此该函数返回 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T12:17:21.693

该错误在 XE8 中仍然存在（可能也在其他版本中）。正如上面 RRUZ 指出的，它存在于***DirectoryExists()***和***TDirectory.Exists()****的SysUtils* 实现中。

 **问题在于一长串“检查”假定它们是在文件夹“存在”的上下文中可能返回 INVALID_FILE_ATTRIBUTES的*唯一有效原因。*但是我们调用这些例程的原因*几乎总是*这样我们可以检查我们是否可以实际***使用***我们询问的文件夹。拥有 INVALID_FILE_ATTRIBUTES 几乎总是意味着我们不能。无论哪种方式，目前正在进行的测试都不会产生合理的结果。仅此事实就使其成为完全多余的练习，因为它允许某些其他故障代码通过网络并在不应该的情况下将最终结果设置为 TRUE。虽然我只能想象这种疯狂本来有一些方法，但按照“哦，它存在但可能无效”的思路，它违背了未来可能会带来更多由许多人生成的代码的内在真理未知的文件系统和/或硬件：所以底线是对于 99.9% 的使用，获取*INVALID_FILE_ATTRIBUTES*应该意味着*文件夹不可用*，因此一旦已经确定就允许返回 TRUE 是不合逻辑的。

不幸的是，我们不知道是否存在依赖当前行为来识别“存在问题的现有路径”的代码 - 在这种情况下，对当前存在的例程的调用必须首先进行路径语法验证检查：否则它会说用错误语法描述的路径“存在”，这是胡说八道！之后您不能重做*GetLastError*，因为错误已被清除。

因此，唯一的解决方法是使用可以预先消除问题的代码来包装任何***Sysutils.DirectoryExists***和（不幸的是）***TDirectory.Exists调用。***例如：

```
DirectoryUsable(const Directory: string; FollowLink: Boolean = True): Boolean;
begin
   Result := GetFileAttributes(PChar(Directory)) <> INVALID_FILE_ATTRIBUTES;
   if Result then Result := DirectoryExists( Directory, FollowLink );
end; 
```

要么这样，要么你对你知道的所有“坏”案例和 Embarcadero 错过的所有“坏”案例进行单独的预先验证——即和他们一样玩同样的失败游戏。可怕，但你去。

您还可以自己修改 SysUtils 库，以添加丢失的案例，您必须在每个 Delphi 版本*和*遇到的每个新案例中重做。如果 Embarcadero 最终“咬紧牙关”并为这个问题找到更好的解决方案，那可能会更好。也许通过使用另一个默认的标志参数，即“拒绝所有无效目录”。我会进一步建议这默认为 TRUE。**

# c++ - 在 QtCreator 外部启动时，QMediaPlayer 未在 Windows 上开始播放

> ID：15166425
> 
> 赞同：1
> 
> 时间：2013-03-01T20:34:58.927
> 
> 标签：c++, windows, qt, mp3, dll

我想适应 Qt5，所以我开始了一个非常小的 mp3 播放器。它可以在 64 位的 Linux 和 Windows 7 上编译。

但是，在 Windows 上运行时，选定的 mp3 文件只有在我在 QtCreator 中启动程序时才会开始播放。当我启动独立（共享编译）EXE 时，程序会打开，但开始播放时什么也没有发生（在 IDE 中调试时，一切似乎都正常，我猜有点像 Heisenbug）。

在*Processmonitor*中查看文件访问时，我看到了目录扫描，但是当打开 MP3 时没有任何反应。

也许我错过了复制 DLL，但是我没有提示丢失了哪个，所以这可能是另一个问题。*Dependency Walker*输出（虽然它没有告诉我哪些文件/功能导致错误，也许我错过了）：

```
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module. 
```

这是我尝试启动 EXE 的目录内容

*   文件夹“平台”包括：qminimal.dll、qwindows.dll
*   icudt49.dll、icuin49.dll、icuuc.49.dll
*   IEShims.dll（没有它也可以工作，但是 Dependency Walker 告诉它丢失了）
*   libEGL.dll
*   libgcc_s_sjlj-1.dll
*   libGLESv2.dll
*   libstdc++-6.dll
*   libwinpthread-1.dll
*   Qt5Core.dll、Qt5Gui.dll、Qt5Multimedia.dll、Qt5Network.dll、Qt5Widgets.dll
*   咕噜声

您可以查看完整的源代码@https [://github.com/VashSan/purr](https://github.com/VashSan/purr) - 我开始播放的源代码的一部分：

```
void PurrWindow::playMedia()
{
    // [...]
    // QMediaPlayer is a member of PurrWindow:

    QUrl media = QUrl::fromLocalFile(selectedFile);
    player.setMedia(media);
    player.play();
} 
```

我用 MSVC2010 编译了一次程序，用 Mingw 编译了一次，没有区别。

我试图用谷歌搜索 QMediaPlayer 错误，但大多数都与移动平台有关。不过QMediaPlayer并没有给我留下好印象，也许我应该看一个更可靠的播放库。但是，如果它只是开始播放，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:37:23.327

使用[DLL Export Viewer 查看](http://www.nirsoft.net/utils/dll_export_viewer.html)您的**.exe**是否引用了正确的**.dll**。

有时人们安装了多个 Qt/Phonon 版本，并且`PATH`环境变量不指向这些 DLL 所在的目录。

此外，请确保`selectedFile`具有文件的完整路径。**在以下情况下检查路径是否有效是**个好主意：

```
selectedFile = fileDialog.getSelectedPath(); 
```

和：

```
QFile file( selectedFile );
if( !file.exists() )
{
  qDebug() << "!!! Invalid file: " << selectedFile;
  return;
} 
```

# complexity-theory - 这些功能的复杂性是什么？

> ID：15166426
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:35:01.330
> 
> 标签：complexity-theory

这些函数的复杂性是线性的，例如 O(n)。我认为前两个是线性的

1.  n+3
2.  2n+3
3.  (2+(1/2(n+3))+(1/2(2n+3)))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:39:18.520

是的，所有都是线性的，任何常数都可以忽略，常数系数 2n 对于 3 是 O(n)。它是 1/2n+1/2n 可以忽略，所以它应该都是 O(n)

# iphone - 即使手机处于静音或振动状态，如何让视频播放声音？

> ID：15166431
> 
> 赞同：1
> 
> 时间：2013-03-01T20:35:15.697
> 
> 标签：iphone, ios

我正在使用[LBYoutubeView](https://github.com/larcus94/LBYouTubeView)播放 YouTube 视频，如果手机处于静音或振动状态，视频将不会播放声音。有没有办法强制它在视频上播放声音？

我知道您可以播放某个音频文件，如此[处](https://stackoverflow.com/questions/3740528/play-sound-on-iphone-even-in-silent-mode)所述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T22:06:12.150

您需要使用`AVAudioSession`API 来配置音频播放。调用将类似于：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&error]; 
```

在调用播放音频的 API 之前进行此调用。这在播放音频但不播放视频的应用程序中对我有用，所以 YMMV。

[此处](https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1)描述了该类别的可能值。

# java - Google Http Java 客户端解析为枚举

> ID：15166436
> 
> 赞同：8
> 
> 时间：2013-03-01T20:35:31.593
> 
> 标签：java, json

因此，我知道您可以使用[`@Value`](http://javadoc.google-http-java-client.googlecode.com/hg/1.13.1-beta/com/google/api/client/util/Value.html)注释将 json 值解析为枚举，但是如果 json 中的值与任何用`@Value`. 例如，假设一个 api 决定添加一个您的客户不知道的新类型。它的值是否设置为 null，还是有异常？有没有办法将枚举值设置为默认捕获所有值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-27T06:29:44.700

根据[这个谷歌群组的帖子](https://groups.google.com/forum/#!topic/google-http-java-client/HE4aepDr8g0)，你会得到`NullPointerException`。

## 编辑

参考内容：

> 我有一个名为 Job 的对象，其中包含一个包含 API 的枚举字段 statusCode。该枚举使用@Value 正确注释，只要该枚举处理所有可能在 status_code 字段中返回的可能值，json 解析就可以正常工作。
> 
> ```
> public static class Job {
> 
>     @Key("status_code")
>     public JobStatus statusCode;
> }
> 
> public enum JobStatus {
> 
>     @Value("starting")
>     STARTING
> } 
> ```
> 
> 但是，如果在该字段中返回未知值，那么我会得到一个
> 
> ```
> NullPointerException:
> java.lang.NullPointerException
>   at com.google.api.client.util.Data.parsePrimitiveValue(Data.java:445)
>   at com.google.api.client.json.JsonParser.parseValue(JsonParser.java:795)
>   at com.google.api.client.json.JsonParser.parse(JsonParser.java:438)
>   at com.google.api.client.json.JsonParser.parseValue(JsonParser.java:745)
>   at com.google.api.client.json.JsonParser.parse(JsonParser.java:358)
>   at com.google.api.client.json.JsonParser.parse(JsonParser.java:331)
>   at com.google.api.client.json.JsonObjectParser.parseAndClose(JsonObjectParser.java:87)
>   at com.google.api.client.json.JsonObjectParser.parseAndClose(JsonObjectParser.java:81)
>   at com.google.api.client.http.HttpResponse.parseAs(HttpResponse.java:459) 
> ```
> 
> 我希望这段代码是健壮的，这样如果返回一个未知值，它将被视为 null 而不是抛出异常并且不返回 Job 对象。有没有办法做到这一点？

# jquery-mobile - JQuery Mobile 主题列表，一行中有块

> ID：15166442
> 
> 赞同：1
> 
> 时间：2013-03-01T20:35:58.983
> 
> 标签：jquery-mobile

我一直在尝试为以下 [link] [http://jsfiddle.net/wigiri/DAJca/](http://jsfiddle.net/wigiri/DAJca/)设置主题，但没有成功，这是一个项目的示例：

```
<ul data-role="listview">
                <li data-role="fieldcontain" class="ui-li">
                    <div>
                        <label class="ui-label" for="0">Afghan</label>
                    </div>
                    <div style="float:right">
                        <select name="0" id="0" onchange="saveSelect(this,'Food',0);" data-role="slider"
                        data-mini="true">
                            <option value="0">No</option>
                            <option value="1" undefined>Yes</option>
                        </select>
                    </div>
                </li>
</ul> 
```

我希望标签位于左侧，滑块位于右侧，并以漂亮的“列表项”背景相互对齐。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:47:21.093

这是一个工作示例：http: [//jsfiddle.net/Gajotres/pzfr2/](http://jsfiddle.net/Gajotres/pzfr2/)

使用的 CSS：

```
#slider-container {
    position: relative;
    float:right;  
    margin-top: -10px !important;    
}

#slider-container .ui-slider {
    margin-top: -50px !important;
} 
```

# c# - 十进制格式

> ID：15166443
> 
> 赞同：1
> 
> 时间：2013-03-01T20:35:58.507
> 
> 标签：c#, formatting, decimal

我有一个小数 = 123456 和一个整数 = 5 我想插入“。” 在我的小数点的第五位从右边得到 1.23456 我怎样才能使用标准格式化函数来做到这一点（即不除以 10 的幂，然后才格式化以添加缺失的零）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:23:05.200

这实际上很有趣，至少，我认为是。我希望我不会因为输入负数或考虑可能的十进制输入而愚蠢地过火......

```
 decimal input;
            int offset;
            string working = input.ToString();
            int decIndex = working.IndexOf('.');
            if (offset > 0)
            {
                if (decIndex == -1)
                {
                    working.PadLeft(offset, '0');
                    working.Insert(working.Length - offset, ".");
                }
                else
                {
                    working.Remove(decIndex, 1);
                    decIndex -= offset;
                    while (decIndex < 0)
                    {
                        working.Insert(0, "0");
                        decIndex++;
                    }
                    working.Insert(decIndex, ".");
                }
            }
            else if (offset < 0)
            {
                if (decIndex == -1)
                {
                    decIndex = working.Length();
                }
                if (decIndex + offset > working.Length)
                {
                    working.PadRight(working.Length - offset, '0');
                }
                else
                {
                    working.Remove(decIndex, 0);
                    working.Insert(decIndex + offset, ".");
                }

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:41:55.663

你想要这样的东西吗？

```
decimal d = 10000000;
int n=4;

string s = d.ToString();
var result = s.Substring(0, s.Length - n) + "." + s.Substring(s.Length - n); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:14:40.900

您可以通过[String.Insert做到这一点](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)

```
decimal d = 100000000000;
string str = d.ToString();
int i = 5;
string str2 = str.Insert(str.Length - i, ".");
Console.WriteLine(str2);
Console.Read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:47:04.457

这很丑陋；真正的价值是什么？12345 还是 1.2345？为什么要存储 12345 然后尝试将其*表示*为*不同的数字*？离开你试图传达你实际拥有的东西是一个定点（编码）值，你需要先解码它。IE

```
decimal fixedPoint = 12345
decimaldecoded = fixedPoint / (decimal)10000
decoded.ToString(); 
```

所以在你的代码中你应该定义你有一个

```
var fixedPoint = new FixedPointValue(12345, 5);
var realValue = fixedPoint.Decode(); 
```

如果任何其他程序员看到这个，很明显为什么你必须以这种方式格式化它。

# php - 使用 nginx 通过 index.php 路由请求

> ID：15166445
> 
> 赞同：6
> 
> 时间：2013-03-01T20:36:03.087
> 
> 标签：php, apache, .htaccess, nginx, front-controller

我正在将我的服务器从 Apache 迁移到 Nginx，并且有这个非常简单的`.htaccess`规则：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

它背后的想法是将每个请求定向到前端控制器（`index.php`）。我正在尝试对 Nginx 做同样的事情。我使用了一个在线转换器来制作这个 Nginx 位置块：

```
location / {
    if (!-e $request_filename){
        rewrite ^(.*)$ /index.php break;
    }
} 
```

但是当我将它添加到我的站点配置中时，Nginx 只是吐出 PHP 文件的源代码作为下载。作为参考，这是整个配置文件：

[http://pastebin.com/tyKtM1iB](http://pastebin.com/tyKtM1iB)

我知道 PHP 可以正常工作，就好像我删除了 location 块并使用`<?php phpinfo();`它制作的文件正常工作一样。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T20:51:35.500

这就是我将所有内容路由到 index.php 的方式，包括子目录请求、HTTP 参数等。

```
location / {
    try_files $uri $uri/ /index.php?$args; #if doesn't exist, send it to index.php
}

location ~ \.php$ {
    include fastcgi_params;
    fastcgi_intercept_errors on;
    # By all means use a different server for the fcgi processes if you need to
    fastcgi_pass   127.0.0.1:9000;
 } 
```

例如，这些被发送到 index.php：

```
http://foo.bar/something/
http://foo.bar/something/?something=1 
```

虽然这些直接转到文件

```
http://foo.bar/someotherphp.php
http://foo.bar/assets/someimg.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:38:54.183

跳过正则表达式的结尾：

```
location / {
        index index.html index.php;
        if (!-e $request_filename) {
            rewrite ^.* /index.php break;
            fastcgi_pass 127.0.0.1:9001;
        }
} 
```

# sql - 从类别中选择上周的前 5 名

> ID：15166448
> 
> 赞同：1
> 
> 时间：2013-03-01T20:36:10.717
> 
> 标签：sql, sql-server

我在 MS SQL 中有两个表：

```
Category
 - Id (int)

CategoryElement
 - Id (int)
 - CategoryId (int) //References Category.Id
 - Time (datetime) 
```

因此，每个类别可以有零个或多个类别元素。时间，在 CategoryElement 中，表示创建类别元素的时间。

我需要一些帮助来编写以下查询：按过去 7 天添加的类别元素数量降序排列类别，并显示类别 ID 和添加的元素数量。

到目前为止，我设法编写了没有“在过去 7 天内添加”部分的查询：

```
SELECT c.Id, e.ElemCount
FROM dbo.Categories AS c 
INNER JOIN
    (SELECT CategoryId, COUNT(1) AS ElemCount, MAX(Time) AS LatestElem
     FROM dbo.CategoryElements
     GROUP BY CategoryId) AS e 
ON c.ID = e.CategoryId
ORDER BY e.LatestElem DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:41:12.490

您可以使用`DATEDIFF`and`WHERE`子句仅获取过去一周并将`TOP 5`结果限制为仅 5 行。

```
SELECT TOP 5 c.Id, e.ElemCount
FROM dbo.Categories AS c 
INNER JOIN
    (SELECT CategoryId, COUNT(1) AS ElemCount, MAX(Time) AS LatestElem
     FROM dbo.CategoryElements
     GROUP BY CategoryId) AS e 
ON c.ID = e.CategoryId
WHERE DATEDIFF(d, e.Time, GetDate()) < 7
ORDER BY e.LatestElem DESC 
```

我上面的回答假设使用 SQL Server。根据您的数据库类型，代码可能会有所变化。例如，对于 MySQL，它将如下所示：

```
SELECT c.Id, e.ElemCount
FROM dbo.Categories AS c 
INNER JOIN
    (SELECT CategoryId, COUNT(1) AS ElemCount, MAX(Time) AS LatestElem
     FROM dbo.CategoryElements
     GROUP BY CategoryId) AS e 
ON c.ID = e.CategoryId
WHERE (Date(now()) - Date(e.Time)) < 7
ORDER BY e.LatestElem DESC
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:45:47.237

You can try this query

```
SELECT CategoryId, COUNT(*) AS numbOfCat
FROM dbo.CategoryElement
WHERE [Time] BETWEEN DATEADD(day, -7, GETDATE()) AND GETDATE()
GROUP BY CategoryId
ORDER BY MAX(Time) DESC 
```

Demo on [**SQLFiddle**](http://sqlfiddle.com/#!3/f9b09/1)

If you need TOP 5 then

```
SELECT TOP 5 CategoryId, COUNT(*) AS numbOfCat
FROM dbo.CategoryElement
WHERE [Time] BETWEEN DATEADD(day, -7, GETDATE()) AND GETDATE()
GROUP BY CategoryId
ORDER BY MAX(Time) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:40:59.983

看看类似的东西：

```
WHERE (Date(now()) - Date(Time)) < 7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:41:23.010

不确定您使用的是什么 RDBMS，但在 SQL Server 中您可以执行以下操作：

```
SELECT c.Id, e.ElemCount
FROM dbo.Categories AS c 
INNER JOIN
    (SELECT CategoryId, COUNT(1) AS ElemCount, MAX(Time) AS LatestElem
     FROM dbo.CategoryElements
     WHERE DATEDIFF(d, Time, CURRENT_TIMESTAMP) <= 7
     GROUP BY CategoryId) AS e 
ON c.ID = e.CategoryId
ORDER BY e.LatestElem DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T20:42:58.973

您的“最后 7 天”限制将出现在您的内部加入的子查询中。像这样。

```
SELECT CategoryId, COUNT(1) AS ElemCount, MAX(Time) AS LatestElem
FROM dbo.CategoryElements
WHERE Time > dateadd(dd,-7,getDate()) -- 7 Days prior to today
GROUP BY CategoryId 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T20:43:38.167

```
select CategoryId, count(*) as cnt
from CategoryElement
where dateadd(day, -7, getdate())<= Time
group by CategoryID
order by   count(*) desc 
```

# vba - 具有多个条件的嵌套 iif SSRS

> ID：15166452
> 
> 赞同：11
> 
> 时间：2013-03-01T20:36:33.990
> 
> 标签：vba, reporting-services, formula, iif

我需要为 SSRS 报告编写一个公式。我不确定确切的语法，但我认为它应该是一个嵌套的 iif，但有多个条件，检查图表和除法字段的值。在一天结束时，如果 chart=110300 和 Division=100 然后是“Intercompany AP - USA”，或者如果 chart=110300 和 Division=200 然后是“Intercompany AP - RUS”，则只显示图表名称。像这样的东西，但实际上写得正确。

```
iif Fields!chart.Value="110300" and Fields!division.Value="100" then
Fields!chartname.Value="Intercompany AP - USA" if Fields!chart.Value="110300"
and Fields!division.Value="200" then Fields!chartname.Value=
"Intercompany AP - RUS" else Fields!chartname.Value 
```

我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T23:40:49.057

你自己解决了这个问题！要在 T-SQL 中编写此代码，请右键单击图表名称并将其值更改为以下表达式：

```
IIF(Fields!chart.Value="110300" AND Fields!division.Value="100","Intercompany AP - USA",IIF(Fields!chart.Value="110300" AND Fields!division.Value="200","Intercompany AP - RUS","Default Chart Name") 
```

有关IIF 功能如何工作的说明，请参见[此处](http://msdn.microsoft.com/en-gb/library/hh213574.aspx)

从链接中您可以看到它采用以下格式，其中使用逗号而不是“Then”或“Else”：

`IIF ( boolean_expression, true_value, false_value )`

所以要分解表达式：

```
IIF(Fields!chart.Value="110300" AND Fields!division.Value="100",
    "Intercompany AP - USA",
     IIF(Fields!chart.Value="110300" AND Fields!division.Value="200",
        "Intercompany AP - RUS",
        "Default Chart Name"
     )
) 
```

# java - 二分查找发现索引不正确

> ID：15166453
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:36:38.227
> 
> 标签：java, binary-search

我有这个代码进行二进制搜索。

```
public class BinarySearch {

private static int location;
private static int a = 14;
static int[] numbers = new int[]{3, 6, 7, 11, 14, 16, 20, 45, 68, 79};

public static int B_Search(int[] sortedArray, int key) {
    int lowB = 0;
    int upB = sortedArray.length;
    int mid;
    while (lowB < upB) {
        mid = (lowB + upB) / 2;

        if (key < sortedArray[mid]) {
            upB = mid - 1;
        } else if (key > sortedArray[mid]) {
            lowB = mid + 1;
        } else {
            return mid;
        }
    }
    return -1;
}

public static void main(String[] args) {
    BinarySearch bs = new BinarySearch();
   location= bs.B_Search(numbers, a);
   if(location != -1){
       System.out.println("Find , at index of: "+ location);
   }
   else{
       System.out.println("Not found!");
   }
}
} 
```

输出：

a=14 未找到！！

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T20:37:21.253

> 输出：a=68 未找到！！为什么？

二分搜索算法依赖于被排序的输入。它假设如果它找到一个大于目标值的值，这意味着它需要在输入中更早地查看（反之亦然）。

您的数组未排序：

```
static int[] numbers = new int[]{6, 3, 7, 19, 25, 8, 14, 68, 20, 48, 79}; 
```

开始排序，应该没问题。

# django - 未定义 Django 自定义管理 url

> ID：15166454
> 
> 赞同：4
> 
> 时间：2013-03-01T20:36:40.410
> 
> 标签：django, django-admin, django-urls

我正在尝试将两个 URL 添加到模型管理员。

```
class JobTitleAdmin(admin.ModelAdmin):
    inlines = [OccupationTagInline, ]
    model = JobTitle
    search_fields = ['title',]
    list_filter = ['status',]
    actions =['add_to_job_category', 'move_to_job_category' ]

    def add_to_job_category_view(self, request):

        return render_to_response(
            'admin/job_title/select_job_category.html',
            {
                'action': 'add',
                'featured_occupations': Occupation.objects.filter(featured=True),
                'title_ids': array(request.GET['foo'])
                },
            context_instance=RequestContext(request)
            )

    def get_urls(self):
        urls = super(JobTitleAdmin, self).get_urls()
        custom_urls = patterns('',
            url(r'^add_to_job_category/$', self.admin_site.admin_view(self.add_to_job_category_view), name='admin_jobtitle_add_to_cat',),
            url(r'^move_to_job_category/$', self.admin_site.admin_view(self.move_to_job_category_view), name='admin_jobtitle_move_to_cat',)
    )

        return custom_urls + urls 
```

为简单起见，我省略了视图代码。

这两种模式没有定义，因为如果我尝试访问它们，我会得到 404，并且它们没有在 django debud 404 页面中列出。然而 get_urls 方法被正确调用（实际上是两次，不知道为什么）。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:37:05.357

我已经成功地做到了，但是我复制了`ModelAdmin.get_urls` `wrap`装饰器。也许尝试：

```
from functools import update_wrapper
class JobTitleAdmin(admin.ModelAdmin):
    inlines = [OccupationTagInline, ]
    model = JobTitle
    search_fields = ['title',]
    list_filter = ['status',]
    actions =['add_to_job_category', 'move_to_job_category' ]

    def add_to_job_category_view(self, request):

        return render_to_response(
            'admin/job_title/select_job_category.html',
            {
                'action': 'add',
                'featured_occupations': Occupation.objects.filter(featured=True),
                'title_ids': array(request.GET['foo'])
                },
            context_instance=RequestContext(request)
            )

    def get_urls(self):
        urls = super(JobTitleAdmin, self).get_urls()

        def wrap(view):
            def wrapper(*args, **kwargs):
                return self.admin_site.admin_view(view)(*args, **kwargs)
            return update_wrapper(wrapper, view)

        custom_urls = patterns('',
            url(r'^add_to_job_category/$',
                 wrap(self.add_to_job_category_view),
                 name='admin_jobtitle_add_to_cat',),
            url(r'^move_to_job_category/$',
                 wrap(self.move_to_job_category_view),
                 name='admin_jobtitle_move_to_cat',)
        )

        return custom_urls + urls 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:43:33.793

从您的代码中，您似乎正在尝试向您的类添加一些[操作中间视图](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/#actions-as-modeladmin-methods)`ModelAdmin`。

这是通过将函数名称放入`actions`属性中来实现的。如果您只是添加自定义操作，则无需添加自定义 url。您的示例可以这样修改：

```
class JobTitleAdmin(admin.ModelAdmin):
    inlines = [OccupationTagInline, ]
    model = JobTitle
    search_fields = ['title',]
    list_filter = ['status',]
    actions =['add_to_job_category', 'move_to_job_category' ]

    def add_to_job_category(self, request, queryset):

        return render_to_response(
            'admin/job_title/select_job_category.html',
            {
                'action': 'add',
                'featured_occupations': Occupation.objects.filter(featured=True),
                'title_ids': array(request.GET['foo'])  # <-- this would probably be changed to use `queryset` function argument
                },
            context_instance=RequestContext(request)
            )
    add_to_job_category.short_description = "Add to job category" 
```

该类`ModelAdmin`将知道如何调用您的自定义函数并将操作添加到操作下拉列表中。中间响应视图`add_to_job_category`需要知道如何从操作中获取输入以确定选择了哪些项目。

如果您真的想添加自定义 url，那么您的`get_urls()`功能似乎是正确的。请注意，返回的 url`get_urls`是相对于`admin/<app>/<model>`.

如果您的应用程序被命名`myapp`并且您的模型`JobTitle`，那么点击您的`add_to_job_category`视图的 url 将是：

```
http://some.site/admin/myapp/jobtitle/add_to_job_category/ 
```

# android - 使用 android:divider 和 android:showDividers 在 LinerLayout 中设置分隔符

> ID：15166470
> 
> 赞同：6
> 
> 时间：2013-03-01T20:37:47.497
> 
> 标签：android

我尝试在 3 个文本视图之间设置 2 个分隔符。我使用`android:divider`和`android:showDividers`。但是，没有显示垂直分隔线。我想知道，我错过了什么吗？

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal"
    android:divider="?android:attr/dividerVertical"
    android:dividerPadding="12dip"
    android:showDividers="middle" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:text="ABC" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:text="EFG" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:text="HIJ" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T20:47:00.537

LinearLayouts 中的分隔符仅在 API 11 中可用。我假设您正在测试较低的 API。有关更多信息，请参阅[文档](http://developer.android.com/reference/android/widget/LinearLayout.html#setDividerDrawable%28android.graphics.drawable.Drawable%29)。但是，您可以使用ABS 包中的[IcsLinearlayout来实现向后兼容性。](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/src/com/actionbarsherlock/internal/widget/IcsLinearLayout.java)

# hibernate - 休眠标准。限制和最大日期

> ID：15166474
> 
> 赞同：2
> 
> 时间：2013-03-01T20:38:17.253
> 
> 标签：hibernate

我有一个关于在 Hibernate 中使用限制的问题。

我必须创建条件，设置一些限制，然后选择一条日期字段最大值的记录：

```
Criteria query = session.createCriteria(Storage.class)
           query.add(Restrictions.eq(USER_ID, item.getUserId()));
           query.add(Restrictions.eq(ITEM_ID, item.getItemId()));
           query.add(Restrictions.lt(PURCHASE_DATE, item.getDate()));
           query.setProjection(Projections.max(PURCHASE_DATE));
           return query.uniqueResult(); 
```

我了解 Projections 不会返回给我最大日期的记录。我应该选择什么方法？

也许我可以在我的查询中添加顺序（日期字段的升序），然后选择第一个结果？

或者你能建议更优雅的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-19T11:48:41.963

在你的情况下，你可以去

**A) 使用 DetachedQuery。例如，**

```
DetachedCriteria maxQuery = DetachedCriteria.forClass( Storage.class );
maxQuery.add(Restrictions.eq(USER_ID, item.getUserId()));
maxQuery.add(Restrictions.eq(ITEM_ID, item.getItemId()));
maxQuery.add(Restrictions.lt(PURCHASE_DATE, item.getDate()));
maxQuery.setProjection( Projections.max( "PURCHASE_DATE" ) );

Criteria query = getSession().createCriteria( Storage.class );
query.add(Restrictions.eq(USER_ID, item.getUserId()));
query.add(Restrictions.eq(ITEM_ID, item.getItemId()));
query.add( Property.forName( "PURCHASE_DATE" ).eq( maxQuery ) ); 
```

在处理分离查询时，请牢记事务！

有关分离查询的更多详细信息，请参阅文档的第 15 章：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

**B) 直接用HQL 或SQL，为了做subselect。**

See chapter 14 of the Hibernate documentation for further details on HQL: [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# ios - 无法打开数据库 - iCloud / Core Data

> ID：15166482
> 
> 赞同：1
> 
> 时间：2013-03-01T20:38:52.557
> 
> 标签：ios, core-data, icloud, icloud-api, nspersistentstore

我正在尝试设置我的 Core Data 数据库以与 iCloud 一起使用，我了解基本知识并遵循了一个关于如何设置它的好教程，有人知道可能出了什么问题吗？

我收到无法连接数据库的错误：

`Unresolved error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256.)" UserInfo=0x1c5de2a0 {NSUnderlyingException=unable to open database file, NSSQLiteErrorDomain=14}, { NSSQLiteErrorDomain = 14; NSUnderlyingException = "unable to open database file"; }`

这是我返回持久存储的代码：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CategoryModel.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    //  iCloud support
    //
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{        
        NSString *iCloudEnabledAppID = @"app.ident.ifier";
        NSString *dataFileName = @"CategoryModel.sqlite";

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"TransactionLogs";

        NSFileManager *fileManager = [NSFileManager defaultManager];

        //  Create directory
        //
        NSURL *storeURL = [fileManager URLForUbiquityContainerIdentifier:nil];
        NSURL *dataFolder = [storeURL URLByAppendingPathComponent:iCloudDataDirectoryName];
        NSURL *dataFile = [dataFolder URLByAppendingPathComponent:dataFileName];

        BOOL isDirectory = YES;
        NSError *directoryError;

        if (![fileManager fileExistsAtPath:dataFolder.path isDirectory:&isDirectory]) {

            if (![fileManager createDirectoryAtURL:dataFolder
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&directoryError]) {
                NSLog(@"Create Directory Error: %@, %@", directoryError, directoryError.userInfo);
            }

        }

        NSLog(@"Data file: %@", dataFile.path);

        //  Set persistent store coordinator
        //
        NSError *pscError;

        NSLog(@"Store URL path: %@", storeURL.path);

        NSDictionary *options = @{ NSPersistentStoreUbiquitousContentNameKey : iCloudEnabledAppID,
                                   NSPersistentStoreUbiquitousContentURLKey : storeURL,
                                   NSMigratePersistentStoresAutomaticallyOption : @YES,
                                   NSInferMappingModelAutomaticallyOption : @YES};

        id result = [__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                               configuration:nil
                                                                         URL:storeURL
                                                                     options:options
                                                                       error:&pscError];

        if (!result) {
            NSLog(@"Unresolved error: %@, %@", pscError, pscError.userInfo);
        }

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(iCloudChangesImported:)
                                                     name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                                   object:nil];
    });

    return __persistentStoreCoordinator;
} 
```

***编辑***

这是我的 managedObjectModel 方法（CategoryModel 是 .xcdatamodeld 的名称）：

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"CategoryModel" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 
```

***编辑 2***

用日志编辑：

```
2013-03-01 22:33:37.658 Clueless[1268:3e07] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/.baseline/current.nosync/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.meta
Confused by: baseline.meta
2013-03-01 22:33:37.720 Clueless[1268:4d07] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE
Confused by: mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE
2013-03-01 22:33:37.731 Clueless[1268:4d07] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=
Confused by: kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=
2013-03-01 22:33:37.792 Clueless[1268:4903] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/.baseline/current.nosync/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.gcmodel
Confused by: baseline.gcmodel
2013-03-01 22:33:37.800 Clueless[1268:4903] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/.baseline/current.nosync/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.model
Confused by: baseline.model
2013-03-01 22:33:37.811 Clueless[1268:3e07] +[PFUbiquityLocation createUbiquityLocationForPath:withUbiquityRootPath:](821): CoreData: Ubiquity:  Unable to continue parse components of URL: /var/mobile/Library/Mobile Documents/app~ident~ifier/TransactionLogs/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip
Confused by: baseline.zip
2013-03-01 22:33:47.673 Clueless[1268:1103] Unresolved error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256.)" UserInfo=0x1e546570 {NSUnderlyingException=unable to open database file, NSSQLiteErrorDomain=14}, {
    NSSQLiteErrorDomain = 14;
    NSUnderlyingException = "unable to open database file";
} 
```

***编辑 3***

当我尝试从 developer.icloud.com 下载文件时，它不会下载，并且会向 Safari 控制台发送一条消息`Failed to load resource: the server responded with a status of 409 (Conflict)`

上传文件时，Safari 控制台会发出几个警告：

```
CloudOS:  Push notification has unknown topic: {"originating-dspsrid":"208020489","apsTopic":"5a5fc3a1fea1dfe3770aab71bc46d0aa8a4dad41","originating-peer":"4cfc48c6-a790-457c-6d80-02757cf88f07","originating-request":"ed063598-1501-40d7-aa53-0e305a2f0837"}
javascript-packed.js:132
Documents:  Local Rank has changed, updating the current visible Column.
    javascript-packed.js:132
CloudOS:  Push notification has unknown topic: {"originating-dspsrid":"208020489","apsTopic":"5a5fc3a1fea1dfe3770aab71bc46d0aa8a4dad41","originating-peer":"4cfc48c6-a790-457c-6d80-02757cf88f07","originating-request":"94622d8f-fe4d-4eb2-80b8-62f6fd6342cc"}
    javascript-packed.js:132
CloudOS:  Push notification has unknown topic: {"originating-dspsrid":"208020489","apsTopic":"5a5fc3a1fea1dfe3770aab71bc46d0aa8a4dad41","originating-peer":"4cfc48c6-a790-457c-6d80-02757cf88f07","originating-request":"5c73e9c2-952f-4452-b6a2-b86e7902c867"}
    javascript-packed.js:132
Documents:  Local Rank has changed, updating the current visible Column. 
```

***编辑[现在是什么数字]***

记录持久存储时，`NSLog(@"MOC: %@", self.managedObjectContext.persistentStoreCoordinator.persistentStores);`

我得到以下输出：

```
2013-03-02 13:57:38.241 Clueless[2221:907] MOC: (
    "<NSSQLCore: 0x1c5da560> (URL: file://localhost/var/mobile/Applications/[some long number which looks like it should be private]/Documents/CategoryModel.sqlite)"
) 
```

所以我猜测错误`unable to connect to database`被调用是因为只有本地持久存储存在

***新错误***

```
Safe save failed for file, error: Error Domain=NSCocoaErrorDomain Code=512 "The file upload timed out." UserInfo=0x1c5cb220 {NSLocalizedDescription=The file upload timed out.} 
```

***编辑 - 目录错误***

我认为问题在于未创建目录。

以下日志表明在尝试传输文件时目录不存在。我想我应该能够解决这个问题，iCloud 可以工作：

```
Had trouble moving baseline from: file://localhost/private/var/mobile/Library/Mobile%20Documents/app/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE to: file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip
Error: Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn’t be completed. (Cocoa error 512.)" UserInfo=0x1f5a0bd0 {NSFileNewItemLocationKey=file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE, NSFileOriginalItemLocationKey=file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip, NSUnderlyingError=0x1f591e20 "The operation couldn’t be completed. (Cocoa error 260.)", NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip}
userInfo: {
    NSFileNewItemLocationKey = "file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE";
    NSFileOriginalItemLocationKey = "file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/baseline.zip";
    NSUnderlyingError = "Error Domain=NSCocoaErrorDomain Code=260 \"The operation couldn\U2019t be completed. (Cocoa error 260.)\" UserInfo=0x1f5505b0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE, NSFilePath=/private/var/mobile/Library/Mobile Documents/app~ident~ifier/Data.nosync/.baseline/app~ident~ifier/kySK3XJnAwbVqyiIiWGh3OEDvd2hq7_TYF6hZncfq24=/mobile.0543DD0C-48E2-5061-A42B-716AC22C02AE, NSUnderlyingError=0x1f5c38c0 \"The operation couldn\U2019t be completed. No such file or directory\"}";
} 
```

# c# - 如何将文件的内容添加到listview C#

> ID：15166490
> 
> 赞同：1
> 
> 时间：2013-03-01T20:39:26.893
> 
> 标签：c#, .net, c#-4.0, listview, windows-forms-designer

文件名为contacts.txt。它的内容是：

```
line 1: Adam
line 2: adam@gmail.com
line 3: Kris
line 4: kris@gmail.com 
```

我有一个名为`listview1`. 它有 2 列，`ColumnHeader1`&`ColumnHeader2`

我想将文件中的名称添加到`ColumnHeader1`并通过电子邮件发送到`ColumnHeader2`，即，例如：

```
Adam    adam@gmail.com
Kris    kris@gmail.com 
```

我怎么做？

另外，我希望每次加载表单时都会自动发生这种情况。

先感谢您。

试过这个。

```
using (StreamReader sr = new StreamReader(@"C:\Contacts.txt"))
{
    while (sr.EndOfStream)
    {
        ListViewItem lvi = new ListViewItem(sr.ReadLine());
        lvi.SubItems.Add(sr.ReadLine());
        listView1.Items.Add(lvi);
        continue;
    }
    sr.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:06:11.427

把`continue`话说出来。这不应该是必要的。

尝试这样的事情：

```
using (StreamReader sr = new StreamReader(@"C:\Contacts.txt"))
{
  while (-1 < sr.Peek())
  {
    try
    {
      string name = sr.ReadLine();
      string email = sr.ReadLine(); 
      var lvi = new ListViewItem(name);
      lvi.SubItems.Add(email);
      listView1.Items.Add(lvi);
    } catch (Exception) { }
  }
  sr.Close();
} 
```

以防`try/catch`万一您的文件中没有偶数个条目。

# mysql - mysql查询的表单

> ID：15166493
> 
> 赞同：-5
> 
> 时间：2013-03-01T20:39:42.370
> 
> 标签：mysql

伙计们，我需要一个带有 textarea(name size) 的表单到 mysqli_query $ebur

Soory，我的英语不好:(

```
<?php
$con=mysqli_connect("ipaddress","user","passw","account");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Falha ao receber moedas, informa o administrador com o codigo 445ebmds. " . mysqli_connect_error();
  }

mysqli_query($con,"UPDATE `account` SET `coins`='2000' WHERE ($ebur)");

mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:52:50.223

像这样的东西：

mi_page.php

```
 <?php

    if(isset($_POST['ebur']))
    {
        $ebur = mysql_real_escape_string($_POST['ebur']);
    $con=mysqli_connect("ipaddress","user","passw","account");
    // Check connection
    if (mysqli_connect_errno())
      {
      echo "Falha ao receber moedas, informa o administrador com o codigo 445ebmds. " . mysqli_connect_error();
      }

    mysqli_query($con,"UPDATE account SET coins='2000' WHERE mi_field_on_the_table_account = '$ebur'");

    mysqli_close($con);
    }
    ?>

    <form method="post" action ="mi_page.php">
    <textarea rows="4" cols="50" id="ebur" name="ebur">

    </textarea>
            <input type="submit" value="Enviar" />
    </form> 
```

都在同一个文件中。

来自智利的 Saludos ;)

# ios - Cocos2d 中带有声音的 EXC_BAD_ACCESS

> ID：15166495
> 
> 赞同：0
> 
> 时间：2013-03-01T20:39:49.657
> 
> 标签：ios, objective-c, cocos2d-iphone

（在继续之前，我想说我在 VMWare 下的 Mac OSX 上开发，所以如果有人知道这是否可能是 VM 问题，请无论如何回答）

我正在学习 cocos2d 的一个简单教程，然后我就听到了声音

这是我用于音频的代码

进口：

```
// Import the interfaces
#import "HelloWorldLayer.h"
#import "SimpleAudioEngine.h"

// Needed to obtain the Navigation Controller
#import "AppDelegate.h" 
```

初始化方法：

```
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) )
{
    [[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"Field1.mp3" loop:YES];

    CCMenuItemImage *uno = [CCMenuItemImage itemWithNormalImage:@"vblue.png" selectedImage:@"vblue.png" target:self selector:@selector(uno)];
    uno.position = ccp(-150,0);
    CCMenuItemImage *due = [CCMenuItemImage itemWithNormalImage:@"vgreen.png" selectedImage:@"vgreen.png" target:self selector:@selector(uno)];
   due.position = ccp(-50,0);

    CCMenuItemImage *start = [CCMenuItemImage itemWithNormalImage:@"play.png" selectedImage:@"play.png" target:self selector:@selector(uno)];
    start.position = ccp(150,0);
    CCMenuItemImage *stop = [CCMenuItemImage itemWithNormalImage:@"pausa.png" selectedImage:@"pausa.png" target:self selector:@selector(uno)];
    stop.position = ccp(50,0);

    CCMenu *menu = [CCMenu menuWithItems:uno,due,start,stop, nil];
    [self addChild:menu];

}
return self;
} 
```

有问题的行是

```
[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"Field1.mp3" loop:YES]; 
```

由于 Xcode 报告了音频错误并且没有该行，所以游戏可以正常工作。

编译器输出：

```
<AudioControl> Error '!obj' trying to fetch default input device's sample rate
2013-03-01 12:29:09.101 Tutorial10[374:4803]  

<AudioControl> Error getting audio     input device sample rate: '!obj'2013-03-01 12:29:09.102   Tutorial10[374:4803]  

<AudioControl> AQMEIOManager::FindIOUnit: error 'NoHW'
2013-03-01 12:29:09.104 Tutorial10[374:1b03] 
<0xb0115000> AQMEIOManager::FindIOUnit: error 'NoHW'
(lldb) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:15:31.533

经过一番挖掘，我看到其他人也有同样的问题。他们的问题是他们的系统上没有安装音频驱动程序，因此根本没有播放声音，并且他们收到了与您相同的错误。

[http://www.cocos2d-iphone.org/forum/topic/13970](http://www.cocos2d-iphone.org/forum/topic/13970)

如果这也发生在实际设备上会很奇怪。除了您的 PC，您还在测试什么设备？

# cluster-computing - 我可以将文件从一个 tarball 直接提取到一个新的吗？

> ID：15166504
> 
> 赞同：1
> 
> 时间：2013-03-01T20:40:29.223
> 
> 标签：cluster-computing, pipe, tar, named-pipes, nfs

我正在开发一个高性能计算集群，出于我不会在这里解释的原因，他们喜欢我们通过 NFS 来回发送一个文件。我的作业使用从以前的作业生成的数据并依赖于工作目录的结构。我将所有以前的结果都保存在`data.tar`.

我需要从中提取`data.tar`将在下一个作业中使用的目录，并将它们从登录节点发送到计算节点，如果可能的话，作为一个新的 tarball。有没有一种方法可以基本上将`tar -xvf dir1/dir1.1 dir3/dir3.1`输出流直接传输到新`tar -cvf`命令？

或者，我是否可以`/scratch`使用管道将第一次提取的结果直接传输到本地节点的目录，该管道将作为单个 I/O 活动并有效地充当跨 NFS 写入单个文件的行为？

提前致谢。让我知道我是否可以更清楚地了解我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:21:40.757

我在想你可以设置一个 tar 管道并通过 ssh 流式传输？

就像是：

> cat foobar.tar | ssh -C root@my.serv.er "(cd /mnt/user/scratch/ && tar xvf -)"

# php - 带有帧目标的元刷新

> ID：15166507
> 
> 赞同：1
> 
> 时间：2013-03-01T20:40:30.797
> 
> 标签：php, meta-tags, frames

我有一个非常基本的框架布局：index.html

```
<frameset rows="80,*" frameborder="1" border="5" framespacing="0">
    <frame name="topNav" src="top_nav.html">
    <frameset cols="220,*" frameborder="1" border="5" framespacing="0">
    <frame name="menu" src="menu_1.php" marginheight="0" marginwidth="0" scrolling="auto" noresize>
    <frame name="content" src="content.php" marginheight="0" marginwidth="0" scrolling="auto" noresize> 
</frameset>
</frameset> 
```

![在此处输入图像描述](../Images/b5e2268704f6490e527111642272bd94.png)

还有一个简单的登录脚本，它检查用户名和密码是否与数据库匹配等等

现在我想要它做的是如果信息正确，是自动重定向菜单栏，但我能做的就是重定向内容部分

```
// check to see if they match!
  if ($username==$dbusername&&$password==$dbpassoword)
  {
      $_SESSION['username']=$username;
      echo '<meta http-equiv="REFRESH" content="2 ; url=servers.php" target="menu">';
  }
  else 
      echo "<center>Incorrect Information!</center>" ; 
```

现在，如果我让用户点击`<a href>`标签，我可以轻松做到这一点

例如`<a href="servers.php" target="menu">click me</a>`

所以我想我可以简单地把它`target="menu"`放在我的`meta`标签中，但它所做的只是重定向内容页面。

所以我的问题是，我做错了什么，还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:48:47.813

我相信你不能用标题做到这一点。您可以在您的内容中输出常规 javascript。像这样的东西：

```
<script>
    parent.menu.location.href = "/some-url";
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:49:25.443

给你框架（菜单）一个id：然后像这样更改代码：

改变

```
echo '<meta http-equiv="REFRESH" content="2 ; url=servers.php" target="menu">'; 
```

到

```
echo '<script>var iframe = document.getElementById("youriframe");iframe.src="servers.php";</script>'; 
```

# macos - NSView drawRect中的高效绘图

> ID：15166509
> 
> 赞同：1
> 
> 时间：2013-03-01T20:40:37.550
> 
> 标签：macos, cocoa, nsview, quartz-graphics, drawrect

我有一个正在编写的应用程序，我正在将其绘制到 NSView 中。在`mouseDown`我将位置保存在我的数据模型中，然后在`drawRect`视图的方法中在该位置绘制图形。一切正常。

在我的最后，我`mouseDown`打电话`[self setNeedsDisplay:YES];`强制重绘。唯一的问题`dirtyRect`是始终是视图的完整大小。我想尽可能地优化它，这样我就不会只为几个改变的像素重绘整个窗口。

所以现在我`[self drawRect:...]`改为调用并指定矩形。

现在`drawRect`我正在比较每个图形，我必须看看它是否属于dirtyRect。似乎我已经将绘图工作换成了边界检查工作。我不确定我是否提高或降低了效率。

***那么标准做法是什么？仅重绘视图中的所有内容并忽略dirtyRect是否很常见？*** 有没有一个很好的函数可以用来测试我的对象是否在`dirtyRect`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T21:40:47.737

`-drawRect:`如果你想在屏幕上画画，你永远不应该打电话给自己。让 AppKit 为您调用它。你应该做的是`-setNeedsDisplayInRect:`在你的`-mouseDown:`.

然后，在 中`-drawRect:`，只绘制包含在`dirtyRect`. 您可以使用`NSPointInRect()`. NSRect 还有很多其他有用的功能。请参阅[点函数](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/Reference/reference.html#//apple_ref/doc/uid/20000055-BCIDECDC)和[矩形函数](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/Reference/reference.html#//apple_ref/doc/uid/20000055-BCIJBHDI)的文档。

# javascript - 从 Chrome 扩展程序访问 Google Analytics window._gaq

> ID：15166510
> 
> 赞同：2
> 
> 时间：2013-03-01T20:40:45.647
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-analytics

我正在编写一个 chrome 扩展程序，主要用于学习目的，如果安装了 Google Analytics，它将向我显示 Google Analytics 跟踪 ID (UA-xxxxxx-x)。

我了解我需要使用 sendRequest 到页面中的内容脚本来检索信息，并且已成功实现该功能

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    // analytics request check GA and send back
    if(request.requestDetail == "analytics") {

    console.log(window._gaq);
    console.log(window._gaq._getAsyncTracker()._getAccount());

    // unknown response, send back nothing!
    } else {
        sendResponse({}); 
    }
}); 
```

侦听器正在接收请求，Google Analytics 肯定安装在我正在测试的网页上，window._gaq 和 window._gaq._getAsyncTracker()._getAccount() 都可以通过控制台访问并返回我所期望的。

**为什么通过监听器访问时 window._gaq 未定义？我应该如何从 chrome 扩展程序访问它？**

我知道这是出于安全原因，因此还尝试修改清单以包含以下内容，但仍然没有运气

```
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

我想第二个问题是：

是我试图以我使用的方式实现的可能吗（我已经设法在页面内容上使用正则表达式匹配获得了类似的结果，但想直接访问对象）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:54:08.600

这与内容安全策略无关。我认为您正在将内容脚本注入网页并尝试访问网页中的变量。由于内容脚本是在一个孤立的世界中执行的，因此您无法直接执行此操作。有关更多详细信息，请参阅[https://developer.chrome.com/trunk/extensions/content_scripts.html#execution-environment](https://developer.chrome.com/trunk/extensions/content_scripts.html#execution-environment)。

要访问网页中的变量（在您的情况下是必需的），您必须在页面中注入 <script> 标记。在该脚本中检索 Google Analytics ID，并与内容脚本 ( [https://developer.chrome.com/trunk/extensions/content_scripts.html#host-page-communication](https://developer.chrome.com/trunk/extensions/content_scripts.html#host-page-communication) ) 进行通信，以让内容脚本将其发送回您的扩展程序.

这是一个简单的例子（**免责声明：**只是为了说明如何做到这一点。我自己没有测试过。）：

```
window.addEventListener("message", function(event) {
 if (event.source != window)
  return;
if (event.data.type && (event.data.type == "FROM_PAGE")) {
  chrome.extension.sendMessage(...); // Send analytics ID (in event.data.googleAnalyticsId) to your extension here
}, false);
var script = document.createElement('script');
script.appendChild(document.createTextNode('window.postMessage({googleAnalyticsId: (window._gaq ? window._gaq._getAsyncTracker()._getAccount() : ""), type: "FROM_PAGE"}, "*");');
document.appendChild(script); 
```

另请注意， chrome.extension.onRequest/sendRequest 已被弃用很长时间（[https://developer.chrome.com/trunk/extensions/whats_new.html#20](https://developer.chrome.com/trunk/extensions/whats_new.html#20)）。您应该改用 onMessage/sendMessage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:01:22.490

尽管我对此并不感到特别自豪，但它确实有效；我认为如果不将另一个脚本注入页面，您就无法访问页面上的变量。

```
var find_ga_account = function(){
    var scripts = document.querySelectorAll('script:not([src])'),
        i = 0,
        match,
        ua = false;

    for( ; i < scripts.length; i++){
        match = scripts[i].textContent.match(/_setAccount['"]+,[\s]?['"]+(.*)['"]+/)
        if(match && match.length > 0){
            ua = match[1];
        }
    }
    return ua;
} 
```

# java - 共享会话实体

> ID：15166515
> 
> 赞同：1
> 
> 时间：2013-03-01T20:40:56.290
> 
> 标签：java, hibernate, web

假设我们有一个使用 Hibernate 的 Web 应用程序。我的问题是，如果来自不同用户的两个不同交易访问和操作同一个实体，会发生什么？例如，我们有一个名为“Student”的实体，它有一个字段“age”。现在，来自不同用户的两个不同事务，使用 Hibernate 会话获取该实体，例如：

```
Student student = session.load(1); // 1 is the id of some student 
```

然后一个用户操作年龄字段，例如：student.setAge(12); 第二个用户是否完全在另一笔交易中看到了这种变化？我的意思是，如果第二个用户在他自己的事务 student.getAge() 中调用，他会看到新值 - 12 吗？请注意，更改年龄属性的第一个用户尚未提交事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:47:34.187

这只是部分休眠问题。其他用户是否看到未提交的数据取决于您是否已将数据库连接的隔离级别更改为未提交读。您想要这样做的正当理由并不多，除非被覆盖，否则休眠会将其默认为已提交读。所以一般来说，不，其他用户在事务提交之前不会看到更改。

如果您降低了隔离级别，那么它归结为 SQL 实际发送到数据库的时间。这是基于休眠的刷新设置，在多层系统中可能有点难以预测。但基本上调用`setAge`不会将SQL发送到其他人可以看到的数据库。必须发生导致刷新的事情，这些事情又取决于配置。

进一步注意，如果第二个会话在更新提交之前加载了一个实体，即使第一个会话提交了更新，第二个会话也不会自动更新其内存中的实体，除非您显式调用它的刷新。例如，

```
Time 1: Session A loads Student 1
Time 2: Session B loads Student 1
Time 3: Session A sets new age and commits
Time 4: Session B gets Age, will still see old value
Time 5: Session B calls refresh on Student 1
Time 6: Session B gets Age, will see new value set in Session A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:51:35.080

请看这里：[休眠会话线程安全](https://stackoverflow.com/questions/3777794/is-hibernates-session-thread-safe)。我认为这与您所问的非常相似。基本上在多个线程中使用会话不是一个好主意。因此，假设您使用不同的会话，第二个用户将看不到更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:16:23.063

在这种情况下，Hibernate 擅长在多个线程中同时更新。

首先，在这种情况下不存在线程安全问题。因为每个事务都有自己的会话，每个会话将分别将其加载的对象保存在其所谓的一级缓存中。两个线程中的两个实例不会互相看到，

其次，当多个事务更新同一记录时，优化锁定机制将起作用。这是先到先得的模式。第一个提交的事务 secceeds，第二个提交的事务将失败并抛出异常。因为 hibernate 会在更新操作提交之前检查 versin 属性以查看版本是否是原始版本。

见[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html)

# c++ - strcmp 和复制的 char 数据的分段错误

> ID：15166518
> 
> 赞同：0
> 
> 时间：2013-03-01T20:41:05.020
> 
> 标签：c++

我正在处理一项任务，并且在以下代码中不断出现分段错误`main`，我们不允许更改：

```
char signal[61];

Seti t2A(data, rF, rA, rB); // call constructor

t2A.getMessage(signal);            // calling member functions
t2A.getRanges(&pA, &pB);

usrF = t2A.getFrequency( );

if(strcmp(signal, correct)) { // <-- this is where i get segmentation fault. 
```

类的实现`Seti`：

```
class Seti {
    char signal[61];
    int freq;
    int a, b;
public:
    Seti(const char [ ], int, int, int);
    Seti();
    int getFrequency( );
    void getRanges(int *, int *);
    void setRanges(int , int );
    void getMessage(char *);
    bool replaceChar(int , char );
    bool copyPrimes(char *);
    bool copyFibonacci(char *);
    int initCap( );
    friend Seti join(Seti, Seti);
}; 
```

并执行`getMessage`：

```
 void Seti::getMessage(char *pSignal) {
 strcpy (pSignal, signal);
 return;
 } 
```

为什么在 main 中的 if 语句之后我会收到分段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:57:25.880

从该代码中，`Seti::signal`可能未初始化，因此未正确以空值终止，并`strcpy`损坏内存，这会导致未定义的行为，幸运的是，这是段错误。

使用`strncpy`（记得`'\0'`自己在最后一个数组索引处添加终止字符）或`snprintf`代替`strcpy`, 也`strncmp`代替`strcmp`.

编辑：啊，`correct`根据您的评论，NULL 毕竟也是如此（而不是“NON-SEQUITOR”）。嗯，有你的问题。可能是您有两个具有该名称的变量而不是一个（常见的初学者错误）？

以上关于使用允许指定缓冲区大小的函数的建议仍然有效。

因评论而编辑：包装`strncpy`成这样的功能很有用，以避免错误：

```
char *strncpy0(char *dst, const char *src, size_t n) {
  dst[n-1] = 0;
  return strncpy(dst, src, n-1);
} 
```

# php - 使用 sleep() 长轮询 JQUERY 聊天

> ID：15166519
> 
> 赞同：0
> 
> 时间：2013-03-01T20:41:09.347
> 
> 标签：php, jquery, sql, ajax, long-polling

以下代码使网页加载大约 10 分钟，我不知道为什么！

```
function chatheartbeat(){
    include("config.php");
    $useradn = $_SESSION['displayname'];
    $query = "select * from chat where (userbdn = '".$useradn."' AND isread = 1) order by id ASC";
    $result = mysql_query($query , $link);
    $num_rows = mysql_num_rows($result);
    if ($num_rows >= 1) {
        $items = array();
        $i='1';
        while($chat = mysql_fetch_array($result)){
            $items[$i]['from']=$chat['useradn'];
            $items[$i]['msg']=$chat['msg'];
            $items[$i]['timee']=date("H:i" ,$chat['timee']);
            $i++;
        }
        $query = "update chat set isread = 0 where userbdn = '".$useradn."' and isread = 1";
        mysql_query($query , $link);
        header('Content-type: application/json');
        echo json_encode($items);
        exit;
    }else{
        sleep(2);
        chatheartbeat();
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:46:30.757

在第一次选择有一些结果之前，该函数永远不会返回。

我建议您在 n 次运行后返回（例如 5 次），即使没有结果。然后，客户端可以重新发出 ajax 调用以再次轮询。

此外，以递归方式执行此操作也不是一个好主意。我建议改为在 for 循环中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:44:23.260

您正在递归地调用您的函数，并且由于会话变量在函数调用之间没有改变，如果它`else`第一次进入该部分，它每次都会去那里，创建一个永无止境的循环。

顺便说一句，如果你想使用轮询，你应该在客户端（javascript）中设置一个计时器，而不是在服务器端使用递归函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T20:47:17.397

在执行任何长轮询技术时，您需要注意一些事项。

1.  您需要在一些预定义的时间段后退出。在服务器上等待直到您有响应的内容会导致执行超时。

2.  了解您的 SESSION 数据的情况。默认情况下，PHP 将使用基于文件的会话并在请求过程中锁定文件（除非您进行干预）

# c# - 如果引入了错误的文本，会中断循环吗？

> ID：15166524
> 
> 赞同：-2
> 
> 时间：2013-03-01T20:41:31.927
> 
> 标签：c#, text, cycle, break

如果引入了正确的文本，我需要找到一种方法来停止循环/循环，就好像多个任务正在运行一样。

有谁能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:44:49.933

如果您处于循环中，您可以使用[`break;`](http://msdn.microsoft.com/en-gb/library/adbctzc4.aspx).

```
for (int i = 0; i < someLength; i++) {
  if (someText == someotherText) {
    break;  
  }
} 
```

这只会跳出*当前*循环 - 也就是说，它“终止最近的封闭循环” - 请注意，所以如果你处于嵌套循环中，它将“落入”下一个循环并继续*该*循环。

# ms-access - 在 Access 中构建查询以处理时间

> ID：15166526
> 
> 赞同：1
> 
> 时间：2013-03-01T20:41:39.423
> 
> 标签：ms-access, time

这是我的第二篇文章，它是关于同一主题的，我开始使用 Access 一段时间，所以我需要你的帮助来构建一个包含一些变量的查询。

场景

我需要做一个查询来显示一个人在办公室里呆了多少时间，但我第一篇文章的不同之处在于我需要查看操作的详细信息。主要列表将在一个人进入办公室时创建一个项目，当一个人离开办公室时创建另一个项目，但存在一些变量 1 - 我有更多的一栋大楼 2 - 每栋大楼都有很多旋转门，我需要仅定义主厅 3 的闸机 - 有时我们遇到系统问题，系统无法创建入口/出口项目

## 以列表为例

## ID 全名 日期 时间 状态 闸机办公室

## 1 安德烈席尔瓦 02/25/2013 09:00 AM 在 03 SP

## 2 安德烈席尔瓦 02/25/2013 09:10 AM 在 05 SP

## 3 安德烈席尔瓦 2013 年 2 月 25 日下午 12:00 出 06 SP

## 4 安德烈席尔瓦 02/25/2013 12:10 PM Out 02 SP

## 5 安德烈席尔瓦 2013 年 2 月 25 日下午 14:00 在 02 SP

## 6 安德烈席尔瓦 02/25/2013 下午 14:10 在 05 SP

## 7 安德烈席尔瓦 02/25/2013 19:00 PM Out 06 SP

## 8 安德烈席尔瓦 02/25/2013 19:10 PM Out 02 SP

## 9 安德烈席尔瓦 02/26/2013 下午 14:00 在 03 BH

## 10 安德烈席尔瓦 2013 年 2 月 26 日下午 14:10 在 05 BH

## 11 安德烈席尔瓦 2013 年 2 月 26 日下午 23:55 出 06 BH

## 12 安德烈席尔瓦 2013 年 2 月 27 日上午 01:10 出局 03 BH

## 13 安德烈席尔瓦 02/28/2013 09:00 AM 在 03 RJ

## 14 安德烈席尔瓦 02/28/2013 09:10 AM 在 05 RJ

## 15 安德烈席尔瓦 2013 年 2 月 28 日下午 12:00 出 05 RJ

## 16 安德烈席尔瓦 2013 年 2 月 29 日上午 11:00 在 05 SP

## 17 安德烈席尔瓦 2013 年 2 月 29 日下午 17:10 出 06 SP

## 18 安德烈席尔瓦 02/29/2013 17:20 PM Out 03 SP

基于主列表，我需要使用这种格式创建一个查询

* * *

## 全名 日期 转闸时间 日期 转闸时间 办公室 总时间

## 安德烈席尔瓦 02/25/2013 03 09:00 AM 02/25/2013 02 12:10 PM SP 03:10

## 安德烈席尔瓦 02/25/2013 02 14:00 PM 02/25/2013 02 19:10 PM SP 05:10

## 安德烈席尔瓦 02/26/2013 03 14:00 PM 02/27/2013 03 01:00 AM BH 11:00

## 安德烈席尔瓦 02/28/2013 03 09:10 AM RJ Not found a record of out

## 安德烈席尔瓦 02/29/2013 03 17:20 PM SP 未找到记录

我需要查看同一办公室 02/03 闸机进出之间的间隔，当没有找到一项进出时，答案应该是 0。

我尝试使用 Access 的标准查询，例如交叉表或尝试使用 IFF 创建表达式，但没有成功。

非常感谢安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:59:32.520

这不是答案，但我没有时间，这个查询可以帮助你

```
SELECT 
  t1.FullName, 
  t1.Office, 
  t1.DateTime, 
  t1.status, 
  sum(IIf(isnull(t2.status),0,IIf(t2.status="In",1,-1))) AS deep_before, 
  sum(IIf(isnull(t2.status),0,IIf(t2.status="In",1,-1)))
    +IIf(t1.status="In",1,-1) AS deep_after
FROM Table1 AS t1 
  LEFT JOIN Table1 AS t2 ON (t1.FullName=t2.FullName) 
      AND (t1.Office=t2.Office) AND (t1.Datetime>t2.DateTime)
GROUP BY t1.FullName, t1.Office, t1.DateTime, t1.status; 
```

明天我可能会再次看到它

# facebook - facebook喜欢按钮ie7

> ID：15166527
> 
> 赞同：0
> 
> 时间：2013-03-01T20:41:43.570
> 
> 标签：facebook, button, internet-explorer-7, facebook-like

我通过标准方法向页面添加了一个 FB Like 按钮。它适用于所有浏览器，但在宽度缩小的 IE7 中除外。有什么解决办法。我进行了广泛的搜索，但所有解决方案都不起作用。你可以在这里看到一个例子：

[http://www.swirl-test.net/test.html](http://www.swirl-test.net/test.html)

可以查看页面源代码查看实现方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:54:56.787

最终解决此问题的问题在于，like 按钮是指向 Facebook 服务器的 iframe，因此您无法控制它的内容和样式（除了 Facebook 公开的控件）

# python - 当我的项目（Django）发生任何变化时如何自动运行测试？

> ID：15166532
> 
> 赞同：52
> 
> 时间：2013-03-01T20:42:01.773
> 
> 标签：python, django, unit-testing, testing, nose

目前，`python manage.py test`在我对 django 项目进行重大更改后，我每隔一段时间就会运行一次。每当我在项目中更改和保存文件时，是否可以自动运行这些测试？更早地检测错误会很有用（我知道 rails 在 rspec 中有类似的东西）。我正在使用鼻子和 django-nose。提前致谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-07-22T08:41:13.797

使用[进入](http://entrproject.org/)：

1.  $`brew install entr`
2.  $`find . -name '*.py' | entr python ./manage.py test`

* * *

或者，为了额外的功劳，将它与[ack](http://beyondgrep.com/)结合起来：

```
$ ack --python | entr python ./manage.py test 
```

* * *

如果您希望它甚至在添加新文件时找到它们：

```
$ until ack -f --python | entr -d python ./manage.py test; do sleep 1; done 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-12-13T09:38:35.670

***py.test 答案（也适用于鼻子）：***

```
pip install pytest-xdist
py.test -f # will watch all subfolders for changes, and rerun the tests 
```

由于 py.test 理解鼻子，这也适用于鼻子。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-12T05:53:14.267

我是一名 JavaScript 开发人员，所以我使用 JS 开发人员使用 Node.js 构建的工具在我的项目中实现相同的目标。这非常简单，但您还需要安装 nodeJS 才能使其正常工作。

我在项目根目录中创建了一个名为 gruntfile.js 的文件：

```
//gruntfile.js
module.exports = function(grunt) {

  grunt.initConfig({
    watch: {
      files: ['*.py'],
      tasks: ['shell']
    },
    shell: {
      test: {
        command: 'python main_test.py'
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-shell');

  grunt.registerTask('default', ['watch']);
}; 
```

它所做的基本上是监视该目录中具有 py 扩展名的任何文件，如果他们更改了它，则执行一个 shell 命令，在这种情况下是我的 python 测试（你可能想要更改它，我的测试名称是 main_test.py）。为了运行这个 grunt 脚本，你需要安装 Node.js，然后你的全局路径中就会有 npm。之后，您还需要安装一些节点模块。除了 grunt-cli 之外的所有这些模块都将存储在您当前的文件夹中，因此请确保您位于项目的根目录或您将 gruntfile.js 放入的任何文件夹中。然后运行以下命令。

```
npm install grunt-cli -g
npm install grunt
npm install grunt-contrib-watch
npm install grunt-shell 
```

不要担心尺寸，这些都是非常小的模块。现在您已经完成了所有设置，您可以简单地运行`grunt`它，它将开始监视您的 py 文件，当您保存它们时，它将运行您的测试。这可能不是运行 python 测试的最佳方式，但正如我所说，我是一名 JavaScript 开发人员，我认为 Grunt 提供了一种非常简单的方式来执行测试，即使是其他语言，所以我使用它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-05T09:05:04.083

我刚试过[`nose-watch`](https://github.com/lukaszb/nose-watch)，效果很好！安装插件并使用该`--with-watch`选项运行测试。

**更新**: :( 从 django-nose 的 manage.py 助手运行测试时，它似乎无法正常工作。

最终我选择使用支持 django 的[tdaemon](https://github.com/brunobord/tdaemon)，尽管对于成熟的项目可能还需要一些摆弄。

例如，这是我为 django 项目运行它的方式：

```
tdaemon -t django --custom-args=a_specific_app_to_test -d --ignore-dirs logs 
```

是将`--custom-args`测试集中在特定的应用程序上（与您所做的相同）`python manage.py test a_specific_app_to_test`

参数是启用调试日志记录，`-d`它打印哪个文件更改触发了运行。

这`--ignore-dirs`是必要的，因为我的测试写入了日志（这本身就是一个问题！）并`tdaemon`进入了无限循环。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-24T04:14:26.787

我发现这里的另一个 Javascript 开发人员`nodemon`( [https://github.com/remy/nodemon](https://github.com/remy/nodemon) ) 工作得很好。默认情况下，它会监视`*.js`文件，但可以使用`--ext`标志进行配置。要使用它，请执行以下操作：

```
npm install -g nodemon
cd /your/project/dir/
nodemon --ext py --exec "python manage.py test" 
```

现在，每当`*.py`文件更改时，它都会重新运行您的命令。它甚至可以找到新文件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-28T04:58:33.597

我用过watchr，类似于[Watchr](http://criticallog.thornet.net/2011/03/08/autotesting-with-watchr-growl-and-phpunit/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-09T00:49:15.310

我使用 gulp 做到了这一点。安装 gulp-shell：

```
npm install gulp-shell --save-dev 
```

在 gulpfile.js 中：

```
var shell = require('gulp-shell')

gulp.task('run-tests', shell.task([
   'python3 manage.py test']))

gulp.task('watch', function(){
   gulp.watch(['./your-project-name/**/*.html', './your-project-name/**/*.py'], ['run-tests']);
});

gulp.task('default',['run-tests','watch']); 
```

它会在任何保存到任何 .py 或 .html 文件的更改时运行测试！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-07T03:12:46.303

您可以在 Django之上使用[Django Supervisor 。](https://github.com/rfk/django-supervisor)这将避免使用 CI 工具（这在任何情况下都可能有用，这不会使其他响应无效 - 可能只是补充）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-29T01:29:19.547

如果你使用 git 控制代码，另一种方法是使用 git hook [pre-commit](https://github.com/git/git/blob/master/templates/hooks--pre-commit.sample)

可能是错误`remote: fatal: Not a git repository: '.'`，请查看此帖子[https://stackoverflow.com/a/4100577/7007942](https://stackoverflow.com/a/4100577/7007942)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-29T09:12:52.410

我发现最简单的方法是按照[这篇文章](https://stackoverflow.com/a/29514474/733601)的推荐使用 gulp 。请注意`gulp-shell`（由其他答案推荐）实际上已[被 gulp 列入黑名单](https://github.com/gulpjs/plugins/blob/master/src/blackList.json)，但幸运的是您甚至不需要插件。试试这个：

```
// gulpfile.js

const { watch } = require('gulp')
var exec = require('child_process').exec

function test (cb) {
  exec('python manage.py test', function (err, stdout, stderr) {
    console.log(stdout)
    console.log(stderr)
    cb(err)
  })
}

exports.default = function () {
  watch('./**/*.py', test)
} 
```

过去，我尝试过其他答案中建议的许多选项。这个比较无痛。如果您对 JavaScript 有所了解，这将很有帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-04-29T12:52:54.230

我建议设置[django-nose](https://github.com/django-nose/django-nose)和[sniffer](https://pypi.python.org/pypi/sniffer)。它很容易设置并且效果很好。[类似于这个scent.py](https://stackoverflow.com/a/19586098/8207)的东西是我唯一需要的定制。然后你就可以运行了`sniffer -x myapp.tests`。

Nose 附带了一些其他的好东西，它们也使测试更易于使用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-20T11:36:43.533

`./manage.py test`我编写了一个 Gulp 任务，以便在更改或删除任何指定的 Python 文件时自动运行。为此，您将需要 Node。

首先，安装 Gulp：

```
yarn add -D gulp@next 
```

然后使用以下内容`gulpfile.js`并进行任何必要的调整：

```
const { exec } = require('child_process');
const gulp = require('gulp');

const runDjangoTests = (done) => {
  const task = exec('./manage.py test --keepdb', {
    shell: '/bin/bash', // Accept SIGTERM signal. Doesn't work with /bin/sh
  });

  task.stdout.pipe(process.stdout);
  task.stderr.pipe(process.stderr);

  task.on('exit', () => {
    done();
  });

  return task;
};

gulp.task('test', runDjangoTests);

gulp.task('watch', (done) => {
  let activeTask;
  const watcher = gulp.watch('**/*.py', {
    // Ignore whatever directories you need to
    ignored: ['.venv/*', 'node_modules'],
  });

  const runTask = (message) => {
    if (activeTask) {
      activeTask.kill();
      console.log('\n');
    }

    console.log(message);
    activeTask = runDjangoTests(done);
  };

  watcher.on('change', (path) => {
    runTask(`File ${path} was changed. Running tests:`);
  });

  watcher.on('unlink', (path) => {
    runTask(`File ${path} was removed. Running tests:`);
  });
}); 
```

然后只需运行`node node_modules/gulp/bin/gulp.js watch`即可运行任务:)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-14T10:05:22.243

[https://pycrunch.com/](https://pycrunch.com/)

关键功能之一 - 仅对文件更改运行受影响的测试。可作为 PyCharm 的插件使用

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-01T01:38:40.040

On ubuntu this script works, after installing `inotifywait` (`sudo apt install inotify-tools`):

```
inotifywait -qrm -e close_write * |
while read -r filename event; do
  python manage.py test accord
done 
```

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2013-03-01T20:44:17.903

你需要一个持续集成服务器，比如[Jenkins](http://jenkins-ci.org/)。

# vba - 从 Access VBA 引用 Solver32.dll

> ID：15166537
> 
> 赞同：4
> 
> 时间：2013-03-01T20:42:23.243
> 
> 标签：vba, dll, reference, solver

我有一个 Access 数据库，它将数据导出到程序生成的 excel 模板中，以实现可见性、更复杂的计算/可视化，最重要的是，它允许用户更多地使用数据。

这个模板需要做的基本事情之一是执行求解程序。求解器在访问中的任何标准参考库中都不存在（据我所知）。我对这方面有点陌生，但我环顾网络，发现 Solver32.dll 在哪里，我将参考指向它，它不会接受它。又看了看，发现我可能需要用 regsvr32 注册它，因为它不在 system32 目录中，我试过了，但没有用。

这可能是由于我遇到了一些管理员级别的访问问题（工作计算机……叹息），我正在尝试对这些问题进行排序，但我觉得这无法解决问题。

无论如何，提问时间：

1) 我是否只需要管理员权限来注册 Solver32.dll，然后我的参考资料会很容易工作吗？

2）如果没有，还有其他方法可以引用求解器库吗？

3）如果没有，或者我无法获得注册solver32.dll的权利（可能，我的IT部门可能很吝啬），有没有办法将插件求解器代码打开到我正在使用的excel表中并让它运行那里？因为如果有代码就超级简单：

...........

```
AddIns("Solver Add-In").Installed = True

solveradd cellref:="$D$6", Relation:=1, FormulaText:="1"

solveradd cellref:="$D$6", Relation:=3, FormulaText:="0"

SolverOk SetCell:="$F$6", MaxMinVal:=2, ValueOf:=0, ByChange:="$B$6:$D$6", _
        Engine:=1, EngineDesc:="GRG Nonlinear"
SolverSolve 
```

…………

无论如何，一天中的大部分时间都在寻找解决方案。无助于 MS 在它的无限智慧中选择将此程序命名为 Access，这在谷歌搜索（讽刺）时确实有帮助。

编辑：在评论中回答一些问题

版本：Access 2010

错误：当我尝试从 Access VBA IDE 引用 dll 时，我收到此错误“无法添加对指定文件的引用”

当我尝试运行 regsvre.exe 时，我收到此错误“模块 'C:\ProgramFiles.............\Solver32.dll”已加载但未找到入口点 DllRegisterServer . 确保“C:\ProgramFiles.........\Solver32.dll”是有效的 DLL 或 OCX 文件，然后重试。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:06:02.647

好的，我想出了一个胶带解决方案。根据您所在位置的安全设置，这可能有效，也可能无效。我什至不确定这在我所在的位置会有多好，但现在可以了。天知道当我部署这个时会发生什么

基本上，我将宏注入 Excel 工作簿（来自 Access）以运行 Solver，因为我无法让 solver32.dll 在 Access 中本地工作。这是代码

```
Private Sub InjectSolverMacro(ByRef xlbook As Excel.Workbook, ByRef xlapp As Excel.Application)

Dim xlVBProj As VBProject
Dim xlModule As VBIDE.VBComponent
Dim sCode As String

xlbook.Worksheets(1).Select

AddIns("Solver Add-In").Installed = True

Set xlVBProj = xlbook.VBProject
xlVBProj.References.AddFromFile ("C:\Program Files\Microsoft Office\Office14\Library\SOLVER\Solver.XLAM")

Set xlModule = xlbook.VBProject.VBComponents.Add(vbext_ct_StdModule)

sCode = "Private sub SolverMacro()" & vbCr _
        & "SolverAdd CellRef:=""$D$6"", Relation:=1, FormulaText:=""1"" " & vbCr _
        & "SolverAdd CellRef:=""$D$6"", Relation:=3, FormulaText:=""0"" " & vbCr _
        & "SolverOk SetCell:=""$F$6"", MaxMinVal:=2, ValueOf:=0, ByChange:=""$B$6:$D$6"", Engine:=1, EngineDesc:=""GRG Nonlinear"" " & vbCr _
        & "SolverSolve" & vbCr _
        & "End Sub"

xlModule.CodeModule.AddFromString (sCode)

End Sub 
```

起初我在这里的参考指向 Solver32.dll。这没有用。然后我看到了[这个帖子](http://www.excelforum.com/excel-programming-vba-macros/799561-vba-and-solver-addin-compile-error.html)，有人说你必须指向 Solver.XLA。天知道为什么会这样。但它有效。

其他几个注意事项。您需要在 Access 中引用 Microsoft Visual Basic for Applications Extensibility 5.3 库来执行此操作。然后，您需要转到 Excel 中的信任中心宏设置（文件->选项->信任中心->信任中心设置->宏设置）并选择“信任对 VBA 项目对象模型的访问”。这将允许您注入代码。这也是我部署它时可能无法正常工作的地方。我的公司可能不会非常热衷于让我的所有用户都禁用此安全性。

但它有效。

# highcharts - 使用 getjson 检索系列名称和数据

> ID：15166541
> 
> 赞同：0
> 
> 时间：2013-03-01T20:42:54.977
> 
> 标签：highcharts

我正在尝试从 JSON 格式的文件中检索此系列名称和数据

`[{"name":"gfs00","data":[[1359676800000,30],[1359687600000,32]]}, {"name":"gfs06","data":[[1359676800000,28],[1359687600000,29]]}]`

这是highchart代码：

```
var data_temp;

$.getJSON('dati/performance_gfs/precipitazioni/pioggia_live_data.php',  
             { run: runs_gfs} ,function(data_temp){
  for (var i = 0; i <data_temp.length ;i++){
    chart.addSeries({
        data:data_temp,
    });
  }  
});

$(document).ready(function() {
  chart = new Highcharts.Chart({
    chart: {
      renderTo: 'container_temperatura_windchill_heatindex',
      defaultSeriesType: 'line',

      zoomType: 'x',      
    },

    title: {
      text: 'Ensemble'
    },

    xAxis: {
      type: 'datetime'
    },

    yAxis: [{ // Primary yAxis
      id:0, 
      labels: {
        formatter: function() {
          return this.value +'°C';
        },
        style: {
          color: '#89A54E'
        }
      },
      title: {
        text: 'Temperature',
        style: {
          color: '#89A54E'
        }
      }
    }],

    plotOptions: {
      line: {
        lineWidth: 1,
        states: {
          hover: {
            lineWidth: 2
          }
        },
        marker: {
          enabled: false,
          states: {
            hover: {
              enabled: true,
              symbol: 'circle',
              radius: 5,
              lineWidth: 1
            }
          }
        },
        pointInterval: 24 * 3600000, // one hour
        pointStart: Date.UTC(2012, 9, 6, 0, 0, 0)
      }
    },

    tooltip: {
      formatter: function() {
        return '<b>'+ this.series.name +'</b><br/>'+
        Highcharts.dateFormat('%d-%m-%Y %H:%M', this.x)+'<br/>'+
        this.y;
      }
    },

    series: []              
  });
}); 

} 
```

可以看出，我不知道如何从 JSON 文件中分配系列名称和数据，这是正确的，我需要的是[http://jsfiddle.net/vXdxv/1/](http://jsfiddle.net/vXdxv/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:06:20.207

尝试以下操作：

```
for (var i = 0; i <data_temp.length ;i++){
    chart.addSeries(data_temp[i], false);
});
chart.redraw(); 
```

# javascript - javascript彩票游戏使用随机数我的逻辑有什么问题

> ID：15166552
> 
> 赞同：1
> 
> 时间：2013-03-01T20:43:28.780
> 
> 标签：javascript, loops, while-loop, do-while

一个简单的直接游戏用户输入 6 个数字并单击按钮播放，如果所有 6 个数字都匹配他们中奖，我已经设置了循环，以便它不断生成随机数直到用户获胜，然后通知他们循环数它需要获得中奖号码。我的逻辑问题是，即使匹配一个数字，循环也会终止，我需要它继续运行，直到所有数字都匹配。这是代码，请帮忙，以便我可以倾斜:)

```
 <html>
 <head>
 <title>Lottery Game</title>
 <SCRIPT LANGUAGE="javascript">

 function genNums(){

 var counter = 0;

    do{

    var num1 = Math.round(59 * Math.random())+1
    var resultnum1 = document.lottery.Rball1.value = num1

    var num2 = Math.round(59 * Math.random())+1
    var resultnum2 =document.lottery.Rball2.value = num2

    var num3 = Math.round(59 * Math.random())+1
    var resultnum3 =document.lottery.Rball3.value = num3

    var num4 = Math.round(59 * Math.random())+1
    var resultnum4 =document.lottery.Rball4.value = num4

    var num5 = Math.round(59 * Math.random())+1
    var resultnum5 =document.lottery.Rball5.value = num5

    var num6 = Math.round(59 * Math.random())+1
    var resultnum6 =document.lottery.Rball6.value = num6

    var enterednum1 = document.lottery.ball1.value;
    var enterednum2 = document.lottery.ball2.value;
    var enterednum3 = document.lottery.ball3.value;
    var enterednum4 = document.lottery.ball4.value;
    var enterednum5 = document.lottery.ball5.value;
    var enterednum6 = document.lottery.ball6.value;

    counter = counter + 1;

}while(resultnum1 != enterednum1 && resultnum2 != enterednum2 && resultnum3 != enterednum3 && resultnum4 != enterednum4 && resultnum5 != enterednum5 && resultnum6 != enterednum6)

//alert(counter);

if(resultnum1 == enterednum1 && resultnum2 == enterednum2 && resultnum2 == enterednum2 && resultnum2 == enterednum2 && resultnum2 == enterednum2 && resultnum2 == enterednum2){

    alert("JackPot!, You Won The Lottery");
    alert("It took " + counter + " number of loops to get wining numbers")
    document.bgColor = "lightblue";

}
else{
    alert("sorry you did not win" + counter);
}

 }

</SCRIPT>

</head>
<body>

<Form Name = "lottery">

Lottery Game<br/>

Please enter your six numbers below:<br/>

Ball#1 <Input Type = "text" size = "1" value = "7" name = "ball1"><br/>
Ball#2 <Input Type = "text" size = "1" value = "45" name = "ball2"><br/>
Ball#3 <Input Type = "text" size = "1" value = "29" name = "ball3"><br/>
Ball#4 <Input Type = "text" size = "1" value = "10" name = "ball4"><br/>
Ball#5 <Input Type = "text" size = "1" value = "5" name = "ball5"><br/>
Ball#6 <Input Type = "text" size = "1" value = "25" name = "ball6"><br/>

<Input Type = "button" value = "Play" onClick = "genNums()"><br/>

Results:<br/>

Result Ball#1 <Input Type = "text" size = "1" name = "Rball1"><br/>
Result Ball#2 <Input Type = "text" size = "1" name = "Rball2"><br/>
Result Ball#3 <Input Type = "text" size = "1" name = "Rball3"><br/>
Result Ball#4 <Input Type = "text" size = "1" name = "Rball4"><br/>
Result Ball#5 <Input Type = "text" size = "1" name = "Rball5"><br/>
Result Ball#6 <Input Type = "text" size = "1" name = "Rball6"><br/>

</Form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:52:06.323

您需要在 while 循环中有 OR 条件

```
while(resultnum1 != enterednum1 || resultnum2 != enterednum2 || resultnum3 != enterednum3 || resultnum4 != enterednum4 || resultnum5 != enterednum5 || resultnum6 != enterednum6) 
```

这样，即使一组不匹配，代码也会再次循环！

而且由于您使用的是 Math.random()，因此您将很难验证逻辑，因为您可能需要预测 Math.random() 的结果，很幸运能赢得大奖:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:13:28.580

有时阅读 NOT 逻辑会有点麻烦，尤其是 while 子句依赖于某些东西是真实的来继续继续

为了便于阅读，我尽量让事情保持“真实”

```
} while( !(resultnum1 == enterednum1 && resultnum2 == enterednum2 && resultnum3 == enterednum3 &&
resultnum4 == enterednum4 && resultnum5 == enterednum5 && resultnum6 == enterednum6) ) 
```

编辑：另外，您的 if 语句看起来是复制和粘贴的.. 可能需要修复语句的其余部分

```
if ( resultnum1 == enterednum1 && resultnum2 == enterednum2 && resultnum3 == enterednum3 && resultnum4 == enterednum4 && resultnum5 == enterednum5 && resultnum6 == enterednum6 ){ 
```

编辑2：这是对我有用的代码。它大约在 4 次尝试中起作用，但这只是因为我将随机最大值减少到 6

```
 <html>
 <head>
 <title>Lottery Game</title>
 <SCRIPT LANGUAGE="javascript">

 function genNums(){

 var counter = 0;

    do{

    var num1 = Math.round(5 * Math.random())+1
    var resultnum1 = document.lottery.Rball1.value = num1

    var num2 = Math.round(5 * Math.random())+1
    var resultnum2 = document.lottery.Rball2.value = num2

    var num3 = Math.round(5 * Math.random())+1
    var resultnum3 = document.lottery.Rball3.value = num3

    var num4 = Math.round(5 * Math.random())+1
    var resultnum4 = document.lottery.Rball4.value = num4

    var num5 = Math.round(5 * Math.random())+1
    var resultnum5 = document.lottery.Rball5.value = num5

    var num6 = Math.round(5 * Math.random())+1
    var resultnum6 = document.lottery.Rball6.value = num6

    var enterednum1 = document.lottery.ball1.value;
    var enterednum2 = document.lottery.ball2.value;
    var enterednum3 = document.lottery.ball3.value;
    var enterednum4 = document.lottery.ball4.value;
    var enterednum5 = document.lottery.ball5.value;
    var enterednum6 = document.lottery.ball6.value;

    counter = counter + 1;

}while( !((resultnum1 == enterednum1 && resultnum2 == enterednum2 && resultnum3 == enterednum3 && resultnum4 == enterednum4 && resultnum5 == enterednum5 && resultnum6 == enterednum6 ) || counter >= 10000 ) )

//alert(counter);

if( resultnum1 == enterednum1 && resultnum2 == enterednum2 && resultnum3 == enterednum3 && resultnum4 == enterednum4 && resultnum5 == enterednum5 && resultnum6 == enterednum6) {

    alert("JackPot!, You Won The Lottery");
    alert("It took " + counter + " number of loops to get winning numbers")
    document.bgColor = "lightblue";

}
else{
    alert("sorry you did not win after " + counter + " tries");
}

 }

</SCRIPT>

</head>
<body>

<Form Name = "lottery">

Lottery Game<br/>

Please enter your six numbers below:<br/>

Ball#1 <Input Type = "text" size = "1" value = "1" name = "ball1"><br/>
Ball#2 <Input Type = "text" size = "1" value = "2" name = "ball2"><br/>
Ball#3 <Input Type = "text" size = "1" value = "3" name = "ball3"><br/>
Ball#4 <Input Type = "text" size = "1" value = "4" name = "ball4"><br/>
Ball#5 <Input Type = "text" size = "1" value = "5" name = "ball5"><br/>
Ball#6 <Input Type = "text" size = "1" value = "6" name = "ball6"><br/>

<Input Type = "button" value = "Play" onClick = "genNums()"><br/>

Results:<br/>

Result Ball#1 <Input Type = "text" size = "1" name = "Rball1"><br/>
Result Ball#2 <Input Type = "text" size = "1" name = "Rball2"><br/>
Result Ball#3 <Input Type = "text" size = "1" name = "Rball3"><br/>
Result Ball#4 <Input Type = "text" size = "1" name = "Rball4"><br/>
Result Ball#5 <Input Type = "text" size = "1" name = "Rball5"><br/>
Result Ball#6 <Input Type = "text" size = "1" name = "Rball6"><br/>

</Form>
</body>
</html> 
```

# authentication - Lotus Connections - 第三方应用程序的自动登录

> ID：15166553
> 
> 赞同：0
> 
> 时间：2013-03-01T20:43:30.003
> 
> 标签：authentication, ibm-connections, ibm-sbt

我正在为 Lotus Connections 创建一个 iWidget，它提供对我们的 3rd 方应用程序的访问。

当用户加载小部件时，我们会自动将他登录到我们的系统，并使用他的帐户访问 Connections REST API 以添加活动。

与第三方处理身份验证的推荐方法是什么，最好不要让用户在 iWidget 中手动设置任何内容？

感谢您提供任何可以分享的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:26:59.177

好吧，您可以存储凭据来访问您的后端服务，从 iwidget 您可以获得用户的身份，并代表用户行事。

iContext -> getUserProfile() 然后你可以获得身份。

这可能是最快的开始方式。还有更复杂的解决方案可以调解 ltpa 令牌以及您在环境中拥有的任何单点登录提供程序。

我也不确定 iWidgets 是否可以充当 oauth 消费者，也许其他人知道更多。

# php - PHP 库描述仅显示第一个字母

> ID：15166554
> 
> 赞同：-4
> 
> 时间：2013-03-01T20:43:32.483
> 
> 标签：php

我正在关注本教程的第二部分，其中显示了带有描述的图片。[http://www.devtek.org/tutorials/image_gallery.php](http://www.devtek.org/tutorials/image_gallery.php)

我遇到了一个问题，我在 .txt 文件中的描述只会显示第一个字母。我假设数组只读取第一个字母，我可以将其更改为读取第二、第三和第四个字母，但不能同时读取所有字母。网页上的代码完全相同。

这也是我正在玩的现场直播

www.digifind-it.com/test/script.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:46:48.843

更改此行

`echo '<td align="center"><a href="' . $images . $big . $file . '"><img src="' . $images . $file . '" /></a><br />' . $description[$file][0] . '</td>';`

至

`echo '<td align="center"><a href="' . $images . $big . $file . '"><img src="' . $images . $file . '" /></a><br />' . $description[$file]. '</td>';`

说明：你有一个这样的数组 $desription

```
Array
(
    [] => 
    [PICT0168.JPG] => Balloon Fiesta!

    [PICT0259.JPG] => Our Halloween Pumpkin

    [PICT0271.JPG] => Converting our garage to a halloween cave

    [PICT0282.JPG] => My little ghoulish helpers

    [PICT0524.JPG] => Ash meets Cinderella on her 7th B-day

    [PICT0633.JPG] => Jayden's first snowday

) 
```

因此，当您使用时，`$description[$file][0]`您实际上是在调用字符串的第一个字符来显示示例尝试：

```
$string = "Hello World";
echo $string[0]; // output H 
```

# asp.net-mvc - Telerik Grid ASP.NET MVC4 Grid Binary Operator 问题

> ID：15166556
> 
> 赞同：1
> 
> 时间：2013-03-01T20:43:36.157
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

我在 ASP.NET MVC4 视图中有一个 Telerik Grid，它抛出了一个非常奇怪的错误。我有这个代码在应用程序的其他区域工作没有问题......删除 IsActive 属性的客户端模板代码后，错误仍然发生。`.Filterable(...)`当我删除呼叫时，错误消失了。

> 没有为“System.Boolean”和“System.Object”类型定义二元运算符 Equal。

### 看法

```
@(Html.Telerik().Grid(Model)
    .Name("Grid")
    .DataKeys(keys =>
      {
          keys.Add(c => c.Id);
      })
    .Columns(columns =>
      {
          columns.Bound(c => c.Id).Hidden();
          columns.Bound(c => c.Name).Width(150);
          columns.Bound(c => c.IsActive).Width(100).Title("Active?")
             .HeaderHtmlAttributes(new { style = "text-align: center;" })
             .ClientTemplate("<center><input type='checkbox' disabled='disabled' 
                name='IsActive' <#= IsActive? checked='checked' : '' #> /></center>");
      })
    .Filterable(f => f.Filters(fi => fi.Add(fis => fis.IsActive)))
) 
```

### 模型

```
public class Organization
{
    public Organization()
    {
        IsActive = true;
    }

    public int Id { get; set; }

    [Required]
    [MinLength(5)]
    [MaxLength(300)]
    public String Name { get; set; }

    [Required]
    public bool IsActive { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:04:35.910

正如您已经发现问题出在您的`Filterable`

因此，在您的情况下添加默认过滤器时，您总是需要指定一个“操作员”，我认为您需要`IsEqualTo(true)`

```
.Filterable(f => f.Filters(fi => fi.Add(fis => fis.IsActive).IsEqualTo(true))) 
```

# html - 电子邮件 HTML 中的自动换行

> ID：15166560
> 
> 赞同：0
> 
> 时间：2013-03-01T20:43:56.497
> 
> 标签：html, vb.net

我有一个程序将数据集数据作为 html 电子邮件发送。一切都很好，除了输出在表格中随机使用自动换行，因此单词的最后一个字母或 2 个字母位于其下方。当前输出如下所示：

```
Time    07:08   Jarro
                d 
```

显然我希望它看起来像这样：

```
Time    07:08   Jarrod 
```

我的 HTML 代码是：

```
<html>
            <body>
                <table border="1">
                    <tr><th>Description</th><th> Location </th></tr>
                    <%= From time In Me._Dataset.Time.AsEnumerable _
                        Select <tr><td>Time</td>
                                   <td><%= time.dtTimeIn.ToString("hh:mm tt") %></td>
                                   <td style="white-space: nowrap"><%= time.SName %></td></tr> %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:55:32.843

尝试为`<td>`. 例如`<td width="150">`或`<td style="width:150px;">`

# matlab - 从 uint 8 到 uint16 的图像转换

> ID：15166561
> 
> 赞同：0
> 
> 时间：2013-03-01T20:44:04.203
> 
> 标签：matlab, image-processing, typecast-operator

我想将一些 uint8 RGB 图像转换为 uint16 RGB 类型，然后在对其进行处理后（uint16）将其转换为 uint8 类型。我不知道该怎么做（我在网上搜索了很多，但其中任何一个都不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:52:16.023

您可以使用[im2uint16()](http://www.mathworks.com/help/images/ref/im2uint16.html) Matlab 函数：

> RGB2 = im2uint16(RGB) 将真彩色图像 RGB 转换为 uint16，必要时重新缩放数据。

# postgresql - 如何在 PostgreSQL 中将 GNU 并行和 GNU SQL 与 \copy 一起使用

> ID：15166563
> 
> 赞同：2
> 
> 时间：2013-03-01T20:44:10.477
> 
> 标签：postgresql, parallel-processing, sqlbulkcopy

我想对 PostgreSQL 数据库进行批量加载，有几个文件而且非常大。我刚刚在[Using GNU Parallel With split](https://stackoverflow.com/questions/15144655/using-gnu-parallel-with-split)中阅读了关于`GNU Parallel`and的内容`GNU SQL`，它看起来很棒，有人可以帮我举一个使用`GNU Parallel`, `GNU SQL`and`\copy`或`COPY`对 PostgreSQL 进行批量加载的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:03:33.513

I'd just use [`pg_bulkload`](http://pgbulkload.projects.pgfoundry.org/) instead. It does that, and more, for you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-26T03:43:23.757

GNU parallel 和 pg_bulkload 都很酷，但在大多数默认安装中不可用。我认为这个任务可以通过在 shell 脚本中使用“&”（后台子 shell）和“等待”来实现，它同时调用多个 \COPY 操作。这是一个例子：

```
#!/bin/bash

PG_USER_NAME=bizusr
PG_DB_NAME=bizdb
BCP_DIR=/data/biz/bcp/input

do_bcp()
{
    TABLE_NAME=$1
    echo "`date` $$ copy $TABLE_NAME begin"
    psql -q -U $PG_USER_NAME -d $PG_DB_NAME << EOF
-- SET DATESTYLE TO 'ISO,YMD'; -- you may need this when dealing with timestamps
\COPY $TABLE_NAME FROM '${BCP_DIR}/${TABLE_NAME}.bcp' WITH (FORMAT CSV, DELIMITER '|');
EOF
    echo "`date` $$ copy $TABLE_NAME done"
}

echo "`date` $$ parallel copy started"
for BCP_FILE in `ls ${BCP_DIR}/*.bcp`; do
    TABLE_NAME=`echo $BCP_FILE|awk -F"/" '{print $NF}'|sed -e s/\.bcp$//`
    do_bcp $TABLE_NAME &
done

wait
echo "`date` $$ parallel copy finished" 
```

# image - 流星图像、CSS、“普通”网络服务

> ID：15166566
> 
> 赞同：15
> 
> 时间：2013-03-01T20:44:29.120
> 
> 标签：image, web-services, http, meteor

我经常看到这个问题出现；

*   如何在我的 Meteor 网站上放置图像？
*   如何使用 Meteor 托管“标准”网络内容？
*   我尝试添加`<img src="img/myimage.png">`标签，但没有图像显示！
*   如何在 Meteor 网站上托管一些文件？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-01T20:44:29.120

**将内容放在项目根目录中名为“public”的文件夹中。**

*   您不需要在 URL 中包含 /public。
*   支持 public 中的任何其他文件夹结构。
*   不需要 NodeJS 路由插件，因为已经提供了其他答案。
*   将外部库的 javascript 文件放在 /lib 中。它们将被自动包含在内。

* * *

**解释**

在 Meteor 中，您可以通过在项目的根目录中创建“公共”目录来托管“标准”Web 内容。您放置在此文件夹中的任何图像、文件或数据都将由 NodeJS 服务器正常提供，就好像它们位于服务器的根目录中一样。

* * *

***例子***

*   项目内的结构：*/public/test/img.png*
*   对应图片网址：*/test/img.png*
*   示例 HTML 标记：`<img src="/test/img.png"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T04:47:09.483

**`public`**在项目目录中创建一个新文件夹。在公用文件夹中添加一个新文件夹**`img`**（或您选择的任何其他名称）。将需要添加到 HTML 中的所有图像复制到此文件夹中。

现在你可以像使用它 -`<img src="img/myimage.png">`

您不需要在 URL 中包含 /public。

# javascript - 像 JQuery 一样将整个代码放在一起

> ID：15166571
> 
> 赞同：0
> 
> 时间：2013-03-01T20:44:47.460
> 
> 标签：javascript, optimization

我知道这个问题听起来很奇怪，但我怎样才能把我的代码放在一起呢？它有什么工具可以帮助我解决这个问题吗？

例子：

```
var d = "Hello world";
if(typeof d == 'string')
{
 console.log("its a string!");
}else{
console.log("it isnt a string!");
} 
```

至

```
if(typeof d == 'string'){console.log("its a string!");}else{console.log("it isnt a tring!");} 
```

我有很多代码，我读过一次，像这样放置所有代码会运行得更快，他提到了一些工具，但我不记得它的名称和帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:48:25.453

这称为*缩小*。到处都有大量的缩小工具（只是谷歌“JavaScript 缩小器”。）有些你可以在线运行。其他的则内置在 Ruby On Rails 等框架中`uglifier`。还有一些 CDN（例如 CloudFlare）会在提供服务时为您从您的站点缩小 JS。

缩小会减少文件大小..有时会显着减少。所有这些空白字符加起来。这使得 JS 文件的下载速度更快，这对于连接速度较慢的人来说非常好——尤其是在移动设备上。

下载后，缩小的 JS 可能不会比未缩小的 JS 运行得更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:47:02.483

您正在寻找的是一个**javascript minifier**。从页面的标记或输出中删除空格会使其更快地传输到浏览器，但不一定运行得更快。

[JSMin](http://www.crockford.com/javascript/jsmin.html)是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:51:57.290

如果你有兴趣了解 jQuery 是如何做到的，他们实际上在他们的 git hub 页面上有他们的构建文件。他们使用一个名为[grunt.js](http://gruntjs.com/)的工具在发布之前对他们的脚本进行 concat、lint、缩小和测试。它是一个使用起来相对简单的工具，而且功能非常强大。您可以[在此处查看 jquery 的“GruntFile”](https://github.com/jquery/jquery/blob/master/Gruntfile.js)

# ruby-on-rails - 找不到控制器的操作“索引”

> ID：15166575
> 
> 赞同：0
> 
> 时间：2013-03-01T20:45:08.467
> 
> 标签：ruby-on-rails, ruby

我正在尝试用一个动作制作一个控制器，当我尝试转到 localhost:3000/controllername/action 时，我收到此错误：

找不到 LearnController 的操作“显示”

这是我的控制器：

```
class LearnController < ApplicationController

    def more

    end
end 
```

在路线中我这样做：

```
resources :learn 
```

我知道资源会创建所有的节目、编辑、索引和所有这些，但我该如何做到这一点，以便只有我创建的动作是在路线中创建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:48:41.460

正如您所提到的，`resources :learn`将根据资源丰富的约定创建一堆路由。

如果您不想要这些，请不要`resources`在您的`config/routes.rb`文件中使用。相反，请使用`get`、`match`和朋友手动定义您的路线。例如

```
get 'learn/more' 
```

# actionscript-3 - AS3 在父级的不同帧上暂停子影片剪辑

> ID：15166586
> 
> 赞同：0
> 
> 时间：2013-03-01T20:45:47.123
> 
> 标签：actionscript-3, flash, animation, movieclip

关于在父项中暂停和恢复子影片剪辑的快速问题。我的父影片剪辑在第 1、2 和 3 帧内有 3 个其他子影片剪辑（每个都有自己不同的动画），当情况出现时，它们将在 .as 文件中调用。

但是，在暂停父动画剪辑时，我希望能够返回到当前所在的子动画剪辑的同一帧。例如，父母在第 2 帧，第 2 帧的孩子在其自己的动画的第 15 帧，当恢复时，父母影片剪辑将停留在第 2 帧，而孩子将从第 15 帧开始。

目前我唯一能想到的就是有两个变量，一个保存当前父帧，第二个保存子当前帧，恢复后，转到父帧，然后 'child'.goto andplay(child框架）。但是，这会要求每个孩子都具有相同的实例名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:44:19.377

在没有看到您的确切设置的情况下，我相信您想要的是递归暂停和恢复：

```
function recursivePause(clip:MovieClip):void
{
    var len:int = clip.numChildren;
    clip.stop();
    for(var i:int = 0; i < len; i++)
    {
        if(clip.getChildAt(i) is MovieClip)
        {
            recursivePause(clip.getChildAt(i) as MovieClip);
        }
    }
}

function recursiveResume(clip:MovieClip):void 
{
    var len:int = clip.numChildren;
    for(var i:int = 0; i < len; i++)
    {
        if(clip.getChildAt(i) is MovieClip)
        {
            recursiveResume(clip.getChildAt(i) as MovieClip);
        }
    }
    clip.play();
} 
```

# asp.net-mvc-4 - 在调用 url 之前设置 jqGrid 页面

> ID：15166589
> 
> 赞同：0
> 
> 时间：2013-03-01T20:45:58.007
> 
> 标签：asp.net-mvc-4, jqgrid

我正在寻找一种将 jqGrid 的页面设置为 x...

我的用例是有人正在使用我的网格......他们点击一个病人来编辑那个病人（我没有使用 jqGrids 模态编辑屏幕......已经到了许多模态窗口）......

当保存他们对该患者所做的事情时，我想将浏览器重定向回他们单击该患者的屏幕，然后返回到 SAME PAGE ...

要记住的事情。

我正在使用 asp.net MVC4。我通过操作方法调用第一页。我的网格的 url 变量是同一控制器中的另一个操作。该操作是我将页面和行变量发送到的内容。我确信这是可以做到的，但是，我不知道如何实现它。到目前为止，我已经尝试在我的 document.ready 中设置 page 变量和 rows 变量，然后再调用 jqGrid ...

```
 tbl.jqGrid({
                loadBeforeSend: function () {
                    page: pageFromTemp;
                    rows: rowFromTemp
                }
            }); 
```

基本上我已经尝试了不同的方法来做到这一点。以上只是其中之一。我试图在 document.ready 中重新加载网格。但这没有任何意义。当你没有给它任何它需要的参数时，为什么要重新加载网格......

我试图在 beforeRequest 事件中设置变量。我有一个功能，我尝试将其设置为...

```
 beforeRequest: function () {
                if ((rowFromTemp != "") && (pageFromTemp != "")) {
                    $(this).trigger('reloadGrid', [{ page: pageFromTemp, rowNum: rowFromTemp, url: '/Encounters/GetAjaxPagedGridData/' }]);
                    //$.extend($(this).setGridParam({ page: pageFromTemp })),
                    //$.extend($(this).setGridParam({ rowNum: rowFromTemp })),
                    //$.extend($(this).setGridParam({ url: '/Encounters/GetAjaxPagedGridData/' }))
                    //$.trigger('reloadGrid', [{ page: pageFromTemp, rowNum: rowFromTemp, url: '/Encounters/GetAjaxPagedGridData/'}]);
                }
            }, 
```

但这也行不通。我显然错过了一些东西。我究竟做错了什么...

**使用 loadComplete 和 $("frTable").trigger({}) 将其更改为正确的页面**

但是现在我得到一个闪烁的加载屏幕，它向我表明它仍在加载数据......如果我在我的代码中设置了一个断点，我可以确认它正在加载数据。我没有在这里做任何事情。

![在此处输入图像描述](../Images/d534374e97f23f064919fd0c2ee548b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:57:00.013

在准备好的文档中加载网格，将其数据类型设置为`local`，未分配其 url，并将其隐藏。想要加载时，设置好参数后触发加载，然后展示给用户。

# javascript - 通过Javascript选择HTML表格中的文本？

> ID：15166590
> 
> 赞同：1
> 
> 时间：2013-03-01T20:46:09.837
> 
> 标签：javascript, google-chrome, safari

是否可以在 Javascript 的帮助下选择文本（就像用户将鼠标拖过浏览器中的 HTML 单词一样）？

我有一些 JS 代码在 HTML 表中搜索用户的字符串输入。然后，如果找到此词，我希望此代码选择/关注该词。

```
var targetTable = document.getElementById("accountTable");

for (var rowIndex = 1 + searchStart; rowIndex < targetTable.rows.length; rowIndex++)
{
    var rowData = '';
    rowData = targetTable.rows.item(rowIndex).cells.item(0).textContent;
    if (rowData.indexOf(str) != -1)
    {
                //select word and focus on it in user's browser?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:57:47.823

为了通过悬停突出显示元素，最简单的方法是使用 css。

例子：

你有html代码：

```
<p id="test">Word</p> 
```

CSS 文件：

```
#word:hover{ color: #FFFF00; } 
```

这将通过悬停元素为文本着色。

编辑，如果您有多个单词...您希望将它们分隔在每个单词的一个元素中。例如：

```
<text class="word">each</text><text class="word">word</text><text class="word">is</text><text class="word">selectable</text>  

.word:hover{ color: #FFFF00; } 
```

这是 JS 小提琴：http: [//jsfiddle.net/braTe/](http://jsfiddle.net/braTe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:02:39.013

看起来好像您想使用该[`Selection`](https://developer.mozilla.org/en-US/docs/DOM/Selection)对象。在基本级别，您可以只设置其锚点和焦点节点和偏移量，或者您也可以创建多范围选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:49:57.057

您可以用相同的字符串替换找到的字符串，但在特定类的范围内。

例如，如果搜索词是“alpha”：

```
<td>The alphabet is long.</td>
<td>The <span class="highlighted">alpha</span>bet is long.</td> 
```

当搜索更改时，您必须将所有突出显示的跨度恢复为纯文本。

如果您想实际使用浏览器选择进行选择，这里讨论了一种有限的方法：[Programmatically select text in a contenteditable HTML element?](https://stackoverflow.com/questions/6139107/programatically-select-text-in-a-contenteditable-html-element)

# android - 仅在真实设备上出错。适用于所有模拟器

> ID：15166591
> 
> 赞同：1
> 
> 时间：2013-03-01T20:46:15.343
> 
> 标签：android

我正在制作一个应用程序，它在 listView 中显示在线收音机列表，该列表是通过在线 MySql 数据库获得的。我在所有版本的模拟器中测试了我的应用程序，它运行良好。但在设备中，应用程序终止。当我通过 USB 连接时不会关闭应用程序，但不会加载 Json 内容。

通过 USB 调试连接的设备不会为收音机充电

日志：

```
03-01 17:35:05.109: E/Buffer Error(2273): Error converting result java.lang.NullPointerException
03-01 17:35:05.109: E/JSON Parser(2273): Error parsing data org.json.JSONException: End of input at character 0 of 
```

下面是代码：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class ListaRadios extends ListActivity {
    private ProgressDialog pDialog;
    JSONParser jParser = new JSONParser();
    ArrayList<HashMap<String, String>> listaradios;
    private static String url_radios = "Url to php mysql connection with";
    private static final String TAG_SUCESSO = "sucesso";
    private static final String TAG_RADIOS = "radios";
    private static final String TAG_ID = "id";
    private static final String TAG_NOME = "nome";

    JSONArray radios = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lista_radios);

        listaradios = new ArrayList<HashMap<String, String>>();

        new LoadAllRadios().execute();

        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, View view, int position, long id_item) {

                String id = ((TextView) view.findViewById(R.id.id)).getText().toString();

                Intent in = new Intent(getApplicationContext(), Player.class);

                in.putExtra(TAG_ID, id);

                startActivityForResult(in, 100);
            }
        });
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    private void direciona(Class<?> menu){
        Intent myIntent = new Intent(this, menu);
        startActivity(myIntent);
    }

    public boolean onOptionsItemSelected(MenuItem item) {       
        switch (item.getItemId()) {
            case R.id.contato:
                direciona(Contato.class);
                return true;
            case R.id.sugerir:
                direciona(Sugerir.class);
                return true;
          case R.id.listar:
                direciona(ListaRadios.class);
          return true;
            case R.id.player:
                direciona(Player.class);
          return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == 100) {
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    class LoadAllRadios extends AsyncTask<String, String, String> {
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ListaRadios.this);
            pDialog.setMessage("Buscando rádios. Aguarde...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        protected String doInBackground(String... args) {
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            JSONObject json = jParser.makeHttpRequest(url_radios, "GET", params);

            Log.d("Todas as rádios: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int sucesso = json.getInt(TAG_SUCESSO);

                if (sucesso == 1) {
                    radios = json.getJSONArray(TAG_RADIOS);

                    for (int i = 0; i < radios.length(); i++) {
                        JSONObject c = radios.getJSONObject(i);

                        String id = c.getString(TAG_ID);
                        String nome = c.getString(TAG_NOME);

                        HashMap<String, String> map = new HashMap<String, String>();

                        map.put(TAG_ID, id);
                        map.put(TAG_NOME, nome);

                        listaradios.add(map);
                    }
                } else {

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
            runOnUiThread(new Runnable() {
                public void run() {
                    ListAdapter adapter = new SimpleAdapter(ListaRadios.this, 
                            listaradios, R.layout.lista_item_radios, 
                            new String[] {TAG_ID, TAG_NOME},
                            new int[] {R.id.id, R.id.nome});
                    setListAdapter(adapter);
                }
            });
        }
    }
} 
```

php代码：

```
<?php
$resposta = array();
require_once 'db_connect.php';
$db = new DB_CONNECT();

$resultado = mysql_query("SELECT * FROM radios") or die(mysql_error());

if (mysql_num_rows($resultado) > 0) {
    $resposta["radios"] = array();
    while ($row = mysql_fetch_array($resultado)) {
        $radio = array();
        $radio["id"] = $row["id"];
        $radio["nome"] = $row["nome"];
        $radio["site"] = $row["site"];
        $radio["imagem"] = $row["imagem"];
        $radio["url_streaming"] = $row["url_streaming"];
        array_push($resposta["radios"], $radio);
    }
    $resposta["sucesso"] = 1;
    echo json_encode($resposta);
} else {
    $resposta["sucesso"] = 0;
    $resposta["mensagem"] = "Não foram encontradas rádios.";
    echo json_encode($resposta);
}
?> 
```

会是什么？

如果我运行模拟器，则输出如下：

```
03-01 18:41:40.047: D/Todas as rádios:(594): {"sucesso":1,"radios":[{"site":"www.radiomiriam.com.br","id":"1","url_streaming":"http:\/\/69.64.48.96:9880\/","nome":"Radio Miriam","imagem":""},{"site":"www.clarimdopampa.com.br","id":"2","url_streaming":"http:\/\/70.36.96.25:9928\/","nome":"Radio Clarim do Pampa","imagem":""},{"site":"","id":"5","url_streaming":"http:\/\/189.76.158.139:50004\/","nome":"Itapema FM - RS","imagem":""}]} 
```

但是如果我运行 usb 调试输出并没有列出这个：

```
03-01 18:48:21.319: I/System.out(3717): Debugger has connected
03-01 18:48:21.319: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:21.519: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:21.719: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:21.919: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:22.119: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:22.319: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:22.519: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:22.719: I/System.out(3717): waiting for debugger to settle...
03-01 18:48:22.919: I/System.out(3717): debugger has settled (1475)
03-01 18:48:23.699: W/System.err(3717): java.net.UnknownHostException: nsi.inf.br
03-01 18:48:23.709: W/System.err(3717):     at java.net.InetAddress.lookupHostByName(InetAddress.java:508)
03-01 18:48:23.709: W/System.err(3717):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:296)
03-01 18:48:23.719: W/System.err(3717):     at java.net.InetAddress.getAllByName(InetAddress.java:258)
03-01 18:48:23.719: W/System.err(3717):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
03-01 18:48:23.719: W/System.err(3717):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-01 18:48:23.729: W/System.err(3717):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-01 18:48:23.739: W/System.err(3717):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
03-01 18:48:23.739: W/System.err(3717):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-01 18:48:23.749: W/System.err(3717):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-01 18:48:23.749: W/System.err(3717):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-01 18:48:23.749: W/System.err(3717):     at com.nsistations.JSONParser.makeHttpRequest(JSONParser.java:62)
03-01 18:48:23.749: W/System.err(3717):     at com.nsistations.ListaRadios$LoadAllRadios.doInBackground(ListaRadios.java:120)
03-01 18:48:23.749: W/System.err(3717):     at com.nsistations.ListaRadios$LoadAllRadios.doInBackground(ListaRadios.java:1)
03-01 18:48:23.749: W/System.err(3717):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-01 18:48:23.749: W/System.err(3717):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-01 18:48:23.749: W/System.err(3717):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-01 18:48:23.749: W/System.err(3717):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-01 18:48:23.759: W/System.err(3717):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-01 18:48:23.759: W/System.err(3717):     at java.lang.Thread.run(Thread.java:1019)
03-01 18:48:23.759: E/Buffer Error(3717): Error converting result java.lang.NullPointerException
03-01 18:48:23.759: E/JSON Parser(3717): Error parsing data org.json.JSONException: End of input at character 0 of 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:50:04.680

```
java.net.UnknownHostException: nsi.inf.br 
```

您的设备无法访问 nsi.inf.br，但模拟器（即您的工作站）可以。

根据您的工作站设置检查设备的连接设置。检查它们是否在同一网络上以及是否存在代理/防火墙问题。

# mysql - 选择内部数学函数

> ID：15166595
> 
> 赞同：3
> 
> 时间：2013-03-01T20:46:33.877
> 
> 标签：mysql, sql, math

这很可能是 SQL 初学者的问题。是否可以在数学表达式中使用选择？

例如，我有两个表： - 表 A 有一个名为 id （主键）的列和另一个名为 val_A 的列 - 表 B 有一个名为 id （主键）的列和另一个名为 val_B 的列

我想做类似的事情：

```
select ((select val_A from A where id = 1) +
    (select val_B from B where id = 1)) as final_sum; 
```

我正在使用 MySQL，它正在抛出错误。我假设这是因为选择的结果是一个集合，我希望 val_A 和 val_B 的数值成为总和。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:50:56.673

您的查询：

```
select ((select val_A from A where id = 1) +
        (select val_B from B where id = 1)
       ) as final_sum 
```

在 MySQL 中是正确形成的 SQL（假设表和列存在）。

但是，它假定每个子查询只返回一行。如果没有，您可以使用`limit`or 之类的函数强制它`min()`or `max()`：

```
select ((select val_A from A where id = 1 limit 1) +
        (select max(val_B) from B where id = 1)
       ) as final_sum 
```

或者，您可能正在尝试获取两个表中 id = 1 的所有行的总和：

```
select ((select sum(val_A) from A where id = 1) +
        (select sum(val_B) from B where id = 1)
       ) as final_sum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:49:57.573

是的，您可以这样做，但更合适的查询格式是：

```
SELECT (a.val_a + b.val_b) as final_sum
FROM a INNER JOIN b ON a.id = b.id
WHERE a.id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:52:32.297

我不确定为什么它不起作用，但您可以尝试以下方法：

```
select (val_A + val_B) as final_sum from A,B where A.id=1 and B.id=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:52:35.217

分解并测试您的查询

选择1+1

所以你的陈述只是没有选择。这将运行 -

```
select ((select sum(val_A) from A where id = 1) +
(select sum(val_B) from B where id = 1)) as final_sum; 
```

# c++ - 试图让一个对象碰撞并在 C++ 中删除另一个对象

> ID：15166596
> 
> 赞同：0
> 
> 时间：2013-03-01T20:46:33.857
> 
> 标签：c++

所以我有一个任务，要求我使用八叉树进行碰撞计算，在播放器对象和对象（立方体/pyrmaid/球体真的无关紧要）之间发生碰撞。在玩家与对象发生碰撞时，需要删除对象。我有这样的功能

```
void BinPart::ProcessCollisions(int &nbrTests, int &nbrCollisions){
    if(hasChildren())
    {
        for(int i = 0; i <= 7; i++)
        {
        child[i]->ProcessCollisions(nbrTests, nbrCollisions);
        }
    }
    int n = objects.size();

    if(n >= 2)
    {
        for(int i = 0; i < n - 1; i++)
        {
            for(int j = i + 1; j < n; j++)
            {
                nbrTests++;
                if(player->collidesWith(objects[j]))
                {
                    objects.erase(objects.begin() + j);
                }
                else
                {
                    if(objects[i]->collidesWith(objects[j]))
                        {
                            nbrCollisions++;
                        }
                }
            }
        }
    }
    if(n >= 1 && parent != NULL)
    {
        parent->ProcessBorderCollisions(this, nbrTests, nbrCollisions);
    }
} 
```

目前`player->collidesWith(objects[j]);`不起作用，因为在 binPart 的头文件中播放器是“未定义的”，有一个 Object 类型的基类的前向声明，所有对象都是由该基类制成的。但是 Object *player 在 Game.h 中，但我需要 binPart 才能访问它。我在我的课程中问过我的一位朋友他有什么，他的几乎和我的一模一样，这引发了一些问题。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:49:41.330

如果源文件使用头文件中声明的内容，则将该头文件包含在源文件中，即使它也包含在另一个源文件中。使用包含守卫来确保您不会重新声明任何内容。

# html - div 在 windows 上移动到另一个 div 调整大小

> ID：15166597
> 
> 赞同：0
> 
> 时间：2013-03-01T20:46:45.197
> 
> 标签：html, css, stylesheet

当我调整窗口大小时，右侧浮动 div 移动到居中 div。如何将右侧浮动的 div 粘贴在右侧，以便在调整窗口大小时它不会移动？

```
<div id="topbar">
    <div id="wrapper960">
     Navigation menu
    </div>
    <div id="search">
     Searchbox
    </div>
</div>

#topbar{width:100%; vertical-aligh:middle; }
#wrapper960{width:960px; margin:0px auto; min-height:25px;}
#search{float:right; margin:-25px 0px 0px 0px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:11:37.367

马上，我注意到`#topbar{width:100%; vertical-aligh:middle; }`，你拼错`vertical-align`了`vertical-aligh`。

尽管如此，作为一个整体，我建议让您的代码在语义上更能描述您试图表达的内容，遵循更紧密的现代网络编码标准。

## 我为您制作了[*这个 JSFiddle*](http://jsfiddle.net/ChaseMoskal/GHBLG/2/)，希望这代表您正在寻找的导航栏附近的东西。

[http://jsfiddle.net/ChaseMoskal/GHBLG/2/](http://jsfiddle.net/ChaseMoskal/GHBLG/2/)

祝朋友好运！*快乐编码！//追赶。*

## 编辑：

为了在这个答案中更明确，而不仅仅是 JSFiddle，我认为将您的导航栏表示为无序列表会很好，最后是搜索框。

```
<ul class="topbar">
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <div class="search">Search</div>
</ul> 
```

至于 JSFiddle 中的 CSS，我`list-style:none;`是无序列表；我`display:inline-block;`列出了项目（`float:left;`这将是一种完全可以接受的，也许也是更跨浏览器的方式）；和我`float:right;`的搜索框。列表中的`::after`伪元素清除浮动的列表内容，并`width:100%;max-width:960px;`允许您的栏动态地缩小尺寸以适应较小的窗口。**CSS 中的其他所有内容都只是为了花哨。** *//追赶。*

# ios - 解雇后如何查看另一个AlertView？

> ID：15166600
> 
> 赞同：0
> 
> 时间：2013-03-01T20:46:56.170
> 
> 标签：ios, objective-c, uialertview

我可以在计时器关闭后显示另一个 UIAlertview 吗？我使用这种方法 UIActivityindicatorview 到 UIAlertView 与 NSTimer 自行解除它“请等待，正在保存...”被解除，然后我想查看另一个 UIAlertView 说“已成功保存！” （完毕）。如何做到这一点？谢谢你。

在这里我使用相同的这种方法，但这不是我需要的。我只需要在计时器关闭第一个 uialertview 后查看另一个 UIAlertview。

如果需要更清楚，请告诉我，我可以在这里发布我的代码，谢谢。

```
- (IBAction)showAlert:(id)sender {

    UIAlertView* alert_view = [[UIAlertView alloc]
                               initWithTitle: @"Save" message:@"please wait, saving..." delegate: self 
                               cancelButtonTitle:@"done" otherButtonTitles:nil];
    [alert_view show];
    [alert_view release];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    if (buttonIndex==0) {

        UIAlertView* alert_view = [[UIAlertView alloc]
                               initWithTitle: @"Success" message:@"Saved Successfully!" delegate: self 
                               cancelButtonTitle: @"Done" otherButtonTitles:nil];

         [alertView dismissWithClickedButtonIndex:0 animated:TRUE];
    }
    else{
        [alertView dismissWithClickedButtonIndex:1 animated:TRUE];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:53:44.920

计时器不是解决此问题的方法。您是在伪造它，而不是正确地实施它。如果涉及多个类，则需要使用协议和委托，但最终，您需要遵循以下流程：

1) 显示“请稍候...正在保存”警报

2）做储蓄

3) 保存完成后，关闭第一个警报，然后显示第二个。

根据您如何保存 WHAT，这可能需要一些额外的逻辑来实现，但如果没有更多细节，很难提供更多帮助。

# css - 有没有办法用 flexbox 做到这一点？

> ID：15166608
> 
> 赞同：1
> 
> 时间：2013-03-01T20:47:15.593
> 
> 标签：css, flexbox

我的 main`<div>`有一个固定的高度，但是当我尝试使用`box-orient: horizontal`它时，它们都保持在 first 之上`<div>`，即使有溢出黑客。

我被困住了。这就是我需要的：

![例子](../Images/63f516eb7fc09261596a6d8b72d9b1bc.png)

这个代码：

```
<style>
.box {
  outline: 1px solid red;
  width: 1000px;
  height: 450px;
  overflow: hidden;
  display: box;
  box-pack: center;
  box-align: center;
  box-orient:vertical;
}

.boxitem {
  width:150px;
  height:200px;
  background:#ccc;
}
</style>

<div class="box">
  <div id="box1" class="boxitem">flexbox item 1</div>
  <div id="box2" class="boxitem">flexbox item 2</div>
  <div id="box3" class="boxitem">flexbox item 3</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:32:42.067

您正在使用 2009 规范中的属性，该规范正在逐步淘汰以支持此草案： [http](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/) ://www.w3.org/TR/2012/CR-css3-flexbox-20120918/ 。您实际上需要`box-orient: vertical`2009 规范，但这仍然对您没有帮助，因为据我所知，没有人实现`box-lines: multiple`过启用包装。如果您只想使用一个 flex 容器元素，则需要能够包装。

因此，下面的代码将涵盖所有支持 Flexbox 规范的浏览器基础：Opera、Chrome、IE10。

[http://jsfiddle.net/FwfDV/](http://jsfiddle.net/FwfDV/)

```
.box {
  outline: 1px solid red;
  width: 1000px;
  height: 450px;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-flow: column wrap;
  -ms-flex-flow: column wrap;
  flex-flow: column wrap;
  -webkit-flex-pack: justify; /* optional */
  -ms-flex-pack: justify; /* optional */
  -webkit-justify-content: space-between; /* optional */
  justify-content: space-between; /* optional */
}
@supports (display: flex) and (flex-wrap: wrap) {
  .box {
    display: flex;
  }
}

.boxitem {
  width: 150px;
  height: 200px;
  background: #ccc;
}

<div class="box">
  <div id="box1" class="boxitem">flexbox item 1</div>
  <div id="box2" class="boxitem">flexbox item 2</div>
  <div id="box3" class="boxitem">flexbox item 3</div>
  <div id="box4" class="boxitem">flexbox item 4</div>
  <div id="box5" class="boxitem">flexbox item 5</div>
  <div id="box6" class="boxitem">flexbox item 6</div>
</div> 
```

但是，如果您的“boxitem”元素是这样的常规/固定大小，我建议改用 CSS Columns，它具有更广泛的支持并且可以完成几乎相同的工作。

# jquery-mobile - jQuery Mobile：Listview 刷新时出错

> ID：15166612
> 
> 赞同：1
> 
> 时间：2013-03-01T20:47:29.820
> 
> 标签：jquery-mobile

我见过很多人遇到这个问题，但由于某种原因，我无法找到有效的解决方案。

我收到此错误：

```
Uncaught Error: cannot call methods on listview prior to initialization; attempted to call method 'refresh' 
```

这是正在发生的事情的细分。

我正在绑定这个事件：

```
$('#person').bind('pagebeforeshow', function(e, data){
    Person.getPersonData();
}); 
```

在 getPersonData() 方法中，我使用下划线 _.after 函数来呈现模板并在完成所有 ajax 调用后刷新三个列表视图。我正在使用 Knockout.js 应用一些数据绑定。

```
var tmplMarkup = $('#tmpl-person').html();
var compiledTmpl = _.template( tmplMarkup, {data: Person.data} );
$('#person-wrapper').html(compiledTmpl);
$('#person-info-wrapper').listview('refresh');
$('#person-related-wrapper').listview('refresh');
$('#person-groups-wrapper').listview('refresh');
$('#person-notes-wrapper').listview('refresh');
ko.applyBindings(Person.data, document.getElementById('person-notes-form')); 
```

我不确定我在这里做错了什么。我尝试绑定到不同的页面加载事件，但没有运气。我什至尝试在进行 ajax 调用几秒钟后使用 setTimeOut 刷新列表视图，但这也无济于事。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:52:24.020

这个问题很容易解决。

用这个：

```
$('#listview-id').listview().listview('refresh'); 
```

**`#listview-id`**您的列表视图 ID（或任何其他参考）在哪里，首先**`listview()`**将初始化它，第二个将刷新它。

如果你想找到更多关于这个问题的信息，你可以在这篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到它，老实说这是我的个人博客文章。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。查找名为：**标记增强问题的章节**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:54:07.167

尝试如下

```
$('#person-info-wrapper ul').listview();
$('#person-related-wrapper ul').listview();
$('#person-groups-wrapper ul').listview();
$('#person-notes-wrapper ul').listview(); 
```

# php - Predis 别名分片

> ID：15166613
> 
> 赞同：1
> 
> 时间：2013-03-01T20:47:30.550
> 
> 标签：php, redis, predis

我正在尝试通过别名使用 Predis 分片，如此[处所述](https://github.com/nrk/predis/issues/36#issuecomment-12193172)。我的代码基本相同，但我只返回空数组。我的哈希键周围需要 {} 吗？（编辑：不，刚刚尝试过）

```
 $api->get("/test", function () {

    $servers = [
      ["alias" => "metadata", "port" => 6380],
      ["alias" => "relations", "port" => 6381],
      ["alias" => "dim_provider", "port" => 6382],
      ["alias" => "dim_revctrcode", "port" => 6383],
      ["alias" => "dim_enccode", "port" => 6384],
      ["alias" => "dim_pos", "port" => 6385]
    ];

    $options = [

      "nodehash" => function ($connection) { return $connection->getParameters()->alias; },

      "cluster" => function ($options) {
        $replicas = Predis\Cluster\Distribution\HashRing::DEFAULT_REPLICAS;
        $hashring = new Predis\Cluster\Distribution\HashRing($replicas, $options->nodehash);
        $cluster = new Predis\Connection\PredisCluster($hashring);

        return $cluster;
      }
    ];

    $redis = new Predis\Client($servers, $options);

    try {
      $test = $redis->scard("dim_provider");
      print_r($test);  // Prints 0 for scard or empty Array for hgetall
    } catch (Exception $e) {
      print $e->getMessage();
    }

    $redis = new Predis\Client(["port" => 6382]);
    $test = $redis->scard("dim_provider");
    print_r($test);  // Works.
  }); 
```

编辑：如果我只在`$servers`阵列中放置一台服务器，它也可以工作。因此，散列似乎无法正常工作。当我在返回值前面抛出一些回声时，`nodehash`我可以看到它正在返回别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:31:59.440

为 Redis 连接分配`dim_provider` **别名**和尝试从服务器获取命名**密钥**`dim_provider`是两件不同的事情。

在您的脚本中，您尝试使用连接别名（而不是通常的对）设置 Redis 实例集群，以计算您的密钥空间在充当[数据分片](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)`ip:port`的多个 Redis 服务器之间的分布。使用此设置，密钥会根据底层分布算法进行分片，并且可以存储在组成集群的 6 台服务器中的任何一台上，并在阵列中定义。`dim_provider``$servers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:11:45.107

我想补充一下，一旦 nrk 让我走上正轨，实施我的集群策略是多么容易。这是一个写得很好的库。

```
 $api->get("/test", function () {

    Class KeyCluster extends Predis\Connection\PredisCluster {

      public function __construct() {
        $this->pool = Array();
      }

      public function add (Predis\Connection\SingleConnectionInterface $connection) {
        $parameters = $connection->getParameters();
        if (isset($parameters->table)) {
            $this->pool[$parameters->table] = $connection;
        } else {
            $this->pool[] = $connection;
        }
      }

      public function getConnection (Command\CommandInterface $command) {
        $key = $command->getArgument(0);
        $table = explode(":", $key)[0];
        return isset($this->pool[$table]) ? $this->pool[$table] : null;
      }
    }

    $redis = new Predis\Client([
      "tcp://127.0.0.1:6382?table=dim_provider",
      "tcp://127.0.0.1:6383?table=dim_pos"
    ],[
      "cluster" => new KeyCluster
    ]);

    $result = $redis->scard("dim_provider");
    print_r($result);
  }); 
```

# c - 二叉树的层序遍历

> ID：15166617
> 
> 赞同：4
> 
> 时间：2013-03-01T20:47:39.253
> 
> 标签：c, algorithm, binary-tree

我想执行二叉树的级别顺序遍历。因此，对于给定的树，说：

```
 3
    / \
   2   1
  / \   \
 4   6   10 
```

输出将是：

```
3 2 1 4 6 10 
```

我知道我可以使用某种队列，但是在 C 中递归执行此操作的算法是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T20:50:53.183

图算法称为广度优先搜索，它使用队列进行层序遍历，这里是伪代码

```
void breadth_first(Node root)
{
  Queue q;
  q.push(root);
  breadth_first_recursive(q)
}

void breadth_first_recursive(Queue q)
{
  if q.empty() return;
  Node node = q.pop()
  print Node
  if (n.left) q.push(n.left)
  if (n.right) q.push(n.right)
  breadth_first_recursive(q)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T20:52:43.533

这里给你来自维基百科的伪代码

```
levelorder(root)
  q = empty queue
  q.enqueue(root)
  while not q.empty do
    node := q.dequeue()
    visit(node)
    if node.left ≠ null
    q.enqueue(node.left)
    if node.right ≠ null
    q.enqueue(node.right) 
```

然后，您可以将其转换为微不足道的 C...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-08T07:20:55.443

这里来自 C5 库的代码（无递归函数）：[C5 UserGuideExamples - TreeTraversal](https://github.com/sestoft/C5/blob/master/C5.UserGuideExamples/TreeTraversal.cs)

```
public static void BreadthFirst(Tree<T> t, Action<T> action)
{
  IQueue<Tree<T>> work = new CircularQueue<Tree<T>>();
  work.Enqueue(t);
  while (!work.IsEmpty)
  {
    Tree<T> cur = work.Dequeue();
    if (cur != null)
    {
      work.Enqueue(cur.t1);
      work.Enqueue(cur.t2);
      action(cur.val);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-13T10:53:33.927

另一种无递归方法..

```
void LevelOrder(node * root)
{
  queue<node *> q;
    node *n=new node;
    n=root;
    while(n)
    {
        cout<<n->data<<" ";
        if(n->left)
            q.push(n->left);
        if(n->right)
            q.push(n->right);
        n=q.front();
        q.pop();

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-28T15:33:08.583

```
void    levelorder    (Node *root)
{
   if(!root)
       return;
   queue<Node*>    Q;
   Q.push(root);
   while(!Q.empty())
   {
    Node *current   =    Q.front();//returns the front element in queue
    cout <<current->data;//printing the front node of queue
    if(current->left!=NULL)
      Q.push(current->left);//pushing left child
    if(current->right!=NULL)
      Q.push(current->right);//pushing right child
     Q.pop();//removing front element from queue.
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-28T06:56:15.873

在C语言中，基本队列可以通过栈使用，即数组

```
#include<stdio.h>

#include<stdlib.h>

#define MaxSize 10

//typedef char ElemType;
typedef int ElemType;
typedef struct BiTNode {
    ElemType data;
    struct BiTNode * lchild, * rchild;
}
BiTNode, * BiTree;

void BuildTree(BiTree * T) {
    /*
                            t1
                    t2              t3
                t4       t5              t6

    */
    BiTNode * t1 = T;
    t1 -> data = 3;

    BiTree t2 = (BiTNode * ) malloc(sizeof(BiTNode));
    t2 -> data = 2;
    t1 -> lchild = t2;

    BiTree t3 = (BiTNode * ) malloc(sizeof(BiTNode));
    t3 -> data = 1;
    t1 -> rchild = t3;

    BiTree t4 = (BiTNode * ) malloc(sizeof(BiTNode));
    t4 -> data = 4;

    BiTree t5 = (BiTNode * ) malloc(sizeof(BiTNode));
    t5 -> data = 6;
    t2 -> lchild = t4;
    t2 -> rchild = t5;

    BiTree t6 = (BiTNode * ) malloc(sizeof(BiTNode));
    t6 -> data = 10;
    t3 -> rchild = t6;

    t3 -> lchild = NULL;
    t4 -> lchild = NULL;
    t4 -> rchild = NULL;
    t5 -> lchild = NULL;
    t5 -> rchild = NULL;
    t6 -> lchild = NULL;
    t6 -> rchild = NULL;
}
void print2DUtil(struct BiTNode * root, int space) {
    // Base case
    if (root == NULL)
        return;

    // Increase distance between levels
    space += MaxSize;

    // Process right child first
    print2DUtil(root -> rchild, space);

    // Print current node after space
    // count
    printf("\n");
    for (int i = MaxSize; i < space; i++)
        printf(" ");
    printf("%d\n", root -> data);

    // Process left child
    print2DUtil(root -> lchild, space);
}
// Wrapper over print2DUtil()
void PrintTree(struct BiTNode * root) {
    // Pass initial space count as 0
    print2DUtil(root, 0);
}
void visit(BiTree T) {
    printf("%d  ", T -> data);
}
//BFS
void BFS(BiTree T) {
    if (T != NULL) {
        int front = 0;
        int rear = 0;
        BiTree queue[MaxSize];
        BiTree p;
        p = T;
        rear = (rear + 1) % MaxSize;
        queue[rear] = p;
        while (rear != front) {
            front = (front + 1) % MaxSize;
            p = queue[front];
            visit(p);
            if (p -> lchild != NULL) {
                rear = (rear + 1) % MaxSize;
                queue[rear] = p -> lchild;
            }
            if (p -> rchild != NULL) {
                rear = (rear + 1) % MaxSize;
                queue[rear] = p -> rchild;
            }

        }
    }
}

void DelTree(BiTree T) {
    if (T == NULL) return;
    DelTree(T -> lchild);
    DelTree(T -> rchild);
    free(T);
}

int main() {
    BiTree t = (BiTNode * ) malloc(sizeof(BiTNode));
    printf("Tree：&quot;);
    BuildTree(t);
    PrintTree(t);
    printf("\n");
    printf("BFS：&quot;);
    BFS(t);
    printf("\n");

    DelTree(t);
} 
```

# android - 如何制作包含大量条目的详细表格？

> ID：15166619
> 
> 赞同：2
> 
> 时间：2013-03-01T20:47:41.597
> 
> 标签：android, android-layout

我需要创建可以容纳大量条目的表（它是公共汽车时刻表）。

我需要能够设置某些单个单元格的颜色。而且我显然希望它在各种手机屏幕尺寸上都能玩得很好。

所以问题是：

1.  我该如何去创建这个表？
2.  什么是满足我需要的最佳方法？

这是包含我需要制作的数据的表之一：

![带有数据表的图像](../Images/f61aa3ee1e224d8690744dc27c82d9ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:51:31.847

我建议为此使用 ListView。这是一个很好的教程：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T06:16:10.450

我最终在 Excel 中创建表格并设置表格样式，并将它们导出为 HTML。然后我只是将它们加载到 webview 中。

# java - H2数据库TIMESTAMP列默认值

> ID：15166629
> 
> 赞同：10
> 
> 时间：2013-03-01T20:48:26.230
> 
> 标签：java, jpa, h2

我正在用 H2 数据库编写集成测试。我的数据库（生成）初始化包括这个脚本（因为生成的连接表没有这个列）：

```
ALTER TABLE INT_USR ADD IU_INSDTTM TIMESTAMP DEFAULT NOW(); 
```

这就是我创建记录的方式：

```
Integration integrationOne = createIntegration(firstId, "FIRST");
Integration integrationTwo = createIntegration(secondId, "SECOND");
flushAndClear();
userService.logRecentIntegration(integrationOne.getId(), user.getId());
flushAndClear();
userService.logRecentIntegration(integrationTwo.getId(), user.getId()); //1 
```

方法 logRecentIntegrations(.., ..) 只是调用 DAO 并且 dao 这样做：

```
Query query = entityManager.createNativeQuery(
    "INSERT INTO INT_USR (USR_ID, INT_ID) VALUES (?, ?)");
query.setParameter(1, userId)
    .setParameter(2, integrationId);
query.executeUpdate(); 
```

后来在我的测试中：

```
Query query = entityManager.createNativeQuery(
    "SELECT * FROM INT_USR ORDER BY IU_INSDTTM");
List resultList = query.getResultList(); 
```

当我在 resultList 中调试此测试时，有两条记录（正确），但它们具有相同的时间戳。即使我在标记为 //1 的行上插入了一个断点并等待了一段时间 - 所以插入之间的时间间隔会很大。（Thread.sleep - 结果相同）

我试图将 SQL 脚本修改为

```
ALTER TABLE INT_USR ADD IU_INSDTTM TIMESTAMP DEFAULT CURRENT_TIMESTAMP; 
```

但结果相同。为什么两个结果具有相同的时间戳？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T21:44:37.370

如文档[所述，函数 CURRENT_TIMESTAMP](http://h2database.com/html/functions.html#current_timestamp)始终在事务中返回相同的值。此行为匹配其他数据库，例如 PostgreSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T20:11:44.143

您可以在测试中添加以下注释以禁用事务。

`@Transaction(propagation = Propagation.NEVER)`

注意：该注释来自 Spring，对于您正在运行的环境可能还有其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T13:48:35.973

请注意，如果您正在生成休眠 pojo，您也可以使用`CreationTimestamp`. 我刚试过，它似乎工作！

```
 @CreationTimestamp
  protected LocalDateTime createdDate; 
```

# objective-c - Objective-C @synthesize 语法

> ID：15166631
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:48:28.537
> 
> 标签：objective-c, syntax, synthesize

作为 iOS 应用程序编程的新手，我发现从一些示例代码开始非常有用。因此，我最终得到了一个 .m 文件，它以一些看起来像的行开头

```
@synthesize valueOne= _valueOne; 
```

我注意到拥有这样的语法使得无法以编程方式设置 valueOne 的属性，例如执行类似的操作

```
valueOne.tag = 3 
```

因此，出于我自己的目的，我对“=_valueOne”部分进行了注释，而对代码的功能没有任何明显的损害。

这种语法的意义是什么，我的示例代码的作者使用它的考虑是什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:50:19.037

`valueOne`此语法在 name 下合成支持 ivar `_valueOne`。您可以简单地编写代码看起来像

```
_valueOne.tag = 3; 
```

也就是说，通常认为尽可能使用属性访问器会更好，因此您通常会将其写为

```
self.valueOne.tag = 3; 
```

值得注意的例外是当您在`-init`,`-dealloc`或您自己的自定义 getter/setter 中时，您仍想直接使用 ivar。

* * *

在 ivar 名称上使用前缀下划线通常被认为是一种好的做法，因为这意味着如果您编写`valueOne.tag = 3;`并且打算使用该属性，则会收到编译器错误，而不是静默使用 ivar。如果您打算使用 ivar，则只需使用下划线前缀，如`_valueOne.tag = 3;`.

这是一种常见的做法，以至于现代 clang 的自动合成行为将使用前导下划线样式用于 ivars。这意味着如果您`@synthesize`完全删除该行，它的行为就像您拥有`@synthesize valueOne = _valueOne;`.

# c# - 具有原始类型的 ConfigurationElementCollection

> ID：15166636
> 
> 赞同：2
> 
> 时间：2013-03-01T20:48:48.107
> 
> 标签：c#, app-config, system.configuration

我正在使用 System.Configuration 命名空间类型来存储我的应用程序的配置。我需要存储一组原始类型（System.Double）作为该配置的一部分。创建以下内容似乎有点矫枉过正：

```
[ConfigurationCollection(typeof(double), AddItemName="TemperaturePoint", 
    CollectionType=ConfigurationElementCollectionType.BasicMap)]
class DoubleCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return // Do I need to create a custom ConfigurationElement that wraps a double?
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return // Also not sure what to do here
    }
} 
```

我无法想象我是第一个遇到这个问题的人。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:16:31.360

没有明确的“嘿，我想在此处填充值列表”处理程序，但您有几个选择：

实现一个自定义`IConfigurationSectionHandler`（比元素集合等简单的方式）并通过以下方式引用：

```
<configSections>
    <sectionGroup name="mysection" type="type of handler"/>
</configSections>

<mysection>
  some xml representation of values
</mysection> 
```

捎带一个现有的处理程序，比如`SingleTagSectionHandler`- 这是一个看起来毛茸茸的衬里，它从配置文件中的这个条目中提取一组值：

```
<configuration>
    <configSections>
        <section name="TemperaturePoints" 
             type="System.Configuration.SingleTagSectionHandler" 
             allowLocation="true" 
             allowDefinition="Everywhere"/>
    </configSections>

    <TemperaturePoints values="1,2,3,4,5,6,7,8,9,10"/>
</configuration>

var values = ((string)((Hashtable)ConfigurationManager
     .GetSection("TemperaturePoints"))["values"])
     .Split(',')
     .Select(double.Parse); 
```

或者分开一点：

```
var section = (Hashtable)ConfigurationManager.GetSection("TemperaturePoints");
var packedValues = (string)section["values"];
var unpackedValues = packedValues.Split(',');
var asDoubles = unpackedValues.Select(double.Parse).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:34:03.907

我能够在没有太多定制的情况下让它工作。它类似于 JerKimball 的答案，但我避免使用 ConfigurationProperty 的 TypeConverter 属性来处理自定义字符串处理。

我的自定义配置部分实现：

```
using System.Configuration;
using System.ComponentModel;

class DomainConfig : ConfigurationSection
{     

    [ConfigurationProperty("DoubleArray")]
    [TypeConverter(typeof(CommaDelimitedStringCollectionConverter))]
    public CommaDelimitedStringCollection DoubleArray
    {
        get { return (CommaDelimitedStringCollection)base["DoubleArray"]; }
    }
} 
```

如何使用：

```
var doubleValues = from string item in configSection.DoubleArray select double.Parse(item); 
```

和配置文件：

```
<DomainConfig DoubleArray="1.0,2.0,3.0"></DomainConfig> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-23T18:00:27.173

这是我感觉正确的实现。

*   每个值在单独的行上（便于区分）
*   高信噪比编码的最小开销
*   简单读取数值

底部提供了有限的解释。如果您想了解更多 System.Configuration API 的基础知识，我推荐 Jon Rista 在 CodeProject.com 上的[Unraveling the Mysteries of .NET 2.0 Configuration系列文章。](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-Configuration)

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="strings" 
                 type="Sample.StringCollectionConfigSection, SampleAssembly"/>
        <section name="databases" 
                  type="Sample.StringCollectionConfigSection, SampleAssembly"/>
    </configSections>
    <strings>
        <add>dbo.Foo</add>
        <add>dbo.Bar</add>
    </strings>
    <databases>
        <add>Development</add>
        <add>Test</add>
        <add>Staging</add>
    </databases>
</configuration> 
```

**API 使用**

```
class Program
{
    static void Main(string[] args)
    {
        foreach (var s in StringCollectionConfigSection.Named("strings"))
        {
            Console.WriteLine(ignoreExpression);
        }
        foreach (var d in StringCollectionConfigSection.Named("strings"))
        {
            Console.WriteLine(ignoreExpression);
        }
    }
} 
```

**执行**

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Xml;

hnamespace Sample 
{
    public sealed class StringCollectionConfigSection : ConfigurationSection
    {
        public static StringElementCollection Named(string configSection)
        {
            var section = (StringCollectionConfigSection)ConfigurationManager.GetSection(configSection);
            return section.Elements;
        }

        [ConfigurationProperty("", Options = ConfigurationPropertyOptions.IsDefaultCollection)]
        public StringElementCollection Elements
        {
            get { return (StringElementCollection)base[""]; }
            set { base[""] = value; }
        }
    }

    [ConfigurationCollection(typeof(StringElement))]
    public sealed class StringElementCollection : ConfigurationElementCollection, IEnumerable<string>
    {
        public StringElement this[int index]
        {
            get { return (StringElement)BaseGet(index); }
            set
            {
                if (BaseGet(index) != null) { BaseRemoveAt(index); }
                BaseAdd(index, value);
            }
        }

        public new StringElement this[string key]
        {
            get { return (StringElement)BaseGet(key); }
        }

        protected override ConfigurationElement CreateNewElement()
        {
            return new StringElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((StringElement)element).Value;
        }

        public new IEnumerator<string> GetEnumerator()
        {
            var enumerator = base.GetEnumerator();
            while (enumerator.MoveNext())
            {
                yield return ((StringElement)enumerator.Current).Value;
            }
        }
    }

    public class StringElement : ConfigurationElement
    {
        protected override void DeserializeElement(XmlReader reader, bool serializeCollectionKey)
        {
            Value = (string)reader.ReadElementContentAs(typeof(string), null);
        }

        public string Value {get; private set; }
    }
} 
```

关于代码的学习点。

*   在 app.config 中，确保在定义配置部分的名称时使用命名空间和程序集名称。
*   我不希望我的收藏中出现额外的子元素。我只想要保存字符串值的元素。
    *   类中属性上`ConfigurationPropertyAttribute`定义的使用空名来完成我想要实现的默认集合样式。`StringElementCollection Elements``StringCollectionConfigSection`

* * *

```
<strings>
    <elements>
       <add>...</add>
       <add>...</add>
    <elements>
</strings> 
```

*   `DeserializeElement`on允许我使用 XmlNode的`StringElement`innerText 作为值，而不是属性。

*   `IEnumerator<string>`on`ConfigurationElementCollection`加上`StringElementCollection Named(string configSection)`on`StringCollectionConfigSection`给了我想要的干净的 API 。

# c# - 如何在 Visual Studio 中查看为 c# 控件自动生成的设计器代码？

> ID：15166637
> 
> 赞同：1
> 
> 时间：2013-03-01T20:48:58.587
> 
> 标签：c#, visual-studio-2010

现在对于我的用户控件，我右键单击解决方案资源管理器中的控件，然后选择“查看代码”。然后，在下拉框中枚举所有类的元素的右上角，我选择了灰色的构造函数，这将我带到了我正在寻找的自动生成的 .designer.cs 文件。

我觉得这是一种非常迂回的方式，它不适合我。我应该在避免编辑这些文件方面做得更好吗？它们是不是很难刻意理解，还是我只是明显错过了 Visual Studio 中的一些简单内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:51:53.110

您应该能够非常简单地使用解决方案资源管理器的树形视图来展开用户控件项并查看代码隐藏和设计器文件。

这很好奇，所以我想知道什么*样*的用户控件（任何特定的项目类型）？

至于避免编辑这些自动生成的文件：是的，你应该厌倦这样做，并尽可能避免它。如果重新生成代码，您的更改将会消失（我想用户控件不太*可能*），并且生成它的工具的开发人员不能保证它在编辑时可以正常工作。

但是，有时您确实想编辑这些类型的文件。所以用你自己的判断来评估这样做的价值。我发现自己经常深入 DBML 设计器文件以删除在部分定义中与我自己的冲突的默认构造函数，还没有找到另一种方法来做我想做的事。情况就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:52:57.303

编辑自动生成的代码从来都不是一个好主意。原因是代码可以随时生成，您的更改将丢失。如果你真的，真的需要编辑代码，你应该使用部分类来这样做。但是 95% 的情况下，您一开始就不需要编辑自动生成的代码。你到底想要完成什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:57:14.727

一种简单的方法：假设您有一个**名为**`Label1`.

如果它从未在您的代码中实际使用过，请将一些使用它的代码放在您的方法之一中的某处：

```
private void Test() {
  Label1.Text = null;
} 
```

现在，将光标放在`Label1`控件上并按`F12`。这将带您了解`Label1`

希望有帮助！

# javascript - 拉力赛列出所有功能查询

> ID：15166638
> 
> 赞同：2
> 
> 时间：2013-03-01T20:49:04.470
> 
> 标签：javascript, rally

我正在尝试找到所有可用功能的完整列表（我没有很多，只是修补）。我尝试了许多不同的方法，但似乎找不到引用功能的正确语法。

第一次尝试：

```
type: 'PortfolioItem/Feature'
key: 'Feature"
fetch: 'Name' 
```

这导致了一个错误。然后我尝试了：

```
type: 'hierarchicalrequirement'
key: 'features'
fetch: 'Name,Parent.Name' 
```

也是一个错误。

我已将类型列为 PortfolioItem、PortfolioItem/Feature 和 Feature。我已经获取了 Name、formattedID、Parent.Name、parent.FormattedID，也许还有更多。我似乎找不到在哪里搜索以查看所有可用功能的列表。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:11:36.373

AppSDK 1.x 并未真正设置为处理具有动态投资组合项目类型的投资组合项目。至少，您需要更新您的 API 设置以使用与 dyna-types 兼容的设置：

`rallyDataSource.setApiVersion("1.40");`

即使进行了这种更改，对于 AppSDK 1.x，我通常也必须查询 type: 'PortfolioItem' 并过滤到功能（或其他类型）客户端。

我建议使用[AppSDK 2](http://developer.help.rallydev.com/apps/2.0p5/doc/)开发您的应用程序，该应用程序目前处于预览状态，但受支持的 Javascript SDK 向前发展：

# api - 如何将所有重定向到 Wiki API 中的页面？

> ID：15166641
> 
> 赞同：1
> 
> 时间：2013-03-01T20:49:16.580
> 
> 标签：api, redirect, wiki, wikipedia-api

我需要标题的所有名称（重定向）。示例：对于标题“欧洲人权法院”，我需要重定向列表：

*   Cour européenne des droits de l'homme
*   欧洲人权法院
*   欧洲人权法院
*   欧洲人权法院
*   人权法院
*   斯特拉斯堡法院
*   斯特拉斯堡法院
*   欧洲人权法院
*   欧洲人权法院大法庭
*   对欧洲人权法院的批评
*   对欧洲人权法院的批评
*   欧洲人权法院

有任何想法吗？

请求示例：[http ://en.wikipedia.org/w/api.php?action=query&redirects=true&titles=Strasbourg%20Court&format=xml](http://en.wikipedia.org/w/api.php?action=query&redirects=true&titles=Strasbourg%20Court&format=xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:26:15.717

您可以使用[该`backlinks`模块](https://www.mediawiki.org/wiki/API%3aBacklinks)并将其`bffilterredir`参数设置为`redirects`：

[http://en.wikipedia.org/w/api.php?action=query&list=backlinks&blfilterredir=redirects&bltitle=European%20Court%20of%20Human%20Rights&bllimit=max](http://en.wikipedia.org/w/api.php?action=query&list=backlinks&blfilterredir=redirects&bltitle=European%20Court%20of%20Human%20Rights&bllimit=max)

# facebook-fql - 如何在我的网页上显示 Facebook 页面的最后一篇文章

> ID：15166642
> 
> 赞同：0
> 
> 时间：2013-03-01T20:49:20.397
> 
> 标签：facebook-fql

我有一个可公开访问的 Facebook 页面。在我的网站上，我想显示此页面发布的最后一篇文章。

我制作了一个脚本，它使用 facebook php-api 和 FQL 从页面中检索事件。但我只是不知道如何构建一个 FQL 来显示我页面上的最新帖子。我看过流表并认为我应该像这样使用它：

```
SELECT created_time, 
       likes, message, post_id, share_count, type
FROM 
       stream 
WHERE 
       actor_id = {$page}
LIMIT 5 
```

但这导致我需要一个 Starred/Indexable 列。很公平，但我不知道要使用哪个加星标的列。

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:53:47.447

你应该使用：`source_id`而不是`actor_id`

# excel - ahk 热键配置文件

> ID：15166663
> 
> 赞同：1
> 
> 时间：2013-03-01T20:50:27.087
> 
> 标签：excel, scripting, autohotkey, key-bindings, vba

这是我的工作代码，以防万一这对其他人有帮助！

```
#Warn  ; Enable warnings to assist with detecting common errors.
#SingleInstance FORCE

GUI, Add, Radio, vInventoryCompare, Compare Inventories
GUI, Add, Radio, vProductionSheet, Production Spreadsheet Stuff
GUI, Add, Radio, vInventorySheet, Inventory Sheet Stuff
GUI, Add, Radio, vStop, Disable Hotkeys
GUI, Add, Button, default xm, Set  ; xm puts it at the bottom left corner.
GUI, Show

ButtonSet:
GUI, Submit, NoHide
Return

Insert:: ; paste values
send, {alt}hvv
return

; ----------------------------------

Home::
If InventoryCompare = 1 ; font size up 3 times
{
Send, {enter}{up}
Loop 3
{
Send, {alt}hfg
}
return
}
Else If ProductionSheet = 1 ; Recheck
{
Send, {enter}{up}
Send, {alt}hfc{down 7}{right 3}{enter}
Send, {F2}{left 5}
Send, R-{enter}{up}
return
}
Else If Stop = 1
{
send {Home}
Return
}
Return

; ----------------------------------

End::
If InventoryCompare = 1 ; autocounter for bcg
{
Sendraw, =SUMIF($A$8:$A$38,A3,$F$8:$F$38)
send {enter}
return
}
Else If ProductionSheet = 1 ; discard
{
Send, D{enter}{up}
Send, ^b
return
}
Else If InventorySheet = 1 ; write ok+ and tab
{
send {tab}
Sendraw, ok+
send {tab}
return
}
Else If Stop = 1
{
send {end}
Return
}
Return

; ----------------------------------

PgUp::
If InventoryCompare = 1 ; green bg with white text
{
Send, {alt}hh{down 6}{right 5}{enter} ; bg green
Send, {alt}hfc{down}{left 4}{enter} ; font white
return
}
Else If ProductionSheet = 1 ; ok+ coloring
{
Send, {enter}{up}
Send, {alt}hfc{down 7}{right}{enter}
return
}
Else If InventorySheet = 1 ; write ok and tab
{
send {tab}
Sendraw, ok
send {tab}
return
}
Else If Stop = 1
{
send {PgUp}
Return
}
Return

; ----------------------------------

PgDn:: 
If  InventoryCompare = 1 ; red bg with white text
{
Send, {alt}hh{down 6}{right}{enter} ; bg red
Send, {alt}hfc{down}{left 4}{enter} ; font white
return
}
Else If ProductionSheet = 1 ; ok- coloring
{
Send, {enter}{up}
Send, {alt}hfc{down 7}{left 3}{enter}
return
}
Else If InventorySheet = 1 ; write ok- and tab
{
send {tab}
Sendraw, ok-
send {tab}
return
}
Else If Stop = 1
{
send {PgDn}
Return
}
Return

; ----------------------------------

PrintScreen::
If InventoryCompare = 1 ; Break merged top cell of old inventories
{
send {F2} ; enter cell
sleep 200
send +{left 50} ; select name
sleep 200
send ^x ; cut name
sleep 200
send {enter}{up} ; reselect cell
sleep 200
send {alt}hmu ; break merged cells
sleep 200
send {down}{f2}^v{enter} ; paste name
return
}
Else If Stop = 1
{
send {PrintScreen}
Return
}
Return

GuiClose:
ExitApp 
```

老问题：我有 3 组键绑定宏，我想使用带有单选按钮（或其他方式）的 GUI 将它们整合到一个脚本中，以选择当前处于活动状态的热键集。不幸的是，每次我运行脚本时，我都会不断收到“重复热键”错误（在 End 键上，如果这告诉你什么的话）。

我一直在网上搜寻，试图找到尝试同样事情的人，但我一无所获。我在正确的轨道上吗？甚至可能吗？

谢谢你的时间！

```
GUI, Add, Radio, vInventoryCompare, Compare Inventories
GUI, Add, Radio, vProductionSheet, Production Spreadsheet Stuff
GUI, Add, Radio, vInventorySheet, Inventory Sheet Stuff
GUI, Add, Radio, vDisable, Disable hotkeys
GUI, Show

GuiClose:
ExitApp

IF ErrorLevel
ExitApp

Insert:: ; paste values
send, {alt}hvv
return

IF %vInventoryCompare% = 1
{
End:: ; autocounter for bcg
Sendraw, =SUMIF($A$8:$A$38,A3,$F$8:$F$38)
send {enter}
return

Home:: ; font size up 3 times
Send, {enter}{up}
Loop 3
{
Send, {alt}hfg
}
return

PgUp:: ; green bg with white text
Send, {alt}hh{down 6}{right 5}{enter} ; bg green
Send, {alt}hfc{down}{left 4}{enter} ; font white
return

PgDn:: ; red bg with white text
Send, {alt}hh{down 6}{right}{enter} ; bg red
Send, {alt}hfc{down}{left 4}{enter} ; font white
return

PrintScreen:: ; Break merged top cell of old inventories
send {F2} ; enter cell
sleep 200
send +{left 50} ; select name
sleep 200
send ^x ; cut name
sleep 200
send {enter}{up} ; reselect cell
sleep 200
send {alt}hmu ; break merged cells
sleep 200
send {down}{f2}^v{enter} ; paste name
return

}

IF %vProductionSheet% = 1
{
End:: ; discard
Send, D{enter}{up}
Send, ^b
return

Home:: ; Recheck
Send, {enter}{up}
Send, {alt}hfc{down 7}{right 3}{enter}
Send, {F2}{left 5}
Send, R-{enter}{up}
return

PgUp:: ; ok plus coloring
Send, {enter}{up}
Send, {alt}hfc{down 7}{right}{enter}
return

PgDn:: ; ok minus coloring
Send, {enter}{up}
Send, {alt}hfc{down 7}{left 3}{enter}
return
}

IF %vInventorySheet% = 1
{
End::
send {tab}
Sendraw, ok+
send {tab}
return

PgUp::
send {tab}
Sendraw, ok
send {tab}
return

PgDn::
send {tab}
Sendraw, ok-
send {tab}
return
}

IF %vDisable% = 1
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:01:40.903

您不能以幼稚的方式多次定义相同的热键，唯一的方法是使用[#IfWinActive](http://www.autohotkey.com/docs/commands/_IfWinActive.htm)。

我建议不要制作多个热键和多个 if 语句，而是制作一个热键并将所有这些 if 语句放入其中。

```
hotkey::
    if(statement)
    {
        do this;
    }
    else if(statement)
    {
        do that;
    }
    else...
return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:20:05.267

我知道您已经确定了答案，但是如果您使用 AutoHotKey_L，您可以使用`#IF`.
`#IF`像`#IfWindowActive`, 但随后使用常规 if 语句。
在这里，您可以创建一个脚本，如：

```
#IF (vInventoryCompare = 1)
    Home::
        Send....
        .
        .
    Return
#IF (vProductionSheet = 1)
    Home::
        Send....
        .
        .
    Return
#IF 
```

Ps 如果你想发送 OK+，你可以用 SendRaw 来做，但你也可以用普通的 Send 来做。在这里你可以这样写： Send, OK+=
+ 移动下一个字符。`Shift`+`=`是`+`。

# magento-1.7 - 从头开始制作 Magento 主题。该做什么和不该做什么？

> ID：15166665
> 
> 赞同：1
> 
> 时间：2013-03-01T20:50:29.507
> 
> 标签：magento-1.7

我正在非常努力地学习 magento 的内部工作原理，我看过很多视频教程，阅读了很多博客文章和教程，并且有点掌握它的窍门。我遇到的唯一问题是我只能找到基于版本太旧而无法用作参考的教程和视频。

我构建了一个 HTML 购物车模板。我无法确定从哪里开始创建新主题以作为其基础。

我是否复制默认的应用程序和皮肤文件夹并进行修改？我尝试过，无法弄清楚。

我在问是否有人对新的 1.7 magento 有任何深入的资源，关于从头开始主题化以及使用文件、块和布局。

我有编程学位，但是我不习惯这个版本的 MVC。

寻找提示、指针、书籍、教程、截屏视频，以及任何可以帮助我构建现代 magento 主题的东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:36:05.680

之前和我有同样的问题，请检查这个：[http ://dbhoopendra.blogspot.in/2012/05/layouts.html#.UYibfKLDDRB](http://dbhoopendra.blogspot.in/2012/05/layouts.html#.UYibfKLDDRB)

# javascript - 运行 rake 资产预编译后，在非函数中未定义

> ID：15166666
> 
> 赞同：2
> 
> 时间：2013-03-01T20:50:43.133
> 
> 标签：javascript, ruby-on-rails, ruby, assets, precompile

应用程序有丰富的 javascript，包含一堆backbonejs 类、jquery、bootstrap 和许多库。

没有预编译，一切都很好。但是，当我在本地或生产服务器上运行 rake assets:precompile 时，会出现问题。

```
Uncaught TypeError: undefined is not a function                  application.js:8 
```

application.js 包含所有内容（乍一看），所以我不知道哪里有问题。即使我不知道从哪里开始寻找问题。在 application.js 中调试输出 javasript 是不可能的，对吧？

有任何想法吗？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:55:08.973

您可能正在无序地连接文件。确保以正确的顺序加载所有依赖项。例如：下划线必须在主干之前加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:17:26.403

经过几个小时的调试，我发现问题出在哪里。

PostsRou​​ter 是代码中路由器的名称，当它被预编译时，类的名称更改为“n”，这很糟糕，因为在构造函数中我有下面的代码

```
this.constructor.toString().match(/function\s*(\w+)/) 
```

所以我得到了错误的类名，但这仍然可以。然后我这样做：

```
new App.Collections["" + this.class_name + "Collection"] 
```

这就是问题所在。App.Collections.nCollection 不存在，正确的名称是 App.Collections.PostsCollection。

我通过将字符串文字添加到类定义中来修复它，而不是从构造函数名称中解析。

祝你今天过得愉快！

# css - 在 contenteditable="true" 的 div 内，在同一行显示两个 div，中间没有空格

> ID：15166673
> 
> 赞同：9
> 
> 时间：2013-03-01T20:51:29.740
> 
> 标签：css, html, contenteditable

```
<div id="test" class="pad" contenteditable="true">
  <div id="a" class="fif">text1</div>
  <div id="b" class="fif">text2</div>
</div> 
```

在上面的代码中，我有一个`contenteditable`div 和其中的许多 div（子 div）。子 div 的数量和 div 标签之间的内容动态变化。我希望`text1`and `text2`（即 div 标签之间的内容）显示在同一行，中间没有任何空格。同样，在输入`contenteditable`div 时，如果我按 ENTER 键，它应该转到下一行。

我试过了，但是当我在输入div`float:left`时按 ENTER 键时，它不允许我转到下一行。,使用时在 2 个 div 内容之间显示空白。我尝试使用http://www.w3.org/TR/css3-flexbox/[但](http://www.w3.org/TR/css3-flexbox/)没有得到想要的输出。`contenteditable``display:inline``span``flex`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-15T08:32:23.357

只需在 HTML 源代码中使`<div>`s 具有`display: inline`or`display: inline-block`并删除它们之间的空格。

是否使用`inline`或`inline-block`取决于您希望如何布局 div 中的内容。这是[一篇关于这个主题的 MDN 文章](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Visual_formatting_model)。

演示：http: [//jsfiddle.net/timdown/GVZPX/](http://jsfiddle.net/timdown/GVZPX/)

CSS：

```
.fif {
    display: inline; /* Or inline-block */
} 
```

HTML：

```
<div id="test" class="pad" contenteditable="true">
  <div id="a" class="fif">text1</div><div id="b" class="fif">text2</div>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-17T15:34:19.977

```
<div>
  <div style="display: inline-block;">1</div>
  <div style="display: inline-block;">2</div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-12T08:54:59.467

在最初发布该问题 5 年多后回答这个问题，因为没有任何答案可以排除 Tim Down 对实际问题的攻击。进一步详细说明，当您内联阻止两个元素时会发生以下情况：

两个内联块 div 之间的空白是预期的。当您内联一个元素（或在这种情况下为内联块）时，您会影响到指示浏览器将所有元素并排放置在同一行上。通过这样做，您会影响将您的 div 视为等同于行上的空格（空格/制表符等），因为它们共享行空间。

在您的代码段中，结束 div 标记 ( `</div>`) 和下一个开始`<div>`标记之间有 4 个空格字符。浏览器渲染引擎将多个空格缩小为一个空格，并且该单个空格占用了您在本例中观察到的额外字符。

因此，一旦您了解了上述内容，您就可以通过采用以下众多解决方法之一轻松解决此问题：

```
<div id="a" class="fif">text1</div><!-- 
--><div id="b" class="fif">text2</div> 
```

或者

```
<div id="a" class="fif">text1</div
><div id="b" class="fif">text2</div> 
```

或者

```
<div id="a" class="fif">text1</
div><div id="b" class="fif">text2</
div> 
```

最后一个是无效的 XML，但浏览器不会对此感到厌烦。

您的小提琴在这里与上述解决方法分叉：http: [//jsfiddle.net/AshwinPrabhuB/otavbncr/1/](http://jsfiddle.net/AshwinPrabhuB/otavbncr/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-19T11:06:43.020

用于`display:inline`内部 div

```
 #test div{
      display:inline;

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T20:59:25.503

出色地

```
.pad {
    background-color: #eee;
    padding: 4px;
    overflow:hidden  /*  first */
}
.fif {
    display: inline-block;
    margin: 0;
    padding: 4px 8px;
    float:left  /* second part */
} 
```

[jsFiddled here](http://jsfiddle.net/UwZsm/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T20:58:39.953

我不确定我是否完全理解，但这可能会有所帮助：http: [//jsfiddle.net/UwZsm/3](http://jsfiddle.net/UwZsm/3)

```
.fif {display: inline-block; margin: 0 -4px 0 0;} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T21:01:59.903

我测试了一个想法，我相信它适用于你所说的。

```
<html>
    <head>
        <title>test</title>
        <style>
            .fif{
                padding:0px;
                float:left;
            }
        </style>
    </head>
    <body>
        <div id="test" class="pad" contenteditable="true">
          <div id="a" class="fif">text1</div>
          <div id="b" class="fif">text2</div>
        </div>  
    </body>
</html> 
```

希望有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T21:09:01.003

好的，我知道您是否可以访问 html 代码。

```
 <div id="test" class="pad" contenteditable="true">
        <table>
          <tr>
           <td>
            <div id="a" class="fif">text1</div>
           </td>
           <td>
            <div id="b" class="fif">text2</div>
           </td>
          </tr>
         </table>
    </div>

<style>
.pad {
    background-color: #eee;
    padding: 0px;
    overflow:hidden
}
.fif {
    display: inline-block;
    margin: 0;
    padding: 0;
}
table,td,tr{
padding:0;
}

#a {
    background-color: #ddd;
}
#b {
    background-color: #ccc;
}
</style> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-14T14:01:40.980

[http://jsfiddle.net/hari_OM/4GfcJ/2/](http://jsfiddle.net/hari_OM/4GfcJ/2/)

这里没有任何空间。

```
<div id="test" class="pad" contenteditable="true">
    <div id="a" class="fif">text1</div><div id="b" class="fif">text2</div>
</div> 
```

# castle-windsor - 如何清除池中的对象？

> ID：15166684
> 
> 赞同：0
> 
> 时间：2013-03-01T20:51:56.227
> 
> 标签：castle-windsor

假设对象的创建依赖于一些很少但有时会改变的配置。汇集它们似乎是合乎逻辑的。但是当配置改变时——我希望它们被容器重新创建，即我需要丢弃现有的。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:34:31.223

没有专门针对这种情况的内置内容，但它可能是可行的。

很大程度上取决于您的应用程序以及这些对象的使用方式。也许具有可交换目标的代理将是一个不错的选择。也许不是。

很大程度上取决于这些对象的使用方式和频率。

# ios - 在发件人中使用带有 UIButton 的标签属性并尝试强制转换 id -> UIButton

> ID：15166685
> 
> 赞同：1
> 
> 时间：2013-03-01T20:51:56.497
> 
> 标签：ios, ios6, uibutton, uicontrol

第一次使用标签属性并想知道我在这里做错了什么。我有两个 UIButtons 去同一个选择器。我想添加一个标签来区分这样的：

```
buttonOne.tag=1;
buttonTwo.tag=2; 
```

在响应的选择器中，我试图从发件人中取出这个标签，但被告知`tag`在“__strong id”类型的对象上找不到。我知道这种方法很老套，但有没有一种简单的方法可以让它工作？

```
-(void)buttonClicked:(id)sender
{
  NSLog(@"you were clicked with %d", (UIButton *)sender.tag);
  [sender setSelected:YES];
} 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:52:57.947

雅普：

```
-(void)buttonClicked:(UIButton *)sender 
```

瞧。

或者，如果您担心使用那种丑陋的演员表，至少要注意运算符优先级：

```
((UIButton *)sender).tag 
```

# javascript - 强密码所需的正则表达式

> ID：15166697
> 
> 赞同：6
> 
> 时间：2013-03-01T20:52:40.913
> 
> 标签：javascript, .net, regex

任何人都可以帮助我使用正则表达式获取以下密码。

至少包括以下两项：

小写字母
大写字母
数字
“特殊字符”（例如 £、$、&、#）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T21:02:24.393

以下应该有效：

```
^(?![a-z]*$|[A-Z]*$|\d*$|[\W_]*$).*$ 
```

示例：[http ://www.rubular.com/r/effCmvehdx](http://www.rubular.com/r/effCmvehdx)

如果整个字符串完全由一组组成，则开头的负前瞻将导致失败。

请注意，即使这符合您的要求，这对于强密码来说也不是一个很好的正则表达式。您可能还需要长度检查，并且您可能需要至少三个这些组而不是两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:21:23.370

正如基思汤普森在评论中所说，我认为一个正则表达式在这里不值得。

下面的代码会做你想做的事，我认为它比单个正则表达式更具可读性、可维护性和更容易证明正确性：

```
string password = "123abc";
string[] regexes = new[]
    {
        "[a-z]", //any lowercase word
        "[A-Z]", //any uppercase word
        @"\d", //any digit
        @"\W" //special characters (or just [£$&#], adding the characters you want)
    };
bool isValid = regexes.Count(regex => Regex.IsMatch(password, regex)) >= 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:07:10.917

正如我在评论中所说，正则表达式几乎肯定不是这项工作的正确工具。编写一些迭代密码字符的代码会容易得多，计算每个类中的字符数。

您还没有定义什么是“特殊字符”。我假设它表示除字母或数字以外的任何字符（包括空格和控制字符）。我还假设“字母”仅指英文字母表的 26 个字母——这意味着非英文字母`ñ`是一个特殊字符。

举一个更简单的例子，正则表达式不太擅长表达“foo and bar in either order”之类的东西。您必须明确指定两个顺序：

```
 foo.*bar|bar.*foo 
```

在这种情况下，您需要 12 种不同的选择。我*认为*这是正确的，但我没有测试过。

```
[a-z].*[A-Z}|[A-Z].*[a-z}|[a-z].*[0-9]|[0-9].*[a-z]|[a-z].*[^a-zA-Z0-9]|[^a-zA-Z0-9].*[a-z]|[A-Z].*[0-9]|[0-9].*[A-Z]|[A-Z].*[^a-zA-Z0-9]|[^a-zA-Z0-9].*[A-Z]|[0-9].*[^a-zA-Z0-9]|[^a-zA-Z0-9].*[0-9] 
```

这是一个 egrep 风格或 Perl 风格的正则表达式。`grep`默认不识别`|`；如果您需要`grep`-style 正则表达式，请将每个替换`|`为`\|`.

如果要求发生变化，比如需要至少 5 类字符中的 3 类，您将需要完全重写正则表达式；你不能只是调整它。

请注意，您的要求仍然允许`Aa`。

# spring - @ManyToOne 作为对其他表的引用

> ID：15166698
> 
> 赞同：0
> 
> 时间：2013-03-01T20:52:43.733
> 
> 标签：spring, hibernate, jpa, spring-mvc

我希望帐户实体中的安全问题“引用”SecurityQuestion 表中的安全问题之一，而不是创建一个新问题。采取以下措施：

```
@Entity
public class Account {

    @Id
    @GeneratedValue...
    private Long id;
    @ManyToOne(cascade=CascadeType.ALL)
    private SecurityQuestion question;
    ...
}

@Entity
public class SecurityQuestion {

    @Id
    @GeneratedValue...
    private Long id;
    private String question;
    ...
} 
```

当使用 Spring 的 form:select 来选择帐户的安全问题时，它会在我保存帐户实体时创建一个新的安全问题。注意：SecurityQuestion 表是要显示的预定义问题列表。

```
<form:select path="securityQuestion.question">
    <form:option value="" label="Select..."/>
    <form:options items="${questions}" />
</form:select> 
```

如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:03:23.027

我认为这是因为`CascadeType.ALL`设置并且您丢失了某处`id`（`SecurityQuestion`因此，休眠以`CascadeType.PERSIST`创建新实体）。

# javascript - 定义本地 Web 应用程序和 CDN 之间的嵌套依赖项

> ID：15166706
> 
> 赞同：0
> 
> 时间：2013-03-01T20:53:10.580
> 
> 标签：javascript, asp.net, requirejs, cdn, amd

我正在尝试从 CDN 模块定义嵌套依赖项。

**我收到以下错误：配置**

行：1765 错误：./modules/MyConcreteWidget/templates.htm HTTP 状态：404

似乎 CDN **"text!./pathing"**认为它位于 LOCAL Web 应用程序中。引用的所有文件确实存在于 CDN 中，并且可以通过浏览器地址栏调出。

我是否必须将对“MyWidget”的调用包装在要求（本身）中？

**本地需要配置看起来像：**

```
require.config({
    paths:
    {
        , jquery: '/scripts/jQuery/jquery-1.8.3.min'
        , jsRender: '/scripts/jQuery/jsrender-1.0pre'
        , text: '/scripts/RequireJS/2.1.4/text-2.0.5'
        , domReady: '/scripts/RequireJS/2.1.4/domReady-2.0.1'
        , 'myConcreteWidget': '/Modules/MyConcreteWidget/control' 
        , 'myWidet': 'http://server1/Modules/MyWidget/control'
    },
shim:
    {
        'jsRender': { deps: ['jquery'] }
    }
}); 
```

**本地需求看起来像：**

```
require(['myConcreteWidget', 'domReady'],

    function (myConcreteWidget, domReady) {

        domReady(function () {

                // Use the concrete widget here...
        });
    }); 
```

**本地定义看起来像：myConcreteWidget**
此定义将使用 CDN“小部件”作为依赖项。

```
define(
    [
        'myWidget'
    ],
    function (myWidget) {

        var concrete = new myWidget.MyWidget();

        // Configure the concrete here...

        // Return concrete widget here
        return concrete;
    }); 
```

**CDN 定义看起来像：myWidget**

```
define(
    [
      'jquery'
    , 'jsRender'
    , 'text!./templates.htm'
    ],
    function ($, jsRender, templates) {

        $('body').append(templates);

        function MyWidget(){
            this.widgetId = 0;
            this.name = 'Something Awesome';
        };

        return { MyWidget: MyWidget};
    }); 
```

**更新：**
模板文件只不过是 SCRIPT 标签（用于模板）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:53:43.260

相对模块 ID 是相对于参考 ID 而不是路径解析的。所以在这种情况下，由于'myWidget'要求'./templates'，它被解析为位于模块ID命名空间顶部的'templates'，因此在baseUrl下查找，除非有其他配置，比如路径配置在玩。因此，您可能可以为“模板”输入路径条目以获得所需的分辨率。

另请注意，文本插件存在跨域限制：[https ://github.com/requirejs/text](https://github.com/requirejs/text)

# grails - UrlMappings 给控制器添加后缀

> ID：15166709
> 
> 赞同：0
> 
> 时间：2013-03-01T20:53:23.270
> 
> 标签：grails

我正在尝试向 url 中指定的控制器添加后缀。

我想映射`/admin/mycontroller/`到 MyAdminController。

我已经尝试了很多没有运气的变化......有什么建议吗？

```
static mappings = {
    "/admin/$controller/$action?/$id?"{
        controller = controller.endsWith('Admin')?controller: (controller+'Admin')  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:12:24.000

我通过迭代控制器人工制品并动态构建 url 映射来实现这一点：

```
class UrlMappings {
    static mappings = {
        def adminControllers = ACH.grailsApplication.controllerClasses
        .findAll({ it.logicalPropertyName.endsWith('Admin')})
        .collect({ it.logicalPropertyName })

        adminControllers.each { controllerName ->
            def shortName = controllerName - 'Admin'
            "/admin/$shortName/$action?/$id?" (controller: controllerName)
        }
    }
 } 
```

其中 ACH 是[Burt Beckwith在此](https://stackoverflow.com/users/160313/burt-beckwith)[博客文章](http://burtbeckwith.com/blog/?p=1017)中`ApplicationContextHolder`描述的一种习惯。

编辑：

这将创建 url 结构，以便`/admin/blah`映射到`BlahAdminController`，但不包括`/admin/blahAdmin`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T23:01:27.480

按照惯例，grails 需要您的控制器类名以`Controller`

1.  我建议你将你的重命名`MyControllerAdmin`为`MyAdminController`

2.  我认为在 url 中命名一个变量可能是一个问题，就`controller`好像你想对其进行覆盖一样。尝试类似：

    ```
    static mappings = {
        "/admin/$cName/$action?/$id?"{
            controller = cName.endsWith('Admin') ? cName : (cName + 'Admin')  
        }
    } 
    ```

3.  订单中的事项`UrlMappings`，检查另一条规则是否不会干扰这一规则。

# c# - Awesomium Webview Surface to Byte Buffer 或 PictureBox

> ID：15166711
> 
> 赞同：1
> 
> 时间：2013-03-01T20:53:34.277
> 
> 标签：c#, .net, c#-4.0, awesomium

我开始用 C# 进行开发，我正在尝试将表面转换为字节缓冲区或图片（之后也转换为字节缓冲区）。

我在其他问题中看到了这段代码：

```
string fileName = Path.GetTempFileName();
webView2.Render().SaveToPng(fileName);
byte[] bytes = File.ReadAllBytes(fileName);
File.Delete(fileName);
MemoryStream ms = new MemoryStream(bytes); 
```

但是，webview 没有 Render()，他也没有说我需要导入哪些库。

我停在这里：

```
var view = (WebView)WebCore.Views.Last();
WebCore.Update();
BitmapSurface surface = (BitmapSurface)view.Surface;
surface.?? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T23:08:19.790

Awesomium 最近发生了许多未记录的变化。

尝试`WebView.Surface`代替`WebView.Render`.

```
using (WebView vw = WebCore.CreateWebView(1024, 768)) {
    vw.Source = new Uri("http://www.google.com");

    while (vw.IsLoading) {
        WebCore.Update();
    }
    ((BitmapSurface)vw.Surface).SaveToJPEG("D:\\google.jpg");
    PictureBox1.Load("D:\\google.jpg");
    WebCore.Shutdown();
} 
```

评论中还指出了另一组变化。只是为了正确起见，这里是更新的代码和文档的链接。

```
using ( webView = WebCore.CreateWebView( 800, 600 ) )
{
    webView.Source = new Uri( "http://www.google.com" );

    view.LoadingFrameComplete += ( s, e ) =>
    {
        if ( !e.IsMainFrame )
            return;

        BitmapSurface surface = (BitmapSurface)view.Surface;
        surface.SaveToPNG( "result.png", true );

        WebCore.Shutdown();
    }
}

WebCore.Run(); 
```

来源：[http ://docs.awesomium.net/html/b2fc3fe8-72bd-4baf-980f-b9b9456d5ca4.htm](http://docs.awesomium.net/html/b2fc3fe8-72bd-4baf-980f-b9b9456d5ca4.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T06:58:01.567

你的意思是这样的？

```
private static byte[] getWebViewScreenshotAsBytes(ref WebView myWebView)
{
    using (System.IO.MemoryStream ms = new System.IO.MemoryStream()) {
        using (System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(myWebView.Width, myWebView.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb)) {
            BitmapSurface bmpSurface = (BitmapSurface)myWebView.Surface;
            BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.WriteOnly, bmp.PixelFormat);
            bmpSurface.CopyTo(bmpData.Scan0, bmpSurface.RowSpan, 4, false, false);
            bmp.UnlockBits(bmpData);
            bmp.Save(ms, ImageFormat.Png);
        }
        return ms.ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-17T01:57:13.950

```
 double width = 800;
  double height = 1000;
  var webView = WebCore.CreateWebView(width, height, WebViewType.Offscreen);
  webView.Source = new Uri("https://www.google.com/");
  while (webView.IsLoading)
  {
    WebCore.Update();
  }
  var bitmapSurface = (BitmapSurface)webView.Surface;
  var writeableBitmap = new WriteableBitmap(width, height, 96, 96, PixelFormats.Bgra32, null);
  writeableBitmap.Lock();
  bitmapSurface.CopyTo(writeableBitmap.BackBuffer, bitmapSurface.RowSpan, 4, false, false);
  writeableBitmap.AddDirtyRect(new Int32Rect(0, 0, width, height));
  writeableBitmap.Unlock();
  var image = new Image();
  image.Source = writeableBitmap; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T21:26:18.180

那么[Buffer](http://awesomium.com/docs/1_7_rc3/cpp_api/class_awesomium_1_1_bitmap_surface.html)方法呢？那应该是你想要的。

# javascript - jQuery Mobile 样式化 DOM

> ID：15166714
> 
> 赞同：0
> 
> 时间：2013-03-01T20:53:47.273
> 
> 标签：javascript, jquery, jquery-mobile

***使用 JQM 1.3***

在我的内容内部标记中，我有：

```
<div class="simpleCart_items" ></div> 
```

此 div 将使用 javascript 文件中的内容填充。实际上它会输出添加到购物车列表中的项目。

还有这个链接“删除”，它也是在列表中的每个项目旁边生成的。我不能浪费这个机会用一个漂亮的 JQM 迷你按钮来设置这个链接的样式，你可以用这个代码显示：

```
<a href="index.html" data-role="button" data-icon="Remove" data-iconpos="notext">Delete</a> 
```

在 javascript 中，我找到了负责生成此删除链接的行。

```
remove: function (item, column) {
                    return "<a href='javascript:;' class='" + namespace + "_remove'>" + (column.text || "X") + "</a>";
            } 
```

在 firebug 上，这一行将像这样输出：

```
<div class="item-remove">
<a class="simpleCart_remove" href="javascript:;">Remove</a>
</div> 
```

作为事件和 DOM 的新手，我想“嘿，为什么不将此数据角色属性添加到此 javascript 行？” 你们知道它不会像那样工作。

我已经读到，无论出于何种原因，当页面加载时，JQM 样式都没有考虑到这个链接标签。

在尝试了一切之后，我放弃了自己做。如果你们提出了一个脚本，请告诉我确切的位置，这可能会以某种方式影响结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:22:53.710

在 jQM 中，以编程方式添加按钮后，您需要调用`refresh`方法来让 jQM 增强其标记。

```
$("<a href='#' data-role='button' data-icon='delete' data-iconpos='notext' data-inline='true' class='simpleCart_remove'>Remove</a>")
    .appendTo("div.simpleCart_items")
    .buttonMarkup('refresh'); 
```

这是工作的**[jsFiddle](http://jsfiddle.net/pmatseykanets/GBYBA/)**

在 jsfiddle 示例中，我更改`<a>`为`<button>`（顺便说一句，它更简洁）以很好地使用列表视图并绑定`click`事件以删除项目。

# java - java中的二分查找

> ID：15166716
> 
> 赞同：-2
> 
> 时间：2013-03-01T20:53:49.803
> 
> 标签：java, binary-search

我有这个代码进行二进制搜索。

```
public class BinarySearch {

private static int location;
private static int a = 14;
static int[] numbers = new int[]{3, 6, 7, 11, 14, 16, 20, 45, 68, 79};

public static int B_Search(int[] sortedArray, int key) {
    int lowB = 0;
    int upB = sortedArray.length;
    int mid;
    while (lowB < upB) {
        mid = (lowB + upB) / 2;

        if (key < sortedArray[mid]) {
            upB = mid - 1;
        } else if (key > sortedArray[mid]) {
            lowB = mid + 1;
        } else {
            return mid;
        }
    }
    return -1;
}

public static void main(String[] args) {
    BinarySearch bs = new BinarySearch();
   location= bs.B_Search(numbers, a);
   if(location != -1){
       System.out.println("Find , at index of: "+ location);
   }
   else{
       System.out.println("Not found!");
   }
}
} 
```

// 输出：a=14

未找到！！

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:57:54.323

首先，值得单步调试调试器中的代码，看看是否能找出问题所在。但是，我从经验中知道，这个特定的错误可能很难诊断。

您需要了解您的上限和下限是包含还是排除。我怀疑上限是*独占*的，但你的下限是*包容*的（这很正常）。这意味着：

```
upB = mid - 1; 
```

实际上应该是：

```
upB = mid; 
```

我们知道正确的索引不是`mid`，但它*可能*是较低的那个。您当前的代码不包括该值...而固定代码*仅*不包括`mid`.

正如其他答案所示，您*可以*改为以不同方式初始化和比较`upB`，并使其成为*包容性*上限。就我个人而言，我更喜欢让它独占，因为很多计算机科学都是这样工作的。但两者都会起作用。

现在，请确保您真正了解这里发生了什么。*不要*只是复制代码并继续前进；弄清楚这一切是如何联系在一起的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T20:58:26.397

什么时候`lowB == upB`，你需要`sortedArray[lowB] == key`在任意返回之前检查是否`-1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T21:01:53.027

你用两个不同的东西初始化 upB 。最初它指向结束之后，然后指向最后一个元素：

试试这个：

```
int upB = sortedArray.length-1;
int mid;
while (lowB <= upB) { 
```

# git - 在 git 和 bitbucket 中使用自己的用户名/密码

> ID：15166722
> 
> 赞同：75
> 
> 时间：2013-03-01T20:54:13.220
> 
> 标签：git, bitbucket

我在一个三人小组中；两个在本地工作，我在服务器上工作。

我的同事设置了帐户，但给了我对存储库的完全权限。

我在 git 中设置了我的用户名和电子邮件：

```
git config --global user.name "bozdoz"
git config --global user.email email@email.com 
```

它们与我在 bitbucket.org 上的用户名和电子邮件相同。

但是当我拉或推送到存储库时，它会在提示中指示他们的用户名：

```
Password for 'https://theirusername@bitbucket.org': 
```

通过用我的用户名指示 URL 来尝试拉出后，我能够得到密码提示：

```
git pull https://bozdoz@bitbucket.org/path/repo.git 
```

它说是最新的；然后当我推动时，它说没有快进。

我读到我需要指定分支，但我不知道如何在 push 语句中执行此操作，同时我还指定了 repo URL：

```
git push https://bozdoz@bitbucket.org/path/repo.git 
```

如果我的同事在附近并且可以输入他的密码，我就可以拉和推。但这也将他列为推送的作者，而不是我。

如何以我自己的用户名拉取并推送到 repo 分支？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-01T21:46:14.787

跑

```
git remote -v 
```

并检查您的来源 URL 中是否有硬编码您同事的用户名。如果是这样，请将其替换为您自己的：

```
git remote set-url origin <url-with-your-username> 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-04-24T23:06:55.153

我想我应该分享我的解决方案，因为我无法在任何地方找到它，只能通过反复试验找到它。

我确实能够将存储库的所有权转让给[BitBucket 上的团队](https://bitbucket.org/account/create-team/)。

***不要***添加 BitBuckets 建议的远程 URL：

```
git remote add origin https://username@bitbucket.org/teamName/repo.git 
```

***相反***，添加没有您的用户名的远程 URL：

```
git remote add origin https://bitbucket.org/teamName/repo.git 
```

这样，当您从仓库拉取或推送到仓库时，**它会提示您输入用户名，然后输入您的密码**：团队中的每个人都可以根据自己的凭据访问它。这种方法仅适用于 BitBucket 上的团队，即使您可以管理单一所有者存储库的用户权限。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-05T17:43:17.060

提示：

```
Password for 'https://theirusername@bitbucket.org': 
```

建议您使用的是 https 而不是 ssh。SSH url 以 git@ 开头，例如：

```
git@bitbucket.org:beginninggit/alias.git 
```

即使您单独工作，使用您拥有的单个存储库，操作：

```
git push 
```

将造成：

```
Password for 'https://theirusername@bitbucket.org': 
```

如果远程源以`https`.

检查您的遥控器：

```
git remote -v 
```

遥控器取决于`git clone`. 如果您想使用 ssh 克隆 repo，请使用其 ssh url，例如：

```
git clone git@bitbucket.org:user/repo.git 
```

我建议您从私人回购`git push`开始`git pull`。

如果这样可行，那么 Lazy Badger 建议您有两个乐趣：

*   拉取请求
*   团队合作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T22:23:55.307

嗯，它是 BitBucket 理念和工作流程的一部分：

*   存储库可能只有一个用户：所有者
*   对于普通账户（最终用户）的协作，期望“fork-pull request”工作流程

即您不能（在通常情况下）根据自己的凭据提交外国回购。

您有两种可能的解决方案：

1.  “经典” BB 方式：fork 存储库（由**您**的存储库拥有），进行更改，将拉取请求发送到原始存储库
2.  [创建“团队”](https://bitbucket.org/account/create-team/)，将用户帐户添加为团队成员，使团队成为存储库的所有者 - 对于这个“共享中央”存储库，每个团队成员都可以根据自己的凭据推送 - 检查[thg](https://bitbucket.org/tortoisehg/thg/overview)存储库和[TortoiseHg 团队](https://bitbucket.org/tortoisehg/profile/members)，这个存储库的所有者, 作为样本

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-05T17:15:48.213

对于我自己的私人回购，我使用

> git@bitbucket.org:用户名/blog.git

代替

> [https://username@bitbucket.org/username/blog.git](https://username@bitbucket.org/username/blog.git)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T21:40:58.060

你确定你不是通过 SSH 推送吗？如果您有，请检查与您在 bitbucket 中的 SSH 密钥关联的电子邮件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-14T18:42:22.463

我不得不在这里合并一些好的答案！这对我有用：

```
git remote set-url origin 'https://bitbucket.org/teamName/repo.git' 
```

到最后总会提示想拉的人

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-27T07:04:51.830

我遇到了这个问题，团队成员离开并且 fetch 和 pull 命令仍然引用他的帐户，所以我需要更新那个 URL，我按照以下步骤操作

1.  运行这个命令`git remote -v`

2.  它显示了用于获取和拉取的 URL，如下所示

    ```
     https://otherusername@bitbucket.org/repo.git (fetch)
       https://otherusername@bitbucket.org/repo.git (push) 
    ```

3.  更新了这个 URL 以包含我自己的用户名

    ```
     git remote set-url origin https://myusername@bitbucket.org/repo.git/ 
    ```

4.  然后我运行此命令以使用缓存作为我的凭据助手

    ```
     git config --global credential.helper cache 
    ```

5.  接下来当我运行 git fetch 时，它要求输入密码，我输入密码，然后它被保存，下次每当我提取和拉取时，它都会从保存的凭据中读取。

完毕！

# iphone - SBJsonParser 中的 BUG

> ID：15166726
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:54:34.323
> 
> 标签：iphone, ios

我`JSON.h`用来将我的字符串解析为一个对象。总是可以正常工作，但是今天，尝试使用函数解析时发生此错误`[strJSON JSONValue]`：-JSONValue 失败。错误跟踪是：

> “错误域=org.brautaset.JSON.ErrorDomain Code=10 \"JSON 后的垃圾\" UserInfo=0xd3076b0 {NSLocalizedDescription=JSON 后的垃圾}"

因此，当我调试以了解发生了什么时，我在函数中放置了一个断点，`- (id)fragmentWithString:(id)repr`并且我的代码进入了这一行：

```
// We found some valid JSON. But did it also contain something else?
if (![self scanIsAtEnd]) {
    [self addErrorWithCode:ETRAILGARBAGE description:@"Garbage after JSON"];
    return nil;
} 
```

并将我认为的错误返回给我。这是什么意思？为什么当我评论这行代码时：

```
if (![self scanIsAtEnd]) {
    [self addErrorWithCode:ETRAILGARBAGE description:@"Garbage after JSON"];
    return nil;
} 
```

为什么注释该行时我的代码可以正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:08:47.170

如错误消息中所述，该错误是因为“JSON 后的垃圾”。你应该检查你传递给这个的 json。大多数情况下，最后都包含一些垃圾，或者最后没有正确格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:48:32.363

该错误意味着在它找到 JSON 对象的结尾之后，您给它的输入中有更多数据。这可能意味着您在字符串末尾确实有非 JSON 数据。或者这可能意味着你有不平衡的大括号（因此在字符串的末尾有一个额外的大括号，被认为是垃圾）。

例如，这个 JSON 结尾有垃圾：

```
{
    "foo": "bar",
    "baz": {
        "one": 1,
        "two": 2
    }
}
} 
```

# c# - 在 Word 单元格中以编程方式编写文本行

> ID：15166728
> 
> 赞同：1
> 
> 时间：2013-03-01T20:54:51.970
> 
> 标签：c#, ms-word, office-interop

我正在开发一个创建 Word 文档的 .Net 控制台应用程序。
我的 Visual Studio 项目引用了 Microsoft.Office.Interop.Word 程序集。

我想创建一个表格单元格。
我想在单元格中写两行文本。
第一行必须是粗体。

这是我的代码：

```
l_table = l_range.Tables.Add(l_range, 1, 1);
l_table.Borders.Enable = 0;
l_table.Rows.AllowBreakAcrossPages = 0;

l_cellRange = l_table.Cell(1, 1).Range;
l_cellRange.Text = "First Line";
l_cellRange.Bold = 1;

l_cellRange.InsertParagraphAfter();
l_cellRange.Collapse(WdCollapseDirection.wdCollapseEnd);
l_cellRange.Text = "Second Line";
l_cellRange.Bold = 1; 
```

以下代码行引发异常： l_cellRange.Text = "Second Line";
异常消息（从法语到英语的翻译）：行尾的无效操作

有人可以解释一下我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:29:22.340

您错过了对 的呼叫`Range.MoveEnd()`。

[根据Range.InsertParagraphAfter 上](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.insertparagraphafter%28v=office.14%29.aspx)的MSDN 文档，当您插入段落时，范围会扩展以包含新段落。

然后，当您折叠已经包含新段落的范围时，您会将范围的开始和结束位置移动到**结束**段落标记之后。[MSDN 关于 Range.Collapse 的文章](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.collapse%28v=office.14%29.aspx)特别提到了这种效果以及如何修复它。

简而言之，您需要`MoveEnd()`在致电后插入`Collapse()`：

```
l_cellRange.Collapse(WdCollapseDirection.wdCollapseEnd);
l_cellRange.MoveEnd(WdUnits.wdCharacter, -1);
l_cellRange.Text = "Second Line"; 
```

这会将范围开始和结束位置移动到结束段落标记之前，并允许您按预期插入文本。

说了这么多，我同意kape123。通过 XML 生成文档是更可持续的方式。

# javascript - 在客户端测量 ASP.NET 方法性能

> ID：15166733
> 
> 赞同：2
> 
> 时间：2013-03-01T20:55:04.063
> 
> 标签：javascript, asp.net, client-side

我在 ASP.NET 中有一个 Web 应用程序，其中有一个保存功能，我想测量执行时间，因为我们的用户抱怨保存过程很慢。

我知道我可以在按钮上添加一个客户端脚本来获取方法调用的开始时间，但是有没有办法，仍然在客户端，知道保存过程何时完成，知道时间结束？或者我应该考虑方法执行结束时的结束时间，因为它是在服务器端完成的？

基本上，我需要知道用户点击保存按钮直到他们在保存后返回到另一个页面所花费的时间。

在此先感谢，布鲁诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:58:53.027

.NET 在服务器上运行，**而不是在客户端**上运行。

无论使用何种技术，您都可以使用浏览器调试器并监控 NETWORK 面板来查看延迟在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:58:59.733

如果您的保存功能正在调用服务器端的东西。

只需这样做：

```
//start of function
DateTime dt1 = DateTime.Now;

.
.
.
.

//end of function, right before return
DateTime dt2 = DateTime.Now;
TimeSpan ts = dt2.Subtract(dt1); 
```

ts 会给你 totalseconds、totalminutes 等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T22:10:45.913

**对于服务器端方法**：

您需要启用跟踪以了解在服务器端占用时间的进程和方法。 [http://wiki.asp.net/page.aspx/435/aspnet-tracing/](http://wiki.asp.net/page.aspx/435/aspnet-tracing/)

**对于客户端**

fiddler 或 ySlow 可以在这方面为您提供帮助。

进阶：Ant Profiler 可以帮助你找到代码中的瓶颈

# c# - .NET 4.5 中的任务与线程

> ID：15166734
> 
> 赞同：5
> 
> 时间：2013-03-01T20:55:04.623
> 
> 标签：c#, .net

好吧`.Net 4`，有新的任务功能，我想知道我是否可以依靠它来登录我想要异步执行的所有方法，或者在某些情况下我将不得不使用单独的`Async/Await`，特别是我已经读过 Task.Run 使用 a异步执行该方法。`.Net 4.5``Thread``ThreadPool`

结论：使用`Async/Await`with的组合`Tasks`可以让我免于使用`Threads`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:00:01.883

如果您指定`TaskCreationOptions.LongRunning`选项（也有一个等价的延续），那么任务将不会使用线程池线程，它将使用常规的`Thread`. 从技术上讲，这是一个实现细节，不在规范中，但这并不是一个完全不合理的假设。

鉴于此，您应该能够使用`Task`您可以`Thread`直接使用的东西来做任何事情。

`Thread`假设您选择不在 TPL 之上构建它，那么人们可能想要直接使用的主要情况是创建您自己的并行库。虽然它在业务应用程序的上下文中并不重要，但在创建自己的库时，您可能需要访问特定`Thread`对象的底层细节，或者您可能希望避免使用`Tasks`.

当然，如果你还没有使用 .NET 4.0，你就没有使用 .NET 的选项`Task`。

# c++ - 是否可以在 C++11 中使用前向声明的类来声明嵌套类型别名？

> ID：15166736
> 
> 赞同：1
> 
> 时间：2013-03-01T20:55:08.973
> 
> 标签：c++, c++11, using, forward-declaration, type-alias

我通过在其各自的标头中前向声明类来分解循环包含依赖项，但是这给在类中使用类型别名的现有约定带来了一个小问题：

```
#include <memory>

class C {
 public:
  using Ptr = std::shared_ptr<C>;
}; 
```

理想情况下，可以执行以下操作：

```
#include <memory>

class C;
using C::Ptr = std::shared_ptr<C>; 
```

但这是不可能的，因为`C`它还不是一个完整的类型。我意识到可以创建一个 alias `using CPtr = std::shared_ptr<C>;`，但我希望我遗漏了一些明显的 using`typename`或一些其他关键字，这些关键字将建立`C`为一个完整的类型，以便创建一个嵌套类型别名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:02:39.727

不，您不能将某些内容放入类中，除非将其实际写入类定义中。

这不是是否`C`完整类型的问题。只是 C++ 没有任何语法允许将名称添加到类作用域（或任何作用域），而不是通过在该作用域中实际编写它。

# database - 带有游标的 pl/sql 可变数组

> ID：15166738
> 
> 赞同：2
> 
> 时间：2013-03-01T20:55:16.667
> 
> 标签：database, oracle, plsql, plsqldeveloper

有人能告诉我这段代码有什么问题吗？我的目标是编写一个传递员工姓名的程序，将员工表中的所有姓名和薪水加载到 VARRAY 中，然后在屏幕上打印出姓名和薪水。

```
CREATE OR REPLACE PROCEDURE VARRAY_Q2 
(
  PNAME IN VARCHAR2  
, PSAL OUT NUMBER  
) AS 

--declare and create cursor

CURSOR emp_cur IS
SELECT ename,sal
FROM EMP;

  TYPE varray_emp IS VARRAY(14) OF emp_Cur%ROWTYPE;

  --Creating new instance of varray
  x_varray_emp varray_emp := varray_emp();
  v_counter NUMBER := 0;

BEGIN

  x_varray_emp.EXTEND;

  FOR empRecs IN emp_Cur LOOP

  --Insert data into the varray
  x_varray_emp(v_counter) := empRecs;

  dbms_output.put_line(v_counter);

  v_counter := v_counter + 1;
  END LOOP;

  --Loop through the varray and print out all the elements
  FOR i IN x_varray_emp.FIRST .. x_varray_emp.LAST 
  LOOP
  dbms_output.put_line(x_varray_emp(i));    
  END LOOP;

END; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T21:57:59.393

首先：PL/SQL 集合不是基于 0 的。这将引发下标超出限制错误，因为您的计数器盯着 0。您也不需要此解决方案的计数器。如果您想继续使用它，请参阅第一个示例。但如果我是你，我会使用第二个例子。

其次，您在循环之前扩展了 varray。这将引发超出计数错误的下标，因为 varray 仅被扩展为容纳一行。您需要在循环开始时扩展它，以便在每次迭代时扩展 varray。

Thid，您不能`PUT_LINE`使用整个 varray。您必须`put_line`使用可变数组中的元素。所以在这个例子中，而不是`dbms_output.put_line(x_varray_emp(i))`使用这个：`dbms_output.put_line(x_varray_emp(i).ename || ' makes $' || x_varray_emp(i).sal)`

第四：如果你的emp表中有超过14条记录，你`VARRAY(14)`会导致下标超出限制错误。可变数组为它们设置了最大大小（有界限制），在您的情况下为 14。在此示例中，我将使用常规嵌套表 ( `TYPE nested_emp IS TABLE OF emp_cur%ROWTYPE`)，以免担心有界限制（从技术上讲，嵌套表具有最大 2147483647 又名 PLS_INTEGER）。如果您愿意在 VA 上使用 NT，请改用下面的第 3 个解决方案。

执行以下操作，它将起作用。

改变你`v_counter NUMBER := 0`的`v_counter NUMBER := 1`;

将 BODY 中的内容更改为：

```
BEGIN
    FOR empRecs IN emp_Cur LOOP
        x_varray_emp.EXTEND;
        --Insert data into the varray 
        x_varray_emp(v_counter) := empRecs;

        dbms_output.put_line(v_counter);

        v_counter := v_counter + 1; 
    END LOOP;
    --Loop through the varray and print out all the elements 
    FOR i IN x_varray_emp.FIRST .. x_varray_emp.LAST LOOP 
        dbms_output.put_line(x_varray_emp(i).ename || ' Makes $' || x_varray_emp(i).sal);
    END LOOP;
END; 
```

实际上，您不需要计数器。如果您愿意放弃它，请改用`COUNT`varray 的方法：

```
BEGIN

    FOR empRecs IN emp_Cur LOOP
        x_varray_emp.EXTEND;

        --Insert data into the varray 
        x_varray_emp(x_varray_emp.count) := empRecs;

        dbms_output.put_line(x_varray_emp.count);

    END LOOP;

    --Loop through the varray and print out all the elements 
    FOR i IN x_varray_emp.FIRST .. x_varray_emp.LAST LOOP 
        dbms_output.put_line(x_varray_emp(i).ename || ' Makes $' || x_varray_emp(i).sal);
    END LOOP;

END; 
```

我希望您使用嵌套表来解决这个问题而不是可变数组。如果您愿意，这里是解决方案：

```
DECLARE

    CURSOR emp_cur IS SELECT ename,sal FROM EMP;
    TYPE nestedtable_emp IS TABLE OF emp_cur%ROWTYPE;

    x_nestedtable_emp nestedtable_emp := nestedtable_emp();
BEGIN

    FOR empRecs IN emp_Cur LOOP
        x_nestedtable_emp.EXTEND;

        --Insert data into the varray 
        x_nestedtable_emp(x_nestedtable_emp.count) := empRecs;

        dbms_output.put_line(x_nestedtable_emp.count);

    END LOOP;

    --Loop through the varray and print out all the elements 
    FOR i IN x_nestedtable_emp.FIRST .. x_nestedtable_emp.LAST LOOP 
        dbms_output.put_line(x_varray_emp(i).ename || ' Makes $' || x_varray_emp(i).sal);
    END LOOP;

END; 
```

# html - Rails 应用程序标题显示在本地主机上，而不是在线显示

> ID：15166739
> 
> 赞同：0
> 
> 时间：2013-03-01T20:55:17.567
> 
> 标签：html, ruby-on-rails, heroku, title

我根据[Michael Hartl 的教程](http://ruby.railstutorial.org)制作了一个 Web 应用程序，并且标题标签都可以在我的 localhost 上运行（运行后`rails console`），但是当我将它放到网上（[这里](http://shoulakpredictions.com)）时，标题不会显示。它默认为悬停标题（“域变得简单”）。

我的应用程序通过 Heroku 托管。

* * *

编辑 1

* * *

这是我的`app/views/layouts/application.html.erb`：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>"><%= value %></div>
      <% end %>
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

* * *

编辑 2

* * *

这是`app/helpers/application_helper.rb`包含该`full_title`方法的内容：

```
module ApplicationHelper     
  def full_title(page_title)  
    base_title = "Shoulak Predictions"  
    if page_title.empty?  
      base_title  
    else  
      "#{base_title} | #{page_title}"  
    end
  end
end 
```

* * *

编辑 3

* * *

## 更新

出于预感，根据 Alen 的评论，我将 my 的开头更改`app/views/layouts/application.html.erb`为`<title>Shoulak Predictions</title>`. 它仍然被 Hover 的“Domains Made Simple”覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:02:58.767

这是因为您的域提供商实际上在您的域中托管了自己的网页，并将您的网站置于框架集中。您应该将您的域指向您的 Heroku 应用程序，如[本指南](https://devcenter.heroku.com/articles/custom-domains)中所述。

# ruby - Limbo 中的 God-Resque 过程

> ID：15166740
> 
> 赞同：0
> 
> 时间：2013-03-01T20:55:22.017
> 
> 标签：ruby, ruby-on-rails-3, resque, god

我目前正在使用 God 启动 6 个 resque 工作进程。Resque 表明他们已经开始工作并且一切正常。有时，工作进程会失去识别并不再是已知的 resque 工作进程。我正在寻找的是一种重新启动该过程或让 resque-web 再次识别它的方法。奇怪的是它仍然在后台运行并分叉任务来处理它们，我可以看到 resque-web 上的数量减少了，但它并没有显示任何工作人员正在运行。我查看了他们的 stale.god 脚本，但这不起作用，因为该过程似乎在从 resque-web 识别中删除后继续检索工作。这是我的设置：

```
#resque-production.god

6.times do |num|
  God.watch do |w|
    w.name = "resque-#{num}"
    w.group = "resque"
    w.interval = 30.seconds
    w.env = { 'RAILS_ENV' => 'production' }
    w.dir = File.expand_path(File.join(File.dirname(__FILE__)))
    w.start = "bundle exec rake environment RAILS_ENV=production resque:workers:start"
    w.start_grace = 10.seconds
    w.log = "/var/www/loadmax/shared/log/resque-worker.log"

    # restart if memory gets too high
    w.transition(:up, :restart) do |on|
      on.condition(:memory_usage) do |c|
        c.above = 200.megabytes
        c.times = 2
      end
    end

    # determine the state on startup
    w.transition(:init, { true => :up, false => :start }) do |on|
      on.condition(:process_running) do |c|
        c.running = true
      end
    end

    # determine when process has finished starting
    w.transition([:start, :restart], :up) do |on|
      on.condition(:process_running) do |c|
        c.running = true
        c.interval = 5.seconds
      end

      # failsafe
      on.condition(:tries) do |c|
        c.times = 5
        c.transition = :start
        c.interval = 5.seconds
      end
    end

    # start if process is not running
    w.transition(:up, :start) do |on|
      on.condition(:process_running) do |c|
        c.running = false
      end
    end
  end
end 
```

下一个文件用于连接到一个 redis 服务器并设置优先级。

```
#resque.rake 
require 'resque/tasks'
Dir.glob("#{Rails.root}/app/workers/*.rb") do |rb|
  require rb
end
task "resque:setup" => :environment do
  resque_config = YAML.load_file(Rails.root.join("config","resque.yml"))
  ENV['QUEUE'] = resque_config["priority"].map{ |x| "#{x}" }.join(",") if ENV['QUEUE'].nil?
end
task "resque:workers:start" => :environment do
  threads = []
  q = [1,2]
  resque_config = YAML.load_file(Rails.root.join("config","resque.yml"))
  threads << Thread.new(q){ |qs|
    %x[bundle exec rake environment RAILS_ENV=#{Rails.env} resque:work QUEUE=#{resque_config["priority"].map{ |x| "#{x}" }.join(",")} ]
  }
  threads.each {|aThread| aThread.join }
end 
```

我一直在寻找解决方案，僵尸进程、陈旧进程和退出进程似乎都不是解决方案。我是`god -c /path/to/god`用来启动的。

让我知道我是否需要提供任何其他内容或更清楚。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:52:05.117

我最终把 redis 和工人放在了同一个盒子上，从那以后他们一直在正常工作。

# javascript - kineticjs自定义命中区域不起作用

> ID：15166747
> 
> 赞同：0
> 
> 时间：2013-03-01T20:56:18.943
> 
> 标签：javascript, html5-canvas, kineticjs

我有一条笔画宽度为 2 的可拖动线，并且希望用户即使在周围区域附近单击并拖动也能够拖动该线。根据我的理解，这样做的方法是为该行定义一个自定义 drawHitFunc。我在这里修改了教程中的代码：http: [//www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-custom-hit-function-tutorial/)为该行定义我的自定义 drawHitFunc。

我的自定义绘制命中函数很简单——相同的线条但更粗（25 像素宽）。但是，这似乎不起作用。只有当我小心地将鼠标指针放在线上然后拖动时，拖动才有效。根据下面定义的 drawHitFunc，即使我在该线附近单击并拖动它也应该可以工作。我究竟做错了什么？

这是 drawHitFunc 片段：

> ```
> function(canvas) {
> var context = canvas.getContext();
> context.beginPath();
> context.lineWidth = 25;
> context.moveTo(this.getPoints()[0].x, this.getPoints()[0].y);
> context.lineTo(this.getPoints()[1].x, this.getPoints()[1].y);
> context.closePath();
> canvas.fillStroke(this);
> } 
> ```

完整的失败示例位于：http: [//jsfiddle.net/BwF6K/](http://jsfiddle.net/BwF6K/)

任何指出我错过了什么的帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T12:53:37.930

您实际上可以使用一条线作为 Line 对象的命中区域。您可以通过两种方式实现这一目标：

1.  将线条的内部 colorKey 指定为 strokeStyle 并使用本机画布描边：

    context.lineWidth = 10; context.strokeStyle = this.colorKey; context.stroke();

2.  另一种解决方案是在调用fillStroke之前设置strokeWidth，然后将其设置回来：

    this.setStrokeWidth(10); canvas.fillStroke(this); this.setStrokeWidth(3);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T01:17:12.587

在 Kinetic 4.7.2 中，解决方案如下所示：

```
 drawHitFunc: function(context) {
    var hitWidth = 50;
    context.beginPath();
    context.moveTo(this.getPoints()[0].x, this.getPoints()[0].y);
    context.lineTo(this.getPoints()[1].x, this.getPoints()[1].y);
    context.closePath();
    var orgWidth = this.getStrokeWidth();
    this.setStrokeWidth(hitWidth);
    context.fillStrokeShape(this);
    this.setStrokeWidth(orgWidth);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:33:34.983

是的，看起来 KineticJS 不喜欢自定义命中测试行。

相反，这可行……而不是在自定义命中测试中使用“胖”线，只需围绕该线绘制一个矩形。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/twUqx/](http://jsfiddle.net/m1erickson/twUqx/)

```
 var line = new Kinetic.Line({
        points: [fromX, fromY, toX, toY],
        stroke: drawColor,
        strokeWidth: 2,
        name: 'line',
        draggable:true,
        drawHitFunc: function(canvas) {
          var x1=this.getPoints()[0].x;
          var y1=this.getPoints()[0].y;
          var x2=this.getPoints()[1].x;
          var y2=this.getPoints()[1].y;
          var context = canvas.getContext();
          context.beginPath();
          context.lineWidth = 25;
          context.moveTo(x1-12,y1-12);
          context.lineTo(x2+12,y1-12);
          context.lineTo(x2+12,y2+12);
          context.lineTo(x1-12,y2+12);
          context.closePath();
          canvas.fillStroke(this);
        }
    }); 
```

请注意，我画了一条水平线，因为我不想为旋转线计算三角=）

# ios - iOS中的动画线段

> ID：15166749
> 
> 赞同：1
> 
> 时间：2013-03-01T20:56:26.083
> 
> 标签：ios, core-animation, calayer, caanimation

在 iOS 中，我想创建一个*线段对象*并为其起点和终点设置动画（我可以在 Microsoft 的 WPF 中做到这一点）。

目前，我创建了一个线段对象作为`CALayer`我使用变换*拉伸*和*旋转的微小对象。*

```
+(LayLine*) layLineWithStartPoint:(CGPoint)ptStart andEndPoint:(CGPoint)ptEnd{
    LayLine* line = [[LayLine alloc] init]; 
    line.backgroundColor = [UIColor blackColor].CGColor;
    line.frame = CGRectMake(0,-1,1,2);  // Line 1 pixel long and 2 pixel wide line segment
    line.anchorPoint = CGPointMake(0,0);

    line.affineTransform = [LayLine affineTransformationForLineSegment:ptStart to:ptEnd];   
    return line;
} 
```

我可以通过改变它的变换来动画这条线段。

这工作得很好，但并不完美，因为在动画过程中，终点并不像我想要的那样沿着直线。因此，我想知道是否有更好的方法来创建可以动画的线段对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:10:54.500

您可以使用[CAShapeLayer](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)并创建一个仅包含两个控制点的 CGPath。CAShapeLayer 本身的路径属性实际上是可动画的（只要新路径具有相同数量的点）加上您获得 CALayer 的所有变换功能。正如[汤米](https://stackoverflow.com/users/427332/tommy)`strokeStart`刚才提到的 ，你可以玩`strokeEnd`一些很酷的动画（也有`lineDashPattern`很好的动画，`lineDashPhase`但我想你不需要那个）。

[此问题](https://stackoverflow.com/questions/9229579/draw-two-parallel-line-using-cashape-layer)的代码示例：

```
CAShapeLayer *lineShape = nil;
CGMutablePathRef linePath = nil;
linePath = CGPathCreateMutable();
lineShape = [CAShapeLayer layer];

lineShape.lineWidth = 1.0f;
lineShape.lineCap = kCALineJoinMiter;
lineShape.strokeColor = [[UIColor redColor] CGColor];

CGPathMoveToPoint(linePath, NULL, x, y);
CGPathAddLineToPoint(linePath, NULL, toX, toY);

lineShape.path = linePath;
CGPathRelease(linePath); 
```

# qt - 仅在内部/外部抚摸路径？

> ID：15166754
> 
> 赞同：4
> 
> 时间：2013-03-01T20:56:49.593
> 
> 标签：qt, qpainter

给定一个[`QPainterPath`](http://qt-project.org/doc/qt-4.8/qpainterpath.html)如何仅在路径的内部或外部边缘（或非封闭路径的左侧或右侧）上描边路径？

[`QPainter::strokePath()`](http://qt-project.org/doc/qt-4.8/qpainter.html#strokePath)使笔沿路径居中并使相同数量的墨水落在两侧。有关所需效果的视觉示例，请参见我制作的此图（针对 SVG 提案，而不是功能）：

![SVG 提出的笔画位置示例，来自 phrogz.net/SVG/stroke-location.svg](../Images/aeeaea8af6d79787970180b9101ca6e0.png)

我不介意这是通过一些技巧来完成的，例如将路径本身设置为剪切区域（用于内部）或反剪切区域（用于外部）。

*这里的目标是用低不透明度填充填充一个圆角矩形，然后用低不透明度描边在圆角矩形之外进行描边，以模拟 2 步“模糊”衰减。如果描边与填充重叠，则不透明度加倍，破坏效果。由于形状复杂，路径的简单缩放不会很好地工作，即使它可能适用于上面绘制的圆形和矩形。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T22:44:36.723

Your best bet is probably [`QPainterPathStroker`](http://qt-project.org/doc/qt-5.0/qtgui/qpainterpathstroker.html). Use it to create a new path that's the outline of your path. Then use QPainterPath operations like intersection or subtraction between the two:

```
outsidePath = strokedPath.subtracted(originalPath);
insidePath = strokedPath.intersected(originalPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-26T09:36:50.403

更好的方法是将混合模式设置为`CompositionMode_Source`：

```
QPainter * painter;
painter->setCompositionMode(QPainter::CompositionMode_Source);
painter->setPen(QPen{color, stroke, ...});
painter->setBrush(QBrush{...});

QPainterPath path;
path.moveTo(...);
path.lineTo(...);
...

// No alpha composition issues
painter->fillPath(); 
```

# ios - 如何制作水平滚动但垂直固定的单行集合视图？

> ID：15166755
> 
> 赞同：18
> 
> 时间：2013-03-01T20:57:10.597
> 
> 标签：ios

我试图制作一个`UICollectionView`1 x N 的水平滚动但垂直锁定，因此它根本不会垂直移动。

关于如何实现这一目标的任何想法或指示？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T21:17:18.160

使用流布局，并将滚动方向属性设置为水平。

文档[在这里](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewFlowLayout_class/#//apple_ref/occ/instp/UICollectionViewFlowLayout/scrollDirection)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-30T05:14:25.803

使用流布局并将滚动方向设置为水平以解决您的问题。

```
let flowLayout = UICollectionViewFlowLayout()
flowLayout.itemSize = CGSize(width: UIScreen.main.bounds.width/2 - 10, height: 190)
flowLayout.sectionInset = UIEdgeInsets(top: 0, left: 5, bottom: 0, right: 5)
flowLayout.scrollDirection = .horizontal
flowLayout.minimumInteritemSpacing = 0.0
mainHomeCollectionView.collectionViewLayout = flowLayout 
```

# ruby - 从源代码安装 riak 时出错

> ID：15166756
> 
> 赞同：-1
> 
> 时间：2013-03-01T20:57:12.170
> 
> 标签：ruby, linux, riak

```
make rel
fatal: No names found, cannot describe anything.
./rebar get-deps
/usr/bin/env: escript: No such file or directory
make: *** [deps] Error 127 
```

这是我尝试从源代码安装 riak 时遇到的错误。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:07:03.527

我的猜测是您的路径中缺少 erlang 或未安装。

```
 escript  ## Should return escript: Missing filename 
```

在 /usr/local/bin 或 /opt/erlang/ 下找到 erlang

```
 echo $PATH 
```

如果它不在您的路径中，请添加它。

# google-chrome-extension - YouTube Data API v3 允许浏览器应用程序密钥的引用者无法按预期工作

> ID：15166758
> 
> 赞同：3
> 
> 时间：2013-03-01T20:57:22.607
> 
> 标签：google-chrome-extension, google-api, youtube-api

我正在努力尝试正确配置新的 YouTube Data API v3。我需要从 Google Chrome 扩展程序访问 API。我已经从[Google APIs Console](https://code.google.com/apis/console)创建了一个 API 密钥，更准确地说是**浏览器应用程序的密钥（带有引用者）**密钥。将**允许的引用**设置为空白，所有引用都被允许并且一切正常。

但是，此密钥嵌入在我的 Chrome 扩展程序中，因此对所有人公开。任何人都可以使用我的密钥提出请求，污染我的统计数据并浪费我的配额限制。我了解**允许的引用**字段是为了避免这种情况。跟踪我的 API 请求的标头，我可以看到我`Origin`的如下：

`chrome-extension://myExtensionId`

此外，在 API 的响应中，我可以看到以下标头：

`Access-Control-Allow-Origin: chrome-extension://myExtensionId`

所以一切似乎都正常工作。但是，如果我将**allowed referers**字段设置为`chrome-extension://myExtensionId`，它不起作用，我会收到类似“访问未配置”的错误。我究竟做错了什么？

我的猜测是**allowed referers**字段只能用于 HTTP 引用，但在这种情况下，这对于扩展开发人员来说是一个非常烦人的限制。我想说，对于**允许的引用**字段，任何模式都应该是可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:09:13.957

任何人都可以注册访问 YouTube Data API v3。我理解您对泄露 API 密钥的担忧，但由于没有人真正受益于使用您的密钥而不是仅注册自己的密钥，因此我认为这在实践中不必担心。

# javascript - 使用 JavaScript 获取最大用户系统信息

> ID：15166766
> 
> 赞同：0
> 
> 时间：2013-03-01T20:57:46.990
> 
> 标签：javascript

我正在创建一个主页，我想在其中保留一个开放的评论字段。但在这种情况下，我想尽可能多地记录所有发布帖子的用户的客户信息。

所以我的问题是，如何使用 javascript 从用户那里获取最大数量的用户数据？

在 php 中，我可以保存 $_SERVER 变量，但在 Javascript 中有没有类似的简单方法？另外，如果不是，您建议保存哪些数据？IP，地理数据，也许是用户名？我不知道 javascript 在获取用户系统信息方面有多强大。

# templates - 如何使用 CloudFormer 生成模板？

> ID：15166770
> 
> 赞同：1
> 
> 时间：2013-03-01T20:58:04.787
> 
> 标签：templates, amazon-cloudformation

AWS 新手并尝试了解 CloudFormation 模板。我创建了两个 EC2 微型 Windows 实例实例。我去 CloudFormer，它需要一个模板文件，或者它提供了一个默认模板 URL。

我的印象是它应该读取我创建的资源并自动生成模板。

如果它想要实例的 URL，我不知道如何获取它们。我正在尝试生成一个模板，所以我没有一个模板可以提供给它，因为我试图从我在 AWS 上创建的资源中生成一个模板。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:02:27.267

CloudFormer 是您运行的 AMI 实例，如果您正在查看的屏幕要求提供 URL，那么您可能进入 CloudFormation..

这里有一个链接：[https](https://forums.aws.amazon.com/ann.jspa?annID=1048) ://forums.aws.amazon.com/ann.jspa?annID= 1048 解释如何启动 CloudFormer。

您可以直接在此处启动它： [https ://console.aws.amazon.com/cloudformation/home?region=us-east-1#cstack=sn~AWSCloudFormer|turl~https://s3.amazonaws.com/cloudformation -examples/AWSCloudFormer.template](https://console.aws.amazon.com/cloudformation/home?region=us-east-1#cstack=sn~AWSCloudFormer|turl~https://s3.amazonaws.com/cloudformation-examples/AWSCloudFormer.template)

您可能只需要更改要在其中运行 CloudFormer 的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T07:16:21.963

使用 ami 您可以创建一个 ec2 并访问它的 url 以访问 cloudformer 控制台，如此[处](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-using-cloudformer.html)所述。但请记住，CloudFormer 创建模板，其中所有资源都堆叠在资源部分下，其他部分为空，因为它无法智能地决定您可以为现有资源选择哪些参数或条件。创建模板后，需要手动对其进行修改，以便通过填写其他部分使其可重用。

# visual-studio-2012 - 在 Visual Studio 2012 中使用 F# 的内联函数的代码覆盖率

> ID：15166772
> 
> 赞同：7
> 
> 时间：2013-03-01T20:58:11.183
> 
> 标签：visual-studio-2012, f#, code-coverage, inline

Visual Studio 2012 中的代码覆盖工具将所有`inline`函数标记为未覆盖，即使它们已被覆盖。

有什么方法可以使代码覆盖对`inline`函数起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:32:36.903

编写`inline`函数时，编译器会将函数体内联到调用代码中。正如评论中所讨论的，它也不会为此内联主体发出调试信息（因此您无法进入该功能 - 我认为这可以修复 - 向`fsbugs`at `microsoft`dot提交请求`com`）。

但是，编译器也会生成代码的动态版本——如果你这样写：

```
let inline add a b = a + b 
```

那么`add`编译后的代码中其实有一个方法。该方法将是泛型 ( `'a -> 'b -> 'c`) 并使用动态查找来查找运算符的适当实现`+`（因为 .NET 泛型无法表示此类约束）。

当您使用反射或引用时，将调用动态实现：

```
open Microsoft.FSharp.Linq.RuntimeHelpers
<@ add 1 2 @> |> LeafExpressionConverter.EvaluateQuotation |> printfn "Got: %A" 
```

如果你把断点放在里面`add`并运行上面的代码，那么断点就会被命中（我假设代码覆盖工具会报告这个函数被覆盖）。

但请记住，这*不是*您用普通代码编写时实际执行`add 1 2`的代码——这里执行的代码是不同的实现（使用慢速动态查找，而不是内联）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T21:47:40.263

内联函数不是直接集成到调用代码中的吗？如果是这样，则不会调用实际方法，因为代码是“内联”的，并且对于每个使用它们的地方，都存在内联代码的新副本。

# c# - MSDN 冲突声明 - 哪个协议支持 WCF 中的哪个安全性（特别是传输和消息安全性）

> ID：15166776
> 
> 赞同：0
> 
> 时间：2013-03-01T20:58:24.337
> 
> 标签：c#, .net, wcf, wcf-binding, wcf-security

声明 1：传输安全性可用于除 wsDualHttpBinding 之外的所有绑定。

声明 2：传输安全性可用于除 netNamedPipeBinding 之外的所有绑定。

我是初学者，我一直在寻找哪些协议支持传输安全，哪些协议支持消息安全，哪些同时支持。我从 MSDN 中看到上面的陈述，我不明白，因为它似乎是冲突的，它位于 MSDN 的同一页面上（参考下方）

参考：http: [//msdn.microsoft.com/en-us/library/ff648863.aspx](http://msdn.microsoft.com/en-us/library/ff648863.aspx)

有人可以帮我理解这一点，它肯定会帮助很多像我这样的人。我发现 MSDN 大部分时间都像许多其他人一样难以理解。

那么有人可以告诉我上面的陈述实际上是什么意思，以及对各种安全性的协议支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:43:59.653

The page in question has been corrected to correctly say "Message security is available on all of the bindings except for netNamedPipeBinding"

# css - LESS CSS 将字符串传递给 mixin

> ID：15166778
> 
> 赞同：3
> 
> 时间：2013-03-01T20:58:26.990
> 
> 标签：css, less, mixins

我正在尝试将这样的东西传递给mixin

```
.myMixin(Pdcbs/sjdhc+jdjhdf); 
```

编译时失败，语法错误

我尝试将字符串用引号括起来，但在输出中我看到我的参数输出如下

```
background: ...@{paramName} 
```

我试过〜“stringhere”......我已经做了几个小时了请指出正确的方向，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T02:37:38.437

我不太确定你想要输出什么，但是这个：

```
.mixin(@paramName) {
  background: ~"...@{paramName}";
}

.mixin("Pdcbs/sjdhc+jdjhdf"); 
```

为我制作这个：

```
background: ...Pdcbs/sjdhc+jdjhdf; 
```

# maven - mvn release:prepare 不提交对 pom.xml 的更改

> ID：15166781
> 
> 赞同：83
> 
> 时间：2013-03-01T20:58:35.447
> 
> 标签：maven, plugins, jenkins, release

我正在尝试使用 Maven 发布 Jenkins 插件 ( [stashNotifier](https://github.com/jenkinsci/stashnotifier-plugin) ) 并面临发布插件的问题。

```
mvn clean release:prepare 
```

运行完成而没有错误，但无法在我的本地 git 存储库中提交更改的 pom.xml。即使它确实标记了我尝试发布版本 1.0.2 的分支的 HEAD。这是我的本地分支在准备发布之前的样子

```
* df60768 (HEAD, origin/develop, develop) upgraded parent pom to version 1.498
* 792766a added distribution management section to pom.xml and amended readme.md 
```

这就是它之后的样子

```
* df60768 (HEAD, tag: stashNotifier-1.0.2, origin/develop, develop) upgraded parent pom to version 1.498
* 792766a added distribution management section to pom.xml and amended readme.md 
```

不幸的是，pom.xml 已经包含下一个开发版本，这反过来又会导致后续 release:perform 发布该快照版本。

从 maven 的命令输出来看，它几乎看起来像是省略了 git commit 命令：

```
[INFO] Checking in modified POMs...
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git add -- pom.xml
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git status
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Tagging release with the label stashNotifier-1.0.2...
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git tag -F /var/folders/dr/xxbtyycs1z9dl2_snlj87zrh0000gn/T/maven-scm-678409272.commit stashNotifier-1.0.2
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git push git@github.com:jenkinsci/stashnotifier-plugin.git stashNotifier-1.0.2
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git ls-files
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Transforming 'Stash Notifier'...
[INFO] Not removing release POMs
[INFO] Checking in modified POMs...
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git add -- pom.xml
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Executing: /bin/sh -c cd /Users/gruetter/Dropbox/stashNotifier && git status
[INFO] Working directory: /Users/gruetter/Dropbox/stashNotifier
[INFO] Release preparation complete. 
```

我正在运行 maven 3.0.5（没有 --dry-run 或 -DpushChanges=false）。以下是我的有效 pom 的相关（我认为）部分：

```
[...]

<scm>
   <connection>scm:git:git://github.com/jenkinsci/stashnotifier-plugin.git</connection>
   <developerConnection>scm:git:git@github.com:jenkinsci/stashnotifier-plugin.git</developerConnection>
   <url>https://github.com/jenkinsci/stashnotifier-plugin</url>
</scm>

[...]

<distributionManagement>
   <repository>
      <id>maven.jenkins-ci.org</id>
      <url>http://maven.jenkins-ci.org:8081/content/repositories/releases/</url>
   </repository>
   <snapshotRepository>
      <id>maven.jenkins-ci.org</id>
      <url>http://maven.jenkins-ci.org:8081/content/repositories/snapshots</url>
   </snapshotRepository>
   <site>
     <id>github-pages</id>
     <url>gitsite:git@github.com/jenkinsci/maven-site.git:plugin-parent/stashNotifier</url>
   </site>
</distributionManagement>

[...]

<properties>
   [...]
   <maven-release-plugin.version>2.2.2</maven-release-plugin.version>
   [...]
</properties>

[...]

<build>
   [...]
   <pluginManagement>
      <plugins>
         [...]
         <plugin>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.2.2</version>
         </plugin>
         [...]
   </pluginManagement>

   [...]

   <plugins>
      [...]
      <plugin>
         <artifactId>maven-release-plugin</artifactId>
         <version>2.2.2</version>
         <configuration>
            <goals>deploy</goals>
         </configuration>
      </plugin>
      [...]
   </plugins>
</build> 
```

我究竟做错了什么？提前感谢您的见解！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-12-18T12:03:47.683

我通过更新 git scm 提供程序依赖项而不是发布插件版本解决了我这边的问题（运行 maven 3.0.5）：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-release-plugin</artifactId>
      <version>2.4.2</version>
      <dependencies>
        <dependency>
          <groupId>org.apache.maven.scm</groupId>
          <artifactId>maven-scm-provider-gitexe</artifactId>
          <version>1.8.1</version>
        </dependency>
       </dependencies>
      </plugin>
    </plugins>
</build> 
```

git scm 1.8.1 版本正确地进行了 git 提交（使用准备和回滚目标进行了测试）。

编辑：根据您的环境，可能需要不同版本的 maven-release-plugin 和 maven-scm-provider-gitexe。有关更多讨论，请参阅评论。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-03T11:40:12.717

我遇到了同样的问题，#richnou 的解决方案对我有用（升级 SCM 依赖项）。在此问题上创建了问题，请参见下面的链接。该问题与新版本的 Git 有关，其中“git status”返回插件无法解析的本地化消息。这是根本原因。通过使用 git 选项（应该返回易于解析的输出）在 git scm（1.8.1 版本）中`--porcelain`修复了该问题，但在此修复之后，又出现了另一个问题 - 如果存储库根目录（scm 标签）不是工作目录，`release:prepare`仍然失败。此问题似乎已在 Git SCM 的快照版本（尚未发布）中得到修复。这可以通过将`scm`标签复制到子 pom 中来解决。

[MRELEASE-812](https://issues.apache.org/jira/browse/MRELEASE-812)

[单片机-709](http://jira.codehaus.org/browse/SCM-709)

[maven-release-plugin-and-git-fix](http://www.shredzone.de/cilla/page/373/maven-release-plugin-and-git-fix.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-03-20T22:48:10.567

首先，richnou 和 vasekt 的答案解决了我的问题，我想我会发布这个答案只是因为版本比之前提到的要新，我认为最好再举一个包括它们的例子。

我正在使用 Git 3.3.x 运行 maven 发布插件 2.3.2，但没有指定 maven scm 依赖版本，这导致了快照问题。对我来说，我当时刚刚升级到最新版本的 maven 发布插件和 scm 依赖项，如下所示：

```
<plugin>
   <artifactId>maven-release-plugin</artifactId>
   <version>2.5.3</version>
   <dependencies>
      <dependency>
         <groupId>org.apache.maven.scm</groupId>
         <artifactId>maven-scm-provider-gitexe</artifactId>
         <version>1.9.5</version>
      </dependency>
   </dependencies>
</plugin> 
```

这对我来说很好，发布版本正确上传到发布仓库，并且快照也按预期工作。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-24T21:03:12.720

您可能正在阅读本文，因为上述解决方案对您不起作用。我有同样的问题，我尝试了这里提到的一切。我的版本是：`maven-release-plugin 2.5`和`git 1.7.9`

对我有用的解决方案是将**maven** -release-plugin**降级****到版本 2.3.2**

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <autoVersionSubmodules>true</autoVersionSubmodules>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-30T08:03:20.190

升级`maven-release-plugin`到 2.5.2 有帮助（升级到 2.5 没有；它适用于某些人但不是所有人，可能取决于系统上的其他较新软件）。我相信它会自动引入新的提供者。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T05:06:35.867

我刚刚遇到了同样的问题，从其他答案和评论中，我认为这可能是发布插件本身的一个错误。

就我而言，我在一个新的且几乎是空的项目中使用了 git 的 2.4 版插件，其结构如下：

```
my-repo.git/
  module-parent/     # running the release from here
  (module-child-1/)  # except I hadn't created it yet
  (module-child-2/)  # except I hadn't created it yet 
```

（这个项目的源代码可以在这里看到，在解决问题之前：[我的项目有同样的问题](https://github.com/karlmdavis/perfect-note/tree/12b5ee691ce2c369093e1364248d248d83e7743b)。）

[查看 maven-release-plugin:2.4.1](http://jira.codehaus.org/secure/ReleaseNote.jspa?projectId=11144&version=19050)的发行说明，似乎 MRELEASE-830 有办法解决它。

我不确定这是否真的*是*问题，但是**将我的项目升级到插件的 2.4.1 为我解决了这个问题**。希望它也能为您解决问题！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-30T21:13:35.563

我在本地使用 Git 1.8.x 并遇到了类似的问题：

maven-scm-plugin 确实

```
$ git add
$ git status 
```

但不是

```
$ git commit 
```

使用另一台带有 Git 1.7.x 的机器帮助我解决了这个问题。

注意：我尝试使用 maven-scm-plugin 1.8.1 或 1.9、maven-release-plugin 2.4.1 或 2.4.2。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-25T20:18:58.350

我在使用 cygwin+maven+git 时遇到了同样的问题。它没有显示任何错误，但没有尝试提交 pom 更改，只是在之后停止`git status`：

```
[INFO] Checking in modified POMs...
[INFO] Executing: cmd.exe /X /C "git add -- pom.xml"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git status"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Tagging release with the label portal-automation-0.3.9...
[INFO] Executing: cmd.exe /X /C "git tag -F C:\cygwin64\tmp\maven-scm-1212196933.commit portal-automation-0.3.9"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git push git@barrel.mitre.org:org-mitre-caasd/portal-automation.git portal-automation-0.3.9"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git ls-files"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Transforming 'portal-automation'...
[INFO] Not removing release POMs
[INFO] Checking in modified POMs...
[INFO] Executing: cmd.exe /X /C "git add -- pom.xml"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git status"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Release preparation complete. 
```

如您所见，没有错误，只是在检查状态后没有提交。但是，当我从 Windows 命令提示符运行时：

```
...
[INFO] Executing: cmd.exe /X /C "git add -- pom.xml"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git status"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git commit --verbose -F C:\Users\ltheisen\AppData\Local\Temp\maven-scm-2030091036.commit pom.xml"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git symbolic-ref HEAD"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Executing: cmd.exe /X /C "git push git@barrel.mitre.org:org-mitre-caasd/portal-automation.git master:master"
[INFO] Working directory: C:\Users\ltheisen\git\caasd-portal-automation
[INFO] Release preparation complete. 
```

您可以在检查状态后看到它确实提交了。不确定这是否也是您的问题，但它对我有用。

*请注意，这意味着您需要安装 msysgit*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-10T11:39:25.183

类似的问题，但我遇到了这个问题，使用 Jenkins Release Plugin 和 Gitlab：

*   第一次成功了。
*   第二次它不会提交。

原来我们在 pom.xml 的 SCM 配置中有错字，所以第一次创建了有错字的项目。第二次，Maven 访问过时的项目并抱怨，没有提交更改。

# php - 目标事件

> ID：15166784
> 
> 赞同：0
> 
> 时间：2013-03-01T20:58:52.707
> 
> 标签：php, arrays, string, count

我有一个包含几千个值的简单非关联数组。
这些值是 1-10 个单词的字符串。

我需要找到数组中“命中”最多的 3-4 个连续单词字符串。

这是字母数字和不区分大小写的。

一个打击可能是：

字符串的任何单个单词都出现在数组的一个项目中。任何一组多个连续单词都出现在数组的一个项目中。

所以，举个例子：

```
$database = array(
  0 => 'the dogs whisperer',
  1 => 'I am a whisperer',
  2 => 'dogs are often hairy',
  3 => 'dogs',
  4 => 'are you a dogs whisperer'
  5 => 'dogs can be manipulated by a whisperer'); 
```

三个单词字符串“the dogsspokeer”将获得以下点击：

“狗语者”中的“狗语者”

“狗语者”中的“狗语者”

“狗语者”中的“狗”

“狗语者”中的“the”

“狗语者”中的“狗”

“狗耳语者”中的“耳语者”

“我是耳语者”中的“耳语者”

“狗常多毛”中的“狗”

“狗”中的“狗”

“你是狗语者吗”中的“狗语者”

“你是狗语者吗”中的“狗”

“你是狗耳语者吗”中的“耳语者”

“狗可以被低语者操纵”中的“狗”

“耳语者可以操纵狗”中的“耳语者”

为了使多字串获得成功，这些字必须是连续的。即“狗耳语者”不是“狗可以被耳语者操纵”的热门歌曲。

单词也必须有条理。即“狗耳语者”在“耳语者狗”的价值中不受欢迎。

我很好地掌握了不同的数组函数，但我无法将它们全部放在一起。我尝试通过按单词爆炸并重新组合来提取所有可能的字符串集，然后使用 strpos!==FALSE 来查找命中。我最终得到了一个庞大的矩阵，我无法从中获得所需的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:56:01.260

我希望这就是你要找的。我相信您可以优化很多东西，但我认为这将为您指明正确的方向。

HTH，安迪

```
<?php
  $database = array(
  0 => 'the dogs whisperer',
  1 => 'I am a whisperer',
  2 => 'dogs are often hairy',
  3 => 'dogs',
  4 => 'are you a dogs whisperer',
  5 => 'dogs can be manipulated by a whisperer');

  function CreateSubsets($sstr)
  {
    $subsets = array();

    $tokens = explode(" ", $sstr);
    $count = count($tokens);

    for ($i = $count; $i > 0; $i--) 
    {
      for ($j = 0; $j + $i <= $count; $j++)
      {
        $subsets[] = implode(" ", array_slice($tokens, $j, $i));
      }      
    } 

    return $subsets;   
  }

  function SearchOccurrences($database, $subsets)
  {
    $resultAry = array();

    for ($subIdx = 0; $subIdx < count($subsets); $subIdx++) 
    {
      $occurrences = array();
      for ($idx = 0; $idx < count($database); $idx++) 
      {
        $dbval = $database[$idx];

        $pos = strpos($dbval, $subsets[$subIdx]);
        if ($pos !== false)
          $occurrences[] = $idx;

      }
      $resultAry[$subIdx] = $occurrences;   
    }

    return $resultAry;
  }

  header("Content-type: text/plain");

  print "Database:\n";
  print_r($database); 
  print "\n"; 

  $sstr = "the dogs whisperer";
  $subsets = CreateSubsets($sstr);  

  print "Subsets:\n";
  print_r($subsets);
  print "\n"; 

  $results = SearchOccurrences($database, $subsets);

  print "Results:\n";
  print_r($results);    
  print "\n"; 

  for ($i = 0; $i < count($subsets); $i++) 
  {
    print "'$subsets[$i]' was found in:\n";
    foreach ($results[$i] as &$resVal) 
    {
      print "  --> $database[$resVal]\n";      
    } 
    print "\n"; 
  }
?> 
```

# php - 使用 .getJSON 时 JSON 不导出我的数组

> ID：15166785
> 
> 赞同：0
> 
> 时间：2013-03-01T20:58:52.450
> 
> 标签：php, jquery, getjson

我正在尝试使用 get 从按钮获取信息，然后吐出一个数组。到目前为止，在运行此代码时，`.getJSON`没有调用 （当我取出查询时，它可以工作，但我找不到查询有任何问题）。

以下是相关代码：

**Javascript：**

```
$.getJSON("/westcoast_map.php", // The server URL
{
    westcoast_id: $('.opener').data('westcoast_id')
}, // Data you want to pass to the server.
function (json) {

    var id = json[0];
    waypts = json[1];
    alert(id);
    console.log(waypts);

}); 
```

**php 脚本**(westcoast_map.php):

```
<?php
session_start();
require_once "database.php";
db_connect();
require_once "auth.php";
$current_user = current_user();
include_once("config.php");

$westcoast_id    = $_GET['westcoast_id'];
$westcoast_array = array();
$query           = "SELECT city, state FROM users GROUP BY city";
$result = mysql_query($query) or die(mysql_error());
while ($row = mysql_fetch_array($result)) {

    if ($row['city'] != '' && $row['state'] != '') {
        $westcoast_array[$row] = "{location:" . $row['city'] . ", " . $row['state'] . ", stopover:true}";
    }
}
$data = array(
    $westcoast_id,
    $westcoast_array
);
echo json_encode($data);
?> 
```

**按钮**：

```
<button type="button" class="opener" data-westcoast_id="westcoast_id" onclick="calcRoute();">
    West Coast
</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:43:07.407

在我看来你错过了`key`你的`value`for 状态，试试这个：

```
if($row['city'] != '' && $row['state'] != '') {
    $westcoast_array[] = "{
        location:".$row['city'].", 
        state:".$row['state'].", 
        stopover:true
    }";
} 
```

您还使用数组作为键，这是您无法做到的。更改`$westcoast_array[$row]`为`$westcoast_array[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:01:32.577

如果我错了，我很抱歉，但我认为你正在`JSON`自己制作并使用`json_encode`它再次编码。尝试这个：

```
<?php
session_start();
require_once "database.php";
db_connect();
require_once "auth.php";
$current_user = current_user();
include_once("config.php");

$westcoast_id    = $_GET['westcoast_id'];
$westcoast_array = array();
$query           = "SELECT city, state FROM users GROUP BY city";
$result = mysql_query($query) or die(mysql_error());
while ($row = mysql_fetch_array($result)) {

    if ($row['city'] != '' && $row['state'] != '') {
        $westcoast_array[] = array("location" => $row['city'], "state" => $row['state'], "stopover" => true);
    }
}
$data = array(
    $westcoast_id,
    $westcoast_array
);
echo json_encode($data);
?> 
```

# ruby-on-rails - 我在 OSX 10.7.5 上收到“没有要加载的文件 - openssl”错误

> ID：15166789
> 
> 赞同：3
> 
> 时间：2013-03-01T20:59:08.740
> 
> 标签：ruby-on-rails, openssl, osx-lion, rvm, libyaml

我`no such file to load — openssl error`在 Ruby on Rails 环境中使用 OSX 10.7.5。

我在 StackOverflow 上阅读了所有相关问题，但对我没有任何帮助。

尝试了以下方法：

1.  尝试使用指定的 openssl 构建。不工作：

    `rvm pkg install openssl`
    `rvm reinstall 1.9.2 --with-openssl-dir=$rvm_path/usr`

2.  还尝试了系统的 OpenSSL。也没有用：

    `which openssl`
    `/opt/local/bin/openssl`
    `rvm reinstall 1.9.2 --with-openssl-dir=/opt/local/bin`

    3.阅读`libyaml`是必需的。我已经有了它：

    `brew install libyaml`
    `libyaml-0.1.4 already installed`

其他信息：我的系统有 ruby​​ 版本 1.8.7。当我使用那个 Ruby 时，一切正常（包括加载 SSL）。但对于我正在使用的一些宝石来说，它太旧了。所以，我已经使用 RVM 安装了所有其他版本。我还进行了必要的环境更改。我在 1.9.2、1.9.3 中都尝试了所有这些步骤。但是一样`no such file to Load - OpenSSL error`。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:17:52.033

Try taking a look at this: [http://www.interworks.com/blogs/ckaukis/2013/03/05/installing-ruby-200-rvm-and-homebrew-mac-os-x-108-mountain-lion](http://www.interworks.com/blogs/ckaukis/2013/03/05/installing-ruby-200-rvm-and-homebrew-mac-os-x-108-mountain-lion)

Hope it helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:46:31.720

在安装 Ruby 2.0.0 时，我遇到了一些类似的问题。我必须做：

```
rvm get head
rvm pkg remove
rvm requirements run
rvm reinstall 2.0.0 
```

（或在您的情况下为 1.9.3）

*[资源](https://rvm.io/packages/openssl/)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:59:55.373

如果您的 mac 具有过时版本的 OpenSSL 或证书文件，则会发生这种情况。似乎这个确切的问题最近开始于 Ruby 2.0 的发布，即使这不是您尝试使用 RVM 安装的版本。我的一个朋友本周早些时候遇到了同样的问题，stackoverflow 或谷歌没有任何帮助。

查看此链接以更新 OpenSSL： [http ://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

编辑：OSX 现在带有一个过时的版本，所以如果你还没有更新，那么它肯定会导致问题。

# android - 在 XML 布局中设置 DialogFragment 大小

> ID：15166797
> 
> 赞同：1
> 
> 时间：2013-03-01T20:59:26.130
> 
> 标签：android, layout, dialogfragment

我正在寻找一种在 XML 布局中设置 DialogFragment 大小的方法。我知道我可以在 onResume() 方法的代码中设置它，但这不是我想要的。有谁知道我该怎么做？

我意识到这里有一些类似的问题，但没有一个有令人满意的答案。

布局看起来有点像这样：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="800dp"
    android:layout_height="500dp" >

    ... 
```

这是 DialogFragment 代码：

```
public class MyTestDialog extends DialogFragment {

    /*
     * (non-Javadoc)
     * @see android.support.v4.app.DialogFragment#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(STYLE_NO_FRAME, 0);
    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.app.Fragment#onResume()
     */
    @Override
    public void onResume() {
        super.onResume();

        // just to see the dialog bounds
        getDialog().getWindow().setBackgroundDrawableResource(R.drawable.bg_blue);
    }

    /*
     * (non-Javadoc)
     * @see android.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */
    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.my_layout, container, false);
        return v;
    }
} 
```

# cuda - 除了第一个 cudaMalloc 调用之外，还有什么特殊的函数可以初始化 GPU？

> ID：15166799
> 
> 赞同：16
> 
> 时间：2013-03-01T20:59:36.153
> 
> 标签：cuda, gpu

由于 GPU 上的一些初始化工作，第一个 cudaMalloc 调用很慢（如 0.2 秒）。有没有只做初始化的函数，这样我就可以分开时间了？cudaSetDevice 似乎将时间减少到 0.15 秒，但仍不能消除所有初始化开销。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T21:03:58.027

打电话给

```
cudaFree(0); 
```

是在 CUDA 运行时强制建立惰性上下文的规范方法。您无法减少开销，这是驱动程序、运行时和操作系统延迟的函数。但是上面的调用将让您控制这些开销在程序执行期间如何/何时发生。

**编辑在 2015**年添加，运行时 API 中的上下文初始化启发式随着时间的推移发生了微妙的变化，因此`cudaSetDevice`现在建立了一个上下文，因此`cudaFree()`不需要显式调用来初始化上下文，您可以使用它`cudaSetDevice`。另请注意，在第一次内核启动时仍会产生一些设置时间，而在此之前情况并非如此。对于内核时序，最好在启动内核之前先包含一个预热调用，您将有时间消除此设置延迟。似乎各种分析工具都内置了足够的粒度来避免这种情况，而无需任何额外的 API 调用或内核调用。

# vb.net - 子级的 JSON 反序列化

> ID：15166805
> 
> 赞同：1
> 
> 时间：2013-03-01T21:00:03.710
> 
> 标签：vb.net, json, deserialization

我有这个 json 输出：

```
{
"status": "SUCCESS",
"candidates": [
    {
        "race": "KENYA",
        "candidates": [
            {
                "picture": “http: //api.iebc.or.ke/images/candidate/5FFCD75B-A067-E211-8158-00505687000D.jpg”
            }
        ]
    }
]
} 
```

我可以在反序列化时读取状态。但是，我也需要阅读内在价值，即种族、候选人、图片价值。

```
 Dim myWebClient As New Net.WebClient()
    Dim responseArray As Byte() = myWebClient.DownloadData(iebcsite)
    json = System.Text.Encoding.ASCII.GetString(responseArray)
    Dim deserializedProduct As Object = JsonConvert.DeserializeObject(Of Object)(json)

    Response.Write(deserializedProduct)

    obj = JsonConvert.DeserializeObject(json)
    Uptime = obj.Item("status").ToString 
```

有人可以告诉我如何阅读儿童图片的价值吗？

谢谢。

# sql - 创建没有 ID 的关系

> ID：15166807
> 
> 赞同：2
> 
> 时间：2013-03-01T21:00:36.333
> 
> 标签：sql, database

我有一个包含用户列表（用户名、密码）的表。但是这个表是在没有 ID 的情况下创建的，我无法更改它。如何创建唯一 ID（如果可能，为整数）以建立与其他表的关系？

更新：

用户列表并不完全是我数据库中的表，它只是从 Web 服务获取的数据，所以当用户登录系统时，我会检查用户列表中是否存在凭据，返回 true 或 false。它运行良好，但现在我必须将事物与每个用户关联起来，比如产品。在正常情况下，我只需要将用户 ID 放在产品表中，但这里我没有那个 ID。

为此，我正在考虑根据每个用户的用户名生成一个哈希并将其用作唯一 ID，这样我就可以获得一个 ID 以在表产品中使用它。

这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:14:06.377

如果您出于任何原因无法更改表格，正如您在问题中所述，我认为这至少`username`是一个独特的价值。尽管使用字符串作为主键并不理想，但它是完全可行的，并且没有什么可以阻止您将其用于您的关系。

当然，更改表格以添加`int`字段将是最好的方法，但实际上并不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:25:36.070

我对您的问题和情况的理解如下：

1.  您无法更改相关表是在没有独立“id”的情况下创建的这一事实。

2.  到目前为止，您有足够的权限向此表中添加字段。

3.  有一种方法可以让您获得禁用用户访问此表的时间窗口。

如果是这种情况，那么您需要添加此字段并使用连续整数填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:15:58.410

试试这个

```
ALTER TABLE table_name ADD column_name INT FIRST; 
```

# android-layout - 将组件动态添加到布局

> ID：15166808
> 
> 赞同：0
> 
> 时间：2013-03-01T21:00:43.447
> 
> 标签：android-layout, android-view

晚上好，我正在尝试将按钮简单地添加到现有布局中......在阅读了其他一些答案后，我尝试了这个：

```
public void addButton(View v)
{
      Button cb=new Button(this);

      try {
        LinearLayout l= (LinearLayout) findViewById(R.layout.main);
          //cb.setLayoutParams( new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
          l.addView(cb,new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
    } catch (Exception e) {
        Log.d("EXCEPTION", e.getMessage(),e.getCause());
        e.printStackTrace();
    }
} 
```

然后我得到一个空指针异常，如下所示：

```
03-01 22:34:03.967: W/System.err(7047): java.lang.NullPointerException
03-01 22:34:03.967: W/System.err(7047): at custom.component.app.CustomComponentActivity.addButton(CustomComponentActivity.java:49)
03-01 22:34:03.967: W/System.err(7047):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 22:34:03.967: W/System.err(7047):     at java.lang.reflect.Method.invoke(Method.java:511) 
```

谁能告诉我那是什么？我什至没有使用线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:44:51.093

这是由以下行引起的：

```
LinearLayout l= (LinearLayout) findViewById(R.layout.main) 
```

`findViewById()`用于在布局中查找视图。你用`R.layout.main`错了。更改`R.layout.main`为`R.id.<linearlayout>`- 替换`<linearlayout>`为您在 XML（行`android:id="@+id/..."`）中为 LinearLayout 提供的 id。

# entity-framework-4 - 实体框架代码优先和 LocalDb 上的成员表

> ID：15166817
> 
> 赞同：0
> 
> 时间：2013-03-01T21:01:17.337
> 
> 标签：entity-framework-4, connection-string, localdb

**1.如果我创建新的 MVC 项目，它有默认的连接字符串：**

```
< add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial
Catalog=aspnet-OneVeryBad.Web-20130301153805;Integrated   
Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-OneVeryBad.Web-20130301153805.mdf" 
providerName="System.Data.SqlClient" /> 
```

**2\. 我创建了继承自 DbContext 的上下文：**

```
public class BadContext : DbContext
{
    public BadContext() : base("BadContext")
    {
    }

    /* DbSets */
} 
```

**3\. 将连接字符串名称更改为 BadContext 以使用 EF：**

```
< add name="BadContext" connectionString="Data Source=(LocalDb)\v11.0;Initial 
Catalog=aspnet-OneVeryBad.Web-20130301153805;Integrated 
Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-OneVeryBad.Web-
20130301153805.mdf" providerName="System.Data.SqlClient" /> 
```

**现在我可以成功地将数据存储到 LocalDb，但无法注册用户：**

> 数据库“master”中的 CREATE DATABASE 权限被拒绝。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：数据库“master”中的 CREATE DATABASE 权限被拒绝。

除非我将连接字符串改回原来的：

> < 添加名称="默认连接" ...

我通过 VS 服务器资源管理器在本地数据库中看到了我的上下文表和成员表。但不能使成员资格与 EF 连接字符串一起使用。我该如何解决这个问题？最初我想将所有表存储在 localdb 中，以便无论我走到哪里，它都可以在项目中始终与我同在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:05:21.067

您需要更改 Filters 文件夹下 InitializeSimpleMembershipAttribute.cs 文件中的连接字符串名称。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", 
    "UserId", "UserName", autoCreateTables: true); 
```

到：

```
WebSecurity.InitializeDatabaseConnection("BadContext", "UserProfile", 
    "UserId", "UserName", autoCreateTables: true); 
```

您是否想过使用“在文件中查找”功能来搜索“DefaultConnection”？

# php - 如果为 null，则单独 div 中的数字具有默认数字

> ID：15166818
> 
> 赞同：0
> 
> 时间：2013-03-01T21:01:17.890
> 
> 标签：php

我有一个我要从数据库中取出的号码，基本上是选票。

所以数字将是分开的。

```
For example [ ] = A div styled box.

And $foo = 100

it will display like this:

[ 1 ] [ 0 ] [ 0 ].

        <?php
        for($i=0; $i<strlen($counter); $i++) {
            echo "<div class='votebg'>$counter[$i]</div>";
        }
        ?> 
```

但是我只是通过从数据库中获取 INT 来自动完成这项工作。

现在我的 int 是空的，所以我放了一个检查器来检查它是否为空，如果是，它将使其为 0。

```
if (empty($rcvotes)) {
$rcvotes = 0;
} 
```

现在我的页面只显示零

```
[ 0 ] 
```

我该如何制作它，如果不存在，它会自动用零填充缺失的数字？

例如，我们有 7 票。

号码将显示如下：

```
[ 0 ] [ 0 ] [ 7 ] 
```

我们有 88 票，数字将显示如下：

```
[ 0 ] [ 8 ] [ 8 ] 
```

究竟是什么问题？

谢谢！

```
mysql_query('SELECT FROM * `vote_count`');
$rcvotes = $row['vote_number'];
if (empty($rcvotes)) {
$rcvotes = 0;
}

$counter = strval($rcvotes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:03:49.070

您可以使用[字符串填充](http://php.net/manual/en/function.str-pad.php)：

```
$counter = str_pad($rcvotes, 3, "0", STR_PAD_LEFT); 
```

# r - 在 r 中使用 grid.arrange 排列对象

> ID：15166821
> 
> 赞同：1
> 
> 时间：2013-03-01T21:01:49.780
> 
> 标签：r

我需要将 3 个图表合并到仪表板中的一个网格中。我有三个对象，分别是 p1、p2 和 p3。我需要 p1 和 p2 位于顶部，覆盖 20% 的宽度，并在顶部彼此相邻。p3 位于底部，覆盖 80% 的高度和 100% 的宽度：

我有这个：

```
grid.arrange(p1, p2, p3, widths=c(300, 300, 1000), heights=c(300,300,700),ncol=2, clip=TRUE) 
```

显示不平衡 p2 似乎比 p1 和 p3 大，不像我预期的那样小。有任何想法吗？

# web-services - Coldfusion RESTful webservice：对象不是声明类的实例

> ID：15166822
> 
> 赞同：5
> 
> 时间：2013-03-01T21:01:52.347
> 
> 标签：web-services, rest, coldfusion, cfml

当我调用 URL 时，`http://192.168.2.26:8080/rest/RestSample/season/1.json`我收到错误：

> "Error","ajp-bio-8012-exec-4","03/01/13","16:51:58","RestSample","object is not an instance of declaring class 文件的具体顺序包含或处理的是：C:\path_to\api\service.cfc'' "

这是`/api/service.cfc`文件：

```
<cfscript>
component restpath="season" rest="true"
{

    remote query function getSeasonsByUserId(numeric userid restargsource="Path") httpmethod="GET" restpath="{userid}"
    {
        var response = "";
        var qry = new Query();
        var userQry = "";

        qry.setSQl("select * from mytable where userID = :userid");
        qry.addParam(name="userid", value="#arguments.userid#", cfsqltype="cf_sql_numeric");
        userQry = qry.execute().getResult();

        if(userQry.recordcount == 0)
        {
            response = userQry;
        } else {
            throw(type="Restsample.SeasonsNotFoundError", errorCode='404', detail='Seasons not found');
        }

        return response;
    }    
}   
</cfscript> 
```

**编辑#1**：遵循本教程： [http ://www.anujgakhar.com/2012/02/20/using-rest-services-in-coldfusion-10/](http://www.anujgakhar.com/2012/02/20/using-rest-services-in-coldfusion-10/)

**编辑#2**：我的 application.cfc

```
<cfscript>
component output="false"
{
    this.name = "RestSample";
    this.applicationTimeout = createTimespan(0,0,0,0);
    this.datasource = "mydsn";
    this.username = "";
    this.password = "";

    //this.restsettings.skipCFCWithError = true;

    public boolean function onRequestStart()
    {
        restInitApplication(getDirectoryFromPath(getCurrentTemplatePath()), this.name);

        return true;
    }
}
</cfscript> 
```

还要注意的是，在管理员中刷新 REST 服务总是会给我以下消息：

```
Unable to refresh REST service.
Application RestSample could not be initialized.
Reason: The application does not contain any rest enabled CFCs.
The application does not contain any rest enabled CFCs. 
```

但是，我可以删除它们并通过 onRequestStart() 添加它们而不会出现任何问题。

**编辑#3**

我目前的结构

/api/main/service.cfc /api/application.cfc /api/index.cfm

应用程序.cfc

```
<cfscript>
component output="false"
{
    this.name = "RestSample";
    this.applicationTimeout = createTimespan(0,0,0,0);
    this.datasource = "mydsn";
    this.username = "";
    this.password = "";

    this.restsettings.skipCFCWithError = true;

    public boolean function onRequestStart()
    {
        restInitApplication(getDirectoryFromPath(getCurrentTemplatePath()).concat("main\"), this.name);

        return true;
    }
}
</cfscript> 
```

服务.cfc

```
<cfscript>
component restpath="season" rest="true"
{

    remote Query function getSeasonsByUserId(numeric userid restargsource="Path") httpmethod="GET" restpath="{userid}"
    {
        var response = "";
        var qry = new Query();
        var userQry = "";

        qry.setSQl("select * from mytable where userID = :userid");
        qry.addParam(name="userid", value="#arguments.userid#", cfsqltype="cf_sql_numeric");
        userQry = qry.execute().getResult();

        return userQry;
    } 
}   
</cfscript> 
```

我仍然收到以下错误：

```
'object is not an instance of declaring class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:04:56.180

让我们开始一个更简单的示例，看看您是否可以进入工作状态。我已按照以下步骤成功设置了工作 REST 服务：

转到 ColdFusion 管理员中的 REST 服务并删除任何现有的 REST 注册。

在 Web 根目录的新目录中，使用以下内容创建 Application.cfc（请注意，`<cfscript>`如果您使用的是 CF 9 或更高版本，则不需要标记）：

```
component output="false"
{
    this.name = "RestSample";
} 
```

在同一目录中，使用以下内容创建 index.cfm：

```
<cfset restInitApplication(getDirectoryFromPath(getCurrentTemplatePath()), "RestSample") />
Done. 
```

在同一目录中，使用以下内容创建 service.cfc：

```
component restpath="season" rest="true"
{
    remote struct function getSeasonsByUserId(numeric userid restargsource="Path") httpmethod="GET" restpath="{userid}"
    {
        return {
            'hello': 'world'    
        };
    } 
} 
```

首先，通过浏览器浏览到 index.cfm 并确认您看到了“完成”文本。

在 ColdFusion Administrator 中打开 REST 服务并验证您是否看到 REST 服务已成功注册。

最后，通过 /rest/RestSample/season/123 在浏览器中浏览到 REST 资源，希望您会看到可靠的“hello world”。

如果您仍有问题，请告诉我，我们会看看我们能做些什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:14:35.883

我在（而不是站点的 IIS 根目录）下创建了文件，`C:\ColdFusion10\cfusion\wwwroot`并且能够通过管理控制台注册 REST 服务而没有任何问题。

# django - Django - 需要重复字段时的模型最佳实践

> ID：15166828
> 
> 赞同：2
> 
> 时间：2013-03-01T21:02:25.817
> 
> 标签：django, django-models

我有一个模型，其中某些字段可以针对同一对象重复 0 到 5 次。

`models.py`：

```
class FusionTableLayer(models.Model):
    layer_name = models.SlugField(max_length=50)
    condition1 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    condition2 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    condition3 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    condition4 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    condition5 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option1 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option2 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option3 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option4 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option5 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option6 = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    ...etc 
```

我的问题是用可以复制的字段创建第二个模型并使用 a`ForeignKey`链接它们更好吗？

`models.py`：

```
class EzApp(models.Model):
    layer_name = models.SlugField(max_length=50)

class EzAppOptions(models.Model):
    app = models.ForeignKey(EzApp)
    condition = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option = models.CharField('SQL Query Conditions', max_length=100, blank=True 
```

我知道它看起来像这样整洁，但我发现调整表单、视图和模板以与具有`ForeignKey`关系的第二个模型一起使用更加复杂。例如，我必须在同一个视图中管理两个不同的表单集。在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:36:55.757

查看[ForeignKey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)和[内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)以处理此类情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T00:45:36.330

**模型.py**

```
class EzApp(models.Model):
    layer_name = models.SlugField(max_length=50)

    def __unicode__(self):
        return self.layer_name

class EzAppOptions(models.Model):
    app = models.ForeignKey(EzApp)
    condition = models.CharField('SQL Query Conditions', max_length=100, blank=True)
    option = models.CharField('SQL Query Conditions', max_length=100, blank=True

    def __unicode__(self):
        return self.condition 
```

**表格.py**

```
class EzAppForm(ModelForm):
    class Meta:
        model = EzApp

OptionFormset = inlineformset_factory(EzApp, EzAppOptions, 
    fields=('condition', 'option'), can_delete=True) 
```

**视图.py**

```
def view_name(request):
    form = EzAppForm()
    formset = OptionFormset(instance=EzApp())
    return render(request, "page.html", {
        'form': form, 'formset': formset
    }) 
```

**模板.html**

```
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    {{ formset.as_p }}
    <input type="submit" value="Save"/>
</form> 
```

# ios - 将图像异步下载到 NSData 和缓存

> ID：15166838
> 
> 赞同：3
> 
> 时间：2013-03-01T21:03:20.967
> 
> 标签：ios, objective-c, nsdata, grand-central-dispatch

首先，这不是一个重复的问题。我已经阅读了很多关于 Stack Overflow 的问题，但它们并没有完全解决我的问题。

我正在从网络服务下载图像。由于没有人喜欢 UI 停滞不前，我使用线程单独下载图像。

```
NSURL *imageUrl = [NSURL URLWithString:storyImageURL];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    thumbnailData = [NSData dataWithContentsOfURL:imageUrl];

    dispatch_async(dispatch_get_main_queue(), ^{
        thumbnail = [UIImage imageWithData:thumbnailData];
    });
}); 
```

如果我完全按照上面的方式使用代码，UI 将不会停止，直到它从 Web 服务获取数据但图像没有被缓存。

如果我不使用线程，那么 UI 将停止，但图像会使用 NSCoding 方法（存档）进行缓存。

我的问题是：我该怎么做才能同时使用线程和缓存缩略图？请不要建议任何第三方库。

**更新：**一遍又一遍地查看代码后，我可能会想到两个问题：

1）看起来 NSKeyedArchiver 和 NSKeyedUnarchiver 在线程完成下载图像之前被调用，但这只是一个猜测。在单独的存储文件中，我使用 NSKeyedArchiver 和 NSKeyedUnarchiver：

```
- (RSSChannel *)fetchRSSFeedWithCompletion:(void (^)(RSSChannel *, NSError *))block
{
    NSURL *url = [NSURL URLWithString:@"http://techcrunch.com/feed"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    RSSChannel *channel = [[RSSChannel alloc] init];
    TheConnection *connection = [[TheConnection alloc] initWithRequest:req];

    //[connection setCompletionBlock:block];

    NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    cachePath = [cachePath stringByAppendingPathComponent:@"HAHAHA.archive"];

    RSSChannel *cachedChannel = [NSKeyedUnarchiver unarchiveObjectWithFile:cachePath];

    if (!cachedChannel) 
        cachedChannel = [[RSSChannel alloc] init];

    RSSChannel *channelCopy = [cachedChannel copy];

    [connection setCompletionBlock:^(RSSChannel *obj, NSError *err) {
        if (!err) {

            [channelCopy addItemsFromChannel:obj];
            [NSKeyedArchiver archiveRootObject:channelCopy toFile:cachePath];
        }
        block(channelCopy, err);
    }];

    [connection setXmlRootObject:channel];
    [connection start];

    return cachedChannel;
} 
```

2）我能想到的第二个问题是他的 UI 在尝试将缩略图解码出缓存后没有刷新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:05:53.243

> 1）看起来 NSKeyedArchiver 和 NSKeyedUnarchiver 在线程完成下载图像之前被调用，但这只是一个猜测。在单独的存储文件中，我使用 NSKeyedArchiver 和 NSKeyedUnarchiver：

你在正确的轨道上。

您需要在 RSSChannel 和远程获取数据的后台任务之间建立同步机制，以便您`archiveRootObject`仅在下载完所有图像后调用。

处理此问题的一种方法是使用 dispatch_group 来处理所有图像下载。然后，您可以在执行之前让您的完成块等待该调度组`archiveRootObject`。我前段时间为此写了一个要点，我认为它也应该对您有所帮助：[https](https://gist.github.com/sdesimone/4579906) ://gist.github.com/sdesimone/4579906 。如果没有，请报告具体内容。（可能您需要修复一些编译错误）。

处理这个问题的另一种方法是管理一个共享计数器：你

1.  当提要解析开始时增加计数器并在完成块中减少它：

    ```
    RSSChannel *channelCopy = [cachedChannel copy];

    INCREMENT_COUNTER 
    ```

    [连接 setCompletionBlock:^(RSSChannel *obj, NSError *err) { if (!err) {

    ```
     [channelCopy addItemsFromChannel:obj];
        DECREMENT_COUNTER;
     }
    block(channelCopy, err);
    }]; 
    ```

2.  每次找到要下载的图像时增加计数器，然后在图像下载完成时减少计数器；当计数器达到零时，您知道您可以归档：

    ```
    NSURL *imageUrl = [NSURL URLWithString:storyImageURL];

    INCREMENT_COUNTER;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    thumbnailData = [NSData dataWithContentsOfURL:imageUrl];

    dispatch_async(dispatch_get_main_queue(), ^{
      thumbnail = [UIImage imageWithData:thumbnailData];
      DECREMENT_COUNTER;
      if (COUNTER_REACHED_ZERO)
        CALL_ARCHIVE_METHOD_ON_CHANNEL OBJECT
      });
    }); 
    ```

这将需要一些重构：您需要将通道存储为属性（因此您可以在原始方法之外使用它（参见第 1 点）。

我将如何实施共享计数器的决定留给您；只注意使其实现线程安全！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:14:52.273

您是否保存`thumbnailData`为实例变量？在您发送之前检查是否设置了实例变量，如果是则返回该值。如果没有，则运行您的调度块并将其保存为实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:26:12.063

假设您的目标是 iOS 5+，最自然的解决方案是酌情使用`NSURLCache`和使用`NSURLConnection +sendAsynchronousRequest:queue:completionHandler:`。第三方解决方案通常会因为无知或希望支持 iOS 4 而忽略这些方法，因此您的选择要么有效地将这些东西的维护工作外包给 Apple，要么信任第三方，要么将自己的时间花在上面。

例如

```
NSURLRequest *request =
   [NSMutableURLRequest requestWithURL:imageURL];

// just use the shared cache unless you have special requirements
NSURLCache *cache = [NSURLCache sharedURLCache]; 

NSCachedURLResponse *response = [cache cachedResponseForRequest:request];

// we'll just lazily assume that if anything is in the
// cache then it will do
if(response)
{
    [self proceedWithData:response.data];
}
else
{
    // fetch the data
    [NSURLConnection
        sendAsynchronousRequest:request
        queue:[NSOperationQueue mainQueue] // this dictates where the completion
                                           // handler is called; it doesn't make
                                           // the fetch block the main queue
        completionHandler:
            ^(NSURLResponse *response, NSData *data, NSError *error)
            {
                 // TODO: error handling here

                 [cache
                     storeCachedResponse:
                         [[NSCachedURLResponse alloc]
                             initWithResponse:response dat:data]
                     forRequest:request];

                  [self proceedWithData:data];
            }];
} 
```

`NSURLCache`在 iOS 5 之前存在，但只是内存缓存。从 5 开始，它也是一个磁盘缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:21:11.083

试试这个

```
 NSURL *imageUrl = [NSURL URLWithString:storyImageURL];

    UIButton *btnThumbnail = [[UIButton alloc] initWithFrame:CGRectMake(0, 10, 180, 280)];
    [self downloadingServerImageFromUrl:btnThumbnail AndUrl:imageUrl];
    [btnThumbnail addTarget:self action:@selector(onSelectEPaper:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:viewPaperBg];

 - (void)onSelectEPaper:(id)sender
  {
  }

  -(void)downloadingServerImageFromUrl:(UIButton*)imgView AndUrl:(NSString*)strUrl
{
//    strUrl = [strUrl encodeUrl];
//    strUrl = [strUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString* theFileName = [NSString stringWithFormat:@"%@.jpg",[[strUrl lastPathComponent] stringByDeletingPathExtension]];

NSFileManager *fileManager =[NSFileManager defaultManager];
NSString *fileName = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/%@",theFileName]];

imgView.backgroundColor = [UIColor darkGrayColor];
UIActivityIndicatorView *actView = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
[imgView addSubview:actView];
[actView startAnimating];
CGSize boundsSize = imgView.bounds.size;
CGRect frameToCenter = actView.frame;
// center horizontally
if (frameToCenter.size.width < boundsSize.width)
    frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
else
    frameToCenter.origin.x = 0;

// center vertically
if (frameToCenter.size.height < boundsSize.height)
    frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
else
    frameToCenter.origin.y = 0;

actView.frame = frameToCenter;

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{

    NSData *dataFromFile = nil;
    NSData *dataFromUrl = nil;

    dataFromFile = [fileManager contentsAtPath:fileName];
    //      NSLog(@"%@",fileName);
    if(dataFromFile==nil){
        //      NSLog(@"%@",strUrl);
        NSString *url =[strUrl stringByReplacingOccurrencesOfString:@"\n" withString:@""];
        url=[url stringByReplacingOccurrencesOfString:@"\t" withString:@""];
        url=[url stringByReplacingOccurrencesOfString:@" " withString:@""];

        url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        //       dataFromUrl=[[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]] autorelease];
        //       dataFromUrl=[[NSData dataWithContentsOfURL:[NSURL URLWithString:url]] autorelease];
        NSError* error = nil;
        //     NSLog(@"%@", [NSURL URLWithString:url]);
        dataFromUrl = [NSData dataWithContentsOfURL:[NSURL URLWithString:url] options:NSDataReadingUncached error:&error];

        if (error) {
            NSLog(@"%@", [error localizedDescription]);
        } else {
            //    NSLog(@"Data has loaded successfully.");
        }
    }

    dispatch_sync(dispatch_get_main_queue(), ^{

        if(dataFromFile!=nil){
            //    imgView.image = [UIImage imageWithData:dataFromFile];
            [imgView setBackgroundImage:[UIImage imageWithData:dataFromFile] forState:UIControlStateNormal];
        }else if(dataFromUrl!=nil){
            //    imgView.image = [UIImage imageWithData:dataFromUrl];
            [imgView setBackgroundImage:[UIImage imageWithData:dataFromUrl] forState:UIControlStateNormal];
            NSString *fileName = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"tmp/%@",theFileName]];

            BOOL filecreationSuccess = [fileManager createFileAtPath:fileName contents:dataFromUrl attributes:nil];
            if(filecreationSuccess == NO){
                //    NSLog(@"Failed to create the html file");
            }

        }else{
            //     imgView.image = [UIImage imageNamed:@"no_image.jpg"];
            [imgView setBackgroundImage:[UIImage imageNamed:@"no_image.jpg"] forState:UIControlStateNormal];
        }
        [actView removeFromSuperview];
        //            [actView release];
        //    [imgView setBackgroundColor:[UIColor clearColor]];
    });
});
} 
```

# powershell - Powershell - 重新启动并继续脚本

> ID：15166839
> 
> 赞同：36
> 
> 时间：2013-03-01T21:03:22.677
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我正在寻找一种方法来在脚本中调用重新启动后从停止的地方继续执行 Powershell 脚本。例如，我正在通过 Powershell 自动化构建 DC，在将 PC 重命名为 TESTDC01 后，需要重新启动，但在重新启动后，继续执行脚本继续 dcpromo 等。

这可能吗？

干杯!

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-01T21:12:38.043

在 TechNet 上有一篇来自 Hey, Scripting Guy 系列的精彩文章，其中介绍了与您所描述的情况非常相似的情况：重命名计算机并在重新启动后恢复脚本。神奇之处在于使用版本 3 中的新工作流程：

```
workflow Rename-And-Reboot {
  param ([string]$Name)
  Rename-Computer -NewName $Name -Force -Passthru
  Restart-Computer -Wait
  Do-MoreStuff
} 
```

一旦声明了工作流（您没有将其分配给变量），您就可以像调用常规 cmdlet 一样调用它。真正的魔力在于`-Wait`Restart-Computer cmdlet 上的参数。

```
Rename-And-Reboot PowerShellWorkflows 
```

来源：[https ://devblogs.microsoft.com/scripting/powershell-workflows-restarting-the-computer/](https://devblogs.microsoft.com/scripting/powershell-workflows-restarting-the-computer/)

如果 PowerShell v3 或更高版本不是可用的选择，您可以将现有脚本分成多个较小的脚本，并拥有一个在启动时运行的主脚本，检查某处保存的状态（文件、注册表等），然后开始执行新脚本在适当的地方继续。就像是：

```
$state = Get-MyCoolPersistedState
switch ($state) {
  "Stage1" { . \Path\To\Stage1.ps1 ; break }
  "Stage2" { . \Path\To\Stage2.ps1 ; break }
  "Stage3" { . \Path\To\Stage3.ps1 ; break }
  default { "Uh, something unexpected happened" }
} 
```

请务必记住在您浏览较小的脚本时适当地设置您的状态。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-12-28T13:13:28.920

上面的答案是对的，但它只适用于远程执行powershell脚本。根据[windows web portal](https://technet.microsoft.com/en-us/library/jj574130.aspx)，在本地机器重新启动后，让本地运行的脚本从停止的地方恢复的方法是这样的：

```
workflow Resume_Workflow
{
    .....
    Rename-Computer -NewName some_name -Force -Passthru
    Restart-Computer -Wait
    # Do some stuff
    .....
}
# Create the scheduled job properties
$options = New-ScheduledJobOption -RunElevated -ContinueIfGoingOnBattery -StartIfOnBattery
$secpasswd = ConvertTo-SecureString "Aa123456!" -AsPlainText -Force
$credential = New-Object System.Management.Automation.PSCredential ("WELCOME\Administrator", $secpasswd)
$AtStartup = New-JobTrigger -AtStartup

# Register the scheduled job
Register-ScheduledJob -Name Resume_Workflow_Job -Trigger $AtStartup -ScriptBlock ({[System.Management.Automation.Remoting.PSSessionConfigurationData]::IsServerManager = $true; Import-Module PSWorkflow; Resume-Job -Name new_resume_workflow_job -Wait}) -ScheduledJobOption $options
# Execute the workflow as a new job
Resume_Workflow -AsJob -JobName new_resume_workflow_job 
```

请注意，`[System.Management.Automation.Remoting.PSSessionConfigurationData]::IsServerManager`仅当工作流操作旨在在重新启动后在本地执行时，才应将标志设置为 true。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T21:20:12.077

查看带有工作流的 PS 3.0。我还没有和他们合作过，但他们应该会从重启中恢复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-28T21:29:10.667

如果这对任何人都有帮助，我所做的是重新启动服务器然后循环直到`\\server\c$`离线。接下来，我循环`While (-not(Test-path "\\$server\c$"))`确认服务器再次联机并继续我的脚本。

此代码正在运行，但绝对可以改进。它会生成正在重新启动的服务器的 CSV 日志。它也应该在 PowerShell v2 和更新版本中工作。

```
Param([Parameter(Mandatory=$true)][string]$server)
 $ErrorActionPreference = "SilentlyContinue"

Try{
 $LastReboot = Get-EventLog -ComputerName $server -LogName system | Where-Object {$_.EventID -eq '6005'} | Select -ExpandProperty TimeGenerated | select -first 1

 (Invoke-WmiMethod -ComputerName $server -Path "Win32_Service.Name='HealthService'" -Name PauseService).ReturnValue | Out-Null

Restart-Computer -ComputerName $server -Force

#New loop with counter, exit script if server did not reboot.
$max = 20;$i = 0
 DO{
 IF($i -gt $max){
        $hash = @{
             "Server" =  $server
             "Status" = "FailedToReboot!"
             "LastRebootTime" = "$LastReboot"
             "CurrentRebootTime" = "FailedToReboot!"
          }
$newRow = New-Object PsObject -Property $hash
 $rnd = Get-Random -Minimum 5 -Maximum 40
 Start-Sleep -Seconds $rnd
 Export-Csv D:\RebootResults.csv -InputObject $newrow -Append -Force
    "Failed to reboot $server"
    exit}#exit script and log failed to reboot.
    $i++
"Wait for server to reboot"
    Start-Sleep -Seconds 15
}#end DO
While (Test-path "\\$server\c$")

$max = 20;$i = 0
 DO{
 IF($i -gt $max){
        $hash = @{
             "Server" =  $server
             "Status" = "FailedToComeOnline!"
             "LastRebootTime" = "$LastReboot"
             "CurrentRebootTime" = "FailedToReboot!"
          }
$newRow = New-Object PsObject -Property $hash
 $rnd = Get-Random -Minimum 5 -Maximum 40
 Start-Sleep -Seconds $rnd
Export-Csv D:\RebootResults.csv -InputObject $newrow -Append -Force
    "$server did not come online"
    exit}#exit script and log failed to come online.
    $i++
    "Wait for [$server] to come online"
    Start-Sleep -Seconds 15
}#end DO
While (-not(Test-path "\\$server\c$"))

$CurrentReboot = Get-EventLog -ComputerName $server -LogName system | Where-Object {$_.EventID -eq '6005'} | Select -ExpandProperty TimeGenerated | select -first 1
    $hash = @{
             "Server" =  $server
             "Status" = "RebootSuccessful"
             "LastRebootTime" = $LastReboot
             "CurrentRebootTime" = "$CurrentReboot"
              }

$newRow = New-Object PsObject -Property $hash
 $rnd = Get-Random -Minimum 5 -Maximum 40
 Start-Sleep -Seconds $rnd
Export-Csv D:\RebootResults.csv -InputObject $newrow -Append -Force

}#End Try.

Catch{
 $errMsg = $_.Exception
 "Failed with $errMsg"
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-17T20:22:12.660

远程执行：

```
Rename-Computer -ComputerName $computer -NewName "TESTDC01" -DomainCredential $domain\$username -Force -Restart 
```

然后继续你的脚本 8)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-02T20:20:46.763

需要重新启动我的**本地计算机**并在之后继续执行脚本。尝试了@adaml 的解决方案，但我无法获得计划的作业（在重新启动后运行）来找到应该恢复的暂停工作流作业。因此，它一直处于暂停状态。

无论凭据或提升，Get-Job 都没有返回工作。另一个奇怪的事情是，如果我通过在 Powershell ISE 中标记代码来运行工作流程并使用 F8 运行该部分，则该作业永远不会被暂停......必须使用 F5 运行整个脚本或从其他地方调用它。

为了让工作恢复正常，我必须注册一个计划任务而不是计划任务：

```
workflow test-restart {
    Write-Output "Before reboot" | Out-File  C:/Log/t.txt -Append

    Restart-Computer -Wait

    Write-Output "$Now2 After reboot" | Out-File  C:/Log/t.txt -Append
}

$PSPath = "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe"
$Args = '-NonInteractive -WindowStyle Hidden -NoLogo -NoProfile -NoExit -Command "& {Import-Module PSWorkflow ; Get-Job | Resume-Job}"'
$Action = New-ScheduledTaskAction -Execute $PSPath -Argument $Args
$Option = New-ScheduledTaskSettingsSet -AllowStartIfOnBatteries -WakeToRun
$Trigger = New-JobTrigger -AtStartUp -RandomDelay (New-TimeSpan -Minutes 5)
Register-ScheduledTask -TaskName ResumeJob -Action $Action -Trigger $Trigger -Settings $Option -RunLevel Highest

test-restart -AsJob 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-29T11:18:03.413

大声思考，为了在 AWS/您的云提供商中这样做的人的利益......

我对 AWS 实例也有同样的问题，需要重命名为客户端标准服务器名称、+域加入、+cert 安装、+Tentacle 安装。我将通过 Terraform 将服务器启动脚本放入实例的 user_data 字段中。

我将在实例的 PS 中设置 EC2 实例“重命名”标签，在设置的每个部分之后，因此当服务器在重命名后重新启动时，脚本将查找 IF “重命名 = 完成”标签值，然后跳过这部分实例启动的时间。DomainJoined、TentacleInstalled 标签等的逻辑相同。

读取标签的代码如下：

```
$instanceId = (Invoke-RestMethod -Method Get -Uri http://169.254.169.254/latest/meta-data/instance-id)
$instance   = ((Get-EC2Instance -region $region -Instance $instanceId).RunningInstance)
$myInstance = $instance | Where-Object { $_.InstanceId -eq $instanceId }
$Renamed    = ($myInstance.Tags | Where-Object { $_.Key -eq "Renamed" }).Value 
```

# c# - 我的游戏的 Monodroid C# 2D 游戏引擎？

> ID：15166843
> 
> 赞同：-3
> 
> 时间：2013-03-01T21:03:31.870
> 
> 标签：c#, xamarin.android, xamarin

我已经使用 Xamarin Studio/Monodroid 在 C# 中编写了一个基于文本的模拟游戏，但现在我有一个大问题，我应该/可以使用什么引擎来可视化我的游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:56:40.617

您应该能够使用**[Unity 3D](http://unity3d.com/)**。它允许使用 C# 代码（据我所知，使用 Xamarin 的 Mono 编译），它可以在所有主要平台（Android、iOS、带有插件的 Web 浏览器）上运行，并且应该相对容易与自己的开发人员工具集一起使用。快速谷歌检查确认已经有 2D 游戏的框架——**[这篇文章](http://www.rocket5studios.com/tutorials/make-a-2d-game-in-unity3d-using-only-free-tools-part-1/)**展示了一些可能性。我个人还没有亲自尝试过，但到目前为止，它看起来有据可查，拥有不错的社区，而且一些项目看起来非常棒（比如 SG：Deadzone，iPhone 的第三人称射击游戏），所以我不会担心性能或任何类似的东西。

# ruby-on-rails - 从开发环境发送的邮件，但不是测试环境 - Rails

> ID：15166850
> 
> 赞同：0
> 
> 时间：2013-03-01T21:04:11.133
> 
> 标签：ruby-on-rails, email, gmail

我有一个允许用户请求注册活动的应用程序。当一个邀请请求被提交时，控制器执行这段代码：

```
EventMailer.notify_admins(@user, subject, topic).deliver 
```

该应用程序运行良好（开发、测试和生产），但几周前，通过测试和生产环境填写的邀请请求停止向管理员发送电子邮件。它在开发环境中仍然可以正常工作。当我检查测试环境日志文件时，我在其中看到以下内容：

```
Rendered event_mailer/notify_admins.html.erb (1.3ms)        
Rendered event_mailer/notify_admins.text.erb (1.0ms)        

Sent mail to xxxx@xxxxx.com (1529ms)        
Date: Fri, 01 Mar 2013 20:45:00 +0000        
From: xxxx@xxxxxxx.com        
To: xxxx@xxxxx.com        
Message-ID: <5131134cdd3aa_3cf96d18707060@xxxx-test.mail>        
Subject: Invite request received from: John Doe        
Mime-Version: 1.0        
Content-Type: multipart/alternative;        
boundary="--==_mimepart_5131134cc6832_3cf96d1870674a";        
charset=UTF-8        
Content-Transfer-Encoding: 7bit        

----==_mimepart_5131134cc6832_3cf96d1870674a        
Date: Fri, 01 Mar 2013 20:45:00 +0000        
Mime-Version: 1.0        
Content-Type: text/plain;        
 charset=UTF-8        
Content-Transfer-Encoding: 7bit        
Content-ID: <5131134cd7f78_3cf96d18706818@xxxx-test.mail>        

Invite request received from:         

First Name: John        
Last Name: Doe        
Email Address: john_doe@xxxx.com        

http://test.xxxxx.com/users/109/edit        

----==_mimepart_5131134cc6832_3cf96d1870674a        
Date: Fri, 01 Mar 2 013 20:45:00 +0000        
Mime-Version: 1.0        
Content-Type: text/html;        
 charset=UTF-8        
Content-Transfer-Encoding: 7bit        
Content-ID: <5131134cdb33d_3cf96d187069bd@dent-test.mail>        

<p>Invite request received from: </p>        

<p>First Name: John </p>        
<p>Last Name: Doe </p>        
<p>Email Address: john_doe@xxxxx.com </p>        

http://test.xxxx.com/users/109/edit        

<a href=""> Click here to manage request </a>        

----==_mimepart_5131134cc6832_3cf96d1870674a--        

Redirected to http://test.xxxxx.com/        
Completed 302 Found in 3343ms (ActiveRecord: 99.8ms) 
```

...但是没有收到电子邮件，当我查看邮件日志（已发送的电子邮件、Google 邮件）时，我在已发送的文件夹中看不到任何内容（尽管在开发环境中发送正常）

我使用谷歌应用程序作为我的邮件服务器，开发/测试/生产的代码完全相同。为了确保没有缓存资源，我还在测试和生产环境中预编译了资产并重新启动了 Apache 服务器。有任何想法吗？

# 环境

测试、开发和生产环境 smtp 设置部分相同：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = false
config.action_mailer.default :charset => "utf-8"

config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "xxxxxxx.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["MY_EMAIL_FROM"],
    password: ENV["MY_EMAIL_FROM_PWD"] 
```

}

当我在 TEST 和 PRODUCTION 上将 config.action_mailer.raise_delivery_errors 设置为 TRUE 时，我收到 500 错误。如果设置为 false，则根本不会发送电子邮件。

# jquery - jQuery - 日期选择器

> ID：15166856
> 
> 赞同：0
> 
> 时间：2013-03-01T21:04:29.137
> 
> 标签：jquery

我知道有很多这样的问题 - 但我无法让它发挥作用。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#input-datepicker").datepicker();
        });
</script> 
```

显示没有 datepicker() 函数的错误。

我尝试了很多脚本，包括组合，没有一个有效。这是当前的：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script> 
```

我尝试添加`type="text/javascript"`，在表单上方/下方放置包含，更改`$("#input-datepicker")`为包含字段的 div ......什么都没有。

你能帮助我吗？

编辑。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $("#bbb").datepicker();
    });
</script>
<div id="input-datepicker" class="input">
    <label  for="bbb">Calendar</label>    <input name="bbb" id="bbb" type="text" />
</div> 
```

编辑 2。

```
<link type="text/css" href="..." rel="stylesheet" /> 
<form action="..." method="post" id="form" accept-charset="utf-8" enctype="multipart/form-data">    <div id="input-file" class="input">
    <label for="aaa"></label>    <input  type="file" name="aaa" id="aaa"  </div><script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $("#bbb").datepicker();
    });
</script>
<div id="input-datepicker" class="input">
    <label  for="bbb">Calendar</label>    <input name="bbb" id="bbb" type="text" />
</div>
<div id="input-submit" class="input">
    <input type="submit" name="submit" value="submit" />
</div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
// ...
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:11:06.810

检查您的输入字段 id 是否与您正在使用的 jquery 选择器中的 id (input-datepicker) 匹配。

jquery 示例在这里：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# java - 在另一种方法中使用 Servlet 数据（HttpServletRequest）

> ID：15166863
> 
> 赞同：0
> 
> 时间：2013-03-01T21:04:57.233
> 
> 标签：java, servlets, ip, remote-desktop

我在用着：

```
@Override
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String Ip = request.getRemoteAddr();
    System.out.println("IP " + Ip);
    processRequest(request, response);
}

public void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    String name = request.getParameter("name");
    out.println("<h3>You have entered name : "+name+"<br>");
    out.println("<b><font color='blue'>IP Address of request : </font></b>" + request.getRemoteAddr() + "</h3>");
    System.out.println("<h3>You have entered name : " + name + "<br>");
    System.out.println("<b><font color='blue'>IP Address of request : </font></b>" + request.getRemoteAddr() + "</h3>");
} 
```

..它返回用户IP地址，我需要将其存储为变量并在以下位置使用该变量：

```
public void setRc(String rc) throws IOException { //need to start/call doGet() and/or processRequest() here....
    try {
        Process d = Runtime.getRuntime().exec("c:\\commands\\psexec \\\\" + Ip + " -i -s -d \"C:\\Program Files (x86)\\Microsoft Configuration Manager Console\\AdminUI\\bin\\i386\\rc.exe\" 1 " + rc);
    } catch (Exception e) {
        System.out.println("FROM CATCH " + e.toString());
        this.rc = rc;
    }
} 
```

这是用于我们 IT 组的 Web 应用程序 - 在用户端打开远程连接 gui - 它将目标 pc 作为 rc 之后的变量。

因此，命令将是： psexec - 在 Web 应用程序用户桌面上，带有参数 xyz 并在目标 PC 上运行 rc.exe...

它的工作方式：用户输入与 1.)user、2.)pc 或 3.) ID# 有关的信息（到 Web 应用程序） - 然后他们单击提交按钮......然后......信息返回到屏幕（从 SQL）然后...计算机名称被放入命令行（作为 rc - 在 .java 页面中）并且网络应用程序显示远程命令的可能性 - 作为一个按钮......例如“单击按钮以执行 abc.exe在电脑名称 xxx-xxxxxx 上

所以，我需要将 IT 组用户的 IP 地址合并到命令行中……

注意：在目标上运行命令很简单 bc - 服务器打开 cmd 并执行 psexec 以在目标上执行 .exe 但是，在此示例中，服务器需要在用户上运行 cmd - 在用户 pc 上打开 gui -将目标电脑设置为 rc.exe 中的参数...

所以...示例一：用户->服务器->目标和..示例二：用户->服务器->用户->目标

谢谢你。

这是启动 setRun 的按钮：

```
<td>
    <form name="rc" action="index.jsp" />
    Remote Control:<input type="submit" value="${UserDetails.Computer_Name}" onsubmit=jsp:setProperty name="rc"/>
</form>               
</td> 
```

# html - 页脚不在底部

> ID：15166872
> 
> 赞同：0
> 
> 时间：2013-03-01T21:05:30.523
> 
> 标签：html, css

我有一个大问题。

检查这个网站：[http ://borbelykertlabor.hu/index.php](http://borbelykertlabor.hu/index.php)

如果我尝试申请，页脚不在页面的最底部：

```
#footer {
    position: absolute;
    bottom: 0;
} 
```

它会起作用，但是如果内容很大并且有滚动条，那么如果滚动就会发生非常糟糕的事情。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:24:02.880

我总是使用[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)并且我从来没有遇到过问题。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:18:28.887

将您的位置：绝对更改为位置：固定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:22:11.810

将此添加到您的 CSS 中，即使调整大小，页脚也应保持在底部可见。为我工作。

```
#footer{ 
 position: fixed;
 bottom: 0;
 margin-bottom: 0;
}

#wrapperr{
width: 100%;
height: 100%;
} 
```

# javascript - 用于解耦事件的 delegateEvents hack

> ID：15166875
> 
> 赞同：0
> 
> 时间：2013-03-01T21:05:49.307
> 
> 标签：javascript, backbone.js, marionette

我破解了 Backbone 源代码，但现在我正在寻找建议以使其变得更好。

这是该方法的来源`delegateEvents`：

```
delegateEvents: function (events) {
  if (!(events || (events = _.result(this, 'events')))) return;
  this.undelegateEvents();
  for (var key in events) {
    var method = events[key];
    if (!_.isFunction(method)) method = this[events[key]];
    if (!method) throw new Error('Method "' + events[key] + '" does not exist');
    var match = key.match(delegateEventSplitter);
    var eventName = match[1],
      selector = match[2];
    method = _.bind(method, this);
    eventName += '.delegateEvents' + this.cid;
    if (selector === '') {
      this.$el.on(eventName, method);
    } else {
      this.$el.on(eventName, selector, method);
    }
  }
}, 
```

这是我破解的（还没有准备好生产，嗯？）：

```
delegateEvents: function (events) {
  if (!(events || (events = _.result(this, 'events')))) return;
  this.undelegateEvents();
  for (var key in events) {
    var method = events[key];
    var special = false;
    if (method.indexOf('REF->') != -1) {
      special = true;
    } else {
      if (!_.isFunction(method)) method = this[events[key]];
      if (!method) throw new Error('Method "' + events[key] + '" does not exist');
    }
    var match = key.match(delegateEventSplitter);
    var eventName = match[1],
      selector = match[2];
    if (!special) method = _.bind(method, this);
    eventName += '.delegateEvents' + this.cid;
    if (selector === '') {
      if (!special) this.$el.on(eventName, method);
    } else {
      if (special) {
        var specialMethod = method.replace('REF->', '');
        eval('this.$el.on(eventName, selector, ' + specialMethod + ');');
      } else {
        this.$el.on(eventName, selector, method);
      }
    }
  }
}, 
```

用例：

我想从视图中删除逻辑，或者只是将其重定向到视图之外的函数。原因很简单——我考虑的是页面，而不仅仅是视图，我真的在使用 Marionette Layouts 来促进这一点；每个布局包含多个视图块，我希望页面上的所有视图委托都在一个地方。

所以，如果这是标准的：

```
View = Backbone.View.extend({
  events: {
    "click li.foo": "fooSelected"
  },
  fooSelected: function (e) {

  }
}); 
```

黑客的工作原理是这样的：

```
View = Backbone.View.extend({
  events: {
    "click li.foo": "REF->MyApp.Page.fooSelected"
  }
}); 
```

在我走得更远之前，有没有更好的方法来解耦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:47:33.763

Backbone 已经在`if (!_.isFunction(method)) method = this[events[key]];`检查你是否给了它一个可以调用的函数，而不是视图对象上的方法键。看到这个小提琴：http: [//jsfiddle.net/h4eWn/](http://jsfiddle.net/h4eWn/)

此外，使用 Marionette，您可以使用[View 触发器](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#viewtriggers)，然后在布局中侦听 View.on("fooSelected")。

# c# - 如何将一列数据放入C#中的列表中

> ID：15166878
> 
> 赞同：0
> 
> 时间：2013-03-01T21:06:02.260
> 
> 标签：c#, list, text

我希望 c# windows 窗体应用程序能够将一整列数字放入列表中，数据将是文本库，因此例如它将包含 4 列，如下所示：

```
100 200 300 400
100 200 300 400
101 292 83  7312 
```

我可以将整个文本放入一个列表中，但我希望有 4 个不同的列表，如果有意义的话，将每一列放入自己的列表中。

我是否必须阅读每一行以及如何将拆分然后添加到列表中？

附言。我不希望代码只是能够做到这一点的最好方法，如果我走在正确的轨道上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:12:20.090

你在正确的轨道上。我个人喜欢`File.ReadAllLines(@"yourTxtFile")`。在我看来，它使代码变得简单。

```
foreach(var line in File.ReadAllLines(@"yourTxtFile"))
{
   // split and add to the respective lists here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:01:26.497

我不会将这些值读入单独的列表中。如果您维护单独的列表，则需要担心保持所有列表同步。我将创建一个对象，您可以使用它来保存一行中的所有信息。

```
public class Entry
{
    // give meaningful names to the column values
    public int Column1 { get; set; }
    public int Column2 { get; set; }
    public int Column3 { get; set; }
    public int Column4 { get; set; }

    // overriden to make re-constructing the line for the file easier
    public override string ToString()
    {
        // assuming tab as the delimiter, replace with whatever you're using
        return string.Format("{0}\t{1}\t{2}\t{3}", this.Column1, this.Column2,
            this.Column3, this.Column4);
    }
} 
```

然后，当您读取值时，您可以执行以下操作：

```
var entries = new List<Entry>();

using (var fStream = File.OpenRead(fileLocation))
using (var reader = new StreamReader(fStream))
{
    while (!reader.EOF)
    {
        var line = reader.ReadLine();

        // assuming tab as the delimiter, replace with whatever you're using
        var parts = line.Split('\t');

        if (parts.Length != 4)
        {
            // whatever you need to do for error handling
            // you could throw an error or just skip to the next line
            continue;
        }

        entries.Add(
            new Entry
            {
                // ideally you'd use int.TryParse to provide further error handling
                Column1 = int.Parse(parts[0]),
                Column2 = int.Parse(parts[1]),
                Column3 = int.Parse(parts[2]),
                Column4 = int.Parse(parts[4])
            }
        );
    }
} 
```

然后，如果您只需要与一个列值进行交互，您可以使用 LINQ 来查询您需要的值

```
var column1Values = from entry in entries
                    select entry.Column1; 
```

# c++ - C++ 中包含固定大小数组的队列

> ID：15166879
> 
> 赞同：2
> 
> 时间：2013-03-01T21:06:05.157
> 
> 标签：c++, arrays, vector, queue

我正在使用用`queue<vector<int> >`C++ 编写的计算密集型搜索算法。我想用包含固定大小数组的队列或类似的 FIFO 结构替换此数据结构。**我怎样才能在 C++ 中做到这一点？**

这种替换的动机是减少运行时间。在进行分析时，我注意到在创建向量和向向量中添加东西上花费了相当多的时间。我已经用固定大小的数组替换了一些关键向量，并测量了 20-50% 的运行时间减少。因此，我想替换上面 FIFO 数据结构中的向量。请注意，所有有问题的代码都是最内层循环的一部分，因此运行时的非平凡减少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:08:35.047

您可以使用 a`std::queue<std::array<int, N> >`来具体提供您所要求的内容。一个队列，其中每个元素都是一个固定大小的数组。

或者，您可以将实际数据存储在队列外部的缓冲区中，并仅存储指向缓冲区的指针/迭代器。

# postgresql - 每 10 秒控制台中的 postgresql 错误

> ID：15166880
> 
> 赞同：3
> 
> 时间：2013-03-01T21:06:06.067
> 
> 标签：postgresql

我在尝试学习 Rails 时安装了 postgresql-9.1。当时我没有遇到任何问题，但我只是打开了我的 Console.app 来解决其他问题，我看到以下错误每 10 秒重复一次：

```
3/1/13 10:28:15 AM  com.edb.launchd.postgresql-9.1[89003]   2013-03-01 15:28:15 GMT FATAL:  data directory "/Library/PostgreSQL/9.1/data" has wrong ownership
3/1/13 10:28:15 AM  com.edb.launchd.postgresql-9.1[89003]   2013-03-01 15:28:15 GMT HINT:  The server must be started by the user that owns the data directory.
3/1/13 10:28:15 AM  com.apple.launchd[1]    (com.edb.launchd.postgresql-9.1[89003]) Exited with exit code: 1
3/1/13 10:28:15 AM  com.apple.launchd[1]    (com.edb.launchd.postgresql-9.1) Throttling respawn: Will start in 10 seconds 
```

我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:01:51.003

看起来你已经安装了 EnterpriseDB 的 PostgreSQL 包，但你不能使用它，因为服务器无法启动。我想您正在使用其他一些 PostgreSQL 服务器，例如 Postgres.app 或 Homebrew Postgres 来进行您的开发工作？

如果是这样，请考虑卸载未使用的 EnterpriseDB PostgreSQL 包。或者，您可以删除其 launchd 配置文件，以便 launchd 不会尝试启动它，但这可能会在以后造成更多混乱。

如果要使用它，则需要修复权限。“启动服务器的用户”不是您的用户名，而是一个名为`postgres`or的用户`postgres_`（在某些 Mac 系统上）。您可以通过阅读 EDB PostgreSQL 的 launchd 文件来找出哪个。然后你需要：

```
sudo chown -R postgres /Library/PostgreSQL/9.1/data 
```

（或`postgres_`取决于 launchd 的预期）。

如果您正在运行另一个 PostgreSQL 服务器，这可能会允许 EDB 服务器尝试启动，但它会与您的另一个 PostgreSQL 使用的端口号冲突，因此它仍然会失败。或者它可能会在您的计算机下次启动时成功启动，您将无法再访问您的其他 PostgreSQL 实例。因此，如果您已经在使用另一个版本的 PostgreSQL，您可能应该卸载这个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T22:07:01.043

当我将 PostgreSQL 更新`homebrew`到 9.3 版本时，我遇到了同样的问题。我开始在互联网上搜索解决问题的方法，但不幸的是没有成功。所以我决定自己研究这个问题。我发现`postgres`尝试从 2 个地方开始：`/System/Library/LaunchDaemons/`和`~/Library/LaunchAgents`. 只需删除旧的或禁用它（放置在 中`/System/Library/LaunchDaemons/`）就可以了。

# jquery - 更改页面滚动上的活动菜单项

> ID：15166882
> 
> 赞同：0
> 
> 时间：2013-03-01T21:06:14.380
> 
> 标签：jquery, css, wordpress, menu

我在单页 Wordpress 站点中使用此脚本的略微修改版本： [更改页面滚动上的活动菜单项？](https://stackoverflow.com/questions/9979827/change-active-menu-item-on-page-scroll)

我改变的只是菜单 UL id、topMenuHeight 和滚动的持续时间。出于某种原因，前两个项目正在工作 - 从 about 滚动到 services 工作，但在那之后，什么也没有。我将“id”变量输出到控制台，它总是显示服务。不太清楚发生了什么。

[http://inspirawebdesign.us/](http://inspirawebdesign.us/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T13:02:07.613

You got the navigation menu with the list items, you only need to give your ul an id (in this case: top-menu)

In your html place the next code:

```
<ul id="top-menu">  
                <li class="active"><a href="#">item1</li>
                <li class=""><a href="#">item2</li>
                <li class=""><a href="#">item3</li>
                <li class=""><a href="#">item4</li>
                <li class=""><a href="#">item5</li>
</ul> 
```

Put in your jquery file the next code:

```
// Cache selectors
var lastId,
topMenu = $("#top-menu"),
topMenuHeight = topMenu.outerHeight()+15,
// All list items
menuItems = topMenu.find("a"),
// Anchors corresponding to menu items
scrollItems = menuItems.map(function(){
  var item = $($(this).attr("href"));
  if (item.length) { return item; }
});

// Bind click handler to menu items
// so we can get a fancy scroll animation
menuItems.click(function(e){
var href = $(this).attr("href"),
  offsetTop = href === "#" ? 0 : $(href).offset().top-topMenuHeight+1;
  $('html, body').stop().animate({ 
      scrollTop: offsetTop
  }, 1000);
  e.preventDefault();
});

// Bind to scroll
$(window).scroll(function(){
// Get container scroll position
var fromTop = $(this).scrollTop()+topMenuHeight;

// Get id of current scroll item
var cur = scrollItems.map(function(){
 if ($(this).offset().top < fromTop)
   return this;
});
// Get the id of the current element
cur = cur[cur.length-1];
var id = cur && cur.length ? cur[0].id : "";

if (lastId !== id) {
   lastId = id;
   // Set/remove active class
   menuItems
     .parent().removeClass("active")
     .end().filter("[href=#"+id+"]").parent().addClass("active");
}                   
}); 
```

and that's it. the id int the topmenu var is the same id as in your ul (in this case **#top-menu**) topMenu = $("**#top-menu**")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:56:33.930

就我个人而言，我对必须更改菜单顺序的原因没有直接的答案，但如果你稍微改变 CSS 的设计方式，它可以解决你的问题。

如前所述，您需要确保所有“li”链接都按常规顺序列出。

从这一点开始，如果你修复了一些 CSS，你可以操纵它让它看起来一样。

如果将第 27-28 行更改为以下内容，请在 CSS 中：

```
#menu-main-menu {padding:30px 50px 0 0; float: right}
#menu-main-menu li {float: left; list-style: none outside none; margin-left: 30px; text-transform: uppercase;} 
```

基本上，不是将#menu-main-menu li 设置为向右浮动，而是将菜单更改为向右浮动，将菜单更改为向左浮动以将其设置为正确的顺序。

在#menu-main-menu 里面我添加了

```
float:right; 
```

在#menu-main-menu li 里面，我将 float:right 更改为

```
float:left; 
```

如果你想在这里看到代码，你可以去：http: [//jsfiddle.net/GpjMc/1/](http://jsfiddle.net/GpjMc/1/)

* * *

你也可以让它显示 inline 而不是 float:left 。无论哪种格式最适合您。

```
#menu-main-menu {padding:30px 50px 0 0; float: right}
#menu-main-menu li {display: inline; list-style: none outside none; margin-left: 30px; text-transform: uppercase;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:59:56.900

你可以使用 jQuery 航点

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

然后在滚动到特定元素时使用 jquery 更改活动类

```
$('.thing').waypoint(function(direction) {
  jQuery("li.someItem").addClass("active");
}); 
```

# php - XML 格式和 SOAP 问题

> ID：15166885
> 
> 赞同：1
> 
> 时间：2013-03-01T21:06:27.627
> 
> 标签：php, soap-client

```
<xs:element name="getTestRunIdsResponse">
  <xs:complexType>
     <xs:sequence>
        <xs:element minOccurs="0" name="return" nillable="truetype="ax28:ServiceTestLab"/>  
     </xs:sequence>
  </xs:complexType>
</xs:element> 
```

当我运行以下指令时，我有来自具有上述特征的 Web 服务的 XML 文件响应

```
$values =  $client->getTestRunIds(array("startTime"=>1358515543000, "endTime"=>1359385988000)); 
```

我做了一个`echo($values)`我得到了以下错误

> SoapFault 异常：[Client] 看起来我们没有 XML 文档

请任何帮助来解决这个问题。

# ruby-on-rails - 需要在 Rails 中使用 Thrift 编译的类

> ID：15166886
> 
> 赞同：1
> 
> 时间：2013-03-01T21:06:47.623
> 
> 标签：ruby-on-rails, ruby, thrift

Thrift 的 gen-rb 文件夹和命名空间与使用正确文件夹结构自动加载模块的 Rails 约定并不真正匹配。在 Rails 项目中加载节俭编译类的最佳解决方案或最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:52:46.953

我使用 require_relative 来加载文件。

# database - 学习数据库规范化，对2NF感到困惑

> ID：15166890
> 
> 赞同：1
> 
> 时间：2013-03-01T21:06:55.817
> 
> 标签：database, normalization, functional-dependencies

我在 youtube 上看这个关于标准化的视频，我不得不说我现在很困惑，我可能在视频中有错误，即使它有 25 个喜欢和只有 1 个不喜欢。

[正常化](https://www.youtube.com/watch?v=y_MDbbqQIUU)

特别是关于可以在 5 分钟标记处找到的 2NF 部分。

作者说“作业描述”列取决于作业 ID 列......但是对于相同的作业 ID，有不同的作业描述。然后，他将该表“规范化”为 2NF，方法是将其分成两个表……其中一个仅包含分配 ID 和分配描述。而且这个表甚至不在 1NF（非唯一主键）中，那么它怎么可能是 2NF？

有人能告诉我这个视频关于 2NF 是正确还是错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:56:50.867

从关系的角度来看，该视频充其量是草率和粗心的。它的某些部分是完全错误的，包括你引用的部分。不要再看“数据库规范化大师”的视频了。

对于处于 2NF 中的关系，它必须

*   处于 1NF 中，并且
*   没有部分关键依赖。

如果一个属性依赖于*任何候选键*的一部分，则存在部分键依赖，并且关系不在 2NF 中。

视频试图说明的一点是，如果主键是单列，则关系保证为 2NF。但是看看这张表（来自[2NF 的维基百科条目](http://en.wikipedia.org/wiki/Second_normal_form)）。

```
Employees' Skills
--
Employee    Skill           Current Work Location
Jones       Typing          114 Main Street
Jones       Shorthand       114 Main Street
Jones       Whittling       114 Main Street
Bravo       Light Cleaning  73 Industrial Way
Ellis       Alchemy         73 Industrial Way
Ellis       Flying          73 Industrial Way
Harrison    Light Cleaning  73 Industrial Way 
```

这个关系只有一个候选键，{Employee, Skill}。但是 Employee 和 Current Work Location 之间存在部分关键依赖关系。给定 Employee 的任何值，我们为 Current Work Location 找到一个且只有一个值。

将主键更改为代理 ID 号不会改变这种情况，尽管视频暗示它会。

```
Employees' Skills
--
ID  Employee    Skill           Current Work Location
1   Jones       Typing          114 Main Street
2   Jones       Shorthand       114 Main Street
3   Jones       Whittling       114 Main Street
4   Bravo       Light Cleaning  73 Industrial Way
5   Ellis       Alchemy         73 Industrial Way
6   Ellis       Flying          73 Industrial Way
7   Harrison    Light Cleaning  73 Industrial Way 
```

主键是单列，他们说这保证了这种关系在 2NF 中。但事实并非如此。视频制作者忽略了这样一个事实，即*大多数*表都有多个候选键，并且规范化考虑了*每个*候选键，而不仅仅是称为主键的“特殊”候选键。

这段视频还有*很多*其他问题——太多了，以至于我没有看完。生命太短暂，不能再浪费一分钟。

# python - Python：对象没有属性“附加”错误

> ID：15166891
> 
> 赞同：0
> 
> 时间：2013-03-01T21:06:57.693
> 
> 标签：python, django, parsing

在我的仪表板功能中，我有一个配置文件。配置文件有标签。我想要做的是将通过解析器的每个标签放入一个列表中。然后将该列表添加到模板中：

```
import feedparser
rss_result = []
tags = profile.tags.all()
for tag in tags:
    rss = feedparser.parse(tag.tag_rss) #tag.tag_rss is a url string  
    rss.append(rss_result) 
context['tag_rss'] = rss_result 
```

它抛出这个错误：`Exception Value: object has no attribute 'append`

我究竟做错了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:09:20.507

我想你是故意的`rss_result.append(rss)`。你倒过来了。

此外，您可以使用列表理解用更少的行来编写它。不过，完全取决于你。

```
import feedparser
tags = profile.tags.all()
context['tag_rss'] = [feedparser.parse(tag.tag_rss) for tag in tags]
# if you don't need to re-use rss_result, this should work okay 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T21:10:09.730

改变

`rss.append(rss_result)`

到

`rss_result.append(rss)`

您想将该项目附加`rss`到列表中，即`rss_result`.

当您遇到这样的错误时，尝试解析错误实际上告诉您的内容会很有帮助：

> 异常值：对象没有“附加”属性

尝试调用属性 append 时，这里似乎存在问题，因此，如果您回顾代码，您会看到您尝试附加某些内容的唯一位置，即当您拥有`rss.append(rss_result)`. 在这种情况下，您可以很容易地看到它正在尝试调用 append on `rss`，并且通过查看您的代码，您可以看到这`rss`是`feedparser`输出的容器，并且您不想附加任何内容，您希望该对象是附加到别的东西上。

在这种情况下，您希望将列表、`rss_result`和变量带到此空列表的末尾`append`。`rss`因此：`rss_result.append(rss)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:10:36.077

你混淆了这一行： rss.append(rss_result) 应该是 rss_result.append(rss)

# bash - rpm 规范仅根据系统标准安装某些文件

> ID：15166895
> 
> 赞同：0
> 
> 时间：2013-03-01T21:07:25.587
> 
> 标签：bash, sh, rpm, specifications

我有一个我构建的 RPM，它解压了我在三种不同类型的系统中使用的一堆脚本。我正在尝试添加第四种系统类型，它只需要打包在 rpm 中的文件的子集。有没有办法让 %install 部分仅基于简单的检查安装一些有效负载。就像是

（须藤代码）

```
if systemtype eq "type4"; then
    install %file4
else
    install %file
fi 
```

所有四个系统都运行相同的操作系统，并且单个 RPM 使我可以更轻松地将 RPM 提供给其他人以供他们使用，所以我很想用一个包来完成这项工作。

我知道我可以在 %post 部分执行此操作，但我需要删除的文件列表很长，所以如果可以的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:52:24.893

用单个 RPM 完成这项任务并不是一个很好的计划。正如 Marc 所说，您可以像在其他任何地方一样编写 shell 脚本，但根据您的问题，这似乎是不合理的。在您的问题中，您解释说此 RPM 会在一台机器上运行，那么为什么不为该特定系统打包一个 RPM？如果其他用户需要维护 RPM，这降低了 RPM 的复杂性，并且也减少了 RPM 的膨胀。在短期内，单个 RPM 可能更容易，但从长远来看，多个 RPM 将是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:02:16.777

您可以让您的规范文件一次发出多个 RPM 文件。这称为[“子包装”](http://www.rpm.org/max-rpm/ch-rpm-subpack.html)。

如果您调整它们以使它们与各种机器上给出的依赖关系相匹配，您最终可能会得到一定数量的软件包，这些软件包可以根据需要进行安装。

# html - 图像重叠 图片

> ID：15166896
> 
> 赞同：0
> 
> 时间：2013-03-01T21:07:26.070
> 
> 标签：html, css

我有一个`<ul>`标签使用的背景图像“选择器”。`<ul>`我有一个 jquery 函数，它在选择菜单项时调用 Lightselector 类。光选择器类由`<li>`标签呈现，但我的问题是`<li>`标签背景图像（光选择器类）与`<ul>`图像“选择器”的背景图像重叠。我试过 z-index 和背景位置。

html:

```
<ul>BUMPER STICKERS
    <li>hello </li>
    <li>This is a paragraph.</li>
</ul>
<ul>BUMPER STICKERS
    <li>This is a paragraph.</li>
    <li>This is a paragraph.</li>
</ul> 
```

`<li>`光选择器：

```
.LightSelector {
    background-image: url(../Images/Template%20Images/Lightblue.png);
    background-position:0% 0%;
    background-repeat: no-repeat;
} 
```

`<ul>`背景图片：

```
ul {
    background-image: url(../Images/Template%20Images/selector.png);
    background-position:13% 102%;
    background-repeat: no-repeat;
} 
```

jQuery：

```
$(document).ready(function () {
    $("ul").click(function (evt) {      
        if (evt.target.tagName != 'UL') return;
        $("li", this).toggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:45:13.023

检查这个：[jsfiddle.net/Nz3Fc/1/](http://jsfiddle.net/Nz3Fc/1)

我不确定我是否理解你，但基本上我将`<ul>`背景图像放在标题文本上以永久可见，并且在`<li>`单击标题时显示背景图像相应地显示它。

由于标题文本`<ul>`不再是其中的一部分，因此您不必为另一个切换背景，因为它们是独立的。如果有帮助，请告诉我。

代码如下：

**HTML：**

```
<p>BUMPER STICKERS</p>
<ul>    
    <li>This is a paragraph.</li>
    <li>This is a paragraph.</li>    
</ul>

<p>BUMPER STICKERS</p>
<ul>
    <li>This is a paragraph.</li>
    <li>This is a paragraph.</li>    
</ul> 
```

**CSS：**

```
p {
    background-image: url(http://placehold.it/200x50);
    background-position:13% 50%;
    background-repeat: no-repeat;
}

ul {   
    background-position:13% 102%;
    background-repeat: no-repeat;
}

.LightSelector {
    background-image: url(http://placehold.it/100x400);
    background-position:0% 0%;
    background-repeat: no-repeat;
} 
```

**JS：**

```
$(document).ready(function () {

    $("p").click(function () {              
        $("ul li").toggle();        
    });

     $("ul li").click(function(e){
       e.preventDefault();
       $("ul li").addClass("LightSelector").not(this).removeClass("LightSelector");
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:03:30.793

我只是更改了 li 标签中的图像并使其更短，因此它不会重叠。

# javascript - Javascript 随机图像在 IE 中不起作用，在 Chrome 和 IE 中添加边框

> ID：15166900
> 
> 赞同：-1
> 
> 时间：2013-03-01T21:07:44.017
> 
> 标签：javascript, image, internet-explorer, border, image-rotation

我对编码很陌生，所以请多多包涵。我非常愿意回答任何问题或澄清我不清楚的任何一点。我有这段代码在 Firefox 中显示得很漂亮，但它在 IE 和 Chrome 中的图像 div 周围添加了一个边框。我试图覆盖用户代理样式表（当我用萤火虫检查页面时，这显然是边框的来源），但我所做的没有改变在 IE 和 chrome 中显示的边框。其他人遇到过这个问题吗？我正在寻找一些与之相关的帖子，但不可避免地，发帖者会回复“我想通了”，然后没有发布他们的解决方案！

我在网站底部还有一个 div，它通过图像列表在页面刷新时旋转图像。在 IE 中，每次刷新页面时都不会显示新图像，而是显示静态图像（我的图像列表中的第 3 位）。出于某种原因，我搜索了互联网，认为这在 IE 中不起作用，但我似乎找不到比我目前使用的 javascript 更兼容 IE 的任何代码。静态图像问题很重要，因为我在网站上有另一个 javascript 元素也没有显示在 IE 中，来自同一来源，所以我想如果有人帮我修复第一个，我可以修复第二个我自己的。

```
<script language="javascript">
function banner() { } ; b = new banner() ; n = 0
b[n++]= "<IMG name=randimg  CLASS='aligncenter1'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter2'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter3'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter4'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter5'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter6'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter7'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter8'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter9'>"
b[n++]= "<IMG name=randimg  CLASS='aligncenter10'>"
i=Math.floor(Math.random() * n) ; 
document.write( b[i] ) 
</script> 
```

下面是其中一个元素的 css（如果以某种方式添加边框或阻止图像在 IE 中显示...？）

```
 img.aligncenter1 { 
background: url(images/bottom01.png) no-repeat; 
width:662px;
height:395px;
display: block;
border:none; 
clear: both;
z-index:100;
margin-top:-35px;
} 
```

任何帮助将非常感激！如果我没有在这里发布足够的代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:23:04.973

如果将图像写入`a`元素，则可以通过设置图像来摆脱边框`outline: none;`。但是，我不知道“静态而不是旋转”是什么意思，在你的片段中没有提到一些“旋转”。

# python - 在 zc.buildout 中生成 IPython 脚本

> ID：15166905
> 
> 赞同：4
> 
> 时间：2013-03-01T21:07:55.380
> 
> 标签：python, ipython, buildout

我一直在我的机器上使用 IPython 而不是默认的 Python 解释器，因为它有更多的功能并且通常感觉更强大。我想在我的 zc.buildout 项目中将它用作`bin`目录中的解释器，就像本节在以下部分创建的生成的 Python 解释器一样`buildout.cfg`：

```
[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs} 
```

这会生成一个脚本，`bin/python`其中是一个 Python 解释器，可以访问我的所有项目依赖项。

我想用 IPython 做同样的事情，谷歌很快就给了我以下 Buildout 配方：

```
[ipython]
recipe = zc.recipe.egg
eggs = ipython
script = ipython 
```

但是，这不会在 中生成 IPython 解释器`bin`，它似乎并没有真正做任何事情。

如何为我的构建生成 IPython 解释器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:56:16.013

这应该可以正常工作：

```
[ipython_part]
recipe = zc.recipe.egg:scripts
eggs = ${buildout:eggs}
       ipython
scripts = ipython 
```

不要忘记将部件添加到 buildout：

```
[buildout]
parts = something something_else ipython_part 
```

IPython 0.13 中可用的其他脚本：iplogger、iptest、ipcluster、pycolor、ipcontroller、irunner、ipengine。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T20:53:03.630

Justas 提供的答案应该可以工作，除非在这些情况下，当 ipython 已经在系统范围内安装时。

要解决此问题，请在 virtualenv 中运行 buildout。Virtualenv 必须使用 --no-site-packages 创建：

```
virtualenv --no-site-packages env
env/bin/python bootstrap.py
bin/buildout 
```

# c++ - 在返回对象的函数调用和对该对象的方法调用之间是否存在序列点？

> ID：15166907
> 
> 赞同：15
> 
> 时间：2013-03-01T21:08:04.280
> 
> 标签：c++, sequence-points, unspecified-behavior

如果我写，我可以在评估之前`f(x)->g(args, ...)`依赖一个序列点吗？我可以看到两种方式的论点：`f(x)``args, ...`

*   §1.9.17 “在调用函数时（无论该函数是否内联），在函数体中的任何表达式或语句执行之前发生的所有函数参数（如果有）的评估之后都有一个序列点。**在复制返回值之后和函数外的任何表达式执行之前还有一个序列点。** ”
*   另一方面，对象指针隐含地是一个隐藏的参数`this`，就好像我写`g(f(x), args, ...)`的那样，这表明它就像一个参数，因此未指定。

该`->`运算符不是普通的二元运算符，因为显然`g(...)` *无法*`f(x)`像我写的那样进行评估`f(x) + g(...)`。我很惊讶我找不到一些关于它的具体陈述。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T22:36:53.893

答案取决于您使用的是哪个版本的 C++ 标准（或您的编译器正在使用）。

C++ 2003 5.2.2 p8 说：

> 参数的评估顺序未指定。参数表达式评估的所有副作用在输入函数之前生效。后缀表达式和参数表达式列表的求值顺序未指定。

这意味着在评估和之间**没有**序列点。`f(x)``args`

在 C++ 2011 中，序列点的整个概念已被替换（参见[N1944](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n1944.htm)），该措辞现在只是一个注释：

> [*注意：*后缀表达式和参数表达式的计算相对于彼此都是无序的。参数表达式求值的所有副作用都在输入函数之前排序（见 1.9）。——*尾注*]

和 1.9 p15 说

> 调用函数时（无论该函数是否内联），与任何参数表达式或与指定被调用函数的后缀表达式相关的每个值计算和副作用都在执行主体中的每个表达式或语句之前进行排序称为函数。[*注意：*与不同参数表达式相关的值计算和副作用是无序的。——*尾注*]

这表示表达式`f(x)`和表达式`args`在 的主体中的所有内容之前排序`g`，但它们相对于彼此是无序的，这与 C++03 规则相同，但措辞不同。

C++14 与 C++11 具有相同的规则，但正如下面评论中所指出的，C++17 中的规则发生了变化。

C++ 2017 8.2.2 [expr.call] p5 说：

> 后缀表达式在表达式列表中的每个表达式和任何默认参数之前排序。参数的初始化，包括每个相关的值计算和副作用，相对于任何其他参数的初始化是不确定的。

这意味着对于您的示例，将按顺序执行以下步骤：

*   `f`被评估。
*   `x`被评估并且参数`f`被初始化。
*   `f(x)`评估函数调用。
*   `f(x)->g`被评估。
*   `args`并且其他参数`g`被评估并且参数`g`被初始化（以未指定的顺序）。
*   最后，`f(x)->g(args, ...)`评估函数调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T22:00:30.600

请注意，我认为您在标题中提出了一个问题，而在问题正文中提出了另一个问题。

嗯，其实并不矛盾。要评估您的功能，必须发生以下事情（不一定按此顺序）。

*   x 被评估 (A)
*   args 被评估 (B)
*   ... 被评估 (C)
*   f(x) 称为 (D)
*   复制 f(x) 的返回值 (E)
*   return->g(args, ...) 被称为 (F)

现在，您引用的规则表明

1.  (A) 必须在 (D) 之前发生，因为在评估之前有一个评估函数参数的顺序点。
2.  (D) 发生在 (E) 之前，因为在函数运行之前无法进行复制。
3.  (F) 发生在 (E) 之后，因为调用 g(args) * 需要隐式指针
4.  (B) 和 (C) 发生在 (F) 之前，因为它们是论据。

但是，未排序的是（A），（B）和（C）之间的关系，或者在您的问题中（B）和（C）和（D）之间的关系，因为它们不是（F）的论据，他们可以事后评估。或者，可以事先评估它们。

* 有趣的问题。如果 g(args, ...) 是静态成员函数会发生什么。在这种情况下，由于从 f(x) 返回的指针实际上并没有传入，所以可以更早地对其进行排序吗？但这是一个单独的问题。

# c# - 切换按钮不切换

> ID：15166910
> 
> 赞同：1
> 
> 时间：2013-03-01T21:08:25.663
> 
> 标签：c#, .net, wpf, xaml, windows-8

我在 WPF 中有一个切换按钮，但是在按下它时，它似乎并没有保持按下状态。它只是像普通按钮一样工作。这可能是 Windows 8 的问题吗？我基本上将鼠标悬停在按钮上，单击它-按下按钮，然后再次弹出。这是我使用的简单代码：

```
<ToggleButton x:Name="btnJoinMode" Grid.Column="5" Click="btnJoinMode_Click" Background="LightGray" Width="28" Padding="2"/>

private void btnJoinMode_Click(object sender, RoutedEventArgs e)
        {
            if (btnJoinMode.IsChecked == true)
            {
                parentVisualQueryBuilder.HighlightTables(this, true);
            }
            else
            {
                parentVisualQueryBuilder.HighlightTables(this, false);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:36:00.113

这实际上似乎是一个已知问题。我找到[了这个](https://connect.microsoft.com/VisualStudio/feedback/details/763597/togglebutton-doesnt-show-any-state)错误解决页面，微软已经确认很快就会发布修复程序。

# java - 将手势搜索资源导入我的应用程序

> ID：15166914
> 
> 赞同：0
> 
> 时间：2013-03-01T21:08:41.163
> 
> 标签：java, android, gesture, gestures

嗨，我一直在制作一个识别手势的应用程序。我正在尝试在我的程序中使用 Google 的手势搜索资源文件。

**问题**：手势资源文件使我的应用程序和手势生成器（在模拟器上）崩溃

**我的问题**：Google（以及我将如何）如何加载手势资源文件而不会出现内存错误？

错误日志如下：

```
03-01 13:02:55.406: E/dalvikvm-heap(32207): Out of memory on a 13893864-byte allocation.
03-01 13:02:55.416: E/AndroidRuntime(32207): FATAL EXCEPTION: main
03-01 13:02:55.416: E/AndroidRuntime(32207): java.lang.OutOfMemoryError
03-01 13:02:55.416: E/AndroidRuntime(32207):    at java.util.ArrayList.<init>(ArrayList.java:75)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.gesture.GestureStroke.deserialize(GestureStroke.java:223)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.gesture.Gesture.deserialize(Gesture.java:277)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.gesture.GestureStore.readFormatV1(GestureStore.java:322)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.gesture.GestureStore.load(GestureStore.java:293)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.gesture.GestureLibraries$ResourceGestureLibrary.load(GestureLibraries.java:132)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at com.example.transittalker.main.onCreate(main.java:99)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.Activity.performCreate(Activity.java:5008)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2136)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2207)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.os.Looper.loop(Looper.java:137)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at android.app.ActivityThread.main(ActivityThread.java:4899)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-01 13:02:55.416: E/AndroidRuntime(32207):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:23:24.370

手势库应该是相当小的文件。我有一个大约 8-10 个手势的文件，它只有 6KB。您是否使用 Gesture Builder 生成了此文件，如果是，您是否删除了任何无关的手势（尤其是来自测试和构建的手势）？

如果没有，手势资源文件肯定会变得非常大，并且可能会损坏。

如果可能，我建议从您正在运行 Gesture Builder 的模拟器中删除手势资源文件，然后从 Builder 生成的干净文件重新开始。尝试仅使用一两个手势测试您的代码，然后添加更多。

编辑：只是检查，但你的手势文件不应该有扩展名，它应该在 /res/raw 目录中，它是一个二进制文件，如果在你复制/传输它时可能会有所不同。

# linux - Bash 代码，这是做什么的？

> ID：15166917
> 
> 赞同：1
> 
> 时间：2013-03-01T21:08:45.577
> 
> 标签：linux, bash, shell

这听起来像是一个非常简单的问题，但是什么

```
ADB=${ADB:-adb} 
```

做？

我已经运行了它，它设置`$ADB`为`adb`，我知道将值分配给`ADB`shell 变量部分，但是有什么作用`${ADB:-adb}`呢？我以前没有见过这种语法/用法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T21:11:13.907

如果`ADB`变量未设置，`bash`将显示字符串`adb`。

另一个技巧是输入：

```
echo ${ADB:=adb} 
```

在这种情况下，`ADB`变量被分配了字符串`adb`（仍然 if`ADB`没有设置）

所有这些不错的功能都是[bash*参数扩展*](http://wiki.bash-hackers.org/syntax/pe)

# ios - 如何访问数组内的类的方法

> ID：15166919
> 
> 赞同：0
> 
> 时间：2013-03-01T21:09:00.630
> 
> 标签：ios, nsmutablearray, nsarray

我有一个自定义类，其中包含有关汽车的信息，例如库存号、vin 等。我使用属性作为获取器和设置器来设置所有信息。然后我创建这个类的一个实例并将它存储在一个 NSMutableArray 中。所以现在我有一个数组，其中包含我们地段上所有不同的汽车。

我的问题是如何直接在数组中访问类成员：

```
Veh *veh = [[Veh alloc] init];
veh.Stock = @"P9494";
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject:veh];
// here is what I want to do, access Stock directly from the array
NSString* string = [[array objectAtIndex:0].Stock]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:15:33.090

您的示例有一个额外的点或一对括号。要修复它，您可以删除点并调用`Stock`对象上的方法：

```
NSString* string = [[array objectAtIndex:0] Stock] ; 
```

或者您可以删除括号并告诉 Xcode 您的对象是 a `Veh*`，从而允许您使用该属性`Stock`。

```
NSString* string = ((Veh*)[array objectAtIndex:0]).Stock ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T21:15:50.277

也许通过使用正确的语法？

```
NSString *string = [[array objectAtIndex:0] Stock]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:16:10.533

尝试：

```
NSString* string = ((Veh *)[[array objectAtIndex:0]).Stock]; 
```

# java - 如何使用输入长度和范围设置 DocumentFilter？例如 1-3 或 10-80

> ID：15166921
> 
> 赞同：0
> 
> 时间：2013-03-01T21:09:12.457
> 
> 标签：java, swing, numbers, jtextcomponent, documentfilter

我正在使用 DocumentFilter 将输入限制为整数或小数。我在这里发布的代码对此效果很好。

任何人都可以帮助我了解如何限制给定代码中的输入长度或范围吗？

谢谢！！

```
class MyIntFilter extends DocumentFilter {
public void insertString(FilterBypass fb, int offset, String string,
     AttributeSet attr) throws BadLocationException {

  Document doc = fb.getDocument();
  StringBuilder sb = new StringBuilder();

  sb.append(doc.getText(0, doc.getLength()));
  sb.insert(offset, string);

  if (test(sb.toString())) {
     super.insertString(fb, offset, string, attr);
  } else {
     // warn the user and don't allow the insert
  }
}

private boolean test(String text) {
  try {
     Integer.parseInt(text);
     return true;
  } catch (NumberFormatException e) {
     return false;
  }
}

@Override
public void replace(FilterBypass fb, int offset, int length, String text,
     AttributeSet attrs) throws BadLocationException {

  Document doc = fb.getDocument();
  StringBuilder sb = new StringBuilder(2);
  sb.append(doc.getText(0, doc.getLength()));
  sb.replace(offset, offset + length, text);

  if (test(sb.toString())) {
     super.replace(fb, offset, length, text, attrs);
  } else {
     // warn the user and don't allow the insert
  }

}

 @Override
 public void remove(FilterBypass fb, int offset, int length)
     throws BadLocationException {
  Document doc = fb.getDocument();
  StringBuilder sb = new StringBuilder(2);
  sb.append(doc.getText(0, doc.getLength()));
  //sb.append(doc.getText(0, 2));
  sb.delete(offset, offset + length);

  if (test(sb.toString())) {
     super.remove(fb, offset, length);
  } else {
     // warn the user and don't allow the insert
  }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:13:16.217

您可能想对此进行测试（因为我没有），但基本的想法应该让您开始。

另请查看[文档过滤器示例](http://www.jroller.com/dpmihai/entry/documentfilter)

至于设置最小长度，您可能还想[`InputVerifier`](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)使用

```
class MyIntFilter extends DocumentFilter {

    private int maxLength = 0;

    public void setMaxLength(int maxLength) {
        this.maxLength = maxLength;
    }

    public int getMaxLength() {
        return maxLength;
    }

    public void insertString(FilterBypass fb, int offset, String string,
                    AttributeSet attr) throws BadLocationException {

        Document doc = fb.getDocument();
        StringBuilder sb = new StringBuilder();

        sb.append(doc.getText(0, doc.getLength()));
        sb.insert(offset, string);

        if (maxLength > 0 && doc.getLength() + string.length() <= maxLength) {
            if (test(sb.toString())) {
                super.insertString(fb, offset, string, attr);
            } else {
                // warn the user and don't allow the insert
            }
        }
    }

    private boolean test(String text) {
        try {
            Integer.parseInt(text);
            return true;
        } catch (NumberFormatException e) {
            return false;
        }
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text,
                    AttributeSet attrs) throws BadLocationException {

        Document doc = fb.getDocument();
        StringBuilder sb = new StringBuilder(2);
        sb.append(doc.getText(0, doc.getLength()));
        sb.replace(offset, offset + length, text);

        if (test(sb.toString())) {
            if (sb.length() > maxLength) {
                length = sb.length() - maxLength;
                if (length > 0) {
                    text = text.substring(0, length);
                    super.replace(fb, offset, length, text, attrs);
                }
            }
        } else {
            // warn the user and don't allow the insert
        }

    }

    @Override
    public void remove(FilterBypass fb, int offset, int length)
                    throws BadLocationException {
        Document doc = fb.getDocument();
        StringBuilder sb = new StringBuilder(2);
        sb.append(doc.getText(0, doc.getLength()));
        //sb.append(doc.getText(0, 2));
        sb.delete(offset, offset + length);

        if (test(sb.toString())) {
            super.remove(fb, offset, length);
        } else {
            // warn the user and don't allow the insert
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T20:54:22.260

根据 MadProgrammer 的回答，我测试了在“MyIntFilter”类中编辑他的“替换”功能：

```
 @Override
    public void replace(FilterBypass fb, int offset, int length, String text,
                AttributeSet attrs) throws BadLocationException {

    Document doc = fb.getDocument();
    StringBuilder sb = new StringBuilder(2);
    sb.append(doc.getText(0, doc.getLength()));
    sb.replace(offset, offset + length, text);

    if (test(sb.toString())) {
        if (sb.length() < maxLength + 1) { //test string size
            super.replace(fb, offset, length, text, attrs);
            }
        }
    } else {
        // warn the user and don't allow the insert
    }

} 
```

它对我来说很好。

# c++ - 我应该使用多少个随机数生成器？

> ID：15166923
> 
> 赞同：0
> 
> 时间：2013-03-01T21:09:18.557
> 
> 标签：c++, algorithm, random, prng

如果应用程序的不同类别需要提取一个或多个随机数，应该在哪里初始化随机数生成器以产生良好的随机序列？

特别是，我需要构建一些决策树来训练随机森林。每个决策树的构建涉及以下步骤：

1.  加载数据集（按多行数据组织）。
2.  此数据集中的一些行是**随机**选择的，以构建新数据集。这个新的数据集将在树的生长过程中逐渐分裂。
3.  这个新数据集用于生成决策树：每个节点的创建需要**随机**选择这个新数据集的几行（在创建一个节点之前，您必须随机生成这个新数据集的一些小的不同子集） .

上面列出的三个步骤是为构建每个决策树而执行的。刚刚描述的过程规定随机数生成发生多次。例如，第二步应确保每个决策树都使用与初始数据集略有不同的数据集进行训练，因此随机数生成器应避免生成相等的数据集（或者在任何情况下，这种情况发生的可能性应该非常低） .

本质上，在这个过程中，我们可以识别出两个随机性来源：

*   随机数据集的生成`N`，每个数据集训练一个决策树；
*   在创建节点之前，您必须`M`从给定的数据集中执行随机提取。

我应该使用多少个随机数生成器？由于我有一个实现随机森林的类和另一个实现决策树的类，我想我会在第一个类（第一个随机源）中初始化一个随机数生成器，在第二个类中初始化另一个随机数生成器类（随机性的第二个来源）。这个对吗？

一般来说，选择正确数量的伪随机数生成器的准则是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:12:10.960

请记住，无论您使用哪种计算机语言，生成的数字始终是伪随机的。这意味着给定用于产生一代的相同种子，您将始终获得相同的结果。编程语言中包含的所有随机数生成器都已经过大量开发和测试，以尽可能优化。一次通过随机函数就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:40:49.270

只使用一个随机生成器，但要确保它的种子很好。您可以将它放在 main() 的开头，然后生成随机数序列供以后使用，或者随时调用生成器。

确保不要在每次调用它时播种它，因为例如，如果你在一秒钟内使用时间播种，这很容易产生相同的数字。最好只为您的生成器播种一次。

事实上，如果你在一个类 Unix 系统上，考虑使用[/dev/random](http://en.wikipedia.org/wiki//dev/random)作为你的生成器。不要自己编写代码，因为您使用的几乎任何系统都保证提供本机或具有用于产生随机性的库。

一般来说，考虑使用利用外部源（来自计算机硬件的噪声）的生成器，而不是自己计算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T21:11:24.237

取决于您需要序列的可重复性。例如，如果您不能保证 rand() 调用的顺序，并且每次都需要生成相同的序列进行测试，那么您需要为每个队列使用单独的种子/生成器。

如果您不关心可重复性，那么只需一个生成器、一个种子，然后让它运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T07:17:43.627

所有函数只使用一个随机数生成器。

使用两个或更多随机数生成器可能会导致问题。大多数随机数生成器使用系统时间作为起始种子。如果实例化两个在时间上靠得很近的随机数类，它们可能会产生相同的随机数序列。使用单个随机生成器这不可能发生。

# javascript - 对复选框执行操作

> ID：15166926
> 
> 赞同：0
> 
> 时间：2013-03-01T21:09:40.293
> 
> 标签：javascript, jquery, html

如何更改此功能，以便在用户选中一个框后执行它，而不是单击按钮？此外，如果他们取消选中，则会执行另一个函数。

```
 $("#saveData")
     .click(function (e) {
     e.preventDefault();
     localStorage.setItem("flag", "set");
     var data = $("#form1").serializeArray();
     $.each(data, function (i, obj) {
         if (obj.name != "creditCard") {
             localStorage.setItem(obj.name, obj.value);
         }
     });
 }); 
```

这是输入字段，

```
<input id="saveAddress" type="checkbox" name="address">Save Address 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:13:36.690

好吧，有了这些信息，我这里有一些基本的指导方针：

```
$('#checkbox_element').change(function(){
  if(this.checked){
    //checkbox checked, do your thing
  }else{
    //it has been unchecked
  }
}); 
```

JSFiddle 示例：http: [//jsfiddle.net/uHEhh/1/](http://jsfiddle.net/uHEhh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:13:47.787

你可以这样做：

```
 $("#saveAddress").click(function(e) {
   if($(this).prop("checked")) {
    localStorage.setItem("flag", "set");
    var data = $("#form1").serializeArray();
    $.each(data, function(i, obj) {
        if(obj.name != "creditCard") {
            localStorage.setItem(obj.name, obj.value);
        }
    });             
   } else {
       /*Other function code*/
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T21:13:02.573

更改`$("#saveData").click`为`$("#saveAddress").click`，所以你会得到类似的东西：

```
$("#saveAddress")
     .click(function (e) {
     e.preventDefault();
     localStorage.setItem("flag", "set");
     var data = $("#form1").serializeArray();
     $.each(data, function (i, obj) {
         if (obj.name != "creditCard") {
             localStorage.setItem(obj.name, obj.value);
         }
     });
 }); 
```

（您也可以`$(this).(':checked')`在事件处理程序内部使用来执行不同的检查/取消检查操作）

# java - Java 解构器

> ID：15166929
> 
> 赞同：-2
> 
> 时间：2013-03-01T21:10:01.807
> 
> 标签：java, memory-management, memory-leaks

如何将对象使用的内存及其所有数据结构回收到我的应用程序内存中，否则`System.gc()`只会*建议*而*不一定执行*内存检查。这也包括像`finalize`.

换句话说，假设我有一个`HashMap`并且我希望它存储的所有数据都从内存中删除。我通常会使用`clean`方法清理这种类型的集合或将其附加到，`null`但这似乎不会将内存空间返回给应用程序？

***编辑***：

让我们说以下内容：

```
 TIntObjectHashMap<byte[]> map=new TIntObjectHashMap<byte[]>();
    //fill the map with 20GB
    map.clear();
   //Or map=null; 
```

20GB不应该免费退回吗？就是那个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T21:11:06.467

基本上，你不能。你不能做任何事情来绝对*强制*垃圾收集，你当然不能手动删除一个对象。

学会爱和信任垃圾收集器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T21:15:01.823

你不能强制垃圾收集，你唯一能做的就是调用`System.gc()`方法，但这只是对垃圾收集器的一个提示，它不会强制它进行收集

# django - “得到了一个意外的关键字参数‘ticket_id’”

> ID：15166931
> 
> 赞同：0
> 
> 时间：2013-03-01T21:10:17.527
> 
> 标签：django, django-templates

我正在开发一个项目管理应用程序。一个项目可以有票证，这些票证与项目相关联，并且在项目下方的模板中呈现，以及项目的票证。

但是，下面的代码出现错误，我无法弄清楚它的含义以及如何解决它：

```
Exception Value:    show_ticket() got an unexpected keyword argument 'ticket_id'
Exception Location: /Library/Python/2.7/site-packages/Django-1.4.5-py2.7.egg/django/contrib/auth/decorators.py in _wrapped_view, line 20 
```

有什么问题？

**项目模板：**

```
{% for ticket in tickets %}
    <span>{{ ticket }}</span>
    <a href="{% url show_ticket project.id ticket.id %}">Show ticket</a><br/>
{% endfor %} 
```

**网址.py：**

```
url(r'^project/(?P<project_id>\d+)/ticket/(?P<ticket_id>\d+)/$', 'project_app.views.show_ticket', name="show_ticket"), 
```

**看法：**

```
@login_required
def show_ticket(request, project_id):
    ticket = get_object_or_404(Ticket, pk = ticket_id)

    return render(request, 'projects/show_ticket.html', {"ticket" : ticket}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:17:08.867

您的`show_ticket`视图只接受一个变量 - 项目 ID。您正在使用两个变量调用该视图的反向 -`project.id`和`ticket.id`.

您的视图 URL 已设置为接受`ticket_id`，因此您只需更改视图以接受`ticket_id`：

```
def show_ticket(request, project_id, ticket_id):
    .... 
```

# git - Bitbucket 以用户身份推送

> ID：15166932
> 
> 赞同：19
> 
> 时间：2013-03-01T21:10:34.843
> 
> 标签：git, bitbucket

1) 我使用 TEAM 主用户在 bitbucket 上创建了一个新仓库。

2) 然后我添加所有能够下载这个 repo 的开发密钥。

3) 转到服务器并使用以下命令克隆此 repo：

```
git clone ssh://git@bitbucket.org/user/repo.git 
```

4）我对代码进行了一些更改并提交了

```
git commit -a -m "some improves" 
```

所以这是问题：

我无法执行 git push 因为我没有推送权限来对这个用户执行此操作：

```
# git push
conq: repository access denied. access via a deployment key is read-only.
fatal: The remote end hung up unexpectedly 
```

那么，如何使用我的用户名/密码进行推送？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-05T16:37:14.167

您始终可以使用 https 在您的服务器上设置第二个远程：

```
git remote add edit-only-origin https://bitbucket.org/user/repo.git 
```

然后，您可以进行小的编辑，提交，然后使用命令

```
git push edit-only-origin 
```

这将提示您输入用户名和密码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-01T21:31:22.560

据我了解，`deployment key`是只读访问。为了能够推送，您需要添加计算机的`ssh`密钥。

转到管理帐户，然后在左侧选择 SSH 密钥。通过复制并粘贴您的 rsa.pub 公钥来添加密钥。

最好从终端复制它以确保没有时髦的字符混入其中。要在 OSX 中执行此操作，请键入`pbcopy < ~/.ssh/id_rsa.pub`. 对于 Linux，请查看 Agush 的评论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-25T21:43:26.893

看起来您确实使用了开发人员的密钥。需要在配置文件中添加 SSH-key 并在存储库部分中删除它们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-29T01:31:37.520

尝试使用 HTTPS 而不是 SSH --

```
git -c user.email='myemail@gmail.com' -c user.name='myusername' commit
git push https://myusername@bitbucket.org/path-to/myrepos.git master 
```

SSH 使用密钥，在这种情况下，它只会让您获得读取权限。HTTPS 将提示您输入密码，为您提供推送的写入权限。

便于在使用只读部署密钥的服务器上进行快速编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-08T03:38:15.287

第一个 bitbucket 支持 ssh 访问。

我认为您可以在回购协议下添加您的密钥。存储库中的密钥是部署密钥，它没有写入权限。

如果您想要推送权限，您应该在您的帐户下添加密钥。

链接喜欢`https://bitbucket.org/account/user/#{the-org-name}/ssh-keys/`。

# php - 使用 Jqplot 和 ajax 的多线图形

> ID：15166936
> 
> 赞同：0
> 
> 时间：2013-03-01T21:10:51.317
> 
> 标签：php, jquery, jqplot

我正在尝试使用 DataRender 命令使用 jqPlot，而 ajax 没有问题。我的ajax返回类似

> [[0,0,53,53,0,0],[78,99,83,58,0,0],[91,99,83,0,0,0],[0,0,45, 56,0,0],[0,0,0,50,0,0]]

如果我手动放置它可以正常工作，但我无法使用 ajax 使其工作

这是我的代码

```
var ajaxDataRenderer = function(url, plot, options) {
  var ret = [];
  $.ajax({
    type: "POST",async: false,
      url: "modulos/stat.vis.php",
      data: "q="+idStat+"&dde="+$("#statDesde").val()+"&hta="+$("#statHasta").val(),
   dataType:"json",
    success: function(data) {
     ret = [data];
     return data;
    }
  });
  return ret;
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:23:51.707

在您的成功回调中，您不返回数据。

试试这个 ：

```
var ajaxDataRenderer = function(url, plot, options) {
  var ret = [];
  $.ajax({
      type: "POST",
      async: false,
      url: "modulos/stat.vis.php",
      data: "q="+idStat+"&dde="+$("#statDesde").val()+"&hta="+$("#statHasta").val(),
      dataType:"json",
      success: function(data) {
         ret = data; // I asume that your data are correctly formatted 
      }
  });

  return ret;
}; 
```

# delphi - 如何配置 Indy v10 以支持 IPv4 + IPv6？

> ID：15166939
> 
> 赞同：10
> 
> 时间：2013-03-01T21:11:00.460
> 
> 标签：delphi, indy, indy10

使用以下代码，我可以获得 IPv4 网站的内容：

```
uses 
  IdHttp;

IdHttp1 := TIdHttp.Create(nil);
try
  Result := IdHttp1.Get('http://www.heise.de/')
finally
  IdHttp1.Free;
end; 
```

但是当我尝试连接到 IPv6 网站时，我收到了 Socket Error #11004：

```
IdHttp1 := TIdHttp.Create(nil);
try
  Result := IdHttp1.Get('http://www.six.heise.de/')
finally
  IdHttp1.Free;
end; 
```

我可以很好地 ping www.six.heise.de (IP 2a02:2e0:3fe:100::6:) 并且 Firefox 可以毫无问题地显示该网站。

我需要在 Indy（SVN 的最新 V10 版本）中进行哪些更改才能同时连接到 IPv4 和 IPv6 网站？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T21:39:27.797

`TIdTCPClient`需要告知是使用 IPv4 还是 IPv6 进行套接字和主机名到 IP 的解析。这是使用该`TIdTCPClient.IPVersion`属性完成的。但是，`TIdHTTP`这是一种特殊情况，因为它在`TIdTCPClient`内部管理属性和连接，包括`IPVersion`. 根据请求的 URL 设置`TIdHTTP`。`IPVersion`为了请求一个包含 IPv6 主机名的 URL，它需要用括号括起来，例如：

```
Result := IdHttp1.Get('http://[www.six.heise.de]/') 
```

# jquery - 创建 HTML 按钮以运行 Python 脚本

> ID：15166941
> 
> 赞同：3
> 
> 时间：2013-03-01T21:11:01.493
> 
> 标签：jquery, html, ajax, django, lighttpd

我正在尝试在网页 quad_relay.html 上创建一个按钮

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.o$
<html xmlns="http://www.w3.org/1999/xhtml">
</script>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
 <body>
   <h1>Quad Web Relay</h1>
   <div>Relay 1:
     <input type="button" value="Toggle" id="toggle1" />
   </div>
 </body>
</head>
</html> 
```

单击该按钮时，我希望它运行 python 脚本 set_gpio.py

```
def set_pins_high():
        fp = open("/sys/class/gpio/gpio"+pin+"/value","w")
        fp.write(str(1))
        fp.close()
def set_pins_low():
        fp1 = open("/sys/class/gpio/gpio"+pin+"/value","w")
        fp1.write(str(0))
        fp1.close()

for pin in pins:
        for x in range (0,2):
                set_pins_high()
                time.sleep(0.5)
                set_pins_low()
                time.sleep(0.5) 
```

该网页位于运行 Django 的 lighttpd 服务器上。我安装了 jQuery 和 AJAX，我知道它们是我需要采取的途径来完成此任务，但是每次我尝试一些它都不起作用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T00:25:16.027

你必须做一些修改：

在您的 HTML 文件中：

```
<div>Relay 1:
  <form action= '{% url my_view_name%}' method="POST">
      <input type="submit" value="Toggle" id="toggle1" />
  </form>
</div> 
```

在 urls.py

```
url(r'whatever^$', 'core.views.my_view',name='my_view_name'), 
```

在views.py中：

```
def my_view(request):
    if request.method == 'POST':
        import set_gpio
        #Do your stuff ,calling whatever you want from set_gpio.py

    return #Something, normally a HTTPResponse, using django 
```

# jquery-ui - jquery-ui多选小部件标签和复选框选择错误的字段

> ID：15166946
> 
> 赞同：0
> 
> 时间：2013-03-01T21:11:25.383
> 
> 标签：jquery-ui

我在单个页面上使用了 2 个多选字段实例。 [http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

我遇到的问题是当我选择多选字段的第一个实例的标签（不是复选框）时，它正在检查多选字段的第二个实例的框。

原因是标签的类名在两种情况下都相同。这种行为是可以的，但单击第一个字段上的标签不会单击它各自的复选框。

我已经使用 v1.5 中的新类选项设置了具有不同类名的两个实例的类，但这不会更改标签的类名。

有没有其他人遇到过这个问题？我应该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:26:03.540

啊抱歉 - 我在 rails 中使用 select_tag 并且刚刚意识到多选的标签来自文本字段的名称和 ID，而不是类。将文本字段的名称和 ID 更改为不同的解决了我的问题。

# jquery - 如何将左右箭头键映射为向上和向下键？

> ID：15166947
> 
> 赞同：2
> 
> 时间：2013-03-01T21:11:28.903
> 
> 标签：jquery, keydown

我试图让网站在按下左箭头时向上滚动，在按下右箭头时向下滚动。

我正在尝试这个：

```
 $("body").keydown(function(e){
        console.log( e.which );
        // left arrow
        if ((e.keyCode || e.which) == 37)
        {   
            e.keyCode = 38;
            e.which = 38;
            $("body").trigger( e );
        }
        // right arrow
        if ((e.keyCode || e.which) == 39)
        {
            e.keyCode = 40;
            e.which = 40;
            $("body").trigger( e );     
        }   
    }); 
```

但是工作不正常，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:32:08.627

尝试控制滚动而不是尝试触发向上和向下箭头。见下文，

下面的代码实际上是按页滚动的，将 更改`$(window).height()`为固定的理想值。（**演示：http:** [//jsfiddle.net/v5DZ9/1/](http://jsfiddle.net/v5DZ9/1/)）

```
//This is for page scroll. Use a reduced height instead of $(window).height() 
//for controlled scroll.
$(document).keyup(function (e) {
    if (e.which == 39) {
       window.scrollTo(0, $(window).height() + $(document).scrollTop()); 
    } else if (e.which == 37) {          
       window.scrollTo(0, $(document).scrollTop() - $(window).height());
    }
}); 
```

**演示：http:** [//jsfiddle.net/v5DZ9/](http://jsfiddle.net/v5DZ9/)

***注意：**请谨慎使用，此代码未经测试。*

# apache - 无法建立 SSL 连接，如何修复我的 SSL 证书？

> ID：15166950
> 
> 赞同：66
> 
> 时间：2013-03-01T21:11:32.600
> 
> 标签：apache, ssl, openssl, wget

我正在尝试`wget`自己的盒子，它不能是 wget 中的内部地址（另一位开发人员说）。

当我 wget 时，我得到了这个：

```
wget http://example.com
--2013-03-01 15:03:30--  http://example.com/
Resolving example.com... 172.20.0.224
Connecting to example.com|172.20.0.224|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://www.example.com/ [following]
--2013-03-01 15:03:30--  https://www.example.com/
Resolving www.example.com... 172.20.0.224
Connecting to www.example.com|172.20.0.224|:443... connected.
OpenSSL: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol
Unable to establish SSL connection. 
```

我相信这是因为我没有正确设置证书。使用openssl：

```
openssl s_client -connect example.com:443
CONNECTED(00000003)
15586:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:s23_clnt.c:588: 
```

如果我在另一个站点上执行相同的命令，它会显示整个证书。

也许从未在 Apache 的 conf 文件中为该域设置 ssl 证书？

如果是这样，我应该在虚拟主机中指定什么？`--no-check-certificate`除了指定因为我不想这样做之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-03-01T22:50:23.567

> SSL23_GET_SERVER_HELLO：未知协议

当 OpenSSL`ServerHello`从服务器接收到的协议版本不是它所理解的协议版本时，就会发生此错误。如果服务器使用普通（未加密的）HTTP 应答，就会发生这种情况。如果服务器仅支持例如 TLS 1.2 而客户端不理解该协议版本，也会发生这种情况。通常，服务器至少向后兼容 SSL 3.0 / TLS 1.0，但也许这个特定的服务器不是（通过实现或配置）。

目前尚不清楚您是否试图通过`--no-check-certificate`。如果这行得通，我会感到相当惊讶。

一个简单的测试是使用`wget`（或浏览器）请求`http://example.com:443`（注意`http://`，不是`https://`）；如果有效，则 SSL 未在端口 443 上启用。要进一步调试，请使用`openssl s_client`该`-debug`选项，该选项在错误消息转储 OpenSSL 无法解析的服务器响应的前几个字节之前。这可能有助于识别问题，尤其是在服务器没有回复`ServerHello`消息的情况下。要查看 OpenSSL 到底期待什么，请查看源代码：`SSL_R_UNKNOWN_PROTOCOL`在`ssl/s23_clnt.c`.

无论如何，查看 apache 错误日志也可以提供一些见解。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-02T01:03:57.973

就我而言，我没有启用站点“default-ssl”。`/etc/apache2/sites-enabled`文件夹中仅列出了“000-default” 。

在 Ubuntu 14 LTS、Apache 2.4.7 上启用 SSL 站点：

```
a2ensite default-ssl
service apache2 reload 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-12-02T09:04:06.980

**只是一个简短的说明**（和可能的原因）。

您可以在 Apache .conf 文件中`VirtualHost`使用 etc. 进行完全正确的设置。`_default_:443`

*但是......*如果甚至有一个 .conf 文件启用了不正确的设置，也侦听端口 443，那么它将导致整个 SSL 系统崩溃。

因此，如果您确定您的 .conf 文件是正确的，请尝试禁用 .conf 中的其他站点 .conf 文件`sites-enabled`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-01T21:22:56.760

有几种可能：

1.  ~~您的工作站没有用于签署服务器证书的根 CA 证书。您如何修复这取决于您正在运行的操作系统和版本等。~~ （我怀疑这无关）
2.  ~~您的证书未正确安装。如果您的 SSL 证书需要提供中间证书而您没有设置它，您会收到这些警告。~~
3.  您确定您已在端口 443 上启用 SSL 吗？

首先，要消除 (3)，如果您 telnet 到该端口会发生什么？

假设它不是 (3)，那么根据您的需要，您可以忽略这些错误并仅通过 --no-certificate-check。您可能想使用常规浏览器（通常会直接捆绑根证书）并查看是否满意。

如果要手动验证证书，请从`openssl s_client`输出中发布更多详细信息。或使用`openssl x509 -text -in /path/to/cert`将其打印到您的终端。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-09T20:35:12.333

我在设置新的 EC2 实例时遇到了这个问题。我没有将 HTTPS 添加到我的安全组，因此端口 443 未打开。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-13T10:26:33.717

对我来说，我的服务器的 DNS 名称已添加到 /etc/hosts 并映射到 127.0.0.1 导致

> SL23_GET_SERVER_HELLO：未知协议

删除我的真实 DNS 名称到 127.0.0.1 的映射解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-31T09:47:11.460

我遇到了同样的问题。Centos 中没有打开 443 端口。

使用以下命令检查 443 端口：

> 须藤 lsof -i tcp:443

在*/etc/httpd/conf.d/ssl.conf*的第一行添加这两行：

```
LoadModule ssl_module modules/mod_ssl.so
Listen 443 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-31T16:18:24.110

这个问题只在特殊情况下发生在我身上，当我从一些互联网提供商那里打电话时，

我在 apache 的 VirtualHost 配置中只配置了 ip v4，但是一些路由器使用 ip v6，当我将 ip v6 添加到 apache config 时，问题就解决了。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-12-23T09:32:26.687

我面临的问题是在客户端服务器环境中。客户端试图通过 http 端口 80 连接，但希望服务器代理将请求重定向到其他端口，并且数据是 https。所以基本上通过http询问安全信息。所以服务器应该有 http 端口 80 以及端口客户端正在请求，比方说`urla:1111\subB`。

问题是服务器将其托管在其他一些端口上，例如`urla:2222\subB`；所以客户端试图访问超过 1111 时收到错误。更正端口号应该可以解决此问题。在这种情况下，端口号为 1111。

# php - Joomla-PHP 中的 if 语句中的 Include

> ID：15166956
> 
> 赞同：0
> 
> 时间：2013-03-01T21:11:47.950
> 
> 标签：php, if-statement, joomla, include, joomla2.5

我在使用 DirectPHP 插件的文章中添加 php。我的目标是创建一个脚本，当用户拥有 member = true 时，该脚本将包含一个带有文本的文件；什么时候不显示任何东西。

我已在徽标旁边顶部的模块中添加了这段代码：

```
<?php
if ($user =JFactory::getUser()->guest)
{
$member = false;
echo "Welcome guest, sign up and read nice quotes";
}
else
   {
$member = true;
$user =& JFactory::getUser();
echo "Welcome " . $user->username;
}
?> 
```

*   我设置了 member = true; 现在该人已登录。如果他未登录，则为假。

然后在文章里面我有：

```
<?php
if ($member == false)
{
 $file = file_get_contents ('quotes/quotes.html'); 
 echo $file;
}
?>

<hr id="system-readmore" />

<?php 
if ($member == true)
{
include_once JPATH_SITE.'/quotes/random.php';
echo ShowQuotes(); 
}
?> 
```

我找不到使它无法运行的问题。两者都显示了引号，`$member = false;`并且`$member = true;`尽管有 if 语句，但是否始终包含被解析？file_get_contents 也一样？我试图查看标头中的 $member 声明是否保留在解析中并写道：

```
<?php
if ($member = true)
{
echo "Logged in";
}
?> 
```

而且效果很好，所以问题出在 and 之内`include_once`，`file_get_contents`我试图尽可能地查明它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:16:38.627

这可能是你的问题：

```
if ($member = true)
{
echo "Logged in";
} 
```

这总是分配`true`to的值`$member`。

也在这里：

```
if ($user =JFactory::getUser()->guest) 
```

您可能有相同的分配问题（不确定您是否打算`$user`在这里设置和执行条件。

我可能会建议养成这样写条件的习惯：

```
if (true === $member) { ... } 
```

通过颠倒项目的顺序，如果你不小心输入`=`了`==`or `===`，那么你会得到一个错误，而不是让代码意外地默默地执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:12:14.357

您似乎在这里有一个范围问题：您在模块中声明 $member，但 $member 将无法用于文章：如果 $something 未定义，php 将评估 ($something == false) 以始终成功，如果你想检查一个变量是否*真的*是假的，你需要使用 ($something===false)。在这里阅读更多：[http ://www.php.net/manual/en/language.types.boolean.php](http://www.php.net/manual/en/language.types.boolean.php)

话虽这么说，因为 JFactory::getUser()->guest 没有真正的开销，所以在你的文章中也使用它！

顺便说一句，在您的 php 配置中启用通知（无论是在屏幕上还是在日志文件中）并确保您在开发时阅读它，它会告诉您任何错误，在没有看到错误的情况下开发是一个猜谜游戏，您只能爆炸你的头靠在墙上很多次......你最终需要打开灯:-)

# python - 寻找以前编写的代码的修订版

> ID：15166957
> 
> 赞同：2
> 
> 时间：2013-03-01T21:11:51.570
> 
> 标签：python

我注意到最近我的作业成绩随着 Python 课程的进步而越来越低，我想知道是否有人可以帮助我了解我在这些代码片段上做错了什么以及为什么它们被认为是错误的。这可能是一个很长的帖子，但是任何能阻止我在未来犯这些错误的帮助都是值得的。

```
def geometric(l):
    'list(int) ==> bool, returns True if the integers form a geometric sequence'
    res = False
    if (l[1] / l[0]) == (l[2] / l[1]):
        res = True
    return res 
```

这是一个被认为是错误的代码。正如代码所说，它需要一个整数列表并返回它们是否处于几何序列中。我的书说，如果 a1/a0 等于 a2/a1，则序列是几何的，这对于 2、4、8、16 等都很好。我刚刚意识到这个问题是它只检查前两个索引和忽略其余的数字。我能写什么来解决这个问题？

```
def letter2number(grade):
    '''string ==> int, returns the numeric equivalent to the letter grade, adding 0.3 if the grade contains a +
    and subtracts 0.3 if the grade contains a -'''
    res = 0
    if 'F' in grade:
        res = 0
    elif 'D' in grade:
        res = 1
    elif 'C' in grade:
        res = 2
    elif 'B' in grade:
        res = 3
    elif 'A' in grade:
        res = 4
    if '+' in grade:
        res += 0.3
    elif '-' in grade:
        res -= 0.3
    return res 
```

确切地说，这并没有被认为是错误的，但它比我猜想的要长得多。他在文件上写的一条评论是“# set res to index of grade in grades”，但由于它是一个独立实验室，我无法寻求帮助。我试图在列表中为每个等级赋予其价值，但我无法正确索引它。

```
def leap(n):
    'int ==> bool, returns True if the year is a leap year, False otherwise'
    res = False
    if n % 4 == 0 and n % 400 == 0 or not n % 100 == 0:
        res = True
    return res 
```

找出一个翻译成“一年是闰年，如果它可以被 4 整除但不能被 100 整除，除非它可以被 400 整除”的 if 语句让我感到困惑。显然我写的适用于所有奇数，但我无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:19:26.450

看起来你的问题至少有一半不是编程问题，而是理解任务的问题。例如：

> 这是一个被认为是错误的代码。正如代码所说，它需要一个整数列表并返回它们是否处于几何序列中。我的书说，如果 a1/a0 等于 a2/a1，则序列是几何的，这对于 2、4、8、16 等都很好。我刚刚意识到这个问题是它只检查前两个索引和忽略其余的数字。

您的代码正确地实现了您认为的任务。它只是没有通过检查所有索引对来实现分配的实际内容。一旦你知道这是你需要做的，大概你可以弄清楚如何编写一个比较索引对的循环：

```
def geometric(l):
    'list(int) ==> bool, returns True if the integers form a geometric sequence'
    res = True
    for i in range(len(l) - 2):
        if (l[i+1] / l[i]) != (l[i+2] / l[i+1]):
            res = False
    return res 
```

然后您可能会注意到，您可以在第一次失败时将事物短路，或者将所有比率与第一个进行比较，而不是将它们成对比较（这意味着您必须计算其中的大部分），或者编写一个简单的辅助函数只需检查一对并用于`all`在所有这些上运行它，等等，但这些都只是改进。

然后：

> 找出一个翻译成“一年是闰年，如果它可以被 4 整除但不能被 100 整除，除非它可以被 400 整除”的 if 语句让我感到困惑。显然我写的适用于所有奇数，但我无法弄清楚为什么。

您首先需要将其翻译成英语的一系列`and`和步骤。你所做的，“能被 4 整除，能被 400 整除或不能被 100 整除”，甚至都不是一回事。然后，您正确地编码了错误的算法，但这无济于事。`or``not`

您需要做的就是将“但不是”翻译为“而不是”，将“除非”翻译为“或”：“被 4 可见，并且不能被 100 整除或被 400 整除”。将其转换为代码的唯一棘手部分是使用括号而不是命令和“任一”：

```
if n % 4 == 0 and (not n % 100 == 0 or n % 400 == 0): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:41:56.973

对于您`letter2number`，我会使用字典来处理映射，如下所示：

```
def letter2number(grade):
    G = {'F': 0, 'D': 1, 'C': 2, 'B': 3, 'A': 4}
    D = {'+': 0.3, '-': -0.3}

    if len(grade) == 2:
        return G[grade[0]] + D[grade[1]]
    else:
        return G[grade[0]] 
```

# c++ - 类和对象

> ID：15166960
> 
> 赞同：-6
> 
> 时间：2013-03-01T21:11:57.093
> 
> 标签：c++

假设我有两个班级`Class A`和`Class B`.

```
class A {
    uint32 A_1;
    uint32 A_2;
    uint32 A_3;
    uint32 A_4;
} 
```

**第一个问题：**如何使类 A 的类成员对`uint_32 A_1, A_2, A_3, A_4`从类 B 创建的对象可见？

// 从 B 类创建的对象如下：

```
Object_B = new Class B(); 
```

对于第一个问题，我使 A 类成员对 B 类可见的语法如下：

```
Class A(Class B *); 
```

**第二个问题：**如何`uint_32 A_1, A_2, A_3, A_4`通过我创建的对象访问 A 类的那些类成员（）`Object_B`：？

下面是第二个问题的语法：

```
Object_B->A_1; 
```

两个类的上述语法是否正确？

另外，请为我提供一些 C++ 中的类、对象的良好链接，以便我可以深入阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:19:15.943

```
new A( B * bPointer); 
```

告诉我们类型 A 的对象拥有指向类型 B 的指针。这绝不会将 B 与 A 关联起来。

事实上，如果这是一个设计良好的类，B 不应该知道 A。这使您的第二个问题没有实际意义。所以你应该问的一个重要问题是，你为什么想要这种关系。A和B之间的语义关系是什么？

它是一本书(Page* pages) 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:44:02.047

从链接： http: [//publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp ?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr129.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr129.htm)

受保护的成员（仅限 C++）

受保护的非静态基类成员可以由从该基类派生的任何类的成员和朋友使用以下方法之一访问：

指向直接或间接派生类的指针 对直接或间接派生类的引用 直接或间接派生类的对象

如果一个类是从基类私有派生的，则所有受保护的基类成员都将成为派生类的私有成员。

如果在友元或派生类 B 的成员函数中引用基类 A 的受保护非静态成员 x，则必须通过指向 A 派生类的指针、引用或对象来访问 x。但是，如果如果您正在访问 x 以创建指向成员的指针，则必须使用命名派生类 B 的嵌套名称说明符限定 x。以下示例演示了这一点：

```
 class A {
  public:
  protected:
  int i;
  };

  class B : public A {
  friend void f(A*, B*);
  void g(A*);
  };

  void f(A* pa, B* pb) {
  //  pa->i = 1;
  pb->i = 2;

 //  int A::* point_i = &A::i;
 int A::* point_i2 = &B::i;
  }

void B::g(A* pa) {
//  pa->i = 1;
i = 2;

//  int A::* point_i = &A::i;
int A::* point_i2 = &B::i;
}

void h(A* pa, B* pb) {
//  pa->i = 1;
//  pb->i = 2;
}

int main() { } 
```

# android - Android：无法加载活动

> ID：15166964
> 
> 赞同：0
> 
> 时间：2013-03-01T21:12:18.357
> 
> 标签：android, database, crash, spinner

我对android很陌生，所以不要因为我的错误而责怪我，如果你能尝试帮助我。我的应用程序启动正常，但一旦我尝试切换到另一个活动，它就会说我的应用程序“不幸停止”。在那个活动中，我有一个微调器，我想从中读取所选项目并将此信息存储在我的数据库中。这是日志文本：

```
03-01 21:54:01.392: E/Trace(625): error opening trace file: No such file or directory (2)
03-01 21:54:01.882: D/dalvikvm(625): GC_FOR_ALLOC freed 62K, 4% free 7991K/8259K, paused 75ms, total 78ms
03-01 21:54:01.892: I/dalvikvm-heap(625): Grow heap (frag case) to 9.317MB for 1536016-byte allocation
03-01 21:54:01.982: D/dalvikvm(625): GC_CONCURRENT freed <1K, 4% free 9491K/9799K, paused 33ms+6ms, total 92ms
03-01 21:54:02.533: D/gralloc_goldfish(625): Emulator without GPU emulation detected.
03-01 21:54:03.062: D/dalvikvm(625): GC_CONCURRENT freed 12K, 2% free 9866K/9991K, paused 5ms+26ms, total 224ms
03-01 21:54:06.322: D/AndroidRuntime(625): Shutting down VM
03-01 21:54:06.322: W/dalvikvm(625): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-01 21:54:06.352: E/AndroidRuntime(625): FATAL EXCEPTION: main
03-01 21:54:06.352: E/AndroidRuntime(625): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.s_home/com.example.s_home.Osvetlenie}:    java.lang.ClassCastException: com.example.s_home.Osvetlenie cannot be cast to   android.widget.AdapterView$OnItemSelectedListener
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread.access $600(ActivityThread.java:130)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.os.Looper.loop(Looper.java:137)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-01 21:54:06.352: E/AndroidRuntime(625):  at java.lang.reflect.Method.invokeNative(Native Method)
03-01 21:54:06.352: E/AndroidRuntime(625):  at java.lang.reflect.Method.invoke(Method.java:511)
03-01 21:54:06.352: E/AndroidRuntime(625):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-01 21:54:06.352: E/AndroidRuntime(625):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-01 21:54:06.352: E/AndroidRuntime(625):  at dalvik.system.NativeStart.main(Native Method)
03-01 21:54:06.352: E/AndroidRuntime(625): Caused by: java.lang.ClassCastException: com.example.s_home.Osvetlenie cannot be cast to android.widget.AdapterView$OnItemSelectedListener
03-01 21:54:06.352: E/AndroidRuntime(625):  at com.example.s_home.Osvetlenie.onCreate(Osvetlenie.java:30)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.Activity.performCreate(Activity.java:5008)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-01 21:54:06.352: E/AndroidRuntime(625):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-01 21:54:06.352: E/AndroidRuntime(625):  ... 11 more
03-01 21:54:14.143: I/Process(625): Sending signal. PID: 625 SIG: 9 
```

这是崩溃的活动：

```
package com.example.s_home;

import com.example.s_home.DBAdapter;

import android.os.Bundle;
import android.annotation.SuppressLint; 
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.support.v4.app.NavUtils;
import android.widget.AdapterView;
import android.widget.Adapter;

public class Osvetlenie extends Activity  {

@TargetApi(11)
@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_osvetlenie);

    Spinner spinner = (Spinner) findViewById(R.id.house_spinner);
    spinner.setOnItemSelectedListener((OnItemSelectedListener) this);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource    (this,R.array.house_arrays, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_osvetlenie, menu);
    return true;
 }

 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;

    }
    return super.onOptionsItemSelected(item);
 }

 public class SpinnerActivity extends Activity implements OnItemSelectedListener {

     String miest;
    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {

           miest=parent.getItemAtPosition(pos).toString();
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }

    public void osvZap(View view) {

         DBAdapter db = new DBAdapter(this);
         db.open();

         long id;
           id = db.insertTitle(
                "cas",
                "PI",
                miest, "ON");        
        System.out.println(miest);
           db.close();
      }
 }

} 
```

有人知道我做错了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:13:35.300

您的 Logcat 状态：

`03-01 21:54:06.352: E/AndroidRuntime(625): Caused by: java.lang.ClassCastException: com.example.s_home.Osvetlenie cannot be cast to android.widget.AdapterView$OnItemSelectedListener`

您的代码有：

```
 spinner.setOnItemSelectedListener((OnItemSelectedListener) this); 
```

`this`指的是您的活动的 Osvetlenie。您不能将其投射给听众。

如果你想使用`this`，你需要实现接口。

```
implements OnItemSelectedListener 
```

在你的类声明中，这样你就可以使用关键字`this`来引用监听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:14:40.900

您的 Activity 需要实现接口`OnItemSelectedListener`：

```
public class Osvetlenie extends Activity implements OnItemSelectedListener {
    // Your code
} 
```

完成此操作后，您可以将 set listener 行更改为：

```
 spinner.setOnItemSelectedListener(this); 
```

# hadoop - Hadoop：外部 jar 文件夹参考

> ID：15166969
> 
> 赞同：1
> 
> 时间：2013-03-01T21:12:40.097
> 
> 标签：hadoop

我编写了一个简单的 MapReduce 代码，它将调用外部 jar 中的几个方法。我在 hadoop/lib 文件夹中添加了这个 jar，它正在被拾取。单节点集群一切正常。我有一个多节点集群，我想在其中运行相同的代码。我想知道是否有一种方法可以将我的 jar 复制到 dfs，这样我就不需要在所有节点上手动添加 jar。我想在另一个文件夹（不是 hadoop/lib）中添加所有 jar。有可能实现这一目标吗？即添加对具有许多罐子的文件夹的外部引用。我跟着 cloudera 博客做了同样的事情，但它仍然没有帮助。对此的任何指示都会非常有帮助。我正在使用 hadoop 1.0.4 版本。

PS：我已经在主作业 jar 中添加了所有外部 jar。即使那样，它也没有被捡起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:39:50.297

有两种机制可以将其他 jar 包含到您的作业的类路径中：

如果您尚未将它们存储在 HDFS 中，则可以使用 GenericOptionsParser 的`-libjars`参数。这将导致 JobClient 为您的作业将 jars 上传到 HDFS 中的临时目录，并将它们包含在您的作业的分布式缓存中。为此，您需要通过 ToolRunner.run 界面运行您的作业：

```
public class MyJob extends COnfigured implements Tool {
  public int run(String args[]) {
    Job job = new Job(getConf());
    // configure your job
    // ..

    return job.waitForCompletion() ? 0 : 1;
  }

  public static void main(String args[]) throws Exception {
    ToolRunner.run(new MyJob(), args));
  }
} 
```

然后您将按如下方式运行您的作业（将 jars 1-3 添加到作业类路径）：

```
#> hadoop jar myjob.jar MyJob -libjars jar1.jar,jar2.jar,jar3.jar [other args] 
```

如果您的 jars 已经在 HDFS 中，那么您只需将 jars 添加到分布式缓存中：

```
public int run(String args[]) {
  Job job = new Job(getConf());
  // configure your job
  // ..

  // acquire job configuration
  Configuration conf = job.getConf();

  // create a FileSystem
  FileSystem fs = FileSystem.get(fs);

  DistributedCache.addFileToClassPath(new Path("/myapp/jar1.jar"), conf, fs);
  DistributedCache.addFileToClassPath(new Path("/myapp/jar2.jar"), conf, fs);
  DistributedCache.addFileToClassPath(new Path("/myapp/jar3.jar"), conf, fs);

  return job.waitForCompletion() ? 0 : 1;
} 
```

第二种方法的唯一缺点是您不能在作业配置中引用这些 jar 中的任何类（除非您也有副本客户端，并且您配置了`HADOOP_CLASSPATH`env 变量）。

# java - 使用 JNI 读取带偏移量的内存

> ID：15166972
> 
> 赞同：0
> 
> 时间：2013-03-01T21:12:56.960
> 
> 标签：java, c++, memory, java-native-interface, offset

我正在尝试制作一个可以轻松适应各种游戏的自定义系统，目的是在您的 HP 达到一定标记时治愈您的角色。这将很有用，因为它允许用户在有死亡危险时使用药水或治疗法术来治愈自己。到目前为止，我已经在天际中对其进行了测试，并且我已经让它运行得很好，但我想让这个游戏在 java 代码而不是 Visual Basic 上运行。所以基本上我只需要一些帮助，将我读取内存的一小部分 VB 代码转换为 Java 代码。此外，我希望我必须使用 JNI，但还没有做那么多 JNI，所以请不要直接将我引导到 api。

```
 DWORD HpPointer = 0x007C5710; //example pointer
DWORD HpPointed;
WORD HpOffset = 0x07B4; //example offset
int CurrentHp = 0;      //variable that stores the integer value returned

ReadProcessMemory(hProc,(LPCVOID)(HpPointer), &HpPointed, 4, NULL);
ReadProcessMemory(hProc,(LPCVOID)(HpPointed+HpOffset), &CurrentHp, 4, NULL);
//end of hp section
return (CurrentHp); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:25:06.463

您需要使用以下内容：

```
public class Game {

    public native byte[] readMemory(int offset);

} 
```

你会用

```
javah Game 
```

创建标题

然后你会创建你的 C++ 类并在你的程序中包含头文件

要加载 Game 类，您需要使用 System.loadLibrary() 或使用 -D 命令行参数。注意： System.loadLibrary 取决于您运行的操作系统。因此，如果您在 Windows 下编译，它将是一个 .dll 文件。对于 linux 将是一个 .so 而对于 mac 它将是一个 .jnilib 扩展名

# python - 使用 subprocess.Popen 通过 SSH 或 SCP 发送密码

> ID：15166973
> 
> 赞同：13
> 
> 时间：2013-03-01T21:13:00.690
> 
> 标签：python, linux, ssh, python-3.x, subprocess

我正在尝试[**`scp`**](http://en.wikipedia.org/wiki/Secure_copy)使用`subprocess.Popen`. 登录要求我发送密码：

```
from subprocess import Popen, PIPE

proc = Popen(['scp', "user@10.0.1.12:/foo/bar/somefile.txt", "."], stdin = PIPE)
proc.stdin.write(b'mypassword')
proc.stdin.flush() 
```

这会立即返回一个错误：

```
user@10.0.1.12's password:
Permission denied, please try again. 
```

我*确定*密码是正确的。我很容易通过手动调用`scp`shell 来验证它。那么为什么这不起作用呢？

注意，有很多类似的问题，询问`subprocess.Popen`并发送自动 SSH 或 FTP 登录的密码：

[如何通过 python 脚本在 linux 中设置用户密码？](https://stackoverflow.com/questions/4688441/how-can-i-set-a-users-password-in-linux-from-a-python-script)
[使用子进程发送密码](https://stackoverflow.com/questions/2387731/use-subprocess-to-send-a-password)

这些问题的答案不起作用和/或不适用，因为我使用的是 Python 3。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T22:05:24.687

这是`ssh`使用密码的功能`pexpect`：

```
import pexpect
import tempfile

def ssh(host, cmd, user, password, timeout=30, bg_run=False):                                                                                                 
    """SSH'es to a host using the supplied credentials and executes a command.                                                                                                 
    Throws an exception if the command doesn't return 0\.                                                                                                                       
    bgrun: run command in the background"""                                                                                                                                    

    fname = tempfile.mktemp()                                                                                                                                                  
    fout = open(fname, 'w')                                                                                                                                                    

    options = '-q -oStrictHostKeyChecking=no -oUserKnownHostsFile=/dev/null -oPubkeyAuthentication=no'                                                                         
    if bg_run:                                                                                                                                                         
        options += ' -f'                                                                                                                                                       
    ssh_cmd = 'ssh %s@%s %s "%s"' % (user, host, options, cmd)                                                                                                                 
    child = pexpect.spawn(ssh_cmd, timeout=timeout)  #spawnu for Python 3                                                                                                                          
    child.expect(['[pP]assword: '])                                                                                                                                                                                                                                                                                               
    child.sendline(password)                                                                                                                                                   
    child.logfile = fout                                                                                                                                                       
    child.expect(pexpect.EOF)                                                                                                                                                  
    child.close()                                                                                                                                                              
    fout.close()                                                                                                                                                               

    fin = open(fname, 'r')                                                                                                                                                     
    stdout = fin.read()                                                                                                                                                        
    fin.close()                                                                                                                                                                

    if 0 != child.exitstatus:                                                                                                                                                  
        raise Exception(stdout)                                                                                                                                                

    return stdout 
```

应该可以使用类似的东西`scp`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-05T22:14:47.503

OpenSSH`scp`实用程序调用`ssh`程序以建立与远程主机的 SSH 连接，并且 ssh 进程处理身份验证。该`ssh`实用程序不接受命令行或其标准输入中的密码。我相信这是 OpenSSH 开发人员深思熟虑的决定，因为他们认为人们应该使用更安全的机制，例如基于密钥的身份验证。调用 ssh 的任何解决方案都将遵循以下方法之一：

1.  使用[SSH 密钥](https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2)进行身份验证，而不是密码。
2.  使用[sshpass](https://linux.die.net/man/1/sshpass)、[expect](http://expect.sourceforge.net/)或类似工具来自动响应密码提示。
3.  使用（滥用）SSH_ASKPASS 功能通过调用[此处](https://debian-administration.org/article/587/pam_mount_and_sshfs_with_password_authentication)或[此处或](https://verynomagic.com/2015/06/say-no-to-sshpass.html)[此处](https://stackoverflow.com/q/1340366/13317)的某些答案中`ssh`描述的另一个命令来获取密码。
4.  让 SSH 服务器管理员启用[基于主机的身份验证](https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Host-based_Authentication)并使用它。请注意，基于主机的身份验证仅适用于某些网络环境。[请参阅此处](https://cert.uni-stuttgart.de/doc/ssh-host-based.en.html)和[此处](https://arc.liv.ac.uk/SGE/howto/hostbased-ssh.html)的附加说明。
5.  使用 perl、python、java 或您喜欢的语言编写您自己的 ssh 客户端。大多数现代编程语言都有 ssh 客户端库，您可以完全控制客户端获取密码的方式。
6.  下载[ssh 源代码](https://www.openssh.com/portable.html)`ssh`并按照您想要的方式构建它的修改版本。
7.  使用不同的 ssh 客户端。还有[其他可用的 ssh 客户端](https://en.wikipedia.org/wiki/Comparison_of_SSH_clients)，包括免费的和商业的。其中之一可能比 OpenSSH 客户端更适合您的需求。

在这种特殊情况下，鉴于您已经`scp`从 python 脚本调用，似乎其中一种方法是最合理的方法：

1.  使用python expect 模块[pexpect](https://pypi.python.org/pypi/pexpect)来调用`scp`并将密码提供给它。
2.  使用python ssh 实现[paramiko](https://pypi.python.org/pypi/paramiko/2.3.1)来执行此 ssh 任务，而不是调用外部程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-01T21:28:39.920

您链接的第二个答案建议您使用 Pexpect（这通常是与期望输入的命令行程序进行交互的正确方法）。它有一个[fork](https://pypi.python.org/pypi/pexpect-u)适用于你可以使用的 python3。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-19T20:00:20.103

Pexpect 有一个专门用于此目的的库：pxssh

[http://pexpect.readthedocs.org/en/stable/api/pxssh.html](http://pexpect.readthedocs.org/en/stable/api/pxssh.html)

```
import pxssh
import getpass
try:
    s = pxssh.pxssh()
    hostname = raw_input('hostname: ')
    username = raw_input('username: ')
    password = getpass.getpass('password: ')
    s.login(hostname, username, password)
    s.sendline('uptime')   # run a command
    s.prompt()             # match the prompt
    print(s.before)        # print everything before the prompt. 
    s.logout()
except pxssh.ExceptionPxssh as e:
    print("pxssh failed on login.")
    print(e) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-04T12:01:26.040

我猜一些应用程序使用标准输入与用户交互，而一些应用程序使用终端交互。在这种情况下，当我们使用 PIPE 写入密码时，我们正在写入标准输入。但是 SCP 应用程序从终端读取密码。由于 subprocess 不能使用终端与用户交互，但只能使用 stdin 交互，我们不能使用 subprocess 模块，我们必须使用 pexpect 使用 scp 复制文件。

随时更正。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-26T02:59:04.533

这是我基于 pexpect 的 scp 函数。除了密码，它还可以处理通配符（即多个文件传输）。要处理多个文件传输（即通配符），我们需要通过 shell 发出命令。请参阅[pexpect 常见问题解答](https://pexpect.readthedocs.io/en/stable/FAQ.html)。

```
import pexpect

def scp(src,user2,host2,tgt,pwd,opts='',timeout=30):
    ''' Performs the scp command. Transfers file(s) from local host to remote host '''
    cmd = f'''/bin/bash -c "scp {opts} {src} {user2}@{host2}:{tgt}"'''
    print("Executing the following cmd:",cmd,sep='\n')

    tmpFl = '/tmp/scp.log'
    fp = open(tmpFl,'wb')
    childP = pexpect.spawn(cmd,timeout=timeout)
    try:
        childP.sendline(cmd)
        childP.expect([f"{user2}@{host2}'s password:"])
        childP.sendline(pwd)
        childP.logfile = fp
        childP.expect(pexpect.EOF)
        childP.close()
        fp.close()

        fp = open(tmpFl,'r')
        stdout = fp.read()
        fp.close()

        if childP.exitstatus != 0:
            raise Exception(stdout)
    except KeyboardInterrupt:
        childP.close()
        fp.close()
        return

    print(stdout) 
```

可以这样使用：

```
params = {
    'src': '/home/src/*.txt',
    'user2': 'userName',
    'host2': '192.168.1.300',
    'tgt': '/home/userName/',
    'pwd': myPwd(),
    'opts': '',
}

scp(**params) 
```

# flash - Google 之类的动画徽标 - Flash 还是 PNG？

> ID：15166979
> 
> 赞同：0
> 
> 时间：2013-03-01T21:13:14.470
> 
> 标签：flash, jquery-animate, png

我有兴趣为我的网站制作徽标。我想让它可以点击然后它移动，但不是在闪存中。

我很确定谷歌在 HTML 中使用了“动画 png”（带有精灵的东西），但我不确定。

另一个问题，它们很难制作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:18:39.603

您可以通过制作精灵表来制作自己的动画 png，设置一个 div，该 div 是具有精灵表作为背景图像的一帧的尺寸，然后使用 javascript 使用计时器更改背景位置。

这应该很容易让自己。这篇文章详细介绍了另一种执行此操作的方法（尽管它似乎效率低下）：[使用 Javascript 的动画图像](https://stackoverflow.com/questions/9486961/animated-image-with-javascript)

# jquery - 数据表上的 fnOpen 不等待 $.ajax 请求

> ID：15166980
> 
> 赞同：0
> 
> 时间：2013-03-01T21:13:18.180
> 
> 标签：jquery, datatables

我有一个代码，我正在尝试使用 jQuery

```
$('#example tbody td img').live('click', function () {
    var nTr = $(this).parents('tr')[0];
    if (oTable.fnIsOpen(nTr)) { /* This row is already open - close it */
        this.src = "../compartilhados/img/details_open.png";
        oTable.fnClose(nTr);
    } else { /* Open this row */
        this.src = "../compartilhados/img/details_close.png";
        oTable.fnOpen(nTr, fnFormatDetails(oTable, nTr), 'details ui-corner-all' );
    }
}); 
```

函数 fnFormatDetails 用于返回一个字符串，但我修改它以返回 $.ajax 的响应：

```
 function fnFormatDetails(oTable, nTr) {
        var aData = oTable.fnGetData(nTr);
        var parametros = {
            NumPA: aData[8]
        };
        var parametros = jQuery.param(parametros);
        $.ajax({
            type: "POST",
            url: "consultarProvidencias.asp",
            data: parametros
        }).done(function x(sOut) {
        return sOut;
        });
    } 
```

而 sOut 是一个和平的 html 代码，就像一个字符串。我不知道发生了什么，因为 sOut 没有加载到 oTable.fnOpen （第一个代码）上。它必须加载到行的详细信息上，就像[这里](http://www.datatables.net/release-datatables/examples/api/row_details.html)显示的那样。

我感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:36:54.453

您必须更改函数 fnFormatDetails 以返回 ajax 调用的响应，如下所示：

```
function fnFormatDetails(oTable, nTr) {
        var aData = oTable.fnGetData(nTr);
        var parametros = {
            NumPA: aData[8]
        };
        var parametros = jQuery.param(parametros);
        return $.ajax({
            type: "POST",
            url: "consultarProvidencias.asp",
            data: parametros
        });
    } 
```

之后，您更改调用该函数的方式：

```
var data = fnFormatDetails(oTable, nTr);
$.when(data).then(function(theData) {
  oTable.fnOpen(nTr, theData, 'details ui-corner-all' );
}); 
```

# php - 将 MySQL 日期转换为 Java 日期

> ID：15166986
> 
> 赞同：0
> 
> 时间：2013-03-01T21:13:39.350
> 
> 标签：php, string

说它我从 MySQL 表中得到一个日期，比如`2012-03-31`.
我将此日期传递给 Java 应用程序。所以 Java 需要那个日期作为`2012, 02, 31`.

首先我分解日期，获取第二个元素，从月份值中减去一个。然后我内爆三个元素并创建新的日期字符串。

```
public function convertToJavaDate($mysqlDate) {
    $pieces = explode("-",$mysqlDate);
    return $pieces[0].", ".($pieces[1]-1).", ".$pieces[2];
} 
```

有没有更快或更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:24:55.540

对于 java，请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse(java.lang.String) , java.text.ParsePosition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:16:57.567

```
$date = strtotime('2012-03-31');
$javadata = date('Y, m, d', strtotime('-30 days', $date)); 
```

# adobe-analytics - 如何在 SiteCatalyst 中跟踪预先输入的内部搜索

> ID：15166991
> 
> 赞同：4
> 
> 时间：2013-03-01T21:13:58.733
> 
> 标签：adobe-analytics

我正在计划如何在 Omniture/SiteCatalyst 中跟踪内部搜索数据。

对于标准的“输入术语并获取结果页面”模型，这是一个相当直接的计划：使用术语、结果计数和搜索页面设置 sProps 和 eVars，然后触发成功事件以进行搜索和另一个用于单击搜索结果。

对于预先输入的搜索——用户在搜索栏中输入时会得到搜索结果——处理事件提交时间的好策略是什么，这样你就不会得到不同的事件/字母条目搜索词条目的 4、5、6 和 7？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T13:41:42.157

我们的解决方案是利用自动完成的延迟来减少调用次数。从跟踪的角度来看，如果有人暂停 1 秒（或 500 毫秒，无论如何），那么他们实际上可能正在等待自动完成结果，这构成了有效搜索。

从技术角度来看，我们利用了 jQuery UI 小部件上的[`delay`选项。](http://api.jqueryui.com/autocomplete/#option-delay)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:29:06.743

我一直使用的策略是不跟踪“自动完成”搜索功能..将跟踪放在搜索结果页面上与平常一样。或者您是说整个搜索结果页面都在用户输入时输出？如果是这种情况...您可以做的一件事是编写一些代码以在搜索字段失去焦点时弹出 Omniture 代码。

您可以做的另一件事是，当访问者在搜索栏中输入内容时，在每次按键时，将当前值写入 cookie。然后在页面加载时运行一些代码来查找该 cookie，如果存在，弹出 Omniture 搜索变量并删除 cookie。或者，您可以使用服务器端会话变量跟踪当前值，因为我假设这个东西是 ajax 驱动的，如果会话变量存在，则输出带有服务器端代码的 omn 代码。这些方法意味着搜索事件和变量不会在搜索结果页面上弹出……这可能没什么大不了的，除非您弹出支持变量，例如“内部搜索引用者”prop/eVar跟踪访问者上一个页面（或访问者执行搜索时所在的页面）。那么你'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T12:31:25.940

每当您进行搜索时，您可能会意识到在 URL 末尾添加查询字符串参数的概念。

假设 www.stackoverfow.com 是网站，当你在它上面执行搜索时，它会像www.stackoverflow.com?q=yourname ，你的名字是搜索关键字。这个关键字我们可以在 sitecatalyst 中捕获**。**

您可以在互联网上搜索 sitecatalyst 时看到 google.com 是 --- **www.google.co.in/search?q=sitecatalyst**

以同样的方式，我们可以使用查询字符串参数作为 q = something。

* * *

完成所有这些操作后，我们可以使用 s_code 库文件的插件部分中的插件 getQueryParam 来获取该变量并将其存储在 sitecatalyst 变量中......

例子：-

```
function s_doPlugins(s) {
var one = s.getQueryParam("q");
if(one)
s.eVar1=one;
}
s.doPlugins=s_doPlugins
```

在插件部分之外插入以下代码

```
/*
* Returns the value of a specified query string parameter, if found in the current page URL.
*/
s.getQueryParam=new Function("p","d","u",""
+"var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.locati"
+"on);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p"
+".length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-"
+"1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i="
+"=p.length?i:i+1)}return v");
s.p_gpv=new Function("k","u",""
+"var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v"
+"=s.pt(q,'&','p_gvf',k)}return v");
s.p_gvf=new Function("t","k",""
+"if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'T"
+"rue':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s."
+"epa(v)}return ''");
```

你会发现它会捕获你的搜索结果

如果有更多说明，请告诉我

# javascript - 将值添加到多维数组的末尾

> ID：15166993
> 
> 赞同：0
> 
> 时间：2013-03-01T21:14:01.343
> 
> 标签：javascript, arrays, multidimensional-array

我有一个数组数组，我希望能够在每次用户点击添加按钮时向数组添加值。

```
var transactions = [];
transactions[0] = []; // holds date
transactions[1] = []; // holds transaction type
transactions[2] = []; // holds amount

transactions[0][i] = $("date").value;
transactions[1][i] = $("transType").value;
transactions[2][i] = parseFloat( $("amount").value); 
```

这些是片段。. . 我意识到我需要进行验证（我会这样做），此时我更关心加载数组。问题是我熟悉的方法适用于一维数组，我不知道如何替换它。

简而言之，是否可以重现这一点：

```
transactions[transactions.length] = $("date").value; 
```

对于多维数组。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:16:07.240

使用`push`：

```
transactions[0].push( $("date").value ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:16:35.897

您正在寻找[Array.push()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)方法。它允许您将值推送到数组的末尾。

对于您的用例，您可以在阵列的两个级别上执行此操作。见下文：

```
var transactions = [];
transactions.push([]);
transactions.push([]);

transactions[0].push( $('date').value ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T21:17:02.647

使用相同的方法没有问题：

```
transactions[0][transactions[0].length] = $("date").value; 
```

或使用`push`方法：

```
transactions[0].push($("date").value); 
```

...请记住，您已`transactions[0]`使用空数组进行了初始化`[]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T22:58:25.073

你在做什么似乎有点奇怪：

```
[[array of transaction dates],[array of transaction types],[array of transaction amounts]] 
```

你确定你不想

```
[array of transactions, with date,type,amount properties] 
```

?

```
var transactions = [];
transactions.push({'date': $("date").value, 'type': $("transType").value, 'amount': parseFloat( $("amount").value)});

var i = 0;

alert('date ' + transactions[i].date + ' type ' + transactions[i].type + ' amount ' + transactions[i].amount); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T21:17:30.810

是的，只适用于多维

```
transactions[0][transactions[0].length] = var1; 
```

# javascript - Javascript定时幻灯片至少不起作用

> ID：15166995
> 
> 赞同：0
> 
> 时间：2013-03-01T21:14:24.397
> 
> 标签：javascript, slideshow

这很令人难过。一些背景知识，我是 Javascript 的新手，这是我在生活中的第一个应用程序，因为在两天内完成了一半的 Javascript 教科书。这是一个链接到我的 HTML 末尾的外部文件。如果需要更多，请询问，我会尽力提供。

```
var slide = document.getElementById("slide");

setInterval(slideshow.changeSrc, 5000);

var slideshow = {
    changeSrc : function() {    
        if(slide.src === "./images/s1.png"){
            slide.src = "./images/s2.png";
        }
        else if(slide.src === "./images/s2.png"){
            slide.src = "./images/s3.png";
        }
        else{
            slide.src = "./images/s1.png";
        }
    }
}
slide.addEventListener("load", slideshow.changeSrc, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:23:57.550

我认为这就是您要实现的目标：

```
var slide = document.getElementById("slide");
var slideshow = {
    changeSrc : function() {    
        setTimeout(function() {
            slide.src = 'http://lorempixel.com/100/100';
        }, 1000);
    }
}
slide.addEventListener("load", slideshow.changeSrc, false); 
```

[http://jsfiddle.net/Bs4gM/](http://jsfiddle.net/Bs4gM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:28:51.883

该`src`属性是浏览器解析您提供给它的 URL 的结果。不要将其用于比较。此外，只有窗口和某些元素（如图像或脚本）具有`load`事件。尝试这个：

相反，为什么不只跟踪索引呢？

```
(function() {
  var id = 0, slide = document.getElementById('slide');
  setInterval(function() {
    id++;
    slide.src = "images/s"+id+".png";
    id %= 3;
  },5000);
})(); 
```