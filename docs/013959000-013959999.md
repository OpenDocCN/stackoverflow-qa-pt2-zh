# StackOverflow 问答 13959000-13959999

# c# - 在 C# 上将存储过程结果分配为布尔变量

> ID：13959001
> 
> 赞同：-2
> 
> 时间：2012-12-19T18:45:34.980
> 
> 标签：c#, stored-procedures

你好 是否可以将存储过程的结果作为真/假值存储在布尔变量中？就像是：

1)

```
bool var = ExecuteScalar("sp_name", parameters); 
```

或者

2)

```
bool var = ClassName.getValue(parameters); 
```

其中 getValue() 是具有以下代码的方法：

```
return dataBase.ExecuteDataSet("sp_name", parameters); 
```

我想知道客户有没有卡。我正在考虑使用我现在拥有的基本上是上面的第二个选项，然后创建一个条件是否行数大于零。但我也想知道是否还有其他方法可以使用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:50:10.667

你没有说你正在使用哪个 DBMS。例如，SQL Server 没有`bool`数据类型，但您可以让您的 sproc 返回一个`int`，您可以测试它的非零值，例如

```
bool result = ((int) ExecuteScalar("sp_name", parameters)) != 0; 
```

注意：我没有对此进行测试，但您可以尝试让存储过程返回 a `bit`。就 SQL Server 而言，这仍然是一个整数值，但 ADO.NET 应该检测到它并自动`bool`为您转换它。它当然适用于 sproc 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:51:26.657

你可以简单地做：

```
DataSet ds = dataBase.ExecuteDataSet("sp_name", parameters);
return ds.Tables[0].Rows.Count>0; //true if record found; false if no rows 
```

假设您的 proc 只是使用 where 子句中的参数进行选择。就像是：

```
select col1 from table a where condition=@parameter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:48:27.567

[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)返回一个对象。所以不，上面的#1 会抛出一个错误。假设您的存储过程返回一个可以转换为真/假的值，您必须执行以下操作：

```
bool var;
bool.TryParse(ExecuteScalar("sp_name", paramaters).ToString(), out var); 
```

# .net - 使用 Regex.Replace 时如何处理多个匹配项

> ID：13959004
> 
> 赞同：4
> 
> 时间：2012-12-19T18:45:40.177
> 
> 标签：.net, regex, vb.net

我有一个导致多个匹配的正则表达式。一个示例数据集是一个 CSV 文件，每一行都是一个单独的匹配项：

```
product,color,type,shape,size
apple,green,fruit,round,large
banana,yellow,fruit,long,large
cherry,red,fruit,round,small 
```

所以第 1 场比赛是苹果、绿色、水果、圆形、大号，第 2 场比赛是香蕉、黄色、水果、长、大号等。

所以我的问题是，在使用 RegEx.Replace 时，如何指定“开始”匹配（例如，在这种情况下，我想从第二个匹配开始），以及之后如何指定匹配的数量？这只是一个示例，在其他情况下，我想从匹配 #4 等开始。

看起来[RegEx.Replace](http://msdn.microsoft.com/en-us/library/3fky5t5f.aspx)支持这样的东西，但我正在寻找一个适用于我的场景的更好的例子。

我努力了：

```
Dim r As New RegEx(pattern)
result = r.Replace(input, replace, 1, 2) 
```

replace 是一个包含捕获值的字符串（在我的情况下为 $1），但我没有看到任何不同，仍然在 1 个字符串中获得所有匹配项。

有什么建议么？我希望可能像获取匹配数一样简单，只需使用 For 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:14.497

我不会使用正则表达式来识别文本中的行。读取 CSV 文件

```
Dim lines As String()

lines = File.ReadAllLines("path of the CSV file") 
```

然后像这样循环

```
For i As Integer = starting_match To last_match
    lines(i) = lines(i).Replace("old","new")
Next 
```

并将这些线条与

```
Dim result As String
result = String.Join(System.Environment.NewLine, lines) 
```

* * *

**更新**

混淆来自于`Replace`方法中的起始位置表示起始字符位置而不是起始匹配索引的事实。因此我建议使用这种扩展方法

```
<System.Runtime.CompilerServices.Extension> _
Public Shared Function ReplaceMatches(regex As Regex,
                                      input As String, replacement As String, 
                                      countMatches As Integer, startAtMatch As Integer
                                     ) As String
    Dim matches As MatchCollection = regex.Matches(input)
    If startAtMatch >= matches.Count Then
        Return input
    End If
    Dim skippedMatch As Match = matches(startAtMatch - 1)
    Dim startAtCharacterPosition As Integer = skippedMatch.Index + skippedMatch.Length
    Return regex.Replace(input, replacement, countMatches, startAtCharacterPosition)
End Function 
```

现在您可以替换为：

```
Dim input As String = "aaa bbb ccc ddd eee fff"
Dim startAtMatch As Integer = 2 ' ccc
Dim countMatches As Integer = 3

Dim regex = New Regex("\w+")
Dim result As String = regex.ReplaceMatches(input, "XX", countMatches, startAtMatch)
Console.WriteLine(result) ' --> "aaa bbb XX XX XX fff" 
```

[（使用devloperFusion](http://www.developerfusion.com/tools/convert/csharp-to-vb/)从 C# 转换为 VB 的示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:50:41.623

看看`Regex.Replace(string, string, MatchEvaluator)`：

[http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)

这应该允许你传递一个 MatchEvaluator 来检查特定匹配的索引，所以在这种情况下你可以寻找`index == 1`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-19T19:12:24.037

以下代码可能会对您有所帮助

[http://msdn.microsoft.com/en-us/library/ms149475.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3](http://msdn.microsoft.com/en-us/library/ms149475.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)

```
Imports System.Collections

Imports System.Text.RegularExpressions

Module Example

    Public Sub Main()
        Dim words As String = "letter alphabetical missing lack release " + _
                              "penchant slack acryllic laundry cease"
        Dim pattern As String = "\w+  # Matches all the characters in a word."
        Dim evaluator As MatchEvaluator = AddressOf WordScrambler
        Console.WriteLine("Original words:")
        Console.WriteLine(words)
        Console.WriteLine("Scrambled words:")
        Console.WriteLine(Regex.Replace(words, pattern, evaluator,
                                        RegexOptions.IgnorePatternWhitespace))
    End Sub

    Public Function WordScrambler(ByVal match As Match) As String
        Dim arraySize As Integer = match.Value.Length - 1
        ' Define two arrays equal to the number of letters in the match. 
        Dim keys(arraySize) As Double
        Dim letters(arraySize) As Char

        ' Instantiate random number generator' 
        Dim rnd As New Random()

        For ctr As Integer = 0 To match.Value.Length - 1
            ' Populate the array of keys with random numbers.
            keys(ctr) = rnd.NextDouble()
            ' Assign letter to array of letters.
            letters(ctr) = match.Value.Chars(ctr)
        Next
        Array.Sort(keys, letters, 0, arraySize, Comparer.Default)
        Return New String(letters)
    End Function

End Module

' The example displays output similar to the following: 
'    Original words: 
'    letter alphabetical missing lack release penchant slack acryllic laundry cease 
'     
'    Scrambled words: 
'    etlert liahepalbcat imsgsni alkc ereelsa epcnnaht lscak cayirllc alnyurd ecsae 
```

# ruby-on-rails - Rails + Ransack - 下拉列表集合？

> ID：13959005
> 
> 赞同：20
> 
> 时间：2012-12-19T18:45:43.163
> 
> 标签：ruby-on-rails, ransack

我喜欢 ransack gem 的灵活性，但是我无法让标准的 collection_select 正常运行。也许有人可以提供帮助。

例子：

```
 <%= collection_select(:expense, :project_id, Project.all, 
        :id, :name, { prompt: 'Select Project'}, { class: 'span4' }) %> 
```

在这种情况下，此代码来自费用输入屏幕，因此第一个参数是费用对象。它应该是什么形式的洗劫？另外，我知道我需要在其中获取后缀。在此示例中，我希望 project_id_eq 成为搜索模式。

此外，我的表单位于名为“报告”的控制器和视图上，我没有将此搜索放在默认控制器中。

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-19T19:45:23.293

似乎这会奏效。

```
<%= f.select :project_id_eq, options_from_collection_for_select(Project.all, "id", "name", @search.project_id_eq) %> 
```

如果有人有其他建议，也很想知道。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-05T20:15:23.913

要使用 include_blank 执行此操作，请将其放在括号之外：

前任：

`<%= f.select :languages_id_eq, options_from_collection_for_select(Language.all, "id", "name"), include_blank: true %>`

== 更新 ==

更好的是，使用`f.collection_select`. 这样，在用户使用下拉菜单搜索某些内容后，该选项会在下一页上被预先选择：

```
<%= form.collection_select :vendor_id_eq, Vendor.all, :id, :name, include_blank: true %> 
```

# mysql - 单实体核心数据获取请求的 SQL 语句

> ID：13959006
> 
> 赞同：1
> 
> 时间：2012-12-19T18:45:47.850
> 
> 标签：mysql, ios, core-data, nsfetchrequest

我有一个模仿具有以下结构的数据库表`Entity`：`CoreData``MySQL`

```
Photo
    abv            Double
    photoId        Integer16
    photographer   String
    isActive       Boolean
    lastUpdated    Data
    name           String 
```

我可以运行以下`SQL`语句来获得我想要的结果集：

```
SELECT  `photographerName`, COUNT(`photographerName`) 
FROM  `Photos` 
WHERE  `isActive` LIKE 1
GROUP BY  `photographerName` 
ORDER BY  `photographerName` 
```

**我可以使用什么组合`NSFetchRequest`来获得相同的`NSSortDescriptor`结果？`NSPredicate``NSExpressionDescription``iOS`**

我正在使用以下内容：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
NSSortDescriptor *photographerSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"photographer" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
NSPredicate *onlyActivePhotos = [NSPredicate predicateWithFormat:@"isActive == 1"];

request.sortDescriptors = @[photographerSortDescriptor];
request.predicate = onlyActivePhotos;

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil]; 
```

这让我得到`isActive`罚款，但为每个返回一行`Photo`，而不是`Photographer`.

**或者......我应该把它分成两部分`Entities`吗？例如，与?`Photographer`具有一对多关系。`Photos`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:11:08.843

首先，有关系当然是更好更灵活的设计`Photo`—— `Photographer`.

但是，您想要的也可以实现。您只能获取照片实体，因此您必须过滤结果数组以仅返回您的摄影师姓名。

```
NSArray *photographerNames = [fetchedResultsController.fetchedObjects
   valueForKeyPath:"@photographer"];
NSSet *uniqueNames = [NSSet setWithArray:photographerNames];
NSArray *orderedNames = [uniqueNames sortedArrayUsingDescriptors:
   @[[NSSortDescriptor sortDescriptorWithKey:@"self" ascending:YES]]]; 
```

如您所见，这非常麻烦。此外，您丢失了与每个摄影师关联的照片的信息。

所以请顺着关系走。毕竟，Core Data 是一个对象图，而不是数据库包装器。

# java - java.lang.OutOfMemoryError：Java 堆空间（Project Euler 14）

> ID：13959007
> 
> 赞同：0
> 
> 时间：2012-12-19T18:45:53.173
> 
> 标签：java, out-of-memory

我正在研究 Project Euler 问题 14，但我不明白问题是什么。在程序运行大约 8 秒后，我不断收到运行时错误——可能是 ArrayList 变得太大，但我该如何避免这种情况呢？

```
import java.util.ArrayList;

public class Problem14 
{
    public static void main(String[] args) 
    {

        ArrayList<ArrayList<Long>>listOfLists=new ArrayList<ArrayList<Long>>();

        for (long c=2; c<1000000; c++)
        {
            ArrayList<Long>tempList=new ArrayList<Long>();
            long h=c;
            while (h!=1)
            {
                tempList.add(h);
                if (h%2==0)
                    h/=2;
                else
                    h=((3*h)+1);
            }
            tempList.add(1l);
            listOfLists.add(tempList);
        }

        long maxLength=0;
        long maxPos=0;

        for (int currList=0; currList<listOfLists.size(); currList++)
        {
            long currLength=(listOfLists.get(currList).size());
            if(currLength>maxLength)
            {
                maxLength=currLength;
                maxPos=currList+1;
            }
        }
        System.out.println("The longest sequence is "+maxLength+" numbers
                long. Its position is "+maxPos);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:49:52.033

您已用尽可用堆内存运行 JVM。问题线是

```
ArrayList<Long>tempList=new ArrayList<Long>(); 
```

这是一个运行一百万次并被保留的循环内部，因此您已经创建了一百万个数组列表。您需要更好的数据结构或使用 -Xmx 的更多内存。

本着 Euler 项目的精神，您应该寻找一种避免列表列表的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:02:57.563

您不需要列表列表。你甚至不需要清单。

如果您查看内部列表，则添加所有值，然后您使用的只是 size()。这意味着您真正需要的就是循环迭代的次数，即一个计数器。你可以存储这是一个列表但是..

一旦确定了所有长度，您对列表所做的一切就是找到最大的。您可以随时记录最大的长度，而不是将长度存储在列表中。

这意味着您不需要使用 List Of Long 对象列表，而是需要迄今为止最大的迭代次数以及起始值。

完成这些更改后，您可以进一步优化代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:59:06.990

由于问题定义，很少有想法：

首先，您不需要为您的号码保存所有链，这意味着根本不需要列表列表。您只需要保存它产生的数字和链长度。由于最大。它只是两个整数而不是大量列表。

顺便说一句，您可以添加缓存以节省已计算序列的长度。例如 Map 将包含它产生的链的数量和长度，这样你重写你的算法，在计算一个数字的链长度之前，它会检查缓存是否存在。它节省了很多时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:48:19.737

使用 -Xmx 参数增加 JVM 内存

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-19T19:34:46.927

我假设您没有在命令行上编码。如果您只是使用 -Xmx 参数（然后是数字）将起作用......如果不是，您可以在 Eclipse 中添加类似的参数。右键单击您运行项目的类，进入“运行方式”，然后“运行配置”

在那里你应该看到和“参数”标签......在那里添加你的 -Xmx 标签和一个数字

-Xmx 2048

可能有用...祝你一切顺利

# android - listfragment内的多个listview

> ID：13959009
> 
> 赞同：2
> 
> 时间：2012-12-19T18:45:57.743
> 
> 标签：android, android-layout, android-listview, android-fragments, android-listfragment

我一直在尝试在列表片段中实现两个列表视图，我在我的 xml 中声明了两个列表视图，并尝试在 java 文件中设置两组单独的数据，但是用于第一个 lisview 的列表视图数据被覆盖第二。

我如何能够使用下面的代码将其指向正确的列表视图？

列表应该去的片段的Java：

```
package com.owais.shopsellswap;

import java.util.ArrayList;
import java.util.HashMap;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;

public class Fragment_My_Profile extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View myProfileView = inflater.inflate(R.layout.fragment_my_profile, container, false);

        return myProfileView;
    }

    // Store Arralist as hashmaps for the listview
        ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
        ArrayList<HashMap<String,String>> list2 = new ArrayList<HashMap<String,String>>();
        // SimpleAdapter (listViewAdapter) links the array to the listview 
        private SimpleAdapter listViewAdapter;
        private SimpleAdapter listViewAdapter2;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //HashMap links each line of data to the correct TextView
            HashMap<String,String> item;
            for(int i=0;i<userInfo.length;i++){
              item = new HashMap<String,String>();
              item.put( "line1", userInfo[i][0]);
              item.put( "line2", userInfo[i][1]);
              list.add( item );
            }

            HashMap<String,String> item2;
            for(int i=0;i<ListingsArray.length;i++){
              item2 = new HashMap<String,String>();
              item2.put( "line1", ListingsArray[i][0]);
              item2.put( "line2", ListingsArray[i][1]);
              item2.put( "line3", ListingsArray[i][2]);
              list2.add( item2 );
            }

            listViewAdapter = new SimpleAdapter(getActivity(), list,                    
                    R.layout.listview_layout_1,
                    new String[] { "line1","line2" },
                    new int[] {R.id.line_a, R.id.line_b});

            listViewAdapter2 = new SimpleAdapter(getActivity(), list2,
                    R.layout.listview_layout_3,
                    new String[] { "line1","line2", "line3" },
                    new int[] {R.id.line_a1, R.id.line_b1, R.id.line_c1});

            setListAdapter(listViewAdapter);
            setListAdapter(listViewAdapter2);

        }

        private String[][] userInfo =
            {{"User","Dummy"},
            {"Email Address","Dummy@dummymail.com"},
            {"User Type","Staff"},
            {"Contact Number","07111111111"}};

        private String[][] ListingsArray =
            {{"audi a3","brand new audi a3 with alloywheels, cd player", "£11000"},
            {"HTC One x","brand new android smartphone", "£450"},
            {"Acer Laptop","Acer Laptop with windows 7", "£300"},
            {"Sunglass","Oakley Sunglasses in great condition", "£100"}};
    } 
```

片段的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/lightgrey"
        android:text="@string/userInfoHeader"
        android:textSize="15sp"
        android:textStyle="bold" />

    <ListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="184dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2" >
    </ListView>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/android:list"
        android:background="@color/lightgrey"
        android:text="@string/listingsHeader"
        android:textSize="15sp"
        android:textStyle="bold" />

    <ListView
        android:id="@+id/android:list2"
        android:layout_width="fill_parent"
        android:layout_height="184dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >
    </ListView>

</RelativeLayout> 
```

列表视图还为每个列表使用自定义布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:53:24.807

您需要为每个`ListView`....相应地设置两个适配器。

```
ListView list = (ListView)findViewById(R.id.list);
ListView list2 = (ListView)findViewById(R.id.list2);

list.setAdapter(...)
list2.setAdapter(...) 
```

...但是你没有两个`ListViews`在玩。在`ListFragment`每次调用时使用 a ，您正在为给定的内容`setAdapter`设置一个*。* `ListView`您需要将您的调整`ListFragement`为 a`Fragment`并在 Fragment 中有两个单独`ListViews`的，然后按照上面提到的那样使用自己的适配器设置每个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:56:22.450

`setListAdapter`假定默认目标。要设置第二个适配器，您需要找到第二个列表视图 ID，然后将第二个适配器设置为它。

```
listview = findViewById(R.id.list2);
listview.setAdapter(adapter2); 
```

请注意，listfragment 通常只需要一个列表，因此上述可能不起作用，您可能只需要使用常规片段并为两个列表执行上述操作。

# c++ - 将 printf 与 boost::units::quantity 值一起使用

> ID：13959011
> 
> 赞同：0
> 
> 时间：2012-12-19T18:46:02.260
> 
> 标签：c++, boost, formatting, boost-units

[boost::units 库](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_units.html)提供了一种将数量值写入流的好方法，请[参见示例](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_units/Examples.html#boost_units.Examples.HeterogeneousUnitExample)。

我可以将 printf 与数量值一起使用而不是使用输出流吗？我有相当多的代码使用 printf 很好地格式化了输出，我想保留格式。将数量传递给say

```
quantity<mass_density> rho = 1.0 * mass_density;
printf("rho %6.2e\n", rho); 
```

抛出警告

> 警告：格式“%e”需要“double”类型的参数，但参数 2 的类型为“boost::units::quantity<boost::units::unit<boost::units::list<boost::units: :dim<boost::units::length_base_dimension, boost::units::static_rational<-0x00000000000000003l> >, boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost: :units::static_rational<1l> >, boost::units::dimensionless_type> >, boost::units::homogeneous_system<boost::units::list<boost::units::si::meter_base_unit, boost:: units::list<boost::units::scaled_base_unit<boost::units::cgs::gram_base_unit, boost::units::scale<10l, boost::units::static_rational<3l> >>, boost:: units::list<boost::units::si::second_base_unit, boost::units::list<boost::units::si::ampere_base_unit, boost::units::列表<boost::units::si::kelvin_base_unit, boost::units::list<boost::units::si::mole_base_unit, boost::units::list<boost::units::si::candela_base_unit , boost::units::list<boost::units::angle::radian_base_unit, boost::units::list<boost::units::angle::steradian_base_unit, boost::units::dimensionless_type> > > > > > > > > > > >' [-Wformat]

我可以改用 rho.value() ，但如果可能的话，我想输出单位（即使我已经更新了格式字符串）。

我认为答案在这里，[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_units/Reference.html#header.boost.units.io_hpp](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_units/Reference.html#header.boost.units.io_hpp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:01:11.773

格式说明符列表由语言固定。`"%e"`输出 a `double`，`"%d"`输出 an`int`等。没有任何东西会输出 type 的对象`quantity<mass_density>`或任何其他类类型的对象。

你可以有这个：

```
template <typename Unit, typename T>
string symbolic_units(const quantity<Unit, T> &)
{
    return symbol_string(Unit());
}

int main()
{
    quantity<mass_density> x;
    x = 3.72 * kilogram_per_cubic_meter;

    printf ("%g %s\n", x.value(), symbolic_units(x).c_str());
} 
```

但不多。除非您当然愿意使用流。

# php - 千城万户与用户关系，何为正道？

> ID：13959018
> 
> 赞同：1
> 
> 时间：2012-12-19T18:46:25.903
> 
> 标签：php, mysql, database

在一个应用程序中，允许用户选择他们想要的位置/城市。城市列表将采用带有复选框的树结构，例如：

```
[x]Country
-[x]State 1
--[x]City 1
--[x]City 2
--[x]City 100
-[X]State 2
--[x]City 1
--[x]City 2
--[x]City 100
[x]Country 2 
```

……

现在，如果用户选择国家，那么他将拥有所有州和城市。如果选择一个或多个州并且那些州、城市和国家也将被存储为该用户。用户可以选择一个或多个国家。用户也可以取消选中任何一个所需的城市或州。

您建议如何存储和检索数据。我正在使用 MySql 和 PHP。查找表会是理想的吗？或者我可以将所有位置 id kand 以 json 格式存储在文本类型列中吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:54:03.737

> 您建议如何存储和检索数据。我正在使用 MySql 和 PHP。查找表会是理想的吗？

要存储国家、州和城市，您应该使用规范化的数据库模式。国家有州。州有城市。您需要连接表。

> 或者我可以将所有位置 id kand 以 json 格式存储在文本类型列中吗？

不，那不是正常的形式。而且会产生很多问题。您不能轻松地执行 CRUD 操作。

## 数据库架构

```
create table countires(name varchar(100) primary key);
create table sates(name varchar(100) primary key, country varchar(100), foreign key `country` references `countries`(`name`)); 
create table cities(name varchar(100) primary key, state varchar(100), foreign key `state` references `states`(`name`)); 
```

现在您可以对这些表运行任何不同类型的查询。假设用户选择了城市 ( `city1`, `city2`)、国家`cntry1`和州`stt2`。

## 查询

### 查找用户选择的所有城市。

```
SELECT ct.name 
FROM   cities AS ct 
       JOIN states AS st 
         ON ( st.name = city.state ) 
       JOIN countries AS cn 
         ON ( cn.name = st.country ) 
WHERE  ct.name IN ( 'city1', 'city2' ) 
        OR cn.name = 'cntry1' 
        OR st.name = 'stt2'; 
```

### 查找用户选择的所有状态。

```
SELECT st.name 
FROM   states AS st 
       JOIN countries AS cn 
         ON ( cn.name = st.country ) 
WHERE   OR cn.name = 'cntry1' 
        OR st.name = 'stt2'; 
```

### 更新 1

> 如何维护与用户的关系？

您需要[连接表](http://en.wikipedia.org/wiki/Junction_table)。只需创建其中的 3 个。

```
create table users(name varchar(100) primary key);
CREATE TABLE user_countries 
  ( 
     user    VARCHAR(100), 
     country VARCHAR(100), 
     PRIMARY KEY (`user`, `country`), 
     FOREIGN KEY (`user`) REFERENCES `users`(`name`)
     FOREIGN KEY (`counry`) REFERENCES `countries`(`name`)    
  ); 
CREATE TABLE user_states 
  ( 
     user    VARCHAR(100), 
     state   VARCHAR(100), 
     PRIMARY KEY (`user`, `state`), 
     FOREIGN KEY (`user`) REFERENCES `users`(`name`) 
     FOREIGN KEY (`state`) REFERENCES `states`(`name`)    
  ); 
CREATE TABLE user_cities 
  ( 
     user    VARCHAR(100), 
     city    VARCHAR(100), 
     PRIMARY KEY (`user`, `city`), 
     FOREIGN KEY (`user`) REFERENCES `users`(`name`) 
     FOREIGN KEY (`city`) REFERENCES `cities`(`name`)    
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:53:51.840

我想说这取决于您需要如何访问存储的数据。如果您只想根据提交数据的用户来查找数据，那么您可能没有理由不能将序列化的树数据（即 JSON、PHP 序列化等）存储在与关联的数据库记录中用户。顺便说一句，这也是 NoSQL 数据存储的一个很好的用例。

但是，如果您需要能够查找所有选择了特定国家、州或城市的用户，那么您将需要存储您的数据，以便以这种方式查询它。这可能意味着国家、州和城市使用单独的表格来将用户与每个表格关联起来，或者它可能只是意味着一个单一的管辖范围表，该表格允许其中包含不同类型的管辖区以及将用户与管辖区相关联的表格。您如何处理该模式可能取决于您需要如何区别对待国家、州和城市（即，每种司法管辖区类型是否需要具有截然不同的属性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:16:19.920

我建议只存储选定的值并导出其余值。是的，检索数据会更加痛苦，但它有几个显着的好处：

**当您的源数据发生变化时，它将继续保持准确：**想象一下，当苏联解体时，您正在运行此应用程序。您将“苏联”条目转换为“俄罗斯”并将一堆“国家”转换为国家。使用您的模型，这将导致大量用户数据发生变化。但是，使用派生模型，这变得更加简单。当城市被分配到正确的国家时，任何选择了城市的人都会自动修复。一群选择了州的人可能会突然发现他们选择了一个国家，但该级别以下的城市是自动固定的。

**它将简化您的创建、更新和删除操作：**每次更改都只影响一行，而不是编写成百上千行。

# keystore - 使用 keytool 创建密钥库和密钥，但找不到它在哪里

> ID：13959025
> 
> 赞同：1
> 
> 时间：2012-12-19T18:46:45.697
> 
> 标签：keystore, keytool

我使用 JDK 的 keytool 通过 Adob​​e 构建的 phonegap 生成了一个 RSA 密钥，用于 Android 应用程序。

在我的 Windows 7 cmd 行中，我添加了： keytool -genkey -v -keystore andy.keystore -alias andy -keyalg RSA -keysize 2048 -validity 10000 除了我，andy，作为我机器上的用户，我找不到.keystore 文件或任何地方的空间。所以我重复了这个过程，认为它没有正常工作，但这次它告诉我具有该别名的密钥库已经存在。我已经非常仔细地查看了我的（用户）文件夹，事实上我已经在我的整个机器上搜索了任何远程类似于 .keystore 文件的东西。你能告诉我它可能在我的系统上的什么位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T09:36:45.813

它从您运行命令的位置生成密钥库文件。还要确保当前路径对于 java keytool 是可写的。

# java - 安卓 | 货币转换器实时汇率

> ID：13959026
> 
> 赞同：0
> 
> 时间：2012-12-19T18:46:46.743
> 
> 标签：java, android, currency, currency-exchange-rates

我做了一个简单的货币转换器，但有没有一种简单的方法来检索实时货币（只是货币，比如从以色列谢克尔到美元）？例如：

```
case R.id.euro:
        mDollar.setChecked(false);
        Meuro.setChecked(true);
        exchangeRate = **//live currency from external source**
        exchangeSymbol = "€";

        break; 
```

这是我的整个代码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mResult = (TextView) findViewById(R.id.result);
    mToConvert = (EditText) findViewById(R.id.toConvert);
    mRadioGroup = (RadioGroup) findViewById(R.id.radioG);
    mDollar = (RadioButton) findViewById(R.id.dollar);
    Meuro = (RadioButton) findViewById(R.id.euro);

    mToConvert.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            convertCurrentAmount();

        }
    });
    mRadioGroup
            .setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(RadioGroup group, int checkedId) {
                    convertCurrentAmount();
                }
            });
}

public void convertCurrentAmount() {
    double exchangeRate = -1;
    String exchangeSymbol = null;
    switch (mRadioGroup.getCheckedRadioButtonId()) {
    case R.id.dollar:
        mDollar.setChecked(true);
        Meuro.setChecked(false);
        exchangeRate = 3.76;
        exchangeSymbol = "$";

        break;

    case R.id.euro:
        mDollar.setChecked(false);
        Meuro.setChecked(true);
        exchangeRate = 5;
        exchangeSymbol = "€";

        break;
    }
    if (exchangeRate > 0 && exchangeSymbol != null) {

        Double stringtoint = Double
                .valueOf(mToConvert.getText().toString());
        double result = stringtoint * exchangeRate;
        mResult.setText("" + exchangeSymbol + result);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:50:39.057

欧洲中央银行有一个 XML 格式的每日货币汇率网站。

[http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml](http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml)

更多信息在这里： http: [//www.ecb.int/stats/exchange/eurofxref/html/index.en.html#dev](http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html#dev)

您可能应该在启动时加载和解析 XML，并将其保存以供离线使用，这样您就不必每次都获取值（一天一次就足够了）。

# java - 文件 I/O Java 程序无法识别 src 文件夹中的 .txt 文件

> ID：13959028
> 
> 赞同：0
> 
> 时间：2012-12-19T18:47:08.087
> 
> 标签：java, file-io, filenotfoundexception

我有以下程序，文件“euler8.txt”存储在项目的 src 文件夹`C:\Users\john\workspace\Euler1\src\euler8.txt`中。`Exception in thread "main" java.io.FileNotFoundException: euler8.txt (The system cannot find the file specified)`当我尝试运行时，我遇到了异常。

```
private static void euler8() throws IOException
{   
    int current;
    int largest=0;
    int c =0;
    ArrayList<Integer> bar = new ArrayList<Integer>(0);
    File infile = new File("C:/Users/xxxxxxxx/workspace/Euler1/euler8.txt");
    BufferedReader reader = new BufferedReader(
            new InputStreamReader(
            new FileInputStream(infile),
            Charset.forName("UTF-8")));
    try
    {
        while((c = reader.read()) != -1) 
        {
            bar.add(c);
        }
    }
    finally{reader.close();}
    for(int i=0; i<bar.size(); i++)
    {
        current = bar.get(i) * bar.get(i+1) * bar.get(i+2) * bar.get(i+3) * bar.get(i+4);
        if(largest<current)
            largest = current;
    }
} 
```

我现在正在看的图片 [http://img163.imageshack.us/img163/7017/halpbk.png](http://img163.imageshack.us/img163/7017/halpbk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:51:32.060

此行在根文件夹中查找您的文本文件。

```
 File infile = new File("euler8.txt"); 
```

你需要像这样给出绝对路径

```
 File infile = new File("C:/Users/john/workspace/Euler1/src/euler8.txt"); 
```

或者按照 jLordo 的建议将您的文件移动到您的根文件夹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:52:11.893

三种解决方案。选一个：

1：将 euler.txt 从 src 上移一个目录
2：将行改为

```
File infile = new File("./src/euler8.txt"); 
```

3：使用绝对路径

```
String path  = "C:/Users/john/workspace/Euler1/src/";
String file = "euler8.txt";
File infile = new File(path + file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:50:30.487

您应该将文本文件移出`src`文件夹，将其直接放在项目文件夹下。

* * *

**或者，**对于您当前的位置，将路径更改为： -

```
File infile = new File("./src/euler8.txt"); 
```

您提供的路径是相对于根文件夹的，因此如果您提供`"euler8.txt"`. 您需要提供相对于项目文件夹的路径才能进入该`src`文件夹。

您也可以给`absolute path`，但这不是要走的路，因为每次将项目移动到不同的位置时，它都需要修改路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:56:25.420

正如所指出的，当前工作目录是启动程序的目录，而不是 src 目录。你总是可以找到当前的工作目录

```
String workingDir = new java.io.File( "." ).getCanonicalPath(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T18:53:18.487

尝试这个

```
 InputStream inputStream = getClass().getResourceAsStream("euler8.txt");
        String sa = "";
        int cc;
        while((cc = inputStream.read()) != -1) {
            sa += (char) cc;
        } 
```

假设 euler8.txt 在 src 文件夹中

# r - 绘制直线而不是曲线的功率

> ID：13959032
> 
> 赞同：3
> 
> 时间：2012-12-19T18:47:29.883
> 
> 标签：r

所以我使用以下脚本：

```
area <- c(1854,2001,2182,2520,4072,1627,1308,1092,854,1223,2231,1288,898,2328,1660,6018,5420,943,1625,1095,1484,929,1178,4072,2413)
weight1 <- c(24281,28474,33725,40707,76124,16263,12190,10153,8631,13690,34408,15375,8806,36245,20506,109489,104014,11308,23262,11778,20650,8771,12356,76124,28346)
weight <- weight1/1000

df <- data.frame(weight = log10(weight), area = log10(area))

fit_line <- predict(lm(area ~ weight, data=df))
fit_power <- predict(nls(area ~ i*weight^z, start=list(i=2,z=0.7), data=df))

plot(df$weight,df$area)
lines(df$weight,fit_line,col="red")
lines(sort(df$weight),sort(fit_power), col="blue") 
```

做一个对数 - 对数图。我可以绘制一条直线，`lm()`但是当我`nls()`用来进行功率拟合时，它绘制的是曲线而不是直线，见下文：

![在此处输入图像描述](../Images/63e0b5f17ef23e353ac1673fc6bc0169.png)

如何以直线的形式绘制功率拟合，或者如何从`lm()`. 所以我有以下形式的答案：y = a*x^b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:00:22.297

你的情节不是对数情节。做一个对数图：

```
plot(log(area)~log(weight), df) 
```

然后拟合一条线：

```
LM.Log <- lm(log(area)~log(weight), df)
abline(LM.Log, col="red") 
```

并更有效地通过直线绘制曲线：

```
Power <- coef(LM.Log)[2]
LM.Normal <- lm(area~I(weight^Power)+0, df)
plot(area~weight, df)
plot(function(x) coef(LM.Normal)*x^Power, 0, 2, add=T, col="blue") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:52:37.957

也许以下内容会有所启发......

```
df <- data.frame(weight, area, weightl = log10(weight), areal = log10(area))
df <- df[order(df$weight),]

fit_line <- predict(lm(areal ~ weightl, data=df))
fit_power <- predict(nls(area ~ i*weight^z, start=list(i=2,z=0.7), data=df))

plot(df$weightl, df$areal)
lines(df$weightl, fit_line, col="red")
lines(df$weightl, log10(fit_power), col="blue")

plot(df$weight, df$area)
lines(df$weight, 10^fit_line, col="red")
lines(df$weight, fit_power, col="blue") 
```

我猜想，我希望是正确的，你真的想要一个通过原始值的功率曲线，你把 log10 作为这样的代理。因此，您需要做的是获取原始重量/面积关系的预测值，然后记录这些值并将所有内容放在日志图上。或者获取对数值的线性并将它们都作为曲线放在原始图上。检查上面生成的两个图。

# jquery - 动态添加表单并处理结果

> ID：13959033
> 
> 赞同：1
> 
> 时间：2012-12-19T18:47:31.713
> 
> 标签：jquery, django, django-forms

[这是对我最后一个问题](https://stackoverflow.com/questions/13942096/change-query-parameter-via-select)的跟进：

我希望能够让用户能够单击“更多”按钮，该按钮通过 jQuery 创建一个新表单（第一个表单的副本），允许用户输入多个搜索词。我还计划包括某种`boolean`选择框。

结果将是用户可以在位置字段的年份字段“旧金山”的数据库`AND`“1920”的名称字段中搜索带有“鸡蛋”的东西，或者在餐厅字段“鸡肉”中搜索带有“Le Bernadin”的东西主要成分字段，或者只是课程字段中的“开胃菜”（没有其他参数）。我并不特别关心让用户对. 我认为最好线性处理它，例如`OR``AND``boolean's`

```
"a AND b OR c" --> (a AND b) OR c
"a OR b AND c" --> (a OR b) AND c 
```

我在互联网上四处寻找，我发现[了这个](http://www.michelepasin.org/blog/2010/07/20/the-power-of-djangos-q-objects/)，这似乎是在后端连接所有内容的好方法，但我仍然对如何达到我可以开始的地步感到困惑把它们放在一起。我目前的思路`{{ form }}`是在单击“更多”按钮时使用 jQuery 动态添加模板标签，然后将`request.GET.lists()`. 这是正确的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:45:08.973

您需要的是一个[formset](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)，它非常有用，非常适合在您的情况下应用。点击此链接，您将了解什么是以及如何使用。

对于动态添加/删除新表单， [jquery.formset](http://django-dynamic-formset.googlecode.com/)是一个很好的选择。

# wikipedia - 从 Wikipedia 获取（书籍）作者的（自动完成）列表

> ID：13959036
> 
> 赞同：2
> 
> 时间：2012-12-19T18:47:35.333
> 
> 标签：wikipedia, wikipedia-api, wikidata

我一直在努力使用它的 API 从 Wikipedia 获取书籍作者列表。我想让我网站的用户能够展示他们喜欢的作家。为了向他们展示喜欢同一个作家的其他人，我认为制作一个自动完成/建议文本框来向他们展示可能的作家是个好主意（之后，假设输入 3 个字符）。这样，可以避免拼写问题，而且我可以存储 pageId，然后我可以使用它来匹配用户。

编码不是问题！*问题在于构建正确的查询*。我尝试了几种方法，但我无法得到我想要的。也很少有例子可以说明如何做这种事情。

我想要什么：

*   返回页面的标题
*   仅页面（因此没有类别、修订等）
*   关于人的页面，或者如果可能的话作家（国籍不重要）
*   仅搜索标题

如果可能的话：

*   页面上的一些文字（我想只能在维基百科上得到这个？）
*   页面的 url
*   出生日期，以及适当的死亡日期

我不确定这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-25T17:15:53.927

如今，查询 Wikipedia 数据是通过其结构化数据对应物 Wikidata 完成的。[https://www.wikidata.org/wiki/Wikidata:Data_access](https://www.wikidata.org/wiki/Wikidata:Data_access)

例如，您可以使用 WDQ 获取标记为“存在”或“具有”“作家”职业的项目列表：[http ://tools.wmflabs.org/autolist/autolist1.html?q=tree%5B36180 %5D%5B%5D%5B31%2C106%5D](http://tools.wmflabs.org/autolist/autolist1.html?q=tree%5B36180%5D%5B%5D%5B31%2C106%5D)（60k 结果）。

或者还包括其所有子类（诗人和其他）：[http](http://tools.wmflabs.org/autolist/autolist1.html?q=tree%5B36180%5D%5B%5D%5B31%2C106%2C279%5D) ://tools.wmflabs.org/autolist/autolist1.html?q=tree%5B36180%5D%5B%5D%5B31%2C106%2C279%5D （获取200k 结果有点混乱，需要一些过滤）。

# google-app-engine - 什么是 Google App Engine 并发连接限制/它如何扩展？

> ID：13959037
> 
> 赞同：-4
> 
> 时间：2012-12-19T18:47:36.087
> 
> 标签：google-app-engine

什么是 Google App Engine 并发连接限制？

假设大多数请求在 5 秒内完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:11:24.930

没有连接限制，而是前端执行时间限制（28 小时/天，高于 0.08 美元/小时）、传入带宽（每天免费 1GB，启用计费后无限制免费）和传出带宽（1GB免费/天，0.12 美元/GB）。我建议您阅读 Google 的计费信息并停止在此处提出这些问题：[https](https://cloud.google.com/pricing/) ://cloud.google.com/pricing/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:31:04.357

我听说实例最多允许 10 个并发线程。如果您需要更多并发请求，将启动新实例。顺便说一句，在 GAE 上运行时，5s 请求似乎很长。

如果您使用的是 GAE Java，您可能会遇到这个非常烦人的问题：

[http://code.google.com/p/googleappengine/issues/detail?id=7865](http://code.google.com/p/googleappengine/issues/detail?id=7865)

# c++ - 避免隐式转换

> ID：13959039
> 
> 赞同：3
> 
> 时间：2012-12-19T18:47:41.387
> 
> 标签：c++, operator-overloading, implicit-conversion

我正在开发一个需要为大数字库提供通用 C++ 包装器的项目，如果该库提供如下 C 风格的函数：

```
//assignment
lib_set(lib_type data, lib_type input);
lib_set_si(lib_type data, long input);
lib_set_ui(lib_type data, unsigned long input);

//addition
lib_add(lib_type data, lib_type input);
lib_add_ui(lib_type data, unsigned long input); 
```

为了避免在不需要时创建临时对象，我最终得到了这样的结果：

```
class wrapper
{
private:
    lib_type data;
public:

    wrapper()
    {
        lib_set_ui(this->data, 0UL);
    }

    wrapper (const wrapper &input)
    {
        lib_set(this->data, input.data);
    }

    wrapper (const long input)
    {
        lib_set_si(this->data, input);
    }

    wrapper (const unsigned long input)
    {
        lib_set_ui(this->data, input);
    }

    wrapper &operator+= (const wrapper &input)
    {
        lib_add(this->data, input.data);
        return *this;
    }

    wrapper &operator+= (const unsigned long input)
    {
        lib_add_ui(this->data, input);
        return *this;
    }
}; 
```

不幸的是，如果我这样做：

```
wrapper x(2);
x += -2; 
```

编译器（GCC / VS2010）甚至不会发出我试图隐式转换的警告，`int`这`unsigned long`绝对不是我想要的......

那么，在这种情况下，我将如何重载`wrapper`该类的运算符，以便在不需要`wrapper`时不需要创建临时对象？如果我删除`wrapper &operator+= (const unsigned long input)`重载，那么我将不得不使用这样的东西：

```
wrapper x(2);
x += wrapper(-2);
x += -2;//implicitly casts -2 to wrapper 
```

但我认为我不能依赖编译器可能能够优化掉额外对象的事实......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:29:32.137

正如您所描述的，我不知道禁用隐式转换的方法。但是，您至少可以让编译器对其发出警告。

如果您使用的是 gnu Mingw/gcc，则只需在编译时`-Wconversion`通过。`-Wsign-conversion`您现在应该在上面的代码中收到警告。

对于 MSVC，`/Wall`或者`/W4`应该得到你同样的东西。

# php - 托管在 Heroku 上的 MongoLab 插件 PHP 应用程序

> ID：13959042
> 
> 赞同：0
> 
> 时间：2012-12-19T18:47:44.200
> 
> 标签：php, heroku, mlab

我有一个 PHP 应用程序要托管在 heroku 上。该应用程序的基本功能是（通过浏览器）从用户那里收集一些数据并将这些数据存储在数据库中（由于这是一个 PHP 应用程序，因此必须仅通过 PHP 进行数据库修改）。现在我已经从 heroku 控制面板启用了 MongoLab 插件，并在该数据库中创建了数据库、用户和样本集合。我已经通过 git 将我的代码部署到了 heroku。以下是位于应用程序根文件夹内的文件**db.php的内容**

```
<?php
 try {
   $user = 'my user name';
   $pass = 'my password';
   $app = 'my app name';
   $col = 'sample collection';
   echo 'connecting ...';
   $connection = new Mongo('mongodb://'.$user.':'.$pass.'@ds034512.mongolab.com:34512/'.$app);
   echo 'connected';
   $database   = $connection->selectDB($app);
   $collection = $database->selectCollection($col);
  }
  catch(MongoConnectionException $e) {
   die("Failed to connect to database ".$e->getMessage());
  }
?> 
```

现在，每当我尝试在 heroku 服务器本身上执行文件时（通过从我的本地浏览器调用 url **http://my-app-name.herokuapp.com/db.php ）它都会显示**

> “正在**连接...** ”＆在控制台中有一条错误消息**“NetworkError：500 Internal Server Error - [http://my-app-name.herokuapp.com/db.php](http://my-app-name.herokuapp.com/db.php) ”**

任何人都可以建议我有关如何为 heroku 上托管的应用程序完成此数据库集成的任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:56:27.537

您没有包括 mongodb 驱动程序。这个要点有所有的说明。

[https://gist.github.com/1288447](https://gist.github.com/1288447)

# jquery - 我怎样才能在 jcarousel 中获得可见的中间 li？

> ID：13959046
> 
> 赞同：2
> 
> 时间：2012-12-19T18:48:16.017
> 
> 标签：jquery, css, slider, jcarousel

![布局](../Images/e315c6f92df042c7f3e8b29245fc4fd3.png)

我有这种情况。中间的两个东西总是比其他的大，不知道怎么弄。
我正在使用 jcarousel。如果有另一个替代 jquery 插件，它将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:30:24.053

笏 jQuery 替代品 ;) 它非常简单但有效

[http://codepen.io/dmi3y/full/dCvkl](http://codepen.io/dmi3y/full/dCvkl)

好的例子在codepen上，它的核心是片段

```
(function(){
    $('.scroll-gal').each(function(){
        var el = $(this), ul = $('ul', el);
        $('div', el).not('.vewport').click(function(){
            if(ul.is(':animated')) return;
            var dly = 200, first = $('li:first', ul), last = $('li:last', ul);
            switch($(this).css('float')){
            case 'left':
                ul.css('left', -last.outerWidth(true)).prepend(last).animate({'left': 0}, dly);
            break;
            case 'right':
                ul.animate({'left': -first.outerWidth(true)}, dly, function(){
                    $(this).append(first).css('left', 0)
                });
            break;
            }
        });
    });
})(); 
```

核心思想只是在繁重的 DOM 操作中，我需要稍微解释一下。

好的，当您单击右键时发生了什么：

```
ul.animate({'left': -first.outerWidth(true)}, dly, function(){
    $(this).append(first).css('left', 0)
}); 
```

首先将整个`ul`容器动画向右，并在动画结束时将第一项放入列表中，将其放在最后。这很容易。

左动画有点棘手：

```
ul.css('left', -last.outerWidth(true)).prepend(last).animate({'left': 0}, dly); 
```

在第一点，`ul`容器向右（负向左）快速移动，然后立即取出最后一个项目并将其放在第一位，然后在这个动画之后向左移动。

你看，引擎盖下有这么多的电话，这就是为什么它很重。但它会在大多数实现中顺利运行，尽管它具有巨大的优化潜力。

# entity-framework - Asp.Net Web API 错误：“ObjectContent`1”类型无法序列化内容类型“application/xml”的响应正文；字符集=utf-8'

> ID：13959048
> 
> 赞同：40
> 
> 时间：2012-12-19T18:48:20.207
> 
> 标签：entity-framework, entity-framework-4, asp.net-web-api

最简单的例子，我得到一个集合并尝试通过 Web API 输出它：

```
// GET api/items
public IEnumerable<Item> Get()
{
    return MyContext.Items.ToList();
} 
```

我得到了错误：

> “System.Data.Objects.ObjectQuery`1[Dcip.Ams.BO.EquipmentWarranty]”类型的对象
> 无法转换为
> “System.Data.Entity.DbSet`1[Dcip.Ams.BO.EquipmentWarranty]”类型

这是与新代理有关的一个非常常见的错误，我知道我可以通过设置来修复它：

```
MyContext.Configuration.ProxyCreationEnabled = false; 
```

但这违背了我想做的很多事情的目的。有没有更好的办法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-04-29T18:33:58.077

我建议仅在您不需要或给您带来麻烦的地方禁用代理创建。您不必全局禁用它，您可以通过代码禁用当前的数据库上下文...

```
 [HttpGet]
    [WithDbContextApi]
    public HttpResponseMessage Get(int take = 10, int skip = 0)
    {
        CurrentDbContext.Configuration.ProxyCreationEnabled = false;

        var lista = CurrentDbContext.PaymentTypes
            .OrderByDescending(x => x.Id)
            .Skip(skip)
            .Take(take)
            .ToList();

        var count = CurrentDbContext.PaymentTypes.Count();

        return Request.CreateResponse(HttpStatusCode.OK, new { PaymentTypes = lista, TotalCount = count });
    } 
```

这里我只在这个方法中禁用了 ProxyCreation，因为对于每个请求都会创建一个新的 DBContext，因此我只在这种情况下禁用了 ProxyCreation。希望能帮助到你

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-15T09:13:53.587

如果您有导航属性并且不想将它们设为非虚拟属性，则应使用 JSON.NET 并将 App_Start 中的配置更改为使用 JSON 而不是 XML！
从 NuGet 安装 JSON.NET 后，将此代码插入 WebApiConfig.cs 中的 Register 方法

```
var json = config.Formatters.JsonFormatter;
json.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;
config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-21T14:28:37.433

如果您有导航属性，请使其成为非虚拟的。映射仍然有效，但它会阻止创建无法序列化的动态代理实体。]

在 WebApi 中没有延迟加载很好，因为您没有持久连接，并且无论如何您都运行了 .ToList() 。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-10-21T03:32:47.463

我只是根据需要禁用了代理类：

```
 // GET: ALL Employee
    public IEnumerable<DimEmployee> Get()
    {
        using (AdventureWorks_MBDEV_DW2008Entities entities = new AdventureWorks_MBDEV_DW2008Entities())
        {
            entities.Configuration.ProxyCreationEnabled = false;
            return entities.DimEmployees.ToList();
        }
    } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-05T05:28:39.247

**在Global.asax.cs**`Application_Start`的函数中添加以下代码：

 **```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings
    .ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore;
GlobalConfiguration.Configuration.Formatters
    .Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter); 
```

这指示 API 将每个响应序列化为 JSON 并删除 XML 响应。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-12T20:16:03.560

在我的情况下，返回的对象中有一个属性，其类型没有无参数/默认构造函数。通过向该类型添加零参数构造函数，可以成功序列化对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-06T11:48:41.420

我遇到了同样的问题，我的 DTO 缺少一个无参数的构造函数。

```
public UserVM() { }

public UserVM(User U)
    {
        LoginId = U.LoginId;
        GroupName = U.GroupName;
    } 
```

缺少第一个构造函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-17T14:02:02.287

我收到此错误消息，事实证明问题是我不小心将我的类设置为对两个属性使用相同的序列化属性名称：

```
public class ResultDto
{
    //...
    [JsonProperty(PropertyName="DataCheckedBy")]
    public string ActualAssociations { get; set; }
    [JsonProperty(PropertyName="DataCheckedBy")]
    public string ExpectedAssociations { get; set; }
    //...
} 
```

如果您收到此错误并且您没有直接通过您的 API 发送实体，请将无法序列化的类复制到 LINQPad 并调用`JsonConvert.SerializeObject()`它，它应该会为您提供比这种废话更好的错误消息。我一尝试，它就给了我以下错误消息：`A member with the name 'DataCheckedBy' already exists on 'UserQuery+ResultDto'. Use the JsonPropertyAttribute to specify another name.`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-26T00:12:22.833

禁用代理创建后，使用预先加载（Include()）来加载代理对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-16T15:51:07.630

在我的项目中，从 WebApi 操作方法返回的 EntityCollection。 `Configuration.ProxyCreationEnabled = false`不适用。我已经尝试了以下方法，它对我来说效果很好。

1.  控制面板。2.打开或关闭Windows功能
2.  选择互联网信息服务
3.  检查所有万维网组件最好检查 IIS 中的所有组件。
4.  安装组件。
5.  在命令提示符下转到 (IIS) 类型 inetmgr。
6.  在 Virtual 目录中选择已发布的代码。
7.  转换为应用程序
8.  浏览它的应用程序。**

# python - 附加到列表以从列表中删除元素

> ID：13959051
> 
> 赞同：0
> 
> 时间：2012-12-19T18:48:28.413
> 
> 标签：python, list, append

我只是在测试列表在 python 中是如何工作的，我发现它非常令人困惑和令人沮丧。无论出于何种原因，我的代码都会不断收到错误消息。

```
def listtest(list1,x):
    list2 = []
    count = 0
    for n in list1:
        if list1[count] == x:
            count += 1
        else:
            list2 = list.append(list2,list[count])
            count += 1
    return list2 
```

无论出于何种原因，它要么告诉我`list.append`只接受一个令人困惑的论点。在交互窗口中，我可以使用两个参数调用 append ，例如 so`list.append(list,3)`或其他，它可以完美地工作。我得到的另一个错误是

```
list2 = list.append(list2,list[count])
TypeError: 'type' object has no attribute '__getitem__' 
```

这对我来说完全是荒谬的，而且没有任何帮助。我的代码有什么问题？为什么交互窗口的行为与其他窗口不同？为什么不像在交互窗口中那样追加工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:51:23.310

**编辑：** 经过更仔细的分析后重写：

您的直接问题`list[count]`是*应该*是`list1[count]`. 内置类型`list`不能被索引（因为它是一个类型，而不是一个列表），所以你会得到`TypeError`关于`__getitem__()`方法不被支持的信息。

但即使你写了`list2 = list.append(list2,list1[count])`，你仍然有问题。那行代码会做什么？

1.  附加`list1[count]`到`list2`. 到目前为止，一切都很好。
2.  将调用结果分配给`list.append()`to `list2`。由于`.append()`是一种修改就地调用的对象的方法，因此它总是返回`None`.
3.  所以现在`list2`是`None`。
4.  *下次*您调用该 行时，您将得到另一行，`TypeError`因为您无法将任何内容附加到`NoneType`对象。

所以，你应该写的是

```
list2.append(list1[count]) 
```

虽然这现在可行，但这是一种非常迂回的方法。跟踪您实际上不需要的索引是非常不合 Python 的 - 该语言比这更具表现力。不要尝试用 Python 编写 Java 程序。您的功能（如果您的目标确实是创建一个新列表，其中包含与其中`list1`相同的所有对象`x`- 我完全看不到这一点）可以写成

```
def listtest(list1, x):
    return [item for item in list1 if item == x] 
```

虽然这并不比简单地写作有用多少

```
list1.count(x) 
```

`x`这给了你出现的次数`list1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:52:11.777

您的错误并非荒谬，他们试图将您指向根本问题。你不应该`list`用作变量名，因为`list`它是一个内置类型。此外，当您尝试访问`append`列表时，您确实只想传递一个参数。你可以`append`这样`tuple`：

```
myList.append(('val1', 'val2')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:52:41.553

如果要附加到`list2`，请使用`list2.append()`，而不是`list.append()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:51:14.473

您一次只能附加*一项*来列出。您可以使用第二个列表的项目扩展（）一个列表，这基本上意味着您将第二个列表的每个单独项目附加到第一个列表中。这里有什么难理解的？列表 API 有很好的文档和清晰的说明。

# c# - SQL Server CE 2.0 数据库下载

> ID：13959054
> 
> 赞同：1
> 
> 时间：2012-12-19T18:48:37.707
> 
> 标签：c#, visual-studio-2005, sql-server-ce, windows-mobile-5.0

我们请求的一个客户端和应用程序可以安装在 windows mobile os 5 上。我们已经开始开发，但是安装在客户端设备上的 SQL Server CE 是 SQL Server CE 2.0。

经过一番研究，似乎只有 .NET Compact Framework v1 支持 SQL Server CE 2.0，这意味着我们需要构建一个 Windows mobile 2003 应用程序。我们有框架，但没有数据库。我一直在寻找几个小时的下载，有人知道我在哪里可以获得 SQL Server CE 2.0 的副本以及将其连接到 vs2005 的开发工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:00:07.600

SQL Server CE 已停产。您可以使用 SQL Server CE 2005 (v3.1) 并升级现有数据库：

[http://www.microsoft.com/en-us/download/details.aspx?id=17439](http://www.microsoft.com/en-us/download/details.aspx?id=17439)

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEkQFjAC&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F4%2F7%2Fa% 2F47a548b9-249e-484c-abd7-29f31282b04d%2FUpgradingSQLServerCE.doc&ei=hd_SUNC0AcXHsgar14CoCA&usg=AFQjCNHz9_tnNcgqoAQIVKT54mv2As_BDA&sig2=9VqZcp0OG3_HtoCRbnJaGQ&bvm=bv.](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEkQFjAC&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F4%2F7%2Fa%2F47a548b9-249e-484c-abd7-29f31282b04d%2FUpgradingSQLServerCE.doc&ei=hd_SUNC0AcXHsgar14CoCA&usg=AFQjCNHz9_tnNcgqoAQIVKT54mv2As_BDA&sig2=9VqZcp0OG3_HtoCRbnJaGQ&bvm=bv.1355534169,d.Yms)

顺便说一句：您还可以将 SQL Server CE 2.0 程序集与较新的 Compact Framework 版本一起使用。它不仅可以与 CF 1.0 一起运行，还可以与 2.0 和 3.5 一起运行

# php - ZF1 的 findParentRow()、findDependentRowset() 等的 Zend\Db (ZF2) 等价物

> ID：13959055
> 
> 赞同：2
> 
> 时间：2012-12-19T18:48:43.613
> 
> 标签：php, database, zend-framework2

在 ZF1 中，`Zend_Db_Table_Row_Abstract`提供了`findParentRow()`、`findDependentRowset()`等方法。这些方法可用于使用相应表类中`$ruleKey`指定的方法从链接表中检索行对象。`$_referenceMap`

ZF2中的等效方法是什么？莫非还是缺少这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:18:23.630

这样的事情已经不存在了。Zend Framework 在其第二个版本中从提供完整的 ORM 可能性倒退了一步，而是提供了一个好的 QueryBuilder。即一切都在`\Zend\Db\Sql\*`

如果您想要 ORM-Features，最好建议您使用出色的 ORM。有一些非常好的，包括[Propel](http://propelorm.org/)和[Doctrine2](http://www.doctrine-project.org/)。[后者已经通过模块学说/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)在 Zend Framework 2 中实现了很好的实现。

使用完整的 ORM 有很多优点，其中一个是 Propel 和 Doctrine 都提供的很棒的文档。Doctrine 还提供了与[mongoDB](http://www.mongodb.org/)的兼容性。因此，您可能想尝试其中一个；）

# javascript - 等待 head.ready() 和 $(document).ready()，然后执行

> ID：13959056
> 
> 赞同：0
> 
> 时间：2012-12-19T18:48:45.320
> 
> 标签：javascript, jquery, document-ready, head.js

我想在文档准备好并且所有脚本加载完成后执行一些代码。我使用[head.js](http://headjs.com/)加载脚本：

```
$(document).ready(function () {
    head.js("script1.js", "script2.js", function() {
        // code to execute
    });
}); 
```

这样做会使开始加载脚本等待 $(document).ready()。似乎最好尽快开始加载脚本以避免性能下降。

有没有更好的方法来确保在执行代码块之前完全加载文档和脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:56:40.577

最好交换代码。

```
head.js("script1.js", "script2.js", function() {
    $(document).ready(function () {
        // code to execute
    });
}); 
```

脚本立即开始加载，然后当它们完成后，它们会等到文档准备好然后开始执行。

如果您将脚本移到结束 body 标记之前并一起删除 domready 处理程序，那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:08:26.343

你把方法弄得太复杂了。如果您希望先加载文档，然后加载您的脚本，然后您可以执行一些代码，那么只需将脚本标签放在文档的末尾，`</body>`就像这样：

```
<head>
</head>
<body>

Your regular HTML content here
<script src="script1.js"></script>
<script src="script2.js"></script>
<script>
// Put code here that you want to execute when document and scripts are ready
</script>
</body> 
```

由于您描述的简单原因，您不需要使用回调进行动态加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:56:35.120

将您的 $(document).ready() 代码放在所有其他脚本中？！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:53:07.263

您可以使用`.load`先加载所有内容，然后执行所有内容：

```
$(window).load(function () {
    head.js("script1.js", "script2.js", function() {
    // code to execute
    });
}); 
```

# css - CSS 有一个 div，每行可以容纳 5 li 如何让 6 进入新行

> ID：13959060
> 
> 赞同：1
> 
> 时间：2012-12-19T18:49:05.870
> 
> 标签：css

所以在我的页脚中，我将一堆菜单链接显示为每列的列

```
Header Column
 Column Link
 Column Link
 ... 
```

我每行可以装 5 个。我想要的是，如果内容用户添加了第 6 列，它将换行到下一行并且位于第一列标题的下方。

现在它换行到下一行，但似乎根据第一行的高度随机放置在下一行。

标记看起来像

```
 <ul id="mainMenuList">
  <li class="footerParentSubLists boldMenu"></li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  <li class="footerParentSubLists boldMenu">..subitems</li>
  ...
<ul> 
```

我正在为每一列设置宽度，这对于每行 5 个而言是足够的

```
.boldMenu {
    max-width: 170px;
    width: 170px;
} 
```

也向左飘

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:57:41.107

试试这个（CSS3，[与 IE8 不兼容](http://caniuse.com/css-sel3)）让每 (5n+1) 个列表元素移动到新行：

```
#mainMenuList > li:nth-child(5n+1) {
    clear: left;
} 
```

[http://jsfiddle.net/mblase75/J4gQP/](http://jsfiddle.net/mblase75/J4gQP/)

如果向后兼容性是一个问题，您可以自己直接向每 (5n+1) 个元素添加一个类，或者编写 JavaScript 来为您完成，以及`clear:left`该类。

# windows - 有没有办法从 Mac 跟踪远程 Windows 机器上的日志？

> ID：13959061
> 
> 赞同：3
> 
> 时间：2012-12-19T18:49:06.710
> 
> 标签：windows, macos, logging, tail

我在工作中使用 Mac（Mtn Lion），但我们所有的服务器都是基于 Windows 的。实时查看日志会很棒，我有办法做到这一点吗？

我想我可以远程进入机器，但这不是很方便。现在我只需要使用 SMB 在 Finder 中的 Windows 机器上安装日志共享，并使用文本编辑器打开日志文件，然后重新打开它们以获取最新数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T17:19:33.077

`tail -f`在 osx 终端窗口中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-10T13:01:16.823

我通常为此使用“tail -f”。在 Linux 中，它也适用于挂载的 SMB 共享中的文件。

我注意到 tail 在 Mac OS 中的相同上下文中不起作用。它没有正确遵循。要解决此问题，请改用 gtail。您可以从 macports 安装 gtail。即使在通过 Mac OS 上的 Finder 挂载的 Windows 共享上也能正确遵循。

# mysql - 在 GROUP 中按条件显示元素

> ID：13959063
> 
> 赞同：1
> 
> 时间：2012-12-19T18:49:07.973
> 
> 标签：mysql, select, group-by, conditional-statements

说，我有一张桌子：

```
id ext_id param

1    5      0

2    5      1

3    6      0

4    6      0

5    7      1

6    7      1 
```

分别。

我想要这样的结果：

```
2 5 1

3 6 0

5 7 1 
```

这样 MySQL 按 ext_id 分组并显示一个具有最大值的元素`param`。如果所有人都是平等的 - 我需要任何。

我试过类似的东西：

```
SELECT * FROM t 
GROUP BY ext_id HAVING param = MAX(param) 
```

但它没有成功（（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:54:07.450

首先，您必须`param`使用 group by 查询找到每个 ext_id 的最大值。然后你必须在 t 上再次加入这个查询的结果，其中`ext_id`匹配，并且`param`是`max_param`：

```
SELECT t2.*
FROM (
  SELECT ext_id, max(param) as max_param
  FROM t
  GROUP BY ext_id ) t1 inner join t t2
  on t1.ext_id=t2.ext_id and t1.max_param=t2.param
GROUP BY t2.ext_id 
```

由于可能有不止一行具有相同的最大值`param`，所以我再次分组`ext_id`，MySql 允许您这样做，因此每个`ext_id`.

# javascript - Javascript：使用 OR 操作数将单个值与多个值进行比较

> ID：13959064
> 
> 赞同：5
> 
> 时间：2012-12-19T18:49:09.497
> 
> 标签：javascript, if-statement, operands

> **可能重复：**
> [根据值列表检查变量是否相等](https://stackoverflow.com/questions/4728144/check-variable-equality-against-a-list-of-values)
> [Javascript if 语句具有多个允许条件](https://stackoverflow.com/questions/13944216/javascript-if-statement-with-multiple-permissible-conditions)

我必须在下拉列表 (ul) 中单击 253 个项目 (li) 中的相同 21 个。

滚动我必须为 500 多页上的同一个列表执行此操作，我想我可以 Javascript 注入每个 ul，循环并单击恰好是 21 个之一的每个 li。看来我不能做类似的事情

```
 if(item[i] === ('aasdf'|'basdf'|'cwefw'|'asdfd'|'trehe'|'ferth'|'erthg'|'erthh'|'ierth'|'jeth'|'kerth'|'lerth'|'merth'|'psdfg'|'gregq'|'rsrgs'|'sress'|'srget'|'sergu'|'sdfgsv')) 
```

有没有一种语法更简洁的方式来编写下面这个丑陋的 if 语句？

```
var item = document.getElementById('myDropdownList').getElementsByTagName('li');

for (i=0;i<item.length;i++){

    if(item[i].innerText === 'Argentina' | item[i].innerText === 'Australia' | item[i].innerText === 'Brazil' | item[i].innerText === 'Canada' | item[i].innerText === 'China' | item[i].innerText === 'Colombia' | item[i].innerText === 'France' | item[i].innerText === 'Germany' | item[i].innerText === 'Indonesia' | item[i].innerText === 'India' | item[i].innerText === 'Italy' | item[i].innerText === 'Japan' | item[i].innerText === 'Malaysia' | item[i].innerText === 'Mexico' | item[i].innerText === 'Philippines' | item[i].innerText === 'Russia' | item[i].innerText === 'South Africa' | item[i].innerText === 'Sweden' | item[i].innerText === 'Switzerland' | item[i].innerText === 'United Kingdom' | item[i].innerText === 'USA'){

    item[i].click();

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:58:28.863

您可以使用变量和多重比较，但这仍然很长：

```
var text = item[i].innerText;
if (text === 'Argentina' | text === 'Australia' | text === 'Brazil' | text === 'Canada' | text === 'China' | text === 'Colombia' | text === 'France' | text === 'Germany' | text === 'Indonesia' | text === 'India' | text === 'Italy' | text === 'Japan' | text === 'Malaysia' | text === 'Mexico' | text === 'Philippines' | text === 'Russia' | text === 'South Africa' | text === 'Sweden' | text === 'Switzerland' | text === 'United Kingdom' | text === 'USA') 
```

或者您可以只使用一个数组并检查字符串是否包含在其中。

```
var matches = ['Argentina','Australia','Brazil','Canada','China','Colombia','France','Germany','Indonesia','India','Italy','Japan','Malaysia','Mexico','Philippines','Russia','South Africa','Sweden','Switzerland','United Kingdom','USA'];
if (~ matches.indexOf(item[i].innerText) … 
```

然而，对于[复杂的`!= -1`比较](https://stackoverflow.com/q/12299665/1048572)和旧 IE 中缺乏原生[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)的情况，人们倾向于使用正则表达式：

```
var regex = /Argentina|Australia|Brazil|Canada|China|Colombia|France|Germany|Indonesia|India|Italy|Japan|Malaysia|Mexico|Philippines|Russia|South Africa|Sweden|Switzerland|United Kingdom|USA/
if (regex.test(item[i].innerText)) … 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T18:51:30.667

```
var options = ['Argentina', 'Australia', 'Brazil', 'Canada', ...];
if (options.indexOf(item[i].innerText) !== -1){
  // item[i] was found in options
} 
```

类似的东西？使用[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)（除非我读错了问题？在这种情况下发表评论，我会尽我所能重新工作我的答案）

# google-app-engine - 什么是 Google App Engine 数据存储区大小限制/如何扩展？

> ID：13959067
> 
> 赞同：4
> 
> 时间：2012-12-19T18:49:19.517
> 
> 标签：google-app-engine

什么是 Google App Engine 数据存储区大小限制/如何扩展？

我阅读了数据存储有多快以及 API 限制是什么的信息，但没有找到数据存储有多大的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:23:22.313

您将无法达到任何限制（除了您的口袋）。

来自 google.appengine.ext.ndb key.py：整数 id 必须至少为 1 且小于 2**63。这些是您在插入对象时会自动分配的。

但是，这不会限制您使用自定义（字符串）键插入更多对象的能力。它的编码形式 (base64) 最长可达 500 字节，比 128 位地址空间还多，这超出了你所能填写的范围。（见[https://blogs.oracle.com/bonwick/entry/128_bit_storage_are_you](https://blogs.oracle.com/bonwick/entry/128_bit_storage_are_you)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:55:56.810

没有物理限制。但是根据使用情况，您会达到一个限制。

请参阅：[https ://developers.google.com/appengine/docs/quotas](https://developers.google.com/appengine/docs/quotas)

# c# - _doPostBack 未触发事件

> ID：13959068
> 
> 赞同：2
> 
> 时间：2012-12-19T18:49:27.270
> 
> 标签：c#, javascript, jquery, asp.net, dopostback

我正在尝试在按钮回发之前挂钩 jquery 样式 yes|no 确认框。

**应该发生什么**

*   用户点击“否” - 没有回发
*   用户点击“是”——回发，按钮事件被触发

**目前发生的事情**

*   用户点击“否” - 没有回发
*   用户单击“是” - 回发，触发页面加载事件，但不触发按钮事件处理程序

那么，如何让按钮事件处理程序触发？对了，它只是进入页面加载事件。

```
 <asp:Button ID="btnSetActive" runat="server" Text="Set as Active" OnClientClick="AllBrandsConfirmation(); return false;" onclick="btnSetActive_Click" />

$(function () {

    // Set all brands (yes button)
    $('#setAllBrandsConfirmation #yes').click(function () {
        $.unblockUI();
        __doPostBack('ctl00_ctl00_oCPH1_Content_btnSetActive', '');
    });

    // Set all brands (no button)
    $('#setAllBrandsConfirmation #no').click(function () {
        $.unblockUI();
    });

});

// All brands confirmation
function AllBrandsConfirmation() {
    $.blockUI({ message: $('#setAllBrandsConfirmation') });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:36:28.117

```
protected void Page_Load(object sender, EventArgs e)
{
    if(Request.Form["__EVENTTARGET"] != null)
        if(Request.Form["__EVENTTARGET"] == "ctl00_ctl00_oCPH1_Content_btnSetActive")
            btnSetActive_Click(sender, e);
}

protected void btnSetActive_Click(object sender, EventArgs e)
{
    //do your work here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:12:41.637

我只是想通了......好吧，谷歌帮助了:) 显然，在 doPostBack 方法的第一个参数中，您需要使用控件 uniqueId，而不是 id 值。一旦我改变它，它就会触发事件。

# asp.net - WebMatrix 中的异步页面？

> ID：13959069
> 
> 赞同：2
> 
> 时间：2012-12-19T18:49:29.843
> 
> 标签：asp.net, webmatrix

ASP.NET 4.5 似乎支持 Web 表单和 MVC4 的异步页面。这在 WebMatrix 中也可能吗？Node.js 是我想像的火花，我最近在 node.js 中做了一些工作，并希望遵循类似的模式来尽可能释放线程。

作为一种解决方法，我想可以创建一个 ASHX 处理程序，该处理程序使用 razor 助手使用任务和等待等，但它不是那么方便。至少，我可以通过这种方式为 AJAX 请求提供 ASHX 处理程序。如果您想展示一些示例，这可能会有所帮助，因为我在 webmatrix 中的应用程序在带有 JSON 的 ASHX 处理程序中很重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:01:06.743

目前，WebMatrix 缺乏对“async”和“await”关键字的编辑器支持，不幸的是，这将在该工具中阻止这种情况。我已经针对该产品提交了一个错误，希望它会在将来的某个日期得到解决。

但是，对于这种情况，您可以使用 Visual Studio Express for Web。您应该能够在使用该环境的 Razor 语法网站中获得对异步编码的完整编辑器和编译器支持。

# php - 如何使用 PHPPowerPoint 将图像添加到幻灯片？

> ID：13959072
> 
> 赞同：1
> 
> 时间：2012-12-19T18:49:41.467
> 
> 标签：php, phppowerpoint

[PHPPowerPoint](http://phppowerpoint.codeplex.com/)是一个很棒的库，但它没有文档。将图像添加到幻灯片的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T13:45:49.947

```
$currentSlide = createTemplatedSlide($objPHPPowerPoint); 
// createTemplatedSlide is manual function in PHPpowerPoint

// create a drawing shape object
$shape1 = $currentSlide->createDrawingShape();
$shape1->setName("set name here");
$shape1->setDescription('Link Image');
$shape1->setPath('provide image path here');
$shape1->setWidth(45); // set width
$shape1->setHeight(45); // set height
$shape1->setOffsetX($offset_X); // distance from the left side of the slide
$shape1->setOffsetY($offset_Y); // distance from top of the slide 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:22:46.950

每个图形对象都被视为一个“形状”。这是将图像插入幻灯片的方法：

```
// Create slide 1
$currentSlide = createTemplatedSlide($objPHPPowerPoint); 
        //Slide Content
    $shape = $currentSlide->createDrawingShape();
    $shape->setName('Part page');
    $shape->setDescription('Page');
    $shape->setPath('D:\wamp\www\Project\PPTResource\Part2\Image.jpg'); //This being the directory, wont be the same as mine.
    $shape->setOffsetX(10); //Default values on position of image
    $shape->setOffsetY(10);
    $shape->getShadow()->setVisible(true);
    $shape->getShadow()->setDirection(45);
    $shape->getShadow()->setDistance(10); 
```

# filepicker.io - 如何设置 filepicker.io iframe 的样式

> ID：13959073
> 
> 赞同：1
> 
> 时间：2012-12-19T18:49:42.673
> 
> 标签：filepicker.io

我在用：

```
filepicker.pick({ container: "filepicker_iframe" ...) 
```

在给定的中打开一个`filepicker`对话框`iframe`。是否有可能以某种方式设置元素`iframe`以匹配我的网站样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:40:39.087

是的，您可以提供一个 css 文件以包含在开发人员门户上的 iframe 中

# excel - 名称分为从 Sheet1 到 Sheet2 的类别，带有大的空格

> ID：13959084
> 
> 赞同：0
> 
> 时间：2012-12-19T18:50:21.347
> 
> 标签：excel

我正在尝试使用 Excel 来帮助我了解我的学生中哪些课程是共同的。我创建了一张表，在第一列中列出了他们的姓名；以下列包含学生正在上的所有可能的课程。在这张表中，我只是在他们正在学习的课程的列中添加了一个 x。

在表 2 上，我希望有相同的班级列，每个班级下方有一个学生列表，显示将要参加同一班级的每个人。

现在我正在使用这个公式来做到这一点：

```
=IF(COUNTA(Sheet1!B2)=1,Sheet1!A2,"") 
```

这给了我一个列表，但显然有很多空格。我该如何做到这一点，以便每个列表从第一行开始，而不留任何空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T02:36:43.153

在第二张表中，复制所有并将特殊值粘贴到顶部。用say ""替换nothing，然后用nothing替换""。转到特殊并选择空白。向上移动单元格删除。

# asp.net - 停止某些浏览器的页面加载

> ID：13959090
> 
> 赞同：0
> 
> 时间：2012-12-19T18:50:50.087
> 
> 标签：asp.net

我正在运行一个 asp.net mvc3 网站。我想检查正在运行的 IE 版本，如果浏览器不是 ie9，我需要停止页面并发布错误消息。

是否有捷径可寻？

我试过这个

```
 var ie = (function(){

        var undef,
            v = 3,
            div = document.createElement('div'),
            all = div.getElementsByTagName('i');

        while (
            div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
            all[0]
        );

        return v > 4 ? v : undef;

    }());

    if (ie < 9) {
        console.log('ie');
        document.write('<div class="page-error">' + 'bad' + '</div>');

        /*Must throw and not catch this exception in order for the page to stop loading further.*/
        throw "Invalid page exception";
    } 
```

但它仍然呈现整个页面并显示错误。如果在正确的浏览器中没有，我该如何停止页面加载并显示错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:56:41.930

停止页面加载不是正常行为。你最好的选择是做一个重定向或逻辑分支你的代码（假设它是 javascript），这样它就不会在特定的浏览器上运行。可能隐藏/显示基于浏览器支持的 div。

比检测浏览器更好的是，检测您需要的某些功能的存在。看看这个modernizr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:04:00.390

您可以完全在服务器端执行此操作，只需将用户重定向到错误页面。就像是：

```
protected void Page_Load(object sender, EventArgs e)
{

    if(!Request.Headers["User-Agent"].Contains("MSIE 9.0"))
    {
        Response.Redirect("Error.aspx");
    }
} 
```

如果您不想这样做`Response.Redirect`，那么只需像这样直接写入响应：

```
Response.Write("<div> Error - go get IE9 </div>";
Response.End(); 
```

注意：没有任何方法是万无一失的，服务器或客户端检测总是会被欺骗。

# apache - 根请求在 Apache 中解析为错误的 VirtualHost

> ID：13959092
> 
> 赞同：3
> 
> 时间：2012-12-19T18:50:59.067
> 
> 标签：apache, wildcard, virtualhost

我有两个网站在 Apache 服务器后面运行。

其中之一向 api.xyzzy.com 提供请求

另一个服务于传入的任何其他流量（数十个域、子域等），因此是一个包罗万象的通配符。

[使用下面的配置，对http://api.xyzzy.com/](http://api.xyzzy.com/)下的深层链接的请求...转到正确的虚拟主机（第一个），但对[http://api.xyzzy.com](http://api.xyzzy.com/)的顶级请求[/](http://api.xyzzy.com/)加载第二个通用通配符虚拟主机。

我在这里做错了什么？

```
LoadModule passenger_module /home/webby/.rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.18/ext/apache2/mod_passenger.so
PassengerRoot /home/webby/.rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.18
PassengerRuby /home/webby/.rvm/wrappers/ruby-1.9.3-p286/ruby

NameVirtualHost *:80

<VirtualHost *:80>
        ServerName api.xyzzy.com
        ServerAlias api.xyzzy.com
        RailsEnv production
        DocumentRoot /home/webby/rails/current/public
</VirtualHost>

<VirtualHost *:80>
        ServerAlias *
        <Directory /usr/local/xyzzy/webapps/wwwroot >
                Options Indexes MultiViews
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>
        DocumentRoot /usr/local/xyzzy/webapps/wwwroot
</VirtualHost> 
```

**更新：**

下面的配置现在似乎按预期工作。这是基于@Winfield 的回答。

看来我的测试可能出错了。我的浏览器 (Chrome) 可能会自动完成我输入的带有 https（不是 http）前缀的地址。不幸的是，直到尝试了数十种配置排列后，我才注意到这种异常，因此很难说出最终的正确分辨率是多少。我应该在命令行上使用 curl 进行更可靠的测试，而不是在浏览器栏中输入。

```
<VirtualHost *:80>
        <Directory /usr/local/xyzzy/webapps/wwwroot >
                Options Indexes MultiViews
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>
        DocumentRoot /usr/local/xyzzy/webapps/wwwroot
</VirtualHost>

<VirtualHost *:80>
        ServerAlias api.xyzzy.com
        RailsEnv production
        DocumentRoot /home/webby/rails/current/public
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:47:29.747

我认为你最好使用“默认”虚拟主机（首先定义）来解决这个问题，而不是使用通配符虚拟主机。您可以交换订单并填写正确的服务器名称。这应该使非 API 主机名命中默认（第一个）vhost，并且任何与主机名匹配的 API 命中 api vhost。像这样：

```
<VirtualHost *:80>
        ServerName www.xyzzy.com
        ServerAlias xyzzy.com
        <Directory /usr/local/xyzzy/webapps/wwwroot >
                Options Indexes MultiViews
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>
        DocumentRoot /usr/local/xyzzy/webapps/wwwroot
</VirtualHost>

<VirtualHost *:80>
        ServerName api.xyzzy.com
        ServerAlias api.xyzzy.com
        RailsEnv production
        DocumentRoot /home/webby/rails/current/public
</VirtualHost> 
```

# asp.net - 如何使用正则表达式提取带有 html 内容的数据？

> ID：13959093
> 
> 赞同：0
> 
> 时间：2012-12-19T18:51:02.957
> 
> 标签：asp.net, html, regex, html-parsing

我有以下 html 内容，我只想使用正则表达式提取 ID，例如 31673 31672 3166 316。

```
<a href="/CaseMgrTesting/Pat/Summary/31673">31673</a>
<a href="/CaseMgrTesting/Pat/Summary/31672">31672</a>
<a href="/CaseMgrTesting/Pat/Summary/3166">3166</a>
<a href="/CaseMgrTesting/Pat/Summary/316">316</a> 
```

我创建如下正则表达式，不幸的是它只返回 31673 31672。我还想删除像 href="/CaseMgrTesting/Pat/Summary/ 和 \d\d​​\d\d\d 这样的硬代码，任何人都可以给我正确的正则表达式将不胜感激。

```
(?<=<a\shref="/CaseMgrTesting/Pat/Summary/\d\d\d\d\d">).*(?=</a>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:06:56.537

您的一站式答案是 [Html Agility Pack](http://htmlagilitypack.codeplex.com/)。这个漂亮的必备工具允许您按节点处理 HTML。学习它。活下去。爱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T10:07:25.033

```
<a .*?>(.*)</a> 
```

对这个问题使用这个正则表达式。它的简单一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T10:28:08.930

使用这个（正则表达式的更新答案）：

```
<a .*?>(.*?)</a> 
```

其中重要的部分`?`是`*`. 这将使`.*`（匹配所有）非贪婪，否则您最多将有一个匹配。

# android - 静态方法中的 Android PreferenceManager

> ID：13959097
> 
> 赞同：1
> 
> 时间：2012-12-19T18:51:18.170
> 
> 标签：android, android-preferences

如果我尝试编写此方法

```
public static void saveDefaultUser() {
        Editor pName = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext())
                .edit();
        pName.putString("Name", name);
        pName.commit();
} 
```

不编译，我必须删除***静态***值，因为显然我不能对非静态方法进行静态引用。

有没有办法调整它以用于静态方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:54:38.767

您必须将 a 传递`Context`给您的方法并使用它而不是`getBaseContext()`.

```
public static void saveDefaultUser( Context cntxt ) {
    Editor pName = PreferenceManager
            .getDefaultSharedPreferences(cntxt)
            .edit();
    pName.putString("Name", name);
    pName.commit();
} 
```

# c# - 多年来的选择列表

> ID：13959098
> 
> 赞同：10
> 
> 时间：2012-12-19T18:51:22.153
> 
> 标签：c#, asp.net-mvc-4

这可能真的很简单......我正在尝试`SelectList`从当前的年份创建一个包含年份，直到 2008 年。情况总是如此。例如，在 2020 年，我的 SelectList 将包含 2020 - 2008 年的值。

我设置了这个循环，但我不确定最好的地方是什么

```
for (int i = currentYear; i != 2009; --i)
{

} 
```

是否可以为每次迭代创建一个`SelectListItem`并将其“添加”到 a中？`SelectList`

我不认为我上面的陈述是可能的，所以我的下一个想法是创建一个年份列表，然后使用 LINQ 来创建它。

```
var selectList = ListOfYears.Select(new SelectListItem
{
    Value =
    Text = 
}); 
```

但是我不完全确定如何从列表中获取值。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T18:54:41.653

```
var selectList = 
    new SelectList(Enumerable.Range(2008, (DateTime.Now.Year - 2008) + 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T19:35:21.170

我不得不稍微改变接受的答案才能在旧版浏览器中工作。我最终得到一个选择列表，缺少这样的值

```
<option value="">1996</option><option value="">1997</option> 
```

我不得不将上面的代码更改为此

```
var yr = Enumerable.Range(1996, (DateTime.Now.Year - 1995)).Reverse().Select(x => new SelectListItem { Value = x.ToString(), Text = x.ToString() });
        return new SelectList(yr.ToList(), "Value", "Text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:59:15.367

而不是将 a 添加`SelectListItem`到 a `SelectList`，只需将其添加到 a `List<SelectListItem>`。Razor 可以使用 a`List<SelectListItem>`作为源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T04:32:26.233

我创建了一个函数来帮助我解决这个问题。它会根据你给它的值自动反转它。

看看，让我知道你的想法，如果你可以改进它：

```
public static IEnumerable<SelectListItem> Years(int from, int to, int? value = default(int?)) {
    var reverse = from > to;
    var min = reverse ? to : from;
    var max = reverse ? from : to;

    var years = Enumerable.Range(min, max - min);

    if (reverse) {
        years = years.Reverse();
    }

    return years.Select(year => new SelectListItem {
        Value = year.ToString(),
        Text = year.ToString(),
        Selected = value.Equals(year),
    });
} 
```

**采用：**

```
Years(DateTime.Now.Year, DateTime.Now.Year + 4)
/* result: (currently 2018)
   2018
   2019
   2020
   2021
*/

Years(DateTime.Now.Year + 4, DateTime.Now.Year, 2019)
/* result: (currently 2018)
   2021
   2020
   2019 (selected)
   2018
*/ 
```

# python - 从两个列表创建一个字典，然后在 python 中打印数据

> ID：13959107
> 
> 赞同：0
> 
> 时间：2012-12-19T18:51:39.127
> 
> 标签：python, list, dictionary, for-loop

我是 python 新手，正在尝试掌握一些东西。我想从两个列表中创建一个字典。我有两组数据：

```
Person  |    Name
--------|--------
1       |   Jimmy
2       |    Mike
3       | Stanley
4       |    Will 
```

我在列表中都有这两个，一个叫做“人”，一个叫做“名字”。我在一个脚本中执行此操作，该脚本通过多个文件来提取数据。每个列表的长度不同，其中包含不同的数据。本质上，我想做的是像这样打印数据：

```
1 \t Jimmy
2 \t Mike
3 \t Stanley
4 \t Will 
```

我从 xml 文件中提取数据，这是我用来提取数据的代码：

```
for people in xml.iter('people'):
  person.append(people.find('person').text)
  name.append(people.find('name').text) 
```

到目前为止，脚本运行良好，我可以分别打印出这两个列表。我不知道如何将它们一起打印出来，所以我的想法是将它们存储到字典中，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:54:58.423

如果您只想打印可以使用的两个列表`zip` [(doc)](http://docs.python.org/2/library/functions.html#zip)

```
for num,name in zip(num_list,name_list):
    print str(num) + '\t' + name 
```

您可以使用相同的形式将这些对放入字典中（在您拥有列表之后）

```
name_dict = {}
for num,name in zip(num_list,name_list):
    name_dict[num] = name 
```

然后打印

```
for num,name in name_dict.iteritems():
    print str(num) + '\t' + name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:54:54.797

我认为您在这里不需要字典。要将列表的元素配对在一起，只需使用[zip](http://docs.python.org/2/library/functions.html#zip)：

```
In [27]: zip(person, name)
Out[27]: [(1, 'Jimmy'), (2, 'Mike'), (3, 'Stanley'), (4, 'Will')] 
```

* * *

例如，

```
person = [1,2,3,4]
name = ['Jimmy', 'Mike', 'Stanley', 'Will']
for p, n in zip(person, name):
    print('{p}\t{n}'.format(p = p, n = n)) 
```

产量

```
1   Jimmy
2   Mike
3   Stanley
4   Will 
```

* * *

PS。如果出于某种原因，您确实想要一个 dict，那么它也很容易形成：

```
In [28]: dict(zip(person, name))
Out[28]: {1: 'Jimmy', 2: 'Mike', 3: 'Stanley', 4: 'Will'} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T18:54:14.000

在基本的python中。

```
people_dict = {}
for people in xml.iter('people'):
  person = people.find('person').text
  name = people.find('name').text
  people_dict[name] = person 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:54:59.493

使用 zip 内置函数创建字典：

```
dct = dict(zip(person, name)) 
```

然后打印字典，你可以这样做：

```
for k in dct:
    print '%s\t%s' % (k, dct[k]) 
```

祝你好运

麦克风

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T18:57:48.397

如果您只需将它们一起打印出来，那么元组列表可能比字典更合适，因为字典不保持顺序。您可以这样做：

```
people = []
for person in xml.iter('people'):
    people.append((person.find('person').text, person.find('name').text)) 
```

然后打印：

```
for p, name in people:
    print p + '\t' + name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T18:58:07.880

使用[zip](http://docs.python.org/2/library/functions.html#zip)内置函数。

```
In [3]: person = range(1,5)

In [4]: name = ['Jimmy', 'Mike', 'Stanley', 'Will']

In [5]: zip(person, name)
Out[5]: [(1, 'Jimmy'), (2, 'Mike'), (3, 'Stanley'), (4, 'Will')]

In [6]: for p,n in zip(person, name):
   ...:     print p, '\t', n
   ...:     
1   Jimmy
2   Mike
3   Stanley
4   Will 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T18:59:23.053

如果您使用的是 Python 2.7 或更新版本，则可以使用[字典](http://infohost.nmt.edu/tcc/help/pubs/python/web/dict-comprehensions.html)推导式。对于您的特定情况，它们可能有点矫枉过正，但它们是一种很好的技术，可以优雅地了解和解决这个问题。

# google-apps-script - 计算列的总和

> ID：13959109
> 
> 赞同：0
> 
> 时间：2012-12-19T18:51:53.133
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，上面有分数，然后是球员，需要拿比赛的分数，把球员所在球队的分数放在一起，然后把所有 10 场比赛加在一起。我在每场比赛的每个单元格中使用 = IF ( B7 =1, Left(C6, 2), Right(C6, 2)) end 不再起作用。当使用 if then 提取正确的数字时，如何获得该总和列以将我需要的每个单元格相加？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:10:44.597

=数组公式（值（如果（X7：X18 = 1，左（Y6：Y6，2），右（Y6：Y6，2））））

问题是我没有使用 value 所以当它试图计算这条线时它没有任何东西要计算！

# facebook - Facebook 旧网站 og:image cahced

> ID：13959110
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:51:55.403
> 
> 标签：facebook, caching, metadata

我最近重新设计了我的网站，其中一项更改是使用`index.php`而不是`index.html`将`og:image`元数据属性之一从更改`favicon_1.jpg`为`favicon.jpg`。

`og:image`现在，即使在我使用了 url linter 之后，facebook 仍然显示 old 。

这就是[“刮板看到的”](http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fiulianonofrei.com)：

> `<meta property="og:image" content="http://iulianonofrei.com/images/favicon.jpg">
> <meta property="og:image" content="http://iulianonofrei.com/images/macro/splinter.jpg">`

这是[图形 API](http://graph.facebook.com/10150209588122211)：

> `"image": [
> {
> "url": "http://iulianonofrei.com/images/favicon_1.jpg"
> },
> {
> "url": "http://iulianonofrei.com/images/macro/grass_2_t.jpg"
> }`

如何更新链接以显示当前链接？另外，第二个是由 php 生成的，所以我希望它记录更新，或者至少在我通过 linter 运行它时正确更新。

而且我有一个[警告](http://developers.facebook.com/tools/debug/og/object?q=iulianonofrei.com)，我无法弄清楚，这让我很恼火！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:14:13.683

我自己找到了。我需要将`og:url`from更改`http://example.com`为`http://example.com/index.php`.

# unit-testing - CasperJS 在点击事件和 assertEquals 上使用 CoffeeScript 失败

> ID：13959111
> 
> 赞同：0
> 
> 时间：2012-12-19T18:51:57.640
> 
> 标签：unit-testing, coffeescript, playframework-2.0, casperjs

我有一些 CoffeeScript 文件，我正尝试在 Play 中使用 CasperJS 进行测试！带有 Java 的框架。几个不同的测试都失败了，我不知道为什么。第一种测试是处理`click`事件。我们正在使用：

```
casper.start(casper.uri("/starting/url"))
casper.then ->
  casper.click "#start-hsa-app-button" 
```

这给了我错误：

```
CasperError: Cannot dispatch click event on nonexistent selector: #start-hsa-app-button 
```

`id` `#start-hsa-app-button`肯定存在的链接。

第二个错误是使用`assertEquals`. 上述步骤之后的第二步是：

```
casper.then ->
  @test.comment "US / non-US address switching"
  @assertNotVisible  "#address3"
  @assertVisible "#city"
  @assertVisible "#state"
  @assertVisible "#zip"
  @test.comment "click #nonUsAddress on"
  @click "#nonUsAddress"
  @assertVisible "#address3"
  @assertNotVisible "#city"
  @assertNotVisible "#state"
  @assertNotVisible "#zip"
  @test.comment "click #nonUsAddress off"
  @click "#nonUsAddress" 
```

所有断言都返回`null`：

```
# US / non-US address switching
FAIL #address3 not visible
#    type: assertEquals
#    subject: null
#    expected: false
FAIL #city visible
#    type: assertEquals
#    subject: null
#    expected: true
FAIL #state visible
#    type: assertEquals
#    subject: null
#    expected: true
FAIL #zip visible
#    type: assertEquals
#    subject: null
#    expected: true
# click #nonUsAddress on
FAIL #coverageType_I not checked
#    type: assertEquals
#    subject: null
#    expected: false
FAIL #coverageGroupName not visible
#    type: assertEquals
#    subject: null
#    expected: false
FAIL #coverageGroupNumber not visible
#    type: assertEquals
#    subject: null
#    expected: false 
```

所以对我来说，似乎`asserts`正在`null`返回而不是预期值。我的 CoffeeScript 有任何错误吗？我是新手，所以我不能说我确定我做事正确。还是 Play!、CasperJS 和 CoffeeScript 之间的其他交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:07:35.253

事实证明，当我在做这个时，另一个开发人员正在做我试图使用的测试。一旦他完成了一切工作。*脸-手掌*

# java - 在restful webservice中的代码集转换期间检测到无效的unicode对

> ID：13959114
> 
> 赞同：0
> 
> 时间：2012-12-19T18:52:07.873
> 
> 标签：java, web-services, rest, character-encoding

我正在尝试从 oracle db 中检索 blob 对象。blob 对象表示存储在 oracle db 中的 word 文档。

我检索 blob 并使用 utf8 编码转换为 java 字节，然后传递给一个安静的 web 服务。Restful webservice 接收 blob 对象并作为 json 传递给另一个客户端。此时我得到以下异常。任何人都可以帮忙解决这个问题吗？

```
org.omg.CORBA.DATA_CONVERSION: WARNING: IOP02410006: Invalid unicode pair detected during code set conversion  vmcid: OMG  minor code: 6  completed: No
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)at java.lang.reflect.Constructor.newInstance(Constructor.java:513)at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)  at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387) at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99) at $Proxy200.badUnicodePair(Unknown Source) at com.sun.corba.ee.impl.encoding.CodeSetConversion$JavaCTBConverter.convertCharArray(CodeSetConversion.java:335)   at com.sun.corba.ee.impl.encoding.CodeSetConversion$JavaCTBConverter.convert(CodeSetConversion.java:250)    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_2.write_wstring(CDROutputStream_1_2.java:470)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeWStringValue(CDROutputStream_1_0.java:737)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:956)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at tputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl$14.write(DynamicMethodMarshallerImpl.java:394)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:200)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at gov.ca.lc.refdata.__VotesRefDataBeanRemote_Remote_DynamicStub.getBillAnalysis(gov/ca/lc/refdata/__VotesRefDataBeanRemote_Remote_DynamicStub.java)
    at gov.ca.lc.refdata._VotesRefDataBeanRemote_Wrapper.getBillAnalysis(gov/ca/lc/refdata/_VotesRefDataBeanRemote_Wrapper.java)
    at gov.ca.lc.refdata.VotesWS.getBillAnalysis(VotesWS.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.nio.charset.MalformedInputException: Input length = 1
    at java.nio.charset.CoderResult.throwException(CoderResult.java:260)
    at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:781)
    at com.sun.corba.ee.impl.encoding.CodeSetConversion$JavaCTBConverter.convertCharArray(CodeSetConversion.java:324)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_2.write_wstring(CDROutputStream_1_2.java:470)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeWStringValue(CDROutputStream_1_0.java:738)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:956)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:977)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:528)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:775)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:977)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_abstract_interface(CDROutputStream_1_0.java:692)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_abstract_interface(CDROutputObject.java:546)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.writeAbstractObject(Util.java:494)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectOverride(IIOPOutputStream.java:176)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:327)
    at java.util.LinkedList.writeObject(LinkedList.java:942)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.invokeObjectWriter(IIOPOutputStream.java:646)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:612)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:27:35.073

该代码正在引发异常，因为它正在验证某些字符数据是否有效。并非所有代码单元序列都形成 Unicode 编码中的有效代码点。

字符串不是二进制安全的，因为将`byte`数据转换为`char`数据涉及转码操作。输入`byte`数据必须符合转码器预期的编码或数据丢失结果。

> blob 对象表示存储在 oracle db 中的 word 文档。
> 
> 我检索 blob 并使用 utf8 编码转换为 java 字节，然后传递给一个安静的 web 服务。
> 
> Restful webservice 接收 blob 对象并作为 json 传递给另一个客户端。

二进制 Word 文档不能在不丢失数据的情况下翻译成字符数据，至少在不将其编码为[Base64](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://en.wikipedia.org/wiki/Base64&ei=_vHSULHjF-iY1AWJyYGACg&usg=AFQjCNFxJAMXAr4Jc-0wQvhcp_q4nZlf5w&bvm=bv.1355534169,d.d2k)之类的形式时不能。如果您将文件编码为 Base64，那么接收器将需要知道如何对其进行解码。

我对所涉及的转换的理解：

```
BLOB (bytes)
   > String (data is already corrupt here)
          > UTF-8 bytes 
                      > String
                             > JSON
                                  > junk 
```

这种设计是有缺陷的。

这会更好：

```
BLOB (bytes)
   > Base64 String
                 > UTF-8 bytes
                             > Base64 String
                                           > JSON
                                                > Base64 String
                                                              > BLOB 
```

这可能不是您所需要的，但关键是所有转换都必须是互惠且无损的。

*请注意，JSON 始终以 Unicode 转换格式编码，或者根据定义它不是 JSON。默认值为规范定义的 UTF-8。*

# c# - 如何与 Linq 一起拆分？

> ID：13959117
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:52:12.117
> 
> 标签：c#, linq

我在包含状态数据的数据库表中有一列，例如`33:Rio de Janeiro`. 我想`33`使用 LINQ 表达式提取代码。这是我的代码。

```
public string command(string query)
{
    string res = string.Empty;
    MySqlConnection conn = new MySqlConnection(MysqlConnect());
    MySqlCommand cmd = new MySqlCommand(query,conn);
    res = cmd.ExecuteScalar().ToString();
    conn.Close();
    return res;
} 
```

在这里，我想获取状态的代码。

```
string code = db.command("select cidade from logos ")
                .Split(':')
                .Where(<Expression to get the first part>); 
```

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:54:08.317

```
string code=db.command("select cidade from logos ").Split(':').First() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:56:19.847

可能是这样的：

```
string code=db.command("select cidade from logos ").Split(':').First() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:54:12.987

您可以使用[`Enumerable.First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)：

```
string code = db.command("select cidade from logos").Split(':').First(); 
```

或者简单地按索引获取第一项：

```
string code = db.command("select cidade from logos").Split(':')[0]; 
```

# android - 不同屏幕分辨率但相同尺寸的平板电脑的 Android 布局

> ID：13959125
> 
> 赞同：1
> 
> 时间：2012-12-19T18:52:44.603
> 
> 标签：android, resolution

我开发了一款适用于 10 英寸平板电脑的应用程序。我在三种不同的平板电脑上进行了设计测试：

三星 Galaxy Tab 2 (1280*800) Arnova 10g2 (1024*600) Arnova 10bg3 (1024*600)

我区分了 layout-large 和 layout-xlarge

我的问题是 Galaxy 选项卡使用 xlarge 中定义的布局 Arnova 10 g2 使用 xlarge 中定义的布局 Arnova 10 bg3 使用 large 中定义的布局

由于屏幕分辨率不同，我知道 Arnova 10bg3 和三星没有使用相同的布局类别。

但我不明白为什么 Arnova 10g2 使用 xlarge 布局，而它的屏幕定义与其他 Arnova 相同。

这导致我的问题是 1280 * 800 的设计在 Arnova 上没有得到很好的应用。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:17:37.203

有两个`600 * 1024`分辨率屏幕。

所以当你想区分你的布局时，你必须在布局目录创建中使用以下方法。

1) 低密度超大屏 `layout-xlarge-ldpi`
2) 中密度大屏 `layout-large-mdpi`

因此，当您想为特定分辨率创建特定布局屏幕时，您必须使用`layout-<screen-size>-<density>`

![多屏支持](../Images/ac5c4ac60f09fba1e2c10a1a9940b787.png)

# android - AVD 管理器 - 无法创建 Android 虚拟设备

> ID：13959128
> 
> 赞同：107
> 
> 时间：2012-12-19T18:52:59.133
> 
> 标签：android, eclipse

我昨天刚刚安装了来自 Google 的 Android Eclipse 插件和 Android SDK。我通过转到打开 AVD 管理器窗口`Window -> Android Virtual Device Manager`。然后我单击“新建”并显示“创建新的 Android 虚拟设备 (AVD)”窗口。问题是，我无法让“确定”按钮不显示为灰色。我从“设备”中选择 Nexus 7，给 AVD 命名，选择“Android 4.2 API Level 17”作为目标。无论我对其余设置做什么，“确定”按钮仍然是灰色的。我没有遇到任何错误。关于我可能缺少什么以及为什么窗口不允许我通过单击“确定”继续进行的任何想法？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-12-19T18:57:16.880

您要么没有在目标下方的下拉列表中选择 CPU/ABI 目标，要么没有安装系统映像。打开您的 SDK 管理器并确保您已安装`ARM EABI v7a System Image`在 Android 4.2 部分下。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-27T17:02:20.027

我在创建 AVD 时遇到了麻烦。

任何一个：

*   从 SDK 管理器安装 SDK 版本后重新启动 eclipse，或者
*   您应该在 Eclipse 之外运行“AVD Manager.exe”

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-01-24T09:50:41.340

首先，确保“AVD 名称”字段中没有空格（或其他非法字符，如 '+'、'='、'/' 等）。空间为我打破了它。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-03-07T09:52:40.863

尽管安装了所有必需的软件包，但我遇到了同样的问题。我关闭了 Eclipse，在 \android-sdks\tools\ 文件夹中运行了 monitor.bat，从那里打开了 AVD 管理器，我可以在这里创建虚拟设备。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-08-03T21:14:30.310

您需要避免 AVD 名称中的空格。& 选择“皮肤”选项。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-09T05:28:26.717

尝试使用`monitor.bat`in创建一个 AVD `tools-folder`，这对我有用！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-09-01T02:32:21.027

另一件事让我感到困惑：“名称”字段必须是一个单词，并且不能有空格！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-22T20:21:12.833

遇到了完全相同的麻烦……加载 ARM EABI v7a 系统映像也对我有用。非常感谢。

我之前在 Android SDK 管理器上看到，在我的系统上安装了一个具有相同名称的系统映像（ARM EABI v7a 系统映像），用于更新的 SDK（Android 4.2）。因此，我认为它不需要安装早期的 Android 2.2 SDK ARM 映像，但显然不是。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-03-03T06:40:43.993

我遇到了同样的问题，但现在我明白了：检查您选择的 API 以及该**API 版本**是否可用**CPU/ABI**。如果它可用，那么你的工作就完成了。根据支持的窗口选择设备。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-05-02T05:39:51.153

您需要打开 SDK 管理器并确保已安装所有内容，尤其是系统映像。以后就好了！

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-03-14T11:32:05.623

如果您以某种方式更改了 SDK 路径，它将无法找到您安装的 SDK，即使它可以正常列出它们。

我通过 openig Android SDK Manager 解决了问题，并在该对话框中选择了菜单 Tools -> Manage AVDs。当您直接从 Eclipse 的工具栏打开 Manage AVDs 时，您应该刷新以查看您创建的 AVD。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-12-12T17:39:05.560

我实际上在一周前遇到了这个问题。该问题与未将 Android SDK 插件的更新 Eclipse 版本与最新版本的 SDK 一起使用有关。总的来说，这是一个有趣的问题，但我一更新它就消失了。

我什至更新了 AVD 图像，但没有运气。显然旧插件看不到新的图像布局或其他东西。这适用于 SDK 的 22.3 版本。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-01-03T15:48:55.540

在 Kubuntu 12.04、Eclipse Kepler、ADT 上，我遇到了同样的症状。ARM EABI v7a 系统映像已安装。出路是从命令行运行该工具，然后它没有抱怨。我想重新启动 Eclipse 可以解决问题，但我不确定我是否尝试过 dit。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-16T05:47:01.167

我在 android-sdks\tools 中打开了 monitor.bat 并在那里启动了设备管理器，我能够创建 AVD。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-14T04:31:18.100

**从 Visual Studio 2015 启动 AVD 管理器为我解决了这个问题。**

我已经（很多包）**安装了所有必需的包，**但有一段时间没有使用它们，并且在 SDK 管理器中**检测到它们时遇到问题。**我尝试了上面提供的所有解决方案均无济于事，包括在“android/sdk/tools”中运行 monitor.bat 文件后运行 AVD。

然后我在“工具->Android->Android 模拟器管理器”中从 VS 启动 AVD，它立即检测到“Google APIs Intel Atom x86”和 ARM EABI v7a 系统图像*！*

目标设置为 API 级别 23。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-03-14T04:08:27.803

如果您在创建 AVD 时遇到问题，只需尝试将其放在一个新文件夹（eclipse、android sdk、avd）中，然后您只需运行它就可以了。只需在该文件夹中打开 Eclipse 并照常运行

# sql - 使用多维数据集/分组集进行汇总时的数据排序

> ID：13959129
> 
> 赞同：1
> 
> 时间：2012-12-19T18:53:01.640
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个简单的查询

```
select distinct m.STATE_CD, m.sex,SUM(c.cost) as TotalCost
    from members as m
    inner join claims as c on c.patid=m.PATID
    group by cube(m.STATE_CD,m.sex)
    order by m.STATE_CD 
```

它返回一个结果集，如

![在此处输入图像描述](../Images/b4c35406eaf6241c864478d22436535e.png)

我想以`STATE_CD`现在的方式排序，但是有没有办法让 NULLS 位于结果集的底部，并且`STATE_CD`列仍然按字母顺序排列，而不添加 CASE 语句来将 NULL 更改为某些东西按字母顺序排在最后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:59:36.110

按顺序使用 ISNULL：

```
DECLARE @test TABLE (STATE CHAR(2));

INSERT @test (STATE)
SELECT NULL
UNION ALL
SELECT 'AK'
UNION ALL
SELECT 'AL'
UNION ALL 
SELECT 'AR';

/*Returns null first*/
SELECT * FROM @test ORDER BY STATE

/*Returns null last*/
SELECT * FROM @test ORDER BY ISNULL(STATE,'ZZ'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:59:04.367

这应该这样做：

`ORDER BY CASE WHEN m.STATE_CD IS NULL THEN 2 ELSE 1 END, m.STATE_CD`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:59:53.603

您是否必须使用多维数据集分组来进行分层突破？一般来说，我相信它列出了成为空值的分组。你能不能只列出'group by with m.State, m.sex'，然后列出一个谓词'where m.state is not null'。可能的修复。

除此之外，您将不得不做一些事情来将空值定义为我猜的分组。类似于 isnull(m.State_CD, 'Totals') 如果您确定所有空值都代表集合的总数。如果您想将它们放在底部但想稍后重命名它们，您始终可以在 cte、临时表、嵌套选择等的集合中重命名它们。然后稍后重新标记它们。

# mysql - 从 X.X+1、X+2、X+3、X+4 等返回每个第二个窗口中记录的第一条记录

> ID：13959143
> 
> 赞同：2
> 
> 时间：2012-12-19T18:53:48.667
> 
> 标签：mysql, loops, select

我会尽力解释我的奇怪情况。我有一堆数据记录到十分之一秒。从时间 X 开始，几乎每秒都会发生一个事件。每一秒都被认为是一个“事件窗口”。记录的时间是从 X 开始的经过时间。使用第一条记录作为“种子”，我只需要从 X.X+1、X+2、X+3 返回每隔一秒窗口记录的第一条记录, X+4 等。

```
targets
--------------------------
| id  | time  | name     |
|-----|------ |-----------
| 1   |  1.0  | target01 |
| 2   |  1.1  | target01 |
| 3   |  1.2  | target01 |
| 4   |  1.3  | target01 |
| 5   |  1.4  | target01 |
| 6   |  1.5  | target01 |
| 7   |  1.6  | target01 |
| 8   |  1.7  | target01 |
| 9   |  1.8  | target01 |
| 10  |  1.9  | target01 |
| 11  |  2.0  | target01 |
| 12  |  2.1  | target01 |
| 13  |  2.2  | target01 | 
```

...

```
| 50  |  4.9  | target01 |
| 51  |  5.3  | target01 |
| 52  |  5.4  | target01 |
| 53  |  5.5  | target01 |
| 54  |  5.6  | target01 |
| 55  |  5.7  | target01 |
| 56  |  5.8  | target01 |
| 57  |  5.9  | target01 |
| 58  |  6.0  | target01 |
| 59  |  6.1  | target01 |
| 60  |  6.2  | target01 |
| 61  |  6.3  | target01 |
| 62  |  6.4  | target01 |
-------------------------- 
```

我将如何得到这个作为回报：

```
--------------------------
| id  | time  | name     |
|-----|------ |-----------
| 1   |  1.0  | target01 |
| 11  |  2.0  | target01 |
| 21  |  3.0  | target01 |
| 31  |  4.0  | target01 |
| 51  |  5.3  | target01 |
| 58  |  6.0  | target01 |
-------------------------- 
```

请注意，记录 51 位于 5.3 秒处。它是落在该四秒窗口 (X+4) 内的第一条记录。

糟糕的数据库规划，但我被困在继承混乱中。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:26:05.313

[你需要像Rank()](http://msdn.microsoft.com/en-us/library/ms176102.aspx)这样的分析函数，但我很确定 MySQL 不会这样做。

```
select Id, Time, Name
from
(
    SELECT Id, Time, Name, 
           Rank() OVER(PARTITION BY Floor(time) ORDER BY time Asc) AS Rank
    FROM  @aTable
) SubSelect
where Rank = 1 
```

[您可以在 data.stackexchange.com 上查看示例。](https://data.stackexchange.com/stackoverflow/query/89397/return-the-first-record-that-is-logged-in-each-one-second-window-from-x-x1-x2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:03:00.843

鉴于该`time`列是数字，并且 没有“重复”值`time`，那么这样的事情将起作用：

```
SELECT d.id
     , d.time
     , d.name
  FROM mytable d
  JOIN ( SELECT MIN(t.time) AS `time`
           FROM mytable t
          GROUP BY FLOOR(t.time)
       ) m
    ON m.time = d.time
 ORDER BY d.time 
```

（对于该查询，如果在一秒钟内最低值存在“重复”值`time`，则将返回这两行。这可以通过`GROUP BY`最外层查询上的简单查询来解决，只要它们中的哪一个是任意的返回行。

（该查询将返回您指定的结果集。不清楚您是否也想要这个“按名称”，所以我省略了。

* * *

请注意，还有一些其他方法，其中一些在大型集合上表现得更好。

* * *

另一种（特定于 MySQL 的）方法使用用户变量：

```
SELECT t.id
     , t.time
     , t.name
  FROM ( SELECT s.id
              , s.time
              , s.name
              , @prev AS `prev_sec`
              , @prev := FLOOR(s.time) AS `this_sec`
           FROM targets s
           JOIN (SELECT @prev := '') p
          ORDER BY s.time
       ) t
 WHERE prev_sec <> this_sec 
```

（谨慎使用 SQL 语句中的用户变量。可以在行为可预测的情况下构造语句，但有时行为是“出乎意料的”，如果不了解执行计划、步骤运行的顺序和变量将在哪一步被设置。

* * *

另一种（通常性能较慢）的替代方法是使用`NOT EXISTS`谓词来排除在同一秒内有“较早”时间的行。

有时，如果查询正在提取一小组时间值（即，严格的行范围，例如从一年的数据中提取一小时的行）并且如果适当索引可用，尤其是覆盖索引，或至少一个以`time`作为前导列的索引。

```
SELECT t.id
     , t.time
     , t.name
  FROM targets t
 WHERE NOT EXISTS
       ( SELECT 1
           FROM targets e
          WHERE e.time >= FLOOR(t.time)
            AND e.time < t.time
       )
 ORDER
    BY t.time 
```

`time`（此查询与答案中给出的第一个查询一样，如果这些`time`值在任何一秒内都是最低的，也将返回两行或多行具有重复值的行。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:58:04.880

做这个：

```
select * from (
    select * from targets
    order by time) x
group by floor(time) 
```

[看到这个在 SQLFiddle 上工作](http://sqlfiddle.com/#!2/f4f76/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:58:52.823

您可能需要使用`FLOOR`and`COALESCE`函数

```
SELECT FLOOR(time) AS whole_second, COALESECE(id), COALESCE(time), COALESCE(name)
FROM table
GROUP BY whole_second
ORDER BY whole_second ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:09:46.073

尝试这个：

```
select *
from targets t
where time % 1 = (
  select min(time % 1) 
  from targets 
  where floor(time) = floor(t.time)) 
```

[SQLFiddle](http://www.sqlfiddle.com/#!2/02a10/8)

# javascript - nvd3中的线+散点图

> ID：13959156
> 
> 赞同：7
> 
> 时间：2012-12-19T18:54:19.213
> 
> 标签：javascript, nvd3.js

是否可以在 nvd3.js 中组合折线图 + 散点图，而无需像示例和代码中使用 linePlusBarChart 那样构建新模型？或者这是您可以组合图表类型的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-30T08:35:47.847

看看这个小提琴，给你一些想法

```
<code><a href="http://jsfiddle.net/7b48nzkm/">fiddle</a></code> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T03:26:33.617

有一个[scatterPlusLineChart](https://github.com/novus/nvd3/blob/master/examples/scatterPlusLineChart.html)模型，但我无法让它很好地适用于我的数据。如果您只想向折线图添加标记，请参阅[是否可以使用带有标记的 NVD3 线图？](/questions/13732971)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T03:33:46.387

我认为您可以通过更改不同系列折线图中路径和点（圆）的样式来做到这一点。

# php - 使用 Codeigniter 和 WAMP 通过 gmail 发送电子邮件

> ID：13959159
> 
> 赞同：1
> 
> 时间：2012-12-19T18:54:35.483
> 
> 标签：php, codeigniter, email, wamp

```
 $config = Array(
            'protocol' => 'smtp',
            'smtp_host' => 'ssl://smtp.googlemail.com',
            'smtp_port' => 465,
            'smtp_user' => 'xxx',
            'smtp_pass' => 'xxx',
            'mailtype'  => 'html', 
            'charset'   => 'iso-8859-1'
        );
        $this->load->library('email', $config);
        $this->email->set_newline("\r\n");

        $this->email->from('me@gmail.com','me');
        $this->email->to($this->input->post('email'));
        $this->email->subject("Confirm your account.");

        $message = '<p>Thank you for signing up!</p>';
        $message .= '<p><a href="';
        $message .= base_url();
        $message .= 'main/register_user';
        $message .= $key;
        $message .= '">Click here!</a>to sign up</p>';
        $this->email->message($message); 
```

我正在 youtube 上关注 phpacademy 的一些 Codeigniter 教程。其中一个教程让您通过电子邮件将唯一密钥发送给用户，以便他们可以注册。我正在尝试通过 gmail 帐户发送，使用其他问题和 CI 论坛，我已经获得了上面的代码，但我收到以下错误：

> 消息：fsockopen() [function.fsockopen]：无法连接到 >ssl://smtp.googlemail.com:465（无法找到套接字传输“ssl” - 您是否忘记在配置 PHP 时启用它？ )
> 
> 文件名：库/Email.php

--

> 消息：fwrite() 期望参数 1 是资源，给定的布尔值
> 
> 文件名：库/Email.php

--

> 消息：fgets() 期望参数 1 是资源，给定的布尔值
> 
> 文件名：库/Email.php

我不知道正确设置它需要采取的确切步骤。另外，当我将它从本地移动到实际的网络主机时，它是否仍能与我的 gmail 一起正常工作？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:56:52.997

您尝试通过 SSL 连接，那么您应该`php_openssl.dll`在**php.ini**中激活 OpenSSL 模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:58:29.897

确保您在 apache 服务器上激活了 mod_ssl

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T17:35:12.573

代码如下：

```
$mail->SMTPSecure = 'tls'; // secure transfer enabled REQUIRED for GMail<br/>
$mail->Host = 'smtp.gmail.com';<br/>
$mail->Port = 587; 
```

除此之外，像这样配置你的 apache 和 wamp：

1.  `extension=php_openssl.dll`在 php.ini 文件中 取消注释
2.  检查`ssl_module`apache 模块中的活动

# android - 旋转时调用 DatePickerDialog onDateSet

> ID：13959164
> 
> 赞同：8
> 
> 时间：2012-12-19T18:54:50.693
> 
> 标签：android, android-fragments, android-lifecycle

我正在使用 DialogFragment 在 onCreateDialog() 中返回 DatePickerDialog。我已将 dateSetListener 设置为 DialogFragment （在下面的示例中为“this”），除了在屏幕旋转发生时调用 onDateSet() 之外，一切正常，这是不可取的。如何在屏幕旋转时不调用 onDateSet？

**我的对话片段**

```
public static class DateDialogFragment extends DialogFragment implements
DatePickerDialog.OnDateSetListener{

    public static DateDialogFragment newInstance() {
        return new DateDialogFragment();
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new DatePickerDialog(getActivity(), this, 2012, 11, 19);
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
        //This is called when screen rotated, which I dont want
        Toast.makeText(getActivity(), "Year: "+year+" Month: "+monthOfYear+" Day: "+dayOfMonth, Toast.LENGTH_SHORT).show();
    }

} 
```

**这就是我所说的**

```
if(getActivity()!=null){
    FragmentManager fm = getActivity().getSupportFragmentManager();
    DialogFragment newFragment = DateDialogFragment.newInstance();
    newFragment.show(fm, "dialog");
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-24T13:55:00.350

在`onDateSet`方法中，使用[Activity::isChangingConfigurations](http://developer.android.com/reference/android/app/Activity.html#isChangingConfigurations%28%29)`Activity`检查是否因配置更改而重新启动。如果是，则不显示.`Toast`

```
@Override
public void onDateSet(android.widget.DatePicker view, int year, int monthOfYear, int dayOfMonth) {
    if( ! this.getActivity().isChangingConfigurations() ) {
        // Dialog is dismissed by user explicitly, hence show the Toast message.       
        Toast.makeText(getActivity(), "Year: "+year+" Month: "+monthOfYear+" Day: "+dayOfMonth, Toast.LENGTH_SHORT).show();
    }
} 
```

我已经对其进行了测试并且可以完美运行。让我知道是否需要任何进一步的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-24T16:08:59.573

您可以尝试在对话框的附加/分离回调中使用标志。这个想法是在对话框尚未附加到窗口时取消侦听器的任何触发（因此更改不可能来自用户），例如恢复（我认为这是再次调用侦听器的原因):

```
// a field in the DateDialogFragment
private boolean mShouldBeCanceled = true; // cancel the listener when this is true(the default)

//...
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
     return new DatePickerDialog(getActivity(), this, 2012, 11, 19) {

                @Override
                public void onAttachedToWindow() {
                    mShouldBeCanceled = false;
                }

                @Override
                public void onDetachedFromWindow() {
                    mShouldBeCanceled = true;
                }
     };
} 
```

并在侦听器中使用标志（由于侦听器仅在构造函数中初始化）：

```
@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
    int dayOfMonth) {
    if (mShouldBeCanceled) {
            return; // not a valid listener triggering
    }
    //This is called when screen rotated, which I dont want
    Toast.makeText(getActivity(), "Year: "+year+" Month: "+monthOfYear+" Day: "+dayOfMonth, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-30T01:06:39.347

实现的方式是，如果已注册`DatePickerDialog`，它将通知`DataSet`更改。`onStop``OnDateSetListener`

您还可以看到在显示`onDateSet`时按下后退键时调用`DatePickerDialog`（不仅是方向）

原因，当您创建`DatePickerDialog`实例时，您已经注册了回调监听器。

所以最好的方法是创建一个`custom Dialog`扩展`DatePickerDialog`并覆盖`onStop`

**自定义日期选择器对话框**

```
 private static class CustomDatePickerDialog extends DatePickerDialog{

    public CustomDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
    }

    @Override
    protected void onStop() {
        return;
    }
} 
```

最后，更改`CreateDialog`为

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new CustomDatePickerDialog(getActivity(), this, 2012, 11, 19);
    } 
```

这应该可以完美地工作。如果您发现任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-29T18:32:35.450

尝试更换线路

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
         return new DatePickerDialog(getActivity(), this, 2012, 11, 19);
    } 
```

经过

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
     super.onCreateDialog(savedInstanceState);
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T20:43:58.023

将此属性添加到清单中的活动

```
android:configChanges="keyboardHidden|orientation" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-19T19:23:55.407

当屏幕旋转时，活动被销毁并重新创建，每次都会创建一个新片段。避免此问题的一种方法是更改​​代码中 if(getActivity()!=null) 语句的位置。将其放置在不受活动娱乐影响的地方（不在 OnCreate 方法中）。

# php - 使用codeigniter的多个图像

> ID：13959169
> 
> 赞同：2
> 
> 时间：2012-12-19T18:54:58.863
> 
> 标签：php, mysql, codeigniter, multifile-uploader

```
 <?=form_open_multipart('upload/process');?>
    <input type="file" multiple="multiple" name="userfile[]" id="userfile" />
    <?=form_submit('upload', 'Upload');?>
<?=form_close();?> 
```

我不想使用uploadify 或类似的图片上传插件。试图让它尽可能轻

我希望用户能够一次上传多张图片。上传后，我想在数据库中输入图像详细信息，最后将图像移动到上传文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:21:51.060

看看这里的解决方案：

[http://www.indevcenter.com/simple-multiple-upload-using-codeigniter/](http://www.indevcenter.com/simple-multiple-upload-using-codeigniter/)

我相信这就是你所需要的。:)

干杯。

# php - JSON发送问题

> ID：13959172
> 
> 赞同：1
> 
> 时间：2012-12-19T18:55:11.927
> 
> 标签：php, wordpress, jquery

嘿伙计们，所以我试图让一个 JSON 将一个值发送到 wordpress 中的另一个页面，以便在单击图像后创建一个会话。

这是 JSON 代码：

```
$('.item-post a').click(function() {
        var prodname = $('#hiddenpostitle');

           $.post('/overviewcheck-515adfzx8522', 
            { 
                'ProdName': prodname.val()

            },
            function(response) {

            },
            'json'
        );
    }); 
```

#hiddenposttitle 如下：`<?php echo "<input type='hidden' value='$title' id='hiddenpostitle' name='hiddenpostitle'/> "?>`

因此，这将发送到 overviewcheck 页面，然后该页面具有一个模板，该模板具有以下内容：

```
<?php
/*
Template Name: overviewbackcheck
*/
session_start();

$prodname= $_POST['ProdName'];

$_SESSION['overviewprod'] = $prodname;

?> 
```

有人提到了一些关于 wordpress 通过调用 session_start() 来破坏会话的事情，但这不是问题，因为我前段时间修复了这个问题，并且让其他会话可以正常工作。它必须与 JSOn 发送有关，我不确定。

从这里打开概述页面，其中包含以下内容：

```
$(function()
    {
        $('.item-post a').colorbox({opacity:0.3, href:"../overviewa512454dzdtfa"});
    }); 
```

这是将在我拥有的文件中打开文件的颜色框代码：

```
<?php echo $_SESSION['overviewprod']; ?> 
```

呼应出来。

最终，我无法回显会话，并且似乎没有做任何事情。

如果你能帮助我，那就太棒了，因为我需要完成这个！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:15:08.993

您需要澄清程序流程。什么时候加载什么？

“我正在尝试通过一个值发送 JSON”。JSON 是一种数据格式，而不是一种方法。JSON不能发送任何东西，它可以发送。

如果您调试 JavaScript（使用 Chrome 开发者工具或 Firefox 中的 Firebug），您的 onclick 函数中有产品名称吗？

```
$('.item-post a').click(function() {
    var prodname = $('#hiddenpostitle');
    alert(prodname.val()); 
```

（您可以检查网络流量，或在“var prodname ...”行设置断点，然后在 prodname 上添加一个监视，将其悬停等，以查看您是否拥有正确的产品名称）

接下来，看看你在服务器端从 AJAX 请求中得到了什么。

```
<?php

/* Template Name: overviewbackcheck */

session_start();
var_dump($_POST);die; // You can see what is dumped here in the Network tab in the browser's Developer tool. 
```

如果您不知道如何使用浏览器调试工具，您可以随时保存到错误日志并阅读它。

```
<?php
error_log(print_r($_POST, true)); 
```

最后，当您从“../overviewa512454dzdtfa”获取代码时，该脚本是否执行 session_start(); 在你这样做之前？

```
<?php echo $_SESSION['overviewprod']; ?> 
```

相比

```
<?php session_start(); echo $_SESSION['overviewprod']; ?> 
```

暂时没有更多的想法，坚持下去。

# java - 什么是比较 JTree 的有效方法？

> ID：13959175
> 
> 赞同：2
> 
> 时间：2012-12-19T18:55:32.270
> 
> 标签：java, swing, compare, jtree

我经常将数据备份到外部驱动器，并且必须筛选我拥有和尚未传输的文件。我认为创建一个允许我选择两个目录，比较它们，然后单击几下按钮将文件传输过来的工具会很有用。

我确信这类项目已经存在，所以对我来说，这主要是一种学习体验。

所以要开始它，我有一个方法可以获取我所有的文件夹和文件，以便我可以填充我的树：

```
public static void listAllFiles(String directory, DefaultMutableTreeNode parent, Boolean recursive) {
    File [] children = new File(directory).listFiles(); 

    for (int i = 0; i < children.length; i++) { 
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(children[i].getName());    

        if (children[i].isDirectory() && recursive) { 
            parent.add(node); 
            listAllFiles(children[i].getPath(), node, recursive);    
        } else if (!children[i].isDirectory()){ 
            parent.add(node); 
        }
    }
} 
```

调用该方法后，我只需创建我的 JTree 并将其添加到我的视图中：

```
myTree = new JTree(parent);
jScrollPane1.setViewportView(myTree); 
```

因此，一旦我有了两个 JTree，我将如何比较节点以查看外部文件中不存在哪些文件？只比较文件数组会更容易吗？

**编辑**

高效，我的意思是在文件树包含数千个文件的情况下，最不可能让计算机陷入困境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:37:40.667

我认为答案是：为什么要比较 JTree 的？JTree 是用于显示数据的 GUI 元素 - 不是用于存储/比较/操作数据的数据结构。

所以你应该做的是想出一个数据结构来比较你的数据，然后使用 JTree 来显示你的比较结果。假设 CPU 资源是您想要节省的资源，我会说您想要使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。

本质上，您将在源文件系统上构建您的项目，然后在目标文件系统上找到（并匹配）它们时`TreeMap`从中删除项目。`TreeMap`完成比较后，您可以在`JTree`.

最重要的是，由于 TreeMap 保证 log(n) 用于`containsKey`、和方法`get`，将花费 nLog(n) 插入源中的所有文件，并花费 nLog(n) 删除（基本上是您的比较）所有目的地的钥匙。`put``remove`

**编辑**

哦，[WinMerge](http://winmerge.org/)是我用于文件系统比较的最佳工具之一。当然，我从来没有用它来同步备份驱动器......

# delphi - FileExists 和修改日期的问题

> ID：13959187
> 
> 赞同：12
> 
> 时间：2012-12-19T18:56:31.553
> 
> 标签：delphi, delphi-7

在我的服务器上有一些修改日期为 31/DEC/1979 的文件（不要问我为什么）。所以`FileExists`返回假。

`Sysutils.FileExists`看起来像这样：

```
function FileAge(const FileName: string): Integer;
var
  Handle: THandle;
  FindData: TWin32FindData;
  LocalFileTime: TFileTime;
begin
  Handle := FindFirstFile(PChar(FileName), FindData);
  if Handle <> INVALID_HANDLE_VALUE then
  begin
    Windows.FindClose(Handle);
    if (FindData.dwFileAttributes and FILE_ATTRIBUTE_DIRECTORY) = 0 then
    begin
      FileTimeToLocalFileTime(FindData.ftLastWriteTime, LocalFileTime);
      if FileTimeToDosDateTime(LocalFileTime, LongRec(Result).Hi,
        LongRec(Result).Lo) then Exit;
    end;
  end;
  Result := -1;
end;

function FileExists(const FileName: string): Boolean;
begin
  Result := FileAge(FileName) <> -1;
end; 
```

我的问题是，为什么函数`FileAge`首先取决于？以下行不够吗？：

```
if (FindData.dwFileAttributes and FILE_ATTRIBUTE_DIRECTORY) = 0 then
  // Yes the file exists! 
```

甚至基于文件属性：

```
function MyFileExists(const Name: string): Boolean;
var
  R: DWORD;
begin
  R := GetFileAttributes(PChar(Name));
  Result := (R <> DWORD(-1)) and ((R and FILE_ATTRIBUTE_DIRECTORY) = 0);
end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T19:14:43.827

Delphi 的现代版本以`FileExists`与您的代码大致相同的方式实现。该实现对符号链接有额外的处理，但在其他方面与您的版本基本相同。

现代 Delphi 实现中有一个有趣的细微差别。如果调用`GetFileAttributes`返回`INVALID_FILE_ATTRIBUTES`，则代码不会立即退出。相反，它这样做：

```
LastError := GetLastError;
Result := (LastError <> ERROR_FILE_NOT_FOUND) and
  (LastError <> ERROR_PATH_NOT_FOUND) and
  (LastError <> ERROR_INVALID_NAME) and ExistsLockedOrShared(Filename); 
```

并执行`ExistsLockedOrShared`使用`FindFirstFile`和检查 `FILE_ATTRIBUTE_DIRECTORY`on `dwFileAttributes`。这表明`GetFileAttributes`当文件存在但被锁定时可能会失败。但`FindFirstFile`在这种情况下，这可能会成功。这是合理的，因为`FindFirstFile`使用文件元数据而不是存储在文件本身中的数据。

很难说为什么代码是旧版本中的样子。我认为它很弱。就个人而言，我会`FileExists`使用代码挂钩替换为更好的版本。例如：[delphi中的补丁例程调用](https://stackoverflow.com/questions/8978177/patch-routine-call-in-delphi)

和往常一样，有一篇关于这个主题的[Raymond Chen文章：](https://stackoverflow.com/users/902497/raymond-chen)[迷信：为什么 GetFileAttributes 是老前辈测试文件存在的方式？](http://blogs.msdn.com/b/oldnewthing/archive/2007/10/23/5612082.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T19:25:35.310

从`FileExists`（它不使用`FileAge`并且也优化并且可以按照符号链接检查链接文件是否存在）的“现代”实现来判断：

*   第一个变体（`(FindData.dwFileAttributes and FILE_ATTRIBUTE_DIRECTORY) = 0`）是可以的；
*   `GetFileAttributes`如果文件被锁定或共享，第二个变体 ( ) 可能会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:42:00.543

对于旧的 Delphi 版本，您可以下载 Jedi 代码库。它具有以下实现（除了许多其他有用的类和函数）：

```
function FileExists(const FileName: string): Boolean;
{$IFDEF MSWINDOWS}
var
  Attr: Cardinal;
{$ENDIF MSWINDOWS}
begin
  if FileName <> '' then
  begin
    {$IFDEF MSWINDOWS}
    // FileGetSize is very slow, GetFileAttributes is much faster
    Attr := GetFileAttributes(Pointer(Filename));
    Result := (Attr <> $FFFFFFFF) and (Attr and FILE_ATTRIBUTE_DIRECTORY = 0);
    {$ELSE ~MSWINDOWS}
    // Attempt to access the file, doesn't matter how, using FileGetSize is as good as anything else.
    Result := FileGetSize(FileName) <> -1;
    {$ENDIF ~MSWINDOWS}
  end
  else
    Result := False;
end; 
```

# haskell - Haskell - “应用程序中的类型错误”：“统一将给出无限类型”

> ID：13959194
> 
> 赞同：4
> 
> 时间：2012-12-19T18:56:47.060
> 
> 标签：haskell

我开始与 Haskell 合作，但我试图进行的这种平等检查没有奏效。

我有一个函数，`countLetter a [b] c`其中`a`是一个字符，`b`是一个字符列表并且`c`是一个 int。（类型声明通过很好。）但是我遇到了这个表达式的问题：

```
if a == head(b) 
```

给我以下信息：

```
Type error in application

*** Expression     : a == head b
*** Term           : a
*** Type           : [a]
*** Does not match : a
*** Because        : unification would give infinite type 
```

如果需要，我的完整代码是这样的：

```
countLetter :: char -> [char] -> int

countLetter a [b] c = if null b

                       then []
                       else
                       if a == head(b)
                       then countLetter a tail(b) c+1
                    else
                    countLetter head(b) tail(b) c 
```

任何帮助或建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:00:01.533

首先，Haskell 中的类型以大写字母开头。如果您在类型签名中使用以小写字母开头的标识符，它们将被解释为类型变量。因此，您的类型`char -> [char] -> int`与 相同`a -> [a] -> b`，这对于您的功能来说不是明智的类型。你想要的`Char -> [Char] -> Int`。

其次`[]`不是 type 的有效值`Int`。修复您的类型签名应该会产生一条错误消息，以不那么模棱两可的方式告诉您这一点。

然后它还应该告诉您这`null b`是一个类型错误，因为`b`is of type `Char`（您的函数的第二个参数是 type`[Char]`并且您已经将它与 pattern 匹配`[b]`，绑定`b`到该列表中包含的单个`Char`）并`null`接受一个列表，而不是一个 Char，作为它的论点。

为了澄清最后一点：

函数的第二个参数是一个列表。通过在参数列表中写入`[b]`，您可以将该参数与 pattern 进行匹配`[b]`。换句话说，写作`countLetter a [b] c = blabla`与写作相同：

```
countLetter a theList c =
    case theList of
        [b] -> blabla 
```

所以你说：“函数的第二个参数必须是一个包含一个元素的列表，并且该元素应该被称为`b`”。这不是你想说的。您要说的是“应调用函数的第二个参数（顺便说一下，它是一个列表）`b`”。为此，您只需编写`countLetter a b c = blabla`.

list 类型的参数不必与其他类型的参数有任何不同的表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:24:48.883

您将遇到的另一个错误是：

```
countLetter head(b) tail(b) c 
```

根据规则，这与

```
countLetter head b tail b c 
```

即你用 5 个参数调用你的 countLetter 函数，而它只需要 3 个（根据第一个等式）或 2 个（根据你的类型签名）。（这是编译器会*非常*不满意的另一点。）

你可能想要这个：

```
countLetter (head b) (tail b) c 
```

同样地：

```
countLetter a tail(b) c+1 
```

是相同的

```
(countLetter a tail b c) + 1 
```

但你可能想要：

```
countLetter a (tail b) (c+1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T06:58:58.450

除了提供修复函数的方法的其他答案之外，您可能需要考虑以更具组合性的风格编写此代码。具体来说，寻找可以通过构建其他标准函数来编写函数的方法。假设您有一个函数可以从列表中删除不等于测试字母的所有内容。

```
myFilter :: Char -> [Char] -> [Char
myFilter = ... 
```

使用后`myFilter`，您将得到一个列表，其中仅包含您要检查的元素。此时，您可以只使用`length`来获取列表的长度：

```
countLetter :: Char -> [Char] -> Int
countLetter a b = length $ myFilter a b 
```

所以现在你只需要定义`myFilter`，这可以用标准的 Prelude 函数来完成`filter`

```
myFilter a b = filter (==a) b 
```

对于这么小的函数，创建我们自己的定义几乎不值得，因为你可以写

```
countLetter a b = length $ filter (== a) b 
```

现在，在 ghci 中定义它以查看它为函数找到的类型`countLetter`

```
Prelude> let countLetter a b = length $ filter (== a) b
Prelude> :t countLetter
countLetter :: Eq a => a -> [a] -> Int 
```

看不到`Char`！实现不依赖于元素是字母，只是可以比较它们是否相等（这也适用于您的方法）。所以 ghci 在计算类型中反映了这一点。`Char`但是您可以通过替换来看到这正是您想要的类型`a`。

许多函数式程序员倾向于发现这种方法，即通过组合较小的部分来构建函数，特别容易推理，因此它很常见。尤其是在使用列表时，您可能想看看是否可以使用所谓的高阶函数（例如 、 或折叠）而不是使用递归来编写`map`实现`filter`。有时递归是最清晰的方法，但我希望您经常会发现函数组合是一种更好的方法。

# mysql - 使用嵌套集模型计算辅助表中项目数的 SQL 查询

> ID：13959197
> 
> 赞同：0
> 
> 时间：2012-12-19T18:56:54.067
> 
> 标签：mysql, sql

我正在使用嵌套集模型处理类别。我的数据库设计是这样的

*   表 1：类别（id、lft、rgt、count1、count2）
*   表 2：Items1 (id, catid, .....) -- catid 是类别表中的 id
*   表 3：Items2 (id, item1_id, ....) -- item1_id 是 Items 1 表中的 id

现在由于 Items1 有 catid 列，我可以使用下面的 SQL 使用嵌套集模型轻松计算树下的项目数：

```
 SELECT 
            parent.id, COUNT(items.id) as item_count
        FROM 
            categories AS node ,
            categories AS parent,
            items1 AS items
        WHERE 
            node.nleft BETWEEN parent.nleft AND parent.nright 
            AND node.id = items.catid
            AND items.published = 1
        GROUP BY 
            parent.id
        ORDER BY 
            node.nleft; 
```

并从该 SQL 更新每个类别。

现在有人可以帮助我如何将树中每个类别的项目数从 items2 表更新到 count2 列？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:02:42.127

像这样的东西会设置为引用类别`count2`中的行数：`items2`

```
update 
  categories 
set 
  count2=(
    select count(*) from items2 where items2.item1_id in (
      select id from items1 where items1.catid=categories.id
    )
  ) 
```

要设置`count2`两者中的行数`items1`并`items2`引用该类别：

```
update 
  categories 
set 
  count2=(
    select count(*) from items2 where items2.item1_id in (
      select id from items1 where items1.catid=categories.id
    ) + 
    select count(*) from items1 where items1.catid=categories.id
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:35:17.170

感谢 MiMo 的回复。最后，我可以自己做。

我所做的是，

1.  在 items1 表中添加了一个新列 item22_count，并在将新记录插入 items2 表时更新它。

2.  现在我像这样修改了第一个查询以获得 items2 计数。

    ```
    SELECT 
        parent.id, sum(items2_count) as item2_count
    FROM 
        categories AS node ,
        categories AS parent,
        items1 AS items
    WHERE 
        node.nleft BETWEEN parent.nleft AND parent.nright 
        AND node.id = items.catid
        AND items.published = 1
    GROUP BY 
        parent.id
    ORDER BY 
        node.nleft; 
    ```

我知道这会增加更新列的开销，但这是有充分理由的，我没有找到其他方法。无论如何感谢您的回答。

# perl - Grep：从一个文件中提取数据以更新另一个文件

> ID：13959200
> 
> 赞同：1
> 
> 时间：2012-12-19T18:57:03.103
> 
> 标签：perl, sed, grep, extract

我正在编写一个 perl 脚本，它从一个带有消息定义的文件中提取值，并使用它们来更新配置文件。

例如：

消息定义文件 (ICD.txt)：

```
MESSAGE: FOO_TELEM
latitude [-90,90]
longitude [-180,180]
MESSAGE: FOO_FREQUENCY
airPressure [0,50]
engineSpeed [0,65500] 
```

FOO_TELEM 消息的成员纬度范围为 -90 到 90，经度范围为 -180 到 180。

配置文件（Config.txt）：

```
 MessageTable
    Message FOO_TELEM
      Member latitude  DOUBLE End-Member
      Member longitude DOUBLE End-Member
    End-Message
    Message FOO_FREQUENCY
      Member airPressure ULONG End-Member
      Member engineSpeed ULONG End-Member
    End-Message
  End-MessageTable 
```

我希望能够使用消息定义文件 (ICD.txt) 中包含的约束值更新配置文件 (Config.txt)，以便结果如下所示：

更新的配置文件 (Config.txt)：

```
 MessageTable
    Message FOO_TELEM
      Member latitude  DOUBLE CONSTRAINT -90 90 End-Member
      Member longitude DOUBLE CONSTRAINT -180 180 End-Member
    End-Message
    Message FOO_FREQUENCY
      Member airPressure ULONG CONSTRAINT 0 50 End-Member
      Member engineSpeed ULONG CONSTRAINT 0 65500 End-Member
    End-Message
  End-MessageTable 
```

我尝试了各种形式的 grep 来获得我需要的结果，但都没有成功。任何建议将不胜感激。我对任何涉及 grep、sed 和/或 perl 的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:47:29.247

这是一个镜头。我将双重使用`DATA`我的文件，因为我不应该编写打开/关闭逻辑。

```
use strict;
use warnings;

my %messages;
my $current;
CONSTRAINT:
while ( <DATA> ) { 
    last CONSTRAINT if m/^---$/;
    if ( my ( $message ) = m/^ MESSAGE: \s+ ( \S+ )/x ) { 
        $messages{ $message } = $current = {};
    }
    elsif ( my ( $name, $min, $max ) 
               = m/^ (\w+) \s+ \[ \s* (-?\d+), \s* (-?\d+) \s* \]/x 
          ) { 
      $current->{ $name } = [ $min, $max ];
    }   
}
while ( <DATA> ) { 
    chomp;
    if ( my ( $msg ) = m/Message \s+ ( \S+ )/x ) { 
        $current = $messages{ $msg };
    }
    elsif (   ref( $current )
          and my ( $before, $member, $after ) 
                  = m/^( \s* Member \s+ ( \w+ ) \s+ \w+ ) \s+ (.*) /x 
          ) {
        if ( my $vals = $current->{ $member } ) { 
            $_ = "$before CONSTRAINT @$vals $after";
        }
    }
    say;
}

__DATA__
MESSAGE: FOO_TELEM
latitude [-90,90]
longitude [-180,180]
MESSAGE: FOO_FREQUENCY
airPressure [0,50]
engineSpeed [0,65500]
---
MessageTable
  Message FOO_TELEM
    Member latitude  DOUBLE End-Member
    Member longitude DOUBLE End-Member
  End-Message
  Message FOO_FREQUENCY
    Member airPressure ULONG End-Member
    Member engineSpeed ULONG End-Member
  End-Message
End-MessageTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:25:56.333

首先，编写一个解析器将数据加载到以下数据结构中：

```
my %data = (
   FOO_TELEM => {
      latitude  => [  -90,  90 ],
      longitude => [ -180, 180 ],
   },
   FOO_FREQUENCY => {
      latitude  => [ 0,    50 ],
      longitude => [ 0, 65500 ],
   },
); 
```

然后，为您的数据定义格式编写解析器。唯一的补充是`$data{$message_name}{$member_name}`当它找到一个`End-Member`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:51:26.397

这些中的任何一个都采用某种标准格式吗？那会很有帮助。例如，如果您的`Config.txt`文件是 XML 格式，它看起来像这样：

```
<messageTable>
    <message name="FOO_TELEM">
        <member name="latitude" type="DOUBLE"/>
        <member name="longitude" type="DOUBLE"/>
    </message>
    <message name="FOO_FREQUENCY">
        <member name="airPressure" type="ULONG"/>
        <member name="engineSpeed" type="ULONG"/>
    </message>
</messageTable> 
```

如果您的文件不是任何特定的标准格式，您可以将它们转换为标准格式吗？它不一定是 XML，YAML 也可以。

我要问的原因是 Perl 有大量的模块可以快速解析这些标准格式，从而使一切变得如此容易操作。如果没有，您将不得不手动解析数据以提取信息。

最简单的做法是解析您的表并在 Perl 中创建一个复杂的数据结构来存储您的`ICD.txt`文件信息。Perl 具有三种标准数据类型，标量（类似 的变量`$foo`）、数组（类似 的变量`@foo`）和散列（类似 的变量`%hash`）。这些数据类型中的每一个都处理单独的值。标量只能包含一个单独的值，而数组和哈希处理这些值的列表。

要处理更复杂的结构，您需要使用[Perl References](http://perldoc.perl.org/perlreftut.html)。引用允许您拥有散列的散列或数组的数组，或数组的散列，或散列的数组等。

例如：

```
use strict;
use warnings;
use feature qw(say);
use autodie;
use Data::Dumper;

open my $icd_fh, "<", "icd.txt";

my %icd_data;
my $message;
while (my $line = <$icd_fh>) {
    if ($line =~ /^MESSAGE: (.*)/) {
        $message = $1;
    }
    else {
        $line =~ /(.*) \[(.*),(.*)\]/;
        my $message_type = $1;
        my $lower_limit = $2;
        my $upper_limit = $3;
        if (not exists $icd_data{$message}) {
            $icd_data{$message} = {};
        }
        $icd_data{$message}->{$message_type} = {};
        $icd_data{$message}->{$message_type}->{LOWER} = $lower_limit;
        $icd_data{$message}->{$message_type}->{UPPER} = $upper_limit;
    }
}
say Dumper \%icd_data; 
```

这将获得这种形状的 ICD 数据：

```
$VAR1 = {
            'FOO_TELEM' => {
                'longitude' => {
                    'LOWER' => '-180',
                    'UPPER' => '180'
                 },
                 'latitude' => {
                      'LOWER' => '-90',
                      'UPPER' => '90'
                 }
            },
            'FOO_FREQUENCY' => {
                'airPressure' => {
                    'LOWER' => '0',
                    'UPPER' => '50'
                },
                'engineSpeed' => {
                    'LOWER' => '0',
                    'UPPER' => '65500'
                }
          }
    }; 
```

从那里，您应该能够解析`Config.txt`文件的行，并使用您需要的数据修改它们。

# java - 加载没有 Class.forName 的 JDBC 驱动程序

> ID：13959202
> 
> 赞同：3
> 
> 时间：2012-12-19T18:57:10.620
> 
> 标签：java, jdbc

Oracle [JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html "甲骨文文档")说

> 在以前的 JDBC 版本中，要获得连接，首先必须通过调用方法 Class.forName 来初始化 JDBC 驱动程序。此方法需要 java.sql.Driver 类型的对象。每个 JDBC 驱动程序都包含一个或多个实现接口 java.sql.Driver 的类。Java DB 的驱动程序是 org.apache.derby.jdbc.EmbeddedDriver 和 org.apache.derby.jdbc.ClientDriver，而 MySQL Connector/J 的驱动程序是 com.mysql.jdbc.Driver。请参阅 DBMS 驱动程序的文档以获取实现接口 java.sql.Driver 的类的名称。
> 
> 在您的类路径中找到的任何 JDBC 4.0 驱动程序都会自动加载。（但是，您必须使用 Class.forName 方法手动加载 JDBC 4.0 之前的所有驱动程序。）

但是当我删除`Class.forName`它时会出现错误*No Driver found*。我正在使用`ojdbc14`驱动程序。我们如何在没有 的情况下实现连接`Class.forName`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:59:04.480

仔细查看 JDBC 版本。文章说它是在 JDBC 4.0 (Java 1.6) 中引入的。

但是，`ojdbc14`是 JDBC 3.0 (Java 1.5) 驱动程序。

# ruby-on-rails-3 - 为移动应用程序创建登录系统

> ID：13959205
> 
> 赞同：1
> 
> 时间：2012-12-19T18:57:14.483
> 
> 标签：ruby-on-rails-3, rest, mobile

我有一个需要添加登录系统的应用程序。在主屏幕中，我想要带有邮件和密码的登录表单。

我已经有一个后端，一个 rails 3 服务器。我知道已经有一些我可以使用的身份验证 gem，但我有点迷失如何使用应用程序和后端。

当然，我需要进行后期调用以创建从手机到服务器的用户，但我如何加密密码？！我无法以纯文本形式发送密码，因为任何嗅探 wifi 的人都只能读取密码和电子邮件……我该如何解决这个问题？！当我检查用户是否存在时，我无法以纯文本形式发送密码以供服务器检查......

我是推出自己的注册表还是使用设计和那种宝石？是否有支持“REST 身份验证”的 gem？

任何帮助都是极好的！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:01:24.870

您可以像设计系统通过 HTTP POST 向后端发布一样的方式发布到后端。

处理安全性的最佳方法是使用 HTTPS 对其进行加密。这也是网站公认的做法。

# python - 如何对这个 Flask 应用程序进行单元测试？

> ID：13959209
> 
> 赞同：7
> 
> 时间：2012-12-19T18:57:31.980
> 
> 标签：python, unit-testing, flask

我有一个使用 Flask-Restless 来提供 API 的 Flask 应用程序。

我刚刚写了一些身份验证来检查

1.  如果消费者主机被识别
2.  请求包括一个哈希（通过加密 POST 的请求内容和 GET 的 URL 以及秘密 API 密钥来计算）和
3.  哈希有效

我希望能够为此编写一些单元测试，但我不确定如何，因为我的函数使用请求对象。我应该嘲笑请求对象吗？

希望对此有一些建议。

**配置**

```
API_CONSUMERS = [{'name': 'localhost',
                  'host': '12.0.0.1:5000',
                  'api_key': 'Ahth2ea5Ohngoop5'},
                 {'name': 'localhost2',
                  'host': '127.0.0.1:5001',
                  'api_key': 'Ahth2ea5Ohngoop6'}] 
```

**身份验证方法**

```
import hashlib
from flask import request

def is_authenticated(app):
    """
    Checks that the consumers host is valid, the request has a hash and the
    hash is the same when we excrypt the data with that hosts api key

    Arguments:
    app -- instance of the application
    """
    consumers = app.config.get('API_CONSUMERS')
    host = request.host

    try:
        api_key = next(d['api_key'] for d in consumers if d['host'] == host)
    except StopIteration:
        app.logger.info('Authentication failed: Unknown Host (' + host + ')')
        return False

    if not request.headers.get('hash'):
        app.logger.info('Authentication failed: Missing Hash (' + host + ')')
        return False

    if request.method == 'GET':
        hash = calculate_hash_from_url(api_key)
    elif request.method == 'POST':
        hash = calculate_hash_from_content(api_key)

    if hash != request.headers.get('hash'):
        app.logger.info('Authentication failed: Hash Mismatch (' + host + ')')
        return False
    return True

def calculate_hash_from_url(api_key):
    """
    Calculates the hash using the url and that hosts api key

    Arguments:
    api_key -- api key for this host
    """
    data_to_hash = request.base_url + '?' + request.query_string
    data_to_hash += api_key
    return hashlib.sha1(request_uri).hexdigest()

def calculate_hash_from_content(api_key):
    """
    Calculates the hash using the request data and that hosts api key

    Arguments:
    api_key -- api key for this host
    """
    data_to_hash = request.data
    data_to_hash += api_key
    return hashlib.sha1(data_to_hash).hexdigest() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T22:54:00.497

`test_request_object()`成功了，谢谢猴子。

```
from flask import request

with app.test_request_context('/hello', method='POST'):
    # now you can do something with the request until the
    # end of the with block, such as basic assertions:
    assert request.path == '/hello'
    assert request.method == 'POST' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:51:34.843

我制作了一个鼻子测试套件，通过调用该方法并将 URL 段作为方法参数传递来测试我的 Graffiti 应用程序。IE：

```
response = self.app.do_something("/item/1234567890")
assert response.status_code == 200 
```

# javascript - popup.html 中的 chrome.tabs.create 正在打开无限数量的选项卡。如何打开一个标签？

> ID：13959210
> 
> 赞同：0
> 
> 时间：2012-12-19T18:57:35.043
> 
> 标签：javascript, google-chrome-extension

很明显，这会打开无限数量的带有 popup.html 的选项卡。如何更改它以便只打开一个选项卡。

```
chrome.tabs.create({'url': chrome.extension.getURL('popup.html')}, function(tab) {
        // Tab opened.

    }); 
```

编辑：（一个基本的popup.html）

```
<!DOCTYPE html>
    <html lang="en">

    <!--<script src="script.js"></script>-->
    <script src="jquery.min.js"></script>
    <script src="popup.js"></script>
      <head>
          <meta charset="utf-8">
          <title> Chrome Extension</title>
          <!--<link rel="stylesheet" href="style.css" />-->
      </head>
      <body id="container">
        <div id="left">
          <div class="input-wrapper">

        hello

          </div>

    </div> <!-- end #left -->
      </body>
    </html> 
```

popup.js

```
function openTab()
{
    filename = "popup.html"

  var myid = chrome.i18n.getMessage("@@extension_id");
  chrome.windows.getCurrent(
  function(win)
  {
    chrome.tabs.query({'windowId': win.id},
    function(tabArray)
    {
      for(var i in tabArray)
      {
        if(tabArray[i].url == "chrome-extension://" + myid + "/" + filename)
        {
          // console.log("already opened");
          chrome.tabs.update(tabArray[i].id, {active: true});
          return;
        }
      }
      chrome.tabs.create({url:chrome.extension.getURL(filename)});
    });
  });
}

openTab(); 
```

清单.json：

```
{
  "name": "App",
    "version": "1.1",
  "manifest_version": 2,
  "description": "Test",
  "background_page": "background.html",
  "browser_action": {
    "name": "App",
    "icons": ["icon.png"],
    "default_icon": "icon.png",
   "default_popup":"popup.html"
  },
  "content_scripts": [ {
    "js": [ "jquery.min.js", "background.js" ],
    "matches": [ "http://*/*", "https://*/*"]
  }],
   "permissions": [ "<all_urls>", 
                  "storage",
                  "tabs",
               "contextMenus" ]

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:43:49.873

这是搜索特定选项卡的示例。如果选项卡不存在，则该功能将打开它，否则将激活现有选项卡。

```
function openTab(filename)
{
  var myid = chrome.i18n.getMessage("@@extension_id");
  chrome.windows.getCurrent(
  function(win)
  {
    chrome.tabs.query({'windowId': win.id},
    function(tabArray)
    {
      for(var i in tabArray)
      {
        if(tabArray[i].url == "chrome-extension://" + myid + "/" + filename)
        {
          // console.log("already opened");
          chrome.tabs.update(tabArray[i].id, {active: true});
          return;
        }
      }
      chrome.tabs.create({url:chrome.extension.getURL(filename)});
    });
  });
} 
```

或者，您可以在后台页面中创建新的选项卡 ID（类似于下面的草稿），并在关闭选项卡时清理变量（通过`chrome.tabs.onRemoved.addListener`）。

```
if(chrome.extension.getBackgroundPage().savedTabId != undefined)
{
  chrome.tabs.create({url:chrome.extension.getURL(filename)},
  function(tab){
    chrome.extension.getBackgroundPage().savedTabId = tab.id;
  });
} 
```

# android - Flash Builder 中的哪个元素定义了 iPhone 应用程序的快捷方式名称？

> ID：13959211
> 
> 赞同：0
> 
> 时间：2012-12-19T18:57:36.547
> 
> 标签：android, ios, apache-flex, air, flash-builder

我在 Adob​​e Flash Builder 4.6 中创建了一个带有 air 3.5 的 air 应用程序，用于在 Android 和 iOS 上发布。我的 application.xml 文件开始是这样的：

```
<id>com.one.two.three</id>
<filename>foobar</filename>
<name>FOO BAR</name>
<versionNumber>1.0.0</versionNumber> 
```

当我导出发布版本并在安卓设备上安装应用程序时，图标出现在应用程序文件夹中，名称为“ `FOO BAR`”。

但是，当我在 iPhone 上安装该应用程序时，图标出现在主屏幕上，名称为“ `foobar`”。

两个设备的所需名称都是`FOO BAR`. 什么元素为 iOS 错误地设置了这个？我想这是`<filename>`价值，但我真的宁愿在我的文件名中没有空格。

期待答案，我检查了其他资源，例如： http: [//www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html](http://www.adobe.com/devnet/air/articles/packaging-air-apps-ios.html)，但它并没有得到很好的描述性元素做什么。

非常感谢您抽出宝贵时间，罗布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:16:52.537

带着一点盐，但就像它在你的 xml 中所说的那样：

```
<!-- The name that is displayed in the AIR application installer. 
May have multiple values for each language. See samples or xsd schema file. Optional. -->
<name></name> 
```

就像那里说的那样，这个值仅适用于您的 AIR 安装程序。您正在寻找的节点是`<filename>`节点。

```
<!-- Used as the filename for the application. Required. --> 
```

考虑到 iOS 将直接从商店安装，因此在涉及 iOS 时，您永远不需要为安装程序指定名称。我认为该`<name>`节点适用于您实际看到安装程序的桌面应用程序或 .apks。

将它们都命名为 FOOBAR 怎么样？:)

# latitude-longitude - 国家边界的纬度/经度数据集

> ID：13959218
> 
> 赞同：25
> 
> 时间：2012-12-19T18:58:05.613
> 
> 标签：latitude-longitude

我正在编写一个程序来显示我们产品的预期寿命，因为它与全球各地的平均天气条件有关，我希望我的地图能够反映最新的国家边界。

任何人都可以推荐某个地方以获取世界最新国家边界的纬度/经度点数据集吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T19:18:13.173

您可以从 Natural Earth 免费获取世界国家边界：

[自然地球](http://www.naturalearthdata.com/downloads/10m-cultural-vectors/)

管理层 0 包含国家边界

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-09T13:47:21.573

我知道这个问题已经存在三年了，但有人可能会觉得这很有用：

如果可以接受粗略的轮廓，您可能需要查看这些 KML 文件：[https ://www.google.com/fusiontables/DataSource?docid=1uL8KJV0bMb7A8-SkrIe0ko2DMtSypHX52DatEE4#rows:id=1](https://www.google.com/fusiontables/DataSource?docid=1uL8KJV0bMb7A8-SkrIe0ko2DMtSypHX52DatEE4#rows:id=1)

我只需要德国文件，所以我只测试了那个文件，但我发现它对我的目的非常满意。边界用大约一百个坐标描述，主要岛屿也包括在内。

还有第二组更通用的 KML，但包括更多岛屿（同样，至少对于德国文件而言）：[https ://www.google.com/fusiontables/data?docid=1zn8cjdD6qlAFI7ALMEnwn89g50weLi1D-bAGSZw#rows :id=1](https://www.google.com/fusiontables/data?docid=1zn8cjdD6qlAFI7ALMEnwn89g50weLi1D-bAGSZw#rows:id=1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-09T09:48:06.573

我发现的最准确的数据集来自“全球行政区”

[http://www.gadm.org/country](http://www.gadm.org/country)

您可以按您喜欢的格式下载每个国家/地区的文件。我认为它也是谷歌地球使用的数据集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-08T10:40:12.153

You can use [Google's Geocoding service](https://developers.google.com/maps/documentation/javascript/geocoding) to find the bounds of any country or city area, etc, as discussed in this answer to a similar question - [https://stackoverflow.com/a/31305319/243392](https://stackoverflow.com/a/31305319/243392).

# wcf - 捕获内部异常的 WCF 问题

> ID：13959220
> 
> 赞同：0
> 
> 时间：2012-12-19T18:58:10.250
> 
> 标签：wcf, exception, logging

我正在尝试捕获异常的内部异常并将其记录到 SQL 数据库表中。我的代码毫无问题地捕获并记录了 SQL 表的异常，但即使异常消息显示“有关详细信息，请参阅内部异常”，我也从未获得内部异常记录。就捕获内部异常而言，有人可以在这里指出正确的方向吗？这是捕获异常但不适用于内部异常的代码。

```
 try
                {
                    context.CalculateFreight(xmldoc);
                }
                catch (Exception ex)
                {
                    if (ex.Message.ToString().Length > 2048)
                    {
                        ApplicationError myError = new ApplicationError();
                        myError.ErrorNumber = 1;
                        myError.ErrorSeverity = 1;
                        myError.ErrorState = 1;
                        myError.ErrorLine = 29;
                        myError.ErrorProcedure = "Web Service - ProcessShipping()";
                        myError.ErrorMessage = ex.Message.ToString().Substring(0, 2047);
                        myError.ErrorDateTime = DateTime.Now;

                        context.ApplicationErrors.AddObject(myError);
                        context.SaveChanges();
                    }
                    else
                    {
                        ApplicationError myError = new ApplicationError();
                        myError.ErrorNumber = 1;
                        myError.ErrorSeverity = 1;
                        myError.ErrorState = 1;
                        myError.ErrorLine = 29;
                        myError.ErrorProcedure = "Web Service - ProcessShipping()";
                        myError.ErrorMessage = ex.Message.ToString();
                        myError.ErrorDateTime = DateTime.Now;

                        context.ApplicationErrors.AddObject(myError);
                        context.SaveChanges();
                    }

                    if (ex.InnerException.Message.ToString().Length > 0)
                    {
                        if (ex.InnerException.Message.ToString().Length > 2048)
                        {
                            ApplicationError myInnerException = new ApplicationError();
                            myInnerException.ErrorNumber = 1;
                            myInnerException.ErrorSeverity = 1;
                            myInnerException.ErrorState = 1;
                            myInnerException.ErrorLine = 29;
                            myInnerException.ErrorProcedure = "Web Service - INNER EXCEPTION";
                            myInnerException.ErrorMessage = ex.InnerException.Message.ToString().Substring(0, 2047);
                            myInnerException.ErrorDateTime = DateTime.Now;

                            context.ApplicationErrors.AddObject(myInnerException);
                            context.SaveChanges();
                        }
                        else
                        {
                            ApplicationError myInnerException = new ApplicationError();
                            myInnerException.ErrorNumber = 1;
                            myInnerException.ErrorSeverity = 1;
                            myInnerException.ErrorState = 1;
                            myInnerException.ErrorLine = 29;
                            myInnerException.ErrorProcedure = "Web Service - INNER EXCEPTION";
                            myInnerException.ErrorMessage = ex.InnerException.Message.ToString();
                            myInnerException.ErrorDateTime = DateTime.Now;

                            context.ApplicationErrors.AddObject(myInnerException);
                            context.SaveChanges();
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:03:09.377

如果没有内部异常，就没有内部异常。

从这里开始：[如何：检查异常的内部异常](http://msdn.microsoft.com/en-us/library/hdwz4c0s%28v=VS.80%29.aspx)

> 如果没有原始错误，则 InnerException 的值将是空引用或 Visual Basic 中的 Nothing。

消息“有关详细信息，请参阅内部异常”。可能是某人的样板文本，并不总是适用。

# android - ios 中的问题，包括压缩、base64 编码和表单发布 json 数据

> ID：13959221
> 
> 赞同：1
> 
> 时间：2012-12-19T18:58:18.850
> 
> 标签：android, ios, xcode, base64, gzip

所以我们在同一页上：我正在使用[NSData+GZIP](https://github.com/nicklockwood/Gzip)、 JSONKit 和[NSData+Base64](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

正如标题所暗示的那样，我的目标是获取一个 json 对象，对其进行压缩，对其进行 base64 编码，然后将其作为表单发送到 .net 服务器，而后者又希望获取这些数据并反转过程并结束带有一个 json 对象。

我需要在 android 和 iOS 上都这样做。android 搞定了，很好用。作为参考，这是我在那里做的事情：

```
public String compress(String string) throws IOException {
    byte[] blockcopy = ByteBuffer.allocate(4).order(java.nio.ByteOrder.LITTLE_ENDIAN).putInt(string.length()).array();
    ByteArrayOutputStream os = new ByteArrayOutputStream(string.length());
    GZIPOutputStream gos = new GZIPOutputStream(os);
    gos.write(string.getBytes());
    gos.close();
    os.close();
    byte[] compressed = new byte[4 + os.toByteArray().length];
    System.arraycopy(blockcopy, 0, compressed, 0, 4);
    System.arraycopy(os.toByteArray(), 0, compressed, 4, os.toByteArray().length);

    StringBuffer hexString = new StringBuffer();
    for (int i=0; i<compressed.length; i++)
        hexString.append(Integer.toHexString(0xFF & compressed[i]));

    return Base64.encodeBytes(compressed);
} 
```

这是在 iOS 上成功的测试：

```
 NSLog(@"test? %@", [[NSString alloc]initWithData:[[NSData dataFromBase64String:[[[@"test" dataUsingEncoding:NSUTF8StringEncoding] gzippedData] base64EncodedString]] gunzippedData] encoding:NSUTF8StringEncoding]); 
```

这打印：

```
"test? test" 
```

关注领域：

```
 NSStringEncoding encoding = NSUTF8StringEncoding;

    NSString* string = [[NSArray arrayWithArray:mutableData] JSONString];
    NSData* data = [string dataUsingEncoding:encoding];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/myendpoint.aspx?deviceid=%@&accesstoken=%@", [defaults objectForKey:@"deviceId"], [defaults objectForKey:@"ggAccessToken"]]]];
    [request setHTTPMethod:@"POST"];
    NSMutableData *requestBodyData = nil;

    requestBodyData = [NSMutableData data];

    // Create boundry
    NSString *boundary = [NSString stringWithFormat:@"--%@--", [[NSProcessInfo processInfo] globallyUniqueString]];
    [request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];
    NSData *boundaryData = [[[@"--" stringByAppendingString:boundary] stringByAppendingString:@"\r\n"] dataUsingEncoding:encoding];

    // Add Data to POST
    [requestBodyData appendData:boundaryData];
    [requestBodyData appendData:[[NSString stringWithFormat:@"Content-Disposition: multipart/form-data; "] dataUsingEncoding:encoding]];
    [requestBodyData appendData:[[NSString stringWithFormat:@"name=\"%@\"; ", @"contacts"] dataUsingEncoding:encoding]];

    [requestBodyData appendData:[[NSString stringWithFormat:@"\r\n\r\n"] dataUsingEncoding:encoding]];

    NSString* finalString = [[data gzipDeflate] base64EncodedString];
    //an example of finalString at this point: H4sIAAAAAAAAA6WOwQrCMAyGX0VyUqjHOtk7CN5HGekWMdB2knansXc3FcSDKIiHhBC+5P+6BWYJGdrOGbhdp0R1XiCgpwAtnCbPgcBAmqMn0c3WWrvbaNtrWVjNC+ZzffARPsCqIRSRn4EXllz6hJGULcK5YNJzHEehnB8qrgb8o9j8onj8rjigCNObobsD+2WV/kYBAAA=

    NSData* finalData = [finalString dataUsingEncoding:NSUTF8StringEncoding];

    [requestBodyData appendData:finalData];
    [requestBodyData appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:encoding]];
    [requestBodyData appendData:boundaryData];

    [request setHTTPBody:requestBodyData];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        NSLog(@"%@", [data objectFromJSONData]);
    }]; 
```

此时一切似乎都很好，但来自（.net）服务器的结果：

```
ERROR TYPE: System.IO.InvalidDataException - ERROR MESSAGE: The magic number in GZip header is not correct. Make sure you are passing in a GZip stream. - 
```

我意识到这里还没有太多问题，但这里有一个问题：此时我可以做什么会产生不正确的压缩数据？（假设此时完全是正确的服务器端，因为 android 功能齐全，并且构建它的那部分的人非常有经验）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:03:43.190

有 2 种方法可以使用 gzip，作为流或作为数据文件。压缩本身不需要标头，但是当保存到文件时，标准包含[RFC](http://www.gzip.org/zlib/rfc-gzip.html)中定义的页眉和页脚字节。

所以问题是一个库正在寻找标题，而另一个写入数据的库没有包含它，它可能只是 gzip 数据的原始流。它可以被解压缩，但库需要知道不要查找标头。

保存到文件时，文件格式还有其他好处，主要是由于文件末尾包含 CRC 校验，以帮助验证文件的数据完整性没有被破坏。

# windows - 文件大小 - 磁盘上使用的实际字节数（未分配）

> ID：13959228
> 
> 赞同：2
> 
> 时间：2012-12-19T18:58:33.163
> 
> 标签：windows, file, winapi, c#-4.0, filesize

> **可能重复：**
> [获取磁盘上文件的大小](https://stackoverflow.com/questions/3750590/get-size-of-file-on-disk)

有没有办法使用 C# / windows 来检索磁盘上特定文件使用的实际字节数？

我的应用程序实现了“监视”文件夹，类似于 FileSystemWatcher。一些监视文件夹存在于共享存储（网络和**光纤**通道 SAN）上，另一些存在于本地连接的存储上。

文件被完全不受我控制的进程复制到监视文件夹中，大小从 1 GB 到 > 500 GB 不等。由于共享文件系统的性质，希望在“独占”打开文件（FileMode.Open、FileAccess.Read、FileShare.None）时出现异常也不起作用。

在文件完全复制/关闭之前，这些监视文件夹不应该采取行动 - 否则下游可能会出现问题。

为了获得**磁盘上使用**的“真实”文件大小，我尝试过：

*   System.IO.FileInfo
*   GetFileSizeEx (kernel32 p/invoke)
*   FindFirstFileEx (kernel32 p/invoke)
*   GetCompressedFileSize & GetDiskFreeSpace (kernel32 p/invoke)

任何建议将不胜感激。好像我正在处理 Windows 操作系统的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:03:42.820

没有 API 可以获取文件的“磁盘大小”，您必须根据您对磁盘几何形状的了解自行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T23:16:46.057

总而言之，这里的问题是其他应用程序通过创建目标来复制文件，然后使用`SetFileSize`将文件大小设置为最终大小（比如说 1GB），本质上是创建一个完全用零填充的 1GB 文件。

然后应用程序返回文件的开头并开始用数据顺序填充它。目标是确定其他应用程序已达到“用数据填充”的哪个点。

不幸的答案是没有办法获得这些信息。就文件系统而言，文件存在且大小为1GB。碰巧文件正在被主动更新而不改变大小，但是这些内部更改没有在文件元数据中进行审核。文件的各个字节没有“最后修改时间”。

If you have domain-specific knowledge of the files (e.g. you know that the last byte is never zero) you can poll the last byte of the file and back off if it is zero.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:38:45.027

使用[GetDiskFreeSpace](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364935%28v=vs.85%29.aspx)您可以获得足够的信息来计算集群大小。四舍五入到这个值以获得磁盘上的实际大小，或者它的一个很好的近似值。

# nhibernate - NHibernate：查询未映射实体时的意外行为

> ID：13959236
> 
> 赞同：0
> 
> 时间：2012-12-19T18:58:58.393
> 
> 标签：nhibernate, exception

我有一个包装 Nhibernate 会话的通用 Repository 类：

```
public class Repository<T>{

public IQueryable<T> GetAll(){

    return this.Session.Query<T>();
}

} 
```

尽管我在底层数据库表中有数据映射到 entity `Foo`，但调用`Repository.GetAll<Foo>()`返回了一个空的可枚举。经过一番惊愕之后，我发现问题在于我忘记将我的类映射加载到 SessionFactory 中。

我很惊讶 NHibernate 在尝试加载没有映射的实体类型时不会引发异常。这感觉就像是那种应该导致 NH 早早**和**大声失败**的场景。**

 **这是引导 NH 的代码。注意加载映射的两行被注释掉了

```
 private static Configuration BuildNHibernateConfig(Action<IDbIntegrationConfigurationProperties> dbIntegration)
        {
            var configuration = new Configuration();

            configuration
                .Proxy(p => p.ProxyFactoryFactory<DefaultProxyFactoryFactory>())
                .DataBaseIntegration(db =>
                {

                    db.ConnectionString = connectionString.Value;
                    db.Dialect<MsSql2008Dialect>();

                })
                .AddAssembly(typeof(ActionConfirmation<>).Assembly)
                .SetProperty("show_sql", "true")

                .CurrentSessionContext<LazySessionContext>();

         //   var mappings = GetMappings();
         //   configuration.AddDeserializedMapping(mappings, "Hydra");

            return configuration;
        }

        private static HbmMapping GetMappings()
        {
            var mapper = new ModelMapper();
            mapper.AddMapping<FacilityMap>();
            return mapper.CompileMappingForAllExplicitlyAddedEntities();

        } 
```

这是正常行为还是我以某种方式错误配置了 NH？有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:33:33.150

LINQ 实现是 Criteria API 的包装，此问题[已被报告](https://nhibernate.jira.com/browse/NH-2183)并标记为“无法修复”。Fabio Maulo 的评论表明，验证类是否已映射对性能影响太大。

这对我来说也是新闻，我起初认为这是由于 LINQ 延迟执行。**

# android - ios 应用程序中的 Revmob - 如何判断用户是否安装了应用程序

> ID：13959246
> 
> 赞同：2
> 
> 时间：2012-12-19T18:59:21.090
> 
> 标签：android, iphone, ios, revmob

我正在将我的应用程序转换为使用 RevMob。

我想实现通知我用户是否实际安装了 Revmob 宣传的应用程序的代码？

有人能指出我正确的方向吗？我在 SDK 文档中看不到任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:24:44.213

到目前为止，他们没有公开任何可以通知您的 API，您可以查看他们的[iOS](http://sdk.revmob.com/ios-api/index.html)和[Android](http://sdk.revmob.com/android-api/index.html)网站。

委托方法 installDidReceived 在 SDK 通知您的应用程序已安装时使用，而不是广告中的应用程序。

任何其他广告网络对此提供支持？

# c# - MVC 4 控制器中的异步和等待

> ID：13959251
> 
> 赞同：17
> 
> 时间：2012-12-19T18:59:47.367
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, async-await

每次我尝试使用 new`Async`和`Await`运算符并从数据库返回对象集合时，我都会遇到`Invalid Operation`异常。当我使用它只返回一个项目时，它工作正常。

控制器代码：

```
public async Task<ActionResult> EnvironmentList()
{
    EfEnvironmentDataAccess dataAccess = new EfEnvironmentDataAccess();
    ICollection<Environment> environments = await dataAccess.GetAllEnvironmentsAsync();
    return PartialView(environments);
} 
```

查看代码：

```
<div class="ECURightCol">
<h3>Table Dumps</h3>
@Html.Action("EnvironmentList", "Environment")
@Html.Action("ComputerList", "Computer")
@Html.Action("ProductList", "Product")
@Html.Action("InstanceList", "Instance")
@Html.Action("ProfileList", "Profile") 
```

数据访问代码：

```
public ICollection<Environment> GetAllEnvironments()
{
    using (EcuWebDataContext db = new EcuWebDataContext())
    {
        return db.Environments.OrderBy(e => e.Name).ToList();
    }
}

public async Task<ICollection<Environment>> GetAllEnvironmentsAsync()
{
    return await Task.Run(() => GetAllEnvironments());
} 
```

我得到的错误是：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：HttpServerUtility.Execute 在等待异步操作完成时被阻塞。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T19:09:26.680

首先，[您不能对子操作使用异步处理，](http://forums.asp.net/p/1823175/5062820.aspx)我想这就是您想要做的。

其次，您没有在此处通过启动另一个线程来执行任何异步处理，以使用以下代码行执行您的代码：

```
Task.Run(() => GetAllEnvironments()); 
```

它会在一天结束时阻塞一个线程，你将只有上下文切换开销。EF6 将支持异步处理。对于纯 ADO.NET 的异步查询，请查看：

[ASP.NET MVC 4 中使用基于任务的异步编程模型 (TAP) 的异步数据库调用](http://www.tugberkugurlu.com/archive/asynchronous-database-calls-with-task-based-asynchronous-programming-model-tap-in-asp-net-mvc-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T09:11:04.560

自从回答这个问题已经有一段时间了，但另一种方法如下：

从一个动作中调用你的方法

```
@Html.Action("YourSyncMethod", "YourController") 
```

将其定义为正常的同步操作

```
public ActionResult YourSyncMethod() 
```

然后在里面调用你的异步方法

```
var taskResponse = YourAsyncMethod(); 
```

它将返回一个包含您需要的模型

```
private async Task<YourModel> YourAsyncMethod() 
```

它似乎比篡改配置选项或创建更复杂的代码更简单

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-04-20T14:22:46.157

这个问题已经有一段时间没有回答了。`<system.web>`但是我在使用 MVC 5 时遇到了类似的情况，我能够通过在web.config 文件部分下注释掉以下行来使 [ChildActionOnly] 异步工作。

```
<system.web>
    <!--<httpRuntime targetFramework="4.5" />--> 
```

编辑：当您找到适合您情况的真正解决方案时，请考虑这是一种解决方法。请参阅下面 Leri 的评论。

# php - 如何将 HTML 中的下拉框文本发送到 PHP？

> ID：13959254
> 
> 赞同：1
> 
> 时间：2012-12-19T18:59:58.913
> 
> 标签：php, html, forms, drop-down-menu

我有一个包含表单的 HTML 页面。然后表单发布到 PHP 页面，在该页面向用户发送电子邮件。我有一个值为 1-58 的“状态”下拉框（我的数据库需要这些）。有没有办法在发送电子邮件时获取州名而不是数字值？

我的 HTML：

```
<Select name="State" id="State" style="width:40px;" >
  <option value="17"></option>
  <option value="18">Alabama</option>
  <option value="19">Alaska</option>
  <option value="20">American Samoa</option>
  <option value="21">Arizona</option>
  <option value="22">Arkansas</option>
  <option value="15">California</option>
  <option value="6">Canada</option>
  <option value="11">Colorado</option>
  <option value="23">Connecticut</option>
  <option value="24">Delaware</option>
  <option value="25">District Of Columbia</option>
  <option value="26">Federated States Of Micronesia</option>
  <option value="7">Florida</option>
  <option value="27">Georgia</option>
  <option value="28">Guam</option>
  <option value="29">Hawaii</option>
  <option value="30">Idaho</option>
  <option value="8">Illinois</option>
  <option value="14">Indiana</option>
  <option value="31">Iowa</option>
  <option value="32">Kansas</option>
  <option value="33">Kentucky</option>
  <option value="34">Louisiana</option>
  <option value="35">Maine</option>
  <option value="36">Marshall Islands</option>
  <option value="37">Maryland</option>
  <option value="38">Massachusetts</option>
  <option value="1">Michigan</option>
  <option value="5">Minnesota</option>
  <option value="39">Mississippi</option>
  <option value="40">Missouri</option>
  <option value="41">Montana</option>
  <option value="42">Nebraska</option>
  <option value="43">Nevada</option>
  <option value="44">New Hampshire</option>
  <option value="12">New Jersey</option>
  <option value="45">New Mexico</option>
  <option value="46">New York</option>
  <option value="13">North Carolina</option>
  <option value="47">North Dakota</option>
  <option value="4">Ohio</option>
  <option value="48">Oklahoma</option>
  <option value="49">Oregon</option>
  <option value="10">Pennsylvania</option>
  <option value="50">Rhode Island</option>
  <option value="51">South Carolina</option>
  <option value="52">South Dakota</option>
  <option value="53">Tennessee</option>
  <option value="2">Texas</option>
  <option value="54">Utah</option>
  <option value="55">Vermont</option>
  <option value="3">Virginia</option>
  <option value="56">Washington</option>
  <option value="57">West Virginia</option>
  <option value="9">Wisconsin</option>
  <option value="58">Wyoming</option>
</Select> 
```

当前 PHP`$message`行：

```
 "\nState: " . stripslashes($_POST["State"]) . 
```

我收到的电子邮件说`"State: 1"`的是`"State: Michigan".`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:05:06.047

如果您删除这些值，它将按您的意愿工作。如果没有 value 属性，将使用实际值（无论选项标签之间是什么）

例如

代替

```
<option value="8">Illinois</option> 
```

有了这个

```
<option>Illinois</option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:33:06.393

有一个数组控制所有的值。使用同一个数组显示下拉选项，然后使用同一个数组引用该值。

```
<?php
//Place state array at the top of the file
$states = array(
  18 => "Alabama",
  19 => "Alaska",
  ...
);

//Generate select box
if(is_array($states)) {
  echo "<select name='state' id='state' style='width:40px'>";
  foreach($states as $id => $name) {
    echo "<option value='$id'>$name</option>";
  }
  echo "</select>";
}

//Form POSTed
if(is_array($_POST)) {
  //Send email message
  $email = "State: ".$states[$_POST['state']];
  //Do email sending or message displaying

  //Submit to datebase
  $query = "INSERT INTO table ('state') VALUES ('".mysqli_escape_string($_POST['state'])."')";
  //Do insert into mysql
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:12:56.067

该`value`属性是发布到 PHP 端的内容。在您的情况下，每个状态都分配有一个数值并将其发布到服务器。只需更改您的下拉列表，以便您的文本和值相同，如下所示：

```
<option value="Michigan">Michigan</option>
<option value="New York">New York</option>
... 
```

发布时，将发布名称而不是数字。你可以：

```
$_POST['state'] 
```

现在将返回`Michigan`or`New York`等​​。

实现此目的的唯一其他方法是在 PHP 中创建一个数组，其中索引是您选择的数值，数组值是州名（即密歇根州、纽约州等）。您的前端代码不会改变。然后，您将收到数值并必须将其映射到该数组。

希望这可以帮助。

# javascript - 一键验证后禁用提交按钮？

> ID：13959256
> 
> 赞同：3
> 
> 时间：2012-12-19T19:00:00.157
> 
> 标签：javascript, jquery

我有一个表格，可以将数据传递到 cc 处理终端，以及编写 PDF 合同和收据。表单中内置了验证，我正在尝试添加一个功能以在单击提供的验证通过后禁用提交按钮。

我不太了解发布数据，但我想确保它：

`1\. Still posts the data. 2\. Still validates. 3\. Does not allow the user to submit multiple times.`

这是我的 POST 代码块：

```
<form method="POST" action="partner_register_ihg.php" onSubmit="javascript:return WebForm_OnSubmit();"  id="docContainer" autoeventwireup="true" enctype="multipart/form-data" novalidate class="fb-toplabel fb-100-item-column fb-large selected-object" style="width: 800px;" data-form="preview"> 
```

这是我的提交部分

```
<input type="submit" name="subbutton" onClick='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("subbutton", "", true, "", "", false, false))' id="subbutton" class="fb-button-special" value="Submit" /> 
```

这是我的验证代码的一小部分

```
var RequiredFieldValidator30 = document.all ? document.all["RequiredFieldValidator30"] : document.getElementById("RequiredFieldValidator30");
RequiredFieldValidator30.controltovalidate = "item56_text_1";
RequiredFieldValidator30.errormessage = "Please enter the shipping zip code.";
RequiredFieldValidator30.display = "None";
RequiredFieldValidator30.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
RequiredFieldValidator30.initialvalue = "";
var RequiredFieldValidator31 = document.all ? document.all["RequiredFieldValidator31"] : document.getElementById("RequiredFieldValidator31");
RequiredFieldValidator31.controltovalidate = "item62_0_checkbox";
RequiredFieldValidator31.errormessage = "Please agree to Terms and Conditions.";
RequiredFieldValidator31.display = "None";
RequiredFieldValidator31.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
RequiredFieldValidator31.initialvalue = "";

var ValidationSummary1 = document.all ? document.all["ValidationSummary1"] : document.getElementById("ValidationSummary1");
ValidationSummary1.showmessagebox = "True";
ValidationSummary1.showsummary = "False"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:04:59.823

在您的提交按钮代码中，只需添加 javascript 代码： `<input type="submit" [...] id="btn1" onclick="setTimeout(disableFunction, 1);">` 并在 Javascript 中添加函数：

```
function disableFunction() {
    document.getElementById("btn1").disabled = 'true';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-03T10:06:07.093

如果您使用 jQuery 表单验证器，您可以

```
$(document).ready(function () {
    $("#addOfficerForm").submit(function () {
        var total_error = document.querySelectorAll('.error').length;
        if(total_error === 0){
            document.getElementById("checkEditRestriction").disabled = 'true';
        }  
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T03:19:18.043

HTML：

```
<button type="button" id="btnSubmit"> Submit </button> 
```

jQuery/js：

```
$('#btnSubmit').click(function(e){
 e.preventDefault();
 if(this.form.reportValidity()){
  $(this).prop('disabled',true);
  this.form.submit();
 }
}); 
```

# python - 计算机（Windows XP）不想打开 .py

> ID：13959257
> 
> 赞同：1
> 
> 时间：2012-12-19T19:00:09.453
> 
> 标签：python, windows

我是 Python 的初级程序员，我的电脑有一个奇怪的问题。当我的计算机上有一个 .py 文件（包含一个有效的脚本）并双击它打开时，会发生以下情况：程序打开（它是黑屏视图），但它会在一秒钟内自行关闭，并且程序没有被执行。但是，当我右键单击并选择“使用 IDLE 编辑”时，一切正常。

我从一开始就没有这个问题，但是后来我安装了一些其他版本的 Python，我认为那是脚本不想再打开的那一刻。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:03:13.000

正在发生的事情是与扩展有关联，`py`它可能正在运行您的程序，但它关闭得太快，您看不到任何输出。您可以添加等待或只是打开命令提示符并从那里运行所有内容。

另一种解决方案，我认为更理想的解决方案是将`py`扩展的关联设置为 IDLE。这将解决您的问题，因为文件将默认在 IDLE 中打开，您可以从那里运行 Python 脚本。

[在 Windows 7 中更改文件关联](http://windows.microsoft.com/en-US/windows-vista/Change-which-programs-Windows-uses-by-default)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:03:53.203

> 但它会在一秒钟内自行关闭，并且程序没有执行。

是的，程序正在执行。它执行得如此之快，以至于您没有机会看到正在发生的事情。

放在`raw_input()`代码的末尾，这样控制台窗口就不会立即关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:17:41.743

Austin 是对的，您制作了一个控制台应用程序，一旦完成（以微秒为单位），它就会自行关闭。

创建一个主循环或使用 Austin 的技巧，以强制应用程序不要自行关闭。

# css - 将 CSS3 变换/动画与 font-face 一起使用会产生类似“摇摆不定”的微调器 gif

> ID：13959259
> 
> 赞同：14
> 
> 时间：2012-12-19T19:00:23.927
> 
> 标签：css, twitter-bootstrap, css-transitions, css-animations

我正在使用带有 font-face ( [twitter bootstrap/font-awesome](http://fortawesome.github.com/Font-Awesome/) ) 的 CSS 转换/动画来生成一个类似于 gif 的微调器图标。

问题是图标围绕 360 度旋转时会摇晃。[请参阅此 JSFiddle](http://jsfiddle.net/timrpeterson/pGhFX/6/)以了解我的意思。有谁知道如何让它**不**摇晃？或者至少让它旋转得更顺畅一点？

这是下面的代码：

CSS：

```
i.icon-repeat {
  -webkit-animation: Rotate 500ms infinite linear;
  -moz-animation: Rotate 500ms infinite linear;
  -ms-animation: Rotate 500ms infinite linear;
  -o-animation: Rotate 500ms infinite linear;
  animation: Rotate 500ms infinite linear;
}
@-o-keyframes Rotate {
  from {-o-transform:rotate(0deg);}
  to {-o-transform:rotate(360deg);}
}
@-moz-keyframes Rotate {
 from {-moz-transform:rotate(0deg);}
 to {-moz-transform:rotate(360deg);}
}
@-ms-keyframes Rotate {
  from {-ms-transform:rotate(0deg);}
  to {-ms-transform:rotate(360deg);}
}
@-webkit-keyframes Rotate {
  from {-webkit-transform:rotate(0deg);}
  to {-webkit-transform:rotate(360deg);}
}
@keyframes Rotate {
  from { transform:rotate(0deg);}
  to { transform:rotate(360deg);}
}
#iconRepeatMain{
  display: inline-block;    
  position: absolute;
  z-index:10007;
  left: 50%;
  top: 50%;
  margin-left: -24px; /* -1 * image width / 2 */
  margin-top: -24px;  /* -1 * image height / 2 */
  font-size:36px;
}​ 
```

HTML：

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css" rel="stylesheet">
<i id='iconRepeatMain' class='icon-repeat' style='font-size:36px; color:red'></i>​ 
```

**注意：**如果有人想在您自己的 Web 应用程序中使用此代码，请确保在完成所需的操作后从 DOM 中删除此微调器。让这个图标在后台旋转会烧毁 CPU，无论您使用哪种浏览器，您都不会相信。此外，简单地切换其可见性，即 ，`display:none`是行不通的。您需要像这样从 DOM 中删除它：`$('#iconRepeatMain').remove();`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T19:17:56.247

默认情况下，CSS 使用属性转换关于它们的垂直和水平中心的东西`transform-origin`。此默认值的简写语法是`50% 50%`，它表示原点的 x 和 y 值。

对于这个图标，我发现将 y 原点移动到 38% 会使它变得平滑一点，但您需要使用它来获得精确的值。[**在 JSFiddle 上查看**](http://jsfiddle.net/4VGcZ/)

```
i.icon-repeat {
  -webkit-transform-origin:50% 38%;
  -moz-transform-origin:50% 38%;
  -ms-transform-origin:50% 38%;
  -o-transform-origin:50% 38%;
  transform-origin: 50% 38%;
} 
```

有关该`transform-origin`属性的更多信息，我推荐[有关该属性的 MDN 文章。](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T19:12:16.100

尝试在元素上设置特定的高度和宽度。通过反复试验，我发现添加：

```
#iconRepeatMain {
    width: 26px;
    height: 19px;
} 
```

字体居中很好，似乎消除了摆动。但是，这可能取决于正在使用的浏览器——彻底测试它。

[http://jsfiddle.net/mblase75/pGhFX/13/](http://jsfiddle.net/mblase75/pGhFX/13/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-15T05:35:18.077

我没有在 Font Awesome 网站的页面中看到它的文档，但是 CSS 源代码显示了一个图标旋转类，它可以无休止地旋转图标，并且对于您的图标重复徽标，几乎没有摆动。

```
<i class="icon-repeat icon-spin"></i> 
```

...虽然我猜它真的是为 icon-spinner 图标准备的：

```
<i class="icon-spinner icon-spin"></i> 
```

编辑：d'oh ...这依赖于比您的示例中更新的 font-awesome.css 。所以也许答案就是他们自己修复了摆动。icon-spin 类是新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T14:45:07.233

我如何解决图标字体偏离中心旋转的问题： 我必须解决几个问题： 1\. 图标大小：它必须是整个 px 大小（例如 font-size:small; 使我的图标为 17.5 px 所以中心不是转换的绝对中心） 2\. 定义显示：图标级别的块使其在父 div 的中间正确居中​​ 3\. 定义父 div 的确切正方形大小（在我的情况下是按钮）并固定填充使它正确居中 4\. 添加任何文本阴影将改变内部图标的大小，使其偏离中心。诀窍是在我的情况下将悬停样式更改为与背景颜色相同的阴影

所以这里是代码：

CSS：

```
button.close {
padding: 10px;
opacity: 0.8;
text-shadow: 1px 1px 1px #999; 
width: 40px;
height: 40px;
}
button.close i{
font-size: 20px;
max-width: 20px;
max-height: 20px;
display: block;
}
button.close:hover {
text-shadow: 1px 1px 1px #fff; 
}
/* rotation CSS*/
@keyframes anim-rotate {
0% {
-moz-transform:rotate(0);
-webkit-transform:rotate(0);
transform:rotate(0);
}
100% {
-moz-transform: rotate(360deg);
-webkit-transform: rotate(360deg);
transform: rotate(360deg);
}
}
@keyframes anim-rotate-next {
0% {
-moz-transform:rotate(0);
-webkit-transform:rotate(0);
transform:rotate(0);
}
100% {
-moz-transform: rotate(360deg);
-webkit-transform: rotate(360deg);
transform: rotate(360deg);
}
}
.rotate{
animation: anim-rotate-next 1s normal linear;
}
.rotate.down{
animation: anim-rotate 1s normal linear;
} 
```

HTML：

```
<button type="button" class="close"><i class="lnr lnr-sync rotate"></i></button> 
```

最后是用于切换旋转类 JQuery 的 JQuery：

```
$("#parentDiv").on('click', 'i.lnr-sync', function () {
// rotiraj ikonu
$(this).toggleClass("down");
}); 
```

# javascript - 防止默认不工作

> ID：13959261
> 
> 赞同：0
> 
> 时间：2012-12-19T19:00:26.677
> 
> 标签：javascript, jquery

我正在尝试对某些超链接使用 preventDefault 操作来防止它们被激活，而不是调用一些 ajax。但是，它似乎不起作用。

我正在使用的代码如下： 我有以下代码：

```
 $("#" + container_id + " a[id^=read_more_link]").click(function(event){
        alert($(this).html());
        event.preventDefault();
}); 
```

现在有趣的是警报框会触发，因此它肯定会注册点击事件，但它似乎无法识别 preventDefault() 调用。

**我尝试了一个简单的测试来简化我的代码，但它仍然不起作用：**

```
<a id="read_more_link" data-article_id="1" href="news/1">Read More</a>

    $("#read_more_link").on("click", function(event){
        alert("test");
        event.preventDefault();
    }); 
```

警报框触发，但页面仍然跟随链接。

**注意：如果我使用 'Return False' 但不使用 preventDefault**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:47.080

给你！

```
function(e){
    e = e || window.event;
    e.preventDefault();    
} 
```

小提琴：http: [//jsfiddle.net/rXCcB/2/](http://jsfiddle.net/rXCcB/2/)

编辑：正如[11684](https://stackoverflow.com/users/1087848/11684)正确指出的那样，详细的解释会有所帮助。

一些浏览器将其识别`e`为`window.event`，其中包含有关事件的所有信息；在这种情况下，您尝试操纵的点击事件。其他一些浏览器没有，所以函数的第一步发生的是在所有浏览器上的标准化`e`。最终结果是每个对 的引用都`e`指向`window.event`，此时您可以安全地使用`e.preventDefault()`，知道所有浏览器都准确理解您的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:13:51.627

似乎您正在阻止具有某些父级的链接的默认操作，那么您的选择器应该是这样的：

我的html是：

```
<p id='aaa'>
   <a id='read_more_link' href='#'>adf</a>
</p> 
```

jQuery：

```
var container_id = $('#aaa');
$("a[id^='read_more_link']", container_id).click(function(event) {
   alert($(this).html());
   event.preventDefault();
}); 
```

查看小提琴：http: [//jsfiddle.net/EEZEe/](http://jsfiddle.net/EEZEe/)

看看这是否对您有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:22:09.280

至少有一种更简单、更好的方法：

更轻松：

```
$("#" + container_id + " a[id^=read_more_link]").click(function(){
    alert($(this).html());
    return false;
}); 
```

无需使用事件参数，也无需调用函数。

更好的：

使用按钮而不是链接：

```
<p id='aaa'>
   <button id='read_more_link' type='button'>adf</button>
</p> 
```

那么你就不会遇到这个问题，因为正是为这个事件制作了一个按钮。链接是为链接而制作的，`return false`或者`preventDefault()`是，虽然它们可能有效，但它们是变通方法。

# java - 尝试对 DAO 类进行单元测试时，SessionFactory 未自动装配

> ID：13959266
> 
> 赞同：4
> 
> 时间：2012-12-19T19:00:37.647
> 
> 标签：java, spring, hibernate, unit-testing, sessionfactory

我陷入了一种奇怪的情况，当我将我定义的 sessionFactory 作为 Web 应用程序运行时，它会自动连接到 DAO 类。

但是，当我尝试对这个 DAO 类进行单元测试时，spring 不会将 sessionFactory 自动连接到 DAO 类并引发以下异常。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'activityDAO': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.adwitiya.vdb.data.activity.ActivityDAO.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)   at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)   at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)  at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:84)     at com.adwitiya.vdb.data.activity.ActivityDAOTest.testConstructor(ActivityDAOTest.java:31)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:601)     at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)     at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)   at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)     at org.junit.runners.ParentRunner.run(ParentRunner.java:300)    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)  at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:601)     at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)   at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)  at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.adwitiya.vdb.data.activity.ActivityDAO.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}   at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)     at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)   ... 41 more Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}  at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)     at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)    ... 43 more 
```

我已经做了很多谷歌搜索，但找不到解决这个问题的方法。如果你能帮助我，我会非常高兴和感激。

这是我的配置和类文件。

```
Web.xml
-------
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/vdb-data.xml
        </param-value>
    </context-param>

    <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>
            org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <servlet>
        <servlet-name>vdb</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>vdb</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

</web-app> 
```

**我的主要 MVC 配置文件如下。**

```
vdb-servlet.xml
---------------
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jee
        http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/lang
        http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <mvc:resources mapping="/skin/**" location="/skin/" />

    <context:annotation-config />
    <context:component-scan base-package="com.adwitiya.vdb" />

    <bean id="jspViewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
                  value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/view/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <mvc:annotation-driven />

</beans> 
```

**下面是数据库相关的spring配置文件**

```
vdb-data.xml
------------
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jee
        http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/lang
        http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <bean id="messageSource"
          class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <context:property-placeholder location="classpath:database.properties" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <bean id="dataSource"
              class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
              class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.adwitiya.vdb.domain" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
                <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
                <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
                <prop key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
                <prop key="hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_period}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

**DAO 类**

```
ActivityDAO
-----------
package com.adwitiya.vdb.data.activity;

import com.adwitiya.vdb.domain.Activity;
import org.apache.log4j.Logger;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository("activityDAO")
public class ActivityDAO
{
    @Autowired
    private SessionFactory sessionFactory;
    private Session session;
    private boolean status;
    private static Logger logger = Logger.getLogger(ActivityDAO.class);

    public ActivityDAO()
    {
    try
    {
        session = sessionFactory.getCurrentSession();
    }catch(Exception exception)
    {
        logger.error(("Unable to initiate session because of the problem " + exception.getMessage()));
    }
    }

    public boolean add(Activity activity)
    {
    try
    {
        logger.info("Trying to add an activity " + activity.toString());
        session.save(activity);
        status = true;
        logger.info("Added the activity " + activity.toString() + " successfully");
    }catch(HibernateException exception)
    {
        logger.error("Couldn't add an activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }catch(Exception exception)
    {
        logger.error("Couldn't add an activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }
    return status;
    }

    public boolean modify(Activity activity)
    {
    try
    {
        logger.info("Trying to modify the activity " + activity.toString());
        session.saveOrUpdate(activity);
        status = true;
        logger.info("Updated the activity " + activity.toString() + "successfully");
    }catch(HibernateException exception)
    {
        logger.error("Couldn't modify the activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }catch(Exception exception)
    {
        logger.error("Couldn't modify the activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }
    return status;
    }

    public boolean delete(Activity activity)
    {
    try
    {
        logger.info("Trying to delete the activity " + activity.toString());
        session.delete(activity);
        status=true;
        logger.info("Deleted the activity " + activity.toString() + " successfully");
    }catch(HibernateException exception)
    {
        logger.error("Couldn't delete the activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }catch(Exception exception)
    {
        logger.error("Couldn't delete the activity " + activity.toString() + " because of the problem " + exception.getMessage());
    }
    return status;
    }

    public SessionFactory getSessionFactory()
    {
    return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory)
    {
    this.sessionFactory = sessionFactory;
    }

    public Session getSession()
    {
    return session;
    }

    public void setSession(Session session)
    {
    this.session = session;
    }

    public boolean isStatus()
    {
    return status;
    }

    public void setStatus(boolean status)
    {
    this.status = status;
    }
} 
```

**最后，ActivityDAOTest 类**

```
ActivityDAOTest
---------------

package com.adwitiya.vdb.data.activity;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.test.context.ContextConfiguration;

@ContextConfiguration( locations = { "classpath:vdb-servlet.xml", "classpath:vdb-data.xml"})
public class ActivityDAOTest
{
    public ActivityDAOTest()
    {
    }

    @Test
    public void testConstructor()
    {
    Session thisSession = new Configuration().configure().buildSessionFactory().openSession();
    ApplicationContext appcontext = new AnnotationConfigApplicationContext("com.adwitiya.vdb");
    ActivityDAO activityDAO = (ActivityDAO) appcontext.getBean("ActivityDAO");
    Session session = activityDAO.getSession();
    assertEquals(thisSession,session);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:36:21.697

您需要配置 JUnit 以便它使用注释支持 Spring 注入：

```
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class) 
```

然后你可以自动连接你的 DAO 来测试它：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( locations = { "classpath:vdb-servlet.xml", "classpath:vdb-data.xml"})
public class ActivityDAOTest
{
    @Autowired
    private ActivityDAO activityDAO;

    @Test
    public void testConstructor(){
        activityDAO.methodTotest();
    }
} 
```

# c# - 正则表达式解析 IRC 消息

> ID：13959270
> 
> 赞同：1
> 
> 时间：2012-12-19T19:00:44.403
> 
> 标签：c#, regex, irc

我认为用正则表达式解析[IRC 消息会很好。](https://www.rfc-editor.org/rfc/rfc1459)我做到了这一点：

```
(?::(?<Prefix>[^ ]+) +)?(?<Command>[^ :]+)(?<middle>(?: +[^ :]+)*)(?<coda> +:(?<trailing>.*)?)? 
```

然后我将它与以下 .NET 代码一起使用来获取消息的显着元素：

```
Prefix = matches.Groups["Prefix"].Value;
Command = matches.Groups["Command"].Value;

var parameters = new List<string>();
parameters.AddRange(matches.Groups["middle"].Value
    .Split(new[] { " " }, StringSplitOptions.RemoveEmptyEntries));
parameters.Add(matches.Groups["trailing"].Value);

Parameters = parameters.ToArray(); 
```

但我不喜欢我必须在代码中单独拆分它。有没有办法可以从`middle`组中获取一组匹配项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:43:06.207

您可以使用`Captures`重复组的属性，尽管我不建议这样做。

首先，您需要将模式更改为：

```
@"(?::(?<Prefix>[^ ]+) +)?(?<Command>[^ :]+)(?<middle>(?: +[^ :]+))*(?<coda> +:(?<trailing>.*)?)?" 
```

其次，你会这样做：

```
parameters.AddRange(match.Groups["middle"].Captures.
                    OfType<Capture>().
                    Select(c => c.Value)); 
```

# python - 线程的单独工作路径？

> ID：13959271
> 
> 赞同：1
> 
> 时间：2012-12-19T19:00:50.220
> 
> 标签：python, multithreading, path

我正在编写一个 Python 脚本，有时我会在其中更改目录以`os.chdir(IMG_FOLDER)`进行文件操作。只要我只有一个线程，它就可以正常工作（因为我可以在离开函数之前回到我来自的地方）。现在，在多线程的情况下，我需要为每个线程提供一个单独的“操作系统路径”实例，否则它可能会弄乱我的文件操作，嘿？我如何最好地解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:02:13.510

不要使用`os.chdir`. 相反，用于`os.path.join`形成完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:48:20.553

这个问题的最终解决方案是我

*   使用绝对路径，不再是 Perkins 建议的相对路径
*   当在我的主线程中接收到数据时，我将其写入数据，`.tmp`例如，只有在写入过程完全完成后，它才会重命名为我在单独线程中扫描的名称。

# javascript - 为什么当我使用哈希设置 url 时浏览器更新标题？

> ID：13959272
> 
> 赞同：0
> 
> 时间：2012-12-19T19:00:52.950
> 
> 标签：javascript, hash, window.location

`window.location.hash = mylink`每次用户移动地图（添加坐标）时，我都会设置 url。但它总是看起来像页面加载（favicon reloads）。如何在不重新加载的情况下更新该页面的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:08:37.537

我刚刚检查了 Chrome，虽然它确实看起来像 favicon 刷新，但没有网络流量。

# c# - ConnectionLinkFailed 在 GPRS 连接上

> ID：13959273
> 
> 赞同：0
> 
> 时间：2012-12-19T19:00:55.023
> 
> 标签：c#, windows-mobile-6.5, gprs

我正在使用CodeProject的[这个示例代码](http://www.codeproject.com/Articles/29623/Managed-Wrapper-to-Connection-Manager-and-How-to-B)来连接到`GPRS`in `Windows Mobile`。`C#`

我尝试了代码，它工作正常。但是，有时我会收到一条消息说“ConnectionLinkFailed”并且我无法连接到 GPRS。

我必须等待一段时间才能再次连接。重启也解决不了问题。

有谁知道如何避免这个异常？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:12:24.410

MSDN 站点仅声明：

CONNMGR_STATUS_CONNECTIONLINKFAILED 连接链接过早断开。

没有进一步的描述。我假设您的提供商有问题。除此之外，我不依赖连接管理器 (CM) 连接。有时它声明连接可用，但它不是真实的，因为 CM 使用缓存信息。

通常，为了获得连接，您只需发出一个 http 请求。CM 将选择正确的连接。仅当您需要在具有相同目标网络的不同连接之间切换时，CM API 的使用才有用。但我通常不是这种情况，因为您通常只有一个 WiFi 和一个 GPRS 连接到互联网，并且在 GPRS 之前选择 WiFi（由于成本）。

是什么场景让您认为必须使用 CM？

# facebook - 发布到时间线时的 facebook graph api 隐私参数

> ID：13959274
> 
> 赞同：0
> 
> 时间：2012-12-19T19:00:57.040
> 
> 标签：facebook, facebook-graph-api, privacy, facebook-timeline

有谁知道发布到时间线时在哪里可以找到新的隐私参数格式？

在[此页面上](https://developers.facebook.com/docs/reference/api/privacy-parameter/)，他们说不推荐使用某些参数并使用新格式，但是新格式在哪里？

考虑到在页面中间，有一个隐私参数表，不推荐使用的参数表也是如此（“朋友”除外）。不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:55:22.810

该文档有两个表格，一个列在标题下：

> **不推荐使用的参数格式**：下面列出的是隐私参数过去支持的不推荐使用的字段的描述。

该表中的参数可能在短期内有效，但已弃用

在页面的上方，还有另一个表格，列在标题下方

> **隐私参数包含以下字段：**

这些是要使用的。两组参数大致相似，但有区别，您应该只使用第一个表，而不是标记为“已弃用”的表

# c++ - 平均循环值（特别是 HSL 配色方案中的色调）

> ID：13959276
> 
> 赞同：6
> 
> 时间：2012-12-19T19:01:02.343
> 
> 标签：c++, math, colors, hsl

所以我试图弄清楚如何计算一些颜色由 HSL 值表示的对象的平均色调。值得庆幸的是，我偶然发现了[这篇 Stack Overflow 帖子](https://stackoverflow.com/questions/8169654/how-to-calculate-mean-and-standard-deviation-for-hue-values-from-0-to-360)，并着手实施最佳答案中提供的算法（我正在使用 C++）。

不幸的是，我的实现似乎不起作用。在这里，完整的；请注意，虽然我写了“色调”，但我使用的是角度，以度为单位，根据初始实现（从 0-360 角度切换到 0-256 色调，一旦我知道我的代码有效，应该不难）。

```
#include <iostream>    
#include <vector>
#include <cmath>

#define PI (4*atan(1))

int main()
{
    ///
    /// Calculations adapted from this source:
    /// https://stackoverflow.com/questions/8169654/how-to-calculate-mean-and-standard-deviation-for-hue-values-from-0-to-360

    std::vector<double> Hues = {355, 5, 5, 5, 5};

    //These will be used to store the sum of the angles
    double X = 0.0;
    double Y = 0.0;

    //Loop through all H values
    for (int hue = 0; hue < Hues.size(); ++hue)
    {
        //Add the X and Y values to the sum X and Y
        X += cos(Hues[hue] / 180 * PI);
        Y += sin(Hues[hue] / 180 * PI);
    }

    //Now average the X and Y values
    X /= Hues.size();
    Y /= Hues.size();

    //Get atan2 of those
    double AverageColor = atan2(X, Y) * 180 / PI;

    std::cout << "Average: " << AverageColor << "\n";
    return 0;
} 
```

而不是 3 的预期答案（因为在这个方案中 355 应该等于 -5），我得到 86.9951。

有人可以指出我做错了什么吗？这似乎很基本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:10:09.017

`atan2`以相反的顺序接受它的论点。我知道，烦人！所以试试：

```
double AverageColor = atan2(Y, X) * 180 / PI; 
```

它现在给出的答案是 3.00488。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:11:57.027

试试`atan2(Y, X)`。 `atan2(a,b)`类似于`atan(a/b)`，并且您需要平均正弦与平均余弦的反正切。

# jms - 如何在队列中保存 jms 消息直到它被保存？

> ID：13959277
> 
> 赞同：0
> 
> 时间：2012-12-19T19:01:02.950
> 
> 标签：jms, weblogic-10.x

我刚开始使用 Weblogic JMS。我能够将消息发送到队列并使用 messagebean 将它们拉出。现在我想将消息保存到数据库。

所以我的问题是，我如何告诉 JMS 在成功将消息写入数据库之前不要从队列中删除消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:13:43.317

> 我能够将消息发送到队列并使用 messagebean 将它们拉出。

我想您在谈论消息驱动的 bean ( [MDB](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html) )？

> 所以我的问题是，我如何告诉 JMS 在成功将消息写入数据库之前不要从队列中删除消息？

MDB 是隐式容器管理事务的一部分，只要您的事务尚未提交（即，只要您的`onMessage`方法尚未结束），消息就不会被删除。

在回滚的情况下（即您抛出异常或调用`context.setRollbackOnly()`）`MessageDrivenContext`，消息将被重新传递。您可以通过使事务 bean-managed 或 using 来避免这种行为`@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)`，但在您的情况下不应该是这种情况。坚持使用默认配置，一切都应该按照您的意愿工作。

# python - 使用 cython 加速 python 代码

> ID：13959281
> 
> 赞同：5
> 
> 时间：2012-12-19T19:01:19.330
> 
> 标签：python, optimization, cython

我有一个函数，它基本上只是对一个简单定义的哈希函数进行大量调用，并测试它何时找到重复项。我需要用它做很多模拟，所以希望它尽可能快。我正在尝试使用 cython 来做到这一点。cython 代码当前使用正常的 Python 整数列表调用，其值范围为 0 到 m^2。

```
import math, random
cdef int a,b,c,d,m,pos,value, cyclelimit, nohashcalls   
def h3(int a,int b,int c,int d, int m,int x):
    return (a*x**2 + b*x+c) %m    
def floyd(inputx):
    dupefound, nohashcalls = (0,0)
    m = len(inputx)
    loops = int(m*math.log(m))
    for loopno in xrange(loops):
        if (dupefound == 1):
            break
        a = random.randrange(m)
        b = random.randrange(m)
        c = random.randrange(m)
        d = random.randrange(m)
        pos = random.randrange(m)
        value = inputx[pos]
        listofpos = [0] * m
        listofpos[pos] = 1
        setofvalues = set([value])
        cyclelimit = int(math.sqrt(m))
        for j in xrange(cyclelimit):
            pos = h3(a,b, c,d, m, inputx[pos])
            nohashcalls += 1    
            if (inputx[pos] in setofvalues):
                if (listofpos[pos]==1):
                    dupefound = 0
                else:
                    dupefound = 1
                    print "Duplicate found at position", pos, " and value", inputx[pos]
                break
            listofpos[pos] = 1
            setofvalues.add(inputx[pos])
    return dupefound, nohashcalls 
```

如何将 inputx 和 listofpos 转换为使用 C 类型数组并以 C 速度访问数组？我可以使用其他加速吗？setofvalues 可以加速吗？

因此，有一些可以比较的东西，50 次 m = 5000 的 floyd() 调用目前在我的计算机上大约需要 30 秒。

更新：示例代码片段显示如何调用 floyd。

```
m = 5000
inputx = random.sample(xrange(m**2), m)
(dupefound, nohashcalls) = edcython.floyd(inputx) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T23:06:47.133

首先，您似乎必须在函数*内键入变量。*[一个很好的例子是here。](http://docs.cython.org/src/userguide/early_binding_for_speed.html)

其次，`cython -a`对于“注释”，您可以对 cython 编译器生成的代码进行非常出色的分解，并以颜色编码指示它有多脏（阅读：python api 重）。在尝试优化任何东西时，此输出非常重要。

[第三，关于使用 Numpy](http://docs.cython.org/src/tutorial/numpy.html)的著名页面解释了如何以 C 风格快速访问 Numpy 数组数据。不幸的是，它冗长而烦人。然而，我们很幸运，因为最近的 Cython 提供了[Typed Memory Views](http://docs.cython.org/src/userguide/memoryviews.html)，它们既易于使用又*很棒*。在尝试做任何其他事情之前阅读整个页面。

大约十分钟后，我想出了这个：

```
# cython: infer_types=True

# Use the C math library to avoid Python overhead.
from libc cimport math
# For boundscheck below.
import cython
# We're lazy so we'll let Numpy handle our array memory management.
import numpy as np
# You would normally also import the Numpy pxd to get faster access to the Numpy
# API, but it requires some fancier compilation options so I'll leave it out for
# this demo.
# cimport numpy as np

import random

# This is a small function that doesn't need to be exposed to Python at all. Use
# `cdef` instead of `def` and inline it.
cdef inline int h3(int a,int b,int c,int d, int m,int x):
    return (a*x**2 + b*x+c) % m

# If we want to live fast and dangerously, we tell cython not to check our array
# indices for IndexErrors. This means we CAN overrun our array and crash the
# program or screw up our stack. Use with caution. Profiling suggests that we
# aren't gaining anything in this case so I leave it on for safety.
# @cython.boundscheck(False)
# `cpdef` so that calling this function from another Cython (or C) function can
# skip the Python function call overhead, while still allowing us to use it from
# Python.
cpdef floyd(int[:] inputx):
    # Type the variables in the scope of the function.
    cdef int a,b,c,d, value, cyclelimit
    cdef unsigned int dupefound = 0
    cdef unsigned int nohashcalls = 0
    cdef unsigned int loopno, pos, j

    # `m` has type int because inputx is already a Cython memory view and
    # `infer-types` is on.
    m = inputx.shape[0]

    cdef unsigned int loops = int(m*math.log(m))

    # Again using the memory view, but letting Numpy allocate an array of zeros.
    cdef int[:] listofpos = np.zeros(m, dtype=np.int32)

    # Keep this random sampling out of the loop
    cdef int[:, :] randoms = np.random.randint(0, m, (loops, 5)).astype(np.int32)

    for loopno in range(loops):
        if (dupefound == 1):
            break

        # From our precomputed array
        a = randoms[loopno, 0]
        b = randoms[loopno, 1]
        c = randoms[loopno, 2]
        d = randoms[loopno, 3]
        pos = randoms[loopno, 4]

        value = inputx[pos]

        # Unforunately, Memory View does not support "vectorized" operations
        # like standard Numpy arrays. Otherwise we'd use listofpos *= 0 here.
        for j in range(m):
            listofpos[j] = 0

        listofpos[pos] = 1
        setofvalues = set((value,))
        cyclelimit = int(math.sqrt(m))
        for j in range(cyclelimit):
            pos = h3(a, b, c, d, m, inputx[pos])
            nohashcalls += 1
            if (inputx[pos] in setofvalues):
                if (listofpos[pos]==1):
                    dupefound = 0
                else:
                    dupefound = 1
                    print "Duplicate found at position", pos, " and value", inputx[pos]
                break
            listofpos[pos] = 1
            setofvalues.add(inputx[pos])
    return dupefound, nohashcalls 
```

这里没有没有在[docs.cython.org](http://docs.cython.org)上解释的技巧，这是我自己学习的地方，但有助于看到它们融合在一起。

对原始代码的最重要更改在注释中，但它们都相当于向 Cython 提供有关如何生成不使用 Python API 的代码的提示。

顺便说一句：我真的不知道为什么`infer_types`默认情况下不启用。它允许编译器在可能的情况下隐式使用 C 类型而不是 Python 类型，这意味着更少的工作量。

如果您`cython -a`在此运行，您将看到调用 Python 的唯一行是您对 random.sample 的调用，以及构建或添加到 Python set()。

在我的机器上，您的原始代码在 2.1 秒内运行。我的版本在 0.6 秒内运行。

~~下一步是让 random.sample 退出该循环，但我将把它留给你。~~

我已经编辑了我的答案以演示如何预先计算 rand 样本。这将时间缩短到**0.4 秒**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:50:41.703

你需要使用这种特殊的散列算法吗？为什么不对字典使用内置的散列算法？例如：

```
from collections import Counter
cnt = Counter(inputx)
dupes = [k for k, v in cnt.iteritems() if v > 1] 
```

# java - 如何在文本视图中显示数据库查询？

> ID：13959287
> 
> 赞同：1
> 
> 时间：2012-12-19T19:01:46.417
> 
> 标签：java, android, database, sqlite, textview

我必须为一个大学项目制作一个 Hangman 应用程序，目前我已经创建了一个 SQLite 数据库并在其中输入了几个词。我正在尝试运行查询以选择一个随机单词并将其显示在文本视图中，但我无法让结果显示。

这是我到目前为止所拥有的

```
import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.util.Log;
import android.view.Menu;
import android.widget.Button;
import android.widget.TextView;

class Hangman extends Activity {

public TextView wordText;
public Button button02A;
private Button button01B;
private Button button03C;
private Button button04D;
private Button button05E;
private Button button06F;
private Button button07G;
private Button button1H;
private Button button09I;
private Button button10J;
private Button button11K;
private Button button12L;
private Button button13M;
private Button button14N;
private Button button15O;
private Button button16P;
private Button button18Q;
private Button button19R;
private Button button20S;
private Button button21T;
private Button button17U;
private Button button22V;
private Button button23W;
private Button button08X;
private Button button25Y;
private Button button26Z;
private Button button24Voice;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hangman);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_hangman, menu);
    return true;
}

public void assignButtons() {

    wordText = (TextView) findViewById(R.id.wordText);
    button02A = (Button) findViewById(R.id.Button02);
    button01B = (Button) findViewById(R.id.Button01);
    button03C = (Button) findViewById(R.id.Button03);
    button04D = (Button) findViewById(R.id.Button04);
    button05E = (Button) findViewById(R.id.Button05);
    button06F = (Button) findViewById(R.id.Button06);
    button07G = (Button) findViewById(R.id.Button07);
    button1H = (Button) findViewById(R.id.button1);
    button09I = (Button) findViewById(R.id.Button09);
    button10J = (Button) findViewById(R.id.Button10);
    button11K = (Button) findViewById(R.id.Button11);
    button12L = (Button) findViewById(R.id.Button12);
    button13M = (Button) findViewById(R.id.Button13);
    button14N = (Button) findViewById(R.id.Button14);
    button15O = (Button) findViewById(R.id.Button15);
    button16P = (Button) findViewById(R.id.Button16);
    button18Q = (Button) findViewById(R.id.Button18);
    button19R = (Button) findViewById(R.id.Button19);
    button20S = (Button) findViewById(R.id.Button20);
    button21T = (Button) findViewById(R.id.Button21);
    button17U = (Button) findViewById(R.id.Button17);
    button22V = (Button) findViewById(R.id.Button22);
    button23W = (Button) findViewById(R.id.Button23);
    button08X = (Button) findViewById(R.id.Button08);
    button25Y = (Button) findViewById(R.id.Button25);
    button26Z = (Button) findViewById(R.id.Button26);
    button24Voice = (Button) findViewById(R.id.Button24);
}

}

class NewDatabase extends SQLiteOpenHelper {

//Create Database   
private static final String DATABASE_NAME = "myDatabase.db";
private static final String DATABASE_TABLE ="Puzzles";
public static final String COLUMN_PUZZLES = "Puzzlescol";
public static final String COLUMN_ID = "_id";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE = "create table "
          + DATABASE_TABLE + "(" + COLUMN_ID
          + " integer primary key autoincrement, " + COLUMN_PUZZLES
          + " text not null);";

public NewDatabase(Context context, String name,
CursorFactory factory, int version) {
super(context, name, factory, version);
}
//Overriding onCreate and onUpgrade to create database
  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(NewDatabase.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
    onCreate(db);
    }

public void insertRows(){
    ContentValues values = new ContentValues();

    values.put(COLUMN_ID, "1");
    values.put(COLUMN_PUZZLES, "MERMAID");
    values.put(COLUMN_ID, "2");
    values.put(COLUMN_PUZZLES, "SUITCASE");
    values.put(COLUMN_ID, "3");
    values.put(COLUMN_PUZZLES, "OSTRICH");

  }

public String randWord() {
    SQLiteDatabase db  = this.getReadableDatabase();
    Cursor cur = db.query("DATABASE_TABLE Order BY RANDOM() LIMIT 1",
    new String[] { "*" }, null, null, null, null, null);

        return cur.getString(cur.getColumnIndex(COLUMN_PUZZLES));
}

public void showWord(Cursor cur) {
    wordText.setText(cur);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T07:24:45.343

创建自己的 Hungman 应用程序。创建基础 DBHelper。添加一些单词进行测试。设置刽子手逻辑。

最好动态创建 UI 元素。将布局创建为新元素的框，但以编程方式将其放在那里。

```
private LinearLayout lettersLayout;
private final String alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; ***
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_hangman);
lettersLayout = (LinearLayout) findViewById(R.id.lettersLay); **
for (String alphabetLetter : alphabet.split("(?!^)")) {
TextView alphabetLetterTxt = new TextView(this);
alphabetLetterTxt.setText(alphabetLetter);
lettersLayout.addView(alphabetLetter);
} 
```

这是使用 SQLitte 数据库的简单示例：

```
public class DBHelper extends SQLiteOpenHelper {

private static DBHelper instance;
private static final String DATABASE_NAME = "HangmanBase";
    private static final int DATABASE_VERSION = 5;
public static interface WORD extends BaseColumns {
        String TABLE_NAME = "wordTable";
        String WORD = "word";
        String DESCRIPTION = "wordDescription";
    }
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
    private static final String DROP_TABLE = "DROP TABLE IF EXISTS ";
    private static final String UNIQUE = "UNIQUE ON CONFLICT ABORT";
private static final String CREATE_TABLE_WORD = CREATE_TABLE + WORD.TABLE_NAME + " (" + WORD._ID
            + " INTEGER PRIMARY KEY, " + WORD.WORD + " TEXT " + UNIQUE + ", " + WORD.DESCRIPTION + " TEXT);";
private DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
public static DBHelper getInstance(Context context) {
        if (instance == null) {
            instance = new DBHelper(context);
        }
        return instance;
    }
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_WORD);
    }
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(DROP_TABLE + WORD.TABLE_NAME);
        onCreate(db);
    }
public long addWord(String newWord, String newWordDescription) {
        ContentValues values = new ContentValues();
        values.put(WORD.WORD.toUpperCase(Locale.UK), newWord);
        values.put(WORD.DESCRIPTION, newWordDescription);
        return getWritableDatabase().insert(WORD.TABLE_NAME, null, values);
    }
public HangmanWord getRandomWord() {
        Cursor allWordsList = getReadableDatabase().rawQuery("SELECT * FROM " + WORD.TABLE_NAME, null);
        if (allWordsList != null && allWordsList.getCount() > 0) {
            Random random = new Random();
            allWordsList.moveToPosition(random.nextInt(allWordsList.getCount()));
            return new HangmanWord(allWordsList.getString(allWordsList.getColumnIndex(WORD.WORD)),
                    allWordsList.getString(allWordsList.getColumnIndex(WORD.DESCRIPTION)));
        }
        return null;
    }
} 
```

# ruby - 如果系统调用返回错误，则使 rake 任务失败

> ID：13959288
> 
> 赞同：4
> 
> 时间：2012-12-19T19:01:47.353
> 
> 标签：ruby, rake, rake-task

我有一个 Rakefile，我用它来自动化我项目中的一些任务。

在某些任务中，我调用了`system`，但是，即使进程返回错误，任务也会继续执行而不会出现任何问题。

我怎样才能避免这种情况？当某些子进程返回错误时，我想退出 rake。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:05:38.590

您可以评估的返回值[`system`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)

```
system('inexistent command') or exit!(1)
puts "This line is not reached" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-12T03:31:58.103

[`sh`](http://www.rubydoc.info/gems/rake/FileUtils#sh-instance_method)是调用命令的 Rake 方式。它将失败并显示一条简洁的消息。与 相比`system`，`sh`也打印出命令。

# php - 更快的方法？

> ID：13959289
> 
> 赞同：0
> 
> 时间：2012-12-19T19:01:48.287
> 
> 标签：php, arrays, foreach

我有以下代码，但它一次运行一个 foreach 循环。有没有办法让它们同时运行？

```
foreach($json['orders']['cnr_output_ship_to_header'] as $header)
{
    $orders_array[] = $header;
    $guests_array[] = $header['guests']['cnr_output_guest_detail'];
    $items_array[] = $header['items']['cnr_output_item_detail'];
}   

foreach($guests_array as $guests)
{
    pdo_insert('cnr_output_guest_detail', (array)$guests);
}
foreach($items_array as $items)
{
    pdo_insert('cnr_output_item_detail', (array)$items);
}
foreach($orders_array as $orders)
{
    pdo_insert('cnr_output_ship_to_header', (array)$orders);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:07:07.810

这应该工作得很好

```
foreach ( $json['orders']['cnr_output_ship_to_header'] as $header ) {
    pdo_insert('cnr_output_guest_detail', (array)  $header['guests']['cnr_output_guest_detail']);
    pdo_insert('cnr_output_item_detail', (array) $header['items']['cnr_output_item_detail']);
    pdo_insert('cnr_output_ship_to_header', (array) $header);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:07:36.250

为什么不这样：

```
foreach($json['orders']['cnr_output_ship_to_header'] as $header) {
    //$orders_array[] = $header;
    pdo_insert('cnr_output_ship_to_header', (array)$header);
    //$guests_array[] = $header['guests']['cnr_output_guest_detail'];
    pdo_insert('cnr_output_guest_detail', (array)$header['guests']['cnr_output_guest_detail']);
    //$items_array[] = $header['items']['cnr_output_item_detail'];
    pdo_insert('cnr_output_item_detail', (array)$header['items']['cnr_output_item_detail']);

} 
```

# jquery - jquery：将变量添加到变量中

> ID：13959290
> 
> 赞同：1
> 
> 时间：2012-12-19T19:02:10.800
> 
> 标签：jquery

如何将变量值添加到新变量中？我正在修改新闻滑块，我想在字幕中插入“日期”

我试过的：

```
(function( $ ){
        $.fn.accessNews = function(settings){

                $now = new Date();
                var defaults = {
                        // title for the display
                        title: "news:",
                        // subtitle for the display
                        subtitle: "$now", 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T19:03:19.413

取消引用它：

```
{
    // ...

    subtitle: $now,
} 
```

# android - 在应用程序加载时更改默认 xml 图像

> ID：13959294
> 
> 赞同：0
> 
> 时间：2012-12-19T19:02:19.613
> 
> 标签：android, xml

我有一个 android 应用程序，默认情况下显示一系列使用 xml 的 ImageButtons。用户根据他们的输入更改图像。我试图在用户下次加载应用程序时显示更改的 ImageButtons。

示例：ImageButton 以 Android.png 开头（从默认 xml 页面加载） 用户输入文本 ImageButton 更改为 Correct.png

下次加载应用程序时，我希望显示 Correct.png 而不是 Android.png。有没有办法在应用程序启动之前遍历 ImageButtons（按钮不是以编程方式创建的）以在应用程序加载之前为每个按钮设置源值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:09:59.353

您可以对每个按钮使用 findViewById(R.id.button_1) 并根据需要进行设置。然后，您需要存储它应该具有的值，以便您可以加载这些值并为每个值设置 ImageButton 源。您可以将其与 SharedPreferences 或 SQLite 数据库一起存储，具体取决于您需要更改多少。

因此，例如：

```
ImageButton b = (ImageButton)findViewById(R.id.button_1);
b.setImageDrawable(drawable); 
```

您可以为该复选框加载一个drawable，以便您只执行一次，这样效率更高，或者您可以将ImageResource 设置为R.drawable.correct，这会慢一些，因为我假设该复选框可能会设置为多个图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:41:15.740

更好的方法是使用`SharedPreferences`.

```
SharedPreferences sharedPref = getSharedPreferences("userpref", Activity.MODE_PRIVATE);

String image = pref.getString("userchoice","no-image");

if(image.equeals("no-image")
{
     imageView.setBackgroundResource(R.drawable.android);
}
else
{
     //compare here your image
     imageView.setBackgroundResource(R.drawable.Correct);
} 
```

每当用户选择任何其他图像时，只需`preference`使用以下代码编辑您的文件。

```
SharedPreferences.Editor editor = pref.edit();
editor.putString("userchoice","Correct.png"); 
```

# objective-c - Tableview 未使用所有可用空间

> ID：13959304
> 
> 赞同：1
> 
> 时间：2012-12-19T19:03:25.337
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 IOS 应用程序，其中包含一个视图控制器，其中包含一个`UIScrollView`和`UITableView`. 这是使用 self.storyboard instantiateViewControllerWithIdentifier 启动的。

我希望这可能很简单，但我无法让表格视图使用其所有可用空间，即它`UITableView`有足够的高度来容纳 4 行，但是当表格中只有 3 行时它开始使用滚动条。

关于滚动视图，我有一些高度只有 25 的水平内容，但是如果我使`UIScrollView`高度小于 110 左右，那么水平内容将仅部分显示在屏幕上或根本不显示。

OSX Lion 上的 Xcode 4.4.1，IOS 5.1

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:33:38.070

自己修复了问题（正在找主机放一些截图。会更新）。

我在属性检查器中将底部栏从推断设置为选项卡栏，现在它可以工作了。ScrollBar 和 TableView 中以前无法使用的空间现在都可以使用了。这些空间都是标签栏的大小。花了一些时间来解决这个问题，因为即使在此更改之前，标签栏也显示在模拟器上，所以我认为它与标签栏无关。

# floating-point - 大浮点虚参数的幂运算

> ID：13959310
> 
> 赞同：0
> 
> 时间：2012-12-19T19:03:40.677
> 
> 标签：floating-point, floating-accuracy, complex-numbers, exp

如何计算 exp(i * x) where |x| >> 2 圆周率？

我知道它可以用任意精度库来完成，但是有没有一种算法可以稳定地完成它（没有舍入错误），不需要库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:10:42.473

`exp(i*x)`是`cos(x)`+ `i*sin(x)`。即使很大，一个好的数学库也能正确计算`cos(x)`。例如，您应该在几个 ULP 内使用 OS X 或 iOS 标准数学库获得正确的结果。`sin(x)``x`

在 C 中，这应该有效：

```
#include <complex.h>
…
    double complex Y = cexp(I * x); 
```

# jquery - 使用类的jQuery字符计数器？

> ID：13959314
> 
> 赞同：1
> 
> 时间：2012-12-19T19:04:00.380
> 
> 标签：jquery

我有一个带有 textareas 字段的相当长的表单，我想使用类选择器而不是 ID 来识别每个字段的字段和限制。现在，我有这个工作：

```
$(document).ready(function(){
    $("#TextAreaID").counter({
        goal: 500
    });
}); 
```

这适用于一个textarea，但由于我有几个textarea，我想知道一种更好的方法来做到这一点，因为这不起作用：

```
$(document).ready(function(){
    $(".limit500").counter({
        goal: 500
    });
}); 
```

我正在使用这个 jQuery 插件： http: [//meetups.jquery.com/profiles/blogs/jquery-word-and-character](http://meetups.jquery.com/profiles/blogs/jquery-word-and-character)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:08:43.100

循环遍历元素并应用于`.counter`每个元素：

```
$(document).ready(function(){
    $(".limit500").each(function() {
        $(this).counter({
            goal: 500
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:10:23.790

您应该能够将 应用于`counter()`每个元素（完全未经测试） -

```
$(document).ready(function() {
    $('.limit500').each(function() {
        $(this).counter({
            goal: 500
        });
    });
}); 
```

# php - 以编程方式创建冷锋矢量（天气）

> ID：13959321
> 
> 赞同：1
> 
> 时间：2012-12-19T19:04:35.640
> 
> 标签：php, javascript, python, mapserver

有谁知道在给定顶点列表的情况下以编程方式创建冷/暖锋矢量的方法（注意顶点不包含小三角形或半圆；[-105W，40.45N] 等）？

我正在尝试在 Web 地图应用程序上放置“当前前沿位置”覆盖。

我希望使用 PHP、Python、Javascript 甚至地图服务器来完成这项任务，但想看看是否有任何关于从哪里开始的好建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:20:42.380

对于 Python；

您必须先捕获图像，例如使用[Python Imaging Library](http://www.pythonware.com/products/pil/)。您可以使用它的[ImageDraw](http://www.pythonware.com/library/pil/handbook/imagedraw.htm)模块在图像上绘制线条和弧线。

如果你想绘制 ( [Bézier](http://en.wikipedia.org/wiki/B%C3%A9zier_curve) ) 曲线，你需要找到一个可以处理这些的库。例如[cairo](http://www.cairographics.org/)，带有[py-cairo](http://cairographics.org/pycairo/)绑定。

# datatables - 如何将 datatables.js 与 XPages 数据表一起使用？

> ID：13959322
> 
> 赞同：0
> 
> 时间：2012-12-19T19:04:36.743
> 
> 标签：datatables, xpages-ssjs

我正在尝试将 datatables.js 插件与一个数据表一起使用，该数据表显示来自 Notes 旧视图数据源的 3 个计算字段。我遇到的问题是我似乎无法将我的 datatable1 初始化/传递到插件中？我不确定我是否有适用于 datatables.js 的正确库。任何见解将不胜感激。提前致谢。西南

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:this.data>
    <xp:dominoView var="view1" viewName="MyName"></xp:dominoView>
</xp:this.data>

<xp:this.resources>
    <xp:script src="/dataTables.js" clientSide="true"></xp:script>
    <xp:script
        src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css"
        clientSide="true">
    </xp:script>
    <xp:script src="http://code.jquery.com/jquery-1.8.2.js"
        clientSide="true">
    </xp:script>
    <xp:script
        src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"
        clientSide="true">
    </xp:script>
</xp:this.resources>

<xp:eventHandler event="onClientLoad" submit="true"
    refreshMode="norefresh">
</xp:eventHandler>
<xp:dataTable id="dataTable1" rows="10" value="#{view1}" var="rows">
    <xp:column id="column1"><xp:this.facets>
<xp:span xp:key="header">Name</xp:span></xp:this.facets>
        <xp:text escape="true" id="computedField1" value="#{rows.Name}"></xp:text></xp:column>
    <xp:column id="column2">
        <xp:text escape="true" id="computedField2" value="#{rows.Age}"></xp:text>
        <xp:this.facets>
<xp:span xp:key="header">Age</xp:span></xp:this.facets></xp:column>
</xp:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:23:08.497

我认为您应该首先确保将 datatables.js 放在您对 jquery 核心的依赖之下。在渲染阶段，XSP 当前会先渲染一个标签到 dataTables.js，然后再渲染一个标签来加载 jQuery。这应该会导致客户端错误（您可能已经在浏览器的 js 控制台中看到），因为 dataTables.js 脚本尝试从尚未定义的 jQuery 访问 fucntionaliyt，因为 dataTables.js 在 jquery.js 之前加载.

如果这没有帮助 - 您的浏览器 javascript 控制台显示什么？有什么错误吗？

# flash - 在 AGAL 中，当使用“kil”操作码时，DepthTest 是否会跳过该像素？

> ID：13959323
> 
> 赞同：0
> 
> 时间：2012-12-19T19:04:38.300
> 
> 标签：flash, gpu, fragment-shader, stage3d, depth-testing

假设我正在构建一个游戏，并且有一些瓷砖地图来创建多个图层的世界。该视图将是正交的，基本上只是一个自上而下的世界视图。

我正在考虑使用深度测试来比较从上到下（逐层）绘制的精灵。（**注意：我知道这可能不是解决这个问题的最佳方法，但请幽默...**）

如果我有一些具有完全透明边缘的字符精灵（精灵周围的键控颜色或零 alpha），我可以在遇到这种情况时在片段着色器中使用“ **kil** ”操作码以确保 Quad 不呈现精灵透明部分的“洞”？（至少那是我假设会发生的事情）。

**我想一个更简单的问题是......'kil'是否会忽略该像素并简单地留下上次drawTriangles**（）调用之前/之前的任何像素颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:03:11.540

`kil`完全丢弃片段，这意味着没有颜色、模板或深度写入。

# java - 无法添加两个 JTabbedPane

> ID：13959324
> 
> 赞同：0
> 
> 时间：2012-12-19T19:04:38.980
> 
> 标签：java, swing, multiplication, jtabbedpane, jsplitpane

我正在扩展我的程序，该程序目前没有选项卡。我试过像这样添加到标签中：

我宣布它：

```
JTabbedPane mainTab = new JTabbedPane(); 
```

这就是我尝试添加两个选项卡的方式：

```
mainTab.addTab("Main Tab", splitPane);
mainTab.addTab("Main2 Tab", splitPane);
getContentPane().add(mainTab); 
```

这仅添加了最后一个选项卡（main2），仅添加了一个选项卡。

任何帮助都被占用了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:06:55.117

组件只能在单个容器中可见，并且只会出现在添加它的最后一个容器中。您需要创建一个新`JSplitPane`实例及其子组件的新实例。

# spring - 请求的资源在 spring mvc 中不可用

> ID：13959331
> 
> 赞同：0
> 
> 时间：2012-12-19T19:04:59.827
> 
> 标签：spring, spring-mvc

我正在尝试学习 spring mvc 并面临一个问题（这似乎是一个常见的问题）。我已经搜索了很多解决方案，但没有任何帮助...

我的 web.xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring Hello World</display-name>
<welcome-file-list>
    <welcome-file>hello.jsp</welcome-file>
</welcome-file-list>

<listener>
 <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>

<servlet>
    <servlet-name>chatbooster</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>chatbooster</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
</web-app> 
```

我的 chatbooster-servlet.xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans

 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

  http://www.springframework.org/schema/context

   http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.controller" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

当我尝试运行 hello.jsp 时，错误是请求的资源不可用。

你好.jsp：

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="i" uri="http://java.sun.com/jsp/jstl/core" %> 
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     
 <html>
<head>
<title>Home</title>
</head>
<body>
 <h1>Hello World!</h1>

 <hr/>

  <form action="hi">
   Name: <input type="text" name="name"> <input type="submit" value="Submit">
   </form>

 </body>
 </html> 
```

HelloWorldController.ava

```
 @Controller
public class HelloWorldController {

@RequestMapping("/")
 public String hello() {
 return "hello";
 }

@RequestMapping(value = "/hi", method = RequestMethod.GET)
 public String hi(@RequestParam("name") String name, Model model) {
 String message = "Hi " + name + "!";
 model.addAttribute("message", message);
 return "hi";
}

} 
```

编辑1：

问题是由于tomcat服务器而发生的，因为我的简单html页面也没有运行并且它抛出了同样的异常。我使用的是 Tomcat 服务器版本 7。任何人都可以提示我这个异常的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:23:21.180

Tomcat 不知道 hello.jsp，因为它位于 WEB-INF 中。

改变

```
<welcome-file-list>
    <welcome-file>hello.jsp</welcome-file>
</welcome-file-list> 
```

到

```
<welcome-file-list>
    <welcome-file>/</welcome-file>
</welcome-file-list> 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:24:36.340

这可能是 Hello.jsp 的情况。Hello.jsp 的第一个字母是大写的，但在您的控制器中，您返回的是小写的 hello。如果您更改控制器以返回字符串“Hello”，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:19:26.233

谢谢大家的回答。实际上，我只需将 html 和 jsp 页面的位置从 web inf 文件夹更改为 web content 文件夹即可解决我的问题。我不知道它为什么起作用，但页面现在正在由服务器运行。

# ios - 在特定位置分配 UITextView

> ID：13959335
> 
> 赞同：1
> 
> 时间：2012-12-19T19:05:06.453
> 
> 标签：ios, xcode

我在屏幕的中心有一个圆圈，我在这个固定的圆圈（一个 UIImageView）周围分配了一系列 UIlabels。标签的数量由 NSMutableArray 中元素的数量给出，标签的位置取决于标签的数量。我不能给标签一个固定的 x 和 y 坐标，因为标签的数量会有所不同。

我尝试使用此代码：

```
- (void)loadContent{

NSString *filename6 = [[NSUserDefaults standardUserDefaults]objectForKey:@"Setting"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *groupPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename6]];

NSString *fileContent = [[NSString alloc] initWithContentsOfFile:groupPath];

NSMutableArray* array = [[NSMutableArray alloc] initWithArray:[fileContent componentsSeparatedByString:@", "]];

int arrayCount = array.count;
int yCoordinate = (2*M_PI) / arrayCount;
int xCoordinate = ;

for(int i = 0; i < [array count]; i++){

    CGRect textframe = CGRectMake( the xcoordinate, the ycoordinate, 328, 30);
    NSString *nameOfGroup = [array objectAtIndex:i];

    UITextView* theGroupTextLabel;
    theGroupTextLabel = [[UITextView alloc] initWithFrame: textframe];
    [theGroupTextLabel setText: nameOfGroup];
    [theGroupTextLabel setTextColor: [UIColor redColor]];
    [self.view addSubview:theGroupTextLabel];

    //theGroupTextLabel.enabled = NO;
    theGroupTextLabel.backgroundColor = [UIColor clearColor];

    theGroupTextLabel.layer.borderWidth = 3.5f;
    theGroupTextLabel.layer.borderColor = [[UIColor blackColor] CGColor];

    int z;
    z = z + 1;
    theGroupTextLabel.tag = z;

 }
} 
```

但我坚持要找到正确的方程：

```
int yCoordinate = (2*M_PI) / arrayCount;
int xCoordinate = ; 
```

...坐标。有任何想法吗？这是我使用的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:17:39.163

处理圆时，您的 X 和 Y 坐标是`(cos angle, sin angle)`如此之大，以便找出您的 x 和 y 坐标，您可能应该执行以下操作

```
float angle = (2*M_PI) / arrayCount;
int xCoordinate = (cos(angle * i) * circleRadius) + circleCenterX;
int yCoordinate = (sin(angle * i) * circleRadius) + circleCenterY; 
```

这将为您提供标签应出现的圆圈上的点。

**注意**，您需要乘以将`angle`下`i`一个标签移动到正确的位置。在计算角度时，您可能还必须将数组计数加 1，以防止最后一个与第一个标签重叠。

资料来源：[维基百科](http://en.wikipedia.org/wiki/Unit_circle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:16:20.117

这更像是一个数学问题，而不是一个代码问题，但我会试一试。

假设您希望第一个项目位于顶部，然后将项目顺时针围绕主图像放置，您将在执行 for 循环时更改一个变量：角度。

然后，通过将角度和半径（可能是常数）转换为笛卡尔坐标，并将结果添加到图像中心的坐标，计算每次迭代中的 x 和 y 坐标。这需要在 for 循环中完成，而不是在代码中的开头。

您将在循环的每次迭代中添加到角度的量是`2*M_PI / arrayCount`。

这大概是我的想法：

```
- (void)loadContent{

NSString *filename6 = [[NSUserDefaults standardUserDefaults]objectForKey:@"Setting"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *groupPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename6]];

NSString *fileContent = [[NSString alloc] initWithContentsOfFile:groupPath];

NSMutableArray* array = [[NSMutableArray alloc] initWithArray:[fileContent componentsSeparatedByString:@", "]];

int arrayCount = array.count;

CGFloat radius = 300;// <--- INSERT RADIUS HERE
CGFloat angle = 0;// <--- The starting angle
CGPoint center = CGPointMake(300,300); // <--- INSERT CENTER OF ARRANGEMENT

for(int i = 0; i < [array count]; i++){
    int yCoordinate = radius * cos(angle) + center.y;
    int xCoordinate = radius * sin(angle) + center.x;

    CGRect textframe = CGRectMake( the xcoordinate, the ycoordinate, 328, 30);
    NSString *nameOfGroup = [array objectAtIndex:i];

    UITextView* theGroupTextLabel;
    theGroupTextLabel = [[UITextView alloc] initWithFrame: textframe];
    [theGroupTextLabel setText: nameOfGroup];
    [theGroupTextLabel setTextColor: [UIColor redColor]];
    [self.view addSubview:theGroupTextLabel];

    //theGroupTextLabel.enabled = NO;
    theGroupTextLabel.backgroundColor = [UIColor clearColor];

    theGroupTextLabel.layer.borderWidth = 3.5f;
    theGroupTextLabel.layer.borderColor = [[UIColor blackColor] CGColor];

    int z;
    z = z + 1;
    theGroupTextLabel.tag = z;

    // INCREMENT ANGLE
    angle += 2 * M_PI / array.count;
 }
} 
```

# jquery-ui - 为什么不推荐使用 .disableSelection()？

> ID：13959336
> 
> 赞同：42
> 
> 时间：2012-12-19T19:05:06.697
> 
> 标签：jquery-ui, textselection

JQueryUI 1.9 中的 .disableSelection 已弃用。我能找到的唯一解释是，从字面上看，[“禁用文本选择很糟糕。不要使用它。”](http://api.jqueryui.com/disableSelection/) 和[“我们不应该让开发人员搞乱文本选择。这最初是针对交互插件的，但他们现在都在自己正确地处理文本选择。”](http://bugs.jqueryui.com/ticket/7755)

由于没有其他建议，我认为他们的意思是它*总是很*糟糕，但我无法理解他们的原因。双击/三次单击或以其他方式对精心设计的 UI 应用程序进行无意义的选择会不正确地应用文本突出显示效果，并且（对我而言）立即消除了强大用户体验的错觉。

桌面应用程序不会受此影响！桌面环境中的按钮和其他控件是像素区域，无论您对它们做什么（或者它们已损坏），它们看起来都是实心的并且可以直观地行动。Web 应用程序由复杂的 html 框、背景、边框和图像（像素的 Web 模拟）组成的事实没有理由背叛我们与之交互的屏幕元素不是原子的物理对象的错觉。

在下图中，可以说某些文本应该是可选择的，例如面板中可能是应用程序数据的文本段落。但对于某些应用程序，其他部分（例如按钮、选项卡、折叠式标题和模态对话框后面的文本）中的文本将是不可选的，这将是一个合理的*设计选择。*这尤其适用于可拖动/可排序的行为。

![jQuery UI Themeroller，选择了一个区域](../Images/67db82c6e13ec2c937a8bfc0be35377e.png)

1）我是否误解了他们的决定？推荐是否比我意识到的更具体到 JQuery？

2) 如果作为一般性声明，文本应该**始终**可以像这样选择，请提供更完整的解释说明。

3) 如果我还是要这样做，那么在禁用 disableSelection 已弃用的情况下，什么是最高效、最完整、最受尊重、跨浏览器且普遍可访问的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-19T19:15:07.933

您可以在大多数浏览器中使用 CSS 来完成此操作：http: [//jsfiddle.net/fQthQ/](http://jsfiddle.net/fQthQ/)

```
* {
   -ms-user-select: none; /* IE 10+ */
   -moz-user-select: -moz-none;
   -khtml-user-select: none;
   -webkit-user-select: none;
   user-select: none;
}

.selectable {
   -ms-user-select: auto;
   -moz-user-select: auto;
   -khtml-user-select: auto;
   -webkit-user-select: auto;
   user-select: auto;
} 
```

Opera 目前不支持此功能。

有关更多信息，请参阅 MDN 页面：[https ://developer.mozilla.org/en-US/docs/CSS/user-select](https://developer.mozilla.org/en-US/docs/CSS/user-select)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-30T15:26:53.420

禁用文本选择很有用的实际案例是一个`<ul>`元素`<li>`被编程为可拖动（用于排序）。拖动工作正常，除了在用户拖动时选择了文本。当然，这是 disableSelection() 的合法用途。

我知道没有这种方法也可以做到（否则方法一开始就不可能做到）；但我想使用 disableSelection() 的原因是在一个地方简洁地表达我的愿望并让 jQuery-UI 处理我的跨浏览器兼容性问题，而不是必须使用几个 CSS 规则和一些 JS 的组合（对于 IE7） .

我相信此功能已被弃用，因为有人对禁用选择的网站感到恼火，并认为这不是他们应该鼓励的做法。这类似于网络程序员拒绝支持流行的旧版浏览器，因为他们不想鼓励使用它们。这样的程序员会被解雇，但是当你对一个流行的库拥有权力时，你可以侥幸把你的哲学强加给别人。弃用此功能会使想要禁用选择的程序员浪费时间寻找替代方法。通过惩罚作恶者，jQuery-UI 可能会让他们改变自己的方式，我们的社会也不会被禁用选择的网站所淹没。所以你看，有一个非常好的合理化，谁写了“禁用文本选择是不好的。不要”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T21:26:48.890

作为 CSS`user-select: none;`技术的替代方案，我认为简单地防止双击和 mousedown 的默认行为`$(document).on('dblclick mousedown', '.prevent-select', false);`具有一些优点：

1.  如果用户想要在元素*周围拖动光标，仍然允许文本选择。*只是防止用户快速点击时烦人的文本选择。
2.  更好的浏览器支持。
3.  jQuery 团队未弃用（代码审查中没有邪恶的目光。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T14:42:10.207

我完全同意@WesleyMurch，希望我能给你更多的+1 :) 我也觉得，JS 不应该是前进的方向，css 可能会更好......，

如果您需要选择切换（在某些情况下如果是动态的），您可以使用 jquery 在类之间切换，（旧的 IE 浏览器）您可能会问？？？

嗯，这是一个很好的方法（微妙的工具），可以阻止人们因为他们错过的东西而继续使用 OLD IE。

[http://caniuse.com/#search=user-select](http://caniuse.com/#search=user-select)

（虽然 IE 8/9 [从用户数量的百分比来看] 是一个很大的数字，但这取决于你真正关心的程度）

正如@Shmiddty 解释的那样，我会使用 CSS 选项，但也许可以在您继续使用时启用和禁用，但这只是我的意见:)

# java - Java中的toString方法调用

> ID：13959337
> 
> 赞同：0
> 
> 时间：2012-12-19T19:05:08.270
> 
> 标签：java, object, tostring

> **可能重复：**
> [为什么在打印对象时调用 toString() 方法？](https://stackoverflow.com/questions/8555771/why-is-the-tostring-method-being-called-when-i-print-an-object)

我在下面有这段代码。**除了使用Room Class 中**的 toString 方法的输出之外，我了解其他所有内容。在**HotelMain**类中，我只是调用了**Hotel 类中的****displayRooms 方法**。但是，当我运行程序时，toString 输出显示在控制台中。

 **如果我是对的 toString() 是对象中值的文本表示。但是，我不确定我在哪里调用了 toString 方法。

有人可以解决我的困境吗？谢谢你。

**酒店等级**

```
public class Hotel {

private String hotelName;
private Room[] rooms;

public Hotel(String hotelName, int numberOfRooms) {
    this.hotelName = hotelName;
    this.rooms = new Room[numberOfRooms];
}

public void addRooms(Room room) {

    int position = -1;

    for (int i = 0; i < this.rooms.length; i++) {
        Room tempRoom = rooms[i];

        if (tempRoom == null) {
            position = i;
            break;
        }
    }

    if (position != -1) {
        rooms[position] = room;
        System.out.println("New room added at postion " + position);

    } else {
        System.out.println("Addition of room failed.");
    }
}

public void displayRooms() {

    System.out.println("The Hotel: " + this.hotelName + " has the following rooms.");

    for (int i = 0; i < this.rooms.length; i++) {
        Room tempRoom = rooms[i];
        if (tempRoom != null) {
            System.out.println(tempRoom);
        }
    }

} 
```

**房间等级**

```
public class Room {

private int roomNumber;
private int numberOfBeds;
private boolean smokingOrNonSmoking;

public Room() {

}

public Room(int roomNumber, int numberOfBeds, boolean smokingOrNonSmoking) {
    this.roomNumber = roomNumber;
    this.numberOfBeds = numberOfBeds;
    this.smokingOrNonSmoking = smokingOrNonSmoking;
}

@Override
public String toString() {
    return "Room [roomNumber=" + roomNumber + ", numberOfBeds="
            + numberOfBeds + ", smokingOrNonSmoking=" + smokingOrNonSmoking
            + "]";
} 
```

}

**梅恩酒店**

```
public class HotelMain {

public static void main(String[] args) {

Hotel hotel = new Hotel("MahaRani Chain of Hotels", 10);
Room room1 = new Room(4, 2, true);
Room room2 = new Room(2, 1, false);
Room room3 = new Room(6, 3, true);
Room room4 = new Room(6, 4, false);

hotel.addRooms(room1);
hotel.addRooms(room3);
hotel.addRooms(room4);
hotel.addRooms(room2);

hotel.displayRooms();

} 
```

}

**安慰**

![在此处输入图像描述](../Images/6a7bd3c658463f7be6a6dc4ff9b710b2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:06:50.960

```
Room tempRoom = rooms[i];
if (tempRoom != null) {
    System.out.println(tempRoom);
} 
```

您的`displayRooms()`方法中有上述代码。它打印`tempRoom`，这是 的引用`Room`，因此它调用类`toString()`中覆盖的方法`Room`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T19:06:51.867

你打电话时

```
System.out.println(tempRoom); 
```

Room的`toString()`方法会自动调用`tempRoom`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T19:07:03.537

在这一行

```
System.out.println(tempRoom); 
```

这和

```
 System.out.println(tempRoom.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T19:16:03.753

`toString`是`Object`类的一个特殊方法，这里是它的[描述](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)：

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。建议所有子类重写此方法。

此方法广泛用于应将对象转换为文本表示的那些地方。当您将对象打印到`PrintStream`（`System.out`在这种情况下）时，此流调用`toString`将此对象转换为字符串。**

# powershell - 展平文件，包括文件名中的文件夹名

> ID：13959340
> 
> 赞同：1
> 
> 时间：2012-12-19T19:05:35.390
> 
> 标签：powershell

我想展平文件夹结构，并以一种方式将每个父目录名称包含到文件名中。我试过这个，但得到一个错误：

```
Missing ')' in method call 
```

我完全不明白有什么问题

```
(ls -r -include *.ext) | % { mv -literal $_\3 $_\3.Name.Insert(0, [String]::Format("{0} - ", $_\3.Directory.Name))} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:28:29.130

试试这个：

```
ls . -r *.ext -name | ?{!$_.PSIsContainer} | mi -dest {$_ -replace '\\','_'} -whatif 
```

或者如果在 V3 上：

```
ls . -r *.ext -name -file | mi -dest {$_ -replace '\\','_'} -whatif 
```

删除`-whatif`以实际执行移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:56:21.363

您想展平文件夹结构并将所有重命名的文件移动到根目录吗？例如：

```
$rootPath = 'C:\TempPath'
(ls $rootPath -r -include *.ext) | %{
    [string]$newFilename = $_.Name.Insert(0, [String]::Format("{0} - ", $_.Directory.Name))
    #write-host $newFilename
    mv -literal $_ "$rootPath$newFilename"
} 
```

# c++ - g++ std::bind 错误与 shared_ptr

> ID：13959343
> 
> 赞同：4
> 
> 时间：2012-12-19T19:05:47.670
> 
> 标签：c++, c++11, g++, bind, shared-ptr

我无法理解为什么以下代码无法编译。

```
#include <memory>
#include <functional>

class Foo 
{
public:
  void Bar(int i) {}
};

void X(std::function<void(std::shared_ptr<Foo>)> f)
{

}

int main()
{
  std::shared_ptr<Foo> f(new Foo);
  auto f1(std::bind(&Foo::Bar, std::placeholders::_1, 1));
  X(f1);
  return 0;
} 
```

g++ (4.6.3) 输出...

```
n file included from /usr/include/c++/4.6/memory:80:0,
                 from test.cpp:1:
/usr/include/c++/4.6/functional: In static member function ‘static void std::_Function_handler<void(_ArgTypes ...), _Functor>::_M_invoke(const std::_Any_data&, _ArgTypes ...) [with _Functor = std::_Bind<std::_Mem_fn<void (Foo::*)(int)>(std::_Placeholder<1>, int)>, _ArgTypes = {std::shared_ptr<Foo>}]’:
/usr/include/c++/4.6/functional:2148:6:   instantiated from ‘std::function<_Res(_ArgTypes ...)>::function(_Functor, typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type) [with _Functor = std::_Bind<std::_Mem_fn<void (Foo::*)(int)>(std::_Placeholder<1>, int)>, _Res = void, _ArgTypes = {std::shared_ptr<Foo>}, typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type = std::function<void(std::shared_ptr<Foo>)>::_Useless]’
test.cpp:19:7:   instantiated from here
/usr/include/c++/4.6/functional:1778:2: error: no match for call to ‘(std::_Bind<std::_Mem_fn<void (Foo::*)(int)>(std::_Placeholder<1>, int)>) (std::shared_ptr<Foo>)’
/usr/include/c++/4.6/functional:1130:11: note: candidates are:
/usr/include/c++/4.6/functional:1201:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) [with _Args = {_Args ...}, _Result = _Result, _Functor = std::_Mem_fn<void (Foo::*)(int)>, _Bound_args = {std::_Placeholder<1>, int}]
/usr/include/c++/4.6/functional:1215:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) const [with _Args = {_Args ...}, _Result = _Result, _Functor = std::_Mem_fn<void (Foo::*)(int)>, _Bound_args = {std::_Placeholder<1>, int}]
/usr/include/c++/4.6/functional:1229:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) volatile [with _Args = {_Args ...}, _Result = _Result, _Functor = std::_Mem_fn<void (Foo::*)(int)>, _Bound_args = {std::_Placeholder<1>, int}]
/usr/include/c++/4.6/functional:1243:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) const volatile [with _Args = {_Args ...}, _Result = _Result, _Functor = std::_Mem_fn<void (Foo::*)(int)>, _Bound_args = {std::_Placeholder<1>, int}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:16:50.477

这是我在 4.7 中修复的 GCC 错误，但我不记得确切是哪个错误。我会试着弄清楚...

**编辑：**啊哈，它是[PR 55463](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55463)，所以在 4.7 中没有固定，它只在 GCC 主干上固定（什么是 4.8）

错误是返回的调用包装器`mem_fn`不接受右值，并且您的`std::function<void(std::shared_ptr<Foo>)`类型将右值传递`shared_ptr<Foo>`给调用包装器返回的`bind`.

作为一种解决方法，您可以将函数签名更改为：

```
void X(std::function<void(const std::shared_ptr<Foo>&)> f) 
```

我不认为我可以将修复程序反向移植到 4.7 分支，因为由于那个错误，我对它进行了一些相当大的更改，`mem_fn`这并不适合稳定的发布分支（我还在标准中发现了一个新[缺陷](http://cplusplus.github.com/LWG/lwg-active.html#2219))

# synchronization - RabbitMQ：如何创建同步集群

> ID：13959344
> 
> 赞同：2
> 
> 时间：2012-12-19T19:05:48.913
> 
> 标签：synchronization, cluster-computing, rabbitmq, high-availability

我有一个带有 3 个节点的 RabbitMQ 集群（版本 3.0.1）。我想要，我的队列每次都在所有可用的 3 个节点上。
我这样创建集群：

节点1：节点2：rabbitmqctl join_cluster rabbit@node1 node3
：rabbitmqctl join_cluster rabbit@node1

在此之后，我设置了以下策略：

模式： **^(?!amq.).***
定义：**ha-mode: all**

如果我现在开始我的 3 个节点并在我的 1 个节点中编写一些想法，那么我在所有 3 个节点上都有它并且它可以工作。但是，如果与其中 1 个节点的连接断开，并且该节点在一段时间后又回来了，则该节点不再与其他节点同步。
我该如何解决这个问题？我希望所有节点每次都同步，即使在停机之后也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T12:48:52.750

现在使用 3.1.x 版本有一个选项 ha-sync-mode 可以设置为自动，这可以解决您的问题：

> 通过将 ha-sync-mode 策略键设置为自动，可以将队列设置为自动同步。ha-sync-mode 也可以设置为手动。如果未设置，则假定为手动。

查看[http://www.rabbitmq.com/ha.html](http://www.rabbitmq.com/ha.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:14:39.627

对不起，你的坏消息，但这是不受支持的。当新节点加入集群时，它不会收到任何现有消息。

来自**非同步奴隶** [http://www.rabbitmq.com/ha.html](http://www.rabbitmq.com/ha.html)：

> 节点可以随时加入集群。根据队列的配置，当一个节点加入集群时，队列可能会在新节点上添加一个从属节点。此时，新的 slave 将是空的：它不会包含任何现有的队列内容，并且目前没有同步协议。这样的从站将接收发布到队列的新消息，因此随着时间的推移将准确地表示镜像队列的尾部。

**更新：**

答案适用于 2.8.x 版本的 RabbitMQ

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T11:52:06.820

我决定通过编辑rabbitmq-server init.d 脚本（/etc/init.d/rabbitmq-server）来解决这个问题。

在成功启动后添加以下行（在**rabbitmq_start**函数中）将导致新加入的成员同步所有队列：

```
$CONTROL list_queues | cut -f1 | tail -n +2 | head -n -1 | xargs -n 1 $CONTROL sync_queue > /dev/null 
```

即使它不是最干净的解决方案，它仍然是一个解决方案。不喜欢修改分发文件。

# c# - Application.Exit() 无法运行

> ID：13959346
> 
> 赞同：0
> 
> 时间：2012-12-19T19:06:15.567
> 
> 标签：c#, winforms

> **可能重复：**
> [Application.Exit](https://stackoverflow.com/questions/1057151/application-exit)

我有一个`Application.Exit()`无法运行的 Winforms 应用程序。

```
public Form1()
{       
   InitializeComponent();           
   path=parseINI();//Gets path from ini file           
} 
```

就我而言，`Application.Exit()`是从 parseINI 方法调用的，但它不起作用。是应用程序启动时调用它的问题吗？我把它放在加载表单后运行的另一种方法中，它在那里工作。我确实在我的 parseINI 方法中使用了 Environment.Exit，并且效果很好（尽管它用于控制台应用程序而不是 WinForms）。

**编辑：**我可能应该添加它作为检查，以确保正在读取的文件格式正确，如果是，则不调用它，否则程序退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:10:43.370

`Application.Run`这可能是因为在 Form ctor 执行时您还没有启动应用程序。

常见的启动代码模板如下所示：

```
Application.Run(new Form1()); 
```

如果是这种情况，请在 Application.Run 之前调用 Application.Exit。因此，在您调用 exit 之后，您实际上调用了 Run，因此应用程序运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:08:52.340

在 parseINI() 中调用 Form.Close() 方法而不是 Application.Exit()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:22:26.787

该`Environment.Exit()`方法终止应用程序，关闭应用程序线程。确实，从[文档](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)中：

> 终止此进程并为底层操作系统提供指定的退出代码。

为什么你必须从你的`parseINI`方法中关闭你的应用程序？

无论如何，方法调用对`Application.Exit()`您不起作用，因为阅读[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit%28v=vs.71%29.aspx)：

> 此方法停止所有线程上所有正在运行的消息循环并关闭应用程序的所有窗口。此方法不会强制应用程序退出。Exit 方法通常在消息循环中调用，并强制 Run 返回。要仅退出当前线程的消息循环，请调用 ExitThread。

然后，您可以将此行添加到您的构造函数中，以“运行”应用程序，允许您使用`Application.Exit()`：

```
Application.Run(new YourForm()); 
```

你可以在这里找到一个有趣的讨论：http: [//geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx](http://geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx)

阅读[此答案](https://stackoverflow.com/a/554429/702048)以了解详细信息。此外，请阅读[这个](https://stackoverflow.com/questions/905544/whats-difference-between-environment-exit-and-application-shutdown/905584#905584)`Environment.Exit()`重要的 SO 问题，以更好地理解和之间的区别`Application.Exit()`。

# c# - string.IsNullOrEmpty + 实体框架 5

> ID：13959347
> 
> 赞同：3
> 
> 时间：2012-12-19T19:06:15.383
> 
> 标签：c#, .net, entity-framework, linq-to-sql

自从我使用 Entity Framework 已经有一段时间了，我正在重新使用 EF 5，但是这个查询不会：

```
SELECT 
    c.OrganizationName as CompanyName,
    c.OrganizationKey as CompanyId,
    ISNULL(a.Line1, '') as Line1,
    ISNULL(a.Line2, '') as Line2,
    a._CityStateZip as CityStateZip
FROM Organizations c
JOIN Addresses a ON c.AddressKey = a.AddressKey
WHERE c.OrganizationName LIKE @term + '%'
AND c.IsSuspended = 0
AND c.IsActive = 1 
```

等同于：

```
var results = (from c in adms.Organizations
               where c.OrganizationName.StartsWith(term)
               where !c.IsSuspended
               where c.IsActive
               select new
               {
                 CompanyName = c.OrganizationName,
                 CompanyId = c.OrganizationKey,
                 Line1 = (string.IsNullOrEmpty(c.Address.Line1) ? string.Empty : c.Address.Line1),
                 Line2 = (string.IsNullOrEmpty(c.Address.Line2) ? string.Empty : c.Address.Line2),
                 CityStateZip = c.Address._CityStateZip
               }).ToList(); 
```

当我运行 LINQ to SQL 代码时，我收到以下错误：

```
Could not translate expression 
'Table(Organization).Where(c => c.OrganizationName
.StartsWith(Invoke(value(System.Func`1[System.String]))))
.Where(c => Not(c.IsSuspended))
.Where(c => c.IsActive)
.Select(c => new <>f__AnonymousType2`5(
CompanyName = c.OrganizationName, 
CompanyId = c.OrganizationKey, 
Line1 = IIF(IsNullOrEmpty(c.Address.Line1), 
Invoke(value(System.Func`1[System.String])), c.Address.Line1), 
Line2 = IIF(IsNullOrEmpty(c.Address.Line2), 
Invoke(value(System.Func`1[System.String])), c.Address.Line2), 
CityStateZip = c.Address._CityStateZip))' 
into SQL and could not treat it as a local expression. 
```

我在这里完全错过了什么吗？我以为我可以将 string.IsNullOrEmpty 与 LINQ to SQL 一起使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:18:50.337

替换`string.Empty`为`""`。遗憾的是，EF 不支持`string.Empty`.

一般来说，EF LINQ 支持非常糟糕。始终注意这个问题。这是 EF 悲伤的常见原因。

LINQ to SQL 在通用语言习语方面没有问题。

顺便说一句，你可以**更好地**重写这个：`c.Address.Line1 ?? ""`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:12:17.940

```
(string.IsNullOrEmpty(c.Address.Line1) ? string.Empty : c.Address.Line1) 
```

正在被翻译成

```
IIF(IsNullOrEmpty(c.Address.Line1), Invoke(value(System.Func`1[System.String])), c.Address.Line1) 
```

您所做的只是将字符串值设置为`""`null 或`""`已经。

你应该尝试只使用`Line1 = c.Address.Line1`

# scala - 如何在Scala中打印元组的所有值？

> ID：13959348
> 
> 赞同：3
> 
> 时间：2012-12-19T19:06:19.033
> 
> 标签：scala, tuples

我现在正在学习 Scala，我试图将一个元组传递给一个使用 for 循环打印所有元素的函数。这是我到目前为止所做的，但显然出了点问题。

```
object Tuple_demo {
    def main(args: Array[String])
    {
      var tup1=(10,"test",6.8)
      printMe(tup1)
    }
    def printMe(tup1:Tuple1)
    {
      for (ob<-tup1)
      {
        println(ob)
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T19:10:01.090

所有 Scala 元组都扩展[Product](http://www.scala-lang.org/api/current/scala/Product.html)。您可以使用它`productIterator`来迭代元组项：

```
scala> (10,"test",6.8).productIterator.foreach(println)
10
test
6.8 
```

* * *

`printMe`您的函数的类型声明不正确。它应该是一个三元元组，其中指定了其项目的类型，即`tup1: Tuple3[Int, String, Double]`. 此外，Scala 有一个用于元组类型声明的糖，因此以下内容也是正确的：`tup1: (Int, String, Double)`.

# java - maven-compiler-plugin声明应该放在哪里：在 或者 ?

> ID：13959358
> 
> 赞同：7
> 
> 时间：2012-12-19T19:06:52.723
> 
> 标签：java, maven

我有一个多模块 maven 项目，我想让我的所有子模块都使用`maven-compiler-plugin`root 中指定的`pom.xml`。我应该在哪里放置`maven-compiler-plugin`声明（在 root 中`pom.xml`）：在`<plugins>`部分或`<pluginManagement>`部分中？问题也涉及到`maven-release-plugin`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T19:29:04.057

这 2 个部分 (`plugins`和`pluginManagement`) 的用途略有不同。

第一个（`plugins`）用于指定您的项目（以及从父项目继承的所有子项目）的构建过程。如果您在此部分中包含一些插件，它将在每个子项目中执行，无论其类型如何。

第二个 ( `pluginManagement`) 用于指定从父项目继承的所有项目的通用插件设置（例如，插件版本和配置）。

说到你提到的 2 个插件。`maven-compiler-plugin`是一个默认插件，无论你是否指定它都会被执行。`pluginManagement`将其包含在其中并在那里指定其配置是有意义的。`maven-release-plugin`但是，默认情况下不绑定到任何生命周期阶段。因此，如果您希望它在所有子项目中执行，则必须将其添加到`plugins`section.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:15:53.017

这取决于你追求什么。如果您将它们包含在该`plugins`部分下，它们将为所有 POM 执行......*包括 parent*。如果您只希望子 POM 执行插件目标，那么您应该将它们放在`pluginManagement`. 但是，在这种情况下，您必须在每个子 POM 中启用它们。

也就是说，最简单的方法是`plugins`先尝试。如果没有构建失败，那么您就可以开始了。否则，您将需要将部分或全部移至`pluginManagement`.

# c# - 如何使用保存在 DB 中的值来实现 Like/Unlike 按钮（或链接）？

> ID：13959362
> 
> 赞同：0
> 
> 时间：2012-12-19T19:06:56.470
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我计划开发一个网站 [asp.net mvc4、C#、simplemembership 和 EF]，我的用户可以在其中创建帖子，并且用户（帖子的所有者或其他人）可以喜欢/不喜欢它。在这一点上，我看不到如何实现这个功能。我想了很多事情：

首先，我的 post 类将有一个布尔 Like 属性，然后，当用户单击 like 链接（或按钮）时，它会将值保存在我的数据库中。但在那种情况下，我不知道哪个用户喜欢这个帖子。

其次，有 post 类，以及一个类似的类，里面有一个 postId 和一个 userId。同样的原理，当用户点击点赞链接（或按钮）时，它会将二进制值保存在我的数据库中。

我认为第二个是最好的（也许还有另一种更好的解决方案），但我仍然不知道如何处理该链接或按钮的操作方法，例如当用户喜欢时会显示“不喜欢”帖子，以及喜欢它的用户的姓名。

我不知道我是否清楚...我想知道您是否对如何操作有任何想法，或者链接到哪里可以发送给我...任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:29:05.293

我将实现一个控制器，该控制器采用按下like 按钮的用户的名称。将帖子的名称和 ID 保存在数据库中的一个表中，然后当您想了解该帖子有多少喜欢时，只需对数据库运行一个选择。

select count(*) from likes where linkId = [value];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:32:49.850

您应该创建一个表来存储至少具有用户身份和帖子 ID 的类似事件。然后，您可以创建一个帖子视图，其中包含喜欢的计数冒号等。

# asp.net-mvc - 如何检测 ASP.NET MVC 本地化中是否支持某种语言

> ID：13959363
> 
> 赞同：1
> 
> 时间：2012-12-19T19:07:00.383
> 
> 标签：asp.net-mvc, localization

我在我的 ASP.NET MVC 应用程序 ( `/lang/{culture}/{controller}/{action}/{id}`) 和我的基本控制器中使用自定义路由，我正在检测`culture`参数值的存在并设置当前线程区域性。但是，如果有人设法导航到没有任何资源的语言，而不是默默地退回到默认文化，我想显示一条消息，表明缺乏语言支持。

如何检测当前文化是否没有指定资源，而不是默默地回退到默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:49:24.710

问题是，在实践中，以编程方式确定您是否具有给定文化的本地化是很复杂的。您可能有一个程序集的给定区域性的附属程序集，但没有另一个程序集。更糟糕的是，一个附属程序集可能包含一些资源的翻译，但不是全部。这可能是故意的：对于 en-GB，您可能更喜欢只采用“覆盖而不是重复”的方法，并且只在这里和那里定义一些资源，只在您与基本英语不同的地方。

因此，最简单和最清晰的方法可能是在您的应用程序代码中维护一个硬编码的受支持文化的主列表，然后将您的语言支持警报逻辑基于此列表。添加新本地化时，您需要在代码中更新该列表。但是我们大多数人都是通过将新资源文件签入到解决方案中来进行本地化的——代码和本地化资源之间还没有完全分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:19:19.760

似乎没有直接的 API 可以为您提供资源文件中可用文化的列表。

一种可能的解决方案是枚举资源文件并解析出语言代码。

看看这个 SO 问题：[从资源中获取可用语言](https://stackoverflow.com/questions/8106507/get-available-languages-from-resource)

# c++ - 数据结构：我得到了不想要的价值

> ID：13959368
> 
> 赞同：0
> 
> 时间：2012-12-19T19:07:11.040
> 
> 标签：c++, data-structures

我花了很多时间来理解这个问题。我不知道为什么会出现。也许你们可以找出并理解这个问题。我写了必要的评论。这是我的代码：

```
 #include <iostream>
        struct node{
    ////I am creating node structure.
            int number;
            node *next;
            node *previous;
        };
        struct list{
////I am creating list structure.It has head and tail pointers
            node *head;
            node *tail;
            void add(node *);  //  Add function
            void create();  //  Create function
            void deleteList();  //  Delete function.
        }emrah;
        using namespace std;
        int main(){
            emrah.create();  //  a list called 'emrah' has been created.
            cout<<"Type 1."<<endl;  //  So that we lead user to add a node.
            int selection;
            cin>>selection;
            if (selection==1){  //  Suppose user typed 1.
                node x;//  new node is x.
                emrah.add(&x);  //  x has been sent.
                cout<<x.number;  //  Problem is here.On the command line,it shows like -9231
            }
        }
        void list::create(){  //  Create function.It has no problem.
            head=NULL;
            tail=NULL;
        }
        void list::add(node *Node){  //  I think problem is around this function.
            Node=new node;
            cout<<"Sayi gir"<<endl;
            cin>>Node->number;
            cout<<Node->number;
            head=tail=Node;
        } 
```

我得到的 x 值与我在命令行上键入的值不同。我错过的点在哪里？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:19:41.770

此外，您`Node`使用接收用户输入的新对象覆盖参数。`x`从来没有被触及过`list::add`。

# hadoop - 我可以提交具有多个配置文件的 oozie 作业吗？

> ID：13959369
> 
> 赞同：11
> 
> 时间：2012-12-19T19:07:12.230
> 
> 标签：hadoop, configuration-files, oozie

从 Oozie CLI 我想做这样的事情：

```
oozie job -oozie http://host:port/oozie -config jobConfig.properties, baseConfig.properties -submit 
```

我正在运行许多不同的作业，其中 .properties 文件的一部分是相同的。我希望能够将该重复部分移动到单个 baseConfig.properties 文件中，并在我提交作业时将其与作业特定部分结合起来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T21:22:30.890

如果覆盖的属性数量很少，您可以只引用基本配置文件，然后`-Dprop1=value`为要自定义的每个属性使用符号。

否则我认为你有两个（可能三个）替代方案（因为你不能将多个配置选项传递给当前的 OOZIE 客户端）：

1.  创建一个脚本，将基础和特定于作业的属性文件连接在一起，并使用合并文件的名称运行 oozie
2.  使用来自[OozieCLI](http://svn.apache.org/viewvc/oozie/trunk/client/src/main/java/org/apache/oozie/cli/OozieCLI.java?view=markup)的源代码作为起点，编写一个可以处理`-config`选项的 CSV 值或可以处理多个`-config`参数实例的扩展类
3.  您是否能够将公共属性移动到每个操作的静态 jobXml 文件中，那么您只需要一个配置文件来处理作业运行之间的实际差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T21:29:04.260

我可以将默认值放入 config-default.xml 文件中，如下所述：http: [//oozie.apache.org/docs/3.3.2/WorkflowFunctionalSpec.html#a4.1_Workflow_Job_Properties_or_Parameters](http://oozie.apache.org/docs/3.3.2/WorkflowFunctionalSpec.html#a4.1_Workflow_Job_Properties_or_Parameters)

它在大多数情况下都有效。

# php - jquery优化ajax请求？php和js

> ID：13959372
> 
> 赞同：1
> 
> 时间：2012-12-19T19:07:29.713
> 
> 标签：php, javascript, jquery, ajax

我有按钮。单击此按钮发送`$.post()`请求并将项目添加到购物篮。我希望如果用户快速单击按钮十次，它不能发送 10 个请求，但只有一个宽度计数 10。这样的代码：

```
<div class='qty'>
<input type='text' id="qty" value='1'>
<a class='button' href='#'>add To Basket</a>

</div> 
```

脚本：

```
$(document).ready(function(){

  $(".button").click(function(){

    var qty=$(this).parent().find(input[type='text']).val();

    $.post('/ajax.php', "qty="+qty, function(){
      $(this).parent().find(input[type='text']).val("1");

    });

  });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:20:57.807

您需要将点击保存在一个变量中，并在每次点击后等待一小段时间，然后再进行最终发布。
这是一个植入示例，用户每次点击时，他还有 100 毫秒的时间再次点击，然后将其添加到总点击次数中。只有最后一次单击会导致 post 事件发生，之后单击将重置为 0。
在 post 期间，该按钮被禁用以防止进一步单击。

```
$(document).ready(function(){
    var clicks = 0;
    var timeoutId = 0;
    // putting the post in a separate function prevents unnecessary closures 
    var doPost = function(){
        $(".button").attr("disabled", "disabled");
        $.post('/ajax.php', "qty="+clicks, function(){
            $(this).parent().find(input[type='text']).val("1");
            clicks = 0;
            $(".button").removeAttr("disabled");
        });
    };
    $(".button").click(function(){
        clearTimeout(timeoutId);
        timeoutId = setTimeout(doPost, 100);
        clicks++;
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:23:39.920

这是一个基本的去抖动问题。更改`<input id="qty">`为`<input class="qty">`和：

```
$('.button').click(function(e) {
    var btn = $(this), qty = btn.parent().find('.qty');

    clearTimeout(btn.data('timeout'));

    qty.val(qty.val()+1);

    btn.data('timeout', setTimeout(doPost(qty), 1000));
});

function doPost(el) {
     return function() {
         $.post('/ajax.php', {qty:el.val()});
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:20:15.017

您可以在将调用的处理程序中设置[一小段](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)时间（例如 1 秒）（而不是直接发布值）。超时处理程序必须全局保存到所有执行的变量中。此外，每次执行都必须检查 previos 超时是否仍然有效。如果是，请终止旧超时并设置新超时。如果没有，只需设置新的。`.button#onclick``$.post()``.button#onclick``.button#onclick`

因此，每次单击按钮都会终止旧超时并设置新超时。只会执行最后一次单击的 setTimeout 代码体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T19:27:23.937

“快”是什么意思？可能您想使用像[下划线这样的`debounce`](http://documentcloud.github.com/underscore/docs/underscore.html#section-63)计时器功能（如果您不想包含整个下划线，您可以将其剪掉并单独使用）：

```
<div class='qty'>
   <input type='text' id="qty_num" value='1'>
   <a class='button' id="qty_add" href='#'>add To Basket</a>
   <output id="qty_out">0</output><label for="qty_out"> items in basket</label>
</div> 
```

```
$(document).ready(function() {
    var count = 0;
    function send() {
        $.post('/ajax.php', {qty: count}, function(result){
            $("#qty_out").val(result);
        });
        count = 0; // reset
    }
    var sendAfterSecond = _.debounce(send, 1000); // here
    $("#qty_add").click(function(e) {
         var num = parseInt($("#qty_num").val());
         count += num;
         sendAfterSecond();
    });
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-19T19:13:52.160

```
$(document).ready(function(){

    $(".button").click(function(){

    // disable the button
    $(this).attr("disabled", "disabled"); // if its a submit button

    var qty=$(this).parent().find(input[type='text']).val();

    // request some thing back in json {"success":1} or 0 if failed to add to cart.
    $.post('/ajax.php', "qty="+qty, function(m){ 
            if(m.success==1)
            {
                // enable the button
                $(".button").removeAttr("disabled"); // if its a submit button
            }

            $(this).parent().find(input[type='text']).val("1");
        },"json");

    });

}); 
```

# c# - 如何将trow附加到richtextbox？

> ID：13959373
> 
> 赞同：1
> 
> 时间：2012-12-19T19:07:30.717
> 
> 标签：c#, winforms, richtextbox, rtf

将*`"File Format is not valid"`*RTF 附加到`richtextbox`

```
 public void Go()
        {
            rtb.Text = "Activated Partial Thromboplastin Time : Collected: 8/17/2012 9:06:00 AM\n";

            rtb.Select(rtb.TextLength, 0);//sets the selection starting point as the end of this Rtb
            rtb.SelectedRtf = @"{\trowd" +//ERROR thrown here
@"\cellx4000" +
@"\cellx9500" +
@"\intbl Activated Partial Thromboplastin Time\cell" +
@"\intbl 34.8 Seconds\cell" +
@"\row}";
} 
```

如何将 a 添加`trowd`到我的 RichTextBox？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:06:49.223

要插入 rtf 代码，它必须是完全独立的 rtf 文档，这意味着您需要文本的`\rtf1{`标题和结束`}`符号：

```
rtb.SelectedRtf = @"{\rtf1\ansi{\trowd" +//ERROR thrown here
@"\cellx4000" +
@"\cellx9500" +
@"\intbl Activated Partial Thromboplastin Time\cell" +
@"\intbl 34.8 Seconds\cell" +
@"\row}}"; 
```

请注意字符串的开头以及`}`末尾的额外括号。

# android - Android：Canvas drawPath 方法绘制纯色背景而不是透明背景

> ID：13959378
> 
> 赞同：0
> 
> 时间：2012-12-19T19:08:00.137
> 
> 标签：android, graphics, 2d

我刚刚开始使用 Android 图形并全面解决了这个问题。我目前正在开发一个绘图应用程序，一旦我掌握了基础知识，我会将它扩展到更酷的东西。

我正在尝试在现有图像（包含所有先前的路径）上绘制路径，但由路径边界表示的矩形同时被绘制为实心形状，覆盖了背景图像的位。

我正在使用以下命令使我的画布无效并绘制所需的更新：

```
invalidate
(
    (int) (dirtyRect.left - HALF_STROKE_WIDTH),
    (int) (dirtyRect.top - HALF_STROKE_WIDTH),
    (int) (dirtyRect.right + HALF_STROKE_WIDTH),
    (int) (dirtyRect.bottom + HALF_STROKE_WIDTH)
); 
```

在我的 onDraw 中，我有以下内容：

```
if (drawing.size() > 0) //if there are paths
{
    canvas.drawPath(drawing.get(drawing.size() - 1), paint); //draw the latest path
} 
```

我可以在我的绘图中绘制所有路径（定义为路径对象的 LinkedList），但这非常慢。我只想在画布上绘制最新的路径，而路径周围不会出现任何愚蠢的矩形。

在调用 drawPath 之前，我已经尝试过 canvas.drawColor(Color.TRANSPARENT)，但它没有帮助。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:07:22.133

Look into porterduff mode, it allows you to blend

# javascript - Highcharts 直线值

> ID：13959380
> 
> 赞同：1
> 
> 时间：2012-12-19T19:08:02.553
> 
> 标签：javascript, highcharts

我已经有一个用于高图的基本折线图。我想做的只是在 x 的范围内添加一条直线（具有恒定的 y = 某个值）。

有没有办法做到这一点，或者我是否必须将数据点放在任何地方，即使它每次都具有相同的 y 值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T19:50:51.730

您正在寻找的东西称为[plotLine](http://api.highcharts.com/highcharts#yAxis.plotLines)。这将让您指定一个 yValue，并且无论 xAxis 上的缩放级别如何，它都会直接穿过。您可以像这样添加它：

```
yAxis: {
  plotLines: [{
    color: 'blue',
    width: 2,
    value: 150,
    dashStyle: 'longdashdot'               
  }]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:12:31.653

您可以使用 HighCharts.Renderer.path() 在图表上绘制一条线。见[http://api.highcharts.com/highcharts#Renderer.path](http://api.highcharts.com/highcharts#Renderer.path) ()

# php - Yii 中 Chtml::Beginform 的属性声明

> ID：13959381
> 
> 赞同：0
> 
> 时间：2012-12-19T19:08:24.833
> 
> 标签：php, yii

在这里，我尝试向 Yii 框架的 Chtml 类添加属性，以便使用下面给出的代码来决定表单的填充。

```
<?php echo CHtml::beginForm('user/login',array('style' => 'padding:0 2%;')) ; ?>
<?php echo CHtml::endForm() ; ?> 
```

但浏览器显示以下 PHP 警告：

```
htmlspecialchars() expects parameter 1 to be string, array given 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:16:27.157

您从[文档](http://www.yiiframework.com/doc/api/1.1/CHtml#beginForm-detail)中传递了错误的参数：

> public static string beginForm(mixed $action='', **string $method='post'** , array $htmlOptions=array ())

所以你的代码应该是：

```
<?php echo CHtml::beginForm('', 'post', array('style' => 'padding:0 2%;')) ; ?>
<?php echo CHtml::endForm() ; ?> 
```

'' 之所以作为动作起作用，是因为它使用了[normalizeUrl](http://www.yiiframework.com/doc/api/1.1/CHtml#normalizeUrl-detail)，其内容如下：

> 如果输入参数为空字符串，则返回当前请求的 URL。

# objective-c - 如何调试不正确的绑定

> ID：13959382
> 
> 赞同：1
> 
> 时间：2012-12-19T19:08:24.737
> 
> 标签：objective-c, debugging, core-data, interface-builder

我收到了`cannot create BOOL from object`CoreData 的错误。我阅读了很多关于此的问题，都得出了相同的结论：IB 中的绑定不正确。
有没有一种方法可以例如列出所有绑定，或者是否有一个实用程序可以检查绑定的类型？也许捕捉到错误，或者实现一个在发生这种情况时被调用的方法，以便我可以检索绑定对象的名称？我宁愿自己解决它，也不愿让别人很好地分析我的`.xib`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:48:43.053

我一直在为此拔头发。在具有数十个或可能数百个绑定的 XIB 中，几乎不可能找出它的来源。但我终于找到了一种缩小范围的方法。

我只是设置了一个符号断点

```
-[NSValueBinder _observeValueForKeyPath:ofObject:context] 
```

并配置如下

*   操作：调试器命令，输入`po $rdi`作为要执行的命令。这将在每次断点被击中时打印出*self （即 NSValueBinder 描述）。*这个 ( `$rdi`) 是针对 x86_64 的，对于其他架构，请参阅[这篇文章](http://www.clarkcox.com/blog/2009/02/04/inspecting-obj-c-parameters-in-gdb/)。
*   检查*评估后自动继续*

现在，当我运行程序时，我会在控制台中看到一堆与绑定相关的日志，它们看起来应该是这样的：

```
$7 = 4301564448 <NSTextValueBinder: 0x10064aa20>{object: <NSTextFieldCell: 0x10061eea0>, bindings: value=selection.myProperty} 
```

最后一个显然是引发异常的那个。我通常可以直接从绑定值或从错误发生之前建立的其他一些绑定中找出它是哪个视图。另一件有帮助的事情是检查违规对象的`superview` 或，例如在上面的示例中。`controlView``po [0x10061eea0 controlView]`

# sql-server - 在 T-SQL 中生成随机 id（固定长度）

> ID：13959385
> 
> 赞同：1
> 
> 时间：2012-12-19T19:08:28.157
> 
> 标签：sql-server, tsql

> **可能重复：**
> [在 T-SQL 中生成随机字符串](https://stackoverflow.com/questions/13957380/generating-random-string-in-t-sql)

我需要在 T-SQL 中转换这个 C# 方法：

```
 public static string GenerateRandomID(int size)
    {
        StringBuilder pass = new StringBuilder();
        Random random = new Random();
        for (int i = 0; i < size; i++)
        {
            int binary = random.Next(0, 2);
            switch (binary)
            {
                case 0:
                    char ch = (Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65))));
                    pass.Append(ch);
                    break;
                case 1:
                    int num = random.Next(1, 10);
                    pass.Append(num);
                    break;
            }
        }
        return pass.ToString();
    } 
```

使用示例：字符串输出 = GenerateRandomID(15)

输出应如下所示：O1REGVIDK7T4R9R

有人有想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:44:47.183

```
create proc GenerateRandomID
    @size       int
as
begin

    declare @chars char(26) = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
    declare @i int = 0
    declare @id varchar(max) = ''

    while @i < @size
    begin
        if rand() > .5
            set @id = @id + substring(@chars, cast(ceiling(rand() * 26) as int), 1)
        else
            set @id = @id + cast(floor(rand() * 10) as varchar(2))
        set @i = @i + 1
    end

    select @id

end
go

exec GenerateRandomID 15

-------------------
BWZBKR601I8Z9KV

(1 row(s) affected) 
```

# scala - 可以在变量名后插入带有字母数字的字符串吗？

> ID：13959386
> 
> 赞同：2
> 
> 时间：2012-12-19T19:08:29.907
> 
> 标签：scala, scala-2.10

假设我有一个变量 dec，是否存在一种方法可以在字符串 s"a $decimal" 中指定 $dec 是变量，其余的是文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:12:14.757

```
s"a ${dec}imal" 
```

是这样做的方法。（每当你遇到麻烦时，只需在块内明确说明即可`{}`。）

# drop-down-menu - 根据下拉菜单填充相邻表列 OnChange

> ID：13959390
> 
> 赞同：0
> 
> 时间：2012-12-19T19:08:45.957
> 
> 标签：drop-down-menu, menu, html-table, onchange

我正在创建一个包含商店的照片库网站。我的编程经验相当有限，但在过去的几个月里，我对 HTML 和 PHP 有了不错的掌握。我正在尝试创建一个表格，允许用户从下拉菜单中选择产品规格。选择后，理想情况下，产品的价格将出现在相邻列中。如果用户从下拉菜单更改他们的选择，这个价格应该会改变。在将价格输出到屏幕时，我完全迷失了。出于测试目的，我包含了一个警报，它会创建一个弹出窗口以确保价格在变化这是我迄今为止所拥有的......

```
 <TD>
     <select id="photo" onchange="price(this.value)">
            <option value="$">--Please Select--</option>
            <option value="$2.50">6" X 12" - $2.50</option>
            <option value="$3.50">6" X 18" - $3.75</option>
            <option value="$5.00">6" X 24" - $5.00</option>
    </select>
    </TD>
    <TD>
    <script>
         function price(data)
           {
              value=data;
              alert(value);
           }

    </script>
    </TD> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:25:36.053

移动您的脚本，使其位于 HTML 文档的 head 标记之间，并将其更改为如下所示：

```
<script type="text/javascript">
    function price(data)
    {
        var myDiv = document.getElementById( "itemPrice" );
        myDiv.innerHTML = data;
    }
</script> 
```

然后将第二个 <TD> 块的内容更改为：

```
<td>
     <div id="itemPrice" name="itemPrice">
         Price will go here on selection
     </div>
</td> 
```

这应该够了吧

# c# - C# - 泛型方法与非泛型方法

> ID：13959392
> 
> 赞同：9
> 
> 时间：2012-12-19T19:08:51.310
> 
> 标签：c#, generics

我对为什么/何时想要使用泛型方法感到有些困惑，因为非泛型方法可以访问其包含类的泛型成员并无论如何都可以传递泛型参数。

因此，使用一个可能没有抓住重点的罐头示例（但强调了我问这个问题的原因），我为什么要这样做：

```
public class SomeGeneric<T>
{
    public T Swap<T>(ref T a, ref T b)
    {
        T tmp = a;
        a = b;
        b = tmp;
    }
} 
```

超过

```
public class SomeGeneric<T>
{
    public T Swap(ref T a, ref T b)
    {
        T tmp = a;
        a = b;
        b = tmp;
    }
} 
```

这个？

*或者，真的，我*为什么要使用泛型方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:10:03.160

您通常会在非泛型类型中使用泛型方法。

例如，查看[`Enumerable`类](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)。它为大多数 LINQ 功能定义了通用扩展方法，但它本身不是通用的。

您可能还需要泛型类型中的泛型方法，但前提是泛型方法使用*不同*的泛型类型说明符。

这使您可以编写如下内容：

```
 class Foo<T> where T : IConvertible, IComparable<T>
 {
      int CompareTo<U>(U other) where U : IConvertible
      {
           // Convert to this
           T otherConverted = Convert.ChangeType(other, typeof(T));
           return this.CompareTo(otherConverted);
      }
 } 
```

（当然，这有点做作，但确实可以编译并正常工作以`Foo<int>`与 a`double`等进行比较）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T19:09:53.930

如果包含的类不是通用的怎么办？如果它有不同的泛型类型参数怎么办？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:14:08.873

第一个例子没有多大意义，因为没有使用类参数。考虑另一个例子：

```
public class SomeGeneric<T>
{
    public K ConvertTo<T>(T a)
    {
         return CodeThatConvertsTtoK(a);
    }
} 
```

及其用法： `new SomeGeneric<int>().ConvertToInt("ten");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T20:23:02.340

如果类和方法都是泛型的，那么类型参数（“泛型参数”）当然必须有不同的名称。`T`在您的第一个示例中，不能有两个不同的东西。

如果您的方法是非静态的（看起来），如果您选择将包含的类设为通用，则必须在实例化类时已经指定类型。喜欢`var obj = new SomeGeneric<DateTime>();`。所以它应该是逻辑上“属于”类建模的对象的东西。

如果您的方法是静态的，并且您选择使类成为泛型，您仍然必须以某种方式与类一起指定类型参数。如果从类外部调用该方法，它会像`SomeGeneric<DateTime>.Swap(ref a, ref b);`.

使*方法*通用的优点是，在许多情况下，您可以使用**类型推断**，它允许您省略尖括号类型参数。您只能使用泛型*方法*来做到这一点。示例：方法是通用`nonGeneric.Swap(ref a, ref b);`的。`Swap<T>`编译器将查看 and 的编译时类型`a`并`b`找出`T`适合的类型，而无需您指定它。

结论：如果`T`逻辑上不属于类（如 中`List<T>`），则将其与方法放在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T19:14:26.513

方法级别类型参数的常见场景是扩展方法，因为它们必须在非泛型静态类中声明。但它们对于非泛型类型中的每个泛型成员都是必需的。

```
public static class Extensions
{
    public static void Foo<A, B>(this A a, B b) { [...] }

    public static T Bar<T>(this String input) { [...] }

    public static U FooBar<V, W>(this V v, W w) { [...] }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-07T21:55:48.460

这是一个泛型方法真正闪耀的例子。考虑一个表达式，例如`1+2`表示为二叉树。您想在整个树上实现访问者模式，目标是某种 map/reduce 操作。一些例子是：

*   将表达式简化为 a`string`以打印它
*   将表达式简化为 a`double`以计算其值
*   将一个表达式映射到另一个表达式，其中一些成员已更改/添加/删除

所有这些操作都可以放在访问者模式方法后面：

```
public abstract class Expression
{
  public abstract T Reduce<T>(ITransformer<T> transformer);
} 
```

这与经典的 Visitor 实现类似，但术语发生了变化：我们有`Reduce()`代替`Accept()`和一个`ITransformer<T>`代替一个`IVisitor`。请注意，该方法是通用的。

这种方法允许我们创建任意数量的`ITransformer<T>`类，将层次结构转换为任何类型 T，支持 map-reduce 操作。

# c# - 关闭对话框时出现 NullReferenceException

> ID：13959394
> 
> 赞同：0
> 
> 时间：2012-12-19T19:08:53.100
> 
> 标签：c#

在我的项目中，我有 3 个表单 - 主表单，带有一些对象列表的表单（在下拉列表中），我可以添加新对象的表单。

在主表单中，我可以调用带有对象列表的表单和带有添加函数的表单。我这样做

```
Form2 f2 = new Form2(some_param);
f2.ShowDialog(); 
```

当 f2 打开时，我可以看到带有对象的下拉列表和一个添加新对象的按钮（使用带有添加功能的表单）。在这个对话框中，我决定添加新对象

```
void click1(object sender,EventArgs e)
{
  Form3 f3 = new Form3(some_param); // want to add new object and then show in dropdownlist
  f3.ShowDialog();
  radDropDownList1.Items.Clear();  // I close the form and catch here NullReferenceException
  InitDropDown();
} 
```

有什么问题？什么导致 NullReferenceException？

当我通过按下主窗体上的按钮然后关闭来显示 form3 时 - 它工作正常，并且当窗体 3 关闭时主窗体不会捕获任何异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-14T18:34:02.293

我遇到了同样的问题，[sll](https://stackoverflow.com/users/485076/sll)评论对我也有帮助。因此，我只是将他的评论重新发布为 anwser，以便其他人可以看到该线程已解决。

**官方答案**
启用异常，您将看到异常来自哪里。进入Visual Studio -> Debug -> Exceptions，标记CLR Exceptions - [sll](https://stackoverflow.com/users/485076/sll)

# javascript - 调用函数时未定义

> ID：13959395
> 
> 赞同：0
> 
> 时间：2012-12-19T19:08:53.667
> 
> 标签：javascript

我有这个解析 JSON 的函数。当我在 .live 函数中调用它时，我变得不确定。

这是我创建的功能，

```
function getAbc() {
                    var details;
                    var id = $(this).attr('data-id');
                    $.ajax({
                        url : '/index.php/data',
                        type : 'GET',
                        data : 'persons[]=' + id,
                        success : function(data, textStatus, xhr) {
                            details = JSON.parse(data);
                        },
                    });
                    return details;
                } 
```

我只是这样调用，getAbc()。有什么方法可以访问函数中的详细信息变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:14:00.207

使用延续传递风格。本质上`$.ajax`是异步的。

```
function getAbc(callback) {
    var details;
    var id = $(this).attr('data-id');
    $.ajax({
       url : '/index.php/data',
       type : 'GET',
       data : 'persons[]=' + id,
       success : function(data, textStatus, xhr) {
           details = JSON.parse(data);
           callback(details);
       }
    });
}

function getAbc(function (details) {
    console.log(details);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:10:16.297

那是因为*异步*`ajax`发生。这意味着在调用*之前*返回，因为请求是通过网络进行的。您需要在回调中使用，而不是在方法返回后使用。或者，调用另一个使用详细信息的方法，并传递给该方法。*`getAbc` *`success``details``success``getAbc``success``details`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:10:20.937

这是由于 AJAX 的工作方式。

AJAX 请求是异步的，这意味着它们不会立即返回。

当您进行 AJAX 调用时，会发出一个在未知时间完成的请求。

您可以使用回调函数来处理结果。

回调函数是在收到来自 AJAX 请求的响应**之后执行的函数。**

您可以指定一个回调函数并将其传递给您的 AJAX 调用。**

# air - Air SQLite：如何使用日期类型？

> ID：13959398
> 
> 赞同：1
> 
> 时间：2012-12-19T19:09:09.187
> 
> 标签：air

```
var stat:SQLStatement = new SQLStatement();
stat.sqlConnection = connection;
stat.text = "INSERT INTO names (id, name,myDate) VALUES (117, 'tarek', 3/10/2015)";
stat.execute(); 
```

我使用air sqlite，为什么不能插入日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:11:04.793

假设 myDate 字段是作为 DATE 类型创建的，您必须使用 SQLite date() 函数转换要插入的日期，并且应该使用格式 YYYY-MM-DD。这有效：

```
INSERT INTO names (id, name, myDate) VALUES (117, 'tarek', date('2015-10-03')) 
```

# c# - 从字符串中提取两个数字和以下字母的最佳方法

> ID：13959402
> 
> 赞同：0
> 
> 时间：2012-12-19T19:09:52.947
> 
> 标签：c#, string, integer

假设我们有一个字符串，称为源。它包含“纽约市 - 12A - 1234B”

以下是规则：

一种。我们知道，最接近字符串开头的两个数字应该与后面的字符一起保存到一个单独的字符串中，称为结果；

湾。我们不确定以下字符是数字还是字母

C。字符串本身的格式不同 - 它可能是“NY 12A 1234B”

d。我们可以不在乎其他任何事情！

现在我以我无限的智慧创造了这个怪物。它有效，但*请*告诉我有更好的方法来做到这一点，或者充其量是一种更清洁、更注重性能的方法。

```
class Program
    {
        public static int i = 0;
        public static int q = 0;
        public static int x = 0;
        public static string source = "New York City - 12A - 1234B";
        public static string results = "";
        public static char[] from_source_char;
        public static List<string> from_source_list = new List<string>();

        static void Main(string[] args)
        {
            from_source_char = source.ToCharArray();
            foreach (char unit in from_source_char)
            {
                from_source_list.Add(unit.ToString());
            }

            Console.WriteLine("Doing while " + i.ToString() + " < " + (from_source_list.Count() - 1).ToString());
            while (i < from_source_list.Count() - 1)
            {
                Console.WriteLine("i is at " + i.ToString());
                Console.WriteLine("Examining " + from_source_list[i].ToString());

                try
                {
                    q = Convert.ToInt32(from_source_list[i]);
                    results += from_source_list[i].ToString();
                    Console.WriteLine("Found part 1!");
                    x++;
                }
                catch
                {
                    Console.WriteLine("Disregarding " + from_source_list[i].ToString());
                    // do nothing
                }

                if (x == 2)
                {
                    Console.WriteLine("Found final part! " + from_source_char[i+1].ToString());
                    results += from_source_char[i+1].ToString();
                    break;
                }

                i++;

            }

            Console.WriteLine("Result is " + results.ToString());
            Thread.Sleep(999999);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:16:37.920

您可以将 a`Regex`与此模式一起使用：`@"^.*?(?<numbers>\d{2}\w).*$"`.

例子：

```
var f = @"^.*?(?<numbers>\d{2}\w).*$";
var match = Regex.Match("NY 12A 1234B", f);
var result = match.Groups["numbers"].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:32:52.187

另一个没有正则表达式的版本：

```
char a = source.First(pos => char.IsDigit(pos));
int b = source.IndexOf(a);
string result = source.Substring(b, 3);
Console.WriteLine(result); 
```

# jquery-mobile - Jquery Mobile 使用 fastklick 但后退按钮非常慢

> ID：13959404
> 
> 赞同：0
> 
> 时间：2012-12-19T19:09:57.537
> 
> 标签：jquery-mobile, back-button

我正在使用适用于 iOS 的 fastklick 插件，该插件在网络上非常流行，用于在 iOS 上使用 phonegap 加速 jquery 移动应用程序上的点击事件。

除了 jquery 的后退按钮外，按钮和链接都运行良好。

如果我使用这个：

```
<div data-role="page" id="test" data-add-back-btn="true"> 
```

那么如果我想点击按钮，iOS 已经有延迟了。按钮一开始变蓝，然后页面滑动。我怎样才能防止这种情况，所以这个按钮就像我正在创建的其他按钮一样快速工作

```
<button>...</button>? 
```

是否可以创建自己的后退按钮并向其应用事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:35:58.987

首先删除 data-add-back-btn="true" 然后你可以试试这个：

```
<a class="ui-btn-left" data-icon="arrow-l" href="javascript:history.back(1) " data-theme="a">Back</a> 
```

或这个：

```
<a class="ui-btn-left" data-icon="arrow-l" href="#" data-theme="a" id="back-btn">Back</a>

$('#back-btn').bind('touchstart', function(e) {
    $.mobile.changePage("#pageID");
}); 
```

只需将#pageID 更改为您的真实页面ID。如果您只是这样做而不是页面滚动，则 touchstart 事件非常适合返回按钮。

# php - 需要帮助定期将数据从 3rd 方程序导入 Web 服务器数据库

> ID：13959406
> 
> 赞同：0
> 
> 时间：2012-12-19T19:09:58.703
> 
> 标签：php, mysql, ajax, database

我正在尝试使用 mysql/php/javascript/etc 在线构建数据管理系统。我过去曾为此使用过 Access，它对于我正在努力解决的部分非常有用。数据来自 HPLC（实验室仪器），确定结果的软件会自动将其导出为 excel 文件，但也可以执行 csv。导出后，HPLC 软件运行一个命令文件，该文件打开访问权限并运行一个表单，该表单导入文件并将数据放置在具有适当标识符的正确字段中。

我现在想在基于 Web 的数据库上拥有所有数据。这将允许更好地访问异地，并且更易于维护系统，尤其是异地。我的问题是，我不确定如何将数据从 HPLC 获取到数据库。

我认为可以使用 mysql 命令上传 .csv 文件，但随后格式化并使用正确的数据表关系，我被卡住了！如何上传数据并运行程序进行标准化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:59:09.977

导出为 .csv。

编写一个 MySQL 程序

*   为您的 .csv 输入创建一个临时表；
*   使用 LOAD DATA 语句从 .csv 文件上传数据；
*   通过从包含 csv 数据的大表中选择数据并将其插入到各种表中，将数据标准化为结构化数据库表。

# android - android注册一个永久的广播接收器

> ID：13959410
> 
> 赞同：1
> 
> 时间：2012-12-19T19:10:05.847
> 
> 标签：android, broadcastreceiver

我需要创建一个 BroadcastReceiver，它在每次设备启动时立即执行某些任务。此外，当单击某个按钮时，接收器应在启动时停止启动。有人可以帮我管理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:15:58.073

您需要解决问题的第一部分就是`BroadcastReceiver`为它制作一个并在您的清单中将其声明为：

```
<receiver android:name=".MyBootReceiver"
        android:enabled="true"
>
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <action android:name="android.intent.action.QUICKBOOT_POWERON" />
    </intent-filter>
</receiver> 
```

`QUICKBOOT_POWERON`对于某些不发送`BOOT_COMPLETED`广播的设备，这是必需的。HTC 设备喜欢使用快速启动设备。

对于您问题的第二部分，您可以通过几种不同的方式来完成此操作。您可以简单地设置一个值，`SharedPreferences`让您的接收器在每次触发时都会检查，如果值指示，则立即退出。

您还可以在代码中禁用接收器：

```
getPackageManager().setComponentEnabledSetting( 
    new ComponentName( this, MyBootReceiver.class ),
        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
        PackageManager.DONT_KILL_APP ); 
```

您可以使用相同的方法启用它：

```
getPackageManager().setComponentEnabledSetting( 
    new ComponentName( this, MyBootReceiver.class ),
        PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
        PackageManager.DONT_KILL_APP ); 
```

我不确定这种方法的持久性。我在我的一个应用程序中使用它，但它不是用于引导接收器，并且它不必在引导过程中持续存在。如果你想走那条路，你将不得不尝试它。

# android - Android JellyBean textview 字幕问题

> ID：13959417
> 
> 赞同：0
> 
> 时间：2012-12-19T19:10:21.913
> 
> 标签：android, textview, marquee

我正在构建一个底部带有新闻提要栏的应用程序，我决定在该 textview 上应用选取框，但它与 android 4.1 存在问题，而不是滚动文本，他只是让 textbiew 保持静态

```
<TextView
                android:id="@+id/app_bottom_news"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:lines="1"
                android:ellipsize="marquee"
                android:focusable="true"
                android:focusableInTouchMode="true" 
                android:freezesText="true"
                android:fadingEdge="horizontal"
                android:marqueeRepeatLimit="marquee_forever"
                android:scrollHorizontally="true"
                android:textColor="#161616"
                android:textSize="15dp"
                android:text="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:12:11.217

一个`TextView`with`ellipsize="marquee"`只有在它有焦点时才会真正选择框。因此，一旦用户将焦点放在其他视图上，视图就会停止滚动。

a`TextSwitcher`将是实现您想要的更合适的视图。

# python - 获取模块py文件路径的可靠方法

> ID：13959424
> 
> 赞同：1
> 
> 时间：2012-12-19T19:10:43.487
> 
> 标签：python, cross-platform, relative-path, file-location

我试图找出在运行时可靠地发现`py`给定模块的文件在文件系统上的位置的最佳方法。我需要这样做，因为我计划将一些关于某些方法的配置数据外部化（在这种情况下，用于验证来自模块中定义的接口的服务调用的响应的模式）以保持清洁和易于维护。

系统的简化说明：

```
package
|
|-service.py
|
|-call1.scm
|
|-call2.scm 
```

service.py （`_call()`是基类上的一个方法，尽管这与问题无关）

```
class FooServ(AbstractService):
    def call1(*args):
        result = self._call('/relative/uri/call1', *args)
        # additional call specific processing
        return result
    def call2(*args):
        result = self._call('/relative/uri/call2', *args)
        # additional call specific processing
        return result 
```

call1.scm 和 call2.scm 定义响应模式（在当前情况下，使用草案 JSON 模式格式，但同样与问题无关）

在代码库的另一个地方，当实际进行服务调用时，我希望能够检测到的位置，`service.py`以便我可以遍历文件结构并找到 scm 文件。至少在我的系统上，我认为这会起作用：

```
# I realize this is contrived here, but in my code, the method is accessed this way
method = FooServ().call1
module_path = sys.modules[method.__self__.__class__.__module__].__file__
schema_path = os.path.join(os.path.dirname(module_path), method.__name__ + '.scm') 
```

但是，我想确保这在所有平台和安装配置上都是安全的，我在进行研究时遇到了[这个](http://www.python.org/dev/peps/pep-3147/)问题，这让我担心尝试以这种方式执行此操作不会可靠地工作。`__file__`这会普遍有效，还是模块对象返回文件位置的事实，该位置`pyc`可能位于文件旁边以外的某个位置`py`，这会使该解决方案无效？如果它会使其无效，我可以做什么，如果有的话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:35:49.493

在您链接的[PEP](http://www.python.org/dev/peps/pep-3147/)中，它说：

> 在 Python 3 中，当你导入一个模块时，它的 __file__ 属性指向它的源 py 文件（在 Python 2 中，它指向 pyc 文件）。

所以在 Python 3 中你很好，因为`__file__`它总是指向`.py`文件。在 Python 2 中，它可能指向该`.pyc`文件，但它`.pyc`只会与`.py`Python 2 的文件位于同一目录中。

* * *

好的，我认为您指的是这一点：

> 由于这些发行版无法共享 pyc 文件，因此开发了复杂的机制来将生成的 pyc 文件放在非共享位置，同时仍共享源代码。示例包括基于符号链接的 Debian 制度 python-support [8] 和 python-central [9]。这些方法使得将 Python 应用程序交付给广泛的用户的策略变得更加复杂、脆弱、难以理解和碎片化。

我相信这些机制仅适用于发行版打包的 Python 模块。我*认为*它们不应该影响在发行版的打包系统之外手动安装的模块。为该发行版打包您的模块的人有责任确保该模块不会被该机制破坏。

# git - 如何重新更新 git 分支和工作流改进

> ID：13959428
> 
> 赞同：0
> 
> 时间：2012-12-19T19:10:49.577
> 
> 标签：git

所以我刚刚开始与使用 git 存储库的人合作。我们对使用 git 很陌生，但了解基础知识并为我们两个人设计了这个工作流程。

3个分支：Master、User1、User2

我们分别在 user1 或 user2 上工作，然后当我们完成我们正在单独处理的小任务时，我们将其合并回 master 分支并解决可能存在的任何冲突。

我的问题是，在我们中的一个人与 master 合并并解决 master 中的冲突之后，使我们各自的用户分支匹配 master 的最佳方法是什么？只是关闭分支并结帐一个新的？

此外，如果我们的工作流程有任何改进，我们将不胜感激。试图全面了解 git，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:13:22.447

您始终可以重新创建您的分支并基于`master`. 这是 git 最酷的事情之一，分支很便宜，因此您可以创建/删除任意数量的分支。我更喜欢做这样的事情，而不是维护长期运行的分支。

另一种选择是`rebase`在 master 中有新提交时将分支转移到 master 上。变基是一个我花了一点时间完全掌握的概念，如果使用不当，它会有一两个陷阱，所以在尝试之前先阅读一下。不过这很酷！

我的大多数项目的工作流程通常只涉及一个分支，`master`. 我在“主题”分支中工作，这意味着我为我正在处理的每个不同任务创建一个新分支。当我完成该任务后，我可以将其合并到`master`然后推送，以便其他人可以获得这些更改。然后我可以安全地删除我的主题分支。

如果您刚开始使用 git，这是一个很好的资源： http: [//git-scm.com/book](http://git-scm.com/book)

# c# - c# 搜索大文本文件

> ID：13959429
> 
> 赞同：6
> 
> 时间：2012-12-19T19:10:53.040
> 
> 标签：c#, search, io, full-text-search

我正在尝试优化对大型文本文件（300-600mb）中字符串的搜索。使用我目前的方法，花费的时间太长。

目前我一直在使用`IndexOf`搜索字符串，但是用字符串为每一行建立索引所花费的时间太长（20s）。

如何优化搜索速度？我已经尝试过`Contains()`，但这也很慢。有什么建议么？我在考虑正则表达式匹配，但我没有看到它有显着的速度提升。也许我的搜索逻辑有缺陷

例子

```
while ((line = myStream.ReadLine()) != null)
{
    if (line.IndexOf(CompareString, StringComparison.OrdinalIgnoreCase) >= 0)
    {
        LineIndex.Add(CurrentPosition);
        LinesCounted += 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T19:23:38.427

您使用的蛮力算法在*O(nm)*时间内执行，其中*n*是正在搜索的字符串的长度，*m*是您尝试查找的子字符串/模式的长度。您需要使用**字符串搜索算法**：

*   Boyer-Moore 是“标准”，我认为： [http ://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

*   但是还有更多： [http ://www-igm.univ-mlv.fr/~lecroq/string/](http://www-igm.univ-mlv.fr/~lecroq/string/)

*   包括莫里斯-普拉特： http: [//www.stoimen.com/blog/2012/04/09/computer-algorithms-morris-pratt-string-searching/](http://www.stoimen.com/blog/2012/04/09/computer-algorithms-morris-pratt-string-searching/)

*   和 Knuth-Morris-Pratt： [http ://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)

但是，根据您要查找的内容，使用精心设计的正则表达式*可能就足够了。*请参阅[Jeffrey 的 Friedl](http://regex.info/blog/)的著作[*Mastering Regular Expressions*](http://regex.info/)以获取有关构建高效正则表达式（例如，无回溯）的帮助。

您可能还想参考一个好的算法文本。我偏爱 Robert Sedgewick 的各种[化身](http://www.cs.princeton.edu/~rs/)[*算法*](http://algs4.cs.princeton.edu/home/)（*[C|C++|Java] 中*的算法）

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:42:03.420

不幸的是，我不认为你可以在直接的 C# 中做很多事情。

我发现 Boyer-Moore 算法对于这项任务非常快。但我发现没有办法做到这一点`IndexOf`。我的假设是这是因为`IndexOf`我的代码在 C# 中运行时是在手动优化的汇编程序中实现的。

[您可以在文章Fast Text Search with Boyer-Moore](http://www.blackbeltcoder.com/Articles/algorithms/fast-text-search-with-boyer-moore)中查看我的代码和性能测试结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:15:28.307

你见过这些问题（和答案）吗？

*   [在 C# 中处理大型文本文件](https://stackoverflow.com/q/6464628/938695)
*   [有没有办法分段读取大文本文件？](https://stackoverflow.com/q/1369876/938695)
*   [匹配大文本文件中的字符串？](https://stackoverflow.com/q/2666121/938695)

如果您只想阅读文本文件，那么按照您现在的方式进行操作似乎是可行的方法。其他想法：

*   如果可以对数据进行预排序，例如在将数据插入文本文件时，那可能会有所帮助。

*   您可以将数据插入数据库并根据需要进行查询。

*   你可以使用哈希表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T19:26:57.097

您可以使用 regexp.Match(String)。正则表达式匹配更快。

静态无效主要（）

{

```
 string text = "One car red car blue car";
  string pat = @"(\w+)\s+(car)";

  // Instantiate the regular expression object.
  Regex r = new Regex(pat, RegexOptions.IgnoreCase);

  // Match the regular expression pattern against a text string.
  Match m = r.Match(text);
  int matchCount = 0;
  while (m.Success) 
  {
     Console.WriteLine("Match"+ (++matchCount));
     for (int i = 1; i <= 2; i++) 
     {
        Group g = m.Groups[i];
        Console.WriteLine("Group"+i+"='" + g + "'");
        CaptureCollection cc = g.Captures;
        for (int j = 0; j < cc.Count; j++) 
        {
           Capture c = cc[j];
           System.Console.WriteLine("Capture"+j+"='" + c + "', Position="+c.Index);
        }
     }
     m = m.NextMatch();
  } 
```

}*

# r - 如何获取所有终端节点 - r 中的权重和响应预测“ctree”

> ID：13959431
> 
> 赞同：4
> 
> 时间：2012-12-19T19:11:08.097
> 
> 标签：r, data-mining, decision-tree

这是我可以用来列出所有终端节点权重的内容：但是如何添加一些代码来获得响应预测以及每个终端节点 ID 的权重：

说我希望我的输出看起来像这样

![在此处输入图像描述](../Images/6620f94baf417b33341be96275682e67.png)

-- 下面是我到目前为止得到的重量

```
nodes(airct, unique(where(airct))) 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T06:11:52.097

二叉树是一个很大的 S4 对象，所以有时很难提取数据。

但是 BinaryTree 对象的 plot 方法有一个可选的面板函数，形式为 function(node) 绘制终端节点。因此，当您绘图时，您可以获得节点信息。

这里我使用绘图功能来提取信息，甚至更好的是我使用`gridExtra`包将终端节点转换为表格。

```
library(party)
library(gridExtra)
set.seed(100)
lls <- data.frame(N = gl(3, 50, labels = c("A", "B", "C")), 
                  a = rnorm(150) + rep(c(1, 0,150)),
                  b = runif(150))
pond= sample(1:5,150,replace=TRUE)
tt <- ctree(formula=N~a+b, data=lls,weights = pond)
output.df <- data.frame()
innerWeights <- function(node){

 dat <- data.frame (x=node$nodeID,
                    y=sum(node$weights),
                    z=paste(round(node$prediction,2),collapse='  '))
  grid.table(dat,
             cols = c('ID','Weights','Prediction'),
             h.even.alpha=1, 
             h.odd.alpha=1,  
             v.even.alpha=0.5, 
             v.odd.alpha=1)
   output.df <<- rbind(output.df,dat)  # note the use of <<-

}

plot(tt, type='simple', terminal_panel = innerWeights)

data
  ID Weights       Prediction
1  4      24  0.42  0.5  0.08
2  5      17 0.06  0.24  0.71
3  6      24    0.08  0  0.92
4  7     388 0.37  0.37  0.26 
```

![在此处输入图像描述](../Images/cf848a8824644296853ac343b7f1ba6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:21:02.310

这是我发现的，它可以很好地使用一些额外的信息。但我只是想把它贴在这里，以防将来有人需要它们。

```
y <- do.call(rbind, nodes(tt, unique(where(tt))))
write.table(y, 'clipboard', sep='\t') 
```

@agstudy，让我知道你的想法。

# android - Android数据库重叠

> ID：13959432
> 
> 赞同：0
> 
> 时间：2012-12-19T19:11:13.713
> 
> 标签：android

我是安卓新手。我正在正确读取数据库并且我的应用程序工作正常，但问题是从数据库读取时某些页面中的内容相互重叠。起初我认为我的布局有问题，我用大量数据交叉检查了它在哪里正常工作，就像现在它现在给出的那样。

![在此处输入图片描述][1] 谁能告诉我哪里出了问题，我应该在哪里更正。
[对不起，我尝试发布屏幕截图，但 stackoverflow 不允许我说 10 声望]

这是布局的代码

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#2a2a2a"
    android:fillViewport="true" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="true"
    android:orientation="vertical"
     >
<!-- Child linear layout with horizontal orientation -->
  <LinearLayout android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
              android:orientation="horizontal" android:background="#2a2a2a"
              android:layout_marginTop="25dip">

    </LinearLayout>

    <TextView
        android:id="@+id/textView00"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView01"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

     <TextView
        android:id="@+id/textView02"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView" 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

    <TextView
        android:id="@+id/textView03"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView04"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView" 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

    <TextView
        android:id="@+id/textView05"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
        android:id="@+id/textView06"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView" 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

    <TextView
        android:id="@+id/textView07"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
        android:id="@+id/textView08"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView" 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

    <TextView
        android:id="@+id/textView09"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:text="TextView" 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

    <TextView
        android:id="@+id/textView11"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.13"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout>

</ScrollView> 
```

..................................................... ....................................... 非常感谢您的宝贵时间.... …………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:21:20.943

我认为这是因为您为所有 TextView layout_height 设置了“match_parent”。将它们更改为“wrap_content”，然后重试。

# jquery - 不应用 jQuery LazyLoad 插件识别客户端是否是机器人 - cakephp

> ID：13959433
> 
> 赞同：0
> 
> 时间：2012-12-19T19:11:14.990
> 
> 标签：jquery, cakephp, seo, bots, lazy-loading

我想实现 LazyLoad Jquery 插件来提高加载网站页面的速度，但不想损害搜索引擎中的图像索引。我找到了一些解决方案，例如使用标签，但我认为它们不是最好的解决方案。

这被认为是检查（服务器端）用户代理客户端是否是爬虫或“常规”访问者以应用 LazyLoad 插件。

为此，我想知道这是否是一个好主意，并希望获得一些关于如何处理 CakePHP2.2 的帮助，以检查是否有很多机器人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:58:13.660

首先，您应该始终将`alt`属性与图像一起使用，否则将无法验证。

对于 SEO，解决此问题的一种方法是确保在禁用 JavaScript 时回退到图像的正常版本，这将被 Google 索引。

所以，使用`<noscript>`标签，你可以做到这一点。

例子 ：

```
<img src="loading.jpg" data-image="path_to_image" alt="Description of Image" /> 
```

会成为 ：

```
<noscript>    
    <img src="path_to_image" alt="Description of Image" />
</noscript> 
```

**更新**：

有另一种方法可以确保您的图像确实被索引，使用[**Image sitemaps**](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636)。

# python - CMake out of source build - Python 文件

> ID：13959434
> 
> 赞同：4
> 
> 时间：2012-12-19T19:11:19.440
> 
> 标签：python, makefile, cmake

我使用 CMake 为我的项目创建构建脚本（Makefiles + VS 解决方案）。作为最佳实践，我在单独的文件夹中创建构建脚本（源代码外）。我在同一个文件夹中构建项目。

这适用于已编译的程序，但我无法为我的 Python 脚本找到合适的解决方案，因为这些脚本没有将它们复制 ( `build`) 到构建文件夹的构建步骤。

寻找创造性的解决方案......

要求：

*   所有可执行文件都应该在构建后的构建文件夹中可用（我认为 *.py 文件是可执行的
*   应该使用 IDE（spyder、eclipse 等）轻松管理 Python 脚本
*   带有 python 脚本的源文件夹位于 Git 存储库中。构建文件夹不是。
*   C++ 编译的 python 模块应该位于相关的 python 脚本旁边

到目前为止，我考虑了两种选择：

*   运行 CMake 时将脚本复制到构建文件夹 - 需要为 python 文件中的每个更改运行 CMake（IDE 不友好）。可能会引起混淆：要编辑哪个来源的副本？
*   在构建文件夹中创建指向源文件夹的链接 - 多平台混乱。在脚本旁边部署已编译的 c++ python 模块而不污染源文件夹时出现问题。

我希望这足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:31:09.740

最终，我找到了一个解决方案，该解决方案涉及创建指向 python 源代码和其他相关文件的符号链接，这些文件未编译但在构建环境中是必需的。为了允许将构建的模块与符号链接混合，我使用了真正的文件夹而不是符号链接。

这边走：

*   有一份 python 脚本的副本
*   它可以从二进制文件夹无缝运行/编辑

实用功能：

```
function (create_symlinks)
    # Do nothing if building in-source
    if (${CMAKE_CURRENT_BINARY_DIR} STREQUAL ${CMAKE_CURRENT_SOURCE_DIR})
        return()
    endif()

    foreach (path_file ${ARGN})
        get_filename_component(folder ${path_file} PATH)

        # Create REAL folder
        file(MAKE_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/${folder}")

        # Delete symlink if it exists
        file(REMOVE "${CMAKE_CURRENT_BINARY_DIR}/${path_file}")

        # Get OS dependent path to use in `execute_process`
        file(TO_NATIVE_PATH "${CMAKE_CURRENT_BINARY_DIR}/${path_file}" link)
        file(TO_NATIVE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/${path_file}" target)

        if (UNIX)
            set(command ln -s ${target} ${link})
        else()
            set(command cmd.exe /c mklink ${link} ${target})
        endif()

        execute_process(COMMAND ${command} 
                        RESULT_VARIABLE result
                        ERROR_VARIABLE output)

        if (NOT ${result} EQUAL 0)
            message(FATAL_ERROR "Could not create symbolic link for: ${target} --> ${output}")
        endif()

    endforeach(path_file)
endfunction(create_symlinks) 
```

python 模块的用法（在 CMakeLists.txt 中）：

```
# Do not omit !!!RELATIVE!!!
file(GLOB_RECURSE files RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *.py *.dat *.xml)
create_symlinks(${files}) 
```

用法：

```
cd src_dir
mkdir build_dir
cd build_dir
cmake .. 
```

## 重要的：

*   添加新文件时不要忘记运行`cmake`
*   在 Windows 上`mklink`仅支持[某些 Windows 版本](http://en.wikipedia.org/wiki/NTFS_symbolic_link)
*   在 Windows`mklink`上只能以管理员身份运行。可以在[此处](http://bit.ly/UZqVYO)找到解决方法。
*   调用时使用相对路径，`create_symlinks`因为这是在二进制文件夹中重建目录结构的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:55:18.360

我将通过创建自定义命令将 python 脚本编译到构建文件夹中，如[本文](https://stackoverflow.com/questions/12272832/cmake-compiling-python-into-build-folder)所示。

# zend-framework - Zend Framework 部署到子域

> ID：13959438
> 
> 赞同：0
> 
> 时间：2012-12-19T19:11:30.780
> 
> 标签：zend-framework

我正在使用 Zend Framework 开发一些应用程序。我在本地主机上开发，然后将其上传到 abc.mydomain.com 等子域。当我上传我的布局 index.phtml 时，我得到所有 URL 的以下内容：

```
abc.mydomain.com/css/base.css 404 (Not Found) 
```

在网络浏览器控制台上，但我的 CSS 在公用文件夹中。

我链接这个css的代码是：

```
<?php echo $this->headLink()->appendStylesheet('/css/base.css') ?> 
```

我应该怎么做才能使这些地址起作用？

完成我的问题：框架如何区分文件夹和控制器，或者我如何告诉框架不要对这些 URL ass 操作采取行动，它们是文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:56:40.363

听起来像是与托管子域相关的映射问题。通常在共享主机上，您无法将项目的`public`文件夹映射到子域。因此，需要各种重写技巧来将页面和资产请求映射到正确的目录，而不会使 ZF 对请求的 URL 感到困惑。

查看：

[http://www.papayasoft.com/2010/05/08/zend-framework-shared-hosting/](http://www.papayasoft.com/2010/05/08/zend-framework-shared-hosting/)

用于描述问题和解决问题的各种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:27:58.767

通常，`baseUrl()`view-helper 检测（在内部，使用该`Zend_Controller_Front::getBaseUrl()`方法）您的应用程序的 base-url 是什么。

但有时，根据您的虚拟主机设置和文档根目录中公用文件夹的位置 - 您需要明确告诉应用程序您的基本 URL 是什么。

在`application/configs/applicatiom.ini`中，您可以设置：

`resources.frontController.baseUrl = "http://abc.mydomain.com"`

然后在视图脚本中，您可以使用`baseUrl()`视图助手和*相对*url（相对于您设置的基础）访问公共资产，如下所示：

`<?php echo $this->headLink()->appendStylesheet($this->baseUrl('css/base.css')) ?>`

虽然我看到很多人只使用它作为前缀：

`<?php echo $this->headLink()->appendStylesheet($this->baseUrl() . '/css/base.css') ?>`

# sharepoint-2007 - Excel Web 访问数据（图形）在 SharePoint 2007 上显示为灰色

> ID：13959439
> 
> 赞同：0
> 
> 时间：2012-12-19T19:11:45.367
> 
> 标签：sharepoint-2007

我正在使用“Excel Web Access”Web 部件在我的 MOSS2007 设置中显示 excel 图表。我在一个网站集下有多个团队网站。Excel Web 访问适用于所有团队网站，但仅对一个网站显示灰色。我尝试上传具有不同图表的新 Excel 表，但它仍然显示相同的灰色。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T06:49:02.667

我能够解决，这里的解决方案：http: [//windowsadminblog.blogspot.in/2012/12/excel-web-access-graphs-showing-gray.html](http://windowsadminblog.blogspot.in/2012/12/excel-web-access-graphs-showing-gray.html)

# powershell - netsh acl 设置（需要替代方法 - 注册表设置？）

> ID：13959440
> 
> 赞同：2
> 
> 时间：2012-12-19T19:11:46.663
> 
> 标签：powershell, registry, inno-setup, acl, netsh

我正在使用 inno-setup 安装一个程序，该程序需要在 Win7 上解锁端口 4326（允许 acl 访问），以便可以通过 HTTP 对端口 4326 进行 GET 操作。

我有一个管理员可以运行的 powershell 脚本来解除对端口的阻塞。但这不能用作 inno-setup [run] 命令（因为本地计算机通常会禁用脚本运行）。（即 powershell.exe -nowait & script.ps1）

我可以设置目标机器中的一些注册表项来解除对端口的阻塞吗？由于 setup.exe 以管理员身份运行，因此我可以在 inno-setup 中轻松完成。我猜一个独立的EXE可以做同样的事情。

这是我想用在 HKLM 中设置注册表设置来替换的脚本。

```
set-alias netsh c:\Windows\System32\netsh.exe
$PORT = 4326
$domain = $Env:userdomain
$name = $Env:username
$ErrorActionPreference = "Continue";

netsh http delete urlacl url=http://*:$PORT/
netsh http add urlacl url=http://*:$PORT/ user=$domain\$name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:38:02.657

我想你可以找到防火墙规则`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\`

建议：也许您可以将此密钥导出为 .reg 并将其导入另一个站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:28:04.050

而不是使用`netsh`，而是使用 WinApi [HttpSetServiceConfiguration](http://msdn.microsoft.com/en-us/library/aa364503.aspx)。给定正确的原型声明，您可以直接从 Inno `[Code]`（特别是 in ）调用它（及其相关函数） 。`CurStepChanged(ssPostInstall)`请参阅帮助文件中的[使用 DLL](http://www.jrsoftware.org/ishelp/topic_scriptdll.htm)主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:10:19.847

有关此问题的继续，请参阅[在 inno-setup 中将 netsh.exe 作为安装后运行。](https://stackoverflow.com/questions/14024881/running-netsh-exe-as-a-post-install-in-inno-setup)但我基本上，jachguate 的运行 netsh.exe 作为安装后的答案似乎是正确的方法。

# postgresql - 我可以使用 Heroku PG Backup 插件安排备份吗？

> ID：13959441
> 
> 赞同：7
> 
> 时间：2012-12-19T19:11:50.263
> 
> 标签：postgresql, heroku, backup, add-on

我最近一直在使用[PG Backups 插件](https://devcenter.heroku.com/articles/pgbackups)，一切正常，但是今天早上 10:00 AM 触发的备份过程在我的应用程序中产生了一些块和超时。

有没有办法指定使用此插件进行的备份计划？我一直在寻找，并没有找到任何具体的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:13:53.500

### 使用 Cron 进行手动备份计划

Heroku 为您提供两种类型的备份：自动备份和用户启动的备份。每个计划都保留了不同数量的每日、每周和手动备份。您无法使用[PG Backups Auto](https://addons.heroku.com/pgbackups)控制自动备份何时发生，但您可以随时使用 cron 触发“手动”备份。

例如：

```
# Trigger a "manual" backup every four hours.
0 */4 * * * source $HOME/database_credentials; heroku pgbackups:capture 
```

有关使用 pgbackups 命令的更多信息，请参阅[创建备份](https://devcenter.heroku.com/articles/pgbackups#creating-a-backup) 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:01:52.860

不，目前没有办法做到这一点，除了使用外部进程来触发调用。

一封支持电子邮件可能会透露更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-06T15:58:46.410

虽然最初的问题很老，但 Heroku 现在确实有 PGBackups 的计划选项：

[https://devcenter.heroku.com/articles/heroku-postgres-backups#scheduling-backups](https://devcenter.heroku.com/articles/heroku-postgres-backups#scheduling-backups)

# javascript - javascript 未执行，而是在地址栏中显示函数名称

> ID：13959443
> 
> 赞同：0
> 
> 时间：2012-12-19T19:11:54.527
> 
> 标签：javascript, html

我在具有众多功能的各种文件中制作了很多“js-classes” - 该项目太大而无法发布代码。

不知何故，我直接在终点线创建了一个错误。这意味着在某些浏览器（例如 ff）中，它不执行所需的功能（它在早期阶段正确地执行了该功能，而无需更改执行该功能的代码，同时也没有更改该功能的代码）。

我用这个方案创建了 js-classes 和底层函数：

```
function ClassName(){
   this.FunctionName = function(){
   //something
   }
} 
```

我在地址栏中得到的是： javascript:ClassName.FunctionName() 应该发生的是浏览器只是像 chrome 一样执行函数，例如，没有任何问题。

所以我猜测代码中的某个地方只有一个我找不到的坏字符（它不属于那里）或者在其他地方缺少“”（可能也在另一个类中） - 或类似的东西 - 这让一些浏览器解释它正确（例如，windows下的chrome和mac下的safari但不是windows下的），而其他浏览器则没有。

但我希望从 Stack Overflow 的一位专业人士那里得到一些线索，告诉我地址​​栏的这种行为可能是什么原因，或者如何找到那些丢失的字符或那些根本不属于代码的字符. 什么是最佳实践，可能有任何工具吗？

chrome和ie开发工具（f12）和firefox firebug没有给我任何控制台错误，所以我现在真的一无所知，也许它在html中？我可以发布 html，因为它不是很大，因为大部分内容都是由 js 创建的。

```
<!DOCTYPE HTML>

<html>

<head>
    <title>
        engine demo build
    </title>

    <style type="text/css" title="currentStyle" media="screen">
        @import "style_l.css";
    </style>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <meta name="Content-Language" content="en-us">
    <meta name="Language" content="english, en-us">

    <script type="text/javascript" src="Engine.KeyboardDefines.js"></script>
    <script type="text/javascript" src="Engine.HelpFunctions.js"></script>
    <script type="text/javascript" src="Engine.BagaObject.js"></script>
    <script type="text/javascript" src="Engine.CollisionRect.js"></script>
    <script type="text/javascript" src="Engine.ImageObject.js"></script>
    <script type="text/javascript" src="Engine.ParallaxLayer.js"></script>
    <script type="text/javascript" src="Autoscroller.LevelObject.js"></script>
    <script type="text/javascript" src="Engine.SpriteImageObject.js"></script>
    <script type="text/javascript" src="Autoscroller.Player.js"></script>
    <script type="text/javascript" src="JumpAndRun.Player.js"></script>
    <script type="text/javascript" src="Adventure.Player.js"></script>
    <script type="text/javascript" src="JumpAndRun.Gate.js"></script>
    <script type="text/javascript" src="JumpAndRun.Switch.js"></script>
    <script type="text/javascript" src="JumpAndRun.Box.js"></script>
    <script type="text/javascript" src="JumpAndRun.Dragon.js"></script>
    <script type="text/javascript" src="JumpAndRun.Crane.js"></script>
    <script type="text/javascript" src="JumpAndRun.Golem.js"></script>
    <script type="text/javascript" src="Autoscroller.Obstacles.js"></script>
    <script type="text/javascript" src="Autoscroller.ObstaclesGround.js"></script>
    <script type="text/javascript" src="Adventure.ObstaclesGround.js"></script>
    <script type="text/javascript" src="Adventure.ObstaclesGroundCastle.js"></script>
    <script type="text/javascript" src="Adventure.ConversationIndicator.js"></script>
    <script type="text/javascript" src="Autoscroller.ObstaclesCeiling.js"></script>
    <script type="text/javascript" src="JumpAndRun.Obstacles.js"></script>
    <script type="text/javascript" src="JumpAndRun.ObstaclesGround.js"></script>
    <script type="text/javascript" src="JumpAndRun.ObstaclesGolemGround.js"></script>
    <script type="text/javascript" src="JumpAndRun.ObstaclesSpikes.js"></script>
    <script type="text/javascript" src="JumpAndRun.ObstaclesGroundLow.js"></script>
    <script type="text/javascript" src="JumpAndRun.ObstaclesGoals.js"></script>
    <script type="text/javascript" src="Autoscroller.GoalObject.js"></script>
    <script type="text/javascript" src="GameEngine.js"></script>
    <script type="text/javascript" src="Engine.EngineCore.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="Engine.FPSObject.js"></script>

</head>

<body>
    <div class='GAMEmt-std'></div>

    <div id='debug'></div>

    <div id='GAMEglobalwrapper'>
        <div id='sounds'>
            <div id='bgmusic'>
                <audio id='l1bg' loop>
                    <source src='assets/audio/musicTracks/Longing_for_Tumbleweeds_by_Admiral_Bob_feat_Snowflake.mp3' type='audio/mp3'/>
                    <source src='assets/audio/musicTracks/Longing_for_Tumbleweeds_by_Admiral_Bob_feat_Snowflake.ogg' type='audio/ogg'/>

                    <p>seeing this message can have 2 possible causes:
                    <br>
                    1\. You are using a browser which is not supported or
                    <br>
                    2\. You are using Safari on windows (or linux? - not tested till now)
                    <br><br>
                    Solution:
                    <br>
                    In the first case get a supported browser
                    <br>
                    In the second case download Apple Quicktime, close Safari, install Quicktime, run Quicktime till advertisement appears, close Quicktime, run Safari again, browse to this site.
                </audio><!--l1bg-->

                <audio id='l2bg' loop>
                    <source src='assets/audio/musicTracks/Two_Swords_by__ghost.mp3' type='audio/mp3'/>
                    <source src='assets/audio/musicTracks/Two_Swords_by__ghost.ogg' type='audio/ogg'/>
                </audio><!--l2bg-->

                <audio id='l3bg' loop>
                    <source src='assets/audio/musicTracks/Real_good_day_by_calling_sister_midnight.mp3' type='audio/mp3'/>
                    <source src='assets/audio/musicTracks/Real_good_day_by_calling_sister_midnight.ogg' type='audio/ogg'/>
                </audio><!--l2bg-->

                <audio id='l4bg' loop>
                    <source src='assets/audio/musicTracks/Dance_of_Light_Pixies_by_onlymeith.mp3' type='audio/mp3'/>
                    <source src='assets/audio/musicTracks/Dance_of_Light_Pixies_by_onlymeith.ogg' type='audio/ogg'/>
                </audio><!--l4bg-->

                <audio id='scenebg' loop>
                    <source src='assets/audio/musicTracks/Longing_spacious_choir_remix_by_zep_hurme.mp3' type='audio/mp3'/>
                    <source src='assets/audio/musicTracks/Longing_spacious_choir_remix_by_zep_hurme.ogg' type='audio/ogg'/>
                </audio><!--l2bg-->
            </div><!--bgmusic-->

            <div id='soundfx'>
                <audio id='hitsound'>
                    <source src='assets/audio/soundFX/standardHit.mp3' type='audio/mp3'/>
                    <source src='assets/audio/soundFX/standardHit.ogg' type='audio/ogg'/>
                </audio><!--hitsound-->

                <audio id='switchsound'>
                    <source src='assets/audio/soundFX/switch.mp3' type='audio/mp3'/>
                    <source src='assets/audio/soundFX/switch.ogg' type='audio/ogg'/>
                </audio><!--switchsound-->

                <audio id='gatesound'>
                    <source src='assets/audio/soundFX/gate.mp3' type='audio/mp3'/>
                    <source src='assets/audio/soundFX/gate.ogg' type='audio/ogg'/>
                </audio><!--gatesound-->

                <audio id='boxsound'>
                    <source src='assets/audio/soundFX/box.mp3' type='audio/mp3'/>
                    <source src='assets/audio/soundFX/box.ogg' type='audio/ogg'/>
                </audio><!--boxsound-->
            </div><!--soundfx-->
        </div><!--sounds-->

        <canvas id="canvas" ondrop="GLOBAL_gameEngine.drop(event)" ondragover="GLOBAL_gameEngine.allowDrop(event)" width="800" height="450"> 
            <p>You will need a current version of a major browser to play this game</p>
        </canvas>

        <div id='gameoverscreen'>
            <div id='gameover'></div>

            <div id='lvl1gameover'>
                <a href=javascript:GLOBAL_gameEngine.restartLevel1()>Try Again</a>
            </div><!--lvl1gameover-->

            <div id='lvl2gameover'>
                <a href=javascript:GLOBAL_gameEngine.resetAtCheckpoint()>Reset At Last Checkpoint</a>
            </div><!--lvl2gameover-->

            <div id='lvl4gameover'>
                <a href=javascript:GLOBAL_gameEngine.restartLevel4()>Somenone saw you. Try again. -></a>
            </div><!--lvl4gameover-->
        </div><!--gameover-->

        <div id='storyscreen'>
            <div id='languagepicker'>
                <!--a href=javascript:GLOBAL_gameEngine.setLanguage('en')-->English (soon)<!--/a-->
                <br><br>
                <a href=javascript:GLOBAL_gameEngine.setLanguage('de')>Deutsch</a>
            </div><!--languagepicker-->

            <div id='sequenz1'>
                <div id='sequenz1question'>
                </div><!--sequenz1question-->

                <div id='sequenz1img'>
                </div><!--sequenz1img-->

                <div id='sequenz1txt'>
                </div><!--sequenz1txt-->
            </div><!--sequenz1-->

            <div id='sequenz2'>
                <div id='sequenz2question'>
                </div><!--sequenz2question-->

                <div id='sequenz2img'>
                </div><!--sequenz2img-->

                <div id='sequenz2txt'>
                </div><!--sequenz2txt-->
            </div><!--sequenz2-->

            <div id='sequenz3'>
                <div id='sequenz3question'>
                </div><!--sequenz3question-->

                <div id='sequenz3img'>
                </div><!--sequenz3img-->

                <div id='sequenz3txt'>
                </div><!--sequenz3txt-->
            </div><!--sequenz3-->

            <div id='sequenz4'>
                <div id='sequenz4question'>
                </div><!--sequenz4question-->

                <div id='sequenz4img'>
                </div><!--sequenz4img-->

                <div id='sequenz4txt'>
                </div><!--sequenz4txt-->
            </div><!--sequenz4-->

            <div id='sequenz5'>
                <div id='sequenz5question'>
                </div><!--sequenz5question-->

                <div id='sequenz5img'>
                </div><!--sequenz5img-->

                <div id='sequenz5txt'>
                </div><!--sequenz5txt-->
            </div><!--sequenz5-->

            <div id='conversation' ondrop="GLOBAL_gameEngine.drop(event)" ondragover="GLOBAL_gameEngine.allowDrop(event)">
                <div id='conversationplayertxt'>
                </div><!--conversationplayertxt-->

                <div id='conversationvillagertxt'>
                </div><!--conversationvilagertxt-->

                <div id='conversationdirection'>
                </div><!--conversationdirection-->

                <div id='conversationimg'>
                </div><!--conversationImage-->
            </div><!--conversation-->
        </div><!--storyscreen-->

        <div id='hint' draggable='false'>
        </div><!--hint-->

        <div id='gui'>
            <div id='healthmeter'>
                <div id='hp1'><img src='assets/visuals/images/heart.png'></div>
                <div id='hp2'><img src='assets/visuals/images/heart.png'></div>
                <div id='hp3'><img src='assets/visuals/images/heart.png'></div>
                <div class='clearleft'></div>
            </div>

            <div id='itembackpack'>
                <div id='pickaxe' alt='pickaxe' title='pickaxe' class='firstitem'><img src='assets/visuals/images/pickaxe.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "pickaxe")'></div>
                <div id='letter' alt='letter' title='letter' class='notfirstitem'><img src='assets/visuals/images/letter.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "letter")'></div>
                <div id='iron' alt='iron' title='iron' class='notfirstitem'><img src='assets/visuals/images/iron.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "iron")'></div>
                <div id='nails' alt='nails' title='nails' class='notfirstitem'><img src='assets/visuals/images/nails.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "nails")'></div>
                <div id='dagger' alt='dagger' title='dagger' class='notfirstitem'><img src='assets/visuals/images/dagger.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "dagger")'></div>
                <div id='book' alt='book' title='book' class='notfirstitem'><img src='assets/visuals/images/book.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "book")'></div>
                <div id='amulet' alt='amulet' title='amulet' class='notfirstitem'><img src='assets/visuals/images/amulet.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "amulet")'></div>
                <div id='ring' alt='ring' title='ring' class='notfirstitem'><img src='assets/visuals/images/ring.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "ring")'></div>
                <div id='mouse' alt='mouse' title='mouse' class='notfirstitem'><img src='assets/visuals/images/mouse.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "mouse")'></div>
                <div id='wasps' alt='wasps' title='wasps' class='notfirstitem'><img src='assets/visuals/images/wasps.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "wasps")'></div>
                <div id='dog' alt='dog' title='dog' class='notfirstitem'><img src='assets/visuals/images/dog.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "dog")'></div>
                <div id='sleepingpowder' alt='sleepingpowder' title='sleepingpowder' class='notfirstitem'><img src='assets/visuals/images/sleepingpowder.jpg' draggable='true' ondragstart='javascript:GLOBAL_gameEngine.drag(event, "sleepingpowder")'></div>
            </div>
        </div><!--gui-->
    </div>

    <script>
        var debug = document.getElementById('debug');

        debug.log = function(){
            this.innerHTML = "";
            for(var i = 0; i < arguments.length; i++)
            {
                this.innerHTML += arguments[i] + " ";
            }
        }
    </script>
</body>

</html> 
```

忘了提：页面显示[object Object]

将其更改为 onclick，现在我得到： ReferenceError: GameEngine is not defined - 似乎缺少一个右括号 - 我现在正在搜索，它不在 gameEngine 中，这意味着它是上面的类之一

最后一个错误是我不小心没有通过“//”注释掉的评论 - onclick 解决了问题

非常感谢您的大力支持！现在我可以在摆脱刚刚发现的性能问题后准备上传所有内容。再次非常感谢你真的帮了我很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:15:41.647

而不是使用hrefs，你应该让你的链接点击：

```
<a onclick="GLOBAL_gameEngine.restartLevel1()">Try Again</a> 
```

此外，如果您想使用 href，您仍然需要将您的 href 括在引号中

```
<a href="javascript:GLOBAL_gameEngine.restartLevel1()">Try Again</a> 
```

# c# - INotifyPropertyChanged 绑定到 GridColumn 中的 DataTemplate

> ID：13959445
> 
> 赞同：5
> 
> 时间：2012-12-19T19:11:57.600
> 
> 标签：c#, wpf, xaml, gridview, inotifypropertychanged

我已经成功地将 DataGrid 中的列绑定到一个可观察的集合，其中的对象实现了 INotifyPropertyChanged 接口：

这是xml：

```
<dxg:GridColumn Name="Name" FieldName="Stapel" DisplayMemberBinding="{Binding Path=Name}" /> 
```

以及对象类中的属性：

```
public string Name
    {
        get { return _name; }
        set
        {
            if (value == _name) return;
            _name = value;
            OnPropertyChanged("Name");
        }
    } 
```

但在另一列中，我使用的是模板：

```
<dxg:GridColumn.CellTemplate>
    <DataTemplate>
        <StackPanel>
                <Rectangle Height="19" Width="19" Fill="{Binding Path=Data.StatusColor}"></Rectangle>
        </StackPanel>
    </DataTemplate>
</dxg:GridColumn.CellTemplate> 
```

矩形的 Fill 属性绑定到“计算”属性：

```
public SolidColorBrush StatusColor
{
    get
    {
        if (StapelStatus == StapelStatus.Neu)
        {
            return new SolidColorBrush(Colors.CornflowerBlue);
        }
        return new SolidColorBrush(Colors.DarkOrange);
    }
} 
```

其他一些改变值的属性设置器`StapelStatus`正在调用

```
OnPropertyChanged("StatusColor"); 
```

我认为这足以改变网格列中矩形颜色的颜色。但不幸的是，当`StapelStatus`被更改并被`OnPropertyChanged("StatusColor")`称为网格时，并没有反映这种变化。我想我必须以某种方式更改`DataTemplate`. 有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:17:45.593

这行得通吗？

```
public Whatever StapelStatus
{
    get { return _stapelStatus; }
    set
    {
        _stapelStatus = value;
        OnPropertyChanged("StapelStatus");
        StatusColor = value == StapelStatus.Neu ? new SolidColorBrush(Colors.CornflowerBlue) : new SolidColorBrush(Colors.DarkOrange);
    }
}

public Brush StatusColor
{
    get { return _statusColor; }
    set
    {
        _statusColor = value;
        OnPropertyChanged("StatusColor");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:45:48.193

这确实是 XAML 中的一个绑定问题。不幸的是，我没有在 GridColumn 中设置 FieldName 属性。我认为 FieldName 仅用于没有任何模板的普通 GridColumns。

在列的工作 XAML 下方：

```
<dxg:GridColumn Header="" FieldName="StatusColor">
    <dxg:GridColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Rectangle RadiusX="19" RadiusY="19" Height="19" Width="19" Stroke="Black" Fill="{Binding Path=Value}"></Rectangle>
                </StackPanel>
        </DataTemplate>
    </dxg:GridColumn.CellTemplate>
</dxg:GridColumn> 
```

# c++ - Winsock 编程 - WsaGetSelectError,

> ID：13959446
> 
> 赞同：0
> 
> 时间：2012-12-19T19:12:05.570
> 
> 标签：c++, networking, winsock

我的 Winsock 编程小问题，我正在尝试将图形界面与在两个客户端之间传递数据的能力集成在一起。

基本上，按下 C 并执行第一段代码，然后我会得到一个“套接字错误”，这是我在此处的第二段代码中的 MsgBox 给出的。

```
case 'C':
{
    if(!Connected)
    {
        connect(s,(LPSOCKADDR)&me,sa_size);
        break;
    }
}

case WM_SOCKET:
    if (WSAGETSELECTERROR(lParam))
    {
        cout << "Socket error\n";
        WSAGetLastError();
        MessageBox (hwnd,"Socket Error123","Information",MB_OK);
        PostQuitMessage (0);
        return 0;
    } 
```

我真的不知道该尝试什么来解决这个问题，我一直无法找到任何关于将图形界面添加到我目前拥有的网络代码中的帮助（在没有实现图形部分的情况下工作），只是看我目前能找到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:36:49.770

当为真时，您的处理程序缺少`'C'`/`break`语句，当返回 0时，您的处理程序缺少/语句。`return``Connected``WM_SOCKET``break``return``WSAGETSELECTERROR()`

此外，`WSAGetLastError()`在`WM_SOCKET`. 您必须使用`WSAGETSELECTERROR()`报告的错误代码。

尝试这个：

```
case 'C':
{
    if (!Connected)
        connect(s,(LPSOCKADDR)&me,sa_size);
    break;
}

case WM_SOCKET:
    if (WSAGETSELECTERROR(lParam))
    {
        std::cout << "Socket error " << WSAGETSELECTERROR(lParam) << " on Event " << WSAGETSELECTEVENT(lParam) << std::endl;
        MessageBox (hwnd, TEXT("Socket Error"), TEXT("Information"), MB_OK | MB_ICONERROR);
        PostQuitMessage (0);
        return 0;
    }
    break; 
```

# java - java安装问题

> ID：13959447
> 
> 赞同：0
> 
> 时间：2012-12-19T19:12:06.273
> 
> 标签：java

我不确定这里缺少什么。我已经安装了java，这就是它 `C:\Program Files\Java` 在那个文件夹下的样子我有两个文件夹一个是`jre`一个是`jdk1.6.0_30`

现在这是我的类路径和 java home 的样子

```
 C:\Perl64\site\bin;C:\Perl64\bin;C:\Perl\site\bin;C:\Perl\bin;C:\Windows\system3
 2;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0
 \;C:\Program Files (x86)\Microsoft Application Virtualization Client;C:\Program
 Files\TortoiseSVN\bin;C:\maven\3.0\bin;C:\Program Files (x86)\QuickTime\QTSystem
 \:C:\Users\sgudla\Desktop\jad158g.win;C:\Program Files (x86)\QuickTime\QTSystem\
**;C:\Program Files\Java\jdk1.6.0_30\bin;C:\Program Files\Java\jdk1.6.0_30\jre\bin** 
```

和 java home 看起来像下面的 **C:\Program Files\Java\jdk1.6.0_30**

并且类路径如下所示

```
C:\>echo %CLASSPATH%
C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip**;C:\Program Files\Java\jdk1.6
.0_30\bin;C:\Program Files\Java\jdk1.6.0_30\lib** 
```

当我在终端中运行 java 时，它给了我以下错误

```
C:\>java
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

但是当我做 javac 它工作正常。它所需要的只是 java.exe 文件和路径中的 javac.exe。我已经指出了 java.exe 所在的 jdk bin。我不确定我在这里缺少什么。有人可以帮我解决这个问题吗？

非常感谢您的回答..我刚刚从 c:\system\windows 32 中删除了 java.exe 文件，该文件解决了整个问题，但不确定是什么原因..现在我正在尝试打开我的 Eclipse

我试图在这里打开 Eclipse 是我的 eclipse.inf 文件的样子

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.0.v20100503
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m 
```

现在，当我打开我的 Eclipse 时，我收到以下错误 java 已启动但以退出代码 1 终止

再次不确定它为什么会失败..任何人都有任何想法..谢谢，斯瓦蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:21:17.383

从 C:\Program Files\Java\jdk1.6.0_30\bin 尝试相同的命令“java”

如果同样的问题存在，那就是安装问题。

如果不是，那就是路径问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:23:25.707

这就是[谷](http://geekycoder.wordpress.com/2009/07/08/java-tips-adventure-in-resolving-the-java-error-error-occurred-during-initialization-of-vm/)歌给我的：尝试`java.exe`从`C:\Windows\System32`

# php - 使用嵌入式 YouTube 视频将帖子拉入 PHP 页面

> ID：13959449
> 
> 赞同：0
> 
> 时间：2012-12-19T19:12:09.407
> 
> 标签：php, wordpress, youtube

目前在 WordPress 3.5 中，当您创建新帖子时，您可以简单地粘贴 YouTube URL，然后在实时帖子中将其转换为嵌入式视频。这在 Wordpress 中对我来说非常有用，但是我正在使用 get_post 将 wordpress 帖子拉到我的非 WP 站点中，并且 URL 出现而不是嵌入视频。

我正在尝试确定将帖子内容中的任何 YouTube 视频链接显示为嵌入视频的最佳方法。

不确定我是否可以在我的页面上从 Wordpress 借用一个功能（以及我将如何做到这一点），或者是否需要使用 PHP 以某种方式解析内容以查找视频链接。也不知道该怎么做，因为每个视频最后都会有不同的 url 参数，例如：[http ://www.youtube.com/watch?v=abcdefghijk](http://www.youtube.com/watch?v=abcdefghijk)

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:15:39.317

尝试应用过滤器：

```
$posts = get_posts(array('suppress_filters' => false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:31:53.690

我偶然发现了这个功能：

```
 function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);   
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}

$fullstring = "this is my [tag]dog[/tag]";
$parsed = get_string_between($fullstring, "[tag]", "[/tag]");

echo $parsed; // (result = dog) 
```

我以此为基础编写了高级搜索和替换。这可能对 REGEX 是可行的，我不确定，但这已经达到了目的。谢谢大家！

# java - 使用 xml 向石英调度程序添加参数

> ID：13959451
> 
> 赞同：2
> 
> 时间：2012-12-19T19:12:12.763
> 
> 标签：java, spring, quartz-scheduler

我的 servlet.xml 中有当前的工作和触发器

```
<bean id="actualizacionAsistencias" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="asistenciasManager" />
    <property name="targetMethod" value="run" />
</bean?

<bean id="asistenciasTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="actualizacionAsistencias" />
    <property name="cronExpression" value="0 1 1 * * ?" />
</bean> 
```

有什么方法可以添加参数吗？我需要方法'run'在执行时接收'true'（布尔值）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:46:34.200

遵循 bean 类的[Javadoc](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/scheduling/quartz/MethodInvokingJobDetailFactoryBean.html)，它似乎扩展了具有属性参数的普通 MethodInvoker。这意味着以下内容应该有效（未经测试）：

```
<bean id="actualizacionAsistencias" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="asistenciasManager" />
    <property name="targetMethod" value="run" />
    <property name="arguments">
        <list>
            <value>true</value>
        </list>
    </property>
</bean?

<bean id="asistenciasTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="actualizacionAsistencias" />
    <property name="cronExpression" value="0 1 1 * * ?" />
</bean> 
```

# seo - 本地目录网站的站点地图结构（用于搜索引擎机器人）

> ID：13959458
> 
> 赞同：1
> 
> 时间：2012-12-19T19:12:31.317
> 
> 标签：seo, search-engine, sitemap, bots

我正在本地列表网站上工作。我必须最终确定站点的站点地图/链接目录，以使搜索引擎机器人能够有效地抓取我的站点（最终用户应该使用文本框进行搜索）

我有以下模式：关键字（字母顺序）=>城市（字母顺序）=>位置（在上面的城市中，按字母顺序）

请注意，在上面描述的三个级别上，它们不是实际的配置文件，只是一堆更多的链接，例如：keyword = xyz；city = New York, Detroit, California, Minnesota Locality = 上面选择的城市列表。

这可以通过两种方式达到高潮：1）在第三级，我提供了一个指向搜索结果页面的链接（最终用户会看到）2）我简单地列出了站点地图本身中列出的实体的链接以及相关信息（将是机器人确定链接相关性的附加内容）

在这里增加级别（3）也会受到惩罚，我应该考虑使用两个吗？

注意：搜索结果页面（如最终用户所见）具有使用 links 而非 ajax 的分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:48:30.027

要完成您的站点地图，您还可以在关键字、城市和地区上放置一个链接。它将帮助用户非常轻松地浏览您的网站。

如果您在第三阶段以更高的级别进行，那么单个页面上的链接看起来会太多。因此，Google 将忽略您的页面，并且不会将其编入索引。因此，您将失去 SEO 优势的机会。

# android - WebView 褪色边缘是一个实心块

> ID：13959460
> 
> 赞同：3
> 
> 时间：2012-12-19T19:12:38.540
> 
> 标签：android, android-webview, fade

我正在尝试让褪色边缘适用于 Android 4.1。我发现我需要“android:requiresFadingEdge”，但现在滚动时，我得到一个实心块，而不是淡入淡出，它出现在顶部/底部。

```
<WebView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fadingEdge="vertical"
    android:fadingEdgeLength="20dp"
    android:overScrollMode="never"
    android:requiresFadingEdge="vertical" /> 
```

有没有人见过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:30:25.073

在 Android 4.0.3 上遇到同样的问题

我的解决方案：禁用WebView 的**硬件加速：**

```
if (Build.VERSION.SDK_INT >= 11) {
    webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

# vb.net - 在 Windows 服务上运行 CMD 命令

> ID：13959464
> 
> 赞同：2
> 
> 时间：2012-12-19T19:13:03.577
> 
> 标签：vb.net, process, windows-services, cmd

我创建了一个需要使用 CMD 进程执行 EXE 文件的 Windows 服务。我使用了以下代码：

```
 Str = "C:\PCounter\Staff\account.exe CHARGE " & Name & " " & Amount & " TO" & Id
  Dim procStartInfo As New System.Diagnostics.ProcessStartInfo(Str)
  procStartInfo.RedirectStandardOutput = True
  procStartInfo.UseShellExecute = False
  procStartInfo.CreateNoWindow = True
  Dim proc As New System.Diagnostics.Process
  proc.StartInfo = procStartInfo
  proc.Start()
  proc.Dispose() 
```

但是上面的代码将返回

> 系统找不到指定的文件

我在 Windows 窗体上尝试了相同的代码，并且工作正常。为了确保路径正确，我在与 EXE 文件相同的位置添加了一个文本文件，并将文本文件的内容加载到服务中。它工作正常。

我想不出别的了；如果您能在这方面帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:22:05.120

ProcessStartInfo 有两个属性。一个用于运行可执行文件，另一个用于传递给可执行文件的参数。Arguments 属性的语义与命令行完全相同。

您不能将参数包含在与可执行文件相同的属性中。他们必须分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:00:41.480

**创建服务：**

```
sc create Vm-Symantec04 binPath= "\"C:\App32\VMware\VMware Workstation\vmrun.exe\" -T ws start \"D:\VM\Sym04\Sym04.vmx\" nogui" depend= "VMAuthdService/VMnetDHCP/VMUSBArbService/VMware NAT Service"  start= auto 
```

**删除服务：**

```
sc delete Vm-Symantec04 
```

# c++ - 将 boost std::string::const_iterator 转换为字符串和 int c++

> ID：13959466
> 
> 赞同：1
> 
> 时间：2012-12-19T19:13:06.167
> 
> 标签：c++, regex, boost, casting

我需要将 const_iterator 转换为可以执行 int 和 string 操作的类型。results[1] 包含我需要使用的 regex_search 中的文本。我已经花了几个小时尝试将其转换为可行的格式，但没有成功...

```
boost::match_results<std::string::const_iterator> results;
      boost::regex ex(pattern, boost::regex::perl);
      if(boost::regex_search(line, results, ex))
        (results[1] > 10) ? cout << "Fail" : cout << "Pass"; 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:20:52.350

您可以`std::string`像这样创建 const 字符串迭代器的匹配结果：

```
std::string result_string( results[1].first, results[1].second ); 
```

...或者简单地说：

```
std::string result_string = results[1].str(); 
```

您可以将字符串强制为`int`这样的：

```
int result_int = boost::lexical_cast< int >( result_string ); 
```

...或者，正如*@Jonathan Wakely*所指出的，如果您使用的是**C++11**：

```
int result_int = std::stoi( result_string ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:21:54.140

`results[1].first`是一个迭代器，指向匹配文本的开头；`results[1].second`是一个迭代器，它指向匹配文本的末尾。使用这对迭代器访问匹配中的单个字符。如果您只想要一个包含匹配文本副本的字符串对象，请使用`results[1].str()`.

# ios - UITextView 的表格单元格高度，其中内容对齐方式为 NSTextAlignmentJustified

> ID：13959467
> 
> 赞同：1
> 
> 时间：2012-12-19T19:13:17.163
> 
> 标签：ios, cocoa-touch, uitableview, ios6, uitextview

我有一个 UITextView，其中内容由 NSTextAlignmentJustified 对齐。在**cellForRowAtIndexPath 中：**将此文本视图添加到单元格内容视图并根据其内容更改框架

```
UITextView *commentsTextView = (UITextView *)[self getCommentField:comment];
[cell.contentView addSubview:commentsTextView];
CGRect tempFrame = commentsTextView.frame;
tempFrame.size.height = commentsTextView.contentSize.height;
commentsTextView.frame = tempFrame; 
```

到目前为止，一切都很好。现在，如何为**heightForRowAtIndexPath:**检测该视图的 contentSize ？我试过了

```
NSString *comment = [[self.allComments objectAtIndex:indexPath.row] objectForKey:@"commentText"];
CGSize constraintSize = CGSizeMake(315.0f, MAXFLOAT);
CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14.0]
                  constrainedToSize:constraintSize
                      lineBreakMode:NSTextAlignmentJustified]; 
```

我也试过**lineBreakMode:NSLineBreakByWordWrapping**等等。但是当文本很长时，单元格的高度总是更小，因为似乎没有办法计算**对齐**文本的大小（因为文本中间有空格）。字体是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:20:07.320

好，我知道了。UITextView 每边有 8 个像素的昆虫，我的**CGSizeMake(315.0f, MAXFLOAT);** 必须是**CGSizeMake(299.0f, MAXFLOAT);**

# php - php中数组的值从低到高排序

> ID：13959468
> 
> 赞同：1
> 
> 时间：2012-12-19T19:13:20.887
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

我有一个像这样的数组：

```
Array
(
    [0] => Array
        (
            [lop] => 7A1
            [tongdiem] => 4
        )

    [1] => Array
        (
            [lop] => 7A2
            [tongdiem] => 5
        )

    [2] => Array
        (
            [lop] => 7A3
            [tongdiem] => 6
        )

    [3] => Array
        (
            [lop] => 7A4
            [tongdiem] => 30
        )

    [4] => Array
        (
            [lop] => 7A5
            [tongdiem] => 21
        )

) 
```

我需要排序 [tongdiem] ASC，但不更改数组键，例如：

```
Array
(
    [0] => Array
        (
            [lop] => 7A1
            [tongdiem] => 4
        )

    [1] => Array
        (
            [lop] => 7A2
            [tongdiem] => 5
        )

    [2] => Array
        (
            [lop] => 7A3
            [tongdiem] => 6
        )

    [3] => Array
        (
            [lop] => 7A5
            [tongdiem] => 21
        )

    [4] => Array
        (
            [lop] => 7A4
            [tongdiem] => 30
        )

) 
```

我尝试过 asort，一些 php 数组内置函数，但不起作用。

我需要使用 [tongdiem] 值 ASC 对数组进行排序，但不更改数组键。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:18:20.880

[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

```
function cmp($a, $b) {
    if ($a['tongdiem'] == $b['tongdiem']) {
        return 0;
    }
    return ($a['tongdiem'] < $b['tongdiem']) ? -1 : 1;
}
usort($array, "cmp"); 
```

# python - 文本文件上的 for 循环

> ID：13959470
> 
> 赞同：1
> 
> 时间：2012-12-19T19:13:40.023
> 
> 标签：python, list, filenames

我正在编写一个巨大的代码，我需要它做的一件小事就是检查一个分为不同行的文本文件。每次该行为空时，我都需要它来创建一个新的行列表。例如，如果文本是：（每个数字都是一个新行）

1 2 3 4

5 6 3

1 2

它应该构建 3 个不同的列表：[1,2,3,4]，[5,6,3]，[1,2]

这是我到目前为止的代码（刚刚开始）：

> ```
>  new_list=[]
>     my_list=[]
>     doc=open(filename, "r")
>     for line in doc:
>             line=line.rstrip()
>             if line !="":
>                     new_list.append(line)
>     return new_list 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:15:05.997

好的，现在应该可以工作了：

```
initial_list, temp_list = [], []
for line in open(filename):
    if line.strip() == '':
        initial_list.append(temp_list)
        temp_list = []
    else: temp_list.append(line.strip())
if len(temp_list) > 0: initial_list.append(temp_list)
final_list = [item for item in initial_list if len(item) > 0]
print final_list 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:14:57.253

您可以执行以下操作：

```
[x.split() for x in fileobject if x.strip()] 
```

要获取整数，您可以使用`map`：

```
[map(int,x.split()) for x in fileobject if x.strip()] 
```

`fileobject`返回的对象在哪里`open`。这可能最好在上下文管理器中执行：

```
with open(filename) as fileobject:
     data_list = [map(int,x.split()) for x in fileobject if x.strip()] 
```

* * *

阅读其他帖子的一些评论，似乎我也没有正确理解您的问题。这是我纠正它的努力：

```
with open(filename) as fileobject:
    current = []
    result = [current]
    for line in fileobject:
        if line.strip(): #Non-blank line -- Extend current working list.
            current.extend(map(int,line.split()))
        else:  #blank line -- Start new list to work with
            current = []
            result.append(current) 
```

现在您的结果列表应该包含在`result`.

# django - django 模板 ModelChoiceField 长度

> ID：13959474
> 
> 赞同：2
> 
> 时间：2012-12-19T19:13:47.120
> 
> 标签：django, templates, sql-update, choicefield

我使用模板中的长度标签来计算下拉列表中的项目数。第一次呈现表单时，长度会很好地显示出来。当表单提交并且长度发生变化时，值不会更新**，但下拉列表会更新**！为什么？:(

在 forms.py 中：

```
lawsToValidate=forms.ModelChoiceField(queryset=LawsIdsModel.objects.filter(validated=0), empty_label="Select a law to validate", widget=forms.Select(attrs={'onchange': 'this.form.submit();'})) 
```

在我的模板中：

```
{{ form.lawsToValidate.field.choices|length }}
    <form id="lawsIdsForm" action="{% url lawsValidation.views.lawsView %}" method="post">{% csrf_token %}
        {{ form.non_field_errors }}

        {{ form.lawsToValidate.field.choices|length }} laws to validate!

        <div id="lawsToValidateChoice" class="fieldWrapper">
            {{ form.lawsToValidate.errors }}
            {{ form.lawsToValidate }}
        </div>
    </form> 
```

在views.py中：

```
def lawsView(request):
    responseDic={}
    state="display"
    if request.method == 'POST':
        lawToValidate=request.POST.getlist('lawsToValidate')[0]
        #if a law is selected
        if lawToValidate!="":
            law=LawsIdsModel.objects.get(id=lawToValidate)
            #saves the law
            if 'lawsValidationSaveButton' in request.POST:
                law.validated=True
                form = LawsIdsForm(request.POST, instance=law)
                if form.is_valid():
                    form.save()
                    del form
                    state="saved"
                    responseDic['success']="The law releveAnnee=" + str(law.releveAnnee) + ", releveMois=" + str(law.releveMois) + ", noOrdre=" + str(law.noOrdre) + " has been validated!"
                else:
                    state="ongoing"
            #displays the retrieved information of the law to validate (selection of a law in the drop down list)
            if state!="saved":
                #a law has been selected in the drop down list -> the related information are displayed
                if state=="display":
                    form = LawsIdsForm(instance=law, initial={'lawsToValidate': lawToValidate, 'releveAnnee': law.releveAnnee, 'releveMois': law.releveMois, 'noOrdre': law.noOrdre})
                #an error occured while validating the law -> display of these errors
                elif state=="ongoing":
                    form = LawsIdsForm(request.POST, instance=law, initial={'lawsToValidate': lawToValidate, 'releveAnnee': law.releveAnnee, 'releveMois': law.releveMois, 'noOrdre': law.noOrdre})
                responseDic['form']=form
                responseDic['law']=law
    #~ #if form has not been created yet -> unbound form
    if 'form' not in locals():
        responseDic['form'] = LawsIdsForm()
    return render_to_response('lawsValidation/index.html', responseDic, context_instance=RequestContext(request)) 
```

先感谢您，

罗曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:05:03.123

我认为您遇到了[问题 18066](https://code.djangoproject.com/ticket/18066)。它已作为“需要信息”关闭，但对我来说似乎是一个错误。

作为一种解决方法，请尝试

```
{{ form.lawsToValidate.field.choices.queryset.all|length }} 
```

# ruby-on-rails - 我在哪里可以找到部署到 Torquebox 的 Rails 应用程序的开发人员输出

> ID：13959477
> 
> 赞同：1
> 
> 时间：2012-12-19T19:13:52.183
> 
> 标签：ruby-on-rails, jruby, jrubyonrails, torquebox

我有一个 JRuby on Rails 应用程序，它通常部署为对 Tomcat 的战争。在开发模式中，我们使用 WEBrick 或 trinidad（通常是第一个）。现在我们正在考虑使用 Toquebox。

我能够使用 Torquebox 部署应用程序，但我想知道在哪里可以找到开发日志（例如请求/响应详细信息、执行的 SQL 查询等）。我已经习惯了那些东西。JBoss 的控制台、boot.log 和 server.log 不包含这些 - 只有扭矩箱特定的日志记录。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:42:38.047

当您当前位​​于应用程序目录中时，请使用

```
$ less log/development.log 
```

对于每个环境：env

```
$ less log/<env>.log 
```

为了遵循它（如它所附），请使用：

```
$ tail -f log/<env>.log 
```

# java - 将微调器中的图像设置为 Gravity.Center

> ID：13959479
> 
> 赞同：0
> 
> 时间：2012-12-19T19:14:04.160
> 
> 标签：java, android, xml, android-layout, android-spinner

我有一个带有图像作为项目的微调器，问题是它们被推到左边。我认为微调器的一个常见问题。我以前解决过这个问题，但只使用文本视图，而不是图像。如何将图像移动到下拉微调器菜单的中心？

这是我的自定义微调器 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="50dp"
 android:orientation="horizontal"
 android:gravity="center"
 android:layout_gravity="center"
 >

    <ImageView
     android:id="@+id/icon"
     android:layout_width="35dp"
     android:layout_height="35dp"
     android:scaleType="fitStart"
     android:gravity="center"
     android:layout_gravity="center"
     android:src="@drawable/icon"
     />

</LinearLayout> 
```

我已经尝试将它设置为在 xml 中以各种可能的方式居中（如您所见），但无法使其正常工作..

我在java中试过这个：

```
 ...
        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            ((ImageView) getCustomView(position, convertView, parent)).setGravity(Gravity.CENTER);

        }
      ... 
```

但我在 setGravity 上收到错误消息：ImageView 类型的方法 setGravity(int) 未定义

该怎么办 ？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:25:44.407

我认为您的问题是 LinearLayout 的宽度是 wrap_content，这意味着它只会与图像一样宽。因此它是居中的。尝试设置 layout_width="match_parent"

# mongodb - MongoDb 中的 nscannedObjectsAllPlans 解释是什么意思

> ID：13959482
> 
> 赞同：2
> 
> 时间：2012-12-19T19:14:13.047
> 
> 标签：mongodb

我试图检查一个查询，但我不确定“nscannedObjectsAllPlans”和“nscannedAllPlans”在做什么，因为我看到如果我直接从索引字段“purchaseState”运行查询

**对于“ nscannedObjects** ”、“ **nscanned** ”、“ **nscannedObjectsAllPlans** ”和“ **nscannedAllPlans** ” ，我得到相同的扫描项目结果

但是，一旦我在查询中添加了大于 400 的价格， **nscannedObjectsAllPlans**现在大于**nscannedObjects** 我想知道 **nscannedObjectsAllPlans**是否是运行带有 purchase_state 索引和 purchase_state_Id 索引的计划的扫描对象的总数？还是只是说明两个指数计划结果中的较大者？

我向购买状态添加了一个索引，然后我在购买状态和 Id 上添加了一个索引

db.toys.ensureIndex({"purchaseState" : 1})

db.toys.ensureIndex({"purchaseState" : 1, "_id" : 1})

```
 **db.toys.find({"purchaseState" : "NY"}).pretty().explain()**

               "cursor" : "BtreeCursor purchaseState_1",
               "isMultiKey" : false,
               "n" : 1596,
               "nscannedObjects" : 1596,
               "nscanned" : 1596,
               "nscannedObjectsAllPlans" : 1596,
               "nscannedAllPlans" : 1596,
               "scanAndOrder" : false,
               "indexOnly" : false,
               "nYields" : 0,
               "nChunkSkips" : 0,
               "millis" : 3,
               "indexBounds" : {
                       "purchaseState" : [
                               [
                                       "NY",
                                       "NY"
                               ]
                       ]
               },
               "server" : "XXXXXXX:27017"

            **db.toys.find({"purchaseState" : "NY", "price": { $gt : 400 }}).pretty().explain()**

               "cursor" : "BtreeCursor purchaseState_1",
               "isMultiKey" : false,
               "n" : 1423,
               "nscannedObjects" : 1596,
               "nscanned" : 1596,
               "nscannedObjectsAllPlans" : 1808,
               "nscannedAllPlans" : 1808,
               "scanAndOrder" : false,
               "indexOnly" : false,
               "nYields" : 0,
               "nChunkSkips" : 0,
               "millis" : 10,
               "indexBounds" : {
                       "purchaseState" : [
                               [
                                       "NY",
                                       "NY"
                               ]
                       ]
               },
               "server" : "XXXXXXX:27017" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:08:32.790

MongoDB 并行运行不同的可用计划并选择其中最好的一个，并记住该计划用于那种数据集。它还会自动验证该集合之后每 1000 次写入的计划，以确保它们具有正确的计划以进一步执行类似的查询。

nscannedObjectsAllPlans 意味着当您运行查询并让我们说它们使用两个不同的计划时，它会显示该计数。

nscannedObjectsAllPlans / nscannedAllPlans 没有明确的文档。我已经完成了[MongoDB 课程](https://education.10gen.com/dashboard)，它也没有解释，但它选择最佳计划的方式，间接地给出了 nscannedAllPlans 的答案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:31:48.167

当 MongoDB 执行查询时，它可能会尝试并行执行几个不同的计划，看看哪个是最好的。nscannedAllPlans 是所有计划中 nscanned 的总和，同样适用于 nscannedObjectsAllPlans/nscannedObjects。

# asp.net - 将 Facebook 元标记添加到 dotnetnuke 页面

> ID：13959485
> 
> 赞同：0
> 
> 时间：2012-12-19T19:14:27.980
> 
> 标签：asp.net, facebook, dotnetnuke, meta-tags, facebook-comments

我已将 Facebook 评论插件添加到我网站上的动态页面中，并且我正在尝试通过将关联的元标记添加到它们的页面来设置这些插件的管理。我的网站使用 CMS dotnetnuke。

我去了页面的设置 - 在高级 - 并添加了适当的元标记信息。但是，保存后，该页面上未启用管理。

我通过 wc3 验证器运行该页面，并产生了与该元标记相关的以下错误：

> 错误第 11 行，第 1926 列：没有属性“属性”

```
…type="text/javascript"></script><meta property="fb:admins" content="76804243"/> 
```

✉</p>

> 您已在文档中使用了上述属性，但您使用的文档类型不支持该元素的该属性。此错误通常是由于对使用框架的文档错误使用“严格”文档类型（例如，您必须使用“过渡”文档类型来获取“目标”属性），或使用供应商专有扩展，例如“ marginheight”（这通常通过使用 CSS 来解决，以实现所需的效果）。
> 
> 如果您使用的文档类型不支持元素本身，也可能会导致此错误，因为未定义的元素将没有支持的属性；在这种情况下，请参阅 element-undefined 错误消息以获取更多信息。
> 
> 如何修复：检查元素和属性的拼写和大小写，（记住 XHTML 都是小写的）和/或检查它们在所选文档类型中是否都允许，和/或使用 CSS 代替此属性。如果您在使用该元素将 Flash 媒体合并到网页中时收到此错误，请参阅有关有效 Flash 的常见问题解答项目。

我是否需要在我的 DNN 皮肤中以某种方式指定此属性？关于可能的修复的任何想法？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:19:10.603

您可以通过多种方式更改站点的 DocType。这是 DotNetNuke wiki 中描述选项的条目：http: [//www.dotnetnuke.com/Resources/Wiki/Page/Set-the-doctype-of-your-skin.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Set-the-doctype-of-your-skin.aspx)

# android - 科尔多瓦警报上的应用程序崩溃

> ID：13959486
> 
> 赞同：0
> 
> 时间：2012-12-19T19:14:39.710
> 
> 标签：android, cordova

在某些 Android 设备上，我基于 Cordova 的应用程序在我提示用户是否愿意接收通知时崩溃，这发生在第一次应用程序启动时。这是一个典型的堆栈跟踪：

```
android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@<i>[eight hex digits]</i> is not valid; is your activity running?
at android.view.ViewRoot.setView(ViewRoot.java:535)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.app.Dialog.show(Dialog.java:241)
at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
at org.apache.cordova.Notification$2.run(Notification.java:245)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

JavaScript 代码：

```
navigator.notification.confirm(
     'Do you wish to receive push notifications?',
     function(btnIndex) {
         if (btnIndex == 1) {
             push.enablePush();
             localStorage.pushAsked = true;
         } else {
             push.disablePush();
             localStorage.pushAsked = true;
         }
     },
     'Push Notifications',
     'Yes,No'
); 
```

有任何想法吗？我不知道哪些设备或 Android 版本受到了影响，但是对于那些报告它的人来说，这个问题是存在的。

我正在使用 Cordova 2.2.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:59:13.727

这是因为您试图在活动完成时显示警报对话框。

您可以继承 CordovaChromeClient 并检查 onJsAlert() 上的 activity.isFinishing()

我在 Github 上创建了一个项目来解决这个错误： [https ://github.com/kruyvanna/CordovaAlertBug_Android](https://github.com/kruyvanna/CordovaAlertBug_Android)

您可以在下面看到一个示例。

```
class CordovaOnJsAlertBug extends DroidGap{
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
}

@Override
public void init() {
    Log.e(TAG, "init()");
    CordovaWebView webView = new CordovaWebView(CordovaOnJsAlertBug.this);
    CordovaWebViewClient webViewClient;
    if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB)
    {
        webViewClient = new CordovaWebViewClient(this, webView);
    }
    else
    {
        webViewClient = new IceCreamCordovaWebViewClient(this, webView);
    }
    this.init(webView, webViewClient, new MyCordovaChromeClient(this, webView));
}

private class MyCordovaChromeClient extends CordovaChromeClient{
    private CordovaInterface cordova;
    public MyCordovaChromeClient(CordovaInterface ctx, CordovaWebView app) {
        super(ctx, app);
        this.cordova = ctx;
    }

    @Override
    public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
        if(cordova.getActivity().isFinishing()){
            Log.w(TAG, "Trying to alert while activity is finishing!! -> ignore");
            result.cancel();
            return true;
        }

        return super.onJsAlert(view, url, message, result);
    }
}
} 
```

# r - 运行简单 rhadoop 作业的问题 - 管道损坏错误

> ID：13959490
> 
> 赞同：3
> 
> 时间：2012-12-19T19:14:49.213
> 
> 标签：r, hadoop, rhadoop

我有一个安装了 rmr2 和 rhdfs 软件包的 hadoop 集群设置。我已经能够通过 CLI 和 rscripts 运行一些示例 MR 作业。例如，这有效：

```
#!/usr/bin/env Rscript
require('rmr2')

small.ints = to.dfs(1:1000)
out = mapreduce( input = small.ints, map = function(k, v) keyval(v, v^2))
df = as.data.frame( from.dfs( out) )
colnames(df) = c('n', 'n2')
str(df) 
```

最终输出：

```
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.

DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.

'data.frame':   1000 obs. of  2 variables:
 $ n : int  1 2 3 4 5 6 7 8 9 10 ...
 $ n2: num  1 4 9 16 25 36 49 64 81 100 ... 
```

我现在正试图继续编写我自己的 MR 工作的下一步。我有一个包含一些击球统计数据的文件（`/user/michael/batsmall.csv'）：

```
aardsda01,2004,1,SFN,NL,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11
aardsda01,2006,1,CHN,NL,45,43,2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,45
aardsda01,2007,1,CHA,AL,25,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2
aardsda01,2008,1,BOS,AL,47,5,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,5
aardsda01,2009,1,SEA,AL,73,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
aardsda01,2010,1,SEA,AL,53,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 
```

（batsmall.csv 是一个大得多的文件的摘录，但实际上我只是想证明我可以从 hdfs 读取和分析文件）

这是我的脚本：

```
#!/usr/bin/env Rscript

require('rmr2');
require('rhdfs');

hdfs.init()
hdfs.rmr("/user/michael/rMean")

findMean = function (input, output) {
  mapreduce(input = input,
            output = output,
            input.format = 'csv',
            map = function(k, fields) {
              myField <- fields[[5]]
              keyval(fields[[0]], myField)
            },
            reduce = function(key, vv) {
              keyval(key, mean(as.numeric(vv)))
            }
    )
}

from.dfs(findMean("/home/michael/r/Batting.csv", "/home/michael/r/rMean"))
print(hdfs.read.text.file("/user/michael/batsmall.csv")) 
```

每次都会失败，并且查看 hadoop 日志似乎是一个 Broken Pipe 错误。我无法弄清楚是什么原因造成的。随着其他工作的开展，我认为这是我的脚本的问题，而不是我的配置问题，但我无法弄清楚。诚然，我是 R 新手，对 hadoop 来说相对较新。

这是作业输出：

```
[michael@hadoop01 r]$ ./rtest.r
Loading required package: rmr2
Loading required package: Rcpp
Loading required package: RJSONIO
Loading required package: methods
Loading required package: digest
Loading required package: functional
Loading required package: stringr
Loading required package: plyr
Loading required package: rhdfs
Loading required package: rJava

HADOOP_CMD=/usr/bin/hadoop

Be sure to run hdfs.init()
Deleted hdfs://hadoop01.dev.terapeak.com/user/michael/rMean
[1] TRUE
packageJobJar: [/tmp/Rtmp2XnCL3/rmr-local-env55d1533355d7, /tmp/Rtmp2XnCL3/rmr-global-env55d119877dd3, /tmp/Rtmp2XnCL3/rmr-streaming-map55d13c0228b7, /tmp/Rtmp2XnCL3/rmr-streaming-reduce55d150f7ffa8, /tmp/hadoop-michael/hadoop-unjar5464463427878425265/] [] /tmp/streamjob4293464845863138032.jar tmpDir=null
12/12/19 11:09:41 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/12/19 11:09:41 INFO mapred.FileInputFormat: Total input paths to process : 1
12/12/19 11:09:42 INFO streaming.StreamJob: getLocalDirs(): [/tmp/hadoop-michael/mapred/local]
12/12/19 11:09:42 INFO streaming.StreamJob: Running job: job_201212061720_0039
12/12/19 11:09:42 INFO streaming.StreamJob: To kill this job, run:
12/12/19 11:09:42 INFO streaming.StreamJob: /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=hadoop01.dev.terapeak.com:8021 -kill job_201212061720_0039
12/12/19 11:09:42 INFO streaming.StreamJob: Tracking URL: http://hadoop01.dev.terapeak.com:50030/jobdetails.jsp?jobid=job_201212061720_0039
12/12/19 11:09:43 INFO streaming.StreamJob:  map 0%  reduce 0%
12/12/19 11:10:15 INFO streaming.StreamJob:  map 100%  reduce 100%
12/12/19 11:10:15 INFO streaming.StreamJob: To kill this job, run:
12/12/19 11:10:15 INFO streaming.StreamJob: /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=hadoop01.dev.terapeak.com:8021 -kill job_201212061720_0039
12/12/19 11:10:15 INFO streaming.StreamJob: Tracking URL: http://hadoop01.dev.terapeak.com:50030/jobdetails.jsp?jobid=job_201212061720_0039
12/12/19 11:10:15 ERROR streaming.StreamJob: Job not successful. Error: NA
12/12/19 11:10:15 INFO streaming.StreamJob: killJob...
Streaming Command Failed!
Error in mr(map = map, reduce = reduce, combine = combine, in.folder = if (is.list(input)) { :
  hadoop streaming failed with error code 1
Calls: findMean -> mapreduce -> mr
Execution halted 
```

以及来自工作跟踪器的示例异常：

```
ava.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:362)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:572)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:136)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:34)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:268)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.mapred.Child.main(Child.java:262) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:30:05.147

您需要检查失败尝试的标准错误。jobtracker Web UI 是到达那里的最简单方法。有根据的猜测是这`fields`是一个数据框，您像列表一样访问它，可能但不寻常。错误可能由此间接产生。

[此外，我们在RHadoop wiki](https://github.com/RevolutionAnalytics/RHadoop/wiki)上有一个调试文档，其中包含更多建议。

最后，我们有一个专门的[RHadoop google 组](https://groups.google.com/forum/#!forum/rhadoop)，您可以在其中与大量热心用户互动。或者你可以独自一人。

# php - 为什么空交易会持续存在我的实体（原则）？

> ID：13959493
> 
> 赞同：2
> 
> 时间：2012-12-19T19:15:03.173
> 
> 标签：php, mysql, doctrine-orm

我有一个原则实体，它被持久化到数据库中，而我从来没有调用过持久化或刷新。

我已经设法在下面非常简单地重现了这个问题。正如您将看到的，此脚本从名为 MyEntity 的数据库表中加载一行，并获取一个 php 对象，该对象具有该行的字段作为属性。然后脚本会更改其中一个属性，但不会调用persist 或flush。然后脚本创建一个什么都不做的空事务。奇怪的是，这使得对象持久化，因为对 php 对象所做的更改也在数据库中进行。我没想到这个脚本会对数据库进行任何更改。

这里发生了什么？

请注意，如果我删除空事务，问题就会消失，并且不会对数据库进行任何更改。

这是代码（**test.php**）：

```
<?php

    use Doctrine\ORM\Tools\Setup;

    require_once("Doctrine/ORM/Tools/Setup.php");
    Setup::registerAutoloadPEAR();

    $classloader = new Doctrine\Common\ClassLoader('testEntities', __DIR__);
    $classloader->register();

    $paths = array();
    $isDevMode = true;
    $config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);
    $dbParams = array("driver" => "pdo_mysql",
        "host" => "localhost",
        "user" => "username",
        "password" => "password",
        "dbname" => "databaseName",
        "charset" => "utf8");

    $em = \Doctrine\ORM\EntityManager::create($dbParams, $config);
    $em->getConnection()->exec("SET NAMES UTF8");

    $matches = $em->getRepository('testEntities\\MyEntity')->findBy(array('ID' => 1));
    echo("<pre>");

    if (!empty($matches)) {
        $object = $matches[0];
        print_r($object);
        $object->Content = "WILL IT BLEND?";
        print_r($object);
    }
    $em->transactional(function($em) {
        // Nothing happens here, but if I comment out the call to transactional, the behaviour of the script changes.
    });

    echo("</pre>Done!");
?> 
```

在数据库中创建并填充 MyEntity 表：

```
CREATE TABLE `MyEntity` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Content` varchar(500) COLLATE utf8_swedish_ci NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci;

INSERT INTO MyEntity (ID, Content) VALUES (NULL, "Hello World"); 
```

创建 MyEntity 学说实体（**testEntities\MyEntity.php**）：

```
<?php

    namespace testEntities;

    /** @Entity @Table(name="MyEntity")*/
    class MyEntity
    {
        /**
         * @Id @GeneratedValue(strategy="AUTO") @Column(type="integer") 
         */
        public $ID;

        /**
         * @Column(type="string", length=500)
         */
        public $Content;
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:32:15.623

教义手册：9.事务和并发-> [9.1.2。方法 2：明确](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html#approach-2-explicitly)（在部分底部）：

> Connection#transactional($func) 和 EntityManager#transactional($func) 之间的区别在于，后者的抽象在事务提交之前刷新 EntityManager，并且在发生异常时也会正确关闭 EntityManager（除了回滚事务）。

所以：`EntityManager#transactional($func)`在事务提交之前刷新 EntityManager（如果`$func`调用成功 - 你的情况）。

# jquery-ui - bxslider 轮播代码

> ID：13959494
> 
> 赞同：1
> 
> 时间：2012-12-19T19:15:03.833
> 
> 标签：jquery-ui, jquery, jquery-selectors, bxslider

我正在尝试从该站点实现滑块

[http://bxslider.com/](http://bxslider.com/)

我使用了他们所说的确切程序，但我的代码仍然无法正常工作，你们能告诉我如何修复它吗

我正在提供我的小提琴代码打击

[http://jsfiddle.net/v3efb/3/](http://jsfiddle.net/v3efb/3/)

[http://jsfiddle.net/v3efb/3/embedded/result/](http://jsfiddle.net/v3efb/3/embedded/result/)

在下面提供我的代码

```
<ul class="bxslider">
  <li><img src="http://maxcdn.webappers.com/img/2009/01/jquery-carousel.png" /></li>
  <li><img src="http://maxcdn.webappers.com/img/2009/01/jquery-carousel.png" /></li>
  <li><img src="http://maxcdn.webappers.com/img/2009/01/jquery-carousel.png" /></li>
  <li><img src="http://maxcdn.webappers.com/img/2009/01/jquery-carousel.png" /></li>
</ul>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<!-- bxSlider Javascript file -->
<script src="/js/jquery.bxslider.min.js"></script>
<!-- bxSlider CSS file -->
<link href="/lib/jquery.bxslider.css" rel="stylesheet" />

<script>

    $(document).ready(function(){
  $('.bxslider').bxSlider();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:22:30.543

[**jsFiddle 演示**](http://jsfiddle.net/v3efb/4/)

在您的标记中，您使用的是、和文件的***相对路径。***`jquery.min.js``bxslider.min.js``bxslider.css`

这意味着这些文件在其各自的子文件夹中本地可用。

但是，jsFiddle 不知道这些文件的完整 URL 路径，也就是***绝对路径***。

更改路径，使其成为完整的 URL。

**提示：**在 jsFiddle 中，您可以使用左侧的 Add Resources 面板`.js`将***文件***`.css`作为资产导入。

# javascript - 在可点击的文章中创建可点击的 div (HTML5)

> ID：13959497
> 
> 赞同：0
> 
> 时间：2012-12-19T19:15:11.330
> 
> 标签：javascript, css, html

我目前正在尝试将一些可点击的 div 放在文章标签 (HTML5) 中。现在，问题是我的文章也是可点击的，所以每当我尝试点击我的 div 时，它只是假设我点击的是文章。我的点击监听器是在 javascript 中设置的，这是我的代码：

HTML：

```
<article id='one'>
<div id='somediv' class='up'>Stuff</div>
</article> 
```

当然，这只是我尝试做的一个例子。

Javascript：

```
 articles = document.getElementsByTagName('article');
for (var i = 0; i < articles.length; i++) {
    articles[i].addEventListener('click',redirect,false);
}

var UpVote = document.querySelectorAll(".up");
for (var i = 0, length = nodeList.length; i < length; i++) {
    UpVote[i].addEventListener('click',UpVote,false);
}
function UpVote(){
    alert(this.id);
} 
```

正如您在此处看到的，我有 2 个循环为我的所有文章对象和 .up 类对象设置侦听器。我相信这些工作，所以做的功能。我没有发布我的重定向功能，因为我肯定它有效，我得到了我的重定向。

我的 CSS：

```
.up{
display:block;
padding-left:3px;
background:rgba(150,195,225,.4);
border-radius:5px;
-webkit-box-shadow:1px 1px 2px rgba(110,110,110,.1);
width:20px;
-webkit-transition: width .3s;
} 
```

这篇文章也被设置为一个块。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:03:11.790

研究事件冒泡和捕获。当您单击 div 时，您*也在*单击文章，因此重定向将首先触发，并可能阻止调用投票。

# javascript - 如何在向下滚动表格时保持表格标题固定

> ID：13959500
> 
> 赞同：1
> 
> 时间：2012-12-19T19:15:18.973
> 
> 标签：javascript, html, css

我在这里有一个 jsfiddle：http: [//jsfiddle.net/7vv9e/2/](http://jsfiddle.net/7vv9e/2/)

在这个小提琴中，当您打开它并看到小演示时，多次单击“添加问题”按钮，直到您看到表格旁边出现一个滚动条。

现在我想要发生的是当用户滚动时，标题在滚动时保持固定。我的问题是如何做到这一点。

下面是css代码，当表格达到一定高度时，它会显示表格的滚动条：

```
#details{
    height:500px;
    overflow:auto;
} 
```

即您在演示中看到的当前表不是最终表。将添加更多列。所以我需要一个解决方案，它可以适用于具有 2 列的表或具有 5 列的表，这与列的宽度无关，如果每列在向下滚动时可以保持相同的宽度而没有任何问题，那么这可以很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:46:53.047

看

[如何独立于“thead”滚动表格的“tbody”？](https://stackoverflow.com/questions/8321849/how-to-scroll-tables-tbody-independent-of-thead)

还有他的演示 [http://jsfiddle.net/nyCKE/2/](http://jsfiddle.net/nyCKE/2/)

他用

```
thead, tbody {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T06:09:58.237

也可以通过将表头保存在 div{overflow:none} 上并将表体保存在另一个 div 上来完成。您可以在滚动事件上保持标题表与内容表水平同步。使用 table-layout: fixed 使应用的列宽保持不变。另一件事是通过在内容表上获得滚动条后最后给出一个额外的 td 来获得与内容表相同的准确宽度来调整标题表。

# scala - 内容太大时出现 DefaultHttpResponse 错误

> ID：13959506
> 
> 赞同：1
> 
> 时间：2012-12-19T19:15:42.180
> 
> 标签：scala, netty

我正在使用 netty-3.5.11.Final.jar

我的引导程序看起来像：

```
val bootstrap = new ServerBootstrap(channelFactory)
bootstrap.getPipeline.addLast("httpDecoder", new HttpRequestDecoder())
bootstrap.getPipeline.addLast("aggregator", new HttpChunkAggregator(1024 * 1024 * 1024))
bootstrap.getPipeline.addLast("httpEncoder", new HttpResponseEncoder())
bootstrap.getPipeline.addLast("deflater", new HttpContentCompressor())
bootstrap.getPipeline.addLast("handler", new HttpRequestServerHandler())
bootstrap.setOption("child.tcpNoDelay", true)
bootstrap.setOption("child.keepAlive", true) 
```

我的`handlePost()`样子：

```
def handlePost(context: ChannelHandlerContext, request: HttpRequest) = {
  val response = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK)

  val body: Array[Byte] = ....

  response.setContent(ChannelBuffers.wrappedBuffer(body))
  context.getChannel.write(response)
  context.getChannel.close
} 
```

如果我尝试发送长度为 260000 字节的正文，那么它会正确发送。如果我发送一个更大的字节数组，那么我会得到以下异常：

```
java.nio.channels.ClosedChannelException
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:766)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:734)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:111)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:54)
at org.jboss.netty.channel.Channels.close(Channels.java:820)
at org.jboss.netty.channel.AbstractChannel.close(AbstractChannel.java:197)
at com.lendingblocks.services.ServiceServer$HttpRequestServerHandler.messageReceived(ServiceServer.scala:65)
at org.jboss.netty.handler.codec.http.HttpContentEncoder.messageReceived(HttpContentEncoder.java:81)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:192)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:448)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:538)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:21:47.130

netty 的重点是异步操作。

写入调用不会阻塞等待写入完成。写入和关闭正在相互竞争谁将首先完成。您需要注册未来的侦听器并在写入完成时关闭通道。

# python - 使用多个范围语句的 Python 列表初始化

> ID：13959510
> 
> 赞同：18
> 
> 时间：2012-12-19T19:15:59.390
> 
> 标签：python, list, initialization, range

我想要一个长列表，例如 [1,2,3,4,5,15,16,17,18,19]。为了初始化它，我尝试输入：

```
new_list = [range(1,6),range(15,20)] 
```

然而，这并没有做我想要的，返回：

```
[[1, 2, 3, 4, 5], [15, 16, 17, 18, 19]] 
```

当我做：

```
len(new_list) 
```

它返回 2，而不是我想要的 10 个元素（因为它在列表中创建了 2 个列表）。显然，在这个例子中，我可以只输入我想要的内容，但我正在尝试对一些奇怪的迭代列表执行此操作，例如：

```
new_list = [range(101,6284),8001,8003,8010,range(10000,12322)] 
```

需要一维列表而不是列表列表（或最好的名称）。我猜这真的很容易而且我很想念它，但是经过相当多的搜索后，我没有想出任何有用的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-19T19:18:47.167

在 Python 2.x 上试试这个：

```
 range(1,6) + range(15,20) 
```

或者，如果您使用的是 Python3.x，请尝试以下操作：

```
list(range(1,6)) + list(range(15,20)) 
```

对于处理中间元素，对于 Python 2.x：

```
range(101,6284) + [8001,8003,8010] + range(10000,12322) 
```

最后用于处理中间元素，对于 Python 3.x：

```
list(range(101,6284)) + [8001,8003,8010] + list(range(10000,12322)) 
```

这里要记住的关键方面是，在 Python 2.x 中`range`返回一个列表，而在 Python 3.x 中它返回一个可迭代对象（因此需要将其显式转换为列表）。对于将列表附加在一起，您可以使用`+`运算符。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T19:18:24.127

您可以使用[itertools.chain](http://docs.python.org/2.7/library/itertools.html#itertools.chain)来展平`range()`调用的输出。

```
import itertools
new_list = list(itertools.chain(xrange(1,6), xrange(15,20))) 
```

使用`xrange`（或仅`range()`用于 python3）获取可迭代并将它们链接在一起意味着只创建一个列表对象（不需要中间列表）。

如果您需要插入中间值，只需在链中包含一个列表/元组：

```
new_list = list(itertools.chain((-3,-1), 
                                xrange(1,6), 
                                tuple(7),  # make single element iterable
                                xrange(15,20))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T19:17:18.810

`range`返回一个列表开头，因此您需要将它们连接在一起`+`或使用`append()`or `extend()`。

```
new_list = range(1,6) + range(15,20) 
```

或者

```
new_list = range(101,6284)
mew_list.extend([8001,8003,8010])
mew_list.extend(range(10000,12322)) 
```

或者，您可以`itertools.chain()`按照 Shawn Chin 的回答中所示使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-13T17:47:39.820

只需`range`按如下方式解压缩值：

```
new_list = [*range(1,6), *range(15,20)]

print(new_list)
# [1, 2, 3, 4, 5, 15, 16, 17, 18, 19]

print(len(new_list))
# 10

print(type(new_list))
# <class 'list'> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T19:20:24.720

尝试这个：

```
from itertools import chain

new_list = [x for x in chain(range(1,6), range(15,20))]
print new_list 
```

像你想要的那样输出：

```
[1、2、3、4、5、15、16、17、18、19]

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T15:18:44.127

我想建议没有 + 的 ua 版本

```
import operator
a = list(range(1,6))
b = list(range(7,9))
print(operator.concat(a,b)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-13T17:42:42.723

只需按如下方式解压缩范围值：

```
>>> new_list = [*range(1,6),*range(15,20)]
>>> new_list
[1, 2, 3, 4, 5, 15, 16, 17, 18, 19]
>>> len(new_list)
10 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-13T19:20:20.717

您可以使用[itertools.chain](https://docs.python.org/3/library/itertools.html#module-itertools)函数和解包运算符 (*)

示例 1：

```
from itertools import chain

output = [*chain(range(1, 6), range(15, 20))] 
```

示例 2：

```
from itertools import chain

data = [range(1, 6), range(15, 20)]
output = [*chain(*data)] 
```

示例 3 使用[chain.fromiterable](https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)：

```
data = [range(1, 6), range(15, 20)]
output = [*chain.from_iterable(data)] 
```

输出

```
assert output == [1, 2, 3, 4, 5, 15, 16, 17, 18, 19] 
```

# macos - Java 控制面板在使用 libjvm.dylib 插件时意外退出 | macOS

> ID：13959513
> 
> 赞同：0
> 
> 时间：2012-12-19T19:16:03.893
> 
> 标签：macos, java, java-7

我从 oracle 页面 7u10 安装最新的 jdk。当我拥有 java6 时一切正常，但现在我无法运行 netbeans 或 java 首选项（来自系统首选项），因为我遇到错误：Java 控制面板在使用 libjvm.dylib 插件时意外退出。

我需要一些帮助，因为我在 google 中没有看到任何解决方案；/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:48:50.233

在 10.7.5 上运行这个补丁解决了这个问题： http: [//communities.vmware.com/docs/DOC-22830](http://communities.vmware.com/docs/DOC-22830) 虽然提到它只适用于 10.8

# asp.net-mvc - MapPageRoute 中断集成 MVC/WebForms 应用程序中的 ActionLinks

> ID：13959514
> 
> 赞同：2
> 
> 时间：2012-12-19T19:16:06.517
> 
> 标签：asp.net-mvc, webforms, actionlink

我有一个在 ASP.NET 4.0 中开发的现有 Web 应用程序。我想将 MVC 功能添加到应用程序中，因此我已根据 Scott Hanselman 的文章将 MVC 集成到应用程序中，[将 ASP.NET MVC 3 集成到现有的升级后的 ASP.NET 4 Web 窗体应用程序](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)中。因为 MVC 路由是贪婪的，所以我将以下代码添加到我的 Global.asa 中，以便一个空 URL 将转到我的 Default.aspx：

```
routes.MapPageRoute("WebFormsDefault", "", "~/Default.aspx"); 
```

现在的问题是 ActionLinks 和 RouteLinks 没有正确形成。如果我尝试使用以下方法创建操作链接：

```
@Html.ActionLink("Item List Page", "List", "Item") 
```

创建以下 URL：

```
"/SiteName/?action=List&controller=Item 
```

我从其他人那里找到了几个有同样问题的帖子，但没有一个有任何答案。这只是一个错误吗？一般来说，将 MVC 集成到 WebForms 应用程序中只是一个坏主意吗？或者有没有办法解决这个问题，以便在用户首次进入站点时显示我的 Default.aspx 页面并且 ActionLinks 和 RouteLinks 将正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:27:12.973

有点晚了，但我认为迟到总比没有好。我遇到了同样的问题，我通过将我的 MapPageRoute 代码和我的 MapRoute 代码分组来解决它，然后总是首先调用 MapRoute 代码。例子：

最初我的路由看起来像这样 -

```
routes.MapPageRoute("401", "401/", "~/Views/Error/401.aspx");
routes.MapPageRoute("404", "404/", "~/Views/Error/404.aspx");
routes.MapPageRoute("500", "500/", "~/Views/Error/500.aspx");
routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = "" }
            ); 
```

等等等等

这导致我的所有表单操作都指向格式如下的 url：/mysite/401?action=x&controller=y

显然那没有用。通过确保我始终首先设置所有 MVC 路由，问题自行解决。我最终制作了两种单独的方法，一种用于配置 MVC 路由，另一种用于配置 Webform 路由：

```
RouteConfig.RegisterMvcRoutes(RouteTable.Routes);  // contains only MapRoute
RouteConfig.RegisterWFRoutes(RouteTable.Routes);  // contains only MapPageRoute 
```

（这些调用像往常一样进入 Global.asax 文件并替换 RouteConfig.RegisterRoutes）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T17:38:55.103

我不建议将 webforms 与 MVC 混合，但我确实设法通过使用这个有用的帖子来完成这项工作：http: [//bartwullems.blogspot.com/2011/04/combining-aspnet-webforms-and-aspnet.html](http://bartwullems.blogspot.com/2011/04/combining-aspnet-webforms-and-aspnet.html)

我还必须非常小心路由的顺序，以便我最通用的路由位于我希望作为默认设置提供的 aspx 页面之后。

这是我完整的 RouteConfig：

```
public static void RegisterRoutes(RouteCollection    routes)
    {
routes.IgnoreRoute({resource}.axd/{*pathInfo}");

routes.MapRoute(
name: "SignUp",
url: "SignUp",
defaults: new { controller = "Profile", action = "SignUp", shortUrl = UrlParameter.Optional });

routes.MapRoute(
name: "Admin",
url: "Admin",
defaults: new { controller = "Admin", action = "Index", shortUrl = UrlParameter.Optional });

//used to get aspx page to render
routes.MapPageRoute("WebForms", "", "~/WebForms/Default.aspx", false, null, new RouteValueDictionary(new { controller = new IncomingRequestConstraint() }));

//this generic route must go last
routes.MapRoute(
"Default",
"{controller}/{action}/{id}",
new { controller = "Home", action = "Index", id = "" }
);
}

public class IncomingRequestConstraint : IRouteConstraint
{
public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
{
return routeDirection == RouteDirection.IncomingRequest;
}
} 
```

# ibm-mq - 无法使用 JMS 从 MQ 7 队列中提取应用程序属性

> ID：13959518
> 
> 赞同：1
> 
> 时间：2012-12-19T19:16:21.870
> 
> 标签：ibm-mq, websphere-6.1

我们正在使用`J2EE JMS API`浏览队列（`J2EE`jar dated `2/2/2010`from `C:\Program Files\IBM\SDP70\runtimes\base_v61\lib`）

```
Javax.jms.QueueBrowser queueBrowser = null;
queueBrowser =connection.getQueueSession().createBrowser(connection.getQueue());
Enumeration messageEnum = queueBrowser.getEnumeration();
int nMessages = 0;
while (messageEnum.hasMoreElements()){
   Object obj = messageEnum.nextElement();
   Message message = (Message) obj;
   messages.add(message);
   nMessages++;
} 
```

当我在 RAD 7.5 中尝试调试模式时（使用`j2ee.jar`日期`2/2/2010`来自`C:\Program Files\IBM\SDP70\runtimes\base_v61\lib`）），我没有看到使用 queueBrowser.getEnumeration() 从消息中提取应用程序属性；

我正在使用 Websphere`MQ 7.0.1.6`

你能解释一下我做错了什么吗？

* * *

详细说明一下，尽管 JMS 系统属性显示在新创建的 MQ 7 队列中，但我们没有在消息中看到 JMS 应用程序属性。重新创建错误以便理解的步骤

工作场景

1.  创建新的 JMS 消息
2.  使用 setStringProperty API 调用在此 JMS 消息中设置应用程序属性（例如应用程序属性 ERROR_CODE=ccs, ERROR_MSG="Unable to find meta data"）
3.  将消息丢弃到迁移队列 MQ 7（从 MQ 6 到 MQ 7 队列）
4.  进入 UI，通过 JMS QueueBrowser 浏览消息
5.  能够查看所有应用程序属性

不工作场景

1.  创建新的 JMS 消息
2.  使用 setStringProperty API 调用在此 JMS 消息中设置应用程序属性（例如应用程序属性 ERROR_CODE=ccs, ERROR_MSG="Unable to find meta data"）
3.  将消息丢弃到新创建的 MQ 7 队列
4.  进入 UI，通过 JMS QueueBrowser 浏览消息
5.  虽然我们可以看到 JMS 系统属性 (JMS_IBM*)，但无法看到所有应用程序属性

我们从新创建的队列中转储了消息。我们在消息转储中看到应用程序属性。但是当我们通过 api Enumeration messageEnum = queueBrowser.getEnumeration(); 提取消息时

枚举列表消息，它不会在新创建的队列的所有消息中显示应用程序属性。但是相同的 API 可以为迁移的队列提取具有应用程序属性的消息。

我们正在使用 Websphere Application Server v 6.1 和 Standalone MQ Server v7.0.1.6

你能解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:53:10.540

We used LIKE command to create a new MQ V7 queue using queue template of v6 to v7 migrated queues. Looks like some properties while directly creating V7 queue which prevent us not to show the application properties. Everything got working after creating queue like one of v6 to v7 migrated queues using LIKE command.

Thanks Rob and Shashi for your reply.

# ajax - 当没有使用 has_many 检查复选框时显示验证错误：通过 Rails 3 AJAX 表单中的关联，使用 client_side_validations gem

> ID：13959521
> 
> 赞同：1
> 
> 时间：2012-12-19T19:16:30.177
> 
> 标签：ajax, ruby-on-rails-3.2, client-side-validation

对于此表单中的所有其他验证，我收到了很棒的内联错误消息，但无论我尝试什么，在为这些复选框点击提交后，我似乎都无法显示任何消息。验证工作正常，因为在我选中一个框之前不会提交表单，但我希望看到用户的一些反馈。

我的模型（精简）：

```
class Resource < ActiveRecord::Base
  attr_accessible :objective_ids

  has_many :obsources, :dependent => :destroy
  has_many :objectives, :through => :obsources

  validates_presence_of :objective_ids, :message => "Must check at least one"
end

class Objective < ActiveRecord::Base
  has_many :obsources, :dependent => :destroy
  has_many :resources, :through => :obsources
end 
```

我认为的形式（精简）：

```
<%= simple_form_for @resource, remote: true, :validate => true, :html => { :id => "resource-form#{@resource.skill_id}" } do |f| %>
  <%= f.hidden_field :skill_id, :value => @resource.skill_id %>
  <%= f.association :objectives, :label => "Objectives Targeted (at least 1)", :collection => Skill.find("#{@resource.skill_id}").objectives, :as => :check_boxes, :label_method => lambda { |objective| "#{objective.content}" } %>
  <%= f.submit %>
<% end %> 
```

想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:20:16.530

而且......我想通了 - 有点。我仍然无法让 client_side_validations 为我的复选框抛出错误，但是当我尝试通过让我的控制器呈现相同的 create.js.erb 来提交表单时，无论它是否可以成功保存，我都会出现错误，然后在其中显示错误消息，如下所示：

```
<% if @resource.errors.any? -%> 
  $('#objective-errors<%= @resource.skill_id %>').empty();
  $('#objective-errors<%= @resource.skill_id %>').prepend('<%= j render("errors") %>');
<% else %>
  // Whatever you want to happen on successful save
<% end %> 
```

我还在复选框之后添加了一个带有目标错误 id 的空范围，以便错误显示为内联，就像所有其他验证错误一样。这有点混乱，但碰巧可以工作，因为 client_side_validations 确保在尝试保存之前验证其他所有内容，因此在保存不成功后返回的唯一错误恰好是我的目标。

所以在我想添加另一组复选框之前，这很好用！（尽管我曾经这样做过，过滤消息以显示在适当的复选框列表旁边应该不会太难。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-14T21:32:56.630

对于它的价值（4.5 年后），我为此找到了一个小技巧。就我而言，该复选框是用户必须接受才能继续的免责声明。由于选中和取消选中复选框实际上不会更改值，并且客户端验证库使用输入值，我只是添加了模型级验证并更改了 jQuery 中的输入值，这在以下方面起到了作用触发客户端验证库。

在我的模型中，我添加了：

```
validates :field, inclusion: { in: [ true, 'true' ] } 
```

然后，在 JS 上查看：

```
// For active toggling of checkbox
$('input#reference_finalization_referee_available').click( function() {
    if($(this).is(':checked')){
        $(this).val('true')
    } else {
        $(this).val('false')
    }
});

// On page load
if ($('input#reference_finalization_referee_available').is(':checked')) {
    $(this).val('true')
} else {
    $(this).val('false')
} 
```

有点黑客，但确实有效。

# sql - 将输出行插入表的方法？

> ID：13959523
> 
> 赞同：0
> 
> 时间：2012-12-19T19:16:35.230
> 
> 标签：sql, insert

我只是想知道是否*有**一种*方法*可以*根据*以前* 的. 我不知道我的解释是否正确，所以让我试着告诉你***`query`***

 ***下面是一个简单的*外连接*，它显示了`EMPHIREINFO`表中缺少的内容：

```
Select b.empno, b.empstate, c.startdt, c.enddt, c.cntrlgth
From EMPADDRESS b Left Outer Join EMPHIREINFO c
On b.empno = c.empno
Order By startdt 
```

输出：

```
EMPNO   EMPSTATE    STARTDT     ENDDT       CNTRLGTH
9873    NY          20-MAY-11   20-NOV-11   6
7566    CA          15-OCT-11   15-OCT-12   12
7499    MN          31-OCT-11   30-APR-12   6
7369    NJ          15-JAN-12   15-JAN-13   12
5300    NY          11-AUG-12   11-AUG-13   12
7521    NJ          12-NOV-12   12-MAY-13   6
4600    NY          10-DEC-12   10-JUN-13   6
7902    CA          
7934    NY          
7900    MN 
```

所有的空白点都是`(null)`，我想你知道但还是想提一下。无论如何，我想知道是否有一种方法可以根据此输出将and from into*插入。*我知道我可以手动执行*Insert Statement*，但我正在考虑一种情况，即我不处理具有 10 行而是数千行的*表。*`EMPNO``EMPSTATE``EMPADDRESS``EMPHIREINFO`

 **在来这里之前我确实做了一些研究，但谷歌甚至在这个网站上搜索都让我两手空空。像往常一样，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:21:12.647

SQL 允许您使用表单插入到表中

```
insert into table1
select ... 
```

只要列号和类型对齐。如果没有，您可以指定插入列，例如

```
insert into table1 (col1, col5, col2)
select ... 
```

所以，对你来说（假设列类型对齐）：

```
insert into EMPHIREINFO 
Select b.empno, b.empstate, c.startdt, c.enddt, c.cntrlgth
From EMPADDRESS b Left Outer Join EMPHIREINFO c
On b.empno = c.empno
Order By startdt 
```

您可能需要指定列，例如，如果您有一个自动递增的 id 列（这很常见）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:21:24.313

```
INSERT destination_table (column1, column2,column3)
SELECT a.column1, a.column2, b.column3
FROM source_table_a AS a
INNER JOIN source_table_b AS b ON (a.key1 = b.key1) 
```

您可以将此 INSERT 语法与生成结果集的其他命令一起使用：

```
INSERT destination_table (column1, column2,column3)
EXEC usp_produce_some_output 
```*****

# python - django-haystack 教程中模型的哪些字段被索引？

> ID：13959525
> 
> 赞同：13
> 
> 时间：2012-12-19T19:16:43.380
> 
> 标签：python, django, django-haystack

我正在尝试了解[django-haystack 教程](http://django-haystack.readthedocs.org/en/latest/tutorial.html)，以便为我的应用程序添加搜索功能。不幸的是，在构建搜索索引时，我不太了解一些关键部分。

在本教程中，以下 django 模型作为示例：

```
class Note(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField()
    title = models.CharField(max_length=200)
    body = models.TextField() 
```

该`Note`模型的相应索引类是这样的：

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='user')
    pub_date = indexes.DateTimeField(model_attr='pub_date')

    def get_model(self):
        return Note 
```

最后但同样重要的是，我被要求创建一个如下所示的数据模板：

```
{{ object.title }}
{{ object.user.get_full_name }}
{{ object.body }} 
```

在阅读了整个教程之后，我仍然对现在被索引的内容感到困惑。据我了解，字段的内容`author`将`pub_date`用于创建索引。该字段`text`仅用于提供一些设置。并且数据模板指定了搜索结果稍后将如何显示，即使用模型的哪些字段显示在搜索结果中。

这是正确的还是我完全错了？在我看来，教程和文档在很多方面都非常模糊。非常感谢您提前。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T20:04:01.220

你是对的，教程似乎有点模糊，但这是我的理解。对于`Note`模型的每个实例，Haystack 使用该实例呈现数据模板并索引呈现的模板。呈现的模板是实例的“文档”。该教程说，“这允许我们使用数据模板（而不是容易出错的连接）来构建搜索引擎将在搜索中使用的文档。” 因此，如果您只希望该`title`字段可搜索，则只需包含`{{ object.title }}`在数据模板中。

因此模型中的其他字段`NoteIndex`用于过滤搜索查询结果。如果您的索引模型看起来像这样：

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
  text = indexes.CharField(document=True, use_template=True) 
```

您将无法发出“给我所有*去年发布的在*`foo`文档文本中出现的注释”的搜索查询。如果您`pub_date`在您的字段中包含一个字段`NoteIndex`（就像他们在教程中所做的那样），那么您可以进行如下查询：

```
recent_results = SearchQuerySet().filter(content='foo').order_by('-pub_date')[:5] 
```

它要求 5 个最近发布的包含单词`foo`. 我想，在不包含`pub_date`在`NoteIndex`模型中的情况下，您可以自己查询`content='foo'`然后过滤结果，但我想如果您在索引时告诉 Haystack 您可能想要过滤的字段，这是一个更有效的查询。

至于如何显示搜索结果，您可以使用不同的模板来指定。在教程中展示的最基本的 Haystack 用法中，用于显示搜索结果的模板位于 search/search.html：[http ://django-haystack.readthedocs.org/en/latest/tutorial.html#search-模板](http://django-haystack.readthedocs.org/en/latest/tutorial.html#search-template) 您可以遍历搜索结果并打印出`result.object`您想要的模型实例 ( ) 的任何字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:06:33.453

在你的类定义中，

```
class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='user')
    pub_date = indexes.DateTimeField(model_attr='pub_date') 
```

Haystack 将数据库的`user`属性索引存储为`author`，数据库字段的索引存储`pub_date`为`pub_date`index

该模板仅包含“可搜索”字段。例如，您可能希望在搜索索引中保存一些敏感数据，您可以通过不在模板中指定它来将其从搜索中隐藏。

`text`可以认为是自由文本搜索

# c# - 代码中的 Colgroup 标记，但在查看源代码或调试器工具中缺失

> ID：13959526
> 
> 赞同：2
> 
> 时间：2012-12-19T19:16:48.763
> 
> 标签：c#, html, html-table, colgroup

这有点与这个问题相反，[为什么萤火虫将 <tbody> 添加到 <table>？](https://stackoverflow.com/questions/1678494/why-does-firebug-add-tbody-to-table)并且可能最终得到相同的答案，但我想确认。

我的代码中有一个 colgroup，当我使用 Firebug 或 IE 调试工具时，它就消失了。请参阅下面的图片。

我的代码 ![该死的在那儿！！](../Images/c616f1faa97ad00a3b206ae169430fef.png)

Firebug 中的源代码 ![#$&% 去哪儿了！！](../Images/027f5b90c71dcad8a6d734fd201a5bc4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:32:24.790

以下问题[表标题在 runat=server 时不显示](https://stackoverflow.com/questions/10495152/table-caption-does-not-show-when-it-is-runat-server)说明

> 不支持复杂的表模型。您不能拥有带有嵌套标题、col、colgroup、tbody、thead 或 tfoot 元素的 HtmlTable 控件。这些元素会在没有警告的情况下被删除，并且不会出现在输出 HTML 中。[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable%28v=vs.100%29.aspx)

当我创建[以下 HTML](http://jsfiddle.net/Aw889/2/)

```
<table border="1">
  <colgroup>    
    <col span="2" style="background-color:orange"></col>
  </colgroup>
  <tr>
    <td>column 1</td>
    <td>column 2</td>
    <td>column 3</td>
  </tr>
</table> 
```

标签`colgroup/col`还在

我最好的猜测是，由于您的表标记与 runat="server" 一起使用，因此 C# 解析器必须将其删除。您可以通过查看发送到客户端的实际 HTML 源代码来证明这一点，即使用“查看源代码”而不是查看生成的 DOM。

我无法忍受这种混合使用服务器和客户端代码为我编写 HTML 的原因之一......

# c# - 如何查询带有问题及其答案的部分？

> ID：13959535
> 
> 赞同：1
> 
> 时间：2012-12-19T19:17:28.010
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在创建一个问卷屏幕，我需要显示带有问题的部分以及用户的回答。这是我的模型：

```
** Section *****
 public int SectionID { get; set; }
 public string SectionText { get; set; }

** Question ****
 public int QuestionID { get; set; }
 public int SectionID { get; set; }
 public string QuestionText { get; set; }
 public bool Required { get; set; }
 public int DisplayOrder { get; set; }

** Response ****
 public int ResponseID { get; set; }
 public int UserID { get; set; }
 public int QuestionID { get; set; }
 public string AnswerValue { get; set; }
 public virtual Question Question { get; set; } 
```

我如何通过 LINQ 或其他方法来显示以下内容：

```
Section1: User Info
        Question 1\. Name:  Bob Smith
        Question 2\. Phone: 999-999-9999

Section2: User Tasks
         Question 1\. Role: Engineer
         Question 2\. Location: Baltimore 
```

我尝试了以下方法（deos 不起作用）：

```
var sections = from b in db.Sections.Include(s => s.Questions.Select(q => q.Responses.Where(r => r.userId == 1))
                            orderby b.SectionOrder
                            select b; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:13:26.437

```
int userId = 1;
var query = from s in db.Sections
            join r in db.Responses.Where(x => x.UserID == userId)
                   on s.SectionID equals r.Question.SectionID into g
            select new SectionModel
            {
                ID = s.SectionID,
                Name = s.SectionText,
                Results = from x in g
                          orderby x.Question.DisplayOrder
                          select new QuestionResultModel
                          {
                              Index = x.Question.DisplayOrder,
                              Question = x.Question.QuestionText,
                              Answer = x.AnswerValue
                          }
            };

  return View(query.ToList()); 
```

*ViewModel更新*示例：

```
public class SectionModel
{
    public int ID { get; set; }
    public string Name { get; set; }
    public IEnumerable<QuestionResultModel> Results { get; set; }
}

public class QuestionResultModel
{
    public int Index { get; set; }
    public string Question { get; set; }
    public string Answer { get; set; }
} 
```

显示：

```
@model IEnumerable<YourApplication.Models.SectionModel>

@foreach (var s in Model)
{
    <div>Section @s.ID : @s.Name</div>

    foreach (var r in s.Results)
    {
        <div>Question @r.Index. @r.Question : @r.Answer</div>    
    }
} 
```

# javascript - 为什么这个 document.ready 没有按时触发

> ID：13959541
> 
> 赞同：2
> 
> 时间：2012-12-19T19:17:47.000
> 
> 标签：javascript, html, image, document-ready

> **可能重复：**
> [window.onload vs document.ready jquery](https://stackoverflow.com/questions/10778070/window-onload-vs-document-ready-jquery)

我遇到了这个问题：我在页面上有一张不是那么大的图片。我有一个 js 函数，它根据内容的高度和窗口的大小动态设置左侧边栏的高度。所以如果我调整页面大小，侧边栏也会动态调整大小。但是现在，侧边栏的高度设置得很早，最终设置不正确。该设置将发生在 ```document.ready`` 函数中，该函数应该在所有 DOM 准备好（包括图像）后触发，对吗？

这是我的页面，请在 chrome 中打开它，您会更清楚地看到问题。 [http://www.stahlbaron.de/standort/](http://www.stahlbaron.de/standort/)

这是我的 js 函数，它动态设置侧边栏。

```
<script type="text/javascript">
   var calculateSize = function () {
   var winh = document.body.clientHeight;
   var footer = document.getElementById('footer').offsetHeight;
   document.getElementById('sidebar').style.height = winh - 5/2*footer + 'px';
   document.getElementById('sidebar').style.marginBottom = footer + 'px';
}
$(document).ready(function(){
   calculateSize();
   $(window).resize(calculateSize);
}); 
```

感谢您的意见和时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:18:49.963

你应该陷进去`$(window).on('load', ...)`而不是`$(document).ready`.

前者等待图像（和所有其他内容）加载，而后者只等待表示 HTML 源中元素的 DOM 树被创建。

由于您希望在调整大小时调用相同的函数，因此可以组合事件注册：

```
$(window).on('load resize', calculateSize); 
```

# wpf - 如何使用 Bindings 获取 DateTime 值？(WPF-MVVM)

> ID：13959543
> 
> 赞同：5
> 
> 时间：2012-12-19T19:17:53.847
> 
> 标签：wpf, datetime, mvvm, binding

我想要这样的东西：

```
<DatePicker SelectedDate="{Binding StartDate}" /> 
```

对此有任何控制或简单的解决方案吗？（我使用 MVVM。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T19:55:56.330

在这种情况下，您必须`StartDate`在 ViewModel 中只有属性，它才能工作。

当你在 DatePicker 中更改日期时，它会自动反映在 ViewModel 类的属性 StartDate 中。

简单视图模型：

```
class MainViewModel : INotifyPropertyChanged
    {
        private DateTime _startDate = DateTime.Now;
        public DateTime StartDate
        {
            get { return _startDate; }
            set { _startDate = value; OnPropertyChanged("StartDate");  }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(name));
        }
    } 
```

简单视图：

```
<Window x:Class="SimpleBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" 
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>    
        <DatePicker SelectedDate="{Binding StartDate}" />        
    </StackPanel>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();         
            this.DataContext = new MainViewModel();
        }        
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:20:31.177

请参阅[WPF 工具包](http://wpftoolkit.codeplex.com/)（注意：在撰写本文时 CodePlex 已关闭/速度很慢）。

# model - 如何增量使用z3和没有命题价值的模型？

> ID：13959545
> 
> 赞同：0
> 
> 时间：2012-12-19T19:17:57.010
> 
> 标签：model, z3

您能告诉我如何逐步使用求解器 Z3 吗？此外，当我使用 时`v.name()`，如何获得没有命题价值的模型？比如，调用程序后`cout<<v.name()<<m.get_const_interp(v);`，我们可以得到模型 `x = 3, p = true, y = 4`，因为我不需要`p = true`，我可以从模型集中删除吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T20:43:07.477

我添加了新的 C++ 示例，演示如何使用 Z3 C++ API 进行增量求解。新示例已在[网上](http://z3.codeplex.com/SourceControl/changeset/view/7b1fac11e647#examples/c++/example.cpp)提供。我复制了帖子末尾的示例。

关于第二个问题，在 Z3 中，模型本质上是只读对象。您可以简单地忽略您不关心的值。您还可以为隐藏不需要的值的模型对象编写自己的包装器。

```
void incremental_example1() {
    std::cout << "incremental example1\n";
    context c;
    expr x = c.int_const("x");
    solver s(c);
    s.add(x > 0);
    std::cout << s.check() << "\n";
    // We can add more formulas to the solver
    s.add(x < 0);
    // and, invoke s.check() again...
    std::cout << s.check() << "\n";
}

void incremental_example2() {
    // In this example, we show how push() and pop() can be used
    // to remove formulas added to the solver.
    std::cout << "incremental example2\n";
    context c;
    expr x = c.int_const("x");
    solver s(c);
    s.add(x > 0);
    std::cout << s.check() << "\n";
    // push() creates a backtracking point (aka a snapshot).
    s.push();
    // We can add more formulas to the solver
    s.add(x < 0);
    // and, invoke s.check() again...
    std::cout << s.check() << "\n";
    // pop() will remove all formulas added between this pop() and the matching push()
    s.pop();
    // The context is satisfiable again
    std::cout << s.check() << "\n";
    // and contains only x > 0
    std::cout << s << "\n";
}

void incremental_example3() {
    // In this example, we show how to use assumptions to "remove" 
    // formulas added to a solver. Actually, we disable them.
    std::cout << "incremental example3\n";
    context c;
    expr x = c.int_const("x");
    solver s(c);
    s.add(x > 0);
    std::cout << s.check() << "\n";
    // Now, suppose we want to add x < 0 to the solver, but we also want
    // to be able to disable it later.
    // To do that, we create an auxiliary Boolean variable
    expr b = c.bool_const("b");
    // and, assert (b implies x < 0)
    s.add(implies(b, x < 0));
    // Now, we check whether s is satisfiable under the assumption "b" is true.
    expr_vector a1(c);
    a1.push_back(b);
    std::cout << s.check(a1) << "\n";
    // To "disable" (x > 0), we may just ask with the assumption "not b" or not provide any assumption.
    std::cout << s.check() << "\n";
    expr_vector a2(c);
    a2.push_back(!b);
    std::cout << s.check(a2) << "\n";
} 
```

# extjs - sencha touch 2 store 代理api读取响应

> ID：13959550
> 
> 赞同：0
> 
> 时间：2012-12-19T19:18:23.987
> 
> 标签：extjs, proxy, touch, store

我有一个配置了代理以更新我的数据库的商店。

代理：{类型：“ajax”，api：{创建：MySite.app.BaseURL + 'Member.php?action=create'，读取：MySite.app.BaseURL + 'Member.php'，更新：MySite.app。 BaseURL + 'Member.php?action=update'，销毁：MySite.app.BaseURL + 'Member.php?action=delete' }，

这一切都很好，但我真正想要的是能够读取响应，以便向用户报告更新的成功或失败。

例如，当更新成功时，响应中会返回下面的 json，

{“成功”：真，“消息”：“更新”}

如果不成功，则返回以下内容，

{“成功”：假，“消息”：“发生了可怕的事情”}

我尝试如下向商店添加一个侦听器，但这似乎没有得到响应。

```
 listeners: {

        success: function(response) {

                console.log(response);

                var data = Ext.JSON.decode(response.responseText.trim());

                console.log(data);  

                if(data.success == 'true') {
                console.log('success'); 
                }
        }
    }, 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:56:23.873

商店不会触发成功事件。这必须在每个操作中使用成功、失败或回调函数进行配置。

例如，当您执行同步时，您可以执行以下操作：

```
myStore.sync({
    success: function(batch, options) {
       console.log(response);
    }
}); 
```

鉴于商店与 bacths 合作，必须查看批处理字段才能知道它是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T03:20:22.367

成功时，商店将触发“写入”事件。如果出现故障，代理将触发“异常”事件。这个“异常”事件应该冒泡到它的父级（商店），所以商店中的听众应该是“写”和“异常”。您可以查找这些事件的参数。对于“写”事件，参数应该是存储本身和操作。该操作应该包含进行日志记录所需的所有信息或任何您想要的信息。

# php - MySQL 是否足够快以每次都从数据库中读取数据，或者我应该缓存结果？

> ID：13959558
> 
> 赞同：3
> 
> 时间：2012-12-19T19:18:52.097
> 
> 标签：php, javascript, mysql

我正处于为学校构建 Web 应用程序的计划阶段。当多人访问 MySQL 时，我担心它的速度和效率。该应用程序将允许教师 CRUD 学生记录。在创建/更新记录时缓存结果是否更好，`json/xml`以便应用程序可以快速将其显示给用户（使用 javascript）？或者 MySQL 是否足够快以处理相同数据的更新和查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:21:43.953

我有一个程序可以做到这一点（加上更多）。使用数据库，它们是为这些查询而设计的。目前，我的并发用户不到 100 个，有几千名学生，并且没有延迟问题。

使用数据库更好、更快、更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:29:09.843

JSON 和 XML 用于不同平台/软件之间的数据交换。就像 PHP 和 Java 之间或 twitter 和 C 之间一样。当您没有定义任何协议并且使用 xml、json、yml 等通用格式时，这很好。但是，如果您定义了一个协议（在 mysql 和 php 之间），请使用它。那会快得多。除了作为数据库，mysql 可以执行许多其他额外的数据操作操作，这些操作是纯 xml 或 json 或 yml 无法实现的。所以用mysql。

> mysql 是否足够快以处理大量将检索数据以显示的查询？

它要快得多。我怀疑你是否会面对它的缓慢。我见过许多设备（不是人类）同时操作 mysql。它产生巨大的负荷。而 mysql 仍在处理这些数据。

# jquery - Coldfusion cfajaxproxy 回调处理程序调用了太多次

> ID：13959566
> 
> 赞同：3
> 
> 时间：2012-12-19T19:19:31.350
> 
> 标签：jquery, ajax, coldfusion, cfajaxproxy

我是使用 cfajaxproxy 的新手，我试图选择多个复选框，然后遍历所有选中的复选框，并使用 cfajaxproxy 和 jQuery 将结果保存在数据库中。

标记是通过循环查询生成的，但这里有一个给我带来问题的区域示例：

```
<span id="1569_2627_text">I certify that the employee has been trained in the use of the following 
equipment (please check all that apply):</span><br />

<input type="hidden" name="2627_max_length" id="2627_max_length" value="">
<input type="hidden" name="2627_min_value" id="2627_min_value" value="">
<input type="hidden" name="2627_max_value" id="2627_max_value" value="">
<input type="hidden" name="2627_regex_format" id="2627_regex_format" value="">
<input type="hidden" name="2627_system_type" id="2627_system_type" value="">
<input type="hidden" name="2627_app_type_version" id="2627_app_type_version" value="1569">
<input type="hidden" name="2627_question_type" id="2627_question_type" value="CM">

<label>
    <input class="questionChoice" type="checkbox" name="2627" 
    value="8509" data-app_type_version="1569">
        <span>Face Shield<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627" 
    value="8510" data-app_type_version="1569">
        <span>Neoprene Gloves<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627"
    value="8511" data-app_type_version="1569">
        <span>Apron<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627"
    value="8512" data-app_type_version="1569">
        <span>Boots<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627"
    value="8513" data-app_type_version="1569">
        <span>Wizard Glove<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627"
    value="8514" data-app_type_version="1569">
        <span>Insulated Mitt<span>
</label><br />

<label>
    <input class="questionChoice" type="checkbox" name="2627"
    value="8515" data-app_type_version="1569">
        <span>Insulated Glove<span>
</label><br />

<button class="add_answer" value="2627" data-app_type_version="1569" disabled>Add answer</button> 
```

这是我的 cfajax 代理标签：

```
<cfajaxproxy cfc="#APPLICATION.cfMapping#.Agency.Agency" 
jsclassname="agency_object"> 
```

这是它应该在每个复选框上运行的函数：

```
function saveResponses(question_no, answerValue){

  var myagOBJ = new agency_object();
  myagOBJ.setHTTPMethod('POST');
  myagOBJ.setCallbackHandler(function(result) {
    numOfCalls++;
    alert(result+ ", call number: "+ numOfCalls);   
  });   
  myagOBJ.setErrorHandler(null);

  myagOBJ.store_prepopulated_response(
     agency_id = #SESSION.agency_object.get_id()#,
     jQuery("select##site").val(),
     question_no,
     answerValue
  );
} 
```

这是循环通过每个复选框的 jQuery 代码：

```
$("div##" + div + " [name=" + question_no + "]:checked").each(function() {
    answerText = $(this).next().text();
    answerValue = $(this).val();
    identifier = question_no + "_" + answerValue;
    if(answers["q_" + identifier] ===  undefined) {
    formAppend();
    answers["q_" + identifier] = answerValue;
    alert("From Checkbox");
    saveResponses(question_no, answerValue);
    $("div##saved_answers table").append(
        "<tr id=\"" + identifier + "\"><td><strong>" + formName + 
        "</strong><br>" + questionText + "</td><td>" + answerText + 
        "<br><button data-app_type_version=\"" + div + 
        "\"class=\"remove\" value=\"" + identifier + 
        "\">Remove</button></td></tr>"
    );
    }
}); 
```

它正在调用的 cfc 的方法是：

```
<cffunction name="store_prepopulated_response" access="remote" returntype="string" verifyclient="true">
<cfargument name="agency_id" type="numeric" required="true">
<cfargument name="site_id" type="numeric" required="true">
<cfargument name="question_no" type="numeric" required="true">
<cfargument name="response" type="string" required="true">

<cfreturn "Agency id: #agency_id#, Site ID: #site_id#, Question No: #question_no#, Resonse: #response#">
</cffunction> 
```

我仍然只是在测试东西以确保它可以正常工作，因此除了返回测试结果之外，许多功能实际上都在做任何事情。

当我运行这段代码时，它调用 cfc 并返回结果，但是它调用它的次数太多了。

例如，如果我选中三个框，它将调用 cfc 方法 7 次，如果我选中两个框，它将调用 cfc 方法 5 次。我检查了 cfc 方法被调用 19 次的所有 7 个框。

我的第一个想法可能是 cfc 被调用了正确的次数，但是回调处理程序被调用了很多，因为每个实例都会在返回结果时调用它的响应处理程序，所以我创建了机构对象的全局实例并且只是每次都调用该方法，但是我得到了相同的结果。

有谁知道为什么会发生这种情况？

*（编辑）我只是在实际 cfc 中添加了一个计数以及调用计数，它实际上调用了 cfc 方法太多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:35:54.090

> “因为回调处理程序不知道它应该处理哪个特定响应，所以它们都处理所有响应”

这就是回调处理程序的工作方式。他们应该处理所有的响应。问题是您正在创建多个回调处理程序，它们都做同样的事情；并且每个响应都被发送到每个处理程序。

通过`saveResponses`使用 JavaScript**匿名函数**（`function(){...}`作为方法参数传递）在函数中设置处理程序，您将为该类附加额外的回调处理程序。如果您为每个请求创建和销毁对象，这可能是有道理的，但正如您在帖子评论中所讨论的那样，您最好创建一个实例。使用这种方法，您也应该在此函数之外设置回调处理程序。

为了说明发生了什么，让我们看看当您选中 3 个框并运行时会发生什么`saveResponses`：

```
saveResponses(...){

  //...

  myagOBJ.setCallbackHandler(function(result) {
    numOfCalls++;
    alert(result+ ", call number: "+ numOfCalls);   
  });

  //...

} 
```

处理程序的附加解释了 3 个复选框 -> 7 个调用。

*   第一次调用它时，您有 1 个处理程序和 1 个结果。
*   第二次调用它时，您添加了一个处理程序（2 个处理程序），因此您的 1 结果被处理了两次。
*   第三次调用它时，添加了第三个处理程序，因此 1 个结果处理了 3 次。

`saveResponse`因为方法被多次调用`.each()`；它快速循环遍历 jQuery 选择器返回的每个项目，为每个项目运行一次 each-handler 函数。

加起来最多只有 6 个调用，所以仍然有问题，但是您可以看到这将如何迅速成为一个大问题。第 7 个可能是因为 ajax 请求的异步性质。*真正*发生的事情可能更像是：

*   `saveResponses`叫
    1.  添加回调处理程序
    2.  发送ajax请求
*   `saveResponses`叫
    1.  添加回调处理程序
    2.  发送ajax请求
*   第一个请求的结果回来了。有 2 个处理程序，所以它被发送到两个处理程序。
*   *到目前为止看到了 2 个回调*
*   第二个请求的结果回来了。2 个处理程序，发送给两者。
*   *到目前为止看到 4 个回调*
*   `saveResponses`叫
    1.  添加回调处理程序
    2.  发送ajax请求
*   第三个请求的结果回来了。3 个处理程序，发送给所有 3 个处理程序。
*   *到目前为止看到了 7 个回调*

课程：在调用者之外声明/分配处理程序（靠近类实例化的地方最有意义）。

如果您真的想学习 JavaScript——而且你应该——选择一份**JavaScript: The Good Parts**。它很短，但写得非常好，使复杂的概念更容易理解。其中一些在你目前的技能水平上可能没有多大意义，但首先关注触手可及的东西（例如匿名函数），然后在你真正了解这些之后，转向更难的东西，比如模块。

# ruby-on-rails - 使用 Rails 将文本编码为 Windows 的 UTF-16LE

> ID：13959572
> 
> 赞同：0
> 
> 时间：2012-12-19T19:19:45.913
> 
> 标签：ruby-on-rails, character-encoding, utf-16le

我有一个 PLC 应用程序，它需要 UTF-16LE 的 Unicode 格式来支持重音字符。我构建文本并将其转换为：

`str = Iconv.conv("utf-16le", "utf-8", str)`

然后我用以下内容输出文件：

`send_data str, :filename => "sp_table.txt", :type => 'text/plain; charset=utf-16le; header=present;', :disposition => 'attachment'`

PLC 应用程序无法显示字符。如果我用 读取文件类型属性`file -I`，我会得到以下信息：

`sp_table.txt: application/octet-stream; charset=binary`

如果我在 Windows 的记事本中打开文件，它会正确显示。如果我通过记事本重新保存文件，选择 Unicode 作为编码，则`file -I`返回：

`sp_table.txt: text/plain; charset=utf-16le`

此外，通过记事本保存后，我能够正确显示 PLC 应用程序中的所有字符。

我应该在发送文件时指定不同的字符集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:24:22.127

记事本添加了 BOM，而 UTF-16LE 没有。我对 ruby​​ 语法有点不确定，但是是这样的：

```
str = Iconv.conv("utf-16le", "utf-8", "\ufeff" + str) 
```

或者

```
str = "\xFF\xFE" + Iconv.conv("utf-16le", "utf-8", str) 
```

或者

```
str = "\377\376" + Iconv.conv("utf-16le", "utf-8", str) 
```

基本上，这个想法是`0xFF 0xFE`在发送它们之前在开头添加字节（Little Endian UTF-16 的 BOM）。

# kendo-ui - Kendoui 网格、数据源和 Restful 服务

> ID：13959573
> 
> 赞同：2
> 
> 时间：2012-12-19T19:19:57.497
> 
> 标签：kendo-ui

**Q1**：我正在尝试将 kendoui 网格绑定到与 restful 服务对话的数据源（使用 servicestack）。一切正常，除了当我调用 PUT 并且其余服务发回持久的 poco 对象时，我收到一个奇怪的 javascript 错误，并且您无法访问数据源的成功方法。

错误是

```
Uncaught SyntaxError: Unexpected number kendo.all.min.js:9
extend.setter kendo.all.min.js:9
o.extend._set kendo.all.min.js:9
T.extend.accept kendo.all.min.js:9
o.extend._accept kendo.all.min.js:9
(anonymous function) kendo.all.min.js:9
n jquery.min.js:2
o.fireWith jquery.min.js:2
o.fire jquery.min.js:2
g.(anonymous function).call.c.success kendo.all.min.js:9
n jquery.min.js:2
o.fireWith jquery.min.js:2
w jquery.min.js:4
d 
```

数据源/网格配置看起来像

```
$(document).ready(function () {
    var crudServiceBaseUrl = "/api/configuration/databaseconnections";
    $("#grid").kendoGrid({
    dataSource: {
        type: "json",
        transport: {
        read: {
            url: crudServiceBaseUrl,
            dataType: "json"
        },
        update: {
            url: function (db) {
            console.log(db);
            return crudServiceBaseUrl + "/" + db.Id;
            },
            type: "PUT",
            success: function (result) {
            console.log(result);
            }
            //dataType: "json"
        },
        destroy: {
            url: function (db) {
            return crudServiceBaseUrl + "/" + db.Id;
            },
            type: "DELETE",
            //dataType: "json"
        },
        create: {
            url: function (db) {
            return crudServiceBaseUrl + "/" + db.Id;
            },
            type: "PUT",
            //dataType: "json"
        },
        },

        schema: {
        model: {
                id: "Id",
            fields: {
            Id: { type: "string" },
            ConnectionString: { type: "string" },
            DatabaseType: { type: "string" },
            ProfileConnection: { type: "string" },
            }
        }
        },
        pageSize: 10,
        serverPaging: false,
        serverFiltering: false,
        serverSorting: false,
        model: {
        id: "Id",
        fields: {
            ConnectionString: { editable: true },
            DatabaseType: { editable: false, nullable: false, validation: { required: true } },
            ProfileConnection: { editable: false, nullable: false, validation: { required: true } },
        }
        }

    },
    height: 250,
    filterable: true,
    sortable: true,
    pageable: true,
    reorderable: true,
    resizable: true,
    toolbar: ["create"],
    columns: [{
        field: "Id",
        filterable: false,
        width: 150,
    },
        {
        field: "ConnectionString",
        title: "Connection String",
        filterable: false,
        }, {
        field: "DatabaseType",
        title: "Type",
        width: 100
        },
        {
        field: "ProfileConnection",
        title: "Profile",
        width: 100
        },
    { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }
    ],
    editable: "popup"
    });
}); 
```

**Q2**：任何人都知道 kendoui 数据源与 crud rest 服务一起工作的想法或示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T14:58:12.847

**Q1**：正如您在评论中提到的那样，您发现了问题。（连接字符串中的“;”）

**Q2**：但是对于第二个问题，请下载并检查此示例代码（[将网格绑定到 Web ApiController](http://www.kendoui.com/code-library/mvc/grid/binding-to-a-web-apicontroller.aspx)）它可能会帮助您或其他人参考此处。

# snmp - PFsense 上的 SNMP 陷阱配置

> ID：13959576
> 
> 赞同：1
> 
> 时间：2012-12-19T19:20:06.920
> 
> 标签：snmp, pfsense

我想在 PFsense 上配置 SNMP 陷阱，为此我做了以下事情。

1.  启用 SNMP 恶魔（不这样做不允许启用陷阱） A. 给定轮询端口号 (161) B. 给定读取社区字符串。(mypfsense)
2.  启用 SNMP 陷阱 A. 给定陷阱服务器 IP。(192.168.0.100) B. 给定轮询端口号 (162) C. 给定读取社区字符串。(mypfsense)
3.  在 Windows 2008 服务器上，我安装了 Ireasoning MIB 浏览器。
4.  打开端口号 162 上的 Trap 接收器。

但是在这里我没有得到任何关于陷阱接收器的更新，所以我已经检查过了......

1.  使用推理陷阱发送器发送测试陷阱，我在陷阱接收器中得到陷阱。

我没有得到 PFSense 陷阱，所以在我得到之后

1.  在 server 2008 snmp 服务中添加功能，配置如下。A. services.msn > snmp 服务属性 > 安全选项卡 > 接受社区名称 -> 将社区“mypfsense”添加为只读。

然后在我重复步骤 4 和 5 之后，两者都按原样运行。

所以毕竟我没有得到 PFSense 的陷阱。

我请求您帮我配置它。

注意：我通过 MIB 浏览器检查了 2008 年服务器的轮询是否正常工作，它提供了 get next、walk、get bulk 等的输出……

谢谢并恭祝安康，

哈什特乔克西。

# java - 如何在没有 mvn jboss-as:deploy 的情况下测试从 eclipse 到 jboss as7 的 web 项目

> ID：13959578
> 
> 赞同：0
> 
> 时间：2012-12-19T19:20:07.930
> 
> 标签：java, eclipse, spring, jboss

我的公司正在改变开发环境，寻找一些关于如何在新环境中工作的技巧和技巧。

当前环境是 Eclipse 和 Tomcat。我们正在使用 Spring、Web Flow 和 MySQL 开发 Web 应用程序。

新环境将是 Eclipse、Jboss AS7 和 Maven。

**问题1：** 现在的问题是我们在本地工作站上运行tomcat的当前时间，我可以使用eclipse编写我的代码，然后只需单击“Run On Server”，eclipse将构建war文件并启动tomcat。

在新环境下，Eclipse 似乎无法启动和停止并直接部署到 Jboss AS，因此我们正在运行命令行： mvn jboss-as:deploy 有人知道更好的方法吗？

**问题 2：** 调试.. 有谁知道如何使用 eclipse 和 jboss as7 进行调试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:03:39.503

1) 你可以在 JBoss As 7 中使用“在服务器上运行”，就像使用 Tomcat 一样。只需在 Eclipse 中为 JBoss As 添加新服务器。与为 Tomcat 添加新服务器相比，一个不同之处在于，在新服务器定义期间，您还应该为 JBoss 创建新的运行时环境（如果您之前没有这样做过），但这非常简单和直观。互联网上有很多例子。

2) Debug 与 JBoss 一起工作也非常好。如果您从 Eclipse 启动服务器，那么您可以像以前在 Tomcat 中使用过的那样使用调试器。如果您在没有 Eclipse 的情况下从命令行运行服务器，则可以从 Eclipse 中使用远程调试（我记得 Dubug 为.. -> 远程 Java 应用程序，然后在那里指定项目、主机和端口）。

# jquery - 同位素折叠（元素重叠）

> ID：13959579
> 
> 赞同：8
> 
> 时间：2012-12-19T19:20:14.393
> 
> 标签：jquery, filter, jquery-isotope, overlap, fold

我一直在阅读堆栈溢出的解决方案，但找不到。

![在此处输入图像描述](../Images/3c988245121d89fcc231c88c0cb8bfc3.png) （*全尺寸图片位于[http://i.imgur.com/hrcDg.png](https://i.imgur.com/hrcDg.png)*）

当我加载页面时，它看起来像这样

这是网站（测试版）

[http://e-gimnazija.hostoi.com/test/site/index.html](http://e-gimnazija.hostoi.com/test/site/index.html)

如果你按下它展开的***全部***，也许我可以解决它，如果它在一开始就自动展开

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-19T23:48:33.463

问题是当你运行时`.isotope`图像还没有加载，所以插件无法计算它们的大小..

您有一些不同的选项可供选择

1.  加载图像后启动同位素..`$(window).load(function(){/*init plugin here*/})`
2.  使用***imagesLoaded 插件***：http: [//isotope.metafizzy.co/docs/help.html#imagesloaded_plugin](http://isotope.metafizzy.co/docs/help.html#imagesloaded_plugin)
3.  [`reLayout`](http://isotope.metafizzy.co/docs/methods.html#relayout)加载图像后调用`$(window).load(function(){$('#thumbs').isotope('reLayout');});`
4.  如果`li`元素是固定大小的，则通过 CSS 为它们提供尺寸，`isotope`并将它们拾取..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T19:56:12.310

我用jquery修复了它：

```
<script type='text/javascript' >
    $(window).load(function() {
        $.getScript('/js/jquery.isotope.min.js', function() { });
    });
</script> 
```

这会等待整个页面加载完毕，然后最后加载同位素脚本。下面，我有一个更完整的解决方案，使用“工作”通知和微调器，直到所有内容都加载完毕。微调器来自字体真棒图标......

```
<div class="container wrapper">
    <div class="inner_content">
        <div class='working' >
            <h2>working... <i class="icon-spinner icon-spin icon-large"></i></h2>
        </div>
    </div>
</div>

<script type='text/javascript' >
    $(window).load(function() {
        $.getScript('/js/jquery.isotope.min.js', function() {
            $('.working').fadeOut();
        });
    });
</script> 
```

您可以在以下位置查看我的工作示例： [http ://ericavhay.com/painting/portfolio](http://ericavhay.com/painting/portfolio)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-06T08:15:13.750

当我们使用

```
jQuery(window).load(function($){}); 
```

函数它抛出一个`Uncaught TypeError: $ is not a function`

而不是你可以使用：

```
jQuery(document).ready(function ($) {
setTimeout(function(){ 
        //Isotope Code place here 
     }, 3000);
}); 
```

它工作正常。

# jquery - 附加 HTML 时增加高度

> ID：13959581
> 
> 赞同：8
> 
> 时间：2012-12-19T19:20:17.710
> 
> 标签：jquery, css, cordova

我正在使用phonegap（构建）并且在div容器中添加可变数量的div时遇到问题，因为我希望容器相应地增加其高度，但事实并非如此。

我试过这个伎俩没有成功。我也尝试了不同的溢出和高度：自动组合也没有成功。

我现在正在动态增加容器高度，但老实说，我很确定必须有一种更优雅的方式来做到这一点（我的意思是，这个容器可能在其他容器 div 内，等等，我无法想象每次需要这种行为时，我都必须为它们中的每一个添加此代码）。

你们如何处理这种（我猜很常见）的情况？

**编辑：**

我根据丹尼尔的回答找到了解决方案。以下是我的处理方式：

我使用三个容器 div 和可变数量的子 div 列表：

*   “页面” div。包含：
    *   “内容” div。包含：
        *   “类别” div。包含：
            *   可变数量的子 div

（很抱歉，正确添加代码让我发疯，所以我将其作为图像包含在内）

![](../Images/f1c3f11b1a50500f3416c0cf61192c7b.png)

解释是：

*   我定义了一些变量来保持三个容器 div 的原始高度，因此稍后我可以根据包含的子 div 的数量为它们添加必要的附加高度。

*   我检查它们的值是否为空，所以我只在第一次给它们赋值，所以我不会在每次用户进入页面时都增加高度。

*   每个子 div 的高度为 40 像素，因此我将其添加到累积总高度增加的变量中。

最后我更新了容器的高度，我可以看到整个内容。

无论如何，我的疑问是：每次我必须使用动态高度时真的有必要这样做吗？
我很难认为没有其他方法可以让容器相应地增加它们的高度作为动态内容。

任何人都可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:25:52.670

正如您所描述的，您正在将 div 标签添加到另一个 div 标签，如下所示：

```
<div id="container">
     <div></div>
     <div></div>
     <div></div>
     test
</div> 
```

额外的 div 标签不会为#container 添加额外的高度。

如果这是你正在做的，你不会得到额外的高度。

如果你想在#container 中加载更多的高度，你可以使用许多不同的方法。

1.  使用 jQuery

    ```
    $("#container").css("height", "100px"); 
    ```

2.  使用 CSS

    ```
    #container {
       height: 100px;
    } 
    ```

如果要为 div#container 添加更多高度，可以执行以下操作。

```
$("#container").click(function() {
    var height = $("#container").height();
    height = height + 10;
    $("#container").css({"height": height+"px"});
    /* do more here if you want :) */
});

<div id="container" style="background-color: red;">
   test
</div> 
```

# database - 什么时候可以接受扁平 DB 设计

> ID：13959584
> 
> 赞同：1
> 
> 时间：2012-12-19T19:20:24.597
> 
> 标签：database, database-design, relational-database, database-schema

现在什么时候可以使用平面 DB 表设计。曾经？我的意思是什么时候可以放弃关系数据库设计的智慧并恢复一个不包含链接的平面表结构，添加额外的列来添加更多数据，什么时候我们应该创建另一个表的键来存储多行.

我正在研究一些想法，与产品管理团队讨论。当我最初问“为什么所有这些表本质上都是扁平的”这个问题时，我被告知“以读取为中心的数据库在扁平表结构中表现出更好的性能”。

我对这种解释感到困惑，b/ca 平面设计在未来的道路上存在许多障碍。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:27:40.437

“以读取为中心的数据库通过扁平表结构显示出更好的性能。” 该语句表示表不会/很少用于插入/更新/删除操作。在这种情况下，必须正确索引表以获得良好的性能。由于不会有任何类型的连接，因此表将在 where 子句中使用大量过滤器，因此正确使用索引非常重要。

这种场景通常用在数据仓库中。我们在设计仓库的时候，通常会去掉主键/外键，使用业务主键。这是因为仓库中有庞大的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:47:05.090

绝不。

无论您认为通过忽略关系数据库理论来解决什么问题，您只会产生更多棘手的问题。此外，您试图通过忽略关系理论来避免的原始问题无论如何都将始终基于误解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T08:57:10.870

简短的回答：几乎总是！您的网站几乎不需要传统数据库！

作为一名 IT 管理员工作了 20 年，从事过大大小小的项目，我可以自信地说，当今 90% 以上的网站根本不需要数据库。这只是大多数公司和人们可以不用的另一层混淆。

面对事实的人。那里的大多数网站一天都没有受到一次点击，所以当谈到今天（2019 年）的绝大多数网站时，谈论数据库性能是非常愚蠢的。

这意味着超过 90% 的这些站点可以并且应该切换到一些平面文件 CMS/CMR，例如 PageKit、Grav 或 Bludit（这是我个人最喜欢的，因为它采用简约的方法。它不屑一顾 flatDB 并使用普通文件夹来包含 HTML 文件中的文章.)

我从来没有弄清楚为什么像 WordPress 和 Joomla 这样的 CMS 领导者坚持通过强迫他们的用户使用数据库连接和配置来使他们的默认设置复杂化，这通常是网站出现故障的原因。当且仅当站点实际上需要某种类型的数据库时，例如如果它有许多用户帐户，那么数据库是有保证的。尽管如此，大多数网站只有一个完整的用户帐户。

很多时候，我们看到一些站点关闭，因为数据库引擎关闭或无法处理这么多的同时连接，而 Apache 或 NginX 网络服务器仍在运行。

不要只是盲目地跟随别人。是时候勇敢和领导了。

# gfortran - 为什么在传递 -static 标志时 mingw-w64 gfortran 无法静态链接库？

> ID：13959587
> 
> 赞同：4
> 
> 时间：2012-12-19T19:20:34.590
> 
> 标签：gfortran, mingw-w64, tdm-mingw

**免责声明：**我对我的特定编译问题相当深入，但对编译世界还是很陌生。

**背景：** 我正在使用 Windows 7、64 位机器。我正在尝试使用 mingw-w64 编译一个相当大的 fortran 程序。编译过程由 SCONS（类似或源自 gnu Make）控制。我已经使用 g95 和 mingw gfortran 通过 scons 成功编译了这个程序。我曾尝试使用 mingw-w64 的 tdm-gcc 和 'ruben' 构建，但结果相同但不令人满意。我将 -static 参数传递给编译器（gfortran.exe）。我尝试使用 gfortran 和 x86_64-w64-mingw32-gfortran 编译命令，结果相同。

**问题：** 当尝试编译我的程序的 64 位版本时，尽管将 -static 参数传递给 gfortran 编译器，但当我尝试运行构建的可执行文件时，它会出错，声称找不到各种 dll（libgfortran、libgcc、 libquadmath，一般来说）。如果我将这些库复制到工作目录，则构建的程序运行时不会出错并按预期执行。

**轶事总结：** mingw-w64 gfortran 似乎忽略了 -static 编译标志

如果我可以提供任何其他信息来帮助解决此问题，请告诉我。

谢谢，JTJ

# python - wxPython Dirdialog 总是返回相同的目录

> ID：13959597
> 
> 赞同：4
> 
> 时间：2012-12-19T19:21:23.907
> 
> 标签：python, wxpython

我开始学习 wxPython 来创建 GUI 应用程序，但我遇到了一些问题：当使用 wx.DirDialog 选择某个文件夹时，无论我选择什么文件夹，dlg.GetPath() 总是返回相同的文件夹，即就我而言：/home/loai

我的绑定功能如下，很简单：

```
def onButton(self,e):
    dlg = wx.DirDialog(self, "Choose a directory:")
    if dlg.ShowModal() == wx.ID_OK:
        print "You chose %s" % dlg.GetPath()
    dlg.Destroy() 
```

这总是打印：你选择了 /home/loai

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:38:08.040

您使用的是什么操作系统？哪个蟒蛇？哪个wxPython？这看起来很像我的一个[教程](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)中的代码，对我来说效果很好。我继续并实际上从该教程中编写了一个精简的可运行示例：

```
import os
import wx

########################################################################
class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY,
                          "File and Folder Dialogs Tutorial")
        panel = wx.Panel(self, wx.ID_ANY)
        self.currentDirectory = os.getcwd()

        dirDlgBtn = wx.Button(panel, label="Show DirDialog")
        dirDlgBtn.Bind(wx.EVT_BUTTON, self.onDir)

    #----------------------------------------------------------------------
    def onDir(self, event):
        """
        Show the DirDialog and print the user's choice to stdout
        """
        dlg = wx.DirDialog(self, "Choose a directory:",
                           style=wx.DD_DEFAULT_STYLE
                           #| wx.DD_DIR_MUST_EXIST
                           #| wx.DD_CHANGE_DIR
                           )
        if dlg.ShowModal() == wx.ID_OK:
            print "You chose %s" % dlg.GetPath()
        dlg.Destroy()

#----------------------------------------------------------------------
# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

我使用 Python 2.6.6 和 wxPython 2.8.12.1 在 Windows 7 上运行此代码。我选择了三个不同的目录，它打印了所有 3 个不同的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T10:27:10.230

我自己的代码和上面发布的代码也有同样的问题。但是，我发现有办法绕过它。当您使用 DirDialog 时，实际上不要导航到您要打开的目录。相反，只需突出显示要打开的目录并单击打开。

在带有 Python 2.7.3 和 wxPython 2.8.12.1（以及 2.9）的 Ubuntu 12.10 上，一直导航到一个目录并单击打开按钮只会给您您的主目录。向上导航一个目录，突出显示所需的目录，然后单击打开按钮会给出正确的结果。

我有另一台机器运行 ubuntu 11.10 和 Python 2.7.3，我不记得有这个问题。

显然，这种解决方法不是一个合适的解决方案，但这是我迄今为止所能想到的。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:45:07.877

大多数操作系统中的目录对话框使用起来很笨拙。在单击“确定”之前，您必须查看底部的那个小文本框并确保它已正确填充。我有很多用户对此有疑问。因此，也许您正在导航到您想要的文件夹，但您并没有通过单击组合来将您的选择放入文本框中。这可能不是你的问题，但我想我会提到它。否则，您的代码对我来说看起来不错。

祝你好运，

麦克风

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:41:32.287

# 试试这个：

dialog = wx.DirDialog(None, "导航到所需版本的桌面目录。", "~/", 0, (10, 10), wx.Size(400, 300)) dialog.CentreOnParent()

```
 # Update directory with path selected in dialog
    if dialog.ShowModal() == wx.ID_OK:
        self.dir_path = dialog.GetPath()
        self.updateDirectory() 
```

它对我有用：D

# mp3 - JLayer Mono Mp3 转 PCM 解码

> ID：13959599
> 
> 赞同：2
> 
> 时间：2012-12-19T19:21:29.367
> 
> 标签：mp3, decode, pcm

我目前正在使用 javalayer 1.1 进行 mp3 解码。

所以我想从我的 44100 Hz、16 位、Mp3 接收原始 PCM 数据。它与立体声 mp3 完美配合，但我对单声道 mp3 有奇怪的问题。

这里有一些代码。

```
InputStream data = c.getResources().openRawResource(resId);
Bitstream bitstream = new Bitstream(data);
Decoder decoder = new Decoder();
while(thereIsData) {
  Head frameHeader = bitstream.readFrame();
  SampleBuffer buffer = (SampleBuffer) decoder.decodeFrame(frameHeader, bitstream);
  short[] pcmBuffer = buffer.getBuffer();

  // Do some stuff with pcm (For example creating a wav file )

  bitstream.closeFrame();
} 
```

buffer.getChannelCount() == 1, buffer.getFrequency() == 41000

所以...问题是。如果我创建一个 44100 Hz、单声道、16 位 WaveFile 并将其放入 Audacity 以查看波形。声音周期性为 0，如：(200ms Sound)...(200ms NoSound)...(200ms Sound)...(200ms NoSound)

这也适用于写入 .wav 之前的 pcm 数据......（Yeahi syso 所有的东西）

所以有人可能会想，肯定有零帧之类的。在那里......所以我切断了所有只有0值的帧。这会导致 wav 文件中的零中断稍微短一些。对我来说意味着，必须有部分零帧。因此，我从 pcm 数据中删除了所有零值……尽管看起来很奇怪，但这确实有效。该文件听起来不错。

但这不能成为解决方案。我仍然不知道为什么会有这些错误的零值。我的mp3也需要静音。

我会很感激每一个解释提示。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T12:53:19.173

我让它工作，转换为字节 []，使用以下代码：

> > ```
> > ByteArrayOutputStream outStream = new ByteArrayOutputStream(1024);
> > int divider = 1;
> > if (SAMPLE_RATE < 44100) divider *= 2;
> > if (CHANNELS == 1) divider *= 2;
> > 
> > [...]
> > 
> > short[] pcmBuffer = buffer.getBuffer();    
> > for (int i=0; i<pcm.length/divider; i++) {
> >     outStream.write(pcm[i] & 0xff);
> >     outStream.write((pcm[i] >> 8 ) & 0xff);
> > } 
> > ```

关键是`divider`参数，即`1`立体声 44、`2`单声道 44 和`4`单声道 22。还没有尝试其他组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:40:09.863

嗯……我的回答来晚了……抱歉。

我完全解决了这个问题。

JLayer 做了一些奇怪的事情。如果输入 mp3 是 Stereo，则 pcmbuffer 中的值编码如下：leftchannel，rightchannel，leftchannel，......这就是它应该的样子。但如果输入 mp3 是 Mono，我会在 pcmbuffer 中获得相同数量的样本。但它不像：monochannel, 0, monochannel, 0 整个数据在pcmbuffer的前半部分，后半部分都是0。所以你只需要剪掉后半部分。

# python - 更新 ListProperty 时是否可以在 App Engine 上出现竞争条件？

> ID：13959606
> 
> 赞同：3
> 
> 时间：2012-12-19T19:22:04.050
> 
> 标签：python, google-app-engine, concurrency

假设我有一个具有type`User`属性的模型。在请求处理程序中，我正在扩展/附加到列表，并且我正在创建很多任务，其处理程序也将附加到列表中。是否有可能有竞争条件？`bands``StringListProperty``bands``taskqueue``bands`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T22:41:45.163

您可以使用[Transaction 中的 Tasks](https://developers.google.com/appengine/docs/python/taskqueue/overview#Tasks_within_Transactions)来确保您的任务仅在相应的 Datastore 事务已成功提交时才入队。

`transactional=True`在事务中添加任务时只需添加关键字 arg：

```
taskqueue.add(url='/path/to/my/worker', transactional=True) 
```

# iphone - iPad 1 应用程序卡在纵向旋转

> ID：13959610
> 
> 赞同：0
> 
> 时间：2012-12-19T19:22:21.710
> 
> 标签：iphone, objective-c, ipad

我通过 Testflight 发送了一个构建，并将支持的界面方向设置为横向。

即使自动锁定关闭，客户的 iPad 1 (iOS 5.1) 仍停留在纵向模式。

知道为什么会这样吗？

在我的 iPad 2 上运行良好。

# javascript - 红色文本框边框颜色

> ID：13959611
> 
> 赞同：1
> 
> 时间：2012-12-19T19:22:21.320
> 
> 标签：javascript, html

我有一个带有一个文本框的表单。我想检查文本框值何时为空，并在文本框为空时围绕文本框本身制作某种红色边框。

```
if (document.getElementById('pageh').value == "") {
    alert("One of the fields is empty.");
    return false;
} 
```

这是我的验证，但是如何添加红色边框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:23:52.673

```
var field = document.getElementById('pageh');

if (field.value == "") {
    document.getElementById('pageh').style.border = "solid 1px red";
    alert("One of the fields is empty.");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:23:58.863

也许是这样的？

```
var textbox = document.getElementById("pageh");
if (textbox.value.replace(/^\s+|\s+$/g, "") === "") {
    textbox.style.border = "1px solid #ff0000";
} 
```

注意，不要害怕`replace`部分：这只是[跨浏览器文本修剪](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)。

# c# - Lucene.net 的大索引内存不足

> ID：13959613
> 
> 赞同：3
> 
> 时间：2012-12-19T19:22:29.603
> 
> 标签：c#, performance, memory, lucene.net

我有一个包含 10 个字段的 Lucene.net 索引，其中一些已存储，有些已编入索引，包含 4.6 亿个文档。索引约为 250GB。我正在使用 Lucene.net 3.0.3，每次进行搜索时，我都会轻松消耗 2GB 以上的 RAM，这会导致我的 32 位应用程序出现内存不足异常。不幸的是，由于其他 32 位依赖项，我无法将应用程序作为 64 位进程运行。

据我所知，我正在遵循 Lucene 最佳实践：

*   一种批量写入文档的开放式索引编写器

*   不会在搜索中自行关闭和重新打开的共享阅读器

*   索引搜索器`termInfosIndexDivisor`设置为 4，这似乎没有什么区别。我什至尝试将其设置为 1000 之类的巨大值，但没有注意到任何内存变化。

*   不需要进行子搜索的字段不会被分析（即仅完整的字符串搜索）并且不需要从搜索中检索回来的字段不会被存储。

*   我对`StandardAnalyzer`索引和搜索都使用默认值。

*   如果我修剪数据并制作更小的索引，那么一切都会奏效。当我有一个大约 50GB 大小的索引时，我可以只用大约 600MB 的 RAM 来搜索它

但是，我确实在其中一个字段上应用了排序，但即使没有排序，任何搜索的内存使用量都是巨大的。我并不特别关心文档分数，更多的是文档存在于我的索引中，但我不确定以某种方式忽略分数计算是否有助于内存使用。

我最近从 Lucene.net 2.9.4 升级到 Lucene.net 3.0.3 认为这可能会有所帮助，但两个版本之间的内存使用情况看起来大致相同。

坦率地说，我不确定这个索引是否对于单台机器来说太大而无法进行搜索。我发现的大多数示例都在谈论大小为 20-30GB 或更小的索引，所以也许这是不可能的，但我至少想问一下。

如果有人对我可以做些什么来使它可用有任何建议，那就太好了。如果可能的话，我愿意为内存使用牺牲搜索速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:24:23.353

您可以以 64 位运行应用程序 - 为 lucene 部分创建一个单独的进程，使用远程处理与其（或 WCF）进行通信。完成的。标准方法。

您已经考虑将其拆分，所以见鬼，将其隔离并放在 64 位上。

# c++ - QGraphicsView 不会展开

> ID：13959615
> 
> 赞同：1
> 
> 时间：2012-12-19T19:22:44.500
> 
> 标签：c++, qt

我在让 QWidgets 根据需要扩展时遇到了极大的麻烦。这不是我第一次遇到这个问题，上次我通过破解一个大的 sizeHint() 来解决它。这是错误的方法，我真的很想学习正确的方法。

如果有人可以帮助我，将不胜感激。这是它的外观和我用代码编写的布局。如有必要，我可以提供代码。请帮助我学习布局。

**编辑**：第一个布局模型实际上可以正常工作。我正在附加另一个导致问题的布局模型。

![调整大小的示例](../Images/24d74e6f2cf765b9a24e786ee2913b6c.png)

* * *

![布局的模拟](../Images/a8cec3c4fddf3ab561487ba4e52554c5.png)

* * *

![打破扩张](../Images/18b66c266b924450c36bf2c61403d681.png)

* * *

代码。三班。

主窗口类：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    QWidget * w = new MainCentralWidget(this);
    setCentralWidget(w);
} 
```

MainCentralWidget 类：

```
MainCentralWidget::MainCentralWidget(QWidget *parent) :
    QWidget(parent)
{
    SetupLayout();
}

void MainCentralWidget::SetupLayout()
{
    QVBoxLayout * main_layout;
    QFormLayout * plugin_layout;

    //Start
    main_layout = new QVBoxLayout();

    //Setup the plugin chooser
    plugin_layout = new QFormLayout();
    QComboBox * plugins_box = new QComboBox();

    plugin_layout->addRow("Choose Plugin: ", plugins_box);

    QFrame* line = new QFrame();
    line->setFrameShape(QFrame::HLine);
    line->setFrameShadow(QFrame::Sunken);
    plugin_layout->addRow(line);

    main_layout->insertLayout(0, plugin_layout);

    main_layout->insertWidget(1, new SubWidget());

    //Finish
    setLayout(main_layout);

    setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
} 
```

子小部件类：

```
SubWidget::SubWidget(QWidget *parent) :
    QWidget(parent)
{
    setStyleSheet("QWidget { background: yellow }");

    setMaximumSize(10000,10000);
    setMinimumSize(100,100);
    setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
    SetupLayout();

    //setMaximumSize(10000,10000);
}

void SubWidget::SetupLayout()
{
    QHBoxLayout main_layout;

    main_layout.setAlignment(Qt::AlignTop | Qt::AlignLeft);
    main_layout.addWidget(&m_graphics_view);
    m_graphics_view.setMaximumSize(10000,100000);

    setLayout(&main_layout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:07:15.230

```
void SubWidget::SetupLayout()
{
    QHBoxLayout main_layout;

    main_layout.setAlignment(Qt::AlignTop | Qt::AlignLeft);
    main_layout.addWidget(&m_graphics_view);
    m_graphics_view.setMaximumSize(10000,100000);

    setLayout(&main_layout);
} 
```

你在完成`main_layout`后立即被销毁`SetupLayout`，因为它超出了范围。所以，实际上，你`SubWidget`没有任何布局。这就是小部件显示不正确的原因。

# ruby - Ruby 打印文本、印地语、梵语等语言的字符

> ID：13959616
> 
> 赞同：0
> 
> 时间：2012-12-19T19:22:50.823
> 
> 标签：ruby, hindi

我想用印地语/梵语打印文本/字符。有人可以指导我使用 Ruby 语言如何实现吗？是否有任何图书馆/宝石可用于实现这一目标？我尝试搜索此内容，但找不到所需的资源。基本上各种网站以印地语、古吉拉特语、梵语等语言显示其内容，但我猜渲染任务是由浏览器使用字体文件完成的。使用编程语言如何实现相同?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:25:25.130

这与服务器端语言无关 - 它与为您的数据使用正确的字符编码有关。UTF-8 是用于支持国际语言的最常用格式。印度大部分地区都被覆盖。浏览器完成所有工作，不需要添加字体（除非您对排版非常感兴趣）。

उदाहरण के लिये

见：[http ://www.unicode.org/standard/supported.html](http://www.unicode.org/standard/supported.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-29T13:55:54.220

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:28:15.410

您需要使用正确的编码，为了实现互操作性，它是 UTF-8。要在程序中使用 UTF-8，您需要在文件顶部添加以下注释：

```
#encoding: utf-8 
```

然后，您需要使用文本编辑器将印地语或其他语言的符号插入字符串中，Ruby 会很高兴地打印它们。

# facebook - 通过 API 将 website_url 应用程序属性设置为空白

> ID：13959617
> 
> 赞同：2
> 
> 时间：2012-12-19T19:23:15.897
> 
> 标签：facebook, api, facebook-graph-api

知道如何通过 API 将 website_url 应用程序属性设置为空吗？当我尝试发送一个空参数时，我得到“真”，但它不会更新属性。

卷曲“https://graph.facebook.com/myappid?website_url&access_token=applicationaccesstoken&method=post”

这是为了遵守有关仅画布游戏的最新政策。

**参考错误：** [https ://developers.facebook.com/bugs/140498756103463?browse=search_50d24fd418f5d6c41473620](https://developers.facebook.com/bugs/140498756103463?browse=search_50d24fd418f5d6c41473620)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:15:37.443

文档指出如果数组可编辑，则可以取消设置，我们可以尝试传递一个空数组，看看是否可以解决问题。

**创造**

> 要为应用设置属性，请使用与上表中相同的属性和格式向[https://graph.facebook.com/APP_ID?PROPERTY_1=PROPERTY_VALUE&PROPERTY_2=PROPERTY_VALUE2](https://graph.facebook.com/APP_ID?PROPERTY_1=PROPERTY_VALUE&PROPERTY_2=PROPERTY_VALUE2)发出带有应用访问令牌的 HTTP POST 。并非所有应用程序属性都可以通过 API 进行编辑，请参阅上表中的属性以指示是否可以编辑属性。
> 
> **可以通过传递一个空数组来取消设置数组属性。**

# objective-c - 尝试在 iOS 应用程序中登录网站，没有 JSON 响应

> ID：13959621
> 
> 赞同：0
> 
> 时间：2012-12-19T19:23:36.900
> 
> 标签：objective-c, cocoa-touch, ios5

我正在尝试使用以下代码登录网站并使用 JSON 获得响应：

```
@try {

    if([[txtUsername text] isEqualToString:@""] || [[txtPassword text] isEqualToString:@""] ) {
        [self alertStatus:@"Please enter both Username and Password" :@"Login Failed!"];
    } else {
        NSString *post =[[NSString alloc] initWithFormat:@"username=%@&password=%@",[txtUsername text],[txtPassword text]];
        NSLog(@"PostData: %@",post);

        NSURL *url=[NSURL URLWithString:@"https://yedion.afeka.ac.il/yedion/fireflyweb.aspx?prgname=login"];

        NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

        NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
        [request setURL:url];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];

        [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];

        NSError *error = [[NSError alloc] init];
        NSHTTPURLResponse *response = nil;
        NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        NSLog(@"Response code: %d", [response statusCode]);
        if ([response statusCode] >=200 && [response statusCode] <300)
        {
            NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
            NSLog(@"Response ==> %@", responseData);

            SBJsonParser *jsonParser = [SBJsonParser new];
            NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];
            NSLog(@"%@",jsonData);
            NSInteger success = [(NSNumber *) [jsonData objectForKey:@"success"] integerValue];
            NSLog(@"%d",success);
            if(success == 1)
            {
                NSLog(@"Login SUCCESS");
                [self alertStatus:@"Logged in Successfully." :@"Login Success!"];

            } else {

                NSString *error_msg = (NSString *) [jsonData objectForKey:@"error_message"];
                [self alertStatus:error_msg :@"Login Failed!"];
            }

        } else {
            if (error) NSLog(@"Error: %@", error);
            [self alertStatus:@"Connection Failed" :@"Login Failed!"];
        }
    }
}
@catch (NSException * e) {
    NSLog(@"Exception: %@", e);
    [self alertStatus:@"Login Failed." :@"Login Failed!"];
} 
```

在日志中我可以看到没有 JSON 响应，所以我不知道登录是否成功。有没有其他方法可以登录到这个网站并得到响应，不管它是否成功？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:23:55.003

该代码对我来说似乎没问题，但请检查 Web 服务并检查是否为 json 提供了正确的关键字，如果给 objectForKey 的键和您在 Web 服务中的键不同，您将永远不会得到 json 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T14:09:52.597

使用 Get 方法并尝试

```
[ request setHTTPMethod:@"GET" ]; 
```

# html - 根据浏览器窗口大小使 div 增长和缩小

> ID：13959624
> 
> 赞同：11
> 
> 时间：2012-12-19T19:23:39.937
> 
> 标签：html, css

我正在制作一个非常简单的 html 页面，并且想知道如何为我的页面做以下两件事：

1.  我有一个容器 div，想将容器 div 放在页面的中心。
2.  当我调整窗口大小时，容器 div 会增长和缩小。

我写了附加的代码，但容器总是贴在左边，当我调整窗口大小时它不会改变大小。

```
<title>Demo</title>
<head>This is a demo</head>
<style>
#nav
{
background-color: red;
float: left;
width: 200px;
position:relative;

}

#detail
{
background-color: green;
float : right;
width: 800px;
position:relative;
}

div.testDetail 
{
margin-top:10px;
margin-left:20px;
margin-right:20px;
margin-bottom:10px;
}

#container
{
width:1000px;
position:relative;
}
</style>

<hr>
<body>
<div id="container">
<div id="nav">
    <ul>Tests</ul>
</div>
<div id="detail">
    <div class="testDetail">
        <image style="float:right;margin:5px;" src="test1.jpg" width="50px" height="50px"/>
        <image style="float:right;margin:5px;" src="test2.jpg" width="50px" height="50px"/>
        <image style="float:right;margin:5px;" src="test3.jpg" width="50px" height="50px"/>
        <image style="float:right;margin:5px;" src="test4.jpg" width="50px" height="50px"/>
        <h3>Title</h3>
        <p>Testing</p>
    </div>
    <hr>
</div>
</div>
<body> 
```

我在这里错过了什么吗？任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:27:43.720

```
<div id="my-div">
  ...content goes here
</div> 
```

CSS

```
#my-div{
  //For center align
  margin: 0 auto;
  // For grow & shrink as per screen size change values as per your requirements
  width: 80%;
  height: 50%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-04T20:46:15.450

Matt 的 CSS 进行水平居中的简写方法是

```
margin: 0 auto; 
```

0 将指示上边距和下边距，而 auto 将指示左右边距。如果您想要顶部/底部的边距，您可以将 0 更改为您想要的任何内容（即`margin: 20px auto;`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:27:09.363

将对象（尤其是 a `<div>`）居中的最佳方法是使用以下 CSS：

```
margin-left: auto;
margin-right: auto; 
```

如果没有固定边距，对象将居中。

对于调整大小，使大小相对于页面（例如 40%）而不是绝对大小（例如 400 像素）。

# node.js - Jade 我如何在模板中添加前缀以嵌套预先添加的内容？

> ID：13959625
> 
> 赞同：0
> 
> 时间：2012-12-19T19:23:39.343
> 
> 标签：node.js, express, pug

例如，我有：

```
block content
  h1 title
  div#someDiv 
```

但我有时想让它看起来像

```
block content
  h1 title
  div#wrapper
    div#someDiv 
```

将包装器放在那里的最佳方法是什么？我想过做

```
block content
  h1 title
  if condition
    div#wrapper
      include stuff
  else
    include stuff 
```

然后把东西放到一个单独的玉文件中。但这真的很丑。

我不介意为 2 个不同的案例提供 2 个单独的文件，只要我可以保持干燥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:46:38.993

看起来您可以拉出标题并拥有两个单独的块名称。我不知道你为什么有`block content`，也许你的意思是`block append content`？

```
h1 title
- if(condition) {
include with_wrapper
- } else {
include without_wrapper
- } 
```

# ruby-on-rails - rails 3.x，mongoid 和 scoped 排序，无需数据库查询的帮助

> ID：13959629
> 
> 赞同：1
> 
> 时间：2012-12-19T19:23:55.327
> 
> 标签：ruby-on-rails, mongodb, sorting, scope, mongoid

我有一个带有 mongo 和 mongoid 的 Rails 3.2.x 应用程序。我想在我的模型中定义一个“范围”，按名称对我的“用户”进行排序。问题是排序应该**不区分大小写**，mongo 本身不支持。

有没有办法使用范围正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:23:40.983

这是一个需要持久计算字段模式的经典案例。

假设您要排序的字段称为`name`。在您的模型中，捕获分配`name`并设置您可以查询的附加字段。例如：

```
def name=(value)
    self['name'] = value
    self['_lc_name'] = value.downcase
end 
```

您不需要将计算字段定义为 Mongoid 字段。

在 Mongoid 中创建一个索引`_lc_name`以便更快地进行排序。`index`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T20:17:32.613

您必须使用[mongodb 聚合框架](http://docs.mongodb.org/manual/aggregation/)来实现这一点。

一个快速的总结是，您可以执行类似管道的命令来实现此目的（如在 unix 中）。您可以使用聚合框架执行“n”个操作。

# jquery - JStree 1.0 创建新类型

> ID：13959631
> 
> 赞同：2
> 
> 时间：2012-12-19T19:23:59.333
> 
> 标签：jquery, tree, nodes, jstree, tree-nodes

我正在尝试使用 jstree。

实际上我正在使用示例：您可以在网页上找到的 PHP & mySQL 演示 + 事件顺序：http: [//www.jstree.com/demo](http://www.jstree.com/demo)

我需要在树结构中创建一个新类型，因此我在第 059 行中添加了以下代码行（在引用链接中可以看到的示例中）

```
 "mytype" : { "valid_children" : "none", "icon" : { "image" :
 "./mytype.png" } }, 
```

然后在按钮的代码菜单中，我还在 mmenu 输入点击功能中添加了这个：

```
case "add_mynewtype":
    $("#demo").jstree("create", null, "last", { "attr" : { "rel" : "mytype" } });
    break; 
```

显然我还像这样连接了一个新的输入按钮：

```
<input type="button" id="add_mynewtype" value="Create new type" style="display:block; float:left;"/> 
```

但这不能正常工作....

任何人都可以帮助我吗？非常感谢，任何提示都非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:07:32.340

我找到了我的问题的解决方案。

还需要修改文件夹的声明，如下所示：

```
"folder" : {
            "valid_children" : [ "default", "folder", "mytype" ],
            "icon" : {"image" : "./folder.png" }
        }, 
```

或者：

```
"folder" : {
            "valid_children" : [ "all" ],
            "icon" : {"image" : "./folder.png" }
        }, 
```

# .net - .NET 中十进制数据类型的按位运算

> ID：13959632
> 
> 赞同：0
> 
> 时间：2012-12-19T19:24:03.640
> 
> 标签：.net, bit-manipulation, decimal, 128-bit

我刚刚了解到`decimal`数据类型在 .NET 中由 128 位表示

是否可以对 进行按位运算`decimal`，这会比在 2 上进行操作更快/更慢`ulong`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T14:30:09.647

不，你不能。首先，[`decimal`是以 10 为底的浮点类型](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/decimal)，**而不是**128 位整数。您不能对浮点类型进行按位运算

其次，没有 128 位架构，因此即使您设法在 C# 中使用 128 位整数类型，它也不会比操作 2 个`ulong`变量快，因为您仍然必须将 128 位值分解成更小的值适合登记册的作品

* * *

也就是说，大多数现代 PC 架构都支持[SIMD](https://en.wikipedia.org/wiki/SIMD)，因此可以在 128 位类型上进行快速按位运算。在本机代码中这很容易，但我不确定你是否可以在 C# 中做到这一点。如果没有，那么您必须编写一个本机代码库并从 C# 调用它。

尽管如此，在 C# 中有*可能在后台使用 SIMD 的*[BitArray 类](https://docs.microsoft.com/en-us/dotnet/api/system.collections.bitarray?view=netframework-4.7.2)，因此请尝试创建一个 128 位 BitArray 并查看

 *在 Mono 中，[命名空间](http://docs.go-mono.com/?link=N:Mono.Simd')长期以来一直[支持 SIMD](https://tirania.org/blog/archive/2008/Nov-03.html)。后来，当微软开发 RyuJit 时，他们为此引入了 RyuJit。它现在已重命名为其中包括[`Mono.Simd`](http://docs.go-mono.com/?link=N:Mono.Simd')[`Microsoft.Bcl.Simd`](http://blogs.microsoft.co.il/sasha/2014/04/22/c-vectorization-microsoft-bcl-simd/)[`System.Numerics`](https://docs.microsoft.com/en-us/dotnet/api/system.numerics?redirectedfrom=MSDN&view=netframework-4.7.2)

> 支持 SIMD 的向量类型，包括[Vector2](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector2?view=netframework-4.7.2)、[Vector3](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector3?view=netframework-4.7.2)、[Vector4](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector4?view=netframework-4.7.2)、[Matrix3x2](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.matrix3x2?view=netframework-4.7.2)、[Matrix4x4](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.matrix4x4?view=netframework-4.7.2)、[Plane](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.plane?view=netframework-4.7.2)和[Quaternion](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.quaternion?view=netframework-4.7.2)。

Mono 现在也[支持官方`System.Numerics`命名空间](https://www.mono-project.com/news/2016/12/20/system-numeric-vectors/)。不幸的是，目前该命名空间中的许多类型都不支持按位运算，因此您可能需要使用普通的算术运算来解决这个问题。但是[`Vector<T>`结构](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector-1?view=netstandard-2.1)确实有`BitwiseAnd`, `BitwiseOr`, `ExclusiveOr`...

欲了解更多信息，请阅读

*   [单核上的并行性 - 带有 C# 的 SIMD](https://instil.co/2016/03/21/parallelism-on-a-single-core-simd-with-c/)
*   [深入了解 SIMD - C# 和 C++ 中的性能和成本](https://instil.co/2016/04/07/simd-performance-with-csharp-and-cpp/)
*   [.NET 会做智能 SIMD 吗？](https://social.msdn.microsoft.com/Forums/vstudio/en-US/7e75e01a-4e83-41f7-868f-effbed1ba492/will-net-ever-do-intelligent-simd?forum=csharpgeneral)
*   [用于`System.Numerics.Vector`图形编程](https://devblogs.microsoft.com/dotnet/using-system-numerics-vector-for-graphics-programming/)
*   [System.Numerics.Vectors 'Vector<T>'：基本上只是 System.UInt128？](https://stackoverflow.com/q/49662258/995714)
*   [数据并行带来的性能提升：使用 C# 中的 SIMD 指令](http://blogs.microsoft.co.il/sasha/2012/05/24/performance-gains-with-data-parallelism-using-simd-instructions-from-c/)*

# ruby-on-rails - 获取会话 ID 值

> ID：13959636
> 
> 赞同：3
> 
> 时间：2012-12-19T19:24:24.327
> 
> 标签：ruby-on-rails, ruby, session-variables, sessionid

我正在尝试在 Rails 2.2.2 应用程序中获取 session_id

我检查了 Rails 文档并在语法上尝试了一些不同的东西。

当我执行 request.inspect 或 session.inspect 时，我看到 @session_id 有一个值

```
@session_id="BAh7CjoMd...", 
```

但以下所有内容都返回 nil：

```
request.session[:session_id].inspect 
session[:session_id].inspect
session['session_id'].inspect 
```

**session.inspect 的输出：**

```
#<CGI::Session:0x104dff278 
@write_lock=true, 
@data={
    :user_id=>nil, 
    :privilege_id=>nil, 
    :after_login=>{"action"=>"index", "controller"=>"home"}, 
    :csrf_id=>"34a78413704ac92ee0eb276339b1af76", "flash"=>{}
    }, 
@new_session=false, 
@dbprot=[
        #<CGI::Session::CookieStore:0x104dfe8a0 
        @secret="ee912af8f735b1acf19...", 
        @data={:
                user_id=>nil, 
                :privilege_id=>nil, 
                :after_login=>{"action"=>"index", "controller"=>"home"}, 
                :csrf_id=>"34a78413704ac92ee0eb276339b1af76", "flash"=>{}}, 
                @digest="SHA1", 
                @original="BAh7CjoMd...", 
                @cookie_options={
                        "name"=>"_vendor_sandbox_session", 
                                "http_only"=>true, 
                                "secure"=>nil, 
                                "expires"=>nil, 
                                "domain"=>nil, 
                                "path"=>"/"}, 
               @session=#<CGI::Session:0x104dff278 ...>>], 
               @dbman=#<CGI::Session::CookieStore:0x104dfe8a0 
               @secret="ee912af8f735b1acf19...", 
               @data={
                        :user_id=>nil, 
                        :privilege_id=>nil, 
                        :after_login=>{
                    }, 
                    :csrf_id=>"34a78413704ac92ee0eb276339b1af76", 
                    "flash"=>{}}, 
                    @digest="SHA1", 
                    @original="BAh7CjoMd...", 
                    @cookie_options={
                                        "name"=>"_vendor_sandbox_session", 
                                        "http_only"=>true, 
                                        "secure"=>nil, 
                                        "expires"=>nil, 
                                        "domain"=>nil, 
                                        "path"=>"/"
                                    }, 
                    @session=#<CGI::Session:0x104dff278 ...>>, 
                    @session_id="BAh7CjoMd...", 
                    @cgi=#<CGI:0x104f73c30 
                    @cookies={
                                "_vendor_sandbox_session"=>["BAh7CjoMd..."], 

                    }, 
                    @params={}, 
                    @output_hidden=nil, 
                    @multipart=false, 
                    @env_table={
                                    "REQUEST_METHOD"=>"GET", 
                                    "SERVER_NAME"=>"localhost", 
                                    "SERVER_PORT"=>"3000", 
                                    "HTTP_CONNECTION"=>"keep-alive", 
                                    "QUERY_STRING"=>nil, 
                                    "PATH_INFO"=>"/login", 
                                    "SERVER_SOFTWARE"=>"WEBrick/1.3.1 (Ruby/1.8.7/2012-02-08)", 
                                    "REQUEST_URI"=>"http://localhost:3000/login", 
                                    "HTTP_ACCEPT_LANGUAGE"=>"en-US,en;q=0.5", 
                                    "GATEWAY_INTERFACE"=>"CGI/1.1", 
                                    "REMOTE_HOST"=>"127.0.0.1", 
                                    "REMOTE_USER"=>nil, 
                                    "SERVER_PROTOCOL"=>"HTTP/1.1", 
                                    "HTTP_USER_AGENT"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:17.0) Gecko/20100101 Firefox/17.0", 
                                    "HTTP_CACHE_CONTROL"=>"no-cache", 
                                    "HTTP_ACCEPT"=>"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8", 
                                    "REMOTE_ADDR"=>"127.0.0.1", 
                                    "HTTP_COOKIE"=>_vendor_sandbox_session=BAh7CjoMdXNlcl9p...", 
                                    "HTTP_PRAGMA"=>"no-cache", 
                                    "HTTP_ACCEPT_ENCODING"=>"gzip, deflate", 
                                    "HTTP_HOST"=>"localhost:3000"}, 
                                    @output_cookies=nil, 
                                    @stdin=#<StringIO:0x104f73c58 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:32:23.713

你是如何创建会话的？session.inspect 的输出是什么？如果它们在模型中，则可以使用 session.id。如果它们存储在数组或散列中，您可能必须首先识别个人，如 session[0][:session_id]。

正确答案原来是 session.session_id。

谢谢！

# ajax - 在初始化 App 之前从服务器获取多个模型的最佳方法是什么？

> ID：13959637
> 
> 赞同：1
> 
> 时间：2012-12-19T19:24:27.887
> 
> 标签：ajax, spine.js

我有 3 个模型我需要在初始化我的应用程序之前从服务器成功获取数据

```
ModelA.fetch()
ModelB.fetch()
ModelC.fetch() 
```

我会`$.Deferred()`为此使用还是在spine.js中有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:11:10.220

我最终得到了这个实现：

为每个模型创建一个 deferred

```
@modela = new $.Deferred()
@modelb = new $.Deferred()
@modelc = new $.Deferred() 
```

然后在模型完成获取时绑定事件

```
ModelA.bind 'refresh', => @modela.resolve()
ModelB.bind 'refresh', => @modelb.resolve()
ModelC.bind 'refresh', => @modelc.resolve() 
```

最后在一切都完成后解决承诺

```
$.when(
  @modela, @modelb, @modelc
).then(
  @appReady,
  @appError
) 
```

当成功获取所有模型时调用 appReady。

# git - 在团队工作时正确使用 Git/Github

> ID：13959642
> 
> 赞同：8
> 
> 时间：2012-12-19T19:24:54.357
> 
> 标签：git, github

例子：

*   我克隆了 Github 存储库，创建了一个新分支并开始开发一个功能。

*   我的同事克隆了完全相同的 Github 存储库，在他的本地机器上创建了自己的分支（git checkout -b mylocalbranch），并使用他自己的功能。

*   我的同事在我之前完成了他的功能并将其推送到生产环境并返回到 Github。

*   我在 30 分钟后完成了我的功能，并希望在不引起任何冲突的情况下推进我的工作。

在不引起任何冲突的情况下，将我的工作推向生产并返回到 Github 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T19:30:12.923

假设您的同事将他的代码合并到`production`分支。

`yourfeature`现在，您之前创建的分支`production`有点过时了，并且您在其之上几乎没有提交。

你现在要做的是：

*   切换到`production`分支
*   拉它（所以你有最新的变化，包括你的同事的变化）
*   去你的`yourfeature`分行
*   **使用：重新设置**您的分支`production`：这将在最新生产中重放您对该分支的提交。
*   如果出现任何冲突：它们是由于您的同事在您更新某些内容时所做的同一行更改。

[在此处](http://git-scm.com/book/en/Git-Branching-Rebasing)阅读更多关于变基的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:30:12.233

好吧，你可以签出你想合并到的分支，

```
git checkout master 
```

然后合并你的代码

```
git merge [current_branch] 
```

总是存在冲突的可能性，在这种情况下，您只需处理它们并解决它们。

这篇文章应该有所帮助： http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:29:14.653

快速的方法是，确保您的更改已提交，使用 拉取您的队友所做的更改`git pull`，将分支合并到您的分支中`git merge branchname`，将您的分支合并到 master by `git checkout master` `git merge yourbranchname`，然后`git push`将更改备份到远程仓库。

其他相关链接：

[在 GitHub 中的分支之间合并](https://stackoverflow.com/questions/1123344/merging-between-forks-in-github)

[将远程 github 存储库中的更改合并到本地存储库](https://stackoverflow.com/questions/867831/merge-changes-from-remote-github-repository-to-your-local-repository)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T19:33:13.737

这篇博文很有帮助：

> 结论
> 
> 避免合并工作流程，尤其是当您有很多提交者或训练有素的提交者时。
> 
> 了解 git 的分布式特性如何改变游戏规则。
> 
> 在您的权威存储库上打开系统 receive.denyNonFastForwards

来自：[http](http://randyfay.com/content/avoiding-git-disasters-gory-story) ://randyfay.com/content/avoiding-git-disasters-gory-story 。评论和帖子都是黄金。

# java - Java信号量最大？

> ID：13959643
> 
> 赞同：0
> 
> 时间：2012-12-19T19:24:55.983
> 
> 标签：java, semaphore

有没有办法知道信号量对象在其生命周期中拥有的最大许可数是多少？我们像这样初始化它：

```
Semaphore sem = new Semaphore(n); 
```

有时我们获得，有时我们释放我们获得的东西。但是在某些情况下，我们需要释放比我们获得的更多的数量来增加许可证的数量。有没有办法知道这个信号量中的最大许可数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:47:02.023

信号量本身不会在其生命周期内跟踪最大值。围绕它实现一个跟踪最大值的 Semphore 包装器可能会很棘手。这是这种实现的快速草稿：

```
public final class MySemaphore {

    private final Semaphore semaphore;
    private final AtomicReference<MaxCounter> maxCounter = new AtomicReference<>();

    public MySemaphore(int initialAvailable) {
        this.semaphore = new Semaphore(initialAvailable);
        maxCounter.set(new MaxCounter(initialAvailable, initialAvailable));
    }

    private static final class MaxCounter {
        private final int value;
        private final int max;

        public MaxCounter(int value, int max) {
            this.value = value;
            this.max = max;
        }

        public MaxCounter increment() {
            return new MaxCounter(value + 1, Math.max(value + 1, max));
        }

        public MaxCounter decrement() {
            return new MaxCounter(value - 1, max);
        }

        public int getValue() {
            return value;
        }

        public int getMax() {
            return max;
        }

    }

    public void acquire() throws InterruptedException {
        semaphore.acquire();
        for (;;) {
            MaxCounter current = maxCounter.get();
            if (maxCounter.compareAndSet(current, current.decrement())) {
                return;
            }
        }
    }

    public void release() {
        for (;;) {
            MaxCounter current = maxCounter.get();
            if (maxCounter.compareAndSet(current, current.increment())) {
                break;
            }
        }
        semaphore.release();
    }

    public int availablePermits() {
        return maxCounter.get().getValue();
    }

    public int getMaximumEverAvailable() {
        return maxCounter.get().getMax();
    }
} 
```

MaxCounter 可能与内部使用的信号量不完全同步。内部信号量可能会获得释放/获取，从外部角度来看，该释放/获取被处理为获取/释放。对于 MySemaphore 的每个客户端，尽管行为是一致的。即`availablePermits()`永远不会返回高于 `getMaximumEverAvailable()`

免责声明：代码未经测试*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:28:19.547

构造函数定义为[`public Semaphore(int permits)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html#Semaphore%28int%29)。int 的最大值是 2 ^(31) -1 = 2147483647 所以这就是你的答案。

# c# - 如何将 Combobox.Datasource 获取到字典？

> ID：13959644
> 
> 赞同：6
> 
> 时间：2012-12-19T19:25:01.333
> 
> 标签：c#, winforms

以下是我将`List()`a 绑定到`ComboBox`控件的代码。`Insert() method`我尝试使用它向 CombBox 控件添加一些项目，`not allowed`因为它已分配给数据源。那么，如何从 cmbColour.DataSource 将数据源返回到一个新变量（例如 var colours2），该变量返回一个对象。谢谢！

```
var colours= new Dictionary<string, string>
            {
              {"1x","Green"},
              {"2x","Red"},
              {"3y","Blue"},
              {"4y","Black"}
            }.ToList();

cmbColour.ValueMember = "Key";
cmbColour.DisplayMember = "Value";
cmbColour.DataSource = colours;

var colours2 = //how can I get the DataSource back 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:34:44.550

以下代码将返回一个新字典，其中包含您绑定到组合框的相同数据。

```
var list = (List<KeyValuePair<String, String>>)cmbColor.DataSource;

var dictionary = list.ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

该属性`DataSource`将返回您分配的相同实例，但由于它是类型化`Object`的，您必须将其转换回实际类型，然后才能访问任何成员。

但是你为什么不保留原来的字典呢？并且绝对支持修改绑定到数据源的列表——这就是数据绑定的重点。

我想我的回答并不能真正解决您的实际问题，仅解决您认为的问题所在。也许你可以提供一些关于你想要达到的目标的额外信息，我或其他人将能够帮助你解决你的潜在问题。

**更新**

这应该适用于您的场景 - 我坚持使用用户示例。

```
public class User
{
    public String Id { get; set; }

    public String Name { get; set; }
} 
```

以及表单的代码。

```
public partial class MainForm : Form
{
    private readonly BindingList<User> recentlyAddedUsers = new BindingList<User>();

    private void MainFormLoad(Object sender, EventArgs e)
    {
        this.comboBoxRecentlyAddedUsers.DataSource = this.recentlyAddedUsers;

        this.comboBoxRecentlyAddedUsers.ValueMember = "Id";
        this.comboBoxRecentlyAddedUsers.DisplayMember = "Name";

        var recentlyAddedUsersFromService = this.GetRecentlyAddedUsers();

        foreach (var user in recentlyAddedUsersFromService)
        {
            this.recentlyAddedUsers.Add(user);
        }
    }

    private void ButtonAddNewUserClick(Object sender, EventArgs e)
    {
        var newUser = new User();

        newUser.Id = this.textBoxUserId.Text;
        newUser.Name = this.textBoxUserName.Text;

        this.SaveNewUser(newUser);

        this.recentlyAddedUsers.RemoveAt(0);
        this.recentlyAddedUsers.Insert(newUser);
    }

    private List<User> GetRecentlyAddedUsers()
    {
        // Get a list of recently added users from the database.
    }

    private void SaveNewUser(User user)
    {
        // Save the new user to the database.
    }
} 
```

`BindingList<T>`请注意- 这将通知组合框有关列表的任何更改的用法。一个简单的`List<T>`也可以，但是您必须明确告诉组合框刷新数据绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:34:10.597

由于`DataSource`类型为 an `object`，因此没有一种干净的方法可以从中提取数据。如果您知道数据源的基础类型（意味着您将其设置在其他位置以便您知道它是什么类型），您可以将其强制转换并将项目添加到集合中。

请注意，该对象将是原始对象的 REFERENCE 而不是 COPY，这意味着如果您最初将数据源设置为字典，然后尝试提取它以添加您正在将项目添加到 SAME 字典中的项目。

所以在你的情况下：

```
 var colours2 = cmbColour.DataSource as List<KeyValuePair<string, string>>;
 // can add items to colours2 here (but it is the same instance as colours) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:34:15.610

```
var coloursList = cmbColour.DataSource as List<KeyValuePair<string, string>>;
var colours2 = coloursList.ToDictionary(x => x.Key, x => x.Value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T13:19:12.223

```
List<KeyValuePair<String, String>> c = new List<KeyValuePair<string, string>>
        {
            new KeyValuePair<string, string>("m", "n"),
            new KeyValuePair<string, string>("k", "c")
        };

comboBox1.DataSource = c;

c.Add(new KeyValuePair<string, string>("new","new value")); 
```

或者

```
var list = (List<KeyValuePair<String, String>>)comboBox1.DataSource;
list.Add(new KeyValuePair<string, string>("new", "new value")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:17:27.603

您可以使用以下演员表取回数据。

```
namespace WebApplication2
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var colours = new Dictionary<string, string>
            {
                {"1x", "Green"},
                {"2x", "Red"},
                {"3y", "Blue"},
                {"4y", "Black"}
            }.ToList();

            cmbColour.DataSource = colours;

            List<KeyValuePair<string, string>> l1 = new List<KeyValuePair<string, string>>();

            l1 = (List<KeyValuePair<string, string>>)cmbColour.DataSource;
        }
    }
} 
```

# jquery - onClick 将文本插入或附加到文本区域

> ID：13959646
> 
> 赞同：1
> 
> 时间：2012-12-19T19:25:07.293
> 
> 标签：jquery

我想做到这一点，而不是浪费更多时间在似乎他们几乎回答它的帖子上，但不要。谢谢你的帮助。我想单击 Book 并将 'lit:' 的值输入或附加到名为 Discussion 的文本区域中，其中已经存在一些文本。请纠正我的错误，让我剩下的四个脑细胞快乐。谢谢你。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<php $m=1;?>

<Book>Book</Book>
<textarea name="Discussion[]" class="cleanup mceEditor" 
id="Discussion<?php echo $m;?>"><?php echo $row_review['Discussion']; ?></textarea>

<script type="text/javascript">
$(document).ready(function(){ 
   $("Book").click(function(){
      $("#Discussion<?php echo $m;$m++;?>").val('lit:');
   }); 
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:30:55.210

假设唯一的问题是您希望它附加文本而不是替换它，您可以在 onclick 函数中执行以下操作：

```
var $elm = $("#Discussion<?php echo $m;$m++;?>")
$elm.val($elm.val() + 'lit:'); 
```

这会将“lit:”附加到文本区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:45:45.333

如果您使用的是 TinyMCE（我基于代码中的 mceEditor 类做出的假设），则需要执行以下操作：

```
tinyMCE.execCommand('mceInsertContent',false,'lit:'); 
```

这将在光标所在的位置插入“点亮：”文本。如果你愿意，你可以更漂亮，并添加撤消：

```
tinyMCE.execCommand('mceBeginUndoLevel');
tinyMCE.selectedInstance.execCommand('mceInsertContent', false, 'lit:');
tinyMCE.execCommand('mceEndUndoLevel'); 
```

# ruby-on-rails - Rails - 由于“libMagickCore.5.dylib”而无法运行 rake 命令

> ID：13959652
> 
> 赞同：3
> 
> 时间：2012-12-19T19:25:18.777
> 
> 标签：ruby-on-rails, ruby, osx-lion, rake

当我运行时`run rake db:create`，我得到这个错误语句：

```
rake aborted!
dlopen(/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle, 9): Library not loaded: /usr/local/lib/libjpeg.8.dylib
  Referenced from: /usr/local/opt/imagemagick/lib/libMagickCore.5.dylib
  Reason: Incompatible library version: libMagickCore.5.dylib requires version 13.0.0 or later, but libjpeg.8.dylib provides version 12.0.0 - /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle
/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/rmagick.rb:11:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/rmagick.rb:11:in `<top (required)>'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `each'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `block in require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `each'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler.rb:128:in `require'
/Users/adam/rubydev/app-staging/config/application.rb:13:in `<top (required)>'
/Users/adam/rubydev/app-staging/Rakefile:5:in `require'
/Users/adam/rubydev/app-staging/Rakefile:5:in `<top (required)>'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

我整个下午都在寻找问题以及如何解决它，但没有成功。

有问题的部分在这里：

```
 Referenced from: /usr/local/opt/imagemagick/lib/libMagickCore.5.dylib
  Reason: Incompatible library version: libMagickCore.5.dylib requires version 13.0.0 or later, but libjpeg.8.dylib provides version 12.0.0 - /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle 
```

如何`libMagickCore.5.dylib`在 OS X Lion 上升级？

先感谢您

**编辑：**重新安装后，`imagemagick`我跑了`rake db:create`，得到：

```
rake db:createrake aborted!
dlopen(/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle, 9): Library not loaded: /usr/local/opt/imagemagick/lib/libMagickCore.5.dylib
  Referenced from: /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle
  Reason: image not found - /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/RMagick2.bundle
/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/rmagick.rb:11:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/lib/rmagick.rb:11:in `<top (required)>'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `each'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `block in require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `each'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `require'
/Users/adam/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler.rb:128:in `require'
/Users/adam/rubydev/app-staging/config/application.rb:13:in `<top (required)>'
/Users/adam/rubydev/app-staging/Rakefile:5:in `require'
/Users/adam/rubydev/app-staging/Rakefile:5:in `<top (required)>'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/Users/adam/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-17T13:13:26.163

`gem pristine rmagick`从命令行尝试。

参考：[https ://github.com/mroth/lolcommits/issues/65](https://github.com/mroth/lolcommits/issues/65)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:49:52.890

我过去遇到过类似的问题，只是在操作系统和开发人员工具上运行了软件更新。

如果这不能解决问题，您还可以尝试使用 homebrew 删除并重新安装 imagemagic，方法是运行：

```
brew update
brew remove imagemagick
brew install imagemagick 
```

# html - 使下拉菜单的宽度动态化

> ID：13959658
> 
> 赞同：0
> 
> 时间：2012-12-19T19:25:41.223
> 
> 标签：html, css

[我的网站](http://djdavid98.zymichost.com/.math/)使用下拉菜单来显示您可以在页面上执行的操作。

HTML：

```
<table class="navbar">
    <td class="menuNormal geometry" width="135px" onmouseover="menu('exp',this);" onmouseout="menu('col',this);">
        <p class="tdesc">
            <span lang="hu">Geometria</span>
            <span lang="en">Geometry</span>
        </p>
        <div class="menuNormal dropdown" width="inherit">
            <table class="menu" width="inherit">
                <tr><td class="menuNormal">
                    <a href="javascript:geodesc('squa')" class="menuitem">
                        <span lang="hu">Négyzet</span>
                        <span lang="en">Square</span>
                    </a>
                </td></tr>
                ...
            </table>
        </div>
    </td>
</table> 
```

CSS：

```
table {
padding:0;
margin:0;
}

table.navbar {
background-color: ButtonFace;
font: menu;
}

p.tdesc {
margin: 0;
padding: 0 3px 0 3px;
text-align:center;
font: menu;
}

table.menu{
font-size: 8pt;
margin: 0px;
padding: 0px;
}

td.menuNormal{
padding: 0px;
color: ButtonText;
vertical-align: top;
}

td.menuHover{
padding: 0px;
color: HighlightText;
vertical-align: top;
background-color: Highlight;
}

div.menuNormal{
display: none;
position: static;
}

div.menuHover{
border: 1.5px solid ButtonShadow;
background-color: Menu;
display: inline;
position: absolute;
}

a.menuitem:link{
text-decoration: none;
color: ButtonText;
padding: 2.5px;
border-bottom: 1px solid GrayText;
display: block;
}

a.menuitem:hover{
text-decoration: none;
color: HighlightText;
padding: 2.5px;
background-color: Highlight;
border-bottom: 1px solid GrayText;
display: block;
}

.hover {
border:3px ridge #8CA3FF;
background-color: #C9D4FF;
font-style:normal;
} 
```

目前，这个解决方案并不完美，因为菜单的宽度是固定的，当我试图让它看起来更像下拉式时，它在显示实际选项时扩展了顶部标签的宽度。

我需要一种方法来使选项看起来像实际的下拉菜单，并使标签宽度适合它包含的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:24:07.557

如果这是您正在组合的新东西并且您可以完全控制它并且目标是制作一个漂亮的网站（而不是展示对 CSS 的理解）并且您没有诸如**不**使用现有库之类的限制，那么我会建议尝试[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)并使用流畅的容器和导航作为基础，然后在需要时在顶部添加您自己的 CSS 以进行特定的设计更改。

# java - Java EE 异常：名称 java:comp 未绑定在此上下文中

> ID：13959665
> 
> 赞同：6
> 
> 时间：2012-12-19T19:26:10.117
> 
> 标签：java, tomcat, netbeans, jndi

我在 Netbeans 7.2.1 中有 Java EE 应用程序。尝试部署它（构建结束正常），我在 Tomcat 日志中收到错误：

```
Caused by: javax.naming.NameNotFoundException: Name java:comp is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1454) 
```

寻找导致此错误的代码，我发现以下内容：

```
public Object lookup(String name) throws NamingException {
    return getURLOrDefaultInitCtx(name).lookup(name);
    } 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T20:02:25.043

当您出于某种原因在webapp`jsp-api.jar`的. 您应该从那里删除所有特定于 servletcontainer 的 JAR，它们不属于那里。此外，请确保这些 JAR 没有嵌套在您拥有的其他 JAR 中。`servlet-api.jar``catalina.jar``/WEB-INF/lib``WEB-INF/lib`

这是一个常见的初学者错误，目的是“修复” JSP/Servlet 库上的编译错误，这些错误应该以不同的方式解决；即通过将 IDE 项目配置为与 Netbeans 中的“目标服务器”或 Eclipse 中的“目标运行时”相关联。然后，IDE 将在编译期间自动包含服务器的库。

# javascript - 仅当中心 div 较小时，使中心 div 与侧 div 大小相同

> ID：13959668
> 
> 赞同：1
> 
> 时间：2012-12-19T19:26:16.620
> 
> 标签：javascript, css, height

当且仅当中心 div 小于 Left SideBar2 时，如何使我的中心 div 与 Left SideBar2 具有相同的高度？我不确定这是否可以用纯 CSS 来完成，或者我是否应该为此使用 JS 以及如何？

[我的页面](http://i.stack.imgur.com/Dqfnz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:34:46.557

这应该用 javascript 完成...这里我将使用 jquery。将其放入您的标签中并进行适当的更改。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    (function () {
        function changeHeight() {
            $centerDiv = $('#centerDivId');
            $leftBar = $('#leftBarId');
            if ($centerDiv.height() < $leftBar.height()) {
                $centerDiv.css('height', $leftBar.height())
            }
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:36:48.257

```
jQuery(document).ready(function() {
    var $center = jQuery('.center-selector');
    $center.height(getCenterHeight());
});

var getCenterHeight = function() {
    var $left = jQuery('.left-sidebar-container-selector');
    var $right = jQuery('.right-sidebar-container-selector');

    var leftHeight = parseInt($left.height(), 10);
    var rightHeight = parseInt($right.height(), 10);

    return Math.max(leftHeight, rightHeight);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:27:23.527

您也许可以使用 CSS3`min-height`属性来设置居中 div 的[最小高度](http://www.w3.org/wiki/CSS/Properties/min-height)。

# qt - 多个 QTreeWidget 上的单个 QTreeWidgetItem 实例？

> ID：13959669
> 
> 赞同：0
> 
> 时间：2012-12-19T19:26:16.680
> 
> 标签：qt, qt4, pyside, qtreewidget, qtreewidgetitem

我试图`QTreeWidgetItem`在 2 秒上显示一个实例`QTreeWidget`，最终只在第一棵树上显示的项目没有被通知。我还没有看到[它的 API 文档](http://doc.qt.digia.com/qt/qtreewidgetitem.html)谈到限制（如果有的话）。有没有办法解决？

```
#!/usr/bin/python
import os
import sys  

from PySide.QtCore import QFile
from PySide.QtUiTools import QUiLoader
from PySide.QtGui import QApplication, QTreeWidget, QTreeWidgetItem, QWidget

class MyTreeWidgetItem(QTreeWidgetItem):
    def __init__(self, *args):  
       super(MyTreeWidgetItem, self).__init__()

class MyWidget(QWidget):
    def __init__(self, *args):  
       super(MyWidget, self).__init__()

       loader = QUiLoader()
       file = QFile('./src/prove_qtreewidget/qtree_mainwidget.ui') 
       file.open(QFile.ReadOnly)
       self.widget_ui = loader.load(file, self)
       file.close()

       item1 = MyTreeWidgetItem(self)
       item1.setText(0, 'Item 1')

       _tw1 = self.widget_ui.findChild(QTreeWidget, '_tree_widget_1')
       _tw2 = self.widget_ui.findChild(QTreeWidget, '_tree_widget_2')
       _tw1.addTopLevelItem(item1)
       _tw2.addTopLevelItem(item1)

if __name__ == '__main__':  
   print("Running in " + os.getcwd() + " .\n")    
   app = QApplication(sys.argv)      
   win = MyWidget()  
   win.show()    
   app.exec_() 
```

`.ui`上面的文件可以[在这里找到](http://pastebin.com/SjWQQWg6)。

使用 Qt 4.8、Ubuntu 12.04

我没有尝试`PyQt`绑定，但我只是假设不应该有任何不同的没有证据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:02:33.863

您需要的是一个[模型和一个`QTreeView`](http://pepper.troll.no/s60prereleases/doc/model-view-introduction.html)，这就是它们的用途：

> **模型/视图编程：**小部件不维护内部数据容器。他们通过标准化接口访问外部数据，从而避免数据重复。

# entity-framework-5 - 执行 Find() 的复合键问题

> ID：13959670
> 
> 赞同：1
> 
> 时间：2012-12-19T19:26:23.850
> 
> 标签：entity-framework-5

传递的主键值的数量必须与实体上定义的主键值的数量相匹配。参数名称：keyValues

```
public TEntity Find(int id)
    {

        return _context.Set<TEntity>().Find(id);
    } 
```

![在此处输入图像描述](../Images/7e0e94de6e3b64dd95a4f81cc1a2bbe4.png)

可能的？我知道还有其他方法可以做到这一点，但是如果可以在此表上使用 find ，我会很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:35:18.977

那是工作......我认为这不是更好的方式，但有吗

```
Func<Acesso_LogErro, bool> expressionPerfil = Perf => Perf.idLogErro == id;
        Acesso_LogErro acesso_logerro = acesso_LogErroRepository.Where(expressionPerfil).First(); 
```

# c++ - SDL_Mixer 崩溃一次；现在所有使用 SDL_Mixer 的程序在初始化时都会崩溃

> ID：13959671
> 
> 赞同：1
> 
> 时间：2012-12-19T19:26:24.177
> 
> 标签：c++, audio, crash, sdl, sdl-mixer

我正在使用 SDL_mixer 完成[本](http://lazyfoo.net/SDL_tutorials/lesson11/index.php)关于音频的教程，一切都很顺利。

之后我决定去实验、玩、摸索，所以我做了一个非常相似的程序，有两个声道，让我播放一些视频游戏音乐，并按下按钮播放游戏音效。

然后我开始玩得开心和按动按钮，只是为了愚蠢并测试程序。*我开始非常快速地*将多个按钮混合在一起，然后在这样做了大约 5 秒后，程序意外关闭。

从大约 2 个月前的那个日期开始，我一直无法在使用 SDL_mixer 的计算机上运行任何东西。我尝试使用 SDL_mixer 创建新项目，我重新下载了所有 SDL 和 SDL_mixer，甚至[在 sdl 论坛上提出了这个问题](http://forums.libsdl.org/viewtopic.php?t=8647)。

我正要重新格式化我的整个计算机以使其再次工作，这是 - 不 - 好的。扩展库不应该强迫某人重新格式化，尤其是当这是一个可能会传递给最终用户下载和使用程序的问题时。

我使用的是 Windows 7 64 位；微软 Visual Studio 2012 专业版；C++；和 SDL 1.x

另外，如果有人知道出了什么问题，我该如何解决这个问题，防止它再次发生，并安全地使用声音，这样我就不会在用户的计算机上造成问题？

我用来初始化混音器的行如下：

```
//Initialize SDL_mixer 
if( Mix_OpenAudio( 22050, MIX_DEFAULT_FORMAT, 2, 4096 ) == -1 ) 
{ 
    return false; 
} 
```

启动程序后调试器吐出的行并立即关闭：

```
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\SDL_Tutorial11.exe'. Symbols loaded. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\SDL.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\advapi32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcrt.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sechost.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\rpcrt4.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sspicli.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cryptbase.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\gdi32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\user32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\lpk.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\usp10.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\winmm.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\SDL_image.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\SDL_ttf.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libfreetype-6.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\zlib1.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\SDL_mixer.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110.dll'. Symbols loaded. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110.dll'. Symbols loaded. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\imm32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msctf.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ddraw.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dciman32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\setupapi.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\oleaut32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ole32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\devobj.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dwmapi.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\ddraw.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\dwmapi.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\setupapi.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\devobj.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\oleaut32.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\ole32.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\cfgmgr32.dll' 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\dciman32.dll' 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\uxtheme.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dwmapi.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KBDUS.DLL'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\KBDUS.DLL' 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KBDUS.DLL'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\KBDUS.DLL' 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dsound.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ole32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\powrprof.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\setupapi.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\oleaut32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\devobj.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dinput.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\hid.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\wintrust.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\crypt32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msasn1.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ole32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\ole32.dll' 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ole32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Unloaded 'C:\Windows\SysWOW64\ole32.dll' 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\clbcatq.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\MMDevAPI.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\propsys.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\shlwapi.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\AudioSes.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libmikmod-2.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\wdmaud.drv'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ksuser.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\avrt.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msacm32.drv'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msacm32.dll'. Cannot find or open the PDB file. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Windows\SysWOW64\midimap.dll'. Cannot find or open the PDB file. 
The thread 0x5b8 has exited with code 0 (0x0). 
The thread 0x1d2c has exited with code 0 (0x0). 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libpng15-15.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libvorbisfile-3.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libvorbis-0.dll'. Module was built without symbols. 
'SDL_Tutorial11.exe' (Win32): Loaded 'C:\Users\Rayne\Documents\Visual Studio 11\Projects\SDL_Tutorial11\Debug\libogg-0.dll'. Module was built without symbols. 
The thread 0x1a1c has exited with code 0 (0x0). 
The thread 0x1fbc has exited with code 0 (0x0). 
The thread 0x3f8 has exited with code 0 (0x0). 
The thread 0x584 has exited with code 0 (0x0). 
The thread 0xa98 has exited with code 0 (0x0). 
The thread 0x182c has exited with code 1 (0x1). 
The thread 0x1d1c has exited with code 1 (0x1). 
The thread 0x1278 has exited with code 1 (0x1). 
The thread 0x1d28 has exited with code 1 (0x1). 
The thread 0x1ca0 has exited with code 1 (0x1). 
The thread 0x1844 has exited with code 1 (0x1). 
The thread 0x1340 has exited with code 1 (0x1). 
The thread 0x6e8 has exited with code 1 (0x1). 
The thread 0x2008 has exited with code 1 (0x1). 
The program '[4852] SDL_Tutorial11.exe' has exited with code 1 (0x1). 
```

PS 有没有一种更简单的方法来表示大段代码，而不必在每行前面手动复制过去 4 个空格？这花了一段时间._.;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:48:33.927

感谢 genpfault 的建议，我能够找到解决此问题的方法。

事实证明，解决方案是当程序从过载的声道崩溃时，因为必须通过按键激活声音，排队的按键被附加**到程序的源代码中**，因为 Visual Studio 会自动崩溃后抓住“窗口焦点”并“抓住”多余的字符。

这些字符恰好在程序一开始就被附加到 SDL_mixer 函数的第一个错误检查行之一的字符串文字中，因此它不会为编译器抛出语法错误；错误检查行只是说“不，加载的文件与此字符串不完全匹配，因此关闭程序”，这导致程序在我的断点可以注册并允许我调试之前退出。

*终于*解决了这个问题，这绝对是一种解脱。

谢谢 genpffault 和 stack-overflow！~

# powershell - 将参数从 TFS 构建过程模板传递到 Powershell 脚本，带有两个连续的空格

> ID：13959674
> 
> 赞同：0
> 
> 时间：2012-12-19T19:26:44.607
> 
> 标签：powershell, parameters, directory, whitespace

因此，我在 TFS 2012 中创建了一个构建过程模板，该模板必须将路径名传递给 Powershell 脚本，该脚本进而连接指定目录中的文件。

其中一些路径名可能有两个连续的空格，结果证明这是一个问题。

当我调用 powershell 脚本时，我用单引号将路径名括起来，执行的命令看起来像这样。

```
powershell C:\psScript.ps1 'C:\tmp\two  spaces\myFolder'. 
```

但是，当我尝试在 Powershell 中打开目录时，出现以下错误：

```
Get-Item : Cannot find path 'C:\tmp\two spaces\myFolder' 
because it does not exist. 
```

两个空间仿佛合而为一，找不到路径。

有谁知道这可能是什么原因造成的？

# android - 在 xml 中创建一个带有文本环绕图像的布局

> ID：13959677
> 
> 赞同：2
> 
> 时间：2012-12-19T19:26:56.010
> 
> 标签：android, android-widget

我试过用 xml 和 java 中的图像做流文本，它工作正常，但并不完全完美。所以我的问题是如何创建一个看起来像一本书的布局，图像和文本正确环绕在图像周围。有办法吗？如果是这样，是否有我可以遵循的教程或示例？

我想要实现的是：

```
text text text text ¦ image ¦
text text text text ¦_______¦
text text text text text text text 
text text text text text text text 
```

我已经阅读了这个问题的所有相关答案（之前由不同的用户询问过），但没有一个真正解释了要做什么。

有人可以帮忙吗？

# java - 方法句柄操作

> ID：13959680
> 
> 赞同：-2
> 
> 时间：2012-12-19T19:27:02.627
> 
> 标签：java, aspectj, java-7, invokedynamic, methodhandle

对于我使用 aspectJ 和 invokedynamic 的工作，当切入点与被调用的方法匹配时，我需要将通知编织到方法中。首先，我将脚本中的 invokedynamic-instruction 的引导方法与我自己的进行了交换。现在在我的引导方法中，我想返回一个 CallSite，它首先调用被调用的方法，然后是我定义的建议。

问题是我必须返回一个由 ONE MethodHandle 构建的 CallSite ，其类型签名与原始引导方法中使用的类型签名相同。我考虑过将两个方法句柄（原始 + 建议）组合成一个新的方法句柄，并将其用于返回的 CallSite。但我找不到正确的方法来做到这一点。MethodHandles.foldArguments 似乎很有希望，但它对我不起作用。另一个想法是从调用原始方法句柄和建议的包装方法构建 MethodHandle，但问题是正确的类型签名。

有没有人对我有想法或建议？如何使用建议修补 MethodHandle？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:52:24.000

恕我直言，后处理最简单的方法是使用 MethodHandles#filterReturnValue。这允许执行目标方法，然后对返回值进行过滤。您可以简单地返回输入的内容，并根据您的建议做任何您需要做的事情。当然，您需要进行类型转换以将类型组合在一起，但这应该不是主要问题。对于预处理，我可能会过滤一个参数，我之前添加然后删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:05:24.403

我已经用 MethodHandles.guradwithtest 尝试过它并且它有效。但它不是很方便，只能在原始方法句柄之前调用某些东西。

但现在我已经用另一种方式解决了。我制作了一个 wrappermethod，它获取方法句柄并以所需的方式调用它们。然后我将该包装方法作为 MethodHandle 并插入参数。然后 wrappermethod.asCollector(...) 和 wrappermethod.asType(...) 就是这样。对不起，简短的解释。您可以询问更多详细信息。

# javascript - javascript循环减慢每次迭代

> ID：13959683
> 
> 赞同：0
> 
> 时间：2012-12-19T19:27:25.933
> 
> 标签：javascript, performance, loops, iteration

我有一个 javascript FOR 循环，它为循环的每次迭代添加一行到表中，作为 Web 表单的一部分。循环变得越来越慢。

以下是添加了 15 行的表的时间：

```
 sample 1 start: 1355250090.832 end: 1355250090.873 difference: 0.041
    sample 2 start: 1355250090.873 end: 1355250090.952 difference: 0.079
    sample 3 start: 1355250090.953 end: 1355250091.393 difference: 0.440
    sample 4 start: 1355250091.393 end: 1355250091.659 difference: 0.266
    sample 5 start: 1355250091.659 end: 1355250092.284 difference: 0.625
    sample 6 start: 1355250092.284 end: 1355250093.159 difference: 0.875
    sample 7 start: 1355250093.159 end: 1355250093.863 difference: 0.704
    sample 8 start: 1355250093.863 end: 1355250094.924 difference: 1.061
    sample 9 start: 1355250094.924 end: 1355250095.924 difference: 1.000
    sample 10 start: 1355250095.924 end: 1355250097.175 difference: 1.251
    sample 11 start: 1355250097.175 end: 1355250098.362 difference: 1.187
    sample 12 start: 1355250098.362 end: 1355250099.690 difference: 1.328
    sample 13 start: 1355250099.690 end: 1355250101.378 difference: 1.688
    sample 14 start: 1355250101.378 end: 1355250103.003 difference: 1.625
    sample 15 start: 1355250103.003 end: 1355250104.878 difference: 1.875 
```

这是添加表格行的函数的javascript：

```
 function addSample(){

            fTrain+="addSample();<br>";

          var sample="";
          var temp="";
          var tempString="";
          var endCode="";
          var helper1="";
          var helper2="";
          var dcf="";
          var dct="";
          var useDate=false;
          var dateToUse="";
          var slDays="";
          var tsid="";
          var tabNDX=0;

          //alert(sampleCount.toString());
          //$("#statUpdate").html("adding sample: "+sampleCount.toString());

          if(sampleCount>=20){
                var tdt="WARNING\n";
            tdt+="You have exceeded 20 samples. To avoid data loss, you should not put more ";
            tdt+="than 20 samples per submission.";
            alert(tdt);
          }

          // copy existing values into array
          if(sampleCount>=1){
              var tArray="";
              tArray=copyValues(); 

              var ticArray="";
              ticArray=copyTics();
            }  

          if(ie){
                endCode="</TABLE><BR>&nbsp;";  // for some reason this has to be upper case in IE
          }else{
              endCode="</table><br>&nbsp;";
          }     

          sampleCount=sampleCount+1;
          tabNDX=1000+(sampleCount*20);  // needs a buffer to seperate from other tab indecies in virtual windows

          if (bColor=="#ffffff"){
                    bColor=ltOrange;
            }else{
                  bColor="#ffffff";
            }

         // add header on first addition only
            if(sampleCount==1){
                sample+="<table border='1' id='sampleTable' style='border-collapse:collapse;border:1pt solid black'>";

                sample+="<tr>";
                sample+="<th class='tsmall'>copy cell <input onChange='needSave=1;' checked type='checkbox' name='CST' id='CST'></th>";
                sample+="<th class='tsmall'>&nbsp;</th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CGL' id='CGL'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CPT' id='CPT'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CCM' id='CCM'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CDP' id='CDP'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CED' id='CED'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CDVT' id='CDVT'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CTSPD' id='CTSPD'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CVSPD' id='CVSPD'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CMNM' id='CMNM'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CE' id='CE'></th>";
                sample+="<th class='tsmall'><input onChange='needSave=1;' style='visibility:hidden' type='checkbox' name='CDVM' id='CDVM'></th>";           
                sample+="<th class='tsmall'><input onChange='needSave=1;' checked type='checkbox' name='CTECH' id='CTECH'></th>";
                sample+="<th class='tsmall'>&nbsp;</th>";
                sample+="</tr>";

                sample+="<tr>";
                sample+="<th class='ysmall' style='background:#ffffff' colspan='7'>&nbsp;</th>";
                sample+="<th class='ysmall' colspan='4'>Stud Targets</th>";
                sample+="<th class='ysmall' style='background:#ffffff' colspan='6'>&nbsp;</th>";
                sample+="</tr>";        

                sample+="<tr>";
                sample+="<th class='small'>Sample type</th>";
                sample+="<th class='small'>Sample ID</th>";
                sample+="<th class='small'>Genetics</th>";
                sample+="<th class='small'>Pkg. type</th>";
                sample+="<th class='small'>Conc.<br>method</th>";
                sample+="<th class='small'>Date<br>processed</th>";
                sample+="<th class='small'>Expiration<br>date</th>";
                sample+="<th class='small'>DVT</th>";
                sample+="<th class='small'>TSD</th>";
                sample+="<th class='small'>VSD</th>";
                sample+="<th class='small'>Min<br>normal</th>";
                sample+="<th class='small'>Extender</th>";
                sample+="<th class='small'>Dose vol.</th>";
                sample+="<th class='small'>Proc. tech</th>";        
                sample+="<th class='small'>del</th>";       
                sample+="</tr>";

                // decide if to copy date from above
                                dcf=document.getElementById('dateCollectedFrom').value;
                                dct=document.getElementById('dateCollectedTo').value;

                                // same date
                                if(dcf==dct){
                                        useDate=true;
                                        dateToUse=dcf;          
                                }

                                if(useDate===false){
                                        // one date only has value
                                        if( dcf!=="" && dct==="" ){
                                                useDate=true;
                                                dateToUse=dcf;  
                                        }

                                        // one date only has value
                                        if( dct!=="" && dcf==="" ){
                                              useDate=true;
                                                dateToUse=dct;                  
                                        }           
                                }
                // end date decision block              

            } // end if sample counter == 1

            // sample guts
            var sc=sampleCount.toString();

            sample+="<tr id='tr_"+sc+"' >";     

            var inputSize="4";  // default text box input size      

            // sample type
            sample+="<td valign='top' style='background:"+bColor+";'><select onChange='needSave=1;' tabindex='"+(tabNDX).toString()+"' style='background:"+bColor+";font-size:8pt;' name='sampleType_"+sc+"' id='sampleType_"+sc+"' ";
            sample+="onClick=\"if(this.value.indexOf('other')>-1){document.getElementById('otherSample_"+sc+"').style.visibility='visible'}else{document.getElementById('otherSample_"+sc+"').style.visibility='hidden'};\" " ;
         sample+="onBlur=\"if(this.value.indexOf('other')>-1){document.getElementById('otherSample_"+sc+"').style.visibility='visible'}else{document.getElementById('otherSample_"+sc+"').style.visibility='hidden'};\" >";
         sample+=">"+sampleTypes()+"</select><br>";     
            sample+="<input size='10' style='background:"+bColor+";font-size:8pt;visibility:hidden'  type='text' name='otherSample_"+sc+"' id='otherSample_"+sc+"'></td>"   ;       

            // sample ID
            tsid="";
            sample+="<td valign='top' style='background:"+bColor+";'><input onkeypress='return checkKey2(this,event);' onchange='needSave=1;updateAnaArray(this.value,"+sc+");' tabindex='"+(tabNDX+1).toString()+"' size='8' style='background:"+bColor+";font-size:8pt;' "+tsid+" type='text' name='sampleID_"+sc+"' id='sampleID_"+sc+"'><br>";
            sample+="<button style='font-size:8pt' onmouseout='hoverAnalysis(\"clear\");' onmouseover='hoverAnalysis("+sc+");'  onClick='if(uniqueSample("+sc+")){analyze("+sc+")}'>Analysis</button>";
            sample+="<span style='display:none;' id='osid_"+sc+"'></span>";
            sample+="</td>"

            // genetic line-breed
            sample+="<td valign='top' style='background:"+bColor+";'><input onChange='needSave=1;' tabindex='"+(tabNDX+2).toString()+"' size='"+inputSize+"' style='background:"+bColor+";font-size:8pt;'  type='text' name='glb_"+sc+"' id='glb_"+sc+"'></td>";

            // packaging type
            sample+="<td valign='top' style='background:"+bColor+";'>"
            sample+="<span onClick='displayPT("+sc+")' onMouseOver='this.style.cursor=\"pointer\"' style='font-size:8pt' id='pthDisplay_"+sc+"'>[+]</span><br>";
            sample+="<div id='ptHolder_"+sc+"' style='display:none'>";
            sample+="<select style='background:"+bColor+";font-size:8pt;' name='packageType_"+sc+"' id='packageType_"+sc+"' ";
            sample+="onChange='needSave=1;packageLogic("+sc+")' ";
          sample+="onBlur='packageLogic("+sc+")' ";
          sample+=">"+packagingTypes()+"</select>";     
            sample+="<span id='pkt_"+sc+"'></span><input size='10' style='background:"+bColor+";font-size:8pt;display:inline'  type='text' name='otherPackage_"+sc+"' id='otherPackage_"+sc+"'>";       
            sample+="<div id='packDiv_"+sc+"'></div>";
            sample+="</div>";
            sample+="</td>"

            // concentration method
            sample+="<td valign='top' style='background:"+bColor+";'><select onChange='needSave=1;' style='background:"+bColor+";font-size:8pt;' name='cm_"+sc+"' id='cm_"+sc+"' ";
            sample+="onClick='checkCM("+sc+")' ";
            sample+="onBlur='checkCM("+sc+")' ";
            sample+=">"+cMethod()+"</select><br>";       
            sample+="<span name='cmSpan_"+sc+"' id='cmSpan_"+sc+"' >";
            sample+="<input size='8' onChange='needSave=1;' style='background:"+bColor+";font-size:8pt;visibility:visible' type='text' name='otherCM_"+sc+"' id='otherCM_"+sc+"'>";         
            sample+="</span><br>";
            sample+="<span name='oOtherCM_"+sc+"' id='oOtherCM_"+sc+"' >";
            sample+="</span></td>";

            // date processed
            helper2="storageLife_"+sc;      
            if(sampleCount==1){
                    // put in default date if logic fulfilled
                    sample+="<td valign='top' align='right' style='background:"+bColor+";'><input onChange='needSave=1;' tabindex='"+(tabNDX+7).toString()+"' value='"+dateToUse+"' size='8' onBlur='if(this.value!=\"\"){if(isDate(this.value,1)==false){this.focus()}else{";
            }else{
                  sample+="<td valign='top' align='right' style='background:"+bColor+";'><input onChange='needSave=1;' tabindex='"+(tabNDX+7).toString()+"' size='8' onBlur='if(this.value!=\"\"){if(isDate(this.value,1)==false){this.focus()}else{";      
            }       
            sample+="figureLife(document.getElementById(\""+helper2+"\").value,"+sc+",\"dp\");}}' style='background:"+bColor+";font-size:8pt;'  type='text' name='dateProc_"+sc+"' id='dateProc_"+sc+"'> ";     
            helper1="dateProc_"+sc;  
            sample+="<button id='labDO1_"+sc+"' onClick='displayDatePicker(\""+helper1+"\")' style='width:10px;height:10px'></button><br>";
            sample+="<span id='labSLD_"+sc+"' style='font-size:8pt;background:#ffffc0;'>storage life:</span><br>";
            if(sc==1){
                slDays=" value='5' ";
            }else{
                slDays="";
          }             
            sample+="</td>";

            // expiration date
            helper1="expirationDate_"+sc;   
            sample+="<td valign='top' style='background:"+bColor+";'><input tabindex='"+(tabNDX+8).toString()+"' size='8' onChange='needSave=1' onBlur='figureLife(document.getElementById(\""+helper2+"\").value,"+sc+",\"ed\");' style='background:"+bColor+";font-size:8pt;'  type='text' name='expirationDate_"+sc+"' id='expirationDate_"+sc+"'> ";
            sample+="<button id='labDO2_"+sc+"' onClick='displayDatePicker(\""+helper1+"\");' style='width:10px;height:10px'></button><br>";

            // storage life
            sample+="<input style='background:#ffffc0' "+slDays+" size='"+inputSize+"' onBlur='figureLife(this.value,"+sc+",\"sl\")' onChange='needSave=1;figureLife(this.value,"+sc+",\"sl\")' style='background:"+bColor+";font-size:8pt;'  type='text' name='storageLife_"+sc+"' id='storageLife_"+sc+"'></td>";     

            // dose volume target (dvt)
            sample+="<td valign='top' style='background:"+bColor+";'><input tabindex='"+(tabNDX+9).toString()+"' onChange='needSave=1;checkField(this.value,\"dv\",this.id)' size='"+inputSize+"' style='background:"+bColor+";font-size:8pt;'  type='text' name='dvt_"+sc+"' id='dvt_"+sc+"'></td>";

            // total sperm per dose (tsd)
            sample+="<td valign='top' style='background:"+bColor+";'><input tabindex='"+(tabNDX+10).toString()+"' onChange='needSave=1;checkField(this.value,\"vs\",this.id)' size='"+inputSize+"' style='background:"+bColor+";font-size:8pt;'  type='text' name='tspd_"+sc+"' id='tspd_"+sc+"'></td>";

            // viable sperm per dose VSD
            sample+="<td valign='top' align='right' style='background:"+bColor+";'><input tabindex='"+(tabNDX+11).toString()+"' size='6' onChange='needSave=1;checkField(this.value,\"vs\",this.id)' style='background:"+bColor+";font-size:8pt;'  type='text' name='vspd_"+sc+"' id='vspd_"+sc+"'><br>";
            sample+="<span style='font-size:8pt;background:#ffffc0' id='labMOT_"+sc+"' >motil<input onChange='needSave=1;' tabindex='"+(tabNDX+12).toString()+"' type='checkbox' id='vspdMot_"+sc+"' name='vspdMot_"+sc+"'></span>";
            sample+="</td>";

            // minimum normal morphology
            sample+="<td valign='top' style='background:"+bColor+";'><input tabindex='"+(tabNDX+13).toString()+"' onChange='needSave=1;checkField(this.value,\"mn\",this.id)' size='6' style='background:"+bColor+";font-size:8pt;'  type='text' name='mnm_"+sc+"' id='mnm_"+sc+"'><br>";
            sample+="<span style='font-size:8pt;background:#ffffc0' id='labMOR_"+sc+"' >morph<input onChange='needSave=1;' tabindex='"+(tabNDX+14).toString()+"' type='checkbox' id='vspdMor_"+sc+"' name='vspdMor_"+sc+"'></span></td>";       

            // extender
            sample+="<td valign='top' style='background:"+bColor+";'><select onChange='needSave=1;' tabindex='"+(tabNDX+15).toString()+"' style='background:"+bColor+";font-size:8pt;' name='extender_"+sc+"' id='extender_"+sc+"' ";
            sample+="onClick=\"if(this.value.indexOf('other')>-1){document.getElementById('otherExtender_"+sc+"').style.visibility='visible'}else{document.getElementById('otherExtender_"+sc+"').style.visibility='hidden'};\" " ;
         sample+="onBlur=\"if(this.value.indexOf('other')>-1){document.getElementById('otherExtender_"+sc+"').style.visibility='visible'}else{document.getElementById('otherExtender_"+sc+"').style.visibility='hidden'};\" >";
         sample+=">"+extenderTypes()+"</select><br>";       
            sample+="<input size='10' onChange='needSave=1;' style='background:"+bColor+";font-size:8pt;visibility:visible'  type='text' name='otherExtender_"+sc+"' id='otherExtender_"+sc+"'>";       
                    // pooled-ss
                    // they decided not to use this field so I'm just hiding it under extender
                    // instead of changing all of the management functions and CGI
                    sample+="<span style='display:none'>";
                    sample+="<br><span sid='labP_"+sc+"' >Pooled:</span><input onChange='needSave=1;' type='radio'  name='pss_"+sc+"' id='Ppss_"+sc+"'><br>" ;
                    sample+="<span id='labSS_"+sc+"' >SS:</span> <input  onChange='needSave=1;' type='radio'  name='pss_"+sc+"' id='Spss_"+sc+"'>"  ;           
                    sample+="</span>";
            sample+="</td>" ;           

            // dose volume measured
            sample+="<td valign='top' style='background:"+bColor+";'><input tabindex='"+(tabNDX+17).toString()+"' onChange='needSave=1;checkField(this.value,\"dv\",this.id)' size='"+inputSize+"' style='background:"+bColor+";font-size:8pt;'  type='text' name='dvm_"+sc+"' id='dvm_"+sc+"'><br>";
            sample+="<span style='font-size:8pt'>Client tech:</span><br>";      
            sample+="<input onChange='needSave=1;' size='8' tabindex='"+(tabNDX+18).toString()+"' style='background:"+bColor+";font-size:8pt;' type='text' id='cTech_"+sc+"' name='cTech_"+sc+"'></td>";

            // proc tech
            sample+="<td valign='top' style='background:"+bColor+";'><span style='font-size:8pt'>KRC tech:</span><br><select onChange='needSave=1;' tabindex='"+(tabNDX+19).toString()+"' style='background:"+bColor+";font-size:8pt;' name='KRCtech_"+sc+"' id='KRCtech_"+sc+"'>"+techList+"</select>";
            sample+="</td>";

            // remove sample
            sample+="<td align='center' valign='center' style='background:"+bColor+";'><br><button id='labDB_"+sc+"' class='bClass' style='width:25px' onClick='needSave=1;removeSample("+sc+");'><img src='"+httpsBase+"/images/rem.gif'></button></td>";      

            // end row
            sample+="</tr>";

            var sh=document.getElementById('sampleHolder');         

            if(sampleCount==1){
              sample+=endCode;  
              sh.innerHTML=sample;
            }else{                          
                // adjust ending html

                // firefox is stripping out extender values here??  
                // save extender values
                // also mot/morph values

                var theEx=new Array();
                var theMot=new Array();
                var theMor=new Array();

                for(var i=1;i<=(sampleCount-1);i++){
                  theEx[i]=$("#extender_"+i.toString()).val();            
                    theMot[i]=$("#vspdMot_"+i.toString()).attr('checked');
                    theMor[i]=$("#vspdMor_"+i.toString()).attr('checked');
                }

                temp=sh.innerHTML;
                tempString=replace(temp,endCode,"");   
                sh.innerHTML=tempString+sample+endCode;

            }           

            var ef=getEdit();
            if(ef != -1){       // only paste values when entering a new sample         
                    if(sampleCount!=1){
                          // must value tics before pasting values!!
                          pasteTics(ticArray);
                            pasteValues(tArray);
                    }
            }   

            ticArray=[];
            tArray=[];

            // replace extender values  
            if(sampleCount>1){
                for(i=1;i<=(sampleCount-1);i++){
                    $("#extender_"+i.toString()).val(theEx[i]);
                    $("#vspdMot_"+i.toString()).prop("checked",theMot[i]);
                    $("#vspdMor_"+i.toString()).prop("checked",theMor[i]);
                }           

                // make the new sample "other"
                $("#extender_"+sampleCount.toString()).val("other");

                // if copy down extender is checked then apply to new sample
                if( $('#CE').is(':checked')){           
                    var lastCE=$("#extender_"+(sampleCount-1).toString()).val();    
                    $("#extender_"+sampleCount.toString()).val(lastCE);     
                }       

                if( $('#CVSPD').is(':checked')){            
                    var lastMot=$("#vspdMot_"+(sampleCount-1).toString()).attr('checked');
                    $("#vspdMot_"+(sampleCount).toString()).prop("checked",lastMot);
                }           

                if( $('#CMNM').is(':checked')){         
                    var lastMor=$("#vspdMor_"+(sampleCount-1).toString()).attr('checked');
                    $("#vspdMor_"+(sampleCount).toString()).prop("checked",lastMor);    
                }           

            }

             for(i=1;i<=maxIterations;i++){  
             //for(i=1;i<=sampleCount;i++){  
                  if(document.getElementById("sampleID_"+i.toString())){              
                        loadIconAnalysis( $("#sampleID_"+i.toString()).val() );
                    }   
             }

     } // end add sample 
```

这就是 addSample() 函数的调用方式和我的时间：

```
 for(i =1;i<=editSampleCount;++i){
                sseconds = new Date().getTime() / 1000;
                tempTime+="sample "+i.toString()+" start: "+sseconds.toFixed(3)+" ";
                $(document).ready(function() {
                    addSample();    
                });
                eseconds = new Date().getTime() / 1000;
                tempTime+="end: "+eseconds.toFixed(3)+" difference: "+(eseconds-sseconds).toFixed(3)+"<br>";
            } 
```

# jquery - AJAX data.length 到 var 不起作用

> ID：13959686
> 
> 赞同：3
> 
> 时间：2012-12-19T19:27:36.737
> 
> 标签：jquery, ajax

当我这样做时：

```
$.ajax({
    url: purl,
    dataType: 'json',
    success: function(data){
        alert(data.length);
    }
}); 
```

我收到长度计数的警报。

但是当我这样做时......

```
$.ajax({
    url: purl,
    dataType: 'json',
    success: function(data){
        items = data.length;
    }
});

alert(items); 
```

将长度设置为全局变量，它不想玩得很好。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:28:49.280

AJAX 部分不会立即发生；发生`alert`在 AJAX 回调有时间为`items`.

从 jQuery 1.5 开始，`$.ajax`返回一个实现 Promises 接口的对象。因此，您可以在`.done`需要确保在执行代码之前已解决承诺的任何时候调用该方法：

```
​var promise = $.ajax({/*...*/});

promise.done(function(data){
    // Only works if the promise is resolved
}); 
```

例如，假设我们直接创建了一个延迟对象：

```
var promise = $.Deferred(); 
```

然后我们告诉它不要在五秒钟后解决：

```
setTimeout(function(){ 
    promise.resolve("Foo");
}, 5000); 
```

但随后我们绑定了一个处理程序来响应对`document`对象的点击：

```
$(document).on("click", function () {
    promise.done(function(data){
        alert("Data is " + data);
    });
}); 
```

请注意，我们将警报放在匿名函数中，并仅*在*promise 解决后将其传递`promise.done`给执行。

 *这会建立一个队列，直到该承诺得到解决。如果我在前五秒钟内点击四次，什么都不会发生，但是一旦该承诺解决，我将看到四个警报框一个接一个地出现。

现在承诺已经解决，任何进一步的点击（等待 5 秒后）都会立即采取行动。

演示：http: [//jsfiddle.net/w7swE/1/](http://jsfiddle.net/w7swE/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:33:10.587

存储对 jqXHR 的引用（它也像一个 promise 对象），然后您可以使用它稍后获取数据。

```
var items = $.ajax({
    url: purl,
    dataType: 'json'
});

items.done(function(data){
    alert(data.length);
});

// ... somewhere else, such as in a click event
$("#someEl").click(function(){
    items.done(function(data){
        alert(data.length);
    });
}); 
```

任何时候您需要数据，添加完成回调`items`并在该回调中使用数据。*

# git - 使用 git 查看如何使用 lib

> ID：13959689
> 
> 赞同：-5
> 
> 时间：2012-12-19T19:27:42.127
> 
> 标签：git, github

当您需要查看其他人如何使用特定库时，您能告诉我您会做什么吗？

关于 git 的使用，我是一个 n00b，但我有一个问题。是否可以看到其他人如何使用 github 或任何存储库服务中的特定开源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:30:23.903

您可以在该库中搜索该库或该库中常用的函数，并希望找到使用它的程序的源代码。

Git/Github 并不能真正帮助您这样做。

# java - 在槌中使用带有朴素贝叶斯分类器的 svmlight 样式数据

> ID：13959697
> 
> 赞同：0
> 
> 时间：2012-12-19T19:28:21.080
> 
> 标签：java, svm

我有几个问题要问
1) 在 svmlight 样式的数据中有（目标特征：值特征：值 ...）我知道是什么`feature`，`value`但它是什么`target`？这是什么意思？我想知道这一点，因为我计划制作一个将这些数据写入其中的文本文件。

2）在一个文件中还有多行（目标特征：值特征：值）每行代表一个文档吗？假设我有 50 个文档，那么每一行代表一个文档？

3）在我用存储在其中的数据制作这个文本文件之后`svmlight-style`，我想将它传递到`Naive Bayes Classifier`in `MALLET`. 这将如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:57:54.893

根据官方 SVMLight 网站，训练集由行组成

```
<line> .=. <target> <feature>:<value> <feature>:<value> ... <feature>:<value> # <info> 
```

其中每一行定义如下：

```
<target> .=. +1 | -1 | 0 | <float> 
<feature> .=. <integer> | "qid"
<value> .=. <float>
<info> .=. <string> 
```

“在分类模式下，目标值表示示例的类别。目标值+1表示正例，-1表示负例。因此，例如，行

```
-1 1:0.43 3:0.12 9284:0.2 # abcdef 
```

指定一个负例，其中特征编号 1 的值为 0.43，特征编号 3 的值为 0.12，特征编号 9284 的值为 0.2，所有其他特征的值为 0。此外，字符串 abcdef 与向量一起存储，它可以作为为用户定义的内核提供附加信息的一种方式。类别标签 0 表示该示例应使用转导进行分类。通过转导分类的示例的预测被写入通过 -l 选项指定的文件。预测的顺序与训练数据中的顺序相同。"

有关详细信息，请参阅官方网站[http://svmlight.joachims.org/](http://svmlight.joachims.org/)。

# c++ - 声明一个继承自 C++ 中不同类模板的类模板

> ID：13959698
> 
> 赞同：5
> 
> 时间：2012-12-19T19:28:32.440
> 
> 标签：c++, templates, inheritance

抱歉标题令人困惑，但我会在这里尝试详细说明。我无法通过搜索找到这个特殊问题，所以如果我错过了，请指出我正确的线程......

我有一个依赖于我用作基类的一个参数的类模板：

```
template <class TVertex>
class DrawExecutorDX11
{
public:
    DrawExecutorDX11( );
    virtual ~DrawExecutorDX11( );
    void AddVertex( const TVertex& vertex );

protected:
    TGrowableVertexBufferDX11<TVertex> VertexBuffer;
}; 
```

我要做的就是继承这个类模板，同时给子类添加另一个类模板参数。我对语法的尝试是这样的：

```
template <class TVertex, class TInstance>
class DrawInstancedExecutorDX11<TInstance> : public DrawExecutorDX11<TVertex>
{
public:
    DrawInstancedExecutorDX11( );
    virtual ~DrawInstancedExecutorDX11( );

    void AddInstance( const TInstance& data );

protected:
    TGrowableVertexBufferDX11<TInstance> InstanceBuffer;
}; 
```

我希望这个配置可以让我像这样声明一个子类模板的实例：

```
DrawInstancedExecutorDX11<VertexStruct,InstanceStruct> myExecutor; 
```

但是，VS2012 甚至不考虑编译子类，并表明它在 DrawInstancedExecutorDX11 类之后需要一个分号。老实说，我以前从未尝试过这种类型的模板排列，所以我想知道是否有其他人这样做过。如果是这样，是否存在我正在犯的基本语法错误或其他一些问题？提前感谢您提供的任何帮助或指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:49:46.810

如果您在类名之后使用任何尖括号，则您声明的是模板特化，而不是主模板。正确的主要类模板是：

```
template <class TVertex, class TInstance>
class DrawInstancedExecutorDX11 : public DrawExecutorDX11<TVertex>
{
    //...
}; 
```

在该类内部，您可以引用模板参数`TVertex`和`TInstance`，在该类外部您可以使用`DrawInstancedExecutorDX11<SomeVtxType, SomeInstType>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:32:09.977

您试图在没有声明主模板定义的情况下声明部分特化。在`DrawInstancedExecutorDX11<TInstance>`你需要声明之前

```
template <class TVertex, class TInstance>
class DrawInstancedExecutorDX11; 
```

这应该可以解决您的第一个编译器错误，但之后会失败。我不确定你实际上想用这个来完成什么。看来您只需要：

```
template <class TVertex, class TInstance>
class DrawInstancedExecutorDX11 : public DrawExecutorDX11<TVertex>
{ ... }; 
```

# javascript - Javascript删除特定行

> ID：13959699
> 
> 赞同：0
> 
> 时间：2012-12-19T19:28:38.987
> 
> 标签：javascript, dom

我正在尝试获取一个脚本来删除表格行。

```
var i = 1;

function addURL() {
    var tr = document.createElement('tr');
    tr.setAttribute("id", "url_row_" + ++i);
    var td = tr.appendChild(document.createElement('td'));
    td.style.valign = 'middle';

    td = tr.appendChild(document.createElement('td'));
    var input = td.appendChild(document.createElement('input'));
    input.name = 'url[]';
    input.type = 'text';
    input.size = '40'
    var node = document.getElementById('myTable').tBodies[0];
    node.insertBefore(tr, node.children[3]);

    var link = document.createElement("a");
    link.setAttribute("href", ""); 
    link.setAttribute("style", "text-decoration: none;");
    link.setAttribute("onClick", "removeURL('');return false;");
    td = tr.appendChild(document.createElement('td'));
    td=td.appendChild(link)
    td.appendChild(document.createTextNode('-'));
}

function removeURL(divNum) {
    var d = document.getElementById('myTable').tBodies[0];
    var olddiv = document.getElementById(divNum);
    d.removeChild(olddiv);
} 
```

这可以生成任意数量的 url_row_(number) 文本字段。我只是不知道如何删除这些行。

我知道做

```
link.setAttribute("onClick", "removeURL('url_row_2');return false;"); 
```

将删除 url_row_2，但是我可以在 url_row_2 中放置什么来获取该行的任何 ID，或者执行此操作的正确代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:50:15.580

为此，您将使用字符串连接来连接`i`到处理程序字符串以定位给定的`tr`.

```
link.setAttribute("onclick", "removeURL('url_row_" + i + "');return false;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:43:03.163

不要`setAttribute`用于事件监听器。查看[quirksmode.org 上的事件处理简介](http://quirksmode.org/js/introevents.html)，尤其是[简单事件注册模型](http://quirksmode.org/js/events_tradmod.html)。此外，您可以只使用事件对象中的信息来识别要删除的行：

```
function clickHandler(event) {
    var anchor = this; // == event.targetElement
    var tr = anchor.parentNode.parentNode;
    tr.parentNode.removeChild(tr);
    event.preventDefault(); // do not follow the href
}

function addURL() {
    …

    var link = document.createElement("a");
    link.setAttribute("href", "#"); 
    link.setAttribute("style", "text-decoration: none;");
    link.onclick = clickHandler;
    td = tr.appendChild(document.createElement('td'));
    td.appendChild(link)
    link.appendChild(document.createTextNode('-'));
} 
```

# flash - Flexicious 中的自定义 DateComboBox

> ID：13959701
> 
> 赞同：0
> 
> 时间：2012-12-19T19:28:46.053
> 
> 标签：flash, combobox, mxml

我想在我的 Flash Builder 4.5 程序中有一个特定 DateComboBox 的下拉列表，以具有我选择的特定字体和背景颜色。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:04:01.740

DateComboBox 是一个扩展的 ComboBox。您可以像定义常规组合框一样为其定义样式。

```
@namespace controls "com.flexicious.controls.*";
controls|DateComboBox{
    alternating-item-colors:#FFFFFF,#FFFFFF;
    item-selection-color:#D3DFEA;
    item-roll-over-color:#DFE5EB;
    font-family:"tahoma";
    font-size:12;
    background-color:#FFFFFF;
    background-alpha:0;
    drop-shadow-visible:false;
    drop-shadow-enabled:false;
    color:#000000;
    textInputStyleName:"blackText"

}

.blackText{
    color:#000000;

} 
```

# c++ - 如果使用向量删除叠瓦式自己容器的析构函数中的 char* 成员，则崩溃

> ID：13959702
> 
> 赞同：2
> 
> 时间：2012-12-19T19:28:47.087
> 
> 标签：c++, string, vector, dereference

在那之前我习惯了应付，在这里我正在尝试使用向量构建我自己的容器类。我的工作需要它。我正在使用**代码块 10.05**

```
class myclass
{
    public :
      vector<myclass> array;
      char * classname;
      ... 
```

**问题是，如果在析构函数中没有删除**我的班级数据，我的班级数据会很好地显示在屏幕上。如果我删除类名，我的函数 show() 会显示奇怪的字符。我想它来自我构建对象的方法和当我将它们作为参数传递时的范围问题。

```
 myclass::~myclass()
 {
    //if(classname) delete [] classname;
 } 
```

这就是它在**构造函数中的初始化方式：**

```
 myclass::myclass(long lvl = 0, const char name[] = "undefined")
    :ID(++ ID_counter)
    {
       level = lvl;

       int namelength = strlen(name);
       classname = new char[namelength + 1];
       strcpy(classname, name);
    } 
```

**add_content(const myclass & c)**应该复制 c.array 的元素并在 this->array 中“push_back”它们我发现我们有可能将一个没有名称的对象作为参数：**mycontainer.add_content （我的班级（3,5））；** 它有效，但我对它应该具有的范围持怀疑态度

```
> int main()
>     {
>        myclass mycontainer(0);
>        mycontainer.add_content(myclass(3,5));
>     ... 
```

这是**完整的代码：**

```
#include <vector>
#include <iostream>
using namespace std;

class myclass
{
  public :

   vector<myclass> array;
   static long ID_counter;
   long ID;
   long level;
   char * classname;

   myclass(int n, long lvl, const char name[]); //push_back n elements, lvl = 0, name = "undefined"
   myclass(long lvl, const char name[]); //lvl = 0, name = "undefined"
   myclass::~myclass();

   void set_level(long lvl); //recursive function, go down the tree
   void add(int n); //push_back n elements
   void add(const myclass & c); //push_back and set back the levels
   void add_content(const myclass & c); //push_back all the c.array[i] and set back the levels

   void show();

   template <typename T> myclass & operator[](const T it){ return array[it]; }
};

long myclass::ID_counter = 0;

myclass::myclass(long lvl = 0, const char name[] = "undefined")
:ID(++ ID_counter)
{
   level = lvl;

   int namelength = strlen(name);
   classname = new char[namelength + 1];
   strcpy(classname, name);
}
myclass::myclass(int n, long lvl, const char name[] = "undefined")
:ID(++ ID_counter)
{
   level = lvl;

   int namelength = strlen(name);
   classname = new char[namelength + 1];
   strcpy(classname, name);

   for(int i = 0; i < n; i++) array.push_back( myclass(this->level + 1) );
}
myclass::~myclass()
{
   //if(classname) delete [] classname; //there is the point !
}

void myclass::add(int n = 1)
{
   for(int i = 0; i < n; i++) array.push_back( myclass(level + 1) );
}

void myclass::add(const myclass & c)
{
   array.push_back(c);
   array[array.size() - 1].set_level(level + 1);
}

void myclass::add_content(const myclass & c)
{
   for(int i = 0; i < c.array.size(); i++)
   {
      array.push_back(c.array[i]);
      array[array.size() - 1].set_level(level + 1);
   }
}

void myclass::set_level(long lvl)
{
   level = lvl;
   for(int i = 0; i < array.size(); i++) array[i].set_level(level + 1);
}

void myclass::show()
{
   cout << "ID : " << ID << "\tLvl : " << level << "\t Classname : " << classname << endl;
}

int main()
{
   myclass mycontainer(0); //ground level
   mycontainer.add_content(myclass(3,5)); //the 3 elements level 5 should be reset to 0+1

   mycontainer.show();

   for(int i = 0; i < mycontainer.array.size(); i++)
   {
      mycontainer[i].show();

      for(int j= 0; j < mycontainer[i].array.size(); j++)
         mycontainer[i][j].show();
   }
   cout << "\ncheckpoint\n";
   system("PAUSE"); //press any key to crash!
   return 0;
} 
```

这里**没有在析构函数中删除 *classname**，程序会这样：

```
ID : 1  Lvl : 0  Classname : undefined
ID : 3  Lvl : 1  Classname : undefined
ID : 4  Lvl : 1  Classname : undefined
ID : 5  Lvl : 1  Classname : undefined

checkpoint
Appuyez sur une touche pour continuer... 
```

**删除**和一些坏字符出现崩溃：

```
ID : 1  Lvl : 0  Classname : undefined
ID : 3  Lvl : 1  Classname : ░(?
ID : 4  Lvl : 1  Classname : ░(?
ID : 5  Lvl : 1  Classname : ░(?

checkpoint
Appuyez sur une touche pour continuer...

Process returned -1073741819 (0xC0000005)   execution time : 29.651 s
Press any key to continue. 
```

我试图研究一些关于论点和指针的原则，但这种语言太经验主义了，没有意义。感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:42:26.647

您有一个原始指针，并且没有定义复制构造函数或赋值运算符。这意味着您将获得自动生成的版本，这是您不想要的。回顾三法则。

解决方案 #1：实现正确的复制构造函数和赋值运算符。

解决方案 #2：更改`char * classname`为`std::string classname`. 现在自动生成的复制构造函数和赋值运算符就可以工作了。额外的好处：你不需要使用`new`，你不需要使用`delete`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:48:16.547

您应该定义复制构造函数。

我的调试器在这里引发错误：

```
for(int i = 0; i < n; i++) array.push_back( myclass(this->level + 1) ); 
```

我们在这里看到，`myclass`创建新对象，然后复制（克隆）到`array`中，然后像任何局部变量一样销毁原始对象。

因此，我们有两个具有相同指针的实例：一个被销毁，另一个在内部`array`，由默认复制构造函数创建，它只复制原始内存。所以，里面的实例`array`是无效的，因为析构函数已经在它上面运行了。

**编码**

下面的附加构造函数将解决这种情况：

```
myclass::myclass(const myclass& other) 
:ID(++ ID_counter) 
{
   level = other.level;

   int namelength = strlen(other.classname);
   classname = new char[namelength + 1];
   strcpy(classname, other.classname);
} 
```

（上面是所谓的“复制构造函数”；是的，当然你应该遵守“三规则”以避免所有潜在的错误）

# java - 通过 Selenium WebDriver 接受“共享位置”浏览器弹出窗口

> ID：13959704
> 
> 赞同：1
> 
> 时间：2012-12-19T19:28:50.623
> 
> 标签：java, selenium, geolocation

我用谷歌搜索过，搜索过 SO，并查看了 Selenium Javadocs，但没有找到这个问题的答案。

**当网站试图跟踪您的位置时，有什么方法可以使用 Selenium WebDriver 接受浏览器（Chrome、Firefox、IE）显示的那些“共享位置”弹出窗口？**

另外，我正在用 Java 编写我的 Selenium 代码并使用 Selenium 客户端驱动程序。

我尝试运行 Selenium IDE（Firefox 插件）并记录我接受 Firefox 弹出的“共享位置”弹出窗口，但 Selenium IDE 中没有记录任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:43:31.870

如果弹出窗口是浏览器的一部分，那么答案是否定的。如果您想与第二个窗口（不是浏览器的一部分）中显示的内容进行交互，那么可以。应该有一个 .switch_to 方法。

尽管如果您可以让此页面记住您的设置，您可以在创建浏览器的新实例时加载配置文件。

在 Windows 中，您可以通过转到开始菜单并在此处键入“firefox.exe -p”在 Firefox 中创建配置文件，您可以创建一个新配置文件，您可以在其中选中“记住我复选框”。

至于在 Java + Selenium 中加载配置文件，我不确定您将如何执行此操作。我使用 Ruby + Selenium，这就是我的做法。

```
$driver = Selenium::WebDriver.for :firefox, :profile => "MyProfile" 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-12T13:27:06.447

我已经在 Firefox 中找到了解决方案，但仍在使用 chrome。下面的代码应该有助于获取您在地图上的确切位置：

```
 ProfilesIni profile = new ProfilesIni();
    FirefoxProfile myprofile = profile.getProfile("default");
    myprofile.setPreference("geo.prompt.testing", true);
    myprofile.setPreference("geo.prompt.testing.allow", true);
    myprofile.setPreference("geo.wifi.uri", "https://location.services.mozilla.com/v1/geolocate?key=%MOZILLA_API_KEY%");
    DesiredCapabilities capabilities = DesiredCapabilities.firefox();
    capabilities.setCapability(FirefoxDriver.PROFILE,myprofile); 
```

之后只需在驱动程序方法中传递 FirefoxProfile 实例，如下所示（对于上面的代码）：

```
 driver = new FirefoxDriver(myprofile); 
```

那应该没问题，写下你想要的所有其他东西并执行！

# asp.net-mvc-4 - MVC mobile android 无法识别为移动设备

> ID：13959706
> 
> 赞同：1
> 
> 时间：2012-12-19T19:28:54.230
> 
> 标签：asp.net-mvc-4

我有一个带有 .mobile.cshtml 的移动网站，但没有在 global.asax 中放置任何内容 iphone 可以工作并加载我的移动视图。我看到我可能需要添加opera mobi。如果它们都进入同一个移动视图，我是否需要指定每个移动类型？我需要做什么才能使其适用于android？

我在手动输入移动设备列表的地方添加了代码。我认为 mvc mobile 会开箱即用。我缺少什么我需要指定设备列表。只是在 global.asax 中说 ismobiledevice 不起作用 谢谢

# c# - SQL Server 2008 R2 上的身份验证设置是否会对性能产生影响？

> ID：13959707
> 
> 赞同：11
> 
> 时间：2012-12-19T19:28:53.807
> 
> 标签：c#, asp.net, sql-server, performance, authentication

好吧这是第一种方法

```
public static string srConnectionString = "server=localhost;database=myDB; "+
" uid=sa;pwd=myPW;"; 
```

这是第二种方法

```
public static string srConnectionString = "server=localhost;database=myDB; "+
" integrated security=SSPI;persist security info=False; Trusted_Connection=Yes;"; 
```

这两个连接字符串之间是否有任何性能差异或任何其他差异？

在这里我的 sql 连接类有什么建议吗？

```
using System;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Data;

public static class DbConnection

{
    public static string srConnectionString = "server=localhost; database=myDB; uid=sa; pwd=myPW;";

    public static DataSet db_Select_Query(string strQuery)
    {
        DataSet dSet = new DataSet();
        if (strQuery.Length < 5)
            return dSet;
        try
        {
            using (SqlConnection connection = new SqlConnection(srConnectionString))
            {
                connection.Open();
                using (SqlDataAdapter DA = new SqlDataAdapter(strQuery, connection))
                {
                    DA.Fill(dSet);
                }
            }
            return dSet;
        }
        catch
        {
            using (SqlConnection connection = new SqlConnection(srConnectionString))
            {
                if (srConnectionString.IndexOf("select Id from tblAspErrors") != -1)
                {
                    connection.Open();
                    strQuery = strQuery.Replace("'", "''");

                    using (SqlCommand command = new SqlCommand("insert into tblSqlErrors values ('" + strQuery + "')", connection))
                    {
                        command.ExecuteNonQuery();
                    }
                }
            }
            return dSet;
        }
    }

    public static void db_Update_Delete_Query(string strQuery)
    {
        if (strQuery.Length < 5)
            return;
        try
        {
            using (SqlConnection connection = new SqlConnection(srConnectionString))
            {
                connection.Open();
                using (SqlCommand command = new SqlCommand(strQuery, connection))
                {
                    command.ExecuteNonQuery();
                }
            }
        }
        catch
        {
            strQuery = strQuery.Replace("'", "''");
            using (SqlConnection connection = new SqlConnection(srConnectionString))
            {
                connection.Open();
                using (SqlCommand command = new SqlCommand("insert into tblSqlErrors values ('" + strQuery + "')", connection))
                {
                    command.ExecuteNonQuery();
                }
            }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:55:54.340

性能差异微不足道，可以忽略不计。身份验证检查是

1.  ...仅在登录时执行。不会为每个查询重新检查连接。然而，使用连接池，连接会被多次验证和重置，很可能是几乎每个查询
2.  ...与针对 Active Directory 检查域的每个文件访问和其他活动相同

仅供参考，这两个设置是相同的（使用一个或另一个）：

> 集成安全=SSPI
> Trusted_Connection=Yes

# java - HttpClient 4 的代理设置不起作用

> ID：13959708
> 
> 赞同：0
> 
> 时间：2012-12-19T19:28:54.493
> 
> 标签：java, proxy, httpclient, proxy-authentication, http-status-code-407

我正在使用 Apache HttpClient 库连接到 url。我正在做的网络有一个安全代理。当我使用 java.net 包连接到 url 时，我只需要添加

```
System.setProperty("http.proxyHost", proxy);
System.setProperty("http.proxyPort", proxyPort); 
```

不需要传递代理用户名和密码，但是当我尝试通过 httpclient 连接时，我收到 407**代理身份验证错误**。我的代码是：

```
HttpHost proxy = new HttpHost("xyz.abc.com",8080,"http");
HttpClient httpclient = new DefaultHttpClient();
httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY,proxy); 
```

代理正在使用 NTML 身份验证。我不想传递用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:42:14.710

我已经升级到**httpclient 4.2**，并且这个版本有开箱即用的 NTML 支持。只需在代码中添加以下几行

```
HttpClient httpclient = new DefaultHttpClient();
NTCredentials creds = new NTCredentials("user", "pwd", "myworkstation", "microsoft.com");
httpclient.getCredentialsProvider().setCredentials(AuthScope.ANY, creds); 
```

如需进一步阅读 H​​ttpclent 身份验证方案，您可以参考[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html#d5e947](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html#d5e947)

但是我的问题仍然悬而未决，为什么 HttpClent 没有像简单的 java 程序那样选择系统代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T11:46:30.723

为了获取系统属性，您可以使用[SystemDefaultHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/SystemDefaultHttpClient.html)而不是 DefaultHttpClient。

从 HttpClient 4.3 开始，此类已被弃用，取而代之的是[HttpClientBuilder](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html)：

```
HttpClient hc = new HttpClientBuilder().useSystemProperties().build(); 
```

# xcode - 停止 xcode 索引

> ID：13959709
> 
> 赞同：31
> 
> 时间：2012-12-19T19:28:56.053
> 
> 标签：xcode

我一直在使用 xCode 4.5.2，并且注意到如果您正在编制索引，则需要停止一切并让它完成工作，否则您会陷入困境。这成了一个问题，因为这个项目很大，而且索引需要很长时间才能完成，而且它会不断地做。一个例子是它索引了整个项目，在我对这个项目做了一点工作之后，它开始重新索引了几乎 75% 的项目。我检查了源代码控制，在我处理它的时间里，这个项目没有任何变化。

有没有办法完全停止索引，或者减少索引的次数？关闭索引有什么缺点吗？我在之前的问题中读过，据说它阻止了自动完成和搜索项目。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-19T19:32:04.413

只需在终端中运行此命令即可关闭索引：

```
defaults write com.apple.dt.XCode IDEIndexDisable 1 
```

要重新打开它，请运行以下命令：

```
defaults write com.apple.dt.XCode IDEIndexDisable 0 
```

（注意：显然您需要删除此键才能使更改生效，但是，我只使用了上面的命令并且效果很好。所以如果执行上述操作不起作用，请尝试删除该键）

编辑

对不起，错过了部分问题。是的，它会让搜索变得不那么快。也许自动完成将被禁用。索引是让 Xcode 快速记住您所做的事情的原因。将其关闭会使其更难使用，但会缩短加载时间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-01-24T11:50:54.137

**对于Xcode 10.1**，您想要这个的原因是什么（我的是“发生内部错误。编辑功能可能受到限制”）：

```
defaults write com.apple.dt.Xcode IDEIndexDisable -bool true 
```

关闭 Xcode，运行它，打开 Xcode。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-02T16:05:38.070

如果您正在处理一个大型项目并使用 cmake 生成 xcodeproj，那么在向其中添加大型二进制文件时会遇到问题。如果 cmake 无法识别扩展名，默认情况下会将它们标记为“源代码”！

...然后这些二进制文件将被 xcode 索引，这意味着您的机器会不断索引（并且每次重新生成工作空间时都从头开始）。文件中的查找也不起作用（它只是挂起）。

一种简单的解决方案是标记您的二进制文件并告诉 xcode 忽略它们，例如像这样（cmake 3.2 及更高版本，否则不支持 XCODE_EXPLICIT_FILE_TYPE）：

```
# fill cmake-variable with some files
file(GLOB MYGAME_BINARIES RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "binaries/*")
# tag them as "not-sourcecode" ( maybe there is sth better than 'compiled', but it worked for my purpose)
set_source_files_properties( ${MYGAME_BINARIES} PROPERTIES XCODE_EXPLICIT_FILE_TYPE "compiled" ) 
```

# log4j - Log4j 国际化

> ID：13959710
> 
> 赞同：1
> 
> 时间：2012-12-19T19:29:01.050
> 
> 标签：log4j

Log4j 文档说它支持国际化，但没有提供有关如何实现这一点的任何细节。有没有人在这方面工作或可以提出一些关于这方面的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:32:22.733

你熟悉[SLF4J](http://www.slf4j.org)吗？它可以与 log4j 结合使用。SLF4J 支持建立在[cal10n](http://cal10n.qos.ch/)项目之上的[本地化。](http://slf4j.org/localization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:30:13.357

I never used it but the feature seems to be provided by the [Category.l7dlog](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Category.html#l7dlog%28org.apache.log4j.Priority,%20java.lang.String,%20java.lang.Object%5B%5D,%20java.lang.Throwable%29) methods (added in [Release 0.8.4 - 2000-05-01](http://logging.apache.org/log4j/1.2/changes-report.html#Release_0.8.4_-_2000-05-01)).

As I never used it you have to search for more information on your own or switch to an up to date logging framework like e.g. [slf4j](http://www.slf4j.org/localization.html) with better documentation.

# javascript - 3维数组Javascript

> ID：13959714
> 
> 赞同：1
> 
> 时间：2012-12-19T19:29:11.083
> 
> 标签：javascript, html

我有一个`string`我正在使用`string.split(' ');`的拆分，以便将字符串转换为数组。

假设我有这两个表，`table1`并且`table2`.

```
<table border="1" id="table1">
    <tr>
        <th colspan="2">Image One</th>
    </tr>
    <tr>
        <td style="width:40%;"><img src="airplane.jpg" alt="Image 1"></td>
        <td>
            <dl>
              <dt>airplane</dt>
              <dt>flight</dt>
              <dt>travel</dt>
              <dt>military</dt>
              <dt>word war</dt>
              <dt>GI</dt>
            </dl>
        </td>
    </tr>
</table>

<table border="1" id="table2">
    <tr>
        <th colspan="2">Image Two</th>
    </tr>
    <tr>
        <td style="width:40%;"><img src="apple.jpg" alt="Image 1"></td>
        <td>
            <dl id="tags">
              <dt>red</dt>
              <dt>apple</dt>
              <dt>round</dt>
              <dt>fruit</dt>
              <dt>healthy</dt>
              <dt>doctor</dt>
            </dl>
        </td>
    </tr>
</table> 
```

现在出于测试目的，我有一个 id 的`tags`on `table2`'s `dl`。

我正在使用一个函数将`DL`(#tags) 转换为一个数组

```
function getArray(id) {
var node, list, arrValue;

    array = [];
    for (node = document.getElementById(id).firstChild;
        node;
        node = node.nextSibling) {
        if (node.nodeType == 1 && node.tagName == 'DT') {
            array.push(node.innerHTML);
        }
    }
    console.log(array)
} 
```

为了对照我的原件检查它`string`，看看是否有任何值匹配。但是，我将要检查多个`DT`'s `string`。将所有表添加到 3d 数组中然后检查 3d 数组中的值是否正确`string`？还是有更好的方法？

**更新**

问题是：

我最终将有一张充满图像和标签的表格。本质上，我希望能够根据我的字符串（将被分成一个数组）搜索这些标签，然后返回字符串中标签最多的图像。我试图找出最好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:34:57.003

而不是一个数组，我会使用 an`Object`来存储标签列表，其中键是标签，值是无关紧要的。

这将为您提供 O(1) 查找来检查该列表中是否存在其他字符串，而不是使用 O(n) 查找`array.indexOf()`。

下面的函数将找到页面上的每个 DT，然后返回一个对象，其中包含从每个 DT 的文本到其父 DL 的 ID 的映射。

```
function makeMap() {
    var map = {};
    var dls = document.getElementsByTagName('DL');
    for (var i = 0, n = dls.length; i < n; ++i) {
        var dl = dls[i];
        var id = dl.id;
        var node = dl.firstChild;
        while (node) {
            if (node.nodeType == 1 && node.tagName == 'DT') {
                var tag = node.textContent || node.innerText; // latter for MSIE
                map[tag] = id;
            }
            node = node.nextSibling;
        }
    }
    return map;
} 
```

或者，在 jQuery 中（为了提高效率，混合了一些纯 JS）：

```
function makeMap2() {
    var map = {};
    var $dt = $('dl > dt');
    $dt.each(function() {
        var tag = this.textContent || this.innerText;
        map[tag] = this.parentNode.id;
    });
    return map;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:15:41.590

您不会使用 3 维数组，而只能使用带有表格及其标签的二维数组。或者，正如 Alnitak 已经提到的，更好的查找对象：

```
var map = {};
var dls = document.getElementsByTagName('dl');
for (var i = 0, i < dls.length; i++) {
    var tableid = dls[i].id; // identifier?
    var dts = dls[i].getElementsByTagName('dt'); // assuming you don't nest them
    for (var j = 0; j < dts.length; j++) {
        var text = dts[j].textContent || dts[i].innerText;
        var tags = text.split(/\s+/);
        for (var k=0; k<tags.length; k++)
            if (tags[k] in map)
                map[tags[k]].push(tableid);
            else
                map[tags[k]] = [tableid]; // an array
    }
}
/* now, map could look like this:
{
    word: ["table1"],
    war: ["table1"],
    red: ["table2"],
    double: ["table1", "table2"], // tags in more than one table
    …
}
*/ 
```

要获取字符串中标签最多的表，您现在可以使用这样的函数，该函数返回按标签出现排序的相应 tableid：

```
function getHighestTables(string) {
    var tags = string.split(/\s+/);
    var tablecounts = {};
    for (var i=0; i<tags.length; i++) {
        var tables = map[tags[i]] || [];
        for (var j=0; j<tables.length; j++) {
            var tableid = tables[j];
            if (tableid in tablecounts)
                tablecounts[tableid]++;
            else
                tablecounts[tableid] = 1;
        }
    }
/*  tablecounts might now look like this:
    {
        table1: 2
        table2: 5
    }
*/
    return Object.keys(tablecounts).sort(function (a, b) {
        return tablecounts[b] - tablecounts[a];
    });
} 
```

# excel - 在 Excel 2010 中使用 BeforeClose 和 ActiveX CheckBox 值

> ID：13959717
> 
> 赞同：0
> 
> 时间：2012-12-19T19:29:21.207
> 
> 标签：excel, vba, checkbox, activex

我试图阻止 excel 工作簿根据复选框的状态关闭。

我放置在“ThisWorkbook”中的示例代码：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    If CheckBox0.Value = "FALSE" Then
    b = MsgBox("Are you sure that you want to submit?", vbYesNo)
    End If
    If b = vbNo Then Cancel = True

End Sub 
```

目前，我收到运行时错误 424 ，需要对象，并且调试点位于 If`CheckBox0.Value.....`行。

我不确定我做错了什么，而且我不是普通的 VBA 用户。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:20:48.153

我认为您正在使用嵌入式复选框（ActiveX）。如果是这样，您需要指定复选框所在的工作表。您不能只说`Checkbox0`，因为您可以`Checkbox0`在多个工作表上。

另一件事是你不能检查，`"False"`因为它不是一个字符串，而是一个布尔值，所以你可以使用`False`，因为这是一个固有的 VBA 关键字。

这就是我认为您正在寻找的内容：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Dim b As Long
    If (Sheets("Sheet1").CheckBox1.Value = False) Then
        b = MsgBox("Are you sure that you want to submit?", vbYesNo)
    End If

    If b = vbNo Then Cancel = True
End Sub 
```

**编辑：**

忘记提及切换`"Sheet1"`复选框所在的工作表名称。

# java - 在没有任何摆动元素的情况下检测 JFrame 上的点击

> ID：13959719
> 
> 赞同：2
> 
> 时间：2012-12-19T19:29:38.397
> 
> 标签：java, swing, jframe, mouse-listeners

我想检测用户何时点击我的 JFrame。我做了相当多的研究，但只能找到有关单击 Swing 元素的信息。我希望你们能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:35:10.840

由于我无法将其放入评论中，因此我将其放在这里：

```
frame.getContentPane().addMouseListener(new MouseAdapter() {            
   @Override
   public void mouseClicked(MouseEvent e) {
      System.out.println("Click!");
   }
}); 
```

# mysql - 如何在名称字段中使用单个空格更新 mySQL 中的 200000 条记录

> ID：13959720
> 
> 赞同：3
> 
> 时间：2012-12-19T19:29:44.357
> 
> 标签：mysql, phpmyadmin

我的数据库中有超过 200000 条记录，其中包含客户姓名和信息。客户姓名在名字和姓氏之间有很大的空间。

```
ex.  1.ADAMS         CRAIG
     2\. GABRIEL       GEANETTE
     3\. KRANTZ        AUDREY 
```

我怎样才能消除两者之间的空间。喜欢

```
ex.  1.ADAMS CRAIG
     2.GABRIEL GEANETTE
     3.KRANTZ AUDREY 
```

任何帮助将不胜感激。

谢谢你，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:39:16.233

[取自以下答案](https://stackoverflow.com/a/2183056/643591)...并稍作修改以执行更新：

```
UPDATE YourTable
SET Name = 
        replace(
          replace(
             replace(
                LTrim(RTrim(Name)),         --Trim the field
             '  ',' |'),                    --Mark double spaces
          '| ',''),                         --Delete double spaces offset by 1
       '|','')                              --Tidy up
WHERE Name LIKE '%  %' 
```

所以在你的例子中......

```
ADAMS         CRAIG 
```

会成为...

```
ADAMS | | | | CRAIG 
```

而一旦特殊`|`令牌被移除，它就变成了……

```
ADAMS CRAIG 
```

最后一次删除`|`将处理偶数和奇数个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:45:56.647

```
mysql> select name from tmp;
+------------------------+
| name                   |
+------------------------+
| ADAMS         CRAIG    |
| GABRIEL       GEANETTE |
| KRANTZ        AUDREY   |
+------------------------+
3 rows in set (0.00 sec)

mysql> select concat(substr(name,1,locate(' ',name)), trim(substr(name,locate(' ', name)))) from tmp;
+-------------------------------------------------------------------------------+
| concat(substr(name,1,locate(' ',name)), trim(substr(name,locate(' ', name)))) |
+-------------------------------------------------------------------------------+
| ADAMS CRAIG                                                                   |
| GABRIEL GEANETTE                                                              |
| KRANTZ AUDREY                                                                 |
+-------------------------------------------------------------------------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:36:54.560

运行此查询几次，直到受影响的行变为 0。

```
UPDATE tbl
SET    col = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(col, '  ', ' '), '  ', ' '), '  ', ' '), '  ', ' '), '  ', ' '))
WHERE  col LIKE '%  %' 
```

将此查询转换为选择查询并进行测试。如果结果令人满意，请继续更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:27:47.203

作为所选答案的替代方案，此语句将从列中删除连续空格字符的跨度，并用单个空格字符替换空格。这仅对空格字符起作用，不需要任何特殊的“标记”字符（并且不需要特殊的“标记”字符不在源列中出现。

```
UPDATE mytable
   SET mycol =
       REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
         mycol
       ,SPACE(21),' ')
       ,SPACE(13),' ')
       ,SPACE(8),' ')
       ,SPACE(5),' ')
       ,SPACE(3),' ')
       ,SPACE(2),' ')
 WHERE mycol LIKE '%  %' 
```

要将此表达式作为测试运行，请在 SELECT 语句中使用它：

```
SELECT REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
       REPLACE(
         mycol
       ,SPACE(21),' ')
       ,SPACE(13),' ')
       ,SPACE(8),' ')
       ,SPACE(5),' ')
       ,SPACE(3),' ')
       ,SPACE(2),' ') AS new_mycol
    FROM mytable t
   WHERE t.mycol LIKE '%  %' 
```

这可以通过更大范围的空格字符来扩展，以减少替换。替换从连续空格字符的最大跨度开始，然后替换逐渐变小，以尽可能有效地捕获所有出现的空格。（这不是最“有效”的算法，但它适用。）

# php - php mvc搜索实现

> ID：13959735
> 
> 赞同：0
> 
> 时间：2012-12-19T19:30:28.623
> 
> 标签：php, search, get, url-routing

我开始使用 php 最小 MVC 实现。但是对于 MVC，我发现很难使用传统的 HTML 表单在 GET 方法中传递参数。

例如我的 mvc 路径调用是“ `www.example.com/?route=products/search/balck shirt`”。

我想使用 html 表单在 GET 方法中传递搜索词“黑色衬衫”。

```
<form method="GET" action="www.example.com/?route=products/search/">
<input type="text" name="src" />
<input type="submit" />
</form> 
```

这将导致调用为“ `www.example.com/?src=black%20shirt`”。我正在失去`"?route="`一部分。我该如何解决这个问题？我知道 POST 是首选方法，但在自然网站中，搜索词应附加到 url，以便可以在其他地方共享链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:32:49.457

您必须确保 GET 参数被[urlencoded](http://en.wikipedia.org/wiki/Percent-encoding)。这将导致网址 www.example.com/?route=products/search/black%20shirt （注意 %20）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T19:39:27.393

使用 js/jquery 作为获取请求发送并根据您的 mvc 需要构造 url，如果我正确理解了您的问题，您需要使其与 mvc 一起使用。

```
<form action="javascript:;">
<input type="text" name="route" value="products/search/">
<input type="text" name="src" />
<input type="submit" />
</form>

<script>
$(function(){
    $("input[type='submit']").on("click",function(){

        if($("input[name='src']").val().length>0)
        {
            window.location=$("input[name='route']").val() + $("input[name='src']").val();
        }

    });
})
</script> 
```

# upload - WCAG 兼容上传，带进度条

> ID：13959736
> 
> 赞同：4
> 
> 时间：2012-12-19T19:30:33.770
> 
> 标签：upload, progress-bar, wcag

我的搜索显示了令人眼花缭乱的用于上传文件的小部件，同时向用户提供了一些进度反馈。

[Uploadify](http://www.uploadify.com/)和[Fineuploader](http://fineuploader.com/)是很好的例子......我很想使用......

但是这些和其他似乎缺少一些基本的键盘功能。我的网站需要符合 WCAG AA。有谁知道我可以使用的上传器（带进度条）？我是否错过了上述工具中的某些内容？

# c++ - 确定 HID 设备的系统路径

> ID：13959740
> 
> 赞同：1
> 
> 时间：2012-12-19T19:31:12.563
> 
> 标签：c++, linux, usb, hid, mount-point

我正在寻找一种方法来动态查找 HID (USB) 设备的系统路径。

在我的 Ubuntu 机器上，它是 /dev/usb/hiddevX，但我想有些发行版会将 hiddevices 安装在其他地方。

更具体地说：我需要在 C 程序中打开 HID 设备 - 这应该适用于每个系统，无论设备安装在哪里。

当前功能：

```
int openDevice(int vendorId, int productId) {

    char devicePath[24];
    unsigned int numIterations = 10, i, handle;

    for (i = 0; i < numIterations; i++) {

        sprintf(devicePath, "/dev/usb/hiddev%d", i);

        if((handle = open(devicePath, O_RDONLY)) >= 0) {

            if(isDesiredDevice(handle, vendorId, productId))
                break;

            close(handle);
        }
    }

    if (i >= numIterations) {
        ThrowException(Exception::TypeError(String::New("Could not find device")));
    }

    return handle;
} 
```

它运作良好，但我不喜欢硬编码的*/dev/usb/hiddev*

**编辑**：事实证明，[其他一些程序员](http://code.ohloh.net/file?fid=MNYcBQd6-mkLvMfi7ac0qezg8nQ&cid=uGn82ZxBSA8&s=%22%2Fdev%2Fusb%2Fhiddev%22&pp=0&fl=C&fl=C%2B%2B&ff=1&filterChecked=true&mp=1&ml=1&me=1&md=1&browser=Default#L137)使用 /dev/usb/hid/hiddevX 和 /dev/hiddevX 的后备，所以我也内置了这些后备。

更新方法：

```
/**
 * Returns the correct handle (file descriptor) on success
 *
 * @param int vendorId
 * @param int productId
 * @return int
 */
int IO::openDevice(int vendorId, int productId) {

    char devicePath[24];

    const char *devicePaths[] = {
        "/dev/usb/hiddev\%d",
        "/dev/usb/hid/hiddev\%d",
        "/dev/hiddev\%d",
        NULL
    };

    unsigned int numIterations = 15, i, j, handle;

    for (i = 0; devicePaths[i]; i++) {

        for (j = 0; j < numIterations; j++) {

            sprintf(devicePath, devicePaths[i], j);

            if((handle = open(devicePath, O_RDONLY)) >= 0) {

                if(isDesiredDevice(handle, vendorId, productId))
                    return handle;

                close(handle);
            }
        }
    };

    ThrowException(Exception::Error(String::New("Couldn't find device!")));
    return 0;
}; 
```

# c++ - 比较两组 std::weak_ptr

> ID：13959743
> 
> 赞同：4
> 
> 时间：2012-12-19T19:31:20.247
> 
> 标签：c++, c++11, compare, std, stdset

`weak_ptr`我正在尝试使用 GCC 4.7.2比较两组 C++11 。下面的代码显示了重现错误的最小可能样本：

```
std::set<std::weak_ptr<int>, std::owner_less<std::weak_ptr<int> > > set1;
std::set<std::weak_ptr<int>, std::owner_less<std::weak_ptr<int> > > set2;

bool result = (set1 == set2); 
```

尝试编译上述结果会导致一长串错误，其中以下是第一个实际错误：

```
/usr/include/c++/4.7/bits/stl_algobase.h:791:6: error: no match for ‘operator==’ in ‘__first1.std::_Rb_tree_const_iterator<_Tp>::operator*<std::weak_ptr<int> >() == __first2.std::_Rb_tree_const_iterator<_Tp>::operator*<std::weak_ptr<int> >()’ 
```

由于 的瞬态特性`weak_ptr`，是否无法比较整组它们？

**更新：**

一个建议是使用：

```
bool result = !((set1 < set2) || (set2 < set1)) 
```

这导致：

```
/usr/include/c++/4.7/bits/stl_algobase.h:882:6: error: no match for ‘operator<’ in ‘__first1.std::_Rb_tree_const_iterator<_Tp>::operator*<std::weak_ptr<int> >() < __first2.std::_Rb_tree_const_iterator<_Tp>::operator*<std::weak_ptr<int> >()’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:51:44.363

由于weak_ptr不支持'=='，但是在这种情况下你可以使用集合try的比较运算符：

```
bool result = !(std::lexicographical_compare(set1.begin(), set1.end(),
                                         set2.begin(), set2.end(),
                                         set1.value_comp()) ||
                std::lexicographical_compare(set2.begin(), set2.end(),
                                         set1.begin(), set1.end(),
                                         set1.value_comp())); 
```

这将测试等效性，而不是相等性。它缺乏一定的……清晰度。

# javascript - 为什么脚本有时会启动 ExtendScript Toolkit 而只是停止

> ID：13959744
> 
> 赞同：3
> 
> 时间：2012-12-19T19:31:24.570
> 
> 标签：javascript, regex, macos, adobe-illustrator

任何想法为什么有时当调用脚本运行时它会启动 ExtendScript Toolkit 并停止？我认为这可能是当有很多文本要通过时。不确定每次都是这样。见下图脚本。

如果它停止它就停止在行： var new_string = this_text_frame.contents.replace(search_string, replace_string);

```
 // Version 3

function myReplace(search_string, replace_string) {
    var active_doc = app.activeDocument;
    var text_frames = active_doc.textFrames;
    if (text_frames.length > 0)
    {
        for (var i = 0 ; i < text_frames.length; i++)
        {
            var this_text_frame = text_frames[i];
            var new_string = this_text_frame.contents.replace(search_string, replace_string);
            if (new_string != this_text_frame.contents)
            {
                this_text_frame.contents = new_string;
                }
            }
        }
    }
myReplace(/^PRG.*/i, "");
myReplace(/.*EBOM.*/i, "");
myReplace(/^PH.*0000.*/i, "");
myReplace(/^PH.*00\/.*/i, "");
//  N or W  &  6 #'s   &   -S_    EX. N123456-S_  REPLACE with:  N123456-S???    (THIS NEEDS TO BE ABOVE  _ REPLACED BY SPACE)
myReplace(/([NW]\d{6}-S)_/i, "$1??? ");

myReplace(/_/gi, " ");
//  6 #'s   &  - or no -  &  7 #'s   &  1 to 3 #'s   &  -    EX: 123456-1234567/123-  REPLACE with:  -123456-
myReplace(/(\d{6})-?\d{7}\/\d\d?\d?-/i, "-$1-");
myReplace(/(\d{6})-?\d{7}-\/\d\d?\d?-/i, "-$1-");

myReplace(/([NW]\d{6}-S)-INS-\d\d\/\d\d?-/i, "$1??? ");

myReplace(/-INS-\d\d\/\d\d?-/i, "* ");

//  -  That is only followed by one more -  &   Not having PIA   &  -  &   2 to 3 #'s   &   /   &   1 to 3 #'s   &   -      EX:   -7NPSJ_RH-001/9-   REPLACE with  * & Space
myReplace(/-[^-]*-\d\d\d?\/\d\d?\d?-/i, "* ");

myReplace(/ ?ASSEMBLY/gi, " ASY");
myReplace(/ ASS?Y+$| ASS?Y - | ASS?Y -| ASS?Y | ASS?Y- | ASS?Y-/gi, " ASY - ");

myReplace(/(MCA-|DS-?C1-?)/i, "-");

myReplace(/^DS-|^DI-|^PH-|MCA|^PAF-|^PAF|^FDR-|^FDR/i, "");

myReplace(/VIEW ([a-z])/i, "TTEMPP $1");

myReplace(/ ?\(?V?I?EW\)| ?\(?VIE[W)]?|^W\)| ?\(VI+$|^ ?\(VI| ?\(V+$|^ ?\(V| ?\(+$|^ ?\)/i, "");

myReplace(/TTEMPP ([a-z])/i, "VIEW $1");

myReplace(/([NW]\d{6}-S)-/i, "$1??? ");
myReplace(/([NW]\d{6}-S)\/.-/i, "$1??? ");

//   Needs to be in this order
myReplace(/ AND /i, "&");
myReplace(/WASHER/i, "WSHR");
myReplace(/BOLT/i, "BLT");
myReplace(/STUD/i, "STU");
myReplace(/([SCREW|SC|NUT|BLT|STU])&WSHR/i, "$1 & WSHR");
myReplace(/\?\?\? SCREW &/i, "??? SC &");
myReplace(/\?\?\? SC [^&]/i, "??? SCREW ");
myReplace(/(\?\?\? SC & WSHR).*/i, "$1");
myReplace(/(\?\?\? SCREW).*/i, "$1");
myReplace(/(\?\?\? NUT & WSHR).*/i, "$1");
myReplace(/\?\?\? NUT [^&].*/i, "??? NUT");
myReplace(/(\?\?\? BLT & WSHR).*/i, "$1");
myReplace(/\?\?\? BLT [^&].*/i, "??? BLT");
myReplace(/(\?\?\? STU & WSHR).*/i, "$1");
myReplace(/\?\?\? STU [^&].*/i, "??? STU");

myReplace(/--/gi, "-");

if ( app.documents.length > 0 && app.activeDocument.textFrames.length > 0 ) {
// Set the value of the word to look for
searchWord1 = "*";
//searchWord2 = "The";

// Iterate through all words in the document
// the words that match searchWord
for ( i = 0; i < app.activeDocument.textFrames.length; i++ ) {
textArt = activeDocument.textFrames[i];
for ( j = 0; j < textArt.characters.length; j++) {
word = textArt.characters[j];
if ( word.contents == searchWord1 ) {

word.verticalScale = 120;
word.horizontalScale = 140;
word.baselineShift = -3;
}
}
}
} 
```

[img]http://i.imgur.com/9IRy9.jpg[/img]

调用此 javascript 以从 applescript 运行。

```
 set Apps_Folder to (path to applications folder as text)
set Scripts_Path to "Adobe Illustrator CS5:Presets.localized:en_US:Scripts:"
set JS_FileName to "Text Find & Replace.jsx"
--
try
    set JS_File to Apps_Folder & Scripts_Path & JS_FileName as alias
    tell application "Adobe Illustrator"
        do javascript JS_File show debugger on runtime error
    end tell
on error
    display dialog "Script file '" & JS_FileName & "' NOT found?" giving up after 2
end try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-13T00:28:44.673

> 它不是“MRAP”，而是“PARM”，但数字合适。

实际上，在 MacOS 上，“MRAP”是返回的正确句子。“PARM”适用于 Windows。

我对这个错误的经验：

我运行了 2 000 行的 javascript。

我必须检查 700 个文件夹，每个文件夹包含 1-15 个不同的 .ai 文件。

*   在 MACOS 10.7 上，我在 15 个文件夹中收到了 2 次此错误，从来没有同一个文件。(CS6)

*   在 Win8 上，我在 5 个文件夹中出现了 1 次此错误，而不是同一个文件。（CC 2014）

*   在 win7 上，我在 100 个文件夹中出现了 1 次此错误，而不是同一个文件。（CC 2014 或 CS6）

*   最后我在刚刚安装的win7上运行它，我没有收到任何错误，脚本运行了10个小时没有中断。（CC 2014 或 CS 6）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:28:57.733

您是否搜索过您的错误代码？

```
1346458189 ('MRAP') 
```

它位于 ESTK 的底部。看看这里[http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/illustrator/scripting/cs6/Readme.txt](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/illustrator/scripting/cs6/Readme.txt)

它不是“MRAP”，而是“PARM”，但数字合适。

> “发生 Illustrator 错误：1346458189 ('PARM')”警报 (1459349)
> 影响：JavaScript
> 问题：
> 当粗心编写的脚本
> 从 ExtendScript Toolkit 在 Illustrator 中重复运行时，可能会出现此警报。
> 
> 每个脚本运行都在 Illustrator 中相同的持久 ExtendScript
> 引擎中执行。最终效果是
> ExtendScript 引擎的状态在之前运行的所有脚本中是累积的
> 。
> 
> 脚本代码的以下问题可能会导致此问题：
> 
> *   读取未初始化的变量。
> *   全局命名空间冲突，例如来自不同
>     脚本的两个全局变量具有相同名称。

在您的脚本中有一些未初始化的变量

```
searchWord1 = "*"; 

textArt = activeDocument.textFrames[i];

word = textArt.characters[j]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-25T23:15:08.213

虽然我确信@fabianmoronzirfas 有技术上正确且最有可能的答案，但我最近遇到的错误`1346458189`似乎是 Illustrator 中的微软臭名昭著的“未知错误”。也就是说，对于 Adob​​e 没有为其编写更多信息的错误陷阱的任何内容，它似乎都是包罗万象的错误。

对我来说，这个无益的错误是由于试图将画板设置得太小（低于 1 分）造成的。显然，Illustrator 没有做足够的边界检查。对于其他人，据我通过搜索网络得知，它来自一些原因。可能包括 Illustrator 脚本处理器中的内存和其他错误，这将是在某些情况下解释其随机性的一种方法。然而，最有可能的是，我怀疑它通常可以通过更持久的代码来解决。

# emacs - 在 emacs 24 中使用 gdb -i=mi 集成

> ID：13959747
> 
> 赞同：6
> 
> 时间：2012-12-19T19:31:27.030
> 
> 标签：emacs, gdb

我正在检查我们的一个应用程序中的段错误。启动应用程序后不久，主`gdb`状态栏变为：

> （调试器：运行[信号接收]）

出现`(gdb)`提示，但所有其他窗口的内容保持不变（空）。在提示符下键入任何内容都不会执行任何操作 -`gdb`似乎挂起。使用完整且正确的回溯`command line`对预期输出结果运行相同的步骤。`gdb`

这是我第一次调试 和之间的`-i=mi`集成。我正在使用24.2 和7.5。`emacs``gdb``emacs``gdb`

关于如何进一步调试有什么建议吗？

是否可以降低集成度？这可以让我确定是哪个区域导致了问题吗？

最后一点是，应用程序的初始加载大约需要 70 秒，而`command line`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T02:18:02.933

您可以使用`M-x gud-gdb`旧的 gud 模式（即没有`mi`交互）。不那么花哨，但更可靠。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T23:30:07.983

`gdb-create-source-file-list`通过设置为`nil`（使用自定义）可以减少加载时间。请参阅文档以了解它的作用以及在某些情况下它会显着增加加载时间的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T09:29:45.920

从 emacs 23 开始似乎`gdb-ui`仍然可以在 emacs 24 中工作：

*   查找副本`gdb-ui`（在我的情况下`gdb-ui.el.gz`，`gdb-ui.elc`从备份中）
*   将这些放入目录（我已添加`~/emacs-modes`）

然后将以下内容添加到您的 .emacs 中：

```
(add-to-list 'load-path "~/emacs-modes")
(require 'gdb-ui) 
```

运行`gdb`现在将使用旧`--annotate=3`模式而不是`-i=mi`.

# python - 带有 Selenium 的 Python Urllib2 Cookiejar

> ID：13959750
> 
> 赞同：6
> 
> 时间：2012-12-19T19:31:35.840
> 
> 标签：python, cookies, selenium, urllib2

我正在使用 python urllib2 和 cookiejar 来访问网站。该站点的最后一页过于复杂，无法使用 urllib2 处理（它使用 javascript 和框架），所以我想使用 Selenium 打开它，但我需要将我的 cookie 转移到 selenium 才能继续。

我的 cookiejar 设置如下

```
cj = cookielib.CookieJar() 
```

有没有办法迭代这个，并输出每个cookie？看起来我可以使用以下方法在 selenium 中设置 cookie：

```
Cookie cookie = new Cookie("key", "value");
driver.manage().addCookie(cookie); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:40:15.290

您实际上可以迭代`cj`对象。这是打开reddit后的一个简单示例：

```
In [40]: for c in cj:
   ....:     print c.name, c.value
   ....:     
   ....:     
reddit_first %7B%22firsttime%22%3A%20%22first%22%7D 
```

我以前没有用那种方法将它们转移到 Selenium，但我假设你可以使用上面概述的结构。

# spring - 如何使用 Spring 创建多页报告？

> ID：13959753
> 
> 赞同：0
> 
> 时间：2012-12-19T19:31:44.513
> 
> 标签：spring, jasper-reports, ireport

如何在*iReport*中生成多页报告，其中每页包含客户的不同发票？

此外，每张发票都将获得自己的*数据源*，即详细信息和付款支持形式。

我在这里找到了如何实现*子报告*：

[http://krams915.blogspot.com/2010/12/spring-3-mvc-jasper-sub-reports-using.html](http://krams915.blogspot.com/2010/12/spring-3-mvc-jasper-sub-reports-using.html)但我不知道如何创建多页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:44:12.050

您可以在子报表后使用分页符。分页后的内容将显示在另一个页面中。

# shopify - 如何检查 Shopify 上的应用支付费用是否被拒绝？

> ID：13959755
> 
> 赞同：2
> 
> 时间：2012-12-19T19:31:54.537
> 
> 标签：shopify

如果他们拒绝支付费用，我试图不允许用户访问我的应用程序。在接受或拒绝收费后，我如何检查哪个“状态”商店？

这来自 Shopify api 文档

> 在接受或拒绝收费后，Shopify 会将店主重定向到请求中设置的 return_url。此时 **商店要么处于接受状态，要么处于拒绝状态**。为了实际收到这笔费用的付款，它必须由您的应用程序激活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:40:33.670

只需检查充电状态。它将被接受或拒绝。

例如：

```
charge = ShopifyAPI::ApplicationCharge.find(params[:charge_id])
puts charge.status == 'accepted' ? "accepted" : "declined or other" 
```

或者

```
charge = ShopifyAPI::RecurringApplicationCharge.find(params[:charge_id])
puts charge.status == 'accepted' ? "accepted" : "declined or other" 
```

# c# - 使用新语法创建文本框

> ID：13959756
> 
> 赞同：0
> 
> 时间：2012-12-19T19:31:56.983
> 
> 标签：c#, asp.net, c#-4.0

在我的 Asp.NET 页面中，我有一个 html 编辑器。当用户在下面写下部分并单击保存按钮时，此文本将保存在数据库中并获取诸如 (Id=12) 之类的 id 号，我从网站的用户界面端获取它，并带有以下代码的页面。

```
<html>
<head></head>
<body>
 ...
 ..
 .
</body>
</html> 
```

我可以像下面的 sql 语句那样获取保存的文本

```
SELECT Text FROM StackOverFlow WHERE Id = 12 
```

然后我可以在网页中显示该值。

在这方面，我想使用这个编辑器来创建一个 asp.net 文本框。

也就是说，我想创建一个新语法，提供给编辑器输入基本句子以创建 asp.net 文本框。

假设语法如下：

{{输入框}}

```
<html>
<head></head>
<body>
<li>
     {{inputbox}}
</li>
</body>
</html> 
```

如何使用像 {{inputbox}} 这样的新语法创建一个 asp.net 文本框？你能给我一些建议来照亮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:01:06.343

我会尝试查看 Razor 视图引擎的工作原理。或任何 ASP.net 视图引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:01:26.257

我在 HTML 中使用了一些替换操作。

```
<html>
<head></head>
<body>
<li>
     {{inputbox}}
</li>
</body>
</html> 
```

我找到了 {{ ...... }} 并替换并动态创建了我想要的东西。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-19T23:06:31.033

您可以尝试在客户端使用 JQuery，将 {{inputbox}} 替换为文本框。

```
 var htmlStr = $(this).html();
    htmlStr.replace('{{inputbox}}', '<asp:TextBox ID="DynamicName" runat="server"></asp:TextBox>');
    $(this).html(htmlStr); 
```

# c++ - 为座位分配名称并在数组中显示

> ID：13959764
> 
> 赞同：-2
> 
> 时间：2012-12-19T19:32:25.370
> 
> 标签：c++, arrays, assign

我在将用户分配给数组然后显示数组时遇到问题。典型的“飞行座位分配”计划。任何帮助都会很棒，因为我被严重卡住了。

编译时我没有收到任何错误，所以我假设我离得太远了？代码如下。

注意，单独的头文件中的类。

```
// Flight Class - Scotia 2
// Contains information on seating (array), space available and return to menu option.
#include <iostream>
#include <string>
#include "booking.h"

using namespace std;

class Flight
{

public:

    public:
    struct Seat
        {
            int Available;
            string fullName;
        };// End of struct

// Structure for seat plan (24 spaces available)
    struct Seat seatArray[4][6];

    void seatPlan()
    {   //------
        cout << "Scotia Airlines Seating Plan\n";
        cout << "------------------------\n";
        cout << " 1D  2D  3D  4D  5D  6D\n";
        cout << " 1C  2C  3C  4C  5C  6C\n";
        cout << "                       \n";
        cout << " 1B  2B  3B  4B  5B  6B\n";
        cout << " 1A  2A  3A  4A  5A  6A\n";
        cout << "------------------------\n\n\n";
        //------
        for (int i=0;i<4;i++)
        {
            for (int j=0;j<6;j++)
                {
                if (seatArray[i][j].Available == 0)
                cout << seatArray[i][j].fullName << "=" << i+1;

                else
                cout << "Seating Plan is unavailable";
                break;
                }
        }// End of for loop
    }// End of seatPlan function

};// End of Flight class 
```

这也是我的预订舱位，因为我相信这将有助于发现问题......

```
//Booking class - Scotia Airlines
//This class will reserve a seat for passenger

#include <iostream>
#include <string>

using namespace std;

class Booking{

public:
    struct Seat
        {
            int Available;
            string fullName;
        };// End of struct

// Structure for seat plan (24 spaces available)
    struct Seat seatArray[4][6];

//variables for taking in customer details, calculating ticket cost (inc discounts) and adding details to system
    public:
    string fName, sName, busName, fullName;
    int age, livesAt;
    float discount, tickPrice, tCost;

    void addBooking()

    {
    cout << "\tBooking Menu \n\n";
    cout << "Please select ticket type: \n";
    cout << "1- Business \n";
    cout << "2- Western Isles \n";
    cout << "3- Ordinary \n";
    cin >> livesAt;

    // This will be used to calc total cost for each passenger dependant on ticket type
                    if(livesAt == 1)
                        {
                            discount = 0.75;
                            cout << "Please enter your business name\n";
                            cin >> busName;
                        }

                        else if (livesAt == 2)
                            {
                            discount = 0.90;
                            }

                        else
                            {
                            discount = 1.0;
                            };

    // Calculation - Standard ticket price is 60 Beans
                tickPrice = 60.0;
                tCost = (tickPrice * discount);

            bool booked = false;
                for(int i = 0; i < 4 && !booked; i++)
                    {
                        for(int j = 0; j < 6 && !booked; j++)
                        {
                            if(seatArray[i][j].Available == 1)
                            {
                                cout << "Please enter your first name \n";
                                cin >> fName;
                                cout << "Please enter your second name \n";
                                cin >> sName;
                                fullName == fName + " " + sName;
                                seatArray[i][j].fullName = fullName;
                                booked = true;
                                    // Message on screen for customer displaying cost of flight
                                cout << "*******************************\n";
                                cout << "\tBooking for " << fName + " " + sName << " confirmed.\n";
                                cout << "\tTotal cost = " << tCost << " GBP.\n";
                            }//end of if
                        }//end of for2
                    }//end of for1

    }// End of addBooking function
};// End of Booking class 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:41:00.460

以下是我发现的一些错误：

1.  首先，您永远不会将座位标记为不可用。将此添加到您的添加嘘声功能中。
2.  其次，我相信在第二个中的 else for in seatPlan 应该在 else 中。
3.  在 else 语句之后不需要半列（在设置折扣为 1.0 时的 else 中）

因为你从来没有提到你得到的错误是什么，所以这是我能得到的。希望这个答案有帮助。

# java - java中最好的文件I/O选项？

> ID：13959766
> 
> 赞同：4
> 
> 时间：2012-12-19T19:32:29.117
> 
> 标签：java, file, file-io

我是 java 新手，现在正在学习 File io 。但我对 io 感到非常困惑，因为有很多对象要处理它（FileReader、FileWriter、BufferedReader、BufferedWriter、FileInputStream、FileOutputStream ......而且可能还有更多）。

我想知道 File io 最有效的过程是什么（我应该使用什么？）。我不想要任何编码。我只想处理文本文件。任何简单的示例代码都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:43:10.520

首先要理解和记住的重点：

*   **流**：**字节**序列。

*   **读取器/写入器：****字符**序列（**字符串**）

不要混合它们，如果没有必要，不要将它们翻译成另一种，并始终指定编码。

一些快速食谱：

以**字节**序列的形式**读取**文件（二进制读取）。

 **```
new FileInputStream(File f); 
```

相同的添加缓冲：

```
new BufferedInputStream(new FileInputStream(File f)); 
```

将文件作为字符序列读取（**文本****读取**）。

```
new FileReader(File f); // ugly, dangerous, does not let us specify the encoding

new InputStreamReader(new FileInputStream(File f),Charset charset);  // good, though verbose 
```

添加面向行的缓冲（读取文本行）

```
new BufferedReader(  ... someReader ... ); 
```

输出/写入实际上是相同的（输出/写入器）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:34:14.840

简单的规则拇指。

文本 - Readers / Writers
Binary - InputStream / OutputStream

[您可以在文件](http://docs.oracle.com/javase/tutorial/essential/io/file.html)中阅读更多内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:45:37.360

**阅读**

以下将允许您逐行阅读

```
BufferedReader br = new BufferedReader(new FileReader(fileLocationTxt)); 
```

**写作**

以下将允许您逐行/逐部分编写

```
DataOutputStream ds = new DataOutputStream(new FileOutputStream(newLocation)); 
```

至于你的问题，没有最好的选择。即使在这里，您也可以看到我们必须一次使用 2 个或更多（查看构造函数。它们接受其他读取器/写入器或 inputStream/outputStream。

最好的选择取决于你真正想做的事情**

# android - FragmentPagerAdapter.getItemId() 似乎丢失了

> ID：13959769
> 
> 赞同：0
> 
> 时间：2012-12-19T19:32:38.803
> 
> 标签：android, actionbarsherlock, android-support-library

我正在尝试编写一个自定义`FragmentPagerAdapter`类以用于 a`ViewPager`和 ActionBarSherlock。我想覆盖该`getItemId()`方法，因为我有不同的选项卡可以根据应用程序的状态来来去去。但是该`getItemId()`方法在android-support-v4.jar中包含的实现中不存在`FragmentPagerAdapter`（我使用的是ActionBarSherlock 4.1.0）。我下载了 4.2.0，但它似乎有一个相同的 android-support-v4.jar。

据我所知，getItemId() 已于 5 月 10 日添加到 Android 支持库中。

有没有办法来解决这个问题？

- 编辑 -

也许 Android 文档与支持库不同步？

以下是说明 v4 支持库具有 getItemId() 的文档的链接：http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html#getItemId](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html#getItemId(int) (int )

但我刚刚从 Android SDK Manager (Android Support Library Rev 11) 下载了最新的 android-support-v4.jar。jar 与 ABS 不同，但它似乎仍然不包含 getItemId() 方法。

添加 getItemId() 的更改似乎已进入 v13 库？见[https://android.googlesource.com/platform/frameworks/support/+/1a1c2acbc15f8bc9dba05d09dcb18e340474e1c6%5E!/](https://android.googlesource.com/platform/frameworks/support/+/1a1c2acbc15f8bc9dba05d09dcb18e340474e1c6%5E!/)

这是我项目中的一些代码：

```
import android.support.v4.app.FragmentPagerAdapter;
import com.actionbarsherlock.app.ActionBar;

public class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener
{
    ...
    // This fails to compile:
    // The method getItemId(int) of type TabsAdapter must override or implement a supertype method
    @Override
    public long getItemId(int position) {
        return 0; // TODO
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:49:07.550

解决方案是用我从 Android SDK 管理器（Android 支持库 Rev 11）下载的 JAR 覆盖 ActionBarSherlock 库中的 android-support-v4.jar。我猜 ABS 库只是不是最新版本的最新版本。幸运的是，似乎没有任何兼容性问题。

# javascript - 无法获取组合框的值

> ID：13959772
> 
> 赞同：0
> 
> 时间：2012-12-19T19:32:50.033
> 
> 标签：javascript, combobox, dojo

我正在尝试访问组合框的选定选项的文本属性。以下代码是我到目前为止所达到的位置，但我无法识别代码中的错误。

```
<!DOCTYPE html>
<html >
<head>
<link rel="stylesheet" href="dijit/themes/claro/claro.css">
<style type="text/css">
table,td
{
border: 1px solid black;
}
td
{
height:30px;
vertical-align:center;
padding:15px;
}
.tableClass
{
    border:1px;
    border: 1px solid black;
}
</style>
<script src='dojo/dojo.js' data-dojo-config='parseOnLoad: true'></script>
<script>
//require(["dojo/parser", "dijit/form/FilteringSelect", "dojo/store/Memory"]);

</script>
<script type="text/javascript">
    dojo.require("dijit.form.ComboBox");
    function alterEntries()
        {
            //alert("in");
            document.getElementById('overlayName').value = dijit.byId('stateSelect').value;

            dojo.style("description", {
                display:"block",
            });
            dojo.style("overlayName", {
                display:"block",
            });
        }
        function submitEntries(ovlName,overlayDescription)
        {
            var textOfOvl = getSelectedText(ovlName);
            alert("overlayName " + ovlName + " overlayDescription " + overlayDescription);
        }

        function getSelectedText(elementId) 
        {
            var elt = document.getElementById(elementId);

            if (elt.selectedIndex == -1)
            {
                alert("null");
                return null;
            }

            return elt.options[elt.selectedIndex].text;
        }

    </script>

</head>

<body class="claro">
    <select id="stateSelect" data-dojo-type="dijit.form.ComboBox">
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
    </select>
     <input name="overlayName" type="text" value="overlayName" id="overlayName"  style="display:none">
    <textarea name="description" cols="50" rows="3" id="description" style="display:none"></textarea>
    <p>
        <button onclick="alterEntries();">EDIT</button>
        <button onclick="submitEntries(document.getElementById('overlayName').value,document.getElementById('description').value);">SUBMIT</button>
    </p>

</body>

</html> 
```

我正在努力弄清楚出了什么问题。有人可以帮帮我吗。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:51:58.483

为了获得显示的文本，您选择的文本应如下所示：

```
function getSelectedText(el){
     var text = dijit.byId(el).get('displayedValue'),
     value = dijit.byId(el).get('value');
     alert(text);
     return text;
} 
```

我建议您查看基本的 dijit 教程，使用 dijit 时 document.getElementById 会产生与 dijit.byId 截然不同的结果。

这也是您输入的轻微修正

```
 <input name="overlayName" type="hidden" value="stateSelect" id="overlayName"> 
```

我也推荐你使用

```
dojo.byId('textId'); 
```

而不是 document.getElementById

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:49:54.553

您的代码非常非常奇怪。正如我可以理解的那样

`<input name="overlayName" type="text" value="overlayName" id="overlayName" style="display:none">`

value 属性必须设置为`stateSelect`，但不能设置为`overlayName`。

并查看浏览器更改功能实现的任何工作结果`submitEntries`：

```
function submitEntries(ovlName,overlayDescription)
{
    var textOfOvl = getSelectedText(ovlName);
    alert(textOfOvl);
} 
```

请参阅[您的代码的工作修改](http://jsfiddle.net/feedbee/DEU93/)。

# java - 继承类中的字符串连接

> ID：13959775
> 
> 赞同：-1
> 
> 时间：2012-12-19T19:33:02.163
> 
> 标签：java, string

我有一个名为的类`A`，其中声明了一个字符串。我还有其他 2 个类`B and C`继承自`A`

```
public abstract class A {
    protected String ss="";

    public abstract String someMethod();
}

public class B extends A{
    public String someMethod(){
        int i=8;
        return ss+="$"+i;
    }
}

public class C extends A {
    public String someMethod() {
        int i=9;
       return ss+="$"+i;
    }
} 
```

测试代码：

```
A aa = new B();
aa.someMethod();

A aaa = new C();    
aaa.someMethod(); 
```

当我打印时`aaa.someMethod();`- 为什么没有附加 B 类和 C 类的字符串？我希望它们被附加。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:44:48.473

Java 中的重写方法***不会***自动调用它们的父类父类。因此，在您的`C`子类中，调用`someMethod`不会从其父类调用该方法`A`，除非您*显式*调用 super。

```
public class C extends A
    public String someMethod(){
        int i=9;
        return ss+= super.someMethod()+"$"+i;
    }
} 
```

我假设您这样做是为了学习，否则这是管理继承的类及其属性的一种非常糟糕的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:07:12.217

**/usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/javac A.java B.java C.java Test.java**

**/usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java 测试**

```
$8
$9 
```

这里没什么好奇怪的，B 方法 someMethod() 调用 B 方法，C 方法 someMethod() 调用 C 方法...

文件 A.java：

```
public abstract class A
{
    protected String ss="";
    public abstract String someMethod();
} 
```

文件 B.java

```
public class B extends A
{
    public String someMethod()
    {
        int i=8;
        return ss+="$"+i;
    }
} 
```

文件 C.java

```
public class C extends A
{
    public String someMethod()
    {
        int i=9;
        return ss+="$"+i;
    }
} 
```

文件 Test.java

```
public class Test
{
    public static void main(String pArgs[])
    {
        A aa = new B();
        System.out.println(aa.someMethod());
        A aaa = new C();
        System.out.println(aaa.someMethod());
    }
} 
```

# ruby-on-rails-3 - rails 3，如何运行循环 n.times，其中 n 的值由局部变量设置

> ID：13959780
> 
> 赞同：0
> 
> 时间：2012-12-19T19:33:22.547
> 
> 标签：ruby-on-rails-3

这应该是相当简单的......

我有推荐 has_many 资产。

我想限制用户为每个推荐添加 3 个资产，我可以简单地通过限制显示的字段数量来做到这一点。

在控制器中的新操作中，我正在做一个非常简单的操作：

```
3.times {@recommendation.assets.build} 
```

在我的编辑操作中，我试图构建逻辑来决定要显示多少个字段：

```
@assets = @recommendation.assets.all
if @assets.empty?
  3.times {@recommendation.assets.build}
else
  asset_loop = @assets.count - 3 
  asset_loop.times {@recommendation.assets.build}
end 
```

if 有效，但 else 无效。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:39:13.207

如果我理解你的目标，你只需要改变

```
asset_loop = @assets.count - 3 
```

到

```
asset_loop = 3 - @assets.count 
```

如果您想真正执行限制，请确保验证传入数据。否则，您将受到任何拥有 Web 控制台和 curl 的人的摆布。

# python - Python 不等待 MATLAB 完成

> ID：13959785
> 
> 赞同：5
> 
> 时间：2012-12-19T19:33:44.543
> 
> 标签：python, python-2.7

我正在通过`subprocess`模块将一个小的 MATLAB 脚本与 Python 连接起来。如下：

```
cmd='(matlab -nosplash -nodesktop -r "optimizer;quit;")'
p = subprocess.Popen(cmd,stdin=None,stdout=None,shell=True)
#subprocess.Popen.wait(p)
#p.wait()
print "DONE?" 
```

但是甚至在 MATLAB 启动之前就已经打印了“DONE”！因此，我过去的整个代码都被破坏了。

我努力了：

*   使用 os.system() 调用（这是我开始的地方，但我在 SO 上读到它已弃用）
*   使用`p.wait()`和`subprocess.Popen.wait`。两者都不起作用。
*   使用 3 分钟的手动暂停（MATLAB 平均完成所需的最长时间）*Super Sloppy*。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:50:56.077

对我来说很好：

```
import subprocess
retcode = subprocess.call(["matlab", "-nosplash", "-nodesktop", "-r", "quit;"])
print "DONE", retcode 
```

相应地拆分命令参数，仅使用您实际需要的选项（`shell=True`例如，不需要），使用直接执行您之后的操作的函数（`call`），即调用并等待完成。

根据您的安装（参见[http://www.mathworks.com/help/matlab/ref/matlabwindows.html），Matlab](http://www.mathworks.com/help/matlab/ref/matlabwindows.html)可能会以一种立即退出的方式启动。要处理这个问题，请将“-wait”添加到您的参数列表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-12T16:12:57.657

使用“-wait”标志启动 Matlab。从文档中：

“MATLAB 由一个单独的启动程序启动，该启动程序通常启动 MATLAB，然后立即退出。使用此选项告诉启动程序在 MATLAB 终止之前不要退出。当您需要在脚本中处理来自 MATLAB 的结果时，此选项很有用。使用此选项调用 MATLAB 会阻止脚本继续执行，直到生成结果为止。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:55:28.037

根据您对我的评论的回复，让我用我为我的应用程序所做的事情来回答您的问题，这与您的过程相似（尽管在 C# 中）。与其试图强迫您的进程等待 MATLAB 完成（这显然现在不起作用），不如等待该 CSV 文件被写入。如果您担心可能有重复，那么只需将当前日期和时间附加到文件末尾，这应该可以解决问题。

# c# - 获取显示在非常简单的下拉框中的月份名称

> ID：13959786
> 
> 赞同：4
> 
> 时间：2012-12-19T19:33:44.627
> 
> 标签：c#, asp.net, webforms

我创建了一个非常简单的下拉框：

```
<asp:DropDownList ID="MonthDropDown" runat="server" AutoPostBack="True">
</asp:DropDownList> 
```

代码背后：

```
MonthDropDown.DataSource = Enumerable.Range(1, 12);
MonthDropDown.SelectedIndex = DateTime.Now.Month;
MonthDropDown.DataBind(); 
```

有没有办法让`MonthDropDown`（我的下拉框）显示月份的名称，而不是月份的数值。我想它可能是这样的

```
DateTimeFormatInfo.CurrentInfo.GetMonthName(MonthDropDown.SelectedIndex)? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:38:11.893

你是这个意思吗？

```
for (int n = 1; n <= 12; ++n)
    MonthDropDown.Items.Add(n, DateTimeFormatInfo.CurrentInfo.GetMonthName(n));

MonthDropDown.SelectedIndex = DateTime.Now.Month - 1; // note -1 
```

请注意，这`MonthDropDown.SelectedValue`将是从一开始的值（1 = 一月），但`MonthDropDown.SelectedIndex`将从零开始（0 = 一月）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:39:17.030

这当然是特定于文化的，所以在`CultureInfo`类下查找它：

```
string monthName = CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(monthIndex); 
```

您可以将月份名称设置为 ListBox 中的值：

```
MonthDropDown.DataSource = Enumerable.Range(1, 12)
    .Select(monthIndex => 
        CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(monthIndex))
    .ToArray(); 
```

如果您仍希望所选*值*作为索引，您也可以使用键/值：

```
MonthDropDown.DataSource = Enumerable.Range(1, 12)
    .Select(monthIndex=> 
        new ListItem(
            CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(monthIndex), 
            monthIndex.ToString()))
    .ToArray(); 
```

# ruby - GPG：密钥和检查密码

> ID：13959788
> 
> 赞同：1
> 
> 时间：2012-12-19T19:33:52.907
> 
> 标签：ruby, security, shell, gnupg, pgp

如何检查 GPG**密钥**不包含密码？我不想导入这个密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:26:05.077

我找到了解决方案：

```
 stdin, stdout, stderr = Open3.popen3("echo '\n\n\n\n\nsave' | gpg --command-fd 0 --homedir #{dir} --edit-key #{secret_key[:keyid]} passwd")
output = stderr.read
if output =~ /.../
  ...
end 
```

# python - pymongo：MongoClient 或 Connection

> ID：13959790
> 
> 赞同：10
> 
> 时间：2012-12-19T19:33:56.193
> 
> 标签：python, mongodb, pymongo

我正在尝试使用 pymongo 连接 mongodb。我看到两个类连接到 mongodb。

```
MongoClient and Connection. 
```

这两个类有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T19:51:20.853

`MongoClient`是连接到 mongo 实例的首选方法。该类`Connection`已弃用。但是，就使用而言，它们非常相似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T20:14:42.143

MongoClient 和 Connection 类似，但引入了 MongoClient *（从 mongodb 2.2+ 开始）*主要支持`WriteConcern`和其他功能。

`Connection`已折旧，因此请避免将来使用它。

使用 PyMongo 的第一步是为`MongoClient`正在运行的 mongod 实例创建一个。这样做很容易：

```
>>> from pymongo import MongoClient
>>> client = MongoClient() 
```

上面的代码将连接到默认主机和端口。我们还可以显式指定主机和端口，如下所示：

```
>>> client = MongoClient('localhost', 27017) 
```

或者使用 MongoDB URI 格式：

```
>>> client = MongoClient('mongodb://localhost:27017/') 
```

参考：[MongoClient Python 示例](http://api.mongodb.org/python/current/tutorial.html#making-a-connection-with-mongoclient)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T19:52:16.757

连接已被弃用。所有官方 MongoDB 驱动程序都有一个新行为，即在 true 上使用安全模式（无即发即弃）。

必须使用[MongoClient而不是 Connection。](http://blog.mongodb.org/post/36666163412/introducing-mongoclient)

更新：所有新功能和更改都将在 MongoClient 上进行，而不是在 Connection 上。

# chef-infra - 错误：Mixlib::ShellOut::CommandTimeout: windows_batch

> ID：13959793
> 
> 赞同：0
> 
> 时间：2012-12-19T19:34:07.540
> 
> 标签：chef-infra

我有一个需要很长时间才能执行（10 小时）的食谱，我收到了这个错误

错误：Mixlib::ShellOut::CommandTimeout: windows_batch

如您所见，它位于 Windows 机器上。

食谱是

```
windows_batch "some_name" do
  code <<-EOH

    #copy code that takes several hours  

  EOH
  timeout = 180000
end 
```

如您所见，我将超时设置为一个很大的数字，但它超时大约 6.5 小时并且基本上忽略了地雷。

令人困惑的部分是一些节点不会超时，尽管它们运行完全相同的配方！！！

如何为此增加超时设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T19:21:58.653

该代码不起作用...您不使用`=`. 其次，`timeout`不是 Windows Batch 资源的有效属性：[https](https://github.com/opscode-cookbooks/windows/blob/master/providers/batch.rb#L34-L40) ://github.com/opscode-cookbooks/windows/blob/master/providers/batch.rb#L34-L40 。

# lisp - 理解 Common Lisp 的 aref 行为

> ID：13959795
> 
> 赞同：4
> 
> 时间：2012-12-19T19:34:13.150
> 
> 标签：lisp, common-lisp

我不明白为什么`setf`不能使用从函数调用返回的数组引用。在下面的示例中，为什么最终调用失败？

```
(setf arr #1a(a b c))

(defun ret-aref (a i)
    (aref a i))

(eql (ret-aref arr 0) (aref arr 0))

;succeeds
(progn
    (setf (aref arr 0) 'foo)
    arr)

;fails
(progn
    (setf (ret-aref arr 0) 'bar)
    arr) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:39:11.340

运算符实际上是`setf`一个宏，它需要能够在编译时检查位置表单。它有关于 的特殊知识`aref`，但对你的`ret-aref`.

让你的函数为人所知的最简单方法`setf`是为它定义一个合适的`setf`-function 伴侣。例子：

```
(defun (setf ret-aref) (new-value array index) 
   (setf (aref array index) new-value)) 
```

现在，`(setf (ret-aref arr 0) 'bar)`应该可以了。

这个简单的例子隐藏了一个事实，即`setf`-expansion 实际上是一个非常棘手的话题。[你可以在 CLHS](http://www.lispworks.com/documentation/HyperSpec/Body/05_aab.htm)中找到血淋淋的细节。

# javascript - 选择带有空格或特定字符的数据属性值

> ID：13959800
> 
> 赞同：4
> 
> 时间：2012-12-19T19:34:18.050
> 
> 标签：javascript, jquery, jquery-selectors, custom-data-attribute

我正在尝试选择一个包含空格或某个字符的数据属性值，但它不太喜欢它。下面是我为单字属性值工作的代码。

```
$('div[data-roomtype='+$(this).data('roomtype')+']').animate({opacity:0.1},100); 
```

而且我还整理了一个非常简化的小提琴（[http://jsfiddle.net/Tse6k/2/](http://jsfiddle.net/Tse6k/2/)），我希望实现的目标。有一个简单的解决方案吗？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T19:35:24.483

引用选择器中的值：

```
// ------------------v -------------------------------v
$('div[data-roomtype="' + $(this).data('roomtype') + '"]'). ... 
```

**演示：http:** [//jsfiddle.net/Tse6k/3/](http://jsfiddle.net/Tse6k/3/)

# python - Django在模板中为用户进程临时保存图像

> ID：13959808
> 
> 赞同：0
> 
> 时间：2012-12-19T19:34:50.140
> 
> 标签：python, django

我认为标题有点令人困惑，但这是我想出的最好的。

我有一个上传图像表单，我想在用户上传后进一步处理图像文件（与用户一起 - 使用 jquery 裁剪），而不是立即将其放在模型`imagefield`上。

意思是，我需要暂时保存图像，以便可以使用 jquery 裁剪插件在模板中将其呈现给用户。

我目前的解决方案很丑陋，我制作了一个模型`TempImageToProcess`，我将图像保存到该模型中，然后将其重新呈现给用户以进行进一步处理。

所以我的问题是：有什么优雅的方法可以在 Django 中临时保存图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:01:15.427

你应该检查`TemporaryFileUploadHandler`这个[部分](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs#upload-handlers)。

如果发生任何意外错误或验证错误，请查看[此](https://stackoverflow.com/questions/8670982/cleanup-partly-uploaded-files-handled-by-temporaryfileuploadhandler-in-django) `SO`问题以进行清理。

希望这会引导你到某个地方。

# ios - 添加一个按钮以浮动在 ViewController 顶部，受路径启发

> ID：13959813
> 
> 赞同：3
> 
> 时间：2012-12-19T19:35:04.713
> 
> 标签：ios, xcode

我正在尝试构建一个将浮动在 ViewController 顶部的按钮，它应该静态保持在相同的位置，而它下面的 viewcontroller 可以上下滚动。

我设计了自己的按钮类，并在父 Viewcontroller 的 viewdidload 中这样做：

```
- (void)viewDidLoad// this is the parent viewcontroller
 {
[super viewDidLoad];
customButton *floatingButton = [[UIButton alloc]initWithFrame:(self.view.frame)];
[floatingButton setLocation:CGPointMake(300, 430)];
[self.view addSubview:floatingButton];
[self.view bringSubviewToFront:floatingButton]; 
```

这不是这样做的，因为当我运行按钮时没有显示，只有视图控制器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:43:42.887

我认为您没有正确初始化按钮。initWithFrame 是一个 UIView 初始化程序，由常规 UIButton 调用。我看不出你会如何得到任何东西，除了一个空的视图。

如果您有自定义按钮的自定义初始化程序，您应该使用

```
[[CustomButton alloc] myCustomInitializerWithFrame:frame]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:04:51.290

谢谢大家，但错误在我的最后，我没有正确初始化框架，所以按钮在那里但高度和宽度为（0,0）。

# visual-studio-2010 - 使用 VBA 和 Adpbe PDF 阅读器控件复制选定的文本

> ID：13959819
> 
> 赞同：3
> 
> 时间：2012-12-19T19:35:25.253
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, vba

我正在尝试直接从使用 Visual Basic 2010 中的 Adob​​e PDF 阅读器控件制作的 PDF 查看器中复制选定的文本。

我可以使用 Word 中的宏使用突出显示文本：

```
Private Sub CommandButton1_Click()
    Dim Sel As Selection
    Set Sel = Application.Selection
    If Sel.Type <> wdSelectionIP Then
    MsgBox Sel.Text
    End If
End Sub 
```

我无法确定这段代码是否可用于使用 Adob​​e PDF Reader 对突出显示的文本执行操作。如果没有，有人知道我会怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:52:02.577

我不认为 Adob​​e PDF 查看器支持 VBA。

但是，我建议使用剪贴板的间接方法。

通过发送 control+c 键，选择的内容将被传输到剪贴板，剪贴板可以使用“本机”VBA 进行处理。

发送 control+c 是通过使用完成的`SendKeys("^C")`，请参阅[此链接](http://msdn.microsoft.com/en-us/library/office/aa202943%28v=office.10%29.aspx)

剪贴板可以使用[此示例进行操作](http://word.mvps.org/faqs/macrosvba/ManipulateClipboard.htm)

# entity-framework - MVC MiniProfiler with Entity Framework 5 Model First Error: 无法确定提供者名称

> ID：13959820
> 
> 赞同：14
> 
> 时间：2012-12-19T19:35:28.120
> 
> 标签：entity-framework, asp.net-mvc-4, entity-framework-5, mvc-mini-profiler

使用 Entity Framework 5、MiniProfiler 2。为 MiniProfiler.EF 安装 Nuget。

创建连接如下

```
var conn = new EFProfiledDbConnection(DbConnections.GetSqlConnection(),                                                                      MiniProfiler.Current);
return new MyDbContext(conn, true); 
```

尝试使用 DbContext 检索数据时，返回以下错误：

```
Unable to determine the provider name for connection of type     
'StackExchange.Profiling.Data.EFProfiledDbConnection'.` 
```

我尝试将以下内容添加到 web.config：

```
<system.data>
  <DbProviderFactories>
    <remove invariant="StackExchange.Profiling.Data.ProfiledDbProviderFactory" />
    <add name="StackExchange.Profiling.Data.ProfiledDbProviderFactory" 
         invariant="StackExchange.Profiling.Data.ProfiledDbProviderFactory" 
         description="StackExchange.Profiling.Data.ProfiledDbProviderFactory"
         type="StackExchange.Profiling.Data.ProfiledDbProviderFactory, MiniProfiler, Version=2.0.2.0, Culture=neutral, PublicKeyToken=b44f9351044011a3" />
  </DbProviderFactories>
</system.data> 
```

那没有帮助。我也尝试过对此的变体，使用 MiniProfiler.EntityFramework 中的不同 EFProviderFactories，但无法让它们中的任何一个工作。

如果我尝试在 中运行`MiniProfilerEF.Initialize();`，`App_Start`那么在尝试访问数据库时会出现以下错误：

> 如果在 Code First 模式下使用，使用用于 Database First 和 Model First 开发的 T4 模板生成的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码。

`DbProviderFactories`从 web.config中删除该部分并运行`MiniProfilerEF.Initialize_EF42();`会`App_Start`导致原始错误。

正如 MiniProfiler 页面所说，这`MiniProfilerEF.Initialize()`仅适用于代码优先，这似乎不是要走的路。

除了将部分添加到 Web.Config 之外，其他搜索没有给我任何其他尝试。关于如何进行的任何建议？目标是能够使用 Mvc MiniProfiler 分析的 Model First DbContext。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T17:15:54.587

你的 global.asax 看起来像这样吗？

```
public class MvcApplication : HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
        AutomapperConfig.RegisterMappings();

        MiniProfiler.Settings.SqlFormatter = new StackExchange.Profiling.SqlFormatters.SqlServerFormatter();
        MiniProfilerEF.Initialize();
    }

    protected void Application_BeginRequest()
    {
        if (Request.IsLocal)
        {
            MiniProfiler.Start();
        }
    }

    protected void Application_EndRequest(object sender, EventArgs e)
    {
        MiniProfiler.Stop(false);
    }
} 
```

我以常规方式实例化我的上下文：

```
var _database = new DinoContext(_connectionString); 
```

# java - 如何让 Maven 3.0.4 使用 Java7？

> ID：13959822
> 
> 赞同：5
> 
> 时间：2012-12-19T19:35:31.437
> 
> 标签：java, maven, maven-3, osx-mountain-lion

我刚刚使用官方网站上的已编译二进制文件将 maven 从 3.0.3 更新到 3.0.4。现在当我运行 mvn -version 时，它说它使用旧的 java 6 版本，而不是我使用的 java 7 版本已安装在我的机器上（macbook pro）。如果我从其文件夹中运行 3.0.3 版本的 maven 二进制文件，它将使用 java 7 版本。如何配置 maven 3.0.4 以使其使用 Java 7 版本？谢谢你。

PS：Java 7 是我系统（山狮）的默认 Java 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:48:33.030

设置 JAVA_HOME 环境变量。路径为 $JAVA_HOME/bin

来自 Apache Maven：

基于 Unix 的操作系统（Linux、Solaris 和 Mac OS X）

将分发存档，即 apache-maven-3.0.4-bin.tar.gz 解压缩到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 /usr/local/apache-maven。将从存档中创建子目录 apache-maven-3.0.4。在命令终端中，

添加 M2_HOME 环境变量，例如`export M2_HOME=/usr/local/apache-maven/apache-maven-3.0.4.`

添加 M2 环境变量，例如`export M2=$M2_HOME/bin`.

可选：添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如，`export MAVEN_OPTS="-Xms256m -Xmx512m".`此环境变量可用于为 Maven 提供额外的选项。

将 M2 环境变量添加到您的路径，例如`export PATH=$M2:$PATH.`

确保将 JAVA_HOME 设置为 JDK 的位置，例如`export JAVA_HOME=/usr/java/jdk1.7.*`，`$JAVA_HOME/bin`位于 PATH 环境变量中。

运行 mvn --version 以验证它是否已正确安装。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:43:31.590

设置 JAVA_HOME 环境变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:46:52.477

设置 JAVA_HOME 变量通常可以解决问题，尽管在以前版本的 Maven 中也是如此。仍然值得检查变量是否已设置（并指向所需的 Java 版本）。

编辑：修复语法

# iphone - writeToFile:atomically:YES 对文件大小有限制吗？

> ID：13959824
> 
> 赞同：1
> 
> 时间：2012-12-19T19:35:47.907
> 
> 标签：iphone, objective-c

我正在尝试使用

`writeToFile:atomically:YES`

但是，我对每个文件都没有成功。当我尝试编写一个大型数组（从四个已解析的 XML 文档创建）时，该文件未写入（当我尝试编写一个仅包含一个已解析 XML 的数组时它确实成功）。它也有效，当我使用时

```
writeToFile:atomically:NO 
```

这种行为的原因可能是什么？使用时文件大小有限制 `writeToFile:atomically:YES`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:16:37.437

唯一的大小限制是设备上的可用空间量。但是，`writeToFile:atomically:`只有在每个对象（无论它到达多少层）都是属性列表对象时，它才适用于 NSArray。属性列表对象是`NSArray`、`NSDictionary`、`NSString`、`NSNumber`和`NSData`。此外，`NSDictionary`如果键是 all ，它只是一个属性列表对象`NSString`。

`NSArray` **不过确实**符合`NSCoding`，所以如果您的自定义类对象也符合，`NSCoding`那么您可以将数组编码为 an`NSData`并将其写入文件 - 通过`NSKeyedArchiver`.

或者，清理您的数据结构，以便您只使用属性列表对象。

# c++ - 将 C 位语句转换为 vb.net

> ID：13959834
> 
> 赞同：2
> 
> 时间：2012-12-19T19:36:14.330
> 
> 标签：c++, vb.net, bit-manipulation

我下载了一个开源项目来帮助我完成一个字节数组。我需要转换

```
int x = fgetc(inpFile);
x |= fgetc(inputfile) <<8;
x |= fgetc(inputfile) <<16;
x |= fgetc(inputfile) <<24; 
```

到 vb.net。我理解的 fgetc 和 inpFile。不幸的是，我不懂 C++，而且我对按位运算很薄弱。

我试图解释的文件格式（我正在使用刺绣格式阅读器）的文档记录很差，并指示我“地址 HEX 0008 到 0010 = 3 Bytes pointing to begin of .... next block of byte array 。 ……”

我只是想从上面的示例代码中的这三个字节中计算出相同的值。

希望这是有道理的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:47:27.167

我会去的

```
 dim x as integer = fgetc(inpFile) or 
                    fgetc(inpFile) << 8 or 
                    fgetc(inpFile) << 16 or 
                    fgetc(inpFile) <<24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:48:29.310

您可以使用`BinaryReader`，它会自动读取[Little Endian](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readint32.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)。

```
Dim reader As BinaryReader
Dim x As Integer

reader = New BinaryReader(File.Open(fileName, FileMode.Open))
x = reader.ReadInt32() 
```

# javascript - 在页面上搜索并返回图像

> ID：13959838
> 
> 赞同：2
> 
> 时间：2012-12-19T19:36:40.120
> 
> 标签：javascript, jquery, html

我有一个网站一次在页面上加载 1000 多个小图像。页面没有文字，只有图片。如果我在顶部有一个搜索栏并想过滤图像并根据文件名或替代文本返回一个..这可能吗？使用 Javascript/jQuery？或者可能是另一种方式？

实现这一点的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:42:12.973

例如，根据照片名称，您可以像这样搜索照片：

```
var photoName = "photo name";
$('img[src*="'+photoName+'"]').each(function(){
   //Do what you want with the found photos
}); 
```

**编辑**

您可以使用其他图像属性`like`alt 或`title`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:51:00.907

这个[工作示例](http://jsfiddle.net/7G5wx/2/)使用了 jQuery[包含选择器](http://api.jquery.com/attribute-contains-selector/)。

标记：

```
<img alt="abc" src="def.gif" />
<img alt="bcd" src="efg.png" />
<input id="search" type="text" placeholder="Search" />
<div id="results"></div>​ 
```

JS：

```
$(function() {
    $('#search').change(function(){
        var s = $(this).val();
        var results = $('img[alt*="' + s + '"],img[src*="' + s + '"]');
        var output = $('<div></div>').append(results.clone());
        $('#results').text(output.html());
    });
});​ 
```

如果您想查看结果中的图像而不是标记，请更改`$('#results').text(output.html());`为`$('#results').html(output.html());`. 请注意，这还将包括以下搜索中的搜索结果。这是一个显示搜索结果的[工作示例。](http://jsfiddle.net/7G5wx/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:40:24.110

您可以使用以下方法获取所有图像元素：

```
var allImages = document.getElementsByTagName('img'); 
```

然后，您可以检查`src`属性以找到匹配项。

```
var i;
var search = 'test';
var matches = [];
for (i = 0; i < allImages.length; i+) {
    if (allImages[i].src.indexOf(search) > -1) {
        matches.push(allImages[i]);
    }
} 
```

所以现在你有一个匹配数组。

你可以把它们写在某个地方，像这样......

```
var searchResults = document.getElementById('results');
for (i = 0; i < matches.length; i++) {
    searchResults.appendChild(matches[i]);
} 
```

您不必使用`src`，您可以使用图像上的任何属性，包括您自己的`data-keywords`标签（如果您真的需要）。如果您允许输入多个单词作为搜索，您可能想让事情变得更聪明。

这是一个处理多个单词的简单示例，可以以任何顺序出现：

```
var i;
var search = 'test multi word';
var searchTerms = search.split(' ');
var matches = [];

var isMatch = function (haystack, needles) {
    for (var i = 0; i < needles.length; i++) {
        if (haystack.indexOf(needles[i]) === -1) {
            return false;
        }
    }
    return true;
}

for (i = 0; i < allImages.length; i+) {
    if (isMatch(allImages[i].src, searchTerms)) {
        matches.push(allImages[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T19:44:15.243

(jQuery)

好吧，如果你有一个输入字段，

```
$field.on('keyup', function(evt) {
  $('img:not(
      [src*="' + $(this).val() + '"],
      [src*="' + $(this).attr('alt') + '"]
   )').hide();
}); 
```

那可能行得通。我还没有尝试过，但在我的脑海中它会。基本上，它只会隐藏所有不适用于搜索词的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:28:20.573

这取决于 HTML 的结构。

如果图像直接包含在 IMG tags() 中，您可以使用如下代码找到它：

```
$("img").each(function(){
     console.log("ALT: " + $(this).attr("alt"));
     console.log("FILE PATH AND NAME: " + $(this).attr("src"));
}); 
```

请注意，无论何时您在浏览器中看到图像，它都不一定是 IMG 标记。例如，图像可以是 CSS 类的背景。

# c# - 如何从新的撰写窗口获取 Outlook.MailItem？

> ID：13959839
> 
> 赞同：4
> 
> 时间：2012-12-19T19:36:44.237
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

我正在尝试`MailItem`从我的加载项中捕获对象。我尝试查看`Globals.FormRegions`但并没有真正到达任何地方。任何线索如何`Outlook.MailItem`在新的撰写窗口中访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T13:23:45.870

您可以使用[`ActiveInspector`](http://msdn.microsoft.com/en-us/library/office/ff863939.aspx)访问`MailItem`. **检查器**是显示单个 Outlook 项目的窗口。[`Inspector.CurrentItem`](http://msdn.microsoft.com/en-us/library/office/ff869722.aspx)返回当前显示在检查器窗口中的 Outlook 项目。

```
Outlook.MailItem mailItem = Globals.ThisAddIn.Application.ActiveInspector().CurrentItem as Outlook.MailItem; 
```

# android - 如何在android中成功使用列表？

> ID：13959844
> 
> 赞同：0
> 
> 时间：2012-12-19T19:36:59.757
> 
> 标签：android

我对 android 中的 Lists 有一点问题。例如，我制作了一个 android 应用程序。在这个应用程序中，我查询列表中的元素，但每次我使用 System.out.println 显示最后一个元素时都会得到它。

## 我的主要活动：

```
package djukic.tests.list;

import java.util.ArrayList;
import java.util.List;
import djukic.tests.list.TagData;
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        returnTG();
    }

    public List<TagData> returnTG ()
    {
        List<TagData> list =new ArrayList<TagData>();
        TagData t1 = new TagData();
        TagData test = new TagData();

        for(int i=0; i <= 2 ; i++)
        {   
        t1.setName("Motor" + i);    
        list.add(t1);
        }

        System.out.println("list size = " + list.size());
        test = list.get(0);
        System.out.println("test.getName 2 = " + test.getName());
        test = list.get(1);
        System.out.println("test.getName 2 = " + test.getName());
        test = list.get(2);
        System.out.println("test.getName 2 = " + test.getName());
        return list;

    }
} 
```

## 和我的 TAGDATA.JAVA：

```
package djukic.tests.list;

public class TagData 
{
    String name, last, tagID;
    int repetition, sollAmount, lastAmount;

    public TagData()
    {

    }

    public TagData(String name, int repetition, int sollAmount, int lastAmount, String last, String tagID)
    {
        this.name = name;
        this.repetition = repetition;
        this.sollAmount = sollAmount;
        this.lastAmount = lastAmount;
        this.last = last;
        this.tagID = tagID;
    }

    //get Methods
    public String getName()
    {
        return name;
    }

    public int getRepetition()
    {
        return repetition;
    }

    public int getsollAmount()
    {
        return sollAmount;
    }
    public int getlastAmount()
    {
        return lastAmount;
    }

    public String getlastDate()
    {
        return last;
    }

    public String getTagID()
    {
        return tagID;
    }

    //set Methods
    public void setName(String name)
    {
        this.name = name;
    }

    public void setRepetition(int repetition)
    {
        this.repetition = repetition;
    }

    public void setsollAmount(int sollAmount)
    {
        this.sollAmount = sollAmount;
    }
    public void setlastAmount(int letzteAmount)
    {
        this.lastAmount = letzteAmount;
    }

    public void setlastDate(String last)
    {
        this.last = last;
    }

    public void setTagID(String tagID)
    {
        this.tagID = tagID;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:43:13.060

这实际上更像是一个 Java 问题。

您只需创建一个 TagData 对象，并且每次都将相同的对象添加到列表中。您正在修改这一对象的名称。

例如，您可以更改此：

```
List<TagData> list =new ArrayList<TagData>();
TagData t1 = new TagData();
TagData test = new TagData();

for(int i=0; i <= 2 ; i++)
{   
    t1.setName("Motor" + i);    
    list.add(t1);
} 
```

对此：

```
List<TagData> list =new ArrayList<TagData>();

for(int i=0; i <= 2 ; i++)
{
    TagData t1 = new TagData();
    t1.setName("Motor" + i);    
    list.add(t1);
} 
```

我建议您阅读 Java 对象和引用以及按值传递和按引用传递之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:44:26.130

怎么改

```
{   
   t1.setName("Motor" + i);    
    list.add(t1);
} 
```

只是

```
 {
        list.add("Motor" + i);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:52:08.177

```
 List<TagData> list =new ArrayList<TagData>();
    TagData t1 = new TagData();
    TagData test = new TagData();

    for(int i=0; i <= 2 ; i++)
    {   
        t1.setName("Motor" + i);    
        list.add(t1);
    } 
```

与其使用相同的对象并一遍又一遍地更改名称，不如在每次要向列表中添加一个对象时创建一个新对象。

```
for (int i = 0; i <= 2; i+)
{
    t1 = new TagData();
    t1.setName("Motor" + i);
    list.add(t1);
} 
```

这样，每次迭代时 t1 都会指向一个新对象。您的示例只会一遍又一遍地重命名同一个 t1 对象，而不会重新分配它。

# sql - 使用代理作业运行更新查询

> ID：13959849
> 
> 赞同：0
> 
> 时间：2012-12-19T19:37:39.477
> 
> 标签：sql, sql-server-2008

我们有一个设置为运行以下查询的 SQL 代理作业。不幸的是，无论是按计划还是手动启动作业都会失败，但不会在错误日志中留下任何数据。

有一个步骤需要运行以下查询：

```
UPDATE TB1
SET TB1.STATUS = 'Complete'

FROM    
  Table1.dbo.A_P as TB1
  INNER JOIN [LS1].DB1.dbo.Detail AS CD ON CD.ID = TB1.ID
  JOIN [LS1].Header AS Header ON Header.ID = TB1.ID

WHERE 
TB1.STATUS='approved'
AND Header.Status='C'; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:28:08.530

这给了我我需要的东西。我在错误的位置寻找作业记录。该问题是由链接服务器的创建方式和配置代理的帐户引起的。感谢您指出工作历史；我觉得自己像个新手。– 拉托卡

# php - 将分页从每页 20 条记录更改为 10 条记录

> ID：13959858
> 
> 赞同：0
> 
> 时间：2012-12-19T19:38:11.570
> 
> 标签：php, pagination, page-numbering

我正在使用下面的脚本，从这里>> [http://www.phpjabbers.com/php--mysql-select-data-and-split-on-pages-php25.html](http://www.phpjabbers.com/php--mysql-select-data-and-split-on-pages-php25.html)

尝试每页显示 10 条记录，但由于某种原因我在更改它时遇到问题并且无法理解为什么，我所做的只是将 20 条更改为 10 条，但由于某种原因它每页显示 5 条记录（目前有 11 条记录在数据库中）。

```
 <?php 
    // check the user is part of the admin group
    $connection = mysql_connect("localhost","root","");
    if (!$connection)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("rcsetch", $connection);

    if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; }; 
    $start_from = ($page-1) * 10; 
    $sql = "SELECT * FROM u5b0y_chronoforms_data_submitusedequipment ORDER BY cf_id ASC LIMIT $start_from, 10"; 
    $rs_result = mysql_query ($sql,$connection); 
    ?> 
    <table>
    <tr><td>Name</td><td>Phone</td></tr>
    <?php 
    while ($row = mysql_fetch_assoc($rs_result)) { 
    ?> 
                <tr>
                <td><? echo $row["manufacturer"]; ?></td>
                <td><? echo $row["model"]; ?></td>
                </tr>
    <?php 
    }; 
    ?> 
    </table>
    <?php 
    $sql = "SELECT COUNT(cf_id) FROM u5b0y_chronoforms_data_submitusedequipment"; 
    $rs_result = mysql_query($sql,$connection); 
    $row = mysql_fetch_row($rs_result); 
    $total_records = $row[0]; 
    $total_pages = ceil($total_records / 10); 

    for ($i=1; $i<=$total_pages; $i++) { 
                echo "<a href='test.php?page=".$i."'>".$i."</a> "; 
    }; 
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T08:20:28.067

```
function paging($url,$sql,$offset,$page){
    $link="";
    $total=countrows($sql);

    $totalpages=ceil($total/$offset);

    $prev=$page-1;
    $next=$page+1;

    if($url=="dashboard.php"){
        $link="dashboard.php?";
    }else{
        $link=$url."&";
    }

    echo '<div id="paging">';
        if($total>$offset){
            echo "<span class='note'>Total ".$total."</span> | <span class='note'> Results of Page ".$page."</span><br/>";
            echo ($page>1)?'<a href="'.$link.'pg='.$prev.'">Prev</a>' : '<span class="s">Prev</span>';
            for($i=1;$i<=$totalpages;$i++){
                echo ($page!=$i)?'<a href="'.$link.'pg='.$i.'">'.$i.'</a>' : '<span class="s">'.$i.'</span>';
            }
            echo ($page<$totalpages)? '<a href="'.$link.'pg='.$next.'">Next</a>' : '<span class="s">Next</span>';
        }else{
            echo "<span class='note'>Total ".$total."</span>";
        }
    echo '</div>';
} 
```

检查这个功能，希望它可以帮助你。只需编辑变量 url 值

# c++ - 在编译时将类型转换为整数？

> ID：13959860
> 
> 赞同：1
> 
> 时间：2012-12-19T19:38:23.710
> 
> 标签：c++, templates

在 C++ 中，有没有办法在编译时将类型转换为整数（可能使用 typeid）？我的目标是为该类中的每种类型传递一个唯一代码：

```
template<int TypeCode>
class MyClass
{
}; 
```

编辑：有关我正在尝试做的事情的更多详细信息。事实上，MyClass 会更像这样：

```
template<int Code>
class AbstractBase
{
}; 
```

我使用大量 CRTP 技术编写了高度模板化的代码，并且我需要检查类型之间的兼容性以进行某些操作。为此，我的想法是从 AbstractBase 类继承兼容类型，为所有这些类型指定相同的代码。使用它，只需调用`std::enable_if<std::is_base_of<AbstractBase<MyCode>, T>::value>::type`我就可以检查某些操作的类型兼容性。

首先，我可以手动生成代码，但如果我可以从类型自动生成此代码，它会更优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:59:03.357

有很多方法。这是模板专业化：

```
#include<iostream>
using namespace std;

template<class T>   struct type_code        { enum{value=0}; };  // unknown type code
template<>          struct type_code <int>  { enum{value=1}; }; 
template<>          struct type_code <float>{ enum{value=2}; }; 

int main() {
        cout << type_code<void>::value << endl;
        cout << type_code<int>::value << endl;
        cout << type_code<float>::value << endl;
} 
```

输出：

```
0
1
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:04:07.257

不确定我是否完全理解你。这就是你在说的吗？

```
template<int TypeCode>
class MyClass
{
private:
    int i;
    double d;

public:
    template<typename T>
    operator T()
    {
        if(strcmp(typeid(T).name(),"int")==0)
            return i;
        else if(strcmp(typeid(T).name(),"double")==0)
            return d;
        // some other types here ...
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:35:08.247

好吧，您可以创建一个类型列表，然后在编译时提取该列表中类型的索引。

从我的另一个答案，这里是这种技术：

```
#include <type_traits>

template<typename... Types>
struct Seq {};

template<typename T, typename Seq, typename=void>
struct IndexOf;

template<typename T, typename First, typename... Types>
struct IndexOf<T, Seq<First, Types...>, typename std::enable_if< std::is_same<T, First>::value >::type > {
  enum { value = 0 };
};
template<typename T, typename First, typename... Types>
struct IndexOf<T, Seq<First, Types...>, typename std::enable_if< !std::is_same<T, First>::value >::type > {
  enum { value = 1+IndexOf<T,Seq<Types...>>::value };
};

typedef Seq< bool, char, unsigned char, short, unsigned short, int, unsigned int, long, unsigned long > IntegerTypes;

#include <iostream>

int main() {
  std::cout << IndexOf< int, IntegerTypes >::value << "\n";
  // this next line will not compile, because void is not in the IntegerTypes sequence:
  // std::cout << IndexOf< void, IntegerTypes >::value << "\n";
} 
```

我在整数上使用它。

所以如果你有一个你想要整数的类型列表，你可以列出所有类型，上面的技术将为每个类型提供一个唯一的整数（反向映射也相对容易——编译时索引到列表中类型）。

# ios - 在不同的选项卡上从一个 viewController 转到另一个

> ID：13959861
> 
> 赞同：0
> 
> 时间：2012-12-19T19:38:29.977
> 
> 标签：ios, xcode

我正在制作一个虚拟应用程序来研究当它们没有任何连接它们时如何从一个 ViewController 转换到另一个。

我有一个基于 TabBar 控制器的应用程序，它有 3 个选项卡。每个选项卡都有一个子 viewController。每个子 viewController 都有两个按钮，假设将用户带到其他两个 viewController 之一。例如 - 第一个 viewController 有一个子 viewController，它有两个按钮。按钮 1 用于转到连接到选项卡 2 的视图控制器的子视图控制器，按钮 2 用于转到连接到选项卡 3 的视图控制器的子视图控制器。

![在此处输入图像描述](../Images/6e98416692662aacca502358f4e72b24.png)

我很难实施这个程序。有人可以给我一些建议吗？

谢谢！

编辑1：

原因：

想象一个应用程序有两个选项卡，一个显示已拍摄照片的缩略图，另一个激活相机。一旦用户单击图像，应用程序应将用户带到显示所有图像缩略图的选项卡。暂时忘记应用程序的 UI 方面。我该如何完成上面的描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:45:37.680

不要为用户切换标签。它违反了标签栏控制器的原则。

如果要在选项卡内的控制器之间转换，请使用 UINavigationController 作为选项卡中的根视图控制器，然后正常推送/弹出。

# javascript - 以编程方式触发点击事件以激活选项卡

> ID：13959862
> 
> 赞同：-3
> 
> 时间：2012-12-19T19:38:33.130
> 
> 标签：javascript, jquery, events, onclick, dom-events

我正在使用我购买的模板并尝试向选项卡块添加功能。模板可以在这里查看。[http://themeforest.net/item/developr-fully-responsive-admin-skin/full_screen_preview/2085628](http://themeforest.net/item/developr-fully-responsive-admin-skin/full_screen_preview/2085628)。我正在使用“侧边选项卡”并将图像放入选项卡块中的空白内容区域。我拥有的第一个选项卡将是一个“全部”选项卡，其中显示了几个图像，所有这些都将有一个相应的选项卡。

我想要做的是点击“全部”选项卡中的任何图像并打开相应的选项卡。模板的设置使得当用户单击一个选项卡时，它会将该选项卡设置为活动状态。我想做同样的事情，但不是单击选项卡，而是希望能够单击相应的图像。我希望我解释得足够清楚。我在想我可以在单击图像时以编程方式在选项卡上触发 onClick 事件，也可以在单击图像时将类设置为在选项卡上处于活动状态。

```
 <!-- Tabs -->
    <ul class="tabs">
        <li class="active">
            <a href="#sidetab-all">All</a>
        </li>
        <xsl:for-each select="$currentPage/SKUContainer/SKU">
            <li>
                <a href="#sidetab-{position()}"><xsl:value-of select="./productNumber"/> - <xsl:value-of select="./productName"/></a>
            </li>
        </xsl:for-each>
    </ul>

    <!-- Inside each tab -->
    <div class="tabs-content" style="min-height: 194px;"> 
      <!--Display SKU images --> 
        <div class="with-padding" style="min-height: 190px; margin-bottom:10px;"    id="sidetab-all">

    <xsl:for-each select="$currentPage/SKUContainer/SKU">
      <div class="with-padding" style="width:190px; list-style:none; text-align:center; margin:0px; padding:0px; float:left;">

      <div style="background:#333333;">
                      <a href="#sidetab-{position()}"><img style="margin:0px;padding:0px; background:#666;" src="{umbraco.library:GetMedia(./mainImage, 'false')/umbracoFile}"/></a>

                      <div style="text-align:center; list-style:none; width:190px; background:#333; color:white; padding: 0px 0px 1px 0px; font-size: 12px;"><xsl:value-of select="productNumber"/> - <xsl:value-of select="productName"/></div>
                      <div style="text-align:center; list-style:none; width:190px; background:#333; color:white; padding: 0px 0px 5px 0px; font-size: 12px;"> <xsl:value-of select="width"/> x <xsl:value-of select="height"/> x <xsl:value-of select="depth"/></div>
                    </div>
                  </div>
                </xsl:for-each>

              </div>

 <xsl:for-each select="$currentPage/SKUContainer/SKU">
   <div class="with-padding" style="min-height: 190px;" id="sidetab-{position()}">
     <div style="float:left;">
       <xsl:if test="./mainImage &gt; 0">
         <img src="{umbraco.library:GetMedia(./mainImage, 'false')/umbracoFile}"/> 
       </xsl:if>
     </div>  

 <!--Display SKU name -->       
   <div class="with-padding" style="float:left;">
     <h3><xsl:value-of select="./productName"/></h3>
   </div> 

 <!--Display Content -->
   <div class="with-padding" style="float:left;">
     <xsl:value-of select="bodyText" disable-output-escaping="yes"/>
   </div>

   <div style="clear:left;"></div>
 </div>
</xsl:for-each>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:40:48.367

尝试... ？！

```
jQuery(document).ready(function() {
    var $tab = jQuery('.tab-selector');
    $tab.trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:58:50.593

```
 <script type="text/javascript">
    $(function(){
      $('.sidetabimage').click(function(e){
        e.preventDefault();
        var idName = $(this).attr("id");
        var id = idName.replace("sidetabimage-","");
        $('#sidetabnav-'+id).click();
      });
    });
  </script> 
```

^^ 这对我有用。感谢大家的链接和建议！

# c# - 将有效的 html 链接插入到电子邮件的字符串中

> ID：13959864
> 
> 赞同：3
> 
> 时间：2012-12-19T19:38:48.653
> 
> 标签：c#

我正在构建一个将通过电子邮件发送的字符串。在字符串中，我想包含一个链接，如下所示：

```
String mailstring = "Blah blah blah blah. Click here for more information." 
```

我希望“这里”是电子邮件中的一个链接，比如把它放在[http://madeuplink.com](http://madeuplink.com)。我知道我可以输入地址而不是“这里”，但我希望链接是单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:40:25.550

您可以添加 HTML 标记。假设客户端启用了 HTML 电子邮件，它应该成为一个链接。如果您使用[MailDefinition](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.aspx)创建电子邮件，请确保将[IsBodyHtml](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.isbodyhtml.aspx)属性设置为 true。

```
String mailstring = "Blah blah blah blah. Click <a href=\"http://www.example.com\">here</a> for more information." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:49:54.943

```
 string input = String.Format("Blah blah blah blah. Click {0} for more information.", 
                    "<a href=\"http://www.example.com\">here</a>"); 
```

或者

```
 string input = "Blah blah blah blah. Click <a href=\"http://www.example.com\">here</a> for more information.", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-27T13:53:20.630

只需将一件事添加到@keyboardP 的评论中，即使它有点脱离上下文，如果您使用 MailMessage 对象作为使用 SmtpClient 的消息发送，则需要设置`MailMessage.IsBodyHtml = true`.

`public void SendEmail(string to, string subject, string body) { MailMessage mail = new MailMessage("someone@example.com", to); mail.Subject = subject; mail.Body = body; mail.IsBodyHtml = true; ... }`

仅当设置此属性时，HTML 标记才会在电子邮件中采用所需的形式，否则会将标记显示为文本而不是超链接。

# delphi - 如何使 Windows 8 长按矩形消失？

> ID：13959865
> 
> 赞同：10
> 
> 时间：2012-12-19T19:38:52.807
> 
> 标签：delphi, windows-8, contextmenu, delphi-xe2

如果您在 Windows 8 的触摸屏上按住文本框，一段时间后会出现一个矩形。这是它的图片：

![图片](../Images/dab162528ed130126f02145f52b014e7.png)

当您松开手指时，该矩形应该会消失。现在将出现上下文菜单。（例如，参见记事本。）

然而，在 Delphi 程序中，当上下文菜单可见时，矩形仍然存在。在菜单关闭之前它不会消失。您可以尝试使用带有 TMemo 的新 VCL 应用程序。

我该如何解决这个问题？

Delphi 仍然使用 Windows 8 之前的 UI 事件（即没有 WM_Pointer），但除此问题外一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:58:42.320

如果在 Touch.TabletOptions 中包含 toPenTapFeedback，问题就会消失。

# android - 带有加载器的 TabsPager 中的多个片段，滑动有效，点击无效

> ID：13959867
> 
> 赞同：3
> 
> 时间：2012-12-19T19:39:05.937
> 
> 标签：android, android-listfragment, android-loadermanager, fragmentpageradapter, android-loader

我正在使用[ActionBarSherlock 示例](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)进行构建。**我有 3 个片段**（每个扩展`SherlockListFragment`和实现`LoaderManager.LoaderCallbacks<>`），每个选项卡中有 1 个。**他们都使用装载机**。选项卡 2 和 3 使用相同的加载器类（我认为这不是问题）。

我将选项卡添加到我的选项卡中，`FragmentPagerAdapter`其中包含对不同片段的类引用，如果需要，还包括捆绑包。当我的应用程序启动并显示选项卡 0 时，getItem in`FragmentPagerAdapter`通过创建它们的片段来准备选项卡 0 和选项卡 1。选项卡 2 尚未创建。当我滑动到选项卡 1 时，会加载选项卡 2。当我再次滑动时，选项卡 2 正确显示。

**当我从 tab 0 单击到 tab 2 时，会出现问题**。`getItem`确实创建了片段，并且加载器开始了它的`doInBackground`处理，**但是选项卡 2 的片段永远不会**在 onLoadFinished 中获取数据，因此与不确定的进度条保持一致。

之前发生了一些奇怪的事情。如果我单击，选项卡 2`onLoadFinished`将从选项卡 0 的加载器接收数据。当我将每个选项卡的片段加载器更改为使用不同的 ID 时（我认为即使它们具有相同的 ID，它们也不应该发生冲突），问题就消失了。例如：`getLoaderManager().initLoader(0, null, this)`,`getLoaderManager().initLoader(1, null, this)`等。我不确定这是否只是说明我对装载机或其他东西的无知。

**我的主要问题是**，我可以强制`FragmentPagerAdapter`一次加载所有标签吗？即使这样做也可能不会完全消除我的代码中的这个错误。

**第二个问题**：当我四处滑动并单击刷新（请参阅下面的代码以了解其作用）时，操作栏中的刷新按钮最终会消失。有什么想法吗？

**MainActivity（非常类似于链接的 ABS 示例）：**

```
public class MainActivity extends SherlockFragmentActivity{

    private static final int NUMBER_OF_STREAMS = 9;

    ViewPager mViewPager;
    TabHost mTabHost;
    TabsAdapter mTabsAdapter;
    private JTVApplication mApplication;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set up application
        if (mApplication == null)
            this.mApplication = (JTVApplication)getApplication();

        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);

        // SET UP TABS ADAPTER
        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);     
        mTabsAdapter.addTab(mTabHost.newTabSpec("categories").setIndicator("Categories"), CategoryListFragment.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("top_streams").setIndicator("Top Streams"), StreamListFragment.class, StreamListFragment.instanceBundle(null, null, null, null, NUMBER_OF_STREAMS, 0));
        mTabsAdapter.addTab(mTabHost.newTabSpec("favorites").setIndicator("Favorites"), FavoriteListFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }
    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public static class TabsAdapter extends FragmentPagerAdapter implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            @SuppressWarnings("unused")
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        List<Fragment> fragments = new ArrayList<Fragment>();

        public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);   
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);
            notifyDataSetChanged();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public void onPageScrollStateChanged(int arg0) {}

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {}

        @Override
        public void onPageSelected(int position) {
            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        @Override
        public void onTabChanged(String tabId) {
            int newPosition = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(newPosition, true);
        }

    }
} 
```

**Tab0 片段（与其他片段非常相似，因此我将省略其他片段）：**

```
public class CategoryListFragment extends SherlockListFragment implements LoaderManager.LoaderCallbacks<List<Category>>{

    public List<Category> mCategories;
    public List<Stream> mStreams;
    private int mLimit;
    private CategoryAdapter mCategoryAdapter;
    private String mSearchFilter;
    private RestClient mCategoryClient;

    public List<Category> getCategories() {
        return mCategories;
    }
    public void setCategories(List<Category> categories) {
        this.mCategories = categories;
    }

    public CategoryListFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstance){
        super.onCreate(savedInstance);
        this.setHasOptionsMenu(true);

        if (mCategoryClient == null)
            this.mCategoryClient = JTVApi.getCategories();
        // Prepare the loader
        getLoaderManager().initLoader(0, null, this);
    }

    @Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater){
        // CREATE REFRESH BUTTON
        MenuItem refreshMenu = menu.add("Refresh");
        refreshMenu.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        refreshMenu.setIcon(R.drawable.ic_menu_refresh);
        refreshMenu.setOnMenuItemClickListener(new OnMenuItemClickListener() {
            public boolean onMenuItemClick(MenuItem item) {
                CategoryListFragment.this.setListShown(false);
                CategoryListFragment.this.getLoaderManager().restartLoader(0, null, CategoryListFragment.this);   
                return true;
            }
        });
    }

    @Override
    public void onLoadFinished(Loader<List<Category>> arg0, List<Category> data) {
        if (mCategories == null){
            mCategoryAdapter = new CategoryAdapter(getActivity(), R.id.listItem, data);
            this.setListAdapter(mCategoryAdapter);
        } else {
            mCategoryAdapter.setData(data);
        }
        this.setListShown(true);
    }
    @Override
    public void onLoaderReset(Loader<List<Category>> arg0) {
        // TODO check for null
        mCategoryAdapter.setData(null);
    }
    @Override
    public Loader<List<Category>> onCreateLoader(int arg0, Bundle arg1) {
        return new CategoryLoader(getActivity(), mLimit, mCategoryClient);
    }
} 
```

**Tab0 加载器（与其他加载器非常相似，因此我将省略其他加载器）：**

```
public class CategoryLoader extends AsyncTaskLoader<List<Category>> {

    JTVApplication mApplication;
    RestClient mRestClient;
    List<Category> mCategories;

    public CategoryLoader(Context context, int limit, RestClient restClient) {
        super(context);
        this.mRestClient = restClient;
        mApplication = (JTVApplication)context.getApplicationContext();
    }

    @Override
    public List<Category> loadInBackground() {
        List<Category> categories = null;
        Object json;
        try {
            json = mApplication.getJSON(mRestClient, mRestClient.bypassCache());
            if (mRestClient.getApiMethod() == APIMethod.CATEGORY_LIST && json instanceof JSONObject){
                JSONObject jsonObject = (JSONObject)json;
                categories = Category.parseCategories(jsonObject);

                // Get total count of viewers for "All Categories"
                int total_viewers = 0;
                for (Category category : categories)
                    total_viewers += category.getViewers_count();
                categories.add(new Category(Category.ALL_CATEGORIES, "All Streams", total_viewers, 0, 0, null, "All Streams"));

                // Update global categories list with this data
                mApplication.setCategories(categories);

                return categories;
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    /**
     * Called when there is new data to deliver to the client.  The
     * super class will take care of delivering it; the implementation
     * here just adds a little more logic.
     */
    @Override
    public void deliverResult(List<Category> data) {
        mCategories = data;
        if (isStarted()) {
            super.deliverResult(data);
        }
    }

    /**
     * Handles a request to start the Loader.
     */
    @Override
    protected void onStartLoading() {
        if (mCategories != null){
            // If we currently have a result available, deliver it
            // immediately.
            deliverResult(mCategories);
        }

        // TODO CHECK FOR NEW DATA OR TIMER
        if (mCategories == null){
            forceLoad();
        }
    }

    /**
     * Handles a request to stop the Loader.
     */
    @Override protected void onStopLoading() {
        // Attempt to cancel the current load task if possible.
        cancelLoad();
    }

    /**
     * Handles a request to completely reset the Loader.
     */
    @Override
    protected void onReset() {
        super.onReset();
    }

} 
```

适配器非常基本，我相信它们不是问题。如果有人问我可以提供更多代码，但我认为这已经足够了。 **提前感谢您的帮助。**

**更新：**

当我简单地替换`FragmentPagerAdapter`它`FragmentStatePagerAdapter`时。我看到它在[FragmentPagerAdapter getItem is not called](https://stackoverflow.com/questions/12581896/fragmentpageradapter-getitem-is-not-called)中引用。我的代码和使用有什么问题`FragmentPagerAdapter`？

# javascript - 本地主机和 Javascript

> ID：13959870
> 
> 赞同：0
> 
> 时间：2012-12-19T19:39:14.533
> 
> 标签：javascript, node.js, socket.io, localhost

我的代码工作正常，但我想通过将整个 Javascript 放在另一个文件（如`maps.js`. 但`maps.js`不承认与线。使用 Firebug，我尝试调试并发现该文件的 GET 失败！

但是 GET 适用于`socket.io.js`. 我通过 localhost:8080 使用 node.js 运行系统。谁能告诉我我在这里做错了什么？或者当 HTML 代码被执行时，当前工作目录实际上在哪里？我什至尝试了 的绝对路径`maps.js`，但没有任何成功。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta type="keywords" content="" />
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <title>ReSense Client</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="/js/maps.js"></script>
    <script type="text/javascript">
      var socket = io.connect('http://localhost');
      var stockholm = new google.maps.LatLng(59.32522, 18.07002);
      var parliament = new google.maps.LatLng(59.327383, 18.06747);
      var marker;
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: stockholm
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        google.maps.event.addListener(marker, 'click', toggleBounce);
      }
      function toggleBounce() {
        if (marker.getAnimation() != null) {
          marker.setAnimation(null);
        } else {
          marker.setAnimation(google.maps.Animation.BOUNCE);
        }
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 500px; height: 400px;">map div</div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:01:15.487

如果没有看到一些 node.js 路由，我最好的猜测是您在使用 Node.js 提供静态文件的方式方面存在问题。确保您的 JS 位于您用作静态目录的目录中。如果你使用快递，它是这样的：

```
app.configure(function(){
    app.use(express.static("path/to/public"));
}); 
```

并确保“公共”目录位于您提供静态文件的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:15:50.147

问题是您可能在服务器端使用默认示例。与 PHP + Apache 解决方案相比，node.js 本身就是一种“apache”，默认情况下，当您只有直接 url 时，它不会像 Apache 那样服务器文件。

这必须在 node.js 中手动编码。

您可能会写下可以访问将为其提供服务的文件的路线。这是一篇很好的文章，可以了解如何提供静态文件。[http://www.sitepoint.com/serving-static-files-with-node-js/](http://www.sitepoint.com/serving-static-files-with-node-js/)

还有另一种选择，是使用 Express.js 框架，它有助于路由，正如 Dan Crews 在下面所写的，使用额外的配置将强制 node.js，因此如果开发人员没有处理路由，则静态提供文件。

```
app.configure(function(){
  app.use(express.static("path/to/public"));
}); 
```

请记住，node.js 不会做您期望从 nginx 或 apache 等其他 Web 平台执行的操作。所以你必须自己照顾他们。

# delphi - 重绘油漆盒不起作用

> ID：13959874
> 
> 赞同：1
> 
> 时间：2012-12-19T19:39:16.763
> 
> 标签：delphi

我将图像绘制到画框的函数从 2 个位置调用，如果从 TPagecontrol pagechange 调用它可以正常工作，但如果从 form.formresize(….) 调用，图像被绘制，但随后画框被重新绘制变得完全变白。不知道这个恶行来自什么顺序——

```
procedure TForm.FormResize(Sender: TObject);
begin
     //  frist image shown and then re painted white ???
     PaintImage2PaintBox(……….);
end;  

procedure TForm.pgc_mainmenuChange(Sender: TObject);
begin
     //  works fine as  expected  after pagecontrol  tab change 

      PaintImage2PaintBox(……….);
end;;

procedure PaintImage2PaintBox(……….);
begin
        ///  draw into a PaintBox
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:42:48.733

您不能自己调用​​画框`OnPaint`事件处理程序。当你这样做时，油漆盒画布没有准备好。为了强制绘制框重新绘制，您需要调用`Invalidate`or`Repaint`方法。像这样：

```
PaintBox1.Invalidate; 
```

或者

```
PaintBox1.Repaint; 
```

调用`Invalidate`会导致异步重绘。控件被标记为*脏*，当消息队列下一次为空时，一条`WM_PAINT`消息被合成，控件将被重新绘制。

调用`Repaint`强制同步绘制周期。也就是说，将执行绘制，然后`Repaint`函数将返回。

除非你有特殊原因强制同步重绘，否则我建议你调用`Invalidate`.

@Sertac 在评论中建议您的绘画代码不在`OnPaint`处理程序中。如果真是这样，那就是更大的问题了。您必须将所有绘画代码放在附加到绘画框`OnPaint`事件的事件处理程序中。

# android - 如何解析图像并将其显示在我的列表视图中？

> ID：13959879
> 
> 赞同：-4
> 
> 时间：2012-12-19T19:39:29.103
> 
> 标签：android, parsing

我是 android 新手，我目前正在制作一个解析 RSS 提要的应用程序，我还想获取 RSs 提要的图像，但不知道如何在列表视图中显示图像以及文本。你的帮助将非常对我有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:10:28.967

要`ListView`使用自定义视图创建一个，您需要创建一个扩展的类`BaseAdapter`。然后，您需要重写其`getView()`方法以返回您的自定义视图，在本例中，该视图包含`ImageView`一个`TextView`. 然后将此类的一个实例设置为您的`ListView`.

这应该有助于 [在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

# java - 使用 jsp 从 POST 表单中提取 100 多个输入数据：有更好的方法吗？

> ID：13959884
> 
> 赞同：2
> 
> 时间：2012-12-19T19:39:54.160
> 
> 标签：java, forms, jsp

我正在编写的 servlet 需要访问所有 100 多个 POST 参数（由表单填写）：参数因类型（文本、选项、选择等）而异。使用以正确顺序获取的参数，servlet 构造一些`@Entity`对象实例，这些实例稍后将使用`JPA`.

是否有更直观的方法将发布参数值映射到`@Entity`对象，而不是循环`HTTPServletRequest.getParametersMap()`并将这些值保存到临时变量中以创建对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:51:28.393

如果您确保实体 bean 属性名称与请求参数名称完全匹配，那么您可以为此使用[`BeanUtils#populate()`](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#populate%28java.lang.Object,%20java.util.Map%29)Apache [Commons BeanUtils](http://commons.apache.org/beanutils)。

```
BeanUtils.populate(entity, request.getParameterMap()); 
```

就这样。

为了更进一步，您可以采用 MVC 框架，该框架根据*视图的组成方式将请求参数透明地映射到 bean 属性（**模型*） （甚至还有透明的转换、验证和调用 bean 操作方法！），例如作为[JSF](https://stackoverflow.com/tags/jsf/info)或[Spring MVC](https://stackoverflow.com/tags/spring-mvc/info)。

# c# - 在客户端将服务器端 OnClientclick 更改为 jQuery

> ID：13959885
> 
> 赞同：1
> 
> 时间：2012-12-19T19:40:01.897
> 
> 标签：c#, jquery, asp.net

如何将此代码更改为客户端的 jQuery 而不是服务器端代码。C＃

btnUpload.OnClientClick = "javascript:showFileUploader('ctl00_contentMain_pnlUploadCntrlContainer'); return false;";

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:45:35.967

```
$('#<%= btnUpload.ClientID %>').click(function(){
       showFileUploader('#<%= pnlUploadCntrlContainer.ClientID %>'); 
       return false;
}); 
```

# jquery-isotope - 试图在调整大小时显示隐藏的内容

> ID：13959889
> 
> 赞同：1
> 
> 时间：2012-12-19T19:40:21.680
> 
> 标签：jquery-isotope

我目前正在使用同位素来帮助我调整一组盒子的大小和重新布局。当它调整其中一个 div 的大小时，我想用隐藏的 div 替换内容。

这里有一些代码给出一个想法：

```
$('#container-2').isotope({
    childSelector: '.child-big',
    masonry: {
        columnWidth: 468
    };
});

$('.child-big').click(function() {
    var $this = $(this);
    if ($this.hasClass('tall')) {
        tileStyle = {
            width: 468,
            height: 150
        };
    }
    else {
        tileStyle = {
            width: 468,
            height: 190
        };
    }

    $this.toggleClass('tall');

    $this.find('.child-content').stop().animate(tileStyle);

    $('#container-2').isotope('reLayout')

});​ 
```

如果有帮助，还有更多代码：http: [//jsfiddle.net/Mx6KH/4/](http://jsfiddle.net/Mx6KH/4/)

我不知道如何让它切换。在这个项目的早期版本中，我一直在使用 jQueryUI 的 addClass 和 removeClass 函数，但我不确定这是否仍然适合这种设置，或者是否有更简单的方法来完成它；这变得有点笨拙。

# eclipse - 当我们在 Eclipse 插件依赖项中有 `Required Plug-ins` 时，为什么我们需要 `Imported Packages`？

> ID：13959891
> 
> 赞同：17
> 
> 时间：2012-12-19T19:40:23.723
> 
> 标签：eclipse, dependencies, eclipse-pdt

在开发 Eclipse 应用程序时，MANIFEST.MF 中的依赖项选项卡有两列。

一个是`Required Plug-ins`，另一个是`Imported Packages`。

为什么我们需要`Imported Packages`时`Required Plug-ins`？

评论说*“这个插件依赖于没有明确标识它们的原始插件”*，但我不确定在什么情况下不想明确标识它们的原始插件，它的优势是什么?

![在此处输入图像描述](../Images/255286d6c8be7d64686f9987a035f1d8.png)

# 添加

相关问题 - [Eclipse Packages 和 Plug-ins 有什么区别？](https://stackoverflow.com/questions/13960450/whats-the-difference-between-plug-ins-and-packages-how-can-i-export-plug-ins-o)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T21:37:11.407

导入一个包比需要一个包提供了一个额外的间接级别。

考虑一些标准 API 的情况`org.standard.framework`...... 假设有两家公司实现了这个 API，也许你有 bundles`com.abc.framework`和`com.xyz.framework`. 这两个实现包都会导出`org.standard.framework`包。

现在假设，您需要一个`org.standard.framework`实现，但您并不特别关心是哪一个。如果您需要其中一个`com.abc.framework`或`com.xyz.framework`捆绑，则您将自己绑定到特定的实现。使用 import-package 指令，您可以让 OSGi 充当间接层。

import-package 的另一个优点是，如果将包移动到另一个包，您的依赖项不需要更改。当捆绑包被分解或组合时，在重构期间可能会出现这种情况。

由于这些原因，OSGi 规范编写者现在通常建议使用相对较新的 import-package 指令而不是 require-bundle。问题是并非所有的捆绑包都为此做好了准备。许多人在导出包时还没有指定版本。这使得 import-package 在许多情况下变得不切实际。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:48:41.273

指定对整个插件的依赖，如果你有很多插件，那么只有一个必需的包可能会创建一个循环依赖。最好只指定您实际需要的包。对于少量的插件，如果您确定能够有效地维护依赖关系，欢迎您通过指定整个插件来简化您的生活。希望这可以帮助。

# java - Java Applet 强制密钥释放

> ID：13959895
> 
> 赞同：0
> 
> 时间：2012-12-19T19:40:34.207
> 
> 标签：java, applet, keyrelease

我有一个游戏，当游戏结束时会显示“游戏结束”屏幕。为了从游戏结束屏幕开始新游戏，提示用户按空格键。在我的游戏中，用户按下（并且可以按住）空格键来执行攻击。在我的线程中，如果（以及何时）用户或 AI 的健康减少到/或低于零，则显示游戏结束屏幕。因此，很有可能当空格键上的游戏结束时，游戏结束时屏幕会闪烁一秒钟，然后游戏开始（为了使事情更流畅，而不是我正在使用的传统 keyPress 语句影响运行 repaint() 函数的线程的布尔值）。我的问题是我需要输入什么语法或命令来“模仿”正在释放的屏幕？

# objective-c - NSNumberFormatter 拒绝用户的所有更改：“值 '3' 无效”

> ID：13959896
> 
> 赞同：1
> 
> 时间：2012-12-19T19:40:36.380
> 
> 标签：objective-c, cocoa, nsnumberformatter

我正在使用 NSNumberFormatter，但它并没有像我预期的那样工作。
我在该字段中输入的所有内容都会被拒绝，并显示“值'[值]'无效”的消息。
它具有以下设置：

```
Behavior: Mac OS X 10.4+ Default
Style: Currency
Localize: YES
Sample: Unformatted: 1234,75 Formatted: € 1.234,75 
```

我将`Constraints`字段留空。我应该改变什么才能`3`变成`€ 3,00`或至少让它接受像这样的价值观`€ 31,56`？

在发布前最后一次测试时，我以某种方式设法`€ 34,12`在那里获得了价值。尝试编辑它时，如果我输入与上述消息完全相同的值，它甚至会拒绝我的编辑。

在发布前最后一次测试时，我注意到如果我`discard changes`在带有该讨厌错误消息的对话框中进行选择，则该值会从空变为空`€ 0,00`，并且如果我按 Enter 键，它将接受该值。但是，如果我再次双击表格单元格并按 Enter 而不更改任何内容，它会拒绝它（尽管我仍然可以通过丢弃更改获得 0,00 欧元）...

**编辑：** 在 IB 中，我可以在该`Unformatted`字段中填写我想要的任何内容，并且所需的输出会出现在该`Formatted`字段中。

# asp.net-mvc - 用于 asp.net MVC Web 服务的常用操作过滤器或 HttpModule

> ID：13959897
> 
> 赞同：0
> 
> 时间：2012-12-19T19:40:39.877
> 
> 标签：asp.net-mvc, web-services, httpmodule, action-filter

我们有一个用 MVC 1.0 编写的 Web 服务。需要拦截对该服务的每个请求。在这种情况下，开发一个 HTTPModule 来拦截每个请求并在到达代码之前修改方法参数是否明智，或者我应该创建操作过滤器并将属性放在每个方法上？我的第一个猜测是，而不是用动作过滤器属性标记每个方法，我应该只创建一个 httpModule ，这将最大限度地减少工作量和代码。

例子

> 1.  客户端调用“服务名/操作/用户名”
> 2.  服务器在 HTTPModule 中拦截这个请求，解码用户名
> 3.  解码用户名被传递给动作。

大家还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:52:59.420

您可以通过使用继承自 Route 的自定义路由来解决此问题。就像是：

```
public class UserNameRoute : Route
{
    public override RouteData GetRouteData(HttpContextBase httpContext) {
        var routeData = base.GetRouteData(httpContext);

        // Not sure if you need to set routeData.Values["username"] too
        // to make sure the route catches on
        routeData.DataTokens["username"] = DecodeUserName(routeData.Values);

        return routeData;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values) {

        values["username"] = EncodeUserName(requestContext.RouteData.DataTokens);

        return base.GetVirtualPath(requestContext, values);
    }
} 
```

然后你“只是”必须实现 DecodeUserName 和 EncodeUserName。

# android - 将线性布局添加到 GridView 会导致每个元素作为一个完整的行

> ID：13959898
> 
> 赞同：2
> 
> 时间：2012-12-19T19:40:47.037
> 
> 标签：android, android-layout

我正在尝试将 LinearLayout 添加到 GridView，但遇到了麻烦。基本上，我正在尝试制作一组​​带有图像的图标。（如 Launcher.app）

我看到的是，当我的 GridView 显示出来时，它并没有分成小图标。相反，每个图标都显示在自己的行中。相关文件和代码如下：

我的适配器：

```
 @Override public View getView(int position, View convertView, ViewGroup parent) {
            LinearLayout llView;
            ImageView imageView;
            TextView textView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                LayoutInflater inflater = FolderSelectionActivity.this.getLayoutInflater();
                llView = (LinearLayout) inflater.inflate(R.layout.folder_view, null);
            } else {
                llView = (LinearLayout) convertView;
            }
            imageView = (ImageView) llView.findViewById(R.id.folder_image_view);
            textView = (TextView) llView.findViewById(R.id.folder_text_view);

            imageView.setImageBitmap(mDrive.getPreview(mFiles.get(position)));
            textView.setText(mFiles.get(position).getTitle());
            return llView; 
```

我的视图的 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#FF0000FF"
    android:orientation="vertical"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content">

    <ImageView android:id="@+id/folder_image_view"
        android:scaleType="centerCrop"
        android:background="#FFFF0000"
        android:layout_width="100px"
        android:layout_height="100px"/>

    <TextView android:id="@+id/folder_text_view"
        android:background="#FF00FF00"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

最后，我的活动布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <GridView android:id="@+id/folder_grid_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

  </RelativeLayout> 
```

我已经尝试对我的 LinearLayout 进行各种调整，但我似乎找不到任何有效的方法。有人知道在这里做什么吗？

编辑：

imgur 截图：http: [//imgur.com/PsSvW](http://imgur.com/PsSvW)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:45:11.507

你为什么要将膨胀的视图投射`convertView`到一个`LinearLayout`？这不是必需的。删除 cast 语句后尝试`(LinearLayout)`。如果这没有帮助，您可以尝试单独构建`TextView`and`ImageView`并将它们添加到`ViewGroup parent`using`addView()`

# javascript - 使用 Javascript（正则表达式）查找不在 HTML 标记内的文本

> ID：13959912
> 
> 赞同：4
> 
> 时间：2012-12-19T19:41:50.563
> 
> 标签：javascript, regex

我有一个来自 DOM 元素的字符串，其中包含类似于以下内容的内容：

```
<span class='greenhornet'>Can you catch the green?</span> 
```

我需要知道**green**这个词的位置。

在这种情况下，如果我设置了一个模式`/green/`，JS`exec()`当然会返回第一次出现的**绿色**（位置 13）。

有没有办法告诉 JS 正则表达式忽略`!`这个词**green**，如果它介于`<`and`>`或者有没有更简单的方法来做到这一点？

哦，我也不能只删除 HTML！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:06:33.227

正如评论者（和 user1883592）所建议的那样，剥离 HTML 或从 HTML 中解析文本是正确的答案。在 HTML 中使用正则表达式是输家的游戏；你已经被警告过了。

但是，话虽如此，如果你真的想玩那个游戏，我首先要确保你的任期和最后一个右括号之间没有左括号；换句话说：

```
var greenRegex = />[^<]+(green)/;
var position = "<span class='greenhornet'>Can you catch the green?</span>".search(greenRegex);
// position = 25, not 13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:17:57.567

您可以获得 span 元素的 innerHTML。不需要正则表达式。

# icalendar - iCal 文件 (.ics) 是否有注释字符

> ID：13959916
> 
> 赞同：8
> 
> 时间：2012-12-19T19:42:04.127
> 
> 标签：icalendar, comments

我查看了[iCal 规范](http://www.ietf.org/rfc/rfc2445.txt)，但根本找不到任何东西。在过去的几天里，我也通过谷歌搜索了很多次。

我发现一些人使用服务器端语言（主要是 PHP）来读取 .ics 并删除额外的字符，所以这让我相信他们不受支持，因为他们正在删除额外的标记。

是否可以在 .ics 文件中包含注释？我不是在谈论组件属性。

**编辑**：经过更多搜索，我得出的结论是`BEGIN:VCALENDAR`and之外的任何内容都`END:VCALENDAR`可能被忽略，因此将其作为评论。我导出了我的一个 Google 日历，手动添加了一些内容，然后将其上传回来，没有出现明显问题。对这个想法有什么想法或经验吗？

**编辑2**：很久以后才回到这个。我相信最好的方法是定义您自己的自定义属性，以 X- 开头，如下所示。如果读取文件的工具不能识别它，它将被忽略。所以具体的方法是确保你选择一个不太可能被识别的名字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:55:29.883

您可以添加一个 x-comment 属性并将其值作为您的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T10:42:11.820

在任意行前输入“X-”

示例： X-STATUS:CONFIRMED ，现在 status:confirmed 将被评论

# php - Laravel 共享主机 - PHP 5.3 及更高版本不推荐使用指令“safe_mode”

> ID：13959918
> 
> 赞同：1
> 
> 时间：2012-12-19T19:42:16.650
> 
> 标签：php, shared-hosting, laravel

我为我的一个客户用 laravel 创建了一个网站，他们使用的是共享主机。

我将 laravel 安装到它的主文件夹中，因此`public`文件夹成为`public_html`主机中的文件夹，我将其更改`public_html`为 paths.php 文件中。

而且，在我安装它之后，我开始得到

> 指令 'safe_mode' 在 PHP 5.3 及更高版本中已弃用

错误。在我用谷歌搜索之后，每个人都说我需要从我的`php.ini`文件中注释掉 safe_mode，但由于我在共享主机上，我无法改变它。

有什么建议么？

PS：我的客户没有技术知识，付了钱给托管后，他们不想改变它，希望我处理这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:51:42.033

这可能是由于您的错误报告级别。尝试忽略`E_DEPRECATED`和可能`E_WARNING`。

如果你运行的是 Laravel 3，你应该可以在 application/config/error.php 的第 16 行附近设置你忽略的错误级别。

```
/*
|--------------------------------------------------------------------------
| Ignored Error Levels
|--------------------------------------------------------------------------
|
| Here you simply specify the error levels that should be ignored by the
| Laravel error handler. These levels will still be logged; however, no
| information about them will be displayed.
|
*/

'ignore' => array(E_WARNING, E_NOTICE, E_USER_NOTICE, E_DEPRECATED, E_USER_DEPRECATED), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:16:36.223

检查您的 php.ini 文件并找到 safe_mode 声明并将其注释掉。之后您可能必须重新启动 Apache。

# c# - 在 C# 中，为什么接口实现必须显式实现另一个版本的方法？

> ID：13959920
> 
> 赞同：13
> 
> 时间：2012-12-19T19:42:23.490
> 
> 标签：c#, .net, interface, explicit-implementation

举个例子：

```
public interface IFoo
{
    IFoo Bar();
}

public class Foo : IFoo
{
    public Foo Bar()
    {
        //...
    }

    IFoo IFoo.Bar() { return Bar(); } //Why is this necessary?
} 
```

为什么`IFoo Bar()`即使在没有强制`Foo`转换的`IFoo`情况下转换为必要的隐式实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:47:08.840

微软对此主题有[详细](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)的描述，但归结为多个接口/类的实现，这些接口/类中具有相同的方法。隐式*不再适用*于这种情况。

```
class Test 
{
    static void Main()
    {
        SampleClass sc = new SampleClass();
        IControl ctrl = (IControl)sc;
        ISurface srfc = (ISurface)sc;

        // The following lines all call the same method.
        sc.Paint();
        ctrl.Paint();
        srfc.Paint();
    }
}

interface IControl
{
    void Paint();
}
interface ISurface
{
    void Paint();
}
class SampleClass : IControl, ISurface
{
    // Both ISurface.Paint and IControl.Paint call this method.  
    public void Paint()
    {
        Console.WriteLine("Paint method in SampleClass");
    }
}

// Output: 
// Paint method in SampleClass 
// Paint method in SampleClass 
// Paint method in SampleClass 
```

如果我们采用显式方法，我们最终会得到这个。

```
public class SampleClass : IControl, ISurface
{
    void IControl.Paint()
    {
        System.Console.WriteLine("IControl.Paint");
    }
    void ISurface.Paint()
    {
        System.Console.WriteLine("ISurface.Paint");
    }
} 
```

当实现的类型发生冲突时，这一切都归结为提供唯一性。在您的示例中，`Foo` *是* `IFoo`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:49:48.250

在这种情况下需要它，因为 C# 不支持接口的返回类型协变，所以你的函数

```
public Foo Bar()
{
    //...
} 
```

不满足`IFoo`接口，因为`Bar`方法的返回类型不同。

由于您还想实现接口，因此您唯一的选择是显式地这样做，因为您已经`Bar()`在类上定义了一个方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T19:47:34.520

你可以像这样解决它（有点难看，但要注意强类型）：

```
public interface IFoo<T> where T : IFoo<T>
{
    T Bar();
}

public class Foo : IFoo<Foo>
{
    public Foo Bar()
    {
        //...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T19:43:24.553

因为您可能并不总是希望实现接口的方法与具有相同签名的另一个版本的方法的行为方式相同。

您可能还希望一个类为接口实现一个方法，但该方法不能从类本身的实例中访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T19:52:10.827

我建议您将隐式实现保留为受保护而不是公开。

```
public class Foo : IFoo
{
    **protected virtual** Foo Bar()
    {
        //...
    }

    IFoo IFoo.Bar() { return Bar(); } 
} 
```

关于为什么/何时在这个线程中使用显式实现有一个相当广泛的答案：

[隐式与显式接口实现](https://stackoverflow.com/questions/598714/implicit-vs-explicit-interface-implementation)

使用显式实现的一个很好的理由是，当您使用 Foo 类时，您可以轻松地使用依赖注入来获得更松散的耦合。

# linq - 如何使用流利的 linq 获取当前不在映射表中的对象

> ID：13959922
> 
> 赞同：3
> 
> 时间：2012-12-19T19:42:25.650
> 
> 标签：linq, entity-framework, ef-code-first, fluent

我正在尝试`Catalog`使用流利的 linq 获取当前未映射到购物车的所有对象。映射表`cart_catalog_mapping`由 EF 生成。我使用以下域对象。

购物车（删除了与问题无关的评论和额外字段

```
public partial class Cart : BaseEntity, ILocalizedEntity
    {

        public virtual string Name { get; set; }

        public virtual DateTime OpeningDateUtc { get; set; }

        public virtual DateTime ClosingDateUtc { get; set; }

        public virtual bool IsReadonly { get; set; }

        public virtual bool IsPreviewMode { get; set; }

        public virtual CustomerRole CustomerType { get; set; }

        public virtual ICollection<Catalog> Catalogs { get; set; }

    } 
```

目录（再次删除了与问题无关的评论和额外字段）

```
public partial class Catalog : BaseEntity, ILocalizedEntity
    {
        public virtual string Name { get; set; }

        public virtual string Code { get; set; }

        public virtual bool Published { get; set; }

        public virtual int DisplayOrder { get; set; }
    } 
```

带代码的 EF5 首先创建购物车和目录表。它还识别出 Cart 具有列表并创建一个 cart_catalog_mapping 表。我正在尝试获取`Catalog`表中没有引用的所有行`cart_catalog_mapping`。我设想的 SQL 是

```
SELECT * FROM Catalog WHERE Catalog.Id NOT IN (SELECT Catalog_Id FROM cart_catalog_mapping) 
```

我尝试使用的流利的 linq 如下： public IList GetAllUnassociatedCatalogs() { IRepository _catalogRepository; IRepository _cartRepository;

```
 var query = from catalog in _catalogRepository.Table
                    from cart in _cartRepository.Table
                    where !cart.Catalogs.Contains(catalog)
                    select catalog;

    return query.ToList(); 
```

}

不幸的是，返回的 IList 没有元素。（目前 cart 或 cart_catalog_mapping 表中没有行，catalog 表中有 3 行）

差点忘了，映射表

```
public partial class CartMap : EntityTypeConfiguration<Cart>
    {
        public CartMap()
        {
            this.ToTable("Cart");
            this.HasKey(c => c.Id);
            this.Property(c => c.Name).IsRequired().HasMaxLength(100);
            this.Property(c => c.IsOnline).IsRequired();

            this.HasMany(c => c.Catalogs)
                .WithMany()
                .Map(m => m.ToTable("Cart_Catalog_Mapping"));
        }
    }

public partial class CatalogMap : EntityTypeConfiguration<Catalog>
    {
        public CatalogMap()
        {
            this.ToTable("Catalog");
            this.HasKey(c => c.Id);
            this.Property(c => c.Name).IsRequired().HasMaxLength(100);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:14:05.957

从您的示例中，我假设 Cart 和 Catalog 是多对多的。在这种情况下，您是否也可以在 Catalog 对象上放置一个 ICollection 的 Carts ？如果你能做到这一点，那么你需要做的就是：

```
var query = catalogRepository.Any(catalog => catalog.Carts.Any());
return query.ToList(); 
```

或者，如果您不喜欢使用扩展方法，您可以按照@hvd 的建议进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:44:48.417

您也可以尝试转换为 LEFT JOIN .. WHERE join 为空：

```
var query = from catalog in Catalog.Table
            join cart in CartMap.Table on catalog.Id equals cart.Catalog_Id into map
            from cm in map.DefaultIfEmpty()
            where cm equals null
            select catalog; 
```

# android - 在 Android 中扩展现有的元素类

> ID：13959923
> 
> 赞同：0
> 
> 时间：2012-12-19T19:42:28.257
> 
> 标签：android

假设我想在 Android 中扩展一个 e,element 调用，例如 Button 元素。所以我有这个类：

```
Class MyButton extends Button{
     ...

} 
```

所以当我想使用这个元素时，我应该在布局 xml 文件中放置：

```
<MyButton/> 
```

或者

```
<Button> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:44:05.467

您将必须使用完全限定的类名，因此：

```
<my.application.package.MyButton> 
```

并确保您的班级是`public`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:45:45.043

你可以在这里添加它：

```
<you.package.MyButton> 
```

请注意，您需要使用 xml 属性实现这两个构造函数，否则这将不起作用：

```
//Constructor that is called when inflating a view from XML.
View(Context context, AttributeSet attrs)

//Perform inflation from XML and apply a class-specific base style.
Vew(Context context, AttributeSet attrs, int defStyle) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:46:14.443

您应该查看此站点以获取有关自定义视图的更多信息：http: [//developer.android.com/training/custom-views/create-view.html](http://developer.android.com/training/custom-views/create-view.html)

在这种情况下，您需要使用完整的类路径，但您应该查看该参考以获取有关自定义视图的更多信息。

# c# - 无法引用外部 CSS

> ID：13959924
> 
> 赞同：1
> 
> 时间：2012-12-19T19:42:33.577
> 
> 标签：c#, asp.net, css

我正在尝试在我的 site.master 页面上使用来自 CDN 的 CSS 文件。CSS 位于`http://cdn.meriranchi.com/styles/site.css`. 我尝试了以下的许多变体，但没有运气。

site.master 具有以下标记：

```
<head runat="server">
    <title>::MeriRanchi:: Ranchi ka search engine. Ranchi's 1st of its kind, City Search.
        Search for the shops, institutes , tourist spots , emergency services etc with ease.
    </title>
    <link rel="shortcut icon" href="favicon.ico" />
    <link  rel="stylesheet"  id="CssFile" runat="server"/>
          <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

在我后面的代码中，我将 href 属性添加到`CssFile`：

```
CssFile.Attributes.Add("href","http://cdn.meriranchi.com/Styles/Site.css"); 
```

以上在 IE9 中呈现以下 HTML：

```
<head><title>
    ::MeriRanchi:: Ranchi ka search engine. Ranchi's 1st of its kind, City Search.
        Search for the shops, institutes , tourist spots , emergency services etc with ease.

</title><link rel="shortcut icon" href="favicon.ico" /><link id="CssFile" rel="stylesheet" type="text/css" href="http://cdn.meriranchi.com/Styles/Site.css" /><meta name="description" content="schools and colleges in ranchi,restaurants in ranchi,coaching institutes in ranchi,shopping complex in ranchi,shopping mall in ranchi,best cloth store in ranchi
best college in ranchi,best school in ranchi,showrooms in ranchi,authorised dealers in ranchi,grocery stores in ranchi,falls in ranchi,tourist places in ranchi,zoo in ranchi,tourist spots in ranchi,
schools and colleges, BIT Mesra, RINPAS, CIP Ranchi, Ranchi Mental Hospital, HEC, dams in ranchi, jagannathpuri rath mela, hadia, hadiya, hariya, morhabadi maidaan, firayalal chowk, 
" /><meta name="keywords" content="tourist places in ranchi, tourist spots in ranchi, business listings in ranchi, shops in ranchi, schools colleges in ranchi, restaurants in ranchi, movies in ranchi, jobs in ranchi,real estate deals in ranchi" />
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:34:42.123

您的浏览器很可能认为它已经拥有您的外部来源 CSS 文件的副本。您可以通过在浏览器的开发人员工具中查看网络请求流量来检查这一点，以确保它正在请求文件的新副本。

如果浏览器不是，您应该[按`CTRL`+`F5`](https://stackoverflow.com/a/385491/61654)刷新整页。

# xamarin.ios - 在 Monotouch 中按下时是否可以找到 UIBarButtonItem 的位置？

> ID：13959927
> 
> 赞同：2
> 
> 时间：2012-12-19T19:42:46.627
> 
> 标签：xamarin.ios, uibarbuttonitem, eventargs

在我的 MonoTouch 应用程序中，当用户在 NavigationBar 中按下 UIBarButtonItem 时，我试图显示一个相对于用户触摸屏幕位置的小型 UIMenuController。

我之前可以在 Objective C 中使用以下代码执行此操作：

```
UIBarButtonItem* logoutBtn = [[UIBarButtonItem alloc] initWithTitle:@"Logout"
   style:UIBarButtonItemStyleBordered target:self 
   action:@selector(displayLogoutMenu:event:)]; 
```

在这里，我可以从传递给我的方法的 UIEvent 中获取印刷机的坐标。

但是 MonoTouch 尝试处理这个问题的方式略有不同。

```
UIBarButtonItem logoutButton = new UIBarButtonItem("Logout",UIBarButtonItemStyle.Bordered,
   delegate(object sender, EventArgs e) {DisplayLogoutMenu(sender,e);}); 
```

这里我需要传入EventArgs。到目前为止，我一直无法从 EventArgs 中获取坐标（或任何真正有用的东西）。

无论如何可以从 EventArgs 中获取任何有用的信息，还是有另一种方法可以让我设置我的 UIBarButtonItem 委托，以便它可以传递 UIEvent？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:05:13.987

您可以传递选择器而不是委托：

```
UIBarButtonItem barButton = new UIBarButtonItem ("Logout", UIBarButtonItemStyle.Bordered, this, new Selector ("displayLogoutMenu:event:"));

[Export ("displayLogoutMenu:event:")]
void DisplayLogoutMenu (UIBarButtonItem barButton, UIEvent evt)
{
} 
```

# .net - 将日期作为对象属性传递给 Web 服务

> ID：13959929
> 
> 赞同：3
> 
> 时间：2012-12-19T19:42:56.320
> 
> 标签：.net, web-services, c#-4.0, wsdl

我是网络服务的新手，我试图找到解决方案，但找不到任何解决方案。

我正在尝试将对象作为参数发送到 Web 服务。

```
 [WebMethod]
    public bool CreatePatientService(Patient p)
    {
        AdminService AsRef = new AdminService();
        return AsRef.CreatePatient(p);
    } 
```

我的病人班如下：

```
[Serializable]
public class Patient
{

    public string NIC { get; set; }
    public string FullName { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public string Title { get; set; }
    public string Gender { get; set; }
    public string CivilStatus { get; set; }
    public DateTime DOB { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Address3 { get; set; }
} 
```

然后我使用 SOAPUi 来调用 Web 服务。

我将请求称为如下：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:CreatePatientService>
         <!--Optional:-->
         <tem:p>
            <!--Optional:-->
            <tem:NIC>15487236</tem:NIC>
            <!--Optional:-->
            <tem:FullName>awdss</tem:FullName>
            <!--Optional:-->
            <tem:FirstName>qewretr</tem:FirstName>
            <!--Optional:-->
            <tem:Surname>qscv</tem:Surname>
            <!--Optional:-->
            <tem:Title>Mr</tem:Title>
            <!--Optional:-->
            <tem:Gender>M</tem:Gender>
            <tem:CivilStatus>S</tem:CivilStatus>
            <tem:DOB>01/02/2002</tem:DOB>
            <!--Optional:-->
            <tem:Address1>nikhno</tem:Address1>
            <!--Optional:-->
            <tem:Address2>asdf</tem:Address2>
            <!--Optional:-->
            <tem:Address3>125</tem:Address3>
         </tem:p>
      </tem:CreatePatientService>
   </soapenv:Body>
</soapenv:Envelope> 
```

然后它给出以下错误。我该如何解决？

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Client</faultcode>
         <faultstring>System.Web.Services.Protocols.SoapException: Server was unable to read request. ---> System.InvalidOperationException: There is an error in XML document (19, 49). ---> System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer&amp; number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseUInt32(String value, NumberStyles options, NumberFormatInfo numfmt)
   at System.UInt16.Parse(String s, NumberStyles style, NumberFormatInfo info)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader1.Read2_TblPatient(Boolean isNullable, Boolean checkType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader1.Read7_CreatePatientService()
   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer8.Deserialize(XmlSerializationReader reader)
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
   at System.Web.Services.Protocols.SoapServerProtocol.ReadParameters()
   --- End of inner exception stack trace ---
   at System.Web.Services.Protocols.SoapServerProtocol.ReadParameters()
   at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()</faultstring>
         <detail/>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

**如果我删除了 DOB（日期），那么它可以正常工作。**

我参考以下帖子。但不能正常工作。

[Web 服务的正确日期时间格式](https://stackoverflow.com/questions/1109958/proper-datetime-format-for-a-web-service)

请帮忙..谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:12:30.863

DateTime 需要有时间值和日期，所以你错过了小时、分钟、秒等的事实是破坏它的原因。

```
yyyy-MM-ddTHH:mm:ss.fffffffzzzzzz is the expected format.

e.g. 2002-02-01T00:00:00.0 
```

[XML 反序列化 DateTime 格式](https://stackoverflow.com/questions/9529119/xml-deserialize-datetime-format)

# jquery - 未捕获的类型错误：无法读取 null 的属性“顶部”：冲突

> ID：13959930
> 
> 赞同：1
> 
> 时间：2012-12-19T19:42:59.093
> 
> 标签：jquery

我编写了这段代码来创建一个浮动侧边栏，它贴在浏览器窗口的顶部。我在第 3 行的 chrome 中收到此错误。

```
Uncaught TypeError: Cannot read property 'top' of null 
```

这导致我使用的插件无法工作。

```
$(document).ready(function(){
    // Floating sidebars on page nodes
    var sidebartop = $('.page-node .panels-flexible-region-node_layout-right').offset().top;
    $(window).scroll(function(){
        if( $(window).scrollTop() > sidebartop ) {
            $('.page-node .panels-flexible-region-node_layout-right').css({position: 'fixed', top: '40px', margin: '0 0 0 650px'});
        } else {
            $('.page-node .panels-flexible-region-node_layout-right').css({position: 'static', margin: '-35px 0 0 0'});
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:03:30.193

我认为，jQuery 找不到指定的选择器。我是对的

```
$('.page-node .panels-flexible-region-node_layout-right') 
```

返回空数组。尝试为您的侧边栏（或您想要偏移的元素）设置一些 id 并重写代码，例如

```
var sidebartop = $('#your-selector-id').offset().top; 
```

`.first-class .second-class`此外，您可以搜索和`.first-class.second-class`（注意第二个示例中缺少空格）查询规则之间的差异。

# javascript - 如何让文本区域填充表格列的高度？

> ID：13959939
> 
> 赞同：2
> 
> 时间：2012-12-19T19:43:27.563
> 
> 标签：javascript, html, css

在[这个 jsfiddle](http://jsfiddle.net/LKB9e/3/)中，单击演示中的“添加问题”按钮，这样它将附加一个表格行。我遇到的问题是，如果您在附加行的“问题”列下查看，`textarea`则不会填充其列的高度。如何获取附加行中的每个文本区域以填充其表格列的高度？

下面是部分 CSS 代码：

```
.question { 
    min-width:14%;
    max-width:14%;
    border:1px black solid;
    border-collapse:collapse;
}

.question textarea {
    min-width:auto;
    max-width:auto;
    resize:none;
    height:auto;
    font-size:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:38:53.407

默认情况下，`<textarea>`已显示为内联块并与基线垂直对齐。更改以下任何一项：

```
.question textarea {
  display: block;

  /* or */

  vertical-align: bottom;
} 
```

底部的空间是为延伸到基线以下的字母保留的行高部分，例如“g”或“y”。所以取消父母的行高也可以*（不确定Safari）：*

```
.question {
  line-height: 0;
} 
```

# jquery - 如何使用 jQuery 访问多维 JSON 数组中的值

> ID：13959943
> 
> 赞同：2
> 
> 时间：2012-12-19T19:43:43.417
> 
> 标签：jquery, json, multidimensional-array, getjson

所以我用 getJSON 获取一个多维 JSON 数组，我想访问数组中的值，但不能超过数组中的第一个元素。

```
"producers",
[
    {
        "producer":{
            "id":"1",
            "name":"Em\u00e5mejeriet",
            "address":" Grenv\u00e4gen 1-3",
            "zipcode":" 577 39",
            "district":" Hultsfred",
            "webpage":"http:\/\/www.emamejeriet.se",
            "logoURL":"..\/producenter\/images\/ema.png",
            "latitude":"57.4999",
            "longitude":"15.828"
        }
    },
    {
        "producer":{
            "id":"2", 
```

...等等。

我的代码：

```
$.getJSON("/url/producers.json", function(data) {
    $.each(data, function() {
        $.each(this, function(key, value) {
            console.log(value.producer);
        });
    });
}); 
```

输出是一个对象，我不知道有什么更好的粘贴方法，从浏览器控制台复制："`> Object {id: "1", name: "Emåmejeriet", address: "Grenvägen 1-3, zipcode: "577 39", disctrict: "Hulsfred"...}`

正如我所说，我从这个论坛搜索并测试了不同的方法，但无法理解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:07:33.467

打开你的萤火虫的控制台，粘贴以下内容并执行：

```
var json = '{' + 
'"peopleList":[' +
'{"id":1,"name":"marcelo","address":"rua meh","phone":"85 99999999"},'+
'{"id":2,"name":"marcelo2","address":"rua meh2","phone":"85 9999.9999"}]}';

var parsed = JSON.parse(json); 
```

现在，由于您将在 JSON 的第二层下有两个对象，您需要指定对象，然后您将看到它允许您选择其属性：

```
parsed.peopleList[0].name 
```

在使用动态生成的 JSON 之前，获取一些用于测试目的的虚拟数据（当然具有相同的结构）并在实现最终代码之前使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:59:18.290

如果 的输出`value.producer`是一个对象，那么您应该能够访问该对象的属性。例如，`value.producer.name`应该输出“asdfsadf”。

**更新**

看起来您的 json 数据无效。**（我假设“生产者”是数据对象的一个​​属性，并且该属性的值是所有“生产者”对象的数组。）**

我创建了这个小提琴（[http://jsfiddle.net/kAsPm/](http://jsfiddle.net/kAsPm/)），它按预期工作。我只需要在“生产者”之后将逗号更改为冒号：

```
"producers":  // changed from "producers",
[
    {
        "producer":{
            "id":"1",
            ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:53:21.833

我使用 tempo.js 渲染引擎，它进行多维数组渲染。这是链接 [http://tempojs.com/](http://tempojs.com/)

下载 tempo.cs 并点击链接。

# php - 为什么即使 var_dump() 显示索引已定义，我仍然会收到未定义的索引错误？

> ID：13959944
> 
> 赞同：3
> 
> 时间：2012-12-19T19:43:44.823
> 
> 标签：php, undefined-index

我正在创建一个应用程序来帮助跟踪我们青年部的孩子们在夏令营中获得的奖学金。应用程序的这一部分从数据库中选择他们当前拥有的金额，将其保存到名为 $oldAmount 的变量中，将其添加到 $fundsAmount，并使用新的资金金额更新数据库。

```
 //Select student's current allocated funds amount and save to $studentFunds array
    $selectQuery = "SELECT studentFunds FROM students WHERE studentNum = $studentNum";
    $selectStatement = $db -> prepare($selectQuery);
    $selectStatement -> execute();
    $studentFunds = $selectStatement -> fetchAll();

    //DEBUG: Display value of studentFunds array
    echo "Value of array studentFunds before operation: ";
    var_dump($studentFunds);

    //Save the value of $studentFunds['studentFunds'] to $oldAmount
    $oldAmount = $studentFunds['studentFunds'];

    //Perform operation: add old amount and new funds amount together
    $studentNewAmount = $oldAmount + $fundsAmount; 

    //DEBUG: display $studentNewAmount
    echo "Value of studentNewAmount after operation: ";
    echo $studentNewAmount;

    //DEBUG: $studentNewAmount = 255;
    $db -> query("UPDATE students SET studentFunds = '$studentNewAmount' WHERE studentNum = $studentNum"); 
```

出于某种原因，每当我运行应用程序时，我都会收到此错误：

> 注意：未定义索引：第 31 行 C:\xampp\htdocs\scholarshipManager\model\insertAllocation.php 中的 studentFunds

第 31 行在这里：

```
 $oldAmount = $studentFunds['studentFunds']; 
```

var_dump() 显示 $studentFunds 数组的以下内容：

运算前数组 studentFunds 的值：

```
array(1) { 
    [0]=> array(2) { 
            ["studentFunds"]=> string(3) "200"
            [0]=> string(3) "200" 
    }
} 
```

此外，由于该错误，我的数据库没有更新为新金额。

如您所见，studentFunds 索引确实包含一个值，那么为什么会发生这种情况。我误解了错误还是我的代码中有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:06:36.150

奥马尔的回答是正确的。有关更多详细信息，请查看 fetchAll 的文档： [PHP docs for fetchAll](http://php.net/manual/en/pdostatement.fetchall.php)

最重要的是 fetchAll 从您的查询中返回一个包含所有行的索引数组，并且每个索引数组都包含一个键和值的关联数组。结果，您想要的数据存储在`$studentFunds[0]['studentFunds']`

由于 fetchAll 返回一个数组，因此如果您使用 print_r 而不是 var_dump，对此类问题的故障排除答案应该会更快。print_r 的输出格式更适合于挑选（理解）数组。

作为实践，您还应该将其包装到某种形式的健全性检查中，以防例如传入的 $studentNum 无效或在数据库中找不到或找到多个记录。像这样的东西：

```
$oldAmount = 0;
if( is_array( $studentFunds ) && count( $studentFunds ) == 1 )
{
   $oldAmount = $studentFunds[0]['studentFunds'];
} 
```

如果您未能对查询结果进行至少基本的健全性检查，您会要求出现丑陋的错误，或者更糟糕的是，将意外记录的结果打印到界面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:49:34.517

`$studentFunds`是一个元素的数组。在第 31 行试试这个：

```
 $oldAmount = $studentFunds[0]['studentFunds']; 
```

# .net - 使用 Monodevelop 在 Ubuntu 12.04 上编译 F# 代码

> ID：13959949
> 
> 赞同：8
> 
> 时间：2012-12-19T19:44:00.437
> 
> 标签：.net, ubuntu, f#, mono, monodevelop

我按照[此处](http://thecodedecanter.wordpress.com/2012/09/06/installing-monodevelop-3-with-fsharp-support-on-ubuntu/)的说明在 Ubuntu 上安装支持 F# 的 Monodevelop，但是当我打开 Monodevelop 并尝试编译一个简单的 F# 程序时，我收到以下消息：

> 错误：未安装框架“.NETFramework 4.5”。

如果我使用 Monodevelop 使用的相同编译器在命令行上手动编译 ( `/usr/bin/fsharpc`)，则该文件将编译并生成一个运行良好的可执行文件。为什么项目不能在 Monodevelop 中编译，有没有办法修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T13:43:22.180

正式（截至 2013 年）MonoDevelop/XamarinStudio 尚不支持 F#。所以 Xamarin 不正式支持 F# 支持。

**但是，您可以使用 Visual Studio 2012（或 SharpDevelop）在Windows**上构建 F# 项目（以 .NET Framework **3.0**为目标），然后将编译后的二进制文件移至**Linux**。

我已经尝试过了，这个解决方案正在工作。

# phpquery - 使用 phpquery 的 Foreach 循环

> ID：13959953
> 
> 赞同：0
> 
> 时间：2012-12-19T19:44:12.760
> 
> 标签：phpquery

我正在使用 phpquery 循环遍历一个表并将每个标签的内容提取到它们自己的变量中。

```
foreach(pq('.body table tr') as $tag) {
  foreach(pq($tag)->find('td.fixData') as $td) {
    $x = pq($td)->text();
    echo '<p>'.$x.'</p>';
  }
} 
```

然而，它把每一场比赛都放在一个

标签

我想做的是把

第一第二第三第四

有任何想法吗？

# ruby-on-rails - Belongs_to 和 has_and_belongs_to_many 属于 Rails 中的同一张表

> ID：13959955
> 
> 赞同：8
> 
> 时间：2012-12-19T19:44:18.363
> 
> 标签：ruby-on-rails, activerecord

`Users`创建`Programs`. 这些可以被其他人关注/喜欢`Users`。然而，`Program`意志总是有一个创造者。

所以我需要一个`ProgramsUsers`表格来映射喜欢/关注。“创建者”是否也可以作为该表中的一种关系，或者也可以`Program`是`belongs_to`单个特定的`User`？

所以本质上：

程序.rb

```
class Program < ActiveRecord::Base
  has_and_belongs_to_many :users    #Likes/Follows
  belongs_to :user                  #Creator 
```

这是可以接受的还是建模不好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:51:00.073

我相信你可以做这样的事情

```
class Program < ActiveRecord::Base
  has_and_belongs_to_many :users    #Likes/Follows
  belongs_to :creator, ::class_name => 'User', :foreign_key => 'creator_id' 
```

这样，您可以在表`creator_id`上拥有一个字段`programs`，并使用`@program.creator`. 哦，顺便说一句，这不是糟糕的建模。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:56:35.057

像这样的东西：

```
class Program < ActiveRecord::Base
  has_many :followings
  has_many :followers, :class_name => 'User', :through => :followings
  belongs_to :creator, :class_name => 'User', :foreign_key => 'creator_id' 
```

# jquery - 检查 iframe 中的 div 是否在 Firefox 中可见

> ID：13959957
> 
> 赞同：0
> 
> 时间：2012-12-19T19:44:23.307
> 
> 标签：jquery, firefox, iframe, visible

我有一个名为 article_frame 的 iframe，其中包含多个 DIV，名为 article_disp_0、article_disp_1 等。一次只能看到其中一个。

当我在 iframe 之外时，我希望能够看到哪个是可见的，所以我有一个这样的脚本：

```
// find the currently selected article
for (i=0; i<=a_count; i++) {
    a_disp = "#article_disp_" + i;
    frame_disp = $('#article_frame').contents().find(a_disp);
    visible = frame_disp.is(':visible');
    if (visible) {
        art_div = i;
        break;
    }
} 
```

这一切在 Chrome 或 Safari 中都可以正常工作，但在 Firefox 中则不行。在 Firefox 中似乎没有设置可见值。那么我需要做些什么才能使它与 Firefox 一起工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:47:13.017

```
var iframe = document.getElementById('iframeId');
var innerDoc = iframe.contentDocument || iframe.contentWindow.document; 
```

然后

```
visible = $(innerDoc.getElementById("your ID")).is(':visible'); 
```

# c - 在C中为矩阵分配内存，为什么之后我不能访问矩阵？

> ID：13959960
> 
> 赞同：1
> 
> 时间：2012-12-19T19:44:28.457
> 
> 标签：c, memory-management, matrix, malloc

我正在使用`malloc`为矩阵分配内存，但之后我对矩阵进行的任何访问以设置元素，例如让我出现分段错误。

这就是我现在正在做的事情：

```
int **matrix = malloc(rows_number * columns_number * sizeof(int));

if (matrix) matrix[0][0] = 1; 
```

为什么矩阵创建后无法访问？调用成功，`malloc`所以我有足够的连续内存用于整个矩阵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:47:11.570

`int **matrix`声明`matrix`为指向 . 的指针的指针`int`。你想要一个指向数组的指针`int`。这将是`int (*matrix)[columns_number]`。您可以通过以下方式很好地分配它：

```
int (*matrix)[columns_number] = malloc(rows_number * sizeof *matrix); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:48:22.013

这里的问题是您只分配了内存，但您已将对象声明为一组指向指针的指针。双下标需要一个指向每一行的指针向量*或*一个告诉编译器有多少列的类型。

所以一些选项是：

*   用代码做下标计算，也许使用宏
*   做两个`mallocs()`并初始化一个行指针向量
*   malloc 特定类型的对象，以便编译器可以看到它

例如...

```
int (*matrix)[ROWS][COLS] = malloc(ROWS * COLS * sizeof(int));
...
(*matrix)[i][j] 
```

以下声明也将起作用：

```
int (*matrix)[][COLS] = malloc(ROWS * COLS * sizeof(int)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:47:25.050

*您已为int 指针*的动态数组分配内存，而不是*int 元素*。你可以尝试这样的事情：

```
int *matrix_storage = malloc(rows_number * columns_number * sizeof(int));
int **matrix = malloc(rows_number * sizeof(int*));
for( int i = 0; i < rows_number; ++i )
    matrix[i] = &matrix_storage[ i * columns_number ]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T19:52:00.527

Malloc 返回一个 void 指针，因此您没有创建二维数组。尝试类似：

```
int **matrix;
matrix = malloc(rows_number * sizeof(int*));
for (int i=0; i<rows_number; i++)
    matrix[i] = (int*)malloc(columns_number * sizeof(int)); 
```

# websocket - 如何使用 Ember-Data 加载推送的记录更新而不与 inFlight 事务冲突？

> ID：13959968
> 
> 赞同：3
> 
> 时间：2012-12-19T19:44:45.797
> 
> 标签：websocket, ember.js, ember-data

我的 Ember/Ember-Data/Rails 应用程序使用 WebSockets 将数据推送到客户端。我正在使用 Ember-Data 的 loadMany 方法将推送的数据添加到存储中。

但是，如果当前正在编辑和保存任何推送的记录，则 loadMany 将失败，因为该记录当前处于 inFlight 状态。例如：

-> 用户编辑记录并点击保存
-> Ember-Data 开始提交当前事务
-> Rails 控制器响应此记录的更新 JSON 并通过 WebSockets 发布更新数据
-> 在事务完成之前接收到 WebSockets 数据，Ember -在记录被标记为干净之前，数据尝试使用此新数据更新记录

我发现的唯一解决方案是使用 Ember.run.later 延迟应用更新，超时时间约为 20 毫秒。（Ember.run.next 不起作用。）

但是，这只处理用户刚刚保存记录的情况。如果巧合的是，用户当前正在编辑的记录被其他人编辑，并且在事务完成之前收到推送更新，那么冲突仍然会发生并触发错误。

所以我的问题是，有没有办法：

(a) 防止商店在受影响的记录进行中时尝试加载更改；或者 (b) 延迟推送更新，直到所有事务都清理干净？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:43:45.233

`*crickets*`

现在，我已经通过手动检查记录是否处于不可更新状态来解决这个问题，如果是，则在它退出该状态时注册一个回调。然后在回调之后，我检查推送更新是否具有`updatedAt`比记录更新的值，如果是，则合并两者。

# integer - 返回负整数以从计数器中删除

> ID：13959970
> 
> 赞同：0
> 
> 时间：2012-12-19T19:45:01.823
> 
> 标签：integer, return, conditional, counter

我有一个 php 脚本来处理数据并将此数据一次传递给另一个函数 10 在下一个脚本中有一个 if 语句可以验证其他信息并且如果事情不匹配就会中断所以如果 10 被传递给第二个函数然后10 由于脚本没有返回任何附加验证，因此未处理如果第二个脚本中的验证失败，是否有办法将 -counter 返回到第一个脚本。

```
function first_function()
{
    $i = 0
    if ($i >= 10) {
        break;
    } else {
        second_function();
        ++$i;
    }
}

function second_function()
{
    if ($test != 'answer') {
        return --$i;
        break;
    } else {
        process_data();
    }
} 
```

# c# - 通过 ActiveX 控件在 JavaScript 中启动应用程序时转义路径

> ID：13959975
> 
> 赞同：1
> 
> 时间：2012-12-19T19:45:16.810
> 
> 标签：c#, javascript, .net, activex

## 客观的

我想通过 JavaScript 将文件路径发送到 .NET COM 组件，而不必在 JavaScript 中对其进行转义。

* * *

## 环境

*   视窗 7 x64
*   .NET 4.0

## 我们知道什么？

*   当你通过这样的路径时，`C:\temp`你会得到以下......

![在此处输入图像描述](../Images/39b14bb36823f3e7fd97174315b91818.png)

*   当您通过 UNC 路径时，`\\Server\Directory`您会得到以下信息...

![在此处输入图像描述](../Images/5cee2083cfb7377dcbf305a78c593770.png)

*   当您转义路径（例如`C:\\temp`或`\\\\Server\\Directory`）时，收到的值是正确的。

## 我尝试了什么？

*   存储到私有字段时，我尝试`@`在变量名前面使用。
*   我试图找人用我的 Google Fu 做同样的事情，但没有。

## 代码

### COM 组件

```
[Guid("30307EE0-82D9-4917-B07C-D3AB185FEF13")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
[ComVisible(true)]
public interface ILauncher
{
    [DispId(1)]
    void setDirectory(string location);

    [DispId(2)]
    void launch(string args, bool debug = false);
}

[Guid("F91A7E9F-2397-4DEC-BDAD-EBFC65CFCCB2")]
[ProgId("MyActiveXControl.MyControl")]
[ClassInterface(ClassInterfaceType.None)]
[ComDefaultInterface(typeof(ILauncher))]
[ComVisible(true)]
public class Launcher : ILauncher
{
    private string _location;

    public void setDirectory(string location)
    {
        _location = location;
    }

    public void launch(string args, bool debug = false)
    {
        var programFiles = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86);
        if (string.IsNullOrEmpty(programFiles))
        {
            programFiles = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
        }

        var exe = string.Format(@"{0}\MyApp\MyApp.exe", programFiles);
        if (debug)
        {
            MessageBox.Show(exe, "Target Path", MessageBoxButtons.OK, MessageBoxIcon.Information);
            MessageBox.Show(_location, "Drop Location", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

        var startInfo = new ProcessStartInfo(exe, string.Format("\"{0}\" \"{1}\"", args, _location));
        startInfo.WorkingDirectory = Path.GetDirectoryName(exe);
        startInfo.CreateNoWindow = false;

        try
        {
            var p = Process.Start(startInfo);
            if (p == null)
            {
                MessageBox.Show("The app could not be started, please try again.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
} 
```

### JavaScript

```
<html>
    <body>
        <input type="button" value="Launch Control" onclick="launchControl();" />

        <script>
            function launchControl() {
                o = new ActiveXObject("MyActiveXControl.MyControl");
                o.setDirectory("C:\\temp");
                o.launch("test_args", true);
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:52:21.223

最后我们发现我们只需要更改 JavaScript，因为它不能在以后完成。当它到达我们的时候，我们最终不得不添加反斜杠，但我们真的做不到，因为我们不知道一个目录从哪里开始，另一个在哪里结束。

只需修改 JavaScript。

所以我们与现有的权力合作，一切都很好。

# java - 我应该如何组织我的研究文件以用于 Intellij-IDEA？

> ID：13959980
> 
> 赞同：0
> 
> 时间：2012-12-19T19:45:25.993
> 
> 标签：java, intellij-idea

我已经学习 Java 几个月了，我想开始使用 Intellij IDEA。
对于每本书或信息源，我创建了一个子目录，然后为每一章创建了另一个子目录。所以我目前的结构是这样的：

```
/java/headfirst/chapter1
/java/headfirst/chapter2
..
/java/tutorialspoint/
/java/youtube/newboston/
/java/deitelHTP/chapter1/
/java/deitelHTP/chapter2/
.. 
```

这在使用 vim 和命令行时效果很好。

现在有了 Intellij，我正在寻找有关如何最好地组织我的文件的反馈。似乎我需要为我现有的目录创建一个项目（或导入），这似乎没问题。我应该以其他方式这样做还是有更好的方法来组织我的文件？

到目前为止，我所做的几乎所有事情都只有几个类文件，而且我还没有真正了解包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:00:08.963

在您的情况下，我建议您只创建一个具有任何名称的项目

![在此处输入图像描述](../Images/b009e7aa9f13bb54b070440db7666066.png)

将带有代码的文件夹拖到项目中（您也可以使用 CTRL-C 和 CTRL-V） ![在此处输入图像描述](../Images/7e1944fc8e871b69f79a047b2358df41.png)

现在你在项目中有你的文件夹。您可以从想法中删除文件夹，而无需从硬盘驱动器中删除文件。您还可以添加多个文件夹。

![在此处输入图像描述](../Images/80b15483745ab116f3de5aaa782d2a29.png)

利润！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-15T18:59:37.117

相信您想为每个新的家庭作业或新项目创建一个新模块。

您可以创建一个名为第 3 章家庭作业的项目，然后为每个具有自己名称的新家庭作业创建一个新模块，例如 Ch。3.4 将在 3，问题 4 之后。您还可以为每章中的每个主题创建新模块，例如一个用于继承，一个用于构造函数或其他。

这样，一个模块中的源代码不会影响另一个模块。至少我认为。

# android - 滚动视图内的多个图表自动向上滚动

> ID：13959981
> 
> 赞同：0
> 
> 时间：2012-12-19T19:45:27.160
> 
> 标签：android, charts, achartengine

我目前正在使用 AChartEngine 库，并且在滚动视图中有 3 个图表。这是我的布局文件：

```
 <ScrollView
        android:id="@+id/scrollViewChartLayout"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:background="@color/black" >

     <LinearLayout
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical"
         android:padding="15dp" >

         <LinearLayout
             android:id="@+id/temperatureChartLayout"
             android:layout_width="fill_parent"
             android:layout_height="0dp"
             android:orientation="vertical"
             android:paddingBottom="30dp" />

         <LinearLayout
             android:id="@+id/humidityChartLayout"
             android:layout_width="fill_parent"
             android:layout_height="0dp"
             android:orientation="vertical"
             android:paddingBottom="30dp" />

         <LinearLayout
             android:id="@+id/lightChartLayout"
             android:layout_width="fill_parent"
             android:layout_height="0dp"
             android:orientation="vertical"
             android:paddingBottom="30dp" />
    </LinearLayout>
 </ScrollView> 
```

在渲染器中我使用：

```
 renderer.setInScroll(true);
    renderer.setZoomEnabled(false, false);
    renderer.setPanEnabled(false, false); 
```

图表绘制正确，但是当我使用滚动条向下滚动时，视图会在 0.5 秒后自动向上滚动！这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:44:52.630

由我自己解决：我正在重新绘制新数据的所有视图（并且我的数据不断到达）。只需要使用 mChartView.repaint(); 重绘图表。

# iphone - 为什么我的 GLKView 在旋转过程中会缩小？

> ID：13959992
> 
> 赞同：1
> 
> 时间：2012-12-19T19:46:03.020
> 
> 标签：iphone, rotation, opengl-es-2.0

我的 GLKView 中有一个在该`touchesMoved`方法期间旋转的对象。然而，在旋转时，矩阵也会缩放，这有点奇怪。有人可以检测到问题吗？

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    self.opaque = NO;
    self.drawableColorFormat = GLKViewDrawableColorFormatRGBA8888;
    glClearColor(1.0f, 1.0f, 1.0f, 0.0f);

    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];

    glBindVertexArrayOES(vertexArray);
    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch * touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    CGPoint lastLoc = [touch previousLocationInView:[touch view]];
    CGPoint diff = CGPointMake(lastLoc.x - location.x, lastLoc.y - location.y);

    float rotX = -1 * GLKMathDegreesToRadians(diff.y / 2.0);

    GLKVector3 xAxis = GLKVector3Make(1, 0, 0);
    rotMatrix = GLKMatrix4Rotate(rotMatrix, rotX, xAxis.x, xAxis.y, xAxis.z);

    float aspect = fabsf(self.bounds.size.width / self.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 4.0f, 10.0f);
    self.effect.transform.projectionMatrix = projectionMatrix;

    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -6.0f);
    modelViewMatrix = GLKMatrix4Multiply(modelViewMatrix, rotMatrix);
    self.effect.transform.modelviewMatrix = modelViewMatrix;

    [self display];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T12:17:09.847

将 GLKMathDegreesToRadians 的值减小到较小的值会缩放您的立方体大小。

将小于 65.0f 的值赋予 GLKMathDegreesToRadians，例如

```
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(35.0f), aspect, 4.0f, 10.0f); 
```

# javascript - 如何使用javascript将下拉框值拆分并插入2个文本输入？

> ID：13959995
> 
> 赞同：1
> 
> 时间：2012-12-19T19:46:13.640
> 
> 标签：javascript, html

当用户在下拉列表中选择值时，它应该拆分该值并将其提供给 2 个文本输入，有人可以帮助我吗？我不知道该怎么做...

```
 <div class="formitem">
          <p style="float:left; width:300px;">Select Ad Size: <em>*</em></p>
          <select class="formitem" id="s7" style="float:left;" name="size">
            <option value="0;0">Custom</option>
            <option value="300;250">Medium Rectangle (300x250)</option>
            <option value="250;250">Square Pop-Up (250x250)</option>
            <option value="240;400">Vertical Rectangle (240x400)</option>
            <option value="336;280">Large Rectangle (336x280)</option>
            <option value="180;150">Rectangle (180x150)</option>
            <option value="300;100">3:1 Rectangle (300x100)</option>
            <option value="720;300">Pop-Under (720x300)</option>
            <option value="468;60">Full banner (468x60)</option>
            <option value="234;60">Half banner (234x60)</option>
            <option value="88;31">Micro bar (88x31)</option>
            <option value="120;90">Button 1 (120x90)</option>
            <option value="120;60">Button 2 (120x60)</option>
            <option value="120;240">Vertical banner (120x240)</option>
            <option value="125;125">Square button (125x125)</option>
            <option value="728;90">Leaderboard (728x90)</option>
            <option value="160;600">Wide skyscraper (160x600)</option>
            <option value="120;600">Skyscraper (120x600)</option>
            <option value="300;600">Half page ad (300x600)</option>
          </select>
        </div>
        <div class="specialitem" style="height:90px;">
          <p style="float:left; width:100px;">Width: <em>*</em></p>
          <input type="text" name="widthbox" id="widthbox" class="textInput text-p5" style="width:80px;"/>
          <p style="float:right;">px</p>
        </div>
        <div class="specialitem last" style="height:90px;">
          <p style="float:left; width:100px;">Height: <em>*</em></p>
          <input type="text" name="heightbox" id="heightbox" class="textInput text-p5" style="width:80px;"/>
          <p style="float:right;">px</p>
        </div> 
```

因此，如果我选择“中矩形 (300x250)”，它应该将 Widthbox 值更新为 300，将 Heightbox 值更新为 250。

一些帮助会很好:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:17:33.353

只是一个建议，但对于纯 JavaScript（无库）版本：

```
function splitToUpdate(source, to1, to2) {
    if (!source || !to1 || !to2) {
        return false;
    }
    else {
        source = source.nodeType == 1 ? source : document.getElementById(source);
        to1 = to1.nodeType == 1 ? to1 : document.getElementById(to1);
        to2 = to2.nodeType == 1 ? to2 : document.getElementById(to2);

        var selOpt = source.selectedIndex,
            vals = source.getElementsByTagName('option')[selOpt].value;
        to1.value = vals.split(';')[0];
        to2.value = vals.split(';')[1];
    }
}

var sel = document.getElementById('s7'),
    opt1 = document.getElementById('widthbox'),
    opt2 = document.getElementById('heightbox'); 
```

这可以使用节点引用如下调用：

```
sel.onchange = function(){
    splitToUpdate(sel, opt1, opt2);
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WTadm/1/)。

或者通过使用`id`相关`form`元素的属性：

```
sel.onchange = function(){
    splitToUpdate('s7', 'widthbox', 'heightbox');
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WTadm/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:50:28.917

这是一个简单的解决方案，请执行空检查等。

HTML：

```
<select class="formitem" id="s7" style="float:left;" name="size" onchange="setValue(this)"> 
```

JS：

```
function setValue(dropdown)
{
   document.getElementById("widthbox").value=dropdown.value.split(";")[0];
   document.getElementById("heightbox").value=dropdown.value.split(";")[1];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:58:45.263

使用 jquery 你可以这样：

```
 $("#s7").change(function(){
           var selectedValue = $("option:selected",$(this)).val().split(";");

           $("#widthbox").val(selectedValue[0]);
           $("#heightbox").val(selectedValue[1]);
     });​ 
```

检查工作[演示](http://jsfiddle.net/WTadm/)

# android - Android SIP API：显示支持，但错误“不支持”

> ID：13959997
> 
> 赞同：13
> 
> 时间：2012-12-19T19:46:24.443
> 
> 标签：android, api, sip

我有一个我正在尝试构建的快速示例应用程序，以演示与 Nexus 7 之间的简单 SIP 调用。该设备当前运行的是 Android 4.2.1。

LogCat 显示错误：

`SipBroadcastRequest / SIP VOIP not supported: com.android.phone.SIP_REMOVE_PHONE`

我从 API 文档（和代码）中看到，如果 SipManager.isApiSupported(Context context) 返回 false，就会发生这种情况。为了更好地衡量，我检查了两个：

`SipManager.isVoipSupported(this);`
`SipManager.isApiSupported(this);`

并且都返回true。我还看到（从 API 代码）如果 api 调用返回 false，`SipManager.newInstance(Context context)`将返回`null`. 当我创建一个经理时，`SipManager.newInstance(this);`我会得到一个有效的经理。

我看到很多类似问题的帖子，但没有发现任何关于`true`电话的报告`SipManager.isVoipSupported(Context context)`。有任何想法吗？

注意：我不确定这是否重要，但 cSipSimple（另一个适用于 android 的 SIP/Voip 应用程序）可以在此设备上运行。

**更新**（2012 年 12 月 20 日）：我按照 pboy 的建议尝试了 SipDemo。那也不行。该应用程序和我的应用程序都在注册步骤中失败。使用调试器，我中断`onRegistrationFailed`了`SipRegistrationListener`. 从这里我可以看到一个`int errorCode`-9 和一个`String errorMessage`“0”。我查找了这个错误代码，它对应于以下内容（取自 SIP API 文档）：

```
public static final int IN_PROGRESS 
```

> 在 API 级别 9 中添加
> 客户端处于事务中，无法发起新的事务。
> 常数值：-9 (0xfffffff7)

我没有运行其他 SIP 程序。我的应用程序只是新安装的，目前也没有运行。我不确定中间还会发生什么其他交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T12:16:46.690

我希望您在清单中提及以下许可，

```
<uses-permission android:name="android.permission.USE_SIP" />   
<uses-permission android:name="android.permission.INTERNET" />   
<uses-feature android:name="android.hardware.sip.voip" android:required="true" />   
<uses-feature android:name="android.hardware.wifi" android:required="true" />   
<uses-feature android:name="android.hardware.microphone" android:required="true" /> 
```

另外请确保您在连接 wifi 时进行测试，因为当您连接 wifi 而不是其他网络时，android SIP 会提供连接。

# eclipse - eclipse产品更新失败

> ID：13959998
> 
> 赞同：1
> 
> 时间：2012-12-19T19:46:31.050
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在我们的 Eclipse 产品中，我们在限定符中使用 svn 修订号替换。到目前为止，构建和更新产品已经成功，没有出现任何问题。然而，最近我们的 svn 版本号从 90000 增加到 100000 并且从 90000 版本更新不再起作用。我们的上一个版本是 1.0.0.Rx98971，新更新是 1.0.0.Rx100051，当我尝试使用更新管理器更新到新版本时，我收到错误“没有要更新的内容”。现在，如果构建产品的另一个版本，假设 1.0.0.Rx100052 并尝试更新 1.0.0.Rx100051，更新工作。如果我尝试将 0.1.0.Rx74511 版本更新为 1.0.0.Rx100051，更新也可以工作（显然这里它比较专业）。我在这里可以做的唯一假设是检测到 1.0.0.Rx100051 大于 1.0.0.Rx98971 时存在错误，尤其是 100051 > 98971，这就是更新失败的原因。我的这个假设是正确的，还是可能发生其他无法更新产品的事情？

**我做过的一些测试**

为了强制限定符更接近原始版本 (1.0.0.Rx98971)，我将插件和功能的所有版本从 1.0.0.qualifier 更改为 1.0.0.Rx98980。我使用更新站点构建产品并使用 1.0.0.Rx98980 更新了 1.0.0.Rx98971，更新工作正常。接下来我再次将版本从 1.0.0.qualifier 更改为 1.0.0.Rx100679 并使用更新站点构建产品。使用 1.0.0.Rx100679 更新站点更新了 1.0.0.Rx98971 并发生了同样的错误 - “没有什么可更新的”。那么，这是否意味着限定符比较不能正确比较 svn 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:09:04.563

OSGi 限定符是字符串，并且是这样比较的。所以`1.0.0.100`小于`1.0.0.90`。

有关更多信息，请参阅[http://wiki.eclipse.org/Version_Numbering#When_to_change_the_qualifier_segment](http://wiki.eclipse.org/Version_Numbering#When_to_change_the_qualifier_segment)。

# c# - 将具有单独线程的文件添加到我的列表框中，如队列

> ID：13959999
> 
> 赞同：0
> 
> 时间：2012-12-19T19:46:31.040
> 
> 标签：c#, winforms

在我的应用程序中，我想在选择根文件夹后添加添加 Wireshark 文件的选项。

我正在使用此类从根文件夹（我有权访问的所有文件夹）中获取所有文件：

```
public static class SafeFileEnumerator
{
    public static IEnumerable<string> EnumerateDirectories(string parentDirectory, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var directories = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                directories = Directory.EnumerateDirectories(parentDirectory).SelectMany(x => EnumerateDirectories(x, searchPattern, searchOpt));
            }
            return directories.Concat(Directory.EnumerateDirectories(parentDirectory, searchPattern));
        }
        catch (UnauthorizedAccessException ex)
        {
            return Enumerable.Empty<string>();
        }
    }

    public static IEnumerable<string> EnumerateFiles(string path, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var dirFiles = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                dirFiles = Directory.EnumerateDirectories(path).SelectMany(x => EnumerateFiles(x, searchPattern, searchOpt));
            }
            return dirFiles.Concat(Directory.EnumerateFiles(path, searchPattern));
        }
        catch (UnauthorizedAccessException ex)
        {
            return Enumerable.Empty<string>();
        }
    }
} 
```

然后点击添加目录按钮：

```
private void btnAddDir_Click_1(object sender, EventArgs e)
{
    string fileToAdd = string.Empty;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        Editcap editcap = new Editcap();

        foreach (string fileName in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
        {
            if (editcap.isWiresharkFormat(fileName))
            {
                if (editcap.isLibpcapFormat(fileName))
                {
                    listBoxFiles.Items.Add(fileName);
                }
                else if (!editcap.isLibpcapFormat(fileName))
                {
                    listBoxFiles.Items.Add(editcap.getNewFileName(fileName));
                }
            }
        }
    }
} 
```

`Editcap editcap = new Editcap();`- 我的类使用 2 种方法检查文件是否是有效的 Wireshark 文件：`isWiresharkFormat`和`isLibpcapFormat`. `getNewFileName`- 如果文件不是 pcap 文件，则将其转换为 pcap 文件。

我想要的是在不同的线程中添加所有正确的文件（Wireshark 文件）添加到我的列表框中，这样 GUI 就不会被阻塞。理想情况下，在找到每个文件后，它会立即添加到我的列表框中，而不是等到所有文件都被评估后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:04:31.500

这是一种使用`Reactive Extensions`.

首先将对 RX 库的引用和以下`using`语句添加到您的类定义中：

```
using System.Reactive.Linq;
using System.Reactive.Concurrency; 
```

然后，添加一个私有字段，当您关闭应用程序并修改方法时，该`IDisposable`字段将用于清理任何剩余的线程工作：`btnAddDir_Click_1`

```
IDisposable _disposable; 

private void btnAddDir_Click_1(object sender, EventArgs e)
{

    string fileToAdd = string.Empty;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        Editcap editcap = new Editcap();

        var observable = SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories)
            .ToObservable()
            .SubscribeOn(NewThreadScheduler.Default);

        _disposable = observable.Subscribe((fileName) =>
            {
                if (editcap.isWiresharkFormat(fileName))
                {
                    if (editcap.isLibpcapFormat(fileName))
                    {
                        listBoxFiles.Items.Add(fileName);
                    }
                    else if (!editcap.isLibpcapFormat(fileName))
                    {
                        listBoxFiles.Items.Add(editcap.getNewFileName(fileName));
                    }
                }
            });
    }
} 
```

在`YourForm.Designer.cs`中，正确处理`_disposable`对象：

```
/// <summary>
/// Clean up any resources being used.
/// </summary>
/// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
protected override void Dispose(bool disposing)
{
    if (disposing && (components != null))
    {
        components.Dispose();
    }

    //dispose the observable IDisposable
    if (_disposable != null)
        _disposable.Dispose();

    base.Dispose(disposing);
} 
```