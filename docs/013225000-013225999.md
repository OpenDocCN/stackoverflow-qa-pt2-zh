# StackOverflow 问答 13225000-13225999

# ruby-on-rails - 访问 has_one 关联的属性

> ID：13225002
> 
> 赞同：6
> 
> 时间：2012-11-05T01:56:23.150
> 
> 标签：ruby-on-rails, ruby, model, has-one

我对 Rails 还是很陌生，所以希望这不是一个愚蠢的问题。

我有两个模型：用户和杂项。User has_one chore，而 Chore 属于 User

```
class User < ActiveRecord::Base
  attr_accessible :chore_done, :email, :name, :phone
  has_one :chore

class Chore < ActiveRecord::Base
  attr_accessible :name, :user_id
  belongs_to :user 
```

在我的用户索引中，我试图显示所有用户并显示与他或她相关的家务。我通过将 User.all 传递给视图并使用 .each 遍历每个用户来做到这一点：

```
<% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.chore.name %></td>
    <td><%= user.chore_done? %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

不幸的是，我无法访问 Chore 的 name 属性。我收到此错误：

> nil:NilClass 的未定义方法“名称”

如果我删除 .name 属性，它只会返回一个指向 Chore 对象的指针。

我感觉这与将 User.all 对象传递给视图然后对其进行迭代有关。只需在控制台中访问特定的用户对象（例如 User.find(1)），然后访问 user.chore.name 即可。

```
1.9.3-p194 :045 > user = User.find(4)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 4]]
 => #<User id: 4, name: "Example User", email: "example@dot.com", phone: 8675309, chore_done: false, created_at: "2012-11-05 01:53:33", updated_at: "2012-11-05 01:53:33"> 
1.9.3-p194 :046 > user.chore.name
  Chore Load (0.3ms)  SELECT "chores".* FROM "chores" WHERE "chores"."user_id" = 4 LIMIT 1
 => "Living room" 
```

我在 APIDock 中阅读了一些关于 AssociationProxy 的内容，但我认为我并不完全理解它，也不知道如何使用它。根据我收集的信息，访问模型中的所有对象会返回一个对象数组，但不会返回其依赖项的完整属性集？因此，在这种情况下，我得到一个指向 Chore 对象的指针，但无法访问它的任何属性。

我当然可以在我的用户表中添加 Chore 作为另一列，但我将来可能会添加到该模型中 + 我只是想弄清楚 has_one 关联是如何工作的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T02:01:48.993

这是因为并非每个用户都有与之相关的家务活。

有几种方法可以解决这个问题；我偏爱使用`Array()`强制集合的迭代模式。您可以在您的视图中执行此操作：

```
<% Array(user.chore).each do |chore| %>
  <td><%= chore.name %></td>
  <td><%= chore.done? %></td>
<% end %> 
```

`Array()`如果为 nil，将实例化一个空数组`chore`，这意味着当您尝试迭代它时不会发生任何事情。如果存在杂务，它将遍历`[chore]`.

这种模式的好处是它不违反[Tell don't ask](http://robots.thoughtbot.com/post/27572137956/tell-dont-ask)。询问一个对象是否`nil?`也是可能的，但它更多的是一种过程技术，没有利用 Ruby 强大的面向对象特性。

**编辑**

正如 Deefour 指出的那样，这将导致表中的列不匹配。对于这种情况，您可能应该使用他的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T05:24:31.817

这是另一个使用 Rails 的 Delegate 模块的选项：

```
class User < ActiveRecord::Base
  has_one :chore
  delegate :name, to: :chore, prefix: true, allow_nil: true
end 
```

这将允许您调用`<%= user.chore_name %>`，这会将`name`调用传递给 chore，`nil`如果没有则返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T02:01:39.120

> nil:NilClass 的未定义方法“名称”

这表示您正在尝试`name()`在`Nil`. 在您的代码上下文中，这表明`chore`在这一行是`nil`

```
<td><%= user.chore.name %></td> 
```

简而言之，其中一个`User`实例`@user`没有关联的`Chore`. 在您的视图中适应这一点的一种简单方法是检查是否`user.chore`存在。

```
<td><%= user.chore.nil? ?  "some default name" : user.chore.name %></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-31T17:12:01.870

另外一个选项：

```
<td><%= user.chore.try(:name) %></td> 
```

`nil`如果没有，这将返回`user.chore`。

# java - 在 Spring HttpRequestHandler 中请求范围 bean

> ID：13225008
> 
> 赞同：1
> 
> 时间：2012-11-05T01:57:13.780
> 
> 标签：java, spring, servlets

我已经按照[这里的建议-> 如何在 web.xml 中将 HttpServlet 与 Spring Application Context 连接起来，](https://stackoverflow.com/questions/1866953/how-to-connect-httpservlet-with-spring-application-context-in-web-xml)以允许访问 servlet 中的 spring bean。它似乎适用于单例 bean，但是我需要在我的 handleRequest() 方法中访问请求范围的 bean。

照原样，请求范围的 bean 不能连接到 HttpRequestHandler，因为它是单例范围的，因此范围不匹配。

我尝试使我的 HttpRequestHandler 成为请求范围的 bean，但是这仍然只产生一个 bean。即没有为每个请求注入一个新实例。我只能假设 org.springframework.web.context.support.HttpRequestHandlerServlet 采用的机制不允许每个请求都有一个新的实例。

我的解决方法是直接从handleRequest 方法中的应用程序上下文中获取bean，例如

`Calendar localNow = (Calendar) applicationContext.getBean("now");`

但理想情况下，我只想为我注入请求范围的 bean。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:49:28.200

为了将“请求”范围或“会话”范围 bean 注入单例 bean，请使用`<aop:scoped-proxy/>`

例如：

```
<bean id="singletonClass" class="com.app.SingletonClass">
<property name="requestScopeInstance" ref="requestScopeInstance">
</bean>

<bean id="requestScopeInstance" class="com.app.RequestScopeInstance scope="session">
<aop:scoped-proxy/>
</bean> 
```

希望这有效。

# android - 如何使用 AIR for android 在 Flash 中使用 android 加速度计

> ID：13225009
> 
> 赞同：0
> 
> 时间：2012-11-05T01:57:14.663
> 
> 标签：android, actionscript-3, flash, air

我正在测试加速度计，并尝试使用默认的 AIR for Android 示例，现在尝试在 Flash 中制作我自己的游戏。我复制了示例的代码：

```
 import flash.events.Event;

var accelX:Number;
var accelY:Number;

var fl_Accelerometer:Accelerometer = new Accelerometer();
fl_Accelerometer.addEventListener(AccelerometerEvent.UPDATE, fl_AccelerometerUpdateHandler);
function fl_AccelerometerUpdateHandler(event:AccelerometerEvent):void
{
    accelX = event.accelerationX;
    accelY = event.accelerationY;
}

ball.addEventListener(Event.ENTER_FRAME, moveBall);
function moveBall(evt:Event){
    ball.x -= accelX*30;
    ball.y += accelY*30;

    if(ball.x > (480-ball.width/2)){
        ball.x = 480-ball.width/2;
    }
    if(ball.x < (0+ball.width/2)){
        ball.x = 0+ball.width/2;
    }
    if(ball.y > (800-ball.width/2)){
       ball.y = 800-ball.width/2;
    }
    if(ball.y < (0+ball.width/2)){
        ball.y = 0+ball.width/2;
    } 
```

我不断收到此错误：

```
Scene 1, Layer 'actions', Frame 1, Line 6   1046: Type was not found or was not a compile-time constant: Accelerometer.
Scene 1, Layer 'actions', Frame 1, Line 6   1180: Call to a possibly undefined method Accelerometer. 
```

我知道我犯了一个巨大的新手错误，但我非常感谢一些帮助，感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:53:56.207

您需要导入 Accelerometer 类：`import flash.sensors.Accelerometer`. 请务必发布为 Android Air 项目！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:58:25.863

这也许可以帮助你:) [http://www.flashandmath.com/mobile/anglemeasure/](http://www.flashandmath.com/mobile/anglemeasure/)

# javascript - 单页全JavaScript动态网站

> ID：13225010
> 
> 赞同：2
> 
> 时间：2012-11-05T01:57:22.040
> 
> 标签：javascript, jquery, html, coffeescript, single-page-application

我目前正在为一个已经建立网站的客户接手一个项目。

该站点类似于“推特”类型的站点，您可以在其中创建帐户、发布“推文”并拥有追随者。

我查看了网站代码，它是一个完全由 JavaScript 组成的文件。JavaScript 代码中包含注册、编辑个人资料和显示“关于我们”页面的功能。

自 1996 年以来，我一直在创建网站，从未见过有人尝试做这样的事情。

以下是我的问题：

1.  运行一个由一个页面组成且全部内容都是 JavaScript 的网站有什么**优势？**

2.  有什么**缺点**？

3.  有谁知道按照我的问题所述构建的当前网站？（最好是带有配置文件的动态站点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:00:43.130

[如今，单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)非常普遍。主要优点是显示速度更快，而无需在仅部分更改时重新渲染整个页面。服务器（例如使用 node.js）和客户端上的 JavaScript 意味着只需要学习一种语言，并增加了客户端和服务器组件之间的互操作性。

缺点可能包括难以为单个页面添加书签和使用浏览器的后退/前进按钮（但这可以通过 history.js 等插件轻松解决，搜索引擎无法索引页面（这就是为什么 SPA 主要用于类似桌面的应用程序） SEO 不是问题），浏览器的内存消耗增加，加载时间增加。

[ExtJS](http://www.sencha.com/products/extjs3/)是一个用于类似桌面的 Web 应用程序的 UI 框架。用于开发此类应用程序的非常流行和现代的客户端-服务器框架是[流星](http://meteor.com)。

# jframe - JUNG 节点在可视化中被裁剪

> ID：13225013
> 
> 赞同：0
> 
> 时间：2012-11-05T01:57:54.573
> 
> 标签：jframe, jcomponent, jung

我正在使用 JUNG 创建和可视化一些图表。似乎节点的中心是由布局算法给定的坐标。因此，当一个节点位于窗格的边缘时，该节点的一些将被切断（可能还有节点标签）。我不确定这是 JUNG 问题还是 JFrame/GUI 问题（我对 Java GUI 开发不太熟悉）。我确实尝试使图形图像的最大尺寸（600x600）小于窗格的大小（800x800）。我尝试使用 setLocation() 使图形居中，但这似乎不起作用。即使它确实使图表居中，我也不确定它是否能解决问题。

这是我的代码。

```
import java.awt.Dimension;
import javax.swing.*;

import edu.uci.ics.jung.graph.*;
import edu.uci.ics.jung.visualization.VisualizationImageServer;
import edu.uci.ics.jung.algorithms.layout.SpringLayout;
import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;
import edu.uci.ics.jung.algorithms.generators.random.EppsteinPowerLawGenerator;
import edu.uci.ics.jung.visualization.decorators.EdgeShape;
import org.apache.commons.collections15.Factory;

public class Main {

    public static void main(String[] args) {

        // Factories required for the graph generator
        Factory <Integer> vertexFactory = new Factory<Integer>() {
            int vertexCount = 0;
            public Integer create() {
                return vertexCount++;
            }
        };

        Factory <Integer> edgeFactory = new Factory<Integer>() {
            int edgeCount = 0;
            public Integer create() {
                return edgeCount++;
            }
        };

        Factory<Graph<Integer,Integer>> graphFactory = new Factory<Graph<Integer,Integer>>() {
            public Graph<Integer,Integer> create() {
                return new UndirectedSparseGraph<Integer, Integer>();
            }
        };

        int numVertices = 150;
        int numEdges = 150;
        int numIter = 100;       
        // Create a graph using a power law generator
        EppsteinPowerLawGenerator gen = new EppsteinPowerLawGenerator(graphFactory, vertexFactory, edgeFactory, numVertices, numEdges, numIter);      
        Graph<Integer, Integer> graph = gen.create();

        // Visualization of graph
        SpringLayout layout = new SpringLayout(graph);
        layout.setSize(new Dimension(600,600));
        VisualizationImageServer vs = new VisualizationImageServer(layout, new Dimension(800, 800));
        vs.setLocation(100,700); // seems to have no effect
        vs.getRenderContext().setVertexLabelTransformer(new ToStringLabeller());
        vs.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line<Integer, Number>());

        JFrame frame = new JFrame(); 
        frame.add(vs); 
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:34:55.737

试一试：

```
float factor = 0.5;
ScalingControl scalingControl = new CrossoverScalingControl();
scalingControl.scale(vs, factor, vs.getCenter()); 
```

此外，您不应该直接添加到 Swing Frame，而应该使用以下命令添加到其内容窗格：

```
frame.getContentPane().add(...) 
```

# c - 为什么 fgetc 太慢了？

> ID：13225014
> 
> 赞同：2
> 
> 时间：2012-11-04T17:42:32.120
> 
> 标签：c

我编写了一个程序，它通过以下方式读取整个文件`fgetc`：

```
while ((c = fgetc(f)) != EOF) { ... } 
```

但是程序太慢了。当我更改`fgetc`为`fread`

```
static unsigned char buf[4096];

while ((n = fread(buf, 1, sizeof(buf), f)) > 0) { ... } 
```

该程序的运行速度提高了大约**10 倍**。

为什么？据我所知，`fgetc`它是一个缓冲函数，所以它应该与带有显式缓冲区的第二个版本一样快，不是吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T18:39:17.770

你住在商店附近。你需要得到100罐汤。100次到店每次1罐还是1次到店100罐哪个效率更高？显然是 1 次旅行，因为每次旅行都有需要时间的开销。

在 fgetc 的情况下，有各种开销。

*   函数调用
*   文件是否打开？
*   在文件末尾？
*   缓冲区是空的吗？
*   锁定
*   等等

这些事情可以为所有的汤做一次，或者每罐做一次。单独的每一位开销都很小，但是当重复多次时，总和变得很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T17:47:31.897

使用 fgetc，您不仅可以获得更多的函数调用（每个函数都有其开销），而且 fgetc 还可以在多线程应用程序中获取锁（例如，这是 POSIX 强制要求的）。

# ios - 当表格未处于编辑模式时，我可以使用 UITableViewCellEditingStyleInsert 吗？

> ID：13225020
> 
> 赞同：1
> 
> 时间：2012-11-05T01:58:31.570
> 
> 标签：ios, uitableview

我有一个表格，底部包含一个“添加对象”单元格。我想要的行为是让该单元格始终使用插入样式（即，在左侧显示 +），而不仅仅是在表格处于编辑模式时。这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:58:53.727

不，这是不可能的。绿色 +（插入）或红色 -（删除）仅在表格处于编辑模式时出现。

实际处于编辑模式时，您还会做其他事情吗？如果没有，只需将表格视图一直置于编辑模式。

# java - 向触摸点旋转对象

> ID：13225023
> 
> 赞同：3
> 
> 时间：2012-11-05T01:59:06.787
> 
> 标签：java, rotation, libgdx

我有一个具有 x、y、宽度、高度、X 和 Y 旋转中心（originX，originY）的对象，并且已经成功地计算了这个中心点和触摸点之间的角度

```
touchAngle = Math.toDegrees(Math.atan2(deltaY, deltaX)); 
```

这很好用。

我现在正试图通过简单地检查角度是否大于其当前角度，添加一些旋转，如果它更小然后删除一些旋转，来将对象旋转到这个接触点。我知道这是错误的，因为当触摸点越过 0/360 边界时，对象开始以错误的方式旋转，即使这意味着进行非常大的旋转。

什么是使它旋转到触摸点的最短距离的优雅解决方案？

（使用 Java，特别是 Libgdx）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T02:14:16.180

我以前做过很多这样的计算（非常不同的应用程序，tho）。只需取差值，如果为负数，则加 2pi，如果大于 2pi，则减去 2pi。对 ab 执行此操作，然后对 ba 执行此操作。较小的价值将是要走的路。

# image - CSS 多边形图像映射：hover/rollover

> ID：13225025
> 
> 赞同：1
> 
> 时间：2012-11-05T01:59:23.223
> 
> 标签：image, map, hover, polygon

我想出了一个（我认为很简单的）导航，可以在 wordpress 安装中使用。

[http://imageshack.us/photo/my-images/441/navlfz.png/](http://imageshack.us/photo/my-images/441/navlfz.png/)

在制作大部分导航菜单时，我会创建一个精灵并使用一个列表。但是，我不能使用典型的矩形精灵，所以我必须使用多边形图像映射，但是我不知道如何更改悬停状态的背景图像。任何人都遇到了这个问题，可以指出我正确的方向吗？

还是我在叫错树？也许有一个更简单的解决方案。

# php - URL中可以有括号或括号吗？

> ID：13225028
> 
> 赞同：19
> 
> 时间：2012-11-05T01:59:33.443
> 
> 标签：php, html

我为我的 AdWord 广告系列生成 URL，并且一些广告系列名称中包含括号`( )`和`[ ]`括号。一个示例网址看起来像这样

```
http://www.website.com/?utm_source=google%5BB%2B%5D&utm_medium=cpc&utm_content=google_ad(B)&utm_campaign=product 
```

这样好吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-05T07:00:47.973

URL的查询部分（即“？”之后的部分）可以使用括号“()”。将它们 % 编码为“%28”和“%29”是允许的，但不是必须的。

括号“[]”应在查询部分进行 % 编码，如“%5B”和“%5D”。

样例 URL，即 www.website.com 实际存在的真实 URL（请使用 www.example.com 作为虚拟域名，保证不存在），因此格式正确。

URL 语法的一般规则在 Internet 标准 STD 66 中定义，目前为[RFC 3986](https://www.ietf.org/rfc/rfc3986.txt)。其附录 A 指定了字符规则，将括号列为属于“sub-delims”组，允许在查询部分不使用 %-encoding，但括号属于“gen-delims”，应使用 %-encoded。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T02:15:18.253

哦，括号是“好的”（正如 Kinected 还问过的：什么是*好的*？），但对于方括号可能不是。但是，如果您害怕，请始终使用[`urlencode`](http://php.net/manual/en/function.urlencode.php)查询字符串。

```
<?php
echo "http://www.example.com/index.php?boo=",urlencode("sample(parenthesis)and[square_brackets]");
//http://www.example.com/index.php?boo=sample%28parenthesis%29and%5Bsquare_brackets%5D 
```

演示：[http ://codepad.org/ZKaROUr7](http://codepad.org/ZKaROUr7)

# java - 不能让关键部分成为原子的

> ID：13225030
> 
> 赞同：1
> 
> 时间：2012-11-05T02:00:20.993
> 
> 标签：java, multithreading, mutex, critical-section

我目前正在学习关键部分和信号量，我被这部分卡住了。希望大家能给我一个见解。

我有这 3 种类型的线程：一种会在堆栈上执行 pop()，另一种会在同一堆栈上执行 push()，最后一个会打印该堆栈的值。目前，我已经将 wait() 和 signal() 放在了我认为是关键部分的地方。

```
class Example{

  public static void main(){

    //create thread objects
    StackPop p1 = new StackPop();
    StackPop p2 = new StackPop();
    StackPop p3 = new StackPop();

    StackPush ps1 = new StackPush();
    StackPush ps2 = new StackPush();
    StackPush ps3 = new StackPush();

    StackValues s1 = new StackValues();
    StackValues s2 = new StackValues();
    StackValues s3 = new StackValues();

    //then we start these threads in mix orders

    p1.start();
    s3.start();
    ps2.start();
    // etc
  }
}

class StackPop extends Thread{

  public void run(){

    mutex.wait();
    pop();
    SOP("value popped is " + get.popVal); 
    mutex.signal();

  }
}

class StackPush extends Thread{

  public void run(){

    mutex.wait();
    push();
    SOP("value inserted is " + get.pushVal);
    mutex.signal();

  }
}

class StackValues extends Thread{

  public void run(){

    mutex.wait();

    for(int i = 0; i<stack.size(); i++)
        S.O.P.("["+getVal(i)+"]");   //where getVal() will retrieve value at that index

    mutex.signal();
  }
} 
```

上面的代码是一个简化版，但是思路是一样的。我的问题是即使我使用了 wait() 和 signal()，我仍然得到一个非常奇怪的输出。例如，我的部分输出将显示“插入的 [1][2][3] 值是 3 [5][@][@]”（其中 @ 表示内部没有数字）。我意识到这是因为处理器在 for 循环获取值时让另一个线程运行。我假设 wait() 和 signal() 会自动使其成为原子，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:08:18.367

您可以在关键部分使用锁或“同步”。[您可以在http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)中看到更多内容 您可以使用相同的想法来 pop() push() 等。

带互斥锁；

```
try {
     mutex.acquire();
     try
     { 
     // work
     } finally {
     mutex.release();
  }
} catch(InterruptedException ie) {// ...} 
```

来源- > [http://java.dzone.com/articles/dnp-java-concurrency---part-4](http://java.dzone.com/articles/dnp-java-concurrency-)

“我有这 3 种类型的线程：一种会在堆栈上执行 pop()，另一种会在同一堆栈上执行 push()，最后一个会打印该堆栈的值”

您为每个线程使用 3 个不同的堆栈，这就是您有意外的原因。你在一个堆栈上弹出，你从不同的堆栈推送，最后你从另一个堆栈打印。

您应该执行以下操作：

```
public class Teste {

    Thread t1;
    Thread t2;
    Thread t3;

    Stack<Integer> stack = new Stack <Integer>();
    private final Semaphore mutex = new Semaphore(1);

    public Teste ()
    {
        Runnable r1 = new Runnable()                                                    
        {                                   
            public void run()
            {
            pop();
            } // run()
        }; // runnable

        Runnable r2 = new Runnable()                                                    
        {                   
            public void run()
            {
                for(int x = 0; x < 3; x++)
                   push(x);
            } // run()
        }; // runnable

        Runnable r3 = new Runnable()                                                    
        {                   
            public void run()
            {
                for(int x = 0; x < 3; x++)
                   print();
            } // run()
        }; // runnable

        this.t1 = new Thread(r1); // Create the thread associating the runnable
        this.t2 = new Thread(r2);
        this.t3 = new Thread(r3);
    }

    public void pop()
    {
        try {
            mutex.acquire();
        } catch (InterruptedException e) {

            e.printStackTrace();
        }
        stack.pop();
        mutex.release();
    }

    // Similar to pop
    public void push(int x){ //..}

    public void print(){
        try {
            mutex.acquire();
        } catch (InterruptedException e) {e.printStackTrace();}

        for(int i = 0; i<stack.size(); i++)
            System.out.println("["+stack.get(i)+"]");

        mutex.release();
    }

}

public static void main(String argv[])
  {

    Teste t = new Teste();
    t.t2.start();
    t.t1.start();
    t.t3.start();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:08:35.107

小心，wait 是从 Object 继承的，它的反面是 notify——你很可能调用了错误的方法。

此外，Java 有一个本机同步机制，synchronized 关键字，您可能想研究一下。

# scala - 多层 Play 2.0 导航菜单模块

> ID：13225040
> 
> 赞同：1
> 
> 时间：2012-11-05T02:01:12.160
> 
> 标签：scala, playframework-2.0

我正在将 Web 应用程序从 JSP/Tiles 过渡到 Play 2.0。在我们当前的应用程序中，我们有一个两层的水平导航菜单。我们从 Bootstrap 获得了漂亮的 CSS（并且将再次），但使用 Tiles 来处理导航菜单逻辑。是否有任何框架可以轻松地将 Play 2.0 中的导航菜单连接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:33:44.387

没有。Play 框架没有任何默认的导航模式或结构，因此没有为此准备好的抽象模块。

要构建 Bootsrtap 样式的菜单，您需要做的就是迭代一些`List`项目，并用适当的 HTML 包装它。我不认为是否需要为此编写任何模块...

# python - Python 和 wx.Image：如何对每个像素 FAST 应用一个简单的函数？

> ID：13225042
> 
> 赞同：1
> 
> 时间：2012-11-05T02:01:35.797
> 
> 标签：python, image, loops, wxwidgets

我正在处理

1.  `myWxImage`， 一个图像。
2.  `myLabelImage`，一个 numpy 数组，具有与图像相同的形状，并且每个像素都包含一个标签（一个整数）
3.  `myLookupTable`，一维 numpy 数组，即一个向量，其条目与标签一样多。（我用它将标签映射到浮点数。）

目标是遍历像素，对于每个像素，考虑其标签，查找相应的浮点数并将其与该像素的颜色相乘。

下面的代码正是这样做的，但是**太慢了**。您是否有一个简单的建议，如何在不求助于 C++ 或 GPU 编程的情况下更快地做到这一点，这当然在这里很有意义？

```
weightedImage = wx.EmptyImage(myWxImage.Width, myWxImage.Height)
rgb = numpy.zeros(3, dtype=int);
for x in range(0, myWxImage.Width):
    for y in range(0, myWxImage.Height):
        label = myLabelImage[x, y]
        weight = myLookUpTable[label]
        rgb[0] = myWxImage.GetRed(x, y)
        rgb[1] = myWxImage.GetGreen(x, y)
        rgb[2] = myWxImage.GetBlue(x, y)
        rgb = rgb * weight
        weightedImage.SetRGB(x, y, rgb[0], rgb[1], rgb[2])
myBitmap = wx.BitmapFromImage(weightedImage)

# draw myBitmap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:19:14.860

如果标签图像和查找表不变，您可以尝试以下操作：

1.  将权重向量预先计算为一维 numpy 浮点数组（重塑+查找），
2.  使用 wxImage [GetData](http://www.wxpython.org/docs/api/wx.Image-class.html#GetData)调用获取 RGB 图像数据
3.  [使用fromstring](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html)将其转换为 numpy 数组
4.  使用 numpy 逐元素乘法得到最终图像
5.  使用 numpy array.tostring + wxImage.SetData 将其转回图像

直接对图像缓冲区本身进行乘法（使用[GetDataBuffer](http://www.wxpython.org/docs/api/wx.Image-class.html#GetDataBuffer)）可能会更快，而不是通过 numpy 数组往返；你得花时间看看。

# node.js - 为什么我在 node.js 中不断收到 ReferenceError

> ID：13225044
> 
> 赞同：0
> 
> 时间：2012-11-05T02:01:38.963
> 
> 标签：node.js

我正在阅读 Smashing Node.JS 书，并且在执行文件浏览器示例时不断收到参考错误。为什么会发生这种情况，我该如何纠正这个问题。我已经按照书中的示例进行操作，所以我对正在发生的事情有点迷茫

```
 /**
* Module dependencies. 
*/ 

    var fs = require('fs')
        , stdin = process.stdin
        , stdout = process.stdout;

    fs.readdir(process.cwd(), function (err, files) {
      console.log('');

     if (!files.length) {
      return console.log('  \033[31m No files to show!\033[39m\n'); 
     } 

      console.log(' Select which file or directory you want to see\n');

      function file(i) {
    var filename = files[i]; 

    fs.stat(__dirname + '/' + filename, function (err, stat) {
      if (stat.isDirectory()) {
        console.log('   '+i+'   \033[36m' + filename + '/\033[39m'); 
      } else {
        console.log('       '+i+'   \033[90m' + filename + '\033[39m')
      }

      if (++i == files.length) {
        read();
      } else{
        file(i); 
      }
    });
  }

  file(0); 
});

function read() {
    console.log(''); 
    stdout.write('  \033[33mEnter your choice: \033[39m');

    stdin.resume(); 
    stdout.setEncoding('utf8'); 

    stdin.on('data', option); 

    function option( data ) {
        if (typeof files[Number(data)] !== "undefined" ) {
            stdout.write('  \033[31mEnter your choice: \033[39m');
        } else {
            stdin.pause(); 
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:15:21.717

在`read()`被调用的那一刻，它无法访问`files`，因此在使用 时会出现引用错误`typeof files[...]`。

一个想法可能是将`});`after移动`file(0)`到文件的底部，从而读入`fs.readdir(process.cwd(), function (err, files) {`定义`files`.

但是，我真的希望这个例子能在你的书中得到扩展：现在，它*不会*输出你选择的目录的目录内容，而是会一遍又一遍地提示你输入一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:39:34.770

交替将文件传递给读取函数。

请注意，示例代码真的很糟糕，我希望作者试图说明这一点，而不是将其作为好的代码。

因此，继续使用糟糕的代码是一个完整的工作示例：

```
var fs = require('fs')
    , stdin = process.stdin
    , stdout = process.stdout;

fs.readdir(process.cwd(), function (err, files) {
    console.log('');

    if (!files.length) {
        return console.log('  \033[31m No files to show!\033[39m\n');
    }

    console.log(' Select which file or directory you want to see\n');

    function file(i) {
        var filename = files[i];

        fs.stat(__dirname + '/' + filename, function (err, stat) {
            if (stat.isDirectory()) {
                console.log('   '+i+'   \033[36m' + filename + '\033[39m');
            } else {
                console.log('       '+i+'   \033[90m' + filename + '\033[39m')
            }

            if (++i == files.length) {
                read(files);
            } else{
                file(i);
            }
        });
    }

    file(0);
});

function read(files) {
    console.log('');
    stdout.write('  \033[33mEnter your choice: \033[39m');

    stdin.resume();
    stdout.setEncoding('utf8');

    stdin.on('data', option);

    function option( data ) {
        var filename = files[Number(data)];
        if (typeof filename !== "undefined" ) {
            stdout.write('\n\033[90m' + filename + ':\n\n');
            var fileContents = fs.readFileSync(filename)
            stdout.write(fileContents);
            stdout.write('\033[39m\n\n');

            stdout.write('  \033[31mEnter your choice: \033[39m');
        } else {
            stdin.pause();
        }
    }
} 
```

# sql - 在plsql中比较游标值是否相等

> ID：13225050
> 
> 赞同：1
> 
> 时间：2012-11-05T02:02:30.010
> 
> 标签：sql, plsql, cursor

```
declare
  course_id char(10);
  course_idA char(10);

cursor task3 
  is
      select c_id from certificationrequirement
      where pcp_id = 101;

cursor task3A
  is 
      select o.c_id from courseoffering o
      join co_enrolment ce
      on o.co_id = ce.co_id
      where ce.s_regno = 401 and ce.coe_completionstatus = 'P';

Begin
  open task3;

    DBMS_OUTPUT.PUT_LINE ( 'List of Course to take ');
    loop

      FETCH task3 into course_id;
      exit when task3%NOTFOUND;

      DBMS_OUTPUT.PUT_LINE ( course_id);

    end loop;
  close task3;

  open task3A;

    DBMS_OUTPUT.PUT_LINE ( 'List of Courses student has passed ');

    loop

      FETCH task3A into course_idA;
      exit when task3A%NOTFOUND;

      DBMS_OUTPUT.PUT_LINE (course_idA);

    end loop;
  close task3A;

  if (cursor task3 = cursor task3A )
  Then
    DBMS_OUTPUT.PUT_LINE ( 'Student can attempt the Certification exam ');
  Else
    DBMS_OUTPUT.PUT_LINE ( 'Student cannot attempt the Certification exam ');
  END if;
end; 
```

我正在使用一个光标列出学生需要为特定学位学习的所有课程。第二个光标列出学生已经通过了多少门课程以获得他正在学习的学位。如果两个光标中的两个值相等，他将有资格参加退出考试，否则他将无法参加。我已经写下了比较代码，但我认为上面不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:02:31.817

```
if (task3%rowcount = task3A%rowcount  )
              Then
              DBMS_OUTPUT.PUT_LINE ( 'Student can attempt the Certification exam ');
              Else
              DBMS_OUTPUT.PUT_LINE ( 'Student cannot attempt the Certification exam ');
              END if; 
```

我想出了我的问题的答案，它对我来说非常有效:))

# ios - 子视图在运行时调整大小 - XCode 4.5.1 iOS

> ID：13225051
> 
> 赞同：0
> 
> 时间：2012-11-05T02:02:45.143
> 
> 标签：ios, xcode, view, subview

我正在尝试将子视图添加到单视图 iPhone 应用程序。我将视图拖到主视图上，设置参数：x=180, y=20, Width=120, Height=120，Xcode 在屏幕右上角附近显示一个漂亮的正方形。当我在模拟器或设备上运行应用程序时，正方形变成了矩形；我估计高度值大约是 Xcode 中显示的大小的 1/5，而宽度保持不变。

我尝试过降低垂直约束的优先级，但没有任何运气。

对我在这里缺少的任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:44:58.483

我的猜测是您已经创建了一个新项目（或现有项目中的新 xib），现在您正在 iPhone 4S 或更早版本上测试该应用程序。但默认情况下，Xcode 4.5（或更高版本）会创建一个新的 iPhone xib，其顶层视图的大小适用于屏幕更高的 iPhone 5。当您在具有较小屏幕的设备上（或在配置为此类设备的模拟器中）运行您的应用程序时，顶级视图会缩小以适应其子视图并调整其大小。

如果您**不**使用自动布局，您可以更改子视图的弹簧和支柱，以便视图的宽度和高度是固定的，并且它的左下边距是灵活的。

如果您**使用**自动布局，则需要通过更改子视图上的约束来做同样的事情。

### 更新

如果要更改 Xcode 在 xib 中显示顶级视图的大小，请选择视图（或其视图控制器，如果它在 xib 中有一个）。然后选择 View > Utilities > Attributes Inspector。在 Attributes Inspector（Xcode 窗口的右侧）中，在 Simulated Metrics 部分下，将 Size 弹出窗口更改为 Retina 3.5 Full Screen。

请记住，如果您这样做，并且您没有修复 springs'n'struts 或约束，那么当您在 iPhone 5 上运行应用程序时，您将遇到相反的问题：顶级视图将被拉伸以适应屏幕，它将调整其子视图的大小。

# orbeon - 将预处理阶段添加到 Orbeon XForms 表单运行器中的发送工作流按钮

> ID：13225052
> 
> 赞同：0
> 
> 时间：2012-11-05T02:02:49.863
> 
> 标签：orbeon, xforms

我在 Orbeon 表单运行器中有一个表单，我需要在使用“工作流发送”提交之前添加外部验证。我们可以为此在 properties-local.xml 中的“workflow-send”按钮添加功能吗？

作为记录，我还实现了一个按钮，该按钮进行验证并在验证结果返回时执行某些操作。因此，或者，我们可以将“工作流发送”功能添加到我的那个按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:31:14.357

我通过对persistence-model.xml 文件进行一些更改来做到这一点。这种验证需要在持久化阶段完成。因为，我们需要的是在保存数据之前调用的服务器端验证（访问数据库等），显然是在工作流发送之前调用的。

我已经注释掉了旧的代码片段。

```
<!-- Respond to send button activation -->
<xforms:action ev:event="DOMActivate" ev:observer="fr-workflow-send-button">
    <xforms:send submission="validation-submission" />
    <!-- xforms:setvalue ref="instance('fr-persistence-instance')/submit-or-save-or-send">send</xforms:setvalue> 
        <xforms:dispatch name="fr-save-action" target="fr-persistence-model"> <xxforms:context 
        name="fr:check-data-valid" select="true()" /> </xforms:dispatch -->
</xforms:action>

<xforms:action ev:event="my-valid-action">
    <xforms:setvalue
        ref="instance('fr-persistence-instance')/submit-or-save-or-send">send</xforms:setvalue>
    <xforms:dispatch name="fr-save-action" target="fr-persistence-model">
        <xxforms:context name="fr:check-data-valid" select="true()" />
    </xforms:dispatch>
</xforms:action>

<xforms:instance id="validation-result">
    <dummy />
</xforms:instance>

<xforms:submission id="validation-submission"
    ref="xxforms:instance('fr-form-instance')" resource="http://localhost:8080/MyApp/OrbeonValidationServlet"
    method="post" replace="instance" instance="validation-result">
    <!-- Clear external errors just before doing external validation -->
    <xforms:delete ev:event="xforms-submit" nodeset="//@v:*" />
    <xforms:action ev:event="xforms-submit-done">
        <!-- Insert external validation results when done -->
        <xforms:insert nodeset="."
            origin="instance('validation-result')/v:data/*" />
        <!-- Show all errors on form -->
        <xforms:dispatch name="fr-visit-all" targetid="error-summary" />
        <!-- Update error summary for incremental mode -->
        <xforms:refresh />
        <xforms:dispatch name="fr-update" targetid="error-summary" />
        <xforms:dispatch name="my-valid-action" target="fr-persistence-model"
            if="count(instance('validation-result')/v:global-errors/*) 
            = 0" />
    </xforms:action>
</xforms:submission> 
```

所以基本上

*   我已经实现了 my-valid-action 和 validate-submission
*   放置验证提交而不是工作流发送
*   仅在没有错误时调度 my-valid-action
*   从 my-valid-action 调用 workflow-send

最后一件事是将验证结果绑定到我表单中的 fr:error-summary。

可以更加努力地使 /OrbeonValidationServlet 可以从 properties-local.xml 设置。

# linux - Shell Script mkdir if not and mv files to each day

> ID：13225053
> 
> 赞同：0
> 
> 时间：2012-11-05T02:03:09.303
> 
> 标签：linux, bash, shell

我需要签入一个包含 150.000 个具有这种格式的 zip 文件的目录：

```
log_from_2012_08_14-11:57:12_To_2012_08_14-13:57:12.zip
log_from_2012_08_14-13:57:12_To_2012_08_14-15:57:12.zip
log_from_2012_08_14-15:57:12_To_2012_08_14-17:57:12.zip 
```

如果有一个名称等于文件日期的目录：

```
2012_08_14 
```

然后将存在的所有文件从该 From_2012_08_14 移动到该目录，如果没有创建它

> ( mkdir 日期 +%Y_%M_%D )

然后检查从 8 月到今天 11 月的每一天，从没有的一天开始的每个文件都是自己的目录，创建它并将其移动到那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:21:30.537

```
cd /relevant/log/directory

# Create the necessary sub-directories
ls *from_????_??_??-??:??:??_To_????_??_??-??:??:??.zip |
sed 's/.*from_\([0-9]\{4\}_[0-9][0-9]_[0-9][0-9]\).*/\1/' |
sort -u |
xargs mkdir -p

# Move the files into the sub-directories
ls *from_????_??_??-??:??:??_To_????_??_??-??:??:??.zip |
sed 's/.*from_\([0-9]\{4\}_[0-9][0-9]_[0-9][0-9]\).*/mv & \1;/' |
sh -x 
```

这`-x`是可选的，但会在发生时向您显示正在发生的事情。我假设您的文件名都不包含空格或换行符。我还假设没有包含字母数字的文件，其中`?`shell 模式中的预期与数字匹配。如果您必须完全偏执，您可以将每个扩展`?`为，或者修改脚本以丢弃不匹配的名称等。`[0-9]``sed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:58:23.140

快速而肮脏的 Bash 解决方案

```
for file in log_from*.zip; do
    dirname=${file#log_from_}
    dirname=${dirname%%-*}
    [ ! -d "$dirname" ] && mkdir "$dirname"
    mv "$file" "$dirname"
done 
```

# cakephp - Cakephp 2.2.3 JS 提交按钮。如何为元素添加属性

> ID：13225056
> 
> 赞同：1
> 
> 时间：2012-11-05T02:03:16.313
> 
> 标签：cakephp, cakephp-2.3

我看不到如何向 CakePHP 按钮添加属性。例如，data-loading-text="正在加载..."

如何将这样的数据属性添加到我的按钮？

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-buttons-and-submit-elements](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-buttons-and-submit-elements) http://book.cakephp.org/2.0/en/core-libraries /helpers/js.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:08:08.210

Cake 无法识别的第二个数组参数中的任何键/值都应该作为 HTML 属性结束。尝试类似的东西

```
echo $this->Form->submit('Submit', array(
    'data-loading-text'=>'Loading...')
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T16:56:24.133

```
echo $this->Js->submit('Procurar', array(
'class' => 'btn yellow',
'htmlAttributes' => array('data-loading-text'=>'Loading...')
)); 
```

# c - GCC 对待 int i=048; 作为一个错误，为什么 GCC 不能更智能？

> ID：13225060
> 
> 赞同：-2
> 
> 时间：2012-11-05T02:03:49.767
> 
> 标签：c, gcc

GCC 将`int i=048;`其视为错误，因为`048`应该是八进制数，但`8`不能出现在八进制数中。

但是为什么 GCC 不能更智能，把 is 当作十进制数呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T02:05:24.473

因为如果将 048 解释为十进制，它将违反语言“C”的句法规则。任何以 0 开头的数字都应解释为“八进制”。

这是一件好事，因为编译器努力做到符合标准。

还假设您正在为自己的 C 编译器编写 C 解析器，它实际上可以“理解”您的意思`048, 049..`是所有十进制数。现在你将如何制作那个解析器？它可能但令人难以置信的复杂。以及大量错误的来源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T02:13:18.083

这并不是 GCC 的错，因为它努力符合标准。

但是想象一下，如果它确实排除了“如果数字标记以 0 开头但不是八进制，则将其视为十进制”的形式。这条规则不仅相对复杂——“如果代码以通常的方式没有意义，则回退到另一种解释，看看它是否有意义”——而且它还呈现出各种其他意想不到的行为：

```
/* My bearings */
int east      = 000;  // 0 in Octal = 0
int northeast = 045;  // 45 in Octal = 37
int north     = 090;  // Starts with 0 but contains 9, must be decimal = 90
int northwset = 135;  // Starts with 1, is decimal = 135
... 
```

确实，具有现有行为的类似代码也可以通过编译器并带有变量的意外值。关键是添加一个特殊规则来帮助您的案例将留下其他案例。最好是捕获错误并将其视为错误，而不是找出其中*一些*可以不同的解释。

（FWIW，我从来没有使用过八进制表示法，并且发现它的存在很可怕，因为在许多其他情况下，我会用 0 填充十进制数字来表示。记住永远不要在 C 中这样做需要一点额外的脑力。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T02:06:49.633

C 语言要求在这种情况下发出诊断（错误）。GCC 必须遵守。

除此之外，您提倡的行为类型是极其有害的。它会掩盖各种错误/错别字，并引入非常混乱的不一致。例如，如果某些代码包含：

```
int x = 01800; 
```

而您将 更改`18`为`20`， 的值`x`实际上会减少！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-05T02:12:45.657

如果您输入，您会期望更高的智能`gcc`必须做什么

```
int i=047; 
```

...然后，随后，如果您的一位同事将程序更改为阅读，您会期待什么

```
int i=049; 
```

..您和他或她会因为仅添加“2”而得知值已从 更改为`39`！`49`

[最小惊讶原则](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)有助于指导各种设计人员，毫无疑问，这可能是 C 语言设计中的一个因素。

* * *

也就是说，更不令人惊讶的是八进制文字，它不仅仅是一个前导零。为此，像 python 和 rust 这样的语言将八进制编码为“ `0o47`”（类似于 C 等人的十六进制文字）。

# ruby-on-rails - 如何使用 FactoryGirl + omniauth-identity 创建和登录用户？

> ID：13225062
> 
> 赞同：2
> 
> 时间：2012-11-05T02:04:12.247
> 
> 标签：ruby-on-rails, omniauth, factory-bot

我在这个[Railscast之后实现](http://railscasts.com/episodes/304-omniauth-identity)[了omniauth-identity](https://github.com/intridea/omniauth-identity)。

所以我最终得到了这样的结果：

**身份.rb：**

```
class Identity < OmniAuth::Identity::Models::ActiveRecord
  attr_accessible :name, :email, :password, :password_confirmation

  validates_presence_of :name
  validates_uniqueness_of :email
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
end 
```

**用户.rb：**

```
class User < ActiveRecord::Base

  def self.from_omniauth(auth)
    find_by_provider_and_uid(auth["provider"], auth["uid"]) || create_with_omniauth(auth)
  end

  def self.create_with_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.email = auth["info"]["email"]
    end
  end 
```

**架构.rb：**

```
 create_table "identities", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.string   "password_digest"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

  create_table "users", :force => true do |t|
    t.datetime "created_at",                    :null => false
    t.datetime "updated_at",                    :null => false
    t.boolean  "admin",      :default => false
    t.string   "uid"
    t.string   "provider"
    t.string   "name"
    t.string   "email"
  end 
```

现在，我不太确定如何使用[FactoryGirl](https://github.com/thoughtbot/factory_girl)创建用户，因为密码正在由`Identity`模型处理。

如果我省略密码，我可以创建用户，但如果没有密码，我将无法登录。

我真的不知道如何使这件事发挥作用。有一个通用的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:13:15.903

我遇到了同样的问题，所以我做了一点测试。FactoryGirl 实际上确实在我的案例（Mongoid）中加密了密码，因此它只是存储明文密码以供以后检索：

```
FactoryGirl.define do
  factory :local_identity do

    #snip

    sequence :password do |n|
      "MyPassword#{n}"
    end
  end
end 
```

可以这样使用（注意第三行的password_digest）：

```
i = FactoryGirl.build(:local_identity)
i.password # MyPassword1
Bcrypt::Password.new(i.password_digest) == i.password # true 
```

# html - 在IE6/7下如何纠正a样式

> ID：13225064
> 
> 赞同：0
> 
> 时间：2012-11-05T02:04:37.917
> 
> 标签：html, css

[http://down123.xxmn.com/test/](http://down123.xxmn.com/test/)

红色边框的内容在IE6/7下显示乱码。但是在IE8和firefox下没问题。有没有办法纠正呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:14:02.163

为 IE 版本维护单独的 CSS 文件，并在页面标题中提及此 CSS 条件注释。在原装 IE 浏览器中测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:08:46.870

使用 css 重置所有样式以保持浏览器之间的兼容性很重要。
网上有各种各样的模型和例子，我在我的项目中使用这个：

```
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,
form,fieldset,input,textarea,p,blockquote,th,td {
    padding: 0;
    margin: 0;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
fieldset,img {
    border: 0;
}
address,caption,cite,code,dfn,em,strong,th,var {
    font-weight: normal;
    font-style: normal;
}
ol,ul {
    list-style: none;
}
caption,th {
    text-align: left;
}
h1,h2,h3,h4,h5,h6 {
    font-weight: normal;
    font-size: 100%;
}
q:before,q:after {
    content:'';
}
abbr,acronym { border: 0;
}
/* HTML5/IE 6,7,8 */
article, aside, figure, footer, header, hgroup, menu, nav, section { display: block; } 
```

# ocaml - 是否可以在 OCaml 解释器中使用箭头键？

> ID：13225070
> 
> 赞同：23
> 
> 时间：2012-11-05T02:06:17.510
> 
> 标签：ocaml, interpreter, arrow-keys, ledit

每次我在解释器中使用这些键时，我都会不断收到如下符号：

```
[[D^[[C 
```

我在 ZSH 中使用 Linux Mint 12，但是在带有 bash 的 Ubuntu 中我得到了相同的结果。此外，在 ssh 中也是如此。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-05T02:12:26.167

股票 OCaml 顶层没有内置行编辑。我使用`rlwrap`：

```
$ cat bin/ocaml
#!/bin/sh
exec rlwrap /usr/local/bin/ocaml "$@" 
```

在我看来，在没有这样的情况下使用顶层是非常痛苦的！

其他可能性是在 emacs 下运行顶层（我认为这是一个流行的选择），或者使用[utop](https://forge.ocamlcore.org/projects/utop/)。我没用过utop，但听起来很酷。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-05T03:21:39.753

另一种选择是使用： `ledit ocaml`

虽然我自己更喜欢 utop。

# python - Tkinter - 配置标签

> ID：13225071
> 
> 赞同：0
> 
> 时间：2012-11-05T02:06:37.887
> 
> 标签：python, tkinter

我正在制作一个基于数组的迷宫游戏。我有它，所以当玩家（值 1）到达终点（值 -5）时，我的标签从 1 级变为 2 级。

我在实现关卡功能时遇到问题。我想知道是否有人可以帮助我。我相信我应该使用“配置”，但它不适合我。

我将 level 作为全局变量。当玩家到达终点时，它调整 level = 2，然后调用 init(canvas)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:33:13.993

使用 Tkinter stringVar 与这样的标签链接

```
current_level = Tkinter.StringVar()
Tkinter.Label(master, textvariable=current_level) 
```

然后更改标签中的文本使用

```
current_level.set('Level 2') 
```

等等

# javascript - JavaScript 条带表行抽象函数

> ID：13225072
> 
> 赞同：0
> 
> 时间：2012-11-05T02:06:43.503
> 
> 标签：javascript, html, css, function, abstract

我的问题是：我如何遍历标签以便我可以对表格行进行条带化？请记住：如果解决方案在 stripeRows() 函数中，则必须对其进行抽象（不引用标记名称、类名等）。该函数对表格的行进行条带化处理，如果您查看 JavaScript 代码，我认为这将是显而易见的。

大部分都完成了（我认为），但我在文件的一个方面遇到了问题。解决方案必须在不编辑 HTML 或 CSS、没有 jQuery 和没有 innerHTML 的情况下抽象和解决。

我是否需要遍历 stripeMeTable() 和 webcoursesTable() 函数或 stripeRows(tableID,odd,even,over) 函数中的行？

我在下面包括了我的 HTML 和 JavaScript。

我需要 JavaScript 文件来处理这两个 HTML 页面。

好的，这是代码。谢谢你的帮助。

HTML 代码（第 1 页）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Striped Tables</title>
<link rel="stylesheet" type="text/css" href="striped-tables.css" />
<script type="text/javascript" src="striped-tables.js"></script>
</head>

<body>
<h1>Striped Tables</h1>
<table id="stripeme">
  <tr>
    <th>Food</th>
    <th>Rating</th>
  </tr>
  <tr class="lines">
    <td>Chocolate</td>
    <td>delicious</td>
  </tr>
  <tr>
    <td>Shrimp</td>
    <td>delicious</td>
  </tr>
  <tr class="lines">
    <td>Brussel sprouts</td>
    <td>vile</td>
  </tr>
  <tr>
    <td>Raspberry</td>
    <td>delicious</td>
  </tr>
  <tr class="lines">
    <td>Tofu</td>
    <td>not even a real food</td>
  </tr>
  <tr>
    <td>Pizza</td>
    <td>delicious</td>
  </tr>
  <tr class="lines">
    <td>Honey</td>
    <td>never spoils</td>
  </tr>
</table>
</body>
</html> 
```

HTML（第 2 页）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Is your script abstracted?</title>
<link rel="stylesheet" type="text/css" href="abstraction.css" />
<script type="text/javascript" src="striped-tables.js"></script>
</head>

<body>
<h1>Another Striped Table</h1>
<table id="webcourses">
  <tr>
    <th>Course number</th>
    <th>Course content</th>
  </tr>
  <tr class="core_course">
    <td>WEB-140</td>
    <td>design principles</td>
  </tr>
  <tr class="core_course">
    <td>WEB-115</td>
    <td>XHTML and beginning CSS</td>
  </tr>
  <tr class="core_course">
    <td>WEB-210</td>
    <td>advanced CSS</td>
  </tr>
  <tr>
    <td>WEB-215</td>
    <td>JavaScript</td>
  </tr>
  <tr>
    <td>WEB-182</td>
    <td>PHP</td>
  </tr>
  <tr>
    <td>WEB-250</td>
    <td>integration of MySQL and PHP</td>
  </tr>
</table>
</body>
</html> 
```

JavaScript 文件：

```
addLoadEvent(stripemeTable);
addLoadEvent(webcoursesTable);

function stripemeTable() {
    // get the <tr> tags:
    var stripemeRows = document.getElementsByTagName('tr');

    // IF the tableID is NOT stripeme, exit the stripemeTable function:
    if (!document.getElementById || !document.getElementsByTagName || !document.getElementById('stripeme'))  {
        return false;
    // ELSE loop through the rows and use the stripeRows function:  
    } else {
        for (var i = 0; i < stripemeRows.length; i++) {
            stripeRows('stripeme','pri-stripe','sec-stripe','over-stripe');
        } // end of the rows FOR loop 
    } // end of the tableID test IF/ELSE
} // end of the stripemeTable function

function webcoursesTable() {
    // get the <tr> tags
    var webcoursesRows = document.getElementsByTagName('tr');

    // IF the tableID is NOT webcourses, exit the  webcoursesTable function:
    if (!document.getElementById || !document.getElementsByTagName || !document.getElementById('webcourses'))  {  
        return false;   
    // ELSE loop through the rows and use the stripeRows function:  
    } else {
        for (var i = 0; i < webcoursesRows.length; i++) {
            stripeRows('stripeme','pri-stripe','sec-stripe','over-stripe');
        } // end of the rows FOR loop 
    } // end of the tableID test IF/ELSE
} // end of the webcoursesTable function

function stripeRows(tableID,odd,even,over) {
    // get a table with a tableID
    var table = document.getElementById(tableID);

    // loop through the table rows:
    for (var i = 0; i < rows.length; i++) {
        // get the current className of the table rows:
        var oldClassName = rows[i].className;

        // append the even className to the oldClassName:
        var even = rows[i].oldClassName;
        even += " " + even;

        // append the over className to the oldClassName:
        var over = rows[i].oldClassName;
        over += " " + over;

        // IF the table row is the first row, do not stripe that row:
        if (rows[0]) {
            addClass(rows[0],oldClassName);
        // ELSE IF the table rows are odd, stripe the rows with the odd class:
        } else if (rows[i]/2 != 0 && !rows[0]) {  
            addClass(rows[i],odd);
        // ELSE the table rows are even, stripe the rows with the even class:
        } else {  
            addClass(rows[i],even);
        } // end of the first/even/odd rows IF

        // handle the onmouseover event for the table rows:
        mouseOver = rows[i].onmouseover;
        mouseOver = function() {
            addClass(rows[i],over);
        } // end of the onmouseover anonymous function

        // handle the onmouseout event for the table rows:
        mouseOut = rows[i].onmouseout;
        mouseOut = function() {
            addClass(rows[i],oldClassName);
        } // end of the onmouseout anonymous function
    } // end of the table rows FOR loop 
} // end of the stripeRows function 

function addClass(element,theClass) {
    // IF the table row does not have a className, append the required className:
    if (!element.className) {
        element.className = theClass;
    // ELSE append the required className to the className(s) that are already assigned to that row:
    } else {
        var newClassName = element.className;
        newClassName += " ";
        newClassName += theClass;
        element.className = newClassName;
    } // end of the className IF/ELSE  
} // end of the addClass function

function addLoadEvent(func) {
    // assign the window.onload function to a variable:
    var oldonload = window.onload;

    // IF the window.onload does not call a function:
    if (typeof window.onload != 'function') {
        window.onload = func;
    // ELSE set the window.load:
    } else {
        window.onload = function() {
            oldonload();
            func();
        } // end of the oldonload anonymous function
    } // end of the typeof IF
} // end of the addLoadEvent function 
```

我认为是问题所在的行（请记住，函数需要保持原样，我不能在 stripeRows() 函数中引用标签名称）。问题是：如何在 stripeRows() 函数中以一般抽象的方式遍历行：

```
function stripeRows(tableID,odd,even,over) {
    // get a table with a tableID
    var table = document.getElementById(tableID);

    // get the table rows:
    var rows = tableID.rows;

    // loop through the table rows:
    for (var i = 0; i < rows.length; i++) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:31:24.010

@Jason-McCoy，在不了解全部限制的情况下，我认为这符合您的所有要求。第一行没有被剥离（通过初始化`i`为 1 而不是零），并且 stripeRows 函数不进行任何实际选择（通过引用传递给它的元素）。这将使条带化工作，但仔细查看`onmouseover`代码，那里仍然存在错误。

```
addLoadEvent(stripeme);

function stripeme() {
    if (!document.getElementById || !document.getElementsByTagName )
    { return false; }

    // IF the tableID is NOT webcourses, exit the  webcoursesTable function:
    if ( !document.getElementById('webcourses') && !document.getElementById('stripeme'))
    { return false; }

    // get the <tr> tags:
    var rows = document.getElementsByTagName('tr');

    for (var i=1; i < rows.length; i++) {
        stripeRows(rows[i],(i%2==0)?'pri-stripe':'sec-stripe','over-stripe');
    } // end of the rows FOR loop 
} // end of the stripemeTable function

function stripeRows(row,rowClass,over) {
    addClass(row,rowClass);

    // get the current className of the table rows:
    var oldClassName = row.className;

    // handle the onmouseover event for the table rows:
    mouseOver = row.onmouseover;
    mouseOver = function() {
        addClass(row,over);
    } // end of the onmouseover anonymous function

    // handle the onmouseout event for the table rows:
    mouseOut = row.onmouseout;
    mouseOut = function() {
        addClass(row,oldClassName);
    } // end of the onmouseout anonymous function
} // end of the stripeRows function 

function addClass(element,theClass) {
    // IF the table row does not have a className, append the required className:
    if (!element.className) {
        element.className = theClass;
    // ELSE append the required className to the className(s) that are already assigned to that row:
    } else {
        var newClassName = element.className;
        newClassName += " ";
        newClassName += theClass;
        element.className = newClassName;
    } // end of the className IF/ELSE  
} // end of the addClass function

function addLoadEvent(func) {
    // assign the window.onload function to a variable:
    var oldonload = window.onload;

    // IF the window.onload does not call a function:
    if (typeof window.onload != 'function') {
        window.onload = func;
    // ELSE set the window.load:
    } else {
        window.onload = function() {
            oldonload();
            func();
        } // end of the oldonload anonymous function
    } // end of the typeof IF
} // end of the addLoadEvent function 
```

对于你的 css：
*要么把它放在两者中`striped-tables.css`，`abstraction.css`要么在两个 html 文件中包含相同的 css 文件*

```
.pri-stripe
{
    background-color:green;
}

.sec-stripe
{
    background-color:blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:48:40.250

这里有一些提示给你：

在函数 stripRows 中使用了变量 rows 但未定义，您可能意味着在`var rows = document.getElementsByTagName('tr');`该函数的开头附近有类似的东西。

稍后在您拥有的相同功能中`} else if (rows[i]/2 != 0 && !rows[0]) {`。很可能你的意思是`} else if (i%2 == 0...){`。事实上，整个 if...then 可以更好地写成

```
if( i%2 == 0 ) {
    addClass(rows[i],'even');
} else {
    addClass(rows[i],'odd');
} 
```

我希望这会有所帮助——大多数其他错误错误都非常相似，所以这两件事应该可以帮助你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:35:30.513

你不需要`getElementsByTagName`。表格和表格部分元素有一个*rows*属性，它是它们的子行。因此，您可以执行以下操作：

```
function stripeRows(tableSection, oddClass, evenClass) {
  var rows = tableSection.rows;

  for (var i=0, iLen=rows.length; i<iLen; i++) {
    rows[i].className = i%2? oddClass : evenClass;
  }
} 
```

请注意，“tableSection”可以是表格、tBody、tHead 或 tFoot 元素。您可以使用“addClass”函数来添加类，我以简单为例。

### 编辑

对代码的一些评论：

```
function stripemeTable() {
    // get the <tr> tags:
    var stripemeRows = document.getElementsByTagName('tr'); 
```

返回文档中的所有 tr 元素，最好逐表执行此操作。

```
// IF the tableID is NOT stripeme, exit the stripemeTable function:
if (!document.getElementById || !document.getElementsByTagName || !document.getElementById('stripeme'))  {
    return false; 
```

在这里您测试`getElementsByTagName`，但它在上面的行中使用。如果您真的需要测试 getElementById （现在不支持它非常罕见），请考虑：

```
 var stripeMe = document && document.getElementById && document.getElementById('stripeme');
     if (stripeMe) { 
```

您还假设这些行来自表“stripeMe”，而没有实际测试。如果您只想对位于 ID 为“stripeMe”的表格元素中的行进行条带化，请执行此操作。一个班会更好。无论如何， else 现在是多余的，继续：

```
// ELSE loop through the rows and use the stripeRows function:  
} else {
    for (var i = 0; i < stripemeRows.length; i++) {
        stripeRows('stripeme','pri-stripe','sec-stripe','over-stripe');
    } // end of the rows FOR loop 
} // end of the tableID test IF/ELSE 
```

反而：

```
 var stripemeRows = stripeMe.rows;
     for (var .... ) {
       ...
     } 
```

此外，如果您只想对正文中的行进行条带化，则将标题行放在 tHead 元素中并仅对表主体中的行进行条带化，例如

```
 var stripemeRows = stripeMe.tBodies[0].rows; 
```

# php - 如何为 $_POST 变量设置默认值以避免出现通知：未定义索引？

> ID：13225074
> 
> 赞同：2
> 
> 时间：2012-11-05T02:06:46.837
> 
> 标签：php

## 最终编辑（已解决）

我刚刚替换`if(empty($num1))`为`if(!isset($num1))`现在有条件的**Required！**通知完美无缺。非常感谢所有参与其中的人，我重新获得了一些已经失去的力量，我终于开始将它变成一个功能齐全、风格独特的小部件：D 祝你早日/晚安！

## 编辑：

我愚蠢地假设 isset() 仅用于复选框...我摆脱了通知：未定义索引，但**需要的问题！**持续...

* * *

我有以下问题，我为产品定价制作了一个计算器，但如果我第一次加载它，它不会“识别”尚未填充的文本输入中的空值......我'我不确定我的命名是否正确，我是 PHP 的新手，刚开始学习...

表格通常完美无缺，我只是想摆脱这个小问题。

基本上，我有以下代码：

```
$num1 = (int)$_POST['number1'];
$num2 = (int)$_POST['number2'];
$ratio = 0.2;
$utw = 1;

if (! empty($num1) && ! empty($num2)) {

    if ($num1 * $num2 <= 200) {
        $ratio = 0.2;
    }
    elseif ($num1 * $num2 > 200 && $num1 * $num2 < 400) {
        $ratio = 0.15;
    }
    elseif ($num1 * $num2 >= 400) {
        $ratio = 0.1;
    }

    if (isset($_POST['condition'])) {
        $utw = 1.8;
    }

    $price = $num1 * $num2 * $ratio * $utw;

}
else {
    $price = 0;
} 
```

和

```
<form method="post" action="">

        <label for="number1">
            <input type="text" name="number1" id="number1">
            <?php if(empty($num1)) : ?><span style="color: red;">Required!</span><?php endif; ?>
            <br />Label1
        </label>

        <label for="number2">
            <br /><input type="text" name="number2" id="number2">
            <?php if(empty($num2)) : ?><span style="color: red;">Required!</span><?php endif; ?>
            <br />Label2
        </label>

        <label for="condition">
            <br /><input type="checkbox" name="condition" name="condition">
            Label3<br />
        </label>

        <input type="submit" value="Run">   

        <?php if($price > 0) : ?>
        <p><?php echo "Price equals: $price"; ?></p>
        <?php endif; ?>
</form> 
```

当我第一次显示它时，我得到

```
Notice: Undefined index: number1 in C:\wamp\www\calc\index.php on line 3 
```

（第 3 行，因为我剥离了`<!doctype html>`并且`<?php`很明显）

如何避免？另外，如何确保**Required！**仅当用户单击提交按钮时才会出现通知？目前它从一开始就显示，因为输入字段是空的......我不希望它们“空”我只想要它们，你知道......*视觉上*是空的或等于0......

我已经为这一切工作了几个小时，已经为那个 PHP 调试通知找到了一些解决方案，但它主要涉及`if (isset($var))`方法，假设我有一个复选框......好吧，我没有......默认`$_POST`值是实际替换

`$num1 = (int)$_POST['number1'];`

和：

```
if ($_POST['number1'] == '') { 
$num1 = '0'; 
else { 
$num1 = $_POST['number1'] ; 
} 
```

好吧，通知仍然出现:(

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:13:45.107

我相信isset实际上是您想要的；这与您使用的输入类型无关。您可以编写一个辅助函数，例如：

```
function getPost($key, $default) {
    if (isset($_POST[$key]))
        return $_POST[$key];
    return $default;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:10:31.613

在尝试处理变量之前，使用 isset() 或 array_key_exists() 检查变量是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T22:51:05.570

我建议使用`filter_input()`而不是直接访问超全局变量。

```
$num1 = filter_input(INPUT_POST, 'number1', FILTER_SANITIZE_NUMBER_INT);
$num2 = filter_input(INPUT_POST, 'number2', FILTER_SANITIZE_NUMBER_INT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T02:15:16.633

```
if($_SERVER['REQUEST_METHOD'] === 'POST'){
    if ($_POST['number1'] == '') { 
        $num1 = '0'; 
    else { 
        $num1 = $_POST['number1'] ; 
    }
} 
```

但是，也许从不同的角度看待您的代码。写的是“如果我一无所有，我得到 0。如果我有东西，我得到那个。

因此，将您的变量默认设置为 0，然后如果该值在 $_POST 中可用，则分配它

```
$num1 = 0;
if(isset($_POST['number1'])){
    $num1 = $_POST['number1'];
} 
```

# ios - 锁定然后解锁代码一段时间

> ID：13225077
> 
> 赞同：0
> 
> 时间：2012-11-05T02:07:00.757
> 
> 标签：ios, mkmapview, cllocationmanager, nsthread

我正在使用`CLLocationManager`并`CLLocationManagerDelegate`找出用户位置坐标。我想确保我先得到我的坐标，然后再恢复其余的代码。我怎么能锁定我的代码以获取位置坐标然后恢复。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T02:18:45.723

不。哪个用户会想要一个在获取位置修复时冻结的应用程序？这可能需要几分钟，如果您的应用在几秒钟内没有响应，它将被删除。相反，您应该在您的应用程序启动后立即打开位置管理器并等待代理的回调来执行下一步。在该回调返回之前，用户应该能够执行任何非位置类型的活动，例如查看关于屏幕或更改设置。如果您没有其中任何一个，并且您真的希望用户在修复之前无法做任何事情，请用 UIView 覆盖屏幕并放置 UIProgressIndicator（无限旋转类型而不是有限条类型）中间有一条消息说它正在等待位置数据。另请记住，某些用户可能不会授予您的应用位置权限，

等待修复时不只是阻塞的另一个原因是，当有电话打进来或用户出于某种原因切换到另一个应用程序时，您的应用程序可能会被推到后台。如果您的应用程序此时卡在一个紧密的循环中并且太忙而无法响应进入后台的请求，则操作系统将完全终止该操作，并且用户在返回时必须完全重新启动应用程序。所有进展和变化都将丢失。所以总而言之，不要考虑阻塞应用程序的主线程。

# c++ - 如何用用户输入的字符填充数组，同时计算使用了多少数组索引？（使用 cin.get）

> ID：13225083
> 
> 赞同：1
> 
> 时间：2012-11-05T02:08:02.610
> 
> 标签：c++, arrays

我需要使用 get 函数并计算已经填充了多少索引我遇到了几个问题。

似乎以这种方式使用 cin.get 只允许我填充数组，并且不允许我计算数组中已填充了多少变量：

```
#include <iostream>

int main()
{
   char line[25];
   cout << " Type a line terminated by enter\n>";
   cin.get( line, 25 );

} 
```

我有一种感觉，我需要使用下面的 for 循环，但问题是它不会以 enter 结束，用户必须填充整个数组，我需要能够输入任意数量的字数下限。此外，该示例没有使用哨兵值，因此虽然它似乎可以解决这个问题，但它似乎不是解决方案。

```
void fill_array(char array[], int max_count, int& num_used)
{
    char input;
    int index = 0;

    cout << "Enter a text string to test" << endl;
    for( index = 0;index < max_count; index++)
    {
         cin.get(input);
         array[index] = input;
         num_used++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:47:38.940

您可以使用[gcount](http://en.cppreference.com/w/cpp/io/basic_istream/gcount)获取最后一次未格式化操作读取的字符数，例如`cin.get`.

```
char line[25];
cout << " Type a line terminated by enter\n>";
cin.get( line, 25 );
std::streamsize read_chars = cin.gcount(); 
```

# .net - 如何使用 VB.NET 呈现 HTML 文件？

> ID：13225085
> 
> 赞同：2
> 
> 时间：2012-11-05T02:08:09.100
> 
> 标签：.net, html, vb.net

是否有命名空间来`HTML`渲染文件？

目的是将其呈现在 VBHTML 文件中，例如：

`@RenderPage("page-name.htm")`

我在用：

*   视觉工作室 2012
*   ASP.NET MVC 4
*   VB.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:49:37.607

您可以将该 htm 文件名设为 page-name.vbhtml 并使用 @RenderPage("page-name.vbhtml")。它仍然按您的预期工作。确保路径正确。不确定这是正确的方法。但这对我来说很好。

# .htaccess - .htaccess RewriteRule 返回一个空白页

> ID：13225088
> 
> 赞同：4
> 
> 时间：2012-11-05T02:08:30.757
> 
> 标签：.htaccess, mod-rewrite

我正在尝试解决这个问题两个多小时。我有一个使用 .htaccess 来管理网址的个人网站。它看起来像这样：

```
RewriteEngine on
RewriteBase /
...
RewriteRule ^sklad/?$ index.php?action=sklad
RewriteRule ^sklad/user/([0-9]+)?$ index.php?action=sklad&user=$1
RewriteRule ^sklad/folder/(.+)?$ index.php?action=sklad&folder=$1
RewriteRule ^sklad/file/(.+)?$ engine/ajax/sklad.php?file=$1
RewriteRule ^sklad/logout/?$ index.php?action=sklad&op=logout
...
RewriteRule ^admin/?$ admin.php
RewriteRule ^admin/news/?$ admin.php?action=news 
```

前五个工作正常。**管理员/**一个工作正常。但是当我尝试访问**admin/news/**时，我得到一个空白页。Apache 没有显示或记录错误，也没有输出。**admin.php?action=news**工作正常。

sklad **/**和**admin/**文件夹都实际存在于服务器上。**但是**当我将 admin/ 文件夹重命名为其他名称**或**将最后一个 RewriteRule 更改为类似

```
RewriteRule ^admin123/news/?$ admin.php?action=news 
```

我可以访问**admin123/news/**。如果它与服务器上存在的实际文件夹有关，那么为什么前五个规则有效？这没有意义。

我没有想法，希望这里有人帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:54:46.393

> 是的，它叫做 news.php ......我重命名了文件，现在 exerything 很好，谢谢！不知道这个，非常不明显的错误（或不是？）

这不是错误，听起来内容协商（通过 mod_negotiation）已打开，并且正在做您不想要的事情。可以通过类型映射或**MultiViews**选项打开协商。类型映射的设置有点明确，所以我假设由于您不知道为什么会发生这种情况，因此您没有设置映射到`news.php`. 所以你可能已经打开了**Multiviews 。**`Options`您可以通过从语句中删除它来关闭它：

```
#  remove this word -----------v
Options Indexes FollowSymLinks Multiviews 
```

这可以在任何地方，在您的 htaccess、服务器配置、vhost 配置、某些配置包含文件等中。因此您也可以在您的 htaccess 文件中显式取消设置它（只要您没有在同一个文件中显式设置它） ：

```
Options -Multiviews 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:48:24.983

我对 htaccess 和 RegExp 不太擅长，但我认为 admin/news 将属于您的第一个 htaccess 规则。

```
 RewriteRule ^admin/?$ admin.php 
```

它不会继续执行您在管理员上的第二条规则，即：

```
 RewriteRule ^admin/news/?$ admin.php?action=news 
```

它与我之前面临的问题相同。

尝试修改您的 admin.php，在没有参数传递时回显/打印一些东西。像这样的东西：

```
 if($_GET['action'])
   {
        echo 'With Parameters';
   }
   else
   {
       echo 'No Parameters pass';
   } 
```

就是这样调试的。

# asp.net-mvc-3 - 使用富文本编辑器创建 MVC 博客

> ID：13225090
> 
> 赞同：2
> 
> 时间：2012-11-05T02:08:36.167
> 
> 标签：asp.net-mvc-3

我了解 asp.net MVC 的基础知识，并想从头开始创建一个不错的小博客。至于博客部分，我需要一个富文本编辑器。CKEditor 看起来不错，但我很好奇如何从数据库中保存/检索富文本。它将主要是图像和文本。是否有捷径可寻？任何提示将非常感谢。

谢谢

编辑：感谢您的建议，我将研究这两个答案。但无论我选择什么，是否有一种简单的方法可以从 SQL 存储/检索富文本？再次以大部分图像和文本贯穿始终。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T06:20:15.030

如果你对 TinyMCE 没问题，你可以从 nuget 安装它

```
PM> Install-Package TinyMCE 
```

它会自动在您的视图中创建编辑器模板。

在您的模型中，只需要：

```
[UIHint("TinyMCE_yourtemplatename"), AllowHtml]
public string Content { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:09:35.690

[CKEditor](http://ckeditor.com/)可以很容易地与 ASP.NET MVC 集成。

您可以将其与 an 集成`HtmlEditorFor`并将值发布到控制器。（~~将很快发布一个例子~~ [文章](http://quysnhat.wordpress.com/2011/08/29/using-fckeditor-in-asp-net-mvc-3/)）

所以说我使用这个 CkEditor 格式化了一个文本

> 这是一个[链接](http://stackoverflow.com)。这是**大胆的**

因此，当发布回控制器时，收到的值将类似于

```
This is a <a href="http:www.stackoverflow.com">link</a> . This is <b>bold</b> 
```

并且该值将保存在数据库中，因此涵盖了保存部分。

现在要检索和显示这个格式化的内容，您可以简单地使用`@Html.Raw()`并将这个内容作为参数传递给这个方法，格式化的文本就会出现。

# iphone - UITab 栏中未显示图标

> ID：13225091
> 
> 赞同：0
> 
> 时间：2012-11-05T02:08:37.493
> 
> 标签：iphone, ios, uitabbar

UITab 栏中没有显示图标，而是显示了一些矩形。可能是什么问题呢？

我的代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
   self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self) {
    self.tabBarItem.image = [UIImage imageNamed:@"poolmate.png"];
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:26:12.617

你从来没有初始化你的`tabBarItem`. 尝试这个：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.tabBarItem = [self tabBarItem];
        self.tabBarItem.image = [UIImage imageNamed:@"poolmate.png"];
    }
    return self;
} 
```

# ember.js - 如何在 Ember-rest 中添加请求参数

> ID：13225094
> 
> 赞同：0
> 
> 时间：2012-11-05T02:08:46.823
> 
> 标签：ember.js

我在我的持久层应用程序中使用了[ember-rest](https://github.com/cerebris/ember-rest)，它一直运行良好。我正在使用的资源之一需要一些可选的资源参数。查看 ember-rest 源代码，我找不到任何与设置请求参数相关的内容，但有可能我忽略了一些东西。

我的问题是，ember-rest 是否提供了一种方法来指定要附加到 URL 的请求参数？如果没有，我将非常感谢一些关于我应该如何将此功能添加到 ember-rest 的建议。

例如，我正在使用一个名为*blocki*的资源，它带有以下 REST api：

```
POST /api/apps/:app_id/blockies?parent=:parent_id 
    - default :parent_id=:app_id
    - TODO: error if the blocki cannot be placed in :parent_id
PUT /api/blockies/:id
PUT /api/blockies/:id?parent=:parent_id
    - update the blocki and reparent it
DELETE /api/blockies/:id 
```

正如您所看到的，当我`put`请求更新此资源时，如果我想更新它，我可以选择传递一个 parent_id。我想使用 ember-rest 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:57:22.267

[`_resourceUrl()`](https://github.com/cerebris/ember-rest/blob/master/src/ember-rest.js#L223)您可以通过覆盖该方法来完全自定义资源或资源控制器的 url 。例如：

```
_resourceUrl: function() {
  return this._super() + '?parent=' + this.get('parent_id');
} 
```

# php - 使用 PHP/JS/MySQL 进行轮询的简单/高效方法

> ID：13225100
> 
> 赞同：2
> 
> 时间：2012-11-05T02:10:11.627
> 
> 标签：php, jquery, mysql, polling

我有一个简单的网络应用程序，其中列出了一组私人人员和他们发布的最后一条消息。

我目前只是通过使用 Ajax 每 30 秒访问一个 php 脚本进行轮询，该脚本获取所有人员和最新消息，然后以 JSON 形式返回。我解析并更新 DOM。

由于大部分时间效率不高，没有任何变化，但它仍然每 30 秒获取所有数据。

1.  有什么基本的我可以做的，只是用代码来改进它？

2.  我应该使用[pusher.com 之](http://pusher.com)类的东西吗？

有很多关于实现长轮询的教程，但我想尽可能简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:21:07.253

当您每 30 秒使用一次请求 http 时，可能会使用很多资源，如果有 1000 个或更多用户，我认为这对 Web 服务器不利，

我有使用[Nodejs](http://nodejs.org/)的建议 ，node js 是一个基于 Chrome 的 JavaScript 运行时构建的平台，可以轻松快速构建，并支持长轮询和非阻塞请求。

使用 nodejs，您可以构建可以处理许多用户并用于实时应用程序的网络服务器。

有很多框架可以用 node js 实现

1.  [套接字.io](http://socket.io/)
2.  [表示](http://expressjs.com/)

如果您想尝试，这是一个简单的教程.. [http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:25:10.380

无需更改大部分基础架构，您可以返回一条简单的消息，指示是否已更改任何内容。

因此，如果`http://localhost/example/request`返回：

```
{
    "phoneNumbers": [
        {
            "type": "home",
            "number": "212 555-1234"
        },
        {
            "type": "fax",
            "number": "646 555-4567"
        }
    ]
} 
```

对于每个请求，如果没有更新，您可以改为返回以下内容：

```
{
    "updated": false
} 
```

此外，您还可以`updated: true`表明它已更新：

```
{
    "updated": true,
    "phoneNumbers": [
        {
            "type": "work",
            "number": "111-222-3333"
        }
    ]
} 
```

总的来说，您所要做的就是`updated`在每个查询中检查返回对象的属性。`updated`如果是，您只需要解析响应`true`

不过，从宏观上看，每个 HTTP 请求都会造成开销。每次轮询时，都会向浏览器发出一个新请求。拥有大量并发用户将开始引入性能问题。[我建议查看诸如Node.js](http://nodejs.org/)之类的实时 Web 框架（正如 viyancs 所提到的），因为它们为每个用户维护一个持久连接以允许“推送”数据（而不是轮询），从而减少 HTTP 开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:26:01.223

在这种情况下，更好的解决方案是使用 XHR 长轮询。它的工作方式有点类似于您现在正在做的事情，即通过发出 AJAX 请求。

以下是它的工作原理：

您现在就发出 AJAX 请求。
服务器端脚本仅在有更新时返回（回显）。如果没有，它会一直循环并等待更新。这使 AJAX 请求保持挂起。
当有更新时，您的服务器端脚本返回，您的客户端 JS 更新 DOM，并立即发出新的 AJAX 请求。

PS - 为此，您必须确保脚本在 30 秒后未设置为超时。

在伪代码中，这就是您的服务器端脚本的样子

```
$newInfo = false;

while ($newInfo === False) {
    $newInfo = getNewInfo(); // a method that returns the new info. False if nothing has changed
    // sleep here for a bit
    usleep(500000);
}

// will only reach here when something has changed
echo json_encode($newInfo); 
```

# google-analytics - 如何在 Google Analytics 中比较两个页面的 UV/PV 数据和整体流量？

> ID：13225101
> 
> 赞同：0
> 
> 时间：2012-11-05T02:10:28.210
> 
> 标签：google-analytics

假设我在我的网站 site.com 上成功安装了 GA

我有两个网址：

site.com/page-a site.com/page-b

我可以在“内容”->“所有页面”中查看每个的详细信息。但我不知道如何比较它们？我记得旧版本的 GA 可以做到这一点，但现在我只是不知道该怎么做。

我还想知道如何将数据与整个站点的数据进行比较。

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:35:33.923

如果您为每个页面创建两个段并使用页面过滤器应用该段，那么您可以比较两个页面之间的数据。

# javascript - JavaScript 在 Grails/GSP 中不起作用

> ID：13225108
> 
> 赞同：1
> 
> 时间：2012-11-05T02:11:20.330
> 
> 标签：javascript, grails, gsp

我有以下 JavaScript 代码：

```
 <script type="text/javascript"><!--
​$(function () {
    $('#add').click(function() {
        $(this).before($('select:eq(0)').clone());
      if ($('select').length > 5) $(this).hide();        
    });
});​
//-->
</script> 
```

这是HTML代码：

```
<select name="dropdown">
    <option value="a">Apple</option>
    <option value="b">Bee</option>
    <option value="c">Cat</option>
    <option value="d">Donkey</option>
    <option value="e">Elephant</option>
</select>
<a href="#" id="add">Add</a> 
```

在 jsfiddle 演示中它工作正常，但它不适用于我的 gsp。有什么想法还是我错过了什么？每当我单击“添加”时，它只会在我的网址上显示 /#。

我通过检查元素设法弄清楚的错误消息如下： Uncaught SyntaxError: Unexpected token ILLEGAL

![错误信息](../Images/bcbe0eb19007fadce50a5b5550a25e55.png) **截屏** ![来自 Chrome 的控制台错误屏幕截图](../Images/98d0e16d89b8a956603f54809df96716.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:47:24.370

尝试未注释的版本（w/o`<!--`和`//-->`）：

```
<script type="text/javascript">
​$(function () {
  $('#add').click(function() {
     $(this).before($('select:eq(0)').clone());
     if ($('select').length > 5) $(this).hide();        
  });
});​
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:19:12.733

如果您只是将 JavaScript 放在外部文件中，您可能可以避免此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:25:46.227

<script> 块中可能有一些非法字符。

您是否从其他地方复制/粘贴它？我建议您将光标放在每行的开头和结尾并删除所有字符，直到您确定没有不可见的字符为止。

或者删除整个脚本块并手动重新键入

# c# - 调用改变组件（标签）的超类函数

> ID：13225110
> 
> 赞同：3
> 
> 时间：2012-11-05T02:11:50.550
> 
> 标签：c#, winforms, class, inheritance

如果超类具有将标签更改为“Hello World”的函数 A()。如何让子类以相同的结果调用 A()？截至目前，我没有收到编译错误，但文本不会改变！

示例代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();            
    }

    private void button1_Click(object sender, EventArgs e)
    {
        FunctionA("Hello");
    }  

    public void FunctionA(string s)
    {
        label1.Text = s;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Test t = new Test();
    }
}

class Test : Form1
{
    public Test()
    {
        FunctionA("World");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:18:11.613

两者都`Forms`必须拥有自己的`Label`控制权才能显示消息。您可能正在使用一个`Label`来显示不属于显示的消息`Form`。

我不确定要尝试实现什么，但为什么不直接将`Label`控件传递给 FunctionA 以通过这种方式修改消息：

```
public void FunctionA(ref Label lbl, string s)
{
    lbl.Text = s;
} 
```

**补充：**你可以这样做：

1.  首先创建`FormA`.

    ```
    static void Main()
    {
        //...
        FormA frmA = new FormA();
        Application.Run(frmA);
    } 
    ```

2.  通过公开参数化构造函数来传递 to 的实例，`FormA`以便从内部进行任何操作。`FormB``FormA``FormB`

    ```
    FormB frmB = new FormB(frmA);

    //...

    public partial class FormB : Form
    {
        public FormB()
        {
            InitializeComponent();
        }

        //parameterized constructor
        public FormB(FormA obj)
        {
            FormA = obj;
            InitializeComponent();
        }

        public FormA FormA { get; set; }   
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:02:35.163

在运行主表单之前实例化您的表单。将 form1 引用分配给 form2

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Form1 mainForm = new Form1();
        new Form2() { Form1 = mainForm }.Show();
        Application.Run(mainForm);
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public Form1 Form1 { get; set; }

    private void button1_Click(object sender, EventArgs e)
    {
        this.Form1.Update("World");
    }
}

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.Update("Hello");
    }

    public void Update(string text)
    {
        this.label1.Text = text;
    }
} 
```

# iphone - 将 UIWebView 委托属性设置为 nil

> ID：13225112
> 
> 赞同：3
> 
> 时间：2012-11-05T02:12:14.807
> 
> 标签：iphone, objective-c, cocoa

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)，在处理 UIWebView 实例之前，需要将 UIWebView 委托属性设置为 nil。

我的问题是：如果 UIWebView 在 IB 中设置，其委托指向文件所有者，即 viewController。并且 UIWebView 及其超级视图在执行过程中永远不会被释放，是否需要将委托设置为 nil ？

我问这个是因为似乎很难获得对 UIWebView 的引用。

希望懂行的大侠给点提示。

（非弧设置）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T02:28:16.593

遵循文档中的建议始终是一种好习惯。在大多数情况下，您的建议通常是正确的：实际上不需要将委托设置为 nil，因为对象将被销毁的唯一时间是执行结束时。*但是*，这类似于说“我不需要释放这个堆空间，因为它只会在 main 返回之前立即被释放”......

一个更紧迫的问题是如果应用程序收到内存不足警告会发生什么。如果收到内存警告并且`UIWebView`已卸载并且委托未设置为 nil，那么您最终可能会在幕后发生内存泄漏，具体取决于`UIWebView`它设置/删除其委托时的操作。

如果您在销毁时将委托设置为 nil，那么当 UIWebView 检测到其委托设置为 nil 时，任何需要发生的事情都会由 UIWebView 处理。如果您不这样做，并且实例被意外破坏（例如，由于内存不足警告），那么一旦警告清除，加载将再次发生，并且`UIWebView`将运行设置 a 的委托的任何过程两次，中间没有发生“关闭”程序。鉴于他们坚持要在销毁时将委托设置为 nil，我想这表现为内存泄漏或类似的险恶。

# c++ - 从 .txt 文件中读取一行并插入到变量中

> ID：13225116
> 
> 赞同：0
> 
> 时间：2012-11-05T02:12:59.397
> 
> 标签：c++, ifstream, getline

我正在尝试编写一个程序，它只会读取我的文本文件的第一行，然后将该数字输入到一个 int 变量中。但我很困惑如何做到这一点。

```
 int highscore; // Starting highscore

  ifstream myfile ("highscore.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline(myfile,highscore);
      cout << highscore << endl;
    }
    myfile.close();
  } 
```

但由于某种原因，我得到了错误。`|25|error: no matching function for call to 'getline(std::ifstream&, int&)'|`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:16:41.653

如果将 getline 替换为：

```
if (myfile >> highscore)
    cout << "Read " << highscore << '\n';
else
    cout << "Couldn't read an int\n"; 
```

您将能够将 int 读入高分。你需要使用getline吗？

# php - 在 PHP 中，如何同时用空格、逗号和换行符分割字符串

> ID：13225118
> 
> 赞同：12
> 
> 时间：2012-11-05T02:13:12.533
> 
> 标签：php, arrays, split, explode, delimiter

> **可能重复：**
> [如何在 PHP 中通过多个分隔符拆分字符串？](https://stackoverflow.com/questions/1452777/how-to-split-a-string-by-multiple-delimiters-in-php)

同时用三个分隔符（特别是单个空格、换行符和逗号）分割字符串的最有效方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T02:21:56.943

既然你已经用我标记了你的问题，`php`我会坚持下去。看**[`preg_split`](http://php.net/manual/en/function.preg-split.php)**

```
$split_strings = preg_split('/[\ \n\,]+/', $your_string); 
```

这也将保持数组干净，如果您的字符串类似于`some, ,,string`，它仍然会导致`['some', 'string']`而不是`['some', '', '', '', 'string']`.

# javascript - 是否可以将模块加载作为一个承诺来实现？

> ID：13225124
> 
> 赞同：4
> 
> 时间：2012-11-05T02:13:47.977
> 
> 标签：javascript, module, amd, promise

我已经构建了一个单页应用程序，用户可以在其中构建报告。用户会看到一个表单，允许他们选择数据源、图表类型和主题，然后在确认页面加载所需的文件并绘制图表。

为了获得更好的性能，我想并行加载代码模块和数据。例如，如果用户选择“饼图”、“蓝色主题”和“航空公司统计”：

WHEN（加载js模块饼图）和（加载蓝色主题css）和（加载Airline Stats json）

THEN（绘制图表）

我发现了许多实现 AMD 的库，以及许多实现承诺的库，但没有一个库可以像上面的示例那样组合模块加载和承诺。这可能吗，是否有任何库已经实现了这一点？

我需要的是客户端 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:50:06.520

[jQuery](http://jquery.com/)实际上可以通过[promises](http://api.jquery.com/category/deferred-object/)做到这一点。这只是修改代码的问题。

假设您拥有代码并且都生活[在同一个域中](http://en.wikipedia.org/wiki/Same_origin_policy)，或者如果跨域，服务器[允许 CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，我们将使用[`.ajax()`](http://api.jquery.com/jQuery.ajax/). 然后我们将[`.when()`](http://api.jquery.com/jQuery.when/)用于检测所有承诺何时加载并[`.then()`](http://api.jquery.com/deferred.then/)添加我们的回调来执行所有承诺解决。

```
//you can provide a detailed setting for each using .ajax()'s second parameter
//however, jQuery can "smart detect" the content's dataType

var chart = $.ajax(urlOfChart), //script
    theme = $.ajax(urlOfTheme), //css
    data  = $.ajax(urlOfData);  //JSON

//we use .when() to check when all three resolves
//the arguments will be the jqXHR objects for the requests
//in the order they were given in the argument list
$.when(chart,theme,data).then(function(chart,theme,data){

    //according to jQuery.ajax(), if a script is requested, it is evaluated
    //and we still get it's plain text content
    //so with respect to the script, we do no processing

    //with the css, we get it as plain text since no dataType value handles it
    //we embed it into the DOM by creating a style element 
    //and append the text in it for the styles to take effect on the page
    $('<style type="text/css" />').html(theme).appendTo('head');

    //as for the JSON, jQuery converts it into an object 
    //and is passed as an argument as the return data for that promise

    //...everything is now requested, retrieved and prepared...
    //everything else goes under here

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:53:00.060

CommonJS 模块本身就是 Promise，因为每个工厂只有在定义了需求后才会被调用。

因此，如果您将数据定义为模块，并将代码定义为需要“js”、“css”、“data”的模块，那么这实际上可以直接开箱即用。

或者，您使用 Promise 作为 CommonJS/AMD 之上的抽象，加载 CSS（通过例如 LABJS？）和加载数据（通过 xhr/jsonp）。

# java - 假设我在不适合在 java 中使用地图时有一把好钥匙

> ID：13225125
> 
> 赞同：0
> 
> 时间：2012-11-05T02:13:52.767
> 
> 标签：java, data-structures, arraylist, hashmap

> **可能重复：**
> [何时在 LinkedList 或 ArrayList 上使用 HashMap，反之亦然](https://stackoverflow.com/questions/7975802/when-to-use-hashmap-over-linkedlist-or-arraylist-and-vice-versa)

自从`Maps`接触 Java 以来，我一直在广泛使用它们。尤其`HashMap`是许多场景的绝佳选择。似乎它`ArrayList`在每个类别中都胜过一个 - 有人说迭代是不可预测的，但为此我们有`LinkedHashMap`.

所以，我的问题是：`HashMap`如果我们有一个可靠的不可变密钥，为什么不一直使用 a 呢？

此外，对于非常少量（<10）的项目使用类似 a 是否合适，`HashMap`或者是否有一些我不考虑的额外开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:17:39.527

`ArrayList`当您的键是连续整数时使用。（如果它们不是基于 0，只需使用偏移量。）访问（特别是随机访问）和更新效率更高。否则，当然，`HashMap`（或者，正如你所说，`LinkedHashMap`）是非常有用的数据结构。

我相信 a 的默认初始大小`HashMap`是 16 个存储桶，因此对于非常小的列表会有一些开销。但是，除非您要创建*大量*地图，否则它不应该成为您编码的一个因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:19:47.933

与数组（或 ArrayList）相比，HashMap 的开销很大：

*   您需要对 key 进行哈希处理以获取支持数组的索引，然后存储 value**和 key**。这比数组更慢并且使用更多的内存。当您的密钥较大或复杂时，这一点更为重要，因为散列需要更长的时间或占用更多空间。
*   每次查找值时，您还需要对键进行哈希处理。
*   当您调整 ArrayList 的大小时，您只需创建一个新数组并复制所有内容。当您调整 HashMap 的大小时，您会创建一个新数组，然后重新计算哈希值（因此它们将通过新数组展开）。
*   HashMap 在满时性能很差，因此它们通常会留出大约 25% 的空间为空。

这些都是很小的，所以你可以一直使用 HashMaps （事实上，这就是 PHP 似乎做的），但是当你真的不需要它时使用 HashMap 是浪费的。

比较可能会有所帮助：你可以用整数做任何事情，你也可以用字符串做任何事情，那么为什么我们有整数呢？因为它们更小，使用起来更快（并提供了一些很好的保证，比如它们总是包含一个数字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T02:21:34.960

我一直在使用地图——它是最强大和最通用的数据结构之一。我主要使用 LinkedHashMap，但是当使用字符串作为键时，我使用 TreeMap，因为对键进行排序有额外的好处。

然而：

*   如果您的键是 int 并且您计划使用所有键 0..n，请使用数组（请记住 - int 比 Integer 更有效）。但是如果你有“稀疏值”，地图会更好
*   如果您需要未索引项目的列表，请使用链接列表
*   如果您需要存储唯一元素，请使用集合（如果您只需要键，为什么要浪费空间来保留值）！

请记住——Java 为您提供了非常强大的集合（Set、Map、List），并且对于每一个集合，具有不同特性的多个实现——它们的存在是有原因的。

每个数据结构都有其用途，即使许多可以使用地图作为后端来实现，最合适的数据结构......更合适（并且通常更有效，开销更少并提供更多功能）

大小无关紧要 - 5 或 500 个元素，如果它看起来像地图，请使用地图（可能很少有例外和极端情况，您需要最大效率并且硬编码值更好）。但如果它看起来像一套 - 使用一套！

# ios5 - 绘制majorGridLine Sactter Plot - CorePlot

> ID：13225128
> 
> 赞同：0
> 
> 时间：2012-11-05T02:14:53.543
> 
> 标签：ios5, core-plot

我正在尝试绘制我的折线图。但我无法绘制majorgridline。当我自定义 x 轴标签时，所有主要网格线都不会显示。以及如何隐藏 y 轴标签。这是我的折线图： [在此处输入链接描述](http://i711.photobucket.com/albums/ww116/vxhonghui/Untitled.png)

帮我画一下： [在此处输入链接描述](http://s711.beta.photobucket.com/user/vxhonghui/media/Untitled2.png.html)

*   主要网格线
*   自定义 xaxis 标签，并隐藏 yaxis 标签。感谢。

这是我的代码：

```
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

CGRect bounds = layerHostingView.bounds;

// Create the graph and assign the hosting view.
graph = [[CPTXYGraph alloc] initWithFrame:bounds];
layerHostingView.hostedGraph = graph;
[graph applyTheme:theme];

graph.plotAreaFrame.masksToBorder = NO;

// chang the chart layer orders so the axis line is on top of the bar in the chart.
NSArray *chartLayers = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:CPTGraphLayerTypePlots],
                        [NSNumber numberWithInt:CPTGraphLayerTypeMajorGridLines], 
                        [NSNumber numberWithInt:CPTGraphLayerTypeMinorGridLines],  
                        [NSNumber numberWithInt:CPTGraphLayerTypeAxisLines], 
                        [NSNumber numberWithInt:CPTGraphLayerTypeAxisLabels], 
                        [NSNumber numberWithInt:CPTGraphLayerTypeAxisTitles], 
                        nil];
graph.topDownLayerOrder = chartLayers;    
[chartLayers release];

// Add plot space for horizontal bar charts
graph.paddingLeft = 50.0;
graph.paddingTop = 25.0;
graph.paddingRight = 50.0;
graph.paddingBottom = 60.0;

// Setup plot space
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
plotSpace.delegate = self;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(7)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(1000)];

// Setup grid line style
CPTMutableLineStyle *majorXGridLineStyle = [CPTMutableLineStyle lineStyle];
majorXGridLineStyle.lineWidth = 1.0f;
majorXGridLineStyle.dashPattern =  CPTLinearBlendingMode;
majorXGridLineStyle.lineColor = [CPTColor colorWithComponentRed:64/255.0 green:177/255.0 blue:219/255.0 alpha:1.0];

// Setup x-Axis.
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *x = axisSet.xAxis;
x.majorGridLineStyle = majorXGridLineStyle;
x.preferredNumberOfMajorTicks = 7;
x.majorIntervalLength = CPTDecimalFromString(@"1");
x.minorTicksPerInterval = 1;
x.labelRotation =  M_PI/4;
x.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(-7.0f)];
x.gridLinesRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(-7.0f)];
x.labelingPolicy = CPTAxisLabelingPolicyNone;
NSMutableArray *labels = [[NSMutableArray alloc] initWithCapacity:[xAxisWeek count]];
int idx = 0;
for (NSString *week in xAxisWeek)
{
    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:week textStyle:x.labelTextStyle];
    label.tickLocation = CPTDecimalFromInt(idx);
    label.offset = 5.0f;
    label.rotation = M_PI/4;
    [labels addObject:label];
    [label release];
    idx--; 
}
x.axisLabels = [NSSet setWithArray:labels];
[labels release];

// Setup y-Axis.
CPTMutableLineStyle *majorYGridLineStyle = [CPTMutableLineStyle lineStyle];
majorYGridLineStyle.lineWidth = 1.0f;
majorYGridLineStyle.dashPattern =  CPTLinearBlendingMode;
majorYGridLineStyle.lineColor = [CPTColor colorWithComponentRed:87/255.0 green:142/255.0 blue:242/255.0 alpha:1.0];

CPTXYAxis *y = axisSet.yAxis;
y.majorGridLineStyle = majorYGridLineStyle;
y.majorIntervalLength = CPTDecimalFromString(@"200");
y.minorTicksPerInterval = 1;
y.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(1000.0f)];
y.gridLinesRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(-1000.0f)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:36:02.400

不要为任一轴设置`visibleRange`或`gridLinesRange`。默认值将使轴和网格线延伸到绘图区域，这就是第二张图片中显示的内容。

如果您确实需要使用这些属性（例如，让绘图符号挂在网格之外），请将两者设置为相同的范围。

# assembly - 我们将输入值放在 x64 程序集的寄存器中的什么位置

> ID：13225134
> 
> 赞同：0
> 
> 时间：2012-11-05T02:15:29.333
> 
> 标签：assembly, architecture, 64-bit, x86-64

```
sample:
pushq   %rbp
movq    %rsp, %rbp

movl    %edi, -20(%rbp)
movl    $1, -16(%rbp)
movl    $0, -12(%rbp)
movl    $0, -8(%rbp)
cmpl    $2, -20(%rbp) 
```

让我们说输入值为 1 将 1 设置为 %rbp 或 %rsp

比 %edi 的价值是多少

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:55:04.467

让我们一步一步来：

*   该函数`sample`首先设置一个堆栈帧：`pushq %rbp; movq %rsp, %rbp`
*   它保存`edi`在堆栈上：`movl %edi, -20(%rbp)`. `rsp`如果它是叶函数，则无需显式递减即可。
*   它在堆栈上放置了更多立即数：`movl $1, -16(%rbp); movl $0, -12(%rbp); movl $0, -8(%rbp)`.
*   `edi`它将堆栈上的保存值`-20(%rbp)`与 2 进行比较。假设它基于该比较做了一些事情（可能其余代码是相关的），函数的输入必须是`edi`.

另一种解决方法是[AMD64 ABI](http://www.x86-64.org/documentation/abi.pdf)，它指定`rdi`用于将第一个参数传递给函数。然后，您可以进一步推断第一个参数`sample`是一个 32 位宽的整数。

# windows-runtime - WinRT：获取电池信息？

> ID：13225136
> 
> 赞同：2
> 
> 时间：2012-11-05T02:15:56.160
> 
> 标签：windows-runtime

在 WinRT 中，有没有办法获取有关电池的信息？即桌面通知区域中显示的类似信息：剩余时间、剩余百分比、剩余百分比等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:24:14.717

WinRT 中没有可用的 API - 我大约一个月前一直在调查这个问题。
正如 Robin Yang 在 MSDN 讨论中提到的：

> [GetSystemPowerStatus API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372693%28v=vs.85%29.aspx)用于检索系统的电源状态。该状态指示系统是使用交流电源还是直流电源运行，电池当前是否正在充电，以及电池的剩余寿命。
> 
> 它似乎可以满足您的需求。但是，此 API 适用于“仅桌面应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T23:47:22.543

遗憾的是您无法访问此类信息，也许在计划任务中将状态写入本地存储是目前唯一的选择:-(

我不认为这是一种非常用户友好的方式，即使您可以通过商店认证。

```
FOR /f %i IN ('whoami') DO set userId=%i    
FOR /f %i IN ('dir /s/b %localappdata%\packages\\localcache ^| find "MyBatteryApp"') DO set appFolder=%i    
echo Return = WScript.CreateObject("WScript.Shell").Run("cmd /c ""WMIC PATH Win32_Battery Get EstimatedChargeRemaining  > %appFolder%\MyBatteryApp.txt""", 0, true) > %appFolder%\battery.vbs 
echo ^<?xml version="1.0" encoding="UTF-16"?^>^<Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task"^>^<Triggers^>^<TimeTrigger^>^<Repetition^>^<Interval^>PT15M^</Interval^>^<StopAtDurationEnd^>false^</StopAtDurationEnd^>^</Repetition^>^<StartBoundary^>2014-01-01T00:00:00^</StartBoundary^>^</TimeTrigger^>^<SessionStateChangeTrigger^>^<StateChange^>SessionUnlock^</StateChange^>^<UserId^>%userId%^</UserId^>^</SessionStateChangeTrigger^>^</Triggers^>^<Settings^>^<DisallowStartIfOnBatteries^>false^</DisallowStartIfOnBatteries^>^</Settings^>^<Actions^>^<Exec^>^<Command^>wscript^</Command^>^<Arguments^> //B //nologo %appFolder%\battery.vbs^</Arguments^>^</Exec^>^</Actions^>^</Task^> > %tmp%\batterySetting.xml
schtasks /create /tn "MyBatteryApp" /xml "%tmp%\batterySetting.xml" 
```

# multithreading - Qt4将QThread信号与主线程槽连接

> ID：13225138
> 
> 赞同：2
> 
> 时间：2012-11-05T02:16:01.000
> 
> 标签：multithreading, qt4, signals, slots

好吧，我们开始：

这在互联网上到处都是，但它似乎对我不起作用，问题是我有两个线程，Worker 和 p4，p4 向 worker 发送等待时间和其他参数，我希望它被处理在不同的线程中，然后用结果更新主线程。

所以，Worker.h 看起来像这样：

```
 #include <QObject>

class Worker : public QObject
{
    Q_OBJECT
public:
    int time;
    int actual_weight;
    int supported_weigth;

    Worker();
    ~Worker();

public slots:
    void process();

signals:
    void finished();
}; 
```

Worker.cpp 看起来像这样：

```
#include "worker.h"

#include <QDebug>
#include <iostream>

using namespace std;

Worker::Worker()
{
}

Worker::~Worker(){

}

void Worker::process(){

    cout << "sleep!" << endl;
    sleep(this->time);
     cout << "done!" << endl;
    //more_nonsense_stuff();
    emit finished();

} 
```

然后在我的主线程中我有这个：

```
QThread* t = new QThread;
Worker* w = new Worker();
w->time = this->transactions[i].time;
connect(t, SIGNAL(started()), w, SLOT(process()));
connect(w, SIGNAL(finished()), this, SLOT(update_gui()));
w->moveToThread(t);
t->start(); 
```

问题是 SLOT update_gui() 在主窗口标题中定义并在 .cpp 中实现，但它永远不会执行。

我已经尝试附加 Qt::DirectConnection，并且 gui 更新，但是当工作人员完成时......整个程序关闭。

我看过[这个](http://doc.qt.digia.com/4.5/threads-mandelbrot.html)但没有为我工作（或者我不明白），也看过[这个](http://doc.qt.digia.com/4.5/threads.html#signals-and-slots-across-threads)，但这说明我想做的是不安全的？

请帮忙，我做错了什么？

# php - 如何在下拉菜单中更改日期格式

> ID：13225139
> 
> 赞同：0
> 
> 时间：2012-11-05T02:16:03.020
> 
> 标签：php, mysqli

```
$sessionquery = "
SELECT SessionDate
FROM Session
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionDate);  

$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $sessionqrystmt->fetch() ) {
    $sessionHTML .= sprintf("<option value='%s'>%s</option>", $dbSessionDate) . PHP_EOL;  
} 
```

上面我有一个下拉菜单，它显示一个会话的日期。目前日期已格式化，如下所示：

```
2012-03-23 
```

我希望它的格式如下：

```
23-03-2012 
```

如何更改下拉菜单中的日期格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:22:18.987

```
 $sessionquery = "
SELECT SessionDate
FROM Session
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionDate);  

$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $sessionqrystmt->fetch() ) {
    //$sessionHTML .= sprintf("<option value='%s'>%s</option>", $dbSessionDate) . PHP_EOL;
    $sessionHTML .= sprintf("<option value='%s'>%s</option>", date("d-m-Y",strtotime($dbSessionDate)) . PHP_EOL; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:23:46.597

我对此了解不多，但根据我的基本知识，我会建议这种类型的日期格式

您可以在 w3school 网站上获得此代码，它对所有语言都非常有帮助。

# c++ - VBO 渲染缓慢

> ID：13225141
> 
> 赞同：0
> 
> 时间：2012-11-05T02:16:33.987
> 
> 标签：c++, opengl, vbo

我已经学习 VBO 几个星期了，我在[这里](https://stackoverflow.com/questions/12944779/opengl-display-list-optimizing/12944917#12944917)被告知VBO 可以渲染“以数百 fps 的速度渲染约 100 万个顶点”。但是，我当前的 VBO 测试程序只能获得大约 50 FPS 和 100 万个顶点来渲染。有没有办法优化 VBO 效率？或者，更有可能是我做错了什么？我的测试程序在这里：

编辑：根据反馈改进代码。

```
#include <windows.h>
#include <SFML/Graphics.hpp>
#include <iostream>

#include <glew.h>
#include <gl/gl.h>
#include <gl/glu.h>

using namespace std;

float cube_vertices[] = {-1, -1, 1,
                         1, -1, 1,
                         1, 1, 1,
                         -1, 1, 1,

                         -1, -1, -1,
                         -1, 1, -1,
                         1, 1, -1,
                         1, -1, -1,

                         -1, 1, -1,
                         -1, 1, 1,
                         1, 1, 1,
                         1, 1, -1,

                         -1, -1, -1,
                         1, -1, -1,
                         1, -1, 1,
                         -1, -1, 1,

                         1, -1, -1,
                         1, 1, -1,
                         1, 1, 1,
                         1, -1, 1,

                         -1, -1, -1,
                         -1, -1, 1,
                         -1, 1, 1,
                         -1, 1, -1};

float cube_normals[] = {0, 0, 1,
                        0, 0, 1,
                        0, 0, 1,
                        0, 0, 1,

                        0, 0, -1,
                        0, 0, -1,
                        0, 0, -1,
                        0, 0, -1,

                        0, 1, 0,
                        0, 1, 0,
                        0, 1, 0,
                        0, 1, 0,

                        0, -1, 0,
                        0, -1, 0,
                        0, -1, 0,
                        0, -1, 0,

                        1, 0, 0,
                        1, 0, 0,
                        1, 0, 0,
                        1, 0, 0,

                        -1, 0, 0,
                        -1, 0, 0,
                        -1, 0, 0,
                        -1, 0, 0};
class Scene {
public:
    void setup_projection( int w, int h ) {
        glViewport( 0, 0, w, h );
        glMatrixMode( GL_PROJECTION );
        glLoadIdentity();
        gluPerspective( 50, (GLdouble)w/(GLdouble)h, 1, 5000.0 );
        glMatrixMode( GL_MODELVIEW );
    }
};
int main() {
    ///Number of models to render
    int NumberOfCubes = 0;
    cout << "Enter number of cubes to render: ";
    cin >> NumberOfCubes;
    system("cls");

    ///Create vectors for mesh data
    //6 faces * 4 verts * x, y, z * number of cubes
    std::vector<float> vertices; vertices.resize(6*4*3*NumberOfCubes);
    std::vector<float> normals; normals.resize(6*4*3*NumberOfCubes);
    for(int i = 0; i < NumberOfCubes; i++)
    {
        for(int j = 0; j < 6*4*3; j++)
        {
            vertices[(i*6*4*3) + j] = cube_vertices[j] + i;
            normals[(i*6*4*3) + j] = cube_normals[j];
        }
    }

    ///Store size of the vectors
    int SizeOfVertices = vertices.size() * sizeof(float);
    int SizeOfNormals = normals.size() * sizeof(float);

    ///Window setup, lighting setup
    sf::RenderWindow window(sf::VideoMode(800, 600, 32), "Test");
    Scene scene;
    scene.setup_projection(window.getSize().x,window.getSize().y);
    glewInit();
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_LIGHT0);
    float XL = .5, YL = .1, ZL = 1;
    GLfloat ambientLight[] = { 0.2f, 0.2f, 0.2f, 1.0f };
    GLfloat diffuseLight[] = { 0.8f, 0.8f, 0.8, 1.0f };
    GLfloat specularLight[] = { 0.5f, 0.5f, 0.5f, 1.0f };
    GLfloat lightpos[] = {XL, YL, ZL, 0.};
    glLightfv(GL_LIGHT0, GL_AMBIENT, ambientLight);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseLight);
    glLightfv(GL_LIGHT0, GL_SPECULAR, specularLight);
    glLightfv(GL_LIGHT0, GL_POSITION, lightpos);

    ///Generate the VBO
    GLuint VBOID;
    glGenBuffers(1, &VBOID);
    glBindBuffer(GL_ARRAY_BUFFER, VBOID);
    glBufferData(GL_ARRAY_BUFFER, SizeOfVertices + SizeOfNormals, 0, GL_STATIC_DRAW);
    glBufferSubData(GL_ARRAY_BUFFER, 0, SizeOfVertices, &vertices[0]);
    glBufferSubData(GL_ARRAY_BUFFER, SizeOfVertices, SizeOfNormals + SizeOfVertices, &normals[0]);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    ///FPS Stuff
    sf::Clock FPS;
    sf::Clock ShowFPS;
    float fps;

    ///Start loop
    cout << "Rendering " << NumberOfCubes * 8 << " vertices." << endl;
    cout << "Using graphics card: " << glGetString(GL_RENDERER) << endl;

    while( window.isOpen() ) {
        sf::Event event;
        while( window.pollEvent( event ) ) {
            if( event.type == sf::Event::Closed )
                window.close();
        }
        fps = FPS.getElapsedTime().asSeconds();
        fps = 1 / fps;
        FPS.restart();
        if(ShowFPS.getElapsedTime().asSeconds() > 1)
        {
            cout << "FPS: " << fps << "\t FrameTime: " << 1000 / fps << endl;
            ShowFPS.restart();
        }

        glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        scene.setup_projection(window.getSize().x,window.getSize().y);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(-25, -25, 150, 50, 50, 50, 0, 1, 0);

        glBindBuffer(GL_ARRAY_BUFFER, VBOID);
        glEnableClientState(GL_NORMAL_ARRAY);
        glEnableClientState(GL_VERTEX_ARRAY);
        glColor3f(1, 0, 0);

        glNormalPointer(GL_FLOAT, 0, 0);
        glVertexPointer(3, GL_FLOAT, 0, 0);

        glDrawArrays(GL_QUADS, 0, 6*4*NumberOfCubes);

        glDisableClientState(GL_VERTEX_ARRAY);
        glDisableClientState(GL_NORMAL_ARRAY);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        window.display();
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:33:08.207

关于您的代码的几点说明：

```
void Scene::resize( int w, int h ) {
    glViewport( 0, 0, w, h );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective( 50, (GLdouble)w/(GLdouble)h, 1, 5000.0 );
    glMatrixMode( GL_MODELVIEW );
} 
```

请理解设置视口和投影不是某种“调整大小”操作。它们是绘图过程的一部分，因此应该这样对待。好消息是，您在每次绘图迭代时都调用此函数。但我不会这样称呼它`resize`。一个更好的名字是`setup_projection`或类似的，以便清楚地说明这个函数*的作用*，而不是它的反应。始终按功能调用函数！

这个

```
cout << endl << endl << "Close program when finished." << endl;

bool ProgramRunning(true);
while(ProgramRunning == true) {} 
```

可能不像您预期​​的那样工作。您关闭的是控制台窗口/终端；这会使您的程序失去其标准输入和流程领导者，从而终止它。while 循环之后的任何代码都不会被执行。您可以安装信号处理程序，将 - 到目前为止无功能 - ProgrammRunning 标志设置为 false。

然而，处理此问题的规范方法只是等待用户暂停，直到用户按下回车键：

```
cout << "Program execution finished, hit the ENTER key to terminate" << endl;
cin.get(); 
```

* * *

现在谈谈为什么您只能获得 50 FPS：最可能的原因是，您启用了 V-Sync 并且您的显示器的刷新频率为 50Hz。50Hz 是不寻常的，但并非闻所未闻。也可能是，您的显示器以 60Hz 运行，但由于某种原因，您没有为每次回溯设置刷新截止日期，实际上使您的代码平均每 6 帧丢失一次。

另一个原因可能是，您没有在 GeForce 上运行，而可能在笔记本电脑的芯片组 GPU 上运行。如果您有混合图形系统，请确保已正确安装所有驱动程序*并*在执行程序之前切换到 GeForce GPU。

打印输出`glGetString(GL_RENDERER);`以确保。打开窗口后，创建OpenGL上下文添加一个

```
cout << glGetString(GL_RENDERER) << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:18:18.380

在做进一步的研究之后，我发现了[VBO Indexing](http://lwjgl.org/wiki/index.php?title=Using_Vertex_Buffer_Objects_%28VBO%29)并能够使用它来获得具有一百万个顶点的数百个 FPS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:01:22.973

你在使用双缓冲吗？是的，那么您可能已经`sync to vblank`在您的驱动程序中启用了。这意味着，每个使用双缓冲的 OpenGL 应用程序最多只能以显示器的刷新率（通常在 50 - 60Hz 左右）进行渲染。

您可以使用（显着）较小的模型尝试相同的代码，以查看您的 FPS 是否曾经超过此值。

# hadoop - Hadoop 本地作业目录在任务节点上的作业完成之前被删除

> ID：13225143
> 
> 赞同：5
> 
> 时间：2012-11-05T02:16:41.693
> 
> 标签：hadoop

我们的 Hadoop 集群中有一个奇怪的问题。我们注意到我们的一些工作因找不到文件异常而失败[见下文]。基本上，当任务仍在主机上运行时，“attempt_*”目录中的文件和目录本身都会被删除。查看一些 hadoop 文档，我发现作业目录在获得 KillJobAction 时被清除，但是我不确定为什么在作业仍在运行时它会被清除。

我的问题是在作业运行时可能会删除它？关于如何调试它的任何想法或指示都会有所帮助。

谢谢！

```
java.io.FileNotFoundException: <dir>/hadoop/mapred/local_data/taskTracker/<user>/jobcache/job_201211030344_15383/attempt_201211030344_15383_m_000169_0/output/spill29.out (Permission denied)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.apache.hadoop.fs.RawLocalFileSystem$TrackingFileInputStream.<init>(RawLocalFileSystem.java:71)
    at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.<init>(RawLocalFileSystem.java:107)
    at org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:177)
    at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:400)
    at org.apache.hadoop.mapred.Merger$Segment.init(Merger.java:205)
    at org.apache.hadoop.mapred.Merger$Segment.access$100(Merger.java:165)
    at org.apache.hadoop.mapred.Merger$MergeQueue.merge(Merger.java:418)
    at org.apache.hadoop.mapred.Merger$MergeQueue.merge(Merger.java:381)
    at org.apache.hadoop.mapred.Merger.merge(Merger.java:77)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.mergeParts(MapTask.java:1692)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1322)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.close(MapTask.java:698)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:765)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:369)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:259)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:253) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:19:38.770

我遇到了类似的错误，发现这个 Permission 错误是由于 hadoop 程序无法创建或访问文件引起的。

文件是在 hdfs 内还是在任何本地文件系统上创建的。如果它们在本地文件系统上，则尝试设置该文件夹的权限，如果它们在 hdfs 文件夹上，则尝试设置该文件夹的权限。

如果你在 ubuntu 上运行它，那么

尝试运行

chmod -R a=rwx //hadoop/mapred/local_data/taskTracker//jobcache/job_201211030344_15383/attempt_201211030344_15383_m_000169_0/output/

# file - 使用其他文件作为输入格式字符串读取大文本文件

> ID：13225145
> 
> 赞同：0
> 
> 时间：2012-11-05T02:17:12.287
> 
> 标签：file, matlab, formatted-input

我有大格式的文本文件（200 Mb），其中包含易于阅读和保存的数据。格式的周期性约为 72 行，我想要一个包含 72 行模板格式的其他文件。有没有办法做到这一点？

理想的方式是

```
formatstring = fileread(templatefile)

fileToRead = fopen(LargeFile,'r')

while ~feof(fileToRead)

object{i} = textscan(fileToRead,formatstring)

i = i+1
end 
```

模板文件如下所示：

```
CASE # %16f            DATE: %s

AILERON ANGLE        STAB ANGLE
%4.2f                 %4.2f

ALPHA      BETA     GAMMA

%4.2f      %4.2f      %4.2f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:23:59.217

If you want to read a format file and transform that into a valid format string, use this:

```
% read format file
fid = fopen('untitled.txt', 'r');
A = textscan(fid, '%s');
fclose(fid);

% transform into proper format string
A = A{1}(~cellfun('isempty', regexp(A{1}, '%')))
A = [A{:}]; 
```

in that case,

```
>> A
A = 
    %16f%s%4.2f%4.2f%4.2f%4.2f%4.2f 
```

which you can use directly in the `textscan` in your `while`-loop.

# facebook - Facebook 开放图 og: 和 fb: 标签无效或未注册

> ID：13225146
> 
> 赞同：1
> 
> 时间：2012-11-05T02:17:38.823
> 
> 标签：facebook, facebook-opengraph

我有一个网站，我希望有一个类似 facebook 的按钮，该按钮经过自定义，因此它显示特定的图片、描述等。

所有这一切都完成了，它可以工作了，但是我使用了常规的 img、description、title 元标记，而不是我们应该使用的 og 标记。

[当我使用http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)对网站进行 lint 时，Facebook 会抱怨。

以下是一些错误消息：

```
Inferred Property:  The 'og:url' property 
should be explicitly provided, even if a value can be inferred from other tags.

Inferred Property:  The 'og:title' property
should be explicitly provided, even if a value can be inferred from other tags. 
```

等等所有其他标签...

这就是问题所在：当我按照网络上提供的示例中所示添加和配置标签时，它不仅不起作用，而且还收到另一个错误：

```
Meta Tags In Body:  You have tags ouside of your . This is either because
your was malformed and they fell lower in the parse tree, or you accidentally 
put your Open Graph tags in the wrong place. Either way you need to fix it 
before the tags are usable. 
```

这是我的html配置：

```
<html lang="en"  xmlns:fb="http://www.facebook.com/2008/fbml"
xmlns:og="http://opengraphprotocol.org/schema/"> 
```

...

```
<meta property="og:url" content="..." />
<meta property="og:site_name" content="..." />
<meta property="og:type" content="..." />
<meta property="og:title" content="..." />
<meta property="og:image" content="..." />
<meta property="og:description" content="..." />
<meta property="fb:app_id" content="..." /> 
```

...

注意：我的 fb-root 标记和其他 fb 提供的按钮代码与其他脚本一起位于页面的最底部。

注意：我在 Facebook 开发人员的开放图形网站或我的应用程序的 Facebook 开放图形部分进行了零配置，但是我认为这不是问题，因为在 fb 的说明中，他们说添加一个仅复制的点赞按钮需要/粘贴代码，并且不需要实际的打开图形配置。

这是站点 URL：[http](http://darehut.com) ://darehut.com 注意：我的标记代码实际上是在我的源代码的 head 元素内，但无论出于何种原因，它们都被呈现在外面！

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:56:58.820

> 正文中的元标记：您的 . 这可能是因为您的格式错误并且它们在解析树中的位置较低，或者您不小心将 Open Graph 标记放在了错误的位置。

该消息缺少`<head>`第一个句点之前的单词。

这意味着什么，非常简单：要么将 OG 元标记放在`<head>`元素之外，要么 HTML 格式错误。

* * *

下次您提出此类问题时，请附上您遇到问题的文档的 URL——这样，我们可以自己查看，我们将能够更具体地回答。

# hadoop - 如何通过 whirr 在 EC2 集群上安装 JDK 7？

> ID：13225149
> 
> 赞同：4
> 
> 时间：2012-11-05T02:17:52.107
> 
> 标签：hadoop, amazon-ec2, amazon-web-services, apache-whirr

我有一些由 Oracle JDK 7 编译的 map-reduce 程序。我正在尝试使用 whirr 0.8.1 来设置 EC2 集群来运行它们。但是 whirr 0.8.1 安装的默认 JDK 似乎是 Open JDK 6，我在运行它们时遇到了以下错误：

**不支持的 major.minor 版本 51.0**

因此，我尝试通过设置来指定 whirr 的 JDK 版本：

**whirr.java.install-function = install_oracle_jdk7**

但这会导致安装过程失败，尝试修改如下脚本似乎没什么用：

**whirr-0.8.1\core\src\main\resources\functions\install_oracle_jdk7.sh**

有谁知道如何通过 whirr 在 EC2 集群上安装 JDK 7？

* * *

非常感谢拉维。您页面中提到的以下信息是我错过的关键部分：

**...我发现可以在 whirr 安装目录中创建一个函数目录，并将所有修改后的 shell 脚本放在那里...**

我尝试将修改后的 install_oracle_jdk7.sh 放到 whirr-0.8.1\functions 中，这确实有效。以下是我在 install_oracle_jdk7.sh 中的修改：

`(delete)
url=http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-i586.tar.gz
if [ "x86_64" == "$arch" ]; then
url=http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.tar.gz
fi
(add)
url=http://download.oracle.com/otn-pub/java/jdk/7u9-b05/jdk-7u9-linux-i586.tar.gz
if [ "x86_64" == "$arch" ]; then
url=http://download.oracle.com/otn-pub/java/jdk/7u9-b05/jdk-7u9-linux-x64.tar.gz
fi
(delete)
curl $url -L --silent --show-error --fail --connect-timeout 60 --max-time 600 --retry 5 -o `$tmpdir/`basename $url``
(add)
wget -c --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F" $url `--output-document=$tmpdir/`basename $url```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:30:52.017

使用 Whirr，您可以尝试将`install_oab_java`函数用作`java.install-function`. 我有类似的问题，您可以在下面的链接中找到详细信息：

[使用 apache whirr 创建 hadoop 集群](http://www.xmsxmx.com/apache-whirr-create-hadoop-cluster-automatically/)

希望这可以帮助。

# c# - 在没有 System.Drawing.Graphics 的 PNG 上绘图

> ID：13225152
> 
> 赞同：1
> 
> 时间：2012-11-05T02:18:10.227
> 
> 标签：c#, png, gdi+

出于调试目的，我想在我的 c# 应用程序中绘制图像（我有很多图块，我想知道哪一个是哪一个）。但是，当尝试通过 System.Drawing.Graphics 进行操作时，我遇到了这样一个事实，即我尝试绘制的图像是 GIF（我没有任何选择）。是否有另一种方法可以在不使用 System.Drawing 中的类的情况下在 c#/.NET 中绘制图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:54:26.850

从技术上讲，这不是您问的问题，但我猜您无法从 GIF 中绘制位图的原因是像素格式已编入索引。[如果是这样，这很容易通过使用Bitmap.Clone 方法](http://msdn.microsoft.com/en-us/library/ms141944.aspx)制作具有非索引格式的副本来解决。只需给它完整的位图大小和 PixelFormat.Format32bppArgb。

我不知道 .NET 中有任何其他标准绘图 API 可以方便地实现此目的。

# zend-validate - Zend 框架中过滤和验证的正确顺序

> ID：13225154
> 
> 赞同：0
> 
> 时间：2012-11-05T02:18:12.660
> 
> 标签：zend-validate, zend-filter

我对过滤和验证有点困惑，尤其是应该使用的序列。

当您处理要存储在数据库中的用户生成数据时，您是先过滤，然后验证，还是反过来？

过滤可能会纠正使数据有效的错误，因此如果您先过滤，无效数据可能会变为有效，但它与原始用户输入不同。

如果您首先验证，并且您知道数据肯定是有效的，那么为什么还要费心过滤它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:47:53.903

首先，您必须使用验证所有数据，然后将其保存到您的数据库中。

# jquery - Jquery 对话框在 MVC 中不起作用

> ID：13225156
> 
> 赞同：2
> 
> 时间：2012-11-05T02:18:20.350
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-ui-dialog

现在我知道以前有人问过它，但我似乎无法让 JQUERY 对话框工作。

我有一个从 JQUERY 网站获得的简单示例，但对话框从未弹出。

我的 _Layout.cshtml 页面

```
 <!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <title>@ViewBag.Title - My ASP.NET MVC Application</title>
            <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
            <meta name="viewport" content="width=device-width" />
            <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
            <script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
            @Styles.Render("~/Content/css")
            @Scripts.Render("~/bundles/modernizr")
        </head>
        <body>
            <header>
                <div class="content-wrapper">
                    <div class="float-left">
                        <p class="site-title">@Html.ActionLink("your logo here", "Index", "Home")</p>
                    </div>
                    <div class="float-right">
                        <section id="login">
                            @Html.Partial("_LoginPartial")
                        </section>
                        <nav>
                            <ul id="menu">
                                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                                <li>@Html.ActionLink("About", "About", "Home")</li>
                                <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <div id="body">
                @RenderSection("featured", required: false)
                <section class="content-wrapper main-content clear-fix">
                    @RenderBody()
                </section>
            </div>
            <footer>
                <div class="content-wrapper">
                    <div class="float-left">
                        <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                    </div>
                </div>
            </footer>

            @Scripts.Render("~/bundles/jquery")
            @RenderSection("scripts", required: false)
        </body>
    </html> 
```

我的 Index.cshtml 页面

```
 <div id="dialog" title="Basic dialog">
        <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    </div>

<script type="text/javascript">
    $(function () {
        alert("HELLO");
    });
</script>

    <script type="text/javascript">
        $(function () {
            $("#dialog").dialog();
        });
    </script> 
```

警报弹出，但对话框没有，知道为什么吗？

编辑：做了一些编辑，现在我有了这个。

```
<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

<script type="text/javascript">
    $(function () {
        alert("HELLO");
    });
</script>

<script type="text/javascript">
    $(function () {
        alert("HELLO2");
    });
</script>

<script type="text/javascript">
    $(function () {
        $("#dialog").dialog();
    });
</script>

<script type="text/javascript">
    $(function () {
        alert("HELLO3");
    });
</script> 
```

现在，当我有三个警报时，它会发出 HELLO 和 HELLO2 警报，但它永远不会发出 HELLO3 .. 但是，如果我将 HELLO3 脚本放在对话框脚本之上，它将显示所有 3 个警报。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:46:20.237

它可以自己找到：http: [//jsfiddle.net/Dy2Xw/](http://jsfiddle.net/Dy2Xw/)

检查您的脚本以确保它们正确加载。此外，您似乎正在加载 jquery base js 两次。

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>

<script src="http://code.jquery.com/jquery-1.8.2.js "></script> 
```

您还有两个 css 文件 - 不知道为什么需要这两个文件：

```
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.dialog.css")" rel="stylesheet" type="text/css" /> 
```

清理那些脚本加载，检查控制台是否有任何 js 错误，只输入你需要的，然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T05:27:21.093

也许它与`</body>`vs`<head>`标签之前的 js 文件的位置有关。移动`@Scripts.Render("~/bundles/jquery")`到`<head></head>`标签

# linq - 如何获得条件包括子实体及其相关实体

> ID：13225158
> 
> 赞同：1
> 
> 时间：2012-11-05T02:18:39.343
> 
> 标签：linq, entity

以下代码对我有用：

```
var query0 = DB.Plan
    .Include("UserCreate")
    .Include("UserUpdate")
    .Include("PlanTemplate")
    .Select(p => new
            {
                plan = p,
                planItems = p.PlanItems.Where(pi => pi.IsCommited == true && pi.IsLocked ==    false)
            });
var query2 = query0.AsEnumerable().Where(m => m.planItems.Count() > 0).Select(m => m.plan); 
```

但是与我想要的另一个实体相关的 planItems，以下代码对我不起作用：

```
var query0 = DB.WorkEffortPlan
.Include("UserCreate")
.Include("UserUpdate")
.Include("PlanTemplate")
.Select(p => new
{
    plan=p,
    planItems = DB.PlanItem
    .Include("UserResponsiblePerson")
    .Include("TemplateItem")
    .Include("ItemState")
    .Where(pi => pi.PlanID == p.PlanID && pi.IsCommited == true && pi.IsLocked == false)
});
var query2 = query0.AsEnumerable().Where(m => m.planItems.Count() > 0).Select(m => m.plan); 
```

vs 编译器运行正常，但是当执行此代码时，我在 query0 中得到 NullReferenceException。

是否有任何 linq 解决方案来过滤子实体及其相关实体？

# php - 如何在 JavaScript 中使用值 (PHP)

> ID：13225171
> 
> 赞同：0
> 
> 时间：2012-11-05T02:19:29.320
> 
> 标签：php, javascript, gettext, multilingual

我有像“en.lang.php”这样的语言文件：

```
/* english language */
return array(
    "random.key.one" => "random value one", 
    "random.key.two" => "random value two); 
```

用法（快速而肮脏的方式）：

```
/* random_template.php */
$language = "en";
$file = $language . ".lang.php";
$text = include($file);
echo $text["random.key.one"]; // "random value one" 
```

**问题**：如何在 JavaScript 中使用这个值？

**思路**：使用返回所需值的函数生成en.lang.js，用法：

```
alert(get_text("random.key.one")); 
```

**问题**：每次更改 *.lang.php 文件时，我都必须刷新缓存。不是那么用户友好。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:29:55.687

如果您使用的是 PHP >= 5.2.1（技术上是 .0），我能想象的最简单的方法如下：

有一个生成 JSON 数组的文件

```
echo 'set_text(' . json_encode(include($file)) . ')'; 
```

JavaScript 方面：

```
var texts = [];
function set_text(languageTexts){
  texts = languageTexts;
}
function get_text(key) {
  return texts[key];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:39:20.683

尝试缓存控制页面并将其设置为无缓存，以便它将从源加载。

如果你想玩 PHP 和 JS，你必须记住 PHP 是服务器端，而 JS 是客户端。所以我能建议的最好的事情是使用 Ajax。它非常容易在页面上使用 JS 并让 JS 查询使用 php 处理数据的服务器。

# java - 带有正则表达式的 Java String.split()

> ID：13225175
> 
> 赞同：1
> 
> 时间：2012-11-05T02:20:56.130
> 
> 标签：java, regex, string, parsing, split

我有一个解析问题。我有存储为字符串的句子。我想抓取每个句子中的每个单词，但是我想过滤我抓取的单词。例如说我有一个类似下面的句子：

> Hell0 3v3ryb0dy @ stackoverflow $people \暗示女王$ 等于 ~queen --> ~people。/＃逻辑

我会做以下事情：

1.  抓住'H3ll0'
2.  抢3v3ryb0dy
3.  扔掉@
4.  从 '$people' 中获取 'people'
5.  从 '\implies' 中获取 'implies'
6.  从 'queen$' 中获取 'queen'
7.  抓住“等于”
8.  从'~queen'中抢'queen'
9.  扔掉-->
10.  从 '~people' 中获取 'people'
11.  从'/#logic'中获取'逻辑'

本质上，我只想要字母数字字符，每当我在单词之前或之后有一些其他字符（例如 \）时，我都想忽略这个其他字符。

目前我正在做：`sentence.split(" ")`

这会从句子中获取单个单词，但它会抓取 '$people' 和 '~people' 并在我希望它们受到相同对待时以不同方式对待它们。

1.  我怎样才能做到这一点？
2.  正则表达式会在这里帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T02:40:46.573

使用此正则表达式拆分字符串`\\W+`，拆分为一个或多个非单词字符。

```
String sentence = "Hell0 3v3ryb0dy @ stackoverflow $people \\implies queen$ equals ~queen --> ~people. /#logic";
String[] split = sentence.split("\\W+");
System.out.println(Arrays.asList(split)); 
```

**输出**

> [Hell0，3v3ryb0dy，stackoverflow，人，暗示，女王，等于，女王，人，逻辑]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:33:08.447

我正在使用这个正则表达式。
`[^A-Za-z0-9 ]+`（已编辑）我得到的输出是：
`Hell0 3v3ryb0dy stackoverflow people implies queen equals queen people logic`

这是您所期望的吗？

从[myregextester 截取](http://myregextester.com/index.php)

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;
class Module1{
  public static void main(String[] asd){
  String sourcestring = "source string to match with pattern";
  Pattern re = Pattern.compile("[^A-Za-z0-9 ]+",Pattern.CASE_INSENSITIVE);
  Matcher m = re.matcher(sourcestring);
  String result = m.replaceAll("");
  }
}

$sourcestring after replacement:
Hell0 3v3ryb0dy stackoverflow people implies queen equals queen people logic 
```

# java - java中的HashMap不能散列MyObject

> ID：13225176
> 
> 赞同：1
> 
> 时间：2012-11-05T02:21:03.930
> 
> 标签：java, hashmap, hashset

我定义了一个名为**SetOb**的简单私有类，其中包含一个**int**和一个**Set**数据结构。我在“主”方法中有一个 HashMap，其中**SetOb**作为键，整数作为值。现在，正如您在 main 方法中看到的那样，当我为 HashMap 提供一个**SetOb**实例，然后查找具有完全相同值的实例时，它返回“null”。在我使用自己定义的数据结构（如**SetOb**）作为 HashMap 中的 Key 之前，这种情况已经发生过好几次了。有人可以指出我错过了什么吗？请注意，在 SetOb 类的构造函数中，我复制了作为参数传递的 Set。

```
public class Solution {

    public static Solution sample = new Solution();
    private class SetOb {
        public int last;
        public Set<Integer> st;
        public SetOb(int l , Set<Integer> si ){
            last = l;
            st = new HashSet<Integer>(si);
        }
    }

    public static void main(String[] args) {
        Map<SetOb, Integer> m = new HashMap< SetOb, Integer>();
        Set<Integer> a = new HashSet<Integer>();

        for(int i =0; i<10; i++){
            a.add(i);
        }
        SetOb x = sample.new SetOb(100, a);
        SetOb y = sample.new SetOb(100, a);
        m.put(x,500);
        Integer val = m.get(y);
        if(val!= null) System.out.println("Success: " + val);
        else System.out.println("Failure");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:24:58.653

您的`x`和`y` **不是同一个对象实例，**因此 contains 无法匹配`y`，`x`最终无法在 Map 中找到匹配的键/值。

如果您希望匹配成功，请实现（覆盖）`hasCode`&将比较字段值的`equals`方法。`SetOb`

示例方法（Eclipse 生成）如下：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + last;
    result = prime * result + ((st == null) ? 0 : st.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    SetOb other = (SetOb) obj;
    if (last != other.last)
        return false;
    if (st == null) {
        if (other.st != null)
            return false;
    } else if (!st.equals(other.st))
        return false;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T02:26:06.673

`SetOb`需要覆盖 the`hashCode()`和`equals()`方法。

基于散列的集合使用这些方法来存储（`hashCode()`）和检索（`hashCode()`）和`equals()`）您的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T02:26:49.937

默认实现`hashCode`使用*对象标识*来确定哈希码。如果您想要*价值标识*，您将需要在您的私有类中实现`hashCode`(and ) 。例如：`equals`

 *```
private class SetOb {
    public int last;
    public Set<Integer> st;
    public SetOb(int l , Set<Integer> si ){
        last = l;
        st = new HashSet<Integer>(si);
    }
    @Override
    public boolean equals(Object other) {
        if (other.class == SetOb.class) {
            SetOb otherSetOb = (SetOb) other;
            return otherSetOb.last == last && otherSetOb.st.equals(st);
        }
        return false;
    }
    @Override
    public int hashCode() {
        return 37 * last + st.hashCode();
    }
} 
```*

# html - 删除网页末尾的大白间距

> ID：13225178
> 
> 赞同：0
> 
> 时间：2012-11-05T02:21:16.310
> 
> 标签：html, css

该网页在网页末尾有很多空白。我没有边距、填充或高度限制。

所有网页内容都包含在一个名为 full 的 div 中：

```
#full{ background-color:#181818; height:1380px; min-width:1061px; text-align:center}
#full{ background-color:#181818; height:1380px; min-width:1061px; text-align:center}
#full{ background-color:#181818; height:1380px; min-width:1061px; text-align:center} 
```

如果有人能告诉我它来自哪里，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:33:15.443

您的网站中似乎存在许多 HTML 问题；HTML Validator 向我显示了 72 个错误（主要是关闭标签和不正确的结构） - 先修复这些错误，然后看看你有什么。我建议您[使用 Firefox 的 HTML Validator 插件](https://addons.mozilla.org/en-US/firefox/addon/html-validator/)来帮助您入门。

我看到的最大问题是您缺少开始`<body>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:40:39.343

如果您将鼠标悬停在“联系我们”导航选项上，答案将变得非常清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:45:05.940

导致您的“空白问题”的确切行是 228-232

```
<h2><a href="http://www.facebook.com/ubreakirepair"><img src="http://www.ubreakirepair.com/ebaysite/images/facebookmenu.png" id="cufacebook"></a></h2> 
```

等等。删除它们，空格就消失了。但是您的 HTML 中的问题远不止这些。我建议使用验证器。

# php - eval() 不工作？

> ID：13225180
> 
> 赞同：2
> 
> 时间：2012-11-05T02:21:31.293
> 
> 标签：php, eval

我正在尝试通过 PHP 从图像的 EXIF 数据中获取焦距。

这是我到目前为止的代码：

```
$exif = exif_read_data("$photo");
$length10 = $exif['FocalLength'];
$length = eval($length10); 
```

在这种情况下，$length10 会为 105 毫米返回类似“1050/10”的内容。我不知道为什么。我要做的就是让 PHP 进行数学运算以返回 105。但是，当我运行它时，我收到以下错误消息：

```
[04-Nov-2012 20:06:39] PHP Parse error:  syntax error, unexpected $end in index.php(52) : eval()'d code on line 1 
```

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T02:24:33.500

因为`1050/10`不是*有效的 PHP*。它没有终止`;`语句，并导致语法错误。

```
php > eval("1050/10");
PHP Parse error:  syntax error, unexpected end of file in php shell code(1) : eval()'d code on line 1 
```

而不是它（这在技术上是危险的，因为即使它来自 EXIF，`eval()`您也在有效地处理*用户输入*`/`），建议使用正则表达式拆分或捕获操作数，然后自己执行操作。

```
// Test if the value matches the division pattern
if (preg_match('~^(\d+)/(\d+)$~', $length10, $operands)) {
  // Following a successful match, $operands is an array 
  // containing the full matched string and the two numbers captured
  // in indices [1],[2]

  // Watch for div by zero!
  if ($matches[2] !== 0) {
    echo $operands[1] / $operands[2];
  }
}
else {
  echo $length10;
} 
```

# google-chrome-extension - 如何获取与 chrome 扩展中的 cookie 关联的 url？

> ID：13225183
> 
> 赞同：3
> 
> 时间：2012-11-05T02:21:47.743
> 
> 标签：google-chrome-extension

所以我`chrome.cookies.getAll({}, function(c){console.log(c);})`用来获取存储在系统上的所有 cookie。但是，如果我需要处理生成的 cookie 以删除或其他任何内容，我需要一个与每个 cookie 关联的 URL。奇怪的是，该 URL 不在 cookie 结构中：http: [//developer.chrome.com/extensions/cookies.html#type-Cookie](http://developer.chrome.com/extensions/cookies.html#type-Cookie)

任何人都知道如何获取与 cookie 关联的 URL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:31:35.587

您可以根据您获得的信息构建 URL `getAll()`：

```
var cookie; // one single cookie from the array

var url = '';
// get prefix, like https://www.
url += cookie.secure ? 'https://' : 'http://';
url += cookie.domain.charAt(0) == '.' ? 'www' : '';

// append domain and path
url += cookie.domain;
url += cookie.path;

console.log(url); // something like "https://www.stackoverflow.com/" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:33:22.447

*domain*属性为您提供与 cookie 关联的域。*path*为您提供该域内的路径。从[Cookie API 测试扩展](http://developer.chrome.com/extensions/examples/api/cookies.zip)：

```
function removeCookie(cookie) {
  var url = "http" + (cookie.secure ? "s" : "") + "://" + cookie.domain +
            cookie.path;
  chrome.cookies.remove({"url": url, "name": cookie.name});
} 
```

# ruby-on-rails - 过滤rails模型中的假列

> ID：13225187
> 
> 赞同：0
> 
> 时间：2012-11-05T02:23:00.303
> 
> 标签：ruby-on-rails

我有一个设施模型，它基本上有一堆布尔列。

我想在视图中显示真列，所以我想在模型级别过滤掉假列。

我最初的想法：

```
# in model file
 def available
    a = {}
    self.attributes.each do |key, value|
      if value
        a[key] = value
      end
    end
    a
  end 
```

这并不完美，因为它为我提供了 id、created_at 和 modified_at 列。

我觉得必须有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:29:35.020

我认为迭代`self.attributes`是一个好主意。您可以`value`更严格地测试以过滤掉非布尔列。

```
a[key] = value if [TrueClass, FalseClass].include? value.class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:51:05.560

使用@Deefour 的建议，我最终得到了这个：

```
 def available
    a = {}
    hidden = ["id","created_at","updated_id","business_id"]
    self.attributes.each do |key, value|
      a[key] = value if value.class == TrueClass
      a[key] = value if [String].include? value.class and not value.empty?
      a[key] = value if not hidden.include? key and value.class == Fixnum
    end
    a
  end 
```

# jquery - JQuery验证asp.net页面上的html输入

> ID：13225188
> 
> 赞同：0
> 
> 时间：2012-11-05T02:23:06.740
> 
> 标签：jquery, asp.net, twitter-bootstrap

我正在使用 Twitter 引导程序和 asp.net 来构建一个网页来捕获用户信息。我将此资源用作参考... [http://alittlecode.com/files/jQuery-Validate-Demo/](http://alittlecode.com/files/jQuery-Validate-Demo/)

我有一个母版页，我在其中定义了一个表单

```
<form id="form1" class="form-horizontal" runat="server"> 
```

并包括对 JQuery 的引用...

```
 <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
 <script src="js/jquery.validate.min.js" type="text/javascript"></script> 
```

在我的网页上，我有一个输入控件

```
<div class="control-group">
                <label class="control-label" for="name">
                    Your Name</label>
                <div class="controls">
                    <input type="text" class="input-xlarge" id="txtApplicantName" name="txtApplicantName" placeholder="First Name and Last Name"
                        runat="server">
                </div>
            </div> 
```

该资源有一些 JQuery 代码来验证我无法工作的表单字段......

```
$(document).ready(function(){

 $('#contact-form').validate(
 {
  rules: {
    name: {
      minlength: 2,
      required: true
    },
    email: {
      required: true,
      email: true
    },
    subject: {
      minlength: 2,
      required: true
    },
    message: {
      minlength: 2,
      required: true
    }
  },
  highlight: function(label) {
    $(label).closest('.control-group').addClass('error');
  },
  success: function(label) {
    label
      .text('OK!').addClass('valid')
      .closest('.control-group').addClass('success');
  }
 });
}); // end document.ready 
```

我已将 $('#contact-form').validate 更改为 $('#form1').validate 但它似乎不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:50:43.150

规则的名称适用于文本框的类先试试这个：

```
 $(document).ready(function () {
        $("#form1").validate();
        jQuery.validator.messages.required = "*";
        jQuery.validator.messages.email = "Invalid Email"; //set any error message
    }); 
```

然后在 HTML 中

```
<input type="text" class="input-xlarge required" id="txtApplicantName" name="txtApplicantName" placeholder="First Name and Last Name"  runat="server"> 
```

一旦你得到验证工作，你可以弄乱每个规则

编辑：

现在对于表单上的其他输入，例如可能是这样的电子邮件地址输入，因为它有一类电子邮件，它将自动验证电子邮件地址。

```
<input type="text" class="input-xlarge email" id="txtEmail" name="txtEmail" placeholder="Email Address" runat="server"> 
```

现在，如果您想要一个客户规则——在您的示例中它看起来并不像您需要的那样，但无论如何您都是这样做的

```
$("#myinput").rules("add", {
 required: true,
 minlength: 2,    // chage to any number you want min-length
 messages: {
   required: "Required input",     
   minlength: jQuery.format("Please, at least {0} characters are necessary")
 }
}); 
```

如果您愿意，可以将更多选项添加到自定义规则中，请查看文档，但这就是它的外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:30:54.113

```
<input type="text" class="input-xlarge" id="txtApplicantName" name="txtApplicantName"> 
```

由于您输入的名称属性是“txtApplicantName”，因此您应该有类似的规则

```
rules: {
  txtApplicantName: {
    minlength: 2,
    required: true
  }
} 
```

更新：检查您的 html 中的表单元素，我刚刚做了一些实验，似乎表单需要有一个“动作”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:49:41.637

`$("#form1").validate();`错了，应该是`$("#<%= form1.ClientID %>").validate();`

或者，如果您愿意，您可以保留代码不变，只需将此属性添加到您的表单标签

```
ClientIDMode="Static" 
```

# c# - 我的设计是否遵循单一职责原则？

> ID：13225189
> 
> 赞同：1
> 
> 时间：2012-11-05T02:23:21.447
> 
> 标签：c#, oop, design-patterns

我想为网站建立一个注册类。这是我的用例——

1.  用户将提供用于注册的电子邮件 ID 和密码
2.  如果电子邮件 ID 已经存在，那么 Register 类将发送一条错误消息，指出该电子邮件已经存在于我们的系统中
3.  如果我们的系统中不存在电子邮件，则 Register 类将在用户电子邮件 ID 中发送一封激活电子邮件并向用户显示消息——一封激活电子邮件已发送到他/她的电子邮件

这是我想到的设计

```
Interface IRegister
{
 string RegisterUser(string email, string password);
}

public class Register:IRegister
{        
    public string RegisterUser(string email, string password)
    {
        //Call IsUserExist and SentActivationEmail method internally
    }

    private bool IsUserExist()
    {            
    }

    private void SendActivationEmail()
    {
    }
} 
```

我不想在 IRegister 中提及 IsUserExist 和 SendActivationEmail 方法，以便它保持简单。现在我可以如何强制实现注册类的开发人员，他/她应该使用 IsUserExist 和 SendActivationEmail 方法并执行用例中提到的所有操作。这种设计是否违反了 SRP 原则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:35:52.717

如果您想强制开发人员使用这些方法，那么您应该声明一个带有受保护抽象方法的抽象类，而不是一个接口。然后定义强制执行这些方法，但开发人员可以根据需要自由实现它们。

```
public abstract class Register:IRegister
{        
    public string RegisterUser(string email, string password)
    {
        //Call IsUserExist and SentActivationEmail method internally
    }

    protected abstract bool IsUserExist();

    protected abstract void SendActivationEmail();
} 
```

话虽如此，为了遵守 SRP 原则，我会将其中的电子邮件部分提取到依赖的 IActivationEmailer 接口中。发送电子邮件和注册实际上是两个不同的操作，应该分开。

```
public interface IActivationEmailer {
    void SendActivationEmail();
}

public abstract class Register:IRegister
{        
    private IActivationEmailer m_emailer;
    protected Register(IActivationEmailer emailer){
       // store emailer to field
       m_emailer = emailer;
    }

    public string RegisterUser(string email, string password)
    {
        //Call IsUserExist and m_emailer.SentActivationEmail method internally
    }

    protected abstract bool IsUserExist();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:17:32.430

我同意迈克斯的回答。稍微不同的方法是应用[模板方法](http://www.oodesign.com/template-method-pattern.html)并让子类定义他们想要在注册时执行的操作（我不熟悉 C#，所以请多多包涵）：

```
public abstract class Register:IRegister
{        
    public string RegisterUser(string email, string password)
    {
        if (this.IsUserExist())
        {
        //throw the error
        }
        else
        {
         this.performRegistration();
         this.notifyUSer();
        }
    }

    protected abstract bool IsUserExist();

    protected abstract notifyUSer();

    protected abstract performRegistration(){}
} 
```

然后，正如迈克指出的那样，您可以定义：

```
public interface IActivationEmailer {
    void SendActivationEmail();
}

public class CustomRegister
{        
    private IActivationEmailer m_emailer;

    public CustomRegister(IActivationEmailer emailer){
       // store emailer to field
       m_emailer = emailer;
    }

    protected abstract bool IsUserExist(){...}

    protected abstract notifyUSer() {this.m_emailer.SendActivationEmail();}

    protected abstract performRegistration(){...}
} 
```

所以基本上，Register 类定义了注册期间要遵循的步骤，但它让子类来说明如何实现这些步骤。

高温高压

# iphone - 如何从等于类数据成员的块中获取 NSArray？

> ID：13225194
> 
> 赞同：2
> 
> 时间：2012-11-05T02:23:51.207
> 
> 标签：iphone, ios, restkit, objective-c-blocks

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [VenueManager searchNear:@"Orlando"
                      onLoad:^(NSArray *objects) {
                          self.locationObjects = objects;
                          [self.tableView reloadData];
                   } onError:^(NSError *error) {
                      NSLog(@"%@", error);
    }]; 
```

}

此代码在我的 UITableViewController 类的 viewDidLoad 方法中。它是使用 RestKit 从 FourSquare 解析 JSON 文件的起点。我把头发拉了出来，因为在我放 [self.tableView reloadData]; 之前，我无法让对象显示在我的表视图中。如果没有那个调用，应用程序甚至都不会点击我`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)`，因为在块完成后执行 locationObjects 将为零。

在我调试它之前，当我在块中时 self.locationsObjects = objects 起作用（顺便说一下，我对块非常不熟悉）。一旦我走出障碍，调试器就会说 locationObjects 为零，即使它说它有 30 个对象，就像我在赋值语句处有断点时对象所做的一样。

有人可以帮助我了解这里发生了什么。

附加信息：

现在一切正常，或者似乎正常工作我的表填充了来自 JSON 文档的对象请求。最初我在普通的 ViewController 中做同样的事情，并试图设置`objects`from 块等于`locationObjects`. 然后使用一种`prepareForSegue`方法，我试图以`locationObjects`我从众多教程中学到的标准方法将其传递给 tableViewController。我会收到一个 SIGBAT 错误。由于发送到表视图控制器的选择器无法识别，线程将终止。通过调试，我会发现`locationObjects`prepareForSegue 方法中可能为零。这是 viewController 文件中的代码。

此外，我会在这里收到一个警告，`locationTableViewController.locationObjects = self.locationObjects;`说有关将 NSArray 类型的指针分配给强 NSArray 或类似的东西（我已经改变了很多，试图让代码正常工作并删除了一些故事板资产，所以我不是 100%确定措辞）。

```
@implementation CoffeeShopViewController

@synthesize venueCountLable = _venueCountLable;
@synthesize locationObjects = _locationObjects;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [VenueManager searchNear:@"Orlando"
                      onLoad:^(NSArray *objects) {
                          self.venueCountLable.text = [NSString stringWithFormat:@"%d", objects.count];
                         self.locationObjects = objects;
    } onError:^(NSError *error) {
        NSLog(@"%@", error);
    }];

}

- (void)viewDidUnload
{
    [self setVenueCountLable:nil];
    [super viewDidUnload];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"locationTableSegue"])
    {
        LocationTableViewController *locationTableViewController = segue.destinationViewController;
        locationTableViewController.locationObjects = self.locationObjects;
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:02:25.487

尝试：

```
 @property (nonatomic, copy) NSArray *locationObjects;' 
```

编辑为什么这样做：

老实说，我真的不知道这个工作和强不工作的根本原因。当我看到这个问题时，我觉得 strong 等同于保留 - 插入副本而不是 strong 可以确保 locationObjects 不会被无效。再想一想，我怀疑我的假设可能是错误的——retain 的字面意思是“不要释放这个对象，因为现在还有一个人拿着它。”

然而，这有点不同。看到[这个](https://stackoverflow.com/questions/2399490/what-is-the-difference-between-copy-and-retain)。

Malaxeur 的回答和下面的评论可能适用于您的示例中的 NSArray - 尽管对 locationObjects 拥有强大的所有权，但您得到的是对对象 NSArray（一个 NSMutableArray*）的引用，而不是它的副本。一旦超出范围（块结束），它就不再可用，并且 ARC 声明它。反过来使用 copy 会强制它在内存中为 locationObjects 创建另一个空间，该空间将永远保留，直到您释放它为止。

我仍然不认为这是一个完美的解释，因为我从未完全理解块。我会向所有了解更多的人开放，一旦我得到有用的东西就会填满。

# javascript - 用户填写完文本输入后如何自动克隆？

> ID：13225198
> 
> 赞同：0
> 
> 时间：2012-11-05T02:24:30.763
> 
> 标签：javascript, jquery, javascript-events

我有带有 2 个文本字段的简单表单，`Name`并且可以在单击按钮`Phone`时添加新字段。`Add new`你可以参考这里[jsfiddle](http://jsfiddle.net/ruslyrossi/3J65U/1/)。

我的问题是如何在不按下`Add New`按钮的情况下添加新的文本字段？当用户填写`Text Input name`并`Text Input Phone`新行将`<tr class="person">`自动添加。

我的第二个问题是我不确定如何编写删除代码。

更新：我也想设置最大克隆，可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T02:49:26.147

如果“填充”是指“当用户输入电话字段允许的尽可能多的字符时”，那么您可以`maxlength="10"`向输入添加一个属性（根据需要设置值）：

```
<input type="text" name="phone[]" id="phone" maxlength="10"/> 
```

...并向`keyup`事件添加一个处理程序，以检查当前值是否已达到`maxlength`：

```
$('input[name="phone\[\]"]').keyup(function() {
    if (this===$('input[name="phone\[\]"]').last()[0]
        && this.value.length===+$(this).attr("maxlength")) {
        $("#add").click();
    }
}); 
```

请注意，如果用户在最后一行输入，您可能只想进行此测试，因此是`if`上面测试的第一部分。

此外，您可能希望新克隆的字段为空白，因此您可以在 add 函数中执行此操作：

```
$('#mytable tbody>tr:last').clone(true).insertAfter('#mytable tbody>tr:last')
                           .find("input").val(""); 
```

要设置最大行数，您可以在 add 函数中进行测试：

```
$("#add").click(function() {
    var $lastRow = $('#mytable tbody>tr:last');
    if ($lastRow.index() < 10) { // set maximum rows here
        $lastRow.clone(true).insertAfter($lastRow).find("input").val("");
    }
    return false;
}); 
```

另请注意，您不需要为这些输入提供`id`属性，但如果这样做，则在克隆时不应复制它，因为它`id`应该是唯一的。

对于删除功能，为每一行添加一个删除按钮：

```
<td><input type="button" class="deleteRow" value="Delete"/></td> 
```

...接着：

```
$("#mytable").on("click","input.deleteRow", function(){
    if ($("#mytable tr").length > 2) // don't delete the last row
        $(this).closest("tr").remove();
}); 
```

演示：http: [//jsfiddle.net/3J65U/15/](http://jsfiddle.net/3J65U/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:39:23.983

您可以`blur`在添加新按钮上执行此操作。还要小心重复的 id，请改用类：

```
<tr class="person">
  <td><input type="text" name="name[]" class="name" /></td>
  <td><input type="text" name="phone[]" class="phone" /></td>
</tr> 
```

然后在 jQuery 中：

```
$('.phone').blur(function() {
  var ppl = $('.person').length;
  if ( this.value && ppl < 5 ) { // Max 5 people
    $(this).closest('tr').clone(true)
      .insertAfter('#mytable tr:last')
      .find('input').val('').first().focus();
    $(this).off('blur');
  }
}); 
```

**演示： http:** [//jsfiddle.net/elclanrs/YEBQt/](http://jsfiddle.net/elclanrs/YEBQt/)（从输入到输入的选项卡）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:43:46.743

I would expand on enclares - I would use `.blur()` for each textbox , and each time check and make sure each value is not "" - that would make sure both are filled

Then in jQuery:

```
$(document).ready(function() {
    $(".phone").blur(function() {
      var phonetxt = $('.phone'.val();
      var nametxt = $('.name').val();
      if ( phonetxt != "" && nametxt != "" ){
        $(this).closest('tr').clone(true)
            .insertAfter('#mytable tr:last')
            .find('input').val('').first().focus();
    });
}

 $(".name").blur(function() {
    var phonetxt = $('.phone'.val();
    var nametxt = $('.name').val();
    if ( phonetxt != "" && nametxt != "" ){
        $(this).closest('tr').clone(true)
            .insertAfter('#mytable tr:last')
            .find('input').val('').first().focus();
    });
  }
});​ 
```

# c# - 控件和屏幕内边界的碰撞检测（视图）

> ID：13225200
> 
> 赞同：1
> 
> 时间：2012-11-05T02:24:36.263
> 
> 标签：c#, .net, microsoft-metro

我正在为 win 8 制作一个简单的应用程序，用户可以在其中移动控件（按钮等），如何检测按钮何时相互碰撞以及如何检测该按钮与屏幕的内边界发生碰撞？请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:52:09.727

根据我的游戏编程经验，我想您会使用两个对象的位置和大小进行检查，以确定是否存在交叉点，从而确定是否发生碰撞。可能在对象移动事件上执行此操作。循环浏览整个对象集合并进行交叉检查。

我不太确定你想要实现什么并且没有 Windows 8，但原则应该仍然有效。

# python - 以用户在 Python 中指定的格式打印表格？

> ID：13225201
> 
> 赞同：0
> 
> 时间：2012-11-05T02:24:46.510
> 
> 标签：python

程序从多少行开始？多少列？每个列的对齐方式？（左（L），中心（C），右（R））。然后接受用户的条目（表中的数据）。条目应以用户指定的格式打印？这是我到目前为止所做的：

```
rows = input("How many rows?")
coloumns = input("How many coloumns?")
alignment = raw_input("Enter alignment of each table?")
entry = raw_input("Enter rows x cols entries:")
print entry 
```

我认为我必须以这样一种方式格式化条目，以使其完全符合用户的需求。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:35:08.143

从[http://ginstrom.com/scribbles/2007/09/04/pretty-printing-a-table-in-python/](http://ginstrom.com/scribbles/2007/09/04/pretty-printing-a-table-in-python/)引用的这段代码将为您提供帮助。

```
import locale
locale.setlocale(locale.LC_NUMERIC, "")
def format_num(num):
    """Format a number according to given places.
    Adds commas, etc. Will truncate floats into ints!"""

    try:
        inum = int(num)
        return locale.format("%.*f", (0, inum), True)

    except (ValueError, TypeError):
        return str(num)

def get_max_width(table, index):
    """Get the maximum width of the given column index"""
    return max([len(format_num(row[index])) for row in table])

def pprint_table(out, table):
    """Prints out a table of data, padded for alignment
    @param out: Output stream (file-like object)
    @param table: The table to print. A list of lists.
    Each row must have the same number of columns. """
    col_paddings = []

    for i in range(len(table[0])):
        col_paddings.append(get_max_width(table, i))

    for row in table:
        # left col
        print >> out, row[0].ljust(col_paddings[0] + 1),
        # rest of the cols
        for i in range(1, len(row)):
            col = format_num(row[i]).rjust(col_paddings[i] + 2)
            print >> out, col,
        print >> out

table = [["", "taste", "land speed", "life"],
    ["spam", 300101, 4, 1003],
    ["eggs", 105, 13, 42],
    ["lumberjacks", 13, 105, 10]]

import sys
out = sys.stdout
pprint_table(out, table) 
```

在您的情况下，因为您正在收集表格中的行、列、对齐和条目的输入，您可以将它们插入以构造您的`table`变量。

*   len(table[0]) 相当于列数（-1 以防止在“y 轴”标签中计数，也称为表索引）。
*   len(table) 等于您的行数（-1 以防止在表头中计数）。
*   col_padding（对齐）是在计算特定列时使用`rjust`和方法动态计算的。`ljust`
*   并且表列表中的每个元素都可以使用标准的 python 列表语法进行更新。

# javascript - HTML 多页表单问题（页面正在刷新）

> ID：13225206
> 
> 赞同：0
> 
> 时间：2012-11-05T02:25:44.933
> 
> 标签：javascript, html, forms

我在提交多页表单时遇到问题。问题是当我按下下一页按钮时页面正在刷新。我相信这是一个返回真/假的问题，但我不知道问题出在哪里。这是代码：

```
$(document).ready(function () {
        var info = [];
        function showinfo() {
            for (i=0; i<info.length; i++) {
                $('#step3 ul').append(
                    $('<li>' + info[i] + '</li>')
                );
            };
        };
        $('#step1_btn').click(function() { 
            $("input").each(function() {
                if (input.type != radio) {
                    info.push(this.name+':'+this.value);
                } else if ($('.radio').is(':checked')) {
                    info.push(this.name+':'+this.value);
                }
            });
            $('#step1').css('display','none');
            $('#step2').css('display','inherit');
            $('#progbar').attr('value',33);
            return false;
        });
        $('#step2_btn').click(function() {
            $("input").each(function() {
                if (input.type != radio) {
                    info.push(this.name+':'+this.value);
                } else if ($('.radio').is(':checked')) {
                    info.push(this.name+':'+this.value);
                }
            });
            $('#step2').css('display','none');
            $('#step3').css('display','inherit');
            $('#progbar').attr('value',66);
            showinfo();
            return false;
        });
    }); 
```

不确定这是否就是您需要看到的全部内容。如果您还需要查看 html，我可以提供。提前感谢大家可以提供的任何帮助。当别人写它时，我可以很好地阅读 javascript，但由于某种原因，我自己写它每次都以灾难告终。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:27:53.787

尝试[event.preventDefault()](http://api.jquery.com/event.preventDefault/)：

```
$('#step1_btn').click(function(e) { 
   e.preventDefault();
   // your code here
   return false;
}); 
```

# spring - 将 webapp 迁移到 JSF 2.1 和 RichFaces 4 时出现 org.hibernate.LazyInitializationException

> ID：13225207
> 
> 赞同：0
> 
> 时间：2012-11-05T02:25:59.523
> 
> 标签：spring, hibernate, jsf, transactions, richfaces

我知道这个问题被问了很多，但奇怪的是我在使用 jsf 1.1 / richfaces 3 以及 hibernate 3.7 和 spring 2.5 时没有任何问题。

现在我将前端迁移到 jsf 2.1 / richfaces 4（hibernate 和 spring 保持不变），当我尝试访问在 hibernate 映射配置中标记为“lazy=true”的集合时，会出现以下异常：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.mu.afs.Afi.cods, no session or session was closed
at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:358)
at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:350)
at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:97)
at org.hibernate.collection.PersistentBag.size(PersistentBag.java:225)
at javax.faces.model.ListDataModel.isRowAvailable(ListDataModel.java:91)
at javax.faces.model.ListDataModel.setRowIndex(ListDataModel.java:105) 
```

我尝试访问的集合在与实体`rich:datatable`相同的 xhtml 中被 a 引用；`Afi`这是 xhtml 的一部分，它尝试根据主表的 ajax 请求访问集合：

```
<rich:extendedDataTable id="tableCods" selectionMode="single" 
selection="#{afiBean.codSelected}"
style="width: 100%; height: 100px" 
value="#{afiBean.selectedAfi.cods}" var="cod">
...
<rich:column width="50px" style="text-align: right;">
    <f:facet name="header"><h:outputText value="Months"/></f:facet>
    <h:outputText value="#{cod.months}" />
</rich:column>
<rich:column width="80px" style="text-align: right;">
    <f:facet name="header"><h:outputText value="Cap" /> </f:facet>
    <h:outputText  value="#{cod.cap}">
        <f:convertNumber pattern="######,##0.00" locale="es_AR" />
    </h:outputText>
</rich:column>
<rich:column width="200px" style="text-align: center;">
    <f:facet name="header"><h:outputText value="Class"/></f:facet>
    <h:outputText value="#{cod.clazz}" />
</rich:column>
... 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
...
<filter>
    <filter-name>sessionFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sessionFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
... 
```

这是我的 application-context.xml 的一部分：

```
...
    <bean id="txManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="txProxyTemplate" abstract="true"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager" ref="txManager" />
    <property name="transactionAttributes">
        <props>
            <prop key="save*">PROPAGATION_REQUIRED</prop>
            <prop key="store*">PROPAGATION_REQUIRED</prop>
            <prop key="get*">PROPAGATION_REQUIRED</prop>
            <prop key="read*">PROPAGATION_REQUIRED</prop>
            <prop key="load*">PROPAGATION_REQUIRED</prop>
            <prop key="*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
</bean>
... 
```

访问`Afi`实体的服务定义如下：

```
<bean id="afiService" parent="txProxyTemplate">
    <property name="proxyInterfaces" value="com.mu.afs.services.AfiService" />
    <property name="target">
        <bean class="com.mu.afs.services.impl.AfiServiceImpl">
            <property name="afiDao" ref="afiDao" />
        </bean>
    </property>
</bean>
    <bean id="afiliadosDao"
    class="com.mu.afs.dao.impl.HibernateAfiDaoImpl"
    parent="hibernateDaoSupport">
</bean> 
```

如果有人能对这个问题有所了解，我将不胜感激。我不知道是否与迁移问题有关，或者此配置是否存在问题，并且以某种方式被先前版本的 jsf 和richfaces“掩盖”。

我试图把任何相关信息放在这里，我认为这会有所帮助，不会让读者感到无聊和不知所措，但如果这里有什么遗漏，请告诉我。

提前致谢。

# c++ - 匹配向量中的元素

> ID：13225208
> 
> 赞同：0
> 
> 时间：2012-11-05T02:25:59.877
> 
> 标签：c++

我想要做的是匹配允许用户输入例如 ID 并将该 ID 与某个矢量匹配并打印它。这是我的班级的样子。（我正在尝试做一个库存计划）。

```
class Item{
private:
  string month;
  string name;
  int ID;
  int actual_qunatity;

public:
  void print()const;
  void report();
  void getdata();
  void setname (string itemname){name=itemname;}
  void setID(int setID){ID=setID;}
};
class Inventory{
public:
  void print2()const;
  void report();
  void getdata();
  void sale();
private:
      vector<Item>items;
}; 
```

将元素添加到向量后，我想在向量中找到一些元素并打印它。这是

```
void Inventory::sale(){                                                                                                                                                               
  int ID;
  cout<<"Enter ID ";
  cin>>ID;
  vector<Item>::const_iterator it;
  it=find(items.begin(), items.end(), ID);
  ++it;
} 
```

但我得到一个错误：没有匹配函数调用'find(std::vector::iterator, std::vector::iterator, int&)'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T02:40:17.250

使用[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)和 lambda 来执行搜索。

```
int ID;
cout << "Enter ID ";
cin >> ID;
auto it = find_if(items.begin(), items.end(), [&]( Item const& item ) {
                   return item.getID() == ID; // need to be able to access ID 
                                            // publicly
                  } );

if( it != items.end() ) {
  // it points to item with matching ID
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T02:30:50.200

是的，这是因为你有一个`Item`对象向量并且你告诉它寻找一个整数。您需要更改设计或简单地使用 for 循环并手动检查每个对象，如下所示：

```
std::vector<Item>::const_iterator it;
for(it = items.begin(); it != items.end(); it++) {
    if (it->ID == ID) {
        // this is your element
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T02:31:00.097

要在 a 中查找特定项目，`vector<T>`您不能让代码猜测您要检查该`ID`字段。首先，您需要编写一个自定义比较运算符：

```
bool operator== ( const Item &n1, const Item &n2) {
  return n1.ID == n2.ID;
} 
```

然后你应该使用一个虚拟项目（及其构造函数）来搜索指定的项目：

```
std::find(items.begin(), items.end(), Item(ID)); 
```

您还可以迭代向量并查找指定的 ID。或者更好的是，如果您不需要随机访问向量，请使用 a`map<int, Item>`或 an 。`unordered_map`

# iphone - 在干净的目录中构建 LIVE555 RTSP 库

> ID：13225212
> 
> 赞同：2
> 
> 时间：2012-11-05T02:26:44.933
> 
> 标签：iphone, ios6, live555

您好我想知道如何在新目录中构建 LIVE555 库。我目前的方法涉及手动删除 .o 和配置文件，我认为这不是非常有效或聪明。

目前我的工作流程是：

```
./genMakeFiles iphoneos
make 
```

但是它将所有内容都构建在同一个目录中并且非常混乱，有人可以对我可以在配置中更改的属性有所了解，该属性将在干净的目录中构建二进制文件和头文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T09:00:34.000

如果您希望仅包含库和包含的“干净”输出，则必须修改构建脚本。我不太擅长编写脚本，但无论如何 - 你可以参考[这篇文章](https://stackoverflow.com/questions/29492031/building-live555-library-for-iphoneos)并下载已经构建的包含包含的库（最后一条评论中的 zip 链接）。这些库是，`fat`因此它们包含`i386`、`x86_64`、`armv7`和。`armv7s``arm64`

要将所有内容添加到 Xcode 项目中，您必须指定`OTHER_LDFLAGS`：

```
"$(SRCROOT)/<path to live555>/UsageEnvironment/libUsageEnvironment.a"
"$(SRCROOT)/<path to live555>/liveMedia/libliveMedia.a"
"$(SRCROOT)/<path to live555>/groupsock/libgroupsock.a"
"$(SRCROOT)/<path to live555>/BasicUsageEnvironment/libBasicUsageEnvironment.a" 
```

和`HEADER_SEARCH_PATH`：

```
"$(SRCROOT)/<path to live555>/UsageEnvironment/include"
"$(SRCROOT)/<path to live555>/liveMedia/include"
"$(SRCROOT)/<path to live555>/groupsock/include"
"$(SRCROOT)/<path to live555>/BasicUsageEnvironment/include" 
```

仅此而已。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-03T13:40:40.793

您可以选择安装包含、库和可执行文件的位置，设置 PREFIX 变量（如配置的 -prefix 选项），如下所示：

```
make install PREFIX=<install root> 
```

要删除 *.o、*.a 和可执行文件，只需使用：

```
make clean 
```

# ruby-on-rails - 延迟的作业忘记了已经在队列中等待了几分钟并且没有尝试的作业

> ID：13225213
> 
> 赞同：0
> 
> 时间：2012-11-05T02:26:45.163
> 
> 标签：ruby-on-rails, heroku, mongoid, delayed-job

我正在使用delayed_job创建大量作业，几乎一次全部完成，稍后再完成，如果作业数量太多，在一定时间后，每个作业都会从队列中清除，不管它的状态。

以下 rails 项目说明了这个问题： [https ://github.com/hayksaakian/taskbreaker](https://github.com/hayksaakian/taskbreaker)

要重新创建问题，请创建多个任务（例如 5 到 15 个），每个任务都有大约 100 个目标（来自 Web 界面或控制台）

然后在控制台尝试执行这些任务：Task.attempt_tasks

将会发生以下情况：将创建许多工作，工人做他们的事情几分钟，然后每个工作都从队列中消失。

要验证是否是这种情况，请检查任何任务，您会注意到每个成就可能没有一个等于“10”的任意数字（它应该是 10，因为我们为每个延迟的尝试字符串调用增加 1）。每个成就的任意数组的长度也不为 10（它应该是，因为我们延迟了 10 次对尝试数组的调用）；

我不确定为什么会发生这种情况，因为我没有看到任何错误，但我确信它正在发生。

在 taskbreaker.herokuapp.com 上查看一个糟糕的工作示例

请注意，如果有任何帮助，我将托管在 heroku 上。此外，您需要至少 5 名工作人员在任何合理的时间内重新创建问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:18:55.760

这是由于比赛条件。由于这些方法是同时发生的，因此它们的读取和写入是重叠的，从而导致了意外的输出。

# node.js - 使用 fs.stat 验证文件总是失败

> ID：13225217
> 
> 赞同：0
> 
> 时间：2012-11-05T02:27:28.873
> 
> 标签：node.js, express

我写了一个小函数来验证路径图像：

```
var validateImage = function(image) {
  fs.stat('/images/' + image, function(err, stats) {
    if(stats.isFile()) {
      return true;
    }
  });
}; 
```

它只是检查图像参数是否`"myimage.jpg"`存在于我的 public/images 目录下。

我可以在以下位置访问图像：

```
http://127.0.0.1:3000/images/myimage.jpg 
```

但是`validateImage("myimage.jpg")`总是返回 false。

图像目录`/public`位于我的 app.js 中定义的目录下：

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:30:23.000

`'/images/'`是一个绝对路径，它不会检查您的 public/images 目录。

您可以使用`__dirname`.

你的目录结构是这样的，看起来

```
root
  public
    images
  app.js 
```

你可以这样做：

```
fs.stat(__dirname + '/public/images/' + image, ... 
```

# ruby - 红宝石暂停线程

> ID：13225221
> 
> 赞同：5
> 
> 时间：2012-11-05T02:27:53.007
> 
> 标签：ruby, multithreading, thread-safety

在 ruby​​ 中，是否有可能导致线程从另一个同时运行的线程暂停。

以下是我到目前为止编写的代码。我希望用户能够键入“暂停线程”并暂停 sample500 线程。

```
#!/usr/bin/env ruby

# Creates a new thread executes the block every intervalSec for durationSec.
def DoEvery(thread, intervalSec, durationSec)
    thread = Thread.new do
        start = Time.now

        timeTakenToComplete = 0
        loopCounter = 0
        while(timeTakenToComplete < durationSec && loopCounter += 1)

            yield

            finish = Time.now

            timeTakenToComplete = finish - start

            sleep(intervalSec*loopCounter - timeTakenToComplete)    
        end
    end
end

# User input loop.
exit = nil
while(!exit)
    userInput = gets
    case userInput
    when "start thread\n"
        sample500 = Thread
        beginTime = Time.now
        DoEvery(sample500, 0.5, 30) {File.open('abc', 'a') {|file| file.write("a\n")}}
    when "pause thread\n"
        sample500.stop
    when "resume thread"
        sample500.run
    when "exit\n"
        exit = TRUE
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:25:59.570

Passing Thread object as argument to `DoEvery` function makes no sense because you immediately overwrite it with Thread.new, check out this modified version:

```
def DoEvery(intervalSec, durationSec)
    thread = Thread.new do
        start = Time.now
        Thread.current["stop"] = false

        timeTakenToComplete = 0
        loopCounter = 0
        while(timeTakenToComplete < durationSec && loopCounter += 1)
            if Thread.current["stop"]
              Thread.current["stop"] = false
              puts "paused"
              Thread.stop
            end

            yield

            finish = Time.now

            timeTakenToComplete = finish - start

            sleep(intervalSec*loopCounter - timeTakenToComplete)

        end
    end
    thread
end

# User input loop.
exit = nil
while(!exit)
    userInput = gets
    case userInput
    when "start thread\n"
        sample500 = DoEvery(0.5, 30) {File.open('abc', 'a') {|file| file.write("a\n")} }
    when "pause thread\n"
        sample500["stop"] = true
    when "resume thread\n"
        sample500.run
    when "exit\n"
        exit = TRUE
    end
end 
```

Here `DoEvery` returns new thread object. Also note that Thread.stop called inside running thread, you can't directly stop one thread from another because it is not safe.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:08:01.277

您可能能够更好地使用[Ruby Fiber](http://www.ruby-doc.org/core-1.9.3/Fiber.html)对象来完成您正在尝试的事情，并可能在正在运行的系统上实现更高的效率。

> Fiber 是在 Ruby 中实现轻量级协作并发的原语。基本上，它们是一种创建可以暂停和恢复的代码块的方法，就像线程一样。主要区别在于它们永远不会被抢占，并且调度必须由程序员而不是 VM 来完成。

请记住，MRI Ruby 的当前实现不提供*任何*并发运行的线程，您能够完成的最好的工作是[*绿色线程*](http://en.wikipedia.org/wiki/Green_threads)程序，以下是一个很好的示例：

```
require "fiber"

f1 = Fiber.new { |f2| f2.resume Fiber.current; while true; puts "A"; f2.transfer; end }
f2 = Fiber.new { |f1| f1.transfer; while true; puts "B"; f1.transfer; end }

f1.resume f2 # =>
  # A
  # B 
  # A
  # B
  # .
  # .
  # . 
```

# javascript - 使用 Canvas dataURL 的问题

> ID：13225224
> 
> 赞同：1
> 
> 时间：2012-11-05T02:28:16.890
> 
> 标签：javascript, html, canvas

我正在尝试制作一个按钮，该按钮将打开一个新窗口，其中包含我的画布内容（画布的渲染图像）。

这是我的 JS 代码：

```
var canvas  = document.getElementById("thecanvas");
var dataUrl = canvas.toDataURL();
var context = canvas.getContext("2d");
context.fillStyle = "rgba(0, 0, 255, .5)";
context.fillRect(25, 25, 125, 125);
function clickme() {
window.open(dataUrl, "toDataURL() image", "width=200, height=500");
}​ 
```

HTML 代码：

```
<input type="button" onclick="clickme()" value="OPEN"/>

<canvas id="thecanvas" height="200" width="500" style="border:1px solid black"> 
```

但是当我点击“打开”按钮时，什么也没有发生……但我真的不明白为什么。我在很多网站上查看了教程。我什至复制并粘贴了一些代码，但仍然没有任何反应。难道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:01:25.327

首先，执行语句的顺序很重要。您需要`toDataURL`在绘制到画布后调用，或者生成的 dataURL 不包含该内容。

我不确定你的脚本标签是什么样的，但这里有一个工作示例，它以更简单的方式执行事件：http: [//jsfiddle.net/b7G6J/](http://jsfiddle.net/b7G6J/)

HTML：

```
<input id="thebutton" type="button" value="OPEN"/>

<canvas id="thecanvas" height="200" width="500" style="border:1px solid black"> 
```

JS：

```
var canvas  = document.getElementById("thecanvas");
var context = canvas.getContext("2d");

// First drawing commands
context.fillStyle = "rgba(0, 0, 255, .5)";
context.fillRect(25, 25, 125, 125);
// Then toDataURL
var dataUrl = canvas.toDataURL();

var button = document.getElementById("thebutton");
button.onclick =function() {
  window.open(dataUrl, "toDataURL() image", "width=200, height=500");
} 
```

​</p>

# ruby-on-rails - 在 Chrome 扩展程序中从服务器接收文件

> ID：13225232
> 
> 赞同：1
> 
> 时间：2012-11-05T02:30:16.167
> 
> 标签：ruby-on-rails, google-chrome, google-chrome-extension

我想连接我的 Chrome 扩展程序，以便能够从我的 Ruby on Rails 服务器下载文件。特别是当用户点击扩展上的按钮时，扩展应该向服务器发送一个 AJAX 请求，然后服务器应该向`file.zip`用户发送一个文件。

服务器如何将文件发送回用户的扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:53:43.500

在 Rails 端，确保返回的`Content-Type`标头是`application/zip`. 您可以使用`#send_file`或`#send_data`向客户端发送 zip 文件。请参阅[ActionController::DataStreaming](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html)

采用`#send_file`

```
send_file '/path/to.zip', :type => 'application/zip' 
```

或使用`#send_data`

```
zip_data = generate_zip_data()
send_data zip_data, :type => 'application/zip', :filename => 'data.zip' 
```

要生成动态 zip 文件，请参阅其他主题：

*   [如何在不使用 Ruby 保存到磁盘的情况下生成 zip 文件？](https://stackoverflow.com/questions/2405921/how-can-i-generate-zip-file-without-saving-to-the-disk-with-ruby)

在 google chrome 扩展上，您可能希望使用 zip 文件 url 创建新选项卡。这会导致浏览器下载文件。

```
function buttonClickHandler() {
    chrome.tabs.create({ url: "the url to zip file"}, function() {});
} 
```

# ruby-on-rails - 在 ruby 中，如何为任意时区中的任意未来时间创建 UTC 时间，并考虑 DST（如果适用）？

> ID：13225235
> 
> 赞同：2
> 
> 时间：2012-11-05T02:30:30.800
> 
> 标签：ruby-on-rails, timezone

在调度方法中，我需要取一个（local_date、local_time 和 local_time_zone），并返回相应的 UTC 时间，以*说明*夏令时是否在*该*日期生效。

我不想更改 Time.zone ，因为虽然线程安全，但它具有跨多个请求持续存在的完全出乎意料的结果 - 一件坏事。

以下（0800 太平洋时间）不起作用，因为它们在 UTC（16:00）中返回相同的时间，即使第一天（10 月 1 日）是夏令时，第二天（12 月 1 日）不是夏令时时间，所以UTC应该不同

```
Time.new(2012, 10, 1, 8, 0, 0, ActiveSupport::TimeZone['Pacific Time (US & Canada)'].utc_offset).utc
# 2012-10-01 16:00:00 UTC <<<< should be 15:00

Time.new(2012, 12, 1, 8, 0, 0, ActiveSupport::TimeZone['Pacific Time (US & Canada)'].utc_offset).utc
# 2012-12-01 16:00:00 UTC 
```

我曾希望 .utc 方法会考虑夏令时是否有效，但事实并非如此。

我不确定是否应该使用 Time 对象、DateTime 对象和 TimeWith Zone 等。

===

注意：有一种方法可以使用 Chronic gem（如下）。但我想使用内置的 Ruby 日期和时间方法来获得相同的（例如，正确的）结果：

```
Chronic.time_class =ActiveSupport::TimeZone["Pacific Time (US & Canada)"]
Chronic.parse("10/1/2012 0800").utc
# 2012-10-01 15:00:00 UTC 
Chronic.parse("12/1/2012 0800").utc
# 2012-12-01 16:00:00 UTC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:16:14.553

在另一个 SO 线程上找到它：诀窍是将时间（和区域）放入 Time.parse 可用的格式：

```
Time.parse("2012-10-1 8:00:00 Pacific Time (US & Canada)").utc
# 2012-10-01 15:00:00 UTC 

Time.parse("2012-12-1 8:00:00 Pacific Time (US & Canada)").utc
# 2012-12-01 16:00:00 UTC 
```

另一种方法（可能更好）：

```
ActiveSupport::TimeZone["Pacific Time (US & Canada)"].parse("2012-12-1 8am").utc 
```

在玩了一些之后，看起来我们对更改 Time.zone 只是为了在某个区域创建时间保持警惕是正确的——设置 Time.zone 可以“坚持”多个请求（在同一个线程中）。因此，如果您为 Rails 应用程序打开了两个不同的窗口，并且正在查看两个不同的帐户，则在一个窗口中为该帐户设置 Time.zone 实际上可以更改另一个帐户在另一个窗口中的 Time.zone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:01:40.483

我最近经历了类似的事情，发现 Time.zone.local 考虑到夏令时可以正常工作。我不确定美国的夏令时，但澳大利亚的夏令时将于 2013 年 10 月 6 日开始。

以下代码对我来说似乎工作正常：

```
1.9.3-p194 :009 > Time.zone = 'Sydney'
 => "Sydney" 
1.9.3-p194 :010 > Time.zone.local(2013, 10, 1, 0, 0, 0).utc
 => 2013-09-30 14:00:00 UTC 
1.9.3-p194 :011 > Time.zone.local(2013, 10, 10, 0, 0, 0).utc
 => 2013-10-09 13:00:00 UTC 
```

您确定您的日期/时区正确吗？根据此页面，太平洋时间似乎在 11 月经历夏令时： [http ://www.timeanddate.com/worldclock/timezone.html?n=137](http://www.timeanddate.com/worldclock/timezone.html?n=137)

# java - OpenGL 纹理拉伸

> ID：13225240
> 
> 赞同：1
> 
> 时间：2012-11-05T02:31:02.593
> 
> 标签：java, opengl, textures

我正在尝试将纹理附加到立方体。目前，纹理正在拉伸。

我知道这是我的纹理坐标的问题，但我不知道是什么。

对于所有顶点位置（`x,y,z`），我制作了纹理坐标（`x,y`）。

```
float [] texCoords = new float [2*allPoints.size()];
int index= 0;
for(int i = 0; index< allPoints.size()-1; i=i+2){
           texCoords[i] = (float)allPoints.get(index).getX();
           texCoords[i+1] = (float)allPoints.get(index).getY();
           index++;
} 
```

**glTex 参数：**

```
gl2.glTexParameteri( GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MIN_FILTER,GL.GL_NEAREST);
gl2.glTexParameteri( GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MAG_FILTER,GL.GL_NEAREST);
gl2.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_WRAP_S,GL.GL_REPEAT);
gl2.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_WRAP_T,GL.GL_REPEAT); 
```

**电流输出：**

![在此处输入图像描述](../Images/20506d6657996c65115a6b121754333f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:43:08.497

Texture coordinates in OpenGL are scaled 0-1, if you go past that boundary, according to your parameter of `GL_REPEAT` for `GL_TEXTURE_WRAP_S` and `GL_TEXTURE_WRAP_T`.

I don't know about the organization of your `allPoints` list, but for a cube, you're going to have multiple unique texture coordinates per vertex, so you're going to need to duplicate your vertices. If you draw it out by hand or think about it, a texture coordinate of `1` on a vertex also has to be `0` for an adjacent face.

Each face should have the following texture coordinates:

```
(0, 1)--(1, 1)
|            |
|            |
|            |
(0, 0)--(1, 0) 
```

Now think about the faces on a cube, the `(1, 1)` point is the `(0, 1)` point of the adjacent face. Duplicate your vertices to fix that issue.

# qt4 - QTreeView 中不可点击的项目？

> ID：13225243
> 
> 赞同：0
> 
> 时间：2012-11-05T02:31:57.333
> 
> 标签：qt4

我现在使用`QListWidget`with a`QStackedWidget`进行用户偏好配置

我想添加一个“ `non-clickable`”项目，而不是编辑触发器，

我的意思是像一个指示器标签（下面的`QLabel`加号`QLine`小部件），但不允许用户点击它。

IE

```
---------------------------
| The Main Category Label |
---------------------------
| Clickable QStandardItem |
| Clickable QStandardItem |
| Clickable QStandardItem |
---------------------------
| The Secondary Category  |
---------------------------
| Clickable QStandardItem |
| Clickable QStandardItem |
| Clickable QStandardItem |
--------------------------- 
```

可能吗？

我只看到一个`addItem`功能，似乎不适用于这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:42:21.990

如果您使用的是 QListWidget，那么您应该添加仅带有`Qt::ItemIsEnabled`标志的 QListWidgetItem

```
QListWidget * wgt = new QListWidget;
QListWidgetItem * selectableItem = new QListWidgetItem("Selectable");
wgt->addItem(selectableItem);
QListWidgetItem * notSelectable = new QListWidgetItem("Not selectable");
notSelectable->setFlags(Qt::ItemIsEnabled);
wgt->addItem(notSelectable);
wgt->show(); 
```

要在项目上设置小部件：

```
QListWidget * wgt = new QListWidget;
QListWidgetItem * selectableItem = new QListWidgetItem("Selectable");
wgt->addItem(selectableItem);
wgt->setItemWidget(new QLineEdit());
QListWidgetItem * notSelectable = new QListWidgetItem("Not selectable");
notSelectable->setFlags(Qt::ItemIsEnabled);
wgt->addItem(notSelectable);
wgt->show(); 
```

# c# - 打印窗口窗体的两个面板内容的好策略是什么？

> ID：13225244
> 
> 赞同：1
> 
> 时间：2012-11-05T02:32:06.710
> 
> 标签：c#, winforms, printing

我编写了一个 C# 4.0 Windows 窗体应用程序，它创建了两个面板，这两个面板都专门填充了文本标签。我想向我的应用程序添加功能，以完全按照它们在表单上的显示方式打印这些面板，但我只想打印这些面板及其内容，没有背景或表单的其他部分。

[此链接](http://msdn.microsoft.com/en-us/library/6he9hz8c.aspx)作为概述特别有用，但到目前为止，我只能打印相当于表单屏幕截图的内容。包括整个表单，按钮，修剪，背景等等。看起来我需要通过创建一个图形对象来“重建”表单（我一般使用这个术语，因为我不确定我需要使用哪个特定的图形相关类）并以某种方式将面板的内容转移到这个目的。

我的问题是：为了构建这个图形对象，我应该研究哪些类和/或方法？了解也很有帮助：在构建 PrintDocument 对象时，.NET 框架或任何库中是否有任何方便的技巧可以自动将结果适合单个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:54:44.157

好的，我找到了一种方法（喜欢我的 Perl 兄弟）：

将两个面板包装在另一个父面板中。我们称这个面板为“ `parentPanel`。” 创建一个`memoryBitmap`大小为`parentPanel`( ) 的位图 ( `parentPanel.Size`)。

下一个`parentPanel.DrawToBitmap(memoryBitmap, new Rectangle(parentPanel.Location, parentPanel.Size`：）

然后，在打印页面事件处理程序中：`e.Graphics.DrawImage(memoryBitmap, 0, 0)`

如果其他人有更好的想法，我会保持开放状态。

# import - require.js 同步加载

> ID：13225245
> 
> 赞同：23
> 
> 时间：2012-11-05T02:32:14.790
> 
> 标签：import, module, requirejs, synchronous

我想定义一个模块来计算新的依赖关系，获取它然后返回结果。像这样：

```
define(['defaults', 'get_config_name'], function(defaults, get_config_name) {
    var name = get_config_name();
    var config;
    require.synchronous([configs / '+name'], function(a) {
        config = defaults.extend(a);
    });
    return config;
}); 
```

有没有办法做到这一点或更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T17:51:51.017

*   您可以尝试使用[同步 RequireJS 调用](https://github.com/amdjs/amdjs-api/wiki/require) `require('configs/'+get_config_name())`，但只有在模块**已经加载**时才会同步加载，否则会抛出异常。~~同步加载模块/JavaScript 文件在技术上是不可能的。~~ ***UPD：*** *这是可能的（见 Henrique 的回答），但非常不推荐。它会阻止导致整个页面冻结的 JavaScript 执行。所以，RequireJS 不支持它。*

*   从您的用例看来，您不需要同步 RequireJS，您需要**异步返回结果**。 [AMD](http://requirejs.org/docs/whyamd.html)模式允许定义依赖关系并异步加载它们，但模块的工厂函数必须同步返回结果。解决方案可能是使用**加载器插件**（[此处](http://requirejs.org/docs/plugins.html)和[此处](https://github.com/amdjs/amdjs-api/wiki/Loader-Plugins)的详细信息）：

    ```
    // config_loader.js
    define(['defaults', 'get_config_name'], function(defaults, get_config_name) {
        return {
            load: function (resourceId, require, load) {
                var config_name = 'configs/' + get_config_name();
                require([config_name], function(config) {
                    load(defaults.extend(config));
                })
            }
        }
    });

    // application.js
    define(['config_loader!'], function(config) {
        // code using config
    }); 
    ```

*   如果`get_config_name()`包含简单的逻辑并且不依赖于其他模块，则更好更简单的是在飞行[路径配置选项](http://requirejs.org/docs/api.html#config-paths)上进行计算，或者如果您的配置依赖于上下文[映射配置选项](http://requirejs.org/docs/api.html#config-map)。

    ```
    function get_config_name() {
        // do something
    }
    require.config({
        paths: {
            'config': 'configs/' + get_config_name()
        }
    });
    require(['application', 'defaults', 'config'], function(application, defaults, config) {
        config = defaults.extend(config);
        application.start(config);
    }); 
    ```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-18T14:42:55.770

同步加载 JavaScript 在技术上并非不可能。

```
function loadJS(file){  
   var js = $.ajax({ type: "GET", url: file, async: false }).responseText; //No need to append  
}

console.log('Test is loading...');
loadJS('test.js');
console.log('Test was loaded:', window.loadedModule); //loadedModule come from test.js 
```

# iphone - UIBarButtonItem 动作选择器适用于 iPad 但不适用于 iPhone

> ID：13225246
> 
> 赞同：1
> 
> 时间：2012-11-05T02:32:19.417
> 
> 标签：iphone, ios, ipad, uibarbuttonitem

以下代码将 UIBarButtonItem 添加到我的导航控制器。当我单击 iPad 模拟器上的条形按钮时，选择器 buyApp 会被调用，但是相同的选择器 buyApp 不会在 iPhone 模拟器上被调用。

```
UIBarButtonItem *buyButton = [[UIBarButtonItem alloc] init];
buyButton.title = NSLocalizedString(@"BUY", nil);
[buyButton setTarget:self];
[buyButton setAction:@selector(buyApp:)];
self.navigationItem.rightBarButtonItem = buyButton; 
```

更新：我正在将 xib 用于 UI，并将它的 viewcontroller 推送到导航控制器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:19:08.710

好的，我发现了问题所在。代码没有问题。

问题在于测试。我试图验证功能的方式是使用 NSLog 打印一个字符串。但是，在使用模拟器进行测试时，我使用 Hardware -> Device -> iPhone 在模拟器之间切换，我看不到 NSLog 输出。

一旦我明确停止 iPad 模拟器并在 iPhone 模拟器中重新启动应用程序，我就可以获得 NSLog 输出。奇怪的模拟器行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:54:31.110

```
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"BUY" style:UIBarButtonItemStyleBordered target:self action:@selector(buyApp)] autorelease]; 
```

最好尝试这样做以减少代码行

# php - 插入数据库信息时在非对象上调用成员函数 bind_param()

> ID：13225247
> 
> 赞同：0
> 
> 时间：2012-11-05T02:32:23.637
> 
> 标签：php, database, mysqli, fatal-error, var-dump

这是我第一次使用Mysqli，所以在数据库中添加信息时我有点迷茫。这是我的脚本。

```
<?php
include("config.php");

$username = $_POST['username'];
$password = $_POST['password'];
$passcheck = $_POST['password-check'];
$email = $_POST['email'];
$address = $_POST['address'];
$suite = $_POST['apt'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$passcrypt = md5($passcheck);

if($_POST['submit']){
$stmt = $db->prepare("SELECT * FROM `accounts` WHERE `username`= ?");
$stmt->bind_param('s', $username);
$stmt->execute();
if($stmt->num_rows != 0){
$final_report = "That username already exists.";
}
if($password <> $passcheck){
$final_report = "Your passwords do not match";
}
if($final_report == NULL){
$stmt = $db->prepare("INSERT INTO `accounts` (`email`, `username`, `password`, `address`, `city`, `state`, `zip`) VALUES (?, ?, ?, ?, ?, ?, ?)");
if (false === $stmt) {
    var_dump($db->error);
}
$stmt->bind_param('sssssss',$email, $username, $passcrypt, $address, $city, $state, $zip);
$stmt->execute();
}
$stmt->close();
}
?>
<form method="POST" action="">
<?php
if($final_report != NULL){
print"{$final_report}";
}
?>
<table>
<tr>
<td>Username:</td>
<td><input type="text" name="username" /></td>
</tr>
<tr>
<td>Password:</td>
<td><input type="password" name="password" /></td>
</tr>
<tr>
<td>Repeat Password:</td>
<td><input type="password" name="password-check" /></td>
</tr>
<tr>
<td>E-Mail:</td>
<td><input type="text" name="email" /></td>
</tr>
<tr>
<td>Address:</td>
<td><input type="text" name="address" /></td>
</tr>
<tr>
<td>Apt #/Suite:</td>
<td><input type="text" name="apt" /></td>
</tr>
<tr>
<td>City:</td>
<td><input type="text" name="city" /></td>
</tr>
<tr>
<td>State:</td>
<td><input type="text" name="state" /></td>
</tr>
<tr>
<td>Zip Code:</td>
<td><input type="text" name="zip" /></td>
</tr>
<tr>
<td></td>
<td><input type="submit" name="submit" value="Submit" /></td>
</tr>
</table>
</form> 
```

这些是提交页面后我返回的错误。 `Notice: Undefined variable: final_report in C:\xampp\htdocs\gptcode\signup.php on line 25`

`string(0) ""`

`Fatal error: Call to a member function bind_param() on a non-object in C:\xampp\htdocs\gptcode\signup.php on line 30`

我显然并不担心该通知，但`vardump()`它什么也没显示，所以我不确定是什么导致了错误，因为`bind_param()`我有三次检查表和列名。如果这里的代码是正确的，那么我的问题是，如果实际表中有更多的值和列在其中列出，它会产生这样的错误，因为我没有在`prepare`语句中包含所有列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:43:10.387

未定义的 var 不是 NULL 使用`isset($varname)`

如果您使用 PDO，则它的 bindParam 不是 bind_param

如果只使用一次，为什么要首先绑定参数，给一个数组来执行（）：

```
$stmt = $db->prepare("INSERT INTO `accounts` (`email`, `username`, `password`, `address`, `city`, `state`, `zip`) VALUES (:email, :username, :password, :address, :city, :state, :zip)");

$stmt->execute(array(
  ':email' => $mail,
  ':username' => $username,
.... and so on.
)); 
```

# master-pages - 母版页自定义外观

> ID：13225248
> 
> 赞同：1
> 
> 时间：2012-11-05T02:32:45.553
> 
> 标签：master-pages

有谁知道是否可以更改 ASP.NET 母版页上的缩放比例？我在一个不适合内容区域的单独页面上有一个gridview，并认为如果缩小母版页，该页面将适合。

# python - 保留 python 字典顺序 - (python dict 的延续)

> ID：13225254
> 
> 赞同：2
> 
> 时间：2012-11-05T02:33:38.253
> 
> 标签：python, list, dictionary, python-2.7

[在python中列出重复的数据连接](https://stackoverflow.com/questions/13218865/list-duplicate-data-concatenation-in-python/13220621)

这是列表问题的延续，但在这里我想保留字典的顺序

```
listData=[('audioVerify', '091;0'), ('imageVerify', 'icon091.gif'), ('bufferVerify', '\x01?')]
    methodList = {}
for item in listData:
    methodList.setdefault(item[0],[]).append(item[1:])
for method in methodList:
    arguments = methodList[method]
    s = [method,arguments]
    print s 
```

当我迭代列表时，它给出以下

```
 ['audioVerify', [('091;0',)]]
  ['bufferVerify', [('\x01?',)]]
  ['imageVerify', [('icon091.gif',)]] 
```

但是我可以保留以下顺序的可能性是什么：

```
 ['audioVerify', [('091;0',)]]
  ['imageVerify', [('icon091.gif',)]]
  ['bufferVerify', [('\x01?',)]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T02:35:13.440

我有什么医生`ordered`：[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

从[例子](http://docs.python.org/2/library/collections.html#ordereddict-examples-and-recipes)：

```
>>> from collections import OrderedDict
>>> # regular unsorted dictionary
>>> d = {'banana': 3, 'apple':4, 'pear': 1, 'orange': 2}

>>> # dictionary sorted by key
>>> OrderedDict(sorted(d.items(), key=lambda t: t[0]))
OrderedDict([('apple', 4), ('banana', 3), ('orange', 2), ('pear', 1)])

>>> # dictionary sorted by value
>>> OrderedDict(sorted(d.items(), key=lambda t: t[1]))
OrderedDict([('pear', 1), ('orange', 2), ('banana', 3), ('apple', 4)])

>>> # dictionary sorted by length of the key string
>>> OrderedDict(sorted(d.items(), key=lambda t: len(t[0])))
OrderedDict([('pear', 1), ('apple', 4), ('orange', 2), ('banana', 3)]) 
```

如果您有较旧版本的 python，[请查阅其他 SO question](https://stackoverflow.com/a/1617087/489590)。

# ruby-on-rails - 工厂女孩多态 has_many, belongs_to

> ID：13225255
> 
> 赞同：1
> 
> 时间：2012-11-05T02:33:42.617
> 
> 标签：ruby-on-rails, testing, factory-bot

```
class Food < ActiveRecord::Base
has_many :images, as: :imageable, foreign_key: :imageable_uuid, dependent: :destroy
end

class MenuPhoto < ActiveRecord::Base
has_one :image, as: :imageable, foreign_key: :imageable_uuid, dependent: :destroy
end

class Image < ActiveRecord::Base
belongs_to :imageable, foreign_key: :imageable_uuid, :polymorphic => true
end 
```

我上面的这些模型使用多态。所以在我的工厂女孩​​中，我这样做。

```
factory :food do
association :images, factory: :image
end

factory :menu_photo do
association :image, factory: :image
end

factory :image do
    photo { fixture_file_upload(Rails.root.join("spec", "fixtures", "pass.jpg"), "image/jpg") }
  end 
```

当我使用“FactoryGirl.create(:menu_photo)”在 Rails 控制台测试环境中进行测试时，它工作正常。它同时创建:menu_photo 和:image。但是当我用“FactoryGirl.create(:food)”运行它时，它会出错：NoMethodError: undefined method `each' for #

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:57:54.127

我认为问题在于您正在尝试为 has_many 关联设置单个图像。如果你做这样的事情怎么办：

```
 factory :food do

    after(:create) { |f| 
       f.images.create!()
    }

 end 
```

# asp.net-mvc-4 - 在 IIS8 下部署 MVC 4 应用程序：HTTP 错误 404.0 - 未找到

> ID：13225256
> 
> 赞同：2
> 
> 时间：2012-11-05T02:33:50.180
> 
> 标签：asp.net-mvc-4, iis-8, windows-server-2012

我正在使用 IIS8 运行 Windows Server 2012。

我只是尝试使用 Visual Studio 2012 添加新创建的 MVC4 应用程序作为 IIS 8 中的虚拟目录，然后将其转换为应用程序。首先我得到这个错误：

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid.

Detailed Error Information:
Module          IIS Web Core
Notification    BeginRequest
Handler         Not yet determined
Error Code      0x80070005
Config Error    Cannot read configuration file due to insufficient permissions
Config File     \\?\C:\Users\Administrator\Documents\Visual Studio 2012\Projects\MvcApplication2\MvcApplication2\web.config
Requested URL   http://localhost:80/mvc
Physical Path   C:\Users\Administrator\Documents\Visual Studio 2012\Projects\MvcApplication2\MvcApplication2
Logon Method    Not yet determined
Logon User      Not yet determined 
```

我搜索了解决方案，发现我必须授予对 IIS_IUSRS 应用程序文件夹的读取权限

我做的 ！然后我现在有这个错误：

```
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable.

Detailed Error Information:
Module              IIS Web Core
Notification        MapRequestHandler
Handler             StaticFile
Error Code          0x80070002
Requested URL       http://localhost:80/mvc/Account/Login?ReturnUrl=%2fmvc
Physical Path       C:\Users\Administrator\Documents\Visual Studio 2012\Projects\MvcApplication2\MvcApplication2\Account\Login
Logon Method        Anonymous
Logon User          Anonymous 
```

怎么了 ？？

谢谢 ！

# cloud - openstack 中的存储组件

> ID：13225259
> 
> 赞同：1
> 
> 时间：2012-11-05T02:34:09.097
> 
> 标签：cloud, storage, openstack

我是 openstack 的新手，我对 openstack 中的存储有一些疑问：`Glance`存储图像及其元数据，`Swift`存储实际的虚拟磁盘文件，以数据持久性为目标。但是`nova-volume`（或块存储）是干什么用的？究竟什么是**音量**？

而这些组件和真正的文件系统有什么区别呢？什么是**虚拟磁盘**，它们真的存储在真实的文件磁盘中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T03:12:12.367

您对存储组件有些困惑。

Glance 是一个镜像*注册表*。它的主要工作是存储有关实例图像（内核、根磁盘图像等）的元数据。它也可以存储这些图像，但存储是可配置的——它可以是本地磁盘或 swift。

Swift 是一个*对象存储*。它将对象存储在桶中。如果有帮助，您可以将存储桶视为目录，将对象视为文件。

nova-volume（现在被 Cinder 取代）是一个*块存储*。它存储文件系统，并可用于实例上的磁盘映像。

虚拟磁盘是由 openstack 管理的虚拟机使用的磁盘（在 openstack 中称为实例）。它们存储为计算节点文件系统上的文件或块存储，具体取决于配置。

# c# - 在实体框架中保存新记录

> ID：13225266
> 
> 赞同：4
> 
> 时间：2012-11-05T02:35:20.373
> 
> 标签：c#, entity-framework

我有一个关于使用实体框架将新记录保存到数据库的小问题。

这里的代码：

```
using (_context)
                {
                    _context.AddToStudent(newStudent);
                    _context.AddToStudentInfo(newStudentInfo);
                    _context.SaveChanges();                   
                    return true;
                } 
```

我的问题是：如果 1 of 2 _context.AddTo 失败，那么 SaveChanges 将被终止，或者它将保存一个成功？？？我很感激任何答案:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T02:54:48.377

SaveChanges() 将在数据库上执行所有未执行的操作，或者不执行任何操作（例如，如果出现错误）。因此，在这种情况下，如果 newStudentInfo 对象中存在错误（例如未设置所需属性），则 newStudentInfo 或 newStudent 都不会保存到数据库中。

# perl - Perl - 从配置文件中读取多行记录

> ID：13225270
> 
> 赞同：1
> 
> 时间：2012-11-05T02:36:26.380
> 
> 标签：perl

我正在尝试将带有记录的多行配置文件读入 perl 哈希数组

示例配置文件：

```
 record_1
      phone=5551212
      data=1234234
    end_record_1

    record_2
      people_1=bob
      people_2=jim
      data=1234
    end_record_2

    record_3
     people_1=sue
    end_record_3 
```

这就是我要找的东西：

```
$myData{1}{"phone"}  <--- 5551212
$myData{1}{"data"}   <--- 1234234

$myData{2}{"people_1"} <--- bob
... etc 
```

读这个的最好方法是什么？模块？多行匹配的正则表达式？蛮力？我不知道下一步要去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T02:47:03.807

这是您的数据集的一个选项：

```
use strict;
use warnings;
use Data::Dumper;

my %hash;
{
    local $/ = '';
    while (<DATA>) {
        my ($rec) = /record_(\d+)/;
        $hash{$rec}{$1} = $2 while /(\S+)=(.+)/g;
    }
}

print Dumper \%hash;

__DATA__
record_1
    phone=5551212
    data=1234234
end_record_1

record_2
    people_1=bob
    people_2=jim
    data=1234
end_record_2

record_3
    people_1=sue
end_record_3 
```

输出：

```
$VAR1 = {
          '1' => {
                   'data' => '1234234',
                   'phone' => '5551212'
                 },
          '3' => {
                   'people_1' => 'sue'
                 },
          '2' => {
                   'people_1' => 'bob',
                   'data' => '1234',
                   'people_2' => 'jim'
                 }
        }; 
```

设置`local $/ = ''`会导致空行被视为数据集中的“记录分隔符”，因此我们可以在这些记录上使用正则表达式来获取哈希键/值的信息。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:33:04.477

为此有许多模块，所以最好的做法是（像往常一样）使用它们而不是重新发明轮子。

从您发布的配置文件的片段来看，它看起来`Config::Simple`可能是最佳选择。如果您可以简化配置格式，那么`Config::Tiny`将更容易使用。如果事情变得更复杂，那么您可能必须使用`Config::General`.

[http://metacpan.org/pod/Config::Tiny](http://metacpan.org/pod/Config::Tiny)

[http://metacpan.org/pod/Config::Simple](http://metacpan.org/pod/Config::Simple)

[http://metacpan.org/pod/Config::General](http://metacpan.org/pod/Config::General)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:44:54.427

一次读一行。

当您看到一条新记录时，添加一个新的空关联数组`myData`并获取对它的引用 - 这将是您的“当前记录”。

现在，当您在一行上看到键/值对时，您可以将其添加到当前记录数组中（如果有的话）

当您看到一条记录的结尾时，您只需清除对当前记录的引用。

# json - 无论内容类型如何，强制 WCF Rest 客户端使用 Json 反序列化器

> ID：13225272
> 
> 赞同：1
> 
> 时间：2012-11-05T02:36:40.203
> 
> 标签：json, wcf, rest

无论内容类型如何，如何强制 WCF Rest 客户端使用 Json 反序列化器？

我正在通过 WCF 调用基于 REST 的 Web 服务。

该服务返回 JSON 正文，但具有内容类型“Application/xml”。WCF 框架现在给了我 XmlException。

```
public class MessageFormatter : IClientMessageFormatter
{
    private readonly IClientMessageFormatter _formatter;

    public MessageFormatter(IClientMessageFormatter formatter)
    {
        _formatter = formatter;
    }

    public object DeserializeReply(System.ServiceModel.Channels.Message message, object[] parameters)
    {
        return _formatter.DeserializeReply(message, parameters);
    }
} 
```

_formatter.DeserializeReply 正在抛出 XmlException。我在任何地方都找不到任何示例来强制对回复进行 json 反序列化。

编辑-鼠标悬停时的“消息”对象抛出“{...错误读取正文：System.Xml.XmlException：根级别的数据无效。第1行，位置1....}”

我的另一个项目中与不同的 REST 服务（Picasa Web 服务）通信的同一个对象有一个看起来像 JSON 对象的 xml 序列化版本的东西？所以这个问题似乎更进一步。我需要找到这个对象的来源。我会玩 MessageEncoder 类。

编辑 - （添加更多信息）

```
public class MyBinding : WebHttpBinding
{
    public MyBinding(WebHttpSecurityMode mode)
        : base(mode)
    {

    }

    public override BindingElementCollection CreateBindingElements()
    {
        var result = base.CreateBindingElements();

        var replacements = result.OfType<MessageEncodingBindingElement>().ToList();
        foreach (var messageEncodingBindingElement in replacements)
        {
            var index = result.IndexOf(messageEncodingBindingElement);
            result.Remove(messageEncodingBindingElement);
            result.Insert(index, new MyMessageEncodingBindingElement(messageEncodingBindingElement));
        }

        return result;
    }
}

public class MyMessageEncodingBindingElement : MessageEncodingBindingElement
{
    private readonly MessageEncodingBindingElement _element;

    public MyMessageEncodingBindingElement(MessageEncodingBindingElement element)
    {
        _element = element;
    }

    public override BindingElement Clone()
    {
        var result = _element.Clone();

        if (result is MessageEncodingBindingElement)
            return new MyMessageEncodingBindingElement(result as MessageEncodingBindingElement);

        return result;
    }

    public override MessageEncoderFactory CreateMessageEncoderFactory()
    {
        return new MyMessageEncoderFactory(_element.CreateMessageEncoderFactory());
    }
} 
```

即使在设置断点时命中构造函数和 Clone 方法，也永远不会调用 CreateMessageEncoderFactory() 方法。有什么帮助吗？我正在尝试设置自定义 MessageEncoder 和 MessageEncoderFactory 类来修改 Message 对象的实例化过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:15:05.233

你可以使用 a `WebContentTypeMapper`。这是 的一个属性`WebHttpBinding`，您可以自定义编码器如何从该绑定中完成反序列化，包括强制它始终使用 JSON 反序列化器，而不管传入消息的 Content-Type。下面的代码显示了如何做到这一点。

```
public class StackOverflow_13225272
{
    [DataContract]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }

        public override string ToString()
        {
            return string.Format("Person[Name={0},Age={1}]", Name, Age);
        }
    }
    [ServiceContract]
    public interface ITest
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        Person GetPerson(string responseContentType);
    }

    public class Service : ITest
    {
        public Person GetPerson(string responseContentType)
        {
            WebOperationContext.Current.OutgoingResponse.ContentType = responseContentType;
            return new Person { Name = "John Doe", Age = 29 };
        }
    }
    class AllJsonContentTypeMapper : WebContentTypeMapper
    {
        public override WebContentFormat GetMessageFormatForContentType(string contentType)
        {
            return WebContentFormat.Json;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

#if USE_NETFX4
        // This works on .NET 4.0 and beyond
        WebHttpBinding binding = new WebHttpBinding();
        binding.ContentTypeMapper = new AllJsonContentTypeMapper();
#else
        // This works on .NET 3.5
        CustomBinding binding = new CustomBinding(new WebHttpBinding());
        binding.Elements.Find<WebMessageEncodingBindingElement>().ContentTypeMapper = new AllJsonContentTypeMapper();
        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(binding, new EndpointAddress(baseAddress));
#endif

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(binding, new EndpointAddress(baseAddress));
        factory.Endpoint.Behaviors.Add(new WebHttpBehavior());
        ITest proxy = factory.CreateChannel();

        Console.WriteLine("With JSON: {0}", proxy.GetPerson("application/json"));
        Console.WriteLine("With XML: {0}", proxy.GetPerson("application/xml"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:52:44.660

这可能会奏效。

```
public class ForceJsonClientMessageFormatter : IClientMessageFormatter
{
    private readonly DataContractJsonSerializer _jsonSerializer;

    public ForceJsonClientMessageFormatter(Type responseType)
    {
        _jsonSerializer = new DataContractJsonSerializer(responseType);
    }

    public Message SerializeRequest(MessageVersion messageVersion, object[] parameters)
    {
        throw new NotImplementedException("This client message formatter is for replies only!");
    }

    public object DeserializeReply(Message message, object[] parameters)
    {
        string messageBody = message.GetBody<string>();

        using (MemoryStream messageStream = new MemoryStream(Encoding.UTF8.GetBytes(messageBody)))
        {
            messageStream.Seek(0, SeekOrigin.Begin);
            object deserializedObject = _jsonSerializer.ReadObject(messageStream);
            return deserializedObject;
        }
    }
}

public class ForceJsonWebHttpBehavior : WebHttpBehavior
{
    protected override IClientMessageFormatter GetReplyClientFormatter(OperationDescription operationDescription, ServiceEndpoint endpoint)
    {
        return new ForceJsonClientMessageFormatter(operationDescription.Messages[1].Body.ReturnValue.Type);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:23:40.727

我还没有尝试过，但我认为这会奏效。您可以创建一个自定义[IClientMessageFormatter](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageformatter.aspx)，它将消息格式覆盖为 Json，将其包装在一个行为中，然后将该行为应用于您的客户端端点配置。

```
public class ForceJsonClientMessageFormatterDecorator : IClientMessageFormatter
{
    private readonly IClientMessageFormatter _decoratedFormatter;
    public ForceJsonClientMessageFormatterDecorator(IClientMessageFormatter decoratedFormatter)
    {
        _decoratedFormatter = decoratedFormatter;
    }

    public object DeserializeReply(Message message, object[] parameters)
    {
        message.Properties[WebBodyFormatMessageProperty.Name] = new WebBodyFormatMessageProperty(WebContentFormat.Json);
        return _decoratedFormatter.DeserializeReply(message, parameters);
    }

    public Message SerializeRequest(MessageVersion messageVersion, object[] parameters)
    {
        return _decoratedFormatter.SerializeRequest(messageVersion, parameters);
    }
}

public class ForceJsonWebHttpBehavior : WebHttpBehavior
{
    protected override IClientMessageFormatter GetReplyClientFormatter(OperationDescription operationDescription, ServiceEndpoint endpoint)
    {
        IClientMessageFormatter decoratedFormatter = base.GetReplyClientFormatter(operationDescription, endpoint);
        return new ForceJsonClientMessageFormatterDecorator(decoratedFormatter);
    }
} 
```

# javascript - 用 Mocha 进行 Javascript 测试中 assert.equal 和 assert.deepEqual 的区别？

> ID：13225274
> 
> 赞同：102
> 
> 时间：2012-11-05T02:37:14.687
> 
> 标签：javascript, arrays, testing, mocha.js

我正在使用 Mocha 在我的 Express.js 应用程序中测试一个小模块。在这个模块中，我的一个函数返回一个数组。我想测试给定输入的数组是否正确。我这样做是这样的：

```
suite('getWords', function(){
    test("getWords should return list of numbers", function() {
        var result = ['555', '867', '5309'];
        assert.equal(result, getWords('555-867-5309'));
    });
}); 
```

当它运行时，我收到以下断言错误：

```
AssertionError: ["555","867","5309"] == ["555","867","5309"] 
```

但是，当我将测试更改为 时`assert.deepEqual`，测试通过了。我想知道这是否是`==`vs的情况`===`，但是如果我输入

```
[1,2,3] === [1,2,3] 
```

进入 node.js 命令行，我仍然得到错误。

为什么数组不比较其他值的方式（例如`1 == 1`）？assert.equal 和 assert.deepEqual 有什么区别？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-11-05T04:32:33.983

> 为什么数组不比较其他值的方式（例如 1==1）

数字、字符串、布尔值`null`、 和`undefined`是值，并且按照您的预期进行比较。 `1 == 1`, `'a' == 'a'`, 等等。`===`值和`==`值之间的区别在于，`==`它将首先尝试执行类型转换，这就是为什么`'1' == 1`但*不是* `'1' === 1`。

另一方面，数组是对象。`===`在这种情况下，`==`并不表示操作数在语义上是相等的，而是表示它们*引用的是同一个对象*。

> assert.equal 和 assert.deepEqual 有什么区别？

`assert.equal`行为如上所述。如果参数是，它实际上会失败`!=`，正如您[在源代码](https://github.com/joyent/node/blob/master/lib/assert.js#L130)中看到的那样。因此，对于您的数字字符串数组，它会失败，因为尽管它们本质上是等价的，但它们不是同一个对象。

另一方面，深度（又名结构）相等并不测试操作数是否是同一个对象，而是测试它们是否等价。从某种意义上说，您可以说它强制将对象进行比较，就好像它们是值一样。

```
var a = [1,2,3]  
var b = a              // As a and b both refer to the same object
a == b                 // this is true
a === b                // and this is also true

a = [1,2,3]            // here a and b have equivalent contents, but do not
b = [1,2,3]            // refer to the same Array object.
a == b                 // Thus this is false.

assert.deepEqual(a, b) // However this passes, as while a and b are not the 
                       // same object, they are still arrays containing 1, 2, 3

assert.deepEqual(1, 1) // Also passes when given equal values

var X = function() {}
a = new X
b = new X
a == b                 // false, not the same object
assert.deepEqual(a, b) // pass, both are unadorned X objects
b.foo = 'bar'
assert.deepEqual(a, b) // fail! 
```

# ruby - 从 Thor 可执行文件运行命令行命令

> ID：13225275
> 
> 赞同：1
> 
> 时间：2012-11-05T02:37:21.223
> 
> 标签：ruby, command-line-interface, thor

在我的可执行 Ruby 文件中，我有以下内容：

```
#!/usr/bin/env ruby

require 'thor'

include Thor::Actions

class UI < Thor
  # def self.source_root
  #   File.dirname(__FILE__)
  # end

  desc "makecal", "Generates postscript calendar to your desktop"
  def makecal
    # puts `ls ~`
    puts run('ls ~')
    # puts run "pcalmakecal -B -b all -d Helvetica/8 -t Helvetica/16 -S #{Time.now.month} #{Time.now.year} > ~/Desktop/#{Time.now.month}-#{Time.now.year}"
  end
end

UI.start 
```

在终端中，当我按原样运行文件时，我得到一个空行，因为 Thor 的运行命令返回一个 NilClass。

但是，当我取消注释 puts `ls ~` 并注释掉 Thor 的 run 方法时，我会按预期得到我的主目录的输出。

我无法弄清楚为什么我不能让 Thor 的 run 方法像 Ruby 的滴答声一样工作。

有什么我可能出错的想法吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:15:24.373

我没有把 include 语句放在我的班级里，这把事情搞砸了。代码应该是：

```
#!/usr/bin/env ruby

require 'makecal'

class UI < Thor
  include Thor::Actions
  # def self.source_root
  #   File.dirname(__FILE__)
  # end
  #

  desc "makecal", "Generates postscript calendar to your desktop"
  def makecal
    # puts `ls ~`
    puts run('ls ~')
    # puts run "pcal -B -b all -d Helvetica/8 -t Helvetica/16 -S #{Time.now.month} #{Time.now.year} > ~/Desktop/#{Time.now.month}-#{Time.now.year}"
  end
end

UI.start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:19:29.317

Thor 关于这种方法的文档实际上是错误且不完整的。它记录了它返回“命令的内容”（我假设它是指标准输出），但默认情况下它什么也不做。

*但是*，显然，您可以使用该`:capture`选项来获得您想要的东西：

```
unless options[:pretend]
  config[:capture] ? `#{command}` : system("#{command}")
end 
```

所以，尝试做

```
puts run("ls ~", :capture => true) 
```

看看能不能做到。

# google-maps - 确定哪些照片在特定的聚类器中

> ID：13225276
> 
> 赞同：0
> 
> 时间：2012-11-05T02:37:24.570
> 
> 标签：google-maps, markerclusterer

现在我在地图上有 8 张照片作为标记，当我点击这个聚类器时，地图会变暗，并且这个聚类器中的所有照片都会显示出来。

如果我关闭这个暗淡并返回地图并放大，那么它将是 2 个集群，其中有 4 个标记和 2 个标记，然后单击带有 2 张照片的集群，它将使地图变暗并显示 8 张照片。这是错误的！

当我单击具有例如 8 张照片的集群时，它将显示该集群中的 8 张照片。如果我单击具有 4 张照片的集群，它将显示该集群中的 4 张照片。我怎样才能做到这一点？

```
var markerCluster = new MarkerClusterer(gm_map, [], options_markerclusterer);

google.maps.event.addListener(markerCluster, 'clusterclick', function() {
    $('#toggle-photolist').fadeIn();
    $('#close-overlay').fadeIn();
    $('#view-multiblephotos').show();
    $('#view-singlephoto').hide();

    var array = [];
    var num = 0;
    for(i = 0; i < locations.length; i++) {
        num++;

        array.push(locations[i][0]);
    }

    $('#count-photos').text(num);
    $('#list-photos').html(array.join(''));
}); 
```

[jsFiddle 演示](http://jsfiddle.net/edgren/RGS5b/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:44:26.533

感谢我的兄弟，我得到了这个工作！这是工作代码（jsFiddle 上的代码也已更新）。

```
function initialize() {
    var marker, i;
    var clusterMarkers = [
        new google.maps.Marker({
            position: new google.maps.LatLng(59.381059,13.504026),
            map: gm_map,
            title:"P1220214 1.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.338683,13.492057),
            map: gm_map,
            title:"P1220214 2.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.340715,13.49631),
            map: gm_map,
            title:"P1220214 3.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.327232,13.487384),
            map: gm_map,
            title:"P1220214 4.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.379034,13.516566),
            map: gm_map,
            title:"P1220214 5.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.328631,13.485688),
            map: gm_map,
            title:"P1220214 6.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.328657,13.485591),
            map: gm_map,
            title:"P1220214 7.JPG"             
        }),

        new google.maps.Marker({
            position: new google.maps.LatLng(59.328501,13.485782),
            map: gm_map,
            title:"P1220214 8.JPG"             
        })
        ]

    var options_googlemaps = {
        minZoom: 4,
        maxZoom: 18,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    }

    gm_map = new google.maps.Map(document.getElementById('google-maps'), options_googlemaps);

    var options_markerclusterer = {
        gridSize: 20,
        maxZoom: 18,
        zoomOnClick: false
    };

    var markerCluster = new MarkerClusterer(gm_map, clusterMarkers, options_markerclusterer);

    google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
        $('#toggle-photolist').fadeIn();
        $('#close-overlay').fadeIn();
        $('#view-multiblephotos').show();
        $('#view-singlephoto').hide();

        var markers = cluster.getMarkers();

        var array = [];
        var num = 0;

        for(i = 0; i < markers.length; i++) {

            num++;
            array.push(markers[i].getTitle() + '<br>');
        }

        $('#count-photos').text(num);
        $('#list-photos').show().html(array.join(''));

    });

    for(i = 0; i < clusterMarkers.length; i++) {
       var marker = clusterMarkers[i];

        google.maps.event.addListener(marker, 'click', (function(marker) {
            return function() {
                $('#toggle-photolist').fadeIn();
                $('#close-overlay').fadeIn();
                $('#view-multiblephotos').hide();
                $('#list-photos').hide();
                $('#view-singlephoto').show().html(marker.getTitle());
            }
        })(marker));

    }
} 
```

# php - java.io.FileNotFoundException localhost/../gateway.php

> ID：13225278
> 
> 赞同：1
> 
> 时间：2012-11-05T02:38:25.523
> 
> 标签：php, flash-builder

我正在尝试在 Flash Builder 4.5 中为我的应用程序连接到数据/服务，但出现`java.io.FileNotFoundException`错误

这就是我所做的：

> 数据 -> 连接到 PHP（运行时） -> 点击此处生成示例 -> 我填写了所有信息并点击 -> 连接到数据库。

在此之后我得到：

```
java.io.FileNotFoundException: localhost:8888/../../bin-debug/gateway.php 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T21:18:35.830

前段时间我遇到了同样的问题，我的解决方案是在我的项目属性中更正 web 根目录。（我有错误的 apache htdocs 文件夹）希望这对你也有帮助。

# python - 停止龙卷风网络服务器

> ID：13225281
> 
> 赞同：0
> 
> 时间：2012-11-05T02:39:51.200
> 
> 标签：python, process, tornado, inter-process-communicat

我知道已经有人问过这个问题，但是建议的解决方案对我不起作用。我想运行龙卷风，也希望能够以某种方式从另一个应用程序的命令中停止它。

问题是，当遵循[http://pastebin.com/KU3KN0Zh](http://pastebin.com/KU3KN0Zh)`stopTornado()`中的解决方案时，如果进程已经在运行（假设睡眠和`stopTornado`最后将被删除），我该如何调用该方法？

我基本上需要另一个可以调用此方法的 python 脚本（或向 starttornado 脚本发送消息）。

有谁知道如何做到这一点？

# javascript - 根据位置删除标记

> ID：13225283
> 
> 赞同：0
> 
> 时间：2012-11-05T02:40:06.043
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试根据它的地址在我的地图上删除一个标记，但由于某种原因它不起作用。这一定是我没有看到的明显的东西。即使我确保 m 和 locationsall[i][0] 相同，它也不会进入 deleteMarker 方法中的 if(m==locationsall[i][0]) 。

```
 //alert(tmp);
    //alert(locationsall[0][0]); 
```

添加到地图代码：

```
$('#map').show();
    var geocoder = new google.maps.Geocoder();
    var address = document.getElementById("address").value +",  " + document.getElementById("city").value;

    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat();
            var lng = results[0].geometry.location.lng();
            locationsall[counter] = new Array();
            locationsall[counter][0] = address;
            locationsall[counter][1] = lat;
            locationsall[counter][2] = lng;
            var mapOptions = {
                    zoom: 13,
                    center: new google.maps.LatLng(lat, lng),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
            }

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var i;
    for (i = 0; i < locationsall.length; i++) {  
            locationsall[i][3] = marker = new google.maps.Marker({
            position: new google.maps.LatLng(locationsall[i][1], locationsall[i][2]),
            map: map
            });
            //markersArray.push(marker);
    }
    counter++;
    } else {
        alert("Geocode was not successful for the following reason: " + status);
    }
  });
} 
```

从文本框中检索地址并将其格式化为 '1 main street, city' 的代码

```
 var tmp = locations.splice(locations.indexOf(location), 1);
    deleteMarker(tmp); 
```

删除标记代码：

```
function deleteMarker(m){
for (i = 0; i < locationsall.length; i++) { 
     if(m==locationsall[i][0]){
     alert(locationsall[i][0]); 
 alert(locationsall[i][3]);
      locationsall[i][3].setMap(null);
     } 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:39:05.750

当我比较 m 和 locationsall[i][0]; 时，我发现我有一个额外的空间。

该代码现在完美运行。

# javascript - javascript OOP 不工作：未捕获的类型错误：对象不是函数

> ID：13225288
> 
> 赞同：5
> 
> 时间：2012-11-05T02:41:02.380
> 
> 标签：javascript, jquery, oop, function

好的，所以背景故事是我们在页面上有一堆相同（功能上）的表单来为产品添加变体，该表单由三个主要部分组成。

# 属性编辑器

![在此处输入图像描述](../Images/e0dbf39b912c3e40f2585cf7585aa6b9.png)
该组件允许用户向产品添加属性。每个属性都有 a `visibility status`、 an `attribute key`、 an`attribute value`和 a `delete button`，它们一起构成一行。

该组件还有一个`Add Attribute`按钮，单击该按钮会在列表底部添加一个新行。

每个`attribute key`选择列表都有一个`new attribute`选项，选择后会启动一个带有表单的模式对话框以输入新属性名称，然后此表单通过 AJAX 提交并返回一个 ID，然后将新选项附加到`attribute key`页面上的每个选择以允许它被选中。

当在组件的实例中选择一个键时，组中的所有其他`attribute key`选择都会禁用该选项以防止重复属性。

属性编辑器作为下面主表单的一部分提交。

* * *

# 主要形式

![在此处输入图像描述](../Images/6809a6e442dadd139812ebb07774d012.png)
该组件由变体的一般描述字段组成。表单通过 AJAX 提交，并附加了[jQuery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)以进行表单验证。

因为我们正在使用属性编辑器动态添加新输入，所以我们必须不断地分离并重新连接验证引擎。

* * *

# 警报系统

![在此处输入图像描述](../Images/bb7da506facb75e112f4322c30fb61a6.png)
该组件处理逐个表单地显示/隐藏错误/成功/状态消息。

* * *

# 问题

现在还有一些非常相似的形式，但是在几个事件处理程序上略有不同，所以我想创建代码，这样我就可以随意替换它的一些部分，而不必复制整个代码.

因此，在遵循[这个问题](https://stackoverflow.com/questions/13223618/new-instance-of-object-acting-as-reference/13224068)的提示之后，我最终得到了下面的代码，但我收到了错误：`Uncaught TypeError: object is not a function`这是在这一行：`var variantAlert = new VariantAlert(form);`我相信这是因为我没有返回任何东西，但我不知道我应该返回什么让代码做我想做的事！

**简洁版本**

```
$(function () {

    $("form.variant-form").each(function (i, form) {
        var variantAlert = new VariantAlert(form);

        var variantForm = new VariantForm(form, variantAlert);
        variantForm.init();

        var attributeEditor = new AttributeEditor(form, variantForm);
        attributeEditor.init();
    });
});

var AttributeEditor = (function (form, formSetup) {

    form = $('form');

    var someVar = 123;

    var init = function () {     
        someEventHandler();
    };

    var someEventHandler = function () {
        $('.selector', form).on('some event', function (e) {
            form.css('background-color', '#f00');
        });
    };

    return AttributeEditor;
})();

var VariantForm = (function (form, variantAlert) {
    form = $('form');

    var init = function () {
        anotherEventHandler();
    };

    var anotherEventHandler = function () {
        $('.anotherSelector', form).on('another event', function () {
            form.doStuff();
        });
    };
})();

var VariantAlert = (function (form) {
    var timer;

    form = $('form');

    var message = function (type, message) {
        doMoreStuff(type, message);
    }

})(); 
```

**完整版本**

```
$(function () {

    /*********************************
     * Loop over each variant and setup
     * the attribute editor and form
     *********************************/
    $("form.variant-form").each(function (i, form) {
        var variantAlert = new VariantAlert(form);

        var variantForm = new VariantForm(form, variantAlert);
        variantForm.init();

        var attributeEditor = new AttributeEditor(form, variantForm);
        attributeEditor.init();
    });
});

var AttributeEditor = (function (form, formSetup) {
    /*********************************
     * Variables
     *********************************/

    form = $('form');

    var template = $('.variant_demo_row', form);
    var attributes = $('.variant_select', form).length;
    var modal = form.siblings('.newAttribute').appendTo('body');
    var manualHide = false;
    var triggerSelect = null;
    var oldOption = null;

    var init = function () {
        //setup the handlers
        //doing it this way allows us to overwrite the individual handlers with ease
        addNewAttributeHandler();
        removeAttributeHandler();
        selectFocusHandler();
        selectChangeHandler();
        attributeVisibilityHandler();
        modalFormSubmissionHandler();
        modalShowHandler();
        modalCancelClickHandler();
    };

    /*********************************
     * Add new attribute button handler
     *********************************/
    var addNewAttributeHandler = function () {

        $('.variant_attribute_add_new a', form).on('click keypress', function (e) {
            form.css('background-color', '#f00');
            //patched support for enter key
            if (e.type === 'keypress' && e.which != 13) {
                return true;
            }

            //clone the template row so we can edit it
            var newRow = template.clone().css('display', 'none').removeClass('hidden variant_demo_row').addClass('variant_row');

            //give each element in the clone it's unique name
            $('.variant_select', newRow).prop('name', 'attribute_key_' + attributes);
            $('.variant_input', newRow).prop('name', 'attribute_value_' + attributes);
            $('.variant_visible', newRow).prop('name', 'attribute_visible_' + attributes);

            //insert the new attribute row at the bottom of the attributes
            newRow.insertBefore($('.variant_attribute_add_new', form)).show('fast', function () {
                $('select', newRow).focus();
            });

            //we have added new nodes so we need to reset the validationEngine
            form.validationEngine('detach');
            formSetup.init();
            attributes++;
        });
    };

    /*********************************
     * Remove attribute button handler
     *********************************/
    var removeAttributeHandler = function () {

        form.on('click keypress', '.removeAttribute', {}, function (e) {

            //patched support for enter key
            if (e.type === 'keypress' && e.which != 13) {
                return true;
            }

            attributes--;

            var val = $(this).siblings('select').val();

            //re-enable whatever attribute key was in use
            if (val != "") {
                $('.variant_select option[value=' + val + ']', form).removeAttr('disabled');
            }

            //animate the removal of the attribute
            $(this).closest('.controls-row').hide('fast', function () {
                $(this).remove();
            });
        });
    };

    /*********************************
     * Attribute key select focus handler
     *********************************/
    var selectFocusHandler = function () {

        form.on('focus', '.variant_select', {}, function () {
            //store the old option so we know what option to
            //re-enable if a change is made
            oldOption = $('option:selected', this).val();
        });
    };

    /*********************************
     * Attribute key select change handler
     *********************************/
    var selectChangeHandler = function () {
        form.on('change', '.variant_select', {}, function () {
            var select = $(this);

            //empty class is used for "placeholder" simulation
            select.removeClass('empty');

            //re-enable whatever option was previously selected
            if (oldOption !== null) {
                $('.variant_select option[value=' + oldOption + ']', form).removeAttr('disabled');
            }

            if ($('option:selected', select).hasClass('newAttribute')) { //Add new attribute selected
                triggerSelect = select;
                modal.modal('show');
            } else if ($('option:selected', select).val() == "") { //Placeholder selected
                select.addClass('empty');
            } else { //Value selected
                //disable the selected value in other attribute key selects
                $('.variant_select', form).not(select).children('option[value=' + select.val() + ']').prop('disabled', 'disabled');
            }
            oldOption = select.val();
        });
    };

    /*********************************
     * Toggle visibility button handler
     *********************************/
    var attributeVisibilityHandler = function () {

        form.on('click', '.toggleVisibility', {}, function () {

            //the titles of the button
            var hidden = 'Hidden Attribute';
            var visible = 'Visible Attribute';

            var btn = $(this);
            var icon = btn.children('i');
            var box = btn.siblings('.variant_visible');

            //toggle the state between visible and hidden
            btn.toggleClass('btn-success btn-warning').attr('title', btn.attr('title') == hidden ? visible : hidden);
            icon.toggleClass('icon-eye-open icon-eye-close');
            box.prop("checked", !box.prop("checked"))
        });
    };

    /*********************************
     * New attribute submission handler
     *********************************/
    var modalFormSubmissionHandler = function () {

        $('.newAttributeForm', modal).validationEngine('attach', {
            onValidationComplete:function (form, status) {
                if (status) {
                    var text = $('.newAttributeName', modal).val();
                    $('.newAttributeName', modal).val('');
                    form.spin();

                    $.ajax({
                        type:'POST',
                        url:'/cfox/cart/variants/addattribute',
                        data:{name:text},
                        success:function (data) {
                            //add new attribute key to attribute key selects everywhere
                            $('.variant_select').append($('<option>', { value:data.id}).text(data.name));

                            //set the triggering selects value to the new key
                            triggerSelect.val(data.id);
                            triggerSelect.trigger('change');

                            manualHide = true;
                            modal.modal('hide');
                            triggerSelect.siblings('input').focus();
                            form.spin(false);
                        },
                        dataType:'JSON'
                    });

                }
            }});
    };

    var modalCancelClickHandler = function () {

        $('.btn-danger', modal).on('click', function () {
            if (!manualHide) {
                triggerSelect[0].selectedIndex = 1;
                triggerSelect.trigger('change');
            }
            manualHide = false;
        });
    };

    var modalShowHandler = function () {

        modal.on('show shown', function () {
            $('.newAttributeName', modal).focus();
        });
    }

    return AttributeEditor;

})();

var VariantForm = (function (form, variantAlert) {
    /*********************************
     * Variables
     *********************************/

    form = $('form');

    var init = function () {
        nameChangeHandler();
        submitHandler();
    };

    /*********************************
     * Variant name change handler
     * Changes the heading on the accordion if the
     * name form input changes
     *********************************/
    var nameChangeHandler = function () {
        var accordion_heading = form.closest('.accordion-body').siblings('.accordion-heading').find('.accordion-toggle');
        $('.name-input', form).on('change', function () {
            accordion_heading.text($(this).val());
        });
    };

    /*********************************
     * Form submit handler
     *********************************/
    var submitHandler = function () {
        form.validationEngine('attach', {
            onValidationComplete:function (form, status) {
                if (status == true) {
                    $.ajax({
                        type:'POST',
                        url:form.attr('action'),
                        data:form.serialize(),
                        dataType:'json',
                        beforeSend:function () {
                            cfox.disableForm(form);
                            form.spin();
                            form.children('.variant_status_message').hide('fast');
                        },
                        success:function (response) {
                            cfox.enableForm(form);//need to do this here so browser doesn't cache disabled fields
                            if (typeof response != "object" || response === null) {
                                variantAlert.message('failed');
                            } else {
                                switch (response.status) {
                                    case 0:
                                        variantAlert.message('errors', response.errors);
                                        break;
                                    case 1:
                                        variantAlert.message('success');
                                        break;
                                    default:
                                        variantAlert.message('failed');
                                        break;
                                }
                            }

                            form.spin(false);
                        },
                        error:function () {
                            variantAlert.message('failed');
                            form.spin(false);
                            cfox.enableForm(form);
                        }
                    });
                }
            }
        });
    }

})();

var VariantAlert = (function (form) {

    /*********************************
     * Variables
     *********************************/
    var timer;

    form = $('form');

    /*********************************
     * handles showing/hiding any messages
     * in the variant forms
     *********************************/
    var message = function (type, message) {
        var alert;
        clearTimeout(timer);
        $('.variant_status_message', form).hide('fast');
        if (type == 'success') {
            alert = $('.variant_status_message.success', form);
        } else if (type == 'errors') {
            alert = $('.variant_status_message.errors', form);
            $('.alert-message', alert).html(message);
        } else if (type == 'failed') {
            alert = $('.variant_status_message.failed', form);
        }

        alert.show('fast', function () {

            $('html, body').animate({
                scrollTop:alert.closest('.accordion-group').offset().top
            }, 150, 'linear');

            timer = setTimeout(function () {
                alert.hide('fast')
            }, 5000);
        });
    }

})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:11:26.030

你的 variantAlert 使用类似

```
 variantAlert.message('failed'); 
```

这意味着构造函数必须返回包含**消息**函数的对象

```
var VariantAlert = function (form) {

var timer;

/*********************************
 * handles showing/hiding any messages
 * in the variant forms
 *********************************/
var message = function (type, message) {
    var alert;
    clearTimeout(timer);
    $('.variant_status_message', form).hide('fast');
    if (type == 'success') {
        alert = $('.variant_status_message.success', form);
    } else if (type == 'errors') {
        alert = $('.variant_status_message.errors', form);
        $('.alert-message', alert).html(message);
    } else if (type == 'failed') {
        alert = $('.variant_status_message.failed', form);
    }

    alert.show('fast', function () {

        $('html, body').animate({
            scrollTop:alert.closest('.accordion-group').offset().top
        }, 150, 'linear');

        timer = setTimeout(function () {
            alert.hide('fast')
        }, 5000);
    });        
}
return {
    message: message  
};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:44:51.280

终于用不同的方法让它工作了，我的代码在下面供任何人比较和参考。

```
$(function () {

    /*********************************
     * Loop over each variant and setup
     * the attribute editor and form
     *********************************/
    var editors = [];
    $("form.variant-form").each(function (i, form) {
        var variantEditor = new VariantEditor(form);
        editors.push(variantEditor);
        variantEditor.attributeEditor.init();
        variantEditor.form.init();
    });
});

var VariantEditor = function (form) {
    var that = this;
    that.formElement = $(form);

    /*********************************
     * Sets up the attribute editor
     *********************************/
    that.attributeEditor = {

        /*********************************
         * Variables
         *********************************/
        template:null,
        attribute:null,
        modal:null,
        manualHide:false,
        triggerSelect:null,
        oldOption:null,

        /*********************************
         * Sets up the attribute editor
         *********************************/
        init:function () {

            var that = this;

            //The Template row
            that.template = $('.variant_demo_row', that.formElement);

            //How many attributes are pre-loaded
            that.attributes = $('.variant_select', that.formElement).length;

            //Append the attribute editor modal to the body to avoid style corruption
            that.modal = that.formElement.siblings('.newAttribute').appendTo('body');

            //setup the handlers
            //doing it this way allows us to overwrite the individual handlers with ease
            that.addNewAttributeHandler();
            that.removeAttributeHandler();
            that.selectFocusHandler();
            that.selectChangeHandler();
            that.attributeVisibilityHandler();
            that.modalFormSubmissionHandler();
            that.modalShowHandler();
            that.modalCancelClickHandler();

            $('.variant_select', that.formElement).each(function (i, select) {
                that.oldOption = null;
                $(select).change();
            });
        },

        /*********************************
         * Add new attribute button handler
         *********************************/
        addNewAttributeHandler:function () {
            var that = this;
            $('.variant_attribute_add_new a', that.formElement).on('click keypress', function (e) {
                //patched support for enter key
                if (e.type === 'keypress' && e.which != 13) {
                    return true;
                }

                //clone the template row so we can edit it
                var newRow = that.template.clone().css('display', 'none').removeClass('hidden variant_demo_row').addClass('variant_row');

                //give each element in the clone it's unique name
                $('.variant_select', newRow).prop('name', 'attribute_key_' + that.attributes);
                $('.variant_input', newRow).prop('name', 'attribute_value_' + that.attributes);
                $('.variant_visible', newRow).prop('name', 'attribute_visible_' + that.attributes);

                //insert the new attribute row at the bottom of the attributes
                newRow.insertBefore($('.variant_attribute_add_new', that.formElement)).show('fast', function () {
                    $('select', newRow).focus();
                });

                //we have added new nodes so we need to reset the validationEngine
                that.formElement.validationEngine('detach');
                that.form.init();
                that.attributes++;
            });
        },

        /*********************************
         * Remove attribute button handler
         *********************************/
        removeAttributeHandler:function () {
            var that = this;

            that.formElement.on('click keypress', '.removeAttribute', {}, function (e) {

                //patched support for enter key
                if (e.type === 'keypress' && e.which != 13) {
                    return true;
                }

                that.attributes--;

                var val = $(this).siblings('select').val();

                //re-enable whatever attribute key was in use
                if (val != "") {
                    $('.variant_select option[value=' + val + ']', that.formElement).removeAttr('disabled');
                }

                //animate the removal of the attribute
                $(this).closest('.controls-row').hide('fast', function () {
                    $(this).remove();
                });
            });
        },

        /*********************************
         * Attribute key select focus handler
         *********************************/
        selectFocusHandler:function () {
            var that = this;

            that.formElement.on('focus', '.variant_select', {}, function () {
                //store the old option so we know what option to
                //re-enable if a change is made
                that.oldOption = $('option:selected', this).val();
            });
        },

        /*********************************
         * Attribute key select change handler
         *********************************/
        selectChangeHandler:function () {
            var that = this;
            that.formElement.on('change', '.variant_select', {}, function () {
                var select = $(this);

                //empty class is used for "placeholder" simulation
                select.removeClass('empty');

                //re-enable whatever option was previously selected
                if (that.oldOption !== null) {
                    $('.variant_select option[value=' + that.oldOption + ']', that.formElement).removeAttr('disabled');
                }

                if ($('option:selected', select).hasClass('newAttribute')) { //Add new attribute selected
                    that.triggerSelect = select;
                    that.modal.modal('show');
                } else if ($('option:selected', select).val() == "") { //Placeholder selected
                    select.addClass('empty');
                } else { //Value selected
                    //disable the selected value in other attribute key selects
                    $('.variant_select', that.formElement).not(select).children('option[value=' + select.val() + ']').prop('disabled', 'disabled');
                }
                that.oldOption = select.val();
            });
        },

        /*********************************
         * Toggle visibility button handler
         *********************************/
        attributeVisibilityHandler:function () {
            var that = this;

            that.formElement.on('click', '.toggleVisibility', {}, function () {

                //the titles of the button
                var hidden = 'Hidden Attribute';
                var visible = 'Visible Attribute';

                var btn = $(this);
                var icon = btn.children('i');
                var box = btn.siblings('.variant_visible');

                //toggle the state between visible and hidden
                btn.toggleClass('btn-success btn-warning').attr('title', btn.attr('title') == hidden ? visible : hidden);
                icon.toggleClass('icon-eye-open icon-eye-close');
                box.prop("checked", !box.prop("checked"))
            });
        },

        /*********************************
         * New attribute submission handler
         *********************************/
        modalFormSubmissionHandler:function () {
            var that = this;

            $('.newAttributeForm', that.modal).validationEngine('attach', {
                onValidationComplete:function (form, status) {
                    if (status) {
                        var text = $('.newAttributeName', that.modal).val();
                        $('.newAttributeName', that.modal).val('');
                        form.spin();

                        $.ajax({
                            type:'POST',
                            url:'/cfox/cart/variants/addattribute',
                            data:{name:text},
                            success:function (data) {
                                //add new attribute key to attribute key selects everywhere
                                $('.variant_select').append($('<option>', { value:data.id}).text(data.name));

                                //set the triggering selects value to the new key
                                that.triggerSelect.val(data.id);
                                that.triggerSelect.trigger('change');

                                that.manualHide = true;
                                that.modal.modal('hide');
                                that.triggerSelect.siblings('input').focus();
                                form.spin(false);
                            },
                            dataType:'JSON'
                        });

                    }
                }});
        },

        modalCancelClickHandler:function () {
            var that = this;

            $('.btn-danger', that.modal).on('click', function () {
                if (!that.manualHide) {
                    that.triggerSelect[0].selectedIndex = 1;
                    that.triggerSelect.trigger('change');
                }
                that.manualHide = false;
            });
        },
        modalShowHandler:function () {
            var that = this;

            that.modal.on('show shown', function () {
                $('.newAttributeName', that.modal).focus();
            });
        }
    };

    /*********************************
     * Sets up the variant main form
     * The above function focuses on setting up the attribute editor
     * This function sets up the rest of the form and handles the
     * form submissions
     *********************************/
    that.form = {

        init:function () {
            var that = this;

            that.nameChangeHandler();
            that.submitHandler();
            that.statusChangeHandler();

        },

        /*********************************
         * Variant name change handler
         * Changes the heading on the accordion if the
         * name form input changes
         *********************************/
        nameChangeHandler:function () {
            var that = this;

            var accordion_heading = that.formElement.closest('.accordion-body').siblings('.accordion-heading').find('.accordion-toggle .name');
            $('.name-input', that.formElement).on('change', function () {
                accordion_heading.text($(this).val());
            });
        },

        statusChangeHandler: function(){
            var that = this;
            console.log($('input[name=status]', that.formElement).parent());
            $('input[name=status]', that.formElement).parent().on('click keypress', function(e){

                //patched support for enter key
                if (e.type === 'keypress' && e.which != 13) {
                    return true;
                }

                console.log('called');
                var checked = $(this).prop('checked');
                var label = that.formElement.closest('.accordion-body').siblings('.accordion-heading').find('.accordion-toggle .label');
                label.text(checked ? 'Online' : 'Offline').toggleClass('label-important label-success');
            });
        },

        /*********************************
         * Form submit handler
         *********************************/
        submitHandler:function () {
            var that = this;
            that.formElement.validationEngine('attach', {
                onValidationComplete:function (form, status) {
                    if (status == true) {
                        $.ajax({
                            type:'POST',
                            url:form.attr('action'),
                            data:form.serialize(),
                            dataType:'json',
                            beforeSend:function () {
                                cfox.disableForm(form);
                                form.spin();
                                form.children('.variant_status_message').hide('fast');
                            },
                            success:function (response) {
                                cfox.enableForm(form);//need to do this here so browser doesn't cache disabled fields
                                if (typeof response != "object" || response === null) {
                                    that.message('failed');
                                } else {
                                    switch (response.status) {
                                        case 0:
                                            that.message('errors', response.errors);
                                            break;
                                        case 1:
                                            that.message('success');
                                            break;
                                        default:
                                            that.message('failed');
                                            break;
                                    }
                                }

                                form.spin(false);
                            },
                            error:function () {
                                cfox.alert('alert-error', "An error was encountered when submitting this form. Please try again.");
                                form.spin(false);
                                cfox.enableForm(form);
                            }
                        });
                    }
                }
            });
        }

    };

    /*********************************
     * handles showing/hiding any messages
     * in the variant forms
     *********************************/
    that.message = function (type, message) {
        var that = this;
        var alert;
        clearTimeout(that.timer);
        $('.variant_status_message', that.formElement).hide('fast');
        if (type == 'success') {
            alert = $('.variant_status_message.success', that.formElement);
        } else if (type == 'errors') {
            alert = $('.variant_status_message.errors', that.formElement);
            $('.alert-message', alert).html(message);
        } else if (type == 'failed') {
            alert = $('.variant_status_message.failed', that.formElement);
        }

        alert.show('fast', function () {

            $('html, body').animate({
                scrollTop:alert.closest('.accordion-group').offset().top
            }, 150, 'linear');

            that.timer = setTimeout(function () {
                alert.hide('fast')
            }, 5000);
        });
    }

    that.attributeEditor.formElement = that.formElement;
    that.attributeEditor.form = that.form;
    that.attributeEditor.message = that.message;

    that.form.formElement = that.formElement;
    that.form.attributeEditor = that.attributeEditor;
    that.form.message = that.message;

    that.message.formElement = that.formElement;
    that.message.attributeEditor = that.attributeEditor;
    that.message.form = that.form;
    return that;
};

VariantEditor.prototype = {}; 
```

# android - 无法安装 ia32-libs（为了运行 Android 模拟器）

> ID：13225292
> 
> 赞同：2
> 
> 时间：2012-11-05T02:41:32.893
> 
> 标签：android

我正在尝试启动我的 Android 虚拟设备 (AVD)，但在单击“开始”后收到以下错误：

> 为 AVD 'MyAVD'
> 启动模拟器无法启动模拟器：无法运行程序“/home/ting/Desktop/android-sdk-linux//tools/emulator”：java.io.IOException：错误=2，没有这样的文件或目录

我做了一些研究，似乎表明我必须安装 ia32-libs，因为我有一个 64 位系统。（根据[Why can't I run the android emulator?](https://stackoverflow.com/questions/3631709/why-cant-i-run-the-android-emulator)）

所以我在终端输入“sudo apt-get install ia32-libs”，现在我得到了：

> ting@WTH:~$ sudo apt-get install ia32-libs sudo: unable to resolve host WTH [sudo] password for ting: Reading package lists... Done Building dependency tree
> Reading state information... Done Some packages could not be安装。这可能意味着您请求了一种不可能的情况，或者如果您使用的是不稳定的发行版，一些必需的软件包尚未创建或已从 Incoming 中移出。
> 以下信息可能有助于解决这种情况：
> 
> 以下软件包具有未满足的依赖关系： ia32-libs ：依赖：ia32-libs-multiarch E：无法纠正问题，您持有损坏的软件包。
> 婷@WTH:~$

任何人都可以帮忙吗？

# arrays - Subset with loop over an array of strings

> ID：13225300
> 
> 赞同：0
> 
> 时间：2012-11-05T02:42:22.353
> 
> 标签：arrays, string, r, loops, subset

I have my code like this:

```
for (i in 1:b) {
carteraR[[i]]=subset(carteraR[[i]],RUN.FONDO=="8026" | RUN.FONDO=="8036" | RUN.FONDO=="8048" | RUN.FONDO=="8057" | RUN.FONDO=="8059" | RUN.FONDO=="8072" | RUN.FONDO=="8094" | 
RUN.FONDO=="8107" | RUN.FONDO=="8110" | RUN.FONDO=="8115" | RUN.FONDO=="8130" | RUN.FONDO=="8230" | RUN.FONDO=="8248" | RUN.FONDO=="8257" | RUN.FONDO=="8319")
} 
```

Where `b=length(carteraR)`, and `class(carteraR[[i]])=data.frame`. `RUN.FONDO` is one of the head of these data frames. This code is working fine but I want to save some lines.

What I want is something like:

```
for (i in 1:b) {
for (j in 1:length(A)){
carteraR[[i]]=subset(carteraR[[i]],RUN.FONDO==A[j])
}
} 
```

And where `A= "8026" "8036" "8048" "8057" ... "8319"` ....... etc......

What should the code be like ?

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:54:25.140

像这样：

```
carteraR <- lapply(carteraR, subset, RUN.FONDO %in% A) 
```

`subset`请注意，以编程方式使用可能存在风险：[为什么 `[` 比 `subset` 更好？](https://stackoverflow.com/questions/9860090/in-r-why-is-better-than-subset). 不过这种用法很好。

# java - Using String with Switch statements?

> ID：13225303
> 
> 赞同：1
> 
> 时间：2012-11-05T02:42:38.193
> 
> 标签：java, string, switch-statement, case, break

> **Possible Duplicate:**
> [Switch Statement with Strings in Java](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)

Ok, basically i want to know if this is possible and how to do it. I have a menu and i want this switch statement to recognize chars or a string that was entered by the user.

I have a little menu program that I am writing:

```
import java.util.*;
import java.io.*;
import java.io.File;
import java.io.FileReader;

public class Personnel
{
    // Instance Variables
    private static String empName;
    private static double wage;

    public static void main(String[] args) throws Exception
    {

        clearScreen();
        question();
        printMenu();
        exit();
    }

    public static void clearScreen()
    {
        System.out.println("\u001b[H\u001b[2J");
    }

    private static void exit()
    {
        System.exit(0);
    }

    private static void printMenu()
    {
        System.out.println("\t------------------------------------");
        System.out.println("\t|Commands: n - New employee        |");
        System.out.println("\t|          c - Compute paychecks   |");
        System.out.println("\t|          r - Raise wages         |");
        System.out.println("\t|          p - Print records       |");
        System.out.println("\t|          d - Download data       |");
        System.out.println("\t|          u - Upload data         |");
        System.out.println("\t|          q - Quit                |");
        System.out.println("\t------------------------------------");
        System.out.println("");
    }

    private static void question()
    {
        System.out.println("Enter command: ");
        Scanner q = new Scanner(System.in);
        // String input = q.nextLine();

        switch (q.nextLine())
        {
        case "n":
            System.out.println("Enter the name of new employee: ");
            Scanner stdin = new Scanner(System.in);
            System.out.println("Hourly (h) or salaried (s): ");
            Scanner stdin2 = new Scanner(System.in);
            if (stdin2.equals("h"))
            {
                System.out.println("Enter hourly wage: ");
                Scanner stdin3 = new Scanner(System.in);
            }
            else
            {
                System.out.println("Enter annual salary: ");
                Scanner stdin4 = new Scanner(System.in);
            }
            break;

        /*
         * case 9:
         *      System.out.println ("Please proceed."); 
         *      new InputMenu(); 
         *      break; 
         * default: 
         *      System.err.println ("Unrecognized option" ); break;
         */
        }
    }
} 
```

What i am trying to do is make this menu work so that you can type in a command then i will write methods to run depending on what command was typed in. Is switch statement the best way to do this? After they enter in the info i need it to "break" back to the main menu. And anytime during the entire program, if they enter q then the program exits. I'm not sure the best way to go about doing this.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:59:07.530

jdk 7 支持在 switch-case 语句中使用字符串。请参阅此链接以获取示例： [http](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html)
://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html 希望这个有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:51:40.960

Switch 语句是最干净的方法之一，尽管我不会争论它是否是“最好的”，因为它是主观的。但我来自 C/C++ 背景，对于其他在编写 Java 之前主要编写 C 和 C++ 的人来说，该`switch`语句是处理多个案例的自然方式。它只是更具可读性。在 C 领域的某一时刻，假设条件测试器可能是最快的条件测试器，因为它使用基于 O(1) 的算法来查找匹配情况，或者匹配默认情况（如果存在）。

但我不太确定它是否适用于 JVM/javac，因为我从未专门对它进行过性能测试。但总而言之，它在语法上是最自然和可读的。

# actionscript-3 - Starling Particle Effect

> ID：13225305
> 
> 赞同：0
> 
> 时间：2012-11-05T02:42:53.587
> 
> 标签：actionscript-3, starling-framework

I am developing an app in AS3 which utilizes the starling particle extension but I am have some trouble not looping it.

I created a new class in an objects package called particle which has the below code in it.

```
mParticleSystem = mParticleSystems.shift();
mParticleSystems.push(mParticleSystem);
mParticleSystem.emitterX = 320;
mParticleSystem.emitterY = 240;
mParticleSystem.start();
addChild(mParticleSystem);
Starling.juggler.add(mParticleSystem); 
```

I call this class in my main project by

```
particle = new Particle();
this.addChild(particle); 
```

Everything works perfectly except I am unable to stop the juggler. I have tried adding an event listener onto the mParticleSystem and call a function to remove but the event doesn't fire. Any guidance is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:13:54.677

我猜你的变量`mParticleSystem`是类的一个实例`starling.extensions.ParticleSystem`。在这种情况下，`ParticleSystem`对象在发射完所有粒子后会调度“完成”事件。您可以使用实际代码查看此[快速提示：伟大的 Lee Brimelow 的 Starling Particle Effect Disposal](http://www.leebrimelow.com/?p=3189)（更新的工作代码位于最开始）。

另一个不错的选择是，您可以`ParticleSystem`通过将参数传递给其`start()`方法来指定希望发射粒子的时间：

```
// emit particles for two seconds, then stop
mParticlesSystem.start(2.0); 
```

因此，您可以`ParticleSystem`在 2 秒后从杂耍者中移除您的。

希望这可以帮助！

# python - Interleave two lists of different length in python v. 2?

> ID：13225312
> 
> 赞同：5
> 
> 时间：2012-11-05T02:43:48.903
> 
> 标签：python, python-2.7

I am trying to write a Python function that takes two lists as arguments and interleaves them. The order of the component lists should be preserved. If the lists do not have the same length, the elements of the longer list should end up at the end of the resulting list. For example, I'd like to put this in Shell:

```
interleave(["a", "b"], [1, 2, 3, 4]) 
```

And get this back:

```
["a", 1, "b", 2, 3, 4] 
```

If you can help me I'd appreciate it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:55:15.517

这就是我的做法，使用`itertools`模块的各个部分。它适用于任意数量的可迭代对象，而不仅仅是两个：

```
from itertools import chain, izip_longest # or zip_longest in Python 3
def interleave(*iterables):

    sentinel = object()
    z = izip_longest(*iterables, fillvalue = sentinel)
    c = chain.from_iterable(z)
    f = filter(lambda x: x is not sentinel, c)

    return list(f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T03:00:09.810

你可以试试这个：

```
In [30]: from itertools import izip_longest

In [31]: l = ['a', 'b']

In [32]: l2 = [1, 2, 3, 4]

In [33]: [item for slist in izip_longest(l, l2) for item in slist if item is not None]
Out[33]: ['a', 1, 'b', 2, 3, 4] 
```

`izip_longest`将两个列表“压缩”在一起，但不是在最短列表的长度处停止，而是一直持续到最长的列表用完：

```
In [36]: list(izip_longest(l, l2))
Out[36]: [('a', 1), ('b', 2), (None, 3), (None, 4)] 
```

然后，您通过迭代压缩列表中每对中的每个项目来添加项目，省略那些值为`None`. `None`正如@Blckknight 所指出的，如果您的原始列表已经有值，这将无法正常工作。如果在您的情况下这是可能的，您可以使用 of 的`fillvalue`属性`izip_longest`来填充其他`None`内容（正如@Blckknight 在他的回答中所做的那样）。

这是上面作为函数的示例：

```
In [37]: def interleave(*iterables):
   ....:     return [item for slist in izip_longest(*iterables) for item in slist if item is not None]
   ....:

In [38]: interleave(l, l2)
Out[38]: ['a', 1, 'b', 2, 3, 4]

In [39]: interleave(l, l2, [44, 56, 77])
Out[39]: ['a', 1, 44, 'b', 2, 56, 3, 77, 4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:39:59.327

一个不是很优雅的解决方案，但仍然可能会有所帮助

```
def interleave(lista, listb):
    (tempa, tempb) = ([i for i in reversed(lista)], [i for i in reversed(listb)])
    result = []
    while tempa or tempb:
        if tempa:
            result.append(tempa.pop())
        if tempb:
            result.append(tempb.pop())

    return result 
```

或在一行中

```
 def interleave2(lista, listb):
    return reduce(lambda x,y : x + y,
                  map(lambda x: x[0] + x[1],
                      [(lista[i:i+1], listb[i:i+1])
                       for i in xrange(max(len(lista),len(listb)))])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:53:15.267

另一种解决方案是基于：*我将如何手动完成？*好吧，几乎是手动的，使用内置的`zip()`，并将较短列表的长度压缩到较长列表的尾部的结果：

```
#!python2

def interleave(lst1, lst2):
    minlen = min(len(lst1), len(lst2))        # find the length of the shorter
    tail = lst1[minlen:] + lst2[minlen:]      # get the tail
    result = []
    for t in zip(lst1, lst2):                 # use a standard zip
        result.extend(t)                      # expand tuple to two items
    return result + tail                      # result of zip() plus the tail

print interleave(["a", "b"], [1, 2, 3, 4])
print interleave([1, 2, 3, 4], ["a", "b"])
print interleave(["a", None, "b"], [1, 2, 3, None, 4]) 
```

它打印结果：

```
['a', 1, 'b', 2, 3, 4]
[1, 'a', 2, 'b', 3, 4]
['a', 1, None, 2, 'b', 3, None, 4] 
```

# asp.net-mvc-4 - 将数据传递给所有页面通用的布局

> ID：13225315
> 
> 赞同：139
> 
> 时间：2012-11-05T02:44:26.070
> 
> 标签：asp.net-mvc-4

我有一个有布局页面的网站。然而，这个布局页面有数据，所有页面模型都必须提供这样的页面标题、页面名称和我们实际所在的位置，用于执行某些操作的 HTML 助手。此外，每个页面都有自己的视图模型属性。

我怎样才能做到这一点？输入布局似乎是个坏主意，但我如何传递这些信息？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-11-05T12:03:43.670

如果您需要将相同的属性传递给每个页面，那么创建一个可供所有视图模型使用的基本视图模型将是明智的。然后，您的布局页面可以采用此基本模型。

如果此数据背后需要逻辑，则应将其放入所有控制器使用的基本控制器中。

您可以做很多事情，重要的方法是不要在多个地方重复相同的代码。

**编辑：从下面的评论更新**

这是一个简单的例子来演示这个概念。

创建一个所有视图模型都将继承的基础视图模型。

```
public abstract class ViewModelBase
{
    public string Name { get; set; }
}

public class HomeViewModel : ViewModelBase
{
} 
```

您的布局页面可以将此作为模型。

```
@model ViewModelBase
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Test</title>
    </head>
    <body>
        <header>
            Hello @Model.Name
        </header>
        <div>
            @this.RenderBody()
        </div>
    </body>
</html> 
```

最后在action方法中设置数据。

```
public class HomeController
{
    public ActionResult Index()
    {
        return this.View(new HomeViewModel { Name = "Bacon" });
    }
} 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2015-06-24T18:54:51.417

我在布局中使用 RenderAction html helper 进行剃刀。

```
@{
   Html.RenderAction("Action", "Controller");
 } 
```

我需要它来制作简单的字符串。所以我的操作返回字符串并在视图中轻松写下来。但是如果您需要复杂的数据，您可以返回 PartialViewResult 和模型。

```
 public PartialViewResult Action()
    {
        var model = someList;
        return PartialView("~/Views/Shared/_maPartialView.cshtml", model);
    } 
```

您只需将模型放在您创建的局部视图“_maPartialView.cshtml”的开头

```
@model List<WhatEverYourObjeIs> 
```

然后，您可以在带有 html 的局部视图中使用模型中的数据。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-04-03T19:01:43.290

另一种选择是创建一个单独的 LayoutModel 类，其中包含您在布局中需要的所有属性，然后将此类的一个实例填充到 ViewBag 中。我使用 Controller.OnActionExecuting 方法来填充它。然后，在布局开始时，您可以从 ViewBag 中拉回这个对象，并继续访问这个强类型对象。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2015-09-22T19:23:48.337

据推测，主要用例是为所有（或大部分）控制器操作获取视图的基本模型。

鉴于此，我使用了其中几个答案的组合，主要支持 Colin Bacon 的答案。

这仍然是控制器逻辑是正确的，因为我们正在填充视图模型以返回视图。因此，放置它的正确位置是在控制器中。

我们希望这发生在所有控制器上，因为我们将它用于布局页面。我将它用于在布局页面中呈现的部分视图。

我们还想要强类型 ViewModel 的额外好处

因此，我创建了 BaseViewModel 和 BaseController。所有 ViewModels 控制器将分别继承自 BaseViewModel 和 BaseController。

编码：

**基本控制器**

```
public class BaseController : Controller
{
    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        base.OnActionExecuted(filterContext);

        var model = filterContext.Controller.ViewData.Model as BaseViewModel;

        model.AwesomeModelProperty = "Awesome Property Value";
        model.FooterModel = this.getFooterModel();
    }

    protected FooterModel getFooterModel()
    {
        FooterModel model = new FooterModel();
        model.FooterModelProperty = "OMG Becky!!! Another Awesome Property!";
    }
} 
```

请注意从[这个 SO 帖子中获取的](https://stackoverflow.com/questions/4766156/all-viewmodels-inherit-from-baseviewmodel-can-i-set-this-up-in-onactionexecut)**OnActionExecuted**的使用

**家庭控制器**

```
public class HomeController : BaseController
{
    public ActionResult Index(string id)
    {
        HomeIndexModel model = new HomeIndexModel();

        // populate HomeIndexModel ...

        return View(model);
    }
} 
```

**基础视图模型**

```
public class BaseViewModel
{
    public string AwesomeModelProperty { get; set; }
    public FooterModel FooterModel { get; set; }
} 
```

**主页查看模型**

```
public class HomeIndexModel : BaseViewModel
{

    public string FirstName { get; set; }

    // other awesome properties
} 
```

**页脚模型**

```
public class FooterModel
{
    public string FooterModelProperty { get; set; }
} 
```

**布局.cshtml**

```
@model WebSite.Models.BaseViewModel
<!DOCTYPE html>
<html>
<head>
    < ... meta tags and styles and whatnot ... >
</head>
<body>
    <header>
        @{ Html.RenderPartial("_Nav", Model.FooterModel.FooterModelProperty);}
    </header>

    <main>
        <div class="container">
            @RenderBody()
        </div>

        @{ Html.RenderPartial("_AnotherPartial", Model); }
        @{ Html.RenderPartial("_Contact"); }
    </main>

    <footer>
        @{ Html.RenderPartial("_Footer", Model.FooterModel); }
    </footer>

    < ... render scripts ... >

    @RenderSection("scripts", required: false)
</body>
</html> 
```

**_Nav.cshtml**

```
@model string
<nav>
    <ul>
        <li>
            <a href="@Model" target="_blank">Mind Blown!</a>
        </li>
    </ul>
</nav> 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-05-13T22:33:24.373

还有另一种处理方式。从架构的角度来看，这可能不是最干净的方式，但它避免了与其他答案相关的很多痛苦。只需在 Razor 布局中注入服务，然后调用获取必要数据的方法：

```
@inject IService myService 
```

然后在布局视图中：

```
@if (await myService.GetBoolValue()) {
   // Good to go...
} 
```

同样，在架构方面并不干净（显然服务不应该直接注入到视图中），但它可以完成工作。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-07-25T04:31:54.897

您不必弄乱操作或更改模型，只需使用基本控制器并从布局视图上下文中转换现有控制器。

使用所需的公共数据（标题/页面/位置等）和操作初始化创建一个基本控制器...

```
public abstract class _BaseController:Controller {
    public Int32 MyCommonValue { get; private set; }

    protected override void OnActionExecuting(ActionExecutingContext filterContext) {

        MyCommonValue = 12345;

        base.OnActionExecuting(filterContext);
    }
} 
```

确保每个控制器都使用基本控制器...

```
public class UserController:_BaseController {... 
```

从页面中的视图上下文中投射现有的基本控制器`_Layout.cshml`...

```
@{
    var myController = (_BaseController)ViewContext.Controller;
} 
```

现在您可以从布局页面引用基本控制器中的值。

```
@myController.MyCommonValue 
```

**更新**

您还可以创建一个允许您使用`this`.

```
//Allows typed "this.Controller()." in cshtml files
public static class MyPageExtensions {
    public static _BaseController Controller(this WebViewPage page) => Controller<_BaseController>(page);
    public static T Controller<T>(this WebViewPage page) where T : _BaseController => (T)page.ViewContext.Controller;
} 
```

然后你只需要记住`this.Controller()`在需要控制器时使用。

```
@{
    var myController = this.Controller(); //_BaseController
} 
```

`_BaseController`或继承自...的特定控制器

```
@{
    var myController = this.Controller<MyControllerType>();
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-31T17:38:35.277

如果您想传递整个模型，请在布局中像这样：

```
@model ViewAsModelBase
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8"/>
    <link href="/img/phytech_icon.ico" rel="shortcut icon" type="image/x-icon" />
    <title>@ViewBag.Title</title>
    @RenderSection("styles", required: false)    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    @RenderSection("scripts", required: false)
    @RenderSection("head", required: false)
</head>
<body>
    @Html.Action("_Header","Controller", new {model = Model})
    <section id="content">
        @RenderBody()
    </section>      
    @RenderSection("footer", required: false)
</body>
</html> 
```

并将其添加到控制器中：

```
public ActionResult _Header(ViewAsModelBase model) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-02-01T15:38:01.990

我认为这些答案中的任何一个对于大型企业级应用程序都不够灵活。我不喜欢过度使用 ViewBag，但在这种情况下，为了灵活性，我会破例。这就是我要做的...

您应该在所有控制器上都有一个基本控制器。在您的基本控制器中添加您的布局数据 OnActionExecuting（或 OnActionExecuted，如果您想推迟它）...

```
public class BaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext     
        filterContext)
    {
        ViewBag.LayoutViewModel = MyLayoutViewModel;
    }
}

public class HomeController : BaseController
{
    public ActionResult Index()
    {
        return View(homeModel);
    }
} 
```

然后在您的 _Layout.cshtml 中从 ViewBag 中拉出您的 ViewModel ...

```
@{
  LayoutViewModel model = (LayoutViewModel)ViewBag.LayoutViewModel;
}

<h1>@model.Title</h1> 
```

或者...

```
<h1>@ViewBag.LayoutViewModel.Title</h1> 
```

这样做不会干扰页面控制器或视图模型的编码。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-05-04T18:59:33.613

创建一个代表布局视图模型的基础视图是一种糟糕的方法。想象一下，您想要一个模型来表示布局中定义的导航。你会`CustomersViewModel : LayoutNavigationViewModel`吗？为什么？为什么要通过解决方案中的每个视图模型传递导航模型数据？

布局视图模型应该是专用的，它自己不应该强迫其余的视图模型依赖它。

相反，您可以在`_Layout.cshtml`文件中执行此操作：

```
@{ var model = DependencyResolver.Current.GetService<MyNamespace.LayoutViewModel>(); } 
```

最重要的是，我们不需要这样做`new LayoutViewModel()`，我们将获得`LayoutViewModel`为我们解决的所有依赖项。

例如

```
public class LayoutViewModel
{
    private readonly DataContext dataContext;
    private readonly ApplicationUserManager userManager;

    public LayoutViewModel(DataContext dataContext, ApplicationUserManager userManager)
    {
    }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-03-08T14:12:19.613

其他答案几乎涵盖了有关如何将模型传递到布局页面的所有内容。但是我找到了一种方法，您可以使用它动态地将变量传递到布局页面，而无需在布局中使用任何模型或局部视图。让我们说你有这个模型 -

```
public class SubLocationsViewModel
{
    public string city { get; set; }
    public string state { get; set; }
} 
```

你想动态地获取城市和州。例如

在您的 index.cshtml 中，您可以将这两个变量放入 ViewBag

```
@model  MyProject.Models.ViewModel.SubLocationsViewModel
@{
    ViewBag.City = Model.city;
    ViewBag.State = Model.state;
} 
```

然后在你的 layout.cshtml 中你可以访问那些 viewbag 变量

```
<div class="text-wrap">
    <div class="heading">@ViewBag.City @ViewBag.State</div>
</div> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-07T04:27:31.567

您还可以使用[RenderSection](https://stackoverflow.com/questions/23327578/what-is-rendersection-in-asp-net-mvc)，它可以帮助您将`Model`数据注入`_Layout`视图。

您可以注入`View Model`数据`Json`、、、、`Script`等`CSS``HTML`

`Json`在这个例子中，我从我的视图注入`Index`到`Layout`视图。

**索引.chtml**

```
@section commonLayoutData{

    <script>

        var products = @Html.Raw(Json.Encode(Model.ToList()));

    </script>

    } 
```

**_Layout.cshtml**

```
@RenderSection("commonLayoutData", false) 
```

这消除了创建单独的 Base 的需要`View Model`。

希望能帮助某人。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-16T07:19:13.670

为什么没有人建议 ViewData 的扩展方法？

**选项1**

在我看来，到目前为止，该问题的侵入性最小和最简单的解决方案。没有硬编码的字符串。没有强加限制。没有魔法编码。没有复杂的代码。

```
public static class ViewDataExtensions
{
    private const string TitleData = "Title";
    public static void SetTitle<T>(this ViewDataDictionary<T> viewData, string value) => viewData[TitleData] = value;
    public static string GetTitle<T>(this ViewDataDictionary<T> viewData) => (string)viewData[TitleData] ?? "";
} 
```

在页面中设置数据

```
ViewData.SetTitle("abc"); 
```

**选项 #2**

另一种选择，使字段声明更容易。

```
public static class ViewDataExtensions
{
    public static ViewDataField<string, V> Title<V>(this ViewDataDictionary<V> viewData) => new ViewDataField<string, V>(viewData, "Title", "");
}

public class ViewDataField<T,V>
{
    private readonly ViewDataDictionary<V> _viewData;
    private readonly string _field;
    private readonly T _defaultValue;

    public ViewDataField(ViewDataDictionary<V> viewData, string field, T defaultValue)
    {
        _viewData = viewData;
        _field = field;
        _defaultValue = defaultValue;
    }

    public T Value {
        get => (T)(_viewData[_field] ?? _defaultValue);
        set => _viewData[_field] = value;
    }
} 
```

在页面中设置数据。声明比第一个选项更容易，但使用语法稍长。

```
ViewData.Title().Value = "abc"; 
```

**选项#3**

然后可以将其与返回包含所有与布局相关的字段及其默认值的单个对象相结合。

```
public static class ViewDataExtensions
{
    private const string LayoutField = "Layout";
    public static LayoutData Layout<T>(this ViewDataDictionary<T> viewData) => 
        (LayoutData)(viewData[LayoutField] ?? (viewData[LayoutField] = new LayoutData()));
}

public class LayoutData
{
    public string Title { get; set; } = "";
} 
```

在页面中设置数据

```
var layout = ViewData.Layout();
layout.Title = "abc"; 
```

第三种选择有几个好处，我认为在大多数情况下是最好的选择：

*   字段和默认值的最简单声明。

*   设置多个字段时最简单的使用语法。

*   允许在 ViewData 中设置各种数据（例如布局、标题、导航）。

*   允许 LayoutData 类中的其他代码和逻辑。

PS不要忘记在_ViewImports.cshtml中添加ViewDataExtensions的命名空间

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-25T07:55:26.417

您可以在 App_Code 文件夹中创建一个 razor 文件，然后从您的视图页面访问它。

项目>存储库/IdentityRepository.cs

```
namespace Infrastructure.Repository
{
    public class IdentityRepository : IIdentityRepository
    {
        private readonly ISystemSettings _systemSettings;
        private readonly ISessionDataManager _sessionDataManager;

        public IdentityRepository(
            ISystemSettings systemSettings
            )
        {
            _systemSettings = systemSettings;
        }

        public string GetCurrentUserName()
        {
            return HttpContext.Current.User.Identity.Name;
        }
    }
} 
```

项目>App_Code/IdentityRepositoryViewFunctions.cshtml：

```
@using System.Web.Mvc
@using Infrastructure.Repository
@functions
{
    public static IIdentityRepository IdentityRepositoryInstance
    {
        get { return DependencyResolver.Current.GetService<IIdentityRepository>(); }
    }

    public static string GetCurrentUserName
    {
        get
        {
            var identityRepo = IdentityRepositoryInstance;
            if (identityRepo != null)
            {
                return identityRepo.GetCurrentUserName();
            }
            return null;
        }
    }
} 
```

项目>视图/共享/_Layout.cshtml（或任何其他 .cshtml 文件）

```
<div>
    @IdentityRepositoryViewFunctions.GetCurrentUserName
</div> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-14T13:05:48.997

在 .NET Core 中，您可以使用视图组件来执行此操作。

[https://docs.microsoft.com/en-us/aspnet/core/mvc/views/view-components?view=aspnetcore-5.0](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/view-components?view=aspnetcore-5.0)

从上面的链接中，添加一个从 ViewComponent 继承的类

```
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using ViewComponentSample.Models;

namespace ViewComponentSample.ViewComponents
{
    public class PriorityListViewComponent : ViewComponent
    {
        private readonly ToDoContext db;

        public PriorityListViewComponent(ToDoContext context)
        {
            db = context;
        }

        public async Task<IViewComponentResult> InvokeAsync(
        int maxPriority, bool isDone)
        {
            var items = await GetItemsAsync(maxPriority, isDone);
            return View(items);
        }
        private Task<List<TodoItem>> GetItemsAsync(int maxPriority, bool isDone)
        {
            return db.ToDo.Where(x => x.IsDone == isDone &&
                                 x.Priority <= maxPriority).ToListAsync();
        }
    }
} 
```

然后在你看来（`_layout`在我的情况下）

```
@await Component.InvokeAsync("PriorityList", new { maxPriority = 4, isDone = true }) 
```

如果需要视图，请在`~/Views/Shared/Components/<Component Name>/Default.cshtml`. 您需要创建文件夹`Components`，然后在其中使用您的组件名称创建一个文件夹。在上面的例子中，`PriorityList`。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-04T07:25:12.737

使用静态字符串（如页面标题、页面名称和位置等）的最佳方式是通过 ViewData 定义。**只需在ViewStart.cshtml**中定义所需的 ViewData

 **```
@{
    Layout = "_Layout";
    ViewData["Title"] = "Title";
    ViewData["Address"] = "1425 Lane, Skardu,<br> Pakistan";
} 
```

并在需要时致电

```
<div class="rn-info-content">
     <h2 class="rn-contact-title">Address</h2>
         <address>
             @Html.Raw(ViewData["Address"].ToString())
         </address>
</div> 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-02-02T02:49:06.623

而不是经历这个，你总是可以使用另一种也很快的方法

在共享目录中创建一个新的局部视图，并将布局中的局部视图称为

```
@Html.Partial("MyPartialView") 
```

在您的局部视图中，您可以调用您的数据库并执行您想做的任何事情

```
@{
    IEnumerable<HOXAT.Models.CourseCategory> categories = new HOXAT.Models.HOXATEntities().CourseCategories;
}

<div>
//do what ever here
</div> 
```

假设您已经添加了实体框架数据库

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-06-28T16:48:07.703

令人难以置信的是，这里没有人这么说。通过基本控制器传递视图模型是一团糟。我们正在使用**用户声明**将信息传递到布局页面（例如，用于在导航栏上显示用户数据）。还有一个优势。数据通过 cookie 存储，因此无需通过部分检索每个请求中的数据。只需做一些谷歌搜索“asp 网络身份声明”。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-06-02T09:01:04.647

我所做的很简单，而且很有效

在任何控制器中声明静态属性，或者如果您愿意，可以使用静态值创建一个数据类：

```
public static username = "Admin";
public static UserType = "Administrator"; 
```

这些值可以由控制器根据操作进行更新。稍后您可以在 _Layout 中使用它们

**在 _layout.cshtml**

```
@project_name.Controllers.HomeController.username
@project_name.Controllers.HomeController.UserType 
```

* * *

## 回答 #19

> 赞同：-7
> 
> 时间：2016-06-24T11:02:31.483

你可以这样使用：

```
 @{ 
    ApplicationDbContext db = new ApplicationDbContext();
    IEnumerable<YourModel> bd_recent = db.YourModel.Where(m => m.Pin == true).OrderByDescending(m=>m.ID).Select(m => m);
}
<div class="col-md-12">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="baner1">
                <h3 class="bb-hred">Recent Posts</h3>
                @foreach(var item in bd_recent)
                {
                    <a href="/BaiDangs/BaiDangChiTiet/@item.ID">@item.Name</a>
                }
            </div>
        </div>
    </div>
</div> 
```**

# visual-studio - 将 ReSharper 设置为 vs2010 后如何将其设置为 vs2012

> ID：13225321
> 
> 赞同：13
> 
> 时间：2012-11-05T02:45:07.320
> 
> 标签：visual-studio, resharper

我已将 ReSharper 设置为 vs2010。但是，我现在设置了 vs2012，发现在 vs2012 中没有 ReSharper 插件。如何将 ReSharper 注册到我的 IDE？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T08:22:25.410

只有 Resharper 7 或更高版本才能与 Visual Studio 2012 一起使用，如果您有此版本，则只需重新安装它，它就会显示出来。早期版本将无法使用。请参阅有关 resharper 和 VS 2012 的其他问题[。](https://stackoverflow.com/questions/12892764/does-reharper-6-1-work-with-visual-studio-2012)

# lua - Corona SDK Lua-与硬币碰撞

> ID：13225323
> 
> 赞同：0
> 
> 时间：2012-11-05T02:46:03.093
> 
> 标签：lua, coronasdk

我想让一个精灵图像与硬币发生碰撞。硬币是一个图像，它总是因为这段代码而移动：

```
local tPrevious = system.getTimer();
local function move(event)

    local tDelta = event.time - tPrevious;
    tPrevious = event.time;

    local xOffset = (0.3 * tDelta );

    grass.x = grass.x - xOffset;
    grass2.x = grass2.x - xOffset;
    coin.x = coin.x - xOffset;
    if (grass.x + grass.contentWidth) < 0 then
        grass:translate( 480 * 2, 0);
    end
    if (grass2.x + grass2.contentWidth) < 0 then
        grass2:translate( 480 * 2, 0);
    end

    if (coin.x + coin.contentWidth) < 0 then
        coin:translate( 480 * 2, 0);
        coinRect.x = coin.x
    end

    local i;

end 
```

有谁知道我如何与硬币图像发生碰撞？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:52:27.513

像这样向硬币添加碰撞事件监听器，

```
local function onLocalCollision( self, event )
if ( event.phase == "began" ) then

       print("on collision began")

elseif ( event.phase == "ended" ) then

    print( "on collision ended")

end
end
coin:addEventListener( "collision", onLocalCollision) 
```

如果你想要与硬币和精灵对象的特定碰撞，你应该使用碰撞过滤器。

# java - Spring中如何使用List显示模型图的对象？

> ID：13225325
> 
> 赞同：0
> 
> 时间：2012-11-05T02:46:20.673
> 
> 标签：java, spring, list

对于我使用的模棱两可或糟糕的术语，我提前道歉。我正在尝试使用 List 来转换模型映射的对象，然后在相应的 jsp 中显示输出，但我无法理解我做错了什么。“Collections.List”返回错误“找不到符号”，尽管我已经导入了 java.util.List，我认为它可以从 Collections 中调用。

我感谢任何帮助，我愿意提供任何必要的澄清。

```
@RequestMapping(
value  = "/updateProducts.htm",
method = RequestMethod.GET
)
public String list(ModelMap modelMap) {

    List<Product> products;
        products = Collections.List(modelMap.values());

modelMap.addAttribute("updateProductsForm", new UpdateProductsForm());
modelMap.addAttribute("products", products);

public String list(ModelMap modelMap) { 
```

我听从了你的建议。但是现在我在“products.elements”中的“elements”以及“modelMap.values”中仍然出现错误。我添加了 java.util.Collections 以及 java.util.Enumeration ..

```
List<Product> products;
    products = Collections.list(modelMap.values());

for (Enumeration<Product> e = products.elements(); e.hasMoreElements();) {
            System.out.println(e.nextElement());
        }

modelMap.addAttribute("updateProductsForm", new UpdateProductsForm());
modelMap.addAttribute("products", products); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:35:25.540

ModelMap.values() 返回一个 Collection 对象，将集合转换为 List 或者使用迭代器并将集合的元素添加到列表中，或者使用如下代码。

```
ArrayList<Product> products = new ArrayList<Product>(modelMap.values()); 
```

现在我们得到了可以添加到 modelAndView 并且可以用于迭代 jsp 的产品列表。

# sql - SQL Server 列映射

> ID：13225326
> 
> 赞同：0
> 
> 时间：2012-11-05T02:46:38.823
> 
> 标签：sql, sql-server

我有三个我想处理的场景，我正在做一些重新映射。

场景 #1 我有表 A

> A 列、B 列
> 1、NULL
> 2、NULL
> 3、NULL
> 4、NULL
> 5、NULL
> 6、NULL

如何更新 B 列，以便从 A 列的下一个值开始

> A 列、B 列
> 1、7
> 2、8
> 3、9
> 4、10
> 5、11
> 6、12

场景 #2 我有表 A

> A 列、B 列
> 1、NULL
> 1、NULL
> 2、NULL
> 2、NULL
> 3、NULL
> 3、NULL
> 3、NULL

如何更新 B 列，以便我从 A 列的下一个值开始，但确保我只像这样将值更新为一个组

> A 列、B 列
> 1、4
> 1、4
> 2、5
> 2、5
> 3、6
> 3、6
> 3、6

场景 #3 我的表 A 包含 A 列中的空白

> A 列、B 列
> 1、NULL
> 1、NULL
> 4、NULL
> 4、NULL
> 6、NULL
> 6、NULL
> 6、NULL

如何更新 B 列，以便我从 A 列的下一个值开始，但确保我只像这样将值更新为一个组

> A 列、B 列
> 1、7
> 1、7
> 4、8
> 4、8
> 6、9
> 6、9
> 6、9

我可以在一个语句中处理所有这三种情况吗？如果是这样，怎么做？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:17:48.543

这对我来说听起来像是家庭作业，所以我会给你一些观察。

1.  在所有情况下，您都希望从 max(columnA)+1 开始枚举
2.  `select *, dense_rank() over (order by columnA)`所有情况下的结果是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:32:01.713

为您提供所需输出的查询

```
 select A, maxA + row_number() over (order by A) B
      from test
cross join (select max(a) maxA from test) M;

    select A, maxA + dense_rank() over (order by A) B
      from test
cross join (select max(a) maxA from test) M; 
```

参考：

1.  [DENSE_RANK()](http://msdn.microsoft.com/en-us/library/ms173825.aspx) - 返回一个没有差距的排名，允许在同一排名上重复
2.  [ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx) - 返回一个没有差距的排名，任意平局相等的值

要将 SELECT 转换为 UPDATE，第一个看起来像这样

```
;with tmp as (
    select A, maxA + row_number() over (order by A) newB, B
      from test
cross join (select max(a) maxA from test) M
)
update tmp set B = newB; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:33:28.980

试试这个：

```
UPDATE t1
SET t1.ColumnB = t2.ColumnB
FROM @TableA t1
INNER JOIN 
(
   SELECT 
     ColumnA, 
     ColumnB = DENSE_RANK() OVER(ORDER BY ColumnA) 
               + 
               (SELECT MAX(columnA) FROM @tableA) 
   FROM @tableA
) t2 ON t1.ColumnA = t2.ColumnA; 
```

以下是三种场景的演示：

*   [**SQL Server 列映射使用相同的 sql 语句 - 场景#1**](https://data.stackexchange.com/stackoverflow/query/84271/sql-server-column-mapping-with-the-same-sql-statement-scenario1)。

*   [**SQL Server 列映射使用相同的 sql 语句 - 场景#2**](https://data.stackexchange.com/stackoverflow/query/84272/sql-server-column-mapping-with-the-same-sql-statement-scenario2)。

*   [**使用相同 sql 语句的 SQL Server 列映射 - 场景#3**](https://data.stackexchange.com/stackoverflow/query/84273/sql-server-column-mapping-with-the-same-sql-statement-scenario3)

# java - 从 WCF 和 Biztalk 中的 WSDL 导入键/值 complexType 定义

> ID：13225327
> 
> 赞同：4
> 
> 时间：2012-11-05T02:46:45.950
> 
> 标签：java, wcf, wsdl, biztalk

我已经为此苦苦挣扎了好几天，不知道如何解决它。基本上我有以下 WSDL 服务定义：

```
<?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --><!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --><definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://sample.org/schemas/2012" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://sample.org/schemas/2012" name="SampleServiceImplService">
<types>
<xsd:schema>
<xsd:import namespace="http://sample.org/schemas/2012" schemaLocation="http://localhost:8080/sampleServices_war_exploded/sample?xsd=1"/>
</xsd:schema>
</types>
<message name="ExecuteSample">
<part name="parameters" element="tns:ExecuteSample"/>
</message>
<message name="ExecuteSampleResponse">
<part name="parameters" element="tns:ExecuteSampleResponse"/>
</message>
<message name="SampleException">
<part name="fault" element="tns:SampleException"/>
</message>
<portType name="SampleService">
<operation name="ExecuteSample">
<input wsam:Action="http://sample.org/schemas/2012/SampleService/ExecuteSampleRequest" message="tns:ExecuteSample"/>
<output wsam:Action="http://sample.org/schemas/2012/SampleService/ExecuteSampleResponse" message="tns:ExecuteSampleResponse"/>
<fault message="tns:SampleException" name="SampleException" wsam:Action="http://sample.org/schemas/2012/SampleService/ExecuteSample/Fault/SampleException"/>
</operation>
</portType>
<binding name="SampleServiceImplPortBinding" type="tns:SampleService">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="ExecuteSample">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
<fault name="SampleException">
<soap:fault name="SampleException" use="literal"/>
</fault>
</operation>
</binding>
<service name="SampleServiceImplService">
<port name="SampleServiceImplPort" binding="tns:SampleServiceImplPortBinding">
<soap:address location="http://localhost:8080/sampleServices_war_exploded/sample"/>
</port>
</service>
</definitions> 
```

附带以下 XSD 文件定义：

```
<?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --><xs:schema xmlns:tns="http://sample.org/schemas/2012" xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.0" targetNamespace="http://sample.org/schemas/2012">
<xs:element name="ExecuteSample" type="tns:ExecuteSample"/>
<xs:element name="ExecuteSampleResponse" type="tns:ExecuteSampleResponse"/>
<xs:element name="SampleException" nillable="true" type="tns:faultInfo"/>
<xs:complexType name="ExecuteSample">
<xs:sequence>
<xs:element name="name" type="xs:string" minOccurs="0"/>
<xs:element name="values">
<xs:complexType>
<xs:sequence>
<xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
<xs:complexType>
<xs:sequence>
<xs:element name="key" minOccurs="0" type="xs:string"/>
<xs:element name="value" minOccurs="0" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:sequence>
</xs:complexType>
<xs:complexType name="ExecuteSampleResponse">
<xs:sequence/>
</xs:complexType>
<xs:complexType name="faultInfo">
<xs:sequence/>
</xs:complexType>
</xs:schema> 
```

好的，文档看起来不错，我们定义了一个名为 ExecuteSample（请求类型）的 complexType，它包含两个成员，名称和值，最后一个是另一个复杂类型，其中包含一个名为 'entry' 的条目，其中包含键和值。

这看起来像字典，实际上是字典。它甚至使用“建议”的方式来公开字典，唯一的区别是包含在“入口”参数中。

好吧，你猜怎么着，WCF svcutil 两个 biztalk 都不能识别 WSDL。SVCUtil 和 Visual Studio 失败并出现一个非常愚蠢的错误，告诉我类似：

```
Warning 1   Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Object reference not set to an instance of an object.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://sample.org/schemas/2012']/wsdl:portType[@name='SampleService']   C:\src\biztalk\ConsoleApplication6\ConsoleApplication6\Service References\ServiceReference1\Reference.svcmap    1   1   ConsoleApplication6 
```

biztalk WSDL 导入向导失败，没有任何错误消息，只是告诉我出了点问题......

我已经尝试了一切，并在网络上查看了所有可能的内容，没有任何东西真正弹出......我很绝望，不知道到底发生了什么，一切看起来都很好，但没有工作......

奇怪……有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:32:21.150

您需要将 targetNamespace 添加到 wsdl 的 types 部分中的 schema 标记。

```
<types>
    <xsd:schema targetNamepace="http://blah.org">
    ...
    </xsd:schema>
</types> 
```

# ios - Objective c iPhone重定向到错误页面以获取未捕获的异常

> ID：13225328
> 
> 赞同：5
> 
> 时间：2012-11-05T02:46:46.570
> 
> 标签：ios, objective-c, iphone, exception, error-handling

我有一个类，如果存在以下情况，我想将用户重定向到错误页面：未捕获的异常、捕获的异常或自定义异常。我还想关闭一封错误电子邮件。（以便我收到通知）。

我无法访问此类中的当前视图控制器（在未捕获异常的情况下）。因为它是由委托侦听器触发的`onUncaughtException(NSException* exception)`。

如何访问当前的视图控制器，或者如果失败，以模式将用户重定向到错误视图控制器？

```
#import "ErrorHelper.h"
#import "ErrorViewController.h"
#import "Global.h"
#import "AppDelegate.h"

@implementation ErrorHelper

+(void) handleUncaughtError:(NSException*) exception
{
    NSLog(@"Uncaught exception occurred!");

    [self sendErrorEmailIfAppropriate:exception :nil];
    [self redirectToErrorPage];
}

+(void) handleCaughtError:(NSException*) exception
{
    NSLog(@"Error caught!!");

    [self sendErrorEmailIfAppropriate:exception :nil];
    [self redirectToErrorPage];
}

+(void) handleCaughtCustomError:(NSString*) ref :(NSString*) details
{
    NSLog(@"Custom error caught!!");
    //can do conditional branching on @ref, to do appropriate action.

    [self sendErrorEmailIfAppropriate:nil :details];
    [self redirectToErrorPage];

}

+(void) sendErrorEmailIfAppropriate:(NSException*) exception :(NSString*)details
{
    if([[Global get] isInTestMode] || [[Global get] isInLiveMode]) {
        bool isCustomException = details != nil;

    }
}

+(void) redirectToErrorPage
{
    /*Try redirect user to error page
    E.G:
     -There's been an error, our App Dev team will try and resolve the issue for you
     -Regards -Dev team

    */
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

} 
```

@结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:12:53.470

您应该假设 Cocoa 异常是不可恢复的。不要扔掉它们，不要将它们添加到您的程序中。（在 C++ 中使用异常很好，尽管在这方面混合 C++ 和 ObjC 可能是不安全的，因为 ObjC 并不是为这种控制流或展开时的清理而设计的）。

有一些奇怪的 ObjC API 会抛出异常，您可以从中恢复。如果可能，请使用不会抛出的替代方案。如果您**必须**在这种情况下尝试/捕获，那么您应该*使您的处理程序尽可能位于调用站点的本地*。假设未捕获的 ObjC 异常或被高级处理程序捕获的异常是不可恢复的。

现在，因为您捕获的异常是调用站点的本地异常，您可以轻松添加逻辑以将错误传播到视图控制器或返回到事件循环（例如 AlertView）。是的，在这种情况下，您可能会引入一些错误输出参数或返回值。

电子邮件是一个单独的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:57:43.483

如果你真的想实现这一点，你可以尝试类似的东西，

1 - 将当前屏幕对象存储在 viewDidAppear 方法中的 UIViewController 对象（应用程序级别）中。

2 - 这将为您提供应用程序中的当前屏幕。

（我没有测试过这个，但我想应该可以）

3 - 发送通知（bcoz 现在你有当前的屏幕实例）。

4 - 显示您的错误页面

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:22:43.423

在 main.m 类中使用 -

```
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
int retVal = -1;
@try {
    retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
@catch (NSException* exception) {
    NSLog(@"Uncaught exception: %@", exception.description);
    --Send email here or Open ur link or Wat ever action u'd like to do or Use the Error helper class of urs HERE--
}
[pool release];
return retVal; 
```

这个想法是，由于任何对象导致的所有崩溃最终都将通过 main.m 类，这是在整个 App 生命周期中查看崩溃的最佳位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T10:35:33.937

有关如何安装全局异常处理程序的信息，请参阅[在 iPhone 顶级异常处理程序中显示警报](https://stackoverflow.com/questions/1787254/showing-an-alert-in-an-iphone-top-level-exception-handler).. 但正如贾斯汀所说，异常应被视为“致命”——您甚至可以打开一个 url/显示一个 webview

但之后不要尝试恢复正常操作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T08:13:39.327

我试过这个：[exception_handler](https://stackoverflow.com/questions/1787254/showing-an-alert-in-an-iphone-top-level-exception-handler)它的工作！只需编写您的电子邮件发送代码而不是警报视图。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{        
    [window makeKeyAndVisible];

    NSSetUncaughtExceptionHandler(&exceptionHandler);

    return YES;
}

BOOL exceptionAlertDismissed = FALSE;
void exceptionHandler(NSException *exception)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"App Committed Suicide"
        message:@"Oh dear, that wasn't supposed to happen. You will have to restart the application... sorry!"
        delegate:[[UIApplication sharedApplication] delegate] cancelButtonTitle:nil otherButtonTitles:@"That's ok!", @"Erm, bye...", nil];
    [alert show];
    [alert release];

    while (exceptionAlertDismissed == FALSE)
    {
        [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.1]];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    exceptionAlertDismissed = TRUE;
} 
```

在界面中，

```
@interface ...appDelegate : NSObject <UIApplicationDelegate, UIAlertViewDelegate>
...
void exceptionHandler(NSException *exception); 
```

# objective-c - UITableViewController 的表格调整大小

> ID：13225330
> 
> 赞同：1
> 
> 时间：2012-11-05T02:47:04.643
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个 UITableViewController，我需要垂直调整表格的大小。

**我不能使用带有表的 UIViewController**。

有方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:17:48.900

这只有在您的`UITableViewController`视图被手动添加到另一个超级视图时才有可能。但是，如果您计划在导航控制器中使用表格视图或作为模式表，您无法控制表格视图的大小。

要完全控制表视图大小：

1.  `UIViewController`使用`UITableView`插座和资源文件让您拥有自己的子类。
2.  在其内容之上放置一个 UITableView`view`并相应地调整它的大小。
3.  使您的视图控制器实现`UITableViewDataSource`和`UITableViewDelegate`协议。
4.  连接插座。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:13:35.607

而不是使用 a ，使用带有属性`UITableViewController`的标准可能更容易。`UIViewController``UITableView`

例如：

```
@interface ContentsPopover : UIViewController <UITableViewDelegate, UITableViewDataSource>
//...
@property (nonatomic, strong) UITableView *theTableView;
//...
@end 
```

这样，`UIViewController`您可以在您的内部拥有以下代码（可能在 viewDidLoad 中）：

```
theTableView = [[UITableView alloc] initWithFrame:/*...*/ style:UITableViewStylePlain];

theTableView.delegate = self;
theTableView.dataSource = self;
theTableView.scrollEnabled = YES;

[self.view addSubview:theTableView];

// You can now change theTableView's frame property as needed 
```

当 a`UITableViewController`不是您要查找的内容时，这很方便。

# php - 如何使用 php mysql 检索行值

> ID：13225332
> 
> 赞同：1
> 
> 时间：2012-11-05T02:47:28.403
> 
> 标签：php, mysql

源代码：

```
$display = 1004;
$result1 = mysql_query("SELECT id, username FROM users where parentid=$diplay");
$resrow = mysql_fetch_row($result1); 
$g = $resrow[0]; 
$g1 = $resrow[1]; 
$g2 = $resrow[3]; -error not display
$g3 = $resrow[4];
$g4 = $resrow[5];

echo "ID: $g";
echo "ID: $g2";
echo "ID: $g3";
echo "ID: $g4"; 
```

我必须显示 1005、1007、1008 但我只能检索 $g 值：

答：1004丹尼尔

我如何显示其他值 1007,1008

桌子

```
id           ----name  -----    parentid
-----------------------------------
1004            daniel         1003
1005            peter          1004
1007            michael        1004
1008            sam            1004 
```

答：

```
 $g
        1004
     /        \
    g2         g3   
   1005       1007 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:51:05.383

从您的 mysql 查询中，您只能获取列`id`和`username`. 您需要修改 sql 以包含更多列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T02:56:27.300

您只在查询中选择 id 和用户名，这可能返回了这样的数组

```
array(
    'id'=> 1005
    'username'=> 'name'
) 
```

如果 1005,1007,1008 是 1004 的孩子。你可能想做

```
while($resrow = mysql_fetch_array( $result1 )){
    echo "ID:". $resrow['id'];
    echo "Name:". $resrow['username'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:53:47.340

您将*rows*与*columns*混淆。在这个数据库上：

```
users
id    | name    |  parentid
------+---------+----------
1004  | daniel  |  1003
1005  | peter   |  1004
1007  | michael |  1004
1008  | sam     |  1004 
```

该查询 `SELECT id, name FROM users where parentid=1004`将返回第 1005、1007 和 1008 行。

`mysql_fetch_row()`一次只取一行。
那是**跨越**（`id`和`name`），**而不是向下**（几个`id`s）。

要获取所有匹配的 ID 值的列表，您需要遍历*所有*行：

```
$parentid = 1004;
$result = mysql_query( "SELECT `id` FROM `users` WHERE `parentid`=$parentid" );
while( $row = mysql_fetch_row( $result ) ){ $IDs[] = $row[0]; }
// $IDs is now an array holding each id from the resultset.
// It will look something like:
/*
array(3) {
 [0]=>
    int(1005)
 [1]=>
    int(1007)
 [2]=>
    int(1008)
}
*/ 
```

如上所述，**不要`ext/mysql`用于新工作**。我在这里使用它只是因为这就是您提出原始问题的方式。您需要更新代码并使用`ext/mysqli`or`PDO`代替。

# android - 使用 Monkeyrunner 时防止退出正在测试的应用程序

> ID：13225335
> 
> 赞同：2
> 
> 时间：2012-11-05T02:48:31.343
> 
> 标签：android, monkeyrunner

我已经为 Monkeyrunner 实现了一些算法来在正在测试的应用程序上生成随机事件，但是这些随机事件有时会触发应用程序退出，从而使以下事件在测试中毫无意义。当 Monkeyrunner 在其上生成和执行随机事件时，有没有办法阻止该应用程序退出？（继续定期从 Monkeyrunner 启动相同的应用程序？）

谢谢。

# java - 比较两个不同类型的数组，在同一个“槽”Java 中打印元素

> ID：13225340
> 
> 赞同：3
> 
> 时间：2012-11-05T02:50:38.000
> 
> 标签：java, arrays, comparison, user-input

所以我正在根据用户输入比较两个数组。一个数组是 int 数组，另一个是字符串。我想要做的是获取用户输入，将输入与第一个 int 数组进行比较，然后计算字符串数组相同位置内的元素。然后根据第二个数组打印出我的结果。像下面我会输入 12 然后得到 bob 或 21 然后得到 andrea。下面的示例代码。我拥有比较第二个数组的所有内容（我有用户输入，在 int 数组中找到它 - 循环，但我无法弄清楚与第二个数组的比较）

```
int[] number = {12, 15, 19, 21}
String[] character = {bob, sally, james, andrea} 
```

我是否只需比较两个数组然后将其保存在一个新变量中：

```
number = character 
```

然后打印新的变量值？

谢谢您的帮助。我一直在到处寻找这个。主要花一天半的时间在这个网站上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:59:59.263

你可以在`Map`这里使用。

实例化并填充地图：

```
Map<Integer, String> numberToNameMap = new HashMap<Integer, String>();
numberToNameMap.put(12, "bob");
//... 
```

然后进行查找：

```
String name = numberToNameMap.get(inputNumber); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:58:11.830

您无需*将*任何内容与第二个数组进行比较：一旦您在第一个数组中获得了匹配元素的索引，只需将该索引用于第二个数组即可。这里的所有都是它的！

```
int[] number = {12, 15, 19, 21};
String[] character = {"bob", "sally", "james", "andrea"};
int userInput = ... // <<== You know how to do all that 
for (int i = 0 ; i != number.length ; i++) {
    if (number[i] == userInput) {
        // Element at index i is matching:
        System.out.println(character[i]);
        break;
    }
} 
```

# javascript - 无法在 JavaScript 中设置 JSTL 数组值

> ID：13225342
> 
> 赞同：1
> 
> 时间：2012-11-05T02:50:43.123
> 
> 标签：javascript, jstl

继续这个问题：[Set array values in javascript from JSTL code](https://stackoverflow.com/questions/13190306/set-array-values-in-javascript-from-jstl-code)。

我尝试使用论坛的其他成员向我建议的解决方案，但它似乎仍然无法正常工作。如，该行：

```
sessionId.push("${id}"); 
```

在 Eclipse IDE 上变为：

```
 sessionId.push(""); 
```

在浏览器上（当我做一个视图源）。

该成员还告诉我数组中可能有一个空元素或空字符串，数组：

```
"["Environment", "1", "Education", "1", "Disaster_Accident", "1", "Hospitality_Recreation", "2", "Labor", "1", "Human Interest", "3"]" 
```

认为有一个空元素或字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:11:12.660

您可能在某处有语法错误。请尝试使用此演示页面。它适用于我在 IE8 浏览器中。

```
<%@ page import="java.util.*,java.io.*" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%
   //scriptlet is for testing,
   List<String> list = new ArrayList<String>();
   list.add("Environment");
   list.add("1");
   list.add("Education");
   list.add("1");
   list.add("Disaster_Accident");
   request.setAttribute("arrayList", list);
%>
<script>
var sessionId = [];
<c:forEach items="${arrayList}" var="id">
       sessionId.push("${id}");
</c:forEach>
alert(sessionId);
</script> 
```

# ruby - Rack：你如何将 URL 存储为变量？

> ID：13225343
> 
> 赞同：5
> 
> 时间：2012-11-05T02:50:45.897
> 
> 标签：ruby, rack

我正在编写一个简单的静态 Rack 应用程序。查看下面的 config.ru 代码：

```
use Rack::Static, 
  :urls => ["/elements", "/img", "/pages", "/users", "/css", "/js"],
  :root => "archive"

map '/' do
  run Proc.new { |env|
    [
      200, 
      {
        'Content-Type'  => 'text/html', 
        'Cache-Control' => 'public, max-age=6400' 
      },
      File.open('archive/splash.html', File::RDONLY)
    ]
  }
end

map '/pages/search.html' do
  run Proc.new { |env|
    [
      200, 
      {
        'Content-Type'  => 'text/html', 
        'Cache-Control' => 'public, max-age=6400' 
      },
      File.open('archive/pages/search.html', File::RDONLY)
    ]
  }
end

map '/pages/user.html' do
  run Proc.new { |env|
    [
      200, 
      {
        'Content-Type'  => 'text/html', 
        'Cache-Control' => 'public, max-age=6400' 
      },
      File.open('archive/pages/user.html', File::RDONLY)
    ]
  }
end

# Each map section is repeated for each HTML page served 
```

我想通过将 URL 存储为变量并创建一个地图部分来简化这一点

```
map url do
  run Proc.new { |env|
    [
      200, 
      {
        'Content-Type'  => 'text/html', 
        'Cache-Control' => 'public, max-age=6400' 
      },
      File.open('archive' + url, File::RDONLY)
    ]
  }
end 
```

如何正确设置此 url 变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:31:51.633

怎么样：

```
static_page_mappings = {
  '/'                  => 'archive/splash.html',
  '/pages/search.html' => 'archive/pages/search.html'
  '/pages/user.html'   => 'archive/pages/user.html',
}

static_page_mappings.each do |req, file|
  map req do 
    run Proc.new { |env|
      [
        200, 
        {
          'Content-Type'  => 'text/html', 
          'Cache-Control' => 'public, max-age=6400',
        },
        File.open(file, File::RDONLY)
      ]
    }
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T03:01:43.180

你不应该需要地图部分。

```
run Proc.new { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=6400' 
    },
    File.open( 'archive' + env['PATH_INFO'], File::RDONLY)
  ]
} 
```

# database - 如何使用berkeley db检索密钥小于指定密钥的数据？

> ID：13225344
> 
> 赞同：0
> 
> 时间：2012-11-05T02:50:52.070
> 
> 标签：database, cursor, rdbms, berkeley-db

正如您在标题中看到的，我想检索键小于指定键的数据，然后我需要连接许多游标，其中一个可能大于指定的字符串，另一个可能小于指定的整数。默认情况下，DB_SET_RANGE 将返回大于或等于指定键的键。

我是否应该使用重写比较函数来实现它，并将其设置为数据库的比较函数，就像 set_bt_compare() 一样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:10:44.797

我想您会发现您仍然需要围绕 DB_NEXT 或 DB_PREV 进行自己的循环，并使用您自己的逻辑来比较键并在更复杂的条件下退出循环。

您可以使用 DB_SET_RANGE 找到键更大的点，然后转身并使用 DB_PREV 向后退。或者，您可以使用 DB_FIRST 从数据库的开头开始，然后使用 DB_NEXT 向前扫描，直到达到它们更大的点。

# xhtml - 为什么 XHTML 在 script 和 style 标签中有 PCDATA？

> ID：13225345
> 
> 赞同：0
> 
> 时间：2012-11-05T02:51:02.653
> 
> 标签：xhtml, cdata, pcdata

首先，让我说我知道 XHTML 不再是真正的东西了。然而，这个问题实际上是关于网络的历史。或者更确切地说，这个特殊的东西是如何成为其历史的一部分的。

我已经回答[了这个问题](https://stackoverflow.com/questions/13219650/html-comments-tags-in-internal-stylesheet)，后来看到它作为这个问题的副本被关闭时，[我](https://stackoverflow.com/questions/6825773/commenting-out-stylesheets-in-html-documents-to-support-older-browsers)也在那里阅读了答案。提到它在 XHTML 中引起的问题让我很感兴趣，我也开始想知道定义在哪里（如果有的话）允许 html 注释。我发现每个版本的 css 都明确允许在其定义中使用 html 注释标签。一方面，这应该意味着可以毫无困难地向它们添加外部样式表。我还发现 XHTML 1.0 确实制作了`style`and `script`-tags的内容，`PCDATA`而不是`CDATA`. 我还调查了这些事情的后果。

现在，我不明白这是怎么回事。我没有看到这种变化有任何好处，但我看到了很多缺点：

1.  它使脚本和样式表中使用的注释技术导致脚本/样式表根本不被阅读。的确，那个技术在当时就已经过时了，但这样打破它似乎还是有些极端。

2.  它几乎对任何内联 javascript 都造成了各种麻烦，因为`<`和`&`是该语言中的两个常用字符，通常意味着 xml 解析器会失败。

3.  `//<![CDATA[`即使尝试使用最好的代码 ( and )解决 2`//]]>`问题，您仍然会遇到一些代码问题（恰好`]]>`在 a `<`or之后的代码`&`）

现在我敢打赌，我错过了肯定有一些积极的东西，否则它就不会最终出现在 XHTML 标准中。或者也许发生了一些我没想到的奇怪事情？换句话说：尽管存在诸多问题，但它是如何最终出现在 XHTML 标准中的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:45:33.700

很简单，它是 XML 解析规则所要求的。HTML 对不同元素有各种不同的解析规则，因此只适用于 HTML 词汇表，而 XML 有一个一致的系统，可以用于任何词汇表，XHTML 只是其中之一。这样做的代价是字符数据不能在任何元素中允许未转义`<`或字符。`&`

# php - PHP 执行用户定义的查询

> ID：13225348
> 
> 赞同：3
> 
> 时间：2012-11-05T02:51:32.823
> 
> 标签：php, mysql, codeigniter

我正在使用 CodeIgniter 开发一个项目，其中显示的页面有一个选项列表，其中包含页面上`SELECT`显示的数据的可用查询（语句）。这些查询存储在 MySQL 表中，包括用户定义的查询。

我的问题是，处理所选查询执行的最佳方法是什么：

1.  `view_id`使用查询命令从表（键）中获取 SQL 语句。替换返回的 SQL 语句中的参数。使用查询命令执行 SQL 语句。

2.  加载页面时，将 SQL 语句存储在一个数组中（可能很大）。当用户更改页面上的选择时，从数组中获取语句，替换语句中的参数，运行查询。

3.  使用 MySQL 准备好的语句。（预见参数的问题，因为所有视图都需要相同的参数序列）

4.  其他选择？

我正在寻找一种有效且安全的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:34:57.720

第一个——不要暴露你的任何sql——你只是在自找麻烦。

您希望将用户输入与正在运行的实际代码分开。设置 ti 就像它是用户可能拥有的正常事物的链接列表 - 例如，个人资料，帐户设置等。

解析您的输入以进行 sql 注入、实际运行该查询的权限等。

换句话说，将其设置为您网站中页面名称的简单列表 - 完全忽略他正在选择 sql 语句

# javascript - div文本上的垂直滚动

> ID：13225351
> 
> 赞同：3
> 
> 时间：2012-11-05T02:51:42.847
> 
> 标签：javascript, jquery, html, css

目前我的 div 正在使用两个按钮（向上和向下）滚动，但我希望它跳到顶部并跳到底部，而这两个按钮使用垂直自动滚动（向下）来代替。我如何在 jQuery 中实现这一点？到目前为止，这是我的代码：http: [//jsfiddle.net/NkY8J/](http://jsfiddle.net/NkY8J/)。

HTML

```
 <div id="scroll">
         Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here<br /><br />
    Content here and more content here
      </div>
              <input id="scroll-up" class="btn" type="button" value="Up"/>
              <input id="scroll-down" class="btn" type="button" value="Down"/>
​ 
```

JS

```
$(function() {
    var ele   = $('#scroll');
    var speed = 25, scroll = 5, scrolling;

    $('#scroll-up').mouseenter(function() {
        // Scroll the element up
        scrolling = window.setInterval(function() {
            ele.scrollTop( ele.scrollTop() - scroll );
        }, speed);
    });

    $('#scroll-down').mouseenter(function() {
        // Scroll the element down
        scrolling = window.setInterval(function() {
            ele.scrollTop( ele.scrollTop() + scroll );
        }, speed);
    });

    $('#scroll-up, #scroll-down').bind({
        click: function(e) {
            // Prevent the default click action
            e.preventDefault();
        },
        mouseleave: function() {
            if (scrolling) {
                window.clearInterval(scrolling);
                scrolling = false;
            }
        }
    });
});
​ 
```

CSS

```
#scroll {
    width: 200px;
    height: 100px;
    overflow: hidden;
    padding: 4px;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:19:36.080

让我们看看这里。[http://jsfiddle.net/NkY8J/2/](http://jsfiddle.net/NkY8J/2/)

只是设置`ele.scrollTop(0);`跳到顶部。

并设置`ele.scrollTop(Math.pow(10,9));`跳到底部。

# codeigniter - Codeigniter 堆叠网址

> ID：13225354
> 
> 赞同：0
> 
> 时间：2012-11-05T02:52:52.423
> 
> 标签：codeigniter, url, jquery

我遇到了 url 堆积的问题。我在本地主机上使用了 jquery ajax 请求，并且 url 变成了 localhost/website/index.php/mycontroller/myfunction/mycontroller/mynewfunction 而不是 localhost/website/index.php/mycontroller/mynewfunction/para1/para2。

有谁知道为什么？我一整天都在尝试解决这个问题。我检查的所有地方都有一个 url 或链接似乎是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:22:56.093

这是您在函数中编写 URL 的方式，通常我发现当我遇到这个问题时，最简单的修复方法就是使用 base_url 函数而不是尝试使用相对 URL。所以是这样的：

```
<a href="<?=base_url();?>mycontroller/myfunction/para1/para2">Link</a> 
```

这样一来，您总是会返回基地并从那里工作。

# asynchronous - 我应该使用什么网络库来编写服务器来处理 300k 以上的客户端？

> ID：13225356
> 
> 赞同：2
> 
> 时间：2012-11-05T02:53:42.733
> 
> 标签：asynchronous, twisted, gevent

我正在第一次尝试编写像 Zynga Poker 这样的 iOS/Android 扑克应用程序，我必须一次处理多达 30 万个客户端连接，并且随着我的用户群的增长而更多。客户端将连接到 5-9 名玩家与其他玩家互动的空房间，并能够互相发送消息。我做了很多研究，似乎 Twisted Matrix 是事实上的标准，但我也对 gevent 非常感兴趣，因为它使用协程而不是回调来处理异步编程。但让我担心的一件事是这个网站的一些程序员， http://news.ycombinator.com/item?id= [2288081](http://news.ycombinator.com/item?id=2288081)写了这个

“这就是为什么我不明白为什么许多知名的实时网络初创公司（如 Convore）仍然使用劣质的解决方案，如 Python eventlib 或 gevent，最多只能让他们处理成百上千的客户。”

这是真的？所以我在使用哪个框架之间纠结。或者那里有更好的东西？300k 连接对 python 的要求很高吗？如果是，我愿意用java或C++做服务器，但我宁愿用python。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:31:46.533

无论您使用什么语言，300,000 个并发的活动连接都太多，无法在单个进程或单个计算机上合理支持。如果你的程序需要对数据做任何事情，你将需要更多的硬件。

让我们做一些简单的数学运算来支持这一点。

假设您的用户平均每 5 秒左右单击鼠标或点击一个键或以其他方式执行一次操作。这是每秒 60,000 个读取事件。现在，假设每场比赛有 5 个玩家，这意味着每秒额外的 300,000 个写入事件，假设您必须为每个事件更新所有玩家。所以：每秒要计算 360,000 位“事物”——假设您只需要计算一些字节用于输入和输出，并且您没有任何计算密集型游戏逻辑（如 AI 玩家）可以调用。

假设您正在使用[M3 Double Extra Large](http://aws.amazon.com/ec2/instance-types/)实例，这是亚马逊目前提供的最大实例。那是8个虚拟核心。假设您的程序是完全可并行化的，这意味着您的游戏中的每一个输入或输出事件（包括所有数据库活动、外部 Web 服务 API 调用等）都需要在 0.00002 秒内处理。现在，这让您完全没有开销来处理负载峰值，因此您真的希望将其减半，以便在流量变化的情况下保持合理的希望，这意味着每个事件 0.00001 秒。这是十*微秒的硬限制*让您的所有游戏代码执行；大多数情况下，这种响应能力是以毫秒为单位来衡量的。`time.time()`在我的（相当快的）台式计算机上，如果中间没有其他代码，从一个调用到下一个调用几乎需要两微秒。即使是经过微调的 C 代码也无法在一微秒内完成大量有用的工作。

这意味着，如果你想达到这种规模，你真的，真的需要能够一次在多台服务器上运行你的服务。而且，一旦您的服务可以在*两台*服务器上运行，通常放在三台、五台或一百台服务器上也没什么大不了的。

虽然我非常想告诉你[使用 Twisted](http://twistedmatrix.com)（你应该有很多很好的理由），但真正的结论是你可以使用*任何你喜欢的东西*并且它将很好地“扩展到”您的数十万个连接，前提是您编写它的方式不依赖于为您的所有请求提供服务的单个服务器。在您有一个服务实际处理 300k 实时并发连接时，使用 gevent 或 Twisted 或 Tornado 或 Eventlet 或 EventMachine 之间的性能差异——如果实际上有任何差异——将是之间的差异，比如说，从亚马逊租用 50 和 55 个实例。（而且，很难说哪一个会更快，因为这在某种程度上取决于你会用它做什么。）然而，分析你*自己的*代码和在开发它时密切关注它的性能之间的区别在于租赁 500 台机器和租赁 50 台机器的区别。

# android - 适用于三星 Galaxy S3 的 Windows Vista ADB 驱动程序

> ID：13225357
> 
> 赞同：1
> 
> 时间：2012-11-05T02:53:47.413
> 
> 标签：android, windows-vista, adb

出于应用开发目的，我想通过我的 Windows vista 32 位笔记本电脑上的 ADB 接口访问三星 Galaxy S3 手机。我在哪里可以找到手机的 ADB 驱动程序？

运营商：wind（加拿大）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:25:58.097

[在三星的网站](http://www.samsung.com/ca/support/main/supportMain.do)上找到手机，去下载，然后从那里安装驱动程序。

# python - 基本病毒扫描递归

> ID：13225358
> 
> 赞同：0
> 
> 时间：2012-11-05T02:53:53.457
> 
> 标签：python, recursion, virus

所以我正在编写带有 a `pathname`、 a 的代码，`signature`第三个参数是 a `number`，它表示应扫描的子目录的深度。

所以假设我有一个**文件： test**：

```
In it is test1 folder,test2 folder,antivirus.py,simple.py
In test1 folder is antivirus1.py
In test2 folder is test3 folder, and antivirus2.py
In test3 folder is antivirus3.py 
```

**所以它应该是这样工作的：**

```
>>>scan('test',rules, 0)
test\antivirus.py, found virus Virus2
test\antivirus.py, found virus Virus1
>>>
>>>scan('test',rules, 2)
test\antivirus.py, found virus Virus2
test\antivirus.py, found virus Virus1
test\test1\antivirus1.py, found virus Virus2
test\test1\antivirus1.py, found virus Virus1
test\test2\antivirus2.py, found virus Virus2
test\test2\antivirus2.py, found virus Virus1 
```

**这是我当前的代码：**

```
def scan(pathname, signatures, depth):
    for item in os.listdir(pathname) and depth > 0:
        n = os.path.join(pathname, item)
        try:
            scan(n, signatures, depth-1)
        except:
            f = open(n, 'r')
            s = f.read()
            for virus in signatures:
                if s.find(signatures[virus]) > 0:
                    print('{}, found virus {}'.format(n,virus))
            f.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:03:14.203

`for`循环并不是这样工作的。它们的语法是`for <variable> in <iterable>`.

只是我们一个`if`声明：

```
if depth <= 0:
    return

for item in os.listdir(pathname): 
```

# java - Eclipse 中的错误（适用于 Android）：无法解析 java.lang.String 类型。它是从所需的 .class 文件中间接引用的

> ID：13225363
> 
> 赞同：13
> 
> 时间：2012-11-05T02:54:31.500
> 
> 标签：java, android, eclipse

我正在尝试运行其他人创建的 Android 项目。我在 Eclipse 中打开了该项目：

```
File --> New --> Project --> Android Project from existing code 
```

以下是其中一个 Java 文件的前两行：

```
package aa.bb.cc;

import java.io.File; 
```

这些行的开头有一个红十字标志，当我将鼠标悬停在它们`The type java.lang.Object cannot be resolved. It is indirectly referenced from required .class files`上方时，第一行收到此消息：第二行的 anfd 收到此消息：`The import java.net cannot be resolved`。

是什么原因以及如何解决这些错误消息？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-05T02:58:49.327

运行前多做一步：

```
Right Click(Project) -> Properties -> Java Build Path -> Libraries -> 
                                          Add Library -> Select the Java Library 
```

单击确定，然后清理构建（`Project -> Clean`&`Project -> Build All`或`Ctrl+B`）您的项目。应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-24T05:17:40.883

这是一个恼人的 Eclipse 错误，它似乎时不时地咬人。有关可能的解决方案，请参阅[http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html](http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html)，否则请尝试以下操作；

```
Close the project and reopen it.

Clean the project (It will rebuild the buildpath hence reconfiguring with the JDK libraries)

OR

Delete and Re-import the project and if necessary do the above steps again. 
```

# google-chrome - Google Chrome 浏览器不显示来自本地网络或本地主机的图像？

> ID：13225369
> 
> 赞同：1
> 
> 时间：2012-11-05T02:29:13.660
> 
> 标签：google-chrome, android

编辑 ：

在 html 源代码中，我有如下内容：

```
<img src="./images/someimage.jpg" /> 
```

这显示正常 IE/FireFox 将显示来自 URL 的图像，如“http://mypc”或“http://localhost”或网络上的 ip 地址，Galaxy、Windows 机器或谷歌 Android 上的 google chrome 将不会显示图像。

在尝试了各种 CSS、图像 src 标签、html 文档描述技巧之后，我已经放弃了太多时间。

在我的搜索过程中，我发现（并丢失了）关于这个问题的 chrome 论坛的链接，用户似乎就是这样说的。

任何人都有更多关于天气的信息，可以在网络或 IP 地址上查看本地主机/计算机名称上的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:17:44.393

尝试使用`http://localhost/resouce.jpg`而不是`http:/localhost/resouce.jpg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:45:48.447

从你上面的评论（你说如果你把 h11p://mycomputer/images/image1.jpg 放在哪里）和你的问题（你把 ./images/someimage.jpg 的图片 URL 放在哪里），我猜你有您的 URL 的相关性（缺少更好的词）存在问题。

例如

如果您的页面位于 h11p://mycomputer/folder/page.html 并且您使用相对 URL ./images/image1.jpg 来获取图像，那么您的浏览器将在 h11p://mycomputer/folder/images/image1 中查找.jpg 以找到该图像。

这也可能发生在已重写为包含附加斜杠的 URL 上。

解决方案是使用站点上的绝对 URL，例如 /images/image1.jpg（省略前导 .）或使用主机的绝对 URL，例如 h11p://mycomputer/images/image1.jpg

第一个解决方案更可取，因为它会在您更改站点的主机名/域名时继续工作。

** 阅读我写 h11p 的 http

# javascript - javascript中的函数调用

> ID：13225372
> 
> 赞同：1
> 
> 时间：2012-11-05T02:56:33.843
> 
> 标签：javascript, django, google-maps-api-3

我正在开发一个使用 google maps api 的小型 webapp。

有一次，我想放置标记并将事件侦听器附加到它。

```
//initialization of infowindow and markers
var points = [];
var infowindow = new google.maps.InfoWindow({
    content: "1234"
});

function addInfoWindow(point){
    infowindow.setContent(point.position + " " + point.title),
    infowindow.open(map, point);
} 
```

这是问题，当我启动标记时

```
//initialize markers
{% for marker in mapMarkers %}
    points[{{ marker.id }}] = new google.maps.Marker({
        position: new google.maps.LatLng({{ marker.geometry.y }},
            {{ marker.geometry.x }}),
        map: map,
        title: '{{ marker.name }}',
        clickable: true
    });

    //add event llistener for infowindow
    points[{{ marker.id }}].content = "abc"
    //look here!!
    google.maps.event.addListener(points[{{ marker.id }}], 'click',
        addInfoWindow(points[{{ marker.id }}])
    );
{% endfor %} 
```

它会立即显示第一个标记的信息窗口。放置了其他标记，但单击它们不会产生任何变化。

虽然如果我这样做

```
 google.maps.event.addListener(points[{{ marker.id }}], 'click',
    function(){
        addInfoWindow(points[{{ marker.id }}])
    }); 
```

东西工作得很好，信息窗口只在点击标记时出现。

我的问题：为什么需要使用

```
功能（）{}
```

而不是直接使用 addInfoWindow。我认为这可能是 addInfoWindow 调用全局变量的函数调用问题，但如果是这种情况，显示的信息窗口应该显示来自最后一个标记实例化的信息，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:02:35.800

因为您需要将函数分配为单击处理程序-您可以使用...

```
google.maps.event.addListener(points[{{ marker.id }}], 'click',
function(){
    addInfoWindow(points[{{ marker.id }}])
}); 
```

`addInfoWindow`...因为这将创建一个匿名函数（在其主体中调用）。

但是有了这个...

```
google.maps.event.addListener(points[{{ marker.id }}], 'click',
    addInfoWindow(points[{{ marker.id }}])
); 
```

...您尝试将调用*结果*分配为`addInfoWindow`事件处理程序，而不是函数本身。当然，它不起作用。

# sharepoint - SharePoint 2010 无法创建发布网站类型的自定义子网站

> ID：13225375
> 
> 赞同：0
> 
> 时间：2012-11-05T02:57:08.197
> 
> 标签：sharepoint

尝试使用发布网站类型的自定义模板创建子网站时，我遇到了 SharePoint 2010 异常：

```
Provisioning did not succeed.  Details: Failed to initialize some site properties for web "http://site/subWeb"
Original Exception: Value does not fall within expected range..
Stacktrace: at Microsoft.SharePoint.SPGlobal.HandleCOMException(COMException comEx)
at Microsoft.SharePoint.Library.SPRequest.ApplyWebTemplates(...)
at Microsoft.SharePoint.SPWeb.ApplyWebTemplate(string strWebTemplate)
at Microsoft SharePoint.SPWeb.CreateWeb(...)
at Microsoft.SharePoint.SPWebCollection.Add(...)
at [custom code] 
```

该错误发生在站点创建过程开始后大约 10-15 秒。我查看了日志，新添加的站点在发布功能激活失败后被删除。我还在日志中比上述更早地发现了更详细的日志记录错误：

```
Exception thrown when attempting to activate sub web's publishing feature:
attempting to get GUID from Microsoft.SharePoint.Publishing.QueryBasedCollection'1.get_Item(Guid uniqueId)
at Microsoft.SharePoint.Publishing.Internal.AcreaProvisioner.SetDefaultPageProperties(PublishingWeb area, Boolean& updateRequired) 
```

我不知道为什么在激活子网站的发布功能时会涉及 GUID...

Web 模板来自 SharePoint 2007，但我不确定在 2010 年它可以正常工作之前是否需要对其应用任何特殊的东西（假设没有）。

到目前为止我尝试过的事情：重新激活所有范围内的所有服务器发布功能 + iisreset 与所有可能的组合，但到目前为止没有任何效果。

迫切需要一些帮助... TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:51:44.117

根据我的经验，在 2010 年，您无法创建自定义网站模板类型的发布，而无需稍加修改，我相信有充分的理由检查此线程

[http://social.technet.microsoft.com/Forums/en-US/sharepointgenerallegacy/thread/b14e572a-ea17-47b4-93fe-4694451efe35](http://social.technet.microsoft.com/Forums/en-US/sharepointgenerallegacy/thread/b14e572a-ea17-47b4-93fe-4694451efe35)

现在可能有一些坏消息

该主题并未准确回答您的问题，但提供了有关 2007 年至 2010 年的建议。该人提供的建议是重新创建和迁移数据，他在帖子底部放置了一些提示。

[http://social.technet.microsoft.com/Forums/en-US/sharepointadminprevious/thread/c912f1c6-9790-4216-a6b0-54bfb8a1459d](http://social.technet.microsoft.com/Forums/en-US/sharepointadminprevious/thread/c912f1c6-9790-4216-a6b0-54bfb8a1459d)

我希望这有帮助 ：）

# wpf - 2 状态 WPF 按钮不改变 ImageSource

> ID：13225376
> 
> 赞同：0
> 
> 时间：2012-11-05T02:57:20.423
> 
> 标签：wpf, button, user-controls, wpf-controls, imagesource

我无法让此按钮（其内容中包含图像）正确更改`ImageSource`点击。这是我的 Xaml 和代码背后。

XAML：

```
<Window.Resources>
    <Style x:Key="NoChromeButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                            <Setter Property="Opacity" TargetName="Chrome" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<Grid>
    <Button x:Name="DrawCircleButton" Height="56" Width="157" 
    Margin="10,10,0,0" VerticalAlignment="Top" 
    HorizontalAlignment="Left" Click="DrawCircleButtonClick"
            Style="{DynamicResource NoChromeButton}"
    >
        <Image x:Name="imgButtonState" >
            <Image.Source>
                <BitmapImage UriSource="Resources/off.gif" />
            </Image.Source>
        </Image>
    </Button>
    <ScrollViewer Margin="0,50,0,0">
        <TextBlock Name="textBlock1" TextWrapping="Wrap" FontSize="20" FontWeight="Bold" />
    </ScrollViewer>

</Grid> 
```

代码背后：

```
private void DrawCircleButtonClick(object sender, RoutedEventArgs e)
    {
        var t = ButtonState;
        ButtonState = t;
    }

public bool ButtonState
    {
        get
        {
            return (bool)GetValue(ButtonStateProperty);
        }
        set
        {
            var t = new BitmapImage(new Uri("Resource/on.gif", UriKind.Relative));

            DrawCircleButton.Content = !value ? imgButtonState.Source = new BitmapImage(new Uri("on.gif", UriKind.Relative)) : imgButtonState.Source = new BitmapImage(new Uri("off.gif", UriKind.Relative));
            SetValue(ButtonStateProperty, !value);
        }
    }

    public static readonly DependencyProperty ButtonStateProperty = DependencyProperty.Register("ButtonState", typeof(bool), typeof(bool)); 
```

因此，最初，该按钮设置为“关闭”。但是当它被点击时，它会在“开”和“关”之间切换。我确定我做错了什么，因为显示的是图像路径的文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:46:48.017

首先，WPF 也有一个[ToggleButton](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.aspx)。也许这在这里可能更合适。

现在你的错误。它基本上在以下行中：

```
DrawCircleButton.Content = !value ? imgButtonState.Source = new BitmapImage(new Uri("on.gif", UriKind.Relative)) : imgButtonState.Source = new BitmapImage(new Uri("off.gif", UriKind.Relative)); 
```

您将新的 BitmapImage 分配给 Button 的 Content 属性。由于 Button 的 ContentPresenter 无法处理该类型，它只显示 ToString() 的结果。如果您只是放弃作业并编写以下内容，它将起作用。内容没有改变，只是图像的来源已经是按钮的内容。

```
imgButtonState.Source = value
    ? new BitmapImage(new Uri("on.gif", UriKind.Relative))
    : new BitmapImage(new Uri("off.gif", UriKind.Relative)); 
```

但是，您的依赖属性的定义仍然存在严重问题`ButtonState`。如果你想这样定义它，你必须从 Button 派生并编写如下声明：

```
public class MyButton : Button
{
    public static readonly DependencyProperty ButtonStateProperty =
        DependencyProperty.Register(
            "ButtonState", typeof(bool), typeof(MyButton),
            new FrameworkPropertyMetadata(ButtonStatePropertyChanged));

    public bool ButtonState
    {
        get { return (bool)GetValue(ButtonStateProperty); }
        set { SetValue(ButtonStateProperty, value); }
    }

    private static void ButtonStatePropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        ((MyButton)obj).imgButtonState.Source = (bool)e.NewValue
            ? new BitmapImage(new Uri("on.gif", UriKind.Relative))
            : new BitmapImage(new Uri("off.gif", UriKind.Relative));
    }
} 
```

You should also not do anything else expect GetValue/SetValue in the CLR wrappers of a dependency property. Instead you should use a PropertyChangedCallback as shown above. See the *Implementing the Wrapper* section in [Checklist for Defining a Dependency Property](http://msdn.microsoft.com/en-us/library/ms753358.aspx#checklist).

If you don't want to derive from Button, you could alternatively define `ButtonState` as an [attached property](http://msdn.microsoft.com/en-us/library/ms749011.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:11:20.847

使用`Image`而不是`BitmapImage`作为`Button`的内容。此外，使用`Image.Source = "/Resources/YourFile.png"`而不是在 XAML 和代码中声明位图图像。

# java - Android TCP 客户端不正确

> ID：13225377
> 
> 赞同：0
> 
> 时间：2012-11-05T02:57:19.527
> 
> 标签：java, android, tcp, client

“我有一个简单的客户端正在运行，它连接到我的服务器；但是，连接后我无法接收到任何数据。我猜需要将某些东西放入 while 循环中，这样线程才不会完成，但我不知道该放什么在里面。有人可以帮助我或给我一个线索吗？

```
 Thread background=new Thread(new Runnable() {
            public void run() {

                 try {
                      socket = new Socket("255.255.255.255", 9999);
                      dataOutputStream = new DataOutputStream(socket.getOutputStream());
                      dataInputStream = new DataInputStream(socket.getInputStream());
                      dataOutputStream.writeUTF("Send this text to the server");
                      Log.i("Appname", dataInputStream.readUTF());

                     } catch (someexceptionhere) {

                     }

            } 
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:02:31.913

如果流未设置为自动刷新，请务必刷新。

```
Thread background=new Thread(new Runnable() {
  public void run() {
    try {
      socket = new Socket("255.255.255.255", 9999);
      dataOutputStream = new DataOutputStream(socket.getOutputStream());
      dataInputStream = new DataInputStream(socket.getInputStream());
      dataOutputStream.writeUTF("Send this text to the server");
      dataOutputStream.flush();
      Log.i("Appname", dataInputStream.readUTF());
    } catch (Exception _) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:14:44.863

我报废了我收到的方式，我正在使用：

```
socket.getInputStream().read(incomingdata); 
```

似乎现在可以工作了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:02:37.067

当线程的`run()`方法返回或所有指向它的指针都被清除时，线程将被终止。您应该使用 while 循环来保持代码运行，但请确保`Thread.sleep()`在循环中使用以防止线程过载设备。10ms 或更多应该可以工作，但不要将其设置为低于您的需要。

# mysql - mysql从linux转储到windows

> ID：13225379
> 
> 赞同：1
> 
> 时间：2012-11-05T02:57:25.943
> 
> 标签：mysql, database, linux, windows, mysql-workbench

美好的一天堆栈溢出。

我在将 sql 文件导入到我的 Windows 机器时遇到问题。sql文件来自linux机器。发生的情况是来自 linux 的表名是驼峰式大小写的，当迁移到 Windows 时，所有表名都变为小写。我不想调整我的代码以便能够访问我的数据库，所以无论如何我可以在 Windows 中实现驼峰式表名吗？

非常感谢。

* * *

从 linux 表名：-> FooBar

在windows中导入mysql工作台时：-> foobar

查询如下所示：

```
SELECT * FROM FooBar; // when the program is pointed to the database in windows, it will spit out that the table does not exist because the table name is "foobar" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:09:03.800

Linux 和 Windows 在两种操作系统存储表名的方式上存在差异（是否只允许小写）。这可以由`lower_case_table_names`系统变量控制。您的 Windows 安装可能将此值设置为 1，而您的 Linux 服务器将此值设置为 0。按照用户手册的“[标识符大小写敏感性](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)”部分，您有两个选择：

> `lower_case_table_names=1`在所有系统上使用。这样做的主要缺点是，当您使用`SHOW TABLES`or时`SHOW DATABASES`，您看不到原始字母大小写的名称。

或者

> `lower_case_table_names=0`在 Unix 和`lower_case_table_names=2`Windows 上使用。这将保留数据库和表名的字母大小写。这样做的缺点是您必须确保您的语句在 Windows 上始终以正确的字母大小写引用您的数据库和表名。如果您将语句转移到字母大小写很重要的 Unix，如果字母大小写不正确，它们将不起作用。

一些链接：

*   [`lower_case_table_names`系统变量](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_lower_case_table_names)
*   [标识符大小写敏感性](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)

# windows - 如何根据不同的URL自动选择浏览器中使用的代理服务器

> ID：13225382
> 
> 赞同：0
> 
> 时间：2012-11-05T02:58:02.663
> 
> 标签：windows, google-chrome

我有一组可用的代理服务器，比如说一个在中国，一个在美国，一个在香港。我希望网络浏览器，比如 Chrome，可以根据某种类型的配置文件自动选择这些代理服务器。比如配置文件中表示连接A、B、C等网站时，浏览器要选择中国的代理服务器；连接D、E等网站时，浏览器应选择美国的代理服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:07:26.623

试试[Proxy Switchy](https://chrome.google.com/webstore/detail/proxy-switchy/caehdcpeofiiigpdhbabniblemipncjj)，您可以使用规则为特定的 url 模式定义代理。

# perl - 如何在 Growl 通知中包含超链接？

> ID：13225386
> 
> 赞同：2
> 
> 时间：2012-11-05T02:58:39.223
> 
> 标签：perl, growl, growl-for-windows

我在 Growl 的文档（IMO 非常糟糕）和 CPAN 上的 Perl 库中找不到任何代码。最近更新的 Perl 模块[Growl::GNTP](http://search.cpan.org/perldoc?Growl%3A%3AGNTP)没有显示任何可以启用[自定义显示](http://growl.info/documentation/webkit.php)的代码片段，这显然是格式化链接的方式。

[尽管有人说](https://stackoverflow.com/questions/5050676/inline-styling-of-growl-notifications)，我知道在 Growl 通知中包含超链接是[可能](https://stackapps.com/questions/820/soapi-notify-stay-ahead-of-the-pack-with-new-question-notification-v1-release)的。

首选 Perl 或 PHP 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:54:44.993

您是专门针对 Windows 上的 Growl，还是仅针对通用 GNTP？但这并不重要，因为发送应用程序无法指定显示 - 这取决于接收者（用户）。您提供给该 soapi 通知程序的链接使用其自己的自定义显示样式，然后用户必须将其设置为他们的首选显示（至少对于该通知类型）。当您编写自定义显示时，您可以包含链接或任何您想要的内容。在 Windows 上，自定义显示必须用 .NET 编写，而在 OSX 上，它们可以是 Obj-C 或 html。

# iphone - 如何通过滚动视图检测触摸？

> ID：13225388
> 
> 赞同：0
> 
> 时间：2012-11-05T02:58:54.303
> 
> 标签：iphone, xcode, uiscrollview, uigesturerecognizer

我希望在我的用户触摸屏幕时运行一些方法，因此在我的 ViewController 中实现了 touchesBegan:withEvent: 方法，但是当我将滚动视图拖放到我的 iphone 上时，不再调用 touchesBegan:withEvent: 方法。

为了尝试修复，我在 ViewController 中实现了 becomeFirstResponder 方法并告诉它`return YES;`，然后在我调用的 viewDidAppear 方法中`[self becomeFirstResponder];`

但是，毕竟它没有用。

我还尝试创建一个自定义滚动视图并在其中创建一个 ViewController 对象属性，然后在我的自定义滚动视图的 touchesBegan:withEvent: 方法中我实现了它`[self.mainViewController touchesBegan:withEvent]`，希望每次我触摸屏幕时我的自定义滚动上的 touchesBegan 方法view 会被调用，然后我的 vc 中的 touchesBegan 方法会被调用，但这也无济于事。

我还为我的 vc 制作了一个滚动视图的出口，并向它添加了一个轻击手势识别器，并用一个方法和一些东西启动它，并且它工作了我用它启动的方法，但它只是在我在屏幕内触摸之后，我希望在触摸屏幕后立即调用该方法

任何答案都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:44:00.390

1.  创建 UIScrollView 的子类
2.  覆盖触摸结束，如果用户单击而不是拖动，我手动将消息转发给第一响应者。

    ```
     @interface MyScrollView : UIScrollView {
     }

     @end

    @implementation MyScrollView

    - (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {

    if (!self.dragging) {
    [self.nextResponder touchesEnded: touches withEvent:event]; 
     }      
      [super touchesEnded: touches withEvent: event];
         }

     @end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:09:57.300

为了做到这一点，我刚刚制作了自己的自定义滚动视图类，并使用我制作的委托方法在 uiscroll 视图中实现了 touchesBegan:withEvent: 方法。

所以基本上我只需要使用委托。

# php - Kohana 3 类名称约定

> ID：13225389
> 
> 赞同：0
> 
> 时间：2012-11-05T02:59:01.930
> 
> 标签：php, naming-conventions, kohana, kohana-3, kohana-3.2

这可能是一个非常愚蠢的问题。由于 Kohana 3 需要创建一个目录才能在类名中使用下划线，所以问题是：

a）我是否应该创建一个目录结构以便能够拥有像这样的类名：“My_Super_Cool_Class_Name”（具有像 my/super/cool/class/name.php 这样的结构）

b)我是否应该混合下划线和驼峰式来避免这种混乱的目录结构，所以我有“My_SuperCoolClassName”（具有类似 my/supercoolclassname.php 的结构）

同样，这可能是一个非常愚蠢的问题，第一个选项对我来说似乎是正确的，但是以有点荒谬的目录结构为代价，第二个选项似乎更灵活，但是类名将遵循不约定，甚至更糟, 混合约定（camelCase 和 under_scores）。

有谁能启发我？（有时我真的很想念 Java 和它漂亮的包 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:34:41.987

下划线只是帮助我们创建一个结构。这不是为了`spaces between words`。

`My_Super_Cool_Class_Name`如果您具有以下结构，则可以很好地使用：

```
My
 Super
  Cool
   Class
    Name
    Surname
    Surname45
   Glass
    Name
   Gas
    Name
  Cool1
   Gas
    Name
  Cool56
   Gas
    Name
 Middle
  Cool
   Class
    Name
    Surname
    Surname45
   Glass
    Name
   Gas
    Name
 Puper
  Cool
   Class
    Name
    Surname
    Surname45
   Glass
    Name
   Gas
    Name 
```

但是，如果您每个文件夹中只有一个文件夹，请务必使用`My_SuperCoolClassName`结构，不要让您头晕目眩，试图获取链中最后一个文件，也不要让您的 Kohana 在加载时搜索所需文件时扩展每个文件夹。

# javascript - 使用 chrome 自动调整 iframe 的大小

> ID：13225390
> 
> 赞同：0
> 
> 时间：2012-11-05T02:59:06.260
> 
> 标签：javascript, jquery, html

我被要求根据内容调整 iframe 的大小。经过长时间的搜索，我终于让它根据需要工作，但它只适用于 Firefox。我需要它至少在 chrome、ff 和 ie 上工作。这是脚本

```
<script language="JavaScript">
<!--
function autoResize(id){
    var newheight;

    if(document.getElementById){
        newheight=document.getElementById(id).contentWindow.document.body.scrollHeight; //ff
        newheight=document.getElementById(id).contentDocument.body.offsetHeight; //chrome
        newheight=document.getElementById(id).contentDocument.documentElement.scrollHeight;

        }

    document.getElementById(id).height= (newheight) + "px";
}
//-->
</script> 
```

和 iframe 代码

```
<iframe name="result" id="iframe" seamless src="action/search.php" width="100%" onLoad="autoResize('iframe');" marginwidth=0 marginheight=0 frameborder=0 scrolling="no" style="border:0; overflow:hidden">
    </iframe> 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:01:30.727

尝试这个

```
onload="if (window.parent &amp;&amp; window.parent.autoIframe) {window.parent.autoIframe('tree');} 
```

在 iframe 和

```
<script type="text/javascript">
    function autoIframe(frameId){
        try{
            frame = document.getElementById(frameId);
            innerDoc = (frame.contentDocument) ? frame.contentDocument : frame.contentWindow.document;

            if (innerDoc == null){
                            // Google Chrome
                frame.height = document.all[frameId].clientHeight + document.all[frameId].offsetHeight + document.all[frameId].offsetTop;
            }
                    else{
                    objToResize = (frame.style) ? frame.style : frame;
                    objToResize.height = innerDoc.body.scrollHeight + 18;
                    }
        }

        catch(err){
                alert('Err: ' + err.message);
            window.status = err.message;
        }
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:05:57.380

与其直接在元素上设置高度，不如将其设置为属性：

```
var heightAttr = document.createAttribute("height");
heightAttr.value = newheight;
document.getElementById(id).attributes.setNamedItem(heightAttr); 
```

或者您可以在 css 对象中设置它：

```
document.getElementById(id).style.height = (newheight) + "px"; 
```

# iphone - 将 MBProgressHUD 链接到我的项目

> ID：13225393
> 
> 赞同：1
> 
> 时间：2012-11-05T02:59:30.643
> 
> 标签：iphone, ios, mbprogresshud

我正在尝试将 MBProgressHUD 链接到我的项目并遵循这个简单的教程：http: [//mobile.tutsplus.com/tutorials/iphone/ios-sdk_uiactivityindicatorview_mbprogresshud/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uiactivityindicatorview_mbprogresshud/)。

当我链接我的 MBProgressHUD 时，我收到此错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MBProgressHUD", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

不知道如何解决这个错误。需要一些指导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T09:37:25.017

1.  从项目导航器中选择您的项目（显示在项目导航器的顶部）。
2.  在目标下选择您的应用程序。
3.  选择构建阶段。
4.  选择编译源。
5.  单击 + 按钮，然后选择并添加 MBProgressHUD.m

# c - sscanf() 在 C 中的 while 循环中

> ID：13225394
> 
> 赞同：2
> 
> 时间：2012-11-05T02:59:37.290
> 
> 标签：c, scanf

我有一个字符串`input`，其中包含由空格分隔的单词。我想用它`sscanf()`来拆分单词，将每个单词存储`input_word`并打印出来，但我不确定如何将其放入 while 循环中。

这就是我所拥有的：

```
 char input[max];
 char split_input[max];

 /* input gets populated here */

 while (sscanf(input," %s", split_input)) {
     printf("[%s]\n", split_input);
 } 
```

一旦序列中的最后一个单词被拆分，终止循环的条件是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T03:10:32.297

可能无法涵盖所有​​角落案例。

```
#include <stdio.h>

int main(void)
{

    char *input = "abc def ghi ";
    char split_input[sizeof input];
    int n;

    while (sscanf(input," %s%n", split_input, &n) == 1) {
        printf("[%s]\n", split_input);
        input += n;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T03:02:42.213

你在那里使用了错误的功能。我可以建议`strtok()`吗？

在这里阅读[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T15:04:00.187

我还建议使用**[strtok()](http://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm)**函数。它标记您的字符串，并允许您在循环中一一提取单词。这是一个示例，假设`input`是您定义的字符串，我编写了一个函数来执行此操作。

```
#include <stdio.h>
#include <string.h>

int tokenize(char *input) {

    const char space[2] = " ";
    char *token = strtok(input, space);
    while (token != NULL) {
        token = strtok(NULL, space);
        printf("%s\n", token);
    }

    return 0;
} 
```

# c++ - &array[size] 是否完全安全？

> ID：13225398
> 
> 赞同：2
> 
> 时间：2012-11-05T03:00:10.107
> 
> 标签：c++, memory, pointers, standards-compliance

> **可能重复：**
> [通过下标获取一个过去的数组元素的地址：C++ 标准是否合法？](https://stackoverflow.com/questions/988158/take-the-address-of-a-one-past-the-end-array-element-via-subscript-legal-by-the)

在 C++ 标准库中，许多算法都将`begin()`and`end()`迭代器作为参数。但诀窍是`end()`迭代器在容器结束之后。如果我想将算法应用于标准 c 数组，我必须传递等效的`begin()`和`end()`指针。

问题如下：

```
const unsigned int size = 10;
int array[size];
std::iota(&array[0], &array[size], 0); // <- Version 1
std::iota(&array[0], &array[0]+size, 0); // <- Version 2 
```

这两个版本是否严格等效？根据 C++ 标准，我可以毫无问题地使用版本 1 吗？

我的怀疑来自这样一个事实，即`&array[size]`在数组结束之后访问元素然后获取它的地址，而`&array[0]+size`在数组结束之后不访问元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T03:01:52.553

只需使用`std::begin`and `std::end`from `<iterator>`，不用担心 - 他们会做正确的事情。:)

# tkinter - 无法在窗口上显示自定义菜单

> ID：13225399
> 
> 赞同：-1
> 
> 时间：2012-11-05T03:00:14.993
> 
> 标签：tkinter

我有一个自定义菜单类继承自`Tkinter.Menu`. 我在根窗口中使用它，如下
所示：

```
root = Tk()
menu = customMenu(root)
root.config(menu = menu)
mainloop() 
```

谁能告诉我怎么了，拜托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:04:47.483

假设您的`customMenu`类正确继承自 Tkinter`Menu`类，您向我们展示的内容非常好。这是一个完整的工作示例：

```
import Tkinter as tk

class CustomMenu(tk.Menu):
    def __init__(self, root, *args, **kwargs):
        tk.Menu.__init__(self, root, *args, **kwargs)
        self.root = root
        self.file_menu = tk.Menu(self, tearoff=False)
        self.file_menu.add_command(label="Exit", command=root.on_exit)
        self.add_cascade(label="File", underline=0, menu=self.file_menu)

class ExampleView(tk.Frame):
    def __init__(self, root):
        tk.Frame.__init__(self, root)
        root.configure(menu=CustomMenu(root))

        l = tk.Label(self, text="your widgets go here...", anchor="c")
        l.pack(side="top", fill="both", expand=True)

class Controller(tk.Tk):
    def on_exit(self):
        self.destroy()

if __name__=='__main__':
    root = Controller()
    view = ExampleView(root)
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# database - 设置中特定数据库的 django database_options

> ID：13225403
> 
> 赞同：0
> 
> 时间：2012-11-05T03:01:35.940
> 
> 标签：database, django, config

只是想知道如果在设置中定义了多个数据库，我是否只能将[database_options](https://docs.djangoproject.com/en/1.1/ref/databases/)应用于特定数据库？如何？？？

例如。我已经定义了这样的数据库：

```
DATABASES = {
  'default': {...},
  'db2': {...}
} 
```

最终目标是在不影响默认数据库的情况下为db2数据库设置连接超时值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:10:00.863

是的你可以。

顺便说一句，你还在使用 django 1.1 吗，因为那是你的 database_options 链接指向的（[https://docs.djangoproject.com/en/1.1/ref/databases/](https://docs.djangoproject.com/en/1.1/ref/databases/)）。

# ruby-on-rails - Rails 3 - 如何在更新保存之前更改控制器中的属性？

> ID：13225406
> 
> 赞同：0
> 
> 时间：2012-11-05T03:01:42.630
> 
> 标签：ruby-on-rails, controller

所以，我有更新数据库中记录的表格。在我的控制器`update`操作中，如果另一个值是`Estimate`. 也许这会更有意义......这就是我想要做的。

```
def update
    @invoice = Invoice.find(params[:id])
    if @invoice.update_attributes(params[:invoice])
        if@invoice.status == "Estimate"
            # if the value of status is Estimate then change the
            # value of estimate_sent_date to the current timestamp
        end
        redirect_to invoices_path
    else
        render 'edit'
    end
end 
```

我关心的表单的唯一值是`status`and `estimate_sent_date`。大多数情况下，我只是不确定如何更改该记录的值`estimate_sent_date`并保存该记录。

另外，我应该保存所有内容，然后单独调用保存`estimate_sent_date`还是一次保存所有内容？`estimate_sent_date`我想我可以在调用之前更改的值`if @invoice.update_attributes(params[:invoice])`，不是吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:07:26.160

正如 Ryan Bigg 所说，状态机确实在这里工作。另一种解决方案是`before_save`在 Invoice 模型上使用回调，如下所示：

```
before_save :set_sent_date

def set_sent_date
  if self.status_changed? && self.status == "Estimate"
     self.estimate_sent_date = Time.now
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:07:45.127

我会在您的 Invoice 模型中移动这种业务逻辑。这是 :before_save 回调的典型用例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:03:49.823

听起来您正在尝试在这里重新发明状态机。我建议查看`state_machine`gem，然后使用它来实现在发票转换到“估计”状态后发生的事件，将其放在`state_machine`将进入模型的定义中：

```
after_transition :to => :estimate do |invoice|
  invoice.estimate_sent_date = Time.now
end 
```

# java - 如何在 Java 中构建（也用于 Web 服务的 URL）、部署和使用 Web 服务

> ID：13225408
> 
> 赞同：0
> 
> 时间：2012-11-05T03:01:53.617
> 
> 标签：java, android

我有一个带有 oracle 数据库的服务器，我必须为其创建 Web 服务。我进行了很多搜索，但从一开始就没有得到完美的解决方案，这意味着构建具有简单参数和 json 参数的 URL 的 Web 服务。然后给出json的响应。请告诉我，如果我坐在服务器前，那么我必须从哪里开始以及从头到尾要做什么。我必须在 android 应用程序中使用它。请我有麻烦了。因为我以前从未构建过网络服务。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:07:54.927

对于服务器端： Web 服务：只是在 Web 服务上公开您的方法的一种方式。正如 KonZa 所说，有两种类型的网络服务，您可以选择其中任何一种。对于初学者，我希望您查看此站点： http: [//netbeans.org/kb/docs/websvc/jax-ws.html](http://netbeans.org/kb/docs/websvc/jax-ws.html)，它将教您如何制作网络服务并发布它们。

客户端：对于 Android，您的工作非常简单：检查 SO 或 web 以了解如何使用用于与 android 中的 web 服务通信的 KSOAP2 库。

对于这一切，您只需要拥有强大的 java 基础。
如果您有任何其他疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:55:12.163

用java编写web服务有两种方式

1.  SOAP——简单对象访问协议
2.  宁静的网络服务。
    两者都有自己的优点和缺点。但我个人认为写一个宁静的网络服务是好的。
    这可能对您有所帮助：[比较和对比 REST 和 SOAP Web 服务？](https://stackoverflow.com/questions/10975863/compare-and-contrast-rest-and-soap-web-services)

SOAP 基于 XML。消息通过 XML 格式传输。您将必须创建服务器端和客户端。创建服务器端实现后，您必须创建一个 wsdl 文件供客户端访问。编写客户端也很简单。
此链接可能会对您有所帮助：
[Introductory JAX-WS tutorial for Eclipse using a top down approach](https://stackoverflow.com/questions/7713483/introductory-jax-ws-tutorial-for-eclipse-using-a-top-down-approach)

Restful Web 服务是基于 URL 的。这对您的目的会更好。与 SOAP 相比，它很容易实现。
此链接可能会对您有所帮助
[http://docs.oracle.com/cd/E19226-01/820-7627/giqbx/index.html](http://docs.oracle.com/cd/E19226-01/820-7627/giqbx/index.html)

# c# - 在 C# 中缩放图像

> ID：13225419
> 
> 赞同：2
> 
> 时间：2012-11-05T03:03:22.540
> 
> 标签：c#, winforms, image-processing

我在缩放图像时遇到问题。我已成功缩放图像，但图像在向上或向下滚动时会中断。

```
public partial class ImageDetail : UserControl
{
    public delegate void onClose();
    public event onClose close;
    Image pbImage;
    public ImageDetail(Image img)
    {            
        InitializeComponent();
        pictureBox.Image = img;
        pbImage = img;
        pictureBox.Width = this.pbImage.Width;
        pictureBox.Height = this.pbImage.Height;
        panel2.AutoScroll = true;
        panel2.HorizontalScroll.Maximum = img.Width;
        panel2.VerticalScroll.Maximum   = img.Height;
        panel2.HorizontalScroll.Minimum = 0;
        panel2.VerticalScroll.Minimum   = 0;
        panel2.SetAutoScrollMargin(10, 10);            
    }

    private void label2_Click(object sender, EventArgs e)
    {
        if (close != null)
            close(); 
    }        

    private void DrawImage(int startX, int startY)
    {            
        if (this.pbImage == null) { return; }

        Graphics pbGraphics = this.pictureBox.CreateGraphics();
        BufferedGraphicsContext currentGraphicsContext = BufferedGraphicsManager.Current;
        Rectangle targetRect = new Rectangle(startX, startY, (this.pbImage.Width + tmpWidth), (this.pbImage.Height + tmpHeight));
        using (BufferedGraphics pbGDIBuffer = currentGraphicsContext.Allocate(pbGraphics, targetRect))
        {
            Rectangle drawRect = new Rectangle(startX, startY, (this.pbImage.Width + tmpWidth), (this.pbImage.Height + tmpHeight));

            pbGDIBuffer.Graphics.DrawImageUnscaledAndClipped(this.pbImage, drawRect);
            pbGDIBuffer.Render();                
        }
        pictureBox.Width = this.pbImage.Width + tmpWidth;
        pictureBox.Height = this.pbImage.Height + tmpHeight;
    }             

    int tmpWidth = 0, tmpHeight = 0;
    private void toolStripSplitButton1_ButtonClick(object sender, EventArgs e)
    {
        tmpWidth = tmpWidth + ((this.pbImage.Width * 20) / 100);
        tmpHeight = tmpHeight + ((this.pbImage.Height * 20) / 100);

        pictureBox.Width = this.pbImage.Width + tmpWidth;
        pictureBox.Height = this.pbImage.Height + tmpHeight;
        pictureBox.Refresh();
        DrawImage(0, 0);
    }

    private void toolStripSplitButton2_ButtonClick(object sender, EventArgs e)
    {
        if(tmpWidth > 0)
            tmpWidth = tmpWidth - ((this.pbImage.Width * 20) / 100);
        if(tmpHeight > 0)
            tmpHeight = tmpHeight - ((this.pbImage.Height * 20) / 100);
        if (tmpHeight < 0)
            tmpHeight = 0;
        if (tmpWidth < 0)
            tmpWidth = 0;
        pictureBox.Refresh();
        DrawImage(0, 0);                      
    }

    private void panel2_MouseDown(object sender, MouseEventArgs e)
    {
        pictureBox.Width = this.pbImage.Width + tmpWidth;
        pictureBox.Height = this.pbImage.Height + tmpHeight;
    }

    private void panel2_MouseUp(object sender, MouseEventArgs e)
    {
        pictureBox.Width = this.pbImage.Width + tmpWidth;
        pictureBox.Height = this.pbImage.Height + tmpHeight;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:31:31.937

您应该在[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)事件上绘制图像（例如）：

```
pictureBox.Paint += (sender, e) =>
    {
        var drawRect = new Rectangle(startX, startY, pictureBox.Width, pictureBox.Height);
        e.Graphics.DrawImageUnscaledAndClipped(this.pbImage, drawRect);
    }; 
```

并在调整调用[`Invalidate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.invalidate.aspx)方法的大小后：

```
pictureBox.Invalidate(); 
```

* * *

你的代码应该是这样的：

```
public ImageDetail(Image img)
{
    pictureBox.Image = img;
    pbImage = img;
    ...
    pictureBox.Paint += pictureBox_Paint;
}

void pictureBox_Paint(object sender, PaintEventArgs e)
{
    if (pbImage == null) { return; }
    var drawRect = new Rectangle(startX, startY, pictureBox.Width, pictureBox.Height);
    e.Graphics.DrawImageUnscaledAndClipped(this.pbImage, drawRect);
}

private void toolStripSplitButton1_ButtonClick(object sender, EventArgs e)
{
    ///... resize to what you need 
    pictureBox.Width = (int) (pbImage.Width*0.2);
    pictureBox.Height = (int) (pbImage.Height * 0.2);
    pictureBox.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T14:59:36.953

在不使用图片框的情况下缩放图像。这是缩放代码，它将缩放使用 c# 中的 Graphcs.DrawImage 方法绘制的图像。希望你会明白。[检查 ImageZoom.cs](https://github.com/devkotaDmanohar/ZoomImage)

或者这里是代码。

```
 public static  class ImageZoom
{
 /// <summary>
 /// returns the zoomed rectangle to zoom an image
 /// </summary>
 /// <param name="imageRectangle">display rectangle of given image</param>
 /// <param name="mousepoint">current position of mouse</param>
 /// <param name="zoomFactor">positive value to zoom in and negetive value to zoom out </param>
 /// <returns></returns>
    public static RectangleF Zoom(RectangleF imageRectangle, Point mousepoint, float zoomFactor)
    {
        //orginal size and location of image
        SizeF OrginalSize = imageRectangle.Size;
        PointF Orginalpoint = imageRectangle.Location;
        //Mouse cursor location -located in width% and height% of totaloriginal image
        float mouse_widthPercent = System.Math.Abs(Orginalpoint.X - mousepoint.X) / OrginalSize.Width * 100;
        float mouse_heightPercent = System.Math.Abs(Orginalpoint.Y - mousepoint.Y) / OrginalSize.Height * 100;

        //Zoomed Image by scalefactor
        SizeF newSize = new SizeF(
             OrginalSize.Width + OrginalSize.Width * zoomFactor,
             OrginalSize.Height + OrginalSize.Height * zoomFactor
             );

        if (newSize.Width > 50000 || newSize.Height > 50000 || newSize.Width < 10 || newSize.Height < 10)
            return imageRectangle;

        //How much width increases and height increases
        float width_incrasesBy = newSize.Width - OrginalSize.Width;
        float height_incresesBy = newSize.Height - OrginalSize.Height;

        //Adjusting Image location after zooming the image
        PointF newPoint = new PointF(

              Orginalpoint.X - width_incrasesBy * mouse_widthPercent / 100,

              Orginalpoint.Y - height_incresesBy * mouse_heightPercent / 100

              );

        return new RectangleF(newPoint, newSize);

    }

} 
```

# visual-studio-2010 - 如何在 vs2010 web 性能测试中添加数据源作为循环计数

> ID：13225421
> 
> 赞同：0
> 
> 时间：2012-11-05T03:03:54.850
> 
> 标签：visual-studio-2010, performance-testing

我想在我的 vs2010 网络性能测试的一个步骤中添加一个循环。但是，我尝试将数据源（数据库）添加为参数并将此参数设置为循环计数但失败。我检查了所有 msdn 在线文档，但没有找到答案。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:55:18.310

解决了，我记录了网络性能测试，然后从中生成代码。生成代码文件后，我手动调整此代码文件

# sql - 将元素/值插入到 t-sql 中 XML 列的特定子元素中

> ID：13225424
> 
> 赞同：1
> 
> 时间：2012-11-05T03:04:16.743
> 
> 标签：sql, xml, sql-server-2008, tsql

在 SQL Server 2008 中，我想根据该元素的另一个子元素的值（在本例中为 ID）将一些元素和值插入到 xml 列的特定子元素中。xml 当前如下所示：

```
<Profile>
  <ID>16</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>test</Name>
    <Activities />
  </User>
</Profile> 
```

但是，xml 中可能有多个`<User>`元素，我只需要插入到`<User>`特定`<ID>`值中。如何在 MS SQL Server 2008/t-sql 中实现这一点？

**编辑：** 为简化起见，我从该列中获取 xml 并将其设置为变量：

```
DECLARE @profiles_xml xml
DECLARE @profile_id int
SET @profile_id = 16
SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE
profiles.value('(Profile/ID)[1]','int')= @profile_id) 
```

@profiles_xml 生成的 xml 值看起来像我上面的内容。

# java-me - 向任何手机发送端口短信？

> ID：13225426
> 
> 赞同：1
> 
> 时间：2012-11-05T03:04:27.553
> 
> 标签：java-me

我有一个可以发送短信的 midlet。在 J2me 中，短信带有端口号。但我希望它在不指定端口号的情况下发送到任何移动设备。我能做到吗？或者，如果我通过 SMS 网关 API 从服务器端发送到任何手机，是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:44:15.067

据我所知，如果您将端口号指定为 0，它会将 SMS 作为标准 SMS 发送，另一部手机将接收它并将消息放入 Inbox。

```
String url = "sms://1234567:0";
MessageConnection conn = (MessageConnection)Connector.open(url);
TextMessage msg = (TextMessage)conn.newMessage(MessageConnection.TEXT_MESSAGE);
msg.setPayloadText("hello");
conn.send(msg);
conn.close(); 
```

我希望它有帮助！

# model-view-controller - 在模型视图控制中，模型可以告诉视图应如何显示项目吗？

> ID：13225427
> 
> 赞同：0
> 
> 时间：2012-11-05T03:04:35.463
> 
> 标签：model-view-controller

我的模型中有一个*Compressor*组件：

```
public class Compressor extends MComponent {    

    public static final double THRESHOLD_MAX = 1; 
    public static final double THRESHOLD_MIN = 0;
    public static final double THRESHOLD_DEFAULT = 1; 
    private double threshold; 

    /* <snip> - many other parameters*/

    public void setThreshold(double v)      { this.threshold = v; }
} 
```

对于这个特定的应用程序，我有一个使用 Java Swing 构建的 GUI，它添加了滑块、按钮等来显示和控制 Compressors 参数。

现在，其中一些滑块应该在线性刻度上运行，而其他滑块应该在对数/指数刻度上运行（其中滑块的移动会使下端的值发生小的变化，而上端的值会发生很大的变化结尾）。

我有一个 GuiConstructor 类，可以方便地创建滑块及其移动事件，以便在给定最小值、最大值、指数/线性类型和 aq 值（对于指数类型）的情况下它们会适当地行动。

```
 gc.addSliderPanel(
            panel,
            "Threshold",
            Compressor.THRESHOLD_MIN,
            Compressor.THRESHOLD_MAX,
            c.getThreshold(),
            GuiConstructor.Scale.LINEAR, /*<-- this line*/
            0,
            new SetThreshold(c),
            DEFAULT_SLIDER_GRAINS,
            GuiConstructor.SliderValueType.FLOAT); 
```

问题是 - 我应该在*视图*中声明显示类型还是可以在*模型*中指定显示类型？

例如。

```
public class Compressor extends MComponent {    

    public static final double THRESHOLD_MAX = 1; 
    public static final double THRESHOLD_MIN = 0;
    public static final double THRESHOLD_DEFAULT = 1;
    public static final GuiConstructor.Scale THRESHOLD_SCALETYPE = GuiConstructor.Scale.LINEAR;  
    private double threshold; 
```

我喜欢在模型中指定它的想法，因为我只需要在创建每个组件时考虑显示参数，而不是在将它们放在一起时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:25:34.720

一个模型当然可以包含描述模型如何工作的属性：它是一个线性与指数压缩器。但是，它永远不应该直接引用您建议的特定视图对象。相反，使属性具有描述性，并让“GuiConstructor”根据属性的值选择正确的视图。

例如：

```
// Not apart of the View, but in the model package:    
public enum ScaleType {
    LINEAR,
    EXPONENTIAL;
}

public class Compressor extends MComponent {    

    private ScaleType scaleType = ScaleType.LINEAR;
    public ScaleType getScaleType() { return this.scaleType; }

}

    //  In your construction method:
    gc.addSliderPanel(
            panel,
            "Threshold",
            Compressor.THRESHOLD_MIN,
            Compressor.THRESHOLD_MAX,
            c.getThreshold(),
            c.getScaleType(), /*<-- this line*/
            0,
            new SetThreshold(c),
            DEFAULT_SLIDER_GRAINS,
            GuiConstructor.SliderValueType.FLOAT); 
```

最重要的原则是模型不应该知道视图。视图对象应该是可更改的，无需更改模型。或者换一种说法，假设构建了一组完全不同的 UI 类。模型类不应要求更改编码。

以下是对您的代码的一些友好观察：

1.  我在上面假设“GuiConstructor.Scale”是一个枚举。如果不是，请考虑使用一个而不是静态决赛。
2.  我建议将“GuiConstructor”重命名为“GuiFactory”或“GuiBuilder”。“构造函数”具有过于具体的 OO 含义，无法在您使用它的上下文中使用。
3.  您可能过度使用类属性（最终的静态属性）而不是使用对象的属性来描述压缩器。为什么不将阈值和比例作为对象的属性？否则，创建子 LinearCompressor 或 ExponentialCompressor 类将需要它们自己的引用（而不是使用覆盖）。
4.  我不知道'new SetThreshold（c）'是什么意思。看起来您已经命名了一个类，其名称让人想起类上的 setter 方法。考虑重命名该对象。

希望这可以帮助，

约翰...

# treeview - 如何将数据库中的分层数据加载到树视图中

> ID：13225429
> 
> 赞同：0
> 
> 时间：2012-11-05T03:04:40.510
> 
> 标签：treeview, lazarus

我有一个包含数据的数据库表，需要将字段加载到`TTreeView`对象中。

该行：

```
ItemTree.Items.AddChild(nil, CurrentField_Text); 
```

只需将一个节点添加到顶层。

我怎样才能指定一个点来插入它？

请注意，在遍历表中的数据时，我可能（例如）插入 3 个顶级项目，然后第 4 个元素实际上是节点 2 的子节点。

我该如何指定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:58:52.747

`nil`在对 的调用中使用父节点而不是`AddChild`，以便将子节点添加到父节点：

```
ParentNode := ItemTree.Items.AddChild(nil, 'Parent');
ItemTree.Items.AddChild(ParentNode, 'Child node'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:12:56.527

这是一些直接从我的程序中提取的代码，它将从查询中获取的值插入到树视图中。

```
 tv.items.clear;
 with qCustTree do  // this is the query which 'feeds' the treeview
  try
   close;
   params[0].asinteger:= qCustWithCallsID.asinteger;
   open;
   tv.items.BeginUpdate;
  while not eof do
   begin
    father:= fieldbyname ('father').asinteger;
    if father = 0
     then node:= nil
     else node:= FindANode (father);
    lastnode:= tv.Items.AddChildObject (node, fieldbyname ('curdate').asstring,
                                        pointer (fieldbyname ('id').asinteger));
    next
   end;
  finally
   tv.items.endupdate;
   tv.fullexpand;
   tv.Selected:= tv.Items[0];
   tvchange (nil, tv.Selected);
  end; 
```

如果返回元组的'father'字段为0，则在树上打开一个新的父节点，否则打开一个新的子节点。

# c# - HtmlAgilityPack SelectNodes 表达式忽略具有特定属性的元素

> ID：13225438
> 
> 赞同：6
> 
> 时间：2012-11-05T03:07:38.440
> 
> 标签：c#, xpath, html-agility-pack, selectnodes

我正在尝试选择除脚本节点和具有名为“relativeNav”的类的 ul 之外的节点。有人可以指导我走向正确的道路吗？我一直在寻找一个星期，但我无法在任何地方找到它。目前我有这个，但它显然也选择了 //ul[@class='relativeNav'] 。无论如何要放置一个 NOT 表达式，以便 SelectNode 会忽略那个？

```
 foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//body//*[not(self::script)]/text()"))
        {
            Console.WriteLine("Node: " + node);
            singleString += node.InnerText.Trim() + "\n";
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:59:09.867

给定一个 Html 文档，其结构类似于：

```
<html>
<head><title>HtmlDocument</title>
</head>
<body>
<div>
<span>Hello Span World</span>
<script>
Script Text
</script>
</div>
<ul class='relativeNav'>
<li>Hello </li>
<li>Li</li>
<li>World</li>
</ul>
</body>
</html> 
```

以下 XPath 表达式将选择所有不是脚本元素的节点，不包括具有类“relativeNav”的 UL 元素的所有子元素：

```
var nodes = htmlDoc.DocumentNode.SelectNodes("//body//*[not(parent::ul[@class='relativeNav']) and not(self::script)]/text()"); 
```

更新：忘了提到，如果您需要排除 ul[class='relativeNav'] 的任何孩子，而不管它们的深度如何，您应该使用：

```
"//body//*[not(ancestor::ul[@class='relativeNav']) and not(self::script)]/text()" 
```

如果您还想排除 ul 元素（在上面的示例中有些不相关，因为该元素不包含文本），您应该指定：

```
"//body//*[not(ancestor-or-self::ul[@class='relativeNav']) and not(self::script)]" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:30:23.277

我希望这是你需要的：

```
HtmlDocument doc = new HtmlDocument();
var nodesToExclude1 = doc.DocumentNode.SelectNodes("//ul[@class='relativeNav']");
var nodesToExclude2 = doc.DocumentNode.SelectNodes("//body//script");
var requiredNodes = doc.DocumentNode.SelectNodes("//")
                       .Where(node => !nodesToExclude1.Contains(node) &&
                                      !nodesToExclude2.Contains(node));

foreach (HtmlNode node in requiredNodes)
{
    Console.WriteLine("Node: " + node);
    singleString += node.InnerText.Trim() + "\n";
} 
```

# iphone - 使用 SDWebImage 的 png 黑色背景

> ID：13225440
> 
> 赞同：1
> 
> 时间：2012-11-05T03:07:59.803
> 
> 标签：iphone, ios, uiimageview, sdwebimage

当我使用`UIImageView`with `setImage:`（图像来自远程服务器）时，必须缓存图像数据，所以我使用[SDWebImage](https://github.com/rs/SDWebImage)来做到这一点：

```
[imageView setImageWithURL:[NSURL URLWithString:[dic objectForKey:@"icon_url"]]] 
```

然后我运行模拟器，图像以**黑色**背景显示，而来自远程服务器的图像文件是具有**透明**背景的 .png 文件。

PS 当我使用`UIImageView`'s`setImage:`时，它运行良好，但图像无法缓存。我该如何解决？

# php - PHP ZipArchive 产生无效档案，“ZLIB 输入流的意外结束”

> ID：13225441
> 
> 赞同：1
> 
> 时间：2012-11-05T03:08:00.803
> 
> 标签：php, zip, zlib, unzip, ziparchive

我在 PHP 中使用 ZipArchive 来创建存档。它在一年的大部分时间里一直运行良好，但今天突然没有明显的触发它停止正常工作。

存档似乎已成功创建，大小合适，并且没有给出任何错误或警告。使用`$ unzip archive.zip`它似乎有效。但是，在我们的 Java 应用程序（已经运行了大约一年）中提取它失败了：

```
java.io.EOFException: Unexpected end of ZLIB input stream
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:240)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at java.util.zip.ZipInputStream.read(ZipInputStream.java:163) 
```

同样在存档的创建过程中，ZipArchive::close() 大约需要 10 秒，而之前它是即时的。

**编辑**存档的大小恰好比平时大（28MB 而不是通常 ~15MB），这可能解释了 ZipArchive::close() 的延迟，但不是为什么 Java 不能解压缩它？

# model-view-controller - 从其他控制器访问模型被认为破坏了 MVC 框架

> ID：13225444
> 
> 赞同：0
> 
> 时间：2012-11-05T03:08:58.137
> 
> 标签：model-view-controller

快速提问：一个控制器访问两个或多个模型是错误的吗？假设有两个两个控制器，每个控制器都有自己的模型。访问其他控制器的模型违反了 MVC 中的规则？我应该通过控制器（如果是 HMVC）以正确的方式访问该模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:42:24.243

不，让多个控制器与相同的[域对象](http://c2.com/cgi/wiki?DomainObject)（你称之为“模型”）交互并不违反 MVC 模式的基本思想。问题是，通常你的控制器不应该直接与域对象交互。它们应该包含在[services](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)中，这让您可以将表示层（主要是控制器、视图和模板）与模型层隔离开来。

# node.js - Node.js Express - 如何将 Stylus .styl 文件编译成 CSS

> ID：13225447
> 
> 赞同：3
> 
> 时间：2012-11-05T03:09:14.733
> 
> 标签：node.js, express, stylus

我正在尝试从 Balloons (http://balloons.io) 开始构建一个应用程序，它使用 Backbone.js 和 express 来设置 UI。我从来没有使用过这些框架，而且我很难真正做出改变。

据我了解， .styl 文件被编译成 CSS 文件。我该如何做这个编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:41:31.490

对于生产系统，您可以在部署之前使用[手写笔可执行文件](http://learnboost.github.com/stylus/docs/executable.html)转换`.styl`为。`.css`就像这样做一样简单：

```
stylus css --out stylesheet_dir 
```

在您的`.styl`文件所在的文件夹中。

对于开发，您可以使用[手写笔中间件](http://learnboost.github.com/stylus/docs/middleware.html)即时转换文件。

# php - SQLSTATE[HY000]：一般错误

> ID：13225448
> 
> 赞同：2
> 
> 时间：2012-11-05T03:09:25.997
> 
> 标签：php, mysql, sql, pdo, dynamic-sql

我有一个 mysql 动态 sql 语句，我想使用 pdo 运行它，我收到以下错误消息：

> 警告：PDOStatement::fetchAll() [pdostatement.fetchall]: SQLSTATE[HY000]: General error in C:\xampp\htdocs\tags\cobasql.php on line 29

这是我的php代码：

```
<?php 
   $uname = 'root'; //nama username database 
   $pwd = ''; //Password database 
   $dbname = 'eav_latihan'; //nama Database 

   /* Initialisasi database */ 
   $db = new PDO('mysql:host=localhost;dbname='.$dbname, $uname, $pwd); 
   $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); 

   $query = "SET @sql = NULL; ". 
            " SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', ". 
            " a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql ". 
            " FROM cust_attribute ca ". 
            " INNER JOIN attribute a ON ca.idAttribute = a.idAttribute ". 
            " INNER JOIN customer c ON c.idCustomer = ca.idCustomer ". 
            " WHERE a.publish = 'Y'; ". 
            " SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' ". 
            " ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', ". 
            " ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', ". 
            " ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', ". 
            " ' GROUP BY c.idCustomer'); ". 
            " SELECT @sql; ". 
            " prepare stmt FROM @sql; ". 
            " execute stmt;"; 

   $result_array = array();
   $queryku = $db->query($query);
   $result_array = $queryku->fetchAll(PDO::FETCH_OBJ);
   echo $result_array;
?> 
```

这里的任何人都可以帮助我或给我一个建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T03:22:26.680

它看起来像你无法连接！

这条线在这里

```
$db = new PDO('mysql:host=localhost;dbname='.$dbname, $uname, $pwd); 
```

尝试删除 $dbname 变量并输入正确的值，使您的行看起来像

```
 $db = new PDO('mysql:host=localhost;dbname=dbname', $uname, $pwd); 
```

# php - chown：不允许操作

> ID：13225453
> 
> 赞同：3
> 
> 时间：2012-11-05T03:10:54.387
> 
> 标签：php, linux, shell

我有一个问题，我需要通过 php 脚本为系统中的不同用户设置文件所有者权限

所以我通过以下命令执行此操作，其中 1002 是系统的用户 ID。

```
file_put_contents($filename, $content);
system("chown 1002 " . $filename . ""); 
```

但是我只在生产服务器中收到此错误（测试服务器工作正常）

```
chown: changing ownership of `/var/spool/asterisk/06h12m7.call':
Operation not permitted 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T03:17:53.067

如果您是 root 用户（或以 root 权限运行），您只能更改文件的所有者。

> 尝试将文件文件名的所有者更改为用户用户。只有超级用户可以更改文件的所有者。 [http://www.php.net/manual/en/function.chown.php](http://www.php.net/manual/en/function.chown.php)

很可能在您的测试服务器上运行 php 脚本的 apache 进程已经拥有该文件，或者您正在以 root 权限运行它，而在您的生产服务器上并非如此。我绝对不建议在具有 root 权限的生产环境中运行。

一些可能会根据情况有所帮助的变通方法，您可以使用该`chgrp`功能更改文件的“组”设置。对文件具有写入权限的任何人都允许这样做。您还可以使文件对使用该`chmod`函数的任何人都可写，尽管这可能很危险。下面列出了这两个函数的链接：

*   [http://www.php.net/manual/en/function.chgrp.php](http://www.php.net/manual/en/function.chgrp.php)
*   [http://www.php.net/manual/en/function.chmod.php](http://www.php.net/manual/en/function.chmod.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T03:18:52.490

由于您在`Linux`我假设您使用`Apache`服务器时标记了这个问题。在生产服务器`Apache`中，拥有所有 php 进程的进程通常由`apache user`非`root user`.

记住这一点，您要做的是使用该`chown`函数（将作为 apache 用户执行）来更改您不拥有的文件的所有者。（是的，您只能将所有者更改为您拥有的文件）。

您会看到，引用 php 手册，[chown](http://www.php.net/manual/en/function.chown.php)函数**尝试**更改所有者：

> 尝试将文件文件名的所有者更改为用户用户。只有超级用户可以更改文件的所有者。

在生产服务器中，您通常以用户目录模式运行，这意味着您绑定到主目录中的文件，类似`/home/yourusername/public_html`这样，`/var`目录中的文件根本无法触及（它们通常由root) 这就是为什么你不能 chown。

我希望它有所帮助。干杯!

# android - Android 应用程序在模拟器中运行良好，但在真实设备中运行不正常？

> ID：13225456
> 
> 赞同：0
> 
> 时间：2012-11-05T03:11:31.047
> 
> 标签：android, android-emulator, forceclose

我正在制作一个简单的音乐播放器应用程序。它已经在我的模拟器上完美运行，但在我的设备上安装它后，它给出 *“应用程序`MusicShare`（进程 com.example.musicshare）已意外停止。请重试”*。

我的设备是 Galaxy S2，我从 bin 文件夹中获取了 apk。我尝试使用“导出 w/o 未签名密钥，但无法安装它。这是**清单**：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.musicshare"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidBuildingMusicPlayerActivity"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".PlayListActivity" />
    </application>

</manifest> 
```

任何帮助将不胜感激。谢谢！

**编辑：**

这是我在设备上调试后 logcat 的错误日志：

```
11-05 17:31:17.705: D/dalvikvm(6222): GC_EXTERNAL_ALLOC freed 44K, 53% free 2551K/5379K, external 0K/0K, paused 23ms
11-05 17:31:17.760: D/dalvikvm(6222): GC_EXTERNAL_ALLOC freed 11K, 53% free 2575K/5379K, external 466K/518K, paused 28ms
11-05 17:31:17.790: D/AndroidRuntime(6222): Shutting down VM
11-05 17:31:17.790: W/dalvikvm(6222): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
11-05 17:31:17.795: E/AndroidRuntime(6222): FATAL EXCEPTION: main
11-05 17:31:17.795: E/AndroidRuntime(6222): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.musicshare/com.example.musicshare.AndroidBuildingMusicPlayerActivity}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.os.Looper.loop(Looper.java:123)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread.main(ActivityThread.java:3691)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at java.lang.reflect.Method.invokeNative(Native Method)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at java.lang.reflect.Method.invoke(Method.java:507)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at dalvik.system.NativeStart.main(Native Method)
11-05 17:31:17.795: E/AndroidRuntime(6222): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
11-05 17:31:17.795: E/AndroidRuntime(6222):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at java.util.ArrayList.get(ArrayList.java:311)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at com.example.musicshare.AndroidBuildingMusicPlayerActivity.playSong(AndroidBuildingMusicPlayerActivity.java:273)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at com.example.musicshare.AndroidBuildingMusicPlayerActivity.onCreate(AndroidBuildingMusicPlayerActivity.java:80)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-05 17:31:17.795: E/AndroidRuntime(6222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
11-05 17:31:17.795: E/AndroidRuntime(6222):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:53:16.297

@Pleerock 是正确的。显然这是路径的问题。它应该是“/sdcard/media/audio/Music/”。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T14:13:18.147

有时您需要导出整个项目并获取 .apk 文件并安装它

# php - 在 MySQL 中计算概率

> ID：13225457
> 
> 赞同：0
> 
> 时间：2012-11-05T03:11:43.587
> 
> 标签：php, mysql

我知道我的订单需要很多计算，但我希望您能将其视为一项挑战。

我有一个名为的表`matchup`，如下所示：

*注意：每列的数据类型（除了`players`）是`decimal(5,2)`*

```
+------------------------------------------------------------------+
|players    player1 player2 player3 player4 player5 player6 player7|
+------------------------------------------------------------------+
|player1    NULL    47.01   52.22   47.59   47.79   43.67   47.61  |
|player2    51.34   NULL    51.76   49.29   48.22   44.46   48.16  |
|player3    46.00   46.33   NULL    41.90   40.46   41.17   39.66  |
|player4    50.34   48.39   55.65   NULL    50.47   44.89   48.48  |
|player5    50.23   49.25   56.76   46.76   NULL    47.27   47.61  |
|player6    54.96   53.77   56.92   53.33   51.36   NULL    49.07  |
|player7    51.03   50.00   58.12   49.12   50.20   48.55   NULL   |
+------------------------------------------------------------------+ 
```

该表显示了每个玩家对抗其他玩家的概率（以% 为单位）。该表应如下所示：例如 player1 有 47.01% 的机会战胜 player2。球员对自己的概率在这里没有意义，在计算赔率时应该省略这些数据。

想象一下，你是一个球队的经理，你知道你的对手球队将由**1-5 名球员组成**。球员姓名将在以下变量中给出`$a`，`$b`, `$c`, `$d`, `$e`。例如，它可能是`$a='player2';` `$b='player4';` `$c='player7'`（在这种情况下，我们的对手球队中只有 3 名球员）。

鉴于这些信息，目标是确定哪些是面对敌方球队的最佳球员，并为他们提供战胜另一支球队的机会。

在这个例子中，每个球员战胜对手球队的概率由下式给出：

```
player1 = mean(47.01; 47.59; 47.61) = 47.40
player2 = cannot be chosen (because it is already chosen by the other team)
player3 = mean(46.33; 41.90; 39.66) = 42.63
player4 = cannot be chosen
player5 = mean(49.25; 46.74; 47.71) = 47.87
player6 = mean(53.77; 53.33; 49.07) = 52.06
player7 = cannot be chosen 
```

此结果应预设为关联数组，其值按降序排列：

```
$result = array(
'player6' => '52.06',
'player5' => '47.87',
'player1' => '47.40',
'player3' => '42.63'
); 
```

请注意，此表只是一个摘录，代码应考虑到该表可能涉及超过 7 名玩家。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:46:56.120

我会改变你的表结构

**表播放器：**
PlayerID
PlayerName
...

**表团队：**
TeamID
TeamName
...

**表 TeamMembership**
TeamID
PlayerID

**表概率**
Player1ID
Player2ID
Probability1Beats2

然后，假设 Team ID 1 像您的示例一样由玩家 ID 2、4 和 7 组成，您将执行以下操作：

```
SELECT Pl.PlayerName, SUM(Pr.Probability1Beats2)/COUNT(DISTINCT(Pr.Player2ID)) AS Avg
FROM (Team T LEFT JOIN TeamMembership M ON T.TeamID = M.TeamID), Probability Pr, Player Pl
WHERE Pr.Player2ID = M.PlayerID
AND M.TeamID = 1
AND Pr.Player1ID NOT IN (
    SELECT PlayerID FROM TeamMembership M2
    WHERE M2.TeamID = 1
) 
AND Pr.Player1ID = Pl.PlayerID
GROUP BY Pr.Player1ID
ORDER BY Avg DESC 
```

该查询可能并不完美，但它应该给你一个线索。

# scheme - 是否有任何使用方案开发的窗口管理器？

> ID：13225458
> 
> 赞同：1
> 
> 时间：2012-11-05T03:11:47.003
> 
> 标签：scheme, racket, chicken-scheme

现在 stumpwm 是我每天的桌面。太棒了，我非常喜欢。stumpwm 是使用通用 lisp 开发的，这是一种实用的 FP 语言。

Scheme 比 common lisp 更古老。而且似乎很少有使用方案开发的应用程序。方案是否只适用于教学？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:01:52.760

锯鱼呢？它是用一种名为的语言编写的，这种语言`rep`是它自己的类似于 Scheme 的方言。

# c# - 不使用 openfiledialog 自动选择视频文件

> ID：13225460
> 
> 赞同：1
> 
> 时间：2012-11-05T03:12:07.473
> 
> 标签：c#

我正在使用 AForge 代码在我的程序中使用 c# 播放视频，它运行良好。这是代码：

```
private void loadButton_Click(object sender, EventArgs e)
{
    if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        FileVideoSource fileSource = new FileVideoSource(openFileDialog1.FileName);
        OpenVideoSource(fileSource);
    }
} 
```

当我们单击加载按钮并选择要播放的视频时，此代码将播放视频。但是我希望视频在单击加载按钮后自动选择所选视频。

我尝试了这段代码，但是视频甚至没有播放。

```
private void loadButton_Click(object sender, EventArgs e)
{
    FileVideoSource fileSource = new FileVideoSource("C:\\Users\\videoplay.mp4");
    OpenVideoSource(fileSource);
} 
```

请帮我修改代码。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:13:37.423

`\v`是垂直制表符的转义码。
你需要`\`通过写作来逃避`\\`。

更好的是，使用不会与`\`s 混淆的逐字字符串文字：

```
@"C:\Users\videoplay.mp4" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:16:35.047

您需要转义文件名中的另一个反斜杠：`"C:\\Users\\Videoplay.mp4"`. （您的第二个代码段中还有一个额外的结尾`}`。）

它不起作用的唯一其他原因是如果`"C:\Users\videoplay.mp4"`不存在，或者如果用户无权访问该文件夹（可能是这种情况 - 正确的路径将是`"C:\Users\<username>\Documents\videoplay.mp4"`代替）。

# mysql - 如何向 MySQL 中的整数列添加正整数约束？

> ID：13225461
> 
> 赞同：16
> 
> 时间：2012-11-05T03:12:09.320
> 
> 标签：mysql, constraints

我们如何添加一个强制列只有正值的约束。

尝试了以下mysql语句，但它不起作用

```
create table test ( test_column integer CONSTRAINT blah > 0); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T03:14:50.870

您将使用关键字`unsigned`来表示整数不允许“符号”（即 - 它只能是正数）：

```
CREATE TABLE test (
    test_column int(11) unsigned
); 
```

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)阅读有关数字数据类型（有符号和无符号）的更多信息。

至于防止插入负值的实际*约束*[`CHECK`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)，MySQL 有一个可以在`CREATE TABLE`语句中使用的子句，但是，根据文档：

> CHECK 子句被解析，但被所有存储引擎忽略。

作为参考，这是您将如何使用它（虽然它会执行得非常好，但它什么也不做 - 正如手册所述）：

```
CREATE TABLE test (
    test_column int(11) unsigned CHECK (test_column > 0)
); 
```

**更新**（完全拒绝负值）
我从您的一些评论中注意到，您希望完全拒绝具有负值的查询并且不设置为`0`（就像对列的正常事务`unsigned`那样）。一般来说，没有任何约束可以做到这一点（至少我知道），但是，如果你打开严格模式（with [`STRICT_TRANS_TABLES`](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_strict_trans_tables)）任何将负值插入无符号列的查询都会失败并出现错误（以及任何其他数据插入错误，例如无效`enum`值）。

您可以通过在插入命令之前运行以下命令来测试它：

```
SET @@SESSION.sql_mode = 'STRICT_TRANS_TABLES'; 
```

如果它适合您，您可以使用`sql-mode="STRICT_TRANS_TABLES"`或使用更新您的 MySQL 配置`SET @@GLOBAL.sql_mode = 'STRICT_TRANS_TABLES';`（我不确定该`SET`命令是否会影响全局 mysql 配置，因此更新实际配置文件可能会更好）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-23T15:22:06.617

从 MySQL [8.0.16](https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-16.html) (MariaDB [10.2.1](https://mariadb.com/kb/en/library/mariadb-1021-release-notes/) ) 开始，强制执行[`CHECK`约束](https://dev.mysql.com/doc/refman/8.0/en/create-table-check-constraints.html)。（在早期版本中，约束表达式在语法中被接受但被忽略）。

因此，您可以使用：

```
CREATE TABLE test (
    test_column INT CHECK (test_column > 0)
); 
```

或者

```
CREATE TABLE test (
    test_column INT,
    CONSTRAINT test_column_positive CHECK (test_column > 0)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:15:38.570

您应该使用 UNSIGNED INTEGER 数据类型。欲了解更多信息，[请单击此处](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T03:15:52.733

解决这个问题的方法是明确告诉 MySQL 服务器创建一个无符号整数。

```
CREATE TABLE tbl_example ( 
example_id INT UNSIGNED NOT NULL AUTO_INCREMENT, 
example_num INT UNSIGNED NOT NULL, 
example_text TEXT 
PRIMARY KEY (`example_id`) 
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T03:16:10.307

仅用于`unsigned`仅允许正值。

```
CREATE TABLE hello 
(
    world int unsigned
); 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/10304)

*取消注释该行，您将看到错误消息：**数据截断：第 1 行列“世界”的值超出范围：***

# jquery - 如何验证 jquery.serialize() 中的每个参数？

> ID：13225464
> 
> 赞同：1
> 
> 时间：2012-11-05T03:12:31.603
> 
> 标签：jquery, validation, serialization

我有一个像下面这样的表格：

```
<form id="gb">
  <div><input type="text" name="a" value="" /></div>
  <div><input type="text" name="b" value="" /></div>
<div><input type="submit" name="s" value="Submit" /></div>
</form> 
```

我使用 jquery.serialize() 方法进行序列化：

```
$('form#gb').submit(function() {
  $catch = $(this).serialize();

  /* This produces a query string: 
  a=XXXX&b=XXXXX */

  ...
  /* i want to validate a & b here */
  ...

  $.ajax({
     /* My Ajax Code */
  });

}); 
```

我想在 ajax 操作之前验证 a & b 值，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:21:11.810

您可以使用[serializeArray()。](http://api.jquery.com/serializeArray/)

> 该`.serializeArray()`方法创建一个 JavaScript 对象数组，准备好被编码为 JSON 字符串。它对表示一组表单元素的 jQuery 对象进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:42:56.800

始终进行服务器端验证。话虽这么说，如果您想在执行服务器端验证之前添加客户端验证，请查看此 jquery 验证插件。 [http://docs.jquery.com/Plugins/Validation#Example](http://docs.jquery.com/Plugins/Validation#Example)

## Javascript

```
$(document).ready(function(){
    $("#commentForm").validate({submitHandler: function(form) {
        // some other code
        // maybe disabling submit button
        // then:
        $.ajax({
             /* My Ajax Code */
        });
    });
}); 
```

## HTML

```
<form class="cmxform" id="commentForm" method="get" action="">
    <fieldset>
         <legend>A simple comment form with submit validation and default messages</legend>
    <p>
    <label for="cname">Name</label>
    <em>*</em><input id="cname" name="name" size="25" class="required" minlength="2" />
    </p>
    <p>
    <label for="cemail">E-Mail</label>
    <em>*</em><input id="cemail" name="email" size="25"  class="required email" />
    </p>
    <p>
    <label for="curl">URL</label>
    <em>  </em><input id="curl" name="url" size="25"  class="url" value="" />
    </p>
    <p>
    <label for="ccomment">Your comment</label>
    <em>*</em><textarea id="ccomment" name="comment" cols="22"  class="required"></textarea>
    </p>
    <p>
    <input class="submit" type="submit" value="Submit"/>
    </p>
    </fieldset>
</form> 
```

# php - 在 Kohana 3.3 中修改 url 参数

> ID：13225465
> 
> 赞同：0
> 
> 时间：2012-11-05T03:12:44.623
> 
> 标签：php, kohana, kohana-3

有没有办法在加载时更改 url 请求中的参数？

我的路线基本上检查网址中的语言`http://localhost/<language>/<controller>`

但是问题是，如果在语言参数中插入随机文本，它会加载默认文本，我设置翻译文件的方式将输出如下内容`menu.home`

无论如何，控制器是否可以使用默认语言重定向到 url？例如`http://localhost/fakeLanguage/home`将重定向到`http://localhost/en/home`并`http://localhost/fakeLanguage/about`重定向到`http://localhost/en/about`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:24:26.440

您的 Route 必须使用正则表达式过滤段，如下所示：

```
// load available language names from config
$langs = Kohana::$config->load('lang.available');
Route::set('lang_route', '<language>/<controller>', array('language' => '('.implode('|', $langs).')'))
    ->defaults(...); 
```

或者使用[路由过滤器](http://kohanaframework.org/3.3/guide/kohana/routing#route-filters)，可以轻松修改路由段值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:53:49.757

虽然这只是一种可能的解决方案的粗略想法，但您可能需要考虑定义所有受支持语言的数组。像这样的东西：

```
<?php
/*
    Part 1 - Create an array of all the known languages. Consider making this part of the application configuration file.
*/
$languages = array(
    "en",
    "ge",
    "pirate"
);
?> 
```

然后检查控制器文件中的那个数组。也许使用控制器的 before 方法：

```
<?php
/*
    Part 2 - In the controller file add a before method that checks to see if the requested language exists.
*/
public function before(){
    if(!in_array($this->request->param('langauge'),$languages)):
        // If the language is unknown perform a redirect.
        url::redirect('DEFAULT_LANGUAGE_URL');
    endif;
}
?> 
```

转换上面 URL 结构的第一段可以使用如下代码完成：

```
<?php
    // Get the current URI
    $url = $this->request->detect_uri();

    // Get the query string
    // Note: If you aren't interested in preserving the query string this next line can be removed.
    if($_SERVER['QUERY_STRING'] != '') $url .= '?'.$_SERVER['QUERY_STRING'];

    // Set the default language. Consider setting this in your application configuration file instead.
    $defaultLanguage = 'pirate';

    // Replace the first URI segment with the default language.
    $redirectURL = preg_replace("/^\/.*?(\/.*)$/",("/{$defaultLanguage}$1"),$url,1);
?> 
```

# javascript - 带有 JS 的站点属性（续）

> ID：13225467
> 
> 赞同：0
> 
> 时间：2012-11-05T03:13:15.293
> 
> 标签：javascript, properties

由于我的问题在这里： [Passing site properties with javascript](https://stackoverflow.com/questions/13061351/passing-site-properties-with-javascript) 我使用下面的代码在数据目标等于页面上的某些元素类的任何情况下将文本从一个 div 传递到另一个。

```
$('#sp').children().each(function() {
    $($(this).data().target).html($(this).html());
}); 
```

但是，我想知道是否不是将文本传递给 html 元素，如果我可以在页面上键入等于数据目标值的文本 - 然后将该文本替换为数据目标中的文本。例如：

```
<div id="sp" style="display:none;">
<span data-target=".busFullName">My Great Company</span>
</div>

<!-- On some page -->
<p>sp.busFullName has been around since 1920</p>

<!-- Rendered text would be -->
<p>My Great Company has been around since 1920</p> 
```

这样我就不必每次使用创建的属性时都创建额外的标签。

任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:38:48.910

我认为您不应该采用这种方法，因为如果 JavaScript 在客户端环境中不可用，它会使您的代码在语义上毫无意义并且有些难以理解。话虽这么说，但我*会*怎么做：

```
(function(){
    // Containing element's ID
    var boxID = "#sp";
    // All data-target elements within containing element
    $("[data-target]", boxID).html(function(a,b){
        // Pattern of #id.targetValue
        var pattern = boxID.slice(1) + $(this).data("target");
        // Find everything in body that contains this pattern
        $(":contains("+pattern+")", "body").html(function(c,d){
            // Replace instances of pattern in html with html
            return d.replace(pattern, b);
        });
    });
})();​ 
```

演示：http: [//jsfiddle.net/rpHB2/3/](http://jsfiddle.net/rpHB2/3/)

# memcached - Memcached 设置编号属性

> ID：13225474
> 
> 赞同：0
> 
> 时间：2012-11-05T03:14:20.850
> 
> 标签：memcached

将 key:value 存储到 memcached 中返回`set namespace:key_name 0 1209600 673`

0、1209600 和 673 是什么意思？环顾四周，但找不到它的意思。感谢有人可以将我指向文档或在此处详细说明，谢谢！

# iphone - Google MK-map 视图和 Mk-map 类型通过分段控制选择

> ID：13225475
> 
> 赞同：0
> 
> 时间：2012-11-05T03:14:40.270
> 
> 标签：iphone, ios, google-maps, ios4, iphone-sdk-3.0

这是代码

```
-(id) initWithNibName:(NSString*) nibNameOrNil bundle:(NSBundle*)nibBundleOrNil
{
   ...
   [segCtrl addTarget:self action:@selector(OnSegCtrlChanged:) forControlEvents:UIControlEventValueChanged];
}

-(void)OnSegCtrlChanged:(id)sender
{
   if(segCtrl.selectedSegmentIndex==0)
   {
      [mapvw setMapType:MKMapTypeSatellite];
   }
   else if//....
} 
```

我的更改地图图像显示的代码看起来就像那样，可悲的是，在我编译并运行程序后，根本没有任何效果。“没有任何效果”意味着在我从屏幕上的分段控件中选择索引后，没有显示相应的地图类型。

[**更新**]我猜我在 InitWIthNibName 中放入的分段控件的初始化不正确，因为它不是正确的起点。如果没有，我应该把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:48:40.730

在方法中设置目标`viewDidLoad:`..如下所示..

```
- (void)viewDidLoad
{
       .....
      [segCtrl addTarget:self action:@selector(OnSegCtrlChanged:) forControlEvents:UIControlEventValueChanged];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:12:40.173

在方法中设置它`loadView`..

```
- (void)loadView
{
       .....
      [segCtrl addTarget:self action:@selector(OnSegCtrlChanged:) forControlEvents:UIControlEventValueChanged];
} 
```

这可能会更好....

# ruby-on-rails - 控制器方法作为占位符

> ID：13225476
> 
> 赞同：1
> 
> 时间：2012-11-05T03:14:42.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 中有一个控制器方法，我现在什么都不想做，所以我写

```
def hide
end 
```

作为占位符。

在调用此控制器的页面上有一个链接。当我点击链接时，它说

```
Missing template posts/hide with {:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>[:html], :locale=>[:en, :en]} 
```

是否有可能拥有一个真正什么都不做且不呈现任何页面的控制器（因此用户可以单击链接而没有任何反应）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:19:36.607

试试这个：

```
def hide
  render :nothing => true
end 
```

然而，服务器仍然会被击中，并且用户将看到一个空白页面。我不认为这是你想要的。

听起来您应该使用 jquery 来捕获点击事件并阻止浏览器跟踪链接：

```
<script type="text/javascript">
   $('#the_link_id').click(function(e){
       e.preventDefault();
       return false;
   })
</script> 
```

# asp.net-mvc-3 - 如何使用 ViewBag 在 mvc 中添加 Html Helper

> ID：13225477
> 
> 赞同：2
> 
> 时间：2012-11-05T03:14:49.320
> 
> 标签：asp.net-mvc-3, html-helper, helper, viewbag

我有一个文本区域，需要在某些条件下更改输入类型。我想将此信息作为 ViewBag 参数发送，但我不知道该怎么做。我虽然在控制器中这样做：

```
if(inputtext == 1)
  ViewBag.TextBox = @Html.TextBoxFor(m => m.Name, new { @class =\"inputtext\"})
if(inputtext == 2)
  ViewBag.TextBox = @Html.TextAreaFor(m => m.Name, new { @class =\"inputtext2\"}) 
```

我的观点是这样的：

```
@Html.Raw(ViewBag.TextBox) 
```

但不要工作。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:06:25.083

尝试这个：

在您的控制器中：

```
if(A){ ViewBag.NameControlType = "textbox" }
if(B){ ViewBag.NameControlType = "textarea" } 
```

在你的cshtml中：

```
@if(null != (ViewBag.NameControlType as string))
{
    if(ViewBag.NameControlType == "textbox")
    {
        Html.TextBoxFor(m => m.Name, new { @class ="inputtext"})
    }
    if(ViewBag.NameControlType == "textarea")
    {
        Html.TextAreaFor(m => m.Name, new { @class = "inputtext2")
    }
} 
```

# c# - 目标机器主动拒绝它

> ID：13225482
> 
> 赞同：2
> 
> 时间：2012-11-05T03:15:27.350
> 
> 标签：c#, visual-studio-2008

我正在尝试在笔记本电脑上连接客户端-服务器系统，使用 Visual Studio 2008 构建。我收到了这个错误

> 无法连接，因为目标机器主动拒绝 127.0.0.1:8；

我已经尝试了 PC 的 IP 地址，但不确定要使用哪个端口以及如何检查使用了哪个端口。我还勾选了防火墙选项中的所有私有和公共复选框。

任何线索为什么错误不断出现？

# python - 无法访问 Project Gutenberg 原始文本

> ID：13225484
> 
> 赞同：5
> 
> 时间：2012-11-05T03:15:40.400
> 
> 标签：python, python-2.7, urllib

我在访问 Project Gutenberg 库时遇到问题...我使用的是 Python 2.7.3。我可以访问 NLTK 库并使用 python，但是在尝试访问原始文本时，它不允许我这样做。

我访问的文本是犯罪与惩罚，它的 len(raw) 应该等于 1176831，但给我的 len(raw) 为 288。这是我使用的代码：

```
>>> from __future__ import division
>>> import nltk, re, pprint
>>> from urllib import urlopen
>>> url = "http://www.gutenberg.org/files/2554/2554.txt"
>>> raw = urlopen(url).read()
>>> type(raw)
<type 'str'>
>>> len(raw)
288
>>> raw
'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">\n<html><head>\n<title>403 Forbidden</title>\n</head><body>\n<h1>Forbidden</h1>\n<p>You don\'t have permission to access /files/2554/2554.txt\non this server.</p>\n<hr>\n<address>Apache Server at www.gutenberg.org Port 80</address>\n</body></html>\n'
>>> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:18:39.030

可以在[此处](http://www.gutenberg.org/error403.php)找到 HTTP 403 响应的原因。基本上，该网站“仅供人类（非自动化）用户使用。任何使用自动化工具访问我们网站的行为都将导致您的 IP 地址或子网被临时或永久封锁。”

您的代码“应该有效”，但网站确定您是通过代码而不是浏览器访问该网站。这就是我要说的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T23:56:46.913

```
from urllib import urlopen

url = "http://www.gutenberg.org/files/2554/2554**-0**.txt"

raw = urlopen(url).read() 
```

# java - 用于多个活动的全局 db4o 数据库

> ID：13225485
> 
> 赞同：1
> 
> 时间：2012-11-05T03:15:48.640
> 
> 标签：java, db4o

我正在做一个设计项目，我需要一些关于 db4o 的指导，因为这是我第一次使用它。在项目中，我们有一个 Android 应用程序，它有多个活动并且所有活动都使用同一个数据库。在阅读和谷歌搜索后，这些数据库的打开和关闭对处理器来说很困难，因此在每个活动中打开和关闭是不合理的。

如何打开和关闭需要在整个应用程序生命周期中使用的 db4o 数据库？我什么时候/在哪里调用打开和关闭？

编辑：我是否需要应用程序中的退出/关闭按钮来何时调用关闭数据库方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:48:52.950

如果这可行，我不是 100%，因为我的 Android 知识是有限的。

**自定义应用程序对象** 您可以注册您的自定义应用程序对象。见[这里](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android#)。该对象可以生命周期回调，在您的应用程序启动或终止时调用。它在活动中保持活力。

因此，创建您自己的扩展 android.app.Application 的应用程序：

```
public class MyApplication extends Application {
    private volatile ObjectContainer container;
    @Override
    public void onCreate() {
        super.onCreate();
        // the application object is a regular Android context,
        // So you can get the required info`
        this.container = Db4oEmbedded.openFile(...)
    }

    @Override
    public void onTerminate() {
        super.onTerminate();
        // if something was not finished, better rollback
        container.rollback();
        container.close();
    }

    public ObjectContainer database(){
        return container;
    }

} 
```

然后将该对象注册为：

```
<application android:icon="@drawable/icon" 
       android:label="@string/app_name" 
       android:name="my.packages.MyApplication"> 
```

然后，您可以在活动中的任何时间使用以下实例：

```
MyApplication app = (MyApplication) getApplication();
ObjectContainer container = app.database(); 
```

**静态单例**

另一种解决方案可以是经典的“静态”单例。只要您的应用程序正在运行，就会加载同一个类的实例。所以它会让容器保持活力。

# bash - Bash，在带有子目录的目录中的每个 .jpg 文件上运行脚本

> ID：13225488
> 
> 赞同：5
> 
> 时间：2012-11-05T03:16:32.617
> 
> 标签：bash, unix

我有一些工作代码，非常简单 - 它复制每个 *.jpg 文件，将其重命名为 *1.jpg，不用担心。

```
for i in *.jpg; do cp $i ${i%%.jpg}1.jpg;  done 
```

我该如何运行它，以便它适用于目录中的每个文件，该目录的子目录中的每个文件

示例目录结构：

```
 test/test1/test2/somefile.jpg
    test/anotherfile.jpg
    test/test1/file.jpg
etc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T03:22:30.583

以递归方式对目录结构执行任何操作的命令是`find`：

```
find . -name "*.jpg" -exec bash -c 'file="{}"; cp "$file" "${file%%.jpg}1.jpg"' \; 
```

使用`-exec`代替`for i in $(find ...)`将处理包含空格的文件名。当然，还有一个引用陷阱；如果文件名包含 a `"`，`file="{}"`则将扩展为`file="name containing "quote characters""`，这显然已损坏（`file`将变为`name containing quote`并尝试执行`characters`命令）。

如果你有这样的文件名，或者你可能有，那么使用 打印出用空字符（文件名中不允许的）分隔的每个文件名`-print0`，并使用`while read -d $'\0' i`循环以空分隔的结果：

```
find . -name "*.jpg" -print0 | \
    (while read -d $'\0' i; do cp "$i" "${i%%.jpg}1.jpg";  done) 
```

与任何像这样的复杂命令一样，最好在不执行任何操作的情况下对其进行测试，以确保它在运行之前扩展为合理的东西。最好的方法是在实际命令前面加上`echo`，因此您将看到它将运行的命令，而不是运行它：

```
find . -name "*.jpg" -print0 | \
    (while read -d $'\0' i; do echo cp "$i" "${i%%.jpg}1.jpg";  done) 
```

一旦你注意到它并且结果看起来不错，删除`echo`并再次运行它以真正运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:34:24.847

如果你有 Bash 4，你可以`globstar`用来启用递归文件名扩展（即匹配子目录中的文件）

```
shopt -s globstar
for i in **/*.jpg; do cp "$i" "${i%%.jpg}1.jpg";  done 
```

p / s：我在参数周围添加了引号`cp`，以防文件名中有空格或诸如此类。

# php - 奇怪的php setcookie

> ID：13225493
> 
> 赞同：1
> 
> 时间：2012-11-05T03:17:23.420
> 
> 标签：php, cookies, setcookie

我有一个奇怪的 php setcookie 问题。让我显示代码

```
setcookie('aaa', 'aaa', time()+100);  // aaa cookie can be set
if($_POST){
    setcookie('bbb', 'bbb', time()+100);   // bbb cookie can't be set
    echo 'bbb';
} 
```

可以设置aaa cookie。但是不能设置 bbb cookie。
我 100% 确定 if 条件为真且 bbb 为回显。

这是真正的代码。
但最奇怪的是有时可以设置'bbb' cookie。
所以我认为有一些配置问题。

我正在运行 Apache(2.2.20) 和 PHP(5.3.6)

**编辑：<br> 我在同一域和同一目录的 iframe 中运行此页面。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:30:42.100

通常，当您在设置 cookie 时遇到问题，是因为`headers`在您之前已经发送了 cookie `setcookie`。当你处于这种`if`状态时，做

```
if(headers_sent()) 
    throw new Exception('Headers were already sent!!!'); 
```

如果您遇到异常，那么您的标头会在您设置 cookie 之前发送，因此您的 cookie 不会发送到客户端的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T03:27:44.447

你在测试什么？有一个帖子数组还是有值？在你的条件中明确反映你想要什么。根据需要使用 empty()、is_null()、===、== 或 isset()。我猜你真的想确保发布值，所以使用

```
if(!empty($_POST)){
  // values were posted, do cookie stuff here....
} 
```

如果您不关心值是否是 posred，但实际上只是想知道该操作是 post 使用：

```
 if ($_SERVER['REQUEST_METHOD'] === 'POST') { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T03:33:58.187

您需要指定保存 cookie 的参数*路径：*

```
setcookie('name', 'value', time()+100, '/'); 
```

[设置cookie（）](http://www.php.net/manual/en/function.setcookie.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T03:41:02.197

我很确定条件返回错误。

调试的第一步是在条件内回显。

> if($_POST){ echo "测试"; }

另外，我会使用 isset 而不是`if($var)`因为在您的情况下，如果`$_POST`未设置，您将生成一个您必须禁止的通知。

有更好、更精确的方法来正确处理这种情况。例如：`isset($var)`,`!isset($var), is_null($var), empty($var)`

添加 ：

既然你说 echo 有效，我建议使用 setcookie 和所有基本句柄。

> if($_POST){ setcookie('bbb', 'bbb', time()+100, '/','yoursite.com'); }

我不确定这是否必须做任何事情，但试试看。显然你需要在到期前检查（不到 2 分钟）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T03:25:39.240

您无法设置 cookie 的原因是如果：

```
if($_POST){
    setcookie('bbb', 'bbb', time()+100);   // bbb cookie can't be set
} 
```

正在回归`false`。

你可能的意思是：

```
if(isset($_POST['bbb']) && $_POST['bbb'] !="") {
    setcookie('bbb', 'bbb', time()+100);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T03:26:12.223

```
if($_POST) { ... } 
```

与其他请求方法不同，它不是检测 POST 请求的可靠方法。

相反，您可能想要使用类似的东西：

```
if($_SERVER['REQUEST_METHOD'] === 'POST') { ... } 
```

# ios - 如何以编程方式更改文本字段字体大小？

> ID：13225494
> 
> 赞同：9
> 
> 时间：2012-11-05T03:17:35.183
> 
> 标签：ios, swift, xcode

我有一个创建文本字段的按钮，我还有一个更改文本字段字体的按钮。我创建了 3 个不同标题的按钮：`17,20,36`. 我想要那个按钮的功能来改变文本字段的字体大小，我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T06:27:48.787

如果你想简单地改变你的文本字段的字体大小，而不是同时改变它的字体样式，下面的代码可能是有效的：`

```
UITextField *yourTextField = [[UITextField alloc]init];
CGFloat yourSelectedFontSize = 14.0 ;
UIFont *yourNewSameStyleFont = [yourTextField.font fontWithSize:yourSelectedFontSize];
yourTextField.font = yourNewSameStyleFont ; 
```

您必须注意的一件事是：当您更改文本字段的字体大小时，您应该始终注意您的文本字段视图的高度，保持您的文本文件高度高于您的字体高度！

你可以试一试！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-05T10:34:44.547

**斯威夫特 4**是这样的：

```
yourTextField.font =  UIFont.init(name: (Montserrat.bold.rawValue), size: 18.0) 
```

相反，Monserrat 使用您的字体

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-16T12:25:57.363

**Swift 3**版本接受的答案：

```
let yourTextField = UITextField()
let customFont:UIFont = UIFont.init(name: (textField.font?.fontName)!, size: 14.0)!
font = customFont
yourTextField.font = customFont 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T04:28:37.440

是的，你可以做到。

但您还必须更改 textField 的框架（以显示完整（高度）文本）

```
[tFild_1 setFont:[UIFont fontWithName:@"Helvetica Neue" size:17]]; 
```

而不是“Helvetica Neue”使用您的字体名称。

谢谢，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-07T09:34:27.937

您可以使用`NSAttributedString`将属性添加到`TextField`

```
let textAttributes: [NSAttributedString.Key: Any] = [
        NSAttributedString.Key.strokeColor: /* TODO: fill in appropriate UIColor */,
        NSAttributedString.Key.foregroundColor: /* TODO: fill in appropriate UIColor */,
        NSAttributedString.Key.font: UIFont(name: "HelveticaNeue-CondensedBlack", size: 40)!,
        NSAttributedString.Key.strokeWidth:  /* TODO: fill in appropriate Float */
    ]

yourTextField.defaultTextAttributes = textAttributes 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-28T04:14:14.733

斯威夫特 4：

```
textField1.font = UIFont(name: "Avenir", size: 22) 
```

# algorithm - 开发树突变算法

> ID：13225495
> 
> 赞同：0
> 
> 时间：2012-11-05T03:17:43.063
> 
> 标签：algorithm, permutation, pseudocode

我必须想出一个有效的算法，采用这种格式的树：

```
 ?           
   /  \       
  ?    ?      
 / \  / \  
G  A  A  A 
```

并用提供最少突变量的值填充问号节点。值只能是 {A, C, T, G}。树将始终具有相同的形状和数量的节点。此外，它总是会填充叶节点，其余节点将是需要填充的问号。

例如，右边的树是正确的，并且比左边的树具有更少的突变。

```
 A           A
   /  \        /  \
  G    G      A    A
 / \  / \    / \  / \
G  A  A  A  G  A  A  A 
```

当父节点与子节点不同时，就会发生突变。因此，左上方的树包含五个突变，而右上方有一个。

有人可以通过提供伪代码来帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:49:23.787

这看起来像从树的底部向上的动态编程。对于每个节点，您要针对这些可能性中的每一个制定出将该节点标记为 A、C、T 或 G 的成本最低的解决方案。您可以通过使用先前为该节点正下方的节点计算的每种可能性的成本来解决此问题。只是计算成本的代码可能有点像这样。

```
LeastCost(node, colourHere)
{
  foreach colour
    leastLeft[colour] = LeastCost(leftChild, colour)
    leastRight[colour] = LeastCost(rightChild, colour)
  best = infinity
  foreach combination
    cost = leastLeft[combination.leftColour] +
      leastRight[combination.rightColour]
    if (combination.leftColour != colourHere)
      cost++;
    if (combination.rightColour != colourHere)
      cost++;
    if (cost < best)
      cost = best;
  return cost
} 
```

要返回最佳答案以及最佳成本，您还需要跟踪与最佳答案相对应的组合。想一想，您可以通过同时计算每个节点的所有四种颜色的答案来节省时间。

# c++ - 如何将工作目录更改为程序所在的位置

> ID：13225500
> 
> 赞同：5
> 
> 时间：2012-11-05T03:18:08.063
> 
> 标签：c++, xcode, macos

我想使用 c++ 在 Mac OS 上打开文件。

如果我在Xcode下运行程序，工作目录和程序是一样的，没问题。但是，如果我尝试在终端中运行程序，工作目录总是“用户/用户名”。你知道如何将工作目录更改为程序所在的位置吗？

这是示例代码：

```
#include <iostream>
#include <fstream>
using namespace std;
int main (int argc, const char * argv[])
{
    char * dir = getcwd(NULL, 0); 
    cout << "Current dir: " << dir << endl;

    ifstream fin("hi.txt");
    if (fin.is_open()) cout << "File is Open" << endl;
    else cout << "File is not open" << endl;    
    fin.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T00:38:55.907

`$(PROJECT_DIR)`在您的方案调试设置中使用工作目录中的值：

![在此处输入图像描述](../Images/7f174db971322797885ec182494f71be.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:43:59.577

您可以在 Xcode 中为您的项目设置自定义工作目录。在 Xcode 4 中，从项目窗口工具栏中的 Scheme 菜单中选择 Edit Scheme 以打开方案编辑器。从项目编辑器的左侧选择运行步骤。单击方案编辑器顶部的选项按钮。选中使用自定义工作目录复选框。单击文本字段右侧的按钮以选择工作目录。

![在此处输入图像描述](../Images/ec0b92db422c2b7774adec5a6582e2a2.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-26T03:46:38.743

这是一篇非常古老的帖子 - 更新 Xcode 12 的一些信息（2020 年 9 月）

第1步）。Xcode -> Product -> Scheme -> Edit Scheme（或新建一个）

[![截图在哪里可以找到 EditScheme](../Images/1bf7aab854dfb89695aa00443fcfc46b.png)](https://i.stack.imgur.com/2ah0e.png)

步骤 2) RUN(DEBUG)，Working Directory(Checkmark) 并输入 $(PROJECT_DIR) 作为起点。

[![方案中要更改/编辑的项目](../Images/019cfe6b55f022dd3a228f0c7a85f189.png)](https://i.stack.imgur.com/yB41L.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T03:35:30.167

您可以使用 chdir()，请参见此处：[Change the current working directory in C++](https://stackoverflow.com/questions/3485166/change-current-working-directory-c)。

或者，如果您总是可以发出系统调用 (stdlib.h)：[http](http://www.cplusplus.com/reference/clibrary/cstdlib/system/) ://www.cplusplus.com/reference/clibrary/cstdlib/system/ 。这不是便携式的，但它可能足以满足您的需要。

# c - 运行时使用 free() 时访问冲突，但在调试时不使用...慢慢地

> ID：13225501
> 
> 赞同：2
> 
> 时间：2012-11-05T03:18:09.157
> 
> 标签：c, free, access-violation

根据我之前的[问题](https://stackoverflow.com/questions/13224113/using-a-pointer-to-a-dynamic-2d-array-within-a-struct)（非常感谢 Jonathan Leffler），我编辑了我的代码（后两个代码块），但我遇到了一个相当奇怪的问题。

以下是不可预知的中断...

```
void free_array(array_info *A)
{
    int i;
    for(i = 0; i < (A->height); ++i)
    {
        printf("About to free: %x\n", A->dat_ptr[i]);//for debugging purposes
        free(A->dat_ptr[i]);
        printf("Freed row %i\n", i);//for debugging purposes
    }
    free(A->dat_ptr);
} 
```

我最初`create_array`直接测试`free_array`，它与相当大的数组（10 ^ 8）完美配合。但是，当我在两者之间进行计算然后尝试`free()`使用数组时，我得到了访问冲突异常 (c00000005)。当我调试它时，我注意到如果我在“free_array”循环中有一个断点并单独执行每一行，程序每次都会完美执行。但是，编译后的代码永远不会自己运行超过我的第二个数组的第 6 行。我关闭了编译器中的所有优化，执行时仍然出现错误。

# 附加信息

```
typedef struct {
    int    height;
    int    width;
    int    bottom;//position of the bottom tube/slice boundary
    unsigned int**  dat_ptr;//a pointer to a 2d array
    } array_info; 
```

`dat_ptr`现在是一个适当的 2D 指针。创建要放入结构中的数组的`create_array`函数是（我已经剥离了 NULL 检查的可读性）：

```
int create_array(array_info *A)
{
int i;
unsigned int **array = malloc(sizeof(*array) * A->height);

for (i = 0; i < A->height; ++i)
{
    array[i] = malloc(sizeof(**array) * A->width);
}

A->dat_ptr = array;
return 0;
} 
```

此功能完全按预期工作。

# 更多附加信息

## 在 Jonathan、Chris 和 rharrison33 的回复之后添加

非常感谢乔纳森，在你的每一篇文章中，我都发现了很多关于编程的知识：）我终于找到了罪魁祸首。导致异常的代码如下：

```
void fill_number(array_info* array,  int value,  int x1,  int y1,  int x2,  int y2)//fills a rectangular part of the array with `value`
    {
    int i, j;
    for(i=y1 ; ((i<=y2)&&(i<array->height)) ; i++)//start seeding the values by row (as in vertically)
    {
        for(j=x1 ; ((i<=x2)&&(i<array->width)) ; j++)//seed the values by columns (as in horizontally)
        {
        array->dat_ptr[i][j]=value;
        }
    }
} 
```

并且`((i<=x2)&&(i<=array->width))`没有像我预期的那样被评估（克里斯多德，你是对的）。我认为它会按该顺序评估这两个条件，或者如果其中一个为“FALSE”则停止，而与它们的顺序无关。然而，事实证明它不是那样工作的，它只是拒绝`(i<array->width)`正确评估零件。另外，我认为它会在尝试访问数组范围之外的内存时触发异常，但事实并非如此。反正，

我将代码更改为：

```
void fill_number(array_info* array,  int value,  int x1,  int y1,
                                                    int x2,  int y2)
{
    int i, j;
    if(y1>=array->height){ y1=array->height-1;}
    if(y2>=array->height){ y1=array->height-1;}
    if(x1>=array->width) { x2=array->width-1;}
    if(x2>=array->width) { x2=array->width-1;}
    for(i=y1 ; i<=y2 ; i++)//start seeding the values by row
    {
        for(j=x1 ; j<=x2 ; j++)//seed the values by column
        {
        array->dat_ptr[i][j]=value;
        }
    }
} 
```

现在它可以工作了。s块在`if()`那里，因为与其他代码相比，我不会经常调用该函数，并且我需要一种视觉方式来提醒我检查在那里。

再次感谢 Jonathan Leffler、Chris Dodd 和 rharrison33 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:05:33.610

这段代码，密切基于你从我这里得到的和你上面写的，似乎按预期工作。注意 and 的使用`<inttypes.h>`（`PRIXPTR`以及转换为`(uintptr_t)`）。它避免了对指针大小的假设，并且在 32 位和 64 位系统上同样有效（尽管这`%.8`意味着您在 32 位编译中获得完整的 8 位十六进制值，以及 12 个（最多 16 个）在这个特定的 64 位平台上）。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <inttypes.h>

typedef struct
{
    int    height;
    int    width;
    int    bottom;
    unsigned int **dat_ptr;  // Double pointer, not triple pointer
} array_info;

static void create_array(array_info *A)
{
    unsigned int **array = malloc(sizeof(*array) * A->height);
    printf("array (%zu) = 0x%.8" PRIXPTR "\n",
           sizeof(*array) * A->height, (uintptr_t)array);
    for (int i = 0; i < A->height; ++i)
    {
        array[i] = malloc(sizeof(**array) * A->width);
        printf("array[%d] (%zu) = 0x%.8" PRIXPTR "\n",
               i, sizeof(**array) * A->width, (uintptr_t)array[i]);
    }
    A->dat_ptr = array;
}

static void free_array(array_info *A)
{
    int i;
    for(i = 0; i < (A->height); ++i)
    {
        printf("About to free %d: 0x%.8" PRIXPTR "\n",
               i, (uintptr_t)A->dat_ptr[i]);
        free(A->dat_ptr[i]);
    }
    printf("About to free: 0x%.8" PRIXPTR "\n", (uintptr_t)A->dat_ptr);
    free(A->dat_ptr);
}

int main(void)
{
    array_info array = { .height = 5, .width = 10, .dat_ptr = 0 };
    create_array(&array);
    if (array.dat_ptr == 0)
    {
        fprintf(stderr, "Out of memory\n");
        exit(1);
    }
    free_array(&array);
    puts("OK");
    return(0);
} 
```

### 样本输出

```
array (40) = 0x7FAFB3C03980
array[0] (40) = 0x7FAFB3C039B0
array[1] (40) = 0x7FAFB3C039E0
array[2] (40) = 0x7FAFB3C03A10
array[3] (40) = 0x7FAFB3C03A40
array[4] (40) = 0x7FAFB3C03A70
About to free 0: 0x7FAFB3C039B0
About to free 1: 0x7FAFB3C039E0
About to free 2: 0x7FAFB3C03A10
About to free 3: 0x7FAFB3C03A40
About to free 4: 0x7FAFB3C03A70
About to free: 0x7FAFB3C03980
OK 
```

我没有`valgrind`上这台机器，但是可以目测分配和释放的地址，表明那里没有明显的问题。巧合的是，我调整了数组的大小，使它们都是 40 字节（在 64 位机器上）。

### 后续问题

*   你还在用你的数据做什么？
*   您分配的数组有多大？
*   你确定你没有遇到算术溢出吗？

* * *

在 Mac OS X 10.8.2 和 GCC/Clang 的 XCode 版本上进行测试：

> i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）

* * *

### 阵列设置和打印功能

```
static void init_array(array_info *A)
{
    unsigned int ctr = 0;
    printf("D       = 0x%.8" PRIXPTR "\n", (uintptr_t)A->dat_ptr);
    for (int i = 0; i < A->height; i++)
    {
        printf("D[%d]    = 0x%.8" PRIXPTR "\n",i, (uintptr_t)A->dat_ptr[i]);
        for (int j = 0; j < A->width; j++)
        {
            printf("D[%d][%d] = 0x%.8" PRIXPTR " (%u)\n",
                   i, j, (uintptr_t)&A->dat_ptr[i][j], ctr);
            A->dat_ptr[i][j] = ctr;
            ctr += 7;
        }
    }
}

static void print_array(array_info *A)
{
    printf("D       = 0x%.8" PRIXPTR "\n", (uintptr_t)A->dat_ptr);
    for (int i = 0; i < A->height; i++)
    {
        printf("D[%d]    = 0x%.8" PRIXPTR "\n",i, (uintptr_t)A->dat_ptr[i]);
        for (int j = 0; j < A->width; j++)
        {
            printf("D[%d][%d] = 0x%.8" PRIXPTR " (%u)\n",
                   i, j, (uintptr_t)&A->dat_ptr[i][j], A->dat_ptr[i][j]);
        }
    }
} 
```

成功后调用`init_array(&array);`，然后调用，我得到了预期的输出。在这里展示太无聊了。`main()``create_array()``print_array(&array);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:29:22.963

我相信你 malloc'ing 不正确。尝试将您的 create_array 函数修改为：

```
int create_array(array_info *A)
{
  int i;
  unsigned int **array = malloc(sizeof(unsigned int*) * A->height);

  for (i = 0; i < A->height; ++i)
  {
    array[i] = malloc(sizeof(unsigned int) * A->width);
  }

  A->dat_ptr = array;
  return 0;
} 
```

# mysql - 在 VB.NET 中更新 DGV 中的多个选定行

> ID：13225502
> 
> 赞同：1
> 
> 时间：2012-11-05T03:18:18.433
> 
> 标签：mysql, vb.net, datagridview

我有一个`DataBound` `DGV`它有 3 个，`Columns`即`ID(not pk)`,`Name`和`Status`。我有 2 个按钮`Add`和`Post`. 添加，添加`Data`到`DGV`和`DataBase(MySql)`但在`Status`，它添加`"No"`。我想要做的是，例如我有 3`Rows`并 `DGV`突出显示这 3 并单击`Post`，其中的值`Status`将更改为`"Yes"`. 这是我到目前为止所做的，但我在`UPDATE QUERY`. **此代码现在可以使用**

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the TestDataSet.testing table. You can move, or remove it, as needed.
        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)
        Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")

            Using cmd
                With cmd
                    MsgBox("Connection Established")
                    .Connection = _conn
                    .Parameters.Clear()
                    .CommandText = "Select Max(TransactionID) from testing"
                    _conn.Open()
                    Dim dr As MySqlDataReader
                    dr = cmd.ExecuteReader()
                    If dr.Read() Then
                        If IsDBNull(dr.Item(0)) Then
                            txtNumber.Text = "1"
                        Else

                            txtName.Text = dr(0).ToString() + 1
                        End If

                    End If
                End With
            End Using
        End Using

        FillGrid()

    End Sub

    Private Sub FillGrid()

        Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
            Using _comm As New MySqlCommand
                With _comm
                    .CommandText = " SELECT `ID`, `TransactionID`, `Name`, `Posted` FROM `testing`"
                    .Connection = _conn
                End With
                Using _adapter As New MySqlDataAdapter(_comm)
                    Try
                        _conn.Open()
                        Dim _ds As New DataSet
                        _adapter.Fill(_ds)
                        GVTransaction.DataSource = _ds.Tables(0)
                    Catch ex As Exception

                    End Try
                End Using
            End Using
        End Using
    End Sub

    Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click
        Using conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
            Using cmd
                With cmd
                    MsgBox("Connection Established")
                    .Connection = conn
                    .Parameters.Clear()
                    .CommandText = "INSERT INTO testing(TransactionID, Name, Posted) VALUES (@ID, @iName, @iPosted)"
                    .Parameters.Add(New MySqlParameter("@ID", txtNumber.Text))
                    .Parameters.Add(New MySqlParameter("@iName", txtName.Text))
                    .Parameters.Add(New MySqlParameter("@iPosted", "No"))

                End With
                Try
                    conn.Open()
                    cmd.ExecuteNonQuery()
                Catch ex As MySqlException
                    MsgBox(ex.Message.ToString())
                End Try
            End Using
        End Using

        MsgBox("Data Added to the Database")

        Me.TestingTableAdapter.Dispose()

        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)
    End Sub

    Private Sub btnPost_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPost.Click

        Dim _ID As New List(Of String)
        Dim _Name As New List(Of String)
        For Each _x As DataGridViewRow In TestingDataGridView.SelectedRows
            _ID.Add(_x.Cells("GVTransactionID").Value.ToString())
            _Name.Add("'" & _x.Cells("GVName").Value.ToString() & "'")
        Next
        Dim inClause As String = String.Join(",", _ID.ToArray())
        Dim inClause1 As String = String.Join(",", _Name.ToArray())
        Dim _sqlUpdate As String = String.Format("UPDATE testing SET Posted = @Posted WHERE TransactionID IN ({0}) AND Name IN ({1})", inClause, inClause1)

        Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
            Using _commm As New MySqlCommand()
                With _commm
                    .CommandText = _sqlUpdate
                    .Connection = _conn
                    .CommandType = CommandType.Text
                    .Parameters.AddWithValue("@Posted", "YES")

                End With
                Try
                    _conn.Open()
                    _commm.ExecuteNonQuery()
                    FillGrid()
                Catch ex As MySqlException
                    MsgBox(ex.StackTrace.ToString)
                End Try

            End Using
        End Using
    End Sub
End Class 
```

非常感谢任何帮助或提示。谢谢，麻烦您了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:44:02.103

试试这个，

```
Dim _ID As New List(Of String) 
Dim _Name As New List(Of String) 
For Each _x As DataGridViewRow In TestingDataGridView.SelectedRows  
   _ID.Add(_x.Cells("TransactionID").Value.ToString())
   _Name.Add("'" & _x.Cells("Name").Value.ToString() & "'")
Next 

Dim inClause As String = String.Join(",", _ID.ToArray()) 
Dim inClause1 As String = String.Join(",", _Name.ToArray()) 
Dim _sqlUpdate As String = String.Format("UPDATE testing SET Posted = @Posted WHERE TransactionID IN ({0}) AND Name IN ({1})", inClause, inClause1)

Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
    Using _comm As New MySqlCommand()
        With _comm
          .CommandText = _sqlUpdate
          .Connection = _conn
        End With
        Try
            _conn.Open()
            _comm.ExecuteNonQuery()
        Catch ex As MySqlException
            MsgBox(ex.Message.ToString())
        End Try

    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:59:31.870

我相信你可以简单地使用这个

```
For Each Row As DataGridViewRow In TestingDataGridView.SelectedRows
   .CommandText = "UPDATE testing SET Posted = @iChange WHERE ID = " & Row.Cells(0) & ", Name = " & Row.Cells(1)
   .CommandType = CommandType.Text
   .Parameters.AddWithValue("@iChange", "Yes")
End For 
```

希望这可以帮助 ：）

# mongodb - 我应该如何在 MongoDB 中存储属于多个其他对象的对象？

> ID：13225506
> 
> 赞同：2
> 
> 时间：2012-11-05T03:19:08.460
> 
> 标签：mongodb, database-design, database, nosql

我有一个我最近一直在使用 MongoDB 的项目。基本上，我网站的核心元素是“项目”。每个项目都将包含一个嵌套的“字符串”对象，该对象将包含大量字符串......因此，每个项目都非常庞大，可以接近一兆字节或更多。因此，我希望将这些项目放在他们自己的收藏中。

我遇到的问题是我不确定如何将用户分配给项目。用户应该包含他们注册的项目列表，还是项目应该包含用户列表？我什么时候应该选择其中之一？还有更好的方法吗？（好久没接触MongoDB了，有点生疏了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:57:32.650

我无法立即想到两者之间有任何严重的停止差异。我想维护它的用户端可能更容易：

*   用户取消订阅项目，因为您只是修改了可能只有原子锁的用户行，这与多个用户可能试图同时取消订阅的项目行不同。因此，一般而言，这样做用户端可能会做出更好的更新和并发性。
*   前一点也适用于订阅项目的用户。
*   用户删除，你只需删除用户行...简单

所以考虑到这些直接想到的事情，我可能会选择在用户中嵌入项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:36:15.420

看看[http://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)。适用于您的情况的指南是

> 一般来说，对于实体之间的“包含”关系，应该选择嵌入。不使用链接时使用链接会导致数据重复。

如果一个用户可以注册多个项目，并且一个项目可以注册多个用户，那么最好为 Projects 和 Users 设置单独的集合。

# c - 将指针转换为空指针

> ID：13225513
> 
> 赞同：4
> 
> 时间：2012-11-05T03:20:25.810
> 
> 标签：c, void-pointers

当我学习使用 qsort 对字符串数组进行排序时，有一个问题让我很困惑。例如，对以下内容进行排序`s`

```
 char *s[] = {
                   "Amit",
                   "Garima",
                   "Gaurav",
                   "Vaibhav"
                }; 
```

要使用 qsort，你必须提供一个比较函数，`cstring_cmp`我猜在 qsort 函数中，要传递给函数的参数类型`cstring_cmp`是`char**`. 如何将 a 转换`char**`为 a `void*`？为什么我们可以将 a 转换`char**`为 a `void*`？

```
 int cstring_cmp(const void *a, const void *b)
    {
        const char **ia = (const char **)a;
        const char **ib = (const char **)b;
        return -strcasecmp(*ia, *ib);
        /* return the negative of the normal comparison */
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:31:05.943

你的问题似乎有点模糊，但无论如何我都会试一试。要回答*如何*，您可以通过简单的强制转换将任何指针类型转换为 C 中的任何其他指针类型。要回答*为什么*，这就是 C 的定义方式。

该`qsort()`函数需要一个具有给定原型（带有`const void *`）参数的函数。这是因为`qsort()`不知道您正在排序的*实际*数据类型，并且必须使用一致的函数原型进行比较回调。在您的情况下，您的比较回调负责将`const void *`参数转换为指向数组中实际类型的指针`const char **`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:57:48.940

您提供的示例被设置为要求`qsort()`对 char 指针 (char *) 数组进行排序。您提供的这个比较器**通过 address**给出了算法需要的每“对”项目。两个字符指针。地址`qsort()`使用基于您给它的根地址，每个“项目”添加大小字节。由于每个“项目”都是一个 char*，因此每个项目的大小实际上就是一个指针的大小。

我已经修改了比较器以演示正在比较的内容以及传入的地址。您将看到它们都是从包含所有 char *s 的数组的基地址开始的增量。

```
char *mystrings[] =
{
    "This",
    "is",
    "a",
    "test",
    "of",
    "pointers",
    "to",
    "strings"
};

int cstring_cmp(const void *a, const void *b)
{
    const char **ia = (const char **)a;
    const char **ib = (const char **)b;
    printf("%p:%s - %p:%s\n", a, *ia, b, *ib);
    return -strcasecmp(*ia, *ib);
}

int main(int argc, char *argv[])
{
    printf("Base address of our pointer array: %p\n\n", mystrings);
    qsort(mystrings, sizeof(mystrings)/sizeof(mystrings[0]), sizeof(char*), cstring_cmp);
    for (size_t i=0; i<sizeof(mystrings)/sizeof(mystrings[0]);i++)
        printf("%s\n", mystrings[i]);
    return 0;

} 
```

产生以下输出：

```
Base address of our pointer array: 0x100006240

0x100006240:This - 0x100006260:of
0x100006260:of - 0x100006278:strings
0x100006240:This - 0x100006278:strings
0x100006248:is - 0x100006240:strings
0x100006278:This - 0x100006240:strings
0x100006250:a - 0x100006240:strings
0x100006270:to - 0x100006240:strings
0x100006258:test - 0x100006240:strings
0x100006260:of - 0x100006240:strings
0x100006268:pointers - 0x100006240:strings
0x100006260:of - 0x100006240:strings
0x100006240:test - 0x100006248:This
0x100006248:test - 0x100006250:to
0x100006240:This - 0x100006248:to
0x100006260:of - 0x100006268:pointers
0x100006268:of - 0x100006270:a
0x100006270:a - 0x100006278:is
0x100006268:of - 0x100006270:is
to
This
test
strings
pointers
of
is
a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:23:04.423

一个更不可视化的：

```
int cstring_cmp(const void *a, const void *b){
    return -strcasecmp((char *)(*((char **)a)), (char *)(*((char **)b)));
} 
```

但是您可以看到 , `a`and `b`are `char **`，它们被取消引用并成为`char *`并传递给`strcasecmp`。

* * *

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int cstring_cmp(const void *a, const void *b){
    return -strcasecmp((char *)(*((char **)a)), (char *)(*((char **)b)));
}

int main(){
    char *s[] = {  "Amit",
                   "Garima",
                   "Vaibhav",
                   "Gaurav"};
    qsort(s, 4, sizeof(char *), cstring_cmp);
    printf("%s\n%s\n%s\n%s\n", s[0], s[1], s[2], s[3]);
    return 0;
} 
```

输出：

```
Vaibhav
Gaurav
Garima
Amit 
```

`char *`将任何指针强制转换为或`void *`因为`void *`表示指向内存（RAM 或虚拟）字节的指针是合法的。

# python - Django 通用编辑视图以接受实例

> ID：13225520
> 
> 赞同：0
> 
> 时间：2012-11-05T03:22:06.973
> 
> 标签：python, django

鉴于我有一个引用产品模型的版本模型，我如何以给定此 url 的形式创建使用产品模型实例的通用创建或更新视图：

```
url(r'^product/(?P<pk>\d+)/create_version', ProductVersionCreateView.as_view(), name='workspace_product_create_version'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:38:23.770

使用 django 的通用视图。

## 网址.py

```
from django.views.generic import UpdateView, CreateView
#strongly recommend creating a views.py and putting this logic in there.     
class ProductVersionCreateView(CreateView):
    model  = ProductVersion
    def get_initial(self):
        return {"key": value} #dictionary for initial.
class ProductVersionUpdateView(UpdateView):
    model = ProductVersion

urlpatterns += url(r'^product/create_version', ProductVersionCreateView.as_view(), name='workspace_product_create_version'), #no primary key needed
urlpatterns += url(r'^product/(?P<pk>\d+)/update_version', ProductVersionEditView.as_view(), name='workspace_product_create_version'), 
```

这些文档在这方面有一周的时间，但无论如何我都会阅读它们。 [https://docs.djangoproject.com/en/1.3/topics/class-based-views/](https://docs.djangoproject.com/en/1.3/topics/class-based-views/)

# jquery - jQuery AJAX POST 到 Rails 控制器。执行 each_with_index 时出错（TypeError 无法将 Symbol 转换为 Integer）

> ID：13225523
> 
> 赞同：0
> 
> 时间：2012-11-05T03:22:12.233
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, jquery-ui

我正在尝试将 jQuery-UI 可排序连接列表的位置保存到 Rails 后端。尝试将参数保存到数据库时，我遇到了 Rails 控制器操作问题。我得到的错误是`TypeError (can't convert Symbol into Integer):`

我发送的 Ajax POST 请求中的参数如下所示，看起来不错：

```
Activity:[{"id":"65","column":"48"},{"id":"65","column":"48"},{"id":"67","column":"48"}] 
```

我的 Rails 控制器操作是这样的（我正在尝试使用 'id' 的 id 更新 Activity 并使用 'position' 和 day_id 的 'column' 更新属性位置：

```
 def sort
    JSON.parse(params[:Activity]).each_with_index do |x, index|
      id = x["id"]
      position = index+1
      column = x["column"]
      Activity.update_all(position = position, day_id = column, id = id)
    end
    render nothing: true
  end 
```

我在终端中收到此错误：

```
 Started POST "/trips/sort" for 10.0.2.2 at 2012-11-04 23:52:30 +0000
Processing by TripsController#sort as */*
  Parameters: {"Activity"=>"[{\"id\":\"66\",\"column\":\"49\"},{\"id\":\"66\",\"column\":\"49\"},{\"id\":\"67\",\"column\":\"49\"}]"}
Completed 500 Internal Server Error in 1ms

TypeError (can't convert Symbol into Integer): 
```

如果有帮助，这是我的 jQuery AJAX 调用：

```
 jQuery ->
  $('[id*="day"]').sortable(
    connectWith: ".day"
    placeholder: "ui-state-highlight"
    update: (event, ui) ->
      neworder = new Array()
      $(this).children().each ->
        column = $(this).parent().attr("id").match(/\d+/)[0]
        id = $(this).attr("id").match(/\d+/)[0]
        neworder.push(
          id: id
          column: column
        )
      alert neworder
      $.ajax
        url: "sort"
        type: "POST"
        data: { Activity: JSON.stringify(neworder) }
    ).disableSelection() 
```

我已经花了过去几个小时在这上面，只是想不通。我真的很感激时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:29:47.437

您想单独更新每个活动，如下所示：

```
JSON.parse(params[:Activity]).each_with_index do |x, index|
  id = x["id"]
  position = index+1
  column = x["column"]
  activity = Activity.find(id)
  activity.update_attributes(:position=>position, :column=>column)
end 
```

（假设您的 JSON 解析工作正常，我没有检查过）

`Activity.update_all`将更新所有具有相同属性的活动（例如，将所有活动设置为第 5 列和位置 1），这不是您想要在此处完成的。

# python - 使用 cv2.blur 时出现“系统错误：新样式 getargs 格式但参数不是元组”

> ID：13225525
> 
> 赞同：35
> 
> 时间：2012-11-05T03:22:21.687
> 
> 标签：python, image-processing, opencv

我只是想使用 cv2（opencv python 绑定）对图像应用过滤器。这是我的代码的样子：

```
im = cv2.imread('./test_imgs/zzzyj.jpg')
cv2.imshow('Image', cv2.blur(im, 2)
cv2.waitKey(0) 
```

[它几乎是从文档](http://docs.opencv.org/modules/imgproc/doc/filtering.html#void%20blur%28InputArray%20src,%20OutputArray%20dst,%20Size%20ksize,%20Point%20anchor,%20int%20borderType%29)中复制和粘贴的。但是，它只是不起作用，没有比此消息更多的痕迹：

```
SystemError: new style getargs format but argument is not a tuple 
```

GaussianBlur 会出现同样的错误，但中值模糊不会出现这种错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-05T06:20:13.363

对于 cv2.blur，您需要将 ksize 作为两个元素的元组，例如 (2,2)。但是对于 medianBlur，ksize = 3 就足够了。它将从中减去一个平方内核。

所以制作这样的代码：

```
im = cv2.imread('./test_imgs/zzzyj.jpg')
cv2.imshow('Image', cv2.blur(im, (3,3)))
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

希望它会工作！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-27T11:35:50.927

将**Pillow**从升级`2.8.1`到`4.1.0`.

这是一段示例代码，它将在运行时生成异常`Pillow==4.1.0`：

```
from PIL import Image
img = Image.new('RGBA', [100,100])
# An empty mask is created to later overlay the original image (img)
mask = Image.new('L', img.size, 255)
# Get transparency (mask) layer pixels, they will be changed!
data = mask.load()
# The function used later
def foo(x,y): return round(1.0*x/(y+1))
# Update all pixels in the mask according to some function (foo)
for x in range(img.size[0]):
    for y in range(img.size[1]):
        data[x,y] = foo(x,y) 
```

输出：

```
Traceback (most recent call last):
  File "x.py", line 12, in <module>
    data[x,y] = foo(x,y)
SystemError: new style getargs format but argument is not a tuple 
```

这里的实际错误与异常中说明的内容**无关。**实际上，分配给数据的数据类型是错误的。在`2.8.1`两者中`int`和`float`都是有效的，所以像这样的东西`data[x,y]=1.0`是有效的，而在`4.1.0`你**需要**使用像这样的整数：

```
data[x,y]=1
data[x,y]=int(1.0) 
```

因此，在上面的示例中，`foo`可以将其重新定义为以下内容，以便在`2.8.1`和`4.1.0`. 中工作：

```
def foo(x,y): return int(round(1.0*x/(y+1))) 
```

# node.js - 有哪些不同的节点 js npm 安装选项

> ID：13225530
> 
> 赞同：0
> 
> 时间：2012-11-05T03:23:07.130
> 
> 标签：node.js, express

有什么区别

```
 npm install express 
 npm install -g express 
```

如果您还可以将我指向解释这些选项的链接，那将非常有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:26:49.537

请参阅[https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)

> npm 有两种操作模式：
> 
> 全局模式：npm 将包安装到前缀/lib/node_modules 的安装前缀中，bin 安装在前缀/bin 中。
> 
> 本地模式：npm 将包安装到当前项目目录，默认为当前工作目录。软件包安装到 ./node_modules，bin 安装到 ./node_modules/.bin。本地模式是默认设置。
> 
> 在任何命令上使用 --global 或 -g 以改为在全局模式下运行。

我使用的谷歌搜索词组是：

```
npm options "-g" 
```

# oracle - 是否可以在存储过程中使用“return”？

> ID：13225532
> 
> 赞同：12
> 
> 时间：2012-11-05T03:23:28.600
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

```
 CREATE PROCEDURE Pname(in_Tid IN VARCHAR2,in_IP IN VARCHAR2,outstaticip OUT VARCHAR2,outcount OUT NUMBER)
 AS
 BEGIN
 select STATIC_IP into outstaticip from OP_TTER_MAPPING where TERMINAL_ID = in_Tid;
 if in_IP = outstaticip then
 return 1;
 else
 select COUNT(*) into outcount from OP_TTER_MAPPING where DYNAMIC_IP_LOW <= in_IP AND   DYNAMIC_IP_HIGH >= in_IP AND TERMINAL_ID = in_Tid;
 if outcount = 1 then
 return 1;
 else
 return 0;
  end if;
 end if;
 END; 
```

1.  是否可以像上面那样在存储过程中使用return？
2.  如果我们可以使用return，我怎样才能在`Executesql("begin Pname(----)END")`方法中获得该返回值

**编辑**

现在我像这样在存储过程中编辑了我的返回值，我做得对吗？

```
CREATE PROCEDURE P_ValidateTIDIP(in_Tid IN VARCHAR2,in_IP IN VARCHAR2,outstaticip OUT VARCHAR2,outcount OUT NUMBER,outretvalue OUT NUMBER)
AS
BEGIN
select STATIC_IP into outstaticip from OP_TTER_MAPPING where TERMINAL_ID = in_Tid;
if in_IP = outstaticip then
    outretvalue:=1;
else 
    select COUNT(*) into outcount from OP_TTER_MAPPING where DYNAMIC_IP_LOW <= in_IP AND DYNAMIC_IP_HIGH >= in_IP AND TERMINAL_ID = in_Tid;
    if outcount = 1 then 
     outretvalue:=1;
    else
     outretvalue:=0;
   end if;
end if;
END; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T03:25:39.530

在存储过程中，您使用`OUT`参数**ONLY**返回值。正如您在示例中定义了两个变量：

```
 outstaticip OUT VARCHAR2, outcount OUT NUMBER 
```

只需将返回值分配给输出参数，即`outstaticip`并`outcount`从调用位置返回它们。我的意思是：当您调用存储过程时，**您也将传递这两个变量。在存储过程调用之后，变量将填充返回值。**

如果您想`RETURN value`从 PL/SQL 调用中获得返回值，请使用`FUNCTION`. **请注意，以防万一，您只能返回一个变量作为返回变量。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T03:27:14.357

使用功能：

```
CREATE OR REPLACE FUNCTION test_function
RETURN VARCHAR2 IS

BEGIN
  RETURN 'This is being returned from a function';
END test_function; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-03T18:01:32.243

```
-- IN arguments : you get them. You can modify them locally but caller won't see it
-- IN OUT arguments: initialized by caller, already have a value, you can modify them and the caller will see it
-- OUT arguments: they're reinitialized by the procedure, the caller will see the final value.
CREATE PROCEDURE f (p IN NUMBER, x IN OUT NUMBER, y OUT NUMBER)
IS
BEGIN
   x:=x * p;
   y:=4 * p;
END;
/

SET SERVEROUTPUT ON

declare
   foo number := 30;
   bar number := 0;
begin
   f(5,foo,bar);
   dbms_output.put_line(foo || ' ' || bar);
end;
/ 
```

-- 可以从变量 x 和 y 中收集过程输出（ans1:= x 和 ans2:=y）将分别为：150 和 20。

-- 答案来自：[https ://stackoverflow.com/a/9484228/1661078](https://stackoverflow.com/a/9484228/1661078)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-16T09:33:01.200

有可能的。

当您在过程中使用 Return 时，控制权将转移到调用该过程的调用程序。这就像循环中的出口。

它不会返回任何值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-27T09:02:41.187

```
CREATE PROCEDURE pr_emp(dept_id IN NUMBER,vv_ename out varchar2  )
 AS
 v_ename emp%rowtype;
CURSOR c_emp IS
    SELECT ename
    FROM emp where deptno=dept_id;
 BEGIN
     OPEN c;
     loop
        FETCH c_emp INTO v_ename;
        return v_ename; 
        vv_ename := v_ename 
        exit when c_emp%notfound;
     end loop;
     CLOSE c_emp;

 END pr_emp; 
```

# c++ - C++中的变量如何命名为函数调用？

> ID：13225535
> 
> 赞同：1
> 
> 时间：2012-11-05T03:24:22.843
> 
> 标签：c++, allegro

在浏览一些快板教程时，我发现了一个奇怪的电话。

```
int al_init(); 
```

该函数`al_init()`初始化 allegro 以便可以使用 allegro 函数。线是`int al_init();`怎么回事？如果我更改这行代码以排除`int`它，它的工作原理相同，但如果我完全取出该行，它就不起作用。这条线在做什么？我唯一能想象的是它创建一个整数并为其分配`al_init()`函数的返回值，这可能是`-1`失败和`0`成功等。但如果这是这样做的，那么你怎么能检查返回价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:36:53.487

在 C/C++ 中有函数声明和函数定义：

**声明**如下所示：

```
int a_function();
void another_function();
double yet_another_function(); 
```

解释：

*   函数名前的标识符（例如`int`, `void`）`double`描述了函数返回值的类型。
*   如果您未指定一个，则默认为`int`（这就是为什么它在您`int`从中删除时有效`int al_init()`，但在您完全删除声明时无效）
*   `void`意味着它不应该返回一个值（即使从技术上讲它可以，但这是针对极少数情况的）

**定义**如下所示：

```
int a_function() {
    std::cout << "hello world!";
    int x = 1;
    int y = 2;
    return (x + y);
} 
```

注意区别：

*   声明以`;`
*   定义后面是用大括号括起来的代码块：`{`和`}`，但不是`;`！
*   在某些情况下，您不需要声明函数。如果它位于代码中已经看到定义的位置，则定义可以代替声明（这将我们引向下一点......）
*   声明的目的是告诉程序，例如，有一个名为 的函数`a_function`，它不需要任何参数，并且它返回一个类型的值`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T03:45:15.503

根据 C 的语法规则，原型定义为：

`<return-type> function-name (param1, param2, ..);`

函数调用定义为：

`function-name(param1, param2,...);`. 所以它显然定义了一个函数原型而不是调用该函数。

## C89 和以前的规则是：

使用上述规则，另一个规则是：对于隐式整数返回类型，假设原型定义**在**任何可执行函数代码之外。如果它在函数内部，它将被称为函数调用而不是函数原型定义。

* * *

除此之外，让我们从问题开始：

> 在浏览一些快板教程时，我发现了一个奇怪的电话。`int al_init();`

那是不正确的，它看起来像一个函数原型或声明

> 函数 al_init() 初始化 allegro 以便可以使用 allegro 函数。什么是 int al_init(); 线？如果我将这行代码更改为排除 int ，它的工作原理相同，但如果我完全删除该行，它就不起作用。

什么不起作用？停止编译？这很明显，因为它将无法找到`al_init()`功能。此外，它在没有“int”的情况下工作的原因是因为它隐含地假定返回一个整数。

> 这条线在做什么？

它告诉编译器`al_init()`库函数是在别处定义的，通常在 a `.lib`or `.a`or`.dll`中，并且您希望在程序中使用它。

> 我唯一能想象的是它创建了一个整数并为其分配了 al_init() 函数的返回值，

对代码的绝对错误解释，它不会创建任何整数，也不会为其分配任何值。

> 可能是 -1 表示失败，0 表示成功等。但如果这是这样做的，那么你怎么能检查返回值呢？

由于您想知道该函数返回了什么，您可以在实际调用 al_init() 时执行此操作：

`int retval = al_init();` `printf("al_init() returned %d",retval);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:32:01.607

你确定你不是在看函数声明吗？

# c# - 如何将数组作为方法结果传递给 Microsoft NAV？

> ID：13225536
> 
> 赞同：1
> 
> 时间：2012-11-05T03:24:24.700
> 
> 标签：c#, com, navision, dynamics-nav

作为我们软件业务的一部分，我们为开发人员提供了一个开发工具包，以便将我们的软件集成到他们的软件中。我们通常会尝试迎合许多不同的语言/环境。

最近，我们收到了一些使用 Microsoft Dynamics NAV 的潜在客户的询问。我们 SDK 的风格之一是 COM 可调用 dll，可以在 NAV 中引用。

现在，我们 API 中的一个方法返回一个字符串数组。我们正在运行一个试验计划的开发人员之一，使用该方法报告了问题，但他找不到解决方法。我们不得不给他一个解决方法，它只返回数组的第一个索引（这对于他的特定目的来说已经足够了），但这显然不是一个解决方案。

不幸的是，我们手头的 Navision 经验为零，我们也没有 Navision 的许可副本（试用版似乎不允许您修改代码），而且我无法在网上任何地方找到有关此的任何信息。

有谁知道这是否可能？如果是这样，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:49:14.590

“维度”在 NAV 中的数组上是固定的，这使得从 COM 接收和发送基于数组的数据变得困难。

虽然我没有遇到同样的问题，但我遇到了相反的情况（将字符串数组传递给 COM），最简单的方法之一是使用循环和函数将字符串发送到 COM/DLL 中一次，然后用标志或类似的信号完成。无界数组在 .NET 中会很有用，因为您可以根据需要继续添加字符串。我将假设 DLL 是基于 .NET 的；

**所以从 .NET 到 C/AL；**

*   让 C/AL 知道数组循环已完成的标志或函数
*   C/AL 可以使用循环来获取每个“元素”，直到设置标志
*   .NET 将需要一一提供数组项

**所以从 C/AL 到 .NET；**

与 .NET 到 C/AL 类似，但 .NET 具有无界数组，这使事情变得更容易一些。

```
DotNetArray.ClearArray;

REPEAT        
   DotNetArray.Add(Customer.Name);        
UNTIL 

DotNetArray.EndOfArray; 
```

**注意事项；**

*   C/AL 中的数组索引是从 1 开始的，.NET 是从 0 开始的。
*   另一种方法是传递计数和循环 x 次

以下文章也可能有用；[http://dynamicsuser.net/blogs/waldo/archive/2011/03/21/nav-2009-r2-net-interop-using-arrays-collections.aspx](http://dynamicsuser.net/blogs/waldo/archive/2011/03/21/nav-2009-r2-net-interop-using-arrays-collections.aspx)

# c++ - 转换一个 char 值 255 会导致 unsigned int 值 4294967295，什么给出？

> ID：13225538
> 
> 赞同：2
> 
> 时间：2012-11-05T03:24:42.627
> 
> 标签：c++, casting

好的，这是一个我从未见过的奇怪问题：

```
#include <iostream>
int main()
{
  char testchar = 255;
  std::cout << (unsigned int)testchar << std::endl;
} 
```

输出：

```
4294967295 
```

到底是什么？似乎因为 char 是“满的”，所以当它生成新的 unsigned int 类型时，结果也是“满的”。这不是我记得的或我期望的结果。我希望 unsigned int 的值为 0x000000FF。任何人都可以向我解释到底发生了什么吗？

系统：Ubuntu 12.04 64 位

g++ 版本：4.6.3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T03:30:01.437

您`char`的显然已签名。这意味着`255`溢出`char`。由于您显然是在 2 的补码机器上，因此 255 的位模式存储在`char`（即所有位都已设置）中。当解释为带符号的 8 位数字时，即为 -1。

然后*将该*值符号扩展为 32-bit `int`，给出 32 个 1 位（但值相同，`-1`）。最后，该值转换为`unsigned int`。根据通过减少模 2 ^(32) -1 完成的规则​​，它给出了最大可能的 32 位数 (4294967295)。

# python - 当函数修改超过五个实体组时，有没有办法在谷歌应用引擎中以原子方式将函数作为事务运行？

> ID：13225540
> 
> 赞同：1
> 
> 时间：2012-11-05T03:25:18.143
> 
> 标签：python, google-app-engine

我正在谷歌应用引擎上开发。这个问题的重点是一个修改数百个实体组的python函数。该函数采用一个字符串参数。我想将此函数作为事务执行，因为现在有实例同时运行具有相同字符串参数的相同函数，导致意外结果。如果字符串参数不同，我希望函数并行执行，但如果字符串参数相同，则不应该，它们应该串行运行。

有没有办法在修改这么多实体组的函数上运行事务？到目前为止，我能想到的唯一解决方案是为每个唯一的字符串参数翻转数据库标志，并检查标志（如果标志设置为 True，则延迟执行）。有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:07:49.217

您可以使用任务队列（主要）通过根据参数命名任务来防止重复，因为插入与队列中已有任务同名的任务将失败。阅读此内容了解更多详情：[https ://developers.google.com/appengine/docs/python/taskqueue/overview#Task_Names](https://developers.google.com/appengine/docs/python/taskqueue/overview#Task_Names)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:02:23.017

出于性能原因，XG 事务仅限于少数实体组。跨数百个实体组运行 XG 事务将非常缓慢。

你能把你的功能分解成许多子功能，每个实体组一个吗？如果是这样，您应该可以轻松地单独运行它们，或者在任务队列上运行它们。

# apex-code - 使用 Visualforce 显示自定义对象和字段

> ID：13225541
> 
> 赞同：1
> 
> 时间：2012-11-05T03:25:29.630
> 
> 标签：apex-code, visualforce

我有一个名为 Conference 的自定义对象。我需要创建一个简单的 visualforce 页面，显示会议的所有记录，包括每个会议的以下详细信息：名称、城市、州、开始日期、结束日期、预期出席人数和实际注册人数。我用标准的 Salesforce.com 管理员点击构建了这个，它们都完美地显示在我通过点击创建的报告中。

使用以下代码，我收到此错误：错误：未知属性'Conference__cStandardController.conference'

```
<apex:page standardStylesheets="false" showHeader="false" sidebar="false"    
 standardController="Conference__c" recordsetVar="conf">

   <apex:stylesheet value="{!URLFOR($Resource.styles, 'styles.css')}"/>
   <h1>Conference Details</h1> 

   <apex:form>
      <apex:dataTable value="{!Conference__c}" var="confItem" rowClasses="odd,even"> 

         <apex:column headerValue="Conference Name">
             <apex:outputField value="{!confItem.Name}"/>
         </apex:column> 

         <apex:column headerValue="City">
             <apex:outputText value="{!confItem.City__c}"/>
         </apex:column>

         <apex:column headerValue="State">
             <apex:outputText value="{!confItem.Location_State__c}"/>
         </apex:column>

         <apex:column headerValue="Start Date">
             <apex:outputText value="{!conference.Start_Date__c}"/>
         </apex:column>

         <apex:column headerValue="End Date">
             <apex:outputText value="{!conference.End_Date__c}"/>
         </apex:column>

         <apex:column headerValue="Technologies">
             <apex:outputText value="{!conference.Technologies__c}"/>
         </apex:column>  

         <apex:column headerValue="Expected">
             <apex:outputText value="{!conference.Number_of_Attendees_Expected__c}"/>
         </apex:column> 

         <apex:column headerValue="Currently Enrolled">
             <apex:outputText value="{!conference.Enrolled_Attendees__c}"/>
         </apex:column>  

     </apex:dataTable>
  </apex:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:30:02.040

您已经将 sObject Conference__c 提交给 conf。因此，在您的 dataTable 中，您应该像这样编写代码：

```
<apex:dataTable value="{!conf}" var="confItem" rowClasses="odd,even"> 
<apex:column headerValue="Conference Name">
         <apex:outputField value="{!confItem.Name}"/>
     </apex:column>
and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:29:23.670

[`<apex:enhancedList>`](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_compref_enhancedList.htm)可能是你最好的新朋友。

但是，如果您想保留到目前为止的代码，则需要在您选择作为“recordsetvar”属性的变量名称上循环（意味着在 dataTable/pageBlockTable/repeat 中引用它）。查看[此链接](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_controller_sosc_list_views.htm)了解更多信息。

像这样的东西应该工作：

```
<apex:page standardStylesheets="false" showHeader="false" sidebar="false"    
standardController="Conference__c" recordSetVar="conferences">
    <apex:pageBlock>
        <apex:pageBlockTable value="{!conferences}" var="c">
            <apex:column value="{!c.Name}" />
        </apex:pageBlockTable>
    </apex:pageBlock>
</apex:page> 
```

# jquery - 如何显示带有指向其锚点的链接的隐藏元素？

> ID：13225547
> 
> 赞同：0
> 
> 时间：2012-11-05T03:26:41.170
> 
> 标签：jquery

我有这个代码的标签菜单：

```
$('#menu').each(function(){
    // For each set of tabs, we want to keep track of
    // which tab is active and it's associated content
    var $active, $content, $links = $(this).find('a');

    // Use the first link as the initial active tab
    $active = $links.first().addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.not(':first').each(function () {
        $($(this).attr('href')).hide();
        $("#tab1").show();
    });

    // Bind the click event handler
    $(this).on('click', 'a', function(e){
        // Make the old tab inactive.
        $active.removeClass('active');
        $content.hide();

        // Update the variables with the new link and content
        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();

    });
}); 
```

问题是关于一个选项卡的直接链接（例如，site.com/#tab2）——它不起作用。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:06:47.233

检查这个....

[工作示例](http://videsignz.com/tab.html)

添加到您的 Jquery

```
$(document).ready(function(){
var x = $(location).attr('href').replace( 'http://yourdomain.com/yourpage.html' , "");
$('a[href="' + x + '"]').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:48:45.653

给每个标签一个独特的`id`属性。例如：

```
<div id="menu">
   <div id="tab1">...</div>
   <div id="tab2">...</div>
   ...
</div> 
```

给定选项卡的 id，创建一个用于显示选项卡的通用函数：

```
function showTab(tabId) {

    // find the requested tab using the given id
    var tab = $(tabId);

    // Make the old tab inactive.
    $active.removeClass('active');
    $content.hide();

    // Update the variables with the new link and content

    $active = tab;
    $content = $(tab.attr('href'));

    // Make the tab active.
    $active.addClass('active');
    $content.show();

    // Prevent the anchor's default click action
    e.preventDefault();
} 
```

每当哈希更改时，使用该`hashchange`事件显示正确的选项卡：

```
$(window).on('hashchange', function() { 
    showTab(location.href);
}); 
```

重写您的点击处理程序以使用 showTab 方法：

```
$(this).on('click', 'a', function(e){
    showTab($(this).attr('id'));
}); 
```

最初加载页面时，选择正确的选项卡：

```
$(document).ready(function() {
    showTab(location.href);
}); 
```

# codeigniter - 如何从codeigniter中的数据网格中获取复选框选中的值

> ID：13225556
> 
> 赞同：2
> 
> 时间：2012-11-05T03:28:41.057
> 
> 标签：codeigniter

我是codeigniter的新手，我是简单的datagrid，只有几列......我想要从网格中得到的是......我需要从网格中获取检查值，......所以我不知道如何使用foreach循环并获取值..

任何人都可以用例子来解释我......

```
 foreach ($persons as $person)
    {
        $this->table->add_row(form_checkbox('att',$person->tab_classid), $person->tab_classid, $person->tab_classtitle, date('d-m-Y H:i',strtotime($person->tab_classtime)),$person->tab_pemail,anchor($person->tab_prsturl,'view','target="_new"'),anchor($person->tab_recurl,'view','target="_new"'),$person->tab_classduration,$person->tab_crtdate, 
        anchor('person/view/'.$person->tab_classid,'view',array('class'=>'view')).' '.
        anchor('person/update/'.$person->tab_classid,'update',array('class'=>'update')).' '.
        anchor('person/test/'.$person->tab_classid,'Attendee',array('class'=>'attendee')).' '.
        anchor('person/delete/'.$person->tab_classid,'delete',array('class'=>'delete','onclick'=>"return confirm('Are you sure want to delete this person?')"))
        );
    }
    $data['table'] = $this->table->generate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:34:03.430

PHP 最适合处理服务器代码，但您正在寻找的往往是客户端分析。我建议您改为通过 javascript/jquery 进行此类检查。

离开/处理这个`each(function(){...});`

```
var check=$('chkboxId').attr('checked').value; 
```

# ruby-on-rails - 如何在 mac/osx 上安装 Ruby Java Bridge (RJB)

> ID：13225557
> 
> 赞同：2
> 
> 时间：2012-11-05T03:28:54.537
> 
> 标签：ruby-on-rails, ruby, macos, rjb

有谁知道如何在mac上正确安装RJB，我已经使用了RJB gem，但是.jar文件仍然无法加载，总是返回“nil”。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:26:02.133

我希望您已按照[此处](http://rjb.rubyforge.org/)的说明进行操作，并确保将 Java 运行时设置为您的库路径。（抱歉，我不确定在 Mac 上做这件事很热），但话虽如此，我曾经在一段时间前使用 rjb，但体验并不好。有一些内存泄漏。

我个人认为 Jruby 是可行的，因为它在尝试让 Ruby 和 Java 一起工作时更加可靠

# c# - 清单怎么可能 被重置？

> ID：13225573
> 
> 赞同：0
> 
> 时间：2012-11-05T03:31:38.380
> 
> 标签：c#

我有一个我创建并保存在集合中的对象：

```
public class Level
{
    private string id;

    private List<LevelTypes> usableLevelTypes;  // LevelTypes is an enum
    private List<BlockTypes> levelMapping;      // BlockTypes is also an enum

    public Level(string id, List<LevelTypes> levelTypes, List<BlockTypes> incomingBlocks)
    {
        this.id = id;
        this.usableLevelTypes = levelTypes

        levelMapping = incomingBlocks;
    } 
```

通过这个，我可以看到每个项目都被正确设置。然后将该对象放置在 HashSet 中。

然后另一个类遍历 HashSet 调用每个项目的重载`.ToString()`方法。

在这一点上，我的观察列表中有这个类中的所有相关变量。被调用对象中的所有内容都已正确设置。“id”、“levelMapping”和我没有列出`List<T>`的所有其他变量，包括 other 和 int，都包含它们的正确值，但报告为空的“usableLevelTypes”除外。

```
public override string ToString()
{
    var s = new StringBuilder();

    s.Append("ID: " + id);
    s.Append(" Level Types: " + usableLevelTypes[0].ToString()); // At this point,
    // this list should have at minimum one value in it.  However, it is empty and
    // will throw an exception stating as much.

    return s.ToString();
} 
```

任何时候都不会`.Clear()`在 usableLevelTypes 列表上调用它，它是只读的。当同一对象中的其他列表不存在时，如何重置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:34:21.607

您没有创建传递给`Level`构造函数的列表的副本`usableLevelTypes`。因此，无论外部列表发生什么，都将发生在内部列表中`Level`。没有看到调用代码，我无法具体告诉您问题所在。

# html - 表格单元格突出显示（辅助单元格） - 具有误导性

> ID：13225579
> 
> 赞同：1
> 
> 时间：2012-11-05T03:32:06.893
> 
> 标签：html, css, user-interface

我必须通过添加一个名为`active`to的类来突出显示多个单元格`td`。此类将更改边框颜色以突出显示单元格。

这里的问题是，如果选择了特定单元格的顶部、右侧、底部和左侧单元格，那么即使它实际上没有突出显示，中心单元格也会显得突出显示。

你可以在[这里](http://jsfiddle.net/arunpjohny/z625v/)找到问题。

**HTML**

```
<div style="padding: 10px">
    <table>
        <tr>
            <td>1.1</td>
            <td>1.2</td>
            <td>1.3</td>
            <td>1.4</td>
            <td>1.5</td>
        </tr>
        <tr>
            <td>2.1</td>
            <td>2.2</td>
            <td class="active">2.3</td>
            <td>2.4</td>
            <td>2.5</td>
        </tr>
        <tr>
            <td>3.1</td>
            <td class="active">3.2</td>
            <td>3.3</td>
            <td class="active">3.4</td>
            <td>3.5</td>
        </tr>
        <tr>
            <td>4.1</td>
            <td>4.2</td>
            <td class="active">4.3</td>
            <td>4.4</td>
            <td>4.5</td>
        </tr>
        <tr>
            <td>5.1</td>
            <td>5.2</td>
            <td>5.3</td>
            <td>5.4</td>
            <td>5.5</td>
        </tr>
    </table>
</div> 
```

**CSS**

```
table {
    table-layout: fixed;
    border-spacing: 0;
    border-collapse: collapse;
}

td {
    border: 1px solid lightgrey;
    height: 60px;
    width: 60px;
    text-align: center;
    vertical-align: middle;
}

td.active {
    border: 1px solid blue;
    border-style:double
} 
```

此处单元格 2.3、3.2、3.4 和 4.3 突出显示，但 3.3 未突出显示，但在视觉上似乎突出显示。

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:00:21.503

您可以使用

```
table {
     table-layout: fixed;
     border-spacing: 2px;
     border-collapse: separate;
} 
```

但是它会填充细胞。如果您不希望您的单元格填充，您也可以使用背景突出显示单元格。

演示：

[带有单元格填充的表格](http://jsfiddle.net/7bn6U/4/)

[带有单元格突出显示的表格](http://jsfiddle.net/7bn6U/2/)

# objective-c - 视网膜和非视网膜设备上的 renderInContext

> ID：13225581
> 
> 赞同：7
> 
> 时间：2012-11-05T03:32:22.127
> 
> 标签：objective-c, uikit, calayer, quartz-core

我正在通过截取 UIView 的屏幕截图来创建 PDF，这目前在具有视网膜显示屏的 iPad3 上运行良好，但是在其他具有较低分辨率屏幕的设备上进行测试时，我遇到了文本分辨率问题。

这是我的代码：

```
 //start a new page with default size and info
    //this can be changed later to include extra info.
    UIGraphicsBeginPDFPage();

    //render the view's layer into an image context
    //the last option specifies scale. If 0, it uses the devices scale.
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 2.0);

    CGContextRef context = UIGraphicsGetCurrentContext();
    [view.layer renderInContext:context];
    UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //render the screenshot into the pdf page CGContext
    [screenShot drawInRect:view.bounds];

    //close the pdf context (saves the pdf to the NSData object)
    UIGraphicsEndPDFContext(); 
```

我也尝试将`UIGraphicsBeginImageContextWithOptions`比例设置为 2.0，但这并没有改变。如何强制 iPad2 上的视图以 2 倍分辨率呈现？

预期输出：

![伊姆古尔](../Images/48eb7557c9c50f9edf5aa988946285a1.png)

实际输出：

![伊姆古尔](../Images/c8c54b27313a80c54e8703d2d01d45a2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:53:59.820

我最终通过递归地将`contentScaleFactor`父视图及其子视图的属性设置为 2.0 来解决这个问题。

UIImage 正在以正确的分辨率呈现，但该层不是在`renderInContext`被调用时。

# javascript - Node.js 主机名/IP 与证书替代名不匹配

> ID：13225584
> 
> 赞同：5
> 
> 时间：2012-11-05T03:33:13.763
> 
> 标签：javascript, facebook, node.js, coffeescript

我正在编写一些节点代码来对 Facebook 进行服务器端登录。我非常接近让它完全运行，但我在请求 auth_code 时遇到了麻烦。我认为这可能与 facebook 应用程序设置有关`Site URL`，但我尝试过的没有任何效果。我正在使用节点版本 0.8.14。

这是我提出请求的代码：

```
options =
    host: 'graph.facebook.com'
    port: 443
    path: "/oauth/access_token?" + qs.stringify(
        client_id:     app_id
        redirect_uri:  my_url
        client_secret: app_secret
        code:          vars.code)

https.get(options, (face_res)->
    console.log face_res
) 
```

在`face_res`我得到几个这样的对象：

```
authorizationError: 'Hostname/IP doesn\'t match certificate\'s altnames' 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:04:53.970

好吧，有趣的是我得到的错误完全无关紧要。一旦我添加了一个`request.on("data", function(data){})`事件监听器，我就可以看到我收到了`auth_token`预期的结果。

# ruby-on-rails - 红宝石块迭代

> ID：13225587
> 
> 赞同：0
> 
> 时间：2012-11-05T03:33:36.273
> 
> 标签：ruby-on-rails

我对 ruby​​ 中的迭代感到困惑。在我编写的以下代码中，我希望打印出来的两条路径应该是相同的。但实际上他们不是。似乎在 for 循环中更改了路径。

我的代码有什么问题吗？谢谢

```
def one_step_search(dest,paths)
  direction = %w(north east south west)
  new_paths = []
  paths.map do |path|

    print "original path is: "
    print_path path

    curr_room = path.last
    for i in 0..3
      new_path = path
      if !curr_room.send("exit_#{direction[i]}").nil?
        next_room_tag = curr_room.send("exit_#{direction[i]}")[0] 
        next_room = find_room_by_tag(next_room_tag)
        if !new_path.include?(next_room)  # don't go back to the room visited before
          new_path << next_room
          new_paths << new_path  
          print "new path is: "
          print_path path
          return new_paths if dest.tag == next_room_tag
        end
      end
    end
  end

  return new_paths
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:05:40.493

在我看来问题出在这一行

```
new_path = path 
```

你可能认为`new_path`and`path`是不同的对象，但事实并非如此。我将举例说明：

```
a = "foo"
b = a
puts a.sub!(/f/, '_')
puts a                   # => "_oo"
puts b                   # => "_oo" 
```

`a`并且`b`是指向一个对象的引用。对您来说最简单的解决方案是使用`dup`或`clone`

```
new_path = path.clone 
```

但实际上你的代码需要很好的清理。

# bookmarks - 适用于 Android 的书签时间戳视频播放器

> ID：13225589
> 
> 赞同：1
> 
> 时间：2012-11-05T03:33:47.343
> 
> 标签：bookmarks, gestures, android-video-player, timestamp, asl

我想制作一个 Android 应用程序，它可以让我按时间戳为视频文件添加书签 例如 bookmark1 00:00:00 = bookmarkname else if bookmark2 = 00:20:01 = bookmarkname2 我还希望这个视频播放器应用程序支持手势，不音频只需要视频。

如果有人可以帮助我编写代码或知道是否有一个应用程序已经可以做到这一点，请告诉我。

还可以识别嵌入在 m4v 文件中的章节标记的 android 视频播放器可能会起到作用

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:48:08.647

I think I can help. I utilize "mvideoplayer", and have created many bookmark files.

FYI--the chapter markers in m4v are not embedded. They are actually in a text file separate from the video file. These text files contain time markers (with "titles" indicating what is located at those particular time locations).

Also, since you need video only (no audio), do you happen to need this for sign language videos?

# c# - 将目录复制到 JDrive / USB

> ID：13225594
> 
> 赞同：2
> 
> 时间：2012-11-05T03:34:08.857
> 
> 标签：c#, .net

我可以简单地使用文件来做到这一点，如下所示：

```
public static void MoveAllFilesFromDesktopToJDrive()
        {
            DirectoryInfo di = new DirectoryInfo(@"C:\Users\Tafe\Desktop\");
            DirectoryInfo Jdrive = new DirectoryInfo(@"J:\");

            foreach (FileInfo fi in di.GetFiles())
            {
                if (Path.GetFileName(fi.FullName) != "desktop.ini")
                {                      
                    fi.MoveTo(Jdrive.FullName + Path.GetFileName(fi.FullName));
                }    
            }
        } 
```

但是在目录上尝试相同的操作告诉我我不能跨卷移动目录。好的，所以这就是我尝试过的：

```
 public static void MoveAllDirsFromDeskTopToJDrive()
        {
            DirectoryInfo di = new DirectoryInfo(@"C:\Users\Tafe\Desktop\");
            DirectoryInfo Jdrive = new DirectoryInfo(@"J:\");

            foreach (DirectoryInfo dirs in di.GetDirectories())
            {
               Directory.CreateDirectory(Jdrive + Path.GetFileName(dirs.FullName)); 

            }
        } 
```

这会复制文件的名称，但不会复制内容，我会像使用我的`MoveAllFilesFromDesktopToJDrive()`方法一样移动内容，但是目录包含子目录和子目录等，所以我无法弄清楚。我对递归有一点了解，但还不足以尝试这个。还有，不会那么难吧？API中必须有更好的东西来促进这一点？如果没有，完成此方法的任何帮助`MoveAllFilesFromDesktopToJDrive()`都将成为救命稻草！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:32:38.153

尝试在代码中的某处循环：

```
 string fileName = "test.txt";
    string sourcePath = @"C:\Users\Public\TestFolder";
    string targetPath =  @"C:\Users\Public\TestFolder\SubDir";

    // Use Path class to manipulate file and directory paths. 
    string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
    string destFile = System.IO.Path.Combine(targetPath, fileName);

    // To copy a folder's contents to a new location: 
    // Create a new target folder, if necessary. 
    if (!System.IO.Directory.Exists(targetPath))
    {
        System.IO.Directory.CreateDirectory(targetPath);
    }

    System.IO.File.Copy(sourceFile, destFile, true); 
```

有关详细信息，请访问此链接：http: [//msdn.microsoft.com/en-us/library/cc148994.aspx](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

# android - 如何在语音搜索中使用“com.google.android.voicesearch.SHORTCUTS_ACCESS”权限？

> ID：13225598
> 
> 赞同：1
> 
> 时间：2012-11-05T03:34:46.827
> 
> 标签：android, android-permissions

当我`voicesearch`在手机中使用时，它无法自动打开网页，并显示如下日志：

> 包 com.android.quicksearchbox 想要处理 GLOBAL_SEARCH，但没有权限 com.google.android.voicesearch.SHORTCUTS_ACCESS 找不到全局搜索活动

我怎么解决这个问题？

# groovy - Groovy 中的“属性”是什么？

> ID：13225599
> 
> 赞同：16
> 
> 时间：2012-11-05T03:35:04.847
> 
> 标签：groovy

groovy 中的属性看起来就像没有访问修饰符的 java 中的类字段。真的吗？或者它们有特殊的含义。似乎没有办法将属性设为私有？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T07:06:53.513

[当 Groovy 类定义声明一个没有访问修饰符的字段时，会生成一个公共 setter/getter 方法对和一个私有实例变量字段，根据JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)也称为“属性” 。

```
class A {
    String property

    /* 
         private String property

         public void setProperty(String property) { ... }
         public String getProperty() { ... }
    */
} 
```

如果我们声明一个公共实例变量字段，我们只会得到一个公共字段，没有 setter/getter 方法对。

```
class A {
    public String field

    /* 
         public String field
    */
} 
```

从 Groovy 客户端的 pov 来看，在运行时访问 Groovy 属性和公共字段没有区别

```
def a = new A()
println a.field
println a.property 
```

虽然`a.field`直接访问实例变量并`a.property`实际调用`a.getProperty()`（或`a.setProperty(...)`在赋值时）。但是由于该属性符合 JavaBeans 规范，因此该类可以无缝地用于基于 Java 的环境中。

我认为建立“私有财产”没有多大意义。`private`将方法或实例/类变量的使用限制为宿主类类型。但也许您指的是创建一个私有字段实例变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T04:07:28.267

属性通常可以被视为字段，但它们实际上由隐式 getter/setter 支持，因此您仍然可以像字段一样引用它们或将它们设置为等于值。在幕后，他们使用 getter/setter（如果您愿意，可以重新定义）。

此页面包含有关属性/字段和访问修饰符的详细信息（尤其参见“属性和字段规则”部分）：[https ://groovy-lang.org/objectorientation.html#_fields_and_properties](https://groovy-lang.org/objectorientation.html#_fields_and_properties)

它还表明您可以创建私有属性（由私有 getter/setter 支持的私有字段），但您必须明确定义 getter/setter。

# python - CaptureFromFile 失败（PyOpencv）

> ID：13225600
> 
> 赞同：0
> 
> 时间：2012-11-05T03:35:16.393
> 
> 标签：python, opencv

我有一个在我的机器上运行的示例代码，它不在另一台机器上运行。
特别是，该代码只是：

```
from cv2 import cv
try: capture = cv.CaptureFromFile('clip.avi')    
except: print 'error loading the video' 
nFrames = int( cv.GetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_COUNT))
print nFrames 
```

在失败的机器上，结果是 nFrames = 0（以及宽度、高度、fps、fourcc 等），但没有引发异常。我尝试使用未压缩的视频来确保没有编解码器问题。它也不适用于 MPEG1 视频，也不适用于我尝试过的任何其他视频。
所以 ：

*   有没有办法知道发生了什么，因为这里没有错误处理（没有引发异常，没有错误消息，而且我在 pyOpenCV 中没有找到“GetLastError”函数）？
*   知道可能是什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:13:17.537

尝试在调用中使用完整路径`CaptureFromFile()`：

```
capture = cv.CaptureFromFile('/Users/user_name/Videos/clip.avi') 
```

# jquery - Fancybox 作为弹出和图像移动效果

> ID：13225604
> 
> 赞同：0
> 
> 时间：2012-11-05T03:35:40.090
> 
> 标签：jquery, jquery-ui, jquery-plugins, fancybox, fancybox-2

有人知道或可以告诉我如何实现单击网站中的图像，然后将具有移动效果的图像移动到带有 FanxyBox 的弹出窗口内的页面中心吗？

我的意思是，当单击图像时，应该会出现一个弹出窗口，其中应该有两列。在左栏中，它应该只有文本，在右栏中，图像被点击，但只是出现弹出窗口，图像应该具有从点击位置到弹出窗口内位置的移动效果。

我知道如何创建弹出窗口，但不知道如何移动图像并正确放置它。

这是我到目前为止所做的一个片段......

```
$("#thumbnailTitleLink").fancybox({
        hideOnContentClick : false,
        autoScale: false,
        transitionIn : "elastic",
        easingIn : 'easeOutCirc',
        overlayColor : "#1e72b1",
        overlayOpacity : .4,
        opacity: false,
        speedIn : 200,
        titleShow: false,
        scrolling: "no",
        orig: $( "#imgHouse" ),
        onComplete: function() {
        },
        openEffect  : 'elastic',
        closeEffect : 'elastic',

        helpers : {
            title : {
                type : 'inside'
            }
        }
    });

<td>
    <div><a id="thumbnailTitleLink"><img id="imgHouse" src="images/house_thumb.png"/></a></div>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:29:04.450

好的，我让它工作了......如果有人感兴趣......

```
$(this).fancybox({
            hideOnContentClick : false,
            autoScale: false,
            transitionIn : "elastic",
            transitionOut: 'elastic',
            easingIn : 'easeOutCirc',
            overlayColor : "#1e72b1",
            overlayOpacity : .4,
            opacity: false,
            speedIn : 950,
            titleShow: false,
            scrolling: "no",
            orig: img,
            onStart : function() {
                $(".popupText").each(function() {
                    $(this).hide();
                });
                $('#imgPopup').attr('alt',altImage);
                $('#imgPopup').attr('src',srcImage);
                $('#popup_wrapper').show();
                $('#' + name + 'PopupText').show();
                $(".popupImage").show();
            },
            afterClose : function() {
                $('#popup_wrapper').hide();
            },
            openEffect  : 'elastic',
            closeEffect : 'elastic',
            helpers : {
                title : {
                    type : 'inside'
                }
            }
        }); 
```

此致。吉列尔莫。

# mysql - MySql - 试图标点一个句子

> ID：13225609
> 
> 赞同：0
> 
> 时间：2012-11-05T03:37:10.180
> 
> 标签：mysql, special-characters

这是我的查询，它试图在每个没有以正确标点符号结尾的句子末尾加上句号

```
UPDATE SentenceTable SET sentence=concat(sentence, '.') WHERE sentence NOT LIKE '%.' OR sentence NOT LIKE '%?' OR sentence NOT LIKE '%!'; 
```

但是，这最终会在每个句子的末尾加上句号。恐怕我上面的正则表达式有问题，也许我没有正确转义一些特殊字符？我究竟做错了什么？这个查询应该怎么读？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:39:33.650

您`OR`在每个`sentence NOT LIKE ..`子句之间使用；使用`AND`应该解决这个问题：

```
UPDATE
    SentenceTable
SET
    sentence=concat(sentence, '.')
WHERE
    sentence NOT LIKE '%.'
    AND sentence NOT LIKE '%?'
    AND sentence NOT LIKE '%!'; 
```

这样做的原因是，假设以`sentence`结尾`!`，例如“这是一个句子！”。您的第一个子句是`sentence NOT LIKE '%.'`. 好吧，这句话不以 a 结尾`.`，并且因为您只使用`OR`-clause`WHERE`停止解析其余的子句。当您切换到 时`AND`，它会评估*所有*条件，并且由于最后一个条件失败，句子将不会更新！

# javascript - 如何将焦点放在文本框上？

> ID：13225611
> 
> 赞同：2
> 
> 时间：2012-11-05T03:37:38.703
> 
> 标签：javascript, jquery, html, textbox, focus

如何使用 JavaScript（或 jQuery）将焦点放在文本框上？

我在页面上有一个文本框，用户按下回车键后，文本框失去焦点。（切记没有发帖，页面不会刷新）

我希望能够通过 javascript 将焦点设置回文本框内，以便用户可以继续输入而不必单击任何内容。

在用户按下回车键后，我尝试添加以下代码：

```
$(".focus").focus(); 
```

我的文本框的代码：

```
<input type="text" class="focus" /> 
```

但是很可惜，光标没有出现在文本框内，用户仍然需要单击才能继续输入。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:41:49.683

您必须将`focus`代码应用于`input`，如果页面尚未加载或`DOM`代码运行时尚未准备好，则还没有`input`打开`focus`..

因此，您必须检查 DOM 是否已加载，如下所示：

```
$(function(){
    $(".focus").focus();
}); 
```

[http://jsfiddle.net/c7aUS/](http://jsfiddle.net/c7aUS/)

您还可以在页面底部的标记之前包含`</body>`代码，以便在您的所有 HTML 之后立即加载。

**注意**：如果您在 jsfiddle 中运行它，默认情况下您的代码在页面加载时运行。使用 JQuery 时，它会自动将其包装在以下代码中：

```
$(window).load(function(){
     //your code here
}); 
```

# 编辑：

在这种情况下，[meetamit](https://stackoverflow.com/a/13225679/276250)非常有帮助，我认为您正在寻找这个：

```
$(function(){
    $(".focus").focus();
    $(".focus").on('keydown', function(event) {
        if(event.which == 13) {// Enter key pressed
            $this = $(this);
            $this.focus();
            var value = $this.val();
            $this.val(''); /* clear the field */
            // do stuff with the value
        }
    });
});​ 
```

[http://jsfiddle.net/c7aUS/1/](http://jsfiddle.net/c7aUS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T03:50:06.770

为什么按回车键会从字段中带走焦点？（我无法重现它。）这可能表明仍然存在隐藏的问题。也许不吧。如果没有，这可能会有所帮助：

```
$(".focus").on('keydown', function(event) {
    if(event.which == 13) {// Enter key pressed
        event.preventDefault();
    }
}); 
```

​</p>

# python - 重复数据被存储到数据库中

> ID：13225613
> 
> 赞同：1
> 
> 时间：2012-11-05T03:38:11.707
> 
> 标签：python, duplicates, psycopg2, raspberry-pi

当我运行我的脚本时，我在数据库中添加了重复的条目，我想知道我可能做错了什么。

**硬件**
我有一台仪器通过串行通信连接到我的 Raspberry Pi，频率为 115,200。仪器每秒输出一行数据，我想将这些数据存储到数据库中。每行以 \n 结束。

**软件**
Python 2.7.3rc2
PySerial
PostgreSQL 9.1
Debian Wheezy

该数据库有一个我创建的名为 wattsup 的表：

```
CREATE TABLE wattsup (
    wattsuplocation text
    wattsuptime timestamp
    wattsupvalue numeric
); 
```

我的 Python 脚本如下所示：

```
import serial
import time
import psycopg2

ser = serial.Serial('/dev/ttyUSB0', 115200)
Location = 'A'

conn = psycopg2.connect("dbname='mydb' user='thotchi'")
cur = conn.cursor()

Insert = "INSERT INTO wattsup (wattsuplocation, wattsuptime, wattsupvalue) VALUES (%s, %s, %s)"

while 1:
    line = ser.readline()

    DataArray = line.split(',') #CSV output

    if len(DataArray) != 21:
        continue
    else:
        Time = time.strftime("%Y-%m-%d %H:%M:%S")
        Watts = float(DataArray[3]) / 10
        cur.execute(Insert, (Location, Time, Watts))
        conn.commit() 
```

它通常有效，但我在我不理解的数据中得到了一些重复。当我查询数据库时，我可以找到类似的数据。

```
A, 2012-11-04 18:00:00, 5.0
A, 2012-11-04 18:00:01, 5.1
A, 2012-11-04 18:00:02, 5.0
A, 2012-11-04 18:00:03, 4.9
A, 2012-11-04 18:00:04, 5.0
A, 2012-11-04 18:00:05, 5.0
A, 2012-11-04 18:00:05, 5.0
A, 2012-11-04 18:00:05, 5.0
A, 2012-11-04 18:00:05, 5.0
A, 2012-11-04 18:00:06, 5.1 
```

注意有重复数据（A, 2012-11-04 18:00:05, 5.0）。我知道仪器只在 1 秒输出数据，所以我确定它不是仪器。我尝试对代码进行一些更改，以便每 10 个条目发生一次提交，这似乎改善了这种情况。

知道会发生什么吗？我难住了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:40:40.567

一些想法 1）您可以在 while 循环中添加一些等待语句。现在它正在运行循环并使用所有处理器时间 2）您正在使用串行到 USB 转换器，这些设备有时会缓冲数据。3) 板载 UART 还缓冲数据 4) 执行 Readline 时，取决于用作终止字符的字符：Cr、LF 或 CrLF 5) 您可以尝试使用 Read，然后读入您自己的字符串缓冲区并查看为第一个终结者。

# html - html 编码不编码空间

> ID：13225616
> 
> 赞同：1
> 
> 时间：2012-11-05T03:38:44.257
> 
> 标签：html, vbscript, encode, space

我在 vbscript 上有以下功能：

```
Function HTMLEncode(sText) 
    Dim regEx 
    Dim matches 
    Dim match 

    sText = Replace(sText, Chr(34), "&quot;") 
    sText = Replace(sText, Chr(60)  , "&lt;") 
    sText = Replace(sText, Chr(62)  , "&gt;") 
    sText = Replace(sText, Chr(38), "&amp;") 
    sText = Replace(sText, Chr(32), "&nbsp;") 

    Set regEx= New RegExp 

    With regEx 
     .Pattern = "&#(\d+);" 'Match html unicode escapes 
     .Global = True 
    End With 

    Set matches = regEx.Execute(sText) 

    'Iterate over matches 
    For Each match in matches 
        'For each unicode match, replace the whole match, with the ChrW of the digits. 

         sText = Replace(sText, ChrW(match.SubMatches(0)), match.Value) 
    Next 

    HTMLEncode = sText 
End Function 
```

但是，这不会对空间进行编码。当我输入 >、<、" 和 & 时，它们会被编码。但是当我输入*空格*时，它不会被编码。它会，但是当我输入多个空格时它会被编码，例如：

```
"thishas4spaces    word" 
```

除最后一个空格外，前三个被编码。所以它是这样的：

```
"thishas4spaces&nbsp;&nbsp;&nbsp; word" 
```

知道为什么吗？请帮忙。语言是vbscript

# javascript - FullCalendar，时区问题。在 GMT +8 显示事件

> ID：13225617
> 
> 赞同：0
> 
> 时间：2012-11-05T03:38:48.130
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, fullcalendar

我一直面临这个问题，完整的日历会在比事件数据晚 8 小时的时间显示我的事件。我认为这是由于我的时区。

这是我的跟踪消息

```
Started GET "/events?custom_param1=something&custom_param2=somethingelse&  start=1351958400&end=1352563200&   authenticity_token=XEXpcBRnQuEivJ2NWjR2+OZ+Uscypalxx+hqGTIiwZA=&_=1352086291522" for 127.0.0.1 at 2012-11-05 11:31:31 +0800
Processing by EventsController#index as JSON
  Parameters: {"custom_param1"=>"something", "custom_param2"=>"somethingelse", "start"=>"1351958400", "end"=>"1352563200", "authenticity_token"=>"XEXpcBRnQuEivJ2NWjR2 OZ Uscypalxx hqGTIiwZA=", "_"=>"1352086291522"}
  Event Load (0.5ms)  SELECT `events`.* FROM `events` WHERE (starts_at > '2012-11-04T00:00:00+08:00') AND (ends_at < '2012-11-11T00:00:00+08:00')
Completed 200 OK in 10ms (Views: 8.2ms | ActiveRecord: 0.5ms) 
```

这里的问题是 Unix 中的开始时间是 2012 年 11 月 3 日星期六 16:00:00 GMT，而我将其设置为 2012 年 11 月 4 日 0.00.00。

这是我的代码

```
class Event < ActiveRecord::Base
  scope :before, lambda {|end_time| {:conditions => ["ends_at < ?",   Event.format_date(end_time)] }}
  scope :after, lambda {|start_time| {:conditions => ["starts_at > ?", Event.format_date(start_time)] }}
  def as_json(options = {})
    {
      :id => self.id,
      :title => self.title,
      :description => self.description || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => false,
      :recurring => false,
      :url => Rails.application.routes.url_helpers.event_path(id),
      #:color => "red"
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_time.iso8601
  end
end 
```

将 ignoreTimeZone 更改为 true 对我也不起作用。因此，如果有人可以帮助我，我将不胜感激。

也许类似于解析时间的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:51:19.463

如果您要传递 UNIX 时间值，它可能是从纪元 (1970-01-01T00:00:00Z) 算起的秒或毫秒 UTC。要将本地 javascript 日期对象设置为与客户端本地时区相同的时间，请将 UTC 时间值直接传递给[Date 构造函数](http://ecma-international.org/ecma-262/5.1/#sec-15.9.3.2)。

例如

```
// if timeValue is milliseconds
var localDate = new Date(timeValue);

// if timeValue is in seconds
var localDate = new Date(timeValue * 1000); 
```

例如

```
// For timeValue in milliseconds
new Date(1352090840000); // 2012-11-05T04:47:20Z 
```

要将本地时间作为纪元以来的 UTC 毫秒数发回，请执行相反的操作：

```
var utcTimeValue = localDate.getTime(); 
```

返回的[时间值](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)[`getTime`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.9)是自纪元以来的 UTC 毫秒数。

# sql - 对从表中检索到的 XML 数据使用修改和插入时出错：必须是单节点

> ID：13225619
> 
> 赞同：3
> 
> 时间：2012-11-05T03:38:56.273
> 
> 标签：sql, xml, sql-server-2008, tsql, xquery

我正在尝试插入一些我从表中的列中检索的 xml。我检索它如下：

```
DECLARE @profiles_xml xml
DECLARE @profile_id int
SET @profile_id = 16
SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE
profiles.value('(Profile/ID)[1]','int')= @profile_id) 
```

生成的 xml 如下所示：

```
<Profile>
  <ID>16</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>test</Name>
    <Activities />
  </User>
</Profile> 
```

但是，当我尝试像这样将元素插入其中时：

```
SET @devices_xml.modify('insert <Activity><Name>testname</Name></Activity>
 as first into (Profiles/User/Activities[1])') 
```

我收到以下错误：

```
XQuery [modify()]: The target of 'insert' must be a single node, found 'element(Activities,xdt:untyped) *' 
```

我不明白为什么会出现错误，因为目前只有一个活动元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T05:45:06.797

你有两个小错误：

*   顶级 XML 节点是`<Profile>`- 但您`Profiles`在插入 XQuery 中有
*   即使您的集合可能没有条目或只有一个条目 - 您指定的 XPath*可能*会返回多个节点 - 所以您需要明确告诉它采用这些节点中的第一个。在这里，您将`[1]`索引器放在错误的位置（在关闭的内部`)`）。

试试这个 XQuery：

```
SET @devices_xml.modify('insert <Activity><Name>testname</Name></Activity>
                         as first into (Profile/User/Activities)[1]') 
```

至少在我的情况下，然后返回：

```
<Profile>
  <ID>16</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>test</Name>
    <Activities>
      <Activity>
        <Name>testname</Name>
      </Activity>
    </Activities>
  </User>
</Profile> 
```

# mysql - 在 MySQL 中使用逗号作为分隔符进行解析

> ID：13225620
> 
> 赞同：5
> 
> 时间：2012-11-05T03:39:08.587
> 
> 标签：mysql

我有两张桌子

表 1 用逗号分隔的用户列表

```
Name    UserID
abc     A,B,C,D
def     A,B,C 
```

表2

```
Name   UserID
abc    A
abc    B
abc    C
def    A
def    B 
```

我需要找到每个名称在 table1 中但不在 table2 中的用户（当用户 ID 到名称对存在于 table2 中但不存在于 table1 作为 CSV 时，永远不会有实例）。

输出应该是

```
Name    UserID
abc     D
def     C 
```

*我可以用 PHP 做到这一点，但**有没有办法通过查询来完成？***如果我将其作为查询进行，我不确定从哪里开始。我可以使用逗号作为分隔符在 MySQL 中解析吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:22:46.757

我将您的测试数据插入 SQLFiddle 中的测试模式并运行以下查询。

这是 SQLFiddle 的链接以及测试和阳性结果： [http ://sqlfiddle.com/#!2/83dfd/4/0](http://sqlfiddle.com/#!2/83dfd/4/0)

这是查询：

```
SELECT
COALESCE(NORMALIZED_TABLE1.NAME, TABLE2.NAME) AS NAME,
COALESCE(NORMALIZED_TABLE1.USERID, TABLE2.USERID) AS USERID
FROM (
     SELECT NAME,
     SUBSTRING(
          USERID
          FROM CASE
               WHEN INDEX_TABLE.POS = 1 THEN 1
               ELSE INDEX_TABLE.POS + 1
               END
          FOR CASE LOCATE(',', USERID, INDEX_TABLE.POS + 1)
              WHEN 0 THEN CHARACTER_LENGTH(USERID) + 1
              ELSE LOCATE(',', USERID, INDEX_TABLE.POS + 1)
              END
              - CASE
                WHEN INDEX_TABLE.POS = 1 THEN 1
                ELSE INDEX_TABLE.POS + 1
                END
     ) AS USERID
     FROM TABLE1
     INNER JOIN (
          SELECT @rownum:=@rownum+1 POS
          FROM (
             SELECT 0 UNION SELECT 1 UNION SELECT 2 UNION SELECT 3
             UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
             UNION SELECT 7 UNION SELECT 8 UNION SELECT 9
          ) a, (
             SELECT 0 UNION SELECT 1 UNION SELECT 2 UNION SELECT 3
             UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
             UNION SELECT 7 UNION SELECT 8 UNION SELECT 9
          ) b, (
             SELECT 0 UNION SELECT 1 UNION SELECT 2 UNION SELECT 3
             UNION SELECT 4 UNION SELECT 5 UNION SELECT 6
             UNION SELECT 7 UNION SELECT 8 UNION SELECT 9
          ) c, (SELECT @rownum:=0) r
     ) INDEX_TABLE
     ON INDEX_TABLE.POS <= CHAR_LENGTH(TABLE1.USERID)
     AND (
          INDEX_TABLE.POS = 1
          OR SUBSTRING(USERID FROM INDEX_TABLE.POS FOR 1) = ','
     )
) AS NORMALIZED_TABLE1
LEFT OUTER JOIN TABLE2
ON NORMALIZED_TABLE1.NAME = TABLE2.NAME
AND NORMALIZED_TABLE1.USERID = TABLE2.USERID
WHERE TABLE2.NAME IS NULL; 
```

如果您在 table1 中有很长的列宽，您可能需要扩展“INDEX_TABLE”子查询。您可以使用此链接上的代码复制并粘贴它：
[http ://www.experts-exchange.com/Database/MySQL/A_3573-A-MySQL-Tidbit-Quick-Numbers-Table-Generation.html](http://www.experts-exchange.com/Database/MySQL/A_3573-A-MySQL-Tidbit-Quick-Numbers-Table-Generation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:47:27.417

如果您的表是固定的（您想处理这些表），那么设计一个类来从中读取数据，而不是直接从那些预定义的表中保存设置数据；让您的对象在您的应用程序域中实时处理读取的数据，以获得全面的可访问性。:-D

# jquery - 如何在不知道锚名称的情况下使链接转到页面上的下一个锚？

> ID：13225621
> 
> 赞同：1
> 
> 时间：2012-11-05T03:39:22.333
> 
> 标签：jquery, anchor

我在页面顶部有一个按钮，我想对其进行编码以继续下一个锚点，无论它是什么。其实我会想做下一个/上一个按钮去下一个和上一个锚点。此按钮位于静态框架上，因此理想情况下它应该滚动页面的其余部分。

任何建议都会很棒。同样，我不知道锚是什么，这更像是使用通用按钮的章节导航。

似乎在 dom 中找到下一个锚对象并去那里应该是可行的，但我不是 jquery 或 javascript 的专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:48:30.207

```
var index = -1;

$('.next').click(function() {
   index++;
   $(window).scrollTop($('a').eq(index).position().top);

});
$('.previous').click(function() {
   index--;
   if(index < 0) { index = 0;}

   $(window).scrollTop($('a').eq(index).position().top);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:46:28.250

一个好的解决方案是使用一个类设置“当前”锚点（也许用 class='current' 硬编码页面上的第一个锚点），然后使用 jquery 遍历 dom 并选择下一个或上一个锚点。假设您有“下一个”和“上一个”按钮，您可以执行以下操作：

```
<script type="text/javascript">

  $('.next').click(function(e){
    e.preventDefault();
    var current_anchor = $('a.current');
    var next_anchor = current.next('a');
    $('body').animate({scrollTop:next_anchor.offset().top});
  })

  $('.previous').click(function(e){
    e.preventDefault();
    var current_anchor = $('a.current');
    var previous_anchor = current.prev('a');
    $('body').animate({scrollTop:previous_anchor.offset().top});
  })

</script> 
```

# eclipse - eclipse jena 和 tomcat 查询

> ID：13225623
> 
> 赞同：0
> 
> 时间：2012-11-05T03:39:53.270
> 
> 标签：eclipse, servlets, sparql, jena

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.hp.hpl.jena.ontology.OntModel;
import com.hp.hpl.jena.rdf.model.*;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.util.FileManager;
import com.hp.hpl.jena.sparql.*;
import java.io.InputStream;
import com.hp.hpl.jena.query.*;
import com.hp.hpl.jena.util.FileManager;
import com.hp.hpl.jena.ontology.*;

/**
 * Servlet implementation class rdf
 */
public class rdf extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public rdf() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String inputFileName = "/home/jarboox/Documentos/Eclipse/workspace/Sparql/src/tres.rdf";

        try {

              //create the reasoning model using the base
              OntModel inf = ModelFactory.createOntologyModel();

              // use the FileManager to find the input file
              InputStream in = FileManager.get().open(inputFileName);
              if (in == null) {
                throw new IllegalArgumentException("File: " + inputFileName + " not found");
              }

              inf.read(in, "");

        } catch (Exception e) {
            System.out.println(e.getMessage());    
          } 
    }

} 
```

> Tomcat问题：
> 
> 输入异常通知
> 
> mensaje La ejecución del Servlet lanzó una excepción
> 
> 描述 El servidor encontró un error interno que hizo que no pudiera rellenar este requerimiento。
> 
> 例外
> 
> javax.servlet.ServletException: La ejecución del Servlet lanzó una excepción causa raíz
> 
> java.lang.NoClassDefFoundError: com/hp/hpl/jena/rdf/model/ModelFactory rdf.doPost(rdf.java:55) javax.servlet.http.HttpServlet.service(HttpServlet.java:637) javax.servlet.http .HttpServlet.service(HttpServlet.java:717) 原因
> 
> java.lang.ClassNotFoundException: com.hp.hpl.jena.rdf.model.ModelFactory org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1526) rdf.doPost(rdf.java:55) javax.servlet.http.HttpServlet.service(HttpServlet.java:637) javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 注意Apache Tomcat/6.0.36 的完整原因错误 se encuentra en los archivos de diario de diario。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:10:17.233

> java.lang.NoClassDefFoundError: com/hp/hpl/jena/rdf/model/ModelFactory rdf.doPost(rdf.java:55)

jena jar 不在 webapp 的运行时类路径上。

# python - 从递归算法构建生成器

> ID：13225625
> 
> 赞同：0
> 
> 时间：2012-11-05T03:40:01.823
> 
> 标签：python, recursion, iterator, generator

我有一个递归方法，用于遍历红黑树，并存储各种节点信息（在 list 中`storage`）。

```
def _walk (self, storage, func, starting_node) :
    if starting_node is not self._nil :
        self._walk(storage, func, starting_node.left)
        storage.append(func(starting_node))
        self._walk(storage, func, starting_node.right) 
```

但是，我想重新实现这个方法，以便它构建一个生成器（据我了解，这应该可以节省时间和内存）。这样做的“最佳”方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:44:52.457

首先将动作与行走脱钩

```
def _walk (self, starting_node) :
    if starting_node is not self._nil :
        for x in self._walk(starting_node.left):
            yield x
        yield starting_node
        for x in self._walk(starting_node.right):
            yield x

def traverse(self):
    starting_node = ???     # maybe these are passed as
    func = ???              # parameters to traverse
    for node in self._walk(starting_node):
        yield func(node) 
```

`traverse`大致相当于

```
imap(func, self._walk(starting_node)) 
```

或者这个生成器表达式

```
(func(x) for x in self._walk(starting_node)) 
```

* * *

您可以通过手动优化尾递归来减少使用的堆栈量

```
def _walk (self, starting_node) :
    while starting_node is not self._nil :
        for x in self._walk(starting_node.left):
            yield x
        yield starting_node
        starting_node = starting_node.right 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:49:52.697

```
def _walk (self, func, starting_node) :
    if starting_node is not self._nil :
        for x in self._walk(func, starting_node.left) :
            yield x
        yield func(starting_node)
        for x in self._walk(func, starting_node.right) :
            yield x 
```

# jquery - 应该通过 PHP 到 HTML 的 jQuery .post() 函数？

> ID：13225634
> 
> 赞同：2
> 
> 时间：2012-11-05T03:41:05.797
> 
> 标签：jquery, jquery-post

我浏览了以下两个链接的代码：http: [//pastebin.com/iUd22CRY](http://pastebin.com/iUd22CRY) [http://www.jensbits.com/2009/10/04/jquery-ajax-and-jquery-post-form-submit-带有 php 的示例](http://www.jensbits.com/2009/10/04/jquery-ajax-and-jquery-post-form-submit-examples-with-php)

代码本身的一切似乎都很清楚，但我无法弄清楚哪些代码块与哪些文件名相关联的完整故事。基本上，我试图找到一个使用 jQuery 的 post 函数与 PDO 对象交互的最新指南，但我这样做非常不成功。

如果我无法弄清楚文件名应该是什么，我接下来计划做的是尝试转换/更新 w3schools 中的示例。基本上，使用 pastebin，我想我知道前三段代码的去向，但我不知道将 javascript 放在最后的位置。不过，在我进入贫民窟之前，我希望有人会查看我的代码。你能看出问题吗？

-编辑-我通过 Chrome 的控制台（`ctrl+shift+j`浏览器内）注意到一个错误：http: `Uncaught SyntaxError: Unexpected token ; encode.js:17` [//ajform.99k.org/issues/semicolon/](http://ajform.99k.org/issues/semicolon/ "分号问题")或`Uncaught ReferenceError: $ is not defined encode.js:1` [http://ajform.99k.org/issues/orderofappearance/](http://ajform.99k.org/issues/orderofappearance/ "出场顺序问题")

文件系统结构：

`webroot/sitename/index.php`; `webroot/sitename/process_form.php`; `webroot/sitename/js/jquery-1.8.2.js`;`webroot/sitename/js/encode.js`

索引.php：

```
<!DOCTYPE html>
<html>
<head>
  <title>Tmp homepage</title>
  <script type="text/javascript" src="js/encode.js"></script>
  <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
</head>

<body>
<form id="ajform">
    <fieldset>
        <legend>jQuery.post Form Submit example</legend>
        <p>
            <label for="name">Name:</label></br />
            <input id="name" type="text" name="name" />
        </p>
        <p>
            <label for="email">email:</label></br />
            <input id="email" type="text" name="email" />
        </p>
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
</form>
<div id="post"></div>
</body>

</html> 
```

编码.js：

```
$(document).ready(
  $(function(){
      $("#ajform").submit(function(e){    
         e.preventDefault();  

          $.post("../process_form.php", $("#ajform").serialize(),
          function(data){
              if(data.email_check == 'invalid'){

                      $("#post").html("<div class='errorMessage'>Sorry " + data.name + ", " + data.email + " is NOT a valid e-mail address. Try again.</div>");
              } else {
                  $("#post").html("<div class='successMessage'>" + data.email + " is a valid e-mail address. Thank you, " + data.name + ".</div>");
                  }
          }, "json");    
      });

  });
) 
```

process_form.php：

```
<?php

$email_check = '';
$return_arr = array();

if(filter_var($_POST['email'], FILTER_VALIDATE_EMAIL) || filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
   $email_check = 'valid';
}
else {
    $email_check = 'invalid';
}

$return_arr["email_check"] = $email_check;

if (isset($_POST['email'])){
    $return_arr["name"] = $_POST['name'];
    $return_arr["email"] = $_POST['email'];
}

echo json_encode($return_arr); 
```

-编辑- 解决错误后，感谢回答者，工作版本位于[hhttp://www.jensbits.com/demos/jqsubmit/index.php](http://www.jensbits.com/demos/jqsubmit/index.php)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:54:14.353

你`<script type="text/javascript" src="encode.js"></script>`没有加载。它返回一个 404。

并且，放在`encode.js`jquery js 之后。

从您引用的我的帖子中查看演示的源代码。它会帮助你。

[http://www.jensbits.com/demos/jqsubmit/index.php](http://www.jensbits.com/demos/jqsubmit/index.php)

谢谢，顺便说一句...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:27:35.853

带有文件名的工作代码：

index.php，位于`sitename/index.php`：

```
<!DOCTYPE html>
<html>
<head>
  <title>Tmp homepage</title>
  <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
  <script type="text/javascript" src="js/encode.js"></script>
</head>

<body>
<form id="ajform">
    <fieldset>
        <legend>jQuery.post Form Submit example</legend>
        <p>
            <label for="name">Name:</label></br />
            <input id="name" type="text" name="name" />
        </p>
        <p>
            <label for="email">email:</label></br />
            <input id="email" type="text" name="email" />
        </p>
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
</form>
<div id="post"></div>
</body>

</html> 
```

process_form.php，位于`sitename/process_form.php`（php 5.2 或更高版本[可能因您的配置而异]）：

```
<?php

$email_check = '';
$return_arr = array();

if(filter_var($_POST['email'], FILTER_VALIDATE_EMAIL) || filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
   $email_check = 'valid';
}
else {
    $email_check = 'invalid';
}

$return_arr["email_check"] = $email_check;

if (isset($_POST['email'])){
    $return_arr["name"] = $_POST['name'];
    $return_arr["email"] = $_POST['email'];
}

echo json_encode($return_arr); 
```

encode.js，位于`sitename/js/encode.js`（使用 jQuery 1.8.2.min.js）：

```
$(document).ready(
  $(function(){
      $("#ajform").submit(function(e){    
         e.preventDefault();  

          $.post("../process_form.php", $("#ajform").serialize(),
          function(data){
              if(data.email_check == 'invalid'){

                      $("#post").html("<div class='errorMessage'>Sorry " + data.name + ", " + data.email + " is NOT a valid e-mail address. Try again.</div>");
              } else {
                  $("#post").html("<div class='successMessage'>" + data.email + " is a valid e-mail address. Thank you, " + data.name + ".</div>");
                  }
          }, "json");    
      });

  })
) 
```

# visual-studio-2008 - Visual Studio 2012 未能检测到 Visual Studio 2008 构建工具

> ID：13225637
> 
> 赞同：22
> 
> 时间：2012-11-05T03:41:51.740
> 
> 标签：visual-studio-2008, .net-3.5, c++-cli, visual-studio-2012

我正在尝试使用 Visual Studio 2012 构建面向 .NET 3.5 的 C++ CLI 应用程序。

通过安装 Visual Studio 2008 并指定 v90 平台工具集，我已经在一台机器上完成了这项工作。

现在我在一台新机器上尝试这个，我已经安装了 Visual Studio 2008，然后是 Visual Studio 2012。

现在我得到了这个令人难以置信的令人沮丧的错误：

> 错误 81 错误 MSB8020：找不到 Visual Studio 2008 的构建工具（平台工具集 = 'v90'）。要使用 v90 构建工具进行构建，请单击“项目”菜单或右键单击解决方案，然后选择“更新 VC++ 项目...”。安装 Visual Studio 2008 以使用 Visual Studio 2008 构建工具进行构建。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.Cpp.Platform.targets 43 5 WinApiWrapper (Visual Studio 2008)

为什么 Visual Studio 2012 不能找到 Visual Studio 2008。有什么办法可以帮助它吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-05T05:41:20.473

事实证明，您还必须安装 Visual Studio *2010*。

一旦我安装了 Visual Studio 2010，Visual Studio 2012 就能够检测到 Visual Studio 2008 构建工具。

这看起来绝对是疯狂的，但你去吧。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-18T23:11:50.670

我遇到了完全相同的问题，但我安装了[Windows SDK 7.1](http://www.microsoft.com/en-us/download/details.aspx?id=8442)（或[Web 安装程序版本](http://www.microsoft.com/en-us/download/details.aspx?id=8279)），这也使它工作。

我记得我也把它安装到了原来的电脑上。

请记住，您应该首先卸载任何版本的 Visual C++ 2010 可再发行组件，否则[Windows SDK 安装将失败](http://support.microsoft.com/kb/2717426?wa=wsignin1.0)。

我知道这不是完美的解决方案，因为 Windows SDK 很大，但它是另一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T13:18:53.097

在下载任何东西之前，请尝试转到项目属性 -> 配置属性 -> 常规，然后将项目的**平台工具集**更改为**Visual Studio 2012 (v110)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-23T04:44:45.397

根据[找不到 Visual Studio 2008 (Platform Toolset = 'v90') 的构建工具](https://stackoverflow.com/questions/54626642/the-build-tools-for-visual-studio-2008-platform-toolset-v90-cannot-be-foun)，

**除了**VS 2008 中存在的 MSVC 9.0 工具链[（请安装 VS 2008 SP1，否则 x64 编译器会损坏）]，**您还需要此工具链的 MsBuild 4.0 工具集配置文件，**以便 MsBuild 可以找到它。

**除了自己的工具链外，**它们还谨慎地出现在 Visual Studio 2010、 C++ x86 和 x64 功能中。****它们也存在于 WinSDK 7.1 中，但其安装程序**在 x64 系统上已损坏；**您可以**通过直接运行仅安装工具集文件`<GRMSDK_EN_DVD.iso>\Setup\vc_stdx86\vc_stdx86.msi`（尽管名称如此，但它具有适用于所有 3 个平台的工具集文件）。**

# android - 代码未达到 if 语句

> ID：13225640
> 
> 赞同：2
> 
> 时间：2012-11-05T03:42:32.830
> 
> 标签：android, if-statement

我有以下代码：

```
public void click(View v)
{
    Button b = (Button) v;
    TextView viewEditText = (TextView) findViewById(R.id.functionTextView);
    String editText = viewEditText.getText().toString();

    if (b.getId() == R.id.backspace)
    {
        if (viewEditText.length() > 0)
        {
            if (editText.substring(editText.length() - 1, editText.length()) == ".")
            {
                periodTrue = false;
            }
            viewEditText.setText(viewEditText.getText().toString().substring(0, viewEditText.length() - 1));
        }
    }
} 
```

在这段代码中，如果前面的条件为真，我检查被退格的字符是否是句点。它将变量 periodTrue 设置为 false。这告诉应用程序可以添加另一个句点。

一切都`backspace`像往常一样使用密钥，除了它永远不会在设置变量的 if 语句中出现。它不会引发任何错误，我已经检查过

`viewEditText.append(editText.subString(editText.length()-1, editText.length());`验证返回的字符是否为“.”。

我不知道为什么它不起作用，并且在编译或运行时也不会引发错误或警告。所以我来找你看看是否有不同的观点可以表明我明显做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:48:06.230

```
if (editText.substring(editText.length() - 1, editText.length()) == ".") 
```

当您比较两个s 的*引用*时，这将不起作用`String`，这将是不同的。（这个问题更深入的解释：[How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)）

请改用以下内容：

```
if (".".equals(editText.substring(editText.length() - 1, editText.length()))) 
```

# php - 如何在 php 中创建带有下拉列表框的动态 html 表单，从 mysql 数据库中获取数据？

> ID：13225647
> 
> 赞同：1
> 
> 时间：2012-11-05T03:45:01.893
> 
> 标签：php, html

我在 html 中创建了一个带有下拉列表框的表单，其中包含 php 文件中的静态值，现在我需要使用 mysql 数据库中的数据填充这些下拉列表。我在 php 中编写了一个函数来从 mysql 表中检索数据。因为我是 php 新手，所以我不知道如何从 html 调用 php 函数。是否可以像调用 JavaScript 函数一样调用 php 函数。

这是我的 HTML 代码。

```
 <div id="machinelog">
    <form id="intermediate" name="inputMachine" method="post">

    <select id="selectDuration" name="selectDuration"> 
      <option value="1 WEEK" >Last 1 Week</option>
      <option value="2 WEEK" >Last 2 Week </option>
      <option value="3 WEEK" >Last 3 Week</option>
    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

    <select id="selectMachine" name="selectMachine"> 
        <option value="M1" >Machine 1</option>
        <option value="M2" >Machine 2</option>
        <option value="M3" >Machine 3</option>
    </select>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<input id="Button" class="button" type="submit" value="Submit" />
</form> 
</div> 
```

我需要从 mysql 中获取所有机器名称并填充“selectMachine”下拉列表框。

我的php函数是

```
 function selectMachine()
  {
    $strQuery = "select id, machine
           from rpt_machine
           order by machine";

    $machineResult = mysql_query($strQuery);

    while($arrayRow = mysql_fetch_assoc($machineResult)) {
      $strA = $arrayRow["id"];
      $strB = $arrayRow["machine"];

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:48:19.617

为什么要创建函数？简单地这样做

```
<?php
$query = "SELECT * FROM ...."; //Write a query
$data = mysqli_query($connect, $query);  //Execute the query
?>
<select>
<?php
while($fetch_options = mysqli_fetch_array($data)) { //Loop all the options retrieved from the query
?>
 //Added Id for Options Element 
<option id ="<?php echo $fetch_options['id']; ?>"  value="<?php echo $fetch_options['name']; ?>"><?php echo $fetch_options['name']; ?></option><!--Echo out options-->

<?php
}
?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:55:14.917

你可以写一个类似于这个的函数：

```
function display_dropdown($id){
  //We need to get the dropdown option from the database
  $sql = 'SELECT machine_name FROM your_table';
  $result =   mysql_query($sql) or die ('Query in display_dropdown failed:'. mysql_error());
  echo '<select name="'.$id.'" id="'.$id.'">';
  while($row = mysql_fetch_array($result,MYSQLI_ASSOC)){
    echo '<option value="'.$row{machine_name}.'">
            '.$row{machine_name}.'</option>';
  }
  echo '</select>';
  echo '</td>';
} 
```

要了解如何制作和调用 php 函数，[请转到此处](http://php.net/manual/en/language.functions.php)

# java - 为什么我可以声明一个接口类型的对象，并将这个对象实例化为另一种类型？

> ID：13225649
> 
> 赞同：0
> 
> 时间：2012-11-05T03:45:20.990
> 
> 标签：java, android, list, arraylist

我是 Java 和 Android 的新手。我想了解以下行：

```
List<Map<String, String>> listMap = new ArrayList<Map<String, String>>(); 
```

我的疑问是：它被声明为一个名为 listMap 的对象，它是 Map 的 List 类型，对吧？但它被实例化为一个 ArrayList。很抱歉这个简单的问题，但为什么会这样？

ps1：我知道List是一个接口，所以不能实例化一个接口类型的对象。

ps2：我可以将 listMap 声明为 ArrayList 类型。将其声明为列表有什么好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:46:48.273

> ps1：我知道 List 是和接口，所以我不能实例化它的类型和对象。

```
List<Map<String, String>> listMap = new ArrayList<Map<String, String>>(); 
```

你是对的，`List`是一个*接口*，因此你将无法实例化一个*接口*。您需要使用接口的一些实现类来实例化。`ArrayList`是接口的实现类，`List`在able语句中使用。

> ps2：我可以将listMap 声明为ArrayList 类型。将其声明为列表有什么好处。

您总是可以`ArrayList`在左侧使用，即

```
 ArrayList<Map<String, String>> listMap = new ArrayList<Map<String, String>>(); 
```

**使用接口的优势：** 如果你想在类中使用你的变量对象（listMap），那么最好使用*接口*作为类型，但是如果你的变量对象（lsitMap）在你的程序本地本地，那么我认为没有任何额外的优势。

现在你会想`Map`，这又是一个*接口*。请注意，您不是`Map`通过上述语句实例化对象。您只是提到您的`listMap`列表将包含`Map`类型元素。

同样，当您尝试实例化要添加的元素时`listMap`，您将需要一个接口的实现类，`Map`例如`HashMap`如下：

```
 List<Map<String, String>> listMap = new ArrayList<Map<String, String>>();

   Map<String, String> lsitMapElement1 = new HashMap<String, String>();
   lsitMapElement1.put("key1", "value1");
   listMap.add(lsitMapElement1 );

   Map<String, String> lsitMapElement2 = new HashMap<String, String>();
   lsitMapElement2.put("key2", "value2");
   listMap.add(lsitMapElement2); 
```

希望这能让事情变得清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T03:49:59.723

`ArrayList`是 的子类型`List`。那是一个`ArrayList`is-a `List`。

您可以将子类型的实例分配给它的超类型的变量。或者，如果需要超类型 some ，您可以将其替换为 some substype 。

* * *

您可以通过它实现对象多态性（通过继承），并且您的代码不依赖于某些特定的实现。而是在未来的任何时候，如果您突然意识到这`ArrayList`不起作用并且您需要其他一些实现，`List`那么您可以轻松切换到该实现而不影响其余代码。

这就是他们说“尽可能始终针对接口编写代码”的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:48:33.977

该类`ArrayList`实现了`List`接口，这意味着定义的所有方法`List`都已实现。其他代码不需要知道这是一个`ArrayList`具体的，只要它实现了所有的`List`方法。

# wpf - 如何：当窗口大小改变时数据网格单元格大小改变

> ID：13225653
> 
> 赞同：0
> 
> 时间：2012-11-05T03:45:49.083
> 
> 标签：wpf, datagrid

首先，我的窗口设置为 900 像素高度和 600 像素宽度。它包含一个 4 列的数据网格。我为单元格创建了一个模板，宽度为 100 像素。现在，当我更改窗口大小时，我希望单元格的宽度与窗口大小成比例增长。我尝试添加数据网格大小更改事件，但没有成功。

我怎样才能做到这一点？谢谢！

**更新**：还有一个问题：有什么方法可以使单元格的大小相同，无论它们是否为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:53:57.127

在网格定义中

```
<Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="5*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions> 
          <ColumnDefinition Width="5*" MinWidth="70" />             
          <ColumnDefinition Width="Auto" /> 
       ... 
```

MinWidth ：获取或设置元素的最小宽度约束。

# button - 在数据窗口中的按钮上调用事件

> ID：13225655
> 
> 赞同：2
> 
> 时间：2012-11-05T03:46:06.237
> 
> 标签：button, datawindow

我在数据窗口上放置了一个搜索按钮，并且我已经有一个用于搜索此类列表的事件......一旦在运行时单击该按钮，如何调用事件。

下面是我的名为“ue_key”的活动的代码

```
 string xcode, iseries, ycode, sql_statement, xname, i_cname, name, iseries_no, irequested_by, irequest_problem, irequesting_dept, idate_request, idate_needed
    string iasset_no, idate_received, istatus
    long i_row
    //integer 

    i_cname = dw_work_order.getcolumnname()
    i_row = this.getrow()
    if i_row > 0 then
        if key = keyF2! and i_cname = 'series_no' then

            //open(w_csearch)   
            //  Then, define select statement
            sql_statement = "SELECT series_no as 'Series NO', requested_by as 'Requested By' FROM work_order_form where status = 'A' or status = 'ACTIVE';"

            str_sellist args
            args.trans = sqlca
            args.sel_cmd = sql_statement

            //  Specify which column will be the return value
            args.retcol = 1

            //  Define drop-down items.  NOTE:  This should correspond
            //  with the alias you use for the columns you retrieve
            args.dropdown_items[1] = "Series NO"
            args.dropdown_items[2] = "Requested By"

            //  Define Search Window Title
            args.title = "Work Order"

            //  Define transaction object for the window
            //  This is REQUIRE for now...  :)

        //  Open with parameter
            OpenWithParm(w_sellist, args)
            ycode=message.stringparm

            xcode = ycode
        //  MessageBox('test', xcode)
            if trim(xcode) <> '' then

                    select   series_no, requested_by, request_problem, requesting_dept, date_request,date_needed, asset_no, status                                    
                    into        :iseries, :irequested_by, :irequest_problem, :irequesting_dept, :idate_request, :idate_needed, :iasset_no, :istatus
                    From work_order_form where series_no = :xcode using sqlca;

    //  Messagebox('test', iseries)
            this.setitem(THIS.GETROW(),'series_no', iseries)
            this.setitem(THIS.GETROW(),'requested_by', irequested_by)
            this.setitem(THIS.GETROW(),'request_problem', irequest_problem)
            this.setitem(THIS.GETROW(),'requesting_dept', irequesting_dept)
            this.setitem(THIS.GETROW(),'date_request', idate_request)
            this.setitem(THIS.GETROW(),'date_needed', idate_needed)
            this.setitem(THIS.GETROW(),'asset_no', iasset_no)
            this.setitem(THIS.GETROW(),'status', istatus)

    //dw_work_order.retrieve(iseries)

            end if
        end if
    end if 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:29:58.507

数据窗口控件具有“ButtonClicking”和“ButtonClicked”事件。您可以使用这些事件来识别单击了哪个按钮（检查事件参数，特别是 dwo.Name）并调用相应的代码。

您需要确保将数据窗口按钮的操作设置为“用户定义 (0)”。

# java - 使用 Java 将参数传递给 YQL

> ID：13225656
> 
> 赞同：0
> 
> 时间：2012-11-05T03:46:10.887
> 
> 标签：java, search, yql

我正在使用以下代码：

```
String zip = "75227";
String str = "http://query.yahooapis.com/v1/public/yql?q=select%20Title%2C%20Address%2C%20" +
            "City%2C%20State%2C%20Phone%2C%20Distance%20from%20local.search%20where%20query%3D%22" +
            "food%20pantries%22%20and%20zip%3D%22" + zip +"%22%20and%20(category%3D%2296927050%22%20or" +
            "%20category%3D%2296934498%22)%20%7C%20sort(field%3D%22Distance%22)";

Document doc = Jsoup.connect(str).get(); 
```

它通过替换邮政编码值产生了我想要的结果。我也想换个位置。我尝试通过执行以下操作对邮政编码做同样的事情：

```
String zip = "32207";

String service = "food pantry";

String testOne = "http://query.yahooapis.com/v1/public/yql?q=select%20Title%2C%20Address%2C%20" +
            "City%2C%20State%2C%20Phone%2C%20Distance%20from%20local.search%20where%20query%3D%22" +
            service + "%22%20and%20zip%3D%22" + zip +"%22%20and%20(category%3D%2296927050%22%20or" +
            "%20category%3D%2296934498%22)%20%7C%20sort(field%3D%22Distance%22)"; 
```

当以这种方式使用时，变量“服务”给了我一个错误。

我最初尝试像这样使用 yql 表：

```
String search = "http://query.yahooapis.com/v1/public/yql?q=";
String table = "select Title, Address, City, State, Phone, Distance from local.search where " +
            "query=\"food pantries\" and zip=\"75227\" and (category=\"96927050\" or category=" +
            "\"96934498\") | sort(field=\"Distance\")";

String searchText = search + table; 
```

更新：

这是我得到的错误：

```
Exception in thread "main" org.jsoup.HttpStatusException: HTTP error fetching URL. Status=505, URL=http://query.yahooapis.com/v1/public/yql?q=select%20Title%2C%20Address%2C%20City%2C%20State%2C%20Phone%2C%20Distance%20from%20local.search%20where%20query%3D%22food pantry%22%20and%20zip%3D%2232207%22%20and%20(category%3D%2296927050%22%20or%20category%3D%2296934498%22)%20%7C%20sort(field%3D%22Distance%22)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:418)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)
at org.jsoup.examples.HtmlToPlainText.main(HtmlToPlainText.java:86) 
```

但是，这也不起作用。关于如何进行此搜索并将服务和邮政编码作为变量提供的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:04:24.970

你试过用 替换`String service = "food pantry";`吗`String service = "food%20pantry";`？

编辑：

它是“食品储藏室”还是“食品储藏室”……？

# javascript - 如何在 jquery ui 对话框中初始化按钮

> ID：13225660
> 
> 赞同：1
> 
> 时间：2012-11-05T03:47:17.133
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery ui 对话框。我已经在`document.ready`事件中初始化了一个对话框。

```
 $("#globalConfirm").dialog({
        width: 500, autoOpen: false, resizable: false, draggable: false,
        modal: false        
   }); 
```

此对话框用于确认。现在稍后我想添加一个按钮选项和回调函数，例如：

```
 $("#globalConfirm").dialog("option", "buttons", '{
        "Confirm": function (event, ui) {
            //jquery code
        },
        "Cancle": function (event, ui) {
            $(this).dialog("close");
        }'
    ); 
```

这是在初始化对话框后初始化jquery ui对话框的按钮选项的编写方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:01:05.750

是的，只需将选项作为对象传递，而不是字符串。

```
 $("#globalConfirm").dialog("option", "buttons", {
        "Confirm": function (event, ui) {
            //jQuery code
        },
        "Cancel": function (event, ui) {
            $(this).dialog("close");
        }
    ); 
```

# jquery - 将光标定位在文本输入的左侧

> ID：13225661
> 
> 赞同：3
> 
> 时间：2012-11-05T03:47:23.890
> 
> 标签：jquery, html, css, input

> **可能重复：**
> [jQuery 在文本区域中设置光标位置](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)

当带有文本的输入被聚焦时，光标从右侧文本的末尾开始。如何使光标位于焦点的左侧？

我见过使用“setCursor”的示例，但我收到一个错误，即 setCursor 未定义。

```
<input type="text" class="myInput">
    Tabbing into this should put my cursor at the left!
</input> 
```

setCursor 抛出一个未定义的错误。

```
$(".myInput").focus(function(){
    var node = $(this);
    setCursor(node, 0);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:46:27.463

尝试这个..

```
<input type="text" class="myInput" value="Tabbing into this should put my cursor at the left!" />

(function(){
        jQuery.fn.setSelection = function(selectionStart, selectionEnd) {
            if(this.length == 0) return this;
            input = this[0];

            if (input.createTextRange) {
                var range = input.createTextRange();
                range.collapse(true);
                range.moveEnd('character', selectionEnd);
                range.moveStart('character', selectionStart);
                range.select();
            } else if (input.setSelectionRange) {
                input.focus();
                input.setSelectionRange(selectionStart, selectionEnd);
            }

            return this;
        }
        jQuery.fn.setCursorPosition = function(position){
            if(this.length == 0) return this;
            return $(this).setSelection(position, position);
        }
        $(".myInput").focus(function(){
            $(this).setCursorPosition(0);
        });
    })(); 
```

希望它现在可以工作

# javascript - Windows 8 的指针和手势：window.navigator.msPointerEnabled 未检测到任何内容

> ID：13225662
> 
> 赞同：3
> 
> 时间：2012-11-05T03:47:24.653
> 
> 标签：javascript, windows-8, dom-events

我在 Windows 8 上使用指针和手势事件时遇到问题。

问题是我无法通过 Javascript 在我的网站上检测到任何手指/手势移动。我确实遵循了微软的指示：http: [//msdn.microsoft.com/en-us/library/ie/hh673557](http://msdn.microsoft.com/en-us/library/ie/hh673557(v=vs.85).aspx) (v=vs.85).aspx 。

但是，看起来即使是最简单的函数也会`window.navigator.msPointerEnabled`返回`null`或者`false`何时返回 a `true`（因为我使用的是支持触控的 Windows 8 平板电脑）。

以前有人有同样的问题吗？如果是这样，你是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:42:42.713

```
The following example is a basic paint application that works with mouse, touch, and pen via pointer events.

<style>
  html { 
    -ms-touch-action: none; /* Shunt all pointer events to JavaScript code. */
  }
</style>
<canvas id="drawSurface" width="500px" height="500px" style="border:1px solid black;"></canvas>
<script type='text/javascript'>
window.addEventListener('load', function() {
  var canvas = document.getElementById("drawSurface"),
  context = canvas.getContext("2d");
  if (window.navigator.msPointerEnabled) {
    canvas.addEventListener("MSPointerMove", paint, false);
  } 
  else {
    canvas.addEventListener("mousemove", paint, false);
  }
  function paint(event) {
    context.fillRect(event.clientX, event.clientY, 5, 5);
  }
});
</script> 
```

[有关更多详细信息，请查看此链接](http://msdn.microsoft.com/en-us/library/ie/hh673557%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:19:16.193

除了通常的东西（[正确的文档类型和元标记](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode)）之外，您还必须设置 -ms-touch-action:none; 在 css 中的 html 和/或 body 元素上：

```
html, body {
 -ms-touch-action: none;
} 
```

编辑：（[MSGestureChange 提供了一个完整的 html 示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh465856.aspx)）

# arrays - 如何在二维数组中的每一行之后转到下一行？

> ID：13225674
> 
> 赞同：1
> 
> 时间：2012-11-05T03:49:21.053
> 
> 标签：arrays, printing, 2d, row, airplane

所以我需要想出这样的东西：这是飞机上的座位布局。

> 1个ABCD
> 
> 2ABCD
> 
> 3ABCD
> 
> 4ABCD
> 
> 5ABCD
> 
> 6ABCD
> 
> 7ABCD

但是我的代码打印了这个：

> A B C D
> 
> ABABCD
> 
> ABABCD
> 
> ABABCD
> 
> 美国广播公司

这是我的代码，任何帮助将不胜感激。我刚开始使用数组

```
#include <iostream>

using namespace std;

int main ()
{
     char airplane[7][4] = {{'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'},
                             {'A', 'B', 'C', 'D'}};

     for (int i=0; i<4; i++)
     {

            for (int j=0; j<7; j++)
            {
                 cout<<airplane[i][j];
                 if (airplane[i][j]=='D')
                 {
                     cout<<endl;
                 }
            }
     }

     system ("PAUSE");
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:52:44.793

试试这个..:-->

```
#include <iostream>

using namespace std;

int main ()
{
  char airplane[7][4] = {{'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'},
                         {'A', 'B', 'C', 'D'}};

 for (int i=0; i<7; i++)       //Row
 {
        cout<<i+1;
        for (int j=0; j<4; j++)    //Column
        {
             cout<<airplane[i][j];
             cout<<" "; 
        }
     cout<<endl;
 }

 system ("PAUSE");
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:57:48.387

这里的代码：

```
 #include <iostream>

    using namespace std;

    int main ()
    {
         char airplane[7][4] = {{'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'},
                                 {'A', 'B', 'C', 'D'}};

         for (int i=0; i<7; i++)
         {
             cout << i+1;
                for (int j=0; j<4; j++)
                {
                     cout<<airplane[i][j];
                     if (airplane[i][j]=='D')
                     {
                         cout<<endl;
                     }
                }
         }

         system ("PAUSE");
         return 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:02:34.027

以这种方式更改 for 循环

```
for (int i=0; i<7; i++)
     {
            cout<<i+1;
            for (int j=0; j<4; j++)
            {
                cout<<' ';
                 cout<<airplane[i][j];                

            }
            cout<<endl;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T04:25:46.740

尝试运行外循环 7 次和内循环 4 次。包括 cout<

顺便说一句，如果您将每排的座位数更改为五个，Bui Akinori 给出的代码是错误的。

# javascript - 如何使用鼠标悬停停止图像旋转？

> ID：13225681
> 
> 赞同：0
> 
> 时间：2012-11-05T03:51:00.587
> 
> 标签：javascript, html

我创建了一个旋转图像的功能，现在我想做的是在使用 mouseover 命令时停止图像旋转。这是我必须让图像旋转的 js 编码

```
var m = {
Z   : 100,
xm  : 0,
xmm : .25,
ymm : 0,
ym  : 0,
mx  : 0,
nx  : 0,
ny  : 0,
nw  : 0,
nh  : 0,
xR  : 0,
nI  : 0,
scr : 0,
img : 0,

run : function () {
    m.xm += (m.xmm - m.xm) * .1;
    if (m.ym < m.nw * .15) m.ym++;
    m.xR += m.xm;
    for (var i = 0; i < m.nI; i++){
        var A = (i * 360 / m.nI) + m.xR;
        var x = Math.cos(A * (Math.PI / 180));
        var y = Math.sin(A * (Math.PI / 180));
        var a = m.img[i];
        a.style.width  = ''.concat(Math.round(Math.abs(y * m.ym) + y * m.Z), 'px');
        a.style.left   = ''.concat(Math.round((m.nw * .5) + x * ((m.nw * .5) - (m.nw * .05)) - ((Math.abs(y * m.ym) + y * m.Z) * .5)), 'px');
        a.style.height = ''.concat(Math.round(m.ym + y * m.Z), 'px');
        a.style.top    = ''.concat(Math.round((m.nh * .5) - (m.ym * .5) - x * (m.Z * .5) - (m.ymm * y)), 'px');
        a.style.zIndex = 600 + Math.round(y);
        m.setOpacity(a, (y * 50) + 100);
    }
    setTimeout(m.run, 30);
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:57:17.767

我真的没有详细阅读您的代码，但是您可能会做的是在函数之外设置一个参数，也许是旋转图像的函数的全局参数，将其称为“旋转”并将其设置为 TRUE

然后，在进行实际旋转之前，检查此“旋转”参数是否设置为 TRUE，如果是则旋转。

现在，onmouseover，您所要做的就是将“旋转”参数设置为 FALSE，然后当 setTimeout 触发器到期并且函数再次启动时它的 FALSE 时，图像不会旋转，因为它没有通过您的测试。

另一种方法是将您的 setTimeout 设置为仅在没有鼠标悬停时触发，因此如果鼠标悬停，请不要设置超时，其他人，请设置超时。

这些只是我在阅读您的代码时想到的两个想法，我认为您可以考虑一下并决定这些是否是您喜欢的解决方案，如果不是，那么我很想知道您的决定。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:22:17.680

下一个代码只是一个近似值，更像是“伪代码”而不是生产代码。无论如何，您可以根据需要随意修改。

```
var m = {
run: function() {
    this.isRunning = true;
    // when complete the cycle
    this.cycle = true;
},
play: function() {
    this.timeout = setTimeout((function($this){
        if($this.animCheck !== undefined) clearInterval($this.animCheck);
        $this.run();
    })(this), this.frames);
},
pause: function() {
    this.animCheck = setInterval((function($this) {
        // Obviously, you've to pause the animation when the cycle is finished.
        if($this.cycle) clearTimeout($this.timeout);
    })(this), this.frames);
    return !!this.animCheck;
},
init: function() {
    this.frames = 30;
    this.isRunning = true;
    [the element].addEventListener('mouseover', function() {
        if(this.pause()) this.isRunning = false;
    })
    this.play();
} 
```

};

m.init();

# c# - 计数器不断重置为 0

> ID：13225682
> 
> 赞同：2
> 
> 时间：2012-11-05T03:51:12.000
> 
> 标签：c#, buffer

我正在尝试在 C#中创建自己的[循环缓冲区。](http://en.wikipedia.org/wiki/Circular_buffer "圆形缓冲器")我正在使用计数器来跟踪需要插入下一个项目的位置。这是完整代码的[链接](http://pastebin.com/SpFJFxMc)，这是执行此操作的（简化）代码：

```
public class CircularBuffer<T>
{
    private bool _isFull = false;

    private int _size;
    private int _current = 0;

    private BufferItem<T>[] _buffer;

    public CircularBuffer(int size)
    {
        _size = size;
        _buffer = new BufferItem<T>[size];
    }

    public void Insert(T value)
    {
        BufferItem<T> item = new BufferItem<T>(value);
        //Removed code to check if the buffer is full, if so over-write the oldest item
        //and don't insert at the current position
        _buffer[_current] = item;
        _isFull = (_current == (_size - 1));
        _current++;

        //Age all items            
    } 
```

在我增加当前位置并尝试添加另一个项目之前，这一切都很好而且很花哨：

![在此处输入图像描述](../Images/65e45a16018039e10901a32fe5127f91.png)

在这里，我添加了项目`"first"`，并且当前位置 ( `_current`) 增加了。

![在此处输入图像描述](../Images/5f47ff980a39ab65216147f5d50c9687.png)

我添加了该项目，但当前位置被重置为 0。除了声明它、访问它和递增它之外，`"third"`绝对没有其他代码。`_current`世界上到底发生了什么？这是代码`BufferItem<T>`：

```
public class BufferItem<T>
{
    public int Age = 0;
    public T Item;

    public BufferItem(T item)
    {
        Item = item;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:09:14.750

你的类方法很好。您的`_current`变量也可以正常工作。问题出在`CircularBuffer`课堂之外。在实现这一点的某个地方，有问题的 CircularBuffer 对象正在以某种方式重置。

# java - 如何在Java中移动数组中的位置？

> ID：13225683
> 
> 赞同：3
> 
> 时间：2012-11-05T03:51:30.713
> 
> 标签：java, arrays, string, multidimensional-array

**一个简单地移动数组元素的程序。**

两个变量：`userInputVariable`和`blankSpaceVariable`。

我有一个名为 table 的二维数组。定义为`table[userInputVariable + 1][6]`

我以表格格式打印出这个数组，最左边的列由用户在程序开始时输入的任何数字编号。

然后我询问用户他们想在数组中的哪个位置输入空格。这个空白区域就像数组中所有其他信息的分隔符。

例如，如果用户在开头输入 10 `userInputVariable`，然后在空格处输入 5。打印后，数字应如下所示：

1、2、3、4、-、5、6、7、8、9、10。

我的计划是创建一个 for 循环并尝试将数组中的所有数字移回从空格变量开始的位置。

我目前拥有但不起作用的东西：

```
for (int i = blankSpaceVariable; i < table.length - 1; i++) 
{
table[i] = table[i + 1];
}
table[blankSpaceVariable] = "--"; 
```

使用我当前的代码，数字如下所示：

1、2、3、4、6、7、8、9、10

也尝试了几种不同的方式来完成这个，但是我的二维数组中的其他信息没有随着数字移动。所以我认为这种方法可以有望将我的二维数组中的所有信息向下移动，并为空白部分让路。

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:10:08.433

如果要将数字移动到下一个位置，则应从数组的末尾开始。

```
for (int i = table.length - 1; i > blankPosition; i--) {
    table[i] = table[i - 1];
}
table[blankPosition] = 99; 
```

从您的示例中，可能需要从中减去 1 `blankPosition`（您说如果`blankPosition`是 5，则`table[4]`有），但这在进入循环*之前*`--`可能会很好（这是为实际实现格式化数据的问题） .

 *可能重命名`table`也是一个好主意。

* * *

*非常讨厌的*示例实现：

```
public class Arrays {

        public static void main(String[] args) {
                Integer blankPosition = Integer.parseInt(args[0]);
                // Using 99 instead of "--" because of array type
                int[] table = new int[]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 99};
                printEm(table);
                for (int i = table.length - 1; i > blankPosition; i--) {
                        table[i] = table[i - 1];
                }
                table[blankPosition] = 99;
                printEm(table);
        }

        public static void printEm(int[] array) {
                for(int i = 0; i < array.length; i++) {
                        System.out.print(array[i] + " ");
                }
                System.out.println();
        }
} 
```

让我们运行它：

```
$ java Arrays 5
1 2 3 4 5 6 7 8 9 10 99 
1 2 3 4 5 99 6 7 8 9 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:57:49.853

得到它的工作！

由于我使用的是二维数组，因此我不得不运行另一个 for 循环来遍历第二维。所以这是最终的代码。

非常感谢@desert69

```
for (int i = table.length - 1; i > startBlank; i--) 
{
    for (int j = 0; j < table[i].length; j++) 
    {
        table[i][j] = table[i - 1][j];
    }
}
table[startBlank][0] =  "--"; 
```*

# java - 当另一个事情发生时从主线程获取数据？

> ID：13225684
> 
> 赞同：3
> 
> 时间：2012-11-05T03:51:37.177
> 
> 标签：java, multithreading

目前我有一个线程运行一个套接字监听连接。当它接收到一个连接时，它需要上传在主线程中收集的数据（即从主线程中抓取数据）。但是，我传递了对象的一个​​实例，但它从未使用等待连接时收集的数据进行更新。

有没有合适的方法来做到这一点？我用谷歌搜索了一下，似乎找不到具体的答案。

有人能指出我正确的方向吗？

* * *

希望这是有道理的，但我会尝试用一个例子来解释更多。

```
class MainThread {
    private void MainThread() {
        SomeObj obj = new SomeObj("DATA Needed");

        SecondThread second = new SecondThread(obj);
        second.start();
    }
}

class SecondThread extends Thread {
    SomeObj obj;

    public void SecondThread(Object obj) {
    this.obj = obj;
    }
    public void run() {

    //Listening for connection
    //Connection get!
    //Get updated data (Object obj) from main thread.
    //Upload
    }
} 
```

我很感激你能给我的任何帮助。如果我完全错误地接近这个，请告诉我！我宁愿学习并得到答案，而不仅仅是得到答案。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:15:07.307

有一组有限的事件可确保一个线程中的写入在另一个线程中可见。线程创建是其中之一，因此最初写入 obj 的任何数据都应该在第二个线程中可用。

一种选择是在 obj 上同步。如果主线程仅通过调用其同步方法对其进行修改，并且第二个线程从 obj 同步方法获取数据，则主线程写入的数据将在第二个线程中可见。

如果你真的想学习 Java 中的多线程，我推荐[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:29:52.050

扩展我对充满鳗鱼的气垫船的相当神秘的评论：

```
import java.util.concurrent.*; // BlockingQueue

class MainThread {
    private void MainThread() {
        // BlockingQueue is designed to be used primarily for producer-
        // consumer queues, so ALL implementations are thread-safe!
        new UploaderThread(new LinkedBlockingQueue<Data>()).start();
    }
}

class UploaderThread extends Thread {
    private final BlockingQueue<Data> _dataToBeUploaded;
    public SecondThread(BlockingQueue<Data> dataToBeUploaded) {
       _dataToBeUploaded = dataToBeUploaded;
    }
    public void run() {
      while ( true ) {
        // Retrieve the first element in the queue, if necessary waiting 
        // until an element becomes available.
        upload(_dataToBeUploaded.take()); 
      }
    }
} 
```

干杯。基思。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:54:15.117

> 当它接收到一个连接时，它需要上传在主线程中收集的数据（即从主线程中抓取数据）。

这没有意义，因为您没有从*Threads*获取信息，而是获取信息并与*Objects*进行通信。这是一个很大的区别。您需要将需要信息的对象的实例传递给需要此信息的第二个对象，可能作为其构造函数中的参数。然后，您将使用此实例在 SecondThread 类中设置一个字段，您可以在其上调用方法。

IE，

```
class MainThread {
    private void MainThread() {
        SomeType obj = new SomeType("DATA Needed");

        SecondThread second = new SecondThread(obj);
        second.start();
    }
}

class SecondThread extends Thread {
    SomeType obj;

    public SecondThread(SomeType obj) {
       this.obj = obj;
    }
    public void run() {
      // can call methods on obj here
    }
} 
```

希望您实际上并没有使用 Object 类型，而是使用更具体的对象类型，对吧？

# php - 只重定向到页面一次？

> ID：13225690
> 
> 赞同：1
> 
> 时间：2012-11-05T03:53:35.343
> 
> 标签：php, sql, redirect

我有这段 php 代码可以在我的网站上查找帐户提示功能。基本上，如果用户违反了网站上的条款和条件，在登录时他们会被重定向到一个提示页面，上面说你很顽皮，这里有一个警告。

我的代码是这样的：

```
 <?php

$account_prompt = account_prompt();
while ($prompt = mysql_fetch_array($account_prompt)) 

 if ($prompt['account_prompt'] == '1')  {
    redirect_to("prompt.php"); 
 }
 ?> 
```

我的问题是我怎样才能让它只重定向一次？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:55:22.187

除非您陷入无限循环，否则他只会重定向 1ce...

尝试这个

```
if (isset($prompt['account_prompt']) && $prompt['account_prompt'] == '1')  {
    header("Location: prompt.php"); 
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:56:30.810

根据您的条件使用设置为 1 的标志，并将重定向移出循环。

```
 $flag = 0;
           while ($prompt = mysql_fetch_array($account_prompt))  {

                if ($prompt['account_prompt'] == '1') $flag = 1;
            }

            if ($flag == 1)
                  redirect_to("prompt.php"); 
```

# python - 在 Django/Python 中浏览客户端和服务器端文件？

> ID：13225692
> 
> 赞同：0
> 
> 时间：2012-11-05T03:53:40.367
> 
> 标签：python, django

我编写了一个前端 Django/Python 应用程序。它就像一个同步工具。用户可以先浏览源和目的地。源是客户端的计算机，目标是服务器的计算机。界面类似于grsync。我需要在模板（前端应用程序）中实现它。我怎样才能做到这一点？谢谢

**编辑：**

我的 form.html（Django 模板）中有这个

```
<form>
<p>Session Name: <input type="text" name="session"></p>
<p>Source: <input type="text" name="target"><input type="submit" value="Open"></p>
<p>Target: <input type="text" name="target"><input type="submit" value="Open"></p>
<input type="submit" value="Save">
<input type="button" name="Cancel" value="Cancel" onclick="window.location = 'form.html' " />
 </form> 
```

现在，当用户单击源中的打开时，应显示客户端计算机中的文件和文件夹，当用户按 OK 时，应在源字段中加载路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:09:13.330

尝试这个：

```
<form>
    <p>Session Name: <input type="text" name="session"></p>
    <p>Source: <input type="file" name="source"/></p>
    <p>Target: <input type="text" name="target"/></p>
    <input type="submit" value="Save">
    <input type="button" name="Cancel" value="Cancel" onclick="window.location = 'form.html' " />
</form> 
```

您需要`<input type="file">`启动一个文件选择器。但是，如果您要上传到服务器，用户将无法为服务器启动文件选择器，就像他们为自己机器上的文件一样。您必须编写自己的界面来直观地搜索远程文件系统，除非您可以在某处找到它的插件。如果没有文件选择器，输入的文本字段`target`至少应该使用户能够输入他们希望文件名在服务器上的内容。希望能回答问题！

# html - 是否可以使用带有单个 DIV 的 vanilla HTML/CSS 创建两列布局？

> ID：13225698
> 
> 赞同：3
> 
> 时间：2012-11-05T03:54:01.427
> 
> 标签：html, css, wysiwyg, two-column-layout

我希望构建一个由所见即所得编辑器使用的两列布局。示例：[http ://taurean.io/labs/clearcut-theme/essay.html](http://taurean.io/labs/clearcut-theme/essay.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:56:47.307

您可以为此使用 CSS3 **column-count**属性。像下面这样写：

```
div{
    -moz-column-count: 2;
    -moz-column-gap: 10px;
    -webkit-column-count: 2;
    -webkit-column-gap: 10px;
    column-count: 2;
    column-gap: 10px;
} 
```

阅读更多[http://www.quirksmode.org/css/multicolumn.html](http://www.quirksmode.org/css/multicolumn.html)

# c# - c# 文本框失去焦点时将其格式化为货币

> ID：13225702
> 
> 赞同：3
> 
> 时间：2012-11-05T03:54:54.633
> 
> 标签：c#, winforms

我在表单上有几个文本框列表，每个文本框代表数据库的一列。每次用户退出其中一个价格框时，我都想更新表单。此列表的名称是 priceBox[]。我知道 lostFocus 事件，但我似乎无法找到一种方法让它为集合工作，而且这个列表可以增长，所以我不能有一个固定的数字。我还没有任何代码。如果它有助于文本框控件包含在名为 panel1 的面板中。

我已经尝试搜索，但找不到任何关于此的内容。仅适用于单个实例，例如更新 1 个文本框。

抱歉，如果这是重复的，但我确实尝试过搜索。我也是 C# 的新手。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T04:07:01.597

一种方法是将 ControlAdded 处理程序添加到面板，因此每次添加新文本框时，它都会自动为其添加 LostFocus 处理程序。下面一步一步来：

对于您的面板，您绑定了一个处理程序 ControlAdded 事件，类似于：

```
private void Panel1_ControlAdded(object sender, ControlEventArgs e)
{
    var tb = e.Control as TextBox;
    if (tb != null)
    {
        tb.LostFocus += new EventHandler(TextBox_LostFocus);
    }
} 
```

然后在 TextBox_LostFocus 你可以添加任何你想要的逻辑

```
void TextBox_LostFocus(object sender, EventArgs e)
{
    var tb = sender as TextBox;
    if (tb != null)
    {
        // modify tb.Text here, possibly like this...
        tb.Text = String.Format("{0:C}", Decimal.Parse(tb.Text));
    }
} 
```

更新所有现有控件（未测试）

```
foreach (TextBox in panel1.Controls)
{
    tb.LostFocus += new EventHandler(TextBox_LostFocus);
} 
```

# python - Windows 上的 Python 包：pip 还是本机安装程序？

> ID：13225707
> 
> 赞同：3
> 
> 时间：2012-11-05T03:55:27.760
> 
> 标签：python, windows, pip

与使用打包安装程序 (exe/msi) 相比，使用 pip 在 Windows 上安装 python 包的相对优点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:30:03.180

对于初学者来说，有些对我不起作用（MySQLdb 是[罪魁祸首](http://www.google.com/search?hl=en&redir_esc=&client=ms-android-verizon&source=android-browser-type&v=133247963&qsubts=1352089564773&action=devloc&q=mysqldb+python+windows&v=133247963)）。

我的新规则：

1.  尝试`pip`或`easy_install`
2.  如果这不起作用，请浏览此适用于 Windows的[python .msi/.exe 安装程序库。](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

如果两者都不适合您，请在 StackOverflow 上发布问题。你真的没有任何好处来衡量一个或另一个的优点；只需以摩擦最小的方式获得所需的东西，然后继续做更​​有趣的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:16:33.403

本机安装程序主要在包包含需要编译的 C 扩展时使用。由于您必须使用用于构建 Python 本身和正确配置环境的相同编译器，这并不是许多用户认为自己在做的事情。为了避免这些问题，他们选择了本机安装程序。但是，通过直接运行 exe/msi 安装程序进行安装不允许选择在哪个 Python 实例中安装包，因此您无法在 virtualenv 中安装。这似乎是使用本机安装程序的一个主要缺点，但这只是因为许多人不知道可以使用本机安装程序在 virtualenv 中安装这一事实 - 请参阅[我可以将 Python Windows 包安装到 virtualenvs 中吗？](https://stackoverflow.com/questions/3271590/)（不幸的是，在这种情况下你不能使用*pip*因为它不处理安装二进制包）。

总结一下：

1.  如果包没有 C 扩展，请使用*pip*
2.  如果一个包有 C 扩展并且
    1.  你可以找到本机安装程序或二进制鸡蛋使用*easy_install*与本机安装程序/二进制鸡蛋
    2.  您找不到本机安装程序或二进制 egg 使用 pip 编译 C 扩展和安装包

# android - 在 AlertDialog 中显示 ListFragment

> ID：13225708
> 
> 赞同：0
> 
> 时间：2012-11-05T03:55:33.520
> 
> 标签：android, android-alertdialog, android-listfragment

我正在尝试在 AlertDialog 中显示 ListFragment。从活动调用时，ListFragment 会按预期显示，但不会出现在对话框中。

她的警报是：

```
public class ProfileSelectFragment extends DialogFragment {
    private static final String DEBUG_TAG = "ProfileSelectFragment";
    protected int layout = R.layout.profileselect_dialog;
    final Fragment fragment0 = new LoadedProfilesFragment();
    private Button loginButton;
    private Button createProfileButton;
    private Button anonymousButton;

    static ProfileSelectFragment newInstance() {
        ProfileSelectFragment f = new ProfileSelectFragment();
        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        LayoutInflater inflater = ((LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE));
        View customView = inflater.inflate(layout, null, false);

        ...

        Dialog myDialog = new AlertDialog.Builder(getActivity()).setView(customView)
                .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Log.d(DEBUG_TAG, "cancel");
                    }
                }).create();
        final android.support.v4.app.FragmentManager fm = getActivity().getSupportFragmentManager();
        final android.support.v4.app.FragmentTransaction transaction = fm.beginTransaction();
        transaction.replace(R.id.fragment, fragment0);
        transaction.commit();
        return myDialog;
    }
} 
```

这是 AlertDialog 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/fragment"
        android:layout_width="fill_parent"
        android:layout_height="80dip"
        android:background="#33CC33">
    </FrameLayout>
    <Button
        android:id="@+id/button1"
        style="@android:style/Holo.ButtonBar.AlertDialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/showlogin" />
    <Button
        android:id="@+id/button2"
        style="@android:style/Holo.ButtonBar.AlertDialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/createprofile" />
    <Button
        android:id="@+id/button3"
        style="@android:style/Holo.ButtonBar.AlertDialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/anonymous" />
</LinearLayout> 
```

这是 ListFragment：

```
public class LoadedProfilesFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
    private static final String DEBUG_TAG = "LoadedProfilesFragment";
    private static final int LIST_LOADER = R.loader.loadedprofilesfragloader;
    protected int layout = R.layout.log_fragment;
    protected int entryLayout = R.layout.list_item;
    protected final Uri table = ProfileProvider.URI_LOADEDPROFILEVIEW;
    protected SimpleCursorAdapter listAdapter;
    protected String[] uiBindFrom = { ProfilesColumns.USERNAME, ProfilesColumns.CREATIONDATE };
    protected int[] uiBindTo = { R.id.title, R.id.creationdate };
    protected String[] createProjection = { CommonDatabaseHelper._ID, ProfilesColumns.USERNAME,
            ProfilesColumns.CREATIONDATE };

    public LoadedProfilesFragment() {
        super();
    }

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(LIST_LOADER, null, this);
        listAdapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), entryLayout, null, uiBindFrom,
                uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        setListAdapter(listAdapter);
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        final View view = inflater.inflate(layout, container, false);
        return view;
    }

    ...

} 
```

不确定我是否需要以不同的方式调用 ListFragment，因为它是一个 AlertDialog 而不是 Activity。我的计划是应用样式以使警报对话框中的列表片段和按钮显示为连续列表。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T04:01:24.273

使用片段对话框显示列表项。 [如何在 DialogFragment 中显示现有的 ListFragment](https://stackoverflow.com/questions/11342032/how-to-display-an-existing-listfragment-in-a-dialogfragment)。这个链接应该可以帮助你。

# ios - SizetoFit 与 UIViewAutoresizingFlexibleHeight。有什么不同？

> ID：13225710
> 
> 赞同：1
> 
> 时间：2012-11-05T03:56:06.117
> 
> 标签：ios, uitableview

我一直被告知，如果我有一个带有动态文本内容的 UILabel，我应该使用 SizeToFit，因为这样可以正确调整 UILabel。我使用了 sizeToFit 但它弄乱了我滚动后 UITableViewCell 上的文本标签。但是，在初始屏幕加载时，它们看起来不错。

在搞砸了几个小时后，我在某处读到其他人也有同样的问题，他们使用了以下两行而不是 SizeToFit：

```
 cell.message.lineBreakMode = UILineBreakModeWordWrap;
    cell.message.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

它会起作用的。好吧，我做到了，我的 UILabel 很完美。但是我仍然很好奇为什么会这样？

所以现在我的代码看起来像：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MessagesCustomViewCell";
    MessagesCustomViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MessagesCustomViewCell_iPhone" owner:self options:nil];
        cell = [nib objectAtIndex:0];  //you can also loop thru or manually remember positions
    }

    NSArray * discussion = [self.messages objectAtIndex:indexPath.row];

      cell.author.text = [discussion valueForKeyPath:@"author.name"];
      cell.message.text = [discussion valueForKey:@"text"]; //DYNAMIC VARIABLE SIZED TEXT 

    cell.message.lineBreakMode = UILineBreakModeWordWrap;
    cell.message.autoresizingMask = UIViewAutoresizingFlexibleHeight;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:39:04.500

**尺寸适合**

***行为：关心它的内容而不是superview的大小***

发送`sizeToFit`到 UILabel without`[yourLabel setNumberOfLines:0]`将使标签尽可能宽以适合其文本。虽然`[yourLabel setNumberOfLines:0]`你的标签会根据它的宽度将它的文本分成多行，但这会使它的高度尽可能大以适合它的文本，它并不关心它的超级视图的边界。

**autoResizingMask**

***行为：关心超级视图的大小而不是其内容***

如果设置了 UIlabel 的 autoResizingMask，一旦它的超级视图的边界发生变化，它会首先改变它的框架，然后它会检查“我可以在我的矩形中放置更多文本吗？” 基于它的相对属性（numberOfLines，字体，...）。

# python - 返回文本文件路径

> ID：13225711
> 
> 赞同：0
> 
> 时间：2012-11-05T03:56:10.990
> 
> 标签：python, recursion, path

我想返回文件的路径，如果程序找到它，但我希望它继续循环（或递归重复）程序，直到检查所有文件。

```
def findAll(fname, path):
for item in os.listdir(path):
    n = os.path.join(path, item)
    try:
        findAll(n, fname)
    except:
        if item == fname:
            print(os.idontknow(item)) 
```

所以我在调用路径时遇到了麻烦，现在我有

```
os.idontknow(item) 
```

作为占位符

输入是：

```
findAll('fileA.txt', 'testpath') 
```

输出是：

```
['testpat\\fileA.txt', 'testpath\\folder1\\folder11\\fileA.txt','testpath\\folder2\\fileA.txt'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:09:24.190

根据我上面的评论，这是一个示例，它将从当前目录开始并搜索所有子目录，寻找匹配的文件`fname`：

```
import os

# path is your starting point - everything under it will be searched
path = os.getcwd()    
fname = 'file1.txt'
my_files = []

# Start iterating, and anytime we see a file that matches fname,
# add to our list    
for root, dirs, files in os.walk(path):
  for name in files:
    if name == fname:
      # root here is the path to the file
      my_files.append(os.path.join(root, name))

print my_files 
```

或者作为一个函数（更适合你的情况:)）：

```
import os

def findAll(fname, start_dir=os.getcwd()):
  my_files = []
  for root, dirs, files in os.walk(start_dir):
    for name in files:
      if name == fname:
        my_files.append(os.path.join(root, name))
  return my_files

print findAll('file1.txt')
print findAll('file1.txt', '/some/other/starting/directory') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:04:43.097

像这样的东西，也许？

```
import os
path = "path/to/your/dir"
for (path, dirs, files) in os.walk(path):
    print files 
```

# ios - 校准 UIAccelerometer？

> ID：13225713
> 
> 赞同：2
> 
> 时间：2012-11-05T03:56:44.507
> 
> 标签：ios, accelerometer, uiaccelerometer

在我的应用程序中，我使用加速度计来控制游戏中的角色。现在我只允许纵向，因此用户必须向右或向左倾斜设备才能移动角色。到目前为止工作正常。我现在想要完成的是“校准”加速度计以说明用户正在播放的当前倾斜度。假设用户侧身躺着，值会出现偏差，因为它没有考虑到该起点，因此他们将无法控制角色。因此，我试图计算初始倾斜量，然后在游戏期间对其进行计算，但它不起作用。

所以我在非游戏视图中有一个按钮来“校准”加速度计，这是它执行的代码：

*这是在 IBAction*

```
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:1.0f/30.0f];
[[UIAccelerometer sharedAccelerometer] setDelegate:self]; 
```

*这是加速度计委托调用*

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    [[NSUserDefaults standardUserDefaults] setFloat:acceleration.x forKey:@"X-Calibrate"];
    [[UIAccelerometer sharedAccelerometer] setDelegate:nil];
} 
```

然后在我的游戏视图中，我将 iVarcalibrationFloat 设置为我在 NSUserDefaults 中设置的值。然后我也有一个 kFilteringFactor 来摆脱小抖动。所以这是游戏加速度计委托方法，它将rollingX设置为等于一切，然后我根据rollingX移动角色：

```
- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    rollingX = ((acceleration.x - calibrationFloat) * kFilteringFactor) + (rollingX * (1.0 - kFilteringFactor));
} 
```

但是这不起作用，校准似乎没有做任何事情，我不知道为什么。有没有人设置为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:20:54.437

我可以给你一些指点。rollingX 的计算不正确，它会给出超出范围 -1 - +1 的值，您需要一种方法来检测它是否达到了极限并进行适当的调整。同样简单地偏移一个轴也行不通。加速度计在 3D 空间中工作。为了使您的计算正常工作，电话在 z 平面中必须始终为 0。用户将手机旋转到 z 平面越远，设备将在 x 平面上输出的读数越小。加速度计感应重力，因此平面相对于重力是固定的。

为了进行有效的校准，您需要对所有 3 轴应用连续矩阵变换，因为您需要加权偏移（例如，随着 z 的增加，更多地关注 y 而不是 x 等）。

# vim - 语法高亮在 Janus for Vim 中不起作用

> ID：13225722
> 
> 赞同：2
> 
> 时间：2012-11-05T03:58:12.167
> 
> 标签：vim, janus

我正在使用 Linux Mint 13 Maya Cinnamon 64 位。我的 Vim 版本是 7.3，我安装了最新版本的 Janus。

我发现对于任何内容中带有哈希“#”的文件，该文件的语法高亮都不起作用。例如，

```
# test

print "Hello" 
```

在我编辑文件时，“打印”有颜色。但是当我保存并再次打开它时，整个文件失去了语法高亮。

如果我删除了第一行并保存，在我再次打开它后，语法高亮又回来了。

这适用于所有类型的文件，例如 .py、.c 和 .h。如果文件中有井号“#”字符，则语法高亮不起作用。

我已经尝试过“语法”，但没有任何改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:04:59.913

我不认识 Janus，所以这个答案可能对你不是 100% 有用，但让我们看看。您可以尝试找出设置的位置。试试这个：

获取当前设置：

```
:set filetype? syntax? 
```

检查这些设置的位置：

```
:verbose set filetype? syntax? 
```

当您失去语法高亮时执行这些命令：

```
:syntax on
:set ft=python
:verbose set ft? syn? 
```

在这里，您应该看到哪个脚本在保存后更改了您的文件类型。通常，如果文件扩展名不明确，vim 会使用启发式方法来确定正确的文件类型。在这些启发式方法不起作用的情况下，您通常将 vimrc 中的全局变量设置为固定值。在你的情况下，这将是这样的：

```
let g:filetype_py="python" 
```

# java - 如何在java中将多个字符串解析为一个int

> ID：13225724
> 
> 赞同：1
> 
> 时间：2012-11-05T03:58:29.497
> 
> 标签：java, exception, parseint

好的，所以我在编程作业上遇到了很多麻烦。我们将从文本文件中读取信息并使用我们创建的某些方法对其进行格式化。我能够很好地从文本文件的第一行读取信息，但之后我得到一个错误。我的代码如下：

```
String name1 = scan.nextLine();
    String name2 = scan.nextLine();
    scan.close();
    int length = name1.length();
    int count = 0;
    int a = 0;
    int b = 1;
    while(end != true)
    {

        String check = name1.substring(a,b);
        a++;
        b++;
        count++;
        char z = check.charAt(0);
        if(z == '0' || z == '1' || z == '2' || z == '3' || z == '4' || z == '5' || z == '6' || z == '7' || z == '8' || z == '9')
        {
            end = true;

        }
        if(count == length)
        {
            end = true;

        }
    }
    String number1 = name1.substring(count,length);
    int number01 = Integer.parseInt(number1);
    name1=name1.substring(0, count-1);
    int d = name1.indexOf(" ");
    int length1 = name1.length();
    String name1first = name1.substring(0,d);
    name1first = name1first.trim();
    String name1last = name1.substring(d,length1);
    name1last = name1last.trim();

    System.out.println(name1first);
    System.out.println(name1last);
    System.out.println(number01);

    length = name2.length();
   int  countt = 0;
int  aa = 0;
int  bb = 1;
    while(end != true)
    {

        String check = name2.substring(aa,bb);
        aa++;
        bb++;
        countt++;
        char z = check.charAt(0);
        if(z == '0' || z == '1' || z == '2' || z == '3' || z == '4' || z == '5' || z == '6' || z == '7' || z == '8' || z == '9')
        {
            end = true;

        }
        if(countt == length)
        {
            end = true;

        }
    }
    String number2 = name2.substring(countt,length);
    int number02 = Integer.parseInt(number2);
    name2=name2.substring(0, countt-1);
    d = name2.indexOf(" ");
    int length2 = name2.length();
    String name2first = name2.substring(0,d);
    name2first = name2first.trim();
    String name2last = name2.substring(d,length2);
    name2last = name2last.trim();

    System.out.println(name2first);
    System.out.println(name2last);
    System.out.println(number02); 
```

我得到这个错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "Jennifer Sutter 52114"
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at Salary.main(Salary.java:101) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:01:25.103

这很明显为什么你会得到这个例外：

您正在尝试将“Jennifer Sutter 52114”转换为整数。

`try{}catch()`解决方案是在尝试调用时首先使用块`Integer.parseInt()`。

我认为您正在尝试获取最后一位字符串并将其转换为整数：并且由于您正在使用它，因此`Scanner`您可以`nextInt()`像这样：

`new Scanner(theStringWhichMightHaveANumber).nextInt();`

# php - 用于在 Struts 中使用类似 Java Action 的 PHP 类？

> ID：13225725
> 
> 赞同：1
> 
> 时间：2012-11-05T03:58:31.400
> 
> 标签：php

我是 9 到 6 岁的 Java 程序员，但在业余时间我对 PHP 的项目很少。只是想知道你们对使用这个类有什么看法以及我可能有什么安全考虑

```
class Action{

    var $func;
    var $param;

    function Action(){

        $url_keys = array_keys($_GET);
        $this->func = $url_keys[0];
        $this->param = $_GET[$this->func];
    }

    function callFunction(){
        $f = $this->func;
        $f( $this->param );
    }
}

$ajax = new Action();
$ajax-> callFunction(); 
```

我正在考虑使用这个包括或扩展另一个类。

```
http://localhost/proyect/object.php?update=1

include_once("class.Action.php");

function update($id){
 //the function
} 
```

作为记录，我不想使用一个框架，这个框架太小了：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:11:54.227

首先，您应该使用具有可见性关键字和其他一些东西的 php5：

```
class Action {

    protected $func;
    protected $param;

    public function __construct($params = array()){

        $url_keys = array_keys($params);
        $this->func = $url_keys[0] . "Action"; // so use can not call function without surfix "Action" in this class
        $this->param = $params[$this->func];
    }

    public function callFunction(){
        $f = $this->func;
        return $f( $this->param );
    }
} 
```

您应该始终传入`$_GET`IMO，因此您的实例化现在看起来像这样：

```
$action = new Action($_GET);
$action->callFunction(); 
```

现在，就您在这里要完成的工作而言，尚不清楚。如果您试图从本质上构建一个路由类，我认为这很丑陋并且容易出错。

关于您因为项目简单/小而不想使用框架的评论，敦促您查看 [Silex](http://silex.sensiolabs.org/)或[Slim](http://www.slimframework.com/)微框架，而不是从头开始构建。

以 Silex 为例：

```
$app = new Silex\Application(); 

$app->get('/object/update/{id}', function($id) use($app) { 
    // do your update with $id
    // then return a response

    return 'Update Complete';
    // basically you return whatever response you want so normally youd return html. 
}); 

$app->run(); 
```

# php - 我需要我的 PHP 页面来显示来自 mysql 数据库的 BLOB 图像

> ID：13225726
> 
> 赞同：14
> 
> 时间：2012-11-05T03:58:47.207
> 
> 标签：php, mysql, image, blob, mime

所以我的最后一个问题是如何从搜索中显示我的 techID：

[我试图让我的“详细信息”页面引用通过 techID 链接的服务器的两个单独部分](https://stackoverflow.com/questions/13216866/i-am-trying-to-have-my-details-page-to-reference-two-seperate-parts-of-my-serv)

我的新问题仍在此页面上。我也添加了回声图像。`Blob`但是在使用和让它显示我的图像而不是二进制 JPEG 数据时遇到问题。我一直在尝试找到另一个实例，但找不到任何可以解决我的错误的实例。

```
//Header ('Content-type: image/jpeg')
echo "<dt><strong>Technician Image:</strong></dt><dd>" . '<img src='.$row2['image'].' width="290" height="290">' . "</dd>"; 
```

和

```
$query_Recordset2 = "SELECT * FROM technician WHERE techID=" . $row1["techID"] ;
$Rs2 = mysql_query($query_Recordset2) or die(mysql_error()); 
```

到目前为止，我对上一个问题所做的唯一更改是（显然包括我得到的有效修复）。

我不明白的是在哪里以及如何让`'Content-type: image/jpeg'`我的页面识别正在链接的图像是它的 MIME TYPE `image/jpeg`。

我在我的页面上看到的是这个

> 技术员图片：“E��j��i`=7f$D��o”��������b���Ckkc��R��^M�;n~��0&m)J�� R��E)JDR��E)JDR��E)JDR��E)JDR��E)JDR��E)JDSjR��)��+��N��.R,u��� �i��n9,����QX~ ����{(����̮�:����2�12��"��aV7�6���{���LP[�W� �������R$+���LMc'hM�5�o�PA����|���������.8��E��ģ��Rn��1�[� ��{��3>�rY��X�ۜ; *��* Ǖ����u���z��'�vf��N葟��z�Q�����k��3��� O�������?S�<em>��,N�����[{+D���;�'�$�$�&�iJR��)JR��)JR� �)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)�� width="290" height="290" >

显然我已经删除了一个中间块，所以它不是很大。有一个小的“损坏的图像”框出现在前面，当我右键单击并选择“在新窗口中打开图像”时，它输入的 URL 很简单`Content-type:`，或者我得到一个带有 url 的禁止访问页面`http:// localhost/Sim5Server/Pages/%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%10JFIF%EF%BF%BD%01%02%EF%BF%BD%EF%BF%BDd%EF%BF%BDd%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BDC%EF%BF%BD`

我在该网址中放置了一个空格，因为它不是互联网链接。

我只使用了普通的 BLOB 类型，因为我只需要它作为小于 64Kb 的小图像

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-05T04:05:01.797

在您当前的情况下，您有两个前期选择。

第一个，如果你有很多这样的图像，我不推荐的一个是使用内联 base64 编码。这是通过以下方式完成的：

```
<img src="data:image/jpeg;base64,<?php echo base64_encode($image); ?>" /> 
```

使用现有代码的复制/粘贴版本：

```
echo '<dt><strong>Technician Image:</strong></dt><dd>'
     . '<img src="data:image/jpeg;base64,' . base64_encode($row2['image']) . '" width="290" height="290">'
     . '</dd>'; 
```

第二种方法是创建一个“图像”PHP 文件，该文件将数据库中图像的 ID 作为查询字符串参数并输出图像。因此，您的 HTML 将类似于：

```
<img src="image.php?id=<?php echo $image_id; ?>" /> 
```

您的 PHP 页面看起来类似于：

```
<?php
$id = (isset($_GET['id']) && is_numeric($_GET['id'])) ? intval($_GET['id']) : 0;
$image = getImageFromDatabase($id); // your code to fetch the image

header('Content-Type: image/jpeg');
echo $image;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T04:04:33.617

您可以从与文档相同的页面输出图像的唯一方法是使用[data uri](http://en.wikipedia.org/wiki/Data_URI_scheme)。

```
echo "<dt><strong>Technician Image:</strong></dt><dd>" . 
     '<img src="data:image/jpeg;base64,'.
      base64_encode($row2['image']).
      '" width="290" height="290">' . "</dd>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-02T15:39:53.433

正确的代码应如下所示。您必须使用 stream_get_contents() 将资源 id 更改为字符串。

```
<img src="data:image/jpeg;base64,<?php echo base64_encode(stream_get_contents($row2['image'])); ?>" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T04:06:38.080

我认为最好的解决方案是将图像的路径存储在数据库中，而不是将整个图像存储为 BLOB。然后为了在网页上显示图像，将 img 标签的 src 属性设置为存储在数据库中的路径。

# java - 将用户上传的文件存储在网络服务器中

> ID：13225730
> 
> 赞同：0
> 
> 时间：2012-11-05T03:59:24.700
> 
> 标签：java, mysql, jakarta-ee, tomcat

我们目前正在开发一个网络应用程序，允许用户上传他们的音频文件（任何音频文件、mp3、wav、ogg 等）。

我的问题是，有些音频文件对于数据库来说不够大，这不是一个好习惯，我的问题是我应该将这些音频文件放在哪里？我应该将它们放在网络服务器中的文件夹中，还是有任何替代方法，例如用于 java 的文件存储？因为把这些文件放到数据库里是不够的。我在想我只是将文件放在数据库的文件路径中。我们目前使用的是tomcat服务器，和mysql数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:31:46.223

如果您打算将文件存储在 Web 服务器本身中，那么如果您有多个 Web 服务器，则可能会导致问题。因此，如果您想按原样存储文件，请创建一个远程挂载并使用 nfs 将其挂载到具有相同路径的所有服务器中。例如：将远程存储安装在所有服务器的 /mnt/audio_mount 中，以便您可以从所有服务器访问它。

# orm - SQLAlchemy：提交后访问Model.id时出现ObjectDeletedError，为什么？

> ID：13225735
> 
> 赞同：3
> 
> 时间：2012-11-05T04:00:42.380
> 
> 标签：orm, sqlalchemy

它有时会发生在我的产品环境中（大多数时候都可以）。我怀疑它是否与 sessionmaker func 中的参数'expire_on_commit'有关

```
@close_session
def func():
    session = DBSession() # scoped_session, thread_local
    m = Model()
    m.content = 'content'
    session.add(m)
    try:
        session.commit()
    except SQLAlchemyError as e:
        session.rollback()
        raise_my_exception()
    return m.id 
```

close_session 是一个装饰器，它将在“finally”部分执行“DBSession().close()”。ObjectDeleteError 发生在**“return m.id”行**

SQLAlchemy 配置：

```
engines = {                                                                        
    'master': create_engine(                                                       
        settings.MASTER_URL, echo=settings.ECHO_SQL, pool_recycle=3600),           
    'slave': create_engine(                                                        
        settings.SLAVE_URL, echo=settings.ECHO_SQL, pool_recycle=3600),            
}                                                                                  

class RoutingSession(Session):                                                     
    def get_bind(self, mapper=None, clause=None):                                  
        #return engines['master']                                                  
        if self._flushing:                                                         
            return engines['master']                                               
        else:                                                                      
            return engines['slave']                                                

DBSession = scoped_session(sessionmaker(class_=RoutingSession)) 
```

ObjectDeletedError 文档：

```
class ObjectDeletedError(sqlalchemy.exc.InvalidRequestError)
 |  A refresh operation failed to retrieve the database
 |  row corresponding to an object's known primary key identity.
 | 
 |  A refresh operation proceeds when an expired attribute is
 |  accessed on an object, or when :meth:`.Query.get` is
 |  used to retrieve an object which is, upon retrieval, detected
 |  as expired.   A SELECT is emitted for the target row
 |  based on primary key; if no row is returned, this
 |  exception is raised.
 | 
 |  The true meaning of this exception is simply that
 |  no row exists for the primary key identifier associated
 |  with a persistent object.   The row may have been
 |  deleted, or in some cases the primary key updated
 |  to a new value, outside of the ORM's management of the target
 |  object.
 | 
```

* * *

编辑：我在“session.commit()”之后放置了“return m.id”，仍然引发了 ObjectDeletedEror

```
@close_session
def func():
    session = DBSession() # scoped_session, thread_local
    m = Model()
    m.content = 'content'
    session.add(m)
    try:
        session.commit()
        return m.id
    except SQLAlchemyError as e:
        session.rollback()
        raise_my_exception() 
```

* * *

编辑2：

我更改了我的 RoutingSession 以仅返回 master 并且错误消失了：

```
class RoutingSession(Session):                                                     
    def get_bind(self, mapper=None, clause=None):                                  
        return engines['master'] 
```

所以它必须与这个主/从配置有关。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-20T03:51:42.447

DBSession 是使用默认值创建的 (expire_on_commit = True)。所以提交后，当返回obj.id时，obj已经过期。所以session会从slave数据库（engines['slave']）获取obj，但是由于主从延迟，对应的记录还没有同步到slave。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T22:14:17.110

此错误意味着以下两种情况之一：

1.  raise_my_exception() 实际上并没有引发异常，因此在 rollback() 期间代码落入“return m.id”并且该行不存在，因为它已回滚。

2.  在您说 session.commit() 和“return m.id”之间，一个并发线程或进程正在删除该行。提交后数据从“m”过期，以便下一次访问将从数据库中检索此对象的最新数据，并将其放入新事务中。这与您“有时（大多数时候没问题）”的描述一致。- 偶尔发生的问题通常是由于并发问题。

# google-apps-script - 谷歌脚本在删除电子表格中的一行时抛出错误

> ID：13225743
> 
> 赞同：0
> 
> 时间：2012-11-05T04:01:35.540
> 
> 标签：google-apps-script, google-sheets

这是我第一天搞乱谷歌脚本，所以请原谅我的限制。

我试图编写一个函数，删除表单电子表格中的所有行，同时留下标题行。

为什么会这样：

```
 // Loop through the data in the range and delete the rows
if (data.length > 1) {
  for (var row = 1; row < data.length; row++) {
    ws.deleteRow(row+1);
    }
    ws.deleteRow(2); 

 } 
```

而以下：

```
if (data.length > 1) {
  for (var row = 1; row < data.length; row++) {
    ws.deleteRow(row+1);
    }

  } 
```

将第 2 行留在后面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:36:28.490

因为行索引是基于 1 的（即从 1 开始），所以您需要像这样更改您的 for 循环：

```
for (var row = 1; row <= data.length; row++) { 
```

假设您有 2 行，当您在循环中点击第二行时（即 row = 2 时）， 的值`row`将不小于`data.length`（即`2`）；它将*等于*`data.length`。_ 因此，使用`<`，测试将失败，并且循环中的代码将不会第二次执行。`<=`它将通过并且代码将根据需要执行。

这种相同的模式当然会发生在任意数量的行上。

编辑：其他一些问题：

因为移除将立即发生，所以行将在移除后全部移动并且编号不同。这可以通过几种方式处理，但这里有一个：将删除更改为从头开始并向后工作。所以，现在我们有：

```
for (var row = data.length; row >= 1; row--) { 
```

此外，如果您只是想跳过第一行作为标题行，而不是更改使用的索引（例如，`row + 1`），只需更改开始/停止循环的位置。这更简单，更容易理解。因此，循环变为：

```
 for (var row = data.length; row >= 2; row--) {
    ws.deleteRow(row);
 } 
```

# svn - 自动化乌龟SVN

> ID：13225752
> 
> 赞同：1
> 
> 时间：2012-11-05T04:03:14.893
> 
> 标签：svn, automation, tortoisesvn

我想自动将现有存储库的工作副本签出到所需位置。我在 Windows 7 上使用 Tortoise SVN，我将无法使用任何其他形式的 SVN [，](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-automation.html)因为我没有管理员权限和整个部门都在使用 Tortoise SVN。我知道我可以使用命令来打开 GUI，但是是否可以与这些 GUI 交互，或者甚至更好地创建一个不一定需要 GUI 的命令

TortoiseProc.exe/command:checkout /url:[source] /path:[destination] - 打开 checkout GUI，如何从命令行“按”OK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:43:15.940

> 是否可以与这些 GUI 交互，或者甚至更好地创建一个不一定需要 GUI 的命令

从“自动化 TortoiseSVN”页面

> 请记住，TortoiseSVN 是一个 GUI 客户端，本自动化指南向您展示了如何使 TortoiseSVN 对话框出现以收集用户输入。**如果你想编写一个不需要输入的脚本，你应该使用官方的 Subversion 命令行客户端**。

所以答案是：“使用 SVN CLI，它是 TSVN 1.7 中 TortoiseSVN 安装的一部分”并使用

`svn co URL PATH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:55:57.280

在这里您可以下载适用于 Windows 的 Subversion 命令行工具：

[http://sourceforge.net/projects/win32svn/files/](http://sourceforge.net/projects/win32svn/files/)

选择一个 zip 包，因此您应该能够在没有管理员权限的情况下安装/解压它。

`svn checkout`[记录在这里](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.checkout.html)或通过`svn help checkout`命令行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T08:34:22.970

我认为人们需要知道这些命令，这些命令将有助于自动化与 svn 相关的任何事情。我在创建自动化框架时广泛使用了 svn。

访问此链接以获得完整的想法

[http://thebongtraveller.blogspot.com/2016/01/svn-commands-you-must-know-test.html](http://thebongtraveller.blogspot.com/2016/01/svn-commands-you-must-know-test.html)

# python - 将键列表和值列表转换为字典

> ID：13225755
> 
> 赞同：9
> 
> 时间：2012-11-05T04:03:43.927
> 
> 标签：python, dictionary

我有这些清单：

```
list1 = ["a","b","c"]
list2 = ["1","2","3"] 
```

我需要将它们添加到字典中，其中 list1 是键，list2 是值。

我写了这段代码：

```
d = {}
for i in list1:
    for j in list2:
        d[i] = j
print d 
```

输出是这样的：

```
{'a':'3','b':'3','c':'3'} 
```

这段代码有什么问题？我怎样才能写它所以输出是

```
{'a':'1','b':'2','c':'3'} 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T04:09:24.083

压缩列表并使用字典理解：

```
{i: j for i, j in zip(a, b)} 
```

或者，更简单，只需使用`dict()`：

```
dict(zip(a, b)) 
```

你应该保持简单，所以最后一个解决方案是最好的，但我保留了 dict理解示例来展示它是如何完成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T04:05:59.693

你快到了，除了你需要同时遍历列表

```
In [1]: list1 = ["a","b","c"]

In [2]: list2 = ["1","2","3"]

In [3]: d = {}

In [4]: for i, j in zip(list1, list2):
   ...:     d[i] = j
   ...:

In [5]: print d
{'a': '1', 'c': '3', 'b': '2'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:09:30.063

您还可以使用[dict 理解](http://www.python.org/dev/peps/pep-0274/)在一个不错的单行中执行以下操作。

```
d = {i : j for i, j in zip(list1, list2)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T04:09:44.500

```
list1 = ["a","b","c"]                                                  
list2 = ["1","2","3"]                                                                                                                        
mydict = {}                                                            
for i,j in zip(list1,list2):                                           
   mydict[i] = j                                                      
print mydict 
```

# c++ - C++ Qt - QTcpSocket - 找不到文件

> ID：13225756
> 
> 赞同：9
> 
> 时间：2012-11-05T04:03:52.577
> 
> 标签：c++, qt, qtcpsocket

我正在使用`Qt`并`QTcpSocket`创建一个小型聊天客户端/服务器应用程序。

当我编译我的代码时，编译器返回以下错误：

```
main.cpp:3:22: fatal error: QTcpSocket: No such file or directory 
```

这是指`#include <QTcpSocket>`.

这个库在哪里，我该如何安装它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T04:09:04.267

你需要

```
QT += network 
```

在您的 .pro 文件中。否则，将不会加载定义这些标头/构建库的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-08T08:19:31.853

当我遇到问题并且文档和马特菲利普斯提出的明显解决方案似乎不起作用时，我会添加检查**所有**潜在子项目的所有 .pro 文件。

就我而言，addind`QT *= network`在主 .pro 中不起作用，必须放在实际使用 QTcpSocket 和 QTcpServer 对象的那个中。

# assembly - 局部变量 IA32 使用 scanf 汇编

> ID：13225759
> 
> 赞同：1
> 
> 时间：2012-11-05T04:04:52.563
> 
> 标签：assembly

由于某种原因，我在弄清楚这一点时遇到了一个小问题。必须将小型 C 程序转换为汇编。基本上一个小的输入主要是从用户那里获取数组大小的值，从用户那里获取数组的元素，然后调用快速排序..

我的问题是以下代码：

```
pushl    %ebp
movl     %esp, %ebp
pushl    %esi
pushl    %edi
/*allocate i, n to stack */
subl     $8, %esp
/* n is at -12(%ebp), i is at -16(%ebp) */
pushl    $string1
call     printf   #printf("enter size of array: ")
addl     $4, %esp
leal     -12(%ebp),%esi
pushl    %esi
pushl    $format
call     scanf    #scanf("%d", n)
addl     $8, %esp
pushl    %esi
pushl    $string2
call     printf
addl     $8, %esp 
```

我知道 scanf 需要它要存储的地址，我的问题是当我再次调用 printf 时，

```
printf("enter %d variables" ,n) 
```

它打印 %esi 的地址。我需要它来显示实际变量（显然），并且我需要能够使用该变量作为 for 循环的限制来获取数组中的变量，但它一直在我身上出现段错误，这是由于它使用地址而不是实际变量。

其余的我都很好，我只是出于某种原因无法解决这个问题。

# ios - UIbutton标题上的自定义字体夹在单词的顶部

> ID：13225761
> 
> 赞同：22
> 
> 时间：2012-11-05T04:05:17.140
> 
> 标签：ios, objective-c, uibutton

我已经上传了一个自定义字体，并使用以下代码将此字体应用于 UIbutton 的标题

```
videoButton.titleLabel.font = [UIFont fontWithName:@"LaurenScript" size:20]; 
```

问题是标题被夹在第一个字母的顶部（见下图）。我在 UIlabel 上尝试了相同的字体，它工作正常，所以字体没有问题。我还尝试使用更改 rectFrame

```
[videoButton.titleLabel setFrame:CGRectMake(0, 0, 300, 600)]; 
```

但这并没有做任何事情。有人知道我如何解决这个问题吗？干杯

![在此处输入图像描述](../Images/69a0c9c712f28f543b30629dcef2466e.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-01-22T10:11:39.607

我有一个类似的问题，分音符在标题标签上被切断了。我创建了一个 UIButton 子类并使用此代码来解决问题：

```
-(void)layoutSubviews
{
    [super layoutSubviews];

    CGRect frame = self.titleLabel.frame;
    frame.size.height = self.bounds.size.height;
    frame.origin.y = self.titleEdgeInsets.top;
    self.titleLabel.frame = frame;
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-02-03T12:01:26.313

在界面生成器中选择按钮并检查在控制部分中设置垂直对齐面板下面是示例：

[![在此处输入图像描述](../Images/aa6b6589f7f4d0156be81308c67a1a91.png)](https://i.stack.imgur.com/heKl3.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-13T16:07:41.490

不确定这对任何人来说是否仍然是一个问题，但我发现（使用自定义字体）上述解决方案并没有最终解决问题，特别是对于`UIButton`仅以编程方式创建的自定义。

以下是我设法解决此问题的方法，特别是 1 行解决了剪辑问题：

```
UIButton *button = [[UIButton alloc] init];
button = [UIButton buttonWithType:UIButtonTypeCustom];

[button setTitle:@"Nice!" forState:UIControlStateNormal];
[button setFont:[UIFont fontWithName:<CUSTOM FONT NAME> size:buttonWidth/3.0f]];
button = CGRectMake(0, 0, <WIDTH>, <HEIGHT>); 
```

这是解决剪辑的行：

```
[button setContentVerticalAlignment:UIControlContentVerticalAlignmentFill]; 
```

希望这可以帮助其他仍然被卡住的人。快乐编码！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-26T19:00:33.743

我在 swift 2.1 中尝试了这个，我从[Antoine](https://stackoverflow.com/users/1485701/antoine)的答案中改编了这段代码。这可能不是好的代码，但它现在解决了我的问题。你应该为自己做得更好。

```
import UIKit

class CustomUIButton: UIButton {

    override func layoutSubviews() {
        if var titleFrame : CGRect = titleLabel?.frame{

            titleFrame.size = self.bounds.size
            titleFrame.origin = CGPointZero
            self.titleLabel!.frame = titleFrame
            self.titleLabel!.textAlignment = .Center
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-29T20:14:01.303

使用带有自定义字体的图像和文本的按钮时遇到同样的问题。一切都必须垂直居中对齐。并且图像没有被拉伸。这对我来说很好。

```
btn.contentVerticalAlignment = .fill
btn.contentMode = .center
btn.imageView?.contentMode = .scaleAspectFit 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-05T19:28:20.740

有这个（悲伤的）解决方案：[https ://stackoverflow.com/a/10200908/352628](https://stackoverflow.com/a/10200908/352628)

我有一个类似的问题。似乎 titleLabel 非常不可控，要获得控制，您需要将 UILabel 子视图注入按钮...这让我很难过 :(

# ruby - 将带有空格的值传递给 Ruby 脚本

> ID：13225762
> 
> 赞同：3
> 
> 时间：2012-11-05T04:05:24.333
> 
> 标签：ruby

我已经开始在 Ruby 中使用选项解析器来取得普遍的成功。不幸的是，ruby-docs 对我想做的事情并不是特别有帮助。是否可以将多个值传递给一个参数，或者将一个参数定义为一个数组并将多个值传递给它？

```
require 'optparse'

@user_name = nil

opts = OptionParser.new
opts.on("-n name", "--name name", "Name Input"){|n|
@user_name = n
}
opts.parse!(ARGV)

if @user_name.nil? == false
  puts @user_name
else
  puts "Nil Value"
end 
```

现在如果你运行这个：

```
ruby nametest.rb -n John Doe 
```

你会得到：

```
John 
```

我希望在屏幕上同时打印名字和姓氏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T04:10:07.817

这不是 ruby​​ 问题，而是大多数命令行解析器的工作方式。空格分隔标记，因此您需要使用引号或转义空格字符进行分组。

```
ruby nametest.rb -n "John Doe"
# or
ruby nametest.rb -n John\ Doe 
```

# android - 我的 android 应用同步 chrome pc 书签有 Api 吗？

> ID：13225763
> 
> 赞同：1
> 
> 时间：2012-11-05T04:05:25.867
> 
> 标签：android, google-chrome, sync

我想将 chrome pc 书签同步到我的 Android 应用程序。我怎样才能找到一个谷歌官方 chrome api(java) 来在 pc 中同步我的 chrome 书签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:08:10.133

很抱歉简短的回答，但......没有一个。我们不会将该功能暴露给第三方集成。

# ios - DatePicker 包括年份

> ID：13225767
> 
> 赞同：8
> 
> 时间：2012-11-05T04:05:59.223
> 
> 标签：ios, uidatepicker

我在我的应用程序中实现了 dataPicker。但它只显示月、日、小时。我怎么能在日期选择器中添加年份。任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T04:12:37.027

```
datePicker.datePickerMode = UIDatePickerModeDate; 
```

> **UIDatePickerModeDate**
> 
> 日期选择器显示月份、月份中的日期和年份。这些项目的确切顺序取决于区域设置。这种模式的一个例子是 [ 十一月 | 15 | 2007 年]。
> 
> ```
> Available in iOS 2.0 and later.
> 
> Declared in UIDatePicker.h. 
> ```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)

您也可以从情节提要设置模式更改：（**请参阅屏幕截图）**

[![在此处输入图像描述](../Images/330aac011edc2c93f48c2ec64e5ea53c.png)](https://i.stack.imgur.com/orXJ0.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-22T19:43:38.440

如果要添加月份、日期、年份**和**时间，请添加一个仅使用 (UIDatePickerModeDate) 实现日期的选择器和一个用于时间的附加选择器 (UIDatePickerModeTime)。

# grails - grails - 为什么建议将 CRUD 代码放在服务中而不是控制器本身中？

> ID：13225770
> 
> 赞同：0
> 
> 时间：2012-11-05T04:06:00.297
> 
> 标签：grails, service

为什么建议将 CRUD 代码放在服务中而不是控制器本身中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:28:24.217

除了 soc、可重用性、可测试性等，我还可以看到以下更多技术原因：

默认情况下，Grails 服务中的每个方法都隐式地（或显式地用`@Transactional`，参见 [0]）包装在事务中。每当发生（未经检查的！）异常时，Spring 会自动回滚事务。

由于 CRUD 代码经常修改由多个域对象组成的聚合，因此建议（除了获得可重用性等）将此代码移动到“事务脚本”[1] 服务方法中，让 Grails/Spring 管理事务处理。

[0] [http://grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html)

[1] [http://martinfowler.com/eaaCatalog/transactionScript.html](http://martinfowler.com/eaaCatalog/transactionScript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:16:49.117

如果您的“CRUD 代码”表示应用程序逻辑。

Grails 鼓励在服务中编写应用程序逻辑，因为
1\. 关注点分离
2\. 可重用

# css - 忽略某些类型选择器上的 CSS 样式

> ID：13225771
> 
> 赞同：0
> 
> 时间：2012-11-05T04:06:03.133
> 
> 标签：css, css-selectors

假设我有 2 个站点，[http://1.example.com](http://1.example.com)，[http://2.example.com](http://2.example.com)。

我的问题是：我要动态地将内容添加到 1.example.com 和 2.example.com，作为此动态内容添加的一部分，我需要通过 javascript 下载和应用 css 文件。`<hr>`现在我想要设置样式的动态内容中有一个标签。当我在 1.example.com 上应用它时，一切正常，但是当我尝试将它应用到 2.example.com 时，问题是 2.example.com 有一个样式表，它已经为`<hr>`标签定义了样式规则。就像说填充一样。我不想手动覆盖属性。有没有办法忽略`<hr>`2.example.com 中为我的动态内容定义的样式，只应用我下载的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:21:15.080

更加详细一些。了解[CSS 特性](http://css-tricks.com/specifics-on-css-specificity/)以覆盖样式。

例如，您可以为该`<hr>`样式添加一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:18:30.460

像这样试试

您可能会在动态内容中找到父 div，例如：.parent-div hr{ your styles }

# visual-c++ - 程序在 wglmakecurrent 崩溃

> ID：13225781
> 
> 赞同：0
> 
> 时间：2012-11-05T04:07:41.003
> 
> 标签：visual-c++, opengl, mfc

我在 Visual Studio 2008 的 MFC 应用程序中使用 opengl。我的项目在 wglmakecurrent 崩溃时说：

> 访问冲突读取位置

这仅在特定情况下发生，因此这可能不是驱动程序问题。而且我还检查了另一台发生相同错误的机器。

错误发生在以下函数中的 wglMakeCurrent(m_hDC,m_hRC) 处：

> void CCETIGLView::Convert2D(CPoint win, GLdouble * objx, GLdouble * objy, GLdouble * objz) { if((m_hDC) && (m_hRC)) {
> 
> wglMakeCurrent(m_hDC,m_hRC); }

参数有以下类型：

> HGLRC m_hRC；
> 
> 硬盘驱动器 m_hDC;

它们是从作为 cview 的子类的 glview 类获得的。

当我检查 wglMakeCurrent 函数时，它为 GetLastError() 返回 0。当呈现某个选项并且其他选项正常工作时会发生这种情况。

我使用的是单线程，因此多线程问题也不算在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:10:27.113

本次测试

> 如果（（m_hDC）&&（m_hRC））

只有在创建类时确保 m_hDC 和 m_hRC 被初始化为 0 时才有意义，这样人们才能真正知道它们已被初始化。可能您没有这样做，因此这些变量包含非零垃圾，因此被误解为使用有效句柄进行初始化。

向构造函数添加常量初始化

```
CCETIGLView::CCETIGLView() :
    m_hDC(0), m_hRC(0)
{
    // ... 
```

# asp.net - asp.net C# 变量作为 Image1.ImageUrl 属性

> ID：13225782
> 
> 赞同：1
> 
> 时间：2012-11-05T04:07:41.847
> 
> 标签：asp.net, variables

我想单击“buttonImage1”并将“photos/Image1.jpg”存储到一个名为 Photo 的变量中。然后有`ButtonImage2.ImageUrl = (Photo)`。

我正在使用`UpdatePanel`用图像刷新该区域，因此唯一的问题实际上是正确设置变量然后正确使用它。

改写：如何将图像的路径存储在变量中，然后将其正确设置为图像的 URL 路径？

```
protected void Button2_Click(object sender, ImageClickEventArgs e)
{
    Evt = ("~/events/ev2.jpg");
}   

protected void Image2_Click(object sender, ImageClickEventArgs e)
{
    Image1.ImageUrl = (Evt);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:57:49.080

用于**`Server.MapPath`**设置图片路径

```
Image1.ImageUrl = Server.MapPath(Evt); 
```

# string - 替换c字符串中的单词

> ID：13225784
> 
> 赞同：0
> 
> 时间：2012-11-05T04:07:54.913
> 
> 标签：string

我的代码在这里有一点问题。我只是做了一个小程序来测试我的实际程序。这个想法是用添加变量中的字符串替换所有“(star)here(star)”。但是，当我运行程序时，我的最终答案并不完全正确。这些是我的结果：I_have_a_star_which is super pretty

I_have_a_star_这是超级漂亮。_That_is_great！_I_also_have_a_girlfriend这是超级漂亮

I_have_a_star_ 超级漂亮。_That_is_great！_I_also_have_a_girlfriend 超级漂亮！

任何关于问题可能是什么的想法都将不胜感激。

```
#include<iostream>
#include<string>
#include<string.h>
using namespace std;

int main ( ) 
{
  char array[500] = "I_have_a_star_*here*._That_is_great!_I_also_have_a_girlfriend_*here*!",
  temp[500],
  add[500] = "which is super pretty";
  int i=0, j=0;

  while(array[i] != '\0')
  {
    if(array[i] != '*')
    {
      temp[j]=array[i];
      i++;
      j++;
    }
    else
    {
      strcat(temp,add);
      cout << temp << endl;
      i+=6;
      j+=strlen(add);
    }
  }

  cout << temp << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:22:38.430

问题是您将字符复制到`temp`数组中而没有对其进行初始化或 NUL 终止它。因此，当您调用`strcat`或尝试打印内容时`temp`多余的垃圾内容可能会搞砸。坚持`memset(temp, 0, sizeof(temp));` 在您的`while`循环之前或将声明更改为`temp[500] = ""`. 或者，您可以`temp[j] = '\0';`在调用 to 之前`strcat`和之后添加 then 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:27:18.643

老哥试试这个...

```
#include<iostream>
#include<string>
#include<string.h>
using namespace std;

int main ( ) 
{
  char array[500] = "I_have_a_star_*here*._That_is_great!_I_also_have_a_girlfriend_*here*!",
  temp[500],
  add[500] = "which is super pretty";
  int i=0, j=0;

while(array[i] != '\0')
{
  if(array[i] != '*')
  {
    temp[j]=array[i];
    i++;
    j++;
}
else
{
  strcat(temp,add);
  i+=6;
  j+=strlen(add);
 }
}

cout << temp << endl;

return 0;
} 
```

# c# - 将多个参数从 url 传递到 html.actionlink

> ID：13225786
> 
> 赞同：6
> 
> 时间：2012-11-05T04:08:08.680
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-mvc-routing

我对 MVC 相当陌生，当我尝试通过 URL 传递多个参数时，我正在努力解决路由问题。

从带有 URL 的页面：`/PersonCAFDetail/Index/3?memberid=4`

...我正在尝试将 Html.ActionLink 设置为指向 Create 操作，以便 id=3 和 memberid=4。

阅读了许多类似的帖子后，似乎以下内容应该有效：

```
@Html.ActionLink("Create New", "Create", null, new { memberid = "memberid" }) 
```

但是，这会导致创建如下 URL：

```
<a href="/PersonCAFDetail/Create/3" memberid="memberid">Create New</a> 
```

我有一条路线设置为：

```
 routes.MapRoute(
        name: "PersonCAFDetail",
        url: "PersonCAFDetail/Create/{id}/{memberid}",
        defaults: new { controller = "PersonCAFDetail", action = "Create", id = "@\d+", memberid = @"\d+" }                        
        ); 
```

控制器接受如下两个参数：

```
 public ActionResult Create(int id, int memberid)
        {
            int cafID = id;
            int personID = memberid;
            ViewBag.detailTypeID = new SelectList(db.tCAFDetailTypes, "detailTypeID", "detailType");
            ViewBag.cafID = new SelectList(db.tFamilyCAFs, "cafID", "issues");
            ViewBag.personID = new SelectList(db.tPersons, "personID", "forename");
            return View();
        } 
```

任何帮助表示赞赏。

--------模型编辑----------

```
namespace WhatWorks.Models
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.ComponentModel.DataAnnotations;

    public partial class tPersonCAFDetail
    {
        [Key, HiddenInput(DisplayValue=false)]
        public int cafID { get; set; }

        [Key, HiddenInput(DisplayValue = false)]
        public int personID { get; set; }

        [Key, HiddenInput(DisplayValue = false)]
        public int detailTypeID { get; set; }

        [Required, DataType(DataType.MultilineText)]
        public string notes { get; set; }

        public string FullName
        {
            get
            {
                return tPerson.forename + " " + tPerson.surname;
            }
        }

        public virtual tCAFDetailType tCAFDetailType { get; set; }
        public virtual tFamilyCAF tFamilyCAF { get; set; }
        public virtual tPerson tPerson { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T04:15:57.780

最后，您需要将两个参数传递给视图：

索引操作：

```
public ActionResult Index(int id, int memberid)
{
    ...
    ViewBag.cafID = id;
    ViewBag.personID = memberid;
    return View();
} 
```

索引.cshtml

```
@Html.ActionLink("Create New", "Create", "PersonCAFDetail", new { id=ViewBag.cafID , memberid =ViewBag.personID}, null) 
```

并检查您的路线语法... id = @"\d+"

```
 routes.MapRoute(
    name: "PersonCAFDetail",
    url: "PersonCAFDetail/Create/{id}/{memberid}",
    defaults: new { controller = "PersonCAFDetail", action = "Create", id = @"\d+", memberid = @"\d+" }                        
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:17:10.223

```
Html.ActionLink(string, string, object, object) 
```

..是你正在使用的。这些参数如下：

```
Html.ActionLink(<link text>, <action name>, <route values>, <html attributes> 
```

您将数据放入 attributes 参数中，这自然会使它们成为链接的属性（而不是成为路由值）。

使用示例：

```
@Html.ActionLink("Create new", "Create", new { id = Model.cafID, memberid = Model.personID }, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T07:52:54.943

导致您的 Url.Action 不起作用的原因是 url 中的 & char 已编码，因此您必须使用

```
@Html.Raw(Html.ActionLink("Create New", "Create", "PersonCAFDetail", new { id=ViewBag.cafID , memberid =ViewBag.personID}, null)) 
```

现在，它正在工作；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-27T06:32:19.557

您应该创建一个具有重载方法的 ActionLink

```
MvcHtmlString HtmlHelper.ActionLink(
    string linkText, 
    string actionName, 
    string controllerName, 
    object routeValues, 
    object htmlAttributes
) 
```

在你的情况下：

```
@Html.ActionLink("Create New", "Create", PersonCAFDetail, new { id = "id", memberid = "memberid" }) 
```

# search - 如何使用 4.0.0 版获取 lucene 地理（空间）搜索的距离？

> ID：13225788
> 
> 赞同：5
> 
> 时间：2012-11-05T04:08:24.290
> 
> 标签：search, lucene, geospatial

我正在尝试使用最新版本的Lucene（4.0.0）进行地理搜索功能，要求很简单：获取圆内的点（中心和半径作为查询条件传入）。我找不到输出每个结果到中心的距离的API，我必须在得到每个结果的纬度和经度后计算距离。有人可以帮忙吗？代码如下：

```
SpatialContext sc = SpatialContext.GEO;
SpatialArgs args = new SpatialArgs(SpatialOperation.Intersects,
              sc.makeCircle(lo, la, DistanceUtils.dist2Degrees(dist, DistanceUtils.EARTH_MEAN_RADIUS_KM)));
Filter geo_filter = strategy.makeFilter(args);
try {
    Sort chainedSort = new Sort(sfArray).rewrite(searcher);
    TopDocs docs = searcher.search(new MatchAllDocsQuery(), geo_filter, 10000, chainedSort);
    logger.debug("search finished, num: " + docs.totalHits);
    for (ScoreDoc scoreDoc : docs.scoreDocs){
        Document doc = searcher.doc(scoreDoc.doc);
        double la1 = Double.parseDouble(doc.get("la"));
        double lo1 = Double.parseDouble(doc.get("lo"));
        double distance = getDistance(la1, lo1, la, lo); // have to calc distance by myself here, not cool
    }
} catch (IOException e) {
    logger.error("fail to get the search result!", e);
} 
```

使用 Lucene 3.X 很容易获得距​​离，任何熟悉使用 Lucene 4.0.0 进行地理（空间）搜索的人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T06:27:52.703

你有来自该领域的纬度和经度；现在您需要计算距查询圆中心点的距离。在您的代码中，这看起来像：

```
double distDEG = sc.getDistCalc().distance(args.getShape().getCenter(), lo1, la1);
double distKM = DistanceUtils.degrees2Dist(distDEG, DistanceUtils.EARTH_MEAN_RADIUS_KM); 
```

不错; 嗯？（ps 我写了很多 Lucene 4 空间）

# matlab - matlab：gui和全局变量

> ID：13225790
> 
> 赞同：1
> 
> 时间：2012-11-05T04:08:56.530
> 
> 标签：matlab, user-interface, global-variables, handles

我的 GUI 的回调中有几个函数（在单独的文件中定义），如下所示：

```
function myFunction_Callback(hObject, eventdata, handles)
[output] = function1(input);
[output] = function2(input);
[output] = function3(input);
guidata(hObject, handles); 
```

现在，假设我正在定义 function1，并且我想在句柄中存储一个局部变量。当我这样做时：

```
[output] = function1(input)
localVariable = [1 2 3];
handles.myVariable = localVariable; 
```

`handles.myVariable`一旦 function1 完成，句柄就会“消失”。如何让它“留在”手柄中？我是否必须将其定义为输出，然后存储在这样的句柄中：

```
[output, localVariable] = function1(input)
...
localVariable = [1 2 3]; 
```

然后

```
function myFunction_Callback(hObject, eventdata, handles)
[output, handles.myVariable] = function1(input);
[output] = function2(input);
[output] = function3(input);
guidata(hObject, handles); 
```

?? 我知道这个问题听起来超级愚蠢而且可能不清楚，但请原谅我，我对 GUI 和处理新手很困惑 :) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:50:11.057

是的，您的一般方法是可以的，尽管有一些事情：

*   `handles`通常是指包含对象句柄的数据结构。向其中添加其他类型的数据是有效的，但不建议这样做，因为它只会令人困惑。

*   函数的单个输出周围的括号不是必需的。诚然，这是品味和编码风格的问题，但我不建议这样做；仅使用括号将属于一起的事物分组。

*   你在某处`input`包含吗？`handles`同样，函数`output`s 是否包含 的修改版本`handles`？如果没有函数修改`handles`，当然不需要每次调用回调时都重新保存...

所以，总而言之，做这样的事情：

```
function myFunction_Callback(hObject, eventdata, handles)
    ...
    output = func1(input);  
    output = func2(output);  
    output = func3(output);
    ...
    guidata(hObject, output);  % <-- NOTE: output contains handles

function output = func1(input)
    ...
    output.handles = input.handles;
    ...
    output.localVar = [1 2 3];
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:02:08.640

围绕这些函数传递数据可能会非常痛苦。

我发现针对这些原因应用面向对象编程非常有帮助。特别是将您的课程定义为`classdef myclass < handles`. 使用这些你可以轻松地做各种很酷的事情——比如在不相关的人物之间传输数据。

实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)而不是全局模式很有帮助。[我还在这里](https://stackoverflow.com/questions/9153044/is-it-possible-to-do-stateless-programming-in-matlab-how-to-avoid-checking-d/9153153#9153153)给出了一个显示[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的答案。

# ios - iOS - 如何使用带有加载指示器的同步请求

> ID：13225793
> 
> 赞同：0
> 
> 时间：2012-11-05T04:09:22.693
> 
> 标签：ios, asynchronous, loading

因此，我试图显示一个动画加载视图（自定义构建），该视图将在向 Web 服务发出同步请求时继续动画。我熟悉使用 NSURLConnections 和委托的同步和异步请求，但我的问题是我想确保我的线程等待请求完成但仍然会为我的加载指示器设置动画。

关于解决此问题的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:35:12.243

使用同步请求执行此操作不是要走的路——如果您希望您的应用程序“等待”请求完成，您只需将您想要在请求完成后恢复的任何代码放在 connectionDidFinishLoading: 方法中。这样，您的 UI 将不会停滞，您可以为加载指示器设置动画。

# windows-8 - 将本地 HTML 加载到 WebView

> ID：13225796
> 
> 赞同：6
> 
> 时间：2012-11-05T04:09:24.390
> 
> 标签：windows-8, microsoft-metro

我可以将本地 HTML 文件（带有图像和...）加载到`WebView`?
仅设置`Source`参数并不能解决问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T04:28:47.757

只要文件是应用程序包的一部分，您就可以从文件中加载它，例如：

```
WebView2.Source = new Uri("ms-appx-web:///assets/text.html"); 
```

从[WebView.Navigate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.navigate.aspx)

> WebView 可以使用 ms-appx-web:// 从应用程序包中加载内容，使用 http/https 从网络中加载内容，或者使用 NavigateToString 从字符串中加载内容。它无法从应用程序的数据存储中加载内容。要访问内网，必须在应用清单中开启相应的能力。

对于“随机”文件，我想您可以通过文件选择器提示用户选择文件，然后将其读入字符串并使用[NavigateToString](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.navigatetostring.aspx)，但是根据您要完成的操作，用户体验可能会有些奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T15:02:26.003

我在这个问题上工作了很长时间，我找到了一种方法：首先你应该将它保存在**`InstalledLocation`**文件夹中。如果您没有选择创建新的 .html 文件，您可以使用`file.CopyAsync(htmlFolder, fname + ".html");` Look into my example：

```
StorageFolder htmlFolder = await Windows.ApplicationModel.Package.Current.InstalledLocation.CreateFolderAsync(@"HtmlFiles", CreationCollisionOption.GenerateUniqueName);
IStorageFile file = await htmlFolder .CreateFileAsync(fname + ".html", CreationCollisionOption.GenerateUniqueName); 
```

并且您可以轻松地打开您的 .html 文件：

```
var fop = new FileOpenPicker();
fop.FileTypeFilter.Add(".html");
var file = await fop.PickSingleFileAsync();
if (file != null)
{
   string myPath = file.Path.Substring(file.Path.IndexOf("HtmlFiles"));
   myWebview.Navigate(new Uri("ms-appx-web:///" + myPath));
} 
```

记住只有从**`InstalledLocation`**你可以打开它`ms-appx-web:///`

# junit - JUnit UnsatisfiedLinkError

> ID：13225801
> 
> 赞同：2
> 
> 时间：2012-11-05T04:09:49.580
> 
> 标签：junit, unsatisfiedlinkerror

我正在运行一个简单的 JUnit 测试，并在其执行过程中出现此错误：

```
java.lang.UnsatisfiedLinkError: no jmupdf64 in java.library.path 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:50:16.727

您需要添加此 JVM 选项：

```
-Djava.library.path="<the directory of jmupdf64>" 
```

对于 Mac OSX：
您需要创建`libjmupdf64.dylib`

1.  下载源代码：[http ://code.google.com/p/jmupdf/downloads/list](http://code.google.com/p/jmupdf/downloads/list)

2.  注释掉 Line#67 文件: `./thirdparty/tifflib/tif_config.h`:

    `// #define lfind _lfind`

3.  OSX 需要更多设置：

    *   `CFLAGS`在 ./Makefile 中添加 JNI 头文件。
    *   更改`JNI_DLL`为`libjmupdf64.dylib`。
    *   ETC...
4.  制作库：

    `$ make`

# html - 如何将第一个 HTML 子元素锚定在左侧，最后一个 HTML 子元素锚定在右侧

> ID：13225804
> 
> 赞同：1
> 
> 时间：2012-11-05T04:10:25.997
> 
> 标签：html, css

请考虑以下简单的示例：http: [//jsfiddle.net/mark69_fnd/vtLrt/](http://jsfiddle.net/mark69_fnd/vtLrt/)

如您所见，它打印：

```
A1 B1
A2 B2
A3 B3 C3 D3 E3 F3 G3 
```

我想看到的是：

```
A1                B1
A2                B2
A3 B3 C3 D3 E3 F3 G3 
```

即第一个元素锚定在左侧（A1、A2、A3），​​最后一个元素锚定在右侧（B1、B2、G3）。

没有JS可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:13:23.760

编辑：你说你想要`B1, B2, B3`极右，但你的例子显示了一些不同的东西

只要`float: right;`给`.anchorToRight`

[**演示**](http://jsfiddle.net/vtLrt/6/)

CSS

```
.anchorToRight {
   float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:14:17.963

我看到你已经添加了 class `anchorToRight`。将此类浮动到右侧。

```
.anchorToRight{
    float:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:16:48.947

嗨，现在`.char.anchortoRight`在你的 CSS 中 定义你的类`float : right`

**像这样**

```
.char.anchorToRight{
float:right;
} 
```

**[*现场演示*](http://jsfiddle.net/rohitazad/vtLrt/7/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:01:59.083

将此 css 添加到您的 css 文件中。

`.anchorToRight{
float:right;
}`

# javascript - 为什么 Firefox 的 setTimeout 动画这么慢？

> ID：13225806
> 
> 赞同：-4
> 
> 时间：2012-11-05T04:10:48.357
> 
> 标签：javascript, settimeout

好的，所以我有一个雪花落在屏幕上的小动画，我曾经`setTimeout`让它移动。我喜欢它目前的样子（至少在 Chrome 上），现在，我正在研究交叉兼容性，我正在研究 Firefox，它的运行速度非常缓慢。老实说，该`setTimeout`函数设置为 5ms，它每 5ms 仅移动 1px（速度为 200 fps），但我需要它以那个速度运行。是否有一些狡猾的技巧可以绕过它，Firefox 以什么速度重复该功能？另外，旁注：它甚至在 IE9 中都不起作用（我不关心 <8）。他们移动了一秒钟，到达屏幕底部，然后停止（我希望它在顶部重新启动）。
任何帮助将不胜感激！

我的代码（如果你想通过它）如果你不跳到`"//begin actual function"`：

```
var width = window.outerWidth;  
var height = window.outerHeight;  
//foreground  
var curWidth = width - 90;  
var h2 = height * 5;  
var tbvar;  
function TB() {  
//random flake  
var flakeSrc = ['images/1.png','images/2.png','images/3.png','images/4.png'];  
var randImg1 = Math.floor(Math.random() * flakeSrc.length );  
var randImg2 = Math.floor(Math.random() * flakeSrc.length );  
var randImg3 = Math.floor(Math.random() * flakeSrc.length );  
var randImg4 = Math.floor(Math.random() * flakeSrc.length );  
var randImg5 = Math.floor(Math.random() * flakeSrc.length );  
//random horizontal position array  
var left = [];  
var one = 1;  
do {  
        one++;  
        left.push(one)  
    }  
    while (one <= curWidth);  
    var rand1 = Math.floor(Math.random() * left.length );  
    var rand2 = Math.floor(Math.random() * left.length );  
    var rand3 = Math.floor(Math.random() * left.length );  
    var rand4 = Math.floor(Math.random() * left.length );  
    var rand5 = Math.floor(Math.random() * left.length );  
    //////////////begin actual function/////////////////////////////////////////////  
    clearTimeout(tbvar);  
    tbvar=setTimeout(function(){  
        //find top positions  
        var top1 = document.getElementById("flake1").offsetTop;  
        var top2 = document.getElementById("flake2").offsetTop;  
        var top3 = document.getElementById("flake3").offsetTop;  
        var top4 = document.getElementById("flake4").offsetTop;  
        var top5 = document.getElementById("flake5").offsetTop;  
        //add 1  
        top1++;  
        top2++;  
        top3++;  
        top4++;  
        top5++;  
        //change top positions  
        document.getElementById("flake1").style.top = top1 + "px";  
        document.getElementById("flake2").style.top = top2 + "px";  
        document.getElementById("flake3").style.top = top3 + "px";  
        document.getElementById("flake4").style.top = top4 + "px";  
        document.getElementById("flake5").style.top = top5 + "px";  
        //end of screen statements  
        if (top1 == height) {  
            //top1 == "-180px";  
            document.getElementById("flake1").style.top = "-180px";  
            document.getElementById("flake1").style.left = rand1 + "px";  
            document.getElementById('flake1').src = flakeSrc[randImg1];  
        }  
        if (top2 == height) {  
            //top2 == "-180px";  
            document.getElementById("flake2").style.top = "-180px";  
            document.getElementById("flake2").style.left = rand2 + "px";  
            document.getElementById('flake2').src = flakeSrc[randImg2];  
        }  
        if (top3 == height) {  
            //top3 == "-180px";  
            document.getElementById("flake3").style.top = "-180px";  
            document.getElementById("flake3").style.left = rand3 + "px";  
            document.getElementById('flake3').src = flakeSrc[randImg3];  
        }  
        if (top4 == height) {  
            //top4 == "-180px";  
            document.getElementById("flake4").style.top = "-180px";  
            document.getElementById("flake4").style.left = rand4 + "px";  
            document.getElementById('flake4').src = flakeSrc[randImg4];  
        }  
        if (top5 == height) {  
            //top5 == "-180px";  
            document.getElementById("flake5").style.top = "-180px";  
            document.getElementById("flake5").style.left = rand5 + "px";  
            document.getElementById('flake5').src = flakeSrc[randImg5];  
        }  
        TB();  
    }, 5);  
}  
TB(); 
```

如果您想查看整个项目的实际效果：http: [//fudgepants.com/snow/snow.html](http://fudgepants.com/snow/snow.html)

我说的是大雪花，而不是小雪花。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:37:43.823

对您的代码的一些评论：

```
function TB() {  
  //random flake  
  var flakeSrc = ['images/1.png','images/2.png','images/3.png','images/4.png']; 
```

由于该数组是静态的，因此您应该将其放在函数之外，这样就不会在每次调用时创建它。

```
 var randImg1 = Math.floor(Math.random() * flakeSrc.length ); 
```

`flakeSrc.length`不会改变，所以存储长度并参考它。`Math.floor`此外，您可以使用按位 OR 运算符替换：

```
 var randImg1 = Math.random() * flakeSrc.length | 0; 
```

.

```
do {  
        one++;  
        left.push(one)  
    }  
    while (one <= curWidth); 
```

这似乎毫无意义，每次调用都这样做只会浪费大量 CPU 周期。`left`仅用于 value `left.length`，这将是相同的 value `curWidth`。

```
 var rand1 = Math.floor(Math.random() * left.length ); 
```

如上，`left.length`多次使用，与 相同`curWidth`，只是读取速度较慢。

等等...

为避免全局变量，请考虑将其全部包装在立即调用的函数表达式中。

# sqlite - 将 Sqlite 数据库转换为 MS 的最快方法 - Access (2003/7007) 格式

> ID：13225810
> 
> 赞同：0
> 
> 时间：2012-11-05T04:11:23.113
> 
> 标签：sqlite, ms-access

如果我没有数据库的表结构，那么将 sqlite 数据库转换为 MS-access 格式的最快方法是什么。

我最好的猜测是

连接到 sqlite db，获取表模式，然后逐行复制表数据。

我需要尽可能快的方法。

问候拉吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T04:45:33.893

一个简单的方法：

*   为 SQLite安装[ODBC 驱动程序](http://sqlite.awardspace.info/syntax/sqliteodbc.htm)
*   在 Access 中，[创建链接表](http://www.techonthenet.com/access/tables/link_table2007.php)。您可以选择链接到表或在 Access 中创建表和数据的副本。

# mysql - 引用一列或多列的复合外键

> ID：13225813
> 
> 赞同：0
> 
> 时间：2012-11-05T04:12:01.503
> 
> 标签：mysql, sql, database-design, foreign-keys, composite-key

我有一个表（tableA），它使用主键“车辆”、“引擎”、“传输”连接其他 3 个表我希望能够将部件分配给其中一个或多个，例如“仅此车辆”或“仅带有此发动机的车辆”或“带有此发动机的任何车辆”

我的计划是有一个零件表（tableB），其中还包含主键“车辆”、“引擎”、“传输”，我希望能够插入例如：

*   `4844, null, null`仅将零件分配给“车辆”或
*   `4844, 240, null`将零件分配给“仅配备此发动机的此车辆”。

有什么方法可以在数据库级别强制执行完整性。

1.  tableB中填写的字段必须引用tableA中的字段。
2.  至少必须填写其中一个字段。
3.  是否存在不将数据全部插入其中的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:04:00.083

1.  阅读数据模型模式。有几本好书（干草，福勒，西尔弗斯顿，等等），干草很好地涵盖了这些东西

2.  如果你想做这类事情，请使用像 postgres 这样具有检查约束的真实数据库。对于您的问题 2 和 3，这很容易通过检查来解决。

# jmx - 如何检索 JMX 通知消息的 IP 地址？

> ID：13225814
> 
> 赞同：0
> 
> 时间：2012-11-05T04:12:15.423
> 
> 标签：jmx

我正在使用 JMX 服务器部署两个 Java 应用程序。这两个向 JMX Client 发送消息。但是我无法区分消息的来源。

如何检索 JMX 通知消息的 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:25:02.683

没有内置的方法来确定这一点，但这里有一些建议：

在通知发送者端，将应用程序 ID 添加到通知用户数据或源，以便侦听器可以区分发送者。

在侦听器方面，您可以在注册侦听器时指定与回送对象相同的标识符。这样，您将知道通知来自哪个来源。

# android - 'adb shell start/stop' 有什么作用？

> ID：13225817
> 
> 赞同：33
> 
> 时间：2012-11-05T04:12:53.457
> 
> 标签：android, adb

# 问题

做什么`adb shell start`和`adb shell stop`实际做什么？

# 描述

我认为他们调用`/system/bin/start`and `/system/bin/stop`。但是这两个可执行文件没有提供任何关于它们做什么的线索。在真机上测试时，我发现zygote进程启动和停止。所以这两个命令似乎控制了Android运行时（对应下图中的黄色和蓝色部分）。

![安卓架构](../Images/fd0307283111803d441b9e1b6a42e0c1.png)

但是这两个命令启动/停止了**哪些确切的进程/服务？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-24T14:34:55.077

基本上，您的所有 Android 服务都会重新启动；那些在`SystemServer.java`. 这在“Zygote 的上下文”中被调用。所以是的，Zygote 停止了。

您在 Android 中注册的所有服务`ServiceManager`都将在`ServiceManager`. 要重新启动它们，请执行`adb shell start`.

还要注意`SystemServer`是由 Zygote 启动的，所以`init.rc`告诉如果 Zygote 停止了，那么 even`SystemServer`必须停止。甚至`SurfaceFlinger`死了，因为它是从`SystemServer`本地开始的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:52:33.123

在您的设备上运行它

```
grep ^service /init*rc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-22T03:35:30.747

我也一直想知道“停止”在 Android 上的作用。从“停止”停止由 SurfaceFlinger 渲染 AP 的人那里得知。

尝试使用如下命令。执行命令，等待几秒钟，然后在 Android 上执行“停止”。该命令不断打印增加的数量并创建 .txt 文件。所以也许它只会在 Linux 部分保持活动状态时停止 Android 部分。仅供参考。

```
busybox sh -c 'i=0;while [ $i -ne 100 ]; do echo $i >> count.txt; sleep 1; i=$(($i + 1)); echo $i; touch "$i.txt"; done;' 
```

# jquery - jQuery图片库预览图片弹出

> ID：13225819
> 
> 赞同：1
> 
> 时间：2012-11-05T04:13:15.217
> 
> 标签：jquery, image, gallery, preview

我创建了一个图片库，在悬停时会弹出预览图片。

[http://jsfiddle.net/WSfka/](http://jsfiddle.net/WSfka/)

将鼠标悬停在缩略图上，将显示较大的图像预览。

我对预览图像在缩略图图像之间移动的方式不满意。如何简化脚本并改进预览图像弹出窗口？

```
$(document).ready(function() {
    $('.imageGalleryAlbum li a img').mouseenter(function() {
        $(this).closest('li').find('.preview').delay(500).fadeIn(1);
        $(this).closest('li').siblings().find('.preview').fadeOut(1);
        return;
    });
    $('.imageGalleryAlbum li .preview').hover(function() {
        $(this).closest('li').siblings().find('.preview').fadeOut(1);
        return;
    });
    $('.imageGalleryAlbum li .preview').mouseleave(function() {
        $(this).closest('li').find('.preview').fadeOut(1);
        $(this).closest('li').siblings().find('.preview').fadeOut(1);
        return;
    });
    $('.imageGalleryAlbum li .preview').click(function() {
        $(this).closest('li').find('.preview').fadeOut(1);
        $(this).closest('li').siblings().find('.preview').fadeOut(1);
        return;
    });
});

$(document).mouseup(function(e) {
    var container = $(".preview");
    if (container.has(e.target).length === 0) {
        container.fadeOut(1);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:58:46.663

**第三次更新**

尝试这个

[更新了你的小提琴](http://jsfiddle.net/videsignz/WSfka/9/)

```
var x;  

$(document).ready(function() {

        $('.imageGalleryAlbum li a img').on('mouseenter', function() {

            $('.preview').stop().hide();

            x = $(this).closest('li').find('.preview');

            if( $(x).is(':visible') ) {
                $(x).show();
            } else {
                $('.preview').hide();
                $(this).closest('li').find('.preview').stop().delay(500).fadeIn(0);
            }
        });

        $('.preview').parent().on('click mouseleave', function() {
            $('.preview').hide();
        });

    });

    $(document).mouseup(function(e) {
        var container = $(".preview");
        if (container.has(e.target).length === 0) {
            container.fadeOut(1);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:03:24.120

你可以试试这个例子。

[http://nemanjamilosavljevic.com/javascript/gallery_view/](http://nemanjamilosavljevic.com/javascript/gallery_view/) 这是我制作的画廊，它可以满足您的需求，它还允许用户移动鼠标，并且仍然可以打开大图像。

希望该方法对您有所帮助，或者您可以使用整个示例。

干杯；）

# asp.net - 将控制权从 Pipeline 交给 HttpHandler

> ID：13225822
> 
> 赞同：1
> 
> 时间：2012-11-05T04:13:47.503
> 
> 标签：asp.net, session, iis-7, sitecore, httphandler

我的网站有问题。服务器是 IIS 7，在 .NET 4.0 CLR 上运行 ASP.NET。我们正在托管一个 Sitecore 应用程序，我犹豫是否将其添加为标签，因为我真的觉得这更多的是问题的“为什么”，而不一定与导致问题的底层技术相关。

Sitecore 所做的其中一件事是添加大量自定义管道。其中一个管道称为`LayoutResolverPipeline`，它负责确定所请求页面将使用的布局文件的路径。我们提出了一种非常有用且复杂的跨多个域托管全局内容项的方法。哪个域将为哪些项目提供服务完全可以通过管理员 Web GUI（又名 Sitecore shell）进行配置。最终目标是让我们的营销/消费者体验团队能够运行多变量测试以找到最佳的用户体验。

为此，我们有一个“启动”页面，负责考虑有关当前用户的所有内容、有关当前系统和域设置的所有内容，并确定为客户提供哪种体验。对于大多数领域，这归结为骰子的加权掷骰 - 为了使测试结果在统计上合理，它们必须足够随机。它被编写为 an`IHttpHandler`并将其决定存储在中`HttpContext.Current.Session`（这也是通过让它实现`IRequiresSessionState`接口来完成的）。该决定被存储起来，以便如果客户决定回溯，我们不会再次掷骰子，而是在他们访问期间为他们提供一致的体验。该决定由处理程序执行，该处理程序为客户访问的下一页发出 302 重定向。

启动处理程序以通常的方式在 web.config 文件中定义：

```
<system.webServer>
<handlers>
    <add verb="*" path="launch.ashx"
       type="CMS.HttpHandlers.LaunchRequestHandler, CMS"
       name="LaunchHandler"/> 
```

我们偶尔会与出于某种原因不希望在他们的页面和我们的页面之间出现结果 302 的合作伙伴开展业务。相反，他们将直接链接到特定的客户体验。然而，随着时间的推移，我们会贬低、移动或过时整个用户体验，这对于某些要求苛刻和懒惰的合作伙伴来说会导致指向不受支持或不存在的项目的挥之不去的链接。我们还必须处理人们输入错误、记忆错误、链接错误、从浏览器历史中重新访问或只是尝试随机 URL 的情况。

后一种情况导致`LayoutResolverPipeline`. 我试图通过让它回退到`LaunchHandler`如果它无法弄清楚该怎么做来解决这些异常。我已将此实现为重定向，但我想简单地`LaunchHandler`直接调用；无论如何，它将对不同的项目执行 301，并且在单个请求上进行多次重定向是我希望避免的昂贵的资源浪费。

足够的背景。问题是`LayoutResolverPipeline`绑定到`HttpBeginRequest`IIS 处理堆栈的一部分，这在 Session 信息准备好之前。这是 Sitecore 的一个限制，如果不解决一大堆其他问题，它就无法移动。

问题：

1.  `IHttpHandler`除了重定向到绑定的 URL 之外，有没有办法将控制权传递给特定对象？
2.  有没有办法在事件管道中稍后重新加入代码？我想这意味着`Application.PostAcquireRequestState`仅针对单个请求绑定到事件，这听起来很可笑。
3.  有没有办法尽早获取会话状态信息？

我当然愿意接受有关我可能会如何做完全错误的建议。哦，如果你知道一个更有用的标签可以专门用于 Asp.net/IIS 管道，我找不到一个不是阅读鲱鱼的标签。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:59:26.057

我认为您不想手动调用任何处理程序……这听起来很老套。在这里使用**Server.Transfer()**而不是 301 重定向怎么样？然后它在用户端是透明的。当然，缺点是它不会更新明显的 URL，但是如果不进行某种重定向，您就无法做到这*一点*。

# c# - 如何将复选框/单选按钮的名称带入函数

> ID：13225823
> 
> 赞同：-1
> 
> 时间：2012-11-05T04:13:49.313
> 
> 标签：c#, wpf

我使用 WPF 和 C# 来构建我的应用程序。在我的应用程序中，我有很多复选框。由于我有很多复选框，那么如果复选框会有**很多**= true然后做某事....因此，只要选中复选框，我需要为事件创建一个函数，以确保要确保我的复选框编码不会被 checkbox.isChecked 淹没。

```
public Window1()
    {
        InitializeComponent();
        CheckTrueFlase(checkboxA);
        CheckTrueFlase(checkboxB);
        CheckTrueFlase(checkboxC);
        CheckTrueFlase(checkboxD);
    } 
```

该功能将类似于：

```
private string CheckTrueFalse(/*What parameter i should write in this area?*/) 
{
   string x;

   if(checkbox.isChecked == true)
     x = "correct";
   else if (checkbox.isChecked == false)
     x = "wrong";

   return x;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:12:26.873

您可以将所有复选框（form.controls）的事件注册到相同的方法，并将发送者（转换为复选框）发送到您的方法。我不知道 wpf 但我想它类似于 winforms，这是 winforms 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:33:20.030

这可以解决问题。

```
private string CheckTrueFalse(System.Windows.Controls.CheckBox checkbox) 
{
    string x;

    if (checkbox.isChecked)
        x = "correct";
    else
        x = "wrong";

    return x;
} 
```

# mysql - 如何生成随机码，并多次运行一条sql

> ID：13225824
> 
> 赞同：0
> 
> 时间：2012-11-05T04:13:53.670
> 
> 标签：mysql, sql

我有一个需要运行的查询，我有 2 个问题。

首先是我的查询：

```
INSERT INTO  `anzie_oscommerce`.`discount_codes` (
`discount_codes_id` ,
`discount_description` ,
`products_id` ,
`categories_id` ,
`manufacturers_id` ,
`excluded_products_id` ,
`customers_id` ,
`orders_total` ,
`order_info` ,
`exclude_specials` ,
`discount_codes` ,
`discount_values` ,
`minimum_order_amount` ,
`expires_date` ,
`number_of_orders` ,
`number_of_use` ,
`number_of_products` ,
`status`
)
VALUES (
'' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1'
); 
```

第一个问题是我需要生成我正在尝试使用从 php 获取的 uniqid 函数的随机代码，但我知道这是不可能的。有没有办法在sql中做类似的事情？

第二个问题是我需要运行 250 次才能生成 250 个不同的折扣代码。有没有快速多次运行 sql 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:25:48.393

对于第一个问题：这取决于您使用的数据库。Mysql 有一个 rand() 函数：[https ://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)

对于第二个：250 对于数据库来说并不多 - 只需将它放在 php for 循环中就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:05:40.777

我喜欢 sonofagun 的答案。另一个技巧是从虚拟表中选择 250 次。

```
INSERT INTO  `anzie_oscommerce`.`discount_codes` (
`discount_codes_id` ,
`discount_description` ,
`products_id` ,
`categories_id` ,
`manufacturers_id` ,
`excluded_products_id` ,
`customers_id` ,
`orders_total` ,
`order_info` ,
`exclude_specials` ,
`discount_codes` ,
`discount_values` ,
`minimum_order_amount` ,
`expires_date` ,
`number_of_orders` ,
`number_of_use` ,
`number_of_products` ,
`status`
)
(select '' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1' union all
select '' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1' union all
select '' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1' union all
select '' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1' union all
...however many times
); 
```

# java - 如何在 Hadoop MapReduce 的 Java 实现中创建全局变量？

> ID：13225825
> 
> 赞同：1
> 
> 时间：2012-11-05T04:13:59.420
> 
> 标签：java, hadoop, mapreduce

现在我想创建一个全局双变量（成员），它可以被 MapReduce 作业中的每个映射器/缩减器访问和更改。起初我试图在我的主 java 文件中声明一个静态双精度成员，但这似乎有问题，因为每个映射器/减速器都在单独的 JVM 上运行，并且可以正确更改和访问该成员。

我知道对于 int 变量有`counter`机制。但是如果我想创建一个全局双变量，我该怎么做呢？

***我的最终目标是总结所有映射器/减速器中的双重格式。如果我不能或不应该创建全局变量，还有其他方法可以实现该目标吗？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:07:03.360

这些双打从何而来？如果它们在输入数据中，您可以将其作为普通的 MR 工作。让您的映射器始终输出相同的键和要求和的值。使用组合器在每个映射器中进行本地求和。然后只使用一个 reducer 并让它简单地发出总和。

“全局”状态正是 Map-Reduce 范式试图避免的。您必须尝试将所有内容视为在单独的映射器中完成不同部分的工作，然后在减速器中组合/聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:38:26.130

实际上，您可以将 double 视为整数。您可以将任何双倍乘以 100000 并将其存储在计数器中。在减速机中，如果需要，只需除以 100000。

# git - 对多个 github 项目使用相同的部署密钥

> ID：13225826
> 
> 赞同：121
> 
> 时间：2012-11-05T04:14:05.273
> 
> 标签：git, github, ssh

Github 不允许将同一个 ssh 部署密钥用于多个项目，这在某些情况下会非常有用（例如 CI 服务器处理带有私有子模块的项目）。我已经看到各种线程似乎说这种限制是出于“安全原因”，但我还没有看到一个令人信服的解释来说明究竟会引发什么风险。

请注意，Github 不允许重复使用*帐户级别*密钥这一事实是有道理的（两个用户不应共享密钥）。我质疑的只是对*部署密钥的限制。*

需要明确的是，我*不是*在寻找解决方法（创建一个虚拟用户，使用多个密钥，...），而只是为了对 Deploy Keys 的这种限制进行合理的解释。

相关话题：

*   一个显示[解决方法](http://eclipsesource.com/blogs/2012/07/30/accessing-multiple-private-github-repositories-without-a-dedicated-build-user/)
*   一个[讨论这个问题](https://github.com/gitlabhq/gitlabhq/issues/370)，但没有真正去任何地方

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-03-19T21:09:20.043

不幸的是，在这种情况下，github 只是误解了密钥对与帐户或项目之间的区别。

由于密钥对用于身份验证和授权，因此它实际上是一种身份。Github 帐户是另一个身份。将 github 帐户连接到密钥对可以有效地在基于 github 帐户的身份和密钥对身份之间建立 1:N 映射。

相反，github 强制将项目 1:N 映射到基于密钥对的身份。现实世界的模拟是，有一扇门可以让许多不同的人打开该项目的访问权限。但是一旦他们中的任何一个人拿到了门钥匙，他们就再也拿不到其他门的钥匙了。

如果密钥被泄露，从遏制违规的角度来看，不要经常重复使用密钥是有意义的。但这只是一个好的管理*政策*。*原则*上防止密钥被多次使用没有多大意义。有些门的钥匙永远不会重复使用，嗯，这又取决于*政策*。

* * *

稍微复杂一点的视图是将密钥对说明为*角色*。您可以拥有许多密钥对，因此担任许多角色。私钥对您进行角色身份验证。

Github 对项目的部署键映射表明一个角色永远不能包含多个任务。这很少是现实的。

当然，这些都不会改变 github 允许的内容。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-05T07:01:18.537

您引用的解决方法（创建单个“构建”用户，或在`id_rsa.REPONAME.pub`每个仓库共享相同用户）说明的唯一原因是：

**避免为不同的用户共享公钥/私钥**

即使您的情况并非如此（构建多个项目），但允许重用相同的 ssh 密钥将为两个*不同*的用户共享相同的 ssh 密钥提供可能性，这将破坏**身份验证**目的。

身份验证意味着：
“使用某个 ssh 密钥应该意味着您应该*知道谁*在使用它”。

* * *

GitHub 页面“**[管理部署密钥](https://docs.github.com/en/developers/overview/managing-deploy-keys)**”详细介绍了使用 ssh 的各种帐户：

*   **SSH 代理转发**：当您通过 SSH 连接到服务器并运行 git 命令时，代理转发使用已在本地开发机器上设置的 SSH 密钥。
    您可以有选择地让远程服务器访问您的本地 ssh-agent，就好像它在服务器上运行一样。
    因此无需在服务器上复制您的私钥。

*   **机器用户**：（这是“虚拟帐户”策略）将密钥附加到用户帐户。由于此帐户不会被人类使用，因此称为机器用户。
    你会像对待人类一样对待这个用户，将密钥附加到机器用户帐户，就好像它是一个普通帐户一样。
    授予帐户协作者或团队访问其需要访问的存储库的权限。
    因此，一个私钥关联到一个“机器用户”，每个服务器一个。

（[DHa](https://stackoverflow.com/users/1466346/dha)[在评论](https://stackoverflow.com/questions/13225826/using-the-same-deploy-key-for-multiple-github-projects/13227423?noredirect=1#comment112088414_13227423)中指出了部署密钥限制数，以及您只能拥有一个机器用户帐户的事实）

*   **部署密钥**（每个 GitHub 存储库一个）存储在服务器上并授予对 GitHub 上单个存储库的访问权限的 SSH 密钥。
    **此密钥直接附加到存储库而不是用户帐户**。
    无需转到您的帐户设置，而是转到目标 repo 的管理页面。
    转到“ `Deploy Keys`”并单击“ `Add deploy key`”。粘贴公钥并提交。

这一次，ssh 密钥没有附加到用户（您可以授予对多个存储库的访问权限），而是附加到一个存储库。
授予*多个*repo 的 ssh 访问权限相当于“机器用户”。

在**认证**方面：

*   当用户完成时，对多个存储库使用相同的密钥是可以的（已经说过与他/她的帐户相关联的密钥）
*   当密钥由存储库附加时，对多个存储库使用相同的密钥是不行的，因为您根本不知道*谁*访问了什么。
    这与“机器用户”不同，其中“用户”被声明为许多 repo 的协作者。
    在这里（部署密钥），**没有“合作者”**，只是授予 repo 的直接 ssh 访问权限。

* * *

[Yusuf Bhabhrawala在](https://stackoverflow.com/users/1747942/yusuf-bhabhrawala)[评论](https://stackoverflow.com/questions/13225826/using-the-same-deploy-key-for-multiple-github-projects/13227423#comment122795727_13227423)中进一步说明了这种模型限制：

> 考虑这些非常合理的用例——使用私有 pip 模块的 python 项目或使用私有 npm 包的节点项目——两者都来自同一组织中的另一个 repo。
> 
> 目前无法使用部署密钥或帐户密钥（这会暴露太多其他存储库）来部署这个非常简单的用例。

[Chris Stenkamp](https://stackoverflow.com/users/5122790/chris-stenkamp)指出“如何[发现 ' `pip install git+ssh://...`' 在哪里搜索 ssh 密钥？](https://stackoverflow.com/a/51979783/6309) ”，其中涉及设置 `GIT_SSH_COMMAND`环境变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-08T23:40:22.363

我花了很多心思来合理化这些影响并想出了这个场景。

想象一下，您为已分配给多个存储库的用户创建了一个部署密钥。现在您想撤销该密钥，但它在多个地方使用。因此，您可能会无意中只撤销部分访问权限，而不是能够撤销所有访问权限。

这听起来像是一个好处，但是一旦考虑到人为因素，这种多对一的关系实际上本质上是不安全的。这是因为如果不检查每个存储库并单独比较每个公钥，如果您忘记了实际分配的位置，您无法确定是否真的撤销了所有访问权限。

分配和管理如此多的唯一密钥肯定令人沮丧，但 GitHub 如何制定他们的政策，安全隐患是显而易见的：**当你撤销一个密钥时，你保证会撤销该密钥授予的所有访问权限，因为它只在一个地方使用.**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-09T02:25:07.570

我意识到您不是在寻找解决方法，但我想很多用户登陆此页面并且也想要一个简单的解决方案。您周围的工作发布了一个链接，类似于[github docs](https://docs.github.com/en/developers/overview/managing-deploy-keys#using-multiple-repositories-on-one-server)中的内容。如果手动完成，该过程很容易出错。

仅供参考，Bitbucket.org 没有此限制。您可以[在多个 repos 上使用相同的只读访问密钥](http://support.atlassian.com/bitbucket-cloud/docs/add-access-keys)。这使得使用具有多个存储库的单个生产服务器变得超级容易

如果您坚持使用 Github，这是我编写的一个[脚本](https://github.com/jtlindsey/github-generateDeployKey)，它允许您通过运行简单地传递您的存储库所有者名称和存储库名称`./generateDeployKey.sh repo_owner_name repo_name`，它会为您完成所有工作并输出您可能需要复制的任何内容。

将以下内容保存到一个名为`generateDeployKey.sh`

```
#!/bin/sh
# This script generates a ssh key for a single repository
# and adds a custom configuration to the users (not global) ssh config file,
# and outputs the public key for you to copy and paste as the repo deploy key
# and outputs the url for you to clone the repo on the machine.
# Github docs ref:
# https://docs.github.com/en/developers/overview/managing-deploy-keys#using-multiple-repositories-on-one-server
#
# 1\. Add the script to the user account of the machine. The home directory is fine.
# 2\. Make the script executable by running the following command as the user:
# chmod u+x generateDeployKey.sh
# 3\. Run script like `./generateDeployKey.sh REPO_OWNER_NAME REPO_NAME` Note the space between owner and repo name. Example:
# ./generateDeployKey.sh yourname hello_world
# If you make a mistake with what you pass in, you can remove change from your ~/.ssh/config file
# by deleting the most recent "New Key Generated on...." and deleting the related .pub and private keys

# Check if user passed in both parameters
if [ -z "$1" ] || [ -z "$2" ]
then
  echo "Make sure to pass in both parameters REPO_OWNER_NAME and REPO_NAME. Example:"
  echo "./generateDeployKey.sh yourname hello_world"
else
  REPO_OWNER_NAME=$1
  REPO_NAME=$2
  KEY_PATH=~/.ssh/id_rsa.$REPO_NAME
  echo "Generating ssh key At ${KEY_PATH}"
  ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa.${REPO_NAME}
  echo "Your ssh deploy key is:"
  PUB_KEY_PATH=$KEY_PATH".pub"
  cat $PUB_KEY_PATH
  echo ""
  # Will create config if it does not exist
  echo "Updating ~/.ssh/config"
  DATE_TIME=$(date +"%Y-%m-%d at %r")
  echo "
  # New Key Generated on $DATE_TIME
  Host github.com-$REPO_NAME
    HostName github.com
    User git
    IdentityFile $KEY_PATH" >> ~/.ssh/config
  echo ""
  echo "Here is your hostname's alias to interact with the repository using SSH:"
  echo "git clone git@github.com-$REPO_NAME:$REPO_OWNER_NAME/$REPO_NAME.git"
fi 
```

# python - Heroku 上的 django-hstore

> ID：13225830
> 
> 赞同：3
> 
> 时间：2012-11-05T04:14:57.153
> 
> 标签：python, django, heroku, psycopg2, hstore

我在 Heroku（雪松堆栈）上部署了一个 Django（v 1.3.3）项目。它使用推荐的 dj_database_url 来配置 settings.DATABASES。一切都很好（到目前为止）。

但是，我想开始将[django-hstore](https://github.com/jordanm/django-hstore)用于部分应用程序。根据文档，您必须将 settings.py 中的数据库引擎更改为：

```
'ENGINE': 'django_hstore.postgresql_psycopg2', 
```

因此，在我的 settings.py 文件中，我执行以下操作：

```
DATABASES = {'default': dj_database_url.config()}
DATABASES['default']['ENGINE'] = 'django_hstore.postgresql_psycopg2' 
```

在本地，一切对我来说都很好。我的具有 hstore 字段的模型效果很好（值是字典）。

但是，当我部署到 Heroku 时，数据库引擎被重置/覆盖为：

```
ENGINE: 'django.db.backends.postgresql_psycopg2' 
```

为了调试它，我在我的设置文件中设置了引擎后打印了一个。然后，我运行 bash：

```
heroku run bash 
```

接着：

```
python myapp/manage.py shell 
```

当我运行它时，我的打印语句向我显示了所需引擎（django_hstore.postgresql_psycopg2）的正确（所需）数据库设置。但是，如果我这样做：

```
from django.conf import settings
print settings.DATABASES 
```

我可以看到数据库引擎不再是 django_hstore，而是设置回正常（非 hstore）值。如果我导入我的一个模型并执行 get 加载对象，hstore 字段中的值是一个字符串，并且任何访问键的尝试都会抛出错误：

```
TypeError: string indices must be integers, not str 
```

请记住，此作品可在本地找到。但是，在部署到 heroku 之后，任何将值作为字典访问的尝试都会抛出上面的 TypeError。

我的问题是：

*   有谁知道为什么我的引擎被覆盖？如果是这样，我该如何解决这个问题？

或者

*   是否有另一种方法可以在 Django 1.3.3 中使用 hstore 字段，这可能不需要更改引擎（因此对 Heroku 更友好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:20:01.530

[SQLAlchemy 0.8](http://www.sqlalchemy.org/)包含实用方法，可用于创建[自定义模型](http://justcramer.com/2008/08/08/custom-fields-in-django/)以处理 Python`dict`和 Postgres之间的转换`hstore`。

```
from django.db import models
from sqlalchemy.dialects.postgresql.hstore import _parse_hstore, _serialize_hstore

class HStoreField (models.TextField):
    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        super(HStoreField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        if value is None:
            return None
        if isinstance(value, dict):
            return value
        return _parse_hstore(value)

    def get_db_prep_save(self, value, connection):
        if value is None:
            return None
        if isinstance(value, str):
            return value
        return _serialize_hstore(value)

    def db_type (self, connection):
         return "hstore" 
```

这个模型是可移植的，但如果你想运行基于 hstore 键或值的查询，你必须用原始 SQL 编写它们。

我使用 SQLite 内存数据库来运行测试，只要您将`text`类型用于非 PostgreSQL 后端，它就可以正常工作：

```
 def db_type (self, connection):
        from django.db import connection
        if connection.settings_dict['ENGINE'] == \
            'django.db.backends.postgresql_psycopg2':
            return "hstore"
        else:
            return "text" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T14:53:38.583

很高兴告诉你 django_hstore 的新版本 1.2.1 已经发布

通过 pip 升级并查看新的官方 django-hstore github 存储库：[https ://github.com/djangonauts/django-hstore](https://github.com/djangonauts/django-hstore)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:52:21.923

[https://github.com/niwibe/djorm-ext-hstore](https://github.com/niwibe/djorm-ext-hstore)

看起来这个包最初是 django-hstore 的一个分支，并包含相同的功能，但已更新为不再需要自定义数据库后端，这似乎可以缓解您的问题。（请注意，其中一些查询语法已更改）。

作为奖励，与您链接到的[原始 django-hstore](https://github.com/jordanm/django-hstore)相比，repo 的维护时间要晚得多，后者多年来没有被触及……可怕。

# android - 尝试从列表视图中删除的空指针异常

> ID：13225831
> 
> 赞同：0
> 
> 时间：2012-11-05T04:15:00.340
> 
> 标签：android, android-listview, nullpointerexception

`deleteIt`我在方法中得到一个空指针异常`filelist.notifyDataSetChanged();`

我需要一些帮助来删除文件，请善待。如何添加该`longclick`方法花了我几个小时。这可以由某人使用，但我需要帮助从列表中删除项目。

```
public class AndroidExplorer extends ListActivity 
{

private List<String> item = null;
private List<String> path = null;
private TextView myPath;

ArrayAdapter filelist = null;

File myFile = new   File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/GV-Skynet");
String root2 = myFile.getAbsolutePath();;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myPath = (TextView)findViewById(R.id.path);
    getDir(root2);

    ListView list = getListView();
    list.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view,
                int position, long id) 
        {
            File file = new File(path.get(position));

            deleteIt("Do you want to Delete", file.getName(), file );
            return true;
        }
    });

}

private void showToast(String msg) 
{
    Toast error = Toast.makeText(getBaseContext(), msg, Toast.LENGTH_LONG);
    error.show();
}

private void getDir(String dirPath)
{
    myPath.setText("Location: " + dirPath);

    item = new ArrayList<String>();
    path = new ArrayList<String>();

    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals(root2))
    {
        item.add("Return to GV-Skynet Directory");
        path.add(f.getParent());
    }

    for(int i=0; i < files.length; i++)
    {
        File file = files[i];
        path.add(file.getPath());
        if(file.isDirectory())
            item.add(file.getName() + "/");
        else
            item.add(file.getName());
    }

    ArrayAdapter<String> fileList =
        new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) 
{

    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead())
            getDir(path.get(position));
        else
        {
            new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("[" + file.getName() + "] folder can't be read!")
            .setPositiveButton("OK", 
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                }
            }).show();
        }
    }
    else
    {

        String fileName = file.getName();
        String fname="";
        String ext="";
        int mid= fileName.lastIndexOf(".");
        fname=fileName.substring(0,mid);
        ext=fileName.substring(mid+1,fileName.length());

        if(ext.equals("jpg"))
        {
            Intent intent = new Intent("android.intent.action.VIEW");
            intent.addCategory("android.intent.category.DEFAULT");
            intent.addFlags (Intent.FLAG_ACTIVITY_NEW_TASK);

            Uri uri = Uri.fromFile(file);
            intent.setDataAndType (uri, "image/*");
            this.startActivity(intent); 
        }

        if(ext.equals("3gp"))
        {
            Intent intent = new Intent("android.intent.action.VIEW");
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.putExtra ("oneshot", 0);
            intent.putExtra ("configchange", 0);
            Uri uri = Uri.fromFile(file);
            intent.setDataAndType (uri, "video/*");
            this.startActivity(intent);
        }

    }
}

public void deleteIt( String title, String name, File file )
{
    final String name1 = name;
    final File tmFile = file;
    new AlertDialog.Builder(this)
    .setTitle(title)
    .setMessage(name1)
    .setPositiveButton("YES", new DialogInterface.OnClickListener() // OnClickListener()
    {
        public void onClick(DialogInterface arg0, int arg1) 
        {
            //item = new ArrayList<String>();
            item.remove(tmFile.getName()); // remove the item
            filelist.notifyDataSetChanged(); // let the adapter know to update

            showToast("File Deleted: " + tmFile.getName() );
        }
    })
    .setNegativeButton("NO", new DialogInterface.OnClickListener() // OnClickListener()
    {
        public void onClick(DialogInterface arg0, int arg1) {
            // do stuff onclick of CANCEL
            showToast("CANCELLING DELETE");
        }
    }).show();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:30:36.900

试试这个改变你的陈述

```
ArrayAdapter filelist = null; 
```

和

```
ArrayAdapter<String> filelist = null; 
```

而且您正在 getDir 方法中重新声明文件列表，因此将其更改为

```
filelist = new ArrayAdapter<String>(this,R.layout.row, item);
    setListAdapter(filelist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:32:11.327

```
 onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    File file = new File(path.get(position));
    if (file.exists()) {
        deleteIt("Do you want to Delete", file.getName(), file);
    } else {
        Toast.makeText(this, "File not Exist", Toast.LENGTH_SHORT).show();

    }

} 
```

# android - 以编程方式向 ImageView 添加边距

> ID：13225834
> 
> 赞同：0
> 
> 时间：2012-11-05T04:15:47.463
> 
> 标签：android, android-layout

我有一个表格布局，其中每一行都是以编程方式构建的。

对于每一行，结构基本上是：

文本视图、线性布局、线性布局、线性布局、按钮。

每个 LinearLayout 内部都有多个 ImageView。我想增加 ImageView 项目之间的间距，因为它们的边界是接触的。

我在这里尝试了建议 -[在 Android 中，如何在 LinearLayout 子级之间留出空间？](https://stackoverflow.com/questions/4259467/in-android-how-to-make-space-between-linearlayout-children)- 我像这样创建参数：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FillParent, LinearLayout.LayoutParams.WrapContent); 
```

并在添加控件时将其设置为图像视图：

```
linearLayout1.AddView(image1);
linearLayout1.AddView(image2, layoutParams);
linearLayout1.AddView(image3); 
```

请注意，我只将它设置在中间项目上作为左右边距，这对于我想要实现的目标来说很好。

问题是，即使没有在布局参数上设置任何边距，即只是实例化它并如上所示设置它，它在左侧增加了大约 35px 的边距，导致比我想要的大得多的边距。即使用 1px 调用 SetMargins 也不会改变边距。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:40:14.533

像这样将线性布局的宽度设置为 WrapContent

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WrapContent, LinearLayout.LayoutParams.WrapContent); 
```

# android - 无法在我的应用中获取 Admob 广告

> ID：13225838
> 
> 赞同：0
> 
> 时间：2012-11-05T04:16:18.897
> 
> 标签：android, admob

我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical" >
<com.google.ads.AdView android:id="@+id/ad"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           ads:adSize="SMART_BANNER"
                           ads:adUnitId="@string/admob_unit_id"
                           ads:testDevices="@string/test_device"
                           ads:loadAdOnCreate="true"/>

</LinearLayout> 
```

logcat 中的错误：

```
11-05 09:32:30.593: I/Ads(2052): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":18,"session_id":"1804074505668833558","seq_num":"19","slotname":"a150940f47b619f","u_w":320,"msid":"com.ad.aksharamaala.hd","js":"afma-sdk-a-v6.2.1","bas_off":0,"net":"wi","app_name":"3.android.com.ad.aksharamaala.hd","hl":"en","smart_w":"full","gnt":8,"carrier":"40407","u_audio":3,"kw":[],"u_sd":1,"mv":"8015016.com.android.vending","isu":"EB83E0FCC98011A7D8B65831A838375F","cipa":0,"format":"320x50_mb","oar":0,"smart_h":"auto","ad_pos":{"height":0,"visible":1,"y":480,"x":0,"width":320},"u_h":480,"bas_on":0,"ptime":998246});</script></head><body></body></html>
11-05 09:32:30.953: W/webcore(2052): Can't get the viewWidth after the first layout
11-05 09:32:30.953: I/Ads(2052): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=18&session_id=1804074505668833558&seq_num=19&u_w=320&msid=com.ad.aksharamaala.hd&js=afma-sdk-a-v6.2.1&bas_off=0&net=wi&app_name=3.android.com.ad.aksharamaala.hd&hl=en&smart_w=full&gnt=8&carrier=40407&u_audio=3&kw&u_sd=1&mv=8015016.com.android.vending&isu=EB83E0FCC98011A7D8B65831A838375F&cipa=0&format=320x50_mb&oar=0&smart_h=auto&u_h=480&bas_on=0&ptime=998246&u_so=p&output=html&region=mobile_app&u_tz=-330&client_sdk=1&ex=1&slotname=a150940f47b619f&kw_type=broad&askip=3&gsb=wi&caps=interactiveVideo_th_mediation_sdkAdmobApiForAds_di&jsv=40" type: "admob" afmaNotifyDt: "null" useWebViewLoadUrl: "false">
11-05 09:32:30.953: I/Ads(2052): Request scenario: Online server request.
11-05 09:32:30.973: W/Ads(2052): IOException connecting to ad url.
11-05 09:32:30.973: W/Ads(2052): java.net.ConnectException: googleads.g.doubleclick.net/127.0.0.1:80 - Connection refused
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:254)
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
11-05 09:32:30.973: W/Ads(2052):    at java.net.Socket.connect(Socket.java:1055)
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
11-05 09:32:30.973: W/Ads(2052):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
11-05 09:32:30.973: W/Ads(2052):    at com.google.ads.internal.f.b(SourceFile:459)
11-05 09:32:30.973: W/Ads(2052):    at com.google.ads.internal.f.run(SourceFile:430)
11-05 09:32:30.973: W/Ads(2052):    at java.lang.Thread.run(Thread.java:1096)
11-05 09:32:30.973: D/webviewglue(2052): nativeDestroy view: 0x390bf8
11-05 09:32:30.973: I/Ads(2052): onFailedToReceiveAd(A network error occurred.) 
```

谁能告诉我我在哪里犯错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:40:10.130

如果您仔细查看您发布的日志，在第 6 行您会注意到`googleads.g.doubleclick.net`解析为`127.0.0.1`. 这通常意味着`hosts`您手机上的文件已被篡改，目的是阻止您所有应用中的广告。

如果你在模拟器上运行它，你的模拟器的`hosts`文件被篡改了，或者你的计算机的操作系统`hosts`文件被篡改了。你应该检查一下。

# android - 使用 Eclipse Indigo Service Release 2 进行 android 编程

> ID：13225839
> 
> 赞同：0
> 
> 时间：2012-11-05T04:16:20.850
> 
> 标签：android, android-intent, android-widget

我是 Android 应用程序开发的初学者，需要通过 Wei Meng Lee 的“Beginning with Android”一书中给出的示例和示例进行练习，但是每当我尝试按照这些步骤进行操作时，都会遇到一些无法清理的错误。错误看起来像这样：“ setContentView(R.layout.activity_main);” 不知道是什么类型的错误。在我的计算机中，我安装了适用于 Android 4.1 的 SDK API 级别 16 怎么办？请指导我通过适当的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:56:31.070

删除导入

```
import android.R; 
```

比干净构建你的项目还要检查 xml 布局文件名

```
setContentView(R.layout.activity_main); 
```

比它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:33:10.990

您应该获得最新版本的 eclipse。它现在是 Eclipse Juno。

并检查您的进口。消除

```
import android.R; 
```

而是放

```
import android.packagename.R; 
```

# c# - 在启动时启动应用程序，使用错误的加载路径

> ID：13225841
> 
> 赞同：5
> 
> 时间：2012-11-05T04:16:29.040
> 
> 标签：c#, winforms, visual-studio-2010, registry

我正在使用注册表项将我的应用程序设置为在 Windows 启动时加载（用户登录后）。我的代码：

```
RegistryKey RegKey = Registry.LocalMachine;
RegKey = RegKey.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Run", true);
RegKey.SetValue("AppName", "\"" + @"C:\Users\Name\Desktop" + "\"");
RegKey.Close(); 
```

因此，使用此代码，我的应用程序在启动时加载，但是工作目录是

> C:\Windows\System32

有谁知道为什么？

这对我不起作用，因为该程序需要与该程序位于同一目录中的几个文件才能运行。如果程序加载到我选择的目录（“C:\Users\Name\Desktop”），那么问题就不会存在。

有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T04:22:25.463

`Directory.SetCurrentDirectory()`可用于在应用启动时设置您的工作目录。EXE 路径可以使用`Application.ExecutablePath`.

把它们放在一起：

```
var fi = new FileInfo(Application.ExecutablePath);
Directory.SetCurrentDirectory(fi.DirectoryName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:51:52.767

我想出了一个便宜的技巧来实现这一点。当您的应用程序启动时，再次读取注册表以获取应用程序的启动路径（您想要的路径）。例如：Appl1 的启动路径为“C:\Users\Name\Desktop\App1.exe”。

读取该路径的注册表后，将其设置为当前目录。像这样的东西：

```
 RegistryKey RegKey = Registry.LocalMachine;
        RegKey = RegKey.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Run", false);
        string Path = RegKey.GetValue("App1.exe").ToString();
        Path = Path.Replace(@"\App1.exe"", ""); // Now it's a valid directory.
        Directory.SetCurrentDirectory(Path); 
```

这对我有用，但如果有人有更好的方法，我很想听听他们的意见。

# java - 我需要在 java 中为 kiosk 构建一个程序。我找不到如何使用它的密码键盘和读卡器

> ID：13225842
> 
> 赞同：1
> 
> 时间：2012-11-05T04:16:34.767
> 
> 标签：java, kiosk

我是编程亭的新手。我已经在我的计算机中构建了该程序，但我不知道如何使用密码键盘和读卡器作为我的程序的输入设备。该程序不是基于网络的程序。

# php - 创建用户时电子邮件未在 mantisbt 中发送

> ID：13225845
> 
> 赞同：1
> 
> 时间：2012-11-05T04:16:48.697
> 
> 标签：php, smtp, smarty, mantis

> **可能重复：**
> [配置 MantisBT 以使用 GMail 发送电子邮件](https://stackoverflow.com/questions/9356904/configuring-mantisbt-to-send-emails-using-gmail)

**以下是我在config_inc.php**中的电子邮件 (smtp) 配置，用于在 mantis bt 中发送邮件：

```
# --- Email Configuration ---
$g_phpMailer_method = "PHPMAILER_METHOD_SMTP"; # or PHPMAILER_METHOD_SMTP, PHPMAILER_METHOD_SENDMAIL
$g_smtp_host = 'smtp.gmail.com';   # used with PHPMAILER_METHOD_SMTP
$g_smtp_port = 587;
$g_smtp_username = 'demo@gmail.com';  # used with PHPMAILER_METHOD_SMTP
$g_smtp_password = 'xxxxxx';     # used with PHPMAILER_METHOD_SMTP
$g_administrator_email = 'demo@gmail.com';
$g_webmaster_email = 'demo@gmail.com';
$g_from_name = 'xpticket Bug Tracker';
$g_from_email = 'demo@gmail.com'; # the "From: " field in emails
$g_return_path_email = 'demo@gmail.com'; # the return address for bounced mail
$g_email_receive_own = "ON";
$g_email_send_using_cronjob = "ON";
$g_use_bcc = 'demo@gmail.com';
$g_smtp_connection_mode = 'ssl';
$g_default_email_on_priority = 1;
$g_default_email_on_status = 1;
# --- Attachments / File Uploads --- 
```

但是当我试图创建用户时，它在数据库中创建用户。还以散列格式在数据库中获取密码。但它没有发送任何邮件，也没有显示任何错误。它重定向我上一页没有任何错误。重置密码时也会发生同样的情况。

任何帮助....

谢谢

# lisp - 来自 Practical Common LISP 的第一个练习的格式化问题

> ID：13225849
> 
> 赞同：3
> 
> 时间：2012-11-05T04:17:46.713
> 
> 标签：lisp, common-lisp, practical-common-lisp

我开始通过 Practical Common LISP 工作，第一个练习是编写一个[简单的数据库](http://www.gigamonkeys.com/book/practical-a-simple-database.html)。我在 cygwin 上使用 GNU CLISP 2.48 (2009-07-28)。

这段代码，我已经与本书多次比较，并没有按照书中所说的方式产生输出

```
(defun make-cd (title artist rating ripped)
  (list :title title :artist artist :rating rating :ripped))
(defvar *db* nil)
(defun add-record (cd) (push cd *db*))
(add-record (make-cd "Roses" "Kathy Mattea" 7 t))
(add-record (make-cd "Fly" "Dixie Chicks" 8 t))
(add-record (make-cd "Home" "Dixie Chicks" 9 t))
(defun dump-db ()
  (dolist (cd *db*)
   (format t "~{~a:~10t~a~%~}~%" cd)))

(dump-db) 
```

我明白了

```
TITLE:    Home
ARTIST:   Dixie Chicks
RATING:   9
RIPPED:   
*** - There are not enough arguments left for this format directive.
      Current point in control string:
        "~{~a:~10t~a~%~}~%"
                  | 
```

我不了解`format`或 LISP 不够好，无法进行故障排除。这本书说我应该得到数据库中所有记录的列表。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T04:52:25.900

首先，让我们看一下（make-cd）的返回：

```
[12]> (make-cd "Home" "Dixie Chicks" 9 t)
(:TITLE "Home" :ARTIST "Dixie Chicks" :RATING 9 :RIPPED) 
```

您没有包含`:ripped`! 将（make-cd）更改为：

```
(defun make-cd (title artist rating ripped)
  (list :title title :artist artist :rating rating :ripped ripped)) 
```

注意`ripped`后面`:ripped`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T07:40:04.107

如果你在 CLISP 中使用编译器，它会告诉你哪里出了问题：

```
[1]> (defun make-cd (title artist rating ripped)
       (list :title title :artist artist :rating rating :ripped))   
MAKE-CD

[2]> (compile 'make-cd)
WARNING: in MAKE-CD : variable RIPPED is not used.
         Misspelled or missing IGNORE declaration?
MAKE-CD ;
1 ;
NIL 
```

`RIPPED`未使用该变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:22:37.323

格式指令`~{...~}`是一个迭代构造，其对应的参数应该是一个列表。此外，在这种情况下，由于 出现两次`~a`，每次迭代将消耗两个项目，因此列表中的项目总数预计为偶数。然而你给它提供了奇数个项目。

# vb.net - 翻转字符串的字母 - Visual Basic

> ID：13225850
> 
> 赞同：4
> 
> 时间：2012-11-05T04:17:53.193
> 
> 标签：vb.net

简单的编码分配：从文本框中获取文本并将其翻转，使其成为反语：

ie Hello My Name Is David 将是“divad si eman ym olleh”（程序不必匹配大小写，只需匹配字母）

这是我找到的，你还有其他方法吗？

```
Dim str As String = Textbox1.Text
Dim arr As New List(Of Char)
arr.AddRange(str.ToCharArray)
arr.Reverse()

For Each l As Char In arr
lblOne.Text &= l
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T04:46:56.183

**[`StrReverse`](http://msdn.microsoft.com/en-us/library/8ycf85wx%28v=vs.84%29.aspx)**您可以使用该函数（在 Microsoft.VisualBasic 中）在一行中完成。

```
Dim myText As String = "My Name is Dave"
Dim revText As String = StrReverse(myText) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:42:13.573

快速一班轮。

```
lblOne.Text = String.Join("", "divad si eman ym olleh".Reverse()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-15T20:44:09.007

Microsoft.VisualBasic

```
Dim myText As String = My Name is  abc
Dim revText As String = StrReverse(myText) 
```

输出：“cba si eman ym”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T07:20:46.323

反转字符串的最简单方法是：

```
Dim s As String = "1234ab cdefgh"
MessageBox.Show(s.AsEnumerable.Reverse.ToArray) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T04:45:57.440

这是一种类似的方式，但行数更少。

```
Dim Original_Text As String = "Hello My Name is Ahmad"
Dim Reversed_Text As String = ""

For i = Original_Text.Length To 1 Step -1
    Reversed_Text &= Original_Text.Substring(i, 1)
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T04:22:22.717

您可以使用`String.Join`而不是循环遍历每个字符并连接：

```
lblOne.Text = String.Join("", arr) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T04:24:18.783

创建一个`function`接受字符串的 a 返回一个反转的字符串。

```
Function Reverse(ByVal value As String) As String
    Dim arr() As Char = value.ToCharArray()
    Array.Reverse(arr)
    Return New String(arr)
End Function 
```

并尝试像这样使用它，

```
lblOne.Text  = Reverse(Textbox1.Text) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-21T14:19:50.490

1.  First Create a textbox, it will be TextBox1
2.  then create a button and name it Reverse
3.  then Create a label, it will be Label1
4.  Now double click on Reverse Button (Go to Button Click Event)
5.  and type following code.
6.  and run software And type your string in textbox and click on reverse button.

    ```
    Dim MainText As String = TextBox1.Text
    Dim revText As String = StrReverse(MainText)
    Label1.Text = revText 
    ```

# java - 用户在注销后单击返回按钮时如何会话过期，例如银行网站

> ID：13225855
> 
> 赞同：0
> 
> 时间：2012-11-05T04:18:37.763
> 
> 标签：java, servlets, logout

我在登录时将会话 ID 存储在数据库中，并在访问不同页面时引用相同的内容。会话在特定时间后过期，因为我已经计算了每个页面中的会话 ID。现在，我的问题是注销。当我单击注销时，如果从菜单中选择任何内容，用户会以会话过期的方式工作。但是如果他点击后退按钮，它会将他带到上一页，因为会话从未注销/过期。如何防止此页面显示在后退按钮上？

注意 - 在注销时，我创建了一个新会话并用它替换了旧会话。以下是我的代码 -

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.*;
import java.net.*;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

//public class LoginToApp extends HttpServlet {
public class LogoutApp extends javax.servlet.http.HttpServlet implements javax.servlet.Servlet {

    private ServletConfig config;

        public void init(ServletConfig config)
            throws ServletException{
            //this.config=config;
            super.init(config);
   }

public void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html");

        HttpSession session = request.getSession();
        String sessionID;
        String oldsessionID = request.getParameter("sessionID");
        System.out.println("Path Info"+oldsessionID);
        Date createTime;
        Date lastAccessTime;
        long initialtime;

        if(session.isNew()){
            System.out.println("New session created by default");
            request.getSession(true);
            sessionID = session.getId();
            createTime = new Date(session.getCreationTime());
            lastAccessTime = new Date(session.getLastAccessedTime());
            initialtime = System.currentTimeMillis();
         }else{
            System.out.println("You have created a new session");
            session.invalidate();
            session = request.getSession(true);
            sessionID = session.getId();
            createTime = new Date(session.getCreationTime());
            lastAccessTime = new Date(session.getLastAccessedTime());
            initialtime = System.currentTimeMillis();
         }

        try{
                    //java.sql.Statement theStatement=null;
                    java.sql.ResultSet theResultSet=null;
                    /* Create string of connection url within specified format with machine name, port number and database name. Here machine name id localhost and database name is student. */
                    String connectionURL = "jdbc:jtds:sqlserver://localhost/AUTOUDB";
                    // declare a connection by using Connection interface
                    Connection theConnection = null;
                    // declare object of Statement interface that uses for executing sql statements.
                    PreparedStatement thePreparedStatement = null;
                    // Load JBBC driver "com.mysql.jdbc.Driver"
                    Class.forName("net.sourceforge.jtds.jdbc.Driver");
                    int updateQuery = 0;

                        try{
                            /* Create a connection by using getConnection() method that takes parameters of string type connection url, user name and password to connect to database. */
                            theConnection = DriverManager.getConnection(connectionURL, "sa", "islemm*03");
                            // sql query to insert values in the secified table.
                            String queryString = "Update LOGIN set SESSID = ? where SESSID LIKE ?";
                            thePreparedStatement = theConnection.prepareStatement(queryString);
                            thePreparedStatement.setString(1,sessionID);
                            thePreparedStatement.setString(2,oldsessionID);
                            thePreparedStatement.executeUpdate();

                            System.out.println("Old Session ID : " +oldsessionID+ " New Session ID."+sessionID);
                            session.removeAttribute("oldsessionID");
                            response.setHeader("Cache-Control", "no-cache, no-store");
                            response.setHeader("Pragma", "no-cache");
                            response.setHeader("Expires","0");
                            response.setDateHeader("Expires",-1);
                            request.getSession().invalidate();
                            //response.sendRedirect("http://qtp.in.ibm.com:8080/automationutil/pages/loggedOut.jsp");

                            Cookie[] cookies = request.getCookies();
                                if (cookies != null)
                                    for (int i = 0; i < cookies.length; i++) {
                                        cookies[i].setValue("");
                                        cookies[i].setPath("/");
                                        cookies[i].setMaxAge(0);
                                        response.addCookie(cookies[i]);
                                        }

                            response.sendRedirect("/pages/login.html");

                        }catch (Exception e) {
                            e.printStackTrace();
                        }finally {
                            // close all the connections.
                            thePreparedStatement.close();
                            theConnection.close();
                            System.out.println("Disconnected from database in finally.");
                        }

                //  theResultSet.close();//Close the result set
                //  theStatement.close();//Close statement
                    theConnection.close(); //Close database Connection
                    System.out.println("Disconnected from database");

                }catch(Exception e){
                    System.out.println(e.getMessage());//Print trapped error.
                    e.printStackTrace();
                }

    }

    public void destroy()
      {
          // do nothing.
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:30:25.210

您可能需要考虑使用[ServletFilter](http://www.oracle.com/technetwork/java/filters-137243.html)并通过过滤器传递所有请求，如下所示：

**在你的 web.xml**

```
<filter>
    <filter-name>secfilter</filter-name>
    <filter-class>com.security.SecurityFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>secfilter</filter-name>
    <url-pattern>*</url-pattern>
</filter-mapping> 
```

[有关更多过滤器配置](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1015950)，请参阅此链接。

在您的过滤器类的 doFilter 中，检查会话是否已过期。如果过期，请重定向到您的主页。

我想你可以使用[这个链接](http://gardiary.wordpress.com/2008/08/28/the-most-basic-securing-web-application-with-servlet-filter/)作为参考。

# playframework - 玩！验证样本抛出异常

> ID：13225857
> 
> 赞同：2
> 
> 时间：2012-11-05T04:18:55.403
> 
> 标签：playframework

我尝试运行 Play 中给出的示例应用程序！验证框架，但它不断抛出异常。

```
/Users/Parjun/code-samples/play-samples/play-authenticate/samples/java/play-authenticate-usage/app/controllers/Signup.java:182: cannot find symbol
[error] symbol  : method noCache(play.mvc.Http.Response)
[error] location: class com.feth.play.module.pa.controllers.Authenticate
[error]         com.feth.play.module.pa.controllers.Authenticate.noCache(response()); 
```

noCache 是 Controller 中定义的公共方法。无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:45:33.303

从 GIT 下载的示例主文件依赖于不包含 noCache 方法的 0.2.1-SNAPSHOT。如果您想查看示例，请在代码中注释掉这些行或下载 0.2.1 快照： [这里](https://github.com/joscha/play-authenticate/tags "快照在这里")

# regex - 如何使用 Perl 正则表达式匹配由空格或在字符串末尾/开头的单词？

> ID：13225860
> 
> 赞同：11
> 
> 时间：2012-11-05T04:19:41.700
> 
> 标签：regex, perl

我想找到与我的正则表达式匹配的序列，如果它们位于被空格包围的字符串的中间，最后还是开头，或者是字符串中的唯一内容。

**示例：** 假设序列`'qwe45rty'`是我们正在寻找的。我希望能够对所有这些字符串持肯定态度：

`'qwe45rty'` `'qwe45rty blabla'` `'smth qwe45rty blabla'` `'smth qwe45rty'` `' qwe45rty '`

但这些都不是：

`'aaqwe45rty'` `'qwe45rtybb'` `'aaqwe45rtybb'`

我想出的最好的东西是这样的：

```
if ( ($a =~ /\s+$re\s+/) or
     ($a =~ /^$re\s+/)   or
     ($a =~ /\s+$re$/)   or
     ($a =~ /^$re$/)        )
{
    # do stuff
} 
```

这不是最好的方法:)

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T04:23:19.117

您可以在正则表达式中执行*or*：

```
/(^|\s+)qwe45rty(?=\s+|$)/ 
```

[正则表达式101](https://regex101.com/r/NgEuib/1)

请注意，第二组是正向前瞻 ( `?=`)，因此它会*检查*空格，但不会使用它。这样，正则表达式可以匹配两个连续出现的字符串并给出准确的匹配计数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T06:13:14.977

尝试从不同的方向解决问题。说某事*可以*匹配空白或什么都不匹配就是说它*不能*匹配非空白字符：

```
(?<!\S)qwe45rty(?!\S) 
```

只需稍微改变一下视角，正则表达式实际上就是自己编写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T04:23:11.860

尝试以下操作：

```
$a =~ /(?:\A|\s)$re(?:\s|\Z)/; 
```

例如：

```
use strict;
use warnings;

my $re = 'qwe45rty';
while (<DATA>) {
    chomp;
    print "'$_': Match? " . ( /(?:\A|\s)$re(?:\s|\Z)/ ? 'Yes' : 'No' ) . "\n";
}

__DATA__
qwe45rty
qwe45rty blabla
smth qwe45rty blabla
smth qwe45rty
 qwe45rty 
aaqwe45rty
qwe45rtybb
aaqwe45rtybb 
```

输出：

```
'qwe45rty': Match? Yes
'qwe45rty blabla': Match? Yes
'smth qwe45rty blabla': Match? Yes
'smth qwe45rty': Match? Yes
' qwe45rty ': Match? Yes
'aaqwe45rty': Match? No
'qwe45rtybb': Match? No
'aaqwe45rtybb': Match? No 
```

# algorithm - 二维网格方向迭代

> ID：13225861
> 
> 赞同：0
> 
> 时间：2012-11-05T04:19:43.187
> 
> 标签：algorithm, grid, iteration, direction

我正在寻找某种公式，对于每个`i`from `0`to`7`将返回一个 x 和 ay 偏移到某个方向上的相邻单元格。这个想法是，如果我在一个单元格网格中，并且我想扫描周围的单元格，我不必制作一棵圣诞树的`if`语句（比算术慢得多）。请注意，此扫描包括对角线。我一直在网上寻找类似的东西，但没有运气。

只要每个输入产生不同的输出，方向就可以按任何顺序输出，x 和 y 只能等于 1、0 或 -1，并且没有一个输出是`(0, 0)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:24:47.643

假设这`x,y`是原始坐标并且`nx,ny`将是当前邻居：

```
for (int cx = -1; cx <= 1; ++cx)
  for (int cy = -1; cy <= 1; ++cy)
    if (cx != 0 && cy != 0)
    {
      int nx = x + cx;
      int ny = y + cy;

      // do whatever you like
    } 
```

或者只使用常量：

```
int delta[8][2] = {{1,0},{-1,0},{0,1},{0,-1},{1,1},{1,-1},{-1,1},{-1,-1}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:35:09.533

```
for i in range(3):
    for j in range(3):
        if (i-1) or (j-1):
            print i-1,j-1 
```

-1 -1
-1 0
-1 1
0 -1
0 1
1 -1
1 0
1 1

这行得通吗？

# jquery - jquery 选择器只选择第一个列表元素

> ID：13225862
> 
> 赞同：0
> 
> 时间：2012-11-05T04:20:22.867
> 
> 标签：jquery

有人能找到我的错误吗？我有以下 html 列表

```
 <ul id="left-help-menu">
        <li><a href=#">My Library</a>
            <ul class="left-menu-sub">
                <li id="1">A</li>
                <li id="2">B</li>
                <li id="3">C</li>
                <li id="4">D</li>
                <li id="5">E</li>

            </ul>

        </li>
      </ul> 
```

和下面的jQuery代码

```
 $(document).ready(function() {
$("#left-help-menu li li a").click(function() {
    var vid = $("#left-help-menu li li").attr("id");
            });
   }); 
```

出于某种原因，这个选择器只选择了第一个 li 标签（当我通过在页面上粘贴“vid”来测试它时，它总是给我“1”）。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:22:17.137

这就是`attr()`吸气剂的工作方式。它适用于第一个匹配的元素。

`id`如果你想要一个所有匹配属性的数组......

```
var vid = $("#left-help-menu li li").map(function() { return this.id; }).get(); 
```

# ios - 使用反向身份验证在 ios 中集成 Twitter

> ID：13225864
> 
> 赞同：-2
> 
> 时间：2012-11-05T04:20:24.177
> 
> 标签：ios, twitter, twitter-oauth, ios5

请帮助我完成正确的分步**教程**，以使用**反向身份验证将****twitter 共享**集成到我的**iphone 应用程序**中。**我在Twitter 上**注册了该应用程序，并且我有**consumer key**。此链接**https://dev.twitter.com/docs/ios/using-reverse-auth**中提供的信息还不够。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:27:19.103

您可以使用分享工具包，关注和分享！看一下这个

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:34:07.720

尽管 Share Kit 可能对您有用，但如果您绝对需要反向身份验证，这里有一个类可以帮助您通过单个方法调用来完成此操作，该方法调用返回带有令牌和令牌秘密的字典。

[https://github.com/kbegeman/Twitter-Reverse-Auth](https://github.com/kbegeman/Twitter-Reverse-Auth)

希望这可以帮助！******

# php - php和字符串连接

> ID：13225869
> 
> 赞同：-3
> 
> 时间：2012-11-05T04:21:23.380
> 
> 标签：php, javascript, html

我不知道为什么我的字符串不能正确连接。这是我的2个文件：

* * *

## 扫描.php

```
<?php
function scan($directory)
{

$dir = opendir($directory);

$file= readdir($dir);
$file= readdir($dir);
echo "<ul>";
while (($file = readdir($dir)) !== false)
  {
    $path= $directory . $file;
    if(filetype($path)== "dir")
    {

     echo "<li class='folder' name= ";
     echo $path;
     echo ">";
     echo $file;
     echo"</li>";
    }
    if(filetype($path)== "file") echo "<li class='file' name= ". $path . ">" . $file . "</li>";

  }
  echo "</ul>";
closedir($dir);

} 
```

* * *

## 菜单Novita.php

```
<?php

 require "scan.php";
  $prefix= "../../novita/";
 scan($prefix); 
 ?>
 <script>
        var scandirectory= 
        var folders= $("li.folder");
        for (var i = 0; i < 5; i++) {
        $("li.folder").eq(i).on("mouseenter", {value: $("li.folder").eq(i).attr("name")}, function(event)
        {
            var path= $("li.folder").eq(i).attr("name");
            var string="<div>" + path + "</div>";
            $("#box").after(string);
            string= "<div class='box'>
                <?php 
                require 'scan.php';
                 echo " + path + ";
                scan(" + path + "); ?>
                </div>";
            $("#box:last").after(string);

        };

        </script> 
```

我不断收到这些错误/警告：

```
[2012 年 11 月 5 日 03:46:25 UTC] PHP 警告：opendir(+ path +)：无法打开目录：/Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan 中没有这样的文件或目录。第 6 行的 php
[2012 年 11 月 5 日 03:46:25 UTC] PHP 警告：readdir() 期望参数 1 为资源，布尔值在 /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 第 8 行
[2012 年 11 月 5 日 03:46:25 UTC] PHP 警告：readdir() 期望参数 1 是资源，布尔值在 /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 第 9 行
[05-Nov-2012 03:46:25 UTC] PHP 警告：readdir() 期望参数 1 为资源，布尔值在 /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 第 11 行
[UTC 时间 2012 年 11 月 5 日 03:46:25] PHP 警告：filetype(): Lstat failed for + path + in /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 在第 14 行
[05-Nov-2012 03:46:25 UTC] PHP 警告：filetype(): Lstat failed for + path + in /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 在第 23 行
[05-Nov-2012 03:46:25 UTC] PHP 警告：readdir() 期望参数 1 为资源，布尔值在 /Users/natanconsigli/Desktop/pagina paolo/articoli/novita/scan.php 第 11 行

```

感谢帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T04:23:18.923

您的实际错误与串联无关，它与这一行有关：

```
scan(" + path + "); 
```

该值`+ path +`被传递给`scan()`执行`opendir($directory)`（或，`opendir(" + path + ");`）。我假设（根据您的错误）没有名为 的文件`+ path +`，因此您收到的错误指的是`opendir()`. 所有后续错误都基于最初的错误。

看起来您正在尝试将值从 javascript 传递`path`给 PHP 函数。如果不使用一些 ajax 或刷新设置了查询字符串变量的页面，恐怕您将无法做到这一点。

# matlab - LPBoost 和 TotalBoost 不起作用？

> ID：13225872
> 
> 赞同：1
> 
> 时间：2012-11-05T04:21:51.253
> 
> 标签：matlab

一直在尝试重现[这个](http://www.mathworks.com/help/stats/ensemble-methods.html#btg0jov)需要统计和优化工具箱的例子；我有。（分别为 v7.5 和 v6.0；Matlab R2011a）

但是，我不断收到错误

*？？？在 270 处使用 ==> fitensemble 时出错
您无法为 TotalBoost 拟合集成，因为它不是集成方法。*

我做错了什么，还是缺少将 TotalBoost 合并到允许的方法中的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:37:56.203

我在 Matlab2012a 上遇到了同样的错误，但您提到的示例来自 2012b 文档。如果您查看工具箱的[发行说明](http://www.mathworks.com/help/stats/release-notes.html)，您会看到：

"... **R2012b 新功能、错误修复、兼容性注意事项**

*   用于不平衡数据、稀疏集成和多类提升的提升算法，具有自终止功能......"

# android - 适用于 Android 的二进制实用程序

> ID：13225878
> 
> 赞同：0
> 
> 时间：2012-11-05T04:22:19.707
> 
> 标签：android

`busybox`为 Android 提供了一些（但不是全部）有用的二进制实用程序。例如，没有`pstree`或`file`。要使用这些实用程序，必须以 ARM 作为目标进行交叉编译。

问题：

1.  是否还有其他 Android 二进制实用程序来源？

2.  是否有任何用于在 Android 上交叉编译二进制实用程序的工具链（可能带有指南）？以及如何处理图书馆问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:54:32.423

使用**BotBrew**！Android 的二进制实用程序 [http://botbrew.com/](http://botbrew.com/) 下载 => [https://play.google.com/store/apps/details?id=com.inportb.botbrew](https://play.google.com/store/apps/details?id=com.inportb.botbrew)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:06:19.753

[Android 开源项目](http://source.android.com/source/downloading.html)拥有重新编译任何二进制文件所需的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T21:00:33.110

[Opkg](http://code.google.com/p/opkg)是一个轻量级的包管理系统。它是用 C 语言编写的，在操作上类似于 apt/dpkg。它旨在用于嵌入式 Linux 设备，并在 OpenEmbedded 和 OpenWrt 项目中以这种方式使用。

上面提到的*botbrew*将它用于包。

# c++ - ADSI 功能有时不工作？

> ID：13225883
> 
> 赞同：1
> 
> 时间：2012-11-05T04:22:42.733
> 
> 标签：c++, windows, winapi, active-directory, adsi

我正在使用 c++ WIN32 API，我有 ADSI 函数

```
 CoInitialize(NULL); 
    LPWSTR pszADsPath=NULL;
    pszADsPath= L"LDAP://CN=hari,CN=Users,DC=jegan,DC=com";
    hr = ADsGetObject(pszADsPath, IID_IADsUser, (void**)&pUser); 
```

有时它工作正常，但大多数时候 hr 给出**`8007054b`**。

如何解决？

# android - 共享偏好 - Android

> ID：13225884
> 
> 赞同：0
> 
> 时间：2012-11-05T04:22:50.610
> 
> 标签：android

> **可能重复：**
> [如何在 android 中使用 getSharedPreferences](https://stackoverflow.com/questions/5950043/how-to-use-getsharedpreferences-in-android)

我是新的 Android 开发者。我对共享偏好有疑问。

Android App 的“SharedPreference”中的数据会保留多长时间？我的要求是为特定用户保留数据，直到他从应用程序注销。如果同一用户或新用户从同一设备或新设备登录，则他/她不应将任何内容存储在先前会话的共享首选项中。

请指导我开发这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:34:48.397

`SharedPreferences`将保留数据，直到您自己清除/覆盖数据或直到用户卸载应用程序或清除应用程序的缓存。

关于您的问题，当用户从应用程序注销时，您可以执行`SharedPreferences.Editor.clear()`后跟 a`commit()`从共享首选项中删除当前用户的所有已保存数据。

更多信息。这里：[SharedPreferences.Editor clear()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#clear%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:40:10.853

您保存在 SharedPreference 中的数据将存储，直到您通过编程方式将其删除（将首选项值更改为 null）.. 或直到您清除应用程序的历史记录或直到卸载应用程序...

# c++ - 指向函数和 std::function 的指针：第一个编译而不是第二个？

> ID：13225885
> 
> 赞同：1
> 
> 时间：2012-11-05T04:22:52.220
> 
> 标签：c++, c++11, functor, std-function

我不熟悉指向函数的指针，我目前正在做一些测试。但是在下面的程序中，我不明白为什么第一个版本可以工作，为什么第二个版本不能编译。什么是正确的语法？

```
#include <iostream>
#include <cmath>
#include <vector>
#include <algorithm>
#include <numeric>
#include <functional>

template<typename Type> 
void display(const std::vector<Type>& v)
{
    if (!v.empty()) {
        for (unsigned int i = 0; i < v.size()-1; ++i)
            std::cout<<v[i]<<" ";
        std::cout<<v[v.size()-1];
    }
}

// Compiles 
template<typename Type> 
void apply1(std::vector<Type>& v, void(f)(Type*, Type*, Type))
{
    f(&*v.begin(), &*v.end(), 0);
}

// Does not compile
template<typename Type> 
void apply2(std::vector<Type>& v, std::function<void(Type*, Type*, Type)> f)
{
    f(&*v.begin(), &*v.end(), 0);
}

int main()
{
    std::vector<double> v = {1., 2., 3., 4., 5., 6.};
    display(v); std::cout<<std::endl;
    apply1(v, std::iota);
    display(v); std::cout<<std::endl;
    apply2(v, std::iota);
    display(v); std::cout<<std::endl;
    return 0;
} 
```

错误如下：

```
error: cannot resolve overloaded function 'iota' based on conversion to type 'std::function<void(double*, double*, double)>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:31:10.047

函数指针提供了我所说的*转换上下文*。它明确说明了哪些重载是指，而`std::function`没有。的构造函数`std::function`接受任何可调用实体，因此不提供上下文来区分意味着哪个重载。另请参阅[此问题](https://stackoverflow.com/q/5931214/500104)。

要手动消除歧义，请转换函数指针

```
apply2(v, static_cast<void(*)(double*,double*,double)>(std::iota)); 
```

或使用命名函数指针

```
void (*iota)(double*, double*, double) = std::iota;
apply2(v, iota); 
```

或使用 lambda

```
apply2(v, [](double* f, double* l, double d){ std::iota(f, l, d); }); 
```

# javascript - 如何调用敲除自定义绑定更新函数

> ID：13225886
> 
> 赞同：5
> 
> 时间：2012-11-05T04:22:57.867
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js。我创建了一个自定义绑定并将其应用于锚标记，如下所示：

```
<a data-bind="custom : { param1 : 'text', param2: 'text' }">delete</a>

ko.bindingHandlers.custom = {
   init: function (element, valueAccessor, allBindingsAccessor) {
      alert("init");
   },
   update: function (element, valueAccessor, allBindingsAccessor) {
      alert("update");
   }
} 
```

当我第一次加载页面时，调用了`init`和`update`函数。但是当我点击删除链接`update`功能时不会调用。每当我点击删除链接时，我想调用我的自定义绑定的更新函数。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:35:02.170

update 函数仅在敲除应用绑定并且任何引用的 observables 发生更改时才被调用。

您的更新函数不引用任何可观察对象，因此在初始调用之后不会再次被调用。

如果你希望你的函数在你点击它时被调用，你应该使用[`click`](http://knockoutjs.com/documentation/click-binding.html)绑定来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:34:47.620

您必须在单击“删除”时调用一个函数，然后在该函数中再次应用绑定。你的问题将得到解决。因为您在第一次加载时具有绑定值，而不是在删除单击时。

```
<a data-bind="custom : { param1 : 'text', param2: 'text' }" 
   onclick='delete()'>delete</a>

<script type=javascript>
    function delete(){ ko.applyBindings(ko.bindingHandlers.custom);}
</script> 
```

# python - Django default=timezone.now() 使用“旧”时间保存记录

> ID：13225890
> 
> 赞同：28
> 
> 时间：2012-11-05T04:23:14.700
> 
> 标签：python, django, django-timezone

这个问题已经断断续续地发生了几个星期，这与我的项目中提出的任何问题都不同。

使用的两个模型有一个时间戳字段，默认设置为`timezone.now()`。

这是引发错误标志的序列：

* * *

*   模型 1 在晚上 7:30 创建

*   模型二是在晚上 10:00 创建的，但在 MySQL 数据库中它存储为晚上 7:30！

创建的每个模型都在晚上 7:30 下保存其时间戳，而不是实际时间，直到经过一定的持续时间。然后设置了一个新时间，以下所有模型都有这个新时间...... Bizzare

* * *

一些可能有助于发现问题的额外细节：

我有很多方法可以用来剥离我的时区，`tzinfo`并用 UTC 替换它们。

这是因为我正在进行`timezone.now() - creationTime`计算以在项目中创建一个：“模型是很久以前发布的”功能。但是，这确实不应该是问题的原因。

我认为使用`datetime.datetime.now()`也不会产生任何影响。

无论如何，感谢您的帮助！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-05T05:23:47.370

上周刚刚遇到了这个领域`default=date.today()`。如果您删除括号（在这种情况下为 try `default=timezone.now`），那么您将一个可调用对象传递给模型，并且每次保存新实例时都会调用它。使用括号，它只在`models.py`加载时被调用一次。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-05T09:54:42.417

只需像这样设置参数`auto_now_add`。

```
timestamp = models.DateTimeField(auto_now_add=True) 
```

更新：

请不要使用`auto_now_add`. 这不是推荐的方式，而是这样做：

```
from django.utils import timezone

timestamp = models.DateTimeField(default=timezone.now) 
```

# java - JSON 到 Java 对象 UTF_8

> ID：13225893
> 
> 赞同：0
> 
> 时间：2012-11-05T04:23:25.213
> 
> 标签：java, json, jackson

我正在使用 Jackson 库将我的 java 对象解析到 json 或从 json 解析。我有一个问题，用“〜”解析文本。喜欢：问题。

我收到了：

```
Quest\u00c3\u00a3o 
```

在我使用之后

```
objectMapper.readValue(json, targetClass); 
```

我的对象 Java 上有这个字符串： QuestÃ£o 。

我如何将这个“Quest\u00c3\u00a3o”转换为这个“Questão”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:43:19.773

```
import java.net.URLDecoder;
String decodeStr = URLDecoder.decode("Quest\u00c3\u00a3o", "utf-8"); 
```

# associations - Rails 关联和 Thinking Sphinx Indexing 重构控制器中的搜索方法

> ID：13225897
> 
> 赞同：1
> 
> 时间：2012-11-05T04:23:47.053
> 
> 标签：associations, ruby-on-rails-3.2, thinking-sphinx, acts-as-taggable-on

我正在使用一个旧数据库，并在如何设置关联和使用 Thinking Sphinx 索引它方面空白。我想索引人员和组的技能。

我有用户。用户可以创建人员和组。人员和组通过 Sharing_Skill 拥有单一技能。

人员和组表：ID 字段、名称字段

shareds_skills 表：ID 字段、Skill_ID 字段、Marker_ID（即 person/group_id）、Marker_Type（“Group”或“Person”）

技能表：ID 字段、名称字段

如何在 Person 模型或 Group 模型中设置 Rails 关联并索引个人或组的技能。

我的主要目标是通过索引人员模型中的人员技能并一起搜索名称、标签和技能来重构我的搜索，而不是搜索技能、共享技能和人员，如下所示：

这是在我的 Person 模型中。

```
class Person < ActiveRecord::Base
  acts_as_taggable
  acts_as_taggable_on :tags

  attr_accessible :name, :tag_list

  validates_presence_of :name

  belongs_to :marker_image, :class_name => "Photo", :foreign_key => "marker_image_id"
  belongs_to :user

  extend FriendlyId
  friendly_id :name, use: [:slugged, :history]

  define_index do
    indexes name
    indexes tag_taggings.tag(:name), :as => :tags
    has :id
    has created_at
  end 
```

这是在我的搜索控制器中

```
#PERSON SEARCH
if params[:marker_type].nil? or params[:marker_type].empty? or params[:marker_type] == "Person"
  #SEARCH NAME, TAGS, (Need to fix skills)
  conditions = {}
  %w(name tags).each do |i|
    i = i.to_sym
    next unless params[i]
    conditions[i] = params[i]
  end

  person = Person.search_for_ids(params[:search], :conditions => conditions, :per_page => 999999)
  if !person.empty?
    person_ids << person
  end

  #SEARCH SKILLS IN PERSON MODEL
  skills = Skill.search_for_ids(params[:search], :per_page => 99999)
  check_skills_available_persons = SharingsSkill.search(:conditions => {:marker_type => 'Person'}, :with => {:skill_id => skills}, :per_page => 99999)
  if !check_skills_available_persons.empty?
    check_people_by_skills = Person.search(:with => {:id => check_skills_available_persons.collect{|x|x.marker_id}})
    if !check_people_by_skills.empty?
      check_people_by_skills.each do |p_skill|
        person_ids << p_skill.id
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:38:49.127

观看了有关关联的“Rails 3 基本培训”一章，并阅读了有关 Active Record 关联的 Rails 指南。在我单独搜索名称，标签，技能并连续收集ID之前。使用适当的多态关联，您可以在单个搜索方法中搜索所有参数。

人物模型。

```
has_one :sharing_skill, :as => :marker, :conditions => ['marker_type = ?', 'Person']
has_one :skill, :through => :sharing_skill

define_index do
  indexes name
  indexes tag_taggings.tag(:name), :as => :tags
  indexes skill(:name), :as => :skill
  has :id
  has created_at
end 
```

组模型。

```
has_one :sharing_skill, :as => :marker, :conditions => ['marker_type = ?', 'Group']
has_one :skill, :through => :sharing_skill

define_index do
  indexes name
  indexes tag_taggings.tag(:name), :as => :tags
  indexes skill(:name), :as => :skill
  has :id
  has created_at
end 
```

分享技能模型

```
belongs_to :marker, :polymorphic => true
belongs_to :skill 
```

技能模型。

```
has_one :sharing_skill
has_one :person, :through => :sharing_skill, :source => :marker
has_one :group, :through => :sharing_skill, :source => :marker 
```

搜索控制器。

```
#SEARCH NAME, TAGS, AND SKILL
conditions = {}
%w(name tags skill).each do |i|
  i = i.to_sym
  next unless params[i]
  conditions[i] = params[i]
end

person = Person.search(params[:search], :conditions => conditions, :per_page => 999999) 
```

# actionscript-3 - 如何在其中心旋转动作脚本中的精灵

> ID：13225900
> 
> 赞同：0
> 
> 时间：2012-11-05T04:24:45.963
> 
> 标签：actionscript-3, flash, flash-cs6

好的，所以我读了很多关于这方面的东西，而且它变得重复了，但没有一个能解决我的问题，或者它对我来说太难理解了。我试图让一个男人的精灵，从上到下看着他，盯着鼠标在页面中的任何位置。然而，他并没有在符号中心旋转他的头部，而是在他的精灵的左上角旋转。有什么帮助吗？

```
stage.addEventListener("mouseMove", eyesFollow);

function eyesFollow(e:MouseEvent):void {
     var a = mouseY - man_walking.y;
     var b = mouseX - man_walking.x;
     var radians = Math.atan2(a,b);
     var degrees = ((180/Math.PI)*radians)+90;
     man_walking.rotation = (degrees);
} 
```

注意：最适合我的一个帖子有一个解决方案，它只是一个断开的链接，所以我无法访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:10:57.210

在 Flash Pro 中，您可以简单地定位符号，使*0,0*坐标是您希望旋转的点：

![注册点](../Images/adf9e8d4a6b96b56168314b128757856.png)

[Yahoo Astra](http://developer.yahoo.com/flash/astra-flash/)有一个[动态注册](http://developer.yahoo.com/flash/astra-flash/classreference/com/yahoo/astra/utils/DynamicRegistration.html)类，用于围绕一个点旋转。

这可以实现如下，围绕*100,100*旋转：

```
DynamicRegistration.rotate(man_walking, new Point(100, 100), degrees); 
```

Yahoo Astra DynamicRegistration 类：

```
/*
Copyright (c) 2008 Yahoo! Inc.  All rights reserved.  
The copyrights embodied in the content of this file are licensed under the BSD (revised) open source license
*/
package com.yahoo.astra.utils
{
        import flash.geom.Point;
        import flash.display.DisplayObject;

        /**
         * Allows you to manipulate display objects based on a registration point other
         * than the standard (0,0).
         * 
         * @author Josh Tynjala
         */
        public class DynamicRegistration
        {
                /**
                 * Moves a <code>DisplayObject</code> to a new position (x,y) based on a registration point. The
                 * true position of the object will be (x - registration.x, y - registration.y).
                 * 
                 * @param       target                          the DisplayObject to move
                 * @param       registration            the registration point of the DisplayObject
                 * @param       x                                       the new x position, in pixels
                 * @param       y                                       the new y position, in pixels
                 */
                public static function move(target:DisplayObject, registration:Point, x:Number = 0, y:Number = 0):void
                {
                        //generate the location of the registration point in the parent
                        registration = target.localToGlobal(registration);
                        registration = target.parent.globalToLocal(registration);

                        //move the target and offset by the registration point
                        target.x += x - registration.x;
                        target.y += y - registration.y;
                }

                /**
                 * Rotates a <code>DisplayObject</code> based on a registration point. 
                 * 
                 * @param       target                          the DisplayObject to move
                 * @param       registration            the registration point of the DisplayObject
                 * @param       rotation                        the new rotation angle
                 */
                public static function rotate(target:DisplayObject, registration:Point, degrees:Number = 0):void
                {
                        changePropertyOnRegistrationPoint(target, registration, "rotation", degrees);
                }

                /**
                 * Scales a <code>DisplayObject</code> based on a registration point. 
                 * 
                 * @param       target                          the DisplayObject to move
                 * @param       registration            the registration point of the DisplayObject
                 * @param       scaleX                          the new x scaling factor
                 * @param       scaleY                          the new y scaling factor
                 */
                public static function scale(target:DisplayObject, registration:Point, scaleX:Number = 0, scaleY:Number = 0):void
                {
                        changePropertyOnRegistrationPoint(target, registration, "scaleX", scaleX);
                        changePropertyOnRegistrationPoint(target, registration, "scaleY", scaleY);
                }

                /**
                 * @private
                 * Alters an arbitary property based on the registration point.
                 * 
                 * @param       target                          the DisplayObject to move
                 * @param       registration            the registration point of the DisplayObject
                 * @param       propertyName            the property to change
                 * @param       value                           the new value of the property to change
                 */
                private static function changePropertyOnRegistrationPoint(target:DisplayObject, registration:Point, propertyName:String, value:Number):void
                {
                        //generate the location of the registration point in the parent
                        var a:Point = registration.clone();
                        a = target.localToGlobal(a);
                        a = target.parent.globalToLocal(a);

                        target[propertyName] = value;

                        //after the property change, regenerate the location of the registration
                        //point in the parent
                        var b:Point = registration.clone();
                        b = target.localToGlobal(b);
                        b = target.parent.globalToLocal(b);

                        //move the target based on the difference to make it appear the change
                        //happened based on the registration point
                        target.x -= b.x - a.x;
                        target.y -= b.y - a.y;
                }

        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:59:09.097

假设精灵的 (x, y) 位置在左上角，高级 Lua-ish 伪代码（*抱歉，我不太熟悉 Actionscript*）中的一般过程将是：

```
function rotate()
  -- ...find how much you want to rotate...

  -- Translate the middle point to (0, 0)
  man.translate(-(man.x + man.width/2), -(man.y + man.height/2))

  -- Rotate it there.
  man.rotate(someTranslation)

  -- Lastly, move it back to where it was
  man.translate((man.x + man.width/2), (man.y + man.height/2))

end 
```

如果您的图书馆使用不同的计算位置和原点的方法，您需要调整需要翻译的数量，但要点仍然存在：首先翻译图像，使其中间位于 (0,0 )，旋转它，然后将其移回。

我希望这有帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:59:55.473

尝试这个？

```
stage.addEventListener("mouseMove", eyesFollow);
var cw:Number = man_walking.width/2,
            ch:Number = man_walking.height/2;

function eyesFollow(e:MouseEvent):void {
    var a = mouseY - man_walking.y;
    var b = mouseX - man_walking.x;
    var radians = Math.atan2(a,b);
    var degrees = ((180/Math.PI)*radians)+90;
    var A:Point=man_walking.parent.globalToLocal(man_walking.localToGlobal(new Point(cw,ch)));
    man_walking.rotation = (degrees);
    var B:Point=man_walking.parent.globalToLocal(man_walking.localToGlobal(new Point(cw,ch)));
    man_walking.y+=A.y - B.y;
    man_walking.x+=A.x - B.x;
} 
```

# mysql - 获取字段总和

> ID：13225902
> 
> 赞同：3
> 
> 时间：2012-11-05T04:24:56.210
> 
> 标签：mysql, sql, datetime-generation

> **可能重复：**
> [过去 7 天的 MySQL 计数数据](https://stackoverflow.com/questions/3954200/mysql-count-data-for-last-7-days)

我有一个问题，我需要显示字段的总和。假设我有一个记录集如下，

```
detectDate      |isp    |infection  | count
--------------------------------------
2012-10-02 01:00|aaaa   |malware    |3
2012-10-02 01:30|bbbb   |malware    |2
2012-10-02 01:33|bbbb   |spy-eye    |2
2012-10-02 01:45|aaaa   |DDos       |1
2012-10-03 01:50|cccc   |malware    |2
2012-10-03 02:00|dddd   |TDSS       |2
2012-10-03 04:50|dddd   |TDSS       |3 
```

我想显示一个输出，它将显示每天所有感染的总和，如下所示，

```
detectDate  |infection  | count
-------------------------------
2012-10-02  |DDos       |1
2012-10-02  |malware    |5
2012-10-02  |spy-eye    |2
2012-10-02  |TDSS       |0
2012-10-03  |DDos       |0
2012-10-03  |malware    |2
2012-10-03  |spy-eye    |0
2012-10-03  |TDSS       |5 
```

我使用了这个查询，

```
SELECT DATE_FORMAT( detectDate, '%Y-%m-%d' ) AS detectDate, infection, SUM( count )
FROM `tbl_correlateddata`
GROUP BY DATE_FORMAT( detectDate, '%Y-%m-%d' ) , infection 
```

但它只给出如下输出，这**不是**我的要求..

```
detectDate  |infection  | count
-------------------------------
2012-10-02  |DDos       |1
2012-10-02  |malware    |5
2012-10-02  |spy-eye    |2
2012-10-03  |malware    |2
2012-10-03  |TDSS       |5 
```

任何帮助都会很有帮助:)非常感谢:)非常感谢:)

**编辑：** 可能重复：[MySQL Count data for last 7 days](https://stackoverflow.com/questions/3954200/mysql-count-data-for-last-7-days)

**但不相似**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T04:34:46.580

```
SELECT e.*, COALESCE(SUM(d.`count`),0) `SUM of count`
FROM
(
  SELECT c.detectDate, a.infection
  FROM
    (
      SELECT  DISTINCT infection
      FROM    tbl_correlateddata
    ) a CROSS JOIN
    (
      SELECT  DISTINCT DATE(detectDate) detectDate 
      FROM    tbl_correlateddata 
    ) c
) e LEFT JOIN tbl_correlateddata d
    ON  DATE(d.detectDate) = e.detectDate AND
        d.infection = e.infection
 GROUP BY detectDate, infection
 ORDER BY e.detectDate, e.infection 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/a229b/20)

或者

```
SELECT  DATE_FORMAT(e.detectDate, '%Y-%m-%d' ), 
        e.infection, 
        COALESCE(SUM(d.`count`),0) `SUM of count`
FROM
(
  SELECT c.detectDate, a.infection
  FROM
    (
      SELECT  DISTINCT infection
      FROM    tbl_correlateddata
    ) a CROSS JOIN
    (
      SELECT  DISTINCT DATE(detectDate) detectDate 
      FROM    tbl_correlateddata 
    ) c
) e LEFT JOIN tbl_correlateddata d
    ON  DATE(d.detectDate) = e.detectDate AND
        d.infection = e.infection
 GROUP BY e.detectDate, e.infection
 ORDER BY e.detectDate, e.infection 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/a229b/25)

# wpf - 绑定值被重置为空字符串

> ID：13225904
> 
> 赞同：0
> 
> 时间：2012-11-05T04:25:29.643
> 
> 标签：wpf, mvvm, binding

对于我的 WPF 应用程序，我创建了几个`UserControls`，每个都有自己的**ViewModel**。*ViewModel*都是基于一个包含`PageViewModelBase`变量“ **_context** ”的。

`UserControls`它们在具有自己的 WizardViewModel 的向导对话框中显示为**页面**。*WizardViewModel*具有`_masterContext`通过其构造函数传递给各个子 ViewModel 的变量。例如，

```
Child1ViewModel vm = new Child1ViewModel(_masterContext); 
```

和 Child1ViewModel 的构造函数：

```
public Child1ViewModel(Context context) : base(context) 
```

和 PageViewModelBase ：

```
protected PageViewModelBase(Context context)
{
    _context = context;
} 
```

我的意图是**只有 1 个 _masterContext**，可以通过每个 ChildViewModel 访问。每个子视图都可以绑定到 this 并为主上下文中的各个字段提供值。

但是，我遇到的问题是，`TextBox.Text`每当我从 childView1 切换到 childView2 时，我绑定的字段就会重置为“”。我不确定这是由于我的 MMI 代码，还是应用程序中有超过 1 个 _masterContext 实例，即我上面的方法没有按应有的方式执行。

**这可能是什么原因造成的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:36:13.260

设法找到重置值的罪魁祸首。我实现了一个行为来处理 TextBox 的 TextChanged 事件。不知何故，与 Binding 结合使用会导致值被重置。一旦我把它拿走，绑定工作正常。

由于我的知识有限，我无法解释原因。但感谢大家的时间。

# java - Java：替换字符串的最后一个字符和字符串的第一个字符

> ID：13225910
> 
> 赞同：1
> 
> 时间：2012-11-05T04:25:57.970
> 
> 标签：java

我想手动添加两个 java JSON 字符串，所以为此我需要删除**“}”**并将其替换为第一个 JSON 字符串的逗号**“，”**并删除第二个 JSON 字符串的第一个**“{”**。这是我的程序

```
import java.util.Map;
import org.codehaus.jackson.type.TypeReference;
public class Hi {
    private static JsonHelper jsonHelper = JsonHelper.getInstance();
    public static void main(String[] args) throws Exception {

        Map<String, Tracker> allCusts = null;

String A = "{\"user5\":{\"Iden\":4,\"Num\":1},\"user2\":{\"Iden\":5,\"Num\":1}}";

String B = "{\"user1\":{\"Iden\":4,\"Num\":1},\"user3\":{\"Iden\":6,\"Num\":1},\"user2\":{\"Iden\":5,\"Num\":1}}";

        String totalString = A + B;
        if (null != totalString) {
            allCusts = (Map<String, Tracker>) jsonHelper.toObject(
                    totalString, new TypeReference<Map<String, Tracker>>() {
                    });

        }
        System.out.println(allCusts);
    }
} 
```

当添加两个字符串 A + B

我想删除 A 中 "}" 的最后一个字符并将其替换为 "," 并删除 B 中 "{" 的第一个字符。

所以这应该看起来像。

```
String A = "{\"user5\":{\"Iden\":4,\"Num\":1},\"user2\":{\"Iden\":5,\"Num\":1},";

String B = "\"user1\":{\"Iden\":4,\"Num\":1},\"user3\":{\"Iden\":6,\"Num\":1},\"user2\":{\"Iden\":5,\"Num\":1}}"; 
```

我试过了

```
String  Astr = A.replace(A.substring(A.length()-1), ",");
String  Bstr = B.replaceFirst("{", "");

String totalString =  Astr + Bstr ; 
```

有了这个，我得到了

线程“主”java.util.regex.PatternSyntaxException 中的异常：非法重复

请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:32:32.370

`{`是正则表达式的控制字符，并且由于[`replaceFirst`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)将正则表达式的字符串表示形式作为其第一个参数，因此您需要转义它，`{`因此它不会被视为控制字符：

```
String  Bstr = B.replaceFirst("\\{", ""); 
```

* * *

我想说的是，在这里使用替换方法真的是大材小用，因为你只是想从字符串的任一端切掉一个字符。这也应该起作用：

```
String totalString = A.substring(0, A.length()-1) + "," + B.substring(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:43:06.093

当然，正则表达式看起来不是一个很好的工具。但以下似乎有效：

```
String str = "{..{...}..}}";
str = str.replaceFirst("\\{", "");
str = str.replaceFirst("}$", ","); 
System.out.println(str); 
```

**输出**：

> ..{...}..},

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:40:47.577

你的前两个陈述中的一些问题。在方法中添加`0`为起始索引`substring`并离开。将`\\`作为转义字符放入匹配模式中，并将`,`第二个语句中的 ut a 作为替换值。

```
String  Astr = A.substring(0, A.length()-1);//truncate the ending `}`
String  Bstr = B.replaceFirst("\\{", ",");//replaces first '{` with a ','
String totalString =  Astr + Bstr ; 
```

**请注意：**有更好的方法，但我只是想纠正您的陈述。

# jquery - jquery一次选择多个div

> ID：13225912
> 
> 赞同：-3
> 
> 时间：2012-11-05T04:26:10.240
> 
> 标签：jquery

```
<div class="user_clicked" id="2"></div>
<div class="user_clicked" id="3"></div>
<div class="user_clicked" id="4"></div> 
```

正如你所看到的，所有的 div 都有相同的类和不同的 id..

我的要求是用户可以一次选择多个 div 以获得结果。如何在 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:27:36.210

你可以这样做

```
 $(".user_clicked") 
```

它将选择所有具有类的 div`user_clicked`

你也选择多个喜欢

```
$('selector1, selector2, selectorN') 
```

如果你想选择不同的选择器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T04:30:20.770

您可以选择每个的公共属性，例如`$('.user_clicked')`，或者如果您只想选择 ID 1 和 2 `$('#div1, #div2')`（您不能以数字开头的 HTML 名称或 ID，因此在本示例中为`id="div1"`and `id="div2"`）

如果您想遍历它们，可以使用`each()`：

```
$('.user_clicked').each(function(){ }); // select all with class user_clicked
$('#div1, #div2').each(function(){ });  // select with IDs div1 and div2 
```

# python - 在 pdb（python 调试器）中，我可以在内置函数上设置断点吗？

> ID：13225913
> 
> 赞同：4
> 
> 时间：2012-11-05T04:26:23.840
> 
> 标签：python, pdb

我想在 set.update() 函数上设置一个断点，但是当我尝试时，我收到一条错误消息。

例子：

```
ss= set()
ss.update('a') 
```

断点：

```
b set.update
b ss.update 
```

错误：

```
The specified object 'ss.update' is not a function
or was not found along sys.path.

The specified object 'set.update' is not a function
or was not found along sys.path. 
```

（请注意，我也尝试在末尾加上括号，例如 ，`b set.update()`但仍然出现错误。我没有打印所有错误排列。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:56:31.940

谢谢！使用@avasal 的回答和[Doug Hellmann 的 pdb 网页](http://www.doughellmann.com/PyMOTW/pdb/#breakpoints)，我想出了这个：

因为我试图捕捉 set.update，所以我不得不编辑 sets.py 文件，但这还不够，因为 python 使用的是内置的 set 类而不是我编辑的那个。所以我覆盖了内置的集合类：

```
import sets
locals()['__builtins__'].set=sets.Set 
```

然后我可以在调试器中设置条件断点：

```
b set.update, iterable=='a' #successful
b set.update, iterable=='b' #won't stop for ss.update('a') 
```

我的整个示例文件如下所示：

```
import pdb
import sets
locals()['__builtins__'].set=sets.Set

pdb.set_trace()
ss = set()
ss.update('a')

print "goodbye cruel world" 
```

然后在调试器提示符下输入：

```
b set.update, iterable=='a' 
```

希望这对其他人也有帮助。

# c++ - 访问适用于 Linux 的 OpenCV-2.4.3 的 OpenCV 图像处理库

> ID：13225918
> 
> 赞同：0
> 
> 时间：2012-11-05T04:27:16.880
> 
> 标签：c++, linux, image-processing, opencv

> **可能重复：**
> [ubuntu 11.10 上的 OpenCV](https://stackoverflow.com/questions/7781302/opencv-on-ubuntu-11-10)

我是 OpenCV 和 Linux 的新用户，所以也许我的问题很明显；如果是这样，我道歉。

我下载了适用于 Linux 的 OpenCV 2.4.3 版，它看起来像是最新版本。我一直在尝试做一些需要图像处理库的教程。这些教程都使用#include "opencv2/imgproc/imgproc.hpp"。

但是，在终端中执行“定位 imgproc.hpp”后，我没有得到任何结果。看起来图像处理库似乎不包含在 OpenCV 版本 2.4.3 中，或者我下载不正确。不过，我似乎拥有所有其他头文件和 hpp 文件。

有没有办法访问图像处理库？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:20:12.527

您必须*安装*OpenCV，只是下载它不会以一种神奇的方式将正确的路径写入您的系统。你使用什么 Linux 发行版？安装这些东西的正确方法是使用包管理器和存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:38:23.097

OpenCV 头文件和库的位置应该可以使用 pkg-config 命令获得。pkg-config --cflags opencv 定位头文件， pkg-config --libs opencv 定位库。你可以直接在你的编译命令中使用它，比如`g++ main.cpp -o main`pkg-config`--cflags --libs opencv`

pkg-config 应该是 btw 反引号``，一旦我找到如何使它们正确显示，我将立即编辑我的答案

# c - printk中的“##”，##是什么意思

> ID：13225921
> 
> 赞同：6
> 
> 时间：2012-11-05T04:27:29.737
> 
> 标签：c, c-preprocessor

```
#define ext4_debug(f, a...)                     \
    do {                                \
        printk(KERN_DEBUG "EXT4-fs DEBUG (%s, %d): %s:",    \
            __FILE__, __LINE__, __func__);          \
        printk(KERN_DEBUG f, ## a);             \
    } while (0) 
```

我不明白的是

```
printk(KERN_DEBUG f, ## a); 
```

有人可以帮我理解这一行中的## 是什么吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:36:15.220

它是可变参数宏（具有多个可变参数的宏）的标记。它的 gcc 特定指令允许 0 个或多个参数作为 in 之后的`f`输入`ext4_debug()`。这意味着，`f`参数是强制性的，`a`可能存在也可能不存在。

`printf(const char *fmt,...)`这与where相同，`fmt`是强制的，其他参数是可选的并且依赖于`fmt`. 请参阅此文档中的最后一条语句：http: [//gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T04:40:06.420

如果您传入 0 个参数，它可以使可变参数宏（可以接受多个参数的宏）工作。

从GCC 手册中的[可变参数宏部分：](http://gcc.gnu.org/onlinedocs/gcc-3.2/cpp/Variadic-Macros.html#Variadic%20Macros)

> 其次，## 标记粘贴运算符放在逗号和变量参数之间时具有特殊含义。如果你写
> 
> ```
> #define eprintf(format, ...) fprintf (stderr, format, ##__VA_ARGS__) 
> ```
> 
> 并且在使用宏时省略了变量参数`eprintf`，那么##之前的逗号将被删除。如果您传递一个空参数，则不会发生这种情况，如果 ## 之前的标记不是逗号，也不会发生这种情况。
> 
> ```
> eprintf ("success!\n")
>      ==> fprintf(stderr, "success!\n"); 
> ```

如果您没有使用它，那么它将扩展为`frpintf(stderr, "success!\n",)`，这是一个语法错误。

# sql - 代理密钥、合成密钥和人工密钥之间有区别吗？

> ID：13225928
> 
> 赞同：31
> 
> 时间：2012-11-05T04:28:23.633
> 
> 标签：sql, oracle, database-design, data-modeling

代理密钥、合成密钥和人工密钥之间有什么区别吗？

我不清楚确切的区别。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-05T09:07:52.197

代理密钥、合成密钥和人工密钥是同义词。技术关键是另一个。它们都表示“没有商业意义的主键”。它们不同于具有超出手头系统含义的自然或业务密钥。

例如，考虑 SO 用户帐户。我们由两个键标识。自然键是我们用来登录该站点的标识符，例如我们的 OpenID 名称。但是因为这些东西是长而笨重的字符串（并且因为 SO 允许我们选择不同的登录选项），数据库通过用户 ID 来识别我们，用户 ID 是一个生成的数字。该用户 ID 是合成/代理/人工密钥。

# c# - 在项目的每种形式中使用图标的最简单方法

> ID：13225933
> 
> 赞同：1
> 
> 时间：2012-11-05T04:28:57.273
> 
> 标签：c#, wpf, winforms, visual-studio, icons

我想让我的`Icon`每个项目都通用。我用谷歌搜索了很多。但解决方案并不像我想要的那么简单。是的，更简单的是. 但我使用过这段代码，我认为它是最简单的。`Form``Visual Studio``Inherit` `Form1`

```
public Form1()
    {
        InitializeComponent();
        Icon icon = new Icon("resources\\icon.ico");
        this.Icon = icon;
    } 
```

在其他形式中，我也做了同样的事情：

```
public Form2()
    {
        InitializeComponent();
        Icon icon = new Icon("resources\\icon.ico");
        this.Icon = icon;
    } 
```

它绝对有效。但我不确定性能并需要帮助。你怎么说，这种方式对我的软件性能有害吗？因为我同时使用相同的图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:44:25.887

您可以在新的图标/图像项目中使用资源文件。

创建一个新项目作为类库，并根据需要将资源文件添加到该项目中。参照新项目访问图标或新项目的任何其他部分。

这样您就可以在以后更改实际文件，并在一个地方完成所有操作。此外，您不需要依赖基于字符串值找到的资源。（我喜欢智能感知和“[依赖编译器](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:32:33.380

在您的 App.xaml 文件中：

```
<Application.Resources>
    <ResourceDictionary>
        <Style x:Key="WindowStyle" TargetType="{x:Type Window}">
            <Setter Property="Icon" Value="myIconFile.ico" />
        </Style>
    </ResourceDictionary>
</Application.Resources> 
```

# operating-system - 操作系统内部究竟发生了什么导致分段错误

> ID：13225936
> 
> 赞同：1
> 
> 时间：2012-11-05T04:29:15.503
> 
> 标签：operating-system, segmentation-fault

我已经阅读了很多关于虚拟地址和分页的内容。让我先告诉大家我的理解。当一个进程想要执行某事时，它会尝试将数据从硬盘加载到内存中。为此，它使用虚拟地址。所以我们的 MMU 验证虚拟地址查找 TLB 以找到相应的物理页面，如果它没有找到它会查找 Inverted Page Table，如果它没有找到那里的条目，最后它会查找页表它会产生页面错误，并且所有页面交换都已完成，并且所有表都将被更新。当我阅读时，所有进程都有不同的页表和相同的虚拟地址。因此，如果我尝试访问定义为 int a[100] 的数组元素 a[1000]，我确信会出现分段错误，因为该指令可能正在尝试访问不属于它的内存。但是操作系统如何通过仅使用虚拟地址和物理页面的概念来知道 a[1000] 不属于正在运行的进程。我在这里遗漏了什么还是我的整个理解都是错误的？

我知道如果进程试图访问只读或支持真正的内存段，我们可以说内存访问是非法的。

最后，沸腾的问题是操作系统如何决定将哪些内存分配给哪个进程以及它如何决定这种内存访问是非法的。

[Linux 上的分段错误是什么？](https://stackoverflow.com/questions/3200526/what-is-a-segmentation-fault)

这个链接没有太大帮助。

非常感谢你们所有可爱的人的投入:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:25:04.383

On x86, linux uses a combination of segmentation and paging, so the address generated by program first looks up for the corresponding segments base and limit registers values. This gives the virtual address which is then translated using the page table. When you try to access a memory which has not been allocated, the accessed page is beyond what the limit register allows, hence generating a segmentation fault.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:45:27.137

实际上，Linux内核中的每个进程都有一些定义明确的结构，称为task_struct，它存储有关相应进程的所有信息，如其父进程、PID、子进程、地址空间、挂起的信号、与之关联的线程等. 现在地址空间条目在执行进程时告诉内核该进程的合法地址空间。每个进程从一开始就由内核分配给它自己的地址空间。因此，当一个正在执行的进程试图访问其合法内存之外的空间时，就会产生一个错误（称为分段错误`Unix/Linux`），并通过内核向它发出信号来终止该进程。它对于在操作系统中实现内存保护很重要。

# c++ - C++ error: was not declared in this scope with private after public

> ID：13225937
> 
> 赞同：5
> 
> 时间：2012-11-05T04:29:49.357
> 
> 标签：c++, gcc, c++11, gcc4.7

Attempting to modify the code from [this page](http://kbokonseriousstuff.blogspot.com/2011/09/using-reverse-iterators-with-c11-range.html).

Here's the problem code:

```
#include <iostream>
#include <array>

template<class T>
class const_reverse_wrapper
{
public:
    const_reverse_wrapper (const T& cont)
        : container_(cont)
    {
    }

    decltype( container_.rbegin() ) begin() const
    {
        return container_.rbegin();
    }

    decltype( container_.rend() ) end()
    {
        return container_.rend();
    }

private:
    const T & container_;
};

template<class T>
class reverse_wrapper
{
public:
    reverse_wrapper (T & cont)
        : container_(cont)
    {
    }

    decltype( container_.rbegin() ) begin()
    {
        return container_.rbegin();
    }

    decltype( container_.rend() ) end()
    {
        return container_.rend();
    }
private:
    T & container_;
};

template<class T>
const_reverse_wrapper<T> reversed (const T & cont)
{
    return const_reverse_wrapper<T>(cont);
}

template<class T>
reverse_wrapper<T> reverse (T & cont)
{
    return reverse_wrapper<T>(cont);
}

int main (int argc, char * argv[])
{
    std::array<int,4> a = { 1, 2, 3, 4 };
    for (int i : a)
        std::cout << i;
    return 0;
} 
```

When I compile it, I get these errors:

```
> g++ -std=c++0x test2.cpp
test2.cpp:13:15: error: 'container_' was not declared in this scope
test2.cpp:13:15: error: 'container_' was not declared in this scope
test2.cpp:18:15: error: 'container_' was not declared in this scope
test2.cpp:18:15: error: 'container_' was not declared in this scope
test2.cpp:36:15: error: 'container_' was not declared in this scope
test2.cpp:36:15: error: 'container_' was not declared in this scope
test2.cpp:41:15: error: 'container_' was not declared in this scope
test2.cpp:41:15: error: 'container_' was not declared in this scope 
```

When I move the private sections before the public sections in each class, the errors go away.

```
template<class T>
class const_reverse_wrapper
{
private:                    // <-----
    const T & container_;   // <-----
public:
    const_reverse_wrapper (const T& cont)
        : container_(cont)
    {
    }

    decltype( container_.rbegin() ) begin() const
    {
        return container_.rbegin();
    }

    decltype( container_.rend() ) end()
    {
        return container_.rend();
    }
};

template<class T>
class reverse_wrapper
{
private:              // <-----
    T & container_;   // <-----
public:
    reverse_wrapper (T & cont)
        : container_(cont)
    {
    }

    decltype( container_.rbegin() ) begin()
    {
        return container_.rbegin();
    }

    decltype( container_.rend() ) end()
    {
        return container_.rend();
    }
}; 
```

I've tried compiling with MinGW GCC 4.6.2 and 4.7.0 and get the same results. Is this a bug, or is there something else going on?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:49:48.820

You had the same problem before C++11:

```
struct X{
  Foo f(){ return 42; } // error: 'Foo' does not name a type

  typedef int Foo;
}; 
```

The reason for this is that only the *body* of a member function is treated as if it was defined out-of-class with regards to member availability.

`§9.2 [class.mem] p2`

> A class is considered a completely-defined object type (3.9) (or complete type) at the closing `}` of the *class-specifier*. **Within the class *member-specification*, the class is regarded as complete within function bodies**, default arguments, *exception-specifications*, and *brace-or-equal-initializers* for non-static data members (including such things in nested classes). **Otherwise it is regarded as incomplete within its own class *member-specification*.**

As such, only names previously seen inside of the class *member-specification* (as the standard calls it) can be used.

I see two possible fixes, one for your specific use-case and a general one. For your specific case, just use `typename T::const_reverse_iterator`. For the general case, use `std::declval` to obtain an object of a certain type for `decltype` and call the method on that:

```
#include <functional>

decltype(std::declval<T const&>().rbegin()) rbegin() const{ ... } 
```

# android - Android在哪里保存属性

> ID：13225941
> 
> 赞同：5
> 
> 时间：2012-11-05T04:30:07.223
> 
> 标签：android

Android在哪里保存`getprop`和使用的属性`setprop`？

当我们使用`setprop`设置属性时会发生什么？它是写入持久文件、临时文件还是仅在内存中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T04:58:41.610

您可以使用共享首选项保存项目属性

```
//To save settings
SharedPreferences settings = getSharedPreferences("FileName", Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putString("username","hello");
editor.putString("password", "123456");
editor.commit();

//To get Settings
settings.getString("username","");
settings.getString("password",""); 
```

或者您可以使用[应用程序对象](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android#)来保存设置

这些文件作为 XML 文件保存在其他应用程序无法访问的应用程序数据存储中

***编辑***

属性系统是android上的一个重要功能。它作为服务运行并管理系统配置和状态。所有这些配置和状态都是属性。属性是一个键/值对，两者都是字符串类型。从功能上看，它与windows注册表非常相似。许多 android 应用程序和库直接或间接依赖此功能来确定其运行时行为。例如，adbd 进程查询属性服务以检查它是否在模拟器中运行。

属性系统如何工作 属性系统的高级架构如下所示。 ![在此处输入图像描述](../Images/5981b2f77a5b107cb455af1d8066db8d.png)

大多数值都是键值对，所以必须是 XML。更多细节可以在[这里找到](http://rxwen.blogspot.in/2010/01/android-property-system.html)

# actionscript-3 - as3 文本字段占位符

> ID：13225942
> 
> 赞同：3
> 
> 时间：2012-11-05T04:30:14.540
> 
> 标签：actionscript-3

我对 as3 上的文本字段占位符有一个简短的问题。

所有现代浏览器或移动应用程序都支持文本输入字段的占位符。单击它后，焦点将移至文本的开头，并且占位符将一直保留，直到您开始键入为止。

只是想知道这是否可以在 as3 上归档？

干杯比尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:51:40.900

当然可以，但是您需要手动对该 TextField 进行操作。一般的例程是这样的：有一个 TextField 后代类，它将有一个保存占位符文本的字段。

一个例子：

```
public class PlaceholderTF extends TextField
{
    private var placeholderText:String;
    private var currentText:String;

    public function PlaceholderTF(prompt:String="Input text here") {
        super(); // making a correct TextField out of ourselves
        placeholderText = prompt;
        currentText = "";
        AWUTA = false;
        text = "";
    }

    public override function set text(value:String):void {
        if (currentText != value) {
            currentText = value;

            // calling built-in setter to correctly update text
            if (currentText == null || currentText == "") {
                super.text = placeholderText;
            } else {
                super.text = currentText;
            }
        }
    }
} 
```

这个解决方案非常粗糙，但可能会奏效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:47:09.303

```
var placeholder_text:String = "Search";

myTextField.addEventListener(FocusEvent.FOCUS_IN,  focusIn);
myTextField.addEventListener(FocusEvent.FOCUS_OUT, focusOut);

// fire when click to edit
function focusIn(event:Event):void
{
    if(myTextField.text == placeholder_text)
    {
        myTextField.text = ""; 
    }
 }

// fire when you clicked out
function focusOut(event:Event):void
{

    if(myTextField.text == "")
    {
        myTextField.text = placeholder_text; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T05:28:04.900

Here is an example that works for me with form validation:

```
package components {
import flash.events.Event;
import flash.events.FocusEvent;
import flash.text.TextField;

public class TextFieldPlaceholder extends TextField {

    private var _placeholderText:String;
    private var _currentText:String;

    public function TextFieldPlaceholder(placeholderText:String = 'Input text here') {
        _placeholderText = placeholderText;
        _currentText = '';
        this.addEventListener(FocusEvent.FOCUS_OUT, onFocusOut);
        this.addEventListener(FocusEvent.FOCUS_IN, onFocusIn);
        super();
    }

    override public function get text():String {
        if (_currentText == _placeholderText) {
            return '';
        }
        return _currentText;
    }

    override public function set text(value:String):void {
        _currentText = value;
        if (!_currentText) {
            super.text = _placeholderText;
        } else {
            super.text = _currentText;
        }
    }

    private function onFocusIn(e:Event):void {
        super.text = _currentText;
    }

    private function onFocusOut(e:Event):void {
        this.text = super.text;
    }
  }
} 
```

# jqgrid - jqgrid 排序：我必须在 jqgrid 列中按日期排序

> ID：13225946
> 
> 赞同：0
> 
> 时间：2012-11-05T04:30:30.827
> 
> 标签：jqgrid

我有一个列名：`Date`

我有一个 jqgrid 代码：

```
{
name:'a.INC_DATE', 
index:'a.INC_DATE',
width: 100,
searchoptions: {
    sopt: ['eq', 'ne','cn']
} 
```

我从这个数据库索引中获取列日期的值。

我已经在我的代码中放置了排序顺序：

```
pager: '#pager',
rowNum: 500,
rowList:[500,100,20],
sortname: 'a.INC_DATE',
sortorder: 'desc',
viewrecords: true,
sortable: true,
height: 400,
width: 800, 
shrinkToFit: false, 
```

我没有得到排序功能。

所以点击表格中的列标题，我需要获取排序值。

我正在等待你的好回答..,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:58:14.940

我不建议您在`name`jqGrid 的属性中使用点等特殊字符。此外，您也应该避免使用特殊字符`index`。通常，您可以使用`index:'a.INC_DATE'`但仅在*远程* `datatype`值的情况下：`"json"`或`"xml"`. `index`顺便说一句，在jqGrid`name`的使用属性的情况下，您不能使用不同的值。`loadonce: true`

此外，重要的是要了解您使用`datatype: "json"`或`datatype: "xml"` *不* `loadonce: true`使用它，您可以自由`index`选择`colModel`. jqGrid 只是将`index`属性的值作为`sidx`参数的值发送给服务器，但在这种情况下*服务器代码*负责 jqGrid 的排序。因此，如果排序工作不正确，则您已检查服务器代码是否存在问题。

# javascript - 骨干集合不会在重置时为空

> ID：13225953
> 
> 赞同：1
> 
> 时间：2012-11-05T04:31:16.957
> 
> 标签：javascript, backbone.js, backbone.js-collections

我有一个日历日模型，并且在每个日历日，我都有一系列事件。

如果当天有事件，集合刷新，没问题，我展示新事件。但是，如果当天没有事件，则集合不会被清空，并且集合仍会显示最后一个模型当天的事件（如果用户去第二天，则为前一天）。

我已经在模型的获取成功中创建了集合，因此它不应该是异步问题。

我的模型是

```
Myapp.Models.CalDay = Backbone.Model.extend({
    网址：'日历'，
    初始化：函数（）{

        this.get_cal();
        },
    get_cal：函数（）{

        //日历不存在，所以第一次通过，
            Myapp.CurrentCal = 这个；
            Myapp.cal.set({'date': new Date(),'draw_slider': true,'put_date':'today'});
            Myapp.CurrentCal.Events = new Myapp.Collections.DayEvents();
            this.bind('change:date',this.fetch_cal);
            this.fetch_cal();
        }

        Myapp.CurrentCal.bind("fetched",this.get_view);
    },

    fetch_cal：函数（）{

        console.log(Myapp.CurrentCal.Events);

        Myapp.Calendar.fetch({
        成功：功能（响应）{

            Myapp.CurrentCal.Events.reset(response.attributes.calendar_events);
            Myapp.CurrentCal.trigger("fetched");
                },
          错误：函数（）{
              alert('获取日历出错');
            }
        });

    },
    获取视图：函数（）{
          console.log(Myapp.CurrentCal.Events);
          新的 Myapp.Views.CalendarDay();

    }
});

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:49:11.800

您需要`remove()`在渲染接下来的几天事件之前（好吧，我建议之前）调用您的视图。

如果您*使用*事件呈现新的一天，这不会导致您出现问题，因为视图的容器正在被这些事件覆盖。但是，如果第二天包含*零*个新事件，则不会写入任何内容，因此您仍然会显示前几天的事件。

考虑为您的视图创建一个关闭方法，并在视图上执行该`remove()`函数的同时清理您与该视图关联的任何绑定。

我一直在`config/backone.coffee`为我的主干应用程序创建一个并创建一个`close()`函数来完成此操作：

```
class Backbone.View extends Backbone.View
  close: ->
    @beforeClose() if @beforeClose?
    @remove()
    @unbind(null,null,this) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:14:02.850

正如[文档](http://backbonejs.org/#Collection-reset)所说，`reset`在不传递任何模型作为参数的情况下调用将是空`collection`的。因此，对于所有不需要调用的`days`地方，无需将模型作为参数传递或从服务器返回空数组，如您所说。`events``reset`

和/或者您可以在回调中检查响应`success`并根据条件调用

```
Myapp.CurrentCal.Events.reset(response.attributes.calendar_events); 
```

或者

```
Myapp.CurrentCal.Events.reset(); 
```

# jquery - 使用 InsertAfter 移动元素，但仅将其插入元素的父级？

> ID：13225956
> 
> 赞同：0
> 
> 时间：2012-11-05T04:31:54.380
> 
> 标签：jquery

我做了以下事情：

```
 jQuery('.businessdirectory-category .wpbdp-rating-info').insertAfter('.businessdirectory-category .title'); 
```

`.wpbdp-rating-info`后移动`.title`。但是`.wpbdp-rating-info`页面中有 3 个，所以现在每个`.businessdirectory-category`有 3 个`.wpbdp-rating-info`

我该怎么做才能让每个`.businessdirectory-category`人都有自己的 .wpbdp-rating-info `appended to its own`.title`？

编辑：

![在此处输入图像描述](../Images/b4ae7eee831ec607714f56e5c0635647.png)

我把它改成这样：

```
 jQuery('.wpbdp-listing-excerpt .wpbdp-rating-info').each(function () {
    var $this = jQuery(this);
    $this.insertAfter($this.closest('.wpbdp-listing-excerpt').find('.title'));
  }); 
```

但也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:34:46.223

您可以遍历匹配的集合并单独移动每个元素：

```
jQuery('.businessdirectory-category .wpbdp-rating-info').each(function () {
    var $this = jQuery(this);
    $this.insertAfter($this.closest('.businessdirectory-category').find('.title'));
}); 
```

您也许可以将参数简化为`insertAfter`，但您需要发布您的标记让我确定。此示例假定`.title`元素不是 的兄弟姐妹或祖先`.businessdirectory-category`。

这是一个[工作示例](http://jsfiddle.net/jamesallardice/Asuyy/)。

# php - 使用 PHP 在 Web 服务器上打开文件

> ID：13225959
> 
> 赞同：1
> 
> 时间：2012-11-05T04:32:15.207
> 
> 标签：php, linux, lamp

我是网络开发的新手。我在 Ubuntu 12 上安装了 LAMP。我在 LAMP 服务器上运行了一个 php 文件“register.php”，它从 html 表单接收数据，然后将其保存在服务器上的临时文件中。我正在使用下面的代码。它似乎不起作用。我已经检查过它是否需要访问和权限才能执行代码，但它仍然无法创建“temp.c”

```
$temp=fopen("temp.c","w");
$line = fgets($temp)
fclose($temp); 
```

附加说明：- 我能够从表单字段接收其他数据，但仅创建文件不起作用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:39:18.380

在 fgets 函数之后加上分号

```
$temp=fopen("temp.c","w");
$line = fgets($temp);
fclose($temp);

```

我按照我在本地服务器上验证的方式工作......

我对您的建议是使用 NETBEANS IDE 进行 PHP 开发，因为它会在您编写代码时自动显示语法错误.....

要在文件中插入表单数据，请使用以下代码

```
    $entry=$_POST["myvar"];
    $file="temp.c";
    $open=fopen($file,"a");

    如果（$打开）{        
      fwrite($open,$entry);
        fclose($打开);
    }

```

**'a'** in fopen($file,"a") 只为写入而打开；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

**'a+'** in fopen($file,"a+") 打开读写；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

**'w'** in fopen($file,"a+") 只为写入而打开；将文件指针放在文件的开头并 ==>**将文件截断为零长度**<==。如果该文件不存在，请尝试创建它。

查阅[此以获取更多信息](http://php.net/manual/en/function.fopen.php)

# java - JTextField 在启动时未显示在 JPanel 中

> ID：13225960
> 
> 赞同：5
> 
> 时间：2012-11-05T04:32:24.260
> 
> 标签：java, swing, jpanel, jtextfield, layout-manager

之所以`JTextField`存在，是因为当我将鼠标移到应该是鼠标图标的位置时，鼠标图标会变为光标，然后当我单击它时会出现。但它在启动时是不可见的。我错过了什么？

```
public class JavaSwingTextfield extends JFrame {
    private static final long serialVersionUID = 1L;

    JTextField myTextField;

    public JavaSwingTextfield(){

        /***** JFrame setup *****/

        // Set the size of the window
        setSize(600,600);

        // Make the application close when the X is clicked on the window
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        // Makes the JFrame visible to the user
        setVisible(true);

        /***** JFrame setup END *****/

        /***** JButton setup *****/

        // Create a JLabel and set its label to "Start"
        myTextField = new JTextField("Start");

        // Set the label's size
        myTextField.setSize(100, 50);

        // Put the label in a certain spot
        myTextField.setLocation(200, 50);

        // Set a font type for the label
        //Font myFont = new Font("Serif", Font.BOLD, 24);
        //myTextField.setFont(myFont);

        // Add the label to the JFrame
        add(myTextField);

        /***** JButton setup END *****/

    }

    /***** The main method *****/
    public static void main(String[] args){ 

        new JavaSwingTextfield();

    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T05:00:44.900

*   用于[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)创建 GUI 组件
*   `setVisible(..)`在将所有组件添加到之前不要调用`JFrame`（这是上面的代码片段实际错误 +1 到 @Clark）
*   不要不必要地扩展`JFrame`课程
*   不要调用`setSize(..)`，而只是`JFrame#pack()`在设置`JFrame`可见之前调用
*   不要调用`setSize()`而是`JTextField`看它的构造函数：[`JTextField(String text,int columns)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#JTextField%28java.lang.String,%20int%29)
*   使用适当`LayoutManager`的 s，请参阅此处以获取一些示例：[布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

这是我制作的一个示例（基本上是您的带有修复的代码）：

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class JavaSwingTextfield {

    private JTextField myTextField;

    public JavaSwingTextfield() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        myTextField = new JTextField("Start");

        // Add the label to the JFrame
        frame.add(myTextField);

        //pack frame to component preferred sizes
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Create UI on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JavaSwingTextfield();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T04:38:42.130

您将 AFTER 添加`JTextfield`到`JFrame` **AFTER**使`JFrame` *可见*。只需添加`JTextField`前手。

# ruby-on-rails - Rails fields_for 里面的 fields_for

> ID：13225965
> 
> 赞同：1
> 
> 时间：2012-11-05T04:32:44.187
> 
> 标签：ruby-on-rails, ruby, forms

我怎样才能实现这样的目标？
结构是=>一个测试有很多问题，一个问题有很多答案。

我有`questions = @test.questions.build`和`questions.answers.build`在控制器中。

```
form_for @test do |f|
  f.fields_for :questions do |question_f|
    question_f.fields_for :answers do |answer_f|
      # answer form here 
```

它一直有效，直到 fields_for :answers。

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:53:57.820

`accepts_nested_attributes_for`如果您想使用嵌套形式，您还应该放入您的测试和问题模型：

```
class Test < ActiveRecord::Base
  attr_accessible :questions_attributes
  has_many :questions, dependent: :destroy
  accepts_nested_attributes_for :questions
end

class Question < ActiveRecord::Base
  attr_accessible :answers_attributes
  has_many :answers, dependent: :destroy
  accepts_nested_attributes_for :answers
end 
```

尝试这个：

```
form_for ([@test, @question]) do |f| 
```

并在控制器中的新操作中：

```
@test = Test.new
@question = Question.new
@test.questions.build
@question.answers.build 
```

# php - 数据通过ios时json_decode返回null

> ID：13225971
> 
> 赞同：0
> 
> 时间：2012-11-05T04:34:43.007
> 
> 标签：php, ios, symfony, json

这个问题非常棘手。当我使用 AFNetworking 通过 IOS 传递 json 数据时。服务器也返回空值。但是，我使用 curl 来测试服务器端，结果是正确的。我不知道这个问题。

这是服务器代码：

```
 $response['return'] = $data;

        if (get_magic_quotes_gpc()) {
            $data = stripslashes($data);
        }

        $response['sssss'] = $data;

        $data = json_decode($data, TRUE);
        $response['return json'] = $data ? $data : 'dddddddd';

        $json_errors = array(
            JSON_ERROR_NONE => 'No error has occurred',
            JSON_ERROR_DEPTH => 'The maximum stack depth has been exceeded',
            JSON_ERROR_CTRL_CHAR => 'Control character error, possibly incorrectly encoded',
            JSON_ERROR_SYNTAX => 'Syntax error',
        );
        $response['json error'] = $json_errors[json_last_error()];

        $response['p'] = $data->name;

        $response['d'] = 'test'; 
```

ios代码：

```
 NSURL *url = [NSURL URLWithString:@"myapi"];
        AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
        [httpClient setDefaultHeader:@"Accept" value:@"application/json"];
        [httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [httpClient setParameterEncoding:AFJSONParameterEncoding];

        NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:dishParameter,@"dish", nil];
        [httpClient postPath:@"dish" parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {

            for (id key in responseObject) {
                NSLog(@"key:%@   value:%@", key, [responseObject objectForKey:key]);
            }

        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
             NSLog(@"error:%@",error);
        }]; 
```

响应说没有语法错误，服务器可以获取盘参数的值。但是当 $data 通过 stripslashes 函数时，$data 变为 null。

任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:52:51.627

`$data`是类型*字符串*吗？为什么要从*JSON*中去除斜杠？你搞砸了语法。不要那样做。 `json_decode`返回 null 因为它是无效的*JSON*格式。

# php - 谷歌地图 API PHP 示例

> ID：13225980
> 
> 赞同：0
> 
> 时间：2012-11-05T04:36:06.737
> 
> 标签：php, xml, google-maps-api-3

我正在使用[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)提供的带有 PHP、MySQL 和 Google 地图示例的创建商店定位器。

我在编写 XML 文档时遇到问题。我可以从 Querious（DB 应用程序）成功运行查询，但是当尝试运行我修改为 mysqli 的提供的脚本时，事情对我不利。我什么也没得到。DB 按照示例中提供的方式设置。这是我使用的修改后的 PHP：

**PHP**

```
<?php
require_once('../includes/connection.php');
require_once('../includes/function.php');

// Get parameters from URL
$center_lat = $_GET["lat"];
$center_lng = $_GET["lng"];
$radius = $_GET["radius"];

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Search the rows in the markers table
$query = sprintf("SELECT address, name, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
  mysqli_real_escape_string($mysqli , $center_lat),
  mysqli_real_escape_string($mysqli , $center_lng),
  mysqli_real_escape_string($mysqli , $center_lat),
  mysqli_real_escape_string($mysqli , $radius));
$result = mysqli_query($mysqli, $query);
$result = mysqli_query($mysqli, $query);
if (!$result) {
  die("Invalid query: " . mysql_error());
}

header("Content-type: text/xml");

// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);
  $newnode->setAttribute("name", $row['name']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("distance", $row['distance']);
}
echo $dom->saveXML()
?> 
```

我知道我的连接都是成功的，并且功能没有错误。感谢您对此的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:40:52.747

我不太确定“无错误”:)

您正在使用与不兼容的`mysql_fetch_assoc()`功能（已弃用的`mysql_*`扩展的一部分） 。`mysqli`在`@`此方法调用之前隐藏了您通常会从作为关联数组的错误数据获取中看到的错误。

如果你想得到一个关联数组`mysqli`，你应该使用：

```
$array = $result->fetch_assoc(); 
```

[http://php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

[http://us3.php.net/manual/en/language.operators.errorcontrol.php](http://us3.php.net/manual/en/language.operators.errorcontrol.php)

# file-upload - primefaces 显示来自数据库的图像

> ID：13225982
> 
> 赞同：3
> 
> 时间：2012-11-05T04:36:15.693
> 
> 标签：file-upload, jsf-2, primefaces, graphicimage

我正在尝试显示客户图像（存储`CustomerMaster.customerPhoto`在 BLOB 对象中）。我正在使用 imageBuilder Bean (RequestScoped) 根据存储`CustomerMaster`在 Customer Bean(ViewScoped) 中可用的内容来构造图像。我在 ImageBuilder 中添加了属性来访问客户 Bean 中的 CustomerMaster 对象。还添加了用于跟踪目的的 sysout 语句。

这是输出

```
09:34:22,817 INFO  [stdout] (http--127.0.0.1-8080-2) getImage - 1
09:34:22,817 INFO  [stdout] (http--127.0.0.1-8080-2) getImage - 3
09:34:22,817 INFO  [stdout] (http--127.0.0.1-8080-2) getImage - 4
09:34:22,817 INFO  [stdout] (http--127.0.0.1-8080-2) getImage - 5PhotoMaster [photoId=1,  contentType=image/gif]    2064
09:34:22,817 INFO  [stdout] (http--127.0.0.1-8080-2) getImage - 6
09:34:22,827 WARNING [javax.enterprise.resource.webcontainer.jsf.context] (http--127.0.0.1-8080-2) JSF1091: No mime type could be found for file dynamiccontent.  To resolve this, add a mime-type mapping to the applications web.xml.
09:34:23,057 SEVERE [org.primefaces.application.PrimeResourceHandler] (http--127.0.0.1-8080-4) Error in streaming dynamic resource. Unable to set property customerBean for managed bean imageBuilderBean 
```

基于 sysout 语句，我可以看到 ImageBuilderBean 能够访问 CustomerMaster 对象并能够创建 DefaultStreamedContent。

**但后来我收到以下严重消息，并且网页上没有显示图像**：

```
09:34:23,057 SEVERE [org.primefaces.application.PrimeResourceHandler] (http--127.0.0.1-8080-4) Error in streaming dynamic resource. Unable to set property customerBean for managed bean imageBuilderBean 
```

如果我*在 CustomerBean 中使用 Session 范围（而不是 ViewScoped），那么一切都是工作文件*。甚至图像也显示在网页上。根据我的理解，从 requestScoped Bean 调用 Viewscoped bean 应该没有任何问题。

我不确定出了什么问题。请帮忙。请参阅代码以供参考。

## ImageBuilder.Java

```
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.io.Serializable;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;

import org.primefaces.model.DefaultStreamedContent;
import org.primefaces.model.StreamedContent;

    @ManagedBean (name="imageBuilderBean")
    @RequestScoped
    public class ImageBuilderBean implements Serializable {

        private static final long serialVersionUID = -480089903900643650L;

        @ManagedProperty(value="#{customerBean}")    
        private CustomerBean customerBean;

        private StreamedContent image;

        public ImageBuilderBean() {
            super();
        }

        @PostConstruct
        void ResetBean(){
            System.out.println("getImage - 1");

            FacesContext context = FacesContext.getCurrentInstance();

            if (context.getRenderResponse()) {
                System.out.println("getImage - 2");
                // So, we're rendering the view. Return a stub StreamedContent so that it will generate right URL.
                image = new DefaultStreamedContent();
            }
            else {
                System.out.println("getImage - 3");

                CustomerMaster custMaster = customerBean.getCustMaster();
                if (custMaster != null){
                    System.out.println("getImage - 4");

                    PhotoMaster photo = custMaster.getCustomerPhoto();
                    if (photo != null) {

                        try {
                            System.out.println("getImage - 5" + photo + "    " + photo.getContent().length());
                            InputStream inputStream = photo.getContent().getBinaryStream();
                            image = new DefaultStreamedContent(inputStream, photo.getContentType());
                            System.out.println("getImage - 6");
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            System.out.println("exception Shirish");
                            e.printStackTrace();
                        }
                    }
                }
            }
        } 
```

## 客户.XHTML

```
<p:column>
    <p:graphicImage id="custImageId" value="#{imageBuilderBean.image}" cache="false" />
</p:column> 
```

## CustomerBean.Java

```
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;

@ManagedBean (name="customerBean")
@ViewScoped
public class CustomerBean implements Serializable {

private static final long serialVersionUID = -3727342589028832013L;
// Setters and Getters 
```

**更新：**

由于graphicImage标签被转换为`<img>`html标签。浏览器生成两个显示图像的请求。生成以下两个网址：

1.  `/proj/views/user/CustomerRegistration.xhtml` - ManagedProperty 注释返回 viewscoped customerBeans。

2.  `/proj/javax.faces.resource/dynamiccontent.xhtml`- 未能返回 customerBean。因此，我们看到“无法为托管 bean imageBuilderBean 设置属性 customerBean”错误消息

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:17:32.733

问题出在 ViewScoped 和 SessionScoped bean 的逻辑上。

在 RequestScoped bean 中，所有请求都由新的 bean 实例
处理。在 SessionScoped bean 中，所有携带相同会话的请求都由同一个实例处理。

ViewScoped bean 是“介于”这两者之间的东西。它创建了“伪会话”，其工作方式类似于会话 bean，但它是以其他方式获取的。它的处理方式与浏览器发送会话信息（例如以 cookie 或以其他方式）的会话范围 bean 中的处理方式不同，但它保存在“网页”本身（在 javaScript 中），因此对于每个由网页发送的 ajax 请求它添加它自己的“vievSessionKey”（每个视图都是唯一的）。

在显示页面时，浏览器发送网页请求，然后浏览器（不是网页）为每张图片发送另一个请求。在这种情况下，图像请求不会在网页请求时生成 viewSessionKey，因此 bean 将作为另一个新视图起作用，并初始化新的 bean 实例。

如果要对 ViewScoped bean 进行此类操作，则需要实现在每个 bean 的每个新实例之间传输数据的方式。您可以尝试制作某种带有图片数据或一些静态字段的 Singleton 管理器。但这是解决此问题的“丑陋”方式，更合乎逻辑的方式是使您的 bean 会话范围...或至少将某些功能与新的会话范围 bean 分开。

ps：我知道我发现了一些恐龙问题，但我遇到了同样的问题，在阅读你的问题时，我意识到了 javascripts/browser 对每种 bean 类型所做的逻辑

# c# - 从 GridView 删除记录时出错

> ID：13225986
> 
> 赞同：2
> 
> 时间：2012-11-05T04:37:06.503
> 
> 标签：c#, asp.net, gridview

我有一个带有以下标记的 GridView 控件：

```
 <asp:GridView ID="gvGroups" runat="server" Width="100%" AutoGenerateColumns="False"
            ShowFooter="True" BorderColor="White" BorderStyle="Ridge" CellSpacing="1" BorderWidth="2px"
            BackColor="White" CellPadding="3" GridLines="None" Font-Names="Tahoma" Font-Size="11px"
            DataKeyNames="GroupId" OnRowDeleting="gvGroups_RowDeleting">
            <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
            <RowStyle BackColor="#DEDFDE" ForeColor="Black" />
            <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#E7E7FF" />
            <Columns>
                <asp:TemplateField HeaderText="Row">
                    <ItemTemplate>
                        <asp:Literal ID="litRowNumberNormal" runat="server"></asp:Literal>
                    </ItemTemplate>
                    <FooterTemplate>
                        <asp:Literal ID="litRowNumberFooter" runat="server"></asp:Literal>
                    </FooterTemplate>
                    <ItemStyle HorizontalAlign="Center" />
                    <FooterStyle HorizontalAlign="Center" />
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Title">
                    <ItemTemplate>
                        <%#Eval("Title")%>
                    </ItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtAddTitle" runat="Server" BorderStyle="Solid" BorderWidth="1px"
                            Font-Names="Tahoma" Font-Size="11px" BorderColor="Black" />
                    </FooterTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEditTitle" Text='<%# Bind("Title") %>' runat="server" BorderStyle="Solid"
                            BorderWidth="1px" Font-Names="Tahoma" Font-Size="11px" BorderColor="Black" />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:CommandField ShowEditButton="True" ButtonType="Button" UpdateText="Save" CancelText="Cancel"
                    EditText="Edit" HeaderText="Edit">
                    <FooterStyle BackColor="#669900" HorizontalAlign="Center" />
                    <HeaderStyle BackColor="#5A49A7" HorizontalAlign="Center" />
                    <ItemStyle BackColor="#FFC080" HorizontalAlign="Center" />
                </asp:CommandField>
                <asp:TemplateField HeaderText="Delete">
                    <FooterTemplate>
                        <asp:Button CommandName="Delete" Text="Delete" ID="btnRemove" runat="server" BorderStyle="Solid"
                            BorderWidth="1px" BackColor="#FFC080" Font-Names="Tahoma" Font-Size="11px" />
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:CheckBox ID="ChkRemove" runat="server"></asp:CheckBox>
                    </ItemTemplate>
                    <ItemStyle BackColor="LightCoral" HorizontalAlign="Center" />
                    <HeaderStyle BackColor="#5A49A7" HorizontalAlign="Center" />
                    <FooterStyle BackColor="#669900" HorizontalAlign="Center" />
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

该网格的模型是组类的列表。组类如下：

```
public class Group
{
 public int GroupId {get; set; }
 public string Title {get; set; }
} 
```

GroupId 是我的表的主键。当我按下删除按钮时，我收到以下错误：

> **指数超出范围。必须是非负数且小于集合的大小。
> 参数名称：索引**

我的 RowDeleting 事件处理程序代码：

```
protected void gvGroups_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    CheckBox chkRemove;

    List<int> ids = new List<int>();

    foreach (GridViewRow gvRow in gvGroups.Rows)
    {
        chkRemove = (CheckBox)gvRow.FindControl("ChkRemove");
        if (chkRemove.Checked)
        {
            ids.Add(Int32.Parse(gvGroups.DataKeys[gvRow.RowIndex].Value.ToString()));
        }
    }

    if (ids.Any())
    {
        GroupService.DeleteGroupById(ids);
    }

    this.BindGroups();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:35:42.103

我们可以做的另一项工作是将“Delete”按钮的 CommandName 属性更改为“Delete”以外的任何内容并在 RowCommand 事件中处理它，“Delete”命令是用于触发 GridView 控件的 RowDeleting 事件的默认 CommandName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:51:59.863

代码看起来正确，但选择的事件不正确。正如@AVD 提到[的 RowDeleting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdeleting.aspx)事件适用于`per row`每个`row`都有自己的情况`Delete button`：

> 在单击行的 Delete 按钮时发生，但在 GridView 控件删除该行之前

您只需要添加一个`btnRemove_Click`事件并将您的代码放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:55:37.007

如果要执行多次删除，请在 gridview 外部添加一个名为多次删除的按钮并处理 onclick 事件，在事件处理程序中删除选择的项目数，如下所示

```
public void DeleteEverything(object sender, EventArgs e)
    {
        // this function is to delete the selected items based on the checkbox
        CheckBox chkAll = (CheckBox)GridView1.HeaderRow.FindControl("SelectAllCheck");
        // to get the Checkbox status in the header rows
        if (chkAll.Checked == true)
        {
            int i = 0;
            foreach (GridViewRow gvRow in GridView1.Rows)//to get all rows in that particular page
            {
                string Delete = Convert.ToString(GridView1.Rows[i].Cells[3].Text);
                //Cells[3] is the column to get one by one rows cells[3] columns where you should keep your primary keys and in visible state
                Bal_add.Delete(Delete);
                i++;
            }
            Response.Redirect("Information.aspx");
        }
        else
        {
            int j=0;
            foreach (GridViewRow gvRow in GridView1.Rows)
            {
                CheckBox chkSel = (CheckBox)gvRow.FindControl("SelectCheck");
                if (chkSel.Checked == true)
                {
                    string Delete = Convert.ToString(GridView1.Rows[j].Cells[3].Text);
                    //Cells[3] is the column to get one by one rows cells[3] columns where you should keep your primary keys and in visible state
                    Delete(Delete);

                }
                j++;

            }
            Response.Redirect("Information.aspx");
        }

    }

public void Delete(string UserEmail)
        {
            obj_add = new add();
            string QueryString;
            QueryString = System.Configuration.ConfigurationManager.ConnectionStrings["Admin_raghuConnectionString1"].ToString();

            obj_SqlConnection = new SqlConnection(QueryString);

            obj_SqlCommand = new SqlCommand("usp_DeleteDataProcedure");
            obj_SqlCommand.CommandType = CommandType.StoredProcedure;
            obj_SqlConnection.Open();

            obj_SqlCommand.Parameters.AddWithValue("@UserEmail", UserEmail);//here @UserName is the variable that we declare in the stored procedure
            obj_SqlCommand.Connection = obj_SqlConnection;
            SqlDataReader obj_result = null;

            obj_SqlCommand.CommandText = "usp_DeleteDataProcedure";
            obj_result = obj_SqlCommand.ExecuteReader();
            obj_SqlConnection.Close();

        } 
```

您可以根据存储过程中的主键删除希望这会有所帮助：D

# android - 列表视图的自定义滚动条

> ID：13225987
> 
> 赞同：1
> 
> 时间：2012-11-05T04:37:33.583
> 
> 标签：android, listview, scrollbar

我的任务是为列表视图创建自定义滚动条，据我所知，您可以自定义滚动条的方式在 android 上非常有限。是否有可能达到这样的完全相同的结果： ![在此处输入图像描述](../Images/6d4e4ec9680a1f57276ff0367eea8056.png)

如果是这样，你能给我举一个很好的例子吗，或者至少告诉我应该研究什么？

[编辑] 同样在滚动时，我希望能够使用拇指图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-10T16:12:40.970

在drawable中创建这两个xml文件

scrollbar_vertical_thumb.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <gradient
        android:angle="0"
        android:endColor="#FF6600"
        android:startColor="#FF6600" />

    <corners android:radius="4dp"/>

</shape> 
```

scrollbar_vertical_track.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >    
    <gradient
        android:angle="0"
        android:endColor="#FFFFFF"
        android:startColor="#FFFFFF" /> 
    <corners android:radius="4dp" />    
</shape> 
```

在 list_view.xml 中使用这两个 xml 文件

list_view.xml

```
<ListView android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:dividerHeight="1dp"
    android:divider="#FF6600"
    android:listSelector="@drawable/list_selector"
    android:layoutAnimation="@anim/listview_layout_animation"
    android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb"
    android:scrollbarTrackVertical="@drawable/scrollbar_vertical_track"
    android:scrollbarSize="3dip"
    android:fastScrollEnabled="true"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T04:59:15.010

在活动级别，您可以指定各种属性来指定滚动条。对于给定的滚动条，您可能必须指定`scrollbarThumbVertical`,`scrollbarTrackVertical`属性。可定制属性列表在[R.attr](http://developer.android.com/reference/android/R.attr.html#scrollbarThumbVertical)中指定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T05:37:30.037

在 res/styles.xml 中创建一个主题：

```
<style name="CustomTheme" parent="android:Theme">
    <item name="android:scrollbarTrackVertical">@drawable/scroll_track</item>
    <item name="android:scrollbarThumbVertical">@drawable/scroll_thumb</item>
</style> 
```

`@drawable/scroll_track`并且`@drawable/scroll_thumb`必须引用九个补丁图像或一个形状drawable。滚动轨迹图像是滚动条的背景。滚动拇指负责滚动句柄。然后只需将主题应用于整个应用程序或 AndroidManifest.xml 中的活动：

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/CustomTheme"> 
```

你可以像我解释的那样做这个，也可以根据你的需要把图片放在drawable中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T12:13:46.993

我刚刚在 ListView 旁边使用了单独的 Seekbar。

# ios - 获取文件夹名称和图像名称

> ID：13225991
> 
> 赞同：2
> 
> 时间：2012-11-05T04:38:17.903
> 
> 标签：ios, objective-c, cocoa

代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:[objDynaMoThumbnailImages objectAtIndex:eg] ofType:@"jpg" inDirectory:[objDynaMoProductImagePath objectAtIndex:eg]]; 
```

它会像这样检索路径

```
/Users/software/Library/Application Support/iPhone Simulator/6.0/Applications/61AE2605-CE8E-404D-9914-CDA9EBA8027C/DynaMO.app/original/1-1.jpg 
```

从上面的路径中，我只需要检索“original/1-1.jpg”。请帮我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:51:15.743

给猫剥皮有几种方法：

```
NSString* lastFile = [path lastPathComponent];
NSString* lastDir = [[path stringByDeletingLastPathComponent] lastPathComponent];
NSString* fullLast = [lastDir stringByAppendingPathComponent:lastFile]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:42:59.153

你可以使用 NSString 的成员函数 lastPathComponent。

```
NSString filename = [yourString lastPathComponent]; 
```

编辑：抱歉，您似乎不是从路径中查找文件名，而是从文件名的父文件夹开始的子路径。上面的方法只给你文件名字符串。但是你可以这样做..

```
-(NSString *) getSubPath:(NSString*)origPath{
   NSArray * array = [origPath componentsSeparatedByString:@"/"];
   if(!array  || [array length] == 0 || [array length] == 1)
     return origPath;
   int length  =  [array length];
   return [NSString stringWithFormat:@"%@/%@", [array objectAtIndex:(length - 2)], [array lastObject]];
} 
```

你可以像这样使用它

```
NSString *subPath  = [self getSubPath:origPath]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:08:46.673

如果资源位于应用程序包的任意子目录中，则可以使用以下代码。它没有假设资源恰好是捆绑路径下的一个子目录。

```
NSString *path = [[NSBundle mainBundle] pathForResource:...];
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSString *relativePath;
if ([path hasPrefix:bundlePath]) {
    relativePath = [path substringFromIndex:([bundlePath length] + 1)];
} else {
    relativePath = path;
} 
```

例如

```
path = /Users/software/Library/Application Support/.../DynaMO.app/sub/dir/image.jpg 
```

将导致

```
relativePath = sub/dir/image.jpg 
```

# ios - UIPageViewController + UIWebView + 闪烁

> ID：13225994
> 
> 赞同：2
> 
> 时间：2012-11-05T04:38:52.447
> 
> 标签：ios, uiwebview, uipageviewcontroller

我目前正在开发一款杂志风格的 iPad 应用程序。类似于《连线》和应用商店上的其他出版物。

我使用 UIPageViewController 进行导航。像 iBooks 一样在每个页面之间卷曲。该应用程序是横向的，没有脊椎。每页占据整个屏幕。

此应用程序的数据由 HTML 以块的形式提供。根据页面的布局，一页通常有 4-6 个块。所以每个页面视图控制器都有一些 UIWebView 控件。

在任何给定时间，内存中只存在三页。当前页面、左侧页面和右侧页面。所有其他页面都会在需要时发布和重新创建。

这一切都很好。但我有一个问题。

当快速从页面翻页时，UIWebView 没有时间加载，因此会向用户显示不自然的闪烁。

我还有一个控件，您可以在其中跳到所需的任何页面。与 iBooks 页面滚动器类似的功能。因此，当在第 2 页并使用此控件选择第 9 页时，也会发生此 UIWebView 加载闪烁。

谁能给我任何可能帮助我解决这个问题的想法。或者这只是你在使用 UIWebView 时必须处理的事情？

如果您需要，我可能会提供一些代码，但我对此类任务的理论和最佳实践更感兴趣。

# flash - 错误 1119 和 1120

> ID：13225996
> 
> 赞同：1
> 
> 时间：2012-11-05T04:39:21.353
> 
> 标签：flash, getter

我正在尝试使用吸气剂，但是在将代码简化为我能想到的最简单的事情之后，我仍然会遇到同样的错误。这是错误 1119 的代码

主要的：

```
package
{
    import flash.display.MovieClip;

    public class Main extends MovieClip
    {
        public function Main()
        {
            init();
        }
        public function init():void
        {
            if (Player.value == 23)
            {
                trace("if statment")
            }
            trace(Player.value);
        }
    }
} 
```

玩家：

```
package
{
    public class Player
    {
        private var _numberOfKeys:uint;

        public function Player()
        {
            _numberOfKeys = 23;
        }
        public function get value():uint
        {
            return _numberOfKeys;
        }
    }
} 
```

我在尝试使用 get 函数的两行都收到错误，如果我将 Player get value 函数更改为“public static function”，它会读取 _numberOfKeys 的值并说它是未定义的，但如果我硬编码一个数字，它会将它传递给没有问题的主要课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:00:41.657

如果您希望您的`Main`类包含 的实例`Player`，则从 main 实例化一个播放器`init()`：

```
package
{
    import flash.display.MovieClip;

    public class Main extends MovieClip
    {
        public var player:Player;

        public function Main()
        {
            init();
        }
        public function init():void
        {
            player = new Player();
            trace(player.value);
        }
    }
} 
```

否则，如果您打算让 Player 的`value`属性是静态的，那么它必须能够引用`_numberOfKeys`静态初始化的，例如：

```
package
{
    public class Player
    {
        private static var _numberOfKeys:uint = 23;

        public static function get value():uint
        {
            return _numberOfKeys;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:01:55.617

为了理解这个问题，你需要理解一个类和一个类的实例之间的区别。静态函数可以从类本身访问，非静态函数只能在对象启动后访问。

要解决第一种情况，您需要编写如下内容：

```
package
{
    import flash.display.MovieClip;

    public class Main extends MovieClip
    {
        public function Main()
        {
            init();
        }
        public function init():void
        {
            var instance:Player = new Player();
            if (instance.value == 23)
            {
                trace("if statment")
            }
            trace(Player.value);
        }
    }
} 
```

将值函数更改为静态时出现错误的原因是 _numberOfKeys 不是静态的。

# php - 使用php拦截soap请求和http请求

> ID：13225998
> 
> 赞同：1
> 
> 时间：2012-11-05T04:39:34.067
> 
> 标签：php, intercept, http-request

我正在尝试构建一个入侵检测应用程序，并希望在处理它们之前拦截服务器上的 http 或 soap 请求。我想扫描它们，然后将它们传送到服务器进行处理。任何人都可以帮助我编写这样的脚本来使用 php 拦截请求吗？我看到创建代理并通过它引导所有请求可能会有所帮助。这是最好的方法吗？如果是这样，我该如何开发代理脚本？