# StackOverflow 问答 14492000-14492999

# c# - 如何在 ASP.Net 中创建必须是通用的数据访问层？

> ID：14492000
> 
> 赞同：1
> 
> 时间：2013-01-24T00:39:32.553
> 
> 标签：c#, asp.net, database-connection, data-access-layer

我查看了几个站点 CodeProject、CSharpCorner、MSDN、CSharpPearls 等，包括一个 StackOverflow 链接：-

[如何创建单个数据访问层以访问 asp.net 中的两个不同数据源](https://stackoverflow.com/questions/8714345/how-to-create-single-data-access-layer-to-access-two-different-data-source-in-as)

但我对答案很不满意。

我想在 ASP.net C# 中为我的网站创建一个 DAL，我在其中使用 Web.Config 来获取 ConnectionString。但事情是假设今天我连接到 SQLSERVER，我的 DAL 能够连接到 SQLSERVER。但是假设将来我再添加一个连接字符串，现在用一个连接字符串连接到 SQLSERVER，用另一个连接字符串连接到 MYSQL，我的 DAL 必须能够毫无问题地连接到所有类型的数据库。

到目前为止，我所做的是为 SQLServer 工作的 SQLServer，但我希望它是通用的，并且适用于 OLEDB、MYSQL、SQLCLIENT、（BIGTABLE & CASANDRA IF POSSIBLE）和所有其他提供程序。

这是我到目前为止所尝试的：-

```
namespace MyDAL
{
namespace DB
{
    using System;
    using System.Configuration;
    using System.Data;
    using System.Data.SqlClient;
    /// <summary>
    /// BaseDataManager is used to connect to database
    /// </summary>
    [Serializable()]
    public class BaseDataManager : IDisposable
    {
        private bool _disposedValue = false;
        private SqlConnection _connectionObject = null;
        private SqlCommand _commandObject = null;
        public BaseDataManager()
        { }
        /// <summary>
        /// Provide ConnectionString
        /// </summary>
        public BaseDataManager(string connectionString)
        {
            this.SqlConnectionString = connectionString;
        }

        /// <summary>
        /// if config is true provide connectionstring name in Web.config
        /// else if config is false provide connectionstring rather than providing                     
        ///name
        /// </summary>
        public BaseDataManager(String connectionString_Name, Boolean config)
        {
            if (config == true)
            {
                this.SqlConnectionString = ConfigurationManager.ConnectionStrings[connectionString_Name].ConnectionString;
            }
            else if (config == false)
            {
                this.SqlConnectionString = connectionString_Name;
            }
            else
            {
                Console.Out.WriteLine("Error in Connection String, Check Web.Config ");
            }
        }
        /// <summary>
        /// Provide data source=; as connection string, username and password of
        /// database 
        /// </summary>
        public BaseDataManager(string DataSource, string InitialCatalog, bool IntegratedSecurity)
        {
            if (IntegratedSecurity == true)
            {
                this.SqlConnectionString += "Data Source=" + DataSource + "InitialCatalog=" + InitialCatalog + ";Integrated Security=" + IntegratedSecurity;
            }
        }

        /// <summary>
        /// Provide data source=; as connection string, username and password of
        /// database 
        /// </summary>
        public BaseDataManager(string DataSource,string InitialCatalog, string username, string password)
        {
            this.SqlConnectionString += "Data Source="+DataSource+"InitialCatalog="+InitialCatalog+";User ID=" + username + ";Password=" + password;
        }

        public string SqlConnectionString
        {
            get;
            set;
        }

        public virtual SqlConnection connection
        {
            get
            {
                if (_connectionObject == null && !String.IsNullOrEmpty (this.SqlConnectionString))
                    _connectionObject = new SqlConnection (this.SqlConnectionString);
                return _connectionObject;
            }
            set
            {
                _connectionObject = value;
            }
        }

        public virtual SqlCommand command
        {
            get
            {
                if (_commandObject == null)
                    _commandObject = new SqlCommand();
                return _commandObject;
            }
            set
            {
                _commandObject = value;
            }
        }

        public SqlConnection getOpenConnection()
        {
            if (connection.State == ConnectionState.Closed)
            {
                connection.Open();
            }
            return connection;
        }

        public SqlCommand getCommand()
        {
            return command;
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!_disposedValue)
            {
                if (disposing)
                {

   //-------------------------------------------------------------------------
                    // Close the connection object prior to setting it to nothing

   //----------------------------------------------------------------------
                    if (_connectionObject != null)
                    {
                        _connectionObject.Close();
                        _connectionObject.Dispose();
                    }
                    if (_commandObject != null)
                    {
                        _commandObject.Cancel();
                        _commandObject.Dispose();
                    }
                }

                _disposedValue = true;
            }
        }
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
    GC.Collect();
        }

        ~BaseDataManager()
        {
            Dispose(false);
        }

    }
 }
 } 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:35:08.183

我所看到的工作是在每个实体的基础上提供数据访问对象（DAO）——而不是一个巨大的 DAO。

我会保持它非常简单，不要做太多抽象。假设您正在申请关于学校的申请。一些实体：

*   学校
*   老师
*   学生

然后你可以为每个 DAO 制作接口：

*   学校道
*   伊老师道
*   IStudentDAO

每个 DAO 都有特定于您的应用程序的功能。我不建议尝试使其通用。您可能对学校有这样的方法：

*   公共列表 GetSchools()
*   公立学校GetSchool（int id）

然后，当您为 DAO 实现接口时，它可以是您想要的任何技术。请记住，BigTable/Hadoop/SQL 之类的东西*不*符合相同的概念。一个是关系数据库，另一个不是关系数据库。

在整个代码中使用接口，然后您可以编写单元测试并轻松更换底层技术。

（值得重复...不要尝试将 SQL 语句作为接口的一部分读取。请记住，这些语句在技术之间的映射不同。）

# c# - IDisposable 在方法中创建并返回

> ID：14492003
> 
> 赞同：15
> 
> 时间：2013-01-24T00:39:46.110
> 
> 标签：c#, design-patterns, static-analysis, idisposable

我很高兴编写了一个运行良好且在运行时不会出现任何异常的项目。所以我决定运行静态代码分析工具（我使用的是 Visual Studio 2010）。结果发现违反了规则`CA2000`，消息如下：

警告 - CA2000：Microsoft.Reliability：在方法“Bar.getDefaultFoo()”中，在对对象“new Foo()”的所有引用超出范围之前调用 System.IDisposable.Dispose。

引用的代码是这样的：

```
private static IFoo getDefaultFoo()
{
    return (Baz.canIDoIt()) ? new Foo() : null;
} 
```

我自己想：也许条件表达式破坏了逻辑（我的或验证者的）。改为：

```
private static IFoo getDefaultFoo()
{
    IFoo ret = null;
    if (Baz.canIDoIt())
    {
        retFoo = new Foo();
    }
    return ret;
} 
```

同样的事情又发生了，但现在该对象被称为`retFoo`. 我用谷歌搜索，我已经 msdn'ed，我已经 stackoverflow'ed。找到[这篇文章](http://msdn.microsoft.com/en-us/library/ms182289.aspx)。创建对象后，我不需要执行任何操作。我只需要返回对它的引用。但是，我尝试应用 OpenPort2 示例中建议的模式。现在代码如下所示：

```
private static IFoo getDefaultFoo()
{
    Foo tempFoo = null;
    Foo retFoo = null;
    try
    {
        if (Baz.canIDoIt())
        {
            tempFoo = new Foo();
        }
        retFoo= tempFoo;
        tempFoo = null;
    }
    finally
    {
        if (tempFoo != null)
        {
            tempFoo.Dispose();
        }
    }
    return retFoo;
} 
```

再次出现相同的消息，但`tempFoo`这次变量违反了规则。所以基本上，代码变得扭曲，更长，有点不合理，不必要的复杂，并且做同样的事情，但速度更慢。

我也发现[了这个问题](https://stackoverflow.com/questions/4264986/to-dispose-or-not-to-dispose-ca2000)，其中相同的规则似乎以类似的方式攻击有效代码。并且建议提问者忽略警告。我也读过[这个线程](https://stackoverflow.com/questions/10697532/why-does-this-method-cause-code-analysis-error-ca2000-call-dispose)和大量类似的问题。

有什么我错过的吗？规则是否被窃听/无关？我该怎么办？忽视？以某种神奇的方式处理？也许应用一些设计模式？

编辑：

在 Nicole 的请求之后，我以我也尝试使用的形式提交了整个相关代码。

```
public class DisposableFooTest
{
    public interface IFoo
    {
        void bar();
    }

    public class Foo : IFoo, IDisposable
    {
        public void bar()
        {
            Console.Out.WriteLine("Foo baring now");
        }

        public void Dispose()
        {
            // actual Dispose implementation is irrelevant, or maybe it is?
            // anyway I followed microsoft dispose pattern
            // with Dispose(bool disposing)
        }
    }

    public static class Baz
    {
        private static bool toggle = false;
        public static bool canIDoIt()
        {
            toggle ^= true;
            return toggle;
        }
    }

    private static IFoo getDefaultFoo()
    {
        IFoo result = null;
        try
        {
            if (Baz.canIDoIt())
            {
                result = new Foo();
            }

            return result;
        }
        catch
        {
            if (result != null)
            {
                (result as IDisposable).Dispose();
                // IFoo does not inherit from IDisposable, hence the cast
            }

            throw;
        }
    }

    public static void Main()
    {
        IFoo bar = getDefaultFoo();
    }
} 
```

分析报告包含以下内容：
`CA2000：Microsoft.Reliability：在方法“DisposableFooTest.getDefaultFoo()”中，在对对象“result”的所有引用超出范围之前调用 System.IDisposable.Dispose。%%projectpath%%\DisposableFooTest.cs 44 测试

编辑2：

以下方法解决了 CA2000 问题：

```
private static IFoo getDefaultFoo()
{
    Foo result = null;
    try
    {
        if (Baz.canIDoIt())
        {
            result = new Foo();
        }
        return result;
    }
    finally
    {
        if (result != null)
        {
            result.Dispose();
        }
    }
} 
```

不幸的是，我不能走那条路。更重要的是，我更希望遵循面向对象的原则、良好实践和指南来简化代码，使其具有可读性、可维护性和可扩展性。我怀疑有人会按预期阅读它：如果可能，给 Foo ，否则为 null 。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T00:42:48.053

这是一个误报警告。如果没有代码分析工具警告您没有正确处理它，则无法返回`IFoo`, if `IFoo`implements的适当实例。`IDisposable`

代码分析不会分析您的意图或逻辑，它只是尝试警告常见错误。在这种情况下，“看起来”你正在使用一个`IDisposable`对象而不是调用`Dispose()`. 在这里，您是*按设计*进行的，因为您希望您的方法返回一个新实例，并将其作为工厂方法的一种形式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T13:40:06.933

这里的问题不是您的 C# 代码明确执行的操作，而是生成的 IL 使用多个指令来完成 C# 代码中的一个“步骤”。

例如，在第三个版本中（使用 try/finally），该`return retFoo`行实际上涉及分配由编译器生成的附加变量，而您在原始代码中看不到该变量。由于此分配发生在 try/finally 块之外，它确实会引入未处理异常的可能性，从而使您的一次性 Foo 实例“孤立”。

这是一个可以避免潜在问题（并通过 CA2000 筛选）的版本：

```
private static IFoo getDefaultFoo()
{
    IFoo result = null;
    try
    {
        if (Baz.canIDoIt())
        {
            result = new Foo();
        }

        return result;
    }
    catch
    {
        if (result != null)
        {
            result.Dispose();
        }

        throw;
    }
} 
```

显然，与第一个版本相比，这严重影响了可读性和可维护性，因此您必须决定孤立的可能性和不处理孤立的后果是否真的值得更改代码，或者是否抑制 CA2000 违规在这种特殊情况下可能更可取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T13:20:16.667

静态分析基本上是在抱怨，原因如下：

1.  `IFoo`接口不继承自`IDisposable`,
2.  但是您正在返回一个必须处理的具体实现，而调用者将无法知道这一点。

换句话说，您的`GetDefaultFoo`方法的调用者需要一个`IFoo`实现，但不知道您的实现需要显式处置，因此可能不会处置它。如果这是其他库中的常见做法，您将不得不手动检查项目是否`IDisposable`实现了任何可能接口的每个可能实现。

显然，这是有问题的。

恕我直言，解决此问题的最简洁方法是`IFoo`继承自`IDisposable`：

```
public interface IFoo : IDisposable
{
    void Bar();
} 
```

这样，调用者就知道他们收到的任何可能的实现都必须被处理掉。这也将允许静态分析器检查您使用`IFoo`对象的所有位置，并在您没有​​正确处理它们时警告您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-29T06:34:31.760

返回 IDisposable 对象时，如果值为 null，请处置该对象并在方法中返回 null - 这应该清除与您的“私有静态 IFoo getDefaultFoo()”方法关联的“警告/建议”消息。当然，您仍然需要在调用例程中将对象作为 IDisposable（使用或处置）来处理。

```
private static IFoo getDefaultFoo()
{
    IFoo ret = null;
    if (Baz.canIDoIt())
    {
        retFoo = new Foo();
    }
    return ret;
} 
```

改成

```
private static IFoo getDefaultFoo()
{
    IFoo ret = null;
    if (Baz.canIDoIt())
    {
        retFoo = new Foo();
    }
    if (ret == null)
    {
        ret.dispose();
        return null;
    }
    else
        return ret;
} 
```

# ios - UITableCellView 在没有回调的情况下长按表格时取消选择

> ID：14492007
> 
> 赞同：1
> 
> 时间：2013-01-24T00:39:54.523
> 
> 标签：ios, uitableview, uikit

我在处理长按表格时取消选择表格中当前选定单元格的情况时遇到问题。

复制：

1.  有一个包含多个单元格的 UITableView
2.  点击一个单元格以选择它（应该变成蓝色或遵循其选择样式）
3.  长按另一个单元格

结果：当前选定的单元格取消选择，但不会触发 UITableViewDelegate 方法`didDeselectRowAtIndexPath`或`didUnhighlightRowAtIndexPath`.

预期结果：应该有某种回调，以便我可以处理这种情况。

发生这种情况时，选定的表格单元格确实会收到一条`setSelected:NO animated:NO`消息，但这不足以跟踪表格本身的状态。还有其他我不知道的回调吗？我错过了什么吗？

我曾尝试使用`UILongPressGestureRecognizer`, 但这似乎以一种不受欢迎的方式从表视图中窃取事件处理。

这目前发生在 iOS 6.0 设备上，我们的应用程序支持低至 4.3 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:12:03.287

如果新选择的行确实触发了 didSelectRowAtIndexPath: 方法，您可以尝试实现几个标志来确定当前选择的行和先前选择的行，因此当 didSelectRowAtIndexPath 触发时，您可以验证 currentSelectedRow（现在是旧的）与didSelectRowAtIndexPath: 报告它的 NSIndexPath 参数，如果是这样，您可以处理对先前选择的行的操作。

希望这可以给你一些见解。

# asp.net-mvc-4 - 使用从控制器操作返回的 JSON.NET 日期格式

> ID：14492015
> 
> 赞同：4
> 
> 时间：2013-01-24T00:40:57.107
> 
> 标签：asp.net-mvc-4, json.net

在我的 MVC4 项目中，我有一个控制器操作如下：

```
public ActionResult GetJson()
{
    var serialized = JsonConvert.SerializeObject(DateTime.Now);
    return Json(DateTime.Now, JsonRequestBehavior.AllowGet);
} 
```

对浏览器的响应是旧的 ASP.NET 格式：

> "/日期(1358987787691)/"

但是，我知道 MVC4 默认使用 json.net，而 json.net 使用 ISO8601 格式的日期。

在上面的代码中，序列化变量包含（我想要的）：

> "\"2013-01-24T13:39:12.7182079+13:00\""

为什么返回 Json(DateTime.Now) 不（看似）使用 json.net？

我还尝试将以下行放在我的 global.asx 中：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.UseDataContractJsonSerializer = false; 
```

但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:47:58.920

您可以在控制器工厂中进行一些更改并创建您的控制器，该控制器继承自标准控制器，但使用自定义 json 格式化程序。

# ios - UIViewController hidesBottomBarWhenPushed 在推送/弹出动画期间将 UIView 放置在错误的位置

> ID：14492018
> 
> 赞同：0
> 
> 时间：2013-01-24T00:41:06.527
> 
> 标签：ios, uinavigationcontroller, uikit, core-animation, uitoolbar

我`UIViewController`在 a 中有两个 s `UINavigationController`。最顶部已`hidesBottomBarWhenPushed`设置为`YES`。当我推 topmost`UIViewController`时，它`UITableView`被推到它应该在的位置上方大约 20 像素（注意顶部到被推视图控制器的单元格之间的单元格高度差异）。

![推送 UIViewController，隐藏 UIToolBar](../Images/6b6ad1a36e8c7d42b834a4c2aa7930f7.png)

与下面屏幕截图中的单元格位置进行比较：

![推送 UIViewController，隐藏 UIToolBar](../Images/bf3dccb2f80057388d0eee0c3acf7db9.png)

此外，当我弹出 topmost 时`UIViewController`，它`UITableView`会被推到它应该在的位置下方约 20 像素（请注意 上方的额外深蓝色空间`UITableView`）。

![在此处输入图像描述](../Images/65ec8441e495412a91a7f70b5d4dc4bb.png)

我已经尝试将我的`-[UIViewController setHidesBottomBarWhenPushed:YES]`呼叫转移到`-[UIViewController loadView]`、`-[UIViewController viewWillAppear:]`和`-[UIViewController viewDidAppear:]`。那些回调都太晚了，因为`UIViewController`已经被推送了，所以`UIToolbar`没有隐藏。

有没有办法避免这些差距？目前，我正在调用`-[UINavigationController setToolbarHidden:YES animated:NO]`我最顶层`UIViewController`和`-[UIViewController viewDidAppear:]`最`-[UINavigationController setToolbarHidden:NO animated:NO]`底层`UIViewController`的`-[UIViewController viewDidAppear:]`。这不太理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:13:56.133

假设**A**推动**B**。根据您的描述，听起来 B 不应该知道它所呈现的任何东西都有一个工具栏。相反，当 A 推动 B 时，A 知道 B 不应该有 A 的工具栏。那么为什么不在初始化 B 时设置它呢？

```
BController *b = [[BController alloc] init];
b.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:b animated:YES]; 
```

或者，如果您认为 B 确实需要控制这种行为，您可以将其放入 B 的`init`方法中。

# ruby-on-rails - 从迭代器块中的关联模型访问信息

> ID：14492023
> 
> 赞同：0
> 
> 时间：2013-01-24T00:41:48.153
> 
> 标签：ruby-on-rails

在用户个人资料页面上，我想显示该用户拥有的“评论”以及“评论请求”。我目前已将其设置在列表审核请求的工作位置，如下所示：

```
 def show
    @user = User.find(params[:id])
    @review_requests = @user.review_requests.paginate(page: params[:page])
  end 
```

和观点：

```
 <ol class="review_request">
      <%= render 'user_review_requests' %>
    </ol> 
```

部分：

```
 <% @review_requests.each do |review_request| %>
  <li>
    <span class="description">
      <%= review_request.description %>
    </span>
   blah blah blah....(there's more of much the same)

@reviews = @user.reviews.paginate(page: params[:page]) 
```

我也想显示评论，但问题是，我想显示的评论的很多信息实际上都存储在 ReviewRequest 模型中。所以这样做是行不通的：

添加到显示控制器：

```
@reviews = @user.reviews.paginate(page: params[:page]) 
```

和迭代器块：

```
<% @reviews.each do |review| %>
  <li>
    <span class="description">
      <%= review.review_request_id.description %>
    </span> 
```

如何从 ReviewRequest 模型中访问与每个关联的评论相关联的信息，以便在个人资料页面上显示它。

顺便说一句 - 评论请求有_许多评论和评论属于_to评论请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:50:18.177

访问`belongs_to`关联时，您通过关联名称 ( `review_request`) 访问它，而不是列名称 ( `review_request_id`)。像这样的东西：

```
<span class="description">
  <%= review.review_request.description %>
</span> 
```

# sql - 使用索引查询 MS Access 进行内部联接

> ID：14492027
> 
> 赞同：0
> 
> 时间：2013-01-24T00:42:01.663
> 
> 标签：sql, ms-access, inner-join

我有两张桌子

**顾客**

```
CustomerID   name  x2       x3 
--------------------------------
14tr          Joe   att2   att3
11ty          Jack  att2   att3 
```

**订金**

```
Depositid CustomerID quantity date      att3 att4
--------------------------------------------------
13           14tr      100   12-12-12     5    6
14           14tr      200   12-13-12     8    1
15           14tr      140   12-16-12     9    6
16           11ty      10    12-19-12     1    6
17           11ty      20    12-19-12     1    1
18           11ty      114   12-21-12     1    6 
```

我想要以下结果：

结果

```
No   name    quantity     date  att3 att4    x2     x3
-----------------------------------------------------------------------
1    Joe       100   12-12-12     5    6    att2  att3
1    Joe       200   12-13-12     8    1    att2  att3  
1    Joe       140   12-16-12     9    6    att2  att3
2    Jack       10   12-19-12     1    6    att2  att3
2    Jack       20   12-19-12     1    1    att2  att3
2    Jack      114   12-21-12     1    6    att2  att3 
```

为此，我正在做

```
SELECT
  b.name, 
  a.quantity, 
  a.date, 
  a.att3,
  a.att4, 
  b.x2, 
  b.x3
FROM
  Deposit a INNER JOIN Customer b
  ON a.CustomerID = b.CustomerID; 
```

如何获得示例中每个不同客户的编号列计数器？

有没有更好的方法来显示这两个表之间的内部连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:55:00.090

你可以 ：

```
SELECT DCount("*","Customer","CustomerID <='" & b.CustomerID & "'") AS Ct, 
b.name, 
a.quantity, 
a.Date, 
a.att3, 
a.att4, 
b.x2, 
b.x3
FROM Deposit AS a 
INNER JOIN Customer AS b ON a.CustomerID = b.CustomerID
ORDER BY b.CustomerID; 
```

结果：

```
Ct  name    quantity    Date    att3  att4  x2      x3
1   Jack    114     21/12/2012  1       6   att2    att3
1   Jack    20      19/12/2012  1       1   att2    att3
1   Jack    10      19/12/2012  1       6   att2    att3
2   Joe     140     16/12/2012  9       6   att2    att3
2   Joe     200     13/12/2012  8       1   att2    att3
2   Joe     100     12/12/2012  5       6   att2    att3 
```

# session - 限制 cakephp 中的会话范围

> ID：14492030
> 
> 赞同：1
> 
> 时间：2013-01-24T00:42:32.167
> 
> 标签：session, cakephp

使用 CakePHP 2\. 我有目录结构：

```
/var/www/basesite
            /appdev
                /app (and all other cake dirs)
            /appqa
                /app
            /appstage
                /app 
```

所以我有三个不同的站点，它们都具有相同的 baseurl 但不同的子目录，所有这些站点都包含基本相同的代码。一切正常，所有应用程序都加载并成功运行。

问题是，如果用户在 dev 上登录，然后查看 QA，他们就会登录。如果他们随后在 QA 上注销并返回 dev，他们也会在 dev 上注销。

**问题：**

如何以及在哪里设置会话范围以确保将其限制为应用程序每个实例的适当子路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:56:20.827

您可以使用 session.ini 通过 /app/Config/core.php 中的 cookie_path 设置它。

[http://book.cakephp.org/2.0/en/development/sessions.html](http://book.cakephp.org/2.0/en/development/sessions.html)

```
Configure::write('Session', array(
    'defaults' => 'php',
    'ini' => array(
        'session.cookie_path' => '/app/dir'
    )
)); 
```

# css - 使用 CSS 和媒体查询将 div 移动到另一个 div

> ID：14492031
> 
> 赞同：0
> 
> 时间：2013-01-24T00:42:33.700
> 
> 标签：css, media-queries

我有一个奇怪的情况，我需要使用媒体查询将 div 从一个容器移动到另一个容器 - 我什至不知道这是否可以做到，所以请耐心等待。

我通过倾斜和旋转 div 创建了六边形形状，然后使用负边距（每行 5 个）一次排列一行。这一切都正常工作，就像[jsFiddle](http://jsfiddle.net/LZcmZ/)

我的问题是响应式设计，当屏幕低于 980 像素时，我想将右手最下方的六边形移动。

基本上此刻我正在复制 div，所以我可以隐藏一个并显示另一个（有效）

```
@media screen and (max-width: 980px) {

div#hex14{display:block;}
div#hex0{display:none;}

div#hex14{display:block;}
div#hex0{display:none;}

} 
```

但是，六边形中有动态内容，我也不想特别复制所有内容。

有任何想法吗？

非常感谢

# java - 如何使用java删除/添加项目到数组

> ID：14492035
> 
> 赞同：0
> 
> 时间：2013-01-24T00:42:51.643
> 
> 标签：java, arrays, replace

基本上，我有一个游戏，这就是我管理谁是所有者和谁是版主的方式。

```
public static final String[] ADMINS = {"test", "jonathan", "bob"}; 
```

那行在 Settings.java

在 Commands.java 中我将如何发出命令

```
 case "giveadmin":
                            //write the users name to list
            return true; 
```

这会在物理上更改数组并将名称添加到其中。例如，假设我对名为 jerry 的玩家使用了 giveadmin 命令。我将如何添加代码以便在 Settings.java 中更改此数组

```
public static final String[] ADMINS = {"test", "jonathan", "bob"}; 
```

对此

```
public static final String[] ADMINS = {"test", "jonathan", "bob", "jerry"}; 
```

不，我只是不想像其他所有数组一样附加名称，我想在打开课程时实际看到名称 jerry 添加到数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:11:57.727

我不建议这样做。相反，编写一个文件，该文件是所有管理员用户名的分隔（例如，由新行）列表。

当您的程序启动时，读取文件并为文件`ArrayList<String>`中的每个名称创建一个（或其他集合）。

如果要添加新名称，请打开文件，将其附加到末尾，保存，然后将其添加到`ArrayList<String>`. 如果您的程序的另一个实例（或其他）同时修改了该文件，您必须再次打开该文件。

这样做的好处是，不懂java的非技术人员仍然可以使用记事本编辑管理员文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:27:46.497

更改自己的源代码的程序是一个非常糟糕的主意。不仅一开始就很难做到这一点，而且您将无法保持一致的游戏。每当添加管理员时，都必须重新编译代码（耗时的过程），然后重新启动游戏。

更好的方法是将所有这些信息存储在 config/XML 文件中。格式的东西

```
ADMINS= test, jonathan, bob
MODS= kyle, zach, bill 
```

有了这个，您可以在启动时逐行读取文件，并在每一行使用 String.split() 将名称解析为数组。

添加管理员时，您只需创建一个新数组并复制旧值并附加新值并将其写入配置文件中的适当位置。

# vb.net - 检测 Richtextbox 换行 Visual basic

> ID：14492037
> 
> 赞同：2
> 
> 时间：2013-01-24T00:43:59.047
> 
> 标签：vb.net, winforms, visual-studio-2012, richtextbox, newline

我正在`RichTextBox`使用语法高亮创建一个，我的实际代码可以检查与其他单词用空格分隔的单词或没有该语句的单词：

```
 If RichTextBox1.SelectedText = " " Or RichTextBox1.SelectedText = Nothing Then 
```

所以当我在它上面输入“test”（我突出显示的单词）`RichTextBox`变成蓝色时，它适用于所有情况，除了当我输入“test”时，它变成蓝色，然后我按下回车，它又变成黑色，就像如果有单词后面的一个字符。
我想换行符是由一个字符表示的`RichTextBox`，这就是为什么它没有被重新定义为“测试”，那么我必须在 if 上添加什么字符以便它可以检查？

我试过这样：

```
If  RichTextBox1.SelectedText = "\n" Then 
```

和：

```
If RichTextBox1.SelectedText = VbNewLine Then 
```

但两者都不起作用，任何人都知道表示“这里是新行”的字符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:58:23.530

它是一个 chr(10)，一个换行符。如果要单独处理每一行，也可以使用 RichTextBox1.Lines。

这是查看 RichTextBox 中单字节字符的一种方法：

```
For i = 1 To Len(rtext1.text)
  s = s & Asc(Mid(rtext1.text, i, 1)) & "  "
  Next i
MsgBox(s) 
```

# git - 无法删除远程 git 分支

> ID：14492038
> 
> 赞同：0
> 
> 时间：2013-01-24T00:44:08.473
> 
> 标签：git

这就是我正在做的......我如何摆脱原始远程分支？还有，这是什么？

```
[master] /dir: git status
# On branch master
nothing to commit (working directory clean)

[master] /dir: git remote show
github

[master] /dir: git branch -r
  github/master
  origin/HEAD -> origin/master

[master] /dir: git branch -rd origin/HEAD
error: remote branch 'origin/HEAD' not found.

[master] /dir: git branch -rd origin
error: remote branch 'origin' not found.

[master] /dir: git branch -rd origin/HEAD -> origin/master
-bash: origin/master: No such file or directory

[master] /Applications/MAMP/htdocs/asanawww: git branch -rd origin/master
error: remote branch 'origin/master' not found.

[master] /Applications/MAMP/htdocs/asanawww: git push origin :master
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我也试过

```
git gc --prune=now 
```

没有运气

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:32:40.253

很抱歉，我没有足够的声誉来添加评论。

我意识到这实际上是评论而不是答案，但是[这个](https://stackoverflow.com/questions/354312/why-is-origin-head-shown-when-running-git-branch-r)问题可能会有所帮助。

解决方案：

```
git remote set-head origin -d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T01:29:37.647

你应该做：

```
git branch -rd origin/master 
```

考虑到此命令将在本地删除远程分支，即保存在存储库中的“origin/master”引用。如果该分支仍然存在于远程中，则在进行拉取或提取时将再次创建“原点/主”引用。

要从远程正确删除它，您可以使用：

```
git push origin :master 
```

这种`<local>:<remote>`表示法意味着`<local>`引用将作为`<remote>`分支推送。通过使用`:master`你的意思是“无参考”是作为主人推，从而删除它。

另一种选择是执行删除推送：

```
git push --delete origin master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T14:21:58.553

也许您需要删除与本地分支关联的工作树（以防它被检入另一个目录）

```
git worktree remove work-tree-directory --force //use force if its dirty 
```

然后你可以使用删除分支

```
 git branch -D branch-to-delete  // -D is for force delete, for normal use -d 
```

# resize - fltr2 动态图表不可见

> ID：14492039
> 
> 赞同：1
> 
> 时间：2013-01-24T00:44:08.757
> 
> 标签：resize, dhtml, redraw, flotr, radar-chart

我正在尝试动态创建一个 flotr2 图表，但它是不可见的或者消失了。如果我粘贴代码（静态），动态图表就可以工作，所以我知道它应该可以工作。请尝试以下代码。

```
<html>
<body>
<style type="text/css"> #div1 { position: relative; } body { margin: 0px; padding: 0px; } .container { width : 600px; height: 384px; margin: 8px auto; border: 1px solid red; } </style>
<script type="text/javascript" src="flotr2.min.js"> //Some Comment </script><!-- [if IE]><script type="text/javascript" src="flashcanvas.js"></script><![endif] -->
<div id="myDiv"><div id="div1"><div id="container_Cavaliers_1_h" class="container" title="container_Cavaliers_1_h"><script type="text/javascript">(function basic_radar(container_Cavaliers_1_h) { var s1 = { label: "Before", data: [ [0,"0"],[1,"968"],[2,"295"],[3,"831"],[4,"558"],[5,"629"],[6,"0"],[7,"347"],[8,"169"],[9,"188"],[10,"237"],[11,"737"] ] }, s2 = { label: "After", data: [ [0,"0"],[1,"0"],[2,"0"],[3,"0"],[4,"0"],[5,"0"],[6,"0"],[7,"0"],[8,"0"],[9,"0"],[10,"0"],[11,"0"] ] }, graph, ticks; ticks = [ [0,""],[1,"SG-s"],[2,"SF-s"],[3,"PG-s"],[4,"PF-s"],[5,"CN-s"],[6,""],[7,"SG-r"],[8,"SF-r"],[9,"PG-r"],[10,"PF-r"],[11,"CN-r"] ]; graph = Flotr.draw(container_Cavaliers_1_h, [s1, s2], { radar: { show: true }, grid: { circular: true, minorHorizontalLines: true }, yaxis: { min: 1, max: 1000, minorTickFreq: 249.75 }, xaxis: { ticks: ticks }, title: 'container_Cavaliers_1_h', subtitle: 'container_Cavaliers_1_h' });})(document.getElementById("container_Cavaliers_1_h"));</script></div></div></div>
</body>
</html> 
```

# php - Android 将 JSON 发布到 Web 服务 php 并从服务中接收 JSON

> ID：14492040
> 
> 赞同：1
> 
> 时间：2013-01-24T00:44:13.027
> 
> 标签：php, android, json, post

我试图通过将 JSON 发送到我在 PHP 中拥有的 web 服务来在 android 中编写登录服务，因为它在 web 服务中处理后返回 JSON。我的问题是发送 JSON，然后在 android 应用程序中读取 JSON。我已经使用 ASyncTask 在应用程序中找到了基本的发布，但我不确定从那里去哪里，我一直在做很多搜索，我现在有点难过。非常感谢任何帮助！

这是我的 .java 文件

```
package com.example.logintest;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

private static final String APP_TAG = "demo";
public static EditText txtUserName;
public static EditText txtPassword;
Button btnLogin;
Button btnCancel;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        txtUserName=(EditText)this.findViewById(R.id.txtUname);
        txtPassword=(EditText)this.findViewById(R.id.txtPwd);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        new loginTask().execute();
        /*if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
            Toast.makeText(MainActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
        } else{
        Toast.makeText(MainActivity.this, "Invalid Login",Toast.LENGTH_LONG).show();
        }*/

    }
   });   
   }

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public static String postHttpResponse(URI absolute) {
        Log.d(APP_TAG, "Going to make a post request");
        StringBuilder response = new StringBuilder();
        String username = txtUserName.getText().toString();
        String password = txtPassword.getText().toString();
        try {
            HttpPost post = new HttpPost();
            post.setURI(absolute);
            List params = new ArrayList();
            params.add(new BasicNameValuePair("tag", "login"));
            params.add(new BasicNameValuePair("username", username));
            params.add(new BasicNameValuePair("password", password));
            post.setEntity(new UrlEncodedFormEntity(params));
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpResponse httpResponse = httpClient.execute(post);
            if (httpResponse.getStatusLine().getStatusCode() == 200) {
                Log.d(APP_TAG, "HTTP POST succeeded");
                HttpEntity messageEntity = httpResponse.getEntity();
                InputStream is = messageEntity.getContent();
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                String line;
                while ((line = br.readLine()) != null) {
                    response.append(line);
                }
            } else {
                Log.e(APP_TAG, "HTTP POST status code is not 200");
            }
        } catch (Exception e) {
            Log.e(APP_TAG, e.getMessage());
        }
        Log.d(APP_TAG, "Done with HTTP posting");
        return response.toString();
    }

    class loginTask extends AsyncTask<Object, Object, String> { 

        //check if server is online
        protected String doInBackground(Object... arg0) {
            URI absolute = null;
            try {
                absolute = new URI("http://10.0.2.2/service/");
            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return postHttpResponse(absolute);
        }

        //set status bar to offline if flag is false
        protected void onPostExecute(String xml) {
            //XMLfromString(xml);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:03:16.863

您可以将用户名和密码作为 jsonobject 发送到服务器：

```
//your code here....
JSONObject json = new JSONObject();
json.put("username", username);
json.put("password", password);

HttpPost post = new HttpPost();
post.setURI(absolute);
List params = new ArrayList();
params.add(new BasicNameValuePair("tag", "login"));
params.add(new BasicNameValuePair("loginjson",json.toString()));
post.setEntity(new UrlEncodedFormEntity(params));
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpResponse httpResponse = httpClient.execute(post);
//your code here.... 
```

在服务器端从 loginjson queryString 检索 json 对象。

为了从 json 中的服务器返回结果，您需要将返回的字符串从服务器转换为 AsyncTask 的 onPostExecute 方法中的 JsonObject ir JsonArray，如下所示：

```
protected void onPostExecute(String jsonstring) {
     // if server returning jsonobject 
       JSONObject jsonobj=new JSONObject(jsonstring);
          // get values from jsonobject

      // if server returning jsonArray
       JSONArray jsonarray=new JSONArray(jsonstring);
          // get values from JSONArray

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:30:33.853

在我们的应用程序中，我们使用 php 将 json 发送到我们的服务。我不直接以 json 格式发送它，而是以字符串数组格式发送它，并让 php 对 json 进行编码，以便在我从服务器获得响应时接收回数据，我只是将它放在字符串中，然后在 java 中使用 JSONObject我将其转换为 json 并解析数据。

# c# - 将字符串值传递给数据访问层

> ID：14492042
> 
> 赞同：0
> 
> 时间：2013-01-24T00:44:31.000
> 
> 标签：c#, linq, entity-framework-4, linq-to-xml

我只是坚持将我的字符串变量传递给我的数据访问层。

这是我的主控制台

```
 class Program
{
    static void Main(string[] args)
    {  
            String BookingTime="1000345";
            var BookingStart = new SchedSAPEntities.ResourceBookingEntity.ResourceBooking(string Bookingtime);
   } 
```

}

SchedSAPEntities.ResourceBookingEntity.ResourceBooking(string Bookingtime);//正在尝试将字符串变量（1000345）传递给ResourceBooking方法。

这是我的数据访问层

```
 public class ResourceBookingEntity
{
    public class ResourceBooking
    {
        private String _PRJ_ID;

        public ResourceBooking(String APRJ_ID )
        {
            _PRJ_ID = APRJ_ID;

        }
        public String PRJ_ID { get { return _PRJ_ID; } }
        }
}

  public class ResourceBookingList : List<SchedSAPEntities.ResourceBookingEntity.ResourceBooking>
    {
        public ResourceBookingList(SchedwinEntities db)
        {
                var query =
                (from PROJECTS in db.PROJECTS
                 join WOes in db.WOes on PROJECTS.PRJ_ID equals WOes.PRJ_ID
                 join SEVT_EX in db.SEVT_EX on SEVTs.SESID equals SEVT_EX.SESID into SEVT_EX_join
                 from SEVT_EX in SEVT_EX_join.DefaultIfEmpty()
                 where
                   (new string[] { "1", "2" }).Contains((PROJECTS.STAT.TrimEnd()).TrimStart()) &&
                   (WOes.STAT.TrimEnd()).TrimStart() == "6" &&
                   ((SEVTs.RESTYPE == 5 ||
                   SEVTs.RESTYPE == 0) &&
                   **SEVTs.T_START.TrimStart() == BookingStart**//Am trying to pass the value here
                 orderby
                   PROJECTS.PRJ_ID,
                   WOes.WONUM
                 select new
                 {
                     PROJECTS.PRJ_ID,

                 }).Take(10);
            foreach (var r in query)
                Add(new SchedSAPEntities.ResourceBookingEntity.ResourceBooking(
                    r.PRJ_ID, r.USER3, r.USER9, r.WONUM));
                    var ResourceBooking = query.ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:45:54.333

Don't need to pass the type into the method, and remember C# is case sensitive.

```
static void Main(string[] args)
    {  
            String BookingTime="1000345";
            var BookingStart = new SchedSAPEntities.ResourceBookingEntity.ResourceBooking(BookingTime);
   } 
```

# grails - 如何在 grails 中正确保存 double 类型？

> ID：14492044
> 
> 赞同：-2
> 
> 时间：2013-01-24T00:44:33.340
> 
> 标签：grails, groovy, double, double-precision

基本上要保存的域不尊重浮点，因为它会变成另一种格式

我有下一个域

```
class Location {
    double latitude
    double longitude
    static belongsTo=[ product: Product ]   
    static constraints = {      
        latitude nullable:false, blank:false
        longitude nullable:false, blank:false       
    }
} 
```

看法：

```
<g:form class="form-horizontal" action="create" id="${locationInstance?.product?.id}" >
    <fieldset>
        <f:with bean="locationInstance">
            <f:field property="lat"/>
            <f:field property="lon"/>
        </f:with>
    </fieldset>
</g:form>
<button type="button" class="submit btn btn-primary">
        <i class="icon-plus"></i>
        <g:message code="default.add.label" args="[message(code: 'location.label', default:'Location')]" default="Add Map"/>
</button> 
```

控制器：

```
import grails.converters.JSON
class LocationController {
    def create() {
    def model = [productInstance:Product.findByIdAndUser(params.remove("id"),negoexService.currentUser)]
    def responseReturn = [success:false]
    def redirectParams = [controller:"product", action:"list"]
    if (!model.productInstance) {
        responseReturn.message = message(code: "default.not.found.message", args: [message(code: "product.label", default: "Product"), params.id])
    }else{
        redirectParams.action = "edit"
        redirectParams.id = model.productInstance.id
        params.product = model.productInstance
        params.remove("action")
        params.remove("controller")
        model.locationInstance = new Location(params)
        println params // here are showed 29.089177 and -110.961227
        println model.locationInstance.lat // out is 2.9089177E7
        println model.locationInstance.lon // out is -1.10961227E8
        if(request.method=="POST"){
            if (model.locationInstance.save(flush: true)) {
                responseReturn.success = true
                responseReturn.message = message(code: "default.created.message", args: [message(code: "location.label", default: "Location"), model.locationInstance])
            }else{
                responseReturn.errors = model.locationInstance.errors.allErrors
            }
        }
    }
    withFormat {
        html {
            if(request.xhr && !model.productInstance){
                render view:"/messageAjax", model:responseReturn
            }else{
                if(responseReturn.message){flash.message = responseReturn.message}
                if(!model.productInstance || responseReturn.success){
                    redirect redirectParams
                }else{
                    render view:"create"+(request.xhr?"Ajax":""), model:model
                }
            }
        }
        json {render responseReturn as JSON}
        js   {render responseReturn as JSON}
        xml  {render responseReturn as XML}
    }
} 
```

请求位置保存（）

参数在保存后像 params.latitude=29.089177 和 params.longitude=-110.961227 一样到达，这些值像 locationInstance.latitude=29089177 和 locationInstance.longitude=-110961227 一样存储在数据库中。

要在视图中显示，如 latitude=2.9089177E7 和 longitude=-1.10961227E8

有什么问题，我有另一个主题类项目并且运行正常。并尝试将属性名称和类型更改为浮动而不是解析

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:34:01.597

只需将其添加到 conf/spring/resources.groovy

```
beans = {
    localeResolver(org.springframework.web.servlet.i18n.SessionLocaleResolver) {
        defaultLocale = new Locale("es","MX")
        java.util.Locale.setDefault(defaultLocale)
    }
} 
```

保持坐标格式，并且保存时不会更改值。

# arrays - 元素按递增顺序排列的最长子数组？

> ID：14492047
> 
> 赞同：3
> 
> 时间：2013-01-24T00:44:46.987
> 
> 标签：arrays, algorithm

给定一个数组 = {1 2 3 3 2 4 6 7}

最长递增子数组是 2 4 6 7。请注意，这与最长递增*子序列*不同，因为这些值必须是连续的。

这个问题是否有任何 O(n) 解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T02:30:19.323

您可以只使用动态编程。

伪代码：

```
def DP(a[]):
    dp[1] = 1
    for i = 2 to n:
        if a[i] > a[i - 1]:
            dp[i] = dp[i - 1] + 1
        else:
            dp[i] = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T00:53:18.307

是的，你可以用 o(n) 找到最长的子数组。从头开始跟踪当前序列和最长序列。在元素的每一步都比前一个更大的时候增加当前序列的长度。如果当前序列比最长序列长，则更新最长序列。如果当前元素小于前一个元素，则重置计数器。最后，您将获得最长的序列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T10:37:15.050

```
 1 < 2 < 3 >= 3 >= 2 < 4 < 6 < 7
| 1   2   3  | 1  | 1   2   3   4 <- Length of runs 
```

从左到右遍历数组。跟踪当前运行的时间。

当运行结束时，将其与迄今为止的最佳运行进行比较，您存储长度和结束位置。如果刚刚结束的运行更好，则更新最佳运行数据。

```
 1 < 2 < 3 >= 3 >= 2 < 4 < 6 < 7
| 1   2   3  | 1  | 1   2
          ^
          Longest run, 
          ending at index 2

  1 < 2 < 3 >= 3 >= 2 < 4 < 6 < 7
| 1   2   3  | 1  | 1   2   3   4
          ^                     ^
          Longest run,          Current run ends
          ending at index 2     Better than last longest run, update 
```

由于您只遍历数组一次，一次只访问一个元素以及最佳运行数据，因此您对每个元素执行恒定时间。因此，算法运行在`O(n)`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-13T18:21:34.413

```
 int flag = 0;
    int maxSubarray =0;
    int maxStart=0,maxEnd=0,start=0,end=0;
    for(int i=1;i<n;i++){
        if(a[i-1]<a[i]){
            if(flag!=1){
                start = i-1;
                flag=1;
            }
            if(i == n-1){
                end = n-1;
            }
        }
        else{
            if(flag==1 ){
                end = i-1;
                flag =0;
            }
        }
        if(maxSubarray < end - start){
            maxSubarray = end - start;
            maxStart = start;
            maxEnd = end;
        }
    }

    System.out.println(maxSubarray);
    System.out.println("Starting index = "+maxStart+" Ending index = "+maxEnd);` 
```

`

**时间复杂度**：O(n) **空间复杂度**：O(1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T00:48:20.397

您应该能够在线性时间内解决这个问题，如下所示。保持在每个点

*   到目前为止看到的最长递增子数组的长度/起点，
*   您看到的数组中的最后一个元素（如果您还没有看到任何东西，则为哨兵值），并且
*   以当前值结尾的最长递增子数组的长度。

然后，您可以一次循环遍历数组，并对每个值执行以下操作：

*   如果前一个值是哨兵：
    *   将先前的值设置为当前值。
    *   将当前长度设置为 1。
*   否则，如果先前的值小于当前值：
    *   将先前的值设置为当前值。
    *   增加当前子数组的长度。
*   否则，如果前一个值大于当前值：
    *   将前一个值设置为当前值
    *   将当前长度设置为 1。
*   与上述无关，如果当前长度大于找到的最大长度：
    *   将找到的最大长度设置为当前长度。
    *   记录到目前为止您发现的序列的开始（它是当前长度减去该序列中第一个元素的位置）。

这确实 O(1) 工作 O(n) 次，因此整个解决方案在 O(n) 时间内运行。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-13T20:32:33.133

Jun HU 的回答是正确的，但我认为我们不需要维护一个会占用 O(n) 空间的数组。我们可以改为跟踪当前子数组的大小，例如

```
 int maxSize, currentSize = 1;
 for (int i = 1; i < array.size(); i++) {
     if (array[i] > array[i-1]) {
         currentSize++;
         maxSize = max(currentSize, maxSize);
     } else {
         currentSize = 1; 
     }
 } 
```

这是有效的，因为在对数组进行排序时，如果当前元素不高于前一个元素，则当前子数组不再按递增顺序排列，因此我们不再关心它的大小。这样，我们实现了恒定的空间复杂度，同时保持了线性时间复杂度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-18T16:13:31.263

```
def lis(a):                                                                                                                                                   
    m = 0                                                                                                                                                     
    c = 1                                                                                                                                                     
    index = 0                                                                                                                                                 

    for i in xrange(1, len(a)):                                                                                                                               
        x = a[i]                                                                                                                                              
        if x > a[i - 1]:                                                                                                                                      
            c += 1                                                                                                                                            
        else:                                                                                                                                                 
            if c > m:                                                                                                                                         
                m = c                                                                                                                                         
                index = i                                                                                                                                     
                c = 1                                                                                                                                         
    if c > m:                                                                                                                                                 
        m = c                                                                                                                                                 
        index = i                                                                                                                                             
    return a[i - m + 1: i + 1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-02T03:50:46.467

Java 中的 O(n) 实现，也是通用的，因此可以用于任何事情！

```
import java.util.Arrays;

public class LongestIncreasing {

    private static class PairHolder<T> {
        int start = -1;
        int end = -1;
        int weight = -1;
        PairHolder(int start, int end) {
            this.start = start;
            this.end = end;
            this.weight = start == -1 ? -1 : end-start+1;
        }

        String getSubArray(T[] arr) {
            return Arrays.toString(Arrays.copyOfRange(arr, start, end+1));
        }

        @Override
        public String toString() {
            return "[" + start + ", " + end + ", weight: " + weight + "]";
        }
    }

    public static <T extends Comparable<? super T>> void getContiguousChain(T[] chain) {
        int start = -1, end = -1;
        PairHolder<T> longest = new PairHolder<T>(-1, -1);
        for (int i = 0; i < chain.length - 1; i++) {
            if (start == -1) {
                start = i;
                end = i;
            }

            if (chain[i+1].compareTo(chain[i]) == -1 || chain[i+1].compareTo(chain[i]) == 0) {
                if (end-start+1 > longest.weight) {
                    longest = new PairHolder<T>(start, end);
                }

                start = -1; end = -1;
                continue;
            }

            end = i+1;
        }

        if (end-start+1 > longest.weight) { //corner case where last element of chain is also end of array
            longest = new PairHolder<T>(start, end);
        }

        System.out.println(longest.getSubArray(chain));
    }

    public static void main(String[] args) {
        Integer[] arr = {2, 3, 3, 4, 5, 6, 2, 9, 10, 12, 14, 13};
        getContiguousChain(arr);
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-15T16:01:13.533

这将为您提供范围（开始和结束索引）。

```
public static Range getLargest(int[] array) {
    int max = 1;
    int start = 0;
    int aux = 0;
    int count = 1;
    for (int i = 1; i < array.length; i++) {
        if (array[i] > array[i - 1]) {
            count++;
        } else {
            aux = i;
            count = 1;
        }
        if (count > max) {
            max = count;
            start = aux;
        }
    }
    return new Range(start, start + max - 1);
}

public static class Range {
    public final int start;
    public final int end;
    public Range(int start, int end) {
        this.start = start;
        this.end = end;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-16T15:12:25.433

这不是动态编程解决方案，但我只是在某些情况下尝试了它，并且看起来可以正常工作。对你来说可能是一个很好的起点

```
public static int MaxSlice(int[] A)
    {
        //100,40,45,50,55,60, 30,20,40,25,28,30
        int maxstartIndex = 0;
        int MaxAscendingCount = 0;
        int thisStartIndex = 0;
        int thisAscendingCount = 0;
        bool reset = false;
        bool wasLastAscending = false;
        for (int i = 0; i < A.Length-1; i++ )
        {
            if (A[i + 1] > A[i])
            {
                if(!wasLastAscending)
                    thisStartIndex = i;
                thisAscendingCount++;
                wasLastAscending = true;
            }
            else
            {
                reset = true;
                wasLastAscending = false;
            }

            if (reset && thisAscendingCount > MaxAscendingCount)
            {
                MaxAscendingCount = thisAscendingCount;
                maxstartIndex = thisStartIndex;
                reset = false;
                thisAscendingCount = 0;

            }

        }
        MaxAscendingCount = thisAscendingCount;
        maxstartIndex = thisStartIndex;
        return maxstartIndex;
    } 
```

# html - CSS 是否应该因协议而异（HTTP 与 HTTPS）？

> ID：14492048
> 
> 赞同：0
> 
> 时间：2013-01-24T00:44:54.123
> 
> 标签：html, css, ssl

我使用常见的嫌疑人开发了一个站点：MVC 和 jQuery。生产站点是 SSL ......但我也有一个后门可以通过 http 对其进行测试。

页面的整体结构是：

```
<body>
  <div class="container">
    <div class="nav"/>
    <div class="control"/>
  </div>
</body> 
```

...和相关的 .css 看起来像这样：

```
.container { height: 100%; width: 100%; }
.nav { float: left; width: 23%; overflow-y: auto; overflow-x: hidden; }
.control { float: right; width: 74%; } 
```

当我通过http查看它时，导航的内容太大并且显示了垂直滚动条。但是，当我通过https地址查看时，.nav顺着页面运行，整个页面都有滚动条。

我更希望在 http 视图中有这种行为。

如果我添加：

```
html, body { height: 100%; width: 100%; } 
```

...它在 http 中没有净效果...但是，它就像我有溢出-y：隐藏在 html 和/或正文上。

至少这些浏览器的行为差异是一致的：ie8、ie9 和 chrome。

我能做些什么来保持 https 中的 http 行为吗？行为差异是否记录在任何地方？

我已经发布了页面的图像，通过同一站点上的 http 和 https 绑定可以看到：

flickr.com/photos/92527792@N04/8409094719/in/photostream flickr.com/photos/92527792@N04/8410189866/in/photostream

需要明确的是，将文件加载到浏览器中似乎没有任何问题。.css、.js 和 html 都很好。区别似乎在于浏览器在内容关闭后如何处理内容，处理来自端口 443 的 html 与来自 80 的 html 略有不同。

谢谢你的时间，

粘土

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:48:10.057

http:// 和 https:// 不是文件格式，也不会以任何方式改变文件，它们指示文件将通过的协议传输，例如 file:// 和 ftp:// 指向同一个文件也将传输相同的数据。

确保在两种情况下都使用相同的 .css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:48:04.220

粘土，

确保页面正在请求它的 .css 文件，其中包含与**协议相关的 uri**。（*假设*：有问题的 css 存在于页面本身内部的单独文件中。）

否则，您将获得请求安全内容的非安全页面，反之亦然，这将导致在某些安全设置下出现加载问题。（有些浏览器只是拒绝访问，有些浏览器会先发出警告，有些浏览器会提供用户对此行为的偏好。）

通过*从原始 url 中删除协议来*创建**相对于协议的 uri**。例如： 如果原始 url 读取 其协议相对对应的读取： *`https://sub.domain.com/folder/my.css`
`//sub.domain.com/folder/my.css`*

# ios - 是什么导致了这个 Core Data 输出的差异？

> ID：14492052
> 
> 赞同：0
> 
> 时间：2013-01-24T00:45:56.127
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我在使用 NSFetchedResultsController 时遇到了困难，它在我第一次运行我的应用程序时返回 0 个部分，但在我随后关闭并重新加载应用程序时返回正确数量的部分。

我注意到，如果我 NSLog 数组 [[self.fetchedResultsController fetchedObjects] 描述]，我会在第一次和后续时间之间得到稍微不同的结果，我希望这能帮助我找出整体问题。

第一次运行：

```
"<Contact: 0x1fc7a000> (entity: Contact; id: 0x1fc79cb0 <x-coredata:///Contact/tC060241D-2C37-4F78-AA69-5FBE3CB9DDFB364> ; data: {\n    email = nil;\n    emails =     (\n    );\n    name = \"AIB Dundrum\";\n    nameInitial = A;\n    parseID = nil;\n    phoneNumber = 012983777;\n    signedUp = 0;\n})" 
```

第二轮：

```
"<Contact: 0x1e35f3f0> (entity: Contact; id: 0x1e2ab020 <x-coredata://FD1A50BA-9A08-452D-B4B4-2072FA1B190C/Contact/p337> ; data: <fault>)" 
```

任何人都可以向我解释这些输出之间的区别，为什么数据在我第二次运行应用程序时会出现这样的错误，以及我如何让它第一次这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:51:31.667

在您第二次运行时，您看到了一个[fault](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)，这意味着 Core Data 知道该对象存在于图中，但除此之外它什么都不知道。它需要返回持久存储来获取其他信息，通过使用错误对象，Core Data 可以限制内存中对象图的大小。“触发故障”的一种方法是访问对象的属性之一。您可以在调试器中通过在记录联系人 NSManagedObject 的描述之前放置断点来执行此操作。命中断点后，在调试器控制台中键入以下内容。

`po [myContact willAccessValueForKey:nil]`这应该会触发故障，然后当您记录描述时您不会看到`data: <fault>`，而是所有属性及其值，这就是您在“首次运行”中看到的内容。

我不确定的一件事是为什么您会`x-coredata:///Contact/tC060241D-2C37-4F78-AA69-5FBE3CB9DDFB364`在 First Run 和`x-coredata://FD1A50BA-9A08-452D-B4B4-2072FA1B190C/Contact/p337`Second Run 中看到。我很有信心地说，似乎在 First Run 中联系人尚未保存，`p337`您在 Second Run 中看到的实际上代表了后备持久存储中的记录 ID。你永远不应该依赖这个 ID，但从我的调试和分析经验来看，这是我一直看到的情况。话虽如此，这就是让我相信在 First Run 中登录的联系人尚未保存在持久存储中的原因。

希望有帮助。

# regex - 编写与特定模式不匹配的正则表达式

> ID：14492053
> 
> 赞同：1
> 
> 时间：2013-01-24T00:45:58.607
> 
> 标签：regex, automata

如果我想从 1 和 0 的任何组合中匹配所有不包含“01”的字符串，我该怎么做？我知道如何查找此模式是否在字符串中，但是如何找到不包含此模式的匹配项？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:54:16.983

如果我没记错的话，这只有在字符串（长度为 1 或更大）时才会发生：

1.  仅包含 0
2.  仅包含 1
3.  以 1 个或多个 1 的序列开始，然后是 0 的序列

还有其他可能吗？

如果是这样的话，那么

```
/^(0+|1+0*)$/ 
```

无论如何，在实际意义上，我只是否定匹配。

```
if (!/01/) { ... } 
```

# elasticsearch - 弹性搜索 _search 与 _count 语法

> ID：14492055
> 
> 赞同：1
> 
> 时间：2013-01-24T00:46:18.827
> 
> 标签：elasticsearch

_search 和 _count 似乎采用不同的查询格式。例如，这是我的`_search`查询：

```
{
  query: {
    filtered: {
      query: { match: { Name: "bob" } },
      filter: { term: { GroupIds: 3 } }
    }
  }
} 
```

但为了`_count`理解它，我需要删除外部`query`：

```
{
  filtered: {
    query: { match: { Name: "bob" } },
    filter: { term: { GroupIds: 3 } }
  }
} 
```

那一个将无法使用`_search`。只是为了让我更加困惑，`_search`如果两者都被删除，将接受`query` **它** `filtered`：

```
{
  query: { match: { Name: "bob" } },
  filter: { term: { GroupIds: 3 } }
} 
```

那么在使用`_search`vs.时，Query DSL 的实际规则是什么`_count`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:16:25.653

搜索是 elasticsearch 中最复杂的操作之一，因此它在顶层接受多个不同的参数，包括、`query`、`filter`等。`facets``size`

该`query`参数应包含查询 DSL 定义的查询。它可以是任何查询，包括`match_all`or `filtered`。例如，下面是搜索请求接受所有记录并返回前 20 条的样子。

```
{
    "query": {
        "match_all": {}
    },
    "size": 20
} 
```

搜索请求中的`filter`参数可以接受过滤器（同样在 Query DSL 中定义）。此过滤器在搜索中具有特殊功能 - 它不会影响请求中的任何方面。`filter`因此，当您想要过滤搜索结果但又不想影响分面时，通常只将参数用于分面搜索是有意义的。在所有其他情况下，`filtered`查询通常会产生更快的结果。

说起来，`filtered`查询就是查询，所以可以用在`query`搜索请求的参数中。这也是一个复合查询。它在其参数中接受另一个查询并在其`query`参数中接受一个过滤器，`filter`并生成一个复合查询，该查询仅返回满足查询和它所包含的过滤器的文档。换句话说，查询`filter`中的参数`filtered`影响搜索结果和分面，而查询`filter`中的参数`search`只影响搜索结果，不影响分面。

最后是`count`请求。请求比请求`count`简单得多`search`。它不适用于构面，并且 size 参数实际上没有多大意义，因为我们总是要求完整计数。因此，所有`count`请求所期望的只是顶层的一个查询。例如，为了计算所有文档，`count`请求将包含如下内容：

```
{
    "match_all": {}
} 
```

# css - 带有左侧边栏空间的水平居中内容

> ID：14492062
> 
> 赞同：0
> 
> 时间：2013-01-24T00:46:49.637
> 
> 标签：css, layout

[http://jsbin.com/uloyep/2](http://jsbin.com/uloyep/2)

如果您查看上面的链接，您会看到 .content 水平居中，并且 .side 元素固定位于 .content 的左侧。但是，如果您将窗口/视口的大小调整为 1024 或更小，您会注意到 .content（900px 宽）仍然位于 body 的 1024px 宽度限制的中心，并且 .side 被截断。我想要设计的是一个居中的.content，当窗口的宽度<= 1024px 时，.side 元素的.content 左侧有剩余空间。

我一直在玩这个，并没有任何运气。我希望这里有人比我更有创意。

[您可以在http://jsbin.com/uloyep/2/edit](http://jsbin.com/uloyep/2/edit)编辑此 jsbin 的源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:29:55.350

这个怎么样？您使包装器仅适合您的内容，然后将内容居中对齐。

[http://jsbin.com/uloyep/31](http://jsbin.com/uloyep/31)

* * *

最终答案：http: [//jsbin.com/uloyep/49/](http://jsbin.com/uloyep/49/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:24:24.330

看起来实现我想要的唯一方法是使用一点 JS。

[http://jsbin.com/uloyep/47](http://jsbin.com/uloyep/47)

当窗口/视口 <= 1148px 时，我所做的只是给 body 元素一个 .too-small 类。当 body 上有一个 .too-small 类时，我给了 .wrap 元素一个 124px 的左边距。这完美地工作。

为什么身体的最小宽度是 1148 而不是 1024？因为 900 + 124 * 2 = 1148；但为什么是 124 * 2？好吧，124 是 900px 宽的 .wrap 元素居中且视口为 1148px 宽时两侧的空间大小。一旦视口低于 1148 宽度，则 .wrap 元素两侧的空间将小于 124px，这将使 .side 元素被裁剪/截断。所以，在这一点上，我给 .wrap 元素 124px 左边距，而不是唯一将被裁剪的部分是右边距。我希望这是有道理的。稍微玩一下，看看它是如何工作的。

如果有纯 CSS 解决方案，我还是很感兴趣的。但是，在那之前，这是我能想到的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T01:24:25.630

在这里查看我的修订：http: [//jsbin.com/uloyep/8/](http://jsbin.com/uloyep/8/) 这是您想要的效果吗？

我只是在 .side 和 .content div 上设置了“float:left”，并增加了包装器的宽度以适应它们。还从 .side div 中删除了“位置：固定”和边距，因为浮动完成了这项工作。

# git - 推分支解释为推主

> ID：14492063
> 
> 赞同：0
> 
> 时间：2013-01-24T00:46:57.783
> 
> 标签：git, jenkins

**环境：**

*   Jenkings 项目仅构建 Git 存储库的“主”分支。
*   一个带有 post-receive 钩子的 Git 存储库，用于通知 Jenkins 新的更改（使用 Git 1.7.10）。虽然脚本告诉 Jenkins 有新的更改，但是当 Jenkins 扫描存储库时，如果更改不在“主”分支中，它不会触发构建。

**问题**

一位开发人员在 10 天前向远程 master 推送了一个提交。Jenkins 项目成立于 5 天前。昨天，第二个开发人员提取了更改，创建了一个新分支并将其推回远程。也就是说，master 中没有任何变化。然而，Jenkins 项目启动了。查看 Jenkins 检测到的更改，这是第一个开发人员在 10 天前所做的最后一次提交，触发了构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:53:52.760

我意识到这个问题还没有得到回答..这就是我当时修复它的方式..

**原因**

Jenkins 的构建是从我们的 Git repo 的“post-receive”钩子脚本触发的：

```
#!/bin/bash
while read oldrev newrev refname
do
    true
done

curl http://jenkins/git/notifyCommit?url=ssh://git@devserver/repos/particualr_repo.git 
```

可以看出，脚本读取标准输入然后忽略它。因此，当从任何分支推送提交时，构建就会启动。但是由于我们的构建项目被配置为构建 master，并且由于最后一次提交到 master 是 10 天前，它会将其注册为导致构建的更改。

**解决方案（仅在推送主服务器时排队构建）**

更改挂钩脚本以仅推送构建主服务器。

```
#!/bin/bash

if ! [ -t 0 ]; then
   read -a ref
fi

IFS='/' read -ra REF <<< "${ref[2]}"
branch="${REF[2]}"

if [ "master" == "$branch" ]; then
   curl http://jenkins/git/notifyCommit?url=ssh://git@devserver/repos/particualr_repo.git
fi 
```

# validation - 验证由 Set 支持的 JSF selectManyListbox

> ID：14492065
> 
> 赞同：1
> 
> 时间：2013-01-24T00:47:24.080
> 
> 标签：validation, jsf, bean-validation

我的 JSF 应用程序中的验证存在问题：我有一个由 bean`<h:selectManyListbox>`支持的 a `Set`。Set 用`@NotNull`和注释`@Size(min=5, max=9999)`。

我现在的问题是：在用户没有在列表框中选择至少一个条目之前，不会验证该集合。如果他选择一个、两个或三个条目，则无法保存：验证错误。但如果他从不选择列表中的条目，他可以用空集保存。

有什么想法可以解决这个问题吗？

# c# - 从人员编辑器 SharePoint 控件中清除值

> ID：14492066
> 
> 赞同：1
> 
> 时间：2013-01-24T00:47:47.763
> 
> 标签：c#, sharepoint, peoplepicker

我的页面上有一个 PeopleEditor 控件。用户可以将用户添加到人员选择器，我有一个按钮可以向这些用户发送某种电子邮件。但是，即使在回发之后，人员选择器值中的值仍然存在。

有谁知道如何以编程方式清除字段？

我试过这个但没有做任何事情：http: [//jyothsnag.blogspot.com/2011/04/clearing-people-picker-control.html](http://jyothsnag.blogspot.com/2011/04/clearing-people-picker-control.html)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:23:55.820

你试过这个吗？PeopleEditor.CommaSeparatedAccounts = null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T16:21:43.413

> 您可以尝试`PeopleEditor.ResolvedEntities.Clear();` 在飞行中工作。

# asp.net - 不了解 IIS 经典和集成模式？

> ID：14492067
> 
> 赞同：3
> 
> 时间：2013-01-24T00:47:50.463
> 
> 标签：asp.net, .net, asp.net-mvc, iis, iis-7

这里有一个很好的解释，指出了 IIS 中经典 x 集成模式之间的区别：

[https://help.maximumasp.com/KB/a657/explanation-of-classic-vs-integrated-mode-in-iis-7x.aspx](https://help.maximumasp.com/KB/a657/explanation-of-classic-vs-integrated-mode-in-iis-7x.aspx)

同样在这里，ISAPI 扩展的解释：

[http://msdn.microsoft.com/en-us/library/ms525172(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525172(v=vs.90).aspx)

我的问题是：我正在开发的应用程序（Asp.Net MVC 应用程序）是 ISAPI 扩展吗？我这么问是因为我不太清楚。

另外，从第一个链接：

> 当使用经典模式时，服务器使用两个管道来处理请求，一个用于本机代码，另一个用于托管代码。在这种模式下，应用程序没有充分利用 IIS 7.X 提供的所有功能。
> 
> 集成模式通过 IIS 的统一管道处理所有请求，并通过同一管道与 ASP.NET 紧密集成。ASP.NET 看到每个相关的请求并在此过程中进行操作，而不是充当外部插件

1.  集成模式提供哪些优势？

从第二个链接：

> IIS 使用文件系统中 DLL 文件的虚拟位置将 ISAPI 扩展映射到由 IIS 提供服务的 URL 命名空间

假设 IIS 中有一个请求：“http://localhost”。

1.  IIS 服务的 URL 命名空间是什么？DLL的虚拟位置设置在哪里？

对不起那些新的问题。我是 Windows 开发的新手，所以我很难理解这些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:07:21.960

如果您正在编写 asp.net mvc，则不需要开发 isapi 扩展，因为如果启用 mvc，则 mvc 由 iis 的 asp.net 部分处理。作为 IIS 管理器的一部分，您可以查看文件扩展名的映射。.dll 安装在 32 或 64 的 windows 系统中，具体取决于 windows 使用的内存模型。

站点 URL 映射到网站本地主机映射到 c:\inetpub\wwwroot

# mysql - MySQL 5.1 到 5.5 升级导致写入速度显着下降（MyISAM + 索引）

> ID：14492072
> 
> 赞同：2
> 
> 时间：2013-01-24T00:48:17.060
> 
> 标签：mysql, myisam, indexing

我们刚刚从 MySQL 5.1 升级到 5.5。以前需要约 3 分钟才能将约 200k 行插入具有 3 个索引的 MyISAM 表中的插入脚本现在需要约 8 分钟！删除索引可以解决问题！？

读取（选择）很好（5.5 比 5.1 更快）

索引行为是否有所不同，或者可能需要调整一些奇怪的配置参数？

提前感谢您的任何指点！

## 系统信息：

Fedora 17，Mysql 5.5.29-log，16GB RAM

MyISAM 密钥缓冲区 = 4GB

MyISAM 索引大小 = ~800 MB

MyISAM 表大小 = 4.4 GB

INNODB 缓冲池 = 8GB

INNODB 表+索引大小 = ~12GB

*   这是每个请求的表定义：

创建表`MY_TABLE`

( `MY_TABLE_ID`int(10) unsigned NOT NULL AUTO_INCREMENT,
`FIELD_1`char(1) NOT NULL,
`FIELD_2`int(11) NOT NULL,
`FIELD_3`varchar(64) NOT NULL,
`FIELD_4`varchar(64) DEFAULT NULL,
`FIELD_5`varchar(64) DEFAULT NULL,
`FIELD_6`varchar(8) DEFAULT空值，
`FIELD_7`varchar(64) 默认空值，
`FIELD_8`varchar(64) 默认空值，
`FIELD_9`varchar(64) 默认空值，
`FIELD_10`varchar(16) 默认空值，
`FIELD_11`varchar(124) 默认空值，
`FIELD_12`varchar(124) 默认空值，
`FIELD_13`varchar(124) 默认空值,
`FIELD_14`varchar(32) 默认空值,
`FIELD_15`varchar(32) 默认空值,
`FIELD_16`varchar(64) 默认空值,
`FIELD_17`varchar(64) 默认空值,
`FIELD_18`varchar(64) 默认空值,
`FIELD_19`varchar(64) 默认空值,
`FIELD_20`char(1) 默认空值,
`FIELD_21`文本，
`FIELD_22`text,
`FIELD_23`text,
`FIELD_24`varchar(32) DEFAULT NULL,
`FIELD_25`varchar(64) DEFAULT NULL,
`FIELD_26`varchar(16) DEFAULT NULL,
`FIELD_27`varchar(64) DEFAULT NULL,
`FIELD_28`varchar(64) DEFAULT NULL,
`FIELD_29`text,
`FIELD_30`int(11) NOT NULL,
`FIELD_31`varchar( 16) DEFAULT NULL,
`FIELD_32`varchar(16) DEFAULT NULL,
`CREATION_DATE`int(11) NOT NULL,
`MODIFICATION_DATE`timestamp NULL DEFAULT NULL,
PRIMARY KEY ( `MY_TABLE_ID`),
KEY `I_FIELD_4`( `FIELD_4`),
KEY `I_FIELD_2`( `FIELD_2`),
KEY `I_FIELD_3`( `FIELD_3`) ENGINE=MyISAM DEFAULT CHARSET=latin1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:33:15.497

好吧，经过大量故障排除后，问题已缩小到坏驱动器。不是 MySQL 5.5。现在用不同的驱动器一切都很好..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T19:14:40.413

RAM 太拥挤。

对于 16GB RAM 和 InnoDB 和 MyISAM 的混合：

```
key_buffer_size = 1600M
innodb_buffer_pool_size = 6G 
```

# authentication - Kerberos 站点管理员集成

> ID：14492078
> 
> 赞同：1
> 
> 时间：2013-01-24T00:48:40.057
> 
> 标签：authentication, single-sign-on, kerberos, siteminder

我们的组织中有一个 Siteminder 正在运行，我想使用 Kerberos 对用户进行身份验证。

设置是这样的：我们的 appserver 有可以验证用户的 siteminder 代理，代理连接到 Siteminder，siteminder 连接到活动目录。

我的问题是——我需要在我的应用服务器上做什么才能使用 Kerberos 对用户进行身份验证。

我可能会接受一个很好的指南来作为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:31:40.743

本[指南](http://guireg.com/2012/11/15/protect-iis-7-and-impersonate-your-user-with-siteminder-and-kerberos/)说您需要将服务帐户设置为系统并将 IIS 中的身份验证设置为仅匿名。起初这对我来说听起来很疯狂，但是当您继续阅读时，他们会解释您添加的其他 ISAPI dll 将如何拦截 SiteMinder 身份验证并*应*通过身份验证。不确定它是否真的是kerberos......

# python - 你如何在 PyQt 的另一个线程中运行 Matplotlib

> ID：14492083
> 
> 赞同：3
> 
> 时间：2013-01-24T00:49:18.077
> 
> 标签：python, matplotlib, pyqt4

我需要在我的 PyQt 应用程序中显示一些图表，所以我记下了这些代码。这是可行的，但有时，绘制图表会花费大量时间，它会“冻结”主窗口。

我认为在另一个线程中进行应该可以解决它。但是我该怎么做呢？或者，还有另一种方法可以在“非阻塞”模式下绘制图表？

```
from PyQt4 import QtGui
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas   
from matplotlib.figure import Figure

class MplCanvas(FigureCanvas):

    def __init__(self):
        self.fig = Figure()
        self.axes = self.fig.add_subplot(111)

        # do something...
        FigureCanvas.__init__(self, self.fig)
        FigureCanvas.setSizePolicy(self, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Expanding)
        FigureCanvas.updateGeometry(self)
        # do something...

    def draw(self):
        # do something... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:59:56.610

您应该`QThreads`在您的`Qt`应用程序中使用我们（让框架为您完成所有艰苦的工作）

1.  将您的耗时工作放在工人阶级中（派生自`QObject`）

2.  在您正在绘制绘图的类中添加类似

    ```
    self.thread = QtCore.QThread(parent=self)

    self.worker = Worker(parent=None)
    self.worker.moveToThread(self.thread)
    self.thread.start() 
    ```

并通过信号/插槽与您的工人沟通。如果您直接调用它（如 中`self.worker.do_slow_stuff()`），它将在您调用它的线程上运行，这将阻塞主事件循环，使界面冻结。

一个很好的[解释](http://blog.qt.digia.com/blog/2006/12/04/threading-without-the-headache/)如何（而[不是](http://blog.qt.digia.com/blog/2010/06/17/youre-doing-it-wrong/)）做线程`QThread`（阅读两者..第一个现在描述了默认行为）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:42:00.103

像这样的简单用途的 Python 线程基础非常简单。

你需要

```
import threading 
```

然后，不只是调用 x.draw()，而是创建一个线程并按如下方式运行它：

```
draw_thread = threading.Thread(target=x.draw)
draw_thread.start() 
```

这可能会让你至少完成 90% 的工作。您可以阅读文档来检测诸如仍在运行的线程、等待线程等内容。但从本质上讲，这并不难，如果 ti 只是简单的交互式图形，这可能就足够了。

但是请注意，如果 draw() 引用全局变量，则可能会发生竞争条件，从而使您的程序不可靠。这是编写具有良好耦合、干净接口和不引用可变全局变量的代码的另一个优势（除非使用锁定来保护这些资源）。

# php - php、mysql访问静态引用表的最佳方式

> ID：14492085
> 
> 赞同：0
> 
> 时间：2013-01-24T00:49:30.490
> 
> 标签：php, mysql

我正在寻找一些想法。我正在编写这个具有参考表的 PHP 应用程序。此参考表中的数据是相当静态的。我用它来填充动态表单的选择列表以及在其他地方引用它。

该表基本上是：

```
key = stored in other tables
description = a long description of the key 
```

我的应用程序将大量引用此表。该表大约有 600 行。

我正在寻找有关如何最好地访问此信息的建议。一页可以引用它20次。

我正在寻找关于什么是最快和最有效的意见。

我倾向于在页面的开头创建一个准备好的语句，然后每次只传递新的参数，让 mysql 处理缓存。

存储过程会更快，还是将表加载到会话数组中

感谢您的任何想法，建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:23:10.810

如果你真的在寻找速度，老实说，你必须有大量的流量才能首先成为一个问题，我建议创建程序来制作你可以在不添加 WHERE 参数的情况下调用的表（因此，如果您的页面上有 5 个不同的选择语句，您将有 5 个不同的表）。而且由于您的数据大部分是静态的，您只需经常通过事件运行创建表过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:01:04.033

如前所述，如果您可以通过拨打电话而侥幸成功，那么您就可以这样做。

如果性能是一个问题，或者你会感觉更好，让它更快，听起来这个表是一个很好的缓存候选者，因为它使用键值对并且很少更改。

查看 apc 或 memcache。这方面的一个例子（使用 apc）是：

```
function getDescription($key){
    $result = apc_fetch($key);//Possibly prefix with method unique prefix.
    if($result === false) {
        //No result stored
        $result = getDescriptionFromDatabase($key);
        apc_store($key, $result);//Can also add a ttl if needed
    }
    return $result;
} 
```

这只会从数据库中获取一次结果（直到服务器/php 重置等），从而减少数据库调用。

# html - 表格单元格中的水平滚动

> ID：14492088
> 
> 赞同：4
> 
> 时间：2013-01-24T00:50:14.543
> 
> 标签：html, css

我有以下特殊问题。让我们从一个代码片段开始：

```
...
<td>
   <div class="scrollable">...</div>
   ...other cell content...
</td>
... 
```

现在我希望表格呈现好像`div.scrollable`不会占用任何水平空间（即`div.scrollable`不会在表格的右侧推动），但如果是则显示水平滚动条（在 上，`div.scrollable`而不是在整个单元格上）`div.scrollable`比包含单元格更宽。这可以通过 CSS 实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T00:56:55.187

使用您的基本示例，您可能需要在`td`and 上设置宽度才能使用`overflow`and `overflow-y`。`overflow-y`仅是 CSS3，但您没有指定 IE8 及以下版本。

**编辑**对不起你也`display:block;`需要`td`

```
td { display: block; width: 50px; } 
.scrollable { overflow: scroll; overflow-y:hidden; } 
```

**更新：** 请参阅 jsfiddle 示例，注意表格上的 100% 宽度和固定布局。这就是为了阻止示例仅向视口添加水平滚动并继续。 [http://jsfiddle.net/MMeTe/4/](http://jsfiddle.net/MMeTe/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:00:41.040

归功于 Pricey，因为他的 jsfiddle 示例回答了这个问题，但是为了在此处使用代码获得答案，我将其附在下面：

```
...
<style type="text/css>
  .mytable {
    table-layout: fixed;
  }
  .scrollable{
    overlow-y: auto;
  }
</style>
...
<table class="mytable">
 <tr>
  <td>
   <div class="scrollable">...</div>
   other content...
  </td>
 </tr>
</table> 
```

# android - 后退按钮错误，动作停止

> ID：14492089
> 
> 赞同：0
> 
> 时间：2013-01-24T00:50:13.967
> 
> 标签：android, android-button

我的代码有关于后退按钮的问题。我在这个网站上尝试了很多答案。我有使用 startActivityforResult 调用第二个活动的 mainActivity。第二个活动启动蓝牙并显示绑定设备的列表，但如果我按下后退按钮，它会停止应用程序并出现错误。

```
public class Main extends Activity implements OnSeekBarChangeListener{
...

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        String address = data.getExtras().getString(BondedDevices.DEVICE_ADDRESS);
        if (resultCode==Activity.RESULT_CANCELED){
            Toast.makeText(getApplicationContext(), "Finalizando dispositivos pareados", Toast.LENGTH_SHORT).show();
            return;
        }
        switch (requestCode) {
        case DISPOSITIVOS_PAREADOS:
            if(resultCode==Activity.RESULT_OK){
                mConnectThread = new ConnectThread(address);
                mConnectThread.start();
                estado = EST_CONECTADO;   //informa que esta conectado
                atualizaEstado();
                break;
            } 
        return;
        }
    } 
```

但是，当我在第二个活动中，并尝试按下后退按钮返回主活动时，我在主活动上收到错误，我的应用程序返回一个错误：

```
public class BondedDevices extends ListActivity {
....

@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        if(D) Log.e(TAG, "+++ ON BACK PRESSED +++");
        setResult(Activity.RESULT_CANCELED);
        this.finish();
    } 
```

或像这样：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(event.getAction() == KeyEvent.ACTION_DOWN)
        {
            switch(keyCode)
            {
            case KeyEvent.KEYCODE_BACK:
                Intent returnIntent = new Intent();
                setResult(Activity.RESULT_CANCELED, returnIntent);
                finish();
                return true;
            }
        }

        return false; 
    } 
```

我已经尝试了很多不同的代码，但它仍然不起作用。请有人帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:44:10.983

你应该打电话`super.onBackPressed();`

像这样

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    if(D) Log.e(TAG, "+++ ON BACK PRESSED +++");
    setResult(Activity.RESULT_CANCELED);
    this.finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:53:51.810

当您从第二个返回时`Activity`，您尚未将 an 设置为后退按钮案例中结果的数据，但在检查for`Intent`的值之前您要做的第一件事是尝试从 获取地址，该地址为 null 所以这会导致.`resultCode``RESULT_CANCELED``Intent``NullPointerException`

您需要重新排序您的行，`onActivityResult()`使其看起来更像这样：

```
if (resultCode==Activity.RESULT_CANCELED){
    Toast.makeText(getApplicationContext(), "Finalizando dispositivos pareados", Toast.LENGTH_SHORT).show();
    return;
}
//Do this after checking for cancel
String address = data.getExtras().getString(BondedDevices.DEVICE_ADDRESS);

/* The rest of the existing code */ 
```

此外，您不应该同时覆盖`onBackPressed()`and `onKeyDown()`，坚持使用其中之一。您只会混淆首先调用哪个代码路径。即使在结果设置为空白的情况下`Intent`，您仍然会`NullPointerException`在现有代码中获得 a，因为该附加包`Intent`仍然为空。

# unicode - 如何将unicode字体转换为ansi

> ID：14492090
> 
> 赞同：0
> 
> 时间：2013-01-24T00:50:14.083
> 
> 标签：unicode, fonts, adobe, ansi

我正在尝试使用孟加拉语书写产品[AVRO](http://www.omicronlab.com/)，但由于它默认使用 UNICODE，因此使用 Photoshop、pagemaker 等 ADOBE 产品根本不起作用。当我将模式更改为 ANSI 时，AVRO 可以工作，但我还必须将字体更改为 ANSI 编码字体（unicoded 字体不起作用）。现在如果有人找到他们中的任何一个，那就太好了——

**1) 孟加拉语 ANSI 编码字体的集合。**

```
or 
```

**2) 将这些 UNICODE 字体转换为 ANSI 字体的方法（如果可能，我实际上不知道）**

```
or 
```

**3) 在 Adob​​e 产品上使用它们并仍然使用 unicode 字体的解决方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T18:34:23.830

有许多软件，如 Indica、Ramdhenu、Easy DTP 等可以输入 Pagemaker、Photoshop、coreldraw 等。我使用并更喜欢 Indica。

# iphone - 在 iOS 应用程序上添加组表视图部分？

> ID：14492091
> 
> 赞同：0
> 
> 时间：2013-01-24T00:50:20.223
> 
> 标签：iphone, objective-c, uitableview, ios6

好的，所以我正在编写一个 iPhone 应用程序，并将数据加载到分组表视图中，我创建了一个数据模型：

```
DataModel.m

#import "GeometryDataModel.h"

@implementation GeometryDataModel
@synthesize titleGeo =_titleGeo;

-(id)initWithTitleGeo:(NSString *)titleGeo
{
    if ((self = [super init])) {
        self.titleGeo = titleGeo;
    }
    return self;
}@end 
```

然后我继续写数据表……

```
DataTable.m
#import "GeometryTableData.h"
#import "GeometryDataModel.h"

@implementation GeometryTableData
@synthesize dataGeo = _dataGeo;
@synthesize thumbImageGeo = _thumbImageGeo;

- (id)initWithTitleGeo:(NSString *)titleGeo thumbImageGeo:(UIImage *)thumbImageGeo {
    if ((self = [super init]))
    {
        self.dataGeo = [[GeometryDataModel alloc] initWithTitleGeo:titleGeo];
        self.thumbImageGeo = _thumbImageGeo;
    }

    return self;
}
@end 
```

然后我创建了一个视图控制器来设置它

```
ViewController.m

#import "GeometryViewController.h"
#import "GeometryTableData.h"
#import "GeometryDataModel.h"

@interface GeometryViewController ()

@end

@implementation GeometryViewController
@synthesize geoCalculatorList = _geoCalculatorList;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

        [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _geoCalculatorList.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *geoCell = [tableView dequeueReusableCellWithIdentifier:@"Geometry"];
    GeometryTableData *geoTableStuff = [self.geoCalculatorList objectAtIndex:indexPath.row];
    geoCell.textLabel.text = geoTableStuff.dataGeo.titleGeo;
    geoCell.imageView.image = geoTableStuff.thumbImageGeo;
    return geoCell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

最后，在 AppDelegate.m 文件中，我将它实现到表中：

```
sectionOne = [[TableData alloc] initWithTitle:@"A cell" thumbImage:[UIImage
     imageNamed:@"none.png"]];
sectionTwo = [[TableData alloc] initWithTitle:@"Another separated cell" thumbImage:[UIImage
    imageNamed:@"none.png"]];

NSMutableArray *TableData = [NSMutableArray arrayWithObjects:sectionOne,sectionTwo, nil];

UITabBarController * tabController = (UITabBarController *) self.window.rootViewController;
ViewController * algebraController = [tabController.viewControllers objectAtIndex:0];
Controller.calculatorList = TableData; 
```

我的问题是，我将如何在分组表视图中创建部分，比如使用我当前的系统将“sectionOne”和“sectionTwo”放入表的不同部分？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:52:38.343

我不确定将“sectionOne”和“sectionTwo”放在不同的部分是什么意思。您希望它们成为剖面视图吗？通常，您可以通过一个比简单数组更复杂的数组来将数据放在部分中。它可以采用多种形式，数组数组可能是最简单的。如果您的数据是这样设置的，那么您在 numberOfSectionsInTableView 中传递 theData.count，在 numberOfRowsInSection 中传递 [[theData indexAtObject:section] count]。在 cellForRowAtIndexPath 中，您将使用如下内容：

```
cell.textLabel.text = [[theData objectAtIndex:indexPath.section] objectAtIndexPath:indexPath.row]; 
```

您可以使用新的数组语法将其缩短为：

```
cell.textLabel.text = theData[indexPath.section][indexPath.row]; 
```

# scala - 如何在 Scala 中列出源自特征的对象列表？

> ID：14492092
> 
> 赞同：0
> 
> 时间：2013-01-24T00:50:22.140
> 
> 标签：scala

```
trait Foo
class A extends Foo
class B extends Foo
List[Foo](new A(), new B())

error: type mismatch;
 found   : this.B
 required: this.Foo
       List[Foo](new A(), new B())
                          ^ 
```

有一个列表的正确方法是`Foo`什么？

编辑：更新以澄清多个后代类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:11:38.947

这实际上似乎有效，问题一定出在我使用的 Spark shell 上。

编辑：这是[Spark](https://groups.google.com/forum/?fromgroups=#!topic/spark-users/BfpiH7tGDHI)家伙的更新。

# jquery - 有没有像greasemonkey的casperjs那样模拟用户点击的库？

> ID：14492095
> 
> 赞同：0
> 
> 时间：2013-01-24T00:50:58.183
> 
> 标签：jquery, greasemonkey, casperjs

我将编写一个用户脚本来模拟用户点击。

我正在使用`jquery.trigger`，但我想知道是否有任何第三个库可以像 CasperJS 一样拯救我。

所以我可以使用类似的东西：

```
this.fill('form#contact-form', {
    'subject':    'I am watching you',
    'content':    'So be careful.',
    'civility':   'Mr',
    'name':       'Chuck Norris',
    'email':      'chuck@norris.com',
    'cc':         true,
    'attachment': '/Users/chuck/roundhousekick.doc'
}, true);

this.click('h3.r a'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:16:10.770

CasperJS 附带客户端实用程序，您可以在普通浏览器页面中使用：http: [//docs.casperjs.org/en/latest/modules/clientutils.html](http://docs.casperjs.org/en/latest/modules/clientutils.html)；它公开了该`fill()`方法以及许多其他方法。

您甚至可以使用提供的书签注入它来玩弄它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T00:52:25.893

是的，有很多这样的解决方案。最著名的是[Selenium](http://seleniumhq.org/)和[这个](http://code.google.com/p/selenium/wiki/WebDriverJs)

也看看[这个问题](https://stackoverflow.com/q/2524697/1888017)

# c# - 如何以另一种形式访问serialPort1？

> ID：14492096
> 
> 赞同：0
> 
> 时间：2013-01-24T00:51:02.560
> 
> 标签：c#

> **可能重复：**
> [在 WinForms 中访问另一个窗体上的控件的最佳方法？](https://stackoverflow.com/questions/8566/best-way-to-access-a-control-on-another-form-in-winforms)

如何访问 MainForm(Form1) 中 form2 中的 serialPort1？我想使用与 serialPort1 控件相关的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:58:40.737

将您的`SerialPort`对象存储在静态位置，例如在您的入口点`Program`类中，然后在程序的生命周期中可以从项目中的任何位置访问它。

还可以考虑为您的字段提供比“ `serialPort1`”更具描述性的名称。

# php - odbc_exec 日期时间错误

> ID：14492097
> 
> 赞同：0
> 
> 时间：2013-01-24T00:51:02.827
> 
> 标签：php, sql, sql-server-2008, odbc

运行包含日期作为输入的存储过程时出现错误。

我的查询是：

```
$query = "asistencia_virtual '2012-01-01', '2012-12-31'"; 
```

在 Management Studio 中，它运行良好。

我只有过时的查询有问题，其他的都很好。

> 警告：odbc_exec()：SQL 错误：[Microsoft][SQL Server Native Client 10.0][SQL Server]
> Error de sintaxis al convertir una cadena de caracteres a datetime., SQL 状态 22008 in SQLExecDirect

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:13:02.253

正如您所发现的，`yyyy-mm-dd`这不是一种安全的日期格式。原因如下：

```
SET LANGUAGE FRENCH;
SELECT MONTH(CONVERT(DATETIME, '2012-01-12')); -- yields 12, not 1
GO
SELECT CONVERT(DATETIME, '2012-12-31'); 
```

第一个查询产生`12`而不是`1`，因为它将它解释为`yyyy-dd-mm`。第二个查询产生：

> Msg 242, Level 16, State 3, Line 1
> La conversion d'un type de données varchar en type de données datetime a créé une valeur hors limites。

仅限日期的日期时间字符串文字的唯一安全格式是`yyyymmdd`. 这是您的代码的外观（添加强制性`EXEC`和`dbo.`前缀）：

```
$query = "EXEC dbo.asistencia_virtual '20120101', '20121231';"; 
```

有关常见日期/时间查询问题的更多信息：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T00:56:08.323

当谈到日期时，最好的做法是给月份提供书面替代 - 这样就不会在此过程中混淆日期和月份。尝试以以下格式将日期输入为字符串：

'dd MMM yyyy'

```
$query = "asistencia_virtual '01 Jan 2012', '31 Dec 2012'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T00:59:41.577

试试这个[（参考）](http://msdn.microsoft.com/en-us/library/ms190234%28v=sql.90%29.aspx)：

```
asistencia_virtual {d'2012-01-01'}, {d'2012-12-31'} 
```

# javascript - Handlebars 函数使用 javascript 格式化货币

> ID：14492098
> 
> 赞同：11
> 
> 时间：2013-01-24T00:51:06.577
> 
> 标签：javascript, jquery, string-formatting, handlebars.js

我的车把模板中有这个：

```
<span class="currencyFormatMe">{{_current_price}}</span> 
```

循环返回的示例|：**出价：24000 美元**

我想用逗号格式化它，但我失败了。

我有这个在控制台中工作的功能，但在适应带有把手的代码库时会失败。

```
$.fn.digits = function(){ 
    return this.each(function(){ 
        $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
    })
} 
```

我把它叫做 $("span.currencyFormatMe").digits();

同样，这一切都在控制台中工作，但在适应时失败。非常欢迎任何指针

用 registerhelper 尝试过：

```
Handlebars.registerHelper('formatCurrency',
    $.fn.digits = function(){ 
        return this.each(function(){ 
            $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
        })
    }
); 
```

来电：

```
{{formatCurrency _current_price}} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T03:40:07.963

你有几个简单的选择。

您可以坚持使用您的 jQuery 插件，并在 Handlebars 模板填写完毕后应用它；像这样的东西：

```
<script id="t" type="text/x-handlebars">
    <span class="currencyFormatMe">{{_current_price}}</span>
</script> 
```

进而：

```
$.fn.digits = function(){ 
    return this.each(function(){ 
        $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
    })
};

var t = Handlebars.compile($('#t').html());
var h = t({
    _current_price: 1000
});
$('<div>').append(h).find('.currencyFormatMe').digits(); 
```

演示：http: [//jsfiddle.net/ambiguous/732uN/](http://jsfiddle.net/ambiguous/732uN/)

或者您可以将您的插件转换为 Handlebars 助手并在模板中进行格式化。如果你想这样做，你只需要格式化传递给助手的值，而不是在`$(this)`助手内部搞乱。例如：

```
<script id="t" type="text/x-handlebars">
    {{formatCurrency _current_price}}
</script> 
```

进而：

```
Handlebars.registerHelper('formatCurrency', function(value) {
    return value.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
});

var t = Handlebars.compile($('#t').html());
var h = t({
    _current_price: 1000
}); 
```

演示：http: [//jsfiddle.net/ambiguous/5b6vh/](http://jsfiddle.net/ambiguous/5b6vh/)

# javascript - 结合 Response.Write 和 JavaScript 的 ASP.NET 编程

> ID：14492102
> 
> 赞同：0
> 
> 时间：2013-01-24T00:51:22.580
> 
> 标签：javascript, asp.net

我是 ASP.NET 的新手。现在我正在修改我们网站中的一些元素。我的页面显示了 n 张图片。单击每个图像时，将在页面上写入基于单击的图像的另一组图像。所以使用下面的代码。

```
for i=1 to n
response.write"<img src="&SourceFile&" id="&i&" onClick=func(this)>"
next 
```

而我的功能代码如下

```
newSrc="myweb.com/Images/img1.gif"
function func(x)
{
     switch(parseInt(x.id))
     {
          case 1:x.src=newSrc;
                 break;
      }
 } 
```

当我检查时，我发现错误 x 为空或不是对象。你能帮我找出错误吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:07:18.253

你需要这个.id

```
response.write"<img src="&SourceFile&" id='"&i&"' onClick='func(this.id)'>" 
```

确保您的功能是`<script></script>`客户端

# c# - 根据字符串数组对对象集合进行排序

> ID：14492106
> 
> 赞同：0
> 
> 时间：2013-01-24T00:52:03.867
> 
> 标签：c#

这似乎很简单，但我很难摆脱这方面的心理障碍。

我有一个名称列表，这些项目是根据一些业务规则专门订购的。这是在某些给定情况下被认为是正确的顺序。

所以

```
string [] original = {"Bob","Jim","Kat","Nat","Kim","Ant"}; 
```

我有一个 Person 类型，其中包含一个字段 Name，它将具有上述值之一。

所以，

```
class Person {
    ...
    public  string Name; //Name will be one of the above values.
    ...
} 
```

我有一堆这样的人对象，在一个集合中。

```
PersonCollection p = new PersonCollection 
                     { new Person{ .. Name = "Kat"..}, 
                       new Person {.. "Kim" ..} ...
                     } etc.; 
```

我知道所有这些对象的名称都只包含上面列表中的值，甚至不会重复。我需要按照主列表中提供的名称的顺序（即上面的“原始”数组）来安排这个人的集合。

到目前为止直截了当，但这是棘手的一点。

由于 Person 类的定义方式，我无法进入并更改它，不幸的是，我们在 person 对象中只有以下可用方法：

移动项目。

```
MoveToFirst(PersonCollection collection) // Move to the first of the given collection
MoveToLast(PersonCollection collection) // Move to the last of the given collection
MoveAfter(PersonCollection collection, Person previousPerson) //places the object after another person item, which is present in the list. 
```

任何人？顺便说一句，您可能会说，这是一个问题的“假设”表示，很遗憾，我不能在这里发布或讨论实际的生产代码。我希望其他人以前遇到过类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:00:25.990

所以`"Bob" < "Jim" < "Kat"`等等。

每个人的名字都有一个等级。如果名称列表很小，请创建一个`Dictonary Rank`这样的`Rank["Bob"] < Rank["Jim"]`等。

现在创建一个`IComparer`使用此数据的，`Map`实际上可能在比较器本身中。用于使用[`Array.Sort Method (Array, IComparer)`](http://msdn.microsoft.com/en-us/library/aa311216%28v=vs.71%29.aspx)此比较器对人员进行排序。

# git - 可以检索添加到索引的文件吗？

> ID：14492108
> 
> 赞同：2
> 
> 时间：2013-01-24T00:52:11.313
> 
> 标签：git

当我阅读尽可能多的关于如何使用 git 的资料时，我没有遇到任何文章建议您何时可以在需要时回滚。因此，例如，我在工作目录中初始化了一个 git 目录，即`git init`

然后我将文件添加到 git 的索引中，即`git add .`. 这已将所有文件添加到 git 的索引中。现在，我没有将文件提交到 git 的存储库 ie `git commit`，而是更改了我添加到索引中的文件之一。我意识到我犯了一个错误。我可以回滚到以前的状态还是只有在我提交文件时才有可能？我的理解是，当我运行命令时`git add .`，会在 git 的对象存储中创建一个或多个文件的副本。我相信对象存储中的文件是压缩的。这是否意味着我可以从对象存储中回滚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:59:44.820

是的你可以。尝试

```
git checkout-index -f foo 
```

`foo`从索引结帐。或通过以下方式签出所有文件

```
git checkout-index -fa 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:00:34.827

采用

```
git checkout -- <file> 
```

丢弃工作目录中的更改，同时保留对索引的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T01:00:27.317

在不指定树形的情况下使用`git checkout`将从索引中检出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T01:08:06.593

我对这个问题很感兴趣，答案似乎是“是”，git add 将文件的副本放在存储库中，即使在存储库中没有提交，您也可以回滚文件，使用以下示例进行测试。

```
% mkdir test && cd test
% git init .
% echo "1" > test.txt
% git add test.txt
  - git status shows now "added" file
% echo "2" > test.txt
  - git status shows "added" and "modified" file, test.txt contains number 2
% git checkout test.txt
  - git status shows only "added" again, and test.txt contains the number 1 
```

# php - 保护 Web 服务器上的图像

> ID：14492109
> 
> 赞同：0
> 
> 时间：2013-01-24T00:52:14.680
> 
> 标签：php, file, file-upload, security

> **可能重复：**
> [在 PHP 中保护文件上传的好方法](https://stackoverflow.com/questions/872570/good-way-to-secure-file-uploads-in-php)

我想使用php上传一些图片，我知道将它们存储在数据库中是不正确的做法，因此我将它们存储在我的网络服务器上。

问题是这个网站有一个用户系统，我只想允许用户访问这些图像，如果我把它们放在网络服务器上，我怎样才能保护它们，这样人们就不能通过写文件的直接 URL 来访问它们？

感谢您的所有帮助，如果您能提供或参考示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:56:32.167

您可以使用 .htaccess 来阻止用户访问这些图像直接 URL。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
    RewriteRule ^images/$ /error.php
</IfModule> 
```

将此文件放在文档根目录中。

# sql - SQL 查询：游戏服务器。如果我分解查询，它会起作用。如果我把它们放在一起，它会失败

> ID：14492111
> 
> 赞同：-1
> 
> 时间：2013-01-24T00:52:43.483
> 
> 标签：sql, sql-insert

查询是：

插入 char_inventory (charid,location,slot,itemid,quantity) 值（从 charid 不在的字符中选择 charid（从 char_inventory 中选择 charid，其中 itemid=65535），0,0,65535,10000）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:53:46.560

使用`INSERT INTO...SELECT`语句`LEFT JOIN`

```
INSERT INTO char_inventory (charid, location, slot, itemid, quantity) 
SELECT  chars.charid, 0 , 0, 65535, 10000
FROM    chars
        LEFT JOIN char_inventory
            ON  chars.charid = char_inventory.charid AND
                char_inventory.itemid = 65535
WHERE   char_inventory.charid IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T00:55:48.087

这个怎么样

```
insert into char_inventory (charid,location,slot,itemid,quantity) 
select charid,0,0,65535,10000 from chars where charid not in (select charid from char_inventory where itemid=65535) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T00:59:16.320

试试这个：

```
insert into char_inventory (charid,location,slot,itemid,quantity)
    select charid,0,0,65535,10000
    from chars
    where charid not in (select charid from char_inventory where itemid=65535) 
```

# node.js - $或使用猫鼬搜索

> ID：14492118
> 
> 赞同：4
> 
> 时间：2013-01-24T00:53:34.873
> 
> 标签：node.js, mongodb, mongoose

我正在尝试查找用户是否输入了重复的名称和/或电子邮件地址。我是 Mongoose 的新手（以及 MongoDb ），但根据我所阅读的内容，这似乎是正确的。但是，它返回 true - 无论如何。如果我单独查找任何一个，而不是 $or，它似乎工作正常。

```
// check if user exists
var userExists = function(u, callback) {
  User.find({$or:[ {'username': u.username}, {'email': u.email}]} , function(err,user) {
    if (err) {      // err, so not sure if user exists
        callback(1);
        return;
        } 
    if (user) { // user, so return exists
        callback(1);
        return;
        } 
    //no error, no user
    callback(0);
    });
}; 
```

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T02:43:06.403

更新的方法来检查`user.length`而不是它是否为空。如果 Mongoose（或 MongoDB）没有找到该文档，它不会返回 null。

```
// check if user exists
var userExists = function(u, callback) {
  User.find({$or:[ {'username': u.username}, {'email': u.email}]} , function(err,user) {
    if (err || user.length > 0) {     // user does not come back null, so check length
        callback(1);
        return;
    } 
    //no error, no user
    callback(0);
  });
}; 
```

# ruby-on-rails - 为什么 .each { |rule| 如果 !user.match(rule).nil 则返回 false？不能在 Rails C 中工作？

> ID：14492119
> 
> 赞同：0
> 
> 时间：2013-01-24T00:53:37.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 rails 控制台来调试问题。什么适用于 rails 控制台中的 rails 服务器错误，我不知道为什么。

**我的代码：**

```
email = "team@mysite.com"
user_rules = [/\+/, /\-/, /all/, /updates/, /team/]
user, domain = email.downcase.split('@')
user_rules.each   { |rule| return false if !user.match(rule).nil?   } 
```

最后一行错误：

```
1.9.3-p125 :016 > user_rules.each { |rule| return false if !user.match(rule).nil?}
LocalJumpError: unexpected return
    from (irb):16:in `block in irb_binding'
    from (irb):16:in `each'
    from (irb):16 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:15:40.980

您正在使用 return false

`user_rules.each { |rule| return false if !user.match(rule) }`

但是如果没有在函数/方法中使用，lambda 不支持 return。

# javascript - 如何在查询中使用数组元素，例如

> ID：14492123
> 
> 赞同：0
> 
> 时间：2013-01-24T00:54:08.980
> 
> 标签：javascript, jquery, sql-like

我需要在 jQuery 的查询中使用元素数组。我的查询是：

```
"SELECT * FROM `projects` WHERE `Tags` LIKE CONCAT('%', ',', ('" + id + "'), ',', '%')" 
```

`id`动态数组在哪里，所以我基本上需要：

```
"SELECT * FROM `projects` WHERE `Tags` LIKE CONCAT('%', ',', ('" + id[0] + "'), ',', '%') **OR LIKE id[1] OR LIKE id[2]**..." 
```

如果我将使用`forEach`循环，它将仅根据数组中的一个元素返回行，它不支持 Like .. 或 Like .. 逻辑

```
var idArr = id.split(",");
idArr.forEach(function (id) {
     _runQuery("SELECT * FROM `projects` WHERE `Tags` LIKE CONCAT('%', ',', '" + id + "', ',', '%')", function (rows) {....} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:04:16.730

给定一个数组

```
var id = [1,2,3,4,5]; 
```

尝试这个

```
 " WHERE tags LIKE '%"+ id.join("%' OR tags LIKE '%")+'%'); 
```

在这里看到它：http: [//jsfiddle.net/XzXnf/](http://jsfiddle.net/XzXnf/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T01:09:05.300

对您的问题的最简单答案是：标签可能应该是一个单独的表，那么您将拥有：

“SELECT * from projects as p join tags as t on t.project_id = p.id where t.tag in (id[0], id[1], id[2]....)”

当然，您可以很容易地通过连接生成所需的 id 字符串（id.join(", ") 可能会这样做。

或者，正如@codingbiz 指出的那样，您可以使用更复杂的 id.join() 调用来扩展所需的 OR，但是这种方法有局限性，这与您在规范化开始之前可以合理地进行的查询一样复杂看起来是个好主意。

# objective-c - Objective-C 中解引用的工作原理

> ID：14492126
> 
> 赞同：4
> 
> 时间：2013-01-24T00:54:36.780
> 
> 标签：objective-c, dereference

我试图理解 Objective-C 中的取消引用，并在下面写了两种方法。

```
-(void)alterStringModelOne:(NSMutableString**)string{
    NSMutableString *str = [NSMutableString stringWithString:@"New string by string = &str"];

    string = &str; //Didn't work
}
-(void)alterStringModelTwo:(NSMutableString**)string{
    NSMutableString *str = [NSMutableString stringWithString:@"New string by *string = str"];

    *string = str; //It works
} 
```

在上面，ModelOne 不起作用，而 ModelTwo 起作用。这两种说法有何不同？

**编辑：追踪他们的地址和类型**

myStr = **b260** 类型 * CFString

---> 进入方法模型一

string = d9c4 of type ** NSMutableString //参数

str = f750 of * CFString //str创建后

string = d97c of type ** NSMutableString //赋值后：string = &str;

--> 方法返回

myStr = **b260** * CFString

--> 进入方法模型二

string = d9c4 of type ** NSMutableString //参数

str = **0bc0** of * CFString //str创建后

string = 0bc0 of type * CFString //赋值后：*string = str;

--> 叶方法

myStr = **0bc0**类型 * CFString

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:07:39.887

首先：这不是特定于 Objective-C 的。C 和 C++ 中存在相同的行为。

```
string = &str; 
```

这会修改局部变量的值`string`。

```
*string = str; 
```

这会修改 指向的值`string`。

由于`string`是局部变量，因此更改它（如第一个示例所示）不会产生任何持久的影响。但是，它指向的值不是本地的，因此更改它（第二个示例）*确实*可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:08:49.330

它的工作方式就像在 C 中一样。Objective-C 对象是通过指针访问的，所以在：

```
NSMutableString *string; 
```

`string`被声明为指向对象结构的指针，您可以正常使用它，就好像它直接是对象一样。然后您传递了该指针的地址，我们将其视为对象本身。就像是：

```
(NSMutableString **)string 
```

实际上是

```
((object)*)string 
```

如果你想给原始对象赋值，你必须使用这个`string`指针指向的值，而不是它本身（就像在你的模型中发生的那样），否则你最终会修改它指向的东西而不是它的地址所代表的东西. 这就是您的第二个模型有效的原因。您将`str`，这是一个指向对象（我们再次认为只是一个对象）的指针，原始指针是指针指向的所谓对象`string`。

执行此操作时请注意内存管理。

# facebook - FQL 查询未检索同一大学的所有朋友

> ID：14492134
> 
> 赞同：0
> 
> 时间：2013-01-24T00:55:11.820
> 
> 标签：facebook, actionscript-3, action, facebook-fql

我正在构建一个应用程序，该应用程序具有一个功能，该功能需要调用所有用户的去同一所大学的朋友。

这是我正在使用的 FQL 查询：

```
SELECT name, uid, pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND ('110692668958084' IN education OR '103797159658620' IN education OR '330980680328922' IN education) 
```

许多不同学校 ID 的原因是因为似乎有几个不同的页面用于同一所大学。

该查询的问题在于它只返回 8 或 9 个朋友（如果没有所有其他学校 ID，则更少）。使用 API 资源管理器，我检查了确实去同一所大学并且没有被查询返回的朋友（大约 20+）。我可以确认所有这些朋友的教育属性中的学校 ID 与上面的查询相同。

我的问题是：为什么查询不会返回所有这些？这与用户的隐私设置有关还是我的查询有问题？

谢谢！

# javascript - 如何根据鼠标移动/位置应用效果？

> ID：14492136
> 
> 赞同：1
> 
> 时间：2013-01-24T00:55:19.647
> 
> 标签：javascript, jquery, html, css, mousemove

我在绝对位置有 3 个按钮：

```
.micro {
position:absolute;
}

#micro_1 {
left:1165px;
top:176px;
}

#micro_2 {
left:800px;
top:300px;
}

#micro_3 {
left:300px;
top:400px;
} 
```

当鼠标移动并靠近其中一张图像时，我想淡化这 3 个元素。如果鼠标靠近图像 1，则图像 1 淡入。图像 2 和图像 3 淡出。等等。

我可以使用 jQuery 来了解鼠标位置：

```
$('body').mousemove(function(e){
    $('#mouse_position').html("mouse position: x=" + e.pageX + "; y=" + e.pageY); 
```

所以我想我可以做一些数学来应用效果。

我做了什么：

```
$('body').mousemove(function(e){
        $('#mouse_position').html("mouse position: x=" + e.pageX + "; y=" + e.pageY);
        if (e.pageX > 394 && e.pageX < 533) {
            $('#lueur_video_1').fadeIn('slow');
            $('#lueur_video_2').fadeOut('slow');
            $('#lueur_video_3').fadeOut('slow');
        }

        if (e.pageX > 533 && e.pageX < 722) {
            $('#lueur_video_2').fadeIn('slow');
            $('#lueur_video_1').fadeOut('slow');
            $('#lueur_video_3').fadeOut('slow');
        }

        if (e.pageX > 722 && e.pageX < 1116) {
            $('#lueur_video_3').fadeIn('slow');
            $('#lueur_video_1').fadeOut('slow');
            $('#lueur_video_2').fadeOut('slow');
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:07:52.963

您可以将鼠标位置（e.pageX / e.pageY）与图像的中心进行比较，并据此设置不透明度。您可以使用 . 检查元素在页面上的位置`$("#micro_3").offset()`。

您需要自行决定衰减的最小和最大距离。当它超出最大距离时，不透明度为 0，在最小值之内，不透明度为 1。对于介于两者之间的任何东西，计算不透明度由`(Range - CurrentDistance) / Range`.

# android - .txt 文件的 MIME 类型？

> ID：14492138
> 
> 赞同：83
> 
> 时间：2013-01-24T00:55:23.563
> 
> 标签：android, text-files, share, mime-types

我正在尝试共享`.txt`具有共享意图的文件。如果我将“text/plain”设置为 mime 类型，它会读取文本而不是文本文件的内容，那么共享菜单中给出的选项是 Whatsapp、Line 等。

有谁知道如何配置共享意图，以便共享选项只是能够发送`.txt`文件的程序（Gmail、Dropbox 等。但不是 Whatsapp ..）？谢谢

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2014-08-25T15:07:37.373

您可以尝试特定的 mime：

```
text/plain 
```

或者，更一般的文本哑剧：

```
text/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:44:09.767

[打开 TXT 文件时，android 将向用户显示的应用程序的简单而完整的示例代码（少于 50 行）](https://stackoverflow.com/a/15555455/1166727)以及兼容应用程序（北极星、浏览器等）的菜单列表。

免责声明：如果用户之前没有确定默认应用程序

笔记; 如果您生成应用程序使用的文件，TXT 可能会更改，您可以自定义扩展程序。

# sharedpreferences - 保存文件路径以在主页上访问

> ID：14492149
> 
> 赞同：1
> 
> 时间：2013-01-24T00:57:09.010
> 
> 标签：sharedpreferences, shortcut

我在制作应用程序方面非常陌生，这是我的第三周，我不确定使我的想法生效所需的语法。

单击第一个按钮时，我希望它保存作为目标的类（在本例中为 OddesyYears，但可以是任何随机类），然后再转到意图。

```
 Button button1 = (Button)findViewById(R.id.button1);                
            button1.setOnClickListener(new OnClickListener() {                      

                public void onClick(View v) {

                SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
                    SharedPreferences.Editor editor = sharedPreferences.edit();
                    editor.putString("key", "OddesyYears");
                    editor.commit();

                    Intent i = new Intent(getBaseContext(),OddesyYears.class);
                    startActivity(i); 
```

然后在应用程序关闭/关闭并重新打开后的稍后时间......

```
 public void onClick(View v) {

        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String MyCar = sharedPreferences.getString("key", "RandomClass");  

         If (MyCar == null)
                        Toast.makeText(getBaseContext(),
                    "Please Select from other window", 
                    Toast.LENGTH_SHORT).show();

        elseIf()
            Intent i = new Intent(getBaseContext(),MyCar.class);
            startActivity(i); 
```

在应用程序的整个生命周期中，该课程将被记住并从另一个按钮访问。这将保持为空，直到保存某些内容然后在用户需要时访问保存的位置。我试图将它作为一个失败的字符串传递，并且不知道该转向哪里。也许intent.shortcut？

我还希望它保持相当通用，因为用户可以选择访问许多不同的类，并且每次选择一个类时，它都会覆盖旧的类。

非常感谢！

# debugging - 从 Python 模块运行代码，修改模块，然后在不退出解释器的情况下再次运行

> ID：14492150
> 
> 赞同：5
> 
> 时间：2013-01-24T00:57:29.693
> 
> 标签：debugging, testing, python

我希望能够打开 Python shell，执行模块中定义的一些代码，然后修改模块，然后在同一个 shell 中重新运行它而无需关闭/重新打开。

我尝试在修改脚本后重新导入函数/对象，但这不起作用：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from my_module import buggy_function, test_input
>>> buggy_function(test_input)
wrong_value  # Returns incorrect result

# Go to the editor, make some changes to the code and save them

# Thought reimporting might get the new version
>>> from my_module import buggy_function, test_input

>>> buggy_function(test_input)
wrong_value # Returns the same incorrect result 
```

显然，重新导入并没有让我获得该功能的“新版本”。

在这种情况下，关闭解释器并重新打开它并不是什么大问题。但是，如果我正在测试的代码足够复杂，有时我必须做大量的导入对象和定义虚拟变量来创建一个可以充分测试代码的上下文。每次我进行更改时都必须这样做，这确实很烦人。

任何人都知道如何在 Python 解释器中“刷新”模块代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T00:59:42.277

使用`imp.reload()`：

```
In [1]: import imp

In [2]: print imp.reload.__doc__
reload(module) -> module

Reload the module.  The module must have been successfully imported before. 
```

# java - JAX-WS WebService 客户端 - 流式传输大型附件 - 不同的行为，取决于 JRE 版本

> ID：14492152
> 
> 赞同：2
> 
> 时间：2013-01-24T00:57:41.077
> 
> 标签：java, jax-ws, webservices-client

我使用 JRE 捆绑的 JAX-WS API 从提供的 WSDL 文件创建了一个 WebService 客户端。我使用JDK6 Update 37的**wsimport**工具生成了代理类。

客户端应该能够使用 MTOM 和流媒体下载大文件/数据。

我按照[Metro 用户指南](http://metro.java.net/guide/ch06.html#large-attachments)中提供的说明进行操作。

我正在调用的代理方法返回一个`DateHandler`对象。

```
package de.christopherhuebner.webservicetest.client;                                                   

import java.io.FileOutputStream;                                                                       
import java.io.OutputStream;                                                                           
import java.net.URL;                                                                                   

import javax.activation.DataHandler;                                                                   
import javax.xml.namespace.QName;                                                                      

import de.christopherhuebner.webservicetest.ImageServer;                                               
import de.christopherhuebner.webservicetest.ImageServerService;                                        

public class ImageServiceClient {                                                                      

    public static void main(String[] args) throws Exception {                                          
        URL url = new URL("http://localhost:8080/ImageWebService?wsdl");                               
        QName qname = new QName("http://webservicetest.christopherhuebner.de/", "ImageServerService"); 
        ImageServerService is = new ImageServerService(url, qname);                                    
        MTOMFeature mtom = new MTOMFeature();
        StreamingAttachmentFeature stf = new StreamingAttachmentFeature(null, true, 4000000L);
        ImageServer port = is.getImageServerPort(mtom, stf);                                                  
        DataHandler dh = port.getImage();                                                              
        System.out.println("Java-Version: " + System.getProperty("java.version"));                     
        System.out.println("DataHandler: " + dh.getClass());                                           
        System.out.println("DataSource: " + dh.getDataSource().getClass());                            
        OutputStream out = new FileOutputStream("test.jpg");                                           
        dh.writeTo(out);                                                                               
        out.close();                                                                                   
    }                                                                                                  
} 
```

使用 JRE6 运行此代码时，控制台会打印以下输出：

```
Java-Version: 1.6.0_37
DataHandler: class javax.activation.DataHandler
DataSource: class com.sun.istack.internal.ByteArrayDataSource 
```

不幸的是，无法进行流式传输，因为`ByteArrayDataSource`客户端内存中已填充，这会导致`OutOfMemoryException`接收数据时大于最大堆大小。当我敢于按照已经提到的[用户指南](http://metro.java.net/guide/ch06.html#large-attachments)`DataHandler`中的建议将其转换为 a时，会抛出 a 。`StreamingDataHandler``ClassCastException`

使用 JRE7 运行客户端时，一切都很好，如[用户指南](http://metro.java.net/guide/ch06.html#large-attachments)中所述：

```
Java-Version: 1.7.0_10
DataHandler: class com.sun.xml.internal.ws.encoding.MIMEPartStreamingDataHandler
DataSource: class com.sun.xml.internal.ws.encoding.MIMEPartStreamingDataHandler$StreamingDataSource 
```

`StreamingDataHandler`使用**JRE6**时是否有可能获得回报？还是我真的被迫通过机制使用更新的**JAX-WS RI**版本（Metro，似乎包含在 JRE 中）`-Djava.endorsed.dirs=path_to_newer_jaxws_libs`？

何时删除在流式传输期间生成的临时文件（*MIMExxxxx.tmp*，请参阅`StreamingAttachmentFeature`配置）？

# node.js - Req/Res Express 设计

> ID：14492154
> 
> 赞同：0
> 
> 时间：2013-01-24T00:58:08.153
> 
> 标签：node.js, amazon-s3, express

我需要在一次浏览器刷新中向 Amazon S3 发出更多请求。

我没有具体说明问题，但我有设计问题。

-

(1) 用户填写表格并按下提交按钮

(2)向 S3**发出请求**并获取特定文件

(3)**获取文件作为响应**，编辑它

**(4)在下一个请求**中将文件发送到 S3

 **```
 // Make first request
    s3.client.putObject(options, function(err) {

        // Get a response
        s3.client.getObject(options, function(err, data) {

            // Make next request
            s3.client.putObject(options, function(err, data) {
            }

        }

    } 
```

是否可以在一次刷新中提出更多请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:13:45.087

为什么你不能做类似的事情

```
app.post('/foo', function(req, res){
    //perform any form stuff necessary

    // Make first request
    s3.client.putObject(options, function(err) {

    // Get a response
    s3.client.getObject(options, function(err, data) {

        // Make next request
        s3.client.putObject(options, function(err, data) {
              res.write(stuff);
        });

    });

   });
}); 
```**

# authentication - 在 MVP 中放置身份验证/授权的位置

> ID：14492156
> 
> 赞同：1
> 
> 时间：2013-01-24T00:58:16.193
> 
> 标签：authentication, authorization, mvp

我的设计如下所示：

```
View <-- Presenter --> Services --> Repositories --> Entities 
```

在这个设计中我应该把身份验证/授权放在哪里？

我在想我可以在指定所需权限/角色的服务方法上使用属性，然后使用拦截器来强制执行它们。这是一个好方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:57:55.523

是的，这就是通常的做法。如果您曾经通过 REST 或 SOAP 公开服务，那么您已经掌握了这些内容。把它放在presenter中会很浪费。

# c++ - 'std::string& 类型的非常量引用的无效初始化

> ID：14492158
> 
> 赞同：1
> 
> 时间：2013-01-24T00:58:22.687
> 
> 标签：c++, methods, reference, initialization, return

```
const string& mtm::RadioManager::getBestSong() const {    
    string& most_popular_song=tmp.getName();    
    most_popular_song = current_song.getName();    
    return most_popular_song;
}

string mtm::Song::getName() const {    
    return this->song_name;
}

class Song {    
    string song_name;

public:

string getName() const;
} 
```

我收到此错误：

> 从“std::string {aka std::basic_string}”类型的右值对“std::string& {aka std::basic_string&}”类型的非常量引用进行无效初始化

我无法做到，`const string& most_popular_song=tmp.getName();` 因为我将其更改为`tmp.getName();`返回`string`！我应该怎么做才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:03:30.567

函数`getName`不提供`song_name`对类的基础字段的修改访问。不管你做什么，你都不能改变（如书面`song_name`）。`getName`这就是`getName`必须返回该字段*副本的全部意义所在。*`song_name`

因此，通过非常量引用接收结果毫无意义。反正你也改不了。即使你以某种方式这样做，它也不会对`song_name`.

在这种情况下，完全不清楚您要做什么

```
string& most_popular_song=tmp.getName();    
most_popular_song = current_song.getName(); 
```

顺序以及所有这些操作的重点是什么。

如果您希望能够修改该`song_name`字段，则必须返回对from的*引用*`song_name``getName`

```
string &mtm::Song::getName() const {    
    return this->song_name;
} 
```

这将修复您的错误，但这基本上会破坏该`getName`功能提供的大部分保护和隔离。`song_name`如果您通过 nopn-const 引用返回函数立即将其完全公开给外界，那么私有化有什么意义`getName`？

一个更好的想法是编写一个`setName`函数并使用它来修改`song_name`，而不是尝试获得对 . 的直接引用访问`song_name`。

# html - html表格中的边框不会删除

> ID：14492161
> 
> 赞同：0
> 
> 时间：2013-01-24T00:58:43.233
> 
> 标签：html, html-table, border

我有一个**HTML 表格**，里面有几个单元格，`border=0`属性已设置但边框没有消失，我做错了什么？

```
<table width="500" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
  <tr>
    <td>
      <table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">    
        <tr>
          <td>
            <br><br>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:09:47.283

将第一个单元格间距更改为 0

所以这里是代码：

```
<table width="500" border="0" align="center" cellpadding="0" cellspacing="0"     
bgcolor="#CCCCCC">
<tr>

<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">

<tr>
<td><br>
<br></td>
</tr>

</table>
</td>

</tr>
</table> 
```

# javascript - 复选框始终返回 true

> ID：14492162
> 
> 赞同：1
> 
> 时间：2013-01-24T00:58:47.977
> 
> 标签：javascript, html

我无法让它正常工作我只有一个复选框，如果它的检查我希望它返回`Yes`，如果它没有检查我希望它返回 0 或者它没有检查时它会做什么。出于某种原因，它总是以“是”的形式通过，有人能在我的代码中发现错误吗？我一直在查看其他帖子，似乎我的设置正确。

```
<input type="checkbox" id="lunchCheck" value="Yes" name="lunch" checked /> 
```

这是我获得价值的javascript

```
window.lunch = document.getElementById("lunchCheck").value; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:01:37.057

检查“已检查”属性。

```
var elem = document.getElementById('lunchCheck');
window.lunch = elem.checked ? elem.value : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:01:25.043

您需要先检查是否已检查，然后获取值

```
window.lunch = document.getElementById("lunchCheck").checked ? document.getElementById("lunchCheck").value : ""; 
```

# javascript - 如何定义和列出所有可能的组合？

> ID：14492163
> 
> 赞同：-1
> 
> 时间：2013-01-24T00:58:52.980
> 
> 标签：javascript, jquery, html

首先，非常抱歉，如果我没有正确地问这个问题，我尝试搜索，但我没有找到任何适合我正在尝试做的事情。

我有 3 个下拉菜单，我只是想输出每个可能组合的列表。

下拉1：

*   男性
*   女性

下拉菜单 2：

*   项目1
*   项目2

下拉菜单 3：

*   初学者
*   中间的
*   先进的

我只是想能够定义变量并为它们输出所有组合。如果有一个网站可以轻松做到这一点，那将同样有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:30:51.217

使用 jQuery`each`嵌套循环的示例：

```
var listHtml=[];

$('#select1 option').each(function(){
    var mainOpt=$(this).val();    
    $('#select2 option').each(function(){
        var secondOpt=$(this).val();
         $('#select3 option').each(function(){
           listHtml.push(mainOpt +' '+ secondOpt+' ' +$(this).val());              
        });    
    });    
});

$('#list').append('<li>'+  listHtml.join('</li><li>')+'</li>'); 
```

演示[http://jsfiddle.net/Xtd3Y/](http://jsfiddle.net/Xtd3Y/)

# google-closure - Google Closure Library：解析布尔值的“正确”方法是什么？

> ID：14492165
> 
> 赞同：3
> 
> 时间：2013-01-24T00:59:00.517
> 
> 标签：google-closure, google-closure-library

我在处理 Google Closure 时学到的一件事是，在原始数据操作和管理方面，该库几乎拥有我可能想要的一切。我要做的是在它之上构建组件。

今天我试图从一个字符串中解析一个布尔值。我很惊讶在 Google Closure Library 中没有找到任何东西来做到这一点。

我是否应该通过问题“[如何在 JavaScript 中将字符串转换为布尔值？](https://stackoverflow.com/q/263965) ”中引用的技术自己构建它，或者是否有另一种“Google Closure way”™ 来解析我找不到的布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:34:44.923

不，没有 Closure 方法可以做到这一点。

您要么遵循链接到的问题中提到的建议，要么创建自己的方法，其中包含您认为正确的字符串和错误的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:54:48.083

我的猜测是该库不包含这样的功能，因为它并不总是您期望的准确（大小写重要吗？）。我可能会使用 goog.string.caseInsensitiveCompare(str, "true") 和 goog.string.caseInsensitiveCompare(str, "false")，它们完全符合您的要求，没有任何幕后魔法或错误空间。

一个有趣的注意事项是 goog.string.caseInsensitiveCompare(true, "true") 将第一个参数强制转换为字符串，因此返回 0（表示相等）。如果这是一个问题，您可以使用 goog.isString 或 goog.isBoolean 提前过滤掉值。

# iphone - iOS Gamecenter 程序化匹配

> ID：14492171
> 
> 赞同：1
> 
> 时间：2013-01-24T00:59:41.157
> 
> 标签：iphone, ios, objective-c, game-center, gkmatchmaker

我正在尝试使用自定义 UI（否）实现实时多人游戏`GKMatchMakerViewController`。我`startBrowsingForNearbyPlayersWithReachableHandler: ^(NSString *playerID, BOOL reachable)`用来寻找本地玩家，然后使用`GKMatchmaker`单例发起匹配请求（我已经发起了）。

这就是我遇到麻烦的地方。当我发送请求时，完成处理程序几乎立即触发，没有错误，并且它返回的匹配项的预期玩家计数为零。同时，对方玩家肯定没有回应这个请求。

相关代码：

```
- (void) findMatch
{
GKMatchRequest *request = [[GKMatchRequest alloc] init];
request.minPlayers = NUM_PLAYERS_PER_MATCH; //2
request.maxPlayers = NUM_PLAYERS_PER_MATCH; //2
if (nil != self.playersToInvite)
{
    // we always successfully get in this if-statement
    request.playersToInvite = self.playersToInvite;
    request.inviteeResponseHandler = ^(NSString *playerID, GKInviteeResponse
                                       response)
    {
        [self.delegate updateUIForPlayer: playerID accepted: (response ==
                                                              GKInviteeResponseAccepted)];
    };
}
request.inviteMessage = @"Let's Play!";

[self.matchmaker findMatchForRequest:request
    withCompletionHandler:^(GKMatch *match, NSError *error) {
        if (error) {
            // Print the error
            NSLog(@"%@", error.localizedDescription);
        }
        else if (match != nil)
        {
            self.currentMatch = match;
            self.currentMatch.delegate = self;

            // All players are connected
            if (match.expectedPlayerCount == 0)
            {
                // start match
                [self startMatch];
            }
            [self stopLookingForPlayers];
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:35:10.157

弄清楚了！我需要调用`- (void)matchForInvite:(GKInvite *)invite completionHandler:(void (^)(GKMatch *match, NSError *error))completionHandler`我的邀请处理程序，以便两个玩家拥有相同的比赛数据。

# extjs - 到 initComponent() 或不到 initComponent()

> ID：14492179
> 
> 赞同：45
> 
> 时间：2013-01-24T01:00:31.183
> 
> 标签：extjs, extjs4, extjs4.1

我在 ExtJS 4 中构建应用程序时遇到了困难，其中一部分是混淆了何时在 initComponent() 中配置某些内容以及何时不...

例如，在 Sencha 自己的[MVC Application Architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)文档中，当第一次创建网格视图时，他们在 initComponent() 方法中定义了内联存储。（参见“定义视图”部分）

再往下，当他们将 store 分解为一个单独的类时，他们将定义移到了 initComponent() 之外。有一个有用的评论提请注意这一事实，但没有解释。（请参阅创建模型和存储部分）

我想原因应该很明显，但我错过了。任何指针？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-24T02:08:57.200

> 如果您对 ExtJS 类系统的工作方式没有深入了解，您可能需要遵循以下内容：
> 
> **在 中声明所有非原始类型`initComponent()`。**

### 术语

*   **原始类型**- 字符串、布尔值、整数等。
*   **非原语**- 数组和对象。

### 解释

如果要多次创建您扩展的组件，则声明为配置选项（外部`initComponent`）的任何非原始配置将在所有实例之间共享。

因此，当在多个选项卡上创建扩展组件（通常是扩展网格）时，许多人都会遇到问题。

这种行为在下面 sra 的回答和[这篇 Skirtle's Den 文章](http://skirtlesden.com/articles/config-objects-on-the-prototype)中进行了解释。您可能还想阅读[这个 SO question](https://stackoverflow.com/questions/6871594/best-practices-concerning-initcomponent-in-ext-define)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-26T09:29:52.577

*首先，我将对我的评论表明立场：*

@AlexanderTokarev 不要误会我的意思。我不谈论组件的配置，或者更糟糕的实例并将它们移动到`initComponent()`，这不是我的意思。

**现在我怎么想。**

> *initComponent()*应该解决创建此类实例时所需的任何内容。不多也不少。

在定义类的时候你可能会搞砸负载，而且大部分都是因为人们不了解 ExtJS 类系统是如何工作的。由于这是关于组件的，因此以下将重点关注这些。这也将是一个简化的示例，它应该只显示一种我见过很多次的错误。

让我们开始吧：我们有一个自定义面板，它可以做很多漂亮的事情。这就需要自定义配置，我们称之为`foo`。我们将它与我们的默认配置选项一起添加到类定义中，以便我们可以访问它：

```
Ext.define('Custom', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.custpanel',

    foo: {
        bar: null  
    },

    initComponent: function() {
        this.callParent(arguments);
    }
}); 
```

但是测试后事情变得很奇怪。我们的配置值似乎发生了神奇的变化。这是一个**[JSFiddle](http://jsfiddle.net/sran/9kPsY/4/)** 发生的事情是所有创建的实例都引用同一个`foo`实例。但最近我做到了

```
store: {
    fields: [ ... ],
    proxy: {
        type: 'direct',
        directFn: 'Direct.Store.getData'
    }
} 
```

有一家商店，这很有效。那么为什么不起作用`foo`呢？

大多数人看不出这个小`foo`对象和（ExtJS）配置之间有任何区别，这基本上是正确的，因为它们都是对象（实例）。但不同之处在于 sencha 提供的所有类都非常清楚他们期望的配置属性并处理它们。

例如，网格的存储属性由 解析，`StoreManager`因此可以是：

*   `storeId`字符串，或
*   存储实例或
*   存储配置对象。

在网格初始化期间，其中任何一个都会被实际的存储实例解析和覆盖。商店只是一个例子。我想更广为人知的是 items 数组。这是一个在定义时的数组，它被每个实例用 MixedCollection 覆盖（如果我没记错的话）。

是的，类定义和从它创建的实例之间存在差异。但是我们需要处理任何包含像`foo`上面这样的引用的新属性，这并不复杂。这是我们需要做的修复它的`foo`例子

```
Ext.define('Custom', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.custpanel',

    foo: {
        bar: null  
    },

    initComponent: function() {
        this.foo = Ext.apply({}, this.foo);
        this.callParent(arguments);
    }
}); 
```

这是**[JSFiddle](http://jsfiddle.net/sran/9kPsY/3/)**

现在我们在`foo`创建实例时处理配置。现在这个`foo`例子被简化了，解决配置并不总是那么容易。

> **结论**
> 
> 总是把你的类定义写成配置！除了普通配置之外，它们不得包含任何引用的实例，并且必须在创建实例时处理这些实例以解决它们。

**免责声明**

*我并没有声称用这篇非常简短的文章来涵盖所有内容！*

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-24T01:17:21.390

我通常主张在类配置选项中进行尽可能多的配置，因为它读起来更好并且更容易在子类中覆盖。除此之外，很有可能在未来 Sencha Cmd 将有优化编译器，所以如果你保持你的代码声明性，它可以从优化中受益。

相比：

```
Ext.define('MyPanel', {
    extend: 'Ext.grid.Panel',

    initComponent: function() {
        this.callParent();
        this.store = new Ext.data.Store({
            fields: [ ... ],
            proxy: {
                type: 'direct',
                directFn: Direct.Store.getData
            }
        });
        this.foo = 'bar';
    }
});

...

var panel = new MyPanel(); 
```

和：

```
Ext.define('MyPanel', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.mypanel',

    foo: 'bar',

    store: {
        fields: [ ... ],
        proxy: {
            type: 'direct',
            directFn: 'Direct.Store.getData'
        }
    }
});

...

var panel = Ext.widget({
    xtype: 'mypanel',
    foo: 'baz'
}); 
```

请注意这些方法有何不同。在第一个示例中，我们进行了很多硬编码：对象属性值、存储配置、使用时的 MyPanel 类名；我们实际上扼杀了类的想法，因为它变得不可扩展。在第二个示例中，我们正在创建一个可以多次重用的*模板，并且可能具有不同的配置——基本上，这就是整个类系统的意义所在。*

然而，实际的区别在于更深层次。在第一种情况下，我们有效地将类配置推迟到运行时，而在第二种情况下，我们正在*定义*类配置并在非常不同的阶段*应用它。*事实上，我们可以很容易地说第二种方法引入了 JavaScript 本身缺乏的东西：编译时阶段。它为我们提供了框架代码本身利用的大量可能性；`Ext.app.Controller`如果您想要一些示例，请查看`Ext.app.Application`最新的 4.2 beta。

从更实际的角度来看，第二种方法更好，因为它更容易阅读和处理。一旦你掌握了这个想法，你会发现自己编写了所有的代码，因为这样更容易。

这样看：如果您要编写一个老式 Web 应用程序，在服务器端生成 HTML 和其他内容，您会尽量不将任何 HTML 与代码混合，对吗？左边是模板，右边是代码。这实际上与硬编码数据相同`initComponent`：在一定程度上，它确实有效。然后它就变成了一碗意大利面，难以维护和扩展。哦，测试所有这些！呸。

现在，**有时**您需要在运行时对*实例*做一些事情，而不是在类定义时间 - 经典示例是应用事件侦听器或调用`control`控制器。您必须从对象实例中获取实际的函数引用，并且您必须在`initComponent`or中执行此操作`init`。然而，我们正在努力解决这个问题——应该没有硬编码所有这些的硬性要求；`Observable.on()`已经支持字符串侦听器名称，MVC 内容也将很快支持。

正如我在上面的评论中所说，我将不得不为文档写一篇文章或指南，解释事情。那可能要等到 4.2 发布；同时，希望这个答案应该对此事有所启发。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-05-01T11:29:16.730

当我来到这里时，我一直在寻找同一个问题的答案，看到这些答案让我很失望。这些都没有回答这个问题：initComponent() 还是构造函数？

很高兴知道类配置选项对象是共享的，您需要为每个实例初始化/处理它们，但是代码可以进入构造函数以及 initComponent() 函数。

我的猜测是 Component 类的构造函数在中间某处调用了 initComponent() ，我并没有错：只需要查看源代码，它实际上是[AbstractComponent 的构造函数](http://docs.sencha.com/extjs/4.1.3/source/AbstractComponent.html#Ext-AbstractComponent-method-constructor)。

所以它看起来像这样：

```
AbstractComponent/ctor:
- stuffBeforeIC()
- initComponent()
- stuffAfterIC() 
```

现在如果你扩展一个组件，你会得到这样的东西：

```
constructor: function () {
  yourStuffBefore();
  this.callParent(arguments);
  yourStuffAfter();
},
initComponent: function () {
  this.callParent();
  yourInitComp()
} 
```

这些被调用的最终顺序是：

```
- yourStuffBefore()
- base's ctor by callParent:
  - stuffBeforeIC()
  - initComponent:
    - base's initComponent by callParent
    - yourInitComp()
  - stuffAfterIC()
- yourStuffAfter() 
```

所以最后这一切都取决于你是否想要/需要在 stuffBeforeIC 和 stuffAfterIC 之间注入你的代码，你可以在你要扩展的类的构造函数中查找。

# ruby-on-rails - 子类 (STI) 的 update_attributes 验证错误

> ID：14492180
> 
> 赞同：0
> 
> 时间：2013-01-24T01:00:32.233
> 
> 标签：ruby-on-rails, validation, model, subclass, sti

正如 Michael Hartl 在他的教程 ( [http://ruby.railstutorial.org/chapters/sign-in-sign-out](http://ruby.railstutorial.org/chapters/sign-in-sign-out) ) 中建议的那样，我实现了一个登录/注销机制。一切都很完美：从个人资料页面创建、删除、更新用户。

然后我创建了一个`Teacher`模型作为`User`（STI）的子类。它没有自己的验证，应该使用与父模型（用户）相同的验证。但是更新 type = "Teacher" 用户的属性是不可能的（对于其他用户它继续工作）。当我编译更新表单时，它返回：

`错误消息说我teacher.attributes.password 缺少验证

而老师应该继承用户的相同验证。

在 routes.rb 中，创建教师模型后，我添加了：

```
 resources :teachers, :controller => 'users', :type => "Teacher" 
```

这是用户控制器中的更新方法：

```
def update
@user = User.find(params[:id])
if @user.update_attributes(params[:user])
   redirect_to @user   ... 
```

如果我将 @user.update_attributes(params[:user]) 更改为 @user.update_attributes(params[:teacher]) 它可以工作，但显然只适用于老师。

我认为解决方案很简单，但我是新手。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:32:31.293

由于d11wtq在这里提出的解决方案，我解决了我的问题：

[在 Rails 中子类化用户模型真的很糟糕吗？](https://stackoverflow.com/questions/6146317/is-subclassing-a-user-model-really-bad-to-do-in-rails)

我像这样编辑了教师模型：

```
class Teacher < User 
```

`def self.model_name`

`User.model_name`

`end`

`end`

# node.js - 如何使用 everest-js 创建Note？

> ID：14492183
> 
> 赞同：1
> 
> 时间：2013-01-24T01:00:41.783
> 
> 标签：node.js, evernote

我正在使用[https://github.com/berryboy/everest-js](https://github.com/berryboy/everest-js)

并想在我的印象笔记上发布一些笔记，

但是这个项目没有展示创建的例子，任何人都可以展示一个例子吗？

或者 Evernote 是否有任何 REST API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:07:15.417

我们还没有 JavaScript SDK，但还有其他可能有用的（Ruby、PHP）。你可以在[这里](https://github.com/organizations/evernote)找到它们。

# ios - iOS UICollectionView 原型单元格大小属性被忽略

> ID：14492186
> 
> 赞同：64
> 
> 时间：2013-01-24T01:01:00.340
> 
> 标签：ios, uicollectionview, collectionview

我正在使用带有两个原型单元的 UICollectionView。原型单元格具有不同的宽度并包含不同的控件（图像视图和 Web 视图）。我肯定会为给定索引返回正确的原型单元格（所有单元格都显示正确的内容），但原型单元格大小被忽略，而是使用集合视图的项目大小。这不像我手动设置大小。如果属性在实际显示时被忽略，那么允许原型单元格在情节提要中调整大小有什么意义？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-01-29T15:44:54.847

故事板编辑器中单元格的大小只是为了帮助您设计单元格。由于每个原型单元格的大小可能不同，因此 UICollectionView 不知道为所有单元格选择哪个单元格的大小。这就是为什么您要单独设置要用于单元格的实际大小。您可以在设计器中通过选择集合视图并在“集合视图大小”标题下的大小检查器中设置其单元格大小宽度和高度来完成此操作。

或者，您可以覆盖以下方法并返回一个 CGSize 对象，该对象指定要用于每个单元格的大小。使用这种方法，您实际上可以让每个单元格具有不同的大小：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

例子：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    return CGSizeMake(100, 100);
} 
```

您的视图控制器需要是 UICollectionViewDelegateFlowLayout 的委托才能调用此方法。所以不要忘记将该委托声明添加到视图控制器的 .h 文件中，例如：

```
@interface MyViewController () <UICollectionViewDelegateFlowLayout> 
```

**迅速**

```
extension MyViewController : UICollectionViewDelegateFlowLayout {
    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
        return CGSize(width: 100, height: 100)
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-11T16:10:34.730

如果所有单元格的大小相同，您可以`itemSize`在`UICollectionViewFlowLayout`

例子：

```
((UICollectionViewFlowLayout *) self.collectionViewLayout).itemSize = CGSizeMake(100, 100); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-02T16:37:30.453

Swift，适用于最新的 iOS。

```
(collectionView.collectionViewLayout as! UICollectionViewFlowLayout).itemSize = cellSize 
```

我没有足够的积分来回复 Sam，但关键是它不是 UICollectionViewLayout 而是 UICollectionViewFlowLayout。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-10-22T16:21:21.463

我有一个类似的问题，我在 sizeForItemAt 上设置了一个断点，并且我的集合中的每个单元格都会调用它，但是，代码中设置的大小从未反映在设备上。

在查看我项目中的其他集合时，我注意到集合视图流布局在有问题的集合中略有不同。

## 通过在情节提要中选择流布局

[![](../Images/977236b3398e363afa02b247c8c612c1.png)](https://i.stack.imgur.com/1fbhd.png)

## 然后在 Size Inspector 中设置*Cell Size* & *Estimate Size*

[![](../Images/5c7ff544b29b9c8bcc16a690f1c88e8a.png)](https://i.stack.imgur.com/mCqSV.png)

这帮助我解决了我的问题。

**但是，单元格的大小不会随 sizeForItemAt 中的内容而动态变化**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T13:23:38.027

`UICollectionViewCell`您可以在`UICollectionView`属性中设置大小。

在情节提要中，选择`Collection View`，`Document Outline`然后编辑您`Cell Size`的`Size Inspector`。

如果是自定义，您应该将单元格的大小类型更改为默认值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-14T12:41:38.727

在 Swift 中，您可以调用 sizeForItemAtIndexPath 委托方法来设置每个单元格的大小。

```
func collectionView(collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAtIndexPath indexPath: NSIndexPath) -> CGSize {

        if indexPath.row == 0 {
                // Set the size for cell no. 0
         }else if indexPath.row == 1 {
               // Set the size for cell no. 1
        }
    } 
```

我希望这会有所帮助。谢谢！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-12T13:23:21.590

尝试使用 UICollectionViewDelegateFlowLayout 方法。在 Xcode 11 或更高版本中，您需要在 Storyboard 中将 Estimate Size 设置为 none。

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: 
UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
      let padding: CGFloat =  170
      let collectionViewSize = advertCollectionView.frame.size.width - padding
      return CGSize(width: collectionViewSize/2, height: collectionViewSize/2)
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-24T10:06:16.067

如果所有单元格的大小相同，则只需将`UICollectionView`的单元格大小属性设置为与`UICollectionViewCell`的大小属性相同。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-17T09:17:32.007

使用其默认委托。. .

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CGSize mElementSize;
    mElementSize = CGSizeMake(SCREEN_WIDTH , SCREEN_HEIGHT *0.60);
    return mElementSize;
} 
```

# sql - 在 PostgreSQL 中使用军事时间值作为时间？

> ID：14492192
> 
> 赞同：1
> 
> 时间：2013-01-24T01:01:23.390
> 
> 标签：sql, postgresql, timestamp

我创建了一个表

```
 CREATE TABLE mytable

(food VARCHAR(20) references myfood(BIN)
,name NUMERIC(2)
,servingsize VARCHAR(15)
,time TIMESTAMP
,PRIMARY KEY(food, time)
); 
```

我想要的是将数据插入到我使用的这个表中：

```
INSERT INTO dinnertime (food, name, servingsize, time) VALUES 
('earl', 3, 'one cup', '1300'),
('phebeo', 2, 'two cup', '1100'),
('apollo', 1, 'one Cup', '0700'),
('oscar', 4, 'one cup', '2200'); 
```

但是 PostgrSQL 不允许我这样做。问题在于时间。我需要对我的表进行哪些更改才能采用这种时间格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:06:10.987

使用时间而不是时间戳（时间戳是日期+时间，您只有时间），然后转换为一种公认的时间格式：

[http://www.postgresql.org/docs/8.0/static/datatype-datetime.html](http://www.postgresql.org/docs/8.0/static/datatype-datetime.html)

# c# - 在 Visual Studio 2010 中将 Native/C++ DLL 链接到托管 C++/CLI 包装器

> ID：14492198
> 
> 赞同：1
> 
> 时间：2013-01-24T01:01:51.293
> 
> 标签：c#, visual-studio-2010, dll, linker, c++-cli

在我的 Visual Studio 解决方案中，我有一个包含本机 C++ 代码的 dll、一个 C++/CLI dll，我试图在其中为我的非托管类型实现一个包装器，最后是我的 C# 应用程序。

我目前无法在我的包装 dll 中引用我的非托管类型。

代码片段：

```
// In the unmanged file (in the unmanged dll project)
using std::vector;
namespace populationwin32 
{
  class PopulationWin32
  {
  public:
    PopulationWin32();
  // ...
  };
}

// In the managed file. (in the manged dll project)
using namespace system;
using populationwin32::PopulationWin32;
namespace GSODFileParsing 
{
  public ref class PopulationWin32Wrapper
  {
  public:
    PopulationWin32Wrapper();
  private:
    PopulationWin32 *_populationWin32; // unmanaged object   
  }; // End class
} // End namespace 
```

当我尝试编译托管 dll（包含包装器）时，出现以下错误：

```
Error   1   error C2653: 'populationwin32' : is not a class or namespace name
Error   2   error C2873: 'PopulationWin32' : symbol cannot be used in a using-declaration
Error   4   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

任何想法这些错误意味着什么？我认为它们是因为没有正确链接到未管理的 dll，但我不确定如何执行此操作，并且我在网上找到的所有内容都有不同的说法。任何人都知道如何正确和完全地将未管理的库（dll 项目）与托管的 VC++/CLI 包装器库（dll 项目）链接起来吗？

注意：这两个库都是单个 Visual Studio 解决方案中的项目。

**编辑：**感谢我添加的 Olaf Dietsche 的评论

```
#include "PopulationWin32.h" 
```

到包装头文件，但现在我收到以下错误：

> 错误 1 ​​错误 C1083：无法打开包含文件：'PopulationWin32.h'：没有这样的文件或目录

是否有我缺少的设置或者我需要在两个 DLL 项目中包含头文件？顺便说一句，我通过属性->配置属性->链接器->输入->附加依赖项将未管理的 dll 输出 .lib 文件添加为托管 dll 的依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:04:03.053

你的第一个错误`'populationwin32' : is not a class or namespace name`意味着，编译器不知道这个命名空间。

添加一个

```
#include "PopulationWin32.h" 
```

让 Visual Studio 知道这一点。

您还必须添加包含文件的路径，以便编译器可以找到它。例如，此处描述了[VC++ 目录、项目和解决方案、选项对话框](http://msdn.microsoft.com/en-us/library/t9az1d21%28v=vs.80%29.aspx)和此处[的 #include 指令](http://msdn.microsoft.com/en-us/library/36k2cdd4%28v=vs.80%29.aspx)。

# python - 如果 .. 其他在 python

> ID：14492199
> 
> 赞同：2
> 
> 时间：2013-01-24T01:01:55.927
> 
> 标签：python, syntax

我用 Python 写了一个程序来生成素数这里是程序

```
def genPrimes(n):
    primes = [2]  # primes generated so far
    last = 3  # last number tried
    while last <= n:        
        for p in primes:
            if last % p == 0 and math.sqrt(p) <= last:
                break
        else:
            primes.append(last)
        last += 2
    return primes 
```

[http://codepad.org/d33tsQyT](http://codepad.org/d33tsQyT)

这个程序正在产生一个正确的答案。如果您看到 else: 语句的缩进，它是错误放置的。如果我尝试将 else 语句放入 if 块解释器显示内存错误。谁能说出为什么会这样。

在此先感谢玛丽

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:03:29.193

`else`实际附加到`for`循环中，如果程序没有跳出循环，则执行。在您的情况下，如果没有素数除以数字，它就会执行，因此该数字是素数并附加到列表中。

另请参阅[文档](http://docs.python.org/2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:03:37.747

它没有放置不正确，python 假设您正在使用`for-else`循环。

从[文档](http://docs.python.org/3.2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)：

> 当与循环一起使用时，else 子句与 try 语句的 else 子句相比与 if 语句有更多的共同点：try 语句的 else 子句在没有异常发生时运行，而循环的 else 子句在没有中断发生时运行.

# javascript - 使用 CSS 精灵来切换状态，而无需为每种情况编写类

> ID：14492203
> 
> 赞同：2
> 
> 时间：2013-01-24T01:03:02.880
> 
> 标签：javascript, css, css-sprites

让我先说我想避免使用 javascript 来解决这个问题。如果可能（可能不是），我想在 CSS 中保留所有这些“逻辑”。

我正在创建一个棋盘游戏 ( [Khet](http://en.wikipedia.org/wiki/Khet_%28game%29) ) 以在 javascript 中获得乐趣。棋盘可以有多种状态，例如：

*   颜色（哪个玩家拥有该作品）
*   它是什么类型的作品（金字塔、狮身人面像、空白瓷砖等）
*   棋子朝向的方向（棋子可以旋转也可以移动）
*   如果这件作品正在反射激光
*   如果工件被激光损坏

话虽如此，我有一个`sprite.png`文件，其中包含每件作品的所有可能组合，我希望能够使用 CSS 类来移动这些作品的状态。

例如，假设红色玩家在棋盘上有一个金字塔棋子，它面向东北。这件作品将有类`.red`,`.pyramid`和`.northeast`. 如果这幅作品被激光击中并反射它，我所要做的就是为`.laser`作品添加一个类，CSS`background-position`类将启动并更改作品以获得正确的图像。

这导致了几个问题：

1.  这甚至可以在纯 CSS 中实现吗？
2.  您将如何安排图像以`sprite.png`使这些`background-position`类起作用？
3.  这些类会是什么样子（这可能取决于#2）？
4.  我需要将图像分开吗？就像把所有的红色棋子放在一个`sprite_red.png`和蓝色的一样`sprite_blue.png`？

在我处理游戏的其他一些部分时，我把它放在了次要位置。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:23:15.617

你绝对可以在一个精灵中完成这一切。这只是您想要使用多大的图像的问题。

```
|      SPHINX         |        Pyramid       |
Red  |  Blue  | Oran  |  Red  |  Blue  | Oran
 N       N       N        N       N       N
 NE      NE      NE       NE      NE      NE
 E       E       E        E       E       E
 SE      SE      SE       SE      SE      SE
 S       S       S        S       S       S
 SW      SW      SW       SW      SW      SW
 W       W       W        W       W       W
 NW      NW      NW       NW      NW      NW
|               DAMAGE                       |
 N       N       N        N       N       N
 NE      NE      NE       NE      NE      NE
 E       E       E        E       E       E
 SE      SE      SE       SE      SE      SE
 S       S       S        S       S       S
 SW      SW      SW       SW      SW      SW
 W       W       W        W       W       W
 NW      NW      NW       NW      NW      NW
 ....etc.... 
```

从那里开始，CSS 喜欢

```
.piece { background:url('giant-sprint.png') no-repeat 0 0 }

.piece.sphinx.red.n { background-position:0px 0px }
.piece.sphinx.red.n.damage { background-position:0px 108px }

.piece.sphinx.red.s.damage { background-position:0px 156px }
.piece.pyramid.blue.s.damage { background-position:60px 156px }

.piece.pyramid.blue.sw { background-position:60px 72px }
.piece.sphinx.blue.sw.damage { background-position:60px 168px } 
```

它不会那么长，并且您将记住该列的左侧和顶部位置以及它们仅从建立的模式中代表的部分。

我肯定会将这些碎片限制在一个容器中（至少对于 v1.0）。一个用于正常状态的精灵，一个用于损坏的部件......也许......可能会让您的生活从维护 POV 中变得更轻松。随着游戏的成熟，正确的方法对您来说应该变得更加明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:28:29.323

```
1\. Is this even possible to do in pure CSS? 
```

是的，绝对有可能做到这一点，并且有很多可能的方法来做到这一点。

```
2.How would you arrange the images in sprite.png such that these
background-position classes would work? 
```

假设您有六个不同的棋子和这些棋子可以采用的六种不同颜色。

如何安排它们完全取决于您。以任何对你有意义的方式去做。

您可以将第一排的所有金字塔碎片都放在所有不同的颜色中。然后你可以把所有的狮身人面像碎片放在第二排，依此类推。

对于板件的方向以及是否显示反射激光或激光损坏，我建议为可能的三层中的每一层使用单独的元素，如下所示：

所以你有一个包含两个其他 SPAN 标签的 SPAN 标签。

*   第一个 SPAN 标签具有正确颜色的棋盘背景。
*   第二个 SPAN 标记具有方向图标的背景。
*   第三个 SPAN 标签具有反射或损坏的激光图标的背景。

你只需使用 CSS 绝对定位和 z-index 将 SPANS 堆叠在一起。显然，方向和反射/损坏的图标需要是 PNG 图像，以便它们可以是透明的，这样您就可以看到它们下方的棋盘图标。

这意味着您不必在每个颜色变化中创建每个板件的版本，其中包含激光损坏、特定方向、激光反射等。

```
3\. What would the classes look like?

.layer1 {
    position: relative;
    z-index: 1;
    background-image: url(spite1.png);
    background-repeat: no-repeat;
}

.layer2 {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
    background-image: url(spite2.png);
    background-repeat: no-repeat;
}

.layer3 {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 3;
    background-image: url(spite2.png);
    background-repeat: no-repeat;
}

.pyramid-red {
    background-position: 0 0;
}

.pyramid-blue {
    background-position: -24px 0;
}

4\. Do I need to break the image apart? Like placing all red pieces in one sprite_red.png and blue in sprite_blue.png? 
```

我建议使用两个精灵：

*   第一个将包含板件及其颜色变体。

*   第二个将包含定向图像以及反射状态和损坏状态。

我希望一切都有意义！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T02:41:03.337

> 1）这甚至可以在纯CSS中做到吗？

是的！但是您将不得不面对两个限制：没有数学，并且没有单独的`background-position-x`and分配`background-position-y`（因为[这些属性是 non-standard](https://stackoverflow.com/questions/9653685/is-background-position-x-background-position-y-a-standard-w3c-css-property)）。因此，您将需要一个选择器和规则来处理每个组合，例如`.red.pyramid.northeast`、`.red.pyramid.northeast.reflecting`等`.red.pyramid.northeast.damaged`。我想这也回答了问题#3。

> 2) 你将如何安排 sprite.png 中的图像，以便这些背景位置类可以工作？

有多种可能性。我会采用类似将相同形状分组到列中的方法，然后为每种不同的颜色重复这些列。这些行将针对 8 个可能的方向，乘以 3 个状态。

> 4）我需要把图像分开吗？就像把所有的红色棋子放在一个 s`prite_red.png`和蓝色的一样`sprite_blue.png`？

我最初认为这将是一个好主意。也许是这样，但你仍然会得到大量的规则。

如果您真的只想使用 CSS，我强烈建议您使用某种脚本生成样式表（也许 LESS os SASS？我从未使用过它们，所以我不知道），然后缩小以进行部署。否则，维护它可能会是一种不愉快的体验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T17:37:15.357

第一步是规划精灵图。

我将设置2种类型。那将是 type1 和 type2 类，并且是水平的。我将设置 4 个方向，这将是垂直的。如果精灵的大小为 32，则 type2 的水平偏移量为 32，方向的偏移量为 32、64 和 96。

接下来是颜色。在这里，我需要做一些数学运算。可以用 CSS 吗？不，是的。如果我将一个元素放在另一个元素中，left 属性是累积的。因此，我们将需要另一个元素，并使用 left 和 tops：

```
.type1             { position: relative;}
.type2             { left: -32px; position: relative;}

.dir1             { }
.dir2             { top: -32px}
.dir3             { top: -64px}
.dir4             { top: -96px}

.color2 img  { left: -64px} 
```

标记是

```
<div class="clip solution">
<div class="type2 dir4 color2 reflecty damagey">
<img src="./SpritewithImages.png">
</div>
</div> 
```

颜色类应该与图像一起使用，但是在 2 个不同的地方有类会是一个问题，所以我将 CSS 规则设置为与父亲中的选择器一起使用。颜色类别将以 64 像素为增量，因为我们有 2 种类型。如果我们有更多，那将相应增加现在我们还剩下 2 个维度。为了适应这一点，我们需要另一层 div。为了避免这种情况，我们在一维中打包 2 个决策。反射是，损坏是，以及两者（无需指定无损坏或无反射）。复合选择器：

```
.reflecty img  { top: -128px}
.damagey img  { top: -256px}
.reflecty.damagey img  { top: -384px} 
```

仅此而已！当然，目标可能不是在 sprite 中做所有事情。然后可能你可以玩转旋转，激光的东西可以进入一个透明层过度施加。

那是[小提琴](http://jsfiddle.net/vals/FhKn7/)

在进入最后一个之前，您将看到选择的中间精灵的显示

**已编辑**

我在小提琴按钮中包含了切换状态。您可以在右侧看到带有精灵的网格。这些列旨在：

```
1 - figure 1, color 1
2 - figure 2, color 1
- separator
3 - figure 1, color 2
4 - figure 2, color 2 
```

列是

```
1 - direction 1
2 - direction 2
4 - direction 4
- separator
5 - reflection, direction 1
8 - reflectio , direction 4
- separator
9 - damaged, direction 1
12 - damaged, direction 4
- separator 
13 reflection, damaged, direction 1 
```

更新的[小提琴在这里](http://jsfiddle.net/FhKn7/1/)

# spring - Spring SimpleJdbcCall 在没有输入参数但有输出参数的情况下调用存储过程

> ID：14492206
> 
> 赞同：2
> 
> 时间：2013-01-24T01:03:19.893
> 
> 标签：spring, spring-jdbc

我试图调用一个只有一个输出参数而没有输入参数的存储过程。当我如下所示调用存储过程时，出现“调用中的参数数量或类型错误”错误

```
SimpleJdbcCall jdbcCall = new SimpleJdbcCall(springTemplate) 
.withCatalogName("my_package").withProcedureName("my_procedure")
.withReturnValue().withoutProcedureColumnMetaDataAccess()
.declareParameters(new SqlOutParameter("return", Types.VARCHAR));
 Map out = jdbcCall.execute();
 System.out.println((String)out.get("return")); 
```

我不确定这里出了什么问题。我得到了错误

```
org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; 
bad SQL   grammar [{? = call my_package.my_procedure()}]; nested exception is 
java.sql.SQLException: ORA-06550: line 1, column 13:
PLS-00306: wrong number or types of arguments in call to 'my_procedure'
ORA-06550: line 1, column 7: 
```

任何帮助将不胜感激 PL/SQL: Statement被忽略

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:41:21.883

我完全尝试了您所做的并且对我有用，请发布以下语句的结果：

```
select PACKAGE_NAME, OBJECT_NAME, POSITION, ARGUMENT_NAME, DATA_TYPE, IN_OUT
from USER_ARGUMENTS
where PACKAGE_NAME ='my_package' and OBJECT_NAME = 'my_procedure'
order by PACKAGE_NAME, OBJECT_NAME, POSITION 
```

更新：
我想我发现了你的错误，引用*'a stored procedure which only has one out parameter and no input parameter'*。你有一个过程，而不是一个函数。在这种情况下，您必须编写：

```
SimpleJdbcCall jdbcCall = new SimpleJdbcCall(springTemplate) 
    .withCatalogName("my_package")
    .withProcedureName("my_procedure")
    .withoutProcedureColumnMetaDataAccess()
    .declareParameters(new SqlOutParameter("YOUR_OUTPARAMETER_NAME", Types.VARCHAR)); 
```

# android - Android ImageView 设置非 int ID

> ID：14492208
> 
> 赞同：3
> 
> 时间：2013-01-24T01:03:21.880
> 
> 标签：android

是否可以使用字符串设置 ImageViews id？

我正在以编程方式添加 ImageViews，我想将 ID 设置为“IMG12a”之类的东西

```
 ImageView image = new ImageView(this);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(100, 100);
    params.leftMargin = X;
    params.topMargin = Y;
    image.setLayoutParams(params);
    image.setScaleType(ImageView.ScaleType.CENTER_CROP);
    image.setImageResource(IMG);
    image.setId(?????);
    theLayout.addView(image); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:07:04.833

不，但您可以使用`setTag (int key, Object tag)`or`setTag (Object tag)`代替。

[http://developer.android.com/reference/android/view/View.html#setTag(int, java.lang.Object)](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29) [http://developer.android.com/reference/android/view/View.html# setTag(java.lang.Object)](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)

并分别用`getTag (int key)`或获取标签。`getTag ()`

[http://developer.android.com/reference/android/view/View.html#getTag(int)](http://developer.android.com/reference/android/view/View.html#getTag%28int%29) [http://developer.android.com/reference/android/view/View.html#getTag()](http://developer.android.com/reference/android/view/View.html#getTag%28%29)

然后，您需要将返回`Object`的内容转换为`String`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:02:13.503

使用 setId 是不可能的，

你应该使用`setTag(Object tag)`（你可以使用一个字符串，你不需要将它转换为一个对象）。

并使用`View.findViewWithTag(Object tag)`以获取视图并对其进行修改。

如果您需要获取标签，请使用`getTag()`。`getTag().toString()`为了得到它作为一个字符串。

# sql - SQL Server 2008：必须声明标量变量（地理）

> ID：14492211
> 
> 赞同：0
> 
> 时间：2013-01-24T01:03:24.870
> 
> 标签：sql, sql-server-2008

我正在尝试使用 SQL Server 2008 进行基本的邻近搜索（传递指定位置的纬度/经度，以便返回的结果是按位置距离排序的表中的位置）。

我有在 SQL Server 中完美运行的代码。但是，当我尝试从 ASP/VBScript 中执行它时（不要问），我收到以下错误：

> *必须声明标量变量“@currentPosition”*（参考下面注释的行）

这是代码：

```
objCommand.CommandText = "declare @currentLatitude float, @CurrentLongitude float"
objCommand.Execute
objCommand.CommandText = "declare @currentPosition geography"
objCommand.Execute
objCommand.CommandText = "declare @radiusBuffer geography"
objCommand.Execute
''''error line below:
objCommand.CommandText = "Set @radiusBuffer = @currentPosition.BufferWithTolerance(10 * 1609.344,.9,1);"
objCommand.Execute
objCommand.CommandText = "set @CurrentLatitude = 12.34567"
objCommand.Execute
objCommand.CommandText = "set @CurrentLongitude = -12.34567"
objCommand.Execute
objCommand.CommandText = "SET @currentPosition = geography::Point(@CurrentLatitude, @CurrentLongitude, 4326);"
objCommand.Execute
objCommand.CommandText = "SELECT a.*, ROW_NUMBER() OVER (ORDER BY GeoLocation.STDistance(@currentPosition) ASC) AS RowNum from table_name a WHERE a.GeoLocation.STDistance(@currentPosition) < 16093.44"
objCommand.Execute 
```

我声明了变量（或者至少我认为我声明了），但显然我遗漏了一些东西或做错了。希望比我聪明的人能告诉我什么:)

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:13:07.633

您需要将所有命令连接到一个字符串中并在一个字符串中运行它`Execute`

# git - 为什么 git checkout -b {branchname} 允许我在尚未提交时创建新分支？

> ID：14492216
> 
> 赞同：0
> 
> 时间：2013-01-24T01:03:40.497
> 
> 标签：git

好的。这让我很困惑。我刚刚初始化了一个运行命令的空 git 存储库`git init`。然后我将一个文件添加到 git 的对象存储中，即`git add .`我试图创建一个分支，即`git branch {branchname}`. 我收到一个错误，因为根据我所阅读的内容，如果没有至少提交一次，我就无法创建分支。好的。我会咬。所以我再试试`git checkout -b {branchname}`。它似乎奏效了，即我被传送到我刚刚创建的分支。哇？我尝试`git checkout master`并得到错误`error: pathspec 'master' did not match any file(s) known to git.`

为什么我能够创建一个新分支而不签出`master branch`？我忽略了什么或没有理解什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:56:00.003

`master`, like `origin`or `upstream`, 是约定，不是要求。由于您在 中没有提交`master`，因此您也没有任何参考。`HEAD`指向一个尚不存在的 ref。当你运行时`git checkout -b branch`，你要求 git：

1.  `HEAD`将您的点复制到 ref 。
2.  将您`HEAD`指向新的参考。

由于您`HEAD`指向不存在的 ref，因此您没有复制任何内容，最终仍然没有指向任何内容。只要你在不提交的情况下继续切换分支，就会出现这种情况。

一旦你做了你的第一次提交，一切都会改变。既然您已经做出了提交，那么您就有了一个可供当前`HEAD`指向的参考。下次创建分支时，有一个要复制的 ref，因此下次切换时分支不会消失。

示例（ish）：

```
git init
touch test
git add test
# There are no refs at this point, but HEAD is pointing to the nonexistent refs/heads/master
git checkout -b new_branch
git checkout master # fails, no refs (for master)
git checkout -b new_branch2
git checkout new_branch # fails, no refs (for new_branch)
git commit -m "Initial commit." 
# Now you have a ref for new_branch2, but not yet for any other branches.
git checkout -b new_branch3 # new_branch2's ref is duplicated
git checkout new_branch2 # success, you made a commit in this branch so it has a ref
git checkout new_branch3 # success, you made a commit in new_branch2 which this branch's ref is also pointing to.
git checkout master # failure, until you run with '-b' master doesn't have any refs yet. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:17:34.950

它最初对我不起作用...

```
durrantm.../play$ mkdir ggg
durrantm.../play$ cd ggg
durrantm.../ggg$ git init
Initialized empty Git repository in /home/durrantm/play/ggg/.git/
durrantm.../ggg$ git checkout -b newy
fatal: You are on a branch yet to be born 
```

...直到是的，我在 master 上做了一个初始提交：

```
durrantm.../ggg$ vi x.x
durrantm.../ggg$ git add .
durrantm.../ggg$ git commit -m"Initial Commit"
[master (root-commit) 75bcf19] Initial Commit
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 x.x
durrantm.../ggg$ git checkout -b abc
Switched to a new branch 'abc'
durrantm.../ggg$ 
```

# javascript - 提高我的库原型的性能

> ID：14492218
> 
> 赞同：0
> 
> 时间：2013-01-24T01:03:44.653
> 
> 标签：javascript, performance

我正在为我的一个项目开发一个小型 jQuery 式库，到目前为止一切都很好，但是我遇到了一些性能问题，我似乎无法弄清楚为什么虽然我有一些想法，但首先，这里是有问题的代码（简化以显示实际问题）：

演示：http: [//jsbin.com/umemot/1/edit](http://jsbin.com/umemot/1/edit)

```
(function(doc, win) {

  // Utils:

  var AP = Array.prototype;

  function _toArray(obj) {
    return AP.slice.call(obj);
  }

  function _curry(fn, that) {
    return function() {
      return fn.apply(that || arguments[0], AP.slice.call(arguments));
    };
  }

  function _flatten(arr) {
    return AP.concat.apply([], arr);
  }

  function _uniq(arr) {
    return arr.filter(function(el, i) {
      return arr.indexOf(el) == i;
    });
  }

  function _removeEmpty(arr) {
    return arr.filter(function(v) { return v; });
  }

  // Proto:

  function Lib(selector) {
    this.el = this._init(selector);
  }

  function lib(selector) {
    return new Lib(selector);
  }

  // Lib:

  Lib.prototype = {

    _init: function(selector) {
      return _toArray(doc.querySelectorAll(selector));
    },

    _with: function(fn) {
      var result = [];
      this.each(function() { result.push(fn.call(this, this)); });   
      this.el = _removeEmpty(_uniq(_flatten(result)));
      return this;
    },

    _matches: function(selector) {
      return this._with(function() {
        var parent = _toArray(this.parentNode.querySelectorAll(selector));
        return ~parent.indexOf(this) && this;
      });
    },

    each: function(fn) {
      return this.el.forEach(_curry(fn)), this;
    },

    find: function(selector) {
      return this._with(function() {
        return _toArray(this.querySelectorAll(selector));
      });
    },

    children: function(selector) {
      return this._with(function() {
        return _toArray(this.children);
      });
    },

    filter: function(selector) {
      return this._matches(selector);
    }

  };

  win._ = lib;

}(document, window)); 
```

我使用它非常像 jQuery：

```
_('#outer').find('div').children().filter('a'); 
```

与 jQuery 相比，我遇到的问题是性能大幅下降，您可以在此处看到[http://jsperf.com/lib-vs-jquery-69](http://jsperf.com/lib-vs-jquery-69)。

这就是我的想法：

*   所有那些 ES5 数组方法都在减慢它的速度
*   某种垃圾收集问题？也许我泄漏了什么？
*   该`_matches`方法是否足够有效？

以上所有可能导致性能比 jQuery 慢 60% 还是我的实现是错误的？有任何想法吗？

**编辑：**我正在其他浏览器中进行测试，似乎只是 Chrome 的一个“大问题”......虽然 Opera 说它慢了 20%，Firefox 只有 3%......

# c# - ParallelQuery 核心平衡

> ID：14492223
> 
> 赞同：2
> 
> 时间：2013-01-24T01:04:22.877
> 
> 标签：c#, parallel-processing, plinq

我有 200,000 个任务将并行运行以提高速度。我正在使用`ParallelEnumerable.Range(0, 200000).Sum( a => /*do_something*/ )`.

随着任务计数器从 0 变为 200,000，所需的迭代次数减少。`a=0`需要最多迭代次数的任务，而完成`a>100,000`一次或没有迭代的任务。

因此，随着任务的进行，我的四核机器没有达到最大 cpu 利用率峰值。似乎工作负载在开始时被分配到所有 4 个核心，并且一些核心更早地空闲，因为它们的部分主要是具有高`a`s 的任务。cpu 利用率从 100% 开始，逐渐下降到 75~50~25%。如何从头到尾实现充分的 CPU 利用率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:18:18.560

非常简单的自我回答：替换`ParallelEnumerable.Range(0, 200000)`为`Enumerable.Range(...).AsParallel()`足以解决此问题。似乎工作负载是动态分布的`Enumerable.Range(...).AsParallel()`。

# javascript - 如何通过 jquery 附加 -webkit-filter 属性

> ID：14492225
> 
> 赞同：1
> 
> 时间：2013-01-24T01:04:24.280
> 
> 标签：javascript, jquery, html, css

我编写了以下代码以制作具有 id=sample grayscale(0.6) 和 blur(5px) 的元素。但事实证明，后一个 -webkit-filter 属性替代了前一个属性，而不是附加到它。我每次只能添加一个 -webkit-filter 属性。是否可以将模糊附加到灰度？请明确说明我使用的是最新的 chrome，因此 -webkit-filter 可以在我的导航器上使用。

```
$('#grayscale').click(function() {
    $('#sample').css({"-webkit-filter" : "grayscale(0.6)"})
});
$('#blur').click(function() {
    $('#sample').css({"-webkit-filter" : "blur(5px)"})
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:19:58.893

您可以添加（或从中删除）现有过滤器。

```
$('#grayscale').on('click', function() {
    var $sample = $('#sample');
    var new_filter = "grayscale(0.6)"; 
    var old_filter = $sample.css("-webkit-filter");
    if(old_filter.indexOf(new_filter) == -1){
        $sample.css("-webkit-filter", old_filter + ' ' + new_filter);
    }
    else {
        $sample.css("-webkit-filter", old_filter.replace(new_filter, ''));
    }
}); 
```

[http://jsfiddle.net/zzmJR/](http://jsfiddle.net/zzmJR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T14:39:30.823

某些版本的 jquery 在添加浏览器特定样式时失败

有时使用 JavaScript 可能会更快

var 样本 = $('#sample'); sample.style.webkitFilter = "灰度(0.6)";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T10:13:04.983

我想您最好的选择是使用通用控制器。这样，您可以为灰度和模糊应用不同的值。理想情况下，您应该通过输入来完成，而不仅仅是单击元素。像这样的东西：

```
var gValue = 0;
var bValue = 0;
$('#grayscale').click(function() {
    gValue= 0.6;
    change();
});
$('#blur').click(function() {
    bValue = 0.5;
    change();
});

function change(){
   var filter = "grayscale(" + gValue + ") blur(" + bValue + ")";
   $('#sample').css("webkitFilter", filter});
} 
```

# backbone.js - Backbone.js sync() 找不到 url 属性

> ID：14492226
> 
> 赞同：8
> 
> 时间：2013-01-24T01:04:26.170
> 
> 标签：backbone.js

使用这个人为的示例代码：

```
var Product = Backbone.Model.extend({
  idAttribute: '_id',
  url: '/rest/product',
});

var Cart = Backbone.Collection.extend({
  model: Product,
  url: '/rest/cart',
});

p1 = new Product({name: 'Keyboard'});
p2 = new Product({name: 'Mouse'});

c = new Cart();
c.add([p1, p2]);
c.sync(); 
```

我看到`Error: A "url" property or function must be specified`有很多帖子围绕着同样的错误消息，但我发现的所有帖子都是由于在此过程中没有定义 url 属性或函数的结果。

我觉得好像我错过了某个地方的链接步骤 - 也许我隐含地依赖于 Backbone.js 实际上并没有自动设置的“神奇”连接/回调/属性/属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T01:12:10.943

我认为你不应该直接打电话`sync`；我认为您正在寻找的是`c.fetch()`（或者`p1.save(); p2.sav2()`，取决于您尝试发送数据的方向）。Sync 正是 Backbone 在内部使用来执行其`fetch`/的`save`（如果您想更改其执行方式的 AJAX 详细信息，则存在 sync 供您覆盖，否则*您*不需要它）。

如果您想方便地将每个模型保存在集合中，您可以使用 Underscore 内置的集合方法“invoke”（您应该可以这样做`c.save()`，但我想您不能这样做）：

```
 c.invoke('save'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T06:44:28.103

我会先退后一步，检查您的用例和您选择的架构。您显然是在尝试将产品添加到用户的购物车中。

我看到的问题是您已将购物车设为收藏。我建议让购物车成为包含产品集合的模型。

```
var ProductCollection = Backbone.Collection.extend({
    model : Product
});

var Cart = Backbone.Model.extend({
    url : '/rest/cart',
    defaults : {
        products : new ProductCollection()
    }
}); 
```

使用这个新架构，您可以：

```
var c = new Cart();
c.get('products').add([p1, p2]);
c.save(); 
```

此模式的另一个好处是您可以在购物车中包含其他数据属性，例如客户 ID、购物车的创建时间等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:25:52.683

该方法`sync()`只是. [_](http://documentcloud.github.com/backbone/docs/backbone.html#section-34)`Backbone.sync`

`fetch()`并且`save()`是 的一种便捷方法`sync()`，允许您假设第一个`sync()`参数（“read”、“patch”、“update”等）是给定的。

要自己调用它，您需要匹配此方法的方法签名才能直接调用它：

```
Backbone.sync = function(method, model, options) 
```

这是它是如何`fetch()`做到的（注意传递的“读取”参数，以及`this`对模型的引用：

```
this.sync('read', this, options); 
```

这是怎么`save()`做的：

```
 method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
 if (method === 'patch') options.attrs = attrs;
 xhr = this.sync(method, this, options); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T22:27:32.617

在这种情况下使用`save()`，而不是`sync()`

`save()`本质上是`Backbone.sync()`通过代理完成的工作，但应该自动从`save`.

当甚至从模型/集合作为方法调用时`sync()`，您需要提供您希望 sync() 作为第二个参数的模型。

所以，`myModel.sync('PUT',myModel)`会工作。在你的情况下，`c.sync('PUT',c)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-03T01:22:00.247

您不能以这种方式保存收藏；它不是 RESTful，因为 REST 完全是关于转移（单个）模型的状态。所以 Backbone.Collection 不支持是有道理的`save()`。

一种解决方案是调用`.invoke('save')`集合，正如@machineghost 建议的那样，但**请注意**，这将导致集合中每个模型的离散请求！如果您有多个模型要保存，这可能不是一个好主意。

但是你总是可以保存一个 Backbone.Model... 那为什么不做一个呢？

```
var Wrapper = Backbone.Model.extend({
   url: 'api/endpoint'
});
var wrapper = new CollectionWrapperModel({
    cart: c.models
}); 
wrapper.save(); 
```

或者，更简洁地说：

```
var wrapper = new (Backbone.Model.extend({url: 'api/endpoint'}))({cart: c});
wrapper.save(); 
```

请注意，服务器随后将收到一个 POST 或 PUT 消息，其中包含一个名为 的属性`cart`，一个由多个模型组成的数组，需要对其进行适当处理。

我意识到提问者为他的问题找到了不同的解决方案，但希望这会对某人有所帮助。

# objective-c - Objective-C 函数指针块属性

> ID：14492227
> 
> 赞同：0
> 
> 时间：2013-01-24T01:04:34.593
> 
> 标签：objective-c, properties, automatic-ref-counting, function-pointers, objective-c-blocks

我正在尝试在 Objective-C 中实现类似于 C# 委托概念的东西。我认为它可以完成，但我正在努力让它发挥作用。我已经为我的块设置了一个类型 def：

```
typedef BOOL (^CompareBlock)(id obj1, id obj2); 
```

我还有一个块类的属性：

```
@property (nonatomic, copy) CompareBlock compareBlock; 
```

我想要做的是在`init`方法中设置属性，并引用预先存在的方法：

```
BOOL isGreaterThan(id obj1, id obj2)
{
     // perform some comparison

     return false;
}

- (id)init
{
    self = [super init];

    if (self)
        self.compareBlock = isGreaterThan;

    return self;
} 
```

我知道这不是正确的语法，但我不知道如何实现这个概念。我已经尝试将函数转换为我定义的块 typedef，但是一个错误表明 ARC 不允许这样做。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:16:31.767

您的问题是您的`compareBlock`属性是一个块，并且`isGreaterThan`是一个函数指针。这些不能像这样互换。你想要的是这样做：

```
self.compareBlock = ^(id lhs, id rhs){ 
    /* compare here */
    return (BOOL)comparisonResult;
}; 
```

块允许您在方法体中而不是在命名函数中声明比较器。如果你想实际使用你的`isGreaterThan`函数，你只需将它包装在一个块中，因此：

```
self.compareBlock = ^(id lhs, id rhs){ 
    return isGreaterThan(lhs,rhs);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:17:07.223

我找到了一种使用 iluvcapra 建议的方法来实现我想要做的事情。我尝试按照以前的方式做事的主要原因是为了整洁。我认为这种方法可以实现：

```
+ (CompareBlock) isGreaterThan
{
     return ^(id object1, id object2)
     {
         // perform some comparison

         return compareResult;
     }
}

- (id)init
{
    self = [super init];

    if (self)
        self.compareBlock = [MyClass isGreaterThan];

    return self;
} 
```

# google-app-engine - GAE 上 JPA 的 persistence.xml 中的实体类

> ID：14492229
> 
> 赞同：0
> 
> 时间：2013-01-24T01:04:53.293
> 
> 标签：google-app-engine, maven, jpa-2.0, datanucleus

我一直在学习一些关于谷歌应用引擎教程的 jpa。在所有教程中，都没有在 persistence.xml 中指定实体类。但是我的本地环境抛出了 NoPersistenceInformationException。“de.vogella.gae.java.todo.model.Todo”类必须是可持久的，但找不到此类的元数据/注释。请检查元数据/注释是否定义在有效的文件位置。

如果我在 persistence.xml 中指定实体类，问题就会消失。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence         http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="transactions-optional">
<provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
<class>de.vogella.gae.java.todo.model.Todo/class>
<properties>
  <property name="datanucleus.NontransactionalRead" value="true"/>
  <property name="datanucleus.NontransactionalWrite" value="true"/>
  <property name="datanucleus.ConnectionURL" value="appengine"/>
  <property name="datanucleus.singletonEMFForName" value="true"/>
  <property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true"/>
</properties> 
```

有人可以向我解释为什么我需要这样做吗？GAE 教程中的 JPA 都不需要这样做。一个区别是我使用 google appengine maven 插件而不是 eclipse 插件。

这是我的pom文件

http://maven.apache.org/xsd/maven-4.0.0.xsd">

```
<modelVersion>4.0.0</modelVersion>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>

<groupId>de.vogella.gae.java.todo</groupId>
<artifactId>todo</artifactId>

<pluginRepositories>
    <pluginRepository>
        <id>google-snapshots</id>
        <name>Google Snapshots</name>
        <url>https://oss.sonatype.org/content/repositories/google-snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </pluginRepository>
</pluginRepositories>

<properties>
    <appengine.app.version>1</appengine.app.version>
    <appengine.target.version>1.7.4</appengine.target.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <!-- Compile/runtime dependencies -->
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-1.0-sdk</artifactId>
        <version>${appengine.target.version}</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- JPA dependencies -->
    <dependency>
        <groupId>com.google.appengine.orm</groupId>
        <artifactId>datanucleus-appengine</artifactId>
        <version>2.0.1.1</version>
    </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo-api</artifactId>
        <version>[3.0, 4.0)</version>
    </dependency>
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>[3.0, 3.0.99)</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>[3.0, 3.0.99)</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-jpa-query</artifactId>
        <version>3.0.2</version>
    </dependency>

    <!-- Test Dependencies -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.0</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${appengine.target.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${appengine.target.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.5.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>2.3.5.Final</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <version>2.5.1</version>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <!-- compilerArguments>
                    <processor>org.datanucleus.jpa.query.JPACriteriaProcessor</processor>
                </compilerArguments -->                 
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <archiveClasses>true</archiveClasses>
                <webResources>
                    <!-- in order to interpolate version from pom into appengine-web.xml -->
                    <resource>
                        <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                        <filtering>true</filtering>
                        <targetPath>WEB-INF</targetPath>
                    </resource>
                </webResources>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>1.7.5-SNAPSHOT</version>
            <configuration>
                <jvmFlags>
                    <jvmFlag>-Xdebug</jvmFlag>
                    <jvmFlag>-Xrunjdwp:transport=dt_socket,address=1044,server=y,suspend=n</jvmFlag>
                    <jvmFlag>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</jvmFlag>
                </jvmFlags>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>3.0.2</version>
            <configuration>
                <api>JPA</api>
                <persistenceUnitName>transactions-optional</persistenceUnitName>
                <!-- log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration -->
                <verbose>true</verbose>
            </configuration>
            <executions>
                <execution>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这是我正在学习的教程[http://www.vogella.com/articles/GoogleAppEngineJava/article.html](http://www.vogella.com/articles/GoogleAppEngineJava/article.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:29:16.557

我想我的谷歌搜索技能很弱，因为在问之前我没有找到答案......

但是这个问题已经在stackoverflow上被问过了......

[persistence.xml 中的类元素](https://stackoverflow.com/questions/1780341/do-i-need-class-elements-in-persistence-xml)

# android - 如何构建自己的 Android SDK

> ID：14492231
> 
> 赞同：10
> 
> 时间：2013-01-24T01:05:08.240
> 
> 标签：android, android-sdk-2.3, android-build

我在自己的 android 设备上工作，它有许多新的 API（但 @hide 装饰）。我的目标是提供一个 android sdk 来开发并使用这些新的 API。

所以我的问题是：如何使用这些新的 API 构建我自己的 android sdk？

如果 @hide 装饰有问题，我可以删除它们（我不必尊重[CDD](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/fr//compatibility/4.2/android-4.2-cdd.pdf)）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T14:25:36.897

你可以使用这个命令

```
make -j8 PRODUCT-sdk-sdk showcommands dist 
```

在这里，您可以讨论它： [https ://groups.google.com/forum/?fromgroups=#!topic/android-building/Y0xduZPWtUs](https://groups.google.com/forum/?fromgroups=#!topic/android-building/Y0xduZPWtUs)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-24T01:50:14.860

我认为 SDK 的概念在这里被误解了。

如果您想在 Android SDK（实用程序、数学库，你有什么？）之上发布一组代码（API），只需将您的项目标记为库（项目属性 -> Android -> 勾选“是库”）因此其他 Android 项目可以轻松链接到它。

将项目上传到 Github 之类的地方并传播链接，以便其他人可以使用它。

# blackberry - 如何使用 scaleImage32() 将图像缩小到一半？

> ID：14492232
> 
> 赞同：3
> 
> 时间：2013-01-24T01:05:12.970
> 
> 标签：blackberry, java-me, bitmap, image-resizing

现在我有：

```
 EncodedImage logo = EncodedImage.getEncodedImageResource("image.png");
    logo.scaleImage32(Fixed32.toFP(2), Fixed32.toFP(2));
    BitmapField image = new BitmapField(logo.getBitmap());
    image.setMargin(15, 15, 15, 15);
    this.add(image); 
```

它只是以正常大小显示图像。但是，`logo.setScale(2)`可以代替`.scaleImage32(...)`，但已弃用。

使用 .scaleImage32() 将我的图像显示一半大小的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:05:12.027

不幸的是，你被一个糟糕的 API 欺骗了，在我看来，这是 Java（以及所有 C 语言）的弱点。

你认为那`scaleImage32()`是在缩放你的`logo`图像。不是。它正在返回一个按比例缩放的副本`logo`。但是，您没有对这个值做任何事情。`logo`当您确实需要返回的缩放副本时，您用于在位图字段中显示`scaleImage32()`：

```
EncodedImage logo = EncodedImage.getEncodedImageResource("image.png");
EncodedImage scaledLogo = logo.scaleImage32(Fixed32.toFP(2), Fixed32.toFP(2));
BitmapField image = new BitmapField(scaledLogo.getBitmap()); 
```

我会补充几点：

1）如果您可以将您的应用程序限制为 OS 5.0 及更高版本，我[认为 scaleInto() API 更易于使用](https://stackoverflow.com/a/2268027/119114)

2）这种情况是人们对方法名称大惊小怪的原因。RIM 为 选择了一个糟糕的名称`scaleImage32()`，因为这使您相信您调用该方法的实例将被缩放。它应该被命名为`getScaledImage32()`，或类似的名称。

*3）在我不好意思承认的晦涩的编程内容*的标题下，我曾经在[Ada](http://en.wikipedia.org/wiki/Ada_(programming_language))中编码。Ada 致力于尽可能地防止编程错误。Ada 的特色之一是编译器将未使用的返回值视为错误。这种情况正是原因。

所以，不要对这个感到太难过:)

# javascript - Google Map 渲染方向中的拟合边界

> ID：14492233
> 
> 赞同：5
> 
> 时间：2013-01-24T01:05:18.550
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, fitbounds

我正在尝试为 48 个航点渲染方向，但谷歌只允许每个请求渲染 8 个航点。所以我做了多个请求（在我的例子中是 6）。但是，API 以某种方式为最后一个请求执行了 fitBounds() 。

如何使用 fitBounds() 和/或 setZoom() 在一张地图中显示所有 48 个航点

我的代码如下： -

```
function DisplayDirection(directionList){

    var interval = 8; // upper bound for usage limits in google directions API is 8
    var startIndex =0;
    var maxmimumIndex = directionList.length-1; // Total number of waypoints in this route
    var partialEndIndex = interval-1; // end waypoint at start
    var iteration = 0; // loop controler
    directionsService = new google.maps.DirectionsService();
    var resultSet = new Array();
    var directionsDisplayList = new Array();
    var resultsCached = 0;
    var bounds = new google.maps.LatLngBounds();

    do { //do...while to iterate over multiple requests
        iteration++;
        if(iteration>1){
            startIndex = startIndex+interval;
            partialEndIndex = startIndex+interval;
        }

        var directionsDisplay = new google.maps.DirectionsRenderer({
                markerOptions: {
                    visible:false
                }      
            });
        directionsDisplayList.push(
            directionsDisplay
        ); 

        directionsDisplayList[iteration-1].setMap(map);

        var origin = directionList[startIndex];
        var destination = partialEndIndex < maxmimumIndex ? directionList[partialEndIndex]:directionList[maxmimumIndex];
        waypoints = new Array();

        for(var i=startIndex+1;i<partialEndIndex;i++){
            if(i>maxmimumIndex){                
                break;
            }       

            waypoints.push(
                {
                    location:directionList[i],
                    stopover:true
                }
            );
            latlong = directionList[i].split(","); //
            lat = latlong[0];  //
            lng = latlong[1]; //
            bounds.extend (new google.maps.LatLng(lat,lng)); //extend the bounds            
        }

        var request = {
            origin: origin,
            destination: destination,
            waypoints : waypoints,
            provideRouteAlternatives:false,
            travelMode: google.maps.TravelMode.WALKING,
            unitSystem: google.maps.UnitSystem.METRIC
        }

        directionsService.route(request, function(result, status) {
            if(status == google.maps.DirectionsStatus.OK) {
                //Cashe the results to render directions//
                resultSet.push(result);                             
                if(resultSet.length==iteration){
                    for(var i=0; i<iteration; i++){
                        directionsDisplayList[i].setDirections(resultSet[i]);                                                           
                    }
                    map.fitBounds(bounds);                  
                }                   
            }           
        });

    }while (partialEndIndex <= maxmimumIndex);      
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:42:02.063

使用[DirectionsRenderer 的 preserveViewport 选项](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)来防止自动缩放到路线，然后设置您喜欢的视口。

```
{preserveViewport: true} 
```

然后将每个单独的方向结果中返回的边界与[google.maps.LatLngBounds.union结合起来](https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds)

```
function DisplayDirection(directionList) {
  var interval = 8; // upper bound for usage limits in google directions API is 8
  var startIndex = 0;
  var maxmimumIndex = directionList.length - 1; // Total number of waypoints in this route
  var partialEndIndex = interval - 1; // end waypoint at start
  var iteration = 0; // loop controler
  directionsService = new google.maps.DirectionsService();
  var resultSet = new Array();
  var directionsDisplayList = new Array();
  var resultsCached = 0;
  var bounds = new google.maps.LatLngBounds();

  do { //do...while to iterate over multiple requests
    iteration++;
    if (iteration > 1) {
      startIndex = startIndex + interval;
      partialEndIndex = startIndex + interval;
    }

    var directionsDisplay = new google.maps.DirectionsRenderer({
      preserveViewport: true, // prevent auto zoom to result
      markerOptions: {
        visible: false
      }
    });
    directionsDisplayList.push(
      directionsDisplay
    );

    directionsDisplayList[iteration - 1].setMap(map);

    var origin = directionList[startIndex];
    var destination = partialEndIndex < maxmimumIndex ? directionList[partialEndIndex] : directionList[maxmimumIndex];
    waypoints = new Array();

    for (var i = startIndex + 1; i < partialEndIndex; i++) {
      if (i > maxmimumIndex) {
        break;
      }

      waypoints.push({
        location: directionList[i],
        stopover: true
      });
      latlong = directionList[i].split(","); //
      lat = latlong[0]; //
      lng = latlong[1]; //
      bounds.extend(new google.maps.LatLng(lat, lng)); //extend the bounds            
    }

    var request = {
      origin: origin,
      destination: destination,
      waypoints: waypoints,
      provideRouteAlternatives: false,
      travelMode: google.maps.TravelMode.WALKING,
      unitSystem: google.maps.UnitSystem.METRIC
    }

    directionsService.route(request, function(result, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        //Cashe the results to render directions//
        resultSet.push(result);
        if (resultSet.length == iteration) {
          // empty bounds
          var bounds = new google.maps.LatLngBounds();
          for (var i = 0; i < iteration; i++) {
            directionsDisplayList[i].setDirections(resultSet[i]);
            // combine all the bounds of the results together with union
            if (i == 0) {
              bounds = resultSet[i].routes[0].bounds;
            } else {
              bounds.union(resultSet[i].routes[0].bounds);
            }
          }
          // fit the map to the resulting bounds
          map.fitBounds(bounds);
        }
      }
    });

  } while (partialEndIndex <= maxmimumIndex);
} 
```

[概念证明小提琴](http://jsfiddle.net/geocodezip/hb0k4pqo/2/)（51分）

**代码片段：**

```
var geocoder;
var map;

function initialize() {
  map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(37.4419, -122.1419),
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  document.getElementById('info').innerHTML = "entries:" + directionList.length;
  DisplayDirection(directionList);
}
google.maps.event.addDomListener(window, "load", initialize);

function DisplayDirection(directionList) {
  var interval = 8; // upper bound for usage limits in google directions API is 8
  var startIndex = 0;
  var maxmimumIndex = directionList.length - 1; // Total number of waypoints in this route
  var partialEndIndex = interval - 1; // end waypoint at start
  var iteration = 0; // loop controler
  directionsService = new google.maps.DirectionsService();
  var resultSet = new Array();
  var directionsDisplayList = new Array();
  var resultsCached = 0;
  var bounds = new google.maps.LatLngBounds();

  do { //do...while to iterate over multiple requests
    iteration++;
    if (iteration > 1) {
      startIndex = startIndex + interval;
      partialEndIndex = startIndex + interval;
    }

    var directionsDisplay = new google.maps.DirectionsRenderer({
      preserveViewport: true,
      markerOptions: {
        visible: false
      }
    });
    directionsDisplayList.push(
      directionsDisplay
    );

    directionsDisplayList[iteration - 1].setMap(map);

    var origin = directionList[startIndex];
    var destination = partialEndIndex < maxmimumIndex ? directionList[partialEndIndex] : directionList[maxmimumIndex];
    waypoints = new Array();

    for (var i = startIndex + 1; i < partialEndIndex; i++) {
      if (i > maxmimumIndex) {
        break;
      }

      waypoints.push({
        location: directionList[i],
        stopover: true
      });
      latlong = directionList[i].split(","); //
      lat = latlong[0]; //
      lng = latlong[1]; //
      bounds.extend(new google.maps.LatLng(lat, lng)); //extend the bounds            
    }

    var request = {
      origin: origin,
      destination: destination,
      waypoints: waypoints,
      provideRouteAlternatives: false,
      travelMode: google.maps.TravelMode.WALKING,
      unitSystem: google.maps.UnitSystem.METRIC
    }

    directionsService.route(request, function(result, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        //Cashe the results to render directions//
        resultSet.push(result);
        if (resultSet.length == iteration) {
          var bounds = new google.maps.LatLngBounds();
          for (var i = 0; i < iteration; i++) {
            directionsDisplayList[i].setDirections(resultSet[i]);
            if (i == 0) {
              bounds = resultSet[i].routes[0].bounds;
            } else {
              bounds.union(resultSet[i].routes[0].bounds);
            }
          }
          map.fitBounds(bounds);
        }
      }
    });

  } while (partialEndIndex <= maxmimumIndex);
}
var directionList = [
  "52.1615470947258,20.80514430999756",
  "52.15991486090931,20.804049968719482",
  "52.15772967999426,20.805788040161133",
  "52.15586034371232,20.80460786819458",
  "52.15923693975469,20.80113172531128",
  "52.159849043774074, 20.791990756988525",
  "52.15986220720892,20.790467262268066",
  "52.16202095784738,20.7806396484375",
  "52.16088894313116,20.77737808227539",
  "52.15255590234335,20.784244537353516",
  "52.14747369312591,20.791218280792236",
  "52.14963304460396,20.79387903213501",
  "52.1704725, 20.8118862",
  "52.1845184, 20.8400429",
  "52.200343, 20.8274304",
  "52.2015168, 20.799051599999984",
  "52.18724, 20.76437569999996",
  "52.18032700000001, 20.75405180000007",
  "52.1716078, 20.743079899999998",
  "49.9636566, 20.1216374",
  "51.8484715, 20.9852811",
  "51.40272359999999, 21.14713329999995",
  "51.2464536, 22.5684463",
  "51.1431232, 23.47119859999998",
  "50.7230879, 23.251968",
  "50.5826005, 22.053585999999996",
  "50.0411867, 21.999119599999972",
  "50.0121011, 20.9858407",
  "49.6174535, 20.7153326",
  "49.4215158, 20.959420799999975",
  "49.0018324, 21.23931189999996",
  "48.7163857, 21.2610746",
  "48.0963631, 20.762385999999992",
  "47.9025348, 20.3772284",
  "47.1621355, 20.1824712",
  "47.497912, 19.04023499999994",
  "48.3061414, 18.076375999999982",
  "48.1485965, 17.1077477",
  "48.2081743, 16.3738189",
  "48.30694, 14.28583",
  "48.16542, 14.03664",
  "48.05009, 14.41827",
  "47.80949, 13.055",
  "47.8571272, 12.1181047",
  "48.1351253, 11.58198",
  "52.52000659999999, 13.404953999999975",
  "53.5510846, 9.99368179999999",
  "50.1109221, 8.6821267",
  "52.3702157, 4.895167899999933",
  "50.8503396, 4.3517103",
  "48.856614, 2.3522219"
];
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="info"></div>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T05:45:56.227

您无法阻止`fitBounds()`在最后一个请求中发生。

在最后一个请求之后使用`latlngs`起点和终点并`fitBounds()`手动进行编码怎么样？我认为应该做的工作。

# c# - 绑定值为空/空时的dev express网格视图组合框默认值

> ID：14492235
> 
> 赞同：1
> 
> 时间：2013-01-24T01:05:25.197
> 
> 标签：c#, asp.net-mvc, gridview, razor, devexpress

以下是我在 dev express 网格视图编辑模板中使用的组合框代码。我希望组合框在添加新员工时不显示任何内容或显示“请选择和员工”的字符串，而不是在编辑时显示。

```
 @Html.DevExpress().ComboBox(edtSettings =>
            {
                edtSettings.Width = 200;
                edtSettings.Name = "EmployeeID";
                //edtSettings.Properties.TextField = "FirstName";
                edtSettings.Properties.ValueField = "EmployeeID";
                edtSettings.Properties.ValueType = typeof(int);

                edtSettings.Properties.DropDownStyle = DropDownStyle.DropDownList;
                edtSettings.ShowModelErrors = true;

                edtSettings.Properties.TextFormatString = "{0}" + " " + "{1}";
                edtSettings.Properties.Columns.Add("FirstName", "First Name", 150);
                edtSettings.Properties.Columns.Add("LastName", "Last Name", 150);

                //--- For client side validations
                edtSettings.Properties.ValidationSettings.RequiredField.IsRequired = true;
                edtSettings.Properties.ValidationSettings.RequiredField.ErrorText = "An Employee must be selected from the list.";

            }).BindList(Model.NonUsers).Bind(Model.UserSingle.EmployeeID).GetHtml() 
```

我这样做是为了传递正确的 Model.UserSingle，如下所示

```
 var User = ViewData["UserDetail"] != null
                            ? ViewData["UserDetail"]
                            : !c.Grid.IsNewRowEditing
                                ? Model.UserList.FirstOrDefault(m => m.EmployeeID == Convert.ToInt32(DataBinder.Eval(c.DataItem, "EmployeeID")))
                                : new User
                                    {
                                        SiteID = (int)Session["siteID"],

                                        ////employee ID cant set to blank, keeps adding a zero
                                        //EmployeeID = Convert.ToInt32(null),

                                        //this is defaulted to 'Timesheet Only'
                                        UserGroupID = 3
                                    };

            Model.UserSingle = (User)User; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T19:50:09.367

目前 MVC ComboBox 扩展不允许将“Null Item”（Null Text，Water Mark）添加到 Items 集合中。它在 DevEx TO-DO 列表中。

你可以试试这个解决方法。

```
 @Html.DevExpress().ComboBox(edtSettings =>
            {
    edtSettings.Properties.ClientSideEvents.Init = "function(s,e){if(s.GetValue()=='0'){ s.SetValue(null);} }";
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:42:12.920

在[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.aspx)中，您可以使用此属性：

```
edtSettings.Properties.NullDisplayText = "Please Choose and Employee"; 
```

# html - 将 HTML 页面分成两个或多个部分

> ID：14492237
> 
> 赞同：4
> 
> 时间：2013-01-24T01:05:53.013
> 
> 标签：html

如何将网页分成两个或更多部分？例如，我想在左侧放一些图片，在右侧放一张联系表。我找不到办法。我试着用 div 来做，但没有用。下面是我正在尝试做的示例代码。

```
<html>
<head>
    <title>Test</title>
</head>
<body>
    <div class="page">
            <div class="header">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="projects.html">Projects</a></li>
                    <li class="selected"><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="body">
                <div id="pictures">
                   <h1>Picture</h1>
                </div>
                <div id="contacform">
                   <h1>
                       <form action="mail.php" method="POST">
                       <p>Name</p> <input type="text" name="name">
                       <p>Email</p> <input type="text" name="email">
                       <p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />
                       <input type="submit" value="Send"><input type="reset" value="Clear">
                       </form>
                   </h1>
                </div>
            </div>
            <div class="footer">
               <p>Test Footer</p>
            </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:01:11.213

我不会挑选你应该使用的所有 CSS，所以下面的代码示例向你展示了如何将两个 div 标签均匀地分开。请不要在你的 CSS 中使用 #id 选择器，因为它会杀死小猫。

您的 HTML：

```
<div class="body">
                <div id="pictures" class="column half>
                   <h1>Picture</h1>
                </div>
                <div id="contactform" class="column last>
                   <h1>
                       <form action="mail.php" method="POST">
                       <p>Name</p> <input type="text" name="name">
                       <p>Email</p> <input type="text" name="email">
                       <p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />
                       <input type="submit" value="Send"><input type="reset" value="Clear">
                       </form>
                   </h1>
                </div>
            </div> 
```

CSS：

```
.body { overflow: hidden; }
.column { float: left; }
.half { width: 50%; }
.last { float: none; width: auto; } 
```

我推荐阅读 CSS 网格系统。

# python - 为什么 matplotlib.PatchCollection 会弄乱补丁的颜色？

> ID：14492241
> 
> 赞同：15
> 
> 时间：2013-01-24T01:06:13.617
> 
> 标签：python, colors, matplotlib, patch

我做了很多这样的补丁 -

```
node.shape = RegularPolygon((node.posX, node.posY),
                            6,
                radius = node.radius,
                                    edgecolor = 'none',
                                    facecolor = node.fillColor,
                                    zorder = node.zorder)

node.brushShape = RegularPolygon((node.posX, node.posY),
                            6,
                node.radius * 0.8,
                linewidth = 3,
                                    edgecolor = (1,1,1),
                                    facecolor = 'none',
                                    zorder = node.zorder) 
```

最初我只是像这样把它们直接放在我的轴上-

```
self.plotAxes.add_artist(node.shape)
self.plotAxes.add_artist(node.brushShape) 
```

那工作得很好。但现在我想将它们放入 PatchCollection 并将 PatchCollection 放到轴上。但是，当我这样做时，我所有的形状都是蓝色的。我不明白只是放入一个集合是如何以某种方式改变颜色的。任何人都可以帮我解决我需要做些什么来保持我输入的颜色值作为补丁的 faceColor 吗？

新代码是 -

```
node.shape = RegularPolygon((node.posX, node.posY),
                        6,
            radius = node.radius,
                                edgecolor = 'none',
                                facecolor = node.fillColor,
                                zorder = node.zorder)

node.brushShape = RegularPolygon((node.posX, node.posY),
                        6,
            node.radius * 0.8,
            linewidth = 3,
                                edgecolor = (1,1,1),
                                facecolor = 'none',
                                zorder = node.zorder)

self.patches.append(node.shape)
self.patches.append(node.brushShape)

self.p = PatchCollection(self.patches) 
self.plotAxes.add_collection(self.p) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-24T03:21:38.580

```
self.p = PatchCollection(self.patches, match_original=True) 
```

默认情况下，补丁集合会覆盖给定的颜色（[doc](http://matplotlib.org/api/collections_api.html#matplotlib.collections.PatchCollection)），以便能够应用颜色图、循环颜色等。这是一个`collection`级别功能（以及为散点图背后的代码提供动力的原因）。

# jakarta-ee - Glassfish 集群 + 远程实例无法恢复 EJB 计时器

> ID：14492242
> 
> 赞同：0
> 
> 时间：2013-01-24T01:06:23.043
> 
> 标签：jakarta-ee, ejb, ejb-3.0, java-ee-6, glassfish-3

**我们的设置**是：Glassfish 版本 3.1.2.2 -

1.  DAS 和 instance-1 在同一台机器上运行，而 instance-2 与配置节点在同一网络中的另一台机器上运行。
2.  我们已根据 Glassfish 高可用性指南在共享目录中设置事务日志：http: [//docs.oracle.com/cd/E18930_01/html/821-2416/gjjpy.html#gaxim](http://docs.oracle.com/cd/E18930_01/html/821-2416/gjjpy.html#gaxim)
3.  我们使用单播配置进行集群通信，因为我们的网络负载均衡器在网络中以多播模式运行。
4.  我们的应用程序（.ear 包含多个 .war）有 2 个持久定时器（因为集群中的每个定时器一次只需要一个实例）。

当instance-1（或instance-2）正常关闭时，另一个实例按预期从关闭的实例中恢复定时器。当实例 2 崩溃或异常下线时，实例 1 会恢复其计时器（再次如预期）。但是当实例 1 崩溃时，实例 2 似乎并没有按预期恢复其计时器。

据我从日志中可以看出，instance-2 收到了 instance-1 的正确故障转移消息并开始恢复，但在没有恢复失败实例的任何事务或计时器的情况下完成了它。

谁能告诉我可能是什么问题？（我应该提供更多信息吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:17:18.373

经过2周左右的工作，我们终于找到了问题所在。

似乎当集群中的一个实例宕机时，恢复实例通过尝试访问宕机实例的“node-host”：“admin-node-port”来检查该实例是否仍在运行。如果您在 DAS 上使用标准创建的节点（就像我们一样），节点主机设置为“localhost”（就像实例 1 所做的那样）。

因此，instance-2 试图通过尝试连接到“localhost”而不是“instance-1-ip”来查看 instance-1 是否已关闭。由于它可以连接到 localhost，因此 instance-1 被错误地标记为正在运行，并且恢复没有继续进行。

我们必须更改域 config.xml 中 instance-1 节点的节点主机来解决此问题，因为无法通过 asadmin 或管理控制台更改默认 localhost- 的配置。

# java - hadoop 类路径

> ID：14492243
> 
> 赞同：3
> 
> 时间：2013-01-24T01:06:26.547
> 
> 标签：java, hadoop

我正在尝试使用 junit 和 mockito 为 mapper 和 reducer 运行一些单元测试。
每次运行测试时，我是否必须在类路径中指定 hadoop 核心和公共 jar 文件的位置？
我认为运行“hadoop”命令应该在运行时自动包含所有必需的库。有没有办法避免每次都输入 hadoop 依赖项？

```
hadoop -cp /home/xxx/Downloads/mockito-all-1.9.5.jar:/home/xxx/Downloads/junit-4.10.jar:/home/xxx/Downloads/hadoop-1.1.1/hadoop-core-1.1.1.jar:./classes:.:/home/xxx/Downloads/hadoop-1.1.1/lib/commons-logging-1.1.1.jar org.junit.runner.JUnitCore MaxTemperatureMapperTest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:00:32.680

您可以在 hadoop-env.sh 中指定类路径。"export HADOOP_CLASSPATH= ***** " 下次运行 hadoop 时，会自动添加类路径。

# ruby-on-rails - 在生产中使用 Rails 的资产管道的目的是什么？

> ID：14492247
> 
> 赞同：0
> 
> 时间：2013-01-24T01:06:44.947
> 
> 标签：ruby-on-rails, asset-pipeline

我了解它在开发中的目的，但是当我在部署时预编译我的资产时，似乎最有意义的是简化并在生产中将其关闭。是否只用于指纹识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:09:42.930

它最小化代码大小并将单独的文件编译为一个以提高下载速度。

资产是预编译的，无论是在本地还是在生产中。指纹将确保当您将更改推送到生产环境时，人们不会将旧副本留在浏览器缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:57:41.927

每次请求都重新编译资产是愚蠢的。这就是为什么`config/environments/production.rb`contains `config.assets.compile = false`，这会迫使您预编译资产。如果它们是预编译的，则资产将静态提供 - 正如[指南](http://guides.rubyonrails.org/asset_pipeline.html#in-production)所解释的那样。

但是，`config.assets.enabled = false`完全禁用资产管道，因此您甚至无法预编译资产 - 它假定您正在执行手动生成资产的老式方法并将它们`public`自己放入文件夹中。

# graph - StanfordCoreNLP 和语义图的性能问题

> ID：14492249
> 
> 赞同：1
> 
> 时间：2013-01-24T01:06:49.330
> 
> 标签：graph, semantics, stanford-nlp

当我尝试用 Stanford-NLP 和 CoreNLP 分析文本时，性能很差。处理来自 CNN.com 的文档大约需要 30 秒。

我的代码基本上创建了一个具有以下配置的 StanfordCoreNLP 实例：

注释器 = 标记化、ssplit、pos、引理、ner、解析、dcoref sutime.binders = 0

当我禁用“ner, parse, dcoref”时，性能非常快。由于我需要获取语义图，我想知道是否有一种优化性能的方法或另一种获取语义图的方法来检索诸如直接宾语、名词主语等内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T03:09:59.457

`parse`解析和共指解析通常很慢，但不幸的是，如果不运行和`dcoref`注释器，就无法在 CoreNLP 的语义图中获取主题和对象信息。也就是说，斯坦福 CoreNLP 正在积极开发中，并且随着时间的推移变得越来越快。

# pthreads - 将一件工作交给一个线程并等待它接受

> ID：14492250
> 
> 赞同：0
> 
> 时间：2013-01-24T01:06:51.250
> 
> 标签：pthreads, mutex

我的应用程序的工作方式如下：工作线程初始化并开始在 pthread_cond_wait() 中等待主线程连接到数据库并开始一次将一行移交给适当的工作人员

由于 DB-driver 内部结构，在提取当前行之前无法读取下一行，因此主线程必须等待工作线程“接受”该行。

我通过在主线程中调用 pthread_cond_wait() 来实现这一点——等待来自工作线程的 pthread_signal()。这在 Linux 和 FreeBSD 上都可以正常工作，但在 Linux 上*通常*需要更长的时间。虽然我在 FreeBSD 上始终在大约 27 秒内处理整个 160 万行，但在 Linux 上通常需要 2 分钟以上。除了*有时*Linux 框显示相同的时间...

代码是从相同的源编译的，程序与相同的数据库服务器通信。如果有的话，Linux 机器与 DB 位于同一个 LAN 上，而 FreeBSD 机器通过 VPN 连接（所以它应该会慢一点）。但是困扰我的是Linux结果的广泛不一致，我怀疑线程协调......

这是我现在拥有的：

```
MAIN THREAD                               WORKER
--------------------------------------------------------------------------
get new row
figure out, which worker it belongs to    lock my mutex
lock the worker's mutex                   go into pthread_cond_wait
signal the worker                         extract the row's data
unlock the worker's mutex                 signal the main thread
go into pthread_cond_wait                 unlock the mutex
go on back to getting the next row        go on to process the row's data 
```

有没有更好的办法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:16:32.603

如果读取下一行无论如何都必须是串行的，那么为什么要将它委托给工作人员？由于主线程无论如何都必须等待，所以让主线程进行提取并在行被充分提取后立即进行切换，以便主线程可以继续下一行。

除此之外，您将需要提供代码，因为您的描述不完整，提交的任何此类性质的问题都不需要代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:07:25.750

看起来您的问题是您在`pthread_cond_wait()`没有锁定主线程中的互斥锁的情况下调用。这意味着存在竞争条件：如果工作线程在父线程执行*之前*`pthread_cond_wait()`唤醒、提取数据并发出条件信号，则唤醒将丢失。

您应该拥有一些与条件变量配对的共享状态，如下所示：

**主线：**

```
get_new_row();
worker = decide_worker();

pthread_mutex_lock(&mutex);

/* Signal worker that data is available */
flag[worker] = 1;
pthread_cond_signal(&cond);

/* Wait for worker to extract it */
while (flag[worker] == 1)
    pthread_cond_wait(&cond, &mutex):

pthread_mutex_unlock(&mutex); 
```

**工作线程：**

```
pthread_mutex_lock(&mutex);

/* Wait for data to be available */
while (flag[worker] == 0)
    pthread_cond_wait(&cond, &mutex):

extract_row_data();

/* Signal main thread that extraction is complete */
flag[worker] = 0;
pthread_cond_signal(&cond);

pthread_mutex_unlock(&mutex); 
```

# iphone - TableViewCell 显示缓慢

> ID：14492252
> 
> 赞同：0
> 
> 时间：2013-01-24T01:07:04.790
> 
> 标签：iphone

我用另一个视图控制器为我的表格视图制作了一个自定义单元格，以向其中添加内容。但奇怪的是内容显示缓慢。我的意思是大部分时间只出现中心线（有时什么都没有），然后玩单元格，过了一会儿，剩下的内容（总共 3 行）终于出现了。

![只有 > 出现！](../Images/11666f38468a7e212ed6398d4bac95f3.png)

过了一会儿，

![在此处输入图像描述](../Images/7f2d5dd797927c65f6d9123e58b3d2ce.png)

一切都在那里。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    eatEventTableViewCell *cell = (eatEventTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"expenseCell"];
    if (cell == nil) {
    cell = [[eatEventTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"expenseCell"];
    }

    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (void)configureCell:(eatEventTableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.nameField.text = [[object valueForKey:@"descText"] description];
    cell.tagsField.text = [[object valueForKey:@"type"] description];
    cell.creationDateLabel.text = [eatAddViewController dateFormat:[[object valueForKey:@"timeStamp"] description] :TRUE];
    if([eatExpenseType getSelectionValue :cell.tagsField.text :m_setting])
    {
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:13:56.603

*   由于您是从 Core Data 获取的，因此一种可能性是获取需要很长时间。您是否正在处理大型数据库
*   另一个可能的解释是您正在主线程上执行其他一些 CPU 密集型任务。每个 UI 操作都在主线程上进行，如果主线程还忙于其他任务，您可能会遇到显示滞后。然后，您可能希望在后台线程上执行这些其他任务。

# php - Joomla 下拉菜单将列表变成蓝色

> ID：14492257
> 
> 赞同：0
> 
> 时间：2013-01-24T01:07:38.893
> 
> 标签：php, javascript, joomla

我有一个测试站点，其中有一个问题，它是一个房地产列表站点，我有一些结果和一个下拉列表来排列每页的结果数量，但是每次我从下拉菜单中选择任何数字结果变成蓝色。

请帮助这是链接：[http ://realesta-cp68.webjoomla.es/](http://realesta-cp68.webjoomla.es/)

在前 8 个列表之后，我有下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:12:11.923

当您更改下拉菜单时，您正在设置“rpl_plist_container”div 的不透明度

在功能 page_change(post_string) 你有：

```
jQuery("#rpl_plist_container").fadeTo(300,.4); 
```

第二个参数是设置不透明度，如果你不想要它，你可以使用：

```
 jQuery("#rpl_plist_container").fadeTo(300); 
```

更多信息：[http ://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

# java - ArrayList 对象存储在 List 变量中

> ID：14492258
> 
> 赞同：1
> 
> 时间：2013-01-24T01:07:39.640
> 
> 标签：java, interface, javac

我是新学java。我想了解util包中的各种数据结构。

```
/*create an ArrayList object*/
List<String> arrayList = new ArrayList<String>(); 
```

在我见过的 ArrayList 类的声明中

```
public class ArrayList
extends AbstractList
implements List, RandomAccess, Cloneable, Serializable 
```

我的问题是，如果我使用 List<> 类型的对象来存储 ArrayList<> 的构造函数返回的对象

它会起作用吗？你可以假设我只需要使用 List 接口中指定的方法，例如 add() 或 size()。

我已经在我的机器上尝试过了，但它不起作用。我在下面的 java 教程中找到了这个

> [http://www.javamex.com/tutorials/collections/using_1.shtml](http://www.javamex.com/tutorials/collections/using_1.shtml)

我尝试的完整示例代码如下。

```
package arraylist;
import java.util.ArrayList;
import java.util.List;

public class ArrayListExample {

        public static void main(String[] args)
        {

        /*create an ArrayList object*/
         List<String> arrayList = new ArrayList<String>();

                /*
                Add elements to Arraylist using
                boolean add(Object o) method. It returns true as a general behavior
                of Collection.add method. The specified object is appended at the end
                of the ArrayList.
                 */
        arrayList.add("1");
        arrayList.add("2");
        arrayList.add("3");

        /*
        Use get method of Java ArrayList class to display elements of ArrayList.
        Object get(int index) returns and element at the specified index in
        the ArrayList
         */
        System.out.println("Getting elements of ArrayList");
        System.out.println(arrayList.get(0));
        System.out.println(arrayList.get(1));
        System.out.println(arrayList.get(2));
    }
} 
```

我忘了导入 List。这就是它不起作用的原因。但是我的下一个问题是我们使用 List 类型的变量来存储 ArrayList 类型的对象。

比较 List 和 ArrayList 的方法 ArrayList 有一个名为 trimToSize() 的方法，它不在列表中。

在上述情况下，我可以调用该方法吗？

如果是，那通常意味着可以使用基类指针来存储派生类对象，因为派生类的方法列表将始终是基类方法的超集？

我的上述结论正确吗？这是我听起来很愚蠢的问题，但我对 java 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:09:54.007

由于`ArrayList`实现了`List`接口，您应该能够使用声明为 a`List`并初始化为`ArrayList`. 这是很常见的做法。它允许您在不更改代码的情况下切换列表的实现。

确保您导入列表界面：

```
package arraylist;
import java.util.ArrayList;
import java.util.List;

public class ArrayListExample {

        public static void main(String[] args)
        {

        /*create an ArrayList object*/
         List<String> arrayList = new ArrayList<String>();

                /*
                Add elements to Arraylist using
                boolean add(Object o) method. It returns true as a general behavior
                of Collection.add method. The specified object is appended at the end
                of the ArrayList.
                 */
        arrayList.add("1");
        arrayList.add("2");
        arrayList.add("3");

        /*
        Use get method of Java ArrayList class to display elements of ArrayList.
        Object get(int index) returns and element at the specified index in
        the ArrayList
         */
        System.out.println("Getting elements of ArrayList");
        System.out.println(arrayList.get(0));
        System.out.println(arrayList.get(1));
        System.out.println(arrayList.get(2));
    }
} 
```

引用时`List`您将无法使用该`trimToSize`功能，因为它不在界面上`List`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:15:51.473

考虑这个例子，

```
class A implements B {  } 
```

在这种情况下，可以将类分配给其实现的接口之一类型的变量。

```
C c = new A(); 
```

如果在使用 c 的实例时执行此转换，则只能访问 Class C 中可用的方法。

同样`ArrayList`是你的ClassA，你`List`的例子是Class B。

在下面的使用`arraylist`实例中，您可以调用 List 接口中可用的方法，

```
/*create an ArrayList object*/
List<String> arrayList = new ArrayList<String>(); 
```

如果您使用上述分配，则不能调用 ArrayList`trimToSize()`等方法。如果您想使用 ArrayList 方法，请按如下方式使用。

```
/*create an ArrayList object*/
ArrayList<String> arrayList = new ArrayList<String>(); 
```

大多数开发人员，90% 的时间都使用 List 提供的方法，这就是所有示例都遵循前一种方法的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T01:09:18.200

`List<String>`arrayList 表示“此变量只能存储`List<String>`接口的实现”

`ArrayList<String>`工具`List<String>`，所以它可以在那里生活。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T01:19:44.343

编辑文件的顶部，如下所示：

包数组列表；导入 java.util.ArrayList；导入 java.util.List；

……

如果没有导入 List，则不能将其用作变量的类型。这是您遇到的问题。

# c++ - C fwrite 计算经过的时间

> ID：14492262
> 
> 赞同：2
> 
> 时间：2013-01-24T01:07:54.570
> 
> 标签：c++, fwrite

我有个问题。我实际上想大致了解对驱动器进行 fwrite 需要多长时间。

当我执行以下操作时：

```
clock_t begin = clock();
unsigned long long size_t = fwrite(send, 1, transfer_size*sizeof(unsigned long long), wpFile);
clock_t end = clock();
double long elapsed_secs = double long(end - begin) / CLOCKS_PER_SEC; 
```

不幸的是，对于不同的传输大小，我没有得到任何不同的结果！！！

我的猜测是 clock_t ，一旦它发出一个 fwrite 命令，就会停止它的测量，当我已经完成 fwrite 时它又回来了。我确实得到了几乎相同的度量，无论我的传输大小是 32KB 字节还是 16MB ！我确实期待看到巨大的差异。我真的不想要确切的真实时间测量（当然很高兴知道）；我关心的只是看看我是在做 KB 转移还是 MB 转移。

有谁知道任何其他功能可以让我粗略测量 fwrite 功能所用的实际时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:13:04.527

问题是（在大多数操作系统上）所有对磁盘的写入都首先写入内存缓存。只有当这些缓存页面变得太旧（通常为 1 秒的数量级）时，它们才会真正写入磁盘。

对内存缓存的写入非常快。如果您需要对实际磁盘写入的速度进行基准测试，则必须先同步缓存。

一种可能有效的方法： `syncfs()`from `unistd.h`. `man 2 sync`说这个函数不一定要等待同步发生，而是“因为 Linux 1.3 它确实在等待”。

编辑：你没有说你在使用 Windows :) 我对它不是很熟悉，但是在 WINAPI 中出现了一个快速的谷歌`FILE_FLAG_NO_BUFFERING`搜索`FlushFileBuffers`。看[这里](http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx)，[这里](http://msdn.microsoft.com/en-us/library/cc644950%28v=vs.85%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/aa364439%28v=vs.85%29.aspx)。

# facebook - 检索 Facebook 页面的粉丝

> ID：14492267
> 
> 赞同：-1
> 
> 时间：2013-01-24T01:09:02.243
> 
> 标签：facebook, facebook-graph-api, facebook-page

是否可以从 facebook 页面的管理员那里检索 facebook 粉丝的列表？（假设我使用的是由该管理员认证的 facebook 应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:12:50.473

不可以。Facebook 不会让您通过 API 访问页面粉丝列表。

# python - 胡时刻对比

> ID：14492274
> 
> 赞同：7
> 
> 时间：2013-01-24T01:09:45.740
> 
> 标签：python, opencv, image-processing, contour

我尝试比较两个图像并使用 Hu 矩比较从这些图像中提取的轮廓：[https](https://docs.google.com/file/d/0ByS6Z5WRz-h2WHEzNnJucDlRR2s/edit) ://docs.google.com/file/d/0ByS6Z5WRz-h2WHEzNnJucDlRR2s/edit和[https://docs.google.com/file/ d/0ByS6Z5WRz-h2VnZyVWRRWEFva0k/edit](https://docs.google.com/file/d/0ByS6Z5WRz-h2VnZyVWRRWEFva0k/edit) 第二个图像与第一个图像相同，只是它被旋转了，我期望结果相同。它们有点不同。

右侧的幽默标志（第一张图片）：

```
[[  6.82589151e-01]
[  2.06816713e-01]
[  1.09088295e-01]
[  5.30020870e-03]
[ -5.85888607e-05]
[ -6.85171823e-04]
[ -1.13181280e-04]] 
```

右侧的幽默标志（第二张图片）：

```
[[  6.71793060e-01]
[  1.97521128e-01]
[  9.15619847e-02]
[  9.60179567e-03]
[ -2.44655863e-04]
[ -2.68791106e-03]
[ -1.45592441e-04]] 
```

在这段视频中：[http](http://www.youtube.com/watch?v=O-hCEXi3ymU) ://www.youtube.com/watch?v= O-hCEXi3ymU 在第 4 分钟我看到他获得了完全相同的结果。我哪里错了？

这是我的代码：

```
nomeimg = "Sassatelli 1984 ruotato.jpg"
#nomeimg = "Sassatelli 1984 n. 165 mod1.jpg"
img = cv2.imread(nomeimg)

gray = cv2.imread(nomeimg,0)
ret,thresh = cv2.threshold(gray,127,255,cv2.THRESH_BINARY_INV) 
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(4,4))
imgbnbin = thresh
imgbnbin = cv2.dilate(imgbnbin, element)

#find contour
contours,hierarchy=cv2.findContours(imgbnbin,cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_SIMPLE)

#Elimination small contours
Areacontours = list()
    area = cv2.contourArea(contours[i])
    if (area > 90 ):
        Areacontours.append(contours[i])
contours = Areacontours

print('found objects')
print(len(contours))

#contorus[3] for sing in first image
#contours[0] for sign in second image
print("humoments")
mom = cv2.moments(contours[0])
Humoments = cv2.HuMoments(mom)
print(Humoments) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T12:29:33.270

我认为您的数字可能还可以，它们之间的差异很小。正如那个人在您链接到的视频中所说的那样（大约 3 分钟）：

> 为了得到一些有意义的答案，我们进行了对数转换

因此，如果我们`-np.sign(a)*np.log10(np.abs(a))`对您在上面发布的数据进行处理，我们会得到：

第一张图片：

```
[[ 0.16584062]
 [ 0.68441437]
 [ 0.96222185]
 [ 2.27570703]
 [-4.23218495]
 [-3.16420051]
 [-3.9462254 ]] 
```

第二张图片：

```
[[ 0.17276449]
 [ 0.70438644]
 [ 1.0382848 ]
 [ 2.01764754]
 [-3.61144437]
 [-2.57058511]
 [-3.83686117]] 
```

它们不相同的事实是可以预料的。您从光栅化图像开始，然后对这些图像进行大量处理以获得您传入的一些轮廓。

来自[opencv 文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#cv2.HuMoments)：

> 在光栅图像的情况下，原始图像和变换图像的计算 Hu 不变量有点不同。

# python - 将字符串转换为数组python

> ID：14492277
> 
> 赞同：1
> 
> 时间：2013-01-24T01:09:59.870
> 
> 标签：python, linux

我怎样才能转动这个字符串

```
"((145541L, u'/.stats/'), (175706L, u'///')" 
```

到python中的json对象，例如

```
{'145541' : '/.stats/',
 '175706' : '///'
 } 
```

我一直在尝试 tuple() 和其他人，但确实如此

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T01:15:42.807

快速解决：

```
>>> import ast
>>> s = "((145541L, u'/.stats/'), (175706L, u'///')"
>>> {str(k): v for (k, v) in ast.literal_eval(s + ')')}
{'175706': u'///', '145541': u'/.stats/'} 
```

但你真的应该试着调查一下[`json.loads`](http://docs.python.org/2/library/json.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:13:18.503

你很可能有一个元组的元组，并且想要创建一个字典。为此，请尝试以下操作：

```
data = ((145541L, u'/.stats/'), (175706L, u'///'))
result = dict(data) 
```

如果您确实是一个字符串，请添加初始行：

```
data = "((145541L, u'/.stats/'), (175706L, u'///'))"
data = eval(data)
result = dict(data) 
```

正如@Volatility 所指出的，`eval`可能很危险，因为它评估**任何**代码，而不仅仅是文字。这样，如果您在字符串上收到命令，有人可以在您的程序上执行命令。

为避免这种情况，您可以`ast.literal_eval`改用：

```
from ast import literal_eval
data = "((145541L, u'/.stats/'), (175706L, u'///'))"
result = dict(literal_eval(data)) 
```

# c# - 从锯齿状数组初始化中省略 c# new

> ID：14492279
> 
> 赞同：4
> 
> 时间：2013-01-24T01:10:08.437
> 
> 标签：c#, new-operator, jagged-arrays

来自：http: [//msdn.microsoft.com/en-us/library/2s05feca.aspx](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)

请注意，您不能在元素初始化中省略 new 运算符，因为元素没有默认初始化：

```
int[][] jaggedArray3 = 
{
    new int[] {1,3,5,7,9},
    new int[] {0,2,4,6},
    new int[] {11,22}
}; 
```

这是什么意思？

为什么可以忽略 new in：

```
int[]    arrSimp = { 1, 2, 3 };
int[,]   arrMult = { { 1, 1 }, { 2, 2 }, { 3, 3 } }; 
```

但不可能：

```
int[][,] arrJagg = {new int[,] { { 1, 1} }, new int[,] { { 2, 2 } }, new int[,] { { 3, 3 } } }; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:29:14.917

首先，多么巧合，你的问题的一个方面是我今天博客的主题：

[http://ericlippert.com/2013/01/24/five-dollar-words-for-programmers-elision/](http://ericlippert.com/2013/01/24/five-dollar-words-for-programmers-elision/)

您在 C# 对表达式的分类方式中发现了一个小“缺陷”。事实证明，数组初始值设定项语法`{1, 2, 3}`不是*表达式*。相反，它是一个只能用作另一个表达式的一部分的句法单元：

```
new[] { 1, 2, 3 }
new int[] { 1, 2, 3 }
new int[3] { 1, 2, 3 }
new int[,] { { 1, 2, 3 } }
... and so on 
```

或作为集合初始化程序的一部分：

```
new List<int> { 1, 2, 3 } 
```

或在变量声明中：

```
int[] x = { 1, 2, 3 }; 
```

在需要表达式的任何其他上下文中使用数组初始值设定项语法是**不合法的。**例如：

```
int[] x;
x = { 1, 2, 3 }; 
```

是不合法的。

这只是 C# 语言的一个奇怪的极端情况。您发现的不一致没有更深层次的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:15:31.273

本质上，答案是“因为他们（意思是语言设计者）选择不这样做。引用 Eric Lippert 的话：

> 与每个未实现的特性都没有实现的原因相同：特性默认情况下是未实现的。为了实现一个特性，必须（1）考虑，（2）设计，（3）指定，（4）实施，（5）测试，（6）记录和（7）交付。

从技术上讲，它有一个很好的理由，那就是与一维和多维数组相比，锯齿状数组的定义。

一维或多维数组可以用简单的英语表示为 T 的 X 维数组，其中锯齿状数组必须表示为 T 的数组的数组。在第二种情况下，内部数组和内部数组之间存在松散耦合外部数组。也就是说，您可以将一个新数组分配给外部数组中的某个位置，而 ax 维度数组是固定的。

既然知道了Jagged数组在实现上与多维数组有很大的不同，那我们也可以推测一下为什么对2的集成支持程度不同了。当然不是不可能加支持，只是需求的问题和时间。

（作为预告，为什么只添加对锯齿状数组的支持？您自己的自定义类型怎么样？）

# jquery - 灯箱未显示所有标题

> ID：14492280
> 
> 赞同：0
> 
> 时间：2013-01-24T01:10:47.247
> 
> 标签：jquery, jquery-ui, jquery-plugins, lightbox, lightbox2

只有一个数据来自数据标题属性。你能告诉我如何在灯箱上显示三个不同的标题吗？当我们单击立方体时，灯箱会打开。在下面提供我的小提琴：

[http://jsfiddle.net/ZrpLT/74/](http://jsfiddle.net/ZrpLT/74/)

```
<div class="row">
  <div class="span10">
    <div class="melonhtml5_gallery">
      <div data-caption="<div>Paul Scholes</div> <div>Wayne Rooney</div> <div>Sir Alex Ferguson</div>" data-image="http://www.defie.co/designerImages/thumbnails/inventory.png"></div>
      <div data-caption="<p>car</p> <p>bus</p> <p>bike</p>" data-image="http://www.defie.co/designerImages/thumbnails/yourFile.png">
    </div>                            
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:47:16.323

`.caption`在代码中设置为固定的 30px 高度。

我已经使用 css 覆盖了它：http: [//jsfiddle.net/ZrpLT/85/](http://jsfiddle.net/ZrpLT/85/)

如果您想在此处更改它，则在 javascript 代码的第 297 行设置它。

# backbone.js - Backbone.JS 用于导航菜单

> ID：14492281
> 
> 赞同：1
> 
> 时间：2013-01-24T01:11:03.107
> 
> 标签：backbone.js

我正在使用 Backbone.JS 构建一个媒体播放器菜单，每个选项都有不同的较小选项，即随机播放可以有特定的间隔/整首歌曲等，重复一首歌曲或重复播放列表，下一个，上一个。

现在，我有一个名为 Menu 的 Backbone 模型，其中列出了所有这些选项。在阅读了更多内容之后，我意识到我应该为这些选项中的每一个设置单独的模型。但是在阅读了下面链接的帖子后，我有点困惑。我拥有的菜单选项不应该是一个集合，对吗？所以我对这些选项以及如何模板化每个选项有点困惑：

1) 将我的所有选项保存在 Menu 模型中，并相应地更新子视图 2) 每个选项都有一个单独的模型，并更新相应的视图 3) 拥有所有这些模型的集合，所以

相关：[下划线 js 模板中的循环](https://stackoverflow.com/questions/9853039/loops-in-underscore-js-template)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:34:12.270

菜单本身很可能应该是一个集合，每个项目都应该是一个模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:37:31.750

我认为您不一定*需要*为每个菜单选项设置多个模型。这完全取决于您希望如何构建代码。你真的可以做以下任何事情：

1.  一个视图，根本没有模型（只是硬编码的菜单选项）
2.  一个视图，一个模型
3.  一个视图，每个菜单选项的单独模型
4.  每个菜单选项一个视图，全部
5.  每个菜单选项一个视图，每个都有自己的模型共享一个模型

以上任何一项*都可能*是您特定情况的最佳答案，但如果不了解更多详细信息（例如，哪些数据构成单个菜单选项，这些数据是否聚集在一起或作为多个 AJAX 调用的结果等），这很难提倡一个胜过另一个。

就我个人而言，我会从最简单的选项（＃1）开始，一旦变得尴尬就切换到＃2。然后如果＃2变得尴尬，我会切换到＃3或＃4，依此类推。基本上，选择最简单的路径，不会让您希望选择更复杂的路径；-)

哦，如果你最终采用了多模型方法，那么将所有这些模型放在一个集合中肯定是有意义的。

# sql - Delphi 在只读模式下编辑 DBGrid 和更新数据库？

> ID：14492283
> 
> 赞同：0
> 
> 时间：2013-01-24T01:11:09.930
> 
> 标签：sql, database, delphi, dbgrid

所以我有一个填充了 SQL 查询的 DBGrid。我希望查询是只读的，这样程序运行时表就不会被锁定。问题是当它设置为只读时，我根本无法编辑表格。

我想要做的是能够在只读模式下编辑 DBGrid 上的字段，然后一次更新它，这样我就不必打开连接。

我不确定如何做到这一点。DBGrid 没有 OnChange 事件，因此我不能在每次更改单元格时都运行更新查询。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:15:04.910

这就是[`TClientDataSet`](http://docwiki.embarcadero.com/Libraries/XE3/en/Datasnap.DBClient.TClientDataSet)写的确切原因。它允许您拍摄数据快照，将其存储在内存中，将其作为实际数据集进行更新，然后轻松地将这些更新应用回原始数据库。

[这里](http://delphi.about.com/od/usedbvcl/a/tclientdataset.htm)有一个教程，还不错。[你可以在Scalabium](http://www.scalabium.com/faq/dct0150.htm)找到另一本，在 Embarcadero 网站上找到[一系列](http://edn.embarcadero.com/article/28876)，Cary Jensen 后来把它变成了一本书（你可以在亚马逊上找到它——手边没有链接）。

# d3.js - 给定 geoJSON 对象，在 d3 中将地图居中

> ID：14492284
> 
> 赞同：145
> 
> 时间：2013-01-24T01:11:10.210
> 
> 标签：d3.js, geojson, topojson

目前在 d3 中，如果您有一个要绘制的 geoJSON 对象，您必须对其进行缩放和转换，以使其达到所需的大小，并对其进行转换以使其居中。这是一项非常繁琐的反复试验任务，我想知道是否有人知道获得这些值的更好方法？

因此，例如，如果我有此代码

```
var path, vis, xy;
xy = d3.geo.mercator().scale(8500).translate([0, -1200]);

path = d3.geo.path().projection(xy);

vis = d3.select("#vis").append("svg:svg").attr("width", 960).attr("height", 600);

d3.json("../../data/ireland2.geojson", function(json) {
  return vis.append("svg:g")
    .attr("class", "tracts")
    .selectAll("path")
    .data(json.features).enter()
    .append("svg:path")
    .attr("d", path)
    .attr("fill", "#85C3C0")
    .attr("stroke", "#222");
}); 
```

我怎么能不一点一点地获得 .scale(8500) 和 .translate([0, -1200]) ？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-02-04T17:11:52.703

我的答案与 Jan van der Laan 的答案很接近，但您可以稍微简化一下，因为您不需要计算地理质心；你只需要边界框。而且，通过使用未缩放、未平移的单位投影，您可以简化数学运算。

代码的重要部分是：

```
// Create a unit projection.
var projection = d3.geo.albers()
    .scale(1)
    .translate([0, 0]);

// Create a path generator.
var path = d3.geo.path()
    .projection(projection);

// Compute the bounds of a feature of interest, then derive scale & translate.
var b = path.bounds(state),
    s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
    t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

// Update the projection to use computed scale & translate.
projection
    .scale(s)
    .translate(t); 
```

在单位投影中合成特征的[边界框](https://github.com/mbostock/d3/wiki/Geo-Paths#wiki-path_bounds)后，您可以通过将边界框的纵横比 ( 和 ) 与画布的纵横比 ( 和 ) 进行比较来计算适当的**比例**。在这种情况下，我还将边界框缩放到画布的 95%，而不是 100%，因此边缘有一点额外空间用于笔触和周围特征或填充。`b[1][0] - b[0][0]``b[1][1] - b[0][1]``width``height`

然后，您可以使用边界框的中心 ( and ) 和画布的中心( and ) 计算**平移**。请注意，由于边界框位于单位投影的坐标中，因此必须乘以比例 ( )。`(b[1][0] + b[0][0]) / 2``(b[1][1] + b[0][1]) / 2``width / 2``height / 2``s`

例如， bl.ocks.org/ [4707858](http://bl.ocks.org/mbostock/4707858)：

[![投影到边界框](../Images/b0d65768899c2179d22e73fa27f3a9bf.png)](http://bl.ocks.org/mbostock/4707858)

有一个相关的问题是如何在不调整投影的情况下缩放到集合中的特定特征，即将*投影*与几何变换相结合以进行放大和缩小。这使用与上述相同的原理，但数学略有不同，因为几何变换（SVG“变换”属性）与地理投影相结合。

例如， bl.ocks.org/ [4699541](http://bl.ocks.org/mbostock/4699541)：

[![缩放到边界框](../Images/3de9fa7fc83fd324a4796cf8b6b8ef0b.png)](http://bl.ocks.org/mbostock/4699541)

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-02-01T21:02:20.663

以下似乎可以大致完成您想要的。缩放似乎没问题。将其应用于我的地图时，会有一个小的偏移量。这个小偏移可能是因为我使用 translate 命令使地图居中，而我可能应该使用 center 命令。

1.  创建一个投影和 d3.geo.path
2.  计算当前投影的边界
3.  使用这些边界来计算比例和平移
4.  重新创建投影

在代码中：

```
 var width  = 300;
  var height = 400;

  var vis = d3.select("#vis").append("svg")
      .attr("width", width).attr("height", height)

  d3.json("nld.json", function(json) {
      // create a first guess for the projection
      var center = d3.geo.centroid(json)
      var scale  = 150;
      var offset = [width/2, height/2];
      var projection = d3.geo.mercator().scale(scale).center(center)
          .translate(offset);

      // create the path
      var path = d3.geo.path().projection(projection);

      // using the path determine the bounds of the current map and use 
      // these to determine better values for the scale and translation
      var bounds  = path.bounds(json);
      var hscale  = scale*width  / (bounds[1][0] - bounds[0][0]);
      var vscale  = scale*height / (bounds[1][1] - bounds[0][1]);
      var scale   = (hscale < vscale) ? hscale : vscale;
      var offset  = [width - (bounds[0][0] + bounds[1][0])/2,
                        height - (bounds[0][1] + bounds[1][1])/2];

      // new projection
      projection = d3.geo.mercator().center(center)
        .scale(scale).translate(offset);
      path = path.projection(projection);

      // add a rectangle to see the bound of the svg
      vis.append("rect").attr('width', width).attr('height', height)
        .style('stroke', 'black').style('fill', 'none');

      vis.selectAll("path").data(json.features).enter().append("path")
        .attr("d", path)
        .style("fill", "red")
        .style("stroke-width", "1")
        .style("stroke", "black")
    }); 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-12-02T20:02:38.617

使用 d3 v4 或 v5 变得更容易！

```
var projection = d3.geoMercator().fitSize([width, height], geojson);
var path = d3.geoPath().projection(projection); 
```

最后

```
g.selectAll('path')
  .data(geojson.features)
  .enter()
  .append('path')
  .attr('d', path)
  .style("fill", "red")
  .style("stroke-width", "1")
  .style("stroke", "black"); 
```

欣赏，干杯

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2013-06-12T13:54:56.363

我是 d3 的新手 - 会尝试解释我是如何理解它的，但我不确定我是否做对了。

秘密在于知道某些方法将在制图空间（纬度、经度）上运行，而另一些方法将在笛卡尔空间（屏幕上的 x、y）上运行。制图空间（我们的星球）（几乎）是球形的，笛卡尔空间（屏幕）是平坦的——为了将一个映射到另一个，您需要一种称为[投影](https://en.wikipedia.org/wiki/Map_projection)的算法。这个空间太短了，无法深入研究令人着迷的投影主题以及它们如何扭曲地理特征以将球形变成平面；[有些是为了保存角度而设计的，有些是为了保存距离](http://en.wikipedia.org/wiki/Conformal_map_projection#Conformal)等等——总有一种妥协（Mike Bostock 有[大量的例子](http://bost.ocks.org/mike/example/)）。

![在此处输入图像描述](../Images/0d012d9309cbe958d97a397c4c1b5e3d.png)

在 d3 中，投影对象具有 center 属性/设置器，以地图单位给出：

> 投影中心（[位置]）
> 
> 如果指定了中心，则将投影的中心设置为指定位置，以度为单位的经度和纬度的二元素数组并返回投影。如果未指定中心，则返回当前中心，默认为⟨0°,0°⟩。

还有翻译，以像素为单位 - 投影中心相对于画布的位置：

> 投影.翻译（[点]）
> 
> 如果指定了点，则将投影的平移偏移量设置为指定的二元素数组 [x, y] 并返回投影。如果未指定点，则返回当前平移偏移量，默认为 [480, 250]。平移偏移确定投影中心的像素坐标。默认平移偏移将 ⟨0°,0°⟩ 放置在 960×500 区域的中心。

当我想在画布中居中一个特征时，我喜欢将投影中心设置为特征边界框的中心 - 这适用于我的国家（巴西）使用[墨卡托](https://en.wikipedia.org/wiki/Mercator_projection)（WGS 84，用于谷歌地图）时，从未使用其他投影和半球进行测试。您可能需要针对其他情况进行调整，但如果您掌握了这些基本原则，您会没事的。

例如，给定一个投影和路径：

```
var projection = d3.geo.mercator()
    .scale(1);

var path = d3.geo.path()
    .projection(projection); 
```

`bounds`from 方法返回**以像素为单位**的`path`边界框。使用它来找到正确的比例，将像素大小与地图单位大小进行比较（0.95 为您提供比最适合宽度或高度的 5% 的边距）。这里的基本几何，计算给定对角对角的矩形宽度/高度：

 **```
var b = path.bounds(feature),
    s = 0.9 / Math.max(
                   (b[1][0] - b[0][0]) / width, 
                   (b[1][1] - b[0][1]) / height
               );
projection.scale(s); 
```

![在此处输入图像描述](../Images/dfc6faebd7da675d977b9372080b72e0.png)

使用该`d3.geo.bounds`方法以地图单位查找边界框：

```
b = d3.geo.bounds(feature); 
```

将投影的中心设置为边界框的中心：

```
projection.center([(b[1][0]+b[0][0])/2, (b[1][1]+b[0][1])/2]); 
```

使用`translate`方法将地图中心移动到画布中心：

```
projection.translate([width/2, height/2]); 
```

现在，您应该将地图中心的要素放大 5% 的边距。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-29T21:31:08.167

您可以使用一个接受纬度/经度对的[center()方法。](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-center)

据我了解， translate() 仅用于从字面上移动地图的像素。我不确定如何确定规模。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-01T12:07:15.293

除了[在给定 geoJSON 对象的情况下在 d3 中居中地图之外](https://stackoverflow.com/questions/14492284/center-a-map-in-d3-given-a-geojson-object/40940028#40940028)，请注意，如果要在对象边界周围指定填充`fitExtent()`，您可能更喜欢。自动将此填充设置为 0。`fitSize()``fitSize()`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-10T08:24:42.723

我在互联网上四处寻找一种让我的地图居中的轻松方式，并受到 Jan van der Laan 和 mbostock 的回答的启发。如果您使用 svg 的容器，这是使用 jQuery 的更简单方法。我为填充/边框等创建了 95% 的边框。

```
var width = $("#container").width() * 0.95,
    height = $("#container").width() * 0.95 / 1.9 //using height() doesn't work since there's nothing inside

var projection = d3.geo.mercator().translate([width / 2, height / 2]).scale(width);
var path = d3.geo.path().projection(projection);

var svg = d3.select("#container").append("svg").attr("width", width).attr("height", height); 
```

如果您正在寻找精确的缩放比例，那么这个答案对您不起作用。但是如果像我一样，您希望显示一个集中在容器中的地图，这应该足够了。我尝试显示墨卡托地图，发现这种方法在集中我的地图时很有用，而且我可以很容易地切断南极部分，因为我不需要它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-31T22:25:45.343

要平移/缩放地图，您应该查看在 Leaflet 上覆盖 SVG。这将比转换 SVG 容易得多。请参阅此示例[http://bost.ocks.org/mike/leaflet/](http://bost.ocks.org/mike/leaflet/)然后[如何更改传单中的地图中心](https://stackoverflow.com/questions/12735303/how-to-change-the-map-center-in-leaflet)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-31T21:18:44.260

我如何将 Topojson 居中，我需要在其中提取功能：

```
 var projection = d3.geo.albersUsa();

      var path = d3.geo.path()
        .projection(projection);

      var tracts = topojson.feature(mapdata, mapdata.objects.tx_counties);

      projection
          .scale(1)
          .translate([0, 0]);

      var b = path.bounds(tracts),
          s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
          t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

      projection
          .scale(s)
          .translate(t);

        svg.append("path")
            .datum(topojson.feature(mapdata, mapdata.objects.tx_counties))
            .attr("d", path) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-13T12:01:49.967

对于想要垂直和水平调整的人，这里是解决方案：

```
 var width  = 300;
  var height = 400;

  var vis = d3.select("#vis").append("svg")
      .attr("width", width).attr("height", height)

  d3.json("nld.json", function(json) {
      // create a first guess for the projection
      var center = d3.geo.centroid(json)
      var scale  = 150;
      var offset = [width/2, height/2];
      var projection = d3.geo.mercator().scale(scale).center(center)
          .translate(offset);

      // create the path
      var path = d3.geo.path().projection(projection);

      // using the path determine the bounds of the current map and use 
      // these to determine better values for the scale and translation
      var bounds  = path.bounds(json);
      var hscale  = scale*width  / (bounds[1][0] - bounds[0][0]);
      var vscale  = scale*height / (bounds[1][1] - bounds[0][1]);
      var scale   = (hscale < vscale) ? hscale : vscale;
      var offset  = [width - (bounds[0][0] + bounds[1][0])/2,
                        height - (bounds[0][1] + bounds[1][1])/2];

      // new projection
      projection = d3.geo.mercator().center(center)
        .scale(scale).translate(offset);
      path = path.projection(projection);

      // adjust projection
      var bounds  = path.bounds(json);
      offset[0] = offset[0] + (width - bounds[1][0] - bounds[0][0]) / 2;
      offset[1] = offset[1] + (height - bounds[1][1] - bounds[0][1]) / 2;

      projection = d3.geo.mercator().center(center)
        .scale(scale).translate(offset);
      path = path.projection(projection);

      // add a rectangle to see the bound of the svg
      vis.append("rect").attr('width', width).attr('height', height)
        .style('stroke', 'black').style('fill', 'none');

      vis.selectAll("path").data(json.features).enter().append("path")
        .attr("d", path)
        .style("fill", "red")
        .style("stroke-width", "1")
        .style("stroke", "black")
    }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-03T15:36:03.877

有了 mbostocks 的回答和 Herb Caudill 的评论，我开始遇到阿拉斯加问题，因为我使用的是墨卡托投影。我应该指出，出于我自己的目的，我正在尝试投射和集中美国各州。我发现我必须将这两个答案与 Jan van der Laan 的答案结合起来，但对于与半球重叠的多边形（最终的东西的绝对值大于 1 的多边形）有以下例外：

1.  在墨卡托中建立一个简单的投影：

    投影 = d3.geo.mercator().scale(1).translate([0,0]);

2.  创建路径：

    路径 = d3.geo.path().projection(projection);

3.设置我的界限：

```
var bounds = path.bounds(topoJson),
  dx = Math.abs(bounds[1][0] - bounds[0][0]),
  dy = Math.abs(bounds[1][1] - bounds[0][1]),
  x = (bounds[1][0] + bounds[0][0]),
  y = (bounds[1][1] + bounds[0][1]); 
```

4.添加阿拉斯加例外以及与半球重叠的州：

```
if(dx > 1){
var center = d3.geo.centroid(topojson.feature(json, json.objects[topoObj]));
scale = height / dy * 0.85;
console.log(scale);
projection = projection
    .scale(scale)
    .center(center)
    .translate([ width/2, height/2]);
}else{
scale = 0.85 / Math.max( dx / width, dy / height );
offset = [ (width - scale * x)/2 , (height - scale * y)/2];

// new projection
projection = projection                     
    .scale(scale)
    .translate(offset);
} 
```

我希望这有帮助。**

# c++ - 如果我在管理 C++ 对象内存的 Objective C 中混合 C++ 代码，ARC 会处理它吗？

> ID：14492285
> 
> 赞同：5
> 
> 时间：2013-01-24T01:11:28.337
> 
> 标签：c++, objective-c

如果我在目标 C 中创建/分配 C++ 对象，使得目标 C 对象使用 C++ 对象的指针并且代码混合在一起，ARC 是否也会管理 C++ 对象并释放/释放它们？指针位于不可访问的 Objetive C 对象中的 C++ 对象会发生什么？并提议从内存中删除的候选人？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:16:27.337

根据[Cocoa Core Competencies: Object life cycle](http://developer.apple.com/library/ios/#documentation/general/conceptual/devpedia-cocoacore/ObjectLifeCycle.html)`dealloc` ，您应该在方法中释放资源。对于“原始”C++ 指针，这意味着编写一个`delete`表达式。

ARC 的部分是插入`retain`和调用，一旦对象不再可访问，就会发生`release`这种情况。`dealloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:18:11.173

对于 C++ 对象，使用 C++ 机制，如果您使用 ARC，它们将不会被自动计数。并且 Objective-C 对象是使用 ARC 管理的（如果你不使用 ARC，则需要手动计数）。

# python - WinCVS 宏分配键盘快捷键

> ID：14492286
> 
> 赞同：1
> 
> 时间：2013-01-24T01:11:30.680
> 
> 标签：python, tcl, cvs, cvsnt, wincvs

我想为我最常用的命令分配一个键盘快捷键——Macro->TCL->Revert Changes。我在这里找到了如何将[快捷方式分配给 python 脚本](http://tech.dir.groups.yahoo.com/group/cvsgui/message/14703)而不是 TCL。

或者，我可以尝试使用分配快捷方式创建一个 python 脚本，然后调用 TCL 脚本，但由于我既不知道 Python 也不知道 TCL，我不知道这是否可能或需要多长时间

非常感谢帮助

# python - 如何在使用后从文件中删除一行

> ID：14492289
> 
> 赞同：3
> 
> 时间：2013-01-24T01:11:52.997
> 
> 标签：python, urllib2, erase

我正在尝试创建一个脚本，该脚本向 txt 文件中的随机 url 发出请求，例如：

```
import urllib2

with open('urls.txt') as urls:
    for url in urls:
        try:
            r = urllib2.urlopen(url)
        except urllib2.URLError as e:
            r = e
        if r.code in (200, 401):
            print '[{}]: '.format(url), "Up!" 
```

但我希望当某些 url 指示时`404 not found`，包含该 URL 的行会从文件中删除。每行有一个唯一的 URL，所以基本上目标是删除返回的每个 URL（及其对应的行）`404 not found`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:15:29.387

您可以简单地保存所有有效的 URL，然后将它们重写到文件中：

```
good_urls = []
with open('urls.txt') as urls:
    for url in urls:
        try:
            r = urllib2.urlopen(url)
        except urllib2.URLError as e:
            r = e
        if r.code in (200, 401):
            print '[{}]: '.format(url), "Up!"
            good_urls.append(url)
with open('urls.txt', 'w') as urls:
    urls.write("".join(good_urls)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:15:17.500

最简单的方法是读取所有行，遍历保存的行并尝试打开它们，然后在完成后，如果任何 URL 失败，则重写文件。

改写文件的方法是写一个新文件，然后当新文件写入成功并关闭后，再用`os.rename()`把新文件名改成旧文件名，覆盖旧文件。这是安全的方法；在您知道正确写入新文件之前，您永远不会覆盖好文件。

我认为最简单的方法就是创建一个列表，您可以在其中收集好的 URL，并计算失败的 URL。如果计数不为零，则需要重写文本文件。或者，您可以在另一个列表中收集错误的 URL。我在这个示例代码中做到了。（我没有测试过这段代码，但我认为它应该可以工作。）

```
import os
import urllib2

input_file = "urls.txt"
debug = True

good_urls = []
bad_urls = []

bad, good = range(2)

def track(url, good_flag, code):
    if good_flag == good:
        good_str = "good"
    elif good_flag == bad:
        good_str = "bad"
    else:
        good_str = "ERROR! (" + repr(good) + ")"
    if debug:
        print("DEBUG: %s: '%s' code %s" % (good_str, url, repr(code)))
    if good_flag == good:
        good_urls.append(url)
    else:
        bad_urls.append(url)

with open(input_file) as f:
    for line in f:
        url = line.strip()
        try:
            r = urllib2.urlopen(url)
            if r.code in (200, 401):
                print '[{0}]: '.format(url), "Up!"
            if r.code == 404:
                # URL is bad if it is missing (code 404)
                track(url, bad, r.code)
            else:
                # any code other than 404, assume URL is good
                track(url, good, r.code)
        except urllib2.URLError as e:
            track(url, bad, "exception!")

# if any URLs were bad, rewrite the input file to remove them.
if bad_urls:
    # simple way to get a filename for temp file: append ".tmp" to filename
    temp_file = input_file + ".tmp"
    with open(temp_file, "w") as f:
        for url in good_urls:
            f.write(url + '\n')
    # if we reach this point, temp file is good.  Remove old input file
    os.remove(input_file)  # only needed for Windows
    os.rename(temp_file, input_file)  # replace original input file with temp file 
```

编辑：在评论中，@abarnert 建议在 Windows 上使用可能存在问题`os.rename()`（至少我认为这是他/她的意思）。如果`os.rename()`不起作用，您应该可以`shutil.move()`改用。

编辑：重写代码以处理错误。

编辑：重写以在跟踪 URL 时添加详细消息。这应该有助于调试。另外，我实际上测试了这个版本，它对我有用。

# c++ - 带有栅栏和获取/释放的 C++ memory_order

> ID：14492292
> 
> 赞同：9
> 
> 时间：2013-01-24T01:11:59.290
> 
> 标签：c++, multithreading, c++11, synchronization

我有以下 C++ 2011 代码：

```
std::atomic<bool> x, y;
std::atomic<int> z;

void f() {
   x.store(true, std::memory_order_relaxed);
   std::atomic_thread_fence(std::memory_order_release);
   y.store(true, std::memory_order_relaxed);
}

void g() {
   while (!y.load(std::memory_order_relaxed)) {}
   std::atomic_thread_fence(std::memory_order_acquire);
   if (x.load(std::memory_order_relaxed)) ++z;
}

int main() {
   x = false;
   y = false;
   z = 0;
   std::thread t1(f);
   std::thread t2(g);
   t1.join();
   t2.join();
   assert(z.load() !=0);
   return 0;
} 
```

在我的计算机体系结构课上，我们被告知这段代码中的断言总是成真。但是现在仔细审查后，我真的不明白为什么会这样。

据我所知：

*   带有“ **memory_order_release** ”的栅栏将不允许在它之后执行先前的存储
*   带有“ **memory_order_acquire** ”的栅栏将不允许在它之后执行的任何加载在它之前执行。

如果我的理解是正确的，为什么下面的动作序列不能发生？

1.  在 t1 内，`y.store(true, std::memory_order_relaxed);`被称为
2.  t2 完全运行，并且在加载“x”时会看到“假”，因此不会增加单位中的 z
3.  t1 完成执行
4.  在主线程中，断言失败，因为 z.load() 返回 0

我认为这符合 'acquire'-'release' 规则，但是，例如在这个问题的最佳答案中：[Understanding c++11 memory fences](https://stackoverflow.com/questions/13632344/understanding-c11-memory-fences)这与我的情况非常相似，它暗示我的第 1 步在“memory_order_release”之前不能发生一系列动作，但没有详细说明其背后的原因。

我对此感到非常困惑，如果有人能对此有所了解，我将非常高兴:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:23:22.873

每种情况下发生的具体情况取决于您实际使用的处理器。例如，x86 可能不会对此断言，因为它是一个缓存一致的架构（您可以有竞争条件，但是一旦一个值从处理器写入缓存/内存，所有其他处理器都会读取该值 -当然，不会阻止另一个处理器立即写入不同的值，等等）。

因此，假设这是在 ARM 或类似的处理器上运行的，但它本身不能保证缓存一致：

因为写入`x`是在 之前完成的`memory_order_release`，所以 t2 循环不会退出`while(y...)`until`x`也是如此。这意味着当`x`稍后被读取时，它保证为 1，因此`z`被更新。我唯一的小问题是你是否也不需要`release`for `z`......如果在与and`main`不同的处理器上运行，那么在.`t1``t2``z``main`

当然，如果你有一个多任务操作系统（或者只是做足够多的事情的中断等），这并不能保证发生——因为如果运行 t1 的处理器刷新了它的缓存，那么 t2 很可能会读取 x 的新值。

就像我说的，这不会对 x86 处理器（AMD 或 Intel 处理器）产生这种影响。

所以，一般来说解释屏障指令（也适用于 Intel 和 AMD process0rs）：

首先，我们需要明白，虽然指令可以乱序开始和结束，但处理器确实对顺序有一个普遍的“理解”。假设我们有这个“伪机器代码”：

```
 ...
 mov $5, x
 cmp a, b
 jnz L1
 mov $4, x 
```

L1：...

处理器可以`mov $4, x`在完成“jnz L1”之前推测性地执行 - 因此，为了解决这个事实，处理器必须回滚在被采取`mov $4, x`的情况下。`jnz L1`

同样，如果我们有：

```
 mov $1, x
 wmb         // "write memory barrier"
 mov $1, y 
```

处理器有规则说“在完成之前的所有存储之前，不要执行在 wmb 之后发出的任何存储指令”。这是一条“特殊”指令——它的存在是为了保证内存排序的确切目的。如果它不这样做，那么你的处理器就坏了，而设计部门的某个人“他的屁股就在线”。

同样，“读取内存屏障”是一条指令，处理器的设计者保证处理器不会完成另一次读取，直到我们完成屏障指令之前的未决读取。

只要我们不在“实验”处理器或一些不能正常工作的肮脏芯片上工作，它就会以这种方式工作。它是该指令定义的一部分。如果没有这样的保证，就不可能（或至少极其复杂和“昂贵”）实现（安全）自旋锁、信号量、互斥锁等。

通常还存在“隐式内存屏障”——即即使没有导致内存屏障的指令。软件中断（“INT X”指令或类似指令）倾向于这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T12:35:04.110

我不喜欢用“这个处理器做这个，那个处理器做那个”来争论 C++ 并发问题。C++11 有一个内存模型，我们应该使用这个内存模型来确定什么是有效的，什么是无效的。CPU 架构和内存模型通常更难理解。另外还有不止一个。

考虑到这一点，考虑一下：线程 t2 在 while 循环中被阻塞，直到 t1 执行 y.store 并且更改已传播到 t2。（顺便说一句，这在理论上可能永远不会发生。但这不现实。）因此，我们在 t1 中的 y.store 和 t2 中的 y.load 之间有一个发生前的关系，允许它离开循环。

此外，我们在 x.store 和释放屏障以及屏障和 y.store 之间有简单的线程内发生前关系。

在 t2 中，我们在真正返回的负载和获取屏障和 x.load 之间有一个发生前。

因为happens-before是可传递的，所以release屏障发生在acquire屏障之前，而x.store发生在x.load之前。由于障碍，x.store 与 x.load 同步，这意味着负载必须查看存储的值。

最后，z.add_and_fetch(post-increment)发生在线程终止之前，也就是在主线程从t2.join唤醒之前发生，也就是在主线程中的z.load之前发生，所以对z的修改必须在主线程中可见。

# c# - 如何从私人课程中调用通用列表？

> ID：14492297
> 
> 赞同：-2
> 
> 时间：2013-01-24T01:12:35.447
> 
> 标签：c#, winforms, visual-studio-2012

我把一个通用列表放在一个私有帮助方法中......

```
 private void addButton()
    {
        List<Button> buttonList = new List<Button>();

        buttonList.Add(button1);
        buttonList.Add(button2);
        buttonList.Add(button3);
        buttonList.Add(button4);
        buttonList.Add(button5);
        buttonList.Add(button6);
        buttonList.Add(button7);
        buttonList.Add(button8);
        buttonList.Add(button9); 
    } 
```

我知道调用这个方法你必须做这样的事情......

```
 private void button1_Click(object sender, EventArgs e)
    {
            addButton();

            foreach (button in addButton())
            {
                button.Enabled = false;
            }
    } 
```

但是...当我尝试在 addButton() 中调用按钮时，“按钮”下方出现红线，表示找不到。请有人帮忙:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:13:59.520

您的方法应返回列表：

```
private List<Button> addButton()
{
    List<Button> buttonList = new List<Button>();

    buttonList.Add(button1);
    //...
    return buttonList;
} 
```

你也不需要第一个`addButton();`：

```
private void button1_Click(object sender, EventArgs e)
{
        foreach (Button button in addButton())
        {
            button.Enabled = false;
        }
} 
```

我会用[yield](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)关键字重写这个方法：

```
private IEnumerable<Button> addButton()
{
    yield return button1;
    yield return button2;
    //...
    yield return button9;
} 
```

因为您不需要创建按钮列表，每次需要时都可以浏览它们。仅列举它们就足够了。

* * *

另请查看[Methods (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx)，关于方法返回值的部分：

> 方法可以向调用者返回一个值。如果返回类型（方法名称之前列出的类型）不是 void，则该方法可以使用 return 关键字返回值。带有关键字 return 后跟与返回类型匹配的值的语句将将该值返回给方法调用者。return 关键字也会停止方法的执行。如果返回类型为 void，则没有值的 return 语句仍可用于停止方法的执行。如果没有 return 关键字，方法将在到达代码块末尾时停止执行。具有非 void 返回类型的方法需要使用 return 关键字来返回值。

* * *

PS：查看我在[如何缩短此通用列表中的答案？](https://stackoverflow.com/questions/14491982/how-do-i-shorten-this-generic-list/14492046#14492046). 也许这仍然是一个更好的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:15:17.883

将您的代码更改为：

```
private List<Button> addButton()
{
    List<Button> buttonList = new List<Button>();

    buttonList.Add(button1);
    buttonList.Add(button2);
    buttonList.Add(button3);
    buttonList.Add(button4);
    buttonList.Add(button5);
    buttonList.Add(button6);
    buttonList.Add(button7);
    buttonList.Add(button8);
    buttonList.Add(button9); 

    return buttonList;
}

private void button1_Click(object sender, EventArgs e)
{
     foreach (var button in addButton())
     {
          button.Enabled = false;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T01:15:33.887

像这样使用它 -

```
 List<Button> buttonList;
    private List<Button> addButton()
    {
        buttonList = new List<Button>();

        buttonList.Add(button1);
        buttonList.Add(button2);
        buttonList.Add(button3);
        buttonList.Add(button4);
        buttonList.Add(button5);
        buttonList.Add(button6);
        buttonList.Add(button7);
        buttonList.Add(button8);
        buttonList.Add(button9);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        addButton();

        foreach (button in buttonList)
        {
            button.Enabled = false;
        }
    } 
```

# php - 检查字符串是否包含数据库中的短语

> ID：14492299
> 
> 赞同：1
> 
> 时间：2013-01-24T01:12:50.817
> 
> 标签：php, mysql, sql, select

我正在使用以下查询（此处为简化）来检查字符串是否包含“守望词”，其中守望词包含在 MySQL 表中：

```
$sql = "SELECT ww_id FROM watch_words WHERE ww_word IN (" . $string . ")"; 
```

这非常适用于单个单词，但现在我需要让它适用于短语（即字段 ww_word 可能包含多个单词）。我能想到的只是将整个表格读入一个数组，然后执行多个循环来与字符串中的单词组合进行比较，但我确信（希望）有更好的方法。

编辑：感谢您的建议，但正如 Mike Brant 所指出的，针在 MySQL 中，而在 PHP 中是大海捞针 - 不是“通常”的方式（例如搜索表单）。我需要检查一个字符串（实际上是一条消息）是否包含一个或多个“观察短语”——比如一个糟糕的语言过滤器（但不是那个）。

因此示例表：

```
CREATE TABLE `watch_words` (
  `ww_id` int(11) NOT NULL AUTO_INCREMENT,
  `ww_word` varchar(250) NOT NULL,
  PRIMARY KEY (`ww_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

INSERT INTO `watch_words` VALUES (1, 'foo bar');
INSERT INTO `watch_words` VALUES (2, 'nice sunny day');
INSERT INTO `watch_words` VALUES (3, 'whatever');
INSERT INTO `watch_words` VALUES (4, 'my full name here');
INSERT INTO `watch_words` VALUES (5, 'keyword'); 
```

所以字符串“我们有多么美好的晴天”应该返回匹配，而“多么可爱的晴天......”不会。TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:14:15.170

用于`LIKE`模式匹配

```
$sql = "SELECT ww_id FROM watch_words WHERE ww_word LIKE '%" . $string . "%'"; 
```

或者可以互换两者，

```
$sql = "SELECT ww_id FROM watch_words WHERE " . $string . " LIKE CONCAT('%', ww_word,'%')"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:17:01.883

您可能需要在这里采取不同的方法。MySQL 中有针，PHP 中有大海捞针。使用诸如`LIKE`（用于字符串匹配 not `IN`）之类的东西，MySQL 可以在 MySQL 表中的 haystack 和应用程序中的 needle （在`LIKE`）中正常工作。

没有方便的反向匹配来传递 MySQL 大海捞针并让它从表中的字段中对其应用针。

您可能需要从数据库中选择您的针头并将其与应用程序中的大海捞针进行比较。

# java - 如何判断 LDAP 服务器是否允许匿名绑定？

> ID：14492300
> 
> 赞同：1
> 
> 时间：2013-01-24T01:13:00.940
> 
> 标签：java, ldap, anonymous

当我尝试连接到不允许匿名绑定的 LDAP 服务器时使用 java，我没有收到任何错误。但是当我使用客户端匿名连接到该服务器时，我无法做到。有没有办法在 java 中识别 LDAP 服务器是否支持匿名绑定？

```
// Set up environment for creating initial context
Hashtable<String, Object> env = new Hashtable<String, Object>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://"+host+":"+port+"/");     
env.put(Context.SECURITY_PRINCIPAL, dn);
env.put(Context.REFERRAL, "follow");
env.put(VsomConstants.LDAP_CONNECT_TIMEOUT, SystemPreferencesHelper.getLdapConnectionTimeOut().toString());

env.put(Context.SECURITY_AUTHENTICATION, "none");

// Create initial context
ctx = new InitialDirContext(env); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:43:40.217

当我针对不允许匿名绑定的代码运行您的代码时，我得到：

```
javax.naming.AuthenticationNotSupportedException: [LDAP: error code 48 - Anonymous Simple Bind Disabled 
```

我使用了一种测试方法作为您提供的代码的包装器：

```
try
{
   doSimpleBind(args[0], args[1], args[2]);
}
catch (NamingException e)
{
   e.printStackTrace();
} 
```

不知道你的行是什么：

```
env.put(VsomConstants.LDAP_CONNECT_TIMEOUT,SystemPreferencesHelper.getLdapConnectionTimeOut().toString()); 
```

是，所以我把它注释掉了。

-吉姆

# gitlab - Gitlab登录错误：无效的电子邮件或密码

> ID：14492308
> 
> 赞同：12
> 
> 时间：2013-01-24T01:13:47.100
> 
> 标签：gitlab

我在我的家庭服务器上安装了 gitlab，服务器正在运行。我可以访问登录页面，但我无法登录。

admin@local.host。
5iveL!fe

错误：无效的电子邮件或密码。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T08:13:30.647

```
/home/gitlab/github/app/observers/user_observer.rb

Notify.delay.new_user_email(user.id, user.password) 
```

改变：

```
Notify.new_user_email(user.id, user.password) 
```

跑：

```
root@menht.com ~/gitlab/github $ bundle exec rake db:seed_fu RAILS_ENV=production 
```

# mysql - MySql在过去一天内选择2行之间的最大差异

> ID：14492314
> 
> 赞同：1
> 
> 时间：2013-01-24T01:14:22.483
> 
> 标签：mysql

我有一张看起来像这样的桌子

```
id  |  name  |  c1  |  c2  |  c3  |  c4  |  time
-------------------------------------------------
 1  |  miley |  23  |  11  |  21  |  18  |  2013-01-13 20:26:25
 2  |  john  |  31  |  29  |  23  |  27  |  2013-01-14 20:26:25
 3  |  steve |  44  |  31  |  33  |  35  |  2013-01-14 20:26:25
 4  |  miley |  34  |  44  |  47  |  48  |  2013-01-15 08:26:25
 5  |  john  |  27  |  53  |  49  |  52  |  2013-01-15 08:26:25
 6  |  steve |  27  |  62  |  50  |  64  |  2013-01-16 08:26:25
 7  |  miley |  44  |  54  |  57  |  87  |  2013-01-16 20:26:25
 8  |  john  |  37  |  93  |  59  |  62  |  2013-01-17 20:26:25
 9  |  steve |  85  |  71  |  87  |  74  |  2013-01-17 20:26:25
...etc 
```

*注意：这是我制作的随机表格，只是为了让您了解我的表格的外观

我需要获取在特定日期范围内特定列中变化最大的人的名称。我尝试了一堆不同的查询，但无法正常工作。我认为我最接近的解决方案是......

```
SELECT table1.name, MAX(table1.c1-h.c1) as maxDiff 
FROM table_a as table1
LEFT JOIN table_a as table2 
ON table2.name=table1.name AND table1.c1>table2.c1
WHERE table2.c1 IS NOT NULL 
```

我究竟做错了什么？需要明确的是，我希望能够选择一个日期范围，然后在确定的列中确定谁在该日期范围内的差异最大。另请注意，数据只会随着时间的推移而增加，因此任何一天的第一次捕获将始终 <= 该人当天的最后一次捕获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:25:20.137

听起来您将需要一个嵌套查询。首先，查询每个人在日期范围内自己的测量值，然后按最大排序并取前 1 名……这样的事情可能对你有用……

```
select
      PreGroupByName.`Name`,
      PreGroupByName.MaxC1 - PreGroupByName.MinC1 as MaxSpread
   from
      ( select 
              t1.`Name`,
              min( t1.c1 ) as MinC1,
              max( t1.c1 ) as MaxC1
           from
              table_a t1
           where
              t1.`time` between '2013-01-01' and '2013-01-17'  -- or whatever date/time range
           group by
              t1.`Name` ) as PreGroupByName
   order by
      MaxSpread DESC
   limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:33:55.080

```
SELECT
    `id`,`name`
    ,MAX(`c1`)-MIN(`c1`) AS `diff_c1`
    -- ,MAX(`c2`)-MIN(`c2`) AS `diff_c2`
    -- ,MAX(`c3`)-MIN(`c3`) AS `diff_c3`
    -- ,MAX(`c4`)-MIN(`c4`) AS `diff_c4`
FROM `the_table`
WHERE `time` BETWEEN '2013-01-13 20:26:25' AND '2013-01-17 20:26:25'
GROUP BY `name`
ORDER BY `diff_c1` DESC -- whichever you want to evaluate
LIMIT 1 
```

# c# - 如何在 WPF 程序中从 C# 为 Image ScaleTransform 设置动画？

> ID：14492315
> 
> 赞同：0
> 
> 时间：2013-01-24T01:14:30.050
> 
> 标签：c#, wpf, xaml

我想为这个 ScaleTransform 制作动画

```
 <Image x:Name="photoB" Height="290"  Width="420" Stretch="Uniform" RenderTransformOrigin="0.5,0.5" >
             <Image.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleY="40" ScaleX="40"/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Image.RenderTransform>
       </Image> 
```

问题是我找不到让 WPF 满意的 TargetProperty！

我试过像

```
Storyboard.SetTargetProperty(kenBurnsAnimationA, new PropertyPath("(Image.RenderTransform)[0].ScaleTransform.ScaleX")); 
```

和

```
Storyboard.SetTargetProperty(kenBurnsAnimationA, new PropertyPath("ScaleTransform.ScaleX")); 
```

和

```
Storyboard.SetTargetProperty(kenBurnsAnimationA, new PropertyPath("(Image.RenderTransform.TransformGroup.ScaleTransform.ScaleX")); 
```

但似乎没有任何效果。

XAML 的 C#“代码隐藏”的秘密是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:33:06.850

试试`(Image.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:59:05.157

问题是我需要向我的 XAML 添加一个空的 Image.RenderTransform TransformGroup

```
 <Image x:Name="photoA" Height="290"  Width="420" Stretch="Uniform" RenderTransformOrigin="0.5,0.5" >
            <Image.RenderTransform>
                <TransformGroup>
                    <ScaleTransform />
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Image.RenderTransform>
        </Image> 
```

如果它们不存在，您将无法为它们设置动画！我想我也可以从 C# 添加传输组。

感谢@Anton Tykhyy 为我指出正确的路径。

# mongodb - 在 grails + mongodb 中未触发 beforeInsert

> ID：14492317
> 
> 赞同：1
> 
> 时间：2013-01-24T01:14:42.377
> 
> 标签：mongodb, grails, grails-orm

看起来 beforeInsert 从未被触发，并且密码以纯文本形式存储在数据库中，我有一个像这样的用户域类：

```
class User {

    String email
    String name
    String surname
    String phone
    String password

    static constraints = {
        email(blank:false, email:true, unique:true)
        name(blank:false)
        surname(blank:false)
        phone(blank:false)
        password(blank:false, password:true)
    }

    def beforeInsert = { encodePassword() }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

知道我在做什么错吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:48:58.083

您似乎错过了 User 类定义中 springSecurityService 的声明（正如@gurbieta 所观察到的）：

```
transient springSecurityService 
```

顺便说一句，`beforeUpdate`方法也需要一些修改。mongodb gorm 插件不支持`dirty`检查方法。见[文档](http://springsource.github.com/grails-data-mapping/mongo/manual/guide/1.%20Introduction.html)。`1.1 Compatibility with GORM for Hibernate`_

所以你必须修改

```
if (isDirty('password')) { 
```

使用其他方法来检查密码是否已更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:24:15.730

这很奇怪，我不知道为什么，但这有效，我将 beforeInsert var 更改为一个方法，并添加了瞬态 springSecurityService

```
class User {

    transient springSecurityService

    String email
    String name
    String surname
    String phone
    String password

    static constraints = {
        email(blank:false, email:true, unique:true)
        name(blank:false)
        surname(blank:false)
        phone(blank:false)
        password(blank:false, password:true)
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

# html - 边框顶部工作但不是边框底部

> ID：14492318
> 
> 赞同：4
> 
> 时间：2013-01-24T01:14:46.250
> 
> 标签：html, css, css-tables

这就是问题所在。我有我的代码，所以我应该在每个`<tr>`项目的顶部和底部看到一个边框。但是，除了顶部元素，我只看到底部的内容。

```
.tstyle1 {
    margin: 10px 0 0 30px;
    width: 950px;
}

.tstyle1 tr {
    height: 120px;
    border-bottom: 1px solid black;
    border-collapse: separate;
    border-top: 1px solid black;
    border-bottom: 1px solid orange;
}

.tstyle1 td {
    border: none;
} 
```

这是重新创建的问题。 [http://jsfiddle.net/fL3rx/](http://jsfiddle.net/fL3rx/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:27:51.230

尝试

添加`display: block;`到您的`.tstyle1 tr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:31:34.867

问题是您的边界底部定义只是覆盖了您的边界顶部定义。所以下面的颜色不显示。尝试设置`border-bottom:none`，你会看到顶部边框显示

@Pricey 的建议虽然起到了一定的作用。

# php - PHP：系统找不到指定的路径

> ID：14492319
> 
> 赞同：3
> 
> 时间：2013-01-24T01:14:46.367
> 
> 标签：php

我刚刚将我的主机移至 GoDaddy，但我偶然发现了一个奇怪的问题：每个 PHP 页面都返回一个错误页面，并显示以下消息：“系统找不到指定的路径。” 没有错误代码或描述。我试过查看错误页面的源代码，但也没有。

即使是最简单的页面，也一样`<?php echo("Hello world"); ?>`返回相同的错误消息。

但是，HTML 页面会定期加载。这里会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:57:59.477

可能是因为主机在 iis ver 6 上，只需请求更改为 iis 7。下次你打电话提及这一点。我赌 10 美元是你的问题

# php - 查询中的while循环中的空表行

> ID：14492321
> 
> 赞同：0
> 
> 时间：2013-01-24T01:14:59.627
> 
> 标签：php

我有一个 while 循环，它在表中显示记录。工作正常，但表格顶部有一个额外的表格行，它是空的。

```
<table width="100%" border="0" cellpadding="5">
  <?php do { 
  $count++;
?>
    <tr bgcolor=<?php echo processRow($count); ?>>
      <td><?php echo $row['title']; ?></td>
      <td width="8%"><a href="edit_topic.php?topic_pk=<?php echo $row['topic_pk']; ?>">edit</a></td>
      <td width="12%"><a href="edit_topic.php?topic_pk=<?php echo $row['topic_pk']; ?>">delete</a></td>
    </tr>
  <?php 
   if($count == 2){
$count = 0;
}
} while ($row = mysql_fetch_assoc($result)); 
?>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:17:49.427

循环第一次开始时`$row = mysql_fetch_assoc($result)`尚未执行，因此未获取任何结果。`$row = mysql_fetch_assoc($result);`在文件开头（循环前）添加或将do-while循环转换为while即可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:18:45.983

在`do {} while()`评估传递给`while`. 如果你这样写，应该去掉空行：

```
<?php while ($row = mysql_fetch_assoc($result)): ?>
  <? $count++; ?>
  <tr bgcolor=<?php echo processRow($count); ?>>
    <td><?php echo $row['title']; ?></td>
    <td width="8%"><a href="edit_topic.php?topic_pk=<?php echo $row['topic_pk']; ?>">edit</a></td>
    <td width="12%"><a href="edit_topic.php?topic_pk=<?php echo $row['topic_pk']; ?>">delete</a></td>
  </tr>
<?php 
 if($count == 2){ $count = 0; }
 endwhile; 
?> 
```

# jquery - 来自 iFrame 内部的 jQuery POST 请求超时

> ID：14492332
> 
> 赞同：0
> 
> 时间：2013-01-24T01:15:51.717
> 
> 标签：jquery, html, ajax, iframe, bookmarklet

我有一个 iframe，它通过小书签注入到任意网页中。它指向`http://localhost:5000/test`，这是一个运行以下 Javascript 的简单 HTML 页面：

```
$.ajax({
  type: "POST",
  url: "http://localhost:5000/parse",
  data: {data:"hello world"}
}).done(function( msg ) {
  console.log("Success!!", arguments);
}).fail(function(jqXHR, textStatus, errorThrown) {
  console.log("Error", arguments);
}); 
```

我可以在网络检查器中看到调用已发出，但它一直处于*（待处理）*状态，直到请求在 30 秒后超时。服务器日志显示服务器根本没有受到攻击。奇怪的是，如果我删除了ajax 请求中的*data*参数，服务器就会被命中并且事情会按预期工作。

```
$.ajax({
  type: "POST",
  url: "http://localhost:5000/parse"
}).done(function( msg ) {
  console.log("Success!!", arguments); // this works.
}); 
```

我不希望跨域策略问题成为问题，因为 iframe 和 ajax 请求目标位于同一个域中。我在这里想念什么？浏览器级别是否存在阻止此请求通过的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:22:37.243

尝试将 dataType 和 contentType 添加到 ajax 设置

```
$.ajax({
   type: "POST",
   url: "http://localhost:5000/parse",
   contentType: 'application/json; charset=utf-8',
   dataType: 'json',
   data: {data:"hello world"}
 }).done(function( msg ) {
     console.log("Success!!", arguments);
 }).fail(function(jqXHR, textStatus, errorThrown) {
     console.log("Error", arguments);
 }); 
```

# uitableview - 删除和插入具有不同高度的单元格时，UITableView 动画故障

> ID：14492335
> 
> 赞同：6
> 
> 时间：2013-01-24T01:16:09.797
> 
> 标签：uitableview

我在同时删除和插入单元格时遇到 UITableView 提供的动画问题。我有一个单元格列表，可以称它们为问题。当一个问题被点击时，它应该在其下方添加一个单元格以显示该问题的答案。如果已显示另一个答案，则应从表中删除该答案。当插入的单元非常高时，就会出现问题。如果它太高以至于最终边界侵占了要删除的单元格占用的空间，那么在动画期间，我们会看到我们正在删除的答案单元格以查看正在添加的单元格

[（见问题视频链接）](https://vimeo.com/58063609)

这就是我的代码在表格视图中的单元格周围移动的样子

```
[tableView beginUpdates];

if (deleteIndex) {
    [tableView deleteRowsAtIndexPaths:@[deleteIndex] withRowAnimation:UITableViewRowAnimationTop];
}
if (addIndex) {
[tableView insertRowsAtIndexPaths:@[addIndex] withRowAnimation:UITableViewRowAnimationTop];
}

[tableView endUpdates]; 
```

我试过了

```
[tableView beginUpdates];

if (deleteIndex) {
    [tableView deleteRowsAtIndexPaths:@[deleteIndex] withRowAnimation:UITableViewRowAnimationTop];
}
[tableView endUpdates];

//do stuff to update data source

[tableView beginUpdates];

if (addIndex) {
[tableView insertRowsAtIndexPaths:@[addIndex] withRowAnimation:UITableViewRowAnimationTop];
}

[tableView endUpdates]; 
```

但是因为在开始第二个块之前没有确认表视图确实完成了第一个集合更新的回调，所以几乎会出现相同的问题。我知道我可以使用延迟执行选择器，但这似乎是一个创可贴。

其次，我试图将动画包含在这样的块中

```
[UIView animateWithDuration:0.0 animations:^{
    [tableView beginUpdates];

    if (deleteIndex) {
        [tableView deleteRowsAtIndexPaths:@[deleteIndex] withRowAnimation:UITableViewRowAnimationTop];
    }
    [tableView endUpdates];

    //do stuff to update data source

} completion:^(BOOL finished) {

    [tableView beginUpdates];

    if (addIndex) {
        [tableView insertRowsAtIndexPaths:@[addIndex] withRowAnimation:UITableViewRowAnimationTop];
    }

    [tableView endUpdates];
}]; 
```

同样，因为完成块是在我们调用 endUpdates 之后而不是在更新实际完成之后触发的，所以这并不能解决使用问题。

我还进入了故事板，以确保为单元格选择了剪辑子视图到边界。同样，这并不能解决问题，因为我们没有看到单元格的子视图扩展超出其预期高度。

通过放慢动画来仔细观察动画，看起来苹果将要添加的单元格插入到表格中不会更改的单元格下方，然后将保留的单元格移动到新位置。结果，被删除的单元格变成了一个透明的窗口，我们可以在其中看到他们实际上在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T00:58:58.170

正确的方法是首先删除旧答案，然后在动画结束后添加新答案。单元格动画完成后触发的 UITableViewDelegate 方法。

```
tableView:didEndDisplayingCell:forRowAtIndexPath: 
```

在此委托方法中插入新的答案行将产生正确的动画。

有一些细节需要牢记——您需要一些逻辑来确保返回正确的单元格高度并返回该部分中正确的预期行数。这些数据源方法在我们删除旧答案后调用，当我们调用时添加新答案时再次调用

```
endUpdates 
```

在表视图上

使用 UITableViewRowAnimationTop 以外的任何东西都会导致一些奇怪的动画行为。这是因为单元格的内容视图不是动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:18:44.703

我通过隐藏控件解决了我的项目中的相同问题，例如：在 ~cell.m 中有

```
(void)setSelected:(BOOL)selected animated:(BOOL)animated;
{

if(selected == NO)
{
    self.selectedView.hidden = YES;
    self.descriptionLabel.hidden = YES;

}
else
{
    self.selectedView.hidden = NO;
    self.descriptionLabel.hidden = NO;

}
} 
```

可能还有帮助吗

# android - Textview：使用对话框标题样式：@android:style/TextAppearance.DialogWindowTitle

> ID：14492341
> 
> 赞同：20
> 
> 时间：2013-01-24T01:16:43.577
> 
> 标签：android, android-dialogfragment

我目前正在尝试构建自己的 DialogFragment 主题。

我的要求之一是在标题右侧使用图标。

**第一个想法**

只需使用：

```
this.getDialog().getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.dialog_title); 
```

但是很遗憾，这行代码没有结果。

**第二个想法**

用这个 textview 提供我自己的布局 -this.setContentView()-：

```
<TextView
    android:id="@+id/tvTitle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="From XML"
    android:textAppearance="@android:style/TextAppearance.DialogWindowTitle" /> 
```

这行得通，因为我可以阅读文本，但它仍然以默认的黑色字体书写。

我期待 TextAppearance.DialogWindowTitle 给我的文本一个标题外观（Holo 中的蓝色，大字体）

有什么想法或建议吗？

**编辑**

这几乎成功了：

```
<style name="Dialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
</style>

<style name="MyOwnDialogTitle">
    <item name="android:drawableRight">@drawable/MyRightImage</item>
</style> 
```

但 android:drawableRight 刚刚打破了标题布局：

![在此处输入图像描述](../Images/4747eae568cca8c171fa97812d72c5a1.png)

**第二次编辑**

这有点好：

```
<style name="Dialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
</style>

<style name="MyOwnDialogTitle">
    <item name="android:textAppearance">@android:style/TextAppearance.DialogWindowTitle</item>
    <item name="android:drawableRight">@drawable/icon</item>
</style> 
```

![在此处输入图像描述](../Images/95b96acce081b5af322cbe2853945baf.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T00:51:42.553

也许您可以通过这种方式扩展默认样式：

***`res/values/dialogstyles.xml`***

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Dialog" parent="@android:style/Theme.Dialog">
        <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
    </style>
    <style name="MyOwnDialogTitle">
        <item name="android:drawableRight">@drawable/MyRightImage</item>
    </style>
</resources> 
```

***`res/values-v11/dialogstyles.xml`***

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
     <style name="Dialog" parent="@android:style/Theme.Holo.Dialog">
          <item name="android:windowTitleStyle">@style/MyOwnDialogTitle</item>
     </style>
</resources> 
```

并覆盖您的 DialogFragment 的`onCreate`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NORMAL, R.style.Dialog);
} 
```

**[工作示例](http://www.mediafire.com/download.php?3hbgnogax2cx12z)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:31:46.733

我正在寻找您的第一个要求。但是对于第二个要求，为什么不尝试使用自定义样式将颜色更改为**TextAppearance.DialogWindowTitle**的样式？

我刚刚检查了以下样式的android资源：

```
 <style name="DialogWindowTitle">
    <item name="android:maxLines">1</item>
    <item name="android:scrollHorizontally">true</item>
    <item name="android:textAppearance">@style/TextAppearance.DialogWindowTitle</item>
</style> 
```

对于 TextAppearance.DialogWindowTitle 样式：

```
 <style name="TextAppearance.DialogWindowTitle">
    <item name="android:textSize">18sp</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">?textColorPrimary</item>
</style> 
```

现在，您可以更改 TextAppearance.DialogWindowTitle 样式的颜色并随心所欲地进行操作。

希望你明白了。

随意发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:43:10.473

您是否尝试过将其`@android:style/Theme.Holo.Light.Dialog`用作您`parent`的风格？这仅适用于 Android 3+，因为在早期版本中没有主题 Holo，但您可以创建自己的主题，使其看起来像较低版本的 Android。

# c# - 裁剪本地存储的图像

> ID：14492342
> 
> 赞同：1
> 
> 时间：2013-01-24T01:16:44.960
> 
> 标签：c#, image, windows-phone-8

我是 Windows Phone 开发的新手，我一直在寻找一种方法来裁剪已经内置到项目中的图像（也许有一天甚至来自相机），但我发现的每个包都有对 Visual Studio 大惊小怪，或者抛出参数异常。所以我决定我会做我自己的功能来做到这一点。

但是，我一点也不知道从哪里开始。我很确定 WriteableBitmap 与它有关，并且与以下代码有关：

```
Application.GetResourceStream(new Uri("/PhoneApp3;component/Assets/Flowers/Daff.jpg")); 
```

那么如何开始获取像素数据或创建新图像并应用像素数据。最后，如何保存结果并通过 UI 的图像元素引用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:42:03.523

使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)在 Windows Phone 上裁剪图像。您的解决方案必须工作的方式是操作 WritableBitmap.Pixels 属性。您首先加载图像，更改像素属性并将原始像素转换为保存的图像格式，如 JPG 或 PNG。这是很多工作，对您来说很幸运，WriteableBitmapEx 为您完成了这些工作。

首先，[从 NuGet 安装 WritebleBitmapEx](http://nuget.org/packages/WriteableBitmapEx)：

> 安装包 WriteableBitmapEx

然后，您可以加载任何图像，对其进行裁剪并保存回 MediaLibrary。例如，这里是如何从应用程序的 XAP 加载文件、裁剪到图像左上角 25% 并保存到“已保存图片”WP7/8 相册的示例。

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var bmp = new WriteableBitmap(0, 0).FromContent("Assets/ApplicationIcon.png");
    var croppedBmp = bmp.Crop(0, 0, bmp.PixelWidth/2, bmp.PixelHeight/2);
    croppedBmp.SaveToMediaLibrary("myImage.jpg");
} 
```

当我们运行这段代码时，我们可以看到新的裁剪图像：

![裁剪图像](../Images/fa6ddc5992164365ce0d9a065eae414d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T08:41:10.690

我最近需要这样做并且不想使用外部库。微软在 MSDN 上提供了一个很好的例子来说明如何做到这一点（并且非常擅长不引起内存泄漏！）

[http://code.msdn.microsoft.com/wpapps/Photos-Sample-a38a2c8e](http://code.msdn.microsoft.com/wpapps/Photos-Sample-a38a2c8e)

干杯，威尔

# php - 可以上课吗？

> ID：14492344
> 
> 赞同：0
> 
> 时间：2013-01-24T01:16:57.563
> 
> 标签：php

我是一个拥有整个类继承的新手，但我对 php 有点困惑。

我想要以下内容：

```
class Base
{
     //some fields and shared methods...
}

class Node
{
     private $children = array();

     public function getChildren()
     {
          ...
     }

     public function addChild($item)
     {
         $children[] = $item;
     }

     public function sum()
     {
     }
}

I want $item to be either another Node or a Leaf:

class Leaf extends Base
{
     private $value;

     public getValue()
     {
     }

     public setValue($someFloatNumber)
     {
          $this->value = $someFloatNumber;
     }
} 
```

对于公共总和（），我想要类似的东西：

```
$sum = 0;

foreach ($children as $child)
{
    switch(gettype($child))
    {
        case "Node":
           $sum+= ((Node) $child)->sum();
           break;
        case "Leaf":
           $sum+= ((Leaf) $child)->getValue();
           break;
    }
}

return $sum; 
```

不知道怎么做演员表。数组还会存储添加的 $item 的类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:23:59.080

这不是正确的 OOP。试试这个：

将方法添加`sum`到`Base`（如果您不想实现，请抽象）。为实现同样的方法`sum`，`Leaf`它只会返回它的`getValue`. 然后你可以简单地调用`sum`这两种类型，因此不需要大小写，或者知道它的类型等等：

```
foreach ($children as $child) {
    $sum += $child->sum();
} 
```

这称为多态性，它是面向对象编程的基本概念之一。

要回答您的问题，您可以在 Netbeans 和 Zend Studio（可能还有其他编辑器）中本地提示输入：

```
/* @var $varName Type_Name */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:28:23.210

您正在询问提示，但随后，在您的代码中，您实际上尝试进行强制转换。以这种方式没有必要也不可能。

提示示例：

```
private function __construct(Base $node) {} 
```

这确保您只能将类的实例`Base`或继承类传递给函数。

或者，如果它对在您的 IDE 中工作很重要，您可以执行以下操作：

```
$something = $child->someMethod(); /* @var $child Base */ 
```

这将确保您的 IDE（和其他软件）知道它`$child`属于`Base`.

而不是铸造，你可以`is_a`像这样使用：

```
if (is_a($child, 'Node') {}
else (is_a($child, 'Leaf') {} 
```

但老实说，您似乎应该重构您的代码。我不认为叶子与节点有任何不同是一个好主意。叶子只是一个没有任何子节点的节点，您可以随时对其进行测试`$node->hasChildren()`，甚至可以根据需要设置和取消设置叶子标志。

# r - 根据列名而不是数字添加

> ID：14492345
> 
> 赞同：0
> 
> 时间：2013-01-24T01:16:59.333
> 
> 标签：r

我将列与以下代码相加：

```
cbind(rowSums(data[,c(5,10,11,15)],na.rm=TRUE),rowSums(data[,c(3,6,7)],na.rm=TRUE)) 
```

但我想根据列名而不是它们的编号添加列，以消除混淆......

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:24:48.030

是的，只需将数字替换为引号中的列名：

```
 cbind(rowSums(data[,c('elephant','giraffe')],na.rm=TRUE),
       rowSums(data[,c('fish','penguin','albatross')],na.rm=TRUE)) 
```

我今天正在收集有关动物物种的数据。不知道为什么我要把它们加在一起。

# php - 我正在尝试通过 view.phtml 将相关类别链接添加到 Magento 中的产品页面

> ID：14492348
> 
> 赞同：0
> 
> 时间：2013-01-24T01:17:24.693
> 
> 标签：php, magento

我试图添加的功能是因为那里有一些链接可能会出现在产品缺货、停产等的页面上。这些类型的产品会自动设置为“目录”视图和“单独不可见”。我们已经克服了他们不再只是收到 404 错误页面的事实，但现在我想添加查看同一类别的其他产品的选项？

我有这个：

```
<?php $count =0; ?>
<?php $categories = $_product->getCategoryIds();?>
<?php foreach($categories as $k => $_category_id): ?>
<?php $_category = Mage::getModel('catalog/category')->load($_category_id) ?>

  <li> <a href="<?php echo $_category->getUrl() ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a> </li>               
                <?php $count++; 
                 if($count== 10) break; ?>
                <?php endforeach; ?> 
```

它正确地拉回了类别，但是我需要过滤掉一些类别，但我不知道该怎么做？任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:19:45.780

一种方法是按 id 过滤：

```
<?php 
foreach($categories as $k => $_category_id):

    if($_category_id == $idToFilter):
        continue;
    else:
    // show the category etc.
    endif;
endforeach;
?> 
```

# c++ - 如何解决“程序发出命令但命令长度不正确”。调用 Process32First() 时出错？

> ID：14492352
> 
> 赞同：2
> 
> 时间：2013-01-24T01:17:56.157
> 
> 标签：c++, sizeof, alignof

GetLastError 告诉我我收到“程序发出命令但命令长度不正确”。调用 Process32First() 时出错（参见下面的代码）。我发现一篇看起来很有帮助的帖子（http://social.msdn.microsoft.com/Forums/is/vcgeneral/thread/6f43716f-fdd3-4c92-bfba-6a23178c32bf），但我不确定这是否是我的问题.

我尝试构建一个仅包含 、 和 to test 的程序`"stdafx.h"`，但我`<iostream>`仍然得到一个 4 的值。不确定这是否正确。`<Windows.h>``<TlHelp32.h>``__alignof(PROCESSENTRY32)`

这是失败的代码：

```
HANDLE hProcess;
PROCESSENTRY32 pe32;

cout << "Size of PROCESSENTRY32 is: " << sizeof(PROCESSENTRY32) << "\r\n"; // 556
cout << "Align of PROCESSENTRY32 is: " << __alignof(PROCESSENTRY32) << "\r\n"; // 4

if ( !(hProcess = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0)) ) {
    cout << "CreateToolhelp32Snapshot() failed: " << GetLastError() << "\r\n";
    return (HANDLE)NULL;
} else {
    cout << "CreateToolhelp32Snapshot() succeeded.\r\n";
}

if (Process32First(hProcess, &pe32)) {
    do {
        cout << pe32.th32ModuleID;
    } while (Process32Next(hProcess, &pe32));
} else {
    cout << "Process32First() failed: " << GetLastError() << "\r\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:20:54.530

从上的文档`Process32First`：

> 调用应用程序必须将 PROCESSENTRY32 的 dwSize 成员设置为结构的大小（以字节为单位）。

我没有看到您在代码中这样做，我怀疑这是问题所在。修理它：

```
pe32.dwSize = sizeof pe32;
if (Process32First(...)) 
```

许多 winapi 结构的强制操作背后的原因是为了以后可以灵活地向结构添加更多内容，但通过检查已知大小的先前版本让函数知道正在使用哪个版本。

# iphone - SIGTRAP -[__NSCFString count]：无法识别的选择器发送到实例

> ID：14492353
> 
> 赞同：2
> 
> 时间：2013-01-24T01:18:04.747
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我的`SIGTRAP`iPhone 应用程序出现问题`-[__NSCFString count]: unrecognized selector sent to instance...`

当我调用`UITableView`.

我不知道如何跟踪这个问题，所以我正在寻求帮助。

有谁知道我可能会遇到`SIGTRAP`问题的原因？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:27:43.783

您在 NSString 变量上调用`-count`NSArray 方法。在调用 count 之前，请确保您的调用计数变量是 NSArray 或集合对象。

# android - 从视图创建位图会使视图消失，如何获取视图画布？

> ID：14492354
> 
> 赞同：5
> 
> 时间：2013-01-24T01:18:04.980
> 
> 标签：android, canvas, view, bitmap

我发现了两种从视图创建位图的方法。但是一旦我这样做，视图就会消失，我不能再使用它了。生成位图后如何重绘视图？

第一个：

```
public static Bitmap getBitmapFromView(View view) {
Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(returnedBitmap);
Drawable bgDrawable =view.getBackground();
if (bgDrawable!=null) 
    bgDrawable.draw(canvas);
else 
    canvas.drawColor(Color.WHITE);
view.draw(canvas);
return returnedBitmap;
} 
```

第二：

```
Bitmap viewCapture = null;

theViewYouWantToCapture.setDrawingCacheEnabled(true);

viewCapture = Bitmap.createBitmap(theViewYouWantToCapture.getDrawingCache());

theViewYouWantToCapture.setDrawingCacheEnabled(false); 
```

**编辑**

所以，我想我理解第一个会发生什么，我们基本上是从原始画布中删除视图并将其绘制到与该位图相关的其他位置。我们可以以某种方式存储原始画布，然后将视图设置为在那里重绘吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:40:03.280

抱歉，我对这方面不是很了解。但我使用以下代码：

```
public Bitmap getBitmapFromView(View view, int width, int height) {
    Bitmap returnedBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(returnedBitmap);
    Drawable bgDrawable = view.getBackground();
    if (view==mainPage.boardView) { 
        canvas.drawColor(BoardView.BOARD_BG_COLOR);
    } else if (bgDrawable!=null) { 
        bgDrawable.draw(canvas);
    } else { 
        canvas.drawColor(Color.WHITE);
    }
    view.measure(MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY));
    view.layout(0, 0, width, height); 
    view.draw(canvas);
    return returnedBitmap;
} 
```

这与您的非常相似，我怀疑我们是从同一个地方复制和编辑的。

我对视图从原始绘图树中消失没有任何问题。我的被​​称为 ViewGroups 而不是普通的 Views。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:45:27.990

尝试这个。

获取位图：

```
// Prepping.
boolean oldWillNotCacheDrawing = view.willNotCacheDrawing();
view.setWillNotCacheDrawing(false); 
view.setDrawingCacheEnabled(true);
// Getting the bitmap
Bitmap bmp = view.getDrawingCache(); 
```

并确保将视图重置回原来的状态。

```
view.destroyDrawingCache();
view.setDrawingCacheEnabled(false);
view.setWillNotCacheDrawing(oldWillNotCacheDrawing);    

return bmp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:24:35.323

Guy's answer works when the View has not yet been laid out in a parent view. If the view already has been measured and laid out in a parent-view, Guy's answer may screw up your Activity's layout. If the view hasn't yet been measured and laid out, Guy's answer works fine.

My answer would work **after** the View has been laid out and it won't screw up the Activity's layout since it doesn't measure and layout the View again.

# html - 表格行有边框但中间有间距

> ID：14492357
> 
> 赞同：0
> 
> 时间：2013-01-24T01:18:17.203
> 
> 标签：html, css, border, css-tables

图片链接：[www.ray-tsai.com/code_table.jpg](http://www.ray-tsai.com/code_table.jpg)

用于实验的 jsfiddle： [jsfiddle.net/s93f4/1](http://jsfiddle.net/s93f4/1)

我知道在 tr 周围有边框必须适用

```
border-collapse: collapse; 
```

那么就可以像图片显示的那样在两者之间留出间距..以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:09:58.250

您可以添加一个带边框的边框：1 px solid;

比使用边距添加间距不知道为什么要边框折叠它会删除间距

# iphone - IOS DBRestClient：DBREstClient放在哪里

> ID：14492360
> 
> 赞同：0
> 
> 时间：2013-01-24T01:18:35.063
> 
> 标签：iphone, ios, objective-c, dropbox, dropbox-api

好的。所以我有 3 个 .h 和 .m 文件（2 个控制器和 1 个委托），而且我对 Objective C 有点陌生，所以至少可以说 Dropbox 中的说明令人困惑。我来自 Javascript 背景并了解逻辑，但不了解要使用的代码。我尝试将代码放在 .h 和 .m 文件的每个组合中。（控制器的 .h 和 .m 文件，然后是委托的 .h 和 .m 文件，然后是另一个控制器的 .h 和 .m 文件，从前一个文件中删除代码，然后在另一组文件上尝试）

我深感困惑和

.h 文件

```
@interface <controller/delegate> : NSObject {
     DBRestClient *restClient;
} 
```

.m 文件

```
- (DBRestClient*)restClient {
    if (restClient == nil) {
        restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        restClient.delegate = self;
    }
    return restClient;
} 
```

我只能在其中一个类中运行此代码。控制器，但我收到此错误：

分配给 id 的不兼容指针类型

我将如何解决这个问题，它甚至在正确的地方吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-24T04:25:19.793

我发布了 dropbox 教程的链接，您可以在其中找到 dropbox api 和一个教程项目。那里的描述非常好。

[https://www.dropbox.com/developers/reference/sdk](https://www.dropbox.com/developers/reference/sdk)

以下是文档链接，您只需阅读一次即可。您会很清楚。

[https://www.dropbox.com/developers/start/setup#ios](https://www.dropbox.com/developers/start/setup#ios)

快乐编码！！！

# php - Codeigniter 数据库选择逻辑错误

> ID：14492364
> 
> 赞同：0
> 
> 时间：2013-01-24T01:18:49.520
> 
> 标签：php, mysql, sql, codeigniter

在我的数据库中，我有一堆产品。在我的产品表中，我有一个名为的列`active`，默认为`1`（这意味着它是“活动的”）当我删除产品而不是删除行时，我只是将活动列更改为`0`

我还有一个搜索功能，可以按名称或描述等搜索产品。我使用 codeigniter 作为框架。这是我生成查询的代码：

```
$search_query = $this->db->from('company_products')
->where('company_products.active', 1)
->or_like(array('name'=> $keywords, 'model'=> $keywords, 'brand'=> $keywords, 'description'=> $keywords))
->order_by('id', 'RANDOM')
->get(); 
```

此代码生成此 mysql 查询：

```
SELECT `company_products`.*
FROM (`company_products`)
WHERE `company_products`.`active` =  1
AND  `name`  LIKE '%chair%'
OR  `model`  LIKE '%chair%'
OR  `brand`  LIKE '%chair%'
OR  `description`  LIKE '%chair%' 
```

在“删除”产品（将活动列更改为 0）后，该产品仍会显示在搜索结果中。这就是我怀疑在代码上发生的事情：

```
(SELECT a product WHERE active = 1 - AND - name LIKE %search_string%) 
 - OR - 
(SELECT a product WHERE model LIKE %search_string%)
 - OR - 
(SELECT a product WHERE brand LIKE %search_string%)
 - OR - 
(SELECT a product WHERE description LIKE %search_string%) 
```

但这就是我想要的：

```
(SELECT a product WHERE active = 1) 

 - AND - 

{ (SELECT a product WHERE model LIKE %search_string%) 
- OR - 
(SELECT a product WHERE model LIKE %search_string%) 
- OR - 
(SELECT a product WHERE brand LIKE %search_string%) 
- OR - 
(SELECT a product WHERE description LIKE %search_string%) } 
```

我希望我的伪代码不会太混乱。我想使用 codeigniter 的活动记录类来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:22:10.557

活动记录不会单独执行此操作，您需要将它们分组，否则它们将作为或针对查询的整个 where 部分工作。您需要在复杂查询中手动构建 WHERE 语句，就个人而言，在这些情况下，我根本不关心活动记录，但如果您真的想使用它，您可以这样做：

```
$where = "`company_products`.`active` =  1 AND (`name`  LIKE '%$keywords%' 
OR `model`  LIKE '%$keywords%' OR `brand`  LIKE '%$keywords%' OR 
`description`  LIKE '%$keywords%')";
$search_query = $this->db->from('company_products')
->where($where)
->order_by('id', 'RANDOM')
->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:22:57.020

使用括号：

```
SELECT `company_products`.*
FROM (`company_products`)
WHERE `company_products`.`active` =  1
AND  (`name`  LIKE '%chair%'
 OR  `model`  LIKE '%chair%'
 OR  `brand`  LIKE '%chair%'
 OR  `description`  LIKE '%chair%') 
```

阅读MySQL 中的[运算符优先级](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)（基本上它适用于所有 RDBMS）

# c# - 在 EF Code First DatabaseIntializer 中重用 GUID

> ID：14492367
> 
> 赞同：2
> 
> 时间：2013-01-24T01:19:02.627
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

所以我正在尝试使用 EF 建立自定义成员资格。我真的不知道我在做什么，但到目前为止进展相当顺利。

我在 Database Initializer 步骤中，我试图在项目运行后立即将数据转储到数据库中。我的班级`Application.cs`使用 GUID 作为主键，如下所示。我试图弄清楚如何将该 GUID 添加到数据库中。

我不知道这是否可能，但这就是我想要做的。当您在 VS 2012 中创建一个普通的 Web 应用程序项目并尝试使用 EF Code First 重新创建该数据库时，我使用了默认登录的数据库（为了练习）。这是我到目前为止得到的。

班级

```
public class Applications
        {

                [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
                public Guid ApplicationId { get; set; }

                [StringLength(125)]
                public string ApplicationName { get; set; }

        } 
```

初始化器在构建时将数据转储到数据库中（不包括种子。）

```
 private static List<Applications> addApplications()
    {
        var apps = new List<Applications>
        {
            new Applications
            {
                ApplicationId = Guid.NewGuid(),
                ApplicationName = "Test Login"

            }
        };

        return apps;
    }
  private static List<Memberships> addMemberships()
    {
        var mem = new List<Memberships>
        {
            new Memberships
            {
                UserId = Guid.NewGuid(),
                ApplicationId = ?, // How can this guid Match the one in  
                                   // in ApplicationId for the Application Table?
            }

        };
        return mem;
    } 
```

我得到“Invalid Initializer member declarator”。我面临的问题是我需要`ApplicationId`跨多个表的 GUIDS 相同。我什至不知道这是可能的还是正确的？

我有一种感觉，我必须以某种方式分享它，也许就像

```
 Guid AppId;
        AppId = Guid.NewGuid(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:07:17.510

在您的会员模型中，而不是存储 GUID“ApplicationId”来尝试引用应用程序，您应该使用这样的导航属性（[请参阅此链接以更好地描述导航属性](http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first)）：

```
public class Memberships
{

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserId { get; set; }

    //if you set your model up like this entity framework will take care of creating
    /the foreign key for you.
    public Application MemberApplication { get; set; }

} 
```

然后只需将适当的应用程序传递给您的方法，如下所示：

```
private static List<Memberships> addMemberships(Application app)
{
    var mem = new List<Memberships>
    {
        new Memberships
        {
            UserId = Guid.NewGuid(),
            Application = app, 
        }

    };
    return mem;
} 
```

像这样设置模型可以让您充分利用 oop 和关系数据库。希望有帮助。

# asp.net - 使用 Validation 配置文件进行 Asp.net 表单验证

> ID：14492369
> 
> 赞同：0
> 
> 时间：2013-01-24T01:19:30.190
> 
> 标签：asp.net, .net, validation

目前我需要在 ASP.net（不是 MVC）中验证（服务器端）表单。我们的表单中有几个字段可以从活动目录中获取数据。不是使用内置的 .net 验证控件，而是要求对所有验证使用配置设置，可以轻松编辑。我计划使用 XML（或任何其他类似的替代方案）作为配置编辑器。

最初我认为（仍在思考）这是一个简单的任务。但是当我搜索类似的实现时，我找不到。[我看到](http://msdn.microsoft.com/en-us/library/aa478956.aspx)的一些实现使用了非常复杂的方法。整个想法是使验证设置尽可能简单和动态。

如果有人可以指导我进行类似的实施或就此提出建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:53:40.223

经过一番研究，我发现[这篇](http://www.codeproject.com/Articles/256355/Microsoft-Enterprise-Library-5-0-Introduction-to-V)文章非常有用。它向我介绍了 Enterprise Library 5.0 中的验证块，可以根据我们的要求进行定制。

# c# - 在 EventArgs 或 EventHandler 的发送者上捎带数据

> ID：14492371
> 
> 赞同：0
> 
> 时间：2013-01-24T01:19:43.360
> 
> 标签：c#

我正在编写一个自定义调度程序，因此我想触发任何注册为在当前时间运行的任务，而不会花费太多时间以至于调度程序错过下一个时间段。因此，我创建了一个线程，该线程会一直休眠到下一个预定事件，然后它会唤醒并运行下一个或多个事件，然后再次休眠。任务在后台作为进程运行，因此我可以设置它们并尽快将它们关闭。为了便于控制进程的日志记录，我保留了一个内部任务队列，在唤醒时我会在启动进程时消耗这些任务，但我还希望有一个 EventHandler 可以通过注册多长时间来完成该任务的日志记录它花了，一旦它退出它是失败还是成功。

因为我使用 Process.Process() 类在后台执行任务，所以无法（我可以看到）将我的唯一任务引用传递给处理程序，因此我可以正确完成日志记录。我正在设置我的处理程序，如下面的代码。

```
pTask = new Process();
pTask.Exited += new EventHandler(pTask_Exited); 
```

我故意在标题中使用了“搭载”一词，因为在我的研究中，我遇到了一个[类似的问题](https://stackoverflow.com/questions/1942621/it-is-possible-to-pass-data-to-eventargs-without-creating-derived-class)，该问题吸引了一个答案，即如果您需要搭载 EventArgs 上的数据，那么您的设计就有缺陷。我可以接受我的设计可能有缺陷，但无法找到关于如何以不同方式更有效地设计它的启示。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:24:52.913

您可以使用 lambda 实现此目的，如下所示：

首先定义一个在进程退出时将运行的方法。这将代替您当前使用的任何事件处理程序，并执行必要的日志记录等：

```
void ExitHandler(Process process, YourTaskInfo taskInfo) // YourTaskInfo is some class that contains data about the task that needs to be passed to the handler
{
    Console.WriteLine("Process for task: {0} exited with code: {1}", taskInfo, process.ExitCode);
} 
```

然后，您可以将此方法附加到`Exited`事件处理程序，如下所示：

```
pTask.Exited += (s,e) => ExitHandler(pTask, taskInfo); 
```

通过这种方式，您可以将您的唯一任务引用 ( `taskInfo`) 传递给`Exited`处理程序，而不必担心发送方或 EventArgs 上的任何“捎带”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:30:05.590

从`Process`自身获取数据，作为传递的`sender`：

```
void pTask_Exited(object sender, EventArgs e)
{
    Process p = (Process)sender;
    TimeSpan duration = p.ExitTime - p.StartTime;
    bool success = p.ExitCode == 0;
} 
```

# wordpress - 跟踪登录 Wordpress 用户、他们阅读的内容、评论的内容等

> ID：14492377
> 
> 赞同：4
> 
> 时间：2013-01-24T01:20:14.307
> 
> 标签：wordpress, tracking

因此，我想跟踪我的用户登录后在我的 wordpress 博客上所做的事情。例如，他们阅读了哪些帖子和评论了什么，喜欢/推特/G+s 的内容，以及他们分享的内容。

基本上我的博客有许多不同的部分和主题，我想准确地通过电子邮件向我的用户发送针对他们兴趣的内容。所以我想知道用户 john 是否喜欢汽车部分，用户 jill 是否阅读了园艺部分的 3。

然后，我需要将此数据导出到我的广告系列。

我注意到[http://www.kissmetrics.com/](http://www.kissmetrics.com/)看起来像这样。有人对这个有经验么？

非常感谢任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:42:25.617

你可以试试这些插件：

*   [用户跟踪器](http://wordpress.org/extend/plugins/usertracker/)
*   [WP SlimStat](http://wordpress.org/extend/plugins/wp-slimstat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T23:42:20.007

[https://premium.wpmudev.org/project/user-activity/](https://premium.wpmudev.org/project/user-activity/)

这是我将为此目的使用的一个插件，但它似乎不像其他插件那样功能丰富。

# html - 在 div 中居中并剪辑图像

> ID：14492378
> 
> 赞同：0
> 
> 时间：2013-01-24T01:20:45.293
> 
> 标签：html, css

我正在建立一个缩略图库。对于每个缩略图，我正在创建一个剪辑器 div 并将图像放置在该 div 中。不同图像的缩略图大小不同，其中剪辑器 div 为 150x150px

```
<div class='clipper-div'>
    <img class='image1' src='img/img2.jpg'/>  
</div> 
```

我想放置该图像，使其完全占据该 div，并剪切图像的其余部分，使其完全居中。

为了做到这一点，我看到了图像的最小尺寸（高度/宽度），使其为 100%。然后是其他维度，现在大于 div 的 150px。我正在计算差异，将其除以 2 并将 top/left 属性设置为该值的负值，以便图像看起来居中，然后将 overflow:hidden 添加到裁剪器 div 中，使多余的部分不可见。

我想知道是否有更好的方法来做到这一点，而不是我计算这些值，我可以设置 CSS 属性，以便所有图像将在该 div 中（垂直/水平）居中，其余部分被剪裁。

* * *

如果我的描述令人困惑，这里有一个示例：假设缩略图大小为 300x100 像素。所以高度是最小的属性，所以我将它设置为 100%。所以高度变成150，宽度变成400px，所以现在我计算偏移量。在这种情况下 (400-150)/2 = 125 像素。现在我将图像左侧设置为 -125px

```
.image1{
     position:absolute;
     left:-125px;
     height:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:17:00.680

尝试这个：

```
.Image1 { 
    background: url(images/bg.jpg) no-repeat center center; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

# css - 用于重叠的纯 CSS3 具有边界半径的元素

> ID：14492381
> 
> 赞同：1
> 
> 时间：2013-01-24T01:21:18.723
> 
> 标签：css, html

我`<div>`在一个容器`<div>`中有不同数量的 s ，每个都设置为`display:inline-block`，有 a`-webkit-border-radius`和一些`padding`。我想以`<div>`一种方式定位每个 s，使右侧的一个与左侧的一个重叠，以便顶部和底部的边框没有中断。此外，理想情况下，容器`<div>`的宽度仅与内部样式化 div 的大小完全相同（LAST_DIV 的高度和宽度等于从最左侧到最右侧 div 的距离）。

```
                         ----------------
   --------------------/ \
 // | |
| DIV_1 | DIV_2 | LAST_DIV |
 \ \ | |
   ------------------- \ /
                         ----------------

```

由于`<div>`将显示的 s 数量不同，我排除了绝对定位。我想避免使用 javascript 或向 html 文档添加其他元素，因为我正在为同一个网站元素创建多个样式，并且其中一些样式可能没有必须`<div>`重叠的 rounded s。

编辑：

我尝试仅将边界半径设置为内部 div 的左边缘，并在容器 div 的顶部和底部设置一个边框，并设置一个负值，`left`直到容器 div 的重叠边框消失。当所有 div 的高度相同时，这给了我在右端的问题，因为容器 div 现在延伸到右端。当各个 div 有不同的颜色时，这也给了我一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:55:16.817

你可以尝试这样的事情：

# [*演示*](http://dabblet.com/gist/4616961)

**HTML**：

```
<div class='container'>
    <div>DIV_1</div><!--
    --><div>DIV_2</div><!--
    --><div>LAST_DIV</div>
</div> 
```

相关**CSS**：

```
.container, .container div { display: inline-block; }
.container div {
    padding: .25em 1.25em;
    border-radius: .65em 0 0 .65em;
}
.container div:not(:first-child) {
    margin: 0 0 0 -.65em; /* negative left margin, same value as border-radius */
}
.container div:last-child {
    padding: 1.25em;
    border-radius: .65em;
} 
```

## 笔记

设置在它们上的元素之间的任何类型的空格（空格、制表符、换行符）都很`display: inline-block;`重要。这意味着`div`容器中 s 之间的 HTML 中的换行符将在它们之间引入一个空格。[**对此有一些修复**](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)。我选择的一个涉及在`</div>`（子 div 的结束标记）和`<div>`（以下 div 的开始标记）之间添加注释。

# asp.net-mvc - MVC RouteConfig 允许 /Controller/Action.html

> ID：14492383
> 
> 赞同：1
> 
> 时间：2013-01-24T01:21:46.257
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个 MVC 应用程序，并且正在使用路由 /Controller/Action/Id 的标准 routeconfig

我希望它另外捕获`/Controller/Action.html`为 url 和指向`/controller/action`也。

我正在使用一个我无法控制的 jquery 库，并且一个函数需要一个指向网页或图像的 url。但是，它似乎不理解没有扩展名（.html、.php 等）的结尾是指向 html 的链接并引发错误。

编辑：我按照以下评论者的建议进行了尝试，但似乎仍然无法正常工作。这是我的路线配置。

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute("routeWithHtmlExtension",
            "{controller}/{action}.html",
            new { controller = "Home", action = "Index" }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

这个网址有效：

```
 http://localhost:14418/Album/Test 
```

这个没有：

```
 http://localhost:14418/Album/Test.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T15:06:18.603

在 web.config

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true" />
...
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:25:16.143

如果您设置以下路线，它将起作用：

```
routes.MapRoute("routeWithHtmlExtension",
    "{controller}/{action}.html",
    new {controller = "Home", action = "Index" }
); 
```

# python - 混淆单词拼图的 Python 程序

> ID：14492386
> 
> 赞同：0
> 
> 时间：2013-01-24T01:21:55.383
> 
> 标签：python, python-3.2

我是 python 新手，我只是在处理这个应用程序

```
import random

# create a sequence of words to choose from
WORDS = ("hello","goodbye","smile","evening","daytime")

#

# pick one word randomly from the sequence
word = random.choice(WORDS)

# create a variable to see if the guess is correct
correct = word

# create a jumbled version of the word
jumble =""
while word:
    position = random.randrange(len(word))
    jumble += word[position]
    word = word[:position] + word[(position + 1):]

# start the game
print( \
"""
        Welcome to the anagram quiz!

   Unscramble the letters to make a word.
(Press the enter key at the prompt to quit.)
""")
print ("The jumble is:", jumble)

guess = input("\nYour guess: ")
guess = guess.lower()

while (guess != correct) and (guess != ""):
    print ("Sorry, that's not it.")
    guess = input("Your guess: ")
    guess = guess.lower()

if guess == correct:
    print ("That's it!  You guessed it!\n")

print ("Thank you for playing.")

input("\n\nPress the enter key to exit.") 
```

正如您所看到的那样，它混淆了一个单词让用户猜测这个词是什么，我需要能够改进这一点，以便用户在他们被卡住时得到提示并添加一个评分系统来奖励那些解决混乱的人无需提示。

我已经尝试了几个小时，但没有找到，请您帮我添加该功能。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:37:54.893

对于提示部分：如果玩家猜错了指定次数，他可以选择要求提示。提示将是您生成的内容以及可供选择的单词序列，成对形式。所以当玩家被卡住时，你会有一个词和一个提示来给出它。

```
WORDS=[['hello','greeting'],['evening','sunset'],etc.] 
```

至于分数部分：您可以进行基于时间的评分，他们每秒都会失去分数，直到他们猜对为止，或者基于猜测的评分，他们每猜错一次就会失去分数。

# html - 如何保持内容在顶部对齐

> ID：14492388
> 
> 赞同：0
> 
> 时间：2013-01-24T01:22:04.713
> 
> 标签：html, css

我的选项和答案功能有问题。如果我选择一个包含许多按钮输出的选项，例如如果我选择选项 20，它将显示 20 个按钮，我遇到的问题是我的内容会下降一点，因为它会在表格单元格增加时创建一个空间。我的问题很简单，如果表格单元格增加一点，我怎样才能使内容保持在足够接近顶部的位置而不向下移动？

它的外观截图：

![在此处输入图像描述](../Images/fe07c56ca14451d9f35e091876ce37d3.png)

以下是我尝试但没有奏效的方法：

```
.option{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
}

.noofanswer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
}

.answer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
} 
```

以下是表格：

```
var $options = $("<table class='option'><tbody><tr><td>1\. Option Type:</td></tr></tbody></table>");
var $noofanswers = $("<table class='noofanswers'><tbody><tr><td>2\. Number of Answers:</td></tr></tbody></table>");
var $answer = $("<table class='answer'><tbody><tr><td>3\. Answer:</td></tr></tbody></table>"); 
```

更新：

```
 var $options = $("<table class='option'><tbody><tr><td class='opt'>1\. Option Type:</td></tr></tbody></table>");
    var $noofanswers = $("<table class='noofanswers'><tbody><tr><td class='noofans'>2\. Number of Answers:</td></tr></tbody></table>");
    var $answer = $("<table class='answer'><tbody><tr><td class='ans'>3\. Answer:</td></tr></tbody></table>");

    var $this, i=0, $row, $cell;
    $('#optionAndAnswer .answers').each(function() {
        $this = $(this);
        if(i%6 == 0) {
            $row = $("<tr/>").appendTo($answer);
            $cell = $("<td/>").appendTo($row);
        }
        var $newBtn = $(("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this, " + gQuestionIndex + ");' />").replace('%s', $this.is(':visible') ? 'inline-block' : 'none')).attr('name', "value[" + gQuestionIndex + "][]").attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id') + 'Row');
        $newBtn.appendTo($cell);

        i++;
    }); 
```

CSS：

```
td.opt{
    vertical-align:top;
    padding-top:1em;
}

td.noofans{
    vertical-align:top;
}

td.ans{
    vertical-align:top;
    padding-bottom:1em;

}

.option{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
    border-collapse: collapse;
    margin:0;
}

.noofanswer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
    border-collapse: collapse;
    margin:0;
}

.answer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
    border-collapse: collapse;
    margin:0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:24:40.083

试试这个 CSS`<td>`元素：

```
td {
  vertical-align: top;
} 
```

这里有更多细节。整个 CSS 应该如下所示：

```
* {
  margin: 0; padding: 0;
}

table {
  border-collapse: collapse;
}

td {
  vertical-align: top;
}

.option{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
}

.noofanswer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
}

.answer{
    width:100%;
    text-align:center;
    padding-top:1em;
    padding-bottom:1em;
    padding-left:0;
    padding-right:0;
} 
```

这是 PHP 代码，其中包含要添加`cellpadding`和添加`cellspacing`到`<table>`标签的编辑：

```
var $options = $("<table class='option' cellpadding='0' cellspacing='0'><tbody><tr><td>1\. Option Type:</td></tr></tbody></table>");
var $noofanswers = $("<table class='noofanswers' cellpadding='0' cellspacing='0'><tbody><tr><td>2\. Number of Answers:</td></tr></tbody></table>");
var $answer = $("<table class='answer' cellpadding='0' cellspacing='0'><tbody><tr><td>3\. Answer:</td></tr></tbody></table>"); 
```

# php - 我可以将逻辑比较存储在字符串中吗？

> ID：14492390
> 
> 赞同：3
> 
> 时间：2013-01-24T01:22:38.457
> 
> 标签：php, if-statement, conditional, modularity, modularization

我正在尝试模块化一个冗长的`if..else`功能。

```
$condition = "$a < $b";
if($condition)
{
    $c++;
} 
```

有没有办法将文字字符串翻译成逻辑表达式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T01:25:33.537

> 我正在尝试模块化一个冗长的 if..else 函数。

您不需要为此将条件放在字符串中，只需存储布尔值`true`或`false`：

```
$condition = ($a < $b);
if($condition)
{
    $c++;
} 
```

> $a 和 $b 的值可能会在 $condition 的定义及其用法之间发生变化

一种解决方案是闭包（假设定义和使用发生在同一范围内）：

```
$condition = function() use (&$a, &$b) {
    return $a < $b;
}
$a = 1;
$b = 2;
if ($condition()) {
    echo 'a is less than b';
} 
```

但是我不知道这对您是否有意义，而无需远程知道您要完成的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T01:32:32.077

如果您知道足以确定结果的变量，请使用 lambda

```
$f = function ($a, $b) { return $a < $b; }

if ($f($x, $y)){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T01:26:16.937

你可以使用[eval](http://php.net/manual/en/function.eval.php)来做到这一点。不过，不确定您为什么不立即评估条件。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-24T01:25:23.233

```
<?php
     $a=0;
     $b=1;
    function resultofcondition()
    {
        global $a,$b;
        return $a<$b;
    }
    if(resultofcondition()){
        echo " You are dumb,";
    }else{
        echo " I am dumb,"; 
    }
    $a=1;
    $b=0;
    if(resultofcondition()){
        echo " You were correct.";
    }else{
        echo " in your face.";
    }
?> 
```

确实感谢您对此发表评论，缺少 GLOBAL 参数，对于那些投反对票的人，该代码会输出什么？¬_¬ w/e 玩得开心 xD

# android - if语句在sockets程序中不起作用，android

> ID：14492391
> 
> 赞同：0
> 
> 时间：2013-01-24T01:22:43.603
> 
> 标签：android, sockets, if-statement

我有一个使用套接字的客户端服务器程序，一个 android 平板电脑是服务器，另一个 android 是客户端。它在下面显示的第一个示例中工作正常，我发送一条简单的消息，但在下面的第二个示例中，我尝试使用 if 语句但它不起作用。我想知道这是为什么？

receivedCommand 是 textView

这是第一个没有问题的例子

```
public String line = null;
try {
  BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));

  while ((line = in.readLine()) != null) {
    Log.d("ServerActivity", line);
    handler.post(new Runnable() {
      @Override
      public void run() {
        receivedCommand.setText(line);
      }
    });
  } 
```

现在是使用 if 语句时不起作用的第二个示例

```
public String line = null;
try {

  BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));

  while ((line = in.readLine()) != null) {
    Log.d("ServerActivity", line);
    handler.post(new Runnable() {
      @Override
      public void run() {
        //receivedCommand.setText(line);

        if(line.equals("test")){
          receivedCommand.setText("test received"); 
        }

      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:39:23.617

似乎你所要做的就是

```
line.trim().equals("test")) 
```

总是`trim()`从其他来源获取字符串时，它可能只是在您不期望的地方有空格，并导致比较返回 false。

# perl - 为什么我的子程序返回值没有分配给 $_ 默认变量

> ID：14492395
> 
> 赞同：3
> 
> 时间：2013-01-24T01:23:18.067
> 
> 标签：perl

我有一个更新 RSS 提要的 Perl 子程序。我想测试返回值，但是该函数在很多地方都使用过，所以我只想测试默认变量`$_`，据我所知，如果没有指定变量，它应该是分配的返回值。

代码有点太长，无法包含所有内容，但本质上它执行以下操作

```
sub updateFeed {
  #....
  if($error) {
    return 0;
  }
  return 1;
} 
```

那为什么

```
$rtn = updateFeed("My message");
if ($rtn < 1) { &Log("updateFeed Failed with error $rtn"); } 
```

不记录任何错误

然而

```
updateFeed("myMessage");
if ($_ < 1) { &Log("updateFeed Failed with error $_"); } 
```

记录“”错误`updateFeed Failed with error`？（注意消息末尾没有值。）

谁能告诉我为什么默认变量似乎包含一个空字符串或 undef？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T01:26:11.200

因为 Perl 不是那样工作的。`$_`不会自动获得在 void 上下文中调用的函数的结果。默认情况下，有一些内置的操作符可以读写`$_`，`@_`但是你自己的子程序只有在你编写代码来实现它时才会这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T02:34:31.653

普通函数调用不是`$_`隐式使用的上下文之一。

以下是`perldoc perlvar`（从 v5.14.1 开始）要说的`$_`：

> $_
> 默认输入和模式搜索空间。以下对是等效的：

```
 while (<>) {...}    # equivalent only in while!
    while (defined($_ = <>)) {...}

    /^Subject:/
    $_ =~ /^Subject:/

    tr/a-z/A-Z/
    $_ =~ tr/a-z/A-Z/

    chomp     
    chomp($_) 
```

> 下面是 Perl 假设 $_ 的地方，即使你不使用它：
> 
> *   以下函数使用 $_ 作为默认参数：
>     
>     
>     
>     abs，警报，chomp，chomp，chr，chroot，cos，定义，eval，exp，glob，hex，int，lc，lcfirst，长度，log，lstat，mkdir，oct，ord，pos，print，quotemeta，readlink， readpipe、ref、require、reverse（仅在标量上下文中）、rmdir、sin、split（在其第二个参数上）、sqrt、stat、study、uc、ucfirst、unlink、unpack。
>     
>     
> *   除了默认为 STDIN的所有文件测试 ( `-f`, `-d`) 。`-t`见`-X`perlfunc
>     
>     
> *   模式匹配操作`m//`,`s///`和`tr///`(aka `y///`) 在没有`=~`操作符的情况下使用。
>     
>     
> *   `foreach`如果没有提供其他变量，则循环中的默认迭代器变量。
>     
>     
> *   `grep()`and`map()`函数中的隐式迭代器变量。
>     
>     
> *   的隐含变量`given()`。
>     
>     
> *   `<FH>`当操作的结果作为测试的唯一标准进行测试时，放置输入记录的默认位置`while`。在`while`测试之外，这不会发生。
>     
>     
> 
> 由于 $_ 是一个全局变量，在某些情况下这可能会导致不必要的副作用。从 perl 5.9.1 开始，您现在可以使用 $_ 的词法版本，方法是在文件或带有`my`. 此外，声明`our $_`恢复当前范围内的全局 $_ 。
> 
> 助记符：在某些操作中理解下划线。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T01:32:50.017

您从未将标志分配给`$_`，那么为什么它会包含您的标志？它似乎包含一个空字符串（或者可能`undef`，它字符串化为带有警告的空字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:57:48.493

[`$_`](http://perldoc.perl.org/perlvar.html#%24_)默认情况下不是由 void 上下文中的子例程设置的。可以编写您的潜艇来设置[`$_`](http://perldoc.perl.org/perlvar.html#%24_)何时是无效上下文。您首先检查 的值[`wantarray`](http://perldoc.perl.org/functions/wantarray.html)，然后设置未定义的[`$_`](http://perldoc.perl.org/perlvar.html#%24_)时间。[`wantarray`](http://perldoc.perl.org/functions/wantarray.html)

```
sub updateFeed {
  ...
  my $return
  ...

  if($error) {
    $return = 0;
  }else{
    $return = 1;
  }
  # $return = !$error || 0;

  if( defined wantarray ){ # scalar or list context
    return $return;
  }else{ # void context
    $_ = $return;
  }
} 
```

我建议不要这样做，因为这对正在使用您的子程序的人来说可能是一个相当大的惊喜。这会使调试他们的程序变得更加困难。

我唯一一次这样做是在模拟[内置子程序](http://perldoc.perl.org/perlfunc.html)时。

# android - Zxing 在 Android 设备上检测到，但在 PC 上检测不到

> ID：14492397
> 
> 赞同：0
> 
> 时间：2013-01-24T01:23:30.787
> 
> 标签：android, unit-testing, zxing, robolectric

我正在使用 Zxing core.jar 来扫描条形码和二维码，它运行良好，但我想使用 Robolectric 进行测试，在没有模拟器或设备的情况下运行自动化测试，这将通过 zxing 获取 N 个图像，所以我的问题是 zxing 出于某种原因没有从 .jpg 文件中检测到任何类型的代码格式，我不确定图像是否有大小限制，或者我缺少的其他东西。进行检测的代码是这样的，它适用于将帧预览转换为 jpgs

```
 BinaryBitmap bitmap = getBitmapFromImageData(input);
        Collection<BarcodeFormat> decodeFormats = getDecodeFormats();
        Map<DecodeHintType, Object> hints = getHints(decodeFormats);
        MultiFormatReader multiFormatReader = getMultiFormatReader(hints);

        Result rawResult;
        try {
            rawResult = multiFormatReader.decodeWithState(bitmap);
        } catch (NotFoundException e) {
            // not really an error, just QR code not found
            Log.e(LOG_TAG, "Code Detection not found exception.");
            return null;
        } 
```

其中输入包含 jpg 格式的字节数组，并由 getBitmapFromImageData 转换为 Zxings 内部格式。就像我说的库在设备中运行良好，但我找不到任何合乎逻辑的理由说明为什么从我的电脑运行此代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:46:25.987

您没有显示任何关键代码，例如您阅读图像的方式。您应该检查它是否被正确读取，是否被您的代码正确二进制化等。查看项目中的单元测试以了解如何正确读取和处理桌面上的图像。我不知道您的代码在不同的“get”方法中可能会做什么。

# selenium - 通过 selenium 点击链接

> ID：14492398
> 
> 赞同：-1
> 
> 时间：2013-01-24T01:23:52.587
> 
> 标签：selenium

使用 selenium（使用 eclipse 的服务器），我需要在网页上找到一个链接，例如这是链接，然后单击该链接。这样做的最佳方法是什么 - 在此先感谢您提供任何有用的建议。

编辑：链接本身不是静态的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:12:05.290

假设链接文本发生变化，但位置保持不变。

driver.findElement(By.cssSelector("css")).click();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:32:42.163

我能够简单地使用以下内容：

selenium.click("链接=登录"); //其中“登录”是链接的文本

# visual-studio-2012 - Visual Studio 2012 开放框架 3.5

> ID：14492400
> 
> 赞同：0
> 
> 时间：2013-01-24T01:24:05.753
> 
> 标签：visual-studio-2012

我有一个使用 .Net 框架版本 3.5 开发的项目我在 Visual Studio 2012 中打开，然后它会自动升级到最新的框架

我不希望这种情况发生，我只想在以前的版本中工作，是否需要配置任何设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:27:22.330

从项目构建选项中，您可以选择目标框架 3.5。

# paypal - PayPal 订阅 subscr_modify：用户可以自行更改什么？

> ID：14492402
> 
> 赞同：2
> 
> 时间：2013-01-24T01:24:08.483
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

我不断在 PayPal 中收到 subscr_modify ipn 通知，尽管我的网站上没有提供任何修改按钮。用户是否可以在不通过我的网站的情况下通过其 PayPal 帐户更改订阅的日期或价格，或者这仅仅是由于用户更改地址等原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T01:48:41.780

来自 PayPal 支持的答案：

> 在这种情况下，用户无法更改订阅的金额或期限，但他们可以更改与其账户关联的资金来源或地址。这些操作将生成您收到的 subscr_modify IPN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:23:41.467

由于多种原因，您将获得 subscr_modify IPN。请参阅此页面上的第二个表：

[https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-subscriptions-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-subscriptions-outside)

得到一个线索。例如，当用户升级或降级对送餐服务的订阅时，我们会收到这些消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-25T17:18:35.263

虽然最初的发布者没有利用 PayPal 修改现有订阅的选项，但它对于订阅类型的内容网站来说是一个美妙而重要的功能。

从他们手册的第37页开始：

[https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/archive/PP_subscriptions.pdf](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/archive/PP_subscriptions.pdf)

> 您可以让您的订阅者更改现有订阅的名称、号码、常规条款或货币，而无需取消它并通过创建修改订阅按钮重新订阅。可以构建此按钮以允许买家仅修改现有订阅，或者修改现有订阅或在不存在活动订阅时注册新订阅。
> 
> 购买者将无法修改试用期条款或更改除以下任何变量之外的任何变量：订阅名称、参考项目编号、定期订阅费率、定期计费周期和货币

启用您的订阅以进行修改很简单：将其添加到表单（使用订阅按钮）作为隐藏输入：

`<input type="hidden" name="modify" value="x">`

...其中 x 为 1 或 2。

根据文档，这是该参数中 1 与 2 的含义：

> – 要制作修改或注册按钮，意味着买家可以使用此按钮修改现有订阅或注册新订阅，请插入以下行：
> 
> `<input type="hidden" name="modify" value="1">`
> 
> – 要制作仅修改按钮，意味着买家只能使用此按钮修改现有订阅，而不是注册新订阅，请插入以下行：
> 
> `<input type="hidden" name="modify" value="2">`

当然，当有人真正修改了他们的订阅，并假设您的站点正在侦听 IPN 通信，txn_type 将返回为“subscr_modify”......您的代码可以做出相应的反应。

# jquery - preventDefault 和 .remove() 的有趣行为 - 我可以依靠这个吗？

> ID：14492407
> 
> 赞同：0
> 
> 时间：2013-01-24T01:24:25.770
> 
> 标签：jquery, ajax, forms

我设置了一个 AJAX 表单（实际上我正在制作另一个就地编辑插件）并为单击按钮设置一个 AJAX 绑定：

```
 // Do default submit and cancel options.
    $editor.on('click' + namespace, '.ok', function(e) {
        console.log('clicked ok');
        submit($original);
    }); 
```

（这里 $editor 是表单，$original 是原地编辑的 span 元素；提交后，我需要再次显示 span 元素。表单包含`<button>`type`submit`和 class `.ok`。）

令我惊讶的是，默认表单操作实际上*被*抑制了，即使我忽略了`.preventDefault()`或其他任何事情。我最终将此追溯到 AJAX 提交例程最终会执行的事实：

```
$editor.remove(); 
```

即歼灭整个形式。不过，即使我只是 .detach() 它似乎也能工作。

可以依赖这种行为吗？应该依赖它吗？表单的突然消失是否会阻止浏览器以正常方式提交它，或者它可能在调度事件之前缓存了信息？（是否有任何网络标准对此有任何说明？）它会导致异常（甚至崩溃？）某些浏览器将表单从其脚下扫除吗？如果是这样，除了仅使用 .preventDefault 之外，这对正确设计还有什么其他影响？

* * *

附录：看起来按 Enter 键（通常会提交表单）实际上也会`click`为 OK 按钮生成一个事件！这应该发生吗？同样，在 Enter-key 处理程序中删除表单似乎可以防止单击发生。

问题是，因为我正在制作一个插件，所以我打算允许 OK 按钮实际上没有附加到表单上的可能性；在这种情况下， Enter 键仍然需要工作，但如果按钮在那里，我显然只想提交一次表单......

# php - 异常大写检测正则表达式 PHP

> ID：14492410
> 
> 赞同：1
> 
> 时间：2013-01-24T01:24:43.970
> 
> 标签：php, regex

我只是在编写一些分析用户名的代码。到目前为止，我已经编写了代码来检测用户名是否包含任何不好的单词、标点符号、符号、数字或重复字符，但设法让自己在检测异常大写时陷入困境。

到目前为止，我已经采用了一种非常简单的方法或以以下形式执行此操作；如果名称有两个以上的大写字母，我们将拒绝该名称。（我使用了两个，因为有些人的名字是双管的，例如 Anne-marie）。

```
$capitals = strlen($name) - strlen(preg_replace('/[A-Z]/', '', $name));
    if ($capitals > 2) {
        $hasError = true; 
} 
```

尽管它为我们提供了一个不寻常的大写问题的半生不熟的解决方案。问题是，半生不熟！它仍然允许名称中有许多可能的大写和小写字母模式，但如果它们超过两个字符则不允许。

所以，我在 if 语句中添加了一段额外的代码来检查重复的大写字符，从而使上面的代码现在变成这样：

```
$capitals = strlen($name) - strlen(preg_replace('/[A-Z]/', '', $name));
    if (preg_match('/[A-Z]{2,}/', $name) || $capitals > 2) {
        $hasError = true; 
} 
```

现在这似乎已经解决了这个问题的 70%。用户现在不能再使用这样的模式。XXxxx, XxXxX, xxxXX, xxx-Xxxx。但是我仍然需要解决一些问题，只要他们使用少于两个字符，并且不将大写字母分组，他们仍然可以创建他们“酷”的名字。因此，如果用户要输入类似 JeSse 样式的名称，它将被接受。

所以我的问题是我将如何处理这个问题的最后一步？我只需要允许用户使用 Jesse、Jesse-James、Jesse James 格式的名字。我如何确保只有他们名字的第一个字母大写，即使他们的名字是双筒的？

你在 python 中看到我会使用 .find() 并且只检测第一个单词的第一个字母并确保它是大写的，直到我们遇到空格或连字符，然后确保空格或连字符后面的下一个字母也是大写吗？但我不知道如何在 PHP 中使用正则表达式来做到这一点。

这是使用正则表达式的正确方法吗？如果是，我将如何处理？还是 PHP 有一个秘密的 .find() 函数，我可以以与 python 类似的方式使用？如果是这样，沿着这条路线走会更合适吗？

抱歉，我讲了这么多细节，似乎很多 numtys 提出了诸如“我有一个正则表达式问题，我需要检测模式”之类的问题，然后期望得到一个对他们有用的答案”。我想提供足够的信息以便将来登陆此页面的人们有用。

非常感谢所有未来的答复。

杰米

PS只是出于兴趣，是否有人也知道如何在PHP中使用非英文字符。我是否需要创建一个我希望检测的字符字符串，或者 php 是否为每个字符（如 html 实体）提供了一个“代码”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:41:01.913

您可能可以在一个正则表达式中完成所有操作：

```
 /^ [A-Z][a-z]+ ( [-\s.] [A-Z][a-z]+ )? $/x 
```

这将允许`Jesse`或`Jesse-James`或`Jesse.James`或`Jesse James`仅。`\s`（如果您不想要这些，请删除点和速度。）

如果您想允许第二部分以小写字母开头，或者确保至少两个小写字母相互跟随，请使用以下`{2,}`代替`+`：

```
 /^ [A-Z][a-z]{2,} ( [-\s.] [A-Z]? [a-z]{2,} )? $/x
                              ^
                          optional now 
```

[`\p{Lu}`对于大写字母](http://www.regular-expressions.info/unicode.html)的 unicodeness 使用。对于小写字母
：`\p{Ll}`

```
 /^ \p{Lu}\p{Ll}+ ( [-\s.] \p{Lu} ? \p{Ll}+ )? $/xu 
```

例如，您可能希望添加另一个可选的允许`Jesse-J.-James`，因此具有单个字母缩写：

```
 ([A-Z] [.] [-\s])? 
```

虽然这可能需要在开始和中间部分重复。

# jquery - 在隐藏的输入字段 jquery 中更改的属性

> ID：14492420
> 
> 赞同：0
> 
> 时间：2013-01-24T01:25:58.310
> 
> 标签：jquery, forms, wordpress

我无法在隐藏的输入字段中更改值属性。我有一个带有以下 HTML 的表单：

```
<input type="hidden" name="caitlinisdabomb" id="caitlinisdabomb" value="no" /> 
```

当我右键单击>查看源时，值没有改变。发送表单时，也会在标题中发送不正确的值。console.log("im human " + document.getElementById("caitlinisdabomb").value) 应该记录为“im human yes”。是什么赋予了？是因为动态生成的表格吗？所有文件都在这里： alluringassets.com/slick-contact-forms.rar

```
console.log("I work");
            function markAsHuman() 
            {
                $('#caitlinisdabomb').val('yes');
                //document.getElementById("caitlinisdabomb").value = 1;
                console.log("im human " + document.getElementById("caitlinisdabomb").value);
            }

            $(".slick-form").on("focus", function()  {
                markAsHuman();
            });

            $(".slick-form").on("click", function()  {
                markAsHuman();
                console.log("you clicked");
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:34:00.540

`.slick-form`元素何时出现？你是用页面加载它还是异步加载它？

即你的例子，不等待DOM准备好即`$(document).ready(function() { //look for elements in the dom structure });`

所以`$(".slick-form")`尽快这样做可能还为时过早......除非您在调试器中的该行上放置一个断点，否则您不会看到问题。

如果您这样做是异步的，那么您可能需要在该 ajax 函数的成功回调上应用 click 事件。

通常喜欢这样的事情：

```
$.ajax({
    type: "GET",
    url: '/blah',
    data: formData,
    success: function (data) {
        // the callback, add click event now that form will exist in DOM
    }
}); 
```

或考虑其他方法来实现它，例如这个例子：

[jquery 函数不适用于异步加载的 dom 元素](https://stackoverflow.com/questions/9352853/jquery-functions-dont-work-on-dom-elements-loaded-asynchromously)

# java - 将源代码隐藏在 .jar 文件中

> ID：14492422
> 
> 赞同：9
> 
> 时间：2013-01-24T01:26:03.003
> 
> 标签：java, encryption, encoding, obfuscation

可以轻松提取`.jar`文件并查看源代码。我想保护源代码不被看到。一种可能的答案是对文件进行密码保护，就像我们对 zip 文件所做的那样。

但是，如果知道密码，则可以很容易地看到源代码。

有什么方法可以隐藏源代码并且仍然可以运行吗？类似于 a`.exe`在 Windows 中所做的事情。这应该在 Windows 和 Linux 环境中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:30:06.633

看看[ProGuard](http://proguard.sourceforge.net/)，它是一个流行的 java 混淆器。至于将您的 java 程序打包为 windows 可执行文件，这篇文章可能会对您有所帮助：[如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T01:32:09.170

您要搜索的是“java 混淆”。有很多工具可以帮助解决这个问题，但如果想要你的代码的人真的想要它，那将是一场失败的战斗。如果这是一个严重的问题，您应该用 C++ 编写。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T03:34:11.857

> 可以轻松提取 .jar 文件并查看源代码。

严格来说，这是不正确的。除非您实际上已将源代码文件包含在 JAR 中，否则有人看不到原始源代码。但他们可以（通常）将 JAR 文件中的“.class”文件反编译为*功能上与原始源代码等效*的 Java 源代码。

正如其他答案所述，您可以让试图对您的代码进行逆向工程的人更难；例如，通过使用混淆器或自定义类加载器来解密以加密形式存储在 JAR 文件中的代码。但是，您无能为力，不足以阻止一个坚定的黑客打败您的措施。没有什么。

保护您的代码免受逆向工程的唯一实用方法是不发布它。或者使用软件许可或其他合法手段来达到你的目的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T01:39:16.653

如果您打算简单地阻止普通观众，那么 Java 的许多代码混淆工具中的任何一个都可能会有所帮助。它会使字节码混乱到足以使您的算法不那么明显。

另一方面，如果您需要“绝对”保护，那么任何加密/混淆工具都是无用的 - 如果您的计算机可以运行它，那么一个坚定且知识渊博的攻击者*最终*将能够弄清楚您的代码是如何工作的。

几个可能的解决方案：

*   使用客户端/服务器架构在您拥有的计算机上运行专有部分，这样您就不必在客户端应用程序中包含代码中更有趣的部分。当然，由于各种原因，这种解决方案并不总是可行的。

*   聘请几位专门研究知识产权问题的律师并为您的算法*申请专利。*在我看来，这远比试图在非技术问题上强制采用技术解决方案的替代方案......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T07:35:48.750

搜索“java 混淆”。有很多工具可以帮助解决这个问题，但如果有人真的一心想检索源代码，你就无法阻止他。要实现与安全相关的内容，您应该用 C++ 编写代码，然后创建动态库（Windows 为 .dll，Linux 为 .so）并使用 java jni 来使用它们。

在 Windows 上，您可以使用 mingw 来编译代码。

看看这个 [https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html](https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html)

# django - 如何和谐地编写 django webapps？

> ID：14492426
> 
> 赞同：0
> 
> 时间：2013-01-24T01:26:18.387
> 
> 标签：django, django-models, twitter-bootstrap, django-templates, django-views

Django 的理念是 webapps 是可重用的。但是如何实现不同 webapp 之间的模板和谐呢？

这是一个假设的示例：我想重新使用 webapp 1（例如[django_openid](https://github.com/simonw/django-openid/tree/master/django_openid/templates/django_openid)）来启用 OpenID 登录；我想重用 webapp 2（例如，[django 邀请应用程序](https://github.com/eldarion/kaleo/tree/master/kaleo)）来邀请客户；我想编写自己的应用程序（MTV）进行统计

但他们的模板通常看起来不属于单个项目。如何以最少的干扰工作重用现有工作（上述假设示例中的 Web 应用程序 1 和 Web 应用程序 2）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:39:09.383

我假设“侵入式”是指在可重用应用程序中编辑文件。

在完全不打扰的情况下，您应该能够覆盖可重用应用程序中的任何模板，方法是将它们放在项目级模板目录中，或者通过在您自己的应用程序中提供具有匹配名称的模板。

Django 模板加载是完全可配置的，但默认情况下，它会首先在设置中命名为 的目录中查找`TEMPLATE_DIRS`，然后`templates`在每个已安装应用程序的目录中，按照它们出现的顺序查找。通过将您的应用程序放在 INSTALLED_APPS 中的 openid 或邀请之前，您的自定义模板将被加载而不是提供的模板。

在某些情况下，我为一个项目创建了一个“应用程序”，它实际上只是一个空的 models.py 和一组模板。然后我有一个地方来存储站点基础模板，以及来自其他应用程序的所有覆盖模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:38:55.360

与`django invitation app`大多数可重复使用的应用程序一样，它具有包含[使用](http://kaleo.readthedocs.org/en/latest/usage.html)部分的文档。这将解释如何在项目中重用该应用程序。

`django_openid`根据自述文件似乎“尚未准备好”，因此您需要深入研究代码才能使用它。

通常，您需要转到您尝试重用的应用程序的文档并查找使用/实现部分。

# c# - 子域的重写规则未触发

> ID：14492429
> 
> 赞同：2
> 
> 时间：2013-01-24T01:27:04.657
> 
> 标签：c#, .net, url-rewriting, asp.net-mvc-4

（我浏览了堆栈上的大量链接以及 Microsoft [http://forums.iis.net/t/1161629.aspx/1](http://forums.iis.net/t/1161629.aspx/1) 上的此类文章该解决方案根本不起作用。在标记为“重复”之前请记住这一点。我在询问之前做了功课）

我不确定这是否与 MVC4 有关，但这是我的规则：

```
<rewrite>
  <rules>
    <rule name="Apply Sub-Domain as Query String Argument" stopProcessing="false">
      <match url="^(.+)$" />
      <conditions trackAllCaptures="false">
                    <add input="{HTTP_HOST}" pattern="^(^local[a-z0-9]+)\.domain\.com(.*)$" />
      </conditions>
      <action type="Rewrite" url="https://local.domain.com{C:2}?cobrand={C:1}" logRewrittenUrl="false" />
    </rule>
  </rules>
</rewrite> 
```

我希望这是一个将`https://subdomain.domain.com`其发送到 MVC4的 url，`https://local.domain.com?cobrand=subdomain`但它没有触发。

在我的 MVC 应用程序中，我有一个定义为：

```
<div>
    Cobrand = @HttpContext.Current.Request.QueryString["cobrand"]
</div>
<div>
    Requested URL = @HttpContext.Current.Request.Url
</div>
<div>
    Path = @HttpContext.Current.Request.Path
</div> 
```

使用此请求的 url [https://localdemo1.domain.com](https://localdemo1.domain.com)的以下输出：

```
<div>
    Cobrand = 
</div>
<div>
    Requested URL = https://localdemo1.domain.com
</div>
<div>
    Path = /
</div> 
```

我想要的输出是：

```
<div>
    Cobrand = localdemo1
</div>
<div>
    Requested URL = https://local.domain.com?cobrand=localdemo1
</div>
<div>
    Path = /
</div> 
```

关于站点设置的说明：

> IIS 站点具有以下绑定：
> 
> HTTP::
> 
> local.domain.com
> 
> localdemo1.domain.com
> 
> localdemo2.domain.com

HTTPS::443（无主机配置，无法在 443 上配置主机，但已配置为允许 SSL）

PS：我在没有 HTTPS 的情况下尝试了这个，它产生了相同的结果，因为根本没有触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:21:16.873

这对我有用：

```
<rewrite>
  <rules>
    <rule name="Apply Sub-Domain as Query String Argument" stopProcessing="false">
      <match url="^.*$" />
      <conditions trackAllCaptures="false">
                    <add input="{HTTP_HOST}" pattern="^(^local[a-z0-9]+)\.domain\.com(.*)$" />
      </conditions>
      <action type="Redirect" url="https://local.domain.com{R:0}?cobrand={C:1}" />
    </rule>
  </rules>
</rewrite> 
```

请注意，`match url`as 已更改（接受空值）并且`type="Redirect"`已替换`type="Rewrite"`.

`{C:2}`在这种情况下不起作用（我无法告诉你为什么......）但你可以使用它`{R:0}`。

# url - 用于 XSS 预防的 URI 协议白名单？

> ID：14492430
> 
> 赞同：2
> 
> 时间：2013-01-24T01:27:14.710
> 
> 标签：url, protocols, xss, href

如果我允许用​​户将 URL 发布到页面，然后我`<a>`使用该 URL 创建一个标签，我必须首先检查它是否安全。

我知道该`javascript:`协议是不安全的，因为它会从用户的 URL 运行代码。

我知道，`http:`协议`https:`没问题。

我也知道有更多的协议，比如`ftp:`，那么，有没有我可以复制的白名单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:13:35.347

HTML 规范有[方案的白名单，`registerProtocolHandler()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#whitelisted-scheme)这可能是一个起点。

# php - iCal Parser 显示事件数

> ID：14492433
> 
> 赞同：-1
> 
> 时间：2013-01-24T01:27:32.580
> 
> 标签：php, xml-parsing, icalendar

我已经彻底研究过，我找不到解决方案。我是 PHP 新手，并且通过该语言尽可能多地学习。我将不胜感激任何帮助！

我正在使用 iCal 解析器并试图限制它，因此它一次只返回 15 个事件。我怎样才能做到这一点？

```
 <?php
    /* iCal Parser - Some PHP functions to parse an iCal calendar into a usable PHP object.
     *               Also convert the object into pretty HTML.
     *
     * Copyright (C) 2006 Adam Wolfe Gordon
     *
     * This program is free software; you can redistribute it and/or
     * modify it under the terms of the GNU General Public License
     * as published by the Free Software Foundation; either version 2
     * of the License, or (at your option) any later version.
     *
     * This program is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU General Public License for more details.
     *
     * You should have received a copy of the GNU General Public License
     * along with this program; if not, write to the Free Software
     * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
     */

     // Blatantly stolen from http://ca3.php.net/manual/en/function.xml-parse-into-struct.php
     // Convert xml into a nice object
    class XmlElement {
      var $name;
      var $attributes;
      var $content;
      var $children;
     };

    function xml_to_object($xml) {
    $parser = xml_parser_create();
    xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
    xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1);
    xml_parse_into_struct($parser, $xml, $tags);
    xml_parser_free($parser);

    $elements = array();  // the currently filling [child] XmlElement array
    $stack = array();
      foreach ($tags as $tag) {
        $index = count($elements);
        if ($tag['type'] == "complete" || $tag['type'] == "open") {
          $elements[$index] = new XmlElement;
          $elements[$index]->name = $tag['tag'];
          $elements[$index]->attributes = $tag['attributes'];
          $elements[$index]->content = $tag['value'];
          if ($tag['type'] == "open") {  // push
        $elements[$index]->children = array();
        $stack[count($stack)] = &$elements;
        $elements = &$elements[$index]->children;
          }
        }
        if ($tag['type'] == "close") {  // pop
      $elements = &$stack[count($stack) - 1];
      unset($stack[count($stack) - 1]);
        }
      }
      return $elements[0];  // the single top-level element
    }

    // Not stolen
    // Fetch text from an iCal URL and convert it into xml   $myfile = file_get_contents($URL);
    function ical2xml($URL) {
      $myfile = file_get_contents($URL);
      $myfile = str_replace("\n ", "", $myfile);
      $myfile = str_replace("&", " and ", $myfile);
      $mylines = split("\n", $myfile);

      $xml = "";    
      foreach($mylines as $line) {
        if($line == "")
          continue;

    list($key,$val) = split(":", $line);
    $key = trim($key, "\r\n");
    $val = trim($val, "\r\n");
    $val = str_replace("\n", "", $val);
    $val = str_replace("\r", "", $val);

    $attribs = split(";", $key);
    $key = $attribs[0];
    $attribs = array_slice($attribs, 1);

    $myattribs = " ";
    foreach($attribs as $attrib) {
      list($att, $attval) = split("=", $attrib);
      $myattribs .= "$att=\"$attval\" ";
    }
    $myattribs = rtrim($myattribs);

    // BEGIN and END keywords
    if($key == 'BEGIN') {
      $xml .= "<$val$myattribs>\n";
    } else if($key == 'END') {
      $xml .= "</$val>\n";
    } else {
      $xml .= "<$key$myattribs>$val</$key>\n";
    }
     }

      return $xml;
    }

    // Event class
    class event {
      var $starttime;
      var $endtime;
      var $allday;
      var $rrulefreq;
      var $rruledays;
      var $rruleuntil;
      var $description;
      var $location;
      var $summary;
    };

    // Calendar class
    class calendar {
      var $name;
      var $timezone;
      var $description;
      var $events = array();
    };

    // Timezone class
    class timezone {
      var $namestd;
      var $namedst;
      var $offsetstd;
      var $offsetdst;
    };

    // Convert a time in iCal's ugly format to a unix timestamp
    function ical_time_to_timestamp($time) {
      $hour = substr($time, 9, 2);
      if($hour == "")
        $hour = 0;
      $min = substr($time, 11, 2);
      if($min == "")
        $min = 0;
      $sec =  substr($time, 13, 2);
      if($sec == "")
        $sec = 0;
      $mon = substr($time, 4, 2);
      $day = substr($time, 6, 2);
      $year = substr($time, 0, 4);
      return mktime($hour, $min, $sec, $mon, $day, $year);
    }

    // The day the world ends (for Unix users)
    $endoftime = ical_time_to_timestamp("20380118T000000");

    // Event comparison function for sorting
    function cmp($a, $b) {
      if(!(is_object($a) && is_object($b)))
    return 0;
  if($a->starttime == $b->starttime)
    return 0;
  return ($a->starttime < $b->starttime) ? -1 : 1;
}

// Convert XML into a calendar object
function xml_to_calendar($xml) {
  $mycal = new calendar;
  $eventcount = 0;

  $thecal = xml_to_object($xml);

  foreach($thecal->children as $child) {
    switch($child->name) {
    case "X-WR-CALNAME":
      $mycal->name = $child->content;
      break;
    case "X-WR-CALDESC":
      $mycal->description = $child->content;
      break;
    case "VTIMEZONE":
      $mycal->timezone = new timezone;
      foreach($child->children as $data) {
    switch($data->name) {
    case "STANDARD":
      foreach($data->children as $sec) {
        switch($sec->name) {
        case "TZNAME":
          $mycal->timezone->namestd = $sec->content;
          break;
        case "TZOFFSETTO":
          $mycal->timezone->offsetstd = $sec->content;
          break;
        default:
          break;
        }
      }
      break;
    case "DAYLIGHT":
      foreach($data->children as $sec) {
        switch($sec->name) {
        case "TZNAME":
          $mycal->timezone->namedst = $sec->content;
          break;
        case "TZOFFSETTO":
          $mycal->timezone->offsetdst = $sec->content;
          break;
        default:
          break;
        }
      }
      break;
    default:
      break;
    }
      }
      break;
    case "VEVENT":
      $i = $eventcount;
      $mycal->events[$i] = new event;
      $mycal->events[$i]->allday = FALSE;
      $eventcount++;
      foreach($child->children as $data) {
    switch($data->name) {
    case "DTSTART":
      if(substr($data->content, 9, 6) == "") {
        $mycal->events[$i]->allday = TRUE;
        $mycal->events[$i]->starttime = ical_time_to_timestamp($data->content . "T000000");
      } else
        $mycal->events[$i]->starttime = ical_time_to_timestamp($data->content);
      break;
    case "DTEND":
      if(substr($data->content, 9, 6) == "") {
        $mycal->events[$i]->allday = TRUE;
        $mycal->events[$i]->endtime = ical_time_to_timestamp($data->content . "T000000");
      } else
        $mycal->events[$i]->endtime = ical_time_to_timestamp($data->content);
      break;
    case "DURATION":
      $mycal->events[$i]->endtime = $mycal->events[$i]->starttime + substr($data->content, 2, strlen($data->content) - 1);
      break;
    case "RRULE":
      $myrrule = split(";", $data->content);
      // Unless otherwise specified, repeating events go until the end of time
      $mycal->events[$i]->rruleuntil = $endoftime;
      foreach($myrrule as $part) {
        list($a, $b) = split("=", $part);
        switch($a) {
        case "FREQ":
          $mycal->events[$i]->rrulefreq = $b;
          break;
        case "BYDAY":
          $mycal->events[$i]->rruledays = $b;
          break;
        case "UNTIL":
          $mycal->events[$i]->rruleuntil = ical_time_to_timestamp($b);
          break;
        default:
          break;
        }
      }
      break;
    case "DESCRIPTION":
      $mycal->events[$i]->description = $data->content;
      break;
    case "LOCATION":
      $mycal->events[$i]->location = $data->content;
      break;
    case "SUMMARY":
      $mycal->events[$i]->summary = $data->content;
      break;
    default:
      break;
    }
      }
      break;
    default:
      break;
    }
  }

  // Sort events by start date/time
  usort($mycal->events, "cmp");

  return $mycal;
}

// Take in an iCal object and spit out pretty HTML.
function objToHTML($thecal) {
  // Days of the week
  $shortdays = array(   "MO"=>"Mon",
            "TU"=>"Tue",
            "WE"=>"Wed",
            "TH"=>"Thu",
            "FR"=>"Fri",
            "SA"=>"Sat",
            "SU"=>"Sun"
            );

  // Global variables from the config file
  global $timeformat;
  global $dateformat;
  global $noyearformat;
  global $nodayformat;
  global $xthday;

  $nc = "<table>";
foreach($thecal->events as $event) {

if($event->starttime > time() || ($event->rrulefreq && (time() < $event->rruleuntil || $event->rruleuntil == $endoftime))) {

      if($event->rrulefreq == "WEEKLY") {
    $days = str_replace(",", ", ", $event->rruledays);
    $repdays = split(",", $event->rruledays);
    foreach($repdays as $repday) {
      $days = str_replace($repday, $shortdays[$repday], $days);
    }

    $prefix = "Every week on $shortdays";

    if($event->starttime > time()) {
      if($event->allday == FALSE) {
        $fromto = " starting " . date($dateformat, $event->starttime) . " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = " all day starting " . date($dateformat, $event->starttime);
      }
    } else {
      if($event->allday == FALSE) {
        $fromto = " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = ", all day";
      }
    }

    if($event->rruleuntil != $endoftime) {
      $until = " until " . date($dateformat, $event->rruleuntil);
    } else {
      $until = "";
    }
      } else if($event->rrulefreq == "MONTHLY") {
    $prefix = "The " . date($xthday, $event->starttime) . " day of each month";

    if($event->starttime > time()) {
      if($event->allday == FALSE) {
        $fromto = " starting " . date($nodayformat, $event->starttime) . " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = " starting " . date($nodayformat, $event->starttime);
      }
    } else {
      if($event->allday == FALSE) {
        $fromto = " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = ", all day";
      }
    }

    if($event->rruleuntil != $endoftime) {
      $until = " until " . date($nodayformat, $event->rruleuntil);
    } else {
      $until = "";
    }
      } else if($event->rrulefreq == "DAILY") {
    $prefix = "Every day";

    if($event->starttime > time()) {
      if($event->allday == FALSE) {
        $fromto = " starting " . date($dateformat, $event->starttime) . " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = " all day starting " . date($dateformat, $event->starttime);
      }
    } else {
      if($event->allday == FALSE) {
        $fromto = " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
      } else {
        $fromto = " all day";
      }
    }

    if($event->rruleuntil != $endoftime) {
      $until = " until " . date($dateformat, $event->rruleuntil);
    } else {
      $until = "";
    }
      } else if($event->rrulefreq == "YEARLY") {
    $prefix = date($noyearformat, $event->starttime);

    if($event->allday == FALSE) {
      $fromto = " from " . date($timeformat, $event->starttime) . " to " . date($timeformat, $event->endtime);
    } else {
      $fromto = ", all day";
    }

    if($event->rruleuntil != $endoftime) {
      $until = " until " . date("Y", $event->rruleuntil);
    } else {
      $until = "";
    }
      } else {
    $prefix = date($dateformat, $event->starttime);

    $until = "";
      }

      $nc .= "<tr><td><font size='1' face='Verdana'>" . $prefix . $fromto . $until . "</font></td>\n";

      $nc .= "<td><font size='1' face='Verdana'>" . $event->summary . "</font></td></tr>\n";
    }
  }
  $nc .= "</table>";

  return $nc;
}
function endElement($parser, $event) {
global $prefix, $event, $fromto, $until, $description;
static $counter = 0;
if ($event == "ITEM" && !(++$counter > 15)) {
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:22:47.720

您是指 15 个事件（在 icalendar 文件中以 BEGIN:VEVENT 开头并以 END:VEVENT 结尾）还是指 15 个事件实例（每个实例被定义为 VEVENT 根据重复规则发生的日期（或者只是 DTSTART / DTEND，以防不存在 RRULE）。

如果你只想要 15 个事件，你只需要修改 function `objToHTML($thecal)`，然后`if($event->starttime > time() || ($event->rrulefreq && (time() < $event->rruleuntil || $event->rruleuntil == $endoftime))) {`计数直到你达到 15

如果您想要 15 个实例，则需要编写一个枚举器来`$prefix . $fromto . $until`用实际实例日期替换字符串计算，然后计算它们直到达到 15 个。

# c++ - 超越-O3/-Ofast的G++优化

> ID：14492436
> 
> 赞同：87
> 
> 时间：2013-01-24T01:27:41.707
> 
> 标签：c++, g++, compiler-optimization

**问题**

我们有一个用于模拟任务的中型程序，我们需要对其进行优化。我们已经尽最大努力优化了源代码以达到我们编程技能的极限，包括使用[Gprof](http://en.wikipedia.org/wiki/Gprof)和[Valgrind](http://en.wikipedia.org/wiki/Valgrind)进行分析。

最终完成后，我们可能希望在多个系统上运行该程序几个月。因此，我们非常有兴趣将优化推向极限。

所有系统都将在相对较新的硬件（Intel i5 或 i7）上运行 Debian/Linux。

**问题**

*使用最新版本的 g++，超越 -O3/-Ofast 的优化选项有哪些？*

我们也对代价高昂的小优化感兴趣，从长远来看，这将得到回报。

**我们现在使用的**

现在我们使用以下 g++ 优化选项：

*   `-Ofast`：最高的“标准”优化级别。包含`-ffast-math`在我们的计算中没有引起任何问题，所以我们决定去尝试它，尽管不符合标准。
*   `-march=native`：启用所有 CPU 特定指令的使用。
*   `-flto`允许跨不同编译单元的链接时间优化。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2016-07-21T18:33:58.950

大多数答案都建议了替代解决方案，例如不同的编译器或外部库，这很可能会带来大量的重写或集成工作。我将尝试坚持问题的要求，并关注单独使用 GCC 可以做什么，通过激活编译器标志或对代码进行最小的更改，按照 OP 的要求。这不是“您必须这样做”的答案，而是更多对我来说效果很好的 GCC 调整集合，如果它们与您的特定上下文相关，您可以尝试一下。

* * *

**关于原始问题的警告**

在进入细节之前，关于这个问题的一些警告，通常是为了那些会来的人，阅读这个问题并说“OP 正在优化 O3，我应该使用与他相同的标志！”。

*   `-march=native`允许使用**特定于给定 CPU 架构的指令**，而这些指令不一定在不同的架构上可用。如果在具有不同 CPU 的系统上运行，该程序可能根本无法运行，或者速度明显较慢（因为这也启用`mtune=native`了 ），因此如果您决定使用它，请注意这一点。更多信息[在这里](https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html)。
*   `-Ofast`，正如您所说，启用了一些**不符合标准**的优化，因此也应谨慎使用。更多信息[在这里](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)。

**要试用的其他 GCC 标志**

[此处](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)列出了不同标志的详细信息。

*   `-Ofast`启用`-ffast-math`，进而启用`-fno-math-errno`、`-funsafe-math-optimizations`、`-ffinite-math-only`、`-fno-rounding-math`和。您可以通过有选择地添加一些**额外的标志**（例如,和其他标志）来进一步**优化浮点计算。**这些不包括在内，并且可以在计算上提供一些额外的性能提升，但您必须检查它们是否真的有利于您并且不要破坏任何计算。`-fno-signaling-nans``-fcx-limited-range`****`-fno-signed-zeros``-fno-trapping-math``-Ofast`****
*****   GCC 还具有大量**其他优化标志**，这些标志未由任何“-O”选项启用。它们被列为“可能产生损坏代码的实验性选项”，因此再次强调，应谨慎使用它们，并通过测试正确性和基准测试来检查它们的效果。尽管如此，我确实经常使用`-frename-registers`，这个选项从来没有对我产生不想要的结果，并且往往会显着提高性能（即可以在基准测试时测量）。这是一种非常依赖于您的处理器的标志类型。`-funroll-loops`有时也会给出很好的结果（并且也暗示`-frename-registers`），但这取决于您的实际代码。****

 ******PGO**

GCC 具有**Profile-Guided 优化**功能。没有很多关于它的精确 GCC 文档，但是让它运行起来非常简单。

*   首先用`-fprofile-generate`.
*   让程序运行（执行时间会明显变慢，因为代码还会将配置文件信息生成到 .gcda 文件中）。
*   重新编译程序`-fprofile-use`。如果您的应用程序是多线程的，还要添加`-fprofile-correction`标志。

带有 GCC 的 PGO 可以提供惊人的结果并真正显着提高性能（我看到我最近从事的一个项目的速度提高了 15-20%）。显然，这里的问题是拥有一些**足以代表**您的应用程序执行的数据，这些数据并不总是可用或容易获得。

**GCC的并行模式**

GCC 有一个**Parallel Mode**，它是在 GCC 4.2 编译器出现的时候首次发布的。

基本上，它为您提供**了 C++ 标准库中许多算法的并行实现**。要全局启用它们，您只需将`-fopenmp`和`-D_GLIBCXX_PARALLEL`标志添加到编译器。您还可以在需要时选择性地启用每种算法，但这需要一些小的代码更改。

有关此并行模式的所有信息都可以在[此处](https://gcc.gnu.org/onlinedocs/libstdc++/manual/parallel_mode.html)找到。

如果您经常在大型数据结构上使用这些算法，并且有许多可用的硬件线程上下文，那么这些并行实现可以带来巨大的性能提升。到目前为止，我只使用了并行实现`sort`，但是为了给出一个粗略的想法，我设法在我的一个应用程序中将排序时间从 14 秒减少到 4 秒（测试环境：具有自定义比较器功能的 1 亿个对象的向量和 8 核机器）。

**额外技巧**

与前几节不同，这部分确实**需要对代码进行一些小改动**。它们也是 GCC 特定的（其中一些也适用于 Clang），因此应该使用编译时宏来保持代码在其他编译器上的可移植性。本节包含一些更高级的技术，如果您对正在发生的事情没有一定的汇编级理解，则不应使用。另请注意，处理器和编译器如今非常智能，因此从此处描述的功能中获得任何明显的好处可能会很棘手。

*   [GCC 内建函数，在此处](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)列出。诸如此类的结构`__builtin_expect`可以通过向编译器提供**分支预测**信息来帮助编译器进行更好的优化。其他结构，例如在`__builtin_prefetch`数据被访问之前将数据带入缓存，并有助于减少**缓存未命中**。
*   [功能属性，在此处](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html)列出。特别是，您应该查看`hot`and`cold`属性；前者将向编译器指示该函数是程序的**热点**，并更积极地优化该函数并将其放置在文本部分的特殊小节中，以获得更好的局部性；后者将优化函数的大小并将其放置在文本部分的另一个特殊小节中。

* * *

我希望这个答案对某些开发人员有用，我很乐意考虑任何编辑或建议。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-24T02:16:40.630

> 相对较新的硬件（Intel i5 或 i7）

为什么不投资购买一份[英特尔编译器](http://software.intel.com/en-us/intel-composer-xe/)和高性能库？它在优化方面可以大大优于 GCC，通常从 10% 到 30% 甚至更多，对于繁重的数字处理程序甚至更是如此。英特尔还为高性能数字运算（并行）应用程序提供了许多扩展和库，如果您可以负担得起将其集成到您的代码中的话。如果它最终为您节省数月的运行时间，它可能会带来巨大的回报。

> 我们已经尽最大努力优化源代码到我们编程技能的极限

根据我的经验，与宏观优化（简化代码结构）相比，您通常在分析器的帮助下进行的那种微观和纳米优化往往在时间投资上的回报很差，最重要的是并且经常被忽视的内存访问优化（例如，引用的局部性、按顺序遍历、最小化间接性、使用缓存未命中等）。后者通常涉及设计内存结构以更好地反映内存的使用方式（遍历）。有时它可以像切换容器类型并从中获得巨大的性能提升一样简单。通常，使用分析器，您会迷失在逐条指令优化的细节中，并且内存布局问题不会出现，并且通常会在忘记查看大图时被忽略。它'

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-24T01:43:55.530

嗯，那么您可以尝试的最后一件事：[ACOVEA](https://github.com/Acovea/libacovea)项目：通过进化算法分析编译器优化——从描述中可以明显看出，它尝试了一种遗传算法来为您的项目选择最佳编译器选项（随时进行编译并检查时间，给算法一个反馈:)——但结果可能令人印象深刻！:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-24T10:17:28.363

如果您负担得起，请尝试[VTune](http://software.intel.com/en-us/intel-vtune-amplifier-xe)。它提供了比简单采样更多的信息（据我所知，由 gprof 提供）。你可以试试[代码分析师。](http://developer.amd.com/tools/heterogeneous-computing/amd-codeanalyst-performance-analyzer/)后者是一款不错的免费软件，但它可能无法（或根本无法）与 Intel CPU 一起正常工作。

配备此类工具后，您可以检查各种措施，例如缓存利用率（以及基本上是内存布局），如果充分利用这些措施，可以极大地提高效率。

当您确定您的算法和结构是最优的时，您绝对应该在 i5 和 i7 上使用多核。换句话说，尝试使用不同的并行编程算法/模式，看看是否可以加快速度。

当您拥有真正的并行数据（在其上执行类似/相同操作的类似数组的结构）时，您应该尝试使用 OpenCL 和[SIMD 指令](http://softpixel.com/~cwright/programming/simd/)（更易于设置）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-29T10:48:25.347

关于当前选择的答案的一些说明（我还没有足够的声誉点来发表评论）：

答案说：

> `-fassociative-math`, `-freciprocal-math`,`-fno-signed-zeros`和`-fno-trapping-math`. 这些不包括在内，`-Ofast`并且可以在计算上提供一些额外的性能提升

发布答案时也许这是真的，但是[GCC 文档](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)说所有这些都由 启用，由`-funsafe-math-optimizations`启用，由`-ffast-math`启用`-Ofast`。这可以使用命令进行检查，该命令`gcc -c -Q -Ofast --help=optimizer`显示启用了哪些优化`-Ofast`，并确认所有这些都已启用。

答案还说：

> 任何“-O”选项都未启用的其他优化标志...`-frename-registers`

同样，上面的命令显示，至少在我的 GCC 5.4.0 中，`-frename-registers`默认情况下启用了`-Ofast`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T03:25:06.087

没有更多细节很难回答：

*   什么类型的数字运算？
*   你在使用什么库？
*   什么程度的并行化？

你能写下你的代码中花费时间最长的部分吗？（通常是一个紧密的循环）

如果您受 CPU 限制，答案将与受 IO 限制不同。

再次，请提供更多详细信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-16T22:01:45.000

我建议查看构成繁重工作的操作类型，并寻找优化的库。对于常见问题（主要是数学），有很多快速、汇编优化、SIMD 矢量化库。重新发明轮子通常很诱人，但如果现有的解决方案可以满足您的需求，通常不值得付出努力。由于您没有说明它是哪种模拟，我只能提供一些示例。

[http://www.yeppp.info/](http://www.yeppp.info/)

[http://eigen.tuxfamily.org/index.php?title=Main_Page](http://eigen.tuxfamily.org/index.php?title=Main_Page)

[https://github.com/xianyi/OpenBLAS](https://github.com/xianyi/OpenBLAS)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-07-11T10:07:42.330

使用 gcc intel 打开 / 实现 -fno-gcse（在 gfortran 上运行良好）和 -fno-guess-branch-prbability（在 gfortran 中默认）****

# cakephp - 如何在 CakePHP 中强制刷新图像和 css 文件？

> ID：14492444
> 
> 赞同：9
> 
> 时间：2013-01-24T01:28:31.283
> 
> 标签：cakephp

我有以下问题。

我在 CakePHP 中编码，我是新手。我经常需要更改网站上的一些图像或 css 文件。在网站上，我总是看到旧内容，除非我手动按键盘上的“F5”。我必须在使用该网站的每个工作场所都这样做。

这很烦人，尤其是因为我不知道在哪里可以找到解决方案。我删除了 tmp 文件和 cookie。没有任何帮助，我不知道该如何解决。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T04:09:19.743

对于 \webroot 下的任何内容，请参见`Asset.timestamp`core.php 中的设置：

```
/**
 * Apply timestamps with the last modified time to static assets (js, css, images).
 * Will append a querystring parameter containing the time the file was modified. This is
 * useful for invalidating browser caches.
 *
 * Set to `true` to apply timestamps when debug > 0\. Set to 'force' to always enable
 * timestamping regardless of debug value.
 */
    Configure::write('Asset.timestamp', true); 
```

为此，您必须使用 Cake 助手来创建资产（例如`$this->Html->image()`,`$this->Html->css()`等）

# json - 无法从启用 wcf json 的服务向客户端返回嵌套类型

> ID：14492447
> 
> 赞同：1
> 
> 时间：2013-01-24T01:28:58.230
> 
> 标签：json, wcf

我无法从 wcf json 服务返回嵌套类型。当我从 RestClient (firefox) 执行 http get 时，服务操作会执行两次，并且响应正文为空。从 chrome 中的 url 调用相同的服务返回 No data received。错误 324 ERR_EMPTY_RESPONSE

这是代码

[WebInvoke(Method=”GET”, ResponseFormat=WebMessageFormat.Json, RequestFormat= WebMessageFormat.Json, UriTemplate=”GetProducts/storedId”] public ServiceResponse>> GetAllProducts(string storeId) { // 从数据库中获取产品列表的代码.}

[DataContract] public class Product { [DataMember] public string Name {get; 放;}

[DataMember] 公共 IList ProductDetails {get; 放;} }

有人可以建议出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:24:41.577

我让 WCF 使用 Json.NET ( [http://json.codeplex.com/](http://json.codeplex.com/) ) 在 .NET 对象和 JSON 之间进行转换

# haskell - Haskell 中的类型问题

> ID：14492449
> 
> 赞同：1
> 
> 时间：2013-01-24T01:29:09.347
> 
> 标签：haskell, types

我已经为此苦苦挣扎了半个多小时。我知道这很简单，但是我在 Haskell 中的类型很糟糕，即使在阅读了与我的问题非常相似的公认答案之后，我仍然无法解决我的问题 - 更不用说理解它了！

编码：

```
p108 = [filter (\[a,b] -> a>0 && b>0) (diophantinepairs n) | n <- [1..]]

diophantinepairs :: Integer -> [[Integer]]
diophantinepairs n = nub$map sort b
    where
        a = divisors n
        b = [[(n-d), n - (n^2)/d] | d <- a] 
```

错误 ：

> ```
> 249:39:
>     No instance for (Fractional Integer)
>       arising from a use of `/'
>     Possible fix: add an instance declaration for (Fractional Integer)
>     In the second argument of `(-)', namely `(n ^ 2) / d'
>     In the expression: n - (n ^ 2) / d
>     In the expression: [(n - d), n - (n ^ 2) / d] 
> ```

谢谢，山姆。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T01:32:10.013

以下是您阅读此类错误的方式：

```
No instance for (Fractional Integer) 
```

翻译：您的程序有一个，但您正在使用该类`Integer`的方法之一。`Fractional`

```
arising from a use of `/' 
```

翻译：所涉及的方法是`/`，它是`Fractional`类的一部分。 `Integer`不是`Fractional`，因此您不能应用于`/`整数。

解决方案：使用`div`or`quot`代替。

我可以`ghci`很容易地得到同样的错误：

```
Prelude> (1 :: Integer) / (2 :: Integer)

<interactive>:2:16:
    No instance for (Fractional Integer)
      arising from a use of `/'
    Possible fix: add an instance declaration for (Fractional Integer)
    In the expression: (1 :: Integer) / (2 :: Integer)
    In an equation for `it': it = (1 :: Integer) / (2 :: Integer) 
```

替代修复：使用`Fractional`诸如 a 之类的类型`Rational`而不是`Integer`：

```
Prelude> (1 :: Integer) `div` (2 :: Integer)
0
Prelude> :m + Data.Ratio
Prelude Data.Ratio> (1 :: Rational) / (2 :: Rational)
1 % 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T01:34:38.323

与某些语言不同，在`/`处理整数时不会重载。这是有道理的：整数“除法”与理性除法不同。在哈斯克尔

```
(/) :: Fractional a => a -> a -> a 
```

但正如我所说，这`Integer`不是`Fractional`你得到的原因

```
No instance for (Fractional Integer) 
```

相反，您可以使用执行整数除法的`quot`or函数。`div`

# javascript - 取消 getUserMedia 请求

> ID：14492450
> 
> 赞同：9
> 
> 时间：2013-01-24T01:29:12.010
> 
> 标签：javascript, html, getusermedia

我的应用程序中有一个模式对话框，用于`getUserMedia`显示来自用户相机的视频。这会导致出现“拒绝/允许”栏。假设用户在单击“拒绝”或“允许”之前关闭了对话框。即使使用它的元素已经消失，该栏仍然存在。

有没有办法通知浏览器它可以隐藏权限请求，即使用户从未与之交互过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-08T00:02:02.390

当用户关闭您的对话框时，重新加载页面以清除权限请求：

```
 location.reload(); 
```

我已经在 Firefox 和 Chrome 41 (Canary) 中对此进行了测试，它在那里工作。

警告：Chrome 39（撰写本文时的当前版本）似乎有一个错误，它不能很好地工作。我第一次导航到该页面时它不起作用，但是在手动刷新页面一次后，它开始工作。

我意识到这个答案可能不会立即有用，但是一旦 Chrome 41 发布，它应该可以工作。

目前无法在不重新加载页面的情况下清除权限提示。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-01-02T21:28:45.110

我想你想要这样的东西：

```
 $("body").on('click', "#stop_button", function(e) {
        e.preventDefault();
        mediaStream.stop();
     }); 
```

mediaStream 是我调用 getUserMedia 时定义的全局变量

```
 navigator.getUserMedia(
            {
              video: true,
              audio: false
            },
            function(stream) {
              if (navigator.mozGetUserMedia) {
                video.mozSrcObject = stream;
              } else {
                var url = window.URL || window.webkitURL;
                video.src = url ? url.createObjectURL(stream) : stream;
              }
              mediaStream = stream;
              video.play();
            },
            function(error) {
              console.log("ERROR: " + error);
            }
        ); 
```

因此，在您的示例中，当对话框关闭时，您将在媒体流上调用 stop() - 您必须为此创建一个事件处理程序。

[查看getUserMedia](http://apprentice.craic.com/tutorials/35)上的本教程以获取完整的示例和现场演示。

# c++ - how to handle MySQL NULL in C++ using mysql.h?

> ID：14492457
> 
> 赞同：1
> 
> 时间：2013-01-24T01:30:02.493
> 
> 标签：c++, mysql, null

I'm trying to check for certain field values in an `if`. Most of these values are `NULL` in MySQL.

It seems to be screwing everything up.

I do

```
while ((row = mysql_fetch_row(res)) !=NULL){
    if(row[1] != "-1"){
        rows.push_back(row[0]);
    }
} 
```

The field for `row[1]` is an `INT` `LENGTH` `1` equal to `1`, `-1`, or `NULL`. Most are `NULL`, but a few are `-1`. I *think* that `mysql.h` outputs all values as `char*` (at least that's the only way I've been able to get it to work so far).

Anyways, strangely, `rows` gets filled, but it's filled with "nothing". I'm not even sure if it's an empty string or what.

Please help.

Many thanks in advance!

* * *

I put dashes in front and behind the `std::cout` of `rows[i]` in a `for` loop. It outputs a ton of `--`s.

If I `std::cout` the raw `row[0]`, it outputs fine.

* * *

For us2012:

```
std::vector< char* > rows;

while ((row = mysql_fetch_row(res)) !=NULL){
    std::cout << "-" << row[0] << "-" << std::endl;
    if(row[1] != "-1"){
        rows.push_back(row[0]);
    }
}

std::cout << "Valids:" << std::endl;
for(int i = 0; i < rows.size(); ++i)
{
    std::cout << "id: -" << rows[i] << "-" << std::endl;
} 
```

* * *

When I use this if

```
if(row[1] && row[1] != "-1") 
```

The `if` works in reverse.

Note: I incremented an `int` in the `while`, `cout`ed that and `rows` and `invalidRows`. The counter gives `389`, `rows.size()` `2`, and `invalidRows.size()` `387`.

I'm going to see if I can `cout` `row[0]` *after* I do the `if`...

* * *

`cout`ing `row[0]` after the `if` outputs the correct data.

* * *

`if(row[1] != "-1")` gives `...forbids comparison between pointer and integer...`

* * *

**Why `mysql.h`:**

CentOS. I find hardly anything for it, and nothing my host supports.

* * *

`if(row[1] && std::string(row[1]).compare("-1") != 0)` put everything into `invalidRows`

Without `row[`] &&`gave`what(): basic_string::_S_construct NULL not valid Aborted`

* * *

**Answer**

It was `if(row[1] && std::string(row[1]).compare("-1") == 0)` all along! My logic got screwed up in all of the C++ crash coursing.

And using `std::vector< std::string >` allows `row[x]` to be `push`ed`_back`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:01:42.510

First things first: The API you are using is a C API. There's nothing inherently wrong about that, but it means that you have to deal with a lot of stuff that seems unneccessary because C++ has better tools available for this. If possible, you should therefore use a C++ wrapper like MySQL++ : [http://tangentsoft.net/mysql++/](http://tangentsoft.net/mysql++/) (all credits for this suggestion go to @Non-Stop Time Travel in the comments below)

* * *

In your original code, you're not comparing strings, you're comparing addresses. Your condition compares the memory address stored in `row[1]` with the memory address of the constant string literal `"-1"`. What you actually want (if you stick to `char *`) is `strcmp` : [C++ Compare char array with string](https://stackoverflow.com/questions/1330550/c-compare-char-array-with-string)

You're also pushing back pointers to `row[0]` which is temporary, it is reassigned with every iteration of the while loop! You have to make a copy of these and store the pointers to the copies.

This is a very quick idea of how you could approach this. Not really good C++, though (in fact, if it were not for the vector and the cout, it may as well be C. See above for the reasons.):

```
#include <string.h>

std::vector<char*> rows;
while ((row = mysql_fetch_row(res)) !=NULL){
    if(strcmp(row[1],"-1") != 0){
        char * store = new char[strlen(row[0])+1];
        strncpy(store ,row[0] ,strlen(row[0])+1);
        rows.push_back(store);
    }
}
std::cout << "Valids:" << std::endl;
for(int i = 0; i < rows.size(); ++i)
{
    std::cout << "id: -" << rows[i] << "-" << std::endl;
}

//clean up
for(int i = 0; i < rows.size(); ++i)
{
    delete [] rows[i];
} 
```

* * *

In general, when you deal with strings in C++ I would recommend using `std::string` and `std::string::compare` instead~~, but this is problematic here - if your mysql rows hold binary data, you don't have guaranteed null-terminated strings anymore (see the spec for MYSQL_ROW here: [http://dev.mysql.com/doc/refman/5.0/en/c-api-data-structures.html](http://dev.mysql.com/doc/refman/5.0/en/c-api-data-structures.html) ).~~ As pointed out by *Non-Stop Time Travel* in the comments below, `std::string` supports internal `\0`s, the code example below however doesn't work with them.

```
#include <string>

//this particular code works only if row[0] and row[1] are nullterminated

std::vector<std::string> rows;
while ((row = mysql_fetch_row(res)) !=NULL){
    if(std::string(row[1]).compare("-1") != 0){
        rows.push_back(std::string(row[0]));
    }
}
std::cout << "Valids:" << std::endl;
for(int i = 0; i < rows.size(); ++i)
{
    std::cout << "id: -" << rows[i] << "-" << std::endl;
}

//cleaning up the vector of strings is not necessary! yay! 
```

)

# ios - 通过 Xcode 在 App 中打开打印对话框？

> ID：14492458
> 
> 赞同：-1
> 
> 时间：2013-01-24T01:30:04.840
> 
> 标签：ios, objective-c, xcode, airprint

我对 iOS 编程非常陌生，遇到了一个问题。我有一个 pdf 我想从互联网上打印出来。我如何在没有第三方应用程序的情况下通过我的应用程序打印这个？另外，我听说过苹果的 AirPrint，它预装在 iOS 设备上。我将如何使用它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:17:40.287

.H 文件代码

```
 #import
    @interface xyviewController : UIViewController <...,UIPrintInteractionControllerDelegate> {

    UIPrintInteractionControllerDelegate should be delegate
    }
    -(IBAction)printdoc; 
```

.M 文件代码

```
-(IBAction)printdoc
{

NSString *path = [[NSBundle mainBundle] pathForResource:@"demo" ofType:@"jpg"];
NSData *myData = [NSData dataWithContentsOfFile: path];

UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];

if(pic && [UIPrintInteractionController canPrintData: myData] ) {

pic.delegate = self;

UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.outputType = UIPrintInfoOutputGeneral;
printInfo.jobName = [path lastPathComponent];
printInfo.duplex = UIPrintInfoDuplexLongEdge;
pic.printInfo = printInfo;
pic.showsPageRange = YES;
pic.printingItem = myData;

void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) = ^(UIPrintInteractionController *pic, BOOL completed, NSError *error) {
//self.content = nil;
if (!completed && error) {
NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
}
};

[pic presentAnimated:YES completionHandler:completionHandler];

}

} 
```

# opengl - opengl/pyopengl - 在多个视口中呈现完全相同的帧？

> ID：14492461
> 
> 赞同：1
> 
> 时间：2013-01-24T01:30:13.027
> 
> 标签：opengl, rendering, 2d, pyopengl

我正在编写一个简单的工具`PyOpenGl`来显示生理实验中使用的视觉刺激。目前，我在 a 内的单个视口上渲染我的刺激`wxGLCanvas`，我在投影仪上全屏显示。我想添加第二个视口，以便用户可以“预览”投影仪上显示的内容。但是，我不想复制我已经为第二个视口进行的所有绘制调用。我需要以毫秒精确的时间显示刺激（根据挂钟测量），因此我想将开销保持在最低限度，以实现足够高的帧速率。

我的问题是：在两个视口中有效渲染完全相同的帧的最简单方法是什么？我已经阅读了一些关于顶点缓冲区对象的内容，但我对 OpenGL 的理解非常初级，我不确定 VBO 是否最适合我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:25:45.970

1.  创建纹理、渲染缓冲区和帧缓冲区对象
2.  将帧缓冲区对象绑定到您的 opengl 上下文
3.  将纹理附加到帧缓冲区的颜色分量
4.  将渲染缓冲区附加到帧缓冲区的深度组件
5.  渲染到这个帧缓冲区
6.  切换到默认帧缓冲区
7.  将纹理渲染到您的视口。

关于 FBO 的详细信息：[http ://www.opengl.org/wiki/Framebuffer_Objects](http://www.opengl.org/wiki/Framebuffer_Objects)

确保在 2 个视口之间共享 opengl 上下文（请参阅：[http](http://wiki.wxwidgets.org/WxGLCanvas#Sharing_wxGLCanvas_context) ://wiki.wxwidgets.org/WxGLCanvas#Sharing_wxGLCanvas_context ）

# javascript - 将一个表中单击的行的结果绑定到另一个表中的另一行

> ID：14492464
> 
> 赞同：1
> 
> 时间：2013-01-24T01:30:45.383
> 
> 标签：javascript, html, jquery, knockout.js

我有一个表格，一个搜索链接作为它的列之一。当我单击搜索时，会弹出一个带有搜索框选项的 ajax 弹出扩展器面板。搜索是通过 web 服务调用完成的，结果绑定在面板内的表格中。我使表格行可点击，我希望点击的行绑定到第一个表格。我遇到的问题是跟踪每一行。当我单击面板内的一行时，第一个表中的所有行都被绑定，而不仅仅是那一行。我不知道如何跟踪我点击了哪一行。非常感谢任何帮助，我已经为此苦苦挣扎了好几天。这是我的代码：

# JavaScript

```
 $(document).ready(function () {
           MyAccountModel = new AccountViewModel()
     ko.applyBindings(MyAccountModel );
 })

      var passedmodel;
      var MyAccountModel;
    var AccountViewModel = function () {
                 var self = this;
                 self.model = {};
                 self.invoice = ko.observableArray([new invoice()]);
                //Ajax Call to search accounts (working and binding fine)
                 self.GetAccounts = function () {
   var searchstring = document.getElementById("<%=txtaccountsearch.ClientID %>").value;
                     var DTO = { 'searchstring': searchstring };
                     var AccountURL = "ajaxwebservicecalls.asmx/GetAccount";
                     $.ajax({
                         type: "Post",
                         url: AccountURL,
                         data: JSON.stringify(DTO),
                         contentType: "application/json; charset=utf-8",
                         dataType: "json",
                         success: function add(msg) {
                             passedmodel = ko.mapping.fromJS(msg.d);
                             MyMasterviewModel.MyAccountModel.invoice(passedmodel);

                         },
                         error: ONAccountFailure

                     });
                 }

                 function ONAccountFailure(xhr, ex) {
                     alert(xhr.responseText);
                  }

      self.CurrentDisplayAccount = ko.observableArray([new CurrentDisplayAccount()])
                 //this is to select a row inside the panel
                 self.selectAccount = function (item) {
                     self.CurrentDisplayAccount(item);
                 }; 
```

# HTML

## 我不会显示 Popup Extender/Panel 代码以节省空间。这是 knokcout 表绑定

```
 <table id="Table3"> 
        <tr>
        <th> Account Code </th>
        <th> Description </th>
        <th> Account Type </th>
        <th> Purpose </th>

       </tr>
    <tbody  data-bind="foreach:MyAccountModel.invoice().GLAccounts">
    <tr data-bind="click: MyMasterviewModel.MyAccountModel.selectAccount">

    <td  data-bind=" text:  $data.FormattedGLAccount"></td>
    <td data-bind="text:  $data.GLAccountDescription"></td>
    <td data-bind="text:  $data.GLAccountTypeName" ></td>
    <td data-bind="text:  $data.GLAccountLongDescription" ></td>
       </tr>
       </tbody>
       </table> 
```

现在，每当我单击上表的任何行时，结果都会绑定到下表的两行。但是，我只想将它绑定到我单击搜索的行。

```
 <td align="left">
  <table border="0" cellspacing="0" cellpadding="0">
      <th> Account </th>
      <th> Amount </th>
      <th> Reference </th>
      <th> Description </th>     
    <tbody databind="foreach: MyAccountModel.CurrentDisplayAccount()" >
    <td >
    <input  data-bind="text: $data.FormattedGLAccount" />
     </td>
     <td >
<input data-bind="text:$data.GLAccountDescription"/>
    </td>
    <td >
<input  data-bind="text:   $data.GLAccountTypeName" />
 </td>
  <td >
<input  data-bind="text:   $data.GLAccountLongDescription" />     </td>
  <td>
 <asp:HyperLink runat="server" ID="HyperLink1" NavigateUrl="javascript:$find('ModalPopupExtenderaccountsearchbehav').show();" Text="Search"  />
       </td>
         </tbody>

     <--second row:-->
 <tr>
 <td >
<input  data-bind="text: $data.FormattedGLAccount" />    </td>
<td >
 <input  data-bind="text: $data.GLAccountDescription" />     </td>
 <td >
 <input  data-bind="text:   $data.GLAccountTypeName" />     </td>
 <td >
  <<input  data-bind="text:   $data.GLAccountLongDescription" />
 </td>
 <td >        
 <asp:HyperLink runat="server" ID="HyperLink2" NavigateUrl="javascript:$find  ('ModalPopupExtenderaccountsearchbehav').show();" Text="Search"  />

                     </td>
                </tr>
            </table>
        </td> 
```

我尝试改变语法绑定，但它仍然保持绑定。我尝试了一个 foreach 循环，但没有成功。我在想我需要获取 thr 行的索引，但我不知道该怎么做。请帮忙！！

## 更新

这是一个指向我正在尝试做的事情的小提琴链接[http://jsfiddle.net/KwvrZ/7/](http://jsfiddle.net/KwvrZ/7/)。我希望能够单击第一个表中的任何行，并且该行应该绑定到第二个表。如果我然后单击第一个表中的不同行，它应该绑定到第二个表的第二行。希望这是有道理的。

我真的需要一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:49:24.347

你的问题描述不是很清楚。您的更新有所帮助，但我无法弄清楚您想要完成什么。

* * *

您是否只会显示 2 行？如果是这样，您需要跟踪两个可观察对象中的每个选择。

标记：

```
<tbody>
    <tr data-bind="with: CurrentDisplayAccount1">
        <td>
            <input data-bind="value: FormattedGLAccount" />
        </td>
        <td>
            <input data-bind="value: GLAccountDescription" />
        </td>
        <td style="padding-left: 4px; padding-right: 2px;"> <a href="#" onclick="javascript:$find('ModalPopupExtenderaccountsearchbehav').show();">Search</a>

        </td>
    </tr>
    <tr data-bind="with: CurrentDisplayAccount2">
        <td>
            <input data-bind="value: FormattedGLAccount" />
        </td>
        <td>
            <input data-bind="value: GLAccountDescription" />
        </td>
        <td style="padding-left: 4px; padding-right: 2px;"> <a href="#" onclick="javascript:$find('ModalPopupExtenderaccountsearchbehav').show();">Search</a>

        </td>
    </tr>
</tbody> 
```

在您的视图模型中：

```
 self.CurrentDisplayAccount1 = ko.observable();
 self.CurrentDisplayAccount2 = ko.observable();
 self.selectAccount = function (item) {
     if(!self.CurrentDisplayAccount1()) {
        self.CurrentDisplayAccount1(item);
     } else if(!self.CurrentDisplayAccount2()){
         self.CurrentDisplayAccount2(item);
     }
 }; 
```

这是你的小提琴工作方式：http: [//jsfiddle.net/JoeDoyle23/KwvrZ/11/](http://jsfiddle.net/JoeDoyle23/KwvrZ/11/)

* * *

或者，您是否希望将每个选定的行添加到表中，没有限制？在这种情况下，CurrentDisplayAccount 需要是一个可观察的数组，并且您的第二个表需要使用 foreach 绑定。单击一行时，该行将添加到 CurrentDisplayAccount 数组。如果您希望第二个表不允许重复，则只需在添加之前在数组中检查它。

标记：

```
<tbody data-bind="foreach: CurrentDisplayAccount">
    <tr>
        <td>
            <input data-bind="value: FormattedGLAccount" />
        </td>
        <td>
            <input data-bind="value: GLAccountDescription" />
        </td>
        <td style="padding-left: 4px; padding-right: 2px;"> <a href="#" onclick="javascript:$find('ModalPopupExtenderaccountsearchbehav').show();">Search</a>

        </td>
    </tr> 
```

在您的视图模型中：

```
 self.CurrentDisplayAccount = ko.observableArray([]);
 self.selectAccount = function (item) {
     self.CurrentDisplayAccount.push(item);
 }; 
```

这是您的小提琴以这种方式工作（减去重复检查）：http: [//jsfiddle.net/JoeDoyle23/KwvrZ/12/](http://jsfiddle.net/JoeDoyle23/KwvrZ/12/)

希望这些示例能够让您摆脱困境。

# delphi - 将 SQL 查询的结果链接到 Delphi 7 中的 kbmMemtable

> ID：14492467
> 
> 赞同：0
> 
> 时间：2013-01-24T01:31:09.733
> 
> 标签：delphi, delphi-7

我正在尝试修复用 Delphi 7 编写的旧程序的一部分。

目前，我有正确的查询（和正确的结果），但我不知道如何在 kbmMemtable 中显示结果（这是应用程序的其余部分使用的）

任何想法/建议/相关文档的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T04:45:35.010

我猜结果是某种`TDataset`后代。因此，您的第一个选择是`kbmObject.LoadFromDataset(resultsObject, options)`，`options`一组`TkbmMemTableCopyTableOption`. 基本上，您正在指定如何将数据从一个对象移动到另一个对象。由于我不知道你的代码，我不能说你应该使用什么选项，但我通常使用`[mtcpoStructure]`- 将源字段结构复制到新创建的`TkbmMemTable`，然后附加所有记录。

但是你也有`kbmObject.CopyData(kbmObject, resultsObject, Count)`，假设你已经在你的`kbmObject`.

# javascript - 地理位置：按邻近度过滤

> ID：14492470
> 
> 赞同：1
> 
> 时间：2013-01-24T01:31:32.963
> 
> 标签：javascript, json, geolocation, geocoding

我有一个来自世界各地的 JSON 格式的用户列表。列表中的每个项目都有一个位置信息。

1.  如何将这些位置转换为正确的经度和纬度？
2.  如何过滤这些位置以仅获取当前位置 50 英里范围内的位置（假设我知道如何获取当前经度和纬度）。

有我可以使用的服务吗？

我真的需要将这些位置转换为经度和纬度吗？基本上我想做的就是找到距离当前位置 50 英里的位置并忽略其他位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:32:07.410

您可以为此使用免费的[geonames.org 网络](http://www.geonames.org/export/ws-overview.html)服务。有一种可用的[搜索方法](http://www.geonames.org/export/geonames-search.html)，您可以在其中提供位置名称并获取任何位置的纬度和经度。请注意，可能有多个具有相同名称的位置可用。请参阅此处的示例：[http ://api.geonames.org/searchJSON?q=london&maxRows=10&username=demo](http://api.geonames.org/searchJSON?q=london&maxRows=10&username=demo)

对于您的第二个问题，有多种方法。[这个问题](https://stackoverflow.com/questions/1420045/how-to-find-distance-from-the-latitude-and-longitude-of-two-locations)概述了基本算法，但可能最简单的方法是使用 Google Maps API（请参阅[此问题](https://stackoverflow.com/questions/3838493/distance-between-two-geo-locations)的第二个答案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:36:48.253

我过去已经这样做了，因为这不是仅使用 JavaScript 和 JSON 就可以做到的。最好的方法是创建一个使用空间`Point`命令的 MySQL 数据库。如果您需要 JavaScript 和 JSON，那么您必须创建一个 Web 服务（例如使用 PHP）来管理 JavaScript 和 MySQL 数据库之间的查询。起初看起来令人生畏，但一旦你掌握了它，它就会很酷。我建议[阅读此网站](http://www.xarg.org/2009/12/people-near-you-with-mysql/)以了解基础知识。

# php - find('count') 不断得到总数。行数而不是值 0

> ID：14492479
> 
> 赞同：0
> 
> 时间：2013-01-24T01:32:16.410
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-1.2

为什么我总是得到总数。当我输入“”时，行数而不是值 0 - 空？

控制器

```
$totalSchools = $this->Classroom->find('count', array('conditions' => array('Classroom.name LIKE' => '%'. $searchQuery .'%')));
$this->set('totalSchools', $totalSchools); 
```

看法

```
<?php echo $totalSchools ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:35:41.123

因为空字符串的计算结果为 '%%' => 这匹配**所有内容**。您必须使用 if/else 检查这种特殊情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:40:42.690

`$searchQuery`如果它是空的，你应该首先过滤你的，如下所示：

```
if($searchQuery != ""){

      $totalSchools = $this->Classroom->find('count', array('conditions' => array('Classroom.name LIKE' => '%'. $searchQuery .'%')));
       $this->set('totalSchools', $totalSchools);

}
    else
        $this->set('totalSchools', 0); 
```

# ios - 我可以在使用 Xcode 加载应用程序时打开相机吗？

> ID：14492482
> 
> 赞同：0
> 
> 时间：2013-01-24T01:32:40.640
> 
> 标签：ios, xcode, camera

> **可能重复：**
> [如何在 viewDidLoad 上启动 iPhone 相机？](https://stackoverflow.com/questions/1355798/how-to-launch-iphone-camera-on-viewdidload)

我正在尝试在我的应用程序启动时打开相机 UI。问题是，我已经使用开始按钮完成了相机应用程序，单击该开始按钮，相机被打开并用于捕捉照片和视频。

我正在尝试从 viewDidLoad 方法调用 startCameraControllerFromViewController 但我面临以下异常

警告：尝试呈现不在窗口层次结构中的视图！

这是我的代码

```
- (void)viewDidLoad
{

    imagePicker = [[UIImagePickerController alloc]init];
    [self startCameraControllerFromViewController: self
                                    usingDelegate: self];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    cameraUI.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];

    cameraUI.allowsEditing = NO;
    cameraUI.delegate = delegate;
    [controller presentViewController: cameraUI animated: YES completion:nil];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:36:41.360

将代码放在 viewWillAppear 或 viewDidAppear 方法中可能会更好。我的猜测是，即使视图已经加载，它实际上可能还不可见，并且 startCameraControllerFromViewController 调用可能不是那样的。

只是一个猜测。

# php - @runInSeparateProcess 时出现反序列化错误

> ID：14492486
> 
> 赞同：7
> 
> 时间：2013-01-24T01:33:00.353
> 
> 标签：php, phpunit

我正在实现一个模块，该模块将提供一个 API 来处理和管理 PHP 会话。我正在测试`Session\Manager`允许用户启动会话、设置 ID、获取 ID、销毁会话等的实现。我正在使用 PHPUnit 的`@runInSeparateProcess`注释在单独的进程中测试此类中的方法。当我使用这个注释时，由于反序列化错误，我得到了 PHPUnit 抛出的异常。当我不使用注释时，测试按预期运行，并且在 null 不等于 false 时失败。

这是导致错误的测试。到目前为止还没有实现细节，接口的所有方法都存在但不执行任何操作。

```
class ManagerTest extends PHPUnitTestCase {

    /**
     * Ensures that if the session has not been started yet the sessionExists
     * method returns false.
     *
     * @runInSeparateProcess
     */
    public function testSessionExistsWhenSessionHasNotBeenStarted() {
        $Manager = new \Session\Manager();
        $this->assertFalse($Manager->sessionExists());
    }

} 
```

我能够将问题追溯到以下[`PHPUnit_Util_PHP::runJob()`](https://github.com/sebastianbergmann/phpunit/blob/3.7/PHPUnit/Util/PHP.php#L159)方法。我正在运行 PHPUnit 3.7.5，`runJob`被调用的方法是：

```
/**
 * Runs a single job (PHP code) using a separate PHP process.
 *
 * @param  string                       $job
 * @param  PHPUnit_Framework_TestCase   $test
 * @param  PHPUnit_Framework_TestResult $result
 * @return array|null
 * @throws PHPUnit_Framework_Exception
 */
public function runJob($job, PHPUnit_Framework_Test $test = NULL, PHPUnit_Framework_TestResult $result = NULL)
{
    $process = proc_open(
      $this->getPhpBinary(),
      array(
        0 => array('pipe', 'r'),
        1 => array('pipe', 'w'),
        2 => array('pipe', 'w')
      ),
      $pipes
    );

    if (!is_resource($process)) {
        throw new PHPUnit_Framework_Exception(
          'Unable to create process for process isolation.'
        );
    }

    if ($result !== NULL) {
        $result->startTest($test);
    }

    $this->process($pipes[0], $job);
    fclose($pipes[0]);

    $stdout = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    $stderr = stream_get_contents($pipes[2]);
    fclose($pipes[2]);

    proc_close($process);
    $this->cleanup();

    if ($result !== NULL) {
        $this->processChildResult($test, $result, $stdout, $stderr);
    } else {
        return array('stdout' => $stdout, 'stderr' => $stderr);
    }
} 
```

该行`$stdout = stream_get_contents($pipes[1]);`导致`$stdout`等于一长串`?`. in`$this->processChildResult`中的值`$stdout`未序列化并且传递给此函数的无效值会触发警告，从而引发异常。我还能够确定 is 的返回`$this->getPhpBinary()`值`/usr/bin/php`。

抛出异常消息：

```
PHPUnit_Framework_Exception: ???...???"*???...??

Caused by
ErrorException: unserialize(): Error at offset 0 of 10081 bytes 
```

多亏了 hek2mgl，`$job`可以[在这个 gist 中查看 PHP 代码，其中包含 $job 上的 var_dump 的输出](https://gist.github.com/4ec1857829af37ad73c3)。我创建了一个链接，因为它是相当多的代码，而且这个问题已经很长了。

我对这个特定领域的知识已经到了尽头，不知道如何进一步调试这个问题。我不确定为什么`@runInSeparateProcess`会失败以及为什么`$stdout`运行单独的进程会导致一长串 ? 分数。什么可能导致此问题，我该如何解决？我对这个模块处于停顿状态，因为未来的测试需要在单独的进程中运行，以确保会话的启动和销毁不会影响测试。

*   PHP: 5.3.15
*   PHPUnit：3.7.5
*   IDE 和命令行测试运行程序中导致的错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T03:13:22.773

好的，我知道这里发生了什么，男孩是不是很糟糕。

在测试期间，框架尝试保留全局状态。在`PHPUnit_Framework_TestCase::run()`函数中，当前的全局变量通过`PHPUnit_Util_GlobalState::getGlobalsAsString()`. 我目前正在使用自动加载库来处理需要适当的类文件。此类在全局范围内的变量中声明，导致将该对象的序列化放入`$GLOBALS`由`getGlobalsAsString()`. 无论出于何种原因，此序列化都包含空字节字符`\u0000`。当您尝试反序列化时，您会收到错误并最终导致输出也被破坏。

我通过在我的测试引导程序中创建一个函数来解决这个问题，该函数在全局范围之外创建自动加载对象。现在脚本不再尝试反序列化空字节，脚本不会产生错误，并且测试用例按预期工作。这是一个非常时髦的问题，不确定它是我的代码、PHPUnit 的代码还是`serialize`函数的内部错误。

* * *

或者，您可以覆盖`run()`测试用例中的函数并明确设置测试用例不保留全局状态。这可能是一个更干净的解决方案，因为您很容易遇到其他问题，需要再次要求所有包含的文件，这是默认行为。

```
class ManagerTest extends PHPUnit_Framework_TestCase {

    public function run(PHPUnit_Framework_TestResult $result = null) {
        $this->setPreserveGlobalState(false);
        parent::run($result);
    }

} 
```

必须在调用函数之前设置全局状态*。*`PHPUnit_Framework_TestCase::run()`这可能是正确设置全局状态保存的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:53:48.430

$job 参数`PHPUnit_Util_PHP::runJob()`是由 PHPUnit 生成的 php 代码，它以可以作为命令行脚本执行的方式包装测试方法的代码（聪明的技巧！）。隔离测试会将有关测试结果的序列化 php 数据输出回 phpunit。

如果要在顶部 pf 上添加以下行，则可以调查此代码`PHPUnit_Util_PHP::runJob()`

```
file_put_contents('isolated.php', $job); 
```

再次执行失败的测试后，文件`isolated.php`应该已在当前目录中创建。您可以通过键入查看代码可以执行它（在当前文件夹中）

```
php isolated.php 
```

您是否看到任何看起来凌乱的输出？

你也应该调试方法`PHPUnit_Util_PHP::processChildResult()`。该方法负责反序列化和检查测试结果。在那里放置一些 echos 或 var_dumps 或使用调试器。查看此方法时，很可能问题是由测试方法的非法输出引起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:35:18.203

请尝试在 php.ini 中设置：

> detect_unicode = 关闭

为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-07T11:45:23.093

也许在你的测试代码调用时会抛出同样的错误是不值得的`exit`。

# xml-signature - 从哪里创建 xmlSig 中的摘要？

> ID：14492491
> 
> 赞同：0
> 
> 时间：2013-01-24T01:33:54.083
> 
> 标签：xml-signature, xml-dsig

从哪里创建 xmlSig 中的摘要？

它只是来自肥皂头的校验和/哈希？对此有什么特殊处理吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:31:18.327

例如，如果我想签署这个文件（test.xml）：

```
<root>
    <creditcard>
        <number>19834209</number>
        <expiry>02/02/2002</expiry>
    </creditcard>
</root> 
```

使用 X.509 或数字签名身份等，您必须使用允许生成 XML 签名的工具对 test.xml 进行签名。

此工具必须从 Like生成一个`<signature>....</signature>`with 规范：`xmlsig`

```
<Signature>
  <SignedInfo>
    <CanonicalizationMethod />
    <SignatureMethod />
    <Reference>
       <Transforms>
       <DigestMethod>
       <DigestValue>
    </Reference>
    <Reference /> etc.
  </SignedInfo>
  <SignatureValue />
  <KeyInfo />
  <Object />
</Signature> 
```

此签名附加到 xml 文件 (test.xml) 中，您可以在此处尝试使用 c# [http://msdn.microsoft.com/en-gb/library/ms229745(v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/ms229745(v=vs.80).aspx)

# android - Android- 从 EditText 打开 Datepicker

> ID：14492496
> 
> 赞同：3
> 
> 时间：2013-01-24T01:34:35.347
> 
> 标签：android, android-datepicker

我试图弄清楚如何单击/关注 EditText 字段并打开 DatePicker - 最好代替键盘而不是作为对话框，但此时我会采取任何措施。如果可能的话，我想远离使用 TextView 作为激活 Datepicker 的按钮。

由于这个人口统计[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)客户希望版本 10 和更高版本得到支持。

我已经阅读了很多关于此的问题，但到目前为止，每个答案都有已弃用的函数（即 showDialog）或使用需要 API 11 的函数（即 DialogFragment）。

关于如何进行的任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:33:01.780

如果我正确理解您的问题，这里有一个完全符合您要求的库（适用于 API 级别 8+）：

[https://github.com/robzon/android-datepicker](https://github.com/robzon/android-datepicker)

此外，显示日期选择器代替键盘是您在 iOS 上的做法 - 在 Android 上，您应该显示一个对话框。

# xslt - 我的 xpath 有什么问题？继续为每个节点输出相同的片段

> ID：14492498
> 
> 赞同：2
> 
> 时间：2013-01-24T01:35:10.547
> 
> 标签：xslt, xpath

我有一张相当平的桌子，看起来像

```
<tr>
<td class="tableResultsA" nowrap>1</td>
<td class="tableResultsA" nowrap><A HREF="docs/123456" target="_blank">Title</A></td>
<td class="tableResultsA" nowrap>SNIPPET</td>
<td class="tableResultsA" nowrap>Date</td>
<td class="tableResultsA" nowrap>Category</td>
</tr>

<tr>
<td class="tableResultsB" nowrap>1</td>
<td class="tableResultsB" nowrap><A HREF="docs/678901" target="_blank">Title</A></td>
<td class="tableResultsB" nowrap>SNIPPET</td>
<td class="tableResultsB" nowrap>Date</td>
<td class="tableResultsB" nowrap>Category</td>
</tr> 
```

我需要根据这些数据创建一个文档，包括 URL、标题和片段。

我已将我的根结果节点设置为此：

```
<scope>
<xsl:value-of select>"//td[@class='tableResultsA'][2] | //td[@class='tableResultsB'][2]"
</scope> 
```

对于我的文档，我有以下内容：

```
<xsl:template match="//td">
   <document url="{a/@href}">
     <content name="title">
        <xsl:value-of select="a" />
     </content>
     <content name="snippet">
        <xsl:value-of select="//td[@class='tableResultsA'][3] | //td[@class='tableResultsB'][3]" />
     </content>
    </document>
  </xsl:template> 
```

问题是片段。我在代码段输出中得到了完全相同的结果，因此它不会遍历数据。我不是 XPath 专家。我想知道跟随或跟随兄弟是否可行，但我无法在任何地方为他们找到一个很好的例子。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:01:52.640

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="tr">
  <document url="{td/A/@HREF}">
     <content name="title">
        <xsl:value-of select="td/A"/>
     </content>
     <content name="snippet">
        <xsl:value-of select="td[3]"/>
     </content>
  </document>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于更正的（成为格式良好的 XML 文档）提供的输入时：**

```
<table>
    <tr>
        <td class="tableResultsA" nowrap="nowrap">1</td>
        <td class="tableResultsA" nowrap="nowrap">
            <A HREF="docs/123456" target="_blank">Title</A>
        </td>
        <td class="tableResultsA" nowrap="nowrap">SNIPPET</td>
        <td class="tableResultsA" nowrap="nowrap">Date</td>
        <td class="tableResultsA" nowrap="nowrap">Category</td>
    </tr>
    <tr>
        <td class="tableResultsB" nowrap="nowrap">1</td>
        <td class="tableResultsB" nowrap="nowrap">
            <A HREF="docs/678901" target="_blank">Title</A>
        </td>
        <td class="tableResultsB" nowrap="nowrap">SNIPPET</td>
        <td class="tableResultsB" nowrap="nowrap">Date</td>
        <td class="tableResultsB" nowrap="nowrap">Category</td>
    </tr>
</table> 
```

**产生想要的正确结果：**

```
<document url="docs/123456">
   <content name="title">Title</content>
   <content name="snippet">SNIPPET</content>
</document>
<document url="docs/678901">
   <content name="title">Title</content>
   <content name="snippet">SNIPPET</content>
</document> 
```

# bison - 野牛：yypstate 和 YYPUSH_MORE 定义在哪里？

> ID：14492500
> 
> 赞同：1
> 
> 时间：2013-01-24T01:35:14.883
> 
> 标签：bison, flex-lexer

我正在使用 flex 和 bison 来开发计算器。但是当我想让它成为一个推送解析器时，我得到了以下信息：

```
"flex" lexer.l  
gcc    -c -o lex.yy.o lex.yy.c  
lexer.l: In function 'main':  
lexer.l:29:2: error: unknown type name 'yypstate'  
lexer.l:29:15: warning: initialization makes pointer from integer without a cast [enabled by default]  
lexer.l:35:24: error: 'YYPUSH_MORE' undeclared (first use in this function)  
lexer.l:35:24: note: each undeclared identifier is reported only once for each function it appears in  
make: *** [lex.yy.o] Error 1 
```

代码可在[https://github.com/dramforever/drcalc](https://github.com/dramforever/drcalc) (tag `u1-push-parse`) 获得。我不会在这里发布它，因为我认为它很烦人。

PS：抱歉英语不好。希望你能理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:07:19.023

如果要制作推送解析器，则需要指定

```
%define api.pure full
%define api.push-pull push 
```

在你的野牛（.y）文件中。（实际上，你只需要第二个，但强烈推荐第一个。请参阅[野牛手册](http://www.gnu.org/software/bison/manual/html_node/Push-Decl.html#Push-Decl)。）

如果您请求了头文件，这应该会导致将符号放入野牛生成的头文件中。要请求头文件，请包括

```
%defines 
```

`-d`或使用标志调用野牛。

当然，您需要`#include`在任何引用符号的源文件中使用该头文件；在您的情况下，您的`flex`输入文件。

另外，请确保您`Makefile`指定`bison`头文件依赖于`bison`步骤，并且`flex`步骤依赖于`bison`头文件。否则，您可能会发现构建发生的顺序错误。

# apache - .htaccess AddOutputFilter 失败

> ID：14492502
> 
> 赞同：0
> 
> 时间：2013-01-24T01:35:55.633
> 
> 标签：apache, .htaccess

我目前像这样启用 GZIP：

```
# gzip compression
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript application/json
</ifmodule> 
```

这会产生如下响应标头：

![在此处输入图像描述](../Images/dd3beec63dd5ae461ced63f3cb0bfc8a.png)

请注意，`Content-Encoding`设置为`gzip`，并且`Vary`也设置了。

现在，我想使用[这个 .htaccess 文件](https://github.com/sergeychernyshev/.htaccess/blob/master/.htaccess)中的代码，据说可以提高性能，但是当我用这个替换上面的代码时：

```
# --------------------------------------------------------------------------------------
# Compression: http://code.google.com/speed/page-speed/docs/payload.html#GzipCompression
# --------------------------------------------------------------------------------------
<IfModule mod_deflate.c>
AddOutputFilter DEFLATE application/atom+xml
AddOutputFilter DEFLATE application/json
AddOutputFilter DEFLATE application/xhtml+xml
AddOutputFilter DEFLATE application/xml
AddOutputFilter DEFLATE text/css
AddOutputFilter DEFLATE text/html
AddOutputFilter DEFLATE text/plain
AddOutputFilter DEFLATE text/x-component
AddOutputFilter DEFLATE text/xml

# The following MIME types are in the process of registration
AddOutputFilter DEFLATE application/xslt+xml
AddOutputFilter DEFLATE image/svg+xml

# The following MIME types are NOT registered
AddOutputFilter DEFLATE application/mathml+xml
AddOutputFilter DEFLATE application/rss+xml

# JavaScript has various MIME types
AddOutputFilter DEFLATE application/javascript
AddOutputFilter DEFLATE application/x-javascript
AddOutputFilter DEFLATE text/ecmascript
AddOutputFilter DEFLATE text/javascript

# .ico files and other compressible images
AddOutputFilter DEFLATE image/vnd.microsoft.icon
AddOutputFilter DEFLATE image/x-icon
AddOutputFilter DEFLATE image/bmp
AddOutputFilter DEFLATE image/tiff
AddOutputFilter DEFLATE application/pdf

# compressible fonts (.woff is already compressed)
AddOutputFilter DEFLATE font/opentype
AddOutputFilter DEFLATE application/x-font-ttf
AddOutputFilter DEFLATE application/vnd.ms-fontobject
</IfModule> 
```

同一文件请求的响应标头变为：

![在此处输入图像描述](../Images/f40e933d4bf9562c2449ecb1d1d19223.png)

标`Content-Encoding: gzip`头不再存在。此外，`Transfer-Encoding`和`Vary`也消失了，现在。

这里发生了什么？为什么这个新代码无法 gzip 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-26T02:46:27.790

`AddOutputFilterByType`接受媒体类型，在这种情况下是：

```
application/json 
```

`AddOutputFilter`接受文件扩展名，在这种情况下是：

```
json 
```

**参考**

*   [核心 Apache HTTP 服务器功能](http://httpd.apache.org/docs/current/mod/core.html)

*   [模组哑剧](http://httpd.apache.org/docs/trunk/mod/mod_mime.html)

*   [模组过滤器](http://httpd.apache.org/docs/trunk/mod/mod_filter.html)

*   [配置服务器 MIME 类型](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Configuring_server_MIME_types)

*   [常见的 HTTP 实现问题（CHIPS）](https://www.w3.org/TR/chips/)

*   [权威元数据](https://www.w3.org/2001/tag/doc/mime-respect)

# javascript - 样式化浏览器为 svg 标题标签生成的翻转

> ID：14492506
> 
> 赞同：0
> 
> 时间：2013-01-24T01:36:27.677
> 
> 标签：javascript, jquery, html, svg, d3.js

我想知道是否可以更改所附屏幕截图的外观，黄色滚动框显示：谷歌搜索：90。

![在此处输入图像描述](../Images/7f4b0c5521ed0c674d22de6ac8d8fd1e.png)

这是从 svg 标题元素生成的，如下所示：

```
<g class="leaf node" transform="translate(494.3930607245582,316.76111782506564)">
  <title>Youtube: 60</title>
  <circle r="19.117124489931257"></circle>
  <text dy=".3em" style="text-anchor: middle;">Youtub</text>
</g> 
```

我通过库[d3.js](http://d3js.org/)生成这些，如果有帮助的话，我可以使用 jquery 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:03:10.663

黄色弹出框是提示框，默认背景颜色由系统决定。
如果您使用的是 jquery，请参考[http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip)来查看工具提示插件。您可以自定义工具提示。

# php - PHP/HTML 动态页面/搜索

> ID：14492507
> 
> 赞同：-1
> 
> 时间：2013-01-24T01:36:31.227
> 
> 标签：php, html, css

我发现很难理解我遇到的这个问题的逻辑。

目前，我有一个 search.html 页面，在提交时会转到 Results.php。然后有一些代码在 mysql 中搜索输入到搜索页面中的任何内容。

现在，我将如何在同一页面上进行搜索和结果？我将如何从搜索页面返回变量？例如在我使用之前；

```
$search_term = $_POST['name']; 
```

如果它在同一页面上，我将如何获得“名称”变量？

编辑：第二期

我有很多人回答的代码，非常感谢！我现在遇到了第二个问题。我有两个输入，一个用于搜索查询的文本框，一个用于搜索主题的下拉框。

然后用户然后按提交并搜索数据库，这一切正常。我现在想创建另一个下拉框，以便用户可以按照他们认为合适的方式对提供的结果进行排序，例如价格从高到低等。

我已经完成了 HTML 代码，但正如您可以想象的那样，第二次我按下提交它重新加载页面，并且由于它不知道用户之前搜索过的内容，它退出了 php 并表现得好像它是一个新的页面加载。

网址：[http ://helios.hud.ac.uk/u0862025/db/test.php](http://helios.hud.ac.uk/u0862025/db/test.php)

玩弄它，按提交以解除数据库中的所有产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:43:17.307

您可以将整个内容放在一个文件中。这是粗略且完全不完整的，但是像这样-

```
<?php
$results = array();
$term = "";

if(isset($_POST['name']))
{
    $term = $_POST['name'];
    $order_by = "";

    if(isset($_POST['order'])
    {
        switch($_POST['order'])
        {
            case "price-high-low":
                $order_by = "ORDER BY `price` DESC";
            break;
            case "name":
                $order_by = "ORDER BY `name` ASC";
            break;
            default:
                $order_by = "ORDER BY `id` DESC";
            break;
        }
    }

    $sql = "SELECT * FROM `your_table` WHERE `name` LIKE '%". sanitized($_POST['name']) ."%' $order_by";

    //run query and assign the results to a variable, like $results
}
?>
<form action="" method="post">
    <input type="text" name="name" value="<?php echo $term; ?>"><br>
    <?php if(!empty($results)): ?>
    <select name="order">
        <option value="price-high-low">Price: High to Low</option>
        <option value="name">Name</option>
    </select>
    <?php endif; ?>
    <input type="submit" value="submit">
</form>

<?php if(!empty($results)): ?>
Results for term: <?php echo $term; ?><br>
<?php foreach($results AS $res): ?>
    <?php echo $res['name']; ?><br>
<?php endforeach; ?>
<?php endif; ?> 
```

当然，这是非常粗略的，并且假设了很多事情。就像你的结果是一个数组一样。您的结果有一个名为 name 等的键。

但正如你所问的，这一切都在一页上，这是基本思想。

随时提出任何问题，我可能会根据需要进行更新。

** 更新 1 ** 我更新了此示例以考虑仅在生成结果后显示的下拉列表。它将使用添加的订单参数重新提交表单。此示例不考虑分页，并假设您有一个清理输入的清理函数。显然，您应该使用 mysqli 或 PDO，因为它们都会为此提供解决方案。不要依赖 mysql_ 函数，如 mysql_real_escape_string。所有 mysql_ 都已弃用，不应再使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:40:35.113

完全相同的方式。唯一的区别是您必须检查表单是否已提交

```
if (!empty($_POST)) {
    // do your search here
    // and show the results
} 
```

显然，表单动作必须指向网站本身。最好将其留空：

```
<form method="POST" action=""> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T01:42:50.960

您可以使用 Ajax 调用从 mysql 进行查询并在同一页面上显示结果。一个很好的例子是[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T01:55:54.977

尝试使您的表单和 php 代码在同一页面中。给你的提交按钮一个“名字”。假设我们有*search.php：*

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
    <input type="text" name="name" />
    <input type="submit" value="submit" name="search_button" />
</form>

<?php
if(isset($_POST['search_button'])) {
    $search_term = $_POST['name'];
    //DB query here
    //echo the result you get from query
}
?> 
```

# node.js - 我可以获得快速错误处理程序来捕获猫鼬回调中引发的异常吗？

> ID：14492511
> 
> 赞同：3
> 
> 时间：2013-01-24T01:36:51.937
> 
> 标签：node.js, express, mongoose

设置：nodejs、express、mongodb、mongoose

相关代码：

```
var express = require('express');
var server = express();
server.use(express.bodyParser());
server.use(express.methodOverride());
server.use(server.router);

var mongoose = require('mongoose');
mongoose.connect('localhost', 'test');
var Schema = mongoose.Schema;
var VehicleSchema = new Schema({
    name : String
}, {collection: 'vehicles'});
var Vehicle = mongoose.model('vehicle', VehicleSchema);

server.use(clientErrorHandler);
function clientErrorHandler(err, req, res, next) {
    console.log('client error handler found', err);
    res.send(500, err);
}

server.get('/api/test', function(req, res, next){
    Vehicle.find().exec(function(err, rows){
        res.send(rows);
    });
});

server.listen(1981); 
```

这将按预期返回一个空数组。

在这里抛出异常：

```
server.get('/api/test', function(req, res, next){
    throw 'my exception';// <------------------------ here
    Vehicle.find().exec(function(err, rows){
        res.send(rows);
    });
}); 
```

使用捕获异常的 clientErrorHandler 按预期工作。相反，把它扔在这里：

```
server.get('/api/test', function(req, res, next){        
    Vehicle.find().exec(function(err, rows){
        throw 'my exception';// <------------------------ here
        res.send(rows);
    });
}); 
```

然后异常不会被 clientErrorHandler 捕获，而是被 mongoose/lib/util.js 捕获并重新抛出

```
exports.tick = function tick (callback) {
  if ('function' !== typeof callback) return;
  return function () {
    try {
      callback.apply(this, arguments);
    } catch (err) {
      // only nextTick on err to get out of
      // the event loop and avoid state corruption.
      process.nextTick(function () {
        throw err; //<--------------------------------- here 
      });
    }
  }
} 
```

做一些没有猫鼬的事情，例如：

```
server.get('/api/test', function(req, res, next){
    process.nextTick(function(){
        throw 'here';
    });
}); 
```

也无法被快递抓住。

我如何避免它被猫鼬而不是快递抓住？我怎样才能得到快递来捕捉错误？我可以快速捕获在单独的刻度上引发的错误吗？（这是我应该报告表达的东西吗？）

我想避免 process.error 因为我希望能够将消息发送回该用户。我意识到可以调用“下一个”并出现错误，我更关心来自其他库的其他异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:27:58.297

> 我意识到可以调用“下一个”并出现错误，我更关心来自其他库的其他异常。

我怀疑您对此感到担忧，因为您具有其他编程语言的背景（至少我的情况是这样）。最后，您不太可能在异步代码中看到异常，因为这不是 Node.js 中的约定，仍然有可能但不太可能。这是来自 Isaac Schlueter 本人：

> “节点中的模式是同步方法抛出，异步方法将错误作为第一个参数传递给回调。如果回调的第一个参数是错误的（通常为 null 或未定义），那么一切都很好。” [https://groups.google.com/d/msg/nodejs/W9UVJCKcJ7Q/rzseRbourCUJ](https://groups.google.com/d/msg/nodejs/W9UVJCKcJ7Q/rzseRbourCUJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T01:46:20.517

您应该使用回调返回错误，而不是抛出异常`next`，然后您的应用程序的错误处理程序可以处理该错误。

如果您调用的函数可能会抛出自己的错误，请将它们包装在一个`try`子句中，并使用您在 中捕获的错误调用回调`catch`。这是一个例子：

```
server.get('/api/test', function (req, res, next) {
  process.nextTick(function () {
    try {
      functionWhichWillThrowAnError();
    } catch (error) {
      next(error);
      return;
    }
    res.send('everything is okay!');
  });
}); 
```

# r - 在ggplot2中覆盖多个geom_tile图

> ID：14492512
> 
> 赞同：4
> 
> 时间：2013-01-24T01:36:52.437
> 
> 标签：r, ggplot2, heatmap

我的第一个问题，希望它的措辞正确。我在这方面找不到任何东西，所以我会咬紧牙关。

我想创建一个`geom_tile`图，其中对于 和 的每个组合`x`，`y`我有 5 个变量，它们的`z`总和为 1。我想要每个`x-y`组合的正方形颜色来反映哪个`z`数字最大。例如，假设我有 5个`z`变量`a`、`b`、`c`和。如果和，则正方形为蓝色，如果和为红色，以此类推。如果和 其他为零，则为插值颜色（即紫色）。也许更好，红色和蓝色的交叉影线，但我不知道这是否可能在.`d``e``a=1``b=c=d=e=0``b=1``a=c=d=e=0``a=b=0.5``ggplot`

我不确定如何最好地继续前进。我考虑过`geom_tile`在彼此之上绘制 5 个图，其中每个图都是不同的颜色，并且 alpha 按例如 a 的值缩放（因此单元格在 时是透明的，`a = 0`而在 时是强烈着色的`a = 1`）。也可能有一种方法可以使用颜色渐变，但我也在那里画了一个空白。

如果有人能不费吹灰之力地看到如何做到这一点，我将不胜感激。这是一个与我的实际数据格式相同的随机数数据集。

```
rand <- matrix(runif(50*50*5), ncol=5, nrow=50*50)
rand <- rand / apply(rand, 1, sum) # Make sure the numbers sum to one in each row
d <- data.frame(a = rand[,1],
                b = rand[,2],
                c = rand[,3],
                d = rand[,4],
                e = rand[,5],
                expand.grid(x = 1:50, y = 1:50)) 
```

更新：通过使用 sebastian-c 的第一个答案和我自己的数据集，我能够制作这个数字。我使用 RColorBrewer 包中的 brewer.pal(5,"Spectral") 函数获得了颜色。需要一个自定义图例，但除此之外我很满意。纯色显示纯粹的“进化稳定策略”（ESS；即不能被突变策略击败的策略）。重叠颜色区域显示混合 ESS，其中平衡是两种或多种策略的稳定平衡。

![重叠的 geom_tile 绘图 ESS](../Images/cdbd61705cab59240d315a0ae9ea8e18.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:07:07.380

我冒昧地将您的示例简化为 3 列。老实说，我认为这不适用于 2 以上，但这就是我的做法。我也滥用了 alpha 通道，所以如果你以不同的顺序放置瓷砖，颜色就会改变。这应该有望成为其他人的起点。首先，我们将生成数据：

```
set.seed(100)

rand <- matrix(runif(100*3), ncol=3, nrow=100)
rand <- rand / apply(rand, 1, sum) # Make sure the numbers sum to one in each row
d <- data.frame(a = rand[,1],
                b = rand[,2],
                c = rand[,3],
                expand.grid(x=1:10, y=1:10)) 
```

现在的情节：

```
ggplot(d, aes(x=x, y=y))+
  theme_bw() + #For a clearer background
  geom_tile(alpha=d$a, fill="red")+
  geom_tile(alpha=d$b, fill="blue")+
  geom_tile(alpha=d$c, fill="green")+
  theme(panel.grid.major=element_blank()) 
```

![在此处输入图像描述](../Images/70b7612331cda43f3a4c7e9bcf0638a9.png)

我在考虑，对于 3 列，使用红色、绿色和蓝色的数量，但这不适用于大于 3 列的任何内容。

编辑：最多 3 列的特定解决方案（我混合了蓝色和绿色）：

```
d2 <- data.frame(col=rgb(rand), expand.grid(x=1:10, y=1:10))

ggplot(d2, aes(x=x, y=y)) +
  theme_bw()+
  geom_tile(aes(fill=col))+
  scale_fill_identity() 
```

![在此处输入图像描述](../Images/17fe1fba528ed332999943ca4be5c670.png)

如果将红色、绿色或蓝色中的一种设置为 0，则可以使用 2 种颜色来执行此操作。

# javascript - 了解返回 2 个值的 JavaScript 函数

> ID：14492513
> 
> 赞同：0
> 
> 时间：2013-01-24T01:36:54.213
> 
> 标签：javascript, recursion

我有以下函数可以找到 2 个整数的最大公约数。我不明白 return bestCommonDivisor(b, (a % b)); 中发生了什么 部分。

如果我做 bestCommonDivisor(8, 12) 我得到 4 这是正确的，但是当我尝试评估 return bestCommonDivisor(b, (a % b)); 我得到的部分 (12, (8 % 12)) 简化为 (12, 0) 这怎么等于 4？

```
// Finds greatest common divisor
function greatestCommonDivisor(a, b) {
    if (b == 0) {
        return a;
    }

    return greatestCommonDivisor(b, (a % b));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:43:03.203

该函数使用递归调用自身，直到满足返回实际答案的基本条件。

发生以下情况`greatestCommonDivisor(8, 12)`时：

1.  b != 0 所以调用 bestCommonDivisor(12, 8 % 12) //8 % 12 = 8
2.  b != 0 所以调用 bestCommonDivisor(8, 12 % 8) // 12 % 8 = 4
3.  b != 0 所以调用 bestCommonDivisor(4, 8 % 4) // 8 % 4 = 0
4.  b == 0 所以返回 4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:40:03.413

这是一个递归函数。它不返回两个值，它`a`在使用不同的（较小的）参数一遍又一遍地调用自己之后返回，直到`b`等于`0`（意思是，你不能再除或取模了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T02:20:15.783

这是找出两个数字之间最大公约数的基本算法。

该函数使用其他两个参数返回对自身的调用，而不是像您想象的那样返回两个值 (b, (a%b)) :)

# azure - Azure 上的多租户 (SaaS) Web 应用，部署选项

> ID：14492516
> 
> 赞同：1
> 
> 时间：2013-01-24T01:37:27.647
> 
> 标签：azure

我正处于一个多租户 Web 应用程序的规划阶段，该应用程序主要面向美国客户，很可能托管在 Azure 上。

我正在查看各种定价/部署计划，并对以下内容感到好奇：

根据他们的网站：

> *在多租户环境中，每个子区域最多可免费运行 10 个网站。随着流量的增长，无缝升级到付费共享多租户或预留实例模型。*

以上是指同一站点的不同实例还是最多 10 个不同的站点？

还有人知道一个网站是否可以订阅多个 SQL Server 实例吗？例如数据库的最大限制，大小为 150 GB。

考虑到其增长潜力，我的预期网站在前六个月可能拥有 100-200 名用户。我的基本计划是为每位客户提供至少 1GB 的数据存储空间。所以假设我超过了 150GB 的限制，那么我可以为同一个站点添加额外的数据库吗？

我对整个云计算很陌生，所以请耐心等待并分享您的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:08:16.920

我在 Azure 上有一个多租户应用程序，与您描述的不同。对于大型多租户应用程序，我会忘记网站并使用 Web 角色。我也会避免为每个客户端使用单独的站点，理想情况下，它们应该通过相同的角色运行，可以在多个实例上进行负载平衡。`site1.mysite.com`您仍然可以为每个单独的用户设置主机头（即），所有用户都运行相同的 Web 角色。

我的所有客户端都在同一个数据库中运行，这并不难实现并且可以更好地扩展（你认为谷​​歌每个客户端都有一个数据库？）。没有理由您以后不能访问更多数据库，或者您可以使用 SQL Azure 联合并为每个客户端建立一个联合，但要朝另一个方向发展要困难得多。如果您为每个客户端都有一个单独的数据库，那么您将不得不单独管理每个数据库（模式更新、备份），这可能需要更多的工作（和费用）。成本将影响这里的设计。一个 1gb 的数据库每月要花费 10 美元，所以如果您的客户每月只支付 20 美元，那它实际上是不可行的。但如果他们每月支付 1000 美元，那么这不是问题。

将您的应用程序设计为不使用会话，这并不难并且可以更好地扩展。

最后，SQL Azure 数据库不在超高端数据库服务器上运行。您需要优化数据访问并尽可能多地承担数据库服务器的负载。例如，使用 Azure 缓存来缓存参考数据，使用表存储来存储审核日志或类似的历史数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:12:14.550

我的 0.02 美元

1.  我认为这意味着您可以在免费模式下创建多达 10 个网站。如果您将其升级到共享或保留模式，您可以创建更多。

2.  您可以连接到任意数量的 SQL 服务器。我认为 Windows azure 网站中的 SQL Server 连接没有任何限制。但是，是的，目前最大数据库大小为 150GB。

3.  如果您计划默认为每个客户提供 1GB，我强烈建议您为每个客户创建一个单独的数据库。这提供了更好的安全边界、更简洁的架构和代码结构。

# css - 垂直居中文本的 CSS 填充问题

> ID：14492518
> 
> 赞同：0
> 
> 时间：2013-01-24T01:37:46.723
> 
> 标签：css, padding

我整天都在努力解决这个问题

我有一个用于我的表单的一些 jQuery 下拉列表的脚本，但是下拉列表中的文本在框中没有垂直居中。我已经为普通文本框设置了样式，`padding-bottom`以便文本位于中间，但我无法对 jQuery 框做同样的事情。我已经设法在实际的下拉列表中做到了，而不是您看到的选项。如果有人可以帮助使文本在框中垂直居中（而不是文本对齐中心），我将不胜感激。

[http://fifamatchgenerator.com/dev/formtest/form1.php](http://fifamatchgenerator.com/dev/formtest/form1.php)

我想我已经盯着它看太久了，对它视而不见……

ps dd.css 文件中可能有一些代码，这是我尝试过但失败的（大部分代码是脚本附带的默认代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T01:46:31.920

Get rid of your bottom padding, add a `height` and a `line-height`:

```
.ddlabel {
    height: 49px;
    line-height: 41px;
    padding-bottom: 0;
} 
```

The key component here is the `line-height`. This is how you can adjust the vertical position of the text. You can adjust it to your liking. Setting the height isn't completely necessary, but it will keep the drop down part of the menu properly positioned (this could be solved in other ways). Using padding for this isn't really a good idea - the `padding-bottom` can actually just be removed (I left it there as a reminder).

# function - 带有 x64 工作站的 GCC

> ID：14492520
> 
> 赞同：2
> 
> 时间：2013-01-24T01:38:01.547
> 
> 标签：function, gcc, assembly, stack, 64-bit

谁能向我解释为什么以下代码行 int main (int argc, char *argv[])

```
{
int i=17;
int output=0

.....

} 
```

被翻译成以下 x64 汇编代码：

```
pushq %rbp
movq %rsp, %rbp
subq $32, %rsp
movl %edi, -20(%rbp)
movq %rsi,-32(%rbp)
movl $17, -8(%rbp)
movl $0, -4(%rbp)
... 
```

我不明白为什么 SP 减少了 32。寄存器 %edi、%rsi 似乎对应于主代码中未使用的 argc 和 *argv[]。我认为 [%esp, %rbp] 之间的空间仅分配给局部变量而不是函数 args，因此在上面的代码中大小应该只有 8，即 rsp 应该减少 8 而不是 32。有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:55:42.897

知道 ... 部分会有所帮助。

我假设 gcc 决定 ... 部分需要寄存器，因此它将变量推入堆栈。

堆栈可用于任何局部变量或函数参数。SysV x64 ABI 的唯一要求是前几个函数参数从寄存器开始。

然后，该函数可以将参数移到堆栈上，并根据需要将局部变量带入寄存器，这取决于编译器！

不保证将本地变量放入堆栈！args 也不会留在寄存器中。

所以它推动了 argc 和 argv，然后它决定推动 i 和输出。那是 24 字节的空间。但是如果接下来是函数调用，则堆栈必须对齐到 16 个字节，因此达到 32 个字节。

试试 -O3 看看代码是否有变化。

换一种方式：

参数如下： %rdi %rsi %rdx %rcx %rbx %r8 %r9（堆栈上的额外参数）（红色区域）

是函数的开始。然后该函数可以对堆栈做任何它想做的事情。是的，随便！只要它以它进入的状态返回堆栈。

（注意，这是针对系统 V（除 windows 外的所有设备都使用），windows 不同）

# ruby-on-rails - Rails 没有发出 Ajax 请求

> ID：14492522
> 
> 赞同：1
> 
> 时间：2013-01-24T01:38:24.837
> 
> 标签：ruby-on-rails, ajax

有一个非常奇怪的问题。我正在关注*使用 Rails 进行敏捷 Web 开发（第 2 版）*，目前正在进行 Ajax 请求迭代。

**问题：**我的应用程序没有发出 AJAX 请求，而只是重定向到 store_path。

我的订单项创建操作如下所示：

```
 def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to(store_url) }
        format.js
        format.xml  { render :xml => @line_item,
          :status => :created, :location => @line_item }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @line_item.errors,
          :status => :unprocessable_entity }
      end
    end
  end 
```

添加到购物车如下所示：

```
 <%= button_to 'Add to Cart', line_items_path(:product_id => product),remote: true %> 
```

生成以下表格：

```
<form action="/line_items?product_id=3" class="button_to" data-remote="true" method="post"><div><input type="submit" value="Add to Cart"><input name="authenticity_token" type="hidden" value="euZKvTy2ioSTITELTb06ErJZfSeGBuzoMhUyHROvgjI="></div></form> 
```

我还将 create.js.rjs 放在 view/line_items 目录中，内容如下：

```
page.replace_html('cart', render(@cart)) 
```

**编辑：服务器日志**
嗯......似乎有一个错误`<%= javascript_include_tag :defaults %>`

```
Started GET "/" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Processing by StoreController#index as HTML
  Product Load (0.2ms)  SELECT "products".* FROM "products" ORDER BY title
  Cart Load (0.1ms)  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 22]]
  Rendered store/index.html.erb within layouts/application (7.6ms)
  LineItem Load (0.3ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 22
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 3 ORDER BY title LIMIT 1
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 4 ORDER BY title LIMIT 1
  Rendered line_items/_line_item.html.erb (6.7ms)
  Rendered carts/_cart.html.erb (12.4ms)
Completed 200 OK in 34ms (Views: 29.2ms | ActiveRecord: 1.1ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/depot.css?body=1" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /depot.css - 304 Not Modified (0ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/defaults.js" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /defaults.js - 404 Not Found (6ms)

ActionController::RoutingError (No route matches [GET] "/assets/defaults.js"):
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /var/lib/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)

Started GET "/assets/logo.png" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /logo.png - 304 Not Modified (2ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/ruby.jpg" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /ruby.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/rtp.jpg" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /rtp.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/wd4d.jpg" for 127.0.0.1 at 2013-01-23 17:43:05 -0800
Served asset /wd4d.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:05] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started POST "/line_items?product_id=3" for 127.0.0.1 at 2013-01-23 17:43:35 -0800
Processing by LineItemsController#create as HTML
  Parameters: {"authenticity_token"=>"euZKvTy2ioSTITELTb06ErJZfSeGBuzoMhUyHROvgjI=", "product_id"=>"3"}
  Cart Load (0.1ms)  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 22]]
  Product Load (0.1ms)  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY title LIMIT 1  [["id", "3"]]
  LineItem Load (0.1ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 22 AND "line_items"."product_id" = 3 LIMIT 1
   (0.1ms)  begin transaction
   (0.2ms)  UPDATE "line_items" SET "quantity" = 28, "updated_at" = '2013-01-24 01:43:35.930200' WHERE "line_items"."id" = 56
   (158.5ms)  commit transaction
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 168ms (ActiveRecord: 159.1ms)

Started GET "/" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Processing by StoreController#index as HTML
  Product Load (0.3ms)  SELECT "products".* FROM "products" ORDER BY title
  Cart Load (0.1ms)  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 22]]
  Rendered store/index.html.erb within layouts/application (6.1ms)
  LineItem Load (0.2ms)  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = 22
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 3 ORDER BY title LIMIT 1
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 4 ORDER BY title LIMIT 1
  Rendered line_items/_line_item.html.erb (4.7ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 28ms (Views: 23.5ms | ActiveRecord: 1.0ms)

Started GET "/assets/depot.css?body=1" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /depot.css - 304 Not Modified (0ms)
[2013-01-23 17:43:36] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/defaults.js" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /defaults.js - 404 Not Found (4ms)

ActionController::RoutingError (No route matches [GET] "/assets/defaults.js"):
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /var/lib/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)

Started GET "/assets/ruby.jpg" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /ruby.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:36] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/logo.png" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /logo.png - 304 Not Modified (0ms)
[2013-01-23 17:43:36] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/wd4d.jpg" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /wd4d.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:36] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/rtp.jpg" for 127.0.0.1 at 2013-01-23 17:43:36 -0800
Served asset /rtp.jpg - 304 Not Modified (0ms)
[2013-01-23 17:43:36] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:57:22.537

好吧，我发现了错误。我未能阅读错误信息。问题确实是没有加载javascript库。对于任何寻找解决方案的人来说，问题是`javascript_include_tag :all`在文件夹中查找 javascript 文件`/public/javascript`。要包含必要的 javascript 文件使用`javascript_include_tag :application`，它将在 .js 下包含 application.js `/app/assets/javascript/application.js`。

# c++ - 没有已知的从指针到引用到指针的转换

> ID：14492523
> 
> 赞同：4
> 
> 时间：2013-01-24T01:38:57.363
> 
> 标签：c++, inheritance, constructor

我有以下 g++ 错误

```
Menu.hpp:66:41: error: no matching function for call to ‘Menu::Stack<Submenu*>::push(Submenu*)’
Menu.hpp:66:41: note: candidate is:
Menu.hpp:14:21: note: void Menu::Stack<T>::push(T&) [with T = Submenu*]
Menu.hpp:14:21: note:   no known conversion for argument 1 from ‘Submenu*’ to ‘Submenu*&’ 
```

这样的转变怎么可能是不可能的呢？编译器在什么情况下会发出这样的错误？

至于我实际上在做什么：

*   我有一堂课
*   我有一个继承自 Submenu 的类 Menu
*   菜单有额外的类型字段`Stack<Submenu*>`映射记住打开的子菜单
*   Menu 的所有方法，如“打开菜单”、“单击菜单项”等，都是指当前位于堆栈顶部() 的子菜单。在 Submenu 类中，它们对对象本身进行操作。
*   Menu 有一个关闭当前子菜单并向上的公共方法——即从堆栈中弹出子菜单。
*   菜单可以弹出，直到它到达自身，见下文是什么意思。

现在是最有可能出现问题的部分，即 Menu 的构造函数：

```
Menu() { stack.push( (Submenu*)this ); } 
```

这样做是因为当所有菜单都关闭时，与 stack.top() 相关的方法应该引用菜单本身，它也是一种子菜单（因为它继承自它）。

# 编辑：

我已经制作了自己的类 Stack 而不是使用 std::stack （正如我最初建议的那样），并且正如答案中所指出的那样，问题存在。请原谅我的不准确之处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:46:09.210

Generally, you can only convert lvalues to references, not rvalues (a cast is an rvalue). You can convert rvalues to `const` references, which is probably what you really want here -- if you change `Stack::push` to take a `const T &` argument instead of a `T &`, the errors will go away.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:50:23.677

A`Submenu*&`可以分配任何`Submenu*`. 这样做有意义`(Submenu*)this`吗？不。

所以 C++ 阻止了你。

现在，您为什么`stack::push`要参考？不知道。

# jquery-ui - 验证 jQueryUi DatePicker

> ID：14492526
> 
> 赞同：0
> 
> 时间：2013-01-24T01:39:33.373
> 
> 标签：jquery-ui, datetimepicker

我在使用 jQueryUI DatePicker 时遇到了很多麻烦。

每当它失去焦点时，TextBox 的背景就会变成浅红色（可能表示日期无效）。

即使日期有效（en-AU），它也会这样做。

我写了以下代码：

```
$(function () {
    $('.date').each(function () {

        $(this).datepicker({
            dateFormat: 'dd/mm/yy',
            showOn: "both",
            buttonImage: '/Content/calendar.gif',
            buttonImageOnly: true
        });
    });

}); 
```

我也看了这个页面，好像不行： http: [//jqueryui.com/datepicker/#localization](http://jqueryui.com/datepicker/#localization) 如果你把右边的文本框设置为English-Australian，然后选择一个日期，它还在美国格式。

我还尝试添加：

```
$(this).datepicker($.datepicker.regional['en-AU']); 
```

任何想法将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:20:53.707

我过去遇到过这个问题。

您需要添加一个 javascript 文件才能使本地化正常工作。

以下是所有本地化文件的列表：http: [//view.jqueryui.com/selectmenu/ui/i18n/](http://view.jqueryui.com/selectmenu/ui/i18n/)。确保将其添加到您的`<head>`，您应该一切顺利。

希望这可以帮助！

* * *

***编辑：***

将此链接用于本地化脚本：

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/i18n/jquery-ui-i18n.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/i18n/jquery-ui-i18n.min.js)

我还提供了一个演示：http: [//jsfiddle.net/93RGW/139/](http://jsfiddle.net/93RGW/139/)

# java - 简单的自定义绘画错误

> ID：14492528
> 
> 赞同：1
> 
> 时间：2013-01-24T01:39:39.300
> 
> 标签：java, swing, awt, double-buffering

我刚开始重新编码，我想我忘记了如何加倍缓冲。这是我现在拥有的代码，我不确定我缺少什么。当我启动它时，只有一个白色的屏幕，没有椭圆形。

渲染的错误是什么？

```
import java.awt.Graphics;
import java.awt.Image;

import javax.swing.JFrame;

public class Graphs extends JFrame {

private Image dbImage;
private Graphics dbg;

public static void main(String[] args) {
    new Graphs();
}

public Graphs() {
    setSize(1000, 600);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setTitle("Graphs");
    setLocationRelativeTo(null);
    setVisible(true);
}

public void paint(Graphics g) {
    dbImage = createImage(getWidth(), getHeight());
    dbg = dbImage.getGraphics();
    paintComponent(dbg);
    dbg.drawImage(dbImage, 0, 0, this);
}

public void paintComponent(Graphics g) {
    g.drawOval(200, 200, 200, 200);
    repaint();
}
} 
```

## 更新：编译错误`@Override`

```
The method  paintComponent(Graphics) of type Graphs must override or implement a supertype method.

1 quick fix available:
-> Remove '@Override' annotation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:56:05.387

您没有看到椭圆的原因是您正在将图像绘制到它自己的`Graphics`对象上。代替：

```
dbg.drawImage(dbImage, 0, 0, this); 
```

和

```
g.drawImage(dbImage, 0, 0, this); 
```

最好不要`paint`在顶级容器中覆盖，而是`paintComponent`在子类中覆盖`JComponent`。也记得打电话

```
super.paintComponent(g); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T01:55:58.747

1.  您应该避免覆盖`paint`顶级
    组件（如`JFrame`）的方法，对您来说主要问题是它们不是双缓冲的，就像从`JComponent`
2.  不打电话`super.paint`是非常非常糟糕的。你基本上阻止了框架绘制它的任何子组件......
3.  您不应该在该`paint`方法中加载图像，它会减慢任何未来的重绘
4.  你永远不应该`repaint`从任何`paintXxx`方法调用，它会导致创建一个无限循环的绘画，迅速吞噬你的 CPU 周期
5.  `JFrame`没有`paintComponent`方法。
6.  优选地，通过该方法执行定制绘画`JComponent`（例如）。`JPanel``paintComponent`

**更新示例**

![在此处输入图像描述](../Images/a6b82a99a3aded6244053382412747f3.png)

```
public class BadPaint10 {

    public static void main(String[] args) {
        new BadPaint10();
    }

    public BadPaint10() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new PaintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        private BufferedImage background;

        public PaintPane() {
            try {
                background = ImageIO.read(new File("C:/Users/shane/Dropbox/pictures/436px-Work_with_exotic_creatures.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g.drawImage(background, x, y, this);

                x = (getWidth() - 200) / 2;
                y = (getHeight() - 200) / 2;
                g.setColor(Color.RED);
                g.drawOval(x, y, 200, 200);

            }

        }
    }
} 
```

如前所述，优先级很重要。元素绘制的顺序将影响结果。

你可能会发现

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

有用。

# objective-c - NSImage setImage：方法导致 ARC 内存泄漏？

> ID：14492529
> 
> 赞同：1
> 
> 时间：2013-01-24T01:39:46.503
> 
> 标签：objective-c, xcode, memory-leaks, automatic-ref-counting, nsimageview

我是 Apple 开发的新手（大约 3 个月），现在我所有项目都使用 Xcode 4.5.1 和 ARC。我试图在我的应用程序（也是**ARC**）中显示一个 mjpeg 视频。由于 mjpeg 编码是基于独立的 jpeg 图像，所以我使用**NSImageWell**来显示 mjpeg 流的每一帧。但是，当我切换框架时，我注意到**内存泄漏**。

.h 文件：

```
#import <Cocoa/Cocoa.h>

@interface AMCImagiaTestViewController : NSViewController
- (void) startVideo;
- (void) stopVideo;
@end 
```

.m 文件：

```
#import "AMCImagiaTestViewController.h"
#include "AMCCommonLib.h"   // My UNIX-like system call library. Used in the thread to call socket functions. Don't mind.
#import "TTImage.h"   // This is NSImage. I only add an NSLog() in -dealloc method

/* forward declaration for a POSIX thread which receives jpeg data.
 This thread receives jpeg images sent by a process of a Linux PC. 
 The socket content is simple enough: standard jpeg data started with 
 FFD8 and end with FFD9 */
void *threadReceiveFrameData(void *arg);

@interface AMCImagiaTestViewController ()
@property (nonatomic, assign) IBOutlet NSImageView *imageVideoFrame;  // the outlet to the image in nib file
@property (nonatomic, assign) pthread_t hdlThread;
/* here are some properties used in thread but I can close or release if I kill it outside its thread loop */
@property (nonatomic, assign) int sockFd;
@property (nonatomic, assign) BOOL isThreadRunning;
@property (nonatomic, retain) NSData *dataForImage;
@property (nonatomic, retain) TTImage *tempImage;
@end

@implementation AMCImagiaTestViewController
...   // some non-important methods

- (void) startVideo
{
    [self stopVideo];
    /* Start the receiving thread */    
    pthread_create(&_hdlThread, NULL, threadReceiveFrameData, (__bridge void*)self);
}

- (void) stopVideo
{
    if (_isThreadRunning)
    {
        pthread_cancel(_hdlThread);
        usleep(100000);
        pthread_join(_hdlThread, NULL);
        _hdlThread = 0;
        if (_sockFd)
        {
            simpleSocketClose(_sockFd);
            _sockFd = 0;
        }
    }
}

...
@end  // end of @implementation AMCImagiaTestViewController

// Now comes to the POSIX thread
void *threadReceiveFrameData(void *arg)
{
    @autoreleasepool {
        AMCImagiaTestViewController *ctrl;
        struct sockaddr_in sockMessage;
        uint8_t buff[60001];
        ssize_t dataLen;

        memset(buff, 0, sizeof(buff));
        ctrl = (__bridge AMCImagiaTestViewController*) arg;

        pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);
        ctrl.isThreadRunning = YES;

        /* socket(). create a UDP socket */
        ctrl.sockFd = simpleSocketCreate_udp();
        if (!ctrl.sockFd)
        {
            SYS_PERROR(); // a package of perror(). don't mind
            goto THREAD_EXIT;
        }

        /* bind(). 22222 is the local port */       
        if (simpleSocketBind_udp(ctrl.sockFd, 22222) < 0)
        {
            SYS_PERROR();
            goto THREAD_EXIT;
        }
        NSLog(@"pthread init OK");

        do
        {
            /* my package of recvfrom(). 
             The first NULL means receive from any IP.
             The second NULL means never timeout (using the select() system call) */
            dataLen = simpleSocketReceiveFrom_udp(ctrl.sockFd, NULL, &sockMessage, buff, sizeof(buff) - 1, NULL);
            if (dataLen > 0)
            {
                //NSLog(@"received: %ld", dataLen);
                ctrl.dataForImage = nil;
                ctrl.dataForImage = [NSData dataWithBytes:buff
                                                   length:dataLen];

                ctrl.tempImage = nil;
                ctrl.tempImage = [[TTImage alloc] initWithData:ctrl.dataForImage];

                /* MEMORY LEAK??? */
                /* These two lines causes memory leaks.
                 I would explain it outside this code block */
                [ctrl.imageVideoFrame setImage:nil];
                [ctrl.imageVideoFrame setImage: ctrl.tempImage];

            }
            else
            {
                SYS_PERROR();
            }
        }
        while (dataLen > 0);

    THREAD_EXIT:
        NSLog(@"pthread exit");
        ctrl.isThreadRunning = NO;
        if (ctrl.sockFd)
        {
            simpleSocketClose(ctrl.sockFd);
            ctrl.sockFd = 0;
        }
        pthread_exit(NULL);
    }
} 
```

**“内存泄漏？？？”的**解释** 在代码块中：
这一行设置 NSImageWell 以显示图像。如果我继续传输 jpeg 数据，我注意到这个应用程序的内存一直在上升，并且不会显着下降。我添加了“= nil”，试图创建一个 [..release] 方法，但这不起作用。但是，如果我注释掉这两行，就不会再注意到内存泄漏（而且我的视频功能也没有实现......）**

 **有什么建议么？或者我应该切换到非 ARC 模式来检查这个问题？非常感谢！！

**1 月 25 日的较新研究：**
我创建了另一个**没有 ARC的简单项目**

NSImage 仍被归类为 TTImage（TT 表示 TestT）为：
.m 文件：

```
@implementation TTImage
- (id)retain{
    NSLog(@"%08x retain", (unsigned int)self);
    return [super retain];
}
- (oneway void)release{
    NSLog(@"release");
    return [super release];
}
- (void)dealloc{
    NSLog(@"%@ deallocated.", self);
    return [super dealloc];
}
@end 
```

pthread 现在在 App 委托文件中定义：

```
 ...   // AppDelegate implementations

#define AMCRelease(obj) if(obj) {[(obj) release]; (obj) = nil;}

void *threadReceiveFrameData(void *arg)
{
    @autoreleasepool
    {
        AMCAppDelegate *ctrl;
        NSImage *lastImage;
        struct sockaddr_in sockAddr;
        uint8_t buff[60001];
        ssize_t dataLen;
        NSData *dataInThread = nil;
        TTImage *imageInThread = nil;

        ctrl = (AMCAppDelegate*)arg;
        memset (buff, 0, sizeof(buff));

        ...
        // the same initialization as before

        NSLog(@"pthread init.");

        do {
            dataLen = simpleSocketReceiveFrom_udp(ctrl.sockFd, NULL, &sockAddr, buff, sizeof(buff) - 1, NULL);
            if (dataLen > 0)
            {
                printf("\n");
                AMCRelease(dataInThread);
                dataInThread = [NSData dataWithBytes:buff length:dataLen];
                NSLog(@"%d data rc: %ld", __LINE__, [dataInThread retainCount]);  // Line 100

                if (imageInThread)
                {
                    NSLog(@"%d image pre rc: %ld", __LINE__, [imageInThread retainCount]);  // Line 104
                    //lastImage = imageInThread;
                }               
                AMCRelease(imageInThread);

                imageInThread = [[TTImage alloc] initWithData:dataInThread];
                NSLog(@"%d data rc: %ld", __LINE__, [dataInThread retainCount]);  // Line 110
                NSLog(@"%d image rc: %ld", __LINE__, [imageInThread retainCount]);  // Line 111

                //[ctrl.imageVideoFrame setImage:nil];
                [ctrl.imageVideoFrame setImage:imageInThread];
                NSLog(@"%d image rc: %ld", __LINE__, [imageInThread retainCount]); // Line 115
                //NSLog(@"image last rc: %ld", [lastImage retainCount]);
            }
            else
            {
                SYS_PERROR();
            }
        } while (dataLen > 0);

    THREAD_EXIT:
        AMCRelease(dataInThread);
        AMCRelease(imageInThread);
        if (ctrl.sockFd)
        {
            simpleSocketClose(ctrl.sockFd);
            ctrl.sockFd = 0;
        }
        pthread_exit(NULL);
    }
} 
```

然后我将几个 jpeg 发送到应用程序。以下是输出（忽略每一行的标题）：

```
pthread init.
100 data rc: 1 
110 data rc: 2 
111 image rc: 1 
0067d890 retain    <-- looks OK
115 image rc: 2

100 data rc: 1 
104 image pre rc: 2
release 
110 data rc: 2 
111 image rc: 1 
0067d890 retain   <-- What???  Leaks???
0067d890 retain   <-- What???
00632ba0 retain   <-- looks OK
115 image rc: 2
100 data rc: 1 
104 image pre rc: 2
release 
110 data rc: 2 
111 image rc: 1 
00632ba0 retain  <-- What???
00632ba0 retain  <-- What???
0069d580 retain 
115 image rc: 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:17:11.557

好的，我想我可能会解决我的问题。只需在 ARC 项目的 do-while 块中添加 @autoreleasepool 即可。喜欢：

```
 do {
        @autoreleasepool{
            dataLen = ...

            ... // previous codes need no change

            else
            {
                SYS_PERROR();
            }
        } // release pool ends
    } while (dataLen > 0); 
```

但是，我仍然不知道为什么我后来研究了非 ARC 之一。**

# ios - UISwipeGesture 不适用于侦听 touchesBegan 的视图

> ID：14492532
> 
> 赞同：1
> 
> 时间：2013-01-24T01:40:16.347
> 
> 标签：ios, uiswipegesturerecognizer

我正在使用星级控制。

[https://github.com/erndev/EDStarRating](https://github.com/erndev/EDStarRating)

我需要的是，当用户在该控制器上向左滑动时，会触发一个方法。因此，我在该视图上添加了滑动手势。

```
UISwipeGestureRecognizer* gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeHappened)];
gesture.direction  = UISwipeGestureRecognizerDirectionLeft;
gesture.numberOfTouchesRequired = 1;
[self.view addGestureRecognizer:gesture]; 
```

但我想，控制器的触摸识别器取消了滑动手势识别器。

那么我错在哪里了？我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:42:42.613

```
[self.view addGestureRecognizer:gesture]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:24:55.897

iOS 中提供的所有手势都只是对触摸和拖动事件的封装。

I. 如果您的视图上存在触摸事件委托，则手势识别将无法在同一视图上工作。

二、如果您在基础视图上有一个子视图，并且基础视图存在触摸事件委托，并且您想在子视图上实现手势，那么您可以这样做，只需告诉已实现的手势以取消其上可用的触摸由于基础视图。您可以在手势上使用**cancelTouchesInView**方法来实现这一点。如果您是第二种情况，请在您的手势实现代码中添加以下行。

```
gesture.cancelTouchedInView = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:55:37.160

如果它上面有其他手势识别器，请让您的控制器成为滑动手势的代表并`YES`返回`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`

# javascript - 什么 HTTP 状态代码在 XMLHttpRequest 上触发错误事件

> ID：14492534
> 
> 赞同：7
> 
> 时间：2013-01-24T01:40:36.893
> 
> 标签：javascript, error-handling, event-handling, xmlhttprequest, dom-events

我已经阅读了我能找到的所有规范，甚至是 ProgressEvents 的 W3 以及`XMLHttpRequest`，我发现关于 WHICH 状态代码（或 What response）在异步 XHR 请求上触发 Error 事件的方式很糟糕。我能找到的最多的是对检查对象上的状态代码本身并进行处理的引用，它通常将除 200 之外的任何内容视为错误，但来自 POST 的 3xx 重定向不是错误（我不记得如果 XHR 将自动遵循重定向）有人可以帮助我或为我指出关于启动`onerror`事件的所有响应的规范（无库）的正确方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T05:57:47.553

`onerror`仅针对网络级事件触发，这意味着`onload`如果响应成功，则无论 HTTP 状态代码如何都会触发。有关更多讨论，请参阅此问题：[XMLHttpRequest 的 onerror 处理程序何时触发](https://stackoverflow.com/questions/10584318/when-should-xmlhttprequests-onerror-handler-fire)

# python - 将 Django 项目推送到 Heroku 时出错

> ID：14492538
> 
> 赞同：1
> 
> 时间：2013-01-24T01:41:06.453
> 
> 标签：python, django, heroku, python-2.7

我一直在尝试修复这个错误大约一个小时，但我已经用完了解决方案，所以请帮助我。

> heroku 创建

运行良好没有问题

> git push heroku 大师

```
 Counting objects: 119, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (118/118), done.
Writing objects: 100% (119/119), 1.39 MiB | 66 KiB/s, done.
Total 119 (delta 4), reused 0 (delta 0)
-----> Python app detected
-----> No runtime.txt provided; assuming python-2.7.3.
-----> Preparing Python runtime (python-2.7.3)
-----> Installing Distribute (0.6.34)
-----> Installing Pip (1.2.1)
-----> Installing dependencies using Pip (1.2.1)
       Downloading/unpacking Django==1.4.3 (from -r requirements.txt (line 1))
         Running setup.py egg_info for package Django

       Downloading/unpacking dj-database-url==0.2.1 (from -r requirements.txt (line 2))
         Downloading dj-database-url-0.2.1.tar.gz
         Running setup.py egg_info for package dj-database-url

       Downloading/unpacking psycopg2==2.4.6 (from -r requirements.txt (line 3))
         Running setup.py egg_info for package psycopg2

           no previously-included directories found matching 'doc/src/_build'
       Downloading/unpacking virtualenv==1.8.4.post1 (from -r requirements.txt (line     4))
         Could not find a version that satisfies the requirement virtualenv==1.8.4.post1 (from -r requirements.txt (line 4)) (from versions: )
       No distributions matching the version for virtualenv==1.8.4.post1 (from -r requirements.txt (line 4))
       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app

 To git@heroku.com:[blocked].git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:[blocked].git' 
```

需求文件：

```
 >Django==1.4.3
 >dj-database-url==0.2.1
 >psycopg2==2.4.6
 >virtualenv==1.8.4.post1 
```

过程文件

> 网页：python manage.py runserver 0.0.0.0:$PORT --noreload

Heroku 日志：

```
 The 'heroku' gem has been deprecated and replaced with the Heroku Toolbelt, download and install from https://toolbelt.heroku.com.

2013-01-24T01:22:06+00:00 heroku[api]: Enable Logplex by [private email]@yahoo.com
2013-01-24T01:22:06+00:00 heroku[api]: Release v2 created by [private email]@yahoo.com
2013-01-24T01:22:42+00:00 heroku[slugc]: Slug compilation started
2013-01-24T01:23:38+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T01:43:26+00:00 heroku[slugc]: Slug compilation started
2013-01-24T01:43:51+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T02:27:36+00:00 heroku[slugc]: Slug compilation started
2013-01-24T02:28:08+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T02:32:08+00:00 heroku[slugc]: Slug compilation started
2013-01-24T02:32:32+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T02:43:32+00:00 heroku[slugc]: Slug compilation started
2013-01-24T02:43:59+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T02:46:23+00:00 heroku[slugc]: Slug compilation started
2013-01-24T02:46:52+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app
2013-01-24T02:49:48+00:00 heroku[slugc]: Slug compilation started
2013-01-24T02:50:26+00:00 heroku[slugc]: Slug compilation failed: failed to compile Python app 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:24:03.773

我能够通过以下方式运行它：

1.  克隆你的 git 仓库
2.  从`virtualenv==1.8.4`你的`requirements.txt`
3.  `git add .`
4.  `git commit -m "removing virtualenv requirement"`
5.  `git push heroku master`

我假设您没有`git add .`，并且`git commit`在从您的要求中删除了 virtualenv 之后。您对存储库所做的任何更改`git`都不会生效，对于`github`和`heroku`，直到您在本地`add`进行`commit`更改，最后`push`将它们发送到远程存储库，即**Github**或**Heroku**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:32:18.987

错误消息表明它找不到`virtualenv==1.8.4.post1`，当我在本地尝试该命令时，我得到了同样的错误。pypi 中似乎不存在该版本。尝试将您的 requirements.txt 更改为`virtualenv==1.8.4`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T04:19:42.047

对于heroku 部署，您不需要requirement.txt 文件中的**virtualenv==1.8.4.post1**，请将其删除并将procfile 和需求放在git 的根目录中。

# javascript - 在没有内联事件的情况下调用 javascript 函数

> ID：14492540
> 
> 赞同：0
> 
> 时间：2013-01-24T01:41:29.153
> 
> 标签：javascript, jquery, html, css, unobtrusive-javascript

我正在尝试使用用户喜欢的颜色突出显示单元格。用户将选择一个单元格并拖动鼠标以选择他们想要用所选颜色着色的多个单元格。当用户在不使用内联事件处理程序的情况下单击并拖动鼠标时，如何触发位于单独文件中的 javascript 函数（我知道我必须将文件包含到 html 文件中，我已经这样做了）。

该代码用于拖动和选择，但我想在用户单击并拖动单元格时调用此函数。在我使用 google.setOnLoadCallBack 调用此函数之前，但这只会调用一次。我希望用户有多个选择。我希望我是有道理的。

**HTML**

```
<section id="importance">
   <label class="green">Green</label>
   <input type="radio" name="importance" value="green">

   <label class="yellow">Yellow</label>
   <input type="radio" name="importance" value="yellow">

   <label class="orange">Orange</label>
   <input type="radio" name="importance" value="orange">

   <label class="red">Red</label>
   <input type="radio" name="importance" value="red">
</section>

<table cellpadding="0" cellspacing="0" id="our_table">
  <tr>
   <td>a</td>
   <td>b</td>
   <td>c</td>
  </tr>
  <tr>
    <td>d</td>
    <td>e</td>
    <td>f</td>
  </tr>
  <tr>
    <td>g</td>
    <td>h</td>
    <td>i</td>
  </tr>
</table> 
```

**Javascript**

```
function select_multiple() {
  var isMouseDown = false;
  // id for all the cells that were selected at the same time
  var colorGroupId = Math.floor(Math.random() * 1000);
  var highlight = find_importance_color();
  $("#our_table td")
    .mousedown(function () {
      isMouseDown = true;
      $(this).toggleClass(highlight);
      $(this).attr("data-highlightedId", colorGroupId);
      return false; // prevent text selection
  })
  .mouseover(function () {
    if (isMouseDown) {
      $(this).addClass(highlight);
    }
  });

  $("#our_table td")
    .mouseup(function (event) {
    isMouseDown = false;
    // time_importance(event);
  });
}

function find_importance_color() {
    return $('#importance input[name=importance]:checked').val();
} 
```

**CSS**

```
.green {
  background-color: green;
}

.yellow {
  background-color: yellow;
}

.orange {
  background-color: orange;
}

.red {
  background-color: red;
}

table td {
  width:100px;
  height:100px;
  text-align:center;
  vertical-align:middle;
  background-color:#ccc;
  border:1px solid #fff;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T01:55:13.093

将初始化函数传递给 jQuery 就绪处理程序：

```
$(document).ready(select_multiple); 
```

jQuery 将在文档加载时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:08:18.427

通过最基本的更改，我相信您正在寻找的是我在这里所做的：

[http://jsfiddle.net/trakkasure/CtRYd/](http://jsfiddle.net/trakkasure/CtRYd/)

```
// On ready function.
$(function(){
      var isMouseDown = false;
  // id for all the cells that were selected at the same time
  var colorGroupId = Math.floor(Math.random() * 1000);
  var remove = false;
  $("#our_table td")
    .mousedown(function () {
      var highlight = find_importance_color();
      isMouseDown = true;

      remove = $(this).hasClass(highlight);
      if (remove)
        $(this).removeClass(highlight);
      else $(this).addClass(highlight);
      $(this).data("highlightedId", colorGroupId);
      return false; // prevent text selection
  })
  .mouseover(function () {
    if (isMouseDown) {
      var highlight = find_importance_color();
      if (remove)
        $(this).removeClass(highlight);
      else $(this).addClass(highlight);
    }
  });

  $(document.body)
    .mouseup(function (event) {
    isMouseDown = false;
    // time_importance(event);
  });

  function find_importance_color() {
    return $('#importance input[name=importance]:checked').val();
  }
}) 
```

我删除了 select multiple 的外部函数调用，并根据是否设置了所选颜色来调整颜色的切换。

您只需要创建一次事件，所以这应该放在一个 jquery 文档就绪处理程序中。

此外，如果鼠标离开桌子，则不会触发鼠标向上事件。所以监听文档正文上的事件将解决这个问题。

# html - 使用 mysql 和 php 透视动态 html 表

> ID：14492552
> 
> 赞同：1
> 
> 时间：2013-01-24T01:42:52.463
> 
> 标签：html, html-table, pivot

这是我当前的代码。

```
<?php
$query_production ="SELECT uploadedby, uploaddate, count(uploadedby) as items, date_format(uploaddate,'%m-%d-%Y') as date FROM imsexport WHERE uploaddate between '2013-01-01' and '2013-01-03' GROUP BY uploadedby, date ORDER BY uploadedby";
$production = mysql_query($query_production,$prepress) or die (mysql_error());
$row_production = mysql_fetch_assoc($production);
?>

<html>
<head>
<title>Untitled Document</title>
</head>
<body>
<table width="200" border="1">
   <tr>
      <td>uploadedby</td>
      <td>uploaddate</td>
      <td>items</td>
      <td>date</td>
   </tr>
 <?php do {?>
   <tr>
     <td><?php echo $row_production['uploadedby']?></td>
     <td><?php echo $row_production['uploadedby']?></td>
     <td><?php echo $row_production['items']?></td>
     <td><?php echo $row_production['date']?></td>
  </tr> 
```

结果显示为：

```
 uploadedby              uploaddate           items   date
Adonis Abiera       2013-01-01 08:03:00     64  01-01-2013
Adonis Abiera       2013-01-02 05:30:00     46  01-02-2013
Aileen Alina        2013-01-02 16:29:00     15  01-02-2013
Aileen Mosende      2013-01-01 07:54:00     98  01-01-2013
Aileen Mosende      2013-01-02 06:00:00     69  01-02-2013
Ailyn Barnum        2013-01-01 09:21:00     84  01-01-2013
Ailyn Barnum        2013-01-02 09:16:00     55  01-02-2013
Alexander Dulay     2013-01-02 08:15:00     64  01-02-2013
Alfredo Santiago    2013-01-01 08:02:00     79  01-01-2013
Alfredo Santiago    2013-01-02 06:06:00     59  01-02-2013
Analyn Reyes        2013-01-01 09:04:00     65  01-01-2013
Analyn Reyes        2013-01-02 09:33:00     51  01-02-2013
Andresito Muzones   2013-01-01 08:37:00     60  01-01-2013
Andresito Muzones   2013-01-02 08:45:00     72  01-02-2013
Angelica Domingo    2013-01-01 09:28:00     68  01-01-2013
Angelica Domingo    2013-01-02 09:40:00     59  01-02-2013
Arman Romanca       2013-01-01 09:23:00     73  01-01-2013
Arman Romanca       2013-01-02 10:14:00     64  01-02-2013
Don Feliciano       2013-01-01 09:13:00     70  01-01-2013
Don Feliciano       2013-01-02 06:11:00     56  01-02-2013 
```

我想这样显示它：

```
uploadedby         01-01-2013    01-02-2013
Adonis Abiera         64            46
Aileen Alina           0            15
Aileen Mosende        98            69
Ailyn Barnum          84            55
Alexander Dulay        0            64
Alfredo Santiago      79            59
Analyn Reyes          65            51
...... and so on 
```

请注意，某些日期可能不存在某些记录。前（Aileen Alina 和 Alexander Dulay 的记录）。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:49:52.063

如果您想在 MySQL 中执行此操作，则可以使用带有表达式的聚合函数对数据进行*透视：*`CASE`

```
select uploadedby,
  count(case 
        when date_format(uploaddate,'%m-%d-%Y') = '01-01-2013'
        then uploadedby end) as `01-01-2013`,
  count(case 
        when date_format(uploaddate,'%m-%d-%Y') = '01-02-2013'
        then uploadedby end) as `01-02-2013`        
from imsexport
where uploaddate between '2013-01-01' and '2013-01-03'
group by uploadedby 
```

或者，如果您不想重复，`date_format()`则可以使用子查询：

```
select uploadedby,
  count(case when date = '01-01-2013' then uploadedby end) as `01-01-2013`,
  count(case when date = '01-02-2013' then uploadedby end) as `01-02-2013`        
from
(
  select uploadedby, date_format(uploaddate,'%m-%d-%Y') date
  from imsexport
  where uploaddate between '2013-01-01' and '2013-01-03'
) src
group by uploadedby 
```

如果您需要动态执行此操作，则可以在 MySQL 中使用准备好的语句。这将获得需要为列的日期列表：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'count(case when date = ''',
      date_format(uploaddate,'%m-%d-%Y'),
      ''' then uploadedby end) AS `',
      date_format(uploaddate,'%m-%d-%Y'), '`'
    )
  ) INTO @sql
FROM imsexport
where uploaddate between '2013-01-01' and '2013-01-03';

SET @sql = CONCAT('SELECT uploadedby, ', @sql, ' 
                  FROM
                  ( 
                    select uploadedby, date_format(uploaddate,''%m-%d-%Y'') date
                    from imsexport
                    where uploaddate between ''2013-01-01'' and ''2013-01-03''
                  ) src
                  GROUP BY uploadedby');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/ec418/3)

如果您担心自己可能会丢失日期，那么我建议您创建一个日历表，您可以从中获取日期列表，然后将日历表加入您的`imsexport`表中，以确保您拥有所有日期，即使当天没有上传。

# php - 无法让 preg_replace() 查找文本

> ID：14492556
> 
> 赞同：0
> 
> 时间：2013-01-24T01:43:21.560
> 
> 标签：php, regex, preg-replace, preg-match, pcre

我得到了我原来的正则表达式的工作，我想我可以让这个工作，因为它非常相似；但是，我不能。

此代码用于模板系统，其中链接由 javascript 或 HTML 替换，具体取决于用户浏览器上是否启用了 JS。

示例字符串如下所示： `help{:footerlink}{::helpFooter}`

“帮助”将是链接本身中显示的文本。“footerLink”是应该应用于链接的 CSS 类 “helpFooter”是应该应用于链接的 CSS id

这是我尝试使用的代码：

```
$string = 'help{:footerlink}{::helpFooter}';
$classIDExp = '/([a-z0-9]+)\{:([a-z0-9]+)\}\{::([a-z0-9]+)\}/i';

$display = preg_replace($idexp, "$1", $string);
$class = preg_replace($idexp, "$2", $string);
$cssID = preg_replace($idexp, "$3", $string);

$curLink = 'Display Text: ' . $display . '<br />' .
           'Class: ' . $class . '<br />CSS ID: ' . $cssID;

echo $curLink; 
```

此代码输出：

```
Display Text: help{:footerlink}{::helpFooter}
Class: help{:footerlink}{::helpFooter}
CSS ID: help{:footerlink}{::helpFooter} 
```

正确的输出是：

```
Display Text: help
Class: footerlink
CSS ID: helpFooter 
```

链接ID检索得很好，但是找不到显示文本、css类和css ID。我也尝试转义冒号 (:)，但它仍然显示相同的输出。

非常感谢任何帮助，因为正如我之前所说，我远非正则表达式专家。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:49:46.250

```
if (preg_match($classIDExp, $string, $match)) {
  $display = $match[1];
  $class = $match[2];
  $cssID = $match[3];
} 
```

# python - 如何让python打开一个应用程序并使用它？

> ID：14492557
> 
> 赞同：1
> 
> 时间：2013-01-24T01:43:29.903
> 
> 标签：python, macos, minecraft, bukkit

我有一个在我的 Mac 上运行的 Minecraft Bukkit 服务器。我也经常出差，让服务器重启很痛苦。**我是否有可能拥有一个可以使用停止**命令关闭服务器的 Python 2.7.3 脚本。然后我希望脚本等待 30 秒，然后重新打开服务器。我希望脚本也位于每 6 小时重新启动服务器的计时器上。

我的主要问题是，是否有任何模块、库或方法可供我完成此任务，如果需要，我在哪里可以找到更多信息？

```
print "Hello - This is the Bukkit Restart Program!"
"\n"
print "It will restart the minecraft server every 6 hours" 
```

---- 伪代码 ----

```
def RESTART():
    OUTCOME = None
    Every 6 hours:
        if program can open start_server.command:
            print "stop" in start_server.command
            wait 30 seconds
            open start_server.command
            OUTCOME = 1
        else:
             print "Error encountered!!"
             OUTCOME = 0
    return OUTCOME

def check():
    log = open("log.txt", "a+")
    if OUTCOME = 1:
        log.write("\n <insert time> SUCCESS!")
    else:
        log.write("\n <insert time> FAILURE! PLEASE CHECK CODE!")
    log.close()
RESTART()
check() 
```

对不起，如果我的问题太天真，但我是一个业余程序员！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:53:02.500

用于这项工作的一个好工具是[`cron`](http://en.wikipedia.org/wiki/Cron). 它安装在 Mac 上，专为按特定时间间隔运行任务而设计。

我会制作一个 python 脚本来运行您的命令（查看[`subprocess`](http://docs.python.org/2/library/subprocess.html#subprocess.call)模块）并执行您想要的任何错误检查，然后将其设置为 cron 作业。

设置 cron 作业的基本过程是这样的：

```
# (in a terminal)
# This opens up your crontab file, which lists all your scheduled jobs
crontab -e 
```

然后添加几行，例如：

```
0 0 * * *  python /path/to/your/script.py
0 12 * * * python /path/to/your/script.py 
```

这将在每天午夜和中午运行一次您的脚本。

# javascript - 有没有像 Firefox 中的暂存器一样工作的 Chrome 应用程序？

> ID：14492562
> 
> 赞同：33
> 
> 时间：2013-01-24T01:43:59.443
> 
> 标签：javascript

您好，我正在寻找与 Firefox 中的暂存器类似的 Chrome 扩展程序或应用程序，我可以在其中编写和测试 Javascript！

* * *

## 回答 #1

> 赞同：-15
> 
> 时间：2013-01-24T01:49:58.850

Chrome 开发者工具。它是一组工具……供开发人员使用……默认情况下已安装，但您可以为其添加更多功能。在这种情况下，您无需安装任何东西...

看看：[Chrome 开发者工具 - 控制台](https://developers.google.com/chrome-developer-tools/docs/console)。

# c++ - Translating Python to C++: lists and tuples

> ID：14492566
> 
> 赞同：1
> 
> 时间：2013-01-24T01:44:38.923
> 
> 标签：c++, python, performance, translation, tuples

I am currently in the process of translating a block of Python code to C++ for speed purposes. This is the code as is (note, qsort is a quick sort I wrote myself):

```
base = sys.stdin.readline().split()
n = int(base[0])
m = int(base[1])
mult = m * 10
count = 1
output = []

while count != (n+1):

    hold = output + []
    if (n - count) + 1 >= mult:
        rev = mult
    else:
        rev = n - count + 1

    while rev != 0:
        temp = sys.stdin.readline().split()
        hold.append((int(temp[0])*count,temp[1], count))
        count += 1
        rev -= 1

    hold = qSort(hold,len(hold))
    output = hold[:m] 
```

In essence, I am taking a few lines of input, adding them to a temporary list called hold, which holds new items and the existing output, and then my quicksort sorts the items according to their value (given as the first element/integer in the appended tuple). In Python this process is pretty simple, as I simply keep a list of tuples as hold and output, and each tuple contains three items: (1) integer used for sorting, (2) string, (3) integer. I was wondering what the best way to translate this to C++ was. Should I maintain 3 separate arrays and update all of them simultaneously, or should I use the list and tuples class. (Im trying to get my code to run as fast as it possibly can). Also, after deciding a method to use, how can I best translate the interplay between hold and output? How can I constantly *effectively* refresh hold at the beginning of the loop and *effectively* modify output at the end?

Any and all help is greatly appreciated! Cheers, mates!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:09:24.897

应该可以重写您的 Python 以使其足够快。

首先，将所有输入收集到一个列表中。

其次，使用`list.sort()`方法函数对列表进行排序，并带有一个`key=`按数字排序的参数。

你自己的排序函数会比 Python 内置的排序慢。而且我不清楚代码在做什么，但它似乎不止一次调用 sort 函数（外部 while 循环每个循环运行一次 sort 函数）。按照我的建议重写，它应该非常快。

编辑：此代码是否与您的原始代码大致相同？

```
from operator import itemgetter
import sys

with sys.stdin as f:
    base = f.readline().split()
    n = int(base[0])
    m = int(base[1])

    hold = []
    for i, line in enumerate(f, 1):
        lst = line.split()
        weight = int(lst[0]) * i
        tup = (weight, lst[1], i)
        hold.append(tup)

hold.sort(key=itemgetter(0))
output = hold[:m]

for tup in output:
    print(tup[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:00:34.127

我对 python 不是很熟悉，也不能确切地说出你想要做什么，但这是我建议的路径。创建一个类或结构来保存在元组中找到的数据（三个成员：int、int、string）。创建一个将保存您的结构的向量，然后使用包含从输入文件读取的数据的结构填充此向量。最后，使用自定义排序函数对此向量调用排序。实现将与[这个问题](https://stackoverflow.com/questions/328955/how-to-use-stdsort-with-a-vector-of-structures-and-compare-function)非常相似，但我会在这里给你一个概述。

你的结构可能看起来像这样

```
struct mystruct{
  int int1;
  int int2;
  string str1;
  public mystruct(int i1, int i2, string s1){int1 = i1; int2 = i2; str1 = s1;}
} 
```

您的向量将像这样定义

```
vector<mystruct> myvector; 
```

您将使用与此类似的代码加载您的向量

```
mystruct ms(1,1,"text");
myvector.push_back(ms); 
```

您必须定义一个排序函数来比较结构的两个实例

```
bool compareStructs(mystruct i,mystruct j) { return (i.int1<j.int1); } 
```

然后使用 std::sort 对你的向量进行排序

```
std::sort(myvector.begin(),myvector.end(),compareStructs); 
```

# python - 添加“类”作为字典键

> ID：14492567
> 
> 赞同：3
> 
> 时间：2013-01-24T01:44:40.147
> 
> 标签：python, dictionary

我能够做到这一点：

```
{'class': 'foo'} 
```

但是当我这样做时：

```
dict(class='foo') 
```

我得到：

```
File "<stdin>", line 1
     {'class':}
             ^
SyntaxError: invalid syntax 
```

为什么 python 不能使用 'class' 作为 **kwarg？它可以很容易地使用 list、int、len... 作为关键字参数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T01:45:54.653

`list`, `int`, 和`len`不是关键字，它们是普通标识符。`class`是一个[关键字](http://docs.python.org/3/reference/lexical_analysis.html#keywords)。

# bash - How can I get pathname-expanded variable?

> ID：14492569
> 
> 赞同：0
> 
> 时间：2013-01-24T01:44:44.537
> 
> 标签：bash

all.

In bash's parameter syntax,

```
 name=val 
```

`val` does not get pathname-expansion.

How can I put pathname-expanded result to another variable?

```
$ ls foo*
foo.1
$ A="foo.*"
$ echo $A
foo.1
$ touch foo.2
$ echo $A
foo.1 foo.2 
```

I want to have `A` retain value `"foo.1"` after touching `foo.2`.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:48:54.107

请改用数组。

```
A=(foo.*)
touch foo.2
echo "${A[@]}" 
```

# delphi - How I can compile documented Delphi code in older Delphi versions (<2005)

> ID：14492572
> 
> 赞同：8
> 
> 时间：2013-01-24T01:44:48.000
> 
> 标签：delphi, documentation

I'm using the Documentation Insight feature to document a Delphi library, currently this work fine with Delphi 2005 to XE3\. Now I want to add support for old versions of Delphi (5, 6, 7) too.

But when try to compile a code like this in Delphi versions minor than 2005 (Delphi 5, 6, 7)

```
 {$REGION 'Documentation'}
 ///    <summary>
 ///      This is a sample text 
 ///    </summary>
 {$ENDREGION}
 TFoo=class
   procedure Tick;
 end; 
```

I receive a compiler error

> Invalid Compiler Directive REGION

What is fine because the [`REGION`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Regions) reserved word was introduced when the Delphi IDE was Changed to Galileo (Delphi 2005).

So, for now as workaround I'm using this syntax in order to compile the code in Delphi 5 - to XE3.

```
 {$IFDEF NODEF}{$REGION 'Documentation'}{$ENDIF}
 ///    <summary>
 ///      This is a sample text 
 ///    </summary>
 {$IFDEF NODEF}{$ENDREGION}{$ENDIF}
 TFoo=class
   procedure Tick;
 end; 
```

But now using such code the Documentation Insight no longer works in Delphi XE2 and XE3.

So the question is, How i can compile documented Delphi code in older versions of Delphi without affect Documentation Insight in the newer Delphi versions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T02:04:27.323

如果去掉`{$REGION}`标签，Document Insight 仍然有效，旧版本应将文档视为普通注释。在支持代码折叠的 IDE 版本中，您将无法再折叠文档，仅此而已。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T02:13:53.503

如果您必须有一个代码库在新旧 Delphi 中*没有任何更改即可编译，则此解决方案将不起作用。*

这很丑陋，当您从旧版本的 Delphi 到新版本的 Delphi 来回移动时，必须完成和撤消。

但是，您可以来回 grep 整个项目。

例如，从 XE2 到 D7 时，您需要将其转换为

```
{$REGION 'Documentation'} 
```

通过插入一个空格并删除尾随 }，它看起来像这样：

```
{ $REGION 'Documumentation' 
```

从 D7 到 XE2 你会做相反的添加 } 在每行开头的末尾

```
{$ REGION 
```

并删除 $ 之后的空格。

就像我说的，它很丑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:26:08.827

Documentation Insight 支持一些内置的区域样式（请参阅选项对话框）。您可以选择兼容样式，它会自动生成 {$IFDEF NoDEF}{$REGION 'xxx'}{$ENDIF} 等指令。

# java - How can I judge whether the file (read from dropbox webpage) has been changed or not in Java?

> ID：14492573
> 
> 赞同：4
> 
> 时间：2013-01-24T01:45:09.873
> 
> 标签：java, dropbox, last-modified

Now I'm doing a distributed systems homework in Java, so I need to access one copy of configuration file from several computers. And now I could read and parse a shared file from dropbox webpage, like this one: [https://www.dropbox.com/s/ysn9yivqj7kwo0w/config.yaml](https://www.dropbox.com/s/ysn9yivqj7kwo0w/config.yaml). What I want to do is to add a daemon thread to detect whether this file has been changed or not, if changed, I need to re-config every node of system.

But how can I judge whether this file has been changed or not IN PROGRAM, without downloading the whole file and then to do some diff? I think dropbox should add something like timestamps to files, but how can I get access to this timestamp?

Any suggestion is welcome, much thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:47:20.793

I'd look at the content-md5\. So you keep an md5 of your previous version and if they don't match, then download the file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:47:48.223

如果您使用[sdk form dropbox](https://www.dropbox.com/developers/reference/sdk)，您可以通过以下方式获取文件的元数据

```
 meta = api.metadata(path, 1, null, false, null); 
```

并通过检查文件的最后修改日期或哈希

```
 meta.hash;
    meta.modified; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T16:18:39.933

**解决方案 1**

根据[API 文档](https://www.dropbox.com/developers/core/docs)，`/metadata`检索文件和文件夹元数据。比较哈希 (md5) 以检查

**网址结构**：`https://api.dropbox.com/1/metadata/auto/<path>`

返回给定的文件或文件夹的元数据。如果表示文件夹并且 list 参数为 true，则元数据还将包括文件夹内容的元数据列表。

**在 Java 中使用**

来自[Java SDK 文档](http://dropbox.github.io/dropbox-sdk-java/api-docs/v1.7.x/com/dropbox/core/DbxClient.html#getMetadata(java.lang.String))

```
public DbxEntry getMetadata(String path)
                     throws DbxException
Get the file or folder metadata for a given path.
 DbxClient dbxClient = ...
 DbxEntry entry = dbxClient.getMetadata("/Photos");
 if (entry == null) {
     System.out.println("No file or folder at that path.");
 } else {
     System.out.print(entry.toStringMultiline());
 } 
```

**参数**

path - 文件或文件夹的路径（请参阅 DbxPath）。

**退货**

如果给定路径有文件或文件夹，则返回该路径的元数据。如果那里没有文件或文件夹，则返回 null。

**投掷**

数据库异常

**更新**

**解决方案 2（Hacky 解决方法）**

不幸的是，Dropbox 不为文件提供哈希值，它只为目录提供哈希值。因此，如果您正在使用 Dropbox API 进行同步开发，您可以执行以下操作之一

*   下载文件时，复制包含修订号的 rev 参数
*   比较本地和云文件的上次修改（注意：不保证始终有效。如果 2 个人同时在本地同时编辑文件并且其中一个人覆盖草稿文件，您可能会得到误报）。

# symfony-2.1 - Symfony 2.1 中未显示单个字段表单错误消息

> ID：14492588
> 
> 赞同：2
> 
> 时间：2013-01-24T01:46:30.057
> 
> 标签：symfony-2.1

我在 Symfony 2.1 中有一个简单的表单，当我提交它时，我希望在我的表单页面上看到一些错误消息，因为我根据需要指出了一些字段。

但是，`{{ form_errors(form.company_name) }}`显示该特定字段的错误消息的方法对我不起作用。它从不显示消息。但是，如果我使用`{{form_errors(form)}}`，所有错误消息都会显示在一个地方。我需要个人的`{{form_errors(form.company_name)}}`方式来工作。有人经历过吗？有什么问题？这是我的树枝代码：

```
<form method="post" {{ form_enctype(form) }} novalidate>
  <table>
  <tr>
    <td class="field-cell">{{ form_label(form.promo_referral) }}:&nbsp;</td>
    <td>{{ form_errors(form.promo_referral) }}{{ form_widget(form.promo_referral) }}</td>
  </tr>
  <tr>
    <td class="field-cell">{{ form_label(form.company_name) }}:&nbsp;</td>
    <td>{{ form_errors(form.company_name) }}{{ form_widget(form.company_name) }}</td>
  </tr>
  ... 
```

这是我的相关控制器代码：

```
$registration = new ServiceVendorRegistration();
$form = $this->createForm(new ServiceRegisterForm(), $registration);

if ($request->isMethod("POST")) 
{
    $form->bind($request);
    if ($form->isValid())
    {
              // do something else
    }
}

return $this->render('MyBundle:Default:register_service_vendor.html.twig', array('form' => $form->createView())); 
```

Validation.yml 使该字段为必填项，如下所示：

```
properties:
        companyName:
            - NotBlank:
                message: You have to fill this 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T04:37:33.217

我得到了解决方案。Symfony 不喜欢使用下划线来分隔单词（例如 first_name）来命名表单字段。它依赖于 camelCase 命名约定。当我相应地重命名我的表单字段时，它开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:15:08.780

检查您的 ServiceRegisterForm 以验证您的表单字段是否为“必需”或在实体定义中

# bash - 使用 bash (sed/awk) 提取 CSV 文件中的行和列？

> ID：14492590
> 
> 赞同：14
> 
> 时间：2013-01-24T01:46:32.807
> 
> 标签：bash, csv, sed, awk

bash 是否能够处理从 csv 文件中提取行和列？希望我不必求助于python ..

我的 5 列 csv 文件如下所示：

```
Rank,Name,School,Major,Year
1,John,Harvard,Computer Science,3
2,Bill,Yale,Political Science,4
3,Mark,Stanford,Biology,1
4,Jane,Princeton,Electrical Engineering,3
5,Alex,MIT,Management Economics,2 
```

我只想提取第 3、第 4 和第 5 列内容，忽略第一行，因此输出如下所示：

```
Harvard,Computer Science,3
Yale,Political Science,4
Stanford,Biology,1
Princeton,Electrical Engineering,3
MIT,Management Economics,2 
```

到目前为止，我只能让 awk 打印出我的 CSV 文件的每一行或每一列，而不是像这种情况下的特定列/行！bash 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T01:55:11.227

```
awk -F, 'NR > 1 { print $3 "," $4 "," $5 }' 
```

NR 是当前行号，而 $3、$4 和 $5 是由赋予 -F 的字符串分隔的字段

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-02T09:54:26.377

试试这个：

```
tail -n+2 file.csv | cut --delimiter=, -f3-5 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-24T01:53:09.283

使用`cut`和`tail`：

```
tail -n +2 file.txt | cut -d ',' -f 3- 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-24T03:42:29.063

重击解决方案；

**使用 IFS**

```
#!/bin/bash
while IFS=',' read -r rank name school major year; do
    echo -e "Rank\t: $rank\nName\t: $name\nSchool\t: $school\nMajor\t: $major\nYear\t: $year\n"
done < file.csv
IFS=$' \t\n' 
```

**使用字符串操作和数组**

```
#!/bin/bash
declare -a arr
while read -r line; do
    arr=(${line//,/ })
    printf "Rank\t: %s\nName\t: %s\nSchool\t: %s\nMajor\t: %s\nYear\t: %s\n" ${arr[@]}
done < file.csv 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T04:34:42.583

```
sed 1d file.csv | while IFS=, read first second rest; do echo "$rest"; done 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-24T01:57:21.803

给你，一个简单的 AWK 程序。

```
#!/usr/bin/awk -f

BEGIN {
    # set field separator to comma to split CSV fields
    FS = ","
}

# NR > 1 skips the first line
NR > 1 {
    # print only the desired fields
    printf("%s,%s,%s\n", $3, $4, $5)
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-24T07:27:22.910

```
perl -F, -lane 'if($.!=1){print join ",",@F[2,3,4];}' your_file 
```

[在这里](http://ideone.com/NFSiGJ)检查

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-24T07:42:18.527

这可能对您有用（GNU sed）：

```
sed -r '1d;s/([^,]*,){2}//' file 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-24T12:01:35.620

试试这个

```
awk -F, 'NR > 1 { OFS=",";print $3, $4, $5 }' temp.txt 
```

或这个

```
sed -re '1d;s/^[0-9],\w+,//g' temp.txt 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-11T14:02:46.170

我已经为这类任务创建了包 - [gumba](http://gumba.welldan97.com/) 如果您对 coffeescript 感到满意，您可以尝试一下

```
cat file.csv | tail -n +2 | \
gumba "words(',').take((words)-> words.last(3)).join(',')"` 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-09T15:32:01.390

```
grep '^,' outlook.contacts.csv | sed 's/^,\([^,]*\),[^,]*,\([^,]*\),.*/\1 \2/' 
```

获取所有以 a 开头的行，`,`然后用`sed`名字和名字替换空白字段。

出于某种原因，一旦您将其更改为此行，请小心谨慎，因此您最好手动小心地进行操作。

```
grep '^,' outlook.contacts.csv | sed 's/^,([^,]),[^,],([^,]),./\1 \2/' 
```

# symfony - Symfony2：在实体字段中使用 group_by 选项

> ID：14492591
> 
> 赞同：2
> 
> 时间：2013-01-24T01:46:38.737
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我试图在 Symfony 2.1 中显示一个带有 optgroups 的选择框。我的实体树是：客户有项目，项目有部分（`Part->getProject()->getClient()`）

我想以这种方式显示我的选择框：

```
<select>
    <optgroup>Client name
        <option>Part name</option>
        <!-- ... -->
    </optgroup>
    <!-- ... -->
</select> 
```

Symfony 文档并没有太大帮助。我的**工作**表单生成器（没有 group_by 选项）给了我一个简单的选择：

```
$this->createFormBuilder()
->add('part','entity',array(
    'class'         => 'SGLFLTSPartBundle:Part',
    'property'      => 'name',
    'query_builder' => function (\SGL\FLTS\PartBundle\Entity\PartRepository $er) {
        return $er->createQueryBuilder('p');
    }))
->getForm(); 
```

如何添加 group_by 选项以显示客户端名称？到目前为止我已经尝试过

```
'group_by'      => 'project.client.name'
'group_by'      => 'project.client'
'group_by'      => 'ppc.name' // the DQL table alias 
```

都给PHP错误

我还尝试将项目名称仅显示为 optgroup，但不走运：

```
'group_by'      => 'project'
'group_by'      => 'project.name'
'group_by'      => 'project.id'   // throws no error, giving me <optgroup label="1"> ... 
```

并尝试在 createQueryBuilder 中添加项目/客户端连接

```
$er->createQueryBuilder('p')->select('p, pp')->leftJoin('p.project','pp');
$er->createQueryBuilder('p')->select('p, pp.name')->leftJoin('p.project','pp')
// wrong 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:04:33.407

我今天遇到了类似的问题。

我想您已经看到很多与错误使用对象作为数组键有关的 PHP 错误？这是由于 Symfony 试图使用整个相关对象作为分组结果数组中的数组键引起的。

我需要进一步研究它以获得更好的解决方案，但与此同时，这就是我正在使用的......

`Part`向被调用的实体添加一个新方法，`getClientName`如下所示：

```
public function getClientName()
{
    // safety measure in-case a part hasn't been assigned to a project
    if (null === $this->getProject()) {
        return null;
    }
    // safety measure in-case a project hasn't been assigned to a client
    if (null === $this->getProject()->getClient()) {
        return null;
    }
    return $this->getProject()->getClient()->getName();
} 
```

在表单字段构建器中将`group_by`选项设置为：`clientName`

```
$this->createFormBuilder()
->add('part','entity',array(
    'class'         => 'SGLFLTSPartBundle:Part',
    // this property will be processed by Symfony as `$part->getClientName()`
    'property'      => 'clientName',
->getForm(); 
```

使用这个额外方法背后的想法是给 Symfony 一个类方法，它可以调用它来获取一个字符串值来执行分组。

如果其他人有更优雅的解决方案，我很想看到它。

# c++ - Boost::ASIO - 如何专用 2 个线程来处理接收和发送消息

> ID：14492593
> 
> 赞同：3
> 
> 时间：2013-01-24T01:46:48.190
> 
> 标签：c++, sockets, tcp, thread-safety, boost-asio

我正在为 Windows 客户端使用 Boost::ASIO 版本 1.52.0。我希望能够专用一个线程来处理从服务器接收的所有消息，然后另一个专用线程来处理所有传出到服务器的消息。我现在`io_service`对两个线程使用相同的对象。我担心的是，当`io_service::run()`调用该方法时，处理传出消息的线程可能会被安排来处理一些传入消息调用，反之亦然。所以，我的问题 - 这可能吗？如果是，那么使用第二个`io_service`对象会解决问题吗 - 每个线程一个？有没有更好的方法来设计这个？我试图避免对读取和写入处理程序使用多个线程。

`async_reads`我想确认的另一件事是 - 我已经读过如果可以同时完成2 个或更多，则应该使用锁来单线程代码。同样对于`async_writes`. `an async`如果_read 可以与 an 同时执行，是否也应该使用锁`async_write`，还是应该是线程安全的？

最后一个问题 -在工作线程调用run 方法之前，`async_connect`可以从不同的线程调用 async 方法吗？`async_read``async_write``io_service`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:23:27.723

您应该使用单个`io_service`，但是您用来调用的许多线程也`io_service::run()`可以为`io_service`. 如果这些处理程序访问共享数据结构，您将需要使用 a`strand`来确保独占访问。您还需要确保最多一次[写入](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_write/overload4.html)操作

> 此操作是根据对流`async_write_some`函数的零次或多次调用来实现的，称为**组合操作**。程序必须确保流不执行其他写入操作（例如`async_write`，流的`async_write_some` 函数，或执行写入的任何其他组合操作），直到此操作完成。

和[读](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_read/overload1.html)操作

> 此操作是根据对流`async_read_some`函数的零次或多次调用来实现的，称为**组合操作**。程序必须确保流不执行其他读取操作（例如`async_read`，流的`async_read_some` 函数，或执行读取的任何其他组合操作），直到此操作完成。

对每个插座都很出色。

不可能对所有操作使用一个，而对`io_service`所有`async_write()`操作使用另一个是不可能的，因为单个套接字由作为[构造函数](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_socket/basic_socket/overload1.html)中的参数传入的一个套接字提供服务。`io_service``async_read()``io_service`

根据[我的经验](https://stackoverflow.com/a/6162575/283302)，大多数 mult-io_service 设计都是由性能和延迟要求驱动的。[HTTP Server 2 示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/http/server2/server.cpp)使用`io_service`每个 CPU对此进行了探索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T12:27:13.673

当您没有多个对象（即套接字）可供操作时，这是 ASIO 和 IOCP 等异步库的失败之一。就像单个 UDP 套接字向许多不同的端点发送和接收许多数据包的常见情况一样。

在这种情况下，有一个专门的线程只是在读取时阻塞并快速将数据放入队列中，而一个专门的线程在写入时阻塞比异步任何东西都要高效得多。通过这种方式，您应该能够在现代硬件上每秒获得超过 100K 的数据包。如果您可以使用 sendmmsg 或 recvmmsg 类型的函数，您可以通过避免操作系统调用开销来获得更高的数字。它们允许您将消息捆绑在一起，但最后我检查了它不在 ASIO 中，并且需要您自己的代码。

在您的示例应用程序中，因为一次只有一个 READ 或 WRITE 处理程序处于活动状态，因此两个线程应该只执行一个或另一个，因此我相信您可以避免在那里需要 strand。但是，如果您在我刚才提到的设置中使用 2 个专用的非异步线程，您的性能会好很多。

# contact-form - upload form within a contact form, the upload form submit keeps submitting the whole form

> ID：14492594
> 
> 赞同：0
> 
> 时间：2013-01-24T01:46:50.853
> 
> 标签：contact-form

Got an upload and submit button within a php contact form, but upon clicking submit for file upload, this submit button submits the whole form, and so does the main submit button. Hence the user cannot upload a file. how can i make sure the file submit does not submit the whole form?

```
<table width="500" border="0" align="center" cellpadding="0" cellspacing="0" >
<tr>

<tr>
<td>
<!-- start here-->

<form action="contactform.php" method="post"> 
<table class="freecontact2form" border="0" width="400px">
<tbody>
<tr>
<td colspan="2"><span style="font-size: x-small;"> </span> <br /> <br /></td>
</tr>

<tr>
<td>Question 1<br>
  <br></td>
</tr>

<tr>
 <td><br>

   Answer 1 <input type="radio" name="ans" value="ans1" /><br />
  Answer 2 <input type="radio" name="ans" value="ans2"  /><br />
  Answer 3 <input type="radio" name="ans" value="ans3"  /><br />
  Answer 4 <input type="radio" name="ans" value="ans4"  /><br />

 </td> 
  </tr>

</tr>

<!--upload form Start here-->

<form action="upload_ac.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" >
<tr>
<td><strong>Upload form/strong></td>

</tr>

<tr>
<td>Below is for file upload:<br>
  <br></td>
</tr>

<tr>
<td>Select file
<input name="ufile" type="file" id="ufile" size="50" /></td>
</tr>

<tr>
<td align="center"><input type="submit" name="Submit" value="Upload" /></td>
</tr>
</form>

<!--upload formend here-->

<tr>
<td style="text-align:center" colspan="2"><br /><br /> <input src="submit1.png" name="submit" type="image"> <br /><br /> 

 <br /><br /></td>
</tr>
</tbody>
</table>
</form>

<!-- end here -->

</td>
</tr>

</table>
</td>

</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:42:31.080

这不起作用，因为您的代码当前包含一个包含在另一个表单中的表单。这不允许嵌套表单。

您当前的代码：

```
<form action="contactform.php" method="post"> 
...
<form action="upload_ac.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
...
</form>
...
</form> 
```

试试这个代码：

```
<form action="contactform.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
Here you must add all the fields of the two previous forms.
</form> 
```

您还必须将 PHP 代码`upload_ac.php`从`contactform.php`.

当您提交此新表格时，它将：

*   上传您选择的文件
*   填充`$_POST`字段的值

# forms - Making form's URL visible in all browsers

> ID：14492596
> 
> 赞同：0
> 
> 时间：2013-01-24T01:47:09.217
> 
> 标签：forms

I have this regular form:

```
<form action="" method="post"><input class="ssd" type="submit" value="Hello"></form> 
```

According to my observation, when I placed my mouse over the form's button(did not click on it), I could only see it's URL address in IE9(explorer 9). I couldn't see the URL address with FireFox and Chrome when I placed my mouse over the same form. Anyone has got any ideas why? is there any special coding that I need to do in order to make it work for every browser? (I tried different computers, same result)

I

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:58:06.380

尝试使用表单按钮`title`中的属性。`submit`它似乎在 Chrome 和 Safari 中工作......我还没有在 Firefox 中尝试它。

您甚至可以`title`在标签本身中放置一个属性，`form`当没有其他元素妨碍时，它会执行相同的工作。

这是一个小[JS Fiddle](http://jsfiddle.net/QwuEQ/)供您欣赏。

# svg - 在 svg 元素上设置纹理和颜色的更有效方法？

> ID：14492608
> 
> 赞同：2
> 
> 时间：2013-01-24T01:48:32.777
> 
> 标签：svg, design-patterns

我需要在一系列 svg 元素上设置颜色范围，在每个元素顶部使用相同的半透明 png 纹理。必须有更有效的方法来做到这一点......

```
<svg>
    <defs>
        <pattern id="texture1">
            <image xlink:href="texture.png"/>
            <rect fill="red" /> 
        </pattern>

        <pattern id="texture2">
            <image xlink:href="texture.png"/>
            <rect fill="yellow" /> 
        </pattern>

        <pattern id="texture3">
            <image xlink:href="texture.png"/>
            <rect fill="blue" /> 
        </pattern>
    </defs>
</svg> 
```

CSS: .path1 { 填充: url(#texture1); } ... ETC

这看起来超级难看。关于如何改进的建议？

# android - 在 ActionBarSherlock 中覆盖 onContextItemSelected()

> ID：14492612
> 
> 赞同：6
> 
> 时间：2013-01-24T01:49:23.073
> 
> 标签：android, actionbarsherlock

我有一个扩展 SherlockActivity 的类，因为我在活动中使用了 ActionBarSherlock 操作栏。但是，我还尝试将上下文菜单添加到此活动中的列表视图，该活动在列表视图中的项目被长按时启动。我的声明中有一个错误，`onContextItemSelected(MenuItem item)`表明我的覆盖无效，因为没有什么可以覆盖。但是，当我删除覆盖时，永远不会调用该函数。我知道这与 SherlockActivity 从 Activity 继承的方式有关，但我不确定具体情况。也许我错过了进口？在此处查看相关代码：

```
public class Inbox extends SherlockActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_inbox);
    refreshMsgs(this.getCurrentFocus());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    if (v.getId() == R.id.lstInbox){
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
        String contactName = lstConversation.get(info.position).getContactName();   
        menu.setHeaderTitle(contactName);
        menu.add(Menu.NONE, 0, 0, "View contact");
        menu.add(Menu.NONE, 1, 1, "Delete thread");
    }
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
    SmsConversation selectedConvo = lstConversation.get(info.position);         

    if (item.getItemId() == 0){
        //view contact
        Intent viewcontactIntent = new Intent();
        String contactId = selectedConvo.getContactId();
        Uri uriContact = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, contactId);
        viewcontactIntent.setData(uriContact);
        PendingIntent pViewIntent = PendingIntent.getActivity(getBaseContext(), 1, viewcontactIntent, 0);
        try {
            pViewIntent.send();
        } catch (CanceledException e) {
            e.printStackTrace();
        }
    } else {
      //DELETE thread
    }
    return true;
}
} 
```

以下是我在课堂上的所有导入：

```
import java.util.ArrayList;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.MenuInflater;

import android.app.Activity;
import android.app.PendingIntent;
import android.app.PendingIntent.CanceledException;
import android.content.ContentResolver;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.text.Html;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T01:52:28.287

很久以前面对类似的问题，我已经`onContextItemSelected()`通过强制`MenuItem`使用其完全限定的类名 ( `android.view.MenuItem`) 来覆盖，如下所示：

```
@Override
public boolean onContextItemSelected (android.view.MenuItem item)
{
  //implementation
} 
```

# safari - iOS iPad 打开键盘时固定位置中断

> ID：14492613
> 
> 赞同：67
> 
> 时间：2013-01-24T01:49:25.440
> 
> 标签：safari, mobile-safari

当我单击“搜索表单”文本框字段时，修复了标题上的位置中断。它只是从页面顶部分离（因为它固定在那里）并在虚拟键盘打开时开始浮动页面中间。

普通的：

![在此处输入图像描述](../Images/579bbe61db706fec712ab21dc6d9e149.png)

破碎的：

![在此处输入图像描述](../Images/5e1bc9d5bb044f90af5e2bacb08c1098.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-19T11:16:31.323

我真的很喜欢这个解决方案（[http://dansajin.com/2012/12/07/fix-position-fixed/](http://dansajin.com/2012/12/07/fix-position-fixed/)）。我将它打包成一个小的 jQuery 插件，这样我就可以：

*   设置哪个父母获得班级
*   设置适用于哪些元素（不要忘记“textarea”和“select”）。
*   设置父类名是什么
*   允许它被链接
*   允许多次使用

代码示例：

```
$.fn.mobileFix = function (options) {
    var $parent = $(this),

    $(document)
    .on('focus', options.inputElements, function(e) {
        $parent.addClass(options.addClass);
    })
    .on('blur', options.inputElements, function(e) {
        $parent.removeClass(options.addClass);

        // Fix for some scenarios where you need to start scrolling
        setTimeout(function() {
            $(document).scrollTop($(document).scrollTop())
        }, 1);
    });

    return this; // Allowing chaining
};

// Only on touch devices
if (Modernizr.touch) {
    $("body").mobileFix({ // Pass parent to apply to
        inputElements: "input,textarea,select", // Pass activation child elements
        addClass: "fixfixed" // Pass class name
    });
} 
```

编辑：删除不必要的元素

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-10T07:22:04.947

在我们的例子中，一旦用户滚动，它就会自行修复。所以这是我们用来模拟滚动的修复：

```
$(document).on('blur', 'input, textarea', function () {
    setTimeout(function () {
        window.scrollTo(document.body.scrollLeft, document.body.scrollTop);
    }, 0);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-30T07:41:10.960

基于对这个问题的[良好分析](https://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios)，我在 css 中的 html 和 body 元素中使用了它：

```
html,body{
    -webkit-overflow-scrolling : touch !important;
    overflow: auto !important;
    height: 100% !important;
} 
```

它对我很有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-27T22:14:30.090

这是一个使用 jQuery 的 hacky 解决方案：

HTML：

```
<label for="myField">My Field:</label> <input type="text" id="myField" />

<!-- ... other markup here .... -->

<div class="ad_wrapper">my fixed position container</div> 
```

CSS：

```
.ad_wrapper {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background-color: rgba(0,0,0,0.75);
    color: white;
    text-align: center;
}
.unfixed {
    position: relative;
    left: auto;
    bottom: auto;
} 
```

JS：

```
$(function () {
    adWrapper = $('.ad_wrapper');

    $(document).on('focusin', 'input, textarea', function() {
        adWrapper.addClass('unfixed');
    })
    .on('focusout', 'input, textarea', function () {
        adWrapper.removeClass('unfixed');
    });
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-25T03:04:49.783

到目前为止，我尝试过的所有解决方案都对我来说失败了：一旦在 iPhone 上显示键盘，固定的顶部导航栏就会消失。如果您希望固定元素即使在显示键盘时也保持固定在同一位置怎么办？下面是一个简单的解决方案，它允许在键盘可见的情况下滚动页面时将固定元素保持在顶部（即焦点仍在输入字段内）。

```
// Let's assume the fixed top navbar has id="navbar"
// Cache the fixed element
var $navbar = $('#navbar');

function fixFixedPosition() {
  $navbar.css({
    position: 'absolute',
    top: document.body.scrollTop + 'px'
  });
}
function resetFixedPosition() {
  $navbar.css({
    position: 'fixed',
    top: ''
  });
  $(document).off('scroll', updateScrollTop);
}
function updateScrollTop() {
  $navbar.css('top', document.body.scrollTop + 'px');
}

$('input, textarea, [contenteditable=true]').on({
  focus: function() {
    // NOTE: The delay is required.
    setTimeout(fixFixedPosition, 100);
    // Keep the fixed element absolutely positioned at the top
    // when the keyboard is visible
    $(document).scroll(updateScrollTop);
  },
  blur: resetFixedPosition
}); 
```

要查看演示，请在您的 iPhone 上访问：

[http://s.codepen.io/thdoan/debug/JWYQeN/gakeYJYOXDPk](http://s.codepen.io/thdoan/debug/JWYQeN/gakeYJYOXDPk)

这是一个使用 的版本`requestAnimationFrame`，但它似乎并没有表现得更好，所以我坚持使用第一个版本，因为它更简单：

[http://s.codepen.io/thdoan/debug/VpvJNX/yYMyLDLBwpRk](http://s.codepen.io/thdoan/debug/VpvJNX/yYMyLDLBwpRk)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-16T00:45:42.567

您需要做的是在用户编辑文本时将正文的位置设置为固定，然后在用户完成后将其恢复为静态。您可以在焦点/模糊（如下所示）上执行此操作，或者如果用户正在打开模式，您可以在模式打开/关闭时执行此操作。

```
$("#myInput").on("focus", function () {
    $("body").css("position", "fixed");
});

$("#myInput").on("blur", function () {
    $("body").css("position", "static");
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T01:06:33.307

已修复 - 输入搜索文本框后，是否将标题推回相对固定位置。这是 iOS 虚拟键盘实现中的一个错误，因为如果页面可滚动，它会破坏文本字段上的固定位置。如果溢出被隐藏/页面不可滚动，则在执行虚拟键盘时不会破坏固定位置。

干杯。

# javascript - 单击AngularJS后如何更新模型？

> ID：14492615
> 
> 赞同：0
> 
> 时间：2013-01-24T01:49:32.547
> 
> 标签：javascript, angularjs

我的数据库中有一堆“活动”：

```
{"name" : "Apple", "status" : "active"}
{"name" : "Orange", "status" : "paused"} 
```

我已经在 Angular 中展示了它们：

```
<span ng-switch on="campaign.status"> 
<a ng-switch-when="active" ng-click='setStatus($index, "paused")'>Pause</a>
<a ng-switch-when="paused" ng-click='setStatus($index,"active")'>Activate</a>
</span> 
```

然后在我的控制器中，我使用 API 更新服务器数据库的状态（返回更新条目的 JSON。

```
$scope.setStatus = function(index, newstatus) {

    var item = $scope.campaigns[index];
    var url = 'api.mysite.com/' + newstatus + '/' + item._id.$oid;

    if (! $scope.isComplete(item) )
    {
        $http({method: 'GET', url: url}).  
        success(function(data, status, headers, config) { 
           $scope.campaigns[index] = data; 
          }). error(function(data, status, headers, config) {
           console.log('Error communicating with the server.');
          }); 
    }
} 
```

其中变量`campaigns`是控制器初始化时从服务器检索到的所有活动的数组：

```
$scope.connection = $resource('api.mysite/getallcampaigns');
$scope.campaigns = $scope.connection.query(); 
```

这看起来已经很乱了，我很确定我使用AngularJS不正确:(主要是我将我正在修改的元素的索引传递给控制器​​，如果我重新排序数组，它会中断. 我怎样才能让 Angular 为我很好地连接它？做到这一点的最小和正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:28:49.513

将活动传递到 setStatus() 而不是索引。修改成功回调中的活动属性：

```
<a ng-switch-when="active" ng-click='setStatus(campaign, "paused")'>Pause</a> 
```

.

```
$scope.setStatus = function (campaign, newstatus) {
   ...
   success(function(data, status, headers, config) { 
       campaign.status = data.status; 
```

不要在成功回调中重新分配整个数组——这可能会破坏您视图中的数据绑定。
即，我认为这行不通：`campaign = data`

您可能可以定义一个 $resource 对象，它可以处理获取初始数据数组和修改单个数组项。[请参阅$resource API 页面](http://docs.angularjs.org/api/ngResource.%24resource)上的“信用卡资源”示例。请注意数组的每一项`cards`（分配了 query() 的结果）也可以是 $save()d。

# javascript - 如何附加等..内 使用javascript标记？

> ID：14492616
> 
> 赞同：3
> 
> 时间：2013-01-24T01:49:34.127
> 
> 标签：javascript, asp.net, html

这是我的示例代码：

```
 <script type="text/javascript">
    $(function () {
        $('body')
            .append('<form id="form1"></form>'); //append a new form element with id mySearch to <body>
        $('#form1')
            .attr("runat", "server")
            .append('<asp:Button runat="server" ID="btn1"/>');
    });
    </script> 
```

这就是我的身体标签的样子：

```
 <body>

    </body> 
```

我收到此错误：

```
Control 'btn1' of type 'Button' must be placed inside a form tag with runat=server. 
```

提前致谢！:)

更新：我试图省略

```
 .append('<asp:Button runat="server" ID="btn1"/>'); 
```

当我运行萤火虫时，我得到了这个：

```
 <body>
        <form id="form1" runat="server"></form>
   </body> 
```

它确实有一个 runat="server"。为什么我不能把我的 asp:Button 放在里面？o_O

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:41:14.310

您更新的问题仍然是错误的方法。你不能这样做：

```
$('#form1').attr("runat", "server") 
```

并期望它的工作方式与您键入以下内容相同：

```
<form runat="server"> 
```

因为上面的标签是在**服务器端处理的，实际上在****客户端**呈现如下：

```
<form method="post" action="default.aspx" id="ctl00"> 
```

这看起来不像你正在做的事情。

你有两个选择：

1.  停止尝试使用 Javascript添加任何 ASP.NET 控件（即以 开头`<asp:`）或其中包含的任何内容。`runat="server"`如果您确实必须使用 Javascript 来执行此操作，请使用常规 HTML 控件。

2.  停止使用 Javascript 并实际正确使用`<asp:`控件或 HTML 控件，`runat="server"`然后从后面的代码中执行您需要执行的操作。

**现在是切线。**

关于`Control 'btn1' of type 'Button' must be placed inside a form tag with runat=server.`假设您正确使用`<form runat="server">`并重试的错误。你可能会发现它（有点）有效！

```
<form id="form1" runat="server">
    <asp:Button ID="btn2" Text="Button 2" runat="server" />
    <script>
        $(document).ready(function () {
            $('#<%= form1.ClientID %>').append('<asp:Button Text="Button 1" ID="btn1" runat="server"/>');
        });
    </script>
</form> 
```

这*将*呈现，但它是不正确的。除了令人困惑、讨厌的代码之外，它之所以有效，是因为 ASP.NET 实际上为此呈现 HTML`<asp:Button`并将其放入脚本块中，所以发送给客户端的是这个（和两个按钮......但仍然不是你输入的内容） .

```
<input type="submit" name="btn2" value="Button 2" id="btn2" />
<script>
    $(document).ready(function () {
        $('#form1').append('<input type="submit" name="btn1" value="Button 1" id="btn1" />');
    });
</script> 
```

现在是你没想到的部分。从代码隐藏中，您可以在页面加载上执行此操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    btn1.Text = "This is Awful";
} 
```

而不是在屏幕上显示`Button 2`和的两个按钮，`Button 1`现在第二个按钮显示`This is Awful`。

...但同样，这是完全错误的，`<asp:`如果您尝试这样做，大多数其他控件都会中断（我不确定为什么 ASP.NET 会转换 Javascript 块中的代码）。因此，请参阅上面的两个选项，了解如何继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:21:50.840

首先这部分代码没有按照你的预期运行

```
.append('<asp:Button runat="server" ID="btn1"/>'); 
```

`runat="server"`必须在设计页面时添加该控件的工作，或者在服务器端以编程方式添加，由服务器后面的代码编译并创建一个 html 部分。

当您在客户端使用javascript添加它时，服务器对此一无所知并且无法运行它，请编译它。

现在在第一部分中，您尝试`form`再次在客户端的页面内添加一个新的

```
$('body')
            .append('<form id="form1"></form>'); 
        $('#form1') 
```

这是 webform 上的一个问题，因为 asp.net 必须只包含一个表单元素。在 asp.net 已准备好呈现的一个表单中，您需要添加其他按钮，而不是创建第二个。

要继续，您需要在页面上定义一个表单标签（不是使用 javascript）。如果您想添加回发输入按钮，您可以这样做，但必须将它们放在现有表单中，不创建新的，并且不使用 runat=server。然后手动处理该回发代码 - 这意味着您不会调用任何特定函数，您只需阅读回发变量。

# qt - 下载QT？

> ID：14492618
> 
> 赞同：0
> 
> 时间：2013-01-24T01:49:41.213
> 
> 标签：qt

我一直在努力获得QT，它不像以前那么容易了。我下载了源代码，它没有随主程序一起提供。当我在他们的网站上单击“立即尝试”时，它会要求我输入公司名称，我只是下载 QT 以了解更多信息。

我该怎么办？或者我怎样才能正确获得 QT？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:54:04.057

1、去这里[http://qt-project.org/downloads](http://qt-project.org/downloads)

2、点击：Linux、windows、mac或源代码下载

3，如果您不确定您需要哪个操作系统，只需环顾四周：

*   如果你在星巴克和/或穿着比笔记本电脑更贵的牛仔裤 - 你需要 Mac

*   如果您在米色电脑前或米色隔间内 - 您需要窗户

*   如果你天生高大、黝黑、英俊并且是派对的生命和灵魂——你需要 linux

*   如果你低头看不到你的凉鞋，因为你的胡子 - 其他 Unix 版本是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:57:46.267

我怀疑您进入了商业开发人员部分。您可能想要免费版本。

Qt 的免费 (LGPL) 版本可以从 Qt 项目的网站下载：http: [//qt-project.org/downloads](http://qt-project.org/downloads)

如果您购买了商业许可，您可以从 Digia 的网站登录并下载：http: [//qt.digia.com/Product/](http://qt.digia.com/Product/)

# python - 使用 boto 连接到共享 SQS 队列

> ID：14492619
> 
> 赞同：3
> 
> 时间：2013-01-24T01:49:43.817
> 
> 标签：python, amazon-web-services, python-2.7, boto, amazon-sqs

我遇到了一个特别棘手的问题。我可以使用 boto SQS 模块轻松连接到本机（由我的 AWS 账户凭证拥有的）SQS 队列。但是，AWS 似乎提供了允许使用权限连接到非本地（由另一个 AWS 账户拥有）SQS 队列的能力。这可能更好地描述为共享队列。

有没有办法使用 boto 连接到共享队列？我似乎在 boto 代码或文档中找不到任何方法或引用来执行此类操作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T09:02:50.293

我的印象是您需要的是[身份和访问管理](http://aws.amazon.com/iam/)(IAM)。

另一个 AWS 账户可以创建一个 IAM 用户，并选择为它**创建一个访问密钥**。这提供了一对访问密钥和秘密访问密钥，与您通常用来访问 API 的常规 AWS 账户不同。现在，您可以自定义此 IAM 用户的确切权限。

我期望当这个新的 IAM 用户的访问密钥和秘密访问密钥以常规方式提供给 boto（给 aws_access_key_id 和 aws_secret_access_key）时，它们应该按预期工作。

# css - 如何控制正在编辑的 Wordpress 页面中的间距？

> ID：14492623
> 
> 赞同：2
> 
> 时间：2013-01-24T01:49:51.757
> 
> 标签：css, wordpress, spacing

很简单，如何控制 Wordpress 页面上对象之间的间距？

具体来说，我正在尝试删除下图中绿色框之间的空白：

截图： http: [//goo.gl/doZve](http://goo.gl/doZve) 页面：[http ://bellairecabinets.com/new/](http://bellairecabinets.com/new/)

我想要带有电话号码（顶部）的图像连接到表单（底部）。我检查了适用于表单的 CSS 并且没有边距。HTML 代码或 Wordpress WYSIWYG 中也没有分隔符。

为什么是空白？

此外，当输入错误信息并单击提交时，您会在表单上方收到警报。这会将整个布局向下移动。我怎样才能解决这个问题？有没有办法简单地将警报更改为出现在弹出框中而不是页面上？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:53:02.187

空白应存在于with 类`margin-bottom: 15px;`中的段落元素中。该段落也有一个。`div``video-sub``line-height``20px`

将此添加到您的 CSS 中：

```
.video-sub p
{
    line-height: 0;
    margin-bottom: 0;
} 
```

要将绿色框与幻灯片对齐，请执行以下操作：

```
.video-sub
{
    padding-top: 0;
} 
```

对于 CSS 弹出窗口，您可以这样做：

```
.form-error
{
    background-color: white;
    left: 0;
    margin: 0 auto;
    padding: 10px;
    position: fixed;
    right: 0;
    top: 30px;
    width: 980px;
    z-index: 1;
} 
```

我认为您可以将上面的代码替换为可以处理错误并形成已发送消息的代码：

```
#contact-form-4758
{
     background-color: white;
     left: 0;
     margin: 0 auto;
     padding: 10px;
     position: fixed;
     right: 0;
     top: 30px;
     width: 980px;
     z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:55:05.273

WordPress 内容中的额外间距通常是由 WordPress 自动段落代码引起的。这是一个名为 wp_autop() 的函数，它的目的是在输入中出现换行符的地方添加 HTML 中断段落。有一些方法可以将其关闭或仅在需要时应用。搜索 WordPress 论坛或 autop。

# html - Firefox 18 奇怪的画布背景行为

> ID：14492631
> 
> 赞同：1
> 
> 时间：2013-01-24T01:50:49.910
> 
> 标签：html, css, firefox, canvas

以下一直有效，直到我升级到 Firefox 18，现在它正在更改大部分页面，使其具有黑色背景。如果我删除了边框半径、溢出：隐藏或 button_body 上的背景，它似乎可以解决问题。

调整浏览器的大小似乎也会产生随机结果，如果我让窗口足够小，它会使窗口背景和浏览器背景本身透明，这样我就可以看到桌面。

是否有什么我做错了，或者我可以改变以仍然保留我所有的 CSS 样式但消除这个问题？

```
<html>
<style>
    body, div, p, canvas {
        overflow: hidden;
    }
    #Main2 {
        left: 0;
        position: absolute;
        top: 0;
        z-index: 1;
        width:500px;
        height:300px;
    }
    #pDiv div.button_body {
        background: #396B9E;
    }
    #pDiv{
        position:absolute; 
        left: 100px; 
        top: 20px; 
        width: 136px; 
        height: 16px; 
        border-radius: 0.3em 0.3em 0.3em 0.3em;
        z-index:10;
    }             
</style>
<body>
<canvas  id="Main2">Upgrade your Browser!</canvas>
<div id="pDiv">
    <div class="button_body">
        test
    </div>
</div>
</body>
<script>
        var _o = document.getElementById('Main2').getContext('2d');
        _o.fillStyle = 'rgba(208, 208, 208, 1)';
        _o.fillRect (0, 8, 200, 200);      
</script> 
```

这是一个示例页面。 [http://crystalvalleycomputers.com/test/test.html](http://crystalvalleycomputers.com/test/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:59:49.573

问题在于画布填充样式。

更正的代码：

```
 _o.fillStyle = 'rgba(208, 208, 208, 1)'; 
```

# c# - 文本框.文本 [ 1 | 2 ] -> 图片框 { 1 | 2 }.Color = SomeColor？

> ID：14492632
> 
> 赞同：0
> 
> 时间：2013-01-24T01:50:53.610
> 
> 标签：c#, .net, c#-4.0, variables

我正在制作一个小工具。我只想知道`switch`下面的代码中是否是实现这一目标的最快/最佳方法？在 PHP 中，我会像动态地引用变量名`$Stop{int Stop} -> $BackColor = "Color"`

![CSSGM](../Images/caa1c3dca73448d8c8dce807df3ad3ea.png)

```
public void Populate(Color Color, int Stop)
{
    Colour.BackColor = Color;             // Bottom left - PictureBox
    Hex.Text = ARGBToHex(Color.ToArgb()); // Hex (#703919) - TextBox
    Red.Text = Color.R.ToString();        // Red (153) - TextBox
    Green.Text = Color.G.ToString();      // Green (180) - TextBox
    Blue.Text = Color.B.ToString();       // Blue (209) - TextBox
    Alpha.Text = "100";                   // Alpha (100) - TextBox
    StopText.Text = Stop.ToString();      // Read-only (1) - TextBox
    switch(Convert.ToInt16(StopText.Text))
    {
        case 1: Stop1.BackColor = Color; break;  // Small light blue rectangle - PictureBox
        case 2: Stop2.BackColor = Color; break;  // Small dark blue rectangle - PictureBox
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:09:49.093

你可以这样做：

```
this.Controls.OfType<PictureBox>().First(x => x.Name.EndsWith(StopText.Text)).BackColor = Color; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:19:30.660

如果您重新排列作业顺序，特别是`StopText.Text`和`StopX.BackColor`.

然后更改您的用法并传递一个 PictureBox 而不是一个无意义的数字（1 或 2）：

```
public void Populate(Color Color, PictureBox Stop)
{
  Colour.BackColor = Color;             // Bottom left - PictureBox
  Hex.Text = ARGBToHex(Color.ToArgb()); // Hex (#703919) - TextBox
  Red.Text = Color.R.ToString();        // Red (153) - TextBox
  Green.Text = Color.G.ToString();      // Green (180) - TextBox
  Blue.Text = Color.B.ToString();       // Blue (209) - TextBox
  Alpha.Text = "100";                   // Alpha (100) - TextBox

  Stop.BackColor = Color;
  StopText.Text = Stop.Name.Substring(Stop.Name.Length - 1, 1)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T01:54:49.813

代替

```
StopText.Text = Stop.ToString();
switch(Convert.ToInt16(StopText.Text))
{
    case 1: Stop1.BackColor = Color; break;
    case 2: Stop2.BackColor = Color; break;
} 
```

为什么不做

```
//have an array of 2 Stops called Stops
StopText.Text = Stop.ToString();
if (Stop < Stops.Length)
{
  Stops[Stop].BackColor = Color;
} 
```

（并确保您始终使用 0 或 1 索引等）

# c - 使用标记为 __unused 的参数时发出警告

> ID：14492637
> 
> 赞同：8
> 
> 时间：2013-01-24T01:53:01.803
> 
> 标签：c, clang

使用 -Wunused-parameter 标志，您可以强制 __unused 用于未使用的参数，作为编译器优化。以下代码会导致两个警告：

```
#include <stdio.h>
int main(int argc, char **argv) {
  printf("hello world\n");
  return 0;
} 
```

通过添加 __unused 未使用的参数来修复这些警告。

```
#include <stdio.h>
int main(int __unused argc, char __unused **argv) {
  printf("hello world\n");
  return 0;
} 
```

当您使用标记为 __unused 的参数时，clang 4.1 不会发出警告或错误。

```
#include <stdio.h>
int main(int __unused argc, char __unused **argv) {
  printf("hello world. there are %d args\n", argc);
  return 0;
} 
```

使用 展示相同的行为`__attribute__((unused))`。

```
int main(int __attribute__((unused)) argc, char __attribute__((unused)) **argv) { 
```

有没有办法在 __unused 上发出警告或错误？如果您不小心在已使用的参数上留下了 __unused 会发生什么？在上面的示例`argc`中似乎具有正确的值，尽管它可能是编译器没有利用提示，我不会在没有更多理解的情况下依赖这种行为。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T00:35:17.390

该`__unused`属性旨在**防止**在函数/方法或函数/方法的参数未使用时出现投诉，而不是强制它们不使用。

[GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)中使用的术语是：

> 附加到函数的此属性意味着该函数可能未被使用

对于[变量](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#Variable-Attributes)：

> 附加到变量的此属性意味着该变量可能未被使用。

最常见的用途是针对接口进行开发 - 例如回调，您可能被迫接受几个参数但不使用所有参数。

我在进行测试驱动开发时会使用它——我的初始例程需要一些参数并且什么都不做，所以所有参数都取`__attribute__((unused))`. 当我开发它时，我会使用这些参数。在开发结束时，我将它们从方法中删除，看看会发生什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T22:03:26.467

给这只猫换皮的另一种方法是删除（或注释掉）参数的名称。

```
int main ( int argc, char ** /* argv */ ) {
    printf("hello world. there are %d args\n", argc);
    return 0;
} 
```

现在编译器不会警告`argv`未使用，你*也不能*使用它，因为它没有名字。

# python - MongoAlchemy 嵌入式文档

> ID：14492641
> 
> 赞同：2
> 
> 时间：2013-01-24T01:53:15.073
> 
> 标签：python, flask, mongoalchemy

有谁知道如何使用 mongo alchemy 创建带有嵌入式文档的模型？我在文档中进行了搜索，但没有任何关于这样做的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:45:17.137

看一下：

[https://github.com/jeffjenkins/MongoAlchemy/blob/master/examples/examples.py](https://github.com/jeffjenkins/MongoAlchemy/blob/master/examples/examples.py)

那里有一个示例，但为了完整起见，是的，MongoAlchemy 可以使用这样的嵌入式文档：

```
class Address(Document):
    street_address = StringField()
    city = StringField()
    state_province = StringField()
    country = StringField()

class User(Document):

    name = StringField()
    email = StringField()

    address = DocumentField(Address)

user = User()
user.name = "tony"

user.address = Address()
user.address.city = "London" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:38:12.213

`mongoAlachemy`对于嵌入式文档，我没有看到任何内容：

看这里：

*   模式 — 文档对象映射器和模式定义 — MongoAlchemy v0.12 文档 -> [http://www.mongoalchemy.org/api/schema/index.html](http://www.mongoalchemy.org/api/schema/index.html)

我建议您使用`mongoengine`以获得更好的结果：

*   MongoEngine/flask-mongoengine · GitHub -> [https://github.com/MongoEngine/flask-mongoengine](https://github.com/MongoEngine/flask-mongoengine)
*   [https://flask-mongoengine.readthedocs.org/en/latest/#supported-fields](https://flask-mongoengine.readthedocs.org/en/latest/#supported-fields)

# java - Java：XMLEncoder writeObject 子对象

> ID：14492644
> 
> 赞同：0
> 
> 时间：2013-01-24T01:53:43.530
> 
> 标签：java, parent-child

我正在做一些关于 Java 的功课，但我并不擅长它，而且我在尝试使用 XMLEncoder 将 App 对象存储到文件时遇到了问题。

简而言之，我的应用程序有一个抽象类`animal`，另一个扩展了前一个类，叫做`dog`and `cat`。在我的主应用程序中，我有一个创建新动物的静态方法，该方法将新动物对象添加到类型为静态的 ArrayList 中`animal`：`public static ArrayList<animal> animalArray = new ArrayList<animal>();`

**在Kingdom.java**中创建动物 ：

 **```
private static void newAnimal(ArrayList<animal> animalArray) {
            System.out.print("  Enter a name for the dog > ");
            animalArray.add(new dog(keyboard.nextLine()));
            System.out.println("  New dog with name " + animalArray.get(animalArray.size()-1).getName() + ".\n");

            try {
                FileOutputStream afos = new FileOutputStream("animals.xml");
                XMLEncoder encoder = new XMLEncoder(afos);
                encoder.writeObject(animalArray.get(animalArray.size()-1));
                encoder.close();
            } catch(IOException ioe){
                System.out.print("[ERROR!]");
            }
} 
```

我的抽象动物类： **animal.java：**

```
public abstract class animal {

    private static int alloc = 0;
    protected int id;
    private String name;

    animal() {
        alloc++;
        id = alloc;
    }

    public void play() {
        System.out.print("   The animal (" + this.id + ") " + this.name + " is now playing... ");
    }

    public void setName(String lname) {
        this.name = lname;
    }

    public String getName() {
        return this.name;
    }

    public static int countAnimals() {
        return alloc;
    }

} 
```

现在，我的狗类： **dog.java：**

```
public class dog extends animal {

    dog(String theName) {
        this.setName(theName);
    }

    @Override
    public void play() {
        super.play();
        System.out.println(" Dog Stuff!");
    }

} 
```

**当我尝试运行代码时，我得到：**

```
java.lang.InstantiationException: dog
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement XMLEncoder.writeObject(dog);
Continuing ... 
```

我错过了什么？谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:32:02.403

你应该使用如下：

**encoder.writeObject(animalArray.get(animalArray.size()-1).getName());**

Dog 对象本身不能保存到 XMLEncoder。

谢谢。**

# cakephp-2.0 - $this-> 重定向不起作用

> ID：14492647
> 
> 赞同：0
> 
> 时间：2013-01-24T01:54:00.790
> 
> 标签：cakephp-2.0

我有这个奇怪的困境。我似乎无法从我的登录页面重定向。`$this->redirect`从其他方法工作正常，但不仅仅是从这个方法。我尝试为它制作一个虚拟方法，我尝试删除所有 eof 文件空格，甚至尝试清空缓存。相同的代码在 localhost 上似乎可以正常工作，但是一旦我将其复制到服务器，它就开始对我发疯。我的控制器代码是

```
if ($this->request->is('post'))
{
    $user = $this->User->find('first', array('conditions' => array('username' => $this->request->data['username'])));
    if($user['User']['passwd'] == AuthComponent::password($this->request->data['password']))
    {           
         $this->redirect('http://www.google.com.au/');
    }
    else
    {
        echo "Wrong Password";              
    }
} 
```

我正在使用我的自定义登录作为身份验证组件，似乎与我相处得并不融洽。

应用控制器：

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' =>array('controller' => 'dashboards', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'users', 'action' => 'login')
    )
); 
```

看法：

```
<form name="loginform" id="loginform" method="post" class="">
    <p>
        <label for="username">Username<br />
            <input type="text" name="username" id="username" class="input" value="" size="20" />
        </label>
    </p>
    <p>
        <label for="password">Password<br />
            <input type="password" name="password" id="password" class="input" value="" size="20" />
        </label>
    </p>
    <p class="submit">
        <input type="submit" name="Submit" id="Submit" class="button button-primary button-large" value="Log In" />
    </p>
</form> 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:00:18.390

尝试这个

```
You can set $this->Auth->loginRedirect 
```

或者这个在*AppControler.php*

```
$this->Auth->loginRedirect = array('controller' => 'posts', 'action' => 'index'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:24:00.140

试试这个，希望它会工作。:-)

```
'Auth' => array(
          'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home'), 
```

# android - 从 xml 文件中调用颜色

> ID：14492648
> 
> 赞同：2
> 
> 时间：2013-01-24T01:54:01.087
> 
> 标签：android, android-xml

如果我在 res/values/colors 中有一个带有自定义颜色的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<resources>
 <drawable name="red">#ff0000</drawable>
 <drawable name="blue">#0000ff</drawable>
 <drawable name="green">#00ff00</drawable>
</resources> 
```

如何在其他代码中使用颜色或其他值？

我怎样才能使用这些参数？就像是：

```
 int green = context.getResources().getColor(R.color.green);
    g.drawRect(1, 1, 181, 121, green); 
```

在 logcat 中给出错误并使程序崩溃。因此，如果 colors.xml 在 res/values/ 中并且我导入了上下文，我该如何使用绿色，例如在参数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:01:56.547

首先，在您的 xml 中更改`drawable`为。`color`

然后你需要有上下文。它是这样的：

`context.getResources().getColor(R.color.green);`

它返回一个 int 颜色值。

编辑：

对于其他值，请参阅此处的函数：

[http://developer.android.com/reference/android/content/res/Resources.html](http://developer.android.com/reference/android/content/res/Resources.html)

我喜欢 tp 一次获取我所有的 xml 颜色并从那里传递它们，所以我不会一遍又一遍地输入上面的内容。不确定这是否被认为是最佳实践。

如果你想在 Paint 中使用它，它可能是：

```
// Declare this at the beginning:
Paint green paint;
// This goes in the constructor:
greenPaint = new Paint();
greenPaint.setColor(context.getResources().getColor(R.color.green));
// then draw something in onDraw, for example:
canvas.drawRect(5,5,5,5, greenPaint); 
```

如果您想在多个 Paints 等中使用它，请将其保存为 int：

```
int greenNum = context.getResources().getColor(R.color.green); 
```

# scripting - 检查脚本是否在 AutoHotkey 中暂停

> ID：14492650
> 
> 赞同：3
> 
> 时间：2013-01-24T01:54:28.563
> 
> 标签：scripting, autohotkey

我有一个脚本，我想监控另外两个脚本。基本上，如果监控脚本看到记事本打开，它会检查是否 script1 被挂起，如果不是，它什么也不做，它会挂起 script1 并取消挂起 script2。

```
 If (WinExist("ahk_class Notepad") AND (script1 A_IsSuspended = 1)){
            Suspend script2
            un-suspend script1
       } 
```

如何检查其他脚本是否已暂停？

有没有办法发送暂停开/关而不是切换到脚本？这是切换： PostMessage, 0x111, 65305,,, script1.ahk - AutoHotkey

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T08:46:25.793

暂停或取消暂停另一个脚本的唯一方法是：

*   通过发送菜单命令消息；即切换。
*   通过实现某种形式的进程间通信（消息传递）并让其他脚本自行挂起。

但是，您可以做的是在发送切换消息之前**检查脚本是否已暂停。**您可以通过检查“*暂停热键*”菜单项是否有复选标记来执行此操作。

```
ScriptSuspend(ScriptName, SuspendOn)
{
    ; Get the HWND of the script's main window (which is usually hidden).
    dhw := A_DetectHiddenWindows
    DetectHiddenWindows On
    if scriptHWND := WinExist(ScriptName " ahk_class AutoHotkey")    
    {
        ; This constant is defined in the AutoHotkey source code (resource.h):
        static ID_FILE_SUSPEND := 65404

        ; Get the menu bar.
        mainMenu := DllCall("GetMenu", "ptr", scriptHWND)
        ; Get the File menu.
        fileMenu := DllCall("GetSubMenu", "ptr", mainMenu, "int", 0)
        ; Get the state of the menu item.
        state := DllCall("GetMenuState", "ptr", fileMenu, "uint", ID_FILE_SUSPEND, "uint", 0)
        ; Get the checkmark flag.
        isSuspended := state >> 3 & 1
        ; Clean up.
        DllCall("CloseHandle", "ptr", fileMenu)
        DllCall("CloseHandle", "ptr", mainMenu)

        if (!SuspendOn != !isSuspended)
            SendMessage 0x111, ID_FILE_SUSPEND,,, ahk_id %scriptHWND%
        ; Otherwise, it's already in the right state.
    }
    DetectHiddenWindows %dhw%
} 
```

用法如下：

```
SetTitleMatchMode 2  ; Allow filename instead of full path.
ScriptSuspend("script1.ahk", true)   ; Suspend.
ScriptSuspend("script1.ahk", false)  ; Unsuspend. 
```

您可以通过将 ID_FILE_SUSPEND (65404) 替换为 ID_FILE_PAUSE (65403) 来对暂停执行相同操作。但是，您需要将 WM_ENTERMENULOOP (0x211) 和 WM_EXITMENULOOP (0x212) 消息发送到要更新*暂停脚本复选标记的脚本。*

# eclipse - 为什么 Java 错误会阻止我从 C++ 角度构建？

> ID：14492651
> 
> 赞同：2
> 
> 时间：2013-01-24T01:54:34.717
> 
> 标签：eclipse, eclipse-cdt

我最近为 Eclipse 安装了 CDT 并制作了一个简单的 hello world C++ 项目。

当我尝试构建 C++ 项目时，出现错误：

```
Syntax Error: 'for each' statements are only available if source level
    is 1.5 or greater 
```

此错误与 java 中的代码有关。为什么错误阻止我构建 C++ 项目？我已经尝试过 Window > Open Perspective > C/C++，但我仍然无法构建我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:03:43.423

在 C/C++ 透视图中，单击 Make 选项卡（图标是绿色靶心目标）。然后您可以双击代表您想要的产品的 C++ 目标。或者，如有必要，单击添加目标，然后进行配置……玩得开心。

尽管编辑器没问题，但我个人已经放弃了 CDT 进行构建。

# grails - 将 Grails 添加到现有的 WAR 文件中？

> ID：14492657
> 
> 赞同：0
> 
> 时间：2013-01-24T01:55:16.270
> 
> 标签：grails, war

我正在开发一个当前不使用 Groovy 或 Grails 的现有 WAR 应用程序。我有兴趣使用 Grails 来实现一个新功能，并着眼于在未来更多地使用它。但是，这需要作为现有 WAR 文件的一部分进行部署。

我还没有找到任何关于这种用例的文档。我`grails war`在测试应用程序上运行，然后剖析生成的 WAR 文件以查看 web.xml 和其他配置文件中的内容。我想我*可以*手动将所需的配置添加到我现有的 web.xml 中，但那时我会被困在手动维护它，并且会失去该`grails`命令的大部分好处。

看起来 Grails 想要完全控制它自己的小世界，我认为我对在我的第一个项目中如此强烈地反对谷物感兴趣。我可能不会使用 GORM（因为该模型不是一个简单的关系存储），所以 Grails 在这种情况下无论如何都可能是矫枉过正。也许像 Ratpack 这样的东西会更适合我的需要。

但在完全放弃 Grails 之前，我想我会看看我是否遗漏了一些明显的东西。我可以轻松地做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:37:16.290

你是对的，grails 期望控制战争的产生，但是应该可以将你现有的项目适应 grails，而不是反过来。如果您这样做`grails install-templates`，您可以编辑默认的 grails web.xml 以添加您需要的任何额外位。

# python - django 防止删除模型实例

> ID：14492666
> 
> 赞同：6
> 
> 时间：2013-01-24T01:56:29.603
> 
> 标签：python, django, django-models

我有一个models.Model 子类，它代表我的mysql 数据库上的一个视图（即managed=False）。

但是，在运行我的单元测试时，我得到：

> DatabaseError: (1288, 'DELETE 的目标表 my_view_table 不可更新')

此删除请求的来源是（间接）通过外键。我有（简化）：

```
class MyViewModel(models.Model):
    problematic_field = models.ForeignKey(ActualTableModel) # specifying on_delete=models.SET_NULL simply replaces the DELETE error with an UPDATE one 
```

在我的测试拆解期间，我正在删除 ActualTableModel 实例，看起来 django 正在遵循记录的行为：

> 当 Django 删除一个对象时，它会模拟 SQL 约束 ON DELETE CASCADE 的行为——换句话说，任何具有指向要删除对象的外键的对象都将被删除。

当应用于 (managed=False) 视图时，这似乎会导致问题。

我尝试覆盖删除方法以防止删除：

```
class MyViewModel(models.Model):
    ...
    def delete(self, *args, **kwargs):
        pass # deletion of a view row is never valid 
```

但这并没有解决问题。

我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T02:59:26.060

也许您可以尝试各种[on_delete 参数选项](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)之一？

IE。：

```
problematic_field = models.ForeignKey(ActualTableModel, on_delete=models.PROTECT) 
```

# selenium - 需要单击带有硒的按钮

> ID：14492673
> 
> 赞同：0
> 
> 时间：2013-01-24T01:57:52.240
> 
> 标签：selenium

我需要使用 selenium（java 服务器）单击一个按钮 - 该按钮只有一个类型，没有 id/值。任何有用的建议都将受到欢迎

```
<button type="submit">Enter</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:42:45.237

另一个选项是 //button[contains(text(),'Enter')]，但如果您有本地化站点，这会中断..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:15:12.030

以下对我有用：

```
selenium.click("//button[@type='submit']" 
```

# substitution - 如何在 Maple 中涉及 D(f)(x) 的表达式中替换函数 f(x)？

> ID：14492677
> 
> 赞同：0
> 
> 时间：2013-01-24T01:58:40.513
> 
> 标签：substitution, maple

在 Maple 中，如果我们想在下面的表达式中将函数 f(x) 替换为 f(x)+a*f1(x)，我们可以这样做

```
expr:=f(x)+diff(f(x),x);
subs(f(x)=f(x)+a*f1(x),expr); 
```

但是，如果我们想在这个表达式中进行相同的替换

```
expr:=f(x)+D(V)(f(x))+D(f)(x); 
```

D(f)(x) 项不会改变。是否有一种方便的方法可以在涉及 D(f)(x) 或更高级导数的表达式中进行替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:32:53.940

以下两种方式中的第一种可能更符合您的要求。第二种方法包含一个修复，强制它`a`是恒定的`x`（即`a(x)`不依赖于`x`）。

```
expr:=f(x)+D(V)(f(x))+D(f)(x);

              f(x) + D(V)(f(x)) + D(f)(x)

eval( expr, f=(t->f(t)+a*f1(t)) );

      f(x) + a f1(x) + D(V)(f(x) + a f1(x)) + D(f)(x) + a D(f1)(x)

eval( eval(expr,f=f+a*f1), [D(a)(x)=0, a(x)=a] );

      f(x) + a f1(x) + D(V)(f(x) + a f1(x)) + D(f)(x) + a D(f1)(x) 
```

# audio - 如何使用 FFmpeg 将 ADPCM 转换为 PCM？

> ID：14492678
> 
> 赞同：2
> 
> 时间：2013-01-24T01:58:43.823
> 
> 标签：audio, android-ndk, ffmpeg, pcm

我有一个视频源，它使用 ADPCM 编解码器向我发送音频。但是，android 只支持 PCM 格式。如何将 ADPCM 音频输入转换为 PCM 音频输入？

这个问题的答案可能类似于[这个问题](https://stackoverflow.com/questions/14376218/convert-m4a-to-pcm-using-libavcodec)的答案。

我已经使用以下代码成功解码了帧：

```
int len = avcodec_decode_audio4(pAudioCodecCtx, pAudioFrame, &frameFinished, &packet); 
```

这里的秘密是使用反向**编码**功能吗？

这是我到目前为止的音频解码功能：

```
<!-- language: c -->
if(packet_queue_get(env, javaThread, pAudioPacketQueue, &packet, 1) < 0) {
    LOGE("audio - after get packet failed");
    return;
}
LOGD("Dequeued audio packet");

// calculate frame size
int frameSize;
if (pPcmAudioCodecCtx->frame_size) {
    frameSize = pPcmAudioCodecCtx->frame_size;
} else {
    /* if frame_size is not set, the number of samples must be
     * calculated from the buffer size */
    int64_t nb_samples = (int64_t)AUDIO_PCM_OUTBUFF_SIZE * 8 /
            (av_get_bits_per_sample(pPcmAudioCodecCtx->codec_id) *
                    pPcmAudioCodecCtx->channels);
    frameSize = nb_samples;
}

int pcmBytesPerSample = av_get_bytes_per_sample(pPcmAudioCodecCtx->sample_fmt);
int pcmFrameBytes = frameSize * pcmBytesPerSample * pPcmAudioCodecCtx->channels;

uint8_t *pDataStart = packet.data;
while(packet.size > 0) {
    int len = avcodec_decode_audio4(pAudioCodecCtx, pAudioFrame, &frameFinished, &packet);
    LOGD("Decoded ADPCM frame");

    if (len < 0) {
        LOGE("Error while decoding audio");
        return;
    }

    if (frameFinished) {
        // store frame data in FIFO buffer
        uint8_t *inputBuffer = pAudioFrame->data[0];
        int inputBufferSize = pAudioFrame->linesize[0];
        av_fifo_generic_write(fifoBuffer, inputBuffer, inputBufferSize, NULL);
        LOGD("Added ADPCM frame to FIFO buffer");

        // check if fifo buffer has enough data for a PCM frame
        while (av_fifo_size(fifoBuffer) >= pcmFrameBytes) {
            LOGI("PCM frame data in FIFO buffer");

            // read frame's worth of data from FIFO buffer
            av_fifo_generic_read(fifoBuffer, pAudioPcmOutBuffer, pcmFrameBytes, NULL);
            LOGD("Read data from FIFO buffer into pcm frame");

            avcodec_get_frame_defaults(pPcmAudioFrame);
            LOGD("Got frame defaults");

            pPcmAudioFrame->nb_samples = pcmFrameBytes / (pPcmAudioCodecCtx->channels *
                    pcmBytesPerSample);

            avcodec_fill_audio_frame(pPcmAudioFrame, pPcmAudioCodecCtx->channels,
                    pPcmAudioCodecCtx->sample_fmt,
                    pAudioPcmOutBuffer, pcmFrameBytes, 1);
            LOGD("Filled frame audio with data");

            // fill audio play buffer
            int dataSize = pPcmAudioFrame->linesize[0];
            LOGD("Data to output: %d", dataSize);
            jbyteArray audioPlayBuffer = (jbyteArray) env->GetObjectField(ffmpegCtx, env->GetFieldID(cls, "audioPlayBuffer", "[B"));
            jbyte *bytes = env->GetByteArrayElements(audioPlayBuffer, NULL);
            memcpy(bytes, pPcmAudioFrame->data[0], dataSize);
            env->ReleaseByteArrayElements(audioPlayBuffer, bytes, 0);
            LOGD("Copied data into Java array");

            env->CallVoidMethod(player, env->GetMethodID(playerCls, "updateAudio", "(I)V"), dataSize);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:07:00.630

事实证明，这些`audio_decode_`函数返回 16 位 PCM 格式，而我只是不知道如何正确访问它。

这是在基于`avcodec_decode_audio4`.

```
int len = avcodec_decode_audio4(pAudioCodecCtx, pAudioFrame, &frameFinished, &packet);

if (len < 0) {
    LOGE("Error while decoding audio");
    return;
}

if (frameFinished) {
    int planeSize;
    uint8_t *pcmBuffer = pAudioFrame->extended_data[0];
    int dataSize = av_samples_get_buffer_size(&planeSize, pAudioCodecCtx->channels,
                                                       pAudioFrame->nb_samples,
                                                       pAudioCodecCtx->sample_fmt, 1);
    // fill audio play buffer
    jbyteArray audioPlayBuffer = (jbyteArray) env->GetObjectField(ffmpegCtx, env->GetFieldID(cls, "audioPlayBuffer", "[B"));
    jbyte *bytes = env->GetByteArrayElements(audioPlayBuffer, NULL);
    memcpy(bytes, pcmBuffer, dataSize);
    env->ReleaseByteArrayElements(audioPlayBuffer, bytes, 0);
    env->CallVoidMethod(player, env->GetMethodID(playerCls, "updateAudio", "(I)V"), dataSize);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:40:02.993

[您可以在http://ffmpeg.org/doxygen/trunk/doc_2examples_2decoding_encoding_8c-example.html](http://ffmpeg.org/doxygen/trunk/doc_2examples_2decoding_encoding_8c-example.html)查看示例代码

见`audio_encode_example`功能。

# php - php - 为时间表锁定一周中的几天

> ID：14492680
> 
> 赞同：1
> 
> 时间：2013-01-24T01:59:12.307
> 
> 标签：php, mysql

如果有人提交了那一周的时间表，我试图锁定一整周，这样他们就无法在已经提交的那一周编辑/添加新时间。

我目前有一个 checksubmit 函数，如果有人提交了该周的时间表，则返回 1（检查 $submitendweek，这将是结束周的星期六，即：2013-01-05）

我对编程和语言 php/mysql 非常陌生，所以我对缺乏 php 知识表示歉意。

这是我暂时使用的，但非常恶心，没有赶上上个月的日子……比如 30 日或 31 日。

```
$submitted = checksubmit($contextUser, $year, $month, $curDay);
$submitted1 = checksubmit($contextUser, $year, $month, $curDay+1);
$submitted2 = checksubmit($contextUser, $year, $month, $curDay+2);
$submitted3 = checksubmit($contextUser, $year, $month, $curDay+3);
$submitted4 = checksubmit($contextUser, $year, $month, $curDay+4);
$submitted5 = checksubmit($contextUser, $year, $month, $curDay+5);
$submitted6 = checksubmit($contextUser, $year, $month, $curDay+6);
if ($submitted || $submitted1 || $submitted2 || $submitted3 || $submitted4 || $submitted5 || $submitted6) {
print "submitted already";
...more
} else {
print "submit button";
...more 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:05:26.083

一个[for](http://php.net/manual/en/control-structures.for.php)循环将在这里帮助你。

```
$submitted = false;

for($i = 0; $i < 7; $i++) {
    if(checksubmit($contextUser, $year, $month, $curDay + $i)) {
        print 'submitted already';

        // one was sumbitted

        $submitted = true;
        break;
    }
}

if(!$sumbitted) {
    print 'submit button';

    // none were submitted this week
} 
```

# mysql - 基于单元格值的动态列选择

> ID：14492682
> 
> 赞同：1
> 
> 时间：2013-01-24T01:59:39.533
> 
> 标签：mysql, sql, sqlite

我有一个形状的问题数据库

```
ID , Question , Answer1 , Answer2 , Answer3 , Answer4 , True 
```

其中“True”是正确答案的索引：

```
True = 0 --> Answer1
....
True = 3 --> Answer4 
```

我只需要选择问题和正确答案，这就是我到目前为止得到的：

```
SELECT Question , 'Answer' || (True+1) From Questions 
```

但它返回问题和“answer1”或“answer2”......即：列的名称我不需要它的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:01:53.223

你可以`CASE`在 MySQL 中使用。

```
SELECT  Question,
        CASE True
            WHEN 0 THEN Answer1
            WHEN 1 THEN Answer2
            WHEN 2 THEN Answer3
            WHEN 3 THEN Answer4
        END AS Answer
FROM    tableName 
```

或者

```
SELECT  Question,
        CASE 
            WHEN TRUE = 0 THEN Answer1
            WHEN TRUE = 1 THEN Answer2
            WHEN TRUE = 2 THEN Answer3
            WHEN TRUE = 3 THEN Answer4
        END AS Answer
FROM    tableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:02:01.073

如果您可以重构数据库架构，则可以将其更改为：

QuestionID、QuestionText、AnswerID、AnswerText、IsCorrect

要获得正确答案，请使用以下查询：

从 QuestionID = X 且 IsCorrect = True 的问题中选择 *

要获得所有答案，请使用以下查询：

从 QuestionID = X 的问题中选择 *

现在，您可以随心所欲地为一个问题提供尽可能多或尽可能少的答案。

# jquery - 仅当有标头时，Chrome 中的 CORS 请求才会失败

> ID：14492686
> 
> 赞同：14
> 
> 时间：2013-01-24T02:00:26.570
> 
> 标签：jquery, ajax, google-chrome, http-headers, cors

我正在尝试向使用会话密钥进行授权的外部应用程序服务器发送简单的 CORS 请求。

```
$.ajax({
    type: "GET",
    url: "https://192.168.1.72:8442/api/file/",
    headers: {"Authorization": "3238562439e44fcab4036a24a1e6b0fb"}
}); 
```

它在 Firefox 18、Opera 12.12 和 Rekonq 2.0（也使用 WebKit）中运行良好，但在 Google Chrome 中不起作用（已尝试版本 21 和 24）。在 Google Chrome 中，它显示 OPTIONS Resource 无法在 Network Inspector 中加载，并且应用程序服务器没有收到任何请求。我试过 jQuery 1.8.3 和 1.9.0。

```
Request URL:https://192.168.1.72:8442/api/file/
Request Headers
Access-Control-Request-Headers:accept, authorization, origin
Access-Control-Request-Method:GET
Cache-Control:no-cache
Origin:https://192.168.1.72:8480
Pragma:no-cache 
```

如果我从请求中删除标头，那么我也会在 Google Chrome 中收到 401，并且它能够在应用程序服务器上禁用授权的情况下访问资源。发送哪些标头并不重要。我能够发送的唯一标题是{“Content-Type”：“plain/text”}。所有其他标题名称/值在 Google Chrome 中都会出错，但在我上面提到的所有浏览器中都可以使用。

为什么谷歌浏览器不处理 CORS 请求中的标头？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T19:51:15.153

这是 Google Chrome 中的一个错误：[http](http://code.google.com/p/chromium/issues/detail?id=96007) ://code.google.com/p/chromium/issues/detail?id=96007 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-15T15:46:26.637

我发现 Access-Control-Allow-Headers: * 应该只为“OPTIONS”请求设置。如果您为 POST 请求返回它，那么浏览器会取消请求（至少对于 chrome）

以下 PHP 代码适用于我

```
// Allow CORS
header("Access-Control-Allow-Origin: *");
header('Access-Control-Allow-Credentials: true');    
header("Access-Control-Allow-Methods: GET, POST, OPTIONS"); 

// Access-Control headers are received during OPTIONS requests
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
  header("Access-Control-Allow-Headers: *");
} 
```

我发现类似的问题有一些误导性的回答： - 服务器线程说这是 2 年的 chrome 错误：Access-Control-Allow-Headers 与 localhost 不匹配。这是错误的：我可以正常使用 CORS 到我的本地服务器和 Post - Access-Control-Allow-Headers 确实接受通配符。这也是错误的，通配符对我有用（我只用 Chrome 测试过）

这需要我半天时间才能弄清楚这个问题。

快乐编码

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T17:20:40.617

我在我的 api 服务器上使用自签名证书，这似乎是问题所在。我发现如果我使用`--disable-web-security`选项启动 Google Chrome，那么带有请求标头的 CORS 就可以工作。如果没有`--disable-web-security`，我可以将 CORS 请求发送到自签名 api 服务器，但不能添加任何标头（Content-Type 除外）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T10:04:25.543

**服务器端**：服务器应设置标头“Access-Control-Allow-Credentials”，并在“Access-Control-Allow-Headers”中设置允许的标头。

**客户端**：您可以在 $.ajax() 中设置 xhrFields，而不是显式传递 Auth 标头。

```
xhrFields: {
    withCredentials: true 
} 
```

更多细节[在这里](http://www.html5rocks.com/en/tutorials/cors/)。

# javascript - IE 10 中的 javascript 事件似乎对 pageX/Y 有错误的值

> ID：14492689
> 
> 赞同：1
> 
> 时间：2013-01-24T02:00:45.907
> 
> 标签：javascript, internet-explorer-10

在 IE 7、8、9、chrome 和 firefox 中，mouseHandler 上的 pageX/Y 属性是指相对于页面顶部的位置，而 clientX/Y 属性是相对于当前视口的位置。在 IE 10 中，看起来 pageX/Y 与 clientX/Y 相同。有没有已知的工作？

您可以尝试使用此[http://jsfiddle.net/FCTUW/2/](http://jsfiddle.net/FCTUW/2/) ，只需滚动到右下角的页面底部，然后将鼠标移到灰色矩形上。

这是用于查找坐标的代码，因为 SO 想要代码...

```
canvas.mousemove(function(e){
var pageCrds = '('+ e.pageX +', '+ e.pageY +')',
    clientCrds = '('+ e.clientX +', '+ e.clientY +')'; 
```

有谁知道为什么要进行此更改，或者如何获得正确的页面坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:10:48.110

我没有看到与您相同的结果。您可能没有查看脚本的*实际*结果 - 或者您可能不小心将相同的属性写了两次。无论哪种方式，我下面的结果都来自 Internet Explorer 10，在 Windows 8 上运行您的演示。

![在此处输入图像描述](../Images/89bc5865b9d659ff60f7d1895b0a6ad4.png)

这符合[MSDN](http://msdn.microsoft.com/en-us/library/ie/ff974879%28v=vs.85%29.aspx)关于`client`和`page`价值观的陈述：

> 客户端坐标不反映页面的滚动偏移量。要获取鼠标指针相对于文档左上角的坐标，请使用 pageX 和 pageY 属性。

# ruby - 无法安装最新版本的 rspec

> ID：14492690
> 
> 赞同：0
> 
> 时间：2013-01-24T02:00:46.760
> 
> 标签：ruby, rspec, rubygems, bundler

所以我正在研究一个 gem...我输入 bundle，它会安装 rspec 2.0.1，我相信你会明白，这在 rspec 2.12.2 的这个时代是完全不可接受的。

我会同意的，除非我运行 rake spec ......

```
 % rake spec
/home/alg/.rvm/rubies/ruby-1.9.3-p374/bin/ruby -S bundle exec rspec "./spec/file_comparisons_spec.rb" "./spec/monitor_spec.rb" "./spec/pipboy_spec.rb"
/home/alg/Documents/Code/pipboy/spec/spec_helper.rb:8:in `block in <top (required)>': undefined method `treat_symbols_as_metadata_keys_with_true_values=' for #<RSpec::Core::Configuration:0x9c99a74> (NoMethodError)
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core.rb:67:in `configure'
    from /home/alg/Documents/Code/pipboy/spec/spec_helper.rb:7:in `<top (required)>'
    from /home/alg/Documents/Code/pipboy/spec/file_comparisons_spec.rb:1:in `require'
    from /home/alg/Documents/Code/pipboy/spec/file_comparisons_spec.rb:1:in `<top (required)>'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `load'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `block in load_spec_files'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `map'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `load_spec_files'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:18:in `run'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:55:in `run_in_process'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:46:in `run'
    from /home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:10:in `block in autorun'
rake aborted!
ruby -S bundle exec rspec "./spec/file_comparisons_spec.rb" "./spec/monitor_spec.rb" "./spec/pipboy_spec.rb" failed
/home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/rake_task.rb:117:in `rescue in block (2 levels) in initialize'
/home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/rake_task.rb:113:in `block (2 levels) in initialize'
/home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/gems/rspec-core-2.0.1/lib/rspec/core/rake_task.rb:109:in `block in initialize'
/home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/bin/ruby_noexec_wrapper:14:in `eval'
/home/alg/.rvm/gems/ruby-1.9.3-p374@pipboy/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => spec
(See full trace by running task with --trace) 
```

所以这是我认为重要的部分，即使我找不到它们有什么问题：

=> 耙文件

```
require "bundler/gem_tasks"
require 'rspec/core/rake_task'
require 'cucumber/rake/task'

RSpec::Core::RakeTask.new(:spec)

task :default => :spec

Cucumber::Rake::Task.new(:features) do |t|
    t.cucumber_opts = "features --format progress"
end 
```

=> 宝石文件

```
source :rubygems

# Specify your gem's dependencies in pipboy.gemspec
gemspec 
```

=> 宝石规格

```
# -*- encoding: utf-8 -*-
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'pipboy/version'

Gem::Specification.new do |gem|

  gem.files         = `git ls-files`.split($/)
  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
  gem.require_paths = ["lib"]

  gem.add_development_dependency 'rspec'
  gem.add_development_dependency 'cucumber'
  gem.add_development_dependency 'rake'
  gem.add_development_dependency 'rdoc'
end 
```

而且，没有 Gemfile.lock，调用 bundle 的结果...

```
% bundle
Fetching gem metadata from http://rubygems.org/.........
Fetching gem metadata from http://rubygems.org/..
Using rake (10.0.3) 
Using builder (3.1.4) 
Using diff-lcs (1.2.0) 
Using json (1.7.6) 
Using gherkin (2.11.5) 
Using cucumber (1.2.1) 
Using pipboy (0.0.1) from source at /home/alg/Documents/Code/pipboy 
Using rdoc (3.12) 
Using rspec-core (2.0.1) 
Using rspec-expectations (2.0.1) 
Using rspec-mocks (2.0.1) 
Using rspec (2.0.1) 
Using bundler (1.2.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

=> Gemfile.lock 事后

```
PATH
  remote: .
  specs:
    pipboy (0.0.1)

GEM
  remote: http://rubygems.org/
  specs:
    builder (3.1.4)
    cucumber (1.2.1)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.11.0)
      json (>= 1.4.6)
    diff-lcs (1.2.0)
    gherkin (2.11.5)
      json (>= 1.4.6)
    json (1.7.6)
    rake (10.0.3)
    rdoc (3.12)
      json (~> 1.4)
    rspec (2.0.1)
      rspec-core (~> 2.0.1)
      rspec-expectations (~> 2.0.1)
      rspec-mocks (~> 2.0.1)
    rspec-core (2.0.1)
    rspec-expectations (2.0.1)
      diff-lcs (>= 1.1.2)
    rspec-mocks (2.0.1)
      rspec-core (~> 2.0.1)
      rspec-expectations (~> 2.0.1)

PLATFORMS
  ruby

DEPENDENCIES
  cucumber
  pipboy!
  rake
  rdoc
  rspec 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:29:37.170

看来，诀窍就是这样做。

`gem.add_development_dependency 'rspec', '>= 2.12.0'`

rspec 使用的 rspec-core 版本为 2.12.2——我错误地认为这些子宝石会与元宝石同时升级。

再说一次，我不知道为什么要下载 rspec 2.0.1 而不是 2.12.0 ...

# wpf - MVVM 中的行为和视图模型如何关联？

> ID：14492694
> 
> 赞同：6
> 
> 时间：2013-01-24T02:01:14.743
> 
> 标签：wpf, mvvm, binding, behavior

所以我在学习 MVVM 的时候偶然发现了一个问题。我有一个包含 TextBlocks 的 TreeView，当我双击 TreeView 中的任何 TextBlocks 时，我想对其执行操作。我开始学习行为，我有一个很好的例子来说明行为是如何实现的，但是这个例子根本没有将行为连接到 ViewModel。所以换句话说，如果我双击 TextBlock，我有 Behavior 类可以捕获它，但我没有任何 ViewModel 来执行任何操作。

有人可以花点时间解释一下这些是如何联系起来的吗？我正在查看这篇文章： http: [//msdn.microsoft.com/en-us/library/gg430869](http://msdn.microsoft.com/en-us/library/gg430869(v=pandp.40).aspx) (v=pandp.40).aspx 但我似乎不明白我在寻找什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T02:31:30.783

MVVM 概念为我们提供了 WPF 应用程序中的解耦机制，这意味着 xaml.cs 文件中不再有代码。附加行为是不同的事情。它与 MVVM 无关。

但是因为如果我们有我不能使用 MVVM 的场景，例如双击时选择 TextBox 的文本。这是您要在文本框上添加的行为。

您将更喜欢在 xaml.cs 文件中实现双击功能，因为它不可重用且紧密耦合。

这就是行为出现的地方。我们将为 TextBox 创建行为并将其附加。现在，您可以将此行为附加到所需的任意数量的控件。

编辑：

如果您使用的是 WPF 4.5。您可以查看[事件的标记扩展](https://stackoverflow.com/questions/14207759/how-can-i-make-markupextenstion-for-button-click-event-in-wpf-4-5)

如果你想用附加的行为来做。创建具有命令依赖属性的双击事件的附加行为。您的双击行为只是提出附加的命令，并在 xaml 中将命令与 viewmodel 绑定，我希望您知道如何。

希望，我能够回答你的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-26T13:34:15.267

[DJ 有一个很好的答案](https://stackoverflow.com/a/14492957/975724)，尽管我想在这个讨论中加入一些额外的想法。

**根据我的经验，当视图不依赖于视图模型来正常运行时**，视图行为（无论是代码隐藏、附加行为、混合行为还是自定义控制逻辑）通常很有用。如果视图（`UserControl`、`Window`、`Page`等）在没有视图模型的情况下在逻辑上没有意义，则从视图中删除行为并将其移动到视图模型可能更有意义。

虽然我们可以用各种行为在阳光下做几乎任何事情，但这通常是不明智的。MVVM 有充分的理由限制了我们应该做的事情，以便我们可以观察关注点分离以提高应用程序的内聚性并解耦我们的类。这两件事就是软件可维护性的全部意义所在，随着应用程序成长为企业软件，这些概念变得越来越重要。

重要的是要考虑行为所带来的*担忧。*了解这一点将有助于我们找到合适的位置。以下是一些有助于了解其所属位置的问题：

### 行为是否与业务域模型交互（这是 MVVM 中的第一个“M”）？

对域模型具有依赖关系（甚至是松散耦合的行为）的行为应该可能属于视图模型（或服务），而不是视图。例如，如果行为需要保存到外部设备（例如数据库）或从外部设备读取，则它具有视图不应该具有的依赖关系。将此逻辑包装在服务函数中。或者，如果不使用高度分层的架构，请将其放在视图模型中。

### 行为是否与应用服务、领域服务、基础设施服务等交互？

出于与先前答案相同的原因，该行为可能属于视图模型或服务类。视图不应该对服务或领域模型对象有明确的了解，因为它会混淆视图所具有的职责（或关注点）。视图应该只关注用户 UI 的视觉/物理方面。许多视图应该定义一个它绑定到的契约（即视图模型接口）以便正确操作。

### 是否需要在相同类型的不同视图中重用该行为？

这是一个有点棘手的问题。很多时候，我们预见到能够对相同的内容进行不同的呈现。实际上，这些情况下的视图是一些结构的薄包装。例如，假设对于一个电子邮件应用程序，我们有一个接收电子邮件的汇总视图和一个详细视图。两种视图可能都需要支持相同的行为（例如删除、回复、转发）。因为我们在同一类型的不同视图中重用行为，所以行为应该属于一个共同的、可重用的地方。视图模型逻辑是一个很好的地方。

### 是否需要在不同类型的视图中重用该行为？

当需要在不同类型的视图（例如`TextBox`, `ComboBox`）中重用行为时，我们可能需要附加行为。通常，我们可以知道这一点，因为视图是如此多样化，以至于它们不可能共享一个视图模型界面。鉴于行为与视图相关的职责有关，那么自定义控制逻辑、代码隐藏、附加行为或混合行为都是合适的地方。

# css - CSS 颜色名称 + alpha 透明度

> ID：14492695
> 
> 赞同：26
> 
> 时间：2013-01-24T02:00:18.187
> 
> 标签：css

是否可以通过名称加上 alpha 透明度值在 CSS 中定义颜色？

IE：

```
#mytext { color: red 0.5 } 
```

而不是像求助于 rgba

```
#mytext { color: rgba(255,0,0,0.5) } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T02:07:37.290

不可以。截至 2020 年，[CS​​S 颜色规范](https://www.w3.org/TR/css-color-3/)仅允许将颜色指定为：

*   命名颜色
    *   [有一组](https://www.w3.org/TR/css-color-3/#html4)基于 4 位颜色系统的 16 种颜色。这一套非常有限，今天看起来很难看。
    *   [CSS2 添加了 X11+SVG 命名颜色](https://www.w3.org/TR/css-color-3/#svg-color)，这些颜色更漂亮，但不允许您指定与颜色相关的不透明度值。
    *   还有一个[名为“系统颜色”](https://www.w3.org/TR/css-color-3/#css-system)的名称，但这些已被弃用，因为现代操作系统不再倾向于为 UI 元素使用单一的简单颜色。
*   RGB 颜色使用：
    *   6 位十六进制表示法 ( `#rrggbb`)
    *   3 位十六进制表示法 ( `#rgb`)
    *   `rgb( r, g, b )`表示法（使用百分比或 0-255 数字）
*   RGBA 颜色使用：
    *   8 位十六进制表示法 ( `#rrggbbaa`)
    *   `rgba( r, g, b, a )`表示法（请注意，CSS4 需要`rgb`接受 4 个参数，但并非所有浏览器都支持此），请注意它`a`在范围内`0-1.0`，而不是`0-255`.
*   HSL 和 HSLA 颜色：
    *   `hsl( h, s, l )`
    *   `hsla( h, s, l, a )`

这些中的每一个都是互斥的。

颜色名称现在不像在 CSS1.x 时代那样有用，因为命名颜色（除了`orange`）都是旧的“16 色”显示调色板的成员，而且现在通常看起来很难看。

如果您想使用颜色名称来提高可读性，请使用注释，如下所示：

```
color: rgb(0,0,0,0.5); /* semi-transparent black */ 
```

（将注释放在分号*之后*，因为许多 CSS 编辑器仅在注释位于属性声明之外时才保留注释）。

CSS3 增加了更多的命名颜色，包括 24 位 X11 颜色集，以及`hsl(h,s,l)`功能，但仍然不允许命名颜色和不透明度值的混合：http: [//www.w3.org/TR/css3 -颜色/](http://www.w3.org/TR/css3-color/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:13:03.933

您可以通过这种方式获得您想要的结果：

```
#mytext{
  color: red;
  opacity: 0.5;
} 
```

请注意，不透明度会影响整个元素，而不仅仅是文本，因此，例如，如果#mytext 元素具有背景色，那么它也会收到 0.5 的不透明度值

但是，我同意 Dai 的观点，使用颜色名称而不是 hex 或 rgb 代码不是你应该过分依赖的东西。这是一个丑陋的调色板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T13:12:18.823

# 不

虽然 sass 中有这样的方法，但更喜欢转换为十六进制数字/rgb，然后相应地添加 alpha

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-09T08:24:43.733

试试这样：

```
background-color: rgba($scssNamedColor, 0.5); 
```

# php - 页面类指导

> ID：14492697
> 
> 赞同：2
> 
> 时间：2013-01-24T02:01:39.057
> 
> 标签：php, oop

我试图弄清楚如何查询数据库并在多个页面上以 oop 输出结果。

这些页面将具有不同的查询和查询数量，有些将具有相似的布局，而另一些则完全不同。

这是为每个页面设置包含所需 sql 字段以及可能用于输出数据的 html 的类的正确方向吗？或者一个更有经验的 oop 设计师会做不同的事情吗？

例如（为可怕的伪代码道歉）：

```
abstract class Page(){}

class SearchPage extends Page()
{
    private $sql;
    function output(){};
}

class ProfilePage extends Page()
{
    private $sql;
    private $sql2;
    function output(){}; ← dynamic method that can output both sql and sql2??
}

class DatebaseFetch()
{
    __construct($sql)
    {
        $this->$sql=$sql;
    }

    function results()
    {
        ...get db results...;
        return $results;}
    }
}

class PageFactory()
{
    function getPage($page)
    {
        return new $page.Page();
    }
}

$page=PageFactory::getPage($_SERVER['PHP_SELF']);
$query=$page->sql;
$db=new DatabaseFetch($query);
$results=$db->results();
$page->output($results); 
```

代码的重点是得到这个程序代码的 oop 等价物：

```
Search Page:
$db=new PDO("mysql:host=localhost;dbname=test;","test","test");
$db->query("select search items from table");
while($row=$db->fetch(PDO::FETCH_ASSOC)){
    echo <html>....;
}

Profile Page:
$db=new PDO("mysql:host=localhost;dbname=test;","test","test");
$db->query("select profile items from table");
while($row=$db->fetch(PDO::FETCH_ASSOC)){
    echo <html>....;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:21:16.483

我会看一下 Zend Paginator 组件。您可以下载并单独安装。您可以使用 Zend_Paginator_Null_Adapter 或数据库之一，并帮助它为您生成页码。您需要做的就是确保您的界面正在更改页码和结果数。

[http://framework.zend.com/manual/2.0/en/modules/zend.paginator.usage.html](http://framework.zend.com/manual/2.0/en/modules/zend.paginator.usage.html)

# jquery - 如何从 div 中删除隐藏的输入

> ID：14492704
> 
> 赞同：0
> 
> 时间：2013-01-24T02:02:08.893
> 
> 标签：jquery, html

我想在“删除”按钮或换句话说删除函数被调用时删除隐藏的输入，但问题是它下面的代码不会删除输入，我怎样才能根据删除正确的输入文件名哪个被删除？下面是删除正确文件名但不删除隐藏输入的代码（为了测试，我将其更改为文本输入）：

```
 function stopImageUpload(success, imageID, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
            $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="hidden" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
            $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');
         }

 var _imagecounter = imagecounter;

    $('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
        jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
            $(".imagemsg" + _imagecounter).html(data);
        });

        $(this).parent().remove();
        $(".hiddenimg").parent().remove();
    });

          return true;   
    } 
```

下面是文件输入表格：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
"<p class='imagef1_upload_form'><label>" + 
"Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
"<input type='hidden' class='numimage' name='numimage' value='" + GetFormImageCount() + "' />" +</p>
"</p><p class='imagemsg'></p><p class='listImage'></p>" +
"<iframe class='upload_target_image' name='upload_target_image' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>"); 
```

隐藏的输入以另一种形式放置在 div 中，它之所以在另一种形式中的原因是因为上面的表单将嵌套在下面的表单中，如果我在上面的表单中包含隐藏的输入，那么我在使用 $_POST 时会遇到问题以嵌套形式发布隐藏输入中的值：

```
<form id="QandA" action="" method="post">
<div class='hiddenimg'></div>
</form> 
```

# linux - 编译错误：对“FT_Load_Char”的未定义引用

> ID：14492708
> 
> 赞同：0
> 
> 时间：2013-01-24T02:02:33.820
> 
> 标签：linux

我是SJ。我已经在我的 ubuntu9.10 中安装了 freetype 库。当我编译程序时，系统会打印这些信息： undefined reference to `FT_Load_Char'

我已经在 Makefile 中指定了库路径： LDFLAGS := -lm -L/usr/local/lib/freetype -L/work/example/tslib/tmp/lib/ts 请给我一个解决方案，谢谢。

# mediaelement.js - IE 9 中的 mediaelement.js 视频在标准模式下不工作

> ID：14492709
> 
> 赞同：1
> 
> 时间：2013-01-24T02:02:40.810
> 
> 标签：mediaelement.js

我已经看到几个关于 MediaElement.js 视频在 IE 9 中显示为黑色但音频仍在播放的问题。不过，似乎没有人给出答案。我正在使用我观察到的其他信息开始一个新线程。

我有一位同事在她的 PC 上遇到过这种情况，但我无法在其他机器上复制它。另一位同事说这发生在她的家用电脑上。我没有机会在它工作的机器之间比较确切的 IE 内部版本号。

该问题在我们网站和[http://mediaelementjs.com/托管的视频上很明显](http://mediaelementjs.com/)

来自我们网站和[http://mediaelementjs.com/](http://mediaelementjs.com/)的视频使用 MIME 类型的 video/mp4 提供，这是正确的，并且浏览器看到的是 MIME 类型。

播放器依靠 Flash 播放 MP4。

但是，如果我在我们的播放器中播放托管在 YouTube 上的视频，它就可以正常工作。

从 YouTube 发送的视频使用 MIME 类型的 video/x-flv 提供。

如果我使用 IE 的 Web Developer 将文档模式切换到 Quirks、IE 7 或 IE 8，视频显示正常。

我不知道这是否重要，但我最近在 Flash 后备中从 wmode=opaque 切换到 wmode=transparent。我可以尝试对此进行测试，但由于它涉及将代码重新部署到主站点，并且我做出该切换是有充分理由的，除非必须，否则我将推迟实时切换它。

有人在这里看到任何可能是线索的东西吗？

# javascript - javascript/jquery 在多维json对象中查找id号，并使用id号所在的对象作为对象本身

> ID：14492710
> 
> 赞同：3
> 
> 时间：2013-01-24T02:02:45.577
> 
> 标签：javascript, jquery, arrays, json, object

嗯嗯我怎么能这么说。让我们从我的对象的一个​​例子开始：

```
"data": {
    "events": [
        {
            "event_id": 12345,
            "event_ts_begin": 1358931738000,
            "event_ts_end": 1358931748000,
            "event_severity": "minor",
            "event_code": 23,
            "event_desc": "Completed",
            "event_type": "normal",
            "event_text": "Completed, blah on blah blah blah..."
        },
        {
            "event_id": 12346,
            "event_ts_begin": 1358931738000,
            "event_ts_end": 1358931748000,
            "event_severity": "minor",
            "event_code": 23,
            "event_desc": "Completed",
            "event_type": "normal",
            "event_text": "Completed, blah on blah blah blah..."
        },
        {
            "event_id": 12347,
            "event_ts_begin": 1358931738000,
            "event_ts_end": 1358931748000,
            "event_severity": "minor",
            "event_code": 23,
            "event_desc": "Completed",
            "event_type": "normal",
            "event_text": "Completed, blah on blah blah blah..."
        }
    ]
} 
```

我想做的是如何找出`event_id`12346 在这个多维对象中的位置，并将该特定数据集本身用作对象。以某种方式将其取出并定义一个临时变量作为该对象，因此它等于：

```
var tempObj = {
            "event_id": 12346,
            "event_ts_begin": 1358931738000,
            "event_ts_end": 1358931748000,
            "event_severity": "minor",
            "event_code": 23,
            "event_desc": "Completed",
            "event_type": "normal",
            "event_text": "Completed, blah on blah blah blah..."
        }; 
```

上面包含多个对象的示例对象，在某些情况下可以是 1,000 多个对象或更多。所以遍历它们并重建一个选项听起来不是一个好主意。所以我希望我能得到一些反馈来提出一个理智的解决方案。

有没有办法可以找到该特定对象的特定索引号以将其用作定义临时变量的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:26:22.010

您可以使用[jQuery.grep](http://api.jquery.com/jQuery.grep/)函数在数组中查找元素。

```
var tmpObj = $.grep(data.events, function(obj){
    return obj.event_id == '12347'
}); 
```

# node.js - 如何避免客户端断开的竞争条件？

> ID：14492713
> 
> 赞同：0
> 
> 时间：2013-01-24T02:03:17.590
> 
> 标签：node.js, socket.io

所以，我现在正在做的是在接收到新连接时创建一个新的客户端对象，并将它们存储在一个自我管理的对象中；在用户断开连接时，我正在删除该对象。这是它看起来的基础：

```
var socketobj = {};

io.sockets.on('connection', function(socket){
    socketobj[socket.id] = socket;

    socket.on('disconnect', function(data){
        delete socketobj[socket.id];
    });
}); 
```

我正在使用这些客户端对象中的每一个来存储额外的信息，例如关联的用户名等，形式为`socketobj[socket.id].user = username;`

我遇到的问题是我的代码的一个单独部分将运行，如果客户端在服务器访问其客户端对象之前断开连接，它将出现未定义（因为该对象刚刚被删除），并且它会抛出异常。

我怎样才能防止这种情况发生？至少，我怎样才能阻止错误每次抛出时使我的服务器崩溃？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-24T02:16:33.947

好的，我不知道它是基于事件而不是多线程的，这是一个新的答案。

只需在访问之前检查该条目是否存在。如果没有，它只是被删除了，你不能做任何事情/适当的不同的事情。

# 2d - HLSL：当我想要一个圆形时，请保持椭圆形！（像素着色器）

> ID：14492715
> 
> 赞同：0
> 
> 时间：2013-01-24T02:03:33.320
> 
> 标签：2d, shader, pixel, geometry, hlsl

我试图在我的 2D 横向滚动条中为玩家周围着色一个圆圈，但我一直得到一个椭圆形！这是我正在使用的重要代码部分：

```
 if(length(abs(coords - playerCoords)) < .1)
    {
        color = color *float4(1,0,1,1);
    }

  return color; 
```

我的屏幕尺寸是 1280 宽 x 720 高。我知道这是造成失真的原因，但我对自己的问题了解不够，无法提出或找到解决方案。有人可以向我解释如何补偿屏幕拉伸吗？

谢谢！

-ATD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:59:44.367

将“abs()”项乘以“float2((720./1280.),1.0)”——或者你的 y/x 纵横比可能是什么

您使用的坐标在 0-1 空间中标准化，因此只需更正它们

# mysql - 带有 concat 和 adddate 的嵌套 MySQL 查询

> ID：14492720
> 
> 赞同：1
> 
> 时间：2013-01-24T02:03:48.460
> 
> 标签：mysql, nested, concat-ws

我正在尝试嵌套一些查询，但到目前为止我得到了错误 1242：子查询返回超过 1 行。我想要不止一行，因为我正在处理许多记录。

我有 2 张桌子。一个的开始日期存储在 3 列中；yr_comm、mth_comm、day_comm。第二个表有一个服务期（以年为单位），表示为一个整数（2.71、3.45 等）。

我需要获取此开始日期（来自表 1），并添加服务期限（来自表 2）以获得结束日期，但我只需要显示年份。

我有 2 个单独的查询工作得很好，它们会产生所需的值，但是我在组合查询以获得所需的最终结果时遇到了麻烦。

查询 1：将 3 个开始值连接成日期格式

```
SELECT concat_ws('-', yr_comm, mth_comm, day_comm) AS date_comm
FROM table 1 
```

查询 2：将整数 yrs_service 转换为天数

```
SELECT format(yrs_served * 365, 0)  AS days_served
FROM table 2 
```

查询3：使用date_add函数将days服务添加到开始日期

```
SELECT date_add(date_comm, INTERVAL days_served DAY) AS date_left 
```

谁能建议我如何实现上述目标？提前谢谢了。

编辑 - 这是我正在处理的完整查询：

```
SELECT prime_minister.pm_name, yr_comm, party, ADDDATE(
    (SELECT CONCAT_WS('-', yr_comm, mth_comm, day_comm) FROM ministry), INTERVAL 
    (SELECT FORMAT(yrs_served * 365, 0) FROM prime_minister) YEAR) AS date_left
FROM ministry JOIN prime_minister USING (pm_name)
WHERE party NOT LIKE '%labor%'
AND prime_minister.pm_name = ministry.pm_name
ORDER BY pm_name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:07:36.480

你可以使用用户变量

```
SET @date = CONCAT_WS('-', 2012,1,1);   -- paste your query here
SET @toAdd = (SELECT MONTH(CURDATE())); -- paste your query here
SELECT DATE_ADD(@date, INTERVAL @toAdd DAY) AS date_left 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/6397)

这与

```
SET @date = CONCAT_WS('-', 2012,1,1);   -- paste your query here
SET @toAdd = (SELECT MONTH(CURDATE())); -- paste your query here
SELECT @date + INTERVAL @toAdd DAY AS date_left 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/6398)

或不使用更长的变量，

```
SELECT (CONCAT_WS('-', 2012,1,1)) + INTERVAL (SELECT MONTH(CURDATE())) DAY AS date_left 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/6399)

# mysql - 如何使用 RAND() 别名使用 HAVING 子句

> ID：14492723
> 
> 赞同：0
> 
> 时间：2013-01-24T02:04:18.967
> 
> 标签：mysql, having-clause

尝试生成唯一代码以防止重复我使用 HAVING 子句使用以下查询，以便我可以使用别名但我得到重复键错误：

```
SELECT
  FLOOR(100 + RAND() * 899) AS random_code 
FROM product_codes 
HAVING random_code NOT IN (values) 
LIMIT 1 
```

以下代码不起作用，这是我需要的：

[https://stackoverflow.com/a/4382586](https://stackoverflow.com/a/4382586)

有没有更好的方法来实现这一点，或者我的查询有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:06:44.097

如果您想要保证唯一的唯一代码，请使用 mySQL 函数`UUID()`

[http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)

“UUID 被设计为在空间和时间上全球唯一的数字。对 UUID() 的两次调用预计会生成两个不同的值，即使这些调用是在两台未相互连接的独立计算机上执行的。”

如果 UUID 太长（例如，它必须恰好是特定数量的数字），则对 UUID 进行散列（例如使用 md5 或 sha-256），获取特定数量的位并将其转换为十进制整数。散列很重要，因为它是保证唯一性的整个 UUID，而不是它的任何一部分。*但是，您现在将能够获得哈希冲突，一旦您有超过 sqrt(2^bits) 个条目，这很可能会发生。例如，如果您对 0-1023 使用 10 位，则在大约 32 个条目之后，可能会发生哈希冲突。如果您使用这几位，请考虑使用递增序列。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:24:21.850

想使用 MYSQL 查询来获取 0-999 之间的随机数作为代码，但尝试了该查询，并且我结束了从 0 到 999 填充值条件，但仍然总是得到重复的代码，奇怪的行为，所以我最终使用了 PHP。

我现在使用的步骤：

创建一个填充 0 到 999 的数组，将来如果我需要更多代码将使用 0 到 9999。

$ary_1 = 数组（0, 1, 2, ...., 999）

创建填充了表中所有代码的其他数组。

$ary_2 = 数组(4, 5, 985, 963, 589)

使用 array_diff 获取结果数组。

$ary_3 = array_diff($ary_1, $ary_2)

使用 array_rand 从结果 array_diff 中获取一个数组键。

$new_code_key = array_rand($ary_3, 1)

使用该键获取代码并创建 MYSQL 查询。

$ary_3[$new_code_key]

从新代码数组中取消设置该键，因此我加快了进程，只需要获取另一个 array_rand 键并稍后取消设置。

未设置（$ary_3[$new_code_key]）

# facebook - FB 提要对话接受“ref”参数，但不将其附加到新闻提要项目

> ID：14492732
> 
> 赞同：2
> 
> 时间：2013-01-24T02:06:30.893
> 
> 标签：facebook, facebook-javascript-sdk, feed

Facebook 的 Javascript SDK 实现了 FB.ui 方法，该方法允许以编程方式启动对话。“feed”对话框接受“ref”参数，但不会将其作为“fb_ref”查询参数附加到它创建的新闻提要链接上，这是“ref”参数在许多其他情况下的默认行为。这是示例用法：

```
<script>
    var publish = {
      method: 'feed',
      message: 'getting educated about Facebook Connect',
      name: 'Connect',
      caption: 'The Facebook Connect JavaScript SDK',
      description: (
          'A small JavaScript library that allows you to harness ' +
          'the power of Facebook, bringing the user\'s identity, ' +
          'social graph and distribution power to your site.'
      ),
      link: 'http://www.fbrell.com/?ref=poo',
      picture: 'http://www.fbrell.com/public/f8.jpg',
      ref:'foo',
      actions: [
        { name: 'fbrell', link: 'http://www.fbrell.com/' }
      ],
      user_message_prompt: 'Share your thoughts about RELL'
    };

    FB.ui(publish, Log.info.bind('feed callback'));
    </script> 
```

“Feed Dialogue”的文档指出“ref”参数是

> 提要帖子类别的文本参考。Facebook Insights 中使用此类别来帮助您衡量不同类型帖子的效果

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

它没有声称将其附加到新闻源链接。但是，在使用提要对话的“提要游戏”的单独文档中，它说明了有关“参考”参数的内容：

> 该值还将在 fb_ref 参数中传回给您，当用户单击您的故事标题并直接进入游戏时，该参数将附加到 url 的末尾 - 即不播放嵌入的内容。

[https://developers.facebook.com/docs/feed-gaming/](https://developers.facebook.com/docs/feed-gaming/)

Feed Gaming 正在使用 FB.ui“feed”对话框，因此该文档似乎是矛盾的，或者至少没有标准化。有谁知道如何获得“提要”对话框以将 ref 参数附加到新闻故事网址的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:13:09.587

据我从文档中可以看出，您将**ref**值定义为

> 衡量不同类型帖子的表现

并且这样的值将被传递

> **在fb_ref**参数中返回给您，该参数将附加到 url 的末尾。

因此，您的游戏将收到您在**fb_ref**查询参数的**ref**中定义的值。

# php - 阻止访问 php 页面

> ID：14492734
> 
> 赞同：0
> 
> 时间：2013-01-24T02:06:39.240
> 
> 标签：php, file, .htaccess

好的，所以我已经像这样设置了 .htaccess ：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)$ index.php 
```

如您所见，我正在解析除文件以外的所有内容以建立索引，因为我需要“包含” php 文件并显示图像。

如果用户输入例如 www.site.com/login.php 将显示登录 php 页面。

如何防止访问 php 页面但也允许“包含”它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:07:18.977

将它们移到文档根目录之外。它们可以从那里安全地包含在内，但不能通过网络访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:19:04.910

如果你想走那条路（外部的 webroot 建议是正确的！）那么你可以使用这样的规则（见[regexnegative lookahead](http://www.google.com/search?q=regex%20negative%20lookahead)）：

```
 RewriteRule ^(?!index).+\.php$ - [F] 
```

那是草率的，因为它允许`index2.php`或`indexdir/xyz.php`仍然允许；它只是阻止任何不是`index`*`.php`的东西被访问。确保也禁止`.cgi`或`.phtml`如果`.tpl`需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T02:18:57.187

如果我理解这个问题，如果未登录，您是否不允许用户访问其他文件？如果是这样，您可以使用 php 会话设置他们登录的变量，否则重定向到索引

（如果我理解这个问题）

# .htaccess - 如何在 URL 中重定向带有问号的旧页面？

> ID：14492735
> 
> 赞同：2
> 
> 时间：2013-01-24T02:06:39.510
> 
> 标签：.htaccess, redirect

我已经在 stackoverflow 和其他网站上阅读了有关 htaccess 重定向和重写的信息，并学习了如何重定向简单的页面和目录，但是还有大约 30 个链接我无法重定向。原因似乎是因为它们在链接的 URL 中包含“ **？ ”。**我已经尝试过发布的解决方案，但我无法充分理解它们以取得成功。

这些工作：

```
Redirect /Corpfleet.php     htp://www.marketyourcar.cm/wraps.php
Redirect /drivers.php       htp://www.marketyourcar.cm/drivers.php
Redirect /galleries.php     htp://www.marketyourcar.cm/galleries.php 
```

这些不起作用：

```
Redirect /ad.php?View=FAQ       htp://www.marketyourcar.cm/advertiser-faqs.php
Redirect /ad.php?View=gallery   htp://www.marketyourcar.cm/galleries.php
Redirect /ad.php?View=Materials htp://www.marketyourcar.cm/products-services.php 
```

*是的，我知道上面的 URL 是 htp 和 .cm - 我必须打破它才能以我的低声誉发表这篇文章。*

如果有人可以提供帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T20:18:31.840

如果您想从以下位置重定向：

**site.com/index.php?blabla=1&id=32**

至

**site.com/contact.html**

然后使用：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{QUERY_STRING} blabla=1&id=32
RewriteRule ^(.*)$ http://www.site.com/contact.html? [R=301,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:17:23.427

`Redirect`无法处理。`RewriteRule`能够。这应该有效。

```
RewriteEngine on
RewriteRule ^/ad\.php\?View\=FAQ$ http://www.marketyourcar.cm/advertiser-faqs.php [R=301,L] 
RewriteRule ^/ad\.php\?View\=gallery$ http://www.marketyourcar.cm/galleries.php [R=301,L]
RewriteRule ^/ad\.php\?View\=Materials$ http://www.marketyourcar.cm/products-services.php [R=301,L] 
```

或者试试这个：

```
RewriteEngine on
RewriteRule ^/ad.php?View=FAQ$ http://www.marketyourcar.cm/advertiser-faqs.php [R=301,L] 
RewriteRule ^/ad.php?View=gallery$ http://www.marketyourcar.cm/galleries.php [R=301,L]
RewriteRule ^/ad.php?View=Materials$ http://www.marketyourcar.cm/products-services.php [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:47:39.287

这可能有效：

例子：

```
RewriteEngine On
RewriteRule ^/ad.php?View=FAQ$  http://www.marketyourcar.cm/advertiser-faqs.php? [R=301,L] 
```

向替换 URL添加尾随`?`以删除传入查​​询。

# c - 如何将字节数组转换为整数？

> ID：14492737
> 
> 赞同：1
> 
> 时间：2013-01-24T02:07:06.323
> 
> 标签：c, arrays, integer, byte, typeconverter

假设我有这个字节

```
uint8_t k[8]= {0,0,0,1,1,1,0,0}; 
```

有没有办法让它变成一个整数或十六进制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:16:08.457

如果`k`表示 64 位整数的 8 个字节，则遍历 8 位整数数组，并将它们从左到右移动到结果中：

```
uint64_t res = 0;
for (int i = 0 ; i != 8 ; i++) {
    res <<= 8;
    res |= k[i];
} 
```

循环的方向取决于原始字节`int`存储在`k`数组中的顺序。上面的片段显示了 MSB 到 LSB 的顺序；如果数组是 LSB 到 MSB，则从 7 开始循环，然后下降到零。

如果字节代表单个位，则移动一位而不是八位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:16:32.907

这应该可以解决问题：

```
int convertToInt(uint8_t k[8], bool leastSignificantFirst) { 
    int res = 0;
    for (int i = 0; i < 8; ++i) { 
        if (leastSignificantFirst) { 
            res |= (k[i] & 1) << (7 - i);
        } else {
            res |= (k[i] & 1) << i;
        }
    }
    return res;
} 
```

# java - Tomcat 7 启动时 CPU 使用率高且无连接

> ID：14492738
> 
> 赞同：1
> 
> 时间：2013-01-24T02:07:08.287
> 
> 标签：java, tomcat, cpu, netty, hornetq

我们在 CentOS 6.3（完全打补丁）上运行 Tomcat 7.0.34，一旦服务器启动，我们所有的应用服务器的 CPU 都会飙升。没有与 Tomcat 建立连接。似乎有几个 CPU 内核完全被我们的 web 应用程序中运行的东西所消耗。

我一生都无法弄清楚可能导致此问题的原因。有没有人见过这个？

我应该提一下，这只发生在 CentOS 机器上。我的 Windows Tomcat 服务器在运行相同的应用程序时没有表现出这种行为。

***相关技术***

我们正在使用 Tomcat 的会话复制、Replicated EHCache 和 HornetQ for JMS。

***测试的 Java 版本***

JDK 1.7.0 更新 10 和 JDK 1.6.0 更新 38

***杀死 -3 个可运行线程***

```
 "http-apr-8080-Acceptor-1" daemon prio=10 tid=0x00007f2598183000 nid=0x46b9 runnable [0x00007f2500685000]
       java.lang.Thread.State: RUNNABLE
            at org.apache.tomcat.jni.Socket.accept(Native Method)
            at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:1013)
            at java.lang.Thread.run(Thread.java:722)

    "http-apr-8080-Acceptor-0" daemon prio=10 tid=0x00007f2598181800 nid=0x46b8 runnable [0x00007f2500786000]
       java.lang.Thread.State: RUNNABLE
            at org.apache.tomcat.jni.Socket.accept(Native Method)
            at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:1013)
            at java.lang.Thread.run(Thread.java:722)

    "New I/O boss #26" daemon prio=10 tid=0x00007f253d4fb000 nid=0x462f runnable [0x00007f250c49c000]
       java.lang.Thread.State: RUNNABLE
            at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
            at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
            at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
            at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
            - locked <0x00000006ab002568> (a sun.nio.ch.Util$2)
            - locked <0x00000006ab002558> (a java.util.Collections$UnmodifiableSet)
            - locked <0x00000006ab0024d0> (a sun.nio.ch.EPollSelectorImpl)
            at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
            at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:64)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:409)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:206)
            at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:41)
            at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
            at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
            at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:175)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:722)

    "New I/O worker #25" daemon prio=10 tid=0x00007f253d4e4000 nid=0x462e runnable [0x00007f250c59d000]
       java.lang.Thread.State: RUNNABLE
            at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
            at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
            at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
            at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
            - locked <0x00000006aefbcab8> (a sun.nio.ch.Util$2)
            - locked <0x00000006aefbcaa8> (a java.util.Collections$UnmodifiableSet)
            - locked <0x00000006aefbca60> (a sun.nio.ch.EPollSelectorImpl)
            at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
            at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:64)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:409)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:206)
            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:88)
            at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
            at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
            at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
            at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:175)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:722)

    "New I/O worker #24" daemon prio=10 tid=0x00007f253d4b9000 nid=0x462d runnable [0x00007f250c69e000]
       java.lang.Thread.State: RUNNABLE
            at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
            at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
            at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
            at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
            - locked <0x00000006ab002c70> (a sun.nio.ch.Util$2)
            - locked <0x00000006ab002c60> (a java.util.Collections$UnmodifiableSet)
            - locked <0x00000006ab002bd8> (a sun.nio.ch.EPollSelectorImpl)
            at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
            at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:64)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:409)
            at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:206)
            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:88)
            at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
            at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
            at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
            at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:175)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:722)

... ABOUT 20 MORE NIO WORKERS IN RUNNABLE STATE...

"New I/O worker #2" prio=10 tid=0x00007f253d054000 nid=0x4616 runnable [0x00007f250ddb5000]
   java.lang.Thread.State: RUNNABLE
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
        - locked <0x00000006adaa7070> (a sun.nio.ch.Util$2)
        - locked <0x00000006adaa7060> (a java.util.Collections$UnmodifiableSet)
        - locked <0x00000006adaa6fd8> (a sun.nio.ch.EPollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
        at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:64)
        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:409)
        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:206)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:88)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
        at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:175)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

"New I/O worker #1" prio=10 tid=0x00007f253d053000 nid=0x4615 runnable [0x00007f250deb6000]
   java.lang.Thread.State: RUNNABLE
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
        - locked <0x00000006adaa7bc0> (a sun.nio.ch.Util$2)
        - locked <0x00000006adaa7bb0> (a java.util.Collections$UnmodifiableSet)
        - locked <0x00000006adaa7b28> (a sun.nio.ch.EPollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
        at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:64)
        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:409)
        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:206)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:88)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
        at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:175)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

"NamingBootstrap Pool(1)-1" daemon prio=10 tid=0x00007f253c4f8800 nid=0x45fc runnable [0x00007f25842a3000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at org.jnp.server.Main$AcceptHandler.run(Main.java:481)
        at org.jboss.util.threadpool.RunnableTaskWrapper.run(RunnableTaskWrapper.java:148)
        at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-1098" daemon prio=10 tid=0x00007f253c4f4800 nid=0x45fb runnable [0x00007f25843a4000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-0" daemon prio=10 tid=0x00007f253cc2d800 nid=0x45e6 runnable [0x00007f25859b9000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-40001" daemon prio=10 tid=0x00007f253cc16000 nid=0x45da runnable [0x00007f25865c5000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"Multicast Heartbeat Receiver Thread" daemon prio=10 tid=0x00007f253cc18000 nid=0x45d8 runnable [0x00007f25867c7000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainDatagramSocketImpl.receive0(Native Method)
        - locked <0x00000006ab145b28> (a java.net.PlainDatagramSocketImpl)
        at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)
        - locked <0x00000006ab145b28> (a java.net.PlainDatagramSocketImpl)
        at java.net.DatagramSocket.receive(DatagramSocket.java:786)
        - locked <0x000000067ffd9240> (a java.net.DatagramPacket)
        - locked <0x00000006ab1459f0> (a java.net.MulticastSocket)
        at net.sf.ehcache.distribution.MulticastKeepaliveHeartbeatReceiver$MulticastReceiverThread.run(MulticastKeepaliveHeartbeatReceiver.java:124)

"Tribes-MembershipReceiver" daemon prio=10 tid=0x00007f259895c800 nid=0x45d0 runnable [0x00007f258733a000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainDatagramSocketImpl.receive0(Native Method)
        - locked <0x00000006b8163208> (a java.net.PlainDatagramSocketImpl)
        at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)
        - locked <0x00000006b8163208> (a java.net.PlainDatagramSocketImpl)
        at java.net.DatagramSocket.receive(DatagramSocket.java:786)
        - locked <0x00000006b8158768> (a java.net.DatagramPacket)
        - locked <0x00000006b7b4fc30> (a java.net.MulticastSocket)
        at org.apache.catalina.tribes.membership.McastServiceImpl.receive(McastServiceImpl.java:340)
        at org.apache.catalina.tribes.membership.McastServiceImpl$ReceiverThread.run(McastServiceImpl.java:534)

"NioReceiver" daemon prio=10 tid=0x00007f259892f000 nid=0x45cf runnable [0x00007f258743b000]
   java.lang.Thread.State: RUNNABLE
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
        - locked <0x00000006b8155008> (a sun.nio.ch.Util$2)
        - locked <0x00000006b8155020> (a java.util.Collections$UnmodifiableSet)
        - locked <0x00000006b78650a8> (a sun.nio.ch.EPollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
        at org.apache.catalina.tribes.transport.nio.NioReceiver.listen(NioReceiver.java:281)
        at org.apache.catalina.tribes.transport.nio.NioReceiver.run(NioReceiver.java:420)
        at java.lang.Thread.run(Thread.java:722)

"NioReceiver" daemon prio=10 tid=0x00007f259892f000 nid=0x45cf runnable [0x00007f258743b000]
   java.lang.Thread.State: RUNNABLE
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:228)
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:81)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
        - locked <0x00000006b8155008> (a sun.nio.ch.Util$2)
        - locked <0x00000006b8155020> (a java.util.Collections$UnmodifiableSet)
        - locked <0x00000006b78650a8> (a sun.nio.ch.EPollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
        at org.apache.catalina.tribes.transport.nio.NioReceiver.listen(NioReceiver.java:281)
        at org.apache.catalina.tribes.transport.nio.NioReceiver.run(NioReceiver.java:420)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-0" daemon prio=10 tid=0x00007f25982e0800 nid=0x45cc runnable [0x00007f258c7a6000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:52)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-9004" daemon prio=10 tid=0x00007f25982cb000 nid=0x45cb runnable [0x00007f258c8a7000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"RMI TCP Accept-0" daemon prio=10 tid=0x00007f25982a7000 nid=0x45ca runnable [0x00007f258c9a8000]
   java.lang.Thread.State: RUNNABLE
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
        at java.lang.Thread.run(Thread.java:722)

"Service Thread" daemon prio=10 tid=0x00007f259817a800 nid=0x45c9 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x00007f2598178000 nid=0x45c8 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00007f2598175800 nid=0x45c7 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007f2598173800 nid=0x45c6 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Surrogate Locker Thread (Concurrent GC)" daemon prio=10 tid=0x00007f2598171800 nid=0x45c5 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"VM Thread" prio=10 tid=0x00007f259811c000 nid=0x45c2 runnable

"Gang worker#0 (Parallel GC Threads)" prio=10 tid=0x00007f2598012000 nid=0x45bd runnable

"Gang worker#1 (Parallel GC Threads)" prio=10 tid=0x00007f2598014000 nid=0x45be runnable

"Gang worker#2 (Parallel GC Threads)" prio=10 tid=0x00007f2598015800 nid=0x45bf runnable

"Gang worker#3 (Parallel GC Threads)" prio=10 tid=0x00007f2598017800 nid=0x45c0 runnable

"Concurrent Mark-Sweep GC Thread" prio=10 tid=0x00007f25980a6800 nid=0x45c1 runnable
"VM Periodic Task Thread" prio=10 tid=0x00007f25982e3000 nid=0x45cd waiting on condition 
```

All of this seems VERY busy for a server that has just started up, has no replication peers, and has not yet accepted any requests.

Ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:20:05.303

It *looks* like the JVM is doing network-related things. I'd try the following to see if they reveal any clues:

*   Use a packet monitor to see if there is incoming / outgoing network traffic on your ethernet or loopback.

*   Use strace to see what syscalls the JVM is making

*   Check the Tomcat log files. And as an experiment change the logging configs so that you can see all DEBUG logging.

*   Check the system logs including the security logs (if you have SELinux enabled.)

You could also try tweaking the tomcat configs to not use APR and see if that makes any difference.

# python - 有 sphinx 报告断开的链接

> ID：14492743
> 
> 赞同：16
> 
> 时间：2013-01-24T02:07:55.650
> 
> 标签：python, documentation, python-sphinx

在构建 html 文档时，如何强制 sphinx 在不存在的链接上报告或创建错误？

具体来说，我的 Python 项目中的属性和方法已被删除或重命名，并且很难找到所有带有 sphinx 生成的 html 输出的死链接。

我觉得我正盯着这里的答案： [http](http://sphinx-doc.org/glossary.html) ://sphinx-doc.org/glossary.html，如开头段落所述。

我显然不明白一些事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T17:22:13.153

将[nitpicky](https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-nitpicky)配置变量设置为（运行 sphinx-build 时`True`也可以使用[-n 选项）。](https://www.sphinx-doc.org/en/master/man/sphinx-build.html#cmdoption-sphinx-build-n)

在 nitpicky 模式下，对无法找到的函数（例如`:func:`myfunc``）、类或其他对象的交叉引用将生成警告消息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T21:22:52.170

我想[`CheckExternalLinksBuilder`](http://www.sphinx-doc.org/en/master/builders.html#sphinx.builders.linkcheck.CheckExternalLinksBuilder)这就是你要找的。

它基本上是通过使用选项调用“sphinx-build”来使用的`-b linkcheck`。请参阅[`sphinx-build`](http://www.sphinx-doc.org/en/master/man/sphinx-build.html?highlight=linkcheck)以获取更多信息。[另外，请查看此处](http://sphinx-doc.org/en/master/extensions.html)和[此处](https://bitbucket.org/birkenfeld/sphinx-contrib)的 sphinx-extensions 列表。

# tmux - 如何在 byobu (tmux) 中分离远程屏幕会话？

> ID：14492744
> 
> 赞同：28
> 
> 时间：2013-01-24T02:07:56.977
> 
> 标签：tmux, gnu-screen, byobu

我目前正在一个 byobu-tmux 会话中，并且正在进入一个屏幕会话。如何在不分离 byobu-tmux 会话的情况下分离远程屏幕会话？有些事情需要注意，我不能运行 byobu-config 因为我在 osx 上并且没有安装 python-newt（w/snack）。而且，我已经在 Emacs 模式下运行了 byobu-ctrl-a，但这似乎不允许我 ctrl-a 退出远程屏幕会话。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T10:43:30.310

使用 tmux 命令很容易：

```
byobu-tmux detach
byobu-tmux 
```

甚至只是：

```
byobu detach
byobu 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-26T15:39:21.607

您应该能够使用`Ctrl`-进行双重转义`a`。

要将分离消息发送到内部 byobu-screen 会话，请按：

`Ctrl`- `a` `Ctrl`-`a` `d`

*全面披露：我是[Byobu](http://byobu.co)的作者和维护者。*

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-12-03T13:32:01.410

`ctrl`尝试在第一个之后放开`a`，所以序列是`ctrl`- `a`, `a`, `d`。人屏：

> Ca Ca (other) 切换到之前显示的窗口。请注意，此绑定默认为键入两次的命令字符，除非被覆盖。例如，如果您使用选项“-e]x”，此命令将变为“]]”。
> 
> Ca a (meta) 将命令字符 (Ca) 发送到窗口。请参见转义命令。

或者，如果您使用 tmux 而不是屏幕作为 Byobu，请尝试`ctrl`- `a` `d`。Byobu 的默认前缀键是`ctrl`- `b`，因此如果您使用该默认值，则无需将`ctrl`-键加倍。`a`

来源：[https ://askubuntu.com/a/309215/106100](https://askubuntu.com/a/309215/106100)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-06-06T03:03:21.177

我可以通过列出当前客户端中的所有客户端来做到这一点：

```
$ byobu list-clients
/dev/pts/67: 1 [80x24 xterm] (utf8) 
/dev/pts/70: 1 [157x48 xterm-256color] (utf8) 
```

然后分离远程客户端（根据屏幕大小确定）：

```
$ byobu detach -t /dev/pts/67 
```

现在我可以使用完整的窗口大小

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-22T15:33:48.170

也许与 tmux 无关，但对于 byobu，我发现以下命令非常有帮助：分离除当前会话之外的所有会话：

`/usr/lib/byobu/include/tmux-detach-all-but-current-client`

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:31:43.207

如果本地会话与远程会话冲突，您需要切换本地会话的前缀。例如，如果两者都使用 CTRL+A 那么你就有麻烦了。您可以发送一个原始命令（有一个序列，但我不记得了），或者走简单的路线并将您的本地会话重新映射到 Ctrl+B，然后您可以输入 Ctrl+A 将被路由到远程会话。也与 tmux 无关，但 ssh 连接本身您可以输入“~”。它将与 ssh 会话断开连接。希望能帮助到你。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-24T10:30:06.593

十年来，我一直是 Linux 上 byobu 的狂热用户。在这些年的大部分时间里，我一直在努力在 OSX 上配置 byobu 的 brew 安装，我终于设法以一种迂回的方式设置了我的 byobu 配置。首先我执行了这个：

```
echo '/usr/local/lib/python2.7/site-packages' | sudo tee /Library/Python/2.7/site-packages/homebrew.pth 
```

然后我运行 byobu 配置文件：

```
byobu-config 
```

最后我清理了

```
sudo rm /Library/Python/2.7/site-packages/homebrew.pth 
```

Python 在此过程中崩溃并出现了一些弹出窗口，但是，byobu 现在可以正常工作了。当我想再次更改配置时，我确实需要重复这些步骤......仍在寻找更清洁的解决方案。

# android - 如何在套接字编程方法中放置几个 onclick 侦听器？

> ID：14492749
> 
> 赞同：0
> 
> 时间：2013-01-24T02:08:26.443
> 
> 标签：android, sockets, onclick, listener

我在 android 中有一个套接字程序，我想通过单击客户端上的按钮来发送命令或文本消息。并根据按下的按钮发送不同的短信。但我从 PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket .getOutputStream())), true) 收到关于“out” PrintWriter 对象的编译器错误消息；

如果我在 onclick 监听器中使用这个“out”，我该如何修复这个编译器错误？我真的不想把它作为编译器推荐的最终变量作为修复。

这是下面显示的代码，run() 方法中有两个 onclick 按钮侦听器，用于通过套接字从客户端向服务器 android 应用程序发送按摩

如果您点击 sendA 按钮，它会发送短信“testA”，如果您点击 sendB 按钮，它会发送短信“testB”

```
 public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            Socket socket = new Socket(serverAddr, 8080);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                .getOutputStream())), true);

                    sendA.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        out.println("testA");

                    }
                });

                    sendB.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View v) {

                            out.println("testB");  

                        }
                    });

                    // where you issue the commands
                       // out.println("testX");

                        Log.d("ClientActivity", "C: Sent.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:18:32.820

放置 final 将清除您的错误。

```
final PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                            .getOutputStream())), true); 
```

但是就像你说的你不想`final`，那为什么不声明`out`为全局变量呢？

```
// global variable
PrintWriter out;

.......

out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                .getOutputStream())), true); 
```

# ember.js - 用于 pre4 的 Ember 路由器

> ID：14492752
> 
> 赞同：0
> 
> 时间：2013-01-24T02:08:43.370
> 
> 标签：ember.js, ember-router

我正在尝试使用 Ember 的 pre4 版本，但我卡在了路由器上。

我收到一条错误消息`Uncaught TypeError: Cannot Call method 'map' of undefined`。

相关代码：

```
App.Router.map(function() {
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
}); 
```

相关[文档](http://emberjs.com/guides/routing/defining-your-routes/)。

我已经加载了 Ember.js 和 jQuery。Ember pre4 也会抛出错误：`Uncaught TypeError: Object prototype may only be an Object or null`.

难道我做错了什么？指南只是没有更新吗？

* * *

我到目前为止的代码：

```
window.App = Ember.Application.create({
  ApplicationView: Ember.View.extend({
    templateName: 'application'
  }),
  ApplicationController: Ember.Controller.extend({
  }),

  SiteView: Em.View.extend({
    templateName: 'site-template'
  }),
  SiteController: Em.ArrayController.extend(),

});

App.Router.map(function() {
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:44:24.420

我没有看到您发布的代码有任何问题。能够在 jsbin 中运行它，并且在添加“站点”作为默认路由后，该应用程序似乎正在运行。

```
App = Ember.Application.create({
  ApplicationView: Ember.View.extend({
    templateName: 'application'
  }),
  ApplicationController: Ember.Controller.extend({
  }),

  SiteView: Em.View.extend({
    templateName: 'site-template'
  }),
  SiteController: Em.ArrayController.extend()

});

App.Router.map(function() {
  this.route("site", { path: "/" });
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
});

<script type="text/x-handlebars" data-template-name="site-template">
  This is the site template
</script>

<script type="text/x-handlebars">
  This is the application template
  {{outlet}}
</script> 
```

有关工作副本，请参见[jsbin 。](http://jsbin.com/iwafej/3/edit)

我最好的猜测是，您的错误来自一些不兼容的 jQuery 版本，或者因为您没有 handlebars.js - 两者都是运行 ember 所必需的。另外，在开发中一定要使用[ember-1.0.0-pre.4.js](https://github.com/emberjs/ember.js/blob/release-builds/ember-1.0.0-pre.4.js)！而不是 ember-1.0.0-pre.4.min.js。最小化版本针对生产使用进行了优化，因此不包含有助于更容易发现此类问题的有用调试消息。

# android - ActionBarSherlock ShareActionProvider 问题

> ID：14492757
> 
> 赞同：4
> 
> 时间：2013-01-24T02:09:38.457
> 
> 标签：android, exception, actionbarsherlock, shareactionprovider

ActionBarSherlock (ABS) 是从最新的源代码构建的。使用 ABS ShareActionProvider 时抛出异常。我可以通过 onCreateOptionsMenu() 调试就好了。如果我取出 @+id/menu_item_share 的 xml，则 apk 运行良好。

在调试模式下，我能走得最远的是 SherlockFragmentActivity 中的 onCreatePanelMenu()。

main_menu.xml：

```
 <item android:id="@+id/menu_item_share"
      android:icon="@+id/ic_action_share"
      android:showAsAction="ifRoom"
      android:title="@string/menu_share"
      android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" 
 /> 
```

相关代码：

```
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.widget.ShareActionProvider;

public class MyActivity extends SherlockFragmentActivity {

. . . 

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);

    mShareActionProvider = (ShareActionProvider) menu.findItem(R.id.menu_item_share).getActionProvider();

    if(this.verse.verse != null)
        mShareActionProvider.setShareIntent(getDefaultShareIntent());

    return true;
}

public Intent getDefaultShareIntent(){
    Intent sendIntent = new Intent();
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_TEXT, "text to share");
    sendIntent.setType("text/plain");

    return sendIntent;
}
. . . 

} 
```

例外：

```
01-23 19:53:38.048: WARN/dalvikvm(14643): threadid=1: thread exiting with uncaught exception (group=0x411d4930) 01-23 19:53:38.048: ERROR/AndroidRuntime(14643): FATAL EXCEPTION: main
        android.content.res.Resources$NotFoundException: Resource ID #0x7f030008
        at android.content.res.Resources.getValue(Resources.java:1014)
        at android.content.res.Resources.loadXmlResourceParser(Resources.java:2166)
        at android.content.res.Resources.getLayout(Resources.java:853)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
        at com.actionbarsherlock.widget.ActivityChooserView.<init>(ActivityChooserView.java:229)
        at com.actionbarsherlock.widget.ActivityChooserView.<init>(ActivityChooserView.java:202)
        at com.actionbarsherlock.widget.ActivityChooserView.<init>(ActivityChooserView.java:192)
        at com.actionbarsherlock.widget.ShareActionProvider.onCreateActionView(ShareActionProvider.java:164)
        at com.actionbarsherlock.internal.view.ActionProviderWrapper.onCreateActionView(ActionProviderWrapper.java:23)
        at android.view.ActionProvider.onCreateActionView(ActionProvider.java:98)
        at com.android.internal.view.menu.MenuItemImpl.getActionView(MenuItemImpl.java:580)
        at com.android.internal.view.menu.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:157)
        at com.android.internal.view.menu.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:455)
        at com.android.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1048)
        at com.android.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:87)
        at com.android.internal.view.menu.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:190)
        at com.android.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:244)
        at com.android.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:946)
        at com.android.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:969)
        at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:450)
        at com.android.internal.policy.impl.PhoneWindow.doInvalidatePanelMenu(PhoneWindow.java:769)
        at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:201)
        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
        at android.view.Choreographer.doCallbacks(Choreographer.java:562)
        at android.view.Choreographer.doFrame(Choreographer.java:531)
        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
        at android.os.Handler.handleCallback(Handler.java:725)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5191)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:12:44.547

```
 android:icon="@+id/ic_action_share" 
```

这是错误的。您没有分配可绘制对象，您只是将 Id 添加到您的 R.java 类。您需要在此处引用一个图标，如下所示：

```
 android:icon="@drawable/ic_action_share" 
```

# java - 一个班级中有两个点击听众的问题

> ID：14492761
> 
> 赞同：0
> 
> 时间：2013-01-24T02:09:53.473
> 
> 标签：java, android, android-intent, android-activity, onclicklistener

需要一些帮助来创建我的主菜单。我已经成功制作了一个点击监听器，可以切换到不同的活动，但我无法让第二个活动正常工作。该应用程序在模拟中运行良好，但是当我点击重量杜松子酒按钮时没有任何反应。我似乎无法找到问题所在

```
 package com.example.bmiworking;

    import android.app.Activity;
    import android.content.DialogInterface;
    import android.view.View.OnClickListener;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class MainMenu extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    Button btn,btn1,btn2,btn3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmenu);
        btn = (Button) findViewById(R.id.buttonBMI);
        btn.setOnClickListener(this);
        btn1 = (Button) findViewById(R.id.buttonGain);
        btn1.setOnClickListener(this);
    }

        @Override
    public void onClick(View v) {
        if (v.getId() == R.id.buttonBMI) {
            startActivity(new Intent(this, MainActivity.class));
        }
    }
        public void onClick1(View d) {
            if (d.getId() == R.id.buttonGain) {
                startActivity(new Intent(this, weightgain.class));
            }
        }
    }

package com.example.bmiworking;

import android.os.Bundle;
import android.app.Activity;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class weightgain extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.weightgain);
}
}

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".StartingPoint" 
    android:background="@drawable/grunge">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Main Menu"
        android:textSize="45dp"
        android:layout_gravity="center"
        android:gravity="center" 
        android:id="@+id/tvDisplay"/>

    <Button
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="BMI Goal" 
        android:layout_gravity="center"
        android:textSize="20dp"
         android:id="@+id/bSub"/>

    <Button
        android:id="@+id/buttonBMI"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="BMI Calculator"
        android:textSize="20dp" />

    <Button
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="Muscle Loss Workouts" 
        android:layout_gravity="center"
        android:textSize="20dp"
         android:id="@+id/bSub"/>

    <Button
        android:id="@+id/buttonGain"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Muscle Gain Workouts"
        android:textSize="20dp" />

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.bmiworking"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.bmiworking.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.bmiworking.MainMenu"
            android:label="@string/app_name" >
            </activity>
            <activity
            android:name="com.example.bmiworking.weightgain"
            android:label="@string/app_name" >
            </activity>
    </application> 
```

使用堆栈跟踪进行编辑：

```
 01-24 02:34:34.739: D/dalvikvm(808): newInstance failed: p0 i0 [0 a1
    01-24 02:34:34.754: D/AndroidRuntime(808): Shutting down VM
    01-24 02:34:34.754: W/dalvikvm(808): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
    01-24 02:34:34.819: E/AndroidRuntime(808): FATAL EXCEPTION: main
    01-24 02:34:34.819: E/AndroidRuntime(808): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.bmiworking/com.example.bmiworking.MainMenu}: java.lang.InstantiationException: can't instantiate class com.example.bmiworking.MainMenu
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.os.Handler.dispatchMessage(Handler.java:99)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.os.Looper.loop(Looper.java:137)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread.main(ActivityThread.java:5039)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at java.lang.reflect.Method.invoke(Method.java:511)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at dalvik.system.NativeStart.main(Native Method)
    01-24 02:34:34.819: E/AndroidRuntime(808): Caused by: java.lang.InstantiationException: can't instantiate class com.example.bmiworking.MainMenu
    01-24 02:34:34.819: E/AndroidRuntime(808):  at java.lang.Class.newInstanceImpl(Native Method)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at java.lang.Class.newInstance(Class.java:1319)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
    01-24 02:34:34.819: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
    01-24 02:34:34.819: E/AndroidRuntime(808):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:12:41.290

将 onClick 代码更改为使用 switch case 而不是 if-else ：

```
@Override
public void onClick(View v) {
 switch(v.getId()){
  case R.id.buttonBMI: 
          startActivity(new Intent(this, MainActivity.class));
       break;

  case R.id.buttonGain:  
       startActivity(new Intent(this, weightgain.class));
       break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:11:20.777

改变它，使它像这样：

```
@Override
public void onClick(View v) {
  if (v.getId() == R.id.buttonBMI) {
    startActivity(new Intent(this, MainActivity.class));
  }
  if (v.getId() == R.id.buttonGain) {
    startActivity(new Intent(this, weightgain.class));
  }
} 
```

您只会真正覆盖`onClick(View v)`，因此，两次按下按钮都会`onClick(View v)`调用（`onClick1()`永远不会被使用）。然后因为你有一个 if，第二个按钮不会开始任何事情。当然，如果您有很多按钮，请考虑使用`switch`语句（如 ρяσѕρєяK 概述）。但是，想法是一样的，您只使用 1 种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:29:20.907

首先将 onClick 代码更改为，

```
@Override
public void onClick(View v) {
 switch(v.getId()){
 case R.id.buttonBMI: 
      startActivity(new Intent(MainMenu.this, MainActivity.class));
   break;

 case R.id.buttonGain:  
   startActivity(new Intent(MainMenu.this, weightgain.class));
   break;
}
} 
```

创建新实例时不要传递**这个，将它作为****ActivityName.this传递**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T07:27:25.903

你可以试试这个代码

```
@Override
public void onClick(View v) {
  switch(v.getId()){
    case R.id.buttonBMI: 
         startActivity(new Intent(MainMenu.this, MainActivity.class));
         break;

    case R.id.buttonGain:  
        startActivity(new Intent(MainMenu.this, weightgain.class));
        break;
    }
} 
```

或者

试试这第二种方法

```
public void buttonBMIClick(View view){
    startActivity(new Intent(MainMenu.this, MainActivity.class));
}

public void buttonGainClick(View view){
     startActivity(new Intent(MainMenu.this, weightgain.class));
} 
```

让你布局 XML

```
<Button
    android:id="@+id/buttonBMI"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="BMI Calculator"
    android:onClick="buttonBMIClick"
    android:textSize="20dp" />

 <Button
    android:id="@+id/buttonGain"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Muscle Gain Workouts"
    android:onClick="buttonGainClick"
    android:textSize="20dp" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T04:21:21.390

我认为您错过了有关 Intent 和 OnClick 方法的正确实现之类的东西。请尝试将您的代码替换为我的代码，您将获得良好的结果；

```
@Override
    public void onClick(View v) {
        if (v.equals(btn)) {
            Intent intent = new Intent(this, MainActivity.class);
            startActivity(intent);
        } else if (v.equals(btn1)) {
            Intent intent = new Intent(this, weightgain.class);
            startActivity(intent);
        }
    } 
```

在上面，“ **btn** ”和“ **btn1** ”是您的按钮。

请让我知道你的结果。

# javascript - 是否有发布开源 javascript 文件的“标准”方式

> ID：14492762
> 
> 赞同：0
> 
> 时间：2013-01-24T02:09:57.533
> 
> 标签：javascript, maven

来自 java/maven 世界，一切都在“src/main”文件夹下，我环顾四周，看看是否在 javascript 中遵循了类似的方法。然而，所有主要的回购似乎都在遵循他们自己的。是否有标准的文件夹结构可以用来发布我的 javascript 文件？社区是否至少“倾向于”某种这样的结构或模板？

[JQuery](https://github.com/jquery/jquery)
[骨干网](https://github.com/documentcloud/backbone)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:14:57.603

TJ Holowaychuk 将“组件”作为一种结构化方式来共享/部署具有跟踪依赖关系的 UI 组件。类似于 NPM 用于 NodeJS 模块的方式。

[https://github.com/component](https://github.com/component)

现在看来，[鲍尔](http://bower.io)正在接管并且是新的发展方向。

# java - Java二叉树添加方法覆盖写入根

> ID：14492768
> 
> 赞同：0
> 
> 时间：2013-01-24T02:10:25.790
> 
> 标签：java, recursion, binary-tree

我正在尝试编写二叉树，并且 add 方法不断覆盖树的根。我有两个方法，一个是递归的 add 方法，它接受一个 String 和一个 Node，然后是一个常规的 add 方法，它简单地调用递归方法。任何帮助将不胜感激。

```
public   Node recAdd(String event , Node tNode ){
//tNode -> tree node         
  if (tNode == null){
  // Addition place found
    root = new Node(event); 
    System.out.println("added root");
  }
  else if (tNode.event.compareTo(event) <= 0){
   tNode.setLeft(recAdd(event, tNode.getLeft()));   
   // System.out.println("added left");// Add in left subtree
  }
  else{
    tNode.setRight(recAdd(event, tNode.getRight()));
    //   System.out.println("added right");
  }// Add in right subtree
  return tNode;
} 
```

//////////////////////////////////////

```
public  void add(String event){
  if(root != null){
    System.out.println("The root currently is " + root.event );
   }
   recAdd(event , root);
} 
```

我的节点类如下

```
public class Node {
  Node left;
  Node  right;
  String event;

  Node(String event){
    this.event = event;
    this.left = null;
    this.right = null;  
  }

  public void setEvent(String event){
    this.event = event;
  } 
  public void setLeft(Node left){
    this.left = left;
  } 
  public void setRight(Node right){
    this.right = right;
  } 

  public  String getEvent(){
    return event;
  }

  public Node getLeft(){
    return left;
  }
  public Node getRight(){
    return right;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:29:08.717

每当您找到插入当前节点的位置时，您都在替换根节点：

```
public Node recAdd(String event, Node tNode) {
    //tNode -> tree node         
    if (tNode == null) {
      // Addition place found
      root = new Node(event);     // Problem is RIGHT HERE
      System.out.println("added root");
    }
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:32:18.193

发生的情况是，您递归地搜索树，直到到达尚未分配的节点（即，它是`null`）。此时，您正在覆盖根而不是创建新节点。

例如：

```
 root
       /    \
    node     null <- You want to assign this node, not overwrite root
   /    \ 
 null   null 
```

去做这个：

```
public   Node recAdd(String event , Node tNode ){       
    if (tNode == null){
        tNode = new Node(event);  // <--- Don't overwrite root
    }
    else if (tNode.event.compareTo(event) <= 0){
        tNode.setLeft(recAdd(event, tNode.getLeft()));   
    }
    else{
        tNode.setRight(recAdd(event, tNode.getRight()));
    }
    return tNode;
} 
```

您还需要修改您的`add()`功能：

```
public  void add(String event){
    root = recAdd(event , root); // <-----Reassign root
} 
```

# javascript - 优化多个 if 语句

> ID：14492769
> 
> 赞同：0
> 
> 时间：2013-01-24T02:10:38.383
> 
> 标签：javascript

我有一些看起来像这样的代码：

```
TheClass = TheAjaxIndicator.prop('class');

if (TheClass.indexOf('Blue') > 0) { TheHTML = TheHTMLBlue; }
if (TheClass.indexOf('White') > 0) { TheHTML = TheHTMLWhite; }
if (TheClass.indexOf('Green') > 0) { TheHTML = TheHTMLGreen; }
if (TheClass.indexOf('Brown') > 0) { TheHTML = TheHTMLBrown; } 
```

我怎样才能避免所有这些`if`陈述？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:34:22.947

示例如何使用正则表达式将代码写得更短（但不一定更高效）：

```
var html = {
   'Blue': TheHTMLBlue,
   'White': TheHTMLWhite,
   // ...
};

var match = TheClass.match(/Blue|White|Green|Brown/);
// also possible:
// var match = TheClass.match(RegExp(Object.keys(html).join('|'));
if (match) {
    TheHTML = html[match[0]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:35:23.470

我将类名和值放入映射中，并迭代映射以寻找匹配项。 [这里（jsfiddle）](http://goo.gl/DcppN)是一个如何做到这一点的例子。

```
var classToHtmlMap = {
    'Blue': TheHTMLBlue,
    'White': TheHTMLWhite,
    'Green': TheHTMLGreen,
    'Brown': TheHTMLBrown
}

var TheHTML;
var TheAjaxIndicator = $("#TheAjaxIndicator");
$.each(classToHtmlMap, function(key, value) {
    if(TheAjaxIndicator.hasClass(key)) {
        TheHTML = value;
            return false;
    }
}); 
```

顺便说一下，这使用了jQuery，但是方法是一样的，不管你怎么做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T02:15:27.370

我建议您遵循使用局部变量`pascalCase`而不是`TitleCase`. 我跑题了。

在`if`您的代码中包含语句根本不会对性能产生负面影响 - 这是 2013 年，我们有 JIT 脚本引擎。您的代码也非常可读 - 我认为没有理由更改它（除了命名约定）。但是您可以使用`switch`语句**，但**前提是`class`属性是单个值：

```
switch( theAjaxIndicator.prop('class') ) {
    case "Blue" : theHTML = theHTMLBlue;  break;
    case "White": theHTML = theHTMLWhite; break;
    case "Green": theHTML = theHTMLGreen; break;
    case "Brown": theHTML = theHTMLBrown; break;
} 
```

如果您想找点乐子，并且想迷惑任何试图阅读您的代码的人，您可以创造性地使用`eval`，如下所示：

```
eval('theHTML = theHTML' + theAjaxIndicator.prop('class') + ';'); 
```

但是这段代码会更慢，因为它会强制重新编译脚本。我不知道 JIT 在这种情况下是如何工作的。

# iphone - 应用程序委托中的 TabBased 应用程序 + modalview

> ID：14492771
> 
> 赞同：0
> 
> 时间：2013-01-24T02:11:18.020
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller, modalviewcontroller

我有一个基于标签的应用程序。该应用程序使用 FirstViewCOntroller 启动。我想在单击相同的选项卡项第一个视图时显示模态视图。

我正在尝试在选项卡栏的 didSelectViewController 方法中的应用程序委托中添加代码，但是由于无法识别的选择器被发送到实例，因此出现错误。此外，警告显示为未找到 presentViewController 方法。

我正在添加代码。方法：

```
ModalViewController *modalView = [[ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];
    modalView.modalPresentationStyle = UIModalPresentationFullScreen;
    [self presentViewController:modalView animated:NO completion:NULL];

    [modalView release]; 
```

请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:19:38.137

`PresentViewController`是在类中定义的方法`viewcontroller`，因此您必须从`Viewcontroller`类中调用它。由于您已经在应用程序委托中编写了此代码，其中 self 不是`viewcontroller`.

所以我建议你使用`FirstViewcontroller`类来执行这段代码

# windows-8 - 没有VS的原生代码Windows8开发？

> ID：14492776
> 
> 赞同：0
> 
> 时间：2013-01-24T02:12:11.540
> 
> 标签：windows-8, visual-studio-2012, windows-runtime, c99, native-code

由于 VS C 编译器从来没有很好地完成 C99，我一直使用 gcc 到 windows 的（可怕的）端口为桌面完成我的本机代码 C 开发。无论如何，我想知道 WINRT 的“本机代码”平台是否允许来自其他编译器的代码，还是我们需要使用 VS？

当我说 WINRT 时，我指的是 API，而不是操作系统……或者至少我认为我这样做……无论 Metro 应用程序现在想如何称呼自己……

我只是想知道在不久的将来转向地铁开发是否是一个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:39:54.703

你不需要VS。但是您确实需要一个本机编译器。

# java - 尝试将 jspx 文件映射到 servlet 时出现奇怪的异常

> ID：14492787
> 
> 赞同：0
> 
> 时间：2013-01-24T02:13:23.923
> 
> 标签：java, jsp, jakarta-ee, servlets, jspx

这是我的 web.xml 文件的工作版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <servlet>
        <servlet-name>MainServlet</servlet-name>
        <servlet-class>creator.controllers.MainController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>MainServlet</servlet-name>
        <url-pattern>/main</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>login.jspx</welcome-file>
    </welcome-file-list>
</web-app> 
```

现在我想将我所有的 jspx 文件映射到那个 servlet，这样它们就不能被访问，除非通过 servlet。

我添加了以下几行：

```
<servlet-mapping>
    <servlet-name>MainServlet</servlet-name>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping> 
```

...但我有一个例外，不幸的是，它太长了，无法在控制台中完全显示..

```
at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:281)

at creator.controllers.LogonController.redirectToLoginPage(LogonController.java:56)
at creator.controllers.ReportContoller.processReportPage(ReportContoller.java:27)
at creator.controllers.MainController.process(MainController.java:46)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at creator.controllers.MainController.process(MainController.java:49)
    at creator.controllers.MainController.doGet(MainController.java:21)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at creator.controllers.MainController.process(MainController.java:49)
    at creator.controllers.MainController.doGet(MainController.java:21)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at creator.controllers.MainController.process(MainController.java:49)
    at creator.controllers.MainController.doGet(MainController.java:21)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at creator.controllers.MainController.process(MainController.java:49)
at creator.controllers.MainController.doGet(MainController.java:21)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at `org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)` 
```

异常的第一行重复了 100 多次。现在我很无助，因为我不知道如何找出导致此问题的原因:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:09:51.443

servlet 正在尝试调用 jspx，而服务器将其重定向回 servlet，从而导致无限循环。

您将需要移动 jspx 并让 servlet 使用映射中未包含的重定向路径。

过滤器通常是拦截事物的更好选择。

# html - 查找所有 5 位数字

> ID：14492788
> 
> 赞同：0
> 
> 时间：2013-01-24T02:13:42.290
> 
> 标签：html, regex, dreamweaver, digits

刚换了一份新工作，我的工作是将架构改造为大约 42,000 个 html 网页。我需要找到所有邮政编码，它们恰好都是相同的格式。每个实例在每个页面上只能找到一次，这样就更容易了。

格式为：

```
, 72005, 
```

我想找到以下所有实例：

```
, #####, 
```

并将它们替换为：

```
, <span itemprop="postalCode">72005<span>, 
```

行业工具是 Dreamweaver 中的搜索和替换。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:18:23.503

用正则表达式检查替换所有你可以试试这个。

# 寻找

```
, ([0-9]{5}), 
```

# 代替

```
, <span itemprop="postalCode">$1<span>, 
```

# vb.net - 无法使用线程、后台工作程序或字符串生成器读取和处理大型 txt 文件

> ID：14492792
> 
> 赞同：2
> 
> 时间：2013-01-24T02:13:58.027
> 
> 标签：vb.net

在 .net 中，我正在编写一个需要读取大 txt 文件（例如 10 mb）的应用程序。我的问题是使用 StreamReader 读取文件并进行一些字符串操作，然后将结果添加到列表框中。

如果我使用线程或后台工作程序，处理会变得非常慢。我也尝试使用字符串生成器，但结果相同。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:34:13.980

您可以使用 ReadAllLines 快速读取 10 mb 的文本文件：

```
Dim ss() As String
ss = System.IO.File.ReadAllLines(filename) 
```

`ss`在这种情况下，您可以操作数组中的字符串。

更新 ListBox 时，应使用 .BeginUpdate 和 .EndUpdate 使该部分更快。

您可以将 Application.DoEvents 放入循环中以允许处理 Windows 消息。这可能使它看起来不像系统被锁定。

# c - Linux 中的网络性能调优

> ID：14492793
> 
> 赞同：-1
> 
> 时间：2013-01-24T02:14:10.273
> 
> 标签：c, linux, network-programming

我有一个有两个线程的应用程序，thread1 将从网卡 eth1 接收多播包，假设我使用 sched_setaffinity 将 thread1 的 cpu 亲和性设置为 cpu core 1，然后我让 thread2 使用这些包（从 thread1 接收，位于heap area global vars) 做一些操作，我将thread2的cpu亲和力设置为core 7，假设core 1和core 7在同一个core中具有超线程，我认为性能会很好，因为core 1和core 7可以使用 L1 缓存。

我看过/proc/interrupt，我看到eth1在几个cpu核心中有中断，所以在我的例子中，我将thread1的cpu亲和力设置为核心1，但是
在很多核心中都发生了中断，会影响性能吗？无论哪个内核有中断，从 eth1 收到的那些包都会直接进入主内存吗？

我对linux内核中的网络不太了解，任何建议书籍或网站的人都可以帮助我解决这个问题吗？谢谢大家的意见~~

编辑：根据“每个程序员应该了解的内存”6.3.5“直接缓存访问”，我认为“DCA”是我想知道的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:23:23.997

中断将（很可能）发生在与接收数据包的内核不同的内核上。取决于驱动程序如何处理数据包，这可能重要也可能不重要。如果驱动程序读取数据包（例如制作副本），那么它并不理想，因为缓存在不同的 CPU 上被填满。但是，如果数据包刚刚使用 DMA 加载到内存中，并留在那里供软件稍后获取，那么没关系 [事实上，最好让它发生在不同的 CPU 上，作为“你的”cpu有更多时间做其他事情]。

至于使用超线程，我（以及许多其他人的经验）是超线程有时会带来好处，但通常最终类似于没有超线程，因为两个线程使用相同内核的相同执行单元。您可能希望将吞吐量与在同一核心上设置为亲和性的两个线程进行比较，看看这是否使它“更好”或“更差” - 就像大多数事情一样，它通常是细节会产生影响，所以你的代码可能与其他人略有不同，这意味着它在一种或另一种情况下效果更好。

编辑：如果您的系统有多个插槽，您可能还需要确保插槽上的 CPU“最近”（如 QPI/PCI 桥接跳数）网卡。

# javascript - 仅使用 LMB 启动 onclick/onmousedown

> ID：14492797
> 
> 赞同：2
> 
> 时间：2013-01-24T02:14:14.513
> 
> 标签：javascript, mouseevent, mousedown

好吧，我试图在互联网上搜索并没有找到如何做到这一点。我发现的一切只是在右键单击时禁用上下文菜单。关键是：我正在（试图）制作一个（简单的）游戏。我有我的脚本来移动我的播放器，但是 onclick/onmousedown（实际上是所有的鼠标事件）可以用 LMB 和 RMB 触发。我真的不在乎右键单击是否有效，真正的问题是我将鼠标按下时的间隔设置为“on”，鼠标按下时设置为“off”；（拖动角色）；如果我同时向 LMB 和 RMB 发送垃圾邮件，则在某一时刻间隔不会关闭，它会在没有按下任何按钮的情况下拖动角色。再次单击甚至不会重置间隔。

如果需要，我可以粘贴代码，但我对 javascript 还很陌生，我想这很混乱而且错误。但是，嘿，到目前为止，一切都很好。

好吧，让我们去看看代码......如果到目前为止有 2 个文件，一个“主要”，另一个用于角色移动......不，这真的没有帮助，因为我不能简单地发布我需要的部分，因为它们都是相互关联的*(?);

主要代码：

```
/* ==========
 * Main JS file. Calling functions and handling user input.
========== */

/* Everlasting Intervals */
    window.setInterval(function(){animateplayersprite()},250);
/* ========== */

/* Onload */
    window.onload = function(){
        /* initialize Mouse Interactions */
                  document.onmousemove = getmouseposition;
        /* ========== */ 

        /* Initialize Character Movement */
            Player.style.marginLeft = playerx - (window.innerWidth / 2 - 512) + "px";   
            Player.style.marginTop = playery - (window.innerHeight /2 - 384) + "px";
            Scene.onmousemove = characterorientation;
            document.onmouseup = characterdragstop;
            document.onclick = characterdragstop;
            GameAreaL2.onmousedown = characterdrag;
            Scene.onmouseout = characterdragstop;
        /* ========== */
    }
/* ========== */

/* Global Variables */
    /* Mouse Interaction */
        var target = false;
    /* ========== */

    /* Character Movement */
        var posx = window.innerWidth / 2; /* Sync Values */
        var posy = window.innerHeight / 2; /* Sync Values */
        var tempx = window.innerWidth / 2; /* Sync Values */
        var tempy = window.innerHeight / 2; /* Sync Values */
        var playerx = window.innerWidth / 2; /* Sync Values */
        var playery = window.innerHeight / 2; /* Sync Values */
        var charspeed = 1;
        var charspeedcall = false;
        var chardrag = false;
        var charisdragged = false;
        var playerismoving = false;
        var playercanlook = true;
        var playermovementa = 0;
        var playeranimationframex = 2;
        var playeranimationframey = 1;
        var characteredgescroll = false;
    /* ========== */

    /* Game Area L1 Properties */
       var GameAreaL1BackgroundPositionx = 0;
       var GameAreaL1BackgroundPositiony = 0;
       var GameAreaL1BackgroundWidth = 2000; /* TESTS ; WILL BE OVERRIDEN ON AREA LOADING */
       var GameAreaL1BackgroundHeight = 2000; /* TESTS ; WILL BE OVERRIDEN ON AREA LOADING */
    /* ========== */
/* ========== */

/* Functions */
    /* Get mouse Position in posx and posy */
        function getmouseposition(e){
            if(!e){ e=window.event; }
            posx = e.clientX;
            posy = e.clientY;
            }
    /* ========== */

    /* Define if mouse is pointing outside the game area (Override Mouse Movement) */
        function targeton(){
            target = true;
        }
        function targetoff(){
            target = false;
        }
    /* ========== */
/* ========== */ 
```

以及人物动作：

```
/* ==========
 * JS file handling character movement.
========== */

/* Functions */
    /* Find active zone and look at the mouse */
        function characterorientation(){
            if(target == false){
                if(charisdragged == true || playercanlook == true){
                    if(posy < 0.75 * (posx + (512 - playerx)) + (playery - 384) && posy > -0.75 * (posx + (512 - playerx)) + (384 + playery)){
                        if(playeranimationframex == 1){
                            PlayerBody.style.backgroundPosition = "0px 288px";
                        }
                        else if(playeranimationframex == 2){
                            PlayerBody.style.backgroundPosition = "-72px 288px";
                        }
                        else if(playeranimationframex == 3){
                            PlayerBody.style.backgroundPosition = "-144px 288px";
                        }
                        else if(playeranimationframex == 4){
                            PlayerBody.style.backgroundPosition = "-72px 288px";    
                        }
                        playeranimationframey = 4;
                    } 
                    else if(posy > 0.75 * (posx + (512 - playerx)) + (playery - 384) && posy > -0.75 * (posx + (512 - playerx)) + (384 + playery)){
                        if(playeranimationframex == 1){
                            PlayerBody.style.backgroundPosition = "0px 192px";
                        }
                        else if(playeranimationframex == 2){
                            PlayerBody.style.backgroundPosition = "-72px 192px";
                        }
                        else if(playeranimationframex == 3){
                            PlayerBody.style.backgroundPosition = "-144px 192px";
                        }
                        else if(playeranimationframex == 4){
                            PlayerBody.style.backgroundPosition = "-72px 192px";    
                        }
                        playeranimationframey = 3;
                    } 
                    else if(posy > 0.75 * (posx + (512 - playerx)) + (playery - 384) && posy < -0.75 * (posx + (512 - playerx)) + (384 + playery)){ 
                        if(playeranimationframex == 1){
                            PlayerBody.style.backgroundPosition = "0px 96px";
                        }
                        else if(playeranimationframex == 2){
                            PlayerBody.style.backgroundPosition = "-72px 96px";
                        }
                        else if(playeranimationframex == 3){
                            PlayerBody.style.backgroundPosition = "-144px 96px";
                        }
                        else if(playeranimationframex == 4){
                            PlayerBody.style.backgroundPosition = "-72px 96px"; 
                        }
                        playeranimationframey = 2;      
                    } 
                    else if(posy < 0.75 * (posx + (512 - playerx)) + (playery - 384) && posy < -0.75 * (posx + (512 - playerx)) + (384 + playery)){
                        if(playeranimationframex == 1){
                            PlayerBody.style.backgroundPosition = "0px 0px";
                        }
                        else if(playeranimationframex == 2){
                            PlayerBody.style.backgroundPosition = "-72px 0px";
                        }
                        else if(playeranimationframex == 3){
                            PlayerBody.style.backgroundPosition = "-144px 0px";
                        }
                        else if(playeranimationframex == 4){
                            PlayerBody.style.backgroundPosition = "-72px 0px";  
                        }
                        playeranimationframey = 1;  
                    }
                }
            }
        }
    /* ========== */

    /* Animate the sprite if the player is moving */
        function animateplayersprite(){
            if(playerismoving == true){
                if(playeranimationframex == 1){
                    if(playeranimationframey == 1){
                        PlayerBody.style.backgroundPosition = "-72px 0px";
                    }
                    else if(playeranimationframey == 2){
                        PlayerBody.style.backgroundPosition = "-72px 96px"; 
                    }
                    else if(playeranimationframey == 3){
                        PlayerBody.style.backgroundPosition = "-72px 192px";
                    }
                    else if(playeranimationframey == 4){
                        PlayerBody.style.backgroundPosition = "-72px 288px";
                    }
                    playeranimationframex = 2;
                }
                else if(playeranimationframex == 2){
                    if(playeranimationframey == 1){
                        PlayerBody.style.backgroundPosition = "-144px 0px";
                    }
                    else if(playeranimationframey == 2){
                        PlayerBody.style.backgroundPosition = "-144px 96px";    
                    }
                    else if(playeranimationframey == 3){
                        PlayerBody.style.backgroundPosition = "-144px 192px";
                    }
                    else if(playeranimationframey == 4){
                        PlayerBody.style.backgroundPosition = "-144px 288px";
                    }
                    playeranimationframex = 3;
                }
                else if(playeranimationframex == 3){
                    if(playeranimationframey == 1){
                        PlayerBody.style.backgroundPosition = "-72px 0px";
                    }
                    else if(playeranimationframey == 2){
                        PlayerBody.style.backgroundPosition = "-72px 96px"; 
                    }
                    else if(playeranimationframey == 3){
                        PlayerBody.style.backgroundPosition = "-72px 192px";
                    }
                    else if(playeranimationframey == 4){
                        PlayerBody.style.backgroundPosition = "-72px 288px";
                    }
                    playeranimationframex = 4;
                }
                else if(playeranimationframex == 4){
                    if(playeranimationframey == 1){
                        PlayerBody.style.backgroundPosition = "0px 0px";
                    }
                    else if(playeranimationframey == 2){
                        PlayerBody.style.backgroundPosition = "0px 96px";   
                    }
                    else if(playeranimationframey == 3){
                        PlayerBody.style.backgroundPosition = "0px 192px";
                    }
                    else if(playeranimationframey == 4){
                        PlayerBody.style.backgroundPosition = "0px 288px";
                    }
                    playeranimationframex = 1;
                }
            }
            else{
                if(playeranimationframey == 1){
                    PlayerBody.style.backgroundPosition = "-72px 0px";
                }
                else if(playeranimationframey == 2){
                    PlayerBody.style.backgroundPosition = "-72px 96px"; 
                }
                else if(playeranimationframey == 3){
                    PlayerBody.style.backgroundPosition = "-72px 192px";
                }
                else if(playeranimationframey == 4){
                    PlayerBody.style.backgroundPosition = "-72px 288px";
                }
                    playeranimationframex = 4;
            }
        }       
    /* ========== */

    /* Player's Movement directions */
        function playerxplus(charmovexap){
            if(tempx - playerx < charspeed){
                playerx += tempx - playerx;
            }
            else{
                playerx += charmovexap * charspeed;
            }
        } 
        function playerxminus(charmovexam){
            if(playerx - tempx < charspeed){
                playerx -= playerx - tempx;
            }
            else{
                playerx -= charmovexam * charspeed;
            }
        }
        function playeryplus(charmoveyap){
            if(tempy - playery < charspeed){
                playery += tempy - playery;
            }
            else{
                playery += charmoveyap * charspeed;
            }   
        }
        function playeryminus(charmoveyam){
            if(playery - tempy < charspeed){
                playery -= playery  - tempy;
            }
            else{
                playery -= charmoveyam * charspeed;
            }
        }
    /* ========== */

    /* Set the character animation speed and move depending on direction + Scroll area if the player is near the edge */
        function charactermovementspeed(){
            if(characteredgescroll == false){
                if(tempx > playerx && tempy > playery){
                    playermovementa = (tempy - playery) / (tempx - playerx);
                    if(tempx - playerx > tempy - playery){
                        playerxplus(1);
                        playeryplus(playermovementa);
                    }
                    else if(tempx - playerx < tempy - playery){
                        playerxplus(1/playermovementa);
                        playeryplus(1);
                    }
                }
                else if(tempx < playerx && tempy < playery){
                    playermovementa = (playery - tempy) / (playerx - tempx);
                    if(playerx - tempx > playery - tempy){
                        playerxminus(1);
                        playeryminus(playermovementa);  
                    }
                    else{
                        playerxminus(1/playermovementa);
                        playeryminus(1);
                    }
                }
                else if(tempx > playerx && tempy < playery){
                    playermovementa = (playery - tempy) / (tempx - playerx);
                    if(tempx - playerx > playery - tempy){
                        playerxplus(1);
                        playeryminus(playermovementa);
                    }
                    else{
                        playerxplus(1/playermovementa);
                        playeryminus(1);
                    }
                }
                else if(tempx < playerx && tempy > playery){
                    playermovementa = (tempy - playery) / (playerx - tempx);
                    if(playerx - tempx > tempy - playery){
                        playerxminus(1);
                        playeryplus(playermovementa);
                    }
                    else{
                        playerxminus(1/playermovementa);
                        playeryplus(1);
                    }
                }
                else if(tempx > playerx){
                    playerxplus(1);
                }
                else if(tempy > playery){
                    playeryplus(1);
                }
                else if(tempx < playerx){
                    playerxminus(1);
                }
                else if(tempy < playery){
                    playeryminus(1);
                }
                else{
                    playerismoving = false;
                    playercanlook = true;
                    clearInterval(charspeedcall);
                }
            }
            if(playerismoving == true){
                if(playerx > window.innerWidth / 2 + 100 && GameAreaL1BackgroundPositionx > - (GameAreaL1BackgroundWidth - 1024) ){
                    characteredgescroll = true;
                    playerx = window.innerWidth / 2 + 100;
                    if(- (GameAreaL1BackgroundWidth - 1024) - GameAreaL1BackgroundPositionx <= - charspeed){
                        tempx -= charspeed;
                        GameAreaL1BackgroundPositionx -= charspeed;
                    }
                    else{
                        tempx += - (GameAreaL1BackgroundWidth - 1024) - GameAreaL1BackgroundPositionx;
                        GameAreaL1BackgroundPositionx += - (GameAreaL1BackgroundWidth - 1024) - GameAreaL1BackgroundPositionx;
                    }
                    GameAreaL1.style.backgroundPosition = GameAreaL1BackgroundPositionx + "px " + GameAreaL1BackgroundPositiony + "px";
                }
                else if(playerx < window.innerWidth / 2 - 100 && GameAreaL1BackgroundPositionx < 0){
                    characteredgescroll = true;
                    playerx = window.innerWidth / 2 - 100;
                    if(GameAreaL1BackgroundPositionx <= - charspeed){
                        tempx += charspeed;
                        GameAreaL1BackgroundPositionx += charspeed;
                    }
                    else{
                        tempx += - GameAreaL1BackgroundPositionx;
                        GameAreaL1BackgroundPositionx += - GameAreaL1BackgroundPositionx;
                    }
                    GameAreaL1.style.backgroundPosition = GameAreaL1BackgroundPositionx + "px " + GameAreaL1BackgroundPositiony + "px";
                }
                else{
                    characteredgescroll = false;
                    Player.style.marginLeft = playerx - (window.innerWidth / 2 - 512) + "px";   
                    Player.style.marginTop = playery - (window.innerHeight /2 - 384) + "px";
                }
                if(playery > window.innerHeight / 2 + 100 && GameAreaL1BackgroundPositiony > - (GameAreaL1BackgroundHeight - 768)){
                    characteredgescroll = true;
                    playery = window.innerHeight/ 2 + 100;
                    if(- (GameAreaL1BackgroundHeight - 768) - GameAreaL1BackgroundPositiony <= - charspeed){
                        tempy -= charspeed;
                        GameAreaL1BackgroundPositiony -= charspeed;
                    }
                    else{
                        tempy += - (GameAreaL1BackgroundHeight - 768) - GameAreaL1BackgroundPositiony;
                        GameAreaL1BackgroundPositiony += - (GameAreaL1BackgroundHeight - 768) - GameAreaL1BackgroundPositiony;
                    }
                    GameAreaL1.style.backgroundPosition = GameAreaL1BackgroundPositionx + "px " + GameAreaL1BackgroundPositiony + "px";
                }
                else if(playery < window.innerHeight / 2 - 100 && GameAreaL1BackgroundPositiony < 0){
                    characteredgescroll = true;
                    playery = window.innerHeight / 2 - 100;
                    if(GameAreaL1BackgroundPositiony <= - charspeed){
                        tempy += charspeed;
                        GameAreaL1BackgroundPositiony += charspeed;
                    }
                    else{
                        tempy += - GameAreaL1BackgroundPositiony;
                        GameAreaL1BackgroundPositiony += - GameAreaL1BackgroundPositiony;
                    }
                    GameAreaL1.style.backgroundPosition = GameAreaL1BackgroundPositionx + "px " + GameAreaL1BackgroundPositiony + "px";
                }
                else{
                    characteredgescroll = false;
                    Player.style.marginLeft = playerx - (window.innerWidth / 2 - 512) + "px";   
                    Player.style.marginTop = playery - (window.innerHeight /2 - 384) + "px";
                }
            }
        }
    /* ========== */

    /* Move character calling the movespeed function : Get the direction (pos/neg values of the axes) */
        function charactermovement(){
            /* Set Values */
                tempx = posx;
                tempy = posy;
                playercanlook = false;
                charisdragged = true;
                characterorientation();
                charisdragged = false;
            /* ========== */
            if(target == false){ 
                if(playerismoving == false){
                    playerismoving = true;
                    charspeedcall = setInterval(function(){charactermovementspeed()},1);
                }
            }
        }   
    /* ========== */

    /* Continue to move character if lmb is held */
        function characterdrag(){
            chardrag = setInterval(function(){charactermovement()},1);
            charisdragged = true;
        }
        function characterdragstop(){
            clearInterval(chardrag);
            charisdragged = false;
        }
    /* ========== */
/* ==========*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:56:52.120

您可以检查`event.button`属性以检查单击了哪个按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:58:50.797

这是我能来的最接近的。不过我不太喜欢它，因为我不得不依赖全局。我尝试了其他方法，例如取消 onmousedown 事件，但我所做的任何事情都不会导致 onclick 事件触发。

顺便说一句，我注意到右键单击会在 FF 中引发 onclick 事件，但不会在 Chrome 中引发。我没有检查IE。

[http://jsfiddle.net/Rsrw4/2/](http://jsfiddle.net/Rsrw4/2/)

```
//global to store whether we rightclicked
var rightclick = false;

//use mousedown to detect rightclick
document.onmousedown = function (e) {
    e = e || window.event;
    switch (e.which) {
        case 1:
            console.log('left');
            break;
        case 2:
            console.log('middle');
            break;
        case 3:
            console.log('right');
            rightclick = true;      //store click in global
            break;
    }
};

//in onclick, which fires after onmousedown, check whether it was from a right click
document.onclick = function (e) {
    if (rightclick) {
        rightclick = false;
        return;
    }
    console.log('onclick');
};

document.addEventListener("contextmenu", function (e) {
    e.preventDefault();
}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:17:59.673

道格拉斯·克罗克福德（Douglas Crockford）谈到了这一点……只有微软才能正确使用鼠标按钮。W3C 弄错了。你不能只禁用人民币，你必须过滤它。

```
W3C:
* Left button   0
* Middle button 1
* Right button  2

Microsoft:
* Left button   1
* Middle button 4
* Right button  2 
```

将此代码和平放在您的事件函数中，以过滤鼠标按钮

```
mouse = e.button || e.which;    // w3s || MS
// ff 0 ie 1
mouse_left = e.button ? this.mouse === 0 ? true : false : this.mouse === 1 ? true : false;// w3c 0; ms 1;
// ff 2 ie 2
mouse_right = this.mouse === 2 ? true : false;  // w3c 2; ms 2; //right mouse button clicked
// ff 1 ie 4
this.mouse_middle = 0; 
```

使用此函数停止事件冒泡并防止默认的右键单击操作：

```
stop_bubbling = function () {
    obj.e.cancelBubble = true;  // MS inhereted from Netscape
    if(obj.e.stopPropagation){obj.e.stopPropagation();} // w3c
};

prevent_default_action = function () {
    obj.e.returnValue = false;  //MS
    if( obj.e.preventDefault){obj.e.preventDefault();}  // w3c
    return false;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T03:33:25.157

好吧，我使用了 mrtsherman 的代码。但是我删除了最后一部分并将整个内容放入我的函数中，如果按下 LMB 则会触发间隔。我真的不明白代码所以......这就是为什么。另外，我已经看到了，我可能会在未来的操作中遇到同样的问题，所以最后我可能需要使用全局变量，但是，我仍然这样做是为了我个人的乐趣！

```
function characterdrag(){
    document.onmousedown = function (e) {
        e = e || window.event;
        switch (e.which) {
            case 1:
                console.log('left');
                chardrag = setInterval(function(){charactermovement()},1);
                charisdragged = true;
                break;
            case 2:
                console.log('middle');
                break;
            case 3:
                console.log('right');
                break;
        }
    }
} 
```

# c# - 通过反射完全实例化对象，无需构造函数

> ID：14492798
> 
> 赞同：2
> 
> 时间：2013-01-24T02:14:16.303
> 
> 标签：c#, reflection, types, initialization

我找到的与这个问题相关的最接近的答案并没有真正帮助解决它，尽管也许我在搜索它时做得很差。

[从 Type 中获取新的对象实例](https://stackoverflow.com/questions/752/get-a-new-object-instance-from-a-type)

[反射实例化](https://stackoverflow.com/questions/2931496/c-sharp-reflection-instantiation)

[实例化具有运行时确定类型的对象](https://stackoverflow.com/questions/981330/c-instantiate-an-object-with-a-runtime-determined-type)

现在，我要解决的是：

我想完全完整地填写和初始化一个对象，我只有Type，而这个对象没有构造函数，直到运行时我才知道它是什么类型。

```
private readonly Dictionary<string, object> exampleDict = new Dictionary<string, string> { { "String", "\"String\"" }, { "Guid", Guid.NewGuid() }, { "Boolean", False }, { "int", 0 }, { "Decimal", 5.004 }, { "Int32", 0 }, { "Float", 10.01 }, { "Double", 0.101 } };
//Essentially a dictionary of what to init properties to
private object PopulateType(Type propertyType)
{
    object o = Activator.CreateInstance(propertyType);
    if(exampleDict.hasKey(propertyType.ToString())) //If it is in the dictionary, init it
        o = exampleDict[propertyType.Name];
    else
        foreach(var property in o.getProperties())//Otherwise look at each of its properties and init them to init the object
            PopulateType(typeof(property));
} 
```

以上不是我实际拥有的，我怀疑它是否可以开箱即用（实际代码目前有很多我从 SO 答案中尝试过的不同的东西，而且按照我想要的方式重写它更容易）

我还需要担心会有所不同的数组（以及扩展列表和字典），但我主要是想弄清楚问题的主要部分。

提前感谢所有帮助 - 我只是希望这是可能的:)

**编辑更多细节**：换句话说，说我有以下课程：

```
public class ClassOne
{
    public string BirthCountry {get; set;}
    public string BirthCity {get; set;}
}
public class ClassTwo
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public ClassOne BirthPlace {get; set;}
} 
```

我想做的是打电话：

```
object newObject = PopulateType(typeof(ClassOne)) 
```

或者

```
object newObject = PopulateType(typeof(ClassTwo)) 
```

我事先不知道我会使用哪一个，也没有构造函数。如果它是一个put into ，我希望能够设置`BirthCountry`和`BirthCity`“字符串” ，并且我希望能够设置， 但是我希望能够为我碰巧拥有的任何课程做到这一点（这些只是例子）。`ClassOne``PopulateType``FirstName="String"``LastName="String"``BirthPlace=new ClassOne { BirthCountry="String", BirthCity="String" }`

**进一步编辑**

我能够从类型中创建基类。但我无法点击属性将它们设置为除 null 之外的任何内容。

编辑 - 在 Fruity Geek（非常感谢朋友）的帮助下，我能够让程序正常工作。

```
private object PopulateType(Type propertyType)
{
    object o = null;
    if (exampleDict.ContainsKey(propertyType.Name))
        o = exampleDict[propertyType.Name];
    else
    {
        var types = AppDomain.CurrentDomain.GetAssemblies().ToList().SelectMany(s => s.GetTypes()).Where(p => propertyType.IsAssignableFrom(p));
        try{o = Activator.CreateInstance(propertyType);}
        catch{o = Activator.CreateInstance(types.Last());}   
        foreach (PropertyInfo prop in o.GetType().GetProperties())
            try
            {
                prop.SetValue(o, PopulateType(prop.PropertyType), null);
            }
            catch (Exception){}
    }
    return o;
} 
```

请注意，try/catch 是为了：如果接口未实现，则防止爆炸，并且不尝试实例化 dicts/lists/arrays（那些仍然需要工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:14:58.433

您可以使用反射来检查属性是否存在并设置它。

```
PopulateType(Object obj)
{
    //A dictionary of values to set for found properties
    Dictionary<String, Object> defaultValues = new Dictionary<String, Object>();
    defaultValues.Add("BirthPlace", "Amercia");
    for (var defaultValue in defaultValues)
    {
        //Here is an example that just set BirthPlace to a known value Amercia
        PropertyInfo prop = obj.GetType().GetProperty(defaultValue.Key, BindingFlags.Public | BindingFlags.Instance);
        if(null != prop && prop.CanWrite)
        {
            prop.SetValue(obj, defaultValue.Value, null);
        }
    }
} 
```

# objective-c - 使用 Cocoa 的最后打开的文档

> ID：14492799
> 
> 赞同：0
> 
> 时间：2013-01-24T02:14:18.977
> 
> 标签：objective-c, cocoa

有没有办法获取应用程序最后打开的文件？我知道使用 LSSharedFileListCreate 可以获取用户的全局最近文档数组，但我想知道是否可以使用 cocoa 或 Objective-c 获取特定应用程序（例如 Xcode）的最近文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:31:35.357

您可以使用`-[NSDocumentController recentDocumentURLs]`，它检索最近打开的文档的 URL 数组：

```
NSArray *array = [[NSDocumentController sharedDocumentController] recentDocumentURLs]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:55:06.327

我认为没有公共 API 可以获取您自己以外的应用程序的最新文档。不过，最近的文件保存为 plist `~/Library/Preferences`，因此您可以直接阅读它们。

但是请注意，这些 plist 的格式可能会随着未来的操作系统升级而改变，因此您最好不要依赖它。

下面是一个阅读Xcode最近文档的例子：

```
NSString *bundleID = @"com.apple.dt.Xcode";
NSString *prefPath = [[NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"Preferences"];
NSString *recentFilesFileName = [bundleID stringByAppendingPathExtension:@"LSSharedFileList.plist"];
NSString *recentFilesPath = [prefPath stringByAppendingPathComponent:recentFilesFileName];

NSArray *recentDocumentItems = [[[NSDictionary dictionaryWithContentsOfFile:recentFilesPath] objectForKey:@"RecentDocuments"] objectForKey:@"CustomListItems"];
for (NSDictionary *recentDocumentItem in recentDocumentItems) {
    NSString *name = [recentDocumentItem objectForKey:@"Name"];
    NSData *bookmarkData = [recentDocumentItem objectForKey:@"Bookmark"];
    NSError *error = nil;
    NSURL *bookmarkURL = [NSURL URLByResolvingBookmarkData:bookmarkData options:NSURLBookmarkResolutionWithoutMounting | NSURLBookmarkResolutionWithoutUI relativeToURL:nil bookmarkDataIsStale:NULL error:&error];
    if (bookmarkURL) {
        NSLog(@"File name: %@", name);
        NSLog(@"URL: %@", bookmarkURL);
    } else {
        NSLog(@"Could not resolve URL for file %@: %@", name, error);
    }
} 
```

这当然不适用于沙盒应用程序。

# c++ - 类对象的选择排序数组

> ID：14492800
> 
> 赞同：0
> 
> 时间：2013-01-24T02:14:27.153
> 
> 标签：c++, arrays, sorting, selection

我有一个部分有效的选择排序算法，我正在使用它按年龄对类对象数组进行排序，当它这样做时，它会正确排序一些内容，但无法对第一个元素进行排序。还有一种方法可以使用类的赋值运算符来使这更容易一些。

谢谢

以下是我的完整代码：

```
#include <iostream>
#include <string>
#include <math.h>

using namespace std;

void storeinfo() ;
void showinfo() ;
void menu() ;
void deleteinfo() ;
void displayallinfo() ;
void selectionSort() ;
int linsearch(string val) ;

class user 
{
    string firstname, lastname, currentteam, position, status ;
    int age ;
public:
    user() {};
    user(string fname, string lname, string cteam, string pos, string stat, int age) 
    {
        setFirstName(fname);
        setLastName(lname);
        setCurrentTeam(cteam);
        setPosition(pos);
        setStatus(stat);
        setAge(age);
    } ;

    user& operator = (const user& source)
    {
        firstname = source.firstname;
        lastname = source.lastname ;
        currentteam = source.currentteam ;
        position = source.position ;
        status = source.status ;
        age = source.age ;
    }

    void setFirstName(string fname)
        {firstname = fname;}
    void setLastName(string lname)
        {lastname = lname;}
    void setCurrentTeam(string cteam)
        {currentteam = cteam;}
    void setPosition(string pos)
        {position = pos;}
    void setStatus(string stat)
        {status = stat;}
    void setAge(int _age)
        {age = _age;}

    string getFirstName()
        {return firstname ;}
    string getLastName()
        {return lastname ;}
    string getCurrentTeam()
        {return currentteam ;}
    string getPosition()
        {return position ;}
    string getStatus()
        {return status ;}
    int getAge()
        {return age ;}
};

user player[20] ;
int arrlength = 3 ;

int main()
{
    menu() ;

    cin.get() ;
    return 0 ;
}

void storeinfo()
{
    string firstname ;
    string lastname ;
    string currentteam ;
    string position;
    string status ;
    int age ;

    for (int i=0; i < 3; i++)
    {
        cout << "\n\n Enter First Name : " ; 
        cin >> firstname ;
        player[i].setFirstName(firstname) ;
        cout << "Enter Last Name : " ; 
        cin >> lastname ;
        player[i].setLastName(lastname) ;
        cout << "Enter Player's Age : " ; 
        cin >> age;
        player[i].setAge(age) ;
        cout << "Enter Current Team : " ; 
        cin >> currentteam ;
        player[i].setCurrentTeam(currentteam) ;
        cout << "Enter Position : " ; 
        cin >> position ;
        player[i].setPosition(position) ;
        cout << "Enter Status : " ; 
        cin >> status ;
        player[i].setStatus(status) ;

        cout << "\n\n\n" ;
    }

    /*cout << string(50, '\n');*/

    menu() ;

}

void showinfo()
{
    string search;
    int found ;

    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

    found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        cout << "\n First Name : " << player[found].getFirstName() << "\n" << "Last Name : " << player[found].getLastName() <<
            "\n" << "Age : " << player[found].getAge() << "\n" << "Current Team : " << player[found].getCurrentTeam() << 
            "\n" << "Position : " << player[found].getPosition() << "\n" << "Status :  " << player[found].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;

}

void deleteinfo()
{
    int arrlength = 3 ;
    string search ;
    int found ;

    cout << "\n Delete A Player's Information \n\n" ;
    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

        found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        for (int i=found + 1; i < arrlength; ++i)
        {
            player[i-1].setFirstName(player[i].getFirstName()) ;
            player[i-1].setLastName(player[i].getLastName()) ;
            player[i-1].setAge(player[i].getAge()) ;
            player[i-1].setCurrentTeam(player[i].getCurrentTeam()) ;
            player[i-1].setPosition(player[i].getPosition()) ;
            player[i-1].setStatus(player[i].getStatus()) ;
        }

        --arrlength ;

        cout << "\n Player has been deleted." ;

        player[arrlength].setAge(0) ;
        player[arrlength].setCurrentTeam("") ;
        player[arrlength].setFirstName("") ;
        player[arrlength].setLastName("") ;
        player[arrlength].setPosition("") ;
        player[arrlength].setStatus("");
    }

    cin.get() ;

    menu() ;
}

void displayallinfo()
{

    selectionSort();

    for (int i=0; i < 3; i++)
    {
        cout << "\n First Name : " << player[i].getFirstName() << "\n" << "Last Name : " << player[i].getLastName() <<
            "\n" << "Age : " << player[i].getAge() << "\n" << "Current Team : " << player[i].getCurrentTeam() << 
            "\n" << "Position : " << player[i].getPosition() << "\n" << "Status :  " << player[i].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;
}

void menu()
{
    cout << "\n\n MENU" << "\n" ;
    cout << "\n A. Store Player Information" ;
    cout << "\n B. Show Player Informaton" ;
    cout << "\n C. Delete Player Information" ;
    cout << "\n D. Display All Players Sorted By Age";
    cout << "\n Z. Exit \n\n" ;

    string x =  "";
    cin >> x ;

    if (x=="a" | x=="A")
    { 
        storeinfo() ;
    }
    else if (x=="b" | x=="B")
    {
        showinfo() ;
    }
    else if (x=="c" | x=="C")
    {
        deleteinfo() ;
    }
    else if (x=="d" | x=="D")
    {
        displayallinfo() ;
    }
    else if (x=="z" | x=="Z")
    {
        exit(0) ;
    }
    else
    {
        cout << "Invalid Choice" ;
        menu() ;
    }
}

int linsearch(string val)
{
    for (int j=0; j <= 3; j++)
    {
        if  (player[j].getLastName()==val)
         return j ;         
    }
        return -1 ;
}

void selectionSort()
{
    int i, minIndex, minValue;
    for (i = 0; i < (arrlength - 1); i++)
    {
        minIndex = i ;
        minValue = player[i].getAge() ;
        for (int index = i + 1; index < arrlength; index++)
        {
            if (player[index].getAge() < minValue)
            {
                minValue = player[index].getAge();
                minIndex = index;

            }
        }

        player[minIndex].setAge(player[i].getAge());
        player[i].getAge() == minValue;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:48:59.520

您的“用户”类非常简单，因此它不需要重载的赋值运算符，因为它的所有成员都是普通的旧数据类型或已经有自己的赋值运算符（例如字符串）。我建议从此类中删除 operator= 方法，这样您就无需在添加新成员时维护 operator= 方法。如果需要，C++ 将自动为您的类生成一个赋值运算符（按成员赋值）。当你有指针成员时，你真的只需要一个重载的赋值运算符，但我离题了。

您的选择排序功能实际上并不是对玩家进行排序。它只是重新排列每个玩家的“年龄”值。我认为这就是您想要对“玩家”数组进行实际“排序”的方法。（**请注意，这更像是“C”而不是“C++”，但请耐心等待**）。

```
void SimpleButSlowSort()
{
    bool fSorted = false;

    if (arrLength <= 1)
    {
       return;
    }

    while (fSorted)
    {
        fSorted = true;
        for (int index = 0; index < arrLength-1; index++)
        {
            if (player[index].getAge() > player[index+1].getAge())
            {
                user temp;
                temp = player[index];
                player[index] = player[index+1];
                player[index+1] = temp;
                fSorted = false;   
            }   
        }
    }
} 
```

但是如果你想要一个更 C++ 标准的排序方式，你可以使用标准库。但这要求玩家处于可以迭代的类型。例子

```
bool MyPlayerCompare(user& u1, user& u2) { return (u1.getAge() < u2.getAge()); }
std::vector<user> players;
void FasterSort()
{
    std::sort(players.begin(), players.end(), MyPlayerCompare);

} 
```

# sql - 循环结果存储过程

> ID：14492801
> 
> 赞同：1
> 
> 时间：2013-01-24T02:14:37.463
> 
> 标签：sql, stored-procedures

如何在存储过程中循环一组选定的结果并取出符合条件的结果。

如果它不需要循环或类似的东西，我将如何实现这一目标？

所以假设我们有一个这样的选择语句

```
SELECT DefaultID, Weight, Length, Height, Width FROM tblDefault 
WHERE CustomerID=@CustomerID AND  DeleteDateUTC is null 
```

但是我怎样才能只获得也符合条件的行

```
IF SELECT 1 FROM tblOther WHERE CustomerID=@CustomerID AND CustomerUserID=CustomerUserID 
AND DefaultID=@DefaultID returns 1 row 

OR SELECT 1 FROM tblOther WHERE CustomerID=@CustomerID AND DefaultID=@DefaultID returns nothing 
```

简而言之，我想选择在其中或**不在**其中`tblDefault`的行`defaultID``tblOther``CustomerUserID` **`defaultID``tblOther`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:37:41.970

要回答您的问题，请检查[EXISTS](http://msdn.microsoft.com/en-us/library/ms188336.aspx)（如果我正确理解了您的问题 - 否则请编辑您的问题以使其更有意义）

```
SELECT d.DefaultID, d.Weight, d.Length, d.Height, d.Width 
FROM tblDefault d
WHERE CustomerID=@CustomerID AND  DeleteDateUTC is null
AND (EXISTS(SELECT 1 FROM tblOther WHERE CustomerID=@CustomerID AND CustomerUserID=@CustomerUserID 
     AND DefaultID=d.DefaultID) 
OR NOT EXISTS(SELECT 1 FROM tblOther WHERE CustomerID=@CustomerID AND DefaultID=d.DefaultID)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:58:58.457

我认为这是符合您条件的查询：

```
SELECT DefaultID, Weight, Length, Height, Width
FROM tblDefault td
WHERE CustomerID=@CustomerID AND  DeleteDateUTC is null and
     ( (SELECT count(*)
        FROM tblOther t
        WHERE CustomerID=@CustomerID AND t.CustomerUserID=td.CustomerUserID AND DefaultID=@DefaultID
       ) = 1 or
       not exists (SELECT 1 FROM tblOther WHERE CustomerID=@CustomerID AND DefaultID=@DefaultID)
    ) 
```**

# c# - 重复代码：我该如何防止这种情况？

> ID：14492802
> 
> 赞同：0
> 
> 时间：2013-01-24T02:14:41.687
> 
> 标签：c#, .net, winforms

我有一个 if else 语句来确定用户是否赢得了我的井字游戏，但这是我的任务！:) 为了使代码更紧凑、更易于阅读，我有很多重复的代码块并减少了我拥有的代码量。

这是我的一些代码：

```
if (button1.Text == "X" & button2.Text == "X" & button3.Text == "X")
{
    foreach (Button button in addButton())
    {
        button1.BackColor = Color.Green;
        button2.BackColor = Color.Green;
        button3.BackColor = Color.Green;
        button.Enabled = false;
    }
}
else if (button1.Text == "X" & button4.Text == "X" & button7.Text == "X")
{
    foreach (Button button in addButton())
    {
        button1.BackColor = Color.Green;
        button4.BackColor = Color.Green;
        button7.BackColor = Color.Green;
        button.Enabled = false;
    }
}
else if (button1.Text == "X" & button5.Text == "X" & button9.Text == "X")
{
    foreach (Button button in addButton())
    {
        button1.BackColor = Color.Green;
        button4.BackColor = Color.Green;
        button7.BackColor = Color.Green;
        button.Enabled = false;
    }
} 
```

我在想也许我可以把它放在一个私有方法中？但不确定你是否真的可以而且我不知道如何调用该方法，甚至是一个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:22:11.957

试试这个：

```
Button[] greenButtons = new Button[0]; // buttons to color in green
bool enabled = true; // value of Enabled for each of addButtons() to set

if (button1.Text == "X" & button2.Text == "X" & button3.Text == "X")
{
    greenButtons = new[] { button1, button2, button3 };
    enabled = false;
}
else if (button1.Text == "X" & button4.Text == "X" & button7.Text == "X")
{
    greenButtons = new[] { button1, button4, button7 };
    enabled = false;
}
else if (button1.Text == "X" & button5.Text == "X" & button9.Text == "X")
{
    greenButtons = new[] { button1, button4, button7 };
    enabled = false;
}

foreach (Button button in addButton())
{
    button.Enabled = enabled;
}
foreach (Button button in greenButtons)
{
    button.BackColor = Color.Green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:24:47.643

使用底层数据模型来表示您的数据。假设一个整数数组。

```
int[,] board  = new int[,] {{0,0,0}, {0,0,0},{0,0,0}}; 
```

然后，无论何时`X`播放 an，都将数组中的该位置设置为 1。

每次播放 an`O`时，您都将位置设置为 -1。

要检查获胜者，您只需遍历获胜组合、交叉、向下和 2 个交叉模式，如果它们 = 3`X`则获胜，如果它们 = -3 则`O`获胜。

# c# - 模拟父类，反向多态

> ID：14492805
> 
> 赞同：0
> 
> 时间：2013-01-24T02:14:58.377
> 
> 标签：c#, polymorphism, asp.net-4.0

`DogActivityType`我有 2 个已经定义的类，我们将它们称为`HorseActivityType`. 它们具有相同的字段、相同的方法，但它们写入数据库中的 2 个不同的表，当然，它们的名称也不同。

我有一个函数，其中一个类的所有业务规则都已经工作，而另一个类使用相同的业务规则。

限制：

1.  我必须使用这两个类，因为它们在项目的其他部分中使用
2.  我无法创建一个类并添加另一列（字段）来区分这两种类型的类。
3.  我无法编辑这两个类的源代码。

. 这是我的简化版代码：

```
public doAllCalculations(){
  // retrieve collection
  foreach (DogActivityType activity in allActivities){
    // a lot of code here

    // more code... 

    createMoreOf(activity);  // this is overloaded since it needs to know which DB to write to
  }
}

// using overload for same function name
private createMoreOf(DogActivityType doggyActivity){
    /// do some specific when it is a dog
}

private createMoreOf(HorseActivityType horse){
    /// do some specific when it is a horse
} 
```

现在，问题是：`doAllCalculations()`非常广泛和复杂，在发展过程中可能会发生变化。我不想有 2 个不同的函数 ( `doAllCalculationsDOG()`and `doAllCalculationsHORSE()`) 来进行相同的分析，只是因为我需要一个用于the 类`Dog`，另一个用于`Horse`该类。有一天，项目中的某个人可能会忘记更新这两个功能或任何其他糟糕的情况......

所以，我想对这两个类使用相同的功能。所以如果我在大计算函数中编辑一个规则，我会知道它对两个类都有效。我想我最终会得到这样的结果：

```
public class AnimalActityType {

}

public doAllCalculations(){
  // retrieve collection
  foreach (AnimalActivityType activity in allActivities){
    // a lot of code here
    // more code... 
    createMoreOf(activity); 
  }
} 
```

`AnimalActityType`会模拟一个抽象的父级，我称之为反向多态......但是 DogActityType 和 HorseActityType 是如何知道这个父级的呢？我可以强迫父母吗？是否可以？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:20:16.190

> 我无法编辑这两个类的源代码。

假设这意味着你不能为我创建一个基类甚至一个接口，这说明即使你想出了一个解决方案，它也只不过是一个凌乱的黑客工作。我宁愿想办法绕过这种自我强加的限制，也不愿想出一些变态的多态形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:15:29.627

您可以尝试使用装饰器模式，但以非常不寻常的方式。

```
 class Decorator
{
    private object instance;

    public Decprator(object instance)
    {
         this.instance = instance;
    }

    public <type> SomeCommonProp
    {
      get{
        if(instance is DogActivityType)
        {
          return (instance as DogActivityType).SomeValueOrPropertyOrCall;
        }
        else
        {
          return (instance as HorseActivityType).SomeValueOrPropertyOrCall; 
        }
      }
    }
}

class MyCalculations
{
  private Decorator instance;

  public MyCalculations(Decorator inst)
  {
      instance = inst;
  }

  public <type> SomeCalculationMethod()
  {
    // here you will use instance.SomeCommonProp for your calculations
  }
} 
```

# java - 处理 JPA 的附加字段

> ID：14492806
> 
> 赞同：2
> 
> 时间：2013-01-24T02:14:59.253
> 
> 标签：java, google-app-engine, jpa, struts2

我正在使用 JPA 1、Struts2 和 AppEngine 数据存储。

我已经在我的 Web 应用程序中保存了对象。我想将布尔属性添加到我现有的实体中。因此，已保存的旧对象将具有`null`此`Boolean`属性的值。

这是我的新财产

```
private Boolean display = false;

public Boolean getDisplay() {
    return display;
}
public void setDisplay(Boolean display) {
    this.display = display;
} 
```

我将如何防止`java.lang.NullPointerException`财产`display`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:52:38.523

以下作品：

```
if (Boolean.TRUE.equals(item.getDisplay())){

} 
```

以下条件将抛出 NPE：

```
if (item.getDisplay()){ 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:54:16.040

我认为最好的解决方案是修改现有数据以与您的“代码”保持一致。

当然有讨论的可能。

*   有人会说：总是检查空值，程序健壮。
*   其他人会说：干净的代码，在这种情况下永远不可能出现 null，所以不要检查它。

# android - 如何将 Android OpenGL ES 客户端和服务器放在不同的机器上

> ID：14492809
> 
> 赞同：1
> 
> 时间：2013-01-24T02:15:06.777
> 
> 标签：android, opengl-es, libgdx

OpenGL ES 的所有介绍文本都重复了这一点，因为它基于 OpenGL，它是围绕客户端/服务器模型设计的，尽管这两个东西往往在同一台机器上。

好吧，我想把它们放在不同的机器上（在同一个本地网络上）。这在Android中可能吗？怎么做到呢？如果您能弄清楚如何将其应用到 libgdx 场景（这是我使用的游戏库）中，那么额外的荣誉。

并使用 libgdx Pixmap 或 android BitmapFactory 获取图像并渲染它；但如果流式传输 gl 调用很简单，我宁愿这样做，特别是因为它是对手机 gpu 渲染能力的更真实的测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:10:08.780

支持远程操作的协议与执行远程操作的服务器或客户端的实现之间存在差异。我认为没有现有的 Android 实现支持这样的东西。我怀疑任何“远程桌面”应用程序都只是转发 2D 图像，而不用 OpenGL 做任何事情。

也就是说，没有什么特别阻止您实现一个新的 libGDX 后端，它将“远程”OpenGL 调用到在手机上运行的服务器并将这些操作转发到本地 OpenGL 后端。（我只能自信地说，因为我没有仔细看过它......）

然而，鉴于 OpenGL 性能的更大瓶颈之一是（通常）客户端和 GPU 之间的带宽（例如，上传纹理、顶点数据、着色器等），添加网络只会加剧这个问题，并且会很难推断手机的实际性能。

您最好在桌面上运行并使用分析来确保您只使用“合理”数量的 CPU 和 GPU 资源。

# matlab - 如何将多个文件连接到一个矩阵中进行绘图

> ID：14492811
> 
> 赞同：1
> 
> 时间：2013-01-24T02:15:17.027
> 
> 标签：matlab, octave

我需要将多个文件的数据连接到一个矩阵中。到目前为止，我一直在测试加载数据的方式类似于以下内容：

```
fid = fopen('data01.txt', 'r');
raw = textscan(fid, '%d/%d/%d %d:%d:%f %f %f %f %d', 'delimiter', ',');
m = cellfun(@double, raw, 'UniformOutput', false);
value_of_interest = m{:,10} 
```

...但是我在磁盘上的数据集是许多文件，并且都存在于一个目录中。我更愿意参考这个目录的特定路径，而不是将我的脚本放在那里。如何修改我的脚本，以便它加载所述文件夹中所有文件的所有数据？

到目前为止，我有这个：

```
dirname = uigetdir;
files = dir(dirname);
fileIndex = find(~[files.isdir]);

for i = 1:length(fileIndex)
    fileName = files(fileIndex(i)).name;
    fid = fopen(fileName, 'r');
    raw = textscan(fid, '%d/%d/%d %d:%d:%f %f %f %f %d', 'delimiter', ',');
    time = [m{:,4}, m{:,5}, m{:,6}];  %needs to contain a float
    converted_time = ((m{:,4} *  3600.0) + (m{:,5} * 60.0) + m{:,6}); %hh:mm:ss -> seconds
    values = power(m{:,10}, 2); 
    values(values <= thresh) = 0;
    % need to concat into the var 'values' here... also need to accumulate the time variable
end 

plot(converted_time, values); 
```

...但我需要把两者放在一起。

编辑：我应该提到我可能会用完内存，稍后将在下面对我选择的答案的评论中对此进行解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:42:22.400

首先，再看看您是如何定义`fileName`要打开的文件的。相反，您应该尝试 `fileName = [dirname, '\', files(fileIndex(i)).name];`，因为`name`字段`files`不会包含完整路径。这将解决您引用不在当前路径中的文件列表的问题。

现在，为了避免记住所有这些文件中的所有数据，我们可以*在循环中*为每个文件执行此工作：

```
...
    plot(converted_time, values);
    hold('on');
end 
```

短命令`hold('on');`，通常编写简单地`hold on;`修改绘图轴，以便可以绘制后续数据而不会删除任何先前的行。

# xcode4.5 - 如何复制和粘贴相同格式的评论 - Xcode

> ID：14492821
> 
> 赞同：2
> 
> 时间：2013-01-24T02:16:35.617
> 
> 标签：xcode4.5, copy-paste

我想将我的班级描述注释（使用键盘标签按钮对齐）复制并粘贴到另一个班级。

我已经使用 cmd+c 和 cmd+v 按钮来执行上述操作。但是注释/文本对齐方式似乎是不同的格式。

**已复制原始评论** ![在此处输入图像描述](../Images/23a5681804b90db727c68ee8cff781e4.png)

**粘贴后显示的评论** ![在此处输入图像描述](../Images/c5024345ec1002afb7e454b80fe3b4ca.png)

那么如何在 Xcode 中以相同格式复制和粘贴注释

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T02:18:59.023

编辑 -> 粘贴并保留格式

![在此处输入图像描述](../Images/d856214213b3fd2f9e89008413543e9a.png)

# php - mod_rewrite 的简单通配符？

> ID：14492822
> 
> 赞同：1
> 
> 时间：2013-01-24T02:16:39.093
> 
> 标签：php, html, apache, .htaccess, mod-rewrite

mod_rewrite 的新手。我只是想做这样的事情：

```
# Turn on the rewriting engine
RewriteEngine On    

# use item php page to show the item
RewriteRule    ^parts/./[.]$    parts/item.php?id=$1    [NC] 
```

所以当一个人输入 example.com/parts/anything/anything 时，URL 将转到

example.com/parts/item.php?id=the2ndanything

据我了解，句号表示任何字符。此外，我尝试在句号之后添加一个 + （这应该意味着任何东西），但这仍然没有奏效。

顺便说一句，我在一个临时 URL 上，因为我还没有更改我以前的网络主机，因此我的实际完整 URL 中有一个 ~。我希望这不是 mod_rewriting 的问题，因此是阻止它工作的问题。.htaccess 文件位于网站 index.html 的根文件夹中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T02:18:39.047

`.`确实表示*任何字符*，但您必须跟随它`+`（一个或多个）或`*`（零个或多个），并且您必须将其捕获`()`以用作`$1`。用于`[^/]+`匹配所有字符，但不包括`/`匹配但不捕获 . 之后的第一个目录`parts/`。

```
RewriteEngine On
# (.*) captures the second "anything" in $1
RewriteRule ^parts/[^/]+/(.*)$ parts/item.php?id=$1 [L] 
```

# msbuild - 如何使用 MSBuild 编译 WinRT？

> ID：14492824
> 
> 赞同：1
> 
> 时间：2013-01-24T02:16:42.767
> 
> 标签：msbuild

我有一个在 Visual Studio 2012 中创建的类库程序集。我想知道应该使用哪些参数来确保类库在 ARM、x86 和 x64 下适用于 WinRT。我目前将项目属性定义为 AnyCPU。

我需要做的就是定义 NETFX_CORE 常量吗？有没有我为 WinRT 或 CPU 指定的地方？

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe MyClassLibrary.csproj
/t:Rebuild /p:Configuration=DEBUG /p:DefineConstants="NETFX_CORE" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:16:59.583

WinRT 和桌面应用程序一样——参数是`/p:Platform=<name>`. 例如：

```
msbuild MyClassLibrary.csproj /p:Configuration=Debug /p:Platform=ARM 
```

# php - 从工作时间框架中减去午餐时间

> ID：14492827
> 
> 赞同：1
> 
> 时间：2013-01-24T02:17:20.543
> 
> 标签：php, javascript, jquery, html

我目前有一个表格，可以专门询问用户以下企业的工作时间是我正在使用的。

```
<tr>
        <td colspan="2"><input type="radio" name="mon" value="1"> Monday with No Lunch Break</td>
        <td colspan="4"><input type="radio" name="mon" value="2"> Monday with  Lunch Break</td>
    </tr>
    <tr>
        <td>Start time :AM<input type="time"  name="mon_strt_1" class="hour_field"></td>
        <td>End time :PM<input type="time" name="mon_end_1" class="hour_field"></td>
        <td>Start time :AM<input type="time"  name="mon_strt_2a" class="hour_field"></td>
        <td>End time :AM<input type="time" name="mon_end_2a" class="hour_field"></td>
        <td>Start time :PM<input type="time" name="mon_strt_2b" class="hour_field"></td>
        <td>End time :PM<input type="time"  name="mon_end_2b" class="hour_field"></td>
    </tr> 
```

如您所见，我问用户是否在周一有午休时间，如果是这样，他会填写正确的字段并单击单选按钮。我想就如何让用户更轻松地寻求任何帮助。一旦他进入一个时间范围，比如*上午 8:00 到下午 6:00，然后将在提交后进入中午**12:00 到下午 1:00*的午休时间，将返回**工作时间：上午 8:00 到下午 12:00，下午 2:00 到下午 6:00**，这是我使用的插件[的链接](http://fgelinas.com/code/timepicker/)，但我无法以多种形式使用它。请注意，我还将时间设置为从星期二到星期五。然后坐下来晒太阳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:49:35.940

非常简单。html和javascript：

```
<script>
function disablebreaks(disable){
    document.getElementsByName('break_strt')[0].disabled=disable;
    document.getElementsByName('break_end')[0].disabled=disable;
}
</script>
<form action="action.php" method="post">
<input type="radio" name="mon_break" value="false" onchange="disablebreaks(true)" />No break
<input type="radio" name="mon_break" value="true" onchange="disablebreaks(false)" />break
<input type="time" name="mon_strt" />
<input type="time" name="mon_end" />
<input type="time" name="break_strt" />
<input type="time" name="break_end" />
</form> 
```

php 在 action.php 中：

```
<?php
echo $_POST['mon_break']?"working hrs: {$_POST['mon_strt']} to {$_POST['break_strt']}, {$_POST['break_end']} to {$_POST['mon_end']}":"working hrs: {$_POST['mon_strt']} to {$_POST['mon_end']}";
?> 
```

这是未经测试的，如果发生错误，请告诉我。

# angularjs - AngularJS：ng-switch-when 与 OR

> ID：14492830
> 
> 赞同：35
> 
> 时间：2013-01-24T02:17:38.683
> 
> 标签：angularjs, ng-switch

ng-switch-when 是否可以有 OR？

```
<div ng-repeat="w in windows" ng-show="visibleWindowId == w.id" ng-switch="w.type">
    <div ng-switch-when="val1 **OR** val2">
        sup
    </div>
</div> 
```

如果没有，如何实现上述目标？

谢谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-24T20:01:26.860

`ngswitch`仅允许您比较单个条件。

`ng-if`我您正在寻找可以在[1.1.5 版](http://blog.angularjs.org/2013/05/angularjs-107-monochromatic-rainbow-and.html)中使用的多种条件

[参考](https://stackoverflow.com/questions/16741949/ngif-and-ngswitch-angularjs)

*重要的是要注意使用`ng-if`和`ng-switch` [从 DOM](http://docs.angularjs.org/api/ng.directive:ngSwitch)结构中删除元素，而不是显示和隐藏。*

*当您遍历 DOM 以查找元素时，这一点很重要。*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-01-15T19:11:16.540

现在可以使用`ng-switch-when-separator`1.5.10 中添加到 Angular 文档中的内容：

```
<div ng-repeat="w in windows" ng-show="visibleWindowId == w.id" ng-switch="w.type">
    <div ng-switch-when="val1|val2" ng-switch-when-separator="|">
        sup
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-21T03:27:25.167

这也可以

```
<div ng-repeat="w in windows" ng-switch="w.type == 'val1' || w.type == 'val2'">
  <div ng-switch-when="true">
    sup
  </div>
</div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-28T18:43:28.983

我创建了一个简单的指令来代替它，`ngSwitchWhen`它允许您为单个标签指定多个案例。它还允许您指定动态值而不是纯静态值。

需要注意的是，它只在编译时评估一次表达式，因此您必须立即返回正确的值。出于我的目的，这很好，因为我想使用应用程序中其他地方定义的常量。可能可以对其进行修改以动态重新评估表达式，但这需要使用`ngSwitch`.

我使用的是 angular 1.3.15，但我使用 angular 1.4.7 进行了快速测试，它在那里也运行良好。

[Plunker 演示](http://plnkr.co/edit/LD1ovMiVASsFoxOWBSDO?p=preview)

### 编码

```
module.directive('jjSwitchWhen', function() {
    // Exact same definition as ngSwitchWhen except for the link fn
    return {
        // Same as ngSwitchWhen
        priority: 1200,
        transclude: 'element',
        require: '^ngSwitch',
        link: function(scope, element, attrs, ctrl, $transclude) {
            var caseStms = scope.$eval(attrs.jjSwitchWhen);
            caseStms = angular.isArray(caseStms) ? caseStms : [caseStms];

            angular.forEach(caseStms, function(caseStm) {
                caseStm = '!' + caseStm;
                ctrl.cases[caseStm] = ctrl.cases[caseStm] || [];
                ctrl.cases[caseStm].push({ transclude: $transclude, element: element });
            });
        }
    };
}); 
```

### 用法

控制器

```
 $scope.types = {
      audio: '.mp3', 
      video: ['.mp4', '.gif'],
      image: ['.jpg', '.png', '.gif'] // Can have multiple matching cases (.gif)
  }; 
```

模板

```
 <div ng-switch="mediaType">
    <div jj-switch-when="types.audio">Audio</div>

    <div jj-switch-when="types.video">Video</div>

    <div jj-switch-when="types.image">Image</div>

    <!-- Even works with ngSwitchWhen -->
    <div ng-switch-when=".docx">Document</div>

    <div ng-switch-default>Invalid Type</div>
  <div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T03:07:04.673

您可以使用`ng-class`，以便您可以`or`在表达式中使用运算符。此外，angular-ui 有`if`指令。

# javascript - Facebook auth.statusChange 在 IE 中的对话框后未触发

> ID：14492833
> 
> 赞同：3
> 
> 时间：2013-01-24T02:18:02.590
> 
> 标签：javascript, html, facebook, callback, facebook-javascript-sdk

我正在使用 FB JS auth SDK 的网站上工作，仅在用户单击“使用 Facebook 登录”按钮时登录用户，而不是在页面加载或任何内容时自动登录用户。因此，我在 FB.init 中将“状态”设置为 false。

以下是我的实现：

```
window.fbAsyncInit = function() {
    FB.init({ 
        appId: '73092430896', 
        status: false, 
        cookie: true, 
        xfbml: true, 
        oauth: true,
    });  

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function(response) {
        console.log('login called.');
        if (response.authResponse) { 
            console.log('repsonse is set.');                    
            if(typeof APPJS.login != 'undefined' && typeof APPJS.login.loginCallback == 'function'){
                console.log('login.callback exists.');
                APPJS.login.loginCallback(response);
            }   
        }
    });            
}; 
```

问题是，在 IE 中没有触发 auth.statusChange 回调（我尝试过的任何版本），因此我的用户没有通过我的自定义 JS 函数登录。它在 Chrome、Safari 和 Firefox 中运行良好。这与在这些浏览器中登录/退出 Facebook 无关，我尝试过登录和退出 Facebook，但 IE 仍然没有调用回调。

任何帮助表示赞赏。

**更新：**添加通道参数似乎无法解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:57:30.457

请参阅此页面上的“检查页面加载时的用户状态”部分：http: [//developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

它说你应该在 FB.init 调用中设置“状态：真”。

# python - Python 的跟踪模块和文件路径

> ID：14492837
> 
> 赞同：2
> 
> 时间：2013-01-24T02:18:48.867
> 
> 标签：python, trace, filepath

我正在使用[python 的`trace`模块](http://docs.python.org/2/library/trace.html)来跟踪一些代码的执行。我注意到，当稍后打印执行时，它以以下形式打印（下面是最小的工作示例）：

```
<filename>(<line number>): <line of code> 
```

可以获得完整的（绝对或相对）文件路径，而不仅仅是文件名。在调用的某个地方会有一个标志`trace.Trace`应该允许我这样做是有道理的，但我似乎无法在文档中找到任何这样的参数。

如果这样的标志不存在，我将如何获取文件路径？我想我可以检查 中的所有目录`sys.path`，但是我将如何处理两个不同目录具有相同名称的文件的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:27:42.160

这不是很明显，但我发现如果我使用`countfuncs`in 参数`trace`，或者`--listfuncs`如果我`trace`从命令行使用参数，我会得到完整的路径名。因此，对于程序：

```
import trace
from recurse import recurse

tracer = trace.Trace(count=False, trace=True, countfuncs=True)
tracer.run('recurse(2)')
tracer.results().write_results() 
```

...（使用 Doug Hellmann's example from [here](http://www.doughellmann.com/PyMOTW/trace/)）我得到以下输出：

```
functions called:
filename: <string>, modulename: <string>, funcname: <module>
filename: C:\Python33\lib\encodings\cp850.py, modulename: cp850, funcname: IncrementalEncoder.encode
filename: C:\Python33\lib\trace.py, modulename: trace, funcname: _unsettrace
filename: C:\usr\sjl\dev\test\python\recurse.py, modulename: recurse, funcname: recurse 
```

这不是您要查找的内容，因为您可以看到它忽略了跟踪代码行的指令，因此它没有在这些代码行旁边提供文件路径。但是，它确实可以准确地告诉您 Python 脚本正在使用哪些文件。

# mysql - 仅更改一列值的插入

> ID：14492839
> 
> 赞同：0
> 
> 时间：2013-01-24T02:18:53.897
> 
> 标签：mysql

我想做这样的事情

```
Insert into abc(col1, col2, col3) select col1, 1, col3 from xyz where somecondition
Insert into abc(col1, col2, col3) select col1, 2, col3 from xyz where somecondition
Insert into abc(col1, col2, col3) select col1, 3, col3 from xyz where somecondition
Insert into abc(col1, col2, col3) select col1, 4, col3 from xyz where somecondition
... 
```

所以只有第二列的值在变化，其他的都是一样的。

有没有更好或更紧凑的方法来完成上述操作？可能是一个查询！

我正在使用 MySql

**编辑：**

我在存储过程中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:41:28.610

如果`somecondition`是相同的并且您需要序列号，`col2`您可以执行以下操作：

```
INSERT INTO abc(col1, col2, col3)
SELECT col1, @n := @n + 1, col3
FROM xyz, (SELECT @n:= 0) n
WHERE somecondition 
```

**更新**

如果您`WHERE`应用的条件`xyz`确保只返回一行并且您的`xyz`表有超过 9 条记录（尽管您可以`CROSS`使用任何其他表），您可以利用`CROSS JOIN`AND使用单个语句`LIMIT`复制您的行 N（在示例中为 9）次，例如`INSERT-SELECT`这个：

```
INSERT INTO abc(col1, col2, col3)
SELECT t1.col1, @n := @n+1, t1.col3 
  FROM xyz AS t1 CROSS JOIN xyz AS t2,(SELECT @n:= 0) n 
WHERE t1.col2=2 LIMIT 9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:24:47.050

您可以创建一个循环进入您的查询的存储过程，如下所示：

```
CREATE PROCEDURE doiterate(p1 INT)
BEGIN
  label1: LOOP
    SET p1 = p1 + 1;
    IF p1 < 10 THEN
      ITERATE label1;
    END IF;
    LEAVE label1;
  END LOOP label1;
  SET @x = p1;
END; 
```

我希望这可能会有所帮助。

# jquery - 将适当的 html 文档操作为字符串并转换回字符串

> ID：14492845
> 
> 赞同：1
> 
> 时间：2013-01-24T02:19:19.107
> 
> 标签：jquery, html, parsing

以前，当我需要在字符串中操作某些 html 的内容时，我会做这样的事情

```
$('<div>').html(someHtmlString).find('#name').text("George").end().html() 
```

这对 html 片段很有用，但在这种特殊情况下，我将 iframe 的内容作为字符串获取 - 所以它是一个代表完整 html**文档**的字符串，我需要以相同的方式操作它。这个技巧，甚至只是在 jQuery 中包装字符串不再有效。

[这是一个演示问题的 jsbin](http://jsbin.com/ecaduc/2/edit)

```
html = """
<html>
<head>
  <style>* { box-sizing: border-box; }</style
</head>
<body style="max-height: 750px">
  <style> body { background-color: 'lavender'; }</style>
  <div>
    <p>Hi</p>
    <p id="name">Your Name</p>
  </div>
</body>
</html>
"""

$html = $(html)
$html.find('#name').text("George")

console.log $html.html() 
```

如何解析和操作完整的 html 文档？

请注意，头部可能包含样式元素，而主体可能具有我不想丢失的属性。当文档包含 svg 时，我也看到奇怪的序列化。

如果有另一个库可以更有意义地引入这里，我并不热衷于 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:48:05.333

最理智的方法可能只是用您的字符串创建一个文档（请参阅[如何使用 JavaScript 创建文档对象](https://stackoverflow.com/questions/8227612/how-to-create-document-objects-with-javascript)），操作它（jQuery 是否可以操作它，我不确定，但我认为可以）然后抓取您需要的任何内容。您*必须*假设 html 是正确的，或者至少解析为（尽可能相同）DOM 树。我注意到在您的示例中，head 标签有一个带有无效结束标签的样式标签，所以我不知道它在所有正在考虑的浏览器中是如何工作的。

（抱歉，还没有工作示例。我今天早上有点忙，但我只是想把这个想法放在那里）。

# java - 从 JFrame 中删除 JPanel，太慢了

> ID：14492848
> 
> 赞同：2
> 
> 时间：2013-01-24T02:19:39.690
> 
> 标签：java, swing, jframe, jpanel, layout-manager

这是代码的样子：

```
class Main extends JFrame {
   public MyPanel panel;

   public Main() {
      //all the frame init stuff
      panel = new MyPanel(this);
      Panel badPanel = new Panel();//this makes the remove method go veryy slow
      //add(badPanel, BorderLayout.SOUTH);//
      JPanel goodPanel = new JPanel();
      add(goodPanel, BorderLayout.SOUTH); // this fixes the slowness of the remove method in calculate()
      add(panel, BorderLayout.CENTER);
   }

    public static void main(String[] args) {
       SwingUtilities.invokeLater(new Runnable() {
          public void run() {
             Main main = new Main();
          }
       });
    }
}

class MyPanel extends JPanel {

   Main main;

   public MyPanel(Main main) {
       this.main = main;
       //init everything
   }

   public void calculate() {
       MyPanel newPanel = new MyPanel(main);      
       //do some computation
      main.remove(main.panel);
      main.add(newPanel, BorderLayout.CENTER);
      main.panel = newPanel;
      main.revalidate();
   }
} 
```

所以一切正常，只是由于某种原因，当它到达`remove()`方法时，执行时间太慢了，它至少暂停 5 秒，然后完成其余的行。我尝试将其注释掉，所以我知道这是导致问题的原因。

有谁知道发生了什么？

编辑：所以这基本上是怎么回事.. 老实说，我不知道我还需要向您展示什么，代码中的其他任何内容都与我遇到的问题无关。如果我注释掉删除方法，一切都会很快，但是当它在那里时，它会非常缓慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:22:03.947

SSCCE 速度测试，用于`CardLayout`显示 4 张图像（一系列 6 张）。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;
import java.text.DecimalFormat;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class CardLayoutAnimation {

    public static void main(String[] args) throws Exception {
        URL url1 = new URL("http://i.stack.imgur.com/XUmOD.png");
        final Icon icon1 = new ImageIcon(url1);
        URL url2 = new URL("http://i.stack.imgur.com/zKyiD.png");
        final Icon icon2 = new ImageIcon(url2);
        URL url3 = new URL("http://i.stack.imgur.com/4maMm.png");
        final Icon icon3 = new ImageIcon(url3);
        URL url4 = new URL("http://i.stack.imgur.com/wn9V5.png");
        final Icon icon4 = new ImageIcon(url4);
        Runnable r = new Runnable() {

            @Override
            public void run() {
                final CardLayout cards = new CardLayout();
                final JPanel gui = new JPanel(cards);
                gui.setBorder(new EmptyBorder(100,300,100,300));
                gui.setBackground(Color.WHITE);

                gui.add(new JLabel(icon1), "label " + 1);
                gui.add(new JLabel(icon2), "label " + 2);
                gui.add(new JLabel(icon3), "label " + 3);
                gui.add(new JLabel(icon4), "label " + 4);
                gui.add(new JLabel(icon3), "label " + 5);
                gui.add(new JLabel(icon2), "label " + 6);

                ActionListener animate = new ActionListener(){

                    long lastTime = -1;
                    int frameCount = 0;
                    String timeString;
                    DecimalFormat format = new DecimalFormat("0.00");

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        long time = System.nanoTime();
                        //if (frameCount%100==0) {
                          //  System.out.println("animate! " + (time - lastTime) + "  \t#: " + frameCount);
                        //}
                        if (lastTime<0) {
                            lastTime = time;
                            timeString = "00.00";
                        } else if(time-lastTime>1000) {
                            long duration = time-lastTime;
                            double fps = 1000000000d*(double)frameCount/(double)duration;
                            timeString = format.format(fps);
                            frameCount = 0;
                            lastTime = time;
                            System.out.println(timeString);
                        }
                        frameCount++;
                        cards.next(gui);
                    }
                };
                Timer timer = new Timer(5,animate);
                timer.start();

                JOptionPane.showMessageDialog(null, gui);
                timer.stop();;
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

## 结果 FPS

```
run:
54.82
123.43
556.57
170.96
170.80
170.18
170.84
171.09
169.93
169.03
173.09
170.05
170.75
171.20
170.35
170.91
170.17
146.58
170.44
170.61
171.01
170.73
170.14
171.13
126.81
208.12
170.40
169.97
170.83
171.55
170.39
.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:32:48.623

我没有问题...

```
public class BadPaint10 {

    public static void main(String[] args) {
        new BadPaint10();
    }

    public BadPaint10() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                final JPanel panel = new JPanel();
                panel.setBackground(Color.RED);

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(panel);

                JButton change = new JButton("Switch");
                change.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        long start = System.currentTimeMillis();
                        frame.remove(panel);
                        long end = System.currentTimeMillis();
                        JPanel newPanel = new JPanel();
                        newPanel.setBackground(Color.BLUE);
                        frame.add(newPanel);
                        frame.validate();
                    }
                });
                frame.add(change, BorderLayout.SOUTH);
                frame.setSize(100, 100);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

我认为您需要提供一个示例来说明您的问题

# javascript - Three.js/Physijs 中对象的吸引力/排斥力

> ID：14492850
> 
> 赞同：1
> 
> 时间：2013-01-24T02:19:57.607
> 
> 标签：javascript, 3d, three.js, simulation, physics

我正在从事一个额外的化学学分项目，该项目涉及化合物的原子结构。我试图对中心原子周围的元素进行 3D 模拟。比如NF3中的F包围N。

我试图对周围的元素施加力，以便它们可以将彼此推到 3D 空间中的正确位置。这将代表指定化合物的原子结构。目前，我的模拟器构建了化合物，但周围的元素在空间中摇摆不定。如何对这些会影响其他元素的对象施加排斥力？我尝试过使用 .ApplyForce、.ApplyImpulse 等，这些似乎是正确的使用方法，但它们不起作用。也许我需要对其他对象应用一种方法以使它们受到这种力的影响？

任何帮助都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:44:56.090

有两种选择：

`applyImpulse()`如果您希望能够将自旋引入对象，这是正确的方法。它有两个参数：一个表示您正在应用的力的向量，以及一个表示您正在应用它的对象上的位置的向量。

否则，您想使用`applyCentralImpulse()`. 作为参数，它需要一个向量来表示你施加的力。

在所有情况下，向量都是一个 3 值向量，是 的一个实例`THREE.Vector3`。您不需要对两个对象施加力。也就是说，除非你想模拟牛顿第三定律。换句话说，如果你想要一个对象被推送，你不需要另一个对象来做推送。

# linux - 递归删除每个目录中除一定数量外的所有文件

> ID：14492851
> 
> 赞同：0
> 
> 时间：2013-01-24T02:19:59.643
> 
> 标签：linux, bash, gnu

我有大量包含在测试目录中的文件。我需要为我的应用程序保留目录结构，但想精简文件以加快测试速度。我想将一个目录可以拥有的文件数限制为 3。我该如何在 linux 中做到这一点？

为了澄清我想要完成的任务，Python 中的一个解决方案：

```
import sys, os
for root, dirs, files in os.walk(sys.argv[1]):
    for index, file in enumerate(files):
        if index > int(sys.argv[2]) - 1: os.remove(os.path.join(root, file)) 
```

用法：

```
python thinout.py /path/to/thin\ out/ <maximum_number_of_files_per_directory> 
```

例子：

```
python thinout.py testing\ data 3 
```

我发现[了一个关于为一个目录执行此操作的问题，但不是递归](https://stackoverflow.com/questions/4447326/how-to-delete-all-files-except-the-latest-three-in-a-folder)的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:39:28.620

我会在 bash 中做这样的事情：

```
for dir in `find . -type d`; pushd $dir; rm `ls | awk 'NR>3'`; popd; done; 
```

或者这个版本可能会更好：

```
for dir in `find . -type d`; pushd $dir; rm `find . -maxdepth 1 -type f | tail -n +3`; popd; done; 
```

当然 - 只是随机删除目录中除前 3 个文件之外的所有文件总是有点冒险的。买家小心...

顺便说一句，我自己没有测试这个。只是输入了想到的内容。您可能需要对其进行一些调整才能使其正常工作。再次，买家要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:55:11.533

这个相当长的序列将适用于包含空格等的文件，并且只需将前三个按字母顺序排序的文件留在每个子目录中。

**编辑：**应用[mklement](https://stackoverflow.com/users/45375/mklement)的改进来应对需要转义的目录。

```
find /var/testfiles/ -type d -print0 | while IFS= read -r -d '' subdir; \
do cd "$subdir"; find . -mindepth 1 -maxdepth 1 -type f -print0 | \
sort --zero-terminated | tr '\0' '\n' | tail -n+4 | tr '\n' '\0' | \
xargs --null --no-run-if-empty rm ; cd "$OLDPWD" ; done 
```

由于我的 tail 版本不支持行终止符的`--zero`or`--null`标志，因此我不得不使用`tr`. 欢迎提出改进建议。

# android - 我可以在 run() 线程方法中放置几个 onclick 侦听器吗？

> ID：14492852
> 
> 赞同：1
> 
> 时间：2013-01-24T02:20:09.540
> 
> 标签：android, sockets, onclick

我在 android 的套接字程序中的 run() 线程方法中放置了几个 onclick 方法。

他们似乎没有工作。可以将这些 onclick 侦听器放在 run() 方法中，或者现在可以。不知道为什么按钮在单击它们时没有产生响应。消息未发送

这是我正在使用的两个 onclick 侦听器。一个是 sendA，另一个是 sendB，他们发送短信 testA 和 testB

```
public class ClientThread implements Runnable {

    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            Socket socket = new Socket(serverAddr, 8080);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    final PrintWriter out = new PrintWriter(
                        new BufferedWriter(new OutputStreamWriter(
                            socket.getOutputStream())), true);
                    sendA.setOnClickListener(new View.OnClickListener() {

                        // ananamous inner class override for on click
                        public void onClick(View v) {
                            out.println("testA");
                        }
                    });
                    sendB.setOnClickListener(new View.OnClickListener() {

                        // ananamous inner class override for on click
                        public void onClick(View v) {
                            out.println("testB");
                        }
                    });
                    // where you issue the commands
                    // out.println("testX");
                    Log.d("ClientActivity", "C: Sent.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:45:58.327

我做了一个简单的演示，它可以工作；

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".HelpActivity" >

<Button
    android:id="@+id/a"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="A" />
<Button
    android:id="@+id/b"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/a"
    android:text="B" />

</RelativeLayout> 
```

* * *

```
public class HelpActivity extends Activity {

private Button aBtn;
private Button bBtn;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_help);
    aBtn = (Button) findViewById(R.id.a);
    bBtn = (Button) findViewById(R.id.b);
    new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            aBtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.v("a", "a");
                }
            });
            bBtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {   
                    Log.v("b", "b");
                }
            });

        }
    }).start();
}

} 
```

当我单击按钮时，LogCat 中有日志！ ![LogCat 视图](../Images/026d9b9cd8d2a176454f87759e4985c5.png)

所以，也许你的情况是由序列引起的。我的意思是当你点击按钮时，监听器没有附加到按钮上。

好吧，如果你坚持在主线程上设置监听器，你可以使用 handler [这个 Handler 类应该是静态的，否则可能会发生泄漏： IncomingHandler](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:09:24.153

是的，您可以再次使用可运行线程中的 onclick 侦听器

它对我有用

```
 public class sendLogs implements Runnable{ 
    @Override
    public void run() {

    //your other codes

    runOnUiThread(new Runnable() {
     @Override
     public void run() {
    //place your onclick listener method here...
    }
    } 
```

# ember.js - 新版本的 Rake Pipeline 不喜欢我的 config.ru

> ID：14492856
> 
> 赞同：1
> 
> 时间：2013-01-24T02:20:33.503
> 
> 标签：ember.js, rack, rake-pipeline

我正在开发一个使用[ember-skeleton](https://github.com/interline/ember-skeleton)构建的 Ember.js 项目（大约 0.9.8.x，如果重要的话） 。我最近犯了随意运行的错误，`bundle update`我的[rake-pipeline](https://github.com/livingsocial/rake-pipeline)版本从 0.6.0 跳到了 0.8.0，当我向开发服务器发出请求时出现此错误：

> NoMethodError at /
> undefined method `invoke' for "Assetfile":String

具体的错误在这里：

> ~/.rvm/gems/ruby-1.9.3-p125@project/bundler/gems/rake-pipeline-ee992cbcda51/lib/rake-pipeline/middleware.rb：调用中，第 32 行

但我猜它的真正开始是在前几行`config.ru`：

```
require 'rake-pipeline'
require 'rake-pipeline/middleware'
use Rake::Pipeline::Middleware, 'Assetfile' 
```

堆栈跟踪似乎根本没有触及我的代码；事实上，如果我正确理解这个错误，它甚至不会触及我的`Assetfile`.

这是一个错误，还是 rake-pipeline 发生了一些变化？降级 rake-pipeline 会更容易（如果是，降级到哪里？）还是有什么我可以修复的`config.ru`？

ETA：我一次跳回`rake-pipeline`项目历史几十个提交。回到[10 月底](https://github.com/livingsocial/rake-pipeline/commit/986129d378a6de2ff43df8d7439acb178a162a81)，我得到了不同的错误：

> TypeError at /
> can't convert Fixnum into String
> 
> ~/.rvm/gems/ruby-1.9.3-p125@project/bundler/gems/rake-pipeline-986129d378a6/lib/rake-pipeline/manifest_entry.rb:9:in `parse'

当我一直跳到[2012 年 4 月](https://github.com/livingsocial/rake-pipeline/commit/543f4322fe70facee9572d29ddabf7f090dad68a)时，我得到了一个工作版本。所以我的项目恢复了业务，但我很想知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:01:08.170

问题是[rake-pipeline 现在需要一个 Rake::Pipeline::Project 对象作为参数，而不是字符串。](https://github.com/listrophy/ember-skeleton/commit/9da40a049d6d8be37b29742934555f70af444a47)用它替换第三`config.ru`行使其工作：

```
use Rake::Pipeline::Middleware, Rake::Pipeline::Project.new('Assetfile') 
```

谢谢，GitHub！

# html - 更改当前使用无序列表和绝对定位的 3 列布局

> ID：14492863
> 
> 赞同：0
> 
> 时间：2013-01-24T02:21:07.693
> 
> 标签：html, css, standards, frontend

我正在寻找实现此处显示的布局的最有效方法：http: [//cl.ly/image/0n0a293Z0O2m](http://cl.ly/image/0n0a293Z0O2m)

目前代码看起来像这样。

```
<ul class="stats left">
  <li>168/299</li>
  <li>10</li>
  <li>56.2%</li>
  <li>11</li>
  <li>71</li>
</ul>

<ul class="stats right">
  <li>308/515</li>
  <li>21</li>
  <li>59.8%</li>
  <li>15</li>
  <li>80</li>
</ul>

<ul class="labels">
  <li>Completions/Attempts</li>
  <li>Touchdowns</li>
  <li>Completion %</li>
  <li>Interceptions</li>
  <li>Longest Pass</li>
</ul> 
```

我选择这样做的方式是使每个`stats` `UL's`左侧浮动，然后绝对定位`labels UL`以坐在其他两个顶部`UL's`

这是一个[JSFiddle](http://jsfiddle.net/K3p4E/)我目前正在做的事情。我只是想用最简单最实用的方法来实现相同的外观，但不要绝对定位，最好不要桌子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:38:52.027

第二次编辑

[http://jsfiddle.net/K3p4E/38/](http://jsfiddle.net/K3p4E/38/)

CSS

```
#container {
    width:90%;
    text-align: center;
}
ul.stats {
    background: #ececec;
    width: 33%;
    float:left;
}
ul.stats > li, ul.labels > li {
    height: 30px;
    border-bottom: 1px solid #ddd;
    line-height: 30px;
}
ul.labels > li {
    font-weight: bold;
}
ul.labels {
    float:left;
    width: 34%;
}
#container h1 {
    width:100%;
    background:#000;
    color:#0FF;
    line-height: 30px;
    clear:both;
} 
```

HTML

```
<div id="container">
     <h1>Passing</h1>
    <ul class="stats">
        <li>168/299</li>
        <li>10</li>
        <li>56.2%</li>
        <li>11</li>
        <li>71</li>
    </ul>
    <ul class="labels">
        <li>Completions/Attempts</li>
        <li>Touchdowns</li>
        <li>Completion %</li>
        <li>Interceptions</li>
        <li>Longest Pass</li>
    </ul>
    <ul class="stats">
        <li>308/515</li>
        <li>21</li>
        <li>59.8%</li>
        <li>15</li>
        <li>80</li>
    </ul>
     <h1>Rushing</h1>
    <ul class="stats">
        <li>168/299</li>
        <li>10</li>
        <li>56.2%</li>
        <li>11</li>
        <li>71</li>
    </ul>
    <ul class="labels">
        <li>Completions/Attempts</li>
        <li>Touchdowns</li>
        <li>Completion %</li>
        <li>Interceptions</li>
        <li>Longest Pass</li>
    </ul>
    <ul class="stats">
        <li>308/515</li>
        <li>21</li>
        <li>59.8%</li>
        <li>15</li>
        <li>80</li>
    </ul>
</div> 
```

第一次编辑

将 css 更改为：

```
ul.labels > li {
font-weight: bold;
width:300%;
}
ul.labels {
position:relative;
left:-30%;
float:left;
text-align: center;
width: 30%;
} 
```

不确定这是否是您的意思。中心横跨所有三个 ul，但是，这与您的原始帖子非常相似，但有一些优点，特别是流畅的布局。[http://jsfiddle.net/K3p4E/29/](http://jsfiddle.net/K3p4E/29/)

原帖：

摆弄宽度和事物并将#content居中，这应该为您完成。

```
<div id="container">
<ul class="stats">
    <li>168/299</li>
    <li>10</li>
    <li>56.2%</li>
    <li>11</li>
    <li>71</li>
</ul>
<ul class="labels">
    <li>Completions/Attempts</li>
    <li>Touchdowns</li>
    <li>Completion %</li>
    <li>Interceptions</li>
    <li>Longest Pass</li>
</ul>
<ul class="stats">
    <li>308/515</li>
    <li>21</li>
    <li>59.8%</li>
    <li>15</li>
    <li>80</li>
</ul>
</div> 
```

css

```
#container {
    width:90%;
}
ul.stats {
    background: #ececec;
    width: 30%;
    text-align: center;
    float:left;
}
ul.stats > li, ul.labels > li {
    height: 30px;
    border-bottom: 1px solid #ddd;
    line-height: 30px;
}
ul.labels > li {
    font-weight: bold;
}
ul.labels {
    float:left;
    text-align: center;
    width: 30%;
} 
```

虽然你应该重新考虑一张桌子。这种东西就是他们的目的。

# php - 如何将 HTTP POST 请求发送到另一个站点？

> ID：14492864
> 
> 赞同：0
> 
> 时间：2013-01-24T02:21:10.477
> 
> 标签：php

我正在尝试将此 POST 请求发送到另一个站点，但我真的不知道该怎么做。这段代码甚至可以吗？

```
<html>
    <body>
            <form method="post">
                    <input type="hidden"
                    <?php
                            echo " value='";
                            for($i=0;$i<2147483648;$i++)
                                    {
                                            echo "a";
                                    }
                            echo "'";
                    ?>
                    >
                    <input type="submit">
            </form>
<?php if(isset($_POST['test'])){
    echo $_POST['test'];
}
?>
    </body>
</html> 
```

如果是这样，我如何定位网站/运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:26:28.007

[您可以使用cURL](http://php.net/manual/en/book.curl.php)向另一台服务器发送 POST 请求。[请参阅 David Walsh的](http://davidwalsh.name/curl-post)示例。

如果你被 PHP 卡住了，不要丢掉好的设计——将自定义 cURL 代码的逻辑封装在一个函数中，这样你就可以在一个地方定义和更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:52:12.333

您没有在表单标签中提到操作。行动告诉在哪里张贴表格

# android - 具有可绘制背景的自定义按钮：Android 4 与 Android 2.3 中的填充差异

> ID：14492866
> 
> 赞同：13
> 
> 时间：2013-01-24T02:21:11.563
> 
> 标签：android, android-layout, android-drawable

以下代码用于在 Android 中显示自定义按钮。不幸的是，这些不同位置的所有这些填充值都会影响按钮的呈现方式，仅适用于 Android 2.3，但在 Android 4.X 上没有任何影响，即填充始终相同，无论您在此处设置什么。为什么？

**布局 XML：**

```
<Button
    android:id="@+id/sample_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_caption"
    android:padding="6dp"
    android:layout_marginBottom="6dp"
    android:layout_marginRight="6dp"
    style="@style/CustomButton"
    android:textSize="16sp" /> 
```

**样式：**

```
<style name="CustomButton">
    <item name="android:layout_gravity">center_horizontal</item>
    <item name="android:padding">6dp</item>
    <item name="android:background">@drawable/custom_button</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:gravity">center</item>
    <item name="android:textStyle">bold</item>
</style> 
```

**可绘制对象：**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape>
            <solid
                android:color="#60ff0000" />
            <stroke
                android:width="1dp"
                android:color="#ffffff" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="6dp"
                android:top="6dp"
                android:right="6dp"
                android:bottom="6dp" />
        </shape>
    </item>
    <item>
        <shape>
            <solid
                android:color="#90ff0000" />
            <stroke
                android:width="1dp"
                android:color="#ffffff" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="6dp"
                android:top="6dp"
                android:right="6dp"
                android:bottom="6dp" />
        </shape>
    </item>
</selector> 
```

当我将所有这些填充值设置为一个较小的值（例如 2）时，在 Android 2.3.3 上显示的按钮几乎没有填充（可能是正确的），但在 Android 4.X 上显示的填充仍然非常大（可能是错误的） . 有人能看出为什么吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-04T19:53:20.980

[Android 的 Holo 主题在系统 styles.xml 资源`Holo.Widget.Button`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml#L1529)中设置了 minWidth 和 minHeight ，这些资源指定了除非 Holo 按钮使用的规则之外的规则[`Widget.Button`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml#L314)。即使按钮标题很小，在 Android 4.2 中按钮也会占用 64x48dip。

```
<Button
    android:id="@+id/sample_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Z"
    android:padding="6dp"
    android:minHeight="1dp"
    android:minWidth="1dp"
    android:layout_marginBottom="6dp"
    android:layout_marginRight="6dp"
    style="@style/CustomButton"
    android:textSize="16sp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:25:17.327

大卫的回答可能确实是问题所在。

但是，我认为如果最小宽度和高度为 48/64dp，则将填充从 6dp 更改为 2pd 或反之亦然不会有很大的不同，除非您的实际按钮已经在 48/64 dp 大小。

如果是这种情况，我想知道它是否可能是 Android 上的错误。如果没有指定 View 上的 padding，则使用背景 drawable 中的 padding（如果有） 如果指定了 View 上的 padding，则忽略背景 drawable 中的任何 padding，并使用 View 上设置的 padding。

只是为了它，您是否尝试过使填充物真正变大而不是变小，看看是否有任何效果？

# backbone.js - NoTemplateError Backbone.Marrionette 但在错误消息中显示模板

> ID：14492868
> 
> 赞同：1
> 
> 时间：2013-01-24T02:21:17.700
> 
> 标签：backbone.js, marionette, backbone-views

这是我的错误：

```
Uncaught NoTemplateError: Could not find template: '<!-- HTML Template --> 
<div id="start_div">

<h2>Choose your path to ... // the rest of the template 
```

它告诉我没有模板，但是它输出了它说找不到的模板。

这是我的代码：

```
require(["jquery", "marionette", "views/StartView" ],
function($, marionette, StartView) {

  var SCApp = new marionette.Application();

  SCApp.addRegions({
      mainRegion: "#center_court"
  });
  var startView = new StartView();
  SCApp.mainRegion.show(startView);
  SCApp.start();

} 
```

这是 StartView.js

```
define(["jquery", "marionette", "text!templates/startDiv.html"],

function($, marionette, template){

    var StartView = marionette.ItemView.extend({
       //template: "#start_div"
        template: template
    });

    // Returns the View class
    return StartView;

}); 
```

谁能看到我做错了什么？我是否需要在 require 方法中进行模板化？

任何建议都非常感谢。

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:12:32.000

通常 Marionette 在 DOM 中搜索一个模板，其 ID 等于您在视图中引用的 ID，因此您必须以这种方式从 Marionette.TemplateCache 更改 loadTemplate：

```
Backbone.Marionette.TemplateCache.prototype.loadTemplate = function(templateId) {

    var template = templateId;

    if (!template || template.length === 0){
        var msg = "Could not find template: '" + templateId + "'";
        var err = new Error(msg);
        err.name = "NoTemplateError";
        throw err;
    }

    return template;
}; 
```

我实际上不记得我在哪里找到了这个功能，我在 Marionette 的 Wiki 中再也找不到它了，无论如何它对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T08:22:29.927

我昨天遇到了同样的问题，发现了下一个有趣的事实：

1.  当我更改了“未找到”模板的内容时，错误消息中没有更改。
2.  当我更改它的文件名（并在导入语句中更新它）时——错误得到修复，更新的内容被显示。
3.  ...然后我又改了名字，一切都很好。

看起来像缓存的一些错误。

更新：在这里我找到了深入的分析和解决方案：

[http://blog.icanmakethiswork.io/2014/03/caching-and-cache-busting-with-requirejs.html](http://blog.icanmakethiswork.io/2014/03/caching-and-cache-busting-with-requirejs.html)

# assembly - 在 ASM x86 FASM 汇编器中声明函数

> ID：14492870
> 
> 赞同：1
> 
> 时间：2013-01-24T02:21:41.447
> 
> 标签：assembly, fasm

我第一次尝试组装.. 我跳过了 helloworld 并决定直接潜入并做一个 CRC32Checksum ：l

现在我很困惑哈哈。。

我的尝试：

```
format PE console                                ;Format PE OUT GUI 4.0
entry main

include 'macro/import32.inc'

section '.idata' import data readable           ;Import Section.
library msvcrt,'msvcrt.dll'
import msvcrt, printf, 'printf',\
exit,'exit', getchar, 'getchar'

section '.data' data readable writeable         ;Constants/Static Section.
InitialValue dd 0

section '.code' code readable executable
main:
   jmp CRC32Checksum     ;I want to change this to a call [CRC32Checksum]..
   call [getchar]
   mov eax, 0
   ret 0

CRC32Checksum:
   push ebx
   mov ebp, esp
   mov eax, InitialValue
   NOT eax
   pop ebx
ret 
```

如何调用我的 CRC32Checksum？我什至走在正确的轨道上吗？如何在汇编中声明函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:27:03.790

只需使用：

```
call CRC32Checksum 
```

在 FASM 中，当您用方括号括起某些内容时，它意味着间接寻址。

“call [CRC32Checksum]”的意思是“调用地址位于CRC32Checksum变量的过程。实际上，你会得到编译器错误“operand size not specified”，因为标签CRC32Checksum是代码标签并且没有分配大小。（你可以覆盖这通过使用“call dword [CRC32Checksum]”，但在这里它当然没有意义）。

请注意，您通过间接调用调用导入的函数“getchar”。这是因为导入的函数实际上是包含导入函数地址的双字变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:02:41.533

Flat Assembler 网站有一个关于 Windows 编程的指南。它有关于如何使用宏制作程序的[文档。](http://flatassembler.net/docs.php?article=win32#1.3)`proc`

或者只是`call`一个标签，通过堆栈或寄存器向例程提供您想要的参数。

# php - codeigniter 中 $_POST 变量的空值

> ID：14492872
> 
> 赞同：0
> 
> 时间：2013-01-24T02:21:50.970
> 
> 标签：php, codeigniter, activerecord, post

我有一个表格：

```
 <?php
            $attr = array('id'=>'urlSubmit');
            $urlInputAttr = array('name'=>'urlInput','value'=>'yourdomain.com','maxlength'=>'50','size'=>'25');
            echo form_open('urlSubmission',$attr);
            echo form_input($urlInputAttr);
            #echo form_submit('urlInput', '');
            echo form_close();
        ?>

a controller called **urlsubmission**

    # Determine whether domain already has been crawled.
                $this->load->model('domaincheckmodel');

                    $this->domaincheckmodel->verifyduplicates(); 
```

和一个模型（domaincheckmodel）中的函数，它基本上检查重复记录并插入一个新域：

```
function verifyduplicates(){
        # $_POSTed value of urlInput
        $tldEntered = $this->input->post('urlInput'); ## echo out $_POSTed domain entered.
        ## Gather if the domain exists in db
        $DupDomains = $this->db->get_where('ClientDomain', array('tld'=>$tldEntered));   // Get ClientDomain table

    if($DupDomains->num_rows() > 0 ){
        $this->load->view('err/domainexists'); ##domain already used
    }

    # else, no domain present, insert.
    else{
        #array of insert values:
        $insertNewDomain = array('tld'=>$tldEntered);
        $this->db->insert('ClientDomain', $insertNewDomain); 
        $this->load->view('success/domainfree'); ##domain is free and has not been entered.
    } 
```

问题是：当我提交时，它向数据库提交了一条记录但`tld`为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:01:01.140

```
function verifyduplicates(){
    #PREPARE DATA
    if ($this->input->post('name_of_your_button')){
        $postedTLD = $this->input->post('urlInput');    // Get unsanitized data
        echo $postedTLD;
        $this->db->set('tld', $postedTLD); // AutoMagically escaped by AR
        #INSERT DATA
        $this->db->insert('ClientDomain'); 
    }
} 
```

只需确保您为提交按钮命名

# matlab - 如何将 Maple 表达式 x*y 转换为 Matlab 的结果 x.*y？

> ID：14492875
> 
> 赞同：5
> 
> 时间：2013-01-24T02:22:11.247
> 
> 标签：matlab, maple

Maple 表达式（例如，x^3+x*y）可以通过以下方式转换为 Matlab

```
with(CodeGeneration):
Matlab(x^3+x*y); 
```

但是，在 Matlab 中，有两种产品：**A*B**和**A.*B**。上述方式将给出**x^3+x*y**。有没有一种方便的方法来获得结果**x.^3+x.*y**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:20:59.080

Maple 的语言定义`CodeGeneration[Matlab]`可以扩展为处理元素代字号 (~) 运算符的各种实例。

由于`'x*~y'`似乎自动简化为 `~`[`*`](x, `$`, y)，并且由于名称“$”的存在似乎存在硬编码错误，因此该名称是在下面的使用代码中替换为`NULL`。

```
> restart:

> with(CodeGeneration): with(LanguageDefinition):

> LanguageDefinition:-Define("NewMatlab", extend="Matlab",
>   AddFunction("`~`[`^`]", [Vector,integer]::Vector,
>               proc(X,Y)
>                  Printer:-Print(X,".^",Y)
>              end proc,
>               numeric=double),
>   AddFunction("`~`[`*`]", [Vector,integer]::Vector,
>               proc(X,Y)
>                  Printer:-Print(X,".*",Y)
>               end proc,
>               numeric=double));

> expr:=''x^~y + x^~3 + x*~y'':

> Translate(subs(` $`=NULL, expr ), language="NewMatlab");

cg = x.^y + x.^3 + x.*y;

> p := proc(x,y)
>         x^~y + x^~3 + x*~y;
>      end proc:

> f := subs(` $`=NULL, eval(p) ):
> Translate(f, language="NewMatlab");

function freturn = f(x, y)
  freturn = x.^y + x.^3 + x.*y; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T17:25:07.317

不管它值多少钱，Maple 2015 可以直接进行此翻译，无需[acer](https://stackoverflow.com/users/338560/acer)提供的额外帮助：

```
> f := (x,y)->x^~y + x^~3 + x*~y:
> CodeGeneration:-Matlab(f);
function freturn = f(x, y)
  freturn = x .^ y + x .^ 3 + x .* y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:02:28.117

如果 Matlab(x^3+x*y) 表达式以书面形式给出代码 x^3+x*y，那么您可以简单地将其转换为 x.^3+x。*y ，只需使用任何记事本应用程序的“查找和替换”选项。只需找到所有 "* " 和 "^" ，然后将它们替换为 ".*" 和 ".^" 。

希望这可以帮助。

# ios - 带有 2 个 CALayers 边框的 UIImageView

> ID：14492877
> 
> 赞同：1
> 
> 时间：2013-01-24T02:22:12.343
> 
> 标签：ios, objective-c, ios6, calayer, caanimation

我有一个 UIImageView，我试图用边框框起来，通过使用`CALayer`

我的边框实际上由 2 个边框组成……内边框是 5 像素宽和白色，外边框是 1 像素宽和浅灰色。

我可以通过以下方式轻松完成第一部分：

```
myImageView.layer.borderColor = [UIColor whiteColor].CGColor;
myImageView.layer.borderColorWidth = 5.0f; 
```

但我正在努力在其周围添加一个额外的 1px 灰色边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:25:48.713

你可以制作一个“背景视图”，因为你的“背景视图”的超级`myImageView`视图比你`myImageView`的“背景视图”的 backgroundColor 大 1px 是浅灰色的。然后添加你`myImageView`的子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T17:47:49.913

尝试这个

randomView.layer.borderColor = [[UIColor colorWithRed:0.8f green:0.8f blue:0.8f alpha:1.0f] CGColor]; randomView.layer.borderWidth = 1.0f;

# c++ - C++类函数返回类型定义，返回一个类

> ID：14492878
> 
> 赞同：0
> 
> 时间：2013-01-24T02:22:13.793
> 
> 标签：c++, syntax, g++

我有一个矢量类，如下所示：

```
class Vector3
{

 public:
   Vector3(){m_x = m_y = m_z = 0.0f;}
   Vector3(const float & i_x, const float & i_y, const float & i_z):
     m_x(i_x), 
     m_y(i_y),
     m_z(i_z)
     {}

   Vector3 operator+(const Vector3 & i_other);
private:
   float m_x;
   float m_y;
   float m_z;
};

Vector3::Vector3 Vector3::operator+(const Vector3 & i_other)
{
   float tx = m_x + i_other.m_x;
   float ty = m_y + i_other.m_y;
   float tz = m_z + i_other.m_z;
   return Vector3(tx, ty, tz);
} 
```

显然，`Vector3::operator+`定义 synax 是错误的，因为返回类型是`Vector3::Vector3`，而不是`Vector3`。`Vector3::Vector3`意味着有一个命名空间`Vector3`，并且在命名空间内有一个类`Vector3`。但是我这里只有一个类`Vector3`，没有命名空间。

我的问题是，在 Ubuntu 12.04 中，上面的语法无法编译（Ubuntu 的 g++ 编译器是 [gcc version 4.6.3]）。但是，在 Mac 中，g++ 可以编译代码（Mac 的 g++ 编译器是 [gcc version 4.2.1]）。另外，我在 Red Hat linux 机器上测试了这个语法，它也可以工作（g++ 版本是 [gcc 版本 4.4.6]）

那么，是不是不同版本的gcc编译原理不同呢？或者，我在 Ubuntu 中的 g++ 坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:52:13.920

较旧的编译器不正确。那里有点小惊喜。

它可能被解析`Vector3::Vector3`为注入类型名称。在 的范围内`class Vector3 { }`，标识符`Vector3`指的是类，而不是构造函数（当然，除非您声明构造函数）。乍一看，您可能会认为它在返回类型中的含义相同，因为 §3.4/3（我在这里使用 C++11 标准）说

> 出于名称隐藏和查找的目的，类的注入类名称（第 9 条）也被认为是该类的成员。

深入挖掘，在 §3.4.3.1/2 中，

> 在构造函数是可接受的查找结果并且嵌套名称说明符指定类 C 的查找中：
> 
> — 如果在嵌套名称说明符之后指定的名称，当在 C 中查找时，是 C 的注入类名称（第 9 条）
> 
> 该名称被认为是命名类 C 的构造函数。

使用注入的类名开始声明的上下文恰好与定义`class {}`范围外的构造函数相同，a la

```
class Vector3 { … };

Vector3::Vector3(){m_x = m_y = m_z = 0.0f;} 
```

较旧的 GCC 注意到声明不是构造函数，然后采取了可行的后备路径。然而，这种回退是非法的，因为 C++ 指定在构造函数可能是查找结果的上下文中，它是唯一有效的查找结果。

很可能，一些用户花时间提交错误，而 GCC 开发人员花时间诊断、修复并编写测试用例。乘以复杂语言（如 C++）中的琐碎事物的数量，您就会开始欣赏编译器所付出的努力。

# eclipse - 搜索 Google Plugin for Eclipse3.7(indigo) 的 zip 文件

> ID：14492881
> 
> 赞同：0
> 
> 时间：2013-01-24T02:22:30.803
> 
> 标签：eclipse, google-app-engine

我想找到适用于 Eclipse3.7(indigo) 的 Google 插件的 zip 文件。在[Google 文档](https://developers.google.com/eclipse/docs/faq#installfromzip)中，我没有找到 Eclipse 3.7 的任何 zip 文件。Eclipse3.6(Helios) 的 zip 文件不支持 3.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:29:10.297

会不会是这个，是windows的吧？

[http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.7.2-201202080800/eclipse-SDK-3.7.2-win32.zip](http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.7.2-201202080800/eclipse-SDK-3.7.2-win32.zip)

或其他：

[http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR2/eclipse-java-indigo-SR2-win32.zip](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR2/eclipse-java-indigo-SR2-win32.zip)

也在您提供的同一个链接中

“用于 Eclipse 3.7（Indigo）的 Google 插件安装说明” [https://developers.google.com/eclipse/docs/install-eclipse-3.7#selectcomponents](https://developers.google.com/eclipse/docs/install-eclipse-3.7#selectcomponents)

**他们放置链接是为了下载 Eclipse 3.7 的最新更新站点存档。**

[http://dl.google.com/eclipse/plugin/core/3.7/zips/gpe-e37-latest-updatesite.zip](http://dl.google.com/eclipse/plugin/core/3.7/zips/gpe-e37-latest-updatesite.zip)

# ruby - 链接产生多个参数的枚举器

> ID：14492882
> 
> 赞同：9
> 
> 时间：2013-01-24T02:22:34.887
> 
> 标签：ruby, block, enumerators

我试图弄清楚 Ruby 如何处理产生多个参数的链式枚举器。看看这个片段：

```
a = ['a', 'b', 'c']

a.each_with_index.select{|pr| p pr}
# prints:
# ["a", 0]
# ["b", 1]
# ["c", 2]

a.each_with_index.map{|pr| p pr}
# prints:
# "a"
# "b"
# "c" 
```

为什么`select`将参数作为数组`map`生成，而将它们作为两个单独的参数生成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:17:31.887

尝试：

```
a.each_with_index.map{|pr,last| p "pr: #{pr} last: #{last}"} 
```

`map`自动解构传递给它的值。下一个问题是它*为什么*要进行这种解构而`select`不是？

如果您查看[Array 的 Rdoc 页面上给出的源代码，](http://www.ruby-doc.org/core-1.9.3/Array.html)它们实际上是相同的，`select`只是不同之处在于它对产生的值进行了测试。其他地方肯定发生了什么事。

如果我们查看[Rubinius 源代码](https://github.com/rubinius/rubinius/blob/master/kernel/common/enumerable19.rb#L37)（主要是因为我使用 Ruby 比使用 C 更好；）因为`map`（别名来自`collect`）它向我们展示了：

```
each do |*o| 
```

所以它在通过的过程中会喷溅参数，而[select](https://github.com/rubinius/rubinius/blob/master/kernel/common/enumerable.rb#L236) (aliased from `find_all`) 不会：

```
each do 
```

*再次，关于为什么*的设计决定超出了我的范围。你必须找出是谁写的，也许问问 Matz :)

* * *

我应该补充一点，再次查看 Rubinius 源代码，`map`实际 splats on`each` *和*on `yield`，我不明白为什么你会在只需要 yield splat 时同时做这两个：

```
 each do |*o|
    ary << yield(*o)
  end 
```

而`select`没有。

```
each do
  o = Rubinius.single_block_arg
  ary << o if yield(o)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T03:24:54.633

根据[MRI source](https://github.com/ruby/ruby/blob/7ea675732ac1dac72f07756498706678d8725719/enum.c)，似乎在`select`splats 中使用的迭代器传入了它的参数，但`map`没有传入并将它们解包传递；后一种情况下的块默默地忽略其他参数。

中使用的迭代器`select`：

```
static VALUE
find_all_i(VALUE i, VALUE ary, int argc, VALUE *argv)
{
    ENUM_WANT_SVALUE();

    if (RTEST(rb_yield(i))) {
        rb_ary_push(ary, i);
    }
    return Qnil;
} 
```

中使用的迭代器`map`：

```
static VALUE
collect_i(VALUE i, VALUE ary, int argc, VALUE *argv)
{
    rb_ary_push(ary, enum_yield(argc, argv));

    return Qnil;
} 
```

我很确定`ENUM_WANT_SVALUE()`宏用于将传递给块的值转换为一个 splat 数组值（而不是一个元组，后者的参数被默默地忽略）。也就是说，我不知道为什么它是这样设计的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T04:36:42.720

从目前的论述来看，我们可以分析源代码，但我们不知道原因。Ruby 核心团队相对来说反应灵敏。我建议您登录[http://bugs.ruby-lang.org/issues/](http://bugs.ruby-lang.org/issues/)并在那里发布错误报告。他们肯定最多会在几周内看到这个问题，您可能会期望它在下一个 Ruby 小版本中得到纠正。（也就是说，除非有我们不知道的设计原理来保持原样。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T03:36:07.023

[让我们在enum.c](https://github.com/ruby/ruby/blob/7ea675732ac1dac72f07756498706678d8725719/enum.c)中查看 MRI 源代码。正如@PlatinumAzure 所说，魔法发生在`ENUM_WANT_SVALUE()`：

```
static VALUE
find_all_i(VALUE i, VALUE ary, int argc, VALUE *argv)
{
    ENUM_WANT_SVALUE();

    if (RTEST(rb_yield(i))) {
        rb_ary_push(ary, i);
    }
    return Qnil;
} 
```

而我们可以发现这个宏其实是：`do {i = rb_enum_values_pack(argc, argv);}while(0)`.

所以让我们继续深入了解`rb_enum_values_pack`函数：

```
VALUE
rb_enum_values_pack(int argc, VALUE *argv)
{
    if (argc == 0) return Qnil;
    if (argc == 1) return argv[0];
    return rb_ary_new4(argc, argv);
} 
```

看？参数由在[array.c](https://github.com/ruby/ruby/blob/trunk/array.c#L451)`rb_ary_new4`中定义的打包。

# json - 使用 Handlebars 以编程方式迭代 json 对象

> ID：14492890
> 
> 赞同：1
> 
> 时间：2013-01-24T02:23:55.383
> 
> 标签：json, node.js, express, handlebars.js

我有一些看起来像这样的json：

```
{{...},
"skills": [{
        "languages": ["Java", "JavaScript", "C", "HTML5", "CSS3", "PHP", "Python"],
        "j2ee": ["JSP", "Struts", "Tiles"],
        "servers": ["Apache Tomcat 5, 6", "Webshpere Application Server", "Node.js", "Django (Python framework)"],
        "tools": ["Eclipse and Rational Application Developer", "Maven", "vim", "*nix CLI"],
        "versions": ["Git", "MKS", "Accurev", "SubVersion", "CVS"]
}], 
{...}} 
```

部分车把看起来像这样：

```
{{#each skills}}
<div id="{{this}}">
<ul>
    {{#list this}}
    <li>{{this}}</li>
    {{/list}}
</ul>
</div>
{{/each}} 
```

这显然是行不通的，但我的想法是我可以以`skills`编程方式迭代数组，这样我就不必将键放入，然后迭代每个键的值（一个数组）。

我知道我可以做类似的事情

```
{"skills": 
    [{"name": "languages", 
      "values":["Java",...]},
     {"name": "j2ee", 
      "values":["JSP",...]},
     {...}]} 
```

但我想知道是否有办法用第一个结构来做到这一点。

# java - RPC 调用失败

> ID：14492892
> 
> 赞同：3
> 
> 时间：2013-01-24T02:24:03.770
> 
> 标签：java, mysql, eclipse, tomcat

当我运行我的项目时，我收到错误消息“RPC 调用失败”。这将来自我的 LoginView 类 AuthenticationHandler 类。此外，ClickHandler 中的窗口警报正在显示在“aa/bb”页面中输入的值。MySQL 和 Tomcat 已启动，我已尝试通过遵循众多在线指南和论坛来确保安装所有驱动程序。但是，我怀疑我在这方面做得不对。但是，我可能是错的。有人可以让我知道要检查什么以及如何解决它。细节将不胜感激，因为我是新手。

我“运行为”Web 应用程序并且未启用 GAE（我提到这一点，因为我发现这是另一个问题的原因）。我有一个 MySQL 数据库奖励跟踪器，其中包含一个 DBuser 用户和密码 DBpass 设置，其中包含一个包含数据的表。

错误日志显示了我在 MySQLConnection 类中插入的消息“连接到数据库时出错 - 不好”。以下是日志和类：

安慰：

```
java.sql.SQLException: No suitable driver found for jbdc:mysql://localhost:3306/awardtracker
Error connecting to database - not good eh
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.AwardTracker.server.MySQLConnection.<init>(MySQLConnection.java:23)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:463)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Starting Jetty on port 8888
[WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract org.AwardTracker.client.User org.AwardTracker.client.DBConnection.authenticateUser(java.lang.String,java.lang.String)' threw an unexpected exception: java.lang.NullPointerException
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.NullPointerException
at org.AwardTracker.server.MySQLConnection.authenticateUser(MySQLConnection.java:37)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
... 22 more
[ERROR] 500 - POST /org.AwardTracker.AwardTracker/MySQLConnection (127.0.0.1) 57 bytes
Request headers
  Accept: */*
  X-GWT-Permutation: HostedMode
  X-GWT-Module-Base: http://127.0.0.1:8888/org.AwardTracker.AwardTracker/
  Content-Type: text/x-gwt-rpc; charset=utf-8
  Referer: http://127.0.0.1:8888/AwardTracker.html?gwt.codesvr=127.0.0.1:9997
  Accept-Language: en-au
  Accept-Encoding: gzip, deflate
  User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; MAAU)
  Host: 127.0.0.1:8888
  Content-Length: 199
  Connection: Keep-Alive
  Cache-Control: no-cache
Response headers
  Content-Type: text/plain 
```

DBConnection 类

```
package org.AwardTracker.client;

import com.google.gwt.user.client.rpc.RemoteService;

/**
 * The client side stub for the RPC service.
 */
public interface DBConnection extends RemoteService {
public User authenticateUser(String user, String pass);
} 
```

用户类

```
package org.AwardTracker.client;

import com.google.gwt.user.client.rpc.IsSerializable;

public class User implements IsSerializable {
@SuppressWarnings("unused")
private String username;
@SuppressWarnings("unused")
private String password;
@SuppressWarnings("unused")
private User() {
    //just here because GWT wants it.
}
public User(String username, String password) {
    this.username = username;
    this.password = password;
}

} 
```

登录视图类

```
package org.AwardTracker.client;

import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.FlexTable;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.user.client.ui.PasswordTextBox;
import com.google.gwt.user.client.ui.CheckBox;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.rpc.ServiceDefTarget;

public class LoginView extends Composite {
private TextBox textBoxUsername;
private PasswordTextBox passwordTextBox;

private DBConnectionAsync rpc;

public LoginView(final NavHandler navHandler) {

    rpc = (DBConnectionAsync) GWT.create(DBConnection.class);
    ServiceDefTarget target = (ServiceDefTarget) rpc;
    String moduleRelativeURL = GWT.getModuleBaseURL() + "MySQLConnection";
    target.setServiceEntryPoint(moduleRelativeURL);

    VerticalPanel verticalPanel = new VerticalPanel();
    initWidget(verticalPanel);

    Label lblWelcomeToThe = new Label("Welcome to the Award Tracker login page");
    lblWelcomeToThe.setStyleName("gwt-Label-Login");
    verticalPanel.add(lblWelcomeToThe);

    Label lblSignInTo = new Label("Please sign in to your account");
    lblSignInTo.setStyleName("gwt-Label-Login");
    verticalPanel.add(lblSignInTo);

    FlexTable flexTable = new FlexTable();
    verticalPanel.add(flexTable);

    Label lblUserName = new Label("Username:");
    lblUserName.setStyleName("gwt-Label-Login");
    flexTable.setWidget(0, 0, lblUserName);
    lblUserName.setHeight("12px");

    textBoxUsername = new TextBox();
    flexTable.setWidget(0, 1, textBoxUsername);

    Label lblNewLabel = new Label("Password:");
    lblNewLabel.setStyleName("gwt-Label-Login");
    flexTable.setWidget(1, 0, lblNewLabel);

    passwordTextBox = new PasswordTextBox();
    flexTable.setWidget(1, 1, passwordTextBox);

    CheckBox chckbxRememberMeOn = new CheckBox("Remember me on this computer");
    chckbxRememberMeOn.setStyleName("gwt-Checkbox-Login");
    flexTable.setWidget(2, 1, chckbxRememberMeOn);

    Button btnSignIn = new Button("Sign In");
    btnSignIn.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
            if (textBoxUsername.getText().length() == 0) {
                    Window.alert("Username is empty."); 
                }else if (passwordTextBox.getText().length() == 0) {
                    Window.alert("Password is empty."); 
                }else {
                    AsyncCallback<User> callback = new AuthenticationHandler<User>();
                    Window.alert(textBoxUsername.getText() + "/" + passwordTextBox.getText());
                    rpc.authenticateUser(textBoxUsername.getText(), passwordTextBox.getText(), callback);
                }
        }
        class AuthenticationHandler<T> implements AsyncCallback<User> {
            public void onFailure(Throwable ex) {
                Window.alert("RPC call failed.");   
            }
            public void onSuccess(User result) {
                navHandler.go("SelectPerson");
            }
        }
    });
    flexTable.setWidget(3, 1, btnSignIn);

    Label lblCreateAcct = new Label("Create an account");
    lblCreateAcct.setStyleName("gwt-Link-Login");
    lblCreateAcct.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
            navHandler.go("CreateAccount");
        }
    });
    flexTable.setWidget(4, 1, lblCreateAcct);
}

} 
```

MySQLConnection 类

```
package org.AwardTracker.server;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

import org.AwardTracker.client.DBConnection;
import org.AwardTracker.client.User;

public class MySQLConnection extends RemoteServiceServlet implements DBConnection {
private Connection conn = null;
private String status;
private String url = "jbdc:mysql://localhost/awardtracker/";
private String user = "DBuser";
private String pass = "DBpass";
public MySQLConnection() {
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(url, user, pass);
    } catch (Exception e) {
        //NEVER catch exceptions like this
        System.out.println("Error connecting to database - not good eh");
    }
}

public User authenticateUser(String userName, String pass) {
    User user = null; // necessary unless you do something in the exception handler
    ResultSet result = null;
    PreparedStatement ps = null;
    try {
      ps = conn.prepareStatement(
          "select readonly * from at_accounts where acc_email_address = \"" + userName  + "\" AND " + "acc_password = \"" + pass + "\"");
      result = ps.executeQuery();
      while (result.next()) {
         user = new User(result.getString(1), result.getString(2));
      }
    } 
    catch (SQLException sqle) {
      //do stuff on fail
        System.out.println("SQLException 1.");
    }
    finally {
        if (result != null) {
            try {
                result.close();
            }
            catch (SQLException e) {
                System.out.println("SQLException 2.");
                e.printStackTrace();
            }
        }
        if (ps != null) {
            try {
                ps.close();
            }   
            catch (SQLException e) {
                System.out.println("SQLException 3.");
                e.printStackTrace();
            }
        }
    }
return user;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:59:17.230

答案是看

```
MySQLConnection "private String url = "jbdc:mysql://localhost/awardtracker/";" 
```

jbdc 应该是 jdbc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:25:17.343

数据库 url 的字符串似乎是错误的。你没有数据库保护。

```
private String url = "jbdc:mysql://localhost/awardtracker/"; 
```

如果您的数据库使用默认 prot，请更改为：

```
 private String url = "jbdc:mysql://localhost:3306/awardtracker/"; 
```

# r - 在 R 中对字符向量进行排序

> ID：14492893
> 
> 赞同：4
> 
> 时间：2013-01-24T02:24:11.873
> 
> 标签：r, character

我正在尝试订购一个状态向量。我知道这应该很简单，但我无法解决。我查看了其他建议使用 vapply(...) 的复杂解决方案的帖子，但这似乎没有必要。我有以下内容：

```
 state.vec = c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "CD", "FL", "AG", "HI", "DI",   
  "IL", "IN", "AI", "KS", "KY", "AL", "EM", "DM", "AM", "IM", "MN", "MS", "MO", "MT", "EN", "NV",   
  "HN", "JN", "MN", "NY", "CN", "DN", "HO", "KO", "OR", "AP", "PR", "IR", "CS", "DS", "NT", "TX",  
  "TU", "TV", "IV", "AV", "AW","VW", "IW", "WY", "GU") 
```

不幸的是， order 将值转换为它们的整数顺序：

```
 order(state.vec) 
 2  1  4  3  5  6  7  9  8 10 11 54 12 16 13 14 15 17 18 19 22 21 20 23 24 26 25 27 34 35 28   
 30 31 32 29 33 36 37 38 39 40 41 42 43 44 45 46 49 48 47 50 52 51 53 
```

认识到 'AK' 出现在 'AL' 之前是足够聪明的，因此 'AL' 对应于秒或整数 2。理想情况下，我希望它重新排序向量，以便它从 1:53 适当地开始，例如（'AK'，'AL'，'AR'，...等。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T02:26:32.570

```
state.vec[order(state.vec)] 
```

或者简单地说：

```
sort(state.vec) 
```

# c++ - 获取指向集合中原始数据的指针，例如 &(vector[0])

> ID：14492894
> 
> 赞同：2
> 
> 时间：2013-01-24T02:24:13.803
> 
> 标签：c++, pointers, vector, set, containers

要获取指向向量中数据的指针，我们可以使用

```
vector<double> Vec;    
double* Array_Pointer = &(Vec[0]);
Function(Array_Pointer); 
```

是否有可能获得指向**集合**中数据的指针？我可以像上面那样将它用作数组指针吗？

* * *

如果不可能，使向量脱离集合的最佳方法是什么？我的意思是没有循环遍历所有元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T02:29:48.697

不，这不一定是可能的。C++ ISO 标准明确保证 a 中元素的连续存储`std::vector`，因此您可以安全地获取第一个元素的地址，然后像指向原始数组一样使用该指针。标准库中的其他容器没有这个保证。

这样做的原因是为了有效地支持 a 上的大多数操作`std::set`，实现需要使用复杂的数据结构，如平衡二叉搜索树来存储和组织数据。这些结构本质上是非线性的，需要将节点分配并链接在一起。在标准规定的时间限制（大多数操作的摊销 O(log n)）内，有效地让它与平面数组中的元素一起工作将是困难的，如果不是不可能的话。

**编辑**：针对您的问题 - 如果没有一些代码在某处迭代集合并复制元素，就无法`std::vector`从 a构建 a。`std::set`您可以通过使用`std::vector`范围构造函数来执行此操作，而无需自己显式使用任何循环：

```
std::vector<T> vec(mySet.begin(), mySet.end()); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:05:53.370

不，不可能以`set`您可以执行此操作的方式实施。

如果您`set`以将元素存储在单个数组中的方式实现，那么当您添加更多元素时，该数组将不可避免地需要在某个时候重新分配。届时，对现有元素的任何引用都将失效。

的功能之一`set`是它*保证*如果您添加（或删除）其他元素，对元素的引用永远不会失效。如 [associative.reqmts] 中所述：

> `insert`and`emplace`成员不应影响迭代器和对容器的引用的有效性，并且成员`erase`应仅使迭代器和对已擦除元素的引用无效。

所以*不可能*以`set`这样一种方式实现，即集合的所有元素都存储在一个数组中。

请注意，这与效率要求无关，例如 O(log n) 插入/删除/查找（如果你真的眯着眼睛并至少允许分摊的 O(log n) 插入时间），或保持排序顺序，或类似的东西。如果只是这些，则可以使用底层元素之上的数据结构轻松处理它们，并且元素本身可以存储在数组中。它甚至与*迭代器*失效的保证没有任何关系，因为迭代器是抽象的。

不，唯一阻碍你的是参考失效要求。

# pandas - Pandas 行间计算

> ID：14492898
> 
> 赞同：4
> 
> 时间：2013-01-24T02:25:00.093
> 
> 标签：pandas

我有一个包含每日 OHLCV 数据的 DataFrame。

我可以计算范围：

```
s['Range'] = s['High'] - s['Low'] 
```

简单的。现在我想计算一个我称之为`s['OIR']`（OIR = Open-In-Range）的新列

该`['OIR']`列检查我们是否在区间内开盘，它通过测试我们是否开盘高于昨天的低点和低于昨天的高点来做到这一点。我需要参考前面的行，但我不太确定该怎么做。返回值将是真/假。

谢谢。

* * *

编辑：我是 StackExchange 和 Python 的新手。不确定在哪里放置样本数据。这是数据框的图像。

[http://i47.tinypic.com/142eb2a.png](http://i47.tinypic.com/142eb2a.png)

* * *

示例数据：字典转换为 DataFrame

```
{'High': {<Timestamp: 2007-03-02 00:00:00>: 1384.5,
  <Timestamp: 2007-03-05 00:00:00>: 1373.0},
 'Last': {<Timestamp: 2007-03-02 00:00:00>: 1365.0,
  <Timestamp: 2007-03-05 00:00:00>: 1351.5},
 'Low': {<Timestamp: 2007-03-02 00:00:00>: 1364.25,
  <Timestamp: 2007-03-05 00:00:00>: 1350.5},
 'OIR': {<Timestamp: 2007-03-02 00:00:00>: False,
  <Timestamp: 2007-03-05 00:00:00>: False},
 'Open': {<Timestamp: 2007-03-02 00:00:00>: 1378.5,
  <Timestamp: 2007-03-05 00:00:00>: 1356.75},
 'Range': {<Timestamp: 2007-03-02 00:00:00>: 20.25,
 <Timestamp: 2007-03-05 00:00:00>: 22.5},
 'Volume': {<Timestamp: 2007-03-02 00:00:00>: 1706906,
 <Timestamp: 2007-03-05 00:00:00>: 1984041}} 
```

* * *

回答：

```
s['OIR'] = ((s['Open'] < s['High'].shift(1)) & (s['Open'] > s['Low'].shift(1))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T02:45:30.320

以您建议的方式引用以前的行最好使用以下`Series.shift()`功能完成：

```
In [1]: df = DataFrame(randn(10,3),columns=['O','L','H'])

In [2]: df
Out[2]:
          O         L         H
0  0.605412  0.739866 -0.280222
1 -0.707852  0.785651  0.855183
2 -0.087119  0.518924  0.932167
3 -0.913352  0.369825  1.277771
4  0.434593 -2.942903  0.802413
5  0.075669 -0.135914  1.374454
6  1.112062  0.314946  0.882468
7 -0.706078 -0.202243  0.838088
8 -1.668152  0.414585  0.809932
9  1.452937 -0.048245  0.635499

In [3]: df['OIR'] = ((df.L.shift() <= df.O) & (df.O <= df.H.shift()))

In [4]: df
Out[4]:
          O         L         H    OIR
0  0.605412  0.739866 -0.280222  False
1 -0.707852  0.785651  0.855183  False
2 -0.087119  0.518924  0.932167  False
3 -0.913352  0.369825  1.277771  False
4  0.434593 -2.942903  0.802413   True
5  0.075669 -0.135914  1.374454   True
6  1.112062  0.314946  0.882468   True
7 -0.706078 -0.202243  0.838088  False
8 -1.668152  0.414585  0.809932  False
9  1.452937 -0.048245  0.635499  False 
```

# objective-c - 当精灵到达某个点或被触摸时如何移除它？

> ID：14492901
> 
> 赞同：1
> 
> 时间：2013-01-24T02:25:12.980
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试在 cocos2d 中制作一个游戏，其中我的精灵从屏幕顶部掉落。现在，一旦精灵被点击，它应该向上移动。这对我来说很好，但是在某些情况下，精灵在离开屏幕后会返回。此外，我的精灵在到达屏幕上的某个 y 轴位置后不会消失。这是我的代码的一部分

```
-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
CGPoint loc = [[CCDirector sharedDirector]convertToGL:[touch locationInView:[touch view]]];

CGRect rect = CGRectMake(sprite.position.x - (sprite.contentSize.width/2), sprite.position.y - (sprite.contentSize.height/2), sprite.contentSize.width, sprite.contentSize.height);

if(CGRectContainsPoint(rect, loc))
{
    [sprite runAction:[CCCallFuncN actionWithTarget:self selector:@selector(spriteCaught)]];
}}

-(void)spriteCaught
{
//currentPos is an integer to get the current position of the sprite
id moveUp = [CCMoveTo actionWithDuration:1 position:ccp(currentPos, 500)];
[sprite runAction:[CCSequence actions:moveUp, nil]];
if(sprite.position.y >= 480)
{
    [self removeChild:sprite cleanup:YES];
}} 
```

此外，我不确定我的语法是否正确，但我的条件语句（检查精灵 y 轴位置的语句）也不起作用。我该如何解决这个问题？非常感谢任何帮助和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:21:21.950

代替手动矩形，使用精灵的边界框。

```
 if(CGRectContainsPoint([sprite boundingBox], loc)) 
```

同时更新 spriteCaught 函数。

```
-(void)spriteCaught
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    float dest_y = s.height+sprite.contentSize.height*0.5f; //assumed ur sprite's anchor y = 0.5

    //currentPos is an integer to get the current position of the sprite
    id moveUp = [CCMoveTo actionWithDuration:1 position:ccp(sprite.position, dest_y)];
    id calBlokc = [CCCallBlockN actionWithBlock:^(CCNode *node)
    {
        //here node = sprite tht runs this action
        [node removeFromParentAndCleanup:YES];
    }];
    id sequence = [CCSequence actions:moveUp, calBlokc, nil];

    [sprite runAction:sequence];
} 
```

# ruby-on-rails - 提议的简单调度/可用性数据库模式

> ID：14492902
> 
> 赞同：2
> 
> 时间：2013-01-24T02:25:14.947
> 
> 标签：ruby-on-rails, database-design, calendar

对于此应用程序，员工需要能够在一周中的每一天开始和结束时进行设置。他们可以选择每 1、2 或 4 周重复一次开始/结束。例如，我每周一早上 9 点开始工作，下午 2 点结束。通过像这样的简单重复，我正在考虑拥有 3 个，也许是 2 个模型（用于非规范化）：

```
Event
  - start: datetime
  - end: datetime
  - type: int (appointment, time off, cancelled, etc)
  - date: date (useful?)
  - staff_id: int
  - customer_id: int
  (more, redacted)

DayTemplate
  - active_start: datetime
  - active_end: datetime
  - staff_id: int

Day
  - weekday: int
  - start: datetime
  - end: datetime
  - recurrence: int (0: none, 1: once/mo, 2: other week, 4: every week)
  - day_template_id: int 
```

这个想法是现在设置了参数，因此客户可以在有空时进入并预订员工（在特定的时间段，例如上午 9 点、上午 10 点 15 分、11 点 30 分——以允许设置休息时间）。对于日程中的任何一天，您都可以轻松查询该员工活动的 DayTemplate。然后，工作人员可以通过将活动预订为“休假”来进一步调整日程安排，以进行微调控制。此外，我正在考虑将 Day 非规范化为 DayTemplate - 我知道它看起来很难看，但架构永远不会改变，性能优势是否值得？这足够灵活吗？

感谢反馈。我将在 Rails 中构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:12:24.443

> 对于此应用程序，员工需要能够在一周中的每一天开始和结束时进行设置。他们可以选择每 1、2 或 4 周重复一次开始/结束。例如，我每周一早上 9 点开始工作，下午 2 点结束。通过像这样的简单重复，我正在考虑拥有 3 个，也许是 2 个模型（用于非规范化）：

不要去规范化。专注于降低业务规则，然后将它们映射到 Rails 中的业务对象。让架构设计由特定的应用程序需求驱动。

> 此外，我正在考虑将 Day 非规范化为 DayTemplate - 我知道它看起来很难看，但架构永远不会改变，性能优势是否值得？

当然，此时您不应该担心优化性能。而是为了清晰和简单而优化。您的应用程序中需要性能优化的方面很可能与您预先猜到的完全不同。

> 这足够灵活吗？

也许太多了。我建议尽可能构建满足最低验收标准的最简单的东西。不要尝试设计灵活性，很难预先猜测需要什么样的灵活性。随着时间的推移，维护所有这些“也许我们有一天会需要”功能的成本将阻碍您构建真正用户真正想要的东西。这是违反直觉的，但现在让事情尽可能简单是最好的方式，最终得到一个真正功能丰富的系统。优化交付速度，将其交到真实用户手中并开始收集反馈。

此外，构建任何类型的调度系统的问题在于其复杂性很快就会失控。如果您将此作为练习进行，那么尝试自己编写代码可能是值得的，但如果这是您确实需要认真完成的事情，请考虑使用旨在帮助建模/调度重复事件的众多 ruby​​ gem 之一。我个人用过[冰块，但](http://seejohnrun.github.com/ice_cube/static/ice_cube_ruby_nyc.pdf)[红宝石工具箱](https://www.ruby-toolbox.com/categories/recurring_events)有很多选择

# php - php联系表，两个提交按钮

> ID：14492903
> 
> 赞同：0
> 
> 时间：2013-01-24T02:25:24.163
> 
> 标签：php, html, forms

> **可能重复：**
> [相同的表单数据，两个单独的提交按钮上的不同操作在](https://stackoverflow.com/questions/1617160/same-form-data-different-actions-on-two-separate-submit-buttons)
> [联系表单中上传表单，上传表单提交不断提交整个表单](https://stackoverflow.com/questions/14492594/upload-form-within-a-contact-form-the-upload-form-submit-keeps-submitting-the-w)

我在 php 联系表单中有一个文件上传部分，用于文件上传的提交按钮，而是提交表单。如何区分两个提交按钮？

它基本上是两个 POST 表单，文件上传一个在 php 联系表单中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:26:58.640

只需给每个人一个名字：

```
<input type="submit" name="submit1" value="Submit 1">
<input type="submit" name="submit2" value="Submit 2">

if (isset($_POST['submit1'])) {
  // submit 1 pressed
}
else if (isset($_POST['submit2'])) {
  // submit 1 pressed
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:28:52.430

示例表格：

```
<form method="post">
<input type="submit" name="submit1" value="Button1">
<input type="submit" name="submit2" value="button2">
</form> 
```

然后在`name=""`服务器端工作..

```
<?php

if (isset($_POST['submit1']))
{
 echo "Button1 Is Set <br>";
}
if (isset($_POST['submit2']))
{
 echo "Button2 Is Set <br>";
}
?> 
```

# c++ - 使用 int 到 LPCTSTR 转换的 Directx9 字体更新

> ID：14492904
> 
> 赞同：0
> 
> 时间：2013-01-24T02:25:25.647
> 
> 标签：c++, directx, directx-9

我正在尝试在屏幕上显示分数。以下代码工作正常：

```
g_Font = NULL;
D3DXFONT_DESC f = {fontSize,
                    0,
                    400,
                    0,
                    false,
                    DEFAULT_CHARSET,
                    OUT_TT_PRECIS,
                    CLIP_DEFAULT_PRECIS,
                    DEFAULT_PITCH,
                    fontName};
fontDesc = f;
fontPosition.top = top;
fontPosition.left = left;
fontPosition.right = right;
fontPosition.bottom = bottom;
text = t;
D3DXCreateFontIndirect(device,&fontDesc,&g_Font); 
```

为每一帧渲染以下部分：

```
g_Font->DrawText(NULL,
        text,
        -1,
        &fontPosition,
        DT_CENTER,
        0xffffffff); //draw text 
```

我想要做的是，在运行时更新文本。我只是更新了文本变量，因为绘图代码为每一帧运行，但它不起作用。一个简单的文本有效，但以下构造无效：

```
const size_t buflen = 100;
TCHAR buf[buflen];
_sntprintf(buf, buflen - 1, TEXT("Point: %d"), point);
text = (LPCTSTR)buf; 
```

我尝试了几乎所有可以在网上找到的解决方案，但它们不起作用。可以看到整数转换成功，但是下面的渲染中出现了荒谬的字符。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:35:43.453

您发布的代码不完整，但我仍会尝试为您提供可以帮助您解决问题的答案。

第一个问题是我认为您正在混合概念，并且您正在处理`DrawText`它，就像它是 a`WinForms`或其他东西的 UI 元素一样。每次要更新文本时，`DrawText`都需要调用。它不存储指向您传递的缓冲区的指针，并在更改此缓冲区时自动更新文本，请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173962%28v=vs.85%29.aspx)的文档。如果你想添加一个“标签包装器”，你需要在调用和调用之间调用它，`DrawText`很可能是在一个`Render`方法中。`BeginScene``EndScene`

至于荒谬的字符，如果您的字符串转换正确，您确定`Clear`您`RenderTarget`在重新绘制之前就可以了吗？

# assembly - 在 IDA 中将大量代码转换为数据

> ID：14492911
> 
> 赞同：4
> 
> 时间：2013-01-24T02:26:28.033
> 
> 标签：assembly, arm, reverse-engineering, disassembly, ida

好吧，不幸的是，我在二进制文件的数据部分上点击了“C”，并保存了它，因为我有很多工作未保存。我尝试将这个巨大的部分转换回数据，但是每当我选择行并按“D”时，只有光标所在的行被转换为数据。

所以，我的问题是，我如何将大量数据标记/转换为 IDA 中的代码（特别是 6.1）

（如果重要的话，目标架构是 ARM）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T12:59:16.213

你可以用一个快速的 IDAPython 脚本来完成，例如输入：

```
for a in xrange(startaddr, endaddr): MakeCode(a) 
```

进入“输出”窗口的“Python”字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T09:23:01.260

`D`是定义单个数据。您可以转到第一条指令并使用`U`for `Undefine`。它将删除比“转换为数据”更多的代码。

# javascript - Html5/Javascript 游戏卡顿

> ID：14492913
> 
> 赞同：2
> 
> 时间：2013-01-24T02:26:46.140
> 
> 标签：javascript, html

我正在开发一个基本的太空射击游戏，目前玩家只是一个圆圈。

在 Opera、Firefox 和 IE9 中玩游戏时，我的游戏滞后。

我已经尝试研究这个问题，但我不确定出了什么问题。

我做错什么了吗？

有任何想法吗？

这是代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Space Game Demo</title>
    </head>
    <body>
        <section>
            <div>
                <canvas id="canvas" width="640" height="480">
                    Your browser does not support HTML5.
                </canvas>
            </div>
            <script type="text/javascript">
//Start of script
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

var x = 200;
var y = 200;
var thrust = 0.25;
var decay = 0.99;
var maxSpeed = 2;
var turnSpeed = 2;
var tempSpeed = 0;
var direction = 0;
var xSpeed = 0;
var ySpeed = 0;

function move() {
if (38 in keysDown) { // Player holding up
    xSpeed += thrust * Math.sin(direction * (Math.PI / 180));
    ySpeed += thrust * Math.cos(direction * (Math.PI / 180));
}
else {
    xSpeed *= decay;
    ySpeed *= decay;
}
if (37 in keysDown) { // Player holding left
    direction += turnSpeed;
}
if (39 in keysDown) { // Player holding right
    direction -= turnSpeed;
}
if (40 in keysDown) { // Player holding down
}

tempSpeed = Math.sqrt((xSpeed * xSpeed) + (ySpeed * ySpeed));
if(tempSpeed > maxSpeed) {
    xSpeed *= maxSpeed / tempSpeed;
    ySpeed *= maxSpeed / tempSpeed;
}

x += xSpeed;
y += ySpeed;
}

function degtorad(angle) {
return angle * (Math.PI/180);
}

function loop() {
ctx.clearRect(0, 0, canvas.width, canvas.height);

ctx.fillStyle = "grey";
ctx.strokeStyle = "black";
ctx.beginPath();
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.stroke();

move();
ctx.strokeStyle = "red";
ctx.beginPath();
ctx.arc(x,y,10,0,2*Math.PI);
ctx.stroke();
}

setInterval(loop, 2);
var keysDown = {};

addEventListener("keydown", function (e) {
keysDown[e.keyCode] = true;
}, false);

addEventListener("keyup", function (e) {
    delete keysDown[e.keyCode];
}, false);

            </script>
        </section>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:34:13.133

使用**[window.requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)**，这就是它的意义所在。现在，您正尝试以每两毫秒 1 步的速度运行游戏——即 500 FPS。

```
// target the user's browser.
(function() {
  var requestAnimationFrame = window.requestAnimationFrame || 
                              window.mozRequestAnimationFrame || 
                              window.webkitRequestAnimationFrame ||
                              window.msRequestAnimationFrame;

  window.requestAnimationFrame = requestAnimationFrame;
})();

function loop() {
    // game loop logic here...
}

requestAnimationFrame(loop); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:49:16.090

```
delete keysDown[e.keyCode]; 
```

也不好。不断地创建和删除一个数组元素比仅仅将它的值设置为真/假要慢得多。

```
keysDown[e.keyCode] = false;    //  faster & better 
```

FPS 应与显示器刷新率相同。如果您看不到它，那么高 FPS 对您来说毫无意义。除了说 CPU 将更加努力地计算无法在屏幕上渲染的帧。甚至在理论上也没有。

# mysql - mySQL 命令行有效，但 ODBC 和工作台无效

> ID：14492916
> 
> 赞同：2
> 
> 时间：2013-01-24T02:27:01.827
> 
> 标签：mysql, database, odbc, driver

我正在尝试测试与远程 linux 服务器上运行的 mySQL 数据库的连接。我正在运行 Windows 7 并在我的机器上安装了 mySQL 以及 32 位 ODBC 驱动程序。我可以毫无问题地从 DOS 命令提示符连接。但我无法使用 mySQL 工作台或 ODBC（来自 MS Access）进行连接。

在 MySQL 工作台中，我的错误是：您的用户 'username' 从主机到服务器的连接尝试失败 'xxxx:x': Unknown MySQL server host 'xxxx' (0)

在 MS Acess（ODBC 驱动程序）中，我的错误是：连接失败：[HY000][MySQL][ODBC 5.2(w) Driver]Can't connect to MySQL server on 'xxxx' (10061)

我已经广泛搜索了 stackoverflow，发现很多人无法与任何工作联系。但我知道我可以从我的电脑登录。它可能是端口以外的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:08:16.217

请确保您在 MySQL 工作台中使用正确的 IP 地址连接到您的 mysql 数据库

# google-maps - 我的网站上的谷歌地图与移动设备兼容吗？

> ID：14492918
> 
> 赞同：0
> 
> 时间：2013-01-24T02:27:09.340
> 
> 标签：google-maps, twitter-bootstrap

我需要在我的引导程序中实现谷歌地图，但我不确定 iframe 是否适用于手机，是否有适用于移动和桌面的谷歌地图版本

我尝试了谷歌，但没有任何结果

```
<iframe id="maps" width="325" height="208" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" 
                src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=8207+Central+Ave+NE,+Albuquerque,+NM&amp;aq=0&amp;oq=8207+central+ave+ne+a&amp;sll=34.166233,-106.026069&amp;sspn=15.047206,19.753418&amp;ie=UTF8&amp;hq=&amp;hnear=8207+Central+Ave+NE,+Albuquerque,+Bernalillo,+New+Mexico+87108&amp;ll=35.074854,-106.555821&amp;spn=0.00364,0.004823&amp;t=m&amp;z=14&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=8207+Central+Ave+NE,+Albuquerque,+NM&amp;aq=0&amp;oq=8207+central+ave+ne+a&amp;sll=34.166233,-106.026069&amp;sspn=15.047206,19.753418&amp;ie=UTF8&amp;hq=&amp;hnear=8207+Central+Ave+NE,+Albuquerque,+Bernalillo,+New+Mexico+87108&amp;ll=35.074854,-106.555821&amp;spn=0.00364,0.004823&amp;t=m&amp;z=14" style=" color:#0000FF;text-align:left">View Larger Map</a></small> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:39:03.127

[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/)是为移动设备和桌面设备开发的。只需确保设置**视口**元标记，并将**html**、**body**和**map div**（下面的 id **map-canvas**）设置为：

```
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
</style> 
```

研究[Hello world](https://developers.google.com/maps/documentation/javascript/tutorial#HelloWorld)示例，了解如何使其全部工作。

# javascript - jQuery click() 失败并显示“无法转换 JavaScript 参数”

> ID：14492922
> 
> 赞同：0
> 
> 时间：2013-01-24T02:27:55.523
> 
> 标签：javascript, jquery, event-handling, click

这是设置：用户在我的页面上填写了某个表单，该表单是通过 AJAX (jQuery `$.post`) 提交的。在返回函数中，我向与提交的表单相关的页面添加了一个元素。该元素`click()`附加了一个处理程序。该元素毫无问题地出现在页面上，但是当我单击它时，我得到了可怕的“无法转换 JavaScript 参数”。这是将元素添加到页面的行：

```
$('<span class="appointment" id="a'+aid+'">'
    +type+name+'</span>').click(appointmentDetails).appendTo(calSlot); 
```

同样，这是在 jQuery`post`函数的成功回调中调用的。该`appointmentDetails`函数存在，所有变量也存在。我也试过这样：

```
var newHTML='<span class="appointment" id="a'+aid+'">'+type+name+'</span>';
$(calSlot).append(newHTML);
$("#a"+aid).click(appointmentDetails); 
```

该`appointmentDetails`函数使用传递的 ID 或`this.id`获取约会 ID，然后运行 ​​jQuery`.post`来获取和显示约会详细信息。以下是基础知识：

```
function appointmentDetails(appID) {
    if (!appID) var appID=$(this).attr("id").substr(1);
    $.post("data/appointments.php", {aid: appID, action: "details"}, function(data) {
        //Callback stuff. Doubtful it's relevant
    }, "xml");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:39:37.287

```
function appointmentDetails(appID) <-- 
```

appID 将是一个 jQuery 事件对象！

它不像您期望的那样未定义/错误。如果要重载此函数，则需要检查它是否是对象/字符串。

# entity-framework-5 - 实体框架部分实体更新

> ID：14492923
> 
> 赞同：3
> 
> 时间：2013-01-24T02:27:56.213
> 
> 标签：entity-framework-5

我正在使用 Asp.net Webapi 和 EF，并且在使用 Entity Framework 5 进行部分更新时遇到问题。

我通常会从 REST 服务中得到 20 个字段，我需要从完整的实体中更新这些字段。当我更新时，我将实体状态设置为已修改。整个实体一直在更新，覆盖表中不应因更新而更改的所有现有值。

我从 REST 服务获得的随机字段不是固定字段，它们可以帮助我识别哪些属性被更新。

我想知道这个问题是如何解决的，以及解决这个问题的做法是什么。

谢谢。

# php - 如何将 CSS 更改为相同的类但另一个输入名称

> ID：14492925
> 
> 赞同：2
> 
> 时间：2013-01-24T02:28:18.160
> 
> 标签：php, css

我的页面上有 5 个按钮，我想为他们的 CSS 设置样式，这样它们会有所不同，我不知道该怎么做。这是代码：

```
<input input class='field' type='button' name='a4' value='A4'/>
<input input class='field' type='button' name='a3' value='A3'/>
<input input class='field' type='button' name='a2' value='A2'/>
<input input class='field' type='button' name='a1' value='A1'/>
<input input class='field' type='button' name='a'  value='A'/> 
```

CSS 应该是这样的：

```
.field {
    width: 120px;
}

.field a1 {
    width: 220px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:30:24.623

您可以使用[属性选择器](http://msdn.microsoft.com/en-us/library/ie/hh869405%28v=vs.85%29.aspx)：

```
.field[name='a1'] {
    color: blue;
} 
```

它在所有主要浏览器中都得到了[很好的支持。](http://caniuse.com/#feat=css-sel2)[此处](http://jsfiddle.net/jonathansampson/sMuAS/)提供演示。

# machine-learning - 非二叉决策树到二叉决策树（机器学习）

> ID：14492933
> 
> 赞同：1
> 
> 时间：2013-01-24T02:29:03.023
> 
> 标签：machine-learning, decision-tree

这是作业问题，所以我只需要帮助可能是/否，我们将不胜感激！

*   证明：任意树（NON binary tree）可以转化为等价的二叉决策树。

我的回答：每个决定都可以仅使用二元决策来生成。因此，决策树也是如此。我不知道正式的证据。就像我可以与熵（实际上是增益）争论的那样，该节点将是 E(S) - E(L) - E(R)。在此之前可能是 E(S) - E(Y|X=t1) - E(Y|X=t2) - 依此类推。

却不知道怎么说？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:30:48.717

你可以给出这样的建设性证明，演示如何将任意决策树转换为二叉决策树。

假设您坐在节点 A 处，并且您可以根据您的示例是否满足要求 B、C 或 D 来选择遍历 B、C 和 D。如果这是一个正确的决策树，则 B、C 和D 是互斥的，涵盖所有情况。

```
A -> B
  -> C
  -> D 
```

由于它们是互斥的，你可以想象将你的树分成一个二元决定：B 或不是 B；在非 B 分支上，我们知道 C 或 D 必须为真，因为 B、C 和 D 是互斥的并且涵盖所有情况。换句话说：

```
A -> B
  -> ~B
  ---> C
  ---> D 
```

然后，您可以将 B 之后的任何内容复制到 B 之后的分支，执行相同的简化。C 和 D 相同。

# hadoop - 新版本的 mahout 中 prepare20newsgroups 的替代方案是什么

> ID：14492937
> 
> 赞同：0
> 
> 时间：2013-01-24T02:29:20.820
> 
> 标签：hadoop, mahout

我是 hadoop 和 mahout 的新手，我想问“在新版本的 mahout 中，prepare20newsgroups 的替代方案是什么”，因为当我运行以下命令时：</p>

```
mahout prepare20newsgroups 
```

结果是

```
ERROR driver.MahoutDriver: : Try the new vector backed naivebayes classifier see examples/bin/classify-20newsgroups.sh 
```

那我该怎么办，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T22:35:05.013

似乎对于您的 Mahout 版本，prepare20newsgroups 已被弃用，运行：

现在，您必须从 $MAHOUT_HOME 运行：

```
examples/bin/classify-20newsgroups.sh 
```

[这里是 jira 问题](https://issues.apache.org/jira/browse/MAHOUT-1006)，[在这里](http://www.feeny.org/apache-mahout-prepare20newsgroups-in-version-7/)你可以找到一些有用的帮助。

# ajax - Wordpress：带有分页的一页中的多个自定义循环

> ID：14492939
> 
> 赞同：3
> 
> 时间：2013-01-24T02:29:32.833
> 
> 标签：ajax, wordpress, loops, pagination

我发现这里的解释非常有用：[http](http://codex.wordpress.org/The_Loop#Multiple_Loops) ://codex.wordpress.org/The_Loop#Multiple_Loops ，除了它**没有**告诉我如何获得多个循环的**分页**。我也在这里阅读了一些类似的问题，但它们要么没有得到回答，要么没有真正起作用。以下是我用于两个不同自定义循环的代码：

```
$myLoop1 = new WP_Query("tag='myTag1'&showposts=5"&paged=" . $paged ); 
while($myLoop1->have_posts()) : $myLoop1->the_post();
//do something...
endwhile;

$myLoop2 = new WP_Query("tag='myTag2'&showposts=5"&paged=" . $paged ); 
while($myLoop2->have_posts()) : $myLoop2->the_post();
//do something...
endwhile; 
```

这里的教程：[http](http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin/) ://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin/ 应该可以顺利完成分页，但我尝试了很多次，它永远不会工作。页面的链接始终是 www.myDomain.com/page/# 这是一个通用页面地址，而不是我的自定义循环。

此外，是否可以对分页进行 ajaxify 以便访问者可以在停留在页面上的同时转到循环的不同页面？这是次要的，第一个问题对我来说更重要。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:54:58.200

感谢@brasofilo 的建议，我终于找到了解决方案！以下链接的答案允许您在同一页面中拥有任意数量的自定义循环！

[https://wordpress.stackexchange.com/questions/47259/multiple-wp-query-loops-with-pagination](https://wordpress.stackexchange.com/questions/47259/multiple-wp-query-loops-with-pagination)

ps如果有人有ajax解决方案，我很想知道！

# c# - 保持 DataGridView 自动排序

> ID：14492945
> 
> 赞同：8
> 
> 时间：2013-01-24T02:30:06.967
> 
> 标签：c#, datagridview, bindingsource

[如本文所述，](http://msdn.microsoft.com/en-us/library/ms993236.aspx)我有一个`DataGridView`由 a 支持的。`SortableBindingList`

这本质上是一个`BindingList`其数据源是自定义对象列表。底层自定义对象以编程方式更新。

我`SortableBindingList`允许我按升序或降序对每一列进行排序。我通过重载`ApplySortCore`方法 来做到这一点

```
protected override void ApplySortCore(PropertyDescriptor prop,
                                      ListSortDirection direction) 
```

这适用于单击列标题时的排序，但当以编程方式更新该列中的单元格时不会自动排序。

有没有其他人想出一个很好的解决方案来保持`DataGridView`对其底层数据源的编程更新的排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T05:51:27.963

尝试覆盖 OnDataSourceChanged 事件

```
public class MyGrid : DataGridView {
    protected override void OnDataSourceChanged(EventArgs e)
    {
        base.OnDataSourceChanged(e);
        MyComparer YourComparer = null;
        this.Sort(YourComparer);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T13:11:47.660

考虑这个类：

```
public class MyClass : INotifyPropertyChanged
{
    private int _id;
    private string _value;

    public int Id
    {
        get
        {
            return _id;
        }
        set
        {
            PropertyChanged(this, new PropertyChangedEventArgs("Id"));
            _id = value;
        }
    }
    public string Value
    {
        get
        {
            return _value;
        }
        set
        {
            PropertyChanged(this, new PropertyChangedEventArgs("Value"));
            _value = value;
        }
    }
    public event PropertyChangedEventHandler PropertyChanged = new PropertyChangedEventHandler(OnPropertyChanged);

    private static void OnPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        // optional code logic
    }
} 
```

将这些方法添加到您的可排序绑定列表中：

```
public class SortableBindingList<T> : BindingList<T>, INotifyPropertyChanged
    where T : class
{
    public void Add(INotifyPropertyChanged item)
    {
        item.PropertyChanged += item_PropertyChanged;
        base.Add((T)item);
    }

    void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        this.PropertyChanged(sender, new PropertyChangedEventArgs(String.Format("{0}:{1}", sender, e)));
    }

    // other content in the method body
} 
```

并在您的表单中使用此示例方法：

```
public Form1()
{
    InitializeComponent();
    source = new SortableBindingList<MyClass>();
    source.Add(new MyClass() { Id = 1, Value = "one test" });
    source.Add(new MyClass() { Id = 2, Value = "second test" });
    source.Add(new MyClass() { Id = 3, Value = "another test" });
    source.PropertyChanged += source_PropertyChanged;
    dataGridView1.DataSource = source;

}

void source_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    MessageBox.Show(e.PropertyName);
    dataGridView1.DataSource = source;
}

private void button1_Click(object sender, EventArgs e)
{
    ((MyClass)source[0]).Id++;
} 
```

# php - 给定比率，拆分输入数据？

> ID：14492946
> 
> 赞同：-3
> 
> 时间：2013-01-24T02:30:14.593
> 
> 标签：php, mysql

我正在尝试制作拳击模块。我有这样的数据。

```
RATIO  
S:1  M:2  L:2 XL:1 
```

情况1：

```

颜色 尺寸                 
         S、M、L、XL    
红 10 20 20 8   
蓝色 5 10 10 5
白色 10 30 20 10

```

现在如果我设置 box qty = 30 那么我希望得到

```
box_no, 颜色 S, M, L, XL  
1 红 5、10、10、5

2 红 5、10、10、3
2 蓝色 0, 0, 0, 2     

3 蓝色 5、10、10、3
3 白色 0, 0, 0, 2

4 白色 5、10、10、5
5 白色 5, 10, 10, 5
6 白色 0, 10, 0, 0

```

案例二：

```

颜色 尺寸                 
         S、M、L、XL    
红色 1 2 2 2   
蓝色 1 2 2 1
白色 1 3 2 1

```

现在如果我设置 box qty = 30 那么我希望将所有东西都放在 1 个盒子里

```
box_no, 颜色 S, M, L, XL  
1 红 1 2 2 2   
1 蓝色 1 2 2 1
1 白色 1 3 2 1

```

我如何用 php 实现这一点？

我不是在问整个工作代码。我被卡住了，花了几个小时没有任何进展。请帮助我如何开始或指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:35:13.037

您的比率目前是一个计数。把它变成一个适当的比例。

*   首先将计数相加（1+2+2+1=6）
*   将每个尺寸计数除以总和，得到 1/6、2/6、2/6、1/6。
*   然后在填充输出列表时将它们乘以 *30。
*   从可用性数字中减去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:13:22.913

我没有声明/初始化所有变量，也不关心格式，但这是我的想法：

```
//Sum ratios
$ratioSum = $s + $m + $l +xl;

//Count how many slots a box should have (acorrding to the smalest piece)
$boxSlotCount = $qty/$ratioSum;

//Count the size of each box bins in slots according to ratio
$binS = $s * $boxSlotCount;
$binM = $m * $boxSlotCount;
$binL = $l * $boxSlotCount;
$binXL = $xl * $boxSlotCount;

//Loop while we have items in any of the big boxes.
$i = 1;
while ($S>0 || $M>0 || $L>0 || $XL>0)
{
   echo $i;
   //If the big boxes are hold more items than a little box bin can
   //Than write the max size of a box bin
   //Otherwise write the amount of items in the big box
   echo ($S-$binS>0) ? $binS : $S;
   echo ($M-$binM>0) ? $binM : $M;
   echo ($L-$binL>0) ? $binL : $L;
   echo ($XL-$binXL>0) ? $binXL : $XL;

   //Subtract the items we put from the big boxes to the little ones
   $S -= $binS;
   $M -= $binM;
   $L -= $binL;
   $XL -= $binXL;
   $i++;
} 
```

# perl - 如何在 Perl 中使用 map 编写字数统计代码？

> ID：14492947
> 
> 赞同：-2
> 
> 时间：2013-01-24T02:30:15.490
> 
> 标签：perl

我的样本数据：

```
1 2 A
1 2 3 B
1 A
1 2 3 C
1 3 A
1 3 B 
```

我要数最后一个字的个数

我的 Perl 代码：

```
my %tmp;
while(<>) {
    chomp;
    my $last=(split)[-1];
    $tmp{$last}++;
}
while(my ($k,$v)=each %tmp){
    print "$k=>$v\n"
} 
```

它工作正常。我最近学习了，，，，但是`grep`不太明白。我尝试在一行中使用多个代码编写上述代码。不成功。`map``sort``map`

你能告诉我怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:36:43.980

Is this the sort of thing you mean?

It may be fun to play with, but you should *always* go for clarity over fancy coding. `map` and `grep` are rarely significantly faster than the equivalent `for` loop, and can use up much more memory.

```
use strict;
use warnings;

my %tmp;
$tmp{$_}++ for map { (split)[-1] } <>;
print for map "$_ => $tmp{$_}\n", sort keys %tmp; 
```

**output**

```
A => 3
B => 2
C => 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:40:45.227

`map`转换一个列表。您没有要转换的列表。

`grep`过滤列表。您无需过滤任何内容。

`sort`排序。您可以使用它对输出进行排序。（如果您在对输出进行排序时遇到问题，请随时提出有关它的问题。一定要包括对您的问题的描述以及它的演示。）

# python - py2neo 列出数据库中的所有节点

> ID：14492951
> 
> 赞同：0
> 
> 时间：2013-01-24T02:30:41.393
> 
> 标签：python, py2neo

我正在尝试从我的 neo4j 数据库中的索引中列出所有节点。以下代码有效，但是当我在索引中有超过 10K 时它只打印出大约 600 个节点。我怀疑我使用了错误的方法。任何帮助表示赞赏。

```
myindex = graph_db.get_or_create_index(neo4j.Node, "nodeID")
allnodes = myindex.query("nodeID:*")
for i in allnodes:
    value1 = "{0}".format(i['nodeID'])
    print value1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:50:13.663

根据您在此处发布的内容，我看不出有任何原因无法正常工作。也许你正在达到我还没有遇到的某种限制。你有任何可以发布的日志输出吗？

如果您想私下联系（通过电子邮件），并愿意共享您的源数据库，我可以尝试帮助您解决这个特殊情况，看看是否可以确定更普遍的问题。

# google-chrome-extension - chrome扩展内容脚本未从后台脚本长寿命连接接收消息

> ID：14492953
> 
> 赞同：1
> 
> 时间：2013-01-24T02:30:51.627
> 
> 标签：google-chrome-extension

我在 Chrome 中处理消息时遇到了令人沮丧的问题，

我的背景页面和弹出页面上有一个长期存在的连接，内容页面能够发送消息但不能接收。

我已经厌倦了许多方法，但没有快乐。

有人遇到过这种情况么？

内容.js

```
coms = chrome.extension.connect({name: "coms"});
coms.onMessage.addListener(function(data) {
    console.log("com chatter");
}); 
```

popup.js

```
coms = chrome.extension.connect({name: "coms"});

chrome.extension.onConnect.addListener(function(port) {
   console.assert(port.name == "coms");
   port.onMessage.addListener(function(msg) {
      console.log("com chatter");
   });
}); 
```

# javascript - Highcharts中的反向轴从表中获取数据

> ID：14492954
> 
> 赞同：0
> 
> 时间：2013-01-24T02:31:01.307
> 
> 标签：javascript, html, charts, highcharts, html-table

我正在尝试在表格中的 highcharts 图表上设置 x 轴，以便它是月份。y 轴就是单位。把我真的不知道如何改变这一点。我尝试更改此部分：

```
options.xAxis.categories = [];
        $('thead th', table).each( function(i) {
            options.xAxis.categories.push(this.innerHTML);
        }); 
```

但没有运气。因此，我将其保留为默认值，希望有人能够提供帮助。

[您可以在此 JSFiddle](http://jsfiddle.net/e3Pm2/2/)查看我尝试执行的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:58:54.947

从您的代码看来，您的月份是 in`thead`而不是`tbody`. 所以你应该真正使用`$('thead th')`选择器。我还建议使用[`:parent`选择器](http://api.jquery.com/parent-selector/)过滤掉空`th`s

```
$('thead th:parent', table).each( function(i) {
    var month=$(this).text();
    options.xAxis.categories.push(month);
}); 
```

此外，如果您希望 x 轴为月份，您的系列数据需要更改，您现在应该只有 3 个系列，而不是之前的 6 个。每个系列现在将有 6 个点（每个月一个）而不是前 3 点/系列。所以你的表格解析需要改变成这样的东西。

```
options.series = [];
$('tbody tr', table).each(function (i) {
    var tr = this;
    var serie = {};
    serie.name = $('th', tr).text();
    serie.data = [];
    $('td', tr).each(function (j) {
        serie.data.push(parseFloat(this.innerHTML));
    });
    options.series.push(serie);
}); 
```

**[演示@jsFiddle](http://jsfiddle.net/jugal/PM7XG/)**

# jasper-reports - 如何将子报告值传递给主报告？

> ID：14492956
> 
> 赞同：0
> 
> 时间：2013-01-24T02:31:09.377
> 
> 标签：jasper-reports

**这是关系表**

```
StudentName
Course
Marks

Peter
Bio
65

Peter
Chem
70

Peter
Music
80

David
Chem
50 
```

**我怎样才能做出类似以下的东西**

```
Peter            Total : 215

Subject : Bio    -   65
Subject : Chem   -   70
Subject : Music  -   80

Peter            Total : 50

Subject : Chem   -   50 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:14:39.960

我不会为此使用子报表，因为这可以通过更简单的方式实现：您可以利用报表组和变量来实现这一点。确保根据输出对数据进行排序。

**准备**

*   根据*StudentName*创建报告组。在报告的报告检查器中右键单击 iReport，然后选择*Add Report group*。按照向导，给它一个名字（例如`Student`），选择字段`StudentName`作为组表达式，添加页眉但不添加页脚。
*   创建一个变量来保存学生的总数。*在变量*的报表检查器中右键单击 iReport，然后选择*添加变量*。在属性面板中配置如下：名称：totalMarkByStudent，变量类：java.lang.Long，计算：Sum，重置类型：组，重置组：学生，变量表达式：$F{Marks}。将其余部分保留为其默认值。

**报告设计**

*   `StudentName`将字段从报表检查器拖放到报表设计器中的学生组标题带中。将弹出一个询问应显示哪种值的弹出窗口，选择*字段值*并单击确定。
*   `totalMarksByStudent` 将变量从报表检查器拖放到报表设计器的学生组标题带中。单击文本字段并在属性面板中修改以下设置：

    *   *宽度*：（`200`留出更多空间）
    *   *文本字段表达式*：`"Total : " + $V{totalMarkByStudent}`
    *   *表达类*：`java.lang.String`
    *   *评估时间*：（`Group`意味着一旦组的处理完成，值就会被评估）
    *   *评估组*：`Student`
*   *将字段Course*和*Marks*从报告检查器拖放到报告设计器的详细信息带中。右键单击课程字段并选择*编辑表达式*。将表达式更改为`"Subject : " + $F{Course}`并单击应用。

使用此配置，您可以获得如下图所示的报告输出。 ![报告输出](../Images/a1512334d8972d8dffed5bb92ea83e9e.png)

如需进一步参考此处使用报告组和变量的完整 JRXML：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report3" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="0dfbb9b2-a9ce-4447-beee-37d653140dd1">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[select * from (
Select 'Peter' as StudentName, 'Bio' as Course, 65 as Marks
union select 'Peter', 'Chem', 70
union select 'Peter', 'Music', 80
union select 'David', 'Chem', 50
) tbl

order by StudentName, Course]]>
    </queryString>
    <field name="StudentName" class="java.lang.String"/>
    <field name="Course" class="java.lang.String"/>
    <field name="Marks" class="java.lang.Long"/>
    <variable name="totalMarkByStudent" class="java.lang.Long" resetType="Group" resetGroup="Student" calculation="Sum">
        <variableExpression><![CDATA[$F{Marks}]]></variableExpression>
    </variable>
    <group name="Student">
        <groupExpression><![CDATA[$F{StudentName}]]></groupExpression>
        <groupHeader>
            <band height="50">
                <textField>
                    <reportElement uuid="ea996b6c-d41d-47bb-bef1-5df580b5c161" x="0" y="30" width="100" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{StudentName}]]></textFieldExpression>
                </textField>
                <textField evaluationTime="Group" evaluationGroup="Student">
                    <reportElement uuid="8ddc9b5b-9c57-4fce-8ed0-587c6b54143c" x="180" y="30" width="200" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA["Total : " + $V{totalMarkByStudent}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <detail>
        <band height="20">
            <textField>
                <reportElement uuid="f67b4e51-4da6-4758-b3d3-bd75de70c0f7" x="0" y="0" width="180" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["Subject : " +  $F{Course}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="ea82c278-d2f3-4467-bf5d-8dab9ff99ae3" x="180" y="0" width="277" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{Marks}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

**如果您改用子报表**

我假设子报表是用学生 ID 参数化的，显示给定学生的数据。主`StudentName`报表在详细信息面板中显示字段和子报表。

*   `total`在计算学生总数的子报表中创建一个变量。
*   `totalByStudent`在主报表中创建一个变量，计算类型设置为`System`。
*   单击子报表，然后在属性面板中单击返回值。单击添加并选择：子报表变量：total，本地目标变量：totalByStudent，其余保持默认。单击确定。
*   将变量拖放`totalByStudent`到详细信息带中。选择它并在 Properties 面板中将 Evaluation time 设置为*Band*。输出将与上图相同。

我建议使用带有报告组和变量的方法，因为它降低了报告的复杂性，并且这种方式的性能会更好。

# html - 为什么这个 CSS 不会像这张图片那样是响应式设计？

> ID：14492959
> 
> 赞同：0
> 
> 时间：2013-01-24T02:31:41.860
> 
> 标签：html, css

我正在尝试进行响应式设计。

主要有左右两个部分。左侧部分始终必须为 300 像素，右侧部分将是灵活宽度。

但最小宽度必须为 300 像素，当宽度小于 300 像素时应显示在底部（见下图）

为什么这个 CSS 不会像这张图片那样是响应式设计？

这是演示[http://jsfiddle.net/5Uy2Y/](http://jsfiddle.net/5Uy2Y/) 在我的演示中，我没有为每个单元格设置边框。请忽略这一点。

![在此处输入图像描述](../Images/acb31c996a15572202fe9ace7f88f764.png)

**HTML**我可以删除`<div class="box">`吗？

```
<div class="Row">
    <div class="box">
    <div class="Left">  
        <div class="posted_at">July 22, 2013 04:34:14</div>
        <div class="user">John Smith</div>
        <div class="location">California</div>
    </div>
    </div>

    <div class="box">
    <div class="Right">
        <div class="body">Hello, I'm John Smith Nice to know you</div>
    </div>
    </div>

</div> 
```

**CSS**

```
div.Row{
    border:2px solid rgb(0, 0, 0);
    min-width: 300px;
    margin-bottom: 20px;
    margin-right: 20px;
    float:left;
    display:block;  
}

div.Box{
    padding:0px;
    text-align:center;
    float:left;
}

div.Left{
    width:300px;
    text-align:center;
    padding:5px;
    clear:both;
}

div.Right{
    text-align:left;
    clear:both;
    min-width: 300px;
}

div.posted_at{
}
div.user{
}
div.location{
}
div.body{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:40:48.067

使用媒体查询：

```
@media (min-width: 600px) 
{

   .box{
    display:block;
    position:static;
    float:none
   }

} 
```

使用媒体查询，您可以将自定义 css 写入具有不同宽度的设备。在此示例中，`.box`该类在小于 600 像素的屏幕上表现不同。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

您还可以`.box`使用 jQuery 的`.removeClass()`方法删除该类。

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

**这就是我在没有媒体查询的情况下会做的事情。**

```
.box{
    padding:0px;
    text-align:center;
    display:inline-block;
}

.Left{
    width:300px;
    text-align:center;
    padding:5px;
    border:solid 1px black;
}

.Right{
    text-align:left;
    width: 300px;
    border:solid 1px black;
} 
```

你可以在这里看到小提琴[http://jsfiddle.net/5Uy2Y/1/](http://jsfiddle.net/5Uy2Y/1/)

# java - 跨应用程序发送参数

> ID：14492960
> 
> 赞同：1
> 
> 时间：2013-01-24T02:31:47.037
> 
> 标签：java, jakarta-ee, servlets, requestdispatcher

有没有办法可以在可能位于或可能不在同一台机器上的应用程序之间发送属性？

例如 ：

```
// IN APPLICATION 1 (APP-1)

request.setAttribute("Truth","Ghazal is the food for the soul of separation");
RequestDispatcher rd = request.getRequestDispatcher("http://IP/App-2/servlet");
rd.forward(request,response); 
```

* * *

```
// IN APPLICATION 2'S (APP-2)  SERVLET

String truth = request.getAttribute("Truth").toString();
// NOW USE THIS STRING 
```

让我们假设部署 app-1 的*IP与部署 app-2 的**IP*不同。

有什么方法可以在彼此远离的应用程序之间发送这样的参数吗？当我尝试时，我无法这样做，但可能有办法解决。

这两个应用程序都使用 Tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:48:08.933

如果您要在可变数量的机器之间共享状态，那么使用 HTTP 作为存储该状态的方法不是很可靠。

“属性”不通过 HTTP 传输，它们只是驻留在给定会话的应用程序上的共享状态。属性是 100% 纯粹的服务器端信息。

来自 Javadocs：

> “警告说，当请求从 servlet 分派时，RequestDispatcher 驻留在不同的 Web 应用程序中，此方法设置的对象可能无法在调用方 servlet 中正确检索。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:23:43.200

您可以创建一个基础包以通过应用程序使用

```
package base;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class GetXMLTask
{
    static double longitute;
    static double latitude;
    public ArrayList<JSONObject> getOutputFromUrl1(String url) 
    {
        ArrayList<JSONObject> output = new ArrayList<JSONObject>();
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response;
        StringBuilder builder= new StringBuilder();
        JSONObject myjson ;
        JSONArray the_json_array;
        try 
        {
            response = httpClient.execute(httpPost);
            BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            char[] buf = new char[8000];
            int l = 0;
                while (l >= 0) 
                {
                    builder.append(buf, 0, l);
                    l = in.read(buf);
                }
            myjson = new JSONObject("{child:"+builder.toString()+"}");
            JSONObject mmm = new JSONObject(builder.toString());
            JSONArray mmmArr = mmm.getJSONArray("status");
            the_json_array = myjson.getJSONArray("child");
            for (int i = 0; i < the_json_array.length(); i++) 
            {
                JSONObject another_json_object =  the_json_array.getJSONObject(i);
            output.add(another_json_object);
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return output;
    }
} 
```

现在从您的应用程序中调用此方法

```
ArrayList<JSONObject> obj = new GetXMLTask().getOutputFromUrl1("url for the other application method which responds"); 
```

# jquery - 从弹出窗口调用jquery选择的触发方法

> ID：14492964
> 
> 赞同：0
> 
> 时间：2013-01-24T02:32:15.677
> 
> 标签：jquery, popup, jquery-chosen

我被这个问题逼疯了，我在做一个asp.net web项目，所以我用facebox做一个页面弹出，弹出页面只是一个确认，用户需要点击确认按钮，然后我需要删除已使用 jquery selected.js 进行翻译的 select 选项。在主页上，选择

```
<select>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

在弹出的页面上，我调用了一个js方法

```
 var acqlistSelect = $("#selectId", window.parent.document);
        var acqlistSelectIndex = acqlistSelect.prop("selectedIndex");

        $("#selectId option", window.parent.document).eq(acqlistSelectIndex).remove();

        acqlistSelect.chosen({disable_search: true}).change();
        acqlistSelect.trigger("liszt:updated"); 
```

并且您知道选择的选定 li 没有被删除。但是如果我在主页本身上调用类似的方法，比如

```
 var acqlistSelectIndex = $("#selectId").prop("selectedIndex");
     $('#selectId option').eq(acqlistSelectIndex).remove();
     $('#selectId').chosen().change();
     $("#selectId").trigger("liszt:updated"); 
```

它完美地工作，选择的选择 li 已被删除。任何的想法。真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:06:10.100

好的，我已经想出了如何做到这一点，我在所选事件 liszt:updated 上添加了一些断点，我在运行代码时发现了

```
 var acqlistSelect = $("#selectId", window.parent.document);
    var acqlistSelectIndex = acqlistSelect.prop("selectedIndex");

    $("#selectId option", window.parent.document).eq(acqlistSelectIndex).remove();

    acqlistSelect.chosen({disable_search: true}).change();
    acqlistSelect.trigger("liszt:updated"); 
```

其实它没有打断点，但是主页上的js方法做到了，所以我打电话

```
parent.UpdateMethod(); 
```

从弹出页面中，它确实击中了它。好的。完毕

# c - 使用 execvp 后如何释放 malloc 创建的内存？

> ID：14492971
> 
> 赞同：7
> 
> 时间：2013-01-24T02:32:59.470
> 
> 标签：c, linux, exec

在我的 C 程序中，我创建了一个子进程，并在其中解析一个字符串并创建一个指针数组（使用`malloc()`），以便在`execvp()`命令中传递它。

但问题是，如何释放孩子创造的记忆？`execvp()`运行新任务，可能会也可能不会返回。如果它没有返回，那么它是成功的并且孩子死了（我不能真正使用该`free()`命令）。如果失败则返回，然后继续执行下一行代码，这是释放内存的唯一机会吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T03:30:36.843

你不需要。具体来说，如果您在调用`exec()`-type 例程（例如，`execvp()`在您的情况下）之前在进程中分配内存，则与原始可执行文件关联的所有内存都将被释放。这与一个进程退出（并释放其所有资源）和一个新进程以全新状态启动的情况类似。

# php - 如何制作可切换的推特供稿？

> ID：14492972
> 
> 赞同：1
> 
> 时间：2013-01-24T02:33:05.807
> 
> 标签：php, html, twitter

我试图为它制作一个 PHP 脚本，但我无法通过“wiget id”（标记为???）。

使用来自 twitter 的提要，我在链接中添加了变量，但我的 php 知识限制了我。它并不多，但这就是我想出的：

```
<?php
$feed = $_POST['Feed'];
    echo "<FORM NAME =\"Feed\" METHOD =\"POST\" action=\"\">
              <INPUT name=\"Feed\" TYPE = \"TEXT\" VALUE =\"BillGates\">
              <INPUT TYPE =\"Submit\" VALUE =\"OK\">
        </FORM>";
    echo "<button formaction=\"Feed\">Reload @" . $feed ."</button><br \>";
    echo "<a class=\"twitter-timeline\" data-dnt=true href=\"https://twitter.com/" . $feed . "\" data-widget-id=\"???????????????\">Tweets by @" . $feed . "</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=\"//platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");</script>";
    ?> 
```

# backbone.js - 使用主干 .fetch 从静态 .json 文件获取数据

> ID：14492979
> 
> 赞同：1
> 
> 时间：2013-01-24T02:33:52.870
> 
> 标签：backbone.js, backbone.js-collections

不知道为什么这不起作用，应用程序加载正常。每次调用加载函数时我都会收到错误，甚至没有请求 json 文件。

我已经使用相同的代码从 java 控制器加载数据，它工作正常，不确定静态 json 文件有何不同。

风景：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'validate',
  'collections/getBusiness',
  'text!templates/home/homeTemplate.html'
], function($, _, Backbone, validate, getBusiness, homeTemplate){

 var HomeView = Backbone.View.extend({
   el: $("#page"),

   events: {
     'click #data': 'data'
    },

    data: function(e) {
        getBusiness.fetch({
            success: function(r) {

            },
            error: function(r) {
                alert('error!');
            }
        });
    },

render: function(){

  this.$el.html(homeTemplate);

}

  });

  return HomeView;

}); 
```

该模型：

```
define([
'underscore',
'backbone'
], function(_, Backbone) {

var getModel = Backbone.Model.extend({

  });

  return getModel;

}); 
```

收藏：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'models/getModel'
], function($, _, Backbone, getModel){
  var getBusiness = Backbone.Collection.extend({

model: getModel,

    url: '../../json/data.json',

sync: function(method, model, options) {

    options.timeout = 100000;
            options.contentType = "application/json";
            options.cache = false;
            options.dataType = "json";
    return Backbone.sync(method, model, options);
},

parse: function(response) {
            return this.result;
},

  });

  return new getBusiness;
}); 
```

# sql - SQL - 在表中搜索重复值的所有实例

> ID：14492983
> 
> 赞同：1
> 
> 时间：2013-01-24T02:34:10.017
> 
> 标签：sql, sql-server, database, tsql

我正在寻找一种方法来搜索表中的重复值并将这些重复值（甚至只是一组重复值中的一个）作为结果集返回。

例如，假设我有这些数据：

```
uid | 半唯一标识
1 | 12345
2 | 21345
3 | 54321
4 | 41235
5 | 12345
6 | 21345

```

我需要返回：

```
12345
12345
21345
21345

```

或者：

```
12345
21345

```

我试过用谷歌搜索并不断缩短。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:37:44.023

对不起，我之前时间不够，所以我无法解释我的答案。第一个查询对相同的 semi_unique_id 进行分组，并仅返回具有重复项的那些。

```
SELECT semi_unique_id
FROM your_table
GROUP BY semi_unique_id
HAVING COUNT(semi_unique_id) > 1 
```

如果您也想在查询中获取 uid，您可以像这样轻松添加它。

```
SELECT uid,
       semi_unique_uid
FROM   your_table
GROUP BY
       semi_unique_id,
       uid
HAVING COUNT(semi_unique_id) > 1 
```

最后，如果您想了解每行返回多少重复项，您可以执行以下操作。

```
SELECT uid,
       semi_unique_uid,
       COUNT(semi_unique_uid) AS unique_id_count
FROM   your_table
GROUP BY
       semi_unique_id,
       uid
HAVING COUNT(semi_unique_id) > 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T02:44:23.830

要获取每一行，您可以使用窗口函数：

```
select t.*
from (select t.*, count(*) over (partition by [semi-unique id]) as totcnt
      from t
     ) t
where totcnt > 1 
```

要仅获取一个实例，请尝试以下操作：

```
select t.*
from (select t.*, count(*) over (partition by [semi-unique id]) as totcnt,
             row_number() over (partition by [semi-unique id] order by (select NULL)
                               ) as seqnum
      from t
     ) t
where totcnt > 1 and seqnum = 1 
```

这种方法的优点是您可以获得所有列，而不仅仅是 id（如果有帮助的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:05:56.827

```
SELECT t.semi_unique_id AS i
FROM   TABLE t
GROUP BY
       t.semi_unique_id
HAVING (COUNT(t.semi_unique_id) > 1) 
```

> 试试这个 sql-server

# javascript - JavaScript中的正则表达式拒绝3个连续字符

> ID：14492985
> 
> 赞同：3
> 
> 时间：2013-01-24T02:34:18.797
> 
> 标签：javascript, regex

我是正则表达式的新手，如果有人可以帮助我编写一个 JS 正则表达式来拒绝 3 个连续重复的字符，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T02:48:13.623

正则表达式：

```
/(.)\1\1/ 
```

将匹配包含三个重复字符的字符串。

# uiviewcontroller - 如何以编程方式从 UITabBarController 获取 ViewController？

> ID：14492988
> 
> 赞同：0
> 
> 时间：2013-01-24T02:34:26.580
> 
> 标签：uiviewcontroller, uitabbarcontroller

在我的一个中`UIViewControllers`，`UITabBarController`我这样做：

```
MyTabBarController *myTBC = (MyTabBarController*)self.parentViewController;
for(UIViewController *anyVC in myTBC) {
    if([anyVC.class isKindOfClass:[SecondViewController class]])
        sVC = (SecondViewController *)anyVC;
    sVC.userLocation = userLocation;
} 
```

但我在 for... 行收到警告说：

> 集合表达式类型 MyTabBarController 可能无法响应 countByEnumeratingWithState:objects:count。

`MyTabBarController`是 的子类`UITabBarController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:39:20.703

这一行：

```
for(UIViewController *anyVC in myTBC) { 
```

应该：

```
for(UIViewController *anyVC in myTBC.viewControllers) { 
```

# cocoa - 使用 LSSharedFileList

> ID：14492991
> 
> 赞同：1
> 
> 时间：2013-01-24T02:34:57.437
> 
> 标签：cocoa

我正在查看 LSSharedFileListQuestion 中的 LSSharedFileListCreate 函数，它被定义为：

```
LSSharedFileListCreate(CFAllocatorRef inAllocator, CFStringRef inListType,CFTypeRef listOptions) 
```

inAllocator 和 listOptions 始终设置为 null。我想知道除了 null 之外是否还有其他有效值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:26:56.180

`LSSharedFileListCreate`遵循与其他核心基础功能相同的约定。

您提供的`CFAllocatorRef`可以是`kCFAllocatorDefault`, `kCFAllocatorSystemDefault`, `kCFAllocatorMalloc`, `kCFAllocatorMallocZone`, `kCFAllocatorNull`, 或`kCFAllocatorUseContext`.

在大多数情况下，您要使用的是`kCFAllocatorDefault`，它是 的同义词`NULL`，如接口文件中所述。

您提供的价值`listOptions`完全取决于您提供的价值；有些有关联的值，有些没有。

例如，如果您提供`kLSSharedFileListVolumesComputerVisible`in `inListType`，您将提供一个`CFBoolean`值来指示`TRUE`或`FALSE`in `listOptions`。如果您提供了 example `kLSSharedFileListSessionLoginItems`，您将提供 NULL，因为没有关联的值。

# jquery - JQuery，使用变量作为选择器时遇到问题

> ID：14492996
> 
> 赞同：2
> 
> 时间：2013-01-24T02:35:14.383
> 
> 标签：jquery, jquery-selectors

我得到了这些练习指导：

编写一个选择器，在任务 div 中找到 UL，并将其存储到名为 task_list 的变量中。

```
 var task_list = $('div#tasks ul'); 
```

然后下一个让我感到困惑：

编写第二个选择器行，查找 task_list 中类名已完成的所有子项。将其存储到名为 all_completed 的变量中。使用 detach() 方法。在你的 all_completed 变量上调用 detach()。

```
 var all_completed = $(task_list).children('li.completed').detach(); 
```

或者

```
 $(all_completed).detach(task_list); 
```

有人可以帮帮我吗？这是否要求我创建一个变量并将其用作 jQuery 中的选择器？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:37:08.383

`task_list`已经是一个jquery对象，你不需要重新jquery（这是一个术语吗？）它。

```
var all_completed = task_list.children('li.completed').detach(); 
```