# StackOverflow 问答 15227000-15227999

# ruby - 红宝石日期计算

> ID：15227000
> 
> 赞同：0
> 
> 时间：2013-03-05T14:59:03.860
> 
> 标签：ruby, date

这不是我注意到的问题，而是想知道是否有人可以向我解释。

如果我使用内联类型语法，我会得到两个不同的互换答案：

```
irb(main):017:0> d = (Date.today >> 3) - (d.day + 1)
=> #<Date: 2013-06-01 ((2456445j,0s,0n),+0s,2299161j)>
irb(main):018:0> d = (Date.today >> 3) - (d.day + 1)
=> #<Date: 2013-06-03 ((2456447j,0s,0n),+0s,2299161j)>
irb(main):019:0> d = (Date.today >> 3) - (d.day + 1)
=> #<Date: 2013-06-01 ((2456445j,0s,0n),+0s,2299161j)>
irb(main):020:0> d = (Date.today >> 3) - (d.day + 1)
=> #<Date: 2013-06-03 ((2456447j,0s,0n),+0s,2299161j)> 
```

如果我在多行上做同样的事情，我每次都会得到相同的正确答案：

```
irb(main):025:0> d = Date.today
=> #<Date: 2013-03-05 ((2456357j,0s,0n),+0s,2299161j)>
irb(main):026:0> d = d >> 3
=> #<Date: 2013-06-05 ((2456449j,0s,0n),+0s,2299161j)>
irb(main):027:0> d = d - d.day + 1
=> #<Date: 2013-06-01 ((2456445j,0s,0n),+0s,2299161j)>
irb(main):028:0> d = Date.today
=> #<Date: 2013-03-05 ((2456357j,0s,0n),+0s,2299161j)>
irb(main):029:0> d = d >> 3
=> #<Date: 2013-06-05 ((2456449j,0s,0n),+0s,2299161j)>
irb(main):030:0> d = d - d.day + 1
=> #<Date: 2013-06-01 ((2456445j,0s,0n),+0s,2299161j)> 
```

任何想法为什么会发生这种情况？我只是有兴趣了解，因为在我看来，两种方式都应该总是返回相同的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:06:10.967

这与 Ruby 的日期格式无关。

It is to do with when `d` is evaluated in each expression on the right hand side. Namely, at the start of the statement evaluation, and not again during it:

```
d = 1
d = 1 + d + d
=> 3

d = 1
d = 1 + d
d = d + d
=> 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:02:17.290

`d.day`指的是 的现有值`d`，因此当您更改 的值时`d`，结果的值也会随之`d.day`变化。

如果要实现第二个示例的结果，请替换`d.day`为`Date.today.day`.

# git - 在网站部署中使用 git 的最佳实践

> ID：15227003
> 
> 赞同：8
> 
> 时间：2013-03-05T14:59:11.183
> 
> 标签：git

我目前正在一家公司实习五个月，我将改变开发人员访问文件的方式，即 git 而不是普通的 ftp 访问。到目前为止，git 的一切都很好，使用一个月后我对它的用法有点熟悉了。

这就是我现在的想法：

![在此处输入图像描述](../Images/8736eb992ff21b2427797af00e3994aa.png)

我们使用 beanstalk 作为 repo hoster，它带有一个非常容易工作的部署功能，所以这部分被覆盖了。让我思考的部分是分支方面的。我正在考虑创建一个名为“Live”的分支，而只是“master”。master 将部署到开发网站（图片右上角），live 分支将部署到 live 网站。另外，直播网站部署是手动的，但是master应该是自动的，到目前为止，没有问题。

当我想到对实时网站进行微小更改的场景时，它就会变得复杂。假设我需要更改一些随机 div 的填充，我不想将具有一半实现 api 的最新版本部署到实时网站，**我只想部署小的更改**，这可能吗？

我现在看到的方式是在两个地方进行修复，首先拉主分支并修复它，然后对实时分支执行相同的操作。但是随着更大的变化，这将变得更加困难。

此外，由于我们几乎所有内容都使用 Wordpress，因此大部分数据将存储在数据库中。这真的很好，因为我们只需要不时地克隆实时数据库，我们就完成了。但是当图像上传开始发挥作用时，事情变得非常丑陋。存储库中将包含一些图像（因为我们从一开始就没有使用 git，它们是完整副本中的），稍后将添加的其他图像将只是坐在 ftp 目录中，假装它们在回购！

*在 git中完全*不包含缓存和媒体之类的文件夹会更好，还是只包含一些，或者只是偶尔更新一次？

这些几乎是我最大的两个问题。

tl;dr：如何在不执行两次的情况下将小的更改提交到已过时的分支（也适用于 master）。git repo 中缓存/媒体文件的正常用法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T15:04:41.203

我建议您阅读[git flow](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)。

它解决了这个确切的问题。

基本上你有以下分支：

*   师父：你所谓的“活”
*   发展：这就是发展发生的地方
*   功能：在开发过程中进行较大的更改，这些更改太中断而无法在正常的开发分支上执行
*   修补程序：这是您的小修补程序。

重要的部分是哪个分支基于其他分支：

*   开发将从master分支出来。
*   功能将从开发中分支出来。
*   hotfix 将从 master 分支。

develop 的改动会在经过全面测试后合并到 master 中。合并到 master 意味着：这是一个发布，所有测试都完成了。

这意味着 master 始终包含当前的活动状态，因此从 master 分支一个修补程序可以保证不会引入开发所做的任何其他更改。

这只是对git flow 实现的[分支模型的简短描述。](http://nvie.com/posts/a-successful-git-branching-model/)我建议你完整地阅读它。它也有一些漂亮的图形:)

# php - PDO/Mysql PHP递归类别树显示所有项目

> ID：15227008
> 
> 赞同：0
> 
> 时间：2013-03-05T14:59:25.797
> 
> 标签：php, mysql, pdo

下午，

我正在使用递归函数从数据表中获取项目列表。但是如果结果超过 2000 似乎会使 'mysql go away'。

我已将数据库拆分为 3 个表：

```
menu = category_id,category,parent_id

item_categories = item_id,category_id

item_info = item_id,price etc.. 
```

所有 _id 都只是整数。

我遇到的问题是目前有 7000 个类别，子级别高达 7 深。

目前大约有 80000 个项目，可以分为多个类别。该数据库适用于特定的锅炉备件部门。

选择类别时，我想计算类别中的所有项目及其所有子类别中的所有项目，并按价格进行排序。我需要获得分页的总数，但我只希望每页显示大约 50 个结果，我根据客户选择按价格 ASC 或价格 DESC 排序。

为了尝试让页面加载看起来不错并给它一点额外的时间，我正在加载页面，然后一旦加载它就会通过 jquery 调用 itemview 页面，并在屏幕上显示一个加载器，直到返回结果。当“mysql 消失”时，加载程序只会停留在屏幕上..

我将 PDO 与 mysql 和 PHP 一起使用。我在所有 3 个数据表中都有索引。

任何指导将不胜感激..

# azure - Azure 架构设计

> ID：15227009
> 
> 赞同：3
> 
> 时间：2013-03-05T14:59:32.440
> 
> 标签：azure, azure-blob-storage

我是 Azure 的新手，对 blob 存储有点困惑。我需要客户端通过 FTP / SFTP 访问以推送和拉取文件（XML、CSV、EDI 等）。推送的文件由 .net 应用程序读取并写入数据库。据我了解，我们将使用 VM 角色来创建 FTP / SFTP 服务器，使用工作人员角色来执行 .net 代码，用于数据库的 SQL 存储和用于文件的 Blob 存储。

首先我在这个假设中是否正确，其次，VM 角色可以附加一个存储 blob 来写入和读取文件，并且工作人员角色也可以附加到同一个存储 blob 来读取和写入文件。

样本：

客户端通过 FTP 将 xml 文件推送到 VM。VM 将 XML 文件写入存储。Worker 角色读取文件、处理文件并将内容写入 db。

我的想法是正确的还是我错过了这条船？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:08:00.660

鉴于 Azure 有一系列服务，因此您有几个选择。使用 Azure 时要记住的一件重要事情是，您的**工作角色**（即没有安装 IIS 的 Windows Server 2008）非常灵活，因此您可以使用它们做很多事情——这包括编写自己的 FTP 服务器并能够通过工作角色虚拟机托管它。[FTP 到 Azure Blob 存储桥](http://ftp2azure.codeplex.com/)（在CodePlex 上）解决方案就是一个例子。

此外，您可以使用**Web 角色**（与辅助角色相同，但启用了 IIS）来执行相同操作 - 因此您可以使用 IIS，而不是滚动您自己的 FTP 服务器。可以在 ITQ 上找到[将 IIS 设置为在 Azure 中作为 FTP 服务器运行的可视指南。](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx)我建议做一些进一步的阅读以确定两者中哪个是更好的选择。还要考虑您的要求，因为这可能会影响您的方法，即扩展、带宽、成本、您首选的部署模型等。

就存储文件而言，您当然可以使用 Blob 存储。如果您的系统中不需要关系数据库，那么您可以完全跳过使用 SQL Azure（在这种情况下，上面提到的 Web 角色解决方案没有多大用处）——但这又归结为您的特定要求。

[Windows Azure 官方网站](http://www.windowsazure.com/en-us/documentation/)是一个很好的知识来源，尤其是在您刚开始的时候，所以请务必花时间浏览一些相关文档。

# ruby-on-rails - 工厂女孩不注册用户

> ID：15227010
> 
> 赞同：0
> 
> 时间：2013-03-05T14:59:39.057
> 
> 标签：ruby-on-rails, factory-bot

我查看了其他主题并进行了谷歌搜索，不幸的是没有一个解决方案有效。我刚刚开始编写我的第一个密码重置测试。我应该收到 Capybara elementnotfound 错误，因为没有标题或文本“密码”的链接。相反，工厂女孩说它不是注册用户。

```
 1) PasswordResets emails user when requesting password reset
     Failure/Error: user = FactoryGirl.create(:user)
     ArgumentError:
       Factory not registered: user
     # ./spec/requests/password_resets_spec.rb:5:in `block (2 levels) in <top (required)>' 
```

这是我的 password_reset_spec.rb：

```
require 'spec_helper'

describe "PasswordResets" do
  it "emails user when requesting password reset"
    user = FactoryGirl.create(:user)
    visit login_path
    click_link "password"
    fill_in "Email", :with => user.email
    click_button "Reset Password"
  end 
```

工厂.rb：

```
FactoryGirl.define do
  factory :user do
  f.sequence :email do |n| "foo#{n}@example.com"
  end
  f.password "secret"
end
end 
```

宝石文件：

```
gem 'rspec-rails', :group => [:test, :development]
group :test do
  gem 'factory_girl'
  gem 'capybara'
  gem 'guard-rspec'
  gem 'rb-fsevent'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:33:29.787

您的工厂声明中的语法不正确，我会使用以下内容：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) { |n| "foo#{n}@example.com" }
    password "secret"
  end
end 
```

# github - 允许读者用反馈注释我的要点

> ID：15227013
> 
> 赞同：3
> 
> 时间：2013-03-05T14:59:41.507
> 
> 标签：github, review

我想为我的一些 ruby​​ 代码创建一个要点，例如使用 github，然后与审阅者分享，然后审阅者将能够用他们的代码审阅笔记注释行。有没有办法做到这一点？我找不到...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T17:17:45.953

我正在寻找类似的东西，发现了这个：[http ://hpaste.org/](http://hpaste.org/)

在那里您可以粘贴您的文件内容，人们可以在其中添加评论，您可以查看差异等。它不是使用 github，但是既然您说“例如”，也许这也是一个选项？

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T17:24:46.677

你可以试试[CodeReview](https://codereview.stackexchange.com/) StackExchange；它是为这种事情而生的。

# javascript - 如何在多个文件上扩展 jquery.plugin

> ID：15227016
> 
> 赞同：3
> 
> 时间：2013-03-05T14:59:49.353
> 
> 标签：javascript, jquery, performance, jquery-plugins

我当前的插件变得非常大（现在刚刚超过 8000 行），我想知道是否有办法将它分类到不同的文件中。

就像 node.js 中的 require 函数一样，但是对于 jquery，它会被分类到更多的文件中，因此排列得更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:23:50.903

正如@jcubic 提到的，您需要将代码分成单独的模块/功能目的。

将所有方法存储在某种方法对象中（当然也可以在插件命名空间中）。这也可以很容易地添加到不同的文件中，甚至可以从不同的文件中扩展。

```
var methods = (function ($) {
    return {
        init       : function () { initMethod(); },
        another    : function () { anotherMethod(); },
        thirdThing : function () { thirdThing(); },
        etcEtc     : function () { etcEtc(); }
    };
}(jQuery)); 
```

我强烈推荐创建jQuery插件的方法调用方式，它会利用这个对象。

```
$.fn.pluginName = function (method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method) {
        return methods.init.apply(this, arguments);
    } else {
        $.error('Method ' + method + ' does not exist on jQuery.tooltip');
    }
}; 
```

现在一切都分开了，你通过做`$('whatever').pluginName('methodhere');`等来调用你的模块

# c - 使用 valgrind 进行 GDB 远程调试

> ID：15227017
> 
> 赞同：6
> 
> 时间：2013-03-05T14:59:53.160
> 
> 标签：c, debugging, gdb, valgrind

如果我使用远程调试`gdb`我连接到`gdbserver`使用

```
target remote host:2345 
```

如果我使用 valgrind 和 gdb 调试内存错误（以中断无效的内存访问），我使用

```
target remote | vgdb 
```

（开始后

```
valgrind --track-origins=yes --vgdb=yes --vgdb-error=0 [binary] 
```

在本地机器上）

我可以将两者结合起来调试远程机器上的内存错误吗？

请注意，我想避免在远程机器上使用登录 shell 在那里工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:42:32.323

> 我可以将两者结合起来调试远程机器上的内存错误吗？

是：当前 vgdb 接受`--port=`自此提交以来的参数：

```
r12204 | sewardj | 2011-10-22 13:38:08 -0700 (Sat, 22 Oct 2011) | 5 lines 
```

所以运行`vgdb --port=2345`，然后`(gdb) target remote host:2345`像往常一样。

# python - 带有python cgi的Javascript没有给出预期的结果

> ID：15227018
> 
> 赞同：2
> 
> 时间：2013-03-05T14:59:53.723
> 
> 标签：python, cgi

在下面的 Python CGI 脚本中，我使用 javascript 函数来更改点击时的图片。但显然它似乎不起作用。我正在关注[w3 学校 js 示例中的示例](http://www.w3schools.com/js/tryit.asp?filename=tryjs_lightbulb)。所以我只想遵守，是否可以在 Python CGI 脚本中使用 javascript。

如果必须在 Python 中完成相同的示例，应该采用什么方法。

```
#!/usr/bin/env python

import cgi

print """print "Content-type: text/html; charset=utf-8
<!DOCTYPE html>
<html>
<body>
<script>
function changeImage()
{
element=document.getElementById('myimage')
if (element.src.match("bulbon"))
  {
  element.src="../pic_bulboff.gif";
  }
else
  {
  element.src="../pic_bulbon.gif";
  }
}
</script>

<img id="myimage" onclick="changeImage()"
src="../pic_bulboff.gif" width="100" height="180">

<p>Click the light bulb to turn on/off the light</p>

</body>
</html>

""" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:18:18.050

是的，您可以通过 python CGI 脚本在 HTML 中发送 javascript。您必须更改要发送到的字符串的初始部分：

```
print """Content-type: text/html; charset=utf-8\n\n
<!DOCTYPE html>
... 
```

**编辑**以添加以下评论：

您的代码中有两个问题：

第一个，您必须删除部分“打印”，因为您已经在打印一个字符串；

第二，它是 CGI 的规范，它必须用“\n\n”分隔标题，例如。"content-type: text/html; charset=utf-8\n\n" 来自以下部分，例如。"...", (事实上你有一个隐含的 "\n"，再添加一个就足够了...)。

# jquery - 在我将 autoComplete 添加到下拉列表后，OnSelectedIndexChanged 事件停止触发。任何想法为什么？

> ID：15227024
> 
> 赞同：4
> 
> 时间：2013-03-05T15:00:09.667
> 
> 标签：jquery, asp.net, vb.net

我们有一个 id 的下拉列表控件`NewEmpName`。此下拉列表是使用员工用户名从数据库中自动填充的。此应用程序的用户使用它来提出请求。

当用户登录该系统时，他或她的姓名以及其他相关信息会根据用户的登录名自动填充到几个文本框中。

如果登录系统的用户正在向另一名员工提出请求，则该用户选择她/e 代表提出请求的员工的姓名。

通过从下拉列表中选择员工的姓名，`NewEmpName`包含登录用户记录的文本框将替换为刚刚从下拉列表中选择的员工的信息。

这可以通过使用`OnSelectedIndexChanged`事件

```
Sub ddl_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    empname.Text = CType(sender, DropDownList).SelectedValue 
```

一切都很好，直到我被要求添加自动完成功能，以便用户可以输入几个字符并从下拉列表中选择员工的姓名。

添加此自动完成功能后，`OnSelectedIndexChanged`事件不再触发。

有任何想法吗？

这是下拉列表代码隐藏：

```
Public Sub FillUsers()
    Dim cmd As New SqlCommand("Select SAMAccountName from ActiveDirectory order by SAMAccountName ASC", New SqlConnection(ConfigurationManager.ConnectionStrings("constr").ConnectionString))
    cmd.Connection.Open()

    Dim ddlValues As SqlDataReader
    ddlValues = cmd.ExecuteReader()

    newEmpname.DataSource = ddlValues
    newEmpname.DataValueField = "SAMAccountName"
    newEmpname.DataTextField = "SAMAccountName"
    newEmpname.DataBind()
    Me.newEmpname.Items.Insert(0, "newEmpname")

    cmd.Connection.Close()
    cmd.Connection.Dispose()
End Sub 
```

与下拉列表代码集成的部分自动完成代码：

```
Class Item
    Private _val As String
    Private _id As String

    Public Property sAMAccountName() As String
        Get
            Return _val
        End Get
        Set(ByVal value As String)
            _val = value
        End Set
    End Property
End Class 
```

如果需要，我可以发布 js 代码，但代码很长。

这是js和标记：

```
<link type="text/css" rel="Stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/redmond/jquery-ui.css" />
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.js"></script>  
     <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/jquery-ui.js"></script>
<meta charset="utf-8">

       <style type="text/css">
       .ui-button { margin-left: -1px; }
       .ui-button-icon-only .ui-button-text { padding: 0.35em; } 
       .ui-autocomplete-input { margin: 0; padding: 0.48em 0 0.47em 0.45em; }
       </style>

       <script type="text/javascript">

           function optionSelected(selectedValue) {
               document.title = selectedValue;
           }

           (function ($) {
               $.widget("ui.combobox", {
                   _create: function () {
                       var self = this,
                                  select = this.element.hide(),
                                  selected = select.children(":selected"),
                                  value = selected.val() ? selected.text() : "";
                       var input = this.input = $("<input>")
                                  .insertAfter(select)
                                  .val(value)
                                  .autocomplete({
                                      delay: 0,
                                      minLength: 0,
                                      source: function (request, response) {
                                          var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                                          response(select.children("option").map(function () {
                                              var text = $(this).text();
                                              if (this.value && (!request.term || matcher.test(text)))
                                                  return {
                                                      label: text.replace(
                                                                           new RegExp(
                                                                                  "(?![^&;]+;)(?!<[^<>]*)(" +
                                                                                  $.ui.autocomplete.escapeRegex(request.term) +
                                                                                  ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                                                           ), "<strong>$1</strong>"),
                                                      value: text,
                                                      option: this
                                                  };
                                          }));
                                      },
                                      select: function (event, ui) {
                                          ui.item.option.selected = true;
                                          self._trigger("selected", event, {
                                              item: ui.item.option
                                          });
                                          //JK
                                          optionSelected(ui.item.option.value);

                                      },
                                      change: function (event, ui) {
                                          if (!ui.item) {
                                              var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                                              valid = false;
                                              select.children("option").each(function () {
                                                  if ($(this).text().match(matcher)) {
                                                      this.selected = valid = true;
                                                      return false;
                                                  }
                                              });
                                              if (!valid) {
                                                  // remove invalid value, as it didn't match anything
                                                  $(this).val("");
                                                  select.val("");
                                                  input.data("autocomplete").term = "";
                                                  return false;
                                              }
                                          }
                                      }
                                  })
                                  .addClass("ui-widget ui-widget-content ui-corner-left");

                       input.data("autocomplete")._renderItem = function (ul, item) {
                           return $("<li></li>")
                                         .data("item.autocomplete", item)
                                         .append("<a>" + item.label + "</a>")
                                          .appendTo(ul);
                       };

                       this.button = $("<button type='button'>&nbsp;</button>")
                                  .attr("tabIndex", -1)
                                  .attr("title", "Show All Items")
                                  .insertAfter(input)
                                  .button({
                                      icons: {
                                          primary: "ui-icon-triangle-1-s"
                                      },
                                      text: false
                                  })
                                  .removeClass("ui-corner-all")
                                  .addClass("ui-corner-right ui-button-icon")
                                  .click(function () {
                                      // close if already visible
                                      if (input.autocomplete("widget").is(":visible")) {
                                          input.autocomplete("close");
                                          return;
                                      }

                                      // pass empty string as value to search for, displaying all results
                                      input.autocomplete("search", "");
                                      input.focus();
                                  });
                   },

                   destroy: function () {
                       this.input.remove();
                       this.button.remove();
                       this.element.show();
                       $.Widget.prototype.destroy.call(this);
                   }
               });
           })(jQuery);

           $(function () {
               $("#<%= newEmpName.ClientID%>").combobox();
               $("#toggle").click(function () {
                   $("#<%= newEmpName.ClientID%>").toggle();
               });
           });
    </script>

**Markup:**

  <asp:DropDownList ID="newEmpName" OnSelectedIndexChanged="ddl_SelectedIndexChanged" runat="server" CssClass="style26" AutoPostBack="True" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:22:09.990

使用自动完成，选定的索引不再变化，它始终是第一个，自动完成可能的替代列表正在变化，但所选项目的索引没有变化，它始终为 0。尝试使用一些基于触发器关于内容。

# joomla - joomla 2.5！自定义登录失败通知？

> ID：15227027
> 
> 赞同：1
> 
> 时间：2013-03-05T15:00:16.483
> 
> 标签：joomla, notifications

我在 joomla 2.5 中使用标准登录表单模块。如果用户输入了错误的密码，他只会收到一条通知***"Failed to authenticate: curl is not insalled"***。我如何自定义此通知。例如，***“密码错误。再试一次！”*** 感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:18:28.677

如果说没有安装**Curl**，那么您不应该更改语言字符串以使其呈现不同的消息，因为这不会解决任何问题。

联系您的主机并要求他们启用 PHP **Curl**扩展。但是我不确定为什么会出现此消息，因为我不相信 Joomla 将 Curl 用于身份验证脚本。无论哪种方式，请联系您的房东。

# blackberry - 超时关闭黑莓 HttpConnection

> ID：15227034
> 
> 赞同：2
> 
> 时间：2013-03-05T15:00:41.010
> 
> 标签：blackberry, java-me, httpconnection

我有一个定时器任务，它在触发时关闭连接，问题是有时它在连接实际打开之前被触发，如下所示：

```
try {
    HttpConnection conn = getMyConnection(); // Asume this returns a valid connection object

    // ... At this moment the timer triggers the worker wich closes the connection:
    conn.close(); // This is done by the timeTask before conn.getResponseCode()

    int mCode = conn.getResponseCode(); // BOOOMMMM!!!! EXPLOTION!!!!

    // ... Rest of my code here.

} catch(Throwable e) {
    System.out.println("ups..."); // This never gets called... Why?
} 
```

当我尝试`conn.getResponseCode()`时，抛出异常但不咳嗽，为什么？

我收到此错误：`ClientProtocol(HttpProtocolBase).transitionToState(int)`行：484 并且找不到源：S。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:14:39.327

连接存在于不同的线程中，并且有自己的生命周期。您正在尝试以同步方式从计时器线程访问它。

首先，连接是一个状态机。它从“设置”状态开始，然后如果在其上调用某些方法（任何需要联系服务器的方法），则更改为“已连接”状态，最后在连接完成后更改为“关闭”状态由服务器或客户端终止。该方法`getResponseCode`是可以导致连接从所谓的“设置”状态转换为“已连接”状态的方法之一，如果它尚未连接的话。您正在尝试立即获取响应代码，甚至不知道连接是否已建立。您甚至没有让连接时间正确连接或关闭。即使可以，也请查看 javadocs 对该[`close`](http://www.blackberry.com/developers/docs/4.5.0api/javax/microedition/io/Connection.html#close%28%29)方法的评价：

> *当一个连接被关闭时，访问它的任何方法，除了这个 close() 将导致一个 IOException 被抛出。*

如果您在关闭后确实需要做某事，请将“侦听器”对象传递给连接，以便它可以在连接关闭时回调，并返回响应代码（如果与服务器的连接曾经成立）。

# java - Restlet Android 客户端 - 如何将来自 ASP.NET Web API 的 JSON 响应映射到我的 Java 对象

> ID：15227040
> 
> 赞同：0
> 
> 时间：2013-03-05T15:01:01.500
> 
> 标签：java, android, rest, asp.net-web-api, restlet

我有点难以理解如何做到最好并将我的 JASON 响应从 ASP.NET Web API 服务器映射到我的 Java 类中。

我使用此代码来请求服务器数据。

```
ClientResource res = new ClientResource(ADDRESS_URL + "/exed/students/");
               Representation rep = res.get();
               try {
                   Log.d(TAG, rep.getText());
               } catch (IOException e) {
                   Log.d(TAG, e.getMessage());
               } 
```

我成功地可以检索到这个 JSON 表示。

```
{"$id":"1","StudentId":1,"RowVersion":"AAAAAAAAB9M=","User":{"$id":"2","UserId":1,"Username":"1","Password":"1","UserTypeId":1,"FirstName":"George","LastName":"Taskos","RowVersion":"AAAAAAAAB9I=","Student":{"$ref":"1"},"Teacher":null,"UserType":null}} 
```

现在我有了这些 Java 类。

用户。

```
public class User implements Serializable {

    // Private fields
    //
    private int userId;
    private String username;
    private String password;
    private int userTypeId;
    private String firstName;
    private String lastName;
    private String userType;
    private Timestamp rowVersion;

    // Setters
    // Getters....
 } 
```

和学生。

```
public class Student extends User implements Serializable {

    // Private fields
    private List<ClassType> classes;
    private List<ExamTaken> examsTaken;
    private Timestamp rowVersionStudent;
} 
```

如何将表示检索到我的对象中。我已经看到了很多，我想我现在很头晕，无法找到解决方案。我不熟悉 Java 服务器端或任何东西，所以我想这就是为什么我对我在教程上读到的东西感到沮丧，我认为网站上缺少很多东西，或者没有清楚地解释。

任何简单的示例至少都将值取出并将它们放入我的对象中，就像我使用 SQLite 游标一样。响应的反序列化也非常棒:)

[编辑]

在原始建议之后，我最终得到了这段代码。

```
ClientResource res = new ClientResource(ADDRESS_URL + "/exed/students/");
               Representation rep = res.get();

               try {
                   JSONObject response = new JSONObject(rep.getText());
                   Log.d(TAG, rep.getText());
                   JSONObject user = response.getJSONObject("User");
                   Log.d(TAG, "User: " + user.toString());
                   JSONObject student = response.getJSONObject("Student");
                   Log.d(TAG, "Student: " + student.toString());

                   Log.d(TAG, "FirstName: " + user.getString("FirstName"));
               } catch (Exception e) {
                   Log.d(TAG, "Exception: " + e.getMessage());
               } 
```

但收到此消息的异常：异常：println 需要一条消息

Stacktrace 打印：异常：android.util.Log.println_native(Native Method)

未处理的异常是这样的：

```
03-06 13:07:14.668: ERROR/AndroidRuntime(25353): FATAL EXCEPTION: Thread-13908
        java.lang.NullPointerException: println needs a message
        at android.util.Log.println_native(Native Method)
        at android.util.Log.d(Log.java:155)
        at com.tech.ed.data.access.WebServiceRepository$1.run(WebServiceRepository.java:74)
        at java.lang.Thread.run(Thread.java:856) 
```

我完全不明白是什么意思！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:21:08.140

看起来你只有一系列 JSONObjects 和字符串。只需为整个结果制作一个 JSONObject

```
JSONObject response = new JSONObject(representation); 
```

然后提取出用户和学生对象

```
JSONObject user = response.getJSONObject("User");
JSONObject student = response.getJSONObject("Student"); 
```

然后你可以从相应的对象中获取任何嵌套的字符串、整数或任何内容，例如

```
String firstName = user.getString("FirstName"); 
```

# jquery - jQuery/Ajax 无法在 Azure 上运行

> ID：15227042
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:01:07.790
> 
> 标签：jquery, ajax, azure

我有完全相同的代码，一个 HTML MailChimp 表单，在两台服务器上运行。

第一个是 LAMP 服务器：

[http://flagshippro.com/ourapps/plain.html](http://flagshippro.com/ourapps/plain.html)

第二个托管在 Azure 上：

[https://visitabudhabi.azurewebsites.net/plain.html](https://visitabudhabi.azurewebsites.net/plain.html)

谁能告诉我为什么验证在第一台服务器上完美运行，但在 Azure 服务器上却没有？

我需要对 Azure 实例做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:18:01.400

我相信问题是因为您在 Azure 网站中安全运行的代码是通过 http 引用 css 和 js 文件（即混合安全性）。这是我在运行 Azure 网站 URL 时在 IE 的开发者控制台中看到的内容：

![在此处输入图像描述](../Images/59d7f2134e41f56bc57d5ecd9992f3cb.png)

但是，如果我通过 http 访问该网站（在您的第一个 URL 中就是这种情况），我不会收到该错误。您可以通过 http 访问 azure 网站 url 或更改 css/js 文件的链接以使用 https 并查看是否有所不同？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T15:06:14.383

第一步是更正 Firebug 控制台中显示的错误： ![字符编码错误，jQuery 未定义。](../Images/b99bdf342dbe250aaa4acad8e2c380bc.png)

# amazon-web-services - CloudSearch 批量更新需要 > 60 秒

> ID：15227048
> 
> 赞同：0
> 
> 时间：2013-03-05T15:01:30.443
> 
> 标签：amazon-web-services, amazon-cloudsearch

我们遇到了批量更新请求超过 60 秒的问题。我们正在更新几 kb 的数据，远远低于 5MB 的限制。

令我惊讶的不是索引数据所花费的时间，而是更新*请求*本身所花费的时间。仅上传约 65kb 的数据可能需要一分钟多的时间。

我们使用少量数据进行频繁更新。会不会是我们被扼杀了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T16:50:32.887

不确定这是否适用于您的问题，但[亚马逊的文档](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/creatingsdf.html)建议尽可能大批量发送。

> 重要 只要有可能，您应该将添加和删除操作分组到接近最大批处理大小的批处理中。将大量单文档批次提交到文档服务可能会增加您的更改在搜索结果中可见所需的时间。

它谈到了搜索结果的可用性，但我认为说这也会影响 SDF 处理性能并不过分。

# flash - Flex：从 ZipCodeValidator 禁用 wrongLengthError

> ID：15227054
> 
> 赞同：0
> 
> 时间：2013-03-05T15:02:00.737
> 
> 标签：flash, apache-flex, flash-builder

是否可以`wrongLengthError`从 ZipCodeValidator 禁用？我只想展示`wrongCAFormatError`和`wrongUSFormatError`。

如果我没有指定`wrongLengthError`，`<mx:ZipCodeValidator`那么它会显示默认的错误长度错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:10:39.217

像这样的东西：

```
<mx:ZipCodeValidator
    id="zipCodeValidator"
    domain="{ZipCodeValidatorDomainType.US_OR_CANADA}"
    source="{input}" 
    property="text" 
    wrongLengthError="{zipCodeValidator.wrongUSFormatError + '\n' + zipCodeValidator.wrongCAFormatError}"
/> 
```

# html - 怎么做 我正在尝试使用区域标签为电子邮件模板制作一些热点。但关键是我看不到这些热点在哪里。我可以在工作时为这些框分配一些颜色，然后我可以在完成后将它们删除。这就是我所拥有的。我只需要在创建模板时看到它们。 <map name="0.1_Map3"><area href="" shape="rect" coords="38,
问问题
问问题 2013-03-05T15:02:11.630
536 次
This question shows research effort; it is useful and clear
0
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
我正在尝试使用区域标签为电子邮件模板制作一些热点。但关键是我看不到这些热点在哪里。我可以在工作时为这些框分配一些颜色，然后我可以在完成后将它们删除。这就是我所拥有的。我只需要在创建模板时看到它们。
<map name=" 0.1_map3"=""> <area href="" shape="rect" coords="38,19,110,35" target="_blank"> <area href="" shape="rect" coords="134,19,254,34" target="_blank"> <area href="" shape="rect" coords="278,17,388,35" target="_blank"> <area href="" shape="rect" coords="406,18,510,36" target="_blank"> <area href="" shape="rect" coords="534,20,664,35" target="_blank"> </map> 可能这个工具可以帮助你定义你的地图http://codecanyon.net/item/html5-canvas-image-mapper/3172058 htmlcss 4 1 回答 1 This answer is useful 0 可能这个工具可以帮助你定义你的地图http://codecanyon.net/item/html5-canvas-image-mapper/3172058 于 2013-03-05T15:19:41.593 回答 Related 3 mysql - 连接表并转置列和行 1 spring - 如何使用 Spring Webflow 和 Dojo(dijit) 创建 Textarea 字段 0 stdout - ipython重定向标准输出显示损坏 1 xcode - 如何将图像拖入 Mac 应用程序？ 1 xml - 如何使用 LibXML2 实现 XMLDSIG 的 XPath 转换？ 4 java - 佐治亚州亚特兰大的 Java 时区名称是什么？或任何位置？ 1 nhibernate - NHibernate 和自动递增 ID 死锁 3 sql-server - 查询获取外键索引 3 python - 如何反转整个列表的特定范围的列表？ 0 vb.net - da.update 命令 vb.net 复制数据 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15227055
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css

我正在尝试使用区域标签为电子邮件模板制作一些热点。但关键是我看不到这些热点在哪里。我可以在工作时为这些框分配一些颜色，然后我可以在完成后将它们删除。这就是我所拥有的。我只需要在创建模板时看到它们。

```
<map name="0.1_Map3"> 
<area href="" shape="rect" coords="38,19,110,35" target="_blank"> 
<area href="" shape="rect" coords="134,19,254,34" target="_blank"> 
<area href="" shape="rect" coords="278,17,388,35" target="_blank"> 
<area href="" shape="rect" coords="406,18,510,36" target="_blank"> 
<area href="" shape="rect" coords="534,20,664,35" target="_blank"> 
</map> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:19:41.593

可能这个工具可以帮助你定义你的地图[http://codecanyon.net/item/html5-canvas-image-mapper/3172058](http://codecanyon.net/item/html5-canvas-image-mapper/3172058)

# .net - 这是抄袭还是引用？

> ID：15227061
> 
> 赞同：1
> 
> 时间：2013-03-05T15:02:23.357
> 
> 标签：.net, winforms, oxygene

如果我要执行以下操作，您是否认为将对象从一个变量复制到另一个变量或引用指向对象的指针被复制的位置。

```
myPanel:Panel;
myControl:Control;

myPanel := new Panel;

myControl := myPanel; 
```

如果这不是引用，则使用 myControl 更改任何设置都不会更改 myPanel 设置。我这样说对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:08:31.303

myPanel 和 myControl 都是引用。当您进行分配时，您是在复制参考，而不是对参考进行参考。（如果你愿意，可以把它想象成在内存中复制一个地址。）

但是，当您在 myPanel 或 myControl 上调用方法或设置字段时，您将取消引用，即作用于被引用的对象。这种使用 myControl 的“更改设置”（我假设您的意思是设置字段）会在 myPanel 引用的同一对象中更改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:08:56.980

在 .net 中，大多数类型——尤其是像 Windows 控件这样复杂的东西——都是引用类型。这意味着变量的值只是对对象的引用，当您分配这些类型的变量时，您只是在复制引用——而不是整个对象。最大的结果是，在您的示例中，更改`myControl`会更改`myPanel`（反之亦然），因为两者指的是同一个对象。

可以肯定的是，请检查文档。如果对象的类型继承自`System.ValueType`（或`System.Enum`，它也扩展`ValueType`），那么它是一个值类型，并且在您分配时整个事物将被复制。否则它是一个引用类型，你只是在复制引用。

# java - 如何从 Java 运行 Excel 宏？

> ID：15227063
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:02:31.080
> 
> 标签：java, excel, vba

我有 Java 生成的 .txt 文件（带有数据库查询）。我需要用它生成一个excel（带有图形和其他类型的信息，不仅仅是一个纯csv）。

如何使用 java 调用我的 excel 宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:05:54.163

我想说，让你的 Excel 宏使用 csv 作为数据源，让它直接完成它的工作。

否则，您可能想研究像 jasper 报告这样的报告框架[http://community.jaspersoft.com/project/jasperreports-library](http://community.jaspersoft.com/project/jasperreports-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:09:43.790

您需要使用 JAVA-to-COM 桥接器，例如 Jacob。 [http://danadler.com/jacob/](http://danadler.com/jacob/)还有其他的，但我对 Jacob 很熟悉。然后您将能够启动应用程序、加载文件、运行宏，然后关闭应用程序。这应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T09:41:27.770

为什么不直接使用java apache poi创建excel，而不是创建txt，然后使用宏转换txt excel。

# class - 去，在结构中如何引用当前对象（如java和c++中的this）？

> ID：15227065
> 
> 赞同：0
> 
> 时间：2013-03-05T15:02:37.213
> 
> 标签：class, go, this

什么是 go `this`（或`self`在 python 中）构造？

```
type Shape struct {
    isAlive bool
}

func (shape *Shape) setAlive(isAlive bool) {

} 
```

在`setAlive`函数中我该怎么做`this.isAlive = isAlive;`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:14:46.243

Go 的方法声明在方法名称前面有一个所谓的接收者。在您的示例中，它是`(shape *Shape)`. 当你调用时`foo.setAlive(false)` `foo`传递`shape`给`setAlive`.

所以基本上以下是语法糖

```
func (shape *Shape) setAlive(isAlive bool) {
    shape.isAlive = isAlive
}

foo.setAlive(false) 
```

为了

```
func setAlive(shape *Shape, isAlive bool) {
    shape.isAlive = isAlive
}

setAlive(foo, false) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T15:03:44.243

在您的示例中，`shape`是接收器。你甚至可以这样写：

```
func (this *Shape) setAlive(isAlive bool) {
    this.isAlive = isAlive
} 
```

# javascript - 如何使用 javascript 在 Indesign CS6 中查找文本框？（我可以通过包含特定段落样式或什么的文本框架进行查询？）

> ID：15227068
> 
> 赞同：1
> 
> 时间：2013-03-05T15:02:51.110
> 
> 标签：javascript, adobe-indesign

我正在寻找 indesign 脚本，但我没有找到任何关于这个主题的信息，我认为这很重要。所以这是我的问题：

*   如何使用 javascript 在 Indesign CS6 中查找文本框？
*   我可以通过包含特定段落样式的文本框进行查询吗？
*   我可以在我的文本框（位于母版页中）上设置某种名称以在 javascript 中获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:16:06.343

好的，经过一些研究，我发现您可以通过打开“脚本标签”，选择您想要的对象并将标签名称写入“脚本标签”面板来为对象设置标签。您不必单击确定或什么都不单击，它会自动保存该对象的标签。

完成此操作后，您可以检查对象的“.label”属性，当您找到带有该标签的对象时，您就找到了它。多个对象可以具有相同的标签。

下面是一个带有辅助函数“selectWhere”的示例：

```
var document = app.documents.item(0); // active document
var allTextFrames = toArray(document.textFrames);
var textFrames = selectWhere("chapterLetter", "label", allTextFrames);

function selectWhere(value, key, array){
    var i = array.length; var t; var filtered = [];
    while(i--){
            t = array[i];
            if(t && t[key] == value){
                filtered.push(t);
            }
    }
    return filtered;
}

function toArray(objects){
    var i = objects.length; var array = [];
    while(i--){
            array.push(objects[i]);
    }
    return array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T05:26:31.120

1）你的第一个问题的答案是： - [在这个线程中解决](https://stackoverflow.com/questions/17685388/selecting-textframes-inside-of-a-group-in-indesign-cs6/48537637#48537637)

2）现在你得到了文本框数组。所以你可以查询来获取文本框上的段落样式

```
var paraStyle1 = app.activeDocument.paragraphStyles.itemByName("styleA");
    var paraStyle2 = app.activeDocument.paragraphStyles.itemByName("styleB");
  if (paraStyle1.isValid && paraStyle2.isValid) 
```

3）通过 `paraStyle1.name`你可以得到样式的名称。看到parastyle1是段落样式对象所以获取样式对象并通过这个属性找到。

# node.js - 无法在 Ubuntu 11.10 中使用 npm 安装 Express

> ID：15227069
> 
> 赞同：0
> 
> 时间：2013-03-05T15:02:55.633
> 
> 标签：node.js, express, npm

我正在尝试使用 npm 在我的节点安装上安装 express。我正在本地安装。我在我的办公环境中使用 Ubuntu 11.10（即，除了几个众所周知的端口之外，其他所有端口都将被阻止）。我以用户身份从 package.json 调用“npm install”（不是“sudo”）。安装失败并显示以下日志。

评论/解决方案将不胜感激。

```
 npm http GET http://registry.npmjs.org/express
    npm http GET http://registry.npmjs.org/express
    npm http GET http://registry.npmjs.org/express
    npm http GET http://registry.npmjs.org/range-parser/0.0.4
    npm http GET http://registry.npmjs.org/connect/2.7.2
    npm http GET http://registry.npmjs.org/mkdirp/0.3.3
    npm http GET http://registry.npmjs.org/commander/0.6.1
    npm http GET http://registry.npmjs.org/cookie/0.0.5
    npm http GET http://registry.npmjs.org/buffer-crc32/0.1.1
    npm http GET http://registry.npmjs.org/send/0.1.0
    npm http GET http://registry.npmjs.org/cookie-signature/0.0.1
    npm http GET http://registry.npmjs.org/methods/0.0.1
    npm http GET http://registry.npmjs.org/fresh/0.1.0
    npm http GET http://registry.npmjs.org/debug
    npm http GET http://registry.npmjs.org/connect/2.7.2
    npm http GET http://registry.npmjs.org/range-parser/0.0.4
    npm http GET http://registry.npmjs.org/cookie/0.0.5
    npm http GET http://registry.npmjs.org/commander/0.6.1
    npm http GET http://registry.npmjs.org/mkdirp/0.3.3
    npm http GET http://registry.npmjs.org/send/0.1.0
    npm http GET http://registry.npmjs.org/buffer-crc32/0.1.1
    npm http GET http://registry.npmjs.org/fresh/0.1.0
    npm http GET http://registry.npmjs.org/cookie-signature/0.0.1
    npm http GET http://registry.npmjs.org/methods/0.0.1
    npm http GET http://registry.npmjs.org/debug
    npm http GET http://registry.npmjs.org/connect/2.7.2
    npm http GET http://registry.npmjs.org/range-parser/0.0.4
    npm http GET http://registry.npmjs.org/mkdirp/0.3.3
    npm http GET http://registry.npmjs.org/commander/0.6.1
    npm http GET http://registry.npmjs.org/cookie/0.0.5
    npm http GET http://registry.npmjs.org/buffer-crc32/0.1.1
    npm http GET http://registry.npmjs.org/send/0.1.0
    npm http GET http://registry.npmjs.org/cookie-signature/0.0.1
    npm http GET http://registry.npmjs.org/methods/0.0.1
    npm http GET http://registry.npmjs.org/fresh/0.1.0
    npm http GET http://registry.npmjs.org/debug
    npm http GET http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm ERR! Error: Parse Error
    npm ERR!     at Socket.socketOnData (http.js:1485:20)
    npm ERR!     at TCP.onread (net.js:404:27)
    npm ERR! If you need help, you may report this log at:
    npm ERR!     <http://github.com/isaacs/npm/issues>
    npm ERR! or email it to:
    npm ERR!     <npm-@googlegroups.com>

    npm ERR! System Linux 3.0.0-20-generic
    npm ERR! command "nodejs" "/usr/bin/npm" "install"
    npm ERR! cwd /home/nvbalaji/nodejs/hb
    npm ERR! node -v v0.8.21
    npm ERR! npm -v 1.2.12
    npm ERR! code HPE_INVALID_CONSTANT
    npm WARN package.json methods@0.0.1 No README.md file found!
    npm http GET http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm ERR! fetch failed http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm ERR! fetch failed http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm http GET http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm http GET http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm ERR! fetch failed http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm ERR! fetch failed http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm http GET http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm http GET http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm ERR! fetch failed http://registry.npmjs.org/commander/-/commander-0.6.1.tgz
    npm ERR! fetch failed http://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
    npm ERR! 
    npm ERR! Additional logging details can be found in:
    npm ERR!     /home/nvbalaji/nodejs/hb/npm-debug.log
    npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:07:15.667

这就是我在安装时解决它的方式：

创建一个名为 node 的新文件

```
:\>gedit /usr/local/bin/node 
```

内容：

```
#!/bin/bash
exec /nodejs "$@"

:\>sudo chmod +x /usr/local/bin/node 
```

再次尝试安装 NPM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:01:50.430

全局安装期间的某些进程可能 `npm install express -g / npm install -g express` 需要管理员权限才能在系统文件夹中写入文件。尽量不要全局安装`npm install express`。

# jquery - jQuery EasyUI：相对面板/布局尺寸（百分比）

> ID：15227071
> 
> 赞同：0
> 
> 时间：2013-03-05T15:03:02.263
> 
> 标签：jquery, jquery-easyui

我正在为网站使用 jQuery EasyUI 布局类 ( [http://www.jeasyui.com/documentation/layout.php](http://www.jeasyui.com/documentation/layout.php) )。在 layout-div 中，可以放置区域（北、南、西、东和中）。

我想制作相对于容器的北面板和南面板的尺寸，而不是给它们绝对的 px 值。所以我想离开这个

```
<div id="cc" class="easyui-layout" style="width:200px;height:400px;">
    <div data-options="region:'north',title:'North',split:true" style="height:100px;"></div>
    <div data-options="region:'south',title:'South',split:true" style="height:100px;"></div>
    <div data-options="region:'center',title:'center'"></div>
</div> 
```

对此

```
<div id="cc" class="easyui-layout" style="width:200px;height:400px;">
    <div data-options="region:'north',title:'North',split:true" style="height:25%;"></div>
    <div data-options="region:'south',title:'South',split:true" style="height:25%;"></div>
    <div data-options="region:'center',title:'center'"></div>
</div> 
```

虽然第一个版本工作得很好（见这个[小提琴](http://jsfiddle.net/56VNr/2/)），但第二个版本不行（见[这里](http://jsfiddle.net/drHUE/)）。有谁知道为什么不知道，即如何使面板的尺寸相对？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:24:37.840

试试这个，

```
<div id="cc" class="easyui-layout" style="width:200px;height:400px;">
    <div data-options="region:'north',title:'North',split:true" class="north"></div>
    <div data-options="region:'south',title:'South',split:true" class="south"></div>
    <div data-options="region:'center',title:'center'"></div>
</div>

.north
{
    height:25%;
}
.south
{
    height:25%;
} 
```

# c++ - 通过 WinApi 调整 WebKit COM 的大小

> ID：15227077
> 
> 赞同：1
> 
> 时间：2013-03-05T15:03:19.877
> 
> 标签：c++, webkit

我将 WebKit 作为 COM 对象嵌入到纯 WinApi 应用程序中。我想通过获取 WM_WINDOWPOSCHANGED 来调整 WebKit 窗口的大小。

```
LRESULT CALLBACK CBrowserView::WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    typedef LRESULT (CBrowserView::*PFNPROC)(WPARAM wParam, LPARAM lParam);
    PFNPROC pfnProc;
    switch (uMsg)
    {
        case WM_WINDOWPOSCHANGED:
            pfnProc = &CBrowserView::DoWindowPosChanged;
...

// CBrowserView::DoWindowPosChanged

LRESULT CBrowserView::DoWindowPosChanged(WPARAM wParam, LPARAM lParam)
{
    _ASSERT(m_hWnd);

    WINDOWPOS* pwp = (WINDOWPOS*)lParam;
    {
        if (pwp->cx != m_lClientWidth || pwp->cy != m_lClientHeight)
        {
            m_lClientWidth = pwp->cx;
            m_lClientHeight = pwp->cy;

            if (m_pIWebBrowser)
            {
                {
                    RECT rcClient;
                    rcClient.left = 0;
                    rcClient.top = 0;
                    rcClient.right = m_lClientWidth;
                    rcClient.bottom = m_lClientHeight;

                    HRESULT hr = m_pIWebBrowser->initWithFrame(rcClient, 0, 0);
                    if (FAILED(hr))
                        return E_FAIL;

                    hr = m_pIWebBrowser->mainFrame(&m_mainWebFrame);
                    if (FAILED(hr))
                        return E_FAIL;

                    BSTR urlBstr = SysAllocString(m_pszFile);;
                    WebKitToUrl(urlBstr, true);
                }
            }
        }
    }

    return 0;
} 
```

但是这只工作一次，在 OnCreate 对话框中，小部件填充了这个客户区。在调整大小失败时，m_pIWebBrowser->initWithFrame(rcClient, 0, 0) 返回 E_FAIL。

还有另一种设置 m_pIWebBrowser 大小的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:12:47.823

1.. 应该找到小部件 HWND。

...

```
hr = m_pIWebBrowser->QueryInterface(IID_IWebViewPrivate, reinterpret_cast<void**>(&webViewPrivate));

if (FAILED(hr))
    return E_FAIL;

hr = webViewPrivate->viewWindow(reinterpret_cast<OLE_HANDLE*>(&m_hudWnd));
if (FAILED(hr) || !m_hudWnd)
    return E_FAIL;

if (webViewPrivate)
{
    webViewPrivate->Release();
    webViewPrivate = NULL;
} 
```

...

2.. 使用标准 WinApi 移动|调整窗口大小。

```
LRESULT CBrowserView::DoWindowPosChanged(WPARAM wParam, LPARAM lParam)
{
    _ASSERT(m_hWnd);

    WINDOWPOS* pwp = (WINDOWPOS*)lParam;
    {
        if (pwp->cx != m_lClientWidth || pwp->cy != m_lClientHeight)
        {
            m_lClientWidth = pwp->cx;
            m_lClientHeight = pwp->cy;

            if (m_pIWebBrowser && m_hudWnd)
            {
                RECT rcClient;
                rcClient.left = 0;
                rcClient.top = 0;
                rcClient.right = m_lClientWidth;
                rcClient.bottom = m_lClientHeight;

                ::MoveWindow(m_hudWnd, rcClient.left, rcClient.top, rcClient.right, rcClient.bottom, TRUE);
            }
        }
    }
    return 0;
} 
```

# javascript - 需要在表格中突出显示的行

> ID：15227079
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:03:27.303
> 
> 标签：javascript

我需要编写一个函数（或构建在下面的代码上），它将突出显示表格中的特定行。它需要始终忽略表头，因此在表头之后开始行数为 0。

```
<style type="text/css">
#myTbl {
     border: 1px solid black
}
#myTbl td, th {
     border: 1px solid black
}

#myTbl tr.normal td {
    color: black;
    background-color: white;
}
#myTbl tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>

  <table id="myTbl">
     <thead>
      <tr>
        <th>ID</th>
        <th>CreatedDate</th>
        <th>Name</th>
        <th>Colour</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>DFRF</td>
        <td>05/03/2010</td>
        <td>Lamp</td>
        <td>Blue</td>
      </tr>
Ect...  
    </tbody>
  </table>

<script type="text/javascript">
var table = document.getElementById("myTbl");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

tbody.onclick = function (e) {
   e = e || window.event;
   var td = e.target || e.srcElement; 
//so must be no other elements inside the td
   var row = td.parentNode;
    alert('Row is ' + (row.rowIndex - 1))
   if (this.lst&&this.lst!=row){
    this.lst.className='';
   }
   row.className = row.className==="highlighted" ? "" : "highlighted";
   this.lst=row;
}

thead.onclick = function (e) {
   e = e || window.event;
   var th = e.target || e.srcElement;  
//so must be no other elements in the th
   alert(th.innerHTML);
}
</script> 
```

就像是

```
function goToRow('2') 
```

选择第 2 行。

需要帮助请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:08:01.153

您可以将计数添加为每个 TR 的 ID。见下文：

```
 <table id="myTbl">
     <thead>
      <tr id="tr0">
        <th>ID</th>
        <th>CreatedDate</th>
        <th>Name</th>
        <th>Colour</th>
      </tr>
    </thead>
    <tbody>
      <tr id="tr1">
        <td>DFRF</td>
        <td>05/03/2010</td>
        <td>Lamp</td>
        <td>Blue</td>
      </tr> 
```

然后使用这个 JavaScript：

```
function goToRow(where)
{
 document.getElementById("tr"+where+"").style.color="white";
 document.getElementById("tr"+where+"").style.backgroundColor="gray";
} 
```

希望有帮助

# html - 我在哪里可以使用“名称”属性（在 html 中）？

> ID：15227081
> 
> 赞同：0
> 
> 时间：2013-03-05T15:03:34.493
> 
> 标签：html

我用 jquery 做了一些带有 name 属性的代码**！！！一个DIV！**并以某种方式使用它。

如果一方面我在我拥有的每个浏览器（firefox，chrome，即 9/8/7，safari，opera，android ......所有最新更新）中都尝试了此代码并且它运行良好，另一方面我看到- 用 google 搜索 - "name" 只考虑到*form* , *input* , *textarea* , *a*和其他类似的。

我真的可以像以前那样使用它吗？在我想要的每个 html 标签中？还是我会在地狱里永远燃烧？

先感谢您

* * *

看到你的答案，我决定以其他方式存储数据（比如添加类并使用 jquery 检索它们的名称）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:09:07.940

您可以使用任何您想要的属性名称 - 但根据规范，“名称”不是 div 标签上的有效属性，因此您的标记在技术上是无效的。

如果作为一个例子，你拿这个html：

```
<!DOCTYPE html>
<head>
   <title>test</title>
</head>
<body>
   <div name="mydiv" class="myclass"></div>
</body> 
```

[并在这里](http://validator.w3.org/)验证它，你会看到你得到这个错误：

```
Line 6, Column 41: Attribute name not allowed on element div at this point.
       <div name="mydiv" class="myclass"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:07:28.300

```
<a>, <applet>, <button>, <form>, <frame>, <iframe>, <img>, <input>, <map>, <meta>, <object>, <param>, <select>, and <textarea> 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.name](https://developer.mozilla.org/en-US/docs/DOM/element.name)

~~据我所知，名称*主要*用于将元素与标签配对（并且在这种情况下，对单选按钮进行分组）。~~

~~编辑：提到迈克的评论。Name 还用于以键/值对的方式使用 GET 和 POST 提交表单。~~

* * *

[更新：这篇文章](https://stackoverflow.com/questions/1813085/is-it-redundant-to-use-the-name-attribute-for-input-fields-in-modern-web-devel)可能值得一看。

[OMG Ponies](https://stackoverflow.com/users/135152/omg-ponies)关于这个话题有一些很好的信息：

> 我的理解是，当 Netscape 创建 Javascript 时，它使用了 name 属性。然而，HTML 规范决定使用 id，但保留名称是为了向后兼容。IME，使用 name 属性是 Internet Explorer 6 支持所必需的，因为 IE 中的 javascript 引擎不会读取 id 属性 - 尽管两者都已定义，但只有名称。

# javascript - 在jQuery中停止setinterval

> ID：15227082
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:03:37.077
> 
> 标签：javascript, jquery

我有这段代码可以让 li 每隔一秒更改一次它的类：

```
function getclient(FromClient) {
    var NewMsgLi = $("#FriendsList").find('li[id$=' + FromClient + ']');
    setInterval(function () {
        NewMsgLi.toggleClass("NewMsgClass");
    }, 1000);
}

function InitiateChat(ToClient) {
    $("#FriendsList").find('li[id$=' + ToClient + ']').removeClass("class");
} 
```

InitiateChat 在我单击按钮后触发，FromClient 和 ToClient 的 ID 基本相同，但问题是“li”没有恢复正常，不知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:05:59.690

[您可以使用clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)删除间隔

```
var intervalId;
function (FromClient) {
         var NewMsgLi = $("#FriendsList").find('li[id$=' + FromClient + ']');
         intervalId = setInterval(function () {
             NewMsgLi.toggleClass("NewMsgClass");
         }, 1000);

     }

function InitiateChat(ToClient) {
    if(intervalId){
        clearInterval(intervalId);
    }
    intervalId = false;
     $("#FriendsList").find('li[id$=' + ToClient + ']').removeClass("class");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:06:30.550

查看[clearInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:06:48.553

您可以通过调用清除间隔

```
var interval = setInterval(function() {
   //
}, 1000);
//
clearInterval(interval); 
```

# android - 从 AudioRecord 计算经过的时间

> ID：15227087
> 
> 赞同：1
> 
> 时间：2013-03-05T15:03:51.140
> 
> 标签：android, audio, audio-recording, audiorecord, android-audiorecord

如何从Android 中的[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)计算经过的时间？

我正在尝试做的与此类似：[图 5（第二张图）](http://www.montgomerycollege.edu/Departments/StudentJournal/Automatic.pdf)。为了进一步解释我自己，我正在实时录制声音，然后绘制音高并在一定时间内计算缓冲数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:22:43.260

只需计算一下，您就知道记录数据的大小，还应该知道采样率和通道数。所以迈克尔发表的评论是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-12T12:10:41.690

我按照迈克尔的评论，并在录制后以秒为单位成功计算了音频长度。

```
 int SAMPLE_RATE_IN_HZ = 44100;
    int AUDIO_FORMAT = AudioFormat.ENCODING_PCM_16BIT; // Guaranteed to be supported by devices
    int CHANNEL_CONFIG = AudioFormat.CHANNEL_IN_MONO; // Is guaranteed to work on all devices

    File audioFile = yourRecordingLogicHere();
    long audioLengthInSeconds = audioFile.length() / (2 * SAMPLE_RATE_IN_HZ); 
```

我用单声道录音，这就是为什么`*2`比迈克尔的评论少一个乘法。

# sql - 使用 join 语句过滤查询

> ID：15227089
> 
> 赞同：0
> 
> 时间：2013-03-05T15:03:52.160
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 ColdFusion 8 开发我公司的网站，并希望从一个表 ( ) 中返回一个记录列表（只是`clientname`字段），该表 ( `dbo.clients`) 在不同的表 ( ) 中没有匹配项，`dbo.fees`以提示最终用户添加这些公司的收费表。一个例子：

dbo.clients

```
CLIENT_ID CLIENT_NAME
1         Joe's Diner
2         Save-a-Lot
3         Family Meds
4         DiFazio's 
```

dbo.fees

```
CID        CLIENT_NAME  FEE
1          Joe's Diner  25.000
2          Save-a-Lot   35.000
4          DiFazio's    30.000 
```

我想要的是一个结果集，在上述表格/数据的情况下，将仅返回 clientid/clientname 3/Family Meds，因为它们没有在表格中列出/记录费用`dbo.fees`。我的数据库是 MSSQL 2005。我的查询是：

```
SELECT clientid 
FROM clients 
INNER JOIN fees 
  ON clients.clientid <> fees.cid; 
```

它返回 50,000 多个结果的笛卡尔积。使用`LEFT/RIGHT OUTER JOIN`仍然给我一个笛卡尔积，并`DISTINCT`简单地返回每条记录，`dbo.clients`无论它们是否有`dbo.fees`条目。我究竟做错了什么？

ps 另外值得注意的是：我之前的管理员显然没有在客户/费用表之间建立 PK/FK 关系，因此任何可能依赖的查询语法在这种情况下都可能不起作用。它可能必须仅基于相关字段的值来工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:06:38.280

您可以使用`LEFT JOIN`with`WHERE`子句，该子句将仅返回那些未出现在`fees`表中的记录：

```
select c.CLIENT_ID, c.CLIENT_NAME
from clients c
left join fees f
    on c.CLIENT_ID = f.CLIENT_ID
where f.CLIENT_ID is null 
```

如果您需要帮助学习`JOIN`语法，这里有一个很好的参考：

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

这也可以使用 a 来编写`NOT EXISTS`：

```
select *
from clients c
where not exists (select CLIENT_ID
                    from fees f
                    where c.CLIENT_ID = f.CLIENT_ID) 
```

请参阅两个查询的[SQL Fiddle 演示](http://sqlfiddle.com/#!3/293bc/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:07:21.913

最简单的，你可以只使用`NOT IN`;

```
SELECT clientid FROM clients WHERE clientid NOT IN
  (SELECT clientid FROM fees) 
```

...或者您可以使用 LEFT JOIN 更详细地执行相同的操作；如果客户不存在费用，f.clientid 将为 NULL。

```
SELECT c.clientid
FROM clients c
LEFT JOIN fees f
ON c.clientid = f.clientid
WHERE f.clientid IS NULL 
```

# teamcity - 如何使用 HTTP 命令停止构建代理上的构建

> ID：15227090
> 
> 赞同：0
> 
> 时间：2013-03-05T15:03:58.037
> 
> 标签：teamcity

我需要使用脚本停止在代理上的构建，然后禁用它。

我在论坛中找到了一种禁用/启用代理的方法：

```
http://teamcity:8080/httpAuth/ajax.html?reason=&_should_restore_status=&status_restoring_delay=15&changeAgentStatus=<AGENT_ID>&enable=false&_=
http://teamcity:8080/httpAuth/ajax.html?reason=&_should_restore_status=&status_restoring_delay=15&changeAgentStatus=<AGENT_ID>&enable=true&_= 
```

是否有一个 http 命令可以停止在特定代理上运行的构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:53:13.617

取消构建似乎有一个[未记录的功能](http://confluence.jetbrains.com/display/TCD7/Accessing+Server+by+HTTP?focusedCommentId=41485657#comment-41485657)。绝不保证支持此功能。:)

# c# - 空场有用吗？

> ID：15227106
> 
> 赞同：0
> 
> 时间：2013-03-05T15:04:58.907
> 
> 标签：c#, field, void

我在正在编写的文件中打错字，发现在声明 void 字段类型时没有编译器错误：

```
class MyClass
{
    object value;
    void otherValue; // I would have expected a compiler error
} 
```

它被允许的事实对我来说意味着这样一个领域有一个用途，但我不知道有一个用途。尝试设置它*会*产生编译错误。那么，这有什么用，还是编译器如何工作的一些工件没有功能？

**编辑** Visual Studio 出了点问题，它没有编译（因此没有给我一个错误）重新启动它，它给了我错误。这很尴尬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:08:12.193

## 而且我 100% 确定这是编译器错误

### 我已经在 Visual Studio 2005、2008、2010 和 2012 上测试了代码（由[hvd](https://stackoverflow.com/users/743382/hvd)确认）

![编译器错误](../Images/e6cfc22781ebbb18cd625f838ad8c5e7.png)

错误信息 ：

```
Error   1   Field cannot have void type C:\Users\Mr Master Minded\Documents\Visual Studio 2008\Projects\ConsoleApplication1\ConsoleApplication1\Program.cs  31  9   ConsoleApplication1 
```

# javascript - jQuery Accordion 的简单问题

> ID：15227108
> 
> 赞同：4
> 
> 时间：2013-03-05T15:05:09.220
> 
> 标签：javascript, jquery, css, accordion

我有一个简单的 jQuery 手风琴，它可以工作......*几乎*完美:)

正如您从演示中看到的那样，我目前在“团队”页面中的导航“打开”。

当我单击“关于我们”时，是否有可能完全关闭该元素。正如您从演示中看到的那样，它会关闭它，**但**很快就会重新打开它。我猜这是因为我的 CSS**第 27 行的代码。**

这是我的**演示**：http: [//jsfiddle.net/URYzK/5/](http://jsfiddle.net/URYzK/5/)

这是我的 JavaScript：

```
jQuery(function($) {

    $('#accordion > li > a').click(function (e) {
        if ($(this).next('ul').length == 0) {
            // link is for navigation, do not set up accordion here
            return;
        }

        // link is for accordion pane

        //remove all the "Over" class, so that the arrow reset to default
        $('#accordion > li > a').not(this).each(function () {
            if ($(this).attr('rel')!='') {
                $(this).removeClass($(this).attr('rel') + 'Over');
            }

            $(this).siblings('ul').slideUp("slow");
        });

        //showhide the selected submenu
        $(this).siblings('ul').slideToggle("slow");

        //addremove Over class, so that the arrow pointing downup
        $(this).toggleClass($(this).attr('rel') + 'Over');
        e.preventDefault();
    });

}); 
```

非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:11:05.700

`display:none`从CSS中删除`#accordian ul`并完全删除。`.children`我相信这会产生你想要的行为。你让孩子们`ul`成为`display:none`，然后试图强迫`.children`，这是一个`ul`，`display:block`以后，这就是他们战斗的原因。

也更新了你的 jsFiddle。

# javascript - 你可以修改一个可观察数组中的多个实体，但让 Knockout 只触发一个更改通知吗？

> ID：15227118
> 
> 赞同：1
> 
> 时间：2013-03-05T15:05:38.627
> 
> 标签：javascript, knockout.js, ko.observablearray

我有一个可观察的数组，我需要从中删除一个项目并添加另一个。如果我只是调用`.remove(myItem)`observable 数组，然后将我的新项目推送到它上面，Knockout 将为该数组**触发两个更改通知，但在这种情况下，****我宁愿将其视为单个更改**，只触发一个通知。

我所做的是取出底层数组并将其保存在一个临时变量中，然后我对该临时变量进行修改，当我完成后，我将整个东西放回可观察数组中. 像这样的东西（从我实际做的有点简化）：

```
vm.MyArray = ko.observableArray(["foo", "bar"]);

// Later when I need to alter the observable array, I do something like this    
var temp = vm.MyArray();
temp.splice(0, 1);
temp.push("some");
vm.MyArray(temp); 
```

虽然这实现了我的目标，但感觉不是正确的做法。

**有没有更合适的方法来对可观察数组进行多次更改，但只触发一个通知？**

*更新：*

我不想触发两个通知的原因是因为我订阅了数组上的更改，并在新数据发生更改时发出 AJAX 请求以加载新数据。因此，我不想触发不必要的通知。在我“完成”编辑数组之前，我不希望触发通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:10:22.070

要实现这种行为，您应该使用展开的可观察数组，然后调用`valueHasMutated`方法：

```
vm.MyArray = ko.observableArray(["foo", "bar"]);
vm.MyArray().remove(myItem);
vm.MyArray().push(newItem);
vm.MyArray.valueHasMutated(); 
```

# sql - 如果没有数据一致性要求，我们如何设置 DB 和 ORM？

> ID：15227119
> 
> 赞同：2
> 
> 时间：2013-03-05T15:05:43.810
> 
> 标签：sql, hibernate, caching, web, proxy

想象一下，我们有一个网站，它通过 Hibernate 将写入和读取请求发送到某个数据库。我使用Java，但这个问题并不重要。

通常我们想从数据库中读取新数据。但是我想在写入的数据变得对读取可见之间引入一些延迟，以提高性能。即我不需要立即“发布”插入数据库的行。延迟一段时间后，我可以“发布”新数据。

我怎样才能实现它？

据我了解，这可以在我系统的几个不同层上进行设置。

1.  我可以在前端缓存一些请求。可能我应该为此设置代理服务器。但这只有在查询的所有参数都匹配时才有效。

2.  我可以在 Hibernate 中缓存读取请求。好的，但是我可以指定或估计读取查询在发生一些新插入后返回陈旧数据的平均时间吗？换句话说，我如何控制用户可以看到新数据之间的延迟时间？或者可能我应该使用类似 memcached 系统而不是 Hibernate 缓存？

3.  可能我可以在数据库中设置一些东西。我不知道我应该如何处理 DB。可能我可以降低隔离级别以提高数据库的性能。

那么，哪种方式最好呢？

当然，主要问题是：我在这里介绍的放宽要求真的有助于提高我的系统性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:13:16.783

如果我正确阅读了您的体系结构，那么您有客户端-> 服务器-> 数据库服务器

每个点的答案

1.  如果您只使用自己的客户端，这将给客户端带来实现缓存的负担，我会采用这种方法。它将具有可能提高客户端性能的副作用，并减少服务器和数据库服务器的负载，因此它们可以更好地扩展。

2.  现在，服务器上的缓存将提高数据库服务器的可伸缩性，并可能提高客户端的性能，但会给服务器带来内存负担。这将是我的第二个选择

3.  在数据库中实现一些东西。在这一点上，你得到了什么？数据库服务器仍然需要确定要发回的行。而且您也不会获得可扩展性优势。

所以总结一下，如果你不能缓存在服务器上，我会先在客户端缓存。将数据库排除在循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:41:03.667

要回答您的主要问题 - 缓存是提高受数据库性能限制的 Web 应用程序的性能和可伸缩性的最有效方法之一 - 您的应用程序可能属于也可能不属于这一类。

一般来说，我建议设置一个负载测试平台，并在开始优化之前测量应用程序的各个部分以识别瓶颈。

最有效的缓存是系统外部的缓存——CDN 或用户浏览器。[阅读](http://www.mnot.net/cache_docs/#BROWSER)浏览器缓存，看看是否有任何东西可以在本地缓存。浏览器具有内置缓存作为标准功能 - 您可以通过 HTTP 标头控制它们。这些缓存非常有效，因为它们甚至可以阻止请求到达您的基础架构；它们对于图像、javascript 文件或样式表等静态 Web 资产非常有效。我认为代理服务器属于同一类别。主要的缺点是很难管理这个缓存——一旦你对浏览器说“缓存这个 2 周”，刷新它就很难了。

下一个最有效的缓存层是在应用服务器上缓存（部分）网页。如果可以做到这一点，就可以避免呈现页面的成本和从数据库中检索数据的成本。不同的 Web 框架对此有不同的解决方案。

接下来，您可以在 ORM 级别进行缓存。Hibernate 有一个非常[健壮的实现](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)，它在你的缓存策略中提供了很多粒度。[本文](http://apmblog.compuware.com/2009/03/24/understanding-caching-in-hibernate-part-three-the-second-level-cache/)展示了一个示例实现，包括如何控制过期时间。您可以在此处对缓存进行大量控制 - 您可以在表级别指定行为，因此您可以将“查找”数据缓存数天，将“事务”数据缓存数秒。

The database already implements a cache "under the hood" - it will load frequently used data into memory, for instance. In some applications, you can further improve the database performance by "de-normalizing" complex data - so the import routine might turn a complex data structure into a simple one. This does trade of data consistency and maintainability against performance.

# java - 在java中求解两个代数方程

> ID：15227122
> 
> 赞同：0
> 
> 时间：2013-03-05T15:05:48.830
> 
> 标签：java, algebra, equations

我有两个需要在 java 中计算的方程

```
y=(x+1)*2-3
y=5 
```

这些方程本质上是动态的

```
y= x*8x6-5*5
y= 3 
```

`y`在这些方程中是已知的，我需要确定`x`

用java编写程序的最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:28:38.307

似乎有几种方法可以解决这个问题。我的第一个想法（一如既往地过于复杂，除了好玩之外很可能不值得做），是使用创建语法来解析操作顺序，可以评估为变量与常量的事物等。然后以编程方式解决方程。然而，这并不是一件容易的事情。如果这是针对编译器类的，则可能值得一看，否则请忽略它。

我的第二个想法是使用蛮力。尽管您需要弄清楚如何处理 x 的负值。

```
public int solve(int y){
    int x=0;
    while(y>(x+1)*2-3)
        x++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-05T03:15:48.017

几年后，希望这对某人有所帮助，为了使这更简单，我将使用库 exp4j ( [https://www.objecthunter.net/exp4j/](https://www.objecthunter.net/exp4j/) ) 和 IDE netbeans 8.2 ( [https://netbeans.org/](https://netbeans.org/) ) . [像这样创建一个框架](https://i.stack.imgur.com/JO8WV.png)

稍后在按钮上添加代码：

`try { net.objecthunter.exp4j.Expression e = new ExpressionBuilder(txtFunc.getText()) .variables("x") .build() .setVariable("x", Double.parseDouble(txtVar.getText())); double result = e.evaluate(); txtRes.setText("" + result); } catch (Exception e) { JOptionPane.showMessageDialog(null, "Revisa la función o la variable, Posibles errores de operación: División entre 0"); }`

注意：这是为了评估“x”所以专门这样做会有点复杂，所以我们要做一些数学运算，如果 5 是评估函数的值，那么我们隔离“x”的值. x=(y+1)/2 然后重新评估，x=(5+1)/2=3, x=3 并使用代码验证这实际上是答案。
[责备](https://i.stack.imgur.com/VDo9e.png)

其他功能也是如此。（对不起我的技术英语）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T15:29:07.300

如果说方程是“动态的”，我们是在推断您正在尝试构建一个程序来求解*任意*代数方程（或方程组）中的 x，这远远超出了本论坛的范围。有整个软件包旨在做这样的事情。

# jquery - 如何使用 jquery 将字符串缩短为 ...？

> ID：15227129
> 
> 赞同：1
> 
> 时间：2013-03-05T15:06:01.077
> 
> 标签：jquery, html

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:14:16.120

You can handle it by using css instead of using any javascript. There is `text-overflow` in css for making the effect `...` when the string is over the width. If you would like to show the original text, you would add `:hover` in css to remove the overflow boundary.

The alternative is using javascript to count the content length and modify the content with ellipsis. Also, if you want to show original text, use `hover()` but you have to store the original text first.

So, there are two solutions, check this for detail: [http://jsfiddle.net/zqfhx/1/](http://jsfiddle.net/zqfhx/1/)

CSS

```
<style type="text/css">
.w100C {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;    
    width: 100px;
    min-width: 0;
}

.w100C:hover {  
    overflow: none;
    width: auto;
}
</style> 
```

HTML

```
<div class="w100C">
    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever s
</div> 
```

Alternative method with Javascript(jQuery)

JavaScript

```
$(document).ready(function() {

    function TruncateText(text)
    {
        if(text.length > 12)
        {
             text = txt.substring(0,12) + "...";
        }
        return text;
    }

    var txt = $("#abc").text();
    $("#abc").attr("orgTxt", txt);
    txt = TruncateText(txt);
    $("#abc").text(txt);

    $("#abc").hover(function(){
        var t = $("#abc").attr("orgTxt");
        $("#abc").text(t);
    }, function(){
        var t =  $("#abc").text();
        t = TruncateText(t);
        $("#abc").text(t);
    });    
}); 
```

HTML

```
<div id="abc">I am very long string</div> 
```

Personally, I will recommend to use CSS instead of JavaScript as it can handle multiple element by styling and reducing the script execution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:07:52.807

This doesn't need jQuery

```
var str = "whatever here"
var shortened = str.length > 15 ? str.substring(0,12) + '...' : str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:14:27.410

If you are just trying to "fit" based on element size, you may want to try `text-overflow`.

[JSFiddle for illustrative purposes](http://jsfiddle.net/SwJuQ/)

[Moz Docs for text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:16:42.980

Assuming your content goes within a div with id "content" and your string is saved within a longString variable

```
$(document).ready(function() {
    var contentDiv = $("#content");
    contentDiv.html(longString.substr(0,12) + "...");

    contentDiv.mouseover(function(){ 
         this.html(longString);
    });

    contentDiv.mouseout(function(){
         this.html(longString.substr(0,12) + "...");
    });
}); 
```

This is untested, but it should give you the show and hide functionality you need. It also assumes the string is always at least 12 characters. If error checking is needed, you can add it easily.

# git - 使用带有 git 的 socks 代理进行 http 传输

> ID：15227130
> 
> 赞同：96
> 
> 时间：2013-03-05T15:06:01.560
> 
> 标签：git, ssh, proxy, socks

如何让 git 使用 socks 代理进行 HTTP 传输？

我成功地使用 GIT_PROXY_COMMAND 配置 git 以使用 socks 代理进行 GIT 传输。

另外，我已经配置了我的 .curlrc 文件来定义 socks 代理，我可以使用 curl 命令直接获取信息，例如：

```
curl http://git.kernel.org/pub/scm/git/git.git/info/refs?service=git-upload-pack 
```

但是如何使用带有 git 的 socks 代理来使用 HTTP 传输协议检索数据，例如：

```
git clone http://git.kernel.org/pub/scm/git 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-05-26T04:27:16.627

我使用 Git 1.8.2 和 SOCKS v5 代理进行了测试，以下设置对我有用：

`git config --global http.proxy 'socks5://127.0.0.1:7070'`

2017 年 3 月 31 日更新：

[根据文档](https://git-scm.com/docs/git-config#git-config-httpproxy "混帐/文档/混帐配置")，尽管名称，它应该适用于 HTTP 和 HTTPS 存储库 url。感谢@user 指出这一点。**`http`**`.proxy`

2018 年 11 月 27 日更新：

要禁用代理，请运行命令：

`git config --global --unset http.proxy`

编辑 2019-03-04：

如果您还希望使用代理解析主机名，请使用下面的 thuzhf 解决方案，它使用`socks5h`而不是`socks5`

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-10-12T09:21:20.833

如果您不想将代理设置为全局配置，请尝试`ALL_PROXY=`例如：

```
$ ALL_PROXY=socks5://127.0.0.1:8888 git clone https://github.com/some/one.git 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-06-10T12:28:58.870

（稍微提醒一下）如果您希望主机名也由代理解析（这意味着**通过代理传递所有内容**），尤其是在克隆**gist**时，您可以使用以下设置（关键是它使用**socks5h****袜子5** ) :

```
git config --global http.proxy socks5h://127.0.0.1:1080 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-08-16T15:36:04.497

我使用以下命令从 socks5 代理克隆特定存储库。代理设置使用`--config`选项指定。

```
$ git clone https://github.com/xxxxx --config 'http.proxy=socks5://127.0.0.1:1234' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-05T16:03:37.343

注意：这里的补丁在 2015 年应用于 git 的 2.4.11 版本。从那时起，您可以将 socks:// url 与 http.proxy 配置设置一起使用。

对于 git:// 协议，我们有[Using Git with a SOCKS proxy](http://www.patthoyts.tk/blog/using-git-with-socks-proxy.html)。但是，git 似乎没有正确支持 socks 代理。git 本身链接到 libcurl。因此不使用 .curlrc 文件（仅用于 curl 命令行客户端）。但是，以下补丁提供了必要的支持。将此补丁应用于 git 后，我​​们可以简单地将 ALL_PROXY 环境变量或 HTTP_PROXY 或 HTTPS_PROXY 设置为`socks://hostname:portnum`（或 socks4/socks5），或者实际上是 http.proxy git config 设置，libcurl 现在在使用代理时将实际使用 socks 协议。

例如，活动跟踪：

```
$ GIT_CURL_VERBOSE=1 bin-wrappers/git -c "http.proxy=socks://localhost:1080" ls-remote http://github.com/patthoyts/tclftd2xx.git
* Couldn't find host github.com in the _netrc file; using defaults
* About to connect() to proxy localhost port 1080 (#0)
*   Trying 127.0.0.1...
* connected
* SOCKS4 request granted.
* Connected to localhost (127.0.0.1) port 1080 (#0)
> GET /patthoyts/tclftd2xx.git/info/refs?service=git-upload-pack HTTP/1.1
User-Agent: git/1.8.1.msysgit.1.dirty
... and on to a successful request ... 
```

必要的补丁：

```
diff --git a/http.c b/http.c
index 3b312a8..f34cc75 100644
--- a/http.c
+++ b/http.c
@@ -322,6 +322,14 @@ static CURL *get_curl_handle(void)
        if (curl_http_proxy) {
                curl_easy_setopt(result, CURLOPT_PROXY, curl_http_proxy);
                curl_easy_setopt(result, CURLOPT_PROXYAUTH, CURLAUTH_ANY);
+#if LIBCURL_VERSION_NUM >= 0x071800
+               if (!strncmp("socks5", curl_http_proxy, 6))
+                       curl_easy_setopt(result, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
+               else if (!strncmp("socks4a", curl_http_proxy, 7))
+                       curl_easy_setopt(result, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS4A);
+               else if (!strncmp("socks", curl_http_proxy, 5))
+                       curl_easy_setopt(result, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS4);
+#endif
        }

        return result; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-14T06:30:32.870

只需参考@briankip 并删除Yang.Y 提到的http 代理设置，您就可以直接编辑ini 文件。

您也可以在命令行上使用

`git config --global --unset http.proxy`

要确认它已被删除，请使用列出当前配置

`git config --list`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-20T10:24:08.840

## 建议的方法都不适合我，所以我找到了另一种方法，如下所示：

* * *

1.  `SOCKS5`使用以下协议通过协议创建隧道（动态端口转发）`ssh`：
    `ssh -ND 9994 user@YourSshServer`

* * *

2.  安装`proxychains`在您的本地主机上，而不是您连接到的 ssh 服务器上：

*   使用`apt-get`：
    `sudo apt-get install proxychains`
*   使用其[GitHub 存储库](https://github.com/rofl0r/proxychains-ng)：
    [检查其自述文件中的*安装*部分。]
    [[如何在 Firefox 上设置 socks5 代理](https://unix.stackexchange.com/q/532292)]

* * *

3.  编辑您的`proxychains`配置文件：
    `sudo nano /etc/proxychains.conf`然后在文件末尾添加以下行：
    `socks5 127.0.0.1 9994`

* * *

4.  现在我们准备做一个`git`命令（`proxychains`必须放在命令之前）：
    `proxychains git push origin develop`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-04T06:05:00.090

不幸的是，以上都没有对我有用，但是这样做了：

```
nano ~/.ssh/config 
```

添加：

```
Host my-host.foo.bar.com
    ProxyJump username@host.local 
```

其中 'host.local' 是一个香草 mac，在共享设置中启用了“远程登录”。为我工作:)

# c++ - Mac OS x 给出 ld: symbol(s) not found for architecture x86_64

> ID：15227131
> 
> 赞同：1
> 
> 时间：2013-03-05T15:06:02.090
> 
> 标签：c++, macos, 64-bit

我正在尝试编译一个在 Xcode 中运行良好但在终端中出错的 c++ 程序。

主文件

```
int main(int argc, const char * argv[])
{
    Example* example =new Example();
    example->show();
} 
```

例子.h

```
class Example {
public:

    void show();
}; 
```

例子.cpp

```
void Example::show() {

    std::cout<<"Hello World"<<std::endl;
} 
```

我得到的错误

```
 "Example::show()", referenced from:
      _main in cckpIa3V.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我正在使用 g++ 编译

```
g++ -o test main.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:09:13.690

您没有链接到`example.o`. 您没有显示命令行/Makefile，因此（大致）这是您需要输入的内容：

```
$ g++ -o example main.cpp example.cpp 
```

这将编译源文件并将其链接到一个名为`example`.

# iphone - 从 UITableview 向上滚动时的操作

> ID：15227132
> 
> 赞同：1
> 
> 时间：2013-03-05T15:06:02.373
> 
> 标签：iphone, ios, uitableview, scroll

当用户从 UITableView 向上滚动时，我想编写一个动作，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T04:53:51.420

试试这个

第1步：

```
 yourUITableView.delegate = self; 
```

第2步：

```
 CGFloat yOffset = 0.0; 
```

第 3 步：

```
 -(void)scrollViewDidScroll:(UIScrollView *)scrollView
        {
            if (scrollView.contentOffset.y < yOffset) {

                // scrolls down.
                yOffset = scrollView.contentOffset.y;
            }
            else
            {
                // scrolls up.
                yOffset = scrollView.contentOffset.y;

                // Your Action goes here...
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:37:36.523

我能想到几种方法可以帮助您解决这个问题。这一次，如果您不需要精确识别向上滑动，您可以使用 UITableView 行为来执行此操作。

每次出现新行时，都会调用[tableView:cellForRowAtIndexPath:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3acellForRowAtIndexPath%3a)选择器。您可以使用此方法通过比较先前插入的行 (indexPath.row) 来了解用户滚动的方向，以查看新的是否较低。如果是，则用户正在向上滚动。

为了更精确，您可以尝试使用[Swipe Gesture Recognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)。我个人从未使用过它，但我无法想象它很难使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:37:49.570

`UITableView`继承自，因此您可以为您的 tableView`UIScrollView`使用委托：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf /UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)`UIScrollView`

```
tableView.delegate = self; 
```

..

```
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView
{
   NSLog(@"Content offset: %f", scrollView.contentOffset.y);

   // do something like
   // if firstOffset < secondOffset {
   // [self yourAction];
   //}
} 
```

# java - 子类看不到父变量

> ID：15227134
> 
> 赞同：4
> 
> 时间：2013-03-05T15:06:06.817
> 
> 标签：java, nullpointerexception, subtype

```
public class Program {

    public static void main(String[] args) {
        Listener listener = new Listener();
        listener.listen();
    }
}

public class Listener {

    ServerQuery query;
    int test = 1;

    public listen() {
        query = new ServerQuery();
        Channel ch = new Channel();
        ch.dupa();
    }
}

public class Channel extends Listener {

    public dupa() {
        System.out.print(test); // works fine 
        super.query.doSomething(); // null pointer
        query.doSomething(); //  null pointer
    }
} 
```

我无法访问“通道”类中的变量“查询”。谁能解释我为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:08:47.563

**您误解了超类型和子类型的概念。**

直接的问题是您需要在使用它之前实例化查询变量。

要么`ch.listen()`在你打电话之前打电话，要么在`dupa`里面打电话`dupa`。

这里的主要问题是理解**子类型 - 超类型**关系。

您的 Channel 对象没有对 的实例的引用`Listener` ，它只是它的子类型。因此，如果您需要访问超类型的字段，例如访问类的字段 - 您必须在使用它之前对其进行实例化。

**在 Listener 中创建 Channel 对象没有逻辑**。Channel 是一个 Listener，因此您可以创建它。

我建议您[在这里](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)或其他任何地方阅读更多有关它的信息。

对于您的代码，您可以使用：

```
public class Program {

    public static void main(String[] args) {
        Channel ch = new Channel();
        ch.listen(); // will instantiate ch.query
        ch.dupa(); 
    }
}
public class Listener {

    ServerQuery query;
    int test = 1;

    public listen() {
        query = new ServerQuery();
    }
}

public class Channel extends Listener {

    public dupa() {
        System.out.print(test);
        super.query.doSomething();
        query.doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:07:31.140

编辑以获得更多解释：

超类中的变量必须定义为受保护的，以允许由子类实现。如果您不声明范围，则该字段将声明为包私有。

有关范围的更多信息可以在官方[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)中找到。

对您的代码的另一条评论：您的`query`变量未在此处实例化，因此如果您不`listen()`先调用该方法，它将始终返回 NPE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:28:22.160

您正在使用两个 Listener 对象。一个在 Channel 类中（比如 Channel.super()），一个在你的 main 方法中。

我认为令人困惑的是您假设您的 Channel 对象将使用您在 main 方法中声明的相同侦听器类。

简而言之，答案是查询变量未初始化。

所以主要是你有一个设计问题。您可以通过几种方式修复它。一个简单的方法是将查询传递给您的 dupa 方法并使用该查询对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:17:23.900

我通过制作类似的东西解决了它：

```
public class Channel extends Listener {
     ServerQuery queryInstance;
     Listener(ServerQuery listener){
         queryInstance = listener;
     }
     public dupa() {

        System.out.print(test); // works fine 
        super.query.doSomething(); // null pointer
        query.doSomething(); //  null pointer
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:17:43.783

`Channel ch = new Channel();`不初始化`query`。

您正在调用`dupa()`对象`Channel`而不调用`listen()`初始化`query`引用。

# html - IE中没有出现边框

> ID：15227137
> 
> 赞同：0
> 
> 时间：2013-03-05T15:06:15.777
> 
> 标签：html, css

我在 chrome 中看到了底部边框，但在 IE8 中没有。如何在 IE8 中解决这个问题？

```
<table>
 <tr>
   <td>test</td>
 </tr>
 <tr>
   <td style="border-bottom: 1px solid black;"></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:09:44.253

`<!DOCTYPE html`在文件顶部添加一个 doctype > 并包含`<html>`and`<body>`元素，它应该可以工作。您通过不使用文档类型来触发怪癖模式。

# jquery - 一个可拖动，两个可放置（一个是可排序的）

> ID：15227139
> 
> 赞同：0
> 
> 时间：2013-03-05T15:06:26.227
> 
> 标签：jquery, jquery-ui-sortable, jquery-droppable, jquery-draggable

我在这里和网络上的其他地方阅读了大量帖子，但我找不到适合我情况的解决方案。

我有两个设置为 droppables 的 div。#imgBrowser 包含一组通过 AJAX 动态填充的图像。一旦该 AJAX 调用返回，它就会触发一个函数，该函数将图像设置为可拖动对象，将两个 div（#imgBrowser 和 #imgQueue）设置为可放置对象，将 #imgQueue 设置为可排序对象。

用户可以在两个 div 之间来回拖动图像。我有这个完美的工作。但是，我要添加的功能是让#imgQueue 也可以排序。

到目前为止，这是我的代码：

```
function setUpSelectorDraggables(){
    $( "#imgBrowser > .imgTile" ).draggable({
          revert: "invalid",
          containment: 'window',
          scroll: false,
          helper: "clone",
          appendTo: 'body',
          cursor: "move"
        });

    $("#imgQueue")
        .sortable()
        .droppable({
          accept: ".imgTile",
          activeClass: "droppableActive",
          hoverClass: "droppableHover",
          drop: function( event, ui ) {
              addIMGtoQueue( ui.draggable );
          }
        });

    $( "#imgBrowser" ).droppable({
          accept: ".imgTile",
          activeClass: "droppableActive",
          hoverClass: "droppableHover",
          drop: function( event, ui ) {
              removeIMGfromQueue( ui.draggable );
          }
        });

    return false;   
} 
```

两个支持功能：

```
function addIMGtoQueue($item){
    $item.fadeOut(function() {
        $item.appendTo( "#imgQueue" ).fadeIn(function() {
          $item
            .animate({ width: "40px", height: "40px" })
            .find( "img" )
              .animate({ height: "42px", width: "42px" });
        });
      });

    return false;   
}

function removeIMGfromQueue($item){
    $item.fadeOut(function() {
        $item
          .css( "height", "150px").css( "width", "150px")
          .find( "img" )
            .css( "height", "150px" ).css( "width", "150px" )
          .end()
          .appendTo( "#imgBrowser" )
          .fadeIn();
      });

    return false;   
} 
```

和简单的html：

```
<div id="imgSelectionArea">
    <div id="galleryAlbumList"></div>
    <div id="imgBrowserContainer">
       <div class="albumNameHeader">
          <div class="albumNameArea">&lt;---Choose an Album</div>
       </div>
       <div id="imgBrowser" class="droppableNormal"></div>
    </div>
</div>
<div style="clear:both;"></div>
<div id="imgQueue" class="droppableNormal"></div> 
```

我遇到的问题是，当尝试对#imgQueue 进行排序时，可拖动/可放置会覆盖可排序。我猜如果可排序覆盖了可拖动，那么如果我想拖回#imgBrowser，那将是一个问题。我想要做的甚至可能吗？

谢谢！马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:42:23.837

如果您使用 Jquery 可排序，则可以添加 connectWith 的属性：'.div1, .div2'

所以基本上你有三个可排序的容器，但可以在任何你不希望排序的容器上禁用可排序

# c++ - 击中屏幕侧面时反转动画方向

> ID：15227144
> 
> 赞同：0
> 
> 时间：2013-03-05T15:06:38.490
> 
> 标签：c++, sfml

我正在为我的大学作业创建一个太空入侵者游戏。我在纸上分解零件，我认为一个好的起点是在屏幕上移动精灵。我现在遇到的问题是，当精灵在屏幕的右侧时它会继续移动，所以我添加了以下代码：

```
 if (invadersSprite.getPosition().x > 650)           
    {
        std::cout << "WIDTH_END" << std::endl;
    } 
```

我基本上将其用于调试以供将来参考。输出弹出到控制台，所以我知道我在做某事。所以，我开始从输出转移到实际将精灵移回屏幕的左侧。我现在遇到的问题比预期的要多。

为了便于阅读代码，我为 up、left、right 和 down 声明了一些整数。

```
int spriteWalkSpeed = 50;
int up=-spriteWalkSpeed, down=spriteWalkSpeed, left=-spriteWalkSpeed, right=spriteWalkSpeed; 
```

我尝试过使用 SFML 移动命令和 setPosition，但它们都没有像我认为的那样真正起作用。

**移动：**

我遇到的问题是它基本上停在屏幕中间。它仍然会为腿部运动等设置动画，但不会向左或向右移动。

```
 if (invadersSprite.getPosition().x > 650)           
    {
        invadersSprite.move(left, 00);
    } 
```

**设置位置：**

这有点接近我所追求的，但仍然没有雪茄。移动暂停大约一秒钟，然后在屏幕左侧弹出。我需要的是向下移动屏幕。

```
 if (invadersSprite.getPosition().x > 650)           
    {
        invadersSprite.setPosition(left, 00);
    } 
```

我已经很久没有使用 SFML，所以我对此有点困惑。

**编辑**

目前精灵正在根据需要移动到屏幕的右侧：

```
if(spriteTimer>delay)
            {
                invadersSprite.setTextureRect(area);
                ++count;
                invadersSprite.move(right,0);
                if(count==SPRITECOLS) //WE HAVE MOVED OFF THE RIGHT OF THE IMAGE
                {
                    area.left=0;            //reset texture rect at left

                    count=0;                //reset count
                }
                else
                {
                    area.left+=spaceWidth; //move texture rect right

                }

                spriteTimer=0; //we have made one move in the sprite tile - start timing for the next move
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:21:19.703

如果 x 坐标大于 650，您当前的逻辑只会将精灵向左移动一次 - 但这并不是您想要的。您想要的是精灵在到达边缘后不断向左移动。

为此，您需要跟踪精灵的当前速度。例如，当您的精灵启动时，它将向右移动：

`xVelocity = right;`

然后你可以有 2 个条件来切换方向（当碰到屏幕边缘时）：

```
if (invaderSprite.getPosition().x >= screenWidth) {
    // hit the right side of screen
    xVelocity = left;
} else if (invaderSprite.getPosition().x <= 0) {
    // hit the left side of screen
    xVelocity = right;
} 
```

现在，在任何游戏时间，您只需根据当前速度移动您的精灵：

`invaderSprite.move(xVelocity, yVelocity);`

还有一些其他的事情需要修复，比如考虑精灵的宽度、改变 y 速度等，但这是主要思想。

# ruby-on-rails - 获取请求的内容类型

> ID：15227145
> 
> 赞同：23
> 
> 时间：2013-03-05T15:06:38.643
> 
> 标签：ruby-on-rails, http, rest, ruby-on-rails-3.1, mime

要查找传入的内容类型，[文档说](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers)：

```
 request.headers["Content-Type"] # => "text/plain" 
```

但是我通过反复试验发现，这是行不通的，但这确实：

```
 request.headers["CONTENT_TYPE"]=='application/json' 
```

那么最强大+便携的方法是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-05T15:14:54.433

我通常会去`request.format`阅读`request.content_type`这些标题字段。

**编辑**：在这方面发现了更多可能有帮助的信息：[https ://stackoverflow.com/a/1595453/624590](https://stackoverflow.com/a/1595453/624590)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-09-29T21:17:44.043

您不需要解析 content_type 字符串，Rails 已经为您完成了这项工作。只需检查：

```
request.format.symbol == :json 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-22T18:47:00.690

另一种写法：

```
request.format.json? 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-11-17T23:06:59.310

无需调用 #symbol，因为 equals 已重载：

```
request.format == :json 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-26T11:59:10.573

对我来说，检查传入请求是否为 json 的最佳方法是：

```
 if request.content_type =~ /json/ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-15T07:17:25.157

request.format == '应用程序/json'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-25T12:51:59.957

严重需要重点了解这里。参考。Rails 6.x with api only project

您必须确定为什么要 request.content_type 或 request.headers['Content-Type'] ？下面解释...

1.  request.format OR request.headers['Accept'] 是客户端期望通过 API（服务或服务器）请求响应的格式。

2.  request.content_type OR request.headers['Content-Type'] 是 API（服务或服务器）期望来自请求的数据格式。

因此，如果 API（服务或服务器）想要在 application/json 中请求数据，那么您使用 request.content_type 或 request.headers['Content-Type'] 是正确的

# c++ - 使用 FindFirstFile 搜索目录的相对路径

> ID：15227149
> 
> 赞同：2
> 
> 时间：2013-03-05T15:06:47.927
> 
> 标签：c++, path, relative-path

在包含我的 exe 的目录中，我有一个名为“saves”的文件夹。我想显示这个目录包含的文件。

我使用了这里找到的代码： [Listing directory contents using C and Windows](https://stackoverflow.com/questions/2314542/listing-directory-contents-using-c-and-windows)

现在是棘手的部分。如果我`.\\saves\\`用作我的目录，它会告诉我找不到路径。但是，如果我使用`..\\release\\saves\\`它可以正常工作。但那很愚蠢。我不想转到父文件夹然后返回。特别是关于我不知道用户给包含 exe 的目录起什么名字（在我的情况下它是“发布”但谁知道用户做了什么:-D）。

我通读了这个： http: [//msdn.microsoft.com/en-us/library/aa365247](http://msdn.microsoft.com/en-us/library/aa365247(v=vs.85).aspx#fully_qualified_vs._relative_paths) (v=vs.85).aspx#fully_qualified_vs._relative_paths但它并没有太大帮助。

我也尝试过`saves\\`，`.\saves\\`但它也不起作用。

我希望有人能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T15:06:10.593

您实际上在代码中没有做错任何事情——您一直在从 Visual Studio 启动项目，它将工作目录设置为 Release/Debug 文件夹的父级。

转到项目->设置（属性）->配置属性->调试->工作目录

您还可以在 VS 之外运行 exe，相对路径的行为将与您预期的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:11:46.657

如果它与可执行文件的路径相关，而不是当前工作目录的路径，则可以使用它[`GetModuleFileName()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683197%28v=vs.85%29.aspx)来获取可执行文件的完整路径。然后，从路径末尾删除可执行文件的名称并使用它构建路径：

```
std::string executable_directory_path()
{
    std::vector<char> full_path_exe(MAX_PATH);

    for (;;)
    {
        const DWORD result = GetModuleFileName(NULL,
                                               &full_path_exe[0],
                                               full_path_exe.size());

        if (result == 0)
        {
            // Report failure to caller.
        }
        else if (full_path_exe.size() == result)
        {
            // Buffer too small: increase size.
            full_path_exe.resize(full_path_exe.size() * 2);
        }
        else
        {
            // Success.
            break;
        }
    } 

    // Remove executable name.
    std::string result(full_path_exe.begin(), full_path_exe.end());
    std::string::size_type i = result.find_last_of("\\/");
    if (std::string::npos != i) result.erase(i);

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:12:13.690

我认为您的错误是使用`\\saves\\`并忘记指定搜索参数/字符串
您应该使用：

```
saves\\* 
```

这将搜索任何文件或文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:13:32.020

我会使用`boost::filesystem` [http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm)。

作为奖励，您将获得独立于操作系统的代码。

# node.js - 莫名其妙的node.js http抛出连接ECONNREFUSED（IPv6？）

> ID：15227154
> 
> 赞同：5
> 
> 时间：2013-03-05T15:06:55.523
> 
> 标签：node.js, ipv6, node.js-connect

我正在运行 node.js，如下所示：

```
> http = require('http')
> http.get('http://myhost.local:8080',
    function (res) { console.log("RES" + res) }
  ).on('error', function (e) { console.log("Error:", e) })

> uri = require('url').parse("http://myhost.local:8080")
{ protocol: 'http:',
  slashes: true,
  auth: null,
  host: 'myhost.local:8080',
  port: '8080',
  hostname: 'myhost.local',
  hash: null,
  search: null,
  query: null,
  pathname: '/',
  path: '/',
  href: 'http://myhost.local:8080/' }
> http.get(uri,
    function (res) { console.log("RES" + res) }
  ).on('error', function (e) { console.log("Error:", e) }) 
```

隐式和显式解析的 URI 均引发错误，我得到以下输出：

> 错误：{ [错误：连接 ECONNREFUSED] 代码：'ECONNREFUSED'，errno：'ECONNREFUSED'，系统调用：'connect'}

主机`myhost.local`是 in 的别名`localhost`，即`/etc/hosts`：

```
127.0.0.1   localhost myhost.local myhost
255.255.255.255 broadcasthost
::1             localhost myhost.local myhost
fe80::1%lo0 localhost myhost.local myhost 
```

*编辑*：我几乎尝试了主机文件的所有排列，包括最明显的：

```
127.0.0.1   localhost 
255.255.255.255 broadcasthost
::1             localhost myhost.local myhost
fe80::1%lo0 localhost 
```

*编辑*我还应该提到我现在已经在不止一台 Mac 上尝试过这个。

尽管这似乎是一个相当常见的错误，但我没有看到任何有用的解释或解决方法。以下是一些值得注意的相关事实：

1.  运行`$ wget http://myhost.local:8080`按预期工作，所以它不是防火墙问题。
2.  运行`$ telnet myhost.local 8080`然后手动获取 url 工作正常，所以这不是一个奇怪的 HTTP 问题。
3.  我使用 node.js 连接到其他主机没有问题，例如[http://www.google.com](http://www.google.com)

我希望有用的系统信息包括：

```
$ node -v
v0.9.11

$ uname -a
Darwin myhost.local 12.2.1 Darwin Kernel Version 12.2.1:
Thu Oct 18 12:13:47 PDT 2012; root:xnu-2050.20.9~1/RELEASE_X86_64 x86_64

$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.8.2
BuildVersion:   12C3104

$ sudo  netstat -nalt | grep LISTEN | grep 8080
tcp6       0      0  ::1.8080  *.*    LISTEN 
```

有谁知道这里发生了什么，以及可能的修复方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T10:33:47.933

我将在此处发布此内容，以防其他人遇到问题。

Bert Belder，Node.js 邮件列表：

> 在您的系统上，“myhost.local”解析为三个不同的地址（127.0.0.1、:::1 和 fe80::1）。Node 更喜欢 ipv4 而不是 ipv6，因此它会尝试连接到 127.0.0.1。127.0.0.1:8080 上没有任何监听，因此 connect() 系统调用失败并显示 ECONNREFUSED。Node 不会使用任何其他已解析的 IP 重试 - 它只会向您报告错误。一个简单的解决方案是将“localhost”替换为预期的目标 IP 地址“::1”。
> 
> 这种行为是否正确尚有待商榷，但这就是造成这种行为的原因。
> 
> 伯特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:01:14.157

[根据关于 nodejs/Google Groups](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/0W6UqKy_klk)的讨论，这源于 Node 的一个问题（尽管有一些方法可以解决它），正如@alessioalex 在他的回答中提到的那样。每个伯特贝尔德的有用评论：

> 应该有一个 getaddrinfo 包装器，它返回的不仅仅是第一个结果

例如，

```
> require('dns').lookup('myhost.local', console.log)
{ oncomplete: [Function: onanswer] }
> null '127.0.0.1' 4 
```

`getaddrinfo`这是传递给 Node.js的多个结果中的第一个。似乎nodejs只使用了`getaddrinfo`调用的第一项。Bert 和 Ben Noordhuis 在小组讨论中一致认为，应该有一种方法可以返回不仅仅是使用`getaddrinfo`包装器的第一个结果。

对比 python，它返回所有结果`getaddrinfo`：

```
>>> import socket
>>> socket.getaddrinfo("myhost.local", 8080)
[(30, 2, 17, '', ('::1', 8080, 0, 0)),
 (30, 1, 6, '',  ('::1', 8080, 0, 0)),
 (2, 2, 17, '',  ('127.0.0.1', 8080)),
 (2, 1, 6, '',   ('127.0.0.1', 8080)),
 (30, 2, 17, '', ('fe80::1%lo0', 8080, 0, 1)),
 (30, 1, 6, '',  ('fe80::1%lo0', 8080, 0, 1))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:13:17.310

这行得通吗？

```
var http = require('http');
var options = {
  host: 'myhost.local',
  port: 8080,
  path: '/'
};

http.get(options, function (res) { 
  console.log("RES" + res) 
}).on('error', function (e) { 
  console.log("Error:", e) 
}); 
```

# c# - “帧阻塞”是什么意思？

> ID：15227169
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:07:40.307
> 
> 标签：c#, speech-recognition, naudio, audio-processing, feature-extraction

我对“帧阻塞”很好奇，这是我在网站上看到的特征提取的第一步。它说应该遵循以下步骤来提取音频的特征：

1.  帧阻塞
2.  开窗
3.  fft
4.  梅尔频率翘曲
5.  倒谱

“帧阻塞”是什么意思？任何人都可以为此提供算法或代码（c＃）吗？

顺便说一句，这个步骤顺序对于特征提取是否正确？

在特征提取之前我应该​​如何“预过滤”音频？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:29:00.837

这是我从谷歌搜索中找到的“帧阻塞”一词 - 谷歌自动完成了“语音信号的帧阻塞”。

[http://books.google.com/books?id=B9VuCBBYzJ4C&pg=PA21&lpg=PA21&dq=frame+blocking+of+speech+signal&source=bl&ots=FCzp86g8F0&sig=P5aolL4OAAyPwxZ2nMd-Ye_5M_I&hl=en&sa=X&ei=oLM3UeK3DsTfrQHyvYD4DQ&sqi=2&ved=0CC4Q6AEwAA#v= onepage&q=frame%20blocking%20of%20speech%20signal&f=false](http://books.google.com/books?id=B9VuCBBYzJ4C&pg=PA21&lpg=PA21&dq=frame+blocking+of+speech+signal&source=bl&ots=FCzp86g8F0&sig=P5aolL4OAAyPwxZ2nMd-Ye_5M_I&hl=en&sa=X&ei=oLM3UeK3DsTfrQHyvYD4DQ&sqi=2&ved=0CC4Q6AEwAA#v=onepage&q=frame%20blocking%20of%20speech%20signal&f=false)

相关文字：

> 语音信号处理中最常见的方法是基于短时分析。预加重的信号被分成*N*个样本的帧。帧持续时间通常在 10 - 30 mxec 之间。此范围内的值代表频谱变化率和系统复杂性之间的折衷。适当的帧持续时间最终取决于语音产生系统中发音器的速度。一些声音（例如，停止辅音）表现出尖锐的频谱过渡，这可能导致频谱峰值移动高达 80 Hz/msec（Mar76]。图 2.3 说明了一个单词在*J*帧中的阻塞。在某种程度上重叠的数量控制参数在帧之间变化的速度。

现在给您的问题是，您在帧阻塞方面尝试过什么？

# mysql - 转储文件 MySQL 5.6.10

> ID：15227171
> 
> 赞同：44
> 
> 时间：2013-03-05T15:07:47.440
> 
> 标签：mysql, mysqldump, dump

我试图从我的 MySQL 数据库创建一个转储文件，但是当我尝试时它总是给我这个错误

> 操作失败，退出代码 2

```
16:06:07 Dumping proactivetraindb (userstate)

Running: mysqldump.exe --defaults-extra-file="h:\docume~1\anarita\locals~1\temp\tmpde5rwy.cnf"  --user=root --max_allowed_packet=1G --host=localhost --port=3306 --default-character-set=utf8 "proactivetraindb" "userstate"

mysqldump: Couldn't execute 'SET OPTION SQL_QUOTE_SHOW_CREATE=1': You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OPTION SQL_QUOTE_SHOW_CREATE=1' at line 1 (1064) 
```

MySQl 的版本是 5.6.10 但 MySQLDump 的版本是 5.5.16

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-17T20:36:50.630

正如先前的答案所述，但只是为了进一步澄清：这是针对 Windows 中的 MySQL 的。

我在尝试从本地测试服务器上的表中转储数据时遇到了完全相同的问题，并且根据之前的答案，我就是这样做的。

1.  找到你的 mysql 原始下载文件夹，然后在`/bin`文件夹中查找，应该有一个`mysqldump.exe`.
2.  进入 Workbench Preferences: `Edit -> Preferences -> Administrator -> Path`to mysqldump Tool，然后输入您找到的 mysqldump.exe 的路径。
3.  按“确定”并重新启动 Workbench 保存。
4.  打开终端，但在`cmd`开始菜单的搜索区域输入（Windows 7），找到您在步骤 1 中找到的 sql 文件夹，然后 cd 进入 bin。它应该看起来像`C:\...\bin>`。在这里，输入`mysqldump -t -u [username] -p [database name] [tablename]`。这应该将`[tablename]`表中的数据转储到 Workbench 中指定的转储文件夹中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-19T17:26:24.593

我在 MySQL Workbench 中遇到了同样的错误。

1.  找出安装 MySQL 5.6 时提供的 mysqldump 工具在哪里。在我的 Mac 上，它位于“usr/local/mysql-5.6.10-osx10.7-x86_64/bin/mysqldump”。
2.  然后我在 MySQL Workbench/Preferences/Administrator/Path to mysqldump Tool 中设置了这个路径
3.  重新启动 MySQL Workbench。

它应该工作。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-11-15T23:13:54.143

这样做的原因是 MySQL 5.6 已经删除了对“SET OPTION”的支持，并且您的 mysql 客户端工具可能在旧版本上。很可能是 5.5 或 5.1。MySQL bugs 网站上有关于这个问题的更多信息。

最快的解决方案是将你的mysql客户端工具更新到5.6，你的问题就会得到解决。如果您在 Linux 平台上，这里有一个对我来说非常有用的解决方案：http: [//www.markomedia.com.au/mysqldump-mysql-5-6-problem-solved/](http://www.markomedia.com.au/mysqldump-mysql-5-6-problem-solved/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-13T14:04:01.150

您必须使用 mysqldump 5.6.x 才能转储 mysql 5.6 数据库，因为 MySQL 5.6 停止并删除了对 SET OPTION 语法的支持。
在 32/64 位 Windows 下，您必须执行以下操作：
1.1。(32bit win) 下载 Windows (x86, 32-bit), ZIP Archive 5.6.19 212.3M [http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/) (直接链接[http://dev.mysql.com/downloads/文件.php?id=452188](http://dev.mysql.com/downloads/file.php?id=452188) )
1.2\. (64bit win) 下载 Windows (x86, 64-bit), ZIP Archive 5.6.19 217.2M [http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/) (直接链接[http://dev.mysql.com/downloads/ file.php?id=452189](http://dev.mysql.com/downloads/file.php?id=452189) )
2\. 从刚刚下载的文件 mysql-5.6.19-win32(64).zip (from /mysql-5.6.19-win32(64)/bin/mysqldump.exe) 中提取 mysqldump.exe
3.用你已经安装的mysqldump.exe文件替换这个刚刚提取的文件（安装目录/mysql/bin/mysqldump.exe）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-08T21:14:54.453

使用 Windows 7，对我来说一个更简单的解决方案是找到 mysqldump.exe；***C:\Program Files\MySQL\MySQL 服务器 5.6\bin\mysqldump.exe***

复制它，然后替换位于工作台***C:\Program Files\MySQL\MySQL Workbench CE 5.2.47\mysqldump.exe 根目录下的 MySQL 工作台 mysqldump.exe***

重新启动 MySQL 工作台，一切正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-01T03:41:05.733

您可能正在使用 Amazon RDS，对吧？您可以获取更新版本的 mysqldump v5.6 并改用它。

在此处下载可移植 zip 并在此处仅提取 mysql\mysqldump.exe。 [http://sourceforge.net/projects/xampp/files/XAMPP%20Windows/1.8.3/](http://sourceforge.net/projects/xampp/files/XAMPP%20Windows/1.8.3/)

我刚才试过了，对我来说效果很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-11T08:29:53.240

如果您正在使用`Window 10`. 您`Mysql server`将安装在`C:\Program Files\MySQL`目录中，其余所有组件都安装在`C:\Program Files (x86)\MySQL`. 转到`MySql Workbench`> `Edit`> `Preferences`。将打开一个窗口，单击管理员选项卡并提及您的路径`mysqldump.exe`（位于 中`C:\Program Files\MySQL`）。重新启动您的工作台。

谢谢，快乐编码！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-22T21:28:35.000

在 Workbench 中查找首选项：编辑 -> 首选项 -> 管理员 -> mysqldump 工具的路径。浏览 bin 文件夹中的 MySQL 文件夹并查找 mysqldump.exe。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-03T16:09:06.017

我在访问 RDS Mysql 5.6 数据库的 Amazon EC2 上遇到了这个问题。我刚跑

sudo apt-get 升级

它没有将 mysql 客户端更新到 5.6，但 mysqldump 现在工作正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-01T14:41:00.210

对于 Mac，这取决于您的安装。如果你使用 dmg 文件安装它，你需要找到 bin 目录。我的是在`/usr/local/mysql/bin` 这个文件夹下你会发现mysqldump文件。现在在您的首选项 -> 管理员 -> mysqldump 工具的路径中提供此位置，因为`/usr/local/mysql/bin/mysqldump` 您现在应该可以导出了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-22T09:26:45.100

如果您在 Linux 上，请将 mysql-client 更新到最新版本。在 Ubuntu 上：

```
sudo apt-get upgrade mysql-client 
```

为我完成了这项工作。

```
Setting up mysql-client-5.5 (5.5.43-0ubuntu0.12.04.1) ... 
```

我的更新到 5.5，mysqldump 现在对我有用。这是在带有 MySQL 5.6.x 的 Amazon RDS 上

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-02T21:55:54.753

如果您在 linux 机器上，这是由`mysql-client`软件包提供的。安装它为我解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-18T16:34:57.903

为了兼容性，我需要`MySQL 5.6.41`在我的 Windows 10 机器`5.6.41 MySQL installer`上安装“All”（我的工作台、MySQL、连接器等）。

即使我使用了 5.6.41 版的安装程序，它也安装了`Workbench 8.0`8.0 版以及各种连接器等
。当然，我遇到了类似的错误。

似乎没有简单的方法来强制安装较低版本的 MySQL Workbench（在我以前的机器上，在工作台 8.0 之前，安装时没有这个冲突）。

**对我有用的解决方案：**

1.  查找`mysqldump.exe`与您正在使用的 MySQL 版本匹配的版本：

    *   从 Windows 资源管理器中，我在我的机器上搜索了所有版本的`mysqldump.exe`
    *   右键单击`mysqldump.exe`找到的每个 -> `Properties`->`Details`选项卡。
    *   找到版本`5.6.41`（匹配我正在运行的 MySQL 版本）
    *   单击返回`General`选项卡，查看安装该版本 mysqldump.exe 的文件夹路径

    *   `C:\Program Files\MySQL\MySQL Server 5.6\bin`，在我的情况下（版本 8.0 安装在`C:\Program Files\MySQL\MySQL Workbench 8.0 CE`）

2.  现在打开 MySQL Workbench..

    *   编辑 -> 首选项 -> 管理 -> mysqldump 工具的路径

    *   粘贴相应版本的文件路径`mysqldump.exe`（包括文件名！）

    *   点击`OK`

    *   重启 MySQL 工作台

[![在此处输入图像描述](../Images/4c9217202018de937ce97ba818cddb57.png)](https://i.stack.imgur.com/rvLwP.png) [![在此处输入图像描述](../Images/1ad363d8b8f2c112413ca6b924f5a0b6.png)](https://i.stack.imgur.com/m989y.png) [![在此处输入图像描述](../Images/19ced97dc02e6b8d384018f39791cd4e.png)](https://i.stack.imgur.com/eO20o.png) [![在此处输入图像描述](../Images/ee44ec10e648e035cc5b293ebb996556.png)](https://i.stack.imgur.com/6y0hl.png)

这对我有用。但是，如果您的机器上有两个版本的 MySQL，比如 MySQL 5.6 和 5.7，或者 8.0，我不知道如何进行这项工作。
因此，当我将（任何/部分/全部）云服务器升级到 5.7 版时，这似乎是另一个需要克服的挑战。由于 Workbench 只允许单个`mysqldump.exe`文件，无论我的本地 MySQL 服务器正在运行哪个版本......或者可能手动更改路径位置，每次打开一个使用端口到*另一个*MySQL 版本的连接（并记住之后再改回来？）。

*出于这个原因，我`Removed`完全使用 MySQL 5.7*，因此暂时将所有云（和我的本地）服务器保持在 5.6 - 改天的项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-13T05:19:28.420

为了 Ubuntu 用户节省您的时间，mysqldump 在“mysql-community-client_5.7.26-1ubuntu16.04_i386.deb”包中

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-27T12:56:17.460

我只是有同样的问题，我把几个不同的答案放在一起。

对我来说，专业人士是，我可以在 5.6、8、... 之间轻松切换，而不必每次都升级/降级 ubuntu 依赖项。

对我来说，在 Ubuntu 上最简单的方法是下载 5.6（或 5.7，无论你想要什么）mysqldump 二进制文件并在工作台中更改它。之后一切顺利：

1.  转到[https://downloads.mysql.com/archives/community/](https://downloads.mysql.com/archives/community/)并下载您想要的正确版本（对我来说：5.6.47 for 64x）
2.  在某处解压存档，稍后可以找到
3.  将mysql工作台中的mysqldump二进制文件：编辑->首选项->管理员->“mysqldump工具的路径”改为`{{YOUR_UNPACKED_FOLDER}}/bin/mysqldump`
4.  保存它`Ok`

现在您应该能够只导出并且它将使用 mysqldump 5.x。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-04-23T06:36:05.710

我有**Mysql 5.6.12**版本。`SET SQL_QUOTE_SHOW_CREATE=1`在我的机器上工作正常。现在我可以转储 sql 了。

> mysql> SET SQL_QUOTE_SHOW_CREATE=1; 查询正常，0 行受影响（0.00 秒）

为我工作。

# msbuild - 如何在 MSBuild 脚本中访问 ItemGroup 元数据作为属性

> ID：15227172
> 
> 赞同：4
> 
> 时间：2013-03-05T15:07:50.013
> 
> 标签：msbuild, msbuild-4.0

是否可以使用默认的 MSBuild 技术来访问项目组中的列表作为 msbuild 中的属性？我知道我可以在 C# 的自定义任务中执行此操作，但如果可能，我会尝试使用内置功能。

例子：

我有一个项目组：

```
<ItemGroup>
    <SolutionToBuild Include="$(SolutionRoot)\Solutions\ClassLib\ClassLib.sln">
      <Properties>
        AssemblySigningKey=MySigningKey;
        OutDir=$(BinariesRoot)\SomeLocation\;
        LibraryName=ClassLib;
        PlatformTarget=x86;
      </Properties>
    </SolutionToBuild>

    <SolutionToBuild Include="$(SolutionRoot)\Solutions\BLAH\BLAH.sln">
      <Properties>
        ProjectType=Web;
      </Properties>
    </SolutionToBuild>
</ItemGroup> 
```

我想提取 的值（`AssemblySigningKey`如果存在），然后将此值放入 M​​SBuild 变量中。

我已经尝试了一些方法，我能找到的最接近的例子是在一个单独的目标中使用一个转换，但即使这看起来有点像 hack，即使我能得到`Condition`工作，我也必须解析出上的值拆分`=`。是否没有标准方法可以在项目组中访问此元数据？

```
<Target Name="TransformProps"
        Inputs="%(SolutionToBuild.Identity)"
        Outputs="_Non_Existent_Item_To_Batch_">

    <PropertyGroup>
        <IncludeProps>%(SolutionToBuild.Properties)</IncludeProps>
    </PropertyGroup>

    <ItemGroup>
        <IncludeProps Include="$(IncludeProps)" />
        <Solution Include="@(SolutionToBuild)">
          <IncludeProps Condition="'True'=='True' ">@(IncludeProps ->'-PROP %(Identity)', ' ')</IncludeProps>

        </Solution>
    </ItemGroup>
</Target> 
```

我的主要目标将通过以下方式调用转换：

```
<Target Name="Main"  DependsOnTargets="TransformProps">    
    <Message Text="Solution info:  %(Solution.Identity) %(Solution.IncludeProps)" />
</Target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:49:36.460

[项目元数据](http://msdn.microsoft.com/en-us/library/ms171453.aspx#BKMK_ItemMetadata "项目元数据")使用 xml 标记进行声明和转换。您似乎正在使用[MSBuild 任务](http://msdn.microsoft.com/en-us/library/vstudio/z7f65y0d.aspx)来构建一些解决方案 -*属性*标记是特定于该任务的参数。

您尝试从逗号分隔的列表和项目进行转换将无济于事，因为正如您所提到的，您仍然拥有等号作为从键到值的链接。我认为没有解析就无法获得签名密钥值。毕竟 msbuild 不将属性列表视为元数据，它只是一个字符串列表。

我做了下面的脚本来举例说明 msbuild 如何声明和读取元数据。这不是您的选择，因为您的 ItemGroup 结构无法更改。

恕我直言，在这种情况下，您别无选择，只能使用自定义任务并进行解析。如果您使用 msbuild 4.0 构建，请使用[内联任务。](http://msdn.microsoft.com/en-us/library/dd722601.aspx)

```
<?xml version="1.0" encoding="UTF-8" ?>
<Project DefaultTargets="Main" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <SolutionToBuild Include="$(SolutionRoot)\Solutions\ClassLib\ClassLib.sln">
      <AssemblySigningKey>MySigningKey123</AssemblySigningKey>
      <Properties>
        AssemblySigningKey=MySigningKey456;
        OutDir=$(BinariesRoot)\SomeLocation\;
        LibraryName=ClassLib;
        PlatformTarget=x86;
      </Properties>
    </SolutionToBuild>
  </ItemGroup>

  <Target Name="TransformProps">
    <PropertyGroup>
      <MySigningKey>@(SolutionToBuild->'%(AssemblySigningKey)')</MySigningKey>
    </PropertyGroup>
  </Target>

  <Target Name="Main"  DependsOnTargets="TransformProps">
    <Message Text="My desired Property Value:  $(MySigningKey)" />
  </Target> 
```

# iphone - iOS - 在 ipad 待机时，我的应用程序卡住了

> ID：15227174
> 
> 赞同：0
> 
> 时间：2013-03-05T15:07:52.433
> 
> 标签：iphone, ios, objective-c, uiview

我正在使用以下代码来禁用和启用 View。

禁用视图。

```
 [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    _loadingSpinner.hidden = FALSE; 
```

启用视图。

```
[[UIApplication sharedApplication] endIgnoringInteractionEvents];
_loadingSpinner.hidden = true; 
```

但是当设备进入待机模式时。应用程序冻结。用户已在任务窗格中关闭应用程序以便再次运行它。

请帮忙！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:10:11.160

为什么要禁用视图？如果您想在流程完成时阻止交互，为什么不使用[MBProgressHUD 之](https://github.com/jdg/MBProgressHUD)类的东西或制作自己的模态视图并使用它呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:21:06.540

放置一个断点并随时检查结束交互的代码是否被命中。为什么不使用`userInteractionEnabled`UIView 的微调器或属性的覆盖视图呢？

# events - 防止jquery移动面板打开？

> ID：15227176
> 
> 赞同：4
> 
> 时间：2013-03-05T15:07:55.133
> 
> 标签：events, jquery-mobile, panel

我有以下代码。如您所见，我已经尝试了大多数防止它打开的常用方法。

我这样做是因为在 panelbeforeopen 中，我想检查用户是否已登录，然后仅在登录时才显示面板。

```
$(document).on('panelbeforeopen', '#right_panel', function(event){
        event.preventDefault();
        alert('test');
        return false;
        event.stopImmediatePropagation();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:12:45.257

最后，我必须将事件处理程序绑定到负责打开面板的按钮。

需要注意的是，将 a 标签自动链接到面板的代码将其事件处理程序设置为单击事件而不是点击事件。如果你使用 .on 绑定你的点击事件处理程序，它也不管什么原因都不起作用。你必须像往常一样绑定它。

在这里看到[js fiddle](http://jsfiddle.net/FYYvG/1/ "js小提琴")

```
$('.footer .right_panel').on('click', function (event) {        
    alert('test');
    event.stopPropagation();
}); 
```

# jquery - 获取 HTML 标签和文本

> ID：15227178
> 
> 赞同：3
> 
> 时间：2013-03-05T15:07:57.083
> 
> 标签：jquery, html

我目前正在创建一个表格，该表格允许我按升序和降序对行进行排序，以及单击并拖动列。我有这个工作，但我想改进它。目前我正在获取标题和单元格元素文本，然后将 HTML 标记连接到字符串：

`var row = "<td>" + myData + "</td>";`

我想知道的是，如果 jQuery 有一种方法/函数，可以让我获取带有仅附加到一个元素的标签的文本。

我试过了`.text()` `.html()` `.contents();` `.parent().html()`。该函数`.parent().html()`最接近我想要的，但它为我提供了所有带有标签和文本的行，而不仅仅是我想要的。

所以我想保存在我的变量中的`<th>First Column</th>`不仅仅是`First Column`.

这是我尝试过的一个小提琴示例，带有基本的 HTML 标记和我研究的 API 的链接：

[小提琴](http://jsfiddle.net/Jd6x7/1/)

[.text()](http://api.jquery.com/text/) [.html()](http://api.jquery.com/html/) [.contents()](http://api.jquery.com/contents/) [.parent()](http://api.jquery.com/parent/)

更新：

对于那些好奇我为什么要这样做的人，这是我的副业：

[表分拣机](http://jsfiddle.net/3JRSz/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:11:38.370

你可以使用`outerHTML`属性。

```
var html = $(this).prop('outerHTML'); 
```

或者：

```
var html = this.outerHTML; 
```

[http://jsfiddle.net/Qy8GS/](http://jsfiddle.net/Qy8GS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:14:22.497

[http://jsfiddle.net/aCTva/1/](http://jsfiddle.net/aCTva/1/)

```
$.fn.outerHTML = function () {
    var $t = $(this).eq(0);
    if ("outerHTML" in $t[0]) {
        return $t[0].outerHTML;
    } else {
        return $t.clone().wrap('<div></div>').parent().html();
    }
};

alert($(this).outerHTML()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:36:45.583

新的 jsFiddle：http: [//jsfiddle.net/EdD7U/2/](http://jsfiddle.net/EdD7U/2/)

```
$("tr").each(function () {
    var colIndex = 0;

    $(this).find("td").each(function () {
        $(this).parent().parent().find('th')
            .each(function(index) {
                if (index == colIndex) {
                    var colHeader = $(this).prop("outerHTML");
                    alert(colHeader);
                }
            });

        colIndex++;
    });            
}); 
```

基本上，保存`tr`你所在的索引，然后在 dom (to ) 中抓取一些父母`table`，然后找到`th`标签。对于每个`th`标签，只输出`th`原始索引的`tr`。您要获取的变量是`colHeader`.

# iphone - 自定义 UITabBarController 和 UINavigationController

> ID：15227181
> 
> 赞同：0
> 
> 时间：2013-03-05T15:08:04.367
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uinavigationcontroller

我正在为 iOS5 及更高版本开发应用程序，我不使用情节提要或 IB。我正在创建一个自定义`UITabBarController`，并在`AppDelegate`其中放入了 4 个视图控制器，其中只有 1 个`UINavigationController`（不知道为什么）。

它导致我只能从第一个选项卡推送新 VC 的行为*，*这显然是打包到`UINavigationController`被调用的`navController`：

```
SGTabBarController *tabBarController = [[SGTabBarController alloc] init];

    SGHomeViewController* vc1 = [[SGHomeViewController alloc] init];
    SGChooseOSAgainViewController* vc3 = [[SGChooseOSAgainViewController alloc] init];
    SGSmsServicesViewController* vc4 = [[SGSmsServicesViewController alloc] init];
    SGSupportViewController *vc5 = [[SGSupportViewController alloc] init];
    navController = [[UINavigationController alloc] initWithRootViewController:vc1];

    NSArray* controllers = [NSArray arrayWithObjects:navController, vc3, vc4, vc5, nil];
    tabBarController.viewControllers = controllers;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = tabBarController;
    [navController setNavigationBarHidden:YES animated:NO];
    [self.window makeKeyAndVisible]; 
```

这是为什么？我应该`UINavigationController`为每个选项卡创建一个单独的选项卡吗？我从 Apple 的文档中获取了这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:26:27.373

> 我应该为每个选项卡创建一个单独的 UINavigationController

如果您想在每个选项卡中导航，**是**的，您应该添加嵌入在 navigationController 中的每个 viewController。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:31:07.113

是的你可以。在 yourUITabBarController.m 中尝试类似这样的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray* sectionViewControllers = nil;
    NSArray* controllers = [self controllers];
    UIViewController* controller = nil;

    for (controller in controllers)
    {
        if (sectionViewControllers == nil)
            sectionViewControllers = [NSMutableArray arrayWithCapacity:0];

        UINavigationController* navigationController = [[UINavigationController allocWithZone:[self zone]] initWithRootViewController:controller];

        navigationController.navigationBarHidden = YES;

        [sectionViewControllers addObject:navigationController];
        [navigationController release];
    }

    self.viewControllers = sectionViewControllers;
}

- (NSArray*)controllers
{
    if (!_controllers)
        _controllers = [NSArray arrayWithObjects:[self tabController1], [self tabController2], nil];
    return _controllers;
} 
```

这在你的 AppDelegate.m 中：

```
self.window.rootViewController = self.yourUITabBarController; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:33:54.817

假设你有一个 tabbarController。现在您可以在 tabController 中添加任何 viewController 或任何 NavController。NavController 可以包含 viewController。但是你可能对在哪里使用 navController 或 viewController 感到困惑。您将在不需要导航的地方使用 viewController，我的意思是在您不需要的地方。

这是一个代码示例，其中第一个视图仅包含视图，第二个视图包含导航控制器。您不能在第一个视图中推送新视图，但您可以轻松地在第二个视图中推送新视图。

```
-(void)addTabBarControllers
{
    UIViewController *viewController1, *viewController2;

    viewController1 = [[[HomeView alloc] initWithNibName:@"HomeView" bundle:nil] autorelease];
    viewController2 = [[[FloorPlanHome alloc] initWithNibName:@"FloorPlanHome" bundle:nil] autorelease];

    UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:viewController2];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, nav2, nil];

    [[self.tabBarController.tabBar.items objectAtIndex:0] setTitle:@"First View"];
    [[self.tabBarController.tabBar.items objectAtIndex:1] setTitle:@"Second View"];

    [[self.tabBarController.tabBar.items objectAtIndex:0] setImage:[UIImage imageNamed:@"first.png"]];
    [[self.tabBarController.tabBar.items objectAtIndex:1] setImage:[UIImage imageNamed:@"second.png"]];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
} 
```

从 AppDelegate 中的 didFinishLaunchingWithOptions 调用此方法。这里 HomeView 和 FloorPlanView 是两个不同的视图，需要先添加这些视图和类文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:33:49.427

在这里参考我的回答：
[UITabBarController 问题](https://stackoverflow.com/questions/13286325/uitabbarcontroller-issue/13344646#13344646)

```
if(!self.tabBarController)
    self.tabBarController = [[UITabBarController alloc] init];

self.tabBarController.delegate=self;

NSMutableArray *localcontrollerarray = [[NSMutableArray alloc] initWithCapacity:2];

UIViewController *viewController1 = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];

UINavigationController *navi1 = [[UINavigationController alloc] initWithRootViewController:viewController1];

[localcontrollerarray addObject:navi1];

UIViewController *viewController2 = [[ScanViewController alloc] initWithNibName:@"ScanViewController" bundle:nil];

UINavigationController *navi2 = [[UINavigationController alloc] initWithRootViewController:viewController2];

[localcontrollerarray addObject:navi2];

self.tabBarController.viewControllers = localcontrollerarray;

[self.window addSubview:self.tabBarController.view]; 
```

# php - 助手类：静态或非静态函数

> ID：15227182
> 
> 赞同：4
> 
> 时间：2013-03-05T15:08:04.773
> 
> 标签：php

在创建具有诸如从字符串中去除空格之类的方法的辅助类时，您将方法创建为函数`static`还是非`static`函数？

此外，如果静态方法要调用`do_magic()`类中的另一个函数，该函数应该如何定义为（静态或非静态？）我们必须使用`self::`吗？

```
class Helper {
    public static strip_whitespace() {
        // do some magic
        self::do_magic();

    }

    private do_magic() {
        // magic
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:13:44.240

使它们都成为静态的。静态方法适用于不依赖于正在创建的类的实例的函数，这就是您在这里所做的。

```
class Helper {
    public static strip_whitespace($string) {
        // do some magic
        return self::do_magic();

    }

    private static do_magic() {
        // return magic
    }
}

$result = Helper::strip_whitespace("  I'm a string!  "); 
```

# r - 结合使用 R 中的效果包创建的两个图

> ID：15227184
> 
> 赞同：2
> 
> 时间：2013-03-05T15:08:05.400
> 
> 标签：r, graphics, effects

我有以下问题。运行有序的 logit 模型后，我想用 R 的效果包来可视化结果。这很好用，我对两个独立变量这样做了，然后我尝试将这两个图结合起来。但是，这似乎不起作用。我在这里提供了一个可复制的小例子，这样你就可以自己看到我的问题：

```
library(car)
data(Chile)
mod <- polr(vote ~ age + log(income), data=Chile)

eff <- effect("log(income)", mod)
plot1 <- plot(eff, style="stacked",rug=F, key.args=list(space="right"))

eff2 <- effect("age", mod)
plot2 <- plot(eff2, style="stacked",rug=F, key.args=list(space="right")) 
```

我现在可以独立打印这两个图，但是当我尝试将它们一起绘制时，第一个图被覆盖。我试过设置`par(mfrow=c(2,1))`，没有用。接下来我尝试了以下方法：

```
print(plot1, position=c(0, .5, 1, 1), more=T)
print(plot2, position=c(0,0, 1, .5)) 
```

在后一种情况下，两个图的位置很好，但是一旦我添加第二个图（或者更好，它被覆盖），第一个图仍然消失。任何如何防止这种行为的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:28:06.133

阅读长长的论据列表，`?print.eff`我们看到有一些论据可以做到这一点：

```
plot(eff, style="stacked",rug=F, key.args=list(space="right"),
     row = 1,col = 1,nrow = 1,ncol = 2,more = TRUE)
plot(eff2, style="stacked",rug=F, key.args=list(space="right"),
     row = 1,col = 2,nrow = 1,ncol = 2) 
```

`par()`不起作用的原因是因为这个包使用的是基于**网格系统的****点阵**图形，与基础图形不兼容。既不会也不会对网格图形产生任何影响。**`par()``layout`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:34:15.177

这似乎有效：

```
plot(eff,col=1,row=2,ncol=1,nrow=2,style="stacked",rug=F,
  key.args=list(space="right"),more=T)
plot(eff2,col=1,row=1,ncol=1,nrow=2,style="stacked",rug=F, 
  key.args=list(space="right")) 
```

编辑：太晚了...**

# facebook - Facebook Open Graph：如何使用自定义操作发布用户消息

> ID：15227185
> 
> 赞同：0
> 
> 时间：2013-03-05T15:08:07.397
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

Facebook 教程建议您可以将用户评论添加到 Facebook 应用程序中的自定义操作。用于发布的示例 javascript 函数是：

```
<script type="text/javascript">
  function postCook()
  {
      FB.api(
    '/me/[YOUR_APP_NAMESPACE]:cook',
    'post',
    { recipe: 'http://fbwerks.com:8000/zhen/cookie.html' },
    function(response) {
       if (!response || response.error) {
          alert('Error occurred');
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    });
  }
  </script> 
```

我有一个用“本地企业”对象定义的“认可”动作。一切正常。现在我想为用户提供将用户消息添加到他们的背书的选项，但我在 Facebook 文档中找不到有关如何在 api 中实现此功能的任何帮助（上面的代码）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:03:44.200

您需要在发布操作时指定“消息”参数。例如，

```
<script type="text/javascript">
  function postCook(userMessage)
  {
    FB.api(
    '/me/[YOUR_APP_NAMESPACE]:cook',
    'post',
    { recipe: 'http://fbwerks.com:8000/zhen/cookie.html',
      message: userMessage },
    function(response) {
       if (!response || response.error) {
          alert('Error occurred');
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    });
  }
</script> 
```

将 userMessage 作为用户提供的有关操作的消息提交。

此处提供了 OpenGraph 发布 API 支持的参数的完整列表：[https ://developers.facebook.com/docs/technical-guides/opengraph/publish-action/#create](https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/#create)

# iphone - 从 XML 数组加载时 UITableView 为空

> ID：15227186
> 
> 赞同：0
> 
> 时间：2013-03-05T15:08:07.453
> 
> 标签：iphone, objective-c, xcode4.5

填充数组后，我的 UITableView 为空。但是，如果我单击后退按钮并返回填充状态。

如果我加载

`xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://google.com?xml.php?"];`

进入`ViewDidLoad`然后它很好，但解析需要几秒钟。

所以我将该行添加到：

```
- (void)viewDidAppear:(BOOL)animated {

    if ([[xmlParser branch] count] == 0) {
         xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://google.com?xml.php?"];

     }
} 
```

原因是因为我希望 XML 在`MapView`首先加载时进行解析。

我的 mainViewController 设置为同时具有`MapView`和`UITableView`；两者都设置为代表。

在我的 ParserXML.m（xml 有自己的 NSobject 文件）文件中，我重新加载了表

```
- (void)parserDidEndDocument:(NSXMLParser *)parser {

    NSLog(@"all done!");
    NSLog(@"stories array has %d items", [_branch count]);

    tableViews = [Maplocator alloc];

    [tableViews.tableView reloadData];

} 
```

我的注释已填写，`MapView`但不是我的`UITableView`，但如果我单击返回然后再次单击地图，则已填写。（但需要几秒钟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:14:22.457

**检查事项**

*   第一次加载时用于tableview数据源的数组中有值吗？
*   Tableview 数据源和委托方法在 IBOutlets 中正确实现或连接？

如果数组为空，则问题出在第一次加载时解析器

在单独的线程中进行调用以避免 UI 阻塞，并在解析完成时在 UI 中包含一个活动，并且数组调用中存在数据以进行 Reload

# android - MenuItem 自定义视图，带有 showAsAction=never

> ID：15227198
> 
> 赞同：3
> 
> 时间：2013-03-05T15:08:35.160
> 
> 标签：android, android-layout, actionbarsherlock

我正在尝试使用我自己的布局 ( `R.layout.update_button`) 作为操作栏菜单项视图。

项目声明如下：

```
<item
    android:id="@+id/menu_update"
    android:checkable="true"
    android:showAsAction="never"
    android:title="Title"/> 
```

使用以下代码`onCreateOptionsMenu(Menu menu)`：

```
View updateView = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE))
            .inflate(R.layout.update_button, null);
update.setActionView(updateView); 
```

问题是 tihi 仅在`android:showAsAction`设置为时才有效`always`。但是，当它设置为 时`never`，我只看到菜单标题（“标题”）而没有我的任何自定义布局。

有没有办法在什么时候显示自定义布局`showAsAction="never"`？

# jquery - 带有地理标记点的 HTML5 地图

> ID：15227199
> 
> 赞同：0
> 
> 时间：2013-03-05T15:08:35.570
> 
> 标签：jquery, html, sencha-touch, mapping, kendo-ui

我正在寻找一个基于 HTML5 的工具，我可以使用它在屏幕上显示可以缩放、平移等的地图（谷歌地图），在这张地图上，我想在按下按钮时在特定位置显示一个圆圈网页？

是否会推荐任何与 HTML5 兼容的框架？或者你会推荐 JQuery 吗？我知道我可以用 JQuery 做到这一点并自己编写一些脚本。我知道谷歌有一个 API，我也可以用它来做这件事。

我想知道的是，是否有任何框架可以以更优雅的方式简化这一点？建议？

最好，我正在寻找与桌面浏览器和 iPad 的兼容性。如果只有最新的浏览器支持桌面浏览器，那也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:29:32.557

您需要指定其是否商业化（Google Maps 对非公众开放不是免费的）。

我建议您查看诺基亚的解决方案 ( [http://developer.here.com/](http://developer.here.com/) )，它对移动和桌面具有出色的支持，以及非常宽松的许可证（如果您给他们发电子邮件，他们会告诉您可以将 Base 计划用于商业，即使他们的网站另有说明）。他们有很好的文档——画那个圆圈很简单，而且通常很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:24:18.223

如果您需要一个简单的解决方案，您可以考虑 iMap 的[HTML5 地图生成器软件](http://www.imapbuilder.com/html5-mapping/)，它可以让您使用他们预先构建的 HTML5 地图模板快速创建 HTML5 地图。

他们已经拥有适用于所有大陆和主要国家（例如美国、加拿大、英国等）的模板。该软件提供了用于添加图钉、鼠标悬停语音框以及设置州/县的缩放和颜色等工具。该地图适用于所有设备，包括 PC、Mac、iPhone、iPad、Android 手机等

如果您需要街道级别的地图，那么它将无法工作，因为 HTML5 地图仅显示地图边界线。然后，您可以考虑使用 Google 地图编辑器。

# iphone - 对象-c中的SQL“分组依据”算法？

> ID：15227200
> 
> 赞同：1
> 
> 时间：2013-03-05T15:08:36.987
> 
> 标签：iphone, objective-c, cocoa

我有标题数组，作者。

```
------------------------
title      author
------------------------
A        a   
B        a
C        b
D        c
E        c
F        d
G        d
------------------------ 
```

如果我选择 * 按作者分组

```
-----------------
a        A, B
b        C
c        D, E
d        F,G 
```

如何通过 object-C 实现 SQL 的“GROUP BY”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:02:13.567

创建班级书籍

```
@interface Book : NSObject
@property(strong)NSString *title;
@property(strong)NSString *author;
@end 
```

现在实现为：

//创建对象，标题和作者

```
Book *b1=[Book new];
[b1 setTitle:@"A"];[b1 setAuthor:@"a"];

Book *b2=[Book new];
[b2 setTitle:@"B"];[b2 setAuthor:@"a"];

Book *b3=[Book new];
[b3 setTitle:@"C"];[b3 setAuthor:@"b"];

Book *b4=[Book new];
[b4 setTitle:@"D"];[b4 setAuthor:@"c"];

Book *b5=[Book new];
[b5 setTitle:@"E"];[b5 setAuthor:@"c"];

Book *b6=[Book new];
[b6 setTitle:@"F"];[b6 setAuthor:@"d"];

Book *b7=[Book new];
[b7 setTitle:@"G"];[b7 setAuthor:@"d"];

NSArray *books=@[b1,b2,b3,b4,b5,b6,b7];

//your manipulation starts here
NSMutableArray *groupByAuthors=[NSMutableArray new];
for (Book *book in books) {
    if (![groupByAuthors containsObject:book.author]) {
        [groupByAuthors addObject:book.author];
    }
}

for (NSString *author in groupByAuthors) {
    NSMutableArray *titles=[NSMutableArray new];
    for (Book *book in books) {
        if ([book.author isEqualToString:author]) {
            [titles addObject:book.title];
        }
    }
    NSLog(@"Author: %@, Books: %@",author,titles);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:18:53.350

这是一个简单的算法来做你所要求的，并且只在你的数据集中循环一次。

```
int main (int argc, const char * argv[])
{
    @autoreleasepool {

        NSArray *booksAndTitles = @[
            @[@"Book A1", @"Author A"],
            @[@"Book B" , @"Author B"],
            @[@"Book C" , @"Author C"],
            @[@"Book A2", @"Author A"],
            @[@"Book A3", @"Author A"],
            @[@"Book C" , @"Author C"],
            @[@"Book B" , @"Author B"]
        ];

        NSMutableDictionary *titlesByAuthor = [NSMutableDictionary dictionary];

        for (NSArray *pair in booksAndTitles) {

            NSString *title  = pair[0];
            NSString *author = pair[1];

            NSMutableArray *titles = titlesByAuthor[author];
            if (titles == nil) {
                titles = [NSMutableArray array];
                titlesByAuthor[author] = titles;
            }

            [titles addObject:title];
        }

        NSLog(@"%@",titlesByAuthor);
    }
    return 0;
} 
```

输出如下：

```
 {
    "Author A" =     (
        "Book A1",
        "Book A2",
        "Book A3"
    );
    "Author B" =     (
        "Book B",
        "Book B"
    );
    "Author C" =     (
        "Book C",
        "Book C"
    );
} 
```

# c# - 在 C# 中反序列化动态命名的 JSON 对象（使用 JSON.Net 或其他方式）

> ID：15227208
> 
> 赞同：6
> 
> 时间：2013-03-05T15:09:02.807
> 
> 标签：c#, .net, json, serialization, json.net

我有以下 JSON：

```
{
"aaaa": {
    "name": "General Name",
    "product": "book",
    "host": "book.example.com",
    "chapters": {
        "bbbb": {
            "name": "Chapter 1",
            "page": "1",
            "end_page": "25"
        }
    },
    "categories" : {
        "analysis":{
            "Abbbb" : {
                    "name": "B Chapter",
                    "id" : "9001"
            },
            "Acccc" : {
                    "name": "C Chapter",
                    "id" : "9001"
            },
            "Adddd" : {
                    "name": "D Chapter",
                    "id" : "9001"
            },
            "Aeeee" : {
                    "name": "E Chapter",
                    "id" : "9001"
            },
            "Affff" : {
                    "name": "F Chapter",
                    "id" : "9001"
            },
            "Agggg" : {
                    "name": "G Chapter",
                    "id" : "9001"
            }
        },
        "sources":{
            "acks" : {
                    "name": "S. Spielberg",
                    "id" : "9001"
            }
        }
    }
}
"yyyy": {
    "name": "Y General Name",
    "product": "Y book",
    "host": "ybook.example.com",
    ...
}
"zzzz": {
    "name": "Z General Name",
    "product": "Z book",
    "host": "zbook.example.com",
    ...
} 
```

`aaaa`、`yyyy`和的值`zzzz`可以是任何字符串，并且可以有任意数量。

我需要提取所有的`[aaaa|yyyy|zzz].categories.analysis`值。也就是说，我需要以`Dictionary<string, string>`对象**名称**（例如`Abbbb`、`Acccc`等）和 ID 结尾，忽略`name`字符串。

例如，[Abbbb, 9001] [Acccc, 9001] [Adddd, 9001] ... [Zaaaa, 9001]

我在这方面已经太久了，感觉好像我错过了一些明显的东西。我已经尝试过 JSON.net 和本机序列化。在我使用过的所有其他语言中，这都是一项微不足道的任务。

我已经接近了这样的事情：

```
var ajsonObject = JsonConvert.DeserializeObject<dynamic>(jsonString);
var oasearch_categories = ajsonObject.aaaa.categories.analysis; 
```

但同样，`aaaa`可以是任何字符串，所以我不确定如何动态引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:01:51.230

花了一段时间，但我想通了。我的要求与最初的问题略有不同......我的最终结果需要一个列表字典，所以我最终会得到一个字典，如：

```
DICT[ {"9001", ["Abbbb", "Acccc", "Adddd", ...]}, {"9002", ["Zbbbb, Zdddd", ...]}, etc. ]
      | key |  |          value               |   | key |  |       value       | 
```

这是结果：

```
Dictionary<string, List<string>> idsAndTheirNames = new Dictionary<string, List<string>>();

try
{
    var ajsonObject = JsonConvert.DeserializeObject<dynamic>(JSONstring);

    foreach (var child in ajsonObject.Children())
    {
        foreach (var product in child.Children())
        {
            var categories = product.categories.analysis;

            foreach (var category in categories.Children())
            {
                foreach (var subcat in category)
                {
                    List<string> name = idsAndTheirNames[(string)subcat.id]; //e.g., "9001"

                    if (name == null) name = new List<string>();

                    name.Add(category.Name); //e.g., "Abbbb"
                    idsAndTheirNames[(string)subcat.id] = name; //"9001" -> ["Abbbb", "Acccc", etc.]

                    System.Diagnostics.Debug.WriteLine((string)category.Name);  //"Abbbb"
                    System.Diagnostics.Debug.WriteLine((string)subcat.name);    //"Chapter B"
                    System.Diagnostics.Debug.WriteLine((string)subcat.id);      //"9001"
                }
            }
        }
    }
}
catch (Exception ex)
{
    System.Diagnostics.Debug.WriteLine("JSON ERROR: " + ex.Message);
} 
```

# sql - 在单个表上为不同的查询添加多个索引

> ID：15227209
> 
> 赞同：3
> 
> 时间：2013-03-05T15:09:05.087
> 
> 标签：sql, query-optimization

我有一个表，它将运行 3 个不同的查询。

*   第一个查询有一个 where 子句，它使用两个列
*   后三列
*   第三四列

如果我通过 Estimated Execution Plan 运行每个查询，并且 SQL Server Management Studio 建议为每个查询添加一个新的不同索引。

我很高兴添加三个不同的索引以获得最佳性能。该表永远不会更新，也很少插入。

但是，将多个索引添加到同一个表中以适应不同的查询是否是个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:15:26.470

如果您对查询足够了解，请添加索引。

当您修改数据（插入/更新/删除）时，索引主要会增加开销。它们还会占用页面缓存中的内存，从而产生一些额外的开销。这有两种方式。有时索引本身可以完全取代表。有时两者都需要，具体取决于查询和索引。

如果数据没有变化，则几乎没有负面影响，并且有很大的潜在上行空间。因为 SQL Server 推荐使用索引，所以您可以确信它们会被使用并且应该会提高查询的性能。

# android - 即使使用adjustPan，软键盘也会覆盖所有窗口

> ID：15227210
> 
> 赞同：1
> 
> 时间：2013-03-05T15:09:06.690
> 
> 标签：android, android-softkeyboard, searchview

我的 SearchActivity 有问题。它有一个使用 ActionBarSherlock 制作的 SearchView。当我在横向单击眼镜时，我有软键盘来覆盖所有屏幕。但是使用 adjustPan 参数我希望看到 SearchView。

```
 <activity
        android:name=".SearchActivity"
        android:label="@string/title_activity_search"
        android:theme="@style/ActionBarCompat" 
         android:windowSoftInputMode="adjustPan"
        >
     </activity> 
```

你知道我在打字时怎么能看到 SearchView 吗？或者，也许我根本不明白 adjustPan 应该做什么。

谢谢

# c# - 如何改进控制台应用程序入口点

> ID：15227215
> 
> 赞同：0
> 
> 时间：2013-03-05T15:09:21.430
> 
> 标签：c#, console-application, main, nlog

我一直在审查和重构一位同事的代码，用于开发执行一组作业的控制台应用程序。我想就如何改进系统的入口点提出意见，感觉它可能会更健壮一些。我们使用 NLog 进行日志记录，它被配置为自动显示在控制台和日志文件上。同样，我必须`catch (Exception ex)`尝试干净地处理并记录任何漏掉的异常——理论上它不应该被击中，但最好尽可能干净地处理这些事情。

我`{0}:`对每次`_logger.Info()`调用开始时的日志记录风格特别不满意，但如果像这样重构为自己的函数`LogMe(methodName, "text to be logged")`，我并没有真正节省那么多打字。请记住，我故意省略了使线程保持活动状态的代码等。这超出了我正在寻找的范围。

是否可以改进以下内容，或者这是否可以在没有大量努力/重构的情况下合理地“好”？

```
static void Main(string[] args)
{
    string methodName = string.Format("{0}.Main()", typeof(Program).FullName);
    try
    {
        _logger.Info("{0}: Launched", methodName);
        IKernel kernel = IOC.SetupKernel();

        _logger.Info("{0}: Reading job schedules from the configuration file");
        JobScheduleSection scheduleSection = (JobScheduleSection)ConfigurationManager.GetSection("jobScheduleSection");
        if (scheduleSection == null)
        {
            _logger.Warn("{0}: No job schedule section found in configuration file", methodName);
            return;
        }

        List<IJobSchedule> schedules = scheduleSection.JobSchedules.ToList();
        if (schedules == null)
        {
            _logger.Info("{0}: No job schedules found", methodName);
            return;
        }
        _logger.Info("{0}: Found {1} job schedules", methodName, schedules.Count);

        _logger.Info("{0}: Kicking Launcher...", methodName);
        Launcher launcher = new Launcher(kernel, schedules);
        launcher.LaunchSchedulerService();
    }
    catch (Exception ex)
    {
        _logger.ErrorException(string.Format("{0}: An unhandled exception occurred", methodName), ex);
    }
    finally
    {
        _logger.Info("{0}: Exited. Program complete.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:26:23.307

我这样做的方法是为 NLog 创建一个包装类，它将包装每个日志方法，并混淆 methodName 并使用 StackTrace 对象来获取方法名称。那你就不用每次都写了；调用 Logging 包装器方法的方法的方法名称是自动注入的。

它会看起来更干净，因为您不会到处都有 {0} 和 methodName。

您甚至可以更进一步，创建一个日志包装类，该类接受日志字符串和一个动作，执行该动作，并使用 StackTrace 对象一次性调用日志对象。

我已经使用它来执行时间操作并记录它们，一次调用即可完成所有操作并节省重复代码。我的方法 ExecuteTimedAction(string logString, Action actionToExecute) 使用秒表，记录开始字符串，启动秒表，执行方法（Action 委托），停止秒表，并再次记录两个日志，其中包含时间戳、程序集名称，以及发起调用的方法的名称。

获取方法的代码很简单，使用StackTrace对象，获取上一次调用的StackFrame。

```
 var stackTrace = new StackTrace();
        var callingMethodName = stackTrace.GetFrame(2).GetMethod().Name; 
```

注意我上面有 2 个硬编码，但那是因为额外的包装器调用；如果您直接调用，那么您可能需要 GetFrame(1)。最好的方法是使用即时窗口并尝试不同的帧，或者使用 StackTrace 对象的 GetFrames() 方法循环浏览它以查看您得到的内容。

我现在正在考虑保留字符串格式的参数并为日志包装器附加第一个参数。可以这样做：

```
public static class LogWrapper
{
    private static Logger _logger // where Logger assumes that is the actual NLog logger, not sure if it is the right name but this is for example

    public static void Info(string logString, object[] params)
    {
        // Just prepend the method name and then pass the string and the params to the NLog object
        _logger.Info(
            string.Concat(
                GetMethodName(),
                ": ",
                logString
            ),
            params
        );
    }

    public static void Warn(string logString, object[] params)
    {
        // _logger.Warn(
        //  You get the point ;)
        // )
    }

    private static string GetMethodName()
    {
        var stackTrace = new StackTrace(); // Make sure to add using System.Diagnostics at the top of the file
        var callingMethodName = stackTrace.GetFrame(2).GetMethod().Name; // Possibly a different frame may have the correct method, might not be 2, might be 1, etc.
    }
} 
```

然后在您的调用代码中，_logger 成员变为 LoggerWrapper，而不是 Logger，并且您以完全相同的方式调用它，但您从代码中删除了 {0}。您需要检查空值，也许如果没有其他参数，则有一个方法重载，只在没有参数的情况下调用；我不确定 NLog 是否支持，所以你必须检查一下。

... 编辑：

只是为了兴趣点，我在可能被一堆程序集引用的公共库类型程序集中使用这种类型的代码，因此我可以获得调用程序集、方法名称等信息，而无需对其进行硬编码或担心它在我的日志记录代码中。它还确保使用该代码的其他任何人都不必担心它。他们只需调用 Log() 或 Warn() 或其他任何方法，程序集就会自动保存在日志中。

这是一个例子（我知道你说对你来说太过分了，但如果你可能需要这样的东西的话，可以为未来思考）。在此示例中，我只记录程序集，而不是方法名称，但它可以轻松组合。

```
 #region :           Execute Timed Action                        :

    public static T ExecuteTimedAction<T>(string actionText, Func<T> executeFunc)
    {
        return ExecuteTimedAction<T>(actionText, executeFunc, null);
    }

    /// <summary>
    /// Generic method for performing an operation and tracking the time it takes to complete (returns a value)
    /// </summary>
    /// <typeparam name="T">Generic parameter which can be any Type</typeparam>
    /// <param name="actionText">Title for the log entry</param>
    /// <param name="func">The action (delegate method) to execute</param>
    /// <returns>The generic Type returned from the operation's execution</returns>

    public static T ExecuteTimedAction<T>(string actionText, Func<T> executeFunc, Action<string> logAction)
    {
        string beginText = string.Format("Begin Execute Timed Action: {0}", actionText);

        if (null != logAction)
        {
            logAction(beginText);
        }
        else
        {
            LogUtil.Log(beginText);
        }

        Stopwatch stopWatch = Stopwatch.StartNew();
        T t = executeFunc(); // Execute the action
        stopWatch.Stop();

        string endText = string.Format("End Execute Timed Action: {0}", actionText);
        string durationText = string.Format("Total Execution Time (for {0}): {1}", actionText, stopWatch.Elapsed);

        if (null != logAction)
        {
            logAction(endText);
            logAction(durationText);                
        }
        else
        {
            LogUtil.Log(endText);
            LogUtil.Log(durationText);
        }

        return t;
    }

    public static void ExecuteTimedAction(string actionText, Action executeAction)
    {
        bool executed = ExecuteTimedAction<bool>(actionText, () => { executeAction(); return true; }, null);
    }

    /// <summary>
    /// Method for performing an operation and tracking the time it takes to complete (does not return a value)
    /// </summary>
    /// <param name="actionText">Title for the log entry</param>
    /// <param name="action">The action (delegate void) to execute</param>

    public static void ExecuteTimedAction(string actionText, Action executeAction, Action<string> logAction)
    {
        bool executed = ExecuteTimedAction<bool>(actionText, () => { executeAction(); return true; }, logAction);
    }

    #endregion 
```

然后日志函数看起来像这样，你可以看到我的日志函数没有硬编码到 ExecuteTimedAction 中，所以我可以将任何日志操作传递给它。

在日志类中，我将条目程序集名称保存在一个静态变量中，并将其用于所有日志......

```
private static readonly string _entryAssemblyName = Assembly.GetEntryAssembly().GetName().Name; 
```

希望这能让您在重构方面有足够的思考空间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T22:00:57.453

我不是特别喜欢这种包装 NLog 的方式。GetMethodName 没有理由。NLog 能够自动提供方法名和类名（通过正确配置 Layout）。在包装 NLog（或 log4net）时，关键是根据 NLog.Logger.Log 实现日志记录方法（Info、Trace、Debug）。Log 的参数之一是记录器的类型（即 NLog 包装器的类型）。当 NLog 想要写出方法名时，它会简单地向上遍历堆栈跟踪，直到找到该类型。这将是“记录器”和应用程序之间的边界。堆栈跟踪再上一步，您可以从中获取调用站点的堆栈。NLog 可以记录方法名和类名。

此外，静态 NLog 包装器的问题是您失去了拥有记录器名称的能力。通常，检索记录器的模式是在您可能想要记录的每个类中都有这样的代码：

```
public class MyClassFromWhichIWantToLog
{
  private static readonly Logger _logger = LogManager.GetCurrentClassLogger();

  public void DoSomething()
  {
    _logger.Info("Hello!");
  }
} 
```

LogManager.GetCurrentClassLogger 返回一个 Logger 实例，其“name”是类的完全限定类名。因为我们使用静态类变量来保存记录器，所以每种类型都有一个记录器实例（即 MyClassFromWhichIWantToLog 的所有实例将共享同一个记录器实例）。因为记录器以其类命名，所以您可以更好地控制日志输出的生成方式。您可以配置 NLog（通过 NLog.config），以便所有记录器始终记录。或者您可以将其配置为仅记录某些记录器（或某些记录器在一个级别记录，而其他记录器在不同级别记录）。假设您有一个包含各种组件的程序。它们似乎都工作正常，但您必须实现一个新组件。在开发过程中，您可能希望将其日志记录方式调高（即获取更多信息），同时将程序的其他部分调低（即从您的程序运行正常的部分获取最少的信息）。此外，您可以通过记录器名称重定向您的日志记录（例如，将来自某个类或命名空间的所有日志记录消息发送到某个日志记录目标（如果您正在调试程序的那一部分，则可能是调试器目标）并发送其他（包括那些将调试器）到您的输出文件或数据库）。如果你有一个静态记录器包装器，你就失去了在每个类或每个命名空间的基础上控制你的日志记录的能力。您可以通过记录器名称重定向您的日志记录（例如，将来自某个类或命名空间的所有日志记录消息发送到某个日志记录目标（如果您正在调试程序的那部分，则可能是调试器目标）并发送其他（包括那些去调试器的） ) 到您的输出文件或数据库)。如果你有一个静态记录器包装器，你就失去了在每个类或每个命名空间的基础上控制你的日志记录的能力。您可以通过记录器名称重定向您的日志记录（例如，将来自某个类或命名空间的所有日志记录消息发送到某个日志记录目标（如果您正在调试程序的那部分，则可能是调试器目标）并发送其他（包括那些去调试器的） ) 到您的输出文件或数据库)。如果你有一个静态记录器包装器，你就失去了在每个类或每个命名空间的基础上控制你的日志记录的能力。

看看我对这个问题的回答：

[包装 NLog 时如何保留调用点信息](https://stackoverflow.com/questions/7412156/how-to-retain-callsite-information-when-wrapping-nlog)

我的回答提供了维护正确呼叫站点信息的 NLog 包装器的源代码（直接来自 NLog 的源存储库）。请注意，来自 NLog 的示例更多的是说明如何扩展 NLog.Logger（通过添加“EventID”）而不是包装它。如果您忽略 EventID 的内容，您将看到关键是将包装器的类型传递给 NLog 的 Logger.Log 方法。

这是一个非常精简的 NLog 包装器（只有一个方法 (Info)），它应该正确地包装 NLog，以便保留调用站点信息。

```
 public class MyLogger
  {
    public MyLogger(Logger logger)
    {
      _logger = logger;
    }

    private Logger _logger;
    private void WriteMessage(LogLevel level, string message)
    {
      //
      // Build LogEvent here...
      //
      LogEventInfo logEvent = new LogEventInfo(logLevel, context.Name, message);
      logEvent.Exception = exception;

      //
      // Pass the type of your wrapper class here...
      //
      _logger.Log(typeof(MyLogger), logEvent);
    }

    public void Info(string message)
    {
      WriteMessage(LogLevel.Info, message);
    }
  } 
```

你会像这样使用它：

```
public class MyClassWhereIWantToUseLogging
{
  private static readonly _logger = new MyLogger(LogManager.GetCurrentClassLogger());

  public void DoSomething()
  {
    _logger.Info("Hello!"); //If you log call site info, you should class name and method name.
  }
} 
```

有关更多 NLog 信息，请参阅这个流行的（如果我自己这么说的话 ;-)）NLog 帖子：

[最有用的 NLog 配置](https://stackoverflow.com/questions/4091606/most-useful-nlog-configurations)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:38:58.853

**更新**

我找到了一个更简洁的解决方案，而不是尝试扩展 NLog 类或以其他方式创建方法/方法重载。NLog 支持将以下字段添加到`NLog.config`与您的应用程序一起部署的文件中；

```
layout="${callsite}" 
```

这可以应用于适合您的任何目标，CSV、控制台、电子邮件等。在 CSV 中，配置如下；

```
<target name="CSVFile" xsi:type="File"  fileName="${basedir}/Logging/BullorBear.Identity.API-${date:format=yyyy-MM-dd}.csv" 
        archiveEvery="Day" maxArchiveFiles="28">
  <layout xsi:type="CSVLayout">
    <column name="Index" layout="${counter}" />
    <column name="Time" layout="${longdate}" />
    <column name="Callsite" layout="${callsite}" />
    <column name="Severity" layout="${level:uppercase=true}" />
    <column name="Detail" layout="${message}" />
    <column name="Exception" layout="${exception:format=ToString}" />
  </layout>
</target> 
```

输出;

```
Index,Time,Callsite,Severity,Detail,Exception
1,2013-03-12 12:35:07.6890,ProjectName.Controllers.SomeController.SomeMethod,INFO,Authenticating..., 
```

# php - PHP执行可能是异步的？

> ID：15227218
> 
> 赞同：0
> 
> 时间：2013-03-05T15:09:33.973
> 
> 标签：php

我在画布和图像上使用 JS 做了一点尝试。它的最后一部分调用一个页面，一开始我尝试在服务器上写入最终图像。

该过程假设以前的文件存在，但不完整：

```
<?php
$filename = explode(".", $_POST["trans_file"]); // name of the image file
if (!unlink("transit/" . $_POST["trans_file"])) echo "File " . $_POST["trans_file"] . "not found!<br />";       // remove the partial file
$filesave = $filename[0] . ".png";              // I will save a PNG file
$filejpg = $filename[0] . ".jpg";               // but I will transform it into JPG
$data = $_POST["base64img_data"];               // here I receive the base64 image by a previous process
$data = explode(";", $data);                    // I remove the first part of it
$data = explode(",", $data[1]);                 // $data[1] now contains the base64 image complete
$image=base64_decode(chunk_split($data[1]));    // $image is now a PNG file
$handle = fopen("transit/$filesave", "wb");     // Create a PNG file
fwrite($handle, $image);                        // write it
fclose($handle);                                // Close, and transform it into JPG
    png2jpg("transit/$filesave", "transit/$filejpg", 100);
    unlink("transit/$filesave");                // remove PNG image 
```

我把它放在页面的开头，但浏览器总是显示前一个文件，一个在开头取消的文件，它本身就是一个 JPG。

很奇怪（对我来说）这个序列在一台服务器上运行良好，而不是在另一台服务器上运行！

我想这可能是页面内PHP和JS异步执行的情况。

如何同步服务器和浏览器？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:13:31.070

如果一个进程写入文件并在操作过程中另一个进程删除它会发生什么？

使用`.lock`文件，因此只有 1 个进程尝试操作有问题的文件。

# jquery - 使用 JavaScript 将表单提交到两个不同的位置，然后使用 jQuery 进行验证

> ID：15227222
> 
> 赞同：0
> 
> 时间：2013-03-05T15:09:39.003
> 
> 标签：jquery, jquery-validate

我有一个名为 的表格`#summaryforms`，用户可以现在预订或稍后预订。

这是我的按钮：

```
<div class="bookingbuttondiv">
   <input type="hidden" name="bookingid" value="<?php echo $bookingid; ?>" />
   <input type="button" class="button" value="Book Now" onClick="this.form.action='payment.php';this.form.submit()">
   <input type="button" class="button" value="Book Later" onClick="this.form.action='poa.php';this.form.submit()"><br/><br/>
</div> 
```

但是，每当我尝试使用 jQuery Validation 时，例如：

```
$("#summaryforms").validate(); 
```

它不起作用，我没有收到任何错误，我怀疑这是因为它在调用 jQuery 之前提交，有没有办法解决这个问题，同时仍然保持提交到两个不同位置的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:06:36.217

从元素中删除内联`onClick`处理程序。`button`您正在使用 jQuery，它消除了对内联 JavaScript 的任何需求。其次，由于 jQuery Validate 插件已经内置了`submit`事件处理程序，因此您需要将按钮*放在外部*并单独`<form></form>`捕获它们的`click`事件。

我删除了内联`onclick`处理程序并添加了`id`属性。我还`input`用`/>`.

**HTML**：

```
<form id="summaryforms">
    ...
</form>

<div class="bookingbuttondiv">
   <input type="hidden" name="bookingid" value="<?php echo $bookingid; ?>" />
   <input type="button" class="button" value="Book Now" id="now" />
   <input type="button" class="button" value="Book Later" id="later" />
</div> 
```

**jQuery** :

```
$(document).ready(function() {

    $('.button').each(function () {
        $(this).on('click', function () {
            var action;
            if ($(this).attr('id') == "now") {
                action = 'payment.php';
            } else {
                action = 'poa.php';
            }
            $('#summaryforms').attr('action', action).submit();
        });
    });

    $('#summaryforms').validate({ // initialize the plugin
        // any options and/or rules
    });

}); 
```

**演示：http: [//jsfiddle.net/a9zAh/](http://jsfiddle.net/a9zAh/)**

* * *

**编辑**：

**引用操作**：

> “......我怀疑这是因为它在调用 jQuery 之前提交......”

它不应该。调用 a`submit()`应该只触发验证，因为插件有一个`submit`内置的事件监听器。您的代码中可能还有另一个问题，您没有在 OP 中向我们展示。您定义规则的方式可能存在问题。另外，你`id`是`summaryforms`；为什么是复数？ `id`的应该是唯一的，如果您在共享一个的页面上有多个`form`或任何元素，`id="summaryforms"`则会导致问题。

按照我上面的工作代码和 jsFiddle 演示作为您的模型，如果遇到困难，请提出问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T15:17:17.100

绝对地。您想“捕获”正常提交，防止它发生，然后进行验证。

要阻止表单提交，请确保它有一个 ID（看起来像你这样做），并使用如下内容：

```
// on DOM load...
jQuery(function () { 
    // attach a handler to the SUBMIT of your form
    jQuery('#summaryforms').submit( function () {
       // do validation or whatever, and if it passes, return true
       // to submit
       if (myFormIsValid) {
           return true;
       }
       // otherwise, prevent it from submitting "normally"
       return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T15:39:45.557

问题是结合了 javascript 和 jQuery。一般来说，javascript 优先于 jQuery。如果这样做，某些浏览器（如 IE）会产生意想不到的结果。并尝试如下，

**编辑脚本：**

在 jQuery 中，

```
 $(document).ready(function(){

    $("#summaryforms").validate();

   $("#summaryforms input.button").click(function(e){
     var action = '';
     if($(e.target).val() === 'Book Now'){
       action = 'payment.php';
     }else if($(e.target).val() === 'Book Later'){
       action = 'poa.php';
     }
     $("#summaryforms").attr('action', action);
     $("#summaryforms").submit();
   })

  }); 
```

在 HTML 中，

```
<div class="bookingbuttondiv">
   <input type="hidden" name="bookingid" value="<?php echo $bookingid; ?>" />
   <input name="booknw" type="button" class="button" value="Book Now" >
   <input name="booklater" type="button" class="button" value="Book Later" ><br/><br/>
</div> 
```

# android - 如何管理删除 CursorAdapter 上的项目

> ID：15227225
> 
> 赞同：5
> 
> 时间：2013-03-05T15:09:43.713
> 
> 标签：android, android-cursoradapter

我目前面临一个愚蠢的问题。我有一个带有自定义适配器（扩展 CursorAdapter）的列表视图。

它显示一个带有不同按钮的自定义视图（分享、点赞、删除）。对于删除按钮，它有一个警告对话框来确认删除该项目。当用户确认时，该项目将从数据库中删除。直到这里一切正常。

我的问题是，如何使用新数据集有效地更新列表视图？

非常感谢你的帮助。

代码：

```
public class CommentCursorAdapter extends CursorAdapter{
    (...)
    @Override
    public void bindView(View view, Context arg1, Cursor cursor) {
    (...)
        holder.list_item_comment_discard_btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            final String _id = v.getTag().toString();
            AlertDialog.Builder builder = new    AlertDialog.Builder(mActivity);
            builder.setTitle("Delete");
            builder.setMessage("Do you want to delete "+_id);
            builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // User clicked OK button
                    DBAdapter dba = new DBAdapter(mActivity);
                    dba.open();
                    dba.remove(_id);
                    Log.i("TAAG", "removed: "+_id);
                    dba.close();    

                // How to update the listview ??                                    
                }
            });
            builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // User cancelled the dialog
                }
            });

            AlertDialog d = builder.create();
            d.show();
        }
        });
        holder.list_item_comment_discard_btn.setTag(_id);
        (...)
    }
    (...)
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T04:49:42.590

如果您使用 LoaderManager 来管理光标的生命周期（这是正确的方法），您只需要调用 restartLoader 然后（重新）在 onLoadFinished 中设置适配器的光标。您的列表视图将重新加载更新的数据。

Activity 或 Fragment 中游标的管理应该以非常简单直接的方式完成：

*   为了初始化你的光标：

    ```
    public void onCreate(Bundle savedInstanceState) { // or onStart
    // ...
    this.getLoaderManager().initLoader(MY_CURSOR_ID, null, this);
    // ...
    }

    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    // TODO: create a cursor loader that will load your cursor here
    }

    public void onLoadFinished(Loader<Cursor> arg0, final Cursor arg1) {
    // TODO: set your cursor as the cursor of your adapter here;
    }

    public void onLoaderReset(Loader<Cursor> arg0) {
    // TODO: set null as the cursor of your adapter and 'free' all cursor
    // references;
    } 
    ```

*   然后，当您需要重新加载数据时：

    ```
    this.getLoaderManager().restartLoader(MY_CURSOR_ID, null, this); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:17:03.893

打电话 `cursor.requery(); notifyDataSetChanged();` 。

如果您想要真正的性能，请使用[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:17:22.797

只需重新查询`Cursor`这样的：

```
public void onClick(DialogInterface dialog, int id) {
    // User clicked OK button
    DBAdapter dba = new DBAdapter(mActivity);
    dba.open();
    dba.remove(_id);
    Log.i("TAAG", "removed: "+_id);
    dba.close();    
    cursor.requery();
    notifyDataSetChanged();                                   
} 
```

然后调用`notifyDataSetChanged()`告诉`Adapter`数据已经改变，它必须重新构建适配器。

如果重新查询需要很长时间，这将是一项密集的操作。考虑在另一个线程中进行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:18:08.050

删除数据库中的项目后，调用`notifyDataSetChanged`你的`CommentCursorAdapter`，授予你正在使用的这个匿名内部类，你需要一个`final`引用，`this`因为它在你的`CursorAdapter`. 这应该会触发您的`ListView`.

[http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged())

# perl - 如何使用 Perl 将数据从 excel 传输到 powerpoint？

> ID：15227232
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:10:04.843
> 
> 标签：perl, ole, perl-module

我正在使用来自 ActiveState 的 Active Perl，并希望将数据从 Excel 工作表传输到特定 Power point 文件中幻灯片上的特定表格。

我如何在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:33:09.683

我建议你从 VBA 调用你的 Perl 脚本。

你可以这样做（在 VBA 中）：

```
ShellWait "c:\perl\bin\perl.exe c:\path\to\script.pl", vbNormalFocus 
```

还可以尝试[`Shell`](http://msdn.microsoft.com/en-us/library/aa242087%28v=VS.60%29.aspx)VBA 提供的 API。

**更新**

我建议您先写入磁盘（在 Excel 中）。然后你从磁盘读取（在 Powerpoint 中）。您使用 VBA 执行此操作，这两者都是。为此使用 Perl 没有什么意义，因为您将陷入文件解析问题和各种其他问题。

# asp-classic - 如何在登录后显示用户名而不是登录和注册表单

> ID：15227235
> 
> 赞同：-3
> 
> 时间：2013-03-05T15:10:11.530
> 
> 标签：asp-classic, vbscript, webmatrix-2

我已经使用 ASP 经典创建了一个登录页面。

问题是登录后它重定向到具有相同登录和注册按钮的索引页面，而不是显示用户名或电子邮件ID？

提前致谢...

这是代码（VBScript）。

```
<%
email = ""
password = ""
ErrorMessage = ""

if request.form <> "" then
email = Request.Form("email")
 password = Request.Form("password")

 if email = "" or password = "" then
 ErrorMessage = "You must specify a username and password."
 else
set conn = Server.CreateObject("ADODB.Connection")
conn.Provider = "Microsoft.Jet.OLEDB.4.0"
 conn.Open("F:\main\main\App_Data\Users.mdb")
 set rs = Server.CreateObject("ADODB.recordset")
rs.Open "Select * FROM Login WHERE Email = '" & email & "'", conn
 response.write("email")

if rs.EOF = false then 

 if rs.fields("Password") = password then
  Response.Redirect("indexs.asp")

end if
 end if 
ErrorMessage = "Login failed"
end if 
end if

if ErrorMessage <> "" then
response.write("<p>" & ErrorMessage & "</p>") 
 response.write("<p>Please correct the errors and try again.</p>") 

end if
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:12:51.137

在重定向到 index.asp 之前设置会话变量，例如

```
Session("username") = rs("username") 
```

然后，您可以在索引页面上的条件语句中使用会话变量，例如

```
If session("username") = "" Then

 'your login form goes here

else

response.write "Welcome "+ session("username")

End If 
```

# actionscript-3 - 计算在 mx:List Actionscript 3.0 上列出项目的总时间

> ID：15227236
> 
> 赞同：-2
> 
> 时间：2013-03-05T15:10:12.927
> 
> 标签：actionscript-3, list, air

当我刷新列表的数据提供者时，我想获得列出项目的总时间。我的意思是，当我更改数据提供者时，加载两个新项目需要多少毫秒。
例如：我在数据提供者中有 3 个项目，加载到列表需要 2 毫秒。如果我推送 50 个项目，可能是 15 毫秒。
我检查了**mx.events.ListEvent**，但找不到任何合适的解决方案。
任何意见表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:51:01.877

创建自己的类 extends mx:List，往下看：

```
package classes
{
    import flash.utils.getTimer;

    import mx.controls.List;

    public class ListCustom extends List
    {

        private var _time:Number;

        public function ListCustom()
        {
            super();
        }

        override public function set dataProvider(value:Object):void
        {
            _time = getTimer();

            super.dataProvider = value;
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.updateDisplayList(unscaledWidth, unscaledHeight);

            if (!isNaN(_time))
            {
                var delay:Number = getTimer() - _time;

                _time = NaN;

                trace("delay", delay);
            }
        }
    }
} 
```

# c# - 测试扫描文档上是否勾选复选框的正确方法是什么？

> ID：15227243
> 
> 赞同：2
> 
> 时间：2013-03-05T15:10:27.690
> 
> 标签：c#, image-processing, optical-mark-recognition

假设我们正在扫描带有复选框/空圆圈（用于签名/敲击/打勾）的类似测试的文档。什么是正确的方法来检查，如果已经裁剪的复选框/圆圈被选中/签名/罢工/打勾？
如果我们强制测试用户完全标记该区域，只知道复选框/圆圈的位置和非白色像素上的计数就足够了（会吗？），但是我们应该用什么方法来测试，即复选框/圆圈被勾选或选中（X）？

这将成为 C# 项目的一部分，因此将不胜感激代码甚至是 .net/c/c++ 的现成库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:41:01.083

抱歉这个答案很短，但您可以在复选框内的区域上运行 ocr 系统。

如果它什么也不返回，那么你就知道它没有被检查。

如果它返回一些东西，那么将它与一个大的可能性白名单进行比较，然后标记不确定性。

您也可以使用@dan 提出的错误处理

使这比仅取平均值更可靠的原因在于，您可以确定是否没有高度确定地检查它。因为我们正在寻找一个以某种最小方式可识别的标记，我们知道如果那里没有任何东西，那么它肯定不会被检查。那么您所要做的就是找到一个可以用作检查的字符和标记的良好白名单（并且跳出框框思考，ocr系统可能会返回一个'a'表示曲线，但这是一个积极的回应） . 需要澄清的是，仅取平均值的问题在于，复选框中任何暗度的增加都会产生积极的结果，但情况并非总是如此。如果有人做了标记然后擦掉了，那么盒子里的黑暗仍然会增加。

最后我要补充一点，现在有很多非常先进的 OCR 系统。我怀疑你很难找到一个可以提供比随机字符更好的匹配你的案例的额外训练数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:14:10.297

该算法将是这样的：

1.  找到每个复选框（我知道你已经有了）
2.  计算所有像素颜色的平均值
3.  如果高于某个阈值，则标记，如果低于某个阈值，则未标记

但是，您应该添加一些检查：

*   倍数是否高于阈值？-> 让人工检查，学生可以先勾选某项内容，然后将其更改为另一个字段。
*   没有人超过阈值？-> 让人工验证确实没有检查过。

我想这个答案的重要部分是：
如果算法不确定，请将其标记为手动处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T11:22:18.500

大多数提供复选框识别的高性能产品都使用某种钟形分布曲线来计算一个框实际被选中的可能性：太多的“数据”，用户很可能改变主意并草草写了这个盒子; 太少了，它可能是用户在下面的方框中打勾并且在穿过下一个方框区域之前没有提起笔而留下的“尾巴”。

我建议您应用额外的逻辑来处理允许的多个盒子（例如，您是否拥有汽车/您是否还拥有自行车）以及只有一个盒子可以正确的情况（例如，您是男性还是女性）。这应该对您的应用程序有所帮​​助。过滤掉更明显的错误。

# jquery-mobile - jquery 移动页脚无法使用动态内容正确呈现

> ID：15227245
> 
> 赞同：2
> 
> 时间：2013-03-05T15:10:31.293
> 
> 标签：jquery-mobile, backbone.js, footer

伙计们，我正在使用带有最新 jquery mobile (1.3) 的主干js (0.9)。我正在使用 WebSql 来存储本地数据。当主页加载时，我从本地数据库进行查询，并在查询成功*后使用 jquery Deferred 渲染内容。*不幸的是，jquery 移动页脚没有得到“增强”。

我的视图的 Haml 模板很简单，如下所示：

```
%div{'data-role' => 'header'}
  %div{'data-role' => 'navbar', 'data-iconpos' => 'top'}
    %ul
      %li
        %a.ui-btn-active.ui-state-persist{'href' =>''}ATAB
      %li 
        %a{'href' =>'#btab'}BTAB
%div{'data-role' => 'content'}

%div{'data-role' => 'footer', 'data-position' => 'fixed'}
  %a{'data-icon' => 'plus', 'href' => '#a_link'}A link 
```

我的 Backbonejs 视图如下所示（我使用的是 coffeescript）。路由器已经在 router.templates 中缓存了模板，一旦加载了来自 websql 的 db 记录，txnsLoadedPromise 就会“解析”：

```
window.HomeView = class HomeView extends Backbone.View

  initialize: (options) ->
    @template = Handlebars.compile(router.templates['/home/home'])

  render: () ->
    txnsLoadedPromise.then(
      @renderDynamic
    )
    return this

  renderDynamic: () =>
    if (transactions.length > 0)
      #generate content dynamically here and put in result
      result = {}
      $(@el).html(@template(result))
      $('[data-role="header"]').trigger('create')
      $('[data-role="footer"]').trigger('create') 
```

这就是我的观点：

![页脚无法正确显示](../Images/c8308fb599226608993c895bbb42babd.png)

我试图在页脚的触发器调用中使用“刷新”而不是创建，但它不起作用。奇怪的是，标题刷新工作正常。此外，如果我删除页面的动态特性（意味着直接渲染视图而不是在解决承诺时，那么它可以正常工作（这是预期的。）

为了完整起见，以下是我的路由器代码（其中相关的部分）

```
window.MyRouter = class MyRouter extends Backbone.Router

  routes: 
    "": "home"

  initialize: (options) ->
    #code for preloading view templates

  templates: {}

  home: () ->

    PageUtil.changePage new HomeView({templateKey: '/home/home'}) 
```

PageUtil 类中的 changePage 方法：

```
window.PageUtil = class PageUtil

  @changePage: (view, overrideOptions={}, role='page') ->
    defaultOptions={transition: 'slide', reverse: false}
    options = $.extend(defaultOptions, overrideOptions)
    view.render();
    $('body').append($(view.el));
    if window.curentView
      console.log 'removing view: ', currentView
      window.currentView.remove()
      window.currentView = view
    $.mobile.changePage(view.$el, options); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:26:16.460

你的代码有问题。

首先**`trigger('create')`**仅适用于内容部分，用于**`trigger('pagecreate')`**增强页眉+内容+页脚。

**[在我的另一篇文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中阅读有关它的更多信息。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

在那里，您将找到一个动态添加的页脚内容的工作示例。

如果您要添加动态导航栏元素，那么甚至**`trigger('pagecreate')`**不会帮助您。但是有一个**[可行的解决方案](http://jsfiddle.net/Gajotres/V6nHp/)**：

```
$('#index').live('pagebeforeshow',function(e,data){    
    navbarHandler.addNewNavBarElement('navbar-test','el4','Page Four');
});

var navbarHandler = {
    addNewNavBarElement:function(navBarID, newElementID, newElementText) {
        var navbar = $("#" + navBarID);

        var li = $("<li></li>");        
        var a  = $("<a></a>");
        a.attr("id", newElementID).text(newElementText);
        li.append(a);

        navbar = navbarHandler.clearNavBarStyle(navbar);

        navbar.navbar("destroy");
        li.appendTo($("#" + navBarID + " ul"));
        navbar.navbar();
    },
    clearNavBarStyle:function(navbar){
        navbar.find("*").andSelf().each(function(){
            $(this).removeClass(function(i, cn){
                var matches = cn.match (/ui-[\w\-]+/g) || [];
                return (matches.join (' '));
            });
            if ($(this).attr("class") == "") {
                $(this).removeAttr("class");
            }
        });
        return navbar;   
    }
} 
```

# http - 来自 HTTP 页面 IFrame 的 HTTPS 调用

> ID：15227249
> 
> 赞同：1
> 
> 时间：2013-03-05T15:10:48.220
> 
> 标签：http, iframe, https

我有 http 页面，我想通过 HTTPS 调用登录（我已经这样做了）

我的问题是：

1.  像这样调用是否安全，如果不是我们应该做些什么来支持这个功能，因为我的主页是 http 并且当用户点击登录时它会重定向到 https 页面，现在我想给一个下拉 IFrame 并询问凭证并从 iframe 进行 https 调用，我在一些网站上看到了这一点，并想知道他们为此做了什么不同的事情。
2.  用于此调用的浏览器是否有任何限制，即 IE 版本、Chrome、Firefox、Opera。它适用于所有浏览器和版本吗

我遇到了一些旧帖子，但找不到满意的答案

[HTTP 和 HTTPS iframe](https://stackoverflow.com/questions/3144986/http-https-iframe)

任何帮助将不胜感激。

# facebook - 粉丝门和喜欢一个应用程序

> ID：15227251
> 
> 赞同：0
> 
> 时间：2013-03-05T15:10:55.663
> 
> 标签：facebook, share, facebook-like

我试图弄清楚如何做某事，并且我已经尝试搜索 Stack Overflow，但老实说，我不是 100% 确定我在寻找什么，所以我没有想出任何好的东西。

这是我需要做的：

我们有一个应用程序，您应该喜欢该页面才能看到该应用程序。很好用。

客户希望我们在网站上放置一个 facebook 分享按钮，这样当您使用完该应用程序后，您可以单击“分享”按钮并在墙上发布一些内容：“我刚刚使用了 XXX，你也应该使用！” 管他呢。问题是共享按钮已被弃用。facebook 开发者网站上的所有内容都说我需要使用点赞按钮，但是，由于您已经喜欢该页面才能进入，您将看到您已经喜欢该页面并且不允许点击它再次分享您的新闻提要上的内容。

好像我在这里遗漏了一些东西。您可以在该粉丝页面内为页面和特定应用程序设置一个赞按钮吗？好像我做不到。我要问的甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:32:49.133

是的，您可以使用 Javascript SDK 发布到墙上...这使用 jQuery 来检测对作为共享按钮的 id 的点击，因此请确保在任何 facebook javascript 之前添加它：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

如果您还没有加载 FB Javascript SDK，您还需要加载：

```
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'INSERT APP ID',
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            oauth: true // enable OAuth 2.0
        });

    };
    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk',
            ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script> 
```

然后添加以下代码：

```
 $("#shareclick").click(function () {

      FB.ui({
          method: 'feed',
          name: 'The Post Title',
          caption: 'skruffymedia testing caption post',
          description: (
              'Testing the description of the skruffymedia app post!'),
          link: 'http://www.skruffymedia.com',
          picture: 'http://www.skruffymedia.com/facebook.jpg'
      }, function (response) {
          if (response && response.post_id) {
              alert('posted');
          } else {
              alert('not shared');
          }
      });

  }); //End Share Click 
```

[我将在我的博客http://www.skruffymedia.com/blog/creating-a-facebook-like-gate-competition/](http://www.skruffymedia.com/blog/creating-a-facebook-like-gate-competition/)的下一步中包含这个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T16:29:13.580

现在，根据某人是否喜欢您的页面来限制应用程序或应用程序中的内容是违反 Facebook 的政策的。

请参阅此处的公告：[https ://developers.facebook.com/blog/post/2014/08/07/Graph-API-v2.1/](https://developers.facebook.com/blog/post/2014/08/07/Graph-API-v2.1/)

# python - 在python中拆分大文本文件的有效方法

> ID：15227254
> 
> 赞同：7
> 
> 时间：2013-03-05T15:11:08.597
> 
> 标签：python, performance, algorithm, sorting, optimization

这是以前的[问题](https://stackoverflow.com/questions/15223749/improving-performance-of-a-function-in-python#comment21464492_15223749)，在哪里可以提高 python 中函数的时间性能我需要找到一种有效的方法来拆分我的文本文件

我有以下文本文件（超过 32 GB）**未排序**

```
....................
0 274 593869.99 6734999.96 121.83 1,
0 273 593869.51 6734999.92 121.57 1,
0 273 593869.15 6734999.89 121.57 1,
0 273 593868.79 6734999.86 121.65 1,
0 272 593868.44 6734999.84 121.65 1,
0 273 593869.00 6734999.94 124.21 1,
0 273 593868.68 6734999.92 124.32 1,
0 274 593868.39 6734999.90 124.44 1,
0 275 593866.94 6734999.71 121.37 1,
0 273 593868.73 6734999.99 127.28 1,
............................. 
```

第一列和第二列是网格中 x、y、z 点的位置 ID（例如：0 -273）。

```
def point_grid_id(x,y,minx,maxy,distx,disty):
    """give id (row,col)"""
    col = int((x - minx)/distx)
    row = int((maxy - y)/disty)
    return (row, col) 
```

这`(minx, maxx)`是我的网格的原点 size `distx,disty`。Id瓦片的数量是

```
tiles_id = [j for j in np.ndindex(ny, nx)] #ny = number of row, nx= number of columns 
from [(0,0),(0,1),(0,2),...,(ny-1,nx-1)]
n = len(tiles_id) 
```

我需要以文件数量对 ~32 GB 文件进行切片`n (= len(tiles_id))`。

我可以在不排序但读取文件 n 次的情况下执行此操作。出于这个原因，我希望为文件起始形式找到一种有效的拆分方法`(0,0) (= tiles_id[0])`。之后，我只能读取一次拆分文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:18:14.117

无论您使用 Python 还是命令行工具 ( `sort`)，对 32GB 的文件都几乎不可能进行排序。数据库似乎太强大了，但可以使用。但是，如果您不愿意使用数据库，我建议您只需使用 tile id 将源文件拆分为文件。

您读取一行，从 tile id 中创建一个文件名并将该行附加到文件中。并继续，直到源文件完成。它不会太快，但与排序不同，它至少具有 O(N) 的复杂度。

而且，当然，文件的单独排序和连接它们是可能的。对 32GB 文件进行排序的主要瓶颈应该是内存，而不是 CPU。

在这里，我认为：

```
def temp_file_name(l):
    id0, id1 = l.split()[:2]
    return "tile_%s_%s.tmp" % (id0, id1)

def split_file(name):
    ofiles = {}
    try:
        with open(name) as f:
            for l in f:
                if l:
                    fn = temp_file_name(l)
                    if fn not in ofiles:
                        ofiles[fn] = open(fn, 'w')
                    ofiles[fn].write(l)
    finally:
        for of in ofiles.itervalues():
            of.close()

split_file('srcdata1.txt') 
```

但是，如果有很多图块，超过您可以打开的文件数量，您可以这样做：

```
def split_file(name):
    with open(name) as f:
        for l in f:
            if l:
                fn = temp_file_name(l)
                with open(fn, 'a') as of:
                    of.write(l) 
```

而最完美主义的方法是在达到打开文件数量的限制后关闭一些文件并将它们从字典中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:23:50.967

一个快速的谷歌将我带到ActiveState 代码中的[这个食谱](http://code.activestate.com/recipes/576755-sorting-big-files-the-python-26-way/)。它没有给出任何性能比较，但它似乎完成了这项工作。

简而言之，它似乎按照@Ellioh 的建议做，而且你有一个现成的食谱，你可能不必重新发明轮子。

# iphone - 自定义 TabBar 导航问题

> ID：15227257
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:11:19.777
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我将自定义标签栏控制器实现为一组按钮，每个按钮都与它自己的视图控制器相关。我在此链接[http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)上进行了指导以实现该行为。所以相关部分代码如下：

```
- (void) selectedItemAtIndex:(NSUInteger)itemIndex
{
// Get the right view controller
NSDictionary* data = [self.tabBarItems objectAtIndex:itemIndex];
UIViewController* viewController = [data objectForKey:@"viewController"];

// Remove the current view controller's view
UIView* currentView = [self.view viewWithTag:SELECTED_VIEW_CONTROLLER_TAG];
[currentView removeFromSuperview];

// Set the view controller's frame to account for the tab bar (+ 48)
viewController.view.frame = CGRectMake(0,48,self.view.bounds.size.width, self.view.bounds.size.height - 48);

// Se the tag so we can find it later
viewController.view.tag = SELECTED_VIEW_CONTROLLER_TAG;

// Add the new view controller's view
[self.view insertSubview:viewController.view belowSubview:self.tabBar];

//Keep track of current view controller
self.currentController = viewController;
} 
```

到目前为止工作正常，我可以以与默认 TabBarViewController 类似的方式看到每个视图控制器。但是有一个要求，我需要从一个 tabBar 控制器内部以模态方式推送一个新的导航控制器（它应该占用所有应用程序框架）。

乍一看，我从一个选项卡控制器中尝试了以下代码：

```
DetailViewController *detailViewController = [[DetailViewController   alloc]init];
UINavigationController *navigationController = [[UINavigationController alloc]detailViewController];
[self presentModalViewController:navigationController animated:YES]; 
```

但是没有按预期工作，首先视图显示在 TabBar 下方，其次新视图没有考虑父视图框架，父视图框架应该是屏幕边界而不是标签栏。（0、48、360、412）。我的详细视图控制器正在从 nib 文件加载内容。

嗯，这很明显，因为 TabBar 控制器将每个视图插入到我的自定义 TabBar 下方。

```
[self presentModalViewController:navigationController animated:YES]; 
```

所以我尝试将它直接作为窗口子视图插入：

```
[[UIApplication sharedApplication].keyWindow addSubview:navigationController.view]; 
```

但是，我认为这不行……应该有更好的方法，我想不出。因此，如果有人可以就如何纠正或改进这个导航系统给我建议，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:44:53.960

如果您正在为 iOS 5.0 及更高版本构建应用程序，您可以使用 childViewController。在您的自定义标签栏中，您可以拥有一个 containerView 和一个 tabView。

viewController 的视图被添加到 containerView 中。如果正确实现以下方法，所有必要的事件都会生成到随后添加的 viewController

```
- (void)addChildViewController:(UIViewController *)childController;
- (void)removeFromParentViewController; 
```

可以在[此处找到有关 viewController 包含的更多信息。](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

# git - 如何更新镜像克隆中的 HEAD 分支？

> ID：15227263
> 
> 赞同：7
> 
> 时间：2013-03-05T15:11:24.957
> 
> 标签：git, github

我有一个本地存储库，我通过`git clone --mirror <ssh-url>`. 然后我使用`git remote update --prune`.

此时，`HEAD`指向`refs/heads/master`

然后我转到我的 github 存储库的 Admin 部分，并更改默认分支。我所有的分支都照常更新，但 HEAD 仍然是`refs/heads/master`（是的，分支有不同的哈希值）

我目前的想法是使用`git ls-remote`获取 HEAD 和所有分支的哈希，然后使用一些 grep/awk 魔术，提取 HEAD 的哈希，然后选择具有匹配哈希的第一个分支，并用于`git symbolic-ref HEAD <found branch name>`在本地设置它。

但是有没有更简单的方法来获取远程`HEAD`分支名称（以可以在脚本中更新的方式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:37:02.870

是的，有一个命令：

```
git remote set-head origin -a 
```

来自`git help remote`：

> 使用 -a，查询远程以确定其 HEAD，然后将 symbolic-ref refs/remotes/<name>/HEAD 设置为相同的分支。例如，如果远程 HEAD 指向 next，“git remote set-head origin -a”会将符号引用 refs/remotes/origin/HEAD 设置为 refs/remotes/origin/next。这只有在 refs/remotes/origin/next 已经存在时才有效；如果不是，则必须先获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T21:05:18.030

> 有没有更简单的方法来获取远程 HEAD 分支名称

```
git ls-remote --symref origin HEAD 
```

并且您可以直接使用 url 或路径而不是远程名称，例如，您可以`git ls-remote --symref . HEAD`以一种相当壮观的迂回方式获取本地结帐。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-03T14:26:20.160

要查询远程 HEAD，请使用

```
git remote show origin
* remote origin
  Fetch URL: git://...
  Push  URL: git://...
  HEAD branch: whateverremotehead
  Remote branches:
    ... 
```

并解析输出，寻找“HEAD 分支”，并在

```
git symbolic-ref HEAD refs/heads/whateverremotehead 
```

我不知道有什么更好的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T18:50:49.837

由于您使用的是 ssh，因此如果您具有适当的 ssh 访问权限，则可以使用此命令：

```
scp yourusername@yourserver:/path/to/the/server/repo/HEAD local/repo/.git/HEAD 
```

# php - 追加到 php 文件而不是 txt 文件

> ID：15227270
> 
> 赞同：0
> 
> 时间：2013-03-05T15:11:43.147
> 
> 标签：php, file, file-io

我有以下脚本，它从表单中获取一些值，并在每次在表单中输入新值时附加到文本文件：

```
$filename = "nic.txt"; #Must CHMOD to 666, set folder to 777
$text = "\n" . str_pad($fname, 30) . "" . str_pad($lname, 30) . "" . str_pad($tdate, 20) . "" . str_pad($ydept, 30) . "" . str_pad($percentage, 0) . "%";

$fp = fopen ($filename, "a"); # a = append to the file. w = write to the file (create new if doesn't exist)
if ($fp) {
    fwrite ($fp, $text);
    fclose ($fp);
    #echo ("File written");
}
else {
    #echo ("File was not written");
} 
```

问题是，而不是写入在存储数据时不受保护的 txt 文件，我怎么能说附加到 php 文件，以便用户在查看网络上的文件之前需要身份验证？我想要某种身份验证（密码/用户名），所以不是每个人都能看到它。而对于 txt 文件，我认为这是不可能的。

我的 SQL 写入数据文件，我注释掉了，直到我找到最好的选择是：

```
// Write to DB
//$conn = new mysqli('host', 'user', 'pass', 'db');

// check connection
//if (mysqli_connect_errno()) {
//  exit('Connect failed: '. mysqli_connect_error());
//}

// store the values in an Array, escaping special characters for use in the SQL statement
//$adds['fname'] = $conn->real_escape_string($fname);
//$adds['lname'] = $conn->real_escape_string($lname);
//$adds['tdate'] = $conn->real_escape_string($tdate);
//$adds['ydept'] = $conn->real_escape_string($ydept);
//$adds['percentage'] = $conn->real_escape_string($percentage);

// sql query for INSERT INTO users
//$sql = "INSERT INTO keepScore ('fname', 'lname', 'tdate', 'ydept', 'percentage' ) VALUES ('". $adds['fname']. "', '". $adds['lname']. "', '". $adds['tdate']. "', '". $adds['ydept']. "', '". $adds['percentage']. "')"; 

// Performs the $sql query on the server to insert the values
//if ($conn->query($sql) === TRUE) {
//  echo 'users entry saved successfully';
//}
//else {
//  echo 'Error: '. $conn->error;
//}

//$conn->close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:13:00.867

将您的文本文件保留在 Web 服务器的文档根目录之外，并在读取文件时使用 PHP 脚本提供身份验证/授权。

看看[`readfile()`](http://php.net/manual/en/function.readfile.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T15:12:58.253

PHP 文件*是*文本文件。要实现您的要求，只需`$filename`结束`.php`（确保人们添加的数据只是*数据*而不是可执行代码）。

…但是以编程方式编辑代码并不是一个好主意。将您的数据存储在 Web 根目录之外的某个位置（可能在文件中，但数据库可能更好），然后让您的脚本在通过 auth/authz 时检索它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:18:14.350

一个简单的解决方案是创建一个包含 .txt 文件的目录，该目录受 .htpasswd 保护。这样，用户需要进行身份验证才能查看内容，并且您不会让自己面临无数安全漏洞的风险。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T15:15:57.297

您可以使用 .php 扩展名存储文件并添加标题信息以将它们作为纯文本而不是 html 提供。然后您可以在开头插入一个 php 代码，这将导致用户对自己进行身份验证。

# sed - 替换包含 sed 分隔符和扩展的正则表达式功能

> ID：15227276
> 
> 赞同：1
> 
> 时间：2013-03-05T15:11:52.600
> 
> 标签：sed

我正在尝试使用 sed 来匹配和替换以下性质的`somedate:"12/12/2012"`字符串`sed 's/somedate:"[0-9]{2}\/[0-9]{2}\/[0-9]{4}"//g'`

此表达式与字符串中的任何内容都不匹配`something and somedate:"12/12/2012" and something else`

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:19:02.017

几点：

*   您将`/`其用作分隔符，`sed`但替换包含`/`因此选择不同的分隔符，例如或将替换中的.`|`转义为. 任何分隔符都可以与.`/``\``sed`

*   量词`{n}`是扩展正则表达式类的一部分，因此请使用该`-r`选项（或`-E`用于 的 BSD 衍生物`sed`）或再次转义扩展功能，如`\{2\}`.

*   `g`如果您在一行上有多个匹配项，则可能需要也可能不需要该标志。这对您给定的示例没有影响，但值得指出。

*   您可能想要`{1,2}`几天和几个月，*即* `1/1/2012`.

我会做：

```
$ sed -r 's|somedate:"[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}"||' file
something and  and something else 
```

或者通过逃避一切：

```
$ sed 's/somedate:"[0-9]\{1,2\}\/[0-9]\{1,2\}\/[0-9]\{4\}"//' file
something and  and something else 
```

# gwt - 跨 FlexTable 包装 FlowPanel 不起作用

> ID：15227277
> 
> 赞同：0
> 
> 时间：2013-03-05T15:11:54.727
> 
> 标签：gwt, flextable, flowpanel

我是 GWT 的新手，我有单独的类，仅用于显示 LIST，当我说列表时，我基本上使用 FLEXTABLE 来显示我的数据...3 FLEXTABLE 并排放置。所以，我在这里面临的问题是......如果我用 FLOWPANEL 包装所有这些 FLEXTABLE ，它们都不会显示在屏幕上。如果我删除那些包裹在这些 FLEXTABLES 周围的 FLOWPANEL，所有这些 FLOWPANEL 都会显示在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:38:19.897

试过这样？？

```
 FlexTable f1 = new FlexTable();
    f1.setWidget(...     
    f1.setWidget(...

    FlexTable f2 = new FlexTable();
    f2.setWidget(...     
    f2.setWidget(...

    FlowPanel flowpanel= new FlowPanel();
    flowpanel.add(f1);
    flowpanel.add(f2);

    RootLayoutPanel.get().add(flowpanel);//may be you forgot this line 
```

# arm - ARM NEON SIMD 版本 2

> ID：15227278
> 
> 赞同：5
> 
> 时间：2013-03-05T15:11:55.297
> 
> 标签：arm, simd, neon

Cortex A15 中的 NEON SIMD 和 NEON SIMD 版本 2 有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T01:42:57.237

它添加了 SIMD FMA 指令 (VFMA.F32) 并且还要求 NEON 半精度扩展。ARM Cortex-A7、ARM Cortex-A15 和 Qualcomm Krait（不确定 ARM Cortex-A5）支持 NEONv2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T16:38:38.630

It is not that much of a difference, from [ARM ARM](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0406b/index.html):

(in reverse order of definitions)

> > Advanced SIMDv2 is an OPTIONAL extension to the ARMv7-A and ARMv7-R profiles. Advanced SIMDv2 adds both the Half-precision Extension and the fused multiply-add instructions to the features of Advanced SIMDv1.
> > 
> > ...
> > 
> > Advanced SIMDv1 can be extended by the OPTIONAL Half-precision Extension, that provides conversion functions in both directions between half-precision floating-point and single-precision floating-point.
> > 
> > ...
> > 
> > The Advanced SIMD architecture extension, its associated implementations, and supporting software, are commonly referred to as NEON™ technology.

# asp.net - 当用户在 Signalr 中离开站点时会发生什么事件？

> ID：15227282
> 
> 赞同：1
> 
> 时间：2013-03-05T15:12:15.097
> 
> 标签：asp.net, asp.net-mvc, signalr

用户离开活动站点以将其状态从在线更改为离线并向客户发送消息表明他离开了该站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:25:02.610

您可以绑定到断开连接的事件。

所以在你的集线器中添加方法：

```
public override Task OnDisconnected()
{
    // The Context.ConnectionId is the identity of the disconnected client
    return Clients.All.userOffline(/* Something here to identify the user */);
} 
```

# css - 具有可调整大小的基本图像和自动叠加位置重新计算的动态调整大小的叠加图像

> ID：15227284
> 
> 赞同：2
> 
> 时间：2013-03-05T15:12:21.817
> 
> 标签：css, image, overlay, css-position

是否有可能满足所有这五个要求？最后一点也不是最不重要的。

```
1) an overlay image is placed above a base image
 (e.g. push pin at specified intersection on a city map)

2) the city map can be dynamically resized by the user in the browser window
 (the base image content is static -- i.e. resizing does not include more or less of the city)

3) the size of the push-pin is proportional to the size of the city map 
(the bigger the city map, the bigger the push-pin; the smaller the city map, 
the smaller the push-pin)

4) as the city map's size changes, the push pin's location remains accurate

5) The developer does not have to recalculate the pin's location when map's size changes 
```

# xaml - 另一个“当前上下文中不存在名称'itembutton'”（WP8，XAML）

> ID：15227287
> 
> 赞同：1
> 
> 时间：2013-03-05T15:12:27.407
> 
> 标签：xaml, windows-phone-8

我知道这个问题已经发布了大约一千次，但我没有找到解决我问题的解决方案。

我有一个 LongListSelector `ItemTemplate`：

```
<DataTemplate x:Key="AddrBookItemTemplate">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*" />
      <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <TextBlock FontWeight="Bold" Text="{Binding Name}" HorizontalAlignment="Stretch" VerticalAlignment="Center"  Grid.Column="0" Grid.Row="0" />
    <Button x:Name="itembutton" CommandParameter="{Binding ItemID}" Content="{Binding ButtonCaption}" Width="150" HorizontalAlignment="Right" Grid.Column="1" Grid.Row="0" Click="ItemButtonClick"/>
  </Grid>
</DataTemplate> 
```

所以发生的事情只是我收到了我在标题中发布的这个漂亮的错误消息。我不知道，为什么？！

```
private void ItemButtonClick(object sender, RoutedEventArgs e)
{
  if (sender == this.itemButton) {
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:59:09.933

从`DataTemplate`它看起来你正在一个容器中显示这个按钮，如 a`ListBox`或`LongListSelector`。

这意味着没有范围`itembutton`内`this`（大概`this`是`UserControl`or 或`PhoneApplicationPage`）：实际上您的每个`ListBoxItems`!

你必须找到另一种方法来找到你的按钮。

**更新**：您应该发现`DataContext`您的按钮与它所包含的列表项匹配。这可能是最简单的处理方式：但是如果所有其他方法都失败，您可以`Tag`按照您的建议使用该属性。

喜欢：

```
private void ItemButtonClick(object sender, RoutedEventArgs e)
{
    var theButton = (Button) sender;
    var myItem = (TypeOfAnObjectInMyList) theButton.DataContext;
    doSomethingWithMyItem(myItem); 
```

# xslt - 如何使用 xslt 显示字符串的第一部分？

> ID：15227293
> 
> 赞同：-2
> 
> 时间：2013-03-05T15:12:46.123
> 
> 标签：xslt

如何使用 xslt 仅显示字符串的特定部分，例如：

1.  精选金曲
2.  图画书

我只想在第二张图片中显示最伟大的图片。只有第一部分要显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:17:55.003

您应该像这样使用 substring 函数：

```
<xsl:value-of select="substring-before($yourstring, ' ')"/> 
```

它只选择空白之前的字符串部分。还有`substring`和`substring-after`。

值得研究一下。

# uitableview - 弯曲的 UITableView/UIScrollView

> ID：15227295
> 
> 赞同：0
> 
> 时间：2013-03-05T15:12:52.737
> 
> 标签：uitableview, uiscrollview

我正在尝试构建一个应用程序，为用户提供弯曲/椭圆的侧面滚动选项（UITableView 或 UIScrollView），但我真的不知道从哪里开始，所以我会很感激一些帮助。

我们的想法是让滚动/表格看起来像这样：

```
A
 B
  C      Rest of screen
 D
E 
```

我期待听到一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:08:34.943

我曾经做过一个漂亮的滚动视图，您可以在其中水平滚动缩略图。我通过使图像朝向中心更大来创建“弯曲”效果，类似于封面流。这很简单，只需`transform`根据 中的位置更改`viewDidScroll`。我认为这可能与您正在寻找的效果相似。

# jquery - 在select2 jquery插件的数据部分传递一个数组

> ID：15227296
> 
> 赞同：2
> 
> 时间：2013-03-05T15:12:53.470
> 
> 标签：jquery, asp.net-mvc-3, knockout.js, jquery-select2

我对 Select2 jquery 插件（使用 MVC3、Razor 和 Knockout JS）以及我想传递给我的 ajax 调用的自定义参数有疑问。

我有这个代码：

```
$('#QuickSearchPresentation').select2({
        placeholder: "Search for a movie",
        minimumInputLength: 1,
        ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
            url: '@Url.Action("QuickSearchMainContainerFromPresentationByIdFolders", "DataCenter", new { amount = 10 })',
            contentType: 'application/json',
            dataType: 'json',
            type: 'POST',
            quietMillis: 400,
            data: function (term, page) {
                return ko.toJSON({
                    term: term,
                    idFolders: vm.Container.Catalogs
                });
            },
            results: function (data, page) { // parse the results into the format expected by Select2.
                // since we are using custom formatting functions we do not need to alter remote JSON data
                console.log('results', data);
                return {results: data};
            }
        },
        initSelection: function(element, callback) {

            console.log('element', element);

        },
        formatResult: containerQuickSearchResult, // omitted for brevity, see the source of this page
        formatSelection: containerQuickSearchResult,  // omitted for brevity, see the source of this page
        dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
        escapeMarkup: function (m) { return m; } // we do not want to escape markup since we are displaying html in results
    }); 
```

vm 是我的淘汰赛 js 模型，它是一个 int 数组。

问题是我无法将 idFolders 数组传递给服务器上的 Action，服务器以“”值不能为空来响应。参数名称：源”（因为数组在我的控制器中的操作上为空）。我尝试了所有可能的方法，但我找不到正确的方法。

我希望你能帮助我。

谢谢，贡萨洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T04:08:36.647

在您的 jQuery ajax 调用中，为您的数据属性尝试将其包装在 JSON.stringify() 中。像这样：

```
data: function (term, page) {
    return JSON.stringify(ko.toJSON({
        term: term,
        idFolders: vm.Container.Catalogs
    }));
}, 
```

我注意到使用 JSON.stringify 包装数据使 MVC 正确处理 JSON。

# php - FormStack，PHP：将名称和地址字段的 POST 信息作为嵌套数组

> ID：15227298
> 
> 赞同：2
> 
> 时间：2013-03-05T15:12:59.003
> 
> 标签：php, post, formstack

我正在尝试让 FormStack 将数据发布到我正在制作的脚本中，以便可以将其插入到我自己的 MySQL 数据库中。我能够获取数据并解析成一个看起来像这样的数组：

```
Array
(
  [FormID] => 1111111
  [UniqueID] => 222222
  [name_field1] => first = FirstName last = LastName
  [address_field1] => address = 123 Street Name address2 = Suite 1000 city = Exampleville state = WY zip = 12345
  [random_field] => random text
  [name_field2] => first = FirstName last = LastName
  [address_field2] => address = 123 Street Name address2 = Suite 1000 city = Exampleville state = WY zip = 12345
) 
```

问题在于 name_fields 和 address_fields 的格式。我以前制作过包含多维数组的 POST 数据的表单，但它的格式与此不同。我已经搜索和搜索并使用它，我能够将这些数据放入它自己的数组中，但它的代码比我想要的要多，我必须为每个名称字段和每个地址字段复制它。我觉得我必须缺少一种更简单的方法来处理名称和地址字段的这些单独部分。还是它看起来很乏味？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:05:02.300

这可能不是最优雅的解决方案，但我很高兴我能够提出任何解决方案。这是我想出的：

```
foreach ($_POST as $key => $value) {
    if (preg_match("/address2 = /", $value)) {
        $search = array("address2 = ", "city = ", "state = ", "zip = ");
        $addr_step1 = str_replace($search, "|", $value);
        $addr_step2 = str_replace("address = ", "", $addr_step1);
        $addr_step3 = explode("|", $addr_step2);
        $addr_keys = array("Address", "Address2", "City", "State", "Zip");
        $value = array_combine($addr_keys, $addr_step3);
    } elseif (preg_match("/address = /", $value)) {
        $search = array("state = ", "zip = ");
        $addr_step1 = str_replace($search, "|", $value);
        $addr_step2 = str_replace("city = ", "| |", $addr_step1);
        $addr_step3 = str_replace("address = ", "", $addr_step2);
        $addr_step4 = explode("|", $addr_step3);
        $addr_keys = array("Address", "Address2", "City", "State", "Zip");
        $value = array_combine($addr_keys, $addr_step4);
    } elseif (preg_match("/first = /", $value)) {
        $name_step1 = str_replace("last = ", "|", $value);
        $name_step2 = str_replace("first = ", "", $name_step1);
        $name_step3 = explode("|", $name_step2);
        $name_keys = array("FirstName", "LastName");
        $value = array_combine($name_keys, $name_step3);
    }
    ${'f' . $key} = $value;
} 
```

最后一点`${'f'.$key} = $value;`是给每个字段一个变量来解决它（我让 FormStack 使用数字字段名称，这就是为什么我要在开头附加“f”）。例如，像这样的事情......

```
echo "$f12345678[City], $f12345678[State]"; 
```

会告诉我...

```
New York, NY 
```

# amazon-ec2 - Jenkins 的默认密码是什么？

> ID：15227305
> 
> 赞同：67
> 
> 时间：2013-03-05T15:13:25.453
> 
> 标签：amazon-ec2, jenkins

我正在使用 EC2 服务器实例。使用以下方法安装 Jenkins：

```
wget -q -O - http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add -
sudo sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list'
sudo apt-get update
sudo apt-get install jenkins 
```

但我需要在 Jenkins 服务器上安装软件，所以在我的 EC2 实例中我做了

```
sudo –s –H –u jenkins 
```

进入詹金斯服务器。然后我试着做

```
sudo cabal install quickcheck 
```

但它提示我输入詹金斯密码。我现在已经在互联网上搜索了 4 个小时，但没有什么能帮助我在詹金斯服务器中获得管理权限。

所以我在 shell 中使用以下命令构建我的项目：

```
sudo cabal clean
sudo cabal configure
sudo cabal build
sudo cabal install 
```

这是我得到的错误：

```
 Started by timer
Building in workspace /var/lib/jenkins/jobs/Finance/workspace
Checkout:workspace / /var/lib/jenkins/jobs/Finance/workspace - hudson.remoting.LocalChannel@eea6dc
Using strategy: Default
Last Built Revision: Revision b638e2182dece0ef1a40232b1d75fa3ae5c01a5d (origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from origin
Commencing build of Revision b638e2182dece0ef1a40232b1d75fa3ae5c01a5d (origin/master)
Checking out Revision b638e2182dece0ef1a40232b1d75fa3ae5c01a5d (origin/master)
[workspace] $ /bin/sh -xe /tmp/hudson3500373817395137440.sh
+ sudo cabal clean
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: 3 incorrect password attempts
Build step 'Execute shell' marked build as failure
Sending e-mails to: ***@gmail.com
ERROR: Could not connect to SMTP host: localhost, port: 25
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
    java.net.ConnectException: Connection refused
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at hudson.tasks.MailSender.execute(MailSender.java:116)
    at hudson.tasks.Mailer.perform(Mailer.java:117)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:814)
    at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:786)
    at hudson.model.Build$BuildExecution.post2(Build.java:183)
    at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:733)
    at hudson.model.Run.execute(Run.java:1592)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:286)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    ... 17 more
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2015-03-06T19:59:37.487

以下是您可以解决的方法：

*   阻止詹金斯
*   去吧编辑`/var/lib/jenkins/config.xml`
*   改为`<useSecurity>true</useSecurity>`假
*   重启詹金斯：`sudo service jenkins restart`
*   导航到 Jenkins 仪表板，找到您之前可能使用过的“配置安全性”选项。这一次，设置安全性与以前相同，但将其设置为`allow anyone to do anything`，并允许用户注册。
*   转到`www.yoursite.com/securityRealm/addUser`并创建一个用户
*   然后去改变`allow anyone to do anything`你真正希望用户能够做的任何事情。就我而言，它是`allow logged in users to do anything`.

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-08-29T12:28:05.750

如果您在 ubuntu 14.04 中使用 apt-get 安装，您将在**/var/lib/jenkins/secrets/initialAdminPassword**位置找到默认密码。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-07T07:51:11.823

在安装 jenkins 之前，创建一个名为 jenkins 的用户并在那里设置密码。然后在安装 jenkins 之后就可以使用自己创建的密码了。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-01-03T12:01:50.607

在 macOS 上使用 Homebrew 默认安装 Jenkins，这将为`admin`用户输出初始密码：

```
sudo cat /Users/Shared/Jenkins/Home/secrets/initialAdminPassword 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-08-25T02:05:31.087

jenkins默认管理员密码登录ubuntu日志文件

日志文件位于 /var/log/jenkins/jenkins.log 文件夹中

密码将在此之后放置，需要 Jenkins 初始设置。已创建管理员用户并生成密码。请使用以下密码继续安装：

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-12-22T12:53:38.663

安装 Jenkins 后，只需运行`sudo cat /var/lib/jenkins/secrets/initialAdminPassword`.

在 Jenkins 登录页面中：

`User: admin Password: the output from the above command`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-09-01T21:31:39.007

在 ubuntu 19.04 上，默认密码存储在主目录中：

```
cat ~/.jenkins/secrets/initialAdminPassword 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-11-14T12:58:54.353

密码存在于 docker run image 生成的日志中，如下例所示。

[Jenkins Docker 运行日志](https://i.stack.imgur.com/gNNm4.png)

此外，您可以在文件名 initialAdminPassword 中检查目录 /var/jenkins_home/secrets/ 它

您可以使用

```
cat /var/jenkins_home/secrets/initialAdminPassword 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-08T10:19:53.027

默认情况下，Jenkins 帐户是在没有密码的情况下创建的，并且登录 shell 为`/bin/false`.

```
jenkins:x:496:493:Jenkins Continuous Integration Server:/var/lib/jenkins:/bin/false 
```

将shell更改为`/bin/bash`，您应该可以在没有密码的情况下登录`sudo su - jenkins`。

更改外壳的命令是：

```
chsh -s /bin/bash jenkin 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-02T16:47:10.137

当您在本地计算机上安装 jenkins 时，默认用户名是 admin，密码会自动填写。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-07-13T09:18:38.990

我正在运行 Jenkins 执行`java -jar jenkins.war`.

就我而言，詹金斯在标准输出中写了 webroot: `webroot: $user.home/.jenkins`。所以管理员密钥被放置在一个`~/.jenkins/secrets/initialAdminPassword`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-05T16:02:13.417

我不相信通过 apt 安装的 Jenkins 用户有密码。如果是这样，我从未见过文档。根据您输入的命令，我猜您使用的是 Debian 发行版？

是否有任何特殊原因必须使用 jenkins 用户而不是创建实例时设置的用户进行安装？

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-03-05T22:04:59.370

您始终可以[禁用 security](https://wiki.jenkins-ci.org/display/JENKINS/Disable+security)，然后进入并使用您想要的设置重新启用它。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-12-28T15:52:02.907

从 AWS Marketplace 安装 Jenkins 时。. .

**“创建了一个默认用户“admin”，其密码为 instance-id，以保护 Jenkins 实例。”**

在 EC2 的 AWS 控制台上，选择实例后，选择“使用说明”选项卡：

主要用于 CloudBees Git Validated Merge Plugin * Jenkins JNLP 10000：来自 Jenkins 代理或配置为使用 JNLP 协议的 Jenkins CLI 的通信。默认情况下不会在安全组上公开。”

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-05-16T21:13:34.307

与上面的 Ubuntu 答案类似，Windows 管理员默认密码存储在*{jenkins install dir}\secrets\initialAdminPassword*文件中（默认安装位置是*C:\Program Files (x86)\Jenkins\secrets\initialAdminPassword*）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-07-19T19:33:12.683

如果你在安装 jenkins 时没有创建新用户，那么：

用户：管理员密码：转到 C:\Program Files (x86)\Jenkins\secrets 并打开文件 initialAdminPassword

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-01-28T06:16:13.520

我是 Mac OS 用户，以下凭据对为我工作：
用户名：**admin**
密码：**admin**

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-06T06:35:02.947

好吧，即使我尝试使用失败的管理员/密码登录。所以我像这样创建了自己的用户。

1.  转到 Jenkins 主文件夹（C:\User.jenkins 或者您可以在 Jenkins 服务器启动日志中找到它）
2.  转到配置文件 config.xml
3.  如果您想禁用登录安全性，请将 disableSignup 设置为 false false 4.将 ser security 设置为 false。真的

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-08-10T12:32:22.017

对我来说，检索管理员通行证的最佳方法是在正在运行的容器中执行 cat 命令。

```
docker exec YOUR_JENKINS_CONTAINER cat /var/jenkins_home/secrets/initialAdminPassword 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-04T12:05:12.970

在 Windows 上，它可以在文件中找到`"C:\Windows\System32\config\systemprofile\AppData\Local\Jenkins\.jenkins\secrets\initialAdminPassword"`

（我知道 OP 指定了 EC2 服务器，但现在这是谷歌搜索 Jenkins 密码时的第一个结果）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-06-04T08:15:48.257

对于 mac 用户：只需运行此命令

```
cat ~/.jenkins/secrets/initialAdminPassword 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-06-23T13:38:30.373

有几个步骤可以遵循：

1.  转到文件夹：**C:\Users\Manjeet\.jenkins**。（在你的情况下，可以是你的系统名称或你的名字而不是我的名字）

2.  使用任何文本编辑器打开**config.xml文件。（推荐 Notepad++）**

3.  转到第 7 行，就像`<useSecurity>true</useSecurity>`.

    所以让它从**true**更改为**false**。

4.  **保存**此文件并**关闭**窗口。

5.  打开**命令提示符**并启动您的 Jenkins 。

    ( **java -jar jenkins.war --httpPort=8085** )。

6.  打开浏览器并在您给定的端口号处搜索您的本地主机。

    （**本地主机：8085**）

7.  您会看到它不再要求输入用户名和密码。现在你必须删除

    现有用户并添加新用户以设置新用户名和密码。

    **创建新管理员的步骤：**

1.转到显示在仪表板下方左侧第二个数字的**人员选项**

2.  单击连续出现的**admin**选项，然后单击**delete**。

3.  转到仪表板，单击**Manage Jenkins**，单击**Configure Global Security**。

4.  **选中启用安全**选项框。

5.  **选中Jenkins 自己的用户数据库**选项框并取消选中**允许用户在**其下方注册。

6\. 选中**登录用户可以做任何事情**选项并取消选中其下方的**允许匿名读取访问。**

7.  将其**保存**，它将为您提供一个用于创建新的第一个用户的新表单。正确填写详细信息并单击**Create First Admin User**。（它会自动对该**config.xml**文件进行更改，只需保存即可。）

**希望对你有帮助**

# asp.net-mvc - MVC 缓存数据库图像

> ID：15227312
> 
> 赞同：6
> 
> 时间：2013-03-05T15:13:37.107
> 
> 标签：asp.net-mvc, caching

我正在使用 MVC 4 创建一个网站。对于项目要求，图像存储在数据库中。我有一个视图，我绑定了模型，其中我有伴随故事的图片的 ID，然后我得到图像：

看法：

```
<img src='<%= Url.Action("ShowImagen", "Home", new {id = item.IdImagen}) %>' style="width: 300px;
                        height: 200px;" /> 
```

控制器：

```
public FileResult ShowImagen(int id)
    {
        if (id > 0)
        {
            var imageData = new NoticiaRepository().GetImagen(id);
            return File(imageData, "image/jpg");
        }
        else
        {
            return null;
        }           
    } 
```

有了这个并使用 Chrome 进行检查，我注意到当我重新加载页面时，它不会从缓存中加载图像，就像其他文件一样 .css 或从文件系统加载的其他图像。

有没有办法让这些图像被缓存？问候和感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T15:17:42.243

您可以使用以下属性装饰您的`ShowImagen`控制器操作：[`[OutputCache]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.108%29.aspx)

```
[OutputCache(Duration = 3600, Location = OutputCacheLocation.Client, VaryByParam = "id")]
public ActionResult ShowImagen(int id)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:17:46.433

你试过用[`OutputCache`](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.100%29.aspx)属性装饰你的动作方法吗？

# string - 在lua中调用string.gsub后如何提取更新的字符串？

> ID：15227313
> 
> 赞同：2
> 
> 时间：2013-03-05T15:13:43.220
> 
> 标签：string, file, lua

**问题描述：**

你好呀。我试图弄清楚如何使用 lua 函数“string.gsub”。我一直在阅读手册，上面写着：

> 这是一个非常强大的功能，可以多种方式使用。简单地使用它可以替换随替换提供的模式的所有实例。返回一对值、修改后的字符串和进行的替换次数。可选的第四个参数 n 可用于限制进行的替换次数：

```
> = string.gsub("Hello banana", "banana", "Lua user")
Hello Lua user  1
> = string.gsub("banana", "a", "A", 2)  -- limit substitutions made to 2
bAnAna  2 
```

## 问题

当它说返回一对值时；如何获取新的字符串值？

## 代码

```
local email_filename = "/var/log/test.txt"
local email_contents_file_exists = function(filename)
     file = io.open(filename, "r")
     if file == nil then
          return false
     else
          file.close(file)
          return true
      end
end
local read_email_contents_file = function()
   print('inside the function')
   if not email_contents_file_exists(email_filename) then 
      return false
   end
   local f = io.open(email_filename, "rb")
   local content = f:read("*all")
   f:close()
   print(content)
   --content = string.gsub(content, '[username]', 'myusername')
   --local tmp {}
   --tmp = string.gsub(content, '[username]', 'myusername')
   print(string.gsub(content, '[username]', 'myusername'))
   return content
end
local test = read_email_contents_file() 
```

**到目前为止我尝试过的：**

正如您在上面看到的，我已经尝试只打印结果。这会返回一堆乱码。尝试保存到原始字符串，我也尝试将结果保存到数组（`local tmp = {}`）

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:17:42.210

```
> = string.gsub('banana', 'a', 'A', 2)
bAnAna  2
> = (string.gsub('banana', 'a', 'A', 2))
bAnAna 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:28:00.780

您需要转义 [ 和 ] 因为它们是 Lua 模式中的魔术字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:30:36.893

你在阅读 Lua 用户 wiki 方面做得很好。

在 Lua 中，当您的函数返回多个值时，您可以按如下方式访问它们

```
function sth()
  return 1, "hi", false
end
x, y, z, a, b, c = sth() -- x = 1; y = "hi" and z = false(boolean); a = b = c = nil 
```

现在，回归`string.gsub`功能。它返回两个值。第一个是处理后的字符串，第二个是`gsub`在输入字符串上执行的时间。

因此，要获得新的字符串值，最好是这样的：

```
local tempString = string.gsub(content, '[username]', 'myusername') 
```

或者

```
local tempString = content:gsub( '[username]', 'myusername' ) 
```

当然，在这里，您需要了解 Lua 中使用的各种模式，这些模式在“Lua[编程”](http://www.lua.org/pil/20.2.html)一书中提到。

# drupal - 视图中的 Drupal Youtube 提要，只有第一个视频有效 - 其余的没有？

> ID：15227315
> 
> 赞同：0
> 
> 时间：2013-03-05T15:13:44.930
> 
> 标签：drupal, youtube-api, drupal-views, drupal-feeds

我正在使用 Feeds 和 Mediafront，以及 Media 模块和 emfield。我将提要导入器设置为在 Youtube RSS 中进行映射，并将 URL 映射到嵌入式媒体字段。然后我创建了一个新视图来显示来自 RSS 的所有视频。但是只有查看页面上的第一个视频可以工作，其余的都是空白的空视频播放器？但是，如果我单击每个标题。视频显示在节点页面上。视图是问题所在。是 DOM 还是视图缓存？为什么只有第一个视频有效？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:59:31.610

我解决了。在 Drupal Views 中，将您的媒体字段设置为名为“渲染文件”的格式化程序，而不是 mediafront 或媒体播放器。然后视图将显示所有 rss 提要和可播放的视频。我还刚刚安装了 jQuery 更新模块。但问题是错误的格式化程序。在 Drupal6 中，我使用的格式化程序是“灯箱视频”。我觉得我必须重新学习 Drupal7 中的所有内容。就像您非常擅长 photohop V6 或 Flash V4 一样。然后他们推出了新版本，我感到很失落！我知道这一切都与改进产品有关，但很难重新学习一种不同的方式来做你习惯做的事情。

# google-chrome - 浏览器插件 w3c 验证器？

> ID：15227317
> 
> 赞同：2
> 
> 时间：2013-03-05T15:13:47.883
> 
> 标签：google-chrome, firefox, w3c, validation

我正在为 google chrome 使用“HTML Validator”，但有时它不起作用，我想知道作为插件来验证我的本地开发站点的最佳选择是什么，该网站在 Internet 上不可用，因此我需要验证浏览器呈现的本地 html...

更新：我已经按照@vacation9 的建议尝试了 Kingsquare HTML 验证器，但我得到： 1 个字节的 UTF-8 解码错误：0xb4 = U+0180lx 第 113 行第 297 列 - 警告：替换无效的 UTF-8 字节（char.代码 U+00B4)

在 ubuntu 中运行的我的 chrome(25.0.1364.97) 版本似乎无法正常工作

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:19:52.390

[Kingsquare HTML 验证器](https://chrome.google.com/webstore/detail/kingsquare-html-validator/anjdemaoejlpgmnmkijdemoiebcddhkc)可能是您最好的选择。安装它，重新加载 Chrome，然后检查元素并转到 HTML 验证器。这可以离线工作，不需要 W3C 服务器。然而，它有点挑剔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T04:19:51.440

HTML Validator 也适用于本地页面...只需使用 Cmd+Shift+A（在 Mac 上）。

以下是插件主页的快捷方式：

Windows/Linux：按 Ctrl + Shift + V 验证页面 按 Ctrl + Shift + A 验证本地页面

Mac：按 Cmd + Shift + V 验证页面 按 Cmd + Shift + A 验证本地页面

# google-maps-api-3 - zoomToAddress 在 Google Fusion Map 上不起作用

> ID：15227318
> 
> 赞同：0
> 
> 时间：2013-03-05T15:13:48.573
> 
> 标签：google-maps-api-3, google-fusion-tables

我从这里关注了搜索和缩放示例：[https ://developers.google.com/fusiontables/docs/samples/search_and_zoom](https://developers.google.com/fusiontables/docs/samples/search_and_zoom)

我已经设法让“重置”按钮工作，但“搜索”按钮不起作用。我想知道是不是因为我使用了 2 层，但如果是这种情况，我不知道如何通过 java 脚本进行更正。任何帮助表示赞赏。谢谢。

```
<html> 
<head>

    <meta charset="UTF-8">
    <title>Smithfield Foods UK</title>
    <link rel="stylesheet" type="text/css" media="all" href="FusionMapTemplate.css" />

    <script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">

        function initialize() {
            var defaultZoom = 10;
            var defaultCenter = new google.maps.LatLng(52.6500, 1.2800)
            var locationColumn = 'geometry'

            var map = new google.maps.Map(document.getElementById('map-canvas'), {
                center: defaultCenter,
                zoom: defaultZoom,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infoWindow = new google.maps.InfoWindow();

            // Initialize the first layer
            var FirstLayer = new google.maps.FusionTablesLayer({
                query: {
                select: 'geometry',
                from: '1hpGzmMBg8bDgPOGrAXvc0_QVLSBqQ0O5vpLbfUE'
                },
                map: map,
                styleId: 3,
                templateId: 5,
                suppressInfoWindows: true
            });
            google.maps.event.addListener(FirstLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });

            // Initialize the second layer
            var SecondLayer = new google.maps.FusionTablesLayer({
                query: {
                    select: 'PostCode',
                    from: '1RrCcRC-1vU0bfHQJTQWqToR-vllSsz9iKnI5WEk'
                },
                map: map,
                styleId: 2,
                templateId: 2,
                suppressInfoWindows: true
            });
            google.maps.event.addListener(SecondLayer, 'click', function(e) {windowControl(e, infoWindow, map);
            });

        var legend = document.createElement('div');
        legend.id = 'legend';
        var content = [];
        content.push('<h3>Density of Polish speaking population</h3>');
        content.push('<p><div class="color red1"></div>=>2%<4%');
        content.push('<p><div class="color red2"></div>=>4%<6%');
        content.push('<p><div class="color red3"></div>=>6%<10%');
        content.push('<p><div class="color red4"></div>=>10%<15%');
        content.push('<p><div class="color red5"></div>=>15%<20%')
        content.push('<p><img src="Smithfield Black.png" alt="Smithfield Logo" width ="120px">');
        legend.innerHTML = content.join('');
        legend.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);

        var legend2 = document.createElement('div');
        legend2.id = 'legend2';
        var content2 = [];
        content2.push("<h3>Smithfield Food's sales in Asda Stores</h3>");
        content2.push('<p><img src="red-dot.png"><£1,000');
        content2.push('<p><img src="yellow-dot.png">=>£1,000<£20,000');
        content2.push('<p><img src="green-dot.png">=>£20,000<£40,000');

        legend2.innerHTML = content2.join('');
        legend2.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legend2);

        var zoomToAddress = function() {
            var address = document.getElementById('address').value;
            geocoder.geocode({
                address: address
            }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    map.setZoom(10);
                } else {
                    window.alert('Address could not be geocoded: ' + status);
                }
            });
        };

        google.maps.event.addDomListener(document.getElementById('search'), 'click', zoomToAddress);
        google.maps.event.addDomListener(window, 'keypress', function(e) {
            if (e.keyCode ==13) {
            zoomToAddress();
        }
        });

        google.maps.event.addDomListener(document.getElementById('reset'), 'click', function() {
            map.setCenter(defaultCenter);
            map.setZoom(defaultZoom);
            layer.setOptions({
                query: {
                    select: 'geometry',
                    from: '1hpGzmMBg8bDgPOGrAXvc0_QVLSBqQ0O5vpLbfUE'
                }
            });
        });

        }

        // Open the info window at the clicked location
        function windowControl(e, infoWindow, map) {
            infoWindow.setOptions({
                content: e.infoWindowHtml,
                position: e.latLng,
                pixelOffset: e.pixelOffset
            });
            infoWindow.open(map);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>

<body>
    <div id="map-canvas"></div>
    <div>
        <label>Enter an address:</label>
        <input type="text" id="address" value="Leeds">
        <input type="button" id="search" value="Search">
        <input type="button" id="reset" value="Reset">
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:36:41.663

我收到“地理编码器未定义”错误”。因为它没有定义。

解决它的一种方法是将其添加到全局范围（就在您的初始化函数之前）：

```
var geocoder = new google.maps.Geocoder(); 
```

或者您可以按照[您使用的示例](https://developers.google.com/fusiontables/docs/samples/search_and_zoom)中的方式进行操作，它位于初始化函数内部。

[工作示例](http://www.geocodezip.com/v3_SO_zoomToAddress.html)

# upload - Tridion 内容管理器中的上传文件夹丢失

> ID：15227319
> 
> 赞同：5
> 
> 时间：2013-03-05T15:13:52.737
> 
> 标签：upload, tridion, tridion-content-manager

在将 tridion 5.2 迁移到 Tridion 2011 SP1 HR1 时，我们注意到 Tridion 2011 内容管理器目录中没有上传文件夹。

Tridion 5.2 的上传文件夹曾经包含所有作为多媒体组件上传的文件，甚至在它们存储在 Tridion 之前。

由于我们的图像裁剪工具使用了这个目录，有没有办法让这个文件夹在 Tridion 2011 中可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:44:27.297

上传目录仍在使用，但出于安全原因，它已移到 Web 应用程序之外（我相信默认为 C:\Temp）。

不过，您可以对其进行配置——它是 System.config 中的 Tridion.UploadDirectory 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:45:56.907

要根据文件数据查找 MIME 类型，请参阅以下帖子：

[使用 .NET，如何根据文件签名而不是扩展名找到文件的 mime 类型](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature)

但是根据在存储库中创建文件之前您想要对文件执行的操作，可能会有更优雅的解决方案，例如事件系统。

# android - 安卓。如何中断拖动？

> ID：15227320
> 
> 赞同：2
> 
> 时间：2013-03-05T15:13:54.223
> 
> 标签：android, drag-and-drop

我正在使用此代码创建拖放：

```
private final class MyTouchListener implements OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {
      if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
        ClipData data = ClipData.newPlainText("", "");

        GlobalTouchX = (int) motionEvent.getX();
        GlobalTouchY = (int) motionEvent.getY();

        shadowBuilder = new MyDragShadowBuilder(view);       

        view.startDrag(data, shadowBuilder, null, 0);

        CurrentDragImage = (ImageView)view;
        view.setVisibility(View.GONE);

        return true;
      } else {
      return false;
      }
    }
  } 
```

如何在不等待放置的情况下中断拖动方法，或者我可以以编程方式调用放置事件？我尝试了很多方法，但没有运气。例如，如果我可以在这里打断它，那就太好了：

```
MainRelative.setOnDragListener(new OnDragListener() {                  
  public boolean onDrag(View v, DragEvent event) {

  int action = event.getAction();

  switch (event.getAction()) {

  case DragEvent.ACTION_DRAG_LOCATION:    

        //!!!!!!!!!!!!!!!
        //HERE I WANT TO INTERRUPT DRAG EVENT ON SOME CONDITION
        //!!!!!!!!!!!!!!!

       break;

  case DragEvent.ACTION_DROP:

       MyOnDrop(v, event, true);                  

       break;
  }

return true;}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:25:02.040

拦截运动的一种方法是覆盖 ViewGroup 类中的 onInterceptTouchEvent(MotionEvent me) 方法，如果您拖动到视图上，则会调用此方法，因此如果您需要拦截，则必须将逻辑放在此方法中.

例如，如果您想使用 FrameLayout 来保存您的子视图。然后，您必须创建一个扩展此 FrameLayout 类的新类并覆盖 onInterceptTouchEvent(MotionEvent me) 方法：

```
class NewFrameLayout extends FrameLayout{

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {

     ///Place your logic here to intercept the dragging event

        /*
         * This method JUST determines whether we want to intercept the motion.
         * If we return true, onMotionEvent will be called and we do the actual
         * work here.
         */

        /*
        * Shortcut the most recurring case: the user is in the dragging
        * state and he is moving his finger.  We want to intercept this
        * motion.
        */
    }
} 
```

# asp.net - 503 - 服务器不可用 - .Net 2.0 和 4.0 冲突

> ID：15227321
> 
> 赞同：4
> 
> 时间：2013-03-05T15:13:55.310
> 
> 标签：asp.net, .net, iis, iis-6

我们的服务器运行的是 Windows Server 2003。我们已经在 IIS 中更新了我们网站的 .Net 版本以使用 4.0。随机时间，每周 1-2 次，因为更改发生，触发快速失败，站点因 503 错误而被关闭。

应用程序日志显示了一系列触发快速失败触发器的错误。每组有两个错误，最多 10 个快速失败触发器。错误是：

> 上午 1:27:21
> **.NET 运行时 4.0 错误**
> EventType clr20r3、P1 w3wp.exe、P2 6.0.3790.3959、P3 45d6968e、P4 app_code.xqrjkjyl、P5 0.0.0.0、P6 51345a6b、P7 252、P8 0、P9 system.stackoverflowexception , P10 无。
> 
> 上午 1:27:11
> **.NET 运行时**
> 应用程序：w3wp.exe
> 框架版本：v4.0.30319
> 描述：该进程因堆栈溢出而终止。

请注意，4.0 错误出现在未命名的 .Net 错误之后 10 秒。我相信未指定的 .net 版本错误是针对我们从旧的 2.0 框架迁移而来的。

在 IIS6 中，处理程序设置为使用 4.0。我们在主站点下也有几个应用程序池。所有这些的 web.config 文件都指定 4.0 作为要使用的框架：

```
<compilation debug="false" targetFramework="4.0">
<assemblies>
<add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
<add assembly="System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
<!--<add assembly="System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>-->
</assemblies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:19:36.780

您可以尝试使用 iisstate( [http://www.iisfaq.com/?View=P197](http://www.iisfaq.com/?View=P197) ) 或 iis 调试诊断 ( [http://blogs.msdn.com/ b/tess/archive/2008/05/21/debugdiag-1-1-or-windbg-which-one-should-i-use-and-how-do-i-gather-memory-dumps.aspx](http://blogs.msdn.com/b/tess/archive/2008/05/21/debugdiag-1-1-or-windbg-which-one-should-i-use-and-how-do-i-gather-memory-dumps.aspx)）。

使用转储，您可以分析它 (Windbg) 并了解它引发此异常的位置。

还可以看看这个[Getting IIS Worker Process Crash dumps](https://stackoverflow.com/questions/53435/getting-iis-worker-process-crash-dumps)

干杯

# android - 运行时无命令输出：'am start -n

> ID：15227324
> 
> 赞同：7
> 
> 时间：2013-03-05T15:13:59.127
> 
> 标签：android, eclipse, debugging, adt

最近，当我尝试在我的设备上运行我的 Android 应用程序时，我必须在它实际启动之前从 Eclipse 运行它几次。

我尝试重新安装 JRE、JDK 和 IDE，并尝试切换工作区。我还让 Eclipse 为 Java VM 使用更多 RAM。

我的 IDE、JRE、JDK、ADT 和 ADT 插件都是最新的。

对此的任何建议都非常感谢。

> 运行时无命令输出：'am start -n com.example.abstab/com.example.abstab.ActivityMain -a android.intent.action.MAIN -c android.intent.category.LAUNCHER'​​ on device HT15CV805781

异常堆栈跟踪：

```
com.android.ddmlib.ShellCommandUnresponsiveException
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:408)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:453)
    at com.android.ide.eclipse.adt.internal.launch.ActivityLaunchAction.doLaunchAction(ActivityLaunchAction.java:67)
    at com.android.ide.eclipse.adt.internal.launch.ActivityLaunchAction.doLaunchAction(ActivityLaunchAction.java:109)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.doLaunchAction(AndroidLaunchController.java:1277)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.doLaunchAction(AndroidLaunchController.java:1289)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.launchApp(AndroidLaunchController.java:1261)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.simpleLaunch(AndroidLaunchController.java:906)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.continueLaunch(AndroidLaunchController.java:748)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.launch(AndroidLaunchController.java:640)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.doLaunch(LaunchConfigDelegate.java:322)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:238)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

会话数据：

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_15
java.vendor=Oracle Corporation
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/myname/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -keyring /Users/myname/.eclipse_keyring -showlocation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T13:08:58.227

试试这个命令：

```
adb.exe kill-server
adb.exe start-server
adb.exe shell am start -n com.example.abstab/.ActivityMain 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T17:39:15.203

> 'am start -n com.example.abstab/com.example.abstab.ActivityMain -a android.intent.action.MAIN -c android.intent.category.LAUNCHER'​​ 在设备 HT15CV805781

**HT15CV805781**设备可能有问题

> 在 com.android.ddmlib.Device.executeShellCommand(Device.java:453)

该异常行表明您的应用程序无法在设备中执行。

重新启动设备有时可能会有所帮助，或者重新启动 adb bridge 的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T14:34:21.623

我大多数时候都遇到过同样的情况，当我重新启动[ADB](http://developer.android.com/tools/help/adb.html)服务器时它会起作用。大多数时候，ADB 陷入了一种困境（特别是当模拟器重新启动时），我不得不手动重新启动它，例如：

```
adb kill-server
adb start 
```

使用上述命令重启ADB后，Eclipse Android运行非常稳定。

# collections - TFS 2012（云）：添加新集合

> ID：15227336
> 
> 赞同：4
> 
> 时间：2013-03-05T15:14:31.043
> 
> 标签：collections, tfs, visual-studio-2012, azure-devops

我们只是在尝试新的 Team Foundation Service，我们希望将我们的数据迁移到它。在我们旧的（本地服务器）安装的 TFS2010 中，我们有几个集合。但是我们找不到在Service接口中添加集合的方法。

有没有可能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:45:07.167

这在 Team Foundation Service 中目前是不可能的。

UserVoice 中有此功能的请求。去投票，以帮助它得到优先考虑。

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3473653-let-us-create-multiple-collections-on-team-foundat](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3473653-let-us-create-multiple-collections-on-team-foundat)

# jquery - jquery ajax成功多种功能

> ID：15227337
> 
> 赞同：0
> 
> 时间：2013-03-05T15:14:32.713
> 
> 标签：jquery

我正在使用 ajax 在 DOM 中加载图像。

加载数据后，如果成功，我将调用为页面创建 html 的函数，包括刚从 ajax 调用中引入的图像。

我想要做的是延迟加载图像，但无法弄清楚我需要在哪里添加代码以将图像绑定到延迟加载

这是成功调用下一个函数的ajax代码

```
$.ajax({
        url: apiURL,
        dataType: 'json',
        data: {page: page}, 
        success:onLoadData
    }); 
```

这是我需要添加的延迟加载功能，但在哪里？

```
function(data) {
    $("img.lazy").lazyload({
        effect: "fadeIn"
    });
} 
```

# c# - 使用实体框架删除项目

> ID：15227339
> 
> 赞同：19
> 
> 时间：2013-03-05T15:14:43.913
> 
> 标签：c#, linq, entity-framework

我正在尝试使用实体框架删除一个对象，在互联网上的所有教程中，我发现为了做到这一点，您必须`DeleteObject`在上下文中调用该方法。我试过这样做，但似乎我没有`DeleteObject`方法。

这是我的代码：

```
public void DeleteBook(int bookId)
    {
        Book book = (Book)bookContext.Books.Where(b => b.Id == bookId).First();
        bookContext.DeleteObject(book);
    } 
```

这是我得到的错误：

> *“DataAccess.Models.BooksEntities”不包含“DeleteObject”的定义，并且找不到接受“DataAccess.Models.BooksEntities”类型的第一个参数的扩展方法“DeleteObject”（您是否缺少 using 指令或程序集引用?)*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-05T15:17:57.783

您使用的是 DbContext 还是 ObjectContext？如果您有 DbContext，则需要使用[Remove](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)函数：

```
public void DeleteBook(int bookId)
    {
        Book book = (Book)bookContext.Books.Where(b => b.Id == bookId).First();
        bookContext.Books.Remove(book);
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-08T15:04:08.843

**通过更改状态删除实体而不检索它的可能解决方案**

DbContext 具有称为 Entry 和 Entry 的方法，这些方法获取给定实体的 DbEntityEntry 并提供对有关实体的信息的访问，并返回能够对实体执行操作的 DbEntityEntry 对象。现在我们可以通过将实体状态更改为 EntityState.Deleted 来对上下文执行删除操作。

```
 using (Entities Context = new Entities())  
 {  
    Book  deptBook  = new Book  { Id  = bookId };  
    Context.Entry(deptBook).State = EntityState.Deleted;  
    Context.SaveChanges();  
 } 
```

# php - 记住我的 cookie，需要会话 cookie 吗？

> ID：15227341
> 
> 赞同：4
> 
> 时间：2013-03-05T15:14:44.577
> 
> 标签：php, session, cookies, security

当用户登录到我的网站时，它会创建 2 个 cookie，一个带有会话 ID（与后端的用户 ID 相关），另一个是持续 3 个月的记住我的 cookie。

记住我 cookie 的构造如下：

```
userid:timeout:hash 
```

其中哈希是 HMAC SHA256 哈希，`userid:timeout`以防止篡改。

如果会话 ID 不存在（用户关闭浏览器并再次打开，cookie 消失了，或者会话 ID 在 memcached 中不存在），它会查看记忆 cookie 并重新生成一个新的会话 cookie，前提是它有没有超时并且哈希是正确的。

但是，我根本看不到拥有会话 cookie 的意义，因为会话 ID 只是指向后端中的用户 ID。我可以使用记住我的 cookie 来检索当前用户。

所以我正在考虑完全取消会话cookie，并且有兴趣听到一些关于此的想法。这种方法听起来相对安全吗？我可以让它变得更好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:55:24.087

是的，在大多数情况下它确实足够安全，但是为什么在可以避免的情况下在 cookie 中包含用户特定数据呢？此外，这样做还有一个小缺点：

如果用户设法从另一个用户那里窃取 cookie，会发生什么情况，您必须更改生成 cookie 的整个方式，否则该用户将始终有权访问，因此重置每个人的 cookie。现在想象一下，被偷的是你的饼干......

这是我的解决方案：在名为“userhash”的用户表中创建另一行。当用户登录时，您会生成一个随机散列，而不需要他的任何输入，只是随机的，并将其存储在表和 cookie 中。然后你只需要存储`userhash:timeout`在cookie中。您检查数据库以查看它是否存在，如果存在，那就是您的用户。当用户注销时，cookie 和数据库中的行被删除。出于显而易见的原因，您必须在比较之前检查 cookie 是否存在（会有很多空的）。

注意：此方法一次只允许一个注册的 cookie，因此不能使用笔记本电脑 + 台式机。这很好，因为窃取变得更加困难，因为它只持续到真实用户不登录的情况下，而不好的是因为它只允许一台计算机。但是您会看到这个想法以及如何使用此方法，但要让多台计算机登录...类似于 facebook。

PD，如果您说您的应用程序实际上必须有多安全，那就太好了...

PD2，如果您还没有考虑过，还有其他更严重的安全问题（比如说 SSL）。

# java - 没有为所有 bean 调用 Spring BeanPostProcessor？

> ID：15227346
> 
> 赞同：2
> 
> 时间：2013-03-05T15:14:58.383
> 
> 标签：java, spring

在导入的 spring 上下文 XML 文件中，我定义了一个实现`BeanPostProcessor`.

在导入 spring 上下文中，我定义了许多 bean（`BeanDefinitionBuilder`在 custom 中使用`BeanDefinitionParser`）。

并非所有定义的 bean 都提供给`postProcessBeforeInitialization()`my 上的方法`BeanPostProcessor`。

似乎其他一些`FactoryBeans`因素会影响这种情况。当`ApplicationContext`使用调试器查看实例时，我可以看到里面的所有 bean - 也包括那些没有提供给`BeanPostProcessor`.

这怎么可能发生？

# c++ - 如何从 Visual Studio 2012 中的 directory_iterator 获取绝对路径

> ID：15227348
> 
> 赞同：2
> 
> 时间：2013-03-05T15:15:00.083
> 
> 标签：c++, visual-c++, visual-studio-2012, c++11, filesystems

`directory_iterator`我正在尝试从Visual Studio 2012 中获取绝对路径。在早期版本的 Boost 库中可以使用`native_file_string()`. 现在没有可用的函数成员返回绝对路径。我最终不得不将目录路径与文件名结合起来：

```
string         filePath = "C:\\Eigen\\CMakeLists.txt";
string         prefix   = path (filePath).parent_path().string() + "/";
vector<string> fullPaths;  // Full paths of all files in directory.

for (auto i = directory_iterator (path (filePath).branch_path()); i != directory_iterator(); ++i) 
    fullPaths.push_back (prefix + i->path().string()); 
```

有没有办法让目录迭代器能够返回完整路径？在上面的循环中，我尝试了：

```
auto s1 = i->path().branch_path();
auto s2 = i->path().directory_string();
auto s4 = i->path().file_string();
auto s5 = i->path().root_path();
auto s6 = i->path().parent_path();
auto s7 = i->path().string();
auto s8 = i->path().basename();
auto s9 = i->path().filename();
auto sa = i->path().root_name();
auto sb = i->path().relative_path(); 
```

并且它们都没有返回完整路径。

**编辑：**我注意到使用`recursive_directory_iterator`而不是`directory_iterator`会产生完整的（绝对）路径。这是设计使然吗？如果我不想要递归迭代怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:49:36.380

您可能正在寻找[`absolute()`](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#absolute)，这是一个非成员函数。

# html - 土耳其语字符未显示在 html 表单占位符中

> ID：15227349
> 
> 赞同：2
> 
> 时间：2013-03-05T15:15:00.550
> 
> 标签：html, css, forms, placeholder, turkish

在我的表单中，我想为我的文本区域使用占位符文本。它工作正常，除了没有土耳其字符。

```
<form action="http://localhost:8082/kaybeden/index.php/details/newcomment" method="post" accept-charset="utf-8" class="form-horizontal">
<div class="control-group">
  <div class="controls">
    <textarea name="comment_body" cols="150" rows="10" id="comment_body" placeholder="yazd���n yorum zeka bar�nd�rs�n." ></textarea>
  </div>
</div>
<div class="control-group">
  <div class="controls">
    <input type="submit" name="submit" value="Yolla" class="btn" />
  </div>
</div> 
```

“yazd���n yorum zeka bar�nd�rs�n”字符串是输出，通常应该是“yazdığın yorum zeka barındırsın.”。我的 HTML 字符集是 UTF-8。除占位符外，所有土耳其字符都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:19:06.917

这

> placeholder="yazd...n yorum zeka bar.nd.rs.n."

表示在 UTF-8 上下文中输入的非 UTF-8 字符。

确保在您的文本编辑器或 IDE 中您的 HTML 文件是正确的 UTF-8 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:20:26.133

使用 HTML 实体代码（在网站上称为数字代码）而不是真实字符。[你可以在这里](http://webdesign.about.com/od/localization/l/blhtmlcodes-tr.htm)找到一张桌子

例如：

`<input type="text" placeholder="Kushadas&#305;"/>`

# javascript - 具有最小可能宽度的全高内容

> ID：15227350
> 
> 赞同：8
> 
> 时间：2013-03-05T15:15:07.063
> 
> 标签：javascript, jquery, html, css

我永远不会认为这是可能的，但是这里有很多聪明的人，所以我想我会问。我正在寻找一种方法来拥有一个全高容器，其宽度取决于有多少内容。我希望文本填充占据整个高度的区域，同时使用尽可能小的宽度。高度是已知的并且是硬编码的，内容的数量不是。

我正在处理[这样的事情](http://jsfiddle.net/RwczR/)：

```
<div>
    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
    Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
    when an unknown printer took a galley of type and scrambled....</p>
</div> 
```

```
div {
    background:red url(http://lorempixel.com/600/400/);
    float:left;
    width:600px;
    height:400px;
}
p {
    background:#fff;
    padding:20px;
    margin:20px;
} 
```

通常内容从上到下填充页面：

![在此处输入图像描述](../Images/1ce877840e50f36c19518d010dfd926d.png)

我正在寻找的是相反的，从左到右填写：

![在此处输入图像描述](../Images/2d41f4ec27a6bac0c7861ad61e4f716d.png)

如果内容较少，它应该如下所示：

![在此处输入图像描述](../Images/abcdbf294f28856f96d4b2fbec23a99a.png)

使用完整的硬编码高度`width:auto`产生这种效果：

![在此处输入图像描述](../Images/93fe7fbef0f8b573c36edf5403c3d6d3.png)

有没有办法让文本以尽可能小的宽度填充高度，而无需硬编码宽度或文本溢出？这似乎是不可能的，我不知道如何处理它。欢迎使用 Javascript/jQuery 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:29:26.153

我想到的是一个简单的 jQuery 解决方案：在 while 循环中，设置条件使得只要高度超过容器高度，循环就会运行。在循环中，您`<p>`逐像素增加宽度，直到高度不再超过容器高度:)

```
$(document).ready(function() {
    // The 400-80 is because you have to subtract the container padding and the element's own padding
    while($("div > p").height() > 400 - 80) {
        currentWidth = $("div > p").width();
        $("div > p").width(currentWidth + 1);    
    }
}); 
```

[http://jsfiddle.net/teddyrised/RwczR/4/](http://jsfiddle.net/teddyrised/RwczR/4/)

我也对您的 CSS 进行了一些更改：

```
div {
    background:red url(http://lorempixel.com/600/400/);
    float:left;
    overflow: hidden;
    width:600px;
    height:400px;
    padding: 20px;
    box-sizing: border-box;
}
p {
    background:#fff;
    padding: 20px;
    width: 1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:29:24.797

这对 JavaScript 来说并不*难*。我不知道如何在没有 JS 的情况下做到这一点（如果可能的话）。

您可以使用另一个“不可见” div 来测量尺寸，直到它达到 320 像素的高度，同时将其减少一定的量（如果您想尽可能精确的话，一次甚至可以减少 1 个像素）。

```
var $measurer = $("<div>").css({'position': 'fixed', 'top': '100%'})
    .text($("p").text()).appendTo('body');

var escape = 0;
while ($measurer.height() < 320) {
    console.log($measurer.height());
    $measurer.width(function (_, width) { return width - 1; });
    console.log($measurer.width());
    escape++;
    if (escape > 2000) {
        break;
    }
}
$("p").width($measurer.width());
$measurer.remove(); 
```

[http://jsfiddle.net/RwczR/2/](http://jsfiddle.net/RwczR/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:40:43.400

试试这个：

```
var p = $('p');
var height = parseInt(p.height())-40;
p.height('auto');
p.width('auto');
for(var i=p.width(); i--; ) {
    p.width(i);
    if (p.height() > height) {
        p.height(height+20);
        p.width(i-1);
        break;
    }
}
p.height(height); 
```

[http://jsfiddle.net/RwczR/6/](http://jsfiddle.net/RwczR/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:44:42.877

您可以使用 jQuery/JavaScript 并检查客户端与滚动高度不断增加宽度直到它适合文本，类似于下面。

您还需要在标签`overflow: hidden;`上的 CSS 中进行设置，以便为您提供包括溢出在内的实际高度。`p``scrollHeight`

下面的代码还同时考虑了边距和填充；高度和宽度并相应调整。

相应地更改外部 div ajdust 的高度。

```
$(document).ready(function(){
    var $container = $("div");
    var containerHeight = $container.height();
    var containerWidth = $container.width();

    var $textWrapper = $(">p", $container);

    var paddingMarginHeight = $textWrapper.outerHeight(true) - $textWrapper.innerHeight();
    var paddingMarginWidth = $textWrapper.outerWidth(true) - $textWrapper.innerWidth();

    $textWrapper.innerHeight(containerHeight - paddingMarginHeight);

    //SetMinWidth();
    var maxWidth = containerWidth - paddingMarginWidth;
    var visibleHeight = 0;
    var actualHeight = 0;

    for(i = 50; i <= maxWidth; i++){
        $textWrapper.innerWidth(i);

        visibleHeight = $textWrapper[0].clientHeight;
        actualHeight = $textWrapper[0].scrollHeight;

        if(visibleHeight >= actualHeight){
            break;
            console.log("ouyt");
        }
    }
}); 
```

* * *

[**演示**](http://jsfiddle.net/eFsAW/)- 增加宽度直到文本完全可见

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:44:36.580

我们可以给段落一个`overflow:auto;`.

如果段落需要一个垂直滚动条，它将创建一个。

诀窍是不断收紧宽度，直到创建滚动条。

```
var hasScrollBar = false;
var p = document.getElementById('myParagraph');
while(!hasScrollBar)
{
    if(p.scrollHeight>p.clientHeight)
    {
        //Has Scroll Bar
        //Re-Increase Width by 1 Pixel
        hasScrollBar=true;
        p.style.width=(p.clientWidth+1)+"px";
    }
    else
    {
       //Still no Scroll Bar
       //Decrease Width
       p.style.width=(p.clientWidth-1)+"px";
    }
} 
```

# java - javafx 手风琴变化监听器

> ID：15227351
> 
> 赞同：0
> 
> 时间：2013-03-05T15:15:14.400
> 
> 标签：java, javafx

在 javafx scenebuilder 中，我创建了手风琴。在 netbeans 中，我想将 changelistener 添加到手风琴的标题窗格中。我想在单击标题窗格时显示一条消息。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:02:04.290

要在有人单击 titledpane 时显示消息，只需在 TitiledPane 的鼠标单击事件上实现

![在此处输入图像描述](../Images/ee9961146f6d327babb6e1744c877927.png)

在 Controller 类中实现该方法

```
 @FXML
    private void TitledPaneClick(MouseEvent event) {
        System.out.println("Mouse clicked");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:15:29.017

而且我也尝试过这种方式来获得它。

```
EventHandler<MouseEvent> mousehandler = new EventHandler<MouseEvent>() {
    @Override
public void handle(MouseEvent mouseEvent) {
        System.out.println("hi");}
};
titledpaneName.setOnMouseClicked(mousehandler); 
```

titledpaneName 是手风琴中标题窗格的名称。上面的代码在单击手风琴的标题窗格时打印 hi。

# c# - 检索具有特定电子邮件地址的用户

> ID：15227357
> 
> 赞同：0
> 
> 时间：2013-03-05T15:15:31.853
> 
> 标签：c#, asp.net, asp.net-membership

我正在尝试找到最有效的方法来检索具有相同电子邮件地址的用户列表。

我的第一种方法非常简单：

```
MembershipUserCollection users = Membership.GetAllUsers(); 
```

一旦我收集了我的收藏，`users`我就可以遍历列表并确保电子邮件地址匹配以执行进一步的逻辑。

我担心的是用户列表会增长到逻辑时间过长的水平。

我的第二种方法是结合`Linq`检索用户名（在本例中是电子邮件地址）所在的用户，这样我就不会遍历每个用户。

```
MembershipUserCollection userlist = (from user in Membership.GetAllUsers()
                                     where user.UserName == emailAddress
                                     select user).ToList(); 
```

我在上面得到的错误是：找不到源类型“System.Web.Security.MembershipUserCollection”的查询模式的实现。'哪里' 没有找到。考虑明确指定范围变量“用户”的类型。

有人可以帮助我最有效地检索具有匹配电子邮件地址的用户列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:18:10.457

关于什么：

```
Membership.FindUsersByEmail() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:18:31.560

采用

```
Membership.FindUsersByEmail("blah@yahoo.com"); 
```

您还可以将成员表添加到您的数据模型中，并像任何其他模型一样查询它们。

# javascript - div 位置 + 运算符无法按预期工作

> ID：15227358
> 
> 赞同：3
> 
> 时间：2013-03-05T15:15:33.470
> 
> 标签：javascript, css

这是怎么回事：

```
newDiv.style.top = topBar.style.height.split("px")[0]+"px";
->>><div style="top: 30.31px;" class="lineSeparator"></div> 
```

这也有效

```
newDiv.style.top = topBar.style.height.split("px")[0]-2+"px";
->>><div style="top: 28.31px;" class="lineSeparator"></div> 
```

这也有效

```
newDiv.style.top = topBar.style.height.split("px")[0]/2+"px";
->>><div style="top: 15.15px;" class="lineSeparator"></div> 
```

**但这不起作用：**

```
newDiv.style.top = topBar.style.height.split("px")[0]+2+"px";
->>><div style="top: 30.31px;" class="lineSeparator"></div> 
```

我也试过：

```
newDiv.style.top = (topBar.style.height.split("px")[0]+2)+"px"; 
```

这是我的完整代码：

```
function generateSeparators(n){
    for(var i=0;i<n;i++){
        var newDiv=document.createElement("div");
        newDiv.style.top = topBar.style.height.split("px")[0]+"px";
        newDiv.className = "lineSeparator";
        sideBar.appendChild(newDiv);

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T15:17:18.420

与and不同， `+`Javascript 中的运算符也执行字符串连接。您必须首先将您的第一个字符串操作数强制为一个数字。否则“字符串”部分将压倒“数字”部分。例如：`/``-`

```
"3" + 2 --> "32" 
```

这将是修复代码的一种方法：

```
newDiv.style.top = ((+topBar.style.height.split("px")[0])+2)+"px"; 
```

这可能是一种更好、更清晰的方法：

```
newDiv.style.top = (parseInt(topBar.style.height.split("px")[0], 10) + 2) + "px"; 
```

（parseInt 的 10 参数意味着将字符串解释为以 10 为底的数字。有关更多信息，请参阅文档：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt ）

# powershell - 从批处理文件调用powershell脚本时执行策略错误，powershell v 1.0

> ID：15227361
> 
> 赞同：0
> 
> 时间：2013-03-05T15:15:56.830
> 
> 标签：powershell, batch-file

我创建了一个 PowerShell 脚本来从子文件夹中获取文件。这在我手动输入后从 PowerShell 控制台运行时执行`Set-ExecutionPolicy unrestricted`，但是当我从批处理文件中调用相同的脚本时

```
C:\Windows\System32\WindowsPowerShell\v1.0\PowerShell.exe D:\programs\abc\bin\xyz_clean.ps1 
```

它抛出一个错误：

> 无法加载 xyz_clean.ps1，因为在此系统上禁用了脚本的执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:39:59.350

您可以从命令窗口调用 powershell：

```
C:\> powershell /?
C:\> powershell -executionpolicy unrestricted -file \\server\file.ps1 
```

然后将其保存到 .bat 文件中：

```
C:\> echo powershell -executionpolicy unrestricted -file \\server\file.ps1 > file.bat 
```

# static-libraries - 如何在进程启动期间从静态库初始化 posix 信号量？

> ID：15227364
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:03.103
> 
> 标签：static-libraries, semaphore

我有一个定义信号量的静态库。信号量需要在对库的任何调用之前初始化（因为它可以被来自同一进程的多个线程安全地使用）。

因此，我想在进程启动期间初始化（例如通过运行 sem_init）库的信号量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:13:14.597

```
// This seems to solve the problem. Init(void) will run before main()

void Init(void) __attribute__((constructor));
void Init(void) // This will always run before main()
{
    printf("HSA LIB Init\n");
    sem_init (&HSA_lib.semaphore, 0, 1);
} 
```

# aptana - 与主机 Aptana 失去连接

> ID：15227367
> 
> 赞同：1
> 
> 时间：2013-03-05T15:16:12.347
> 
> 标签：aptana, host

我正在使用 Aptana 3 在小组项目中构建网站。昨晚我完成了创建功能登录页面的任务，检查了几次以确保它正常工作，保存了我的工作，关闭了 Aptana。今天早上醒来，我又去查看我的登录页面，那里什么也没有。只是一个空白的白色屏幕。在包含整个网站的文件夹 Advanced Web Applications 下的 Aptana 中，文件夹图标上有一个红色的小“X”。当我打开文件夹并检查所有其他文件夹和文件时，没有错误。有谁知道如何解决这一问题？或者可能是什么问题？提前致谢。

# c++ - VS 2010 中的 Lambda 表达式，而不是 gcc

> ID：15227371
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:24.853
> 
> 标签：c++, visual-studio-2010, lambda

我正在尝试在 VS 2010 中编译可以在 gcc 中编译和工作的代码，但是在 lambda 表达式上出现了一个奇怪的错误：

```
 std::function<double (size_t level, size_t q)> doLevel = [&](size_t level, size_t q)
   {  //line 52
       double thisLevelP = density(q, data[level]);
       if(level==T-1) return thisLevelP;
       if(level==t-1) return  thisLevelP*A(q,state)*doLevel(level+1,state);
       double continuation = 0.0;
       for(size_t i=0; i<Q; ++i)
       {
           continuation += A(q, i)*doLevel(level+1, i);
       }
       return thisLevelP*continuation;
   }; 
```

错误是：

```
Error   1   error C2086: 'size_t &_T' : redefinition    c:\users\ga1009\documents\phd\cpp\pmi\cpp\test\baumiterationtest.cpp    52
Error   2   error C2661: '`anonymous-namespace'::`anonymous-namespace'::<lambda1>::<lambda1>' : no overloaded function takes 8 arguments    c:\users\ga1009\documents\phd\cpp\pmi\cpp\test\baumiterationtest.cpp    52 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:45:29.087

正如 chris 在上面的评论中看到的那样，具有多个 return 语句的 lambdas 需要一个可以像这样声明的显式返回类型`->double`。

更重要的是，尽管有问题的行是`t`被 lambda 捕获的命名变量。我最初虽然这是一个名称冲突，但正如 STL 正确指出的那样，除了一个是大写字母外，任何两个相同的名称都会发生这种情况。这是一个已知的编译器错误，已在最新版本中修复。

```
double density(std::size_t, int)
{
    return 0;
}
double A(std::size_t, int)
{
    return 0;
}
int main(int argc, char *argv[])
{
    int data[] = {1,2,3};
    std::size_t T = 1;
    std::size_t t = 2;   //<<<<< change this name and it compiles
    std::size_t state = 3;
    std::size_t Q = 4;
    std::function<double (int,int)> doLevel = [&](int level, int q)->double
   { 
       double thisLevelP = density(q, data[level]);
      if(level==T-1) 
           return thisLevelP;
      if(level==t-1) 
           return  thisLevelP*A(q,state)*doLevel(level+1,state);
       double continuation = 0.0;
       for(size_t i=0; i<Q; ++i)
       {
           continuation += A(q, i)*doLevel(level+1, i);
       }
       return thisLevelP*continuation;
   };
} 
```

# android - OpenGL ES 2.0 1 仅使用最后绑定的纹理

> ID：15227372
> 
> 赞同：3
> 
> 时间：2013-03-05T15:16:25.963
> 
> 标签：android, object, opengl-es-2.0, textures, point

请参阅最后的编辑以了解进度。

我正在尝试学习 OpenGL ES 2.0（我将在 Android 设备上进行开发）

我对顶点和片段着色器有点困惑。我理解他们的目的，但是如果我从自定义构建的类（比如“点”）构建形状并设置它的大小和颜色或应用纹理并假设两个着色器最初是在对象类的构造函数中声明和定义的，这是否意味着该类的每个实例都有自己的一对着色器？

这是我的第一个问题。我的第二个问题是，如果是这种情况（每个对象的着色器对）............这是要走的路吗？我听说拥有一对着色器并切换它的参数并不是一个好主意，因为性能原因，但如果我有 100 个大小和颜色（或纹理）相同的精灵，那么让它们都有一个具有完全相同参数的不同着色器对？

我希望我问的是正确的问题，我研究 ES 2.0 的时间不长，所以觉得它有点混乱。我目前对OpenGL的了解有限！

编辑

根据要求添加代码。

```
public class Dot {

    int iProgId;
    int iPosition;
    float size = 10;
    FloatBuffer vertexBuf;
    float r = 1f;
    float g = 1f;
    float b = 1f;
    float a = 1f;
    int iBaseMap;
    int texID; 
    Bitmap imgTexture;

    //Constructor
    public Dot() {

        float[] vertices = {
                        0,0,0f              
                        };

    //Create vertex shader
    String strVShader =  
              "attribute vec4 a_position;\n"+
              "void main()\n" +
              "{\n" +
              "gl_PointSize = " +size+ ";\n" +
              "gl_Position = a_position;\n"+                 
              "}";

    //Create fragment shader
    String strFShader = 
              "precision mediump float;" +
              "void main() " +
              "{" +
              "gl_FragColor = vec4(0,0,0,1);" +
              "}";
              iProgId = Utils.LoadProgram(strVShader, strFShader);
              iPosition = GLES20.glGetAttribLocation(iProgId, "a_position");

                  vertexBuf = ByteBuffer.allocateDirect(vertices.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();

                  vertexBuf.put(vertices).position(0);

        } 
```

我的 setTexture 方法

```
public void setTexture(GLSurfaceView view, Bitmap imgTexture){
    this.imgTexture=imgTexture;

    //Create vertex shader
    String strVShader =  
            "attribute vec4 a_position;\n"+
            "void main()\n" +
            "{\n" +
            "gl_PointSize = " +size+ ";\n" +
            "gl_Position = a_position;\n"+                 
            "}";

    //Fragment shader
    String strFShader =
            "precision mediump float;" +
            "uniform sampler2D u_baseMap;" +
            "void main()" +
            "{" +
            "vec4 color;" +
            "color = texture2D(u_baseMap, gl_PointCoord);" +
            "gl_FragColor = color;" +
            "}";

    iProgId = Utils.LoadProgram(strVShader, strFShader);
    iBaseMap = GLES20.glGetUniformLocation(iProgId, "u_baseMap");

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glUniform1i(iBaseMap, 0);

    texID = Utils.LoadTexture(view, imgTexture);  //See code below
} 
```

`Utils`我班级的 LoadTexture() 方法：

```
public static int LoadTexture(GLSurfaceView view, Bitmap imgTex) {
    int textures[] = new int[1];
    try {
        GLES20.glGenTextures(1, textures, 0);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER,GLES20.GL_LINEAR);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,GLES20.GL_LINEAR);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, imgTex, 0);
    } catch
    }
    return textures[0];
} 
```

最后是我的绘图方法：

```
public void drawDot(float x, float y){

        float[] vertices = {
                x,y,0f              
                };

         vertexBuf = ByteBuffer.allocateDirect(vertices.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
         vertexBuf.put(vertices).position(0);
        GLES20.glUseProgram(iProgId);
        GLES20.glVertexAttribPointer(iPosition, 3, GLES20.GL_FLOAT, false, 0, vertexBuf);
        GLES20.glEnableVertexAttribArray(iPosition);
        GLES20.glDrawArrays(GLES20.GL_POINTS, 0, 1);
    } 
```

所以我可以创造这样的东西：

```
Dot dot1 = new Dot();
dot1.setSize(40);
setTexture(myBitmap); //(created earlier with BitmapFactory)
drawDot(0,0); 
```

谢谢！

编辑1：感谢您到目前为止的回答。在进一步的研究中，似乎其他一些人也遇到了同样的问题。问题似乎是我没有在我的渲染例程中调用 glBindTexture，因此 OpenGL 只是使用它加载的最后一个纹理，我想这是有道理的。

如果我将以下内容放入我的渲染例程中：

```
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 1); 
```

它将应用第一个位图并显示它

如果我说：

```
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 2); 
```

它将应用第二个位图并显示它

所以，找个地方！但是我现在的问题是如何让我的渲染方法根据调用它的对象（渲染例程）自动知道要使用哪个位图？

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:58:19.080

**它是如何工作的（简要）**

着色器只是在显卡中运行的程序。您编译并链接它们，然后您可以将一些变量传递给它们以修改顶点和片段的属性。这意味着当您调用某些绘图函数时，例如 glDrawElements 或 glDrawArrays，顶点数据（这意味着位置、纹理坐标、法线、颜色等，取决于您要发送的内容）将被发送到管道。这意味着当前加载的顶点着色器将一一获取顶点并运行其代码以应用所需的任何转换。之后，OpenGL 将应用光栅化来为当前帧生成片段。然后片段着色器将获取每个片段并相应地对其进行修改。

您始终可以卸载着色器并加载不同的着色器。如果您需要为不同的对象使用不同的着色器，您可以根据对象的着色器对对象进行分组并独立渲染它们，同时为每个组重新加载相应的着色器。

但是，有时将一些参数传递给着色器并为每个对象更改它们会更容易。例如，如果要渲染 3D 模型，可以将其拆分为子网格，每个子网格具有不同的纹理。然后，当您传递网格的顶点数据时，加载纹理并将其传递给着色器。对于下一个网格，您将传递另一个纹理，依此类推。

在现实世界中，一切都更加复杂，但我希望它对您了解它是如何工作的有所帮助。

**你的例子**

您正在构造函数上加载一对着色器（没有纹理），然后每次设置纹理时创建一个新着色器。我不确定这是更好的方法。

不知道 Utils.LoadShader 做了什么很难知道，但是您可以在每次调用它时记录结果。也许您第二次链接着色器时它不起作用。

如果我是你，我只会在你的点对象之外使用一对着色器。您可以将参数传递给着色器（使用 glUniform...），指示点大小、纹理等。 setTexture 函数只会绑定新纹理而不加载着色器。然后在开始时编译（在设置 GL 上下文等之后）。

当这可行时，您可以考虑每次都更改着色器，只有在确实有必要时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:07:32.573

当我发现问题所在时，我会回答自己。

将此添加到我的 drawDot 方法中：

```
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texID); 
```

texID 是对应于调用 drawDot() 方法的对象的纹理 ID。

完美运行

希望这对将来可能遇到类似问题的人有所帮助。

# knockout.js - Knockout js循环到一个值

> ID：15227373
> 
> 赞同：33
> 
> 时间：2013-03-05T15:16:26.807
> 
> 标签：knockout.js

我有一个可观察的整数，`pages`我想循环到 html 中页面的值，例如。

```
pages = ko.observable(3) 
```

生产

```
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
</ul> 
```

有没有适合这个的绑定？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-05T15:22:19.200

你可以这样写：

```
<ul data-bind="foreach: new Array(pages())">
    <li data-bind='text: $index()+1'></li>
</ul> 
```

这是工作小提琴：http: [//jsfiddle.net/L8Uy5/](http://jsfiddle.net/L8Uy5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-13T13:42:54.817

如果您只需要一个简单的`for`循环，您可以执行以下操作：

```
<select name="something"
    data-bind="foreach: new Array(10)">
    <option data-bind="text: $index()+1, value: $index()+1"></option>
</select> 
```

您可以通过替换`(10)`为任何数字来指定项目的数量。这将产生一个简单的下拉列表，其中包含从 1 到 10 的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-21T18:37:46.023

[Artem Vyshniakov 的回答](https://stackoverflow.com/a/15227504/419956)是在不更改视图模型的情况下在视图中运行它的快速方法。但是，如果您希望快速扩展设置，或者只是不喜欢在您的视图中有（可以说是可单元测试的逻辑）`new Array(pages())`，这里有一个替代解决方案。另一个好处可能是您还可以封装该`$index + 1`位：

```
function ViewModel() {
  var self = this;

  self.pages = ko.observable(3);

  self.pageArray = ko.computed(function() {
    var list = [];
    var length = parseInt(self.pages(), 10); // the <input> makes `pages` a string!
    for (var i = 1; i <= length; i++) {
      list.push(i);
    }
    return list;
  });
}

ko.applyBindings(new ViewModel());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>

<input data-bind="textInput: pages" type="number">

<ul data-bind="foreach: pageArray">
  <li data-bind="text: $data"></li>
</ul>
```

`pageArray`代码大部分都很庞大，因为 (a)由于`pages`输入而变成了字符串，这可能通过将其`pages`转换为可写计算来更好地解决，以及 (b) 因为我选择使用`for`循环/*基本*解决方案来创建范围（在此基础上[你可以改进](https://stackoverflow.com/q/3895478/419956)）。

这是一个在这两个方面都有改进的建议版本：

```
function ViewModel() {
  var self = this, 
      _pages = ko.observable(3);

  self.pages = ko.computed({
    read: () => _pages(),
    write: newVal => _pages(parseInt(newVal, 10))
  });

  self.pageArray = ko.computed(() => _.range(1, _pages() + 1));
}

ko.applyBindings(new ViewModel());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>

<input data-bind="textInput: pages" type="number">

<ul data-bind="foreach: pageArray">
  <li data-bind="text: $data"></li>
</ul>
```

无论如何，`pageArray`它的内容现在是完全可单元测试的，并且可以被其他视图模型逻辑访问。（如果你不需要那个，例如你只是在搭建一个视图，我会说另一个答案）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-04-15T06:12:34.963

它不适用于更新字段

> 你可以这样写：
> 
> 这是工作小提琴：http: [//jsfiddle.net/L8Uy5/](http://jsfiddle.net/L8Uy5/)

这项工作更好[https://jsfiddle.net/L8Uy5/54/](https://jsfiddle.net/L8Uy5/54/)

```
function ViewModel(){
    var self = this;
    self.pages = ko.observable(3);
    self.virtual_elements = ko.computed(function(){
        var arr = [];
        for (var i=1; i<=self.pages(); i++) {
            arr.push('some');
        }
        return arr;
    });
}

ko.applyBindings(new ViewModel());
```

```
<input data-bind="value: pages"/>
<ul data-bind="foreach: virtual_elements">
    <li data-bind='text: $index()+1'></li>
</ul> 
```

# vim - 试图在 vim 中为 yuml 文件类型设置 makeprg，手动工作，在 vimrc 中不起作用

> ID：15227375
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:28.393
> 
> 标签：vim

我试图让以下条目在我的 .vimrc 中工作：

```
 autocmd FileType yuml set makeprg=yuml\ -i\ %\ -o\ %<\.pdf\ -f\ pdf\ &\ sleep\ 1\;\ evince\ %<.pdf\ & 
```

它不起作用，每当我输入 :make 时，它​​都会使用 yuml 实用程序中的一些默认选项。但是，当我输入：

```
set makeprg=yuml\ -i\ %\ -o\ %<\.pdf\ -f\ pdf\ &\ sleep\ 1\;\ evince\ %<.pdf\ & 
```

在 vim 中手动，该命令确实有效。

我在这里做错了什么？

谢谢，

马丁

* * *

编辑：我忘了明确定义 yuml 文件类型。所以我需要做的就是将以下行添加到 .vimrc 文件中：

```
au BufRead,BufNewFile *.yuml set filetype=yuml 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:26:54.920

我不知道到底出了什么问题，但是在脚本化的 autocmd 中，我会跳过转义问题并`:let`改用：

```
:autocmd FileType yuml let &makeprg = 'yuml -i % -o %<.pdf -f pdf & sleep 1; evince %<.pdf &' 
```

另外，检查文件类型是否正确设置`:set ft?`

# sql-server-2005 - SQL Server 子字符串

> ID：15227378
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:37.047
> 
> 标签：sql-server-2005

我需要一个好的表达来正确选择字段的一部分。例如，该字段的类型可以是：“google_organic”或“google_campaign_HereGoesMyCode”。我感兴趣的部分是“有机”或“活动”，没有任何其他添加。到目前为止，我选择了这个：

```
 substring(Referer, charIndex('_',Referer)+1, len(Referer)) 
```

但是在“campaign”的情况下，我选择了整个事情......我不知道如何管理第二个下划线的存在或不存在......

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:31:43.827

一种方法是使用下面的 SQL 创建一个 lastIndex 类型的搜索，并将结果用作长度：
`len(Referer) – (charindex('_', reverse(Referer))-1)`

然后，您可以按如下方式重写您的查询，尽管您需要第一个 charIndex 的结果，所以这相当密集：
`substring(Referer, charIndex('_',Referer)+1, (len(Referer) – (charindex('_', reverse(Referer))-1) - (charIndex('_',Referer)+1))-1 )`

我意识到这现在只有在你有 2 个下划线时才有效。但是您可以根据 CASE/WHEN 语句过滤要运行的查询。

# android - 里面有文字的图标 - 如何在布局中定义？

> ID：15227379
> 
> 赞同：4
> 
> 时间：2013-03-05T15:16:37.313
> 
> 标签：android, android-layout

我想让一个`TextView`（显示计数）悬停在 ActionBar 中的图标上。我所做的是有一个`RelativeLayout`，为其设置一个背景，然后将其`TextView`放入该布局中并用边距拧紧直到它适合，但是一旦文本长度发生变化，它就会被破坏。设置背景`TextView`也不是很好，因为我无法将文本与图标相关联。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_gravity="fill_horizontal" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/cart" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0"
        android:layout_marginTop="5dp"      android:layout_marginLeft="43dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> </RelativeLayout> 
```

这是一个屏幕截图，向您展示我的意思：

![在此处输入图像描述](../Images/c34a32823afe237c6fc663fe5382012b.png)

是否有一种无压力的方式，也许是一个库，可以让我设置一个`TextView`over a`Drawable`以便 TextView 始终居中/定位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:57:30.357

> 在 TextView 上设置背景也不是很好，因为我无法相对于图标定位文本。

实际上，您可以相对于图标定位文本。您需要将购物车图标和数字徽章图标分开为单独的图像，并单独布置它们。不久前我不得不自己做这个，我用一个`RelativeLayout`, 一个`ImageView`购物车图标和`TextView`一个 9 补丁“徽章”作为背景的数字。

诀窍是将您的号码与购物车图标`TextView`的**左侧**和**底部**对齐，`ImageView`然后使用**左右**边距将您的号码徽章推到购物车图标**的****顶部**和**右侧**。这样，数字徽章始终基于您的购物车图标。

 ****此外，将`gravity`您的设置`TextView`为`center`，以便随着数字变宽，文本的相对位置大致相同。最后，使用`padding`你`TextView`来控制数字边缘和“徽章”9 补丁边缘之间的差距。

这是我的实现的一个片段（我已经编辑了其中的一些）：

```
 <RelativeLayout
        android:id="@+id/cartButton"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/cartIconImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:src="@drawable/ic_menu_cart" />

        <TextView
            android:id="@+id/cartBadge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/cartIconImageView"
            android:layout_alignLeft="@+id/cartIconImageView"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="9dp"
            android:background="@drawable/state_list_cart_badge"
            android:gravity="center"
            android:includeFontPadding="false"
            android:lines="1"
            android:paddingLeft="8dp"
            android:paddingRight="8dp"
            android:text="7" />
    </RelativeLayout> 
```

这就是它的样子：

![在此处输入图像描述](../Images/a7fc528315ae98d14fd21ca568da62c9.png)

![在此处输入图像描述](../Images/95e5563030496aeb1170586df40f2172.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:53:23.490

我只会使用 TextView，并设置一个 9 补丁作为背景：

![9 补丁文件](../Images/2be8b909c2d73138ce6c6ca4443eb2d0.png)

您可能不得不玩弄它（我只是在一两分钟内完成了它），但是图像中最右下角的东西就是您想要的。这将比处理两个视图更加一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:20:50.963

使用框架布局。它总是被称为无用，但如果你问我，将一个视图放在另一个视图之上是完美的。

[报价](http://developer.android.com/reference/android/widget/FrameLayout.html)：

> 子视图绘制在堆栈中，最近添加的子视图在顶部。FrameLayout 的大小是其最大子项（加上填充）的大小，可见与否（如果 FrameLayout 的父项允许）。只有当 setConsiderGoneChildrenWhenMeasuring() 设置为 true 时，才会使用 GONE 的视图来调整大小。****

# php - 加载数据本地 infile 未插入数据库

> ID：15227382
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:42.550
> 
> 标签：php, mysql, load-data-infile

我有一个 .CSV 文件，它将使用 Load data local infile 语法导入 mysql 数据库，我的 csv 文件包含 23 列，但我只想在数据库中导入选定的列。

我的问题是我的加载文件系统税没有从我的 .CSV 文件中导入任何内容。

下面是我的代码：

```
$mysql = printf("LOAD DATA LOCAL INFILE 'File.csv' INTO TABLE table
            FIELDS 
                TERMINATED BY ','
            LINES 
                TERMINATED BY '\\n'
            IGNORE 1 LINES 
            (column1, column2, column3...) 
");

$query = mysql_query($mysql); 
```

任何帮助将不胜感激。

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T06:46:52.980

登录到您的 SSH 提示符。

然后输入

```
# mysql -u admin -p`cat /etc/psa/.psa.shadow`;

mysql>LOAD DATA LOCAL INFILE 'File.csv' INTO TABLE table
            FIELDS 
                TERMINATED BY ','
            LINES 
                TERMINATED BY '\\n'
            IGNORE 1 LINES 
            (column1, column2, column3...) 
```

如果它正常工作，则问题出在您的数据库用户权限上。更改数据库用户权限并执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T21:39:30.220

在 Windows 上，这是我使用的。我使用远程数据库，但仍然必须为文件位置 dir "C:\" 添加额外的斜杠，在上面的两个示例中似乎都有额外的斜杠 '\n' 我相信它应该只有一个。编辑它并在 mysql 工作台或一些类似的 GUI 中尝试

```
LOAD DATA LOCAL INFILE 'c:\\resultItem.txt' 
INTO TABLE resultItem 
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '|'
LINES TERMINATED BY '\n'
 IGNORE 1 LINES
(ID, Accessibility, Assigned_To, AttachedFileCount, Category, `Change`,       Changed_By,Changed_Date,ChildLinkCount,Closed_By,Closed_Date,Dependent_Date,Dependent_Link_Status,Description, @insertedtothisDB)
 SET insertedtothisDB = utc_timestamp(); 
```

# java - 如何使用 Java 显示/可视化 JBox2D 世界

> ID：15227383
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:44.217
> 
> 标签：java, swing, jframe, jbox2d

我按照 FlashDevelop 教程编写了一个 JBox2D 应用程序。从命令行来看，一切似乎都运行良好，我现在的问题是如何在 JFrame 或其他可视化方法中显示世界。我尝试了 DebugDraw，但完全迷失了。提前致谢。

```
public class GameWorld implements StepListener {
protected B2World b2World;
protected World world;
protected WorldView worldView;
private B2Body fallingCrate;
public static final JFrame frame = new JFrame("Platformer Game");
    ...
    ...

public GameWorld() {
    world = new World();
    worldView = new WorldView(world, (int)XAXIS, (int)YAXIS);
    setUpWorld();
    createWorldBodies();
    addCrates();
    world.addStepListener(this);
    b2World.step((float)1/30, 10);
    frame.add(worldView);
    frame.pack();
    frame.setResizable(false);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    world.start();
}

private void addCrates() {
    PolygonDef fallingBodyDef = new PolygonDef();
    fallingBodyDef.setAsBox(25f/RATIO, 25f/RATIO);
    setPhysicsProperties(fallingBodyDef, false); // set density, friction, restitution
    BodyDef crateDef = new BodyDef();
    crateDef.position.set(250f/RATIO, -30f/RATIO);
    crateDef.angle = (float) (30 * Math.PI / 180);
    fallingCrate = b2World.createBody(crateDef);
    fallingCrate.createShape(fallingBodyDef);
    fallingCrate.setMassFromShapes();
}

private void createWorldBodies() {
    PolygonDef tallBlockDef = new PolygonDef();
    tallBlockDef.setAsBox(5f/RATIO, 195f/RATIO);
    setPhysicsProperties(longBlockDef, true);
    BodyDef wallDef = new BodyDef();
    wallDef.position.set(5f/RATIO, 195f/RATIO);
    B2Body leftWall = b2World.createBody(wallDef);
    leftWall.createShape(tallBlockDef);
    leftWall.setMassFromShapes();
    ...
            ...
}

private void setUpWorld() {
    AABB universeSize = new AABB();
    universeSize.lowerBound.set(-3000f/RATIO, -3000f/RATIO);
    universeSize.upperBound.set(3000f/RATIO, 3000f/RATIO);
    Vec2 gravity = new Vec2(0f, 9.8f);
    boolean ignoreSleeping = true;
    b2World = new B2World(universeSize, gravity, ignoreSleeping);
}
    ...
    ...
    public static void main(String[] args) {
            new GameWorld();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:58:30.370

如果您使用 j2d 绘图，则可以从测试平台获取[DebugDrawJ2D](https://code.google.com/p/jbox2d/source/browse/trunk/jbox2d-testbed/src/main/java/org/jbox2d/testbed/framework/j2d/DebugDrawJ2D.java)。如果您只想尝试一些物理模拟，还有一个不错的[Wiki页面可以创建您自己的测试平台测试。](https://code.google.com/p/jbox2d/wiki/Testbed)

如果您正在创建自己的游戏或产品，则需要熟悉 DebugDraw 并使用视口变换（这样您就可以在世界坐标和视图坐标之间进行变换，反之亦然）。JBox2D 也有一个类可以帮助您，称为[OBBViewportTransform](https://code.google.com/p/jbox2d/source/browse/trunk/jbox2d-library/src/main/java/org/jbox2d/common/OBBViewportTransform.java)。

# php - 如何在 PHP 5.3 中使用自动加载器构建工厂、命名空间和类？

> ID：15227386
> 
> 赞同：1
> 
> 时间：2013-03-05T15:16:49.733
> 
> 标签：php, oop, namespaces, factory

对不起，冗长的解释......我喜欢彻底。

我对 OOP PHP 很陌生（到目前为止大约花了一周的时间编写代码），但我已经掌握得很好，我真的很喜欢它！我已将所有类放入一个 GIANT 包含文件中，并将其包含在需要存储在`SESSION`. 然后今天我意识到这很难导航，每个页面都在加载每个类，即使它没有使用它，所以当我在某个地方读到最好将类分解成它们自己的文件时，我把它们全部放在他们的在 lib 文件夹中拥有自己的文件。

学生类进入 student.php 文件。员工类进入了staff.php 文件。等等等等

这是我感到困惑的地方......我编写了一些工厂来从数据库中查找某些信息。这些工厂工作得很好！我传递了类型（例如 ID、用户名、资产），工厂返回适当的查找，然后可以将其传递给标准。

这是我为一家工厂所做的一个例子。文件名为 devicelookup.php

```
<?php
// Device Lookup

/*
 *  device lookup interface.  This ensures that each lookup provider has the same function
 */
interface deviceLookupProvider {
    public function lookupDevice($arg);
}

/*
 *  class assetLookupDevice
 */
class assetLookupDevice implements deviceLookupProvider {
    public function lookupDevice($arg) {
        global $mysqli;
        $asset = $mysqli->real_escape_string($arg);
        $sql = "SELECT computer.* FROM `computer` WHERE computer.assetTag = '" . $asset . "' LIMIT 1;";
        $result = $mysqli->query($sql) or die($mysqli->error);
        if ($result->num_rows > 0) {
            return $result->fetch_assoc();
        } else {
            return null;
        }
    }
}

/*
 *  device lookup factory.  This returns a lookup object based off the type.
 */
class DeviceLookupFactory {
    public static function createDeviceLookup($type) {
        switch ($type) {
            case "asset":
                return new assetLookupDevice;
                break;
        }
    }
} 
```

我正在尝试使用 php.net 上的代码来实现 spl_autoloader，如下所示：

```
function my_autoloader($class) {
    include 'lib/' . $class . '.php';
}

spl_autoload_register('my_autoloader'); 
```

这种功能对学生、员工、工作流和其他与他们的文件同名的类非常有用，但我对拆分工厂及其实现到/lib中自己的文件感到奇怪。

如果我必须进行这种拆分，那么我希望将它们分组到自己的文件夹或其他东西中，然后我会遇到命名空间。我有点理解将命名空间放在单个类上的概念......但我不明白。

而且，如果我找出命名空间的最佳结构，那么我应该能够调用

```
<?php
spl_autoload_extensions(".php"); // comma-separated list
spl_autoload_register();
?> 
```

只是神奇地包含所有需要的类文件。

那么......如何构建这个环境？我想正确地构造所有内容，以便将来可以将对象编码重用于不是 OOP 的更大应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:19:31.890

IMO，当涉及到类命名和文件层次结构时，您应该遵守 PSR-0（[请参阅完整规范）。](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)然后，您可以使用符合 PSR-0 的自动加载器并[避免编写自己的](http://symfony.com/doc/current/components/class_loader.html).

至少，每个类、接口、特征都应该在其自己的文件中，其名称与类/接口/特征名称完全相同。

# jquery - 使用 jquery cookie 记住树导航状态

> ID：15227388
> 
> 赞同：0
> 
> 时间：2013-03-05T15:16:52.247
> 
> 标签：jquery, css, cookies, navigation

嗨，我有一个由 jquery 驱动的基本可扩展树导航。当用户导航到新页面时，我希望能够记住菜单的状态，就像它折叠回原来的关闭状态一样。这是我用于树导航的 jquery：

```
$(document).ready(function() {

$('ul li.parent').children('.closed').addClass('expand');

$(".tree_nav li a.expand").toggle(           

      function() { // START FIRST CLICK FUNCTION
          $(this).siblings('ul').slideDown()
          if ($(this).hasClass('closed')) {   
              $(this).removeClass('closed').addClass('open');
          }
      }, // END FIRST CLICK FUNCTION

      function() { // START SECOND CLICK FUNCTION
          $(this).siblings('ul').slideUp()

          if ($(this).hasClass('open')) {
              $(this).removeClass('open').addClass('closed');
          }
      } // END SECOND CLICK FUNCTIOn
); // END TOGGLE FUNCTION 
}); // END DOCUMENT READY 
```

基本上，当单击链接并在该类上设置动画时，我只是添加了一类“打开”。我需要做的就是记住当用户导航到新页面时哪些项目具有“开放”类。我相信最好的解决方案是使用我玩过的 jquery cookie 插件，但到目前为止我还没有成功。

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:26:47.353

Within your wp_list_pages function you could add an "open" class to the page your on.

Then in your jQuery use .hasClass("open") to open then menu, otherwise close it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:07:12.927

默认情况下，wp_list_pages 函数的当前页面中添加了类，请参见此处[http://codex.wordpress.org/Function_Reference/wp_list_pages#Menu_Item_CSS_Classes](http://codex.wordpress.org/Function_Reference/wp_list_pages#Menu_Item_CSS_Classes)的类部分。因此，您也可以适当地使用这些类来设置导航样式。

# sql-server - 列出特定数据库上的所有用户

> ID：15227392
> 
> 赞同：2
> 
> 时间：2013-03-05T15:16:59.673
> 
> 标签：sql-server, tsql

我想列出特定数据库上的所有用户。

当我使用 sys.server_principals 或 sys.sysmembers 系统视图时，它不会列出所有出现在 SQL Server Management Studio 对象浏览器中的 Security -> Users 列表下的用户。

这是我尝试的：

```
USE [Database_Name];

SELECT user_name([memberuid]) as [Username]
FROM [sys].[sysmembers];

USE [Database_Name];

SELECT [name]
FROM [sys].[server_principals]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:33:59.877

您不应该使用`sysmembers`或`sysusers`为此 - 所有`sys___`视图都是向后兼容视图，并且 (a) 将在某个时候从产品中删除，并且 (b) 不一定包含当前信息。

如果您正在寻找数据库主体，请不要查看`sys.server_principals`，请查看[`sys.database_principals`](http://msdn.microsoft.com/en-us/library/ms187328.aspx)。

```
USE your_database;
GO

SELECT name, create_date, type_desc
  FROM sys.database_principals
  WHERE is_fixed_role = 0; 
```

这将包括诸如`guest`、`INFORMATION_SCHEMA`、`dbo`和`public`之类的内容`sys`。但是，它不包括`sa`不需要明确定义主体的对数据库具有固有权限的帐户。

# javascript - 在Javascript函数中获取div的最后一个孩子

> ID：15227398
> 
> 赞同：0
> 
> 时间：2013-03-05T15:17:18.223
> 
> 标签：javascript, jquery

我正在使用一段相当简单的代码并将其包装成一个函数，该代码从 div 内的项目中构建了一个滑出菜单。我现在正试图从 div 中获取最后一个孩子：

```
experimentOne('#experimentOne');

   function experimentOne(masterContainer) {
   var experimentOneMenuButton = $('masterContainer :last-child');
   ... etc 
```

但是，这会在日志中返回 []。当我检查宽度时，它应该是 100px，而不是 1420，我猜是窗口宽度。

如果我只是通过在所有内容中对其进行编码来获取 ID 的最后一个孩子，那很好，但我希望该函数尽可能地可重用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:20:55.113

如果你的 masterContainer 是一个元素，试试这个：

```
var experimentOneMenuButton = $(':last-child', masterContainer); 
```

或者如果它是元素 id 的字符串

```
var experimentOneMenuButton = $('#'+masterContainer+' :last-child'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:21:19.650

`masterContainer`是一个包含父容器值的变量，因此当您构建选择器时，您需要将其与字符串连接一起使用。

```
var experimentOneMenuButton = $(masterContainer + ' :last-child'); 
```

或者您可以使用基于上下文的查找

```
var experimentOneMenuButton = $(':last-child', masterContainer); 
```

我会推荐第二种解决方案，它使用上下文基础查找，因为它更整洁。

演示：[小提琴](http://jsfiddle.net/arunpjohny/fF4MX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:23:08.157

*   使用“#”选择具有 id 的元素
*   您需要使用“>”来定位直接子级，[space] 定位元素的所有后代

    `$('#masterContainer>:last-child');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:27:22.493

你的串联是错误的。试试这样： `$(masterContainer + ' :last-child')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:25:15.193

那么masterContainer里面的字符串什么都不会做。我认为应该是：

```
$(masterContainer).find(':last-child'); 
```

另请注意，这`experimentOne('#experimentOne');`将发送一个字符串而不是 jQuery 对象。这将需要`experimentOne($('#experimentOne'));`，这将离开：

```
experimentOne($('#experimentOne'));

   function experimentOne(masterContainer) {
   var experimentOneMenuButton = masterContainer.find(':last-child');
   // Note the lack of jQuery wrapper around masterContainer in this version 
```

取决于您是要在参数中还是在函数本身中强制使用 jQuery 对象！

# ajax - Ajax 状态 200 无效 json 解析器错误

> ID：15227404
> 
> 赞同：0
> 
> 时间：2013-03-05T15:17:36.493
> 
> 标签：ajax

```
$.ajax({
    type: "POST",
    url: "SearchService.asmx/GetSearchResults",
    contentType: "application/json",
    dataType: "json",
    success: function (dataResult) {
        CreateData(dataResult.d);
    },
    error: function (xhr, msg, error) {
        alert("Failed: " + msg.status + ": " + msg.statusText + error + " " + xhr.responseText);
    }
}); 
```

当我将它包含在我的网站上时，我得到一个解析器错误。但是这段代码在一个测试项目上运行良好，我得到了无效的 json 解析器错误。

# sql - 比较两个非标准格式的地址

> ID：15227407
> 
> 赞同：5
> 
> 时间：2013-03-05T15:17:44.020
> 
> 标签：sql, database, plsql, oracle11g

如果地址匹配，我必须比较两个表中的地址并获取 Id。每个表都有三列 Houseno、street、state 地址在任何一个表中都不是标准格式。大约有。50,000 行，我需要扫描

在某些地方，它是 Ave. Avenue Ave。STR街，ST。车道 Ln。放置 PL Cir CIRCLE。与点或逗号或空格的任何组合，hypen。我正在考虑将这三个结合起来，例如，在 SQL 或 PLSQL 中最好的方法是什么

**表格1**

```
 HNO         STR          State
     -----       -----         ----- 
      12        6th Ave         NY
      10        3rd Aven        SD
      12-11     Fouth St        NJ                         
      11        sixth Lane      NY
      A23       Main Parkway    NY
      A-21      124 th Str.     VA 
```

**表2**

```
 id   HNO         STR          state
     --    -----       -----         ----- 
     1      12        6 Ave.         NY
     13     10        3 Avenue       SD
     15     1121      Fouth Street   NJ                         
     33     23        9th Lane       NY
     24     X23       Main Cir.      NY
     34     A1       124th Street    VA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T16:57:46.347

Oracle 有一个内置的 UTL_Match 包，它有一个 edit_distance 函数（基于 Levenshtein 算法，这是衡量您需要进行多少更改才能使一个字符串与另一个字符串相同）。关于这个包/功能的更多信息可以在这里找到：http: [//docs.oracle.com/cd/E18283_01/appdev.112/e16760/u_match.htm](http://docs.oracle.com/cd/E18283_01/appdev.112/e16760/u_match.htm)

您需要就是否比较每一列或连接然后比较以及合理的阈值是多少做出一些决定。例如，您可能希望对任何编辑距离小于 8 的串联值进行手动检查。

如果您需要语法方面的任何帮助，请告诉我，edit_distance 函数只需要 2 个 varchar2 args（您要比较的字符串）并返回一个数字。

这不是一个完美的解决方案，因为如果您将阈值设置得较高，您将需要进行大量手动检查以丢弃一些匹配项，如果您将其设置得太低，您会错过一些匹配项，但如果您将其设置为最好的想要一个相对简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:44:17.963

没有简单的方法可以实现您想要的。有一个昂贵的软件（谷歌“地址标准化软件”）可以做到这一点，但很少 100% 自动。

这种类型的软件所做的是获取数据，使用复杂的启发式方法来尝试找出“官方”地址，然后返回该地址（有时相信结果是正确的，有时是按置信度排序的结果列表）。

对于一小部分数据，该软件根本无法工作，您必须自己修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T03:04:50.133

我们为我们的一个应用程序执行此操作的方法是使用第三方地址规范化 API（例如：Pitney Bowes），规范化每个地址（地址是街道地址、城市、州和邮政编码的组合）并创建一个 T-sql该地址的哈希值。对于要比较的地址做同样的事情并比较两个哈希值，如果它们匹配，我们就有一个匹配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T16:17:08.143

您可以将光标放在您首先按门牌号和城市 = 进行分组的位置。

考虑到 chr(32)，您可以在循环中使用 instr e substr 分隔一行。

之后，您可以尝试考虑与子字符串进行对抗，其中您有一个数字 6 = 6th ，其他情况下是 street = str。

祝你好运！

# c# - 您可以将方法作为属性变量中默认设置器操作的一部分吗？

> ID：15227409
> 
> 赞同：7
> 
> 时间：2013-03-05T15:17:49.170
> 
> 标签：c#, properties, setter

如果您有多个属性在 setter 中实现相同的方法，有没有办法让它成为默认 setter 的一部分？

如果我有多个在设置时调用 a 的属性，`Filter()`有没有办法将其推送到“基本设置器”中，这样​​我就不必`Filter()`在每个设置器中调用？

```
private string _MyVal1;
public string MyVal1 {
    get {
        return _MyVal1;
    }
    set {
        _MyVal1 = value;
        Filter();
        OnPropertyChanged("MyVal1");
    }
}

private string _MyVal2;
public string MyVal2 {
    get {
        return _MyVal2;
    }
    set {
        _MyVal2 = value;
        Filter();
        OnPropertyChanged("MyVal2");
    }
}

private string _MyValN;
public string MyValN {
    get {
        return _MyValN;
    }
    set {
        _MyValN = value;
        Filter();
        OnPropertyChanged("MyValN");
    }
} 
```

所以变成了这样：

```
private string _MyValN;
public string MyValN {
    get {
        return _MyValN;
    }
    set : FilterSetter {
        _MyValN = value;
        OnPropertyChanged("MyValN");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:42:42.697

您可以创建通用 setter 方法并从每个属性 setter 中调用它：

```
private void Set<T>(ref T field, T value, string propertyName)
{
    field = value;
    Filter();
    OnPropertyChanged(propertyName);
} 
```

然后你的属性看起来像：

```
public string SomeProperty
{
    get { return this.someField; }
    set
    {
        Set(ref this.someField, value, "SomeProperty");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:46:04.687

另一种方法是使用 Unity 框架提供的拦截。通过拦截，您的类实现了一个接口，您将告诉框架每次在实现该接口的类上调用方法时，运行这些拦截器。您的拦截器代码可以查看被调用的方法是否以 set_ 为前缀。拦截器代码在到达函数的途中执行一次，在返回的路上执行一次。在回来的路上，你可以让拦截器调用过滤器方法（当然假设它是在接口上定义的）。

具体例子：

## 获取必备库

使用 NuGet 将 Unity 和 Unity 扩展添加到您的项目

## 定义要拦截的接口：SomeObject.cs

```
using System;

namespace InterceptSetter
{
    interface ISomeObject
    {
        string SomeProperty { get; set; }
        void Filter();
    }

    public class SomeObject : ISomeObject
    {
        public string SomeProperty { get; set; }

        public void Filter()
        {
            Console.Out.WriteLine("Filter Called");
        }
    }
} 
```

## 定义你的拦截行为：SetterCallsFilterMethodBehavior.cs

```
using Microsoft.Practices.Unity.InterceptionExtension;
using System;
using System.Collections.Generic;
using System.Linq;

namespace InterceptSetter
{
    /// <summary>
    /// See http://msdn.microsoft.com/en-us/library/ff660871(v=pandp.20).aspx
    /// See http://msdn.microsoft.com/en-us/library/ff647107.aspx
    /// </summary>
    class SetterCallsFilterMethodBehavior : IInterceptionBehavior
    {
        public IEnumerable<Type> GetRequiredInterfaces()
        {
            // we dont need anything
            return new[] { typeof(ISomeObject) };
        }

        public IMethodReturn Invoke(IMethodInvocation input, GetNextInterceptionBehaviorDelegate getNext)
        { // Do not intercept non-setter methods
            if (!input.MethodBase.Name.StartsWith("set_"))
                return getNext()(input, getNext);

            IMethodReturn msg = getNext()(input, getNext);

            // post processing. this is where we call filter
            if (input.Target is ISomeObject)
            {
                (input.Target as ISomeObject).Filter();
            }

            return msg;
        }

        /// <summary>
        /// We always execute
        /// </summary>
        public bool WillExecute
        {
            get { return true; }
        }
    }
} 
```

## 编写一个测试控制台程序：Program.cs

```
using Microsoft.Practices.Unity;
using Microsoft.Practices.Unity.InterceptionExtension;
using System;

namespace InterceptSetter
{
    class Program
    {
        static void Main(string[] args)
        {
            UnityContainer container = new UnityContainer();

            container.AddNewExtension<Interception>();
            container.RegisterType<ISomeObject, SomeObject>(
                      new Interceptor<TransparentProxyInterceptor>(),
                      new InterceptionBehavior<SetterCallsFilterMethodBehavior>());

            // we must get our instance from unity for interception to occur
            ISomeObject myObject = container.Resolve<ISomeObject>();
            myObject.SomeProperty = "Hello Setter";

            Console.ReadLine();
        }
    }
} 
```

运行这个你会看到拦截器确实调用了过滤器方法（它打印到控制台）。

Unity 并不是唯一的依赖注入/拦截框架（google PostSharp）。Unity 是我熟悉的，所以这就是这个例子所使用的。

## 来源/另见：

1.  [http://msdn.microsoft.com/en-us/library/ff660871(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660871(v=pandp.20).aspx) - 描绘拦截流程的好图
2.  [http://msdn.microsoft.com/en-us/library/ff647107.aspx](http://msdn.microsoft.com/en-us/library/ff647107.aspx) - 显示不同拦截技术的细节过大

# ms-access - 在 Access 的数据表视图中刷新特定行

> ID：15227411
> 
> 赞同：0
> 
> 时间：2013-03-05T15:17:56.217
> 
> 标签：ms-access

我在 Access 2003 的“数据表”模式下有一个表单，它可以包含 25 000 行。

当我想编辑特定行时，我会打开一个包含所有可编辑字段的特定表单。

完成后，我保存并关闭表单，但现在我只想重新查询和刷新我编辑的行。（我想将光标保持在这一行，并且我想避免重新加载每一行，因此重新查询表单不是解决方案）。

是否可以 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:41:20.537

不，我认为不是。`AbsolutePosition`您将不得不重新查询您的表单，但您可以通过在执行此操作之前将光标放回原来的位置：

```
lngPos = Me.Recordset.AbsolutePosition
Me.Requery
Me.Recordset.AbsolutePosition = lngPos 
```

顺便说一句，我在 pcreview 上从 Albert D. Kallal 那里偷来了这个[想法](http://www.pcreview.co.uk/forums/cursor-position-continuous-form-after-requery-t2861623.html)。我`Bookmark`过去曾使用过该对象，但它似乎总是有问题。

# c# - 如何在 windows server (asp.net c#) 网站中缓存@font-face？

> ID：15227421
> 
> 赞同：0
> 
> 时间：2013-03-05T15:18:14.927
> 
> 标签：c#, html, caching, font-face

我已经使用@font-face 向我的网站添加了自定义字体，但它们会在每个页面加载/刷新时重新加载。

在某些论坛中，我找到了有关使用 .htaccess 文件的解决方案，但我不确定是否可以在 .net（Windows 服务器）中使用它。

在我的 web.config 文件中，clientCache 设置为 Max，但这不会影响 FONTS。

```
<staticContent>
  <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" />
</staticContent> 
```

如果您给我一个示例代码或一个可行的解决方案，我将不胜感激。

提前谢谢了！

卡多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-19T08:11:10.297

在寻找解决方案时，我遇到了这个问题。我有一个解决方案，希望它也能帮助其他人。

在评论中，您有建议[IIS7 Cache Control](https://stackoverflow.com/questions/642954/iis7-cache-control)。

你需要做的是，

# 1\. 创建一个包含以下内容的 web.config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" />
    </staticContent>
  </system.webServer>
</configuration> 
```

# 2\. 将此文件复制到您的“字体”目录并完成。

这控制了 Web 客户端和代理服务器将如何缓存 IIS 7 及更高版本返回的内容。[来自Microsoft 文档](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/staticcontent/clientcache)的更多信息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T02:45:33.230

我遇到了同样的问题，所以我改变了策略。我无法缓存 TTF（不知道为什么），但您可以缓存 CSS！所以我为我的字体创建了一个 CSS 文件并使用 base64 包含它。

这是一篇关于它的文章[http://blog.patdavid.net/2012/08/embedding-fonts-with-css-and-base64.html](http://blog.patdavid.net/2012/08/embedding-fonts-with-css-and-base64.html)

并将您的字体转换为 base 64：[http ://base64fonts.com/](http://base64fonts.com/)

# java - 是否可以将 Java 编辑区域添加到 Eclipse RCP 部件？

> ID：15227422
> 
> 赞同：2
> 
> 时间：2013-03-05T15:18:17.490
> 
> 标签：java, editor, eclipse-rcp

我想在我的 Eclipse RCP 应用程序中添加一个 java 编辑区域，用户可以在其中创建一些 java 代码。我在[这里](http://blog.eclipse-tips.com/2008/06/opening-editor-without-ifile.html)找到了一个很好的教程，我可以在没有文件的情况下**打开**一个 java 编辑器，这样用户就可以实现一些代码，但是我不想**打开**java 编辑器，而是希望它**嵌入**到我的`Part`.

就像您将一个`Text`区域附加到`Part`using`Text textArea = new Text(parent, SWT.BORDER)`一样，是否可以对编辑器的实例执行相同的操作？似乎没有任何 API 可以设置它的父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:11:51.187

你的问题真的不容易解决。JDT 真的很复杂，不能那么容易地移植到 ViewPart。有许多部分依赖于 IEditorPart。Stackoverflow 上有一个类似的[问题](https://stackoverflow.com/questions/13789892/java-source-code-editor-as-an-eclipse-view)。

更新：我刚刚在 PlanetEclipse 中看到，[Tom Schindl](http://tomsondev.bestsolution.at/2013/02/20/from-styledtextviewer-to-a-styledtexteditor-with-javafx8/)正在尝试创建一个 FX Java 编辑器。您可以尝试一下并将其集成到您的视图中。在 SWT 中集成 Java FX 组件似乎是[可能的。](http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm)如果可能的话，请提供反馈；）

# android - 适用于 Android 的 Google 视频群聊 API

> ID：15227423
> 
> 赞同：4
> 
> 时间：2013-03-05T15:18:18.347
> 
> 标签：android

关于如何将 Google Hangout 集成到 Android 应用中的任何想法？我没有看到任何当前可用的 API。使用 WebView 是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:35:51.137

目前没有任何东西，我不相信 WebView 版本会起作用，因为环聊需要谷歌安装的相机插件，而它在移动浏览器上不可用。

[在 android 中启动 google 视频群聊](https://stackoverflow.com/questions/11127051/start-google-hangouts-in-android)

[如何使用 Intent 在 Android 中发起 Google Hangout？](https://stackoverflow.com/questions/13203364/how-can-i-start-a-google-hangout-in-android-with-an-intent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T14:57:03.977

来自[**环聊 API 参考**](https://developers.google.com/+/hangouts/api/)：

> Hangouts API 为 Hangouts 视频通话提供编程接口。它提供了一个 JavaScript 界面，使您的应用能够执行以下操作：列出环聊参与者、在环聊中的应用实例之间共享数据、控制用户界面的某些方面以及控制麦克风、摄像头和扬声器设置。[。 ..]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T02:47:35.577

> 新的环聊 API 将允许开发人员在环聊中构建自己的体验，并构建使用环聊的实时应用程序，类似于谷歌自己的内置 YouTube 播放器。YouTube 播放器可让环聊中的 Google+ 用户同时一起观看视频。
> 
> **谷歌今天还宣布将屏幕共享、谷歌文档编辑和草图作为谷歌+环聊的新内置功能，从而迫使开发人员在构建应用程序时，超越显而易见的集成，更多地使用环聊 API。**

[在http://techcrunch.com/2011/09/20/google-launches-hangouts-api-for-developers/](http://techcrunch.com/2011/09/20/google-launches-hangouts-api-for-developers/)上查看更多信息

# c# - 如何为 Windows 7/8 实现自动播放

> ID：15227425
> 
> 赞同：3
> 
> 时间：2013-03-05T15:18:18.097
> 
> 标签：c#, c++, windows-7, windows-8, autoplay

快速信息：我使用的是 Visual Studio 2008、Windows 8（64 位）。

我正在尝试创建一个自动播放处理程序，当 WPD 设备插入计算机时它会呈现自己。如果选择了我的自动播放选项，我想做的只是启动我的应用程序。

由于最近没有任何实现 Windows 自动播放的示例，我希望有人可以帮助我并回答几个问题：

1）。我创建了一个带有实现 IHWEventHandler 接口的 COM 对象的 ATL 项目。最初，我试图让 COM 对象做的只是在我的 C 驱动器中创建一个 .txt 文件，以表明它被成功调用。我尝试让我的 AutoPlay 事件指向这个 COM 对象，但是当我选择我的 AutoPlay 条目时没有任何反应。这是我的 COM 类的 .h 代码：

```
 class ATL_NO_VTABLE CSimpleAutoPlayCom :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CSimpleAutoPlayCom, &CLSID_SimpleAutoPlayCom>,
    public IHWEventHandler
    //public ISimpleAutoPlayCom
    {
    public:
    CSimpleAutoPlayCom()
    {
        ofstream myfile;
        myfile.open ("C:\\AutoPlayExerciseWorked.txt");
        myfile << "Called from Constructor.\n";
        myfile.close();
    }

    DECLARE_REGISTRY_RESOURCEID(IDR_SIMPLEAUTOPLAYCOM)

    DECLARE_NOT_AGGREGATABLE(CSimpleAutoPlayCom)

    BEGIN_COM_MAP(CSimpleAutoPlayCom)
    //COM_INTERFACE_ENTRY(ISimpleAutoPlayCom)
    COM_INTERFACE_ENTRY(IHWEventHandler)
    END_COM_MAP()
    DECLARE_PROTECT_FINAL_CONSTRUCT()

    HRESULT FinalConstruct()
    {
        return S_OK;
    }

    void FinalRelease()
    {
    }

    public:
    // IHWEventHandler
    STDMETHODIMP Initialize(__RPC__in LPCWSTR pszParams);
    STDMETHODIMP HandleEvent(__RPC__in LPCWSTR pszDeviceID, __RPC__in LPCWSTR              pszAltDeviceID, __RPC__in LPCWSTR pszEventType);
    STDMETHODIMP HandleEventWithContent(__RPC__in LPCWSTR pszDeviceID, __RPC__in LPCWSTR pszAltDeviceID, __RPC__in LPCWSTR pszEventType, __RPC__in LPCWSTR pszContentTypeHandler, __RPC__in_opt IDataObject *pdataobject);

    }; 
```

这是.cpp：

```
// CSimpleAutoPlayCom
STDMETHODIMP CSimpleAutoPlayCom::Initialize(__RPC__in LPCWSTR pszParams)
{
    ofstream myfile;
    myfile.open ("C:\\AutoPlayExerciseWorked.txt");
    myfile << "Called from Initialize\n";
    myfile.close();
    return S_OK;
}

STDMETHODIMP CSimpleAutoPlayCom::HandleEvent(__RPC__in LPCWSTR pszDeviceID, __RPC__in LPCWSTR pszAltDeviceID, __RPC__in LPCWSTR pszEventType)
{
    ofstream myfile;
    myfile.open ("C:\\AutoPlayExerciseWorked.txt");
    myfile << "Called from HandleEvent.\n";
    myfile.close();
    return S_OK;
}

STDMETHODIMP CSimpleAutoPlayCom::HandleEventWithContent(__RPC__in LPCWSTR pszDeviceID, __RPC__in LPCWSTR pszAltDeviceID, __RPC__in LPCWSTR pszEventType, __RPC__in LPCWSTR pszContentTypeHandler, __RPC__in_opt IDataObject *pdataobject)
{
    ofstream myfile;
    myfile.open ("C:\\AutoPlayExerciseWorked.txt");
    myfile << "Called from HandleEventWithContent.\n";
    myfile.close();
    return S_OK;
} 
```

总的来说，这个实现看起来正确吗？我是否需要实现任何其他接口才能让我的 AutoPlay 事件调用此 COM 对象？

我知道当我构建项目时，Visual Studio 会自动注册我的 COM 对象。我为 64 位窗口构建了我的 COM 对象，并使用 regsvr32.exe 注册了 .dll，但这似乎没有帮助。

2）。另外，我怀疑我可能没有正确注册我的自动播放注册表项。我首先手动添加了我的自动播放事件处理程序，如下所示：

HKEY_LOCAL_MACHINE > SOFTWARE > Microsoft > Windows > CurrentVersion > Explorer > AutoPlayHandlers > 处理程序 > MyAutoPlayHandler

MyAutoPlayHandler 包含以下内容：

操作 REG_SZ MyAction

DefaultIcon REG_SZ（我的应用程序图标的目录）

InvokeProgID REG_SZ（由我的 ATL 项目生成的 HKEY_CLASSES_ROOT 下的密钥名称：AutoPlayExericesCom.SimpleAutoPlayCom.1）

InvokeVerb REG_SZ 打开

提供者 REG_SZ 我自己

然后我将 MyAutoPlayHandler 添加到以下内容：

HKEY_LOCAL_MACHINE > SOFTWARE > Microsoft > Windows > CurrentVersion > Explorer > AutoPlayHandlers > EventHandlers > WPD > Function > {2D8A6512-A74C-448E-BA8A-F4AC07C49399} 这是 WPD_FUNCTIONAL_CATEGORY_ALL

很酷，所以我插入了我的 Android 设备，我在自动播放列表中看到了我的自动播放条目。我点击它，没有任何反应（没有像我预期的那样在 C 驱动器中创建 txt 文件）。

所以我另外创建了另一个键，如下所示：

HKEY_CLASSES_ROOT > MyAutoPlayDropHandler > shell > 打开 > DropTarget

其中 DropTarget 包含一个 CLSID 值，具有我创建的 COM 对象的 CLSID 思想。我将 InvokeProgID 更改为指向此键，但仍然没有任何反应。

为了进行实验，我尝试在 ShowPicturesOnArrival 键下添加我的处理程序，当插入包含图像的 USB 驱动器，然后选择我的自动播放条目时，我收到以下错误消息：

“此文件没有与之关联的程序来执行此操作。请安装程序，或者，如果已安装，请在默认程序控制面板中创建关联。”

所以现在我对 ShowPicturesOnArrival 键有某种错误响应，但为什么 WPD 没有呢？我怀疑我在某个地方遗漏了一些东西来让它工作，但我已经没有想法了。任何我可以尝试解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-23T16:01:26.340

我知道这已经有一段时间了，但是对于找到这篇文章的其他人来说，我通过复制 VLC 执行自动播放事件的方式解决了这个问题。它不允许您调用正在运行的代码，但它至少允许您使用您希望的任何命令行参数调用您的应用程序。

只需将以下注册表项添加到您的计算机，用您的应用程序替换 VLC。

```
HKEY_CLASSES_ROOT 
   VLC
       shell 
          import 
             Open
                command 
                   Default = "[Path]\vlc.exe" --started-from-file dvd:///%1

HKEY_LOCAL_MACHINE 
   SOFTWARE 
      Microsoft 
         Windows 
            CurrentVersion 
               Explorer 
                  AutoplayHandlers 
                     EventHandlers
                        PlayDVDMovieOnArrival
                           VLCPlayDVDMovieOnArrival [REG_SZ]
                     Handlers 
                        VLCPlayDVDMovieOnArrival 
                           Action [REG_SZ]= Play DVD Movie
                           DefaultIcon [REG_EXPAND_SZ]= [somepath]\VLC.exe, 0 
                           InvokeProgID [REG_SZ]= VLC.DVDMovie
                           InvokeVerb [REG_SZ]= Open
                           Provider [REG_SZ]= VideoLanVLC media player 
```

# c# - SMS加拿大没有电子邮件..使用c#

> ID：15227432
> 
> 赞同：0
> 
> 时间：2013-03-05T15:18:38.407
> 
> 标签：c#, sms

我正在寻找一种在我的 c# 应用程序中发送 SMS 的方法，而我发现的只是以电子邮件方式发送 SMS。

我想在加拿大/美国发送短信。

我发现的作品列出了这个。发送电子邮件至 5555555555@rogers.com ..

有没有人这样做过？有没有可以实现这一点的网络服务？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:30:31.193

我的这部分答案是针对特定地区的，但是鉴于您的示例，我想指出[加拿大的罗杰斯不会像您期望的那样简单地将电子邮件正文作为 SMS 发送到目标电话号码](http://communityforums.rogers.com/t5/forums/forumtopicpage/board-id/Other_mobile_device/thread-id/1532)：

> “欢迎使用 Rogers 电子邮件到 SMS。您有邮件，但未订阅：对此消息回复“是”以订阅”

我之前专门与罗杰斯打过交道，即使用户订阅了他们将得到的只是来自罗杰斯的短信，说有一条消息在等待他们 - 然后他们将不得不回复罗杰斯以实际检索他们消息。

我在 Rogers 上也经历过电子邮件到 SMS 传递的大量时间延迟 - 有时超过一个小时（有时根本没有传递消息**）** - 所以如果它们是时间敏感的消息或不能丢失的消息，我会避开这条路线。

一般来说，我的建议是使用实际的 SMS 网关服务来发送消息——这样你甚至不需要知道他们的运营商。

我对执行此操作的服务的建议是来自 Amazon Web Services的[Simple Notification Service ，或](http://aws.amazon.com/sns/)[Twilio SMS](http://www.twilio.com/sms)。两者都需要花钱，但如果数量较少，这将为您节省数天的调试时间。SNS 免费套餐可让您每月免费发送 100 条 SMS 消息，之后每条额外消息仅需 0.75 美分。

# java - 通过创建 Thread 的子类，然后从主类创建、初始化和启动两个 Thread 对象来创建多线程程序。

> ID：15227439
> 
> 赞同：-6
> 
> 时间：2013-03-05T15:19:20.100
> 
> 标签：java, multithreading

通过创建 Thread 的子类，然后从主类创建、初始化和启动两个 Thread 对象来创建多线程程序。线程将在合适的接口中执行以下输出。

**OUTPUT :
thread1: Java
thread1: is
thread2: Java
thread1: an
thread2: is
thread1: 令人兴奋
thread2: an
thread1: new
thread2: 令人兴奋
thread1: 语言
thread1: for
thread1: 并发
thread2: new
thread1: 编程。
thread2: 语言
thread2: for
thread2: 并发
thread2: 编程。**

这是我的编码似乎先调用线程 1，然后调用线程 2。如何让它像输出一样显示。

```
class Thread1 extends Thread {

    public void run() {
        System.out.println("Thread1: Java");
        System.out.println("Thread1: is ");
        System.out.println("Thread1: exciting ");
        System.out.println("Thread1: new ");
        System.out.println("Thread1: language ");
        System.out.println("Thread1: for ");
        System.out.println("Thread1: concurrent ");
        System.out.println("Thread1: programming ");

    }
}

class Thread2 extends Thread {

    public void run() {
        System.out.println("Thread2 Java");
        System.out.println("Thread2: an ");
        System.out.println("Thread2: is ");
        System.out.println("Thread2: an ");
        System.out.println("Thread2: exciting");
        System.out.println("Thread2: new");
        System.out.println("Thread2: language");
        System.out.println("Thread2: for");
        System.out.println("Thread2: concurrent");
        System.out.println("Thread2: programming");
        suspend();
    }
}
class Thread3 extends Thread
{
public void run()
{
System.out.print("Thread3");
try
        {
sleep(1000);
}
catch(Exception e)
{
}

System.out.print(" Running");
}
}

class ThreadDemo3
{
public static void main(String args[]) throws InterruptedException
{
Thread1 obj1 = new Thread1();
obj1.start();
Thread2 obj2 = new Thread2();
obj2.start();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:29:09.057

执行它直到你得到想要的结果。

不认真，这是一个典型的例子，表明线程不**按**特定顺序执行。

因此，每次运行程序时，程序的输出都应该不同（不可预测）。但你试图做到这一点。

一种解决方案可能是使用您获取的锁（请参阅[synchronized](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)），当另一个线程应该完成工作时释放它（请记住添加某种等待以防止线程立即重新获取锁），但这会适得其反这里。

顺便说一句：在我看来，这就像您将作业复制到 SO 一样。

**编辑**：获取一台较旧的机器，当新线程启动时，第一个线程尚未完成。

真的，**预测**命令执行的顺序就像玩轮盘赌一样。你可以试试，但最后你会松懈的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:34:29.007

没有不乱的方式来做这种疯狂的事情。如果我被迫在枪口下这样做，我可能会让每个线程运行一个 switch/case 状态机，当需要线程交换时，向另一个线程发出信号量并等待另一个信号量的状态-机发回信号。

# c++ - C ++读取用户输入比较数组

> ID：15227440
> 
> 赞同：0
> 
> 时间：2013-03-05T15:19:21.857
> 
> 标签：c++, arrays, c++11

我有这段代码，它读取用户代码并将其存储在数组中，然后在每个数组上找到元素的总和并比较它们，代码如下：

```
#include <iostream>
#include <vector>
#include <numeric>

typedef std::vector<int> int_vec_t;

//Call by reference to set variables in function
void readData(int_vec_t& v1, int_vec_t& v2)
{
  v1 = int_vec_t{1,1,8}; //This only works for C++11
  v2 = int_vec_t{2,2,2};
}

void readUserData(int_vec_t& v)
{
  for(;;)
  {
    int val;
    std::cin>>val;
    if(val == 0) break;
    v.push_back(val);
  }
}

int main()
{
    using namespace std;

    int_vec_t A;
    int_vec_t B;

    readData(A,B);
    //Or
    readUserData(A);
    readUserData(B);

    int sumA = accumulate(A.begin(), A.end(), 0); //Then use iterators
    int sumB = accumulate(B.begin(), B.end(), 0);

    cout << ((sumA > sumB) ? "Array A Greater Than Array B\n" : "Array B Greater Than Array A\n");

    return 0;
} 
```

但是上面的代码会产生以下错误：

```
test.cpp: In function ‘void readData(int_vec_t&, int_vec_t&)’: 
```

我`g++ test.cpp -o test`用来编译代码。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:23:02.463

你不认为编译应该是这样的：

`$ g++ -std=c++11 test.cpp -o test`?

> 它一直在接受输入，我怎么能限制它每个数组只接受 5 个元素

```
void readUserData(int_vec_t& v)
{
  for(int i = 0; i < 5; i++)
  {
    int val;
    std::cin>>val;
   // if(val == 0) return;
    v.push_back(val);
  }
} 
```

> 非常感谢，在循环之间如何输出语句，以便用户知道他正在为数组 1 和数组 2 输入数组？

```
void readUserData(int_vec_t& v, std::string default = "")
{
  for(int i = 0; i < 5; i++)
  {
    int val;
    std::cout << "Enter for "<< default << "[" << i << "]: ";
    std::cin>>val;
   // if(val == 0) return;
    v.push_back(val);
  }
} 
```

并且`main()`您可以发送不同的字符串。

例如像这样：

```
readUserData(A, "A");
readUserData(B, "B"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:04:14.473

[这是我发布的代码，作为C++ 将函数传递给主要错误](https://stackoverflow.com/questions/15225040/c-passing-function-into-main-error/15225669#15225669)的建议解决方案

是的，它需要代码中所述的 C++11 编译器。它也从来没有被认为是最终代码。

我会推荐 OP 阅读一本关于 C++ 的好书。让我建议“C++ 编程语言” [http://www.amazon.com/The-Programming-Language-3rd-Edition/dp/0201889544](https://rads.stackoverflow.com/amzn/click/com/0201889544)

# asp.net-mvc - ASP.NET MVC - RequireJS 最佳多页应用解决方案

> ID：15227442
> 
> 赞同：5
> 
> 时间：2013-03-05T15:19:29.717
> 
> 标签：asp.net-mvc, requirejs, multipage

我正在尝试将我当前的 MVC 站点之一转换为使用 requirejs ......我能够让事情“工作”......但是，我所做的看起来很混乱。

我在互联网上找到的与 requirejs 相关的所有内容都真正集中在单页应用程序上 [例如，John Papa 的 Code Camper]……但是，就我而言，这是一个多页应用程序……从我可以看到，“main.js”方法确实只对 SPA 有用。

我已经阅读并下载了 Stephan Prodan 的 RequireJS 服务器端实现：http: [//www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/](http://www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/)

我不确定这是否是最适合的模型......是否有人有一些好的模型（示例）来说明他们在 ASP.NET MVC 的多页场景中使用 requirejs 的方法？

或者....您认为斯蒂芬的方法足够吗？

我被卡住了，似乎无法真正做出决定并扣动扳机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T01:08:55.800

尝试在此处遵循通用多页应用程序的指南：[https](https://stackoverflow.com/a/10816983/1225352) ://stackoverflow.com/a/10816983/1225352 。

该答案引用了requirejs作者的示例多页应用程序：[https ://github.com/requirejs/example-multipage](https://github.com/requirejs/example-multipage)

# jquery - 使用 javascript 从元素中提取 CSS

> ID：15227445
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:19:36.063
> 
> 标签：jquery, css

是否可以构建一种可以在任何页面中运行的 Applet，并通过选择一个元素来提取它的 css 属性？

想象一下，像 firebug 一样，您可以选择要查看代码的 div，但是您可以选择例如一个按钮并在可以复制和粘贴的可选字段中获取它的 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:23:23.260

[您可以通过window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)获取 CSSStyleDeclaration 对象

```
var styles = window.getComputedStyle(document.getElementById('foo'), null);
for (style in styles) {
    if (styles.hasOwnProperty(style)) {
        console.log(style, styles[style]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:24:04.973

不确定 Firebug 错误 Chrome 的开发者工具为您提供了可以复制、粘贴和编辑的 CSS。它还显示了样式来自哪些文件、内部样式或内联的细分，以及最终级联的“计算样式”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:22:41.757

我要感谢谁试图帮助解决这个问题。

在考虑了我的要求和想做的事情之后，我们已经可以在内置的浏览器 Web 开发工具（如 chrome 或 firefox）上找到它。

重新发明轮子是没有意义的，所以答案是，是的，可以使用 javascript 这样做，但没有必要，因为我们已经可以找到工具来实现相同的结果，即检查 html 和 css 并能够复制/从源中提取它。

感谢您的宝贵时间，对于给您带来的不便，我们深表歉意。

# ajax - AJAX 在 jQuery 1.8.3 中工作，但不在 1.9.1 中

> ID：15227446
> 
> 赞同：1
> 
> 时间：2013-03-05T15:19:36.167
> 
> 标签：ajax, jquery

如标题所述，我有这个 AJAX 函数，它在 jQuery 1.8.3 中完美运行

```
$.ajax({
  type: "GET",
  url: "bee.php",
  success: function(msg) {
     $("#bee-section").ajaxComplete(function() {
     $(this).html(msg);
  });   
  }
}); 
```

但不能在 jQuery 1.9.1 中工作，并且根本没有显示任何内容。有什么帮助吗？谢谢。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T15:20:44.223

从[文档中](http://api.jquery.com/ajaxComplete/)：

> 然而，从 jQuery 1.8 开始，.ajaxComplete() 方法只能附加到文档。

你应该使用

```
$(document).ajaxComplete 
```

代替

```
$("#bee-section").ajaxComplete 
```

但是您不需要`ajaxComplete`在这里，因为您已经在`success`回调中。

只需使用

```
$.ajax({
  type: "GET",
  url: "bee.php",
  success: function(msg) {
     $("#bee-section").html(msg);
  }
}); 
```

甚至更简单：

```
$("#bee-section").load("bee.php"); 
```

# javascript - 在 Mozilla Persona 中登录后如何更新 loggedInUser

> ID：15227451
> 
> 赞同：6
> 
> 时间：2013-03-05T15:19:46.383
> 
> 标签：javascript, login, angularjs, mozilla, browserid

我在一个项目中使用 Mozilla Persona。我想在`loggedInUser`之后更新`onlogin`。但是`loggedInUser`是传递给的对象的属性`navigator.id.watch()`。 `navigator.id.watch()`被调用一次（在 AngularJS 服务中）。我应该再次调用它，传递完整的对象吗？好像不太对。我错了吗？=P

这是我的服务：

```
app.factory('persona', function ($rootScope, $http) {
navigator.id.watch({
    loggedInUser: null,
    onlogin: function onlogin(assertion) {
        console.log(this);
        $http.post('/signIn', { assertion: assertion })
            .then(function (data, status, headers, config) {
                $rootScope.$broadcast('signIn', data.data);
            }, function (data, status, headers, config) {
                $rootScope.$broadcast('signInError', data.data);
            });
    },
    onlogout: function onlogout(param) {
        $http.get('/signOut')
            .then(function (data, status, headers, config) {
                $rootScope.$broadcast('signOut', data.data);
            }, function (data, status, headers, config) {
                $rootScope.$broadcast('signOutError', data.data);
            });
    }
});

return {
    signIn: function signIn() {
        navigator.id.request();
    },
    signOut: function signOut() {
        navigator.id.logout();
    }
};
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:34:12.883

难道你不能让loggedInUser成为全局或至少在与你的navigator.id.watch方法相同范围内的“本地全局”，就像MDN示例一样？

之后，您可以从 Persona 服务获取 JSON 响应，其中包含一些数据，包括电子邮件。因此，您可以在 AJAX 响应中传递该数据并填充 loggedInUser 变量

[https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup#Step_3.3A_Watch_for_login_and_logout_actions](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup#Step_3.3A_Watch_for_login_and_logout_actions)

```
var currentUser = 'bob@example.com';

navigator.id.watch({
  loggedInUser: currentUser,
  onlogin: function(assertion) {
    $.ajax({ 
      type: 'POST',
      url: '/auth/login', // This is a URL on your website.
      data: {assertion: assertion},
      success: function(res, status, xhr) { window.location.reload(); },
      error: function(xhr, status, err) {
        navigator.id.logout();
        alert("Login failure: " + err);
      }
    });
  },
  onlogout: function() {
    $.ajax({
      type: 'POST',
      url: '/auth/logout', // This is a URL on your website.
      success: function(res, status, xhr) { window.location.reload(); },
      error: function(xhr, status, err) { alert("Logout failure: " + err); }
    });
  }
}); 
```

来自 MDN 的 JSON 响应示例：

```
{
  "status": "okay",
  "email": "bob@eyedee.me",
  "audience": "https://example.com:443",
  "expires": 1308859352261,
  "issuer": "eyedee.me"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T16:25:00.470

在`navigator.id.watch`调用时，设置`loggedInUser: localStorage.getItem('persona') || null`（`null`重要），然后，当 Persona 登录成功时，做`localStorage.setItem('persona', theUserEmail)`，当它失败时，做`localStorage.removeItem('persona')`。

# c# - 部分视图提交

> ID：15227452
> 
> 赞同：2
> 
> 时间：2013-03-05T15:19:51.680
> 
> 标签：c#, asp.net-mvc, jquery, model-view-controller

我有一个下拉列表的视图，在更改此下拉列表时，我使用 Jquery Ajax 获取 id 并填充部分视图，如下所示：

```
$.ajax({
                url: '/Edit/Fill',
                type: 'POST',
                async: true,
                data: { ID: ID },
                success: function (data) {
                    $('#Par').html(data);
                }, 
```

我的部分视图中有一个按钮，用于保存我的数据，我想在保存后返回同一页面。

```
[HttpPost]
    public PartialViewResult Index(FormCollection All)
    {
    //My Code

    Return PartialView();
 } 
```

我也尝试返回相同的局部视图，没有用？？我想在部分视图中提交按钮后留在同一页面

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:22:45.093

您的 ajax 方法指向`/Edit/Fill`，但您的操作方法名为`Index`。你不是说`/Edit/Index`吗？其余的代码看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:39:52.620

*   选项1：如果您的局部视图不是复杂视图，请避免返回局部视图...而是尝试从您的 Ajax 调用返回 json 数据，并使用 Jquery 将 json 数据绑定到父视图。

*   选项 2：当您点击保存时，尝试使用 Ajax 调用来保存您的数据，而不是表单提交。

*   选项 3：表单提交需要重新加载页面，因此在页面加载时收集下拉 ID 并执行 Ajax 调用以加载部分视图。（您可能必须使用会话数据在局部视图中加载正确的值）

# sql-server-2008 - 对链接服务器之间的两个数据库表运行查询导致排序错误

> ID：15227454
> 
> 赞同：2
> 
> 时间：2013-03-05T15:19:52.407
> 
> 标签：sql-server-2008, debugging, select, collation, dbo

```
Cannot resolve the collation conflict between
"SQL_Icelandic_Pref_CP1_CI_AS" and "SQL_Latin1_General_CP1_CI_AS" in 
the equal to operation. 
```

我正在尝试检查两个表之间的重复项并创建了一个链接服务器，然后创建了以下查询，但我不断收到以下错误，并且想知道是否有更好的方法来执行此操作或如何修复此错误：

```
 select A.siteid
  from siteids A, DBSERVER02.PostFeeds.dbo.siteids B
  where A.siteid = B.siteid 
```

我还被告知，鉴于我在两个表中都有超过 1 亿条记录，这个查询将需要很长时间才能运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:22:03.623

尝试在其中一个字段之后使用“collat​​e”子句。如果您不知道哪个是哪个，只需键入：

```
where A.siteid collate database_default = B.siteid collate database_default 
```

# mysql - 加入两个 sql SELECT 语句，其中一个有单个记录，另一个有多个记录

> ID：15227459
> 
> 赞同：1
> 
> 时间：2013-03-05T15:20:02.620
> 
> 标签：mysql, sql, select, join, left-join

我有两个表，第一个是 mda_alert_info，第二个是 key_contacts_info。对于每个警报设置，可能有多个相应的联系人。两个表都由 3 列 mda_id、stage_id 和 ref_number 链接，在查询期间我必须为它们传递数字值

如何在一个语句中从两个表中获得我想要的所有内容。下面是单独的 SELECT 语句。

```
$result = mysql_query("SELECT `mda_name`, `project_name`, `ipc_id` FROM `mda_alert_info` WHERE `stage_id`=1 AND `mda_id`=2 AND `ref_number`= '444'"); 
```

这将始终返回一条记录

```
$result = mysql_query("SELECT `contact_role`, `contact_email`, `contact_ph_number` FROM `key_contacts_info` WHERE `stage_id`=1 AND `mda_id`=2 AND `role`=0 AND `ref_number`='444'"); 
```

这可能会返回多条记录

我尝试了一段时间，但无法让它工作，所以我尝试在两个表中添加另一个名为“me”的字段，该字段基本上是连接 mda_id 和 stage_id 字符串，然后我尝试了下面的查询。

```
$result = mysql_query("SELECT key_contacts_info.contact_role, key_contacts_info.contact_email, key_contacts_info.contact_ph_number, mda_alert_info.mda_name, mda_alert_info.project_name, mda_alert_info.ipc_id FROM key_contacts_info LEFT JOIN mda_alert_info ON key_contacts_info.me = mda_alert_info.me WHERE stage_id=1 AND mda_id=2 AND role=0 AND ref_number='444'"); 
```

但它仍然无法正常工作。我做错了什么以及如何让它发挥作用。

更新：

抱歉，但我应该澄清一下表之间的关系这三列存在于每个表上，但不是任何一个表上的主键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:24:04.990

```
SELECT  a.*, b.*
FROM    mda_alert_info a
        INNER JOIN key_contacts_info b
            ON  a.mda_id = b.mda_id AND
                a.stage_id = b.stage_id AND
                a.ref_number = b.ref_number 
WHERE   b.role = 0 AND
        a.stage_id = 1 AND 
        a.mda_id = 2 AND 
        a.ref_number = '444' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:25:15.920

```
select
    a.mda_name,
    a.project_name,
    a.lpc_id,
    k.contact_role,
    k.contact_email,
    k.contact_ph_number
from mda_alert_info a
join key_contacts_info k
    on a.state_id = k.state_id
    and a.mda_id = k.mda_id
    and a.ref_number = k.ref_number
where a.state_id = 1
  and a.mda_id = 2
  and a.ref_number = '444'
  and k.role = 0
; 
```

# opengl - 什么更快？glFramebufferTexture2D 输出闪烁

> ID：15227467
> 
> 赞同：0
> 
> 时间：2013-03-05T15:20:20.343
> 
> 标签：opengl, blur, gaussian, post-processing

在我的程序中，我使用 glFramebufferTexture2D 来设置目标。但是如果我使用它，输出就会开始闪烁。如果我使用两个帧缓冲区，输出看起来很正常。

有谁知道为什么会发生这种情况，或者在下面的源代码中有什么更好的地方？- 这是一个例子，一些不相关的代码不在里面。

```
// bind framebuffer for post process
::glBindFramebuffer(GL_DRAW_FRAMEBUFFER, m_SwapBuffer);

::glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_SwapBufferTargets[SwapBufferTarget1]->m_NativeTextureHandle, 0);

unsigned int DrawAttachments = { GL_COLOR_ATTACHMENT0 };

::glDrawBuffers(1, &DrawAttachments);

...

// render gaussian blur
m_Shader->Use();

::glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_BlurredImageFromPass1->m_NativeTextureHandle, 0);
_InputTexturePtr->ActivateTexture(GL_TEXTURE0);
RenderMesh();

::glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, _TargetTexturePtr->m_NativeTextureHandle, 0);
m_BlurredImageFromPass1->ActivateTexture(GL_TEXTURE0);
RenderMesh();

...

// copy swap buffer to system buffer
::glBindFramebuffer(GL_READ_FRAMEBUFFER, m_SwapBuffer);

::glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);

::glBlitFramebuffer(0, 0, m_pConfig->m_Width, m_pConfig->m_Height, 0, 0, m_pConfig->m_Width, m_pConfig->m_Height, GL_COLOR_BUFFER_BIT, GL_NEAREST); 
```

编辑：我发现了问题！它在我的交换链中。我已经渲染了原始图片，然后是黑色的。因此，如果帧速率下降，我会闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:26:05.867

这可能更适合评论，但太大了，所以我把它放在这里。您的 OpenGL 语义在以下代码段中似​​乎有点偏离：

```
::glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_BlurredImageFromPass1->m_NativeTextureHandle, 0);
_InputTexturePtr->ActivateTexture(GL_TEXTURE0);
RenderMesh();

::glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, _TargetTexturePtr->m_NativeTextureHandle, 0);
m_BlurredImageFromPass1->ActivateTexture(GL_TEXTURE0);
RenderMesh(); 
```

glActiveTexture（以及您的 ActivateTexture 包装器）纯粹用于在将纹理 INPUT 绑定到着色器程序中的采样器时设置活动纹理槽，并且 glFramebufferTexture2D 与 glDrawBuffers 结合使用以设置着色器程序的目标输出。因此，glActiveTexture 和 glFramebufferTexture2D 可能不应该在同一绘制操作期间用于同一纹理。（尽管我认为这不是导致闪烁的原因）此外，我看不到您绑定/释放纹理句柄的位置。OpenGL 的做法通常是只在需要时绑定对象并在之后立即释放它们。由于 OpenGL 是一个状态机，忘记释放对象真的会在大型项目中咬你一口。

此外，当您使用 glActiveTexture（或任何 glActiveTexture 包装器）将纹理绑定到纹理槽时，始终在绑定纹理句柄之前调用 glActiveTexture。

# python - uWSGI 优化选项

> ID：15227472
> 
> 赞同：2
> 
> 时间：2013-03-05T15:20:35.750
> 
> 标签：python, optimization, assert, uwsgi

我正在考虑在`assert`我的代码中添加一些语句，并希望能够将参数传递给 uwsgi 以便能够在生产中关闭评估这些语句。我似乎无法弄清楚[uwsgi 中的优化选项](http://uwsgi-docs.readthedocs.org/en/latest/Options.html#optimize)如何映射到[python 的 -O 命令行值](http://docs.python.org/3.3/using/cmdline.html#cmdoption-O)。uWSGI 的选项接受一个整数，但除了说“设置 python 优化级别”之外，没有说明它如何解释或使用该整数。但是，python 文档从不提及整数，除非与环境变量有关，并且只有整数等效于多个`-O`参数（我也看不到任何关于它的作用的描述，尽管我怀疑它可能会做类似的事情`-OO`）

那么，我应该将`optimize`值设置为什么来简单地关闭断言语句，如果我还想删除文档字符串，它应该设置为什么？并将其设置为默认值 0（零）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-01T13:27:52.230

我通过将其设置为零来测试它并且调试仍然打开，但将其设置为大于零的任何数字都会关闭调试。

我的代码看起来像这样

```
def application(env, start_response):
    start_response('200 OK', [('Content-Type','text/html')])
    assert(not __debug__)
    return "Hello World" 
```

我的电话看起来像这样

```
uwsgi --http 0.0.0.0:8000 --wsgi-file app.py -O 1 
```

编辑我还在函数中添加了一个文档字符串，并将其添加到 app.py 文件的末尾

```
print "DOC STRING: %s" % application.__doc__ 
```

并使用 -O 设置为 1 和 2 进行测试，使用 1，我得到一个文档字符串，任何大于 1 的值我得到一个无。

# python - Super 使用 sqlalchemy mixins 作为默认值

> ID：15227473
> 
> 赞同：0
> 
> 时间：2013-03-05T15:20:36.613
> 
> 标签：python, database-design, sqlalchemy, mixins

我有一个 sqlalchemy mixin，我想为 mixin 的列设置一个默认值，但我还没有找到直接的答案，并且已经采用了各种科学方法的反复试验。这是我的第一次尝试，我还没有机会使用它：

```
class ExampleMixin(object):
    """Mixin for `AnExample`"""

    def __init__(self, example_id):
       self.example_id = HMAC("{}".format(urandom(32).encode('base_64'))).hexdigest()
       super(ExampleMixin, self).__init__(self.example_id)

    example_id = Column(String(255)) 
```

诚然，我还没有完全理解 super 的使用，但是我需要一种方法来为 mixin 提供默认值，而不是将其放入接收 mixin 的模型中。我确定以上内容并不完全正确，但这是我开始的地方。

您如何提供仅在创建时初始化一次的默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:04:34.507

根据[Mixing in Columns](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html?highlight=mixin#mixing-in-columns)和[Column Insert/Update Defaults](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html?highlight=column#column-insert-update-defaults)，下面的代码应该可以实现您想要的：

```
def _example_id_default():
    return HMAC("{}".format(urandom(32).encode('base_64'))).hexdigest()

class ExampleMixin(object):
    """Mixin for `AnExample`"""

    example_id = Column(String(255), default=_example_id_default) 
```

# java - 应用程序获得网站响应

> ID：15227476
> 
> 赞同：0
> 
> 时间：2013-03-05T15:20:44.293
> 
> 标签：java, android, eclipse

NET 开发人员，不了解 android。你能帮我修复这个代码吗

> 异常：client.execute(get1) 上的 android.os.networkmainthreadException

```
 try
        {

            HttpGet  get1 = new HttpGet ("http://www.google.com/");
            HttpClient client = new DefaultHttpClient();            
            HttpResponse response =   client.execute(get1);
            HttpEntity entity = response.getEntity();
            String responseText = EntityUtils.toString(entity);

        }
        catch(Exception e  )
        {
            urlview.setText( "hi bug"+ e.toString());               
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:22:29.673

您正在 UI 线程上进行网络操作，这在 android 版本 >=3.0 中是不允许的，因此请使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 通用java接口

> ID：15227481
> 
> 赞同：-2
> 
> 时间：2013-03-05T15:21:01.570
> 
> 标签：java, generics, interface

我是泛型的新手。我想`SearchableFruit`为许多“水果”类编写一个接口，例如：

```
public interface SearchableFruit<T>{
    //returns a list of newer fruit object than current fruit object
    public static List<T> searchNewerFruit(T curr); 
} 
```

所以我可以将此接口用于类`Apple`和`Orange`：

```
public class Apple implements SearchableFruit{
    public static List<Apple> searchNewerFruit(Apple currentApple){
    //TODO get apples newers than currentApple
    //return a list of Apples
}

} 
```

我以前从未做过界面，这对我不起作用，你能澄清一下我应该如何正确编写它吗？

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:25:03.160

首先，接口不能包含静态方法。其次，您错过了实现中的类型。正确的：

```
public class Apple implements SearchableFruit<Apple>{
    public List<Apple> searchNewerFruit(Apple currentApple){
    //TODO get apples newers than currentApple
    //return a list of Apples
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:25:09.507

应该是这样的

```
public interface SearchableFruit<T>{
    public List<T> searchNewerFruit(T curr); 
}

public class Apple implements SearchableFruit<Apple> {
    public List<Apple> searchNewerFruit(Apple currentApple){
        // impl
    }
} 
```

# php - 检查输入的日期时间是否在 2 个日期时间值的范围内

> ID：15227484
> 
> 赞同：0
> 
> 时间：2013-03-05T15:21:11.420
> 
> 标签：php, mysql, between

我有一个包含 2 列 startdate 和 enddate 的表，用于存储特定场所中有趣节目的开始和结束时间。（两列的格式均为 datetime-format 为 'Ymd H:i:s'）。当用户创建`a program within this time limit`或`the end time of the program lies within the time limit but not the start time`或`the start time lies within the time limit but not the end time`，程序不应插入显示警报的表中。我已经编写了这样的查询。但它不能正常工作。

```
SELECT * FROM tbl_venue WHERE venue_id='id' AND
((venue_start_datetime BETWEEN 'entered starttime' AND 'entered end time')
AND (venue_stop_datetime BETWEEN 'entered starttime' AND 'entered end time')) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:24:04.647

尝试这个：

```
SELECT * 
FROM tbl_venue 
WHERE venue_id='id' AND
'entered starttime' >= venue_start_datetime
AND 'entered end time' <= venue_stop_datetime
AND 'entered starttime' <= 'entered end time' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:24:16.243

您只需要测试输入的 startdate 是否在 start 和 enddate 之间，或者 entererd enddate 是否在 start 和 enddate 之间

```
SELECT * FROM tbl_venue WHERE venue_id='id' AND
('entered starttime' BETWEEN venue_start_datetime AND venue_stop_datetime
OR 'entered endtime' BETWEEN venue_start_datetime AND venue_stop_datetime) 
```

# azure-table-storage - 如何在 Azure 表和 Azure 上的 Hadoop 之间传输数据

> ID：15227487
> 
> 赞同：3
> 
> 时间：2013-03-05T15:21:20.947
> 
> 标签：azure-table-storage

我想从 Azure 表中导入数据，然后导出到 Azure 上的 Hadoop 集群。目前我正在将 Azure 表中的数据下载到 .csv 中，然后将 .csv 上传到 Hadoop 集群。我想知道有没有办法直接做。

谢谢，基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T11:02:14.103

我编写了一个 HiveStorageHandler，它可以让您创建由 Azure 存储表支持的 Hive 表。它在 github 上可用：

[https://github.com/simonellistonball/hive-azuretables](https://github.com/simonellistonball/hive-azuretables)

请注意，您还需要在 hadoop 类路径中使用[Microsoft Azure SDK for Java才能正常工作。](http://www.windowsazure.com/en-us/develop/java/)最简单的方法可能是将它安装在像 /usr/lib/hadoop/lib/ 这样的中心位置。

如果你在我的 repo 上做了一个 mvn 包，你应该得到一些你可以用 hive ADD JAR 加载的东西。存储库的[自述文件](https://github.com/simonellistonball/hive-azuretables/blob/master/README.md)包含一个示例查询，显示如何创建连接到 Azure 的 Hive 表。

# arrays - foldLeft 中的递增变量

> ID：15227488
> 
> 赞同：7
> 
> 时间：2013-03-05T15:21:25.690
> 
> 标签：arrays, scala, increment, accumulator

我有这样的Scala代码

```
var i = 1
for(e <- array) {
    acc += e * i
    i += 1
} 
```

我需要将数组中的第一个元素乘以 1，下一个元素乘以 2，下一个元素乘以 3，依此类推，将其全部添加到累加器中。我觉得在 Scala 中有更好的方法，甚至可以折叠？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T16:01:41.837

“更好”取决于你的目标是什么。简短而清晰？大概

```
{ for (i <- array.indices; e = array(i)) yield (i+1)*e }.sum 
```

或者

```
array.indices.map(i => (i+1)*array(i)).sum 
```

（或者稍微快一点，因为您可以随时创建中间体：

```
array.indices.iterator.map(i => (i+1)*array(i)).sum 
```

）。

你通常应该简短而清晰。

快速地？然后你需要去老派：

```
var i = 0
var acc = 0
while (i < array.length) {
  acc += (i+1)*array(i)
  i += 1
} 
```

或使用递归

```
def sum(a: Array[Int], i: Int = 0, acc: Int = 0): Int =
  if (i >= a.length) acc else sum(a, i+1, (i+1)*a(i) + acc)
sum(array) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-05T15:31:33.253

我更喜欢 zipWithIndex ，它更易于阅读：

```
array.zipWithIndex.map { case (e, i) => e * (i + 1) }.sum 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T15:27:12.293

```
val x = List(1,1,1,1,1,1)
(((0,1) /: x){case ((acc, mult), l) => (acc + (l * mult), mult + 1) })._1 
```

换句话说，从 0 的累加器和 1 的乘数开始，将列表的每个元素折叠起来，将累加器更改为`acc + (l * mult)`并将乘数增加 1。我们最后也得到了最终的乘数，所以我们调用`._1`只是得到累加器。

编辑：正如@RexKerr 在下面的回答（和评论）中指出的那样，如果性能是一个主要问题，那么最好使用显式递归方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:36:24.503

我不确定我的建议是否是一种更好的方法，因为它更实用（==它会执行得更慢）：

`(0 /: (array zipWithIndex)) {(a, i) => (i._1 * (i._2 + 1)) + a}`

[这确实对由http://www.scala-lang.org/api/current/index.html#scala.Array](http://www.scala-lang.org/api/current/index.html#scala.Array)中的 zipWithIndex 方法生成的数组执行 foldLeft

zipWithIndex 只是用它们的索引压缩集合的元素。

# performance - 提高applescript击键的速度

> ID：15227490
> 
> 赞同：1
> 
> 时间：2013-03-05T15:21:27.180
> 
> 标签：performance, applescript, keystrokes

我正在使用 applescript 来自动化一些浏览器活动。我将它与语音识别相关联，这样我就可以制作一些自定义语音命令。

一个这样的命令是“我想回家”，当听到它时，会在我的浏览器上调出相关的巴士时刻表。鉴于公共交通系统使用 PHP 和 GET，URL 会变得很长。因此，`keystroke myURL`applescript 中的 执行需要一段时间（大约 1-2 秒）。虽然我可以忍受失去 1-2 秒，但我真的不想这样做。

考虑到这一点，是否可以更快地发送这些击键？我相信我在某处读到 using`key code`比 using 更快`keystroke`，但对于我的一生，我无法弄清楚我在哪里读到的。

**编辑**：我选择的浏览器是谷歌浏览器，我找不到 URL 挂钩。这就是为什么我不得不求助于使用击键。因此，我更喜欢使用 Chrome 而不是 Safari 的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-24T00:54:55.097

解决此问题的另一种方法是将文本放入剪贴板，然后粘贴。您可以先保存剪贴板内容，然后再将其放回原处，这样您就不会丢失已经存在的内容。当您想要输入大量文本时，此方法适用于其他情况，而不仅仅是像其他答案那样用于浏览器 URL。

```
 set clipboard_contents to (the clipboard)
    set the clipboard to "Some long string that would take a while with the keystroke method"
    tell application "System Events" to keystroke "v" using command down
    delay 0.2 -- needed because otherwise the next command can run before the paste occurs
    set the clipboard to clipboard_contents 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:25:54.923

我很确定您可以编写浏览器脚本以直接打开 URL，而不是键入击键（AppleScript 中的伪造输入事件应该被视为最后的手段）。

您可以通过`open location`标准添加来做到这一点：

```
open location "http://google.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:41:00.653

打开位置在标准添加中定义，不应包含在告诉语句中。

```
open location "http://google.com" 
```

如果要针对特定​​浏览器，可以使用：

```
tell application "Safari"
    if not (exists document 1) then reopen
    set URL of document 1 to "http://google.com"
end tell 
```

以 Chrome 为目标：

```
tell application "Google Chrome"
    if not (exists window 1) then reopen
    set URL of active tab of window 1 to "https://www.google.com/"
end tell 
```

# c# - 如何允许服务器同时接受 SSL 和纯文本（不安全）连接？

> ID：15227492
> 
> 赞同：6
> 
> 时间：2013-03-05T15:21:31.773
> 
> 标签：c#, ssl, client-server, networkstream, sslstream

我正在尝试创建一个可以接受安全 SSL 和不安全纯文本连接的服务器（为了向后兼容）。我的代码几乎可以工作，除了从不安全的客户端接收到的第一个传输数据在服务器上丢失了前 5 个字节（字符）。更具体地说，如果我在不安全的连接上传输 30 个字节，当服务器到达`OnClientDataReceived()`函数时，行“ `int iRx = nwStream.EndRead(asyn);`”，然后`iRx = 25`. 从客户端传输的任何后续消息都按预期包含所有发送的字节/字符。我怀疑连接的最初假设是`SSLStream`可能正在剥离前 5 个字节，然后当它失败时，这 5 个字节已经从缓冲区中提取并且不再可用。有没有人知道我可以采取另一种方法来编写代码，以便服务器可以自动即时切换？

我试图避免执行以下操作：

*   要求客户端使用纯文本连接`NetworkStream`，然后请求升级到 SSL 流
*   在两个不同的端口上设置两个`TcpListeners`（一个用于安全，一个用于不安全）

## 这是我的代码：

```
/// Each client that connects gets an instance of the ConnectedClient class.
Class Pseudo_ConnectedClient
{
    //Properties
    byte[] Buffer; //Holds temporary buffer of read bytes from BeginRead()
    TcpClient TCPClient; //Reference to the connected client
    Socket ClientSocket; //The outer Socket Reference of the connected client
    StringBuilder CurrentMessage; //concatenated chunks of data in buffer until we have a complete message (ends with <ETX>
    Stream Stream; //SSLStream or NetworkStream depending on client
    ArrayList MessageQueue; //Array of complete messages received from client that need to be processed
}

/// When a new client connects (OnClientConnection callback is executed), the server creates the ConnectedClient object and stores its 
/// reference in a local dictionary, then configures the callbacks for incoming data (WaitForClientData)
void OnClientConnection(IAsyncResult result)
{
    TcpListener listener = result.AsyncState as TcpListener;
    TcpClient clnt = null;

    try
    {
        if (!IsRunning) //then stop was called, so don't call EndAcceptTcpClient because it will throw and ObjectDisposedException
            return;

        //Start accepting the next connection...
        listener.BeginAcceptTcpClient(this.onClientConnection, listener);

        //Get reference to client and set flag to indicate connection accepted.
        clnt = listener.EndAcceptTcpClient(result);

        //Add the reference to our ArrayList of Connected Clients
        ConnectedClient conClnt = new ConnectedClient(clnt);
        _clientList.Add(conClnt);

        //Configure client to listen for incoming data
        WaitForClientData(conClnt);
    }
    catch (Exception ex)
    {
        Trace.WriteLine("Server:OnClientConnection: Exception - " + ex.ToString());
    }
}

/// WaitForClientData registers the AsyncCallback to handle incoming data from a client (OnClientDataReceieved).  
/// If a certificate has been provided, then it listens for clients to connect on an SSLStream and configures the 
/// BeginAuthenticateAsServer callback.  If no certificate is provided, then it only sets up a NetworkStream 
/// and prepares for the BeginRead callback.
private void WaitForClientData(ConnectedClient clnt)
{
    if (!IsRunning) return; //Then stop was called, so don't do anything

    SslStream sslStream = null;

    try
    {
        if (_pfnClientDataCallBack == null) //then define the call back function to invoke when data is received from a connected client
            _pfnClientDataCallBack = new AsyncCallback(OnClientDataReceived);

        NetworkStream nwStream = clnt.TCPClient.GetStream();

        //Check if we can establish a secure connection
        if (this.SSLCertificate != null) //Then we have the ability to make an SSL connection (SSLCertificate is a X509Certificate2 object)
        {
            if (this.certValidationCallback != null)
                sslStream = new SslStream(nwStream, true, this.certValidationCallback);
            else
                sslStream = new SslStream(nwStream, true);

            clnt.Stream = sslStream;

            //Start Listening for incoming (secure) data
            sslStream.BeginAuthenticateAsServer(this.SSLCertificate, false, SslProtocols.Default, false, onAuthenticateAsServer, clnt);
        }
        else //No certificate available to make a secure connection, so use insecure (unless not allowed)
        {
            if (this.RequireSecureConnection == false) //Then we can try to read from the insecure stream
            {
                clnt.Stream = nwStream;

                //Start Listening for incoming (unsecure) data
                nwStream.BeginRead(clnt.Buffer, 0, clnt.Buffer.Length, _pfnClientDataCallBack, clnt);
            }
            else //we can't do anything - report config problem
            {
                throw new InvalidOperationException("A PFX certificate is not loaded and the server is configured to require a secure connection");
            }
        }
    }
    catch (Exception ex)
    {
        DisconnectClient(clnt);
    }
}

/// OnAuthenticateAsServer first checks if the stream is authenticated, if it isn't it gets the TCPClient's reference 
/// to the outer NetworkStream (client.TCPClient.GetStream()) - the insecure stream and calls the BeginRead on that.  
/// If the stream is authenticated, then it keeps the reference to the SSLStream and calls BeginRead on it.
private void OnAuthenticateAsServer(IAsyncResult result)
{
    ConnectedClient clnt = null;
    SslStream sslStream = null;

    if (this.IsRunning == false) return;

    try
    {
        clnt = result.AsyncState as ConnectedClient;
        sslStream = clnt.Stream as SslStream;

        if (sslStream.IsAuthenticated)
            sslStream.EndAuthenticateAsServer(result);
        else //Try and switch to an insecure connections
        {
            if (this.RequireSecureConnection == false) //Then we are allowed to accept insecure connections
            {
                if (clnt.TCPClient.Connected)
                    clnt.Stream = clnt.TCPClient.GetStream();
            }
            else //Insecure connections are not allowed, close the connection
            {
                DisconnectClient(clnt);
            }
        }
    }
    catch (Exception ex)
    {
        DisconnectClient(clnt);
    }

    if( clnt.Stream != null) //Then we have a stream to read, start Async read
        clnt.Stream.BeginRead(clnt.Buffer, 0, clnt.Buffer.Length, _pfnClientDataCallBack, clnt);
}

/// OnClientDataReceived callback is triggered by the BeginRead async when data is available from a client.  
/// It determines if the stream (as assigned by OnAuthenticateAsServer) is an SSLStream or a NetworkStream 
/// and then reads the data out of the stream accordingly.  The logic to parse and process the message has 
/// been removed because it isn't relevant to the question.
private void OnClientDataReceived(IAsyncResult asyn)
{
    try
    {
        ConnectedClient connectClnt = asyn.AsyncState as ConnectedClient;

        if (!connectClnt.TCPClient.Connected) //Then the client is no longer connected >> clean up
        {
            DisconnectClient(connectClnt);
            return;
        }

        Stream nwStream = null;
        if( connectClnt.Stream is SslStream) //Then this client is connected via a secure stream
            nwStream = connectClnt.Stream as SslStream;
        else //this is a plain text stream
            nwStream = connectClnt.Stream as NetworkStream;

        // Complete the BeginReceive() asynchronous call by EndReceive() method which
        // will return the number of characters written to the stream by the client
        int iRx = nwStream.EndRead(asyn); //Returns the numbers of bytes in the read buffer
        char[] chars = new char[iRx];   

        // Extract the characters as a buffer and create a String
        Decoder d = ASCIIEncoding.UTF8.GetDecoder();
        d.GetChars(connectClnt.Buffer, 0, iRx, chars, 0);

        //string data = ASCIIEncoding.ASCII.GetString(buff, 0, buff.Length);
        string data = new string(chars);

        if (iRx > 0) //Then there was data in the buffer
        {
            //Append the current packet with any additional data that was already received
            connectClnt.CurrentMessage.Append(data);

            //Do work here to check for a complete message
            //Make sure two complete messages didn't get concatenated in one transmission (mobile devices)
            //Add each message to the client's messageQueue
            //Clear the currentMessage
            //Any partial messsage at the end of the buffer needs to be added to the currentMessage

            //Start reading again
            nwStream.BeginRead(connectClnt.Buffer, 0, connectClnt.Buffer.Length, OnClientDataReceived, connectClnt);
        }
        else //zero-length packet received - Disconnecting socket
        {
            DisconnectClient(connectClnt);
        }                
    }
    catch (Exception ex)
    {
        return;
    }
} 
```

# 什么有效：

*   如果服务器没有证书，则仅使用 NetworkStream，并从客户端接收所有消息的所有字节。
*   如果服务器确实有证书（设置了 SSLStream）并且可以建立安全连接（使用 https:// 的 Web 浏览器）并且收到所有消息的完整消息。

# 什么不起作用：

*   如果服务器确实具有证书（`SSLStream`已设置）并且从客户端建立了不安全的连接，则当从该客户端接收到第一条消息时，代码会正确检测到`SSLStream`未通过身份验证并切换`NetworkStream`到`TCPClient`. 但是，当`EndRead`为第一条消息调用它时`NetworkStream`，发送的消息中缺少前 5 个字符（字节），但仅限于第一条消息。只要`TCPClient`已连接，所有剩余的消息都是完整的。如果客户端断开连接然后重新连接，则第一条消息被剪裁，然后所有后续消息再次正常。

是什么导致前 5 个字节被剪裁，我该如何避免呢？

我的项目目前正在使用 .NET v3.5...如果可以避免的话，我想保持在这个版本并且不升级到 4.0。

* * *

**后续问题**

Damien 下面的回答确实允许我保留那些丢失的 5 个字节，但是，我更愿意在我的代码中坚持使用`BeginRead`and`EndRead`方法以避免阻塞。是否有任何好的教程在覆盖这些时显示“最佳实践”？更具体地说，如何使用`IAsyncResult`对象。我知道我需要添加存储在 RestartableStream 缓冲区中的任何内容，然后进入内部流（基础）以获取其余内容并返回 toral。但自从`IAsyncResult`object 是一个自定义类，我无法弄清楚在返回之前可以将 RestartableStream 的 buff 与内部流的 buff 结合起来的通用方式。我是否还需要实现 BeginRead() 以便我知道用户希望将内容存储到的缓冲区？我猜另一个解决方案是，由于丢弃字节问题仅与来自客户端的第一条消息有关（之后我知道是否将其用作 a`SSLStream`或 a `NetworkStream`），因此将通过直接调用`Read()`RestartableStream 的方法来处理第一条消息（暂时阻止代码），然后对于所有未来的消息，使用异步回调来读取内容，就像我现在所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:28:34.373

好的，我认为您能做的最好的事情就是将您自己的类放在两者之间`SslStream`，并`NetworkStream`在其中实现一些自定义缓冲。我在下面做了*一些*测试，但我建议在你投入生产之前再做一些测试（可能还有一些更强大的错误处理）。我*想*我已经避免了任何 4.0 或 4.5 主义：

```
 public sealed class RestartableReadStream : Stream
  {
    private Stream _inner;
    private List<byte[]> _buffers;
    private bool _buffering;
    private int? _currentBuffer = null;
    private int? _currentBufferPosition = null;
    public RestartableReadStream(Stream inner)
    {
      if (!inner.CanRead) throw new NotSupportedException(); //Don't know what else is being expected of us
      if (inner.CanSeek) throw new NotSupportedException(); //Just use the underlying streams ability to seek, no need for this class
      _inner = inner;
      _buffering = true;
      _buffers = new List<byte[]>();
    }

    public void StopBuffering()
    {
      _buffering = false;
      if (!_currentBuffer.HasValue)
      {
        //We aren't currently using the buffers
        _buffers = null;
        _currentBufferPosition = null;
      }
    }

    public void Restart()
    {
      if (!_buffering) throw new NotSupportedException();  //Buffering got turned off already
      if (_buffers.Count == 0) return;
      _currentBuffer = 0;
      _currentBufferPosition = 0;
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
      if (_currentBuffer.HasValue)
      {
        //Try to satisfy the read request from the current buffer
        byte[] rbuffer = _buffers[_currentBuffer.Value];
        int roffset = _currentBufferPosition.Value;
        if ((rbuffer.Length - roffset) <= count)
        {
          //Just give them what we have in the current buffer (exhausting it)
          count = (rbuffer.Length - roffset);
          for (int i = 0; i < count; i++)
          {
            buffer[offset + i] = rbuffer[roffset + i];
          }

          _currentBuffer++;
          if (_currentBuffer.Value == _buffers.Count)
          {
            //We've stopped reading from the buffers
            if (!_buffering)
              _buffers = null;
            _currentBuffer = null;
            _currentBufferPosition = null;
          }
          return count;
        }
        else
        {
          for (int i = 0; i < count; i++)
          {
            buffer[offset + i] = rbuffer[roffset + i];
          }
          _currentBufferPosition += count;
          return count;
        }
      }
      //If we reach here, we're currently using the inner stream. But may be buffering the results
      int ncount = _inner.Read(buffer, offset, count);
      if (_buffering)
      {
        byte[] rbuffer = new byte[ncount];
        for (int i = 0; i < ncount; i++)
        {
          rbuffer[i] = buffer[offset + i];
        }
        _buffers.Add(rbuffer);
      }
      return ncount;
    }

    public override bool CanRead
    {
      get { return true; }
    }

    public override bool CanSeek
    {
      get { return false; }
    }

    public override bool CanWrite
    {
      get { return false; }
    }

    //No more interesting code below here

    public override void Flush()
    {
      throw new NotSupportedException();
    }

    public override long Length
    {
      get { throw new NotSupportedException(); }
    }

    public override long Position
    {
      get
      {
        throw new NotSupportedException();
      }
      set
      {
        throw new NotSupportedException();
      }
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
      throw new NotSupportedException();
    }

    public override void SetLength(long value)
    {
      throw new NotSupportedException();
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
      throw new NotSupportedException();
    }
  } 
```

用法：

围绕`RestartableReadStream`你的`NetworkStream`. 将该实例传递给`SslStream`. 如果您认为 SSL 是错误的做事方式，请调用`Restart()`它，然后根据需要再次使用它。您甚至可以尝试两种以上的策略（`Restart()`在每种策略之间进行调用）。

一旦您确定哪种策略（例如 SSL 或非 SSL）是正确的，请致电`StopBuffering()`. 一旦它完成重放它可用的任何缓冲区，它将恢复为仅调用`Read`其内部流。如果您*不*调用`StopBuffering`，则从流中读取的整个历史记录将保存在`_buffers`列表中，这可能会增加相当多的内存压力。

请注意，以上都没有特别考虑多线程访问。但是，如果您有多个线程调用`Read()`单个流（尤其是基于网络的流），那么无论如何我都不会期望任何理智。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-09T22:09:08.390

我花了几个小时寻找不围绕 NetworkStream 编写流包装器，最后遇到了这个，它对我有用。 [MSDN SocketFlag.Peek](https://social.msdn.microsoft.com/Forums/vstudio/en-US/f21d9722-73de-4677-8345-f5e489745bc7/what-is-the-alternative-of-socketflagpeek-with-tcpclient) 我一直在寻找仅编写包装器或使用单独端口的建议，但我在聆听权限或原因时遇到问题。

这是我的代码。NLOLOL（不要大声笑或讲课）我还没有完全弄清楚我是否需​​要在所有场景中查看超过第一个字节的内容。

```
Private Async Sub ProcessTcpClient(__TcpClient As Net.Sockets.TcpClient)

        If __TcpClient Is Nothing OrElse Not __TcpClient.Connected Then Return

        Dim __RequestBuffer(0) As Byte
        Dim __BytesRead As Integer

        Using __NetworkStream As Net.Sockets.NetworkStream = __TcpClient.GetStream

            __BytesRead = __TcpClient.Client.Receive(__RequestBuffer, 0, 1, SocketFlags.Peek)
            If __BytesRead = 1 AndAlso __RequestBuffer(0) = 22 Then
                Await Me.ProcessTcpClientSsl(__NetworkStream)
            Else
                Await Me.ProcessTcpClientNonSsl(__NetworkStream)
            End If

        End Using

        __TcpClient.Close()

End Sub 
```

# ruby-on-rails - 如何将消息发送给所有用户？

> ID：15227493
> 
> 赞同：0
> 
> 时间：2013-03-05T15:21:33.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在这里，我通过参数定义收件人。
如果我想一次将消息发送给所有已经确认的用户怎么办？
我该怎么写？

有人有什么想法吗？

**控制器**

```
 recipient = User.find_by_username(params[:messages][:recipient]) 

    if recipient.confirmed_at.nil?
        redirect_to messages_sent_path 
        flash[:notice] = "This user hasn't confirmed yet!"   
        return
    end

    params[:messages][:subject] = 'no subject' if params[:messages][:subject].blank?
    subject = params[:messages][:subject] 
    body = params[:messages][:body]

    if current_user != recipient 
        current_user.send_message(recipient, body, subject) 
        redirect_to :controller => 'messages', :action => 'sent' 
        flash[:notice] = "Sent!" 
    else 
        redirect_to :controller => 'messages', :action => 'received' 
        flash[:notice] = "Cannot send to yourself!" 
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:24:12.153

如果您使用的是 mysql / sqlite3

```
users = User.where('confirmed_at IS NOT NULL')
users.each do |user|
  current_user.send_message(user, body, subject) 
end 
```

# iphone - Objective-C 从 (_bridge const void*) 类型转换为 (NSString*)

> ID：15227496
> 
> 赞同：-1
> 
> 时间：2013-03-05T15:21:51.857
> 
> 标签：iphone, objective-c, xcode, casting, bridge

我正在开发一个 iPhone 应用程序，我已经从一个类型为 的方法中提取了一个值`_bridge const void *`。但我需要将此值转换为 type `NSString`。

我看到一个经典的演员阵容没有效果。

```
 valueNSString = (NSString *) valueConstVoid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:25:29.027

也许它可以先桥接到 NSData ，然后才使用适当的构造函数转换为 NSString 。

所以我们这里有一个指向 void 的指针。指向 void 的指针只是物理对象（或字节序列）表示开始的内存位置。我们不知道它是什么，这就是问题所在。强制转换只是对特定类型指针的赋值。换句话说，类型化指针允许您知道特定属性在哪里以及实际物理表示在哪里结束。让我们试试这个。`value`在分配后停止调试器并输入`po value`调试器。告诉我们您看到的打印输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:31:33.133

`(__bridge const void*)`不是类型而是演员表。所以你的价值很可能是 type `const void *`。如果您确定它是指向 an 的指针，则`NSString`可以按如下方式进行转换：

```
const void *value;
NSString *stringValue = (__bridge NSString *)value; 
```

# java - 我已经设法将一些字节转换为十六进制字符串，但是有一个 0 不输出的 ubt

> ID：15227497
> 
> 赞同：0
> 
> 时间：2013-03-05T15:21:52.993
> 
> 标签：java, binary, hex

我制作了一个比较文件签名的工具，它通过读取文件的前这么多字节，然后将其转换为十六进制字符串，然后将此结果与数组进行比较，最后在 JText 区域上打印匹配的文件类型来做到这一点，我的问题是，当我输入一个 doc 文件时 - 例如，前 8 个十六进制数字是“50 4B 03 04”，但是当它在 JText 区域上打印出来时，我得到 504B34，现在我认为它是因为零二进制是 0000 .... 4 (50 4B 03 '04') 我认为它是 00000100 所以我认为代码只是不输出前 4 个字节，如果它是一个零，有人知道如何包含所有零？

好的，我知道我的问题，我可以发布它来解释，正如你所看到的，这是我的代码片段，我在其中创建了一个字符串生成器来将字节转换为十六进制，问题是我试图格式化字符串带有 sb.append("%02x.. 等的构建器，但是当我将它放在 headerData 行中时，我认为它不会对字符串构建器做任何事情：

```
}
                    StringBuilder sb = new StringBuilder();
                    for(byte b:a){
                     sb.append(String.format("%02x", b));
                    }
                        if (i != -1) {
        HeaderData unknownHead = new HeaderData(" ", (sb.toString())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:29:24.177

```
String.format(" %02x", bytes[i] & 0xFF) 
```

* * *

```
 byte[] a = {(byte)3, (byte)-128, (byte)-4, (byte)3, (byte)0,
                (byte)1, (byte)127};
    StringBuilder sb = new StringBuilder();
    for (byte b : a) {
        sb.append(String.format("%02x ", b));
    }
    System.out.println(sb.toString()); 
```

结果：

```
03 80 fc 03 00 01 7f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:54:57.810

`Integer.toHexString(byte b)` 应该做的好

**代码**

```
byte[] a = {(byte)10, (byte)-120, (byte)-14,  (byte)0,
        (byte)1, (byte)127};

StringBuilder sb = new StringBuilder();
for (byte b : a) {
    sb.append(Integer.toHexString(b)+" ");
}

System.out.println(sb.toString()); 
```

**结果**

```
a ffffff88 fffffff2 0 1 7f 
```

# android - 在应用计费中测试 Android

> ID：15227498
> 
> 赞同：0
> 
> 时间：2013-03-05T15:21:58.573
> 
> 标签：android, cordova, in-app-billing

我开发了一个用于应用计费的 Android 应用程序，我想做一些测试。

我只有一部 Andoid 手机（我自己的）。因此，当我尝试进行测试时，我无法购买出售的商品（因为我是编辑）。是否有其他方法可以进行测试？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:23:15.640

抱歉，如果没有另一个非开发者控制台电子邮件 ID 的主帐户，您将无法进行此测试。

您必须将设备重置为出厂设置并使用另一个帐户登录。没有其他办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:25:35.047

我建议购买/借用一个专门用于测试的设备，它仍然可以运行最新版本的 Google Play 客户端。这是唯一的方法。

# python - 使用 IPython Parallel（或其他包）进行令人尴尬的并行任务，具体取决于不可拾取的对象

> ID：15227500
> 
> 赞同：3
> 
> 时间：2013-03-05T15:22:00.173
> 
> 标签：python, parallel-processing, ipython, ipython-parallel

我经常遇到一些问题，我想在一组很多很多对象上快速做一些简单的事情。我自然的选择是使用 IPython Parallel，因为它很简单，但我经常不得不处理不可拾取的对象。在尝试了几个小时之后，我通常会放弃自己在一台计算机上运行我的任务，或者做一些愚蠢的事情，比如半手动地分割东西以在多个 python 脚本中运行。

举一个具体的例子，假设我想删除给定 S3 存储桶中的所有键。

我通常不假思索地做的是：

```
import boto
from IPython.parallel import Client

connection = boto.connect_s3(awskey, awssec)
bucket = connection.get_bucket('mybucket')

client = Client()
loadbalancer = c.load_balanced_view()

keyList = list(bucket.list())
loadbalancer.map(lambda key: key.delete(), keyList) 
```

问题是其中的`Key`对象`boto`是不可拾取的（*）。这对我来说经常发生在不同的环境中。这也是我尝试过的多处理、execnet 以及所有其他框架和库的问题（原因很明显：它们都使用相同的pickler 来序列化对象）。

你们也有这些问题吗？有没有办法可以序列化这些更复杂的对象？我是否必须为这个特定的对象编写自己的pickler？如果我这样做了，我如何告诉 IPython Parallel 使用它？我如何写一个pickler？

谢谢！

* * *

(*) 我知道我可以简单地列出键名并执行以下操作：

```
loadbalancer.map(lambda keyname: getKey(keyname).delete()) 
```

并在 IPython 集群的每个引擎中定义`getKey`函数。这只是我经常发现的更普遍问题的一个特定实例。也许这是一个不好的例子，因为它可以通过另一种方式轻松解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-19T11:18:25.947

`IPython`有一个`use_dill`选项，如果您安装了`dill`序列化程序，则可以序列化大多数“不可提取”的对象。

[如何在 load_balanced_view 中使用 dill 而不是 pickle](https://stackoverflow.com/questions/24042443/how-can-i-use-dill-instead-of-pickle-with-load-balanced-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T12:25:30.690

IPython 确实将人们聚集在一起；）。因此，据我所知，酸洗对象的问题在于它们的方法。`key`因此，也许您可​​以编写一个函数来获取并删除它，而不是使用删除它的方法。也许首先得到一个`dict`包含每个键相关信息的 's 列表，然后调用一个`delete_key( dict )`我留给你写的函数，因为我不知道如何处理 s3 键。

那行得通吗？

* * *

或者，这可能是可行的：只需调用类的方法，而不是调用实例的方法，并将实例作为参数。所以代替`lambda key : key.delete()`你会做`lambda key : Key.delete(key)`。当然，您必须将类推送到节点，但这应该不是问题。一个最小的例子：

```
 class stuff(object):
       def __init__(self,a=1):
            self.list = []
       def append(self, a):
            self.list.append(a)

  import IPython.parallel as p
  c = p.Client()
  dview = c[:]

  li = map( stuff, [[]]*10 ) # creates 10 stuff instances

  dview.map( lambda x : x.append(1), li ) # should append 1 to all lists, but fails

  dview.push({'stuff':stuff}) # push the class to the engines
  dview.map( lambda x : stuff.append(x,1), li ) # this works. 
```

# ssis - SSIS 一次导入 CSV 数据

> ID：15227503
> 
> 赞同：0
> 
> 时间：2013-03-05T15:22:14.050
> 
> 标签：ssis

我打算只将 csv 文件导入 oledb 目标一次，并且应该完成其余的过程。流程应检查数据是否存在并继续流程的其余部分。我该怎么做。

# sqlalchemy - 如何从选择中插入sqlalchemy，指定列

> ID：15227505
> 
> 赞同：1
> 
> 时间：2013-03-05T15:22:19.673
> 
> 标签：sqlalchemy

这个问题与以下问题有关：

[如何在 SQLAlchemy 中插入到 t1 (SELECT * FROM t2)？](https://stackoverflow.com/questions/1849375/how-do-i-insert-into-t1-select-from-t2-in-sqlalchemy)

但我想指定插入应该在哪些列上工作。也就是说，我希望 sqlalchemy 生成一个相当于

`INSERT INTO t1 (col1, col2, col3) SELECT x,y,z FROM t2`

我查看了编译文档，但我不清楚如何修改[示例](http://www.sqlalchemy.org/docs/core/compiler.html#compiling-sub-elements-of-a-custom-expression-construct)以指定列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:27:25.727

以下修改可能会有所帮助：

```
from sqlalchemy.ext.compiler import compiles
from sqlalchemy.sql.expression import Executable, ClauseElement

class InsertFromSelect(Executable, ClauseElement):
    def __init__(self, table, columns, select):
        self.table = table
        self.columns = columns
        self.select = select

@compiles(InsertFromSelect)
def visit_insert_from_select(element, compiler, **kw):
    return "INSERT INTO %s (%s) %s" % (
        compiler.process(element.table, asfrom=True),
        ", ".join(element.columns), # @note: not a very safe/robust way to compose SQL
        compiler.process(element.select)
    )

insert = InsertFromSelect(
        t1,
        ("col1", "col2", "col3",),
        select([t2.c.x, t2.c.y, t2.c.z])
        )
print insert 
```

# regex - ExpressionEngine 和 YOURLS 的 .htaccess 问题

> ID：15227507
> 
> 赞同：0
> 
> 时间：2013-03-05T15:22:22.400
> 
> 标签：regex, .htaccess, expressionengine, yourls

我有一个运行 ExpressionEngine 的主站点，我试图让 YOURLS 在一个名为“work”的子文件夹中运行，即：http: [//foo.com/work/](http://foo.com/work/)用于短网址，EE 在根目录下运行，即：[http： //foo.com/](http://foo.com/)。请注意没有“www”。

我遇到的问题是，当我使用短 URL 并且用户将“www”添加到 URI 时，例如[http://www.foo.com/work/123](http://www.foo.com/work/123) ，我得到一个如下所示的重定向链：

*   [http://www.foo.com/work/123](http://www.foo.com/work/123) 302 重定向到
*   [http://www.foo.com/work](http://www.foo.com/work) 301 重定向到
*   [http://www.foo.com/work/](http://www.foo.com/work/)返回 200

如果您从 URI 中省略“www”，则一切正常。YOURLS 设置为使用非 www，但令人担忧的是，有些用户可能会习惯性地键入“www”，因为这些 URI 被放置在印刷广告上。

根 .htaccess 文件如下所示：

```
SetOutputFilter DEFLATE
DirectoryIndex index.php index.html

# BEGIN ExpressionEngine Rewrite
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteBase /
RewriteCond %{HTTP_HOST} ^www.foo.com [NC]
RewriteRule ^(.*)$ http://foo.com/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteRule ^(.*)$ /index.php?$1 [NC,L]
</IfModule>
# END ExpressionEngine Rewrite 
```

/work/ (YOURLS) .htaccess 看起来像这样：

```
# BEGIN YOURLS
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /work/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /work/yourls-loader.php [L]
</IfModule>
# END YOURLS 
```

如何在不完全占用 EE 的情况下让“www”URI 像非 www URI 一样工作？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-08T21:06:35.130

我遇到了类似的问题。一些最终用户或发布短 url 的人倾向于在它们后面附加 www，而购买短 url 的目的是在没有 www 的情况下使用它。

我还安装了您的[重定向索引插件](https://github.com/tomslominski/yourls-redirect-index)，以将主页访问者转发到我们的常规主页。

所以我有几种不同类型的网址：

1.  短域名主页，应该指向常规的 https 主页
2.  短域 YOURLS 管理面板，应该指向 https 管理面板
3.  短域名缩短网址，应该导致长网址

我希望所有网址都可以使用或不使用 www，并确保将 http 转发到 https。

我的解决方案是从以下几行开始 .htaccess：

```
# Force HTTPS (because of passwords via /admin) and use clean domain (non www)
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^www.examp.le [NC]
RewriteRule ^(.*)$ https://examp.le/$1 [L,R=301] 
```

# .net - DotNetOpenAuth 令牌响应

> ID：15227518
> 
> 赞同：1
> 
> 时间：2013-03-05T15:22:52.793
> 
> 标签：.net, oauth-2.0, dotnetopenauth

我一直在使用 DotNetOpenAuth 创建自己的资源服务器。一切正常，我可以很好地检索令牌。但是，我现在开始构建一个调用我的资源服务器的客户端，并且 DotNetOpenAuth 返回的响应存在一个小问题。我希望 DotNetOpenAuth 返回一个表示访问令牌的 JSON 字符串。它会这样做，但有一点需要注意：JSON 字符串以十六进制数字为前缀，以零为后缀：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?RDpcUGVyc29vbmxpamtlIHByb2plY3RlblxpY2hlY2ttb3ZpZXMtZG90bmV0XHNyY1xXZWJBcGlcdG9rZW5zXA==?=
X-Powered-By: ASP.NET
Date: Mon, 04 Mar 2013 13:04:12 GMT

3d2
{"access_token":"gAAAADrFpM2DRiBdqVBPdEq_ISvdfZb6CaRMZr7vWcn2AuKGs2TXyNlzLaUX8xtLQfxFdbTYBIK-LF8cfEwvV8gUKC0lpcodb9OWm9sUmu_IIApmMPIBQDgT1LtkEjOsv_gQdmwN906Pd1KczI2O3Pt1DqzhL_Rpub9zJQmh6EKDp4_EJAEAAIAAAACTvB0tYmrRNExdGQhGBrHgYnlgt7Rw-ilB2wLScW1YgOHE6MOY0WrfKG9aFLUAcmADYSrX55n9mfC9NKDXJBARc5ev-hnWTnApw7yq51c1KwbKv7bxoEVzar8eAAFrJi_OBQjlcaN8IFfnryu1VK_C1o-U2gLgdnBZzFcCDhgNseRFjUCmYXssEvjUswg0Oy3c_F_IXpP85kL6QCYmpGwV1juTuiMwMuZOCbcPMAssM70JMi7Ai7zT7hxCCZ5SLgeyLjBqPX7bXnhRIO24mkZ9pN5pCzorjOX_8rqdrPwR6WkPy0tc69oyBTak8L6nJYWzxfuAVhZGEowHCx3KNWfG_R_w23N7Y3c9HoIfO6RSYpnfieGLKhxHxd1_jsczGtM","token_type":"bearer","expires_in":3600,"refresh_token":"q5NN!IAAAANCHUJ5tukpT_UzgkRGCTM4Oy1qgw8GP5wn8HDS2jN1isQAAAAFfLe6KZMht1mmbIbF6RihvMZvjrwtaoZRZbaavPbte9CtjLWB_isHOroLv669rq1PmTppmVyo1Om3HVvp2AC16SDe7l02POHIYbPs_Cox6kekHc74_8pLP8SAGcrXy1EzjAPKc_UksMTp8aqaAnrU3ulx2TYYrRMyYb6pW7awO6_aiHtLixrF6dVA1-6DWvKuCSeJW0oZCm45Op1-wht8qAWkK3B70C6dZU6dmsggleA","scope":"movie list user comment"}
0 
```

如果我查看官方规范（[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.4](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.4)），它没有说明前缀和/或后缀。输出是否正确，或者这是 DotNetOpenAuth 中的错误？`Content-length`关于没有标题的响应让我印象深刻的一件事。这让我相信也许`3d2`字符串实际上是内容长度。我相信是这样，因为十六进制的 3d2 是十进制的 978，这正是 3d2 和 0 之间的 JSON 字符串的长度。

有什么方法可以将 DotNetOpenAuth 配置为返回常规的 Content-length 标头而不输出前缀和后缀？

为了完整起见，我使用以下代码（使用依赖注入）在 .NET 4.0 上的 ASP.NET MVC 4 应用程序中运行我的授权服务器：

```
public sealed class TokensController : Controller
{
    private readonly AuthorizationServer authorizationServer;

    public TokensController(AuthorizationServer authorizationServer)
    {
        this.authorizationServer = authorizationServer;
    }

    public ActionResult Create()
    {
        var outgoingWebResponse = this.authorizationServer.HandleTokenRequest(this.Request);
        var asActionResult = outgoingWebResponse.AsActionResult();
        return asActionResult;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T09:17:26.577

问题出在 DotNetOpenAuth 库中，其中`Content-length`标头未与请求一起发送。这导致添加了表示请求长度的十六进制数。报告此错误后，已由 DotNetOpenAuth 库的作者修复。

# android - 停止在移动设备上旋转

> ID：15227519
> 
> 赞同：4
> 
> 时间：2013-03-05T15:22:56.793
> 
> 标签：android, ios, web-applications, jquery-mobile, mobile

这个问题已经在stackoverflow上被问过很多次，但每次正确答案都不起作用或不正确。

我重新提出这个问题，因为它对移动网络设备程序员很重要。

我希望能够在以下操作系统之一的浏览器上停止*网站*上的旋转：IOS 和/或 Android 设备，或者至少将旋转修改为至少最后一个景观。因此，仅允许景观作为旋转。

我尝试了许多相关问题但没有解决方案：

*   [阻止移动网页上的设备旋转](https://stackoverflow.com/questions/3501510/blocking-device-rotation-on-mobile-web-pages)
*   [jQuery移动设备旋转缩小屏幕](https://stackoverflow.com/questions/9104233/jquery-mobile-device-rotation-shrinks-the-screen)

欢迎任何想法，谢谢。

ps

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:01:39.080

@CommonsWare 是对的，您不应该仅仅阻止用户随意旋转他们的设备。事实上，这就是移动 Web 应用程序如此通用的原因。它们包含响应式设计的原则。

我知道这不是您真正想要的答案，但如果您坚持这样做，请看这里：[Block mobile web rotation with javascript](https://stackoverflow.com/questions/3501510/blocking-device-rotation-on-mobile-web-pages)。我不确定，但我猜这仍然行不通，因为网络应用程序不是您正在查看的任何设备的本地应用程序，而您实际使用的应用程序是浏览器，例如 Chrome、Safari、等，几乎可以肯定，无论您的网络应用程序在做什么，它们都会启用不同的方向。

# sockets - 使用 boost::asio async_read_some 时 CPU 和内存消耗高

> ID：15227520
> 
> 赞同：4
> 
> 时间：2013-03-05T15:22:57.200
> 
> 标签：sockets, network-programming, boost-asio, asyncsocket

我已经制作了一个从客户端读取数据的服务器，并且我正在使用 boost::asio async_read_some 来读取数据，并且我已经制作了一个处理函数，这里 _ioService->poll() 将运行事件处理循环来执行准备好的处理程序。在处理程序 _handleAsyncReceive 中，我正在解除分配在 receiveDataAsync 中分配的 buf。bufferSize 为 500。代码如下：

```
bool 
TCPSocket::receiveDataAsync( unsigned int bufferSize )
{
    char *buf = new char[bufferSize + 1];

    try
    {
        _tcpSocket->async_read_some( boost::asio::buffer( (void*)buf, bufferSize ), 
                                     boost::bind(&TCPSocket::_handleAsyncReceive, 
                                                    this,
                                                    buf,
                                                    boost::asio::placeholders::error,
                                                    boost::asio::placeholders::bytes_transferred) );

            _ioService->poll();

    }
    catch (std::exception& e)
    {
        LOG_ERROR("Error Receiving Data Asynchronously");
        LOG_ERROR( e.what() );
        delete [] buf;
        return false;
    }

    //we dont delete buf here as it will be deleted by callback _handleAsyncReceive
    return true;
}

void 
TCPSocket::_handleAsyncReceive(char *buf, const boost::system::error_code& ec, size_t size)
{
    if(ec)
    {
        LOG_ERROR ("Error occurred while sending data Asynchronously.");
        LOG_ERROR ( ec.message() );
    }
    else if ( size > 0 )
    {
        buf[size] = '\0';
        LOG_DEBUG("Deleting Buffer");
        emit _asyncDataReceivedSignal( QString::fromLocal8Bit( buf ) );
    }
    delete [] buf;
} 
```

这里的问题是与释放相比，缓冲区的分配速度要快得多，因此内存使用率将以指数速度上升，并且在某个时间点它将消耗所有内存并且系统将被卡住。CPU 使用率也将在 90% 左右。如何减少内存和 CPU 消耗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:57:52.093

你有内存泄漏。**io_service poll**不保证它与调度你的`_handleAsyncReceive`. 它可以调度其他事件（例如接受），因此您的记忆`char *buf`丢失了。我猜你是`receiveDataAsync`从一个循环中调用的，但它不是必需的 - 在任何情况下都会存在泄漏（具有不同的泄漏速度）。

如果您遵循[asio 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)并使用建议的模式而不是自己创建模式，那就更好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:10:34.923

正如[PSIAlt](https://stackoverflow.com/users/1671032)建议的那样，考虑遵循 Boost.Asio[示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)并在它们的异步编程模式上进行构建。

不过，我建议考虑是否需要将多个读取调用排队到同一个套接字上。如果应用程序只允许单个读取操作在套接字上挂起，那么资源就会减少：

*   不再存在在`io_service`.
*   可以为每个读取操作预先分配和重用单个缓冲区。例如，下面的异步调用链只需要一个缓冲区，并允许在 Qt 信号上发出先前的数据时并发执行启动异步读取操作，就像`QString`执行深度复制一样。

    ```
    TCPSocket::start()
    {
      receiveDataAsync(...) --.
    }                         | 
              .---------------'
              |    .-----------------------------------.
              v    v                                   |
    TCPSocket::receiveDataAsync(...)                   |
    {                                                  |
      _tcpSocket->async_read_some(_buffer); --.        |
    }                                         |        |
              .-------------------------------'        |
              v                                        |
    TCPSocket::_handleAsyncReceive(...)                |
    {                                                  |
      QString data = QString::fromLocal8Bit(_buffer);  |
      receiveDataAsync(...); --------------------------' 
      emit _asyncDataReceivedSignal(data);
    }

    ...

    tcp_socket.start();
    io_service.run(); 
    ```

确定何时何地为`io_service`的事件循环提供服务非常重要。通常，应用程序被设计为`io_service`不会耗尽工作，处理线程只是等待事件发生。因此，开始设置异步链，然后`io_service`在更高范围内处理事件循环是相当普遍的。

另一方面，如果确定`TCPSocket::receiveDataAsync()`应该以阻塞方式处理事件循环，则考虑使用同步操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:16:35.773

您可以考虑使用环绕缓冲区，也称为循环缓冲区。Boost 有一个可用的模板循环缓冲区版本。你可以在[这里阅读。](http://www.boost.org/doc/libs/1_47_0/libs/circular_buffer/doc/circular_buffer.html) 它背后的想法是，当它变满时，它会绕到开始存储东西的地方。您也可以对其他结构或数组执行相同的操作。例如，我目前在我的应用程序中为此目的使用字节数组。

使用专用的大型循环缓冲区来保存消息的优点是您不必担心为每条传入的新消息创建和删除内存。这可以避免内存碎片，这可能会成为一个问题。

要确定循环缓冲区的适当大小，您需要考虑可以进入并处于同时处理的某个阶段的最大消息数；将该数字乘以消息的平均大小，然后乘以可能为 1.5 的软糖因子。我的应用程序的平均消息大小低于 100 字节。我的缓冲区大小为 1 兆字节，这将允许至少 10,000 条消息累积，而不会影响环绕缓冲区。但是，如果超过 10,000 条消息确实累积而没有完全处理，那么循环缓冲区将无法使用，程序将不得不重新启动。我一直在考虑减小缓冲区的大小，因为系统可能在达到 10,000 条消息标记之前很久就死机了。

# android - OptionMenu 不显示任何内容

> ID：15227521
> 
> 赞同：0
> 
> 时间：2013-03-05T15:22:57.957
> 
> 标签：android, optionmenu

我有一个`OptionMenu`内部`activity`，但是当我选择一个选项时，它什么也没有显示。我找到了一些教程，但它们显示了我已经做过的事情。怎么了？感谢您的答复。

这是目前的代码：

```
public class Listino extends TabActivity
{
    final Context context = this;

public void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    deleteFile("Ordinazioni.txt");
    setContentView(R.layout.show_listino);
    TabHost tabHost = getTabHost(); 

    //Primi
    Intent intentPrimi = new Intent().setClass(this, Primi.class);
    TabSpec tabSpecPrimi = tabHost
            .newTabSpec("Primi")
            .setIndicator("Primi")
            .setContent(intentPrimi);

    //Secondi

    Intent intentSecondi = new Intent().setClass(this, Secondi.class);
    TabSpec tabSpecSecondi = tabHost
            .newTabSpec("Secondi")
            .setIndicator("Secondi")
            .setContent(intentSecondi);

    // Dolci

    Intent intentDolci = new Intent().setClass(this, Dolci.class);
    TabSpec tabSpecDolci = tabHost
            .newTabSpec("Dolci")
            .setIndicator("Dolci")
            .setContent(intentDolci);

    // Pizze

    Intent intentPizze = new Intent().setClass(this, Pizze.class);
    TabSpec tabSpecPizze = tabHost
            .newTabSpec("Pizze")
            .setIndicator("Pizze")
            .setContent(intentPizze);

    // Bevande

    Intent intentBevande = new Intent().setClass(this, Bevande.class);
    TabSpec tabSpecBevande = tabHost
            .newTabSpec("Bevande")
            .setIndicator("Bevande")
            .setContent(intentBevande);

    // Contorni

            Intent intentContorni = new Intent().setClass(this, Bevande.class);
            TabSpec tabSpecContorni = tabHost
                    .newTabSpec("Contorni")
                    .setIndicator("Contorni")
                    .setContent(intentContorni);

    tabHost.addTab(tabSpecPrimi);
    tabHost.addTab(tabSpecSecondi);
    tabHost.addTab(tabSpecPizze);
    tabHost.addTab(tabSpecDolci);
    tabHost.addTab(tabSpecBevande);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
         MenuInflater menuInflater = getMenuInflater();
         menuInflater.inflate(R.menu.opzioni_menu, menu);  
        return true;
}

public boolean OnOptionsItemSelected(MenuItem item)
{

    Toast.makeText(context, item.getItemId(), Toast.LENGTH_SHORT).show();

    switch (item.getItemId())
    {
        case R.id.fineordinazione:
            Intent intent = new Intent(context, AggiungiProdotto.class);
            startActivity(intent);

            return true;

        case R.id.modificaordinazione:
            break;

    }
    return false;

} 
```

}

啊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:18:29.160

有一个错字。

不是

```
public boolean OnOptionsItemSelected(MenuItem item) 
```

但

```
public boolean onOptionsItemSelected(MenuItem item) 
```

方法名的首字母小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:56:32.130

在 res/menu/ 中创建 opzioni_menu.xml（如果您没有菜单文件夹，请创建一个）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/fineordinazione" android:title="fineordinazione"/>
    <item android:id="@+id/modificaordinazione" android:title="modificaordinazione"/>
</menu> 
```

然后改变

```
 menuInflater.inflate(R.layout.opzioni_menu, menu); 
```

至

```
 menuInflater.inflate(R.menu.opzioni_menu, menu); 
```

祝你好运希望这有帮助！

*编辑*

```
public boolean OnOptionsItemSelected(MenuItem item) 
```

至

```
@Override
public boolean onOptionsItemSelected(MenuItem item) 
```

在 <<<< o 小写！！请

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:30:17.780

您应该通过 getMenuInflater() 来膨胀菜单，而不是布局。

改变：

```
menuInflater.inflate(R.layout.opzioni_menu, menu); 
```

对此：

```
menuInflater.inflate(R.menu.opzioni_menu, menu);  //use menu, not layout 
```

您应该使用`R.menu.bla_bla_bla`而不是`R.layout.bla_bla_bla`.

有关更多信息，请阅读[此](http://developer.android.com/guide/topics/ui/menus.html)。

# linux - wpa_supplicant 是否支持 WiFi Direct？

> ID：15227526
> 
> 赞同：4
> 
> 时间：2013-03-05T15:23:09.510
> 
> 标签：linux, wifi, wireless, android-networking, wpa

我需要访问 wifi 直接频道以获取有关组 ex 的更多信息：RSSI cab 我们通过使用 wpa_supplicant 来做到这一点？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T06:32:53.813

是的。您可以使用 wpa_supplicant v1.1 或更高版本（最好是 v2.0）来使用 wifi-direct(p2p) 命令。

看到[这个](http://svn.dd-wrt.com/browser/src/router/hostapd-wps/wpa_supplicant/README-P2P?rev=16495)和[这个](http://processors.wiki.ti.com/index.php/OMAP_Wireless_Connectivity_NLCP_WiFi_Direct_Configuration_Scripts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T17:52:30.473

您可以在 p2p 的控制界面上使用**p2p_peer**命令来获取有关 p2p_peer 的信息。对于您的情况，如果您需要信号强度，请检查p2p_peer 命令的返回值中的**级别**。

# android - 在使用媒体播放器的声音结束之前不希望按下另一个按钮

> ID：15227530
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:17.310
> 
> 标签：android, android-mediaplayer

我有大约 20-30 个按钮，每个按钮都会在点击时播放特定的声音。当我单击多个按钮时，由于内存已满，它会崩溃。我认为解决方案是让系统休眠，这样在声音剪辑结束之前不能按下其他按钮。然后我调用释放媒体播放器的条件。有没有另一种方法可以在媒体播放器完成后准确地释放它？

这是我的代码：

```
package com.example.buttonsdemo;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.app.Activity;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener{

    //Creating Sound arrays 
    //int i=0;
    MediaPlayer mediaplayer = new  MediaPlayer();
    Button button[] = new Button [120]; 
    int viewer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //first button
            final Button button_0 = (Button) findViewById(R.id.akali);
            button_0.setOnClickListener(this);
        //Second button
            final Button button_1 = (Button) findViewById(R.id.alistar);
            button_1.setOnClickListener(this);

            final Button button_2 =(Button) findViewById(R.id.ahri);
            button_2.setOnClickListener(this);

            final Button button_3 =(Button) findViewById(R.id.amumu);
            button_3.setOnClickListener(this);

            final Button button_4 =(Button) findViewById(R.id.anivia);
            button_4.setOnClickListener(this);

            final Button button_5 =(Button) findViewById(R.id.annie);
            button_5.setOnClickListener(this);

            final Button button_6 =(Button) findViewById(R.id.ashe);
            button_6.setOnClickListener(this);

            final Button button_7 =(Button) findViewById(R.id.blitz);
            button_7.setOnClickListener(this);

            final Button button_8 =(Button) findViewById(R.id.thresh);
            button_8.setOnClickListener(this);

            final Button button_9 =(Button) findViewById(R.id.brand);
            button_9.setOnClickListener(this);

            final Button button_10 =(Button) findViewById(R.id.Caitlyn);
            button_10.setOnClickListener(this);

            final Button button_11 =(Button) findViewById(R.id.Cass);
            button_11.setOnClickListener(this);

            final Button button_12 =(Button) findViewById(R.id.chogath);
            button_12.setOnClickListener(this);

            final Button button_13 =(Button) findViewById(R.id.Corki);
            button_13.setOnClickListener(this);

            final Button button_14 =(Button) findViewById(R.id.darius);
            button_14.setOnClickListener(this);

            final Button button_15 =(Button) findViewById(R.id.diana);
            button_15.setOnClickListener(this);

            final Button button_16 =(Button) findViewById(R.id.draven);
            button_16.setOnClickListener(this);

            final Button button_17 =(Button) findViewById(R.id.elise);
            button_17.setOnClickListener(this);

            final Button button_18 =(Button) findViewById(R.id.eve);
            button_18.setOnClickListener(this);

            final Button button_19 =(Button) findViewById(R.id.ezrael);
            button_19.setOnClickListener(this); 

            final Button button_20 =(Button) findViewById(R.id.fiddle);
            button_20.setOnClickListener(this);

            final Button button_21 =(Button) findViewById(R.id.fiora);
            button_21.setOnClickListener(this);

            final Button button_22 =(Button) findViewById(R.id.fizz);
            button_22.setOnClickListener(this);

            final Button button_23 =(Button) findViewById(R.id.galio);
            button_23.setOnClickListener(this);

            final Button button_24 =(Button) findViewById(R.id.garen);
            button_24.setOnClickListener(this);

            final Button button_25 =(Button) findViewById(R.id.gp);
            button_25.setOnClickListener(this);

            final Button button_26 =(Button) findViewById(R.id.gragas);
            button_26.setOnClickListener(this);

            final Button button_27 =(Button) findViewById(R.id.graves);
            button_27.setOnClickListener(this);

            final Button button_28 =(Button) findViewById(R.id.hecarim);
            button_28.setOnClickListener(this);

            final Button button_29 =(Button) findViewById(R.id.heimer);
            button_29.setOnClickListener(this);

           //onclicklistner         
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId())
        {

        case R.id.akali:
            mediaplayer = MediaPlayer.create(this, R.raw.akali);
             //viewer = R.layout.alistar;
            break;

        case R.id.alistar:
            mediaplayer= MediaPlayer.create(this, R.raw.alistar);
            break;

        case R.id.ahri:
            mediaplayer= MediaPlayer.create(this,R.raw.ahri);
                     break;
            case R.id.amumu:
            mediaplayer= MediaPlayer.create(this,R.raw.amumu);
                     break;
            case R.id.anivia:
            mediaplayer= MediaPlayer.create(this,R.raw.anivia);
                     break;
            case R.id.annie:
            mediaplayer= MediaPlayer.create(this,R.raw.annie);
                     break;
            case R.id.ashe:
            mediaplayer= MediaPlayer.create(this,R.raw.ashe);
                     break;
            case R.id.blitz:
            mediaplayer= MediaPlayer.create(this,R.raw.blitzcrank);
                     break;
            case R.id.brand:
            mediaplayer= MediaPlayer.create(this,R.raw.brand);
                     break;
            case R.id.Caitlyn:
            mediaplayer= MediaPlayer.create(this,R.raw.caitlyn);
                     break;
            case R.id.Cass:
            mediaplayer= MediaPlayer.create(this,R.raw.cassiopeia);
                     break;
            case R.id.chogath:
            mediaplayer= MediaPlayer.create(this,R.raw.chogath);
                     break;
            case R.id.Corki:
            mediaplayer= MediaPlayer.create(this,R.raw.corki);
                     break;
            case R.id.darius:
            mediaplayer= MediaPlayer.create(this,R.raw.darius);
                     break;
            case R.id.diana:
            mediaplayer= MediaPlayer.create(this,R.raw.diana);
                     break;
            case R.id.draven:
            mediaplayer= MediaPlayer.create(this,R.raw.draven);
                     break;
            case R.id.elise:
            mediaplayer= MediaPlayer.create(this,R.raw.elise);
                     break;
            case R.id.eve:
            mediaplayer= MediaPlayer.create(this,R.raw.evelynn);
                     break;
            case R.id.ezrael:
            mediaplayer= MediaPlayer.create(this,R.raw.ezreal);
                     break;
            case R.id.fiddle:
            mediaplayer= MediaPlayer.create(this,R.raw.fiddlesticks);
                     break;
            case R.id.fiora:
            mediaplayer= MediaPlayer.create(this,R.raw.fiora);
                     break;
            case R.id.fizz:
            mediaplayer= MediaPlayer.create(this,R.raw.fizz);
                     break;
            case R.id.galio:
            mediaplayer= MediaPlayer.create(this,R.raw.galio);
                     break;
            case R.id.garen:
            mediaplayer= MediaPlayer.create(this,R.raw.garen);
                     break;
            case R.id.gp:
            mediaplayer= MediaPlayer.create(this,R.raw.gangplank);
                     break;
            case R.id.gragas:
            mediaplayer= MediaPlayer.create(this,R.raw.gragas);
                     break;
            case R.id.graves:
            mediaplayer= MediaPlayer.create(this,R.raw.graves);
                     break;
            case R.id.hecarim:
            mediaplayer= MediaPlayer.create(this,R.raw.hecarim);
                     break;
            case R.id.heimer:
            mediaplayer= MediaPlayer.create(this,R.raw.heimerdinger);
                     break;
            case R.id.thresh:
            mediaplayer= MediaPlayer.create(this,R.raw.thresh);
                     break;         

        }
        mediaplayer.start();
        //setContentView(viewer);
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          if(mediaplayer.isPlaying())
          {
              mediaplayer.release();
          }
          }

      @Override
      protected void onDestroy() {
          mediaplayer.release();
          super.onDestroy();
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:26:12.383

为什么不将所有按钮设置为 enable(false) 直到播放完成？

在 onCreate 中：

```
ArrayList<Button> bList=new ArrayList<Button>(); 
```

对于每个按钮：

```
final Button button_1 = (Button) findViewById(R.id.alistar);
bList.add(button_1);
button_1.setOnClickListener(this);
final Button button_2 =(Button) findViewById(R.id.ahri);
button_2.setOnClickListener(this);
button_2.setOnClickListener(this);
.... 
```

在点击：

```
 public void onClick(View v) {
 for(Button b:bList){
 b.setEnabled(false);
 } 
```

最后按照 Marcin S. 的建议：

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
@Override
public void onCompletion(MediaPlayer mp) {
for(Button b:bList){
   b.setEnabled(true);
   }
  }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:30:14.260

在您将启用所有按钮的 mediaPlayer 对象上设置 setOnCompletionListener()：

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {
    // ENABLE THE BUTTONS HERE
        }
    });
} 
```

# python - python: OpenCV 根目录

> ID：15227532
> 
> 赞同：6
> 
> 时间：2013-03-05T15:23:19.743
> 
> 标签：python, opencv, portability

我将 OpenCV 用于各种对象检测器，我发现编写可移植代码很困难。

例如，要加载面部检测器，在通过自制软件安装 OpenCV 的 Mac 上，我必须编写：

```
haar=cv.Load('/usr/local/Cellar/opencv/2.4.2/share/OpenCV/haarcascades/haarcascade_frontalface_default.xml') 
```

这不是便携式的；如果我想更改为另一台机器，我将不得不确定另一个绝对路径并更改此代码。

是否有一个变量保存 OpenCV 的 OpenCV 根？这样我就可以写出类似的东西：

```
haar=cv.Load(os.path.join(OpenCVRoot, "haarcascades", 
                          "haarcascade_frontalface_default.xml")) 
```

**更新**：看起来这对我来说不仅仅是一个问题；这也是 OpenCV 文档的问题。该文档包含以下损坏的示例代码：

```
>>> import cv
>>> image = cv.LoadImageM("lena.jpg", cv.CV_LOAD_IMAGE_GRAYSCALE)
>>> cascade = cv.Load("../../data/haarcascades/haarcascade_frontalface_alt.xml")
>>> print cv.HaarDetectObjects(image, cascade, cv.CreateMemStorage(0), 1.2, 2, 0, (20, 20))
[((217, 203, 169, 169), 24)] 
```

如果有一种方法可以推断出 lena.jpg 和预训练分类器等示例的安装位置，那么这将很容易避免。

来源： http: [//opencv.willowgarage.com/documentation/python/objdetect_cascade_classification.html](http://opencv.willowgarage.com/documentation/python/objdetect_cascade_classification.html)（检索 3/5/13）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-01T12:50:33.137

您可以使用`cv2.__file__`获取模块的路径，然后使用 os.path 来解析符号链接并进行一些路径操作。这行代码返回我的 Mac OS homebrew 安装上的 haarcascades 文件的目录。它也可能适用于其他安装。

```
from os.path import realpath, normpath
normpath(realpath(cv2.__file__) + '../../../../../share/OpenCV/haarcascades') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-21T04:55:38.210

似乎几乎没有希望拥有一种跨时间和空间（版本和平台/环境）可移植的单一机制，但有一些进展 - 我不知道哪个版本引入了它，但 4.0 有它：

`cv2.data.haarcascades`- 指向目录的字符串，例如：

```
>>> import cv2
>>> cv2.data
<module 'cv2.data' from 'C:\\Users\\USERNAME\\Anaconda3\\envs\\py36\\lib\\site-packages\\cv2\\data\\__init__.py'>
>>> cv2.data.haarcascades
'C:\\Users\\USERNAME\\Anaconda3\\envs\\py36\\lib\\site-packages\\cv2\\data\\'
>>> cv2.__version__
'4.0.0' 
```

但不幸的是，对于 3.2.x 和 3.4.x 没有这样的模块......

所以你可以这样做：

```
if hasattr(cv2, 'data'):
    print('Cascades are here:', cv2.data.haarcascades)
else:
    print('This may not work:')
    print(normpath(realpath(cv2.__file__) + '../../../../../share/OpenCV/haarcascades')) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T15:47:31.480

[检查这个链接](http://docs.python.org/2/library/sys.html#sys.platform)

您可以使用 sys.platform 来确定平台并根据 sys.platform 的返回设置不同的默认路径

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-26T10:03:06.037

我在同一条船上，这是一条烦人的船。

您可以用来处理此类可移植性问题的一种约定是使用配置文件。在您的情况下，您可能有一个 file `~/.myprojectrc`，其中可能包含：

```
[cv]
cvroot = '/usr/local/Cellar/opencv/2.4.2/share/OpenCV/` 
```

这种格式的文件可以被 ConfigParser 对象读取，它应该是这样的：

```
import ConfigParser
import os
CONFIG = ConfigParser.ConfigParser()
config_path = os.path.join(os.path.expanduser('~'), '.myprojectrc')
if not os.path.exists(config_path):
    raise Exception('You need to make a "~/.myprojectrc" file with your cv path or something')
CONFIG.read(config_path)

...

cv_root = CONFIG.get('cv', 'cvroot') 
```

然后至少当有人在另一台机器上使用代码时，他们不必修改任何代码，他们只需要使用 opencv 路径创建配置文件，他们就会收到一条明确的错误消息告诉他们这样做。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-05T15:51:39.937

为什么不直接将包含 xml 文件的文件夹复制到本地工作区文件夹并使用相对路径？我记得，它不会在您的硬盘驱动器上占用太多空间

# asp.net - 下载后文件大小增加3倍

> ID：15227533
> 
> 赞同：1
> 
> 时间：2013-03-05T15:23:23.103
> 
> 标签：asp.net, vb.net

我有一个 .aspx 页面让用户下载 .exe 文件。代码是

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim FilePart As String = Request.QueryString("file")
    Dim folder_path As String = Server.MapPath("folder1/subfolder1/")
    If Not String.IsNullOrEmpty(FilePart) Then
        Dim FileName As String = IO.Path.Combine(folder_path, FilePart)
        If IO.File.Exists(FileName) Then
            Response.ContentType = "application/x-msdownload"
            Response.AddHeader("Content-disposition", "attachment; filename=" _
                   & FilePart)
            Response.WriteFile(FileName)
        End If
    Else
        Response.Write("<html><body>Not Found</body></html>")
    End If
End Sub 
```

目标文件 (.exe) 的原始大小为 11 MB。但是，当用户下载它时，大小会增加到 34 MB。有趣的是，该文件可以正常运行并且可以正常工作，但是让我感到困扰的是为什么大小会急剧增加。

有没有办法解决这个问题？

提前致谢

# php - PHP/MYSQL-数字操作在零处停止

> ID：15227535
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:29.673
> 
> 标签：php, mysql, loops, while-loop

我觉得有一个简单的解决方案，但我无法在任何地方找到它。

我有一个 while() 循环，在每个循环的开始，我从一个从 MYSQL 数据库中获得的数字中减去 1。但由于某种原因，它停在 0。如果从数据库中提取的值为 0 或负数，我需要将数字变为负数。

```
 //Get members
$select = mysql_query("SELECT * FROM members") or die(mysql_error());

//Start the loop
while($members= mysql_fetch_row($select)){

//Get limit
$limit = $members['limit'];
    $newlimit = $limit - 1;

mysql_query("UPDATE `members` SET `limit` = '".$newlim."' WHERE `email`='".$members['email']."'");
} 
```

有什么建议吗？此代码成功运行，直到值变为 0。但我需要它来保持减法。

提前致谢！布兰登

编辑：更新了上面的代码。有错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:29:25.460

我的猜测是你的`limit`专栏是一个`UNSIGNED INT`. 无符号数可以是有符号数的两倍，但它们不能有负值（因此是无符号数）。

您可以使用 ALTER TABLE 语句将列更改为`INT`，但您需要小心，因为*如果存储在`limit`字段中的任何值大于**2147483647**（如果将其更改为带符号的 INT），则不会保留这些值*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:29:19.330

删除多余的 = 符号

```
$newlimit = $limit - 1; 
```

并在您的 SQL 语句中替换`$newlim`为`$newlimit`

另请注意，您可以在单个 SQL 语句中执行相同的操作，而无需涉及任何循环或 php：

```
UPDATE `members` SET `limit`=`limit`-1 
```

# jquery - Angular：当多个 div 具有相同的类时，更改单个 div 的类的最佳实践是什么？

> ID：15227536
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:29.453
> 
> 标签：jquery, angularjs

我对角度很陌生。我想要的是在单击按钮时替换 div 的类。使用“ng-class”会更改页面上所有具有该类的 div 的类，我只想选择一个来替换。

这个[jsfiddle](http://jsfiddle.net/gstipton/XxMSm/25/)演示了我正在尝试做的事情。我正在尝试使用 jQuery，但正如您所见，它在这种情况下不起作用。我的猜测是有一种更“棱角分明”的方式来做到这一点。有什么建议么？

这是jsfiddle中的代码：

```
<div ng-controller="MyCtrl">
<div class="test1">
    Text1
</div>
<div class="test1">
    Text2
</div>
<button ng-click="click($event)">Click</button>
</div>

var myApp = angular.module('myApp', []);

function MyCtrl($scope) {

   $scope.click = function (e) {
       var source = e.target || e.srcElement;
       var div = source.prev("div.test1:first");
       div.toggleClass('test1');
   };
}

.test1 {
  color: blue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:38:11.920

是的，您正在尝试以非 AngularJS 的方式来处理它。使用 AngularJS，您需要专注于模型操作，装饰性地描述 UI，让 AngularJS 解决剩下的问题。

解决问题的一种方法是沿着这些思路：

```
function MyCtrl($scope) {

    $scope.selected = true;

    $scope.click = function () {
      $scope.selected = false;  
    }; 
} 
```

在 HTML 中：

```
<div ng-controller="MyCtrl">
    <div ng-class="{test1: selected}">
        Text1
    </div>
    <div class="test1">
        Text2
    </div>
    <button ng-click="click()">Click</button>
</div> 
```

在这里工作 jsFiddle：http: [//jsfiddle.net/CqHDn/](http://jsfiddle.net/CqHDn/)但这实际上只是一种做事方式。这里的关键问题是：第一个 div（从功能上讲）有什么特别之处，以至于您想要翻转它的类？您可能应该在模型中表示功能概念。

就 jQuery 而言：我真的建议在学习 AngularJS 时完全放弃它。我不是唯一一个：[https ://stackoverflow.com/a/15012542/1418796](https://stackoverflow.com/a/15012542/1418796)

# html - 使用 MathPage MathML 导出 MathType Word 文档

> ID：15227539
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:35.843
> 
> 标签：html, ms-word, mathml, mathtype

如果有数学方程式，我需要将 ms-word 2003 文档转换为包含 MathML 的 HTML。我目前找到的快速解决方案是使用 MathType 插件使用 MathML 的“发布到 MathPage”功能将整个文档导出为 HTML。

但是，它无法正确进行转换。文档中的大部分方程仍然是图像格式，而不是 MathML。奇怪的是，它将逗号转换为 MathML，而不是方程式。

原word文档： [https ://dl.dropbox.com/u/4625393/test12.doc](https://dl.dropbox.com/u/4625393/test12.doc)

转换后的html源码关键部分： [https ://gist.github.com/katat/5091021](https://gist.github.com/katat/5091021)

这是 MathType 的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:11:56.130

Kata，我不确定您使用的是什么版本的 Word 和 MathType，但我能够使用 MathML 成功创建 MathPage。我正在使用 Word 2013 和 MathType 6.9。这是我创建的页面：http: [//dl.dropbox.com/u/17008533/187.xht](http://dl.dropbox.com/u/17008533/187.xht)

不知道你的可能出了什么问题。您似乎为 MathPage 选择了合适的“目标”；看起来您选择了 XHTML+MathML。

如果你能给我一些关于你从开始到结束所采取的步骤的更多细节，我会尽力提供更多帮助。也让我知道您使用的是什么版本的软件。

# java - 无法在 GAE 应用程序中导入 jar 文件

> ID：15227540
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:35.870
> 
> 标签：java, eclipse, google-app-engine

我正在使用 Eclipse Juno 4.2 中的 Google App Engine 创建一个新的 Web 应用程序项目。在 Eclipse 中的动态 Web 项目中，我只需将所需的 jar 文件复制到 WEB_INF 目录中的 lib 文件夹中即可导入它们。

但是，即使在将 jar 文件复制到新 Web 应用程序的 WEB_INF 目录的 lib 文件夹后，使用谷歌应用程序引擎，我在导入库时仍然遇到错误。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:32:34.157

我强烈建议使用 GPE 插件。从文件->新建->谷歌->选择你想要的生成合适的项目

GPE 在这里：[https ://developers.google.com/eclipse/](https://developers.google.com/eclipse/)

# php - mysqldump的替代品？

> ID：15227541
> 
> 赞同：1
> 
> 时间：2013-03-05T15:23:40.587
> 
> 标签：php, mysql, mysqldump

首先，我在使用 MYSQLDump 时遇到了严重的问题，我们在这里为我们的主域提供了一个专用服务器，我正在运行以下命令：

```
mysqldump --opt -h localhost -u root -p ***** --all-databases > ~/var/www/vhosts/mydomain/httpdocs/db.sql 
```

我什么也没得到:(

但更重要的是，我没有对我可以访问的每台服务器的 root 访问权限。但我**确实**有数据库用户名和密码。肯定有一种 PHP 唯一的方法可以转储 SQL 数据库的全部内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:35:48.967

那么为什么不使用数据库的用户/密码来执行每个数据库转储，如下所述：

[http://dev.mysql.com/doc/refman/5.1/de/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/de/mysqldump.html)

mysqldump [选项] --databases db_name1 [db_name2 db_name3...]

我只知道备份 mysql 数据库的两个选项。一种是使用mysqldump，另一种是停止mysql-server并备份数据库文件。使用 PHP 或任何会持续更长时间并导致更多麻烦的转储，然后只使用 mysqldump！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:39:29.577

> 我不知道有一个 MySQL 根。

好吧，那是您问题的最可能原因，因为您有这个：

```
mysqldump --opt -h localhost -u root -p *****
                             ^^^^^^^ 
```

该`-u`参数需要一个 MySQL 用户，并且您可能正在使用系统`root`用户来提供它，这是完全不同的。

如果每个数据库都有一个单独的用户，恐怕您将不得不发出单独的转储。

此外，尝试获取错误消息。您可以通过将运算符附加 到命令来[重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html) `stderr`到，并且可以从[shell_exec()](http://php.net/shell_exec)的返回中获取输出。`stdout``2>&1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T00:26:26.700

在 mysqldump 命令中，-p 和密码后没有空格，因此您的行应如下所示：

```
mysqldump --opt -h localhost -u root -p***** --all-databases > /var/www/vhosts/mydomain/httpdocs/db.sql 
```

# java - 外键作为组合键-PK

> ID：15227543
> 
> 赞同：-3
> 
> 时间：2013-03-05T15:23:45.690
> 
> 标签：java

```
public class ProductInfo 

    private String productInfoId;

@OneToMany(cascade = CascadeType.ALL)

@JoinColumn(name = "ProductInfoId")

private List<Size> sizeList=new ArrayList<Size>();

}

public class Size{

private SizePK key;

}

@Embeddable

public class SizePK
{

    private String productInfoId;

    private String sizeDetails;

} 
```

SIZE(ProductInfoId, productInfoId, sizeDetails)

05.03.2013 20:20:45.092 *WARN* [main] org.hibernate.util.JDBCExceptionReporter SQL 错误：1110，SQLState：42000 05.03.2013 20:20:45.092*错误*[main] org.hibernate.util.JDBCExceptionReporter 列 'productInfoId'指定两次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:29:35.507

假设您的问题是如何摆脱您发布的错误，即“列'productInfoId'指定了两次”：

`productInfoId`将类中的名称更改为`SizePK`其他名称。

# python - 一旦文本超出屏幕，Python tk 滚动条就会变为非活动状态

> ID：15227544
> 
> 赞同：1
> 
> 时间：2013-03-05T15:23:46.277
> 
> 标签：python, tkinter, scrollbar

每当我用文本填充框时，水平滚动条都可以正常工作，直到在屏幕上看到文本。

![图像1](../Images/f2c2ba0badd66a923c8aae2823465c8c.png)

但是，如果行数大于屏幕上可以看到的行数并且我向下滚动文本，水平滚动条将变为非活动状态，直到文本太长而无法再次容纳一行

![图2](../Images/2ba7b1fadff996514aef608ae877ab15.png)

这是我真正的基本代码：

```
from Tkinter import *
import Tkinter,tkFileDialog, tkFont

w = Label(root, text="Hello, world!")
w.pack()

textfr=Frame(root)
t=Text(textfr, width=100, height=10,font=("Arial",12),wrap=NONE)
t.insert('1.0', 'here is my text to insert')

Yscroll=Scrollbar(textfr, orient=VERTICAL)
Xscroll=Scrollbar(textfr, orient=HORIZONTAL)

t.configure(yscrollcommand=Yscroll.set)
t.configure(xscrollcommand=Xscroll.set)

Yscroll.config(command=t.yview)
Xscroll.config(command=t.xview)

        #pack everything

Yscroll.pack(side=RIGHT,fill=Y)
Xscroll.pack(side=BOTTOM,fill=X)
t.pack(side=LEFT, fill=BOTH, expand=TRUE)
textfr.pack(side=TOP, fill=BOTH, expand=TRUE)

root.mainloop() 
```

唉，我找不到/谷歌正确的解决方案，即使问题真的很基本

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:36:00.043

```
from Tkinter import *

class AutoScrollbar(Scrollbar):
    # a scrollbar that hides itself if it's not needed.  only
    # works if you use the grid geometry manager.
    def set(self, lo, hi):
        if float(lo) <= 0.0 and float(hi) >= 1.0:
            # grid_remove is currently missing from Tkinter!
            self.tk.call("grid", "remove", self)
        else:
            self.grid()
        Scrollbar.set(self, lo, hi)
    def pack(self, **kw):
        raise TclError, "cannot use pack with this widget"
    def place(self, **kw):
        raise TclError, "cannot use place with this widget"

root = Tk()

vscrollbar = AutoScrollbar(root)
vscrollbar.grid(row=0, column=1, sticky=N+S)
hscrollbar = AutoScrollbar(root, orient=HORIZONTAL)
hscrollbar.grid(row=1, column=0, sticky=E+W)

canvas = Canvas(root,
                yscrollcommand=vscrollbar.set,
                xscrollcommand=hscrollbar.set)
canvas.grid(row=0, column=0, sticky=N+S+E+W)

vscrollbar.config(command=canvas.yview)
hscrollbar.config(command=canvas.xview)

# make the canvas expandable
root.grid_rowconfigure(0, weight=1)
root.grid_columnconfigure(0, weight=1)

#
# create canvas contents

frame = Frame(canvas)
frame.rowconfigure(1, weight=1)
frame.columnconfigure(1, weight=1)

rows = 20
for i in range(1,rows):
    for j in range(1,50):
        button = Button(frame, padx=7, pady=7, text="[%d,%d]" % (i,j))
        button.grid(row=i, column=j, sticky='news')

canvas.create_window(0, 0, anchor=NW, window=frame)

frame.update_idletasks()

canvas.config(scrollregion=canvas.bbox("all"))

root.mainloop() 
```

这只是一个使用按钮的简单示例。更改 for 循环的 range() 语句中的数字以了解它，您应该能够调整此代码然后适合您的代码，希望这会有所帮助。

# javascript - 修改代码以检查选择框中的重复条目

> ID：15227547
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:50.117
> 
> 标签：javascript

我有以下内容，它动态地将新值选项添加到选择框中。我遇到的问题是它在将新选项添加​​到选择框中之前不检查重复条目。有没有办法我可以更改我的代码，以便它会提醒用户发现重复条目​​并停止添加相同的选项值？

```
function refadd() {

var val = document.getElementById('docsref').value

    if (val != "") {

        var select = document.getElementById('docsref_list');

        var option = document.createElement('option');

        option.text = value

        select.add(option,select.option)

        select.selectedIndex = select.options.length - 1;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:28:09.763

最好是**遍历**所有现有选项并检查您是否有匹配项。
将添加循环，使其出现在您的 IF 条件**之前。**
如果找到匹配项，您可以通知用户（例如 alert ），然后执行“ **return** ”语句。

如下所示：

```
function refadd() 
{
    var value = document.getElementById('docsref').value
    if (value != "") 
    {
        var select = document.getElementById('docsref_list');
        var option = document.createElement('option');
        var flag = 0;
        for(var i = 0; i < select.length; i++)
        {
        if(select[i].value == value)
        {   
            flag = 1;
        }
        }
        if(flag == 1)
        {
        alert('Value is duplicate.');
        }
        else
        {
        option.text = value;
        select.add(option,select.option);
        select.selectedIndex = select.options.length - 1;
        }

    }
} 
```

如果你的 HTML 是这样的：

```
<div>
    <input type = "text" name = "docsref" id = "docsref" style = "width:100px;"/>
    <input type = "button" name = "addValues" id = "addValues" value = "AddValues" onClick = "refadd();"/>
    </br>
    <select id = "docsref_list">
    <option value = "1">1</option>
    <option value = "2">2</option>
    </select>
</div> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:34:27.283

```
using jQuery...

    function refadd() {    
    var val = $("#docsref").val();
        if (val != "") {
    for(var i = 0; i < select.length; i++)
        {
        if(select[i].value == value)
        {   
            alert("can't add.");
            return false;
        }
        }
        var ob = new Option("option text", "value");
        $(ob).html("option text");
        $("#selectList").append(ob);
        }
    } 
```

# c# - 下拉列表中的多个项目

> ID：15227552
> 
> 赞同：0
> 
> 时间：2013-03-05T15:23:55.423
> 
> 标签：c#, asp.net-mvc

我有一个实体“Fuel Card”，它由一个实体“Person”组成（您必须选择一个与新卡关联的人）。所以我有一个下拉列表，由我的模型“Person”的属性“Name”填充。我将执行的是向我的下拉列表提供 2 个项目，即名字和姓氏（因此我的下拉列表将包含“FirstName +”“+ LastName”）。有什么想法吗？在互联网上没有找到关于那个...

我的燃料卡的创建方法

```
 [HttpPost]
    public ActionResult Create(VehicleFuelCard vehiclefuelcard)
    {
        if (ModelState.IsValid)
        {
            db.VehicleFuelCards.AddObject(vehiclefuelcard);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.Id_Person = new SelectList(db.Persons, "Id_Person", "FirstName", vehiclefuelcard.Id_Person);

        ViewBag.Id_VehicleFuelCardCompany = new SelectList(db.VehicleFuelCardCompanies, "Id_VehicleFuelCardCompany", "Name", vehiclefuelcard.Id_VehicleFuelCardCompany);
        return View(vehiclefuelcard);
    }

    //
    // GET: /VehicleFuelCard/Edit/5

    public ActionResult Edit(long id = 0)
    {
        VehicleFuelCard vehiclefuelcard = db.VehicleFuelCards.Single(v => v.Id_VehicleFuelCard == id);
        if (vehiclefuelcard == null)
        {
            return HttpNotFound();
        }
        ViewBag.Id_Person = new SelectList(db.Persons, "Id_Person", "FirstName", vehiclefuelcard.Id_Person);
        ViewBag.Id_VehicleFuelCardCompany = new SelectList(db.VehicleFuelCardCompanies, "Id_VehicleFuelCardCompany", "Name", vehiclefuelcard.Id_VehicleFuelCardCompany);
        return View(vehiclefuelcard);
    } 
```

视图创建：

```
 @model BuSIMaterial.Models.VehicleFuelCard

@{
    ViewBag.Title = "Create";
}

<h2>Create a fuel card</h2><br />

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>VehicleFuelCard</legend>

        <div class="editor-label">
            Card Number : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Number, new { maxlenght = 50})
            @Html.ValidationMessageFor(model => model.Number)
        </div>

        <div class="editor-label">
            PIN code : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.PIN, new { maxlenght = 8})
            @Html.ValidationMessageFor(model => model.PIN)
        </div>

        <div class="editor-label">
            Start date : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.StartDate)
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            End date : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EndDate)
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>

        <div class="editor-label">
            Company : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_VehicleFuelCardCompany", String.Empty)
            @Html.ValidationMessageFor(model => model.Id_VehicleFuelCardCompany)
        </div>

        <div class="editor-label">
            Owner : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_Person", String.Empty)
            @Html.ValidationMessageFor(model => model.Id_Person)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:28:24.910

在您的模型上创建一个名为 FullName 的属性，类似于

```
public string FullName
{
    get { return FirstName + " " + LastName; }
} 
```

然后将你的下拉绑定到那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:28:05.253

尝试这个：

```
var people = from p in db.Persons.ToList()
             select new
             {
                Id = Id_Person,
                Name = p.FirstName + " " + p.LastName,
             };

ViewBag.Id_Person = new SelectList(people, "Id", "Name", vehiclefuelcard.Id_Person); 
```

# vim - Omnicompletion 搜索建议

> ID：15227554
> 
> 赞同：1
> 
> 时间：2013-03-05T15:24:04.690
> 
> 标签：vim

有没有办法为`/`搜索配置 Omnicompletion？所以搜索`/be`会建议文本中的其他词，例如：

```
/be<tab> 
```

*   披头士乐队
*   啤酒
*   贝多芬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:43:37.210

就个人而言，我认为输入后`/`你可以输入一个正则表达式，自动完成在这里没有多大意义...... vim 不知道你想要什么，它怎么能给出建议？它不像在插入模式下。

但是有办法实现它。

*   你输入`/`
*   你输入`Ctrl`-`F`
*   你输入`i`（进入插入模式）
*   你输入`be``TAB`

现在你看到了弹出菜单。

这不仅适用于`/`，而且适用于`:`（cmd模式）

`Ctrl`-`F`当我们写长命令时很方便

细节：

```
:h cedit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:43:54.573

您可以使用[CmdlineComplete 插件](http://www.vim.org/scripts/script.php?script_id=2222)。它将使用`<C-n>`/触发`<C-p>`，并且不会显示完成菜单（但您可以通过重复触发来循环选择候选项）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T16:56:33.783

您可以使用( ) 的组合[`'incsearch'`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27incsearch%27)和命令行完成来实现非常接近您想要的东西：`Ctrl``R` `Ctrl``W`[`:h c_CTRL-R_CTRL-W`](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-R_CTRL-W)

1.  `:set incsearch`.

2.  开始输入您的搜索模式，例如`/Be`。在您键入时，光标会移动到下一个可能的匹配项。

3.  一旦光标落在您要完成的单词上，点击`Ctrl``R` `Ctrl``W`。这会将单词下拉到您的搜索提示中：它有效地“完成”了您的搜索模式。

在第 3 阶段，您还可以使用这些变体：

*   `Ctrl``R` `Ctrl``A`( [`:h c_CTRL-R_CTRL-A`](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-R_CTRL-A)) 下拉*WORD*而不是*word*。
*   `Ctrl``L`( [`:h c_CTRL-L`](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-L)) 逐个字符完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:21:01.990

我使用了前面提到的 CmdLineComplete 插件，直到我了解了

```
set incsearch 
```

# javascript - 双面透明着色器看起来有问题

> ID：15227558
> 
> 赞同：4
> 
> 时间：2013-03-05T15:24:09.573
> 
> 标签：javascript, glsl, three.js, webgl, shader

我做了一个小测试，让您可以使用[three.js](https://github.com/mrdoob/three.js/)在 3D 环境中试验着色器。

场景中有一个显示着色器的球体。

我创建的[演示着色器是一个非常简单的着色器，它使用 2D 噪声实现。](http://shaderlab.timseverien.nl/)球体的很大一部分仍然是黑色的，我将其设置为透明的。我希望球体的另一侧也可见。所以我启用了透明度并将渲染面设置为双面。

```
material = new THREE.ShaderMaterial({
    'uniforms': uniforms,
    'fragmentShader': $('textarea#input-fragment').val(),
    'vertexShader': $('textarea#input-vertex').val()
});

material.side = THREE.DoubleSide;
material.transparent = true; 
```

在[这个例子](http://shaderlab.timseverien.nl/1)中，buggyness 更容易被注意到。

从顶部查看球体时，您只能从外侧看到着色器。从侧面看似乎有点波涛汹涌，从底部看似乎在工作。

这些是不同的角度（顶部 - 侧面 - 底部）：

![顶视图](../Images/d01c5f0eb73fe42549f9dcdbf90c14fa.png) ![侧面图](../Images/47bd95e8e0ed8d40385847311253c434.png) ![底视图](../Images/cb941efd0437b58d343dfa3f34c4d98f.png)

这是我的片段着色器的重要部分：

```
void main() {
    float r = cnoise(vNormal.yz * 2.0 + t);
    float g = cnoise(vNormal.xz * -1.0 + t);
    float b = cnoise(vNormal.xy * -2.0 + t);

    // opacity ranges assumable from 0 - 3, which is OK
    gl_FragColor = vec4(r, g, b, r + g + b);
} 
```

那么为什么我会看到断断续续的边缘，为什么视角很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:56:10.033

您的着色器没有任何问题。设置的话也可以看到效果：

```
gl_FragColor = vec4( 1.0, 1.0, 1.0, 0.5 ); 
```

在three.js 中，自我透明很棘手。

出于性能原因`WebGLRenderer`，深度排序仅*在*对象之间（基于它们的位置）起作用，而不是在单个对象内。

无法控制对象内各个面的渲染顺序。

这就是为什么从某些视角看你的场景比从其他角度看更好。

一种解决方法是将几何体分解为每个面的单个网格。

另一种解决方法（你最好的选择，IMO）是用相同位置的两个透明球体替换你的透明双面球体 - 一个正面和一个背面。

三.js r.56

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T21:14:12.573

和我遇到的非常相似。理解这一点的原因最好在[Three.js 透明度](https://threejsfundamentals.org/threejs/lessons/threejs-transparency.html)基础上进行解释。如果没有关于您的代码或目标的更多详细信息，这里是 r128 版本的替代解决方案。只需在您的材料中再添加一行：

```
material.depthTest: false, 
```

简而言之，正如@WestLangley 提到的那样，您的着色器很好，但是在渲染透明度期间，也会考虑像素彼此之间的深度 - 最终导致某些像素不渲染。这就是您的“越野车”的来源。不是真正的错误，而是默认情况下渲染场景的方式，直到被告知否则。您可能会遇到很多与您的期望相竞争的*问题，因此我建议您阅读我发布的链接。

*一个这样的问题：如果您的场景中有其他对象，那么当然，由于您关闭了 depthTest，您可能会得到不正确的对象放置，因为应该在背景中的对象可能会在前景中渲染。

# r - 如何将函数应用于 csv 文件

> ID：15227564
> 
> 赞同：0
> 
> 时间：2013-03-05T15:24:35.247
> 
> 标签：r

```
limbs <- c(4, 3)
names(limbs) <- c('One-Eye', 'Peg-Leg') 
```

要在上面应用条形图，我使用：

```
barplot(limbs) 
```

如何将相同的功能应用于 .csv 文件？有没有我可以用来将肢体和名称（肢体）设置为肢体、名称列的命令？

我已使用以下命令将 csv 文件读入内存： result <- read.csv(result.csv")

csv的格式是：

```
names      limbs
'One-Eye' , 4
'Peg-Leg' , 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:29:30.833

为什么不使用与法线向量相同的方法？

```
> limbs <- result$limbs
> names(limbs) <- result$names
> barplot(limbs) 
```

或者，更直接地：

```
> barplot(result$limbs, names.arg = result$names) 
```

# javascript - 可排序的 div，对子元素的顺序进行验证

> ID：15227565
> 
> 赞同：2
> 
> 时间：2013-03-05T15:24:39.750
> 
> 标签：javascript, jquery, html, css, jquery-ui-sortable

考虑以下 div 结构

* * *

`ELE 1` `div` `div` `div` `ELE 2` `div` `div` `ELE 3` `div`

* * *

我想`ELE n`按我想要的顺序排列 s。我发现我可以使用 jQuery 的`sortable()`函数来做同样的事情。

但是，我也想做一些**验证**，只有验证成功，才能被丢弃`div`的位置占据新的位置。否则它应该恢复到原来的位置。

**需要验证：**

我想四处走动并安排`ELE 1`，`ELE 2`而且`ELE 3`，但它应该只在它们的**顺序保持不变**时才有效。

例如，如果`ELE 2`在 之后的位置`ELE 3`下降，则应取消下降

有任何想法吗？

**JSFiddle 链接：http:** [**//jsfiddle.net/neekdamon/C9kUM/1/**](http://jsfiddle.net/neekdamon/C9kUM/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:57:24.877

这是一个非常自定义的验证。但我这样做的方式是`data-order`为某些元素添加一个属性。所以你可以按照原来的顺序。

更改顺序后，您可以检查该`data-order`属性是否仍处于正确的数字顺序中。如果没有，请进行还原。

我举了一个例子来说明我的意思：

[http://jsfiddle.net/C9kUM/2/](http://jsfiddle.net/C9kUM/2/)

那是你要找的吗？

# php - 使用 jQuery AJAX 将 PHP 数组转换为 JavaScript

> ID：15227568
> 
> 赞同：0
> 
> 时间：2013-03-05T15:24:44.757
> 
> 标签：php, javascript, jquery, multidimensional-array

我想在 javascript 中操作 PHParray。这是我正在使用的代码。

数组.php

```
<?php

$sentido[1]="ver";
$sentido[2]="tocar";
$sentido[3]="oir";
$sentido[4]="gustar";
$sentido[5]="oler"; 

?> 
```

fx_funciones.js

```
 /*Pre-sentences*/
 var js_array=new Array();

$.ajax({        
       type: "POST",
       url: "array.php",
       success: function(response) {
           js_array=response      
       }
    }); 
```

这是我想做的，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:27:05.043

尝试这个：

```
<?php

$sentido[1]="ver";
$sentido[2]="tocar";
$sentido[3]="oir";
$sentido[4]="gustar";
$sentido[5]="oler"; 

echo json_encode($sentido); 
```

和：

```
$.getJSON('array.php', function(sentido) {
    console.log(sentido);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:27:30.277

您需要使用该[`json_encode`](http://php.net/manual/en/function.json-encode.php)函数将 PHP 代码中的数组作为 JSON 返回。然后，在您的 jQuery 代码中，指定一个`json`dataType 以便它被隐式转换并作为数组传递给回调函数：

```
var js_array=new Array();

$.ajax({        
   type: "POST",
   url: "array.php",
   success: function(response) {
       js_array=response      
   },
   dataType: 'json'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:28:37.820

我认为，上述问题的答案已经在下面的链接中得到解决。请检查出来。 [从 php 数组中获取数据 - AJAX - jQuery](https://stackoverflow.com/questions/6395720/get-data-from-php-array-ajax-jquery)

我希望它会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:46:28.923

使用标准 JSON 表示法。它序列化对象和数组。然后打印它，在客户端获取它并解析它。

在服务器上：

```
echo json_encode($sentido); 
```

有关 PHP 的 json_encode 的更多信息：http: [//php.net/manual/de/function.json-encode.php](http://php.net/manual/de/function.json-encode.php)

在客户端，如果您将 jQuery 函数用于期望 JSON 编码对象的 ajax 并为您解析它们，这将特别容易：

```
$.getJSON('address/to/your/php/file.php', function(sentidos) {

    alert(sentidos[0]);  // It will alert "ver"
    alert(sentidos[1]);  // It will alert "tocar"

}); 
```

它使用 GET 但这很可能是您需要的。

有关 jQuery 的 $.getJSON 的更多信息：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# css - 背景大小：使用 Windows Phone 浏览器覆盖属性

> ID：15227569
> 
> 赞同：5
> 
> 时间：2013-03-05T15:24:46.060
> 
> 标签：css, internet-explorer, background, windows-phone

我正在尝试使用该`background-size: cover`属性。它适用于任何地方，但.. 在 Windows 手机上！（我用 HTC 8X 试过）

```
body.menu{
    background: url('[my_picture_link]') no-repeat top center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-height: 100%;
} 
```

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:14:26.383

尝试添加：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='[my_picture_link]', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='[my_picture_link]', sizingMethod='scale')"; 
```

虽然这可能是错误的。这是一篇关于封面的好文章：http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# fragment-shader - 仅将红色分量写入 AGAL 像素着色器输出

> ID：15227573
> 
> 赞同：1
> 
> 时间：2013-03-05T15:24:55.257
> 
> 标签：fragment-shader, pixel-shader, agal

我想要一个像素着色器 om AGAL，它不是简单地将从顶点着色器传递给它的颜色复制到输出，而是仅从传递的颜色复制红色分量并将绿色和蓝色分量设置为零。在伪代码中：

```
temp = 0
temp.red = in.red
temp.alpha = in.alpha
out = temp 
```

我不知道如何在 AGAL 中写这个。以下不这样做：

```
mov ft0.ra, v0.ra
mov oc, ft0 
```

我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:14:46.633

你必须记住

*   在目标寄存器右侧使用“.something”表示您正在使用掩码
*   在源寄存器右侧使用“.something”意味着您正在使用 swizzles。

假设

*   fc0 在第一个组件中包含一个零
*   v0 包含要从中提取红色分量的颜色

所以这是你的片段着色器：

```
// shader.
mov ft0, fc0.xxxx     // fill ft0 with zeros
mov ft0.xw, v0.xxxw   // fill ft0.x with v0.x and ft0.w with v0.w
mov oc, ft0 
```

**资料来源：**我为 AGAL 编译器编写了 Minko 的 ActionScript 3。

# iphone - 切换屏幕并从纵向更改为横向后，拆分视图的左侧为空白

> ID：15227576
> 
> 赞同：2
> 
> 时间：2013-03-05T15:25:01.920
> 
> 标签：iphone, ios, objective-c, xcode, ipad

这是一个非常奇怪的问题，我无法缩小范围。

在某些情况下，拆分视图屏幕的左侧会变黑。这些是，

1.  第一个也是最奇怪的是，屏幕最初必须以纵向模式加载。如果它以横向加载，我将无法重现此问题。

2.  在纵向模式下（隐藏拆分视图的左侧），您点击一个按钮以显示左视图的弹出窗口，然后将其关闭。

3.  转到导航中的下一个屏幕。

4.  换成风景

5.  返回拆分视图屏幕

和噗，分割视图的左侧是黑色的。就像从未加载视图一样。

最初我的想法是这是一个内存泄漏问题，与弹出框未正确解除分配有关。

然而，应用程序必须以纵向模式启动这一事实确实让我感到困惑。即使我从横向开始，然后在步骤 1 中转到纵向并完成整个过程，一切正常。即使通过这些步骤的多次迭代，它也永远不会触发空白屏幕。

我认为我应该发布代码，但我对问题可能是什么感到迷茫，我不知道从哪里开始。

# java - 如何知道字符串是否在 Android 的数组中？

> ID：15227578
> 
> 赞同：0
> 
> 时间：2013-03-05T15:25:04.833
> 
> 标签：java, android, arrays, string, search

大家好，我在 Android 中编写了一个应用程序，我不知道该怎么做才能得到我正在尝试的这个。我现在认为这很简单，但请帮助我！

假设我有一个数组：

```
String coco[] = { "hi", "everybody", "superman", "batman" }; 
```

而且我还有一个：

```
 String heroe = "superman"; 
```

现在我需要创建一个循环、方法或其他任何东西，它采用“heroe”并搜索该值（“superman”）是否在数组中，然后搜索该值是否存在 TRUE，如果不存在 FALSE。

谢谢你们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T15:26:42.413

最舒服的方法是**将**数组转换**为列表**然后搜索。

它**干净、简短、富有表现力**。

```
boolean isThere = Arrays.asList(yourArray).contains("needle"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:26:56.123

```
for(int i=0;i<coco.length;i++)
{
    if(coco[i].equals(heroe))
       return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:27:16.853

这是一个简单的解决方案。使用可以使用 .contains () 方法的 ArrayList 会更容易。

```
for(int i = 0; i < coco.length; i++)
{
        if(coco[i].equals(heroe))
        {
            // a match!
            return true;
        }
}

// no match
return false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:27:23.123

只需遍历数组中的值并将它们与您要查找的值进行比较

```
public boolean arraySearch(String[] strArray, String key) {

    for (String s : strArray) {
        if (s.equals(key)) {
            return true;
        }
    }
    return false;
} 
```

您可以通过调用`arraySearch(coco, heroe);`代码来使用它。

或者，您可以使用[Arrays](http://developer.android.com/reference/java/util/Arrays.html)类并使用：

```
boolean keyPresent = Arrays.asList(coco).contains(heroe); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T15:27:35.157

你可以这样做。

只需获取要搜索的变量并迭代数组并使用`equals`方法即可。

```
String heroe = "superman";
boolean flag = false;
for(int index = 0; index < coco.length; index++)
{
    Strin value = coco[index];
    if(heroe.equals(value))
    {
       flag = true;
    }
}

if(flag) {
   //Exist
}
else {
   //Not Exist 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T15:28:10.907

你可以做这样的事情：

```
 for (String testcoco : coco)
    {
        if (testcoco.contains("superman"))
        {
            return true;
        }
    }
    return false; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T15:29:11.503

```
public boolean checkPresence(String desired)
 for(String s:coco){
    if(s.equals(desired)){
       return true
       }
    }
    return false; 
```

# c# - SQL Server CE 异常 InvalidDatabaseFormatException

> ID：15227581
> 
> 赞同：4
> 
> 时间：2013-03-05T15:25:11.923
> 
> 标签：c#, asp.net, sql, windows, sql-server-ce

我正在尝试调用此函数：

```
public Exception SetData(string Data)
{
    public string conectionstring = "Data Source=MyData1.sdf;Encrypt Database=True;Password=as!;File Mode=Read Write; persist Security Info=False;LCID= 1033";

    query = "Insert into [CopyData] values (@data)";
    try
    {
        con = new SqlCeConnection(conectionstring);
        com = new SqlCeCommand(query, con);
        com.Parameters.AddWithValue("@data",Data);con.Open();
        com.ExecuteNonQuery();
        con.Close();
        return null;
    }
    catch (Exception ex)
    {
        return ex;
    }
} 
```

通过`Main()`使用代码

```
class Program
{
    static void Main(string[] args)
    {
        DB cdb = new DB();
        string b = "hello";
        Exception e = cdb.SetData(b);
        Console.WriteLine(e);
        Console.ReadLine();
    }
} 
```

但我得到了这个例外

> System.Data.SqlServerCe.SqlCeInvalidDatabaseFormatException
> 
> 数据库文件是由早期版本的 SQL Server Compact 创建的。请使用 SqlCeEngine.Upgrade() 升级

我尝试通过调用来解决`SqlCeEngine.Upgrade()`它

```
public Exception SetData(string Data)
{
    public string conectionstring = "Data Source=MyData1.sdf;Encrypt Database=True;Password=as!;File Mode=Read Write; persist Security Info=False;LCID= 1033";
    public string conectionstringc = "Data Source=MyData1.sdf;Encrypt Database=True;Password=as!;File Mode=Read Write; persist Security Info=False;LCID= 1033;Case Sensitive=true";
    query = "Insert into [CopyData] values (@data)";
    try
    {
        SqlCeEngine engine = new SqlCeEngine(conectionstring);
        engine.Upgrade(conectionstringc);
        con = new SqlCeConnection(conectionstring);
        com = new SqlCeCommand(query, con);
        com.Parameters.AddWithValue("@data",Data);con.Open();
        com.ExecuteNonQuery();
        con.Close();
        return null;
    }
    catch (Exception ex)
    {
        return ex;
    }
} 
```

但是后来出现了这个异常

> System.Data.SqlServerCe.SqlCeException
> 
> 不需要升级数据库，数据库已经是兼容的格式

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T03:06:47.550

插入查询是错误的。

正确的格式是：

“插入 INTO 表名（用逗号分隔的字段）值（用逗号分隔的 DiffvaluesDelimited）”

# objective-c - FBSession.activeSession.isOpen 在第二个 ViewContrller 上给我 False - iOS 6

> ID：15227591
> 
> 赞同：1
> 
> 时间：2013-03-05T15:25:30.873
> 
> 标签：objective-c, ios6, session-state, facebook-ios-sdk

我有 2 `ViewControllers`。

*   第一个 ViewController 我有一个登录 facebook 的按钮，工作正常，给我会话打开状态
*   第二个 ViewController 我有一些按钮（菜单），在这里，我想显示照片 facebook 个人资料。

我对 FacebookSDK 3.2 和 iOS 6.1 遵循[了这个示例](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/#step2)。

**问题：** 我`FBSession.activeSession.isOpen`的第 1 次`VewController`（我登录的地方）是 TRUE，如果我去第 2 次`ViewController`并返回登录仍然打开。在我的第二次`ViewController`（我有`FBProfilePictureView`我的地方`FBSession.activeSession.isOpen`是错误的。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:25:04.980

好吧，我做什么：

您创建的某个地方`@property facebookSession`。
... 。H ...

```
@property (nonatomic,strong)FBSession* facebookSession; 
```

... . 米 ...

```
@synthesize facebookSession = _facebookSession; 
```

接下来你应该创建它：

```
 _facebookSession = [[FBSession alloc] initWithAppID:kAppId
                                                permissions:permissions
                                            urlSchemeSuffix:nil
                                         tokenCacheStrategy:[FBSessionTokenCachingStrategy defaultInstance]

                                ]; 
```

之后，您应该授权：

```
 [_facebookSession openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        if(error){
            DLog(@"can't open session with caching strategy!");
        }
        else{
            DLog(@"open session with caching strategy: %@",[[FBSessionTokenCachingStrategy defaultInstance] fetchTokenInformation]);
        }
    }]; 
```

我建议你用你自己的类包装 facebook sdk。

# wpf - 如何更新颜色，到位，并保存以备下次使用？

> ID：15227592
> 
> 赞同：1
> 
> 时间：2013-03-05T15:25:32.270
> 
> 标签：wpf, themes, resourcedictionary

好的，我已经准备好接受我做错了，但这就是我到目前为止的想法。

我有几个 ListView。它们中有 FileSystemInfo 项。样式（来自资源字典）基于项目的对象类型应用（基于[如何根据项目的类设置 ListViewItem 的样式](https://stackoverflow.com/questions/12802979/how-to-set-the-style-of-a-listviewitem-based-on-the-class-of-the-item)）。

我想让用户能够更改正在应用的颜色。为此，我使用此处建议的方法（[http://svetoslavsavov.blogspot.com/2009/07/switching-wpf-interface-themes-at.html](http://svetoslavsavov.blogspot.com/2009/07/switching-wpf-interface-themes-at.html)）在编辑后重新加载 ResourceDictionary（目前，通过 Notepad++ ）。

这不会导致 ListView 项目重绘并且颜色不会改变。我试图简单地使用两个 Resource xaml 文件，并且也不会更新颜色。

那么，更新控件颜色的最佳实践是什么，然后将其保存以供用户下次运行应用程序时使用？

<-- 编辑-->

具体来说，我所做的是：

1) 我制作了一个使用 ResourceDictionary 中的颜色的样式。像这样：

```
<Color x:Key="DirItemBkgdColor1" />
<Color x:Key="DirItemBkgdColor2" />

<Style x:Key="DirListViewItem" TargetType="ListViewItem">
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush>
                <GradientStop Color="{DynamicResource DirItemBkgdColor1}" Offset="0"/>
                <GradientStop Color="{DynamicResource DirItemBkgdColor2}" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
</Style> 
```

2）我为我想改变的每种颜色进行了设置。3）我用另一个修改了一个：

```
this.Resources["DirItemBkgdColor1"] = FileTrackerWPF.Properties.Settings.Default.DirectoryBackColor1;
this.Resources["DirItemBkgdColor2"] = FileTrackerWPF.Properties.Settings.Default.DirectoryBackColor2; 
```

我将这些代码行放在应用程序的 OnStartup() 和我的应用程序的配置窗口中，它就像一个魅力。现在将其扩展几十个（这是一个沉重的 UI）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:28:12.177

这是我的做法：

1.  确保所有需要颜色的控件都从同一个动态资源中获取。
2.  允许用户选择颜色。[扩展的 WPF 工具包有一个颜色选择器](http://wpftoolkit.codeplex.com/)
3.  将颜色保存在特定于用户的[设置文件中。](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)
4.  当他们选择颜色和应用程序加载时，用保存的设置[覆盖资源。](https://stackoverflow.com/questions/13403606/how-to-change-resource-dictionary-color-in-the-runtime)

# php - 如何将php变量从链接传递到jquery ajax函数

> ID：15227597
> 
> 赞同：0
> 
> 时间：2013-03-05T15:25:44.287
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在尝试将两个变量从链接传递到我的 jquery ajax 函数。但我不知道如何做这些 ajax 的东西。

我有两个 id 的链接。1\. rowid & 2nd。书号。我必须将这两个 id 传递给我的 jquery 函数。

请帮助我如何做到这一点。

```
`//cart item displaying in a for each loop , each row have a 'remove' link with two id 
//say i have $id='4dsf2323' & $bid='43' now i have to pass these two ids to my jquery function on click of a link     

<a id="removeid" >Remove item from cart link</a>` 
```

我的jQuery函数

```
 <script>
        $('removeid').click(function(e) {
      // prevent the default action when a nav button link is clicked
      e.preventDefault();

              //HOW TO GET HERE THOSE TWO IDS FROM MY ABOVE LINK ON CLICK EVENT

      // ajax query to retrieve the HTML view without refreshing the page.
      $.ajax({
        type: 'get',
        url: '/path/to/your/controller/method',
        dataType: 'html',
        success: function (html) {
          // success callback -- replace the div's innerHTML with
          // the response from the server.
          $('#yourDiv').html(html);
        }
      });
    });

    </script> 
```

***********更新************** 输出如下所示 ![在此处输入图像描述](../Images/6c88f2fc99d63722380ee0bff4d965b3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T15:31:17.710

如何利用[jQuery 的 .data() 功能](http://api.jquery.com/data/)？像这样添加 HTML：

```
<a id="removeid" data-id="<?php echo $id;?>" data-bid="<?php echo $bid;?>">Remove item from cart link</a> 
```

然后像这样使用 .data() 检索：

```
$('removeid').click(function(e){
    e.preventDefault();

    var $aid = $('#removeid'),
        id = $aid.data('id'),
        bid = $aid.data('bid');

    // rest of the ajax stuff that uses the data
}); 
```

[只要您不使用 camelCase](https://stackoverflow.com/questions/6509841/jquery-data-not-retrieving-data)，就应该可以正常工作。

**编辑，因为显然删除链接处于循环中并且它们具有相同的 ID？**

用一个类设置你的项目：

```
<a class="RemoveClass" data-id="<?php echo $id;?>" data-bid="<?php echo $bid;?>">Remove item from cart link</a> 
```

然后在 click 函数中使用 $(this) 来仅捕获所单击项目的数据值：

```
$('.RemoveClass').on('click',function(e){
    e.preventDefault();

    var $this = $(this),
        id = $this.data('id'),
        bid = $this.data('bid');

    // rest of the ajax stuff that uses the data
}); 
```

如果您正确执行此操作，它将被本地化为已单击的链接。

作为旁注，我已将语法更改为更通用的[.on()](http://api.jquery.com/on/)事件处理程序。如果您想在将来对该项目执行其他操作，例如悬停事件或其他操作，您可以将其包含在相同的 .on() 绑定中，而不是为不同的事件创建单独的绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:35:07.503

将数据传递给具有数据属性的链接：

```
 <a id="removeid" data-bid="<?=$bid?>" data-id="<?=$id?>" >Remove item from cart link</a> 
```

你的 jQuery javascript 应该是这样的：

```
 $('removeid').click(function(e) {
      // prevent the default action when a nav button link is clicked
      e.preventDefault();
      var id = $.data(this,'id'); // or $(this).attr('data-id');
      var bid = $.data(this,'bid'); // or $(this).attr('data-bid');

      // ajax query to retrieve the HTML view without refreshing the page.
      $.ajax({
           type: 'get',
           url: '/path/to/your/controller/method',
           data: {bid:bid,id:id}
           dataType: 'html',
           success: function (html) {
           // success callback -- replace the div's innerHTML with
           // the response from the server.
           $('#yourDiv').html(html);
       }
  });
}); 
```

或者您可以将整个 url 指定为链接的 href 属性，并且只需：

```
 <a id="removeid" href="/path/to/your/controller/method?bid=<?=$bid?>&id=<?=$id?>" >Remove item from cart link</a> 
```

而js变成：

```
 $('removeid').click(function(e) {
      // prevent the default action when a nav button link is clicked
      e.preventDefault();

      // ajax query to retrieve the HTML view without refreshing the page.
      $.ajax({
           type: 'get',
           url: $(this).attr('href'),
           dataType: 'html',
           success: function (html) {
           // success callback -- replace the div's innerHTML with
           // the response from the server.
           $('#yourDiv').html(html);
       }
  }); 
```

# c# - .NET web-在图表控件鼠标悬停时显示高级弹出窗口

> ID：15227602
> 
> 赞同：0
> 
> 时间：2013-03-05T15:25:54.317
> 
> 标签：c#, .net, charts, microsoft-chart-controls

在 .NET C# 折线图中，对于每个空点标记，我想在用户将鼠标悬停在标记上时显示一个弹出窗口。

添加一个简单的字符串作为工具提示似乎很简单，但我需要为每个空点标记创建一个小的弹出框，其中包含几行信息和一个图像。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:12:24.393

MsCharts 在图表上生成地图叠加层（一组地图区域），您可以对其进行自定义以获得自定义悬停事件。图表公开`CustomizeMapAreas`了您可以订阅的事件，如下所示：

```
 protected void BindMapAreaEventHandlers()
    {
        this.CustomizeMapAreas += new EventHandler<CustomizeMapAreasEventArgs>(CustomizeMapAreasHandler);
    }

    private void CustomizeMapAreasHandler(object sender, CustomizeMapAreasEventArgs e)
    {
    } 
```

现在在图表初始化期间调用您的`BindMapAreaEventHandlers()`函数，并将在悬停时显示弹出窗口的逻辑放入 a`CustomizeMapAreasHandler`中，您可以在其中迭代为图表生成的所有地图项。

```
private void CustomizeMapAreasHandler(object sender, CustomizeMapAreasEventArgs e)
{
    foreach (MapArea item in e.MapAreaItems)
    {
        // any custom logic to change onHover for MapArea.
    }
} 
```

为了正确生成所有地图区域，我建议在将系列添加到图表时为所有系列设置非空工具提示，然后在 CustomizeMapAreasHandler 中将它们改回空。这个简单的技巧告诉 MsCharts 所有系列的地图区域都很重要，否则它将仅为图例生成地图区域。

# c# - 将数据从 C# 传递到 PHP

> ID：15227604
> 
> 赞同：4
> 
> 时间：2013-03-05T15:26:02.440
> 
> 标签：c#, php, apple-push-notifications

我有一个 PHP 脚本，它将向 iPhone 发送通知。（下）我的网站代码是用 C# 编写的。我想要做的是将信息从 C# 传递到 PHP 脚本。

PHP 脚本

```
<?php

// Put your device token here (without spaces):
$deviceToken = ''; //Get from C#

// Put your private key's passphrase here:
$passphrase = ''; //Get from C#

// Put your alert message here:
$message = 'New Message';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
                           'ssl://gateway.push.apple.com:2195', $err,
                           $errstr, 30, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
                     'alert' => $message,
                     'sound' => 'default'
                     );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp);

?> 
```

我想将 deviceToken 和密码传递给这个脚本。我将所有内容都放在同一台服务器上，并将它们放在服务器上的同一位置。

我想启动 PHP 脚本的 C# 代码在这里。这段代码基本上是获取我必须发送通知的所有设备令牌。在 foreach 循环内部是我需要调用 PHP 脚本的地方。

```
 private void SendAppleNotifications(List<NotificationInfo> AppleNotifications)
    {
        ApplePushNotification push = new ApplePushNotification(false, AppleCertificate, ApplePassword);

        List<NotificationPayload> notificationList = new List<NotificationPayload>();

        List<string> returnStrings = new List<string>();

        foreach (NotificationInfo ni in AppleNotifications)
        {                      
        }

        returnStrings = push.SendToApple(notificationList);
    } 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:42:11.597

在您的 PHP 脚本中使用 $_POST 获取 deviceToken 和密码

```
<?php

// Put your device token here (without spaces):
$deviceToken = $_POST['deviceToken'];
// Put your private key's passphrase here:
$passphrase = $_POST['passphrase'];

?> 
```

将数据发布到您的 PHP 站点的 C# 方法

```
public string SendPost(string url, string postData)
{
    string webpageContent = string.Empty;

    try
    {
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.ContentLength = byteArray.Length;

        using (Stream webpageStream = webRequest.GetRequestStream())
        {
            webpageStream.Write(byteArray, 0, byteArray.Length);
        }

        using (HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse())
        {
            using (StreamReader reader = new StreamReader(webResponse.GetResponseStream()))
            {
                webpageContent = reader.ReadToEnd();
            }
        }
    }
    catch (Exception ex)
    {
        //throw or return an appropriate response/exception
    }

    return webpageContent;
} 
```

最后调用这个方法

```
String deviceToken = HttpUtility.UrlEncode("YourDeviceToken");
String passphrase = HttpUtility.UrlEncode("YourPassphrase");

SendPost("http://yourphpsite.com/xxx.php", String.Format("deviceToken={0}&passphrase={1}", deviceToken, passphrase)); 
```

# html - 使用 Perl 识别 HTML 文件中添加或删除的文本

> ID：15227607
> 
> 赞同：0
> 
> 时间：2013-03-05T15:26:15.180
> 
> 标签：html, perl, diff

我的问题归结为，我有同一个 HTML 页面的多个版本，我想知道这个页面是否使用 Perl 进行了更改。这些文件包含 html/javascript 和书面英语。当用户决定他们想要跟踪哪些页面的更改时，这些更改将在 Web 界面中显示给用户。包含网站的服务器上的 Perl 脚本会随着时间的推移下载这些页面并检查它们是否存在差异。

到目前为止，我可以确定页面*是否*已更改，但不能确定添加或删除的内容。这是通过将文件格式化为仅在它们自己的行上的单词并逐行比较来完成的。我知道更改很可能会被写入，即添加或删除了一个新句子。我希望能够查明这种变化。

我今天花了一段时间尝试使用 Text::ParagraphDiff 但无济于事。我最终得到一个长文件，它多次重复这两个内容但没有突出显示的更改。

所以我想我会问是否有人知道最佳实践或首选方法。我害怕我将不得不开发一些冗长的算法来跟踪文件何时更改以及它们何时再次匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:38:09.320

我认为您的最佳做法是将这些文件存储在源代码控制系统中，例如 git 或 svn。这样，您就有了可用的文件的版本副本，可用于区分（只需对其进行外壳处理），并恢复可能已丢失/覆盖的任何内容。任何类型的差异都需要您拥有原始文件。为了确定我的生产系统上的文件是否已更改，我使用文件日期/时间戳（mtime 和 ctime 两者）和文件校验和的输出（md5sum -b [file]）的组合来获取这些值并保存在档案数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:39:30.070

在 CPAN检查[untemplate实用程序。](https://metacpan.org/module/untemplate)[它通过XPath](https://en.wikipedia.org/wiki/Xpath)比较两个（或更多）结构化 HTML 文件，假设它们是使用相同的模板生成的。这是一个典型会话的屏幕截图：

![取消模板](../Images/6656ab0a94382153d4b060781fe5ca62.png)

# php - 如何隐藏状态栏中的链接

> ID：15227611
> 
> 赞同：-2
> 
> 时间：2013-03-05T15:26:19.330
> 
> 标签：php, html

我无法理解如何在状态栏中隐藏访客链接，我的 php 代码如下：

```
//file column
    echo '<td width="75%" class="default_td" align="left" valign="top"><a class="default_a" href="', $this_file;
    $npart = $dir . $value;
    if (preg_match('/\|$/', $value)) //it is a link, not an actual file
    {
        $value = substr($value, 0, -1);
        $npart = substr($npart, 0, -1);
        $display = get_stored_info($value, $dir.$links_file);
        if ($display == '')
        {
            $display = $value;
        }
        echo 'dir=', translate_uri($subdir), '&amp;link=',
            translate_uri($value), '" title="Click here to Download ', $filename, '">',
            icon(ext($display)), htmlentities($display), '</a>';
    } 
```

我找到了一种方法，该方法可以正常工作。但是我如何应用我上面的 php 代码或它是如何工作的方法？下面的方法：

```
<a style="cursor: pointer"  onclick="javascript: window.location = 'http://www.mydomain.com/';">Go To SO</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T18:07:07.487

使用此代码：

```
<a href="http://pustakakoran.com" onMouseOver="window.status='Go to MyWebsite'; return true;" onMouseOut="window.status='';" >PustakaKoran</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:07:19.770

只需在 PHP 中回显字符串，但记得转义引号吗？

```
<?php
    echo '<a style="cursor: pointer"  onclick="javascript: window.location = \'http://www.mydomain.com/\';">Go To SO</a>';
    // Remember to escape 's as they're also used to create the string       ^^                        ^^
?> 
```

**还;** 请不要将您的问题的链接发布为对其他问题的评论。相反，请尝试使用有效标签标记您的帖子，以便人们会在他们的首页上看到您的问题。对于您的帖子，我建议您使用[php](/questions/tagged/php "显示标记为“php”的问题") [html](/questions/tagged/html "显示标记为“html”的问题")甚至[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")。

为什么要以任何方式隐藏链接？如果您有隐藏数据，请考虑隐藏字段、`$_SESSION`变量、`$_POST`变量、cookie 等。

# c++ - opencv::Mat 来自向量的向量

> ID：15227614
> 
> 赞同：0
> 
> 时间：2013-03-05T15:26:32.147
> 
> 标签：c++, opencv, vector, svm

我需要一些关于基于 svm 的分类器的帮助。我正在尝试从图像中计算 HOG 特征并使用它们来训练 svm。现在我有一个向量<向量>，其中的列包含每个图像的特征和行。为了训练 CvSVM，我需要一个具有特征的 Mat 矩阵。如何将向量的向量转换为具有相同形状的 Mat？

```
vector<vector<float>> totFeaturesVector;
for all images:
    vector<float> featuresVector;
    //populate featuresVector with 3780 floats...
    totFeaturesVector.push_back(featuresVector);
end for.
//numCols = 3780 numRows = 6\.   6 images with 3780 features each. 

//Need to convert totFeaturesVector to 
//Mat training_mat(overallSamples,numCols,CV_32FC1); Something like this. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:01:19.170

假设 `final_output`是 6x3780`Mat`

```
for(int i = 0; i < height; i++)
{
    for(int j = 0; j < width; j++)
    {
        final_output.at<float>(i,j) = vector[i][j];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T17:39:00.977

```
vector<vector<float>> totFeaturesVector;
Mat_<float> M;
for (const auto & v: totFeaturesVector)
{
    Mat_<float> r(v), t=r.t(); // you need to do this
    M.push_back(t); // because push_back(Mat_<float>(v).t()) does not work
} 
```

# php - PHP检查.sql转储文件中是否存在行

> ID：15227617
> 
> 赞同：1
> 
> 时间：2013-03-05T15:26:36.167
> 
> 标签：php, mysql, mysqldump

我想知道如何检查 MYSQL .sql 转储文件中是否存在一行而不将其加载到数据库中。我还想检查 3 个字段。FieldA、FieldB、FieldC 和 userinfo1、userinfo2、userinfo3，所有这些都是字符串。文件名为 database1.sql，存储在 FTP 服务器上。有没有办法将文件留在另一台服务器上而不将其导入另一个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:23:27.533

好的，首先，如果没有运行 PHP 的服务器上的文件，就无法对文件进行任何处理。但是，您可以使用 PHP 脚本登录 FTP 并自动下载和处理文件。

对于 SQL 处理，最简单的方法是逐行读取文件，首先使用 strpos("INSERT INTO .....) 来检查正确查询类型的开头（插入，更新......无论它可能是然后使用类似的东西：

[https://code.google.com/p/php-sql-parser/wiki/ParserManual](https://code.google.com/p/php-sql-parser/wiki/ParserManual) 并检查生成的数组并比较值。这是相当简单和容易做到的。然而这个库有一些开销，所以如果速度是一个问题或文件非常大，你将需要一些复杂的 preg_match 正则表达式来获取必要的值并对它们进行校验和。之后，您可以将它们存储在一个临时数组中，并每次检查此校验和数组以匹配您是否已经拥有这些值......

# asp-classic - 使用 ASP 连接 MySQL

> ID：15227619
> 
> 赞同：0
> 
> 时间：2013-03-05T15:26:46.117
> 
> 标签：asp-classic

我有一个 ASP 网站，我的问题是如何使用 asp 连接数据库。

我在bravehost/bravenet 有一个付费主机，可以通过phpWebAdmin 访问。当我在 vs 中使用 mysql.connection 进行连接时，出现异常“无法连接到任何指定的 MySQL 主机”。我输入了正确的数据库名称、服务器、用户名等。

在搜索网络时，我读到一些主机禁用了“远程访问”（我忘记了这个词）。

你能建议将我的 asp 连接到 mysql 的可能步骤吗？是否可以将 asp 连接到 php，以便 php 脚本将成为检索、保存、更新数据库的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:35:45.187

是的，您可以在 PHP 页面上发布您的数据，并且 php 页面可以完成其余操作。

就像您在 ASP 页面上发布数据一样。

您只需要更改标签中的 action="xxx.php" 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:54:23.690

您的网站和数据库是否在同一个网络服务器上？如果是，那么远程连接应该不是问题，只需在连接字符串中使用“localhost”

如果您可以使用 php 脚本进行连接，那么您应该可以通过同一服务器上的 asp 脚本进行连接。通过经典 ASP 连接到 MySQL 的标准方法是使用 MyODBC 驱动程序。该驱动程序是否安装在您的服务器上，默认情况下未安装在 IIS 上？

# delphi - 重新排列 TObjectList 时，为什么会出现“无效的指针操作”？

> ID：15227621
> 
> 赞同：4
> 
> 时间：2013-03-05T15:26:52.473
> 
> 标签：delphi, list

假设我有以下带有以下声明的自定义列表：

```
type 
  TCustomList = class(TObjectList)
  private
    function GetItem(AIndex: Integer): TMyObject; // virtual;
    procedure SetItem(Index: Integer; AObject: TMyObject);
...
  public
    property Items[Index: Integer]: TMyObject read GetItem write SetItem;
    procedure InsertSort();
  end; 
```

通过以下实现：

```
implementation

function TCustomList.GetItem(AIndex: Integer): TMyObject;
begin
  Result := TMyObject(inherited Items[AIndex]);
end;

procedure TCustomList.SetItem(Index: Integer; AObject: TMyObject);
begin
    inherited Items[Index]:= AObject;
end;

procedure TCustomList.InsertSort;
var
  i, j: integer;
  key: TMyObject;
begin
  for j := 1 to self.Count - 1 do
  begin
    key:= self.Items[j];
    i := j - 1;
    while ((i >= 0) AND (self.Items[i].Compare(key)>0)) do
    begin
        self.Items[i+1]:= self.Items[i]; // does not WORK!!! properly.. System.Contnrs problem ?? 
        i := i-1;
    end; // while
    self.Items[i+1]:= key;
  end; // for
end; // procedure InsertSort 
```

当我在 的实例集合上运行代码时`TMyObject`，我得到一个无效指针操作异常。我认为，这是由于`TCustomList`via`Items`属性的元素的读取和写入不佳造成的。

为什么会出现这个无效指针操作异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:32:43.607

这里发生的事情是对象列表的所有权正在阻碍。因为您正在使用`TObjectList`，所以无论何时要求列表忘记某个成员，它都会将其销毁。当您编写代码时，这会发生在您的代码中：

```
self.Items[i+1] := ... 
```

在销毁分配之前存储在索引中的成员，`i+1`以便为新项目腾出空间。最终，您将最终销毁一个已经被销毁的对象，这就是您的无效指针异常发生的时候。

要解决此问题，可以使用`Extract`允许您删除项目而不破坏它的方法。或者正如@Arioch 在评论中巧妙地指出的那样，该`Exchange`方法非常适合比较排序。

更容易的是在排序期间临时切换`OwnsObjects`到`False`，不要忘记在完成后恢复它。或者，也许您甚至不想使用`OwnsObjects=True`. 在那种情况下，你想要`TList`。

Frankly though you'd be far better off using the in-built `Sort` method that is originally exposed by `TList`. There's simply no need for you to implement a sort method on a class that already comes with a perfectly decent one.

# hibernate - Grails Criteria HQL 多对多与 group by

> ID：15227632
> 
> 赞同：0
> 
> 时间：2013-03-05T15:27:29.780
> 
> 标签：hibernate, grails, hql, criteria

我有两个通过多对多关系关联的域，**Project**和**ProjectCategory**，其中项目可以有许多类别，一个类别可能分配给多个项目。所以：

```
class ProjectCategory {
   String name
   ...
}

class Project {
   static hasMany = [categories : ProjectCategory]
   ...
} 
```

我想计算每个类别存在多少项目。实现这一点的**SQL非常简单：**

```
select cat.name category, count(pcat.project_categories_id ) projCount
  from project_project_category pcat, 
       project_category cat
 where pcat.project_category_id = cat.id
 group by project_category_id 
```

它返回如下内容：

```
category    |  projCount
'cat_1'     |  3
'cat_2'     |  4
'cat_3'     |  1
... 
```

现在，问题是，如何使用 Criteria 或 HQL 来做到这一点，看起来更像“Grails/Groovy 风格”？

提前致谢。

**编辑**

*我已经设法在**HQL**中解决：*

```
def result  = ProjectCategory.executeQuery(
    ''' select c.name, count(p.id)
          from Project p join p.categories c
         group by c ''' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:05:09.130

使用标准 API 和预测可以得到这样的结果：

```
def results = Project.createCriteria().list() {
    createAlias('categories', 'catalias')
    projections {
        groupProperty('catalias.name')
        count('id')
    }
} 
```

# .net - 使用 NSIS 检查 .NET4.5+

> ID：15227634
> 
> 赞同：13
> 
> 时间：2013-03-05T15:27:31.283
> 
> 标签：.net, installation, nsis, .net-4.5

总而言之，我知道以下方法可以检查 NSIS 中的框架版本。对于.NET4.0+，我目前使用

```
Function IsDotNetInstalled

    StrCpy $0 "0"
    StrCpy $1 "SOFTWARE\Microsoft\.NETFramework" ; Registry entry to look in.
    StrCpy $2 0

    StartEnum:
    ; Enumerate the versions installed.
    EnumRegKey $3 HKLM "$1\policy" $2

    ; If we don't find any versions installed, it's not here.
    StrCmp $3 "" noDotNet notEmpty

    ; We found something.
    notEmpty:
        ; Find out if the RegKey starts with 'v'.  
        ; If it doesn't, goto the next key.
        StrCpy $4 $3 1 0
        StrCmp $4 "v" +1 goNext
        StrCpy $4 $3 1 1

        ; It starts with 'v'.  Now check to see how the installed major version
        ; relates to our required major version.
        ; If it's equal check the minor version, if it's greater, 
        ; we found a good RegKey.
        IntCmp $4 ${DOT_MAJOR} +1 goNext yesDotNetReg
        ; Check the minor version.  If it's equal or greater to our requested 
        ; version then we're good.
        StrCpy $4 $3 1 3
        IntCmp $4 ${DOT_MINOR} yesDotNetReg goNext yesDotNetReg

    goNext:
        ; Go to the next RegKey.
        IntOp $2 $2 + 1
        goto StartEnum

    yesDotNetReg:
        ; Now that we've found a good RegKey, let's make sure it's actually
        ; installed by getting the install path and checking to see if the 
        ; mscorlib.dll exists.
        EnumRegValue $2 HKLM "$1\policy\$3" 0
        ; $2 should equal whatever comes after the major and minor versions 
        ; (ie, v1.1.4322)
        StrCmp $2 "" noDotNet
        ReadRegStr $4 HKLM $1 "InstallRoot"
        ; Hopefully the install root isn't empty.
        StrCmp $4 "" noDotNet
        ; Build the actuall directory path to mscorlib.dll.
        StrCpy $4 "$4$3.$2\mscorlib.dll"
        IfFileExists $4 yesDotNet noDotNet

    noDotNet:
        ; No, something went wrong along the way.  Looks like the 
        ; proper .NET Framework isn't installed.  
        MessageBox MB_ICONEXCLAMATION "To install UserCost, Microsoft's .NET Framework v${DOT_MAJOR}.${DOT_MINOR} \
        (or higher) must be installed. Cannot proceed with the installation!"
        ${OpenURL} "${WWW_MS_DOTNET4}"
        Abort

    yesDotNet:
        ; Everything checks out. Proceed with the rest of the installation.

FunctionEnd 
```

这对 .NET4.0 非常有效，但我现在扩展了我的应用程序以利用`async`/`await`功能，随后需要用户安装 .NET4.5+。上述方法不适合，因为.NET4.5 的安装现在不使用记录路径“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\Policy”来存储任何新信息，即该路径似乎不包含一个值.NET4.0 和 4.5 之间的变化。现在我看到了以下帖子：

[带有 .NET 4.5 的 NSIS 安装程序](https://stackoverflow.com/questions/12849352/nsis-installer-with-net-4-5)

它使用注册表路径/条目 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP' 进行检查。现在这也可以 bot 工作，因为条目不会从 .NET4.0 更改为 4.5。我注意到有一个名为 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\v4.0.30319\SKUs.NETFramework,Version=v4.5' 的条目我可以使用它来检查框架版本吗？

是否有使用 NSIS 检查 .NET4.5 的官方线路？

谢谢你的时间。

* * *

*注意：随后我的用户执行的一些 .NET4.5 安装具有以下注册表值*

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full 
```

*一个名为`Release`was not `378389`but的 DWORD 值`378181`。进行此更改似乎可以解决问题，`Release`因为 .NET4.5 及更低版本的注册表中没有条目。*

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T15:35:09.017

是的，有一种*官方*方法可以检查是否安装了 .NET Framework 4.5，即使它不是很*友好*。来自[MSDN](http://msdn.microsoft.com/en-us/library/hh925568.aspx)：

> 您可以通过检查`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full`注册表中的子项是否有一个`DWORD`名为`Release`. 它的存在`DWORD`表明 .NET Framework 4.5 已安装在该计算机上。Release 的值是一个版本号。要确定是否安装了 .NET Framework 4.5 的最终发行版，请检查是否有等于或大于 378389 的值。
> 
> [http://msdn.microsoft.com/en-us/library/hh925568.aspx](http://msdn.microsoft.com/en-us/library/hh925568.aspx)

这意味着您首先必须检查是否安装了 4.0，然后检查是否有一个名为`Release`in的值`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full`，如果是，则 4.5 已经安装（我认为您可以跳过对预发布版本的检查）。

**编辑：**在 SO 上查看[这篇文章](https://stackoverflow.com/questions/199080/how-to-detect-what-net-framework-versions-and-service-packs-are-installed)以获取有关检测较早安装的 .NET 版本的详细信息，以及这篇[MSDN 文章](https://msdn.microsoft.com/en-us/library/hh925568.aspx)以区分 4.5.x 版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T02:15:59.170

这是我编写的一个函数，用于检查并在需要时下载 .NET 4.5。此外，该代码还会查找 .NET 安装程序的本地副本——以防您将安装程序放在 CD 或 USB 驱动器或其他东西上。支持静默和非静默安装，以及设置重启标志。该函数是独立的，但希望您包含 LogicLib（包含在基本 NSIS 安装中）。

这是我为我的 Rachel's Story 书籍的安装程序编写的代码。

```
Function CheckAndDownloadDotNet45
# Let's see if the user has the .NET Framework 4.5 installed on their system or not
# Remember: you need Vista SP2 or 7 SP1\.  It is built in to Windows 8, and not needed
# In case you're wondering, running this code on Windows 8 will correctly return is_equal
# or is_greater (maybe Microsoft releases .NET 4.5 SP1 for example)

# Set up our Variables
Var /GLOBAL dotNET45IsThere
Var /GLOBAL dotNET_CMD_LINE
Var /GLOBAL EXIT_CODE

ReadRegDWORD $dotNET45IsThere HKLM "SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" "Release"
IntCmp $dotNET45IsThere 378389 is_equal is_less is_greater

is_equal:
    Goto done_compare_not_needed
is_greater:
    # Useful if, for example, Microsoft releases .NET 4.5 SP1
    # We want to be able to simply skip install since it's not
    # needed on this system
    Goto done_compare_not_needed
is_less:
    Goto done_compare_needed

done_compare_needed:
    #.NET Framework 4.5 install is *NEEDED*

    # Microsoft Download Center EXE:
    # Web Bootstrapper: http://go.microsoft.com/fwlink/?LinkId=225704
    # Full Download: http://go.microsoft.com/fwlink/?LinkId=225702

    # Setup looks for components\dotNET45Full.exe relative to the install EXE location
    # This allows the installer to be placed on a USB stick (for computers without internet connections)
    # If the .NET Framework 4.5 installer is *NOT* found, Setup will connect to Microsoft's website
    # and download it for you

    # Reboot Required with these Exit Codes:
    # 1641 or 3010

    # Command Line Switches:
    # /showrmui /passive /norestart

    # Silent Command Line Switches:
    # /q /norestart

    # Let's see if the user is doing a Silent install or not
    IfSilent is_quiet is_not_quiet

    is_quiet:
        StrCpy $dotNET_CMD_LINE "/q /norestart"
        Goto LookForLocalFile
    is_not_quiet:
        StrCpy $dotNET_CMD_LINE "/showrmui /passive /norestart"
        Goto LookForLocalFile

    LookForLocalFile:
        # Let's see if the user stored the Full Installer
        IfFileExists "$EXEPATH\components\dotNET45Full.exe" do_local_install do_network_install

        do_local_install:
            # .NET Framework found on the local disk.  Use this copy

            ExecWait '"$EXEPATH\components\dotNET45Full.exe" $dotNET_CMD_LINE' $EXIT_CODE
            Goto is_reboot_requested

        # Now, let's Download the .NET
        do_network_install:

            Var /GLOBAL dotNetDidDownload
            NSISdl::download "http://go.microsoft.com/fwlink/?LinkId=225704" "$TEMP\dotNET45Web.exe" $dotNetDidDownload

            StrCmp $dotNetDidDownload success fail
            success:
                ExecWait '"$TEMP\dotNET45Web.exe" $dotNET_CMD_LINE' $EXIT_CODE
                Goto is_reboot_requested

            fail:
                MessageBox MB_OK|MB_ICONEXCLAMATION "Unable to download .NET Framework.  ${PRODUCT_NAME} will be installed, but will not function without the Framework!"
                Goto done_dotNET_function

            # $EXIT_CODE contains the return codes.  1641 and 3010 means a Reboot has been requested
            is_reboot_requested:
                ${If} $EXIT_CODE = 1641
                ${OrIf} $EXIT_CODE = 3010
                    SetRebootFlag true
                ${EndIf}

done_compare_not_needed:
    # Done dotNET Install
    Goto done_dotNET_function

#exit the function
done_dotNET_function:

FunctionEnd 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T09:07:26.707

最后，我使用了以下函数，它利用了上面的答案。此方法首先创建一个`"$INSTDIR\dotNETFramework"`包含 .NET Web 安装程序的目录：

```
Function CheckAndInstallDotNet
    ; Installer dotNetFx45_Full_setup.exe avalible from http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx
    ; Magic numbers from http://msdn.microsoft.com/en-us/library/ee942965.aspx
    ClearErrors
    ReadRegDWORD $0 HKLM "SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" "Release"
    IfErrors NotDetected
    ${If} $0 >= 378389
        DetailPrint "Microsoft .NET Framework 4.5 is installed ($0)"
    ${Else}
    NotDetected:
        MessageBox MB_YESNO|MB_ICONQUESTION ".NET Framework 4.5+ is required for ProgramX2013, \
            do you want to launch the web installer? This requires a valid internet connection." IDYES InstallDotNet IDNO Cancel 
        Cancel:
            MessageBox MB_ICONEXCLAMATION "To install ProgramX, Microsoft's .NET Framework v${DOT_MAJOR}.${DOT_MINOR} \
                (or higher) must be installed. Cannot proceed with the installation!"
            ${OpenURL} "${WWW_MS_DOTNET4_5}"
            RMDir /r "$INSTDIR" 
            SetOutPath "$PROGRAMFILES"
            RMDir "$INSTDIR" 
            Abort

        ; Install .NET4.5.
        InstallDotNet:
            DetailPrint "Installing Microsoft .NET Framework 4.5"
            SetDetailsPrint listonly
            ExecWait '"$INSTDIR\dotNETFramework\dotNetFx45_Full_setup.exe" /passive /norestart' $0
            ${If} $0 == 3010 
            ${OrIf} $0 == 1641
                DetailPrint "Microsoft .NET Framework 4.5 installer requested reboot."
                SetRebootFlag true 
            ${EndIf}
            SetDetailsPrint lastused
            DetailPrint "Microsoft .NET Framework 4.5 installer returned $0"
    ${EndIf}

    ; Now remove the dotNETFramework directory and contents.
    RMDir /r "$INSTDIR\dotNETFramework" 
FunctionEnd 
```

如果有 Internet 连接，则此方法 seelessley 启动 .NET4.5 安装程序，并在安装完成后返回。

我希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-27T11:21:46.030

这是一个简单的 NSIS 函数，用于检查 .NET 版本（适用于 4.5、4.5.1、4.5.2 和 4.6）。数值比较基于[MSDN](https://msdn.microsoft.com/en-us/library/hh925568%28v=vs.110%29.aspx)。

将函数放在您的 NSIS 文件中并像这样调用它

```
Call CheckForDotVersion45Up
Pop $0
DetailPrint $0 
```

这是功能。

```
; returns a numeric value on the stack, ranging from 0 to 450, 451, 452 or 460\. 0 means nothing found, the other values mean at least that version
Function CheckForDotVersion45Up

  ReadRegDWORD $0 HKLM "SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" Release

  IntCmp $0 393295 is46 isbelow46 is46

  isbelow46:
  IntCmp $0 379893 is452 isbelow452 is452

  isbelow452:
  IntCmp $0 378675 is451 isbelow451 is451

  isbelow451:
  IntCmp $0 378389 is45 isbelow45 is45

  isbelow45:
  Push 0
  Return

  is46:
  Push 460
  Return

  is452:
  Push 452
  Return

  is451:
  Push 451
  Return

  is45:
  Push 45
  Return

FunctionEnd 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-12T09:29:37.767

现在 .NET Framework 4.5.1 可用，需要检查注册表中名为 Release 的 DWORD 的实际值，而不仅仅是它的存在。

值 378758 表示已安装 .NET Framework 4.5.1，但是，如此处所述[，此](http://blogs.msdn.com/b/astebner/archive/2013/11/11/10466402.aspx)值在 Windows 8.1 上为 378675。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-07T01:49:39.953

如果您正在寻找 .net framework 4.0+（及更高版本）的选项，包括

*   .net 4.5
*   .net 4.5.1

您还可以检查此插件是否适用于 NSIS：[DotNetChecker](https://github.com/ProjectHuman/NsisDotNetChecker)

# c# - WinRT 商店应用程序 30% 到 100% 视图

> ID：15227636
> 
> 赞同：0
> 
> 时间：2013-03-05T15:27:38.477
> 
> 标签：c#, microsoft-metro, winrt-xaml

所以现在我有一个应用程序，它在 30% 模式下显示一个菜单，当你点击菜单上的一个按钮时，一个弹出窗口会通知你它需要切换到完整视图才能显示用户选择的页面，为此，它提供了一个全屏按钮和一个取消按钮。如果用户单击全屏按钮，则应将应用程序从 30% 模式切换到全屏。为此，我使用 windows.UI.ViewManagement.ApplicationView.TryUnsnap(); API 调用。但是，当我进行此调用时，它只会将应用程序更改为 70% 模式。我在任何地方都找不到任何文档说应用程序无法达到 100%，但同时唯一提到的 API 是 TryUnsnap(); 它的文档对它可以去的 %screen 只字未提。

有人可以告诉我是否有办法在 WinRT 商店应用程序中从 30% 到 100%，或者说 70% 是限制的 MS 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:35:47.883

不，目前不可能。这完全取决于用户 - 因为他们处于快照模式，Windows 希望他们保持快照模式。

# ios - 在 UIScrollView 中使用 ViewController

> ID：15227640
> 
> 赞同：1
> 
> 时间：2013-03-05T15:27:53.297
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我想使用 UIScrollView 和 UIPageController 来显示我的视图控制器，而不是使用导航控制器。我该怎么办？是否可以在 UIScrollView 内加载视图控制器，还是有不同的方式？我不需要 UISCrollView 我只想能够在我的视图控制器之间滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:33:51.613

如果您使用故事板和 ios6+，您可以在滚动视图中放置多个“容器视图”。然后将您的个人视图控制器嵌入到它们中。干净，布局不需要代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:32:11.333

UIViewController 不是 UIView 的后代。您可以将 viewControllers 的视图添加到 UIScrollView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:32:13.033

不，滚动视图无法处理 UIViewcontroller。只需从您的 VC 获取视图并在滚动视图中添加为子视图

# linq - LINQ 选择 FirstName.length < 6 的潜在客户

> ID：15227642
> 
> 赞同：2
> 
> 时间：2013-03-05T15:27:57.040
> 
> 标签：linq, dynamics-crm-2011

哪个 LINQ 将选择 FirstName.length < 6 的潜在客户？

此查询抛出“无效的 'where' 条件。实体成员正在调用无效的属性或方法”

```
var q = from a in serviceC.LeadSet where a.FirstName.Length < 6 select a; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T16:18:29.700

这不起作用的原因是所有 Linq to CRM 语句都转换为查询表达式，并且查询表达式不支持长度运算符。这为您提供了几个选择。

1.  使用直接 SQL 查询来获取您需要的数据。这在大多数情况下都不太理想，因为您在 SDK 之外进行操作，并且如果您使用 CRM Online 则不可能

2.  使用格兰特的答案来实际查看长度，不幸的是，它确实拉出了所有记录......

3.  试试我刚刚提出的这个完全未经测试的想法：查询表达式确实有一个 GreaterEqual 条件，所以你应该能够将它与 6 个单引号的字符串进行比较（因为单引号是默认排序时的第一个字符。所以理论上，这个应该管用：

```
var q = from a in serviceC.LeadSet where a.FirstName <= "''''''" select a; 
```

## 编辑

执行测试后，我意识到 Linq 不会接受该表达式，即使 SQL 会。所以答案是创建实际的查询表达式：

```
QueryExpression qe = new QueryExpression("lead");
qe.Criteria.AddCondition("firstname", ConditionOperator.LessEqual, "''''''");

var entities = service.RetrieveMultiple(qe); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:34:26.067

您可以使用`ToList`将集合投影到对象，应该这样做。

# java - 仅 RGB 的 JColorChooser (Java 7)

> ID：15227644
> 
> 赞同：3
> 
> 时间：2013-03-05T15:28:04.467
> 
> 标签：java, swing, jpanel, color-picker

我正在尝试创建一个包含[JPanel的](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPanel.html)[JFrame](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html) ，其中仅包含选择 RGB 颜色所需的内容。我一直在搞乱[JColorChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JColorChooser.html)、[AbstractColorChooserPanel](http://docs.oracle.com/javase/7/docs/api/javax/swing/colorchooser/AbstractColorChooserPanel.html)和 ColorModel，阅读 Oracle 教程，但我不明白如何开发我想要的东西。我什至下载了 OpenJDK 源来获取这些类的源代码，但仍然没有。我想要得到的是：

![我想要的是](../Images/4b46a1773a311fe1bb99cfe51c222823.png)

Alpha 的东西应该消失，颜色代码字段应该设置为不可见但继续工作，这样我可以在单击“是”按钮时检索代码（我猜是在 actionPerformed 方法中）。重写paintComponent方法也是一个很好的补充。

提前致谢。

**编辑：**这就是我得到我目前拥有的东西的方式（上面的照片，没有“油漆”编辑）：

```
for (final AbstractColorChooserPanel accp : panels) {
  if (accp.getDisplayName().equals("RGB")) {
    JOptionPane.showOptionDialog(Main.frame, accp,
    "Color selection tool", JOptionPane.OK_OPTION,
    JOptionPane.QUESTION_MESSAGE, null, null, 0);
  }
} 
```

**EDIT2**：到目前为止，我现在已经能够删除 alpha 的东西，但我还不能“找到”显示颜色代码的标签和字段，所以它们继续显示，此外，因为我可以'无法访问该字段，我无法访问颜色代码：

![达到](../Images/f1bd025aaa55e8450fbc84a629921a75.png)

这是与此代码：

```
package edu.utils;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.Array;
import java.lang.reflect.Field;

import javax.swing.JColorChooser;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JSpinner;
import javax.swing.WindowConstants;
import javax.swing.colorchooser.AbstractColorChooserPanel;

import edu.io.local.Log;

public final class RGBColorChooserPanel extends JDialog implements ActionListener {

private final JColorChooser jCC;
private final JPanel        panel;
private String              colorCode;

public RGBColorChooserPanel(final String title) {
super(edu.Main.frame);
this.setTitle(title);
this.jCC = new JColorChooser();
this.modifyJColorChooser();
this.panel = new JPanel() {
    @Override
    protected void paintComponent(final Graphics g) {
    final Graphics2D g2d = (Graphics2D) g;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

    final GradientPaint gp = new GradientPaint(0, 0, Color.BLUE, 0, this.getHeight(),
            Color.BLACK);

    g2d.setPaint(gp);
    g2d.fillRect(0, 0, this.getWidth(), this.getHeight());

    super.paintComponent(g);
    }
};
this.panel.add(this.jCC);
this.panel.setOpaque(false);
this.jCC.setOpaque(false);
this.jCC.setPreviewPanel(new JPanel());
this.jCC.setColor(120, 20, 57);
this.add(this.panel, BorderLayout.CENTER);
this.setDefaultCloseOperation(WindowConstants.HIDE_ON_CLOSE);
this.pack();

final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
this.setLocation((screenSize.width - this.getWidth()) / 2,
        (screenSize.height - this.getHeight()) / 2);
this.setResizable(false);
this.setVisible(true);
}

@Override
public void actionPerformed(final ActionEvent e) {
// TODO Auto-generated method stub

}

private void modifyJColorChooser() {
final AbstractColorChooserPanel[] panels = this.jCC.getChooserPanels();
for (final AbstractColorChooserPanel accp : panels) {
    if (!accp.getDisplayName().equals("RGB")) {
    this.jCC.removeChooserPanel(accp);
    }
}

final AbstractColorChooserPanel[] colorPanels = this.jCC.getChooserPanels();
final AbstractColorChooserPanel cp = colorPanels[0];

Field f = null;
try {
    f = cp.getClass().getDeclaredField("panel");
} catch (NoSuchFieldException | SecurityException e) {
    Log.log(e);
}
f.setAccessible(true);

Object colorPanel = null;
try {
    colorPanel = f.get(cp);
} catch (IllegalArgumentException | IllegalAccessException e) {
    Log.log(e);
}

Field f2 = null;
try {
    f2 = colorPanel.getClass().getDeclaredField("spinners");
} catch (NoSuchFieldException | SecurityException e4) {
    Log.log(e4);
}
f2.setAccessible(true);
Object rows = null;
try {
    rows = f2.get(colorPanel);
} catch (IllegalArgumentException | IllegalAccessException e3) {
    Log.log(e3);
}

final Object transpSlispinner = Array.get(rows, 3);
Field f3 = null;
try {
    f3 = transpSlispinner.getClass().getDeclaredField("slider");
} catch (NoSuchFieldException | SecurityException e) {
    Log.log(e);
}
f3.setAccessible(true);
JSlider slider = null;
try {
    slider = (JSlider) f3.get(transpSlispinner);
} catch (IllegalArgumentException | IllegalAccessException e2) {
    Log.log(e2);
}
slider.setVisible(false);
Field f4 = null;
try {
    f4 = transpSlispinner.getClass().getDeclaredField("spinner");
} catch (NoSuchFieldException | SecurityException e1) {
    Log.log(e1);
}
f4.setAccessible(true);
JSpinner spinner = null;
try {
    spinner = (JSpinner) f4.get(transpSlispinner);
} catch (IllegalArgumentException | IllegalAccessException e) {
    Log.log(e);
}
spinner.setVisible(false);
Field f5 = null;
try {
    f5 = transpSlispinner.getClass().getDeclaredField("label");
} catch (NoSuchFieldException | SecurityException e1) {
    Log.log(e1);
}
f5.setAccessible(true);
JLabel label = null;
try {
    label = (JLabel) f5.get(transpSlispinner);
} catch (IllegalArgumentException | IllegalAccessException e) {
    Log.log(e);
}
label.setVisible(false);

Field f6 = null;
try {
    f6 = transpSlispinner.getClass().getDeclaredField("value");
} catch (NoSuchFieldException | SecurityException e1) {
    Log.log(e1);
}
f6.setAccessible(true);
float value = 0;
try {
    value = (float) f6.get(transpSlispinner);
} catch (IllegalArgumentException | IllegalAccessException e) {
    Log.log(e);
}
}
} 
```

PS：我知道异常处理的奇怪之处，但我需要管理每个语句的异常，所以请不要抱怨。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T22:18:14.057

您最好的选择是通过扩展[*创建自定义选择器面板*](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html#chooserpanel)`AbstractColorChooserPanel`。教程[示例](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html#eg)虽然很基础，但却是安装和使用的有用指南。您的草图的完整实现超出了 SO 的范围；但是在许多现存的[例子](http://www.google.com/#q=%22extends+AbstractColorChooserPanel%22)中，[这个](http://www.opensource.apple.com/source/gcc/gcc-5484/libjava/javax/swing/colorchooser/DefaultRGBChooserPanel.java)和[这个](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/colorchooser/DefaultRGBChooserPanel.java)似乎值得仔细研究。这个相关[的问答](https://stackoverflow.com/q/2159803/230513)也可能提供一些见解。

# sctp - 如何使用 SCTP？

> ID：15227647
> 
> 赞同：3
> 
> 时间：2013-03-05T15:28:06.647
> 
> 标签：sctp

对于我的论文，我正在研究并展示一种新的通信协议，我们的老师没有和我们谈过。这是SCTP。

现在我正在写我的论文，解释协议并强调 SCTP 和 TCP 之间的区别。无论如何，我也被要求在 Linux Ubuntu 环境中实现一个小的应用程序客户端 - 服务器。任何人都可以链接一些有关 SCTP 原语或客户端-服务器 SCTP 的简单示例的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:51:39.803

我强烈建议您购买Stevens、Fenner 和 Rudoff所著的*Unix Network Programming: The Sockets Networking API一书。*它有几章关于 SCTP 套接字以及如何使用它们。另外，请查看*SCTP：参考指南*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T11:04:44.973

最好的地方是[RFC 3286](http://www.ietf.org/rfc/rfc3286.txt)的介绍和[RFC 4960](https://www.rfc-editor.org/rfc/rfc4960)的详细信息。它将消除您对 SCTP 的所有疑虑。只是为了找到 SCTP 与 TCP，您只能通过 RFC 3286。它很小而且很中肯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T15:31:13.433

我可以给你一些问题作为指导。

1.  sctp 可以做什么，而 tcp 不能做什么？
2.  如果 sctp 和 tcp 都可以，为什么更喜欢 sctp 或 tcp？
3.  为什么sctp不流行？tcp流行？
4.  sctp 有更好的性能吗？

关于客户端/服务器示例，您可以在 X 先生推荐的书中找到。使用基准是有帮助的。

# java - 简单字符串池

> ID：15227652
> 
> 赞同：0
> 
> 时间：2013-03-05T15:28:11.327
> 
> 标签：java, string, pool

如果我在 Java 中有一个完全空的字符串池并执行以下操作，是否将字符串对象“Hello”添加到字符串池中。？

```
String myStr = new String('Hello'); 
```

我知道后续调用 new String('Hello'); 将创建一个新的字符串对象但不会将其添加到池中，但是如果“Hello”尚未在池中，那么第一次呢？

编辑：基本上，我需要知道为什么以下打印错误：

```
String myStr = new String("Hello");
print(myStr=="Hello"); 
```

如果，在第一次调用时， new String("Hello"); 将 Hello 添加到池中。然后在比较代码中，我们将池驻留对象“Hello”与文字“Hello”（== 右侧）进行比较。因此，== 的左侧不是指向与右侧相同的对象（在池中）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:32:59.657

请看下面的帖子。我想它会给你最好的答案

[Java中的字符串池是什么？](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:55:31.943

是和不是。如果你的类中有文字“Hello”，它会在你的类被加载时（在你的代码运行之前）被添加到字符串池中。

但随后您创建了一个`String`不在字符串池中的 的新实例。

所以`"Hello" != new String("Hello")`，但是`"Hello" == new String("Hello").intern()`

这意味着`new String("Hello")`永远不能将此新实例添加到字符串池中，因为那里已经有一个`"Hello"`。

并且 no`new String(String s)`不会将字符串添加到字符串池中；为什么将例如用户输入添加到字符串池会有用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:47:50.360

在 Java 中，'==' 运算符用于检查对象的引用，而不是检查对象本身的内容（如果不与原始数据类型一起使用）。因此，在您的情况下， myStr 和“Hello”是内存中的两个不同对象，这就是它返回 false 的原因。另一方面，如果要比较对象的内容，请使用 equals() 方法，即

打印（myStr.equals（“你好”））；此语句将返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:44:00.647

当类包含“Hello”时，将添加到字符串池中

```
String myStr = new String("Hello"); 
```

将被加载。new String() 将是堆上的一个对象，它的内部 char 数组将指向池中的 char 数组。不是 new String("Hello") 而是将“Hello”放入池中的类加载器

# java - 使用反射调用随机方法

> ID：15227656
> 
> 赞同：0
> 
> 时间：2013-03-05T15:28:18.897
> 
> 标签：java, reflection

我有不同类型的方法的java类。调用某些方法不需要参数。有些方法采用 1 个字符串参数，有些采用 1 个字符串、1 个 int 参数等。我的观点是，正如我在开始时所说的那样，有不同类型的方法。我在上面放了一个虚拟类，以使其更易于理解。

如果我有包/类/方法名称和带有反射的参数，是否可以调用随机方法？

```
 package dummyPackage;

    public class DummyClass 
    {
        public DummyClass() {
        super();
        // TODO Auto-generated constructor stub
        }

        public void foo() {
            System.out.println("foo called");
        }

        public void bar(int sth) {
            System.out.println(sth++);
        }

        public void doSth(int a,String b) {
            System.out.println(a + "|" + b);
        }
...
    } 
```

下面是我需要的。我对java很陌生，不知道如何解决这个问题。

```
Object noparams[] = {};

Object[] params1 = new Object[1];
params1[0] = 100;

Object[] params2 = new Object[2];
params2[0] = 200;
params2[1] = "Test";

//What I need
NeededClass.reflect("dummyPackage.dummyClass.foo",noparams);
NeededClass.reflect("dummyPackage.dummyClass.bar",params1);
NeededClass.reflect("dummyPackage.dummyClass.doSth",params2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:38:14.630

这应该工作

```
 Object[][] params = {{}, 
                        {1}, 
                        {1, "xxx"}};
    Method[] methods = {DummyClass.class.getMethod("foo"),
                        DummyClass.class.getMethod("bar", int.class),
                        DummyClass.class.getMethod("doSth", int.class, String.class)};
    for(int i = 0; i < 100; i++) {
        int m = new Random().nextInt(3);
        methods[m].invoke(new DummyClass(), params[m]);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:38:14.700

您可以使用以下方法获取类的方法列表：

```
Method[] methods = DummyClass.class.getDeclaredMethods(); 
```

然后只需使用 Random 类（随机）获取您要调用的方法的索引并从数组中获取

```
int i = Random.nextInt(methods.length);
Method method = methods[i]; 
```

然后获取方法的参数列表并使用它来调用它

```
Class<?>[] params = method.getParameterTypes(); 
```

# knockout.js - 如何使用 Knockout 从下拉列表中获取所选值

> ID：15227663
> 
> 赞同：1
> 
> 时间：2013-03-05T15:28:41.313
> 
> 标签：knockout.js

这是视图模型

```
 self.choiceSelect = ko.observable();
            self.selectedItems = ko.observableArray([]);
            self.selectedComponent = ko.observable();
            self.componentList = ko.observableArray();

 self.GetData = function () {

            $.ajax({
                url: self.url + "GetComponent",
                type: "GET",
                cache: false
            })
            .fail(function (qxhr, status, errorThrown) {

            })
            .done(function (data) {

                self.componentList(data);

            });

        }; 
```

这是代码：

```
<select id="report-Components" data-bind="value: selectedComponent, options: componentList, optionsText: 'componentName'"></select><br /><br />
<h4>Component Attributes</h4>
<!-- ko if: selectedComponent  -->
<!-- ko if: selectedComponent().componentField  -->
<div data-bind="foreach: selectedComponent().componentField">
    <div class="control-group">
        <div class="controls">
            <input type="checkbox" data-bind="checked: $parent.selectedItems, value: $data" />
        </div>
        <label class="control-label">
            <strong data-bind="text: fieldText"></strong>
        </label>
    </div>                                    
</div>
<!-- /ko -->                            
<!-- /ko -->
<!-- ko if: selectedItems  -->
<div data-bind="foreach: selectedItems">
    <!-- ko if: fieldChoice.length > 0  -->
    <label data-bind="text: fieldText"></label>
    <select data-bind="options: fieldChoice, optionsText: 'choiceName', value: $data.choiceSelect"></select>
    <!-- /ko -->
    <!-- ko if: fieldChoice.length == 0  -->
    <label data-bind="text: fieldText"></label>
    <input type="text" value=""/>
    <!-- /ko -->
</div>  
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:32:56.003

您需要将选择值绑定到可观察对象：

```
<select data-bind="options: fieldChoice, optionsText: 'choiceName', value: $data.nameOfObservable"> 
```

This should update nameOfObservable when the select is changed.

这个 observable 需要位于您正在查看的数组中的每个项目上。因此，无论您在 selectedItems 中存储什么对象，它们都需要具有同名的可观察属性。

为了使视图模型中的所有内容都可观察，我建议使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)：

```
self.componentList = ko.mapping.fromJS(data); 
```

并对视图模型上的其他属性执行相同操作。

# html - HTML、CSS 居中一个框

> ID：15227666
> 
> 赞同：0
> 
> 时间：2013-03-05T15:28:58.820
> 
> 标签：html, css

这是注册框：

[http://technicaldebt.co.uk/fyp/register.php](http://technicaldebt.co.uk/fyp/register.php)

我试图让框居中在网页的中间。CSS附在下面。任何帮助将不胜感激。

```
#fg_membersite fieldset {
left: 50%;
top: 50%;
width: 230px;
margin-top: -125px: /* height/2 */
margin-left: -115px; /* width/2 */
position: absolute;
}

#fg_membersite legend, #fg_membersite h2
{
font-family : Arial, sans-serif;
font-size: 1.3em;
font-weight:bold;
color:#333;
}

#fg_membersite label
{
font-family : Arial, sans-serif;
font-size:0.8em;
font-weight: bold;
}

#fg_membersite input[type="text"],#fg_membersite textarea,
#fg_membersite input[type="password"]
{
  font-family : Arial, Verdana, sans-serif;
  font-size: 0.8em;
line-height:140%;
color : #000; 
padding : 3px; 
border : 1px solid #999;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-khtml-border-radius: 5px;
border-radius: 5px;

}

#fg_membersite input[type="text"],
#fg_membersite input[type="password"]
{
height:18px;
width:220px;
}

#fg_membersite #scaptcha
{
width:60px;
height:18px;
}

#fg_membersite input[type="submit"]
{
width:100px;
height:30px;
padding-left:0px;
}

#fg_membersite textarea
{
height:120px;
width:310px;
}

#fg_membersite input[type="text"]:focus,
#fg_membersite textarea:focus
{
color : #009;
border : 1px solid #990000;
background-color : #ffff99;
font-weight:bold;
}

#fg_membersite .container
{
margin-top:8px;
margin-bottom: 10px;
}

#fg_membersite .error
{
 font-family: Verdana, Arial, sans-serif; 
 font-size: 0.7em;
 color: #900;
 background-color : #ffff00;
}

#fg_membersite #register_password_errorloc
{
  clear:both;
}

#fg_membersite  fieldset#antispam
{
 padding:2px;
 border-top:1px solid #EEE;
 border-left:0;
 border-right:0;
 border-bottom:0;
 width:350px;
}

#fg_membersite fieldset#antispam legend
{
    font-family : Arial, sans-serif;
   font-size: 0.8em;
   font-weight:bold;
 color:#333;    
}

#fg_membersite .short_explanation
{
   font-family : Arial, sans-serif;
   font-size: 0.6em;
 color:#333;   
}

/* spam_trap: This input is hidden. This is here to trick the spam bots*/
#fg_membersite .spmhidip
{
 display:none;
 width:10px;
 height:3px;
}
#fg_membersite #fg_crdiv
{
   font-family : Arial, sans-serif;
   font-size: 0.3em;
 opacity: .2;
 -moz-opacity: .2;
 filter: alpha(opacity=20);   
}
#fg_membersite  #fg_crdiv p
{
  display:none;
}

    #fg_membersite_content li
  {
   font-family : Arial, sans-serif;
  padding-top:10px;
  padding-bottom:10px;
}
    #fg_membersite_content 
{
         font-family : Arial, sans-serif;
         font-size: 0.9em;
  line-height: 150%
 }

#fg_membersite_content h2
  {
   font-family : Arial, sans-serif;
   font-size: 1.5em;
   font-weight:bold;
 color:#333;
} 
```

下面的 HTML：

```
<!-- Form Code Start -->
<div id='fg_membersite'>
<form id='register' action='/fyp/register.php' method='post' accept-charset='UTF-8'>
<fieldset >
<legend>Register</legend>

<input type='hidden' name='submitted' id='submitted' value='1'/>

<div class='short_explanation'>* required fields</div>

<input type='text'  class='spmhidip' name='spe8306af0d23b01a2bf7c1734aacf25fe' />

<div><span class='error'></span></div>
<div class='container'>
<label for='name' >Your Full Name*: </label><br/>
<input type='text' name='name' id='name' value='' maxlength="50" /><br/>
<span id='register_name_errorloc' class='error'></span>
</div>

<div class='container'>
<label for='email' >Email Address*:</label><br/>
<input type='text' name='email' id='email' value='' maxlength="50" /><br/>
<span id='register_email_errorloc' class='error'></span>
</div>

<div class='container'>
<label for='username' >UserName*:</label><br/>
<input type='text' name='username' id='username' value='' maxlength="50" /><br/>
<span id='register_username_errorloc' class='error'></span>
</div>

<div class='container' style='height:80px;'>
<label for='password' >Password*:</label><br/>
<div class='pwdwidgetdiv' id='thepwddiv' ></div>
<noscript>
<input type='password' name='password' id='password' maxlength="50" />
</noscript>    
<div id='register_password_errorloc' class='error' style='clear:both'></div>
</div>

<div class='container'>
<input type='submit' name='Submit' value='Submit' />
</div>

</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:35:34.450

如果不使用某种`display: table`设置，如果没有 JavaScript 或不知道元素本身的高度，就无法垂直居中：

```
#fg_membersite fieldset {
    display: inline-block;
    margin: 0 auto;
    left: 50%;
    top: 50%;
    width: 230px;
    margin-top: -181px;
    margin-left: -115px;
    position: absolute;
} 
```

“181px”源自字段集解析到的 362px 高度。如果高度发生变化，您将不得不更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:35:31.433

您的边距定义被忽略。您的 CSS 定义中有一个冒号`:`而不是分号 ( )：`;`

```
#fg_membersite fieldset {
    left: 50%;
    top: 50%;
    width: 230px;
    margin-top: -125px; /* height/2 */
    margin-left: -115px; /* width/2 */
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:37:32.483

删除定位`#fg_membersite fieldset`，使您的框水平居中对齐，然后使用javascript垂直对齐。像这样的东西：

使用javascript：（在*标签**末尾加载`body`*）

```
<script>
  var body = document.body;
  var bodyHeight = body.offsetHeight;
  var box = document.getElementById('main'); //replace 'main' with Id of the fieldset  
  var height = box.offsetHeight;
  box.style.marginTop = ((bodyHeight/2) - (height/2));
</script> 
```

[**使用简单的javascript工作小提琴**](http://jsbin.com/ewizad/3/edit)

**[使用 jQuery 工作小提琴](http://jsbin.com/ewizad/1/edit)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T15:33:37.570

去除

> “左：50%”

和

> 对：50%

的CSS：

# fg_membersite 字段集

并使用

> 位置：相对；左边距：自动；边距右：自动

# unicode - UTF-8 是编码还是字符集？

> ID：15227667
> 
> 赞同：14
> 
> 时间：2013-03-05T15:29:02.353
> 
> 标签：unicode, encoding, utf-8, character

我认为字符集的名称是“Unicode”，而“UTF-8”是 Unicode 字符集的特定编码的名称，但我经常看到术语“编码”和“字符集”在引用时可以互换使用转为 UTF-8。

例如，

```
<meta charset="UTF-8"> 
```

对比

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T15:37:06.857

> UTF-8 是编码还是字符集？

UTF-8 是一种编码，该术语在定义它的 RFC 中使用，下面引用。

* * *

> 我经常看到术语“编码”和“字符集”可以互换使用

在 Unicode 之前，如果您想使用西里尔文或希腊文之类的字母†，则需要使用仅对该字母中的字符进行编码的编码。因此，术语*编码*和*字符集*经常被混为一谈，但它们的含义不同。

但现在，Unicode 通常是您需要担心的唯一字符集，因为它包含您必须处理的大多数书面语言的字符，克林贡语除外。

† - 字母表，一种*字符集*，其中字符直接对应于口语中的声音。

* * *

*字符集*是从代码单元（整数）到书面语言中的字符、符号、字形或其他标记的映射。Unicode 是一个将 21b 整数映射到 unicode 代码点的字符集。Unicode 联盟的[词汇表](http://www.unicode.org/glossary/#unicode)是这样描述的：

> # 统一码

> 1.  用于书写世界上所有语言的字符的数字表示标准。Unicode 提供了一种统一的方式来存储、搜索和交换任何语言的文本。它被所有现代计算机使用，并且是在 Internet 上处理文本的基础。Unicode 由 Unicode 联盟开发和维护：[http](http://www.unicode.org) ://www.unicode.org 。
> 2.  适用于由 Unicode 联盟开发和维护的软件国际化和本地化标准的标签。

* * *

*编码*是从字符串到字符串的映射。UTF-8 是一种将字节字符串（8b 整数）映射到代码点字符串（21b 整数）的编码。Unicode 联盟将其称为[“字符编码方案”](http://www.unicode.org/glossary/#character_encoding_scheme)，并在[RFC 3629](https://www.rfc-editor.org/rfc/rfc3629)中定义。

> 然而，最初提出的 UCS 编码与许多当前的应用程序和协议不兼容，这导致了 UTF-8 的发展

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T16:16:46.390

UTF-8 是一种*编码*，因为它将一系列抽象整数（表示抽象字符的[unicode代码点）](http://en.wikipedia.org/wiki/Unicode)*编码*为一组字节。（通过 unicode 眼镜，您可以说诸如[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)之类的“字符集”也是表驱动的“编码”，因为它将少量代码点编码为字节，但这正在接近滥用术语，可能不是很有帮助）。

整数序列（在某种基本意义上）是“unicode 字符串”，但是为了将它们保存在磁盘上或通过网络发送它们，您需要将它们编码为字节序列。UTF-8 是这样做的一种方式，UTF-16 是另一种方式：如果一个 unicode 字符串以两种不同的方式编码，它将被表示为两个不同的字节流。

* * *

这里有多个很好的答案，但就在昨天，我花了一些时间试图将这个问题简化为最小的大小，所以这提供了一个重用该文本的快乐机会：

[我认为 Joel Spolsky 关于每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有借口！）的绝对最小值](http://www.joelonsoftware.com/articles/Unicode.html)的文章非常好。它（肯定）之前在这里提到过，但值得重复。不过，我认为这不是完全最小的。

有几次我不得不向同事解释“unicode”时，抽象 Unicode 代码点的概念成为了照明的关键。我成功解释的结构是这样的：

*   Unicode 联盟（经过许多苦恼和协商）设法为大部分正在使用的字符提供*了一个数字。*这些数字（行话）称为“代码点”。

*   'The Letter A' 有一个代码点，这与字体无关。因此，“A”和“a”具有不同的代码点，但没有区分罗马、粗体、斜体、衬线、无衬线（等等）。日文汉字、腾瓦尔和克林贡字符（例如）有代码点（这会引起注意）。

*   'unicode string' 是（概念上）一系列代码点。这是一个数学整数序列。询问这些是字节、2 字节还是 4 字节字是没有意义的；该序列与计算机无关。

*   但是，如果您想将该整数序列发送给某人，或将其保存在计算机磁盘上，则必须对其进行编码。您也可以在一张纸上写下数字序列，但现在让我们专注于计算机。如果您想在计算机上存储或发送它，您必须将这些整数转换为字节序列。有多个过程可以做到这一点，每个过程都被命名为“编码”。这些“编码”之一是 UTF-8。

*   当您“读取 Unicode 文件”时，您从磁盘上的字节序列开始，并且在概念上以整数序列结束。[如果以某种方式指示“unicode 文件”以 UTF-8 编码，那么您必须使用RFC 3629](http://www.ietf.org/rfc/rfc3629.txt)中定义的算法对该字节序列进行解码以获得整数序列。'unicode string' 上的所有后续操作都是根据代码点序列定义的，并且忘记了它在磁盘上以 'UTF-8' 开始的事实。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T15:34:01.377

Unicode 标准将其称为*编码形式*或*编码方案*。Unicode 有一组字符（称为 Unicode 字符集，或通用字符集），所有 UTF*编码形式*和*编码方案*都可以编码该集中的所有字符。

与许多其他术语一样，程序员似乎倾向于到处乱用术语，这只是另一个例子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:41:43.670

UTF-8 是一种编码。然而，编码通常称为字符集，因此许多协议使用参数名称`charset`作为指定字符编码的参数。因此，`charset`它只是一个标识符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-03T23:48:07.230

从所有可能的来源来看，UTF-8 都被命名为*encoding*，而不是*charset*。

**然而**，它是由 Unicode 标准定义的，主要用于编码 Unicode 字符集。只需检查 UTF 首字母缩写词的含义：***Unicode**转换格式*。它甚至可以向后兼容一些以前的字符集，如 ASCII。因此，从实际的角度来看，使用 UTF-8 对 Unicode 以外的字符集进行编码是非常不寻常的。

这可能是在某些情况下不准确地将 UTF-8 用作字符集的根源。

# ruby - 独角兽服务器 mongodb 和 sinatra

> ID：15227669
> 
> 赞同：3
> 
> 时间：2013-03-05T15:29:03.713
> 
> 标签：ruby, mongodb, sinatra, unicorn, middleware

所以我一直在努力寻找更多关于这个的信息。
我目前正在使用 sinatra + mongodb + unicorn 构建轻量级 API。
由于在 unicorn 上运行的中间件应用程序中的实例变量只能在每个请求中存活，这样的事情是行不通的：

```
@connector ||= Mongo::Connector.new 'localhost' 
```

这意味着对于每个传入的请求，我都会创建一个新的 Mongo::Connection 实例，经过几次请求后，它会在我的机器上生成一整套 mongodb 进程。我通过声明一个全局变量解决了这个问题

```
$connector ||= Mongo::Connector.new 'localhost' 
```

但这是要走的路吗？使用这种表示法是否安全？请给我你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:03:33.113

如果您打算使用全局变量，那么最好使用常量，它在实践中具有相同的范围，但表示您不希望它被重新分配（而且您不希望）。

比这更好的是类实例变量。范围广、控制严、意图明显：

```
module AmazingProject
  def self.conn
    @conn ||= Mongo::Connector.new 'localhost'
  end
end

class App < Sinatra::Base
  get "/" do
    AmazingProject.conn.get_all_records # call it from wherever you need it.
  end
end 
```

在 Sinatra 应用程序的上下文中，我要么使用它，要么只是将连接放在`settings`帮助程序中。

```
class App < Sinatra::Base

  configure do
    set :conn, { Mongo::Connector.new 'localhost' }
  end

  get "/" do
    settings.conn.do_something_interesting()
  end
end 
```

所有应用程序实例都可以访问`settings.conn`.

# php - 创建带有跳转菜单的导航

> ID：15227670
> 
> 赞同：0
> 
> 时间：2013-03-05T15:29:04.093
> 
> 标签：php, javascript, navigation, jump-list

我正在制作一个响应式网站，所以当它是移动大小时，导航变成了一个跳转菜单，这一切都很好而且花花公子！

但是当我到达另一个页面时跳转菜单上的页面更改时跳转菜单的父级停留在主页上，所以我无法从另一个页面上点击主页，我该怎么做所以说我在主页上然后我点击进入电气页面，在电气页面上，跳转菜单勾选了电气？

ps 我不能在每个页面上更改它，因为我在每个页面上都拉入相同的导航栏，下面是我目前使用的代码

```
<form name="form" class="mob-nav">
          <select name="jumpMenu" id="jumpMenu" onchange="MM_jumpMenu('parent',this,0)">
            <option value="index.php">Home</option>
            <option value="how-it-works.php">How it works</option>
            <option value="gas.php">Gas</option>
            <option value="electric.php">Electric</option>
            <option value="telecoms.php">Telecoms</option>
            <option value="services.php">Services</option>
            <option value="contact.php">Contact</option>
          </select>
        </form> 
```

这是该网站的链接`http://79.170.44.126/rkhconsultants.co.uk/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:53:43.453

用一些 php 修复它

```
<?
        if ($PHP_SELF != '/rkhconsultants.co.uk/index.php')
        { $page1 = ''; } else { $page1 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/how-it-works.php')
        { $page2 = ''; } else { $page2 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/gas.php')
        { $page3 = ''; } else { $page3 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/electric.php')
        { $page4 = ''; } else { $page4 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/telecoms.php')
        { $page5 = ''; } else { $page5 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/services.php')
        { $page6 = ''; } else { $page6 = 'selected'; }
        if ($PHP_SELF != '/rkhconsultants.co.uk/contact.php')
        { $page7 = ''; } else { $page7 = 'selected'; }
    ?>

<form name="form" class="mob-nav">
          <select name="jumpMenu" id="jumpMenu" onchange="MM_jumpMenu('parent',this,0)">
            <option <?echo $page1;?> value="index.php">Home</option>
            <option <?echo $page2;?> value="how-it-works.php">How it works</option>
            <option <?echo $page3;?> value="gas.php">Gas</option>
            <option <?echo $page4;?> value="electric.php">Electric</option>
            <option <?echo $page5;?> value="telecoms.php">Telecoms</option>
            <option <?echo $page6;?> value="services.php">Services</option>
            <option <?echo $page7;?> value="contact.php">Contact</option>
          </select>
       </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:41:48.503

简而言之，您需要`selected`在选项元素内添加标签

```
 <option selected value="electric.php">Electric</option> 
```

因此，您需要复制`active`通过 PHP 在导航中添加类的代码。

# regex - SQL Report Builder 3 - 正则表达式仅查询定义区域中的英国邮政编码

> ID：15227676
> 
> 赞同：0
> 
> 时间：2013-03-05T15:29:17.957
> 
> 标签：regex

REGEX新手需要帮助！

我有以下代码，但我需要进行调整，以便它仅验证BN、RH、SE、SM、TN、KT、PO、CR、W、WC、EC、SW、SE 的**英国**邮政编码。

```
(GIR 0AA)|((([A-Z-[QVX]][0-9][0-9]?)|(([A-Z-[QVX]][A-Z-[IJZ]][0-9][0-9]?)|(([A-Z-[QVX]][0-9][A-HJKSTUW])|([A-Z-[QVX]][A-Z-[IJZ]][0-9][ABEHMNPRVWXY]))))[0-9][A-Z-[CIKMOV]]{2}) 
```

我尝试了另一个类似的代码，它确实可以进行一些干预，但我无法删除 INWARD 和 OUTWARD 部分中的交叉匹配变量，即需要“SE”并避免“SO”等。

# php - 如何在没有框架的情况下设置 Doctrine 2

> ID：15227677
> 
> 赞同：2
> 
> 时间：2013-03-05T15:29:18.810
> 
> 标签：php, doctrine

我正在做一个学校项目，我想使用 Doctrine 但没有任何框架，因为它们通常太大了。问题是，即使按照文档的配置教程（[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html)），我也无法集成 Doctrine。拜托，如果有人确实需要设置它并有一些关于 Doctrine 配置（或它在哪个文件中）的提示或想法，我会采取任何措施。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T00:54:32.590

你好吗？这些天我遇到了同样的问题，解决方案是：1）配置一个提到的“boostrap.php”文件，它创建了entityManager、annotationReader和其他类似的东西：

```
 use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Mapping\Driver\AnnotationDriver;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

require_once __DIR__ . '/vendor/autoload.php';
//require_once __DIR__ . "/src/model/persistence/entities";

$paths            = array(__DIR__ . "src/model/persistence/entities/");
$isDevMode        = false;
$connectionParams = array(
    'driver'   => 'pdo_mysql',
    'user'     => 'root',
    'password' => 'pwd',
    'dbname'   => 'db_name',
);

$config = Setup::createConfiguration($isDevMode);
$driver = new AnnotationDriver(new AnnotationReader(), $paths);

// registering noop annotation autoloader - allow all annotations by default
AnnotationRegistry::registerLoader('class_exists');
$config->setMetadataDriverImpl($driver);

$entityManager = EntityManager::create($connectionParams, $config); 
```

2）我使用带有 index.php 作为访问点的 MVC，所以我在开头包含这个“bootstrap.php”，并将 $entityManager 加载到全局数组（比如说 $registry）中，以便可以将它传递给模型（例如在 costructor 中）然后到 dao 以便我可以访问它。

3) 在 dao 中使用 $use $entityManager 来创建和执行查询，如下所示：

```
<?php

namespace persistence\daos;

require_once "vendor/autoload.php";
include_once __PERSISTENCE_PATH . '/daos/Dao.php';
include_once __PERSISTENCE_PATH . '/entities/UsuarioEntity.php';
include_once __PERSISTENCE_PATH . '/entities/RolUsuarioEntity.php';

use persistence\daos\Dao;
use persistence\daos\DaoImpl;
//use persistence\entities\RolUsuario;

interface UsuarioDao extends Dao {

    function findAllRoles();

    public function findById($id);

}

class UsuarioDaoImpl extends DaoImpl implements UsuarioDao {

    public function __construct($em) {
        parent::__construct($em);
    }

    public function findById($id) {
        return parent::findByPrimaryKey('model\persistence\entities\Usuario', $id);
    }

    public function save($usuario) {
        parent::save($usuario);
    }

    public function delete($usuario) {
        parent::delete($usuario);
    }

    public function findAll() {
        return parent::findAllByEntity('model\persistence\entities\Usuario');
    }

    public function login($email, $pwd) {
        $query = $this->entityManager->createQuery("SELECT u FROM model\persistence\entities\Usuario u WHERE u.email = '$email' AND u.senha = '$pwd' ");
        return $query->getResult();
    }

    public function findAllRoles() {
        $rolesRepository = $this->entityManager->getRepository('model\persistence\entities\RolUsuario');
        return $rolesRepository->findAll();
    }

} 
```

在没有任何已知框架的情况下，这件事对我来说效果很好。

[这篇](https://stackoverflow.com/questions/15099060/doctrine2-class-is-not-a-valid-entity-or-mapped-super-class)文章对这个过程有很大帮​​助，也看看这个。

希望它对你有用，我的朋友！为我的英语干杯和抱歉 XD！

# java - 在 Thymeleaf 中对实体使用“选择”标签

> ID：15227680
> 
> 赞同：5
> 
> 时间：2013-03-05T15:29:24.390
> 
> 标签：java, spring-mvc, thymeleaf

我正在创建一个带有 select 标记的表单，如下所示：

```
<form th:object="${version}" method="post" class="form-horizontal">
    ...
    <div class="control-group" th:classappend="${#fields.hasErrors('product')} ? 'error'">
        <label class="control-label" for="product" th:text="#{version.product}">Product</label>
        <div class="controls">
            <select id="product" th:field="*{product}">
                <option value="" th:text="#{common.select.prompt}"></option>
                <option th:each="p : ${productList}" th:value="${p.id}"  th:text="${p.name}"></option>
            </select>
            <span class="help-inline" th:errors="*{product}"></span>
        </div>
    </div>
    ...
</form> 
```

`DomainClassConverter`类`Spring Data JPA`有助于在我提交表单时自动将所选对象转换`id`为实体。也应该不为空（我在类中`Product`的字段上使用。`product``@NotNull``product``Version`

我遇到的问题 - 当我回来编辑数据时，`Product`没有选择。

如果我`select`这样修改（`th:field`和`th:errors`）：`<-- p.s. is not a sad smile`

```
<select id="product" th:field="*{product.id}">
    <option value="" th:text="#{common.select.prompt}"></option>
    <option th:each="p : ${productList}" th:value="${p.id}" th:text="${p.name}"></option>
</select>
<span class="help-inline" th:errors="*{product.id}"></span> 
```

然后当我回来编辑它时它被选中，但验证器不起作用（`product`总是实例化，即使选择的 id 是`null`）。

它看起来像一个非常常见的场景（从列表中选择一个实体），但我找不到任何好看的例子。请分享秘密知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:51:37.760

解决了。存在问题是因为我没有覆盖`equals()`and`hashCode()`方法。

# xml - 使用 ncml 聚合 netcdf 文件？

> ID：15227684
> 
> 赞同：2
> 
> 时间：2013-03-05T15:29:28.173
> 
> 标签：xml, netcdf, ncml

我们将海洋模型的每小时输出存储在一系列 netcdf 文件中，每个月一个。

我们将每月的第一个小时和最后一个小时存储在每个文件中。我们想使用 NcML 聚合这些文件，但我们不想在聚合中获得重复的时间值。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:45:08.900

在 NCML 中，您可以使用`NCOORDS`来准确指定要使用的记录数。因此，为了避免重复的时间值，您可以将`NCOORDS`每个月指定为比您当前拥有的时间值少一。因此，对于非闰年，您的聚合可能会这样指定：

```
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
    <aggregation dimName="time" type="joinExisting">
        <netcdf location="/Data/wave/2010/Jan/gom01_0001.nc" ncoords="744"/>
        <netcdf location="/Data/wave/2010/Feb/gom01_0001.nc" ncoords="672"/>
        <netcdf location="/Data/wave/2010/Mar/gom01_0001.nc" ncoords="744"/>
        <netcdf location="/Data/wave/2010/Apr/gom01_0001.nc" ncoords="720"/>
        <netcdf location="/Data/wave/2010/May/gom01_0001.nc" ncoords="744"/> 
        <netcdf location="/Data/wave/2010/Jun/gom01_0001.nc" ncoords="720"/>
        <netcdf location="/Data/wave/2010/Jul/gom01_0001.nc" ncoords="744"/>      
        <netcdf location="/Data/wave/2010/Aug/gom01_0001.nc" ncoords="744"/>    
        <netcdf location="/Data/wave/2010/Sep/gom01_0001.nc" ncoords="720"/>
        <netcdf location="/Data/wave/2010/Oct/gom01_0001.nc" ncoords="744"/>
        <netcdf location="/Data/wave/2010/Nov/gom01_0001.nc" ncoords="720"/>
        <netcdf location="/Data/wave/2010/Dec/gom01_0001.nc" ncoords="744"/>
    </aggregation>       
</netcdf> 
```

在闰年，您将指定`ncoords="696"`为二月。

# c++ - 使用继承的函数铸造错误

> ID：15227688
> 
> 赞同：0
> 
> 时间：2013-03-05T15:29:33.380
> 
> 标签：c++, inheritance, casting

我对在 C++ 中进行强制转换有疑问。我将通过一个例子来解释它。想象一下我有两个课程：

```
class c1 {
  public:
  c1() {}

  double getHi() { return _hi; }  

private:
  double _hi = 2;
}

class c2 : c1 {
  public:
  c2() {}
} 
```

由于 c2 是 c1 的子节点，因此它继承了函数 getHi()。因此，您可以使用 c2 的实例调用 getHi。

但是，如果你这样做会发生什么？：

```
c2* b = new c2();
cout << b->getHi() << endl;
cout << ((c1*)b)->getHi() << endl; 
```

第一个将起作用。但不是第二个。为什么是这样？谁能给我解释一下？

谢谢

编辑：这是一个例子。我写的时候打错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:33:53.727

> 由于 c2 是 c1 的子节点，因此它继承了函数 getHi()

首先，您应该说`c2`“派生自”，或“是的派生类”，或“继承（在您的情况下是私下）从” `c1`。此外，“继承”是正确的动词。

> 但是，如果你这样做会发生什么？

在这种情况下，无法执行强制转换，因为您从`c1`. 更改`c2`如下定义，您将看到两个调用以`getHi()`完全相同的方式工作（在本例中）：

```
class c2 : public c1 { };
//         ^^^^^^
//         This means that public members of c1 will become
//         public members of c2 as well. If you specify nothing,
//         public members of c1 will become private members of
//         c2 
```

请注意，您还缺少类定义后的分号，最重要的是，和`public`定义中的访问修饰符：没有它们，构造函数将是，因此您将根本无法实例化这些类：`c1``c2``private`

```
class c1
{
public: // <== Don't forget this!
  c1() {} // Btw, why this? It does nothing
  double getHi() { return _hi; }
private:
  double _hi = 2;
}; // <== Don't forget this!

class c2 : public c1
//         ^^^^^^ Don'f forget this!
{
public: // <== Don't forget this!
    c2() {} // Btw, why this? It does nothing
}; // <== Don't forget this!

int main()
{
    c2* b = new c2();
    b->getHi();          // Compiles, calls c1::getHi();
    ((c1*)b)->getHi();   // Compiles, calls c1::getHi();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:32:24.340

您声明的方式`c2`使: 外部代码不能因此而成为`c1`私有*基础*。`c1``b``c1`

要修复，请创建`c1`一个公共基础：

```
class c2: public c1 {
    ...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:34:11.467

在 c++ 代码中使用 c 样式转换的错误形式。请改用 static_cast<> 或 dynamic_cast<> 。除此之外，在您的示例中，您私下继承了 c1 。如果您将其更改为：

```
class c2 : public c1 { 
```

它可能会更好。

# android - Android 进度指示器样式上的 Google+？

> ID：15227690
> 
> 赞同：0
> 
> 时间：2013-03-05T15:29:37.140
> 
> 标签：android, android-widget

Android Google+ 应用程序（可能还有其他标准系统应用程序）有这个漂亮的圆圈指示器，它的样式非常细，看起来好像两个圆圈相互运行。

当我`@android:style/Widget.ProgressBar`为自己的`<ProgressBar>`实例使用其中一种样式时，我得到一个带有简单单向动画的相当粗的圆圈。

G+ 小部件是自定义小部件，还是某种隐藏的、未记录但标准的样式，我也可以将其用于我自己的应用程序？

只是为了澄清，我正在使用一个`@style/Theme.Sherlock`主题并`targetApi`设置为 17（`minSdk`是 8）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:33:49.190

只是我的 5 美分，您使用的不是最先进的 Android 版本（大约 2.x）。标准的进度条图标曾经只是一个“粗圆圈”，但现在（Android 3+）它是这个美妙的、闪亮的圆圈。因此，您获得的内容实际上取决于您运行应用程序的 Android 操作系统版本。

但是，Google+ 应用程序只是复制了 Android4 ProgressBar 图标并将其添加到本地项目中，因此它无处不在。

# events - ZF2 共享模块事件管理器

> ID：15227693
> 
> 赞同：4
> 
> 时间：2013-03-05T15:29:43.033
> 
> 标签：events, zend-framework2

当特定事件发生时，我需要在我的每个模块中实现一个事件触发器。我还需要在触发该事件时必须执行某些工作的所有其他模块注意它。

我正在尝试创建一些可以发送触发器的通用端点，以及所有模块都需要监听的地方，但是我在弄清楚如何实现这一点时遇到了一些麻烦。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T09:17:35.010

根据对@Andrew 的回答的评论，只要您的控制器扩展`AbstractActionController`（它很可能会这样做）它就已经知道 EventManager，所以您可以继续并在控制器操作中触发您喜欢的任何事件，只需执行...

```
<?php
namespace Application/Controller;

// usual use statements omitted for brevity ..

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        // trigger MyEvent
        $this->getEventManager()->trigger('MyEvent', $this);
    }

} 
```

要在其他模块的引导程序中收听该事件，请执行以下操作

```
public function onBootstrap(EventInterface $e)
{
    $app = $e->getApplication();
    // get the shared events manager 
    $sem = $app->getEventManager()->getSharedManager();
    // listen to 'MyEvent' when triggered by the IndexController
    $sem->attach('Application\Controller\IndexController', 'MyEvent', function($e) {
        // do something...
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:17:04.690

有几篇关于这方面的好文章：

[http://www.mwop.net/blog/266-Using-the-ZF2-EventManager.html](http://www.mwop.net/blog/266-Using-the-ZF2-EventManager.html)

[http://www.eschrade.com/page/zend-framework-2-event-manager/](http://www.eschrade.com/page/zend-framework-2-event-manager/)

让你的模块监听一个应用程序范围的事件，然后在触发时执行一些任务是很容易的。这两个中应该有足够的信息来帮助您入门。

如果你举一个你想要的例子，我可以提供一个例子来说明你如何去做。

# json - 如何使用 Spring mvc 控制器让 Json 数据可用于 html 视图及其 javascript 代码

> ID：15227695
> 
> 赞同：1
> 
> 时间：2013-03-05T15:29:48.933
> 
> 标签：json, model-view-controller, spring-mvc

我使用 Spring MVC 控制器方法来显示 html 视图，并且**该视图需要模型中可用的 JSON 数据，**即邮政编码的集合/数组。

**我想过在标签内的html视图中内**联输出JSON数据，**`<script`但在这样做之前我想知道是否有更好的做法......**

 **有人可以请教吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:57:07.480

您可能想要执行以下操作：

```
@RequestMapping(value="/yourmapping", method=RequestMethod.GET, produces={MediaType.TEXT_HTML_VALUE, MediaType.ALL_VALUE})
public String page(Model m){        
    m.addAttribute("postcodes", new ArrayList<String>());       
    return "your-jsp-name";
} 
```

然后在您的jsp中，您可以访问集合`${postcodes}`并对其进行循环或将其字符串表示设置为隐藏`span`，然后您的JavaScript可以处理数据。

编辑：

```
<script type="text/javascript">
    var postcodes = "${postcodes}"; 
</script> 
```**

# antlr - 基于模式的ANTLR树重写

> ID：15227699
> 
> 赞同：1
> 
> 时间：2013-03-05T15:29:53.793
> 
> 标签：antlr, antlr3, abstract-syntax-tree

我在 ANTLR 3 中有一个相当基本的语法，我希望执行以下操作： - 如果“术语”前面出现“+”，只需将其删除，因为它是多余的（完成）。- 如果“术语”前面出现“-”，请保留它，但是在第一个子节点中添加“0”，这样我就可以有效地从“-2”变为“0-2”。

```
expression:
  unaryterm ((ADD^ | MINUS^) term)*
;

unaryterm:
  (ADD! | MINUS^)? term
; 
```

我尝试过重写树，但在匹配可能的“-”时似乎卡住了。

注：ADD 代表“+”，MINUS 代表“-”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:08:54.257

假设这`INTEGER`是您想要的文字标记类型`0`，您可以使用以下内容：

```
unaryterm
    :   ADD! term
    |   MINUS term -> ^(MINUS INTEGER["0"] term)
    |   term
    ; 
```

# html - 混合和匹配表格元素和表格样式元素

> ID：15227700
> 
> 赞同：0
> 
> 时间：2013-03-05T15:29:57.917
> 
> 标签：html, css, html-table

我有这个代码：

```
<style>
tr, .bar{
    display: table-row;
}
th, td, .pcell{
    display:table-cell;
    border: black solid 1px;
}
</style>
<body>
    <table>
        <div class="bar">
            <label class="pcell">Stuff</label>
            <label class="pcell">moose</label>
        </div>
        <tr>
            <td>Other Stuff</td>
            <td>cow</td>
        </tr>
        <tr>
            <div class="pcell">More Stuff</div>
            <td>chicken</td>
        </tr>
    </table>
</body> 
```

我希望能够在不替换整个表格的情况下用标签替换表格单元格。有没有办法做到这一点？我可以只替换一行，而不是整个表。

我正在尝试使用改编自[本](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-easy-css3-checkboxes-and-radio-buttons/)教程的可选标签创建标题行。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:37:28.563

我知道这不是一个解决方案，但它不适合评论。

这不是有效的 html。浏览器将首先解析您的 html 代码。因为 a`div`不是 的有效子级，`table`或者`tr`浏览器试图纠正这一点，并做了一些*魔术*。例如，在 chrome 中，这个 html 代码将被转换为：

```
<div class="bar">
     <label class="pcell">Stuff</label>
     <label class="pcell">moose</label>
</div>
<div class="pcell">More Stuff</div>

<table>
    <tr>
        <td>Other Stuff</td>
        <td>cow</td>
    </tr>
    <tr>
        <td>chicken</td>
    </tr>
</table> 
```

因为你的css代码没有预期的结果。

你为什么要使用标签，而不是 a `th`and`thead`工作？

# php - 如何有效地实现算法

> ID：15227704
> 
> 赞同：2
> 
> 时间：2013-03-05T15:30:05.370
> 
> 标签：php, algorithm, gearman

我们最近与一位数学家合作为我们构建了一个算法。该算法将查看点击数据，并不断更新与用户、内容和内容类别相关的数据，然后将用户与相关内容配对。

话虽如此，我以前从未实现过算法，但我猜我们当前的环境（PHP、MySQL）并不完全适合持续处理和更新数据。

**任何人都可以就以下方法是否走在正确的轨道上给我反馈？**

*   用java（或其他编译语言）编写算法以获得最佳性能
*   在 NoSQL 服务器上存储用户、内容和类别数据（或使用内存缓存）
*   使用 Gearman（或同等工具）将点击/用户数据提交到作业服务器
*   在包含算法的单独工作服务器上运行作业
*   更新用户、内容、类别数据

**你能推荐一些解释如何最有效地实现算法的文章吗？**

谢谢！

# tomcat - 如何在共享套接字上运行本地 tomcat 集群？

> ID：15227712
> 
> 赞同：0
> 
> 时间：2013-03-05T15:30:25.273
> 
> 标签：tomcat, unicorn, foreman

最近我遇到了一个名为 Unicorn 的 Ruby Web 服务器，它有一个简单而绝妙的想法：

> 当 Unicorn master 启动时，它将我们的应用程序加载到内存中。一旦它准备好服务请求，它就会分叉 16 个工人。然后这些工作人员在套接字上选择（），只提供他们能够处理的请求。通过这种方式，内核为我们处理负载平衡。

一个并行的方法是设置一个本地 tomcat 集群，每个集群都带有 -Xmx384MB，然后让每个单独的集群“select() 在一个共享套接字上，只为他们能够处理的请求提供服务”

我想知道如何调整 tomcat 源代码或一些脚本以实现这一点？

如果您可以使用 Foreman 一次运行 3 个并发 Tomcat 应用程序服务器，请考虑所有可能性！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:39:35.863

Tomcat 已经这样做了：它启动 N 个工作线程（您可以配置 N 个），并将每个请求转发到相应的 Web 应用程序。如果 100 个用户尝试访问同一个 Web 应用程序，他们的请求将在 N 个线程之间共享，每个线程都将执行应用程序的代码。

**编辑**Einhorn 不符合 Java EE，因此它可以偷工减料。要对 Tomcat 执行类似操作，您需要启动多个 Tomcat 进程（每个进程都需要自己的套接字）和前端的负载平衡器代理/http 服务器来分配负载。

您的应用程序还需要在数据库级别为此设计（即它们必须能够处理写入相同表的多个进程）。

# javascript - AngularJS，多个可拖动项目导致初始移动时“跳跃”

> ID：15227715
> 
> 赞同：0
> 
> 时间：2013-03-05T15:30:30.937
> 
> 标签：javascript, html, dom, angularjs, coffeescript

我正在使用位于 AngularJS 主站点上的示例代码。当我移动第一个可拖动对象时，一切都很好。一旦我开始拖动第二个对象，第二个对象就会“跳跃”到第一个对象移动的距离。

最初我认为修复就像重置变量一样简单。不幸的是，我所有的尝试都导致了“缩进错误”。

```
# Angular Drag Components RE-uses vars from previous drag, bugging out the dragging
angular.module("aehalo", []).directive "draggable", ($document) ->
  startX = 0
  startY = 0
  x = 0
  y = 0
  (scope, element, attr) ->
    mousemove = (event) ->
      y = event.screenY - startY
      x = event.screenX - startX
      element.css
        top: y + "px"
        left: x + "px"

    mouseup = ->
      $document.unbind "mousemove", mousemove
      $document.unbind "mouseup", mouseup
    element.css
      position: "relative"
      border: "1px solid red"
      backgroundColor: "lightgrey"
      cursor: "pointer"
    element.bind "mousedown", (event) ->
      startX = event.screenX - x
      startY = event.screenY - y
      $document.bind "mousemove", mousemove
      $document.bind "mouseup", mouseup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:22:25.617

这听起来像重置`x`，甚至会修复它`y`：`mousedown`

```
 element.bind "mousedown", (event) ->
      x = 0
      y = 0
      startX = event.screenX - x
      startY = event.screenY - y
      $document.bind "mousemove", mousemove
      $document.bind "mouseup", mouseup 
```

如果您仍然遇到缩进错误，请确保您没有在缩进中混合制表符和空格。

# c++ - AVLTree（加载和平衡二叉树）

> ID：15227720
> 
> 赞同：0
> 
> 时间：2013-03-05T15:30:46.230
> 
> 标签：c++

```
#include <iostream>
#include <cstring>
#include <fstream>

using namespace std;

//header file 
template <class V>
struct Node{
   int height;
   V key;
   string value;
   Node<V> *Parent;
   Node<V> *Left;
   Node<V> *Right;

   Node (V Key,string Val)
   {
        this->key=Key;
        this->value=Val;
        this->Parent=NULL;
        this->Left=NULL;
        this->Right=NULL;
   }
};

template <class V>
class AVLTree
{
  private:
          Node<V> *Root;
  public:
         AVLTree();
         void deleteTree(Node<V> *node);
         ~AVLTree();
         int height(Node<V> *node);
         int TreeHeight();
         Node<V> *tallGrandChild(Node<V> *node);
         void rotate(Node<V> *node);
         bool isBalanced(Node<V> *node);
         void balance(Node<V> *node);
         void balanceTree();
         void insert(V key,string value);
         void loadTree(const char *file);
         string Search(V key);     
};            

//constructor
template <class T>
AVLTree<T>::AVLTree() 
{
   Root=NULL;
}

template<class V>   
void AVLTree<V>::deleteTree(Node<V> *node)
{
 Node<V> *l=node->Left;
 Node<V> *r=node->Right;

 if (l!=NULL)
    deleteTree(l);
 else if (r!=NULL)
      deleteTree(r);

 delete node;                       
}

//destructor
template<class V>
AVLTree<V>::~AVLTree()
{
    deleteTree(Root);
}                  

//calculating height recursively         
template <class V>
int AVLTree<V>::height(Node<V> *node)
{
   int h=0;
    if (node!=NULL)
    {
        h=max(height(node->Left),height(node->Right))+1;
    }
    return h;
}

//function to find out height of tree
template <class V>
int AVLTree<V>::TreeHeight()
{
  int h=height(Root);
  return h;
}

//get the grandchild of node
template <class V>
Node<V>* AVLTree<V>::tallGrandChild(Node<V> *node)
{
    cout<<"GC before"<<endl;           

    Node<V> *l=node->Left;
    Node<V> *r=node->Right;
    cout<<"GC middle"<<endl;
    if (l!=NULL && r!=NULL)
    {
      if (height(l)>=height(r))
      {
         if (l->Left!=NULL && l->Right!=NULL)
         {                       
           if (height(l->Left)>=height(l->Right))
               return l->Left;
           else
               return l->Right;
         }
      }
     }
     else
     {
        if (r->Left!=NULL && r->Right!=NULL)
        {
          if (height(r->Left)>=height(r->Right))
              return r->Left;
          else
              return r->Right;
        }
     }
  }
cout<<"GC end"<<endl;
return NULL;
}                             

//check node if it is balanced or not                 
template <class V>
bool AVLTree<V>::isBalanced(Node<V> *node)
{
 int l,r;
 if (node->Left==NULL)
     l=0;

 if (node->Right==NULL)
     r=0;

 if (node->Left!=NULL)        
    l=height(node->Left);

 if (node->Right!=NULL)
    r=height(node->Right);

 cout<<"isbalanced checking"<<endl;
 if ((l-r)>1 || (l-r)<-1)
 {
      return false;
 }
 else 
 {
     return true;
 }
}

// rotate the node that is unbalanced,its parent and grandparent
template <class V>
void AVLTree<V>::rotate(Node<V> *node)
{
 if (Root==NULL)
 {
    return;
 }
 if (Root->Left==NULL && Root->Right==NULL)
 {
    return;   
 }
 Node<V> *parent,*grandparent;
 parent=node->Parent;
 grandparent=parent->Parent;
 if (grandparent==NULL)
    return;

 V min=node->key;
 Node<V> *A,*B,*C;
 A=node;

 if (parent->key<min)
 {
     min=parent->key;
     A=parent;
 }        
 if (grandparent->key<min)
 {
      min=grandparent->key;
      A=grandparent;
 }

 if (parent==A)
 {
     if (grandparent->key<node->key)
     {
         B=grandparent;
         C=node;
     }
     else
     {
         B=node;
         C=grandparent;
     }
 }

 if (grandparent==A)
 {
     if (parent->key<node->key)
     {
         B=parent;
         C=node;
     }
     else
     {
         B=node;
         C=parent;
     }
 }

 if (node==A)
 {
     if (grandparent->key<parent->key)
     {
             B=grandparent;
             C=parent;
     }
     else
     {
             B=parent;
             C=grandparent;
     }
 }

 if (grandparent->Parent!=NULL)
 {
    B->Parent=grandparent->Parent;
    B->Left=A;
    B->Right=C;
    A->Parent=B;
    C->Parent=B;
 } 
 else
 {
    B->Left=A;
    B->Right=C;
    A->Parent=B;
    C->Parent=B;
 }       
}     
//balance the node and all nodes following it.this is a recursive function that i //
 //came up with
template <class V>
void AVLTree<V>::balance(Node<V> *node)
{
   if (node->Left!=NULL) 
       balance(node->Left); 
    if (node->Right!=NULL)
       balance(node->Right);

   Node<V> *temp=node;

    if (temp->Parent!=NULL && (temp->Parent)->Parent!=NULL)
    {
       temp=temp->Parent;
       temp=temp->Parent;     
       if (isBalanced(temp)==0)
       {
           cout<<"balance func check 3"<<endl;                    
           Node<V> *temp1=tallGrandChild(temp);
           if (temp1!=NULL)
              rotate(temp1);
       }      
}
}
//function to balance whole tree
template <class V>
void AVLTree<V>::balanceTree()
{
   balance(Root);
}   

//insert a new key and value
template <class V>
void AVLTree<V>::insert(V key,string value)
{
   Node<V> *temp,*temp1;
   if (Root==NULL)
   {
      Root=new Node<V>(key,value);
      return;
   }          
 temp=Root;

 if (Root!=NULL)
 {
    while (temp!=NULL)
    {
       temp1=temp;
       if (key>temp->key)
       {
            temp=temp->Right;
       }
       else if (key<temp->key)
       {
            temp=temp->Left;
       }

    }

    if (temp1!=NULL)
    {
        temp=new Node<V>(key,value);
        temp->Parent=temp1;
        if (temp1->key>key)
        {
            temp1->Left=temp;
        }
        else if (temp1->key<key)
        {
            temp1->Right=temp;
        }
    }
 }               
}                                  

//reading data from a file and storing it in AVLTree using insert function
template <class V>               
void AVLTree<V>::loadTree(const char *file)
{
 ifstream fin;
 fin.open(file);

 if(fin.fail())
 cout<<"Error in opening file!"<<endl;

 while (!fin.eof())
 {
       string buffer;
       V buff;
       getline(fin,buffer,'~');
       fin>>buff;
       if (!buff)
          continue;
       insert(buff,buffer);

 }

 fin.close();
} 
```

我正在制作一个 AVL 树作为分配。平衡树时遇到问题。平衡的
功能是递归的。当我运行代码时，2 到 3 秒后，我得到一个分段错误。当我调试它时，问题出在 if 条件下的平衡函数中：

```
if (temp->Parent!=NULL && (temp->Parent)->Parent!=NULL)
       temp=temp->Parent;
       temp=temp->Parent; 
```

但我无法弄清楚什么是错误的，因为只有当节点的父节点和祖父节点不为 NULL 时才能输入 if 条件。

# user-interface - 软件测试：GUI 的等价类？

> ID：15227721
> 
> 赞同：0
> 
> 时间：2013-03-05T15:30:47.273
> 
> 标签：user-interface, testing, button, textfield, equivalence-classes

我有一个程序需要制作等价类并进行边界值分析。我的问题是，我们在课程中讨论的只是为直接输入整数或字符串的程序创建等价类。

该程序是一个带有日历的简单待办事项列表。用户唯一的键盘输入是任务的字符串和提醒时间的整数。

我知道如何处理整数，但字符串似乎有一个我无法找到的荒谬的最大大小。该输入也可以有任何符号等。

该程序唯一的其他方面是让您选择日期的按钮和让您选择月份和年份的下拉菜单。

如何为按钮和下拉菜单创建等价类，更不用说边界值分析了？另外，您如何制作等价类并对似乎没有无效输入的字符串进行边界值分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:13:42.283

以下是一些与您的软件相关的示例（简单的待办事项列表）：

*   一些无效输入示例和可能的边界：

结束日期在开始日期之前，结束时间在开始时间之前，过去的待办事项（允许吗？过去多久以前？），范围之外的待办事项（我假设您将来有一个范围?) 同时开始和结束的任务、超出开始时间的提醒、过去的提醒、与开始时间重叠的提醒

*   按钮的无效输入（一些示例）：

例如，如果您的待办事项需要一个标题，那么当标题字段为空时，“添加”按钮不应该处于活动状态，因此如果您按下它，您将使用无效输入对其进行测试。当您拥有 UI 时，您会更容易想出更多示例，我只能猜测 :) 但总会有不同的条件启用或禁用 UI 元素。您可以从中派生边界值和等价类。

*   关于似乎没有无效输入的字符串的边界值分析：

总是有一些无效的输入，如果没有别的，一个空字符串可能是无效的，所以这已经给了你一个边界值（空字符串）。不同的字符集呢？或者以从右到左书写为特色的阿拉伯语言？

# atmosphere - 在 Atmosphere 中广播，要扩展哪个类？

> ID：15227725
> 
> 赞同：0
> 
> 时间：2013-03-05T15:30:55.367
> 
> 标签：atmosphere

我正在使用大气框架，并且正在运行在 ServletContextListener 中启动的线程。

我想广播这个线程放在上下文中的数据，但是我很困惑我必须扩展什么类来实现 ServletContextAttributeListener。

我目前正在扩展 OnMessage 类，但这似乎还不够。

```
public class SerialComInit implements ServletContextListener {
        //..
        private static final String SHUTDOWN_REQ = "SHUTDOWN";
        public void attributeAdded(ServletContextAttributeEvent event) {

            queue = (BlockingQueue<String>) event.getServletContext().getAttribute("serialPortData");

            //TODO Use jackson to generate JSON
            //TODO Implement SHUTDOWN command on server side
            //we always get a null here on first try that's why I added null check
            if (queue == null){
                System.out.println("Queue is empty");
            } else {
                String item;
                try {
                    //blocks while queue is empty
                    while ((item = queue.take()) != SHUTDOWN_REQ) {
                        System.out.println("*******WEB*******"+item+"*******");
                        //TODO Broadcast message to connected clients
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    System.out.println("queue error");
                    //e.printStackTrace();
                }
            }       
        }
   //..
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:23:31.030

我通过扩展 AbstractReflectorAtmosphereHandler 解决了我的问题。

在我的 ServletContextAttributeListener -> attributeAdded 调用它使用

```
MetaBroadcaster.getDefault().broadcastTo("/", "message"); 
```

# mysql - 将 Mysql 5.5 转储转换为 Mysql 5.0

> ID：15227730
> 
> 赞同：0
> 
> 时间：2013-03-05T15:31:10.763
> 
> 标签：mysql

我一直在尝试从 Mysql 5.0 转换 Mysql 5.5 转储，因为我的客户端服务器之一 mysql 无法升级到超过 5.0 。有人可以提供一种将 mysql 5.5 转储转换为 5.0 转储的方法吗

# java - 使用正则表达式从字符串中获取不带扩展名的 Filname

> ID：15227737
> 
> 赞同：2
> 
> 时间：2013-03-05T15:31:32.590
> 
> 标签：java, regex, filenames, extraction

我有一个包含文件 URL 的字符串。从该字符串中，我想只获取不带扩展名的文件名。

例如：

```
http://path/Lists/Test/Attachments/1/Document Test.docx 
```

从那个例子我想回来：`Document Test`

我已经有以下模式：

```
(?<=\/)(\w+)(?=\.\w+(\?.*)*$) 
```

但是如果文件名包含空格，它就不起作用......我怎样才能改变这个模式，它更灵活？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:06:50.840

要仅捕获扩展名之前的字符（不限制文件名可能包含的字符），请使用以下命令：

```
/[^/]*(?=\.[^.]+($|\?))/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T15:35:01.993

不必要时不要使用正则表达式。在这种情况下，和之间`lastIndexOF` `/`的子字符串`.`会给你你想要的。

```
String data = "Document Testdocx";

int start = data.lastIndexOf('/')+1;
int end = data.lastIndexOf('.');
if (end == -1) end = data.length();

System.out.println(data.substring(start , end)); 
```

但是如果你真的必须使用正则表达式，你可以试试这个模式：`(?<=/|^)[^./]+(?=\\.\\w+$|$)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T15:41:40.697

尝试

```
 String s = "http://path/Lists/Test/Attachments/1/Document Test.docx";
    s = s.replaceAll(".+/(.+)\\..+", "$1");
    System.out.println(s); 
```

输出

```
Document Test 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:45:45.943

```
([^?]+)\/([^/?]+)(\.[^.\?]+)(\?.*|)$ 
```

即使 URL 看起来像

```
http://example.com/foo/bar/baz blah.html?params=true 
```

这可以找到文件名（没有目录）和扩展名。

可能更好的是使用[java.net.URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)解析 URL ，并使用 URL.getPath()。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T15:33:29.863

而不是`(?<=/)(\w+)(?=.\w+(\?.)$)`，尝试`(.+?)(\.[^.]*$|$)`

# python - 在python中的列表之间替换元素

> ID：15227744
> 
> 赞同：1
> 
> 时间：2013-03-05T15:31:50.383
> 
> 标签：python

我目前正在尝试用另一个列表中的元素替换 2D 列表中的元素，以实现我在 python 中制作的游戏。这是我到目前为止所拥有的：

```
listA = [1, 3, 5]
listB = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]

for a in range(len(listA)):
    alpha = (a/3) #number of rows in listB
    beta = (a/3) #number of columns in listB
    listB[alpha][beta] = 123 
```

当我这样做时，我得到

```
[[123, 123, 123], [0, 0, 0], [0, 0, 0]] 
```

而不是我想要的参数，

```
[[0, 123, 0], [123, 0, 123], [0, 0, 0]] 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:42:45.083

而不是遍历 listA 的索引 using `for a in range(len(listA)):`，您应该遍历 listA 的元素 using`for a in listA:`

假设 A 中的索引转换为 B 中的坐标，如下所示：

```
0 1 2
3 4 5
6 7 8 
```

那么 beta，也就是 B 对应的列`a`，应该计算为`a%3`，而不是`a/3`。

```
listA = [1, 3, 5]
listB = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]

for a in listA:
    #two slashes is integer division, not a comment, 
    #despite markup's color scheme
    alpha = a//3 
    beta = a%3
    listB[alpha][beta] = 123

print listB 
```

输出：

```
[[0, 123, 0], [123, 0, 123], [0, 0, 0]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:43:38.047

如果你使用`numpy`这很容易：

```
import numpy as np

A = np.array([1,3,5])
B = np.zeros((3,3))

B.flat[A] = 123

print B 
```

出去：

```
[[   0\.  123\.    0.]
 [ 123\.    0\.  123.]
 [   0\.    0\.    0.]] 
```

请注意，`.flat`所做的是返回列表的“扁平化”版本：

```
[   0\.  123\.    0\.  123\.    0\.  123\.    0\.    0\.    0.] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:44:30.320

```
>>> for a in range(len(listA)):
...     alpha = (listA[a]/3) #number of rows in listB
...     beta = (listA[a]%3) #number of columns in listB
...     listB[alpha][beta] = 123
... 
>>> listB
[[0, 123, 0], [123, 0, 123], [0, 0, 0]] 
```

您必须使用 listA 中的元素，否则使用范围生成的索引是没有意义的。此外，您应该做一些数学运算以正确获取行和列索引

编辑：我建议你看看凯文的回答和解释，我的只是对你的代码的快速更正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:46:12.877

```
>>> listA = [1, 3, 5]
>>> listB = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]
>>> listB_unwrapped = list(chain(*listB))
>>> for i in listA:
    listB_unwrapped[i] = 123

>>> listB = zip(*[iter(listB_unwrapped)]*3)
>>> listB
[(0, 123, 0), (123, 0, 123), (0, 0, 0)]
>>> 
```

# networking - 短距离的 TCP 或 UDP

> ID：15227745
> 
> 赞同：0
> 
> 时间：2013-03-05T15:31:52.313
> 
> 标签：networking, tcp, udp

我希望创建一个小程序来传输数据（字符串、数字数据、文档、图像和音频）。我读过UDP不检查数据包是否到达目的地（因此很容易丢失数据），而TCP会重新发送丢失的数据包。

如果我在通过交叉电缆以太网直接连接的两台计算机之间传输数据，是否会出现大的数据丢失问题（使用 UDP）？我认为不会有，因为数据只传输了几米，并且没有通过任何其他硬件，例如路由器/服务器。

*我几乎没有做过网络编程，所以这是一个短暂的冒险，而不是使用记忆棒/FTP/文件共享等来传输数据。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:40:43.943

听起来您的数据无法处理任何丢失的数据包，因此除非您要对数据进行校验和并验证所有内容是否通过，否则请使用 TCP。

如果数据包可能会丢失，那么您必须计划它们会丢失或以其他方式计划您的数据丢失。

编辑：

距离肯定会影响数据包的丢失，如果电缆足够长，您将经历 100% 的丢失。现在的问题是，您是否会看到在以太网规格范围内的电缆长度的损耗差异。从理论上讲，如果您的电缆符合规格，那么您不会丢失数据包，但这并不能解决环境问题。您的电缆长度可能非常短，与具有严重数据损坏的交流电源线平行。

您可以接受或不接受数据丢失。如果没有，那么您可能应该使用 TCP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T22:34:45.863

使用 TCP。它经过精心设计，以确保按顺序完成和准确的数据传输。UDP 不是这些。数据包可能会被丢弃在路径上的任何地方，**包括发送计算机内部**。数据包可以出于任何原因重新排序 - UDP 不关心顺序。您可能*可以*忽略的是数据损坏的可能性 - 像这样的直接传输不会有这样的问题。

**但说真的，使用 TCP。**

# objective-c - 将 NSString 转换为 std::string

> ID：15227748
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:00.300
> 
> 标签：objective-c, nsstring, objective-c++, stdstring

我尝试将 NSString 传递给 C++ 函数，但我只得到第一个字母。这是代码：

```
#import <Foundation/Foundation.h>
#import <string>
int main(int argc, const char * argv[])
{

@autoreleasepool {
    NSString* objcString=@"test";
    std::string cppString([objcString cStringUsingEncoding:NSUnicodeStringEncoding]);
    NSLog(@"%@, %s",objcString, cppString.c_str()
          );

}
return 0;
} 
```

它给了我：

```
2013-03-05 10:22:15.362 TEST[1136:353] test, t 
```

感谢您的时间，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:37:13.893

编码错误。`NSUnicodeStringEncoding`返回一个 UTF-16 字符串。字符“t、e、s、t”适合一个字节 - 所以在 UTF-16 中，它们由一个非零字节和一个零字节表示。零`NSLog()`表示它是字符串的结尾。改为使用`NSUTF8StringEncoding`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:33:52.870

怎么样：

```
std::string cppString([objcString UTF8String]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:34:13.340

我在我的代码中普遍使用`NSUTF8Encoding`that `NSUnicodeEncoding`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:35:58.123

我认为这个答案可能会对您有所帮助：[如何将 NSString 转换为 std::string？](https://stackoverflow.com/questions/8001677/how-do-i-convert-a-nsstring-into-a-stdstring)

为了完整性：

```
NSString *foo = @"Foo";
std::string *bar = new std::string([foo UTF8String]); 
```

# c# - 如何在 Lucene.Net 中编辑文档的字段？

> ID：15227749
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:03.103
> 
> 标签：c#, lucene.net

我对编辑已被 Lucene 索引的条目有疑问。我正在创建信息文章的存储库，并且输入过程需要手动添加分类以简化后续搜索。如果出现错误，我希望能够更改字段而无需删除和重新添加。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:26:06.150

不，即使是 Lucene 4 的新更新工具实际上也会在幕后删除和重新添加。

# wcf - 创建 MessageHeader 而不序列化 XML 内容

> ID：15227750
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:04.400
> 
> 标签：wcf, serialization, soap, .net-3.5

我正在尝试将时间戳添加到我对第 3 方 Java Web 服务的请求的标头中，如下所示：

```
<wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-1120">
    <wsu:Created>2013-03-05T07:18:42.672Z</wsu:Created>
    <wsu:Expires>2013-03-05T07:23:42.672Z</wsu:Expires>
</wsu:Timestamp> 
```

我正在使用此代码-

```
Message request;    

// TESTVALUE
string content = "<Created>2013-03-05T07:18:42.672Z</Created><Expires>2013-03-05T07:23:42.672Z</Expires>";

MessageHeader msgHeader = MessageHeader.CreateHeader("Timestamp", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd", content);
request.Headers.Add(msgHeader); 
```

问题是它将我的内容序列化为此而我不知道如何解决这个问题-

```
 <Timestamp xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         &lt;Created&gt;2013-03-05T07:18:42.672Z&lt;/Created&gt;&lt;Expires&gt;2013-03-05T07:23:42.672Z&lt;/Expires&gt;
    </Timestamp> 
```

我尝试添加两个`XElement`，但问题是我只能提供其中一个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:08:37.693

问题是 WCF 正在对您*在*标头中指定为内容的内容进行编码。您可以创建一个自定义的“时间戳”类来处理时间戳的内容，而不是使用字符串。您可能可以使用 a`DataContract`对其进行序列化，但最坏的情况是您必须在新类中使用自定义 XML 序列化。

# android - 如何再次跳过在 Flickr 中请求访问令牌？

> ID：15227754
> 
> 赞同：0
> 
> 时间：2013-03-05T15:32:16.200
> 
> 标签：android, flickr

我正在构建 flickr api 来上传照片！每次我运行我的应用程序时，它都会经历请求访问令牌的整个过程！我想如果用户已经授权了我的应用程序，那么她不需要再次授权它。我如何处理这种情况下的访问令牌以及如何处理过期访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:36:37.373

您可以做的是将访问令牌保存到您的共享首选项中。然后下次加载您的应用程序时，您可以从共享的偏好中读取它并在您的身份验证中使用它。如果事实证明令牌已过期，那么只需调用您获取令牌的方法并将其保存在过期的令牌上。

# ant - 如果在目录中找到文件，则 Ant 复制目录

> ID：15227756
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:21.720
> 
> 标签：ant

我一直在使用简单的副本从目录中抓取一个特定的文件：

```
<copy todir="target/failures">
    <fileset dir="target/reports" includes="**/*FAILED.txt"/>
</copy> 
```

现在，我想将包含此文件的整个文件夹复制到故障文件夹。目录结构如下所示：

```
target
    reports
        folder1
        folder2
        folder3
    failures 
```

因此，如果在文件夹 1 中发现故障，我想将整个内容复制到故障中，然后继续浏览剩余的文件夹。看起来应该很简单，但我似乎找不到内置任务来完成此任务，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:56:12.693

使用[条件](http://ant.apache.org/manual/Tasks/condition.html)来决定是否执行复制目标。

```
<project name="demo" default="copy">

    <fileset id="failures" dir="target/reports" includes="**/*FAILED.txt"/>

    <condition property="failures.found">
        <resourcecount refid="failures" when="greater" count="0" />
    </condition>

    <target name="copy" if="failures.found">
        <copy todir="target/failures" overwrite="true">
            <fileset id="failures" dir="target/reports"/>
        </copy>
    </target>

</project> 
```

# 更新

更强大和更灵活的解决方案使用[groovy ANT 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)：

```
<project name="demo" default="copy">

    <path id="build.path">
        <pathelement location="/path/to/task/jars/groovy-all-2.1.1.jar"/>
    </path>

    <target name="copy">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

        <fileset id="failures" dir="target/reports" includes="**/*FAILED.txt"/>

        <groovy>
            project.references.failures.each {
                def failFile   = new File(it.toString())
                def failFolder = new File(failFile.parent)

                ant.copy(todir:"target/failures/${failFolder.name}", overwrite:true) {
                    fileset(dir:failFolder)
                }
            }
        </groovy>
    </target>

</project> 
```

# html - 在 HTML5 页面上找不到 IE 8-9 进入怪异模式的原因

> ID：15227761
> 
> 赞同：0
> 
> 时间：2013-03-05T15:32:31.013
> 
> 标签：html, internet-explorer-8, internet-explorer-9, quirks-mode

这是 URL：[http](http://sdc.sciamanna.eu/) ://sdc.sciamanna.eu/ IE 8 和 9 进入 quirks 模式，我不知道为什么。

在过去的两个小时里，我一直在寻找解决方案，在我的 html 页面中逐行搜索 SO，在 Google 中，但我找不到导致 IE 进入怪癖模式的原因。

到目前为止我做了什么：

*   删除了 DOCTYPE 之前的 HTML 注释。
*   删除了所有条件 html 标签（现在回滚，因为没有任何改变），认为modernizr 可能会解决这个问题
*   `<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />`用我有验证问题替换了元`<?php header("X-UA-Compatible", "IE=edge,chrome=1");?>`数据（但再次回滚，因为这不是原因）
*   同时完成了上面所有的事情（这只是帮助我从 W3C 验证器那里获得了绿灯，这是值得的）
*   把我的头撞在桌子上几次：这，真的，没有帮助

真的，我无法摆脱这个问题。我不知道 IE10 是否也会发生这种情况，但我很确定它会发生。

**更新**

[此页面](http://demo.designmonstr.com/html/iblink/)（基于我的 WordPress 主题的 HTML 主题）有效。它甚至不使用 Modernizr，而只是“ [http://html5shim.googlecode.com/svn/trunk/html5.js](http://html5shim.googlecode.com/svn/trunk/html5.js) ”：我已经开始使用相同的脚本，但情况更糟，因为几乎没有正确渲染；modernizr 至少设法使大多数事情正常工作。但是默认的 html5shim 在原始主题中工作的事实，只能让我再次确认我的实现中一定有问题：我只是找不到什么。

两个主题（iBlink 和我的）都使用 HTML5 标签，但原来的主题完全没有问题，而我的，如您所见，有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:58:32.973

您正在使用`section`HTML 标记。这在 IE8 上不受支持，所以任何事情都可能发生 :) 虽然它仍然呈现，但我并不惊讶浏览器会退回到 Quirks 模式。您是否尝试将所有 HTML5 标记替换为 DIV 或设置`<meta http-equiv="X-UA-Compatible" content="IE=8" />`？

顺便提一句。您可以通过转到开发人员工具并将浏览器模式更改为 IE8 来轻松“模拟”IE8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:55:42.390

似乎它使用 Modernizr 的实际解决方案：我没有看到立竿见影的结果，可能是因为浏览器缓存。

# c# - 如何从另一个域 MSMQ 的一个域中存在的队列接收消息

> ID：15227763
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:34.633
> 
> 标签：c#, msmq

我们正在运行一个 Windows 服务，该服务应该从远程队列中获取消息。

远程队列存在于域**enterprise.org**中。

Windows 服务在本地帐户“.\user”下的域**dmz.enterprise.org中运行。**

该队列早先与 Windows 服务位于同一台服务器上，并且一切正常，但我们已被指示更改此设置。

对于我们的队列，我们​​设置了特定帐户的权限，enterprise\QUser，我想在从队列中提取消息时使用该权限。

我知道在同一个域内时可以使用 Impersonator...，但我们不是。作为进一步的输入，服务器不在同一个森林中。即 enterprise.org 和 dmz.enterprise.org 位于不同的森林中。

**编辑**我们正在使用私人队列。我们还尝试了*所有人*和*匿名登录*，完全控制，没有身份验证，仍然无法接收消息。**编辑**

**EDIT2** 从约翰的输入（下面的博客文章）我试着让它更清楚......

由于我们的 Windows 服务（在 dmz.enterprise.org 中）仅读取远程队列，因此从 enterprise.org 到 dmz.dustingroup.org 的单向信任应该足够了。那是对的吗？

进一步的输入；远程队列位于 W2012 服务器上的故障转移群集上。这可能对这个问题有任何重要意义吗？ **编辑2**

是否可以以某种方式以编程方式设置连接到远程队列时要使用的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:01:17.677

我相信你必须使用直接路径，但你不能那样创建队列。看到[这个](http://www.k2underground.com/blogs/chrisg/archive/2008/04/25/msmq-and-multiple-forests.aspx)

# codeigniter - CodeIgniter 分页 404

> ID：15227764
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:37.737
> 
> 标签：codeigniter, pagination, codeigniter-2, codeigniter-url, codeigniter-routing

我在这里检查了几个关于 CodeIgniter 中的分页的线程，但我还没有找到解决我的问题的方法。

我有一个位于 controllers/admin/index.php 的控制器类，名为“Index”，其中包含以下代码：

```
class Index extends CI_Controller {

    public function __construct() {

        parent::__construct();

        $this->load->helper("url");
        $this->load->helper( 'events_helper' );
        $this->load->helper( 'delegates_helper' );

        $this->load->model( 'admin/event_model' );
        $this->load->model( 'admin/delegate_model' );

        $this->load->library( 'pagination' );

    }

    public function index() {

        $config = array();
        $config['base_url'] = base_url() . 'admin';
        $config['total_rows'] = $this->event_model->record_count();
        $config['per_page'] = 2;
        $config['uri_segment'] = 2;

        $this->pagination->initialize( $config );

        $page = ( $this->uri->segment( 2 ) ) ? $this->uri->segment( 2 ) : 0;

        $data['paged_events'] = $this->event_model->get_paged_events( $config['per_page'], $page );
        $data['links'] = $this->pagination->create_links();

        $data['events'] = $this->event_model->get_events();
        $data['event_courses'] = $this->event_model->get_event_courses();
        $data['event_suppliers'] = $this->event_model->get_event_suppliers();
        $data['event_venues'] = $this->event_model->get_event_venues();
        $data['event_locations'] = $this->event_model->get_event_locations();
        $data['event_statuses'] = $this->event_model->get_event_statuses();
        $data['event_prices'] = $this->event_model->get_event_prices();
        $data['event_types'] = $this->event_model->get_event_types();
        $data['event_tutors'] = $this->event_model->get_event_tutors();
        $data['event_delegates'] = $this->event_model->get_event_delegates();
        $data['event_delegate_statuses'] = $this->event_model->get_event_delegate_statuses();

        $this->load->view( 'templates/admin/header', $data );
        $this->load->view( 'admin/index', $data );
        $this->load->view( 'templates/admin/footer' );

    }

} 
```

现在，如果我转到 localhost/cream/public_html/admin 会显示正确数量的结果，并且会呈现指向下一页的链接，但是当我单击下一步或转到第 2 或第 3 页时，我会收到 404 错误。

现在我尝试将我的基本网址更改为：

```
$config['base_url'] = base_url() . 'admin/index'; 
```

和：

```
$config['base_url'] = base_url() . 'admin/index/'; 
```

和：

```
$config['base_url'] = base_url() . 'admin/'; 
```

同时也将我的 uri_segment 分别更改为 1、2 和 3，但我得到了相同的结果。

我什至尝试过使用：

```
$route['admin/(:num)'] = 'admin/$1'; 
```

和：

```
$route['admin/(:num)'] = 'admin'; 
```

不过，我得到了 404 错误。

这些是我的“Event_Model”类中的模型函数：

```
 public function record_count() {

        $this->db->select_sum( 'event_active' );
        $this->db->from( 'events' );
        $this->db->where( 'event_active', 1 );
        $query = $this->db->get();
        $total_active_events = $query->row()->event_active;

        if( $total_active_events > 0 ) {

            return $total_active_events;

        }

        return false;

    }

    public function get_paged_events( $limit, $start ) {

        $this->db->limit( $limit, $start );
        $this->db->where( 'events.event_active = 1' );
        $this->db->order_by( 'events.event_start_date', 'asc' );
        $query = $this->db->get( 'events' );

        if( $query->num_rows() > 0 ) {

            foreach ( $query->result() as $row ) {

                $data[] = $row;

            }

            return $data;

        }

        return false;

    } 
```

我有点卡在这个问题上，希望能得到您的帮助。谢谢。

**编辑：添加 routes.php**

```
$route['default_controller'] = "index";
$route['404_override'] = '';
$route['admin/(:num)'] = 'admin/index/$1'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:39:10.063

`$route['admin/(:num)'] = 'admin/index/$1';`需要驻留`config/routes.php`- 您不能将路由添加到控制器方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:48:04.027

好的，我已经弄清楚发生了什么。

当访问除第一页之外的分页结果时，我位于 URI 'localhost/cream/public_html/admin/$1'，其中 $1 代表页码。

在我的 'Admin' 控制器代码中，在 index() 函数下，'$config['uri_segment']' 属性值需要设置为 2。仅此一项并不能解决问题，但它是正确的 URI 段.

接下来，我需要将以下 2 条路由添加到“routes.php”：

```
$route['admin'] = 'admin/admin';
$route['admin/:num'] = 'admin/admin'; 
```

第一条路由是因为我现在已将控制器类名更改为“Admin”并将其文件名更改为“admin.php”，所以我需要一个在用户位于以下 URI 时可以工作的路由：

```
localhost/cream/public_html/admin/ 
```

第二条路线是将页码重新路由到正确的控制器，现在是“管理员/管理员”。

就是这样。我的分页现在正在工作。

我现在需要做的就是让它更改“$limit”变量，以便可以通过下拉菜单动态更改它。我应该能够将下拉列表的值传递给 $_POST 并将其拉入我的 'get_paged_events();' 在我的模型中起作用。我会让你知道我是怎么过的。

为所有帮助的人干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T06:42:08.840

为避免分页中的**索引**，只需按照以下步骤操作

Step1：自定义/config/routes.php

```
 $route['controller/(:num)'] = "controller/index/$1";
   It convert your url www.yourdomian.com/controller/(number) to www.yourdomain.com/controller/index/(number) 
```

Step2：使用**$config['uri_segment'] = 2**自定义分页代码，如下所示

```
 $config['base_url'] = base_url().'controller/';
        $config['display_pages'] = TRUE;
        $config['first_link'] = 'First';
        $config['total_rows'] = (your total rows);
        $config['uri_segment'] = 2;
        $this->pagination->initialize($config);
        echo $this->pagination->create_links(); 
```

干杯..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:39:29.143

您的网络服务器上有 url 重写吗？如果没有，请尝试 localhost/path/to/codeigniter/index.php/admin。如果您想跳过 index.php，请阅读 mod_rewrite（如果您使用的是 apache）并查看 codeigniter 的用户指南以了解可能对生成站点内 url 有用的 site_url 函数。

# jpa - 休眠（JPA）键“PRIMARY”的重复条目“25-9”

> ID：15227767
> 
> 赞同：2
> 
> 时间：2013-03-05T15:32:49.563
> 
> 标签：jpa, duplicates, parent, many-to-one

我有一个关于亲子关系的应用程序。每个父母都有一组孩子（一对多），每个孩子都有一个父母（多对一）。在应用程序中，我有一个服务层，在那里我几乎做了以下事情：

```
 public void addChild() {
       parent = getParentFromDB();
       Child child = new Child();
       child.setParent(parent);
       saveChild(child);
       Set<Child> children = new HashSet<Child>();
       children.addAll(parent.getChildren());
       children.add(child);

       parent.setChildren(children); // notice this line here.

       saveParent(parent);
       doStuff(parent);
    } 
```

服务层是从外观调用的，外观是一个使用@Transactional 注释的常规 Spring bean。当我尝试调用该`addChild()`方法时，我得到以下结果：

```
2013-03-05 17:09:50,195 [qtp511931089-83] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2013-03-05 17:09:50,196 [qtp511931089-83] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Duplicate entry '25-9' for key 'PRIMARY'
2013-03-05 17:09:50,198 [qtp511931089-83] ERROR org.hibernate.engine.jdbc.batch.internal.BatchingBatch - HHH000315: Exception executing batch [Duplicate entry '25-9' for key 'PRIMARY']
2013-03-05 17:09:50.204:WARN:oejs.ServletHandler:/child/add
javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Duplicate entry '25-9' for key 'PRIMARY'
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1306) 
```

我确实在休眠状态下打开了 SQL 日志，似乎休眠状态调用了两次保存！！！如果我删除“//在此处注意此行”行，则一切正常-实体保存在数据库中，我可以在数据库中看到 25-9 关系。问题是在方法的最后我有 doStuff(parent); 与父母及其孩子做一些事情的方法，所以我不能删除“//在这里注意这一行”行

**编辑：** 这是在孩子中声明父母的方式：

```
@ManyToOne(fetch = FetchType.EAGER, targetEntity = ParentModel.class, cascade = { CascadeType.REMOVE })
@JoinTable(name = "PARENT_CHILDREN", joinColumns = @JoinColumn(name = "CHILD_ID"), inverseJoinColumns = @JoinColumn(name = "PARENT_ID"))
private ParentModel parent; 
```

这是在父级中声明子级的方式：

```
@OneToMany(fetch = FetchType.LAZY, targetEntity = ChildModel.class, cascade = { CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE })
@JoinTable(name = "PARENT_CHILDREN", joinColumns = @JoinColumn(name = "PARENT_ID"), inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
private Set<ChildModel> children; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:00:44.440

看来您只是缺少关系中的[mappedBy](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html#mappedBy%28%29)参数：

```
@OneToMany(mappedBy="parent", fetch = FetchType.LAZY, targetEntity = ChildModel.class, cascade = { CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE })
@JoinTable(name = "PARENT_CHILDREN", joinColumns = @JoinColumn(name = "PARENT_ID"), inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
private Set<ChildModel> children; 
```

# ios - 用多层图像替换 UISlider 默认拇指图像

> ID：15227768
> 
> 赞同：1
> 
> 时间：2013-03-05T15:32:50.647
> 
> 标签：ios, uislider

据我所知，iOS 中不存在多层图像。如果要显示叠加图像，请使用 UIImageViews。

如果 UISlider thumb 是一个图像视图，它会很容易做到，但是既然它是一个 UIImage 有没有办法用多层图像替换它？

# jqgrid - JqG rid-使用原始排序在本地重新加载

> ID：15227774
> 
> 赞同：2
> 
> 时间：2013-03-05T15:33:06.660
> 
> 标签：jqgrid, reload

我有一个加载一次 = true 的 jqgrid。jqgrid 加载正常。但是，单击导航栏中的重新加载图标时，不会保留排序顺序。我希望重新加载处理本地数据，而不是从服务器获取记录。这是我的代码

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function () {
    var mydata = [],
        grid = $("#list");
    var mainGridPrefix = "s_";

    grid.jqGrid({
        url: '${recordsUrl}',
        datatype: 'json',
        ignoreCase: true,
        mtype: 'GET',
        colNames: ['Global Search', 'serverId', 'DeviceName', 'Description', 'Console', 'OS', 'Business Unit', 'Model', 'Manufacturer', 'Serial Number', 'LifeCycle', 'Tier'],
        colModel: [{
            name: 'globalSearch',
            index: 'globalSearch',
            width: 50,
            hidden: true,
            searchoptions: {
                searchhidden: true
            }
        }, {
            name: 'serverId',
            index: 'serverId',
            width: 10,
            hidden: true
        }, {
            name: 'deviceName',
            index: 'deviceName',
            width: 50
        }, {
            name: 'serverDesc',
            index: 'serverDesc',
            width: 70
        }, {
            name: 'console',
            index: 'console',
            width: 50
        }, {
            name: 'groupName',
            index: 'groupName',
            width: 40
        }, {
            name: 'businessUnit',
            index: 'businessUnit',
            width: 30
        }, {
            name: 'model',
            index: 'model',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'manufacturer',
            index: 'manufacturer',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'serialNumber',
            index: 'serialNumber',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'lifeCycle',
            index: 'lifeCycle',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }, {
            name: 'tier',
            index: 'tier',
            width: 30,
            editable: true,
            editrules: {
                required: true,
                edithidden: true
            },
            hidden: true,
            editoptions: {
                dataInit: function (element) {
                    $(element).attr("readonly", "readonly");
                }
            }
        }],
        postData: {},
        rowNum: 10,
        rowList: [10, 20, 40, 60],
        height: 'auto',
        autowidth: true,
        rownumbers: true,
        pager: '#pager',
        sortname: 'deviceName',
        viewrecords: true,
        sortorder: "asc",
        caption: "Records",
        emptyrecords: "Empty records",
        idPrefix: mainGridPrefix,
        loadonce: true,
        loadComplete: function () {},
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            cell: "cell",
            id: "serverId"
        },
        subGrid: true,
        beforeProcessing: function (data) {
            var rows = data.rows,
                l = rows.length,
                i, item, subgrids = {};
            for (i = 0; i < l; i++) {
                item = rows[i];
                if (item.apps) {
                    subgrids[item.id] = item.apps;
                }
            }
            data.userdata = subgrids;
        },
        subGridRowExpanded: function (subgridDivId, rowId) {
            var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
                pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId),
                subgrids = $(this).jqGrid("getGridParam", "userData");

            $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
            $subgrid.jqGrid({
                datatype: "local",
                data: subgrids[pureRowId],
                colNames: ["App Id", "Desc"],
                colModel: [{
                    name: "appId"
                }, {
                    name: "applicationDesc"
                }],
                sortname: "applicationDesc",
                height: "100%",
                rowNum: 10000,
                autoencode: true,
                autowidth: true,
                jsonReader: {
                    repeatitems: false,
                    id: "appId"
                },
                gridview: true,
                idPrefix: rowId + "_"
            });
        }

    });

    $("#search").click(function () {
        var searchFiler = $("#filter").val(),
            f;

        if (searchFiler.length === 0) {
            grid[0].p.search = false;
            $.extend(grid[0].p.postData, {
                filters: ""
            });
        }
        f = {
            groupOp: "OR",
            rules: []
        };
        f.rules.push({
            field: "globalSearch",
            op: "cn",
            data: searchFiler
        });
        f.rules.push({
            field: "deviceName",
            op: "cn",
            data: searchFiler
        });
        grid[0].p.search = true;
        $.extend(grid[0].p.postData, {
            filters: JSON.stringify(f)
        });
        grid.trigger("reloadGrid", [{
            page: 1,
            current: true
        }]);
    });

    grid.jqGrid('navGrid', '#pager', {
        edit: false,
        add: false,
        del: false,
        search: true,
        view: true
    }, {}, {}, {}, { // search
        sopt: ['cn', 'eq', 'ne', 'lt', 'gt', 'bw', 'ew'],
        closeOnEscape: true,
        multipleSearch: true,
        closeAfterSearch: true
    }, { // vew options
        beforeShowForm: function (form) {
            $("tr#trv_id", form[0]).show();
        },
        afterclickPgButtons: function (whichbutton, form, rowid) {
            $("tr#trv_id", form[0]).show();
        }
    });

});
//]]> 
```

# javascript - Javascript html5 canvas 随机切换语句

> ID：15227778
> 
> 赞同：1
> 
> 时间：2013-03-05T15:33:22.153
> 
> 标签：javascript, html, canvas, switch-statement

我正在尝试随机选择其中包含值的语句，该语句从精灵表中的某个点绘制。这是我拥有的当前代码。

```
 this.asteroid = Math.floor(Math.random()*4);
switch(this.asteroid)
    {
    case 1:
        this.srcX = 0;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;
    case 2:
        this.srcX = 32;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;  
    case 3:
        this.srcX = 64;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;
    case 4:
        this.srcX = 0;
        this.srcY = 565;
        this.width = 62;
        this.height = 60;
        break;
    } 
```

然后我稍后会绘制它选择的值。

问题我只有绘制紫色/灰色小行星，目前是案例 2 和 3。我在主屏幕上设置了一个字体，告诉我它首先绘制哪个案例并刷新，直到它显示 1 或 4 但它仍然绘制 2和 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:41:22.113

您的代码的方式是，它当前生成数字 0、1、2 和 3。所以您应该看到`case 1:`出现了一些时间，但从来没有`case 4:`。要解决此问题，只需调整您的案例。

就个人而言，我会重写这段代码如下：

```
var srcX = [0,32,64,0],
    srcY = [528,528,32,565],
    width = [32,32,32,62],
    height = [33,33,33,60],
    rand = Math.floor(Math.random()*4);
this.srcX = srcX[rand];
this.srcY = srcY[rand];
this.width = width[rand];
this.height = height[rand]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:40:08.707

```
this.asteroid = Math.floor(Math.random()*4); 
```

应该是 `this.asteroid = Math.floor(Math.random()*5)+1;`// 这样你就可以计算`case 4`和“跳”在`case 0`

在控制台中查看：http: [//jsbin.com/ulirom/3/](http://jsbin.com/ulirom/3/)

# ruby-on-rails-3 - 运行 cap deploy 时出错：cold

> ID：15227790
> 
> 赞同：1
> 
> 时间：2013-03-05T15:33:44.507
> 
> 标签：ruby-on-rails-3, amazon-ec2, capistrano

我在运行 cap deploy:cold 后出现以下错误，在 amazon ec2 中部署我的 rails 应用程序

```
failed: "/bin/bash -l -c 'cd /mnt/Best-production/releases && tar xzf       /tmp/20130305142552.tar.gz && rm /tmp/20130305142552.tar.gz'" on db01.best.com,app01.best.com,web01.best.com 
```

此外，当我决定继续创建 web_tools {ALIAS=tools ROLES=web_tools cap Rubber:create} 时，我收到以下错误

```
Rubber[ERROR]: Unable to read rubber configuration from ./config/rubber/rubber.yml
/usr/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): did not find expected key while parsing a block mapping at line 2 column 1 (Psych::SyntaxError) 
```

请帮忙。我被困在这里

我跟着 railscast [http://railscasts.com/episodes?utf8=%E2%9C%93&search=ec2](http://railscasts.com/episodes?utf8=%E2%9C%93&search=ec2)信了

问题2。

我需要 ec2 中的操作系统实例才能成功运行橡胶吗？

# algorithm - 优化/改进 Haskell 代码以列出子序列频率

> ID：15227793
> 
> 赞同：1
> 
> 时间：2013-03-05T15:33:49.690
> 
> 标签：algorithm, haskell

我编写了下面的代码来列出列表列表的子序列频率（结果包括子序列和出现子序列的列表的索引）。有没有人有任何建议如何使它更简洁和/或高效？

样本输出：

*Main> combFreq [[1,2,3,5,7,8],[2,3,5,6,7],[3,5,7,9],[1,2,3,7, 9],[3,5,7,10]]
[([3,5],[0,1,2,4]),([2,3],[0,1,3]),([ 3,5,7],[0,2,4]),([5,7],[0,2,4]),([2,3,5],[0,1]),([ 1,2],[0,3]),([1,2,3],[0,3]),([7,9],[2,3])]

```
import Data.List
import Data.Function (on)

--[[1,2,3,5,7,8],[2,3,5,6,7],[3,5,7,9],[1,2,3,7,9],[3,5,7,10]]

tupleCat x y = (fst x, sort $ nub $ snd x ++ snd y)
isInResult x result = case lookup x result of
                        Just a  -> [a]
                        Nothing -> []

sInt xs = concat $ sInt' (csubs xs) 0 (length xs) where
    csubs = map (filter (not . null) . concatMap inits . tails)
    sInt' []     _     _       = []
    sInt' (x:xs) count origLen = 
        let result = (zip (zip (replicate (length xs) count) [count+1..origLen]) 
                 $ map (\y -> intersect x y) xs)
        in concatMap (\x -> let a = fst x in map (\y -> (y,a)) (snd x))
                 result : sInt' xs (count + 1) origLen

concatResults [] result     = result 
concatResults (x:xs) result = 
    let match = isInResult (fst x) result 
        newX  = (fst x, [fst $ snd x, snd $ snd x])
    in  if not (null match)
        then let match'    = (fst x, head match)
                 newResult = deleteBy (\x -> (==match')) match' result
             in concatResults xs (tupleCat match' newX : newResult)
        else concatResults xs (newX : result)

combFreq xs =
  filter (\x -> length (fst x) > 1)
  $ reverse $ sortBy (compare `on` (length . snd)) $ concatResults (sInt xs) [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:37:15.040

这就是我将如何去做。我没有比较它的性能，它肯定是幼稚的。它枚举每个列表的所有连续子序列并将它们收集到一个`Map`. 它应该满足您更简洁的要求。

```
import Data.List as L
import Data.Map (Map)
import qualified Data.Map as M

nonEmptySubs :: [a] -> [[a]]
nonEmptySubs = filter (not . null)
             . concatMap tails
             . inits

makePairs :: (a -> [a]) -> [a] -> [(a, Int)]
makePairs f xs = concat $ zipWith app xs [0 .. ]
    where app y i = zip (f y) (repeat i)

results :: (Ord a) => [[a]] -> Map [a] [Int]
results =
    let ins acc (seq, ind) = M.insertWith (++) seq [ind] acc
        -- Insert the index at the given sequence as a singleton list
    in foldl' ins M.empty . makePairs nonEmptySubs

combFreq :: (Ord a) => [[a]] -> [([a], [Int])]
combFreq = filter (not . null . drop 1 . snd) -- Keep subseqs with more than 1 match
         . filter (not . null . drop 1 . fst) -- keep subseqs longer than 1
         . M.toList
         . results 
```

请注意，此版本将给出相同的定性结果，但顺序不同。

我最大的建议是更多地分解事物并利用一些标准库中的内容来完成繁琐的工作。请注意，我们可以将大量工作分解为单独的阶段，然后组合这些阶段以获得最终功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:37:13.890

如果您的所有列表都在增加（就像在您的示例中一样），则以下内容应该有效（不是美女，因为我是 Haskell 新手；非常欢迎对如何改进发表评论）：

```
import Control.Arrow (first, second)

compFreq ls = cF [] [] ls
  where cF rs cs ls | all null ls = rs
                    | otherwise   = cF (rs++rs') (cs'' ++ c ++ cs') ls'
          where m = minimum $ map head $ filter (not . null) ls
                ls' = map (\l -> if null l || m < head l then l
                                                         else tail l) ls
                is = map snd $ filter ((==m) . head . fst) $ filter (not . null . fst) $ zip ls [0,1..]
                c = if atLeastTwo is then [([m], is)] else []
                fs = filter (\(vs, is') -> atLeastTwo $ combine is is') cs
                cs' = map (\(vs, is') -> (vs++[m], combine is is')) fs
                cs'' = map (second (filter (not . (`elem` is)))) cs
                rs' = filter ok cs'
                combine _ [] = []
                combine [] _ = []
                combine (i:is) (i':is') | i<i' = combine is (i':is')
                                        | i>i' = combine (i:is) is'
                                        | i==i' = i:combine is is'
                atLeastTwo = not . null . drop 1
                ok (js, ts) = atLeastTwo js && atLeastTwo ts 
```

这个想法是通过始终查看最小值 m 来处理列表，将其从所有列表中删除以获得 ls'。索引列表告诉 m 被删除的位置。内部工作函数 cF 有两个额外的参数：到现在的结果列表 rs 和当前子序列的列表 cs。如果最小值至少出现两次，则最小值开始一个新的子序列 c。cs'是以m结尾的子序列，cs''是没有m的子序列。新结果 rs' 都包含 m 作为最后一个元素。

您的示例的输出是

```
[([1,2],[0,3]),([2,3],[0,1,3]),([1,2,3],[0,3]),([3,5],[0,1,2,4]),([2,3,5],[0,1]),([5,7],[0,2,4]),([3,5,7],[0,2,4]),([7,9],[2,3])] 
```

# objective-c - 如何在“UILabel”中仅显示随机“填充”的文本字段？

> ID：15227804
> 
> 赞同：0
> 
> 时间：2013-03-05T15:34:15.680
> 
> 标签：objective-c

我有一个工作的随机应用程序。它由 10 `UITextFields`、 a`UILabel`和 a组成`UIButton`。基本思路是在用户名中填写`UITextFields`并通过`UIButton`随机选择一个名称。它运作良好，但如果这个场合只有 6 个用户名加入，那么其他 4 个`UITextFields`呢？如何将它们排除在随机列表或数组中？我希望你能帮助我，谢谢你调查这个问题！

这是我的 m 文件：

```
 #import "ViewController.h"

    @interface ViewController ()
    - (IBAction)random:(id)sender;
     @property (weak, nonatomic) IBOutlet UITextField *naam;
    @property (weak, nonatomic) IBOutlet UILabel *label;
    @property (weak, nonatomic) IBOutlet UITextField *naam2;
    @property (weak, nonatomic) IBOutlet UITextField *naam3;
    @property (weak, nonatomic) IBOutlet UITextField *naam4;
    @property (weak, nonatomic) IBOutlet UITextField *naam5;
    @property (weak, nonatomic) IBOutlet UITextField *naam6;
    @property (weak, nonatomic) IBOutlet UITextField *naam7;
    @property (weak, nonatomic) IBOutlet UITextField *naam8;
    @property (weak, nonatomic) IBOutlet UITextField *naam9;
    @property (weak, nonatomic) IBOutlet UITextField *naam10;

    @end  

    @implementation ViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (IBAction)random:(id)sender 
    {
        int text;
        text = rand() %10;
        switch (text) {
              case 0:
                    self.userName = self.naam2.text;
                    break;
              case 1:
                    self.userName = self.naam.text;
                    break;
              case 2:
                    self.userName = self.naam3.text;
                    break;
              case 3:
                    self.userName = self.naam4.text;
                    break;
              case 4:
                    self.userName = self.naam5.text;
                    break;
              case 5:
                    self.userName = self.naam6.text;
                    break;
              case 6:
                    self.userName = self.naam7.text;
                    break;
              case 7:
                    self.userName = self.naam8.text;
                    break;
              case 8:
                    self.userName = self.naam9.text;
                    break;
              case 9:
                    self.userName = self.naam10.text;
                    break;
              default:
                    break;
         }

         NSString *nameString = self.userName;
         if ([nameString length] == 0 ) {
             nameString = @"Wie?";
         }

         NSString *random = [[NSString alloc]
                    initWithFormat: @"De Bob is....%@!", nameString];
         self.label.text = random;
    }

    - (BOOL)textFieldShouldReturn: (UITextField *)theTextField {
        if (theTextField == self.naam) {
            [theTextField resignFirstResponder];
        } else if (theTextField == self.naam2) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam3) { 
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam4) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam5) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam6) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam7) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam8) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam9) {
            [theTextField resignFirstResponder];   
        } else if (theTextField == self.naam10) {
            [theTextField resignFirstResponder];   
        }
        return YES;
    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:53:50.077

只需执行 for in 循环并检查该标签的文本是否为空，如下所示： int count = 0; for(UITextField* textf in [self.view subviews]{ if(textf isKindOfClass:[UITextField class]){ if(![textf text] isEqualToString:@""]{ [textf setText:@"Some string"]; textf .tag = 计数；计数++；} ] }

在此之后，只需获取一个随机数： NSUInteger index = arc4random() % [array count];

如果你想得到十个随机数，只需将其放入 for 循环中即可。

```
for(int i = 0; i < 10; i++){
    NSUInteger index = arc4random() % [array count];
    //Loop through text fields again and get the one with the tag that matches the random number
} 
```

for in 循环非常方便，因为您不必像普通的 for 循环那样拥有迭代器，而且您也不必知道要迭代的对象的数量。这一切都为你处理好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:41:48.827

我可以建议您首先根据实现创建一个`NSMutableArray`or ，仅包含已填写用户名的值，然后用于从数组中选择一个名称。`NSArray``randomIndex = arc4random() % [theArray count];`

这是一个可能的实现，但不是最优的：

```
NSMutableArray *usernamesList = [NSMutableArray array];

for (UIView *view in [self.view subviews]) {
    if ([view isKindOfClass:[UITextField class]]) {
        UITextField *textField = (UITextField *)view;
        if (![textField.text isEqualToString:@""]) {
            [usernamesList addObject:view];
        }
    }

    NSUInteger index = arc4random() % [usernamesList count];
    NSLog(@"The chosen name is %@", [usernamesList objectAtIndex:index]);
} 
```

为了能够仅通过用户名的文本字段进行迭代，更好的解决方案是使用`IBOutletCollection`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:37:32.147

您应该创建 UITextField 运行时。

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 200, 300, 40)];
textField.borderStyle = UITextBorderStyleRoundedRect;
textField.font = [UIFont systemFontOfSize:15];
textField.placeholder = @"enter text";
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.keyboardType = UIKeyboardTypeDefault;
textField.returnKeyType = UIReturnKeyDone;
textField.clearButtonMode = UITextFieldViewModeWhileEditing;
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
textField.delegate = self;
[self.view addSubview:textField]; 
```

这将确保那里没有不必要的文本字段。

或者，在 viewDidLoad 方法中将每个隐藏设置为 YES。并根据玩家的数量将隐藏设置为 NO。

# symfony - sylius_sales.classes 下无法识别的选项项

> ID：15227805
> 
> 赞同：0
> 
> 时间：2013-03-05T15:34:17.723
> 
> 标签：symfony, sylius

我正在尝试安装 sylius，但在作曲家更新后清除缓存时出现此错误

sylius_sales.classes 下无法识别的选项项

抱歉 - 我的意思是 sylius 沙盒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:59:12.357

您不应该更新供应商。它们被故意锁定在 composer.lock 文件中，以免因更改而中断。大多数捆绑包中都有一些 BC Break 更改。原因是沙盒不再开发，一切都移到了[https://github.com/Sylius/Sylius](https://github.com/Sylius/Sylius)。

此错误选项背后的原因已重命名为`order_item`.

# mysql - MySQL 文本类型并使用更大的尺寸。它有效率吗？

> ID：15227806
> 
> 赞同：8
> 
> 时间：2013-03-05T15:34:22.587
> 
> 标签：mysql, database, field

我正在设计一个数据库来存储文档。其中一些文档的大小刚好超过 64kb，没有一个大于 128kb。看来我唯一的办法是指定我的文本类型，`MEDIUMTEXT`其最大大小为 16MB。对于我正在做的事情来说，这似乎有点过头了，尤其是因为我每天可能要存储一百个文档。我想我的问题是我是否会遇到性能下降，因为 MEDIUMTEXT 比 TEXT 大得多。我不太了解 MySQL 内部结构，不知道磁盘或内存上是否有一些奇怪的分配问题会回来咬我。当然，我们可以在像 MongoDB 这样的现代工具中完成这一切，但我无法对此表示赞同。:-(
万一其他人在未来遇到这个问题，我想我会记下 MySQL 中的文本类型及其最大大小以供参考。

```
TINYTEXT 256 bytes
TEXT 65,535 bytes ~64kb
MEDIUMTEXT 16,777,215 bytes ~16MB
LONGTEXT 4,294,967,295 bytes ~4GB 
```

任何人的建议将不胜感激。珍妮

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T15:39:11.690

从[MySQL 的存储要求文档](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)来看，您似乎不需要太担心使用更长的文本类型；

> L 表示给定字符串值的实际长度（以字节为单位）。
> ...
> 例如，存储 MEDIUMTEXT 值需要 L 个字节来存储值加上三个字节来存储值的长度。

换句话说，mediumtext 不需要存储每个值的最大最大长度，它只需要您要存储的数据的实际长度 + 3 个字节。

# python - 在 python 中侦听 UDP 数据包时遇到问题 - socket.error: [Errno 24] 打开的文件太多

> ID：15227807
> 
> 赞同：2
> 
> 时间：2013-03-05T15:34:25.457
> 
> 标签：python, network-programming, udp, pygame

我对 python 比较陌生，而且我已经被这个问题困扰了很长一段时间了。

基本上，我正在制作的模块将在游戏中使用（使用模块 pygame），但是我不想接收使用 Pygame 模块从键盘按下的键，而是希望通过 UDP 发送的网络接收这些键。

我创建了一个模块，它将在单独的线程上侦听已定义的 UDP 端口，并返回按下的键，以便在游戏中任何需要调用的地方使用。

我写的代码工作了一段时间，但是当它运行很慢时，过了一会儿我收到以下错误消息：

```
Traceback (most recent call last):
  File "game.py", line 164, in <module>
  File "/usr/lib/python2.7/dist-packages/pygame/sprite.py", line 399, in update
  File "/home/globe/Desktop/Asteroids/sprites.py", line 41, in update
  File "/home/globe/Desktop/Asteroids/networkControlLatest.py", line 18, in getKeyPressed
  File "/home/globe/Desktop/Asteroids/networkControlLatest.py", line 8, in __init__
  File "/usr/lib/python2.7/socket.py", line 187, in __init__
socket.error: [Errno 24] Too many open files
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in apport_excepthook
ImportError: No module named fileutils

Original exception was:
Traceback (most recent call last):
  File "game.py", line 164, in <module>
  File "/usr/lib/python2.7/dist-packages/pygame/sprite.py", line 399, in update
  File "/home/globe/Desktop/Asteroids/sprites.py", line 41, in update
  File "/home/globe/Desktop/Asteroids/networkControlLatest.py", line 18, in getKeyPressed
  File "/home/globe/Desktop/Asteroids/networkControlLatest.py", line 8, in __init__
  File "/usr/lib/python2.7/socket.py", line 187, in __init__
socket.error: [Errno 24] Too many open files 
```

networkControlLatest.py 文件如下：

```
*****from socket import *
import threading
#Class to get key pressed UDP packet on a separate thread
class networkReceive(threading.Thread):
     def __init__(self,address):
         threading.Thread.__init__(self)
     self.address = address
     self.server_socket = socket(AF_INET, SOCK_DGRAM)
         self.server_socket.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
     self.server_socket.bind(self.address)
         self.recv_data = ''

     def run(self):
         self.recv_data, addr = self.server_socket.recvfrom(2048)

def getKeyPressed():
    address = ('129.11.148.65', 6005)
    thread = networkReceive(address)
    thread.start()
    thread.join(0.01)
        recv_data = thread.recv_data
    thread.server_socket.close()
    print recv_data
    return recv_data***** 
```

在 game.py 文件中调用它的示例如下：

```
keys = networkControlLatest.getKeyPressed()
        if keys == 'A':
            laser = sprites.Bullet(screen,Ship.angle,Ship.rect.center)
            bulletgroup.add (pygame.sprite.Group(laser))
            delay = 15 
```

游戏使用键盘运行良好，所以我知道它与网络方面的一些问题，我只是无法为我的生活弄清楚它到底是什么！任何帮助将不胜感激，我一直盯着这段代码太久了..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:46:43.297

您正在为每个按下的键使用一个新的套接字，然后运行一个线程来获取数据。在线程中生成套接字并将数据写入队列，然后从队列中读取 getkeyPresed()。

我的 2 美分。

编辑：正如@cfi 所说，您的问题主要是您从不关闭套接字并在每次调用时启动一个新套接字。按下多个键后，系统可用的文件描述符提升到极限，python 的 GIL 需要在线程之间移动，如果线程处于 I/O 等待状态，则等待 GIL 设置的操作数继续包含在内. 如果你想使用线程，你应该了解它在 Python 中是如何工作的，并阅读有关 GIL 在 python3 中的改进以管理线程滞后问题。对于您的问题，您应该设置一个套接字并准备线程以仅接收数据。

您有一个很棒的关于套接字的教程和一个易于检查的二元潮线程[示例](http://www.binarytides.com/python-socket-programming-tutorial/2/)

希望有帮助

# sql - 获取最后插入的 id

> ID：15227811
> 
> 赞同：1
> 
> 时间：2013-03-05T15:34:30.083
> 
> 标签：sql, sql-server

我正在使用 SQL 语句

```
INSERT INTO TableName (col1, col2, col3)
VALUES
(val1, val2, val3),
(val1, val2, val3),
(val1, val2, val3),
(val1, val2, val3) 
```

有没有办法获取所有新插入的行的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:42:24.837

是的 - 如果您使用的是 SQL Server **2005**或更高版本 - 使用该`OUTPUT`子句！

```
INSERT INTO TableName (col1, col2, col3)
OUTPUT Inserted.ID, Inserted.col1
VALUES
(val1, val2, val3),
(val1, val2, val3),
(val1, val2, val3),
(val1, val2, val3) 
```

这将为插入的所有新行输出`ID`and`col1`列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:43:33.847

你可以在你的中使用一个`OUTPUT`子句`INSERT`吗？

[http://blog.sqlauthority.com/2007/10/01/sql-server-2005-output-clause-example-and-explanation-with-insert-update-delete/](http://blog.sqlauthority.com/2007/10/01/sql-server-2005-output-clause-example-and-explanation-with-insert-update-delete/)

# c# - 在表单中输入的数据不会插入到数据表中

> ID：15227812
> 
> 赞同：1
> 
> 时间：2013-03-05T15:34:33.520
> 
> 标签：c#, .net, sql

我在数据表中看不到添加的数据，这是代码：

```
private void button1_Click(object sender, EventArgs e)
{
    string t1 = textBox1.Text;
    SqlCeConnection conn =
       new SqlCeConnection(@"Data Source=|DataDirectory|\Database1.sdf");
    conn.Open();
    SqlCeCommand cmdInsert = conn.CreateCommand();
    cmdInsert.CommandText = "INSERT TO table_name (Column1) VALUES (t1)";
    cmdInsert.ExecuteNonQuery();
    conn.Close();
} 
```

单击按钮后它不会插入数据表，它在 cmdInsert.ExecuteNonQuery() 上给我一个错误；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:36:03.727

因为你的查询没有参数化，所以你需要用单引号括起来，

```
cmdInsert.CommandText = "INSERT INTO table_name (Column1) VALUES ('" + t1 + "')"; 
```

上面的查询很容易出现`SQL Injection`，这里是如何参数化它：

```
cmdInsert.CommandText = "INSERT INTO table_name (Column1) VALUES (@t1)";
cmdInsert.Parameter.AddWithValue("@t1", t1);
cmdInsert.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:45:15.937

建议参数化`t1`。请参阅[SqlCeCommand.Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.parameters%28v=vs.100%29.aspx)
参数化值是学习的好习惯。

*来自链接的样本*：

```
SqlCeConnection conn = new SqlCeConnection("Data Source = MyDatabase.sdf;");
conn.Open();

SqlCeCommand command = conn.CreateCommand();

// Create and prepare a SQL statement
//
command.CommandText = "INSERT INTO Region (RegionID, RegionDescription) VALUES (@id, @desc)";

SqlCeParameter param = null;

// NOTE:
// For optimal performance, make sure you always set the parameter
// type and the maximum size - this is especially important for non-fixed
// types such as NVARCHAR or NTEXT; In case of named parameters, 
// SqlCeParameter instances do not need to be added to the collection
// in the order specified in the query; If however you use ? as parameter
// specifiers, then you do need to add the parameters in the correct order
//
param = new SqlCeParameter("@id", SqlDbType.Int);
command.Parameters.Add(param);

param = new SqlCeParameter("@desc", SqlDbType.NVarChar, 100);
command.Parameters.Add(param);

command.Parameters["@desc"].Size = 100; 
```

# asset-pipeline - 在 JRuby 中预编译 ejs 资产时无法复制 TrueClass

> ID：15227813
> 
> 赞同：3
> 
> 时间：2013-03-05T15:34:33.700
> 
> 标签：asset-pipeline, jrubyonrails, ejs

在 JRuby 中运行 rake assets:precompile 时，我得到以下回溯：

```
can't dup TrueClass
  (in C:/tripwire/app/assets/templates/alert_histories/index.jst.ejs.slim)
org/jruby/RubyKernel.java:1908:in `dup'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyProc.java:249:in `call'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyProc.java:249:in `call'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyKernel.java:1046:in `load'
Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [c:/jruby-1.7.2/bin/jruby.exe c:/jruby-1.7....]
org/jruby/RubyProc.java:249:in `call'
org/jruby/RubyProc.java:249:in `call'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyArray.java:1613:in `each'
org/jruby/RubyKernel.java:1046:in `load'
Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

有没有其他人遇到过这个？任何建议将不胜感激

以下是相关 gem 的版本：

```
 ejs (1.1.1)
 rails (3.2.8)
 rake (10.0.3)
 jruby 1.7.2 (Ruby 1.9) 
```

# asp.net-mvc-3 - ASP.NET MVC 视图模型未绑定到带有 DropDownList 的 HTTP Post

> ID：15227815
> 
> 赞同：17
> 
> 时间：2013-03-05T15:34:36.100
> 
> 标签：asp.net-mvc-3, razor, http-post, asp.net-mvc-viewmodel

我有一个问题，当我发布到控制器时，我失去了绑定，并且我的视图模型中的所有内容都是 NULL。这是我正在使用的代码：

**看法：**

```
@model ArticleCategoryVm

@using (@Html.BeginForm())
{
    @Html.HiddenFor(model => model.LanguageIdDisplayed)

    <label>Name: <span class="label label-important">Required</span></label>
    @Html.HmlValidationFor(model => model.CategoryName)
    @Html.TextBoxFor(model => model.CategoryName, new { maxlength = "255", placeholder = "Category Name", @class = "input-xlarge-fluid" })                  
    <span class="help-block">The is the name of the category and how it appears on the site.</span>

    <label>Language: <span class="label label-important">Required</span></label>
    @Html.HmlValidationFor(model => model.LanguageId)
    @Html.DropDownList("LanguageId", new SelectList(@Model.Languages, "Value", "Text"), "Select language", new { @class="input-xlarge-fluid" })
    <span class="help-block">This will be the language that the category is set too.</span>

    <label>Parent:</label>
    @Html.HmlValidationFor(model => model.CategoryParentId)
    @Html.DropDownList("CategoryParentId", new SelectList(@Model.CategoryParents, "Value", "Text"), new { @class = "input-xlarge-fluid" })
    <span class="help-block">Allows you to group the category under another existing category.</span>

    <label>Moderator Email: <span class="label label-important">Required</span></label>
    @Html.HmlValidationFor(model => model.ModeratorEmail)
    @Html.TextBoxFor(model => model.ModeratorEmail, new { maxlength = "255", placeholder = "Email Address", @class = "input-xlarge-fluid" })
    <span class="help-block">This is the moderator email for articles in this category.</span>

    <button type="submit" class="btn btn-duadua btn-small"><i class="icon-ok-3"></i> Add New Category</button>                      
} 
```

**视图模型：**

```
public class ArticleCategoryVm : BaseLayoutVm
{
    public int LanguageIdDisplayed;
    public List<ArticleCategoryItemVm> ArticleCategoryItemVms { get; set; }

    // Add Category Fields
    [Required]
    public string CategoryName;

    [EmailAttribute]
    [Required]
    public string ModeratorEmail;

    [Required]
    public int LanguageId;

    public int CategoryParentId;

    public List<SelectListItem> Languages { get; set; }
    public List<SelectListItem> CategoryParents { get; set; }
} 
```

**控制器：**

```
[HttpPost]
public ActionResult Categories(ArticleCategoryVm vm)
{
   // Code here
   if (ModelState.IsValid)
   {
   }

   ReDrawDropDowns(vm);
   return View(vm)
} 
```

为什么我的视图模型中的所有内容都为 NULL？我可以在使用 Chromes 工具时看到，在帖子中为字符串和整数发布了值...作为解决方法，我刚刚完成了以下操作以使代码正常工作：

**解决方法控制器：**

```
[HttpPost]
public ActionResult Categories(int LanguageIdDisplayed, string CategoryName, string ModeratorEmail, int LanguageId, int CategoryParentId)
{
    var vm = new ArticleCategoryVm()
    {
        CategoryName = CategoryName,
        LanguageIdDisplayed = LanguageIdDisplayed,
        ModeratorEmail = ModeratorEmail,
        LanguageId = LanguageId,
        CategoryParentId = CategoryParentId
    };

    if (ModelState.IsValid)
    {
    }

    ReDrawDropDowns(vm);
    return View(vm)
} 
```

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-05T16:48:13.653

看起来可能是因为[这个问题](https://stackoverflow.com/questions/11399375/get-set-used-in-viewmodel)中提到的属性和变量之间的差异。添加`{ get; set; }`到要绑定的所有变量。如该问题所述，我认为这是因为默认模型绑定器使用反射的方式。

过去我发现实际获取 ASP.NET MVC 源代码很有用，这样我就可以调试它并查看发生了什么。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-08-26T08:48:28.257

视图模型的另一个原因**是 NULL**：

*   *动作参数中模型的名称与视图模型的属性之一相同*

* * *

例子：

**模型：**

```
public class NewBookPageView{
  int blabla {get;set;}
  Book NewBook {get;set;} //NewBook is the same as newBook in action parameter
} 
```

**控制器：**

```
[HttpPost]
public ActionResult AddNewBook(NewBookPageView newBook)//newBook is the same as NewBook in view
{
   int temp = newBook.blabla;
   temp++;
   //...
} 
```

* * *

**提示：**这里相同的名称表示不区分大小写（*newBook与**NewBook*相同）

**提示：**在 MVC3 和 MVC4 中面临。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T15:37:26.467

要在 View 中建模绑定，您应该使用[strong-typed-html-helpers](http://weblogs.asp.net/scottgu/archive/2010/01/10/asp-net-mvc-2-strongly-typed-html-helpers.aspx)

代替

```
@Html.DropDownList("CategoryParentId", new SelectList(@Model.CategoryParents, "Value", "Text"), new { @class = "input-xlarge-fluid" }) 
```

到：

```
@Html.DropDownListFor(model => model.CategoryParentId, new SelectList(@Model.CategoryParents, "Value", "Text"), new { @class = "input-xlarge-fluid" }) 
```

# css - CSS：当 div 展开时，图像在 Safari 中移动

> ID：15227817
> 
> 赞同：0
> 
> 时间：2013-03-05T15:34:40.057
> 
> 标签：css, html

我在我的网站上实施了 ajax 搜索建议，它在 chrome 上运行顺畅。这就是它的外观，这就是它在 chrome 上的外观：

![在此处输入图像描述](../Images/fe8c541401d468ff7603c2724b4330d5.png)

但是，在 Safari 上，搜索图像会向下跳：

![在此处输入图像描述](../Images/a90fc124e2010995541d101bbdd26d0f.png)

这是我的 div 的 HTML：

```
<div class ='searchBox'>
<form>
<input id = 'searchInput' type = 'text' placeholder = 'Search'> 
<img id = 'goSearch' class ='sprites'/>
<div class = 'liveSearch'></div>
</form>
</div> 
```

这是我的CSS：

```
 .mainContainer .sideContainer .searchBox{
    margin-top:2%;
    background-color:rgb(188, 190, 192);
    position:relative;
    display:table;
    -moz-border-radius: 0.125em;
    -webkit-border-radius: 0.125em;
    padding-bottom:10%;
    width:100%;
    min-width:220px;
    letter-spacing: 0.0625em;
 }
 .mainContainer .sideContainer .searchBox #searchInput{
    letter-spacing: 0.0625em;
    background: rgb(241, 242, 242);
    color: rgb(109, 110, 113);
    font-size: 1em;
    -moz-border-radius: 0.125em;
    -webkit-border-radius: 0.125em;
    border:#aaaaaa 0.0625em solid;
    width:75%;
    padding-top:4px;
    padding-left:2px;
    height:21px;
    transition: all 0.25s ease-in-out;
    -webkit-transition: all 0.25s ease-in-out;
    -moz-transition: all 0.25s ease-in-out;
    box-shadow: 0 0 5px rgba(81, 203, 238, 0);
    -webkit-box-shadow: 0 0 5px rgba(81, 203, 238, 0);
    -moz-box-shadow: 0 0 5px rgba(81, 203, 238, 0);
    position:relative;
    min-width:75%;
    margin-top:5%;
    left:5%;
    font-family: 'utsaah';
 }
 .mainContainer .sideContainer .searchBox #goSearch{
    width:28px;
    height:28px;
    left:82%;
    margin-top:5%;
    background-position: -0px -0px;
    position:absolute;
    cursor:pointer;
 }
 .mainContainer .sideContainer .searchBox #goSearch:hover{
    background-position:-0px -38px;
 }
 .mainContainer .sideContainer .searchBox .liveSearch{
    text-decoration: none !important;
    color: rgb(188, 190, 192);
    width:73%;
    left:5.5%;
    position:relative;
  } 
```

我怎样才能让它不会跳来跳去？任何想法，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:44:59.483

我无法尝试，（我没有 osx safari）但我在其他浏览器早期遇到了几乎相同的问题，这解决了问题：

```
 #searchInput, #goSearch{
       position: static;
       display: inline-block; /*and this may needed */
       vertical-align: top; /*and this*/
       margin: 0px;
   } 
```

我认为这两个元素不需要绝对定位。如果这没有帮助，我删除此评论。这只是一个想法。

# wso2 - 使用 google/gmail 帐户对任何 wso2 组件进行 SSO

> ID：15227825
> 
> 赞同：0
> 
> 时间：2013-03-05T15:35:07.070
> 
> 标签：wso2, identity, federated-identity, wso2carbon

我使用 WSO2 尝试了基于 openID 的 SSO，它运行良好。我的用例需要同时使用 google/gmail 帐户以及应用程序发布的用户帐户来支持 SSO。能否将 WSO2 组件配置为依赖方，将 google 配置为 SSO 提供者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:56:57.717

我相信您需要的是一个自定义的 UserStoreManager，它将针对谷歌对用户进行身份验证。

身份服务器可以配置多个用户存储。

尽管 wso2 源代码当然有 LDAPReadWriteUserStoreManager 和其他一些实现，但我并没有太多看如何实现自定义 UserStoreManager。

# android - 钛内存管理

> ID：15227827
> 
> 赞同：3
> 
> 时间：2013-03-05T15:35:07.643
> 
> 标签：android, memory-management, titanium

我已经阅读了很多讨论如何在基于 Titanium 的 Android 移动应用程序中控制内存泄漏的网页。

我的情况是我正在构建一个应用程序，该应用程序使用用户可以在其中导航的多个级别的列表（实际上这些是 tableViews）。它使用一个窗口，当用户选择一个列表项时，会创建一个从右到左动画的新视图。我选择了这个选项，因为似乎不可能创建一个从右到左滑入所有平台的新窗口。

在每个视图中，都会创建一个 eventListener 来检查单击了哪个 tableRow，然后创建相应的子菜单并将其动画到屏幕中。

我注意到每次单击视图后内存使用量都在稳步增长，但我似乎无法确定内存泄漏的位置。

目前我正在检查主窗口以查看窗口是否已被动画化（然后 .left 属性在 320px 宽的设备上为 320）。然后我从窗口中删除这个视图，并将代理设置为空，使用：

```
for ( i = 0; i < win.children.length; i++) {
    if ( (win.children[i] != null) && (win.children[i].left == 320) ) {
        win.remove(win.children[i]);
        win.children[i] = null;
    }
} 
```

不过，它仍在增加内存使用量。这可能是因为每个新视图都包含一个表和一个事件侦听器，使用的函数包含：

```
var sub_table = Ti.UI.createTableView({top:'50dp',separatorColor: rowSeparatorColor});  
sub_table.setData(data);
sub_table.addEventListener('click', function(e) {
    create(e.rowData.data);
}); 
new_view.add(my_navbar);
new_view.add(sub_table);
return new_view; 
```

我必须单独删除它们还是在视图被破坏时它们被破坏？我必须手动删除它们，我该怎么做？

在更一般的说明中，我不知道如何确定内存使用的原因。有没有办法在某个时间获取内存中的所有对象和/或变量？有没有办法深入了解 Dalvik 工具包提供的内存使用情况？有没有获取所有全局变量或事件监听器的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:32:17.043

Titanium 应用程序中最常见的内存泄漏与保持变量引用有关。如果您在上下文中有一个上下文，则外部上下文的变量将被保留直到无效。如下所示。这可以在 Apple 的“Instruments”中通过过滤 TiUI 并观察视图数量和视图代理的增加来轻松观察到（如果您删除下面的所有“= null”行）。

```
var win = Ti.UI.createWindow();
win.open();

setInterval(function () {
    var view = Ti.UI.createView({
        backgroundColor: 'red',
        width: 300, height: 300,
        top: 100, left: 100
    });
    win.add(view);

    setTimeout(function () {
        fadeAwayAndRemove(view, win);
        view = null;
    }, 1000);
}, 2000);

function fadeAwayAndRemove(view, container) {
    var animation = {
        opacity: 0,
        duration: 300,
        transform: Ti.UI.create2DMatrix().scale(0.9, 0.9)
    };
    view.animate(animation, function () {
        container.remove(view);
        view = container = animation = null;
    });
} 
```

*   [https://gist.github.com/dawsontoth/933faac8ab8f31ab0c98](https://gist.github.com/dawsontoth/933faac8ab8f31ab0c98)

另请注意，在上面的示例中，如果我向要删除的“视图”添加了视图，我不需要一次一个地显式删除它们。确保您取消对它们的所有挥之不去的引用。然后，当视图被删除并无效时，GC 可以清理它，以及它的所有子视图。

这种做法将开始成为你的第二天性。但是当您第一次开始考虑它时，最好在您的应用程序中重复离散操作（转到一个屏幕，导航回前一个屏幕，转到同一屏幕，返回等等）以找到你失去记忆最多的地方。然后处理代码以消除流失。

有时可能会很艰难和令人沮丧，但坚持下去，我知道你会解决的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:09:02.277

我没有使用过 Android 内存管理器，只有 Apple Instruments 应用程序。

首先是看你的应用程序，而不是作为一个整体。我逐行检查了主窗口的代码，确保我消除了任何已知的内存问题。我能够在我的主窗口上获得对象的基线数量，并使用它与我的应用程序中的其他窗口进行比较。然后，我将在这些窗口之间转换并解决所有内存问题，期望看到我分配的对象数量每次都返回到我的基线。

例如，如果我打开我的主窗口，我希望分配 2 个按钮和 2 个标签。我转换到下一个窗口，它有 2 个按钮和 2 个标签，我希望看到这些对象的数量跳到 4 和 4。然后我回到我的主窗口并关闭另一个窗口，我希望看到 2额外的按钮和标签最终会被清理干净。这不是即时的，所以我刷新或观察以确保它们消失。

请记住，您可以注释掉大部分代码，看看它是否是罪魁祸首。例如，当我怀疑一段代码中存在泄漏时，我会注释掉该代码并查看对象实例的数量是否按预期增加和减少。

我发现如果我关闭一个窗口，如果我正确声明了所有分配的对象，它们最终都会被清理掉。我发现我的变量的 1-2 个示例缺少 'var' 关键字，所以我相信它们是在全局范围内声明的，所以我清理了它。

我在 Appcelerator 的论坛上发帖寻求帮助，这是我的帖子：http: [//developer.appcelerator.com/question/148246/profiling-and-cleaning-up-objects](http://developer.appcelerator.com/question/148246/profiling-and-cleaning-up-objects)

这篇文章有一些建议以及 Appcelerator 的视频链接，该视频讨论了调试您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:48:15.323

像这样的东西也会起作用吗？在这种情况下，我设置了侦听器，并将侦听器附加到表中。点击表后，监听器被移除，并使用 create() 方法创建一个新表。它有点递归地工作（create() 函数在单击表后调用自身），这让我感到怀疑。但它“应该”删除 eventListener，从窗口中删除视图并将其代理设置为零？

```
function create(i) {
    var listener = function(e) {
        win.removeEventListener('click', listener);
        win.remove(clickedview);
        clickedview = null;
        create(e.rowData.data);
    }
    var sub_table = Ti.UI.createTableView({top:'50dp',separatorColor: rowSeparatorColor});  
    sub_table.setData(data);
    sub_table.addEventListener('click', listener);
    new_view = populateView(i);
    new_view.add(sub_table);
} 
```

# javascript - EasyTabs + Slider 脚本 - Slider 不会初始化

> ID：15227830
> 
> 赞同：0
> 
> 时间：2013-03-05T15:35:14.683
> 
> 标签：javascript

我正在使用 EasyTabs ( [http://os.alfajango.com/easytabs](http://os.alfajango.com/easytabs) ) 来构建我的网站。我想添加一个滑块脚本以在最初不可见的选项卡之一中进行操作。选择选项卡时，滑块脚本不会激活。

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="js/jquery.ba-hashchange.js" type="text/javascript"></script>
  <script src="js/jquery.easytabs.js" type="text/javascript"></script> 
  <script src="js/jquery.slides.min.js"></script> 
```

这将启动 EasyTabs 脚本：

```
<script type="text/javascript">
$(document).ready( function() {
  $('#tab-container').easytabs();
});
</script> 
```

这将启动 Slider 脚本：

```
<script>
$(function() {
  $('#slides').slidesjs({
    width: 1000,
    height: 444,
    navigation: false,
    play: {
        interval: 2000,
        auto: true
    }
  });
});
</script> 
```

所有这些都在标题中。

```
</head> 
```

如何在单击包含它的 EasyTabs 选项卡时初始化该 Slider 脚本？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:07:24.517

在[不工作的 jQuery 选项卡](https://stackoverflow.com/questions/9022897/jquery-tabs-not-working)中，建议放置 jQuery.noConflict(); 就在文档准备功能之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T12:48:57.447

我在 Bootstrap 框架和我的图像滑块上遇到了同样的问题，滑块在选项卡之前加载其脚本并且其内容处于活动状态，导致滑块无法正常工作。是否有某种事件处理程序可以在选项卡打开时加载脚本？

```
<script src="https://code.jquery.com/jquery-1.12.3.min.js" integrity="sha256-aaODHAgvwQW1bFOGXMeX+pC4PZIPsvn2h1sArYOhgXQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous" defer></script>

<script type="text/javascript" defer>
    $(document).ready(function () {
        $('.slider').bxSlider({
            slideWidth: 214,
            minSlides: 1,
            maxSlides: 3,
            moveSlides: 1,
            slideMargin: 20
        });
    });
</script> 
```

[加载后的样子](http://i.stack.imgur.com/crn6j.jpg)

[当我打开控制台时它的外观图片，强制脚本重新加载](http://i.stack.imgur.com/jdUwh.jpg)

所有脚本都在正文的末尾，毕竟是 html 内容

# core-data - NSManagedObjects 是如何在内存中管理的

> ID：15227834
> 
> 赞同：1
> 
> 时间：2013-03-05T15:35:33.987
> 
> 标签：core-data, nsmanagedobject

如果多个 VC 使用不同的获取限制从数据库中获取数据，NSManagedObjects 是如何在内存中管理的。

例如，一个 VC 基于名称获取，并且只想在 tableview 中显示名称，因此仅在内存中保存来自获取的 NSManagedObjects 的名称数据，而不是对象的其余部分。

这允许将选定的数据保存在内存中，当多个 VC 一次保存相同的数据时，如何使用内存？每个引用都会有这些数据的副本，还是 NSManagedObjects 的支持数据是 Core-Data 中的单个条目？

如果是这样，Core-Data 是使用虚拟内存映射来按需读取这些单个实例，还是将实际数据作为副本加载到内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:41:03.557

不会有任何对象的副本。只要您使用相同的商店/上下文，就只有一个副本（称为唯一性的功能）。还有一种称为故障的东西，它有助于减少核心数据中的内存占用。
故障意味着具有未初始化 iVars.Fault 的托管对象的实例可以通过多种方式触发（即已初始化 ivars）。（在人际关系中特别有用）。在这里查看更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)

但据我了解，您不能只将托管对象的一个​​属性（如名称数据）保留在内存中。整个对象将在内存中。

# vsto - VSTO - 无法从外部程序集中获取对 Word.ApplicationFactory 的引用

> ID：15227845
> 
> 赞同：6
> 
> 时间：2013-03-05T15:36:08.583
> 
> 标签：vsto, integration-testing

## 问题

我们有一个 VSTO Word 插件，我们正在尝试使用它进行集成测试。

我们组织了以下3个项目：

*   VSTO项目
*   业务逻辑项目
*   测试项目

问题是在测试集成项目中，我们可以使用 new Microsoft.Office.Interop.Word.Application() 创建 word 的实例，但是我们无法获取 Microsoft.Office.Tools.Word.ApplicationFactory 的实例（VSTO 接口）。

有谁知道我如何在测试程序集中获得 VSTO ApplicationFactory 的实例？

## 以供参考

VSTO 项目调用业务逻辑项目传递

*   Microsoft.Office.Interop.Word.Application
*   Microsoft.Office.Tools.Word.ApplicationFactory

在业务逻辑项目中我们可以得到激活的Microsoft.Office.Interop.Word.Document，调用工厂传入的互操作文档方法GetVstoObject方法

```
public Microsoft.Office.Tools.Word.Document VstoDocument
{
    get { return _document.GetVstoObject(_factory); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T12:35:19.773

出于测试目的（使用 moq 或其他框架）可能会模拟接口。我知道在访问[设置 RTD 服务器所需的 Excel 界面](http://weblogs.asp.net/kennykerr/archive/2008/11/10/ExcelRTDServerinCS.aspx)时，您必须创建自己的界面版本，并使用正确的 Microsoft GUID 标记它们。也许同样的方法也适用于应用程序工厂接口？我看到微软在[这里发布了 GUID](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.applicationfactory.aspx)

# c - 在 C 中打印一个带有两位小数但没有尾随零的浮点数

> ID：15227851
> 
> 赞同：0
> 
> 时间：2013-03-05T15:36:25.777
> 
> 标签：c, casting, floating-point, printf

在 C 中是否有一种简单、快速的方法来转换或打印浮点数，以便输出具有两位小数的精度（不是更多），但如果有任何尾随零，它们会被删除？

例子：

```
100.456 -> 100.46
100.32 -> 100.32
100.7046 -> 100.7
100.00 -> 100 
```

假设我们有`float x;`并且我们执行`printf(%.2f, x)`. 这将满足第一个要求，因为任何浮点数都将以 2 位小数的最大精度打印。但问题是 for `x=100.00`or`100.7046`我们会分别得到`100.00`和`100.70`。

使用“g”作为格式也不能解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-05T15:39:35.957

`printf ("%.2f", 100.456);`应该给你 100.46

# c++ - Visual C++ - 计算目录中的文件

> ID：15227858
> 
> 赞同：0
> 
> 时间：2013-03-05T15:36:50.117
> 
> 标签：c++, file, directory

我想这是一个简单的问题，但我找不到如何以正确的方式编写它。

我必须计算文件夹中的所有 *jpg、*png、*gif 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:38:45.220

我认为你应该使用[Boost::Filesystem](http://www.boost.org/doc/libs/1_43_0/libs/filesystem/doc/index.htm)。

```
#include <boost/filesystem.hpp>
#include <iostream>
#include <algorithm>

namespace fs = boost::filesystem;

int main()
{
  int i =  std::count_if(fs::directory_iterator("/your/path/here/"),
                         fs::directory_iterator(), 
                         [](const fs::directory_entry& e) { 
                              return e.path().extension() == ".png";
                         });
  std::cout << i << std::endl;
  return 0;
} 
```

# c# - Viewbag 在显式局部视图中不起作用

> ID：15227859
> 
> 赞同：0
> 
> 时间：2013-03-05T15:36:50.893
> 
> 标签：c#, asp.net-mvc-4, viewbag

我有一个列表视图并且我想在页面中添加一个创建部分。

```
@model IEnumerable <blah.Domain.Entities.blah> 
```

> @Html.Partial("_Quickblah", new blah.Domain.Entities.blah());

```
 public ViewResult _Quickblah()
        {
            ViewBag.CategoryID = new SelectList(Repository.Categorys, "CategoryID", "Title");

            Blah blah = new Blah () { CreatedDate = DateTime.Now };

            return View(blah);
        } 
```

我得到了错误

> 没有具有键“CategoryID”的“IEnumerable”类型的 ViewData 项。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:41:00.783

当你调用`Html.Partial`你的`_Quickblah`控制器动作时，你的控制器动作没有被调用，当然`ViewBag.CategoryID`也没有被分配（因为我假设在你渲染这个视图的主控制器动作中你没有设置它）。您应该`Html.Action`改用：

```
@Html.Action("_Quickblah") 
```

同样在您的`_Quickblah`操作中确保您返回部分视图：

```
public ActionResult _Quickblah()
{
    ViewBag.CategoryID = new SelectList(Repository.Categorys, "CategoryID", "Title");
    Blah blah = new Blah () { CreatedDate = DateTime.Now };
    return PartialView(blah);
} 
```

# scala - 将 sbt 作为无头服务器运行

> ID：15227861
> 
> 赞同：1
> 
> 时间：2013-03-05T15:36:53.383
> 
> 标签：scala, sbt, headless

fsc 运行一个无头服务器来编译 Scala 代码，而无需每次都将 Scala 编译器加载到内存中。作为一个 Vim 用户，我觉得这很方便，因为我喜欢使用键盘映射来编译和运行带有 shell 命令的程序。

sbt 是一个构建系统，它为您提供更高级的选项（如依赖管理），但如果您不想每次都等待它加载，您必须在交互式 shell 模式下运行它——这意味着我可以' t 从 Vim 控制它。

我想享受这两个世界 - 将 sbt 作为无头服务器运行并使用轻量级 shell 工具与之交互。

是否可以？我不一定需要直接运行 sbt 或它的一个分支 - 包装器也可以工作。我找不到这样的包装，所以如果没有解决方案，我可能不得不拿起手套自己写一个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:06:41.913

我认为您正在寻找的最佳解决方案是 VimSIDE：

*   [https://github.com/vim-scripts/vimside](https://github.com/vim-scripts/vimside)

还有一个 quickfix sbt 插件可以部分改善这种情况：

*   [https://github.com/dscleaver/sbt-quickfix](https://github.com/dscleaver/sbt-quickfix)

# windows - VS 2008 资源 - 无法在文件详细信息中看到公司名称，尽管公司名称已添加到 .rc

> ID：15227867
> 
> 赞同：3
> 
> 时间：2013-03-05T15:37:08.660
> 
> 标签：windows, visual-c++

寻找相关答案，但一无所获。

我在 .rc 文件中添加了**COMPANY_NAME**
，但在 exe 文件中仍然看不到公司名称（右键单击->属性->详细信息）

这是我的 .rc 文件的一部分：

```
VS_VERSION_INFO VERSIONINFO
 FILEVERSION CURRENT_VERSION
 PRODUCTVERSION CURRENT_VERSION
 FILEFLAGSMASK 0x17L
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x4L
 FILETYPE 0x1L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040d04b0"
        BEGIN
            VALUE "FileDescription", DESCRIPTION
            VALUE "CompanyName", COMPANY_NAME
            VALUE "FileVersion", CURRENT_VERSION_STR
            VALUE "InternalName", NAME
            VALUE "LegalCopyright", COPYRIGHT
            VALUE "OriginalFilename", EXE_NAME
            VALUE "ProductName", PRODUCT_NAME
            VALUE "ProductVersion", CURRENT_VERSION_STR
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x40d, 1200
    END 
```

我必须改变别的东西吗？

我应该怎么做，所以我的文件将包含公司名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-17T15:58:28.160

Explorer 根本不会在文件详细信息中显示 CompanyName！

当然，您可以将公司名称附加到 LegalCopyright。

# c# - 使用多播委托链接函数

> ID：15227876
> 
> 赞同：11
> 
> 时间：2013-03-05T15:37:30.280
> 
> 标签：c#, delegates

我的问题在以下代码中有详细说明 - 我问这个的原因是我正在尝试代表：

```
//create the delegate          
delegate int del(int x);

class Program {

    static void Main(string[] args) {

        Program p;
        p = new Program();

        del d = p.a;
        d += p.b;
        d += p.c;
        d += p.d;
        d += p.e;
        Console.WriteLine(d(10)); //<<was hoping it would be 10+2+3+4+5+6

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }

    private int a(int x) { Console.WriteLine("a is called"); return x + 2; }
    private int b(int x) { Console.WriteLine("b is called"); return x + 3; }
    private int c(int x) { Console.WriteLine("c is called"); return x + 4; }
    private int d(int x) { Console.WriteLine("d is called"); return x + 5; }
    private int e(int x) { Console.WriteLine("e is called"); return x + 6; }

} 
```

16 被退回....

![在此处输入图像描述](../Images/7b9d18b4735434c6fb7a66a02f287c3b.png)

所有函数都会触发，因为各种消息“被调用”等都被打印到`console`但只返回从最后一个函数`e`返回的数量 - 我假设在后台它们被返回但随后被覆盖？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T15:51:52.120

当您在问题中有一个多播委托***时***`d`，返回值是.*`d`*

 *一般来说，对于多播委托，使用返回类型是最自然的`void`。

编译器没有机会猜到您所希望的`10+2+3+4+5+6`. 你没有在任何地方指定它。

您可以将您的委托类型更改为：

```
delegate void del(int xToAdd, ref int sum); 
```

`a`例如，您的方法应该如下所示：

```
private void a(int x, ref int sum) { Console.WriteLine("a is called"); sum += x + 2; } 
```

`d`然后将像这样调用多播委托实例：

```
int sum = 0;
d(10, ref sum);
Console.WriteLine(sum); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T15:47:30.280

这不是为委托处理返回类型的方式。将会发生的是所有的处理程序将彼此独立地执行，然后随机选择一个（技术上它是最后订阅的处理程序，但你不应该依赖它）返回给调用者调用了委托。

我强烈建议您不要使用具有返回值的事件（您将此委托视为事件）。这种行为实际上是不可取的。如果你想要一个返回值，确保你的委托总是映射到一个函数是有意义的，不多也不少。

至于实际生成所需的结果，虽然有多种方法，但使用更传统的代表集合会更好：

```
List<Func<int, int>> functions = new List<Func<int, int>>();
//populate

int result = functions.Aggregate(10, (total, func) => func(total)); 
```*

# bash - 查找模式的Shell脚本是否存在

> ID：15227885
> 
> 赞同：1
> 
> 时间：2013-03-05T15:37:40.910
> 
> 标签：bash, shell, grep, pattern-matching

`nfs /dev/sda4`我想使用 shell 脚本在 conf 文件中搜索模式。如果存在，我只需要忽略它，如果不存在，我需要添加该模式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:46:02.123

`nfs /dev/sda4`如果在文件中找不到该行，这将在文件顶部插入该行：

```
grep -q 'nfs /dev/sda4' file || sed -i 'i\nfs \/dev\/sda4' file 
```

或在底部：

```
grep -q 'nfs /dev/sda4' file || sed -i '$a\nfs \/dev\/sda4' file 
```

# r - 基于值向量的数据框中的子集行

> ID：15227887
> 
> 赞同：52
> 
> 时间：2013-03-05T15:37:42.223
> 
> 标签：r, subset, r-faq

我有两个数据集应该是相同的大小，但不是。我需要修剪 A 中不在 B 中的值，反之亦然，以消除要进入报告的图表中的噪音。（别担心，这些数据不会被永久删除！）

我已阅读以下内容：

*   [根据向量中的 *not* 选择 R 数据框中的列](https://stackoverflow.com/questions/12208090/selecting-columns-in-r-data-frame-based-on-those-not-in-a-vector)
*   [http://www.ats.ucla.edu/stat/r/faq/subset_R.htm](http://www.ats.ucla.edu/stat/r/faq/subset_R.htm)
*   [如何使用“OR”组合多个条件以对数据框进行子集化？](https://stackoverflow.com/questions/4935479/how-to-combine-multiple-conditions-to-subset-a-data-frame-using-or)

但我仍然无法让它正常工作。这是我的代码：

```
bg2011missingFromBeg <- setdiff(x=eg2011$ID, y=bg2011$ID)
#attempt 1
eg2011cleaned <- subset(eg2011, ID != bg2011missingFromBeg)
#attempt 2
eg2011cleaned <- eg2011[!eg2011$ID %in% bg2011missingFromBeg] 
```

第一次尝试只是消除了结果 setdiff 向量中的第一个值。第二次尝试产生和笨拙的错误：

```
Error in `[.data.frame`(eg2012, !eg2012$ID %in% bg2012missingFromBeg) 
:  undefined columns selected 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-05T15:46:07.207

这会给你你想要的：

```
eg2011cleaned <- eg2011[!eg2011$ID %in% bg2011missingFromBeg, ] 
```

第二次尝试的错误是因为您忘记了`,`

通常，为方便起见，规范`object[index]`子集列 2d `object`。如果要对行进行子集化并保留所有列，则必须使用规范 `object[index_rows, index_columns]`，而`index_cols`可以留空，默认情况下将使用所有列。

但是，您仍然需要包含`,`以指示您想要获取行的子集而不是列的子集。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-05T15:48:52.530

如果您真的只想通过两个数据帧中都存在的索引对每个数据帧进行子集化，您可以使用“匹配”函数执行此操作，如下所示：

```
data_A[match(data_B$index, data_A$index, nomatch=0),]
data_B[match(data_A$index, data_B$index, nomatch=0),] 
```

但是，这与以下内容相同：

```
data_A[data_A$index %in% data_B$index,]
data_B[data_B$index %in% data_A$index,] 
```

这是一个演示：

```
# Set seed for reproducibility.
set.seed(1)

# Create two sample data sets.
data_A <- data.frame(index=sample(1:200, 90, rep=FALSE), value=runif(90))
data_B <- data.frame(index=sample(1:200, 120, rep=FALSE), value=runif(120))

# Subset data of each data frame by the index in the other.
t_A <- data_A[match(data_B$index, data_A$index, nomatch=0),]
t_B <- data_B[match(data_A$index, data_B$index, nomatch=0),]

# Make sure they match.
data.frame(t_A[order(t_A$index),], t_B[order(t_B$index),])[1:20,]

#    index     value index.1    value.1
# 27     3 0.7155661       3 0.65887761
# 10    12 0.6049333      12 0.14362694
# 88    14 0.7410786      14 0.42021589
# 56    15 0.4525708      15 0.78101754
# 38    18 0.2075451      18 0.70277874
# 24    23 0.4314737      23 0.78218212
# 34    32 0.1734423      32 0.85508236
# 22    38 0.7317925      38 0.56426384
# 84    39 0.3913593      39 0.09485786
# 5     40 0.7789147      40 0.31248966
# 74    43 0.7799849      43 0.10910096
# 71    45 0.2847905      45 0.26787813
# 57    46 0.1751268      46 0.17719454
# 25    48 0.1482116      48 0.99607737
# 81    53 0.6304141      53 0.26721208
# 60    58 0.8645449      58 0.96920881
# 30    59 0.6401010      59 0.67371223
# 75    61 0.8806190      61 0.69882454
# 63    64 0.3287773      64 0.36918946
# 19    70 0.9240745      70 0.11350771 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-13T20:56:31.703

真正**人类可以理解**的示例（因为这是我第一次使用 %in%），如何比较两个数据帧并仅保留特定列中包含相等值的行：

```
# Set seed for reproducibility.
set.seed(1)

# Create two sample data frames.
data_A <- data.frame(id=c(1,2,3), value=c(1,2,3))
data_B <- data.frame(id=c(1,2,3,4), value=c(5,6,7,8))

# compare data frames by specific columns and keep only 
# the rows with equal values 
data_A[data_A$id %in% data_B$id,]   # will keep data in data_A
data_B[data_B$id %in% data_A$id,]   # will keep data in data_b 
```

结果：

```
> data_A[data_A$id %in% data_B$id,]
  id value
1  1     1
2  2     2
3  3     3

> data_B[data_B$id %in% data_A$id,]
  id value
1  1     5
2  2     6
3  3     7 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-01T13:14:45.390

根据对原始帖子的评论，合并/连接非常适合这个问题。特别是，*内部连接*将仅返回两个数据帧中都存在的值，从而使该`setdiff`语句变得不必要。

使用 Dinre 示例中的数据：

**在基础 R 中：**

```
cleanedA <- merge(data_A, data_B[, "index"], by = 1, sort = FALSE)
cleanedB <- merge(data_B, data_A[, "index"], by = 1, sort = FALSE) 
```

**使用 dplyr 包：**

```
library(dplyr)
cleanedA <- inner_join(data_A, data_B %>% select(index))
cleanedB <- inner_join(data_B, data_A %>% select(index)) 
```

要将数据保留为两个单独的表，每个表仅包含其自己的变量，这会将不需要的表子集化为仅其索引变量，然后再加入。然后没有新的变量被添加到结果表中。

# java - 我们可以在 java 中从 USB 闪存驱动器获取 VID 和 PID 吗？

> ID：15227888
> 
> 赞同：4
> 
> 时间：2013-03-05T13:13:07.540
> 
> 标签：java, usb-flash-drive

我需要在 java 中获取可移动闪存驱动器的 VID 和 PID？我用谷歌搜索了很多，我无法得到任何正确的答案。许多社区几乎没有说明，但没有正确的说明，我必须导入哪些包。其中大多数答案都是用 C++ 编写的。

提前致谢。

# python - 打印列表时的括号

> ID：15227890
> 
> 赞同：1
> 
> 时间：2013-03-05T15:37:56.820
> 
> 标签：python, list, tuples, python-unicode

这不是特定于 sqlite 的，但我在学习 python 和 sqlite3 并列出查询结果时想知道。我有简单的代码：

```
connection = sqlite3.connect("db.sqlite")
cursor = connection.cursor()
cursor.execute("select * from db")
print cursor.fetchall() 
```

因此，结果`print cursor.fetchall()`是：`[(u'koko',), (u'lolo',)]` 但是，当我尝试使用此代码重新创建那种打印时：

```
i=["koko","lolo"]
print i 
```

打印结果是：`['koko', 'lolo']`

我不明白的两件事：

1.  为什么第一个列表在打印时有 'u' 表示 unicode 而第二个没有？
2.  为什么第一个列表`(u'koko',)`在打印时有括号而第二个没有？

第一个列表可能是元组列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:39:03.473

该列表有括号，因为这就是 python 打印`tuple`.

对比：

```
a = 'foo'
print a,type(a) 
```

和：

```
b = ('foo',)
print b,type(b) 
```

另请注意，在 python2.x 中，有不同类型的字符串。 `unicode`只是一种字符串，python 选择将其表示为`u'whatever'`：

```
>>> print u'whatever'
whatever
>>> print repr(u'whatever')
u'whatever' 
```

Note that `str(tup)` implicitly calls `repr` on each element in the tuple.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:39:05.917

`[(u'koko',), (u'lolo',)]` is a list of 1-element tuples of unicode strings.

`["koko","lolo"]` is a list of byte strings.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T15:43:33.803

You may want to manipulate the results to adapt it to the format you want...

```
rows = cursor.fetchall()
result = [elem[0] for elem in rows] 
```

...and maybe to apply a function to elem[0] (depending on your python version) to put the strings in the format you want to.

# php - FusionCharts XT - 仅在鼠标悬停时显示值（MSLine2D 图表）

> ID：15227897
> 
> 赞同：0
> 
> 时间：2013-03-05T15:38:15.280
> 
> 标签：php, javascript, fusioncharts

我试图仅在将鼠标悬停在图表中的该点上时才显示值。那可能吗？因为我在融合图表文档中找不到任何解决方案。这是我的代码：

```
public function Generate_MSChart($category, $data, $chart, $width, $height, $str_params=false) 
{ 
    $FC =  FusionCharts($chart, $width, $height);  
    $FC->enablePrintManager();
    $FC->setRenderer('javascript');

    // Default str params
    if ($str_params === false) {
        $strParam="bgColor=F4F4F6,F4F4F6;showValues=0;showBorder=0;palette=2;numvdivlines=10;drawanchors=0;divlinealpha=30;alternatehgridalpha=20;setadaptiveymin=1;";
    }

    // Set chart attributes 
    $FC->setChartParams($strParam);

    // Add category names
    foreach ($category as $ct) {
        $FC->addCategory($ct);
    }

    // Add data
    foreach ($data as $dtk => $dte) {
        $FC->addDataset($dtk, "");

        foreach ($dte as $elm) {
            $FC->addChartData($elm);
        }
    }

    return $FC;
} 
```

如您所见，我正在使用 ShowValues=0 因为我的图表中有很多数据。如果我显示这些值，它将不可读！

那么当鼠标悬停时我该怎么做才能看到当前的图形点值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:13:10.933

好吧，发现问题出在 $strParam="drawanchors=0;"

当我删除它时它开始工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T08:42:12.600

将“drawAnchors”设置为 0，锚点被隐藏，数据点的工具提示不会显示，链接也不会工作。

如果您需要隐藏锚点但仍有工具提示和链接，请使用：$strParam="anchorAlpha=0;"

请注意，对于 FusionCharts 的 JavaScript 变体，即使隐藏锚点也会显示工具提示。您需要将图表属性设置`showTooltip="0"`为隐藏工具提示（但这会完全禁用工具提示。）

# c++ - c++ 和 lapack 的链接

> ID：15227902
> 
> 赞同：1
> 
> 时间：2013-03-05T15:38:28.260
> 
> 标签：c++, compilation, linker, lapack

我的 makefile 中有几个文件需要一起编译，如下所示（现在名称是虚拟的）：

```
compile:
        g++ prog1.cpp func1.cpp func2.cpp func3.cpp -L/usr/lib/ -lmkl_lapack64 -lmkl 
        -lguide -lpthread -o output_ready.out 
```

当我做编译时，我得到以下错误：

```
/usr/bin/ld: cannot find -lmkl_lapack64                                                                                                                                                
/usr/bin/ld: cannot find -lmkl                                                                                                                                                         
/usr/bin/ld: cannot find -lguide                                                                                                                                                       
collect2: ld returned 1 exit status                                                                                                                                                    
make: *** [compile] Error 1 
```

该程序之前已在另一台机器上正确编译。

问：如果正确，我如何检查 lapack lib 的路径？我应该如何修复它们？库已安装（不确定路径是否正确）。

非常感谢任何有用的评论。R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:49:07.570

首先，我会建议您按照您自己的计划检查库是否安装在正确的目录中。一个明显的方法是 cd`/usr/lib`并查看是否有任何 lapack 库（您会立即注意到它们）。

如果所有东西都安装在它应该在的地方，我建议你编译

```
-I /usr/local/include/lapackpp/ 
```

对于标题，和

```
-L /usr/local/lib -llapackpp 
```

对于库，因为所有 lapack 库都应该通过它访问。

另外，您确定要查找 中的库`/usr/lib`，而不是 中的库`/usr/local/lib`吗？不过，我想这是特定于操作系统/设置的。

最后，前段时间我遇到了与您遇到的类似问题，并在此网站上找到了一个很好且明确的解释。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:42:52.273

他查找 lapack 库的唯一路径是`/usr/lib`- 因为这是您为链接器指定的唯一目录。如果库安装在另一个位置，您将不得不找到它并

*   通过另一个`-L`参数将该位置提供给链接器，
*   或将库移动到`/usr/lib`

所以链接器可以找到库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:45:51.250

我认为您不需要`-L/usr/lib`，因为我相信编译器已经知道在那里寻找库。也就是说，`-L<path to where lapack libraries are>`如果它们没有安装在标准位置，您确实需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T13:21:42.603

根据您的操作系统、体系结构等查找正确的编译器和链接器标志的绝佳方法是使用英特尔在线工具，您可以在此处找到该工具：

[https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor](https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor)。

要访问它，您需要登录英特尔网站。

# java - 如何传输用 Eclipse 编写的项目？

> ID：15227903
> 
> 赞同：8
> 
> 时间：2013-03-05T15:38:30.880
> 
> 标签：java, eclipse, project

我试图将我用 Eclipse 编写的项目移动到另一台计算机上。我尝试声明正确的工作区，但该项目没有出现在 Eclipse 中。

有没有办法转移整个项目，或者我必须用它的包重建项目并只转移 .java 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T15:41:26.993

按照以下步骤将项目从一个系统复制到另一个系统：

1.  将项目文件夹复制到目标系统
2.  创建工作区
3.  选择`File -> Import`
4.  选择`General -> Existing project into workspace`
5.  选择项目文件夹（在选定的根文件夹下）
6.  说“完成”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:43:11.990

当将对象从一个 Eclipse 实例转移到另一个实例时，最重要的是要移动 . `classpath`和 。`project`文件。这些定义了项目的结构以及使其工作所需的库。

只需将您的项目文件夹复制到另一台计算机并按照以下步骤操作：

```
 1\. Open Eclipse
 2\. Go to File > Import
 3\. Existing projects into workspace 
```

该项目现在应该与源一起导入

您还可以导出项目并导入它。

但是，如果您将 IDE 文件生成文件抽象为构建管理工具（如[maven](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html) ），对您有什么帮助。这将帮助您不保留（并最终移动）您的项目及其依赖项，而只需运行一个命令以使其 IDE 就绪。

如果您正在运行 Eclipse，则该命令将`mvn eclipse:eclipse`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:40:28.270

![在此处输入图像描述](../Images/589f85a2b68a9f91b90172df86d03e4e.png)复制项目文件夹。然后使用文件/导出，然后文件/导入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:41:22.027

将项目导出到当前计算机上选择的目录。然后，将其复制到另一台计算机。最后，将项目导入到另一台计算机上的 Eclipse 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:41:41.837

您可以导出项目并将其重新导入新系统。导出时不要忘记选中所有框，以便所有文件都包含在包中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T18:18:03.147

测试解决方案：

*   将项目的整个文件夹复制到新计算机
*   在这台新计算机上，启动 Eclipse 选择您在上面复制的旧工作区，或者如果您还没有它，请创建一个
*   选择 File -> Import... -> General -> Existing Projects into Workspace -> Next，然后浏览到项目/文件夹的根目录，选择它，单击 OK，然后，如果它是一个有效的 Eclipse 项目，你应该会看到它正在被签入（项目列表，此向导找到。您可以只检查您感兴趣的项目，也可以包括演示项目 - 这取决于您）。单击完成，您就在那里。

来源：[https ://www.eclipse.org/forums/index.php/t/248863/](https://www.eclipse.org/forums/index.php/t/248863/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-12T07:55:52.700

您不必导入任何东西

您必须在目标计算机上安装 JDK。当你这样做时，可能会出现问题，但我刚刚获得了最新版本，它对我有用。确保您获得的版本与之前使用的版本相同，Windows 为 64 位或 32 位。

如果您要从 windows 更改为 Mac 或类似的东西，或者从 64 更改为 32，反之亦然，这可能行不通。

首先，你需要日食。复制eclipse文件夹。您可以在任何地方执行此操作。

其次，您需要找到您的 eclipse 元数据文件夹。在您的新计算机上，打开 eclipse 并创建一个新项目。确保放入“默认文件夹”。由于它不存在，eclipse 将在您的新计算机上再次创建相同的文件夹。您必须转到旧计算机，找到此文件夹，然后将其复制并替换到新计算机上。

一旦你复制了这个，你就会知道如果你的 eclipse 以你把它留在旧计算机上的方式启动，它就可以工作。您的所有窗口都不会显示任何代码；它会说“找不到资源”。

现在复制你的项目。目录结构必须 /exactly/ 相同。如果您将项目存储在用户文件或类似文件中，使用不同的路径名，这将不起作用。

例如，我的一个库在我的下载文件夹中。其他一切工作正常。我去了项目-> 构建属性-> 库选项卡单击库（它是 kryonet）然后单击编辑。请注意，您会知道是否缺少任何内容，因为它会在旁边的括号中说缺少。单击编辑将打开一个浏览窗口，您必须找到丢失的资源文件并双击以将其添加到您的构建路径中。

如果您的项目目录路径已从一台计算机更改为另一台计算机，您可能必须进入项目属性并手动编辑具有新位置的每个资源的路径（如上所述）。

但是不，您不必导入任何内容。

# android - 以编程方式将 TextView 添加到 Listview 自定义行

> ID：15227909
> 
> 赞同：0
> 
> 时间：2013-03-05T15:38:57.183
> 
> 标签：android, android-listview, android-linearlayout, textview, baseadapter

我想以编程方式将一个 TextView 添加到 XML 文件中声明的 Linearlayout 中，该文件定义了应用于所有列表视图行的自定义行。为了做到这一点，我有以下代码：

```
<LinearLayout
    android:id="@+id/zv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/title"
    android:layout_marginBottom="1dip"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:orientation="vertical"
    android:padding="1dip" >
</LinearLayout>

class ListViewAdapter extends BaseAdapter {

(...)
public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if (convertView == null)
            vi = inflater.inflate(R.layout.row, null);

        TextView tv_nz = new TextView(activity.getApplicationContext());

        LinearLayout zv = (LinearLayout)vi.findViewById(R.id.zv);

        tv_nz.setText("testing...");
        zv.addView(tv_nz);
(...)

return vi;
} 
```

但是，TextView 在每一行中出现不止一次。我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:43:25.343

> 我真正想做的是在某些条件下添加一个 Textview 和一些 ImageViews 否则我不能在 XML 文件中声明它。

您应该使用多个布局来正确执行此操作，因为在一行布局中添加和删除视图可能既昂贵又缓慢。您可以在 XML 或 Java 中创建不同的布局，但在您的适配器中，您*必须*覆盖`getViewTypeCount()`并`getItemViewType()`告诉适配器期望多个布局以及每一行使用哪种布局。

这很简单，我写了一个例子：[Reusing views in Android Listview with 2 different layouts](https://stackoverflow.com/q/13297299/1267661)

* * *

**原来的**

> 但是，TextView 在每一行中出现不止一次。我究竟做错了什么？

您未能考虑 ListView 回收其行的方式。这在 Google I/O 演示文稿（例如[Turbo-Charge Your UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html) ）中有详细说明。

也许您应该简单地将额外的 TextView 添加到行的 XML 布局或使用多个布局。由于您没有解释*为什么*要添加 TextView，因此很难给您明确的建议。

* * *

这只会为每一行添加一个 TextView：

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        // Code here only affects new rows
        convertView = inflater.inflate(R.layout.row, null);

        TextView tv_nz = new TextView(activity.getApplicationContext());
        tv_nz.setText("testing...");
        convertView.addView(tv_nz);
    }
    else {
        // Code here affects only recycled rows
    }

    // Code here affects every row when the ListView is scrolled
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:48:44.593

每次操作系统想要渲染视图时都会调用 getView。这意味着每次列表视图询问行的内容时，您都在添加一个新视图。

如果您切换到仅在 convertView 不为空时添加视图，您将实现您想要的。

```
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv_nz;

    // If the row does not exist, lets create it.
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.row, null); 

        // Add the text view to the new view
        tv_nz = new TextView(activity.getApplicationContext());
        tv_nz.setId(R.id.tv_nz);

        convertView.addView(tv_nz);
    } else {
        // The row already exists, lets find the TextView
        tv_nz = (TextView) findViewById(R.id.tv_nz);
    }

    if (tv_nz != null) {
        tv_nz.setText("testing...");
    }

    return convertView;
} 
```

顺便说一句，您可以通过将 textview 添加到 R.layout.row 来消除动态添加 textview 的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:43:38.767

您似乎无条件添加 TextView ，对吗？

问题是，如何识别必须添加的单行。也许通过`position`参数？只有你知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:48:12.103

我注意到您正在添加 a`TextView`无论是否`convertView`为空。这可以解释这样一个事实，即任何一行中可能有多`TextView`个小部件。

但是，我确实同意以前的答案——可能有更好的方法来完成你需要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:48:40.163

我的猜测是，当视图被回收时，它已经添加了 TextView，因此当您添加另一个视图时，您不会检查是否已经从前一个视图中添加了一个。这样的事情应该会有所帮助：

```
//after your view inflation
LinearLayout zv = (LinearLayout)vi.findViewById(R.id.zv);
TextView tv_nz;
if(zv.getChildCount() == 0) {
    tv_nz = new TextView(activity.getApplicationContext());
    zv.addView(tv_nz);
} else
    tv_nz = (TextView) zv.getChildAt(0);
tv_nz.setText("testing..."); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T16:01:38.607

这是给您的示例代码。首先，您必须决定将数据发送到适配器的格式。在我的代码中，我将它作为数组列表发送。

```
public class CustomArrayAdapter extends ArrayAdapter<String>
{
    ArrayList<String> list;
    Context mContext; // ADD THIS to keep a context

public CustomArrayAdapter(Context context, int textViewResourceId,
        ArrayList<String> objects)
{
    super(context, textViewResourceId, objects);
    this.mContext = context;
    // Pass the elements in the list
    list = objects;
} 
```

只有在您拥有特定的数据顺序（如“列表”）之后，您才能在列表视图中逐行迭代数据。

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;

    if (row == null)
    {

        // get reference to the activity
        LayoutInflater inflater = ((Activity) mContext).getLayoutInflater();

        // Inflate the custom text which will replace the default text view
        //list_item is a simple lineer layout which contain textView1 in it. 
        row = inflater.inflate(R.layout.list_item, parent, false);
    }

    // Create custom text view to customize

    TextView tv = (TextView) row.findViewById(R.id.textView1);

    // TextView can be customized here or in the xml file
    tv.setText(list.get(position));

    return row;

  }
} 
```

最后，您可以像这样调用自定义适配器；

```
 CustomArrayAdapter adapter = new CustomArrayAdapter(getActivity(),
            R.id.textView1,values); 
```

# touch - 试图拦截添加到场景中的对象的特定触摸 - ccTouchBegan 是如何工作的？

> ID：15227911
> 
> 赞同：1
> 
> 时间：2013-03-05T15:39:02.797
> 
> 标签：touch, cocos2d-x, ccsprite

编辑：好的，我通过简单地观看 TouchesTest cocos2d-x 示例找到了解决方案。唯一缺少的是测试触摸位置是否包含在精灵矩形中并声明触摸。因此，我能够用那个替换我以前的代码

```
bool Artifact::claimTouch(CCTouch* pTouch)
{
    CCPoint touchLocation = pTouch->getLocation();
    CCRect boundingBox = this->boundingBox();

    return boundingBox.containsPoint(touchLocation);
}

bool Artifact::ccTouchBegan(CCTouch *pTouch, CCEvent *pEvent)
{
    if (claimTouch(pTouch))
    {
        CCLog("id:%i", this->id);
        return true;
    }
    return false;
} 
```

编辑结束

我试图截取对我在场景中添加的对象的特定触摸。

添加两个对象的代码：

```
Artifact* artifact1 = new Artifact(1);
Artifact* artifact2 = new Artifact(2);
CCRect cropRect = CCRectZero;
cropRect.size = CCSize(50,50);
artifact1->initWithFile("rock_small.png", cropRect);
artifact1->setPosition(CCPoint(100, 100));
artifact2->initWithFile("grey_rock.jpg", cropRect);
artifact2->setPosition(CCPoint(300, 200)); 
```

这是我在模拟器上获得的

[![截屏](../Images/578b4b626310bb586345354eba34f8ed.png)](https://i.stack.imgur.com/nTXr9.png)

我的 Artifact 类的代码

//。H

```
class Artifact : public CCSprite, public CCTargetedTouchDelegate
{
public:
    Artifact(int id) : id(id), pressed(false){};

    virtual void onEnter();
    virtual void onExit();

    bool ccTouchBegan(CCTouch *pTouch, CCEvent *pEvent);
private:
    int id;
    bool pressed;
}; 
```

//.CPP

```
void Artifact::onEnter()
{
    CCSprite::onEnter();
    CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(this, 0, true);
}

void Artifact::onExit()
{
    CCDirector::sharedDirector()->getTouchDispatcher()->removeDelegate(this);
    CCSprite::onExit();
}

bool Artifact::ccTouchBegan(CCTouch *pTouch, CCEvent *pEvent)
{
    CCLog("id:%i", this->id);

    return true;
} 
```

无论我在屏幕上单击什么点（即使我没有单击两个方块之一），都会在第二个工件上调用 ccTouchBegan（输出为“id:2”）。这就像我在最后一个位置（即顶部 z 坐标）添加的 CCSprite 覆盖了整个屏幕并阻止我访问它下面的元素。

知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T04:48:54.973

观看 TouchesTest cocos2d-x 示例

几个关键点

```
class Paddle : public CCSprite, public CCTargetedTouchDelegate
    virtual void onEnter();
    virtual void onExit();
    bool containsTouchLocation(CCTouch* touch);
    virtual bool ccTouchBegan(CCTouch* touch, CCEvent* event);
    virtual void ccTouchMoved(CCTouch* touch, CCEvent* event);
    virtual void ccTouchEnded(CCTouch* touch, CCEvent* event); 
```

这应该可以解决问题

# algorithm - 来自类属性的唯一、人类可读的 ID

> ID：15227916
> 
> 赞同：2
> 
> 时间：2013-03-05T15:39:11.187
> 
> 标签：algorithm, uniqueidentifier

我想从几个类属性创建一个唯一的、人类可读的 ID，例如：

```
Class A contains property c,d,e
Class B contains property f,g 
```

所以一个 ID 代表

```
c=1
d=2
e=3
f=4
g=5 
```

而另一个 ID 将代表

```
c=7
d=3
e=4
f=0
g=11 
```

为了参数，属性只是整数（编辑：在 0 到 1000 的范围内），而实际上它们实际上也可以是浮点数和字符串。

我正在寻找一种方法将这些值组合成一个简短的、人类可读的 ID。此外，我希望能够从 ID 重建属性。此外，如果可能，属性的微小差异也会导致 ID 的微小差异。

这是一个我认为小且易于阅读的示例： `H5RT33`

有没有类似的算法？

编辑：我写下了 ID 示例，同时期待诸如“什么是人类可读的？”之类的问题。我发现这很难描述——例如，MD5 就不会，而像“树”这样的真实单词是不必要的。所以给出的 ID 有点在中间，但我并不是要将它限制为 6 个字符，或者只有大写字母和数字。

另外，我谈到了整数，而我真正的意思是“0-1000 范围内的整数”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:27:27.977

You want an invertible transformation (a bijection), which means that the information content of both original and transform are the same. A six-character alphanumeric code using only capital letters, as in `H5RT33` has 36⁶ possible values; in other words, it has `6 * log[2]36 = 31.1` bits of information. Five (32-bit) integers, on the other hand, contain `5 * 32 = 180` bits, which is quite a bit more (unless, of course, the integers have a restricted range). And you say you'd also like to encode floating point numbers and strings, which contain quite a bit more information.

So on strictly information-theoretic grounds, I think you're going to have a hard time fulfilling all of your requirements.

# python - 使用 Pyramid 和 SQL Alchemy 进行 ORM 设计

> ID：15227918
> 
> 赞同：1
> 
> 时间：2013-03-05T15:39:13.797
> 
> 标签：python, orm, sqlalchemy, pyramid

我需要一些帮助来为 ORM 创建模型。

我一直在尝试使用 Pyramid 和 SQLAlchemy 设计一个 Web 应用程序作为个人学习体验，以及作为我希望为我工作的公司开发的 Web 应用程序的较小组件。

关于这个应用程序的一些背景（*建筑工作领域*）。

它将用作我们的估算人员能够更新的投标时间表；这样我们前台的秘书就可以看到谁在从事什么工作以及估计该工作的承包商是什么。

我设计了 3 个模型，它们看起来像这样：

```
class JobListing(Base):
    __tablename__ = 'joblist'
    id = Column(Integer, primary_key=True)
    jobname = Column(String(80), unique=True)
    biddate = Column(DateTime)

    def __init__(self, jobname, biddate):
        self.jobname = jobname
        self.biddate = biddate

class Contractors(Base):
    __tablename__ = 'contractors'
    id = Column(Integer, primary_key=True)
    name = Column(String(80), unique=True)
    address = Column(String(255))
    phone = Column(String(11))
    fax = Column(String(11))

    def __init__(self, name, address, phone, fax):
        self.name = name
        self.address = address
        self.phone = phone
        self.fax = fax

class BiddingList(Base):
    __tablename__ = 'biddinglist'
    id = Column(Integer, primary_key=True)
    job_id = Column(Integer, ForeignKey("joblist.id"))
    job = relationship("JobListing", backref=backref("joblist", order_by=id))
    contractor_id = Column(Integer, ForeignKey("contractors.id"))
    contractors = relationship("Contractors", backref=backref("contractors", order_by=id)) 
```

joblisting 包含实际的工作信息；只需要工作名称和投标日期。

承包商包含特定于我们将投标的实际承包商的信息，只是标准信息，例如电话传真等。

Biddinglist 将包含我不确定应该如何组织的信息。我相信这是正确的方法，但它应该只是将承包商与工作 ID 联系起来。

每个工作只能列出一次承包商，但该工作可以有多个承包商。

我的问题是，我是通过这种设计以正确的方式接近这一点，还是我完全处于左侧领域？我只想从一开始就以正确的方式去做，这样我就有了坚实的基础。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:09:53.377

如果您不需要在`BiddingList`对象中存储任何其他信息，只需`job_id`和`contractor_id`- 这种模式称为[多对多关系](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#building-a-many-to-many-relationship)，SQLAlchemy 文档有一个如何设置它的示例。基本上，在这种情况下，您不需要中间 ORM 类（尽管您需要一个表），并且在您设置完所有内容后，用法将如下所示

```
job = JobListing(jobname="Test Job")
job.contractors.append(joe)
job.contractors.append(bob)
print bob.jobs
> [<JobListing "Test Job">]
bob.jobs.append(another_job)
print bob.jobs
> [<JobListing "Test Job">, <JobListing "Another Job">] 
```

——一切都是美好而透明的。

如果您想在多对多关系上存储一些附加信息（例如，承包商可以`role`在 each中具有不同的信息`JobListing`） - 这是一种称为[Association Object](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#association-pattern)的不同模式。

如果您想限制关系以便每个承包商只能添加一次，我会考虑指定一个[唯一约束](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html?highlight=constraint#sqlalchemy.schema.UniqueConstraint)

现在你知道了让它起作用的所有神奇词汇:)

另一个注意事项 - 尽管网络上有一些示例，但您不需要为每个 ORM 类添加构造函数 - SQLAlchemy 提供了一个默认`__init__`方法，该方法接受与列名称匹配的参数：

```
class JobListing(Base):
    __tablename__ = 'joblist'
    id = Column(Integer, primary_key=True)
    jobname = Column(String(80), unique=True)
    biddate = Column(DateTime)

obj = JobListing(jobname="Test Job", biddate=datetime.now()) 
```

# c# - 在 var C# 中获取 HTML 响应

> ID：15227919
> 
> 赞同：0
> 
> 时间：2013-03-05T15:39:26.567
> 
> 标签：c#

我在变量 var 中得到 HTML 的响应。当我第一次编写代码时，它给了我正确的输出，但是在做了一些不同的事情并返回该函数后，它会导致问题并给出一些错误“值不能为空”，我调试了代码，它在属性搜索中向我显示了正确的输出框，但在立即窗口上显示不完整的输出。不知道哪里出错了！！！

```
var webGet = new HtmlWeb();
var document1 = webGet.Load("http://www.lfp.fr/ligue1/feuille_match/76107");
var club1 = 
    from foo in document1.DocumentNode.SelectNodes("//div[@class='club']") 
    select foo; 
```

我已经重建解决方案重新启动我的电脑，但问题仍然存在。我正在使用 HTMLAgilityPack。

# javascript - 停止选择多个单选按钮

> ID：15227922
> 
> 赞同：6
> 
> 时间：2013-03-05T15:39:30.130
> 
> 标签：javascript, coldfusion, radio-button, dom-events

我在页面顶部有一个单选按钮来显示“没有选择的供应商”，然后是查询循环中的其他几个单选按钮。

```
<label>
  <input type="radio" id="nosupp" name="nosupp" onchange="resetSupp(this);">
    No Supplier Chosen
</label>

<cfloop query="supplier"
  <label>
    <input type="radio" id="chk1" name="chooseSupp" onchange="change(this);">
    Chosen Supplier
  </label>
</cfloop> 
```

我遇到的问题是，如果我选择循环内的单选按钮，然后选择循环外的单选按钮，则循环内的单选按钮与外部的单选按钮同时保持选中状态。

我如何得到它，以便在选择外部的时，内部的变为未选中？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T15:43:28.990

外部和内部单选按钮需要具有相同的名称：

```
<input type="radio" id="nosupp" name="supp" onchange="resetSupp(this);" value="NoSupplier">

<input type="radio" id="chk1" name="supp" onchange="change(this);" value="ADD VARIABLE SUPPLIER TYPE HERE"> 
```

此外，`id`属性必须是唯一的。没有两个 HTML 元素应该具有相同的 id 属性值，因此`id`在循环中使用相同的值不会达到您的预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:44:21.223

HTML 单选按钮的`name`属性将它们分组。使用相同`name`但不同的`id`，可以让您找到它们的唯一性，但仍将它们组合在一起。通过对它们进行分组，您可以确保只选中给定组中的一个按钮。

# python - rpy2对象未找到错误

> ID：15227926
> 
> 赞同：0
> 
> 时间：2013-03-05T15:39:42.417
> 
> 标签：python, r, dataframe, pandas, rpy2

我正在尝试使用 rpy2 让我在 python 中使用一些 r 功能。这是我想做的一个简单的回归。我创建了一个数据框，将其转换为 R 数据框，然后尝试使用 R 的 lm。但是找不到 R 数据框（见下文）。我应该去哪里进行故障排除？

仅供参考，我使用的是 python 2.7.3、rpy2-2.3.2、pandas 版本 '0.10.1' 和 R2.15.3

```
>>> import rpy2
>>> import pandas as pd
>>> import pandas.rpy.common as com
>>> datframe = pd.DataFrame({'a' : [1, 2, 3], 'b' : [3, 4, 5]})
>>> r_df = com.convert_to_r_dataframe(datframe)
>>> r_df     
(DataFrame - Python:0x32547e8 / R:0x345d640)
[IntVector, IntVector]
  a: (class 'rpy2.robjects.vectors.IntVector')
  (IntVector - Python:0x3254e18 / R:0x345d608)
[       1,        2,        3]
  b: (class 'rpy2.robjects.vectors.IntVector')
  (IntVector - Python:0x3254e60 / R:0x345d5d0)
[       3,        4,        5]
>>> print type(r_df)
(class 'rpy2.robjects.vectors.DataFrame')
>>> from rpy2.robjects import r
>>> r('lmout <- lm(r_df$a ~ r_df$b)')

Error in eval(expr, envir, enclos) : object 'r_df' not found
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    r('lmout <- lm(r_df$a ~ r_df$b)')
  File "/usr/local/lib/python2.7/dist-packages/rpy2/robjects/__init__.py", line 236, in __call__
    res = self.eval(p)
  File "/usr/local/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 86, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 35, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
RRuntimeError: Error in eval(expr, envir, enclos) : object 'r_df' not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:30:04.830

打电话时

```
r('lmout <- lm(r_df$a ~ r_df$b)') 
```

嵌入式 R 将寻找一个变量`r_df`，并且在您的代码示例中，R 不会看到这样的变量。

做的时候

```
r_df = com.convert_to_r_dataframe(datframe) 
```

您正在`r_df`Python 端创建变量，但是当实际数据现在在 R 中时，没有与 R 已知的符号（名称）关联。该数据结构保持匿名。（顺便说一句，您可能希望使用 rpy2-2.3.3 附带的 pandas 数据帧的自动转换）。

要在 R 的“全局环境”中创建变量名，请添加：

```
from rpy2.robjects import globalenv
globalenv['r_df'] = r_df 
```

现在你的`lm()`电话应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:04:24.477

试试这个，（虽然不确定哪个标头有魔力....）

```
import rpy2.robjects as robjects
from rpy2.robjects import DataFrame, Formula
import rpy2.robjects.numpy2ri as npr
import numpy as np
from rpy2.robjects.packages import importr

def my_linear_fit_using_r(X,Y,verbose=True):
   # ## FITTINGS:   RPy implementation ###
   r_correlation = robjects.r('function(x,y) cor.test(x,y)')
   # r_quadfit = robjects.r('function(x,y) lm(y~I(x)+I(x^2))')
   r_linfit = robjects.r('function(x,y) lm(y~x)')
   r_get_r2=robjects.r('function(x) summary(x)$r.squared')
   lin=r_linfit(robjects.FloatVector(X),robjects.FloatVector(Y))
   coef_lin=robjects.r.coef(lin)
   a=coef_lin[0]
   b=coef_lin[1]
   r2=r_get_r2(lin)
   ci=robjects.r.confint(lin) # confidence intervals
   lwr_a=ci[0]
   lwr_b=ci[1]
   upr_a=ci[2]
   upr_b=ci[3]
   if verbose:
      print robjects.r.summary(lin)
      # print robjects.r.summary(quad)
   return (a,b,r2[0],lwr_a,upr_a,lwr_b,upr_b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:16:41.093

只是一个评论，对于简单的回归，你可以完全在 Python 中完成，使用`ols`from `statsmodels`：

```
from statsmodels.formula.api import ols

lmout = ols('a ~ b', datframe).fit()
lmout.summary() 
```

# jquery-mobile - 深度链接 jQuery-mobile 1.3 和 jqm.page.params.js

> ID：15227932
> 
> 赞同：0
> 
> 时间：2013-03-05T15:39:58.033
> 
> 标签：jquery-mobile

我试图从 jqm 1.1 更新到 1.3。当使用页面参数（例如`$.mobile.changePage("#page2?id=xy")`）更改页面时，页面会正确更改，但参数不会出现在浏览器 URL 中，因此页面的书签或重新加载会由于缺少参数而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:48:58.613

它应该是`$.mobile.changePage("#page2?id=xy")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:58:59.943

作为一种解决方法，我现在在我的 onPageChange 事件侦听器中使用：

```
var correctHash = window.location.hash.replace(/\?.*$|$/, "")  + (data.options.pageData? ("?"+jQuery.param(data.options.pageData)):"");
history.replaceState(null,null,correctHash); 
```

这会将截断的参数附加回哈希

# networking - 在 C 中执行简单的 MPI 程序时集群挂起/显示错误

> ID：15227933
> 
> 赞同：2
> 
> 时间：2013-03-05T15:39:59.903
> 
> 标签：networking, network-programming, cluster-computing, mpi, openmpi

我正在尝试运行一个简单的 MPI 程序（多个数组添加），它在我的 PC 中完美运行，但只是挂起或在集群中显示以下错误。我正在使用 open mpi 和以下命令执行

集群网络配置(master&node1)

```
 MASTER 
```

eth0 Link encap:Ethernet HWaddr 00:22:19:A4:52:74
inet addr:10.1.1.1 Bcast:10.1.255.255 Mask:255.255.0.0 inet6 addr: fe80::222:19ff:fea4:5274/64 范围： Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX 数据包:16914 错误:0 丢弃:0 超限:0 帧:0 TX 数据包:7183 错误:0 丢弃:0 超限:0 运营商:0 冲突:0 txqueuelen:0 RX字节：2050581 (1.9 MiB) 发送字节：981632 (958.6 KiB)

eth1 Link encap:Ethernet HWaddr 00:22:19:A4:52:76
inet addr:192.168.41.203 Bcast:192.168.41.255 Mask:255.255.255.0 inet6 addr: fe80::222:19ff:fea4:5276/64 范围： Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX 数据包:701 错误:0 丢弃:0 超限:0 帧:0 TX 数据包:228 错误:0 丢弃:0 超限:0 运营商:0 冲突:0 txqueuelen:0 RX字节：75457 (73.6 KiB) 发送字节：25295 (24.7 KiB)

lo Link encap:Local Loopback
inet addr:127.0.0.1 Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING MTU:16436 Metric:1 RX packet:88362 errors:0 drop:0 overruns:0帧：0 TX 数据包：88362 错误：0 丢弃：0 超限：0 载波：0 冲突：0 txqueuelen：0 RX 字节：21529504 (20.5 MiB) TX 字节：21529504 (20.5 MiB)

peth0 链接封装：以太网 HWaddr 00:22:19:A4:52:74
inet6 地址：fe80::222:19ff:fea4:5274/64 范围：链接 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packet:17175 错误:0 丢弃:0 超限:0 帧:0 TX 数据包:7257 错误:0 丢弃:0 超限:0 载波:0 冲突:0 txqueuelen:1000 RX 字节:2373869 (2.2 MiB) TX 字节:1020320 (996.4 KiB) 中断:16 内存:da000000-da012800

peth1 Link encap:Ethernet HWaddr 00:22:19:A4:52:76
inet6 addr:fe80::222:19ff:fea4:5276/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packet:1112 errors :0 丢弃:0 超限:0 帧:0 TX 数据包:302 错误:0 丢弃:0 超限:0 载波:0 冲突:0 txqueuelen:1000 RX 字节:168837 (164.8 KiB) TX 字节:33241 (32.4 KiB) 中断：16 内存：d6000000-d6012800

virbr0 Link encap:Ethernet HWaddr 52:54:00:E3:80:BC
inet addr:192.168.122.1 Bcast:192.168.122.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packet:0 errors:0丢弃：0 超限：0 帧：0 TX 数据包：0 错误：0 丢弃：0 超限：0 载波：0 冲突：0 txqueuelen：0 RX 字节：0 (0.0 b) TX 字节：0 (0.0 b)

```
 NODE 1 
```

eth0 Link encap:Ethernet HWaddr 00:22:19:53:42:C6
inet addr:10.1.255.253 Bcast:10.1.255.255 Mask:255.255.0.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packet:16559 errors:0丢弃：0 超限：0 帧：0 TX 数据包：7299 错误：0 丢弃：0 超限：0 载波：0 冲突：0 txqueuelen：0 RX 字节：1898811 (1.8 MiB) TX 字节：1056294 (1.0 MiB)

lo 链路封装：本地环回
inet 地址：127.0.0.1 掩码：255.0.0.0 UP LOOPBACK RUNNING MTU：16436 指标：1 RX 数据包：25 错误：0 丢弃：0 超限：0 帧：0 TX 数据包：25 错误：0 丢弃:0 超限:0 载波:0 冲突:0 txqueuelen:0 RX 字节:3114 (3.0 KiB) TX 字节:3114 (3.0 KiB)

peth0 链路封装：以太网 HWaddr 00:22:19:53:42:C6
UP BROADCAST RUNNING MULTICAST MTU:1500 指标：1 RX 数据包：16913 错误：0 丢弃：0 超限：0 帧：0 TX 数据包：7276 错误：0丢弃：0 超限：0 载波：0 冲突：0 txqueuelen：1000 RX 字节：2221627 (2.1 MiB) TX 字节：1076708 (1.0 MiB) 中断：16 内存：f8000000-f8012800

virbr0 Link encap:Ethernet HWaddr 52:54:00:E7:E5:FF
inet addr:192.168.122.1 Bcast:192.168.122.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packet:0 errors:0丢弃：0 超限：0 帧：0 TX 数据包：0 错误：0 丢弃：0 超限：0 载波：0 冲突：0 txqueuelen：0 RX 字节：0 (0.0 b) TX 字节：0 (0.0 b)

**错误**

```
mpirun -machinefile machine -np 4 ./query
error code:
[[22877,1],0][btl_tcp_endpoint.c:638:mca_btl_tcp_endpoint_complete_connect] connect() to 192.168.122.1 failed: Connection refused (111) 
```

**代码**

```
#include    <mpi.h>
#include    <stdio.h>
#include    <stdlib.h>
#include    <string.h>
#define     group           MPI_COMM_WORLD
#define     root            0
#define     size            100

int main(int argc,char *argv[])
{
int no_tasks,task_id,i;
MPI_Init(&argc,&argv);
MPI_Comm_size(group,&no_tasks);
MPI_Comm_rank(group,&task_id);
int arr1[size],arr2[size],local1[size],local2[size];
if(task_id==root)
{
    for(i=0;i<size;i++)
    {
        arr1[i]=arr2[i]=i;
    }
}
MPI_Scatter(arr1,size/no_tasks,MPI_INT,local1,size/no_tasks,MPI_INT,root,group);
MPI_Scatter(arr2,size/no_tasks,MPI_INT,local2,size/no_tasks,MPI_INT,root,group);
for(i=0;i<size/no_tasks;i++)
{
    local1[i]+=local2[i];
}
MPI_Gather(local1,size/no_tasks,MPI_INT,arr1,size/no_tasks,MPI_INT,root,group);
if(task_id==root)
{       
    printf("The Array Sum Is\n");
    for(i=0;i<size;i++)
    {
        printf("%d  ",arr1[i]);
    }
}
MPI_Finalize();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T19:58:57.513

告诉 Open MPI 不要使用虚拟网桥接口`virbr0`接口通过 TCP/IP 发送消息。或者更好地告诉它仅`eth0`用于以下目的：

```
$ mpiexec --mca btl_tcp_if_include eth0 ... 
```

这来自于`tcp`使用 TCP/IP 传输消息的 Open MPI 的 BTL 组件的贪婪行为。它尝试使用每个节点上所有可用的网络接口，以最大化数据带宽。两个节点都`virbr0`配置了相同的子网地址。Open MPI 认为这两个地址是相等的，但是由于子网匹配，它假定它应该能够交谈`virbr0`。因此，进程 A 正试图向位于另一个节点上的进程 B 发送消息。进程 B 侦听端口`P`并且进程 A 知道这一点，因此它尝试连接到`192.168.122.1:P`. 但这实际上是给`virbr0`进程 A 所在节点上的接口，因此该节点尝试在不存在的端口上与自己对话，因此出现“连接被拒绝”错误。

# javascript - JavaScript 添加类不起作用？

> ID：15227936
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:15.240
> 
> 标签：javascript, jquery

我有以下JS函数：

```
function addTopLinks() {

    $('#calendar .fc-view-resourceNextWeeks thead th .fc-resourceName')
 .addClass('top-cell');
}; 
```

它没有添加类。

我还有一个：

```
function addDayClass() {
    $('#calendar .fc-view-resourceNextWeeks thead th')
        .filter(function () {
            if ($(this).text().indexOf('Mon ') == 0) return true;

            return false;
        })
        .addClass('monday');
}; 
```

那个工作得很好。

这是层次结构：

![在此处输入图像描述](../Images/431ce088d10bc916e09411a648f1ccc5.png)

我真的不确定为什么第一个有效，而不是这个...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:42:29.020

更改您的选择器，而不是：

`'#calendar .fc-view-resourceNextWeeks thead th .fc-resourceName'`

尝试：

`'#calendar .fc-view-resourceNextWeeks thead th.fc-resourceName'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:42:29.963

```
$('#calendar .fc-view-resourceNextWeeks thead th .fc-resourceName').addClass('top-cell'); 
```

应该

```
$('#calendar .fc-view-resourceNextWeeks thead th.fc-resourceName').addClass('top-cell'); 
```

（注意删除和之间的`th`空格`.fc-resourceName`）

第一个是在with 类中寻找*另一个*元素，而您实际上想要那个元素。`th``.fc-resourceName`

# pagination - 如何通过自定义字段数据输入对表达式引擎进行分页或组织

> ID：15227941
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:30.793
> 
> 标签：pagination, customization, expressionengine

我有一个 ExpressionEngine 站点，该站点获取从管理员输入的信息，以及通过 SafeCracker 从用户输入的信息，并以时间线格式显示该信息。

输入的信息有一个名为 {story_year} 的自定义字段。我们使用该字段根据输入的日期对条目进行排序。这意味着用户可以指定日期以及管理员。

因为一次显示数百个条目需要很长时间，所以我们引入了分页。但是那个分页是按数量任意分解的。

有没有办法按 {story_year} 分页？可能的条件如：

```
{if story_year >= "2010" }
  {page}
    <li><a href="{pagination_url}" class="{if current_page}active{/if}">&bull;</a></li>
  {/page}
{if:elseif story_year >= "2000"}
  {page}
    <li><a href="{pagination_url}" class="{if current_page}active{/if}">&bull;</a></li>
  {/page}
{/if} 
```

相关网址在这里： [http](http://thinkx.net/clients/manship/index.php/timeline) ://thinkx.net/clients/manship/index.php/timeline——时间线的终极展示。 [http://thinkx.net/clients/manship/index.php/Timeline/add](http://thinkx.net/clients/manship/index.php/Timeline/add) - 我们排序的字段条目。

# php - 从浏览器执行成功时，php crontab 不工作

> ID：15227945
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:44.520
> 
> 标签：php, crontab

最近，我在托管服务提供商的 crontab 中运行的 php 脚本遇到了以下问题。该脚本用于从远程位置解析 xml 文件。初始脚本（在 crontab 中运行的一组）正在通过包括调用另一个脚本（这是执行 xml 解析的脚本）：

`include 'myXMLreader.php';`

当从浏览器执行脚本时，一切都运行良好（xml 被解析并存储在数据库中）。但是，当从 cron 运行时，我收到以下错误：

***“警告：myXMLreader::read() [xmlreader.read]：读取时发生错误...”***，脚本停止。

奇怪的是几天前从 crontab 中完美地执行了**相同的脚本。**

为了执行脚本，我在我的 cron 管理器中使用以下行：

`00 01 * * * php -q /home/my_domain/public_html/my_parser_script.php`

我还将脚本执行的时间限制设置为零 (0)，以避免因违反时间限制而被启动（因为 xml 解析需要超过 6 分钟才能完成）。

`set_time_limit(0);`

为什么会发生这种情况的任何帮助/建议？

发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:04:39.933

这可能是本地DNS问题吗？您可以通过将 IP 和域（xml 文件所在的位置）添加到服务器 /etc/hosts 文件来轻松测试这一点。

# php - 在获得除后结果和数组总和时除以零

> ID：15227946
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:46.787
> 
> 标签：php, codeigniter, models, divide-by-zero

在我的模型中：

```
function input()
{
    $vendor = $this->input->post('vendor');
    for($i=1;$i<=$vendor;$i++)
    {
        for($j=1;$j<=$vendor;$j++)
        {
            $delivery[$j] = $this->input->post('delivery_1_'.$j.'_'.$i);
            $totalsatu[$i]  = array_sum($delivery);
        }
        for($k=1;$k<=$vendor;$k++)
        {
            $delivery[$k] = $this->input->post('delivery_1_'.$k.'_'.$i);
            $totaldua[$i] = $totalsatu[$i] / $delivery[$k];
        }
    }
    return array
    (
        'result1' => $totalsatu,
        'result2' => $totaldua
    );
} 
```

在我的`views`，我打电话给`$result1`and`$result2`但我不断收到如下错误：

```
Message: Division by zero

Filename: models/core.php

Line Number: 113 
```

这是 113 的行号：

```
$totaldua[$i] = $totalsatu[$i] / $delivery[$k]; 
```

# c# - .NET 从标签中读取文本，无需自动化

> ID：15227947
> 
> 赞同：2
> 
> 时间：2013-03-05T15:40:52.623
> 
> 标签：c#, .net, testing, automation, .net-2.0

我正在编写一个 C# 应用程序来执行旧版 Win32 应用程序的测试自动化。这些测试需要运行应用程序、按下按钮并通过阅读标签文本来验证结果。我的测试平台仅限于 .NET 2.0，因此我的应用程序无法使用`System.Windows.Automation`.

关于如何使用 user32.dll 中的 WinAPI 调用与按钮等控件进行交互的信息非常丰富。但是，标签不是控件，也没有自己的`hWnd`句柄来使用`WM_GETTEXT`消息，我一直无法找到如何提取它们的文本。

我过去使用过企业（昂贵的）测试软件，它能够将标签识别为对象并读取它们的文本。该软件中的帮助文件含糊地解释了它是如何完成的，并且它是通过监视 Windows 库调用来完成的。

那么关于如何在 .NET 中捕获标签文本的任何想法，可能使用 Windows DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:47:12.157

我假设您无法控制旧版 Win32 应用程序中的代码。

所以，这可能是一个糟糕的想法（不，这实际上*是*一个糟糕的想法）。但作为最后的拼凑，将其视为最坏的情况，您可以 1) 以编程方式[截取](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)活动窗口的屏幕截图，然后 2) OCR 生成图像（可能使用[this](http://maniish.wordpress.com/2007/03/03/tesseract-ocr-library-successfully-compiled-in-window/)）。

# sql-server-2008 - 导入 Excel 并保存在数据库中

> ID：15227948
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:55.403
> 
> 标签：sql-server-2008, c#-4.0

```
Sr No   PS_Name    PS_Name Area
  1       ABC       ABC-1
                    ABC-2
                    ABC-3
  2       ABD       ABD-1
                    ABD-2
                    ABD-3

string filePath = null;
        foreach (string inputTagName in Request.Files)
        {
            HttpPostedFileBase Infile = Request.Files[inputTagName];
            if (Infile.ContentLength > 0 && (Path.GetExtension(Infile.FileName) == ".xls" || Path.GetExtension(Infile.FileName) == ".xlsx" || Path.GetExtension(Infile.FileName) == ".xlsm"))
            {
                filePath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory,
                              Path.GetFileName(Infile.FileName));
                if (System.IO.File.Exists(filePath))
                {
                    System.IO.File.Delete(filePath);
                }
                Infile.SaveAs(filePath);
                //Infile.SaveAs(filePath); 
            }

            if (filePath != null)
            {
                System.Data.OleDb.OleDbConnection oconn = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filePath.ToString() + ";Extended Properties=\"Excel 12.0 Xml;HDR=YES\";");
                oconn.Open();

                try
                {
                    if (oconn.State == System.Data.ConnectionState.Closed)
                        oconn.Open();
                }
                catch (Exception ex)
                {
                    // MessageBox.Show(ex.Message);
                }

                dynamic myTableName = oconn.GetSchema("Tables").Rows[0]["TABLE_NAME"];                    
                OleDbCommand ocmd = new OleDbCommand("select * from [" + myTableName + "]", oconn);

                OleDbDataReader odr = ocmd.ExecuteReader();
                if (odr.HasRows)
                {
                    while (odr.Read())
                    {                            
                        var c = odr[0];
                        var t = odr[1];
                        var de = odr[2];
                        //model.PS_NAME = odr[1].ToString().Trim();                            
                    }
                }
            }
        } 
```

我想导入 Excel 数据并将其保存在我的数据库 (SQL Server 2008) 中。我在excel中使用合并单元格选项。我在控制器中使用上面的代码。我得到了前两列，但是在获取合并单元格数据时遇到了问题。

# sql - 如何对包含数字和文本的 varchar 列运行条件聚合

> ID：15227949
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:56.513
> 
> 标签：sql, sql-server-2008

我对 SQL Server 2008 还很陌生，但遇到了问题。我有一个表，其中包含一个带有实验室结果的 varchar(255) 列。列中的数据如下所示：

```
result_value
7.0
162
NEGATIVE
SEE NOTE
9.6 
```

现在，我要做的是运行以下查询：

```
;WITH PatientData (patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units )
AS
(
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
FROM dbo.dem_patient pat
RIGHT JOIN dbo.med_problemlist as pl
ON pat.patient_id = pl.patient_id
JOIN dbo.enc_encounter as enc
ON pat.patient_id = enc.patient_id
JOIN dbo.med_labresult as lab
ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '250%' AND
enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
)
select sum(case when result_value < 7.0 then 1 else 0 end) as [LessThan7%],
       sum(case when result_value >= 7.0 and result_value < 8.0 then 1 else 0 end) as [7%to8%],
       sum(case when result_value >= 8.0 and result_value < 9.0 then 1 else 0 end) as [8%to9%],
       sum(case when result_value >= 9.0 then 1 else 0 end) as [GreaterThan9%]
FROM PatientData pd1 
WHERE EXISTS (SELECT patient_id 
                FROM PatientData pd2 
                WHERE pd2.patient_id  = pd1.patient_id  
                GROUP BY patient_id 
                HAVING COUNT(*)>1 ) 
```

由于我应该只返回进行了 A1c 测试的患者，因此 results_value 列应该始终看起来像 xx - 但是，我尝试运行此查询时，我得到“将 varchar 转换为数据类型 numeric 的算术溢出错误。

虽然我意识到将这些不同类型的数据放在同一列中并不理想，但我并没有创建数据库——我只需要使用它。反正有这个问题吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:45:59.400

您可以使用这种解决方案。让我们考虑这个表和数据。

```
CREATE TABLE [tb](
[id] [int] IDENTITY(1,1) NOT NULL primary key,
[result] [varchar](50) NULL,
) ON [PRIMARY] 
INSERT [tb] ([id], [result]) VALUES (1, N'12')
INSERT [tb] ([id], [result]) VALUES (2, N'24')
INSERT [tb] ([id], [result]) VALUES (3, N'35')
INSERT [tb] ([id], [result]) VALUES (4, N'NEGATIVE')
INSERT [tb] ([id], [result]) VALUES (5, N'SEE NOTE')
INSERT [tb] ([id], [result]) VALUES (6, N'15.5')
INSERT [tb] ([id], [result]) VALUES (7, N'16.4') 
```

您可以使用 ASCII 函数（ASCII 返回字符表达式的最左侧字符的 ASCII 码值。）从此示例数据中获取正确的数字

```
 select id,ascii(result),convert(decimal(16,2),result) as result from tb
 where ascii(result)>=ascii('0') and ascii(result)<=ascii('9')
  union 
 select id,ascii(result),-1.0 as result from tb
 where ascii(result)<=ascii('0') or ascii(result)>=ascii('9') 
```

您可以根据需要标记无效记录。您可以向此查询添加更多逻辑。您可以将其用作子查询或与“join”一起使用。我希望它会帮助你。

马辛·帕兹吉尔

# matlab - 我需要帮助设置正确的频率向量

> ID：15227950
> 
> 赞同：0
> 
> 时间：2013-03-05T15:40:59.250
> 
> 标签：matlab, vector, fft

我有一个频率为 100 Hz 的波（它是一组数据）。我想绘制幅度和相位角与频率的关系。这就是我所做的，但我的幅度显示在错误的频率上，我错过了什么？

```
given x=[....] set of data representing wave of frequency = 100 Hz, of length 1500.
first: Nfft = 2^nextpow2(length(x));
second: Fs = 1000; (that is 10 times my frequency of 100, is that correct?)
third: get fft : xdft = fft(x,Nfft);
forth: get amplitude: amp = abs(xdft);
fifth: get phase :    ang = unwrap(angle(xdft)); 
```

现在我的主要问题是正确设置频率向量，这就是我所做的

```
f_fold = Fs/2; % folding frequency = max frequency of FFT (Hz)
T = Nfft/Fs % total sample time (s)
del_f = 1/T; % (Hz)
f_v = [0:del_f:f_fold]'; % frequency (Hz) 
```

我也尝试了matlab的建议：f_v = Fs*(0:Nfft-1)/Nfft

但是我的幅度总是以错误的频率显示。我能做些什么来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:41:59.137

首先，FS（您的采样频率）不是任意的。如果给定一组时域数据，则该数据的采样频率已经确定。您可以通过上采样（在现有数据点之间进行插值）获得更高的采样频率，或者通过删除数据点获得更低的采样频率（下采样）。

其次，当您在 Matlab 中获取行向量的 fft 时，您会返回

```
[positive frequency data, negative frequency data] 
```

函数[fftshift](http://www.mathworks.com/help/matlab/ref/fftshift.html)可用于将其置于更“可见”的格式中。

```
fftshift(fft(x)) 
```

将返回

```
[negative frequency data, positive frequency data] 
```

如果没有您的数据集，我无法为您的幅度不对齐的原因提供确切的解决方案（尽管我怀疑这与您选择的采样频率有关）。但是，这里有一个说明这些概念的示例。

```
fs = 500; % 500 Hz sampling frequency: 500 > 2*100 => satifies Nyquist
t = 0:1/fs:10; % 10 seconds of data sampled at fs
y = sin(2*pi*100.*t) + sin(2*pi*25.*t); % Two sinusoids at 25 Hz and 100 Hz
Y=fftshift(fft(y));
f=linspace(-fs/2, fs/2, length(Y));
plot(f, abs(Y)); 
```

您应该在 -100、-25、25 和 100 处有四个幅度尖峰。

这是另一个更类似于您的代码的示例。

```
fs = 500; % 500 Hz sampling frequency: 500 > 2*100 => satifies Nyquist
t = 0:1/fs:10; % 10 seconds of data sampled at fs
y = sin(2*pi*100.*t) + sin(2*pi*25.*t); % Two sinusoids at 25 Hz and 100 Hz
NFFT = 2^nextpow2(y); %8192
Y=fft(y, NFFT);
delta_f = fs/(NFFT-1);
f=0:delta_f:fs/2;
plot(f, abs(Y(1:length(f))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-31T13:22:09.120

你可以使用我的小工具[easyFFT](https://de.mathworks.com/matlabcentral/fileexchange/75139-easyfft)。除了 FFT 之外，它还会为您计算正确的频率矢量。

# resize - Kineticjs如何在舞台上居中图像并根据浏览器调整大小

> ID：15227955
> 
> 赞同：4
> 
> 时间：2013-03-05T15:41:04.537
> 
> 标签：resize, kineticjs, stage

我正在向舞台添加一个图像作为背景图像和一个矩形。如何确保矩形在舞台上居中并且背景根据浏览器调整大小？

```
<body style="overflow: hidden">
<div id="container" style="width:100%;height:100%;margin:auto;"></div>
<script>
var stage = new Kinetic.Stage({
container: 'container',
width: 1680,
height: 1050
});

var layer = new Kinetic.Layer();
stage.add(layer);

var rect = new Kinetic.Rect({
    x: 239,
    y: 75,
    width: stage.getWidth() / 2,
    height: stage.getHeight() / 2,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4
  });

  layer.add(rect);
  stage.add(layer);

var imageObj = new Image();
  imageObj.onload = function() {
    var myBg = new Kinetic.Image({
     x: 0,
      y: 0,
      image: imageObj,
      width: 1770,
      height: 1200,
      opacity: 0
    });

    layer.add(myBg);
    stage.add(layer);    

imageObj.src = 'img/bg.png';
  </script>
 </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:44:39.287

第一件事，

你有一个小错误，除非你出于某种原因打算这样：

```
//these lines
layer.add(myBg); // correct
stage.add(layer);   // not correct, remove, you already have the layer on the stage, why add it again?
//instead do this:
layer.draw(); // this will just redraw the layer, since you already added the object. 
```

要自动调整舞台大小，只需像这样创建你的舞台：

```
 var stage = new Kinetic.Stage({
      container: 'container',
      width: window.innerWidth,  
      height: window.innerHeight
 }); 
```

要使对象居中，您必须计算其与舞台相比的宽度和高度，并相应地放置它。

```
var rect = new Kinetic.Rect({
    x: stage.getWidth()/4,
    y: stage.getHeight()/4,
    width: stage.getWidth() / 2,
    height: stage.getHeight() / 2,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4
}); 
```

这个很简单，因为您的矩形是舞台宽度的一半和高度的一半。

一个更复杂的解决方案，它考虑了不同的大小，是这样的：

```
 x: (stage.getWidth()/2)-(rect.getWidth()/2) // similar for height
    y: (stage.getHeight()/2)-(rect.getHeight()/2) // similar for height 
```

# c++ - MISRA 的文字零而不是空指针常量警告

> ID：15227956
> 
> 赞同：4
> 
> 时间：2013-03-05T15:41:04.583
> 
> 标签：c++, reference, null-pointer, misra

我有这个功能：

```
void InitS(unsigned int &numS){
   // this function returns a container for unsigned int
   // but it has a cast for int
   numS = props.numOfS();
   if (numS > 0) {
        ..
   }
} 
```

它编译但给了我这个 MISRA 警告：

> MISRA-C++ 规则 4-10-2（必需）：文字零 (0) 不得用作空指针常量。

现在，如果`numShots`是一个“真正的”指针，我本可以更改`0`为`NULL`. 但是`numShots`是参考，我应该把它当作一个`int`.

MISRA 想要什么，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:50:56.747

由于`nums`是`unsigned int`，您需要比较`0U`，其中附加的“U”表示文字是无符号整数，而没有符号整数。

这一直困扰着我的团队。我们不明白为什么需要将零标记为无符号。

此外，您不处理指针。函数签名 ,`unsigned int&`表示变量将通过引用而不是指针传递。您将修改原始对象，而不是副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T14:23:32.493

首先让我说我没有 MISRA-C++ 的经验，但是有很多 MISRA-C。

MISRA-C 对适用于 MISRA-C++ 的类型安全有一些担忧。一个这样的担忧是不应该发生隐式类型提升。这是一个有效的问题，隐式类型提升很难理解并导致错误。令人惊讶的是，大多数 C 和 C++ 程序员甚至不知道隐式类型提升是如何工作的。为了让程序员了解这一点并防止此类错误，有许多关于隐式类型转换/提升的 MISRA 规则。

*   一条这样的规则对所有整数文字强制使用 'u' 后缀。该规则背后的基本原理是澄清接近最大 int 值的大型文字是无符号的，例如文字的类型对`0x80000000`读者来说并不明显。（我个人认为该规则是多余的并且有些误导，因为所有隐式转换危险都已被其他规则涵盖。）

*   还有另一条规则指出针对 NULL 的指针检查应该是明确的。你不能写`if(ptr)`，你应该写`if(ptr!=NULL)`。基本原理是可读性和类型安全。

*   显然有这条规则不应该将指针与零文字进行比较。我不明白这背后的基本原理，据说他们害怕你把指针和普通的整数变量混在一起。他们显然已经决定偏离 Bjarne Stroustrup 的雄心壮志，即在 C++ 中揭开空指针的神秘面纱。根据 Stroustrup 的说法，NULL 和 0 在 C++ 中总是等价的（尽管 C++11 将有一个 nullptr 关键字一劳永逸地解决这个问题）。

*上述*规则都与您示例中的代码无关！您正在将引用与零文字进行比较，这是非常安全的。MISRA 检查器可能会抱怨缺少“u”后缀，但您的检查器没有。

我的结论是：

*   您的 MISRA-C++ 检查器有故障并给出不正确的错误。
*   针对文字零的特定 MISRA-C++ 规则似乎没有任何意义。您应该在 MISRA 实施中提出与此规则的偏差并完全忽略该规则，直到有人可以提供理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T07:52:32.253

我可能是错的，我在编程方面不是很老练，可能答案有点晚了，但我认为您的 MISRA-C 检查器正在考虑“他正在将“引用”类型的变量与文字常量进行比较，所以他必须检查 NULL 引用”，即使它对引用并不真正有效，但您可以尝试将函数 props.numOfS() 的返回值分配给新变量，然后对 numS 引用的变量进行分配对新变量进行比较时的另一行。

IE

```
void InitS(unsigned int &numS){
   unsigned int foo;
   foo = props.numOfS(); //this function returns a container for unsigned int but it has a cast for int
   numS = foo;
   if (foo > 0) {
        ..
   }
} 
```

之后检查它是否在抱怨。

# sql - SQL 查询 - 最大和重复

> ID：15227957
> 
> 赞同：0
> 
> 时间：2013-03-05T15:41:05.580
> 
> 标签：sql, duplicates, max

我试图找出在这种情况下如何使用 MAX()。在此查询的结果中，我有重复项，我只想找到一个最新记录（这里是日期：CL.CL_DATE_FROM）并通过 db1.IDF 和 O.IDp 对其进行重复数据删除。

```
SELECT
  db1.IDF as IDF,
  O.IDp as IDP,
  O.Action as Action,
  U.USR_IDENT as Operator,
  O.ID_T as ID_T,
  OC.OC_MEMO as MEMO,
  CONVERT(VARCHAR(10),CL.CL_DATE_FROM,120) as date,
  CONVERT(VARCHAR(8),CL.CL_DATE_FROM,108) as time
from OUTBOUND OC
  join CALL CL on CL.CL_ID= OC.OC_CL_ID
  join CAMPAIGN CA on CA.CA_ID = OC.OC_CA_ID
  join STATUSES ATT on ATT.AS_ID = OC.OC_AS_ID
  join USERS U on U.USR_ID = OC.OC_USR_ID
  join Outbound_Z O on O.ID = OC.OC_CUS_ID
  join db1.dbo.Clients db1 on db1.ID_T = O.ID_T
where CL.CL_DATE_FROM BETWEEN '2013-03-05 00:00:00.000' AND '2013-03-05 23:59:59.000' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:45:35.373

您应该能够使用与此类似的东西，这将返回`max(CL_DATE_FROM)`for each `CL_ID`：

```
SELECT
  db1.IDF as IDF,
  O.IDp as IDP,
  O.Action as Action,
  U.USR_IDENT as Operator,
  O.ID_T as ID_T,
  OC.OC_MEMO as MEMO,
  CONVERT(VARCHAR(10),CL.MaxDate,120) as date,
  CONVERT(VARCHAR(8),CL.MaxDate,108) as time
from OUTBOUND OC
join
(
    select max(CL_DATE_FROM) MaxDate,
        CL_ID
    from CALL
    where CL_DATE_FROM BETWEEN '2013-03-05 00:00:00.000' AND '2013-03-05 23:59:59.000'
    group by CL_ID
) CL 
    on CL.CL_ID= OC.OC_CL_ID
join CAMPAIGN CA 
    on CA.CA_ID = OC.OC_CA_ID
join STATUSES ATT 
    on ATT.AS_ID = OC.OC_AS_ID
join USERS U 
    on U.USR_ID = OC.OC_USR_ID
join Outbound_Z O 
    on O.ID = OC.OC_CUS_ID
join db1.dbo.Clients db1 
    on db1.ID_T = O.ID_T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:51:57.130

我会用`row_number()`这个：

```
with t as (
    SELECT db1.IDF as IDF, O.IDp as IDP, O.Action as Action, U.USR_IDENT as Operator,
           O.ID_T as ID_T, OC.OC_MEMO as MEMO, CONVERT(VARCHAR(10),CL.CL_DATE_FROM,120) as date,
           CONVERT(VARCHAR(8),CL.CL_DATE_FROM,108) as time,
           ROW_NUMBER() over (partition by db1.idf, o.idp order by cl.cl_date_from desc) as seqnum
    from OUTBOUND OC
      join CALL CL on CL.CL_ID= OC.OC_CL_ID
      join CAMPAIGN CA on CA.CA_ID = OC.OC_CA_ID
      join STATUSES ATT on ATT.AS_ID = OC.OC_AS_ID
      join USERS U on U.USR_ID = OC.OC_USR_ID
      join Outbound_Z O on O.ID = OC.OC_CUS_ID
      join db1.dbo.Clients db1 on db1.ID_T = O.ID_T
    where CL.CL_DATE_FROM BETWEEN '2013-03-05 00:00:00.000' AND '2013-03-05 23:59:59.000'
   )
select *
from t
where seqnum = 1 
```

`row_number()`是一个窗口函数，它为记录组分配一个序号。在这种情况下，组由两个 id 定义。排序是最近的被分配 1。

顺便说一句，像这样的查询中的重复可能是由连接引起的。不同的连接是多行，结果是值的笛卡尔积。您还可以进行调查以找出重复的原因并在那里解决问题。

# java - 符号与其 ascii 值的比较

> ID：15227958
> 
> 赞同：2
> 
> 时间：2013-03-05T15:41:06.667
> 
> 标签：java, android, xml

在 android 中设计国际象棋时，我使用 ascii 值作为符号。当单击带有典当的按钮时，我得到了它的符号。现在我想将此符号与其值进行比较。

```
Button myButton = (Button) v
src=myButton.getText().toString();
if(src.equals("&#9823;"))
{
  //code..
} 
```

我点击黑棋。所以 src 包含黑棋的符号。Black pawn ascii 值为 (♟)。但在执行上述代码时，条件显示为 false。如何将符号与其 ascii 值进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:54:18.313

这就是你想要的：

```
Button myButton = (Button) v
src=myButton.getText().toString();
if(src.equals("\u265f"))
{
  //code..
} 
```

[您可以在此处](http://dev.networkerror.org/utf8/?start=9823&end=9824&cols=1&search=&show_uni_int=on&show_uni_hex=on&show_html_ent=on&show_raw_hex=on&show_raw_bin=on)查找 Unicode 编号并使用它。

示例代码：

```
public static void main(String[] args) {
    String t = "♟";     
    System.out.println(t.equals("\u265f")); //true
} 
```

# objective-c - 如何使用情节提要、segue、协议和委托将数据从我的第二个视图控制器传递回我的第一个视图控制器？

> ID：15227959
> 
> 赞同：0
> 
> 时间：2013-03-05T15:41:10.960
> 
> 标签：objective-c, xcode, storyboard, uistoryboardsegue, navigationcontroller

好吧，这是我的第一篇文章，因为我需要 10 的声誉，所以无法上传图片，XD 但没关系：

![在此处输入图像描述](../Images/8f7b940f42d1e975af43d3322d4f0bec.png)

嗨，伙计们，我需要将一个 label.text 从我的第二个或子视图控制器的 tableview 中的单元格传递到我的第一个或父视图控制器，我想推入一个单元格并返回字符串以加载到标签中从我的第一个视图控制器中，我确实使用了故事板中的 segues，我确实使用了协议和委托，但没有工作，在另一个问题中，答案或示例与我需要的相反，或者对于 xcode 版本来说是非常不同的方式，或者最好的方法是如何做到这一点？，在图片中，我使用按钮转到下一个视图控制器，以在我的第一个视图控制器中选择我想要的标签文本，我也使用 xcode 4.6 & storyboard & ARC， ＆有些代码行已被弃用，请帮帮我！＆ 多谢！！！，

来自玻利维亚的问候！！！n_n'

代码是这样的：

```
 @interface FirstViewController : UIViewController <SecondTableViewControllerDelegate>

    @property (copy, nonatomic) NSString *displayText;
    @property (weak, nonatomic) IBOutlet UILabel *displayLabel;
    @property (strong, nonatomic)IBOutlet UIButton *Next;

    @end

    @interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize Next;

    -(void)viewDidLoad
    {
        [super viewDidLoad];
        if (![[NSUserDefaults standardUserDefaults] objectForKey:@"FIRST_TIME"])
        {
            NSLog(@"ES PRIMERA VEZ");
            [Next sendActionsForControlEvents:UIControlEventTouchUpInside];
        }
        else
        {
            NSLog(@"NO ES PRIMERA VEZ");
        }

    }

    - (void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];

        if (self.displayText)
        {
            self.displayLabel.text = self.displayText;
        } else {
            self.displayLabel.text = kDefaultDisplayText;
        }
    }

    #pragma mark - Delegate methods

    - (void)updateText:(NSString *)text {
        self.displayText = text;
    }

    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
        if (![segue.identifier isEqualToString:@"toSecondTableview"]) {
            return;
        }
        /*
        SecondTableViewController *destinationController = segue.destinationViewController;
        destinationController.delegate = self;
        destinationController.editText = self.displayText;
        */

        //-- if I pass data from the first view controller to the second right?

    }

    @end

in the second view

    @protocol SecondTableViewControllerDelegate <NSObject>

    @optional
    - (void)updateText:(NSString *)text;

    @end

    @interface SecondTableViewController : UIViewController<UITableViewDelegate, UITableViewDataSource>

    @property (weak, nonatomic) id<SecondTableViewControllerDelegate> delegate;
    @property (copy, nonatomic) NSString *editText;
    @property (weak, nonatomic) IBOutlet UITableView *myTable;

    @interface SecondTableViewController ()

    @end

    @implementation SecondTableViewController

    -(void)viewDidLoad
    {
        [super viewDidLoad];
        [[NSUserDefaults standardUserDefaults] setObject:@"NO" forKey:@"FIRST_TIME"];

         //---how use the UItable Methods?, how use the protocol method?
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return self.myArray.count;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"myArray";

        myArrayCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        NSDictionary *conjunto = [self.jogArray objectAtIndex:indexPath.row];

        cell.myLabel.text = [conjunto objectForKey:@"prueba"];

        return cell;
    } 
```

或者协议委托必须在另一个视图控制器中？，我想在标签中显示来自下一个视图控制器的任何单元格的文本我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:48:31.167

我会使用委托模式。使用文本为手机的方法定义协议。

```
- (void) labelText:(NSString*)text; 
```

或者。让部分视图控制器实现协议。假设它被称为`YourProtocol`. 在子视图控制器中声明类型的委托属性`(id)<YourProtocol>`。在部分视图控制器中分配`self`给`childControler.delegate`. 当它即将分配文本时，请仔细检查委托是否符合协议或响应选择器 labelText: 然后调用它。

听起来比实际更复杂，而且有点“干净”。

# ssis - 如何解决 SSIS dtsx 文件和 GAC 之间的版本错误？

> ID：15227960
> 
> 赞同：0
> 
> 时间：2013-03-05T15:41:12.563
> 
> 标签：ssis, version, gac

我有一个在 SSIS 包中引用的 DLL。我强烈命名它并添加到 GAC。在我的开发机器上一切正常。现在我正在尝试部署包。因此，在服务器上，我使用创建的 Windows 安装程序包将 DLL 添加到 GAC。GAC 中的 DLL 版本是 7.2.0.1。然后我为服务器上的包运行部署实用程序安装程序。这成功运行并使用 .dtsx 文件创建了包。如果我在服务器上的记事本中打开 .dtsx 文件并查找对 DLL 的引用，它会说它应该引用 7.2.0.1。然后我设置作业以实际运行包。启动作业后，程序包运行并失败。这会在事件查看器中创建一条错误消息，指出程序包正在寻找版本 7.1.0.9。

我到处寻找具有该版本的此 DLL 的副本，但找不到它。我搜索了我的开发机器和服务器，但没有 7.1.0.9。我不确定这个 DLL 曾经有过那个版本。所有引用都指向 7.2.0.1，但无论我做什么，它仍然认为它需要 7.1.0.9。

有人对这里可能出了什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:50:13.873

在 SSIS 2005 和 SSIS 2008R2 中使用自定义 DLL 时，我们发现我们必须将 DLL 安装**在**GAC**和**.NET Framework 2.0 目录中，并且两个版本必须匹配。IIRC，.NET Framework 2.0 文件夹中的版本被 BIDS 用于包设计，也被 dtexec 用于包验证；GAC 中的版本用于包执行。我相信（但从未试图证明）DLL 强名称被编译成脚本任务/组件的二进制表示。

因此，我将首先查看是否有该版本 7.1.0.9 DLL 的副本隐藏在 .NET Framework 2.0 文件夹中的任何位置，或 PATH 环境变量中的任何其他位置，在您的开发框和目标服务器上。

（注意：我不知道 SSIS 2012 是否具有相同的行为，因此这可能适用于您的情况，也可能不适用。）

# javascript - 框架在javascript中是什么意思？

> ID：15227961
> 
> 赞同：2
> 
> 时间：2013-03-05T15:41:17.347
> 
> 标签：javascript

我正在阅读“可维护的 javascript”一书。在书中，作者谈到了框架，需要帮助来理解是什么意思。

> **在帧之间**来回传递数组是 JavaScript中最初的**跨帧问题之一。**开发人员很快发现 instanceof Array 在这些情况下并不总是产生适当的结果。如前所述，**每一帧**都有自己的 Array 构造函数，因此一帧中的实例无法在另一**帧**中识别。Douglas Crockford 首先建议执行一些鸭子类型，测试 sort() 方法的存在：

```
// Duck typing arrays
function isArray(value) {
  return typeof value.sort === "function";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:44:32.823

这是指[HTML`<frame>`元素](http://www.w3.org/community/webed/wiki/HTML/Elements/frame)，或[现代`<iframe>`](http://www.w3.org/community/webed/wiki/HTML/Elements/iframe)

关键是帧之间`Array`是单独创建的，您无法`instanceof`在一个帧（可能是主文档）中创建的数组和在`<iframe>`'s 代码中创建的数组之间进行比较。

# c# - 在 C++ 代码中调用 TerminateThread 后在 C# 代码中检测到 FatalExecutionEngineError

> ID：15227968
> 
> 赞同：4
> 
> 时间：2013-03-05T15:41:24.733
> 
> 标签：c#, c++, multithreading, access-violation

如果我从 C++ 代码调用 TerminateThread，那么稍后我会得到 FatalExecutionEngineError MDA。该错误主要发生在我对字符串（即 concat）执行不同操作时。下面列出的代码只是显示如何重现它。

为什么会发生？如何修复它并仍然使用 TerminateThread？

谢谢

错误是：

```
FatalExecutionEngineError was detected
Message: The runtime has encountered a fatal error. 
The address of the error was at 0x7880bb35, on thread 0x18f0\. 
The error code is 0xc0000005\. This error may be a bug in the CLR or in the unsafe or non-verifiable portions of user code. 
Common sources of this bug include user marshaling errors for COM-interop or PInvoke, which may corrupt the stack. 
```

C++ 代码：
Module.cpp：

```
#include "ThreadModule.h"
using namespace ThreadModule;

DWORD WINAPI workThread(LPVOID lpParam) {
    while(1) {
        System::Threading::Thread::Sleep(5);
        printf(".");
    }
    return 0;
}

bool Module::StartThread() {
    handle = CreateThread(
        NULL,
        0,
        workThread,
        NULL,
        0,
        &threadIdInput);
    return true;    
}

bool Module::StopThread() {
    TerminateThread(handle, 0);
    handle = NULL;
    return true;
} 
```

C#代码：

```
static void Main(string[] args)
{
    Module module = new Module();

    module.StartThread();
    string s = "";
    for (int i = 0; i < 10000; i++)
    {
        s += i.ToString();
    }
    module.StopThread();
    s = "";
    for (int i = 0; i < 10000; i++)
    {
        s += i.ToString();  //After ~250 iteration get exception
    }
    Console.WriteLine("Completed!!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:14:13.340

```
 System::Threading::Thread::Sleep(5); 
```

您启动的线程正在运行托管代码，而不是本机 C++ 代码。显然，您使用有效的 /clr 选项编译了它，因此您可以编写 C++/CLI 代码。这是一个问题，CLR 知道那个线程。必然地，它需要在运行垃圾收集器时查看线程的堆栈以查找托管对象引用。

这使得用 TerminateThread() 杀死线程是个问题，比现在更多的是，它是一个危险的 winapi 函数，它不执行任何清理操作。CLR 在扫描该死线程的堆栈时发生故障。

CLR 可以使用 Thread::Abort() 执行安全的线程中止。这样做仍然不是一个好主意，但至少你不会让你的程序严重失败。请注意，当线程运行本机代码时，Abort() 将不起作用。最好完全放弃中止线程是个好主意的想法。

要求线程很好地停止的一个明显地方是 while(1) 语句。

# javascript - AJAX 和可访问性：活动元素上的焦点或选项卡索引

> ID：15227975
> 
> 赞同：1
> 
> 时间：2013-03-05T15:41:46.997
> 
> 标签：javascript, ajax, accessibility

我目前正在开发一个必须可访问的 AJAX 应用程序（WGAG 2.0，AA）。

我正在使用屏幕阅读器测试我的应用程序（目前在 Mac Os X 上为 Voice Over）。

导航由一系列按钮组成。当用户单击一个按钮时，javascript 检查内容是否已添加到页面，如果没有，它会执行 AJAX 调用，将新的 div 附加到页面，隐藏以前的元素并显示新内容，这工作正常.

我遇到的问题是我希望用户在按下按钮时直接进入内容，因此该人可以直接阅读内容而不是将光标留在按钮上（所以现在，当客户端按下按钮时，光标停留在按钮上，而不是读取已加载的内容）。

我试过：

```
$(id).attr("tabindex",-1).focus(); 
```

和

```
$(id).focus(); 
```

其中 id 是包含 id 值的变量（使用正确的选择器“#”）。

它不能很好地工作，我认为这是因为在第二次单击按钮时，两个元素的 tabindex 设置为 -1，但我不确定。

我想知道是否有人知道我应该使用哪种方法？

****更新 ******

 **在同一页面（AJAX 应用程序）中有 2 个地方我需要该功能，第一部分是一个小部件，其中将 tabindex 设置为 -1 可以正常工作：

地方一

html

```
<div id="audience-list" class="with-shadow">
    <div id="group-links">
        <div id="confirm-dialog" class="toolBar">
            <button id="cancelBtn">
                Cancel
            </button>
            <button value="group-1" class="highlighted" id="confirmBtn">
                Confirm
            </button>
        </div>
        <div class="d4p-no-ajax group-link selected">
            <div class="span-4 prepend-top">
                <div class="box square with-outset with-large-radius">
                    <div id="apuo" role="button" class="choose-group-button">
                        <h2>My group</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

javascript（根据我昨天学到的知识，我应该用 on 替换 click 功能，会这样做，但现在它工作得很好）。当用户点击按钮时，他被发送到持有按钮取消和确认的 div。这工作得很好！

```
$(".choose-group-button").click(function(e){

    $('#confirm-dialog').addClass('enabled').attr("tabindex",-1).focus();

}); 
```

PLACE II，只是不工作

html：我用链接和按钮尝试了不同的场景，没有更多的机会。当你点击一个链接或者一个按钮的时候，你应该tabindex到href中引用的div（这里是dom内容，anchors被修改了#avantages -> #/avantages已经被修改了）或者带有ID内容的div——容器

```
<div>

    <div id="ico-avantages" class="box box-ico square">
        <span class="ico"></span>
        <a id="d4p-link15" href="#/avantages">
            Avantages sociaux 
        </a>
    </div>

    ...

    <div class="clear">
    </div>
</div>
<div id="content-container">
    <div id="avantages">
    ...
    </div>
    ...
</div> 
```

JAVASCRIPT

```
$('.box-ico a').each(function(){
    $(this).click(function(){
        $('#content-container').attr('tabindex', -1).focus();     
    });
}); 
```

tabindex 设置为 -1，屏幕滚动到 div，但在这种情况下，屏幕阅读器停留在链接级别，而在同一页面上的位置 1，它工作得很好。我现在想知道是否有一些更具体的条件必须申请 div 才能获得焦点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:34:38.977

Tabindex 0 和 -1 具有与正整数不同的行为。[Snook 关于 tabindex 的帖子](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex)可能会有所帮助。一个页面上的多个元素可以包含一个`tabindex="-1"`. 我不是专家`<buttons>`，但通常它们用于表单提交与导航，所以我的第一个建议是将按钮制作成普通链接。

```
<a href="#myID">Jump to Section name</a>
...
<div id="myID" tabindex="-1">
...
</div> 
```

你可能需要做另一个技巧

```
<a href="#myID">Jump to Section name</a>
...
<div>
 <a name="myID" id="myID" tabindex="-1"></a>
...
</div> 
```**

# jquery - 重复代码

> ID：15227983
> 
> 赞同：0
> 
> 时间：2013-03-05T15:42:04.840
> 
> 标签：jquery

有没有办法缩短它，感觉就像我在重复代码，看起来很不整洁？

```
jQuery(document).ready(function() {
    $('.allText').hide();

$('#b1').click(function() {
    $('.allText').hide();
    $('#text1').fadeIn(800);
});

$('#b2').click(function() {
    $('.allText').hide();
    $('#text2').fadeIn(800);
});

$('#b3').click(function() {
    $('.allText').hide();
    $('#text3').fadeIn(800);
});

$('#b4').click(function() {
    $('.allText').hide();
    $('#text4').fadeIn(800);
});

$('#b5').click(function() {
    $('.allText').hide();
    $('#text5').fadeIn(800);
});

$('#b6').click(function() {
    $('.allText').hide();
    $('#text6').fadeIn(800);
});

$('#b7').click(function() {
    $('.allText').hide();
    $('#text7').fadeIn(800);
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:45:27.590

```
$('#b1,#b2,#b3,#b4,#b5,#b6').click(function() {
    $('.allText').hide();
    $('#text'+this.id.substr(-1)).fadeIn(800);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:45:58.560

添加`class`到 b 元素，例如：

```
<div id="b1" class="b"></div>
<div id="b2" class="b"></div>
<div id="b3" class="b"></div> 
```

并用于`class`点击事件

```
$('.b').click(function() {
    $('.allText').hide();
    $('#text'+this.id.substr(-1)).fadeIn(800);
}); 
```

或者

```
<div id="b1" class="b" data-text="#text1"></div>
<div id="b2" class="b" data-text="#text2"></div>
<div id="b3" class="b" data-text="#text3"></div>

$('.b').click(function() {
    $('.allText').hide();
    $((this).data("text")).fadeIn(800);
}); 
```

AS @joeframbach 建议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:44:06.873

创建一个接受数字作为参数的新函数，然后将字符串相加：

```
$('#b' + id).click(function() {
    $('.allText').hide();
    $('#text' + id).fadeIn(800);
}); 
```

在这种情况下`id`是参数。

之后，您可以创建一个`for`循环来一遍又一遍地运行该函数。在您需要添加一些东西的情况下，这几乎可以让您的生活变得轻松。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:45:24.383

你可以分配一个类，然后做这样的事情（如果你把你的元素类“bclass”）

```
$('.bclass').click(function(){
    $('.allText').hide();
    $('#text'+this.id.substr(-1)).fadeIn(800);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:50:58.183

一种重构方法是将所有 b# 元素放在 div 标签中，然后选择带有 id/class 的 div 标签并`.children()`用于获取所有 b# 元素。

例子：

```
$('#mydiv').children().click(function() {
    $('.allText').hide();
    $('#text2').fadeIn(800);
}); 
```

# c++ - C++ Xcode 构造函数错误

> ID：15227987
> 
> 赞同：1
> 
> 时间：2013-03-05T15:42:09.703
> 
> 标签：c++, xcode

刚刚开始将我的项目转移到 Xcode，并且在尝试构建我的项目时，我的构造函数定义出现错误。在默认构造函数上，我得到“预期的成员名称或';' 在声明说明符之后”和另一个构造函数我得到：

1.  “预期的 '）'”
2.  字段的类型不完整 'Button::Button'
3.  非朋友级成员“字符串”不能有限定名

```
#include <string>

#ifndef BUTTON_H
#define BUTTON_H

namespace interface1
{
class Button
{
    private:
        std::string name;
        float xPos;
        float yPos;
        float width;
        float height;

    public:
        //Default constructor
        Button::Button();
        //Constructor with id, x, y, width and height parameters
        Button::Button(std::string, float, float, float, float); 

        //Getters and setters
        std::string getName();
        float getX();
        void setX(float);
        float getY();
        void setY(float);
        float getWidth();
        void setWidth(float);
        float getHeight();
        void setHeight(float);
        bool isClicked(int, int);
        void draw(int, float, float, float, float);
};
}
#endif 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:09:54.510

由于构造函数在您的类定义中，因此与其他成员函数一样，它们不需要`Button::`前缀。有些编译器仍然接受额外的限定，有些则不接受。

```
class Button {
    Button(); //already in class scope, so no extra qualification needed
}; 
```

另一方面，当您在类之外定义这些成员时，您确实需要资格。否则，它会创建一个新函数（至少对于具有返回类型的非构造函数）：

```
class Button {
    Button();
    void foo();
};

void foo(){} //new function, not Button::foo()
void Button::foo(){} //definition of member function
Button::Button(){} //definition of constructor 
```

# jquery - Bootstrap JQuery Validate：输入和之间的错误消息

> ID：15227988
> 
> 赞同：2
> 
> 时间：2013-03-05T15:42:10.660
> 
> 标签：jquery, html, twitter-bootstrap, jquery-validate

当结合使用 Twitter Bootstrap 和 Jquery Validate 时，一切正常，除非使用带有（图标）附加组件的字段，例如：

```
<label>Datum:</label>
<div id="datum" class="input-append">
   <input data-format="dd-MM-yyyy" type="text" name="datum" placeholder="Kies een datum..." />
   <span class="add-on">
      <i data-date-icon="icon-calendar"></i>
   </span>
</div> 
```

当出现错误时，HTML 如下所示：

```
<label>Datum:</label>
<div id="datum" class="input-append">
   <input data-format="dd-MM-yyyy" type="text" name="datum" placeholder="Kies een datum..." />
   <label for="datum" generated="true" class="error" style="">Datum is verplicht.</label>
   <span class="add-on">
      <i data-date-icon="icon-calendar"></i>
   </span>
</div> 
```

这就是它在浏览器中的外观：

[![浏览器示例](../Images/9c588ab9d47903cbe810f357d7f90a21.png)](https://i.stack.imgur.com/Bn3CI.png)

如何解决这个问题？希望有人能帮忙！

**编辑**

```
(function($,W,D)
{
    var JQUERY4U = {};

    JQUERY4U.UTIL =
    {
        setupFormValidation: function()
        { onkeyup: false
            //form validation rules

            // LOGIN FORM
            $("#loginform").validate({        
                onkeyup: false,
                 rules: {
                    gebruikersnaam: {
                        required: true           
                    },
                    wachtwoord: {
                        onkeyup: false,
                        required: true,
                        minlength: 5,
                    }
                },
                messages: {
                    gebruikersnaam: {
                        required: "Vul aub een gebruikersnaam in."                      
                    },
                    wachtwoord: {
                        required: "Vul aub een wachtwoord in.",
                        minlength: "Wachtwoord moet minimaal 5 tekens langs zijn.",
                    },
                },
                submitHandler: function(form) {
                    form.submit();
                }
            });

            // NIEUWE DISTRIBUTIE OPDRACHT

    $("#distributieopdracht").validate({  

        onkeyup: false,
         rules: {
            opdrachtgever: {
                required: false                
            },
            datum: {
                required: true
            },
            frequentie: {
                required: true
            },
            actie: {
                required: true
            },
            product: {
                required: false
            },
            aantal: {
                required: false,
                digits: true
            },
            koeling: {
                required: true
            },
            tarief: {
                required: false,
                decimal: true
            },
            naam: {
                required: false,
                naam: true
            },
            adres: {
                required: false
            },
            plaats: {
                required: false
            },
            telefoonnnummer: {
                required: false,
                telefoon: true
            },
            opmerkingen: {
                required: false
            },
        },
        messages: {
            datum: {
                required: "Datum is verplicht."
            },
            frequentie: {
                required: "Frequentie is verplicht."
            },
            actie: {
                required: "Keuze is verplicht."
            },
            aantal: {
                digits: "Alleen getallen."
            },
            koeling: {
                required: "Keuze is verplicht."
            },
            tarief: {
                decimal: "Vul een geldig tarief in."
            },
            naam: {
                naam: "Vul een geldige naam in."
            },
            telefoonnnummer: {
                telefoon: "Vul een geldig telefoonnummer in."
            }
        },
        submitHandler: function(form) {
            form.submit();
        }
    });
        }
    }

    //when the dom has loaded setup form validation rules
    $(D).ready(function($) {
        JQUERY4U.UTIL.setupFormValidation();
    });

})(jQuery, window, document); 
```

**编辑**

```
$(document).ready(function () {

       $("#loginform").validate({        
        onkeyup: false,
            rules: {
               gebruikersnaam: {
                   required: true           
               },
               wachtwoord: {
                onkeyup: false,
                   required: true,
                   minlength: 5,
               }
           },
           messages: {
               gebruikersnaam: {
                required: "Vul aub een gebruikersnaam in."                      
               },
               wachtwoord: {
                   required: "Vul aub een wachtwoord in.",
                   minlength: "Wachtwoord moet minimaal 5 tekens langs zijn.",
               },
           },

       });

      $("#distributieopdracht").validate({  
            onkeyup: false,
             rules: {
                opdrachtgever: {
                    required: false                
                },
                datum: {
                    required: true
                },
                frequentie: {
                    required: true
                },
                actie: {
                    required: true
                },
                product: {
                    required: false
                },
                aantal: {
                    required: false,
                    digits: true
                },
                koeling: {
                    required: true
                },
                tarief: {
                    required: false,
                    decimal: true
                },
                naam: {
                    required: false,
                    naam: true
                },
                adres: {
                    required: false
                },
                plaats: {
                    required: false
                },
                telefoonnnummer: {
                    required: false,
                    telefoon: true
                },
                opmerkingen: {
                    required: false
                },
            },
            messages: {
                datum: {
                    required: "Datum is verplicht."
                },
                frequentie: {
                    required: "Frequentie is verplicht."
                },
                actie: {
                    required: "Keuze is verplicht."
                },
                aantal: {
                    digits: "Alleen getallen."
                },
                koeling: {
                    required: "Keuze is verplicht."
                },
                tarief: {
                    decimal: "Vul een geldig tarief in."
                },
                naam: {
                    naam: "Vul een geldige naam in."
                },
                telefoonnnummer: {
                    telefoon: "Vul een geldig telefoonnummer in."
                }
            },
            errorPlacement: function(error, element) {
                if (element.next().is('.add-on')) {
                    error.addClass('add-on').insertAfter(element.next('.add-on'));
                } else {
                    error.insertAfter(element);
                }
                error.append(element.parent());
           });
    });

}); 
```

**形式**

```
<div id="distributie" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="distributieLabel" aria-hidden="true">
    <form class="modal-form" action="submit.php" data-remote="true" method="post" id="distributieopdracht">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="distributieLabel">Nieuwe Distributie Opdracht</h3>
        </div>
        <div class="modal-body">

            <label>Opdrachtgever:</label> 
                <input type="text" name="opdrachtgever" placeholder="Typ hier de opdrachtgever..." /><br /> 

            <label>Datum:</label>
                <div id="datum" class="input-append">
                    <input data-format="dd-MM-yyyy" type="text" name="datum" placeholder="Kies een datum..." />
                    <span class="add-on"><i data-date-icon="icon-calendar"></i></span>
                </div>

            <label>Frequentie:</label> 
                <select name="frequentie">
                    <option value="">Kies een frequentie...</option>
                    <option value="eenmalig">Eenmalig</option>
                    <option value="dagelijks">Dagelijks</option>
                    <option value="wekelijks">Wekelijks</option>
                    <option value="tweewekelijks">Twee-wekelijks</option>
                    <option value="maandelijks">Maandelijks</option>
                    <option value="jaarlijks">Jaarlijks</option>
                </select><br /> 

            <label>Actie:</label>
                <select name="actie">
                    <option value="">Kies een actie...</option>
                    <option value="ophalen">Ophalen</option>
                    <option value="afleveren">Afleveren</option>
                </select><br /> 

            <label>Product:</label> 
                <input type="text" name="product" placeholder="Typ hier een product..." /><br /> 

            <label>Aantal colli:</label>
                <input type="text" name="aantal" placeholder="Typ hier het aantal..." /><br />

            <label>Koeling:</label> 
                <select name="koeling">
                    <option value="">Kies een optie...</option>
                    <option value="ja">Ja</option>
                    <option value="nee">Nee</option>
                    </select><br />

            <label>Tarief:</label>
                <input type="text" name="tarief" placeholder="Typ hier een tarief..." /><br />

            <label>Naam:</label>
                 <input type="text" name="naam" placeholder="Typ hier een naam..." /><br /> 

            <label>Adres:</label>
                <input type="text" name="adres" placeholder="Typ hier het adres..." /><br />

            <label>Plaats:</label>
                <input type="text" name="plaats" placeholder="Typ hier de plaats..." /><br />

            <label>Telefoonnummer:</label>
                <input type="text" name="telefoonnummer" placeholder="Typ hier het telefoonnummer..." /><br />

            <label>Opmerkingen:</label>
                <textarea rows="3" name="opmerkingen" placeholder="Typ hier eventuele opmerkingen..."></textarea>
    </div>
    <div class="modal-footer">
        <input type="submit" value="Invoeren" class="btn btn-primary" /> 
        <a href="#" class="btn" data-dismiss="modal">Annuleren</a>
    </div>
  </form>
</div> 
```

**编辑**

**现在的情况：**

[![示例 2](../Images/3228bd34054db1cac0cd5dda5ff6ac16.png)](https://i.stack.imgur.com/WWPsA.png)

**目标：**

[![示例 2](../Images/d43a3b15dcdecc96ae87483e3b0edd4c.png)](https://i.stack.imgur.com/G9DyL.png)

**编辑**

```
errorPlacement: function (error, element) {
                if (element.next().is('.add-on')) {
                    error.insertAfter(element.next('.add-on'));
                } else {
                    error.insertAfter(element);
                }
                element.parent().insertAfter(error);
            } 
```

**@jani-hyytiainen 的工作解决方案：**

```
errorPlacement : function(error, element) {
        if (element.next().is('.add-on')) {
             error.insertAfter(element.parent());
        } 
        else {
             error.insertAfter(element);
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:15:03.487

查看此处[http://docs.jquery.com/Plugins/Validation/validate#toptions中的 errorPlacement 选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)

```
$("#myform").validate({
    errorPlacement: function(error, element) {
        element.parent().append(error);
    }
}); 
```

您还可以测试是否存在附加组件，更改错误消息的位置，将其样式设置为类似于附加组件等等：

```
$("#myform").validate({
    errorPlacement: function(error, element) {
        if (element.next().is('.add-on')) {
            error.addClass('add-on').insertAfter(element.next('.add-on'));
        } else {
            error.insertAfter(element);
        }
    }
}); 
```

它看起来像这样：

![附加类的错误放置](../Images/407d2995556a80e85839d6edc2ba92ff.png)

抱歉，日历没有图标，但它是输入后的正方形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T06:24:22.947

我在**bootstrap 3中遇到了****日期选择器验证**的问题。 为了解决这个问题，我检查了元素是否是日期选择器，然后在元素的父组之外显示错误，否则执行默认操作。

 **这是最终代码。

```
errorPlacement: function(error, element) { 
    if ($(element).hasClass("date-picker") ) {
        error.insertAfter($(element).closest('.input-group'));
    }
    else
    {
        error.insertAfter(element);
    }
}; 
```

希望这会对某人有所帮助:)**

# jquery - 全局 jQuery ui 确认框

> ID：15227991
> 
> 赞同：0
> 
> 时间：2013-03-05T15:42:18.637
> 
> 标签：jquery

基本上我想`jQuery ui dialog`在同一个页面的任何地方使用，我怎么能用这个？

我编写了以下代码，并且我需要自定义所需的东西

```
 $( "#dialog-confirm" ).dialog({
                resizable: false,
                height:140,
                modal: true,
                autoOpen: false,
                buttons: {
                    "Okay": function() {
                        $( this ).dialog( "close" );
                        return true;
                    },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                        return false;
                    }
                }
            }); 
```

* * *

```
$('.trashImage').live('click', function (event) {

    some value= "Item0289478"

// Open DialogBox and pass some value to show user that, you are going to delete this

if it is true 
{
// go to delete

}
else
{
back.....to page
}

    }); 
```

我怎么能这样做，我在同一页面中有许多不同的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:45:31.837

```
function reuse(divId)
{
  $( "#"+divId ).dialog({
} 
```

每当您需要显示 jQuery 对话框时，只需动态传递 id。